# StackOverflow 问答 15641000-15641999

# c# - Blaze Advisor 的这个例外是什么意思

> ID：15641011
> 
> 赞同：0
> 
> 时间：2013-03-26T15:29:34.190
> 
> 标签：c#

当尝试使用这行代码从 C# 调用 Blaze 规则时：

```
return (T)invokeService(serviceName, entrypointId, null, applicationArgs); 
```

我们得到以下异常：

> 在程序集 'com.blazesoft.AdvisorSvr, Version=6.10.143.12, Culture=neutral, PublicKeyToken=4d5643bfb1cd71f0' 中键入 'com.blazesoft.server.local.NdLocalServerException' 未标记为可序列化..

如果我们使用相同的输入数据测试 Blaze 中的规则，它就可以正常工作。

任何人都知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:36:23.417

看起来像是在跨 AppDomains`invokeService`抛出一个。`NdLocalServerException`由于 Exception 不可序列化（根据 Microsoft 的说法，它们都应该是可序列化的），因此您将得到另一个 Exception，即原始 Exception 类型不可序列化。

# sql - 如何确定一个项目是否出现在两个日期之间，可能有日期例外和星期几限制？

> ID：15641018
> 
> 赞同：0
> 
> 时间：2013-03-26T15:30:07.813
> 
> 标签：sql, sql-server, tsql

这有点复杂，所以我会尽力解释下面的一切。我已经搜索了一下，我只是无法让它们一起工作。

我有以下表格：

```
Events
----------------
ID int
Name varchar(100)
StartDate datetime
EndDate datetime

EventDaysOfWeek
------------------
EventID int
DayOfWeekNumber int

EventDateExceptions
--------------------
EventID int
ExceptionDate datetime 
```

我需要做的是获得一个月的所有事件。但是任何事件都可以有任意数量的日期例外（事件未发生的日期），并且事件可以设置为仅在一周中的某些天运行（例如，仅在周二和周四）。以下是我到目前为止的 proc 代码（显然没有完成），它在传入的开始日期和结束日期之间获取任何事件，在这种情况下，它将是月初和月底。

```
Declare @first datetime,    
@last datetime  

Set @first = '3/1/2013' --first date in the range being checked
Set @last = '3/31/2013' --last date in the range being checked

select * from events     
where   
(startdate BETWEEN @first AND @last   -- starts in month
or enddate BETWEEN @first AND @last) -- ends in month
or ((startDate <= @first and endDate >= @last )) -- spans the entire date range 
```

**编辑：**

以下是关于我的问题的一些额外细节：

*   一个事件从开始到结束日期连续运行

*   如果添加了日期例外，则事件将不会在该日期发生

*   星期表将确定事件发生的星期几（例如，如果事件在 3 月 1 日 = 3 月 31 日运行，则可以将星期几设置为星期四，这意味着事件只会在星期四之间运行开始和结束日期）

最初我的问题措辞错误。我并不想优化我必须太多的代码（尽管您的建议很受赞赏）我正在寻找有关我的查询的帮助，以使其返回在开始日期和结束日期之间发生的所有事件，但还要考虑日期异常和为事件设置的星期几。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:46:47.260

正如您所说，这个问题有点晦涩，看起来您的 proc 根本没有解决您的“异常”，所以我猜您打算稍后添加它们吗？

就您的 proc 及其性能而言（这是我看到的唯一真正的问题）

首先， SELECT * 很慢。始终首选只选择您实际需要的列。其次，对于日期范围而言，Between 运算符通常比执行 <= >= 操作更快，但并不总是可以使用它。

所以：

```
SELECT [just the columns you need]
FROM events     
WHERE (startDate BETWEEN @start AND @end) -- starts in month
or (endDate BETWEEN @start AND @end) -- ends in month
or (startDate <= @start and endDate >= @end) -- spans the month? 
```

**编辑**这是一个完整的 sql 查询，应该可以满足您的要求：

```
declare @startdate date = '2013-03-01'
,@enddate date = '2013-04-01'
,@counter int = 0;
declare @DateTable table (SeqDate Date);

declare @Events table (ID int, Name varchar(100), StartDate Date, EndDate Date);
insert into @Events values(1, '1Event', '2013-03-14', '2013-03-16');
insert into @Events values(2, '2Event', '2013-03-01', '2013-03-13');

declare @EventDateException table (EventId int, ExceptionDate Date);
--insert into @EventDateException values (1, '2013-03-14');
insert into @EventDateException values (1, '2013-03-15');
--insert into @EventDateException values (1, '2013-03-16');

declare @EventDaysOfWeek table (EventId int, DayOfWeekNumber int);
insert into @EventDaysOfWeek values (2, 5);
insert into @EventDaysOfWeek values (2, 6);

/* create a table of all days in the series */
while @startdate < @enddate
begin
insert into @DateTable (SeqDate)
select @startdate
set @startdate = dateadd(dd, 1, @startdate)
set @counter = @counter + 1
end;

select distinct ID, Name from 
--select * from 
@Events e
join @DateTable d
on 1 = 1
left join @EventDateException ex
on e.ID = ex.EventId AND ex.ExceptionDate = d.SeqDate
left join @EventDaysOfWeek dow
on e.ID = dow.EventId
where d.SeqDate BETWEEN e.StartDate AND e.EndDate
AND (d.SeqDate <> ex.ExceptionDate OR ex.ExceptionDate IS NULL)
AND (DATEPART(DW,d.SeqDate) = dow.DayOfWeekNumber OR dow.DayOfWeekNumber IS NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:49:13.280

如果您的限定词是“这必须至少在月初开始，并且不能在月结束后的完成日期结束，或者为空，您可以简化：

```
Where StartDate >= @Start and (EndDate <= @EndDate or EndDate is not null) 
```

当您使用 OR 子句添加多个谓词（where 语句）时，引擎必须考虑所有这些。你越快确定你的逻辑越好。这可能不是您想要的，但我知道您的逻辑在这里暗示某些逻辑因素将是多余的，例如：

“开始日期总是在连续的结束日期之前吗？” =

应该这样我就不必担心使用结束日期作为起点。这也意味着如果我想在当月得到“完成”的东西，我只需要在小于或等于的范围内寻找结束日期，因为开始日期总是更短，因此不需要合格的。

但是，如果您的订单或产品正在运输中且尚未完成怎么办？根据您的逻辑来填充表，如果您有空值，则可以将其限定出来。但是，有些人在获得所有信息之前不会在表格中输入行，我不知道您的情况。如果你从来没有空值，你可以省略我的括号，只需要：

```
Where StartDate >= @Start and EndDate <= @EndDate 
```

# google-chrome-extension - 错误 - 无法调用未定义的方法“sendRequest”

> ID：15641023
> 
> 赞同：1
> 
> 时间：2013-03-26T15:30:07.883
> 
> 标签：google-chrome-extension

我正在尝试使用本教程构建 RSS Fetcher 扩展 -

[http://www.lifehacker.com.au/2011/11/how-to-build-a-chrome-extension](http://www.lifehacker.com.au/2011/11/how-to-build-a-chrome-extension)

但我想这有点老了，谷歌已经做了一些改变。那里的扩展下载根本不起作用。我已经解决了许多错误以使其正常工作，但我陷入了困境：

> 未捕获的类型错误：无法调用未定义的方法“sendRequest”

这是我的**popup.html**文件的错误所在。

```
function fetch_feed() {
chrome.extension.sendRequest({'action' : 'fetch_feed', 'url' : 'http://spfc.terra.com.br/rss/news.xml'}, 
    function(response) {
        display_stories(response);
        }
    );
}

function display_stories(feed_data) {
    var xml_doc = $.parseXML(feed_data);
    $xml = $(xml_doc);
    var items = $xml.find("item");
    $('#popup').html('<img src="logo.png" id="logo" onclick="open_item(\'http://spfc.terra.com.br/\'); window.close();" /><br clear="all" />');
    items.each(function(index, element) {
        var post = parse_post(element);
        var item = '';
        var class2 = '';
        if (index >= localStorage['unread_count']) {
            // // console.log('visited');
            item += '<div class="post read">';
        }
        else {
            item += '<div class="post">'
        }
        item += '<span class="tag">' + post.tag + '</span>\
                    <a href="' + post.url + '">\
                        <div id="' + post.id + '" class="item" onclick="open_item(\'' + post.url + '\');">\
                            <img src="' + post.img + '" width="107" height="60" />\
                            <h4>' + post.title + '</h4>\
                            <span class="description">' + post.description + '...</span>\
                        </div>\
                    </a>';
        item += '</div>';
        $('#popup').append(item);
    });
} 
```

顺便说一句，我在**background.html**中也有一个错误，在这部分：

```
function fetch_feed(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(data) {
      if (xhr.readyState == 4) {
        if (xhr.status == 200) {
          var data = xhr.responseText;
          callback(data);
        } else {
          callback(null);
        }
      }
    }
    // Note that any URL fetched here must be matched by a permission in
    // the manifest.json file!
    xhr.open('GET', url, true);
    xhr.send();
}   

function onRequest(request, sender, callback) {
    if (request.action == 'fetch_feed') {
      fetch_feed(request.url, callback);
    }
}

chrome.extension.onRequest.addListener(onRequest); 
```

是同样的错误，但有另一个属性：

> 未捕获的类型错误：无法读取未定义的属性“onRequest”

PS在询问之前我已经尝试在这里找到解决方案并且不能。等待一些帮助来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:50:22.943

`chrome.extension.sendRequest`已弃用，您应该将`chrome.runtime.sendMessage`其用于将消息传递到后台脚本

您可以在以下位置查看完整的 api：[Chrome 消息传递](http://developer.chrome.com/extensions/messaging.html)

# c# - 如何从另一个组件中获取 user.config 的路径？

> ID：15641026
> 
> 赞同：1
> 
> 时间：2013-03-26T15:30:13.630
> 
> 标签：c#, .net, configuration, properties.settings, user-config

我希望我的解决方案中的所有程序集只有一个配置文件。那么`user.config`从其他程序集获取路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:34:38.387

user.config 只不过是一个 xml 文件。您可以使用 XmlDocument 阅读它。

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("user.config");

XmlElement element = doc.DocumentElement;

XmlAttributeCollection attr_coll = myElement.Attributes;

for (int i = 0; i < attr_coll.Count; i++)
{
    string attr_name = attr_coll[i].Name;
} 
```

# hadoop - 出现错误：运行 Hadoop 示例时包 org.apache.hadoop.conf 不存在

> ID：15641034
> 
> 赞同：1
> 
> 时间：2013-03-26T15:30:45.603
> 
> 标签：hadoop, classpath

我已经`hadoop jars`使用导出添加到类路径中，`CLASSPATH=${CLASSPATH}:/~Downloads/hadoop-1.0.4/*.jar`但我仍然收到未找到包的错误。

我正在使用`Java 1.7.0_17`.

有人知道如何`hadoop jars`正确设置类路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:48:40.863

不是`CLASSPATH`您想将它们设置为，而是`HADOOP_CLASSPATH`. 我喜欢使用以下内容从我的当前目录和`lib`目录中添加所有 jar 依赖项：

```
export HADOOP_CLASSPATH=$HADOOP_CLASSPATH:`echo *.jar`:`echo lib/*.jar | sed 's/ /:/g'` 
```

请记住，如果您开始工作，`hadoop jar`您还需要通过使用`-libjars`. 我喜欢使用：

```
hadoop jar <jar> <class> -libjars `echo ./lib/*.jar | sed 's/ /,/g'` [args...] 
```

**注意：**命令`sed`需要不同的分隔符；是分开的，`HADOOP_CLASSPATH`需要分开的。`:``-libjars``,`

# mysql - 使用一个 MySQL 查询从两个表中获取数据？

> ID：15641036
> 
> 赞同：1
> 
> 时间：2013-03-26T15:30:51.680
> 
> 标签：mysql, social

我正在构建一个社交网络页面，并希望在提要页面上获取所有用户的活动。

我有一个评论表：

```
user_id    comment                date
1          "Hi...."               24 March 2013
2          "Hello..."             25 March 2013
1          "Another comment..."   26 March 2013 
```

还有一个喜欢表：

```
user_id    id_of_liked_item     date
1          101                  24 March 2013 
1          145                  25 March 2013 
```

是否可以执行单个查询以将它们放入所有用户活动的数组中，按日期排序？如果是这样，该查询会是什么样子？我的数组需要看起来像这样：

```
$activity = array(
    array(
        "type"=>"comment",
        "content"=>"Comment goes here"
    ),
    array(
        "type"=>"like",
        "item_id"=>345,
    )
) 
```

我很擅长处理php数据，所以我可能不需要太多帮助来组织数组，但我的问题主要是首先如何从数据库中获取数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:35:11.280

最简单的方法可能是使用联合：

```
SELECT
    'comment' AS type,
    comment AS content,
FROM comments
UNION
SELECT
    'like' AS type,
    id_of_liked_item AS item_id 
```

当然，您还可以为`WHERE`联合中的每个查询添加条件和附加列，以便按用户组织。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:39:34.800

是的，一个 UNION 是要走的路：

```
SELECT 'comment' AS Type, Comment AS Content, NULL as Item_ID, Date
  FROM Comments
  WHERE User_Id = 1
UNION ALL SELECT 'like', NULL, id_of_liked_item, Date
  FROM Likes
  WHERE User_Id = 1 
```

这将为您提供如下所示的结果集：

```
Type    Content            Item_ID Date
------- ------------------ ------- -------------
comment Hi....             null    24 March 2013
comment Another comment... null    26 March 2013
like    null               101     24 March 2013
like    null               145     25 March 2013 
```

你可以从那里拿走它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:43:41.213

尝试使用 UNION：

```
SELECT * FROM 
(SELECT `user_id`, `comment` AS activity, `date` FROM comments

UNION

SELECT `user_id`, `id_of_liked_item` AS activity, `date` FROM likes) 

AS user_activity

ORDER BY user_activity.`date` 
```

# python - Python端口检查器 - 无法访问的网络

> ID：15641038
> 
> 赞同：1
> 
> 时间：2013-03-26T15:30:53.380
> 
> 标签：python, port, connect, ipv6

我需要帮助。
两周前，这样的代码没有问题并测试**了 IPv6 地址的端口**，但现在突然抛出**异常**：
错误：[Errno 10051] 尝试对无法访问的网络进行套接字操作。

**代码：**

```
print "IPv4 connection..."
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    s.connect(('173.194.70.101', 80))
    s.shutdown(2)
    print "Success connection"
except socket.error as e:
    sys.stderr.write("Error: " + str(e))
    print "Cannot connect"

print "IPv6 connection..."
s = socket.socket(socket.AF_INET6, socket.SOCK_STREAM)
try:
    s.connect(('2a00:1450:4001:c02:0:0:0:8b', 80))
    s.shutdown(2)
    print "Success connection"
except socket.error as e:
    sys.stderr.write("Error: " + str(e))
    print "Cannot connect" 
```

**安慰：**

```
IPv4 connection...
Success connection
IPv6 connection...
Cannot connect
Error: [Errno 10051] A socket operation was attempted to an unreachable network 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:26:47.410

你的例子对我有用。

问题是您没有有效的 IPv6 连接。

# javascript - 为什么spine.Model在原型中有同名函数

> ID：15641044
> 
> 赞同：1
> 
> 时间：2013-03-26T15:31:09.337
> 
> 标签：javascript, spine.js

我试图了解它是如何工作的

为什么函数在原型中具有相同的名称以及如果函数（例如 Model.fromForm 优先于原型之一）如何使用它们。我的意思是声明是在基类/对象中进行的。当您从该基类/对象创建模型时究竟发生了什么？

我还有另一个问题，但我会先等这个。

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:32:37.817

Spine 模型对象和模型的“实例”是不同的对象，因此评估不同的功能。这里没有优先级或重载。例如（在coffeescript中）以下做同样的事情：

```
YourModel instance = YourModel.fromForm(form) # Uses the model object fromForm 
```

和

```
YourModel instance = new YourModel
instance.fromForm(form) # Uses the prototype fromForm 
```

如果你[看一下源代码](https://github.com/spine/spine/blob/master/src/spine.coffee)，你就会明白为什么它是等价的；该对象`fromForm`被简单地声明为`this.fromForm`，它调用原型之一：

```
@fromForm: ->
  (new this).fromForm(arguments...) 
```

# sql - 在查询执行期间，是否有任何方式/平台可以根据需要评估 SQL 绑定？

> ID：15641045
> 
> 赞同：0
> 
> 时间：2013-03-26T15:31:11.837
> 
> 标签：sql, bind, ondemand, sql-execution-plan, sqlbindparameter

**语境：**

假设我有一个大查询（伪）：

```
SELECT %boundthing,data
WHERE data in (
    ...do lots of long-running stuff
) 
```

让我们假设`boundthing`在我的查询中没有使用，但是当我想打印输出时（我知道这是一个愚蠢的用例，但它说明了我知道在子句运行`boundthing`之后才需要的点）。`WHERE`

实际上，如果我`boundthing`以我选择的编程语言将值传递给我的查询，则在我触发查询时会对其进行评估，而不管数据库实际“使用”多久。

**问题：**

有没有办法（在现有的数据库/编程语言中）根据需要设置要评估的绑定样式的事物（即，它为绑定变量生成一个值，无论源是变量还是函数）查询，而不是查询计划何时建立？

例如，我可以在应用程序伪代码中说：

```
function MyFunc:
    return "foo" + system.GetEpochTimestamp();

var results = database_handle.Execute( SQL = "
    SELECT %boundthing,data
    WHERE data in (
        ...do lots of long-running stuff
    )", BINDS = [ ("boundthing", MyFunc ) ]
); 
```

并且输出中“boundthing”的值将对应于*应用程序服务器上的时间戳，在* `WHERE` *子句过滤所有内容*之后（减去`myfunc`应用程序服务器上的运行时间，以及数据到达数据库服务器所需的时间）并由数据库处理）。

**为什么我想知道：**

好奇心。

我知道这样的事情可能会破坏查询计划器提供的很多（可能是全部）效率。我知道您永远无法保证绑定的评估将在查询中需要值*时准确*执行（存在值传输时间、数据库处理时间等）。我也知道它违反了许多原子性保证，并且在中止或中断的情况下可能会导致严重的问题。

不过，我很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:27:00.023

```
CREATE PROC MyFunc
AS
BEGIN
    SELECT * INTO #MyTempTable FROM data where data in ( ...do lots of long-running stuff);
    $boundthing='EXEC boundthing'
    select $boundthing, * from #MyTempTable
END
GO 
```

希望对扎克有所帮助。

-皮特

# ruby-on-rails - 从 validates_uniqueness_of (Rails 2) 中删除属性

> ID：15641048
> 
> 赞同：0
> 
> 时间：2013-03-26T15:31:34.747
> 
> 标签：ruby-on-rails, validation, error-handling, attributes

我对模型有以下几点：

```
validates_uniqueness_if :posicao_bastidor, :message => "my message" 
```

发生错误时，rails 会给我以下消息：

```
"Posicao bastidor my message" 
```

我不希望'Posicao bastidor'出现。我只想要消息。

关于如何做的一些线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:41:27.810

尝试在消息中使用前导 ^，如下所示：

```
validates_uniqueness_if :posicao_bastidor, :message => "^ my message" 
```

# memory - JNAerator BridJ 运行时静态方法实例内存

> ID：15641053
> 
> 赞同：0
> 
> 时间：2013-03-26T15:31:59.083
> 
> 标签：memory, static, jnaerator, bridj

所以我最近更新了我的 JNAerator 并开始使用新的 BridJ 运行时，我正在尝试调试我遇到的一个问题，我不确定它是我的库的代码还是 JNAerator 本身。

基本上在我的 C 库中，我有一个`init()`方法可以跨其他 C 库方法在内存共享变量中进行初始化。我注意到使用新的 BridJ 运行时和为我的库生成的 Java 代码仅创建静态方法的新注释。这是否会导致我的 C 库在对各种静态 Java 方法的不同调用中维护内存值时出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T23:11:16.393

在 BridJ 中，静态或非静态 C 方法的绑定是严格等价的（尽管非静态绑定方法显然需要您实例化库类）。

# java - 如何使用扫描仪类在java中水平获取输入以计算字符串输入

> ID：15641056
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:32:01.573
> 
> 标签：java, printing, user-input

我对编程不是很熟练，想知道如何从用户那里获得水平而不是垂直的输入？：基本上像这样。abcd 而不是

```
a
b
c
d 
```

“为了澄清，我想计算他们输入了多少个字符串字母，我意识到我可以使用一个扫描仪类，但我想看看他们是否输入了第 n 个字符串并限制他们输入更多！！！！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:43:59.057

尝试这个：

```
 Scanner in = new Scanner(System.in);
   String input = "";

    while (in.hasNext()) {

        input += in.next();

    }
    in.close(); 
```

# php - 将汇总的每日销售额数组转换为php中的字符串

> ID：15641058
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:32:10.730
> 
> 标签：php, multidimensional-array

我正在努力使这个 PHP 数组转换为我需要的字符串格式。

```
$result = mysql_query($query) or die(mysql_error());

$result1 = array();

while($row = mysql_fetch_array($result)){

  $result1[strtotime($row['DOB'])][strtotime($row['DOB'])] = strtotime($row['DOB']);

  $result1[strtotime($row['DOB'])]['PRICE'] += $row['PRICE'];

}
print_r($result1); 
```

当前输出为：

```
[1136246400] => Array
    (
        [1136246400] => 1136246400
        [PRICE] => 165.5
    )

 [1136332800] => Array
    (
        [1136332800] => 1136332800
        [PRICE] => 169.5
    ) 
```

我需要它是：

```
 Array ( [0] => [1136246400, 165.5] [1] => [1136332800, 169.5] ) 
```

对 PHP 来说很新 - 任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:38:45.787

据我了解，您需要以下内容：

```
$i = 0;
while($row = mysql_fetch_array($result)){
  $result1[$i][0] = strtotime($row['DOB']);
  // to avoid warning in $result1[$i][1] += $row['PRICE']; 
  if(!isset($result1[$i][1]))
     $result1[$i][1] = 0;
  // -----------
  $result1[$i][1] += $row['PRICE'];
  $i++;
}
print_r($result1); 
```

# android - 监控 Android 设备上的 GPS 使用情况

> ID：15641062
> 
> 赞同：0
> 
> 时间：2013-03-26T15:32:31.453
> 
> 标签：android, gps, listener, monitoring

我正在尝试在 Android 设备上设置监控功能。我想监控手机上 GPS 传感器的实际使用情况。这意味着我主要对用户何时打开/关闭 GPS 传感器不感兴趣，但他何时通过任何给定的应用程序（例如地图、基于位置的搜索）使用 GPS 数据。

我已经尝试过[使用 addGpsStatusListener 获取 GPS 开始/停止事件](https://stackoverflow.com/questions/3749539/get-gps-start-stop-events-with-addgpsstatuslistener)中提到的方法，但是没有成功。

我也不清楚 GPS_EVENT_STARTED 是否意味着传感器从待机状态恢复，或者只是反映了用户在设置中切换“允许 GPS”。（见：http: [//developer.android.com/reference/android/location/GpsStatus.Listener.html](http://developer.android.com/reference/android/location/GpsStatus.Listener.html)）

有人知道吗：

a) 这样的功能是否可以实现/是否已经实现

b) 如何做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T12:01:48.487

经过对几种方法的过度测试（选择）：
[如何在 Android 上以编程方式启用或禁用 GPS？](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)
[Android 启用和禁用 GPS](https://stackoverflow.com/questions/4015094/android-enable-and-disable-gps)
[如何以编程方式在 Android Cupcake](https://stackoverflow.com/questions/1051649/how-to-programmatically-enable-gps-in-android-cupcake)
[中启用 GPS 如何在 android 编码中启用 GPS](https://stackoverflow.com/questions/5481695/how-to-enable-gps-in-android-coding)

我发现在 Android v4.2.2 上确实不可能切换 GPS 状态（无论状态到底意味着什么，我的问题中也提出过）。我特别发现了一条评论[如何在 Android 上以编程方式启用或禁用 GPS？](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)被*误导*。即使在 4.2.2 中应该重新出现带有电源控制小部件的漏洞利用，**它也已被修复**。

# ios - 为什么 ImageView.StartAnimating 不会在主线程上设置动画

> ID：15641064
> 
> 赞同：2
> 
> 时间：2013-03-26T15:32:36.200
> 
> 标签：ios, multithreading, animation, xamarin.ios, uiimageview

我正在尝试为 TableView 单元格中的一系列图标图像设置动画，但无法让 ImageView.StartAnimating 工作。TableView 位于 UITableViewController 中，并且有一个 TableViewDataSource 文件，其中设置了 TableView 内容。

在我的 TableViewDataSource 中，我设置了 PNG 数组并配置了各种动画首选项。

```
UIImage image0 = GetImage("Images/image_at_0_degrees@2x.png");
UIImage image45 = GetImage("Images/image_at_45_degrees@2x.png");
UIImage image90 = GetImage("Images/image_at_90_degrees@2x.png");
UIImage image135 = GetImage("Images/image_at_135_degrees@2x.png");
UIImage[] images = new UIImage[] { image0, image135, image90, image45 };

cell.ImageView.AnimationImages = images;
cell.ImageView.AnimationDuration = 0.5;
cell.ImageView.AnimationRepeatCount = 0;
cell.ImageView.Image = image0;

// cell.ImageView.StartAnimating(); // If called here images will animate 
```

如果我在 TableViewDataSource 中调用 StartAnimating（在上面的示例中注释掉），图像会按顺序进行动画处理。

但它在我的 UITableViewController 中，我希望图像动画以响应某个事件被触发。

在 ViewWillAppear 中，我得到了对特定单元格的 ImageView 的引用

```
UITableViewCell cell = TableView.CellAt(NSIndexPath.FromRowSection(0, 2));
imagetoAnimate = (UIImageView)cell.ContentView.ViewWithTag(ICON_TAG); 
```

然后当事件引发时，我在主线程上调用 StartAnimating（我添加了 Console.WriteLines 只是为了确认 InvokeOnMainThread 块内的代码确实在主线程上执行 - 它是。此外，InvokeOnMainThread 内的所有其他代码块以前在那里。）

```
private void Application_Event()
{      
    Console.WriteLine("Running on Thread ID {0}. Is Main thread? {1}", Thread.CurrentThread.ManagedThreadId, NSThread.IsMain); // Returns false

    InvokeOnMainThread(delegate 
    { 

        Console.WriteLine("Running on Thread ID {0}. Is Main thread? {1}", Thread.CurrentThread.ManagedThreadId, NSThread.IsMain); // Returns true

        imageToAnimate.StartAnimating(); // If called here images don't animate
        UpdateCount();
        UpdateStatus(); 
    });
} 
```

我想念的东西一定很简单。如果您需要更多信息，请与我们联系。

提前致谢。

**更新#1**

UpdateCount 和 UpdateStatus 方法包含似乎干扰 ImageView.StartAnimating 的 TableView.ReloadData 语句（注释掉这两行允许动画继续进行）。

有没有人听说过这种事情发生过？

**更新#2**

将设置 ImageView.AnimationImages 的代码块从 GetCell 方法移到 UITableViewController 中可以解决该问题。

```
UIImage image0 = GetImage("Images/image_at_0_degrees@2x.png");
UIImage image45 = GetImage("Images/image_at_45_degrees@2x.png");
UIImage image90 = GetImage("Images/image_at_90_degrees@2x.png");
UIImage image135 = GetImage("Images/image_at_135_degrees@2x.png");
UIImage[] images = new UIImage[] { image0, image135, image90, image45 };

cell.ImageView.AnimationImages = images;
cell.ImageView.AnimationDuration = 0.5;
cell.ImageView.AnimationRepeatCount = 0;
cell.ImageView.Image = image0; 
```

完成此操作并且取消注释 TableView.ReloadData 语句后，动画会在调用 ImageView.StartAnimating 时正常进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:00:55.297

调用`UITableView.ReloadData`将重新加载所有单元格，并将`GetCell`在您的表格视图源中再次调用。

这可能会阻止动画的发生。

# iphone - SIGTRAP 在 iOS 6.1.3 上选择特定的 UITableViewCell

> ID：15641071
> 
> 赞同：0
> 
> 时间：2013-03-26T15:32:45.543
> 
> 标签：iphone, ios, ios6

我有一个 UITableView，其中单元格组合在一个部分中。当我选择一个特定的 UITableViewCell 应用程序崩溃。当我选择其他单元格时效果很好。它适用于除 iOS 6.1.3 之外的所有 iOS 版本。

Crittercism 的堆栈跟踪

```
Threads
_________________________________
Thread: Unknown Name (Crashed)
0     CoreFoundation                        0x319b268a CFRelease + 18
1     APP_NAME                              0x000fdd3b 0x000b9000 + 281915
2     APP_NAME                              0x000fe7d7 0x000b9000 + 284631
3     UIKit                                 0x3389f579 -[UIViewController loadViewIfRequired] + 365
4     UIKit                                 0x338f41f7 -[UIViewController contentScrollView] + 27
5     UIKit                                 0x338f413d -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 29
6     UIKit                                 0x338f4021 -[UINavigationController _layoutViewController:] + 33
7     UIKit                                 0x338f3f4d -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 273
8     UIKit                                 0x338f3699 -[UINavigationController _startTransition:fromViewController:toViewController:] + 65
9     UIKit                                 0x338f3581 -[UINavigationController _startDeferredTransitionIfNeeded:] + 325
10   UIKit                                  0x338e1b5b -[UINavigationController pushViewController:transition:forceImmediate:] + 859
11   UIKit                                  0x338e17fb -[UINavigationController pushViewController:animated:] + 39
12   APP_NAME                               0x000e8d81 0x000b9000 + 195969
13   UIKit                                  0x3394231d -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 877
14   UIKit                                  0x339c4da9 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 157
15   Foundation                             0x32380657 __NSFireDelayedPerform + 451
16   CoreFoundation                         0x31a46857 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 15
17   CoreFoundation                         0x31a46503 __CFRunLoopDoTimer + 275
18   CoreFoundation                         0x31a45177 __CFRunLoopRun + 1231
19   CoreFoundation                         0x319b823d CFRunLoopRunSpecific + 357
20   CoreFoundation                         0x319b80c9 CFRunLoopRunInMode + 105
21   GraphicsServices                       0x3559733b GSEventRunModal + 75
22   UIKit                                  0x338d42b9 UIApplicationMain + 1121
23   APP_NAME                               0x000e996b 0x000b9000 + 199019 
```

称为 didSelectRowAtIndexPath 的代码是（没什么特别的）。

```
 else if(indexPath.section==0 && indexPath.row==3) {
        [self performSegueWithIdentifier:@"SomeIdentifier" sender:self];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:38:15.870

问题在于加载新的视图控制器——你有符号化的崩溃日志吗？`CFRelease`答案在于检查堆栈跟踪中正下方的两种方法。

# svn - SVN获取本地修改的XML格式列表，没有未版本化

> ID：15641077
> 
> 赞同：1
> 
> 时间：2013-03-26T15:33:06.420
> 
> 标签：svn

使用 SVN，我只需要获取在本地修改的文件列表。

以下命令给了我：

`svn status --quiet`

但是我编写了一个 XML 解析器来解析 svn 状态输出，因此我将 --xml 添加到上面的命令中，所以它看起来像这样：

`svn status --quiet --xml`

此命令提供不同的输出，其中还包括一堆未版本控制的文件。怎么可能？--xml 开关应该只改变输出格式，不是吗？

如何仅获取 XML 格式的本地修改文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:58:26.093

这很奇怪......像你一样我很惊讶。最快的路径可能是更改您的解析器以忽略其中`item="unversioned"`的内容`<wc-status>`

# lotus-notes - 包含附件图像的 MIME 正文在 SSO 环境中要求输入密码

> ID：15641079
> 
> 赞同：0
> 
> 时间：2013-03-26T15:33:07.600
> 
> 标签：lotus-notes, mime-message

应用程序以 MIME 格式向 Notes 用户发送备忘录。内容由后台代理中 RT Body 字段的 HTML 渲染生成。正文包含 .LOG 类型的附件。附件图像使用与基于用户（修改原始文档）环境的文件类型关联的图像，在这种情况下为记事本图标。附件图像的 IMG 源转到配置为使用 SPNEGO SSO 身份验证的 Domino 服务器（代理在该服务器上呈现正文）。

```
<img width="203" height="34" alt="filename.log" border="0" src="https://server/appl/app.nsf/viewunid/docunid/Body/0.5FA?OpenElement&FieldElemFormat=gif"/> 
```

当用户在 Notes 客户端中打开邮件时，不会呈现图像并提示用户输入凭据。多次尝试后失败，图像不可见。但是，如果用户在打开备忘录之前使用 IE 浏览器打开网站，则不需要凭据并且图像显示没有问题。

Notes 客户端中的内部浏览器似乎无法与服务器协商/初始化 SSO 会话。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:54:49.290

我认为 Notes 客户端不支持 SPNEGO 身份验证，因此我认为您将不得不在消息中的多部分/相关 MIME 实体中嵌入 HTML 中的图像，为图像实体设置 Content-ID 标头并在 src 属性中使用“cid:”URL。

# python - 使用 pycurl 获取回复的标头值

> ID：15641080
> 
> 赞同：2
> 
> 时间：2013-03-26T15:33:10.183
> 
> 标签：python, pycurl, verbose

我想知道一些在使用 PyCurl 发出请求时捕获和访问回复的标头信息的方法：

```
c = pycurl.Curl() 
c.setopt(c.URL,'MY_URL')
c.setopt(c.COOKIEFILE,'cookies')
c.setopt(c.COOKIE,'cookies')
c.setopt(c.POST,1)
c.setopt(c.POSTFIELDS,'MY AUTH VALUES')
c.setopt(c.VERBOSE, True)
b = StringIO.StringIO()
c.setopt(c.WRITEFUNCTION, b.write)
c.perform() 
```

回复将以格式正确的 JSON 格式写入缓冲区 b。

我希望恢复回复中“位置”标题的值。

尝试使用 curl 时，可以在详细输出中看到此值：

```
[... Curl output ...]
> GET XXXXXXXXX
[... Request ...]
[... Curl output ...]
< HTTP/1.1 302 Found
[... Other headers ...]
< Location: YYYYYYYYYYYYYYY
[... Rest of reply ...] 
```

如何`Location`从 python 中恢复标头的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:46:59.677

**如果你必须使用 PyCurl**

然后可以通过回调函数来获取头信息：

```
# code...

# Callback function invoked when header data is ready
def header(buf):
    # Print header data to stderr
    import sys
    sys.stderr.write(buf)
    # Returning None implies that all bytes were written

# more code...

c.setopt(pycurl.HEADERFUNCTION, header)

# yet more code... 
```

[从文档](http://pycurl.sourceforge.net/doc/callbacks.html)中了解更多信息。

**你也可以使用 requests 代替 pycurl**

虽然这可能是不可能的，并且不能直接回答您的问题，但我建议您使用[requests 库](https://github.com/kennethreitz/requests)而不是 pyCurl：

```
import requests

payload = {"key":"value"}
cookies = {"key":"value"}

r = requests.post('https://my.example.com', data=payload, cookies=cookies)

location = r.headers["Location"]
content  = r.text

print(content) 
```

它会让你的生活更轻松。[通过阅读文档](http://www.python-requests.org/)了解更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T12:19:56.223

```
import pycurl
import cStringIO

buf = cStringIO.StringIO()
URL = 'http://stackoverflow.com/questions/15641080/get-header-values-of-reply-using-pycurl'
c = pycurl.Curl()
c.setopt(c.URL, URL)
c.setopt(c.NOBODY, 1)
c.setopt(c.HEADERFUNCTION, buf.write)
c.perform()

header = buf.getvalue()
print header 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:50:01.897

本质上，很多自定义函数和注册回调函数。让我们分段浏览 curl 的详细输出。首先，如果您提供自己的`CURLOPT_OPENSOCKETFUNCTION`.

接下来，请求标头可以是您提前知道的内容，并且可以根据需要打印出来。对于进度条，有`CURLOPT_PROGRESSFUNCTION`，它允许您注册回调以“大约每秒一次”更新进度。

您还可以注册一个响应标头写入函数 ( `CURLOPT_HEADERFUNCTION`)，然后您可以使用它来捕获和/或显示响应标头。

**或者**，您可以使用[`CURLOPT_DEBUGFUNCTION`](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTDEBUGFUNCTION)注册回调来获取您发送的标头的信息，获取响应等。

# css - 设置元素字体样式时的 IE10 正文负载问题

> ID：15641082
> 
> 赞同：1
> 
> 时间：2013-03-26T15:33:14.017
> 
> 标签：css, fonts, internet-explorer-10

IE10 似乎忽略了在正文 onload 事件期间所做的字体样式更改如何影响文本的宽度。在这个测试用例中，它最终将文本剪短。有谁知道为什么，或者如果这是一个错误？谢谢！

```
<!DOCTYPE html>

<html lang="en-us">
<head>
<script type='text/javascript'>

function SetFontFamily(FontFamily) {
    var oForm = document.forms[0];
    for (var i = 0; i < oForm.elements.length; i++) {
        elm = oForm.elements[i];
        if (elm.type != 'checkbox' && elm.type != 'hidden') {
            var bold = "";
            if (FontFamily.indexOf('-Bold') >= 0)
                bold = "bold";

            var italic = "";
            if (FontFamily.indexOf('Italic') >= 0 || FontFamily.indexOf('Oblique') >= 0)
                italic = "italic";

            var face = "";
            if (FontFamily.indexOf('Times') >= 0)
                face = "times,serif";
            else if (FontFamily.indexOf('Helvetica') >= 0)
                face = "arial,sans-serif";
            else if (FontFamily.indexOf('Courier') >= 0)
                face = "courier,cursive";

            //elm.style.font = italic & bold & face
            elm.style.fontFamily = face;
            elm.style.fontWeight = bold;
            elm.style.fontStyle = italic;

        }
        //elm.value = elm.value;
    }
    document.getElementById('hidFontFace').value = FontFamily;
}

function SetFontSize(FontSize) {
    var oForm = document.forms[0];
    for (var i = 0; i < oForm.elements.length; i++) {
        elm = oForm.elements[i];
        if (elm.type != 'checkbox' && elm.type != 'hidden') {

            if (FontSize != 0) {
                elm.style.fontSize = (FontSize * 2) + "px";
            }
        }
    }
    document.getElementById('hidFontSize').value = FontSize;
}

function SetFontControls() {
    SetFontSize(document.getElementById('hidFontSize').value);
    SetFontFamily(document.getElementById('hidFontFace').value);
}

</script>
<title>

</title>
</head>
<body onload="SetFontControls();">
    <form method="post" id="Form1">
        <input type="hidden" name="hidFontSize" id="hidFontSize" value="9" />
        <input type="hidden" name="hidFontFace" id="hidFontFace" value="Courier-Bold" />
        <input name="txtIEtest" 
            type="text" 
            value="Why is IE10 taunting me?" 
            maxlength="120" 
            id="txtIEtest" 
            style="width:531px;height:27px;" />
    </form>
</body>
</html> 
```

这是我在 IE10 中得到的： ![在此处输入图像描述](../Images/5c214bdc613fa553eaccb61f134193af.png)

# php - 将 PHP 中返回的 XML 数据保存到 XML 文件中

> ID：15641084
> 
> 赞同：0
> 
> 时间：2013-03-26T15:33:20.927
> 
> 标签：php, xml

我有一个 php 文件，它请求 xml 数据并将其显示在浏览器中。XML 通过以下方式显示：

```
$xmlString = constructPostCallAndGetResponse($endpoint, $item, $postCode, $dist);

$resp = simplexml_load_string($xmlString);

echo htmlentities($xmlString); 
```

如何将返回的 XML 保存到服务器上的 XML 文件中？我读过很多关于 DOM 的文章，但一直在绕圈子。谁能提出一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:35:28.780

保存到文件，你的 sinplexml-object 只是做......

```
$resp->asXML('file.xml'); 
```

# php - 如何使用相同的登录页面根据角色将不同的用户重定向到不同的页面？

> ID：15641086
> 
> 赞同：0
> 
> 时间：2013-03-26T15:33:31.967
> 
> 标签：php

我知道日志记录模块，但我想将学生重定向到不同的页面，将教师重定向到不同的页面。我是否应该在登录页面中创建不同的数据库和组合框以及如果语句来选择不同的数据库或只是创建不同的登录页面，或者我可以对会话做一些事情，我感到困惑。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:34:46.617

将用户的类型存储在数据库中并应用基本逻辑：

```
if ($user->type === 'student') {
  header('Location: http://example.com/students');
  exit;
}

if ($user->type === 'teacher') {
  header('Location: http://example.com/staff');
  exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:41:40.103

您可以使用组合框，用户将在其中选择他是学生还是教师以及登录表单，使用 POST 方法获取所选选项的值，对用户进行身份验证，如果成功通过身份验证，则根据选择注册会话制作，然后将用户重定向到适当的页面。注册会话将帮助您处理未来的请求。

# web-services - 访问 Web 服务时出现 401 错误

> ID：15641100
> 
> 赞同：0
> 
> 时间：2013-03-26T15:34:14.737
> 
> 标签：web-services, sharepoint-2010

我正在尝试使用 asp.net 从 SharePoint Foundation 2010 使用 Web 服务。

我收到 401 未经授权的错误。

我知道这意味着凭据丢失或无效，但我似乎无法找出原因。

我无需身份验证即可从标准浏览器访问 Web 服务页面，这对用户/密码没有挑战。这既适用于服务器本身，也适用于远程客户端浏览器。

这是代码：

```
 Dim wsLists As New JEMS30LISTS.Lists
    Dim dtTasks As New DataTable
    Dim xmlDoc As New System.Xml.XmlDocument
    Dim ndQuery, ndViewFields, ndQueryOptions, ndListItems As System.Xml.XmlNode
    Dim szListName, szListsUrl, szUsername, szPassword, szDomain As String
    szListsUrl = "https://demo.********.com/_vti_bin/Lists.asmx"
    szUsername = "*********"
    szPassword = "************"
    szDomain = "***********"

    ndQuery = xmlDoc.CreateNode(System.Xml.XmlNodeType.Element, "Query", "")
    ndViewFields = xmlDoc.CreateNode(System.Xml.XmlNodeType.Element, "ViewFields", "")
    ndQueryOptions = xmlDoc.CreateNode(System.Xml.XmlNodeType.Element, "QueryOptions", "")
    ndQueryOptions.InnerXml = "<IncludeMandatoryColumns>FALSE</IncludeMandatoryColumns>" _
                            + "<DateInUtc>TRUE</DateInUtc>"
    If bAllFields = True Then
        ndViewFields.InnerXml = ""
    Else
        ndViewFields.InnerXml = "<FieldRef Name=""TEAS_x0020_5_x0020_Task_x0020_Nu"" /> <FieldRef Name=""TEAS_x0020_5_x0020_SubTask"" /> <FieldRef Name=""TEAS_x0020_6_x0020_Task_x0020_Nu"" /> <FieldRef Name=""TEAS_x0020_6_x0020_Task_x0020_Nu0"" /> <FieldRef Name=""Shreds_x0020_Converted"" /> <FieldRef Name=""TEAS_x0020_6_x0020_Shred_x0020_P"" /> <FieldRef Name=""ProcessTask"" /> <FieldRef Name=""TEAS6Dept"" /> "
    End If

    ndQuery.InnerXml = "<OrderBy><FieldRef Name=""TEAS_x0020_5_x0020_Task_x0020_Nu"" Ascending=""True""></FieldRef></OrderBy>"
    szListName = "CORs"

    Try
        Dim cache As New System.Net.CredentialCache
        wsLists.Url = szListsUrl
        Dim vUri As New Uri(wsLists.Url)
        Dim vNW As New Net.NetworkCredential()
        cache.Add(vUri, "windows", vNW)
        wsLists.Credentials = cache
        ndListItems = wsLists.GetListItems(szListName, Nothing, ndQuery, ndViewFields, 99999, ndQueryOptions, Nothing)
    Catch ex As Exception
        Response.Write("GetListItems: " + ex.Message + "<br>")
    End Try 
```

我已经尝试了几个用户名/密码组合以及根本没有身份验证（因为我没有受到浏览器的挑战）。

谁能告诉我我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:14:58.603

原来基本授权被禁用。不知道为什么这很重要，因为我什至尝试过 Windows 授权（已启用），但也没有用。

打开基本授权，它现在可以工作了。

# servicestack - 在另一个项目中注册依赖项

> ID：15641105
> 
> 赞同：0
> 
> 时间：2013-03-26T15:34:25.870
> 
> 标签：servicestack, autofac

我的模型和 DataContext 在我的解决方案中我的 Web MVC 项目的另一个项目中。当我尝试在`AppHost` `Configure`方法中注册我的 DataContext`null`时，当我尝试在我的服务将使用的存储库中使用它时，我的 DataContext 仍然存在。

这是在`Configure`：

```
container.Register<WarrantyContext>(c => new WarrantyContext()); 
```

然后，当我尝试在存储库中使用依赖项时，如下所示：

```
public WarrantyContext _db { get; set; } 
```

它仍然是`null`。尝试从另一个项目注册依赖项时，您需要做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:04.300

有些事情要调查...

*   如果您使用的是 autofac，请确保您已遵循[此处列出的所有步骤](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container#use-autofac)

*   此外，听起来您有一个以 WarrantyContext 作为属性的 Repository 类。[这里](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container#register-instances)有一条注释指出*“使用上述方法时，注册类型的属性和构造函数不会自动连接（即属性和构造函数没有注入）。您需要像那样手动执行此操作”*。因此，如果您有一个类 Repository（带有 WarrantyContext 属性）被注入到您的服务中（如下所示），除非您手动注册，否则 WarrantyContext 将为空。

    ```
    //To inject WarrantyContext into a Repository that is injected to Service 
    container.Register<Repository>(c => new Repository() { _db = c.Resolve<WarrantyContext>() });

    public class Repository 
    {
        public WarrantyContext _db { get; set; }
    }

    public class AService : Service
    {
        public Repository repo { get; set; }

        public object Any(ARequest request)
        {
            //CODE
        }
    } 
    ```

# mysql - 具有最高组合相邻值的 MySQL 搜索

> ID：15641112
> 
> 赞同：0
> 
> 时间：2013-03-26T15:34:50.943
> 
> 标签：mysql, database, search

```
depth   ktim
6999.0  576.46
6999.5  892.10
7000.0   10.12
7000.5   22.07
7001.0  186.55
7001.5  577.98
7002.0  799.42
7002.5  334.15
7003.0   99.43
7003.5  111.43
7004.0   41.94 
```

所以我有一个巨大的数据库表，上面是一个简单的例子。有没有办法让 MySQL 执行查询，它会输出具有 5 个最高相邻值的值？我需要将查询调整为 5、10、20 等。

因此，如果您将 ktim 列中的每 5 个相邻单元格相加，则最高的 5 个单元格将是 7001.0-7003.5，因为它的总 ktim 为 1997.53，并将输出以下内容：

```
depth   ktim
7001.0  186.55
7001.5  577.98
7002.0  799.42
7002.5  334.15
7003.0   99.43 
```

该表按深度排序，邻接将始终根据深度计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:42:43.887

真正的问题是获得 5 的最大总和以及发生的位置。我似乎深度增加了 0.5 作为常规序列。如果你可以依赖这个，下面的查询会将第一个 ktim 值相加到当前值，然后返回最大值：

```
select t.*
from (select t.*,
             (select SUM(ktim) from t t2 where t2.depth between t.depth - 2.25 and t.depth
             ) as lastfivesum
      from t
     ) t
order by lastfivesum
limit 1 
```

这将为您提供最后一行（`7003.0`在您的示例中）。如果您需要全部五个，您只需将其作为 int 加入到原始表中：

```
select t.*
from t join
     (select t.*
      from (select t.*,
                   (select SUM(ktim) from t t2 where t2.depth between t.depth - 2.25 and t.depth
                   ) as lastfivesum
            from t
           ) t
      order by lastfivesum
      limit 1
     ) tmax
     on t.depth bewteen tmax.depth - 2.25 and tmax.depth 
```

我正在使用`2.25`而不是`2`仅仅为了防止浮点数出现问题。

# c# - 从一个字符串中提取两个子字符串

> ID：15641113
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:34:51.640
> 
> 标签：c#

从指定字符串中提取子字符串的最佳和优化方法是什么。

我的主要字符串就像

```
string str = "<ABCMSG><t>ACK</t><t>AAA0</t><t>BBBB1</t></ABCMSG>"; 
```

其中值`AAA0`和`BBBB1`不恒定。它是从某处收集的动态值。

我需要在这里提取 AAA0 和 BBBB1。

请建议我是否有任何功能或优化方式来做到这一点。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:39:30.983

```
string str = @"<ABCMSG><t>ACK</t><t>AAA0</t><t>BBBB1</t></ABCMSG>";
var matches = Regex.Matches(str, @"<t>(\w+)<\/t>");

Console.WriteLine(matches[1].Groups[1]);    // outputs "AAAA1"
Console.WriteLine(matches[2].Groups[1]);    // outputs "BBB2" 
```

这假设您的数据始终位于`<t></t>`标签内，如果找不到匹配项，您可能还需要进行一些错误捕获。

# c++ - 派生类 C++ BankAccount 程序

> ID：15641122
> 
> 赞同：-6
> 
> 时间：2013-03-26T15:35:12.147
> 
> 标签：c++, derived-class

我正在尝试创建一个派生类 CheckingAccount 的 BankAccount 类。我遇到的问题如下：

1.  CheckingAccount 应该包含一个数据成员来跟踪帐户上进行的提款交易的数量。每当提款时，这个数字应该增加。
2.  重写基类，withdraw-money 函数，并添加从账户中扣除交易费用的功能

**银行账户.h**

```
class BankAccount {
private:
    /* ATTRIBUTES */
    int accountNumber;
    double balance;

public:
        /* METHODS */
    BankAccount();

    void setAccountNumber( int );
    void deposit( double );

    int getAccountNumber();
    int getBalance();

    double withdraw( double );
}; 
```

**CheckingAccount.h**

```
#include "BankAccount.h"
class CheckingAccount: public BankAccount {
private:
        /* ATTRIBUTES */
    int withdrawalAmount;
    double balance;

        /* METHODS */
public:
        /* METHODS */
    CheckingAccount();
}; 
```

**CheckingAccount.cpp**

```
#include "CheckingAccount.h"

CheckingAccount::CheckingAccount() {
//Initialize
}

double CheckingAccount::withdraw( double a ) {
    //This doesn't work.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:39:39.010

只需在 BankAccount 类中进行虚拟提款并在 CheckingAccount 中声明即可。

```
virtual double withdraw( double ); 
```

# django - Heroku 上的 Django API 和同一域上 Amazon S3 上的单页应用程序

> ID：15641124
> 
> 赞同：2
> 
> 时间：2013-03-26T15:35:14.273
> 
> 标签：django, heroku, amazon-s3, single-page-application, static-files

我想构建一个前端（静态）和后端（API）的Web应用程序，除了共享同一个域，完全分开。通常我会认为这没有问题，但我有一些特殊要求：

*   API 在**Heroku**上运行（使用 Django 和 TastyPie）
*   所有静态内容，包括 html 文件都将托管在**Amazon S3上**

前端应用程序将是一个单页 Javascript 应用程序（带有一个基本模板，让我们调用它`index.html`）并通过 AJAX 从 API 填充内容。由于我还不想为 API 实现 CORS，并且希望遵循同源策略，因此我希望 API 和 S3（存储桶）上的文件以某种方式共享同一个域。我也不想使用 Django 的平面应用程序或`index.html`通过 Django 渲染。

我扫描了 Google 和 stackoverflow，但到目前为止找不到合适的解决方案。据我阅读天真的方式（以某种方式将域指向 Heroku 应用程序和 S3 存储桶）是不可能的。我想到了一些解决方案，但没有找到以下来源：

*   如果可能，将域名指向 Heroku 和 S3 存储桶上的 API
*   将一些选项传递给 Heroku 以呈现托管在 S3（ProcFile？）上的 html，使用 Django 和 S3 库来获取其他静态资产
*   也许用 boto 做一些事情来实现这一点
*   其他完全不同的建议？

以前有没有人尝试过这样的事情并且可以指出我正确的方向？

*一个补充*：稍后我想使用一些lile PhantomJS来使单页应用程序可抓取。理想情况下，爬虫的此输出也应托管在 S3 存储中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T13:39:59.893

这在您当前的堆栈中是**不可能的。**

您的 Heroku 应用程序和您的 S3 存储桶实际上是通过两个不同的域提供服务的。拥有两个不同域的好处是您可以从所有静态资产请求中卸载您的服务器。

实现您想要的一种复杂方法是​​通过一个唯一域适当地代理请求。幸运的是，Heroku 和 Amazon 都不会让你这样做：

*   Nginx 可以代理一个`static`文件夹，`your-api.herokuapp.com`但[你不能在 Heroku 上配置 nginx](https://stackoverflow.com/a/3279804)，这首先会破坏使用 PaaS 的目的。
*   [S3 可以托管您的网站](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html)并将`api`文件夹重定向到，`your-api.herokuapp.com`但只能使用不能解决 CORS 问题的 301 重定向。如果您好奇，请尝试一下：

    ```
    <RoutingRules>
      <RoutingRule>
        <Condition>
          <KeyPrefixEquals>api/</KeyPrefixEquals>
        </Condition>
        <Redirect>
          <HostName>your-api.herokuapp.com</HostName>
        </Redirect>
      </RoutingRule>
    </RoutingRules> 
    ```

那时最简单的解决方案是实现[一个 Django 中间件用于跨域共享](https://stackoverflow.com/q/7014402/343834)。

# curl - curl 命令从 linux 发布数据 - HTTP/1.1 100 continue

> ID：15641126
> 
> 赞同：0
> 
> 时间：2013-03-26T15:35:34.900
> 
> 标签：curl

从我的 linux 机器运行 curl POST 命令时遇到问题。

错误信息如下 - curl: (18) 传输关闭，剩余未完成的读取数据

我可以在其他情况下成功发布数据，例如拆分文件中的数据并多次执行。运行 curl 命令后我得到的完整响应如下

```
curl -X POST --data @dataCurl -ik -u userid:password -H 'Accept: application/xml' https://IP_ADDRESS:PORT/rest/xxx/xx/
HTTP/1.1 100 Continue
Content-Length: 0
Date: Tue, 26 Mar 2013 14:54:32 GMT
Server: WebSphere Application Server/6.1

HTTP/1.1 400 Bad Request
Date: Tue, 26 Mar 2013 14:54:32 GMT
Server: WebSphere Application Server/6.1
Content-Type: text/html;charset=ISO-8859-1
$WSEP: 
Content-Language: en-US
Set-Cookie: LtpaToken2=SaVGscL3xKqJoTFymznYPqJKBuPO5HBhrpSTg2c+cpknypCODPb2r3RzJy7bP7kxoIWWUVS3iAlxIr0WLv5bhW1r2a3nW0i26Iblnlm07Xf
Set-Cookie: LtpaToken=azPyTXehorPwNejA+UFxlrs+7yQfxQoQws/tXc97yQ5IWjykBjIejbp/2cVAHP5CCI01PnrK+TgZq3+C3HM8jc6GovZ9ID+TwjnDZHSvCgOjEk7lZRX2Sqyk49gGE5BMAZaTRJOF5mK0UNCELWG57KunZbSmqOis3h1F5phKOm2duQDqvRf3C54HTLrH60ec1YwMwXVUU9mAECgLIJIZC/2+shzjkn+2zAF3kgN5sDDVvFyO1aCnJje0VcdRosbIqGQgB01sBm4RXqXRtI3RbiHL9ThtHWH62xQwvVh9UYEphK/XY1Zk3vclRX2IFmDqNG8nsR7zIyY=; Path=/
Set-Cookie: JSESSIONID=0000EJSJpUPd0JIBOZcOEZ_oyiC:-1; Path=/
Transfer-Encoding: chunked
Connection: Close
Expires: Thu, 01 Dec 1994 16:00:00 GMT
Cache-Control: no-cache="set-cookie, set-cookie2"
curl: (18) transfer closed with outstanding read data remaining 
```

如果我将数据文件分成更小的块，我可以发布数据。该实例的响应如下

```
curl -X POST --data @SRPart1 -ik -u userid:password -H 'Accept: application/xml' https://IP_ADDRESS:PORT/rest/xxx/xx/

 HTTP/1.1 200 OK
 Content-Type: application/xml
 Expires: -1
 Content-Language: en-US
 Set-Cookie: 
 LtpaToken2=I+Gw+zcgPZDCpUWhKIfr53IiOulhfU5gH1rLIzQi9jdpSLASBkCirkle4qDRnkk+1teEkcN/bHq+Amv4BKrK+9xNy4B6RdWPH0O9S2vfnAC5RqmuoSCFwqWXzTINoWGYH+TqqL24KvjhXOWQ43E 
```

有没有办法来解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:23:24.440

I came up with an work around, this may or may not be useful for someone in future.

I used awk function and for loop to break my input file into several pieces and then ran curl command to solve this issue.

```
awk '
   BEGIN{ fn = "xxx"; n = 1}
   {
   print > fn
   if (match($0,"YYYID")) {
   close (fn)
   n++
   fn = "xxx" n
   }
   }' inputfile

   for j in xxx*
     do
{          
 curl -X POST --data @$j -ik -u userid:password -H 'Accept: applicatin/xml' https://IPADDRESS/rest/XXX/XX/
         } done 
```

# html - 将 iFrame 与 mvc3 一起使用

> ID：15641128
> 
> 赞同：0
> 
> 时间：2013-03-26T15:35:40.917
> 
> 标签：html, asp.net-mvc-3, iframe, controller

我有行动：

```
[HttpGet]
public ActionResult GetMenuContentFileToDisplay(int menuItemId)
{
    //......
    return File(fileAttributes.FilePath, fileAttributes.InternetMediaType,
                        Uri.EscapeUriString(fileAttributes.FileName));
} 
```

我想使用这种方法（允许您接收文件）在 iframe 中显示内容。是否可以为显示 HTM 文件实现此功能？

这部分是必要的，因为对用户隐藏文件结构并且需要检查文件权限。

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:08:35.020

如果要内联显示文件，可以使用 iframe：

```
<iframe src="@Url.Action("GetMenuContentFileToDisplay", new { menuItemId = "5" })"></iframe> 
```

为避免文件被下载，您不应为其提供文件名，而应仅提供`Content-Type`：

```
[HttpGet]
public ActionResult GetMenuContentFileToDisplay(int menuItemId)
{
    return File(
        fileAttributes.FilePath, 
        fileAttributes.InternetMediaType
    );
} 
```

显然，这仅在浏览器识别文件内容类型时才有效（例如它是 a`text/html`或`text/plain`）。否则浏览器会再次提示用户下载文件。

# json - json响应末尾的意外令牌}

> ID：15641132
> 
> 赞同：1
> 
> 时间：2013-03-26T15:35:59.120
> 
> 标签：json, grails

我将 json 对象作为 varchar 存储在数据库中。

奇怪的是，多余的结束括号被添加到我唯一的一个 json 对象（来自数千个）的末尾。

我在 chrome 和 firefox 中看到了这个错误。在Firefox控制台错误如下：

> SyntaxError：JSON.parse：JSON 数据后出现意外的非空白字符。在 chrome 中，错误是： Uncaught SyntaxError: Unexpected token }

在调试时，我保证我从 grails 控制器返回的 myjson 字符串没有多余的`'}'`。

我通过以下代码从控制器渲染 json：

```
render(text:shape?.geojson, contentType:"application/json", encoding:"UTF-8") 
```

此外，问题不在 javascript 中，因为我通过 get 请求获得了无效的 json。

这种奇怪行为的原因可能是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:23:58.550

在我设置 contentType:"text/json" 而不是 "application/json" 后，该错误已修复

# jquery - 通过单击选项卡外部的链接来设置活动选项卡？

> ID：15641134
> 
> 赞同：3
> 
> 时间：2013-03-26T15:36:02.947
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在使用 jQuery UI 选项卡： http: [//api.jqueryui.com/tabs/](http://api.jqueryui.com/tabs/)

如何在标签之外的页面上创建链接，单击时激活某个标签？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T15:42:48.883

见[http://api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active)

获取当前活动标签索引：

```
var currentActive = $( ".selector" ).tabs( "option", "active" ); 
```

要设置当前活动选项卡：

```
$( ".selector" ).tabs( "option", "active", <number of tab> ); 
```

例如：

```
$('a').click(function(){
         $( ".tabs" ).tabs( "option", "active", 2 );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T07:04:48.370

在 IE10 选项“活动”不起作用。我使用而不是“活动”选项“已选择”。

```
$( ".selector" ).tabs( "option", "selected", <number of tab> ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T07:30:48.510

```
$( "#tabs" ).tabs({ active: tabNumber }); 
```

tabNumber 以 0 开头

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T16:09:43.670

从文档中可以看出，我已将@Secator 的答案标记为正确。但是由于某种原因，它对我不起作用，所以我“手动”模拟了点击选项卡：

```
 $("#myTrigger").click(function(e) {
              $("#id-of-normal-tab-link").click();
              e.preventDefault(); //prevent default behavior of the a#myTrigger 
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T18:56:52.933

尝试这个：

```
<li ....> 
     <a href="#tab-number">Tab Title</a>
</li> 
```

他们你的网址看起来像这样：“[URL]#tab-number”

我希望能帮助你......问候......

# android - Android：对象的打包列表

> ID：15641135
> 
> 赞同：0
> 
> 时间：2013-03-26T15:36:05.330
> 
> 标签：android, parcelable

我正在为一个 android 应用程序编写代码，如果单击列表的一个元素，它会打开一个新的对象列表，该列表对其唯一，如下所示。

```
public class A{    
public int id;   
public String name;   
}   

public class B{       
public String name;   
public List<A> a;   
} 
```

我如何将 B 类从一个 ListActivity 打包到另一个？

这将是我对 B 的包裹代码：-

```
public A(Parcel in){

    name = in.readString();     
    in.readList(a, this.getClass().getClassLoader());
}

@Override
public int describeContents() {
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {

    dest.writeString(name);
    dest.writeList(a);

}

public static final Parcelable.Creator<B> CREATOR = new Creator<B>() {

    @Override
    public B[] newArray(int size) {

        return new B[size];
    }

    @Override
    public B createFromParcel(Parcel source) {
        return new B(source);
    }
}; 
```

和我的 A 包裹代码：-

```
public A(){};

public A(Parcel in){

    id = in.readLong();
    name = in.readString(); 

}

@Override
public int describeContents() {
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {

    dest.writeLong(id);
    dest.writeString(name);

}

public static final Parcelable.Creator<A> CREATOR = new Creator<A>() {

    @Override
    public A[] newArray(int size) {

        return new A[size];
    }

    @Override
    public A createFromParcel(Parcel source) {

        return new A(source);
    }
}; 
```

这些不起作用并导致我的应用程序在尝试打开新列表活动时崩溃。

新列表活动代码：-

```
 private B b; 
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.MainList);
    Bundle bun = getIntent().getExtras();
    b = bun.getParcelable(".modle.B");

    ArrayAdapter<A> adapter =new ArrayAdapter<A>     (this,android.R.layout.simple_list_item_1,b.a);
    setListAdapter(adapter);
} 
```

# javascript - 原型和 dom 没有提供预期的结果

> ID：15641136
> 
> 赞同：1
> 
> 时间：2013-03-26T15:36:05.657
> 
> 标签：javascript, dom, prototypejs

我正在尝试根据返回的 JSON 更新（替换内容）表格单元格。

如果我使用 console.log 在我的循环中呈现我的结果 - 我会得到正确/预期的结果。但是，当我添加 DOM 引用时 - 没有任何反应（到页面）

如果我在控制台中键入 js 来更改 DOM - 它可以工作......所以我确定语法是正确的......

这是ajax调用的一部分，其内容与问题无关-因为返回（response.responseJSON）是正确的..

```
onSuccess: function( response ) {
var p = response.responseJSON;
for ( var key in p ) {
    if ( p.hasOwnProperty( key ) ) {
    console.log( key + " = " + p[key] ); // this works, loops correct number and shows key/value as expected
    document.getElementById[key].update('hey'); // if i add this the loop doesn't go past the first key/value - and the page element that matches the key does not change
    }
}
} 
```

如果我在控制台中输入“document.getElementById['myKey'].update('hey');”，'myKey' 的 heml 元素 id 会更改为 'hey'...

我很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:38:50.330

```
document.getElementById(key) 
```

括号代替方括号

```
var e = document.createElement("DIV");
e.id = "test123123";
document.body.appendChild(e);
console.log(document.getElementById["test123123"]); // undefined
console.log(document.getElementById("test123123")); // actual DOM element 
```

# html - Bootstrap - 在页眉和页脚之间填充流体容器

> ID：15641142
> 
> 赞同：17
> 
> 时间：2013-03-26T15:36:25.293
> 
> 标签：html, css, twitter-bootstrap, fluid-layout

这可能是一个非常简单的问题，但我已经离开 CSS 场景有一段时间了，我似乎无法弄清楚。我正在使用 Bootstrap 框架，并且我有一个固定的页眉和页脚。中间的容器包括导航栏和内容区域。我希望该容器填充页眉和页脚之间的整个空间（100% 高度）。

这是该项目的jsFiddle：http: [//jsfiddle.net/NyXkt/2/](http://jsfiddle.net/NyXkt/2/)

这是当前的html结构：

```
<div id="wrapper">
    <!-- Header -->
    <div class="container-fluid no-padding header">
        <div class="row-fluid fill-height">
            <!-- Header Left -->
            <div class="span2">
                <p class="center-text">Left</p>
            </div>
            <!-- Header Middle -->
            <div class="span8">
                <p class="center-text">Middle</p>
            </div>
            <!-- Header Right -->
            <div class="span2">
                <p class="center-text">Right</p>
            </div>
        </div>
    </div>
    <!-- Content Wrapper -->
    <div class="container-fluid no-padding fill">
        <div class="row-fluid">
            <div class="span2">
                <div class="well sidebar-nav-fixed no-padding">
                    <ul id="nav">
                        <li><a href="#">Item 1</a>

                            <ul>
                                <li><a href="#">Sub-Item 1 a</a>
                                </li>
                                <li><a href="#">Sub-Item 1 b</a>
                                </li>
                                <li><a href="#">Sub-Item 1 c</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Item 2</a>

                            <ul>
                                <li><a href="#">Sub-Item 2 a</a>
                                </li>
                                <li><a href="#">Sub-Item 2 b</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Item 3</a>

                            <ul>
                                <li><a href="#">Sub-Item 3 a</a>
                                </li>
                                <li><a href="#">Sub-Item 3 b</a>
                                </li>
                                <li><a href="#">Sub-Item 3 c</a>
                                </li>
                                <li><a href="#">Sub-Item 3 d</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Item 4</a>

                            <ul>
                                <li><a href="#">Sub-Item 4 a</a>
                                </li>
                                <li><a href="#">Sub-Item 4 b</a>
                                </li>
                                <li><a href="#">Sub-Item 4 c</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="span10">
                <p class="center-text">Content</p>
            </div>
        </div>
    </div>
</div>
<!-- Footer -->
<div id="footer">
    <div class="container-fluid">
        <p class="center-text">Footer</p>
    </div>
</div> 
```

如果有人能解释我可能需要做什么，或者给我举个例子，我会很感激的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-26T17:21:17.263

**引导程序 4（2019 年更新）**

现在使用 flexbox 更容易获得这种布局。

```
<body class="d-flex flex-column">
    <header>
    </header>
    <main class="container-fluid flex-fill">
    </main>
    <footer>
    </footer>
</body>

body {
   min-height:100vh;
}

.flex-fill {
   flex:1 1 auto;
} 
```

[演示](http://www.codeply.com/go/tGamlWscIB)

**注意：**该`flex-fill`实用程序类将[包含在下一个 Bootstrap 4.1](https://github.com/twbs/bootstrap/commit/2137d61eacbd962ea41e16a492da8b1d1597d3d9)版本中。所以在那之后发布额外的 CSS`flex-fill`就不再需要了。

* * *

**Bootstrap 2（2013 年原始答案）**

任何父容器也必须是 100% 高度（html、body 和 #wrapper）。如果您制作 #wrapper {height:100%} 并将“填充高度”添加到您的容器中，它应该可以工作。看这里：

[http://jsfiddle.net/skelly/NyXkt/4/](http://jsfiddle.net/skelly/NyXkt/4/)

```
#wrapper {
    min-height: 100% !important;
    height: 100% !important;
    margin: 0 auto -33px;
} 
```

# cocoa - 选项卡视图内的 NSSplitView 出现由第一个窗格填充

> ID：15641144
> 
> 赞同：0
> 
> 时间：2013-03-26T15:36:32.043
> 
> 标签：cocoa, nssplitview

我有`NSSplitView`一个`NSTabView`. 如果拆分视图的选项卡是最初显示的选项卡，它似乎可以正常工作，但如果稍后显示拆分视图的选项卡，它会显示第一个窗格完全展开而第二个窗格折叠。因为我想为拆分视图使用细分隔线，所以用户无法摆脱这种情况。

从`NO`没有`splitView:canCollapseSubview:`帮助，即使我证实它确实被调用。

作为一种解决方法，我尝试让拆分视图的选项卡最初显示，然后在加载窗口后手动切换（在 中`awakeFromNib`），但这并没有解决它。

如果最初没有显示，这是 NSSplitView 的一个已知问题吗？有没有更好的方法来应用选项卡切换解决方法？还是有更好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:40:08.053

我最终通过切换到[RBSplitView](http://brockerhoff.net/src/rbs.html)解决了这个问题。我还在[GitHub 上创建了一个 fork](https://github.com/Uncommon/RBSplitView)来更新项目以使用最新的 Xcode。

# c++ - thread_cancel 和阻塞函数为 cond_wait

> ID：15641145
> 
> 赞同：0
> 
> 时间：2013-03-26T15:36:36.277
> 
> 标签：c++, pthreads, mutex, blocking

我让我的主进程发送`pthread_cancel`到另一个正在等待条件发生的线程`cond_wait(&condition)`。他们`pthread_cancel`说：*延迟取消能力意味着取消将被延迟，直到线程下一次调用作为取消点的函数。*但通常这些功能是阻塞功能。然后我的问题是线程仅在该线程被解除阻塞（在我的示例中通过广播或信号）后才取消，或者它会看到我当前在取消点阻塞然后取消我的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:50:04.533

我不熟悉`cond_wait`，但我认为它来自另一个库，而不是通常使用的`pthread_cond_wait`？

但是是的，如果一个线程在 a 中被阻塞`pthread_cond_wait`然后被取消，那么线程将被唤醒，重新获取它的互斥体，然后被取消。

因此，在取消某个条件下阻塞的线程时，需要牢记两点：

1.  在调用`pthread_cancel`. 例如，如果线程 A 正在等待一个条件，而线程 B 锁定条件互斥锁，调用`pthread_cancel`然后`pthread_join`在解锁条件互斥锁之前，您将死锁。

2.  安装清理处理程序（请参阅 参考资料[`pthread_cleanup_push`](http://linux.die.net/man/3/pthread_cleanup_push)）以在调用之前解锁条件互斥锁`pthread_cond_wait`- 否则您将取消线程并使互斥锁保持锁定状态。

但是，还要注意 pthread 条件变量实现已经/有一些错误 - 所以一定要使用最新的 glibc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:35:29.300

您可能想要使用 pthread_cond_wait 而不是 cond_wait。

如果您使用 pthread_cond_wait 并基于此来自 m​​an pthread_cond_wait(3)

> 条件等待（无论是否定时）是一个取消点。当线程的可取消启用状态设置为 PTHREAD_CANCEL_DEFERRED 时，在条件等待时对取消请求采取行动的副作用是在调用第一个取消清理处理程序之前（实际上）重新获取互斥锁。效果就像线程被解除阻塞，允许执行直到从调用 pthread_cond_timedwait() 或 pthread_cond_wait() 返回的点，但此时注意到取消请求，而不是返回到 pthread_cond_timedwait() 的调用者或 pthread_cond_wait()，启动线程取消活动，包括调用取消清理处理程序。

看起来线程将在 pthread_cond_wait 上取消，即使它当前被阻塞

~~或者您可以使用 pthread_setcanceltype 将取消类型设置为 ASYNCHRONOUS。~~见下面的评论

但就像大多数时候一样，最好的确定方法是使用测试代码进行尝试。

# assembly - 当前程序状态寄存器异常模式

> ID：15641149
> 
> 赞同：5
> 
> 时间：2013-03-26T15:36:50.747
> 
> 标签：assembly, arm, armv7

我正在使用具有以下四个汇编指令的代码：

```
CPSR_cxsf
SPSR_cxsf

CPSR_c
SPSR_c

```

我一直很难弄清楚这些异常模式之间的区别是什么。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T15:46:29.847

`c, x, s`并且`f`指的是状态寄存器的不同部分：

c = 控制
x = 扩展
s = 状态
f = 标志

使用 eg 的目的`CPSR_c`是它允许您只更新状态寄存器的一部分（在这种情况下是控制位）而不影响其他部分。

# matlab - 神经网络的湖泊访客建模

> ID：15641152
> 
> 赞同：0
> 
> 时间：2013-03-26T15:37:09.890
> 
> 标签：matlab, neural-network, time-series

假设我想在特定时间对任意湖泊的游客数量进行建模。

给定数据：

*   12 个湖泊的游客数量时间序列。
*   12 个湖泊的天气时间序列
*   湖边的树木数量
*   海滩草/石地面的百分比。

因此，我想使用神经网络 (NN) 来模拟访问者的数量，并且我有一些基本问题要逐步介绍。请注意，不得使用访客时间序列！

1）我们只使用输入：

*   时间
*   星期几

所以有两个输入和一个输出。我读到一个经验法则，它说隐藏的神经元应该被选为

`#input>=neurons>=#output`.

这里的输入数量是 2 还是对因变量的实际数量（如天气、人的情绪、经济状况……）的估计。如果是，那么我应该选择我的隐藏神经元为 1 或 2，对吗？

2）如果我想将湖泊的特定参数包括在数量或地面比率中，我可以将这些作为额外的输入（十二个湖泊中的每一个都是恒定的）添加还是出于某种原因没有帮助？我如何确保这些输入和输出之间存在因果关系？

3）对于天气，因为它是我应该使用天气值的时间序列。例如，我如何获得最佳延迟。格兰杰因果关系是确定这一点的一种手段吗？

希望你能帮忙。我只想讨论 NN 在建模方面的优势，并想听听您的意见。我会为此使用 Matlabs 神经网络工具箱。提前致谢。

# java - Xuggle android 到 android 视频流

> ID：15641156
> 
> 赞同：1
> 
> 时间：2013-03-26T15:37:18.547
> 
> 标签：java, android, eclipse, xuggle

我正在尝试使用 Xuggle（在 Win7 中使用 Eclipse），目标是 android 设备，更好的说法是，将视频从一个 android 设备流式传输到另一个（在一个 android 设备上本地存储的视频）。

第一个问题：Xuggle 网页让我有点困惑。我无法理解当它进入 android 设备或某些基于 linux 的设备时是否应该为 windows 下载 jar 文件？那里没有安卓版本。也有很多链接是死的，或者那些小教程链接到死页（或链接被删除）。**下载和使用哪个 jar 文件？**

第二个问题：我没有看到我可能使用或与我的情况非常相似的确切示例。**有人给我指出正确的方向（或证明我是盲人）？**从 android 到 android ( server-client ) 的视频流示例将非常受欢迎。

PS：Xuggle 似乎是这里的最佳选择，但如果有更好的解决方案，我会很高兴，最好使用与我的用例类似的示例 :)

谢谢， 迈克尔

# django - 在 Django 查询集中过滤子行

> ID：15641157
> 
> 赞同：0
> 
> 时间：2013-03-26T15:37:19.777
> 
> 标签：django, django-models, django-queryset, django-rest-framework

在查询集中，我想返回一个集合（通过 pk）和所有具有 status='ACTIVE' 的 Sales 对象。

我努力了：

```
Collection.objects.filter(Sales__status="ACTIVE") 
```

但是，如果其中一个 Sales 对象与条件匹配，而不仅仅是状态为“ACTIVE”的对象，我将取回包含所有 Sales 对象的集合对象

所以我有 2 个模型（和一个参考模型）

```
class Collection(models.Model):
    ID = models.AutoField(primary_key=True)
    collection_title = models.CharField(max_length=255)

class Sales(models.Model):
    ID = models.AutoField(primary_key=True)
    sales_title = models.CharField(max_length=255)

class CollectionSales(models.Model):
    COLLECTIONSALES_STATUS_LIST = (
        ('ACTIVE', 'Active'),
        ('REJECT', 'Reject'),
    )
    collection = models.ForeignKey('Collection')
    sales = models.ForeignKey('Sales')
    status = models.CharField(max_length=10, choices=COLLECTIONSALES_STATUS_LIST, default="ACTIVE")
    class Meta:
        db_table = "myschema_collection_sales"
        managed=False 
```

编辑：我正在尝试将其放入 Rest-Framework 以便输出为：

```
{
"count": 2, 
"next": null, 
"previous": null, 
"results": [
    {
        "ID": "1", 
        "collection_title": "My Collection 1", 
        "Sales": [
              {
                 "ID": 12,
                 "sales_title": "my sales title 12",
                 "status": "ACTIVE"
              }
         ]
    }
    ,
    {
        "ID": "2", 
        "collection_title": "My Collection 2", 
        "Sales": [
              {
                 "ID": 4,
                 "sales_title": "my sales title 4",
                 "status": "ACTIVE"
              },
              {
                 "ID": 5,
                 "sales_title": "my sales title 5",
                 "status": "ACTIVE"
              }
         ]
    }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:10:03.573

您必须自己构建数据结构。您想要的基本上是两个查询，而您无法一次调用。

```
data = {"collection":None, "sales":[]}
for coll in Collection.objects.filter(sales__status="ACTIVE"):
   data["collection"] = coll
   for collsales in coll.collectionsales_set.filter(status="ACTIVE")
      data["sales"].append(collsales.collection) 
```

# java - 有限货币正则表达式

> ID：15641169
> 
> 赞同：0
> 
> 时间：2013-03-26T15:37:58.957
> 
> 标签：java, regex, currency

我发现了很多很好的货币正则表达式，它们非常接近我的需要。唉，我不是正则表达式大师，似乎无法编辑我当前的正则表达式以满足要求。

我需要将有效输入限制为“xxx，xxx.xx”的格式。允许的最大金额需要为“999,999.99”，逗号可选。直到现在我一直在使用这个正则表达式：

`^([0-9]{1,3}(,[0-9]{3})*|([0-9]+))(.[0-9]{2})?$`

除了无法将上限设为“999,999.99”外，它一直运行良好。谢谢您的帮助！

* * *

## 更新

* * *

我一直在修修补补，我设法想出了这个：

`/^(?:([0-9]{3}?,?)?[0-9]{3}(?:\.[0-9]?[0-9]?)?)$/`

还在测试，看看它是否有效。 [RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)没有通过我尝试的任何字符串传递它，但我将通过我的应用程序并手动测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:01:49.340

Burning_LEGION 的回答授权了一些我认为您可能不想要的情况：
- 999,9
- 9。

我假设您希望满足这些条件：
- 如果有逗号，后面有 3 个数字
- 如果有一个点，后面有 2 个数字

```
^\d{1,3}(,?\d{3})?(\.\d{2})?$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:42:21.507

使用这个正则表达式`^\d{1,3}(,?\d{1,3}){0,1}(\.\d{0,2})?$`

# git - git - 我需要推送我的最新更改并得到我的分支提示落后于远程对应的错误

> ID：15641170
> 
> 赞同：1
> 
> 时间：2013-03-26T15:38:00.457
> 
> 标签：git

通常为了解决这个问题，我会做 git stash。但这次我想确保我推动我的改变。Git stash 只是隐藏了我的更改，对吧？那么有没有办法解决这个错误消息并确保我推送我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:39:59.697

您需要从远程服务器获取最近的更改并根据它们重新设置当前分支：

> git pull --rebase

之后（如果你很幸运并且没有人推送更多更改）你可以再次推送：

> git 推送

# wordpress - Wordpress：前端编辑自定义帖子类型，只需密码登录

> ID：15641180
> 
> 赞同：0
> 
> 时间：2013-03-26T15:38:17.363
> 
> 标签：wordpress, custom-post-type

这可能很棘手——我希望有人能提供帮助！

上下文：我在 Wordpress 中有一个自定义应用程序，它基于注册和未注册用户从前端发布自定义帖子类型。

问题：显然注册的用户只需要登录来编辑他们的帖子，但我需要做的是允许未注册的用户在创建帖子时设置帖子密码，并在他们愿意时只向他们显示密码字段编辑他们的帖子。本质上，他们将输入他们设置的密码（隐藏字段将引用引用的帖子 ID），然后登录并显示编辑屏幕——就像注册用户在登录和编辑帖子时看到的一样. 我了解这里的安全风险。

希望有人能帮忙！谢谢！

# javascript - Html 单选选项文本对齐

> ID：15641181
> 
> 赞同：0
> 
> 时间：2013-03-26T15:38:17.567
> 
> 标签：javascript, html, css, vertical-alignment, text-alignment

我在对齐收音机选项时遇到了这个问题。我试图设计的一个例子是：

```
Question: How are you doing? 
A.I'm doing fine             B. OK                C. So so             D. not so good 
```

A、B、C、D 每个都以带有 class = 'option' 的单选按钮为前缀

为了确保 A 的选项（类似地，B、C、D）是垂直对齐的，我正在做：

```
.option {
   width: 25%; 
   display: inline-block;
} 
```

如果文本不太长，这很好用。如果文本太长，我需要将它们安排为：

1) 如果可能，每行有 2 个选项

```
A. <long A text>                                       B. <B's text> 
C. <C's text>                                          D. <D's text> 
```

2) 如果任何文本对于上述设置 1) 来说真的太长，则每行有 1 个选项。

```
A. <too long A text>
B. <B's text>
... 
```

我怎样才能达到这个效果？对 CSS、Js 的任何建议对我都有好处。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:05:16.037

样式和适当填充 html

```
<ul class="short">
  <li>a long text</li>
  <li>b text</li>
  <li>c long text</li>
  <li>d text</li>
</ul> 
```

css

```
ul {
   width: 500px;
}
li {float:left; margin-right:20px;}
ul.long > li { width: 500px;}
ul.med > li {width: 220px; /* (500-40)/2 */}
ul.short > li {width: 105px; /* (500-80) /2 */} 
```

js

```
find width of longest li and add appropriate class to ul 
```

见小提琴[http://jsfiddle.net/QqDgA/](http://jsfiddle.net/QqDgA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:50:22.380

你可以使用JS来检查列表中每一项的字符长度，然后根据字符数有2种不同的样式。如果任何一项超过一定数量的字符，您可以将宽度设置为 50%，而不是 25%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:44:33.773

使用无序列表作为容器。

```
<ul>
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
</ul> 
```

设置它的样式，使列表项的宽度为列表本身的 1/2，并将它们向左浮动。

```
ul, li {margin:0;padding:0;list-style:none}
ul {width:500px:}
li {float:left;width:250px} 
```

# android - android中API level11之前的getActionView()的替代方法是什么？

> ID：15641183
> 
> 赞同：38
> 
> 时间：2013-03-26T15:38:28.997
> 
> 标签：android, android-actionbar, android-ui

`getActionView()`中引入了操作栏`API 11`，如果我想要向后兼容，还有什么替代方法`getActionView()`？

例如

```
public boolean onCreateOptionsMenu(Menu menu) {
   getMenuInflater().inflate(R.menu.action_bar_menu, menu);

   final MenuItem item = menu.findItem(R.id.menuitem);
   item.getActionView() //Works from API level 11

   return true;
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-08-06T22:45:18.930

您可以使用支持库中的[MenuItemCompat.getActionView(MenuItem menuItem)](http://developer.android.com/reference/android/support/v4/view/MenuItemCompat.html#getActionView%28android.view.MenuItem%29)来获取 pre 11 API 上的操作视图。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-01-27T23:09:21.963

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
  getMenuInflater().inflate(R.menu.main_activity_actions, menu);
  MenuItem searchItem = menu.findItem(R.id.action_search);
  SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);
  // Configure the search info and add any event listeners
  ...
  return super.onCreateOptionsMenu(menu);
} 
```

有关详细信息，请参阅[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-26T15:45:17.960

为了向后兼容，您可以使用`ActionBarCompat`或`ActionBarScherlock`。在这两种情况下，您都可以使用方法`getActionView().`您必须确保导入，在第一种情况下是来自兼容性库 ( `android.support.v4.view.MenuItemCompat`)。如果你使用`ActionBarSherlock`你必须`import com.actionbarsherlock.view.MenuItem`。那么你应该可以使用 `item.getActionView()`.

老的

~~自 2013 年 8 月以来，我祈祷人们投票反对。您必须确保OP的问题日期导入，在第一种情况下引入的Android来自兼容性库（ActionBarCompactandroid.support.v4.view.MenuItemCompat）。即使如果您使用 ActionBarSherlock 仍然是一个有效的选择，一个选项正在朝着 ActionBarCompact 发展。~~

~~所以另一个选择是使用它，当然，所有你必须来自支持库的导入，例如 android.supportimport com.v4actionbarsherlock.view.MenuItemCompatMenuItem。那么你应该可以使用 item.getActionView()。~~

# php - 过滤 PHP < 5.2 的输入数组

> ID：15641189
> 
> 赞同：0
> 
> 时间：2013-03-26T15:38:44.687
> 
> 标签：php, compatibility, filter-input

我有很多使用此功能的代码。但现在我需要做与 PHP 5.1.6 兼容的代码（我无权更新 PHP 或安装任何扩展），所以我需要一些用户定义的函数来声明它。我在谷歌上搜索，但没有成功。你知道如何解决这个问题吗？谢谢，RS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:50:10.037

过滤器的功能非常强大，而且是一个很大的工作重现它们。

如果你想重现它，你可以这样做：

```
if(!function_exists('filter_input_array'))
{
    function filter_input_array($type, $definition)
    {
        // Write code here
    }
} 
```

# c# - 控制器中带有动作的自定义路由

> ID：15641191
> 
> 赞同：1
> 
> 时间：2013-03-26T15:38:47.943
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

在我的`RouteConfig`我有：

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute("ApiController", "api/{controller}");

  routes.MapRoute("ApiControllerAndIntegerId", "api/{controller}/{id}", null, new { id = @"^\d+$" });

  routes.MapRoute("ApiControllerActions", "api/{controller}/{action}");
} 
```

然后我有一个`LookupController`.

```
public class LookupsController : ApiController
{
  public string Get()
  {
    return "Default Get";
  }
  // /api/lookups/custom
  [ActionName("custom")]
  public string CustomLookup()
  {
    return "Hello, World";
  }
} 
```

如果我导航到`/api/lookups/custom`我仍然得到`Default Get`而不是`Hello, World`. 我究竟做错了什么？

**编辑**

我尝试了 和 的不同变`MapHttpRoute`体`MapRoute`。两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:56:49.123

MVC 路由按照您定义它们的顺序进行检查。你遇到了问题`/api/lookups/custom`，这应该是命中`"api/{controller}/{action}"`。但是，在此之前你有`"api/{controller}/{id}"`and `"api/{controller}"`，所以看起来其中之一正在捕捉它。我的猜测是它试图解析“自定义”，就像`{id}`这两个中的第一个一样。我注意到您没有在路由中指定默认控制器或操作；您可能会在发布之前将它们取出以减少空间，但是如果您没有指定默认值，我建议您这样做 - 无论它是否能够选择自己的默认值，了解您的程序的“我不*知道*”会很有用“不知道该怎么做”的行为是。

颠倒您指定这三个路线的顺序。如有疑问，请将最长和最具体的路线放在首位，然后逐渐变得更加模糊。将更通用的路由置于顶部往往会导致那些路由捕获本应进一步向下更具体的路由定义的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:42:55.093

您为 Web Api 使用了错误的配置路由，它应该[`MapHttpRoute`](http://msdn.microsoft.com/en-us/library/system.web.http.httproutecollectionextensions.maphttproute%28v=vs.108%29.aspx)是`MapRoute`：

```
var configuration = GlobalConfiguration.Configuration;

     configuration.Routes.MapHttpRoute(
          name: "CustomizedApi",
          routeTemplate: "api/{controller}/{action}/{id}",
          defaults: new { id = RouteParameter.Optional }
      );

        configuration.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

请注意：把路线`"api/{controller}/{action}/{id}"`放在上面`"api/{controller}/{id}"`

`[HttpGet]`此外，在您的标记中`CustomLookup`支持此操作的 GET 方法：

```
// /api/lookups/get
public string Get()
{
    return "Default Get";
}

// /api/lookups/custom
[ActionName("custom")]
[HttpGet]
public string CustomLookup()
{
    return "Hello, World";
} 
```

它会起作用的

# camera - 用于实际应用的要计算或先验已知的基本矩阵

> ID：15641194
> 
> 赞同：0
> 
> 时间：2013-03-26T15:38:53.643
> 
> 标签：camera, computer-vision, linear-algebra, stereo-3d

如果您要设计立体视觉算法的真实世界应用程序，比如说无人机或航天器，它从两个图像计算高程图，是先验已知的基本矩阵还是我必须与视差图？

如果可以先验获得基本矩阵，那么校准矩阵和投影矩阵的知识是否足以计算矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:11:11.843

*关于你的第一个问题：*

根据我的经验，这取决于您的相机系统的机械设计以及固定焦距的使用。如果您能够牢固地安装相机，并且您的焦距没有改变，那么您可以预先校准整个事情。

如果您的相机的相对位置可能会发生变化（例如，当它们安装在一个不完全刚性的结构上），或者如果您正在缩放或使用自动对焦（！），那么您必须考虑动态校准（或大约更好地修理你的相机）。校准误差引起的深度误差取决于立体设置的基线和到场景的距离，因此您可以计算公差。

*关于你的第二个问题：*

是的，这就足够了。

您应该知道计算 F 矩阵的方法有很多种。我强烈建议查看[Hearley & Zisserman](http://www.robots.ox.ac.uk/~vgg/hzbook/)，这是这些主题的事实上的参考。

# shopify - 在液体中的语句中分配变量

> ID：15641197
> 
> 赞同：8
> 
> 时间：2013-03-26T15:38:58.880
> 
> 标签：shopify, liquid

有没有办法在液体中的语句中有一个变量，如下所示：

```
{% assign somevar = 'about-us' %}
{{ pages.somevar.content }} 
```

将产生与您最初使用的相同的输出：

```
{{ pages.about-us.content }} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T21:41:50.313

```
{% assign somevar = 'about-us' %}
{{ pages.[somevar].content }} 
```

这对我来说很好......

# ios - 旋转 UISplitViewController 后模态消失

> ID：15641198
> 
> 赞同：5
> 
> 时间：2013-03-26T15:39:08.757
> 
> 标签：ios, objective-c, uisplitviewcontroller

我有一个奇怪的问题 UISplitViewController。我的主视图控制器中有一个按钮，点击时会打开一个模式视图（使用简单的故事板 segue）。

但是当我旋转 iPad 时，模态视图会消失，但只有在从纵向旋转到横向时才会消失。我的主视图控制器隐藏在纵向中，就像在本机邮件应用程序中一样。

如果我在横向（当主始终可见时）并打开我的模态，旋转设备正常工作并且我的模态保持在屏幕上。

我尝试以编程方式手动触发 segue，如果我调用`performSegueWithIdentifier:`splitViewController，则旋转可以双向工作。但我想知道这是否可以以更简单的方式修复，因为我在主视图控制器中还有其他显示模式的按钮，我不想为每个按钮执行 IB 操作而失去故事板 segues 的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T17:07:52.347

不幸的是，当你的 ipad 处于纵向模式时，你有一个你的主人的弹出框，它不是其他形状的主人。这意味着您正在使用此弹出框作为presentingViewController来呈现模式，因此当您从纵向移动到横向时，该方法`splitViewController:willShowViewController`将使您的弹出框为零，如您所见：

```
- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:nil animated:YES];
    self.masterPopoverController = nil;
} 
```

因此，我理解您的模态与它一起使用是可以接受的。所以，有了这个你就明白了为什么当你`performSegueWithIdentifier:`在你的 splitViewController 上调用你的动作时它不会发生，你的模态不再与你的弹出框连接。

所以你可能会问为什么当你从横向移动到纵向时它不会发生......原因是`splitViewController:willHideViewController`，它隐藏了 viewController 它没有删除它，所以你的模态总是连接的。

因此，不幸的是，没有解决方案，您将不得不通过代码执行操作..

我希望它有所帮助，

罗伯托

# jquery - Jquery Mobile 自动完成

> ID：15641201
> 
> 赞同：0
> 
> 时间：2013-03-26T15:39:12.697
> 
> 标签：jquery, jquery-mobile

任何人都可以看到有什么问题吗，调用了操作，但是页面上没有显示结果以供选择。

```
<script>
        $(document).on("pageinit", "#pageHome", function () {
            $("#autocomplete").on("listviewbeforefilter", function (e, data) {
                var $ul = $(this),
                    $input = $(data.input),
                    value = $input.val(),
                    html = "";
                $ul.html("");
                if (value && value.length > 2) {
                    $ul.html("<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>");
                    $ul.listview("refresh");
                    $.ajax({
                        url: "@Url.Action("Search","Schedule")",
                        data: {
                            q: $input.val()
                        }
                    })
                        .then(function (response) {
                            $.each(response, function (i, val) {
                                html += "<li>" + val + "</li>";
                            });
                            $ul.html(html);
                            $ul.listview("refresh");
                            $ul.trigger("updatelayout");
                        });
                }
            });
        });
    </script>

<div data-role="page" id="pageHome">
 <ul id="autocomplete" data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Find a city..." data-filter-theme="d"></ul>
</div> 
```

//搜索

```
public ActionResult Search(string term)
        {

            return new JsonResult
            {
                Data = _Service.FindAllByWildCard(term)
                    .Select(p => new { p.Name}).ToArray(),
                JsonRequestBehavior = JsonRequestBehavior.AllowGet
            };
        } 
```

# user-interface - 采用从混合弹出到 Visual Studio Windows Phone 8

> ID：15641204
> 
> 赞同：2
> 
> 时间：2013-03-26T15:39:26.860
> 
> 标签：user-interface, popup, windows-phone-8, blend

我们正在尝试实现一个弹出窗口。

我们通过在 Blend 中制作一个弹出窗口来做到这一点，我们将其解释为一种风格？因为它在visual studio中的变量名。我们试图给

myPopup.style = blendPopupStyle;

但是当显示它时，样式就丢失了。有人可以解释一下如何做到这一点的模型吗？

此外，弹出窗口应该扩大背景，以免人们能够点击弹出窗口上的 UI 以外的任何内容。

一个例子在这里[http://blogs.u2u.be/diederik/post/2012/06/12/Modal-Dialogs-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/06/12/Modal-Dialogs-in-Windows-8-Metro.aspx)但它只适用于Windows 8。当试图港口我一直没能找到办法。但这仍然留下了混合问题。

希望有人有一个例子/教程，或一些指针:)

**回答**

错误在于您将弹出模型混合位置的位置。它应该是其他元素作为弹出元素的位置。然后你可以简单地通过NAME.isopen = true;。

如果您想要一个在弹出窗口期间无法访问的背景，并且您不想要一个巨大的弹出窗口。只需打开一个具有适当不透明度的弹出窗口 &/| 颜色。然后打开你的混合模型完成:)

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T13:17:06.140

站在问题中。重写：

错误在于您将弹出模型混合位置的位置。它应该是其他元素作为弹出元素的位置。然后你可以简单地通过NAME.isopen = true;。

如果您想要一个在弹出窗口期间无法访问的背景，并且您不想要一个巨大的弹出窗口。只需打开一个具有适当不透明度的弹出窗口 &/| 颜色。然后打开你的混合模型完成:)

# vaadin - Vaadin GWT 错误

> ID：15641214
> 
> 赞同：0
> 
> 时间：2013-03-26T15:39:53.447
> 
> 标签：vaadin

当我启动我的服务器时，我看到了这个：

> java.lang.ClassNotFoundException: com.vaadin.client.ui.AbstractComponentConnector

让图书馆就位，在我的`gwt.xml`我有：

```
<inherits name="com.vaadin.DefaultWidgetSet" /> 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T23:18:22.567

您是否在构建路径中包含`vaadin-client`库？

如果你使用`maven`，它在你的依赖中应该是这样的：

```
 <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin-client</artifactId>
        <version>7.0.7</version> <!-- 7.0.7 or any version that you use -->
    </dependency> 
```

# http - 提交表单并包含授权标头

> ID：15641219
> 
> 赞同：1
> 
> 时间：2013-03-26T15:40:00.233
> 
> 标签：http, http-headers

我有一个使用基本授权方案的服务器，当用户尝试访问受限内容时，浏览器将弹出一个登录/通过对话框，我看到该对话框将进一步将授权类型标头传输到服务器。

我想实现一个带有登录/密码编辑框和发送按钮的经典（纯 html）页面，但在服务器上保持完整的身份验证方案（是一些嵌入式非常有限的服务器，没有 php 等），所以表单必须发送标题也是。

可能吗？或者到目前为止我是否遗漏了一些我理解的东西？

首先十分感谢，

# sql - 将查询中的数据添加到嵌套表中

> ID：15641224
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:40:25.697
> 
> 标签：sql, plsql

如何将查询中的数据添加到嵌套表中？

我有我的嵌套表：`TYPE TABLE_DATA IS TABLE OF NUMBER;`
和我的查询`SELECT num FROM table_one JOIN table_two t2 ON table_one.num = t2.num WHERE f1.id = pid;`

我想`num`在我的嵌套表中存储每个行的存储。（我必须使用嵌套表。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:44:05.317

使用[`BULK COLLECT`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#i49139)：

```
DECLARE
   TYPE table_data IS TABLE OF NUMBER;
   l_data table_data;
BEGIN
   SELECT num 
     BULK COLLECT INTO l_data 
     FROM table_one 
     JOIN table_two t2 ON table_one.num = t2.num 
    WHERE f1.id = pid;
END; 
```

# java - 集合的Java语法场景 [] 是必要的和/或有效的

> ID：15641226
> 
> 赞同：0
> 
> 时间：2013-03-26T15:40:31.667
> 
> 标签：java, data-structures

我在学习 morphadorner 操作时遇到了一段有趣的代码。代码如下：

```
Collection<Object>[] nodes = someFunction() 
```

我的问题是在什么情况下这个声明是必要的和/或有效的：

```
Collection<Object>[] nodes 
```

我见过：

```
Collection<Object[]> nodes 
```

但想不出我需要一个`Array`of的场景`Collections`。那么问题来了，什么时候会用到它？

这是[javadoc](http://morphadorner.northwestern.edu/morphadorner/documentation/javadoc/edu/northwestern/at/utils/corpuslinguistics/namerecognizer/NameRecognizer.html)：

```
java.util.Set<java.lang.String>[] 

findNames(java.lang.String text)
      Returns names from text. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:49:01.560

首先，

```
Collection<Object[]> nodes; 
```

和

```
Collection<Object>[] nodes; 
```

是两个不同的东西。第一个是数组的集合，而第二个是集合的数组。

至于何时使用后者，我的回答是“很少”。虽然从概念上讲这很简单，但 [Java 数组和泛型不能很好地配合使用](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)。

因此更常见的是看到

```
ArrayList<Collection<Object>> nodes; 
```

这很相似，但更容易处理。

至于是否[`findNames()`](http://morphadorner.northwestern.edu/morphadorner/documentation/javadoc/edu/northwestern/at/utils/corpuslinguistics/namerecognizer/NameRecognizer.html#findNames%28java.lang.String%29)是一个好的设计示例，我的主要反对意见是完全不可能从函数签名中猜测数组的元素应该代表什么（或有多少）。出于这个原因，我会做不同的事情，可能会返回一个带有两个明确命名的访问器的自定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:48:19.527

代码可以编译，因此它可能是有效的 Java。

当设计师想不出更好的解决方案时，这是必要的。

这给我们留下了：这是好的设计吗？

也许但可能不是。一种情况是函数总是返回两个或三个集合（即多个集合，但数量永远不会改变）。

您可以为此创建一个对象，但由于这是 Java，这将需要很多很多行致命的无聊代码。这也意味着您必须为每个集合想出一些有用的名称。

考虑到您发布的 JavaDoc，数组的数量似乎取决于文本中的句子数量。

所以在这种情况下，我会返回 a `List`of `Collection`s （因为句子的顺序永远不会改变，你可能想通过索引来获取它们）。

设计师可能会争辩说您可以将元素添加到列表中，但不能添加到数组中，但我会使用不可修改的列表。

所以在这个例子中，我会说这是一个糟糕的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:51:48.620

```
Collection<Object>[] nodes 
```

是有效的，因为这意味着我们得到一个`array`of `Collection<Object>`。然而，

```
Collection<Object[]> nodes 
```

意味着我们得到一个`Collection`包含`arrays`的`Objects`。

> 我的问题是在什么情况下这个声明是必要的和/或有效的：

考虑当你有不同`set`的`objects`说法（人）时的情况。每个人都`set`属于特定国家的人民。我们创建一个指定大小的数组`set`。在这种情况下，我们使用以下语法：

```
Set<People>[] setOfPeople = new TreeSet<People>[5]; // We want to consider people of 5 different countries. 
```

# android - Motodev 站点挂 Eclipse 检查更新

> ID：15641227
> 
> 赞同：0
> 
> 时间：2013-03-26T15:40:38.700
> 
> 标签：android, eclipse, motorola, motodev-studio

我对 Eclipse 和 Android 开发有点陌生。几个月前，我安装了 motodev 环境，此后该环境已关闭（[我在哪里可以下载 MotoDev Studio？](https://stackoverflow.com/questions/13219353/where-i-can-download-motodev-studio)）。

我已经按照摩托罗拉的说明删除了 motodev 环境，但我遇到的问题是我在 Eclipse 的“可用软件站点”中仍然有 motodev 网站。在 Eclipse 中运行检查更新后，它只会挂在这个网站上 - [https://studio-android.motodevupdate.com/android/1.2/adt/](https://studio-android.motodevupdate.com/android/1.2/adt/)

以下是 Eclipse 错误日志中的片段：

```
!ENTRY org.eclipse.equinox.p2.transport.ecf 2 0 2012-11-22 12:40:28.607
!MESSAGE Connection to https://studio-android.motodevupdate.com/android/1.2/adt/p2.index failed on Connection refused. Retry attempt 0 started
!STACK 0
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351) 
```

我在 Mac OS Mountain Lion 上，我尝试转到首选项 -> 安装/更新 -> 可用软件站点。我已将其删除并禁用了它，但每次重新启动 Eclipse 后，它都会重新添加到列表中或重新启用，并再次冻结检查更新过程（帮助 -> 检查更新）。

我可以通过进入并禁用/删除条目来解决此问题，然后立即运行检查更新。该问题仅在重新启动 Eclipse 并重新添加/重新启用站点后发生。

我怎样才能摆脱这个愚蠢的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T16:58:24.077

从 Eclipse 转到 Window | 偏好 | 安装/更新 | 可用的软件站点；从那里，取消选中（禁用）以下组件：

```
Motodev Plugins
MotodevPlugins
Sequoyah Metadata Repository
https://studio-android.motodevupdate.com/android/4.0/
https://studio-android.motodevupdate.com/android/4.0/basic/
https://studio-android.motodevupdate.com/android/4.1/ 
```

Sequoyah 是一个旧的独立组件，通常在 Motodev 之前安装，因为 Motodev 需要它。它不再被维护，可能您应该在删除 Motodev 后也将其删除。

列表中的最后三个在此处不是按其组件名称设计的，而是按其位置设计的，因为它们是未命名的站点。（至少，它们在我的个人安装中没有命名）。您还应该仔细检查与 Motodev 或 Sequoyah 相关的任何其他网站。

在那之后，不仅你不应该有任何错误，而且更新检查应该执行得更快。

顺便说一句，当您在那里时，请花时间检查其他较旧的、未使用的组件/版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T06:24:18.687

确实如此。我尝过 [eclipse install] -> configuration -> org.eclipse.update -> platform.xml 我删除了所有配置，但我不知道它在哪里。

我必须重新安装几次 eclipse 但不起作用。并导航 .eclispe/platform/configuration/org.eclipse.update/platform.xml 删除它并重新启动。并工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:57:50.523

您需要导航到：

> [eclipse 安装] -> 配置 -> org.eclipse.update -> platform.xml

在该文件中，您需要删除`<feature>`包含 MotoDev 插件的标签。

此外，您还需要导航到：

> [eclipse 安装] -> 功能

在这里您可以找到 MotoDev 插件文件夹并将其删除。

我不完全确定 MotoDev 插件的包名称是什么，因为我从未使用过它，但它很可能以`com.motorola`.

# java - 带有实数的后缀中缀（包括负数）

> ID：15641229
> 
> 赞同：0
> 
> 时间：2013-03-26T15:40:52.887
> 
> 标签：java

我制作了一个应用程序，允许将实数（包括负数）从中缀表达式转换为后缀表达式。它工作得很好，除了我在第一个数字上加上一个负数，然后我在另一个数字上加上一个负数。例如`-1 - 2`或`-2 + 8 - 9`。它显示`-1-2`和`-2 8-9 +`。应该是`-1 2 -`和`-2 8 + 9 -`。当标志是 时，这肯定是一个问题`-`。当输入字符为“-”时，这是我的代码的一部分。

```
for (int j = 0; j < input.length(); j++) {
    char ch = input.charAt(j);
    if (ch == '-') {
                    if ((ch == input.charAt(0)) || (input.charAt(j - 1) == '(')
                            || (input.charAt(j - 1) == '-'))
                        temp = temp + ch;
                    else {
                        output = output + temp + " ";
                        temp = "";
                        gotOper(ch, 1);
                    }
                }
    else if ..
    ...
    } 
```

当应用程序找到`-`并且它位于第一个`input`或之后`(`或之后，`-`所以它是一个负数，我将它放入一个临时变量中。当它在 0 和 9 之间或者它是`.`时，同样的事情。否则，当它是和操作数时，我将其放入其中`temp`并`output`使用堆栈进行操作。我无法显示整个代码，它很长！有人能帮助我吗？

编辑：我这样做是`input = input.replaceAll("\\s+", "");`为了删除所有空格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:53:04.513

第二个 if 语句中的这部分`(ch == input.charAt(0))`应替换为`(j == 0)`. `ch == '-'`否则，只要输入也以 . 开头，它将返回 true `'-'`。

# crystal-reports - Crystal Reports 在 CSV 上选择专家 OR 语句

> ID：15641232
> 
> 赞同：1
> 
> 时间：2013-03-26T15:41:04.053
> 
> 标签：crystal-reports

我正在使用 Select Expert 过滤 3 个字段的组合：

```
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursguar} = "1")
 or
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursnorm} = "1") 
```

在这种情况下，它只匹配：

```
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursguar} = "1") 
```

如果我交换语句：

```
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursnorm} = "1")
 or
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursguar} = "1") 
```

然后它只处理

```
 ({flatfile_csv.site} = "L" and {flatfile_csv.bursnorm} = "1") 
```

它似乎完全忽略了 OR 语句的第二部分。知道如何在 CR 中实现 OR 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:52:41.093

我以前从未将 CR 与 CSV 文件一起使用，所以我不知道它是如何处理这些空字符串的。尝试将选择公式设置为“Nulls 的默认值”而不是“Nulls 的例外”，如下所示：

```
{flatfile_csv.site} = "L"
and
  (
   {flatfile_csv.burnsnorm}="1"
   or {flatfile_csv.burnsguar}="1"
  ) 
```

# html - HTML表格交替行THBody用法

> ID：15641235
> 
> 赞同：3
> 
> 时间：2013-03-26T15:41:14.650
> 
> 标签：html, css

我的页面内容区域中有几个 html 表格。样式很奇怪，因为它不会在每个表格的开头重新开始交替行颜色，而是在表格列表中进行。

```
<table>
    <tr>
       Blue
    </tr>
    <tr>
       White
    </tr>
    <tr>
       Blue
    </tr>
</table>

<table>
    <tr>
        White
    </tr>
    <tr>
        Blue
    </tr>
    <tr>
        White
    </tr>
</table> 
```

行中的颜色表示 css 将设置为行背景的颜色。但我希望 css 为下一张桌子再次开始交替。所以它会是：

```
<table>
    <tr>
       Blue
    </tr>
    <tr>
       White
    </tr>
    <tr>
       Blue
    </tr>
</table>

<table>
    <tr>
        Blue
    </tr>
    <tr>
        White
    </tr>
    <tr>
        Blue
    </tr>
</table> 
```

`THBODY`有什么关系吗？

谢谢，

CSS 代码

```
table { border-collapse:collapse; text-align:center; }

table th, td { border:1px solid #759EC7; padding:3px 7px 2px; }

th { color: #fff;
background-color: #5c87b2; text-align:center; }

tr:nth-child(odd) { background-color: #CEE1F5; }
tr:nth-child(even) { background-color: #fff; } 
```

**更新**
它可能是一个已经潜入的错误，我已经查看了建议的小提琴并且它工作得很好，所以它只是某个地方的一些错误代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:49:31.090

`:nth-child()`您可以使用传递`even`和`odd`值的组合轻松实现它。例如。看到[这个小提琴](http://jsfiddle.net/ewtcq/)。

其中，CSS 是

```
body {
    background-color: black;
    color: red;
}
table tr:nth-child(odd) {
    background-color: blue;
}
table tr:nth-child(even) {
    background-color: #ffffff;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:52:13.573

您唯一的问题是缺少表中的标签。如果您添加它，它会完美运行。它不应该与 tbody 标签有任何关系。

```
<table>
    <tr>
        <td>Blue</td>
    </tr>
    <tr>
        <td>White</td>
    </tr>
    <tr>
        <td>Blue</td>
    </tr>
</table>
<table>
    <tr>
        <td>Blue</td>
    </tr>
    <tr>
        <td>White</td>
    </tr>
    <tr>
        <td>Blue</td>
    </tr>
</table> 
```

[这是小提琴：http://jsfiddle.net/rBwBm/](http://jsfiddle.net/rBwBm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:55:28.633

我想你是用javascript做的，对吧？可能使用 $('tr') 通过 jquery 获取 tr 集合？尝试使用 CSS nth-child(odd) 和 nth-child(even) 代替，大多数现代浏览器不会有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T12:12:49.720

我遇到的问题是两`<TH>`行，通过交替行着色。例如：

```
<tr>
    <th colpsan="2">Name</th>
</tr>
<tr>
    <th>First</th>
    <th>Last</th>
</tr> 
```

这将在行`Blue`上开始`Name`，然后开始交替。所以表格主体的第一行是`Blue`

```
<tr>
    <th>Name</th>
</tr> 
```

这将像以前一样在行`Blue`上开始`Name`，然后开始交替，**但是**，表格主体的第一行将是`White`

在这些情况下，它会显示出一种不断变化的风格，这不是我想要实现的。所以我所做的就是解决这个问题：

```
<thead>
    <tr>
        <th colpsan="2">Name</th>
    </tr>
    <tr>
        <th>First</th>
        <th>Last</th>
    </tr>
</thead>
<tbody>
   <!-- Table Content in Here -->
</tbody> 
```

然后我将样式表更改为：

```
tbody tr:nth-child(odd) {}
tbody tr:nth-child(even) {} 
```

所以基本上我使用`TBody`and`THead`标签来制作更具体的 css 样式，非常棒。更多的控制，灵活性。因此，在我的新示例中，您可以在中添加任意数量的行`THead`，内容应始终以 开头`White`，并回答我的问题：

> `THead`有什么关系吗？

是的，它**与**它有关。

# android - 如何在Android中将URL的HTML代码保存在字符串中

> ID：15641237
> 
> 赞同：0
> 
> 时间：2013-03-26T15:41:19.310
> 
> 标签：android, html

我正在尝试从 URL 获取 HTML 源代码...我也添加了 INTERNET 的权限，但我仍然无法获取字符串中的 HTML 代码...我的应用程序崩溃了...在 Android 4.2 上使用它... .我还在webview中加载了相同的页面，webview正在显示页面......请帮助我......

我正在使用以下代码

```
public String getXml(String url) {

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        ResponseHandler<String> resHandler = new BasicResponseHandler();
        String page = httpClient.execute(httpGet, resHandler);
        return page;
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        return "";
    } catch (IOException e) {
        e.printStackTrace();
        return "";
    }
} 
```

我还想问另一个问题，如果我必须获取已经下载的网页的 HTML 源代码怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:45:05.263

我认为您正在对导致异常的主线程进行网络操作。

```
NetworkOnMainThreadException. 
```

所以使用 AsyncTask 在 android 版本 >= 3.0 上做网络操作。

## 编辑

了解如何在 AsyncTask 中执行操作。

[查看 Android 开发者文档。](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:47:34.133

按照@TGMCians 所说的去做，并将其放入 AsyncTask 中。但是要以字符串形式获取返回的 HTML，请执行以下操作：

```
String responseEntity = EntityUtils.toString(page.getEntity); 
```

那应该有你的HTML。

# c# - 排除数据库中的列并使用 Nhibernate 进行映射

> ID：15641240
> 
> 赞同：1
> 
> 时间：2013-03-26T15:41:26.043
> 
> 标签：c#, nhibernate, design-patterns, mapping

我有以下情况

![在此处输入图像描述](../Images/7bae5901f7b7ce156390ac0129eff9c0.png)

一份 PurchaseOrder 有很多行项目，一张发票有很多行项目。 `PurchaseOrder`并且`Invoice`完全不同。如果一个特定的`LineItem`有一个`PuchaseOrder`，那么没有一个`Invoice`，反之亦然。我需要坚持这些关系。在我的应用程序中，我使用的是 NHibernate。

我想在数据库中，LineItems 表可以有一个带有外键的列 PurchaseOrder 和另一列带有外键的 Invoice。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:28:09.800

您的方法可以正常工作，因为您的 NHibernate 映射可以区分它们使用的外键。这种方法的唯一缺点是故意创建一个始终包含空数据的列。

另一种方法是拥有一个外键列和一个鉴别器列。然而，虽然从关系模型的角度来看这可能更清晰，但它会使 NHibernate 映射更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:45:47.283

您建议的解决方案是最好的，因为您只有 2 列相互排除。我的意思是您的 LineItem 属于 PurchaseOrder 或 Invoice，并且您没有特定于 PurchaseOrder LineItem 或 Invoice LineItem 的其他数据。

如果您想处理更接近对象类和一种继承的数据库表，那么有 EAV 模型，但在您的情况下它似乎过度设计。

[实体属性值数据库与严格的关系模型电子商务](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:06:14.597

## 模型

您可以将 LineItem 映射为层次结构。

**订单项层次结构**

```
public class LineItem
{
   //common properties of LineItem
}

public class PurchaseLineItem : LineItem 
{
     public PurchaseOrder PurchaseOrder { get; set; }
}

public class InvoiceLineItem : LineItem 
{
     public Invoice Invoice { get; set; }
} 
```

修改 PurchaseOrder 和 Invoice 以引用特定子项

采购订单 ：

```
public class PurchaseOrder
{
    public IList<PurchaseLineItems> LineItems { get; set; }
} 
```

发票 ：

```
public class Invoice
{
   public IList<InvoiceLineItems>  LineItems { get; set; }
} 
```

## 数据库

在数据库方面，您可以考虑将这两个项目映射到不同的表中，但这会不必要地增加连接。您可以为整个层次结构采用一个带有类型描述符的表。

1.  特定的类有助于**避免**在其余代码中混淆哪个或哪个持有者`LineItem`可以为*空*，并提高可读性。`PurchaseOrder``Invoice`
**   您甚至可以通过添加`PurchaseOrder`作为参数来改进设计`PurchaseLineItem`（类似于`Invoice`作为构造函数参数`InvoiceLineItem`），以确保这些实体在没有它们各自的持有者的情况下不会被初始化。*

# c# - 如何更改类库框架？

> ID：15641241
> 
> 赞同：0
> 
> 时间：2013-03-26T15:41:27.757
> 
> 标签：c#, .net, visual-studio-2010, frameworks

有没有办法将类库文件 .NET 框架版本从 .NET4 更改为 .NET2？
我有用 .NET Framework 4 编写的 ocx 文件，但是我想在其中添加用 .NET Framework 2 编写的 ocx 文件的应用程序。

**编辑**
不是ocx文件，而是类库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:05:14.543

如果您有库的源代码，则可以在项目的属性中更改 .Net 框架版本，但是，您可能必须编辑代码，因为您可能有 .Net 4 框架支持但 .Net 不支持的代码2 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:49:54.577

> 如果我没有源代码

那将带穆罕默德去山上。使用该元素创建一个 app.exe.config 文件，`<supportedRuntime>`以便您的 .NET 2 应用程序强制加载 CLR 的 .NET 4 版本。

```
<configuration>
   <startup>
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

也是时候考虑将该应用程序重新定位到 4.0。你会知道你迟早要敲门的声音。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:20:55.913

根据已发表的评论，个人似乎无权访问来源。如果没有源代码，则无法更改 .NET 版本，因为它需要重新编译，而且由于语言更改，通常还需要进行许多编辑。特别是在 .NET 4 -> .NET 2 的情况下。

# node.js - 需要使用 Node.js 压缩整个目录

> ID：15641243
> 
> 赞同：147
> 
> 时间：2013-03-26T15:41:31.743
> 
> 标签：node.js, zip

我需要使用 Node.js 压缩整个目录。我目前正在使用 node-zip 并且每次进程运行时都会生成一个无效的 ZIP 文件（正如你可以从[这个 Github 问题](https://github.com/Stuk/jszip/issues/41)中看到的那样）。

是否有另一个更好的 Node.js 选项可以让我压缩目录？

编辑：我最终使用了[存档器](https://npmjs.org/package/archiver)

```
writeZip = function(dir,name) {
var zip = new JSZip(),
    code = zip.folder(dir),
    output = zip.generate(),
    filename = ['jsd-',name,'.zip'].join('');

fs.writeFileSync(baseDir + filename, output);
console.log('creating ' + filename);
}; 
```

参数的样本值：

```
dir = /tmp/jsd-<randomstring>/
name = <randomstring> 
```

**更新：**对于那些询问我使用的实现的人，[这是我的下载器的链接](https://github.com/commadelimited/JSDownloader/blob/master/routes/download.js)：

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-09-12T22:06:43.827

我最终使用了[归档器](https://npmjs.org/package/archiver)库。效果很好。

**[例子](https://github.com/archiverjs/node-archiver/tree/master/examples)**

```
var fs = require('fs');
var archiver = require('archiver');

var output = fs.createWriteStream('target.zip');
var archive = archiver('zip');

output.on('close', function () {
    console.log(archive.pointer() + ' total bytes');
    console.log('archiver has been finalized and the output file descriptor has closed.');
});

archive.on('error', function(err){
    throw err;
});

archive.pipe(output);

// append files from a sub-directory, putting its contents at the root of archive
archive.directory(source_dir, false);

// append files from a sub-directory and naming it `new-subdir` within the archive
archive.directory('subdir/', 'new-subdir');

archive.finalize(); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2018-07-25T11:46:18.450

我不会展示新的东西，只是想为和我一样喜欢 Promises 的人总结一下上面的解决方案。

```
const archiver = require('archiver');

/**
 * @param {String} sourceDir: /some/folder/to/compress
 * @param {String} outPath: /path/to/created.zip
 * @returns {Promise}
 */
function zipDirectory(sourceDir, outPath) {
  const archive = archiver('zip', { zlib: { level: 9 }});
  const stream = fs.createWriteStream(outPath);

  return new Promise((resolve, reject) => {
    archive
      .directory(sourceDir, false)
      .on('error', err => reject(err))
      .pipe(stream)
    ;

    stream.on('close', () => resolve());
    archive.finalize();
  });
} 
```

希望它会帮助某人

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-04-22T20:20:30.643

## 使用 Node 的原生`child_process`api 来完成此操作。

不需要第三方库。两行代码。

```
const child_process = require("child_process");
child_process.execSync(`zip -r DESIRED_NAME_OF_ZIP_FILE_HERE *`, {
  cwd: PATH_TO_FOLDER_YOU_WANT_ZIPPED_HERE
}); 
```

我正在使用同步 API。`child_process.exec(path, options, callback)`如果需要异步，可以使用。除了指定 CWD 来进一步微调您的请求之外，还有更多选项。请参阅[exec/execSync](https://nodejs.org/api/child_process.html#child_process_child_process_execsync_command_options)文档。

* * *

**请注意：** 本示例假设您的系统上安装了 zip 实用程序（至少 OSX 自带）。某些操作系统可能没有安装实用程序（即，AWS Lambda 运行时没有）。[在这种情况下，您可以在此处](http://infozip.sourceforge.net/Zip.html)轻松获取 zip 实用程序二进制文件并将其与应用程序源代码一起打包（对于 AWS Lambda，您也可以将其打包在 Lambda 层中），或者您必须使用第三方模块（其中在 NPM 上有很多）。**我更喜欢前一种方法，因为 ZIP 实用程序经过了数十年的尝试和测试。**

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-07-30T11:27:41.850

这是另一个将文件夹压缩在一行中的库： [zip-local](https://github.com/Mostafa-Samir/zip-local)

```
var zipper = require('zip-local');

zipper.sync.zip("./hello/world/").compress().save("pack.zip"); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-11-22T07:40:17.607

`Archive.bulk`现在已弃用，为此使用的新方法是[glob](https://archiverjs.com/docs/Archiver.html#glob)：

```
var fileName =   'zipOutput.zip'
var fileOutput = fs.createWriteStream(fileName);

fileOutput.on('close', function () {
    console.log(archive.pointer() + ' total bytes');
    console.log('archiver has been finalized and the output file descriptor has closed.');
});

archive.pipe(fileOutput);
archive.glob("../dist/**/*"); //some glob pattern here
archive.glob("../dist/.htaccess"); //another glob pattern
// add as many as you like
archive.on('error', function(err){
    throw err;
});
archive.finalize(); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-01-14T03:19:26.553

要包含所有文件和目录：

```
archive.bulk([
  {
    expand: true,
    cwd: "temp/freewheel-bvi-120",
    src: ["**/*"],
    dot: true
  }
]); 
```

它在下面使用 node-glob ( [https://github.com/isaacs/node-glob](https://github.com/isaacs/node-glob) )，因此任何与之兼容的匹配表达式都可以使用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-08-28T13:38:46.773

将结果通过管道传输到响应对象（需要下载 zip 而不是本地存储的场景）

```
 archive.pipe(res); 
```

Sam 访问目录内容的提示对我有用。

```
src: ["**/*"] 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-11T21:41:24.857

Adm-zip 在压缩现有存档[https://github.com/cthackers/adm-zip/issues/64](https://github.com/cthackers/adm-zip/issues/64)以及压缩二进制文件时存在问题。

我还遇到了 node-zip [https://github.com/daraosn/node-zip/issues/4的压缩损坏问题](https://github.com/daraosn/node-zip/issues/4)

node-archiver 是唯一一个似乎可以很好地压缩但它没有任何解压缩功能的工具。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-01T21:04:51.687

我找到了这个封装了你需要的东西的小库。

```
npm install zip-a-folder

const zip-a-folder = require('zip-a-folder');
await zip-a-folder.zip('/path/to/the/folder', '/path/to/archive.zip'); 
```

[https://www.npmjs.com/package/zip-a-folder](https://www.npmjs.com/package/zip-a-folder)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-12T10:21:29.073

由于`archiver`长期不兼容新版 webpack，推荐使用[zip-lib](https://www.npmjs.com/package/zip-lib)。

```
var zl = require("zip-lib");

zl.archiveFolder("path/to/folder", "path/to/target.zip").then(function () {
    console.log("done");
}, function (err) {
    console.log(err);
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-12T10:46:16.653

你可以尝试一个简单的方法：

安装`zip-dir`：

```
npm install zip-dir 
```

并使用它

```
var zipdir = require('zip-dir');

let foldername =  src_path.split('/').pop() 
    zipdir(<<src_path>>, { saveTo: 'demo.zip' }, function (err, buffer) {

    }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-02T16:09:42.153

`import` `...` `from`答案基于[https://stackoverflow.com/a/51518100](https://stackoverflow.com/a/51518100)

压缩**单个目录**

```
import archiver from 'archiver';
import fs from 'fs';

export default zipDirectory;

/**
 * From: https://stackoverflow.com/a/51518100
 * @param {String} sourceDir: /some/folder/to/compress
 * @param {String} outPath: /path/to/created.zip
 * @returns {Promise}
 */
function zipDirectory(sourceDir, outPath) {
  const archive = archiver('zip', { zlib: { level: 9 }});
  const stream = fs.createWriteStream(outPath);

  return new Promise((resolve, reject) => {
    archive
      .directory(sourceDir, false)
      .on('error', err => reject(err))
      .pipe(stream)
    ;

    stream.on('close', () => resolve());
    archive.finalize();
  });
} 
```

**压缩多个**目录：

```
import archiver from 'archiver';
import fs from 'fs';

export default zipDirectories;

/**
 * Adapted from: https://stackoverflow.com/a/51518100
 * @param {String} sourceDir: /some/folder/to/compress
 * @param {String} outPath: /path/to/created.zip
 * @returns {Promise}
 */
function zipDirectories(sourceDirs, outPath) {
  const archive = archiver('zip', { zlib: { level: 9 }});
  const stream = fs.createWriteStream(outPath);

  return new Promise((resolve, reject) => {
    var result = archive;
    sourceDirs.forEach(sourceDir => {
      result = result.directory(sourceDir, false);
    });
    result
      .on('error', err => reject(err))
      .pipe(stream)
    ;

    stream.on('close', () => resolve());
    archive.finalize();
  });
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-11T15:15:50.133

我最终包装了归档器来模拟 JSZip，因为通过我的项目进行重构会花费太多精力。我知道 Archiver 可能不是最好的选择，但你去吧。

```
// USAGE:
const zip=JSZipStream.to(myFileLocation)
    .onDone(()=>{})
    .onError(()=>{});

zip.file('something.txt','My content');
zip.folder('myfolder').file('something-inFolder.txt','My content');
zip.finalize();

// NodeJS file content:
    var fs = require('fs');
    var path = require('path');
    var archiver = require('archiver');

  function zipper(archive, settings) {
    return {
        output: null,
        streamToFile(dir) {
            const output = fs.createWriteStream(dir);
            this.output = output;
            archive.pipe(output);

            return this;
        },
        file(location, content) {
            if (settings.location) {
                location = path.join(settings.location, location);
            }
            archive.append(content, { name: location });
            return this;
        },
        folder(location) {
            if (settings.location) {
                location = path.join(settings.location, location);
            }
            return zipper(archive, { location: location });
        },
        finalize() {
            archive.finalize();
            return this;
        },
        onDone(method) {
            this.output.on('close', method);
            return this;
        },
        onError(method) {
            this.output.on('error', method);
            return this;
        }
    };
}

exports.JSzipStream = {
    to(destination) {
        console.log('stream to',destination)
        const archive = archiver('zip', {
            zlib: { level: 9 } // Sets the compression level.
        });
        return zipper(archive, {}).streamToFile(destination);
    }
}; 
```

# php - 查询后从数组中获取正确的数据？

> ID：15641248
> 
> 赞同：0
> 
> 时间：2013-03-26T15:41:55.597
> 
> 标签：php, mysql, database

我有一个sql语句....

```
"SELECT o.orderID, p.productID, p.name, o.qty, p.mouldID FROM products AS p INNER JOIN orderedProducts AS o ON o.productID = p.productID WHERE o.orderID = '$id'"; 
```

当我在 phpmyadmin 中使用它来测试它时，它看起来像这样（我使用 ID 56）

```
 __________________________________________
       |orderID|productID|name       |qty |mouldID|
       |56     |11       |newproduct |2000|4      |
       |56     |12       |newproduct2|10  |5      |
       |56     |13       |newproduct3|5   |6      | 
```

但是吐出来的数组是：

```
Array ( [0] => 56 [orderID] => 56 [1] => 11 [productID] => 11 [2] => newproduct [name] => newproduct [3] => 2000 [qty] => 2000 [4] => 4 [mouldID] => 4 ) 
```

这不是我想要的数据，所以我试着看看如果我把它放到一个表中会发生什么

它返回

```
0         | 56
orderID   | 56
1         |  11
productID |  11
2         | newproduct
name      | newproduct
3         |  2000
qty       |  2000
4         |  4
mouldID   |  4 
```

显然有什么不对劲...

我用来`mysql_fetch_array`将数据从数据库中获取到数组中……这可能是我做错了吗？

基本上我希望它看起来像数据库返回的第一个表。

任何想法...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:50:27.287

这些`mysql_fetch_XXX()`函数只返回下一行，而不是所有结果。如果你想要一个所有行的数组，你必须用一个循环来构造它：

```
while ($row = mysql_fetch_assoc($query)) {
  $results[] = $row;
}
var_dump($results); 
```

# php - 使用数组值匹配两个 foreach 循环

> ID：15641249
> 
> 赞同：2
> 
> 时间：2013-03-26T15:42:02.927
> 
> 标签：php, wordpress

我有两个 foreach 循环。第一个从 Wordpress 中获取大量问题，第二个应该获取多个答案。如果不涉及问题的一些随机化，这是直截了当的，这会让人感到困惑。

这是两个没有被随机化的 foreach 循环。

```
<?php 
$repeater = get_field('step_by_step_test');
foreach( $repeater as $repeater_row ){ ?>
    <p><?php echo $repeater_row['question']; ?></p>
    <?php $rows = $repeater_row['answer_options'];
    foreach ($rows as $row){ ?>
        <?php echo $row['answer']; ?><br />
    <?php } ?>
<?php } ?> 
```

这会遍历每个问题并获取多个答案。

我怎样才能将它随机化问题？这是我的尝试，这适用于获取一组随机的问题，但我在答案部分遇到错误（为 foreach 提供的参数无效）。

```
<?php 
$amount = get_field('select_number_of_questions');
$repeater = get_field('step_by_step_test');
$random_rows = array_rand( $repeater, $amount );
echo implode(', ', $random_rows);
    foreach( $random_rows as $repeater_row ){ ?>
        <p><?php echo $repeater[$repeater_row]['question']; ?></p>
        <?php $rows = get_sub_field('answer_options');
        foreach ($rows as $row){ ?>
            <?php echo $row['answer']; ?><br />
        <?php } ?>
    <?php } ?> 
```

我将此插件用于 wordpress - [http://www.advancedcustomfields.com/](http://www.advancedcustomfields.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:46:19.933

首先，我将重写您的第一个代码块，使其看起来不像反刍。

```
<?php
$repeater = get_field("step_by_step_test");
foreach($repeater as $repeater_row) {
    echo "<p>".$repeater_row['question']."</p>";
    $rows = $repeater_row['answer_options'];
    foreach($rows as $row) {
        echo $row['answer']."<br />";
    }
}
?> 
```

现在来看看魔术：`shuffle($rows)`在该行之前添加`foreach($rows as $row) {`，答案将以随机顺序出现。

编辑以回应评论：像这样开始你的代码：

```
$repeater = get_field("step_by_step_test");
shuffle($repeater);
$repeater_limit = array_slice($repeater,0,5);
foreach($repeater_limit as $repeater_row) {
    .... 
```

# c - yyerror 的 Bison 冲突类型

> ID：15641256
> 
> 赞同：3
> 
> 时间：2013-03-26T15:42:26.973
> 
> 标签：c, bison, lex

我正在尝试用 flex 和 bison 制作一个计算器，但在编译过程中发现了一个错误。

这是错误：

```
C:\GnuWin32\src>gcc lex.yy.c y.tab.c -o tugas
tugas.y:51: error: conflicting types for 'yyerror'
y.tab.c:1433: error: previous implicit declaration of 'yyerror' was here 
```

这是我的 .l 代码：

```
%{
#include <stdio.h>
#include "y.tab.h"
YYSTYPE yylval;
%}
plus    [+]
semi    [;]
minus   [-]
var [a-z]
digit   [0-1]+
equal   [:=]
%%
{var}   {yylval = *yytext - 'a'; return VAR;}
{digit} {yylval = atoi(yytext); return DIGIT;}
{plus}  {return PLUS;}
{minus} {return MINUS;}
{equal} {return EQUAL;}
{semi}  {return SEMI;}
 .  { return *yytext; }
%%
int main(void)
{
 yyparse();
 return 0;
}

int yywrap(void)
{
 return 0;
}

int yyerror(void) 
{
  printf("Error\n");
  exit(1);
} 
```

这是我的 .y 代码：

```
%{
int sym[26];
%}

%token DIGIT VAR
%token MINUS PLUS EQUAL
%token SEMI 

%%

program: dlist SEMI slist
;

dlist:  /* nothing */
| decl SEMI dlist
;

decl:   'VAR' VAR   {printf("deklarasi variable accepted");}
;

slist:  stmt
| slist SEMI stmt
;

stmt:   VAR EQUAL expr   {sym[$1] = $3;}
| 'PRINT' VAR   {printf("%d",sym[$2]);}
;

expr:   term    {$$ = $1;}
| expr PLUS term    { $$ = $1 + $3;}
| expr MINUS term   { $$ = $1 - $3; }
;

term:   int {$$ = $1;}
| VAR   {$$ = sym[$1]; }
;

int:    DIGIT   {$$ = $1;}
| int DIGIT
; 
```

为什么我收到此错误？任何解决此问题的建议。
提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T15:53:14.500

`yyerror`应该有这个签名：

```
int yyerror(char *); 
```

因为它应该接受一个要在错误消息中使用的字符串（使用 a 可能会更好`const char *`，但你可能会收到额外的（可忽略的）警告......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:55:08.973

你需要改变

```
int yyerror(void) 
```

至

```
int yyerror(char*) 
```

换句话说，`yyerror()`必须采用单个 c 字符串参数来描述发生的错误。

# git - 如何规范 Git 中的工作树行结尾？

> ID：15641259
> 
> 赞同：94
> 
> 时间：2013-03-26T15:42:29.863
> 
> 标签：git, line-endings, gitattributes

我克隆了一个行尾不一致的存储库。我添加了一个`.gitattributes`设置我想要规范化的文件的文本属性。现在，当我提交更改时，我会收到以下消息：

```
warning: CRLF will be replaced by LF in FILE.
The file will have its original line endings in your working directory. 
```

如何让 git 为我规范我的文件工作副本？最好我希望 git 标准化整个工作树。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-26T20:30:33.647

对于使用 v2.16 或更高版本的用户，您可以简单地使用：

```
git add --renormalize .  # Update index with renormalized files
git status               # Show the files that will be normalized
git commit -m "Introduce end-of-line normalization" 
```

这些方向直接来自[gitattributes](http://git-scm.com/docs/gitattributes#_end_of_line_conversion)。对于旧版本，[文档](https://git-scm.com/docs/gitattributes/2.11.1#_end_of_line_conversion) （v2.12 之前）提供了不同的答案：

```
rm .git/index     # Remove the index to force git to
git reset         # re-scan the working directory
git status        # Show files that will be normalized
git add -u
git add .gitattributes
git commit -m "Introduce end-of-line normalization" 
```

编辑后执行此序列`.gitattributes`。

### 更新

似乎有些用户对上述说明有疑问。更新的[gitattributes](https://git-scm.com/docs/gitattributes/2.14.3#_end_of_line_conversion)文档（2.12 到 2.14）显示了一组新的指令（在编辑 .gitattributes 文件之后）：

```
git read-tree --empty   # Clean index, force re-scan of working directory
git add .
git status        # Show files that will be normalized
git commit -m "Introduce end-of-line normalization" 
```

感谢[@vossad01](https://stackoverflow.com/users/1072626/vossad01)指出这一点。

此外，无论使用哪种解决方案，工作副本中的文件仍保留其旧行结尾。如果要更新它们，请确保您的**工作树是干净的**并使用：

```
git rm --cached -r .
git reset --hard 
```

现在，您的工作树中的行尾将是正确的。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2018-06-01T13:54:56.793

使用 Git 客户端 2.16 及更高版本，现在有一种更简单的方法来执行此操作。只需使用：

```
git add --renormalize . 
```

注意：最好使用干净的工作空间来执行此操作。有关详细信息，请参阅：

*   [https://git-scm.com/docs/gitattributes#_end_of_line_conversion](https://git-scm.com/docs/gitattributes#_end_of_line_conversion)
*   [https://help.github.com/en/github/using-git/configuring-git-to-handle-line-endings#refreshing-a-repository-after-changeing-line-endings](https://help.github.com/en/github/using-git/configuring-git-to-handle-line-endings#refreshing-a-repository-after-changing-line-endings)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-08-07T12:11:40.210

## 替代方法（仅在使用的命令上有所不同）

确保您在存储库中没有任何待处理的更改：

```
$ git status
$ git stash 
```

修改`.gitattributes`使 CRLF 解释将改变：

```
$ echo "*.txt  text" >>.gitattributes
$ git commit -m "Made .txt files a subject to CRLF normalization." -- .gitattributes 
```

从索引中删除数据并刷新工作目录：

```
$ git rm --cached -r .
$ git reset --hard 
```

查看 Git 提出的 CRLF 修复：

```
$ git ls-files --eol
$ git status
$ git diff 
```

同意 Git 的决定：

```
$ git add -u
$ git commit -m "Normalized CRLF for .txt files" 
```

像完成干净克隆一样重新加载更改：

```
$ git rm --cached -r .
$ git reset --hard 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T19:42:48.137

这些`.gitattributes`设置只会影响新的提交。如果此存储库*没有*发布历史记录（没有其他依赖于它），您可能想要浏览整个历史记录。在 Unix/Linux 中，你可以使用`dos2unix(1)`来修复所有文件`find(1)`，并且使用历史重写`filter-branch`（参见 git book 中的[讨论](http://git-scm.com/book/en/Git-Tools-Rewriting-History)）你甚至可以清理项目的完整历史。

在新鲜克隆上小心使用。与*任何*可能有克隆人的人联系，并告诉他们你想做什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-28T11:02:23.870

.gitattributes 中的 * text=auto 选项使 Git 存储库处于“非法状态”，如果它包含带有 CRLF (Windows) 行结尾且现在标记为文本的文件（请参阅[https://marc.info/?l=git&m =154484903528621&w=2](https://marc.info/?l=git&m=154484903528621&w=2) )。标准的 renormalize 选项不能与 LFS 过滤器一起正常工作，因此其他答案中的说明或例如[​​ https://help.github.com/en/articles/dealing-with-line-endings](https://help.github.com/en/articles/dealing-with-line-endings)中的说明不能正常工作. 相反，这些步骤对我们有用：

情况：

*   在 Windows 上
*   Git 存储库包含具有 CR 和 CRLF 行结尾的文件
*   将 * text=auto 添加到 .gitattributes （因此不依赖于在 Windows 上设置 core.crlf=auto 的用户）
*   还将 LFS 跟踪文件的 -crlf 更改为 -text，不确定是否需要。

    1.  从有行尾问题的分支创建一个新分支（假设那里没有未提交的更改）： git checkout -b feature/doing-stuff-fix-eol
    2.  从 .gitattributes 中删除 LFS 过滤器（将所有 'filter=lfs diff=lfs merge=lfs' 替换为空）
    3.  提交并推送： git commit -a -m "禁用 LFS 过滤器以进行 EOL 修复"
    4.  移动到非 git 文件夹
    5.  全局卸载 LFS：git lfs uninstall
    6.  创建一个新的存储库克隆： git clone -b feature/doing-stuff-fix-eol [远程存储库 url] fix-eol
    7.  规范化行尾： git add --renormalize 。（注意点以重新规范化所有文件）
    8.  仅检查规范化的正确文件。它不应该包括通常由 LFS 处理的文件！
    9.  提交并推送（保存哈希）： git commit -m "Fix line endings"
    10.  移动到非 git 文件夹
    11.  全局安装 LFS： git lfs install
    12.  转到原始存储库克隆并拉取
    13.  签出你原来的分支：git checkout feature/doing-stuff
    14.  Cherry 选择 eol 修复提交并推送： git cherry-pick [hash]
    15.  删除eol分支并推送
    16.  删除 eol 存储库克隆（如果需要修复更多分支，请保留）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-21T18:09:36.690

我不得不用这个标志重新克隆 repo `-c core.autocrlf=false`，它可以工作，不需要其他配置。

像这样：

```
git clone -c core.autocrlf=false https://github.com/any-repo.git 
```

我们的项目最初是在 Mac 上使用 LF 制作的，但在 Windows 上它会自动转换为 CRLF。我们使用 eslint 并在每一行代码下划线，直到我重新克隆它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-01T03:25:01.790

[`merge.renormalize`](https://git-scm.com/docs/git-config#Documentation/git-config.txt-mergerenormalize)配置设置可能很有用。

# ember.js - 在ember中使用简单登录时出错？

> ID：15641260
> 
> 赞同：0
> 
> 时间：2013-03-26T15:42:29.983
> 
> 标签：ember.js

我是 Ember 的新手，作为学习的一部分，我试图从一个教程中设置登录表单，但它似乎不起作用。 **错误：无效路径---这就是我在登录方法中遇到的错误**

我想看看密码是否正确，然后连接登录模板，否则将用户踢到'/'。？

**html文件**

```
<script type="text/x-handlebars" data-template-name="login">
        {{message}} <br>
        E-Mail {{view Ember.TextField target="controller" valueBinding= controller.email}} <br />
        Password {{view Ember.TextField target="controller" valueBinding= controller.password}} <br />
        <button {{action login}}>Login</button>
    </script>

    <script type="text/x-handlebars" data-template-name="loggedin">
        Welcome to Our Site !
    </script> 
```

**JS文件**

```
 App.LoginController = Ember.ObjectController.extend({
email :null,
password :null,
message :null,

login : function() {
    var loginCreds = this.getProperties('email','password');
    if (loginCreds.password === 'admin') {
        this.set('isAuthenticated',true);
        console.log(isAuthenticated);
        this.get('target').send('isAuthenticated');

    }
    else{
        this.set('message','Invalid password');
        this.set('isAuthenticated',false);
        console.log(isAuthenticated);
        this.get('target').send('isAuthenticated');

    }

}
    });

    App.LoginRoute = Ember.Route.extend({
isAuthenticated : function(router) {
    router.transitionTo('loggedin');
},
connectOutlets: function(router) {
    if (!router.get('loginController.isAuthenticated')) {
        router.transitionTo('/');
    }
    router.get('loginController').connectOutlet('loggedin');
    },
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:02:17.247

我认为问题可能是你没有映射你在浏览器中给出的路径。你应该像这样映射路径

```
App.Router.map(function () {
    this.route('login');
}); 
```

然后在网址中你可以添加`#login`

# sql-server-2008 - 用户访问 SQL Server 代理 - 作业活动监视器

> ID：15641261
> 
> 赞同：0
> 
> 时间：2013-03-26T15:42:30.317
> 
> 标签：sql-server-2008

我需要检查一些在 SQL Server 2008 上运行的作业，但登录到该服务器时使用的用户不能拥有系统管理员权限。

所以我的问题是我可以有一个用户可以访问 SQL Server 代理 - 作业活动监视器，但该用户不在 sysadmin 组中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:50:17.863

将用户添加到固定数据库角色`msdb`并将其置于`SQLAgentOperatorRole`固定数据库角色中。有关详细信息，请参阅联机丛书主题[如何：配置用户以创建和管理 SQL Server 代理作业](http://msdn.microsoft.com/en-us/library/ms187901%28sql.100%29.aspx)。

在 T-SQL 中，这将是：

```
USE msdb;
GO
CREATE USER UserName FROM LOGIN [UserName];
GO
EXEC sp_addrolemember N'SQLAgentOperatorRole', N'UserName';
GO 
```

`sp_addrolemember`在不应使用的 SQL Server 2012 中；反而：

```
ALTER ROLE [SQLAgentOperatorRole] ADD MEMBER [UserName]; 
```

# java - mvn jetty:run 找不到我的 LoginService

> ID：15641263
> 
> 赞同：13
> 
> 时间：2013-03-26T15:42:43.190
> 
> 标签：java, jetty

我如下设置了一个码头安全领域（与 一起使用`mvn jetty:run`）。这有效：

`pom.xml`

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <configuration>
      <webAppXml>src/test/resources/jetty-test.xml</webAppXml>
      <useTestScope>true</useTestScope>
    </configuration>
  </plugin> 
```

`jetty-test.xml`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
  <Get name="securityHandler">
    <Set name="loginService">
      <New class="org.eclipse.jetty.security.HashLoginService">
        <Set name="name">MySecurityRealm</Set>
        <Set name="config">src/test/resources/jetty-realm.properties</Set>
        <Call name="start"/>
      </New>
    </Set>
    <Set name="checkWelcomeFiles">true</Set>
  </Get>
</Configure> 
```

然后我尝试删除对`jetty-test.xml`文件的需要，如下所示：

`pom.xml`

```
 <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <configuration>
   <!--      <webAppXml>src/test/resources/jetty-test.xml</webAppXml>  -->
          <useTestScope>true</useTestScope>
          <loginServices>
            <loginService implementation="org.eclipse.jetty.security.HashLoginService">
              <name>MySecurityRealm</name>
              <config>${basedir}/src/test/resources/jetty-realm.properties</config>
            </loginService>
          </loginServices>
        </configuration>
      </plugin> 
```

但它失败了：

```
2013-03-26 16:33:26.197:WARN:oejuc.AbstractLifeCycle:FAILED org.eclipse.jetty.security.ConstraintSecurityHandler@73937bc8: java.lang.IllegalStateException: No LoginService for org.eclipse.jetty.security.authentication.BasicAuthenticator@3d47dde in org.eclipse.jetty.security.ConstraintSecurityHandler@73937bc8 
```

任何想法？

我正在使用这个文档： [http ://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Configuring_Security_Settings](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Configuring_Security_Settings)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-03T07:40:58.860

请验证您的 jetty-maven-plugin 配置中的子元素`<name>MySecurityRealm</name>`是否与您的 web.xml 中的相同。`<loginServices>``<realm-name>MySecurityRealm</realm-name>``<login-config>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:55:53.060

您的 web.xml: [reference](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/J2EE_Declarative_Security_Overview-Web_Content_Security_Constraints.html)中可能有安全限制。这就是当您注释掉 jetty-test.xml 配置时它失败的原因。

# oauth-2.0 - 如何使用 OAuth 2.0 在 Google plus 上共享内容

> ID：15641265
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:42:45.913
> 
> 标签：oauth-2.0, google-plus

如何使用 OAuth 2.0 在 Google plus 上共享内容？我正在寻找执行此操作的 URI（在墙上发布数据），例如：

> 获取连接的用户信息 ( [https://www.googleapis.com/oauth2/v1/userinfo](https://www.googleapis.com/oauth2/v1/userinfo) )。
> 搜索活动 ( [https://www.googleapis.com/plus/v1/activities](https://www.googleapis.com/plus/v1/activities) )
> ...

但是要将内容分享到 Google 的流（墙），我找不到 URI。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:48:54.300

您不能以编程方式将内容发布到用户在 Google+ 上的信息流中。您可以使用[moment.insert](https://developers.google.com/+/api/latest/moments/insert)方法[编写应用程序活动。](https://developers.google.com/+/features/app-activities)在 Google+ 上，用户始终可以控制分享到他们的信息流的内容。

# sql - 选择内部连接表 id vb

> ID：15641268
> 
> 赞同：1
> 
> 时间：2013-03-26T15:42:49.523
> 
> 标签：sql, vb.net, sql-server-2008, pivot, inner-join

我第一次用这个。

```
SELECT classroom .cls_id, 
   classroom.cls_name, 
   u1.users_id as users_id1,
   u2.users_id as users_id2
FROM   classroom 
   INNER JOIN clsown 
           ON clsown.cls_id = classroom .cls_id 
   INNER JOIN users AS u1 
           ON clsown.users_id = u1.users_id 
   INNER JOIN users AS u2
           ON clsown.users_id = u2.users_id 
```

我明白了：

```
cls_id  cls_name  users_id1  users_id2

1 -------- room1 ------- 1 --------- 1
1 -------- room1 ------- 2 --------- 2
2 -------- room2 ------- 3 --------- 3
2 -------- room2 ------- 4 --------- 4 
```

我想看看

```
cls_id  cls_name  users_id1  users_id2

1 -------- room1 ------- 1 --------- 2
2 -------- room2 ------- 3 --------- 4 
```

我不知道如何进行内部连接。我究竟做错了什么？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:42.393

您在此处记录的查询实际上需要一个数据透视表，因为您希望获取 cls_id 和 cls_name 的唯一值，然后将用户排序到列中。

我在 2009 年写了[这篇文章](http://www.sqlmag.com/article/tsql3/pivoting-the-dynamic-way-102722)，展示了如何做这样的事情。它应该有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:08:23.120

由于您使用的是 SQL Server，因此您可以通过几种方法来*透视*数据。

您可以将聚合函数与`CASE`表达式一起使用：

```
select cls_id,
    cls_name,
    MAX(case when rn = 1 then users_id end) user_id1,
    MAX(case when rn = 2 then users_id end) user_id2
from
(
    SELECT cr.cls_id, 
        cr.cls_name, 
        u1.users_id,
        ROW_NUMBER() over(partition by cr.cls_id order by u1.users_id) rn
    FROM classroom cr
    INNER JOIN clsown co
        ON co.cls_id = cr.cls_id 
    INNER JOIN users AS u1 
        ON co.users_id = u1.users_id 
) d
group by cls_id, cls_name; 
```

或者您可以使用以下`PIVOT`功能：

```
select cls_id,
    cls_name,
    user_id1, 
    user_id2
from
(
    SELECT cr .cls_id, 
        cr.cls_name, 
        u1.users_id,
        'user_id'+cast(ROW_NUMBER() over(partition by cr.cls_id order by u1.users_id) as varchar2)) col
    FROM classroom cr
    INNER JOIN clsown co
        ON co.cls_id = cr.cls_id 
    INNER JOIN users AS u1 
        ON co.users_id = u1.users_id 
) d
pivot
(
    max(users_id)
    for col in (user_id1, user_id2)
) piv; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:50:36.213

我假设您使用`Mysql`的是您的`RDBMS`，如果是这样，您可以使用[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)`records`根据您的[需要](http://sqlfiddle.com/#!2/eea725/3)显示，但以不同的形式。ie] 此查询会将`coloumns`您想要的所有其他内容填充到一个`cell`由`separator`.

```
SELECT classroom .cls_id, 
       classroom.cls_name, 
       GROUP_CONCAT(u1.users_id ORDER BY u1.users_id SEPARATOR ', ') Users 
FROM   classroom 
       INNER JOIN clsown 
               ON clsown.cls_id = classroom .cls_id 
       INNER JOIN users AS u1 
               ON clsown.users_id = u1.users_id
       Group by classroom .cls_id 
```

上面的查询将返回如下记录，

```
cls_id  cls_name    users

  1      room1       1,2

  2      room2       3,4 
```

**编辑：** *[在 Sql server 中实现上述结果的参考](https://stackoverflow.com/questions/2046037/sql-server-can-i-comma-delimit-multiple-rows-into-one-column)*

# ios - nsfetchedresultscontroller 的初始提取返回 0 个对象，后续提取正常

> ID：15641269
> 
> 赞同：2
> 
> 时间：2013-03-26T15:42:50.340
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我对 NSFetchedResultsController 的初始提取返回 O 对象。大多数时候（我会说10次中有9次）。这不是一个总是可以重现的错误。

有时我对表格的要求会改变，我的谓词也会改变。在这种情况下，我删除缓存并将我的 FetchedResultsController 设置为 nil，然后再重新创建它。在这些后续提取中，它始终返回正确的对象。

有问题的提取从涉及关系的实体中获取对象。

```
NSFetchRequest *fetch = [NSFetchRequest fetchRequestWithEntityName:@"FacebookPost"];
fetch.predicate = [NSPredicate predicateWithFormat:@"postedBy.facebookID == %@", self.user.facebookID]; 
```

我有两个实体，|用户| 和 |Facebook 帖子| 用户与名为 facebookPosts 的 FacebookPost 具有一对多关系 FacebookPost 与名为 postedBy 的用户具有多对一关系 用户具有我在谓词中使用的 facebookID（见上文）

我尝试过延迟获取以防数据库未准备好，但无济于事。

谁能想到为什么这不是（大部分时间）在初始提取时正确提取？

更新：

如果我在 Xcode 中打开 sql 调试，它会在它工作的时候任意使用不同的 SQL 语句而不是：

**工作过：**

2013-03-27 06:41:58.420 App[5995:907] CoreData: sql: SELECT COUNT(DISTINCT t0.Z_PK) 从 ZFACEBOOKPOST t0 WHERE t0.ZPOSTEDBY = ?

2013-03-27 06:41:58.432 App[5995:907] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZMESSAGE, t0.ZSTATUSID, t0.ZTIME, t0.ZPOSTEDBY FROM ZFACEBOOKPOST t0 WHERE t0.Z_PK IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) ORDER BY t0.ZTIME DESC 限制 20

**没用：**

2013-03-27 06:24:06.638 App[66275:c07] CoreData: sql: SELECT COUNT(DISTINCT t0.Z_PK) 从 ZFACEBOOKPOST t0 加入 ZUSER t1 ON t0.ZPOSTEDBY = t1.Z_PK 其中 t1.ZFACEBOOKID = ？

2013-03-27 06:24:06.641 App[66275:c07] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZMESSAGE, t0.ZSTATUSID, t0.ZTIME, t0.ZPOSTEDBY FROM ZFACEBOOKPOST t0 JOIN ZUSER t1 ON t0.ZPOSTEDBY = t1.Z_PK WHERE t1.ZFACEBOOKID = ? ORDER BY t0.ZTIME DESC

所以这让我觉得它与核心数据决定在 SQL 中执行提取的方式有关。

# arrays - Handlebars.js - 从二维数组访问父索引

> ID：15641272
> 
> 赞同：5
> 
> 时间：2013-03-26T15:42:53.253
> 
> 标签：arrays, indexing, this, each, handlebars.js

我在 JSON 对象中有一个二维数组（称为表；）

```
data = {

tableID : "testTable",

table : [
[{type:'a', value:'x'},{type:'a', value:'y'},{type:'a', value:'z'}],
[{type:'a', value:'x'},{type:'a', value:'y'},{type:'a', value:'z'}],
[{type:'a', value:'x'},{type:'a', value:'y'},{type:'a', value:'z'}]
]

}; 
```

并且已经使用模板成功地用把手渲染出来：

```
<table id = "{{tableID}}-table">

{{#each table}}

    <tr id = "{{../tableID}}-row-{{@index}}">

        {{#each this}}

            <td id = "{{../../tableID}}-row-{{../index}}-col-{{@index}}">

                {{this.type}}-{{this.value}}

            </td>

        {{/each}}

    </tr>

{{/each}}

</table> 
```

但是，在 td 标记 id 中，我似乎无法访问父索引 {{../index}} - 行的索引。什么都不返回：

```
<td id = "testTable-row--col-x"> 
```

但是，我可以访问当前上下文 {{@index}} 的索引。

有任何想法吗？？

非常感谢提前！

富有的

ps 使用 1.0.0-rc.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T09:14:18.857

这是车把上的一个开放问题/功能。[您可以在此处](https://github.com/wycats/handlebars.js/issues/491)查看相同的进度

但是，您可以在[此处查看解决方法](https://stackoverflow.com/questions/14854491/handlebars-js-how-to-access-parent-index-in-nested-each/15505943#15505943)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T17:49:12.440

从 Handlebars 2.0.0 版开始，您可以使用

```
{{@../index}} 
```

# c# - Winform：客户端维护模式？

> ID：15641276
> 
> 赞同：1
> 
> 时间：2013-03-26T15:43:05.643
> 
> 标签：c#, winforms, n-tier-architecture

在asp.net中，有app_offline.htm可以让你优雅地关闭网站。我想在客户端实现类似的功能。有一个标志设置为维护模式，如果标志打开：

*   当用户启动客户端时，会提示用户“系统正在维护，30分钟后重试”。
*   任何新的更新/删除/添加操作，都会提示类似消息。
*   将处理正在进行的请求。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:09:12.807

鉴于应用程序架构的差异，这并不是一种适用于所有人的“一刀切”类型的解决方案。

用于 Web 应用程序的 app_offline.html 确实是一种“大锤”方法。该应用程序已关闭，是的，它很优雅，但它是 100% 硬停止。

在您的应用程序中执行此操作的一种原始方式可能是定期为“在线”或类似内容进行服务调用。如果它返回 false，则强制退出当前表单并显示启动页面。

但这实际上将取决于架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:40:13.070

You can put a condition when starting the client, but you if you want the same behavior like **app_offline.htm**, you may also want to put under maintenance **an already opened client**.

In this case, you can install a [MessageFilter](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx) in order to intercept any event across the whole Winforms app.

# php - 使用json的带有列和线的Highcharts图表

> ID：15641277
> 
> 赞同：0
> 
> 时间：2013-03-26T15:43:06.790
> 
> 标签：php, json, highcharts

我是 Highcharts 的新手，我已经喜欢它了。我使用 json、php en mysql 制作了一些柱形图（带有给定示例）。现在我想使用 json 制作一个带有列和一条线的图表。谁能告诉我应该怎么做？

```
$(function () {
var chart;
$(document).ready(function() {
    $.getJSON("DataKwhDagCum.php", function(json) {     
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: 'In (Enexis) vs Out (Zonnestroom)',
                x: -20 //center
            },
            subtitle: {
                text: '',
                x: -20
            },
            xAxis: {
                categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20','21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']
            },
            yAxis: {
                title: {
                    text: 'Amount'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y;
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: json
        });
    });

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:41:23.393

你可以使用两种方式

*   在同一个文件中使用 php 和脚本：http: [//docs.highcharts.com/#preprocessing-data-from-a-database](http://docs.highcharts.com/#preprocessing-data-from-a-database)
*   通过在 php 中使用 json_encode() 将数组返回为 json，然后在 Highcharts 中使用它。

# php - 如何编辑使用 json_decode() 创建的 PHP 对象？

> ID：15641283
> 
> 赞同：2
> 
> 时间：2013-03-26T15:43:26.737
> 
> 标签：php, json

从我的对象中提取数据没有问题。我的问题是编辑字符串中的数据并重新编码。每次我尝试编辑对象时，它都会删除对象中的所有数据，并且只保存我编辑的内容。

我会假设这行得通，但事实并非如此。有什么建议么？ ***（下面以对象模式显示，我也尝试将它作为关联数组并得到相同的结果）***

```
 $jsonString = '[{ "stuff" : [{"name" : "name", "description" : "description", "id" : "id",}], "morestuff" : []}]';
    $name = 'new name';
    $description = 'new description';
    $obj_json = json_decode($jsonString);
    $obj_json->stuff->name = $name;
    $obj_json->stuff->description = $description;
    $newJsonString = json_encode($obj_json); 
```

这是之后打印的内容：

```
{ "stuff" : {"name" : "new name", "description" : "new description"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:47:56.650

您的代码似乎是正确的，但试试这个（也许有一些修改对象..）：

```
$obj_json = json_decode($jsonString, true); //as associative array
$obj_json['stuff']['name'] = $name;
$obj_json['stuff']['description'] = $description;
$newJsonString = json_encode($obj_json); 
```

使用您的 json 作为关联数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:05:04.593

做你问的没有问题：

```
<?php

$jsonString = '{
    "stuff": {
        "name": "Original name",
        "description": "Original description",
        "foo": "Another field"
    }
}';
$name = "New name";
$description = "New description";

$obj_json = json_decode($jsonString);
$obj_json->stuff->name = $name;
$obj_json->stuff->description = $description;
$newJsonString = json_encode($obj_json);

echo $newJsonString . PHP_EOL; 
```

... 印刷：

```
{"stuff":{"name":"New name","description":"New description","foo":"Another field"}} 
```

您可能正在读取或写入错误的属性。

**编辑：**

仔细看，你的数据被包裹在一个数组中，`stuff`它本身也是一个数组：

```
$jsonString = '[{ "stuff" : [{"name" : "name", "description" : "description", "id" : "id",}], "morestuff" : []}]';
               ^            ^                                                              ^                   ^
               |            \______________________________________________________________/                   |
               \_______________________________________________________________________________________________/ 
```

**编辑#2：**如果事实上，您的数据[不是有效的 JSON](http://jsonlint.com/)并`json_decode()`返回`null`：

```
$jsonString = '[{ "stuff" : [{"name" : "name", "description" : "description", "id" : "id",}], "morestuff" : []}]';
$obj_json = json_decode($jsonString);
var_dump($obj_json, json_last_error()); 
```

```
NULL
int(4) 
```

错误 #4 是`JSON_ERROR_SYNTAX`：语法错误，格式错误的 JSON

# joomla2.5 - Joomla 类别主页

> ID：15641285
> 
> 赞同：0
> 
> 时间：2013-03-26T15:43:28.757
> 
> 标签：joomla2.5, categories

Joomla2.5 中是否有任何方法可以为每个类别创建主页/登陆页面（即“默认”）页面。
例如，我希望用户能够访问 www.somejoomlasite.com/category1 并查看 category1 的默认主页，以及 category2 的不同主页等等。有什么办法可以做到这一点？我可以在每个类别下创建一篇文章并将其别名设置为索引吗？或者我会收到关于重复别名的错误（即使它们属于不同的类别）？

任何帮助是极大的赞赏。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:39:04.350

别名在一个类别中必须是唯一的。因此，在不同类别中使用相同的别名应该没问题。

您应该能够实现您所描述的结构，其中包含每个类别的菜单项。当然，需要在启用重写的情况下打开 SEF。菜单项不需要在页面上可见，您也可以创建“隐藏”菜单。只是不显示伴随的菜单模块。这些菜单项可以是任何内容：文章的类别列表、文章本身、某个类别中的精选文章列表或您喜欢的任何内容。

# google-maps-api-3 - Google Maps Service v3：地理编码返回“错误”

> ID：15641286
> 
> 赞同：2
> 
> 时间：2013-03-26T15:43:34.357
> 
> 标签：google-maps-api-3

我有一个 Google Maps 小部件在 Java 中的 JSF2 项目提供的 .xhtml 页面上工作。地图显示，我有一个添加标记的功能，效果很好。但是，任何使用 Geocoder 的尝试似乎都会导致返回“错误”状态。Google Maps API 在它的五个可能的“status”变量返回值候选中没有提到这样的错误状态。

Followng 是一个部署的 .js 文件，有问题的有问题的函数是 codeAddress()。与 codeAddress() 类似的代码可以在我可以找到的其他地方在线使用，因此它必须与调用它的情况有关。鉴于地图显示得很好，并且我可以放置标记，我的期望是我的会话很好。这让我感到困惑:(有谁知道“错误”可能来自什么？？

```
var map;
var marker;
var geocoder;

function placeMarker(location) {
 if (!marker) {
      marker = new google.maps.Marker({
          position: location,
          map: map
      });
  } else {
      marker.setPosition(location);
  }
  map.setCenter(location);
  var field = document.getElementById("portCreate:coordinate");
  field.value = "POINT (" + location.lat() + " " + location.lng() + ")";
}

function initialize() {
    var mapOptions = {
        center : new google.maps.LatLng(55.761123, 13.084717),
        zoom : 5,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(
    document.getElementById("map"), mapOptions);

    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
    });

    setMarker(document.getElementById("portCreate:coordinate"));

    geocoder = new google.maps.Geocoder();
}

function setMarker(field) {
    if (field.value) {
        var regex = /POINT.+?([-0-9\.]+).+?([-0-9\.]+)/;
        var matches = regex.exec(field.value);
        placeMarker(new google.maps.LatLng(Number(matches[1]), Number(matches[2])));
    }
}

function codeAddress(address) {
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
        } else {
            alert("Geocode was not successful for the following reason: " + status + "\nFor address " + address);
        }
    });
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "https://maps.googleapis.com/maps/api/js?key=<API key here>&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:54:28.613

今天遇到同样的问题后，我记得我没有链接到 API，而是将代码下载为 .js。将其更改为链接后，它再次起作用。我认为谷歌会定期更新脚本，如果它有任何版本冲突，它们会返回错误状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-29T21:44:58.910

[javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingStatusCodes)的文档将“错误”显示为可能的结果：

> “ERROR”表示请求超时或联系 Google 服务器时出现问题。如果您再试一次，请求可能会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T01:01:15.997

我有同样的问题。我正在使用 ASP .Net 应用程序。在我将 ASP .Net 按钮控件更改为 HTML 输入按钮后，它现在可以工作了。不确定问题出在哪里。

```
<input type="button" value="Geocode" onclick="codeAddress()"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T19:44:07.907

我正在解决一个类似的问题，我可以通过在返回响应之前取消 google API http 请求来重新创建错误状态。

# software-design - 避免 LSP（Liskov 替换原则）违规

> ID：15641287
> 
> 赞同：0
> 
> 时间：2013-03-26T15:43:35.243
> 
> 标签：software-design, liskov-substitution-principle

我目前正在阅读[Michael Feathers 的“有效地使用遗留代码”](https://rads.stackoverflow.com/amzn/click/com/0131177052)

我想我了解 LSP 违规，但问题是它说明了有助于避免 LSP 违规的经验法则，

> 1.  尽可能避免覆盖具体方法。
> 2.  如果这样做，请查看是否可以在覆盖方法中调用您正在覆盖的方法。

我不太明白数字2，你能帮我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:48:11.283

我想，是这个意思：

```
class BaseClass
{
    public virtual void MyFunc()
    {
    }
}

class DerivedClass : BaseClass
{
    public override void MyFunc()
    {
        base.MyFunc();
    }
} 
```

# java - Java WS Synchronize 信息过程？

> ID：15641293
> 
> 赞同：0
> 
> 时间：2013-03-26T15:43:42.677
> 
> 标签：java, web-services

我是 w 子 java 的新手，我已经检查了几个教程，这些教程描述了创建和公开 ws 的过程。但是我有一个主要关注点，即 ws 可能同时从不同的客户请求中调用的方法的并发性。我看到了一些作者使用“同步”的例子，但我不确定这是二重唱的最佳方式。如果有人可以向我推荐一些可能描述正确程序的文章，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:48:59.083

如果两个或多个线程可能尝试同时调用它们，则可以将方法和块声明为同步。如果方法或块是同步的，那么一次只有一个线程可以“控制”它——所有其他尝试调用它的线程都会阻塞，直到它们获得控制权。

这里有些例子：

*   [http://www.tutorialspoint.com/java/java_thread_synchronization.htm](http://www.tutorialspoint.com/java/java_thread_synchronization.htm)
*   [http://careerride.com/Java-what-is-synchronization.aspx](http://careerride.com/Java-what-is-synchronization.aspx)

# c# - Microsoft Office 的 Open XML SDK 2.0 是否支持 Office 2007

> ID：15641296
> 
> 赞同：2
> 
> 时间：2013-03-26T15:43:45.773
> 
> 标签：c#, ms-office, openxml-sdk, office-2007

如果我浏览到[Open XML SDK 2.0 for Microsoft Office 页面](http://msdn.microsoft.com/en-us/library/office/bb456487%28v=office.14%29.aspx)并选择“其他版本”>“Office 2007”，它会带我进入[Open XML Format SDK 1.0](http://msdn.microsoft.com/en-us/library/office/bb456487%28v=office.12%29.aspx)。这是否意味着 Microsoft Office 的 Open XML SDK 2.0 正式不支持 Office 2007？

**编辑：**

[使用 Office 2007 似乎是有效的，](http://msdn.microsoft.com/en-us/library/office/dd440953%28v=office.12%29.aspx)但这仍然让我想知道为什么会发生上述情况，只是建议您应该使用 Office 2010？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:49:18.637

Open XML 支持所有使用 Open XML 标准（xlsx、docx 等）的文件。这包括 Office 2007 文件..

请参阅[http://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)以供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:10:42.980

我相信 2007 年与 2010 年相比是有限的，并且 SDK 2.0 的所有功能在 2007 年都将不起作用。所以对您的评论来说是和否。

即使两个产品都支持该功能，2007 也可以以不同的方式呈现相同的文档。

我用word创建了一个只有外边框的表格，我根本没有声明任何类型的内边框。这在 word 2010 中效果很好，但在 2007 年，它实际上也在内部单元格上创建了​​边框。这是一个简单的解决方法，只需声明内部单元格没有边框。

我认为就是这样，添加的功能是 MS 页面将您切换到 1.0 的原因

# css - Mootools 和 CSS - 一旦 JS 处于活动状态，p:first-letter 就不起作用

> ID：15641299
> 
> 赞同：0
> 
> 时间：2013-03-26T15:43:54.107
> 
> 标签：css, mootools

这是小提琴设置： [CSS 伪类因 JavaScript 失败](http://jsfiddle.net/WhiteRau/hUNSB/1/)

出于某种原因，“首字母”伪类在没有 JS 的情况下可以正常工作。一旦我开始用这个拉引号：

```
$$('span.pullQuote').each(function(span) {
new Element('span',{ 'class': 'pulledQuote',
                      text: span.get('text')
                    }).inject(span.getParent(),'top');
}); 
```

它停止工作......为什么？抽出 JS，不理会其他**所有**内容，它工作正常……我重新阅读[了 W3 规范的首字母](http://www.w3schools.com/css/css_pseudo_elements.asp)，但仍然看不出这是哪里出了问题。

TIA。

写！

*编辑*：奇怪的是，第一行，第一个孩子，&c 都可以在 JS 中正常工作。只有第一个字母停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:15:01.327

Chrome 和 IE 对此设置没有任何问题，只有 Firefox 有问题。不幸的是，没有简单的解决方法。[这个问题](https://stackoverflow.com/questions/9246487/firefox-issue-with-elfirst-letter-when-elbefore-has-content)显示了同样的问题（尽管它生成了突出显示它的内容）。

它与[这个错误](https://bugzilla.mozilla.org/show_bug.cgi?id=214004)有关（我认为）。尝试查看 Firefox 中[简化的测试用例](http://test.csswg.org/suites/css2.1/nightly-unstable/html4/first-letter-selector-028.htm)，但它失败了。这已经存在多年了，所以我不会屏住呼吸等待它得到修复。唯一的解决方案是*不要*将`pulledQuote`班级作为段落的第一个孩子。

# loops - 新行作为 FOR 循环的分隔符

> ID：15641301
> 
> 赞同：3
> 
> 时间：2013-03-26T15:43:56.643
> 
> 标签：loops, batch-file, cmd, window, delimiter

我是批处理脚本的新手，我正在尝试解析一个文件，该文件具有由换行符分隔的键值（种类）对。例如：

```
the value of abc
1234
the value of def
5678
the value of ghi
9876 
```

我想使用分隔的新行读取此文件，以便我可以访问这些值。

就像是

```
for /f "tokens=1,2,3 delims='\n'" %%i in ('findstr /C:the value of abc 'filepath') do echo %%j 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-21T08:27:38.770

我只是把它放在这里作为一个选项：

```
for /F delims^=^ eol^= %%i in ('findstr /C:the value of abc 'filepath') do echo %%i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:22:07.653

您不能将“新行”设置为分隔符。尝试这个：

```
@echo off &setlocal
for /f "tokens=1*delims=:" %%i in ('findstr /NC:"the value of abc" "filepath"') do set /a count=%%i
if defined count for /f "skip=%count%tokens=1*delims=:" %%i in ('findstr /N "^" "filepath"') do if not defined value set "value=%%j"
echo.%value%
endlocal 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T18:10:47.317

```
@ECHO OFF
SETLOCAL
SET "prevline="
FOR /f "delims=" %%z IN (tvabc.txt) DO (
 IF DEFINED prevline (
  FOR /f "tokens=1-6" %%a IN ('echo %%prevline%% %%z') DO (
   ECHO %%a %%b %%c %%d %%e %%f
   )
  SET "prevline="
  ) ELSE (SET prevline=%%z)
) 
```

如果您需要输出两个连续行中的每个标记，应该可以完成这项工作。如果我们有一个所需输出的列表，而不是从不起作用的代码中猜测，那会容易得多。

本质上，此代码保存一行的内容，然后通过定义保存前一行的变量这一事实来检测第二行已被读取。在这种情况下，`for/f`用于标记两行的连接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T16:40:21.560

不确定在获得这些名称/值对后将如何处理它们，但如果您要在 Powershell 中执行此操作，请正确执行并从创建对象开始：

```
$file = 'c:\somedir\somefile.txt'

[regex]$regex = @'
(?ms)the value of (\S+)
(\d+)
'@

#Choose one
$text = Get-Content $file -Raw  # V3 Only
$text = [IO.File]::ReadAllText($file)  # V2 or V3

$regex.matches($text) |
foreach {
   New-object PSObject -Property @{
                                   Name = $_.groups[1].value
                                   Value = $_.groups[2].value
                                  }
        }|
  Select Name,Value |
  Format-Table -AutoSize

Name Value
---- -----
abc  1234 
def  5678 
ghi  9876 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:22:52.733

你对那个怎么想的？在 powershell 中：

```
(get-content .\essai.txt)[(Select-String .\essai.txt -Pattern "the value of abc").LineNumber] 
```

它在模式之后显示下一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-02T15:05:42.567

我通常使用给定的批处理命令来读取文件中的每一行

```
FOR /F "delims=" %%G IN (test.txt) DO (
    ECHO %%G
) 
```

在这里，`"delim="`诀窍。

# sql - Left Join 没有结果

> ID：15641307
> 
> 赞同：0
> 
> 时间：2013-03-26T15:44:04.210
> 
> 标签：sql, openedge

我遇到了一个问题，当我这样编写查询时：

```
SELECT a.v, b.w, c.x, d.y, e.z 
FROM a
JOIN b
on a.id = b.id
LEFT JOIN c
on a.id = c.id
LEFT JOIN d
on b.code=d.code
JOIN e
on a.n = e.n
WHERE
a.zone = 10
WITH (nolock) 
```

我得到了数百个结果，但是当我将其修改为：

```
SELECT a.v, b.w, c.x, d.y, e.z 
FROM a
JOIN b
on a.id = b.id
LEFT JOIN c
on a.id = c.id AND c.n = 0
LEFT JOIN d
on b.code=d.code AND d.n = 0
JOIN e
on a.n = e.n
WHERE
a.zone = 10
WITH (nolock) 
```

我得到零结果。

根据我对 SQL 和左连接的理解，我觉得使用第一个查询获得任何结果意味着我肯定应该从第二个查询中获得至少一个结果，如果只有一个来自 c 和 d 的字段为空的结果。PROGRESS 是否以不寻常的方式实现外部连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:53:40.770

您可能想弄清楚`c.n`和`d.n`值是什么。尝试这样的事情来找出你的起点在哪里。

```
SELECT c.n, d.n, count(*)
FROM a
JOIN b
on a.id = b.id
LEFT JOIN c
on a.id = c.id
LEFT JOIN d
on b.code=d.code
JOIN e
on a.n = e.n
WHERE
a.zone = 10
group by c.n, d.n 
```

然后您可以根据结果调整查询

# json - 在 JSP 中创建 Gson 对象

> ID：15641309
> 
> 赞同：0
> 
> 时间：2013-03-26T15:44:05.360
> 
> 标签：json, jsp, gson

我想创建一个 Gson 对象以将请求从 JSP 页面（一个简单的表单）传递给 servlet。我想在不使用脚本的情况下做到这一点。因此，假设以下页面：

```
<!doctype html>
<head>
</head>
    <body>
            <form action="SomeServlet">
                <fieldset>
                    <label for="ID">Dog ID</label> 
                    <input type="text" name="ID" id="ID"/> 
                    <label for="dogName">Dog Name</label> 
                    <input type="text" name="dogName" id="dogName"/>
                                    <input type="submit" value="Send"/>
                </fieldset>
            </form>
    </body>
</html> 
```

我可以使用 JSTL、表达式语言、JavaScript 和 jquery，但我不想使用小脚本，以提高优雅度并获得可读性。我该怎么做？谢谢帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:06:45.197

有一种叫做 JSON-taglib 的东西，它允许您从 JSP 中取出 JSON。但听起来你想做相反的事情（即将 JSON 发送回 Servlet）。

在这种情况下，我认为结合您列出的技术来做到这一点可能真的很困难。我认为这样做的唯一方法是使用 JSP/Servlet 规范中的 SimpleTag API 编写您自己的标签。

# c# - ASP.net 中的隐藏字段长度是否有任何限制

> ID：15641311
> 
> 赞同：4
> 
> 时间：2013-03-26T15:44:08.383
> 
> 标签：c#, asp.net, wcf, hidden-field, asp.net-customcontrol

我遇到了一个奇怪的错误（不是很奇怪，我想这是因为我可能不知道一些最大长度限制）。我正在开发自定义服务器控件，它为员工提供自定义搜索服务。成功搜索员工后，我从 WCF 服务中以 json 格式获取他们的整个对象（列表），将字符串保存在隐藏字段中，并回发后面的代码以获取 json 字符串并反序列化为对象。现在，多达 2000 个对象，它可以正常工作，但是当搜索条件开始获取 2000 以上时，开始出现以下错误

```
Uncaught Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 0 
```

我也调试了代码，但 c# 代码甚至没有捕获任何调用。我还尝试将对象的 json 字符串保存在多个隐藏字段中，每个字段在 json 字符串中都有 1000 条记录。但是，错误仍然不断出现。这告诉我对表格的最大尺寸有某种限制。我可以为这个问题找到任何解决方案，还是我必须将 Ids 发送到后面的代码并从那里的服务中获取对象？实际上，服务 url 应该是动态的，主机应用程序会提供它，所以我尽量不在 C# 级别引入任何服务绑定（我猜你明白了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:51:20.727

根据[文档](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)，ASP.NET 确实有最大请求大小——默认为 4MB 。如果您认为您可能会达到该限制，您可以通过将以下内容添加到`<system.web>`标签内的 web.config 文件中来增加它：

```
<httpRuntime maxRequestLength="x"> 
```

其中 x 是以千字节为单位的所需最大值。例如，10240 将是 10MB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:54:01.910

当我来回传递大量数据以进行映射时遇到了这个问题 - 在数据太大后我丢失了数据。我对 web.config 进行了一些更改：

```
 <appSettings>    
     <add key="aspnet:MaxHttpCollectionKeys" value="5000" />
     <add key="aspnet:MaxJsonDeserializerMembers" value="5000" />
</appSettings> 
```

# jboss7.x - 名称中带有“-”的 RESTEasy 映射参数

> ID：15641313
> 
> 赞同：0
> 
> 时间：2013-03-26T15:44:15.580
> 
> 标签：jboss7.x, resteasy

RESTEasy 专家的一个简单问题（我希望如此……）。我收到一个通过 POST 发布的表单，其中包含名称中带有“-”的属性：示例： `return-code=12`

我想将此 POST 的所有内容映射到 Pojo ：

```
public class MyFormInfo {
    public String attr1="";
    public String return_code=""; // don't work because return-code is not mapped in return_code
... 
```

方法声明如下：

```
@POST
@Path("/return-cic-payment")
public String receiveForm(MyFormInfo form) throws Exception {
    log.info("Return-code is : {}", form.return_code);
} 
```

我不会在参数列表中一一映射属性，因为表单包含大量字段。

因为我的 POJO 中不能有一个名为“return-code”的属性，所以我想知道如何获取这个参数的值。自定义映射可能是一种解决方案，但我不知道如何实现。我尝试的其他想法没有成功，以接收属性映射。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:26:51.903

试试这个：[http ://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html_single/#_Form](http://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html_single/#_Form)

```
class MyFormInfo{
  @FormParam("return-code") 
  private String returnCode;
  //etc.
} 
```

# c# - 填充嵌套列表

> ID：15641316
> 
> 赞同：0
> 
> 时间：2013-03-26T15:44:19.507
> 
> 标签：c#, winforms, visual-studio-2010, multidimensional-array

我想在这个列表中添加我的按钮

```
List<List<Button>> buttonss = new List<List<Button>>(); 
```

这就是我创建按钮的方式：

```
Button[][] buttons; 
```

在方法中（也尝试填充列表但不正确）：

```
for (int r = 0; r < row; r++)
    {
       for ( int c = 0; c < col; c++)
           {
             buttons[r][c] = new Button();
             buttonss.Add(buttons[r][c]);
           }
    } 
```

我如何使用此按钮数组填充此列表（我的数组必须是`Button[][]`而不是`Button[,]`因为当我执行 xml 序列化等其他事情时它会让我的生活更轻松

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:48:20.167

我不确定你为什么要尝试以两种不同的方式存储这两种方式，但如果你*真的*需要，那么你需要初始化每个内部数组和列表：

```
buttons = new Button[row][];
for (int r = 0; r < row; r++)
{ 
   buttons[r] = new Button[col];
   List<Button> rowList = new List<Button>();
   buttonss.Add(rowList);    
   for (int c = 0; c < col; c++)
   {
     buttons[r][c] = new Button();
     rowList.Add(buttons[r][c]);
   }
} 
```

另一种方法是*存储*在锯齿状数组中并*转换*为列表（反之亦然）：

```
// From List<List> to Jagged Array
buttons = buttonss.Select(b=>b.ToArray()).ToArray();

// From Jagged Array to List<List>
buttonss = buttons.Select(b=>b.ToList()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:49:10.240

您可以使用 LINQ `Select`：

```
buttonss = buttons.Select(b => b.ToList()).ToList(); 
```

# java - 从类的一部分到另一部分获取字符串

> ID：15641317
> 
> 赞同：1
> 
> 时间：2013-03-26T15:44:22.650
> 
> 标签：java, string, class, loops, public

**原始问题**

所以我是编码新手。我可能已经达到了我的 3 个月大关。但我喜欢通过我正在上的课程，因为这些东西真的让我很感兴趣。所以我想弄乱一些代码来尝试更多地理解它。经过大量的谷歌搜索，这是我所得到的。该程序假设要求输入密码。如果输入正确的密码，它将显示两个选项。选项 1 将让您输入信息（姓名、姓氏、年龄、手机号码）。选项 2 将显示存储的信息。除了我想将从 A 获得的信息显示到 B 之外，到目前为止一切都很好。我有两个单独的课程。第一个被称为 main （这是主要的方法，女巫工作正常）

```
import javax.swing.*;

//Created by: Robert Duval
//3/26/13

public class Main
{
    public static void main(String[] args)
    {
        String tempString, passWord = "mrGiggles", input = "null";

        while(!input.equals(passWord)) //This loop looks for the password
        {

        input = JOptionPane.showInputDialog("Hello, please enter password.");

        if(input.equals(passWord)) //If the password is correct
        {
            while(!input.equals("Enter information")||!input.equals("View profile")) //This loop looks to see what to do next
            {
                input = JOptionPane.showInputDialog("Welcome\nEnter information\nView profile");

                if(input.equals("Enter information"))
                {
                    display.input();
                }
                else if(input.equals("View profile"))
                {
                    display.stored();
                }
                else
                {
                tempString = "ERROR\nCannot find what you are looking for.";
                JOptionPane.showMessageDialog(null, tempString);
                }
            }

        }
        else //If the password is incorrect.
        {
            tempString = "In-correct";
            JOptionPane.showMessageDialog(null, tempString);
        }
    }
    }
} 
```

我的第二堂课（显示器）是我遇到问题的地方。我应该将它们设为公共字符串吗？或者是什么？input() 方法填充了我想在 stored() 方法中使用的字符串。我一直在寻找这个，但我不明白回报和什么不是。如果你能帮助我并指出我的缺陷，那就太好了。

```
import javax.swing.*;

//Created by: Robert Duval
//3/26/13

public class display
{
    public static void input() //This is the method that will ask for the information
    {
        String age="null", cellNumber="null", name="null", lastName="mull", allInfo = name+ "\n" +lastName+ "\n" +age+ "\n" +cellNumber+ "\n";

        name = JOptionPane.showInputDialog("Enter the first name");
        lastName = JOptionPane.showInputDialog("Enter the last name");
        age = JOptionPane.showInputDialog("Enter the age");
        cellNumber = JOptionPane.showInputDialog("Enter the cell phone number");

        display.stored();

    }

    public static void stored() //This method is asking the user what to show for the input() method.
    {
        String loop = "loop", tempString;

    while(!loop.equals("break"))
    {

    tempString = JOptionPane.showInputDialog("What information would you like to see? \nname\nage\ncell number\nall info\nquit");

    if(tempString.equals("name")||tempString.equals("Name")||tempString.equals("NAME"))
    {
        JOptionPane.showMessageDialog(null, name); //This is where I want to display the name String from input() method
    }
    else if(tempString.equals("age")||tempString.equals("Age")||tempString.equals("AGE"))
    {
        JOptionPane.showMessageDialog(null, age); //This is where I want to display the age String from input() method
    }
    else if(tempString.equals("cell number")||tempString.equals("Cell number")||tempString.equals("cell Number")||tempString.equals("Cell Number")||tempString.equals("cellNumber")||tempString.equals("cellnumber")||tempString.equals("Cellnumber"))
    {
        JOptionPane.showMessageDialog(null, cellNumber); //This is where I want to display the cellNumber String from input() method
    }
    else if(tempString.equals("all info")||tempString.equals("All info")||tempString.equals("all Info")||tempString.equals("All Info")||tempString.equals("allinfo")||tempString.equals("allInfo")||tempString.equals("Allinfo")||tempString.equals("AllInfo"))
    {
        JOptionPane.showMessageDialog(null, allInfo); //This is where I want to display the allInfo String from input() method
    }
    else if(tempString.equals("quit")||tempString.equals("Quit")||tempString.equals("QUIT"))
    {
        loop = "break"; //Breaks the while loop
    }
    else
    {
        tempString = "Not a valid answer. \nPlease try again.";
        JOptionPane.showMessageDialog(null, tempString);
    }
}
}
} 
```

**更新的问题**

好的，所以在查看答案后，我真的很接近了！但是由于某种原因，当我查看数据时，它会为所有内容生成“null”。我在想它是因为我关闭了该方法，然后重新打开它，所以一切都刷新了。*如何保存输入的信息。离开方法。回来但打开显示并显示该信息？*

这是更新的代码：

**主班**

```
import javax.swing.*;

//Created by Robert Duval
//3/26/13

public class Main
{
    public static void main(String[] args)
    {
        String tempString, passWord = "mrGiggles", input = "null";

        display display = new display();

        while(!input.equals(passWord)) //This loop looks for the password
        {

            input = JOptionPane.showInputDialog("Hello, please enter password.");

            if(input.equals(passWord)) //If the password is correct
            {
                while(!input.equalsIgnoreCase("Enter information")||!input.equalsIgnoreCase("View profile")) //This loop looks to see what to do next
                {
                    input = JOptionPane.showInputDialog("Welcome\nEnter information\nView profile");

                    if(input.equalsIgnoreCase("Enter information"))
                    {
                        display.input();
                    }
                    else if(input.equalsIgnoreCase("View profile"))
                    {
                        display.stored();
                    }
                    else
                    {
                        tempString = "ERROR\nCannot find what you are looking for.";
                        JOptionPane.showMessageDialog(null, tempString);
                    }
                }
            }
            else //If the password is incorrect.
            {
                tempString = "In-correct";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

**显示类**

```
import javax.swing.*;

//Created by: Robert Duval
//3/26/13

public class display
{
    String age="null", cellNumber="null", name="null", lastName="mull", allInfo = name+ "\n" +lastName+ "\n" +age+ "\n" +cellNumber+ "\n";

    public void input()
    {
        name = JOptionPane.showInputDialog("Enter the first name");
        lastName = JOptionPane.showInputDialog("Enter the last name");
        age = JOptionPane.showInputDialog("Enter the age");
        cellNumber = JOptionPane.showInputDialog("Enter the cell phone number");
    }

    public void stored()
    {
        String tempString;

        while(true)
        {

            tempString = JOptionPane.showInputDialog("What information would you like to see? \nname\nage\ncell number\nall info\nquit");

            if (tempString.equalsIgnoreCase("name"))
            {
                JOptionPane.showMessageDialog(null, name); //This is where I want to display the name String from input() method
            }
            else if(tempString.equalsIgnoreCase("age"))
            {
                JOptionPane.showMessageDialog(null, age); //This is where I want to display the age String from input() method
            }
            else if(tempString.equalsIgnoreCase("cell number"))
            {
                JOptionPane.showMessageDialog(null, cellNumber); //This is where I want to display the cellNumber String from input() method
            }
            else if(tempString.equalsIgnoreCase("all info")||tempString.equalsIgnoreCase("allinfo"))
            {
                JOptionPane.showMessageDialog(null, allInfo); //This is where I want to display the allInfo String from input() method
            }
            else if(tempString.equalsIgnoreCase("quit"))
            {
               break; //Breaks the while loop
            }
            else
            {
                tempString = "Not a valid answer. \nPlease try again.";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

顺便说一句，感谢大家的所有帮助。我很感激。

**解决方案**

好吧，伙计们。我又玩了一些，发现如何让它工作。感谢所有需要的帮助。

**主班**

```
import javax.swing.*;

//Created by Robert Duval
//3/26/13

public class Main
{
    public static void main(String[] args)
    {
        String tempString, passWord = "mrGiggles", input = "null";

        display display = new display();

        while(!input.equals(passWord)) //This loop looks for the password
        {

            input = JOptionPane.showInputDialog("Hello, please enter password.\nQuit");

            if(input.equals(passWord)) //If the password is correct
            {
                while(!input.equalsIgnoreCase("Enter information")||!input.equalsIgnoreCase("View profile")) //This loop looks to see what to do next
                {
                    input = JOptionPane.showInputDialog("Welcome\nEnter information\nView profile\nLog out");

                    if(input.equalsIgnoreCase("Enter information"))
                    {
                        display.input();
                    }
                    else if(input.equalsIgnoreCase("View profile"))
                    {
                        display.stored();
                    }
                    else if(input.equalsIgnoreCase("log out"))
                    {
                        break;
                    }
                    else
                    {
                        tempString = "ERROR\nCannot find what you are looking for.";
                        JOptionPane.showMessageDialog(null, tempString);
                    }
                }
            }
            else if(input.equalsIgnoreCase("quit"))
            {
                break;
            }
            else //If the password is incorrect.
            {
                tempString = "In-correct";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

**显示类**

```
import javax.swing.*;

//Created by: Robert Duval
//3/26/13

public class display
{
    String age="null", cellNumber="null", name="null", lastName="null";

    public void input()
    {
        name = JOptionPane.showInputDialog("Enter the first name");
        lastName = JOptionPane.showInputDialog("Enter the last name");
        age = JOptionPane.showInputDialog("Enter the age");
        cellNumber = JOptionPane.showInputDialog("Enter the cell phone number");
    }

    public void stored()
    {
        String tempString, allInfo = name+ "\n" +lastName+ "\n" +age+ "\n" +cellNumber+ "\n";

        while(true)
        {

            tempString = JOptionPane.showInputDialog("What information would you like to see? \nName\nAge\nCell number\nAll info\nBack");

            if (tempString.equalsIgnoreCase("name"))
            {
                JOptionPane.showMessageDialog(null, name);
            }
            else if(tempString.equalsIgnoreCase("age"))
            {
                JOptionPane.showMessageDialog(null, age);
            }
            else if(tempString.equalsIgnoreCase("cell number"))
            {
                JOptionPane.showMessageDialog(null, cellNumber);
            }
            else if(tempString.equalsIgnoreCase("all info")||tempString.equalsIgnoreCase("allinfo"))
            {
                JOptionPane.showMessageDialog(null, allInfo);
            }
            else if(tempString.equalsIgnoreCase("back"))
            {
               break;
            }
            else
            {
                tempString = "Not a valid answer. \nPlease try again.";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

它运行完美！

PS它不会让我回答我自己的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:57:11.313

您需要使您的显示类方法非静态并使用带有字段的对象：

```
public class Display
{
    private String age="null", cellNumber="null", name="null", lastName="mull", allInfo = name+ "\n" +lastName+ "\n" +age+ "\n" +cellNumber+ "\n";

    public void input()
    {
        name = JOptionPane.showInputDialog("Enter the first name");
        lastName = JOptionPane.showInputDialog("Enter the last name");
        age = JOptionPane.showInputDialog("Enter the age");
        cellNumber = JOptionPane.showInputDialog("Enter the cell phone number");

        stored();
    }        

    public void stored()
    {
        String tempString;

        while(true)
        {        
            tempString = JOptionPane.showInputDialog("What information would you like to see? \nname\nage\ncell number\nall info\nquit");

            if(tempString.equalsIgnoreCase("name"))
            {
                JOptionPane.showMessageDialog(null, name); //This is where I want to display the name String from input() method
            }
            else if(tempString.equalsIgnoreCase("age"))
            {
                JOptionPane.showMessageDialog(null, age); //This is where I want to display the age String from input() method
            }
            else if(tempString.equalsIgnoreCase("cell number")||tempString.equals("Cell number")||tempString.equalsIgnoreCase("cellNumber"))
            {
                JOptionPane.showMessageDialog(null, cellNumber); //This is where I want to display the cellNumber String from input() method
            }
            else if(tempString.equalsIgnoreCase("all info")||tempString.equalsIgnoreCase("allinfo"))
            {
                JOptionPane.showMessageDialog(null, allInfo); //This is where I want to display the allInfo String from input() method
            }
            else if(tempString.equalsIgnoreCase("quit"))
            {
               break; //Breaks the while loop
            }
            else
            {
                tempString = "Not a valid answer. \nPlease try again.";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

如您所见，我将班级名称从更改`display`为`Display`. 这是区分类名和变量名的 Java 约定。这些方法不再是静态的，这意味着您不能在类上调用它们，而只能在该类的对象上调用它们。这样的对象可以具有描述其条件的字段。要访问这些字段，您需要非静态成员。该调用`display.stored()`现在只是`stored()`在您刚刚调用的同一对象上调用该方法`input()`。要清除它，您还可以编写`this.stored()`. `this`总是指向现在的对象。

我还在课堂上介绍`break`了循环中的命令`Display`。

让我们看看现在必须在主类中进行哪些更改：

```
public class Main
{
    public static void main(String[] args)
    {
        String tempString, passWord = "mrGiggles", input = "null";

        Display display = new Display();

        while(!input.equals(passWord)) //This loop looks for the password
        {
            input = JOptionPane.showInputDialog("Hello, please enter password.");

            if(input.equals(passWord)) //If the password is correct
            {
                while(!input.equals("Enter information")||!input.equals("View profile")) //This loop looks to see what to do next
                {
                    input = JOptionPane.showInputDialog("Welcome\nEnter information\nView profile");

                    if(input.equals("Enter information"))
                    {
                        display.input();
                    }
                    else if(input.equals("View profile"))
                    {
                        display.stored();
                    }
                    else
                    {
                        tempString = "ERROR\nCannot find what you are looking for.";
                        JOptionPane.showMessageDialog(null, tempString);
                    }
                }
            }
            else //If the password is incorrect.
            {
                tempString = "In-correct";
                JOptionPane.showMessageDialog(null, tempString);
            }
        }
    }
} 
```

该行`Display display = new Display()`创建了`Display`该类的一个新对象并将其分配给具有 type`Display`和 name的变量`display`。如果您在`display`（现在是变量）上调用方法，则会在变量指向的对象而不是类上调用它们。

# c++ - 任何人都给我一个例子来使用 QVector::QVector(std::initializer_list 参数）？

> ID：15641318
> 
> 赞同：7
> 
> 时间：2013-03-26T15:44:23.487
> 
> 标签：c++, qt, c++11, initializer-list

任何人都给我一个例子来使用下面的构造函数 int Qt？

```
QVector::QVector(std::initializer_list<T> args); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T15:46:28.653

`std::initializer_list`当您使用列表初始化时，会考虑采用一个构造函数。这是一个涉及括号初始化列表的初始化：

```
QVector<int> v{1, 2, 3, 4, 5};
// or equivalently
QVector<int> v = {1, 2, 3, 4, 5}; 
```

请注意，这是一个 C++11 功能。事实上，第一种语法对 C++11 来说是新的，而第二种可能在 C++03 中用于聚合初始化。

您还可以使用直接初始化并将初始化列表作为参数传递：

```
QVector<int> v({1, 2, 3, 4, 5}); 
```

由于构造函数不是`explicit`，它还可以用于其他一些有趣的方式：

1.  传递`QVector`参数：

    ```
    void foo(QVector<int>);

    foo({1, 2, 3, 4, 5}); 
    ```

2.  返回一个`QVector`：

    ```
    QVector<int> bar()
    {
      return {1, 2, 3, 4, 5};
    } 
    ```

* * *

§8.5.4 列表初始化 [dcl.init.list]：

> 一个构造函数是一个*初始化列表构造函数*，如果它的第一个参数是类型`std::initializer_list<E>`或引用可能 cv-qualified `std::initializer_list<E>`for some type `E`，并且要么没有其他参数，要么所有其他参数都有默认参数（8.3.6）。

§13.3.1.7 通过列表初始化 [over.match.list] 进行初始化：

> 当非聚合类类型的对象`T`被列表初始化（8.5.4）时，重载决议分两个阶段选择构造函数：
> 
> *   最初，候选函数是类的初始化列表构造函数（8.5.4），`T`参数列表由初始化列表作为单个参数组成。
>     
>     
> *   [...]

# jquery - 简单的 jQuery AJAX XML 加载不起作用

> ID：15641320
> 
> 赞同：0
> 
> 时间：2013-03-26T15:44:27.440
> 
> 标签：jquery, xml, ajax

我只是尝试使用 AJAX 加载一些简单的 XML 数据，但它没有任何效果，而且我一辈子都找不到错误。任何帮助表示赞赏。这是代码：

对于页面：

```
 <html>
 <head>
 <title>Big Skinny Wallet Helper</title>
 <style>
 #nav
 {
 position:absolute;
 left:0px;
 width:300px;
 background-color:#b0e0e6;
 }
 #content
 {
 position:absolute;
 left: 300px;
 }
 </style>
 <script src="http://code.jquery.com/jquery-latest.js"></script
 </head>
 <body>
 <div id="nav">
 This is text on the left.
 <form>
 <input type="radio" name="gender" class="gender" id="male" value="male">Male<br />
 <input type="radio" name="gender" class="gender" id="female" value="female">Female<br     />
 </form>
 </div>

<div id="content">
This is the main content area.
</div>

<div>
</div>

<script>
$(document).ready(function() {
$.get('wallets.xml', function(data) {
    $('#content').empty();
    $(data).find('wallet').each(function() {
        var $wallet = $(this);
        var html = '<div class="wallet">';
        html += '<h3 class="name">' + $wallet.attr('name');
        html += '</h3>';
        html += '</div>';
        $('#content').append($(html));
    });
});

});
</script>
</body>
</html> 
```

对于 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<wallets>
<wallet name="Compact Sport" material="nylon" gender="male">
    <description>
        This is the latest bi-fold wallet in our series of super thin and      light sport wallets featuring four card pockets. Since most people only use 4-6 cards     regularly, just use the front two pockets for those cards and stack & store all those other cards in the hidden 2 storage pockets--go minimalist by keeping your material layers to a minimum. The favorite thin wallet used every single day by the Big Skinny founder.
    </description>
</wallet>
<wallet name="Curve" material="nylon" gender="male">
    <description>
        Front pocket wallet-carriers, this is the model for you! We hate the state the obvious, but hey, it's fun: the curve is designed with two-rounded edges to fit neatly in your front or back pants pocket. Crafted from tough, machine-washable, nylon micro-fiber, this ultra thin wallet can hold about 20 plastic cards and cash. The pockets and billfold area are lined with a rubbery coating to help prevent your goods from sliding out: smart!
    </description>
</wallet>
</wallets> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:26:51.927

您的 XML 未验证。 `&`应该是`&amp;`。

为了将来参考，试试[这个验证器](http://validator.w3.org/check)。

# less - Visual Studio 2010 Express 中的 LESS 支持

> ID：15641324
> 
> 赞同：3
> 
> 时间：2013-03-26T15:44:47.173
> 
> 标签：less, visual-studio-express

我想知道是否有任何方法可以在 2010 年的 Visual Studio 速成版中获得对 LESS 的支持。我知道有一个可用的插件，但你不能在快速版上安装它。安装 2012 版（内置支持较少）不是一种选择。

编辑：澄清一下，至少我正在寻找颜色编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:26:47.987

另一种选择是使用 WebMatrix。它具有与 Visual Studio 相同的 LESS 编辑器，并且是免费的：http: [//www.microsoft.com/web/webmatrix/](http://www.microsoft.com/web/webmatrix/)

如果你想要自动编译/缩小，有一个扩展： [http ://extensions.webmatrix.com/packages/OrangeBits](http://extensions.webmatrix.com/packages/OrangeBits)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:55:16.797

您也许可以在 Visual Studio 的工具、选项窗口中为扩展配置 css 或 js 编辑器。但除此之外（甚至这只是一半的解决方案），VS Express 不支持可扩展性，所以很遗憾官方的回答是：不。

要启用这些类型的功能，您至少需要 VS Pro。

# mfc - 如何找到另一台计算机（客户端服务器）的 MAC 地址？

> ID：15641326
> 
> 赞同：1
> 
> 时间：2013-03-26T15:44:54.627
> 
> 标签：mfc, udp, client-server, ip-address, mac-address

**我正在尝试**使用 C++ 中的服务器和客户端程序使用 UDP 连接获取另一台计算机的 MAC 地址。服务器在一台计算机上（它包含 2 个列表框，1 个用于连接客户端的 IP 地址，另一个用于 MAC 地址）客户端在另一台计算机上。如果我运行服务器和客户端以及同一台计算机，我当前的代码只会获取 MAC 地址。当我调试程序时，我看到当试图获取另一台计算机的 MAC 地址时，程序不会进入 if 语句并运行 PrintMACaddress(pAdapterInfo->Address);

```
 void CmfcServerDlg:: PrintMACFromIP(const CString &selected_ip_adr)
{
    IP_ADAPTER_INFO AdapterInfo[16];            
    DWORD dwBufLen = sizeof(AdapterInfo);       
    DWORD dwStatus = GetAdaptersInfo(           
        AdapterInfo,                            
        &dwBufLen);                             
    assert(dwStatus == ERROR_SUCCESS);          

    PIP_ADAPTER_INFO pAdapterInfo = AdapterInfo;// Contains pointer to current adapter info
    bool found = false;
    do {
        const IP_ADDR_STRING *addr_str = &pAdapterInfo->IpAddressList; 
        if (addr_str != NULL)
        {
            if (selected_ip_adr == addr_str->IpAddress.String)
            {
                PrintMACaddress(pAdapterInfo->Address);
            }              
        }   

        pAdapterInfo = pAdapterInfo->Next; 

    }
    while(pAdapterInfo);                        

} 
```

我发现使用 ARP 功能可能对此有所帮助，或者由于 MAC 地址是数据，我可以将其作为字符串或原始数据传输，但我知道如何做到这一点

这是 PrintMAC 函数：

```
 void CmfcServerDlg::PrintMACaddress(unsigned char MACData[])
{
    CString strText;
    strText.Format("%02X-%02X-%02X-%02X-%02X-%02X\n",MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
    m_ClientIdList.AddString(strText); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:55:14.977

该`GetAdaptersInfo`函数仅返回连接到本地计算机的适配器的地址。你应该看看[SendARP](http://msdn.microsoft.com/es-es/library/windows/desktop/aa366358%28v=vs.85%29.aspx)。

编辑：试试这个：

```
void CmfcServerDlg::PrintMACFromIP(const CString &selected_ip_adr)
{
DWORD dwRetVal;
IPAddr DestIp = 0;
IPAddr SrcIp = 0;       /* default for src ip */
ULONG MacAddr[2];       /* for 6-byte hardware addresses */
ULONG PhysAddrLen = 6;  /* default to length of six bytes */

char *SrcIpString = NULL;

BYTE *bPhysAddr;

DestIp = inet_addr(CT2A(selected_ip_adr));

memset(&MacAddr, 0xff, sizeof (MacAddr));

dwRetVal = SendARP(DestIp, SrcIp, &MacAddr, &PhysAddrLen);

if (dwRetVal == NO_ERROR) {
    bPhysAddr = (BYTE *) & MacAddr;
    if (PhysAddrLen) {
        CString theMac;
        theMac.Format(_T("%.2X-%.2X-%.2X-%.2X-%.2X-%.2X"), (int) bPhysAddr[0],
            (int) bPhysAddr[1],(int) bPhysAddr[2],(int) bPhysAddr[3],(int) bPhysAddr[4],
            (int) bPhysAddr[5]);
        PrintMACaddress(theMac);
    } else
        printf
            ("Warning: SendArp completed successfully, but returned length=0\n");

} else {
    printf("Error: SendArp failed with error: %d", dwRetVal);
    switch (dwRetVal) {
    case ERROR_GEN_FAILURE:
        printf(" (ERROR_GEN_FAILURE)\n");
        break;
    case ERROR_INVALID_PARAMETER:
        printf(" (ERROR_INVALID_PARAMETER)\n");
        break;
    case ERROR_INVALID_USER_BUFFER:
        printf(" (ERROR_INVALID_USER_BUFFER)\n");
        break;
    case ERROR_BAD_NET_NAME:
        printf(" (ERROR_GEN_FAILURE)\n");
        break;
    case ERROR_BUFFER_OVERFLOW:
        printf(" (ERROR_BUFFER_OVERFLOW)\n");
        break;
    case ERROR_NOT_FOUND:
        printf(" (ERROR_NOT_FOUND)\n");
        break;
    default:
        printf("\n");
        break;
    }
  }
}

void CmfcServerDlg::PrintMACaddress(CString& strText)
{
    m_ClientIdList.AddString(strText); 
} 
```

# android - 不可见的 Ndef 消息

> ID：15641327
> 
> 赞同：1
> 
> 时间：2013-03-26T15:44:57.603
> 
> 标签：android, tags, nfc, ndef, iso-15693

我正在为 NFC 设备实现 Android 应用程序。我在两个不同的 Android 设备上使用 Ndef、NfcV 和 NdefFormatable 标签：三星 Galaxy SII plus 和三星 Galaxy SII，每个都运行 android 版本 4.1.2。SII plus可以看到标签，读写没有问题，但是SIII看不到Ndef技术，只能看到NfcV技术。知道为什么吗？无论标签是否具有实际的 NDEF 消息，任何已上市的应用程序都会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:41:41.797

NfcV 标签不是官方的 NFC 论坛标签。因此，没有标准化的方式如何将 NDEF 消息存储在标签上。也不是所有的 NfcV 标签都以类似的方式工作。如果要低级读取或写入标签，则必须根据特定标签向标签发送不同的命令。不同标签之间的内存架构也不同。

在实践中，NFC 通信库通过列出一些常见的 NfcV 标签以及如何读取/写入它们的说明来处理该问题。此列表在不同的手机和 android 版本之间有所不同。

这种不兼容不会在短期内消失。NfcV 可能成为 NFC 论坛标准的一部分，但现在这对您没有帮助。有两种方法可以处理这个问题：

1.  如果您需要一种可以在所有 NFC 设备之间可靠交换数据的标签类型，请不要使用 NfcV。NFC Forum Type1 到 Type4 就是为此而生的。甚至不保证支持 NfcV 读/写功能。

2.  如果你因为项目原因绑定了这个特定的NFC标签，你可以忽略内置的NDEF读取代码，自己做。为此，您需要标签数据表并使用 tag.transceive 发送原始命令。这需要更多的工作，但并不*难*。

# excel - IsNumeric 为真，但应为假

> ID：15641331
> 
> 赞同：1
> 
> 时间：2013-03-26T15:45:01.007
> 
> 标签：excel, vba

考虑 numberString$ 是“1st (3) Name...”，在我的代码中 support$ 是“1s”，这是正确的。NumericCheck 应该是错误的，但我总是正确的！错误在哪里？

```
numbertring$ = Worksheet1.Cells(i, 1)
support$ = Left$(numbertring$, 2)

numericCheck = IsNumeric(Val(support$)) 
```

提前谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:48:55.577

你`support$`在`Val`检查它是否是数字之前运行。[的定义`Val`](http://www.techonthenet.com/excel/formulas/val.php)是：

> VAL 函数接受一个字符串作为输入并返回在该字符串中找到的数字。

下面说明了您的代码是如何被解释的：

```
IsNumeric(Val(support$))
IsNumeric(Val("1s"))
IsNumeric(1) 
```

所以现在应该清楚为什么`numericCheck`是真的，而不是假的:)

# c# - 动态创建新的 PropertyInfo 对象

> ID：15641339
> 
> 赞同：11
> 
> 时间：2013-03-26T15:45:26.100
> 
> 标签：c#, object, reflection, propertyinfo

这是我的第一篇文章，虽然我在某种程度上搜索了与我的问题相关的主题，但我很难找到正确的答案。

我的问题可能很简单，但我知道答案可能并不那么容易给出。如果有的话。

话虽如此，这就是我的情况：例如，我有一个 PropertyInfo 对象数组，我用它来从类中获取属性，如下所示：

```
public PropertyInfo[] GetProperties (object o)
{
    PropertyInfo[] properties = o.GetType().GetProperties();

    return properties;
} 
```

看起来很容易，对吧？现在我的问题是：**如何**创建一个新的 PropertyInfo 对象并将其添加到数组中？

我看过其他帖子，用户想要设置 PropertyInfo 的值，但这不是我需要的。我需要动态创建一个新的 PropertyInfo 对象，其中我拥有的唯一可用数据是**Name**和**Type**。

我之前发布的测试用例只是我想要实现的一个小例子。事实上，我真正的最终目标是能够基于这个类创建一个新的 PropertyInfo：

```
public class DynamicClass
{
    public Type ObjectType { get; set; }
    public List<string> PropertyNameList { get; set; }
    public List<Type> PropertyTypeList { get; set; }
} 
```

我希望有人可以帮助我实现这一目标。提前谢谢了！

**编辑：我忘了在 GetProperties() 方法之前添加 o.GetType() 。谢谢伊利亚伊万诺夫！**

我这样调用方法 SelectProperties：

```
list = _queriable.Select(SelectProperties).ToList(); 
```

该方法如下所示：

```
private Expression<Func<T, List<string>>> SelectProperties
{
    get
    {
       return value => _properties.Select
                      (
                          prop => (prop.GetValue(value, new object[0]) ?? string.Empty).ToString()
                      ).ToList();
        }
    } 
```

此致，

路易斯

* * *

**更新**：

好的，所以我遵循 280Z28 的建议，并在一个新类中继承 PropertyInfo。我做了更多研究，在 MSDN 中发现我需要重写以下方法：GetValue、SetValue、GetAccessors、GetGetMethod、GetSetMethod 和 GetIndexParameters。

但是，当我尝试使用参数调用 base 时，它​​给了我一个错误提示，我引用了“无法调用抽象成员：'System.Reflection.PropertyInfo.GetAccessesors(bool)'”。如果我尝试在没有任何参数的情况下调用该方法，它不会显示任何错误，但我觉得这是错误的方法。

这是我到目前为止所得到的：

```
public override MethodInfo[] GetAccessors(bool nonPublic)
{
   MethodInfo[] temp = base.GetAccessors(nonPublic);

return temp;
} 
```

**更新 2**：

好吧，那效果不好。经过几个小时尝试执行 PropertyInfo 或 PropertyDescriptor 的派生类后，我决定不采用这种方法。

相反，我从阅读其他帖子中获得了另一个想法。我真正的**问题**在于，我通常阅读和用于获取属性的类并不总是相同的。所以我意识到我可能真正需要的只是一种动态创建**动态类**的方法，**然后**才能获取属性。

我读到有一种叫做 ExpandoObject 和 ElasticObject 的东西，虽然我还不知道如何将它们应用到我的问题中以便最终得到解决方案。

好的，现在我真正要做的是 -> 我一直在使用以下链接中提到的解决方案：[jQuery DataTables Plugin Meets C#。](http://guoicq.blogspot.com/2011/02/jquery-datatables-plugin-and-server.html)

问题是，这假设每个数据库表都有不同的静态模型/类。但是，在我的情况下，我将有两种类型的列：由每个 DB 表类提供的列（也称为基本列），然后是我在改编中已经动态提供的其他列。

例如：如果这是 DB 表类：

```
public class Table1
{
    public int Field1;
    public string Field2;
    public string Field3;
} 
```

然后我提供了一个额外的列，名为**“Action”，类型为 string**，然后在 DataTableParser 类中，在 _properties 属性中应该有以下信息：

```
_properties[0] should be int32 Field1
_properties[1] should be String Field2
_properties[2] should be String Field3
_properties[3] should be String Action 
```

老实说，这就是**我**所需要的！不多不少，不多不少！其余的我已经在解析了！

最后，因为我的列数（提供的）与传递给 DataTableParser 类的对象不同，所以在对 DataTable 进行排序和过滤时总是会出错。

请问有什么帮助吗？我真的很需要！再次感谢。

此致，

路易斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T09:14:06.847

# ****解决方案：****

**好的，基本上我所做的是重用下面主题中的 MyTypeBuilder 类（进行了一些修改），以创建一个动态对象并添加一个从中获取 IList 的方法。**

 **链接：[如何在 C# 中动态创建一个类？](https://stackoverflow.com/questions/3862226/dynamically-create-a-class-in-c-sharp)

```
public class MyObjectBuilder
{
    public Type objType { get; set; }

    public MyObjectBuilder()
    {
        this.objType = null;
    }

    public object CreateNewObject(List<Field> Fields)
    {
        this.objType = CompileResultType(Fields);
        var myObject = Activator.CreateInstance(this.objType);

        return myObject;
    }

    public IList getObjectList()
    {
        Type listType = typeof(List<>).MakeGenericType(this.objType);

        return (IList)Activator.CreateInstance(listType);
    }

    public static MethodInfo GetCompareToMethod(object genericInstance, string sortExpression)
    {
        Type genericType = genericInstance.GetType();
        object sortExpressionValue = genericType.GetProperty(sortExpression).GetValue(genericInstance, null);
        Type sortExpressionType = sortExpressionValue.GetType();
        MethodInfo compareToMethodOfSortExpressionType = sortExpressionType.GetMethod("CompareTo", new Type[] { sortExpressionType });

        return compareToMethodOfSortExpressionType;
    }

    public static Type CompileResultType(List<Field> Fields)
    {
        TypeBuilder tb = GetTypeBuilder();
        ConstructorBuilder constructor = tb.DefineDefaultConstructor(MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.RTSpecialName);

        // NOTE: assuming your list contains Field objects with fields FieldName(string) and FieldType(Type)
        foreach (var field in Fields)
            CreateProperty(tb, field.FieldName, field.FieldType);

        Type objectType = tb.CreateType();
        return objectType;
    }

    private static TypeBuilder GetTypeBuilder()
    {
        var typeSignature = "MyDynamicType";
        var an = new AssemblyName(typeSignature);
        AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(an, AssemblyBuilderAccess.Run);
        ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule("MainModule");
        TypeBuilder tb = moduleBuilder.DefineType(typeSignature
                            , TypeAttributes.Public |
                            TypeAttributes.Class |
                            TypeAttributes.AutoClass |
                            TypeAttributes.AnsiClass |
                            TypeAttributes.BeforeFieldInit |
                            TypeAttributes.AutoLayout
                            , null);
        return tb;
    }

    private static void CreateProperty(TypeBuilder tb, string propertyName, Type propertyType)
    {
        FieldBuilder fieldBuilder = tb.DefineField("_" + propertyName, propertyType, FieldAttributes.Private);

        PropertyBuilder propertyBuilder = tb.DefineProperty(propertyName, PropertyAttributes.HasDefault, propertyType, null);
        MethodBuilder getPropMthdBldr = tb.DefineMethod("get_" + propertyName, MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig, propertyType, Type.EmptyTypes);
        ILGenerator getIl = getPropMthdBldr.GetILGenerator();

        getIl.Emit(OpCodes.Ldarg_0);
        getIl.Emit(OpCodes.Ldfld, fieldBuilder);
        getIl.Emit(OpCodes.Ret);

        MethodBuilder setPropMthdBldr =
            tb.DefineMethod("set_" + propertyName,
              MethodAttributes.Public |
              MethodAttributes.SpecialName |
              MethodAttributes.HideBySig,
              null, new[] { propertyType });

        ILGenerator setIl = setPropMthdBldr.GetILGenerator();
        Label modifyProperty = setIl.DefineLabel();
        Label exitSet = setIl.DefineLabel();

        setIl.MarkLabel(modifyProperty);
        setIl.Emit(OpCodes.Ldarg_0);
        setIl.Emit(OpCodes.Ldarg_1);
        setIl.Emit(OpCodes.Stfld, fieldBuilder);

        setIl.Emit(OpCodes.Nop);
        setIl.MarkLabel(exitSet);
        setIl.Emit(OpCodes.Ret);

        propertyBuilder.SetGetMethod(getPropMthdBldr);
        propertyBuilder.SetSetMethod(setPropMthdBldr);
    }
} 
```

另外，我使用了这样的 Field 类来获取有关特定字段的信息

```
public class Field
{
   public string FieldName;
   public Type FieldType;
} 
```

最后，我在某个地方找到了这个方法，它允许人们将值设置为成员：

```
public static void SetMemberValue(MemberInfo member, object target, object value)
{
   switch (member.MemberType)
   {
       case MemberTypes.Field:
           ((FieldInfo)member).SetValue(target, value);
           break;
       case MemberTypes.Property:
           ((PropertyInfo)member).SetValue(target, value, null);
           break;
       default:
           throw new ArgumentException("MemberInfo must be if type FieldInfo or PropertyInfo", "member");
   }
} 
```

之后，我执行以下操作来创建一个动态对象并在其上插入一个属性：

```
//Creating a List of Fields (string FieldName, Type FieldType) 
List<Field> Fields = new List<Field>();
Fields.Add(new Field { FieldName = "TestName", FieldType = typeof(string) });

//MyObjectBuilder Class
MyObjectBuilder o = new MyObjectBuilder();

//Creating a new object dynamically
object newObj = o.CreateNewObject(Fields);
IList objList = o.getObjectList();

Type t = newObj.GetType();
object instance = Activator.CreateInstance(t);

PropertyInfo[] props = instance.GetType().GetProperties();

int instancePropsCount = props.Count();

for (int i = 0; i < instancePropsCount; ++i)
{
   string fieldName = props[i].Name;
   MemberInfo[] mInfo = null;
   PropertyInfo pInfo = newObj.GetType().GetProperty(fieldName);

   if (pInfo != null)
   {
       var value = pInfo.GetValue(newObj, null);
       mInfo = t.GetMember(fieldName);

       if (value != null && mInfo != null && !string.IsNullOrEmpty(mInfo[0].ToString()))
           SetMemberValue(mInfo[0], instance, value);
   }
   else
   {
       mInfo = t.GetMember(fieldName);

       if (mInfo != null && !string.IsNullOrEmpty(mInfo[0].ToString()))
           SetMemberValue(mInfo[0], instance, null);
   }
}

objList.Add(instance); 
```

这个解决方案有点超出我最初的问题，但它确实展示了如何动态创建对象，因此允许我们动态地向该对象添加属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T16:09:33.887

[`PropertyInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)是一个抽象类。如果您只需要`Name`和`PropertyType`属性，您可以从中派生出您自己的类来提供此信息。

**您可以使用这些实例的地方非常有限。**为了更好地帮助您，我们需要*准确*了解您计划如何使用`PropertyInfo`您尝试创建的对象。

**编辑：**根据编辑，只要您`GetValue`以某种特定于您正在创建的对象的方式实现该方法，您就可以使用此类。目前尚不清楚您对`DynamicClass`实例做了什么，或者更重要的是，属性值应该存储在哪里。

```
public class SimplePropertyInfo : PropertyInfo
{
    private readonly string _name;
    private readonly Type _propertyType;

    public SimplePropertyInfo(string name, Type propertyType)
    {
        if (name == null)
            throw new ArgumentNullException("name");
        if (propertyType == null)
            throw new ArgumentNullException("propertyType");
        if (string.IsNullOrEmpty(name))
            throw new ArgumentException("name");

        _name = name;
        _propertyType = propertyType;
    }

    public override string Name
    {
        get
        {
            return _name;
        }
    }

    public override Type PropertyType
    {
        get
        {
            return _propertyType;
        }
    }

    public override PropertyAttributes Attributes
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public override bool CanRead
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public override bool CanWrite
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public override Type DeclaringType
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public override Type ReflectedType
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public override MethodInfo[] GetAccessors(bool nonPublic)
    {
        throw new NotImplementedException();
    }

    public override MethodInfo GetGetMethod(bool nonPublic)
    {
        throw new NotImplementedException();
    }

    public override ParameterInfo[] GetIndexParameters()
    {
        throw new NotImplementedException();
    }

    public override MethodInfo GetSetMethod(bool nonPublic)
    {
        throw new NotImplementedException();
    }

    public override object GetValue(object obj, BindingFlags invokeAttr, Binder binder, object[] index, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override void SetValue(object obj, object value, BindingFlags invokeAttr, Binder binder, object[] index, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object[] GetCustomAttributes(Type attributeType, bool inherit)
    {
        throw new NotImplementedException();
    }

    public override object[] GetCustomAttributes(bool inherit)
    {
        throw new NotImplementedException();
    }

    public override bool IsDefined(Type attributeType, bool inherit)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:04:21.507

由于`PropertyInfo`是一个抽象类，您必须自己实现它：

```
class MyPropertyInfo : PropertyInfo
{
} 
```

您需要覆盖一大堆方法和属性，但由于您只会查询`Name`and `Type`，因此您可以简单地`throw new InvalidOperationException()`在其他方法和属性上进行覆盖。

`PropertyInfo`由于数组是固定大小的，因此无法将假添加到数组中，但您可以创建 a `List<PropertyInfo>`，将原始数组和假添加`PropertyInfo`到其中，然后返回`theList.ToArray()`。

不过，在实现此之前，我会考虑其他选项，例如创建您自己的`MyProperty`类，该类*不*派生自这些类`PropertyInfo`并返回一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:10:31.280

您有一个`Method`与其他几个实例有共性的实例，处理此类事件的最有效方式是通过*Polymorphism*。

```
public abstract class DynamicClass
{
     public virtual Type ObjectType { get; set; }
     public virtual List<string> PropertyNameList { get; set; }
     public virtual List<Type> PropertyTypeList { get; set; }
} 
```

然后您可以执行以下操作：

```
public class Something : DynamicClass
{
     public override Type ObjectType { get; set; }
     public override List<string> PropertyNameList { get; set; }
     public override List<Type> PropertyTypeList { get; set; }
} 
```

等等...

现在您显然需要添加一个关于如何填充这些项目的实现；但是你可以打电话给：

```
DynamicClass[] obj = new DynamicClass[]

obj[0] = new Something();
obj[1] = new SomethingElse();
obj[2] = new AndAnotherSomething(); 
```

这是一种非常非常松散的实现方式。但它可以让你实现你想要的那些领域；然后将它们填充到数组中。给你处理。

我可能误解了你的问题，但我可能会建议*Polymorphism*。**

# opengl - 几何着色器附加基元

> ID：15641340
> 
> 赞同：1
> 
> 时间：2013-03-26T15:45:27.257
> 
> 标签：opengl, glsl, geometry-shader

我想使用 GLSL 几何着色器来查看线条并确定放置纹理注释的位置，同时考虑到当前的 ModelView。似乎我仅限于每次调用只能获得 4 个顶点（使用 GL_LINE_STRIP_ADJACENCY），但我需要的是要评估的整个线带。

我可以使用其他一些原始类型（例如多点，如果在 GL 中有等价物），但重要的一点是我想考虑所有几何图形，而不仅仅是一部分。

是否有一种扩展类型可以为几何着色器提供额外的顶点？或者除了使用几何着色器之外还有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:00:43.960

没有任何机制可以让您访问整个渲染的原始流。基元可以任意大，因此它们可以轻松超过 GPU 具有的任何合理的内部缓冲区大小。因此，实现这一点是不切实际的。

您*可以*将数组绑定为缓冲区纹理，然后从那里读取数据。但这会*非常*慢，因为每个 GS 调用都必须处理数百个顶点。这并没有完全利用 GPU 并行性。

如果您只想在某物附近放置一个文本标签，您应该指定一个顶点或某物作为注释应该去的地方。

# xml - 我的 AS3 没有从导入的 XML 中读取换行符（/n 或 \n）

> ID：15641341
> 
> 赞同：2
> 
> 时间：2013-03-26T15:45:27.553
> 
> 标签：xml, actionscript-3

我开始使用数组变量中的字符串创建一个包含多个图像/链接的横幅，但随着我们的进展，我想将 XML 添加到组合中，以便我们可以更有效地更新它。

当用户将鼠标悬停在横幅上的图像上时，此文本会出现在工具提示中。它在数组变量中工作得很好，但是当从 XML 中提取时，它会显示 \n、\n、/n、\r\n 以及我能找到尝试的所有其他内容。A`</br>`给我一个错误。我尝试过 .toString()，找到了 ignoreProcessingInstructions 属性并尝试将其关闭。根本不值一提。有什么我没有看到的非常简单的东西吗？

所以这是有效的：从我的 AS3 Array 变量中：`"Working with Alerts\nand Notifications" //this works fine`

来自我的 XML：`Working with Alerts\nand Notifications //this returns everything inside of the tags, including the \n.`

将文本输入到`tip: tip.tipTitleField.text = titleText[refNum].toString(); //has been tried without .toString() and with .toString() inside of the [], but it always returns the same... correct string, just with the \n plainly visible.`

谢谢你的任何建议，克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:16:15.040

尝试 ：

```
titleText[refNum].replace(/\\n/g,'\n'); 
```

或者

```
titleText[refNum].split("\\n").join("\n"); 
```

我对来自 php 的字符串没有在 Flex 中显示新行有同样的[问题，也许它有帮助。](https://stackoverflow.com/questions/6448510/how-to-use-line-breaks-in-flex-with-php-string)

# python - 在 Python3 中比较哈希位的最快方法是什么？

> ID：15641342
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:33.020
> 
> 标签：python, hash, python-3.x, binary, hashlib

我正在寻找比较 Python3 中的哈希位，作为 Hashcash 系统的一部分。例如，我想知道 SHA256 哈希的前 N ​​位是否为 0。

现在，我正在根据十六进制版本执行此操作

```
 if newhash.hexdigest()[0:4] == '0000' 
```

但这并不能让我像我想要的那样精细——我更愿意比较原始位，这让我可以更接近地改变匹配 0 的数量。

我通过复杂的跃点得到要比较的位值

```
 bin(int(h.hexdigest(), 16))[2:] 
```

但这似乎不可能是最快/正确的方法。

对于正确/正确的方法，我将不胜感激；）

谢谢，

-CPD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:35:27.707

要检查数字的选定位是否为零，您需要使用预先计算的*掩码*设置所有这些位的数字，并将结果与​​零进行比较[*。*](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/bitande.htm)检查-bit 数字的第一位的掩码是由1和二进制 0 组成的数字。*`n``m``n``m - n`*

 *```
def mask(n, m):
    return ((1 << n) - 1) << (m - n)

def test_0bits(digest_bytes, n_bits):
    m = 8 * len(digest_bytes)
    digest_num = int.from_bytes(digest_bytes, 'big')
    return digest_num & mask(n_bits, m) == 0

>>> test_0bits(b'\123\456', 3)  # 001 010 011 100 101 110
False
>>> test_0bits(b'\023\456', 3)  # 000 010 011 100 101 110
True 
```

如果您继续`test_bits`使用相同的位数调用，您可以预先计算掩码并将其存储为模块级“常量”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:07:28.757

您可以像这样解压缩摘要的前 8 个字节：

```
bin(struct.unpack('>Q', h.digest()[:8])[0]) 
```

但我不确定它是否更快，并且对其余部分不方便。在 Python 中进行位旋转并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:11:05.697

如果您可以从右侧处理索引位，则[gmpy2](https://code.google.com/p/gmpy/)中的整数类型支持切片以访问各个位：

```
>>> x=gmpy2.mpz(12345)
>>> x.digits(2)
'11000000111001'
>>> x[2:5].digits(2)
'110' 
```

如果您需要修改单个位，gmpy2 包含一个可变整数类型，允许您就地修改位。

免责声明：我维护 gmpy2。*

# vb.net - 如何恢复为在 OwnerDraw 组合框中以默认方式绘制组合框编辑区域？

> ID：15641343
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:34.047
> 
> 标签：vb.net, winforms, combobox

我有一个派生类`ComboBox`并覆盖了`OnDrawItem`自定义绘制下拉列表项。如何使组合框的编辑部分（关闭下拉菜单时显示的部分或打开下拉菜单时显示在顶部的部分）继续以默认`ComboBox`工作方式绘制？是否有某种方法可以调用基本`ComboBox`功能来绘制编辑区域部分，或者在 OwnerDraw 模式下不可用？如果不可用，如何模拟`DropDown`和`DropDownList`样式的编辑区域部分的外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:56:55.507

`DrawItemEventArgs`传递的 as为`e`您提供了一些可以使用的工具。要复制系统在`OwnerDraw`模式下为您绘制的内容，您可以执行以下操作：

```
Public Class MyComboBox
    Inherits System.Windows.Forms.ComboBox

    Private _font As Font = New Font(FontFamily.GenericSansSerif, 9.0, _
                                                    FontStyle.Regular)

    Protected Overrides Sub OnDrawItem(e As DrawItemEventArgs)
        e.DrawBackground()
        If e.Index = -1 Then Exit Sub
        e.Graphics.DrawString(Me.Items(e.Index).ToString, _font, _
                              System.Drawing.Brushes.Black, _
                              New RectangleF(e.Bounds.X, e.Bounds.Y, _
                              e.Bounds.Width, e.Bounds.Height))
        e.DrawFocusRectangle()
    End Sub
End Class 
```

**编辑 ：**

如果您要更改显示项目与下拉区域中绘制的项目的绘图行为，您可以根据`DroppedDown`属性分支绘图代码：

```
 e.DrawBackground()
 If e.Index = -1 Then Exit Sub

 If Not Me.DroppedDown Then
     e.Graphics.DrawString(Me.Items(e.Index).ToString, _font, 
                           System.Drawing.Brushes.Black, _
                           New RectangleF(e.Bounds.X, e.Bounds.Y, _
                           e.Bounds.Width, e.Bounds.Height))

 Else
     ' do whatever you want - draw something else
     Dim rectangle As Rectangle = New Rectangle(2, e.Bounds.Top + 2, _
                                 e.Bounds.Height, e.Bounds.Height - 4)
        e.Graphics.FillRectangle(Brushes.Blue, rectangle)
        e.Graphics.DrawString("foo...I'm item #" & e.Index, _font, _
                              System.Drawing.Brushes.Black, _
                              New RectangleF(e.Bounds.X + rectangle.Width, _
                              e.Bounds.Y, e.Bounds.Width, e.Bounds.Height))
 End If

 e.DrawFocusRectangle() 
```

同样，您可以基于`If Me.DropDownStyle = ComboBoxStyle.DropDownList ...`等进行分支。以您喜欢的任何方式处理每个案例。如果您想要由操作系统绘制的组件提供的渐变、主题元素或其他功能，那么您必须自己绘制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:36:33.867

这个问题实际上涉及两个问题。

1.  为了确定在组合框的编辑区域中显示哪些数据，请使用 OnDrawItem 事件中事件参数的 State 属性，如下所示：

    ```
    Protected Overrides Sub OnDrawItem(e As DrawItemEventArgs)
        ' Draw the background of the item.
        e.DrawBackground()

        ' Skip doing anything else if the item doesn't exist.
        If e.Index = -1 Then Exit Sub

        If (e.State And DrawItemState.ComboBoxEdit) = DrawItemState.ComboBoxEdit Then
            ' Draw the contents of the edit area of the combo box.
        Else
            ' Draw the contents of an item in the drop down list.

            ' Draw the focus rectangle.
            e.DrawFocusRectangle()
        End If
    End Sub 
    ```

2.  OwnerDraw 模式不会应用系统正在使用的任何视觉样式主题，例如在按钮面上显示下拉箭头，在 DropDownList 样式中将编辑区域更改为具有按钮面等。所有这些都必须由提交 OnPaint 事件处理程序。 [这个问题](https://stackoverflow.com/q/2891981/72873)意味着 .NET 框架中没有现成的方法调用来使用组合框视觉样式，但可能有解决方法，或者您可以手动编程样式的实现。

# python - Python 内存消耗：dict VS 元组列表

> ID：15641344
> 
> 赞同：29
> 
> 时间：2013-03-26T15:45:36.663
> 
> 标签：python, list, dictionary, memory, tuples

有很多关于不同 python 数据类型的内存消耗的问题和讨论。然而，他们中很少有人（如果有的话）遇到非常具体的情况。当您想在内存中存储大量键值数据时，哪种数据结构更节省内存，字典还是元组列表？

一开始我认为 dict 比元组列表更强大，而且这种能力必须付出一些代价，实际上空 dict 确实比空列表或元组占用更多内存（请参阅[Python 结构的内存大小](https://stackoverflow.com/questions/1331471/in-memory-size-of-python-stucture)），所以我认为 using`[(key1, value1), (key2, value2), ...]`会比`{key1: value1, key2: value2, ...}`.

看来我错了。只需启动以下代码片段，然后查看您的操作系统报告的内存消耗。我正在使用 Windows XP，因此任务管理器告诉我，一个大字典“只”吃掉了 40MB 内存和 40MB 虚拟内存，但元组列表吃掉了 60MB 内存和 60MB 虚拟内存。

怎么可能？

```
from sys import getsizeof as g
raw_input('ready, press ENTER')
i = 1000000
#p = [(x, x) for x in xrange(i)] # Will print 4,348,736 40,348,736
p = dict((x, x) for x in xrange(i)) # Will print 25,165,964 37,165,964
print g(p), g(p) + sum(g(x) for x in p)
raw_input("Check your process's memory consumption now, press ENTER to exit") 
```

**更新：**

感谢下面的一些评论。我想澄清一下：我说的是内存效率。不，在这种情况下无需担心键值查找效率，让我们假设我的算法将通过迭代器一一消耗它们。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-26T15:50:53.460

你`list`的`tuple`s 增加了一个额外的层。您有*3*层项目：

*   长度为100万的外部列表，所以100万个指针
    *   100 万个 2 槽元组，所以 200 万个指针
        *   200 万个对 100 万个整数值的引用

而你`dict`唯一的持有：

*   带有 200 万个指针的字典（包括 100 万个缓存哈希）+ 用于增长表的额外空间
    *   200 万个对 100 万个整数值的引用

正是这 100 万个元组加上保存对它们的引用的列表比 100 万个缓存散列占用更多的内存。这里涉及的指针多出 50%，很容易说明您看到的内存使用量增加了 50%。

您的元组列表还有另一个缺点：查找时间。要在 dict 中找到匹配的键，需要 O(1) 复杂度成本。要在元组列表中执行相同操作，您必须潜在地扫描整个列表以获得 O(n) 成本。如果您需要将键映射到值，请不要使用元组列表。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-26T17:24:04.400

在这种情况下，您实际上得到的内存使用情况并不完整。字典的总大小不规则地增加一倍以上，如果在字典大小增加后立即比较这两个结构的大小，它会再次变大。一个带有递归大小函数的简单脚本（见下面的代码）显示了一个非常清晰的模式：

```
i:  2  list size:  296  dict size:  328  difference:  -32
i:  3  list size:  392  dict size:  352  difference:  40
i:  4  list size:  488  dict size:  376  difference:  112
i:  5  list size:  616  dict size:  400  difference:  216
i:  7  list size:  808  dict size:  1216  difference:  -408
i:  10  list size:  1160  dict size:  1288  difference:  -128
i:  13  list size:  1448  dict size:  1360  difference:  88
i:  17  list size:  1904  dict size:  1456  difference:  448
i:  23  list size:  2480  dict size:  3904  difference:  -1424
i:  31  list size:  3328  dict size:  4096  difference:  -768
i:  42  list size:  4472  dict size:  4360  difference:  112
i:  56  list size:  5912  dict size:  4696  difference:  1216
i:  74  list size:  7880  dict size:  5128  difference:  2752
i:  100  list size:  10520  dict size:  14968  difference:  -4448
i:  133  list size:  14024  dict size:  15760  difference:  -1736
i:  177  list size:  18672  dict size:  16816  difference:  1856 
```

这种模式随着`i`增长而继续存在。（您可以使用您的方法对此进行测试——尝试设置`i`near `2636744`。此时字典的大小更大，至少对我而言。）[Martijn](https://stackoverflow.com/a/15641471/577088)是正确的，元组列表中的元组增加了内存开销，抵消了列表相对于字典的内存优势。但平均而言，结果并不是字典更好，而是字​​典更好。就是字典差不多。所以回答你原来的问题：

> 当您想在内存中存储大量键值数据时，哪种数据结构更节省内存，字典还是元组列表？

如果您只关心内存，这并不重要。

*但是*，请注意，迭代字典通常比迭代列表慢一些，因为没有好的方法可以避免迭代字典中的所有空箱。所以有一点折衷——字典在随机键查找时（快得多），但列表在迭代时（有点）快。大多数时候字典可能会更好，但在极少数情况下，列表可能会提供微优化。

* * *

这是测试大小的代码。它可能不会为所有极端情况生成正确的结果，但它应该可以毫无问题地处理像这样的简单结构。（但如果您发现任何问题，请告诉我。）

```
import sys, collections, itertools, math

def totalsize(x):
    seen = set()
    return ts_rec(x, seen)

def ts_rec(x, seen):
    if id(x) in seen:
        return 0
    else:
        seen.add(id(x))

    x_size = sys.getsizeof(x)
    if isinstance(x, collections.Mapping):
        kv_chain = itertools.chain.from_iterable(x.iteritems())
        return x_size + sum(ts_rec(i, seen) for i in kv_chain)
    elif isinstance(x, collections.Sequence):
        return x_size + sum(ts_rec(i, seen) for i in x)
    else:
        return x_size

for i in (10 ** (e / 8.0) for e in range(3, 19)):
    i = int(i)
    lsize = totalsize([(x, x) for x in xrange(i)])
    dsize = totalsize(dict((x, x) for x in xrange(i)))

    print "i: ", i,
    print " list size: ", lsize, " dict size: ", dsize,
    print " difference: ", lsize - dsize 
```

# cygwin - 在 Windows 下的 Cygwin 中定义别名

> ID：15641346
> 
> 赞同：16
> 
> 时间：2013-03-26T15:45:39.397
> 
> 标签：cygwin

我正在尝试在 cygwin 中定义一些别名，但没有成功。我在文件末尾这样做`.bashrc`。

```
alias foo='pwd' 
```

我试图在cygwin 文件夹和我所在的 Windows 用户的主文件夹中的`.bashrc`文件中添加这一行。在这两种情况下，我都只是将这一行附加到文件的副本中。在这两种情况下，它都不起作用。`home``C:\Users\Nuno\``/etc/skel/.bashrc`

我以前有这个工作。我不得不重新安装 Cygwin，因为它再也不能正常工作了。我已经删除了所有文件（或者至少在重新安装时是这样认为的）。我还注意到，在第一次安装时（当它工作时），cygwin 已经在`home`文件夹中创建了 .bash 文件。现在，它没有。

我在运行 Windows 7 的机器上。

**编辑**： 我的 cygwin 主文件夹设置为 Windows 主文件夹`C:\Users\Nuno\`。我已将我认为有效的`.bashrc`文件放在那里，但它仍然不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T22:03:25.977

正如我已经解释的那样，我只想添加一个解决方法，如果您出于某种原因无法或不愿意删除 Windows 的 HOME 环境变量。

通常 Cygwin 的快捷方式执行

```
C:\cygwin\bin\mintty.exe -i /Cygwin-Terminal.ico - 
```

相反，您可以创建一个包含以下内容的批处理文件并启动它：

```
@echo off
set HOME=
start C:\cygwin\bin\mintty.exe -i /Cygwin-Terminal.ico - 
```

这将启动一个 Cygwin 窗口，其主目录设置不会被 Windows 环境变量覆盖。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T20:48:57.410

您的`.bashrc`文件将从 Cygwin Bash 启动时认为您的主目录所在的任何位置加载。您在编辑中提到您已经更改了主目录，但没有提到如何更改，因此您可能在那里犯了错误。

Cygwin 将从两个位置之一加载您的主目录，如果它们不同，则可能会导致问题：

*   `HOME`环境变量。这将在您启动 Cygwin 时获取，因此通常从 Windows 本身获取。`Win`您可以通过按+来查看您定义的环境变量`Pause`，转到“高级系统设置”、“环境变量...”。如果“HOME”在“用户变量”或“系统变量”中，请将其删除——这是不必要的，只会导致问题。

*   Cygwin 的`/etc/passwd`文件（通常`C:\Cygwin\etc\passwd`来自 Windows）。这将有许多行包含系统上每个用户的详细信息；第七个`:`分隔字段是主目录。`whoami`您可以通过从 Cygwin bash shell运行来判断它正在查看哪个用户。

如果`whoami`reports `nunos`，您应该在 Cygwin 中有一行`/etc/passwd`如下所示：

```
nunos:unused:1001:513:U-System\nunos:S-1-2-34-567890-123456-7890123-1001:/home/nunos:/bin/bash 
```

这`/home/nunos`很重要；如果它有所不同，您可能应该将其重置为那个，此时您想使用`.bashrc`Cygwin 中的`/home/nunos/`.

您还应该非常小心包含空格的目录。`C:\Users\nunos` *应该*没问题，但要特别注意`C:\Documents and Settings\nunos`，它不适用于 Cygwin。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-05T12:29:00.810

我有同样的问题，添加到 ~/.bashrc 的别名不起作用。似乎由于某种原因，启动控制台时没有执行 ~/.bashrc。

我偶然发现了一个解决问题的[回应](http://cygwin.com/ml/cygwin/2005-07/msg01063.html)

因此，您需要创建一个 .bash_profile 文件。这个好像是默认脚本，把这段代码放进去，保证.bashrc被执行。

```
# ~/.bash_profile: executed by bash for login shells.

if [ -e /etc/bash.bashrc ] ; then
 source /etc/bash.bashrc
fi

if [ -e ~/.bashrc ] ; then
 source ~/.bashrc
fi 
```

这对我有用，只要确保 .bash_profile 是可执行的。(chmod +x ~/.bash_profile)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-15T02:58:10.940

这是一种非常快速而肮脏的方法，但它适用于*大多数*事情！

假设您想始终运行“ls --color”而不仅仅是“ls”。您可以创建一个简单的 .bat 文件，该文件基本上盗版了原始的 ls 命令，而不是搞乱 .bashrc 的东西。

这是我所做的：

```
cd /bin
echo ls2.exe %* --color > lsNew.bat
mv ls.exe ls2.exe
mv lsNew.bat ls.bat 
```

所以现在，每当你从 CMD 输入 ls 时，你实际上是在调用 ls.bat，而后者又调用 ls2.exe --color，带有 --color 标志的原始 ls 命令，以及其余的参数，很好地通过了 %*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T06:01:17.220

我有同样的问题，但我使用 ConEmu 来运行我的控制台。我不得不进入设置并从此更改设置：

> 设置 CHERE_INVOKING=1 & %ConEmuDrive%\Programs\Cygwin\bin\sh.exe --login -i -new_console:C:"%ConEmuDrive%\Programs\Cygwin\Cygwin.ico"

对此：

> 设置 HOME= & 设置 CHERE_INVOKING=1 & %ConEmuDrive%\Programs\Cygwin\bin\bash.exe --login -i -new_console:C:"%ConEmuDrive%\Programs\Cygwin\Cygwin.ico"

然后它将正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-08T06:41:18.167

它按照 cygwin 的解释工作：

在您的 Windows 主目录中创建一个文件“.profile”。每次启动 cygwin 时都会加载。

您可以使用别名编辑文件，也可以获取 .bashrc。

如果您要获取源代码，请插入“source .bashrc”并将 .bashrc 也保存在您的 Windows 主目录中。现在您可以开始编辑 .bashrc。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-17T10:14:29.123

这对我有用 在带有 Cygwin64 的 Windows 10 上。不要担心“kubectl”只是我输入“k”时想要运行的程序。更改后重新启动 Cygwin 终端。

Smith@NB-Smith-3 ~ echo "alias k=C:/Users/Smith/kube/kubectl" >> $HOME/.bash_profile

更改此文件 C:\cygwin64\home\Smith.bash_profile

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-03T19:50:08.687

我有同样的问题是为什么路径不正确，正确的路径是： D:\C++\cygwin\home\USER_WINDOWS.bash_profile

# c# - 在面板中滚动图像

> ID：15641347
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:42.053
> 
> 标签：c#, winforms, visual-studio

我在 flowLayoutPanel 中加载了多个图像……如果需要，我想滚动面板。

这是我的代码：

```
 private void carregarImagensToolStripMenuItem_Click(object sender, EventArgs e)
    {
        OpenFileDialog d = new OpenFileDialog();

        // allow multiple selection
        d.Multiselect = true;

        // filter the desired file types
        d.Filter = "JPG |*.jpg|PNG|*.png|BMP|*.bmp";

        // show the dialog and check if the selection was made

        if (d.ShowDialog() == DialogResult.OK)
        {
            foreach (string image in d.FileNames)
            {
                // create a new control
                PictureBox pb = new PictureBox();

                pb.Tag = tag;
                btn.Tag = tag;
                pb.MouseDown += pictureBox_MouseDown;
                // assign the image
                pb.Image = new Bitmap(image);

                listaImagens.Add(new Bitmap(image));

                // stretch the image
                pb.SizeMode = PictureBoxSizeMode.StretchImage;

                // set the size of the picture box
                pb.Height = pb.Image.Height / 10;
                pb.Width = pb.Image.Width / 10;

                // add the control to the container
                flowLayoutPanel1.Controls.Add(pb);
                listaPicBoxes.Add(pb);
                tag++;

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:55:42.213

您始终可以使用该`AutoScroll`属性：

```
flowLayoutPanel1.AutoScroll = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:54:43.870

将 FlowLayoutPanel 的 AutoScroll 属性设置为 true

# python - 查询 PyTables 嵌套列

> ID：15641350
> 
> 赞同：3
> 
> 时间：2013-03-26T15:45:44.310
> 
> 标签：python, pytables

我有一个带有嵌套表列的表，路由。下面是另外两种嵌套数据类型，主数据类型和从数据类型，它们都具有整数 id 和字符串类型字段。

我想运行类似 table.readWhere('route/master/id==0') 但我得到**“变量`route`指的是嵌套列，条件不允许”**

有没有一种方法可以查询 pytables 中的嵌套数据类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-31T14:18:47.897

您必须创建要在条件字符串中使用的变量。一种选择是定义一个变量字典：

```
table.readWhere('rId==0', condvars={'rId': table.cols.route.master.id}) 
```

另一种选择是为要在条件中使用的列定义局部变量。

```
rId = table.cols.route.master.id
table.readWhere('rId==0') 
```

由于这会污染命名空间，我建议您创建一个函数来包装代码。我试图引用列本身，但似乎解释器在抛出 NameError 之前获取了整个数据集。

```
table.readWhere('table.cols.route.master.id==0') # DOES NOT WORK 
```

[有关库参考](http://pytables.github.io/usersguide/libref.html#tables.Table.where)中 where() 方法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T02:12:14.247

基于[streeto](https://stackoverflow.com/a/16859518/2868731)的答案，这是在构建查询时访问表中所有嵌套列的快速方法

```
condvars = {k.replace('/', '__'): v for k, v in table.colinstances.items()}
result = table.read_where('route__master__id == 0', condvars=condvars) 
```

`table.colinstances`返回一个平面 dict，其键是表中所有列（包括嵌套列）的斜线分隔路径，其值是位于该路径的 PyTables Col 类的实例。您不能在查询中使用斜杠分隔路径，但如果您替换为 Python 标识符中允许的其他分隔符（在本例中，我选择了双下划线），那么一切正常。如果您愿意，可以选择其他分隔符。

# android - Eclipse 看不到我的 Toshiba Folio 100 Android 2.2 平板电脑

> ID：15641351
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:46.473
> 
> 标签：android, eclipse, deployment

在 a) 厌倦了模拟器的缓慢和 b) 我的第一个 android 应用程序的开发接近尾声后，我决定将我被遗忘的旧 Toshiba Folio 100 android 2.2 平板电脑连接到我的 Windows 7 开发 PC，以便部署我的安卓应用。PC 和平板电脑相互“看到”，也就是说，PC 将平板电脑视为磁盘驱动器。在android设置中，我打开了开发者模式。我通读了该站点上有关将应用程序部署到真实设备的许多建议线程。首先，在windows资源管理器，电脑，右键，管理，除了东芝存储USB设备外，并不会导致平板识别。

在 Eclipse 中，我转到运行配置、目标选项卡，尝试了所有不同的单选按钮设置，但无济于事。设备视图，同样的故事。Eclipse 看不到平板电脑。我还尝试了一些旧的 Archos 48 迷你平板电脑，同样没有。

我能做些什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:47:49.883

你认为它是一个安卓设备吗？打开命令提示符并键入“adb devices”确保您的平板电脑在此处列出，否则您需要为它找到一些 adb 驱动程序，您可能想尝试通用 adb usb 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:27:16.217

如果您在资源管理器中看到该设备列为磁盘驱动器，则可能意味着您的设备上的 USB 模式错误。在不同的设备上它被称为不同的东西，但在许多设备上它被称为“仅充电”模式（或非大容量存储模式）。还要确保在设备上启用了 USB 调试。

# jquery - 如何根据元素的内容使用 Jquery 更改元素

> ID：15641354
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:52.720
> 
> 标签：jquery, html, show-hide

我有一个简单的跨度，里面有一个数字：

```
<span id="MessageLabel">@Model.MessageCount</span> 
```

如果值为0，如何隐藏数字，如果值大于0，如何显示数字？

这是我到目前为止所拥有的：

```
function loadMessageCount() {

    $('#MessageLabel')

        if ($(item.val()) <= 0) {
             $('#MessageLabel').hide();
        } 
} 
```

我可能还需要通过 ajax 执行此操作，因为每次该数字更改时页面都不会加载。是否也可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:47:41.337

你很接近：

```
function loadMessageCount() {    
    var item = $('#MessageLabel')    
        if (parseInt(item.text()) <= 0) {
             item.hide();
        } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:49:05.427

您首先要分配`$('#MessageLabel')`给名为的变量`item`：

```
var item = $('#MessageLabel'); 
```

[`spans`没有`values`](http://www.w3.org/TR/html5/text-level-semantics.html#the-span-element)。`.val()`用于拉取值。在这里你想使用`.text()`：

```
...
if (item.text() <= 0) { ... } 
```

您首先要确保这是一个整数，但是，使用`parseInt()`：

```
...
if (parseInt(item.text()) <= 0) { ... } 
```

您可能想查看官方 jQuery 教程：[http](http://try.jquery.com) ://try.jquery.com :-)

> 如果数字大于 1，如何将文本的颜色更改为红色？

```
if (parseInt(item.text()) > 1) {
    $(this).css({
        'color': '#f00';
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:51:05.717

你可以做 ：

```
if(parseInt($('#MessageLabel').text()) > 0)
{
    $('#MessageLabel').show()
}
else
{
    $('#MessageLabel').hide();
} 
```

# iphone - 任何 iOS 块的标识

> ID：15641356
> 
> 赞同：0
> 
> 时间：2013-03-26T15:45:58.297
> 
> 标签：iphone, ios, objective-c

在 iOS 中，我们可以使用 void*、id 或 NSObject* 来表示任何对象实例。

有没有办法表示任何 ios 块？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:52:42.707

块是 Objective-C 对象，所以`id`可以使用。

```
 void(^block)(void) = ^{ NSLog(@"Hello, world!"); };
    id foo = block; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:55:29.260

来自 Apple 的参考：“您可以将块引用转换为任意类型的指针，反之亦然。” 因此您也可以将块转换为类型`id`。

来源：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW1](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW1)

# java - JPA 子查询在 SQL 查询中两次生成 ID

> ID：15641361
> 
> 赞同：0
> 
> 时间：2013-03-26T15:46:14.673
> 
> 标签：java, jpa, subquery, criteria-api

我在使用 JPA CriteriaQuery 进行复合选择时遇到问题。我有三个表 X->Y->Z ，每个 XI 有一个或多个 Y ，每个 YI 有一个或多个 Z 。我有一个 X 对象，我试图为一个 X 选择所有出现的 Z 。

我正在使用的代码：

> ```
>  CriteriaBuilder cb = em.getCriteriaBuilder();
>   CriteriaQuery<Z> criteriaQuery = cb
>           .createQuery(Z.class);      
>   Root<Z> fromZ = criteriaQuery.from(Z.class);
> 
>   X xObj = new X(xObjId);
> 
>   Subquery<Y> subquery = criteriaQuery.subquery(Y.class);
>   Root<Y> fromY = subquery.from(Y.class);
>   subquery.select(fromY.<Y> get("Yid")).distinct(true)
>           .where(cb.equal(fromY.get("Xid"), xObj));
> 
>   criteriaQuery
>           .select(fromZ)
>           .where(cb.and(
>                   cb.in(from.get("Yid")).value(subquery),
>                   cb.and(cb.equal(from.get("Zcolumn1"), 0),
>                           cb.equal(from.get("Zcolumn2"), 1))))
>           .orderBy(cb.asc(from.get("Zcolumn3")));
> 
>   TypedQuery<Z> typedQuery = em.createQuery(criteriaQuery);
>   List<Z> results = typedQuery.getResultList(); 
> ```

Xid 和 Yid 是它们各自 Y 和 Z bean 中的外键。

此代码在执行点生成错误，因为我有无效的 SQL：

> SELECT t0.Zcolumn1, t0.Zcolumn2, t0.Zcolumn3, FROM Z t0 WHERE (t0.Yid IN (SELECT **t1.Yid.t1.Yid** FROM Y t1 WHERE (t1.Xid = ?)) AND ((t0.Zcolumn1 = ?) AND (t0.Zcolumn2 = ?))) 按 t0.Zcolumn3 ASC 排序

我不明白为什么子查询会生成 Yid 两次，并且不知道如何修复它，根据我找到并改编的示例，我认为这应该可行。这是我第一次使用 SubQuery，所以请原谅我的代码风格可能出现的愚蠢错误 :)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:29:45.207

我不确定你为什么要使用 subQuery 。

这种更简单的方法将为您提供链接到给定 X 实例的 Z 的所有发生。我稍微更改了字段命名：分别是 X`ysCollection`和`zsCollection`Y 中的 OneToMany 属性，如下所示：

```
@Entity
public class X {
    ...
    @OneToMany(mappedBy="xId")
    private List<Y> ysCollection;
    ...
} 
```

如果我误解了您的目标，请告诉我：

```
X xObj;
CriteriaQuery<Z> cq = cb.createQuery(Z.class);
Root<X> root = cq.from(X.class);
Join<X, Y> ys = root.join("ysCollection");
Join<Y, Z> zs= ys.join("zsCollection");
cq.distinct(true);
cq.where(cb.equal(root.get("id"), xObj.getId()));
cq.select(zs); 
```

或者，使用元模型：

```
X xObj;
CriteriaQuery<Z> cq = cb.createQuery(Z.class);
Root<X> root = cq.from(X.class);
Join<X, Y> ys = root.join(X_.ysCollection);
Join<Y, Z> zs= ys.join(Y_.zsCollection);
cq.distinct(true);
cq.where(cb.equal(root.get(X_.id), xObj.getId()));
cq.select(zs); 
```

# sql - 从两个不同的表中选择数据

> ID：15641362
> 
> 赞同：1
> 
> 时间：2013-03-26T15:46:17.610
> 
> 标签：sql, select, count

我正在使用 SQL，需要选择 idR 并计算该 idR 中有多少成分。

我该怎么做呢？

*   食谱 = ( `idR, recipeTitle, prepText, cuisineType, mealType`)
*   成分 = ( `idI, ingrDesc`)
*   接收方 = ( `idR*, idI*`)

这是我尝试过的

```
SELECT 
    RECIPE.idR
FROM 
    (SELECT COUNT(*)
     FROM INGREDIENT 
     GROUP BY INGREDIENT.idI
     ORDER BY idI.id DESC) 
```

但我只是想计算每个 idR 中有多少成分。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:48:34.157

如果我了解您的架构，

```
SELECT idR, count(*)
FROM RecipIngr
GROUP BY idR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:49:50.363

RecipIngr 是向您显示每个 idR 所需成分列表的工具？代码是

```
SELECT idR, count(*)
FROM RecipIngr
GROUP BY idR 
```

编辑：我之前误解了，但现在应该可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:48:25.343

如果您只对关联表感兴趣，请仅使用关联表`IDR`

```
SELECT  iDR, COUNT(*) totalIngredients
FROM    RecipIngr
GROUP   BY iDR 
```

但如果你想得到`TITLE`

```
SELECT  a.iDR, a.Title,
        COUNT(*) totalIngredients
FROM    Recipe a
        INNER JOIN RecipIngr b
            ON a.idr = b.idr
GROUP   BY a.iDR, a.Title 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:48:47.173

```
SELECT RG.IDR, COUNT(RG.IDR)
FROM Recipingr RG
GROUP BY RG.IDR 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T15:51:10.867

如果我理解您的查询，您可以试试这个：

```
select recipe.idr, count(ingredient.idi)
from ingredient, recipe, recipingr
where ingredient.idr=recipingr.idr
and recipingr.idi=ingredient.idi
group by recipe.idr 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T15:58:41.810

```
SELECT *,INGREDIENT.INGREDIENT_Count 
FROM RECIPE INNER JOIN (SELECT idR,COUNT(*) INGREDIENT_Count  
                        FROM RecipIngr 
                        GROUP BY idR) INGREDIENT ON INGREDIENT.idR RECIPE.idR 
```

使用此查询，您可以获得每个食谱的成分计数。

# php - niftyplayer 没有在 Facebook 上加载

> ID：15641376
> 
> 赞同：0
> 
> 时间：2013-03-26T15:46:58.040
> 
> 标签：php, facebook

我正在尝试通过 niftyplayer 在 facebook 上分享歌曲。这是我的开放图形代码。

```
<meta property="og:image" content="IMAGE_LINK" />
    <meta property="fb:app_id" content="XXXXXXXXXXXXXXXXX">
    <meta property="og:title" content="<?= $songs['title']; ?>">
    <meta property="og:description" content="<?= $songs['description'] ?>">
    <meta property="og:type" content="video">
    <meta property="og:site_name" content="<?= $song['name'] ?> - <?= SITE_NAME ?>">
    <meta property="og:video:type" content="application/x-shockwave-flash">
    <meta property="og:video" content="http://<?=  S3_BUCKET; ?>/niftyplayer/niftyplayer.swf?file=<?= 'http://' . S3_BUCKET  . '/music/'. $songs['link'] . '&as=0'; ?>">
    <meta property="og:video:width" content="300">
    <meta property="og:video:height" content="75"> 
```

我使用了 facebook 调试器，一切看起来都很好。但事实并非如此。它甚至没有加载图像或播放器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:49:00.517

我发现了问题。由于某种原因，它是 app_id，facebook 不喜欢 app_id，我必须删除它才能使播放器正常工作。谢谢。

# iphone - iPhone上的假DOS提示符？

> ID：15641380
> 
> 赞同：-2
> 
> 时间：2013-03-26T15:47:13.230
> 
> 标签：iphone, ios, cocoa-touch

我正在一个 iPhone 应用程序中制作一个复活节彩蛋——让它看起来像是手机已经崩溃并在 DOS 中重新启动。

如何创建一个纯文本显示，并在小延迟后出现新行（即，使其看起来像“计算机”正在重新启动、打印“BIOS”消息等）？

我认为将某种文本或标签小部件设置为等宽字体可能是可能的？并在定期延迟后附加文本？

有没有办法伪造块光标？那个闪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:50:52.120

由于 iPhone 上没有“纯文本”模式，您几乎需要手动绘制所有内容。最简单的解决方案是在您最喜欢的图形编辑器中绘制所有内容，然后将一系列图像作为动画播放：首先，只有一个提示的图像，几秒钟后，一个带有提示和一些文本的图像，然后是一些更多的文字，等等。播放哔哔声会增加它的一般兴奋。

就闪烁光标而言，您可以`CALayer`为其使用动画：制作一个白色小矩形的图像，将其`CALayer`与文本一起放在图像顶部，然后在“是”和“是”之间为其“可见性”属性设置动画短计时器上的“否”，“重复”标志设置为“是”。

# actionscript-3 - Box2D 闪存 FPS 和性能

> ID：15641383
> 
> 赞同：1
> 
> 时间：2013-03-26T15:47:35.763
> 
> 标签：actionscript-3, box2d, frame-rate

我在 AS3 上写了一些代码，它使用`Starling`和`Box2D flash`. 我创建的对象不超过 15 个，只有 6 个可移动的和 4 个关节。在 iPhone4 上运行时，我无法获得超过 30 FPS。当物体进入睡眠状态时，FPS 会上升到 60。甚至有可能从 FPS 中获得超过 30 的帧数`Box2D flash`吗？也许对迭代和时间步长参数进行一些调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:04:40.793

降低函数中的`velocityIterations`和`positionIterations`的数量`world.Step(..)`将直接影响您的帧速率，我已经分别使用了 3 和 5。您是否将任何身体设置为子弹？

# macos - 在 Mac 上将 Fortran 编译为 mex

> ID：15641385
> 
> 赞同：0
> 
> 时间：2013-03-26T15:47:40.773
> 
> 标签：macos, matlab, fortran

我最近不得不回到一个老问题：编译一个 fortran 脚本以在 Mac 上的 Matlab 下运行。我已经设法将示例 c 文件编译为 mex，但 Fortran 文件拒绝，除非我使用 -c 并且我想要的对象 kt3d.for 抛出了一个有趣的完整列表，但都链接到同一个错误（我猜） .

我正在使用 XCode 4.6.1 在 OSX 10.7.5 上运行 Matlab R2011b。

我已经根据[http://www.mathworks.se/support/solutions/en/data/1-FR6LXJ/修补了 Matlab](http://www.mathworks.se/support/solutions/en/data/1-FR6LXJ/)

根据[https://sites.google.com/site/dwhipp/tutorials/mac_compilers运行 Fortran 编译器](https://sites.google.com/site/dwhipp/tutorials/mac_compilers)

我将 mex 文件更改为调用 bash 而不是 sh 但仍然没有乐趣。每次我想运行克里金包时都不得不启动我的旧 XP 机器，所以我真的很想为 OSX 编译这些东西。

下面是错误，它看起来像一个架构问题，但我不知道如何解决它。

```
>> mex kt3d.for
Undefined symbols for architecture x86_64:
  "_chknam_", referenced from:
      _readparm_ in kt3d.o
  "_cova3_", referenced from:
      _kt3d_ in kt3d.o
  "_ktsol_", referenced from:
      _kt3d_ in kt3d.o
  "_mexfunction_", referenced from:
     -exported_symbol[s_list] command line option
  "_picksup_", referenced from:
      _kt3d_ in kt3d.o
  "_setrot_", referenced from:
      _kt3d_ in kt3d.o
  "_setsupr_", referenced from:
      _kt3d_ in kt3d.o
  "_srchsupr_", referenced from:
      _kt3d_ in kt3d.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status

    mex: link of ' "kt3d.mexmaci64"' failed.

Error using mex (line 206)
Unable to complete successfully. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:34.550

我相信这些符号可以在[GSLIB](http://scrf.stanford.edu/resources.software.gslib.php)中找到。假设你已经安装了这个并且你的编译器可以在某个地方找到它，你可能需要在`-lgslib`你的 mex 命令中添加类似“”的东西来让它为你链接库。

# facebook-opengraph - 打开图 Fitness.runs 不返回数据

> ID：15641389
> 
> 赞同：1
> 
> 时间：2013-03-26T15:47:46.910
> 
> 标签：facebook-opengraph, nike

我有一堆 Nike+ 跑步数据，我假设（基于下面的文章）已发布到开放图表。在我的时间线中，它肯定是这样的。

[https://developers.facebook.com/blog/post/2012/08/29/early-success-stories--fitness-and-open-graph/](https://developers.facebook.com/blog/post/2012/08/29/early-success-stories--fitness-and-open-graph/)

令人沮丧的是，虽然我的 music.listens 请求工作正常并返回了我所有的 Spotify 收听，但我对 Fitness.runs 的请求没有返回任何数据。这仅仅是因为耐克没有与 Open Graph 正确集成吗？或者我可能需要在我的 Auth 令牌中请求扩展权限？

[https://developers.facebook.com/docs/reference/opengraph/action-type/fitness.runs](https://developers.facebook.com/docs/reference/opengraph/action-type/fitness.runs)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:07:23.557

与所有操作一样，您需要正确的权限，在这种情况下

`user_actions.fitness`

所以从 /me/fitness.runs 返回的耐克数据看起来像

```
{
  "data": [
    {
      "id": "10101118696330517", 
      "from": {
        "name": "Philippe Harewood", 
        "id": "13608786"
      }, 
      "start_time": "2013-03-22T23:15:56+0000", 
      "end_time": "2013-03-22T23:26:36+0000", 
      "publish_time": "2013-03-24T15:50:00+0000", 
      "application": {
        "name": "Nike", 
        "namespace": "nikeapp", 
        "id": "84697719333"
      }, 
      "data": {
        "course": {
          "id": "476811255725972", 
          "url": "http://nikeplus.nike.com/plus/activity/running/detail/2118587303?external_share_id=CE32E1C4-93D8-48A7-A08F-6D5B4C13EE6A&is_new_meta=true", 
          "type": "fitness.course", 
          "title": "1.12 miles"
        }
      }, 
      "type": "fitness.runs", 
      "no_feed_story": false, 
      "likes": {
        "count": 0, 
        "can_like": true, 
        "user_likes": false
      }, 
      "comments": {
        "count": 0, 
        "can_comment": true, 
        "comment_order": "chronological"
      }
    }, 
    {
      "id": "10101118696155867", 
      "from": {
        "name": "Philippe Harewood", 
        "id": "13608786"
      }, 
      "start_time": "2013-03-19T22:03:32+0000", 
      "end_time": "2013-03-19T22:18:37+0000", 
      "publish_time": "2013-03-24T15:49:46+0000", 
      "application": {
        "name": "Nike", 
        "namespace": "nikeapp", 
        "id": "84697719333"
      }, 
      "data": {
        "course": {
          "id": "502469216483599", 
          "url": "http://nikeplus.nike.com/plus/activity/running/detail/2118587302?external_share_id=EBF6BC1D-BDEA-4EE5-B18D-FBC576610F13&is_new_meta=true", 
          "type": "fitness.course", 
          "title": "1.49 miles"
        }
      }, 
      "type": "fitness.runs", 
      "no_feed_story": false, 
      "likes": {
        "count": 0, 
        "can_like": true, 
        "user_likes": false
      }, 
      "comments": {
        "count": 0, 
        "can_comment": true, 
        "comment_order": "chronological"
      }
    }
  ], 
  "paging": {
    "next": "https://graph.facebook.com/13608786/fitness.runs?limit=25&offset=25&__after_id=10101118696155867"
  }
} 
```

# javascript - 美国地图上的悬停工具提示

> ID：15641392
> 
> 赞同：0
> 
> 时间：2013-03-26T15:47:52.560
> 
> 标签：javascript, html, web, hover, tooltip

我想做一个简单的网站，上面有美国的图片。当用户将鼠标悬停在特定状态上时，我想显示一个工具提示，其中包含有关该状态的信息。

我遇到的主要问题是我希望遵守国家的界限。我不想在状态图像上覆盖隐藏的矩形，而是希望工具提示能够响应***每个状态轮廓***。

最合乎逻辑的方法是什么？我使用的图像类型是否适用于美国（基于位图与基于矢量）？

谢谢您的帮助！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:15:47.933

你有浏览器限制吗？？因为如果你使用 SVG 图像，你可以很容易地检测到哪些状态被 javascript 点击了。但当然，这在旧浏览器中并不完全支持......！

您可以制作 SVG 图像，`Adobe illustrator`例如将图像导出为 SVG，并在 html 中将其作为代码使用（您应该使用文本编辑器打开 svg 图像并复制并粘贴代码），然后您可以从中定义您将使用的区域点击..

最好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:03:33.867

您可以使用 html 标签来映射您的图像，并将每个特定的状态区域定义为一个多边形形状，其中包含一组点来插入状态轮廓。这将是一个非常努力的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:57:18.303

方法 1 - 使用带有常规位图图像（可能是 png）的常规 HTML。使用带有工具提示的图像映射。你可以定义圆形、矩形、多边形等等。它只是简单的 HTML，没有 javascript，但图像是静态的。

方法 2 - 使用 openlayers.org 并使用 gpx / kml 文件或类似文件定义您的区域。这看起来更漂亮，您可以缩放和平移并做各种花哨的事情，包括漂亮的 HTML 弹出窗口，但它需要更多的工作，包括 javascript。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T16:15:27.990

你应该使用[这个解决方案](http://davidlynch.org/projects/maphilight/docs/demo_usa.html)。它已经为你完成了。另请查看[文档](http://davidlynch.org/projects/maphilight/docs/)。

如果你想用鼠标悬停做一些更有趣的事情，你可以使用[qtip2](http://craigsworks.com/projects/qtip2/)，它效果很好。

# authentication - EventSourcing 应用程序中的用户身份验证

> ID：15641393
> 
> 赞同：17
> 
> 时间：2013-03-26T15:47:56.133
> 
> 标签：authentication, authorization, cqrs, event-sourcing

我正在研究使用 DDD+CQRS+EventSourcing 制作应用程序，但在弄清楚如何进行用户身份验证时遇到了一些麻烦。

用户本质上是我领域的一部分，因为他们对客户负责。我正在使用 ASP.NET MVC 4，我希望只使用 SimpleMembership。由于登录和授权用户是一个同步操作，那么在最终一致的架构中如何解决这个问题？

我是否必须推出自己的身份验证系统，在读取端保留非规范化身份验证表？如何处理这个安全性？我最终会在我的事件存储和我的视图表中存储密码哈希吗？

这么多问题，如果有人能解释一下，我将非常感谢:)

tldr; 您如何在 EventSource-applications 中进行用户身份验证？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T18:10:34.070

并非每个“域”或业务组件都必须使用 DDD 或 CQRS。在大多数情况下，用户信息真的很脏，所以你通常不能为此使用 DDD。其他域并不真正依赖于实际用户。通常有一个由各个域共享的相关 ID (UserId)。

如果在您的系统中使用消息传递，一种选择是在没有 CQRS 的情况下注册和管理用户，然后发送命令 (RegisterUser { UserId } )。这将发布一个用户注册的事件。其他域可以收听此事件以启动所需的任何工作流或 AR。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T10:38:34.750

对于我们的 MVC CQRS 应用程序，我们最初将所有与用户相关的信息保存在域中，就像有人提到的那样，有一个 RegisterUserCommand 和一个 UserRegisteredEvent。在将用户信息存储在域中之后，该事件被发布并在读取端获取，这也创建了一个用户并生成了所有密码哈希等。然后我们在读取端进行了身份验证：控制器将创建一个调用“读取模型身份验证服务”进行身份验证。

后来，我们最终完全重构了它。事实证明，我们需要访问用户相关信息来构建安全性以授权我们的命令，这是我们在命令处理端完成的（我们的应用程序是一个分布式应用程序，它向队列发送“即发即弃”异步命令，使用另一边的自主听众）。然后，安全组件需要引用我们的域来获取用户配置文件，这导致了繁琐的引用问题。

我们决定将用户安全内容放入一个单独的数据库中，我们认为该数据库更像是一个中心组件，而不是属于域或读取模型。我们仍然在域中维护用户*配置文件*相关信息并读取模型（例如职位、Twitter 帐户 URL 等），但所有与安全相关的内容，如密码哈希，都存储在这个中央数据库中。然后可以通过服务访问它，该服务对 MVC 和命令授权者都可用。

我们实际上不需要为这个重构更改 UI 中的任何内容，因为我们只是调用了服务来从 register user 命令处理程序中注册用户。如果你打算这样做，你需要在这里小心，使你的用户服务相关的操作是幂等的。这样您就可以让您的命令有机会在没有副作用的情况下重试，因为您正在更新 2 个信息源（ES 和用户数据库）。

最后，您当然可以将成员资格提供程序用于此中心组件，但这样做可能会存在[缺陷](http://brockallen.com/2012/09/02/think-twice-about-using-membershipprovider-and-simplemembership/)。我们最终只写了自己的——这很简单。那篇文章链接到[这个](https://github.com/brockallen/BrockAllen.MembershipReboot)，它提供了一个很好的例子来说明如何实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:57:04.397

您应该考虑创建单独的实体，例如：访问者（刚刚访问您的站点）、用户（注册）、客户（购买了东西）等。尝试以这种方式拆分您的系统，即使它会导致一点数据冗余。磁盘空间不是问题，但独立修改系统不同组件的能力通常非常关键。

人们创建非规范化身份验证表只是为了扩展，并且仅当您的身份验证读取端是性能瓶颈时。如果不是 - 通常的第三范式是一种方法。

在 SimpleMembership 场景中，SimpleMembership 创建的所有表都可以视为“用户”聚合的快照。是的，他们会在您的事件存储中复制一些数据。您可能有以下事件：UserCreated、UserUpdated、UserAssignedToRole 等。

并且不要被该会员提供者的名称所欺骗。它不是那么简单，通常有很多你可以轻松生活的东西（取决于你的领域）。所以，也许你可以使用这样的东西：[https ://gist.github.com/Kayli/fe73769f19fdff40c3a7](https://gist.github.com/Kayli/fe73769f19fdff40c3a7)

# cuda - 常量内存中的 curandState（cuda 随机）

> ID：15641405
> 
> 赞同：0
> 
> 时间：2013-03-26T15:48:20.563
> 
> 标签：cuda, simulation, particles

我对 CUDA 语言还很陌生，我需要对粒子进行模拟，这些粒子在每个时间步都会更新，方法是在它们的位置上添加一个随机值（彼此不同，但遵循相同的分布）。

我的想法是给每个粒子一个不同的 curandState（带有不同的种子），并且在每个时间步简单地做一个 curand(curandState[particle_id])。

我在想我可以将随机状态和粒子 ID 存储在 GPU 上的常量内存中。但是我还没有看到有人在任何地方这样做，这会引起记忆问题吗？这可以加快程序吗？

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:06:20.970

我不认为这是有道理的。 `__constant__`内存是恒定的，不能由运行在 GPU 上的线程直接修改。但是，每次线程生成随机数时都需要修改 curandState（否则，您将一遍又一遍地生成相同的数字）。

给每个粒子自己的状态并没有错。这将是这种情况的典型用法。

由于 curandState 的检索和使用以及随机数的生成是由 GPU 上的 NVIDIA 库完成的，因此您可以假设 NVIDIA 工程师在优化内存访问以提高效率和合并方面做得相当不错。检索和更新状态，生成随机数的操作。

`__constant__`内存还具有每个时钟每个 SM 仅服务一个 32 位值的特性，因此当所有线程都访问相同的数据元素（即广播）时它很有用，但当每个线程访问不同的元素时通常没有用处（例如单独的 curandState )*即使*该访问通常会合并，例如，如果它在普通的全局内存中。

# c# - C# 2010 Word - 如何创建表格之间没有空行

> ID：15641408
> 
> 赞同：0
> 
> 时间：2013-03-26T15:48:35.813
> 
> 标签：c#, ms-word

使用 C# 2010 我需要打开一个 word 2010 模板，搜索书签并在其中插入一个表格。实际上它应该是一个“三部分表”：一行两列，然后是多行五列，最后三行作为单列。它应该看起来像一个没有段落或空行之间的表格。

我在单词自动化方面的经验非常有限。我可以找到如何在书签上创建表格的示例-到目前为止没问题-但是如何在之前的表格之后立即添加新表格...

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:28:17.140

这应该可以解决问题。您不需要多个表来拥有不同的列；Word 允许您拥有一个表格，其中第一行有 2 列，接下来的 3 行有 5 列，最后 3 行只有 1 列。（你没有说五列需要多少行，所以我只选择了 3 行。）

```
//Be sure to add this reference:
//Project>Add Reference>.NET tab>Microsoft.Office.Interop.Word

//open Word App
Microsoft.Office.Interop.Word.Application msWord = new Microsoft.Office.Interop.Word.Application();

//make it visible or it'll stay running in the background
msWord.Visible = true;

//open a new document based on the Word template.
//You shouldn't open the template directly using msWord.Documents.Open(path) unless you want to edit the template itself.
Microsoft.Office.Interop.Word.Document wordDoc = msWord.Documents.Add(@"c:\MyTemplate.dotx");

//find the bookmark
string bookmarkName = "BookmarkToFind";

if (wordDoc.Bookmarks.Exists(bookmarkName))
{
    Microsoft.Office.Interop.Word.Bookmark bk = wordDoc.Bookmarks[bookmarkName];

    //set the document's range to immediately after the bookmark.
    //If you want to add the table *into* the bookmark, it needs to be done differently.
    //This page has a good explanation of the differences between adding to the bookmark's range vs adding after the bookmark's range.
    //http://gregmaxey.mvps.org/word_tip_pages/insert_text_at_or_in_bookmark.html
    //It's a little more hassle because you have to re-add the bookmark after inserting into it,
    //so inserting after the bookmark is usually fine less you're going to be inserting text programmatically at the same bookmark a second time.
    Microsoft.Office.Interop.Word.Range rng = wordDoc.Range(bk.Range.End, bk.Range.End);

    //create a table with 8 rows and 5 columns into the range.
    Microsoft.Office.Interop.Word.Table tbl = wordDoc.Tables.Add(rng, 8, 5);

    //set the table's borders.
    tbl.Borders.InsideLineStyle = Microsoft.Office.Interop.Word.WdLineStyle.wdLineStyleSingle;
    tbl.Borders.OutsideLineStyle = Microsoft.Office.Interop.Word.WdLineStyle.wdLineStyleSingle;

    //merge the cells in the first row down to 2 columns (Word's cells start at 1, not at 0).
    tbl.Cell(1, 1).Merge(tbl.Cell(1, 3));

    //distribute the columns evenly
    tbl.Rows[1].Select();
    msWord.Selection.Cells.DistributeWidth();

    //rows 2-5 already have 5 columns so don't touch them.

    //merge rows 6-8 into single-columns rows.
    for (int x = 6; x < 9; x++)
    {
        tbl.Cell(x,1).Merge(tbl.Cell(x,5));
    }

    //put the cursor in the table's first cell.
    rng=wordDoc.Range(tbl.Cell(1,1).Range.Start, tbl.Cell(1,1).Range.Start);
    rng.Select(); 
```

# javascript - 我的 Jvectormap 的悬停功能未在 Chrome 中显示

> ID：15641409
> 
> 赞同：0
> 
> 时间：2013-03-26T15:48:38.560
> 
> 标签：javascript, jquery, google-chrome, jvectormap

无法弄清楚为什么只有 chrome 不起作用，它在 IE 和 Firefox 中运行良好。

```
$(function () {
$('#jvectormap-mill').vectorMap({
    map: 'world_mill_en',
    backgroundColor: 'white',
    regionStyle: {
        initial: {
            fill: '#002d62'
        },
        hover: {
            fill: '#FEC057',
            "fill-opacity": 1
        }
    },
    series: {
        regions: [{
            scale: ['#00B5E6'],
            attribute: 'fill',
            values: SavillePartnerArray()
        }]
    },
    onRegionLabelShow: function (e, label, code) {
        for (var partner in SavillePartners) {
            if (partner == code) {

                $("#jvectormap-label").position = e.position;
                return false;
            }
        }
    },
    onRegionOver: function (e, code) {
        var label = $("#jvectormap-label");
        var region = $(".jvectormap-region[data-code='" + code + "']");

        for (var partner in SavillePartners) {
            if (partner == code) {
                var Title = SavillePartners[code].name;

                // Create HTML 
                var stringHtml = '<div class="jvectormap-label2"><div id="titleTextbox"><span id="titleSpan">' + Title + '</span></div><div class="globeLogoDiv"><img src="/images/international-partner-logos/saville-globe.jpg" alt="globe"/></div><div class="savilleLogoDiv"><img src="/images/international-partner-logos/saville-logo.jpg" alt="savilleconsulting" class="savilleLogoImg"/></div>';
                if (SavillePartners[code].accreditedTrainer == 1) {
                    stringHtml = stringHtml + '<div class="internationalPartnersContainer"><div class="internationalContainer"><strong>INTERNATIONAL</strong></div><div class="partnersContainer">PARTNER</div></div><div class="accreditedTrainerContainer" ><div class="accreditedContainer"><strong>ACCREDITED</strong></div><div class="trainerContainer">TRAINER</div></div>';
                }
                else {
                    stringHtml = stringHtml + '<div class="internationPartnersSingle"><strong>INTERNATIONAL PARTNER</strong></div>';
                }
                stringHtml = stringHtml + '</div>';
                label.html(stringHtml);
                label = region.mousemove(function (t) {
                    var label = $("#jvectormap-label");
                    label.css({
                    left: t.pageX + 15,
                    top: t.pageY + 15
                    });
                });

                // Expand the title text to fit
                var spanWidth = $("#titleSpan").width();
                var newFontSize = (250 / spanWidth * 12);
                $("#titleSpan").css({ "font-size": newFontSize, "line-height": newFontSize / 1.2 + "px" });

                return;
            }
        }
        e.preventDefault();
    },
    onRegionOut: function (e, code) {
        var label = $("#jvectormap-label");
        label.html('');
        label.display = 'none';
    },
    onRegionClick: function (e, code) {
        for (var partner in SavillePartners) {
            if (partner == code) {
                var link = SavillePartners[code].link;
                document.location.href = '/International/' + link;
            }
        }
    },
    focusOn: {
        x: mapXFocus,
        y: mapYFocus,
        scale: mapScale
    }
}); 
```

});

开发人员工具没有显示任何东西来指出我为什么……

如果您想亲眼看看它在 FF 和 IE 而不是 Chrome 中是如何工作的，请单击[此处](https://www.savilleconsulting.com/international/)并将鼠标悬停在浅蓝色的国家/地区。任何帮助将不胜感激，因为我已经坚持了几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:56:32.753

我正在使用 Chrome 版本 25.0.1364.172，它对我有用。你用的是哪个版本，数据多吗？颜色改变了，你到底想解决什么问题？

# .net - 使用 HitTestInfo 查找列表视图列索引

> ID：15641415
> 
> 赞同：1
> 
> 时间：2013-03-26T15:48:48.937
> 
> 标签：.net, vb.net, listview, hittest

当我使用以下代码右键单击列表视图项时，我正在寻找列的索引：

```
Private Sub Source_lvArticles_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Source_lvArticles.MouseDown
    If e.Button = System.Windows.Forms.MouseButtons.Right Then
        Sources_RightClickedCol = 0

        Dim info As ListViewHitTestInfo = Source_lvArticles.HitTest(e.X, e.Y)
        Sources_RightClickedCol = info.Location
    End If
End Sub 
```

我能够找到我右键单击的项目的文本（info.Subitem.Text），我只是找不到它的列索引......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-04T17:13:43.260

有一种*更*简单的方法可以点击“列”：

```
Private Function GetSubItemIndexAt(x As Integer, y As Integer) As Integer
    ' get HitTextinfo for X,Y
    Dim ht As ListViewHitTestInfo = myLV.HitTest(x, y)

    If ht.Item IsNot Nothing Then
        ' use built in method to get the index
        Return ht.Item.SubItems.IndexOf(ht.SubItem)
    End If

    Return -1           ' (semi) universal not found indicator

End Function 
```

请记住，索引 0 将引用`Item`or`Label`区域。

唯一需要注意的是，`HitTest`它只适用于有实际物品的地方。如果单击非项目区域，例如下面的空白区域，则该 XY 将导致没有项目可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-17T17:33:46.687

不幸的是，对于 Alex 提供的上述代码，如果一行中有多个子项包含相同的文本值，那么它会选择最左边的第一个列索引。更好的方法是复制下面的函数，它只是使用鼠标指针 X 值并将其与列右值进行比较，其中 X 超过了我们在循环计数上的整数：

```
Private Function GetColumnIndex(ByVal lvw As ListView, ByVal MouseX As _
Integer) As Integer

    Dim result As Integer = 0

    'Get the right and width pixel values of all the columns 
    Dim ColW As New List(Of Integer)
    Dim Index As Integer = 0

    For Each col As ColumnHeader In lvw.Columns
        ColW.Add(col.Width)
        Dim X As Integer = 0
        For i As Integer = 0 To ColW.Count - 1
            X += ColW(i)
        Next

        'Once you have the rightmost values of the columns 
        'just work out where X falls in between

        If MouseX <= X Then
            result = Index
            Exit For
        End If

        Index += 1

    Next

    Return result
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:52:54.953

对于那些想知道我做了什么来计算我的列索引的人......它不是很优雅，但它确实有效。

```
Private Sub Source_lvArticles_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Source_lvArticles.MouseDown
    If e.Button = System.Windows.Forms.MouseButtons.Right Then
        Sources_RightClickedCol = 0

        Dim info As ListViewHitTestInfo = Source_lvArticles.HitTest(e.X, e.Y)
        Dim SubItem As String = info.SubItem.Text

        For Each item As ListViewItem In Source_lvArticles.Items
            Dim i As Integer = 1
            Dim found As Boolean = False
            For Each s As ListViewItem.ListViewSubItem In item.SubItems
                If s.Text = SubItem Then
                    Sources_RightClickedCol = i
                    found = True
                    Exit For
                End If
                i += 1
            Next
            If found Then Exit For
        Next
    End If
End Sub 
```

这样做是遍历列表视图中每一行的每个子项并保持列索引 (i) 的计数。它将当前子项的文本与 HitTest 检测到的文本进行比较

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-20T00:52:53.897

您还可以使用 subitem.tag 属性在填充列表视图时存储有关列的信息，然后稍后使用 hittest.(eX, eY).SubItem.tag 简单地检索此信息。

# scala - SublimeREPL scala 错误

> ID：15641416
> 
> 赞同：4
> 
> 时间：2013-03-26T15:48:49.753
> 
> 标签：scala, runtime-error, sublimetext2, sublimerepl

我安装了 SublimeREPL，但每次尝试启动 REPL 时，都会出现一个对话框，显示错误“OSError(2, 'No such file or directory')”。

我使用 MacPorts 安装了 Scala 2.10。

我正在运行 OS X Lion (10.8.3)。

是否有一些特殊的配置我需要告诉 SublimeREPL 在哪里可以找到 Scala 可执行文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:07:14.697

在您的 Sublime Text 安装目录中（它可能在 下`~/Library/Application Support/Sublime Text 2`），有一个配置文件：

`./Packages/SublimeREPL/config/Scala/Main.sublime-menu`

scala 的路径及其调用由以下内容定义：

```
"cmd": {"linux": ["scala"],
        "osx": ["scala"],
        "windows": ["scala.bat", "-i"]
       },
...
"extend_env": {"osx": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
               "linux": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
               "windows": {"EMACS": "1"}
}, 
```

# javascript - 我的 setTimeout 不尊重延迟

> ID：15641417
> 
> 赞同：0
> 
> 时间：2013-03-26T15:48:53.817
> 
> 标签：javascript, jquery, settimeout

我想用 setTimeout 每 10 秒重复一次函数。我的功能是：

```
dateInLive = function() {
    crono = function(){
      setTimeout(function() {
        $('.datePoste').each(function(){
                $(this).load('in_live.php','in_live='+$(this).attr('id'))
            });
        crono();
        }
        ,10000);
    }
    crono();
} 
```

但是，这真的很随机​​；有时它在 15 秒后重复，有时在 3 秒后，有时在 6 秒后重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:05:09.467

在这种情况下，我会使用延迟对象。

```
function crono(){
    setTimeout(function() {
        var defArr = [];
        $('.datePoste').each(function(i,el){
            var deferred = $.Deferred();
            defArr.push(deferred.promise());
            $(this).load('in_live.php','in_live='+$(this).attr('id'), function() {
                 deferred.resolve();
            });
        });
        $.when.apply($,defArr).done(crono);
    }, 10000);
} 
```

这样做会请求所有的section，然后当所有的section都收到后，等待10秒再请求，避免在网速慢的情况下请求堆积。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:56:14.050

您`setTimeout`用于运行重复的事件。

这是正确的（其他人建议`setInterval`改为，但存在问题）。

但是，您没有在后续调用中设置超时 - 您只是`crono()`直接调用该函数，因此在初始超时延迟之后，它将立即开始一遍又一遍地调用自身（直到它耗尽堆栈空间）。

您需要做的是`setTimeout()`每次调用该函数时调用。像这样重新编码：

```
dateInLive = function() {
    crono = function(){
        $('.datePoste').each(function(){
            $(this).load('in_live.php','in_live='+$(this).attr('id'))
        });
        setTimeout(crono,10000);
    }
    setTimeout(crono,10000);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:59:33.957

`crono()`仅在完成所有 ajax 请求时才调用：

```
function crono(){
    setTimeout(function() {
        var arr = [];
        $('.datePoste').each(function(){
            var self = this;
                xhr = $.get('in_live.php', {in_live : this.id}, function(data) {
                    $(self).html( $.parseHTML(data) );
                });
            arr.push(xhr);
        });
        $.when.apply($, arr).done(crono);
    }, 10000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:53:59.057

你只是`crono()`在错误的地方有这个功能。

```
dateInLive = function() {
 crono = function(){
 setTimeout(function() {
        crono();
        $('.datePoste').each(function(){
               $(this).load('in_live.php','in_live='+$(this).attr('id'))
           });
        }
        ,10000);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T15:52:39.437

您在创建新超时之前正在做某事，这意味着肯定会有“一些”延迟。

看看[setInterval()](https://developer.mozilla.org/en/docs/DOM/window.setInterval)函数。

# javascript - 如何以对象文字表示法设置和访问变量？

> ID：15641421
> 
> 赞同：0
> 
> 时间：2013-03-26T15:48:58.550
> 
> 标签：javascript

我正在尝试使用对象文字表示法设置并稍后访问变量。我需要在后续代码中使用这个变量，所以我只想在这里设置一次。

当我在 jsFiddle 运行此代码时，我收到 HalfWidth 为 NaN 的错误。如何从这里设置和访问这个变量？

```
var $LIST = {
  FullWidth: 120,
  HalfWidth: this.FullWidth / 2,
  exit: function () {}
};

alert($LIST.FullWidth);
alert($LIST.HalfWidth); 
```

[http://jsfiddle.net/7JcaQ/](http://jsfiddle.net/7JcaQ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:52:47.503

`this`与您的情况零相关 - 它仅定义方法调用的上下文对象。此外，您不能`$LIST`在其自己的定义中引用，因为它在定义结束之前不会退出。

写：

```
var $LIST = {
  FullWidth: 120,
  exit: function () {}
};
$LIST.HalfWidth = $LIST.FullWidth / 2 
```

（注意，您得到的是`NaN`，因为在方法调用之外`this`通常指的是全局对象，自然，它的属性中通常没有任何数值。将其`.FullWidth`除以 2 产生`NaN`。）

# c# - 有没有办法链接双重尝试/最终异常而不是丢失或记录？

> ID：15641424
> 
> 赞同：2
> 
> 时间：2013-03-26T15:49:02.143
> 
> 标签：c#, exception, exception-handling

如果我的 try 抛出，并且 finally 抛出，我怎样才能在一个链中保持这两个异常，以便我可以让它们自然地在堆栈中传播，而不需要中间的日志记录工具？

我认为这可能会有所帮助：

```
Exception exCause = null;
try {
    // do something risky
} catch ( Exception ex ) {
    exCause = ex;
    throw;
} finally {
    //check for an important error condition
    // if error: throw new ApplicationException("finally failed", exCause);
} 
```

但我不确定它是否会破坏框架中的某些内容。

显然，如果我在 finally 中调用引发异常的东西，它仍然存在无法合并的两个预先存在的异常的问题，但我认为这可能有助于减轻系统中每个库的需求可以访问相同的跟踪例程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:55:04.593

`finally`最好通过以不会引发异常的方式编写处理程序来避免这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:52:15.447

也许你可以看看 System.AggregateException 类

> AggregateException 用于将多个故障合并到一个可抛出的异常对象中。

[http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)

这可能会帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:36:52.713

C++、Java 和 .Net 历来都没有提供任何处理堆栈展开清理代码中出现的异常的好方法。这是不幸的，因为在许多情况下，发生在清理代码中的异常对程序的*行为*比发生在主行代码中的异常更重要，但对诊断目的帮助不大（特别是因为可能会发生清理异常由于主线异常）。

在 VB.net 中可以编写一个 try/finally 块，这样`finally`代码将知道什么异常（如果有）导致代码离开该`try`块，而无需声称捕获或处理有问题的异常。不幸的是，这在 C# 中是不可能的，尽管 C# 中的代码可以通过调用用 vb.net 编写的包装器来实现这种效果；即使在 vb.net 中，使用这样的包装器也可能会有所帮助，因为实现正确语义所需的代码有点恶心。如果两种语言中的`using`块可以使用类似的接口，则可以改进，如果在堆栈展开期间执行异常`IDisposableDuringException { void Dispose(Exception ex);}`，则会调用该接口。`Dispose`这将允许代码在`Dispose`方法将提供的异常包含在它可能抛出的任何异常中，并且还会根据是否抛出异常而产生处置行为的可能性（例如，如果事务范围通过异常退出，则应该清楚地执行回滚——这就是毕竟它们的重点——但要求它们在通过正常方式退出时隐式执行回滚是 icky）。

关于如果在`finally`清理过程中抛出异常会发生什么，我建议无论异常是否挂起，正确的行为应该是抛出类似 custom 的东西`CleanupFailureException`。即使调用代码已经准备好捕获例如`InvalidOperationException`从主线抛出的内容，主线的成功完成以及随后的`InvalidOperationException`清理期间也可能代表与代码准备处理的情况不同的情况，并且应该因此使用不同的异常类型。

顺便说一句，关于代码是否应该假定意外异常是致命的还是非致命的，经常存在一些争论。我认为在许多情况下，正确的方法是让堆栈从意外异常中展开，明确地使正在使用的对象无效，这样所有未来对这些对象的操作都会导致异常。这将产生这样的效果，如果一个意外的异常可能破坏一个至关重要的对象，程序可能会在造成任何损害之前就死掉，但同时允许如果一个异常破坏了一个无论如何都不需要的对象的可能性（例如，如果在从损坏的文件加载文档时发生意外问题，并且在尝试加载文档时与之关联的数据结构被彻底破坏，

# javascript - 如何在 HighCharts 中的每个条形上方添加标签

> ID：15641438
> 
> 赞同：4
> 
> 时间：2013-03-26T15:49:28.927
> 
> 标签：javascript, jquery, highcharts

我正在尝试在 Highcharts 的条形图中放置一个标签。在我的情况下，您可以在此处看到的每个栏上方：

```
$(function () {
  var chart;
  $(document).ready(function() {
    chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'column'
        },

        title: {
            text: 'Indicator per Sex'
        },

        xAxis: {
           categories: [
                'Jan',
                'Fev',
                'Mar',
                'Apr',
                'May',
               'Jun',
               'Jul',
               'Aug',
               'Sep',
               'Oct',
               'Nov',
               'Dez'
           ]
        },

        yAxis: {
            allowDecimals: false,
            min: 0,
            title: {
                text: 'Consults'
            }
        },

        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    this.series.name +': '+ this.y +'<br/>'+
                    'Total: '+ this.point.stackTotal;
            }
        },

        plotOptions: {
            column: {
                stacking: 'normal'
            }
        },

        series: [
        {
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#FF0011',
        stack: 0
    }, {
        data: [30, 176.0, 135.6, 148.5, 216.4, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#3333FF',
        stack: 0
    }, {
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#FF0011',
        stack: 1
    }, {
        data: [30, 176.0, 135.6, 148.5, 216.4, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#3333FF',
        stack: 1
    }, {
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#FF0011',
        stack: 2
    }, {
        data: [30, 176.0, 135.6, 148.5, 216.4, 29.9, 71.5, 106.4, 129.2, 144.0, 10, 20],
        color: '#3333FF',
        stack: 2
    }]
    });
  });
 });` 
```

我试过了，但是当我添加标签时，每个条都会出现一个标签。那么，这是怎么做到的？！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T15:57:08.147

将此添加到您的系列中：

```
dataLabels: {
    enabled: true,
    rotation: 0,
    color: '#000000',
    backgroundColor: '#FFFFFF',
    align: 'center',
    x: 4,
    y: 0,
    style: {
        fontSize: '10px',
        fontFamily: 'Verdana, sans-serif'
    } 
```

当然根据需要进行调整..如果需要，您还可以添加 a`formatter`以添加 $ 符号和大数字的逗号..

编辑：
刚刚看到它是条形图..
您需要将其添加到您的绘图选项中：

```
plotOptions: {
   bar: {
      dataLabels: {
          enabled: true
      }
   }
}, 
```

查看条形图[演示](http://www.highcharts.com/demo/bar-basic)以及他们的[api 文档](http://api.highcharts.com/highcharts)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-21T15:50:04.137

Highcharts stackLabels 将完成这项工作。 [看这里](http://api.highcharts.com/highcharts#yAxis.stackLabels)

# linux - Vagrant CentOs5.8 64bit with PHP5.2.x

> ID：15641441
> 
> 赞同：0
> 
> 时间：2013-03-26T15:49:36.147
> 
> 标签：linux, vagrant

由于项目限制，必须在 PHP 版本 < 5.3 和 > 5.2 之间运行项目。

我们正在通过 Vagrant 使用 CentOs 6.x 部署我们的环境。对于这个项目，我们已经创建（下载）了一个 CentOs 5.x 盒子，因为这个盒子不会自动随 PHP5.3.x 一起提供

然而，CentOs5.x 附带的版本是 5.1.6，对于项目来说太低了。我花了很多时间在互联网上搜索合适的解决方案并尝试了很多（原子，下载 rpv，使用 CentOs 测试 repo），没有什么真正有效，也没有稳定或易于与 Vagrant 和 Puppet 条款集成。

我发现的最简单的解决方案可以通过 Direct shell puppet provions 实现

```
[c5-testing]
name=CentOS-5 Testing
baseurl=http://dev.centos.org/centos/$releasever/testing/$basearch/
enabled=1
gpgcheck=1
gpgkey=http://dev.centos.org/centos/RPM-GPG-KEY-CentOS-testing
includepkgs=php* 
```

但运行`yum install php`只会产生 PHP 5.1.6 版本，而不是预期的 PHP 5.2.x

我可以在终端中看到它正在使用这个 c5-testing repo。

跑步`yum --enablerepo=c5-testing install php`的影响甚至更小。

```
yum --enablerepo=c5-testing install php
Loaded plugins: fastestmirror, priorities, security
Loading mirror speeds from cached hostfile
 * addons: ftp.cvut.cz
 * base: ftp.cvut.cz
 * centosplus: ftp.cvut.cz
 * epel: mirror.karneval.cz
 * extras: ftp.cvut.cz
 * updates: ftp.cvut.cz
Reducing CentOS-5 Testing to included packages only
Finished
309 packages excluded due to repository priority protections
Setting up Install Process
Package php-5.1.6-39.el5_8.x86_64 already installed and latest version
Nothing to do 
```

有没有人对这个主题有更多的想法，或者有一个带有 5.2 版本 PHP 的 CentOs 盒子。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:17:38.130

我最终能够通过手动指定 etc/yum.conf 存储库来管理它（这当然也可以移动到 /etc/yum.repo.d）

随着内容：

```
[iworx-unsupported] 
name=IWorx Unsupported 
baseurl=http://updates.interworx.com/iworx/RPMS/unsupported/php5/cos5x/$basearch‌​/ 
gpgcheck=0 
```

请注意，某些值在 baseurl 中是硬编码的，并且可能无法 100% 与不同的安装兼容。

# android - 如何更新不在 google play、i store 或 windows store 上的应用程序

> ID：15641442
> 
> 赞同：1
> 
> 时间：2013-03-26T15:49:37.097
> 
> 标签：android, ios, django, windows, phonegap-build

我正在为我们公司制作一个应用程序。这是一个仅供内部使用的特定应用程序。它的大小将在 200 -250 mb 左右。它是一个跨平台的应用程序（使用phone-gap），即它将在windows、android 和apple 上处于活动状态。我没有把它放在任何商店，即 istore、wondows 商店或 google play 上。

**问题**：我想创建一种可以从服务器更新此应用程序的方式，即，每次我对其进行一些数据更改时，它都应该更新或要求在各自的平台上更新。

**可能的解决方案**：使用 Django 作为后端。每次保存一些数据更改时，都会启动一个脚本。该脚本更新或更改各自的代码库并构建各自的平台。如何在移动设备上推送或拉取这些更改或更新版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:57:53.930

PhoneGap 提供[Hydration](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CD0QFjAA&url=https%3A%2F%2Fbuild.phonegap.com%2Fdocs%2Fhydration&ei=TMVRUdfIFaS90AH7n4GwBQ&usg=AFQjCNFaMbm-QxdeJJYxt0369ICw9xDPGA&bvm=bv.44158598,d.dmQ)，这是一个通过单击复选框激活的自动更新系统。

它比生产导向更多的是开发，但如果这是一个内部产品，这将是一个零成本的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:09:47.173

您可以使用 GCM 通知应用程序您有更新。

# c++ - 排序节点（链表）C++

> ID：15641443
> 
> 赞同：1
> 
> 时间：2013-03-26T15:49:43.193
> 
> 标签：c++, sorting, linked-list, nodes

我正在尝试对链接列表进行排序。我有一个名为 head 的节点，它指向下一个节点，等等。

但是当我尝试按节点携带的值对节点进行排序时，我得到了排序工作，因为我看到它打印出 if 语句中的内容，但我没有取回链接列表。我哪里做错了？

```
Node* head;
void sortlist(){

Node * runner = head;
Node * runner2;

for(runner = head; runner->next != NULL; runner = runner->next){
    for(runner2 = runner->next; runner2->next != NULL; runner2 = runner2->next){
        if(runner->freq < runner2->freq){
            cout<< runner->freq<< " is LT "<<runner2->freq<< endl;
            Node * temp = runner;
            runner = runner2;
            runner2 = temp;
        }
    }
}

head = runner;
} 
```

我只取回第一个节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:04:47.680

为了交换链表中的两个元素，请考虑您需要更改的内容。例如，从

```
Head -> First -> Second -> (NULL) 
```

至

```
Head -> Second -> First -> (NULL) 
```

您需要更新`Head.next`：`First.next` *和* `Second.next`。尝试交换节点时，您不会更改*任何*这些内容，因此它不可能达到您的预期。

* * *

只是交换*值*（即`swap(runner->freq, runner2->freq)`）会简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:56:35.653

你会停止 when `runner->next == NULL;`，这应该是最后一个元素。然后设置 `head = runner;`，这意味着 head 将始终是此例程之后的最后一个元素。此外，我不相信这种交换。

似乎你隐约想做一个[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)。如果您想对链表进行简单排序，我建议您使用[选择排序](http://en.wikipedia.org/wiki/Selection_sort)：您创建另一个空列表`l2`，每次从第一个列表中删除最小元素，并将其添加为`l2`. 第二个列表的代码很简单：

```
void prepend(Node* node, Node** list){
   //null checks if you want
   node->next = *list;
   *list=node->next;
} 
```

# ios - 如何在 ios sdk 3.2 之后邀请来自 ios 或 android 应用程序的所有 Facebook 朋友

> ID：15641444
> 
> 赞同：11
> 
> 时间：2013-03-26T15:49:43.487
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试找到一种从 iOS 应用程序向 Facebook 朋友发送邀请的最佳方式。在最近的 api 版本中，我发现 facebook 受到了邀请政策的限制。
在四处搜索之后，我在这里总结了我的发现：

Feed（Graph API user/feed）用于在用户自己的墙上发布消息，然后如果Feed中提到了朋友，则可以从他们自己的门户中看到朋友。

*   亲：消息可以定制，包括图片等。
*   缺点：最多提 10 人，也需要在应用程序中进行用户交互。
*   如果用户只是在自己的墙中发布消息，只有来到他的页面的朋友才能看到它，但无法通知朋友。

Request（Graph API user/apprequests）用于直接向好友发送请求，请求有两种：User to User和App to User

用户对用户请求场景（我对第一个场景感兴趣）

*   收件人是发件人的朋友，尚未安装该应用程序。这被视为邀请。
    *   亲：似乎是正确的邀请方式，朋友会收到通知和弹出窗口。
    *   缺点：最多包含 50 个好友，也需要用户交互。
*   收件人是发件人的朋友并已安装该应用程序。
*   收件人已安装该应用程序。在这种情况下，发送者和接收者不需要是朋友。

应用到用户请求：朋友会收到来自应用的消息，但消息只发送给已经安装应用的用户，所以这对我没有用。

所以看来我最好的办法是使用用户对用户的请求。所以我的应用程序可以为用户提供 50 个列表，并要求他/她在 facebook 网络对话框中确认发送。但是如果用户想向他们所有的朋友提出请求，有时是 500+。似乎 facebook 正在收紧这一点，以推广他们的移动应用安装广告或应用中心。广告是另一个话题。我已经设置了 App Center，但是我应该如何让用户的朋友知道这件事呢？

我一直在寻找三天，但找不到理想的解决方案。人们，建议或解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:30:43.063

我一直在寻找自己的方法来做到这一点，我强烈怀疑 Facebook 正试图阻止/弃用此功能。

尽管几乎所有其他功能都已移植到新系统，但他们尚未将“请求”系统更新到他们的新 API 中（您必须包含旧标头才能做到这一点）。

正如您所提到的，他们现在拥有非常热衷于推送的移动应用安装广告

最后，Open Graph：就个人而言，作为一名开发人员，我很乐意让人们在我的应用程序中允许人们通过 Facebook 邀请他们的朋友，作为用户，我明白为什么这会很烦人。

如果一次将这些请求发送给许多用户，这些请求很有可能成为垃圾邮件，而且它们非常不自然，它们违背了 OG 的想法，即你的朋友的动作被流畅地放在他们的墙上，你可以如果听起来很有趣，请查看并选择自己调查/安装应用程序。

即现在的想法是，Facebook 上的应用程序推广更自然地进行，并通过使用来鼓励，而不是明确地强制请求

# pandas - 在 pandas 中连接具有不同索引级别的数据帧

> ID：15641449
> 
> 赞同：0
> 
> 时间：2013-03-26T15:50:01.750
> 
> 标签：pandas, multi-index

我无法理解 pandas 多索引的工作原理。具体来说：

1.  如何合并不同索引级别的两个数据框（按行）
2.  如何更改数据框的索引级别

使用[上一个问题](https://stackoverflow.com/questions/15589354/)的示例：

```
d1 = pd.DataFrame( {'StudentID':    ["x1", "x10", "x2","x3", "x4", "x5", "x6",   "x7", "x8", "x9"],
 'StudentGender' : ['F', 'M', 'F', 'M', 'F', 'M', 'F', 'M', 'M', 'M'],
 'ExamenYear': ['2007','2007','2007','2008','2008','2008','2008','2009','2009','2009'],
 'Exam': ['algebra', 'stats', 'bio', 'algebra', 'algebra', 'stats', 'stats', 'algebra', 'bio', 'bio'],
 'Participated': ['no','yes','yes','yes','no','yes','yes','yes','yes','yes'],
 'Passed': ['no','yes','yes','yes','no','yes','yes','yes','no','yes']},
 columns = ['StudentID', 'StudentGender', 'ExamenYear', 'Exam', 'Participated', 'Passed']) 
```

我计算两个数据集

```
def ZahlOccurence_0(x):
     return pd.Series({'All': len(x['StudentID']),
                   'Part': sum(x['Participated'] == 'yes'),
                   'Pass' :  sum(x['Passed'] == 'yes')})
t1 = d1.groupby(['ExamenYear', 'Exam']).apply(ZahlOccurence_0)   
t2 = d1.groupby('ExamenYear').apply(ZahlOccurence_0) 
```

如何按行合并 t1 和 t2 ？

```
print t1
                    All  Part  Pass
ExamenYear Exam                    
2007       algebra    1     0     0
           bio        1     1     1
           stats      1     1     1
2008       algebra    2     1     1
           stats      2     2     2
2009       algebra    1     1     1
           bio        2     2     1

print t2 

            All  Part  Pass
ExamenYear                 
2007          3     2     2
2008          4     3     3
2009          3     3     2 
```

我尝试了以下

```
t2 = t2.set_index([t2.index, np.array(['tot']* 3)], append = False) 
```

但

```
 pd.concat(t1,t2) 
```

产生错误

**ValueError：无法在 DataFrame 上调用 bool()。**

我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:44:23.093

正如@DSM 指出的那样，DataFrame 对象需要在列表中

```
pd.concat([t1, t2]) 
```

我确实必须执行与您类似的计算。这是我的首选方法

```
t2['Exam'] = 'tot'
            All  Part  Pass Exam
ExamenYear
2007          3     2     2  tot
2008          4     3     3  tot
2009          3     3     2  tot

pd.concat([t1.reset_index(),t2.reset_index()], ignore_index=True)

   All     Exam ExamenYear  Part  Pass
0    1  algebra       2007     0     0
1    1      bio       2007     1     1
2    1    stats       2007     1     1
3    2  algebra       2008     1     1
4    2    stats       2008     2     2
5    1  algebra       2009     1     1
6    2      bio       2009     2     1
7    3      tot       2007     2     2
8    4      tot       2008     3     3
9    3      tot       2009     3     2 
```

# php - RewriteRule 访问主文件夹

> ID：15641454
> 
> 赞同：0
> 
> 时间：2013-03-26T15:50:17.867
> 
> 标签：php, .htaccess, mod-rewrite

我想制定一个重写规则，以重定向到用户在主 url 之后键入的内容，因此没有文件夹（如 www.site.com/user1），我认为这意味着访问 $0 不起作用。 ..

我试图使用的规则是：

```
RewriteRule ^([0-9a-zA-Z]+) show-user.php?user=$0 
```

但它不起作用......

有任何想法吗？

* * *

好的，新文件，它仍然是错误的......

完整的 .htaccess 文件：

```
DirectoryIndex index.php

RewriteEngine on

RewriteRule ^([0-9a-zA-Z]+) test.php?var1=$1 [L] 
```

完整的 test.php 文件：

```
<?php
    print_r($_GET);
?> 
```

域/用户 1 的输出

```
Array ( [var1] => test ) 
```

这没有道理 ：（

在上面的示例中，如何确保在 php var1 中将是 user1（应该是）？我认为重写规则在某种程度上是错误的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:52:45.487

参数不是 0-indexed

```
RewriteRule ^([0-9a-zA-Z]+) show-user.php?user=$1 
```

# c# - 如何在 asp.net mvc4 部分视图中呈现新闻源

> ID：15641467
> 
> 赞同：1
> 
> 时间：2013-03-26T15:50:47.880
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-partialview

我有一个新的 MVC4 项目。

在我的 _Layout.cshtml 中，我有以下内容：

```
<div class="container maincontent">
        <div class="row">
            <div class="span2 hidden-phone">
                @*
            In here is a RenderSection featured. This is declared in a section tag in Views\Home\Index.cshtml. 
            If this is static text for the whole site, don't render a section, just add it in.
            You should also be able to use  @Html.Partial("_LoginPartial") for example. 
            This _LoginPartial will need to be a cshtml in the Shared Views folder. 
            *@

                @{ Html.RenderPartial("_NewsFeed"); }
            </div>
            <div class="span10">
                @RenderBody()
            </div>
        </div>
    </div> 
```

我的部分观点是

```
<div class="row newsfeed">
NEWS FEED
@foreach (var item in ViewData["newsfeed"] as IEnumerable<NewsItem>)
{
    <div class="span2 newsfeeditem">
        <h3>@item.NewsTitle</h3>
        <p>@item.NewsContent</p>
        @Html.ActionLink("More", "NewsItem", "News", new {id=@item.Id}, null)
    </div>    
} 
```

有没有办法让部分视图进行数据调用。目前，我必须在我的控制器中为每个操作执行以下操作：

```
ViewData["newsfeed"] = _db.NewsItems.OrderByDescending(u => u.DateAdded).Where(u => u.IsLive == true).Take(4);
        return View(ViewData); 
```

我在已经将模型传递给视图的地方陷入困境，因为我也无法将其传递给它。

我知道我做错了什么，只是不确定是什么或在哪里。

我只想能够在我的 _layout 中进行渲染调用，然后在局部视图中知道收集数据然后渲染自己。还是我弄错了棍子的一端？我想我正在尝试像 ascx 一样使用它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:28:02.647

您应该从使用 a 切换`RenderPartial`到 a `RenderAction`。这允许您再次通过管道并生成一个 ActionResult 就像一个部分，但使用服务器端代码。例如：

```
@Html.RenderAction("Index", "NewsFeed"); 
```

然后你做一个`NewsFeedController`并提供一个`Index`动作方法：

```
public class NewsFeedController : Controller
{
     public ActionResult Index()
     {
          var modelData = _db.NewsItems.OrderByDescending(...);
          // Hook up or initialize _db here however you normally are doing it

          return PartialView(modelData);
     }
} 
```

然后，您只需将 CSHTML 与 Views/NewsFeed/Index.cshtml 位置中的普通视图一样。

# c++ - 将容器中的每个元素除以给定的数字 C++

> ID：15641469
> 
> 赞同：1
> 
> 时间：2013-03-26T15:50:49.660
> 
> 标签：c++, boost, stl

我将每个容器与另一个数字相乘，所以我做了以下事情：

```
local_it begin = magnitudesBegin;
std::advance(begin , 2);
local_it end  = magnitudesBegin;
std::advance(end, 14);
std::transform(begin, end, firstHalf.begin(),
  std::bind1st(std::multiplies<double>(),100)); 
```

它产生了奇迹，问题是在另一个容器之间做同样的事情时。这是我的问题的一个工作示例：

```
const std::size_t stabilitySize = 13;
boost::array<double,stabilitySize> secondHalf;
double fundamental = 707;
boost::array<double, stabilitySize> indexes = {{3,4,5,6,7,8,9,10,11,12,13,14,15}};
std::transform(indexes.begin(), indexes.end(), secondHalf.begin(),
  std::bind1st(std::divides<double>(),fundamental)); 
```

## **它确实划分了容器。但不是将数组中的每个元素与 707 相除，而是在数组中的每个元素之间划分 707。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:58:52.390

```
std::bind1st(std::divides<double>(),fundamental) 
```

上面的代码采用一个带有两个参数的函子`std::divides<double>`，并将第一个参数的值固定为`fundamental`。那就是它修复了操作的*分子*，你得到了预期的结果。如果要绑定`fundamental`为分母，请使用`std::bind2nd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:53:22.770

您可以尝试以下操作，除法的运算与乘法完全不同，它只是将一个常数除以所有元素

```
 std::bind1st(std::multiplies<double>(),1.0/707.0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:02:08.153

如果数字`707.0`类似于基本常数，而除法可以看作是“转换”，我们称其为“x to y”（我不知道您的数字代表什么，所以用有意义的词替换它）。最好将这种“x 到 y”转换包装在一个独立的函数中以实现可重用性。然后，在 上使用此功能`std::transform`。

```
double x_to_y(double x) {
    return x / 707.0;
}
...
std::transform(..., x_to_y); 
```

如果你有可用的 C++11，或者想使用另一个 lambda 库，另一个选择是在使用的地方内联编写这个。您可能会发现此语法更具可读性，例如使用以下参数绑定`bind2nd`：

```
std::transform(..., _1 / 707.0);  // when using boost::lambda 
```

# jdbc - Query 类型的方法 getLong() 未定义

> ID：15641472
> 
> 赞同：0
> 
> 时间：2013-03-26T15:50:55.787
> 
> 标签：jdbc, persistence, openjpa

当我在 JPA 中编码时，我发现这个错误说“方法 getLong() 未定义类型查询”请帮助我解决这个问题。

```
public long getErrorid(String errDesc)
{long errorid=0;
EntityManagerFactory entityManagerFactory =  Persistence.createEntityManagerFactory("wqs-poc"); System.out.println("EntityManager Factory created successfully !!!");
    EntityManager em = entityManagerFactory.createEntityManager();
    System.out.println("eNTITYmANAGER CREATED SUCCESSFLLY !!!"); Query query = em.createNativeQuery("SELECT errorid FROM wqsd.error_master WHERE errdsesc = "+errorid); errorid  = (long)query.getLong();
    System.out.println("errorid= "+errorid);
    return errorid;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:42:02.637

该错误告诉您 getLong() 没有为`javax.persistence.Query`接口定义。也许你的意思是：

```
errorid = (Long)query.getSingleResult()[0]; 
```

# wpf - 如何自动缩放一组控件的字体大小？

> ID：15641473
> 
> 赞同：58
> 
> 时间：2013-03-26T15:50:56.087
> 
> 标签：wpf, mvvm, font-size

我在一个网格中的 WPF 中有几个 TextBlock，我想根据它们的可用宽度/高度进行缩放。当我搜索自动缩放字体大小时，典型的建议是将 TextBlock 放入 ViewBox。

所以我这样做了：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Viewbox MaxHeight="18" Grid.Column="0" Stretch="Uniform" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TextBlock Text="{Binding Text1}" />
    </Viewbox>

    <Viewbox MaxHeight="18" Grid.Column="1" Stretch="Uniform" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TextBlock Text="{Binding Text2}" />
    </Viewbox>

    <Viewbox MaxHeight="18" Grid.Column="2" Stretch="Uniform" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TextBlock Text="{Binding Text3}" />
    </Viewbox>
</Grid> 
```

它会自动缩放每个 TextBlock 的字体。但是，这看起来很有趣，因为如果其中一个 TextBlocks 的文本较长，那么它将采用较小的字体，而其相邻的网格元素将采用较大的字体。我希望字体大小按组缩放，如果我可以为一组控件指定“SharedSizeGroup”以自动调整其字体大小，那可能会很好。

例如

第一个文本块文本可能是“3/26/2013 10:45:30 AM”，第二个 TextBlocks 文本可能是“FileName.ext”。如果这些跨越窗口的宽度，并且用户开始调整窗口的大小越来越小。日期将开始使其字体小于文件名，具体取决于文件名的长度。

理想情况下，一旦其中一个文本字段开始调整字体点大小，它们就会全部匹配。有没有人想出一个解决方案，或者可以给我一个镜头，看看你将如何使它工作？如果它需要自定义代码，那么希望我们/我可以将它重新打包成自定义的混合或附加行为，以便将来可重用。我认为这是一个非常普遍的问题，但我无法通过搜索找到任何内容。

* * *

**更新** 我尝试了 Mathieu 的建议，它有点工作，但它有一些副作用：

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="270" Width="522">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Rectangle Grid.Row="0" Fill="SkyBlue" />

        <Viewbox Grid.Row="1" MaxHeight="30"  Stretch="Uniform" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="SomeLongText" Margin="5" />
                <TextBlock Grid.Column="1" Text="TextA" Margin="5" />
                <TextBlock Grid.Column="2" Text="TextB" Margin="5" />

            </Grid>
        </Viewbox>
    </Grid>
</Window> 
```

![副作用](../Images/dbb931fc6a48da45628cddfd2108b179.png)

老实说，缺少 hte 比例列对我来说可能没问题。我不介意自动调整列大小以巧妙地利用空间，但它必须跨越窗口的整个宽度。

注意没有 maxsize，在这个扩展示例中，文本太大：

```
<Window x:Class="WpfApplication6.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="270" Width="522">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Rectangle Grid.Row="0" Fill="SkyBlue" />

    <Viewbox Grid.Row="1"  Stretch="Uniform" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
                <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
                <ColumnDefinition Width="Auto" SharedSizeGroup="col"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="SomeLongText" Margin="5" />
            <TextBlock Grid.Column="1" Text="TextA" Margin="5" />
            <TextBlock Grid.Column="2" Text="TextB" Margin="5" />

        </Grid>
    </Viewbox>
</Grid> 
```

![没有 MaxSize 的文本太大](../Images/e23d0833e2309e8a1fb25deafe780e91.png)

在这里，我想限制字体的大小，这样就不会浪费垂直窗口的空间。**我希望输出左、中、右对齐，字体尽可能大，达到所需的最大尺寸。**

* * *

**@adabyron**

您提出的解决方案还不错（并且是最好的），但它确实有一些限制。例如，最初我希望我的列是成比例的（第二个应该居中）。例如，我的 TextBlocks 可能会标记对齐很重要**的图形的开始、中心和停止。**

```
<Window x:Class="WpfApplication6.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:b="clr-namespace:WpfApplication6.Behavior"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Rectangle Grid.Row="0" Fill="SkyBlue" />
        <Line X1="0.5" X2="0.5" Y1="0" Y2="1" Stretch="Fill" StrokeThickness="3" Stroke="Red" />

        <Grid Grid.Row="1">

            <i:Interaction.Behaviors>
                <b:MoveToViewboxBehavior />
            </i:Interaction.Behaviors>

            <Viewbox Stretch="Uniform" />
            <ContentPresenter >
                <ContentPresenter.Content>
                    <Grid x:Name="TextBlockContainer">
                        <Grid.Resources>
                            <Style TargetType="TextBlock" >
                                <Setter Property="FontSize" Value="16" />
                                <Setter Property="Margin" Value="5" />
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="*"  />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="SomeLongText" VerticalAlignment="Center" HorizontalAlignment="Center" />
                        <TextBlock Grid.Column="2" Text="TextA" HorizontalAlignment="Center" VerticalAlignment="Center" />
                        <TextBlock Grid.Column="4" Text="TextB" HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Grid>
                </ContentPresenter.Content>
            </ContentPresenter>
        </Grid>
    </Grid>
</Window> 
```

这是结果。请注意，它不知道它在早期被剪裁，然后当它替换 ViewBox 时，它看起来好像 Grid 默认为列大小“自动”并且不再对齐中心。

![使用 adabyron 的建议进行缩放](../Images/af205ca0e16c01bdef9f8c7debeb0d10.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-12T22:56:51.110

我想编辑我已经提供的答案，但后来决定发布一个新答案更有意义，因为这实际上取决于我更喜欢​​哪一个的要求。这可能更适合艾伦的想法，因为

*   中间的文本块停留在窗口的中间
*   可以调整由于高度裁剪导致的字体大小
*   比较通用
*   不涉及视框

* * *

![在此处输入图像描述](../Images/17269b18f37e936382af484cec1947e6.png)

## ![在此处输入图像描述](../Images/845a5737de1f2deca421f90003eeff9d.png)

另[一种](https://stackoverflow.com/a/15952125/385995)的优点是

*   更有效地分配文本块的空间（没有不必要的边距）
*   文本块可能有不同的字体大小

我也在 StackPanel/DockPanel 类型的顶部容器中测试了这个解决方案，表现得体。

请注意，通过使用列/行宽度/高度（自动/按星标），您可以获得不同的行为。因此，也可以将所有三个文本块列都设置为星形，但这意味着宽度裁剪确实发生得更早，并且有更多的边距。或者，如果网格所在的行是自动调整大小的，则永远不会发生高度裁剪。

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
            xmlns:beh="clr-namespace:WpfApplication1.Behavior"
            Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.9*"/>
            <RowDefinition Height="0.1*" />
        </Grid.RowDefinitions>

        <Rectangle Fill="DarkOrange" />

        <Grid x:Name="TextBlockContainer" Grid.Row="1" >
            <i:Interaction.Behaviors>
                <beh:ScaleFontBehavior MaxFontSize="32" />
            </i:Interaction.Behaviors>
            <Grid.Resources>
                <Style TargetType="TextBlock" >
                    <Setter Property="Margin" Value="5" />
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
            </Grid.Resources>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"  />
                <ColumnDefinition Width="Auto"  />
                <ColumnDefinition Width="*"  />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="SomeLongText" />
            <TextBlock Grid.Column="1" Text="TextA" HorizontalAlignment="Center"  />
            <TextBlock Grid.Column="2" Text="TextB" HorizontalAlignment="Right"  />
        </Grid>
    </Grid>
</Window> 
```

ScaleFontBehavior：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;
using System.Windows.Media;
using WpfApplication1.Helpers;

namespace WpfApplication1.Behavior
{
    public class ScaleFontBehavior : Behavior<Grid>
    {
        // MaxFontSize
        public double MaxFontSize { get { return (double)GetValue(MaxFontSizeProperty); } set { SetValue(MaxFontSizeProperty, value); } }
        public static readonly DependencyProperty MaxFontSizeProperty = DependencyProperty.Register("MaxFontSize", typeof(double), typeof(ScaleFontBehavior), new PropertyMetadata(20d));

        protected override void OnAttached()
        {
            this.AssociatedObject.SizeChanged += (s, e) => { CalculateFontSize(); };
        }

        private void CalculateFontSize()
        {
            double fontSize = this.MaxFontSize;

            List<TextBlock> tbs = VisualHelper.FindVisualChildren<TextBlock>(this.AssociatedObject);

            // get grid height (if limited)
            double gridHeight = double.MaxValue;
            Grid parentGrid = VisualHelper.FindUpVisualTree<Grid>(this.AssociatedObject.Parent);
            if (parentGrid != null)
            {
                RowDefinition row = parentGrid.RowDefinitions[Grid.GetRow(this.AssociatedObject)];
                gridHeight = row.Height == GridLength.Auto ? double.MaxValue : this.AssociatedObject.ActualHeight;
            }

            foreach (var tb in tbs)
            {
                // get desired size with fontsize = MaxFontSize
                Size desiredSize = MeasureText(tb);
                double widthMargins = tb.Margin.Left + tb.Margin.Right;
                double heightMargins = tb.Margin.Top + tb.Margin.Bottom; 

                double desiredHeight = desiredSize.Height + heightMargins;
                double desiredWidth = desiredSize.Width + widthMargins;

                // adjust fontsize if text would be clipped vertically
                if (gridHeight < desiredHeight)
                {
                    double factor = (desiredHeight - heightMargins) / (this.AssociatedObject.ActualHeight - heightMargins);
                    fontSize = Math.Min(fontSize, MaxFontSize / factor);
                }

                // get column width (if limited)
                ColumnDefinition col = this.AssociatedObject.ColumnDefinitions[Grid.GetColumn(tb)];
                double colWidth = col.Width == GridLength.Auto ? double.MaxValue : col.ActualWidth;

                // adjust fontsize if text would be clipped horizontally
                if (colWidth < desiredWidth)
                {
                    double factor = (desiredWidth - widthMargins) / (col.ActualWidth - widthMargins);
                    fontSize = Math.Min(fontSize, MaxFontSize / factor);
                }
            }

            // apply fontsize (always equal fontsizes)
            foreach (var tb in tbs)
            {
                tb.FontSize = fontSize;
            }
        }

        // Measures text size of textblock
        private Size MeasureText(TextBlock tb)
        {
            var formattedText = new FormattedText(tb.Text, CultureInfo.CurrentUICulture,
                FlowDirection.LeftToRight,
                new Typeface(tb.FontFamily, tb.FontStyle, tb.FontWeight, tb.FontStretch),
                this.MaxFontSize, Brushes.Black); // always uses MaxFontSize for desiredSize

            return new Size(formattedText.Width, formattedText.Height);
        }
    }
} 
```

视觉助手：

```
public static List<T> FindVisualChildren<T>(DependencyObject obj) where T : DependencyObject
{
    List<T> children = new List<T>();
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        var o = VisualTreeHelper.GetChild(obj, i);
        if (o != null)
        {
            if (o is T)
                children.Add((T)o);

            children.AddRange(FindVisualChildren<T>(o)); // recursive
        }
    }
    return children;
}

public static T FindUpVisualTree<T>(DependencyObject initial) where T : DependencyObject
{
    DependencyObject current = initial;

    while (current != null && current.GetType() != typeof(T))
    {
        current = VisualTreeHelper.GetParent(current);
    }
    return current as T;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-26T16:00:12.613

将您的网格放在 ViewBox 中，这将缩放整个 Grid ：

```
<Viewbox Stretch="Uniform" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" Text="{Binding Text1}" Margin="5" />
        <TextBlock Grid.Column="1" Text="{Binding Text2}" Margin="5" />
        <TextBlock Grid.Column="2" Text="{Binding Text3}" Margin="5" />

    </Grid>
</Viewbox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:45:08.273

我想我知道要走的路，剩下的交给你。在此示例中，我使用转换器将 FontSize 绑定到 TextBlock 的 ActualHeight（转换器如下）：

```
<Window x:Class="MyNamespace.Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Converters="clr-namespace:UpdateYeti.Converters"
    Title="Test" Height="570" Width="522">
<Grid Height="370" Width="522">
    <Grid.Resources>
        <Converters:HeightToFontSizeConverter x:Key="conv" />
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Rectangle Grid.Row="0" Fill="SkyBlue" />
        <Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MinHeight="60" Background="Beige">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" Text="SomeLongText" Margin="5" 
                   FontSize="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight, Converter={StaticResource conv}}" />
        <TextBlock Grid.Column="1" Text="TextA" Margin="5" HorizontalAlignment="Center" 
                   FontSize="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight, Converter={StaticResource conv}}" />
        <TextBlock Grid.Column="2" Text="TextB" Margin="5" FontSize="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight, Converter={StaticResource conv}}" />
        </Grid>
    </Grid>
</Window>

[ValueConversion(typeof(double), typeof(double))]
class HeightToFontSizeConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // here you can use the parameter that you can give in here via setting , ConverterParameter='something'} or use any nice login with the VisualTreeHelper to make a better return value, or maybe even just hardcode some max values if you like
        var height = (double)value;
        return .65 * height;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T14:57:12.803

一般说明：整个文本缩放的一种可能替代方法是仅在 TextBlocks 上使用 TextTrimming。

我一直在努力寻找解决这个问题的方法。使用视图框很难与任何布局调整混合使用。最糟糕的是，ActualWidth 等不会在视图框内更改。所以我最终决定只在绝对必要时才使用视图框，也就是剪裁发生的时候。因此，我根据可用空间在 ContentPresenter 和 Viewbox 之间移动内容。

* * *

![在此处输入图像描述](../Images/1aeb6dfb038727dcf1de7444aecbd91c.png)

![在此处输入图像描述](../Images/212a57756074bf675a7c383b34a4791c.png)

* * *

这个解决方案不像我想的那样通用，主要是 MoveToViewboxBehavior 假设它附加到具有以下结构的网格。如果不能适应，则很可能必须调整行为。创建一个用户控件并表示必要的部分 (PART_...) 可能是一个有效的替代方法。

请注意，我已将网格的列从三列扩展到五列，因为这使解决方案更容易。这意味着在绝对坐标的意义上，中间的文本块不会正好在中间，而是在左右的文本块之间居中。

```
<Grid > <!-- MoveToViewboxBehavior attached to this grid -->
    <Viewbox />
    <ContentPresenter>
        <ContentPresenter.Content> 
            <Grid x:Name="TextBlockContainer">                       
                <TextBlocks ... />
            </Grid>
        </ContentPresenter.Content>
    </ContentPresenter>
</Grid> 
```

*xml:*

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:beh="clr-namespace:WpfApplication1.Behavior"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Rectangle Grid.Row="0" Fill="SkyBlue" />

        <Grid Grid.Row="1">

            <i:Interaction.Behaviors>
                <beh:MoveToViewboxBehavior />
            </i:Interaction.Behaviors>

            <Viewbox Stretch="Uniform" />
            <ContentPresenter >
                <ContentPresenter.Content>
                    <Grid x:Name="TextBlockContainer">
                        <Grid.Resources>
                            <Style TargetType="TextBlock" >
                                <Setter Property="FontSize" Value="16" />
                                <Setter Property="Margin" Value="5" />
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"  />
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="Auto"  />
                            <ColumnDefinition Width="*"  />
                            <ColumnDefinition Width="Auto"  />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="SomeLongText" />
                        <TextBlock Grid.Column="2" Text="TextA"  />
                        <TextBlock Grid.Column="4" Text="TextB"  />
                    </Grid>
                </ContentPresenter.Content>
            </ContentPresenter>
        </Grid>
    </Grid>
</Window> 
```

*移动到视图框行为：*

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;
using System.Windows.Media;
using WpfApplication1.Helpers;

namespace WpfApplication1.Behavior
{
    public class MoveToViewboxBehavior : Behavior<Grid>
    {
        // IsClipped 
        public bool IsClipped { get { return (bool)GetValue(IsClippedProperty); } set { SetValue(IsClippedProperty, value); } }
        public static readonly DependencyProperty IsClippedProperty = DependencyProperty.Register("IsClipped", typeof(bool), typeof(MoveToViewboxBehavior), new PropertyMetadata(false, OnIsClippedChanged));

        private static void OnIsClippedChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            var beh = (MoveToViewboxBehavior)sender;
            Grid grid = beh.AssociatedObject;

            Viewbox vb = VisualHelper.FindVisualChild<Viewbox>(grid);
            ContentPresenter cp = VisualHelper.FindVisualChild<ContentPresenter>(grid);

            if ((bool)e.NewValue) 
            {
                // is clipped, so move content to Viewbox
                UIElement element = cp.Content as UIElement;
                cp.Content = null;
                vb.Child = element;
            }
            else
            {
                // can be shown without clipping, so move content to ContentPresenter
                cp.Content = vb.Child;
                vb.Child = null;
            }
        }

        protected override void OnAttached()
        {
            this.AssociatedObject.SizeChanged += (s, e) => { IsClipped = CalculateIsClipped(); };
        }

        // Determines if the width of all textblocks within TextBlockContainer (using MaxFontSize) are wider than the AssociatedObject grid
        private bool CalculateIsClipped()
        {
            double totalDesiredWidth = 0d;
            Grid grid = VisualHelper.FindVisualChildByName<Grid>(this.AssociatedObject, "TextBlockContainer");
            List<TextBlock> tbs = VisualHelper.FindVisualChildren<TextBlock>(grid);

            foreach (var tb in tbs)
            {
                if (tb.TextWrapping != TextWrapping.NoWrap)
                    return false;

                totalDesiredWidth += MeasureText(tb).Width + tb.Margin.Left + tb.Margin.Right + tb.Padding.Left + tb.Padding.Right;
            }

            return Math.Round(this.AssociatedObject.ActualWidth, 5) < Math.Round(totalDesiredWidth, 5);
        }

        // Measures text size of textblock
        private Size MeasureText(TextBlock tb)
        {
            var formattedText = new FormattedText(tb.Text, CultureInfo.CurrentUICulture,
                FlowDirection.LeftToRight,
                new Typeface(tb.FontFamily, tb.FontStyle, tb.FontWeight, tb.FontStretch),
                tb.FontSize, Brushes.Black);

            return new Size(formattedText.Width, formattedText.Height);
        }
    }
} 
```

*视觉助手：*

```
public static class VisualHelper
{
    public static T FindVisualChild<T>(DependencyObject obj) where T : DependencyObject
    {
        T child = null;
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            var o = VisualTreeHelper.GetChild(obj, i);
            if (o != null)
            {
                child = o as T;
                if (child != null) break;
                else
                {
                    child = FindVisualChild<T>(o); // recursive
                    if (child != null) break;
                }
            }
        }
        return child;
    }

    public static List<T> FindVisualChildren<T>(DependencyObject obj) where T : DependencyObject
    {
        List<T> children = new List<T>();
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            var o = VisualTreeHelper.GetChild(obj, i);
            if (o != null)
            {
                if (o is T)
                    children.Add((T)o);

                children.AddRange(FindVisualChildren<T>(o)); // recursive
            }
        }
        return children;
    }

    public static T FindVisualChildByName<T>(DependencyObject parent, string name) where T : FrameworkElement
    {
        T child = default(T);
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
        {
            var o = VisualTreeHelper.GetChild(parent, i);
            if (o != null)
            {
                child = o as T;
                if (child != null && child.Name == name)
                    break;
                else
                    child = FindVisualChildByName<T>(o, name);

                if (child != null) break;
            }
        }
        return child;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-21T09:21:20.550

您可以在 ViewBox 中使用隐藏的 ItemsControl。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Viewbox VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="SomeLongText"/>
            <ItemsControl Visibility="Hidden">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <TextBlock Text="SomeLongText"/>
                <TextBlock Text="TextA"/>
                <TextBlock Text="TextB"/>
            </ItemsControl>
        </Grid>
    </Viewbox>
    <Viewbox Grid.Column="1" VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="TextA"/>
            <ItemsControl Visibility="Hidden">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <TextBlock Text="SomeLongText"/>
                <TextBlock Text="TextA"/>
                <TextBlock Text="TextB"/>
            </ItemsControl>
        </Grid>
    </Viewbox>
    <Viewbox Grid.Column="2" VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="TextB"/>
            <ItemsControl Visibility="Hidden">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <TextBlock Text="SomeLongText"/>
                <TextBlock Text="TextA"/>
                <TextBlock Text="TextB"/>
            </ItemsControl>
        </Grid>
    </Viewbox>
</Grid> 
```

或者

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Viewbox VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="{Binding Text1}"/>
            <ItemsControl Visibility="Hidden" ItemsSource="{Binding AllText}">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Viewbox>
    <Viewbox Grid.Column="1" VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="{Binding Text2}"/>
            <ItemsControl Visibility="Hidden" ItemsSource="{Binding AllText}">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Viewbox>
    <Viewbox Grid.Column="2" VerticalAlignment="Bottom">
        <Grid>
            <TextBlock Text="{Binding Text3}"/>
            <ItemsControl Visibility="Hidden" ItemsSource="{Binding AllText}">
                <ItemsPanelTemplate>
                    <Grid/>
                </ItemsPanelTemplate>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Viewbox>
</Grid> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-28T20:33:19.437

解决方案可能是这样的：

选择一个 maxFontSize，然后使用线性方程定义要显示的适当 FontSize，考虑当前窗口。窗口的高度或宽度会限制最终的 FontSize 选择。

让我们以整个网格的“单一类型 TextBlock”为例：

```
Window.Current.SizeChanged += (sender, args) =>
        {
            int minFontSize = a;
            int maxFontSize = b;
            int maxMinFontSizeDiff = maxFontSize - minFontSize;

            int gridMinHeight = c;
            int gridMaxHeight = d;
            int gridMaxMinHeightDiff = gridMaxHeight - gridMinHeight;

            int gridMinWidth = e;
            int gridMaxWidth = f;
            int gridMaxMinHeightDiff = gridMaxWidth - gridMaxWidth;

            //Linear equation considering "max/min FontSize" and "max/min GridHeight/GridWidth"
            double heightFontSizeDouble = (maxMinFontSizeDiff / gridMaxMinHeightDiff ) * Grid.ActualHeight + (maxFontSize - (gridMaxHeight * (maxMinFontSizeDiff  / gridMaxMinHeightDiff)))
            double widthFontSizeDouble = (maxMinFontSizeDiff / gridMaxMinWidthDiff ) * Grid.ActualWidth + (maxFontSize - (gridMaxWidth * (maxMinFontSizeDiff  / gridMaxMinWidthDiff)))

            int heightFontSize = (int)Math.Round(heightFontSizeDouble)
            int widthFontSize = (int)Math.Round(widthFontSizeDouble)

            foreach (var children in Grid.Children)
            {                    
                (children as TextBlock).FontSize = Math.Min(heightFontSize, widthFontSize);
            }
        } 
```

# python - Django 不反映对 Javascript 文件的更新？

> ID：15641474
> 
> 赞同：21
> 
> 时间：2013-03-26T15:51:00.557
> 
> 标签：python, django

我的文件`static`夹中有 javascript 文件。Django 完美地找到并加载它们，所以我认为我的`static`选项配置没有任何问题。但是，有时当我对`.js`文件进行更改并保存它时，使用它的 Django 模板不会反映这些更改——用浏览器检查 javascript 会在上次保存之前显示 javascript。重新启动服务器没有任何作用，尽管重新启动我的计算机有时可以解决问题。我没有任何明确处理缓存的代码。有没有人经历过这样的事情？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-26T15:54:14.087

我相信您的浏览器正在缓存您的 js

你可以刷新你的浏览器，或者清除浏览器缓存？

在镶边控制 + f5 或 shift + f5

我*相信*在 Firefox 上它是 control + shift + r

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-30T23:13:12.580

由于您正在编辑 JavaScript 文件并观察浏览器中的变化，我假设您正在积极开发 Django 应用程序，并且可能使用 Django 的开发运行服务器。有比清除浏览器缓存和刷新更好的解决方案。如果您运行支持 livereload 协议的观察程序实用程序，那么每当您更改*任何*静态文件时，您的浏览器都会自动刷新。

`django-livereload-server`python 包提供了一个漂亮的解决方案。安装它：

`$ pip install django-livereload-server`

添加`'livereload.middleware.LiveReloadScript'`到`MIDDLEWARE_CLASSES`settings.py 中。

然后运行

`$ ./manage.py livereload`

在启动运行服务器之前。

更多文档可以在[django-livereload-server github 站点找到](http://github.com/tjwalch/django-livereload-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-02T09:45:27.513

对我来说，在 Chrome 中打开***隐身模式***`.js`可以让浏览器显示我的静态文件中的最新更改。

# css - JavaFX - CSS 样式列表视图

> ID：15641478
> 
> 赞同：14
> 
> 时间：2013-03-26T15:51:04.227
> 
> 标签：css, listview, javafx

我有一个 ListView 并想要以下内容：

*   白色背景颜色的奇数行；
*   ListView：当鼠标悬停在一个项目上时，用蓝色阴影突出显示；
*   ListView：当一个item被选中时，用渐变绘制它；
*   ListView：当ListView失去焦点时，选择的项目应该用渐变绘制；
*   ListView：所有项目都以文本填充黑色开头。但是在鼠标悬停和/或选择时，它将变为白色。

那是我的代码。它工作正常，除了偶数行：鼠标悬停时，它以白色突出显示。因此，文本是白色的，无法显示。它出什么问题了？

```
.list-cell:filled:selected:focused, .list-cell:filled:selected {
    -fx-background-color: linear-gradient(#328BDB 0%, #207BCF 25%, #1973C9 75%, #0A65BF 100%);
    -fx-text-fill: white;
}

.list-cell:odd {
    -fx-cell-hover-color: #0093ff;
    -fx-background-color: white;
}

.list-cell:filled:hover {
    -fx-cell-hover-color: #0093ff;
    -fx-text-fill: white;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T14:28:24.997

编辑：

稍微改变你的CSS：

```
.list-cell:filled:selected:focused, .list-cell:filled:selected {
    -fx-background-color: linear-gradient(#328BDB 0%, #207BCF 25%, #1973C9 75%, #0A65BF 100%);
    -fx-text-fill: white;
}

.list-cell:even { /* <=== changed to even */
    -fx-background-color: white;
}

.list-cell:filled:hover {
    -fx-background-color: #0093ff;
    -fx-text-fill: white;
} 
```

这个 css 生成以下演示文稿：

![ListView 表示变体 1](../Images/fc8b7cc5ec8a9ea65711bf93966534cc.png)

这是否满足您的期望？

我`odd`改为`even`. 第一个单元格是偶数，因为它的索引值为 0（零）。也`-fx-cell-hover-color`无效。我将其更改为`-fx-background-color`需要的位置或将其删除。

* * *

原文：（注意这里对奇/偶有不同的解释）

我的看法是这样的：（
我将您的要求包含在编号列表中，以供在 css 中参考。我还使渐变更加明显，并为偶数单元格添加了绿色背景。）

```
/*
1\. Odd rows with white background color;
2\. ListView: when mouse over an item, highlight with a blue shade;
3\. ListView: when an item is selected, paint it with a gradient;
4\. ListView: when focus is lost from ListView, selected item should be painted with gradient;
5\. ListView: all items will start with text-fill black. But on mouse over and/or selected it will change to white.
*/

.list-cell:filled:selected:focused, .list-cell:filled:selected {
    /* 3:, 4: */
    -fx-background-color: linear-gradient(#333 0%, #777 25%, #aaa 75%, #eee 100%);
    -fx-text-fill: white; /* 5 */
}
.list-cell { -fx-text-fill: black; /* 5 */ }
.list-cell:odd { -fx-background-color: white; /* 1 */ }
.list-cell:even { -fx-background-color: #8f8; /* for information */ }
.list-cell:filled:hover { 
    -fx-background-color: #00f; /* 2 */
    -fx-text-fill: white; /* 5 */
} 
```

这导致了这个渲染：

![ListView 渲染变体 2](../Images/25434e594bc612f60db627a5f757df10.png)

# python - 如何导入包含多个模块的 Python 脚本到 Sikuli

> ID：15641484
> 
> 赞同：2
> 
> 时间：2013-03-26T15:51:15.057
> 
> 标签：python, sikuli

我正在尝试从 Sikuli (r930) 调用 Python (2.7) 脚本并使用脚本中的变量。下面是 Python 代码：

```
import sys
import re
import os
import time
from pywinauto import application
from SendKeys import SendKeys
from cStringIO import StringIO

app=application.Application()
app.connect_(path=r'C:\Program Files\myApp\myApp.exe')

backup = sys.stdout

sys.stdout = StringIO()     

app.dlg.print_control_identifiers()

out = sys.stdout.getvalue() 

sys.stdout.close()  # close the stream 
sys.stdout = backup # restore original stdout

regex = re.compile(r'(\d{8}\s*\-\s*\d{8})')
found = re.search(regex, out)

print found.group(0) #pass this variable to Sikuli 
```

我正在捕获`stdout`，因为这是[Pywinauto 的](http://code.google.com/p/pywinauto/) `print_control_identifiers`方法返回的（不是字符串）。此外，我需要一个来自 GUI 应用程序的散列序列号，而我无法通过 Sikuli 获得，因此需要使用 Pywinauto。但是，当我尝试`execfile()`从 Sikuli 拨打电话时，出现错误：

```
ImportError: no module named Pywinauto. 
```

我阅读了文档，我知道 Sikuli (Jython) 可以包含 Python 模块和脚本。此外，我调用的外部 .py 文件在独立运行时运行成功。如果我错过了一步，有人可以告诉我吗？

我用来从 Sikuli 调用上面显示的 .py 文件的代码：

```
aScript = 'c:\\getHash_serial.py'
execfile(aScript) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:28:33.683

您遇到的直接问题是 Jython 找不到您的模块。可能，您将它安装在 Python 下，并且它们不共享模块路径。您可以通过设置[JYTHONPATH](http://www.jython.org/docs/using/cmdline.html#environment-variables)环境变量来解决此问题。

但是，Pywinauto 与本机代码链接，这是 Jython 不支持的。

您可以通过[subprocess 模块](http://www.jython.org/docs/library/subprocess.html)从 Jython 调用常规 Python 来绕过此限制。

# ruby-on-rails - Ruby On Rails Mongoid Group

> ID：15641485
> 
> 赞同：6
> 
> 时间：2013-03-26T15:51:16.647
> 
> 标签：ruby-on-rails, ruby, group-by, mongoid

对于按日期分组，我使用了`group_by`方法。

```
Example: Product.all.group_by {|d| d.created_at } # return Hash 
```

但是 kaminari 不支持 Hash。我使用 Mongoid，我需要使用页面导航（kaminari）按日期分组。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T04:06:03.197

Kaminari 仅支持对数组进行分页，例如

```
Kaminari.paginate_array(an_array).page(1).per(10) 
```

group_by 不是 mongoid 方法，它是 Array 的方法，它是对内存中的所有数据进行分组。为了使用 mongoid 分组功能，您需要使用 mongodb map/reduce。

如果您确实需要在内存中分组结果并将其显示在视图中，则需要手动将哈希转换为数组

# postgresql - Postgresql 初始配置：如何以 postgres 用户身份访问？

> ID：15641488
> 
> 赞同：0
> 
> 时间：2013-03-26T15:51:23.400
> 
> 标签：postgresql, postgresql-9.2, ubuntu-12.10

安装 postgresql 后，我试了一下，输入 createdb mydb，就像文档中写的一样。然后出现以下错误：

```
createdb: could not connect to database postgres: FATAL:  role "xxx" does not exist 
```

我研究了文档，其中说：

> 您需要成为安装 PostgreSQL 的操作系统用户（通常是 postgres）才能创建第一个用户帐户

我通过访问 psql（在我的情况下使用 sudo -u postgres psql，使用 Ubuntu 12.10）来尝试这个。但那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:54:25.973

如果数据库归用户所有，`postgres`您可以执行以下操作

`createdb -U postgres dbname`

因为默认情况下 postgresql 将信任来自本地主机的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:54:21.553

```
su - postgres 
```

登录后：

```
createdb mydb 
```

# wpf - TeeChart WPF 柱状图颜色

> ID：15641489
> 
> 赞同：0
> 
> 时间：2013-03-26T15:51:29.397
> 
> 标签：wpf, histogram, teechart

我正在使用 TeeChart 和直方图系列来显示数据。我想根据值单独为垃圾箱着色，但我发现的只是为每个垃圾箱着色的选项。我希望显示相同值的箱具有相同的颜色。TeeChart 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:14:38.290

是的，这是可能的。您可以在使用适当的 Add 方法覆盖或使用 BeforeDrawPoint 事件填充系列时提供颜色值，如下所示：

```
public Form1()
{
  InitializeComponent();
  InitializeChart();
}

private void InitializeChart()
{
  tChart1.Aspect.View3D = false;

  Histogram histogram1 = new Histogram(tChart1.Chart);

  histogram1.LinePen.Visible = false;
  histogram1.LinesPen.Visible = false;

  for (int i = 0; i < 20; i++)
  {
    histogram1.Add(i);
  }

  histogram1.BeforeDrawPoint += histogram1_BeforeDrawPoint;
}

void histogram1_BeforeDrawPoint(Series series, BeforeDrawPointEventArgs e)
{
  series.Colors[e.ValueIndex] = (series.YValues[e.ValueIndex] > 10) ? Color.Red : Color.Blue;
} 
```

# javascript - MongoDB，从数组中删除对象

> ID：15641492
> 
> 赞同：106
> 
> 时间：2013-03-26T15:51:43.577
> 
> 标签：javascript, arrays, node.js, mongodb, mongoose

文件：

```
{
   _id: 5150a1199fac0e6910000002,
   name: 'some name',
   items: [{
      id: 23,
      name: 'item name 23'
   },{
      id: 24,
      name: 'item name 24'
   }]
} 
```

有没有办法从数组中提取特定对象？IE 如何从 items 数组中提取 id 为 23 的整个 item 对象。

我努力了：

```
db.mycollection.update({'_id': ObjectId("5150a1199fac0e6910000002")}, {$pull: {id: 23}}); 
```

但是我很确定我没有正确使用“拉”。据我了解，pull 将从数组中提取一个字段，而不是从对象中提取一个字段。

任何想法如何将整个对象拉出数组。

作为奖励，我正在尝试在 mongoose/nodejs 中执行此操作，并且不确定这种类型的东西是否在 mongoose API 中，但我找不到它。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-03-26T16:09:11.293

尝试..

```
db.mycollection.update(
    { '_id': ObjectId("5150a1199fac0e6910000002") }, 
    { $pull: { items: { id: 23 } } },
    false, // Upsert
    true, // Multi
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-23T10:23:30.113

我有一个像

[![在此处输入图像描述](../Images/48ca606e02aa563cac0362b197bdd695.png)](https://i.stack.imgur.com/symdV.png)

我必须从地址数组中删除地址

在互联网上搜索了很多后，我找到了解决方案

```
Customer.findOneAndUpdate(query, { $pull: {address: addressId} }, (err, data) => {
    if (err) {
        return res.status(500).json({ error: 'error in deleting address' });
    }

    res.json(data);
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-18T11:43:14.250

我的数据库：

```
{
  "_id" : ObjectId("5806056dce046557874d3ab18"),
  "data" : [ 
    { "id" : 1 }, 
    { "id" : 2 }, 
    { "id" : 3 }
  ]
} 
```

我的查询：

```
db.getCollection('play_table').update({},{$pull:{"data":{"id":3}}},{multi:true} 
```

输出：

```
{
  "_id" : ObjectId("5806056dce046557874d3ab18"),
  "data" : [ 
    { "id" : 1 }, 
    { "id" : 2 }
  ]
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-03-23T06:01:41.943

你也可以试试：

```
db.getCollection('docs').update({ },{'$pull':{ 'items':{'id': 3 }}},{multi:true}) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-01T09:25:17.637

对于数组中的单个记录：

```
db.getCollection('documents').update(
    { },
    {'$pull':{ 'items':{'mobile': 1234567890 }}},
    {new:true}
); 
```

对于数组中具有相同手机号码的多条记录：

```
db.getCollection('documents').update(
    { },
    {
        $pull: {
            items: { mobile: 1234567890 }
        }
    },
    { new:true, multi:true }
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-03T12:14:46.993

用于`$pull`删除数据

```
return this.mobiledashboardModel
.update({"_id": args.dashboardId}, { $pull: {"viewData": { "_id": widgetId}}})
.exec()
.then(dashboardDoc => {
     return {
        result: dashboardDoc
     }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-27T16:05:00.323

Kishore Diyyana：

如果要删除所有元素，包括元素属性列表的键。

这是 mongoDB 未设置运算符的示例：

```
db.UM_PREAUTH_CASE.update(
{ 'Id' : 123}, { $unset: { dataElements: ""} } ) 
```

JSON 看起来像这样：

```
{ "Id":123,"dataElements" : [ { "createdBy" : "Kishore Babu Diyyana", "createdByUserId" : 2020 }, { "createdBy" : "Diyyana Kishore", "createdByUserId" : 2021 } ] } 
```

# java - 为什么我们在 Java 的接口中使用“new”关键字？

> ID：15641495
> 
> 赞同：4
> 
> 时间：2013-03-26T15:51:56.467
> 
> 标签：java, android, oop

我是安卓新手。我在基本的面向对象编程课程中学习过接口为类提供了一种增强其功能的方法。实际上以这种方式增强其功能的类，实现这些接口并覆盖所有用接口编写的方法。

以下代码在 Android 中执行相同的工作：

```
public class MyActivity extends Activity implements OnClickListener {
   // All other code you may expect

   myButton.setOnClickListener(this);

   @override
   public onClick(View view) {
      // Code when view is clicked
   }
} 
```

这段代码是可以理解的。但是下面的代码对我来说毫无意义，我已经在不同的地方搜索了它，但没有得到满意的答案。

```
public class MyActivity extends Activity {
   // All other code you may expect

   myButton.setOnClickListener(new OnClickListner() {

      @override
      public onClick(View view) {
         // Code when view is clicked
      }
  });
} 
```

现在，`OnClickListener()`是 Android 文档中所说的接口，现在我们正在实例化一个接口。不是只实现接口吗？请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T15:52:48.907

`new OnClickListner() {`不是实例化接口，而是声明一个 [**匿名内部类**](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)。基本上是一个匿名类（实现接口 OnClickListner 的类），它本身没有名称。

从[**文档**](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html#declaring-anonymous-classes)：

匿名类表达式包括以下内容：

*   新运营商
*   要实现的接口或要扩展的类的名称。在此示例中，匿名类正在实现接口 OnClickListner。
*   包含构造函数参数的括号，就像普通的类实例创建表达式一样。注意：在实现接口的情况下，没有构造函数，所以你使用一对空括号，就像在这个例子中一样。
*   一个主体，它是一个类声明主体。更具体地说，在正文中，允许方法声明，但不允许声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T06:19:23.437

实际上，这是我在 OOP 中见过的最糟糕的做法之一，而不仅仅是 java。

基本上，您从 中创建一个*匿名内部类*`Interface`，并且您必须立即实现接口提供的所有方法。在这种情况下，将接口视为抽象类（基本上总是如此，或多或少）。

虽然广泛传播并得到某些语言的适当支持，但 java 仅在*语言*级别支持内部类的概念。然而，在*字节码*级别，没有内部类。编译器将这些内部类语言结构从它们的父类中分离出来，将它们作为兄弟姐妹放置在它们旁边，并带有一个 $ 符号和一个连续的数字，并将私有作用域元素（方法、变量）提升到包作用域。现在让它沉入一会儿，并考虑安全影响。

接下来的事情是，这些匿名内部类在 Android 上下文中被过度使用（最初的问题被标记为 Android）完全弄乱了代码并使其完全不可读。*这与干净的代码*相去甚远，我强烈建议遵循这一点，以维护易于阅读和维护的代码。

另一件事是每个人都会`new Interface() { ... };`自然地创建一个新对象。通常你会在 Android 世界的听众中看到这一点。如果您有多个侦听器，请为您自己和您的用户节省一些内存并使用开关实现一个对象...不要每次都创建一个新对象只是因为 Google 示例会这样做，并且因为有些人在此处回答时在他们的示例中这样做在 SO 和教程或论坛中。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:53:39.397

那些 OnClickListener 是匿名类。括号包括类定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T15:57:04.340

如果将 new 与接口一起使用，则必须在创建实现接口但没有自己的名称的[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)`{ }`时覆盖Block 中接口提供的方法。

例如，这允许您拥有多个不同的单击处理程序，而无需创建一个为每个按钮实现 OnClickListner 的类。

# java - 纯 JDBC / Java 中的 DAO 教程

> ID：15641496
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:52:10.230
> 
> 标签：java, activerecord, jdbc, dao, datamapper

我正在寻找有关如何在纯 Java/JDBC 中实现 DAO 层的教程/最佳实践示例。

大多数 DAO 是否基于 Data Mapper 模式？

是否也使用 Active Record 模式？

你怎么做呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:54:05.923

DAO 唯一需要的就是接口和实现。你的接口定义了操作，实现提供了实现。

DAO 的特别之处在于接口和实现的*目的*是专门用于数据访问。您的应用程序处理数据访问的方式隐藏在您的 DAO 抽象之后。

假设您在网上看到了一些 jdbc 代码。您想在 dao 中使用该代码。

```
Statement st = conn.createStatement();
st.executeUpdate("INSERT INTO sometable " +
                   "VALUES (...)"); 
```

所以创建一个接口

```
interface ThingDao {
   public void save(Thing thing);
} 
```

和你的实施

```
public ThingDaoImpl implements ThingDao {

    ThingDaoImpl() {
        // do setup around connections
    }

    public void save(Thing thing) {
        // put the jdbc code here
    }

} 
```

现在假设您想让您的生活变得轻松并使用 Spring 的 JdbcTemplate 之类的东西。DAO 模式不会改变。唯一的变化是在您的实现中，您将使用模板来执行操作。这很重要，因为这意味着**使用您的 Dao 的任何代码都不必更改，因为您没有更改 interface**。这就是DAO 抽象*的意义所在。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:57:21.987

如果你想要无痛的 JDBC，这里是我最喜欢的解决方案... [Spring JDBC Template documentation](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)

不过，您仍然需要了解 Spring

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:01:59.703

有好书，例如：

*   [*JDBC 元数据、MySQL 和 Oracle 方法 问题解决方法*](http://www.apress.com/9781590596371)

*   [*JDBC 秘诀 一种问题解决方法*](http://www.apress.com/9781590595206)

请参阅[如何使用 JDBC 和连接池实现 DAO 管理器的答案？](https://stackoverflow.com/questions/12812256/how-do-i-implement-a-dao-manager-using-jdbc-and-connection-pools)

# python - python中用户指定的替换正则表达式

> ID：15641502
> 
> 赞同：0
> 
> 时间：2013-03-26T15:52:17.783
> 
> 标签：python, regex

处理一个简单的脚本处理文本文件和日志。它必须从命令行获取替换的正则表达式列表。例如：

```
./myscript.py --replace=s/foo/bar/ --replace=s@/etc/hosts@/etc/foo@ --replace=@test\@email.com@root\@email.com@ 
```

有没有一种简单的方法可以为 python re 库提供用户指定的替换模式？并且该模式是否针对字符串运行？任何优雅的解决方案？

如果可能的话，我想避免编写自己的解析器。请注意，我希望支持 /g 或 /i 等修饰符。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:03:39.690

就像评论中提到的那样，您可以使用，但这显然`re.compile()`仅适用于`match`ing 和ing 。`search`假设您只有替换，您可能会执行以下操作：

```
modifiers_map = {
    'i': re.IGNORE,
    ...
}

for replace in replacements:
    # Look for a generalized separator in front of a command
    m = re.match(r'(s?)(.)([^\2]+)\2([^\2]+)\2([ig]*)', replace)
    if not m:
        print 'Invalid command: %s' % replace
        continue
    command, separator, query, substitution, modifiers = m.groups()
    # Convert the modifiers to flags
    flags = reduce(operator.__or__, [modifiers_map[char] for char in modifiers], 0)
    # This needs a little bit of tweaking if you want to support
    # group matching (like \1, \2, etc.). This also assumes that
    # you're only getting 's' as a command
    my_text = re.sub(query, substitution, my_text, flags=flags) 
```

可以说，这是一个粗略的草稿，但我认为它可以让你 90% 的找到你想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:41:07.793

感谢您的回答。鉴于任何提议的解决方案的复杂性以及标准库中缺乏预先支持的解析器，我只是加倍努力并实现了自己的解析器。

它并不比其他提案复杂得多，见下文。我现在只需要编写测试。

谢谢！

```
class Replacer(object):
  def __init__(self, patterns=[]):
    self.patterns = []
    for pattern in patterns:
      self.AddPattern(pattern)

  def ParseFlags(self, flags):
    mapping = {
      'g': 0, 'i': re.I, 'l': re.L, 'm': re.M, 's': re.S, 'u': re.U, 'x': re.X,
      'd': re.DEBUG
    }

    result = 0
    for flag in flags:
      try:
        result |= mapping[flag]
      except KeyError:
        raise ValueError(
            "Invalid flag: %s, known flags: %s" % (flag, mapping.keys()))
    return result

  def Apply(self, text):
    for regex, repl in self.patterns:
      text = regex.sub(repl, text)
    return text

  def AddPattern(self, pattern):
    separator = pattern[0]
    match = []
    for position, char in enumerate(pattern[1:], start=1):
      if char == separator:
        if pattern[position - 1] != '\\':
          break
        match[-1] = separator
        continue
      match += char
    else:
      raise ValueError("Invalid pattern: could not find divisor.")

    replacement = []
    for position, char in enumerate(pattern[position + 1:], start=position + 1):
      if char == separator:
        if pattern[position - 1] != '\\':
          break
        replacement[-1] = separator
        continue
      replacement += char
    else:
      raise ValueError(
          "Invalid pattern: could not find divisor '%s'." % separator)

    flags = self.ParseFlags(pattern[position + 1:])
    match = ''.join(match)
    replacement = ''.join(replacement)
    self.patterns.append((re.compile(match, flags=flags), replacement)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:05:37.113

您可以使用空格作为分隔符来利用 shell 的命令行解析器：

```
$ myscript --replace=foo bar \
>          --replace=/etc/hosts /etc/foo gi \
>          --replace=test@email.com root@email.com 
```

`g`标志在 Python 中是默认的，因此您需要为其添加特殊支持：

```
#!/usr/bin/env python
import re
from argparse import ArgumentParser
from functools import partial

all_re_flags = 'Lgimsux' # regex flags
parser = ArgumentParser(usage='%(prog)s [--replace PATTERN REPL [FLAGS]]...')
parser.add_argument('-e', '--replace', action='append', nargs='*')
args = parser.parse_args()
print(args.replace)

subs = [] # replacement functions: input string -> result
for arg in args.replace:
    count = 1 # replace only the first occurrence if no `g` flag
    if len(arg) == 2:
        pattern, repl = arg
    elif len(arg) == 3:
        pattern, repl, flags = arg
        if ''.join(sorted(flags)) not in all_re_flags:
            parser.error('invalid flags %r for --replace option' % flags)
        if 'g' in flags: # add support for `g` flag
            flags = flags.replace('g', '')
            count = 0 # replace all occurrences
        if flags: # embed flags
            pattern = "(?%s)%s" % (flags, pattern)
    else:
        parser.error('wrong number of arguments for --replace option')
    subs.append(partial(re.compile(pattern).sub, repl, count=count)) 
```

你可以使用`subs`如下：

```
input_string = 'a b a b'
for replace in subs:
    print(replace(input_string)) 
```

例子：

```
$ ./myscript -e 'a b' 'no flag' -e 'a B' 'with flags' ig 
```

输出：

```
[['a b', 'no flag'], ['a B', 'with flags', 'ig']]
no flag a b
with flags with flags 
```

# ruby-on-rails - Rails：Has_many 直通查询取决于直通表属性

> ID：15641504
> 
> 赞同：12
> 
> 时间：2013-03-26T15:52:19.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

has_many 通过查询有一些问题。

在这里使用示例：http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

```
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
end

class Appointment < ActiveRecord::Base
  belongs_to :physician
  belongs_to :patient
end

class Patient < ActiveRecord::Base
  has_many :appointments
  has_many :physicians, :through => :appointments
end 
```

约会表有一个名为**约会日期的列**

我如何从特定医生那里获得在给定日期预约的所有患者？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T16:11:31.003

```
Patient.includes(:physicians, :appointments).where('physicians.id = ? AND appointments.appointment_date = ?', <id or ids array>, Date.today) 
```

其中 Date.today 可以用任何东西进行更改，并且 pysician 由 id 或 id 数组指定。

你也可以这样做：

```
physician = Physician.find(id)
patients = physician.patients.includes(:appointments).where('appointments.appointment_date  = ?', some_date) 
```

编辑：

在 Rails 4 及更高版本中，您需要添加`references(:appointments)`到查询中才能在 where 子句中使用约会。

# css - 用于 IE 的 CSS Underscore hack - 仍然相关吗？

> ID：15641506
> 
> 赞同：9
> 
> 时间：2013-03-26T15:52:25.230
> 
> 标签：css, internet-explorer

我正在为一个大型网站整理 CSS 以优化它，并注意到整个过程中有很多旧的下划线黑客，例如 _width:200px

我已经尝试在网上查找，但在 2010 年之后无法获得任何答案。我正在获取有关用户如何浏览网站以及他们正在使用哪些浏览器的数据，但我想知道现在是否普遍认为删除这些遗留问题是安全的从文件中破解？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T15:54:28.167

下划线 hack 仅适用于 IE6 及更早版本。如果不再需要 IE6 支持，那么从样式表中删除所有出现的 hack（例如您的示例）是安全的，否则它们将永远不会被使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:04:16.567

建议删除这些 hack，因为现在 IE6 的使用率已降至[最低](http://thenextweb.com/microsoft/2012/01/03/the-us-prepares-to-say-goodbye-to-ie6-as-usage-drops-below-1/)，并且希望您的代码尽可能干净且无 hack。

但是如果用户确实使用 IE6，他们应该被告知他们的浏览器不受支持。来自 HTML5 样板：

```
<!--[if lt IE 7]>
     <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:56:52.030

我建议你简单地用这样的东西替换你的“黑客”：

```
<!--[if lte IE 9]>
    <style>
    </style>
    <link />
<![endif]--> 
```

它将为您提供最大程度的控制，因为您可以控制哪些版本使用哪些标记。

# java - Struts2 增加前一组 价值

> ID：15641515
> 
> 赞同：9
> 
> 时间：2013-03-26T15:52:52.467
> 
> 标签：java, jsp, struts2, jsp-tags

我正在使用 Struts2 处理 JSP，我必须在两个列表上进行迭代，并更改每个`<tr/>`打印的背景代码。

**我的 JSP 片段：**

```
<s:set var="counter" value="0" scope="page" />
<s:iterator value="listaContoCapitale" status="i">
    <s:iterator value="utilizzi" status="j">

    <s:if test="#counter == 0 || #counter % 2 == 0">
        <s:set var="trclass" value="'rigaSfondo1'" scope="page" />
    </s:if>
    <s:else>
        <s:set var="trclass" value="''" scope="page" />
    </s:else> 
    <tr class="${trclass}">
        ....tds
    </tr>
    </s:iterator>
    <s:set var="counter" value="here i have to change its value (increment it by1)" />
</s:iterator> 
```

我需要在内循环的每一步增加我的计数器。有没有办法通过一个简单的 struts 标签来增加我的计数器值？我知道我可以使用 Java scriptlet，但如果可能的话，我宁愿保持 JSP 清晰。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T16:08:47.453

您无需在迭代器中使用`#i.index`或创建引用变量。`#i.count`它已经被迭代器标签本身增加了。

> 请注意，“count”是从 1 开始的，“index”是从 0 开始的。

始终检查[文档](https://struts.apache.org/tag-developers/iterator-tag.html)。

如果您仍然需要自己的柜台

```
<s:set var="counter" value="0"/> 
```

增量

```
<s:set var="counter" value="%{#counter+1}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-25T17:24:23.210

你可以使用这个简单的方法来做这个 struts2 增量

```
<s:set var="count" value="1"/>
<s:iterator value="yourlisthere">
<div><s:property value="#count" /><s:property/></div>
<s:set var="counter" value="%{#count+1}"/>
<s:set var="count" value="%{#counter}"/>
</s:iterator> 
```

jsp struts2

# amazon-cloudfront - Amazon Cloudfront 即使在香港也不够快

> ID：15641522
> 
> 赞同：0
> 
> 时间：2013-03-26T15:53:02.327
> 
> 标签：amazon-cloudfront

我知道 Amazon Cloudfront 会提高下载速度。

但是，它说他们在香港有服务器，

我将它与我的其他本地网络托管公司进行了比较，

即使图像多次加载，CloudFront 似乎仍然很慢。

是不是香港的Amazon CloudFront服务器跟本地服务器比起来还是太慢了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T22:57:03.920

我将文件上传到加拿大服务器。从香港通过云端获得 290KB/s，而通过直接访问加拿大服务器获得 190KB/s。实际上对我来说听起来不错。

# ms-access-2007 - 计算两行之间的差异 MS Access

> ID：15641526
> 
> 赞同：1
> 
> 时间：2013-03-26T15:53:16.233
> 
> 标签：ms-access-2007

我无法计算两行之间的差异。当前查询如下

```
Sessiontype Question    Average
Admission   Question 1  2.25
Discharge   Question 1  4.25 
```

我需要计算出院平均值 - 问题 1 的录取平均值。请注意，这只是查询的一个片段，实际上有 5 个问题。所以问题是我不确定如何在 MS Access 中处理它。

# git - 在 Git Repo 中寻找不同 web.configs 的解决方案

> ID：15641527
> 
> 赞同：1
> 
> 时间：2013-03-26T15:53:17.957
> 
> 标签：git, coldfusion, web-config, coldfusion-10

因此，在我的开发实例和生产实例中，我的 web.config 文件中有一些小的更改用于重写。然而有很多相似之处。什么是跟踪文件的常见/良好/最佳解决方案，但仍然有一些如何保持正确。

我的想法是制作一个 web.config.prod 和一个 web.config.dev 并为我推送它们。然后，当我拉动时，根据我的需要删除 .dev 或 .prod 。然后在我再次提交文件时将其添加回来。

我目前正在做的是将生产版本保留在存储库中，并且在我的开发实例上我只是不提交它，但我发现我自己经常需要取消选中 TortiseGit 中的框。我认为忽略该文件是行不通的。那会一起忽略它吗？

这是一个私人仓库，所以我不关心其他人会如何使用它。

如果这个解决方案可以通过某种“动态”web.config 来解决，我也会对此持开放态度。以下是 web.config 可能不同的原因。

1.  删除 www 的规范域名。显然，我在 prod 和 dev 上的域不同，所以如果我使用一个文件，它会将我发送到该文件中的任何一个。
2.  我们经常发现自己在开发域的文件夹中处理项目，但在生产中处于根级别。所以我必须在开发中添加/文件夹，而在生产中添加/。

如果我能用更好的 web.config 解决这个问题，我会对此持开放态度。否则我只需要一个有组织的 Git 解决方案。

关于组织此代码的可行解决方案的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:05:09.807

这通常通过 web.config 转换进行管理。您有一个用于调试的构建配置和一个用于发布的构建配置。然后，每个配置的 web.config 文件都会根据环境描述不同的值。当您将站点发布到特定配置时，将对基本 web.config 进行任何相关转换。

参见例如[http://msdn.microsoft.com/en-gb/library/dd465318(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/dd465318(v=vs.100).aspx)

# python - admin.sites.url 密码传输

> ID：15641529
> 
> 赞同：1
> 
> 时间：2013-03-26T15:53:22.443
> 
> 标签：python, django

当您登录到 django 时，密码是经过哈希处理然后传输还是以明文传输，服务器进行哈希处理？

这是在不使用 https 的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:54:44.443

它以明文形式发送，然后服务器对其进行哈希处理。您需要使用 https 来防止窃听。

# c# - 在 C# 2.0 中定义“灵活表”的数据结构？

> ID：15641532
> 
> 赞同：1
> 
> 时间：2013-03-26T15:53:30.847
> 
> 标签：c#, data-structures, dictionary, hashtable, c#-2.0

我正在尝试在 C# 2.0 中实现一个可以像这样表示的数据结构：

```
 | field1 | field2 | field3 | ... (variable length) ...
  +--------+--------+--------+-------------------
1 | int0   | float0 | bool0  | ...
2 | int1   | float1 | bool1  | ...
. |
. |
. |
(variable) ... 
```

目前，我正在考虑一些非常基本的事情：

```
public class DataStructure {
    string name;
    List<string> fieldNames;
    List<Item> items;
}

public class Item {
    List<object> values;
} 
```

然后，您可以使用隐式定义要检索的类型的方法（即`bool GetBool (string field)`, `int GetInteger (string field)`）进行访问，因此您可以使用一小组内置类型和自定义类（例如`CustomBaseObject`）。

是否有任何现有的数据结构实现可以做到这一点？这是解决我在这里提出的问题的另一种（更好的）方法吗？（考虑访问和修改操作的复杂性）

另外，我不知道装箱/拆箱的最佳方法是什么`List<object> values`，如果除了像`(type)values[index]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:56:02.480

在 C# 4.0 中，您可以使用 获得这些结构的体面实现，从而为您提供更好的关键字`ExpandoObject`开发体验。`dynamic`请参阅：http: [//msdn.microsoft.com/en-us/magazine/ff796227.aspx](http://msdn.microsoft.com/en-us/magazine/ff796227.aspx)以获得很好的介绍。

在 C# 2.0 中，您可以使用实现`IExpando`. 请参阅[什么是 IExpando 以及它在哪里使用？](https://stackoverflow.com/questions/3414162/what-is-iexpando-and-where-is-it-used)详情。

如果您选择不走这条路，那么您可能希望将内部实现从两个列表切换到一个，`IDictionary<String, Object>`因为它更容易实现，并且随着字段的添加在性能上迅速超越双列表实现。

# javascript - 在 highcharts 中设置四小时范围

> ID：15641533
> 
> 赞同：1
> 
> 时间：2013-03-26T15:53:36.033
> 
> 标签：javascript, jquery, highcharts, highstock

在启用滚动条的情况下，我在 highstock 图表中显示了一些生命体征。无论用户滚动到哪里，或者加载了多少数据，我都只想在 xAxis 上显示一个 4 小时的窗口。最初加载图表时，我设置了最小值和最大值，并将 minRange 设置为四个小时，但是当使用滚动条时，会出现一些非常奇怪的行为：xAxis 比例发生变化，滚动条似乎跳回来回。以下是一些配置选项：

```
defaultOptions = {
    title: {
        text: ""
    },
    navigator: {
        enabled: false
    },
    rangeSelector: {
        enabled: false
    },
    plotOptions: {
        series: {
            stickyTracking: false
        }
    },
    tooltip: {
        animation: false,
        crosshairs: false,
        shared: false,
        formatter: tooltipFormatter
    },
    credits: {
        enabled: false
    },
    xAxis: {
        minRange: chartRangeInMillis,
        maxZoom: chartRangeInMillis,
        min: 1364229900000,
        max: 1364244300000,
        tickInterval: 15 * 60 * 1000,
        minTickInterval: 15 * 60 * 1000,
        startOnTick: true,
        gridLineWidth: 1,
        ordinal: false,
        endOnTick: false,
        labels: {
            formatter: function () {
                var d = new Date(this.value);
                return (d.getMinutes() === 0) ? '<b>' + Highcharts.dateFormat('%H:%M', this.value) + '</b>' : d.getMinutes();
            }
        }
    },
    yAxis: {
        lineWidth: 2,
        min: 0,
        max: 250,
        offset: 0,
        tickInterval: 50,
        showLastLabel: true,
        labels: {
            align: 'right',
            x: -5,
            y: 3
        }
    }
}; 
```

你可以在这里看到行为：http: [//jsfiddle.net/6w3C3/](http://jsfiddle.net/6w3C3/)

我尝试在重绘和其他事件回调中设置极端值，但无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:52:07.563

事实证明，如果我将 startOnTick 选项设置为 false，并删除 minRange，滚动问题就解决了。

# r - 雅虎代码、时区和合并

> ID：15641534
> 
> 赞同：2
> 
> 时间：2013-03-26T15:53:37.647
> 
> 标签：r, yahoo, xts

我想从雅虎下载标准普尔 500 指数、道琼斯指数和 30 年期国债的每日数据，将数据映射到适当的时区，并将它们与我自己的数据合并。我有几个问题。

1.  我的第一个问题是让代码正确。在 yahoo 的网站上，代码看起来是：^GSPC、^DJI 和 ^TYX。但是，^DJI 失败。知道为什么吗？

2.  我的第二个问题是我想将时区限制为 GMT（我想确保我的所有数据都在同一个时钟上，GMT 似乎是一个中立的选择），但我无法让它工作。

3.  我的第三个问题是我想将雅虎数据与我自己的数据合并，这些数据是通过其他方式获得的，并以不同的格式提供。这也是每日数据。

这是我尝试将数据限制在 GMT 时区。在我的 R 脚本顶部执行。

```
Sys.setenv(TZ = "GMT")
# > Sys.getenv("TZ")
# [1] "GMT"
# the TZ variable is properly set
# but does not affect the time zone in zoo objects, why? 
```

这是我获取雅虎数据的代码：

```
library("tseries")
library("xts")

date.start <- "1999-12-31"
date.end <- "2013-01-01"

# tickers <- c("GSPC","TYX","DJI")
# DJI Fails, why?
# http://finance.yahoo.com/q?s=%5EDJI
tickers <- c("GSPC","TYX") # proceed without DJI

z <- zoo()
index(z) <- as.Date(format(time(z)),tz="")

for ( i in 1:length(tickers) ) 
  { 
     cat("Downloading ", i, " out of ", length(tickers) , "\n")
     x <- try(get.hist.quote(
         instrument = paste0("^",tickers[i])
         , start = date.start
         , end = date.end
         , quote = "AdjClose"
         , provider = "yahoo"
         , origin = "1970-01-01"
         , compression = "d"
         , retclass = "zoo" 
         , quiet = FALSE )
       , silent = FALSE )
     print(x[1:4]) # check that it's not empty
     colnames(x) <- tickers[i]
     z <- try( merge(z,x), silent = TRUE )
} 
```

这是我的数据集的 dput(head(df))：

```
df <- structure(list(A = c(-0.011489000171423, -0.00020300000323914, 
0.0430639982223511, 0.0201549995690584, 0.0372899994254112, -0.0183669999241829
), B = c(0.00110999995376915, -0.000153000000864267, 0.0497750006616116, 
0.0337960012257099, 0.014121999964118, 0.0127800004556775), date = c(9861, 
9862, 9863, 9866, 9867, 9868)), .Names = c("A", "B", "date"
), row.names = c("0001-01-01", "0002-01-01", "0003-01-01", "0004-01-01", 
"0005-01-01", "0006-01-01"), class = "data.frame") 
```

我想将 df 中的数据与 z 中的数据合并。我似乎无法让它工作。

我是 R 新手，非常愿意听取您关于效率、最佳实践等方面的建议。谢谢。

**编辑：解决方案**

1.  关于第一个问题：按照 GSee 的建议，可以使用 quantmod 包下载道琼斯工业平均指数数据：因此，不要使用 yahoo 不再提供的“^DJI”代码，而是使用“DJIA”代码。请注意，“DJIA”代码中没有插入符号。

2.  关于第二个问题，Joshua Ulrich 在评论中指出“日期没有时区，因为日子没有时间分量。”

3.  关于第三个问题：正如 agstudy 在评论中指出的那样，数据框的日期似乎已损坏。

我的解决方案依赖于 quantmod 包和附加的 zoo/xts 包：

```
library(quantmod) 
```

这是我用来从 csv 文件中获取正确日期的代码：

```
toDate <- function(x){ as.Date(as.character(x), format("%Y%m%d")) }
dtz <- read.zoo("myData.csv"
  , header = TRUE
  , sep = ","
  , FUN = toDate
)
dtx <- as.xts(dtz) 
```

csv 文件中的日期以“19861231”格式存储在单个列中。获得正确日期的关键是将日期包装在“as.character()”中。此代码的一部分灵感来自[从 csv 到 xts 的 R-Stock 市场数据](https://stackoverflow.com/questions/9335917/r-stock-market-data-from-csv-to-xts)。我还发现 zoo/xts 手册很有帮助。

然后我从这个数据集中提取日期范围：

```
date.start <- start(dtx)
date.end <- end(dtx) 
```

我会将这些日期与 quantmod 的 getSymbols 函数一起使用，以便我下载的其他数据将涵盖同一时期。

这是我用来获取所有三个代码的代码。

```
tickers <- c("^GSPC","^TYX","DJIA")
data <- new.env() # the data environment will store the data
do.call(cbind, lapply( tickers
    , getSymbols
    , from = date.start
    , to = date.end
    , env = data # data saved inside an environment
    )
  )
ls(data)  # see what's inside the data environment
data$GSPC  # access a particular ticker 
```

另请注意，正如 GSee 在评论中指出的那样，选项*auto.assign=FALSE*不能与选项*env=data*结合使用（否则下载失败）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:46:48.983

1.  雅虎[不提供 ^DJI 的历史数据](https://stackoverflow.com/a/3681992/967840)。目前，您似乎可以使用股票代码“DJIA”获得相同的数据，但您的里程可能会有所不同。
2.  在这种情况下它*确实*有效，因为您只处理日期
3.  您提供的`df`对象是从 0001 年开始的年度数据。所以，这可能不是您想要的。

这是我如何获取和合并这些系列（或使用环境并且只调用一次`getSymbols`）

```
library(quantmod)
do.call(cbind, lapply(c("^GSPC", "^TYX"), getSymbols, auto.assign=FALSE)) 
```

# sql - SQL Server 为 3 个表创建复杂的 SQL 查询

> ID：15641537
> 
> 赞同：-2
> 
> 时间：2013-03-26T15:53:49.603
> 
> 标签：sql, sql-server, sql-server-2008

请帮我为 SQL Server 2008 创建这个 SQL 查询。

我已经浪费了 1 天的时间来思考这个问题，但我找不到解决方案：

我有 3 个 [tables] 和各自的（列）：

*   `[table_users]`TB1`(Id, Name)`
*   `[table_schedule]`TB2`(Id, userId, dateScheduled)`
*   `[table_schedule_confirmation]`TB3`(Id, scheduleId, confirmationStatus)`

    确认状态 -> 0 = 取消，1 = 确认

我必须通过选择一天进行过滤`[TB1]`，它必须仅列出以下用户名：

*   根本没有安排（在选定的日期`userId`不存在）`[TB2]`

或者

*   如果已安排，则 ( `scheduleId`) 中有一个匹配的确认，`[TB3]`并且 ( `confirmationStatus`) 必须为 0（已取消）

问题：

*   `TB2`和日期`TB3`中可以有多个条目`userId`

日期过滤器 = 31/03/2013

情况1（1个确认的时间表）：

[情况1 http://img255.imageshack.us/img255/1508/sqld.png](http://img255.imageshack.us/img255/1508/sqld.png)

如您所见，我为用户 1 安排了 4 次，但他先取消了 3 次，仅在第 4 次确认。

情况 2（1 个待定时间表）：

[情况1 http://img854.imageshack.us/img854/8116/sql2s.png](http://img854.imageshack.us/img854/8116/sql2s.png)

在这种情况下，用户尚未确认第 4 个（id=16）计划。

情况 3（所有日程取消）：

[情况1 http://img41.imageshack.us/img41/5720/sql3s.png](http://img41.imageshack.us/img41/5720/sql3s.png)

用户取消了所有 4 个计划。

情况 4（该日期没有用户安排）：

[情况1 http://img255.imageshack.us/img255/9679/sql4.png](http://img255.imageshack.us/img255/9679/sql4.png)

所选日期没有时间表。

在简历中：

按日期过滤，我必须仅列出适用于情况 3 和 4 而不适用于情况 1 和 2 的用户！

我必须制作此过滤器，以仅使用当天可用的用户填充下拉列表。

这是我迄今为止尝试过的：

```
DECLARE @dataAg datetime SET @dataAg = '2013/03/31 16:30'

SELECT T1.id, T1.name 
FROM [tbl_users] T1
WHERE
    (NOT EXISTS
         (SELECT * 
          FROM [tbl_schedule] T2 
          WHERE T2.userId = T1.id 
          AND CONVERT(date,T2.scheduledDate) = CONVERT(date, @dataAg))
    )
    OR
    (EXISTS
         (SELECT * 
          FROM [tbl_schedule] T2, [tbl_scheduleConfirmation] T3 
          WHERE T2.id = T3.idSchedule 
            AND T2.userId = T1.id 
            AND CONVERT(date,T2.scheduledDate) = CONVERT(date, @dataAg))
     AND
     NOT EXISTS
          (SELECT * 
           FROM [tbl_schedule] T2, [tbl_scheduleConfirmation] T3 
           WHERE T2.id = T3.idSchedule 
             AND T3.confirmation = 1 
             AND T2.idUser = T1.id 
             AND CONVERT(date, T2.scheduledDate) = CONVERT(date, @dataAg))
          ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:15:06.433

最后我得到了它。

```
DECLARE @dataAg datetime SET @dataAg = '2013/03/31 16:30'

SELECT T1.id, T1.name FROM [tbl_users] T1
WHERE
NOT EXISTS(
    SELECT * FROM [tbl_schedule] T2 WHERE T2.userId = T1.id AND CONVERT(date,T2.scheduledDate) = CONVERT(date,@dataAg)
    )
OR
(
NOT EXISTS
    (
        SELECT * FROM [tbl_schedule] T2 WHERE
        NOT EXISTS
        (
            SELECT * FROM [tbl_scheduleConfirmation] T3 WHERE T2.id = T3.idSchedule 
        )
        AND T2.userId = T1.id AND CONVERT(date,T2.scheduledDate) = CONVERT(date,@dataAg)
    )
AND
NOT EXISTS(
    SELECT * FROM [tbl_schedule] T2, [tbl_scheduleConfirmation] T3 WHERE 
    T2.id = T3.idSchedule AND T3.confirmation = 1 AND T2.userId = T1.id AND CONVERT(date,T2.scheduledDate) = CONVERT(date,@dataAg)
    )
) 
```

不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:04:28.747

假设您想要 TB1 中的所有列，此查询应该可以满足您的需求。

```
SELECT * 
FROM TB1 
WHERE ID IN 
      (SELECT ID 
       FROM TB3 
       WHERE confirmationStatus = 1 
         AND scheduleID IN 
             (SELECT ID 
              FROM TB2 
              WHERE DATE(dateScheduled) = 'YOUR_ENTERED_DATE')) 
```

将来，您可能还希望包含您正在使用的内容（mySQL、SQL Server 等）

# r - 与时间融为一体

> ID：15641538
> 
> 赞同：3
> 
> 时间：2013-03-26T15:53:50.520
> 
> 标签：r, reshape, reshape2, melt, chron

我正在尝试使用 chron 类融化数据框

```
library(chron)
x = data.frame(Index = as.chron(c(15657.00,15657.17)), Var1 = c(1,2), Var2 = c(9,8))
x
                Index Var1 Var2
1 (11/13/12 00:00:00)    1    9
2 (11/13/12 04:04:48)    2    8

y = melt(x,id.vars="Index")
Error in data.frame(ids, variable, value, stringsAsFactors = FALSE) : 
  arguments imply differing number of rows: 2, 4 
```

我可以欺骗`as.numeric()`如下：

```
x$Index= as.numeric(x$Index)
y = melt(x,id.vars="Index")
y$Index = as.chron(y$Index)
y
                Index variable value
1 (11/13/12 00:00:00)     Var1     1
2 (11/13/12 04:04:48)     Var1     2
3 (11/13/12 00:00:00)     Var2     9
4 (11/13/12 04:04:48)     Var2     8 
```

但它可以更简单吗？（我想保留 chron 类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:33:16.670

(1) I assume you issued this command before running the code shown:

```
library(reshape2) 
```

In that case you could use the reshape package instead. It doesn't result in this problem:

```
library(reshape) 
```

Other solutions are to

(2) use R's `reshape` function:

```
reshape(direction = "long", data = x, varying = list(2:3), v.names = "Var") 
```

(3) or convert the chron column to numeric, use `melt` from the reshape2 package and then convert back:

```
library(reshape2)
xt <- transform(x, Index = as.numeric(Index))
transform(melt(xt, id = 1), Index = chron(Index)) 
```

ADDED additional solutions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:18:21.733

我不确定，但我认为这可能是一个“疏忽” **（**或者可能`data.frame`，但这似乎不太可能）。

`melt.data.frame`在**reshape2**中构建数据框时会出现此问题，该数据框通常使用回收，但以下部分`data.frame`：

```
for (j in seq_along(xi)) {
    xi1 <- xi[[j]]
    if (is.vector(xi1) || is.factor(xi1)) 
        xi[[j]] <- rep(xi1, length.out = nr)
    else if (is.character(xi1) && class(xi1) == "AsIs") 
        xi[[j]] <- structure(rep(xi1, length.out = nr), class = class(xi1))
    else if (inherits(xi1, "Date") || inherits(xi1, "POSIXct")) 
        xi[[j]] <- rep(xi1, length.out = nr)
    else {
        fixed <- FALSE
        break
    } 
```

似乎出错了，因为 chron 变量既不继承 Date 也不继承 POSIXct。这消除了错误，但改变了日期时间：

```
x = data.frame(Index = as.chron(c(15657.00,15657.17)), Var1 = c(1,2), Var2 = c(9,8))
class(x$Index) <- c(class(x$Index),'POSIXct')
y = melt(x,id.vars="Index") 
```

就像我说的，这有点像*某处*的虫子。我的钱是需要**chron**将 POSIXct 添加到类向量中，但我可能错了。显而易见的替代方法是使用 POSIXct 日期时间。

# mysql - 选择不同的值并按同一列（值）排序

> ID：15641539
> 
> 赞同：3
> 
> 时间：2013-03-26T15:53:51.927
> 
> 标签：mysql, select, sql-order-by, distinct

我试图找到一些东西来帮助我解决这个问题，但没有运气。

我有一列“slide_no”，值为 1-4。我想通过 slide_no 从数据库中选择具有不同 slide_no 顺序的所有内容，但显示随机选择的图像。

数据库表

```
幻灯片 ID | 幻灯片名称 | 幻灯片编号 | fk_project_id
  1 | pic1.jpg | 1 | 2
  2 | pic2.jpg | 3 | 4
  3 | pic3.jpg | 2 | 3
  4 | pic4.jpg | 4 | 1
  5 | pic5.jpg | 2 | 6
  6 | pic6.jpg | 3 | 5

```

如您所见，slide_no 不必是唯一的，我希望它能够在每个页面加载时显示随机图像。到目前为止，我只能生成一个查询来获取前 4 张图像。

是否可以按 slide_no 订购并获得具有不同（仍按 slide_no 订购）图像的随机图像？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:01:46.873

MySQL 提供[`ORDER BY RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)了这一点。

> `ORDER BY RAND()`结合`LIMIT`可用于从一组行中选择随机样本。

查询将是：

```
SELECT *
FROM ( SELECT *
    FROM `tblName`
    GROUP BY slide_no 
    ORDER BY RAND()
) `tempTable`
ORDER BY slide_no ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:58:19.703

如果您每次只寻找一个随机 ID，您可以尝试这样的事情。

```
SELECT slide_id
FROM {table_name} 
ORDER BY RAND()
LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:57:59.183

工作示例：

[http://www.sqlfiddle.com/#!2/0664c/8](http://www.sqlfiddle.com/#!2/0664c/8)

```
Select slide_name, slide_no From
(SELECT *
FROM ( SELECT *
    FROM tableName
    GROUP BY slide_no, slide_name 
    ORDER BY RAND()
) `tempTable`
 ) x
Group by slide_no
ORDER BY slide_no ASC
limit 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:02:42.497

```
SELECT slide_no
, ( SELECT TOP 1 slide_name 
    FROM #tmp T2 
    WHERE T2.slide_no = T1.slide_no     
    ORDER BY RAND() --You can place other logic to "randomize" here in the future
   )
FROM #tmp T1
GROUP BY slide_no; 
```

我不确定这是否能满足您的需求。问题是具有相同种子值的 RAND() 重复调用返回相同的结果。如果您希望它真正随机，那本身就是另一个问题。请参阅[此处](http://msdn.microsoft.com/en-us/library/ms177610.aspx)以在 SQL 中生成随机数。

# ruby - pry 在 irb 调试器中不可用

> ID：15641540
> 
> 赞同：0
> 
> 时间：2013-03-26T15:53:56.287
> 
> 标签：ruby, debugging, pry

我想在 irb/debugger 中使用 pry，所以我可以：

*   在 pry 内部调用 step、next、continue、finish
*   仍然可以设置断点等。

我所做的是以下内容：

```
$ gem install pry
$ gem install debugger
$ gem install debugger-pry 
```

在我插入的代码中`require 'debugger'; debugger`

然后我用 开始我的程序`ruby example`，irb 提示开始，如[这里](https://github.com/pry/debugger-pry)所述，它应该在 上显示 pry 命令`help`，但它没有。

```
ruby-debug help v1.5.0
...
(rdb:1) pry
*** Unknown command: "pry".  Try "help". 
```

知道如何检查它是否安装正确或我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:19:20.737

我认为你需要：

```
require 'debugger/pry' 
```

您可以将其添加到 example.rb 文件的顶部。

# excel - 打开用户指定的 Excel 工作簿并将数据范围复制到另一个工作簿

> ID：15641558
> 
> 赞同：3
> 
> 时间：2013-03-26T15:54:43.317
> 
> 标签：excel, vba

我正在尝试在 Excel 中运行一个宏，用户选择要打开的文件，该宏将从该工作簿复制一个范围并将其粘贴到原始工作簿中用户指定的单元格。我对代码的尝试如下所示。我将“wbThis”作为要粘贴到的原始工作簿，将“wbTarget”作为正在打开和复制的工作簿。当我运行代码时，我可以选择要打开的文件，但它会给出“需要对象”的错误消息，并且不会进一步进行复制和粘贴。

有没有办法使用 Workbook.Open 而不是 Application.GetOpenFilename 但仍然让用户能够选择要打开的文件？

谢谢您的帮助。

```
Dim wbTarget As Workbook
Dim wbThis As Workbook

Set wbThis = ActiveWorkbook
Set wbTarget = Application.GetOpenFilename(FileFilter:="Excel workbook (*.xls),*.xls", Title:="Open data")

wbThis.Activate
Set rDest = Application.InputBox(Prompt:="Please select the Cell to paste to", Title:="Paste to", Type:=8)
On Error GoTo 0
wbTarget.Activate
Application.CutCopyMode = False
wbTarget.Range("A1").Select
wbTarget.Range("B6:B121").Copy
wbThis.Activate
rDest.PasteSpecial (xlPasteValues)
Application.CutCopyMode = False

wbTarget.Close False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:04:17.740

GetOpenFileName 并没有真正打开文件，只是获取它的名称。尝试做`Application.Workbooks.Open(TheResultOfGetOpenFileName)`

```
dim FileName as string
FileName = Application.GetOpenFilename(FileFilter:="Excel workbook (*.xls),*.xls", Title:="Open data")

Set wbTarget = Application.Workbooks.Open(FileName) 
```

# delphi - 德尔福烛台 Techart

> ID：15641566
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:55:12.027
> 
> 标签：delphi, teechart

我正在使用 TeeChart VCL Delphi 模块。我正在尝试绘制烛台图。我有以下问题：

1.  当我运行代码时，它会在右侧显示最后日期数据。但是，y 轴根本不会自动缩放。如果我向后滚动，它会自动调整 y 轴刻度。但是，如果我走到尽头的右边，它就不会再自动缩放 y 轴了。我究竟做错了什么？
2.  x 轴是星期几。但是，我没有周末的数据。它显示为空白空间。我该如何删除它？
3.  如何更改光标以显示您选择的 X、Y 的日期/时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:42:46.950

> 当我运行代码时，它会在右侧显示最后日期数据。但是，y 轴根本不会自动缩放。如果我向后滚动，它会自动调整 y 轴刻度。但是，如果我走到尽头的右边，它就不会再自动缩放 y 轴了。我究竟做错了什么？

将Y轴（左轴）设置为自动怎么样？例如：

```
 Chart1.Axes.Left.Automatic:=True; 
```

更激进的解决方案是在添加每个点后强制图表重新绘制。

```
 Series1.Add(value);
  Chart1.Draw; 
```

如果有任何帮助，请向我们发送一个简单的示例项目，我们可以“按原样”运行以在此处重现问题。[您可以在此处](http://www.steema.net/upload/)附加您的文件。

> x 轴是星期几。但是，我没有周末的数据。它显示为空白空间。我该如何删除它？

您应该按照新功能演示中的*All Features\Welcome!\Chart Styles\Financial\Candle (OHLC)\Axis Labels no Weekends示例执行操作。*此演示包含在注册版和评估版中。否则你可以[在这里](http://www.steema.com/download/vcl)下载。

> 如何更改光标以显示您选择的 X、Y 的日期/时间？

演示中有两个示例可以帮助您：

*所有功能\Welcome!\Tools\Annotation\Annotation 标注*

*所有功能\欢迎！\工具\光标\同步两个*

# javascript - Javascript单引号替换被忽略

> ID：15641567
> 
> 赞同：1
> 
> 时间：2013-03-26T15:55:12.140
> 
> 标签：javascript, photoshop, quote, photoshop-script

我正在编写一个 Photoshop Javascript 脚本文件。出于所有意图和目的，此脚本在运行时会多次复制特定文本层。如果原始文本层包含撇号，则复制的实例将撇号替换为方形块。所以“It's”变成了“It[]s”（显然不是括号，而是方块。）

这是代码：

```
titleLayer = al.textItem.contents;

newTitleLayer = titleLayer.replace("'", "\'");
alert(newTitleLayer); // At this point, this works:  "It's"

persistentSetting.putData(0,newTitleLayer);
app.putCustomOptions("text_contents4",persistentSetting,true);

alert(persistentSetting.getData(0)); // At this point, it does not.  It shows the square. "It[]s" 
```

我知道这必须是一个简单的问题，我以前从未遇到过。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:08:03.463

我猜你想要

```
newTitleLayer = titleLayer.replace(/'/g, "\\'");
//                                 ^^^^   ^
//    regex to match *all* apostrohpes     escape the backslash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:13:25.627

最终为我工作的是：

persistentSetting.getData(0).replace("EM", "'"); // 它实际上不是 EM，而是当我复制并粘贴那个特殊的块 [] 字符时 JS 在我的编辑器中显示的小代码。

谢谢您的帮助。

# python - 如何捕捉 natgrid 的 griddata 错误

> ID：15641572
> 
> 赞同：0
> 
> 时间：2013-03-26T15:55:17.093
> 
> 标签：python, matplotlib, interpolation

我正在尝试使用`griddata`安装了 natgrid 包的 mlab 功能插入 2D 数据。

但是，我的数据导致两种类型的错误：

```
Natgrid - two input triples have the same x/y coordinates
            but different data values: 

                First triple:  0.000000 45.000000 20.743004
                Second triple: 0.000000 45.000000 20.572077 
```

当我删除重复点时（如建议[here](http://www.ncl.ucar.edu/Support/talk_archives/2012/3384.html)），我得到：

```
natgrid - error number 1 from ReadData:
  Insufficient data in gridded region to triangulate 
```

这样做的主要问题是无法捕获错误。当它们发生时，python 进程会突然终止。

如何处理这些`griddata`特定错误以及如何捕获它们并继续我的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:29:55.363

如果在打印错误消息后`griddata`调用`sys.exit()`，您可以捕获它：

```
try:
    griddata(....)
except:
    do what needs to be done 
```

如果改为调用 buildin `exit()`，我认为无需采取任何措施来捕获错误并继续工作。

如果我调用`sys.exit()`Ipython，我会得到：

> 发生异常，使用 %tb 查看完整的回溯。
> 
> 系统退出
> 
> 退出：使用“退出”、“退出”或 Ctrl-D

回溯显示，这`sys.exit()`不过是一个`KeyboardInterrupt`.

相反，我认为该建筑物`exit()`只是杀死了python解释器（至少在ubuntu附带的python2.7上）

# sql-server - SSRS：如何在嵌入列表的每一页上重复表格的标题行？

> ID：15641573
> 
> 赞同：6
> 
> 时间：2013-03-26T15:55:22.453
> 
> 标签：sql-server, reporting-services

我有一个 SSRS 报告，其中包含一个包含两个嵌入式表格的列表。

对于这些表，如果我将标题行设置为在每一页上重复，则会出现错误`"All tablix member elements in a TablixColumnHierarchy must have the RepeatOnNewPage Property set to false".`

如何解决此问题并使标题在每一页上重复？

谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-23T05:01:19.310

1.  在设计模式下编辑 rdl 文件时，您会在编辑器底部找到`Row Groups`和`Column Groups`（分别为左侧和右侧）。您会在旁边`Column Groups`找到一个箭头按钮`▼</kbd> (this arrow button is at the right side of the column groups portion). Click on this arrow button.`
2.  查看`Advanced Mode`
3.  在该`RowGroups`部分中，您将找到“（静态）”和“（详细信息）”。单击/突出显示`(Static)`并按下`F4`（在`Properties`窗口中检查其属性。）
4.  设置`Keep With Group`为`After`
5.  设置`Repeat On New Page`为`True`
6.  返回表格，右键单击行标题（灰色条），然后选择 to `Tablix Properties`。
7.  检查`Repeat header columns on each page`和`repeat header column on each Row`。（至少从 VS2012 开始编辑，他可能的意思是`Repeat header rows on each page`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:22:11.367

它只是名为RepeatOnNewPage 的报告的一个属性是假的。如果您单击页眉并转到页眉属性

常规 --> 显示此页的页眉 -> 在第一页打印并在最后一页打印（选中此处的所有框）并单击确定

运行报告。这是在报表生成器 3.0 上完成的。我不确定您使用的是哪个工具。

或者你可以按照这个

选择 Tablix。

在分组窗格中，单击小三角形并选择“高级模式”以显示静态成员。

在行组层次结构中，选择标题行的相应（静态）项。

在属性网格中：

将 RepeatOnNewPage 设置为 True

# c# - 从字符串中提取子字符串

> ID：15641574
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:55:22.447
> 
> 标签：c#, c#-4.0

从指定字符串中提取子字符串的最佳和优化方法是什么。

我的主要字符串就像

```
string str = "<ABCMSG><t>ACK</t><t>AAA0</t><t>BBB1</t></ABCMSG>"; 
```

其中 AAA0 和 BBB1 的值是从某处收集的动态值。

我需要在这里提取 AAA0 和 BBB1。

请建议我是否有任何功能或优化方式来做到这一点。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:00:05.097

这绝对是低效的，但它可以满足您的要求。它假设周围 XML 的布局是不变的。

```
var foo = "<ABCMSG><t>ACK</t><t>AAA0</t><t>BBB1</t></ABCMSG>"; 
var ary = XDocument.Parse(foo).Root.Elements().ToArray();

// ary[1].Value -> AAA0
// ary[2].Value -> BBB1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:03:06.193

使用 XmlDocument 的方法

```
void Main()
{
    string str = "<ABCMSG><t>ACK</t><t>AAA0</t><t>BBB1</t></ABCMSG>"; 
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(str);
    var t = doc.GetElementsByTagName("t");
    Console.WriteLine(t[1].InnerText);
    Console.WriteLine(t[2].InnerText);
} 
```

# sharepoint - 在 SharePoint 视图中按分配给分组

> ID：15641575
> 
> 赞同：0
> 
> 时间：2013-03-26T15:55:25.467
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试创建一个视图，该视图根据“分配给”列对所有任务进行分组。我知道 SharePoint 中已经有一个视图，但我的问题是我的“分配给”列允许多个值。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:20:08.690

您可以编写自定义 C# Web 部件来显示由多个用户分配给的单个用户分组的数据。除此之外，当允许多个用户被分配到时，没有办法优雅地按用户分组。

# cygwin - cygwin 上的 Scrapy 安装

> ID：15641578
> 
> 赞同：6
> 
> 时间：2013-03-26T15:55:31.780
> 
> 标签：cygwin, installation, scrapy

我正在尝试使用命令让 Scrapy 在 cygwin 2.7 上运行，`easy_install Scrapy`但是我是一个警告，然后是一个 gcc 错误：

```
warning: no files found matching '*.txt' under directory 'src/lxml/tests'
unable to execute gcc: No such file or directory
error: Setup script exited with error: command 'gcc' failed with exit status 1` 
```

[这里](https://stackoverflow.com/questions/10922967/scrapy-installation-error)和[这里](https://stackoverflow.com/questions/14024910/scrapy-installation-problems)有一些相关的问题，但两者似乎都解决了与我当前的问题不同的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-16T13:03:18.437

`gcc`我的 Cygwin 版本找不到任何软件包：

```
$ apt-cyg install gcc
Installing gcc
Unable to locate package gcc 
```

但是安装`gcc-g++`软件包就可以了：

```
$ apt-cyg install gcc-g++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T14:40:47.957

您需要安装 gcc 包，使用 cygwin setup.exe 或 apt-cyg

```
apt-cyg install gcc
# Create a symlink to be able to run gcc
ln -s /usr/bin//i686-pc-cygwin-gcc-3.exe /usr/bin/gcc 
```

# javascript - Dojo Toolkit 1.8.3 Mobile dojo/on Handler Event Switch Widget

> ID：15641580
> 
> 赞同：1
> 
> 时间：2013-03-26T15:55:36.027
> 
> 标签：javascript, html, events, mobile, dojo

我正在尝试使用 onStateChanged 事件为 dojox.mobile.Switch 小部件创建一个基本事件处理程序。我正在使用针对新 AMD 架构的 dojo/on 事件处理程序模块，并且很难让它监听我的 switch 事件。

**这是 id=mobileView 的开关小部件的 HTML**

```
 <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props="icon:'../../app/images/i-      icon-1.png'">
      Mobile Version
    <div id="mobileView" class="mblItemSwitch" data-dojo-type="dojox.mobile.Switch"></div>
    </li> 
```

**这是JS代码代码。第二个要求是假设处理切换事件。**

```
 require(["dojox/mobile/parser", "dojox/mobile", "dojox/mobile/deviceTheme","dojox/mobile/compat", "dojo/domReady!"],
    function(parser) {
    parser.parse();
    });

    require(["dojo/on", "dijit/dijit"], 
    function(on){
    on(dijit.byId("mobileView"), 
    "onStateChanged", 
    function(newState){
    alert(newState);
    });
    });
    </script> 
```

我可以看到它正在使用 dijit.byId 将自身绑定到小部件，监听 onStateChanged 事件，并在状态更改后调用前面的函数。我认为这与在 require 中包含正确的模块有关，但是我不确定。我为此花费了数小时，并尝试了许多不同的方法，包括 dojo.connect 的旧方法。

任何帮助/提示将不胜感激！

[参考：dojo/on Dojo Toolkit dojo/on](http://livedocs.dojotoolkit.org/dojo/on)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:40:23.267

在旧版本的 dojo 中，`dojo.connect()`处理 DOM 事件（单击、焦点等）和小部件上的函数调用。

但是，较新的`dojo/on`模块处理 DOM 事件，并且该`dojo/aspect`模块处理函数调用。Switch.onStateChanged() 是一个函数，而不是一个 DOM 事件，所以你想要这样的东西：

```
require(["dojo/aspect", "dijit/registry"], function(aspect, registry) {
     aspect.after(registry.byId("mobileView"), "onStateChanged", 
       function(newState){
         alert(newState);
       }
     );
}); 
```

有关详细信息，请参阅[http://dojotoolkit.org/reference-guide/1.8/dojo/connect.html](http://dojotoolkit.org/reference-guide/1.8/dojo/connect.html)。

# haskell - Haskell IO：将 IO 字符串转换为“其他类型”

> ID：15641584
> 
> 赞同：3
> 
> 时间：2013-03-26T15:55:47.260
> 
> 标签：haskell, binary-search-tree

我有一个 Haskell 程序，它将文件作为输入并将其转换为二叉搜索树。

```
import System.IO    

data Tree a = EmptyBST | Node a (Tree a) (Tree a) deriving (Show, Read, Eq)

ins :: Ord a => a -> (Tree a) -> (Tree a)
ins a EmptyBST                  = Node a EmptyBST EmptyBST
ins a (Node p left right)
    | a < p                             = Node p (ins a left) right
    | a > p                             = Node p left (ins a right)
    | otherwise                             = Node p left right

lstToTree :: Ord a => [a] -> (Tree a)
lstToTree                   = foldr ins EmptyBST

fileRead                    = do    file    <- readFile "tree.txt"
                            let a = lstToTree (conv (words file))
                            return a

conv :: [String] -> [Int]
conv                        = map read 
```

但是，当我运行以下命令时：

```
ins 5 fileRead 
```

我收到以下错误：

```
<interactive>:2:7:
    Couldn't match expected type `Tree a0'
                with actual type `IO (Tree Int)'
    In the second argument of `ins', namely `fileRead'
    In the expression: ins 5 fileRead
    In an equation for `it': it = ins 5 fileRead 
```

请问有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:03:46.533

如果您提供`fileRead`类型签名，您将能够立即看到问题。让我们找出 GHC 将在内部分配给的类型注释`fileRead`：

```
fileRead = do file <- readFile "tree.txt"
              let t = lstToTree $ map read $ words file
              return t 
```

`lstToTree :: Ord a => [a] -> Tree a`，并且`read`总是返回类型类的成员`Read`。所以`t :: (Read a, Ord a) => Tree a`。具体类型取决于文件的内容。

`return`将其参数包装在一个 monad`return t`中， type也是如此`Ord a, Read a => IO (Tree a)`。由于`return t`是`do`块中的最后一条语句，它成为 的返回类型`fileRead`，所以

```
fileRead :: (Read a, Ord a) => IO (Tree a) 
```

所以`fileRead`是 a`Tree`包裹在a 中`IO`，你不能直接将它传递给它，`ins`因为它`Tree`自己需要 a 。您不能从 中`Tree`取出`IO`，但*可以*将功能“提升”`ins`到`IO`monad 中。

Control.Monad 导出[`liftM :: Monad m => (a -> r) -> (m a -> m r)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3aliftM)。它接受一个常规函数，并将其转换为作用于诸如`IO`. [`fmap`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afmap)它实际上是（在标准 Prelude 中）的同义词，因为所有单子都是函子。因此，这段代码大致相当于@us202 的代码，它获取`fileRead`, inserts的结果`5`，并返回包装在`IO`.

```
liftM (ins 5) fileRead
-- or --
fmap (ins 5) fileRead 
```

我会推荐这个`fmap`版本。这段代码只利用`IO`了函子这一事实，因此 using`liftM`向读者暗示您可能也需要它是一个 monad。

“提升”是对包裹在单子或函子中的值使用纯函数的一般技术。如果你不熟悉提升（或者如果你对一般的 monad 和 functors 感到困惑），我衷心推荐[Learn You A Haskell](http://learnyouahaskell.com/functors-applicative-functors-and-monoids)的第 11-13 章。

* * *

PS。请注意，最后两行`fileRead`可能应该合并，因为`return`实际上并没有做任何事情：

```
fileRead :: (Read a, Ord a) => IO (Tree a)
fileRead = do file <- readFile "tree.txt"
           return $ lstToTree $ map read $ words file 
```

或者，由于它是一个足够短的函数，您可以完全取消`do`符号并`fmap`再次使用：

```
fileRead :: (Read a, Ord a) => IO (Tree a)
fileRead = fmap (lstToTree . map read . words) (readFile "tree.txt") 
```

* * *

**编辑以回应您的评论：**

Haskell*特意*设计为将执行 IO 的代码与常规代码分开。这有一个很好的哲学原因：大多数 Haskell 函数是“纯的”——也就是说，它们的输出仅取决于输入，就像数学中的函数一样。你可以运行一个纯函数一百万次，你总是会得到相同的结果。我们喜欢纯函数，因为它们不会意外破坏程序的其他部分，它们允许惰性，并且它们允许编译器积极地为您优化代码。

当然，在现实世界中，我们需要一点杂质。像这样的 IO 代码`getLine`不可能是纯的（而且不做 IO 的程序是没用的！）。结果`getLine`取决于用户键入的内容：您可以运行`getLine`一百万次并每次获得不同的字符串。Haskell 利用类型系统用 type 标记不纯的代码`IO`。

这是问题的症结所在：如果你对不纯的数据使用纯函数，那么结果仍然是不纯*的，因为结果取决于用户做了什么*。所以整个计算属于`IO`单子。当你想引入一个纯函数`IO`时，你必须显式地（使用`fmap`）或隐式地（使用`do`符号）来提升它。

这是 Haskell 中非常常见的模式 - 看看我`fileRead`上面的版本。我曾经使用纯函数`fmap`对不纯数据进行操作。`IO`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:08:42.713

您无法真正逃脱 IO monad（通过不安全函数除外），但在您的情况下实际上不需要这样做：

```
main = do f <- fileRead
          let newtree = ins 5 f
          putStr $ show newtree 
```

（现场演示：[这里](http://liveworkspace.org/code/3JAOe5%2412)）

# c++ - 在三个src文件中使用extern

> ID：15641585
> 
> 赞同：0
> 
> 时间：2013-03-26T15:55:53.323
> 
> 标签：c++, c, extern

我有三个文件： header.h

```
#ifndef _HEADER_
#define _HEADER_

int var = 0;

#endif 
```

src1.cpp

```
#include "somefile.h" 
extern int var;
int main(void) { // error: first defined here
    var = 10;
    return 0;
} 
```

src2.cpp

```
#include "somefile.h"
extern int var;

int foo () { // error : multiple definition of 'var'
    return 0;
} 
```

我不知道为什么在这种情况下不能使用“extern”关键字。我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:58:10.537

把声明

```
int var = 0; 
```

在其中一个 cpp 文件中，而不是在头文件中

并把

```
extern int var; 
```

仅在头文件中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:57:53.613

你做错了。将`extern`声明放在头文件中，在需要变量时包含它，并在一个源文件中定义它。

是不是现在，每个包含你的头文件的源文件都有自己的定义，当你链接你的程序时，它们会相互冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:58:55.750

让我猜猜，somefile.h 包含 header.h。

当您将一个变量外部化时，正如您所做的那样，让该变量恰好在一个地方是非外部的。将该位置设为 .c 文件。如果它是一个头文件，它所包含的每个地方都会有自己的副本，导致“'var'的多个定义”

移动

```
int var = 0; 
```

进入其中一个 src 文件。

# r - 组合一个波段栅格以获得多波段栅格

> ID：15641589
> 
> 赞同：3
> 
> 时间：2013-03-26T15:55:57.497
> 
> 标签：r, raster

我有 4 个单波段栅格（相同的分辨率，相同的范围......），我想将它们组合成一个四波段的栅格。任何人都可以告诉我如何用 R 做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:22:23.223

要创建具有相同范围和分辨率的栅格的栅格堆栈，请使用 raster 包中的 stack 函数：

```
s  <-  stack(raster1,  raster2) 
```

在这种情况下，栅格可以是栅格对象或栅格的文件路径。

编辑（具体示例）：

```
library(raster)
fn  <-  system.file("external/test.grd",  package="raster")
s  <-  stack(raster(fn),  raster(fn)*2) #here i had to create the raster object since I 
#was multiplying one of the input rasters 
s

class       : RasterStack 
dimensions  : 115, 80, 9200, 2  (nrow, ncol, ncell, nlayers)
resolution  : 40, 40  (x, y)
extent      : 178400, 181600, 329400, 334000  (xmin, xmax, ymin, ymax)
coord. ref. : +init=epsg:28992     
+towgs84=565.237,50.0087,465.658,-0.406857,0.350733,-1.87035,4.0812 +proj=sterea 
+lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 
+ellps=bessel +units=m +no_defs 
names       :  test.1,  test.2 
min values  : 128.434, 256.868 
max values  : 1805.78, 3611.56 
```

# javascript - 如何从控制器返回一个jsp作为弹出窗口

> ID：15641592
> 
> 赞同：1
> 
> 时间：2013-03-26T15:56:05.623
> 
> 标签：javascript, jsp, spring-mvc, dojo

我有一个 Spring MVC 控制器，它根据特定条件被称为重定向。除了我希望将返回的 JSP 作为模式窗口之外，一切似乎都运行良好。关于如何实现这一目标的任何建议？
我希望 myModalWindow.jsp 作为模式窗口或弹出窗口返回。

```
@RequestMapping( value ="/abc/xyz.html")
public String getMyModal()
{
  //Do something here and return modal

  return "myModalWindow";
} 
```

编辑 1：此调用是通过另一个控制器进行的，而该控制器又通过 Ajax 调用进行调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:11:45.703

模态窗口 = javascript...您不能要求服务器在客户端浏览器中打开一个弹出窗口。除非您的上一个页面在新的浏览器窗口中打开“/abc/xyz/html”，但无论您的控制器返回什么视图，它都会发生......而且这无论如何都不是模态窗口。

对于真正的弹出窗口，您所能做的就是返回一个页面，该页面将在 onLoad 函数中打开您的模式窗口（jsp）：

```
@RequestMapping( value ="/abc/xyz.html")
public String getMyModal()
{
  //Do something here and return modal

  return "myPageThatOpensAModalWindow";
} 
```

...然后在 myPageThatOpensAModalWindow.jsp ：

```
<html>
  <head>
    <script>
      function loadModalWindow() {
         // open your window here
         window.open("/myModalWindowURL", ...);
      }
  </script>
  </head>

  <body onload="loadModalWindow()">
    <h1>Hello World!</h1>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:02:47.820

使用 Javascript 库从“/abc/xyz.html”加载模式。也许您需要更改该 jsp 的模板以仅包含模式的内容（避免、页眉、页脚和主要 html 结构）。

没有 html 标头、调用或任何允许您自己显示模式的东西，它通常是一个具有绝对定位的 div 和页面上的半不透明层，阻止所有点击它通常用作 web 中的模式设计

# java - Tomcat 7.0 org.apache.catalina.LifecycleException

> ID：15641594
> 
> 赞同：-2
> 
> 时间：2013-03-26T15:56:13.103
> 
> 标签：java, web-services

首先，这是我在这里的第一篇文章，所以如果我做错了什么，请。好心告诉我。这也是我第一次接触用 Java 开发 Web 服务。由于我在使用搜索功能时没有找到答案，所以我不得不向您请教一个想法。

昨天我在 Eclipse (EE) 中运行一个动态 Web 项目，一切正常。然后，我创建了一个新的 Dynamic Web Projecte，复制了一些类文件、jar 文件，并创建了一个新的 web.xml 文件。之后我无法运行新项目，也无法运行昨天运行良好的项目。这是我的控制台的输出：

```
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CwServices]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CwServices]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: Servlet mapping specifies an unknown servlet name CW Service
    at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3219)
    at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3198)
    at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1366)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1353)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Mrz 26, 2013 4:34:16 PM org.apache.catalina.core.ContainerBase startInternal
Schwerwiegend: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Mrz 26, 2013 4:34:16 PM org.apache.catalina.startup.Catalina start
Schwerwiegend: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Mrz 26, 2013 4:34:16 PM org.apache.catalina.startup.Catalina start
Information: Server startup in 3840 ms 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:01:47.997

您已在 web.xml 文件中添加了一个 servlet - 错误消息显示为“Servlet mapping指定一个未知的 servlet 名称 CW 服务”。查看 web.xml 并正确创建 servlet、servlet 映射并确保 servlet 部分中的类名在类路径中。

# paypal - 如何在 Paypal Recurring Payments 中实施测试阶段？

> ID：15641595
> 
> 赞同：0
> 
> 时间：2013-03-26T15:56:13.890
> 
> 标签：paypal

我对贝宝中的定期付款有疑问：我的项目中集成了快速结帐付款。完成付款后，我将初始化定期付款。只要我提供正确的金额（例如 2.99 欧元）来快速结帐付款，一切正常。现在我想集成一个测试阶段，其中用户不支付第一个月的费用，而是支付第 2 个月、第 3 个月等等。不幸的是，我无法进行快速结帐付款并传递 0 欧元的值，然后出现错误“无效金额”。

您如何使用 Paypal 实施这样的测试阶段？我已经看到 Spotify 是这样做的。第一个月我什么都不付，但第二个月我付了 9.99 欧元（什么都不做，他们在我注册 Spotify 时拿走了我的付款详情）。有谁知道这是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:49:42.207

您是否使用试用期？我在试用期内以美元工作。我使用 PayPal 示例代码进行了尝试，该示例也适用于 EUR。我在 PHP 中使用新的 X.comm PayPal SDK。在该 SDK 中，转到 samples/RecurringPayments/CreateRecurringPaymentsProfile.php。在顶部有一行代码，您可以在其中更改货币。

```
//$currencyCode = "USD";
$currencyCode = "EUR"; 
```

然后输入 URL yourdomain/your_merchant-sdk-php/samples/CreateRecurringPaymentsProfile.html.php 以运行示例。选择 0.0 作为试用期金额。它应该作为成功回来。

# c++ - 复制构造函数初始值设定项列表中 CObject 的子项

> ID：15641597
> 
> 赞同：0
> 
> 时间：2013-03-26T15:56:14.540
> 
> 标签：c++, copy-constructor, initializer-list

我的任务是移植一些遗留代码，在此过程中我想尽可能地遵循最佳实践，因为我的前任很遗憾没有这样做。以下是我遇到的问题的基本框架：

```
class Foo : public CPropertyPage
{
   // Constructor
   Foo() : CPropertyPage(Foo::ID)
   {
      pBar = new Bar();
      // init other things
   }

   // Copy Constructor
   Foo(const Foo& other) : CPropertPage(other) // C2248 compiler error
   {
      pBar = new Bar(*other.pBar);
      // copy other things
   }
} 
```

因为我已经读过最好的做法`new`是在构造函数中使用时为类编写一个复制构造函数，这就是我想要做的。我想要做的是`CPropertyPage`在`Foo`复制构造函数初始化列表中包含复制构造函数，但这是不允许的，因为`CPropertyPage`它是 MFC 类的子类`CObject`，其复制构造函数是私有的。如果我尝试在`Foo`的构造函数初始化列表中使用的构造函数，它会编译，但我不确定这是否达到与`CPropertyPage`复制构造函数相同的目的（免责声明：我对复制构造函数和初始化列表很陌生）。

那么，我该如何正确编写`Foo`的复制构造函数呢？我的方法在某些方面存在根本缺陷吗？

编辑：尝试语法修复，标识`CObject`为 MFC 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:17:47.803

以下是与此问题有关的 MSDN 链接：

[http://msdn.microsoft.com/en-us/library/ccb3dh5c.aspx](http://msdn.microsoft.com/en-us/library/ccb3dh5c.aspx)

原来我的静态分析工具在检查初始化列表中的基类时有点过分热心。

# events - 将事件动态添加到 Highcharts 系列

> ID：15641599
> 
> 赞同：1
> 
> 时间：2013-03-26T15:56:19.987
> 
> 标签：events, highcharts

我能够创建我的 Highchart：

```
 chart1 = new Highcharts.Chart(WhateverOptions); 
```

当用户将光标放在一个点上时，我可以动态设置要执行的函数：

```
 chart1.tooltip.options.formatter = function() {
     return 'Whatever I want to display in the tooltip';
   } 
```

我正在寻找一种方法来指定用户**单击**某个点时要执行的函数。
我需要动态指定这个函数，就像工具提示一样。
我不想在创建图表时将事件设置为选项的一部分。

任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-19T14:09:16.267

我在我的应用程序中遇到了类似的情况。

实际上，我使用 json 构建器生成所有数据服务器端，它不允许我在模板中编写纯 javascript。此外，我对跨多个页面的 10 多个不同图表使用相同的模板，但我不想将相同的行为分配给所有这些图表。

因此，我需要访问和编辑图表中所有点的*onclick*事件。

```
var chart = $('#graph-container').highcharts();
// Iterate over the chart series in order to assign a point click event option
chart.series.forEach(function(s){
  s.options.point.events = {
    click: function(){
       // Store the point object into a variable
       var $$ = this;
       // Get the corresponding date in the from my x value
       var date = new Date($$.series.points[$$.index].x);
       // Do something with the date found
       console.log(date);
    }
  }
}) 
```

这应该适用于 Highcharts 5.x

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:07:17.147

Highcharts 在系列对象[http://api.highcharts.com/highcharts#series.data.events.click](http://api.highcharts.com/highcharts#series.data.events.click)中为您提供点击事件。

```
plotOptions: {
        series: {
            cursor: 'pointer',
            point: {
                events: {
                    click: function() {
                        alert(this.y);
                    }
                }
            }
        }
    }, 
```

要动态添加它，我只需在主图表点击事件中调用一个虚拟函数，它什么都不做，然后重新定义该函数以在您想要添加点击功能时执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T16:03:51.643

对于单个点，您可以使用

```
 $(chart.series[0].data[0]).on('click', function() {
        alert('First Point Click!');
    }); 
```

对于系列中的所有点：

```
 $(chart.series[0].data).on('click', function() {
        alert('Series Point Click')
    }); 
```

这是一个[jsfiddle](http://jsfiddle.net/rinatio/ZFg3k/)

# asp.net - Bind() 或 Eval() 是否会自动进行 HtmlEncode 以防止 XSS？

> ID：15641601
> 
> 赞同：14
> 
> 时间：2013-03-26T15:56:22.897
> 
> 标签：asp.net, data-binding, xss

如果这是一个愚蠢的问题，请原谅我。我一直无法找到明确说明的答案。

我很少在我的 aspx 页面中使用 Bind() 或 Eval()，而是使用以下语法：（假设这是在 Repeater 控件的 ItemTemplate 中）

```
<asp:Label id="lblFirstName" runat="server" Text='<%# Microsoft.Security.Application.AntiXss.HtmlEncode(DataBinder.Eval(Container.DataItem, "FirstName").ToString()) %> 
```

我很久以前就开始这样做了，而且从来没有质疑过，但现在我意识到这可能是矫枉过正。现在我正在使用一个在所有地方都使用这种语法的 CMS：

```
<asp:Label id="lblFirstName" runat="server" Text='<%# Bind("FirstName") %> 
```

所以我想知道，基本上，如果我使用 Bind() 或 Eval() 运行时会自动对输出进行 HtmlEncode 吗？我一直在做不必要的编码吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T16:06:09.233

Bind() 和 Eval() 不做任何事情来阻止这种类型的事情并且不编码。`<%# %>`样式代码块也不行。

但是，如果您使用的是 ASP.NET 4 及更高版本，则可以使用`<%: %>`块来处理响应写入类型情况和`<%#: %>`数据绑定情况。

Scott Guthrie 对此有一篇很棒[的文章](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)。

# python - Django：GET css返回404？

> ID：15641603
> 
> 赞同：2
> 
> 时间：2013-03-26T15:56:32.227
> 
> 标签：python, css, django, http-status-code-404, urlconf

我正在开发一个 Django 站点，经过一系列编辑后，我突然再次运行了我的服务器 - 没有 css！当然，服务器仍然显示 html 站点，但是整个站点的 css 都抛出 404 错误。我的静态文件信息`settings.py`根本没有被编辑：

```
import os
# hack to accommodate Windows
CURRENT_PATH = os.path.abspath(os.path.dirname(__file__).decode('utf-8')).replace('\\', '/')

STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join(CURRENT_PATH, 'static'),
) 
```

我的基本模板根据静态文件目录对文件进行了简单调用：

```
<link rel="Stylesheet" type="text/css" href="{{ STATIC_URL }}css.css" /> 
```

最后，当然，这是我相关目录结构的快速分解，因为我怀疑错误是某种目录问题：

```
-project-
     settings.py
     -static-
         css.css
     -templates-
         base.html
         index.html 
```

我只提供了 index.html 的位置，但模板文件夹当然充满了各种模板/页面的目录。

在排除故障/接收答案时，我会及时更新这个问题的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:05:14.827

为了让静态 url 在开发平台上工作，您需要做很多事情。

为此，我建议您浏览并阅读此链接。[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

除此之外，您还需要从您的视图中返回请求上下文。

请注意，在您的 urls.py 文件中，您还需要添加该行。

```
urlpatterns += staticfiles_urlpatterns() 
```

此行允许开发服务器中的 URL 模块提供静态文件。

我还注意到您的`os.path.join`代码中有一个变量。`os.path.join`如果您使用的是基本的 django 设置，它将已经指向您的开发目录。

您应该能够使用：

```
# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join('static'),
) 
```

注意：还要确保您的视图是返回请求上下文，因为这是`STATIC_URL`填充变量所必需的。同样，确保您已将所有内容[`TEMPLATE_CONTEXT_PROCESSORS`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)添加到`settings.py`文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T01:44:27.363

解决方案是：

```
{% load static from staticfiles %}
<link rel="Stylesheet" type="text/css" href="{% static "css.css" %}"/> 
```

这是在 Django 1.7 上调用静态文件的正确方法。

# javascript - 如何使用jquery覆盖禁用鼠标滚轮滚动

> ID：15641607
> 
> 赞同：0
> 
> 时间：2013-03-26T15:56:39.513
> 
> 标签：javascript, jquery, scroll, overlay, mousewheel

我在母版页中有这段代码：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script type="text/javascript" src="/Scripts/jquery.tinyscrollbar.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#scrollbar2').tinyscrollbar();
        });
    </script>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="rightContent" runat="server">
<div id="rightContentWrapper">
    <div id="sectionTitle">Investments</div>
    <div id="introText">Test Investments List</div>
    <div id="scrollbar2">
        <div class="scrollbar">
            <div class="track">
                <div class="thumb">
                    <div class="end">
                    </div>
                </div>
            </div>
        </div>
        <div class="viewport">
            <div class="overview">
                <div id="tombStones">
                    <%--  some scrollable images with overlays when clicked--%>                    
                 </div>
            </div>
        </div>
    </div>
</div>
</asp:content> 
```

当有人单击可滚动区域中的图像时，我会调用叠加层。我想在覆盖出现时禁用滚动。为此，在覆盖脚本的 onBeforeLoad 和 onClose 中，我将滚动条和缩略图隐藏在顶部，这意味着您不能使用光标移动滚动条。这是该代码：

```
<script>
    $(document).ready(function () {
        $("img[rel]").overlay({
            onBeforeLoad: function (event) {
                $('.scrollbar').hide("fast");
                $('.thumb').hide("fast");
            },
            onClose: function (event) {
                $('.scrollbar').show();
                $('.thumb').show();
            }
        });
    });
</script> 
```

不幸的是，在这种情况下，鼠标滚轮仍然滚动可滚动区域。如何在脚本中禁用和重新启用鼠标滚轮滚动以隐藏滚动条（或其他地方）？

谢谢！

# mysql - MySQL：将列从 Database1.TableA 添加到 Database2.TableA

> ID：15641608
> 
> 赞同：0
> 
> 时间：2013-03-26T15:56:40.900
> 
> 标签：mysql, database

需要一些帮助来合并前 Web 开发团队的更改。他们在“Database1.TableA”中为开发站点创建了四个新列。

**是否有一个 SQL 查询将结构和数据从“Database1.TableA”中的四个新列复制到“Database2.TableA”中？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:05:30.783

应该很容易使用[CREATE TABLE ... SELECT](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:06:14.720

我不知道自动复制结构的方法。数据可以更新为

```
UPDATE new_db.table n
JOIN old_db.table o on o.primary_key_col = n.primary_key_col
SET n.col1=o.col1,n.col2=o.col2,... 
```

# php - 从 MYSQL 表中只提取没有时间的日期

> ID：15641610
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:56:45.853
> 
> 标签：php, mysql

我正在使用后续过程来显示 mysql 表中的日期：

```
<? echo $rrow[encoded_date]; ?> 
```

现在编码日期单元格的格式为： 2013-03-20 01:52:39 。

我的问题是如何只提取没有时间的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:00:10.210

你可以用 PHP 做到这一点：

```
$yourDateTime = "2013-03-20 01:52:39";
date('Y-m-d', strtotime($yourDateTime)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:57:33.107

您可以使用`DATE_FORMAT()`

```
SELECT DATE_FORMAT(dateColumn, '%Y-%m-%d') encoded_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9640)

# c++ - C ++ MongoDB如何“锁定”集合，以便其他进程无法编写它

> ID：15641615
> 
> 赞同：0
> 
> 时间：2013-03-26T15:56:49.050
> 
> 标签：c++, mongodb, locking

我正在编写一个应用程序，它将在多个服务器上运行。

假设我有 2 个集合`X`和`Y`.

`X`有这样的文件：`{ _id : 123, name : "something"}`

`Y`有这样的文件：`{ _id : 456, parent_id : 123, name : "anything"}`

当我从中删除一个文档时，`X`我想从中删除所有子级，`Y`并且我想以某种方式锁定集合`Y`，因此*服务器 n*无法`Y`使用该确切的 parent_id 写入任何新文档。

我理解的MongoDB没有集合级别的锁，那么我应该如何解决这个问题呢？

还要记住，将两个集合合并为一个对我来说不是一个选择。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:04:53.553

MongoDB 锁在这里不是问题，因为 MongoDB 实际上是在数据库级别上锁的，这意味着如果您可以通过单个查询影响多个集合，那么这很容易实现，但是，如果不使用`eval`ed就不容易实现JavaScript; 出于多种原因，我不会这样做：一个是所有涉及`x`和/或`y`需要在 JS 中的查询才能使全局 JS 锁具有所需的效果。

我能想到以体面的方式解决这个问题的唯一真正方法是应用某种`lock`集合，其他查询必须首先查询该集合，或者您可以`locked`向集合中的文档添加一个字段并使用原子操作来设置它以便没有其他查询可以触及这些`locked`文档。这是必需的，因为由于并发特性，当没有为其他操作分页数据时，MongoDB 实际上可以消除非原子操作。

这两种方法是目前我能想到的最好的方法。

# php - sql连接

> ID：15641622
> 
> 赞同：0
> 
> 时间：2013-03-26T15:57:04.657
> 
> 标签：php, sql

我可以连接如下查询吗？如果没有，我应该如何进行？我不想从中读取行，`$retrieveUnitExist`因为它浪费了另一个步骤。

```
$retrieveUnitExist = "SELECT unitid FROM ESTATEUNIT WHERE BLOCK = 1";
$insertAddress = "INSERT INTO ADDRESS (value1, value2) VALUES ('1','".$retrieveUnitExist."')";

mysqli_query($conn, $insertAddress); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:58:02.520

像这样的东西？

```
$insertAddress = "INSERT INTO ADDRESS (value1, value2)
                  SELECT '1', unitid FROM ESTATEUNIT WHERE BLOCK = 1"; 
```

# c++ - Windows 窗体可视化。如何制作常量。更新字段？

> ID：15641635
> 
> 赞同：0
> 
> 时间：2013-03-26T15:57:29.337
> 
> 标签：c++, c, winforms, visual-studio-2010

在 Visual Studio 2010 中，我如何创建动态字段（不断更新的字段），例如，如果我想在标签中添加 DateTime::Now.ToString() 并希望它每秒更新一次。这怎么可能（尝试过 for 但它只是不断更新并且没有显示任何内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:27:43.297

您需要使用其中一种异步线程类型（可能是[timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)）来更新该字段。请记住，当从另一个线程更新表单时，您需要使用[Form::Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)来防止错误并允许运行重绘功能。

# database-design - 尝试设计和实现数据库

> ID：15641637
> 
> 赞同：0
> 
> 时间：2013-03-26T15:57:36.663
> 
> 标签：database-design, azure

我正处于开发数据库设计的初步阶段。

这是我的困境：我目前已经概述了大约 150 多个需要在数据库中输入的字段，但是我很难决定如何将这些字段分解为链接在一起的有效表，这遵循常规的规范化规则。

只是给你一个我收集的关于一个士兵的信息片段：

*   个人信息（姓名、团号、宗教、出生地、近亲等）
*   家庭成员（父母、子女、兄弟姐妹）
*   教育历史（离开学校时的年龄、达到的最高年级、学院/大学、行业/学徒、口语/书面语言等）
*   职业经历（以前的工作经历、雇主名称、具体职业、出院后保证的工作、农业经验等）
*   病史（年龄、眼睛/头发颜色、身高、体重、肤色、疤痕、视力、听力等）
*   体格检查（骨折史、以前的头部受伤-脊髓问题-破裂-肺结核-哮喘、血压、许多其他情况等）
*   团历史（入伍日期、入伍时的团、加入的其他团、最高军衔等）
*   士兵的位置（士兵从出生、入伍、训练、战场、死亡到过的所有重要位置的列表）
*   埋葬信息（死亡日期、死亡地点、墓地、墓地等）

显然，需要收集关于单个士兵的大量信息。我的问题是试图决定如何以一种可管理且有效的方法拆分表，以及需要为每个表列出的主键/外键。

1.  认为会有一张巨大的桌子，每排都是士兵似乎是不合逻辑的。
2.  从逻辑上讲，也许我应该将数据库分解为上面列出的表，但是我不知道主键使用什么，因为每一行的战士ID 大致相同——然后将表连接在一起（即对我来说似乎不对，因为它与#1 不一样吗？）
3.  将数据库分解为相互指向的非常简单的表（即每个表有几列）。示例：Language_Table，其中列出了所有可能说/写的语言，每种语言都有一个唯一的 id。这似乎是最有意义的，但会创建大量表。

该计划还将在 Azure 上托管数据库，最终将馈入 Windows Phone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:04:59.287

不想扔太多曲线球，但您是否考虑过使用文档数据库，比如 RavenDb？它可以让您轻松地将所有这些信息保存在单个文档中，因为它们都与单个士兵相关，因此尝试将其拆分为相关表格感觉相当随意。这是与士兵有关的所有元数据，因此将其存储在一起以针对单个士兵记录。

作为第一步，我将专注于设计您的域模型，以准确映射您希望记录的有关士兵的数据，如您的问题中所述。完成此操作后，请考虑如何将其映射到您选择的数据存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:17:14.107

您要做的是[标准化](http://en.wikipedia.org/wiki/Database_normalization)士兵的信息。阅读我链接的维基百科文章是关于我可以提供的简明解释。通过规范数据项的关系，您可以将此信息存储在关系数据库中。

让我们从一张士兵桌开始。通常，表名是单数的，并且以大写字母开头。您将把每个项目都放在这个表中，士兵**只有一次出现**这个项目。

符合此标准的一些项目是：姓名、出生地点、出生日期、死亡日期、死亡地点、埋葬地点等。

该表可以根据需要包含任意数量的项目（列）。唯一的标准是每个项目出现一次。

那么，一个士兵拥有不止一个东西会发生什么？

让我们以家庭成员为例。FamilyMember 表可能如下所示：

```
FamilyMember
------------
FamilyMemberID
SoldierID
FamilyMemberType
FamilyMemberName
... 
```

FamilyMemberID 是 FamilyMember 表的主（集群）键。它是一个自动递增的整数或长整数，可为表提供唯一键。

SoldierID 是返回到 Soldier 表的外键。

FamilyMemberType 描述了家庭成员和士兵之间的关系。一些例子是父母、兄弟、姐妹等。通常，您会保存一个代码（P 代表父母，B 代表兄弟，S 代表姐妹）而不是文本。

其余列描述家庭成员。这些列代表家庭成员的**一次且仅一次出现。**

您对要保存在关系数据库中的所有数据项执行此操作。

对于每一个物品，你都会问自己，*一个士兵和这个物品有什么关系？*

再举一个例子，我们来看一个团。士兵和团是什么关系？一名士兵可以属于一个或多个团。

因此，您的 Regiment 表的结构类似于 FamilyMember 表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:23:07.377

我也许可以给你一个提示......给出的评论可能对你来说不是那么糟糕，但你也可以决定创建一个真正的数据库。您的问题是信息特别涉及士兵……但是，如果您可以看到自给自足的信息，则可以剪切信息（就像您尝试找到可以从阅读规范中进化而来的对象时一样）。

在您的数据库中会有相当多的参考表......我给你举个例子：

一个宗教表，其中包含当今已知的所有宗教，以及从该表到士兵表的链接。（好消息是在你的士兵表中，基督徒总是基督徒，而不是曾经的基督徒、克里斯蒂安或克里斯蒂安……）

然后你必须找到这个特殊的对象：示例：工作

您可以添加一个工作表，其中包含员工姓名、开始日期、结束日期......

或医疗文件：就诊日期、医院（顺便提一下）、身高、体重……

类似的东西

# google-maps-api-2 - 如何在 Android 设备上显示移动轨迹

> ID：15641640
> 
> 赞同：7
> 
> 时间：2013-03-26T15:57:43.520
> 
> 标签：google-maps-api-2, android-sdk-2.3, polyline

我想在 Android 设备上使用 GPS 绘制我的轨迹。

显示已完成的路线没有问题，但我发现在移动时很难显示轨道。

到目前为止，我已经找到了两种不同的方法来做到这一点，但都不是特别令人满意。

# 方法一

```
PolylineOptions track = new PolylineOptions();
Polyline poly;

while (moving) {
    Latlng coord = new LatLng(lat,lng);    // from LocationListener
    track.add(coord);
    if (poly != null) {
        poly.remove();
    }
    poly = map.addPolyline(track);
} 
```

即在添加新坐标之前建立折线将其删除，然后将其添加回来。

这是非常缓慢的。

# 方法二

```
oldcoord = new LatLng(lat,lng);;

while (moving) {
    PolylineOptions track = new PolylineOptions();
    LatLng coord = new (LatLng(lat,lng);
    track.add(oldcoord);
    track.add(coord);
    map.addPolyline(track);

    oldcoord = coord;
} 
```

即绘制一系列单折线。

虽然这比方法 1 渲染速度快得多，但它看起来非常参差不齐，尤其是在较低的缩放级别下，因为每条折线都是方形的，并且只有角实际接触。

有没有更好的方法，如果有，它是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T03:18:10.233

使用 2.0 Maps API 有一个简单的解决方案。使用三个步骤，您将获得一条漂亮的平滑路线：

1.  创建一个 LatLng 点列表，例如：

    ```
    List<LatLng> routePoints; 
    ```

2.  将路线点添加到列表中（可以/应该在循环中完成）：

    ```
    routePoints.add(mapPoint); 
    ```

3.  创建一条折线并将其提供 LatLng 点列表，如下所示：

    ```
    Polyline route = map.addPolyline(new PolylineOptions()
      .width(_strokeWidth)
      .color(_pathColor)
      .geodesic(true)
      .zIndex(z));
    route.setPoints(routePoints); 
    ```

试试看！

# java - 使用java删除另一个数组中的数组

> ID：15641641
> 
> 赞同：0
> 
> 时间：2013-03-26T15:57:47.327
> 
> 标签：java, arrays, multidimensional-array

嘿，任何人都可以通过告诉我如何删除另一个数组内的数组的数据来帮助我。

例如：alpha[] 是一个数组，其中包含两个长度为 [1-100] 和 [101-200] 的数组，现在我只需要从 alpha[] 中删除第一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:02:46.623

数组的大小是固定的，创建后无法调整它们的大小。您可以通过将现有项目设置为 null 来删除它：

```
alpha[0]=null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:05:15.857

您可以尝试以下任一方法：

```
 int[] array = {1,2,3,4,5};
    int[] subArray = new int[2];
    System.arraycopy(array, 0, subArray, 0, 2);
    System.out.println(Arrays.toString(subArray));
    => output: 1,2

    subArray = Arrays.copyOf(array, 2);
    System.out.println(Arrays.toString(subArray));
    => output: 1,2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:03:11.940

[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)查看`Arrays`实用程序类。

如果您对从数组中获取子数组感兴趣，那么这样做的好方法是`Arrays.copyOfRange(alpha, 101, 200)`.

如果您有一个二维数组并且您只对其中一个“行”感兴趣，您可以这样做`Arrays.copyOf(alpha[1], alpha[1].length)`

# gradient - 在 BlackBerry 10 上绘制渐变（Cascades 和 C++）

> ID：15641653
> 
> 赞同：1
> 
> 时间：2013-03-26T15:58:17.760
> 
> 标签：gradient, blackberry-10, blackberry-cascades

有什么方法可以在 Cascades 或/和 C++ 中绘制简单的线性渐变？我找到了一个使用 QtQuick 库（[https://developer.blackberry.com/cascades/reference/qmlreusablecomponents.html](https://developer.blackberry.com/cascades/reference/qmlreusablecomponents.html)）的示例，但它不起作用。Momentics 甚至无法识别此库的导入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:36:48.300

Unfortunately gradients are not possible to do that way in Cascades.

I would recommend using an gradient image and [ImagePaintDefinition](https://developer.blackberry.com/cascades/reference/bb__cascades__imagepaintdefinition.html). For example:

```
Container {
    layout: DockLayout {

    }
    preferredHeight: constants.headerHeight
    minHeight: preferredHeight
    maxHeight: preferredHeight

    minWidth: constants.screenWidth
    background: back.imagePaint

    attachedObjects: [
        Constants {
            id: constants
        },
        ImagePaintDefinition {
            id: back
            imageSource: "asset:///images/header_solid.png"
            repeatPattern: RepeatPattern.X
        }
    ]
} 
```

# performance - 什么会延迟 Jenkins 服务器和 SSL SVN 服务器之间的握手（两者都没有互联网访问权限）？

> ID：15641656
> 
> 赞同：3
> 
> 时间：2013-03-26T15:58:21.183
> 
> 标签：performance, svn, jenkins, ssl-certificate, firewall

我们有一个运行 Jenkins（1.477、1.480.3 和 1.508）的 VM（在 VMWare 集群中）来构建提交到我们的 SVN 存储库（Collabnet SVN 1.7.5-3150.92）。通过 SSL 连接访问存储库。出于安全原因，两台计算机（构建服务器或 SVN 服务器）都无法访问互联网。当 Jenkins 构建开始 SVN 更新时，作业的控制台会在更新“ [https://vcfs01.redacted-address.com/svn/MTCM/Trunk](https://vcfs01.redacted-address.com/svn/MTCM/Trunk) ”时暂停 30 - 90 秒。一旦更新开始，它就会相当快。

为了排除 Jenkins 是罪魁祸首，我通过使用 TortoiseSVN 从构建服务器签出来重现了同样的问题。Tortoise 也会出现同样的延迟，一旦文件开始传输，传输速率范围为 50 - 70 KB/s（这很好）。

我们使用卡巴斯基，并已将其排除为问题，因为在具有卡巴斯基的程序员 PC 上不会出现此问题。我们还尝试排除两台服务器只是为了确定 %100。

有一段时间我确信这是证书吊销检查的问题，因为我在 WireShark 中看到来自[http://ctldl.windowsupdate.com/msdownload/update/v3/static/trustedr/en/disallowedcertstl.cab?dca976bb02bdc2e3](http://ctldl.windowsupdate.com/msdownload/update/v3/static/trustedr/en/disallowedcertstl.cab?dca976bb02bdc2e3)的尝试 HTTP GET . 使用[此知识库文章](http://support.microsoft.com/kb/2677070)中的步骤，我在 Jenkins 服务器和 SVN 服务器上禁用了证书吊销检查（尽管我怀疑后者是否重要）。进行此更改后，我不再尝试连接到 windowsupdate 服务器，而是看到了来自[http://crl.globalsign.com/gs/gsorganizationvalg2.crl](http://crl.globalsign.com/gs/gsorganizationvalg2.crl)的 HTTP GET 。我偶然发现了[这篇关于禁用 CRL 检查的文章](http://www.page-house.com/blog/2009/04/how-to-disable-crl-checking.html). 我对两个服务器都按照那里的步骤操作，不再看到对外部（互联网）地址的 HTTP GET。

当 Jenkins 服务器可以访问 Internet 时，Tortoise 中的握手需要大约 5 秒（而防火墙阻止访问时大约需要 90 秒）。尽管 Tortoise 的握手速度很快，但 Jenkins 的握手速度与防火墙安装时的速度相同！

我对 Jenkins 做了一些研究（我也将 Jenkins 从版本 1.477 更新到了 1.508），发现[了一篇关于 SVNKit has questions with symbolic links 的文章](http://wiki.svnkit.com/SVNKit_FAQ#Q:_I.27m_encountering_performance_issues_refreshing_a_working_copy_accessed_through_a_symbolic_link.)。据我所知，没有使用任何符号链接。

我在 WireShark 中看到的是 Jenkins 服务器和 SVN 服务器之间有一些初始活动（创建加密连接）。在初始活动约 30 秒过去后，会有更多活动（发送应用程序数据）。在应用程序数据之后还有大约 30 秒的延迟，然后发送更多应用程序数据，加密连接被重置，更新开始。

我与网络小组讨论了@Chris 和@Barmar 所写的内容，网络小组说：

> 我们的 DNS 服务器已经有一个反向 168.192 查找区域，并且填充了很多服务器。除了搜索内部服务器的旧流氓条目外，我很少需要对这些区域做任何事情。

我认为这意味着这不是查找问题，但我在这里不知所措。这是 Jenkins 机器 (172.25.2.106) 和 SVN 服务器 (172.25.2.106) 之间的过滤捕获，显示了数据包传输之间的暂停：

![WireShark 追踪](../Images/05a5fedfdded522363f301ed34606d09.png)

这两个都是 Win2K8 R2 Datacenter VMware 机器。根据我们的网络组，这些服务器的 DNS 条目/查找已配置并正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-27T20:22:10.050

**问题：**在防火墙服务器上的命令行上调用 SVN 后，15 秒内没有任何可见的事情发生，然后程序退出并出现以下错误：

svn：E170013：无法连接到 URL 'SVN.REPOSITORY.REDACTED' 的存储库

svn: E730054: Error running context: 现有连接被远程主机强行关闭。

**调查：**互联网对上述错误的研究没有发现任何相关信息。

进程跟踪 (procmon) 显示了在与 SVN 服务器进行 SSL/TLS 握手后与 Akamai（云服务）服务器的连接尝试。服务器的主机名未显示在进程跟踪中。反向 DNS 查找显示 a184-51-112-88.deploy.static.akamaitechnologies.com 或 a184-51-112-80.deploy.static.akamaitechnologies.com 作为主机名，IP 为 184.51.112.88 或 184.51。 112.80（DNS 缓存中有 2 个条目）。

数据包捕获工具 (MMA) 在与 SVN 服务器进行 SSL/TLS 握手后显示了与主机名 ctldl.windowsupdate.com 的连接尝试。

Windows Crypto API 试图连接到 Windows 更新以检索证书吊销信息（CRL - 证书吊销列表）。CRL 检索的默认超时为 15 秒。服务器上的认证超时时间为 10 秒；由于 15 大于 10，因此失败。

**分辨率：**互联网研究发现以下内容：（另见底部图片）

解决方案 1：减少 CRL 超时组策略 -> 计算机配置 -> Windows 设置 -> 安全设置 -> 公钥策略 -> 证书路径验证设置 -> 网络检索 - 见下图。

[https://subversion.open.collab.net/ds/viewMessage.do?dsForumId=4&dsMessageId=470698](https://subversion.open.collab.net/ds/viewMessage.do?dsForumId=4&dsMessageId=470698)

support.microsoft.com/en-us/kb/2625048

blogs.technet.com/b/exchange/archive/2010/05/14/3409948.aspx

解决方案 2：为 CRL 流量打开防火墙

support.microsoft.com/en-us/kb/2677070

解决方案 3：SVN 命令行标志（未经测试）

serverfault.com/questions/716845/tortoise-svn-initial-connect-timeout - 备用 svn 命令行标志解决方案。

**附加信息：**调试此问题特别困难。SVN 1.8 禁用了对 Neon HTTP RA（存储库访问）库的支持，转而支持删除客户端调试日志记录的 Serf 库。[1] 此外，返回的 SVN 错误代码与 svn_error_codes.h 中给出的字符串不匹配 [2] 此外，SVN 错误代码无法轻松映射回其 ENUM 标签，本例 SVN 错误代码 E170013 映射到 SVN_ERR_RA_CANNOT_CREATE_SESSION。

1.  stackoverflow.com/questions/8416989/is-it-possible-to-get-svn-client-debug-output
2.  people.apache.org/~brane/svndocs/capi/svn__error__codes_8h.html#ac8784565366c15a28d456c4997963660a044e5248bb3a652768e5eb3105d6f28f
3.  code.google.com/archive/p/serf/issues/172

**建议的 SVN 更改：**

1.  为所有操作启用命令的详细程度

2.  将错误 ENUM 名称添加到 stderr

3.  为 Serf Library 调试日志添加配置标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:58:47.997

它看起来仍然是 DNS 解析问题、证书吊销列表问题或 (!) IPv6 问题。我无法为您提供分步解决方案，但以下是要检查的事项列表：

**域名系统**

*   验证 DNS 解析是否在受影响的机器（客户端和服务器）上正常工作，
*   验证所有涉及的机器在 DNS 上都有 PTR（反向查找区域）记录，并且这些记录是正确的。

**证书**

*   延迟是否通过普通 HTTP 重现？
*   您是否在 SVN 服务器上安装了*自签名证书？*证书是否在您的网络上受信任或由证书颁发机构签名？

**IPv6**

*   您是否尝试在客户端上禁用 IPv6 并尝试访问 SVN 服务器？这种情况有延迟吗？

* * *

还有另一种方法可以帮助我们排查延迟问题：

您可以在 Subversion 客户端上启用低级别日志记录，并尝试使用命令行客户端重现该问题。检查客户端上的调试输出，看看延迟究竟是什么时候发生的。延迟之前和之后会发生什么？

HOWTO 启用客户端日志记录：

1.  将以下字符串添加到客户端[服务器文件](http://svnbook.red-bean.com/en/1.5/svn.advanced.confarea.html#svn.advanced.confarea.opts.servers)`[global]`的部分 ：`%APPDATA%\subversion\servers`

    `neon-debug-mask = 395`

2.  重现问题。查看操作何时开始“滞后”或间歇性停止（您应该注意操作何时中断）。

有关 neon-debug-mask 的更多详细信息，请参阅[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html)：

> 霓虹灯调试掩码
> 
> 这是底层 HTTP 库 Neon 用于选择要产生哪种类型的调试输出的整数掩码。默认值为 0，这将使所有调试输出静音。有关 Subversion 如何使用 Neon 的更多信息，请参阅[第 8 章，嵌入 Subversion](http://svnbook.red-bean.com/en/1.7/svn.developer.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:25:21.647

网络组注意到这些机器是虚拟机并且没有安装 VMTools。他们现在已经安装了 VMTools。起初性能似乎相同，但现在更新大约需要 30 秒（仍然比 Tortoise 差，但比原来好）。

# html - 如何自定义html消息 我正在尝试自定义已经如下所示的输入类型文件的消息： 我需要垂直对齐“未选择文件”的中间并更改“选择文件”和“未选择文件”的文本 <

> ID：15641660
> 
> 赞同：3
> 
> 时间：2013-03-26T15:58:43.277
> 
> 标签：html, file-upload, input

我正在尝试自定义已经如下所示的输入类型文件的消息：

![http://www.hangar-hosting.com/descargas/01.png](../Images/cf4365fd62826bdfd3f6a5dacc32f6c8.png)

我需要垂直对齐“未选择文件”的中间并更改“选择文件”和“未选择文件”的文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T10:56:02.100

您可以像这样自定义：

```
<style type="text/css">
#upload-file-container input {
   filter: alpha(opacity=0);
   opacity: 0;   
}
</style>

<br />
<label>Please click the Image to Upload a file:</label>
<div id="upload-file-container">
<input type="file" name="photo" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:58:39.547

在 Evan 的示例中添加填充可以垂直对齐文本。文本本身是由系统生成的：

[http://community.mybb.com/thread-59344.html](http://community.mybb.com/thread-59344.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:04:33.977

[http://jsfiddle.net/5rp5e/2/](http://jsfiddle.net/5rp5e/2/) （工作示例）

```
 <div id="background">
<input type="file" value="choose file" />
</div> 
```

CSS：

```
#background{
    padding:20px;
    background: #ccc;
    width: 300px; /* or whatever you want it to be */
} 
```

# objective-c - 我们需要在类中声明变量吗？

> ID：15641661
> 
> 赞同：0
> 
> 时间：2013-03-26T15:58:45.643
> 
> 标签：objective-c, xcode

我是 Objective C 的新手，也是编程的新手。我正在阅读一本名为“Objective C for Absolute Beginner”的书，当我尝试使用他们的示例进行练习时遇到问题。

在示例中，我们有一些方法要定义，它们必须使用一些变量。但是没有行来声明这些变量，我的 Xcode 中出现错误。然后我尝试在实现中声明这些变量并且它起作用了。（不再有错误）

我的问题是，这本书缺少关于声明变量的内容还是没有必要？还是取决于 Xcode 版本？因为在下一个示例中，我再次遇到此类问题。

我知道这可能是一个愚蠢的问题，但我是全新的^^。

太感谢了。

```
#import "RadioStation.h"

@implementation RadioStation

+ (double)minAMFrequency {
return 520.0;
}

+ (double)maxAMFrequency {
return 1610.0;
}

+ (double)minFMFrequency {
return 88.3;
}

+ (double)maxFMFrequency {
return 107.9;
}

- (id)initWithName:(NSString *)newName atFrequency:(double)newFrequency {
    self = [super init];
    if (self != nil) {
         name = newName;
         frequency = newFrequency;
    }
    return self;
}

- (NSString *)name {
    return name;
}

- (void)setName:(NSString *)newName {
     name = newName;
}

- (double)frequency {
     return frequency;
}

- (void)setFrequency:(double)newFrequency {
     frequency = newFrequency;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:24:40.290

从您的代码看来，您有四个类方法，每个*名称*（NSString）和*频率*（双精度）有两个 setter/getter。

我想这两个是你`RadioStation`班级的财产。

```
@interface RadioStation : NSObject
@property (assign) NSString *name;
@property double frequency;
@end 
```

或者它可能是 ivars：

```
@interface RadioStation : NSObject{
    NSString *name;
    double frequency;
}
@property (assign) NSString *name;
@property double frequency;
@end 
```

或者，ivars 和属性的旧式组合

```
@interface RadioStation : NSObject{
    NSString *name;
    double frequency;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:01:32.237

您可以在 .h 或 .m 文件中声明变量，如下所示：

```
@interface MyViewController (){
    NSString *string;
    int integer;
} 
```

在导入下方的文件顶部使用此代码。

# jquery - 分析代码 - 我找不到源代码是如何编写的

> ID：15641662
> 
> 赞同：-3
> 
> 时间：2013-03-26T15:58:46.933
> 
> 标签：jquery, html, css

我知道我的问题可能很烦人，因为我在问一些对你来说很容易的事情，当然我可以自己检查，但这对我来说太难了。我可以找到 div 的宽度和高度，找到背景颜色和字体，但我找不到代码来做你可以在这里找到的事情：http: [//easyelo.com/](http://easyelo.com/) 在常见问题解答中，靠近底部在页面上，单击`>>`它会显示带有说明的附加文本。我不知道如何检查它在哪里执行此操作。有人能帮助我吗？

```
<div class="more" style="font-family: arial; margin-bottom: 10px; margin-top: 10px; display: block;">
                <i style="line-height: 20px; font-size: 15px;font-family:arial;">Sorry, we don’t do any jobs until they are paid for; however, we do allow you to pay in increments as small as 10 euro. </i>
                </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:33:16.223

Here's an easy solution:

Use the following code to create the elements:

```
<div id="mainLine">The immediately visible part of the thing here. <a href="#" id="more">>></a>
<p id="hiddenText">This thing appears and disappears as you click the '>>' at the end.</p> 
```

And use this jQuery script to hide the element when the page loads and then display it only when the '>>' is clicked:

```
$(document).ready(function(){
$("#hiddenText").hide();});

$(document).ready(function(){
$("#more").click(function(){
    $("#hiddenText").slideToggle("slow"); }
                 );
}); 
```

And if you are interested, here is the CSS that removes the underline from the '>>':

```
a
{
 text-decoration: none; /* I'm trying to make it look more like the original */
 } 
```

You can find a working example at [http://jsfiddle.net/2b7Vp/](http://jsfiddle.net/2b7Vp/)

This is my first answer on SO & I hope this helps you (partly stolen from @Pavel Sterba's comment. Thanks!).

# java - Java 编程 - 为应用程序保存/读取数据的最佳方式

> ID：15641666
> 
> 赞同：6
> 
> 时间：2013-03-26T15:58:56.337
> 
> 标签：java, file-io, load, save

如果已经回答了这个问题，请原谅这个问题，但过去一个小时我一直在网上搜索以试图弄清楚。

我正在努力重新开始 Java 编程，并且我正在尝试了解保存/读取我将存储在我的应用程序中的数据的最佳方式。我是否会将所有内容都放入一个文本文件并在应用程序启动时将其全部读取并在退出时将其全部保存？我认为如果应用程序太大，可能会占用太多内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:05:11.510

这取决于你有多少数据。

当您想存储一些键/值对（例如某些用户首选项）时，可以使用[Preferences](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)类，该类是使用 Windows 上的注册表、Linux 上的配置文件以及其他任何将用户首选项存储在其他设备上的首选方式来实现的平台。

当您的实际数据对于注册表来说太多但不足以保证数据库（大约几 MB）时，使用一个或多个平面文件可能是一种解决方案。当数据很复杂时，使用像 XML 这样的标准化格式而不是自制的格式可能是个好主意。Java 具有允许轻松解析和序列化 XML 的类。另一种快速而简单的解决方案是使用[ObjectStreams](http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html)来保存和恢复整个对象。这很容易实现，但可能效率不高，因为它存储了大量可能不必要的元信息。

但是，当您拥有大量数据（超过了您完全可以轻松读写的数据）时，使用数据库可能是明智之举。数据库允许您轻松访问大量数据（数 GB 量级），并免费为您提供许多您自己难以实现的功能（例如使用索引搜索记录）。数据库不是魔法。他们还使用文件来存储他们的数据（但是文件结构非常巧妙）。您可以自己复制数据库的每个功能。但是，当您可以使用现有解决方案时，为什么还要重新发明轮子呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:07:20.067

我会说，如果您需要存储少量信息，您可以使用属性文件。

*   例如：[http ://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

如果您需要存储比属性更复杂的结构，我建议使用数据库（HSQL、Oracle、Mysql、MSSQL 等...）。看你的需要。

*   例如：[http ://www.mkyong.com/tutorials/jdbc-tutorials/](http://www.mkyong.com/tutorials/jdbc-tutorials/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:10:21.403

如果问题也是如何将数据输入和输出文件，我只是想抛出关键字“序列化”，以防您不熟悉它。谷歌一下，教程很多。简而言之，Java 内置了对向二进制字节流写入对象和从二进制字节流读取对象的支持，然后您当然可以对文件进行写入/读取。因此，您不必实现用于存储和读取不同成员的代码。只需识别代码中保存程序状态的对象并将其序列化即可。您还可以序列化为 XML，使创建的文件可手动编辑。

# facebook - Facebook 请求未启动我的 android 应用程序

> ID：15641671
> 
> 赞同：2
> 
> 时间：2013-03-26T15:59:23.733
> 
> 标签：facebook, request

我已经发送请求以在我的 android 应用程序上工作，但是即使我的应用程序在 facebook 仪表板中正确配置，打开请求也永远不会启动我的应用程序！

我已经正确设置了我的包名和类名 - 我在我的 java 代码中使用相同的包名和类名开始我的 facebook 活动。我还设置了 Facebook 登录和深度链接关闭。有什么可能会阻止我的应用程序启动吗？我显然在关注这个：[https ://developers.facebook.com/docs/howtos/androidsdk/3.0/app-link-requests/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/app-link-requests/)

# windows - Inno Setup 包在静默重新安装期间的行为

> ID：15641672
> 
> 赞同：1
> 
> 时间：2013-03-26T15:59:24.017
> 
> 标签：windows, installation, inno-setup

我有 2 个 Inno Setup 安装包。`A`取决于 中的一个或多个组件`B`。通常，`A`会静默安装`B`标记它需要安装的组件。假设`B`已经安装了用户选择的组件。现在`A`将被安装并需要来自 package 的常用组件`B`。如何确保这一点？我可以像往常一样运行静默安装，仅额外安装所需的组件（如果还没有的话）？如果未选择已安装的组件，这会删除它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:15:34.663

您可以使用所需的组件静默运行安装。

Inno 本身不会删除未选择的组件，但脚本可以在未选择组件时执行删除功能的操作。如果您可以控制设置 B 并且您还没有这样做，那么您无需担心。

# mvvm - ViewModel 中的单一职责原则

> ID：15641677
> 
> 赞同：0
> 
> 时间：2013-03-26T15:59:37.877
> 
> 标签：mvvm, viewmodel, single-responsibility-principle

我正在编写图形编辑器（图论）。假设顶点需要这些属性：

```
class Vertex{
int ID {get;}
Color color {get; set;}
Point point{get; set;}
} 
```

但这违反了SRP（单一责任原则）。所以我创造了一些想法：

```
class Vertex{
int ID {get;}
}

class Positions{
private Dict<Vertex,Point> _pos;

setPosition(Vertex v, Point pos);
Point getPosition(Vertex v);
}

//etc. 
```

正确的？

但是ViewModel对于顶点的需求，所有这些属性都要显示出来。

```
class VertexVM
{
Vertex _v;
Positions _positions;
//...
Point position
{
     get {return _positions.getPosition(_v); }
}

// same for color etc

} 
```

是否违反 SRP？（在我看来，是的。）有什么办法可以避免它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:11:06.637

我会说您最初的顶点定义违反了 SRP，但不是因为您似乎通过重构暗示的原因。另一方面，您的 VertexVM 违反了 SRP。

图论中的顶点是图中的一个点或位置。根据定义，它应该负责知道它的位置。因此它应该包含该点。颜色是否属于它是另一回事。我猜可能不是，因为这可能与显示更相关并且不属于模型类。导致视图以特定颜色显示顶点的顶点类型可能是合适的。

在 VertexVM 中，视图模型旨在向视图表示单个顶点。知道图中所有顶点的位置不是它的责任。这绝对违反了 SRP。

# android - 如何避免 Eclipse/Android 丢失硬件设备

> ID：15641678
> 
> 赞同：-1
> 
> 时间：2013-03-26T15:59:47.700
> 
> 标签：android, eclipse

所以我通常测试 om SGII。然后我安装了 HTC Sync 以在旧的 Android 手机上进行测试。虽然这行得通，但 Eclipse 现在已经失去了与 SGII 的联系。您如何维护多个硬件设备进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:02:55.153

我看到了几种可能性，但这实际上取决于您的操作系统。如果您在 Windows 上工作，一些可能性是：

*   尝试断开并重新连接 USB 电缆。Windows 应尝试重新启动与您的设备的连接
*   在命令提示符中键入 adb kill-server。然后输入 adb start-server。这些命令告诉 adb 停止并重新启动（这应该比重新启动计算机成本更低）
*   重新安装驱动程序。很可能其中一个（或两个）以某种方式搞砸了。
*   如果您在安装第二台设备时连接停止工作，请尝试重新安装第一台设备的驱动程序。第二个的安装可能搞砸了第一个的

# ios - 不同版本的 iOS 是否需要不同的 iOS 无线分发方法？

> ID：15641679
> 
> 赞同：1
> 
> 时间：2013-03-26T15:59:50.553
> 
> 标签：ios, ota, enterprise-distribution

我已经使用 Cordova 创建了一个 iOS 应用程序，目标是 iOS 4.3 及更高版本。我正在使用企业 OTA 分发应用程序。该应用程序安装在服务器上，并带有指向 plist 文件的链接，如下所示。

```
<a href="itms-services://?action=download-manifest&amp;url=http://ww7.mysite.com/mobile/MyAppName.plist" style="font-family: Arial, Helvetica, sans-serif; text-decoration: underline; font-size: xx-large; font-weight: normal; font-style: normal; color: #FF9900">Install App</a> 
```

该应用程序在 iOS 6 上安装良好。在 iOS 4.3 和 5.1 上，我收到错误“无法连接到 ww7.mysite.com”

当我在尝试安装应用程序时使用 iPhone 配置实用程序查看控制台时，我看到以下错误。

“3 月 26 日 11:00:00 iPhone itunesstored[302]：无法加载下载清单并出现潜在错误：错误域 = SSErrorDomain 代码 = 1“无法连接到 iTunes Store”UserInfo=0x1c5645f0 {NSLocalizedDescription=无法连接到 iTunes Store}”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:34:14.133

事实证明，在我的构建过程中，当我到达创建 .plist 和 .ipa 文件的“Save For Enterprise”步骤时，我正在重命名 .ipa 文件。看起来 iOS 6 可以很好地处理这个重命名，而早期版本的 iOS 不会接受不同的名称。使用默认名称保存 .ipa 文件解决了该问题。

# c# - 我可以只下载 .NET 命令提示符吗？

> ID：15641681
> 
> 赞同：-6
> 
> 时间：2013-03-26T15:59:55.247
> 
> 标签：c#

我正在学习 C#。我使用 SharpDevelop IDE 来开发应用程序。我不想安装 Visual C#，因为我的硬盘驱动器上的可用空间有限。但现在我需要命令提示符 .NET 来开发 dll 文件和编译 C# 文件。我可以只下载命令提示符吗？如果是这样，我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:01:21.373

您可能正在寻找的不是“命令提示符”，而是 C# 编译器 ( `csc`)。它包含在您可能已经安装的[.Net 框架](http://www.microsoft.com/net/download)中（如果没有：无论如何，您都需要它来运行 .Net 应用程序）。[本文档](http://msdn.microsoft.com/en-us/library/vstudio/78f4aasd.aspx)描述了如何从“普通命令提示符”和“Visual Studio 命令提示符”中使用 CSC。

# kendo-ui - Kendo UI Grid 向服务器重复请求错误

> ID：15641686
> 
> 赞同：0
> 
> 时间：2013-03-26T16:00:08.527
> 
> 标签：kendo-ui

我不知道如何描述细节，你可以在这个视频中看到一个错误： [http](http://www.youtube.com/watch?v=D6NPd-j2erg&feature=youtu.be) ://www.youtube.com/watch?v=D6NPd-j2erg&feature= youtu.be 这是我使用的代码：

```
$(document).ready(function () {
    var dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "/customer/get",
                dataType: "json",
                type: "POST"
            },
            update: {
                url: "/customer/edit",
                dataType: "json",
                type: "POST"
            },
            destroy: {
                url: "/customer/delete/",
                dataType: "json",
                type: "POST"
            },
            create: {
                url: "/customer/add",
                dataType: "json",
                type: "POST"
            }
        },
        batch: false,
        pageSize: 20,
        serverPaging: true,
        serverFiltering: true,
        serverSorting: true,
        schema: {
            data: "Data",
            total: "Total",
            model: {
                id: "CustomerId",
                fields: {
                    CustomerId: { editable: false, nullable: true },
                    Name: { validation: { required: true } },
                    Code: { type: "string", editable: false }
                }
            }
        }
    });

    $("#grid").kendoGrid({
        dataSource: dataSource,
        height: 430,
        filterable: true,
        sortable: true,
        pageable: {
            refresh: true,
            pageSizes: [10, 20, 30],
            buttonCount: 10
        },
        toolbar: ["create"],
        columns: [
            { field: "Name", title: "Name" },
            { field: "Code", title: "CODE", width: "100px" },
            { command: ["edit", "destroy"], title: "&nbsp;", width: "200px" }],
        editable: "popup"
    });
}); 
```

我犯了什么错误吗？我添加了以下 Kendo Ui 库：

```
<script src="/Scripts/kendo/2013.1.319/jquery.min.js"></script>
<script src="/Scripts/kendo/2013.1.319/kendo.all.min.js"></script>
<script src="/Scripts/kendo/2013.1.319/kendo.aspnetmvc.min.js"></script>
<script src="/Scripts/kendo.modernizr.custom.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:18:23.047

事实上，新版本的 jQuery 发生了重大变化，影响了 Kendo Q1 2013 版本 2013.1.319

[http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string](http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string)

由于从服务器返回空结果以防万一一切都在服务器端正确执行 - 因为空结果不是有效的 json，所以会引发错误事件。

要解决此问题，我建议您从服务器返回空数组。

对于使用扩展的 ASP.NET 用户，他们可以使用：

return Json(new object[0].ToDataSourceResult(request,ModelState));

基本上更新/删除操作后来自服务器的有效结果应该类似于这个：

```
{"Data":[],"Total":0,"AggregateResults":null,"Errors":null} 
```

这将由 ASP.NET MVC 用户的 ToDataSourceResult 扩展在内部解决，并使用下一个内部构建（我们很可能会在明天添加它），并且它也将被添加到文档的重大更改/故障排除部分。

# linux - 如何使用 API 调用而不是 shell 命令删除 Linux 内核模块？

> ID：15641691
> 
> 赞同：1
> 
> 时间：2013-03-26T16:00:23.560
> 
> 标签：linux, linux-device-driver

如何使用 API 调用而不是 shell 命令删除 .ko 模块。System() 函数我已经知道了。还有其他方法吗？

# wcf - 我们可以发送一个通用列表（列表 ) 作为 WCF OperationContract 的参数？

> ID：15641692
> 
> 赞同：0
> 
> 时间：2013-03-26T16:00:24.327
> 
> 标签：wcf, parameter-passing, datacontract, generic-collections, operationcontract

我们可以将通用列表 (List) 作为参数发送到 WCF OperationContract 吗？

似乎唯一的方法是将List封装为另一个类中的DataMember，并将该类指定为DataContract：

但这对我来说不合适。还有其他方法吗？

EDIT1：
预期签名：

```
[OperationContract]  
List<int> OperationName(List<CustomObject> objects); 
```

这在客户端转换为 CustomObject[]。我目前正在从我的客户传递 CustomObject[] 并且它工作正常，但我想知道为什么我不能通过

```
 List <CustomObject> 
```

这给了我一个编译错误，说没有采用指定参数的函数的重载版本（类型不匹配错误）

编辑2：
相关问题：
1）我应该能够从服务本身控制它。如果我将我的服务公开给全世界，而 wsdl/Proxy 是他们知道我的 OperationContract 签名的唯一方法，该怎么办？
2) 如果我想在同一个服务合同的不同操作合同中同时使用 System.Array 和 System.Generic.List 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:13:35.990

List 是一种高级类型，可能不适用于所有编程范例。相比之下，数组可能在所有编程范式中都可用。因此默认情况下，翻译将落入代理 wsdl 的数组中

现在在这种情况下，如果您确定您的客户端是 .Net，您可以将客户端更改为使用 List。由于服务不知道客户端的编程语言是什么，因此客户端决定使用列表还是数组的 svcutil 当前设计是正确的。如果您使此设置在服务中可用，您将排除没有列表概念的客户端

回到你的第二个问题，只要你的操作合约名称不同，你就可以在同一个服务中分别使用数组和列表。另请注意，OOP 概念在 SOA 中受到限制，这意味着您不能拥有多态方法。

以下问题包含有关 OOP 和 SOA 的更多详细信息

[WCF 对象设计 - OOP 与 SOA](https://stackoverflow.com/questions/2023027/wcf-object-design-oop-vs-soa)

# vba - 将范围对象传递给 excel-vba 中的函数——收到“需要对象”错误

> ID：15641693
> 
> 赞同：2
> 
> 时间：2013-03-26T16:00:27.050
> 
> 标签：vba, excel

我正在尝试构建一个函数，该函数将采用输入单元格（例如“B5”）并返回一个引用表格的范围对象（其中提供的单元格是右上角的条目）

```
Sub Macro1()
Dim testCell As Range

testCell = Worksheets("HMA").Range("B5")
ReturnTable testCell

End Sub

Function ReturnTable(cell As Range)
    firstcell = cell
    lastrow = firstcell.End(x1Down)
    Table = Range(firstcell, lastrow + 5).Value
End Function 
```

我在这里遇到了很多问题，我觉得我错过了一些简单的东西。我得到的错误是 lastRow 行的“需要对象”。

在调试模式下查看它，我看到 testCell 被分配了范围对象的值（我假设这是默认值）。我在这里想念什么？

我的方法是否合理？我应该考虑以不同的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:14:30.377

End 返回一个 Range 对象，因此 lastrow 必须是一个范围变量。

```
Function ReturnTable(firstcell as Range) as Range 'add this as range to tell the result of the function is a range
    dim LastCell as Range
    Set LastCell = firstcell.END(xldown)
    Set ReturnTable = Range(firstcell, lastcell) 'must use the same name of the function
End Function 
```

如果你想要 lastcell 下面的 5 个单元格，请使用`LastCell.Offset(5,0)`

在 Macro1 中，你可能会想要类似的东西

```
Set SomeVar = ReturnTable(testcell) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:15:35.927

当您分配对象（如范围）时，您必须使用“设置”。

如果您在没有“设置”的情况下分配 Range，VBA 将分配 Range 的值而不是 Range 本身。

```
Set testCell = Worksheets("HMA").Range("B5") 
```

# http - URI 是否不区分大小写？

> ID：15641694
> 
> 赞同：22
> 
> 时间：2013-03-26T16:00:29.177
> 
> 标签：http, protocols, specifications, rfc2616

> 在比较两个 URI 以确定它们是否匹配时，客户端
> 应该使用区分大小写的字节对整个
> URI 进行逐个字节的比较，但以下情况除外：

[我在Http Rfc](https://www.rfc-editor.org/rfc/rfc2616)中阅读了上面的句子我认为 Url 不区分大小写，但我不明白这意味着什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-10-04T19:07:05.830

[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)指出：

> 方案和主机不区分大小写，因此应标准化为小写。例如，URI`<HTTP://www.EXAMPLE.com/>`等效于`<http://www.example.com/>`. **除非方案另有明确定义，否则假定其他通用语法组件区分大小写**

[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)为方案定义了以下比较规则`HTTP`：

> 在比较两个 URI 以确定它们是否匹配时，**客户端应该使用区分大小写的字节对整个 URI 进行逐个字节比较，但**以下情况除外：

然而，[RFC 7230](https://www.rfc-editor.org/rfc/rfc7230)进一步将其锁定为：

> 方案和主机不区分大小写，通常以小写形式提供；**所有其他组件都以区分大小写的方式进行比较。**

这些规则通常适用于*客户端*比较。没有专门针对*服务器端*比较的规则。一旦服务器将 URI 分解为其组件，它应该根据相同的规则处理它们，但我认为 RFC 中没有强制执行。一些 Web 服务器，如 Apache，确实遵循规则。IIS 没有，因为它与 Windows 不区分大小写的文件系统兼容。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-26T16:01:28.467

实际上，它取决于 Web 服务器。

IIS 不区分大小写。

阿帕奇是。

我怀疑有关 IIS 的决定源于 Windows 文件系统不区分大小写这一事实。

IIS 仍然符合规范的那部分，因为应该是建议，而不是要求。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-26T16:11:14.957

URI 的主机部分不区分大小写：

```
http://stackoverflow.com
http://StackOverflow.com 
```

以上任何一项都会让您访问该站点。

主机部分之后的 URI 的其余部分可能区分大小写。这取决于服务器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-31T10:51:38.937

正如 Remy Lebeau 在回答中提到的，规则是为客户端设置的。实际上，这意味着**客户端软件**不应尝试对 URI 的所有部分进行任意大小写修改，除非有明确说明的部分。因此，当浏览器例如在页面锚点中看到相对 URL 时，不应该在检查它是否已经缓存在其缓存中之前将其转换为小写；它也不应该使用小写的 URI 来发布到服务器。此外，它不应该决定两个不同的 URI 仅指向相同的资源（因此可能错误地跳过事务并返回缓存的结果）。

这意味着**客户端不应假设**服务器如何处理 URI。它确实要求服务器处理**某些**不区分大小写的部分：例如，方案和主机。但除此之外，由服务器决定两个大小写不同的 URI 是否指向同一个资源。标准在这方面对服务器没有任何限制，除了直接规定外，没有“服务器应该”或“服务器不应该”。如果服务器决定它的 URI 不区分大小写，那绝对没问题。如果它们区分大小写，那也没关系。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-04T18:30:01.833

URL 是否区分大小写也取决于 Web 服务器。例如，Microsoft IIS 服务器**不**将 URL 视为区分大小写。

以下 URL（托管在 Microsoft IIS 服务器上）都被视为等效：

*   [http://www.microsoft.com/default.aspx](http://www.microsoft.com/default.aspx)
*   [http://www.microsoft.com/Default.aspx](http://www.microsoft.com/Default.aspx)

但是，Apache 服务器**确实**将 URL 视为区分大小写，这被归类为两种不同的资源：

*   [http://httpd.apache.org/index.html](http://httpd.apache.org/index.html)
*   [http://httpd.apache.org/Index.html](http://httpd.apache.org/Index.html)

从技术上讲，Apache 在这里正确地遵循了标准，而微软正在违反规范……哦，好吧——“旧习惯很难改掉，”他们说！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-17T01:05:15.133

对于基于文件的 URI，区分大小写更多地取决于底层文件系统，而不是 Web 服务器。Apache 将很高兴在 Windows（FAT、NTFS）和 mac（HFS）上返回，但不适`index.html`用于`INDEX.html`区分大小写的文件系统，例如那些通常在 Linux 中使用的文件系统（extx 等）。

# oracle - Oracle varchar2 到时区时间戳

> ID：15641695
> 
> 赞同：0
> 
> 时间：2013-03-26T16:00:32.817
> 
> 标签：oracle, timezone, timestamp, varchar2

我正在尝试将包含带时区的时间戳的 VARCHAR2 变量转换为 DATE 变量。我可以在没有时区的情况下转换时间戳，但是当我为时区添加逻辑时，我得到“ORA-01821：日期格式无法识别”。请看下面的代码：

```
 DECLARE
      v_string VARCHAR2(400) := '2011-05-12 19:04:41.032645 +00:00';
      v_date   DATE;
    BEGIN

      SELECT to_timestamp(v_string,'YYYY-MM-DD HH24:MI:SSxFF TZH:TZM')
        INTO v_date
        FROM dual;

    END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:02:45.287

使用[`TO_TIMESTAMP_TZ`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/toc.htm)：

```
SQL> DECLARE
  2     v_string VARCHAR2(400) := '2011-05-12 19:04:41.032645 +00:00';
  3     v_date   DATE;
  4  BEGIN
  5     v_date := to_timestamp_tz(v_string, 'YYYY-MM-DD HH24:MI:SS.FF TZH:TZM');
  6  END;
  7  /

PL/SQL procedure successfully completed 
```

# forms - 如何在 Bootstrap 表单中添加“全选”和“其他”选项

> ID：15641696
> 
> 赞同：0
> 
> 时间：2013-03-26T16:00:40.567
> 
> 标签：forms, twitter-bootstrap

我正在使用 Twitter 的 Bootstrap 创建一个电子邮件注册表单。

我被要求为感兴趣的产品创建一个选择选项。

```
<label>Products interested in:</label>

<select>
<option>Select all</option>
<option>Product A</option>
<option>Product B</option>
<option>Other</option>
</select> 
```

如您所见，那里有两个开箱即用的选项。

A) 选择所有 B) 其他

谁能告诉我如何实现这些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:50:15.083

It depends on what you want the 2 options to do? For any product or "select all and Other" you will need an event after that option has been selected.

I'm guessing you will need to use jquery to do something with the selection otherwise it will just "sit" in the select box.

# java - 对来自多个模式的表执行数据库操作的服务方法的事务管理器

> ID：15641697
> 
> 赞同：4
> 
> 时间：2013-03-26T16:00:46.620
> 
> 标签：java, spring, hibernate, transactions

*   该应用程序在 Spring + hibernate 中。
*   它有一个更新来自 3 个模式的 mysql 表的过程。
*   每个模式都有不同的数据源、会话工厂和事务管理器。
*   我有 3 个 DAO 类在它们各自的模式表上执行数据库操作。
*   由于所有数据库操作都应该在一个事务下，我从一个服务方法调用这些 dao 方法。

但问题是我不知道如何注释这个服务方法`@Transactional`。事务注释只接受一个事务管理器，但我有 3 个。我的方法错了吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:47:17.823

如果您需要协调多个事务资源，那么我认为您唯一的选择是使用带有 JTA 的分布式事务管理。 [本文](http://blog.springsource.org/2011/08/15/configuring-spring-and-jta-without-full-java-ee/)解释了如何配置 Spring 以使用 JTA 事务管理器。

### 编辑：

在做了一些研究之后，如果您的三个数据源真的只是指向由同一台服务器托管的不同模式（与 mysql 中的数据库相同），那么您似乎有一个更好的选择。如果是这种情况，并且您有一个用于所有三个连接的用户，那么您基本上可以将它们合并到一个连接中，并`@Table`在您的实体上使用注释来指定它们所属的架构，例如：`@Table(schema = "schemaX")`.

可以这样做是因为连接 URL 中给出的数据库名称仅指定了默认数据库（请参阅[doc](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html#idp121944656)），但您仍然可以执行 SQL 语句，用其他数据库名称限定表名，这正是`@Table`注解导致 Hibernate 的原因。

现在拥有一个单一连接解决了您最初的问题，即在来自不同模式的表中进行原子更新。

# symfony - 使用 Symfony 2.2 和 Doctrine 2.2.* 我无法通过级联保存 manyToMany 关系：坚持

> ID：15641698
> 
> 赞同：0
> 
> 时间：2013-03-26T16:00:48.820
> 
> 标签：symfony, doctrine-orm, save, relation

我尝试使用 Doctrine casecade 功能自动保存两个实体之间的关系，但它似乎不起作用。

我在这里做了一个演示：[https](https://github.com/asakurayoh/demo_bug_doctrine) ://github.com/asakurayoh/demo_bug_doctrine 所以我使用教义夹具来制作我的演示。您需要创建数据库（app/console 学说：数据库：创建），迁移表（应用程序/控制台学说：迁移：迁移），然后加载夹具（应用程序/控制台学说：夹具：加载）。第三个夹具（src/Demo/MyBundle/DataFixtures/ORM/TagsNewsFixtures.php）将所有标签实体添加到所有新闻中。如果你去数据库，你会看到 news_tag 表中没有保存任何关系......我认为我的关系在我的映射（Resources/config/doctrine/News.orm.yml 和 Tag.orm. yml) 并且设置了级联属性。

有人能找到这段代码的问题吗？我到处搜索（也是stackoverflow），我已经完成了每个人都说的一切......它应该工作......

感谢拯救我的生命（和我的实体关系，哈！）

朝仓耀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:17:58.283

问题在于夹具加载顺序 -`TagNewsFixtures`首先加载，因此当时数据库中没有标签或新闻。尝试使用 ordere 强制加载顺序

```
namespace Acme\HelloBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\DataFixtures\OrderedFixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;

class LoadData extends AbstractFixture implements OrderedFixtureInterface
{
    public function load(ObjectManager $manager)
    {
        // ...
    }

    public function getOrder()
    {
        return 1; // the order in which fixtures will be loaded
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:54:48.527

我发现了问题。“joinTable”属性需要在新闻端，新闻使用“inversedBy”属性，而不是 MappedBy（即标签）。所以它起作用了。并且要将新闻添加到标签（然后做相反的事情），我们需要在 Tag 实体中指定将标签添加到新闻......我不明白为什么 Doctrine 默认不这样做......诡异的...

# c# - 什么是域验证的最佳正则表达式？

> ID：15641699
> 
> 赞同：-6
> 
> 时间：2013-03-26T16:00:53.107
> 
> 标签：c#, regex, validation

我有一种情况需要验证以下域，例如 starbucks.com、apple.com、microsoft.com。大多数给定的正则表达式都无法正常工作。对于我的情况，什么是域验证的最佳正则表达式？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T18:15:06.050

**免责声明：**请注意，定义“有效域”的规则构成移动目标。下面的答案仅处理“老派”DNS 规则（仅使用 ASCII 字符），不尝试处理国际域（如[RFC3490](https://www.rfc-editor.org/rfc/rfc3490)中所述）。另请注意，很快就会出现许多新的顶级域 (TLD)，因此需要定期更新以下解决方案（请参阅：[IANA.ORG](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)以获取当前有效 TLD 的列表）。

## DNS 命名主机验证

根据相关的 Internet 建议（[RFC3986 第 2.2 节](https://www.rfc-editor.org/rfc/rfc3986#section-3.2.2)，依次指：[RFC1034 第 3.5 节](https://www.rfc-editor.org/rfc/rfc1034#section-3.5)和[RFC1123 第 2.1 节](https://www.rfc-editor.org/rfc/rfc1123#section-2.1)），子域（它是 DNS 域主机名的一部分）必须满足几个要求：

## 子域

*   每个子域部分的长度必须不大于 63。
*   `[A-Za-z]`每个子域部分必须以字母数字（即字母或数字）开头和结尾`[0-9]`。
*   每个子域部分可能包含连字符（破折号），但不能以连字符开头或结尾。

这是满足这些要求的子域部分的表达式片段：

`(?:[A-Za-z0-9][A-Za-z0-9\-]{0,61}[A-Za-z0-9]|[A-Za-z0-9])`

请注意，此表达式需要具有两个备选方案的组来处理只有一个字符的子域的特殊情况。此外，此表达式片段不应单独使用 - 它需要在更大的上下文中结合边界条件，如下面的 DNS 主机名表达式所示...

## DNS 主机名

命名主机（不是 IP 地址）必须满足其他要求：

*   主机名可能由多个子域部分组成，每个部分由一个点分隔。
*   整个主机名的长度不应超过 255 个字符。
*   顶级域（DNS 主机名的最右边部分）必须是国际公认的值之一。有效顶级域的列表由 IANA.ORG 维护。（请参阅此处的基本当前列表：http: [//data.iana.org/TLD/tlds-alpha-by-domain.txt](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)）。

考虑到这一点，这里有一个注释正则表达式（在 C# 语法中），它将伪验证 DNS 主机名：（请注意，这包含了上述子域表达式的修改版本，并为此添加了注释）。

```
if (Regex.IsMatch(text, @" # Rev:2013-03-26
    # Match DNS host domain having one or more subdomains.
    # Top level domain subset taken from IANA.ORG. See:
    # http://data.iana.org/TLD/tlds-alpha-by-domain.txt
    ^                  # Anchor to start of string.
    (?!.{256})         # Whole domain must be 255 or less.
    (?:                # Group for one or more sub-domains.
      [a-z0-9]         # Either subdomain length from 2-63.
      [a-z0-9-]{0,61}  # Middle part may have dashes.
      [a-z0-9]         # Starts and ends with alphanum.
      \.               # Dot separates subdomains.
    | [a-z0-9]         # or subdomain length == 1 char.
      \.               # Dot separates subdomains.
    )+                 # One or more sub-domains.
    (?:                # Top level domain alternatives.
      [a-z]{2}         # Either any 2 char country code,
    | AERO|ARPA|ASIA|BIZ|CAT|COM|COOP|EDU|  # or TLD 
      GOV|INFO|INT|JOBS|MIL|MOBI|MUSEUM|    # from list.
      NAME|NET|ORG|POST|PRO|TEL|TRAVEL|XXX  # IANA.ORG
    )                  # End group of TLD alternatives.
    $                  # Anchor to end of string.",
    RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace))
{
    // Valid named DNS host (domain).
} else {
    // NOT a valid named DNS host.
} 
```

请注意，此表达式并不完美。它需要一个或多个子域，但从技术上讲，主机可以由没有子域的 TLD 组成（但这很少见）。它也没有明确地拼出每两个字符的国家代码 TLD - 它只允许任何两个字母。它也没有列出以下各种顶级域名：`XN--XXXXX`品种。该解决方案也没有考虑*尚未完全实施和普遍接受的*国际域名。

有关验证其他 URI 组件的更多信息，您可能需要查看我不久前写的一篇文章：[正则表达式 URI 验证](http://jmrware.com/articles/2009/uri_regexp/URI_regex.html)。[它为RFC3986](https://www.rfc-editor.org/rfc/rfc3986)定义的所有各种 URI 组件提供各种语言的代码片段。

快乐的正则表达式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:05:24.000

```
^(http|https):\/\/|[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/ix 
```

这将接受：

苹果网

[http://apple.com](http://apple.com)

[http://www.apple.com](http://www.apple.com)

等等...

# php - 要设置哪个标头或如何下载 php 文件

> ID：15641701
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:01:11.373
> 
> 标签：php, header, download

我试图从一个 android 应用程序下载一个存储在我的服务器上的 php 文件。

从应用程序中，我调用一个 web 服务，它必须在输出中给我`.php`我需要的文件。

在网上我发现[这个](http://perishablepress.com/http-headers-file-downloads/)谈论哪个标题集下载文件。它谈到

*   压缩
*   jpg
*   文本
*   pdf

然后我想开发类似的东西：

1.  应用调用ws获取php页面
2.  ws 压缩应用程序需要的 php 文件并在 putput 中给我
3.  应用程序下载 zip 文件并将其解压缩。

这是一个很好的解决方案，但我试图找到更好的解决方案。

另一个真正像我想要的解决方案是[highlight_file](http://us3.php.net/highlight_file)

只需像这样使用它：

```
echo highlight_file("myphpfile.php"); 
```

问题是，为了渲染好文件，代码被许多 html 标签分割，只是“视觉上”是同一个文件，但来源真的不同。

有没有办法直接下载文件？谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:05:04.303

最简单的解决方案可能是：

```
<?php

header('Content-Type: text/plain');
readfile("myphpfile.php"); 
```

这将在浏览器中将文件显示为文本，您可以单击“另存为...”

如果您需要浏览器自行弹出“另存为...”对话框 - 不显示文件 - 那么您将需要`Content-Disposition`标题：

```
header('Content-Type: text/plain');
header('Content-Disposition: attachment; filename="myphpfile.php"');

readfile("myphpfile.php"); 
```

# iphone - iOS 6 中的 ARC 与 iOS 5 中的 ARC

> ID：15641705
> 
> 赞同：2
> 
> 时间：2013-03-26T16:01:23.067
> 
> 标签：iphone, ios5, ios6, automatic-ref-counting

我是 ARC 的新手。我的问题是，如果我们在视图控制器上创建类型属性，一旦导航控制器发生`strong`，我们需要将其设为 nil 。`popViewController`

通常，我们会在`viewDidUnload`. 但在 iOS 6 中，它已被弃用。

那么我们在哪里制作那个对象`nil`呢？Apple 说要这样做，`didReceiveMemoryWarning`但是每次弹出视图控制器时都不会调用该方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:03:48.950

别担心。您的属性将全部`nil`由 Objective-C 运行时自动设置为`dealloc`. 这适用于所有属性，而不仅仅是视图控制器上的插座。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:15:40.163

`strong`如果您想保留被引用对象的所有权，您可以定义一个属性。

据我所知，您可能需要一个弱属性（当您的对象被其他人释放时，您不需要它并且可以释放它）或者可以在方法中将其设置为 nil 的解决`viewDidDisappear`方法，但正如 Jim Puls说，没有看到你的代码我的只是有根据的猜测......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:49:05.887

如果您在相同的两个视图控制器之间弹出/推送，则 UINavigationController 中的指针不应该改变，只要它们没有被释放。如果它们确实被释放了，那么它们中的所有东西也应该被释放。您最终可能会创建这些视图控制器的新副本，但这不应该成为问题，因为您只是在旧副本已被释放时才创建新副本。保留对象的唯一方法是，如果您的视图控制器（或其中的对象）相互引用，从而导致它们被保留。

`strong`和之间的区别`weak`不是你需要手动设置`strong`为nil。相反，`strong`关系会导致对象被保留，而`weak`不会。这就是为什么通常将委托设置为的原因，`weak`因为您不希望委托保留其父级（不完全是父级，而是它是委托的对象）。

# android - android后台服务静态字段两次发送相同的味精

> ID：15641706
> 
> 赞同：0
> 
> 时间：2013-03-26T16:01:27.457
> 
> 标签：android, service, mqtt

我有一个大问题，我找不到解决方案。需要你的帮助。

当我尝试使用 service 在活动中仅发送一条消息时，它可以工作。但是当我尝试在另一个之后发送 2 条消息（这意味着一个接一个），使用相同的 publishTopic2 和 pushMsg2 发送消息两次。

代码是：

```
PushService.actionPush(getApplicationContext(),publishTopic1,pushMsg1);
PushService.actionPush(getApplicationContext(),publishTopic2,pushMsg2); 
```

1-这是由于同步关键字的错误使用造成的吗？2-是否可以在没有的情况下一个接一个地发送两个味精

```
public class PushService
        extends Service
{
    // this is the log tag
    public static final String TAG = "DemoPushService";
    public static String IncomingText = "";

    private static String PushMesaj = "";

    // the IP address, where your MQTT broker is running.
    private static final String MQTT_HOST = "";
    // the port at which the broker is running.
    private static int MQTT_BROKER_PORT_NUM = 1883;
    // Let's not use the MQTT persistence.
    private static MqttClientPersistence MQTT_PERSISTENCE = null;
    // We don't need to remember any state between the connections, so we use a
    // clean start.
    private static boolean MQTT_CLEAN_START = true;
    // Let's set the internal keep alive for MQTT to 15 mins. I haven't tested
    // this value much. It could probably be increased.
    private static short MQTT_KEEP_ALIVE = 60 * 15;
    // Set quality of services to 0 (at most once delivery), since we don't want
    // push notifications
    // arrive more than once. However, this means that some messages might get
    // lost (delivery is not guaranteed)
    // private static int[] MQTT_QUALITIES_OF_SERVICE = { 0 } ;
    private static int MQTT_QUALITY_OF_SERVICE = 2;
    // The broker should not retain any messages.
    // private static boolean MQTT_RETAINED_PUBLISH = false;

    // MQTT client ID, which is given the broker. In this example, I also use
    // this for the topic header.
    // You can use this to run push notifications for multiple apps with one
    // MQTT broker.
    public static String MQTT_CLIENT_ID = "begining";
    public static String SUBSCRIBE_TOPIC = "begining";
    private static String PUBLISH_TOPIC = "begining";
    // These are the actions for the service (name are descriptive enough)
    private static final String ACTION_START = MQTT_CLIENT_ID + ".START";
    private static final String ACTION_STOP = MQTT_CLIENT_ID + ".STOP";
    private static final String ACTION_SUBSCRIBE = MQTT_CLIENT_ID
            + ".SUBSCRIBE";
    private static final String ACTION_PUBLISH = MQTT_CLIENT_ID + ".PUBLISH";

    private static final String ACTION_KEEPALIVE = MQTT_CLIENT_ID
            + ".KEEP_ALIVE";
    private static final String ACTION_PUSHMESSAGE = MQTT_CLIENT_ID
            + ".PUSH_MESSAGE";
    private static final String ACTION_PUSHMESSAGE2 = MQTT_CLIENT_ID
            + ".PUSH_MESSAGE";
    private static final String ACTION_RECONNECT = MQTT_CLIENT_ID
            + ".RECONNECT";

    // Connection log for the push service. Good for debugging.
    private ConnectionLog mLog;

    // Connectivity manager to determining, when the phone loses connection
    private ConnectivityManager mConnMan;
    // Notification manager to displaying arrived push notifications
    private NotificationManager mNotifMan;

    // Whether or not the service has been started.
    private boolean mStarted;

    // This the application level keep-alive interval, that is used by the
    // AlarmManager
    // to keep the connection active, even when the device goes to sleep.
    private static final long KEEP_ALIVE_INTERVAL = 1000 * 60 * 28;

    // Retry intervals, when the connection is lost.
    private static final long INITIAL_RETRY_INTERVAL = 1000 * 10;
    private static final long MAXIMUM_RETRY_INTERVAL = 1000 * 60 * 30;

    // Preferences instance
    private SharedPreferences mPrefs;
    // We store in the preferences, whether or not the service has been started
    public static final String PREF_STARTED = "isStarted";
    // We also store the deviceID (target)
    public static final String PREF_DEVICE_ID = "deviceID";
    // We store the last retry interval
    public static final String PREF_RETRY = "retryInterval";

    // Notification title
    public static String NOTIF_TITLE = "Hey !!!";
    // Notification id
    private static final int NOTIF_CONNECTED = 0;

    // This is the instance of an MQTT connection.
    private MQTTConnection mConnection;
    private long mStartTime;

    private static clsUser yourInfo;
    public static clsOnlineUsers onlineUsers;
    private static clsUser myInfo;

    // Static method to start the service
    public static void actionStart(Context ctx)
    {
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_START);
        ctx.startService(i);
    }

    public static void actionSubscribe(Context ctx)
    {
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_SUBSCRIBE);
        ctx.startService(i);
    }

    public static void actionPublish(Context ctx)
    {
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_PUBLISH);
        ctx.startService(i);
    }

    // Static method to stop the service
    public static void actionStop(Context ctx)
    {
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_STOP);
        ctx.startService(i);
    }

    // Static method to send a keep alive message
    public static void actionPing(Context ctx)
    {
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_KEEPALIVE);
        ctx.startService(i);
    }

    public static void actionPush(Context ctx, String publishTopic,
            String pushMsg)
    {
        PUBLISH_TOPIC = publishTopic;
        PushMesaj = pushMsg;
        Intent i = new Intent(ctx, PushService.class);
        i.setAction(ACTION_PUSHMESSAGE);
        ctx.startService(i);
    }

    @Override
    public void onCreate()
    {
        super.onCreate();

        log("Creating service");
        mStartTime = System.currentTimeMillis();

        try {
            mLog = new ConnectionLog();
            Log.i(TAG, "Opened log at " + mLog.getPath());
        } catch (IOException e) {
            Log.e(TAG, "Failed to open log", e);
        }

        // Get instances of preferences, connectivity manager and notification
        // manager
        mPrefs = getSharedPreferences(TAG, MODE_PRIVATE);
        mConnMan = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        mNotifMan = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        mPrefs.edit().putLong(PREF_RETRY, INITIAL_RETRY_INTERVAL).commit();
        mPrefs.edit().putBoolean(PREF_STARTED, false).commit();

        /*
         * If our process was reaped by the system for any reason we need to
         * restore our state with merely a call to onCreate. We record the last
         * "started" value and restore it here if necessary.
         */
        handleCrashedService();
    }

    // This method does any necessary clean-up need in case the server has been
    // destroyed by the system
    // and then restarted
    private void handleCrashedService()
    {
        if (wasStarted() == true) {
            log("Handling crashed service...");
            // stop the keep alives
            // stopKeepAlives();

            // Do a clean start
            start();
        }
    }

    @Override
    public void onDestroy()
    {
        log("Service destroyed (started=" + mStarted + ")");

        // Stop the services, if it has been started
        if (mStarted == true) {
            stop();
        }

        try {
            if (mLog != null)
                mLog.close();
        } catch (IOException e) {
        }
    }

    @Override
    public synchronized void onStart(Intent intent, int startId)
    {
        super.onStart(intent, startId);
        log("Service started with intent=" + intent);
        if (intent == null) {
            start();
            return;
        }
        // Do an appropriate action based on the intent.
        if (intent.getAction().equals(ACTION_STOP) == true) {
            stop();
            stopSelf();
        } else if (intent.getAction().equals(ACTION_START) == true) {
            start();
        } else if (intent.getAction().equals(ACTION_KEEPALIVE) == true) {
            keepAlive();
        } else if (intent.getAction().equals(ACTION_PUBLISH) == true) {
            publish();
        } else if (intent.getAction().equals(ACTION_SUBSCRIBE) == true) {
            subscribe();
        } else if (intent.getAction().equals(ACTION_PUSHMESSAGE) == true) {
            sendMessage();
        } else if (intent.getAction().equals(ACTION_RECONNECT) == true) {
            if (isNetworkAvailable()) {
                reconnectIfNecessary();
            }
        }
    }

    private void subscribe()
    {
        // TODO Auto-generated method stub
        try {
            mConnection.subscribeToTopic(SUBSCRIBE_TOPIC);
        } catch (MqttException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void publish()
    {

        try {
            // Send a keep alive, if there is a connection.
            if (mStarted == true && mConnection != null) {
                mConnection.sendPushMessage(1);
            }
        } catch (MqttException e) {
            log("MqttException: "
                    + (e.getMessage() != null ? e.getMessage() : "NULL"), e);

            mConnection.disconnect();
            mConnection = null;
            cancelReconnect();
        }
    }

    @Override
    public IBinder onBind(Intent intent)
    {
        return null;
    }

    // log helper function
    private void log(String message)
    {
        log(message, null);
    }

    private void log(String message, Throwable e)
    {
        if (e != null) {
            Log.e(TAG, message, e);

        } else {
            Log.i(TAG, message);
        }

        if (mLog != null) {
            try {
                mLog.println(message);
            } catch (IOException ex) {
            }
        }
    }

    // Reads whether or not the service has been started from the preferences
    private boolean wasStarted()
    {
        return mPrefs.getBoolean(PREF_STARTED, false);
    }

    // Sets whether or not the services has been started in the preferences.
    private void setStarted(boolean started)
    {
        mPrefs.edit().putBoolean(PREF_STARTED, started).commit();
        mStarted = started;
    }

    private synchronized void start()
    {
        log("Starting service...");

        // Do nothing, if the service is already running.
        if (mStarted == true) {
            Log.w(TAG, "Attempt to start connection that is already active");
            return;
        }

        // Establish an MQTT connection
        connect();

        // Register a connectivity listener
        registerReceiver(mConnectivityChanged, new IntentFilter(
                ConnectivityManager.CONNECTIVITY_ACTION));

    }

    private synchronized void stop()
    {
        // Do nothing, if the service is not running.
        if (mStarted == false) {
            Log.w(TAG, "Attempt to stop connection not active.");
            return;
        }

        // Save stopped state in the preferences
        setStarted(false);

        // Remove the connectivity receiver
        unregisterReceiver(mConnectivityChanged);
        // Any existing reconnect timers should be removed, since we explicitly
        // stopping the service.
        cancelReconnect();

        // Destroy the MQTT connection if there is one
        if (mConnection != null) {
            mConnection.disconnect();
            mConnection = null;
        }
    }

    private clsUser setUserInfo(String deviceId)
    {
        clsUser u = new clsUser();

        dbUser du = new dbUser(getApplicationContext(), dbUser.DATABASE_NAME,
                null, dbUser.DATABASE_VERSION);

        Cursor c1 = du.Getby(null, null, null, null, null, null, null, null,
                null, deviceId, null, null, null);

        u = du.setProperties(c1);
        c1.close();
        du.close();
        return u;

    }

    //
    private synchronized void connect()
    {
        log("Connecting...");

        // Create a new connection only if the device id is not NULL
        if (MQTT_CLIENT_ID == null) {
            log("Device ID not found.");
        } else {
            try {
                MQTT_CLIENT_ID = Config.id(getApplication());
                myInfo = setUserInfo(MQTT_CLIENT_ID);
                mConnection = new MQTTConnection(MQTT_HOST, "user/"
                        + MQTT_CLIENT_ID + "/#");

            } catch (MqttException e) {
                // Schedule a reconnect, if we failed to connect
                log("MqttException: "
                        + (e.getMessage() != null ? e.getMessage() : "NULL"));
                if (!isNetworkAvailable()) {
                    scheduleReconnect(mStartTime);
                }
            }
            setStarted(true);
        }
    }

    private synchronized void keepAlive()
    {
        try {
            // Send a keep alive, if there is a connection.
            if (mStarted == true && mConnection != null) {
                mConnection.sendKeepAlive();
            }
        } catch (MqttException e) {
            log("MqttException: "
                    + (e.getMessage() != null ? e.getMessage() : "NULL"), e);

            mConnection.disconnect();
            mConnection = null;
            cancelReconnect();
        }
    }

    private void sendMessage()
    {
        try {
            // Send a keep alive, if there is a connection.
            if (mStarted == true && mConnection != null) {
                mConnection.sendPushMessage(); // this does the job
            }
        } catch (MqttException e) {
            log("MqttException: "
                    + (e.getMessage() != null ? e.getMessage() : "NULL"), e);

            mConnection.disconnect();
            mConnection = null;
            cancelReconnect();
        }
    }

    // Schedule application level keep-alives using the AlarmManager
    private void startKeepAlives()
    {
        Intent i = new Intent();
        i.setClass(this, PushService.class);
        i.setAction(ACTION_KEEPALIVE);
        PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
        AlarmManager alarmMgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP,
                System.currentTimeMillis() + KEEP_ALIVE_INTERVAL,
                KEEP_ALIVE_INTERVAL, pi);
    }

    // Remove all scheduled keep alives
    private void stopKeepAlives()
    {
        Intent i = new Intent();
        i.setClass(this, PushService.class);
        i.setAction(ACTION_KEEPALIVE);
        PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
        AlarmManager alarmMgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmMgr.cancel(pi);
    }

    // We schedule a reconnect based on the starttime of the service
    public void scheduleReconnect(long startTime)
    {
        // the last keep-alive interval
        long interval = mPrefs.getLong(PREF_RETRY, INITIAL_RETRY_INTERVAL);

        // Calculate the elapsed time since the start
        long now = System.currentTimeMillis();
        long elapsed = now - startTime;

        log(String.valueOf(elapsed));

        // Set an appropriate interval based on the elapsed time since start
        if (elapsed < interval) {
            interval = Math.min(interval * 4, MAXIMUM_RETRY_INTERVAL);
        } else {
            interval = INITIAL_RETRY_INTERVAL;
        }

        log("Rescheduling connection in " + interval + "ms.");

        // Save the new internval
        mPrefs.edit().putLong(PREF_RETRY, interval).commit();

        // Schedule a reconnect using the alarm manager.
        Intent i = new Intent();
        i.setClass(this, PushService.class);
        i.setAction(ACTION_RECONNECT);
        PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
        AlarmManager alarmMgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, now + interval, pi);
    }

    // Remove the scheduled reconnect
    public void cancelReconnect()
    {
        Intent i = new Intent();
        i.setClass(this, PushService.class);
        i.setAction(ACTION_RECONNECT);
        PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
        AlarmManager alarmMgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmMgr.cancel(pi);
    }

    private synchronized void reconnectIfNecessary()
    {
        if (mStarted == true && mConnection == null) {
            log("Reconnecting...");
            connect();
        }
    }

    private class MQTTConnection
            implements MqttCallback
    {
        MqttClient mqttClient = null;
        MqttConnectOptions conOpt;
        String myDeviceId;

        // Creates a new connection given the broker address and initial topic
        public MQTTConnection(String brokerHostName, String initTopic)
                throws MqttException
        {
            // Create connection spec

        }

        private void publish(String topicName, int qos, String payload,
                boolean retained) throws MqttException
        {

        }

        /*
         * Sends a message to the message broker, requesting that it be
         * published to the specified topic.
         */
        private void publishToTopic(String topicName, String message)
                throws MqttException
        {

            if ((mqttClient == null) || (mqttClient.isConnected() == false)) {
                // quick sanity check - don't try and publish if we don't have
                // a connection
                log("No connection to public to");
            } else {
                publish(topicName, MQTT_QUALITY_OF_SERVICE, message, false);
            }

        }

        /*
         * Send a request to the message broker to be sent messages published
         * with the specified topic name. Wildcards are allowed.
         */
        private void subscribeToTopic(String topicName1) throws MqttException
        {

            if ((mqttClient == null) || (mqttClient.isConnected() == false)) {
                // quick sanity check - don't try and subscribe if we don't have
                // a connection
                log("Subscribtion failed : Connection error" + "No connection");
            } else {

                mqttClient.subscribe(topicName1, 0);
                Log.v(TAG, "Subscribe To : " + topicName1);

            }
        }

        public void sendPushMessage(int sira) throws MqttException
        {

            publishToTopic(PUBLISH_TOPIC, PushMesaj);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:18:11.327

当您调用 时`actionPush()`，它会执行以下操作：

```
 PUBLISH_TOPIC = publishTopic;
    PushMesaj = pushMsg; 
```

它将参数保存在`private static`变量中，然后调用`startService`. 如果您这样做两次，您将`private static`使用第二组参数覆盖变量。

您需要了解对的调用`startService()`不是同步的。它不会立即启动服务并`onStart()`在方法返回之前调用。该服务将启动，并且调用`onStart()`将在稍后的某个时间发生（这里的时间不受您的控制）。

您希望将这些参数放在`Intent`用于启动服务的 中，并从`Intent`in 中检索参数`onStart()`。您不能可靠地使用`static`变量来执行此操作。

**编辑：添加代码细节**

改成`actionPush()`这样：

```
static final String EXTRA_TOPIC = "EXTRA_TOPIC";
static final String EXTRA_MESSAGE = "EXTRA_MESSAGE";

public static void actionPush(Context ctx, String publishTopic,
        String pushMsg)
{
    Intent i = new Intent(ctx, PushService.class);
    i.setAction(ACTION_PUSHMESSAGE);
    i.putExtra(EXTRA_TOPIC, publishTopic);
    i.putExtra(EXTRA_MESSAGE, pushMsg);
    ctx.startService(i);
} 
```

并且`onStart()`您可以从以下内容中获取论点`Intent`：

```
String topic = intent.getStringExtra(EXTRA_TOPIC);
String message = intent.getStringExtra(EXTRA_MESSAGE); 
```

我不会为你重写整个程序。你现在必须弄清楚如何处理这些论点。也许您现在可以将它们存储在`private static`变量中，但是我对您的程序的了解还不够，无法说这是否可行。更好的解决方案是通过您定义的各种方法传递参数，直到它们到达使用它们的方法。

# python - 从模块中检索图像的最 Pythonic 方式（在 HTML 中）

> ID：15641711
> 
> 赞同：0
> 
> 时间：2013-03-26T16:01:42.873
> 
> 标签：python

我正在尝试编写一个程序，将 url 请求发送到一个站点，然后生成一个天气雷达动画。然后我抓取该页面以获取图像 url（它们存储在 Java 模块中）并将它们下载到本地文件夹。我在许多雷达站和两个雷达产品上反复执行此操作。到目前为止，我已经编写了发送请求、解析 html 并列出图像 url 的代码。我似乎无法做的是在本地重命名并保存图像。除此之外，我想让它尽可能精简——这可能不是我到目前为止所得到的。任何帮助 1) 将图像下载到本地文件夹和 2) 将我指向一种更 Pythonic 的方式会很棒。

```
# import modules
import urllib2
import re
from bs4 import BeautifulSoup

##test variables##
stationName = "KBYX"
prod = ("bref1","vel1")                           # a tupel of both ref and vel
bkgr = "black"
duration = "1"
#home_dir = "/path/to/home/directory/folderForImages"

##program##

# This program needs to do the following:
# read the folder structure from home directory to get radar names
#left off here
list_of_folders = os.listdir(home_dir)
for each_folder in list_of_folders:
    if each_folder.startswith('k'):
    print each_folder
# here each folder that starts with a "k" represents a radar station, and within each folder are two other folders bref1 and vel1, the two products. I want the program to read the folders to decide which radar to retrieve the data for... so if I decide to add radars, all I have to do is add the folders to the directory tree. 
# first request will be for prod[0] - base reflectivity
# second request will be for prod[1] - base velocity

# sample path:
# http://weather.rap.ucar.edu/radar/displayRad.php?icao=KMPX&prod=bref1&bkgr=black&duration=1

#base part of the path 
base = "http://weather.rap.ucar.edu/radar/displayRad.php?"

#additional parameters
call = base+"icao="+stationName+"&prod="+prod[0]+"&bkgr="+bkgr+"&duration="+duration

#read in the webpage
urlContent = urllib2.urlopen(call).read()
webpage=urllib2.urlopen(call)
#parse the webpage with BeautifulSoup
soup = BeautifulSoup(urlContent)
#print (soup.prettify())                            # if you want to take a look at the parsed structure

tag = soup.param.param.param.param.param.param.param    #find the tag that holds all the filenames (which are nested in the PARAM tag, and
                                                     # located in the "value" parameter for PARAM name="filename")
files_in=str(tag['value'])

files = files_in.split(',')                         # they're in a single element, so split them by comma

directory = home_dir+"/"+stationName+"/"+prod[1]+"/" 
counter = 0
for file in files:                                           # now we should THEORETICALLY be able to iterate over them to download them... here I just print them 
    print file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:13:56.797

要在本地保存图像，例如

```
import os
IMAGES_OUTDIR = '/path/to/image/output/directory'

for file_url in files:
    image_content = urllib2.urlopen(file_url).read()
    image_outfile = os.path.join(IMAGES_OUTDIR, os.path.basename(file_url))
    with open(image_outfile, 'wb') as wfh:
        wfh.write(image_content) 
```

如果要重命名它们，请使用所需的名称而不是 os.path.basename(file_url)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:12:59.483

我使用这三种方法从互联网下载：

```
from os import path, mkdir
from urllib import urlretrieve

def checkPath(destPath):
    # Add final backslash if missing
    if destPath != None and len(destPath) and destPath[-1] != '/':
        destPath += '/'

    if destPath != '' and not path.exists(destPath): 
        mkdir(destPath)
    return destPath

def saveResource(data, fileName, destPath=''):
    '''Saves data to file in binary write mode'''
    destPath = checkPath(destPath)
    with open(destPath + fileName, 'wb') as fOut:
        fOut.write(data)

def downloadResource(url, fileName=None, destPath=''):
    '''Saves the content at url in folder destPath as fileName''' 
    # Default filename
    if fileName == None:
        fileName = path.basename(url)

    destPath = checkPath(destPath)

    try:
        urlretrieve(url, destPath + fileName)
    except Exception as inst:
        print 'Error retrieving', url 
        print type(inst)     # the exception instance
        print inst.args      # arguments stored in .args
        print inst 
```

[这里](https://github.com/niroyb/WebScraping)有很多示例可以从各个站点下载图像

# mysql - 如何在表已经创建后对mysql表进行分区

> ID：15641713
> 
> 赞同：0
> 
> 时间：2013-03-26T16:01:43.407
> 
> 标签：mysql, performance, indexing, database-partitioning

我正在尝试对我的表进行分区，以便我可以缩小记录范围，这样访问数据的时间就不会像现在一样长。

我要分区的这个表有 2 个关键字段 (1) 'tigger_on' 这是一个日期时间字段，我经常使用它作为查找键。(2) 'status' 有 3 个值 1=活动，2=已完成，0=已清除。

我不确定对这个表进行分区以便更容易访问 select 语句的最佳方法是什么？

首先我有一个问题，当我做一个分区时，这是否会创建一个新表，所以我必须改变我的查询？还是类似于索引，它缩小了搜索范围，因此查找数据会更少？

第二如何改变我现有的表来添加这个分区？我应该根据日期范围或我的状态进行分区，还是可以两者兼而有之？

我以前从未做过分区，所以我不知道它是如何完成的。

请注意，此表有 500 万条记录，并且我添加了索引。所以我现在正在寻找索引之外的解决方案。

# vba - 从 Web 下载文件 (PDF)

> ID：15641717
> 
> 赞同：2
> 
> 时间：2013-03-26T16:01:49.553
> 
> 标签：vba, excel, download

我是 VBA 的新手。如何使用 UrlDownloadToFile 从[http://cetatenie.just.ro/wp-content/uploads/](http://cetatenie.just.ro/wp-content/uploads/)下载 PDF 文件？

有人可以帮忙吗？该代码正在搜索 PDF 文件 udner 超链接，并在某些条件下匹配它们，即在其名称下的当前年份。

```
Function UrlDownloadToFile(lNum As Long, sUrl As String, sPath As String, _
                           lNum1 As Long, lNum2 As Long) As Long

    UrlDownloadToFile = 0

    End Function 
```

* * *

```
 Sub DownPDF()
    ' This macro downloads the pdf file from webpage
    ' Need to download MSXML2 and MSHTML parsers and install

    Dim sUrl As String
    Dim xHttp As MSXML2.XMLHTTP
    Dim hDoc As MSHTML.HTMLDocument
    Dim hAnchor As MSHTML.HTMLAnchorElement
    Dim Ret As Long
    Dim sPath As String
    Dim i As Long

    sPath = "C:\Documents and Settings\ee28118\Desktop\"
    sUrl = "http://cetatenie.just.ro/wp-content/uploads/"

    'Get the directory listing
    Set xHttp = New MSXML2.XMLHTTP
    xHttp.Open "GET", sUrl
    xHttp.send

    'Wait for the page to load
    Do Until xHttp.readyState = 4
        DoEvents
    Loop

    'Put the page in an HTML document
    Set hDoc = New MSHTML.HTMLDocument
    hDoc.body.innerHTML = xHttp.responseText

    'Loop through the hyperlinks on the directory listing
    For i = 0 To hDoc.getElementsByTagName("a").Length - 1
        Set hAnchor = hDoc.getElementsByTagName("a").Item(i)

        'test the pathname to see if it matches your pattern
        If hAnchor.pathname Like "Ordin-*.2013.pdf" Then
            Ret = UrlDownloadToFile(0, sUrl & hAnchor.pathname, sPath, 0, 0)

            If Ret = 0 Then
                Debug.Print sUrl & hAnchor.pathname & " downloaded to " & sPath
            Else
                Debug.Print sUrl & hAnchor.pathname & " not downloaded"
            End If
        End If
    Next i

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:36:42.340

抱歉 - 我应该猜到 URLDownloadToFile 是一个 API 调用，并且可以[在 VBA 中的 SQL "%" 等效](https://stackoverflow.com/questions/15634629/sql-equivalent-in-vba/15637852#15637852)项上回答整个问题。

完全删除名为 URLDownloadToFile 的函数。将此粘贴到您的示例过程所在的模块顶部

```
Private Declare Function URLDownloadToFile Lib "urlmon" Alias "URLDownloadToFileA" _
    (ByVal pCaller As Long, _
    ByVal szURL As String, _
    ByVal szFileName As String, _
    ByVal dwReserved As Long, _
    ByVal lpfnCB As Long) As Long 
```

现在将 Sample 中的那一行更改为如下所示

```
Ret = URLDownloadToFile(0, sUrl & hAnchor.pathname, sPath & hAnchor.pathname, 0, 0) 
```

那么你应该很高兴。如果您想要一些不同的文件名，那么您必须编写一些逻辑来在每次迭代时更改它。

# python - 如何使用 nmap 使用 Python 列出子网中的地址是否处于活动状态

> ID：15641726
> 
> 赞同：0
> 
> 时间：2013-03-26T16:02:22.373
> 
> 标签：python, nmap, cidr

我知道 nmap 能够 ping 扫描并输出仅活动 IP 的列表，但我正在网上搜索以了解如何使用 CIDR 表示法列出 IP 是否处于活动状态。（即对于 1.1.1.1/32 列表，如果地址是活动的或非活动的）。我也一直在研究 netaddr 和 scapy，但我不知道我将如何使其工作。我正在尝试使用 python 脚本来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:07:33.310

看起来有一个名为[python-iptools](https://code.google.com/p/python-iptools/)的开源库，它能够从 CIDR 表示法转换为 IP 范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:18:47.570

在 Python 中执行此操作的最佳选择是使用 Scapy。您可以轻松地创建一个 ping（ICMP 回显请求）数据包，将其目标设置为 CIDR 范围，然后“发送”它，它将按顺序发送到该范围内的每个地址：

```
>>> p = IP(dst="10.0.0.0/30") / ICMP()
>>> sr(p,timeout=5)
Begin emission:
Finished to send 4 packets.
**..................
Received 20 packets, got 2 answers, remaining 2 packets
(<Results: TCP:0 UDP:0 ICMP:2 Other:0>, <Unanswered: TCP:0 UDP:0 ICMP:2 Other:0>) 
```

获取`sr`函数的输出（或您选择用于发送数据包的任何方法）留给您。获取地址的另一种方法（将数据包生成留给您）是使用[`ipaddr`](https://code.google.com/p/ipaddr-py/)库，它有一个`IPv4Network`可以在 CIDR 网络上迭代的对象。

最后，我不得不指出，Nmap 可以接受 CIDR 格式的目标规范（例如`192.168.1.0/24`, `example.com/26`,`10.0.0.0/8`等）。

# cakephp - CakePHP：从管理脚手架中删除字段的最佳方法

> ID：15641729
> 
> 赞同：4
> 
> 时间：2013-03-26T16:02:31.077
> 
> 标签：cakephp, cakephp-2.1

当我管理用户模型时，一切都很好。但是，它也有“密码”字段。这是实际密码的哈希值。

当您在管理控制台中保存用户时，它会保存散列密码，这会搞砸一切。

从 admin-scaffold 中排除字段的最简单方法是什么，并且对 admin-scaffold 令人敬畏的自动魔术的干扰最小？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:11:00.367

您需要制作自己的烘焙主题，然后可以编辑模板以删除文件。

它真的就这么简单，[http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html#modify-default-html-produced-by-baked-模板](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html#modify-default-html-produced-by-baked-templates)

只需将文件从内部复制`lib/Cake/Console/Templates/default/views`到您的项目中`app/Console/Templates/[themename]/views`，然后您就可以编辑视图模板。

这同样适用于所有其他文件，例如控制器和模型。然后，当您烘焙项目时，系统会询问您要使用哪个主题，您可以选择自己的主题。

这是我的一个项目中的一个例子。

![在此处输入图像描述](../Images/bdef49595148941d2dc4765492e29fb9.png)

唯一需要注意的是您的主题名称必须是唯一的！

# angularjs - 不同模块中的 angular.js 指令

> ID：15641730
> 
> 赞同：12
> 
> 时间：2013-03-26T16:02:32.330
> 
> 标签：angularjs

我很困惑。如果我`ng-app`每页只能使用一次，我如何使用位于不同模块、不同 .js 文件中的指令。看：

```
<script src='mainModule.js'/>
<script src='secondModule.js'/>
<body ng-app='mainModule'>
   <my-thingy/>
   <div>
      <other-thingy/>
   </div> 
</body>

mainModule.js:
   angular.module("mainModule",[]).directive("myThingy",function(){ ... })

secondModule.js:
   angular.module("secondModule",[]).directive("otherThingy",function(){ ... }) 
```

那么，我现在如何指向页面上的 secondModule，而不是从 mainModule.js 引用它

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-26T18:16:11.633

@Agzam，只需**创建第三个顶级应用程序模块，该模块将依赖于包含指令的子模块**：

```
<script src='mainModule.js'/>
<script src='secondModule.js'/>
<script>
  angular.module('app', ['mainModule', 'secondModule'])
</script>
<body ng-app='app'>
   <my-thingy/>
   <div>
      <other-thingy/>
   </div> 
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:27:54.040

有一种解决方案可以以编程方式在页面上引导多个角度模块（[文档](http://docs.angularjs.org/guide/bootstrap)）。

您必须`ng-app`从 html 中删除属性。

定义几个模块：

```
var app1 = angular.module('myApp1', []);

var app2 = angular.module('myApp2', []);

app1.controller('MainCtrl', function($scope) {
  $scope.name = 'App1';
});

app2.controller('MainCtrl', function ($scope) {
  $scope.name = 'App2';
}) 
```

然后在 index.html 中执行：

```
 <html>
  <head></head>
  <body>
    <!-- Module 1 -->
    <div id="myApp1">
      <div ng-controller="MainCtrl">
        <h1>Hello {{name}}</h1>
      </div>
    </div>
    <!-- Module 2 -->
    <div id="myApp2">
      <div ng-controller="MainCtrl">
        <h1>Hello {{name}}</h1>
      </div>
    </div>
    <!-- Bootstrap modules -->
    <script>
      angular.element(document).ready(function() {
          angular.bootstrap(document.getElementById('myApp1'), ['myApp1']);
          angular.bootstrap(document.getElementById('myApp2'), ['myApp2']);
     });
    </script>
  </body>
  </html> 
```

这是使用此解决方案的有效[plnkr 。](http://plnkr.co/edit/UowJpWYc1UDryLLlC3Be?p=preview)

# scala - scalatra 2.2.0升级遇到NoClassDefFoundError:GenTraversableLike

> ID：15641732
> 
> 赞同：3
> 
> 时间：2013-03-26T16:02:40.430
> 
> 标签：scala, sbt, noclassdeffounderror, scalatra

我正在尝试将我们项目中的 Scala/Scalatra 版本升级到以下版本：

*   斯卡拉 2.10.1

*   scalatra (和 scalatra-scalate, scalatra-scalatest) 2.2.0

使用 sbt 0.11.3

代码编译正常，但是在运行使用 scalatra 的单元测试`TemplateEngine`或启动我们的码头服务器（也使用 scalatra）时，我收到以下错误。

有人见过这个吗？非常感谢任何建议。

谢谢！

> java.lang.NoClassDefFoundError：在 org.fusesource.scalate.TemplateEngine$$anon$1.(TemplateEngine.scala:162) 在 org.fusesource.scalate.TemplateEngine.sourceDirectoriesForwarder(TemplateEngine.scala:162) 的 scala/collection/GenTraversableLike$class在 org.fusesource.scalate.TemplateEngine.(TemplateEngine.scala:114) 在 com.springer.core.template.TemplateTestHelper$class.beforeAll(TemplateTestHelper.scala:19) 在 com.springer.core.template.SupportTemplateTest.beforeAll( SupportTemplateTest.scala:10) at org.scalatest.BeforeAndAfterAll$class.beforeAll(BeforeAndAfterAll.scala:150) at com.springer.core.template.SupportTemplateTest.beforeAll(SupportTemplateTest.scala:10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:18:29.193

您的依赖项是如何在构建中定义的？他们是否使用 %% 而不是 %
从 2.2.x 及更高版本开始，我们需要 %% 之前是 %
这可能是您看到的错误的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:57:26.053

如果没有看到您的 build.sbt 或 project/build.scala 文件，很难确定，但这里有一些您可能想尝试的事情。

首先，我不知道有人在尝试 Scalatra 2.2.0 和 Scala 2.10.1，所以你在这里处于未知领域。从理论上讲，它应该可以工作，但是快速降级到 2.10.0 会排除它。

其次，在 2.1.x 和 2.2.0 之间，Scalate 模板的默认连接发生了变化。

Scalatra 2.1.0 没有在默认的 g8 项目框架中包含 Scalate 模板编译，这让很多后来想在生产中部署编译模板的人感到困惑。因此，默认的 Scalatra 2.2.0 项目框架带有一些新特性。

它连接已编译的模板，如下所示：

```
 /* wire up the precompiled templates */
  override protected def defaultTemplatePath: List[String] = List("/templates/views")

  override protected def createTemplateEngine(config: ConfigT) = {
    val engine = super.createTemplateEngine(config)
    engine.layoutStrategy = new DefaultLayoutStrategy(engine,
      TemplateEngine.templateTypes.map("/templates/layouts/default." + _): _*)
    engine.packagePrefix = "templates"
    engine
  } 
```

它还添加了一个[Scalate 模板编译器](https://github.com/backchatio/xsbt-scalate-generate)：

```
addSbtPlugin("com.mojolly.scalate" % "xsbt-scalate-generator" % "0.4.2") 
```

如果它不是与 Scala 2.10.1 相关的问题，我建议确定它是否是演示编译器的最简单方法可能是使用最新的 g8 查看（或生成和使用）新的 Scalatra 2.2.0 项目框架.

# android - accountmanager 刷新令牌（离线访问）

> ID：15641734
> 
> 赞同：6
> 
> 时间：2013-03-26T16:02:43.143
> 
> 标签：android, oauth-2.0, google-plus, google-oauth

我通过我的 android 应用程序中的帐户管理器使用谷歌登录。我可以获得发送到服务器的访问令牌，服务器可以创建/登录新用户。Accesstoken 的有效期只有 3600 秒。问题是服务器无法在此时间到期后更新用户信息。Web 应用程序需要定期检查用户信息。

如何从 android 帐户管理器获取身份验证令牌和刷新令牌，以便服务器可以使用刷新令牌定期更新数据？我不想在 android 应用程序中通过 webview 使用登录。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T05:15:25.623

现在这是可能的：[https ://developers.google.com/+/mobile/android/sign-in#server-side_access_for_your_app](https://developers.google.com/+/mobile/android/sign-in#server-side_access_for_your_app)

您请求一次性授权码，将其发送到您的服务器，然后您的服务器将其交换为访问令牌和刷新令牌。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:39:57.137

目前你不能，我敢肯定这不是你希望的答案，对此感到抱歉！如果您有网络登录，您也可以使用混合流在服务器上获取刷新令牌（请参阅[https://developers.google.com/+/web/signin/server-side-flow](https://developers.google.com/+/web/signin/server-side-flow)），但是作为 Android 或 iOS 流程的一部分，无法检索代码。

如果这是您的用例需要的东西，您能否在此处提交功能请求：[https](https://code.google.com/p/google-plus-platform/issues) ://code.google.com/p/google-plus-platform/issues - 我们正在积极查看星数以此来衡量对各种功能的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T06:00:04.763

**通过客户经理的 Google 授权流程：**

电子邮件ID可以从

```
AccountManager accountManager = AccountManager.get(getApplicationContext());
Account[] accounts = accountManager.getAccountsByType("com.google");
String emailID = accounts[0].name; // you can retrieve using google account chooser way also 
```

这些行应该在单独的令牌中运行（而不是在 UI 线程中）。

```
String scope = "oauth2:https://www.googleapis.com/auth/userinfo.profile https://gdata.youtube.com";
String accessToken = GoogleAuthUtil.getToken(mContext, emailID, scope); 
```

保存 accessToken 并用于您的 api 访问。

一小时后（即 3600 秒），我们需要刷新访问令牌。但是现在谷歌一小时后不支持访问。我们必须重新启动应用程序并使用以下行来获取访问令牌。

```
String scope = "oauth2:https://www.googleapis.com/auth/userinfo.profile https://gdata.youtube.com";
String accessToken = GoogleAuthUtil.getToken(mContext, emailID, scope); 
```

此后台线程将始终在 while 循环中在后台运行

# xml - XSD：如何使可选（子）元素变得可靠？

> ID：15641735
> 
> 赞同：0
> 
> 时间：2013-03-26T16:02:44.393
> 
> 标签：xml, xsd, minoccurs

让我们假设使用这样的 xml 文档：

```
<Item>
  <Price>10</Price>
  <Ratio>1.5</Ratio>
  <MaxPrice>18<MaxPrice>
</Item> 
```

和

```
<Item>
  <Price>12</Price>
</Item> 
```

数据的含义是：一个*项目*必须有一个*价格*和可选的迭代价格变化的*比率*，以及一个不应超过的*最高价格。*澄清一下：只有 { `Price`} 或所有三个元素 { `Price`, `Ratio`, `MaxPrice`}。**不允许其他选项。**

通常，XSD 允许使用 使元素成为可选元素`minOccurs="0"`，因此我们可以这样定义`Item`：

```
<xs:element name="Item">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Price" type="xs:integer" />
            <xs:element name="Ratio" type="xs:float" minOccurs="0" />
            <xs:element name="MaxPrice" type="xs:integer" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

但这还不够。这将使例如`Item`只有 {`Price`和`Ratio`} 通过 - 这是不正确的。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:02:44.393

`xs:sequence`和的结合`xs:choice`是这里的关键，请记住，将两者结合的方式很重要（见下文为什么）。正确的方法（至少基于我设法找出的）是像这样表达构建 XSD：

```
<xs:complexType name="itemType">
    <xs:sequence>
        <xs:element name="Price" type="xs:integer" />
        <xs:choice minOccurs="0">
            <xs:sequence>
                <xs:element name="Ratio" type="xs:float" />
                <xs:element name="MaxPrice" type="xs:integer" />
            </xs:sequence>
        </xs:choice>
    </xs:sequence>
</xs:complexType>

<xs:element name="Item" type="my:itemType" /> 
```

这样，您**可以选择**包含**固定的元素序列**，这正是我们所寻找的。

（如果你找到了你要找的东西，你可以在这里停止阅读。接下来的内容仅仅是解释似乎还有哪些其他方法以及为什么它们不起作用）

有人可能想知道（这也是我从其他地方启发的最初想法）两个固定序列的固定选择也可能起作用，并且可以作为一种广泛可重用的模式。尽管在某些情况下确实如此，但这并不是其中之一。观察：

```
<xs:complexType name="itemType">
    <xs:choice>
        <xs:sequence>
            <xs:element name="Price" type="xs:integer" />
        </xs:sequence>
        <xs:sequence>
            <xs:element name="Price" type="xs:integer" />
            <xs:element name="Ratio" type="xs:float" />
            <xs:element name="MaxPrice" type="xs:integer" />
        </xs:sequence>
    </xs:choice>
</xs:complexType>

<xs:element name="Item" type="my:itemType" /> 
```

看起来不错吧？好吧，显然不是 - 完整的项目不会通过！验证器迭代地落入第一选择，验证`Price`元素并失败，说明*以下`Ratio`元素是意外的*。

好吧，一个明显的补救措施出现了 - 让我们切换选择：

```
<xs:complexType>
    <xs:choice>
        <xs:sequence>
            <xs:element name="Price" type="xs:integer" />
            <xs:element name="Ratio" type="xs:float" />
            <xs:element name="MaxPrice" type="xs:integer" />
        </xs:sequence>
        <xs:sequence>
            <xs:element name="Price" type="xs:integer" />
        </xs:sequence>
    </xs:choice>
</xs:complexType>

<xs:element name="Item" type="my:itemType" /> 
```

这似乎工作正常，直到您决定扩展可怜的`Item`元素（也许 Item 元素的其他一些用法也可能会导致麻烦）。

我试过例如：

```
<xs:complexType name="DiscountedItem">
    <xs:complexContent>
        <xs:extension base="my:itemType">
            <xs:sequence>
                <xs:element name="Discount" type="xs:integer" />
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

如果你尝试这个，你会在`DiscountedItem`有或没有 { `Ratio`, `MaxPrice`} 子元素的情况下失败，这取决于你是否切换了选择。

尽管如此，这得出的结论是，对于这个用例，使用第一个提到的“包含**固定序列的****可选选项**”会更好。我发现这很难，所以你不必:)

# sql - 数据迁移的 SQL 查询

> ID：15641741
> 
> 赞同：0
> 
> 时间：2013-03-26T16:02:49.050
> 
> 标签：sql, oracle11g

我有一张桌子。

```
CREATE TABLE StockItem
(
    id        NUMBER(8) NOT NULL,
    book_id   NUMBER(8) NOT NULL,
    wh_id     NUMBER(8) NOT NULL,
    quantity  NUMBER(4) NOT NULL,
    price     NUMBER(8,2) NOT NULL
);

ALTER TABLE StockItem
    ADD CONSTRAINT UQ_StockItem UNIQUE (book_id, wh_id);
ALTER TABLE StockItem ADD CONSTRAINT PK_StockItem 
    PRIMARY KEY (id);
ALTER TABLE StockItem ADD CONSTRAINT FK_StockItem_Book 
    FOREIGN KEY (book_id) REFERENCES Book (id);
ALTER TABLE StockItem ADD CONSTRAINT FK_StockItem_Warehouse 
    FOREIGN KEY (wh_id) REFERENCES Warehouse (id); 
```

现在假设`wh_id = 1`已关闭，我应该将所有书籍移至`wh_id = 2`. 的书价`wh_id = 2`应该与它们的价格相同，`wh_id = 1`并且`quantity`应该正确计算（例如`book_id`，两个仓库的价格相同）。我怎样才能做到这一点？

升级版：

这是我如何获得书籍的新数量值的方法。

```
SELECT BOOK_ID, SUM(QUANTITY) 
FROM STOCKITEM
WHERE WH_ID IN (1, 2)
GROUP BY BOOK_ID; 
```

现在我应该以某种方式更新它们。

```
UPDATE STOCKITEM
SET QUANTITY = /* My summed quantity */
WHERE BOOK_ID = /* Book ids from 1 and 2 wh */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:40:43.270

```
UPDATE (SELECT SI2.quantity AS qty2, SI2.price as p2, SI1.quantity as qty1, SISI1.price as p1
        FROM   StockItem SI2 INNER JOIN StockItem SI1 
        ON     (SI2.book_id = SI1.book_id)
        WHERE  SI2.wh_id = 2 AND SI1.wh_id = 1) WH
SET WH.qty2 = WH.qty2 + WH.qty1,
    WH.p2 = WH.p1 
```

此答案基于[Oracle 上带有内部联接的 Update 语句，](https://stackoverflow.com/questions/2446764/oracle-update-statement-with-inner-join)它要求 Oracle 接受 WH 为可更新的。我无法测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:49:46.507

我认为你应该对`INNER JOIN`你的`SELECT`陈述做一个：

```
UPDATE stockItem 
INNER JOIN (SELECT book_id, SUM(quantity) AS total 
            FROM stockItem WHERE wh_id IN (1, 2)
            GROUP BY book_id) AS qntyBooks 
  ON qntyBooks.book_id = stockItem.book_id 
SET 
  stockItem.quantity = qntyBooks.total, 
  stockItem.wh_id = 2; -- all wh_id in 1, 2 will change to 2 
```

我在 MySQL 上进行了测试（我认为可能与 Oracle11g 相同）并像这样工作：

更新前：

```
---- --------- ------- ---------- --------
| 编号 | book_id | wh_id | 数量 | 价格 |
 ---- --------- ------- ---------- --------
| 1 | 1 | 1 | 3 | 10 |
| 2 | 2 | 1 | 3 | 20 |
| 3 | 3 | 1 | 3 | 30 |
| 4 | 1 | 2 | 2 | 40 |
| 5 | 2 | 2 | 2 | 50 |
 ---- --------- ------- ---------- --------

```

更新后：

```
---- --------- ------- ---------- --------
| 编号 | book_id | wh_id | 数量 | 价格 |
 ---- --------- ------- ---------- --------
| 1 | 1 | 2 | 5 | 10 |
| 2 | 2 | 2 | 5 | 20 |
| 3 | 3 | 2 | 3 | 30 |
| 4 | 1 | 2 | 5 | 40 |
| 5 | 2 | 2 | 5 | 50 |
 ---- --------- ------- ---------- --------

```

我希望这是你想要的。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:00:15.650

使用您当前的数据库设计，您不能。原因是 CONSTRAINT UQ_StockItem UNIQUE (book_id, wh_id)。

如果您在仓库 1 中有 book_id = 1，价格 = 1.00 美元，而在仓库 2 中有 book_id = 1，价格 = 1.05 美元，此约束将阻止您将图书从一个仓库移动到另一个仓库，同时保持原始价格。

必须付出一些东西。

# php - PHP显示字符串0

> ID：15641742
> 
> 赞同：-3
> 
> 时间：2013-03-26T16:02:58.040
> 
> 标签：php, mysql, arrays, loops

我需要此代码的帮助，我只需要在空的命中数据中显示一个字符串“0”，所以我想到的是第 1 天有 3 次点击，第 2 天有 0 次点击，我真的不知道如何显示0 请帮帮我。谢谢你

```
days || Hits
 1 - | | |- 3
 2 - | | |- 
 3 - | | |-
 4 - | | |- 
 5 - | | |- 5 
```

这是代码：

```
$year = date("Y");
$month = $_POST['selected_date'];
if(!isset($month) or $_POST['selected_date'] == 0)
{
  $month = date("n");
}
 $num = cal_days_in_month(CAL_GREGORIAN, $month, $year);

    for($i = 1; $i <= $num; $i++)
    { 
     echo "<p >$i - ";

     $query = mysql_query("SELECT DATE_FORMAT(`LookbookLogDate`, '%m') as 'month', DATE_FORMAT(`LookbookLogDate`, '%d') as 'day',
COUNT(`LookbookLogID`) as 'total'
FROM LookbookLog
where Lookbook_LookbookID = $LookbookID and LookbookLogDate like '%2013-03%'
GROUP BY DATE_FORMAT(`LookbookLogDate`, '%m'), DATE_FORMAT(`LookbookLogDate`, '%d')");
        while($row = mysql_fetch_array($query))
        {
               $day = $row['day'];

           $total = $row['total'];

             if($day == $i) echo $total."</p>";
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:11:50.683

我会从数据库中得到零，因为有一个通用的 SQL 函数可以实现一个很好的解决方案：

```
SELECT
DATE_FORMAT(`LookbookLogDate`, '%m') as 'month',
DATE_FORMAT(`LookbookLogDate`, '%d') as 'day',
COALESCE(COUNT(`LookbookLogID`),0) as 'total'
FROM LookbookLog
{snip} 
```

这意味着如果 COUNT() 的结果中没有值，它将改为选择 0。然后，您的 echo 语句将继续正常工作，而无需特别检查应用程序中的 NULL 情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:08:13.983

尝试使用 empty() 函数，empty() 函数将许多东西视为真值，有关这些值的列表，请查看此处[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

```
$total = (empty($row['total'])?0:$row['total']); 
```

**更新：**

您只需要执行以下操作即可获得您正在寻找的结果。

```
$total = ($row['total']?$row['total']:0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:08:19.630

如果你这样做`echo 0`，它将在屏幕上显示 0，但是如果你这样做`echo false`，它将不会显示它。现在，您遇到的问题不是显示**0**，而是显示**$total**的值。如果您的查询返回空集，那么您的`$row['total']`is `false`or `null`and 因此`echo false`or`echo null`不会显示任何内容。

检查以确保您的查询返回一些内容，并且使用查看它的类型来`$total`保存所需的值。`var_dump`

你需要类似的东西

```
 $total = ! empty($row['total']) ? $row['total'] : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:08:56.790

**编辑：**为什么不只是将字段`int`设置为并将默认值设置为`0`？

您没有显示任何有关如何构建表格的代码，但您会这样做：

```
$total = ((!$row['total'] ? 0 : $row['total']); 
```

这段代码基本上说“如果`$row['total']`为空白，则将其设为零。否则，将`$total`等于返回的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:09:50.857

您的问题是，`COUNT(...)`如果没有结果，则返回 NULL 而不是 0，这可能是 PHP 在输出时将其视为空字符串。您可以通过在 SQL 中添加[`COALESCE`表达式](https://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)来解决此问题（在我看来，这是更好的解决方案）：

```
SELECT ... COALESCE(COUNT(`LookbookLogID`), 0) ... 
```

或者在 PHP 中检查它：

```
echo $row['total'] ? $row['total'] : 0; 
```

或多行版本：

```
if($row['total'])
    echo $row['total'];
else
    echo 0; 
```

请注意，您不需要进行任何比较或调用`empty()`，因为 PHP 的类型转换[将 null、空字符串和 0 视为 false](http://php.net/manual/en/language.types.boolean.php)。

# android - 将地址名称与数字 android 分开

> ID：15641745
> 
> 赞同：0
> 
> 时间：2013-03-26T16:03:13.303
> 
> 标签：android, google-maps-android-api-2

我正在创建一个应用程序，我从地理编码器获得一个地址。所以我得到一个包含地址的字符串。我的问题是我想将名称放在 Textview 中的 Edittext 中的数字（以便客户端可以编辑数字) 和邮政编码的城市到另一个 Textview。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:14:49.550

如果您获得的地址中有特定模式，您可以使用`String.split()`方法`Java`提取`tokens`，然后可以单独使用它来填充特定信息。[请参阅此示例以了解其工作原理](http://javarevisited.blogspot.in/2011/09/string-split-example-in-java-tutorial.html)。

最好的方法是编写一个`Regular expression`并分组相应的信息，然后使用`Matcher`类将它们取回。 [这个例子解释了如何让正则表达式工作](https://stackoverflow.com/questions/9863630/regex-for-splitting-a-german-address-into-its-parts)。

# php - 在javascript中导入php变量

> ID：15641746
> 
> 赞同：1
> 
> 时间：2013-03-26T16:03:18.117
> 
> 标签：php, javascript

我有一个名为english.php 的文件，其中包含大量变量值。`$LANG`数组的所有部分。

例子：

`$LANG['value_1']="abc";`

`$LANG['value_2']="xyz";`

然后我有一百万个不同的 .php 文件使用`require_once('english.php');`

这很好，但我也有很多我正在使用的 javascript 和 jquery 插件。它们都有外部 .js 文件。如何获取`$LANG`javascript 中的值以使其在 .js 文件中可用？

我想我需要在 .js 的顶部添加代码，以便在运行其余的 javascript 代码之前以某种方式读取 .php 数据。我只是完全不知道该怎么做。

我已经看到了一些可能的想法，但我真的不想对所有内容进行重大重写。寻找一个简单的解决方案。任何人都可以帮助这个无知的新手吗？

======= 根据收到的评论添加了更多信息 =======

我现在有一个包含这段代码的 lang.php ......

```
<?php
session_cache_limiter('nocache');
session_start();
require_once ($_SESSION['language'].'.php');

$js_out = json_encode($LANG);

?>
<script>
    var LANG = <?php echo $js_out; ?>;
    alert(LANG.value_1);
</script> 
```

当我访问 lang.php 它成功访问english.php 并提醒'abc'

我的问题是当添加到不同的文件时这不起作用......

```
<script type='text/javascript' src='lang.php'></script>
<script>
    alert(LANG.value_1);
</script> 
```

======= 编辑添加解决方案 =======

感谢下面人们的评论，我摆脱`<script>`了 lang.php 文件中的 ，它起作用了。

我现在有一个包含这段代码的 lang.php ......

```
<?php
session_cache_limiter('nocache');
session_start();
require_once ($_SESSION['language'].'.php');

$js_out = json_encode($LANG);

?>

var LANG = <?php echo $js_out; ?>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:18:44.690

您可以在english.php 中包含以下代码：

```
<?php

$LANG['value_1']="abc";
$LANG['value_2']="xyz";

$js_out = json_encode($LANG);

?>
<script>
    var LANG = <?php echo $js_out; ?>;
</script> 
```

页面加载后，您的 javascript 可以看到 LANG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:13:54.000

我认为正确的做法是：

```
var foo = "<? echo $LANG['bar']; ?>"; 
```

您在 js 代码中编写的 php 代码越少，它就越好、越干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:08:54.790

删除`<script></script>`作为`text/javascript`文件链接时可能导致语法错误的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:43:25.280

您可以创建一个 PHP 文件：

```
<?php
header('Content-Type: text/javascript');
echo 'var lang = {};';
foreach ($LANG as $key => $value) {
    echo "lang['$key'] = '" . addslashes($value) . "';";
}
?> 
```

然后链接脚本，您可以使用该`lang`对象：

```
<script type='text/javascript' src='/path/to/lang.php'></script>
<script type='text/javascript'>
alert(lang.value_1);
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:10:35.653

您可以在需要在 javascript 中查看 $LANG 的文件中使用简单的脚本标记来执行此操作。

1）创建一个与 $LANG 的 javascript 表示相呼应的 php 文件 - 让我们称之为 lang.php 它应该执行类似的操作

```
echo 'var english ="' . $LANG['value_1']  "';"; 
```

2）将此文件包含在您的html中，然后您可以将变量英语等用作普通的javascript变量。

```
<script language="javascript" src="http://whatever.com/lang.php"> </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T16:13:24.717

尝试：

```
<script ...>
var mydata = <?=json_encode($LANG)?>;
</script> 
```

`json_encode`返回一个包含 JSON 表示的字符串。 [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# symfony - 如何创建查询以选择多对多元素

> ID：15641747
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:03:20.130
> 
> 标签：symfony, doctrine-orm, many-to-many

我有一个具有多对多连接的实体：

*   实体 - 主要对象
*   客户 - 通过“entity_clients”表与实体多对多

.yml 中的配置

```
manyToMany:
  clients:
    targetEntity: Client
    joinTable:
      name: entity_clients
      joinColumns:
        taskpack_id:
          referencedColumnName: id
      inverseJoinColumns:
        client_id:
          referencedColumnName: id 
```

我有**实体**元素，我想获取附加到它的**查询客户端。**我可以选择的客户：

```
 $em = $this->getDoctrine()->getManager();
    $entity = $em->getRepository('TestGroupBundle:Entity')->find($id);
    $clients = $entity->getClients(); 
```

但我需要查询如何选择这些元素。我尝试编写查询，但没有这样的：

```
$qb = $this->em->createQueryBuilder()
            ->select('c')
            ->from('TestGroupBundle:Entity', 't')
            ->join('t.clients', 'c')
            ->andWhere('t.id = :id')
            ->setParameter('id', $id); 
```

但我得到错误：

```
[Semantical Error] line 0, col -1 near 'SELECT c FROM': Error: Cannot select entity through identification variables without choosing at least one root entity alias. 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:07:28.513

我认为您需要将初始实体添加到选择中。

```
->select('t, c') 
```

# c# - 隐藏的jQuery自动完成渲染结果

> ID：15641749
> 
> 赞同：1
> 
> 时间：2013-03-26T16:03:24.490
> 
> 标签：c#, jquery, asp.net-mvc

我正在尝试在 jQuery 中使用自动完成小部件，但是当我开始输入时，它下方没有显示任何内容。我可以说它正在做某事，因为当我键入时，我可以看到页面上的滚动条随着列表变短而变化，但我看不到结果。我的代码如下。对此的任何帮助表示赞赏。

我的控制器方法如下所示：

```
public ActionResult GetUsers(string query)
    {
        var empName = from u in HomeModel.CombineNames()
                      where u.StartsWith(query)
                      select u.Distinct().ToArray();
        return Json(empName);
    } 
```

我的视图如下所示：

```
<script type="text/javascript">
$(document).ready(function() {
    $("input#autocomplete").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: '/Home/GetUsers',
                type: "POST",
                dataType: "json",

                data: { query: request.term },
                success: function(data) {
                    response($.map(data, function(item) {
                        return { label: item, value: item };
                    }));
                }
            });
        }
    });
})
</script>
<input  type="text" id = "autocomplete"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:20:25.910

您缺少一些东西，例如渲染项、缓存管理。

代码应如下所示：（假设您的操作返回一个字符串数组）

```
var cache = {},lastXhr;
            $( "input#autocomplete" ).autocomplete({
                minLength: 4,
                source: function (request, response) {
                    var term = request.term;
                    if (term in cache) {
                        response(cache[term]);
                        return;
                    }
                    var descripcion = new Array();
                    peticion = $.getJSON('/Home/GetUsers',{ query: request.term }, function (data, status, xhr) {
                        for (d in data) {
                            descripcion.push(data[d]);
                        }
                        cache[term] = descripcion;
                        if (xhr === peticion) {
                            response(descripcion);
                        }
                    });
                },
                select: function( event, ui ) {
                    $("input#autocomplete" ).val( ui.item);
                    return false;
                }
            })
            .data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item +  " </a>" )
                    .appendTo( ul );
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:07:00.717

尝试使用浏览器的检查工具检查滚动条发生变化的区域。如果元素存在，您可能需要对 CSS 进行一些更改，以便您的文本颜色不同于背景颜色（或其他与显示相关的问题）。

# generics - 具有通用数据宽度 VHDL 的多维存储器

> ID：15641751
> 
> 赞同：0
> 
> 时间：2013-03-26T16:03:47.743
> 
> 标签：generics, memory, multidimensional-array, vhdl

我想知道如何声明具有通用数据宽度的二维内存

```
package mem_pkg is
  subtype data is std_logic_vector(7 downto 0);
  type data_vector is array( natural range <> ) of data;
end;
entity mem is
port (
  clk : in std_logic;
  we : in std_logic -- write enable
  a: in unsigned(4 downto 0); -- address
  di : in data; -- data_in
  do : out data -- data_out
 );
 end mem; 
```

* * *

我希望数据宽度不是 7，而是通用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:00:28.620

这不是二维的——那是一个向量的向量，它（微妙地）不同。

二维数组是

```
type data_vector is array (natural range <>, natural range <>) of integer; 
```

但是，回到你的问题：

直到“最近”（VHDL 2008）你不能有一个无约束数组的无约束数组。但现在你可以这样做：

```
type mem is array(natural range <>) of std_logic_vector;
signal store : mem(0 to 15)(7 downto 0); 
```

“ *VHDL 2008 - just the new stuff* ” 有更多细节：

[http://books.google.co.uk/books?id=ETxLguPMEY0C&lpg=PA241&ots=q7u_Mn0SFR&dq=vhdl%202008%20just%20the%20new%20stuff%20p%20120&pg=PA120#v=snippet&q=alias%20of%20a% 20register%20file%20signal&f=false](http://books.google.co.uk/books?id=ETxLguPMEY0C&lpg=PA241&ots=q7u_Mn0SFR&dq=vhdl%202008%20just%20the%20new%20stuff%20p%20120&pg=PA120#v=snippet&q=alias%20of%20a%20register%20file%20signal&f=false)

# python - Django 是否有计划原生处理 NoSQL 数据库？

> ID：15641753
> 
> 赞同：7
> 
> 时间：2013-03-26T16:03:49.860
> 
> 标签：python, django, mongodb, nosql

我真的很喜欢姜戈。我对 Rails 做了一些改动，但我个人更喜欢 Django 的逻辑。我也更喜欢 Python 而不是 Ruby。再次，个人喜好。尽管如此，由于 Django 缺乏对 mongodb 等数据库的本机支持，我现在切换回 Rails。我看到 Django 1.5 没有计划支持 NoSQL 数据库。

我尝试安装 django-nonrel，因为它看起来很有希望，但没有成功。即使我成功了，考虑到缺乏积极的开发，我也不能相信这个 django 的分支。甚至没有帖子告诉您要安装哪个版本的依赖项，其中一些更新非常快。因此，您会遇到没有充分记录的错误，这只是一种恐惧。

Django 对我来说可能是一项长期投资，所以我想知道是否有计划更改 Django 的 ORM 以支持 NoSQL 数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:34:14.447

There has been a lot of discussion about this on the various django project channels.

There are a number of side project and forks which allow no-sql functionality on django. There is also a wiki post from the django people which discusses some alternatives [https://code.djangoproject.com/wiki/NoSqlSupport](https://code.djangoproject.com/wiki/NoSqlSupport) so you can use no sql.

So the bad news is: as of yet there is no definitive answer as to whether anything no-sql will be included in the django core. But the good news is there are a number of no-sql options which are supported and being developed.

# vtiger - vtiger 客户门户 5.4.0 - 无法连接到服务器 - 解析 SOAP 有效负载的 XML 错误：格式不正确

> ID：15641756
> 
> 赞同：2
> 
> 时间：2013-03-26T16:03:59.917
> 
> 标签：vtiger

如果我尝试登录 vtiger 客户门户，我会收到错误“无法连接到服务器”。

我已经安装了 vtiger 5.4.0 和 vtiger 客户门户 5.4.0。机器是Linux CentOS 6，php版本5.3.3。

在“vtiger_del\config.inc.php”我有：

```
$PORTAL_URL = 'http://crmdel.domain.com/assistance'; 
```

在“\vtiger_del\assistance\PortalConfig.php”我有：

```
$Server_Path = "http://crmdel.domain.com";
$Authenticate_Path = "http://crmdel.domain.com/assistance"; 
```

当我尝试使用用户和密码进入 vtiger 客户门户时，我收到“无法连接到服务器”错误。我已删除 CustomerAuthenticate.php 中的注释以查看错误；错误是：

## 错误信息

```
XML error parsing SOAP payload on line 2: Not well-formed (invalid token) 
```

## 要求

```
POST /vtigerservice.php?service=customerportal HTTP/1.0
User-Agent: NuSOAP/0.6.7 (1.1)
Host: crmdel.domain.com
Content-Type: text/xml; charset=UTF-8
SOAPAction: "http://crmdel.domain.com"
Content-Length: 684

<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:si="http://soapinterop.org/xsd"><SOAP-ENV:Body><ns1:authenticate_user xmlns:ns1="http://crmdel.domain.com"><user_name xsi:type="xsd:string">username@gmail.com</user_name><user_password xsi:type="xsd:string">hnz42vtg</user_password><version xsi:type="xsd:string">5.4.0</version></ns1:authenticate_user></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

## 回复

```
HTTP/1.1 200 OK
Date: Mon, 25 Mar 2013 10:57:57 GMT
Server: Apache
X-SOAP-Server: NuSOAP/0.7.2 (1.94)
Content-Length: 2366
Cache-Control: max-age=2592000
Expires: Wed, 24 Apr 2013 10:57:57 GMT
X-Powered-By: PleskLin
Vary: Accept-Encoding
Connection: close
Content-Type: text/xml; charset=UTF-8

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: get_class() expects parameter 1 to be object, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 3638
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:authenticate_userResponse xmlns:ns1="http://crmdel.domain.com"><return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType=":[1]"><item xsi:type="xsd:"><id xsi:type="xsd:string">125</id><user_name xsi:type="xsd:string">username@gmail.com</user_name><user_password xsi:type="xsd:string">hnz42vtg</user_password><last_login_time  xsi:nil="true"/><support_start_date xsi:type="xsd:string">2013-03-25</support_start_date><support_end_date xsi:type="xsd:string">2014-03-25</support_end_date><sessionid xsi:type="xsd:string">tlhn36ds</sessionid></item></return></ns1:authenticate_userResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

## 调试

```
soapclient2: call: authenticate_user, Array, http://crmdel.domain.com, http://crmdel.domain.com, , rpc, encoded; endpointType: 
soapclient2: serializing param array for operation authenticate_user
soapclient2: in serialize_val: username@gmail.com, user_name, , , , , encoded
soapclient2: in serialize_val: hnz42vtg, user_password, , , , , encoded
soapclient2: in serialize_val: 5.4.0, version, , , , , encoded
soapclient2: wrapping RPC request with encoded method element
soapclient2: endpoint: http://crmdel.domain.com/vtigerservice.php?service=customerportal, soapAction: http://crmdel.domain.com, namespace: http://crmdel.domain.com, style: rpc, use: encoded
soapclient2: SOAP message length: 684 contents: <?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:si="http://soapinterop.org/xsd"><SOAP-ENV:Body><ns1:authenticate_user xmlns:ns1="http://crmdel.domain.com"><user_name xsi:type="xsd:string">username@gmail.com</user_name><user_password xsi:type="xsd:string">hnz42vtg</user_password><version xsi:type="xsd:string">5.4.0</version></ns1:authenticate_user></SOAP-ENV:Body></SOAP-ENV:Envelope>
soapclient2: transporting via HTTP
soapclient2: sending message, length: 684
soapclient2: transport debug data...
soap_transport_http: scheme = http
soap_transport_http: host = crmdel.domain.com
soap_transport_http: path = /vtigerservice.php
soap_transport_http: query = service=customerportal
soap_transport_http: entered send() with data of length: 684
soap_transport_http: connect connection_timeout 0, response_timeout 30, scheme http, host crmdel.domain.com, port 80
soap_transport_http: calling fsockopen with host crmdel.domain.com
soap_transport_http: socket connected
soap_transport_http: wrote data to socket, length = 904
soap_transport_http: read line of 17 bytes: HTTP/1.1 200 OK
soap_transport_http: read line of 37 bytes: Date: Mon, 25 Mar 2013 10:57:57 GMT
soap_transport_http: read line of 16 bytes: Server: Apache
soap_transport_http: read line of 36 bytes: X-SOAP-Server: NuSOAP/0.7.2 (1.94)
soap_transport_http: read line of 22 bytes: Content-Length: 2366
soap_transport_http: read line of 32 bytes: Cache-Control: max-age=2592000
soap_transport_http: read line of 40 bytes: Expires: Wed, 24 Apr 2013 10:57:57 GMT
soap_transport_http: read line of 24 bytes: X-Powered-By: PleskLin
soap_transport_http: read line of 23 bytes: Vary: Accept-Encoding
soap_transport_http: read line of 19 bytes: Connection: close
soap_transport_http: read line of 39 bytes: Content-Type: text/xml; charset=UTF-8
soap_transport_http: read line of 2 bytes: 
soap_transport_http: found end of headers after length 307
soap_transport_http: want to read content of length 2366
soap_transport_http: read buffer of 2366 bytes
soap_transport_http: read to EOF
soap_transport_http: read body of length 2366
soap_transport_http: received a total of 2673 bytes of data from server
soap_transport_http: closed socket
soap_transport_http: end of send()

soapclient2: got response, length: 2366 type: text/xml; charset=UTF-8
soapclient2: Entering parseResponse() for data of length 2366 and type text/xml; charset=UTF-8
soapclient2: Got response encoding: UTF-8
soapclient2: Use encoding: UTF-8 when creating soap_parser
soapclient2: soap_parser: Entering soap_parser(), length=2366, encoding=UTF-8
soap_parser: XML error parsing SOAP payload on line 2: Not well-formed (invalid token)
soap_parser: XML payload:

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: strpos() expects parameter 1 to be string, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 5681

Warning: get_class() expects parameter 1 to be object, array given in /var/www/.../vtiger_del/include/nusoap/nusoap.php on line 3638
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:authenticate_userResponse xmlns:ns1="http://crmdel.domain.com"><return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType=":[1]"><item xsi:type="xsd:"><id xsi:type="xsd:string">125</id><user_name xsi:type="xsd:string">username@gmail.com</user_name><user_password xsi:type="xsd:string">hnz42vtg</user_password><last_login_time  xsi:nil="true"/><support_start_date xsi:type="xsd:string">2013-03-25</support_start_date><support_end_date xsi:type="xsd:string">2014-03-25</support_end_date><sessionid xsi:type="xsd:string">tlhn36ds</sessionid></item></return></ns1:authenticate_userResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

soapclient2: Error: XML error parsing SOAP payload on line 2: Not well-formed (invalid token) 
```

有人能说出为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T13:41:53.940

请确保您的安装满足 vtiger 预期的正确要求，SoapClient 似乎无法正确解析 wsdl，因为 PHP 输出的警告。[所以请在 vtiger wiki](https://wiki.vtiger.com/index.php/System_Requirements#PHP_Configuration)中提到的 php.ini 文件中进行更改

请查看此变量： *error_reporting = E_WARNING & ~E_NOTICE & ~E_DEPRECATED*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-23T20:40:45.660

您必须禁用错误报告。要关闭 PHP 错误报告，您可以在 config.inc.php 中使用以下代码段：

```
error_reporting(0); 
```

您还可以通过编辑 php.ini 来关闭 php 错误消息

# java - 使用 play framework 查询带回相关表，无需我询问

> ID：15641762
> 
> 赞同：2
> 
> 时间：2013-03-26T16:04:12.677
> 
> 标签：java, playframework, ebean

我在 Play Framework 中有以下模型。

```
@Entity
public class Parent extends Model {

  @Id
  public Long id;
  public String name;
  public List<Child> children = new ArrayList<Child>();

}

@Entity
public class Child extends Model {

  // Entity 2
  @Id
  public Long id
  public String name;
  @ManyToOne
  public Parent parent;

} 
```

执行以下查询为我提供了比我需要的更多信息。

```
 toJson(Child.find.all()); 
```

作为一个例子，我得到了所有的孩子以及他们的父母和父母的属性以及任何其他相邻的信息。

我已经尝试设置`fetch=FetchType.LAZY`，但它没有任何区别。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:28:46.317

Jackson 的 toJson() 方法总是在序列化 Ebean 的对象时获取所有数据，因此它可以是真实的`performance killer`，讨论过我的提议是使用一些专用对象（未存储在 DB 中）并仅用来自“原始”对象的所需数据填充它。

检查其他答案，[它描述了这种方法](https://stackoverflow.com/a/14717035/1066240)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T01:37:27.257

Ebean 已内置 JSON 支持，如果您希望精确控制对象图的各个部分以包含在 JSON 中，则可以使用它：

```
JsonContext jsonContext = Ebean.json();
JsonWriteOptions options = JsonWriteOptions.parsePath("id,name");
String json = jsonContext.toJson(list2, options); 
```

或者，您可以将 PathProperties 应用于查询和 json，例如：

```
PathProperties pathProperties = PathProperties.parse("id,name");
query.apply(pathProperties);
// fetch only id and name
List<App> list3 = query.findList();

// json output only id and name
JsonWriteOptions options2 = new JsonWriteOptions();
options2.setPathProperties(pathProperties);
String json2 = jsonContext.toJson(list3, options2); 
```

请注意，Ebean 4.3 对其 json 支持进行了重构，以使用 Jackon 核心进行解析和生成（因此它在后台使用了 Jackson）。您正在使用 Play，因此目前停留在旧版本的 Ebean 上，因此我认为您将使用 pathProperties.apply(query) 而不是使用 query.apply()。

关于@JsonIgnore ...显然不同的用例需要不同的JSON，这就是Ebean中存在此功能的原因（当您获得需要包含父级的用例时）

```
PathProperties pathProperties = PathProperties.parse("id,name,parent(id,name)");
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T23:01:19.017

我只是选择了`@JsonIgnore`注释。

# c - _InterlockedCompareExchange128 的内联程序集等效项

> ID：15641763
> 
> 赞同：2
> 
> 时间：2013-03-26T16:04:16.443
> 
> 标签：c, windows, inline-assembly

由于工作中的某些限制，我需要使用 Windows WDK 6000 版来编译我的代码。但是，我发现自己在我的代码中需要 _InterlockedCompareExchange128 编译器。直到 WDK 版本 7600 才引入此内在函数。在进行 Internet 搜索时，我需要的汇编指令似乎是“lock cmpxchg16b”。但是，我不是汇编程序员，也不知道如何从 C 代码中使用它。x64 程序可以有内联汇编吗？或者，我是否需要在我的项目中包含一个带有适当程序集的 .asm 文件？谁能给我一些指导和代码？

# jquery - 引导导航栏在没有固定宽度的情况下不会使自己发粘

> ID：15641767
> 
> 赞同：0
> 
> 时间：2013-03-26T16:04:17.857
> 
> 标签：jquery, css, twitter-bootstrap, sticky-footer, navbar

我在一些内容的中间有一个 twitter-bootstrap 导航栏，我想让它变得有粘性。

我正在使用[粘性 jquery 插件](http://stickyjs.com/)，[github 页面](https://github.com/garand/sticky)。

正如它在 github 页面本身中所说：

> 在某些情况下，您可能需要在元素“粘贴”时为其设置固定宽度

我已经对此进行了实验，并且：

*   [这是一个没有固定宽度的**非工作**](http://jsfiddle.net/Trufa/APdyT/4/)示例。
*   [这是一个具有固定宽度的**工作**](http://jsfiddle.net/Trufa/APdyT/5/)示例。

唯一的区别在于：

```
width:20px; 
```

问题是我不能让它在我的导航栏上工作，当滚动时它只会跳到更小的宽度并保持在原位。

[请参阅此处](http://jsfiddle.net/Trufa/APdyT/3/)的示例。

不，现在我对如何解决问题感到矛盾，因为我很高兴导航栏的外观，添加固定宽度会破坏 twitter-bootstrap 功能吗？

另一个问题是即使添加了固定宽度，它也不会变得粘滞。

[这是](http://jsfiddle.net/Trufa/APdyT/7/)我添加的示例：

```
#stickynavbar{
    width:200px;
} 
```

所以我的问题是：

*   如何解决这个特定问题或
*   由于它还处于项目生命的早期阶段，也许另一个插件或开箱即用的解决方案也会为我服务。

无论指向正确方向的指针如何，解决这个特定问题或通过使用完全不同的方法来避免它们都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:04:05.057

为了避免修复代码，我推荐[hcSticky](http://someweblog.com/hcsticky-jquery-floating-sticky-plugin/) jQuery 插件。

实施很简单：`$('selector').hcSticky();`

实现这个插件后，你的代码看起来像[THIS FIDDLE](http://jsfiddle.net/APdyT/16/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:02:58.093

`width: 100%`为`#stickynavbar`？

# android - 在 SQLite 查询中使用 where 条件插入或替换多行

> ID：15641770
> 
> 赞同：2
> 
> 时间：2013-03-26T16:04:30.247
> 
> 标签：android, android-sqlite, bulkinsert

我需要一个 SQLite 查询来在 SQLite 表中插入或更新。

**我的表：**

1.  **Id**（主键且不为空）
2.  **姓名**
3.  **电话号码**

![在此处输入图像描述](../Images/0c94ee0c090c03215a9c6266d3cb6c75.png)

> **预期查询**：如果 Id 不存在，则必须插入新行，如果现有行值已更改，则在插入多行时更新行。

**编辑1：**

我已经发布了我在[Insert Multiple Rows in SQLite Error (error code = 1) 中](https://stackoverflow.com/questions/15613377/insert-multiple-rows-in-sqlite-error-error-code-1)尝试过的 INSERT 查询。就像我尝试过使用“插入或替换”一样。但它是`working with Firfox SQLite Manager Not working with Android SQLite`。

我曾经`sDataBase.execSQL(query)`执行过这个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:10:35.623

尝试这个：

```
String sql = "INSERT OR REPLACE INTO MyTable (Name, PhoneNumber) VALUES (?,?)";
SQLiteStatement st = db.compileStatement(sql); 
```

并编写或更新：

```
 public void writeOrUpdateData(ArrayList<MyClass> data) {
    try {

        db.beginTransaction();

        for(int i = 0; i < data.size(); i++) {

            st.clearBindings();
            st.bindLong(1, data.get(i).getName());
            st.bindString(2, data.get(i).getPhoneNumber);
            st.executeInsert();

        }

        db.setTransactionSuccessful();

    } 
    catch(Exception e) {} 
    finally {
        db.endTransaction();
    }
} 
```

这样您就可以获得批量插入/更新，这非常有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:35:23.573

我只在 Firefox SQLite Manager 中创建了带有主键的数据库。我在 Android 的 SQLite 数据库中错过了这个。现在我有**`created database with PRIMARY KEY and NOT NULL`**。**现在工作正常**。

# java - 使用整数的 JDB 地图查找

> ID：15641772
> 
> 赞同：0
> 
> 时间：2013-03-26T16:04:35.063
> 
> 标签：java, map, jdb

我正在调试一些使用 的代码`Map<Integer,...>`，但我很难找到与各种`Integer`s 相关的值！这是一个最小的工作示例：

java代码（保存到`.\src`）：

```
import java.util.Map;
import java.util.HashMap;

public class Hello {

    public static void main(String[] args) throws java.io.IOException {
        Map<Integer,String> mymap = new HashMap<Integer,String>(2);
        mymap.put(new Integer(5), "five");
        mymap.put(6, "six");
    }
} 
```

终端 1（电源外壳）：

```
javac -g $(ls . *.java -r -name)
java -cp src -Xdebug '-Xrunjdwp:transport=dt_shmem,server=y,suspend=y,address=hey' Hello 
```

终端 2（电源外壳）：

```
jdb -attach hey 
```

...

```
VM Started: No frames on the current call stack

main[1] stop at Hello:10
Deferring breakpoint Hello:10.
It will be set after the class is loaded.
main[1] cont
> Set deferred breakpoint Hello:10

Breakpoint hit: "thread=main", Hello.main(), line=10 bci=40

main[1] dump mymap.get(5)
com.sun.jdi.InvalidTypeException: Can't assign primitive value to object
 mymap.get(5) = null
main[1] dump mymap.get(new Integer(5))
com.sun.tools.example.debug.expr.ParseException: No class named: Integer
 mymap.get(new Integer(5)) = null
main[1] 
```

我应该如何从 a 中查找值`Map<Integer,?>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:48:13.177

使用完全限定的类名：

```
dump mymap.get(new java.lang.Integer(5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:47:31.567

尽管 java 语言允许使用其中的类`java.lang`，就像导入的一样，但 jdb 不允许。

```
dump mymap.get(new java.lang.Integer(5)) 
```

应该管用。

# c++ - 移动构造函数和 char 数组参数

> ID：15641776
> 
> 赞同：1
> 
> 时间：2013-03-26T16:04:45.193
> 
> 标签：c++, visual-c++, c++11, move, move-semantics

```
struct Foo
{
    char data[100];

    template<int T>
    Foo(char (&&var)[T])
    {
        data = std::move(var);
        var = 0;
    } 
};

int main()
{ 
    char v[100];
    //..init v
    Foo f( std::move(v) );   //error C2664: 'Foo::Foo<100>(char (&&)[100])' : cannot convert parameter 1 from 'char [100]' to 'char (&&)[100]'
    return 0;
} 
```

我不明白为什么 MSVC 对这条线不满意`Foo f( std::move(v) )`？（也许这段代码毫无意义）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:30:47.697

您可以使用标头中的[std::move](http://en.cppreference.com/w/cpp/algorithm/move)算法`<algorithm>`。

```
auto it = std::move(data, data + T, var); 
```

在检查后`T`不大于 100。但是移动`char`并没有比仅仅复制有很多好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:53:59.260

线

```
Foo f( std::move(v) ); 
```

对于 GCC、Clang 和 Intel 是合法的。然而，Visual Studio 抱怨并让步

```
error C2664: 'Foo::Foo(const Foo &)' : cannot convert parameter 2 from 'char [100]' to 'char (&&)[100]'
1>          You cannot bind an lvalue to an rvalue reference 
```

这对我来说似乎是一个错误。实际上，`v`是一个左值，但`std::move`将其转换为右值引用。

由于字符数组不可移动，虽然是合法的，但我认为通过右值引用获取它们并没有多大用处。如果您真的希望代码编译，一种解决方法是`f`获取常规（左值）引用并`std::move`在调用站点删除。或者更好的是，`f`使用指向`char*`(`f`不需要是模板) 的指针。在这种情况下，调用将（即 的第一个元素）`f(v)`的地址传递给。这是由编译器隐式执行的所谓的*数组到指针的转换。*`v[0]``v``f`

 *但是，正如其他人指出的那样，这些行

```
 data = std::move(var);
    var = 0; 
```

对于所有编译器都是非法的。`data`并且`var`是数组（或对数组的引用）并且数组是不可分配的。例如，`var = 0;`每个编译器引发的错误如下：

海合会：

```
error: incompatible types in assignment of 'int' to 'char [100]' 
```

铛：

```
error: array type 'char [100]' is not assignable 
```

英特尔：

```
error: expression must be a modifiable lvalue 
```

视觉工作室：

```
error C2440: '=' : cannot convert from 'int' to 'char [100]' 
```*

# javascript - 表格中有多行时无法选择子选项

> ID：15641788
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:05:09.350
> 
> 标签：javascript, html

我有一张桌子，它有 2 列。第一列是主下拉选项列表，第二列是主下拉选项的相应子下拉列表。

单行一切正常，但是一旦我有多行，就不会从子下拉菜单中选择任何内容。

下面是重现此问题的简单 html 和 JavaScript。如果您取消注释第二行，您将看到问题。希望有人可以帮助我。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

</head>
<body>

<script language="JavaScript">
    function SubCat(cn, scn, scnm)

    {
        this.CatNum = cn;
        this.SubcatNum = scn;
        this.SubcatName = scnm;
    }
    var subcatInfo = new Array(

    new SubCat('26', '1', 'MainOpt1_SubOpt1'),

    new SubCat('26', '2', 'MainOpt1_SubOpt2'),

    new SubCat('27', '3', 'MainOpt2_SubOpt1'),

    new SubCat('27', '4', 'MainOpt2_SubOpt2')

    );
    function doCategory(sel) {

        var ix;
        var subcat = sel.form.repairSubcategoryCode;

        // regardless of what else we do, we wipe out all the 
        // options in the subcategory dropdown by
        // going backwards, removing selected options 
        for (ix = subcat.options.length - 1; ix >= 0; --ix) {
            subcat.options[ix] = null;
        }
        // now, did the user select a category? 
        if (sel.selectedIndex == 0) {
            // no...so give user the "no subcats" msg 
            subcat.options[0] = new Option("-- no subcategories yet --", "0");
            return; // and we are done 
        }
        // yes, so get the appropriate subcategories: 
        subcat.options[0] = new Option("-- choose a subcategory below --", "0");

        // what category number was selected?
        var catnum = sel.options[sel.selectedIndex].value;
        var cursc = 0;
        for (ix = 0; ix < subcatInfo.length; ++ix) {
            // looking for all subcat's with the requested category number
            var subcatObj = subcatInfo[ix];
            if (subcatObj.CatNum == catnum) {
                subcat.options[++cursc] = new Option(subcatObj.SubcatName,
                        subcatObj.SubcatNum);
            }
        }
    }
</script language="JavaScript">
<form name="priceOpinionForm" method="post" action="/brokerPriceOpinion.do">
    <table  id="repirImprTab">
        <tr>
            <td>
                <select name="repairTypeCode" onchange="doCategory(this)">
                    <option value="-1">Select Repair Type</option>
                    <option value="26">MainOpt1</option>
                    <option value="27">MainOpt2</option>
                </select>
            </td>
            <td>
                <select name="repairSubcategoryCode" >
                    <OPTION Value="-1">-- now subcategories yet --</option>
                </select>
            </td>
        </tr>
        <!-- 
        <tr>
            <td>
                <select name="repairTypeCode" onchange="doCategory(this)">
                    <option value="-1">Select Repair Type</option>
                    <option value="25">Septic Maintenance</option>
                    <option value="26">Bathroom Items</option>
                    <option value="27">Cabinets &amp; Shelves</option>
                    <option value="28">Counter Tops</option>
                </select>
            </td>
            <td>
                <select name="repairSubcategoryCode">
                    <OPTION Value="-1">-- now subcategories yet --</option>
                </select>
            </td>
        </tr>
         -->
    </table>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:19:22.297

正如 Kurrija 提到的，您不能将两个元素命名相同。

这是一个[jsfiddle](http://jsfiddle.net/D2S3u/)，为该`doCategory`方法添加了一个变量，该变量允许代码决定填充哪个子类别下拉列表。我也将`name`属性更改`id`为以提供更好的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:10:10.837

HTML 表单中的每个命名字段一次只能有一个值。在您的情况下，将有多个名为“repairTypeCode”和“repairSubcategoryCode”的选择，如果其中任何一个被更改，这将导致所有具有相同名称的字段被设置为相同的值。

修复：将数字索引附加到名称（例如“repairTypeCode1”、“repairTypeCode2”、...）或将它们转换为数组（例如“repairTypeCode[]”）。

# c# - 为什么 ReSharper 建议动态类型可能出现 NullReferenceException？

> ID：15641790
> 
> 赞同：8
> 
> 时间：2013-03-26T16:05:10.270
> 
> 标签：c#, dynamic, resharper, nullreferenceexception

如果我编写以下代码，ReSharper 会警告我可能的`NullReferenceException`. 但是，我`null`在上面的语句中明确检查。有什么`dynamic`我不知道的（是否假设它可能得到 a`IEnumerable`或类似的支持）？或者这是 ReSharper 的一个小故障？或者是其他东西？

```
dynamic user = connection.Query("SELECT ...").FirstOrDefault(); // Dapper Extension
if (user == null)
    return null;

return new User(user.username);
//              ^^^^
// (local variable) dynamic user
//
// Possible 'System.NullReferenceException' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T19:25:07.260

问题在于这`user == null`是一个动态调用；R# 不能假定`user`对象的运行时类型将具有正常工作的相等运算符。它很容易拥有：

```
public static bool operator ==(Foo x, Foo y) { return false; }
public static bool operator !=(Foo x, Foo y) { return true; } 
```

在这种情况下，即使变量是引用，`user == null`也会始终返回。`false``user``null`

尝试将代码更改为：

```
if (ReferenceEquals(user, null)) return null;
return new User(user.username); 
```

*注意：仅当您将“假设实体值可以为空”选项设置为“当实体没有显式 NotNull 属性时”时才会出现问题。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T17:32:55.873

尝试这个 ：

```
dynamic user = connection.Query("SELECT ...").FirstOrDefault(); // Dapper Extension
if (user != null)
    return new User(user.username);

return null; 
```

# c# - 从 C# 中的字符串中提取基本 URl？

> ID：15641797
> 
> 赞同：36
> 
> 时间：2013-03-26T16:05:19.723
> 
> 标签：c#, .net, string

我目前正在使用 .NET 1.1 框架开发一个项目，但我被困在了这一点上。我有一个像“ [http://www.example.com/mypage/default.aspx](http://www.example.com/mypage/default.aspx) ”这样的字符串，或者它可能是“ [http://www.example.edu/mypage/default.aspx](http://www.example.edu/mypage/default.aspx) ”或“ [http://www .example.eu/mypage/default.aspx](http://www.example.eu/mypage/default.aspx) ”。如何从这种字符串中提取基本 URl。

谢谢

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-26T16:07:40.780

您可以使用[URI](https://docs.microsoft.com/en-gb/dotnet/api/system.uri)类来获取主机名。

```
var uri = new Uri("http://www.example.com/mypage/default.aspx");    
var host = uri.Host; 
```

**编辑**您可以使用[uri.Scheme](https://docs.microsoft.com/en-gb/dotnet/api/system.uri.scheme)和[uri.Port](https://docs.microsoft.com/en-gb/dotnet/api/system.uri.port)来获取 .Scheme 例如 (http, ftp) 和 .Port 来获取端口号，例如 (8080)

```
string host = uri.Host;
string scheme = uri.Scheme;
int port = uri.Port; 
```

您可以使用[Uri.GetLeftPart](https://docs.microsoft.com/en-gb/dotnet/api/system.uri.getleftpart)获取基本 URL。

> [GetLeftPart](https://docs.microsoft.com/en-gb/dotnet/api/system.uri.getleftpart)方法返回一个字符串，该字符串包含 URI 字符串的最左边部分，以 part 指定的部分结束。

```
var uri = new Uri("http://www.example.com/mypage/default.aspx");    
var baseUri = uri.GetLeftPart(System.UriPartial.Authority); 
```

以下示例显示了一个 URI 以及使用 Scheme、Authority、Path 或 Query、[MSDN](https://docs.microsoft.com/en-gb/dotnet/api/system.uri.getleftpart)调用 GetLeftPart 的结果。 [![在此处输入图像描述](../Images/c3fae7afb95442fae2f61b5d66ae3805.png)](https://i.stack.imgur.com/PTYP6.jpg)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-09-09T22:50:13.263

**简答**

```
myUri.GetLeftPart(System.UriPartial.Authority) 
```

**长答案**
假设“基本 URI”的意思类似于`http://www.example.com`，您可以像这样获得基本 uri：

```
var myUri= new Uri("http://www.example.com/mypage/default.aspx");    
var baseUri = myUri.GetLeftPart(System.UriPartial.Authority) 
```

这给出了：`http://www.example.com`

注意：`uri.Host`给出：（`www.example.com`不包括端口或方案）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T16:08:39.010

```
var builder = new UriBuilder("http://www.example.com/mypage/default.aspx");
builder.Path = String.Empty;
var baseUri = builder.Uri;
var baseUrl = baseUri.ToString();
// http://www.example.com/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-23T14:29:33.937

只需为 Uri 类创建一个扩展。在我看来，从一开始就应该存在的东西。它会让你的生活更轻松。

```
public static class UriExtensions
 {                   
    public static Uri AttachParameters(this Uri uri, 
                                       NameValueCollection parameters)
    {
        var stringBuilder = new StringBuilder();
        string str = "?";
        for (int index = 0; index < parameters.Count; ++index)
        {
            stringBuilder.Append(str + 
                System.Net.WebUtility.UrlEncode(parameters.AllKeys[index]) +
                 "=" + System.Net.WebUtility.UrlEncode(parameters[index]));
            str = "&";
        }
        return new Uri(uri + stringBuilder.ToString());
    }

    public static string GetBaseUrl(this Uri uri) {
        string baseUrl = uri.Scheme + "://" + uri.Host;
        return baseUrl;
    }

    public static string GetBaseUrl_Path(this Uri uri) {
        string baseUrl = uri.Scheme + "://" + uri.Host + uri.AbsolutePath;
        return baseUrl;
    }
 } 
```

用法：

```
//url -  https://example.com/api/rest/example?firstname=Linus&lastname=Trovalds
Uri myUri = new Uri("https://example.com/api/rest/example").AttachParameters(
            new NameValueCollection
            {
                {"firstname","Linus"},
                {"lastname","Trovalds"}
            }
          );
// https://example.com
string baseUrl = myUri.GetBaseUrl();
// https://example.com/api/rest/example
string baseUrlandPath = myUri.GetBaseUrl_Path(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:20:54.653

`Host Name`如果您想将所有 3 个`.com`都列在一个列表`AbsolutePath`中，您也可以从这里开始

```
var uriList = new List<string>()
            {
                "http://www.mysite.com/mypage/default.aspx",
                "http://www.mysite.edu/mypage/default.aspx",
                "http://www.mysite.eu/mypage/default.aspx"
            };
        var holdList = new List<string>();
        foreach (var uriName in uriList)
        {
            Uri uri = new Uri(uriName);
            holdList.Add(uri.Host);
        } 
```

# .net - 通过代码更改 PrintDialog 中的打印机名称

> ID：15641800
> 
> 赞同：2
> 
> 时间：2013-03-26T16:05:28.970
> 
> 标签：.net, printing, printdialog

我正在尝试通过代码更改我的 PrintDialog 的选定打印机。我正在创建一个需要打印的图像，但图像的大小决定了应该使用哪台打印机。我有我想使用的打印机的名称，但我不知道在哪里更改该值。任何帮助都可以在 VB.NET 或 C# 中。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:18:21.547

您应该寻找[**PrinterName 属性**](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.printername.aspx)。此属性位于[**PrinterSettings 类**](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.aspx)中。PrinterSettings 类也是[**PrintDialog 的一个属性**](http://msdn.microsoft.com/en-us/library/system.windows.forms.printdialog.printersettings.aspx)。这样您就可以访问 PrinterSettings 并更改 PrinterName 属性。

```
//Example for GETTING the printername
var pd = new PrintDialog();
var settings = pd.PrinterSettings;
var name = settings.PrinterName

//Example for SETTING the printername
var pd = new PrintDialog();
pd.PrinterSettings.PrinterName = "YOUR_PRINTER_NAME"; 
```

希望这可以帮助。

# java - java.lang.IndexOutOfBoundsException：索引 1 无效，大小为 1

> ID：15641805
> 
> 赞同：2
> 
> 时间：2013-03-26T16:05:45.873
> 
> 标签：java, android, arraylist

我必须开发一个 Android 应用程序。在这里我收到以下错误：

```
03-26 21:29:00.394: E/AndroidRuntime(684): FATAL EXCEPTION: main
03-26 21:29:00.394: E/AndroidRuntime(684): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
03-26 21:29:00.394: E/AndroidRuntime(684):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
03-26 21:29:00.394: E/AndroidRuntime(684):  at java.util.ArrayList.get(ArrayList.java:311)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.xmlparsing.MainActivity.loadXMLData(MainActivity.java:303)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.xmlparsing.MainActivity.access$2(MainActivity.java:118)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.xmlparsing.MainActivity$GetXmlFiles.onPostExecute(MainActivity.java:369)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.xmlparsing.MainActivity$GetXmlFiles.onPostExecute(MainActivity.java:1)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.os.AsyncTask.finish(AsyncTask.java:417)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.os.Looper.loop(Looper.java:123)
03-26 21:29:00.394: E/AndroidRuntime(684):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-26 21:29:00.394: E/AndroidRuntime(684):  at java.lang.reflect.Method.invokeNative(Native Method)
03-26 21:29:00.394: E/AndroidRuntime(684):  at java.lang.reflect.Method.invoke(Method.java:521)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-26 21:29:00.394: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-26 21:29:00.394: E/AndroidRuntime(684):  at dalvik.system.NativeStart.main(Native Method) 
```

在这里，我使用了以下代码：

```
String[] stockArrVideo = new String[Appscontent.Sub_arraylistvideo.size()];
stockArrVideo = Appscontent.Sub_arraylistvideo.toArray(stockArrVideo);
for (String s : stockArrVideo) {
    if (s.startsWith(number)) {
        String _Substring;
        _Substring = s.substring(1);
        if(_Substring.equals("")||_Substring == null) {
            _Substring = "No Records";
        }
        Appscontent.Sub_arraylistvideosub.add(_Substring);
    }
    h++;
} 
```

如果数据为空，则意味着我必须显示“无记录”消息。否则显示正确的数据。

```
TextView mVideo = new TextView(this); 
System.out.println(Appscontent.Sub_arraylistvideosub.get(j));
mVideo.setText(Appscontent.Sub_arraylistvideosub.get(j));
mVideo.setLayoutParams(textLayoutParams);
mVideo.setBackgroundColor(Color.BLACK); 
```

在这里，我编写了用于检查空数据的代码。

是什么导致了这个异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T16:09:49.897

```
IndexOutOfBoundsException: Invalid index 1, size is 1 
```

> 我该如何解决这些错误？？？

您需要检查数组的大小，问题似乎发生在：`Appscontent.Sub_arraylistvideosub.get(j)` 只需在尝试使用之前检查您的索引是否有效，例如：

```
if(j < Appscontent.Sub_arraylistvideosub.length)
    System.out.println(Appscontent.Sub_arraylistvideosub.get(j)); 
```

# c++ - 整数提升、有符号/无符号和 printf

> ID：15641811
> 
> 赞同：6
> 
> 时间：2013-03-26T16:06:17.610
> 
> 标签：c++, c, language-lawyer, integer-promotion

我正在查看[C++ Integer Overflow 和 Promotion](https://stackoverflow.com/questions/12889237/c-integer-overflow-and-promotion)，试图复制它，最后得到了这个：

```
#include <iostream>
#include <stdio.h>

using namespace std;

int main() {
    int i = -15;
    unsigned int j = 10; 
    cout << i+j << endl; // 4294967291
    printf("%d\n", i+j); // -5 (!)
    printf("%u\n", i+j); // 4294967291

    return 0;
} 
```

在`cout`阅读了上面提到的帖子后，我的预期是这样的，第二个也是如此`printf`：两者都打印 4294967291。`printf`但是，第一个打印 -5。现在，我的猜测是，这`printf`只是将 4294967291 的无符号值解释为有符号值，以 -5 结尾（这适合看到 4294967291 的 2 补码是 11...11011），但我不是 100 % 确信我没有忽略任何事情。那么，我是对的还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:07:36.030

是的，你没看错。这就是为什么`printf()`通常是不安全的：它严格根据格式字符串解释其参数，忽略它们的实际类型。

# jquery - 图像映射和 mouseleave 事件

> ID：15641814
> 
> 赞同：0
> 
> 时间：2013-03-26T16:06:30.800
> 
> 标签：jquery, onmouseover, imagemap

我有一张使用**地图的****图像**，其中定义了一些**区域**。

 ****我需要在鼠标离开图像时触发一个事件，所以我使用 jQuery (1.9.1) 将一个“ **mouseleave ”事件附加到图像上。**

不幸的是，当我将鼠标悬停在一个映射区域时，事件就会触发。

我只需要在鼠标离开图像时触发事件，因此如果鼠标悬停在一个区域，则不会发生任何事情。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T12:29:50.137

我今天正在处理同样的问题。问题是图像映射的区域是在绑定 mouseleave 事件的元素之外定义的，就像这样：

```
<div class="elementWithMouseleaveEvent">
   <img src="something" usemap="map" />
</div>
<map id="#map">
    // areas here
</map> 
```

在 div 中移动地图元素解决了这个问题：

```
<div class="elementWithMouseleaveEvent">
   <img src="something" usemap="map" />
   <map id="#map">
       // areas here
   </map>
</div> 
```****

# ios - 如何发布对使用 CoreData 和 Xcode 4.6.1 的 iOS 应用程序的更新？

> ID：15641817
> 
> 赞同：0
> 
> 时间：2013-03-26T16:06:44.220
> 
> 标签：ios, xcode, core-data

我发布了一个 iOS 应用程序，它使用基本的 CoreData 模型来跟踪其数据。该数据模型从未改变。我已经使用 Xcode 4.6.1 创建了应用程序的企业版本。当我在设备上安装该版本而不是我以前的版本并尝试运行它时，我受到以下欢迎：

```
...
NSStoreType = SQLite;
        NSStoreUUID = "7DFC22FD-805E-4AED-B5F8-B1AE1FC829A8";
        "_NSAutoVacuumLevel" = 2;
    }, reason=Can't find model for source store}, {
        URL = "file://localhost/var/mobile/Applications/D8B9F67D-9B00-439D-AC06-2582EBBE2441/Documents/YourMother.sqlite";
        metadata =     {
            NSPersistenceFrameworkVersion = 419;
            NSStoreModelVersionHashes =         {
...

Mar 26 16:52:02 iPad backboardd[63] <Warning>: Application 'UIKitApplication:com.your.mother[0xdbef]' exited abnormally with exit status 255 
```

如何创建更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:06:44.220

使用 Xcode 4.5 创建版本。

# android - android sqlite更新错误

> ID：15641819
> 
> 赞同：1
> 
> 时间：2013-03-26T16:06:45.163
> 
> 标签：android

我正在编写一个应用程序，它将访问一个 sqlite 数据库进行读写。我使用 sqlite 数据库浏览器创建了数据库并将其推送到 /data/local/tmp。它也将被其他应用程序使用，并且必须存在于系统上，即使我的应用程序不存在我的应用程序可以读取给定完整路径的数据库，但我无法更新数据库。我的清单是：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.intralot.settings"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/my_title"
        android:theme="@android:style/Theme.Light" >
        <activity
            android:name="....."
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

LogCat 中的消息是：

```
I/SqliteDatabaseCpp( 4002): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/local/tmp/settings.db
I/SqliteDatabaseCpp( 4002): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/data/local/tmp/settings.db-journal, db=/data/local/tmp/settings.db
I/SqliteDatabaseCpp( 4002): sqlite returned: error code = 14, msg = statement aborts at 20: [UPDATE settings SET ip=? WHERE _id=1] , db=/data/local/tmp/settings.db 
```

触发这个的代码是：

```
try{
    result = db.update(SETTINGS_TABLE, newValues, "_id="+index, null);
}catch(Exception e){
    e.printStackTrace();
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:31:59.417

默认情况下，数据库目录是

```
/data/data/{packagename.app.name}/databases 
```

您将无法访问`/data`. 您可以通过 root 访问并执行 shell 代码。我不认为这是最佳的。

# java - 带有 JUnit 或 TestNG 的 Selenium 2 webdriver 用于 PageObject 设计模式

> ID：15641821
> 
> 赞同：1
> 
> 时间：2013-03-26T16:06:56.323
> 
> 标签：java, junit, selenium-webdriver, testng, pageobjects

我们正在尝试在使用 Selenium 2 Webdriver 的测试框架中选择 Junit 和 TestNG。我们决定为此使用页面对象设计模式。

我相信 TestNG 通过使用 @BeforeSuite 注释将适合这种方法。为此描述了一个简单的例子。

1.  访问谷歌页面。
2.  搜索 gmail.com。转到 Gmail.com
3.  测试/断言“创建帐户”文本。
4.  使用 usn 和 pswd 登录。
5.  测试/断言主页上的“收件箱”

页面对象：谷歌页面。登录页面首页

例如：实际的测试类。

```
public class firstTest {  

    private final WebDriver driver = new FirefoxDriver();  
    private final  String url = "www.google.com"
    String keyword = "gmail.com";
    GooglePage gPage ;
    LoginPage lPage ;

  @BeforeSuite(alwaysRun = true)
    public void testWorkFlow{
    driver.get(url);
    gPage = new GooglePage(driver);
    lPage= gPage.searchKeyword(keyword);
 }

    @Test  
    public void testLoginPageMsg() throws Exception {  
        assertTrue(lPage.contqains("A Google approach to email."));
     }  

    @Test  
    public void testHomePage() throws Exception {  
       HomePage hPage = loginPage.loginWith("abcdef", "ghijklmno");  
       String h1Msg = hPage.gteMsg();
       assertEquals("inbox", h1Msgx);
    }  

} 
```

GooglePage - 页面对象

```
public class GooglePage {  

    private final WebDriver driver;  
      public GooglePage(WebDriver driver) {  
        super();  
        this.driver = driver;  
     }  

     public LoginPage searchKeyword(String keyword){
     driver.findElement(By.id("gbqfq")).sendKeys(keyword); 
     driver.findElement(By.id("submit")).submit(); 
     driver.findElement(By.linkText(keyword));

     return new LoginPage(driver);
     }
  } 
```

LoginPage - 页面对象。

```
public class LoginPage {  
      private final WebDriver driver;

      public LoginPage(WebDriver driver) {  
        super();  
        this.driver = driver;  
     }  

    public HomePage loginWith(String username, String password) {  
          executeLogin(username, password);  
        return new HomePage(driver);  
    }  

    private void executeLogin(String username, String password) {  
          driver.findElement(By.id("username")).sendKeys(username);  
        driver.findElement(By.id("password")).sendKeys(password);  
        driver.findElement(By.id("submit")).submit();  
    }  
  } 
```

主页 - PageObject

```
public class HomePage {  

    private final WebDriver driver;  

     public HomePage(WebDriver driver) {  
        super();  
        this.driver = driver;  
       }  

    public String getMsg() throws Exception{  
          return driver.findElement(By.id("h1")).getText();  
      }  
  } 
```

我的问题是：

*   我怎样才能拥有与 JUnit 类似的东西，如 >
*   一系列用户交互
*   测试/断言某事。
*   再次导航到下一页。
*   测试/断言某事。

我知道最新的 JUnit 版本 4.11 支持测试执行顺序。

“一系列工作流/交互（在实际测试之前）”方法的步骤也可以用@BeforeClass 进行注释。

但是这个注释强制我的方法是静态的，然后我在 @BeforeClass 方法中的所有页面对象都需要声明为静态的。

（上面的示例只是我想描述我的案例的一个示例。实际上，在断言它们之前，我有相当多的页面对象及其方法在此方法中被调用。）

希望我已经说明了我的情况。对此的任何输入或反馈将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:14:18.903

> *   我怎样才能在 > 系列用户交互中与 JUnit 有类似的东西
> *   测试/断言某事。
> *   再次导航到下一页

1) 澄清你的问题 - 用户交互由 selenium 完成，而不是 testNG
2)
- [http://junit.sourceforge.net/javadoc/org/junit/Assert.html](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)
-[断言与 JUnit 断言](https://stackoverflow.com/questions/2966347/assert-vs-junit-assertions)
3) 导航也由硒，既不是 testNG 也不是 Junit

# google-maps-api-3 - 设置为可拖动的标记无法拖动

> ID：15641823
> 
> 赞同：3
> 
> 时间：2013-03-26T16:07:05.120
> 
> 标签：google-maps-api-3

这个让我很困惑，我希望第二双眼睛能够指出问题所在。我意识到我的抽象库增加了很多额外的复杂性，但我在想其他人可能在他们的实现中看到了类似的东西。我还尝试将其归结为尽可能简单和有针对性的案例。

问题是无法拖动通过 Google Maps API 创建并添加到地图并设置为可拖动的标记。这曾经工作得很好，但是我在图书馆某处所做的改变破坏了这个功能。要重现，请转到[http://www.nps.gov/npmap/support/library/examples/map-defaults.html?api=google](http://www.nps.gov/npmap/support/library/examples/map-defaults.html?api=google)，然后将以下代码粘贴到浏览器 Web 开发控制台中：

```
var marker = new google.maps.Marker({
  position: NPMap.Map.Google.map.getCenter(),
  draggable: true,
  map: NPMap.Map.Google.map
}); 
```

标记应该是可拖动的，但事实并非如此。

几点注意事项：

*   标记仍然是可点击的，并且似乎所有标记事件（鼠标悬停等）都正常工作
*   添加到地图中的线和多边形作为可编辑工作正常
*   我玩过`z-index`地图 div 和其他一些元素，但这似乎并没有导致问题
*   我正在加载当前版本的 Google Maps API v3.11。我已经用冻结版本 3.10 和实验版本 v3.12 进行了测试，但无论加载哪个版本，问题仍然存在。

任何帮助是极大的赞赏！

**更新**：奇怪。添加的标记`draggable: true`似乎不可点击。但是，如果在没有指定的情况下添加标记`draggable: true`，它似乎是可点击的。似乎这可能是相关的。

**更新 2**：我第一次更新的后续行动：事件**不适**`draggable: true`用于使用创建并添加到地图的标记。您可以在创建标记后运行以下代码进行测试：

```
google.maps.event.addListener(marker, 'click', function(e) {
  console.log(e);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:27:58.600

弄清楚了。我正在做这样的事情来破解一些默认的谷歌地图控件：

```
var els = document.getElementsByClassName('gmnoprint');

for (var i = 0; i < els.length; i++) {
  els[i].style.display = 'none';
} 
```

过去这并没有影响可拖动标记，但 Google 一定是在 Maps API 中进行了更改，并开始将`gmnoprint`类添加到可拖动标记中。哦，好吧，这就是我在文档化 API 之外得到的结果。

# ajax - 将 Ajax 内容加载到隐藏选项卡 - 而不是当前选项卡

> ID：15641824
> 
> 赞同：-3
> 
> 时间：2013-03-26T16:07:06.980
> 
> 标签：ajax, jquery, tabs

我有一个使用 jQuery 选项卡脚本的仪表板 UI。每个选项卡通过单独的 Ajax 请求加载其内容。

这是我遇到的问题：

1.  用户将打开多个选项卡，一个接一个
2.  创建每个选项卡并为每个选项卡发出 Ajax 请求
3.  要创建的最后一个选项卡当前处于打开状态，一旦请求完成，每个选项卡的内容都会显示在此选项卡上
4.  一旦用户单击任何选项卡，内容就会被设置为应有的状态。

基本上，如果用户在最近的选项卡的 Ajax 请求完成之前打开了一个新选项卡，则两个 Ajax 请求的内容都会显示在当前打开的选项卡上，直到用户单击任何选项卡，然后所有内容都会按原样显示。

我尝试设置 Ajax 调用来`async: false`解决问题，因为它强制 ajax 请求在允许用户打开另一个选项卡之前完成并加载到当前选项卡上，但是用户反馈是负面的，因为用户认为仪表板冻结（它有）。

我还设置了一个超时函数来加载带有加载 .gif 的选项卡，然后发出`async: false`Ajax 请求。用户反馈是相同的，即使使用超时功能，加载 gif 一旦发出 Ajax 请求就会停止它的动画。

Ajax 请求如下所示：

```
$.ajax ({
        url: report,
        cache: false,
        success: function(html) {
            $("#loading").hide();
            $("#tabcontent").append('<div id="c'+count+'" class="tabContentContainer">'+html+'</div>');
        },
        error: function(x, status, error) {
            $.ajax ({
                url: 'admin/error_notification.php',
                type: "POST",
                data:{
                    error: error
                }
            });
        },
        async:true
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:06:42.690

我建议有一个与每个选项卡配对的*单独*的tabcontent div（不仅仅是一个#tabcontent div），并在切换选项卡时显示/隐藏它们。然后，如果先前的 ajax 调用稍后返回，并填充现在隐藏的 tabcontent div，则不会造成任何伤害。

```
function loadTab(tabName) {
    // Hide all tab content panes, then just show the one we want
    $(".tab-pane").hide();
    $("#tab-" + tabName).show();
    $.ajax ({
        ...
        success: function(html) {
            $("#loading").hide();
            $("#tab-" + tabName).append('<div id="c'+count+'" class="tabContentContainer">'+html+'</div>');
    <snip> 
```

创建您的内容窗格，例如：

```
<div class="tab-pane" id="tab-firsttab"></div> 
```

触发链接将类似于以下内容：

```
<a href="#" onClick="loadTab('firsttab')">First Tab</a> 
```

我相信它会让用户快速单击多个选项卡，触发多个 ajax 调用，因为每个 ajax 调用只会将内容加载到它自己的内容窗格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:54:14.670

我发现如果我在 Ajax 请求之前创建 tabContentContainer div，那么选项卡选择器有一个对象，然后在另一个选项卡打开时隐藏。然后，一旦加载了 Ajax 响应，它的可见性就已经设置好了。见下文：

```
$("#tabcontent").append('<div id="c'+count+'" class="tabContentContainer"></div>');

$.ajax ({
        url: report,
        cache: false,
        success: function(html) {
            $("#loading").hide();
            $("#c"+count+"").html(''+html+'');
        },
        error: function(x, status, error) {
            $("#tabcontent").append('<div id="c'+count+'" class="tabContentContainer"><div class="alert alert-error" style="margin-top:70px;"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Don\'t worry… It\'s not you, it\'s us.</strong> We were unable to connect to your data and deliver results. We are looking into this now.</div></div>');
            $.ajax ({
                url: 'admin/error_notification.php',
                type: "POST",
                data:{
                    error: error
                }
            });
        },
        async:true
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:51:35.850

以某种方式跟踪最后一个请求并在创建另一个请求时中止它：

```
var jqxhr = {abort: function () {}};
/* various other code */
function loadTabOrWhatever() {
    jqxhr.abort();
    jqxhr = $.ajax({
       /* ajax call in your question */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T13:19:48.410

我有这样的设置。您调用下面的函数，指示您正在加载的选项卡。我确保每个新选项卡都有一个唯一 ID (UUID)，并且该函数获取该 ID 以加载页面。

然而，有一个障碍——我发现如果加载的子页面包含 javascript 代码，需要在页面内部初始化对象，他们可能会因为页面是“隐藏的”而感到困惑。有时当我回到带有这些元素的选项卡时，我会发现它们的尺寸“小”。

此功能还存储提交到后端的数据，以便您轻松创建“重新加载”按钮。

```
function LoadView(ident, view, data) {

	var img = $('<img>', {
		src : '/images/ajax-loading.gif'
	});

	$('#' + ident).html(img);

	data.view = view;
	data.viewid = ident;

	// console.log(data);
	$.ajax({
		url : '/cgi-bin/browser.cgi',
		data : data,
		type : 'GET',
		dataType : 'html',
		timeout : 30000000,
		success : function(result) {
			$("#" + ident).html(result);
			// set data on view
			$("#" + ident).data('data', data);
		},
		error : function(xhr, status, error) {
			var img = $('<img>', {
				src : '/images/exclamation_micro.png'
			});
			$('#' + ident).html(img.html() + error);
			// alert("Error processing request " + error);
		},
		timeout : function() {
			var img = $('<img>', {
				src : '/images/exclamation_micro.png'
			});
			$('#' + ident).html(img.html() + ' Timeout');
			// alert("Timeout processing request");
		}
	});
}

function ReloadView(view, ident) {
    // Retrieve the data for the view
    var data = $('#' + ident).data('data');
    // Reload the view
    LoadView(ident, data.view, data);
}
```

# c#-4.0 - Generic InArgument 抛出异常试图获取值

> ID：15641826
> 
> 赞同：5
> 
> 时间：2013-03-26T16:07:13.333
> 
> 标签：c#-4.0, workflow-foundation-4, workflowservice

我有一个活动，我在其中声明了一个没有类型的 InArgument（因为我想在设计时知道表达式的类型）。

当我执行活动时，我在 var contentTelegram 行中收到此错误：

```
"The argument of type '<type>' cannot be used.  Make sure that it is declared on an activity." 
```

这是我的代码：

```
public InArgument Content { get; set; }

protected override PlcMessage Execute(CodeActivityContext context)
        {

            try
            {
                var contentTelegram = Content.Get(context); 

               return new PlcMessage();
            }
            catch (Exception ex)
            {

                throw;
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:41:25.430

这是我所做的：

工作流运行时需要了解参数中使用的类型，因此 cacheMetadata 是使其工作的关键，CacheMetadata 使用反射来了解参数，请注意仅适用于简单情况。

```
public sealed class MyActivity: CodeActivity
{
    private RuntimeArgument outMyRuntimeArgument;

    // Define an activity input argument of type string
    public OutArgument MyUntypedArgument { get; set; }

    protected override void CacheMetadata(CodeActivityMetadata metadata)
    {
        outMyArgument= new RuntimeArgument("MyUntypedArgument", MyUntypedArgument.ArgumentType, ArgumentDirection.Out);
        metadata.Bind(MyUntypedArgument, outArgument);
        metadata.AddArgument(outMyArgument);
    }     

    protected override void Execute(CodeActivityContext context)
    {
        context.SetValue(outMyRuntimeArgument, Activator.CreateInstance(Type));
    }
} 
```

# jquery - 防止默认值在我的 javascript 中不起作用

> ID：15641827
> 
> 赞同：2
> 
> 时间：2013-03-26T16:07:16.170
> 
> 标签：jquery, show-hide, preventdefault

我有一个脚本，用于隐藏和显示页面的不同部分。它的目的是让用户在点击链接时来回浏览内容。我需要将所有这些内容保留在同一页面上，我不能将其分成单独的页面。

到目前为止，当页面加载时，我可以隐藏和显示我想要的第一步，然后附加一个链接，将用户带到第二步。

当第二步显示并附加一个链接以返回到第一步或转到第三步时，这些链接不起作用。似乎阻止默认操作不起作用。当您单击链接时，它们会转到他的 URL，而不是显示第一步或第三步。

为什么我的第二步链接有效，而不是我的第一步和第三步链接？

```
stepOne.show();
    stepOneTwo.show('fast', function() {
        stepOneTwo.append( z + '<a href="#step2" style="color:white;"    id="step_2">GO TO NEXT STEP >></a></div>');
        });

            $("#step_2").click(function(e){ 
            e.preventDefault();
                 stepOne.hide(); 
                 stepOneTwo.hide(); 
                 stepTwo.toggle();
                 stepTwoTwo.show('fast', function() {
                 stepTwo.append(z + '<a href="#step1" style="color:white;" id="step_1">BACK >></a></div></br></br>' + z + '<a href="#step3" style="color:white;" id="step_3">GO TO NEXT STEP >></a></div>');
                }); 
            }); 

            $("#step_1").click(function(e){ 
            e.preventDefault();
                stepTwo.hide();
                stepTwoTwo.hide();
                stepThree.hide(); 
                stepThreeTwo.hide();
                stepThreeThree.hide();
                stepThreeFour.hide();
                stepFour.hide();
                stepFourTwo.hide();
                stepFourThree.hide();
                k.hide();
                stepOne.show();
                stepOneTwo.show('fast', function() {
                stepOneTwo.append( z + '<a href="..." style="color:white;" id="step_2">GO TO NEXT STEP >></a></div>');
                });
            });

            $("#step_3").click(function(e){ 
            e.preventDefault();
                 stepTwo.hide(); 
                 stepTwoTwo.hide(); 
                 stepThree.toggle();
                 stepThreeTwo.toggle();
                 stepThreeThree.toggle();
                 stepThreeFour.show('fast', function() {
                 stepThree.after(c + '<a href="..."       style="color:white;" id="step_2">GO BACK >></a></div> </br></br>' + c + '<a href="..." style="color:white;" id="step_6">GO TO NEXT STEP >></a></div>');                                   
                }); 
            }); 

});     
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:11:35.053

看来您正在动态附加步骤。

在事件绑定时，元素必须存在于 DOM 中。

如果您已经绑定了一个事件，但随后将 DOM 元素替换为该事件，则该事件将与 DOM 元素一起被删除，并且必须重新绑定。

为了不必不断地重新绑定，您可以使用事件委托来绑定事件。
这将通过静态元素将事件间接绑定到动态元素。

而不是这个：

```
$("#step_2").click(function(e){ //... }); 
```

根据您的 jQuery 版本，使用[**on()**](http://api.jquery.com/on/)和 delegate() 或[**delegate()**](http://api.jquery.com/delegate/)，类似于：

```
// when using jQuery 1.7 or later
$("body").on("click", "#step_2", function(e){ //... });

// or when using jQuery 1.6 or earlier -- note the reversal of event and target
$("body").delegate("#step_2", "click", function(e){ //... }); 
```

而不是`body`你应该使用最接近的静态元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:19:38.147

我认为问题在于，在解析 $("#step1").click() 的处理程序时，没有将其绑定到的 #step1 元素 - 该元素是稍后在单击 #step2 时创建的。

要允许处理程序绑定到尚未创建的元素，请使用 on() ( [http://api.jquery.com/on/](http://api.jquery.com/on/) )，绑定到附近的某个父对象并过滤链接元素，如“上述链接中的直接和委托事件”部分。

假设您的链接元素在 <div id="links"></div> 内（它们可能不是，但您没有提供任何 HTML 源代码，所以我正在发明一点），您可以重写您的步骤 1处理程序（对于其他处理程序也是如此）：

```
 $("#links").on("click", "#step_1", function(e){ 
        e.preventDefault();
        stepTwo.hide();
        stepTwoTwo.hide();
        stepThree.hide(); 
        stepThreeTwo.hide();
        stepThreeThree.hide();
        stepThreeFour.hide();
        stepFour.hide();
        stepFourTwo.hide();
        stepFourThree.hide();
        k.hide();
        stepOne.show();
        stepOneTwo.show('fast', function() {
            stepOneTwo.append( z + '<a href="..." style="color:white;" id="step_2">GO TO NEXT STEP >></a></div>');
        });
    }); 
```

# java - 同时设置 jtextfield textlimit 和大写

> ID：15641833
> 
> 赞同：2
> 
> 时间：2013-03-26T16:07:20.943
> 
> 标签：java, swing, jtextfield, documentfilter

我的应用程序中有几个 jtextfield，我想放其中一个允许大写和小写，并限制可以引入 jtextfield 的字符数。我必须单独上课，一个放限制，另一个放大写或小写。

代码到 jtextfield 的极限：

```
package tester;

import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class TextLimiter extends PlainDocument {

    private Integer limit;

    public TextLimiter(Integer limit) {
        super();
        this.limit = limit;
    }

    public void insertString(int offs, String str, AttributeSet a) throws BadLocationException {
        if (str == null) {
            return;
        }
        if (limit == null || limit < 1 || ((getLength() + str.length()) <= limit)) {
            super.insertString(offs, str, a);
        } else if ((getLength() + str.length()) > limit) {
            String insertsub = str.substring(0, (limit - getLength()));
            super.insertString(offs, insertsub, a);
        }
    }
} 
```

这是设置大写的代码，反之亦然：

```
package classes;

import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class upperCASEJTEXTFIELD extends DocumentFilter {

    @Override
    public void insertString(DocumentFilter.FilterBypass fb, int offset, String text,
            AttributeSet attr) throws BadLocationException {
        fb.insertString(offset, text.toUpperCase(), attr);
    }

    @Override
    public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String text,
            AttributeSet attrs) throws BadLocationException {

        fb.replace(offset, length, text.toUpperCase(), attrs);
    }
} 
```

继续我的问题，我想设置一个 jtextfield 限制 = 11 和大写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:13:46.403

```
PlainDocument doc = new TextLimiter();
doc.setDocumentFiletr(new upperCASEJTEXTFIELD());
JTextField textField = new JTextField();
textField.setDocument(doc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:20:57.560

> 我必须单独上课，一个放限制，另一个放大写或小写。

为什么需要单独的课程？仅仅因为您碰巧在网上找到了使用两个不同类的示例，并不意味着您需要以这种方式实现您的需求。

您可以轻松地将两个类的逻辑组合到一个`DocumentFilter`类中。

或者，如果您想更高级一点，可以查看[链接文档过滤器](http://tips4java.wordpress.com/2009/10/18/chaining-document-filters/)，它展示了如何将单个文档过滤器组合成一个。

# php - 有没有办法将论坛的用户管理用于站点的其余部分？

> ID：15641845
> 
> 赞同：1
> 
> 时间：2013-03-26T16:07:39.100
> 
> 标签：php, forum, credentials, mybb

我刚刚建立了一个 MyBB 论坛。我有一个网站，我想提供其他功能，例如保存文本。但要这样做，我需要用户凭据。所以我想知道我是否可以利用论坛的用户管理系统来查看用户是否已登录以及他所在的组。

我的域结构是这样的：http: [//www.mainsite.com/forum](http://www.mainsite.com/forum)

我正在使用 PHP。我查询论坛的数据库没有问题，但是我可以从会话值中获取登录状态吗？我应该在我的 PHP 文件中包含什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:46:46.143

您正在寻找一种身份验证桥接器，也就是在另一个系统中使用一个系统的身份验证 API 的方法。

# eclipse - 在 Eclipse 中找不到 Nexus 7 的 storage/emulated/0/ 文件夹

> ID：15641848
> 
> 赞同：10
> 
> 时间：2013-03-26T16:07:46.400
> 
> 标签：eclipse, ubuntu, adb, nexus-7

Nexus 7、Ubuntu 12.04、Eclipse Juno

Nexus 7 已设置开发者模式。在 Eclipse 中，我可以在 Android 的“文件资源管理器”中看到列表。

我可以看到存储/模拟/旧版

但我看不到 storage/emulated/0/ 文件夹

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T18:35:12.147

我也有同样的问题。在对单独的堆栈溢出问题的评论中找到了答案，因此归功于作者。

> 无论如何，一切都是指向 /storage/emulated/legacy 的链接，它本身就是指向包含文件的 /mnt/shell/emulated/0 的链接。– 月光奶酪 2012 年 12 月 7 日在 13:55

因此，通过 Android 文件资源管理器查看该目录，您将拥有您的文件。

编辑：这是原始评论的链接：[Nexus 4 not shown files via MTP](https://stackoverflow.com/questions/13737261/nexus-4-not-showing-files-via-mtp#comment18920361_13756186)

# eclipse - 工具 jar 不存在 Eclipse JAVA

> ID：15641849
> 
> 赞同：31
> 
> 时间：2013-03-26T16:07:48.670
> 
> 标签：eclipse, java

`The archive: C:/Java/jdk1.6.0_26-32/lib/tools.jar which is referenced by the classpath, does not exist.`

这是我在运行 Tomcat 时遇到的错误。清理或发布没有问题 - 只有当我启动 Tomcat 服务器时。

现在，我检查了我的文件夹，并且有一个`tools.jar`文件路径`C:\Java\jdk1.6.0_34\lib`

我错过了什么？

使用 jre6 并安装了 jdk1.6.0_34

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-10-01T19:53:51.610

我发现这个问题试图在 Eclipse 中使用 Ant 构建我的项目，我会收到与上面相同的错误消息。@Parth 的建议和其他编辑已安装 JRE 的答案是第一步。我还需要成功运行 Ant 是

1.  右键单击build.xml，选择“Run As”，选择“Ant Build...”（注意...）
2.  单击 JRE 选项卡
3.  将 Runtime JRE 更改为您在第一阶段更新的相同内容，然后按 Apply。（也就是说，您在“首选项”->“Java”->“已安装的 JRE”中指定的运行时 JRE，如 @Parth 的回答。）

否则，Ant 似乎仍会尝试使用没有`tools.jar`. 希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-26T16:10:59.097

右键单击您的 Eclipse 项目，在`Preferences`转到`Java > Installed JREs, select your JDK`并单击`Edit`. 在新对话框中，您可以将**外部 jar 添加**`tools.jar`到执行环境中。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-18T06:40:22.803

我找到了解决这个问题的解决方案。

转到 Run Configurations > classpath，在 User Enteries 下，您将拥有 tools.jar，其路径将指向旧文件夹。删除它并单击“添加外部罐子”以从新路径中添加 tools.jar。就是这样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-12T15:51:35.263

这在 Eclipse 上对我有用：

```
Windows -> Preferences -> Select Java -> Select Installed JREs -> Add 
-> Add your JDK -> Establish it as default -> Apply -> OK. 
```

在此之后，我也必须建立项目相关的设置：

```
Right click on your Project Name (in Project explorer ) -> Properties ->
Java Build Path -> Click on JRE System Libraries -> Edit -> 
Select Workspace Default JRE (jdk included above) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-15T09:10:49.527

右键项目->属性->编译器->配置工作区设置->进入配置->安装jre->给出jdk路径

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-05T02:19:45.923

检查您的“运行配置”（Eclipse Menu Run -> Run Configurations ....），因为其中的类路径可能是错误的或已过时。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T16:11:20.443

Tomcat 需要完整的 JDK/SDK 才能运行，但在 下`C:/Java/jdk1.6.0_26-32/`，您只安装了 JRE。

清理和部署由 Eclipse 完成，不涉及 Tomcat 代码，因此可以正常工作。

您需要配置您的环境，以便 Tomcat`C:\Java\jdk1.6.0_34`用作 Java VM。检查的值`JAVA_HOME`和内容`setenv.bat`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-02T06:50:01.210

在我的例子中，Eclipse 中的 Tomcat 服务器是在较旧的 JDK 下创建的（只有几个版本）。我的解决方案是删除服务器并再次添加（现在使用当前的 JDK）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-11T10:46:07.327

尝试将 tools.jar 添加为外部 JAR。

对于日食，

1.  右键单击项目名称并选择属性
2.  转到Java“构建路径”
3.  选择选项卡“库”
4.  单击“添加外部 JAR”
5.  从文件选择中选择相关的 .jar 文件

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-21T22:55:41.587

我不确定它是否适用于所有情况，但是如果您右键单击 Ant 脚本并且在“运行方式”菜单下有一个项目“外部工具配置”，请选择它，然后转到 JRE 选项卡。据我所知，它可能独立于您的项目进行配置，并指向 JRE，而不是 JDK，在这种情况下会缺少 tools.jar

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-27T10:32:28.980

如果您正在运行 Ant 构建文件并在 eclipse 中收到此错误，那么您的 eclipse 被配置为使用两个不同命名的 JRE。即一个来自jre 文件夹，另一个来自jdk 文件夹中的jre。添加`tools.jar`可能是一种解决方法，但我在 JDK 的文件夹 ( `C:\Program Files\Java\jdk1.8.0_121`) 中使用了 JRE。为了改变这一点，

1.  检查已检查 JRE 的已安装 JRE 部分（我已`jdk1.8.0_121`检查并未`jre1.8.0_121`选中）。

2.  通过导航到 更新您的 Eclipse 类路径`Window > Preferences > Java > Installed JRE > Execution Environments`。

3.  现在选择`JavaSE-1.x`左侧的 并选择兼容的 JRE[完美匹配]。`jdk1.8.0_121`选择您在上面选中的相同 JRE( )，然后单击 Ok。或者，您可以删除未使用的 JRE(jre1.8.0_121)，以避免在任何其他项目中未使用时造成混淆。

现在您的项目将构建，您可以运行 Ant 构建文件。检查下面的图像。

[![Eclipse 安装的 JRE 配置](../Images/e2796dfe7bcefa0c3be9e9ba70e6c2c7.png)](https://i.stack.imgur.com/aIfPp.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-13T08:07:03.580

我从窗口-> 首选项-> 服务器-> 运行时环境中删除服务器（Tomcat 6.0）。并再次添加。然后，我再次将我的项目添加到服务器。问题被破坏了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-13T13:10:32.233

我遇到了同样的问题（我可以重现它），我的解决方案听起来像是 Eclipse 中的集成确实搞砸了，但我实际上是通过使用相同的 JDK 版本启动 Eclipse 来修复它。

*在eclipse.ini*（位于 Eclipse 目录中）中添加/编辑以下内容：

```
-vm
path/to/jdk/bin 
```

其中*path/to/jdk/bin*是您用于 ant/tomcat 的版本的 JDK bin 目录的路径。

请注意，tools.jar 不包含在 JRE 分发中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-28T09:14:17.827

在我使用 ANT 构建的情况下，我必须在以下位置更改设置 Add tools.jar。Windows --> 首选项 --> Ant --> 运行时 --> 全局条目。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-05T08:11:27.627

如果您在运行 ANT 构建时遇到此错误，请按照以下步骤操作。在 Eclipse 转到窗口-> 首选项-> ANT-> RUNTIME 中，然后选择 classpath 选项卡，然后选择 Global Entries 并添加`tools.jar`为`external jar`.

运行 ANT 构建。

# javascript - 使用 touchstart 事件无法识别碰撞

> ID：15641851
> 
> 赞同：0
> 
> 时间：2013-03-26T16:07:53.617
> 
> 标签：javascript, touch, html5-canvas

我正在使用“使用 JavaScript 的基础 HTML5 动画”一书中的示例创建一个支持触摸的游戏。书中的一个示例显示了基本的触摸功能，但不完全有效。这里是示例[http://jsfiddle的链接.net/yrXCN/3/](http://jsfiddle.net/yrXCN/3/)

根据下面的功能，如果您触摸球内的画布，它应该记录消息“in ball: touchstart”但是我还没有让它工作。当您进入球时，它会识别球，但由于某种原因，它不会识别第一次触摸。

如果我更改代码以使用鼠标侦听器，它会按预期工作。

```
canvas.addEventListener('touchstart', function (event) {
    event.preventDefault();
    if (utils.containsPoint(ball.getBounds(), touch.x, touch.y)) {
      log.value = "in ball: touchstart";
    } else {
      log.value = "canvas: touchstart";
    }
  }, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:29:18.050

```
 element.addEventListener('touchstart', function (event) {
    touch.isPressed = true;
    touch.event = event;
}, false); 
```

如果在您的球上触发了“touchstart”`touch.x`并且`touch.y`未定义，因此您无法识别球上的触摸。您在 touchmove 事件中进行跟踪`touch.x`，`touch.y`这就是为什么您在移动时识别出触球在球上的原因。

编辑：您可以通过在第 88-91 行设置`touch.x`和`touch.y`内部的 touchstart 事件来解决此问题

# javascript - 未捕获的 TypeError：在我的预加载器上。如何让它发挥作用？

> ID：15641852
> 
> 赞同：0
> 
> 时间：2013-03-26T16:07:54.053
> 
> 标签：javascript, jquery, ajax, wordpress, preloader

我一直使用此代码来预加载页面，现在我正在使用 wordpress 对其进行测试，但出现以下错误：

  **未捕获的类型错误：对象 [object Window] 的属性“$”不是函数**

该文件附加到外部文件。从演示中可以看出。我究竟做错了什么？谢谢 ：）

[以前用过](http://promo.contat.eu/)

[实时链接](http://montesilvano.contat.eu/)

```
$(window).load(function() { 
 $(".loader").delay(350).fadeOut("slow"); 
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:10:40.163

您正在`jQuery.noConflict()`从修改后的 jQuery 副本中调用，以便取消绑定`$`符号。

如果您没有使用冲突库，则无需这样做。如果你删除那条线，一切都会奏效。或者，您可以像这样包装您的预加载代码：

```
;(function($) {
  $(window).load(function() { 
    $(".loader").delay(350).fadeOut("slow"); 
  });
})(jQuery); 
```

# iphone - 如何更改 iPhone 应用程序二进制文件 - 在 iTunes Connect 上

> ID：15641853
> 
> 赞同：0
> 
> 时间：2013-03-26T16:07:56.147
> 
> 标签：iphone, app-store-connect

我想知道如何在 iTunes Connect 页面上更改我的二进制文件，当我按下“上传二进制文件”时，我不会被要求上传实际的二进制文件。

我相信您需要在 Xcode 上使用 Organizer 进行分发，并在 iTunes Connect 上创建新版本。

我用 metadata 更新了 1.2 版，但那是分配给旧版本的。

有人可以确认那是否正确吗？我真的不想添加新版本。

谢谢，莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:19:32.270

![在此处输入图像描述][1]通过 XCode 分发不会创建新版本。您需要在 iTunes Connect 上创建一个新版本，并一直到“等待上传”阶段（最后一步是单击“准备上传二进制文件”按钮）。一旦它在那个阶段，并且你从 XCode 分发，二进制文件将被分配给那个版本。

不要担心尝试，如果您在 iTunes Connect 中没有处于“等待上传”阶段的应用程序，XCode 将失败并让您知道它找不到具有正确状态的版本。

---下面的截图---

![加密页面](../Images/95328f8dbb45c9fa67d4d8ee9afcf5e0.png) ![最后一页](../Images/dd66153ab29d268d9d4d99a931240ccd.png)

# java - 实体可能不存在的 JPA 一对一关系

> ID：15641856
> 
> 赞同：5
> 
> 时间：2013-03-26T16:07:57.553
> 
> 标签：java, hibernate, jpa, one-to-many

我在两个实体（A 和 B，一个 B 可以与许多 As 关联）之间有一个多对一映射，我需要能够在 A (A.B_ID) 上拥有 B 的 ID，其中特定的 B实体在数据库中不存在。这可能吗？

我们代码的（简化）示例：

```
@Entity
@Table(name = "A")
public class A implements java.io.Serializable {

    // ...

private B b;

    // ...

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "B_ID")
    public B getB() {
        return this.b;
    }

    // ...
}

@Entity
@Table(name = "B")
public class B implements java.io.Serializable {

    // ...

private Set<A> as = new HashSet<A>( 0 );

    // ...

    @OneToMany( fetch = FetchType.LAZY, mappedBy = "b" )
    public Set<A> getAs() {
         return this.as;
    }

    // ...
} 
```

这个基本设置最终导致 Hibernate 尝试为 A.B_ID 保存一个空值，这是不允许的：

```
Caused by: java.sql.BatchUpdateException: ORA-01400: cannot insert NULL into ("MY_SCHEMA"."A"."B_ID") 
```

为澄清起见，如果实体尚不存在，我不希望创建它。我只想在数据库中插入 A 而没有 B。两个表之间没有外键约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:12:49.230

我在侧面使用`@NotFound`注释`@ManyToOne`以确保它不会导致任何错误。不过，我还没有尝试过双向关系。

请不要认为这是 Hibernate 特定的注释！

例子：

```
@NotFound(action=NotFoundAction.IGNORE) 
```

# html-heading - 插入一个

> ID：15641860
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:08:08.233
> 
> 标签：html-heading

```
<p style="margin-left: 14" class="style19"><b>
<font size="6" color="#001E5A" face="Arial">401K Rollover and 
Retirement Planning Center</font></b> 
```

在不影响字体或其他特征的情况下，我应该在哪里添加`<h1>`和标签？`</h1>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:07:51.187

您不应该使用标记进行样式设置 - 为此使用 CSS，例如：

**标记：**

```
<h1> 401K Rollover and Retirement Planning Center</h1> 
```

**CSS**

```
h1{
  font-size: 6px;
  font-family: Arial;
  font-weight: bold;
} 
```

[这是结果。](http://jsfiddle.net/9aMpz/)

您可以将 CSS 代码嵌入`<style type="text/css">`标签或外部文件中，您可以将其称为：

```
<link rel="stylesheet" type="text/css" href="/path/to/someStyleSheet.css"> 
```

无论如何，请在线搜索一些最近的 Web 开发指南，以便更好地了解该主题。

# javascript - 使用 setTimeout 避免 OVER_QUERY_LIMIT 与谷歌地图，意外的时间间隔

> ID：15641862
> 
> 赞同：0
> 
> 时间：2013-03-26T16:08:10.773
> 
> 标签：javascript, settimeout, google-geocoding-api

我试图避免来自 google geocode api 的可怕的查询限制消息。

我从服务器分批获取 10 个数据。在一批中，时间安排很好，但在批次之间，我不明白的延迟越来越长。我已经检查了获取新记录的时间，但那是亚秒级而不是问题。

我正在寻找有关在何处创建间隙（以及理想情况下如何消除它们）的一些指导。确切的代码如下。我基本上使用一个在不同批次上稳定的计数器，并且我使用一个 setTimeout`(300*counter)`来确保它们不会同时触发。这在一个批次中也能很好地工作，但不能超过批次。

不同批次之间的时间是：

```
start batch 1 :"2013-03-26 15:40:15.882337"
stop batch  1 :"2013-03-26 15:40:18.586881"
start batch 2 :"2013-03-26 15:40:21.688363" (3 seconds between batches)
stop batch  2 :"2013-03-26 15:40:24.384641"
start batch 3 :"2013-03-26 15:40:30.449829" (6 seconds between batches)
stop batch  3 :"2013-03-26 15:40:33.150393"
start batch 4 :"2013-03-26 15:40:42.216579" (9 seconds between batches)
stop batch  4 :"2013-03-26 15:40:44.917545"
start batch 5 :"2013-03-26 15:40:56.991258" (12 seconds between batches)
stop batch  5 :"2013-03-26 15:40:59.689068"
start batch 6 :"2013-03-26 15:41:14.742534" (15 seconds between batches)
stop batch  6 :"2013-03-26 15:41:17.444024"
start batch 7 :"2013-03-26 15:41:35.500424" (18 seconds between batches) 
```

如您所见，批次之间的差距正在扩大。

我使用的代码：

```
 getRecords: function(data, textStatus, xhr) {

    var self = this;
    var recordsDone = 0;

    if (data) {
      for (var i = 0; i < data.geocode.length; i++) {

        // build the address string
        var addressQuery = this.buildAddress(data, i);

        setTimeout(function(addr, recId) {
          self.googleGeocoder.geocode({'address': addr}, function(result, status) {
            if (status === google.maps.GeocoderStatus.OK ) {
              $.ajax({
                url: '/geocode/' + recId + '.json',
                data: {'status': status, 'lat': result[0].geometry.location.kb, 'long': result[0].geometry.location.lb},
                type: 'PUT',
                success: function(data, textStatus, xhr) {
                  var total = parseFloat(data.total);
                  var done = parseFloat(data.done);
                  self.set('voortgang', (done/total)*100);
                },
                error: function(xhr, textStatus, errorThrown) {

                }
              });
            } else {
              $.ajax({
                url: '/geocode/' + recId + '.json',
                data: {'status': status},
                type: 'PUT',
                success: function(datra, textStatus, xhr) {
                  var total = parseFloat(data.total);
                  var done = parseFloat(data.done);
                  self.set('voortgang', (done/total)*100);
                },
                error: function(xhr, textStatus, errorThrown) {

                }
              });
            }

            recordsDone++;

            if (recordsDone === data.geocode.length) {
              console.log('about to get records ' + new Date().toUTCString());
              $.ajax({
                url: '/geocode.json',
                data: {data_set_id: self.datasetid},
                type: 'GET',
                success: function (data, textStatus, xhr) {
                  console.log('got the records ' + new Date().toUTCString());
                  self.getRecords(data, textStatus, xhr);
                },
                error: function(xhr, textStatus, errorThrown) {
                  // set to fully geocoded
                  var found = self.get('content').findProperty('id', self.datasetid);
                  Ember.set(found, 'data_set.fully_geocoded', true);
                  self.set(voortgang, 0);
                }
              });
            }
          });
        }, (300*this.globalRecordsDone), addressQuery, data.geocode[i].id);

        // another record has been handled
        this.globalRecordsDone++;
      }
    }

    // get records the first time
    if (this.firstTime === true) {
      $.ajax({
        url: '/geocode.json',
        data: {data_set_id: this.datasetid},
        type: 'GET',
        success: function (data, textStatus, xhr) {
          self.getRecords(data, textStatus, xhr);
        },
        error: function(xhr, textStatus, errorThrown) {
          alert('stop getting records');
        }
      });

      this.firstTime = false;
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:09:17.923

您的问题似乎在这一行：

`}, (300*this.globalRecordsDone), addressQuery, data.geocode[i].id);`

我认为你只是想要：

`}, (300), addressQuery, data.geocode[i].id);`

您正在增加`setTimeout`等待的时间。第一批，它在请求之间等待 300 mil，第二轮 600 mil，第三轮 900 mil，等等。这就是为什么你得到 3 秒（300 mil 乘以 10 条记录 = 3 秒。），然后是 6 秒, 600 密耳乘以 10 条记录 = 6 秒。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:42:33.810

我将时间设置为循环的函数，我必须将超时时间增加到 1200 才能在没有过度查询限制的情况下通过数据集。由于批次之间的最短中断时间为 3 秒，我想我之前一直在查询限制内。该过程现在很流畅，没有任何明显的中断。

所以而不是

```
}, (300*this.globalRecordsDone), addressQuery, data.geocode[i].id); 
```

它变成了

```
}, (1200*i), addressQuery, data.geocode[i].id); 
```

# c# - 从 SQL 填充 DataRow

> ID：15641866
> 
> 赞同：0
> 
> 时间：2013-03-26T16:08:16.377
> 
> 标签：c#, sql, sql-server-ce

我知道将 SQL Server CE 数据检索为各种数据类型，例如字符串、整数、数据表等。但在这种情况下，我正在`SelectedRowsCollection`使用循环遍历基础架构`foreach`并对每条记录进行一些检查。

根据我执行的检查，我希望将其中一些记录添加到`DataTable`. 我正在做的是将它们添加到我的数据库中的表中，然后选择该信息作为单行（还有其他原因，不要介意）。将大量单行数据组合成 on 的最佳方法是什么`DataTable`？

我尝试使用`SqlCeDataAdapter`填充函数，但它不包含处理单个`DataRow`. 有任何想法吗？

我正在使用 SQL Server CE。

总而言之，我的问题是：如何从 SQL Server CE 中获取单行作为一行添加到`DataTable`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:15:58.403

```
DataRow dr = new DataRow();
DataTable dt = new DataTable();
dt.Rows.Add(dr); 
```

如果您正在构建单独的行，这可能是您最简单的方法。

您还可以使用：

```
dt.Rows.Add("column1value", "column2value", "etcvalue"); 
```

# facebook-graph-api - Facebook 在喜欢或分享时未正确获取 og:image

> ID：15641875
> 
> 赞同：4
> 
> 时间：2013-03-26T16:08:40.260
> 
> 标签：facebook-graph-api, facebook-opengraph

我会尽量直接解释我的问题：

当喜欢/分享我网站 ( [http://www.radiopico.com](http://www.radiopico.com) ) 上的文章时，og:image 效果不佳（您可以尝试使用此网址，例如：[http ://www.radiopico.com/index.php ?n=noticias&menu=noticias&id_noticia=14350](http://www.radiopico.com/index.php?n=noticias&menu=noticias&id_noticia=14350) )

*   在调试器上，我总是得到正确的图像 url
*   它从不显示图像
*   如果我单击图像，我会收到未找到的错误。如果我复制 url 并将其粘贴到地址栏上，我会得到图像
*   有时它说图像太小.. 这是错误的，因为它比 facebook 鼓励的最小尺寸大得多。也不存在比例问题
*   当我尝试在 Facebook 上发布地址时，它从不显示图片
*   我试图在地址后添加一个时间变量 (?T=...) 以确保它没有缓存
*   我已经放了多个 og:images .. 仍然不起作用。
*   我已经阅读并尝试了我在这里（Stackoverdlow）或谷歌上找到的所有“技巧”

感谢您对解决这个谜团的支持和最良好的祝愿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:03:55.987

调试你的[链接](https://stackoverflow.com/questions/8492528/facebook-debugger-lint-tool-gets-http-206-doesnt-detect-open-graph-meta-tags)

我看到 linter 响应是 206。

我不知道它是否可以帮助你，但我找到[了这个](https://stackoverflow.com/questions/8492528/facebook-debugger-lint-tool-gets-http-206-doesnt-detect-open-graph-meta-tags)

一探究竟 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:45:14.260

我注意到您的图像在技术上不是以 72 dpi 定义的，而是以 300 dpi 定义的：

![在 Photoshop 中打开图像时“图像大小”对话框的屏幕截图。](../Images/45e78bc4ba0780b41e57ebd7664ac3e0.png)

我不能肯定地说这会导致你的问题。浏览器通常足够聪明，可以以 72 dpi（使用像素尺寸）显示图像，而不管图像中定义的“分辨率”如何。但是，可能值得以 72dpi 为 Web 正确设置的分辨率重新保存图像。由于分辨率设置，Facebook 可能对图像大小感到困惑。

此外，为了消除图像的潜在问题，如果您有 Photoshop，请使用 Save for Web 命令重新保存图像，这将自动定义重新保存的图像为 72dpi 并在没有内置预览的情况下保存它，无论如何，您应该始终为网络执行此操作以减小文件大小。然后再试一次。同样，我不确定这些建议是否有效，但通过重新保存来消除原始文件的分辨率、嵌入预览和潜在问题似乎是个好主意。

# qunit - chutzpah 可以从 url 运行 qunit 测试吗？

> ID：15641881
> 
> 赞同：1
> 
> 时间：2013-03-26T16:08:48.840
> 
> 标签：qunit, chutzpah

Chutzpah 可以从 url 运行 qunit 测试吗？在我的 qunit 测试中，我需要大量服务器端注入的标记和 json 数据，因此我喜欢在本地主机上的 Visual Studio 项目中运行测试套件，而不是在我的 test.js 文件中模拟大量测试数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:09:54.597

从 2.4 版开始，Chutzpah 现在支持针对远程 url 运行。[请参阅此处](https://chutzpah.codeplex.com/wikipage?title=Running%20against%20a%20remote%20url)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:56:50.953

也许它有助于分享我们的测试策略。

我们使用 chutzpah 进行 javascript 单元测试。不依赖于正在运行的服务器。作为构建的一部分，测试运行得非常快。（但我们没有测试生成的 JavaScript 代码，这是您的场景）。

我们通过用 JavaScript 编写测试并使用 PhantonJS 运行它们来测试正在运行的服务器。请参阅我的答案以获取我们的一项测试示例：[自动化功能 Web GUI 测试框架 (asp.net)](https://stackoverflow.com/questions/13022602/automated-functional-web-gui-testing-frameworks-asp-net/13031232#13031232)

如果你不喜欢像这样用 Javascript 编写测试（它不如使用单元测试框架——比如 qUnit 或 jasmine），你可以查看[CasperJS](http://casperjs.org/)。

# java - 接口中泛型的使用

> ID：15641883
> 
> 赞同：3
> 
> 时间：2013-03-26T16:08:49.400
> 
> 标签：java, generics

我有一个关于接口中正确的方法签名是什么以及为什么的问题。我的事件是用类型参数化的，但是接口是否也应该`<T>`在方法签名中使用它？如果是，为什么，为什么不呢？

```
public interface MyListener {
    void beforeAction(final MyEvent event);
} 
```

和

```
public class MyEvent<T> extends EventObject {

    // code
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:11:08.490

如果`MyEvent`使用类型参数化，则`MyListener`需要指定为

```
public interface MyListener<T> {
    void beforeAction(final MyEvent<T> event);
} 
```

或者如果有不同类型的`MyEvents`不是特定于封闭的`MyListener`，那么：

```
public interface MyListener {
    <T> void beforeAction(final MyEvent<T> event);
} 
```

或者，正如 Thomas 所说，您可以完全忽略 T 的类型：

```
public interface MyListener {
    void beforeAction(final MyEvent<?> event);
} 
```

您必须执行上述操作之一，否则您将收到有关使用原始类型的编译器警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:17:22.017

如果`T`您的侦听器中的类型无关紧要，您至少应该将方法定义为`void beforeAction(final MyEvent<?> event);`以消除警告并保持泛型启用。如果没有任何类型，编译器将禁用该方法的所有类型检查。

如果您想为不同类型的事件设置不同的侦听器，您也应该将其添加`T`到您的界面中，就像 Andrew 已经指出的那样。

通过这种方式，您可以创建多个侦听器实现，而无需手动强制转换（以及错误），例如：

```
public class StringListener implements MyListener<String> {
   void beforeAction(final MyEvent<String> event) {
     ...
   }
}

public class NumberListener implements MyListener<Number> {
   void beforeAction(final MyEvent<Number> event) {
     ...
   }
} 
```

如果您有这样的实现，您还可以`T`在运行时查询 的值，因为该类型信息存储在反射数据中。

请注意，这不适用于匿名类或局部变量——在这些情况下会发生类型擦除。

# multithreading - hibernate4，spring 3：没有为当前线程找到会话

> ID：15641885
> 
> 赞同：0
> 
> 时间：2013-03-26T16:08:52.447
> 
> 标签：multithreading, spring, session, hibernate-4.x

我见过几个类似的问题，但没有一个建议的解决方案对我有帮助。

细节，这是一个简单的例子：

文件：**MandatTypeBean.xml**

```
<bean id="mandatTypeDAO" class="gestint.data.dao.impl.MandatTypeDAOImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="ActionMandatType" class="gestint.data.action.MandatTypeAction">
    <property name="mandatTypeDAO" ref="mandatTypeDAO" />
</bean> 
```

文件：**HibernateSessionFactory.xml**

```
<bean id="sessionFactory" 
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

   <property name="dataSource">
      <ref bean="DataSource"/>
    </property>

    <property name="hibernateProperties">
         <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.show_sql">true</prop>  
         </props>
    </property>

    <property name="mappingResources">
        <list>
          <value>gestint/data/model/MandatType.hbm.xml</value>
        </list>
    </property>  
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean> 
```

文件：**MandatTypeDAO.java**

```
public class MandatTypeDAOImpl implements MandatTypeDAO {
private SessionFactory sessionFactory;

public SessionFactory getSessionFactory() {
    return sessionFactory;
}
public void setSessionFactory(SessionFactory sessionFactory) {
     this.sessionFactory = sessionFactory;
}   

public List<MandatType> listMandatType() {      
    sessionFactory.getCurrentSession().isConnected();       

    return null;
} 
```

}

文件：**MandatTypeAction.java**

```
public class MandatTypeAction extends ActionSupport{
    private static final long serialVersionUID = 1L;

    private MandatTypeDAO mandatTypeDAO;    
    private List<MandatType> mandatList = new ArrayList<MandatType>();

    public void setMandatTypeDAO(MandatTypeDAO mandatTypeDAO) {
        this.mandatTypeDAO = mandatTypeDAO;
    }

    public List<MandatType> getMandatTypeList() {
        return mandatList;
    }

    public String listMandatType() {            
        mandatList = mandatTypeDAO.listMandatType();
        return SUCCESS;
    } 
```

}

而我的错误..

当我尝试 `public List<MandatType> listMandatType()` 使用简单的 linge 进行测试时：

```
sessionFactory.getCurrentSession().isConnected(); 
```

我收到此错误：

> 17：02：28,062 错误调度程序：38 - 处理请求期间发生异常：未找到当前线程 org.hibernate.HibernateException 的会话：在 org.springframework.orm.hibernate4.SpringSessionContext.currentSession 中未找到当前线程的会话（SpringSessionContext.java :97) 在 org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:980) 在 gestint.data.dao.impl.MandatTypeDAOImpl.listMandatType(MandatTypeDAOImpl.java:21) 在 gestint.data.action.MandatTypeAction.listMandatType( MandatTypeAction.java:26) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java .lang.reflect.方法。com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:446) 的调用(Method.java:597) com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:285) com.opensymphony.xwork2.DefaultActionInvocation .invoke(DefaultActionInvocation.java:248) 在 org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com。 opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176) 在 com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation。在 org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68) 在 com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265) 调用(DefaultActionInvocation.java:242) .opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java :138) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238) 在 com.opensymphony.xwork2。com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 处的拦截器.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238) 处.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java :191) 在 com.opensymphony.xwork2 的 org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73) 的 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)。DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91) at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) at org.apache .struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100 ) 在 com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141) 在 com.opensymphony.xwork2.DefaultActionInvocation 的 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)。在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2 在 com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145) 调用(DefaultActionInvocation.java:242) .interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171) 在 com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.爪哇：164) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation .java:242) 在 com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242) 在 org.apache.struts2.impl。 StrutsActionProxy.execute(StrutsActionProxy.java:54) at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544) at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)在 org.apache.struts2.dispatcher.ng.filter。StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3288) 在 weblogic.servlet .internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3254) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) ) 在 weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57) 在 weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2163) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1512) 在 weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run (ContainerSupportProviderImpl.java:254) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:256) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:221)ExecuteThread.run(ExecuteThread.java:221)ExecuteThread.run(ExecuteThread.java:221)

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:25:28.423

谢谢你的支持 ！有用，

解决方案是：

我添加注释驱动文件：**HibernateSessionFactory.xml**

```
 <tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean> 
```

我将注释添加到 DAO 文件：**MandatTypeDAO.java**

```
 @Transactional(readOnly = true)
public interface MandatTypeDAO {
    @Transactional(readOnly = true)
    List<MandatType> listMandatType();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:00:27.920

在您的 中添加以下行`applicationContext.xml`：

```
<tx:annotation-driven /> 
```

然后`MandateTypeAction`用注释装饰你的类，`@Transactional`默认情况下会传播（默认是传播类型 REQUIRED）到被调用的方法。

然后事务将被注入到`MandateTypeAction`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:37:49.273

你为什么要注射`SessionFactory`？直接使用`Session`即可：

```
@Repository
public Mydao {

   @PersistenceContext
   private Session session;

   @Transactional
   public void persist(entity e) {
       session.persist(e);
   }
} 
```

# html - 如何使用 CSS 选择文本节点

> ID：15641889
> 
> 赞同：13
> 
> 时间：2013-03-26T16:08:56.033
> 
> 标签：html, css-selectors

我有以下 HTML 标记：

```
<h1> 
     <div class="sponsor"> 
          <span>Hello</span>  
     </div> 
     World 
</h1> 
```

当我使用 CSS 选择器时`h1`，我得到`Hello World`.

不幸的是，我不能更改标记，我只能使用 CSS 选择器，因为我使用的是聚合 RSS 提要的系统。

是否有任何 CSS 选择器我只能采用文本节点？特别是`World`在这个例子中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:06:03.447

CSS的当前状态不能做到这一点，检查这个链接：[W3C](http://www.w3.org/TR/css3-content/)

这里的问题是您写入屏幕的内容没有显示在 DOM 中：P。

也`::outside`似乎还没有工作（至少对我来说在 Safari 6.0.3 中）或者它根本没有产生所需的结果。

检查我的小提琴，然后检查 DOM 源：[JSfiddle](http://jsfiddle.net/6hCG4/4/)

最后还有属性选择器`a { content: attr(href);}`，使 CSS 能够读取 DOM 节点属性。似乎还没有`innerHTML`类似的东西。如果这是可能的，那就太好了，而您可能能够操纵标签的内部标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:15:36.333

这几乎与我上周提出的一个问题相反：[是否可以在不使用纯 CSS 中的类或标识符的情况下选择容器中的第一个元素，否则它是纯文本？](https://stackoverflow.com/questions/15472975/is-it-possible-to-select-the-very-first-element-within-a-container-thats-otherw)

最简洁的答案是不。`"World"`在这个例子中 不是它自己的元素 - 因此没有办法选择它。

您在这里要做的是样式化，`h1`然后用`div.sponsor`. 例如，如果您希望此处的“世界”具有黑色背景和白色文本，您可以使用类似于以下内容的内容：

```
h1 {
    background:black;
    color:white;
}

h1 div.sponsor {
    background:white;
    color:black;
} 
```

然而不幸的是，如果您只想要“World”这个词的样式并且您的标记不仅仅包含在 中`<div>Hello</div> World Foo`，那么这将不起作用。

我不相信在这种情况下使用纯 CSS 来设置“世界”样式*是可能的。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-05T14:43:19.850

一点解决方法：

```
h1 {
  color: red;
}
h1 * {
  color: lime;
}
```

```
<h1> 
     <div class="sponsor"> 
          <span>Hello</span>  
     </div> 
     World 
</h1>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-15T09:16:16.137

我也遇到了同样的问题，我无法触摸标记并且无法控制 js。我需要隐藏 div 元素中的文本节点，但该元素保持可见。所以这是我的解决方案：

标记：

```
<div id="settings_signout_and_help">
        <a id="ctl00_btnHelpDocs" class="ico icoHelp" href="http://" Help Guide</a>
            Signed in as: <a id="ctl00_lUsr" href="Profile.aspx">some</a>&nbsp;&nbsp;
            <a href="Logout.aspx">Home</a>
                Sign out
        </div> 
```

CSS：

```
#settings_signout_and_help {
font-size: 1px !important;
}

#settings_signout_and_help a {
font-size: 13px !important;
} 
```

希望这对大家有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T19:38:17.243

我有一个类似的问题，我必须从 C# 函数生成的 html 中删除“世界”文本。

我在“h1”元素上将字体大小设置为 0，然后将我的 css 应用于 div 类。基本上隐藏额外的文本，但将内容保留在 div 中。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-03-07T19:07:34.147

我不知道如何仅使用 CSS，但是...

使用 JQuery，您可以选择其中的所有元素，但其子元素中的内容除外

$("h1:not(h1 > div)").css() 并在其中放置您想要的任何CSS效果。

# javascript - ajax加载后运行javascript

> ID：15641894
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:10.090
> 
> 标签：javascript, jquery, jquery-mobile, jquery-mobile-pageshow

我有一个小 javascript 函数，我试图在通过 JQM ajax 加载页面加载后运行该函数。现在我看到其他帖子讨论这个问题，但无法解决我的问题。当我的索引加载时，我最初加载了脚本，认为它会在 DOM 更改后留在头部，但它仍然什么都不做。这是脚本。

```
$(function(){
    var $product = $('#product'),
        $imgs = $product.find(".child"),
        imageTotal = $imgs.length - 1,
        clicked = false,
        widthStep = 20,
        currPos,
        currImg = 0,
        lastImg = 0;
    $imgs.bind('mousedown', function (e) {
        e.preventDefault(); // prevent dragging images
    })
        .filter(':gt(0)').addClass('notseen');

    $product.bind('mousedown touchstart', function (e) {
        if (e.type == "touchstart") {
            currPos = window.event.touches[0].pageX;
        } else {
            currPos = e.pageX;
        }
        clicked = true;

    });
    $(this)
        .bind('mouseup touchend', function () {
        clicked = false;
    })
        .bind('mousemove touchmove', function (e) {
        if (clicked) {
            var pageX;
            if (e.type == "touchmove") {
                pageX = window.event.targetTouches[0].pageX;
            } else {
                pageX = e.pageX;
            }
            widthStep = 20;
            if (Math.abs(currPos - pageX) >= widthStep) {
                if (currPos - pageX >= widthStep) {
                    currImg++;
                   if (currImg > imageTotal) {
                     currImg = 0;}
                } else {
                    currImg--;
                    if (currImg < 1) {
                        currImg = imageTotal;
                    }
                }
                currPos = pageX;
                $imgs.eq(lastImg).addClass('notseen');
                $imgs.eq(currImg).removeClass('notseen');
                lastImg = currImg;
                // $obj.html('<img src="' + aImages[options.currImg] + '" />');
            }
        }
    });
});

document.addEventListener('touchmove', function(e) { e.preventDefault(); }, false);// JavaScript Document 
```

我正在使用标准`<script>`标签加载它，我知道这是问题所在，我只是不确定如何解决它。

我正在使用 Jquery Mobile 1.3 和 Jquery 1.9.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:13:22.420

如果要在加载 jQuery Mobile 页面后加载要执行的内容，则需要使用正确的 jQuery Mobile 页面事件，例如**`pageshow`**.

这是一个例子：

```
$(document).on('pageshow', '#index', function(){       
    alert('Page loaded');
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/tuJEm/](http://jsfiddle.net/Gajotres/tuJEm/)

您应该将代码放入**`pageshow`**事件中。**`#index`**应该是您页面的 id。

如果你想了解更多关于 jQuery Mobile 页面事件的信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:17:19.763

`bind`不推荐。改为使用`on`。

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置。有关更灵活的事件绑定，请参阅 .on() 或 .delegate() 中有关事件委托的讨论

# .htaccess - 重写规则以一致地为子域和子目录工作

> ID：15641897
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:20.867
> 
> 标签：.htaccess, mod-rewrite

我有一个很好的规则来将 url 重写为 /meetings，但是当从子目录访问时，该规则不会正确地重写 url。

*编辑：我的 .htaccess 文件位于子目录 /blog*

当我使用此规则时：...

```
RewriteRule ^meetings$ /?page_id=2809 [L] 
```

从子域（*blog.example.com/meetings*）访问时：**blog.example.com/meetings**

从子目录（*example.com/blog/meetings*）访问时：**404错误**

当我使用此规则时：...

```
RewriteRule ^meetings$ http://blog.example.com/?page_id=2809 [L] 
```

从子域（*blog.example.com/meetings*）访问时：**blog.example.com/meetings**

从子目录（*example.com/blog/meetings*）访问时：**blog.example.com/?page_id=2809**

*有没有办法让规则在子域和子目录中始终如一地工作？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:14:56.103

您可以在目录中的一个 .htaccess 文件中尝试此操作`/blog`：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /blog

RewriteCond %{HTTP_HOST}      blog\.example\.com               [NC]
RewriteCond %{QUERY_STRING}   !page_id=                        [NC]
RewriteRule ^meetings         /?page_id=2809                   [L,NC]

RewriteCond %{HTTP_HOST}      ^(www\.)?example\.com            [NC]
RewriteCond %{QUERY_STRING}   !page_id=                        [NC]
RewriteRule ^meetings         /blog/?page_id=2809              [L,NC] 
```

对于永久重定向，将 [L,NC] 替换为 [R=301,L,NC]。

# python - Python：timezone.localize() 不起作用

> ID：15641898
> 
> 赞同：25
> 
> 时间：2013-03-26T16:09:21.183
> 
> 标签：python, datetime, timezone

`timezone.localize()`我在正常工作时遇到了一些问题。我的目标是获取今天的日期并将其从 CST 转换为 EST。然后在吐出之前最后格式化日期时间。我能够正确格式化日期，但日期时间不会从 CST 更改为 EST。此外，当我格式化日期时，我看不到包含时区的文本表示。

下面我列出了我创建的一个简单程序来测试它：

```
#! /usr/bin/python
#Test script

import threading
import datetime
import pexpect
import pxssh
import threading
from pytz import timezone
import pytz

est = timezone('US/Eastern')
curtime = est.localize(datetime.datetime.now().strftime("%a %b %d %H:%M:%S %Z %Y"))
#test time change
#curtime = datetime.datetime.now().strftime("%a %b %d %H:%M:%S %Z %Y")

class ThreadClass(threading.Thread):
  def run(self):
    #now = (datetime.datetime.now() + datetime.timedelta(0, 3600))
    now = (datetime.datetime.now())
    print "%s says Hello World at time: %s" % (self.getName(), curtime)

for i in range(3):
  t = ThreadClass()
  t.start() 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-26T16:16:07.867

`.localize()`接受一个简单的 datetime 对象并将其解释*为就好像*它在那个时区中一样。它不会*将*时间移动到另一个时区。一个天真的 datetime 对象*没有*时区信息可以使移动成为可能。

您想改为`now()`在*本地*时区进行解释，然后用于`.astimezone()`在另一个时区解释日期时间：

```
est = timezone('US/Eastern')
cst = timezone('US/Central')
curtime = cst.localize(datetime.datetime.now())
est_curtime = curtime.astimezone(est).strftime("%a %b %d %H:%M:%S %Z %Y"))

def run(self):
    print "%s says Hello World at time: %s" % (self.getName(), est_curtime) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-26T16:15:26.983

用于`cst.localize`将天真的日期时间转换为可感知时区的日期时间。

然后用于`astimezone`将时区感知日期时间转换为另一个时区。

```
import pytz
import datetime

est = pytz.timezone('US/Eastern')
cst = pytz.timezone('US/Central')
curtime = cst.localize(datetime.datetime.now())
curtime = curtime.astimezone(est) 
```

# select - 在 SQL 中使用 Where 语句

> ID：15641899
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:21.447
> 
> 标签：select, join, where

如果 ingrDesc 是“孜然”，我如何选择 idR 和 recipeTitle 这就是我所拥有的：

*   食谱 =（idR，recipeTitle，prepText，美食类型，餐食类型）
*   成分 = (idI, ingrDesc)
*   RecipIngr = (idR*, idI*)

    ```
    SELECT idR, recipeTitle 
    FROM Recipe
    JOIN Ingredient
    WHERE ingrDesc='cumin' 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:14:05.580

在不知道您的表结构的情况下，任何猜测都会有些随机。这是一个随机的猜测。我猜成分有一个与食谱相关的外键。我将调用该键RecipeId。

```
SELECT idR, recipeTitle 
FROM Recipe r
INNER JOIN Ingredient i
ON r.idR = i.RecipeId
WHERE ingrDesc='cumin' 
```

# android - AutoCompleteTextView 的 Android 自定义布局

> ID：15641900
> 
> 赞同：8
> 
> 时间：2013-03-26T16:09:23.747
> 
> 标签：android, autocompletetextview

我可能在这里遗漏了一些简单的东西，但我有一个**AutoCompleteTextView**包含一些很长的项目。单击一个时，它会在 EditText 中正确显示文本并将其跨越几行。

但是，我也希望它在弹出窗口的多行中，以便用户可以看到他们正在选择的项目。

这是我的自定义布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ellipsize="none"
    android:maxLines="100"
    android:scrollHorizontally="false" /> 
```

这是我对数组和适配器的初始化：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.dropdown_item_wrap_line,
                getResources().getStringArray(R.array.building_descriptions));

mBuildingDesc.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T16:59:59.960

我的猜测是您`AutoCompleteTextView`仅限于`singleLine`，因此使用默认的自定义布局`TextView`应该可以很好地工作。

您将需要创建一个新`Layout`名称并为其命名`custom_item.xml`，然后像这样进行操作...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView 
        android:id="@+id/autoCompleteItem"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textSize="14sp"    
        />

</LinearLayout> 
```

然后在 AutoCompleteTextView 上使用适配器时

```
AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.autocomplete);
ArrayAdapter<String> adapter  = new ArrayAdapter<String>(this, R.layout.custom_item, R.id.autoCompleteItem, StringArray);
textView.setAdapter(adapter); 
```

# html - 为什么我的 Google +1 按钮在多个页面上计数相同

> ID：15641903
> 
> 赞同：1
> 
> 时间：2013-03-26T16:09:33.763
> 
> 标签：html, google-plus, google-plus-one

我不知道为什么，但我网站上的 +1 按钮都显示相同数量的 +1。他们渲染得很好，标签正在工作。这是我放在不同页面上的代码：

```
<g:plusone size="medium" href="http://example.com/" callback="GooglePlusOne"></g:plusone>

<g:plusone size="medium" href="http://example.com/episode2" callback="GooglePlusOne"></g:plusone>

<g:plusone size="medium" href="http://example.com/episode3" callback="GooglePlusOne"></g:plusone> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:38:45.520

该按钮有一个 href 属性，我认为该属性指定了您“+1”的 URL，您可以尝试将其删除，使其默认为规范。

如果未指定，则默认为页面规范链接，然后您应该检查它们与您正在查看的页面是否相同。

还要检查您尝试 +1 的 URL 是否可公开访问（愚蠢地问但值得一提）。

# javascript - 页面加载后获取图片尺寸

> ID：15641907
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:44.813
> 
> 标签：javascript, jquery, html, image, domready

我有一个项目需要获取徽标的尺寸并相应地调整其位置。`$(document).ready`据我了解，页面上的所有元素都应该在`onload`事件发生后立即可用。我还尝试将脚本放在结束正文标记之前，以确保我可以得到所有内容。我使用 jQuery`$(element).width`来`$(element).height`测量徽标图像。

但是，我不是每次都得到这些值：我控制台记录了这两个值。有时，它显示为零，我**猜**图像标签已加载，但实际图像仍在加载。我很困惑，因为我在网上搜索，他们都说如果我使用 DOM 准备好或将脚本标签放在最后，所有元素都应该准备好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:17:30.183

尝试这个

```
$('#img').load(function() {
// Handler for .load() called.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:17:27.127

> 页面上的所有元素都应该在 $(document).ready 或 onload 事件之后立即可用。我还尝试将脚本放在结束正文标记之前，以确保我可以得到所有内容。

不，`$(document).ready`事件响应。将脚本作为最后一个元素嵌入 body 只能保证 DOM 结构已经建立。这并不**意味着**任何元素引用的外部资源已经完成加载——唯一能保证这一点的事件就是`load`事件。

jQuery 文档明确警告关于组合`$(document).ready`和“老派”加载事件处理（意思是 body 或 window.onload 上的 onload 属性）——所以你应该使用它[`.on('load', handler)`](http://api.jquery.com/load-event/)。但是请注意文档还提到的有关图像的警告。

# javascript - 是否有用于定义键盘快捷键的 JavaScript 库？

> ID：15641913
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:51.953
> 
> 标签：javascript, html

我有一个 Javascript 页面，我想在其中添加快捷方式，例如.. for 't' 它会为不同的命令做一些事情和不同的功能。

我可以使用堆栈和事件侦听器来实现这一点。

有没有做同样事情的开源框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:15:04.567

有[`Mousetrap`](http://craig.is/killing/mice)。看看下面的示例代码：

```
Mousetrap.bind('t', function() {
    // do something
}); 
```

它还支持组合：

```
Mousetrap.bind(['command+k', 'ctrl+k'], function(e) {
    // do something
} 
```

# javascript - THREE.js 中的着色器材质和 GL 帧缓冲区

> ID：15641914
> 
> 赞同：1
> 
> 时间：2013-03-26T16:09:54.233
> 
> 标签：javascript, three.js, webgl, shader, fbo

我正在尝试在 THREE.js 的材料中使用 FBO。我有一个基于 GPU 的流体模拟，它将其最终可视化输出到一个帧缓冲区对象，我想用它来纹理网格。这是我的简单片段着色器：

```
varying vec2 vUv;
uniform sampler2D tDiffuse;

void main() {

    gl_FragColor = texture2D( tDiffuse, vUv );

} 
```

然后我尝试使用一个简单的 THREE.ShaderMaterial：

```
var material = new THREE.ShaderMaterial( {

    uniforms: { tDiffuse: { type: "t", value: outputFBO } },
    //other stuff... which shaders to use etc
} ); 
```

但是我的网格只是显示为黑色，尽管控制台没有错误。如果我使用相同的着色器和着色器材质，但将 THREE.ImageUtils.loadTexture("someImageOrOther") 的结果作为统一体提供给着色器，它会正确渲染，所以我认为问题出在我的 FBO 上。有没有一些方便的方法可以在 WebGL 中从 FBO 转换为 Texture2D？

编辑：

经过更多的实验，这似乎不是问题。如果我将 FBO 传递给我编写的仅将纹理输出到屏幕的不同着色器，则它显示得很好。由于照明/法线之类的原因，我的材质是否会显示为黑色？

编辑2：

UV 和法线直接来自三个，所以我认为不可能是这样。部分问题是大多数着色器错误没有被报告，所以我在这方面有困难。如果我能以某种方式映射 WebGLTexture 会让一切变得更容易，也许像这样

```
var newMaterial = new THREE.MeshLambertMaterial({ map : outputFBO.texture }); 
```

但这当然行不通。我还没有找到任何表明 THREE 可以直接从 WebGLTextures 读取的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:28:48.583

通过深入了解 WebGLRenderer 的源代码（查看[https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L6643](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L6643)及之后），您可以尝试创建一个三个js 纹理与虚拟图片，然后`__webglTexture`通过放置您自己的 webgltexture.js 来更改此纹理的数据成员。

此外，您可能需要设置纹理对象`true`的`__webglInit`数据成员，以便不执行初始化代码（因为 then`__webglTexture`被调用覆盖`_gl.createTexture();`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T20:48:15.007

如果您不介意使用 Three.js 数据结构，请按照以下方法操作：

[Three.js 使用 framebuffer 作为纹理](https://stackoverflow.com/questions/21533757/three-js-use-framebuffer-as-texture/21651562#21651562)

# javascript - Ext JS 3.4.0 TreeNode - 所有节点的相同图标

> ID：15641915
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:58.897
> 
> 标签：javascript, extjs3, treenode, treepanel

我在 Ext JS 3.4.0 中有一个 TreePanel。节点通过 JSON 加载。

首先，无论它们是否是叶子，我都需要为所有节点设置相同的图标。所以我不想为有孩子的节点设置“文件夹”图标。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:42:31.883

如果在 JSON 中将所有节点的 .iconCls 属性设置为相同的值，则所有节点都将具有相同的图标

例如：

```
"iconCls": "icon-file",
"expanded": "true",
"children": [
   {
        "iconCls": "icon-file",
        "leaf": "true"
   } 
```

图标文件是您想要的带有图标的 css，例如：

```
.icon-file
{
   background-image: url(../images/silk/grid.png) !important;
} 
```

# c++ - 公共 const 变量或带有 get 函数的私有变量，哪个更可取？

> ID：15641916
> 
> 赞同：0
> 
> 时间：2013-03-26T16:09:59.497
> 
> 标签：c++, object, access-specifier

所以我有一个经常需要在课外调用的变量，有人告诉我应该这样做：

```
class Foo{
    public:
        //stuff
    Type getVariable();
    private:
        Type Variable;
        //stuff
} 
```

但为什么我不能只使用：

```
class Foo{
    public:
        //stuff
    const Type variable
    private:
        //stuff
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:11:16.020

你可以，但不要期望同样的结果。

在第二种情况下，您不能再修改`variable`，甚至在函数内部也不能。

它们是不同的东西。

# ruby-on-rails - ERB：使用条件将类添加到 url_for

> ID：15641917
> 
> 赞同：1
> 
> 时间：2013-03-26T16:10:03.440
> 
> 标签：ruby-on-rails, multilingual

我正在创建一个包含多种语言的炼油厂页面。现在我想添加一个语言切换并且不知道如何执行以下操作：

```
<%= link_to 'DE', url_for( :locale => 'de' ), :class => "selected" %> 
```

选择的应该只有在

```
I18n.locale == 'de' 
```

我可以执行以下操作，但这有点重复，尽管它不起作用，即使很难，我也不知道为什么：

```
I18n.locale == 'de' ? link_to('DE', url_for( :locale => 'de' ), :class => "selected") : link_to('DE', url_for( :locale => 'de' )) 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:12:33.760

```
<%= link_to 'DE', url_for( :locale => 'de' ), :class => "#{ 'selected' if I18n.locale == 'de' }" %> 
```

当它变得更复杂时，抽象它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:23:54.837

哈哈，谢谢，您的回答几乎奏效了，只需将其转换为字符串，因为 I18n.locale 返回一个符号。这就是为什么我的（丑陋的）解决方案不起作用的原因

```
<%= link_to 'DE', url_for( :locale => 'de' ), :class => "#{ 'selected' if I18n.locale.to_s == 'de' }" %> 
```

# jquery - 为什么通过对象枚举会给出未定义？

> ID：15641920
> 
> 赞同：0
> 
> 时间：2013-03-26T16:10:15.753
> 
> 标签：jquery, jstree

当试图枚举数据对象的值时，它的所有属性的值都是未定义的，但是在不枚举的情况下获取值会给出字符串数据的值（工作）......

毫无问题地创建 jstree 节点...

```
 $("#treeFile1").jstree("create", null, "outside", { "attr" : { "rel" : "folder" }}); 
```

监听上面的事件

```
 $("#treeFile1").bind("create.jstree", function(event,data)
 {      
alert(data.args.toSource()); // gives a string output not defined
    alert(data.inst.toSource());

for(var prop in data)
{
     alert("Property name is: "+ prop + "  property value is: "+  data.prop);
         // gives each value as undefined, why is this?
}
     event.stopImmediatePropagation(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:11:22.977

因为您需要使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)而不是[点表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Dot_notation)来使用`prop`'*值*作为访问的属性名称：

```
alert("Property name is: "+ prop + "  property value is: "+  data[prop]); 
```

MDN 的文档提供[了一个可靠的`for...in`示例](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in#Example)。

# javascript - 为什么不从画布传输图像

> ID：15641922
> 
> 赞同：3
> 
> 时间：2013-03-26T16:10:25.723
> 
> 标签：javascript

我正在尝试将图像从**画布**转换为**图像**，可以通过右键单击鼠标来保存。
一切正常，但如果我将图像放在画布上（drawImage），图像不会被传输。
左边的图像是，它是不正确的。
为什么？
我还在沙箱中放了一个例子。[http://jsfiddle.net/qS9qP/](http://jsfiddle.net/qS9qP/)

```
 <body>
    <canvas id="myCanvas" width="200" height="200"></canvas>
    <img src="f2.ico"/>
  </body>
<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

ctx.fillStyle = "rgb(200,0,0)";
ctx.fillRect (10, 10, 55, 50);

var img=new Image();
img.onload = function(){
        ctx.drawImage(img, 10, 10);
   }
img.src="http://www.cisco.com/favicon.ico"
// transfer canvas to image
document.images[0].src=document.getElementById("myCanvas").toDataURL("image/png");

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:28:23.273

@Derek 和 @robertklep 是正确的：

*   调用后绘制图像`toDataURL`；接着
*   `SecurityError: DOM Exception 18`

跨域问题在某种程度上超出了这个问题的范围，但为了证明这一点，这可以按照您的预期工作（通过消除`DOM Exception`）：

[http://jsfiddle.net/c24w/E3SPv/](http://jsfiddle.net/c24w/E3SPv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:17:08.607

`toDataURL`在图片加载之前执行。尝试将其放入 onload 函数中。

[此外，由于Same Origin Policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)，您不能使用来自其他域的图像，它会抛出`SecurityError`：

> 未捕获的错误：SecurityError：DOM 异常 18

现在这将起作用：`**[http://jsfiddle.net/DerekL/qS9qP/2/show/](http://jsfiddle.net/DerekL/qS9qP/2/show/)**`

```
var img = new Image();
img.onload = function () {
    ctx.drawImage(img, 10, 10);
    document.images[0].src = canvas.toDataURL("image/png");    //Put it inside
}
img.src = "http://jsfiddle.net/img/logo.png"                   //Same domain 
```

# r - 删除除最后一个实例之外的所有重复项

> ID：15641924
> 
> 赞同：21
> 
> 时间：2013-03-26T16:10:26.640
> 
> 标签：r, duplicates

因此，我在 R 中有一个数据集，其布局如下：

```
ID Date Tally
1 2/1/2011 1
2 2/1/2011 2
3 2/1/2011 3
1 2/1/2011 4
2 2/1/2011 5
1 2/1/2011 6
3 2/1/2011 7
4 2/1/2011 8
2 2/1/2011 9 
```

我想删除除了帖子 ID 的最后一个实例之外的所有实例。现在我可以在网上找到的所有东西，我正在使用的功能正在删除除第一个实例之外的所有内容。

所以我的新数据框看起来像：

```
ID Date Tally
1 2/1/2011 6
3 2/1/2011 7
4 2/1/2011 8
2 2/1/2011 9 
```

我该怎么做呢？现在我只能保留第一个实例。我希望它做相反的事情？有什么帮助吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T17:00:41.390

这不只是使用“fromLast”参数的标准情况`duplicated`吗？

```
 dat[ !duplicated(dat[, c("ID", "Date")], fromLast=T),]
#---------
  ID     Date Tally
6  1 2/1/2011     6
7  3 2/1/2011     7
8  4 2/1/2011     8
9  2 2/1/2011     9 
```

您的示例不够丰富，无法判断您是否需要重复测试中的“日期”列，因此也许您可以简化。我将其保留以说明`duplicated`具有 data.frame 方法。我更喜欢`!duplicated`这样做，`unique`因为如果您正在比较组，它可以轻松访问设置的补码。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-26T16:15:54.247

用于`!rev(duplicated(rev(ID)))`过滤除最后一个唯一事件之外的所有事件。

要过滤数据集，请使用`dataset[!rev(duplicated(rev(dataset$ID))),]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T22:26:50.687

使用`data.table`连接，您可以设置`mult = 'last'`

例如

```
library(data.table)
DT <- data.table(DF, key = 'id')

# join with the unique ID values
DT[unique(DT[,list(ID)]), mult= 'last']

   ID     Date Tally
1:  1 2/1/2011     6
2:  2 2/1/2011     9
3:  3 2/1/2011     7
4:  4 2/1/2011     8 
```

如果您知道唯一 ID，您还可以执行以下任何操作

```
DT[.(1:4), mult='last']
DT[list(1:4), mult = 'last'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-18T18:10:52.697

使用 dplyr：

```
data <- data %>%
  group_by(ID) %>%
  slice(which.max(Tally)) 
```

# language-agnostic - “空”返回返回什么

> ID：15641927
> 
> 赞同：0
> 
> 时间：2013-03-26T16:10:35.423
> 
> 标签：language-agnostic, return

代码注释中的问题：

```
 function find($id, Application_Model $guestbook)
        {
            $result = $this->getDbTable()->find($id);
            if (0 == count($result)) {
                return;  // what is returned in functions like these?
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:18:30.527

[PHP 文档](http://www.php.net/manual/en/function.return.php)说“如果没有提供参数......将返回 NULL”。所以这：

```
return; 
```

相当于：

```
return null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:18:32.267

它不返回任何东西。也就是说，如果您尝试将该函数的输出分配给一个变量，那么该变量将为`null`.

```
function iDoNothing()
{
    return;
}

$returnValue = iDoNothing();
// $returnValue is now null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:19:30.787

没有参数的 return 语句返回 null。

您可以通过创建一个简短的 php 脚本自己尝试：

```
<?php
  echo emptyReturn();

  function emptyReturn() {
    return;
  }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:31:42.523

它实际上取决于语言。以下是其中一些的列表（“如果省略值，则返回”列）：[http ://en.wikipedia.org/wiki/Return_statement](http://en.wikipedia.org/wiki/Return_statement)

对于 PHP，它只返回`NULL`.

在像 C/C++ 这样的语言中，行为是未定义的。这意味着它可能会返回垃圾信息。这就是为什么像 Java 这样的语言会阻止你这样做。`return;`如果您尝试在非 void 函数中使用，Java 会给您一个编译器错误。

编辑：实际上，维基百科页面并没有太多关于此的信息，所以我添加了一些信息。

# ruby - 是否可以将 OAuth1/2LO 与 Google Drive SDK 一起使用？

> ID：15641930
> 
> 赞同：0
> 
> 时间：2013-03-26T16:10:36.800
> 
> 标签：ruby, google-drive-api

我有一个 Rails 应用程序，该应用程序当前使用 DocsList API，并且拥有大量已获得 OAuth1 授权的用户群。我也非常依赖 2-Legged-OAuth。我知道 Drive SDK 支持使用 OAuth2 ( [https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation) ) 进行域委托，但我想避免使用它有几个原因 1) 我不希望有我的用户重新授权，更重要的是，2) ruby​​ 客户端仍处于 alpha ( [https://code.google.com/p/google-api-ruby-client/](https://code.google.com/p/google-api-ruby-client/) )

我知道日历和联系人 API 将允许您仍然使用 OAuth1 凭据（[https://developers.google.com/google-apps/calendar/auth](https://developers.google.com/google-apps/calendar/auth)）

此外，**我能够使用 DriveSDK 使用 OAuth1 Playground**。我能够调用 - [https://www.googleapis.com/drive/v2/files?fields=etag,items(id,title)](https://www.googleapis.com/drive/v2/files?fields=etag,items(id,title))，在 OAuth1 Playground 中使用 OAuth1 令牌和令牌秘密进行授权。

我想知道是否有办法在 DriveSDK 中指定用户，以便我可以在生产中开始使用它，而无需使用仍处于 alpha 阶段的客户端。

如果有人有任何见解，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T22:12:14.073

可以使用带有 2LO 的 OAuth1 来访问 Drive API。[这样做的方法与日历身份验证页面 ( https://developers.google.com/google-apps/calendar/auth](https://developers.google.com/google-apps/calendar/auth) ) 中描述的完全相同。

ruby google 客户端和使用常规的 signet 客户端都可以。

# asp.net-mvc-4 - Durandaljs：如何过滤 ko.observablearray

> ID：15641935
> 
> 赞同：0
> 
> 时间：2013-03-26T16:10:38.893
> 
> 标签：asp.net-mvc-4, single-page-application, durandal

我是 durundaljs 的新手

我想知道如何过滤 ko.observablearray

> define(['services/logger', 'data/data', 'functions/func'], function (logger, data, func) { var vm = { list: ko.observableArray([]) }; return vm; } );

我想过滤列表中的项目并将其显示在表格中

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T16:51:26.817

Knockout 具有未记录的实用功能，但它们存在于库中以帮助过滤数组。

以下是处理数组的所有实用方法的完整列表：

```
ko.utils.arrayFilter
ko.utils.arrayFirst
ko.utils.arrayForEach
ko.utils.arrayIndexOf
ko.utils.arrayMap
ko.utils.arrayPushAll
ko.utils.arrayRemoveItem
ko.utils.compareArrays
ko.utils.unwrapObservable 
```

Ryan Niemeyer 写了一篇关于如何使用其中一些的不错的[博客文章。](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)

* * *

# 方法一

这是一个快速入门的示例：

```
var newList = ko.utils.arrayFilter(list(), function(item) {
   return item.price > 10;
}); 
```

这将创建一个`newList`价格超过 10 的项目。然后您可以通过将新列表传递给当前列表来更改当前列表：

```
list(newList); 
```

* * *

# 方法二

另一种选择是找到要删除的项目。假设您要删除价格超过 10 的所有商品：

```
var rList = ko.utils.arrayFilter(list(), function(item) {
   return item.price > 10;
}); 
```

接下来你可以调用：

```
list.removeAll(rList); 
```

* * *

# 方法三

正如他们所说，比喻给猫剥皮的方法不止一种：

```
list.remove(function(item) { return item.price > 10 }); 
```

* * *

# 你有它..

我敢肯定还有更多的方法可以做到。如果您需要一些更高级的过滤数组的方法，我建议您查看[underscore.js](http://underscorejs.org/)

# git - Git 工作流、Nvie 分支模型前后

> ID：15641937
> 
> 赞同：1
> 
> 时间：2013-03-26T16:10:45.880
> 
> 标签：git, github, git-merge, git-workflow

遵循 Nvie 的 git 分支模型，为什么在将相同的 'release' 分支合并到两者之后，我最终会得到 'develop' 和 'master' 前 1 和后 1？如果将相同的“发布”分支合并到每个分支中，那么 master 和 development 不应该同意吗？

```
x   84a628d      (origin/develop, develop) Merge branch 'release-v3.0.1' into develop
|\  
| | x   2e4d60b  (HEAD, v3.0.1, origin/master, master) Merge branch 'release-v3.0.1'
| | |\  
| | |/  
| |/|   
| x | 716ce96    (release-v3.0.1) Version 3.0.1
|/ /  
x | fe3b54d      Some more more code
x | 3683892      Some more code
x | 8c0b835      'develop' branch code
|/  
x   d051b54      (v3.0) Baseline merge. Merge remote-tracking branch 'origin/master' 
```

$ git log origin/master ^origin/develop

```
commit 2e4d60b7d6760b4f6b2328ab06150b020b0d279f
Merge: d051b54 716ce96
Author: Todd 
Date:   Tue Mar 26 11:27:59 2013 -0400

Merge branch 'release-v3.0.1' 
```

$ git log origin/develop ^origin/master

```
commit 84a628d96653ed196faa6387c8b208badf23aa75
Merge: fe3b54d 716ce96
Author: Todd 
Date:   Tue Mar 26 11:31:53 2013 -0400

Merge branch 'release-v3.0.1' into develop 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:30:09.943

```
git log origin/master ^origin/develop 
```

此命令显示所有可访问`origin/master`但不可访问的提交`origin/develop`

```
git log origin/develop ^origin/master 
```

此命令显示所有可访问`origin/develop`但不可访问的提交`origin/master`

上述两个命令的输出似乎与您显示的图表一致。

如果您打算找出 2 个分支内容的差异，则应该使用该`git diff`命令。

```
git diff origin/master..origin/develop 
```

如果您只想要不同的文件列表，您可以使用以下`--name-status`选项：

```
git diff --name-status origin/master..origin/develop 
```

在 git 中，提交的 SHA1 是根据父提交的 SHA1、提交消息、时间戳和许多其他此类信息计算的。尽管您已将相同的`release-v3.0.1`分支合并到两者`master`中`develop`，但您已经在 2 个不同的时刻将其作为 2 个独立的合并完成。这显然不会为两者产生相同的提交 SHA1。

你应该做的是以下之一：

**选项1：**

```
git checkout master:
git merge release-v3.0.1

git checkout develop:
git merge master

git checkout master
# This would be a fast-forward merge
git merge develop 
```

**选项 2：**

```
git checkout develop:
git merge release-v3.0.1

git checkout master:
git merge develop

git checkout develop
# This would be a fast-forward merge)
git merge master 
```

这样，您最终会得到两个`master`和`develop`分支都指向同一个提交。

即使现在，您也可以通过合并或相反的方式进入相同的状态`master`，`develop`并在另一个分支上进行快进合并。

```
git checkout master
git merge develop

git checkout develop
# This would be a fast-forward merge
git merge master 
```

# razor - 基于 DTO 类型的 Razor Markdown 不使用 _Layout.cshtml

> ID：15641938
> 
> 赞同：1
> 
> 时间：2013-03-26T16:10:46.317
> 
> 标签：razor, markdown, servicestack

我正在使用 ServiceStack Markdown Razor 来呈现 DTO，但它没有使用 _Layout.cshtml。我遵循约定，其中 Markdown 文件的名称与响应类型相同。

我的源代码树如下所示：

```
Services/
    ExampleService.cs
Transfer/
    Example.cs
Views/
    Shared/
        _Layout.cshtml
    Example.md 
```

**示例服务.cs**

```
public class ExampleService : IService
{
    public Example Get(ExampleRequest request)
    {
        return new Example { Greeting = "Hello, MD!" };
    }
} 
```

因此，如果我访问，`.../html/reply/ExampleRequest`我会看到呈现的 Markdown 可以访问`@Model`. 但是，它不使用可用的 _Layout.cshtml（即使我将它移动到同一目录）。

这支持吗？如果是这样，它是如何配置的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:43:44.463

**自动使用最近的_Layout.cshtml**

我不知道这是否不再受支持。看来 /Views/Shared/_Layout.shtml 是用作默认模板的文件。定义布局/模板页面的另一个选项是使用上面提到的@Layout 或@template 语法。

**不支持@RenderBody()，**

正确的。这是故意的，如此[处所述](https://github.com/ServiceStack/ServiceStack/wiki/Markdown-Razor#layoutmasterpage-scenarios---the-basics)

*而不是使用像@RenderBody() 这样的魔术方法，我们将输出视图的主体视为另一个变量，将输出a 存储在一个名为“主体”的变量中。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:34:12.717

在 Markdown 文件的顶部包含一个**@Layout**指令。

此外，在 _Layout.cshtml 文件中使用`<!--@Body-->`而不是`@RenderBody()`. 这在下面显示并在“布局/MasterPage 场景 - 基础”部分下的[Markdown 功能页面上进行了描述。](http://www.servicestack.net/docs/markdown/markdown-razor)

**例子.md**

```
@Layout Views/Shared/_Layout.cshtml

## @Model.Greeting
It is the year @DateTime.Now.Year 
```

**_Layout.cshtml**

```
<!doctype html>
<html lang="en-us">
<head>
    <title>Markdown Razor Example</title>
</head>
<body>
    <!--@Body-->
</body>
</html> 
```

* * *

**社论**

也就是说，这种方法是不可取的，因为它偏离了[RazorRockstars](https://github.com/ServiceStack/RazorRockstars)示例中使用的两个相关约定：

1.  自动使用最近的_Layout.cshtml
2.  不支持@RenderBody()，在尝试提前编译_Layout.cshtml 时使用@Body 会导致启动错误。

# android - 将媒体播放器合并为 1

> ID：15641939
> 
> 赞同：0
> 
> 时间：2013-03-26T16:10:46.397
> 
> 标签：android

在我的应用程序中，我有 16 个媒体播放器，我有 1 个媒体播放器的均衡器，但我想一次将它用于所有 16 个媒体播放器。这是我的均衡器代码

```
private void setupEqualizerFxAndUI() {

        mEqualizer = new Equalizer(0, mMediaPlayer.getAudioSessionId());
        mEqualizer.setEnabled(true);

        short bands = mEqualizer.getNumberOfBands();

        final short minEQLevel = mEqualizer.getBandLevelRange()[0];
        final short maxEQLevel = mEqualizer.getBandLevelRange()[1];

        for (short i = 0; i < bands; i++) {
            final short band = i; 
```

如您所见，它正在使用 mMediaPlayer.getAudioSessionId，这只是 16 个媒体播放器之一，这些是我的媒体播放器。我应该设置更多均衡器还是有办法将媒体播放器合并到一个？

```
 MediaPlayer mMediaPlayer;
MediaPlayer mMediaPlayer1;
MediaPlayer mMediaPlayer2;
MediaPlayer mMediaPlayer3;
MediaPlayer mMediaPlayer4;
MediaPlayer mMediaPlayer5;
MediaPlayer mMediaPlayer6;
MediaPlayer mMediaPlayer7;
MediaPlayer mMediaPlayer8;
MediaPlayer mMediaPlayer9;
MediaPlayer mMediaPlayer10;
MediaPlayer mMediaPlayer11;
MediaPlayer mMediaPlayer12;
MediaPlayer mMediaPlayer13;
MediaPlayer mMediaPlayer14;
MediaPlayer mMediaPlayer15; 
```

# templates - AngularJS - 指令和模板之间的区别

> ID：15641940
> 
> 赞同：2
> 
> 时间：2013-03-26T16:10:46.973
> 
> 标签：templates, angularjs, directive

任何人都可以解释 angularjs 中指令和模板之间的区别吗？

我知道指令可以例如自定义标签。但模板也是标签。那么指令标签和模板标签有什么区别呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T15:08:13.187

指令只是定义特定于您的应用程序的新类型 html 元素的一种方式。正如一些 angularjs 负责人所说，这是一种教授 html 新技巧的方法。另一方面，模板是可注入的 HTML 代码片段，可以充当指令和视图的 UI。

指令可用于创建自包含网页组件/小部件，方法是为其提供描述小部件 UI 外观的模板。

这个 [教程](http://www.ng-newsletter.com/posts/directives.html)真的为我简化了一些事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:41:43.843

模板是一块 HTML，指令是一个“小部件”（一个自包含的功能模块），可能包括 UI，可以添加到页面或模板中。

它非常递归，因为指令可以包含模板，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:37:03.393

模板不是自定义标签。指令被调用（通过自定义属性、类或作为自定义元素）并包含用于与 DOM 交互的代码，并且可能包括模板。模板是 HTML 字符串或包含 HTML 的文件。

# sql - 逐行检查值

> ID：15641941
> 
> 赞同：3
> 
> 时间：2013-03-26T16:10:48.613
> 
> 标签：sql, sql-server-2005

我有 2 个这样的表：

表格1：

```
CatID  Name
-----  ----
1      A
2      B
3      C 
```

表 2：

```
ID   CatID
---  -----
1    1
2    1
3    1
4    3 
```

表二 CatID 与表一 CatID 相同。

我想要一个查询，它显示第一个表和一个附加列，如果 CatID 存在于第二个表中，则为 True，否则为 False。上表的输出应该是：

```
CatID  Name  Result
-----  ----  ------
1      A     True
2      B     False
3      C     True 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:13:29.890

您可以使用`CASE`和`EXISTS`：

```
SELECT CatID,
       Name,
       Result = CASE WHEN EXISTS(SELECT 1 
                                 FROM Table2 t2 
                                 WHERE t2.CatID=t1.CatId)
                THEN 'True' ELSE 'False' END
FROM Table1 t1 
```

[**演示**](http://sqlfiddle.com/#!3/151df/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:20:48.293

[SQL 小提琴演示](http://sqlfiddle.com/#!3/de4a6/2)

```
 select distinct A.CARDID, NAME, CASE WHEN ISNULL(B.CARDID, 0)=0 THEN 'FALSE'
                            ELSE 'TRUE' END
FROM table1 A
LEFT JOIN table2 B
on A.CARDID = B.CARDID 
```

# php - 在 Yii 中更新查询

> ID：15641947
> 
> 赞同：8
> 
> 时间：2013-03-26T16:11:08.943
> 
> 标签：php, mysql, yii, sql-update

我有一个要求`Yii`，我必须根据某些条件更新一张表。我必须用`new_val = previous_value + new_val`. 但是代码没有按预期工作。

我试过的代码是

```
$update = Yii::app()->db->createCommand()
->update('tbl_post', array('star'=>('star' + 1),'total'=>('total' + $ratingAjax)),
'id=:id',array(':id'=>$post_id)); 
```

在正常查询中，查询将是

```
UPDATE tbl_post set star= star + 1,total = total + '$ratingAjax' where id = 1 
```

有谁知道错在哪里？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T00:34:30.473

尝试以下操作：

```
$update = Yii::app()->db->createCommand()
    ->update('tbl_post', 
        array(
            'star'=>new CDbExpression('star + 1'),
            'total'=>new CDbExpression('total + :ratingAjax', array(':ratingAjax'=>$ratingAjax))
        ),
        'id=:id',
        array(':id'=>$post_id)
    ); 
```

使用`CDbExpression`将允许您发送一个表达式来更新列值。

见：[http ://www.yiiframework.com/doc/api/1.1/CDbCommand#update-detail](http://www.yiiframework.com/doc/api/1.1/CDbCommand#update-detail)

和：[http:](http://www.yiiframework.com/doc/api/1.1/CDbExpression#) //www.yiiframework.com/doc/api/1.1/CDbExpression# __construct-detail

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:13:38.690

你使用字符串，试试这个：

```
$update = Yii::app()->db->createCommand()
->update('tbl_post', array('star'=>'star + 1','total'=> 'total + '.$ratingAjax),
'id=:id',array(':id'=>$post_id)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T10:41:21.380

这应该做的工作：

```
 Post::model()->updateCounters(
        array('star'=>1),
        array('total'=>$ratingAjax),
        array('condition' => "id = :id"),
        array(':id' => $post_id),
    ); 
```

它会增加，而不是设置值

# python - Python - 使用 NetworkX 对图形数据进行逻辑测试

> ID：15641952
> 
> 赞同：2
> 
> 时间：2013-03-26T16:11:17.617
> 
> 标签：python, graph, networkx

我想解析大量有向图数据并对其执行一些逻辑测试。数据如下：

```
Source,Target,DateTime

a,b,201212100401
a,d,201212100403
b,e,201212100511
b,c,201212100518
e,f,201212100610
c,a,201212100720 
```

数据时间戳为 YYYYMMDDhhmm ...

我有一些我正在寻找的逻辑，例如 find: Instances where A and C talk but not before (A and B) the (B and C). 所以打印出来是这样的：

```
Time 1| Time 2| Time 3
a,b,201212100401| b,c,201212100518| c,a,201212100720 
```

我假设我可以将这些视为 networkx 对象：

```
import networkx as nx
import sys

G = nx.DiGraph()

for line in (open(sys.argv[1])):
    n1, n2, t1 = line.split(',')
    G.add_edge(n1, n2, time=t1) 
```

现在数据存储在 G 中，我不确定如何查询 A,B 然后 B,C 然后 C,A 关系。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:36:47.053

这是一种方法：

```
import networkx as nx

data = '''a,b,201212100401
a,d,201212100403
b,e,201212100511
b,c,201212100518
e,f,201212100610
c,a,201212100720'''.split('\n')

G = nx.DiGraph()
for line in data:
    n1, n2, t1 = line.split(',')
    G.add_edge(n1, n2, time=t1)

def check_sequence(list_of_edges):
    times = []
    # First check if all the edges are in the graph
    # and collect their times in a list
    for e in list_of_edges:
        if e in G.edges():
            times.append(G[e[0]][e[1]]['time'])
        else:
            return "Edge {} not in the graph.".format(str(e))
    # Next check if each successive time in the list 
    # is greater than the previous time
    start = times[0]
    for time in times[1:]:
        if time > start:
            start = time
        else:
            return 'Edges not in sequence: {}'.format(str(times))
    # If we have not returned up to now, then we are in sequence
    return 'Edges are in sequence: {}'.format(str(times))

print check_sequence( [('a', 'e'), ('e', 'f'), ('a', 'f') ] )
# Edge ('a', 'e') not in the graph.
print check_sequence( [('a', 'b'), ('b', 'c'), ('c', 'a') ] )
# Edges are in sequence: ['201212100401', '201212100518', '201212100720']
print check_sequence( [('c', 'a'), ('a', 'b'), ('b', 'c') ] )
# Edges not in sequence: ['201212100720', '201212100401', '201212100518'] 
```

# java - 如何将参数传递给线程

> ID：15641960
> 
> 赞同：4
> 
> 时间：2013-03-26T16:11:35.430
> 
> 标签：java, android, multithreading, arguments

假设我想传递以下变量

```
String foo = "hello world"; 
```

作为以下线程的参数

```
new Thread(new Runnable() {

    @Override
    public void run() {
        // SOME CODE HERE REQUIRES VARIABLE
    }
}).start(); 
```

有人可以解释一下如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:14:29.130

子类线程：

```
public class MyThread extends Thread {

   private String arg;

   public MyThread(String arg) {
      this.arg = arg;
   }

   @Override
   public void run() {
        // Use your variable
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:15:04.827

声明为的局部变量*`final`*将在线程中可见：

```
void doSomething(final String foo) {
  new Thread(new Runnable() {
      @Override
      public void run() {
        // SOME CODE HERE REQUIRES VARIABLE
        System.out.println(foo);
      }
  }).start();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T16:13:14.360

> 有人可以解释一下如何做到这一点。

所以你的问题有更多的解决方案，但从一开始就很好。我建议您创建自己的子类`Thread`并通过其**构造函数**传递参数。

```
public class MyThread extends Thread {

    public MyThread(String value) {

    }
} 
```

或者您也可以使用`Runnable`界面。

```
public class MyThread implements Runnable { ... } 
```

## 更新：

或者像@erickson 指出的那样，您可以将代码包装到方法体中，但作为方法的参数，您必须传递 final 变量，因为您不能引用在不同方法中定义的内部类中的非 final 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:15:45.857

您不能使用 Java 中的匿名类传递参数。您可以做的是创建一个单独的类并将其作为实例变量传递

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:15:53.150

```
String foo = "hello world";
final String parameter = foo;
new Thread(new Runnable() {

    @Override
    public void run() {
         //Use parameter
    }
}).start(); 
```

# ruby - Sinatra Net::HTTP 导致简单请求超时

> ID：15641970
> 
> 赞同：1
> 
> 时间：2013-03-26T16:11:58.570
> 
> 标签：ruby, post, sinatra

`Net::HTTP`我对我的 Sinatra 应用程序有一个简单的POST 请求：

```
def collect(website)
    uri = URI("http://localhost:9393/save/#{website}")
    res = Net::HTTP.post_form(uri, 'q' => 'ruby', 'max' => '50')
    puts res.body
end 
```

但这会导致超时。这是请求处理程序：

```
post '/save/:website' do |website|
    puts request.body
    "done"
end 
```

我从来没有到达`puts`也没有`done`。我的`shotgun`服务器当然在端口 9393 上运行。当我使用 REST 控制台扩展并在其中粘贴有效的 json 时，它适用于相同的路径。

是什么导致了这个 Timeout::Error？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:17:36.513

所以奇怪的是，我把我的服务器从简单地用gem`shotgun`运行它。我使用它是因为它会在源文件更改时自动重新加载，而它本身没有。`sinatra``sinatra/reloader``shotgun``sinatra`

放弃后`shotgun`，它立即起作用。

# apache - 在 Apache 中设置通用图像文件扩展名

> ID：15641974
> 
> 赞同：0
> 
> 时间：2013-03-26T16:12:03.227
> 
> 标签：apache, mod-rewrite

我正在尝试使用 mod_rewrite根据给定文件名的可用内容（没有外部重定向）来`.img`提供服务`png`或文件。`jpg`

这是我正在尝试的：

```
RewriteCond %{REQUEST_URI} !.*\.img [OR]
RewriteCond /var/www/html%{REQUEST_URI} -f
RewriteRule ^ - [S=3]

RewriteRule ^/?(.*)\.img$ /$1

RewriteCond %{REQUEST_FILENAME}.png -f
RewriteRule ^ $0.png [S=1,T=image/png]

RewriteCond %{REQUEST_FILENAME}.jpg -f
RewriteRule ^ $0.jpg [T=image/jpeg] 
```

第一位似乎工作正常（它将`.img`文件重定向为没有扩展名），但后来的检查永远不会运行。我不清楚 mod_rewrite 的实际工作原理，但我认为这是因为请求通过重命名重新启动，并且因为它不再具有`.img`扩展名，所以第一条规则启动并阻止其他规则运行。但我不知道如何避免这种情况。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:38:31.667

我想到了。我的原始代码非常接近；这是固定版本：

更新：这是一个正确显示 404 错误的版本（下面的版本会将 mysite.com/mydirectory.img 重定向到目录，这是奇怪的行为）

```
RewriteCond %{REQUEST_URI} !.*\.img [OR]
RewriteCond /var/www/html%{REQUEST_URI} -f
RewriteRule ^ - [S=4]

RewriteRule ^/?(.*)\.img$ /$1

RewriteCond /var/www/html%{REQUEST_FILENAME}.png -f
RewriteRule ^ /var/www/html%{REQUEST_FILENAME}.png [L,S=2,T=image/png]

RewriteCond /var/www/html%{REQUEST_FILENAME}.jpg -f
RewriteRule ^ /var/www/html%{REQUEST_FILENAME}.jpg [L,S=1,T=image/jpeg]

RewriteRule ^ - [R=404] 
```

原始解决方案（无 404 检查）：

```
RewriteCond %{REQUEST_URI} !.*\.img [OR]
RewriteCond /var/www/html%{REQUEST_URI} -f
RewriteRule ^ - [S=3]

RewriteRule ^/?(.*)\.img$ /$1

RewriteCond /var/www/html%{REQUEST_FILENAME}.png -f
RewriteRule ^ /var/www/html%{REQUEST_FILENAME}.png [S=1,T=image/png]

RewriteCond /var/www/html%{REQUEST_FILENAME}.jpg -f
RewriteRule ^ /var/www/html%{REQUEST_FILENAME}.jpg [T=image/jpeg] 
```

需要注意的是：

*   我将根文件夹添加到文件检查中；似乎`${REQUEST_FILENAME}` *开始*简单地设置为`%{REQUEST_URI}`，虽然第一次重写没有改变`%{REQUEST_URI}`，但它*确实*改变`${REQUEST_FILENAME}`了，但将其保留为 URI 形式。
*   我`$0`改为`%{REQUEST_FILENAME}`. 我不确定`$0`设置为什么（可能是带有`^`正则表达式的空字符串），但在我更改它之前它会导致 403 Forbidden 错误。

万一它对其他人有帮助，我用这一行调试了它：

```
RewriteRule ^ /debug?u=%{REQUEST_URI}&f=%{REQUEST_FILENAME} [R] 
```

它以查询字符串的形式将变量发送到浏览器。

所以它有效。我仍然不知道 mod_rewrite 是如何决定哪些规则在什么时间和什么输入下运行的，尽管我写了很多这些东西并阅读了大部分文档……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:36:23.040

你可以试试这个：

```
RewriteCond %{REQUEST_FILENAME} /(.*)\.img$
RewriteCond /%1.png -f
RewriteRule ^ /%1.png

RewriteCond %{REQUEST_FILENAME} /(.*)\.img$
RewriteCond /%1.jpg -f
RewriteRule ^ /%1.jpg 
```

如果这可行，那么每个请求只需要一次重写。

# php - 用php确定百分比

> ID：15641975
> 
> 赞同：0
> 
> 时间：2013-03-26T16:12:04.980
> 
> 标签：php, mysql, percentage

我正在尝试确定第一次尝试或第二次尝试通过测试的学生人数的百分比。我相信我的代码是正确的，但是当我回显结果时，我没有得到任何输出。

```
<?php
$NREMT1 = "SELECT nremtcognitive FROM course_students WHERE nremtcognitive = '1' ";
$NREMT2 = "SELECT nremtcognitive FROM course_students WHERE nremtcognitive >= '2' ";
$completed = "SELECT studentstatus FROM course_students WHERE studentstatus >='4'";

$getNREMT1 = mysql_query($NREMT1);
$fetchNREMT1= mysql_num_rows($getNREMT1);
$getNREMT2 = mysql_query($NREMT2);
$fetchNREMT2= mysql_num_rows($getNREMT2);
$getcompleted = mysql_query($completed);
$fetchcompleted= mysql_num_rows($getcompleted);

function percent($fetchNREMT1, $fetchNREMT2, $fetchcompleted) {
    $NREMT1count= $fetchNREMT1/$fetchcompleted;
    $NREMT1percent= $NREMT1count * 100;
    $NREMT1result = number_format($NREMT1percent,0);

    $NREMT2count= $fetchNREMT2/$fetchcompleted;
    $NREMT2percent= $NREMT2count * 100;
    $NREMT2result = number_format($NREMT2percent,0);
}
echo $NREMT1result;
echo $NREMT2result;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:14:59.833

你没有在`percent`任何地方调用你的函数。

你应该调用它**并让它返回一些东西**，否则就可以避免创建它并将相同的代码放在同一个地方：

```
 $NREMT1count= $fetchNREMT1/$fetchcompleted;
 $NREMT1percent= $NREMT1count * 100;
 $NREMT1result = number_format($NREMT1percent,0);

 $NREMT2count= $fetchNREMT2/$fetchcompleted;
 $NREMT2percent= $NREMT2count * 100;
 $NREMT2result = number_format($NREMT2percent,0);

 echo $NREMT1result;
 echo $NREMT2result; 
```

**看来你对function**的概念不是很清楚。你可以看看[文档](http://php.net/manual/en/language.functions.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:18:04.027

只需更改您的查询。未经测试，但这应该让你开始：

```
SELECT 
    SUM(IF(CONVERT(nremtcognitive, UNSIGNED INTEGER) >= 2)) / COUNT(*) 
FROM course_students; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:16:16.460

您的问题是内部声明的变量`percent()`从未被初始化，因为该函数从未被调用。尝试这个：

```
<?php
$NREMT1 = "SELECT nremtcognitive FROM course_students WHERE nremtcognitive = '1' ";
$NREMT2 = "SELECT nremtcognitive FROM course_students WHERE nremtcognitive >= '2' ";
$completed = "SELECT studentstatus FROM course_students WHERE studentstatus >='4'";

$getNREMT1 = mysql_query($NREMT1);
$fetchNREMT1= mysql_num_rows($getNREMT1);
$getNREMT2 = mysql_query($NREMT2);
$fetchNREMT2= mysql_num_rows($getNREMT2);
$getcompleted = mysql_query($completed);
$fetchcompleted= mysql_num_rows($getcompleted);

percent($fetchNREMT1, $fetchNREMT2, $fetchcompleted);

function percent($fetchNREMT1, $fetchNREMT2, $fetchcompleted) {
    $NREMT1count= $fetchNREMT1/$fetchcompleted;
    $NREMT1percent= $NREMT1count * 100;
    $NREMT1result = number_format($NREMT1percent,0);

    $NREMT2count= $fetchNREMT2/$fetchcompleted;
    $NREMT2percent= $NREMT2count * 100;
    $NREMT2result = number_format($NREMT2percent,0);

    echo $NREMT1result;
    echo $NREMT2result;
}
?> 
```

还值得注意的是，`mysql_*`现在不推荐使用该函数系列，您应该真正考虑使用 MySQLi 或 PDO。

# tfs - 安装后更改 TFS 2012 的语言

> ID：15641976
> 
> 赞同：1
> 
> 时间：2013-03-26T16:12:05.383
> 
> 标签：tfs

我刚刚安装了英文版的新 Team Foundation Server 2012。是否可以切换到另一种语言？

我需要它来更改服务器使用的流程模板的语言。也许可以只更新它们并以英语保留服务器？

我有点害怕在这台机器上运行升级，因为我不知道升级是否也意味着 TFS 2012 EN -> TFS 2012 OTHER。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:05:38.270

我决定冒险，我做了以下事情：

1.  完全卸载 TFS 2012 German。
2.  从 TFS 2012 German Image 开始设置
3.  首次安装完成时选择“升级”-选项。
4.  安装后不要忘记重新配置诸如构建之类的东西。

对于那些认为：“为什么......？”的人：我安装了英文版并认识到我无法使用一些转换工具。例如，如果您尝试将“我的工作”联机，当您切换语言时它会抱怨。这就是为什么这对我如此重要。

毕竟我的仪表板上出现了一些奇怪的错误。我发现由于一些翻译问题，无法重建 OLAP-Cube。解决方案是：

1.  使用 SQL Server Management Studio 并登录到 Analysis Services 模块。
2.  扩展数据库节点并删除 Tfs_Analysis 数据库。
3.  从开始菜单打开 TFS 管理控制台。
4.  转到应用程序层 -> 报告，然后单击右侧窗格中的“编辑”。
5.  转到第二个选项卡“分析”并重新输入所有信息，使数据库名称保持原样。
6.  单击“确定”。在 SQL Management Studio 中，您应该会看到重新创建的 Tfs_Analysis 数据库。
7.  返回 TFS 管理控制台并单击右侧窗格中的“重新创建”。
8.  转到 SQL Management Studio，展开 Nodes Tfs_Analysis -> Cubes 并右键单击“Team System”-节点。
9.  点击第三个选项（我不知道英文名称，但应该类似于“Process”。如果没有显示错误，您的多维数据集现在应该可以工作了。

# android - 将范围检查添加到 EditText

> ID：15641979
> 
> 赞同：1
> 
> 时间：2013-03-26T16:12:37.207
> 
> 标签：android, filter, textview

我试图确保输入的值在 0 到 100 之间。

所以我设置了我的过滤器：

```
myTextView.setFilters(new InputFilter[]{ new InputFilterMinMax(0,100) }); 
```

基于来自教程网站的代码。

但是，它没有**考虑**到您可以在该字段的任何位置键入。

Aka 我可以输入**90.9** 然后返回并**在前面添加 1**使其成为**190.9** ...它假设数字是**90.91**。

我认为`end` `start`,`dend`和`dstart`与确定新字符串的外观有关。

有没有人有这方面的经验可以帮忙。

```
import android.text.InputFilter;
import android.text.Spanned;

public class InputFilterMinMax implements InputFilter {

    private int min, max;

    public InputFilterMinMax(int min, int max) {
        this.min = min;
        this.max = max;
    }

    public InputFilterMinMax(String min, String max) {
        this.min = Integer.parseInt(min);
        this.max = Integer.parseInt(max);
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {   
        try {
            Double input = Double.parseDouble(dest.toString() + source.toString());
            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) { }     
        return "";
    }

    private boolean isInRange(int a, int b, Double c) {
        return b > a ? c >= a && c <= b : c >= b && c <= a;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:22:53.797

在玩了一下调试器和 end ， start 等的值之后

我想出了这个：

```
@Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {   
        try {
            String newString = dest.toString().substring(0, dstart) + source.toString().substring(start, end) + dest.toString().substring(dend);

            Double input;
            // If we only have one char and it is a minus sign, test against -1:
            if (newString.length() == 1 && newString.charAt(0) == '-')
                input = -1d;
            else
                input = Double.parseDouble(newString);

            if (isInRange(min, max, input))
                return null;
        } catch (NumberFormatException nfe) { }     
        return "";
    } 
```

这对先前的和新的源进行了子串化。在正确的位置删除或添加文本，以生成文本预览 ( `newString`)。然后继续正常检查。

这适用于一次性删除整个内容，或复制粘贴新文本。它确定它之前是什么旧文本，插入的文本，然后是它之后的文本。

# r - 根据现有列中的值向矩阵添加多列

> ID：15641983
> 
> 赞同：0
> 
> 时间：2013-03-26T16:12:50.113
> 
> 标签：r

我正在寻找一种基于现有列中的值将 3 个不同列中的 3 个值添加到矩阵的方法。

```
experiment = rbind(1,1,1,2,2,2,3,3,3)
newColumns = matrix(NA,dim(experiment)[1],3) # make 3 columns of length experiment filled with NA
experiment = cbind(experiment,newColumns) # add new columns to the experimental data
experiment = data.frame(experiment)    
experiment[experiment[,1]==1,2:4] = cbind(0,1,2) # add 3 columns at once
experiment$new[experiment[,1]==2] = 5 # add a single column
print(experiment)

  X1 X2 X3 X4 new
1  1  0  0  0  NA
2  1  1  1  1  NA
3  1  2  2  2  NA
4  2 NA NA NA   5
5  2 NA NA NA   5
6  2 NA NA NA   5
7  3 NA NA NA  NA
8  3 NA NA NA  NA
9  3 NA NA NA  NA 
```

但是，这会以错误的方式填充新列。我希望第 2 列全为 0，第 3 列全为 1，第 4 列全为 3。

我知道我可以一次完成 1 列，但我的真实数据集很大，所以这不是我的首选解决方案。我希望能够通过使列范围更大并将值添加到示例中的 3 个值来轻松添加更多列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:22:12.377

而不是这个：

```
experiment[experiment[,1]==1,2:4] = cbind(0,1,2) # add 3 columns at once 
```

尝试这个：

```
experiment[experiment[,1] == 1, 2:4] <- rep(c(0:2), each=3) 
```

问题是您提供了 3 个值 (0,1,2) 来填充 9 个条目。默认情况下，这些值是按*列*填充的。因此，第一列用 0、1、2 填充，然后这些值*被回收*。所以，它又是 0,1,2 和 0,1,2。既然你想要`0,0,0,1,1,1,2,2,2`，你应该显式地生成 using `rep(0:2, each=3)`（`each`生成上面显示的数据的任务）。

# php - 我可以在另一个 MySQL 查询的 From 部分中使用上一个 MySQL 查询的结果吗？

> ID：15641985
> 
> 赞同：2
> 
> 时间：2013-03-26T16:12:52.950
> 
> 标签：php, mysql

我正在使用一个 PHP 网络服务，我在其中执行了一个简单的 SELECT 查询并将其存储

```
$result = run_query($get_query); 
```

我现在需要根据不同的参数对数据进行进一步的查询，我知道这可以通过 MySQL 的形式：

```
SELECT * 
FROM (SELECT *
      FROM customers
      WHERE CompanyName > 'g')
WHERE ContactName < 'g' 
```

我知道这会在表上执行两个 Select 查询。但是，我想知道的是，我是否可以简单地在第二部分的 FROM 部分中使用我以前保存的查询，例如这样，并且我认为它通过不再次查询整个数据库来提高性能的信念是正确的：

```
SELECT * 
FROM ($result)
WHERE ContactName < 'g' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:26:34.113

PHP 和 SQL 是不同的语言和非常不同的平台。它们通常甚至不在同一台计算机上运行。您的 PHP 变量根本不会与 MySQL 服务器交互。您使用 PHP 创建一个恰好包含 SQL 代码的字符串，仅此而已。最后，唯一重要的是你发送到服务器的 SQL 代码——你如何设法生成它是无关紧要的。

此外，除非您获得解释计划，否则您无法真正说出 MySQL 将如何运行查询：

```
EXPLAIN EXTENDED
SELECT * 
FROM (SELECT *
      FROM customers
      WHERE CompanyName > 'g')
WHERE ContactName < 'g' 
```

...但我怀疑它会为您的查询读取两次表格。内存比磁盘快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:23:13.403

谢谢大家的回复。原来我正在寻找的是一个“查询的查询”，它不被 PHP 直接支持，但我在这里找到了一个提供该功能的函数：[http ://www.tom-muck.com/blog/index .cfm?newsid=37](http://www.tom-muck.com/blog/index.cfm?newsid=37)

这是从另一个 SO 问题中发现的：[Can php query the results from a previous query?](https://stackoverflow.com/questions/2798421/can-php-query-the-results-from-a-previous-query?rq=1)

我仍然需要进行比较以确定它是否提高了速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:22:42.653

您可以制作一个临时表来放置初始结果，然后使用它来选择数据并在第二个查询中。仅当您的第一次查询很慢时，这才会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:16:19.977

如果我正确理解您的问题，您想知道将 SQL 查询的“来自”部分保存在 php 变量中是否可以提高查询 SQL 服务器的性能，那么答案是否定的。仅仅是因为保留值的变量被插入到查询中。

是否在 PHP 中获得了性能，答案很可能是肯定的；但取决于变量值的长度（以及您重复使用变量而不是构建新的完整查询的频率）性能是否显着。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:20:47.277

为什么不在这样的单个查询中获取这些数据呢？

```
SELECT * 
FROM customers
WHERE CompanyName > 'g'
AND ContactName < 'g' 
```

# java - 应用程序在 http 发布过程中关闭

> ID：15641987
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:12:58.717
> 
> 标签：java, android

旨在通过远程服务器尝试处理 http post 以获取用户登录信息

我的代码在 2.3.3 上运行良好，但在 4.1 和 4.2 上，应用程序被强制关闭

我的 AndroidManifest.xml 文件有

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17"
    android:maxSdkVersion="17" /> 
```

并且用于http post过程的代码目标是

```
public class postdata  { 
public static final String Logger = postdata.class.getName();
private static String slurp(InputStream in) throws IOException {
    StringBuffer out = new StringBuffer();
       byte[] b = new byte[4096];
        for (int n; (n = in.read(b)) != -1;) {
          out.append(new String(b, 0, n));
       }
     return out.toString();
 }
public static String post_string(String url, String urlParameters) throws IOException {
HttpURLConnection conn = null;
   try {
     conn = (HttpURLConnection) new URL(url).openConnection();
    } catch (MalformedURLException e) {
   Log.e(Logger, "MalformedURLException While Creating URL Connection - " + e.getMessage());
   throw e;
  } catch (IOException e) {
    Log.e(Logger, "IOException While Creating URL Connection - " + e.getMessage());
    throw e;
 }
  conn.setDoOutput(true);
  conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
  conn.setRequestProperty("Content-Length", Integer.toString(urlParameters.length()));
  OutputStream os = null; 
  try {
      os = conn.getOutputStream();
  } catch (IOException e) {
     Log.e(Logger, "IOException While Creating URL OutputStream - " + e.getMessage());
     throw e;
  } 
  try { 
       os.write(urlParameters.toString().getBytes());
    } catch (IOException e) {
  Log.e(Logger, "IOException While writting URL OutputStream - " + e.getMessage());
  throw e; 
   }
  InputStream in = null; 
   try {
      in = conn.getInputStream();
   } catch (IOException e) {
     Log.e(Logger, "IOException While Creating URL InputStream - " + e.getMessage());
     throw e;
   }
    String output = null;
    try {
        output = slurp(in);
    } catch (IOException e) { 
      Log.e(Logger, "IOException While Reading URL OutputStream - " + e.getMessage());
      throw e;
    } finally {
     try {
      os.close();
      in.close();
      } catch (IOException e) {
      Log.e(Logger, "IOException While Closing URL Output and Input Stream - " + e.getMessage());
    }
  }
 conn.disconnect();return output;
}
} 
```

如何让我的代码在所有 android 版本上正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:17:59.673

您可能正在尝试在 UI 线程上执行网络操作，请将您的网络相关操作移至后台线程，最好是 AsyncTask，[请参阅此示例以了解如何正确执行](https://stackoverflow.com/a/6343299/892055)。

# android - 多个数据库和内容提供者

> ID：15641993
> 
> 赞同：3
> 
> 时间：2013-03-26T16:13:14.360
> 
> 标签：android, database, sqlite, android-contentprovider

在我的应用程序中，我有多个 sqlite 数据库，这些数据库都通过内容提供程序导出，以便我的其他应用程序能够读取数据。

有一个包含我所有数据库的内容提供者，还是每个数据库都有一个内容提供者更好？我的其他应用程序一次只需要访问一个数据库。

注意我读过类似的帖子，我的应用程序必须能够有多个数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:42:35.653

通常：这取决于:-)

但是，如果您必须使用多个数据库，那么这些数据库可能包含或多或少不相关的数据。在这种情况下**，我将为每个数据库使用不同的 ContentProvider**。这是对关注点的明确分离，并使 API 更易于理解。

顺便说一句：**牢记安全。**如果您只希望您的应用程序使用数据，请使用[签名访问级别的权限！](http://developer.android.com/training/articles/security-tips.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T08:49:42.560

如果数据库中的数据不相关，@WolframRittmeyer 的答案就是要走的路。

如果您想公开来自多个来源的相似数据，您可以尝试将多个`Cursors`来自不同数据库的数据嵌入到一个[`MergeCursor`](https://developer.android.com/reference/android/database/MergeCursor.html).

请注意，`getColumns()`和其他相关方法可能会根据当前`MergeCursor`位置返回不同的结果。

# javascript - 如何在 ArrayController 的内容中设置属性

> ID：15641995
> 
> 赞同：1
> 
> 时间：2013-03-26T16:13:18.717
> 
> 标签：javascript, ember.js, handlebars.js

在我尝试访问内容时进行调试

```
this.get('this.content').objectAt(0).selected_group
true 
```

但是当我尝试设置 selected_group 时，它给了我以下错误

```
this.get('this.content').objectAt(0).selected_group = false;
Error: assertion failed: Must use Ember.set() to access this property 
```

当我尝试使用 setter 方法设置 selected_group 时再次出现以下错误

```
Ember.set(this.get('this.content').objectAt(0).selected_group, false)
TypeError: Object #<error> has no method 'indexOf' 
```

this.get('content').objectAt(0) 如下所示

```
Object {id: "GRP1", divisions: Array[6]}
__ember1364353119575_meta: Meta
divisions: Array[6]
0: Object
budget: Object
current_month_proj: Object
division_name: "North Florida"
facilities: Array[8]
id: "DIV1"
last_year: Object
prev_month: Object
prior_three_months: Object
__proto__: Object
1: Object
2: Object
3: Object
4: Object
5: Object
length: 6
__proto__: Array[0]
get group_name: function () {
id: "GRP1"
set group_name: function () {
__proto__: Object 
```

为 ArrayController 的内容（obj 数组）设置/添加属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:22:15.307

或者您使用序列化程序。无论如何，只要您的对象没有名为“selected_group”的属性（并且，通过您的示例对象，这似乎是这种情况），您将无法以任何一种方式设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:14:42.253

你在正确的道路上。你只需要解决一些问题。

而不是`this.get('this.content')`，使用`this.get('content')`.

此外，这里是如何使用 Ember.set：

```
this.get('content').objectAt(0).set('selected_group', false); 
```

由于 ArrayController 是代理，因此您可以直接访问其数组，而无需`content`：

```
this.objectAt(0).set('selected_group', false); 
```

您也可以使用 Ember 的特殊数组属性`firstObject`：

```
this.set('firstObject.selected_group', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:17:17.823

我想我已经找到了解决问题的方法，我们应该始终拥有 ember 对象，而不是拥有 vanilla json 对象，我们可以用 ember 包装器包装我们的 json 对象，这将提供 set 和 get 之类的方法