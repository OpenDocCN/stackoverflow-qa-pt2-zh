# StackOverflow 问答 14425000-14425999

# jquery - Setting max date jquery datepicker

> ID：14425001
> 
> 赞同：3
> 
> 时间：2013-01-20T13:28:38.880
> 
> 标签：jquery, jquery-ui-datepicker

I'm having a hard time setting the max date of the jquery datepicker. I want to add thirty days to the min date.

I get my date in dd.mm.yyyy format. I split the date and make a Date object to use this as mindate (this works). My problem is that I cant use '+30D' on the maxdate property, and I have also tried making a second date object as my maxdate without any effect.

My current code that does not work:

```
 var values = validdate.split(".");
        var parsed_date = new Date(values[2], values[1], values[0]);

        var maxdate = new Date();
        maxdate.setDate(parsed_date.getDate() + 30);

        $("#date").datepicker({
            changeMonth: true,
            changeYear: true,
            minDate: parsed_date,
            maxDate: maxdate
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T14:03:23.983

maxdate 的问题是您使用当前日期作为起点。然后你将 30 天添加到今天。

要修复使用`parsed_date`创建初始`maxdate`

```
var maxdate = new Date(parsed_date);
maxdate.setDate(parsed_date.getDate() + 30); 
```

否则，您还需要设置月份并将年份设置为当前日期，而不仅仅是设置日期

演示：http: [//jsfiddle.net/2y67W/](http://jsfiddle.net/2y67W/)

# php - How to autocomplete all inputs

> ID：14425003
> 
> 赞同：-3
> 
> 时间：2013-01-20T13:28:54.270
> 
> 标签：php, jquery, database, forms

I have a form

```
<form name="form1" id="form_cont" method="post" action="creaza.php">
    <label for="idno">IDNO</label>
    <input type="text" name="idno" id="idno" value="">

    <label for="tip_persoana">Tip Persoana</label>
    <label for="first_name">Nume</label>
    <input type="text" name="first_name" id="first_name">
    <label for="last_name">Prenume</label>
    <input type="text" name="last_name" id="last_name">
... 
```

When I complet field id="idno" jQuery it showing me autocomplete.

```
$(document).ready(function()
    {
        $('#idno').autocomplete(
        {
            source: "autocomplet.php",
            minLength: 3
        });
    }); 
```

If I select one of this autocomplet, another fields (last_name, first_name...) whill be complet automatically from database and they will be disabled.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:39:21.877

jQuery 自动完成功能适用于**字段**，而不适用于**表单**。使用 jquery 可以轻松实现您想要做的事情，但这不是**[Autocomplete UI](http://api.jqueryui.com/autocomplete/)**的设计目的。您可以为此编写自定义 jquery AJAX 请求。您甚至可以使用自动完成 ui 并解析返回的数据并填写表单的某些字段，但自动完成本身不会为您执行此操作

# php - mysql_fetch_assoc into mysqli in a function

> ID：14425006
> 
> 赞同：3
> 
> 时间：2013-01-20T13:28:58.823
> 
> 标签：php, mysql, mysqli

So I have a function to gather `user_data` in PHP & MYSQL, and the thing is that I want to upgrade `MYSQL` in `MYSQLi`.

The `MYSQL` code is following:

```
$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM members where id = $id")); 
```

The `MYSQLi` code I tried but with no use:

```
$data = $db_connect->query("SELECT $fields FROM ´members´ where id = $id"); 
```

and

```
$result = $db_connect->query("SELECT $fields FROM ´members´ where id = $id");
$data = $result->fetch_assoc(); 
```

I don't know what could be wrong, in the 1:st example I have no errors but the data isn't displaying, and in the 2:nd code I noticed I need the `fetch_assoc` function to make it work, but here I get the errors saying

> Call to a member function fetch_assoc() on a non-object

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:57:35.197

好像您的查询中有错误。[`MySQli->query()`](http://us3.php.net/manual/en/mysqli.query.php)将`FALSE`在失败时返回。

[更新 2] 试试这个代码：

```
$result = $db_connect->query("SELECT $fields FROM members where id = $id");

if (!$result) {
    printf("Errormessage: %s\n", $db_connect->error);
}
else {
    while ($data = $result->fetch_assoc()) {
        print_r ($data);
    }
} 
```

# jquery - Get metadata of local mp3 file using html5 filesystem api

> ID：14425007
> 
> 赞同：3
> 
> 时间：2013-01-20T13:29:07.263
> 
> 标签：jquery, html, filesystems, mp3, metadata

I was trying to get the title and artist (and other metadata eventually) of each mp3 file in a directory. Currently the code I have appends the div "thelist" with the file name of the mp3 file. How could I go about getting the title and artist properties/tags of the file instead of the entire file name?

Here is my code:

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Get Directory</title>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript"> 
$(document).ready(function(){
$("#file-input").on("change", function(e){
  var thefiles = e.target.files;
  $.each(thefiles, function(i, item){
    var thefile = item;
    $("#thelist").append("FILES: " + thefile.name + "<br />");;
  });
});
});
</script>
</head>
<body>
<input type="file" id="file-input" webkitdirectory="" directory="">
<div id="thelist"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T22:41:10.377

看起来您需要使用 FileReader 依次获取每个文件，并使用它从 ID3 标签中提取数据 - [http://ericbidelman.tumblr.com/post/8343485440/reading-mp3-id3-tags-在 JavaScript 中](http://ericbidelman.tumblr.com/post/8343485440/reading-mp3-id3-tags-in-javascript)

这是您从服务器读取文件的地方（即您可以在有更多选项的服务器端执行此操作）还是您尝试从用户机器读取文件，这将是一个更大的挑战......

**更新：**请参阅下面我的评论 (1/22) 中引用的 jsFiddle，以获取包含上述代码和 jDataView 子例程的工作示例。它仅适用于 .mp3 文件，并且这些文件必须具有有效的 ID3 标签（我在 VLC 中编辑了一些 mp3 文件以确保它们没问题，iTunes 没有做到这一点）。仅在 OSX 上的 Chrome 中进行了测试，但希望足以让您入门，但请记住 HTML5 实现因浏览器和平台而异

# java - Java: Stack.pop() + incompatible types

> ID：14425008
> 
> 赞同：1
> 
> 时间：2013-01-20T13:29:22.103
> 
> 标签：java, stack, incompatibletypeerror

this is the first time I'm working with the Stack-structure. Here's the basic idea: I'm writing a text-based-adventure where the player can visit different rooms. Currently he can't go back. I thought I might use a Stack to document his movements. So if he moves on into a different room I used push() to put the currentCity (Which is an Object of the class City) onto the Stack. It looks like that:

```
private Stack history; 
```

In the Constructor:

```
history = new Stack(); 
```

In the "go"-function:

```
history.push(currentCity) 
```

If I try to retrieve the Object in my goBack-function like this:

```
currentCity = history.pop();
(currentCity is a private variable of the class I'm working in. It's of the type
City) 
```

I thought that would work because the object ontop of my Stack is from the type City and so is the variable currentCity. Still I get incompatible types.

Any help would be greatly appreciated, stiller_leser

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:31:52.313

您将需要强制转换或显式定义堆栈的通用参数。我建议指定通用参数。

```
private Stack<City> history;

history.push(city);
currentCity = history.pop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:33:24.833

您没有提供足够的信息来获得良好的帮助。您没有显示所有内容的声明，也没有给出错误消息的确切文本，在这种情况下，即使对您来说，一个独立的小型示例也会非常简单和有启发性。

pop() 几乎肯定会返回 Object，在这种情况下，您必须将其强制转换为 City 以克服错误。但我不得不在这里猜测几件事......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:34:43.247

该方法被声明为`Object pop()`，所以编译器只看到`Object`，与 不兼容`City`。如果您使用`Stack<City>`，那么您将拥有该方法`City pop()`并且它会起作用。

BTW`Stack`是一个过时的类，pre-Collections Framework。你最好使用`LinkedList`,`removeLast`充当`pop`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T13:36:39.513

您正在使用原始（未绑定）堆栈。使用类型化堆栈：

```
private Stack<City> history;

history = new Stack<City>(); 
```

然后

```
currentCity = history.pop(); 
```

将编译。

# jquery - 持续亮点

> ID：14425010
> 
> 赞同：0
> 
> 时间：2013-01-20T13:29:40.797
> 
> 标签：jquery, jquery-ui

我想使用 jquery 突出显示一个 dom 对象。`effect`我从 jquery ui中找到了一种使用方法：

```
$('#foo').hover(function(){$('#bar').effect("highlight");}); 
```

但这仅在鼠标移入/移出到时才会生效`#foo`。我希望效果在鼠标结束时保持不变`#foo`，并在鼠标离开时恢复到之前。我试过了，这个：

```
$('#foo').mouseover(function(){$('#bar').effect("highlight");}); 
```

但仍然无法正常工作。我怎样才能使效果持续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:38:48.483

您可以使用`mouseenter`和`mouseleave`添加效果来为您的元素添加一个类。示例：HTML：

```
<div id="foo">
    <p>Hello world</p>
</div> 
```

JS：

```
$('#foo').mouseenter(function(){$(this).addClass("highlight");});
$('#foo').mouseleave(function(){$(this).removeClass("highlight");}); 
```

CSS：

```
.highlight{
    background-color: red;
} 
```

提琴手：http: [//jsfiddle.net/2CL7u/](http://jsfiddle.net/2CL7u/)

你也可以像这样使用纯 HTML 和 CSS 来制作这种效果： HTML：

```
<div id="foo">
    <p>Hello world</p>
</div> 
```

CSS：

```
#foo:hover{
    background-color: red;
} 
```

提琴手：http: [//jsfiddle.net/7Qq7n/](http://jsfiddle.net/7Qq7n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:40:26.797

您需要一个打开/关闭的间隔（使用 setTimeout）

```
 var hInterval = null;

 $('#foo').on({
   'mouseenter': function(){
      hInterval = setTimeout(function highlight(){
        $('#bar').effect("highlight", function(){ hInterval = setTimeout(highlight, 100); });
      }, 100);
   },
   'mouseleave': function(){
      clearTimeout(hInterval);
   }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:45:38.443

You can also use `animation` to save the UI color transfer animation when changing between colors.

```
$('#foo').mouseover(function(){
    $(this).animate({
        backgroundColor: "#ffff99"
    },'fast');
});

$('#foo').mouseleave(function(){
    $(this).animate({
        backgroundColor: "#ffffff"
    },'fast');
}); 
```

[JS FIDDLE](http://jsfiddle.net/qE9gh/)

[jq UI color animation demo](http://jqueryui.com/animate/)

# python - Python Imaging Library 循环性能随着重复而变慢

> ID：14425015
> 
> 赞同：0
> 
> 时间：2013-01-20T13:30:30.793
> 
> 标签：python, performance, python-2.7, python-imaging-library

我编写了一个简单的函数来将图像从 1500x2000px 调整为 900x1200px。

```
def resizeImage(file_list):
    if file_list:
        if not os.path.exists('resized'):
            os.makedirs('resized')
        i = 0
        for files in file_list:
            i += 1
            im = Image.open(files)
            im = im.resize((900,1200),Image.ANTIALIAS)
            im.save('resized/' + files, quality=90)
        print str(i) + " files resized successfully" 
    else:
        print "No files to resize" 
```

我使用 timeit 函数来测量运行一些示例图像需要多长时间。这是一个结果示例。

```
+---------------+-----------+---------------+---------------+---------------+
| Test Name     | No. files |      Min      |      Max      |    Average    |
+---------------+-----------+---------------+---------------+---------------+
| Resize normal |     10    | 5.25000018229 | 5.31371171493 | 5.27186083393 |
+---------------+-----------+---------------+---------------+---------------+ 
```

但是如果我重复测试，时间会逐渐增加，即

```
+---------------+-----------+---------------+---------------+---------------+
| Test Name     | No. files |      Min      |      Max      |    Average    |
+---------------+-----------+---------------+---------------+---------------+
| Resize normal |     10    | 5.36660298734 | 5.57177596057 | 5.45903467485 |
+---------------+-----------+---------------+---------------+---------------+

+---------------+-----------+---------------+---------------+---------------+
| Test Name     | No. files |      Min      |      Max      |    Average    |
+---------------+-----------+---------------+---------------+---------------+
| Resize normal |     10    | 5.58739076382 | 5.76515489024 | 5.70014196601 |
+---------------+-----------+---------------+---------------+---------------+

+---------------+-----------+---------------+---------------+-------------+
| Test Name     | No. files |      Min      |      Max      |   Average   |
+---------------+-----------+---------------+---------------+-------------+
| Resize normal |     10    | 5.77366483042 | 6.00337707034 | 5.891541538 |
+---------------+-----------+---------------+---------------+-------------+

+---------------+-----------+---------------+--------------+---------------+
| Test Name     | No. files |      Min      |     Max      |    Average    |
+---------------+-----------+---------------+--------------+---------------+
| Resize normal |     10    | 5.91993466793 | 6.1294756299 | 6.03516199948 |
+---------------+-----------+---------------+--------------+---------------+ 
```

这就是我运行测试的方式。

```
def resizeTest(repeats):
    os.chdir('C:/Users/dominic/Desktop/resize-test')
    files = glob.glob('*.jpg')

    t = timeit.Timer(
        "resizeImage(filess)", 
        setup="from imageToolkit import resizeImage; import glob; filess = glob.glob('*.jpg')"
    )   
    time = t.repeat(repeats, 1)

    results = {
        'name': 'Resize normal',
        'files': len(files),
        'min': min(time),
        'max': max(time),
        'average': averageTime(time)
    }
    resultsTable(results) 
```

我已将处理过的图像从我的机械硬盘驱动器移动到 SSD，但问题仍然存在。我还检查了正在使用的内存，它在所有运行过程中都保持相当稳定，最高约为 26Mb，该进程使用了​​ CPU 一个内核的 12% 左右。

展望未来，我喜欢尝试使用多处理库来提高速度，但我想先深入了解这个问题。

这会是我的循环导致性能下降的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:41:52.350

这个`im.save()`电话正在减慢速度；重复写入同一目录可能会破坏操作系统磁盘缓存。当您删除调用时，操作系统能够通过磁盘缓存优化图像*读取访问时间。*

如果你的机器有多个 CPU 核心，你确实可以加快调整大小的过程，因为操作系统会在这些核心上安排多个子进程来运行每个调整大小的操作。您不会获得线性的性能改进，因为所有这些进程仍然必须访问同一个磁盘进行读取和写入。

# iphone - 如何在iOS（iPhone/iPad）中实现密度/热图效果？

> ID：14425017
> 
> 赞同：1
> 
> 时间：2013-01-20T13:30:38.420
> 
> 标签：iphone, ios, google-maps, map, ios6

[http://www.econguru.com/heat-map-of-worldwide-gdp-ppp-per-capita-2008/](http://www.econguru.com/heat-map-of-worldwide-gdp-ppp-per-capita-2008/)

这是 CIA 世界概况地图，每个国家根据其 GDP 数字有不同的颜色深度。GDP高的国家颜色更深。

现在，我正在考虑将这种效果开发到我的 iPhone/iPad 地图应用程序中。我可能想使用苹果地图（可能不是谷歌地图，因为 iOS 6 有自己的地图），但我不确定如何根据用户访问的国家/地区获得这种效果。

例如，用户访问美国的次数最多，则地图显示美国的颜色较深。

我还没有在 iPhone 应用程序中看到这样的效果。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:28:55.660

这应该可以使用 MapKit 和叠加层来实现。您需要为热图的每个区域构建一个叠加层，然后根据数据设置颜色。我怀疑最难的部分是获取为每个区域构建路径所需的地理数据。AFAICT，MapKit 中没有函数`-pathForState:`或`-pathForCountry:`函数类型，因此您将需要找到该信息的另一个来源。但就绘制叠加层而言，这一切都在 MapKit 中。查看此[示例代码](http://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.html)。

编辑：

[这个问题](https://stackoverflow.com/questions/9139396/heat-map-on-map-view-in-iphone?rq=1)有一些关于从哪里获取数据的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:19:23.090

您可以从 github 上的 D3 项目获取 json 格式的坐标： [https ://github.com/latentflip/d3/blob/master/data/world-countries.json](https://github.com/latentflip/d3/blob/master/data/world-countries.json)

您可以下载此 json，[将 NSJsonSerialization](https://stackoverflow.com/questions/7064200/parse-json-contents-in-local-file)与文件一起使用以将 json 加载到 Dictionary 或数组中，然后从那里构建您的叠加层。

另一件事：从技术上讲，您并不追求热图；你所追求的更像是一张“专题”地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T19:51:31.957

试试 LFHeatMap 类。似乎是您正在寻找的东西。 [https://github.com/gpolak/LFHeatMap](https://github.com/gpolak/LFHeatMap)

# facebook - Facebook Like：使用 JS 动态设置 og:title 属性

> ID：14425020
> 
> 赞同：0
> 
> 时间：2013-01-20T13:31:30.837
> 
> 标签：facebook, facebook-graph-api, facebook-like

> **可能重复：**
> [尝试使用客户端 jquery 和 ajax 更新 Facebook Open Graph 元标记](https://stackoverflow.com/questions/5167759/trying-to-update-facebook-open-graph-meta-tags-using-client-side-jquery-and-ajax)

我有一个 AJAX 驱动的单页搜索，每个推荐都有类似的按钮。我`FB.XFBML.parse();`用来动态解析按钮代码。

但我还需要给每个推荐一个不同的标题，以便在 facebook 中显示。我使用该`og:title`属性并动态操作它以匹配当前的推荐。所以在我里面我`<head>`有：

```
<meta id="fb_title" content="Something" property="og:title"> 
```

在我的脚本中：

```
$("#fb_title").attr("content",recommendation.title); 
```

尽管该`content`属性已按预期更改，但它并未由 FB 呈现，并且我不断获取从服务器发送的原始值（显然我`FB.XFBML.parse();`在操作后使用`og:title`）。是否可以告诉FB重新渲染它？

# performance - Excel 2003：为什么创建指向其他电子表格的链接需要这么长时间？

> ID：14425021
> 
> 赞同：4
> 
> 时间：2013-01-20T13:31:31.573
> 
> 标签：performance, excel, vba, hyperlink

我的 Excel 应用程序创建指向其他 Excel 文件的链接。为 1 个单元创建链接大约需要 1 秒，但我有数百个单元要链接，所以速度非常慢。源文件打开或关闭速度没有区别。然而，我注意到在打开源文件时手动创建链接（例如，通过手动将包含链接的公式复制并粘贴到其他单元格中）要快得多。

在我的程序中，我将 Application.Calculation 配置为手动而不是自动。

我尝试以两种方式完成链接（请注意这不是真正的代码，但我希望它能说明我的意思）：

1\. 将公式链接复制到外部源，对范围内`Range("A1")`的每个使用 foreach 循环`Cell`：

`Cell.FormulaR1C1 = Range("A1").FormulaR1C1`

2\. 将公式从复制`Range("A1")`到另一个范围，而不使用 foreach 循环：

`Range("thisIsMyTargetRange").FormulaR1C1 = Range("A1").FormulaR1C1`

*两种方法都同样慢，正如我所说，我已经在打开和*关闭源文件的情况下检查了上述两种方法。

有什么办法可以加快这个速度吗？有没有人足够了解 Excel 2003 中的链接机制来提供有关如何提高链接性能的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:15:25.940

有公式有关系吗？如果不使用`.value`代替`.formular1c1`.

此外，如果范围大小相同，则使用范围副本而不是循环。例如

```
range(a1:a500).value = range(a1:a500) 
```

**添加了替代方法：**

此外，另一种方法是使用数据导入功能创建一个表格，该功能在文件打开时刷新，如果您需要一张工作表。然后，如果您想要该表的某些部分，请使用导入表/表中的数据。这将在打开文件时保持更新或仅链接到**一个大型导入。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:46:51.960

我不得不这样做，以获取大约每秒一次的数月数据。

打开要从中复制数据的文档。然后将包含该数据的所有工作表复制到您正在使用的工作簿中。从中获取数据，然后从工作簿中删除这些工作表。在宏中执行此操作，以便可以快速重复地完成。

# java - JMS 应用程序给出错误

> ID：14425024
> 
> 赞同：0
> 
> 时间：2013-01-20T13:31:59.960
> 
> 标签：java, netbeans, glassfish, jms

我正在尝试运行一些应用程序（我自己的应用程序和教程应用程序）来帮助我理解 JMS 的基础知识。应用程序中的代码应该是正确的（至少在某些情况下）。我添加的库是：`Java EE 6 API Library - javaee-api-6.0.jar`、、、和。`jndi-properties.jar``appserv-rt.jar``javaee.jar``JDK 1.7(Default)`

但是对于我尝试启动的每个应用程序，我都会收到以下错误消息：

```
run:
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/jms/JMSException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:488)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480)
Exception in thread "main" Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

请注意，它确实说`BUILD SUCCESSFUL`，但它是一个可运行的表单类（带有 2 个文本字段和一个按钮），我没有看到我的表单。

我正在使用 GlassFish Server 3.1.2 1 在 NetBeans 7.1.1 中尝试我的应用程序。我已经在管理控制台中配置了使用的连接工厂和目标资源。

正如其他相关问题所见，我尝试`javaee.jar`上下移动类路径，甚至将其删除，但没有任何结果。也是如此`Java EE 6 API Library`，但我的项目需要那个 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:54:02.140

更改`javaee-api-6.0.jar`以`javaee-api-5.0.5.jar`修复它。

# php - php str_replace() 字符串到数组错误

> ID：14425025
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:32:06.970
> 
> 标签：php, arrays

```
str_replace($search, $replace, $subject); 
```

我对 $search 字符串和 $replace 字符串没有任何问题。

但是如何使用`str_replace()`$search 字符串和 $replace 数组呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:34:33.290

该[`str_replace()`文档](http://nl3.php.net/manual/en/function.str-replace.php)提供了一个清晰的示例，如何使用数组（大小相等）：

```
// Provides: You should eat pizza, beer, and ice cream every day
$phrase  = "You should eat fruits, vegetables, and fiber every day.";
$healthy = array("fruits", "vegetables", "fiber");
$yummy   = array("pizza", "beer", "ice cream");

$newphrase = str_replace($healthy, $yummy, $phrase); 
```

`$search`不能用作字符串和`$replaces`数组，而且“奇怪”：应该使用哪个数组值进行匹配？

# visual-studio-2012 - 在 Windows 7 上编译 rabbitmq-c：“正在寻找 htonll - 未找到”

> ID：14425030
> 
> 赞同：3
> 
> 时间：2013-01-20T13:32:55.063
> 
> 标签：visual-studio-2012, rabbitmq, linkage

我正在尝试在 Visual Studio 2012 机器上编译 rabbitmq-c，但没有成功。

我正在按照自述文件中描述的说明进行操作：

```
mkdir build && cd build
cmake ..
cmake --build . 
```

但是编译会返回一堆错误，如下所示：

```
C:\rabbitmq-c-master\librabbitmq\amqp_private.h(277): error C2375: 'htonll' : redefinition; different linkage 
```

我注意到当我运行命令“cmake ..”时，我得到“正在寻找 htonll - 未找到”。所以由于某种原因，rabbitmq-c 找不到我的 htonll 函数并尝试重新声明它。

我该如何调试？

rabbitmq-c 库的链接： [https ://github.com/alanxz/rabbitmq-c](https://github.com/alanxz/rabbitmq-c)

# javascript - 背景图片 phonegap

> ID：14425032
> 
> 赞同：0
> 
> 时间：2013-01-20T13:32:59.263
> 
> 标签：javascript, css, image, cordova

我正在尝试使我的背景图像适应每个屏幕，但我不知道该怎么做。

我有最大屏幕的大图像，但我想为每个屏幕尺寸调整图像大小

有没有办法做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:35:29.927

使用`background-size`CSS 属性

```
background-size: 100% auto; 
```

# android - 从我自己的应用程序访问已安装的应用程序的数据库

> ID：14425037
> 
> 赞同：0
> 
> 时间：2013-01-20T13:33:33.813
> 
> 标签：android, database-connection

谁能告诉我是否可以访问现有数据库，而不是我的应用程序正在使用的数据库？

我的代码可以正常访问由我的应用程序在运行时创建的数据库，但失败并出现以下错误：

android.database.sqlite.SQLiteCantOpenDatabaseException：未知错误（代码 14）：无法打开数据库未知错误（代码 14）：无法打开数据库 null

我读到 Android 安全通过检查应用程序 ID (PID) 来阻止访问？我还没有编写我需要访问/更改数据的数据库的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:34:45.133

一般来说，你不能。在根设备上，如果您提升您的根权限，您可以访问每个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:39:02.017

如果应用程序提供此内容，您必须使用内容提供程序：http: [//developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:43:25.070

不，您无法访问其他应用程序数据库。数据库文件存储在 /data/data/yourpackage.yourapp/database 中。在非root手机上，您甚至无法访问此处的文件系统，在root手机上不确定您是否可以这样做。

如果您想与其他应用程序共享数据或访问其他应用程序数据库，您有为此目的的内容提供者，请阅读[内容提供者文档](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T14:00:49.123

不，通常你不能这样做！

# cakephp-2.1 - CakePHP - 需要 URL 来路由到 tmp 目录？

> ID：14425038
> 
> 赞同：3
> 
> 时间：2013-01-20T13:33:33.920
> 
> 标签：cakephp-2.1, tmp

我正在尝试在 Cake PHP 中使用 GD lib 创建缩略图。

我可以将调整大小的缩略图写入 tmp 目录，并创建合理的 URL 以显示 tmp 目录中的图像：

```
//set up empty GD resource  
$tmp = imagecreatetruecolor(200*$iw/$ih, 200);
//create thumbnail image in the empty GD resource
imagecopyresampled($tmp, $src, 0, 0, 0, 0,200*$iw/$ih, 200, $iw, $ih);
//build full path to thumbnail in the cakephp tmp directory
$thumbfile = APP.'tmp/thumb.jpg';
//build URL path to the same thumbnail
$thumblink = $this->webroot.'tmp/thumb.jpg';
//write jpeg to the tmp directory
$return=imagejpeg($tmp,$thumbfile);
//write out the image to client browser
echo "<img=\"$thumblink\" alt=\"thumb\" height=\"200\" width=\"200*$iw/$ih\">"; 
```

缩略图被创建并写入 tmp 目录，但是当我尝试访问 URL 时，我收到以下错误消息：

```
Error: TmpController could not be found.
Error: Create the class TmpController below in file: app/Controller/TmpController.php 
```

显然我有一个路由错误——Cake 尝试调用 tmp 控制器，而不是查看 tmp 目录。我该如何解决这个问题，或者是否有另一种方法可以使用 GD lib 提供临时缩略图？我计划为每个会话或用户创建唯一的缩略图，但我需要先让它工作。

Config/routes.php 中的路由：

```
Router::connect('/', array('controller' => 'MsCake', 'action' => 'index'));
Router::connect('/pages/*', array('controller' => 'pages'));
CakePlugin::routes(); 
```

我查看了 ThumbnailHelper，但它不使用 GD Lib。我还需要能够从外部访问存储在非 apache 可访问目录中的文件，但我什至无法访问任何临时符号链接来访问它们。例如。

*   在 tmp 目录中创建一个临时符号链接，指向有问题的文件。
*   创建一个 HTML 链接，使用 $this->webroot.'tmp/link-to-myfile' 指向符号链接，如上

...我得到与上面相同的错误 - 错误：找不到 TmpController。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:46:18.823

## 不要那样做

如果您采取任何措施使 tmp 目录中的文件可通过网络访问 - 您将严重降低站点的安全性。tmp 目录中的东西永远不应该是网络可访问的。

## 将您的图像放在 webroot 中

一个更好的主意是将您的临时图像放在 webroot 目录中 - 这是通常可以通过网络访问的唯一目录。例如：

```
$filename = md5($userId);
$thumbfile = APP.'webroot/img/cache/' . $filename . '.jpg';

...
$url = '/img/cache/' . $filename . '.jpg'; 
```

## 或路由到控制器操作

[或者，使用媒体视图类](http://book.cakephp.org/2.0/en/views/media-view.html)路由到控制器操作以处理请求。但是请注意，使用 php 提供图像不是免费的 - 在处理您的请求时可能会有明显的延迟 - 而指向静态文件没有这种成本/风险，因为它只是负责提供服务的网络服务器内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:40:27.700

由于它是临时的，您可以做的是将图像显示为数据 url 而不是 tmp 目录，如下所示（从`imagecopyresampled()`调用后替换）：

```
ob_start();
imagepng($tmp);
$contents =  ob_get_contents();
ob_end_clean();
imagedestroy($tmp);

//write out the image to client browser
echo "<img src='data:image/png;base64,".base64_encode($contents)."' alt='thumb' height='200' width='".(200*$iw/$ih)."'>"; 
```

这使用了更多的带宽，因为图像是 base64 编码的，而不是作为二进制发送的。

# c# - 浏览器后退按钮的注销问题

> ID：14425042
> 
> 赞同：1
> 
> 时间：2013-01-20T13:34:23.887
> 
> 标签：c#, authentication, asp.net-mvc-4

我使用 ASP.Net MVC 4 创建了登录/注销功能。我使用自己创建的表单针对 Active Directory 对用户进行身份验证。它与功能正常工作。

在安全方面仍然存在一个大问题。用户单击注销链接后，他/她成功注销并再次重定向到登录表单。控制器中的代码如下所示。

```
 public ActionResult Logout()
    {
        // Tried to include below 3 lines in _Layout.cshtml as well. But not identifying.
        Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
        Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);
        Response.Cache.SetNoStore();            

        Session.Abandon();              

        return RedirectToAction("Login");
    } 
```

但是，一旦单击浏览器后退按钮，用户就可以返回其他页面并浏览页面。

我通过了几种解决方案，不同的方法，但没有一个成功。似乎 MVC 方法与 ASP.NET 表单有很大不同。感谢您对此的帮助。

（我希望使用 C#/MVC 方式解决这个问题。不使用 JavaScript 来禁用/关闭注销时的浏览器。）

**更新：**代码片段

```
 [HttpPost]
    public ActionResult Login(LoginModel authUser)
    {
        // Call Helper to get LDAP info. Will return username with groups or null      
        UserModel userProfile = LdapLoginHelper.AuthenticateUser(authUser);

        if (userProfile != null)
        {                
            Session["UserName"] = userProfile.UserName;
            Session["LdapGroups"] = userProfile.LdapGroups;

            if (userProfile.LdapGroups.Contains("Administrators"))
            {
                // To be implemented                   
            }
            else
            {
                // To be implemented      
            }

            // Successful login. Redirect to main page
            return RedirectToAction("Home", "Home");
        }
        else
        {
            // Invalid Login. Redirect to Login page
            return RedirectToAction("Login");
        }            
    }

    public ActionResult Logout()
    {
        // Not worked
        Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
        Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);
        Response.Cache.SetNoStore();
        Session.Abandon();

        /// Tried this too. Not worked.
        /// Session.Clear();
        /// FormsAuthentication.SignOut();

        //// Tried this also. Not worked.
        //// WebSecurity.Logout();

        return RedirectToAction("Login");
    } 
```

除了这个常见的 _Layout.cshtml 页面标题如下所示。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
.
. 
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T07:08:26.303

在您的 global.asax 页面中添加以下代码，并从您的 logout() 函数中删除前 3 行。

```
protected void Application_BeginRequest()
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
    Response.Cache.SetNoStore();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T15:04:18.003

将以下属性添加到`ActionResult`在控制器中返回安全页面的任何方法都应该有效：

```
public class MyControllerForAuthorizedStuff
{
    [OutputCache(NoStore = true, Duration = 0, Location = OutputCacheLocation.None)]
    public ActionResult Index()
    {
        return View();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:05:47.697

我只将 SetExpires 与 DateTime.Now 一起使用，这将使您的本地服务器时间与 cookie 相匹配。使用 DateTime.UtcNow.Addminutes(-1) 可能是真正的罪魁祸首。

另外，如果您使用的是表单身份验证，我看不到您致电

```
FormsAuthentication.SignOut(); 
```

# c# - 使用 ZedGraph lib 在图上隐藏 X 轴

> ID：14425043
> 
> 赞同：4
> 
> 时间：2013-01-20T13:34:27.430
> 
> 标签：c#, drawing, gdi+, zedgraph

我想在我的图表上隐藏 X 轴。这是我的代码：

```
zg1.GraphPane.XAxis.IsVisible = false;
zg1.AxisChange();
zg1.Invalidate(); 
```

但我有问题。

我的图表：

![在此处输入图像描述](../Images/ebd8728c2ad804232c48ef964685c391.png)

隐藏X轴后：

![在此处输入图像描述](../Images/a8b082a5400297cd3ed67f08281d80f9.png)

知道为什么我有这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T14:47:51.167

```
zg1.GraphPane.YAxis.MajorGrid.IsZeroLine = false; 
```

# ruby - 我在 (..) 中遇到错误。每个都执行 |x| .. 以红宝石结尾

> ID：14425049
> 
> 赞同：0
> 
> 时间：2013-01-20T13:34:50.773
> 
> 标签：ruby, selenium-webdriver

我收到以下代码部分的错误：

```
element = driver.find_element :name => "used_by"
element.send_keys "371101"
element = driver.find_element :name => "btnSearch"
element.click
all_table_data = driver.find_element(:tag_name, "td").text

all_table_data.each do |td|
   puts td.text
end
print element 
```

错误：

```
D:\Ruby script>ruby filedownload.rb
filedownload.rb:24:in `<main>': undefined method `each' for #<Selenium::WebDrive
r::Element:0x2556be8> (NoMethodError)

D:\Ruby script> 
```

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:39:57.277

`find_element`只返回匹配给定参数的**第一个元素。**

您可能会发现与给定参数匹配的所有元素的[`find_elements`方法是什么：](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/SearchContext.html#find_elements-instance_method)

```
all_table_data = driver.find_elements(:tag_name, "td")

all_table_data.each do |td|
   puts td.text
end 
```

# java - 使用 (.) 操作数在其他类中声明方法

> ID：14425050
> 
> 赞同：2
> 
> 时间：2013-01-20T13:34:55.637
> 
> 标签：java

我正在尝试使用以下代码打印出矩形区域

```
 System.out.println("Area of rectOne: " + rectOne.getArea()); 
```

但是，由于方法 getArea 是在另一个类中定义的，所以不应该

```
 System.out.println("Area of rectOne: " + rectOne.NameOfClass.getArea()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:37:09.900

这个答案假设`rectOne`是对具有`getArea()`方法的类的实例的引用。

`getArea()`是实例方法，所以，你需要引用这个类的实例来访问`getArea()`方法。

```
Rectangle rectOne = new Rectangle(); //Here you are getting reference to Rectangle instance.
rectOne.getArea(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T13:36:54.603

`rectOne`有它是哪个类的信息，因此`rectOne.getArea()`有足够的信息来找到方法。

只有`static`方法可以并且应该通过类名访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:40:05.293

如果你有声明

```
Object rectOne = new Rectangle(); 
```

那么你需要

```
System.out.println("Area of rectOne: "
                   + ((Rectangle)rectOne).getArea()); 
```

注意语法；这和你的提议不同。但是，因为你可能有

```
Rectangle rectOne = new Rectangle(); 
```

编译器在调用方法时已经知道您所涉及的类，`rectOne`因此编译器仁慈地允许您毫不费力地调用该方法。

# javascript - 将对象转换为方括号字符串（不使用 JSON.stringify）

> ID：14425052
> 
> 赞同：0
> 
> 时间：2013-01-20T13:35:15.507
> 
> 标签：javascript, brackets, object-literal

我有这个 Javascript 对象（由我的插件代码即时创建）：

```
{
   "field": {
      "name": "Name",
      "surname": "Surname"
   },
   "address": {
      "street": "Street",
      "number": 0,
      "postcode": 0,
      "geo": {
        "city": "City",
        "country": "Country",   
        "state": "State"   
      }
   },
   "options": [1,4,6,8,11]
 } 
```

我**不想**将此对象转换为 JSON 字符串，但我想将此对象转换为另一个对象，但每个字段都由字符串表示，如下所示：

```
{
  "field[name]": "Name",
  "field[surname]": "Surname",
  "address[street]": "Street",
  "address[number]": 0,
  "address[postcode]": 0,
  "address[geo][city]": "City",
  "address[geo][country]": "Country",   
  "address[geo][state]": "State",   
  "options[0]":1,
  "options[1]":4,
  "options[2]":6,
  "options[3]":8,
  "options[4]":11
} 
```

设想：

*   我不知道原始对象会是什么样子（或者它会有多深），因为它是插件的一部分，我不知道人们将如何构建他们的表单
*   我要把这个新对象放在一个`FormData`对象里面，如果它只接受对象，那就更容易了，因为JSON不能上传文件，但`FormData`对象可以

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:56:53.200

正如我在评论中所说，您需要一个[`for...in` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环来迭代对象的属性，并且可以使用递归来随后转换嵌套对象：

```
function convert(obj, prefix, result) {
    result = result || {};

    // iterate over all properties
    for (var prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            var value = obj[prop];
            // build the property name for the result object
            // first level is without square brackets
            var name = prefix ? prefix + '[' + prop + ']' : prop;
            if (typeof value !== 'object') {
                // not an object, add value to final result
                result[name] = value;
            }
            else {
                // object, go deeper
                convert(value, name, result);
            }
        }
    }

    return result;
}

// Usage:
var converted_data = convert(data); 
```

[**演示**](http://jsfiddle.net/6FGbN/)

~~不过，我还是建议使用 JSON。~~

如果您还想处理文件，则可能必须添加额外的`File`对象检查。您希望它们在结果对象中是原始的：

```
else if (window.File && value instanceof File) {
    result[name] = value;
}

// and for file lists

else if (window.FileList && value instanceof FileList) {
    for (var i = 0, l = value.length; i < l; i++) {
        result[name + '[' + i + ']'] = value.item(i);
    }
} 
```

可能是`File`( `FileList`) 构造函数在 IE 中的名称不同，但它应该让您有一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T02:34:37.803

不是重新发明轮子的忠实粉丝，所以这里是您如何使用[object-scan](https://github.com/blackflux/object-scan)回答您的问题。它是一个很好的数据处理工具——一旦你把头绕在它周围，那就是。

```
// const objectScan = require('object-scan');

const convert = (haystack) => objectScan(['**'], {
  filterFn: ({ key, value, isLeaf, context }) => {
    if (isLeaf) {
      const k = key.map((e, idx) => (idx === 0 ? e : `[${e}]`)).join('');
      context[k] = value;
    }
  }
})(haystack, {});

const data = { field: { name: 'Name', surname: 'Surname' }, address: { street: 'Street', number: 0, postcode: 0, geo: { city: 'City', country: 'Country', state: 'State' } }, options: [1, 4, 6, 8, 11] };

console.log(convert(data));
/* =>
  { 'options[4]': 11,
    'options[3]': 8,
    'options[2]': 6,
    'options[1]': 4,
    'options[0]': 1,
    'address[geo][state]': 'State',
    'address[geo][country]': 'Country',
    'address[geo][city]': 'City',
    'address[postcode]': 0,
    'address[number]': 0,
    'address[street]': 'Street',
    'field[surname]': 'Surname',
    'field[name]': 'Name' }
*/
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.7.1"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

# parallel-processing - 云上的并行化

> ID：14425054
> 
> 赞同：0
> 
> 时间：2013-01-20T13:35:57.873
> 
> 标签：parallel-processing, cloud

我有一个名为 isIn(i) 的例程，其中 i 是一个整数，它返回一个介于 0 和 1 之间的数字。我的主例程是一个 for 循环，调用每个 isIn 以找到最佳匹配。现在假设我将此算法放在云服务（例如 OVH 或 Amazon）上。我应该使用什么最好的编程语言？（鉴于它必须是众所周知的，我正在考虑 Python）。有效并行化此算法的最佳方法是什么？（使用的操作系统？通信协议？）。

附属问题：我如何有效地扩展它？（例如，如果主程序被许多用户调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:02:48.570

一般来说，您可能会考虑设置一个简单地呈现 RPC 服务的图像。Python 可以很容易地做到这一点。您可以让映像启动并启动一个 python 应用程序，该应用程序启动一个简单的 http 服务器并侦听 JSON 查询。

它可以解析这些查询...执行 isln(x) 并以 json 格式返回结果。

然后，您可以设置一个带有公共接口的 http 负载均衡器，以便在您部署的 rpc 服务的多个实例之间动态路由请求。您可以考虑动态增加负载均衡器以及 rpc 实例数量的方法。

这将符合大多数云应用程序当前的运行方式。

# php - 选择时下拉选项更改

> ID：14425055
> 
> 赞同：1
> 
> 时间：2013-01-20T13:36:01.380
> 
> 标签：php, javascript

我正在尝试创建一个 2 下拉列表。选择第一个下拉列表时，第二个下拉列表更改值。我似乎无法在第二个下拉列表中插入名称。这是我的代码

```
<script type='text/javascript'>
$(window).load(function(){
$("#category").change(function () {
    if ($(this).data('options') === undefined) {
        /*Taking an array of all options-2 and kind of embedding it on the select1*/
        $(this).data('options', $('#select2 option').clone());
    }
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#select2').html(options);
    //alert(options);
});
});

</script>

<form action = '' method = 'POST'>
  <select name="select1" id="category">
        <option><--Destinations--></option>
        <?php
            $destination = mysql_query("SELECT * FROM destination");
            while ($row = mysql_fetch_assoc($destination))
            {
                $destid = $row['destination_id'];
                $destname = $row['destination_name'];
                echo"<option value=".$destname.">".$destname."</option>";
            }

        ?>
</select>

<select name="items" id="select2">
    <option><--Hotels--</option>
    <?php
        $hotel = mysql_query("SELECT * FROM hotel");
        while ($row = mysql_fetch_array($hotel))
        {
            $hotel_location = $row['hotel_location'];
            $hotel_name = $row['hotel_name'];
            echo"<option value=".$hotel_location.">".$hotel_name."</option>";
        }
    ?>
</select>
<input type = "submit" name="add"> 
</form> 

<?php
if(isset($_POST['select1'],$_POST['items']))
{
    $destination_name = $_POST['select1'];
    $hotel_name = $_POST['items'];
    echo $destination_name;
    //echo $destination_id;

}
?> 
```

它已经输出了酒店位置，但我似乎无法找到获取所选酒店名称的方法。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:07:34.110

尝试

```
 <script type='text/javascript'>
   $(window).load(function(){
   $("#category").change(function () {
       if ($(this).data('options') === undefined) {
       /*Taking an array of all options-2 and kind of embedding it on the select1*/
        $(this).data('options', $('#select2 option').clone());
   }
   var id = $(this).val();
   var options = $(this).data('options').filter('[value=' + id + ']');
   $('#select2').html(options);
   //alert(options);
   });
   });

   </script>

   <form action = '' method = 'POST'>
   <select name="select1" id="category">
    <option><--Destinations--></option>
    <?php
        $sql = "SELECT * FROM destination";
        $destination =  = $conn->Execute($sql);
        while ($row = $destination)
        {
            $destid = $row['destination_id'];
            $destname = $row['destination_name'];
            echo"<option value=".$destname.">".$destname."</option>";
        }

    ?>
   </select>

 <select name="items" id="select2">
 <option><--Hotels--</option>
 <?php
    $sql = "SELECT * FROM hotel";
    $hotel = $conn->Execute($sql);
    while ($row = $hotel)
    {
        $hotel_location = $row['hotel_location'];
        $hotel_name = $row['hotel_name'];
        echo"<option value=".$hotel_location.">".$hotel_name."</option>";
    }
?> 
```

# ruby-on-rails - Sorcery 和 Authlogic 有什么区别？

> ID：14425059
> 
> 赞同：1
> 
> 时间：2013-01-20T13:36:54.307
> 
> 标签：ruby-on-rails, rubygems, authlogic, sorcery

Rails Sorcery 身份验证 gem 和 Authlogic 之间的最大区别是什么。它们都允许您制作自己的控制器和视图。Ryan Bates 谈到他更喜欢魔法而不是 Authlogic，但我不明白他这样做的原因？您如何看待这些，我的意思是它们之间最大的区别是什么？

# java - 带有 4 项 android 的 GridView

> ID：14425063
> 
> 赞同：0
> 
> 时间：2013-01-20T13:37:38.897
> 
> 标签：java, android, gridview, uiimageview

我正在尝试制作网格视图，因为这对更多设备来说更好。我已经尝试在界面构建器中添加我的按钮（作为 ImageViews，因为我已将它们添加为 ImageButtons，但尺寸不好），结果出现在此屏幕中：http: [//i.imgur.com/pTJnKOv .png](http://i.imgur.com/pTJnKOv.png)

任何人都可以通过在 GridView 中进行此操作来帮助我，完全相同但在所有设备上都兼容。

提前致谢 ;）！

这是图像适配器：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] buttonValues;

public ImageAdapter(Context context, String[] buttonValues) {
    this.context = context;
    this.buttonValues = buttonValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String button = buttonValues[position];

        if (button.equals("homework")) {
            imageView.setImageResource(R.drawable.homework);
        } else if (button.equals("schedule")) {
            imageView.setImageResource(R.drawable.schedulebut);
        } else if (button.equals("planner")) {
            imageView.setImageResource(R.drawable.plannerbut);
        } else {
            imageView.setImageResource(R.drawable.settingsbut);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return buttonValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
} 
```

}

这是我在 onCreate 中的方法：

```
static final String[] MOBILE_OS = new String[] { "Homework", "Schedule",
        "Planner", "Settings" };
private void setGridView() {
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            Toast.makeText(getApplicationContext(), "LOL!", Toast.LENGTH_SHORT).show();

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:45:05.247

Since you are trying to use a **2X2 Grid** and have only 4 elements, use **`android:numColumns="2"`** as an attribute of your GridView.

Additionally, there is this excellent [tutorial on GridViews](http://www.mkyong.com/android/android-gridview-example/)!

Code snippet to implement only Images in your Grid :

```
public class ImageAdapter extends BaseAdapter {
    private Context context;

    public ImageAdapter(Context context) {
        this.context = context;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from mobile.xml
            gridView = inflater.inflate(R.layout.mobile, null);

            // set image based on selected text
            ImageView imageView = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);

            if (mobile.equals("Windows")) {
                imageView.setImageResource(R.drawable.windows_logo);
            } else if (mobile.equals("iOS")) {
                imageView.setImageResource(R.drawable.ios_logo);
            } else if (mobile.equals("Blackberry")) {
                imageView.setImageResource(R.drawable.blackberry_logo);
            } else {
                imageView.setImageResource(R.drawable.android_logo);
            }

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }

    @Override
    public int getCount() {
        return mobiles.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

} 
```

**EDIT :** You are getting the same image in all the buttons because you are matching the strings which you have written in different cases. (You are using *"Homework"* in one place and *"homework"* in another)

So, use `static final String[] MOBILE_OS = new String[] { "homework", "schedule", "planner", "settings" };` and it would work fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:17:25.173

要获得固定尺寸，您可以添加

android:layout_height="" android:layout_width=""

例子 ：

android:layout_height="100dp" android:layout_width="200dp"

在您的按钮标签中

# php - 创建可从所有控制器访问的方法

> ID：14425072
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:38:59.537
> 
> 标签：php, codeigniter, static, hmvc

我需要创建一个可以从所有其他控制器访问的模型方法，而不管父级和模块如何。

我正在使用 CodeIgniter 和 HMVC 模式，如果有什么要说的话。

我正在寻找的与`static`类/方法相同`Java`

编辑：我需要这个来检查用户是否在线。将其放入是`User Model`不够的，因为我需要检查用户是否在许多其他模块中在线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:52:35.830

```
class User
{
    public static function is_online($user) { }
}

$online = User::is_online($user); 
```

# c# - 从后面的 asp.net 代码调用 wcf REST 时保持会话处于活动状态

> ID：14425075
> 
> 赞同：0
> 
> 时间：2013-01-20T13:39:04.793
> 
> 标签：c#, asp.net, wcf, rest

我有一个 WCF 休息服务，我试图从同一个网站上的 aspx 页面调用它（即休息和网站都在同一个网站上）。我需要保持会话活跃。发生以下情况

如果我不传递会话 cookie，服务会创建一个不同的会话。如果我通过 Session cookie，httpwebrequest 需要很长时间，然后超时。

有什么我做错了吗？或者也许有更好的方法来调用 REST 服务，同时保持调用 asp.net 页面的相同会话。

我有以下休息签名：

```
 [OperationContract()]
        [WebInvoke(Method = "POST",
         BodyStyle = WebMessageBodyStyle.WrappedRequest,
         RequestFormat = WebMessageFormat.Json,
         ResponseFormat = WebMessageFormat.Json)]
        string GetFilterQuery(LookupRequestDTO request); 
```

从代码隐藏我调用这个服务如下：

```
 HttpWebRequest req = WebRequest.Create(url)
                                 as HttpWebRequest;

        req.Method = "POST";
        req.Credentials = CredentialCache.DefaultNetworkCredentials;
        string result = null;
        req.ContentType = "application/json";
        req.Referer = this.Page.Request.Url.AbsoluteUri;
        var cookieContainer = new CookieContainer();//pass session state;    
        cookieContainer.Add(new Cookie() { Domain = req.RequestUri.Host, Name = "ASP.NET_SessionId", Value = HttpContext.Current.Session.SessionID });

        req.CookieContainer = cookieContainer;

        string data = null; 
        //code that populates data goes here ... (excluded for simplification)

        using (Stream webStream = req.GetRequestStream())
        using (StreamWriter requestWriter = new StreamWriter(webStream, System.Text.Encoding.ASCII))
        {
            requestWriter.Write(data);
        }

   using (HttpWebResponse resp = req.GetResponse()  //timeout occurs here
                                  as HttpWebResponse)
    {
        StreamReader reader =
            new StreamReader(resp.GetResponseStream());

    } 
```

使用 $.ajax 方法从 javascript 调用时，该服务正常工作并保持相同的会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:20:22.467

我对此进行了更多研究，最好的方法是重新设计架构。基本上，从代码隐藏调用 REST 没有多大意义。它根本不是正确的工具。我没有创建 wcf 服务，而是调用实际代码。但是代码没有被直接调用，我使用的是命令模式。这是为了保持关注点分离（没有 wcf 通信的性能瓶颈）。

如果有人对超时问题有解决方案，请告诉我。现在，我将其标记为已回答。

# c# - 分配给类属性的通用方法的参数

> ID：14425079
> 
> 赞同：0
> 
> 时间：2013-01-20T13:39:52.677
> 
> 标签：c#, .net, generics

我遇到了一种情况，我很好奇这个用例的可能解决方案或替代方案是什么。

我有一个带有接受泛型参数的方法签名的类。所以我将方法签名本身设为通用：

```
/// <summary>
///     Input Widget.
/// </summary>
public sealed class InputWidget {
    /// <summary>
    ///     Widget's Control.
    /// </summary>
    public IList<dynamic> Controls { get; private set; }

    public InputWidget AddControl<TC>(InputControl<TC> control) where TC : BaseControl<TC> {
        this.Controls.Add(control);
        return this;
    }
} 
```

`object`如果我想将该参数分配给类属性，无论出于何种原因，除非该属性的类型是，或者从 .NET 4 开始，否则我不能这样做`dynamic`。

当我从列表中检索每个元素以供进一步使用时，使用`dynamic`over可以省去我必须将其转换回其泛型类型`object`的麻烦。`object`但我也不太满意，`dynamic`因为我没有获得编译类型安全、Intellisense，如果我不小心，它在运行时可能是致命的。

那么为什么我不简单地声明我的类是通用的呢？因为我不想限制我的方法来接受`InputControl`特定类型的。此外，我还定义了其他方法，但我省略了，它们需要相同的方法。如果用 N 个泛型类型定义我的类会很无聊，在这种情况下，N 是方法的数量。

那么处理这种情况的最佳方法是什么？我错过了什么吗？我想错了吗？更糟糕的是，我的设计完全错误，我需要重新开始阅读初学者书籍吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:52:25.890

听起来你实际上是在问如何存储一个集合，集合中的`InputControl<TC>`每个项目可以有不同的`TC`.

有两种方法可以做到这一点：

*   创建一个非泛型基类或接口，从集合中公开您需要的功能，并将其存储起来。这也将允许您将所有方法设为非泛型

*   替换`InputControl<TC>`为逆变接口，并使用`List<IInputControl<BaseControl>>`. 使用逆变，您将能够将任意`IInputControl<TC>`s 转换为`IInputControl<BaseControl>`.

# javascript - 使用 each() 遍历多个 ul 并隐藏任何大于 8 的子 li

> ID：14425086
> 
> 赞同：0
> 
> 时间：2013-01-20T13:40:38.623
> 
> 标签：javascript, jquery, html, css

需要一些帮助来了解如何使用 ul.children 类遍历所有 ul 元素并隐藏 ul.child 下大于 8 的任何子元素。

我的代码示例如下：

```
$(function() {
$('ul.children').each(function() {
    var $ul = $(this);
    if($ul.children().length > 8) {
        $ul.hide();
    } 
});
}); 
```

我的html代码示例：

```
<ul class="children>
   <li>1</li>
   <li>2</li>
   <li>3</li>
   <li>4</li>
   <li>5</li>
   <li>6</li>
   <li>7</li>
   <li>8</li>
   <li>hide all other li elements below this point</li>
</ul>

<ul class="children>
   <li>1</li>
   <li>2</li>
   <li>3</li>
   <li>4</li>
   <li>5</li>
   <li>6</li>
   <li>7</li>
   <li>8</li>
   <li>hide all other li elements below this point</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T13:42:40.483

```
$("ul.children").find("li:gt(7)").hide(); 
```

**演示：http:** [//jsfiddle.net/7TtKD/](http://jsfiddle.net/7TtKD/)

* * *

或者[@Vitaliy Petrychuk](https://stackoverflow.com/questions/14425086/using-each-to-iterate-through-multiple-uls-and-hiding-any-child-lis-greater/14425097#comment20079381_14425097)在评论中建议的另一个解决方案：

```
$(".children > li:nth-child(n+9)").hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T13:42:32.737

使用 index() 和 toggle() ：

```
$(function() {
    $('ul.children li').each(function(i,ele) {
        $(ele).toggle($(ele).index() > 7);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:42:24.943

您可以使用[**gt()**](http://api.jquery.com/gt-selector/)过滤索引大于 8 的元素。

**[现场演示](http://jsfiddle.net/rajaadil/vLjJT/2/)**

```
$(function () {
    $('ul.children').each(function () {        
        $('li:gt(8)', this).hide();        
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T13:52:28.087

您可以简单地使用`filter()`方法：

[http://jsfiddle.net/HZ3LE/](http://jsfiddle.net/HZ3LE/)

```
$('ul.children li').filter(function(i){return i>7}).hide(); 
```

# ios - 如何将一个 IBOutlet 连接到容器视图控制器中的 tableview 控制器

> ID：14425088
> 
> 赞同：0
> 
> 时间：2013-01-20T13:41:08.877
> 
> 标签：ios, iphone, objective-c, uitableview, uistoryboard

![在此处输入图像描述](../Images/80e22fc007234647befb3053c471e92d.png)

我用 Storyboard 设计了我的应用程序，我有一个视图控制器，我需要插入一个静态表视图控制器（静态表视图控制器不能插入视图控制器）。所以我拖放了一个容器视图控制器并嵌入了一个表视图控制器。

现在我在 viewcontroller.h 中声明了一个 IBOutlet，如

```
@property (nonatomic,strong) IBOutlet UITableView *infoTableView;

```

如何将 infoTableView 连接到连接检查器中的实际表视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:55:26.820

如果您的意思是将 ItemEditorViewController 中的 IBOutlet 连接到表视图控制器中的表视图，则不能。无法将一个控制器中的插座连接到另一个控制器中的对象。如果您需要在父控制器中获取对该表视图的引用，则需要执行以下代码：

在 ItemEditorViewController.h

```
@property (nonatomic,strong) UITableView *infoTableView; 
```

在 ItemEditorViewController.m 中（可能在 viewDidLoad 中）

```
self.infoTableView = [self.childViewControllers[0] tableView]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-17T08:19:47.557

这不是您要寻找的答案，但尽量不要做这种古怪的事情。出于某种目的，不允许在 UIViewController 中使用静态 tableView。苹果有他的理由禁止它，所以你最好不要寻找变通办法，否则你会得到一个带有意外行为的错误应用程序。你真的想要那个吗？

我的建议是，作为这种情况的一个想法：

在您的 VC 类中包含一个简单的 UITableView，然后以编程方式在`tableView:cellForRowAtIndexPath:`. 通过这种方式，您可以获得完全控制的稳定局面。

# website-monitoring - 以编程方式检查网站是否正常运行并按预期运行的方法

> ID：14425090
> 
> 赞同：2
> 
> 时间：2013-01-20T13:41:13.790
> 
> 标签：website-monitoring

我知道这是一个开放式问题，但希望它会在线程被锁定之前得到一些好的答案......

我想知道如果从客户端的角度来看网站是否在线，有哪些方法可以以编程方式检查（与语言无关）（假设您无法更改网站/服务器，但您可以依赖网站的某些行为。）

每种方法的结果可以叠加以提供站点向上/向下的确定性度量——也就是说，如果站点自身向上/向下，方法不必提供明确的指示。

一些仅用于检查“upness”的常见测试可能是：

*   ping 站点（在共享主机的情况下，这不是很有指示性）
*   发送 http head/get 请求并检查状态

我能想到的其他检查网站是否正常运行：

*   检查您是否收到格式良好的 html 响应，即 html 到 html 标记，如果站点遇到问题，它可能会吐出错误并退出而不编写页面的其余部分（虽然不是那么可靠，因为该站点可能会以更好的方式处理大多数错误方式）

*   检查页面上是否存在某些内容，即可能有一些内容始终存在于您的页面上，或者在出现错误时始终存在

任何人都可以想到任何其他方法可以用来帮助确定网站是否实际上在程序中启动/关闭以及运行/不正常运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:59:21.777

如果您在显示来自数据库的信息的页面上的获取请求返回状态 200 并找到匹配的关键字，则您可以非常确定您的网站已启动并正在运行。

而且你真的不需要编写自己的脚本来做到这一点。[GotSiteMonitor](http://www.gotsitemonitor.com)、[Pingdom](https://pingdom.com) 、UptimeRobot 等免费服务可让您监控您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:53:33.017

好的，听起来您想从客户体验的角度测试和监控您的网站，而不是纯粹确定服务器是否启动（例如使用 ping）。[复制客户体验的一种有效方法是使用其中一种无头浏览器测试工具（ phantomJS](http://phantomjs.org/)是一个不错的选择）来模拟针对站点的测试，因为它们将完全呈现页面（包括图像、CSS、JS 等），从而为您提供真实的页面加载时间。这些工具还允许您对 HTML 内容和 HTTP 响应的所有方面进行断言。

[pingdom](http://royal.pingdom.com/2013/01/14/monitor-multi-step-user-interactions-with-the-pingdom-transaction-monitor/)最近开始提供（付费）服务来执行这些确切类型的检查，以及他们现有的监控解决方案。该演示值得一看，他们编写实际测试的界面非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:09:16.437

基于单元测试原则的测试集。它通常在编程中用于在进行更改后测试类、模块或其他工件。您可以使用任何可用的框架，因此不必重新发明轮子。您必须描述（实施）要运行的测试，在您的情况下，典型的测试应该在页面内请求一个 url，然后进行一些评估，例如：

*   调用结果（例如 curl 执行的返回码）
*   http返回码
*   http 标头
*   响应哑剧类型
*   响应大小
*   响应内容（针对正则表达式进行测试）

这样一来，您就可以添加、删除和修改单个测试，而无需关心框架。您还可以链接测试，因此在一个测试中执行登录，然后在后续测试中虚拟单击一个按钮。

还有一些工具可以自动处理此类测试运行，包括结果、统计数据等的可视化。

# c++ - OpenGL PBO 用于纹理上传，看不懂一件事

> ID：14425092
> 
> 赞同：3
> 
> 时间：2013-01-20T13:41:51.097
> 
> 标签：c++, opengl, video-streaming, textures, pbo

好的，我在这里阅读了有关 PBO 的所有内容：[http](http://www.opengl.org/wiki/Pixel_Buffer_Object) ://www.opengl.org/wiki/Pixel_Buffer_Object 和那里[http://www.songho.ca/opengl/gl_pbo.html](http://www.songho.ca/opengl/gl_pbo.html)，但我仍然有一个问题，我没有不知道在我的情况下我是否会从 PBO 中获得任何好处：

我正在做视频流，目前我有一个函数将我的数据缓冲区复制到 3 个不同的纹理，然后我在片段着色器中做一些数学运算并显示纹理。

我认为 PBO 可以增加 CPU -> GPU 的上传时间，但就是这样，假设我们这里的示例取自上面的第二个链接。

```
glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[nextIndex]);

        // map the buffer object into client's memory
        // Note that glMapBufferARB() causes sync issue.
        // If GPU is working with this buffer, glMapBufferARB() will wait(stall)
        // for GPU to finish its job. To avoid waiting (stall), you can call
        // first glBufferDataARB() with NULL pointer before glMapBufferARB().
        // If you do that, the previous data in PBO will be discarded and
        // glMapBufferARB() returns a new allocated pointer immediately
        // even if GPU is still working with the previous data.
        glBufferDataARB(GL_PIXEL_UNPACK_BUFFER_ARB, DATA_SIZE, 0, GL_STREAM_DRAW_ARB);
        GLubyte* ptr = (GLubyte*)glMapBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, GL_WRITE_ONLY_ARB);
        if(ptr)
        {
            // update data directly on the mapped buffer
            updatePixels(ptr, DATA_SIZE);
            glUnmapBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB); // release pointer to mapping buffer
        }

        // measure the time modifying the mapped buffer
        t1.stop();
        updateTime = t1.getElapsedTimeInMilliSec();
        ///////////////////////////////////////////////////

        // it is good idea to release PBOs with ID 0 after use.
        // Once bound with 0, all pixel operations behave normal ways.
        glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, 0); 
```

好吧，无论函数的行为是什么`updatePixels`，它仍在使用 CPU 周期将数据复制到映射缓冲区，不是吗？

所以假设我想以这种方式使用 PBO，即在函数中将我的帧像素更新为 PBO，然后在`display`函数中调用 glTexSubImage2D （应该立即返回）......我会看到任何速度-在性能方面？我不明白为什么它会更快......好吧，我们在 glTex* 调用期间不再等待，但我们在将帧上传到 PBO 的函数期间等待，不是吗？

有人可以帮我弄清楚吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:08:22.277

关于缓冲区对象的要点是，它们可以异步使用。您可以映射一个 BO，然后让程序的其他部分更新它（想想线程，想想异步 IO），同时您可以继续发出 OpenGL 命令。三重缓冲 PBO 的典型使用场景可能如下所示：

```
wait_for_video_frame_load_complete(buffer[k-2])

glUnmapBuffer buffer[k-2]

glTexSubImage2D from buffer[k-2]

buffer[k] = glMapBuffer

start_load_next_video_frame(buffer[k]);

draw_texture

SwapBuffers 
```

这允许您的程序做有用的工作，甚至将数据上传到 OpenGL，同时它也用于渲染

# visual-studio-2012 - Entity Framework 5 VS 2012 中的表值函数未映射

> ID：14425093
> 
> 赞同：0
> 
> 时间：2013-01-20T13:41:56.090
> 
> 标签：visual-studio-2012, entity-framework-5, user-defined-functions, asp.net-4.5

刚刚安装了 Visual Studio Web Express 2012，以便我可以映射 TVF。但我发现，虽然函数作为预期的复杂类型导入模型，但它们并没有显示在模型图中。

该模型首先是数据库，它应该支持映射 TVF。TVF 完美运行。

有没有其他人遇到过这个问题？我想知道 VS 2012 express 的功能是否有限。我还注意到它不会将数据库连接从一个会话持续到另一个会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:58:43.740

复杂类型从未在图中显示。您只能在模型浏览器中看到它们，并作为实体中定义的复杂属性的类型。这与 TVF 映射无关。TVF 应该可以作为生成上下文类的方法使用 - VS2012 Express 在这方面应该没有限制。

# jquery - 如何将 jQuery.ready 与其他匿名自执行函数一起使用？

> ID：14425101
> 
> 赞同：0
> 
> 时间：2013-01-20T13:43:01.177
> 
> 标签：jquery, document-ready, self-executing-function

我对自动执行匿名函数的了解越多，我就越困惑:)

我的问题是：如果我使用 jQuery 的 document.ready 函数，我是否必须将整个应用程序逻辑放在该函数中？如果我在其他一些自动执行的匿名函数中有代码，我如何从 document.ready 调用中触发该代码？（没有在全局命名空间中放置任何变量？）

Document.ready 代码：

```
$(document).ready(function() {
    // how do I trigger another s.e.a.f. here?  
    var myApp = new App();
    myApp.initialize();
}); 
```

我在海洋中的应用逻辑：

```
(function(window){  
   function App(){
        this.initializeApp = function() {
              // we are initialised!
        }
   }
   // how do I prevent putting 'App' in the global space?
   window.App = App;
})(window); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:45:32.067

You can't.

The only way to communicate with a function outside your scope is to put an object somewhere in the global scope.

Instead, you should call `$(document).ready()` *inside* the IIFE, so that it will be able to access local variables via closures.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:55:19.880

“如何从 document.ready 调用中触发该代码”

确保应用程序逻辑首先存在并且您使用您编写的函数名称。

```
(function(window){  
   function App(){
        this.initializeApp = function() {
              // we are initialised!
            console.log('initialised');
        }
   }
   window.App = App;
})(window);

$(function(){
    var myApp = new App();
    myApp.initializeApp();  // not myApp.initialize(); 
}); 
```

但

```
// how do I prevent putting 'App' in the global space? 
```

这是一个单独的问题...

使用单独的实例。

```
jQuery(document).ready(function($){  
   function App(){
        this.initializeApp = function() {
              // we are initialised!
            console.log('initialised');
        }
   }
   // how do I prevent putting 'App' in the global space?

    var myApp = new App();
    myApp.initializeApp();    
});

jQuery(document).ready(function($){
    var myApp = new App(); // this will throw an error - it doesn't exist here
}); 
```

# ios - 最佳核心数据保存策略（何时将数据保存到磁盘）

> ID：14425109
> 
> 赞同：21
> 
> 时间：2013-01-20T13:43:53.307
> 
> 标签：ios, core-data

根据您的经验，对于仅使用一个主线程 NSManagedObjectContext 的 iOS 应用程序，在可靠性和性能方面，将用户设置和缓存数据从服务器持久保存到磁盘的最佳方法是什么？

我看到了下一个选项：

*   在每次更改结束时保存上下文
*   仅在应用退出时保存上下文（如 Apple 的示例中）
*   在应用程序退出时保存上下文，进入后台或变为非活动状态（例如来电）
*   如果有任何更改，请添加计时器以不时保存上下文
*   调用特别准备的延迟保存例程，该例程将收集调用以保存上下文以确保它们不会经常触发

目前我们使用第一个选项，所以我可以说它的可靠性非常好，即使在调试会话期间Xcode终止应用程序后数据也会保存，但是当应用程序变得越来越复杂时，性能可能会受到影响，尤其是。由于从服务器异步加载数据，在应用程序流程的任何时刻都可能发生对数据库的更改。

另一方面，在应用程序的某些事件（退出、进入后台等）保存将提供最佳性能，但您能否根据您的经验说，确保用户不会丢失数据就足够了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T14:07:53.410

我认为您应该经常保存，因为它更可靠（如果应用程序崩溃，您不会丢失数据）并且您可以节省被修改但未使用的对象占用的释放内存。
同时，您不想让您的保存请求压倒 db。
我的建议是在接口文件中公开两种方法，并根据您的情况选择要调用的方法。

```
- (void)save {
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(save) object:nil];
    [_storage save:nil];
}

- (void)setNeedsSave {
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(save) object:nil];
    [self performSelector:@selector(save) withObject:nil afterDelay:1.0];
} 
```

另外，您是否考虑过将第二个托管对象上下文与私有队列一起使用？您可以将其设置为父上下文并在后台保存/获取数据：http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T14:00:37.000

`UIApplicationDelegate`在方法`applicationDidEnterBackground:`中保存上下文，`applicationWillTerminate:`对我来说一直很好。我还会在特殊情况下保存，例如大数据导入或类似情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-19T18:58:23.607

根据 Apple 文档，“建议您在应用程序执行期间的适当时间点保存用户数据，通常是为了响应特定操作。例如，当用户关闭数据输入屏幕时保存数据。不要依赖特定应用程序状态转换以保存您应用的所有关键数据”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-12T14:15:21.080

我曾经在每次更改时保存上下文，但性能确实不是那么好。目前我将上下文保存在获取数据函数的末尾。性能好 4 倍。如果您打算在后台线程中异步调用函数，只需确保在函数的开头和结尾都有`[context lock]`and 。`[context unlock]`

# c# - 将自定义字体加载到 html (webview) - Metro 应用程序

> ID：14425110
> 
> 赞同：2
> 
> 时间：2013-01-20T13:44:11.943
> 
> 标签：c#, html, css, fonts, microsoft-metro

我正在开发一个地铁应用程序：c# 和 xaml。该应用程序将一个 html 文件（存储在一个目录中）加载到一个带有其 css 文件的 webview 中。我想使用自定义字体：我该如何实现？

我试过了

```
@font-face {
    font-family: 'Geeza_Pro';
    src: url('ms-appx-web:///Fonts/Geeza_Pro.ttf') format('truetype');
    }

#div_name{
    font-size:30px;
    font-family: "Geeza_Pro";
} 
```

和

```
@font-face {
    font-family: 'Geeza_Pro';
    src: url('Fonts/Geeza_Pro.ttf') format('truetype');
    }

#div_name{
    font-size:30px;
    font-family: "Geeza_Pro"; 
```

但它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:48:19.300

```
@font-face /* Define New Font */
{
    font-family: coolfont; /* Assign Font Name */
    src: url('fonts/coolfont.ttf'); /* Font File Location */
}

#div_name
{
    font-family: coolfont;
} 
```

# dart - 在这种情况下出现“预期的正式参数名称”的原因是什么？

> ID：14425114
> 
> 赞同：1
> 
> 时间：2013-01-20T13:44:58.897
> 
> 标签：dart

我运行下面的代码，我得到一个没有任何堆栈跟踪的错误。

我的代码：

```
typedef Check<T>(T value, [onError(T value)]);

main () {
  List<Check> checks = [
    (str) => str != null,
    (str) => !str.isEmpty
  ];

  Check<String> doCheck = (String value, [onError(String)]) {
    checks.forEach((Check check) {
      if (?onError) {
        check(value, onError);
      } else {
        check(value);
      }
    });
  };

  doCheck("10");
} 
```

而且，我得到的错误。

```
file:///..()../sample.dart': Error: line 11 pos 12: formal parameter name expected
if (?onError) { 
```

我想获取`onError`作为`doCheck`函数中的可选参数，并将此参数传递给`checks`.

我确认将可选参数转发给“一个”函数......

这是对可选参数的限制之一吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:19:18.573

我会说这是一个错误（参见[问题 8007](http://dartbug.com/8007)）。要解决它，您必须使用临时变量：

```
typedef Check<T>(T value, [onError(T value)]);

main () {
  List<Check> checks = [
    (str) => str != null,
    (str) => !str.isEmpty
  ];

  Check<String> doCheck = (String value, [onError(String)]) {
    final isOnErrorPresent = ?onError;
    checks.forEach((Check check) {
      if (isOnErrorPresent) {
        check(value, onError);
      } else {
        check(value);
      }
    });
  };

  doCheck("10");
} 
```

# php - Regex Issue w/ Single Line XML

> ID：14425118
> 
> 赞同：0
> 
> 时间：2013-01-20T13:45:17.597
> 
> 标签：php, regex

I'm creating a word document via XML, the last step in the process is removing any blank lines. I appear to have a pattern that works when the xml is multiline; however, it's being generated as a single line which is breaking my preg_replace. Consider the following XML:

> `**<w:p** w:rsidR="009E48E3" w:rsidRPr="008C0DAB" w:rsidRDefault="009E48E3" w:rsidP="004E0AE3"><w:pPr><w:ind w:right="-540"/></w:pPr><w:r w:rsidRPr="008C0DAB">**<w:t>text that should be included</w:t>**</w:r>**</w:p><w:p** w:rsidR="009E48E3" w:rsidRPr="008C0DAB" w:rsidRDefault="009E48E3" w:rsidP="004E0AE3"><w:pPr><w:numPr><w:ilvl w:val="1"/> <w:numId w:val="10"/></w:numPr><w:tabs><w:tab w:val="clear" w:pos="1440"/><w:tab w:val="num" w:pos="1080"/></w:tabs><w:ind w:right="-540" w:hanging="720"/><w:rPr><w:noProof/></w:rPr></w:pPr><w:r><w:rPr><w:noProof/></w:rPr><w:lastRenderedPageBreak/>**<w:t> ; </w:t>**</w:r>**</w:p>**`

*Inserted the asterisk's simply to try and help readability*

Blank lines are always in-between `<w:t></w:t>` tags and contain a period or semi-colon. Therefore, the first `<w:p>` tag should remain while the second should be removed.

Here is my pattern: `<w:p .*<w:t>[ ]+?(\.|;)[ ]+?<\/w:t>.*?<\/w:p>`

Any help is apprecriated, thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:14:14.767

您的模式的问题在于，第一个`.*`将直接读取到 XML 的末尾，然后最终回溯到*最后一个* `<w:t>`标记之前。从那里，模式的其余部分将成功匹配 XML 的其余部分。结果 - 整个 XML 被捕获！

Itchy 模式的问题在于，前瞻`(?!.*w:p )`表示“只有在`<w:p>`前面没有更多标签的情况下”。换句话说，模式将只匹配*最后一个* `<w:p>`元素（如果它需要被删除，那就是）。

所有这些问题都源于`.*`. 我的两部分座右铭是，除非绝对必要，否则尽量不要使用它。然后，如果你发现*绝对*有必要使用它，*请尽量不要使用它*:)

以下模式将起作用：

`<w:p [^<]++(?:(?!<w:t>)<[^<]++)++<w:t> *+[\.;] *+<\/w:t>[^<]*+(?:(?!<\/w:p>)<[^<]++)++<\/w:p>`

**笔记：**

1.  `.*`根本没用过！
2.  所有格量词`++`and`*+`并不是真正需要的，但会加速正则表达式。
3.  最后一部分可以简化为`<\/w:t><\/w:r><\/w:p>`如果元素总是这样结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:29:59.660

For this string you provided the following pattern works:

```
<w:p (?!.*w:p ).*?<w:t>[ ]+?(\.|;)[ ]+?<\/w:t>.*?<\/w:p> 
```

I've tested it on [Rubular](http://rubular.com/r/ErCGJnpbxa).

It uses [negative lookahead](http://www.regular-expressions.info/lookaround.html).

# html - Facebook like button's iframe

> ID：14425123
> 
> 赞同：2
> 
> 时间：2013-01-20T13:45:50.460
> 
> 标签：html, facebook, iframe, facebook-like

I put an facebook like iframe related to each post of some webpage as so

```
<iframe src="http://www.facebook.com/plugins/like.php?href={$post_url}&amp;
layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;
font=verdana&amp;colorscheme=light" allowtransparency="true" style="border:
medium none; overflow: hidden; width: 90px; height: 21px;" frameborder="0"
scrolling="no"></iframe> 
```

The count works well but when clicking the like button, no popup is showed to enter a message. Could someone explain ? (my site uses an app facebook, and there are og meta for each page, could that causes problem ?)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:20:14.383

# ant - 如何从 RAD / Eclipse 内部运行/调试 ANT

> ID：14425124
> 
> 赞同：0
> 
> 时间：2013-01-20T13:46:05.720
> 
> 标签：ant, installation, rad, launcher

为了进行与[此](https://stackoverflow.com/questions/14141657/ant-converting-a-string-to-path-with-location-attribute)问题相关的更多研究/调试，我正在尝试从 RAD 中调试 ANT。我已经下载了 ANT 源代码并编译了 ANT。我想从 RAD 中以 ANT java 程序的形式启动我的编译版本，以使我能够进行调试。我查看了这些链接 - 1.[从 RAD 启动多个 java 程序](https://stackoverflow.com/questions/316761/how-to-launch-multiple-java-programs-with-one-configuration-on-separate-consoles)和 2.[在 RAD 中设置 ANT 启动器](http://individual.utoronto.ca/kia/)。这两个都被引用 3\. [here](https://stackoverflow.com/questions/8279408/how-to-run-debug-multiple-java-programs-with-one-ant-buildfile-on-seperate-con)。

我仍然无法理解如何从创建 ant 启动器（如 2 中所述）到将其作为 Java 程序在 RAD 中运行，如 1 中所述。在链接 3 中，该人提到他们能够做到，但不知何故我无法从我使用 2 中的链接创建的 ANT 启动器转换为定义 Main 类和 VM 参数，如 1 中所述。

有人可以解释怎么做吗？我尝试将其作为评论添加到问题 #3 中的链接，但我无法将其添加为评论，因此创建了一个新问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:30:20.377

很抱歉在这里浪费资源。我无法让它工作，因为我将 -f "build file" 放在位置框而不是参数框中。一旦我修复了它，它现在正在工作

# wcf - Security notification bar

> ID：14425125
> 
> 赞同：0
> 
> 时间：2013-01-20T13:46:17.640
> 
> 标签：wcf, visual-studio-2012, web-reference

I need to add a web reference in Visual Studio 2012 (because service reference generates a blank reference CS and I have given up after hours of googling).

When I go to add the web reference (`add service reference` → `advanced` → `add web reference`) and enter the `WSDL URL` I get the IE Notification Bar in the dialog with the message:

`To help protect your security, your web browser has blocked this site from downloading files to your computer`. The option to "Download file" does not work.

I've changed IE security settings to minimum and added the domain to the list of trusted sites but did not have any effect. I also uninstalled `IE10` completely and still get the notification bar. I am using Windows 8.

Anyone shed any light on this or had any success adding a web reference in VS 2012?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:15:29.987

如果您可以使用浏览器下载 WSDL，请将其下载并保存到文件中。然后，您可以通过将其指向该文件从 Visual Studio 中引用它。或者，您可以使用`svcutil.exe`或`wsdl.exe`从命令行生成代理。

# sml - Does Standard ML support Unicode?

> ID：14425128
> 
> 赞同：12
> 
> 时间：2013-01-20T13:46:32.357
> 
> 标签：sml, polyml

Does Standard ML support Unicode?

I believe it does not but cannot find any authoritative documentation for SML stating such.

A yes or no is all that is needed, but you must know for a fact. No guessing or I believe answers. An authoritative link would be better.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T15:53:43.217

并不真地。目前标准中的所有内容是在字符和字符串文字中使用转义的能力`\uXXXX`，并且它至少*允许*Unicode 作为基础字符编码`char`或可选的`WideChar.char`. 但是标准基础库没有规定对额外的 Unicode 感知功能的任何支持。

特定的实现可能有额外的支持，您可能会找到一些第三方 unicode 库，但仅此而已（不幸的是，我手头没有指针）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T19:24:40.570

这在很大程度上取决于您所说的“Unicode”是什么意思，它是许多事物的许多标准的集合。我还没有看到任何完全支持 Unicode 的语言或系统，我什至不知道这在所有细节上意味着什么。

您当然可以在 SML 中使用 UTF-8：发明这种编码是为了让 ASCII 应用程序更容易支持 Unicode。这可能会导致它比 Java 中看到的 UTF-16 更好、更有效地表示 Unicode，后者确实“支持 Unicode”，但是它存在许多实际问题（如代理字符）。

对于 SML 字符串中的 UTF-8，一个问题是如何使用字符串文字。像 Poly/ML 这样的系统允许重新定义 ML 顶级漂亮打印机`type string`，并且包装编译器以以 Unicode 友好的方式处理字符串文字也是可行的。这两者都是在基于 Poly/ML 的 Isabelle/ML 中完成的。因此，如果您将那个大定理证明环境作为 ML 开发平台，您就会内置某种 Unicode 支持（通过所谓的“伊莎贝尔符号”）。

# objective-c - 如何创建状态栏弹出视图（菜单）？

> ID：14425129
> 
> 赞同：2
> 
> 时间：2013-01-20T13:46:36.683
> 
> 标签：objective-c, macos, nsmenu, nsstatusitem

![在此处输入图像描述](../Images/01fbad7ce4199dac0b998d6a212a8eaf.png)

顶部的三角形看起来如此美妙，但我无法像这样组成。

我曾尝试编写如下代码，但我看到了一个普通的菜单。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {// Insert code here to initialize your application

NSStatusItem * statusItem = [[[NSStatusBar systemStatusBar] statusItemWithLength:110] retain];
[statusItem setTitle:@"Test"];
[statusItem setEnabled:YES];
[statusItem setHighlightMode:YES];

statusItem.menu = [[NSMenu alloc] initWithTitle:@"menu"];
NSMenuItem * menuItem = [[NSMenuItem alloc] initWithTitle:@"menuItem1" action:NULL keyEquivalent:@""];
[statusItem.menu addItem:menuItem]; } 
```

![在此处输入图像描述](../Images/b110550bf02e2d6b9877f04847bee7fa.png)

请帮我做点什么来执行它。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:08:58.650

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
// Insert code here to initialize your application

NSStatusItem * statusItem = [[[NSStatusBar systemStatusBar] statusItemWithLength:110] retain];
[statusItem setTitle:@"Test"];
[statusItem setEnabled:YES];
[statusItem setHighlightMode:YES];
[statusItem setTarget:self];
[statusItem setAction:@selector(showPopover:)];
}

- (void) showPopover:(id)sender {
NSLog(@"sender is: %@", sender);
RSTestPopoverViewController * viewController = [[RSTestPopoverViewController alloc] initWithNibName:@"RSTestPopoverViewController" bundle:nil];
NSPopover * popover = [NSPopover new];
popover.contentViewController = viewController;
[popover showRelativeToRect:NSZeroRect ofView:(NSView *)sender preferredEdge:NSMinYEdge];
} 
```

popover回调的参数是NSStatusBarButton类的一个实例。这是我控制台中的输出。

```
2013-01-20 23:08:36.602 TestMacWindow[1190:303] sender is: <NSStatusBarButton: 0x101917d10> 
```

# twitter - 使用我的自定义 API 对 twitter（iPhone）的正确登录响应是什么

> ID：14425130
> 
> 赞同：0
> 
> 时间：2013-01-20T13:46:39.240
> 
> 标签：twitter, oauth, twitter-oauth

我正在为 Twitter 编写一个自定义 API，它将在 iPhone 版 Twitter 中使用。我的第三方 API 对 twitter 的响应是什么，可以让 twitter 认为用户已登录。

I know the twitter for iPhone auth step is using XAuth to /oauth/access_token, when it is set my API, I will gives the response 'oauth_token=191074378-1GWuHmFyyKQUKWV6sR6EEzSCdLGnhqyZFBqLagHp&oauth_token_secret=NpCkpRRC5hGEtikMLnQ2eEcEZ0SIVF5Hb2ZgIwmYgdA&user_id=191074378&screen_name=oauth_test_exec&x_auth_expires=0' directly to twitter for iPhone. 但是 twitter 告诉我服务器实习生错误而不是正确的响应。什么是不正确的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:18:24.730

现在您已经公开了您的 OAuth 令牌，任何人都可以复制它们并使用它们来违反 Twitter TOS。您应该立即访问 dev.twitter.com 并重置您的 OAuth 令牌。这就是它被称为 OAuth Secret 的原因。

# logging - Arduino UNO - 数据记录

> ID：14425132
> 
> 赞同：0
> 
> 时间：2013-01-20T13:46:46.330
> 
> 标签：logging, if-statement, serial-port, switch-statement, arduino

我正在使用[Arduino Uno](http://en.wikipedia.org/wiki/Arduino#ArduinoUno)进行一些数据记录。我想观察它并使用串行命令行中的命令启动日志。但我也希望能够在不停止记录器的情况下关闭串行监视器。

我希望当我串行写入 1 时，“sta”设置为导致 sta2 = 1 的输入，当我关闭监视器时它应该保持高电平，但显然不是。

### 代码

```
void loop() {
    if (Serial.available()){
        ser = Serial.read();
        switch (ser){
            case '0':
                sta = 0;
                sencortjek = 1;
                Serial.println("logger stopped");
                break;
            case '1':
                sta = 1;
                Serial.println("logger started");
                if (sta == 1){
                    sta2 = 1;
                }
                break;
        }
    }
    if (sta2 == 1)
    {
        prog();
    }
} 
```

每次进行记录时，板上的 LED 都会闪烁。当我关闭显示器时，它会停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:18:09.013

arduino 上闪烁的 LED 是 rx/tx，因为串行端口正在使用中。当您启动串行监视器时，您的 arduino 将重新启动。如果您在读取数据流的串行端口上没有任何内容（监视器已关闭），那么您无论如何都没有记录任何内容。

# python - 日期对象只有年和月

> ID：14425133
> 
> 赞同：29
> 
> 时间：2013-01-20T13:46:50.320
> 
> 标签：python, date, dictionary, key

是否可以仅使用年和月创建[日期对象？](http://docs.python.org/2/library/datetime.html#datetime.date)我不需要白天。

```
In [5]: from datetime import date

In [6]: date(year=2013, month=1)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-a84d4034b10c> in <module>()
----> 1 date(year=2013, month=1)

TypeError: Required argument 'day' (pos 3) not found 
```

我在字典中使用日期对象作为键，并且 1 月 20 日必须与 1 月 21 日具有相同的键，因为它们位于同一月份和年份。

在此之前我使用了一个简单的整数作为月份数。不幸的是，我也需要知道年份！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-20T13:50:57.113

不，你不能那样做。对于您的用例，请改用元组：

```
key = (2013, 1) 
```

由于您不需要对值进行日期操作，因此一个元组就足够了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-20T13:56:34.030

作为其他答案的补充，您可以使用 namedtuple。

```
from collections import namedtuple
MyDate = namedtuple('MyDate', ['month', 'year'])
dkey = MyDate(year=2013, month=1) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-26T04:10:02.993

```
import datetime

date = datetime.date(year=2013, month=1, day=4)
str(date.year) + '-' + str(date.month) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-31T01:58:40.103

如果你想使用`datetime`，你必须遵循它的属性。这里我引用官网的一段话：

> “一个理想化的天真日期，假设当前的公历一直有效，并且永远都会有效。属性：年、月和日。”

所以，你不能忽略一天，记得给任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-11T16:29:49.590

这实现了一个类似于 datetime.date 的类，但您无需指定日期。即它允许您“创建仅包含年和月的日期对象”。

```
class Mdate(datetime.date):
    """ A datetime.date where day doesn't matter. """

    def __new__(cls, year, month):
        """Python calls __new__ instead of __init__ for immutable objects."""
        return super().__new__(cls, year, month, 1)

    def __repr__(self):
        """Because you're implementing __new__ you also need __repr__ or else you get
        TypeError: __new__() takes 3 positional arguments but 4 were given."""
        return '{0}({1}, {2}, 1)'.format(self.__class__.__name__, self.year, self.month)

    def __reduce__(self):
        """You need __reduce__ to support pickling."""
        return (self.__class__, (self.year, self.month)) 
```

我有一大堆代码，其中月份的日期无关紧要，从日期构造函数中删除日期可以澄清该代码。

样品用途：

```
d = Mdate(2020, 12) 
```

# java - 如何使用 Java 流式传输 mp3 文件？

> ID：14425135
> 
> 赞同：5
> 
> 时间：2013-01-20T13:47:01.347
> 
> 标签：java, streaming

我有一组 mp3 文件，我想以连续流的形式将它们一个接一个地发送给客户端 - 类似于基于 mp3 文件列表的互联网收音机（假设列表是无穷无尽的）。

最好的方法是什么？协议是 HTTP 还是 RTSP 都没关系（流行的播放器无论如何都支持一切）。

这可以用 java servlets + tomcat 来完成，还是需要像 Icecast 这样的特殊服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:03:35.407

[您可以完全按照此处](https://stackoverflow.com/a/14476402/1449982)答案中的说明使用球衣休息服务器

奇迹般有效

# magento - Magento：在管理员中查看订单时将自定义块添加到“付款信息”

> ID：14425137
> 
> 赞同：0
> 
> 时间：2013-01-20T13:47:04.973
> 
> 标签：magento

我正在使用 Magento 版本 1.7.0.2。在管理员中查看订单时，我一直在尝试找出将一些额外的付款信息添加到“付款信息”部分的最佳方法。例如，我想添加已处理信用卡的到期日期（类似于保存的抄送方法的显示方式）。

我不希望覆盖 Mage/Payment/Block/Info/Cc.php，因为这样更改也会出现在其他不需要的地方（例如在销售电子邮件中）。

感谢您花时间阅读我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:05:35.053

在 magento 中，您有 2 个用于支付信息的模板

1.  在销售电子邮件/前端显示

    > /app/design/frontend/base/default/template/payment/info/default.phtml

2.  显示在管理区

    > /app/design/adminhtml/default/default/template/payment/info/default.phtml

据我所知，#2 仅显示在管理员的订单详细信息页面上，但如果没有，您可以执行类似的操作。

```
 <?php if ($this->isAdmin() && 'sales_order' == Mage::app()->getRequest()->getControllerName()): ?>
     //display expiration date of the credit card
     // call function in  Mage/Payment/Block/Info/Cc.php
     ....
 <?php endif; ?> 
```

要实施，`isAdmin()`请参阅[Magento 请求 - 前端还是后端？](https://stackoverflow.com/questions/9693020/magento-request-frontend-or-backend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:26:33.243

I ended up building a simple extension that creates a new tab on the order page in the admin to display this additional information. I had difficulty getting the info to appear on the main tab for the orders page. So I just created the new tab with the info.

# c# - WPF ObjectDataProvider 错误“路径无效”

> ID：14425144
> 
> 赞同：0
> 
> 时间：2013-01-20T13:48:02.450
> 
> 标签：c#, wpf

完整的错误如下：

**路径无效。检查数据库的目录。[ 路径 = C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Externals**

我正在执行以下操作。创建本地数据库。要通过绑定到 DataGrid 将其连接，我使用 ObjectDataProvider 能够根据[本](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples)教程在设计器中编辑数据。我在顶层创建了一个名为“Externals”的文件夹项目树。那里驻留 database.sdf 和 dataSet.xsd 文件。现在，我有一个 UserControl，我在其中执行此操作：

```
<UserControl xmlns:local="clr-namespace:TypeAppRelease.Sasmaster.Data"
         x:Class="TypeAppRelease.controls.AdminPageControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

         mc:Ignorable="d" 
         d:DesignHeight="700" d:DesignWidth="900" >

    <UserControl.Resources>

    <ObjectDataProvider x:Key="AlphaBetProvider"  ObjectType="{x:Type local:AlphaBetDataProvider}" />
    <ObjectDataProvider x:Key="AlphaBet" ObjectInstance="{StaticResource AlphaBetProvider}" MethodName="GetAlphaBet" />
    </UserControl.Resources> 
```

然后稍后在控件中，我将数据注入 DataGrid：

```
 <Grid Background="#FFE5E5E5" HorizontalAlignment="Stretch" 
                  VerticalAlignment="Stretch" Height="111"  DataContext="{Binding Source={StaticResource AlphaBet}}">

                <DataGrid Name="grdEmployee" ItemsSource="{Binding}"/>

  </Grid> 
```

最后我有自定义适配器类：

```
namespace TypeAppRelease.Sasmaster.Data
{
    class AlphaBetDataProvider
    {
     AlphaBetErrorTableTableAdapter adapter;
    _MyDatabase_1DataSet dataset;
    public AlphaBetDataProvider()
    {
        adapter = new AlphaBetErrorTableTableAdapter();
        dataset = new _MyDatabase_1DataSet();
        adapter.Fill(dataset.AlphaBetErrorTable);

    }
    public DataView GetAlphaBet()
    {
        return dataset.AlphaBetErrorTable.DefaultView;
    }
  }
} 
```

不知何故，在收到此行的错误时：

```
 <ObjectDataProvider x:Key="AlphaBetProvider"  ObjectType="{x:Type local:AlphaBetDataProvider}" /> 
```

该项目编译并运行，显示 datagrid 中的数据，但我无法像教程中所做的那样编辑 DatGrid，我不明白为什么程序试图访问该路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:13:07.373

最后我通过重置数据库连接解决了这个问题。

# bash - bash 脚本如何扩展文件 glob？

> ID：14425149
> 
> 赞同：-2
> 
> 时间：2013-01-20T13:49:29.917
> 
> 标签：bash, tar, glob

在此代码中，该`excludespec`变量应与它的所有子字符串匹配，但它似乎在执行时评估匹配它的实际文件，而不是将其精确表示传递给使用它的 tar 命令。

```
excludespec=${PWD##*/}\_$USER\_`hostname`.bkcd_backup* 
```

最终结果是正在创建的存档与排除列表不匹配，因此 tar 输出：

`tar: .: file changed as we read it`

定义它的字符串是否在做我不知道的事情？

这是代码：

```
#!/bin/sh
# bkcd - backup current directory in situ

DMY_M() {
  date +%Y%m%d_%H%M
}

timestring=$(DMY_M)
echo `pwd` - $timestring > .bkcdspec  
filename=${PWD##*/}\_$USER\_`hostname`.bkcd_backup.$timestring.tar.gz    
excludespec=${PWD##*/}\_$USER\_`hostname`.bkcd_backup*
fullexclude="$excludespec"tar.gz    
echo excludespec - $excludespec
echo filename - $filename
echo fullexclude - $fullexclude    
tar -cpzf $filename --exclude=$fullexclude .
rm .bkcdspec 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:45:20.187

抑制通配的常用技巧是将字符串括在双引号中（当您想要扩展反引号或变量时）或单引号（当您不想要时）。因此，在这里，您将消除`$excludespec`并设置`$fullexclude`：

```
fullexclude="${PWD##*/}_${USER}_$(hostname).bkcd_backup*.tar.gz" 
```

并将其用作：

```
tar -cpzf "$filename" --exclude="$fullexclude" . 
```

（如果没有双引号`"$fullexclude"`，如果你碰巧有一些文件被命名`--exclude=...value-of-$fullexclude`，你会感到惊讶。你不太可能有这样的文件，但你最好在它出现之前阻止它。）

请注意，当您为调试而回显时，停止通配也很重要。再次，双引号：

```
echo "filename=$filename"
echo "fullexclude=$fullexclude" 
```

否则，`echo`会在名称上进行全局扩展，再次使您感到困惑。

将这些变化放在一起会导致：

```
#!/bin/sh
# bkcd - backup current directory in situ

timestring=$(date +%Y%m%d_%H%M)
echo "$(pwd) - $timestring" > .bkcdspec
prefix="${PWD##*/}_${USER}_$(hostname).bkcd_backup"
filename="$prefix.$timestring.tar.gz"   
fullexclude="$prefix.*.tar.gz"
echo "filename - $filename"
echo "fullexclude - $fullexclude"   
tar -cpzf "$filename" --exclude="$fullexclude" .
rm .bkcdspec 
```

# jquery - jQuery获取最深层次的文本节点兄弟

> ID：14425152
> 
> 赞同：0
> 
> 时间：2013-01-20T13:50:40.763
> 
> 标签：jquery, text, children, paragraph

我的`div`s 可能包含如下文本：

```
<div>
<p>
<span>My text <br /> Some more text</span>
</p>
</div> 
```

或者像这样

```
<div>
<p> Here's a chunk of text </p>
</div> 
```

或任何其他组合，但最终级别的文本可能会或可能不会被分隔`<br />`。（a`span`是包含`br`单个节点吗？还是同一级别的两个兄弟姐妹？）

在第一种情况下，我想要的最深的孩子的文字是：

```
My text
Some more text 
```

在第二：

```
Here's a chunk of text 
```

我的观点是——无论最深层次是什么，我都希望所有兄弟姐妹都处于那个层次。有什么帮助吗？

## 编辑

我不能简单地使用`$('p').text()`，因为这将只返回文本，我需要对其进行编辑然后返回到*相同的兄弟姐妹*，同时保留它们的样式。所以例如，如果我有

```
<div>
<p>
<strong>
<span style='font-family:arial'> Here's some <br /> text</span>
</strong>
</p>
</div> 
```

然后我`$('p').text()`会得到“这里有一些文字”。现在当我在一个变量中操作这个文本时，比如说`changedText`（其中`<br />`保留了），我怎么能把它放回它的来源？我不能简单地做

`$('p').text(changedText);`我也做不到`$('p').html(changedText');`

因为`<strong>`and`<span>`格式会丢失。所以这就是为什么我只想通过在 a 中选择最深级别的文本节点来访问所有文本，`div`比如说在 a 中`$textNodes`。这样我就可以`$textNodes.text(changedText);`在保留文本节点父节点的结构和样式的同时简单地做到这一点。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:34:10.803

您可以使用`.children()`直到到达最深的节点。我将它包装在一个 jQuery 函数中，如下所示。

```
$.fn.deepest = function(){
  var $level = this.first();
  while (!!$level.children(":not(br)").length) {
    $level = $level.children();
  }
  return $level;
}; 
```

```
console.log($("div").deepest());
//[ <span>​My text <br>​ Some more text</span>​ ] 
```

您可以使用`.contents()`获取文本节点并操作它们或`.text()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:21:39.453

您可以只定位`BR`as 选择器并替换它

```
$('p br').replaceWith('\n'); 
```

演示：http: [//jsfiddle.net/fhnHR/1/](http://jsfiddle.net/fhnHR/1/)

如果与其他`BR`更高的潜在问题`DIV`使用`.last()`隔离最后一个`BR`，或用于`filter()`检查最后一个是否处于最深层次。

提供一些更真实的 html 示例来展示潜在的深度和可能的树结构会有所帮助。您可以将它们放在小提琴演示中并更新它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:25:33.127

做这样的事情：http: [//jsfiddle.net/hWkkJ/2/](http://jsfiddle.net/hWkkJ/2/)

jQuery：

```
$(function(){
  $('.append').append($('p').html()); 
}); 
```

html:

```
<div>
<p>
<span>My text <br /> Some more text</span>
</p>
</div>

<div class="append"></div> 
```

# asp.net - 在asp mvc中的where子句中带有列表的数据库请求

> ID：14425154
> 
> 赞同：1
> 
> 时间：2013-01-20T13:51:23.283
> 
> 标签：asp.net, asp.net-mvc

是否有可能与以前的列表有一个 where 子句？

举个例子 ：

```
List<Stable> StableList= db.Stables.Where(s => s.OwnerId == user.UserId).ToList();

List<Pony> PonyList= db.Ponys.Where(p=> p.PonyStableId == {StableList.StableId })OrderByDescending(p => p.PostDate).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:15:49.980

```
List<int> StableList= db.Stables.Where(s => s.OwnerId == user.UserId)
                             .Select(s => s.StableId)
                             .ToList();

List<Pony> PonyList= db.Ponys.Where(p=> StableList.Contains(p.PonyStableId))
                             .OrderByDescending(p => p.PostDate)
                             .ToList(); 
```

可能不是最有效的。你可以做一个`Join`between`Stables`和`Ponys`where `Stable.OwnderId == User.UserId`。那也行。

# c - 负数问题

> ID：14425155
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:51:27.973
> 
> 标签：c, pic

我有这个“简单”的代码。

```
union
{
    unsigned int res;
    char         bytes[2];
} ADC;

char ADC_num[5];
float temprature;

void vis_temp (void)        //  Show temp..
{ 
    signed int l, length;
    unsigned int rem;

    GO_nDONE=1;             // initiate conversion on the channel 0   

    while (GO_nDONE) continue;

    ADC.bytes[0]=ADRESL;
    ADC.bytes[1]=ADRESH;

    utoa(ADC_num, ADC.res, 10);

    temprature = (float) ADC.res * 478.1 / 1024;
    temprature = temprature - 50.0;

    l = (signed int) temprature;
    temprature -= (float) l;  
    rem = (unsigned int)(temprature* 1e1);

    sprintf(&ADC_num, "%i.%u", l, rem); 
```

当读取`ADC_res`（引脚上的电压，温度传感器）温度为 0 度或更低时，程序会写入“0.65500”而不是“-3.5”或类似的值。我应该将权利声明为已签名和未签名的 int。任何修复它的提示，或有其他转换方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:58:49.583

```
temprature = (float) ADC.res * 478.1 / 1024;
temprature = temprature - 50.0; 
```

假设现在`temprature`有一个负值`-x.yz`。

```
l = (signed int) temprature; 
```

现在`l = -x`，并且

```
temprature -= (float) l; 
```

`temprature = -x.yz - (-x) = -0.yz`.

```
rem = (unsigned int)(temprature* 1e1); 
```

乘以 10，然后转换为`unsigned int`. 通常，这会导致未定义的行为（6.3.1.4 (1)）：

> 当实浮点类型的有限值转换为除 以外的整数类型`_Bool`时，小数部分被丢弃（即，该值被截断为 0）。如果整数部分的值不能用整数类型表示，则行为未定义。^(61))
> 
> ^(61))将整数类型的值转换为无符号类型时执行的求余运算不需要在将实浮点类型的值转换为无符号类型时执行。因此，可移植实浮点值的范围是`(−1, Utype_MAX+1)`。

但是将负值转换为`unsigned int`无论如何都会产生错误的结果，即使做了余数运算，你想要的是绝对值，所以你应该转换

```
rem = (unsigned int)fabsf(temprature * 1e1); 
```

那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:31:09.643

I think the problem may be coming from the call to the `utoa()` function.

The `utoa()` function prototype is generally as follow

```
char * utoa(unsigned int n, char * buffer, int radix); 
```

In your code you have inverted the two first parameters. You are modifying the ADC structure through this call. I am curious how this could ever be compiled without any error? Any decent compiler would complain about passing an argument which is not a pointer type.

Try with the following

```
utoa(ADC.res, ADC_num, 10); 
```

# winapi - 应用程序忽略 VBS SendKeys

> ID：14425160
> 
> 赞同：0
> 
> 时间：2013-01-20T13:52:00.103
> 
> 标签：winapi, vbscript, sendkeys, wsh

尝试通过向应用程序发送击键来自动生成报告。我可以将应用程序向前推进，但它会忽略所有 SendKeys 命令。问题是什么？接下来我应该尝试什么？这是我的代码：

```
 Const App_Title = "AccountRight Plus"  ' Window title
    Dim Wsh, win_title
    ' Create the WshShell object, which Run and AppActivate require.
    Set Wsh = WScript.CreateObject("WScript.Shell")
    Wsh.AppActivate App_Title
    WScript.Sleep 800
    Wsh.SendKeys "^i"
    WScript.Sleep 800
    Wsh.SendKeys "{TAB}"
    WScript.Sleep 800
    Wsh.SendKeys "{TAB}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:45:59.557

Probably you have confusion with the caps lock key and stroke "^i". Just hypothesis anyway. If this is not the case then at least not judge me.

So I made a code that I can test here, to explain what I mean.

```
Set Wsh = WScript.CreateObject("WScript.Shell")
Wsh.Run "notepad"
Wsh.AppActivate "Untitled - Notepad"
WScript.Sleep 100
Wsh.SendKeys "111..."
WScript.Sleep 100
Wsh.SendKeys "^a" ' (ctrl+a) Select All command 
```

If by chance the caps lock key is off, above code will select all text, but stroke "^a" (or even "^(a)") will fail if caps lock is on. And contrariwise, if you use "^A" will fail with caps lock off.

There no way to get the state of caps lock (or other keys) in VBScript, but I found 2 work arounds, call them cheats if you like :)

1.  A bit weird way to go, is to duplicate your SendKeys command.

    Wsh.SendKeys "^a" : Wsh.SendKeys "^a"

2.  To send stroke to caps lock in advance.

    Wsh.SendKeys "{CAPSLOCK}" : Wsh.SendKeys "^a"

# sql - 规范化和多值字段

> ID：14425165
> 
> 赞同：3
> 
> 时间：2013-01-20T13:52:32.737
> 
> 标签：sql, ms-access, database-design

我的学生在访问中使用多值字段时遇到问题，因此对规范化感到困惑。

这是我能弄明白的。给定一对多的关系，例如

```
Articles    Comments
--------    --------
artID{PK}   commID{PK}
text        text
            artID{FK} 
```

Access 可以将此信息存储到一个表中，例如

```
Articles
--------
artID{PK}
text
comment
   + value 
```

“value”指的是评论“column”的多个评论值，它实际上存储为单独的表。值如何存储的细节 - 表，它的 PK 和 FK - 是完全隐藏的，但是可以查询多值字段，例如在上面的示例中使用查询

```
INSERT INTO article( [comment].Value )
VALUES ('thank you')
WHERE artID = 1; 
```

但是查询并没有完全揭示实现多值字段的隐藏表的底层结构。

鉴于此（在我看来是灾难） - 我的问题是如何帮助数据库设计和规范化的新手了解 Access 为他们提供了什么，为什么它可能没有帮助，并且这不是忽略关系基础知识的理由模型。进一步来说：

*   除了上述查询之外，还有更好的方法来揭示多值字段背后的结构吗？
*   有没有很好的例子说明多值字段不够好，并显示了明确规范化的优势？
*   是否有直接的方法来获得 Access 多值的多选视觉输出，但基于单独的显式表？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:12:14.680

我不能给你使用这个功能的建议，因为我从来没有使用过它；但是，我可以给你不使用它的理由。

*   我想完全控制我正在做的事情。多值字段不是这种情况，因此我不使用它们。

*   此功能不可扩展。例如，如果您想在评论中添加日期字段怎么办？

*   有时需要将 Access（后端）数据库升级为“大”数据库（SQL Server、Oracle）。这些数据库不提供这样的功能。通常由客户决定必须使用哪个数据库。最近，我不得不将使用 Oracle 后端的 Access 应用程序（前端）迁移到 SQL-Server 后端，因为我的客户决定放弃他的 Oracle 服务器。因此，最好限制自己仅使用常用功能。

*   对于编辑查找表等常见任务，我创建了通用表单。我现有的解决方案不适用于多值字段。

*   我有一个（自制）工具，可以将开发人员站点上的数据库结构更改与客户站点上的数据库同步。此工具无法处理多值字段。

*   我有用于安全管理的工具，可以授予对表的 SELECT、INSERT、UPDATE 和 DELETE 权限或撤销它们。同样，管理工具不适用于多值字段。

*   有一个单独的评论表格可以让您快速检查所有评论（通过打开表格）。您不能对多值字段执行此操作。

*   您不会在数据库图中看到文章和评论之间的一对一关系。

*   使用单独的表，您可以选择是否要将删除级联到详细信息表。如果你不这样做，你将无法删除一篇文章，只要它附有评论。如果您想保护评论不被无意删除，这可能是可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T01:35:48.000

认识到物理关系和逻辑关系之间的区别很重要。今天，整个 Internet 和 Web 服务 (SOAP) 在很大程度上实现了一种本质上是多值的数据格式。

当您使用关系数据库（例如 Access）表示多值数据时，您在幕后使用的是传统的（且合法的）关系。我不能强调这样，那么在 Access 中使用多值列实际上是一个合法的关系模型。

表没有暴露的事实并不能否定这个问题。事实上，如果您将发票（主记录和重复详细信息）表示为 XML 数据立方体，那么我们会看到两件事：

1) 您可以使用 Access 等关系数据库构建和表示该发票 2) 这种标准化的关系数据模型也可以表示为单个 xml 字符串。3) 删除 XML 记录（或字符串）意味着子行（发票详细信息）的级联删除必须发生。

因此，虽然确实将多值字段添加到 Access 以处理 SharePoint，但最重要的是要意识到可以将此类数据映射到关系数据库（如果您不能这样做，那么 Access 将无法使用该 XML使用关系数据库表作为 ACCESS CURRENTLY DOES RIGHT NOW 的数据）。

对于 XML 和 SharePoint 等网络，消费、管理和利用此类数据的需求不仅普遍存在，而且实际上是 Internet 的基本内容。

随着越来越多的数据变得复杂，我们发现多值数据在使用中的需求呈爆炸式增长。因此，任何使用所谓的“时尚”互联网的人都在依赖和使用实际上是非常常见的 XML 并且本质上是多值（复杂）的数据。

只要保留逻辑（非物理）关系数据模型，就可以使用多值列来表示此类数据，这正是 Access 正在做的事情（它将关系数据模型映射到复杂模型）。请注意，复杂 (xml) 数据模型本质上不一定是关系模型。但是，如果您要将此类数据映射到 Access，则复杂的多值模型必须符合关系数据模型。

这正是 Access 中发生的事情。

没有公开这样一个正确和合法的数学关系模型这一事实在这里没有什么问题。我们是否建议因为 Excel 不公开使用的二进制代码，所以用户永远不会了解计算机？或者也许我们都必须用汇编程序进行编程，这样我们才能正确地学习计算机的工作原理。

归根结底，谁在乎，为什么这很重要？今天人们驾驶自动驾驶汽车这一事实并没有抛弃他们使用不同齿轮来操作汽车的概念。我们关闭整个社会的想法是因为有人要驾驶自动驾驶汽车，或者在这种情况下使用复杂的数据，这对我们来说是愚蠢的。

因此请记住，Access 中确实存在对 SQL 的扩展来查询多值数据，但这里也指出了这些基础表并未公开。但是，如前所述，公开此类表仍然需要一个不更改或混淆级联删除，因为需要该功能来维护复杂数据模型 (xml) 和使用两个相关表来表示这些数据。

换句话说，如果您取消了用户使用参照完整性选项的能力，您可以使用相关表来表示复杂的数据模型。RI 选项必须保持这些隐藏表中的设置，否则此类数据将无法返回到使用它的 XML 或复杂数据模型。

如前所述，关于用户被教导汽油如何与氧气反应以学习驾驶汽车，或使用文字处理器并被迫学习关系模型并公开基础表在这里没有什么意义。

然而，这里关于这些表被暴露的观点是合理的担忧。

真正的问题是 SQL 服务器和 Oracle 等无法使用或表示复杂数据，而访问可以使用此类数据。

如前所述，复杂的数据船早就启航了！XML、soap 和互联网的基本技术都是基于这种复杂的数据模型。

实际上，SQL Server、Oracle 和大多数数据库无法使用这种多值数据来表示它，而无需用户以关系方式创建和建模此类数据，这是 SQL Server 等的一大缺点。

Access 在使用这些数据的能力方面是独一无二的。

因此，对于使用智能手机、iPad 或网络的任何人，您都在使用围绕复杂数据构建的基本技术，而 Access 现在允许这样做。

鉴于越来越多的数据本质上是复杂的，该行业的其他公司很可能不得不效仿。如果数据库行业不发生变化，那么主流的传统关系数据库系统就不会成为这些数据的安息之地。

目前正在迅速发生一种远离将数据存储在相关表中的趋势，SharePoint 甚至 Google 文档等产品就是这一概念的证明。因此，Access 只是对市场压力做出反应，其他数据库供应商很可能不得不效仿或干脆放弃成为称为互联网的“时尚”的一部分。

XML 和复杂的数据结构现在是我们行业的主要内容和事实——这不是我们都应该逃避的问题，但实际上应该接受。

```
Albert D. Kallal (Access MVP)
Edmonton, Alberta Canada
kallal@msn.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T10:06:37.700

技术讨论很有趣。我认为真正的问题在于学生的理解。因为它在 Access 中可用，学生会使用它，并且最初它可能会为一些设计问题提供简单的解决方案。当他们尝试使用数据时，负面因素将在稍后发生。也许一个演示问题的简单示例会说服一些学生避免使用多值字段？也许以另一种更有用的格式存储数据的示例会有所帮助？

祝你好运 ！

彼得布拉德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T16:32:06.473

MS Access 在简化数据库管理和抽象出大量复杂性方面做得很好。然而，这使得 dbms 概念的学习有点困难。您是否尝试过使用其他“标准”dbms 工具，如 MySQL（甚至 sqlite）。从学习的角度来看，他们可能会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-03T17:59:38.220

我知道这篇文章很旧。但是，它与我在该主题上看到的所有其他帖子都不完全相同。这个有人为使用多值字段提供了一个很好的案例......

作为一个仍在努力尝试访问 Access 的人，我发现支持和反对使用多值字段的讨论非常令人沮丧。

我正在努力解决这一切，但如果每个人都反对他们，还有什么替代方法？似乎在每个搜索结果中，我发现每个人要么告诉你如何使用多值字段和控件，要么告诉你它们有多可怕和错误。许多人提到他们的替代品，但没有人说“这是一个例子”。我是来学习这些东西的。虽然我知道对于这些论坛中的很多人来说这是一个更简单的概念，但我真的可以用一些例子来看看。

我正处于必须决定走哪条路的地步。比较使用多值字段和替代项以及使用控件选择多个值的示例会很棒。

还是我错了，您可以选择多个项目的组合框的功能只能通过 Access 获得？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-20T15:46:15.773

我想先解决你的最后一个问题。有一种方法可以提供父子关系的视觉呈现。它被称为子表单。如果您获得有关 Access 中的子表单的帮助，它将解释该概念。
我在一个项目中使用了子表单，我想在表单中显示事务标题，并在子表单中显示事务详细信息。即使数据存储在两个规范化表中，也没有什么可以阻碍这种结构。

当然，这会影响屏幕，而不是数据库。这就是重点。规范化与存储和检索有关，与数据的其他用途无关。

# ios - iOS NSFileManager使用URL而不是路径将文件存储在文档目录中？

> ID：14425167
> 
> 赞同：0
> 
> 时间：2013-01-20T13:52:37.823
> 
> 标签：ios, iphone, objective-c, nsfilemanager

苹果表示最好使用 URL 来访问手机中存储的文件。但我找不到在 URL 处创建新文件的方法。有吗？或者我们必须使用路径创建文件并使用 URL 检索它们？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:20:02.673

要将文件路径转换为 ​​URL，请使用 fileURLWithPath 类方法，如下所示：

```
NSURL *filePathURL = [NSURL fileURLWithPath:filePath]; 
```

# jquery - 当 jquery 聚焦时，引导工具提示不起作用

> ID：14425170
> 
> 赞同：2
> 
> 时间：2013-01-20T13:53:11.023
> 
> 标签：jquery, twitter-bootstrap, checkbox

我想在复选框输入中进行引导，当关注复选框时会出现消息。所以这是我制作的代码：

html

```
<label class="checkbox inline"><input type="checkbox" class="centang-semua-faktur tooltip-atas" rel="tooltip"> <b>Cetak</b></label> 
```

jQuery

```
 var $checkAllFaktur = $('.centang-semua-faktur');

    $checkAllFaktur.on('focus', function() {
        if ($(this).is(':checked')){
            $checkAllFaktur.attr('title', 'Hapus Centang Semua').tooltip();  
        }else{
            $checkAllFaktur.attr('title', 'Centang Semua').tooltip();  
        }
    }); 
```

请帮我。谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:00:14.270

您需要`show`和`destroy`场景中的工具提示，默认情况下它们只会在 mouseenter 上显示并在 mouseout 上隐藏。

您还需要将焦点事件绑定到单击事件，以确保它在使用鼠标时获得焦点，而不仅仅是键盘。

```
 var $checkAllFaktur = $('.centang-semua-faktur');

$checkAllFaktur
.on('click', function() {
    $(this).trigger('focus')
})
.on('focus', function() {
    if ($(this).is(':checked')){
        $checkAllFaktur.attr('title', 'Hapus Centang Semua').tooltip('show');  
    }else{
        $checkAllFaktur.attr('title', 'Centang Semua').tooltip('show');  
    }
})
.on('blur', function(){
  $(this).tooltip('destroy');
}); 
```

**工作示例：http:** [//jsfiddle.net/MgcDU/1398/](http://jsfiddle.net/MgcDU/1398/)

# javascript - JavaScript setTimeout() 重复

> ID：14425171
> 
> 赞同：2
> 
> 时间：2013-01-20T13:53:12.097
> 
> 标签：javascript, timer, duplicates, settimeout

我对 JavaScript/jQuery 还很陌生，但是已经制作了一个脚本来更改背景图片。

**第一个脚本**

第一个脚本版本运行良好，并执行以下操作：

*   创建一个 setInterval 计时器，它调用函数 backgroundChange() 每 7 秒运行一次
*   决定下一张图片URL
*   设置背景图片

这很好用，但问题是当网站处于活动状态时，在连接速度较慢的情况下，背景图片不会及时加载以进行下一次计时器更改。

**新脚本**

所以新版本：

*   创建一个 setTimeout 计时器，该计时器调用函数 backgroundChange() 以在 7 秒后运行

`var theTimer = setTimeout(backgroundChange, 7000);`

*   clearsTimeout （当然我不应该运行这个？）

`window.clearTimeout(theTimer);`

*   决定下一张图片URL
*   等到图片加载完毕：
*   然后设置背景图片
*   然后添加一个新的 setTimeout 计时器

`$('#testImage').attr('src', imageText).load(function() {`

```
 $('#backgroundTop').fadeIn(timeIn,function() 
    {
         theTimer = setTimeout(backgroundTimer, 7000);
    }); 
```

`});`

问题是，每当计时器运行并存在于 .load 函数中时，计时器现在似乎被调用了两倍的次数。

我还没有故意不发布我的代码，因为我想首先确保我的理解是正确的，而不是有人只是修复我的代码。

太极了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:02:01.913

您可以为计时器函数使用 JavaScript 闭包，而不是取消绑定。这将维护一个每次调用时都会重置的计时器。

```
var slideTimer = (function(){
      var timer = 0;

      // Because the inner function is bound to the slideTimer variable,
      // it will remain in score and will allow the timer variable to be manipulated.

      return function(callback, ms){
           clearTimeout (timer);
           timer = setTimeout(callback, ms);
      };  
})(); 
```

然后在您的代码中：

```
$('#testImage').attr('src', imageText).load(function() {

    $('#backgroundTop').fadeIn(timeIn,function() 
    {
         slideTimer(backgroundTimer, 7000);
    });
}); 
```

不需要在代码中的其他任何地方清除或设置计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T13:57:30.270

在添加下一个负载处理程序之前，您需要取消绑定负载处理程序，因为它们会随着您的代码而不断堆积。在每次迭代中，您都会添加一个额外的处理程序来执行完全相同的操作。用于`unbind`在重新附加之前删除旧处理程序：

```
$('#testImage').unbind('load'); 
```

# wordpress - 替代在 wordpress 中为插件使用自定义 WP_object

> ID：14425172
> 
> 赞同：1
> 
> 时间：2013-01-20T13:53:25.187
> 
> 标签：wordpress

我将来可能会用一个简单的房地产网站做一个文字新闻网站。遇到使用自定义 WP_objects 后，我担心的是由于 wordpress db 结构（大量 sql 查询），搜索查询有点慢。无论如何，我可以创建自己的自定义表格，并将其插入到 wordpress 中以获取属性吗？

如果我可以为这些属性创建一个管理部分以及不需要在 wordpress 的页面部分中创建的某种形式的自定义页面，那就太好了。

# php - mysql重复检查2列一起

> ID：14425173
> 
> 赞同：0
> 
> 时间：2013-01-20T13:53:25.717
> 
> 标签：php, mysql, sql, unique-constraint

## 桌子

```
|ID|owner|page|value|
|1 |0001 |home|demo |
|2 |0003 |home|demo |
|3 |0001 |home|demo | 
```

我想要的是防止所有者为同一页面设置 2 个值。

所以我目前的方法是

```
|ID|owner|page|value|unique_check
|1 |0001 |home|demo |0001_home
|2 |0003 |home|demo |0003_home
unique_check is (unique key). 
```

现在，当我在 php 端插入此表时，我设置了 unique_check = owner_page 并且由于 unique_check 是唯一列 mysql 给出错误并且如果该所有者已经为此页面设置了值，则不要插入。

但我的问题是，有没有办法只在没有 php 帮助或没有额外的“unique_check”列的情况下在 mysql 上执行此操作？（将 2 列设置为唯一）

如果没有办法将 unique-constrain 设置为 2 列，我可以设置 unique_check 默认值 = owner_page ，所以我不会担心从 php 中执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:54:44.827

是的，添加`UNIQUE`约束，

```
ALTER TABLE tableNAME ADD CONSTRAINT tb_UQ UNIQUE (owner, page) 
```

# jquery - 在手机和平 板电脑上拖放

> ID：14425175
> 
> 赞同：0
> 
> 时间：2013-01-20T13:53:36.763
> 
> 标签：jquery, jquery-ui, drag-and-drop

我最初使用 jquery 和 jquery ui 创建了一个可以在桌面上完美运行的拖放 jquery 测验。现在我想让它也可以在移动和平板设备上运行，而无需更改现有代码。我尝试了触摸打孔，但这似乎没有按预期工作，即使代码仅使用 .draggable 和 .droppable。我在 example.themobu.com/Fyq/Template%202/test/index2.html 有它的在线版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T09:41:49.070

同样的问题，我宁愿不承诺使用 YUI3。我会试试这个并报告：

[http://popdevelop.com/2010/08/touching-the-web/](http://popdevelop.com/2010/08/touching-the-web/)

# c++ - C++：下面的代码有什么问题吗？

> ID：14425188
> 
> 赞同：0
> 
> 时间：2013-01-20T13:55:19.350
> 
> 标签：c++, templates, pointers, memory-management, memory-leaks

我得到以下代码：

```
T *p = new T[10];
delete p; 
```

我认为应该是 delete [] p。我在 T=int 类型上尝试过，没有错误。然后我创建了一个简单的类，异常。有什么明确的解释吗？

```
T *p = 0;
delete p; 
```

他们怎么了？【我查了一下，好像虽然delete p会导致报错，但是程序恢复是因为编译器一开始就认为p==0，所以这个报错没关系。】

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T13:56:49.150

是的，
你应该打电话 `delete [] p;`

> **有什么明确的解释吗？**

这是未定义的行为：

*   `delete`分配完成时调用`new []`
*   调用`delete`非动态分配的指针。

请注意，**未定义的行为**意味着任何事情都可能发生，它不要求崩溃。它只是意味着您的程序可以显示任何行为（包括按预期工作）。

调用指针是完全有效`delete`的。`NULL`该标准允许这样做。操作员在`delete`内部承担核心，调用者不必费心`NULL`检查。

* * *

**参考：**

**C++03 标准§3.7.4.2-3：**

> *如果释放函数因抛出异常而终止，则行为未定义。提供给释放函数的第一个参数的值可以是空指针值；如果是这样，并且如果释放函数是标准库中提供的函数，则调用无效。否则，`delete(void*)`在标准库中提供给 operator 的值应是先前调用任一运算符`new(std::size_t)`或`operator new(std::size_t, const std::nothrow_-t&)`在标准库中返回的值之一，并且提供给`delete[](void*)`标准库中 operator 的值应是由 a 返回的值之一在标准库中调用`operator new[](std::size_t)`或 调用。`operator new[](std::size_t, const std::nothrow_t&)`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:59:57.997

用 分配对象数组时`new[]`，必须用 删除它`delete[]`。不这样做会导致**Undefined Behavior**。

`delete`和之间的主要行为区别在于`delete[]`后者除了释放内存外，还调用数组中每个对象的析构函数。

考虑到你的第二点：

```
T *p = 0;
delete p; 
```

这不会导致错误，而是什么都不做，因为这是`delete`指针为空时的预期行为。

# android - 将 G-Sensor、加速度计或陀螺仪事件注入正在运行的应用程序

> ID：14425194
> 
> 赞同：1
> 
> 时间：2013-01-20T13:55:42.333
> 
> 标签：android, accelerometer, gyroscope, motionevent

我又遇到了一个问题。似乎 Android 的可能性并不是那么“无穷无尽”。我的应用程序（系统签名）现在能够使用 Instrumentation API 将 KeyEvents 和 PointerSyncs 注入当前关注的应用程序。现在我想要陀螺仪、重力传感器或加速度计也一样。是否可以以编程方式注入这些事件？[如果可能，不使用 (su) shell]

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:35:15.487

我发现默认的 Android API 是不可能的！

但是您可以做的是修改存储在文件中某处的传感器 unix 缓冲区。但是，这需要 Root 和 SU 访问权限。

# clojure - 给定上限，如何计算向量中的个数

> ID：14425195
> 
> 赞同：2
> 
> 时间：2013-01-20T13:55:57.493
> 
> 标签：clojure

给定一个由 1 和 0 组成的向量，我想计算值为 1 的条目数。但是，向量可能很长，我只关心向量是否有零个、一个或多个值为 1 的条目。

使用[这里](http://clj-me.blogspot.com/2009/04/counting-occurences.html)给出的方法，我可以计算向量中的个数。

`(count (filter #{1} [1 0 1 0 0 1 1]))`

在这种情况下，我可以限制过滤器（或使用其他方法）以避免访问向量的三个以上元素吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T14:23:58.140

过滤器是懒惰的，所以只会做需要的工作。由于您只关心没有 1、一个 1 或两个或多个 1，因此您只需要检查过滤后的 1 序列中的两个元素，因此`take 2`在计算之前：

```
user=> (count (take 2 (filter #{1} [1 0 1 0 0 1 1])))
2
user=> (count (take 2 (filter #{1} [0 0 0 0 0 0 0])))
0
user=> (count (take 2 (filter #{1} [0 0 0 0 0 0 1])))
1
user=> (def rare (repeatedly #(if (< (rand) 0.0001) 1 0)))
#'user/rare
user=> (take 10 rare)
(0 0 0 0 0 0 0 0 0 0)
user=> (count (take 2 (filter #{1} rare)))
2 
```

# jquery - KnockOut 绑定视图模型

> ID：14425197
> 
> 赞同：0
> 
> 时间：2013-01-20T13:56:19.243
> 
> 标签：jquery, knockout.js, asp.net-web-api

我要新的 knockout.js。非常简单。尝试获取数据（通过 WebAPI - ajax 调用）。这是视图

```
<table>
<thead>
<tr>
<td>First Name </td>
<td>Last Name </td>
<td> Email </td>
</tr>
</thead>
<tbody data-bind="foreach:Contact">
<tr>
<td data-bind="text:FirstName"></td>
<td data-bind="text:LastName"></td>
<td data-bind="text:EmailAddress"></td>
</tr>
</tbody>
</table> 
```

这是我的视图模型和 ajax 调用。Ajax 调用返回 3 条记录。名字、姓氏和电子邮件地址

```
<script type="text/javascript" >

    $(document).ready(function () {       
        var data = [];
        var viewModel = {
            Contact: ko.observableArray(data)
        };
   $.ajax({
            url: "http://localhost/AW/api/Person",
            type: "GET",
            dataType: "json",
            statusCode: {
                200: function (contacts) {
                    viewModel.Contact = contacts;
                }
            }
        });
        ko.applyBindings(new viewModel());
    });            
</script> 
```

正如我所说的 API 成功地重复记录，但它没有约束力。可能是我在这里做一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:02:57.590

`ko.observableArray`(like `ko.observable`) 正在返回一个函数，因此您需要使用新值作为参数调用它来设置它的值：

```
200: function (contacts) {
    viewModel.Contact(contacts);
} 
```

而且因为您的 viewModel 是一个对象文字，而不是您需要编写的函数：

```
ko.applyBindings(viewModel); 
```

# excel - Excel公式设置单元格值

> ID：14425202
> 
> 赞同：1
> 
> 时间：2013-01-20T13:56:40.140
> 
> 标签：excel, set, excel-formula

我的 Excel 电子表格中有两列我想互斥。例如 B1 公式：IF（A1 包含“是”，然后 B1 设置为“-”）以及 A1 公式：IF（B1 包含“是”，然后 A1 设置为“-”）

基本上这应该意味着当一个单元格更改为“是”时，它旁边的另一个单元格会自动更改为“-”

当我尝试在 excel 公式生成器中执行此操作时，它说我创建了一个循环公式。有谁知道我能做些什么来完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T07:03:42.840

像这样的东西怎么样：

```
' On cell A1
=IF(B1="Yes","-","Yes")

' On cell B1
=IF(A1="Yes","-","Yes") 
```

不利的一面是，在 A1 被赋予“是”或“-”值之后，它不再具有作为其值的函数。这可能不是问题 - 只需根据需要保留 B1 的功能和设置 A1（B1 将更新，因此您不需要更新它）

不完全是您的要求，但希望有一天它会对某人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:57:05.677

这只能在 VBA 中实现。在工作表的模块中复制以下代码（例如`Sheet1`）：

```
私有 mBlnIsRunning As Boolean

Private Sub Worksheet_Change(ByVal Target As Range)

    如果 Application.Intersect(Target, Me.Range("A1:B1")) _
        什么都没有然后退出子

    '防止死循环
    If mBlnIsRunning Then Exit Sub

    mBlnIsRunning = 真

    如果 Target.Address(False, False) = "A1" 那么
        Me.Range("B1") = 负值（目标值）
    别的
        Me.Range("A1") = 负值（目标值）
    万一

    mBlnIsRunning = 假
结束子

私有函数 Negative(varValue As Variant) As Variant
    '根据你的需要改变这个功能
    如果 varValue = "yes" 那么
        负数=“-”
    ElseIf varValue = "-" 那么
        否定=“是”
    别的
        Negative = "请输入yes或-！"
    万一
结束功能

```

# ios - 不涉及代码的无限内存增长

> ID：14425203
> 
> 赞同：1
> 
> 时间：2013-01-20T13:56:41.897
> 
> 标签：ios, cocoa-touch, memory-management

我的应用程序有一些内存问题，所以我开始调查。一次又一次地删除了一些方法，配置文件 -> 仪器。我发现了一些主要问题，但我的问题是，现在我有一个除了基本`import` `viewdidload`等之外没有代码的类（创建新类时获得的内置行。在 IB 中，我已经连接了该类ViewController 到另一个 ViewController 并且我来回推动我的方式。在仪器中，我可以看到每次推动我的应用程序都会获得 30-50kb。这怎么可能？这是正常行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:01:28.040

Segue 每次都会创建一个目标视图控制器的新实例。如果您有两个通过故事板中的 segue 链接的视图控制器，并且您继续执行 segue，您将获得每个控制器的越来越多的实例，因此您会看到内存增长。

查看 unwind segues，或导航控制器，或关闭呈现的视图控制器以“返回”。

# c# - 如何重新排序列表视图项的子项？

> ID：14425204
> 
> 赞同：0
> 
> 时间：2013-01-20T13:56:45.743
> 
> 标签：c#, listview, subitem

所以我编写了一个代码来重新排序列表视图的列（实际上只是 -=1 和 +=1 是所选列表视图列的显示索引。但是当我移动列时，子项会保留。它们不会移动。我想与列一起移动的相应子项。

```
main.listView1.Columns[listBox1.SelectedIndex].DisplayIndex += 1;
listBox1.Select();
listBox1_SelectedIndexChanged(sender, e); //the code for moving the column to the right

main.listView1.Columns[listBox1.SelectedIndex].DisplayIndex -= 1;
listBox1.Select();
listBox1_SelectedIndexChanged(sender, e); //the code for moving the column to the left 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:01:18.653

看看[这篇](http://support.microsoft.com/kb/319401/en-us)文章片段。

```
// Determine if clicked column is already the column that is being sorted.
if ( e.Column == lvwColumnSorter.SortColumn )
{
    // Reverse the current sort direction for this column.
    if (lvwColumnSorter.Order == SortOrder.Ascending)
    {
        lvwColumnSorter.Order = SortOrder.Descending;
    }
    else
    {
        lvwColumnSorter.Order = SortOrder.Ascending;
    }
}
else
{
    // Set the column number that is to be sorted; default to ascending.
    lvwColumnSorter.SortColumn = e.Column;
    lvwColumnSorter.Order = SortOrder.Ascending;
}

// Perform the sort with these new sort options.
this.listView1.Sort(); 
```

# web - 网站如何防止用户使用不同的 PC 访问它？

> ID：14425205
> 
> 赞同：0
> 
> 时间：2013-01-20T13:56:47.383
> 
> 标签：web, authentication

我正在注册一个付费网站，服务条款中包含一个条款，说我可以仅使用我注册时使用的 PC 访问该网站（我认为这是为了防止我传播我的用户/密码周围的朋友等）。

我想知道，在用户 PC 上不安装第三方软件的情况下，在技术上是否可以执行此条款？如果有，通过什么方法？用户如何可能欺骗这样的系统（例如，如果他的“注册 PC”死了）？

# xcode - Tableview字幕添加新行

> ID：14425209
> 
> 赞同：1
> 
> 时间：2013-01-20T13:57:21.267
> 
> 标签：xcode, arrays, tableview, xcode4.5, subtitle

我有一个带字幕的表格视图。我想告诉用户一些关于应用程序当前版本的信息。

```
tableData = [NSArray arrayWithObjects:@"Ver. 0.90", nil]; //App version
tableSubtitles = [NSArray arrayWithObjects:@"First release contains:/n- Create user/n- Login/n- And so on...", nil]; //What the app can do 
```

我的问题是 /n 不起作用。

如果有人知道制作新线的方式，请回答:)

顺便说一句，我是这样展示的：

```
cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [tableSubtitles objectAtIndex:indexPath.row]; 
```

# hadoop - 失败：元数据错误：MetaException（消息：得到异常：java.net.ConnectException 调用 localhost/127.0.0.1:54310 失败

> ID：14425212
> 
> 赞同：2
> 
> 时间：2013-01-20T13:57:43.177
> 
> 标签：hadoop, hive

我正在使用 Ubuntu 12.04、hadoop-0.23.5、hive-0.9.0。我将 metastore_db 分别指定到`$HIVE_HOME/my_db/metastore_db`hive-site.xml 中的其他位置

Hadoop 运行良好，`jps`提供 ResourceManager、NameNode、DataNode、NodeManager、SecondaryNameNode

Hive完美启动，metastore_db & derby.log也创建好了，所有hive命令运行成功，可以创建数据库，表等。但是几天后，当我运行时`show databases`，或者`show tables`，得到以下错误

```
FAILED: Error in metadata: MetaException(message:Got exception:  java.net.ConnectException Call to localhost/127.0.0.1:54310 failed on connection exception: java.net.ConnectException: Connection refused) FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:35:31.940

我也遇到了这个问题，接受的答案对我没有帮助，所以会在这里为其他人添加我的解决方案：

我的问题是我有一台装有配置单元的伪分布式设置的机器。使用 localhost 作为主机名可以正常工作。然而，当我们决定向集群中添加多台机器时，我们还决定为这些机器提供正确的名称“machine01、machine 02 等”。

我也更改了所有 hadoop`conf/*-site.xml`文件和`hive-site.xml`文件，但仍然有错误。经过详尽的研究，我意识到在 metastore db hive 中不是从 *-site 文件中获取 URI，而是从 mysql 中的 metastore 表中获取 URI。保存所有配置单元表元数据的地方是两张表 SDS 和 DBS。在分别更改表 DBS 和 SDS 中的 DB_LOCATION_URI 列和 LOCATION 以指向最新的名称节点 URI 后，我又重新开始工作了。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:57:43.177

原因

1.  如果您更改了 Hadoop/Hive 版本，您可能会在 hive-0.9.0/conf/hive-env.sh 文件中指定以前的 hadoop 版本（在 core-site.xml 中有`ds.default.name`= ）`hdfs://localhost:54310`
2.  $HADOOP_HOME 可能指向其他位置
3.  指定版本的 Hadoop 不工作
4.  您的名称节点可能处于安全模式，运行`bin/hdfs dfsadmin -safemode leave`或`bin/hadoop dsfadmin -safemode leave`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T10:59:05.377

在全新安装
的情况下，上述问题可能是名称节点问题的影响

尝试使用命令格式化名称节点

```
hadoop namenode -format 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T15:26:41.627

1.从安全模式关闭你的namenode。试试下面的命令：

```
hadoop dfsadmin -safemode leave 
```

2.重启你的Hadoop守护进程：

```
sudo service hadoop-master stop

sudo service hadoop-master start 
```

# yii - 主页的 Yii url 规则

> ID：14425215
> 
> 赞同：0
> 
> 时间：2013-01-20T13:57:56.133
> 
> 标签：yii, yii-validation

```
'urlManager'=>array(
            'class'=>'application.components.UrlManager',
            'urlSuffix'=>'/',
            'baseUrl'=>'',
            'showScriptName'=>false,
            'urlFormat'=>'path',
            'rules'=>array(
                '<language:\w{2}>'   => 'page/index',
                ''   => 'page/index',
                '<language:\w{2}>/page/<alias:.*>' => 'pages/read',
            ) 
```

链接“/en/page/index”工作正常
链接“/”和“/en”返回错误“无法解析请求”页面/索引“。

规则有什么问题

```
'<language:\w{2}>' => 'page/index'
'' => 'page/index', 
```

?

**升级版：**

pagesController 有一个动作：

```
public function actionRead($alias){

            //some php code...

            if($model==null)
            {
                throw new CHttpException(404,'page not found...');
            }else
            {
                $this->render('read',array('model'=>(object)$model));
            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:03:18.590

您不起作用的规则正在重定向到`page/index`，这意味着他们将尝试访问`PageController.php`，并且在该控制器中，他们将尝试访问`actionIndex`。听起来您既没有 controller `PageController.php`，更不用说`actionIndex`该控制器中的 an 。

您需要修复这些规则的目标以包含有效的控制器/操作组合。

# c# - 当我打开一个特定的应用程序时，希望我的应用程序被激活（放在前面）

> ID：14425217
> 
> 赞同：0
> 
> 时间：2013-01-20T13:59:14.713
> 
> 标签：c#

当我打开一个特定的应用程序时，我希望我的应用程序被激活（带到前面）。比如我打开了adobe Photoshop；那么我的应用程序应该放在前面。对于任何其他应用程序，它应该被最小化。我的应用程序在 c# 中。你们有什么想法吗？？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:00:41.383

首先，欢迎使用 Stackoverflow。

比你的问题：你需要使用[SetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx) WinAPI 调用，如果你想将一个应用程序设置为另一个应用程序的前面，或者你只是设置 `Topmost="True"`你的应用程序的属性总是顶部。

**编辑：** 比您创建一个按名称调用 get [Process](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)的计时器，如果您发现例如 Photoshop，只需将 WINAPI 调用调用到您自己的程序或调用

`this.BringToFront();`

# android - Listvew 没有被填充，getView 函数也没有被调用

> ID：14425218
> 
> 赞同：1
> 
> 时间：2013-01-20T13:59:15.807
> 
> 标签：android, android-listview

我是`Android`编程新手。我正在尝试购物车教程，尝试`listview`使用`productAdapter`. 但是列表没有被填充，`getview`函数也没有被调用。我正在附加我的文件。请让我知道，我哪里出错了。

```
ProductAdapter.java

package com.example.helloshoppingcart;

import java.util.List;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.TextView;

    public class ProductAdapter extends BaseAdapter {
    private class viewItem{
        ImageView productImageView;
        TextView productTitle;
        CheckBox productCheckbox;
    };

    private List<Product> mproductList;
    private LayoutInflater minflater;
    private Boolean mShowCheckbox;

    ProductAdapter(List<Product> productList, LayoutInflater inflater, Boolean showCheckbox)
    {
            this.mproductList = productList;
        this.minflater = inflater;
        this.mShowCheckbox = showCheckbox;              
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent ){
        final viewItem item;

        if (convertView == null){
            convertView  = minflater.inflate(R.layout.item, null);
            item = new viewItem();

            item.productImageView = (ImageView) convertView.findViewById(R.id.ImageViewItem);
            item.productTitle= (TextView) convertView.findViewById(R.id.TextViewItem);
            //item.productCheckbox = (CheckBox) convertView.findViewById(R.id.CheckBoxSelected);
            convertView.setTag(item);
        }else{
            item = (viewItem) convertView.getTag();
        }

        Product prod = mproductList.get(pos);
        item.productImageView.setImageDrawable(prod.productImage);
        //item.productCheckbox.setChecked(prod.selected);
        item.productTitle.setText(prod.title);

        return convertView;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
}

CatalogActivity.java

package com.example.helloshoppingcart;

import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ListView;

public class CatalogActivity extends Activity {
    private List<Product> mproductList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_catalog);

        //get the catalog and display all the records
        mproductList = shoppingCartHelper.getCatalog(getResources());
        ListView catalogListView = (ListView) findViewById(R.id.ListViewCatalog);
        ProductAdapter catalogListAdapter = new ProductAdapter(mproductList, getLayoutInflater(), false);
        catalogListView.setAdapter(catalogListAdapter);

        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        //getMenuInflater().inflate(R.menu.activity_catalog, menu);
        return true;
    }

}

activity_catalog.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#ffffff">

    <!--<TextView android:id="@+id/TextView01" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:textColor="#000000"
        android:textSize="24dip" android:layout_margin="5dip" android:text="Product Catalog"></TextView>-->
    <ListView android:layout_height="wrap_content"
        android:layout_weight="1" android:id="@+id/ListViewCatalog"
        android:layout_width="fill_parent" android:background="#ffffff"
        android:clickable="true" android:cacheColorHint="#ffffff">
    </ListView>
    <!-- <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_margin="5dip"
        android:layout_gravity="right" android:id="@+id/ButtonViewCart"
        android:text="View Shopping Cart"></Button>-->
</LinearLayout>

item.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView android:id="@+id/ImageViewItem"
    android:layout_margin="5dip"
    android:layout_height="wrap_content"
    android:layout_width="100dip">
    </ImageView>

    <TextView android:id="@+id/TextViewItem"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="5dip"
    android:textSize="26dip"
    android:text="Phone Names"
    android:textColor="#000000"
    android:minLines="2"
    android:maxWidth="150dip">        
     </TextView>

    <TextView android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1">        
    </TextView>

    <!-- <CheckBox android:layout_height="wrap_content"
        android:layout_margin="5dip" android:id="@+id/CheckBoxSelected"
        android:focusable="false" android:clickable="false"
        android:layout_gravity="center" android:layout_width="wrap_content">
    </CheckBox>-->

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:41:32.633

在 ProductAdapter 中，getCount() 方法返回与此 ListView 关联的 Adapter 拥有的项目数。因此，它应该返回列表视图将显示的最大项目数，即您用作数据源的列表的大小： mproductList.size() getView() 方法没有被调用，因为此函数返回 0你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:44:27.673

只是快速浏览了一下，但 getCount() 应该返回适​​配器中的项目数，因此 mproductList.size()

# php - 这可以防止 SQL 注入吗？

> ID：14425219
> 
> 赞同：-2
> 
> 时间：2013-01-20T13:59:16.890
> 
> 标签：php, mysql, code-injection

下面的代码在防止 MySQL 数据库上的 SQL 注入方面是否更好`mysqli_real_escape_string`？

```
$str = "SELECT * FROM customers WHERE username = '; DELETE FROM customers WHERE 1 or username = '";
$str2 = "";

for($i = 0; $i < strlen($str); $i++)
{
    if (strpos ("abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ,.?!0123456789", $str[$i], 0) !== FALSE)
    {
        $str2 = $str2 . $str[$i];
    }
}

echo "$str2"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T14:02:02.207

在尝试避免 SQL 注入时，**绝对没有理由使用白名单/黑名单。**`mysqli_`使用没有准备好的语句的函数时，您需要做的就是使用`mysqli_real_escape_string()`.

但是，您最好学习[*准备好的语句*](http://en.wikipedia.org/wiki/Prepared_statement)。他们比逃跑更干净、更安全。

使用准备好的语句执行示例查询的代码如下所示：

```
$stmt = $conn->prepare('SELECT * FROM customers WHERE username = ?');
$stmt->bind_param('s', $username);
$result = $stmt->execute(); 
```

由于您不了解示例，这里有一个详细的解释：

*   第 1 行准备语句。`?`每当您想使用外部数据时，您都可以使用。
*   第 2 行为第一个占位符绑定了一个字符串 ( `s`) 参数。所以`$username`应该包含（不受信任的）值
*   第 3 行使用先前绑定的参数执行语句。SQL 和数据是分开传输的，所以没有 SQL 注入风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T14:12:59.997

> 下面的代码在防止 mysql 注入方面是否比 mysqli_real_escape_string 更好，还是没关系？

两者都不。情况更糟，你不应该这样做！而不是转义（！）数据（！！），您正在破坏您的整个查询。

简而言之，它将

1.  使有效查询不起作用
2.  不阻止恶意查询

即使您仅将您的方法应用于数据，而不是整个查询，它也会

1.  弄乱你的数据
2.  不阻止各种SQL注入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:06:42.557

阅读[这篇文章](http://php.net/manual/en/security.database.sql-injection.php)。在用户评论的底部，您会发现许多有用的 SQL 注入预防技巧和提示。但是，第一步是在将 GET/POST 数据插入查询之前验证和清理您的 GET/POST 数据。

# perl - Perl HTTP 服务器

> ID：14425220
> 
> 赞同：4
> 
> 时间：2013-01-20T13:59:30.577
> 
> 标签：perl

我是 Perl 的新手，我有一个关于 HTTP 服务器和客户端 API 的问题。

我想编写一个接受来自 HTTP 客户端的请求的 HTTP 服务器。问题是我不知道该怎么做，因为我是一名 Java 开发人员，这对我来说有点困难。请你能给我一些[`HTTP::Daemon`](https://metacpan.org/module/HTTP::Daemon)Perl 模块的教程和示例吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T14:07:12.807

我花了很多时间尝试让许多用户同时创建一个“简单”可用的 Web 服务器。文档`HTTP::Daemon`和其他在线资源对我没有帮助。

这是一个工作（Ubuntu 12.10，带有默认 Perl 包 v5.14.2）示例预分叉**的**Web 服务器，具有不同的内容类型页面和错误页面：

```
#!/usr/bin/perl

use strict;
use warnings;

use CGI qw/ :standard /;
use Data::Dumper;
use HTTP::Daemon;
use HTTP::Response;
use HTTP::Status;
use POSIX qw/ WNOHANG /;

use constant HOSTNAME => qx{hostname};

my %O = (
    'listen-host' => '127.0.0.1',
    'listen-port' => 8080,
    'listen-clients' => 30,
    'listen-max-req-per-child' => 100,
);

my $d = HTTP::Daemon->new(
    LocalAddr => $O{'listen-host'},
    LocalPort => $O{'listen-port'},
    Reuse => 1,
) or die "Can't start http listener at $O{'listen-host'}:$O{'listen-port'}";

print "Started HTTP listener at " . $d->url . "\n";

my %chld;

if ($O{'listen-clients'}) {
    $SIG{CHLD} = sub {
        # checkout finished children
        while ((my $kid = waitpid(-1, WNOHANG)) > 0) {
            delete $chld{$kid};
        }
    };
}

while (1) {
    if ($O{'listen-clients'}) {
        # prefork all at once
        for (scalar(keys %chld) .. $O{'listen-clients'} - 1 ) {
            my $pid = fork;

            if (!defined $pid) { # error
                die "Can't fork for http child $_: $!";
            }
            if ($pid) { # parent
                $chld{$pid} = 1;
            }
            else { # child
                $_ = 'DEFAULT' for @SIG{qw/ INT TERM CHLD /};
                http_child($d);
                exit;
            }
        }

        sleep 1;
    }
    else {
        http_child($d);
    }

}

sub http_child {
    my $d = shift;

    my $i;
    my $css = <<CSS;
        form { display: inline; }
CSS

    while (++$i < $O{'listen-max-req-per-child'}) {
        my $c = $d->accept or last;
        my $r = $c->get_request(1) or last;
        $c->autoflush(1);

        print sprintf("[%s] %s %s\n", $c->peerhost, $r->method, $r->uri->as_string);

        my %FORM = $r->uri->query_form();

        if ($r->uri->path eq '/') {
            _http_response($c, { content_type => 'text/html' },
                start_html(
                    -title => HOSTNAME,
                    -encoding => 'utf-8',
                    -style => { -code => $css },
                ),
                p('Here are all input parameters:'),
                pre(Data::Dumper->Dump([\%FORM],['FORM'])),
                (map { p(a({ href => $_->[0] }, $_->[1])) }
                    ['/', 'Home'],
                    ['/ping', 'Ping the simple text/plain content'],
                    ['/error', 'Sample error page'],
                    ['/other', 'Sample not found page'],
                ),
                end_html(),
            )
        }
        elsif ($r->uri->path eq '/ping') {
            _http_response($c, { content_type => 'text/plain' }, 1);
        }
        elsif ($r->uri->path eq '/error') {
            my $error = 'AAAAAAAAA! My server error!';
            _http_error($c, RC_INTERNAL_SERVER_ERROR, $error);
            die $error;
        }
        else {
            _http_error($c, RC_NOT_FOUND);
        }

        $c->close();
        undef $c;
    }
}

sub _http_error {
    my ($c, $code, $msg) = @_;

    $c->send_error($code, $msg);
}

sub _http_response {
    my $c = shift;
    my $options = shift;

    $c->send_response(
        HTTP::Response->new(
            RC_OK,
            undef,
            [
                'Content-Type' => $options->{content_type},
                'Cache-Control' => 'no-store, no-cache, must-revalidate, post-check=0, pre-check=0',
                'Pragma' => 'no-cache',
                'Expires' => 'Thu, 01 Dec 1994 16:00:00 GMT',
            ],
            join("\n", @_),
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T14:05:43.123

[文档中`HTTP::Daemon`](https://metacpan.org/module/HTTP%3a%3aDaemon)有一个非常好的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:22:17.610

一个符合 synopsys 的客户端示例`HTTP::Daemon`：

```
 require LWP::UserAgent;

 my $ua = LWP::UserAgent->new;
 $ua->timeout(10);
 $ua->env_proxy;

 my $response = $ua->get('http://localhost:52798/xyzzy');

 if ($response->is_success) {
     print $response->decoded_content;  # or whatever
 }
 else {
     die $response->status_line;
 } 
```

您只需要调整端口，也许还需要调整主机。

# ruby-on-rails - 懒惰注册 - rails

> ID：14425221
> 
> 赞同：0
> 
> 时间：2013-01-20T13:59:37.943
> 
> 标签：ruby-on-rails, registration, lazy-evaluation

我是 Rails 新手，我正在尝试在这里找到[http://blog.bignerdranch.com/1679-lazy-user-registration-for-rails-apps/](http://blog.bignerdranch.com/1679-lazy-user-registration-for-rails-apps/) 我有一些错误：

*   未初始化的常量 AnonymousUser::ACCESSIBLE_ATTRS 它在我的 anonymous_user 模型中

*   添加后

    RetrospectionApp::Application.routes.draw do devise_for :users, controllers: {registrations: 'registrations'} resources :posts, path: '/' root to: 'posts#index' end

    我看到错误

    未初始化的常量 RetrospectionApp

我不明白这个路线部分和模型。有人可以解释一下并显示解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:09:30.053

我很确定你会得到：

```
uninitialized constant RetrospectionApp 
```

因为您的应用程序不是这样调用的。创建路由时，您需要编写应用程序的名称，而不是**RetrospectionApp**

我相信你会得到这个：

```
uninitialized constant AnonymousUser::ACCESSIBLE_ATTRS 
```

因为没有定义**ACCESSIBLE_ATTRS 。**您需要告诉您的班级该常量是什么，例如通过执行以下操作：

```
ACCESSIBLE_ATTRS = [:name, :email] 
```

这就是说属性 :name 和 :email 可以通过批量分配访问。

# django - 找不到带有参数“（1，）”和关键字参数“{}”的“views.results”的反向

> ID：14425223
> 
> 赞同：0
> 
> 时间：2013-01-20T13:59:49.467
> 
> 标签：django, django-views

嗨，我在 django 网站上关注[本教程。](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)我想我现在已经复制粘贴了所有内容。但是出现错误`"NoReverseMatch at /polls/2/vote/"`我`"Reverse for 'views.results' with arguments '(2,)' and keyword arguments '{}' not found."`查看了有关此主题的其他一些帖子，但没有发现它们的帮助。即添加`name='views'`或类似的东西。

我的`urls.py`

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('mysite.polls.views',
    url(r'^$', 'index'),
    url(r'^polls/$', 'index'),
    url(r'^polls/(?P<poll_id>\d+)/$', 'detail'),
    url(r'^polls/(?P<poll_id>\d+)/results/$', 'results', name='polls.views.results'),
    url(r'^polls/(?P<poll_id>\d+)/vote/$', 'vote'),
    url(r'^admin/', include(admin.site.urls)),
)
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

我的`views.py`

```
from django.shortcuts import get_object_or_404, render_to_response from django.http import HttpResponseRedirect, HttpResponse from django.core.urlresolvers import reverse from django.template import RequestContext from models import Choice, Poll

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    return render_to_response('indexx.html', {'latest_poll_list': latest_poll_list},) def detail(request, poll_id):
    try:
        p = Poll.objects.get(pk=poll_id)
    except Poll.DoesNotExist:
        raise Http404
    return render_to_response('detail.html', {'poll': p}, context_instance=RequestContext(request))

def results(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('results.html', {'poll': p})

def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render_to_response('detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        selected_choice.votes += 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing
        # with POST data. This prevents data from being posted twice if a
        # user hits the Back button.
        return HttpResponseRedirect(reverse('views.results', args=[p.id])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:06:10.000

url 的名称`polls.views.results`不是`views.results`。它应该是：

```
return HttpResponseRedirect(reverse('polls.views.results', args=[p.id])) 
```

# html - HTML：同一行中的图像略高于文本

> ID：14425225
> 
> 赞同：1
> 
> 时间：2013-01-20T13:59:54.797
> 
> 标签：html, css

请参阅[DEMO](http://bestsites.me/test.php)中的示例，它具有以下 html 代码

```
helllo hello test test <img src="http://bestsites.me/img/bs.png"> 
```

您可以看到该图像略高于文本。我怎样才能使图像下降一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:08:32.150

我不确定这是实现这一目标的最佳方式，但您可以使用：

```
helllo hello test test <img src="http://bestsites.me/img/bs.png" style="margin-bottom: -7px;"> 
```

或者您可以在某些照片编辑软件（gimp、vs）中编辑您的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:02:47.543

HTML：

```
<p>hello hello test test<img src="image.png"/></p> 
```

CSS：

```
p,img{
    padding:0px;
    margin:0px;
} 
```

以上应确保 p 和 image 元素彼此内联。

另一种方法：

HTML

```
<p>Hello Hello test test</p><img src='image.png'/> 
```

CSS

```
p,img{
    padding:0px;
    margin:0px;
    display:inline-block;//not for ie 5.5-7?
    width:49%;
    vertical-align:top;
    text-align:top;
    border:1px solid #FF0000;//to check the positioning of the elements
    //these should now be completely level BUT this might not make the text 100% level
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:18:57.200

您可以使用
**`<img align='middle'>`**

对齐中间将为您工作

将图像与文本对齐应该可以工作。 **`<img src='src' align='middle'>`** 会让你的形象出现在中间

# java - 无法在 MVC 框架中执行查询

> ID：14425226
> 
> 赞同：2
> 
> 时间：2013-01-20T13:59:56.557
> 
> 标签：java, swing, model-view-controller, jdbc, jtable

从类模型：

```
 public TableModel getTableData() {
     TableModel model=null;
    try {
        String sql = "SELECT eventID as 'Event ID', date as 'Date',eventName as 'Name', time as 'Start Time' FROM Event";
        pst = conn.prepareStatement(sql); 
        rs = pst.executeQuery();
        model = (DbUtils.resultSetToTableModel(rs));       
        }
    catch(SQLException e){
        e.printStackTrace();
    }
   finally {
        try {rs.close(); pst.close();  }
        catch(SQLException e){}     }                                 
       return model; 
}

public void getEvent(String tableClick) {
    Events e = new Events();
    try {
        pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
        rs = pst.executeQuery();
        while(rs.next()){      
        e.setEventName(rs.getString(2));
        e.setEventDate(rs.getDate(3));
        e.setEventTime(rs.getString(4));
        e.setEventVenue(rs.getString(5));
        e.setEventDetail(rs.getString(6));
        e.setEventOpportunity(rs.getString(7));
        e.setEventMoreDetails(rs.getString(8));
        e.setEndTime(rs.getString(9));
       }
    } 
    catch(SQLException ex){
    ex.printStackTrace();
    } finally {
        try {
        rs.close();pst.close();conn.close();} 
        catch (Exception ex){}
      }
} //end getEvent 
```

从类控制器：

```
@Override
    public void valueChanged(ListSelectionEvent event) {
        int rowSelected = view.tableEvent.getSelectedRow();
        String tableClick = view.tableEvent.getModel().getValueAt(view.tableEvent.convertRowIndexToModel(rowSelected), 0).toString();
        model.getEvent(tableClick); //tell model to change its state based on user input on views - model is instance of class model
    } 
```

当我运行我的程序时，堆栈跟踪`pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");`在模型类的行`model.getEvent(tableClick);`和控制器类的行显示错误。在 NetbeanIDE 中以调试模式运行带有断点的程序后，我只能看到`e.setEventName(...)`正在填充数据库中的值，而`Event`bean 类的所有其他值都是空的。`e.setEventDate(...)`将日期设置为#2222。如果您需要更多信息，我将编辑我的帖子。但这真的让我很烦。

是否是 ListSelectionListener 引起的问题，也许`mouseListener`更合适？

进一步补充，如果我`getEvent()`改变

```
public void getEvent(String tableClick) {
Events e = new Events();
try {
    pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
    rs = pst.executeQuery();
    while(rs.next()){      
    JOptionPane.showMessageDialog(null, "Yess");

   }
} 
```

它仅`Yes`在第一次单击行时显示。不是第二次点击另一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:01:33.393

使用 MouseListener 来检测点击的表格行。

```
@Override
public void mouseClicked(java.awt.event.MouseEvent event) {
  int rowSelected = view.tableEvent.rowAtPoint(event.getPoint());
  String tableClick = view.tableEvent.getModel().getValueAt(view.tableEvent.convertRowIndexToModel(rowSelected), 0).toString();
  model.getEvent(tableClick); //tell model to change its state based on user input on views*/ 
```

也是 方法 getEvent()`rs.close();pst.close();`的块的结尾。`try`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:22:53.090

使用 a [`ListSelectionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)（如此处所示）[来](https://stackoverflow.com/a/12306104/230513)检测选择的*变化*。使用 a`JButton`和 a [`CellEditor`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)（如此处所示）[来](https://stackoverflow.com/a/3591230/230513)调用特定行的操作。

# entity-framework - 自定义成员资格提供程序和 MVC 4

> ID：14425236
> 
> 赞同：0
> 
> 时间：2013-01-20T14:00:58.887
> 
> 标签：entity-framework, dependency-injection, asp.net-mvc-4, ninject, membership-provider

从此解决方案继续：[How to configure Ninject for MVC4 & custom Membership provide?](https://stackoverflow.com/questions/14412279/how-to-configure-ninject-for-mvc4-custom-membership-provide)

我声明

```
public interface IUserRepository : IRepository<UserModel>
{
MembershipUser CreateUser(string username, ... , string providername = null);

void Logout();
Boolean Login(string userName, string Password, bool persistCookie = false);
bool RegisterUser(UserModel user);
} 
```

并在**UserRepository中实现**

```
public class UserRepository : RepositoryBase<MyDbContext, UserModel>, IUserRepository
{
        UserModel _user = null;

        public UserRepository(IUnitOfWork<MyDbContext> unitOfWork)
            : base(unitOfWork)
{

}

   public MembershipUser CreateUser(string username, ... , string providername = null)
        {                
            using (UnitOfWork)
            {                   
                _user = new UserModel
                {
                    Id = Guid.NewGuid(),
                    RoleId = roleId
                    [other property set]
                };    
                Insert(_user);
                UnitOfWork.Commit();
             }
                status = MembershipCreateStatus.Success;

                return new MembershipUser(providername, ...);
}

public bool RegisterUser(UserModel user)
{
        MembershipCreateStatus createStatus;
        CreateUser(user.UserName, user.Password, user.Email, user.PasswordQuestion, user.PasswordAnswer, user.IsApproved, null, out createStatus, ...);

   if (createStatus == MembershipCreateStatus.Success)
   {
                    return true;
   }
   else
   {                return false;
   }
}
[..] 
```

现在在 CustomMembership Provider 中

```
public class CustomMembershipProvider : MembershipProvider
    {

        public IUserRepository UserRepository { get { return DependencyResolver.Current.GetService<IUserRepository>(); } }

    public override MembershipUser CreateUser(string username, ...)
        {
            return UserRepository.CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status, Membership.Provider.Name);
        }
[...] 
```

现在在**控制器中**

```
public AccountController(IAccountRepository accountRepository, IUserRepository userRepository, IUnitOfWork<MyDbContext> unitOfWork)
{
            _acountRepository = accountRepository;
            _userRepository = userRepository;
            UnitOfWork = unitOfWork;
}

public ActionResult Register(UserModel model)
{
    if (ModelState.IsValid)
    {
      _userRepository.RegisterUser(model);
    }
} 
```

**笔记：**

**1.**我从这一行 的 UserRepository **CreateUser 方法中得到 Error Provider name is** **Null**。**`return new MembershipUser(providername,...);`**

 **但我已经`Membership.Provider.Name`在**customMembership**提供程序中传递了它。

**2.**从**Controller**调用**Membershipprovider**方法的正确方法是什么？

 ****3.**是否需要通过**IUserRepository**调用 Membership 提供程序方法的任何其他**Ninject**配置，除此之外？

 **```
 kernel.Bind<IUserRepository>().To<UserRepository>(); 
```

**4.** Web.config 如上[一篇文章](https://stackoverflow.com/questions/14412279/how-to-configure-ninject-for-mvc4-custom-membership-provide)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:35:48.850

在 Web.Config 中是这样的......你告诉会员提供者和提供者使用。在这种情况下，您的自定义提供程序。但我不确定为什么 ninject 在这个概念中发挥作用，所以在这方面无法帮助抱歉。客户提供商必须知道自己的名字。但几乎不是问题。Web.config 具有自定义提供程序的名称。所以配置不是硬编码的。

```
 <membership defaultProvider="YourProvider" userIsOnlineTimeWindow="5">
  <providers>
    <!--attribute names in camelCase version of .net class MembershipProvider Properties. http://msdn.microsoft.com/en-us/library/system.web.security.membership_properties
    See BOS class for constants : BOSSysConst 
        type = Implmenting provider class  namespace.Classname 
    How to configure membership providers...    http://msdn.microsoft.com/en-us/library/6e9y4s5t -->
    <add name="YourProvider" 
         type="YourNamespace.YourProvider"     
         connectionStringName="YourConnectionString"
         enablePasswordRetrieval="false"
         enablePasswordReset="true"
         requiresQuestionAndAnswer="true"
         passwordFormat="Hashed"
         applicationName="IMPORTANT" />
  </providers>
</membership> 
```

Controller 调用静态类 createUser **Membership.CreateUser** 或**Membership.ValidateUser** 进行登录。

有关实施自定义提供程序的详细信息，请参阅 [http://msdn.microsoft.com/en-us/library/44w5aswa%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/44w5aswa%28v=vs.100%29.aspx)

```
 // Sample calling the create user function  
    // POST: /Account/Register

    [AllowAnonymous]
    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
                return RedirectToAction("Index", "Home");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:32:56.457

因此，您有 CustomMembershipProvider.CreateUser 和 UserRepository.CreateUser。您的控制器直接调用 UserRepository.CreateUser 但我认为您真的想调用 CustomMembershipProvider.CreateUser？

您的控制器正在调用

```
public bool RegisterUser(UserModel user)
{
    MembershipCreateStatus createStatus;
    CreateUser(user.UserName, user.Password, user.Email, user.PasswordQuestion, user.PasswordAnswer, user.IsApproved, null, out createStatus, ...); 
```

这反过来又在打电话

```
public MembershipUser CreateUser(string username, ... , string providername = null) 
```

但是，据我所知，您正在为提供程序名称传递一个 NULL。

您真正想要将其拆分为一个 MembershipService ，您可以将其注入到您的控制器中。

我不能给你一个简单的“改变这条线”的答案，这个问题是概念性的，对不起。你*可以*传递一个硬编码的提供者名称，但你确实开始违反一切。******

# jquery - jquery 1.8.3 和 Yii: (window).height() = (document).height()

> ID：14425237
> 
> 赞同：0
> 
> 时间：2013-01-20T14:01:12.097
> 
> 标签：jquery, yii

我的项目适用于 Yii 1.1.12（包括 jQuery 1.7.2）。现在我尝试更新到 Yii 1.1.13（包括 jQuery 1.8.3）。突然发现比`$(window).height()`现在返回的是**文档**高度，而​​不是窗口。

我正在尝试 Yii 1.1.12 和 jQuery 1.8.3 - 结果相同：`$(window).height() = $(document).height()`. 但是 $(window).height() 确实少了。

回到 Yii 1.1.12 和 jQuery 1.7.2 - 并且有很好的结果。没有 Yii 的 jQuery 1.8.3 可以正常工作。

这是什么意思？为了解决这个问题，我必须研究哪个方向？

**解决方案。** 事实证明，我有一些带有[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)的文件。因此，他们破坏`<!DOCTYPE html>`了声明（在本地 Windows 机器上），并且 jQuery 无法正常使用此文档。现在我从文件中清理 BOM 并且 jQuery 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:48:50.240

当您的页面以 quirks 模式呈现时，就会出现此问题。参考：[http ://bugs.jquery.com/ticket/12388](http://bugs.jquery.com/ticket/12388)

尝试将您的文档类型更改为：

```
<!DOCTYPE HTML> 
```

你说没有 Yii 的 jQuery 1.8.3 可以正常工作。这可能是因为您为非 Yii 页面使用了不同的文档类型。

# javascript - 如何更新 Javascript 中的元组？

> ID：14425240
> 
> 赞同：3
> 
> 时间：2013-01-20T14:01:29.493
> 
> 标签：javascript, jquery

（不确定我是否使用了正确的术语，在 Python 中称为元组。希望它有意义。）

我想重构以下方法。唯一的区别是`enddate/startdate`分别，因此无需重复代码。

```
function datepicker_reload(source, isPast){
    if(isPast){
        $(source).find('.date_picker').datepicker({ 
            endDate: new Date(),
            format: $('#locale').text(), 
            weekStart:1, 
            calendarWeeks:'True',   
            autoclose: 'True', 
            todayHighlight: 'True' 
        });
    }
    else{
        $(source).find('.date_picker').datepicker({
            startDate: new Date(), 
            format: $('#locale').text(), 
            weekStart:1, 
            calendarWeeks:'True',   
            autoclose: 'True', 
            todayHighlight: 'True' 
        });
    }
} 
```

我想知道是否可以将公共值作为一个元组放在一起：

```
var options = { format: $('#locale').text(), 
            weekStart:1, 
            calendarWeeks:'True',   
            autoclose: 'True', 
            todayHighlight: 'True'  }; 
```

然后在其中添加一个额外的密钥对：（但是这一步似乎完全关闭了，我如何实现它？）

```
if(isPast)
   options += {endDate: new Date()}
else
   options += {startDate: new Date()} 
```

然后将整个元组传递给函数：

```
$(source).find('.date_picker').datepicker(options); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:04:14.750

您尝试执行的 javascript 中的正确语法是：

```
if(isPast){
   options["endDate"] = new Date();
}else{
   options["startDate"] = new Date();
} 
```

您只是在设置对象的属性。

注意：（`options.endDate = new Date();`点符号）也可以，但是如果您添加到对象的属性包含空格、运算符或其他特殊字符，则它不起作用。

注意 2：我假设您并不是真的想克隆该对象，而只是向它添加一个属性，javascript 对象是可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:04:34.323

使用 jQuery，执行此操作的常规方法是使用[extend](http://api.jquery.com/jQuery.extend/)：

```
$.extend(options, { endDate: new Date() }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T14:06:47.307

你可以使用[`$.extend`](http://api.jquery.com/jQuery.extend/)jquery方法

```
function datepicker_reload(source, isPast){
    var options = { format: $('#locale').text(), 
            weekStart:1, 
            calendarWeeks:'True',   
            autoclose: 'True', 
            todayHighlight: 'True'  };

    var newDate = new Date();

    if(isPast){
        $.extend(options, { endDate: newDate } );
    } else {
        $.extend(options, { startDate: newDate } );
    }

    $(source).find('.date_picker').datepicker( options );
} 
```

# java - 自定义 JComboBox：LAF 为系统 LAF 时的“无限循环事件”

> ID：14425244
> 
> 赞同：2
> 
> 时间：2013-01-20T14:01:36.627
> 
> 标签：java, swing, jcombobox, look-and-feel

我自定义我的 JComboBox 如下。该程序在默认 LAF 下运行正常，但每当我将 LAF 更改为 System LAF（另一个 LAF，Nimbus 也可以）时，单击按钮后就会出现无限循环。我看到actionPerformed方法被无限调用了。
请帮我解决这个问题。我使用 jdk 1.6.0_33
如果有任何不清楚的意思，我很抱歉。我的英语不好
提前谢谢。

```
package sig.dw.ui;

import java.awt.Component;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ComboBoxEditor;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
//import javax.swing.event.EventListenerList;

/**
*
* @author congnh
*/
public class ButtonableComboBox extends JComboBox{

    private ButtonableComboBoxEditor comboBoxEditor;
    public ButtonableComboBox(){
        super();
        comboBoxEditor = new ButtonableComboBoxEditor();
        // eventListenerList = new EventListenerList();
        setEditable(true);
        setEditor(comboBoxEditor);
    }

    public ButtonableComboBox(Object[] items){
        this();
        setModel(new DefaultComboBoxModel(items));
    }

    public void addButtonListener(ActionListener listener){
        comboBoxEditor.addActionListener(listener);
    }

    public void removeButtonListener(ActionListener listener){
        comboBoxEditor.removeActionListener(listener);
    }

    class ButtonableComboBoxEditor implements ComboBoxEditor{
        private JButton button;
        public ButtonableComboBoxEditor(){
            button = new JButton();
        }
        @Override
        public Component getEditorComponent() {
            return button;
        }
        @Override
        public void setItem(Object anObject) {
            if(anObject!=null){
                button.setText(anObject.toString());
            }
        }
        @Override
        public Object getItem() {
            return button.getText();
        }

        @Override
        public void selectAll() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public void addActionListener(ActionListener l) {
            System.out.println("add new listener");
            button.addActionListener(l);
        }

        @Override
        public void removeActionListener(ActionListener l) {
            button.removeActionListener(l);
        }
    }

    public static void main(String args[]){
        javax.swing.SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run(){
                String[] comboBoxItems = {"Browse","Explorer","Firefox","IE","Chrome","Opera"};
                JFrame frame = new JFrame();
                JPanel panel = new JPanel();
                panel.setLayout(new FlowLayout());
                ButtonableComboBox bcb = new ButtonableComboBox(comboBoxItems);
                bcb.addButtonListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println(e.getActionCommand());
                    }
                });
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                panel.add(bcb);
                frame.add(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:54:42.593

作为参考，我在 Mac OS X / Java 1.6.0_37 上看到`StackOverflowError`了 for ，但不是, , 或. [使用下面的示例和此处](https://stackoverflow.com/a/11949899/230513)看到的 L&F 选择器，当 UI 委托递归调用时，我得到了以下堆栈跟踪。我没有看到明显的解决方法。`MotifLookAndFeel``MetalLookAndFeel``NimbusLookAndFeel``AquaLookAndFeel``doClick()`

附录：我在 Ubuntu 12 / Java 1.6.0_24 上看到类似`StackOverflowError`的，但不是,或.`MotifLookAndFeel``MetalLookAndFeel``NimbusLookAndFeel``GTKLookAndFeel`

```
线程“AWT-EventQueue-0”中的异常 java.lang.StackOverflowError
  在 sun.font.FontManager.getFont2D（本机方法）
  在 sun.java2d.SunGraphics2D.checkFontInfo(SunGraphics2D.java:780)
  在 sun.java2d.SunGraphics2D.getFontInfo(SunGraphics2D.java:941)
  在 sun.java2d.pipe.GlyphListPipe.drawString(GlyphListPipe.java:32)
  在 sun.java2d.SunGraphics2D.drawString(SunGraphics2D.java:3054)
  在 sun.swing.SwingUtilities2.drawString(SwingUtilities2.java:517)
  在 sun.swing.SwingUtilities2.drawStringUnderlineCharAt(SwingUtilities2.java:538)
  在 javax.swing.plaf.basic.BasicButtonUI.paintText(BasicButtonUI.java:294)
  在 javax.swing.plaf.basic.BasicButtonUI.paintText(BasicButtonUI.java:319)
  在 javax.swing.plaf.basic.BasicButtonUI.paint(BasicButtonUI.java:207)
  在 com.sun.java.swing.plaf.motif.MotifButtonUI.paint(MotifButtonUI.java:91)
  在 javax.swing.plaf.ComponentUI.update(ComponentUI.java:153)
  在 javax.swing.JComponent.paintComponent(JComponent.java:760)
  在 javax.swing.JComponent.paint(JComponent.java:1037)
  在 javax.swing.JComponent.paintChildren(JComponent.java:870)
  在 javax.swing.JComponent.paint(JComponent.java:1046)
  在 javax.swing.JComponent.paintChildren(JComponent.java:870)
  在 javax.swing.JComponent.paint(JComponent.java:1046)
  在 javax.swing.JComponent._paintImmediately(JComponent.java:5106)
  在 javax.swing.JComponent.paintImmediately(JComponent.java:4890)
  在 javax.swing.JComponent.paintImmediately(JComponent.java:4902)
  在 javax.swing.AbstractButton.doClick(AbstractButton.java:352)
  在 javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(BasicRootPaneUI.java:191)
  在 javax.swing.plaf.basic.BasicComboBoxUI$Actions.actionPerformed(BasicComboBoxUI.java:1575)
  在 javax.swing.plaf.basic.BasicComboBoxUI$Handler.actionPerformed(BasicComboBoxUI.java:1904)
  在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
  在 javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
  在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
  在 javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
  在 javax.swing.AbstractButton.doClick(AbstractButton.java:389)
  ...
  在 javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(BasicRootPaneUI.java:191)
  在 javax.swing.plaf.basic.BasicComboBoxUI$Actions.actionPerformed(BasicComboBoxUI.java:1575)
  在 javax.swing.plaf.basic.BasicComboBoxUI$Handler.actionPerformed(BasicComboBoxUI.java:1904)
  在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
  在 javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
  在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
  在 javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
  在 javax.swing.AbstractButton.doClick(AbstractButton.java:389)
  在 javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(BasicRootPaneUI.java:191)
  在 javax.swing.plaf.basic.BasicComboBoxUI$Actions.actionPerformed(BasicComboBoxUI.java:1575)

```

SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.ComboBoxEditor;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JToolBar;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class ButtonableComboBox extends JComboBox {

    private ButtonableComboBoxEditor comboBoxEditor;

    public ButtonableComboBox() {
        comboBoxEditor = new ButtonableComboBoxEditor();
        setEditor(comboBoxEditor);
        setEditable(true);
    }

    public ButtonableComboBox(Object[] items) {
        this();
        setModel(new DefaultComboBoxModel(items));
    }

    public void addButtonListener(ActionListener listener) {
        comboBoxEditor.addActionListener(listener);
    }

    public void removeButtonListener(ActionListener listener) {
        comboBoxEditor.removeActionListener(listener);
    }

    class ButtonableComboBoxEditor implements ComboBoxEditor {

        private JButton button = new JButton();

        @Override
        public Component getEditorComponent() {
            return button;
        }

        @Override
        public void setItem(Object anObject) {
            if (anObject != null) {
                button.setText(anObject.toString());
            }
        }

        @Override
        public Object getItem() {
            return button.getText();
        }

        @Override
        public void selectAll() {
            System.out.println("select all");
            button.requestFocus();
        }

        @Override
        public void addActionListener(ActionListener l) {
            System.out.println("add listener");
            button.addActionListener(l);
        }

        @Override
        public void removeActionListener(ActionListener l) {
            System.out.println("remove listener");
            button.removeActionListener(l);
        }
    }

    public static void main(String args[]) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                String[] comboBoxItems = {
                    "Browse", "Explorer", "Firefox", "IE", "Chrome", "Opera"};
                JFrame frame = new JFrame();
                JPanel panel = new JPanel();
                ButtonableComboBox bcb = new ButtonableComboBox(comboBoxItems);
                bcb.addButtonListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println(e.getActionCommand());
                    }
                });
                panel.add(bcb);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                // https://stackoverflow.com/a/11949899/230513
                frame.add(createToolBar(frame), BorderLayout.NORTH);
                frame.add(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - 在 WP7 开发中反向排序 XML 数据

> ID：14425246
> 
> 赞同：0
> 
> 时间：2013-01-20T14:01:43.407
> 
> 标签：c#, xml, windows-phone-7, isolatedstorage

我有一个问题。我在 windows phone 7 列表框中找到了用于订购 xml 节点的代码：

```
using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("P*****.xml", FileMode.Open, isoStore))
                {
                    XDocument loadedCustomData = XDocument.Load(isoStream);
                    var filteredData = from c in loadedCustomData.Descendants("person")
                                       orderby (string)c.Attribute("name")
                                       select new Person()
                                       {
                                           Name = c.Attribute("name").Value,
                                           Beneficiary = c.Attribute("beneficiary").Value,
                                           Price = c.Attribute("price").Value,
                                           Deadline = c.Attribute("deadline").Value,
                                           Index = c.Attribute("index").Value,
                                           Description = c.Attribute("description").Value,
                                           Status = c.Attribute("status").Value

                                       };

                    listBox.ItemsSource = filteredData;
                }
            } 
```

但这仅适用于从 A 到 Z 的排序。但是我应该怎么做才能反向排序数据（从 Z 到 A 名称）？我发现了这样的东西：

```
var people = data.Elements("person").OrderBy(p => (string)p.Attribute("Age")); 
```

并将其更改为：

```
var people = data.Elements("person").OrderBy(p <= (string)p.Attribute("Age")); 
```

但它有错误：

> 无法从用法中推断方法“System.Linq.Enumerable.OrderBy(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数。

所以我认为这种方法没有意义。无论如何，您对反向 XML 排序有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:50:31.363

你找到了Linq！这 '=>' 读作 'Goes to' 这就是为什么当您尝试反转它时会出现错误。

在这里查看示例[http://www.programmersheaven.com/2/CSharp3-4](http://www.programmersheaven.com/2/CSharp3-4)

# c# - 映射和sql数据库创建

> ID：14425252
> 
> 赞同：2
> 
> 时间：2013-01-20T14:02:09.760
> 
> 标签：c#, sql-server, entity-framework-5, localdb

我开始了一个项目并使用 Entity Framework 5。现在我在我的 SQL Server Express 上创建了一个包含所有表的数据库。此外，我`DbContext`使用流畅的映射创建了 。

流利的映射或`.edmx`映射文件哪个更好？

数据库现在在 SQL Server 上，但我也希望支持 SQL 本地数据库。

有没有办法告诉`EF`我要使用 SQL 本地数据库？

我应该在设置中发送整个数据库还是更好地在我的应用程序启动时创建数据库？如何使用`EF`创建数据库（SQL 服务器或 SQL 本地数据库）？

每一个有用的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:57:58.193

如果您使用的是 EF5，我会远离 edmx。您可以使用 Entity Framework Power Tools 从数据库中对模型进行逆向工程。您可以使用数据注释或流利的映射来自定义您的模型。

如果您首先使用 EF5 代码，它可以自动为您创建数据库（如果不存在），但是在后续升级中效果不佳（它可以重新创建数据库，但随后您将使用现有数据）。您可以使用的选项是 EF 迁移，您可以在类似流利的语言中指定对数据库所做的修改，或者使用 Visual Studio 中的数据库项目，您可以将所有架构存储在源代码管理中，然后生成数据库版本之间的升级脚本。

# lapack - 如何在 LAPACK sgelsd 例程中为 b 分配内存

> ID：14425253
> 
> 赞同：3
> 
> 时间：2013-01-20T14:02:29.240
> 
> 标签：lapack, lapacke

根据官方用户指南，sgelsd 用于解决最小二乘问题

```
min_x || b - Ax ||_2 
```

并允许矩阵 A 是矩形且秩亏的。并且根据sgelsd源码中的接口描述，b作为输入输出参数。当 sgelsd 完成时， b 存储解决方案。所以 b 占用 m*sizeof(float) 个字节。而解决方案 x 需要 n*sizeof(float) 个字节（假设 A 是 am*n 矩阵，b 是 am*1 向量）。

但是，当 n>m 时，b 的内存太小，无法存储解 x。如何处理这种情况？我没有从 sgelsd 源代码的注释中得到它。我可以只为 b 分配 n*sizeof(float) 字节并使用第一个 m*sizeof(float) 来存储 b 向量吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:06:00.660

[来自英特尔 MKL](http://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/sgelsd_ex.c.htm)的这个示例给出了答案。B 分配为 LDB*NRHS (LDB = max(M,N)，并补零。注意输入 B 不一定是 1 向量，SGELSD 可以同时处理多个最小二乘问题（因此 NRHS ）。

来自[SGELSD 的 Lapack 文档](http://www.netlib.org/lapack/explore-html/d0/db8/group__real_g_esolve.html#gabc655f9cb0f6cfff81b3cafc03c41dcb)：

> [进出] B
> 
> ```
>  B is REAL array, dimension (LDB,NRHS)
>       On entry, the M-by-NRHS right hand side matrix B.
>       On exit, B is overwritten by the N-by-NRHS solution
>       matrix X.  If m >= n and RANK = n, the residual
>       sum-of-squares for the solution in the i-th column is given
>       by the sum of squares of elements n+1:m in that column. 
> ```
> 
> [输入] LDB
> 
> ```
>  LDB is INTEGER
>       The leading dimension of the array B. LDB >= max(1,max(M,N)). 
> ```

# c# - 如何在其他没有安装 Visual Studio 的计算机上运行 Visual Studio 项目

> ID：14425259
> 
> 赞同：0
> 
> 时间：2013-01-20T14:03:01.643
> 
> 标签：c#, visual-studio-2010, deployment

我做了一个很小的视觉工作室项目。我希望它应该部署在客户的 PC 中，所以我想制作一个 exe 文件。以便正确安装和使用。我怎样才能制作一个`.exe`或`.msi`文件。我刚刚在一些我不知道该怎么做的地方听到它。因为我是一个新手，所以我对 Visual Studio 不太了解，我认为它会帮助我制作 exe 文件，但是在制作之后我得到了我无法部署我的项目，因为我有表单的 .cs 文件。我正在使用`visual studio 2010 ultimate`和构建`c#`语言项目我可以制作 .msi 或 .exe 文件以便它也可以在其他计算机上运行吗？如果是，那么程序是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:05:06.457

当你编译你的项目时，你会在 和 中找到和`.exe`（可能）`.dll`文件。 `bin\Debug``bin\Release`

您可以将这些文件复制到另一台计算机并运行该程序，只要它安装了正确版本的 .Net 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T12:30:47.173

1.  在客户端计算机上安装数据库。
2.  在计算机上安装您的项目。
3.  在计算机上制作 ODBC。

    一个。用 sql server 做 DNS。

    湾。制作微软访问驱动程序。

# c++ - 为什么包含守卫不阻止多个函数定义？

> ID：14425262
> 
> 赞同：48
> 
> 时间：2013-01-20T14:03:34.423
> 
> 标签：c++

链接器在此报告重复符号：

```
#ifndef testttt
#define testttt

void anything(){
    std::cout<<"hellooooooo";
}

#endif 
```

因为它在包含守卫内，所以我希望这个函数只定义一次。但显然不是。

我知道我可以把这个词`static`放在它前面，然后它就会起作用（我仍然觉得很讽刺，因为静态应该给它内部链接，但这个函数可以从多个 cpp 文件中使用）。

所以我想我的两部分问题是：1）为什么包含警卫不会像对其他标题项那样阻止此函数的多个定义，以及 2）为什么`static`当静态应该*防止*名称不可见时这个词会解决这个问题在其他翻译单位？我添加了它，实际上我可以从包含这个头文件的任何地方调用这个函数。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-20T14:07:02.397

*“1）为什么包含守卫不像其他标题项那样阻止此函数的多个定义”*

因为每个翻译单元（即 .cpp 文件）都是单独处理的，并且经过相同的条件。翻译单元不会共享其他翻译单元遇到的预处理器定义。这意味着将处理该标题的*所有*翻译单元都将包含该函数的定义。当然，链接器会抱怨同一个函数有多个定义。

*“2）当静态应该防止名称在其他翻译单元中可见时，为什么静态词会解决这个问题？”*

因为`static`关键字为每个翻译单元制作了该函数的私有副本。

但是，如果您希望在共享标头中定义该函数，则应将其标记为`inline`，这将解决您的问题并使预处理器保护变得不必要。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-20T14:05:22.880

> **为什么包含守卫不像其他标题项那样阻止此函数的多个定义？**

从 C++ 程序创建可执行文件的过程包括三个阶段：

1.  预处理
2.  编译 &
3.  链接

***预处理***：在此阶段替换宏等预处理器指令。
***编译***是通过检查语言语义将源代码转换为目标代码。
***链接***是将所有生成的目标代码链接在一起以形成可执行文件。

标头保护可防止标头的内容在预处理期间多次包含在***同一*** ***[翻译单元中。](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)***它们不会阻止内容包含在不同的翻译单元中。当你在不同的翻译单元中包含这个头文件时，每个单元都会有这个函数的定义。
编译器分别编译每个翻译单元以生成一个单独的目标文件（*.o*），每个 .o 文件都将具有此函数定义的副本。当链接器在生成时尝试链接到函数定义时，`.exe`它会发现相同函数的多个定义，从而导致混淆要链接到哪一个。为了避免这个问题，标准定义了一个规则，称为***[一个定义规则（ODR）](http://en.wikipedia.org/wiki/One_Definition_Rule)***，它禁止同一实体的多个定义。
如您所见，在头文件中包含函数定义并将该头文件包含在多个翻译单元中违反了 ODR。
通常的做法是在头文件***中提供声明***，在一个且只有一个源文件中***提供定义。***

> **当静态应该防止名称在其他翻译单元中可见时，为什么静态词会解决这个问题？**

当您将关键字添加`static`到函数时，每个翻译单元都将拥有自己的函数副本。默认情况下，函数具有***[外部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)***，但`static`强制函数具有***内部链接***。因此，该定义对不同的翻译单元不可见。这种函数的每个实例都被视为一个单独的函数（*每个函数的地址不同*），并且这些函数的每个实例都有自己的静态局部变量和字符串文字的副本。请注意，这会大大增加可执行文件的大小。

* * *

如果要将函数定义包含在头文件中。有3种方法可以做到：

1.  将函数标记为`inline`或
2.  将函数标记为`static`或
3.  将函数放在未命名的命名空间中。

请注意，`#1`并`#2`执行与上面第二个答案中提到的相同的操作。
该`#3`标准放宽了内联函数的 ODR，并允许每个翻译单元有自己的定义（*前提是所有定义都相同*）。

因此，如果您真的想将函数定义放在 header`#1`中是正确的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T14:07:51.090

> 1) 为什么包含守卫不像其他标题项那样阻止此函数的多个定义，

包含保护可防止在**同一**翻译单元中多次包含标题。但是，它并**不能**防止多重定义：如果头部包含在多个翻译单元中，那么就会出现多重定义错误，因为函数是在每个翻译单元中定义的，并且由于它具有**外部**链接，所以所有翻译单元都可以请参阅所有其他翻译单元的定义。为防止此错误，您只需在标头中提供*声明*，并在 ONE文件中提供*定义。*`.cpp`

阅读有关[单一定义规则 (ODR)](http://en.wikipedia.org/wiki/One_Definition_Rule)和[外部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)的信息。

> 2）当静态应该防止名称在其他翻译单元中可见时，为什么静态词会解决这个问题？

因为`static`使函数在每个翻译单元*内部*。这就是**内部**链接的意思：其他翻译单元看不到定义。

# foreach - 如何在嵌套的foreach JSTL中获取迭代次数

> ID：14425264
> 
> 赞同：1
> 
> 时间：2013-01-20T14:03:43.130
> 
> 标签：foreach, nested, jstl

我有一个 TreeMap

```
<c:if test="${!empty viewObjects}">
    <table  border="0" cellpadding="0" cellspacing="0">
    <c:forEach items="${viewObjects}" var="relations">
        <c:forEach items="${relations.value}" var="role" varStatus="status">
            <c:set var="subcount" value="${status.count + 1 }"/>
            <tr class="color<c:out value="${subcount%2}"/>">
                <td>${relations.key}</td>
                <td>${role.name}</td>
            </tr>
        </c:forEach>
    </c:forEach>
    </table>
</c:if> 
```

对于嵌套的foreach中的每次迭代，我如何才能使子计数仅增加+1？根据我的经验，“状态”在第一次 foreach 迭代时重新开始，所以这也会影响子计数，我不会得到总迭代次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:27:27.873

你可以像在 Java 中那样做：通过使用在最外层循环之外初始化的计数器变量：

```
int counter = 0;
for (...) {
    for (...) {
        count++;
    }
} 
```

所以在 JSTL 中，它会变成

```
<c:set var="counter" value="0"/>
<c:forEach ...>
    <c:forEach ...>
        <c:set var="counter" value="${counter + 1}"/>
    </c:forEach>
</c:forEach> 
```

# php - 我认为 PHP 第 14 行语法错误字符串错误

> ID：14425267
> 
> 赞同：-3
> 
> 时间：2013-01-20T14:04:00.430
> 
> 标签：php, html

我在我的 Stream 中添加了一些脚本，因为我在一个网站上工作，但由于某种原因我在第 14 行一直出错 $User_id; 无法正常工作，我多次浏览脚本但找不到错误，它是一个语法错误，但并没有告诉我太多原因，因为我不是 php 专业人士，但我知道有很多人是 :D 但是无论如何，请帮助:)

```
<?php
include('settings.php');
//Made by Arnem\\
//Settings.php\\
$closed = 2000; //format of time the stream usualy closes\\
$closed2 = '20:00'; //format of same as $closed but with : in the middle of hours : minutes\\
$opend = 1500; //format of time when the stream usualy starts\\
$opend2 = '15:00'; //format of same as $opend but with : in the middle of hours : minutes\\

$openmsg = '<p class=customfont>Streaming status: Online</p>'; //Streaming Online Message\\
$closemsg = '<h1 class=customfont2>Streaming is currently offline!</h1>'; //closed message\\
$closemsg2 = 'Streaming status: Offline'; //Streaming offline message\\
$Streamer_msg = 'Streamer:'; //Message of streamer\\
$Streamer_error = 'ERROR, user not found.'
$User_id = '2';
$userid1 = 'Arnem'; //User that streams songs\\
$userid2 = 'DJ Trolli';
$userid3 = 'Mr. Nobody';
$userid4 = '';
$userid5 = '';
$usr_None = 'None';
$userid = $User_id;
//End of Settings.php\\
//DO NOT CONFIGURE UNDER THIS LINE!\\
$Streamermssg = $Streamer_msg . ' ';
$Streamererror = $Streamer_msg . '';
if ($usersid == NULL) {
$user1 = '<p class=customfont>' . $Streamermssg . $usr_None . '</p>';
} elseif ($usrid == '1') {
$user1 = '<p class=customfont>' . $Streamermssg . $userid1 . '</p>';
} elseif ($userid == '2') {
$user1 = '<p class=customfont>' . $Streamermssg . $userid2 . '</p>';
} elseif ($userid == '3') {
$user1 = '<p class=customfont>' . $Streamermssg . $userid3 . '</p>';
} elseif ($userid == '4') {
$user1 = '<p class=customfont>' . $Streamermssg . $userid4 . '</p>';
} elseif ($userid == '5') {
$user1 = '<p class=customfont>' . $Streamermssg . $userid5 . '</p>';
} else {
$user1 = '<p class=customfont>' . $Streamererror . '</p>';
}

$openmsg3 = '<p class=customfont>' . $openmsg;
$closemsg3 = '<h1 class=customfont2>' . $closemsg;
$closemsg4 = '<p class=customfont>' . $closemsg2 . '</p>';

//Re Configure script\\
$time = gmdate(H)+1 . gmdate(i);

if ($time>$closed) {
$streamer = $Streamermsg . $usr_None . '</p>';
$status1 = $closemsg3;
$status2 = $closemsg4;
} elseif ($time<$opend) {
$streamer = $Streamermsg . $usr_None . '</p>';
$status1 = $closemsg3;
$status2 = $closemsg4;
} else {
$streamer = $Streamermsg2 . $user1;
$status2 = $openmsg3;
}

?>
<!--HTML CODE -->
<html>
<center>
<h1 class="customfont">Welcome to my Stream</h1>
<head>

<title>Sound of Songs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="swfobject.js"></script>

<style type="text/css">
@font-face {
        font-family: "My Custom Font";
        src: url(http://enderman.tk/stream/custom.ttf) format("truetype");
}
@font-face {
        font-family: "My Custom Font2";
        src: url(http://enderman.tk/stream/custom2.ttf) format("truetype");
}
p.customfont {
        font-family: "My Custom Font";
        color: #ffffff;
}
h1.customfont {
        font-family: "My Custom Font";
        color: #ffffff;
}
h2.customfont {
        font-family: "My Custom Font";
        color: #ffffff;
}
a.customfont {
        font-family: "My Custom Font";
        color: #ffffff;
}
a.customfont:hover {
        font-family: "My Custom Font";
        color: #000000;
}
a.customfont:visited {
        font-family: "My Custom Font";
        color: #3399CC;
}
h1.customfont2 {
        font-family: "My Custom Font";
        color: #FF0000;
}
body
{
background-color: #2c85c7;
}
</style>
<!--FLASH CONTENT-->

</head>
<body>
<div id="flashcontent2">
        <p>
        <strong>Sorry this site have a flash based native radio and needed adobe flash 10+ support. </strong><br />
            <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash">Download Flash here.</a>
    </p>
</div>

<script type="text/javascript">
        // <![CDATA[

        var so = new SWFObject("nativeradio2small.swf", "nativeradio2small", "300", "50", "10", "#cccccc");
        so.addParam("scale", "noscale");
        so.addVariable("swfcolor", "2c85c7");
        so.addVariable("swfwidth", "300");
        so.addVariable("swfradiochannel", "Sound of Songs");
        so.addVariable("swfstreamurl", "http://enderman.tk:1234");
        so.addVariable("swfpause", "1");
        so.write("flashcontent2");

        // ]]>
</script>
<p></p>
</body>
<?php echo $status1; ?>
<p class="customfont">Mixes: DJ Trolli</p>
<p class="customfont">Songs found by Arnem</p>
<p class="customfont">And played by Arnem</p>
<p class="customfont">Love from Arnem & DJ Trolli!</p>
<p class="customfont">Stream is up at <?php echo $opend2; ?> - <?php echo $closed2; ?> GMT +1</p>
<?php echo $status2; ?>
<?php echo $streamer; ?>

<br />
<h2 class="customfont">Special Message for our Listeners :)</h2>
<p class="customfont">Want more of DJ Trolli?</p><a href="https://soundcloud.com/djtrolli" class="customfont"> Click Here :)</a>

</center>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:07:27.017

第 14 行应该是这样的（末尾有分号）：

```
$Streamer_error = 'ERROR, user not found.' ; 
```

查看 Web 服务器 error.log 以获取错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:05:17.793

您之前错过了`;`该行：

```
$Streamer_error = 'ERROR, user not found.';
//       semi-colon missing here ---------^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:06:50.430

你忘了用`;`分号结束那句话

请从下一行替换该行：-

```
$Streamer_error = 'ERROR, user not found.'; 
```

# java - 如何将元素添加到数组的末尾？

> ID：14425271
> 
> 赞同：1
> 
> 时间：2013-01-20T14:04:16.713
> 
> 标签：java, arrays

我不知道这是否正确，所以我需要你的意见。我有一组员工姓名。它将显示在控制台上，然后提示用户是否要插入另一个名称。该名称应添加到数组的末尾（索引 4），并将再次显示该数组，但已添加新名称。我怎么做？顺便说一句，这是我的代码。我被困住了。我什至不知道在那里写 null 是否有效。

```
public static void list() {
    String[] employees = new String[5];
    employees[0] = "egay";
    employees[1] = "ciara";
    employees[2] = "alura";
    employees[3] = "flora";
    employees[4] = null;

    for(int i = 0; i < employees.length; i++) {
        System.out.println(employees[i]);
    }
}
public static void toDo() {
    Scanner input = new Scanner(System.in);
    System.out.println("What do you want to do?");
    System.out.println("1 Insert");
    int choice = input.nextInt();

    if(choice == 1) {
        System.out.print("Enter name: ");
        String name = input.nextLine(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:06:32.157

你不能，基本上。

数组在构造时具有固定的大小。您*可以*创建一个具有所需大小的新数组，将所有现有元素复制到其中，然后复制新元素……或者您可以改用`List<String>`实现，例如`ArrayList<String>`. 我强烈建议后一种方法。

我建议您阅读[集合教程](http://docs.oracle.com/javase/tutorial/collections/index.html)以了解有关 Java 中可用的各种集合的更多信息。

另请注意，您当前在该方法中只有一个*局部*变量。`list`您可能需要一个*字段*。理想情况下是一个实例字段（例如在一个名为`Company`或类似的类中） - 但如果您只是在试验，您现在可以使用一个`static`字段。静态字段代表*全局状态*，对于可变值通常不是一个好主意，但目前看起来你所有的方法都是静态的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:08:56.563

数组的大小是固定的。一旦你声明你不能修改它的大小。

使用集合`java.util.List`或`java.util.Set`. `ArrayList`可动态增长并由数组支持的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:11:19.817

如果您真的必须使用数组，那么您将不得不通过使用中间副本来增加数组的大小。

```
String[] array = new String[employees.length + 1];
System.arraycopy(employees, 0, array, 0, employees.length);
array[employees.length] = newName;
employees = array; 
```

但是，最好的方法是使用`List`实​​现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T16:38:24.333

在这里，您使用的是在创建时固定的静态数组。我认为您应该使用 java.util.Arraylist 它将为您提供动态数组的便利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T14:15:40.843

这取决于用户是否可以输入超过 4 个员工姓名。如果他们可以，那么使用 ArrayList 是更好的选择。此外，employees 变量需要是类的静态属性，因为它用于静态方法。

```
private static String[] employees = new String[5];

static {
    employees[0] = "egay";
    employees[1] = "ciara";
    employees[2] = "alura";
    employees[3] = "flora";
    employees[4] = null;
}

public static void list() {
    for(int i = 0; i < employees.length; i++) {
        System.out.println(employees[i]);
    }
}

public static void addEmployeeName(String name, int index) {
    employees[index] = name;
} 
```

# php - PHP UPDATE未插入数据库干净行

> ID：14425275
> 
> 赞同：0
> 
> 时间：2013-01-20T14:04:51.000
> 
> 标签：php, mysql

我做了一个小系统，它应该更新某些东西。它包括一个表格。

```
if(isset($_GET['bevestiging'])) {
$kamerurl= $_POST['kamer'];
mysql_query("UPDATE volg_dj_aan_uit SET (aan_of_uit,kamerurl) VALUES ('aanzetten','$kamerurl')");
echo '<b>Geupdate!!</b>
<br>
Het volgen is aangezet!
<br>
<a href="index.php?p=tools_volg_kamer" target="_self">Verder »</a>';
} 
```

它检查是否设置了“bevestiging”（这是）然后从 $_POST['kamer'] 发布的 URL 应该转移到 $kamerurl 但它是一个空的结果。它还将“aanzetten”设置为 0 而不是“aanzetten”，这是 PHP 中的形式：

```
else {
$sql = mysql_query("SELECT * FROM volg_dj_aan_uit");
$row = mysql_fetch_array($sql);
if($row['aan_of_uit'] == "uitzetten") {
$aanofuit = "aanzetten";
} else if($row['aan_of_uit'] == "aanzetten") {
$aanofuit = "uitzetten";
}
echo 'Vul de kamerurl in: <form method="post" action="index.php?p=tools_volg_kamer&bevestiging=JA"><input type="text" id="kamer" name="kamer"><br>
Weet je zeker dat je gevolgt wilt worden?
<br>
<input type="submit"id="Submit"name="Submit" value="Ja">
</form>';
echo '
<a href="index.php?p=tools_volg_kamer" target="_self">Nee</a> | <a href="index.php?p=tools_volg_kamer_'. $aanofuit .'" target="_self">Volgen '. $aanofuit .'</a>';
} 
```

这给了我数据库中的空结果。那么我该如何以正确的方式解决这个问题，它会生成一个将“kamerurl”发送到 tools_volg_kamer&bevestiging=ja 并将其设置在数据库中的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:06:40.783

`UPDATE`好的，这就是和之间的区别`INSERT`。

`UPDATE`仅在`INSERT`（*我认为您想要*的）在表格上添加新行时编辑该行。

```
INSERT INTO volg_dj_aan_uit (aan_of_uit,kamerurl) 
VALUES ('aanzetten','$kamerurl') 
```

`UPDATE`语法_

```
UPDATE volg_dj_aan_uit 
SET    aan_of_uit = 'aanzetten',
       kamerurl   = '$kamerurl'; 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ember.js - 在 EmberJS 1.0.0-pre.4 中检测路由转换

> ID：14425276
> 
> 赞同：2
> 
> 时间：2013-01-20T14:05:06.210
> 
> 标签：ember.js, ember-router

我正在尝试检测何时发生路由转换。我在`v1.0.0-pre.4`处理转换的最新版本的 Ember ( ) 中找到了这个代码片段：

```
 didTransition: function(infos) {
    // Don't do any further action here if we redirected
    if (infos[infos.length-1].handler.transitioned) { return; }

    var appController = this.container.lookup('controller:application'),
        path = routePath(infos);

    set(appController, 'currentPath', path);
    this.notifyPropertyChange('url');

    if (get(this, 'namespace').LOG_TRANSITIONS) {
      Ember.Logger.log("Transitioned into '" + path + "'");
    }
  }, 
```

我将 Ember 应用程序设置为`window.App = Ember.Application.create()`.

我注意到它调用了`this.notifyPropertyChange('url');`，但我试图将观察者附加到我的应用程序，`App.Router`或者`App.Router.router`我收到错误，因为它没有实现`Ember.Observable`。

如何在不为我的每条路由创建特殊的 Ember.Route 的情况下检测路由路径何时更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T14:16:12.817

**更新的答案**

你现在可以简单地在路由器的`didTransition`事件上绑定一个观察者：

```
App.Router.reopen({
  doSomethingOnUrlChange: function() {
    console.log(this.get('url'));
  }.on('didTransition')  
}); 
```

查看工作示例：http: [//jsfiddle.net/Sly7/3THD7/](http://jsfiddle.net/Sly7/3THD7/)

**下面不推荐使用的答案**

在这里的片段中，`set(appController, 'currentPath', path);`我认为您可以在此属性上放置一个观察者。

我不知道你想在哪里收到通知，但可以在 ApplicationController 本身中进行。

```
App.ApplicationController = Ember.Controller.extend({

  currentPathDidChange: function(){
    // the currentPath has changed;
  }.observes('currentPath');
}); 
```

例如，请参阅此工作小提琴：http: [//jsfiddle.net/qKrwU/](http://jsfiddle.net/qKrwU/)

# php - 狮身人面像未知键名“WHERE”

> ID：14425279
> 
> 赞同：2
> 
> 时间：2013-01-20T14:05:07.947
> 
> 标签：php, sphinx

我正在尝试对 Sphinx 中的非软删除记录进行索引：

```
source users : base
{
    sql_query       = \
        SELECT Id, Name, Transport, Deleted \
        FROM profiles \
        WHERE Deleted IS NULL

    sql_attr_uint = Transport
} 
```

在我添加 WHERE 语句之前，我对该源的索引可以很好地返回所有需要的记录：

```
ERROR: unknown key name 'WHERE' in path/to/sphinx.conf line 22 col 8 
```

我在其他来源中有 WHERE 语句按预期工作，但是当我尝试使用`Deleted IS NULL`.

有没有人对问题可能有任何想法？从我的源代码中过滤已删除是否更好？

我应该注意到我正在 Windows 上开发，所以这是作为 Windows 服务运行的。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T17:35:29.543

我的猜测是你之前的斜线后面有一个空格......

# javascript - 为什么我的本地存储不起作用？

> ID：14425288
> 
> 赞同：0
> 
> 时间：2013-01-20T14:06:09.043
> 
> 标签：javascript, html, local-storage

每个用户都可以从一个表单动态地创建一个表。每次进行更改或人员退出页面时，我都会尝试将表及其当前状态保存到本地存储。名称存储用户的名称，我将其用作键。但是，它对我不起作用。我想我在需要使用 saveData 函数时保存数据，并在需要时使用 showData 函数解析它。谁能告诉我哪里出错了？

```
 userDiv.onclick=(function() {
            alert($(this).attr("id"));
            name= $(this).attr("id");
            window.location.href = "Createtask.html";
            showData();//TRYING TO SHOW THE USER'S TABLE WHEN PAGE OPENS
            }

    function makeChart() {
     table = document.createElement('table');
    var taskName = document.getElementById('taskname').value,
        header = document.createElement('th'),
        numDays = document.getElementById('days').value, //columns
        howOften = document.getElementById('times').value, //rows
        row,
        r,
        col,
        c;
    var counter = 0;
    var target = numDays * howOften;

    var cel = null;
    var myImages = new Array();
    myImages[0] = "http://www.olsug.org/wiki/images/9/95/Tux-small.png";
    myImages[1] = "http://a2.twimg.com/profile_images/1139237954/just-logo_normal.png";
    var my_div = document.createElement("div");
    my_div.id = "showPics";
    document.body.appendChild(my_div);
    var newList = document.createElement("ul");
    my_div.appendChild(newList);

    if (taskName == '' || numDays == '') {
        alert('Please enter task name and number of days');
    }
    if (howOften == '') {
        howOften = 1;
    }
    if (taskName != '' && numDays != '') {

        for (var i = 0; i < myImages.length; i++) {
            var allImages = new Image();
            allImages.src = myImages[i];
            allImages.onclick = function (e) {
                if (sel !== null) {
                    sel.src = e.target.src;
                    my_div.style.display = 'none';
                    sel.onclick = null;
                    counter++;
                    sel = null;
                    if (counter == target) {
                      alert("Show some fireworks "+name+" gets a reward");
                    }
                }
            };

            var li = document.createElement('ul');
            li.appendChild(allImages);
            newList.appendChild(li);
        }
        my_div.style.display = 'none';

        header.innerHTML = taskName;
        table.appendChild(header);

        function addImage(col) {
            var img = new Image();
            img.src = "http://cdn.sstatic.net/stackoverflow/img/tag-adobe.png";
            col.appendChild(img);
            img.onclick = function () {
                my_div.style.display = 'block';
                sel = img;
                saveData();
            };
        }
        for (r = 0; r < howOften; r++) {
            row = table.insertRow(-1);
            for (c = 0; c < numDays; c++) {
                col = row.insertCell(-1);
                addImage(col);
            }
        }
        document.getElementById('theRealHoldTable').appendChild(table);
        document.getElementById('createChart').onclick = null;
        saveData();/CALLING THE LOCAL STORAGE WHEN TABLE IS CREATED
    }
}

function saveData(){
     localStorage.setItem(name, JSON.stringify(table.innerHTML));
}

function showData(){
    JSON.parse(localStorage.getItem( name ));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:55:05.720

您正在尝试对 html 标记进行字符串化，但这是行不通的！你只能 JSON.stringify 一个 js 对象，这意味着一个类的实例，一个对象文字或一个数组：

```
// this works because it is an instance
var objInstance = new SomeClass();
JSON.stringfy(objInstance);

// this works as it is an object-literal
var objLiteral = { mykey: 'myvalue' };
JSON.stringfy(objLiteral);

// this works as it is an array
var arr = [1, 2, 3]
JSON.stringfy(arr);

// THIS DOES NOT WORK!!!
JSON.stringify('<div>...</div>'); 
```

只需剥离 JSON.stringify 方法的一部分，这应该可以工作，因为 element.innerHTML 已经返回了一个字符串：

```
function saveData(){
  localStorage.setItem(name, table.innerHTML);
}

function showData(){
  localStorage.getItem(name); 
} 
```

# c# - 不支持文化

> ID：14425291
> 
> 赞同：11
> 
> 时间：2013-01-20T14:06:29.510
> 
> 标签：c#, asp.net, cultureinfo

我正在使用 Visual Studio 2012 Ultimate 版本。

我有这个错误，我不知道如何解决它。

不支持文化。参数名称：name en-UK 是无效的文化标识符。

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Globalization.CultureNotFoundException：不支持文化。参数名称：name en-UK 是无效的文化标识符。

请帮我

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-09-23T03:24:25.680

转到调试 -> 选项 -> 调试并勾选“仅启用我的代码”

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-20T14:08:13.100

你应该试试`en-GB`英语（英国）

[文化列表](http://www.csharp-examples.net/culture-names/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-16T16:15:40.260

`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files`在我使用 IIS Express 的情况下，这是由于当前用户运行 IIS Express时无法写入。因此，我为当前用户添加了写入权限以解决错误。

# javascript - 正确缩放图像但适合 div

> ID：14425300
> 
> 赞同：2
> 
> 时间：2013-01-20T14:07:15.453
> 
> 标签：javascript, html, css, image

我正在制作一个图片库。这是图像的 HTML：

```
<div style="width: 84%; height: 100%; float: left; text-align: center;"><img
id="mainimage" style="height: 100%;" 
src="http://www.gymheroapp.com/workouts/img/spinner.gif"/></div>
<!-- Loading spinner is temp image, will be replaced by Javascript later --> 
```

当图像为正方形或宽度不超过高度时，它可以正常工作。但是，当宽度太大时它会中断。图像溢出示例：

![图像溢出](../Images/b259390b0c6ac0f1bcfc6460a4bb9c79.png)

有没有办法检查我的 Javascript 中是否存在溢出？像这样的东西：

```
image.setAttribute('height', '100%')
image.removeAttribute('width')
if (image.isOverflowing()) {
    image.setAttribute('width', '100%')
    image.removeAttribute('height')
} 
```

更好的是，有什么方法可以正确缩放图像但使其适合包含`div`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T14:21:50.517

[jQuery 示例](http://jsfiddle.net/csT8M/1/)

最合适：

```
$('img').on('load',function(){
    var css;
    var ratio=$(this).width() / $(this).height();
    var pratio=$(this).parent().width() / $(this).parent().height();
    if (ratio<pratio) css={width:'auto', height:'100%'};
    else css={width:'100%', height:'auto'};
    $(this).css(css);
}); 
```

编辑以说明图像在缓存中的位置

```
$('img').on('bestfit',function(){
    var css;
    var ratio=$(this).width() / $(this).height();
    var pratio=$(this).parent().width() / $(this).parent().height();
    if (ratio<pratio) css={width:'auto', height:'100%'};
    else css={width:'100%', height:'auto'};
    $(this).css(css);
}).on('load', function(){
    $(this).trigger('bestfit');
}).trigger('bestfit'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T14:30:41.463

这是一个简单的 CSS 解决方案：

```
html, body { height: 100%; }
#gallery { height: 100%; width: 100%; position: relative; }

#gallery img {
  /* CSS Hack will make it width 100% and height 100% */
  position: absolute;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  /* Maintain aspect ratio */
  max-height: 100%;
  max-width: 100%;
} 
```

```
<div id="gallery">
  <img src="http://cl.vvmonnickendam.nl/files/large/87" alt="Awesome blabla gedoe">
</div> 
```

[小提琴示例](http://jsfiddle.net/csT8M/8/)

# iphone - 如何在 cocos2d 中显示 pi 字符

> ID：14425305
> 
> 赞同：0
> 
> 时间：2013-01-20T14:07:45.663
> 
> 标签：iphone, ios, cocos2d-iphone, pi

我想在运行时添加 Pi 符号......基本上想在运行时附加字符串......任何人都知道如何做到这一点？有没有ascii代码可以做到这一点？代码片段会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:02:40.690

```
NSString *stringwithpi = [@"anystring" stringByAppendingString:@"\u03C0"];
NSLog(@"TEST  : %@", stringwithpi); 
```

基本上，使用 unicode "\u03C0" 来附加 PI。具体来说，对于 cocos2d

```
NSString *labelpi = [@"lifeof" stringByAppendingString:@"\u03C0"];
CCLabelTTF *label = [CCLabelTTF labelWithString:labelpi fontName:@"Marker Felt" fontSize:64]; 
```

在 iOS 6.0 模拟器上测试成功。

# algorithm - 用一些操作来无效化一个二维矩阵

> ID：14425309
> 
> 赞同：5
> 
> 时间：2013-01-20T14:08:00.087
> 
> 标签：algorithm, data-structures, matrix, mathematical-optimization

```
Given an N x M matrix having only positive integer values, we have to nullify the matrix 
i.e make all entries 0.
We are given two operations
1) multiply each element of any one column at a time by 2.
2) Subtract 1 from all elements of any one row at a time

Find the minimum number of operations required to nullify the matrix. 
```

我想过做一些与 LCM 相关的事情，但无法找到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:48:29.993

让我们先解决 1 行，我们可以将其扩展到所有行。让我们举一个随机的例子：

```
6 11 5 13 
```

目标是使所有元素为 1。首先，我们将 5（最小​​元素）作为 1。为此，我们需要减去 4（即四次减去 1）。结果数组是：

```
2 7 1 9 
```

现在我们将 1 乘以 2 并将所有行元素减 1：

```
1 6 1 8 
```

接下来，我们将 2 个 1 乘以 2，然后将所有行元素减 1：

```
1 5 1 7 
```

以这种方式继续，我们得到`1 1 1 1`. 现在我们减 1 得到`0 0 0 0`。

接下来，我们到达其他行并像上面一样做同样的事情。我们在上面取消的行都是零，因此在操作其他行时乘以 2 不会更改已经取消的行。

The question of finding the minimum number of operations would also depend on the row sequence we select. I think that would be to select a row whose maximum is minimum (among other rows) first. I need to verify this.

# android - 更新 mapview 上的当前位置，但 locatinListenor 正在服务中

> ID：14425320
> 
> 赞同：0
> 
> 时间：2013-01-20T14:09:29.670
> 
> 标签：android, locationlistener

我有 mapActivity，我在其中注册了我的 MapView 小部件，并且我正在运行在后台检查位置数据的服务。我像这样通过 BroadcastReceiver 在 mapactivity 中启动我的服务

```
 public class MainActivity extends MapActivity {

    private MapView view;

   protected void onCreate(Bundle savedInstanceState) {

        view = (MapView) findViewById(R.id.themap);
    view.setBuiltInZoomControls(true);

    Intent in = new Intent();
    MyReceiver locationRecvr = new MyReceiver();
    locationRecvr.onReceive(getApplicationContext(), in);

  }
 ......................

 } 
```

**myReveiver.java**

```
 public class MyReceiver extends BroadcastReceiver {
  @Override
   public void onReceive(Context context, Intent intent) {
       Toast.makeText(context, "MyReceiver Started..",Toast.LENGTH_SHORT).show();
       Log.v("Debug", "MyReceiver Started..");
       Intent myIntent=new Intent(context, ServiceLocation.class);        
       context.startService(myIntent);
}
 } 
```

和这样的 myservice 和 LocationListener

```
 public class ServiceLocation extends Service implements LocationListener {
       ......
       ..... 
       .... 
  } 
```

我的问题是位置更改时如何更改 mapview 上的位置如何在 onLocationchanged() 方法中获取 mapview 参考，或者如何将纬度和经度发送到 mapActivity。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:20:27.600

从您的服务中，您可以将经纬度发送到 MapActivity。您可以通过将 lap/longs 放入 Intent Extra 来从那里启动 MapActivity。

在你的 MapActivity --

```
 /**
 * Setting Google Map to provided location 
 */

 private void setMaptoProvidedLocation() {
 Intent intent = getIntent();
 LAT = intent.getIntExtra(DisplayActivity.LAT, DisplayActivity.DEF_LAT);
 LNG = intent.getIntExtra(DisplayActivity.LNG, DisplayActivity.DEF_LNG);

 mapView.setBuiltInZoomControls(true);
 mapView.setSatellite(true);
 mapController = mapView.getController();

 mapController.setZoom(ZOOM_LEVEL - ZOOM_LEVEL / 2);
 GeoPoint vehicleLocation = new GeoPoint(LAT, LNG);
 mapController.animateTo(vehicleLocation);
 // You can also add map overlays ...

}

//If MapDisplayActivity is in forground and we want to update the new location

@Override
public void onNewIntent(Intent intent) {
super.onNewIntent(intent);
setIntent(intent);
Log.d("MapActivity","Got new Data again");
setMaptoProvidedLocation(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:40:08.903

我们需要使用 locationManager 和 LocationUpdates 作为

```
locationManager.requestLocationUpdates(provider, 400, 1, this); 
```

我们可以根据需要设置代表距离和时间的参数。稍后我们应该定义一个函数为

```
public void onLocationChanged(Location location)
{
} 
```

更多信息[请点击这里](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:13:33.200

当用户位置在您的位置监听器中更新时发送广播。并更新地图中的位置。在广播意图中，您还可以传递更新的位置。

# mysql - heroku rake db:pull

> ID：14425321
> 
> 赞同：0
> 
> 时间：2013-01-20T14:09:30.477
> 
> 标签：mysql, ruby-on-rails, heroku, taps

我正在尝试将我的 heroku 应用程序数据库从 heroku 服务器拉到我的本地机器上。我已经做了很多这样的事情......

```
$heroku db:pull mysql://root:mypass@localhost/app_data
```

Loaded Taps v0.3.24 警告：数据库“mysql://root:mypass@localhost/app_data”中的数据将被覆盖且无法恢复。

！警告：破坏性行动！此命令将影响应用程序：heroku-app-9999！要继续，请输入“heroku-app-9999”或使用 --confirm heroku-app-9999 重新运行此命令

```
> heroku-app-9999
```

**我明白了。。**

```
!    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 !      <html>
 !        <head>
 !          <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
 !          <style type="text/css">
 !            html, body, iframe { margin: 0; padding: 0; height: 100%; }
 !            iframe { display: block; width: 100%; border: none; }
 !          </style>
 !        <title>Application Error</title></head>
 !        </head>
 !        <body>
 !          <iframe src="//s3.amazonaws.com/heroku_pages/error.html">
 !            <p>Application Error</p>
 !          </iframe>
 !        </body>
 !        </html> 
```

**我从未见过的奇怪反应！剂量是什么意思？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:10:50.817

这是 Heroku 提供的通用错误页面。检查您的日志以查看确切的错误是什么。

# mysql - 获取其中一列值在以下两行中相同的结果

> ID：14425325
> 
> 赞同：0
> 
> 时间：2013-01-20T14:10:00.340
> 
> 标签：mysql, sql

我想从`employeeExam`表中选择失败的员工，其中`status`列等于`0`以下两行。

结果应该是这样的：

```
ID  COURSE_ID  EMPLOYEE_ID  DEGREE  DATE                             STATUS  NUMOFTAKINGEXAMS
4   2          4            17      January, 15 2013 00:00:00+0000   0       2 
```

**这是我所做的：**
**[SQL Fiddle](http://sqlfiddle.com/#!2/b8567/6)**

为了进一步澄清：当按 排序时`id`，结果应该只包含考试的数据，这些数据直接在彼此下具有相同的`course_id`and`employee_id`和= 0。`status`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:55:01.330

```
 SELECT a.*
   FROM
      ( SELECT x.*
             , COUNT(*) rank
          FROM employeeExam x 
          JOIN employeeExam y 
            ON y.course_id = x.course_id 
           AND y.employee_id = x.employee_id 
           AND y.date <= x.date 
         GROUP 
           BY id 
      ) a
   JOIN
      ( SELECT x.*
             , COUNT(*) rank
          FROM employeeExam x 
          JOIN employeeExam y 
            ON y.course_id = x.course_id 
           AND y.employee_id = x.employee_id 
           AND y.date <= x.date
         GROUP 
           BY id 
      ) b
     ON b.course_id = a.course_id
    AND b.employee_id = a.employee_id
    AND b.status = a.status
    AND b.rank = a.rank - 1
  WHERE a.status = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:38:33.507

请尝试一下并发表评论：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/b8567/37)

```
set @sum:=0;
set @id:=0;     

select distinct x.empid, x.degree, x.date, x.status
from (
select @sum:= (case when status=0
               and @id = employee_id then @sum+1
               else 1 end)
as sm,  @id:=employee_id as empid, degree, date, status
from employeeexam
order by employee_id)x
where x.sm >= 2
;

| EMPID | DEGREE |                           DATE | STATUS |
------------------------------------------------------------
|     2 |      5 | January, 16 2013 00:00:00+0000 |      0 |
|     3 |      6 | January, 16 2013 00:00:00+0000 |      0 |
|     4 |     15 | January, 14 2013 00:00:00+0000 |      0 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:39:09.933

只是 SQL 代码的一部分，以显示原理，尽管我怀疑它是否完全扩展了您的要求。例如，此代码不检查连续失败的尝试，一般只检查所有尝试。它不显示申请人已经通过考试的任何行。

例如：如果一个人参加考试并获得状态 0、0、1、0、0；它不会出现，因为申请人至少通过了一项考试。

```
SELECT course_id, employee_id, MAX(degree), status, COUNT(id) NumExamsTaken
FROM employeeExam
GROUP BY course_id, employee_id
HAVING COUNT(id) >= 2 AND SUM(status) = 0; 
```

[SQL小提琴](http://sqlfiddle.com/#!2/b8567/30/0)

# iphone - 如何自动删除超过 3 个月的文件

> ID：14425327
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:10:37.837
> 
> 标签：iphone

如何自动删除超过 3 个月的文件。我从 UIWebview 中的 web 服务读取 pdf 文件并将所有文件存储在缓存目录中，然后我再次查看它的下载 pdf 文件，它可以我将文件存储在缓存目录中，但我想删除特定文件在给定时间内自动删除。怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:49:01.307

首先确保在创建新文件时为文件设置了日期属性。

然后你创建一个方法来查看目录中的所有文件并将它们的日期与现在进行比较并删除那些太旧的文件。当应用程序启动或返回前台时调用此方法。

# java - 如何通过maven类编译排除Annotation

> ID：14425328
> 
> 赞同：1
> 
> 时间：2013-01-20T14:10:41.923
> 
> 标签：java, maven, annotations

我有 maven 模块，其中定义了带有 EntityListeners 的 JPA 实体，这些实体将用于其他 GUI 项目，这些实体将使用 RMI 或 EJB 传输，但我不想向 GUI 项目提供有关此实体和 EventityListeners 的注释的任何信息，并包括从属 JPA 到 GUI 项目。

是否可以在没有注释的情况下编译第一个模块并将依赖清除 jar 添加到 GUI？从 GUI 部分的服务器（注释）模块传输后，它会是正确的恢复实体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:07:01.457

当保留策略不是 RUN TIME 时，注释不会存储在类中。因此，如果您可以使用替代 jar 来重新定义这些注释，那将是可能的。

一种更可行的解决方案是**将用于编译的目标 Java 版本设置为运行时注释之前的版本**（< Java 1.5）。

# css - css，分别悬停每个区域

> ID：14425331
> 
> 赞同：0
> 
> 时间：2013-01-20T14:11:23.320
> 
> 标签：css, html, hover, drawing

嗨，我试着画这样的东西：

[照片](http://i.stack.imgur.com/yXRVe.jpg)

使用 div 和 css，我需要分别悬停每个区域。到目前为止，我已经做了类似的事情，但它不能很好地工作，因为它会激活块并且只有两个块；/ css：

```
 <style type="text/css">

    .arrow-up {

      position : absolute;
      top : 150px;
      width: 150px; 
        height: 0; 
        border-left: 60px solid transparent;
        border-right: 60px solid transparent;
        border-bottom: 60px solid black;
    }
  .arrow-up:hover{
    border-bottom: 60px solid red;
}

    .arrow-down {
       position : absolute;
      top : 90px;  
      width: 150px; 
        height: 0; 
        border-left: 60px solid transparent;
        border-right: 60px solid transparent;

        border-top: 60px solid blueviolet;
    }
    .arrow-down:hover{
    border-top: 60px solid red;
    }
    .arrow-right {
        position : absolute;
       top : 90px;
      width: 0; 
        height: 0; 
        border-top: 60px solid transparent;
        border-bottom: 60px solid transparent;

        border-left: 60px solid green;
    }
    .arrow-right:hover{
    border-left: 60px solid red;
    }

    .arrow-left {
        position : absolute;
       top : 90px;
      left : 217px;
      width: 0; 
        height: 0; 
        border-top: 60px solid transparent;
        border-bottom: 60px solid transparent; 
        border-right:60px solid blue; 
    }

    .arrow-left:hover{
    border-right: 60px solid red;
    }
</style>

<html>
    <body>
       <div class="arrow-down"></div>
      <div class="arrow-up"></div>

    <div class="arrow-left"></div>
    <div class="arrow-right"></div>

    </body>
</html> 
```

任何想法 ？可能吗 ？

[演示](http://jsbin.com/enisic/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:16:27.267

是的，看起来很不错。删除 div:hover 选择器并使用您的类来选择元素悬停。所以：

```
.arrow-up:hover{
    border-bottom: 60px solid red;
} 
```

现在将“边框”的颜色更改为红色。希望这能解决问题

你的定位：CSS：

```
.arrowBox{
    display:inline-block;
    width:24%;
    //for ie 5.5 to 7 
    float:left;
} 
```

HTML：

```
<div class="arrowBox">
<!-- arrows go in here -->

</div> 
```

# php - PHP, Html 选定的问题

> ID：14425334
> 
> 赞同：0
> 
> 时间：2013-01-20T14:12:27.687
> 
> 标签：php, html

以下是我的 PHP 代码，所有国家/地区都来自 mysql 数据库。这是一个用户个人资料区域，用户可以在其中更新他们的国家名称。但是在他提交他的国家名称后它没有**被选中（html selected = selected）。**可能是我的**$sel**变量问题。有人可以修复它吗？

```
<select name="country" class="country"> 
<?php
$sql=mysql_query("select * from country");
while($row=mysql_fetch_array($sql))
{
$id=$row['Code'];
$data=$row['Name'];

    if($data == $country2)
    {
        $sel = 'selected = "selected"';
    }
    else
    {
        $sel = "";
    }

echo '<option value="'.$id.'" $sel>'.$data.'</option>';
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:15:53.090

变量不在单引号内解析。您对语句中的其他变量使用连接，但不是 $sel...

```
echo '<option value="'.$id.'"' . $sel . '>'.$data.'</option>'; 
```

或切换到双引号..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:16:58.990

请试试这个： -

```
<select name="country" class="country"> 
<?php
$sql=mysql_query("select * from country");
while($row=mysql_fetch_array($sql))
{
$id=$row['Code'];
$data=$row['Name'];

    if($data == $country2)
    {
        $sel = 'selected = "selected"';
    }
    else
    {
        $sel = "";
    }

echo '<option value="'.$id.'"' . $sel . '>'.$data.'</option>';
}
?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:16:27.330

在 PHP 中，单引号中的字符串不会解析其内容中的变量。`$sel`因此将像那样打印。`$sel`单独使用( `'<option value="'.$id.'" '.$sel.'>'`) 或使用双引号 ( `"<option value=\"$id\" $sel>"`)。

# ruby-on-rails - Rails 3.2 压缩多个文本文件

> ID：14425339
> 
> 赞同：0
> 
> 时间：2013-01-20T14:13:16.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要从查询结果中编写大约 10 个文本文件，然后压缩并发送它们。

有没有办法在内存中完成这一切，还是我需要先将文件写入 /tmp 或数据库？Rails 3.2.11 应用程序的最佳实践是什么？

除了创建文件、压缩和发送它们之外，我不需要任何功能。文件不大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:59:55.823

您将需要创建一些临时文件。但是，您选择将它们放在哪里取决于您。

[这是一篇博客文章](http://blog.devinterface.com/2010/02/create-zip-files-on-the-fly/)（不是我的，也没有经过测试，但我看不出所描述的过程不应该起作用的原因），它描述了使用 Rails 压缩一些文件并将生成的存档发送给用户。根据您的需要调整它应该不会太难。

# bash - bash 中的 [ test ] 和 [[ test ]] 有什么区别？

> ID：14425340
> 
> 赞同：1
> 
> 时间：2013-01-20T14:13:31.190
> 
> 标签：bash, testing, conditional-statements

bash 中的 [ test ] 和 [[ test ]] 有什么区别？什么时候一个比另一个更合适，`;`最后的作用是什么？

```
if  [[ -z $DIRECTORY ]];
then
     DIRECTORY=html
fi

if [ ! -d "$DIRECTORY" ]; then
    echo installation directory "'${DIRECTORY}'" does not exist
    exit 1
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:15:27.643

`[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。请参阅[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)除非您正在编写 POSIX sh，否则我们建议使用`[[`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:45:45.737

我们通常在以下情况下使用单方括号：

*   检查文件内容并希望使用模式（例如星号）：`if [ -L $file ]; then`
*   检查算术表达式：`if [ $a -lt $b ]; then`
*   检查带有字符串的内容，并希望`" "`像正常一样使用和处理特殊字符（例如星号）：`if [ -z "$string" ]; then`

当我们：

*   想要使用带字符串的模式（例如星号）：`if [[ "$string1" == *[sS]tring* ]]; then`
*   文件名中的块模式（例如星号）例如我们搜索名为 *.sh 的文件：`if [[ -a *.sh ]]; then`
*   想要使用运算符 && 和 ||：`if [[ $a == 3 || $b == 4]]; then`
*   不想插入字符串`" "`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:51:07.647

`[`用于外壳，`[[`用于 bash。

例如：
Try `[ $A -eq 1 ]`: 如果`$A`未设置，则会引发错误。
`[[ $A -eq 1 ]]`将起作用。

# javascript - IFrame 在 Firefox 中工作，但在 IE 中不工作

> ID：14425342
> 
> 赞同：1
> 
> 时间：2013-01-20T14:13:38.127
> 
> 标签：javascript, iframe

我正在尝试在弹出模式窗口中使用 IFrame 创建一个外观为 AJAX 的文件上传器。脚本在目标页面上运行并上传文件后，我会使用以下代码返回到我的模式窗口的响应：

```
function stopUpload(success) {
        var result = '';
        if (success == 0) {
            document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">There was an error during file upload!<\/div><br/>';
        } else if (success == 2) {
            document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">ERROR! Please upload a document with the following file types....<br/><br/>txt, doc, xls, rtf, ppt, pdf, jpg, jpeg, gif, png, xlsx, docx, png, pps, ppsx, ppt<\/div><br/>';
        } else {
            var dom_string = success;
            var dom_target = window.top.document.getElementById('table_body');
            dom_target.innerHTML = dom_string;
            document.getElementById('result').innerHTML = '<div class="msg-status" style="width:492px;">The file was uploaded successfully!<\/div><br/>';
        }
        document.getElementById('f1_upload_process').style.visibility = 'hidden';
        return true;
    } 
```

上面的代码应该在我的模态窗口中给出一条成功消息，然后更新模态窗口后面父页面上的文件列表，以便该人可以处理另一个上传。在 FF 18 中一切正常，但 IE 9 在开发人员工具栏上抛出以下错误：

SCRIPT600：此操作的目标元素无效。

```
dom_target.innerHTML = dom_string; 
```

我对此感到困惑，因为 table_body 是目标的 ID，而且它在 Firefox 中效果很好。有任何想法吗？我正在拔头发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:18:05.193

来自 MSDN：

> innerHTML 属性在 col、colGroup、frameSet、html、head、style、table、tBody、tFoot、tHead、title 和 tr 对象上是只读的。

您可以使用 DOM API 来实现，也可以替换整个 API `<table>`。

# ruby - 无法使用 ruby gem 胡萝卜连接到 rabbit mq

> ID：14425344
> 
> 赞同：0
> 
> 时间：2013-01-20T14:13:46.590
> 
> 标签：ruby, rabbitmq, carrot

我正在尝试连接到我的 rabbitmq 服务器。我在用

```
require 'carrot'
@client = Carrot.new(:host => 10.xx.xx.xx, :port => 5672)
q = @client.queue("my_queue") 
```

我收到此错误

```
"#<Carrot::AMQP::Server::ServerDown: Connection reset by peer>" 
```

如何检查我的服务器是否已关闭？以及如何重新启动它？

```
rabbitmq-server 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:16:37.310

您能帮我们提供一些额外的信息吗？

*   什么版本的红宝石？
*   什么版本的 RabbitMQ？
*   你的 RabbitMQ 代理在哪里运行？
*   您是否有任何类型的防火墙阻止您连接到 RabbitMQ 代理端口？
*   你知道是否启用了任何安全性吗？

如果您有权访问运行代理的服务器的命令行，则执行 ps -ef | 应该能够看到 Erlang 进程。grep 兔子MQ

要启动代理，请运行

```
rabbitmq-server 
```

我可以使用最新的 Ruby 和 Carrot gem 在我的本地机器上运行 RabbitMQ 3.0.1 运行您的代码，唯一的更正是主机 IP 地址需要用双引号括起来。

# c# - 如何有效地对 .net 代码进行单元测试和静态代码分析？

> ID：14425346
> 
> 赞同：0
> 
> 时间：2013-01-20T14:14:09.733
> 
> 标签：c#, unit-testing, code-analysis

任何人都可以建议如何对 .net 代码进行有效的单元测试和静态代码分析。

有什么经验法则可以遵循吗？引入 selenium 等工具是否相关？

有一些东西，比如硬编码、未捕获的异常等，我希望可以在单元测试阶段发现它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:18:57.307

Nunit 是用于单元测试 .net 应用程序的最佳自动化测试工具。最好的部分是您在 nunit 上编写 .net 代码来测试 .net 代码。有关如何使用它的更多信息，请访问 nunit.org。

此外，如果您担心 .net 的最佳代码实践，那么有一个叫做 FxCop 的东西可以检查您的代码。所以检查一下。它是可用于 Visual Studio 的最佳代码审查工具之一。

# ios - 如何在 iOS 上使用 PhoneGap 检测是否拨打电话

> ID：14425348
> 
> 赞同：2
> 
> 时间：2013-01-20T14:14:37.713
> 
> 标签：ios, cordova, call

在 iOS 上使用 telprompt 意图时

```
window.location = 'telprompt://' + phoneNumber 
```

系统会提示用户拨打该号码或取消。有没有办法知道用户做了两个动作中的哪一个？

查看 PhoneGap 文档，“startcallbutton”事件仅在 BlackBerry 上受支持。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T03:54:31.390

你所能做的就是监听暂停事件。

```
document.addEventListener("pause", yourCallbackFunction, false); 
```

当有来电或开始通话时将触发此事件。

或者您可以查看电话监听器插件并尝试为 iOS 编写它 [https://github.com/devgeeks/PhoneListener](https://github.com/devgeeks/PhoneListener)

# php - 在 Codeigniter - PHP Point of Sale 11.3 中自动填充按上一个值递增的字段

> ID：14425350
> 
> 赞同：0
> 
> 时间：2013-01-20T14:14:55.933
> 
> 标签：php, codeigniter, point-of-sale

我正在 PHP Point of Sale 11.3 中进行一些修改。目前称为使用 Codeigniter 构建的开源销售点。在向库存中添加新项目时，有一个文本字段，我希望自动填充该字段，其值比前一个项目的值增加 1。

视图代码：

```
 <?php
echo form_open('items/save/'.$item_info->item_id,array('id'=>'item_form'));
?>
<fieldset id="item_basic_info">
<legend><?php echo $this->lang->line("items_basic_information"); ?></legend>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_item_number').':', 'name',array('class'=>'wide')); ?>
    <div class='form_field'>       
    <?php echo form_input(array(
        'name'=>'item_number',
        'id'=>'item_number',
        'value'=>$item_info->item_number)
    );

    ?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_name').':', 'name',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'name',
        'id'=>'name',
        'value'=>$item_info->name)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_category').':', 'category',array('class'=>'required wide')); ?>
    <div class='form_field'>

    <?php echo form_input(array(
        'name'=>'category',
        'id'=>'category',
        'value'=>$item_info->category)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_supplier').':', 'supplier',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_dropdown('supplier_id', $suppliers, $selected_supplier);?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_cost_price').':', 'cost_price',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'cost_price',
        'size'=>'8',
        'id'=>'cost_price',
        'value'=>$item_info->cost_price)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_unit_price').':', 'unit_price',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'unit_price',
        'size'=>'8',
        'id'=>'unit_price',
        'value'=>$item_info->unit_price)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_tax_1').':', 'tax_percent_1',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'tax_names[]',
        'id'=>'tax_name_1',
        'size'=>'8',
//      'value'=> isset($item_tax_info[0]['name']) ? $item_tax_info[0]['name'] : $this->config->item('default_tax_1_name'))

        'value'=> isset($item_tax_info[0]['name']) ? $item_tax_info[0]['name'] : $this->config->item('default_tax_1_name'))

    );

    ?>
    </div>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'tax_percents[]',
        'id'=>'tax_percent_name_1',
        'size'=>'3',
        'value'=> isset($item_tax_info[0]['percent']) ? $item_tax_info[0]['percent'] : $default_tax_1_rate)
    );?>
    %
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_tax_2').':', 'tax_percent_2',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'tax_names[]',
        'id'=>'tax_name_2',
        'size'=>'8',
        'value'=> isset($item_tax_info[1]['name']) ? $item_tax_info[1]['name'] : $this->config->item('default_tax_2_name'))
    );?>
    </div>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'tax_percents[]',
        'id'=>'tax_percent_name_2',
        'size'=>'3',
        'value'=> isset($item_tax_info[1]['percent']) ? $item_tax_info[1]['percent'] : $default_tax_2_rate)
    );?>
    %
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_quantity').':', 'quantity',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'quantity',
        'id'=>'quantity',
        'value'=>$item_info->quantity)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_reorder_level').':', 'reorder_level',array('class'=>'required wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'reorder_level',
        'id'=>'reorder_level',
        'value'=>$item_info->reorder_level)
    );?>
    </div>
</div>

<div class="field_row clearfix">    
<?php echo form_label($this->lang->line('items_location').':', 'location',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_input(array(
        'name'=>'location',
        'id'=>'location',
        'value'=>$item_info->location)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_description').':', 'description',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_textarea(array(
        'name'=>'description',
        'id'=>'description',
        'value'=>$item_info->description,
        'rows'=>'5',
        'cols'=>'17')
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_allow_alt_desciption').':', 'allow_alt_description',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_checkbox(array(
        'name'=>'allow_alt_description',
        'id'=>'allow_alt_description',
        'value'=>1,
        'checked'=>($item_info->allow_alt_description)? 1  :0)
    );?>
    </div>
</div>

<div class="field_row clearfix">
<?php echo form_label($this->lang->line('items_is_serialized').':', 'is_serialized',array('class'=>'wide')); ?>
    <div class='form_field'>
    <?php echo form_checkbox(array(
        'name'=>'is_serialized',
        'id'=>'is_serialized',
        'value'=>1,
        'checked'=>($item_info->is_serialized)? 1 : 0)
    );?>
    </div>
</div>

<?php
echo form_submit(array(
    'name'=>'submit',
    'id'=>'submit',
    'value'=>$this->lang->line('common_submit'),
    'class'=>'submit_button float_right')
);
?>
</fieldset>
<?php
echo form_close();
?>
<script type='text/javascript'>

//validation and submit handling
$(document).ready(function()
{
    $("#category").autocomplete("<?php echo site_url('items/suggest_category');?>",{max:100,minChars:0,delay:10});
    $("#category").result(function(event, data, formatted){});
    $("#category").search();

    $('#item_form').validate({
        submitHandler:function(form)
        {
            /*
            make sure the hidden field #item_number gets set
            to the visible scan_item_number value
            */
            $('#item_number').val($('#scan_item_number').val());
            $(form).ajaxSubmit({
            success:function(response)
            {
                tb_remove();
                post_item_form_submit(response);
            },
            dataType:'json'
        });

        },
        errorLabelContainer: "#error_message_box",
        wrapper: "li",
        rules:
        {
            name:"required",
            category:"required",
            cost_price:
            {
                required:true,
                number:true
            },

            unit_price:
            {
                required:true,
                number:true
            },
            tax_percent:
            {
                required:true,
                number:true
            },
            quantity:
            {
                required:true,
                number:true
            },
            reorder_level:
            {
                required:true,
                number:true
            }
        },
        messages:
        {
            name:"<?php echo $this->lang->line('items_name_required'); ?>",
            category:"<?php echo $this->lang->line('items_category_required'); ?>",
            cost_price:
            {
                required:"<?php echo $this->lang->line('items_cost_price_required'); ?>",
                number:"<?php echo $this->lang->line('items_cost_price_number'); ?>"
            },
            unit_price:
            {
                required:"<?php echo $this->lang->line('items_unit_price_required'); ?>",
                number:"<?php echo $this->lang->line('items_unit_price_number'); ?>"
            },
            tax_percent:
            {
                required:"<?php echo $this->lang->line('items_tax_percent_required'); ?>",
                number:"<?php echo $this->lang->line('items_tax_percent_number'); ?>"
            },
            quantity:
            {
                required:"<?php echo $this->lang->line('items_quantity_required'); ?>",
                number:"<?php echo $this->lang->line('items_quantity_number'); ?>"
            },
            reorder_level:
            {
                required:"<?php echo $this->lang->line('items_reorder_level_required'); ?>",
                number:"<?php echo $this->lang->line('items_reorder_level_number'); ?>"
            }

        }
    });
});
</script> 
```

控制器：

```
function view($item_id=-1)
    {
        $data['item_info']=$this->Item->get_info($item_id);

        $data['item_tax_info']=$this->Item_taxes->get_info($item_id);
        $suppliers = array('' => $this->lang->line('items_none'));
        foreach($this->Supplier->get_all()->result_array() as $row)
        {
            $suppliers[$row['person_id']] = $row['company_name'] .' ('.$row['first_name'] .' '. $row['last_name'].')';
        }

        $data['suppliers']=$suppliers;
        $data['selected_supplier'] = $this->Item->get_info($item_id)->supplier_id;
        $data['default_tax_1_rate']=($item_id==-1) ? $this->Appconfig->get('default_tax_1_rate') : '';
        $data['default_tax_2_rate']=($item_id==-1) ? $this->Appconfig->get('default_tax_2_rate') : '';
        $this->load->view("items/form",$data);
    } 
```

模型：

```
<?php
class Item extends Model
{
    /*
    Determines if a given item_id is an item
    */
    function exists($item_id)
    {
        $this->db->from('items');
        $this->db->where('item_id',$item_id);
        $query = $this->db->get();

        return ($query->num_rows()==1);
    }

    /*
    Returns all the items
    */
    function get_all($limit=10000, $offset=0)
    {
        $this->db->from('items');
        $this->db->where('deleted',0);
        $this->db->order_by("name", "asc");
        $this->db->limit($limit);
        $this->db->offset($offset);
        return $this->db->get();
    }

    function count_all()
    {
        $this->db->from('items');
        $this->db->where('deleted',0);
        return $this->db->count_all_results();
    }

    function get_all_filtered($low_inventory=0,$is_serialized=0,$no_description)
    {
        $this->db->from('items');
        if ($low_inventory !=0 )
        {
            $this->db->where('quantity <=','reorder_level');
        }
        if ($is_serialized !=0 )
        {
            $this->db->where('is_serialized',1);
        }
        if ($no_description!=0 )
        {
            $this->db->where('description','');
        }
        $this->db->where('deleted',0);
        $this->db->order_by("name", "asc");
        return $this->db->get();
    }

    /*
    Gets information about a particular item
    */
    function get_info($item_id)
    {
        $this->db->from('items');
        $this->db->where('item_id',$item_id);

        $query = $this->db->get();

        if($query->num_rows()==1)
        {
            return $query->row();
        }
        else
        {
            //Get empty base parent object, as $item_id is NOT an item
            $item_obj=new stdClass();

            //Get all the fields from items table
            $fields = $this->db->list_fields('items');

            foreach ($fields as $field)
            {
                $item_obj->$field='';
            }

            return $item_obj;
        }
    }

    /*
    Get an item id given an item number
    */
    function get_item_id($item_number)
    {
        $this->db->from('items');
        $this->db->where('item_number',$item_number);

        $query = $this->db->get();

        if($query->num_rows()==1)
        {
            return $query->row()->item_id;
        }

        return false;
    }

    /*
    Gets information about multiple items
    */
    function get_multiple_info($item_ids)
    {
        $this->db->from('items');
        $this->db->where_in('item_id',$item_ids);
        $this->db->order_by("item", "asc");
        return $this->db->get();
    }

    /*
    Inserts or updates a item
    */
    function save(&$item_data,$item_id=false)
    {
        if (!$item_id or !$this->exists($item_id))
        {
            if($this->db->insert('items',$item_data))
            {
                $item_data['item_id']=$this->db->insert_id();
                return true;
            }
            return false;
        }

        $this->db->where('item_id', $item_id);
        return $this->db->update('items',$item_data);
    }

    /*
    Updates multiple items at once
    */
    function update_multiple($item_data,$item_ids)
    {
        $this->db->where_in('item_id',$item_ids);
        return $this->db->update('items',$item_data);
    }

    /*
    Deletes one item
    */
    function delete($item_id)
    {
        $this->db->where('item_id', $item_id);
        return $this->db->update('items', array('deleted' => 1));
    }

    /*
    Deletes a list of items
    */
    function delete_list($item_ids)
    {
        $this->db->where_in('item_id',$item_ids);
        return $this->db->update('items', array('deleted' => 1));
    }

    /*
    Get search suggestions to find items
    */
    function get_search_suggestions($search,$limit=25)
    {
        $suggestions = array();

        $this->db->from('items');
        $this->db->like('name', $search);
        $this->db->where('deleted',0);
        $this->db->order_by("name", "asc");
        $by_name = $this->db->get();
        foreach($by_name->result() as $row)
        {
            $suggestions[]=$row->name;
        }

        $this->db->select('category');
        $this->db->from('items');
        $this->db->where('deleted',0);
        $this->db->distinct();
        $this->db->like('category', $search);
        $this->db->order_by("category", "asc");
        $by_category = $this->db->get();
        foreach($by_category->result() as $row)
        {
            $suggestions[]=$row->category;
        }

        $this->db->from('items');
        $this->db->like('item_number', $search);
        $this->db->where('deleted',0);
        $this->db->order_by("item_number", "asc");
        $by_item_number = $this->db->get();
        foreach($by_item_number->result() as $row)
        {
            $suggestions[]=$row->item_number;
        }

        //only return $limit suggestions
        if(count($suggestions > $limit))
        {
            $suggestions = array_slice($suggestions, 0,$limit);
        }
        return $suggestions;

    }

    function get_item_search_suggestions($search,$limit=25)
    {
        $suggestions = array();

        $this->db->from('items');
        $this->db->where('deleted',0);
        $this->db->like('name', $search);
        $this->db->order_by("name", "asc");
        $by_name = $this->db->get();
        foreach($by_name->result() as $row)
        {
            $suggestions[]=$row->item_id.'|'.$row->name;
        }

        $this->db->from('items');
        $this->db->where('deleted',0);
        $this->db->like('item_number', $search);
        $this->db->order_by("item_number", "asc");
        $by_item_number = $this->db->get();
        foreach($by_item_number->result() as $row)
        {
            $suggestions[]=$row->item_id.'|'.$row->item_number;
        }

        //only return $limit suggestions
        if(count($suggestions > $limit))
        {
            $suggestions = array_slice($suggestions, 0,$limit);
        }
        return $suggestions;

    }

    function get_category_suggestions($search)
    {
        $suggestions = array();
        $this->db->distinct();
        $this->db->select('category');
        $this->db->from('items');
        $this->db->like('category', $search);
        $this->db->where('deleted', 0);
        $this->db->order_by("category", "asc");
        $by_category = $this->db->get();
        foreach($by_category->result() as $row)
        {
            $suggestions[]=$row->category;
        }

        return $suggestions;
    }

    /*
    Preform a search on items
    */
    function search($search)
    {
        $this->db->from('items');
        $this->db->where("(name LIKE '%".$this->db->escape_like_str($search)."%' or 
        item_number LIKE '%".$this->db->escape_like_str($search)."%' or 
        category LIKE '%".$this->db->escape_like_str($search)."%') and deleted=0");
        $this->db->order_by("name", "asc");
        return $this->db->get();    
    }

    function get_categories()
    {
        $this->db->select('category');
        $this->db->from('items');
        $this->db->where('deleted',0);
        $this->db->distinct();
        $this->db->order_by("category", "asc");

        return $this->db->get();
    }
}
?> 
```

视图中的 item_number 字段需要自动填充加一。假设编号系列从 10001 开始。添加新项目时，该字段应预填 10002。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T06:31:16.593

您可以使用

```
str_pad((int) $number,$n,"0",STR_PAD_LEFT); 
```

阅读更多：[str-pad](http://php.net/manual/en/function.str-pad.php)

# javascript - JavaScript智能感知不适用于简单功能？

> ID：14425351
> 
> 赞同：0
> 
> 时间：2013-01-20T14:14:56.723
> 
> 标签：javascript, visual-studio-2012

在 VS 2012 中，jquery 的智能感知工作但不是我的自定义函数，这是一个简单的例子，

```
window.g = {};

//#region Public functions

/// <signature>
///   <summary>This function will return the current page mode.</summary>
///   <returns type="bool" />
/// </signature>
g.isPageInEditMode = function () {
    return true;
} 
```

此功能确实向我展示了摘要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:03:24.520

将这些特殊注释放在一个名为 XXX.intellisense.js 的单独文件中解决了这个问题，

```
intellisense.annotate(g, {
    'isPageInEditMode': function () {
        /// <signature>
        ///   <summary>This function will return the current page mode.</summary>
        ///   <returns type="Boolean" />
        /// </signature>
    }
}); 
```

# php - 使用 Yii 用户和 Opauth

> ID：14425352
> 
> 赞同：1
> 
> 时间：2013-01-20T14:14:59.877
> 
> 标签：php, oauth, yii, yii-extensions

我一直试图让 Opauth 以一种理智的方式将参数传递给 Yii-User。这是我正在使用的扩展 git repos：

[Opauth（通过 Yii 框架模块）](https://github.com/kahwee/yii-opauth)与来自官方 Opauth 存储库
[Yii-User 模块存储库的更新库](https://github.com/mishamx/yii-user)

在修改 Opauth 的回调控制器后，我从 Opauth 获得了正确的数组，直接在页面上显示了我的 Google 帐户信息。

这是回调控制器中的代码：

```
 class CallbackController extends Controller {

        public $defaultAction = 'callback';

            public function actionCallBack() {
                if ( $this->module->getConfig() ) {

                    /**
                     * Instantiate Opauth with the loaded config but no run automatically
                     * Only create Opauth if one is not already there
                     */
                    if (!$this->module->getOpauth()) {
                        $this->module->setOpauth (new Opauth($this->module->getConfig(), false));
                        $Opauth = $this->module->getOpauth();
                    } else {
                        $Opauth = $this->module->getOpauth();
                    }

                    /**
                     * Fetch auth response, based on transport configuration for callback
                     */
                    $response = null;

                    switch($Opauth->env['callback_transport']) {
                        case 'session':
                            session_start();
                            $response = $_SESSION['opauth'];
                            unset($_SESSION['opauth']);
                            break;
                        case 'post':
                            $response = unserialize(base64_decode( $_POST['opauth'] ));
                            break;
                        case 'get':
                            $response = unserialize(base64_decode( $_GET['opauth'] ));
                            break;
                        default:
                            echo 'Error: Unsupported callback_transport.'."
\n";
                            break;
                    }

                    /**
                     * Check if it's an error callback
                     */
                    if (array_key_exists('error', $response)) {
                        echo 'Authentication error:  Opauth returns error auth response.'."
\n";
                    }

                    /**
                     * Auth response validation
                     *
                     * To validate that the auth response received is unaltered, especially auth response that
                     * is sent through GET or POST.
                     */
                    else{
                        if (empty($response['auth']) || empty($response['timestamp']) || empty($response['signature']) || empty($response['auth']['provider']) || empty($response['auth']['uid'])) {
                            echo 'Invalid auth response: Missing key auth response components.'."
\n";
                        } elseif (!$Opauth->validate(sha1(print_r($response['auth'], true)), $response['timestamp'], $response['signature'], $reason)) {
                            echo 'Invalid auth response: '.$reason.".
\n";
                        } else {
                            echo 'OK: Auth response is validated.'."
\n";

                            /**
                             * It's all good. Go ahead with your application-specific authentication logic
                             */
                            $Opauth->response = $response;
                            Yii::app()->getModule('opauth')->setOpauth($Opauth);
                            $this->redirect(Yii::app()->getModule('user')->returnUrl);
                        }
                    }
                } else {
                    echo '**No configuration loaded!**';
                }
            }

        } 
```

我已经尝试直接保存对模块的响应（显示在控制器的末尾），但这不起作用——我认为模块类在每次运行时都会创建。我不确定如何将响应直接移动到 yii-user 模块中。

编辑：我在回调控制器中尝试这样的事情：

```
 ```
$identity = new UserIdentity($response);
if ($identity->authenticate()) {
     Yii::app()->user->login($identity);
     $this->redirect('/');
} else {
     $this->redirect(Yii::app()->getModule('user')->returnUrl);
} 
``` 对于 $identity->authenticate()，我有这个：

```
 public function authenticate()
        {
            if (strpos($this->username,"@")) {
                $user=User::model()->notsafe()->findByAttributes(array('email'=>$this->username));
            } else {
                $user=User::model()->notsafe()->findByAttributes(array('username'=>$this->username));
            }
            if($user===null)
                if (strpos($this->username,"@")) {
                    $this->errorCode=self::ERROR_EMAIL_INVALID;
                } else {
                    $this->errorCode=self::ERROR_USERNAME_INVALID;
                }
            //else if(Yii::app()->getModule('user')->encrypting($this->password)!==$user->password)
            //  $this->errorCode=self::ERROR_PASSWORD_INVALID;
            else if($user->status==0&&Yii::app()->getModule('user')->loginNotActiv==false)
                $this->errorCode=self::ERROR_STATUS_NOTACTIV;
            else if($user->status==-1)
                $this->errorCode=self::ERROR_STATUS_BAN;
            else {
                $this->_id=$user->id;
                $this->username=$user->username;
                $this->errorCode=self::ERROR_NONE;
            }
            return !$this->errorCode;
        } 
```

            回答 #1

赞同：1

时间：2013-01-22T00:37:13.093

这是我为使这部分工作所做的工作：

```
$identity = new UserIdentity($response);
$identity->authenticate();

switch($identity->errorCode) {
    case $identity::ERROR_NONE:
        Yii::app()->user->login($identity);
        $this->redirect(array("page_after_login"));
        break;
     case $identity::ERROR_USERNAME_INVALID:
        $this->redirect(Yii::app()->user->registrationUrl);
        break;
     default:
        throw new CException ($identity->errorCode);
} 
```

```

# android - Android 的网格

> ID：14425354
> 
> 赞同：0
> 
> 时间：2013-01-20T14:15:09.600
> 
> 标签：android, layout, background, grid, border

我不知道如何为 android 创建一个网格，我可以在每个框上添加边框和背景。

最好的方法是什么？

目前我有一个RelativeLayout，我在其中放置了一些Button，但很难轻松修改它们。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:18:15.283

这完全取决于您需要什么，但是您检查过 GridView 吗？[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:18:52.327

看看这些链接。

它可能会帮助你。

**[链接1](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)**

**[链接2](http://www.mkyong.com/android/android-gridview-example/)**

用于在`GridLayout`.

`layout`在 res/drawable 中创建一个xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<stroke android:width="1dp" android:color="#000000" />
<padding android:left="1dp" android:top="1dp" android:right="1dp" android:bottom="1dp" /></shape> 
```

将背景添加到 imageview：

```
android:background="@drawable/xmlFileName" 
```

通过编程：

```
imageview.setBackgroundResource(R.drawable.xmlFileName); 
```

# youtube - 通过 API 获取 LIKED youtube 视频

> ID：14425356
> 
> 赞同：8
> 
> 时间：2013-01-20T14:15:36.150
> 
> 标签：youtube, youtube-api

我知道如何使用 YouTube API 获取“喜欢”视频的数量，但我想获取这些视频的列表。

阅读文档后，我认为可以通过获取“喜欢”的播放列表来完成，但我不知道具体如何。

我可以通过 Javascript API 获得“喜欢”的视频列表吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-21T08:12:38.110

如果您使用 API 的 v3，那么您可以获得您喜欢的视频列表。首先，调用您的频道供稿，如下所示：

```
https://www.googleapis.com/youtube/v3/channels?part=contentDetails&mine=true&key={YOUR_API_KEY} 
```

然后，在响应中，您将获得相关播放列表的列表——其中一个将被键入“喜欢”。获取该播放列表 ID 并请求其项目供稿：

```
https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId={PLAYLIST_ID}&key={YOUR_API_KEY} 
```

如果您不使用 API 的 v3，您可能不会在获得喜欢的视频方面取得很大成功。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-01-14T19:16:47.717

截至 2020 年，该`/videos`端点可让您直接过滤喜欢的视频，例如：

```
GET https://www.googleapis.com/youtube/v3/videos?myRating=like&part=snippet
Authorization: Bearer <oauth token> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-12-26T05:08:07.447

如果您将以下参数传递给`playlistItems.list`，您可以获得与授权帐户关联的喜欢视频的播放列表。

```
auth: "your_auth_key"
playlistId: "LL" 
```

这是我运行的脚本的代码片段，用于在文本文件中获取喜欢的视频。
*注意：我使用 YouTube API 文档中提供的帮助代码来获取`authkey`并将其传递给我的函数。*

```
// get all the liked videos by a channel
async function get_liked_playlist(authkey){

    fs.writeFile("./output/"+"all_liked_videos"+".txt", "\n"+time_stamp, { flag: 'a+' }, e => console.log(e) );
    let nextPageToken_ = null;
    let text__ = "";
    let i = 0;

    do {

        await API.playlistItems.list({
            key: process.env.API_KEY,
            auth: authkey,
            part: "snippet",
            maxResults: 50,  // 50 is the max value
            playlistId: "LL",
            pageToken: nextPageToken_
        })
        .then(res => {
            let results = res.data.items;
            nextPageToken_ = res.data.nextPageToken;
            results.forEach(item => {
                // console.log(`Title: ${item.snippet.title}\tURL: https://youtu.be/${item.snippet.resourceId.videoId}`)        
                i++;
                text__ += "\nTitle: "+item.snippet.title+"\tURL: https://youtu.be/"+item.snippet.resourceId.videoId;
            });
            console.log("items done: "+i+"\tnextPageToken: "+nextPageToken_);
        })
        .then( fs.writeFile("./output/"+"all_liked_videos"+".txt", text__ , { flag: 'a+' }, e => { if(e) console.log("error with fs\t"+e); }) )
        .then( text__ = "" )
        .catch( e => console.log("error here\t" + e) )

    } while (nextPageToken_ != null)

    if(text__.length>1) fs.writeFile("./output/"+"all_liked_videos"+".txt", text__ , { flag: 'a+' }, e => { if(e) console.log("error with fs\t"+e); });

} 
```

# java - Swing - 根据单元格的值设置单元格的颜色

> ID：14425364
> 
> 赞同：4
> 
> 时间：2013-01-20T14:16:06.177
> 
> 标签：java, swing, jtable, tablecellrenderer

我想根据单元格的值设置单元格的颜色。谷歌搜索了一下，我发现我可以用这样的东西来做到这一点：

```
public class TableCellRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(
       JTable table, Object value, 
       boolean isSelected, boolean hasFocus, 
       int row, int col)  
    {
       // get the DefaultCellRenderer to give you the basic component
       Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);
       // apply your rules
       if (value.toString().equals("Red"))
          c.setBackground(Color.RED);
       else  
          c.setBackground(Color.GRAY);
       return c;
    }
 } 
```

我遇到的问题是我想修改的代码已经为 JTable 的列设置了 TableCellRendererer。代码中有一个函数如下所示：

```
private void configureTableColumns() {      
        Enumeration columns = this.table.getColumnModel().getColumns();

        while (columns.hasMoreElements()) {
            TableColumn tableColumn = (TableColumn) columns.nextElement();

            this.setCellRenderer(tableColumn);
            TableCellRenderer renderer = tableColumn.getCellRenderer();

            if (renderer == null) {
                renderer = this.table.getDefaultRenderer(Object.class);
            }
            tableColumn.setCellRenderer(renderer);
            this.setCellEditor(tableColumn);
        }
    } 
```

使用上面的代码，我还需要添加前面显示的 TableCellRenderer 类吗？我要做的就是检查单元格的值是否为“ABC”并将背景设置为红色。

## 更新：

我确实尝试将我的 TableCellRenderer 版本添加为我要修改的代码中的内部类，但我收到一个错误，即 tableColumn.getCellRenderer() 存在类型不匹配。

```
Type mismatch: cannot convert from TableCellRenderer to MyTableExample.TableCellRenderer 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:20:16.357

覆盖`prepareRenderer`方法来做到这一点。

例子：

```
public Component prepareRenderer (TableCellRenderer renderer, int rowIndex, int columnIndex){  
Component componenet = super.prepareRenderer(renderer, rowIndex, columnIndex);  

if(getValueAt(rowIndex, columnIndex).toString().equals("Red")) {  
   componenet.setBackground(Color.RED);  
} else if(getValueAt(rowIndex, columnIndex).toString().equals("Green")) {
   componenet.setBackground(Color.GREEN);
}
return componenet;
} 
```

**更新：**

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class PrepareRendereEx {

public static void main(String[] args) {

    JFrame frame = new JFrame();
    frame.setSize(new Dimension(400, 100));

    Object data[][] = { {"java", "j2ee"}, 
                        {"java", "j2ee"}, 
                        {"java", "j2ee"}
                      };
    Object[] columnNames = {"Java", "J2EE"};

    DefaultTableModel model = new DefaultTableModel(data, columnNames);
    JTable table = new JTable(model) {
        @Override
        public Component prepareRenderer(TableCellRenderer renderer, int rowIndex,
                int columnIndex) {
            JComponent component = (JComponent) super.prepareRenderer(renderer, rowIndex, columnIndex);  

            if(getValueAt(rowIndex, 0).toString().equalsIgnoreCase("java") && columnIndex == 0) {
                component.setBackground(Color.RED);
            } else if(getValueAt(rowIndex, 1).toString().equalsIgnoreCase("j2ee") && columnIndex == 1){
                component.setBackground(Color.GREEN);
            }

            return component;
        }
    };

    frame.add(new JScrollPane(table));
    frame.setVisible(true);
}
} 
```

**输出：**

![在此处输入图像描述](../Images/07894a16a996e8fa07b94253b2c01b77.png)

# javascript - Chrome 扩展：在内容脚本中将 localStorage 值转换为布尔值

> ID：14425371
> 
> 赞同：1
> 
> 时间：2013-01-20T14:16:55.110
> 
> 标签：javascript, google-chrome, global-variables, content-script

我目前正在将我的一个用户脚本转换为 chrome 扩展。我仍然坚持的唯一一件事是成功地将 localStorage 值存储在我的内容脚本中的变量中。我将在这里举一个例子，其他的类似但有不同的名称。

```
var REMOVE_WARNINGS;

chrome.extension.sendRequest({method: "REMOVE_WARNINGS"}, function(response) {
console.log(response.status);
REMOVE_WARNINGS = response.status == "true";
}); 
```

如您所见，我在我的扩展程序的 localStorage 中查询分配给“REMOVE_WARNINGS”的值。我这样做是因为在内容脚本的后面，会检查此变量以查看它是否必须执行某些操作。原始值通过 HTML 选项（true 或 false）通过选项页面在 localStorage 中分配，这没有问题。值“true”（或“false”）成功返回到内容脚本的方法并打印在控制台中，因为我已经检查过了。**不起作用**的是将值分配给我的内容脚本中的全局变量REMOVE_WARNINGS 。

我尝试了一些选项，包括`REMOVE_WARNINGS = response.status;`，`REMOVE_WARNINGS = response.status == "true";`并且我还尝试删除控制台输出行，认为它可能会破坏性地打印。这些选项似乎都没有成功地将布尔值“true”或“false”存储在全局变量中，因为脚本没有执行它应该执行的操作。

有人看到我在这里做错了吗？在这一点上我完全迷失了，特别是因为清楚地阅读价值是没有问题的。它将它存储在内容脚本的全局变量中，这就是问题所在。

干杯肯尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:37:25.630

如果我错了，请纠正我，但我认为您正在尝试执行以下操作：

```
var REMOVE_WARNINGS;

chrome.extension.sendRequest({method: "REMOVE_WARNINGS"}, function(response) {
    console.log(response.status);
    REMOVE_WARNINGS = response.status == "true";
});
console.log(REMOVE_WARNINGS); //this console.log will fail? right? 
```

尝试像这样修改您的代码：

```
chrome.extension.sendRequest({method: "REMOVE_WARNINGS"}, function(response) {
    console.log(response.status);
    REMOVE_WARNINGS = response.status == "true";
    doSomething();
});

function doSomething() {
    console.log(REMOVE_WARNINGS); //this one should work
} 
```

# algorithm - 算法的阶函数

> ID：14425374
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:17:11.397
> 
> 标签：algorithm, big-o, big-theta

有人可以帮我理解这个问题吗？我明天的考试可能会有它，但我在互联网或我的讲座中找不到类似的问题。

![在此处输入图像描述](../Images/253d5ea54703a658728526aff43ce32c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:33:24.983

首先，您必须通过确定每个函数的增长类别来计算 Theta 符号，例如 eG 1、log(n)、n、n log(n) 等。为此，您当然必须扩展这些功能。拥有每个功能的增长类，您必须按照它们的优点对它们进行排序。最后，您必须将这些函数放入关系中，例如 g1 = omega(g2)。因此请记住，如果 t(n) 的下界为 g(n) 的某个倍数，则称函数 t(n) 位于 omega(g(n)) 中，eG n³ >= n² 因此 n³ 是omega(n²) 的元素。这也可以写成 n³ = omega(n²)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:53:22.693

首先，您需要将每个函数表示为`Theta(something)`.
例如，对于第一个：`Theta((1-n)(n^3-17)) = Theta(n^4 + ...) = Theta(n^4)`.
对于第二个：`Theta(30+log(n^9)) = Theta(30 + 9logn) = Theta(logn)`。
这些排序为`g1, g2`，因为`n^4 = Omega(logn)`。
等等。
对于排序：说这`g1 = Omega(g2)`意味着`g1`增长至少与 一样快`g2`，也就是说我们正在定义一个下限。因此，将它们从最差（最慢，增长最快）到最好（注意：练习想要“第一个到最可取”很奇怪，但欧米茄的定义毫无疑问）。
顺便说一句：如果你想更正式一点，这里是 Omega 符号的定义：（
`f = Omega(g) iff exist c and n0 > 0 such that forall n >= n0 we have 0 <= c*g(n) <= f(n)`换句话说：f 的增长速度至少和 g 一样快）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:54:44.917

对于theta，[这个答案](https://stackoverflow.com/questions/5365724/confused-on-whether-to-express-time-complexity-with-theta-notation-or-big-oh-not)和[那个](https://stackoverflow.com/questions/10376740/big-theta-notation-what-exactly-does-big-theta-represent)总结了您的问题中可以找到的内容。你能找到哪个*g*函数（比如*f*是你上面的 8 个函数之一）

*   乘以渐近于*f*的常数边界（称为`O(g(n))`）
*   乘以（通常）渐近低于*f*的另一个常数边界（称为`omega(g(n))`

例如，对于`iv`: `10^5n`，`Θ(n)`适合，因为您可以很容易地找到两个常数，其中*k1.n*位于下方`10^5n`，*k2.n*位于上方，渐近。（这里*f*是`O(n)`和*f*`Omega(n)`一样，这很容易）。*`iv.`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:07:59.950

您需要了解所有大 O、Big Omega 和 Big theta 都适用于更差/最佳/平均情况

对于某些函数：Big O -> O(..) 是这个函数永远不会超过的上限.. 例如对于更高的值 Big Omega -> 是下磅函数永远不会低于它。例如在小值中 Big theta 是比如：有 2 个常数，这样：Big omega * c < Big Theta < Big O *c2

所以去你的样本：i）Big Omega和O（n ^ + n）的顺序为n ^ 4。viii) 它是常数，所以 Obig O 和大 Omega 相同.. 因此大 Theta 相同*

# mysql - 相等与不相等

> ID：14425375
> 
> 赞同：0
> 
> 时间：2013-01-20T14:17:12.147
> 
> 标签：mysql

我有这个`mysql`查询，它可以在指定日期获取特定数据；

```
SELECT id FROM mytable WHERE DAY(idate)='11' AND MONTH(idate)='01' AND YEAR(idate)='2013' GROUP BY id 
```

现在我想获取指定日期的数据和指定日期之外的数据，我试过这个查询并返回零结果；

```
SELECT id FROM mytable WHERE DAY(idate)='11' AND DAY(idate)<>'11' AND MONTH(idate)='01' AND YEAR(idate)='2013' GROUP BY id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:21:44.090

你的 SQL：

```
SELECT id FROM mytable WHERE DAY(idate)='11' AND DAY(idate)<>'11' 
                       AND MONTH(idate)='01' AND YEAR(idate)='2013' GROUP BY id 
```

正在说“从 mytable 中选择日期既等于 11 又不等于 11 的行的 id ...”

这是一个不可能的情况，因此你什么也得不到。

我认为，您*真正*想要的是“从 mytable 中选择日期等于 11 的行以及日期不等于 11 的行的 id ...”。这与“从 mytable 中选择行的 id 而不管日期的值...”或：

```
SELECT id FROM mytable WHERE MONTH(idate)='01' AND YEAR(idate)='2013' GROUP BY id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:21:22.620

您可以使用您的第一个查询并从查询表中[减去](http://forums.mysql.com/read.php?10,236210,236210)，或者您可以修复您的查询（阅读[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)）：

```
SELECT id
    FROM mytable 
         WHERE DAY(idate)<>'11' OR MONTH(idate)<>'01' OR MONTH(idate)='01' OR YEAR(idate)='2013'
 GROUP BY id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:22:45.897

您目前的查询基本上将其作为 WHERE 子句：

```
where 1 = 1
and   1 <> 1 
```

显然两者都不可能是真的。同样，您的过滤器`DAY(idate)`是互斥的。很难准确理解您要达到的目标。也许您应该完全删除 DAY() 上的测试？

```
SELECT id 
FROM mytable 
WHERE MONTH(idate)='01' 
AND YEAR(idate)='2013' 
GROUP BY id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T14:19:11.747

尝试`OR`代替`AND`：

```
SELECT id 
FROM mytable t1
WHERE DAY(idate)<>'11'
  OR ( DAY(idate) = '11' 
      AND MONTH(idate)='01' 
      AND YEAR(idate)='2013' 
    )
GROUP BY id 
```

# web-applications - 学习 Python 进行 Web 开发。Python 2 还是 3？

> ID：14425379
> 
> 赞同：4
> 
> 时间：2013-01-20T14:17:40.600
> 
> 标签：web-applications, python-3.x, python-2.x

我是一位经验丰富的 PHP 开发人员（尽可能使用 OOP 功能），目前正在寻找另一种语言。我使用过 Ruby、Python 和 Node，发现 Python 是迄今为止最好的选择（就成熟度、易用性和学习曲线而言）。由于我主要关注以 Web 为中心的开发，Django 似乎是显而易见的选择框架。但这是我的问题：Django 仍然基于 Python 2，Flask 也是如此，但几乎所有 Python 教程都建议你开始学习 Python 3。但如果你想的话，似乎第 2 版是你必须开始的。使用更流行的 Web 框架，这似乎不会很快改变。这是真的？你知道替代品吗？

我知道有类似的问题，但它们要么已经过时，要么不专注于 Web 开发，所以我想这是一个有效的问题。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T14:29:48.517

如果您正在寻找用于 Web 开发的 Python 框架，我强烈建议您使用 Django。关于 Python 2 或 3 的问题，Python 3 当然是未来。Django 很快就会迁移到 Python 3。现在你可以坚持使用 Django 和 Python 2.7。但是避免使用那些从 Python 3 中删除的 Python 2.7 特性。

# django - ViewDoesNotExist 在 /admin/

> ID：14425380
> 
> 赞同：0
> 
> 时间：2013-01-20T14:17:45.250
> 
> 标签：django, django-admin, admin

我已取消注释启用管理员所需的所有内容，
取消注释 url 中的 3 行并在安装应用程序中添加 django.ontrib.admin，
但是当我打开：8000/admin 时，它显示**/admin/ 中不存在视图
无法导入用户.views.上传。模块 users.views 中不存在视图**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:15:33.303

您的 urlconfig 某处有错误。您正在尝试引用一个`users.views.upload`不存在的视图。该错误很可能与 Django Admin 无关。如果没有 urlconfig，就很难解决您的问题。

# hibernate - Hibernate Projection 将列设置为 1

> ID：14425381
> 
> 赞同：0
> 
> 时间：2013-01-20T14:17:52.230
> 
> 标签：hibernate

鉴于此分离查询：

```
DetachedCriteria notExistInCriteria = DetachedCriteria.forClass(ReportTelephonyEvent.class, "r2");
notExistInCriteria.add(Restrictions.eq("child", child));
notExistInCriteria.add(Restrictions.eqProperty("countryCode", "r1.countryCode"));
notExistInCriteria.add(Restrictions.eqProperty("phonenumber", "r1.phonenumber"));
notExistInCriteria.add(Restrictions.or(Restrictions.lt("startTime", start), Restrictions.gt("startTime", end)));
notExistInCriteria.setProjection(Projections.property("phonenumber")); 
```

我现在设置了 Projection “phonenumber”，但我想将其设置为 1，这样输出查询将是这样的：

```
SELECT 1 FROM bpr_report_telephony_event ............. 
```

如何设置 Projection 以使 Hibernate 在选择列中只有“1”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:59:26.780

用 Projections.sqlProjection("1") 替换 Projections.property("phonenumber") 应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T11:59:09.130

为了得到“1”作为投影的结果，你可以这样做：

```
notExistInCriteria.setProjection(Projections.sqlProjection("1", new String[]{}, new Type[] { IntegerType.INSTANCE }) 
```

# php - WebRTC 候选人信息末尾的数据是什么？

> ID：14425382
> 
> 赞同：2
> 
> 时间：2013-01-20T14:17:52.023
> 
> 标签：php, javascript, google-chrome, websocket, webrtc

我使用 Chrome 中的 WebRTC API 以及我自己按照 W3C 规范和 SO 上的其他问题编写的 WebSocket 脚本设置了一个基本的视频聊天应用程序。

但有时，当一台 PC 通过 WebSocket 连接向另一台 PC 发送 ICE 候选信息时，会在 JSON 字符串化候选信息的末尾附加一堆乱码。这个问题只是有时会发生，而且通过 createOffer 和 createAnswer 方法发送的 SDP 信息永远不会发生。

请参阅以下链接以获取我正在谈论的示例： [http ://s1290.beta.photobucket.com/user/HartleySan83/media/NGdata_zps0a7203e7.png.html?sort=3&o=0](http://s1290.beta.photobucket.com/user/HartleySan83/media/NGdata_zps0a7203e7.png.html?sort=3&o=0)

因为 JSON 字符串化的候选信息总是以 '}}' 结尾，所以通过向 WebSocket 服务器脚本添加一个 if 条件，我能够绕过这个问题并使视频聊天应用程序正常工作。不幸的是，这是我想避免的黑客行为。另外，我想知道为什么会发生这种情况。

值得注意的是，当我在将候选信息发送到 WebSocket 服务器脚本之前向客户端的控制台发出警报或回显候选信息时，不存在任何额外的乱码文本，所以我不确定为什么它与候选信息一起出现服务器端的信息，只有有时。

以下是将候选信息发送到服务器端脚本的客户端代码片段：

```
function startPeerConnection() {

  navigator.webkitGetUserMedia({ audio: true, video: true }, function (stream) {

    document.getElementById('vid1').src = webkitURL.createObjectURL(stream);

    pc = new webkitRTCPeerConnection(null);

    pc.onicecandidate = function (evt) {

      if (evt.candidate) {

        socket.send(JSON.stringify({ candidate: evt.candidate }));

      }

    };

    pc.onaddstream = function (evt) {

      document.getElementById('vid2').src = webkitURL.createObjectURL(evt.stream);

    };

    pc.addStream(stream);

  }, function () {});

} 
```

以下是取消屏蔽接收到的 WebSocket 数据的服务器端代码：

```
$len = ord($buffer[1]) & 127;

if ($len === 126) {

  $masks_start = 4;

} else if ($len === 127) {

  $masks_start = 10;

} else {

  $masks_start = 2;

}

$masks = substr($buffer, $masks_start, 4);

$data = substr($buffer, $masks_start + 4);

$len = strlen($data);

$text = '';

for ($i = 0; $i < $len; $i++) {

  $text .= $data[$i] ^ $masks[$i % 4];

}

if (($end = strpos($text, '}}')) !== false) {
// This if condition eliminates the garbled text.
// Without it, a "Could not decode a text frame as UTF-8"
// error is output to the Chrome console.

  $text = substr($text, 0, $end + 2);

  $len = strlen($text);

}

if ($len <= 125) {

  $header = pack('C*', 129, $len);

} else if (($len > 125) && ($len < 65536)) {

  $header = pack('C*', 129, 126, ($len >> 8) & 255, $len & 255);

} else if ($len >= 65536) {

  $header = pack('C*', 129, 127, ($len >> 56) & 255, ($len >> 48) & 255, ($len >> 40) & 255, ($len >> 32) & 255, ($len >> 24) & 255, ($len >> 16) & 255, ($len >> 8) & 255, $len & 255);

}

$server_response = $header . $text;

foreach ($users as $user) {

  if ($user !== $users[$user_idx]) {

    @socket_write($user['socket'], $server_response, strlen($server_response));

  }

} 
```

我在互联网上到处搜索有同样问题的其他人，但我在规范中找不到任何人或任何东西谈论这个，所以我想这是我的代码有问题。

任何人都可以就问题的根源提供任何指导，我们将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:46:31.847

好吧，我终于找到了问题所在。我的服务器端 WebSocket 代码确实是错误的。问题是我错误地计算了长度。不幸的是，我依赖于我在 PHP 中找到的一些关于 WebSockets 的页面，结果发现，该页面的代码中有许多错误，我慢慢地开始意识到越来越多的错误。无论如何，这是计算从客户端发送到服务器的消息长度的正确方法：

```
$len = ord($buffer[1]) & 127; // This is the default payload length.

if ($len === 126) { // If 126, then need to use the payload length at the 3rd and 4th bytes.

  $masks_start = 4;

  $len = (ord($buffer[2]) << 8) + ord($buffer[3]);

} else if ($len === 127) { // If 127, then need to use the next 8 bytes to calculate the length.

  $masks_start = 10;

  $len = (ord($buffer[2]) << 56) + (ord($buffer[3]) << 48) + (ord($buffer[4]) << 40) + (ord($buffer[5]) << 32) + (ord($buffer[6]) << 24) + (ord($buffer[7]) << 16) + (ord($buffer[8]) << 8) + ord($buffer[9]);

} else { // Otherwise, the default payload length is correct.

  $masks_start = 2;

} 
```

这样做之后，一切都很好。好吧，我还没有弄清楚如何正确关闭 WebSocket 连接，但除此之外，WebRTC 视频效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:40:38.353

client1*在*将其发送到 Websocket 服务器之前是否添加了乱码二进制数据？或者你只是在被 websocket 服务器处理后才在 client2 上看到它？我问是因为我遇到了[类似的问题](https://stackoverflow.com/questions/13982309/using-signalr-as-service-layer-for-webrtc/13987630)，我的信令服务器（在这种情况下为 SignalR）有一个错误，它破坏了我在 PeerConnections 之间发送的 SDP。

# c++ - 在没有IDE的情况下编译单个文件，c ++

> ID：14425390
> 
> 赞同：1
> 
> 时间：2013-01-20T14:18:31.473
> 
> 标签：c++, visual-studio-2010, unit-testing, compilation

我正在为 C++ 开发一个单元测试器，主要是为了练习，但我被困住了。

我希望它的工作方式如下：

1.  它从定义的测试文件夹及其子文件夹中的所有 .hpp 文件中读取所有类和函数名称。这些断言链接到一个记录器，该记录器输出带有测试结果的 HTML 文件。
2.  它创建一个单独的 .hpp 或 .cpp 文件，该文件创建每个测试类的一个实例并运行其中的每个函数。
3.  它编译在步骤 2 中创建的 .hpp/.cpp 文件。
4.  它运行步骤 3 的输出。

我有 1\. 和 2\. 失败，但我无法编译我创建的 .hpp 文件。我最初想使用对 cl.exe 的简单调用进行编译，但事实证明这比我最初预期的要困难得多。

你们中有人知道编译单个文件的好/简单的方法吗？我已经对 make/nmake 进行了一些研究，但我不知道如何使用它们来完成这项工作。

另外，如果这种进行单元测试的方法完全愚蠢，请告诉我。

一些信息：我正在使用 Windows 7 64 位和 Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:24:36.427

假设生成的`something.cpp`文件包含`#include "something.hpp"`，那么它应该只是一种情况，`cl something.cpp`并且您会得到一个`something.exe`，您可以以某种合适的方式运行它。

“调用对象上的每个函数”似乎有点奇怪——你怎么知道结果是否正确？如果我们有一个复杂的对象，它可能需要的不仅仅是创建来支持调用所有函数。您将哪些参数传递给每个函数？你怎么知道它应该返回什么？

# javascript - onclick 功能自动运行

> ID：14425397
> 
> 赞同：22
> 
> 时间：2013-01-20T14:19:10.080
> 
> 标签：javascript, google-apps-script, web-applications, dom-events

使用谷歌应用程序脚本我在运行传递参数的 js 函数时遇到问题。当我添加参数时，它将始终在页面加载而不是单击按钮时运行代码。

直接来自 HtmlService 示例，没关系 - 它在按下按钮时运行......

```
document.getElementById('button1').onclick = doSomething; 
```

但是当我如下向调用（和函数）添加参数时，它在页面加载时只运行一次（而不是在按下按钮时）......

```
document.getElementById('button1').onclick = doSomething('with_this_parameter'); 
```

任何对此行为的见解将不胜感激......如果答案很明显，对不起！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-20T14:20:52.530

当你说

```
document.getElementById('button1').onclick = doSomething('with_this_parameter'); 
```

这意味着调用**doSomething('with_this_parameter')**然后将返回的值分配给`document.getElementById('button1').onclick`. 因此，这就是为什么当代码到达该行时它会被调用。该值是否可分配给该属性是另一个问题，但这就是它被调用的原因。

像这样使用它

```
document.getElementById('button1').onclick = function(){
    doSomething('with_this_parameter');
} 
```

参考：此解决方案由[Mark Linus](https://stackoverflow.com/users/1378681/mark-linus)给出。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T14:21:01.640

这样做：

```
document.getElementById('button1').onclick = function(){
    doSomething('with_this_parameter');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:37:05.500

我通常这样做 clickHandlers 像这样：

```
 // create button here or get button...
 var button1 = document.getElementById('button1').setName('button1');
 var clickHandler = app.createServerClickHandler('doSomething');
 button.addClickHandler(clickHandler);

 function doSomething(e){
   var button1 = e.parameter.button1;
   <do something with var button>
 } 
```

我不确定您要添加什么参数，但是如果按钮本身没有通过 .setId/getId 或 .setTag/getTag 传递它，则需要添加一个回调元素来传递它。如果它来自文本框：

```
 var textbox = app.createTextBox(); 
 var button1 =
 app.createButton.setName('button1'); 
 var clickHandler =        
 app.createServerClickHandler('doSomething').addCallbackElement(textBox);
 button1.addClickHandler(clickHandler); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-04T10:28:06.770

要将函数引用分配给某个变量，请执行以下操作：

```
var a = doSomething; 
```

其中 doSomething 是一个函数。

但是当您必须传递参数并分配该函数时

```
var a = doSomething(b); 
```

这将导致麻烦，因为在将函数分配给变量时，它会被调用，而不是在它打算被调用的时候。

为了克服这个问题，您可以使用箭头函数或简单函数来调用您自己的带有参数的函数。

```
var c = () => doSomething(d); 
```

**这实际上被理解为 var c = anonymous_function;**

或者

```
var c = function() {
    doSomething(d);
} 
```

因此你可以这样做：

```
document.getElementById('button1').onclick = () => doSomething('with_this_parameter'); 
```

# python - 捕捉“socket.error：[Errno 111] Connection denied”异常

> ID：14425401
> 
> 赞同：45
> 
> 时间：2013-01-20T14:19:19.020
> 
> 标签：python, sockets

我怎么能捕捉到`socket.error: [Errno 111] Connection refused`异常？

```
try:
    senderSocket.send("Hello")
except ?????:
    print "catch !" 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-20T14:25:50.143

通过捕获*所有* 异常，并在属性不等于 111`socket.error`时重新引发异常。或者，更好的是，使用常量代替：`errno`[`errno.ECONNREFUSED`](http://docs.python.org/2/library/errno.html#errno.ECONNREFUSED)

```
import errno
from socket import error as socket_error

try:
    senderSocket.send('Hello')
except socket_error as serr:
    if serr.errno != errno.ECONNREFUSED:
        # Not the error we are looking for, re-raise
        raise serr
    # connection refused
    # handle here 
```

# multithreading - 具有委托和匿名函数的线程

> ID：14425402
> 
> 赞同：0
> 
> 时间：2013-01-20T14:19:45.337
> 
> 标签：multithreading, c#-4.0

我是 C# 和 .Net 的新手。
有这个代码：

```
var loadInfoThread = new Thread(delegate() { try {..} catch(Exception e) {..}}); }  
loadInfoThread.Start(); 
```

这会启动运行匿名方法的新工作线程吗？这意味着当线程完成工作时方法内的变量将被清除？

究竟是`delegate()`做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:22:08.457

您可以将任何方法传递给`Thread`匿名方法（[委托](http://msdn.microsoft.com/en-us/library/900fyy8e%28v=vs.71%29.aspx)）旁边的构造函数。匿名方法中的变量将与普通函数一样被清除。

没有匿名方法的线程。

```
var loadInfoThread = new Thread(SomeFun);
loadInfoThread.Start();      

private void SomeFun(){
{    
  try {

  } 
  catch(Exception e) {..}   
} 
```

# for-loop - 基本的 Clojure 语法

> ID：14425404
> 
> 赞同：0
> 
> 时间：2013-01-20T14:19:46.383
> 
> 标签：for-loop, clojure, let

假设我有一个宏，在宏里面我有这个：

```
let[
    elements# //stuff// 
    #newlist (for [e# elements#] (if (number? e#) (**add e# to #newlist**)))
] 
```

因为我很难找到关于非常简单的 Clojure 东西的正确信息，所以我在这里问：我需要做什么才能完成上述任务？我*认为*应该可以做到这一点，但我不知道最关键的部分！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:29:42.447

看起来您正在尝试创建一个名为的列表`newlist`，其中包含所有`elements`数字元素。如果是这样，您可以`filter`像这样使用函数：

```
(let
  [elements whatever
   newlist (filter number? elements)]
  do-stuff-with-newlist) 
```

`filter`接受一个谓词函数和一个列表，并返回一个新列表，其中包含谓词返回真实结果的那些项目。

请注意，您最初在 for 循环中添加列表的想法是行不通的，因为列表是不可变的，因此您不能就地添加它们。您可以在 for 循环中重新分配一个保存列表的变量（类似于`(set! my-list (cons e my-list))`，但这不是惯用的 Clojure 代码。它还会反向创建列表。

# c - 拦截系统调用时无法在 X 处处理内核分页请求

> ID：14425410
> 
> 赞同：3
> 
> 时间：2013-01-20T14:20:19.377
> 
> 标签：c, linux, kernel-module, kernel

> **可能重复：**
> [Linux内核：系统调用挂钩示例](https://stackoverflow.com/questions/2103315/linux-kernel-system-call-hooking-example)

我一直在尝试在内核级别挂钩系统调用。我从这个[问题](https://stackoverflow.com/questions/2103315/linux-kernel-system-call-hooking-example)中得到了基本的想法。我试图拦截的系统调用是**fork()**。所以我从 System.map 中找到了**sys_call_table**的地址，结果是 0xc12c9e90。现在我编写了如下模块。

```
#include<linux/kernel.h>
#include<linux/module.h>
#include<linux/unistd.h>
#include<linux/semaphore.h>
#include<asm/cacheflush.h>
MODULE_LICENSE("GPL");
void **sys_call_table;
unsigned long addr;
asmlinkage int (*original_call)(struct pt_regs);
asmlinkage int our_call(struct pt_regs regs)
{
        printk("Intercepted sys_fork");
        return original_call(regs);
}
static int __init p_entry(void)
{
        struct page *pg;
        printk(KERN_ALERT "Module Intercept inserted");
        sys_call_table=(void *)0xc12c9e90;
        pg=virt_to_page(sys_call_table);
        addr=(unsigned long)page_address(pg);
        set_memory_rw(addr,1);
        original_call=sys_call_table[__NR_fork];
        sys_call_table[__NR_fork]=our_call;
        set_memory_ro(addr,1);
        return 0;
}
static void __exit p_exit(void)
{
        sys_call_table[__NR_fork]=original_call;
        set_memory_ro(addr,1);
        printk(KERN_ALERT "Module Intercept removed");
}
module_init(p_entry);
module_exit(p_exit); 
```

我编译了模块并尝试将其插入内核。不幸的是，dmesg 输出给了我如下消息**BUG：无法在 c12c9e98 处理内核分页请求，**这是 ellaborate dmesg 输出

![在此处输入图像描述](../Images/a0b8653c90a4c64ccfa254cb52616622.png) ![在此处输入图像描述](../Images/819dc2fc485931d5fba73baba5b85f7c.png)

作为找出问题的实验，我只是将这一行注释掉了

```
 sys_call_table[__NR_fork]=our_call; 
```

之后我重复编译，然后插入。它没有显示任何错误。所以我得出结论，上面指定的将新函数分配给 sys_call_table 的行是问题所在。但我不知道是什么原因造成的以及如何解决它。任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:15:41.150

我希望您的调用`set_memory_rw`不会生效，因为您不使用`flush_tlb`，因此当您写入`syscall_table`生效时 CPU 的 TLB 仍然处于活动状态。您需要刷新 TLB。您可能可以使用`local_flush_tlb()`.

# scheme - 如何在 MIT Scheme 和 Windows 之间复制/粘贴文本

> ID：14425424
> 
> 赞同：1
> 
> 时间：2013-01-20T14:23:17.067
> 
> 标签：scheme, mit-scheme

我想在 MIT Scheme 的 Edwin 和 Windows 之间复制/粘贴一些文本。有办法吗？

现在我在记事本中打开源代码，复制/粘贴到那里，保存并关闭，返回 Edwin 并同步。这不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:48:30.600

在[文档](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-user/Edwin.html)中，它指出

> Edwin 与 GNU Emacs 非常相似——您应该参考 GNU Emacs 手册以获取有关 Edwin 的命令和键绑定的信息

所以我的猜测是你必须：

*   首先在要复制的文本的开头和结尾设置一个标记：`[Ctrl-spacebar]`
*   然后复制它：`[Meta-W]`
*   并从 Windows 粘贴回来：`[Ctrl-Y]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:13:08.470

Edwin 的代码是从 Emacs 的一个分支创建的。在 emacs 中，复制粘贴称为`yank`.

拉环与图形界面交互。

看[这里](http://emacswiki.org/emacs/CopyAndPaste)有详细的接口说明。

# json - 显示远程内容 - Joomla

> ID：14425426
> 
> 赞同：0
> 
> 时间：2013-01-20T14:23:19.720
> 
> 标签：json, spring, joomla, jqgrid, rss

我有一个 spring MVC 应用程序和一个 joomla“展示网站”。

如何在我的 joomla 展示站点中显示来自 spring MVC 的数据？

我的第一次尝试是在 jqgrid 内部创建一个简单的 joomla 模块。但是我发现很多浏览器都拒绝JSON跨域，这种尝试并不好。

我也尝试过使用 IFrame .. 但我不喜欢这种方法..

当前的尝试是在 RSS 中从 MVC 应用程序中导出数据。我在 joomla 中安装了一个 rss 模块，它可以工作。但它在搜索和排序操作方面受到限制。

找到一种允许使用一些现有和开放的 joomla 模块过滤和排序数据的方法会很棒。

有人对正确的导出数据技术和相关模块有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:33:07.237

@mserioli您应该使用php curl，并在您的模块中使用GET或POST方法发出请求以从MVC应用程序中检索数据（json / xml）

# apache - 无法通过 UBUNTU 12.10 上的本地 IP 地址访问 Web 服务器

> ID：14425436
> 
> 赞同：13
> 
> 时间：2013-01-20T14:24:03.407
> 
> 标签：apache, networking, ubuntu, webserver, ip

最近我在我的开发机器上安装了 Ubuntu 12.10。我还安装了 apache 2.2 & Php 5.3.8 和 Php 5.2.17 和 MySQL。一切正常，我可以通过 127.0.0.1 & Localhost 关键字和主机名浏览我的网站和项目，但我无法通过本地 IP 地址（192.168.1.5）访问我的网站或 Apache Web 服务器。我在装有 Ubuntu 11.10 的笔记本电脑上运行这个模型，并且可以通过 192.168.1.x 访问。

您对此问题有任何想法，请让我知道您在这种情况下的 XP 吗？

感谢您的患者... Farzam 的一百万。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T15:10:33.537

也许您的 Apache 仅限于本地主机。在您的 Apache 配置文件 (httpd.conf) 中查找

```
Listen 127.0.0.1:80 
```

并将其替换为：

```
Listen 80 
```

或者

```
Listen *:80 
```

还要检查防火墙设置，在同一文件中查找以下行：

```
Allow from 127.0.0.1 
```

并尝试将其更改为：

```
Allow from all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:49:27.093

您应该更换监听线，如下所示：

`Listen 0.0.0.0:80`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T15:24:47.053

尝试：

```
sudo ufw allow from 192.168.1.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T07:31:42.293

我添加目录标签：

```
                选项索引 FollowSymLinks
                允许覆盖所有
                要求所有授予

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-10T04:55:36.717

Windows 防火墙对端口 80 没有例外。不知何故 IIS 工作正常，但不允许 Apache 端口 80。即使禁用 Windows 防火墙服务也不允许它。

在 Windows 中搜索“防火墙”并创建新规则。选择端口，输入 80，调用它：HTTP 或其他，保存。重新启动 Apache 服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-05T10:26:16.100

在我的情况下，我在nestjs上工作，以前我`app.listen(3001)`首先像这样运行我的项目，我改为这个`app.listen(3001,'192.168.xx.xx')`

现在我想使用网络（LAN）上的 ip 在另一台计算机上访问我的项目，因此现在允许我们在 ip 地址之后访问任何特定端口，这意味着如果我访问`192.198.xx.xx` ，那么我可以访问该地址。

但是如果我像这样附加端口，`192.198.xx.xx:3001`那么它不允许我访问 IP 地址，所以在这种情况下，我通过运行以下 cmd 来解决我的问题

1.  `sudo service ufw stop`
2.  `sudo iptables -nvL`
3.  `sudo iptables -nvL|less`
4.  `sudo iptables -F`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-06-20T20:06:17.770

“Windows 防火墙对端口 80 没有例外。不知何故 IIS 工作正常，但不允许 Apache 端口 80。即使禁用 Windows 防火墙服务也不允许它。

在 Windows 中搜索“防火墙”并创建新规则。选择端口，输入 80，调用它：HTTP 或其他，保存。重新启动 Apache 服务。” - 这对我有用。在 Win Server 2012 上的防火墙上启用端口 8080 后（我使用端口 8080）。

# java - 在自定义视图中观察 roboguice 应用程序中的事件

> ID：14425445
> 
> 赞同：1
> 
> 时间：2013-01-20T14:24:57.417
> 
> 标签：java, android, roboguice

基于用于触发事件的 RoboGuice API，在我的 CustomButtonView 实现中，我这样做了：

```
@Override
public void onClick(View v) {
    CommonApplication.getInstance().fireEvent(new InteractionButtonClicked());
    // setSelected();

}

public class InteractionButtonClicked
{
    public String getRef()
    {
        return (String)getTag();
    }

}

// handle the click event
protected void handleClick(@Observes InteractionButtonClicked button) {
    if (getTag().equals(button.getRef())) {
        //do A
    } else {
        //do B
    }
} 
```

但是，在此上下文中不会调用 handleClick=> 当我在主活动中设置 @Observer 时，它包含的方法**确实**会被调用。

我试图理解为什么，如果有一个选项可以在 Customview 上下文中观察事件......

# javascript - 使用 jQuery 编写 HTML

> ID：14425447
> 
> 赞同：0
> 
> 时间：2013-01-20T14:25:03.897
> 
> 标签：javascript, jquery, html, object, feed

我正在尝试使用从另一个站点接收到的数据创建“提要”。它以类似对象的数组形式出现。我已经尝试了几种显示数据的方法，但一直在改变我的想法，以最好的方式来做到这一点。目前我正在使用jQuery循环遍历对象并通过嵌套为每个对象创建相同的div`$(<div>).html()`

这比我以前使用纯 javascript 添加新元素的方法使用的代码要少得多，但我不确定这是否是 jQuery 的最佳用途。会有更好的方法来做到这一点吗？可能为每个数组元素创建一个新的 JavaScript 对象？

**编辑**：这是一小段代码。它没有关闭，我已经更改了类名和变量，但这是一个粗略的想法。

```
$.each(feed.data, function(i, var_name) {
    $("<div>").attr({
    "id" : var_name.created_time,
    "class" : "Post"
    }).html(
        $("<img>").attr({
        "class" : "Picture",
        "src" : "some_src" + var_name.id + "/picture"
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:58:19.490

由于对每个单独元素进行了大量的函数调用，因此您的方法是所有可能方法中效率最低的。

尽管您可以按照建议添加模板引擎，但也值得学习如何创建 html 字符串，并且会发现将每个元素包装在其中`$()`并不会真正减少代码

```
var newHtml=[];
$.each(feed.data, function(i, var_name) {

    newHtml.push('<div id="'+var_name.created_time+'" class="Post">');
      newHtml.push('<img class="Picture" src="some_src"' + var_name.id + '/picture" />');

         /* some nested data*/
         $.each( var_name.someRepeatingElements), function(i,val){
             newHtml.push('<p>'+val.content+'</p>')
         });
     newHtml.push('</div>')
});

/* after looping all data only make one append to DOM*/

$('#someDiv').append( newHtml.join('')) 
```

从语义上讲，这比嵌套大量`$.html()`调用更容易阅读

在许多没有大量复杂嵌套的情况下，创建自己的字符串比创建模板和代码来填充模板的工作量更少

# vb.net - 在 Visual Basic 中，我不断收到 String To double 错误

> ID：14425449
> 
> 赞同：0
> 
> 时间：2013-01-20T14:25:14.333
> 
> 标签：vb.net

我正在尝试在我的咖啡店程序中添加长度检查……我已经整理了一些，但我看不出哪里出错了。

```
Dim Name As String

MsgBox("Welcome. You Are On The 'Hot Mornings' Self-Ordering Service", vbInformation, "Welcome To Hot Mornings!")
        Name = InputBox("Please Enter Your Name", "Welcome To Hot Mornings!", ,     MsgBoxStyle.OkCancel)

If Len(Name <= 3) Then
        Do Until Len(Name > 3)
            MsgBox("Error!", vbExclamation, MsgBoxStyle.OkOnly)
            MsgBox("An Error Occureed Earlier. We Are Currently Trying To fix This     Issue.", vbInformation, "Error!")
            Name = InputBox("Please Enter Your Name.", , "Must Contain More Than 3     Characters", MsgBoxStyle.OkCancel)
        Loop
    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:27:07.943

```
Len(Name <= 3) 
```

这段代码没有任何意义。

您正在检查`Name`（一个字符串）是否小于或等于 3（嗯？），然后获取该`Len()`检查的结果。（嗯？）

您可能想要获取`Len()`字符串 ( `Len(Name)`) 的 ，然后检查该结果（它是一个数字）是否小于或等于 3。

# php - 如何在 joomla 中获取文章的类别？

> ID：14425453
> 
> 赞同：0
> 
> 时间：2013-01-20T14:25:42.267
> 
> 标签：php, joomla

我有一个 joomla 主题并带来了最近的 6 篇文章，现在我想在我的主题上打印这些文章的类别。我是 joomla 的新手，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:19:10.723

您没有说您使用的是什么版本，但它是显示文章类别的标准参数选项。查看显示/隐藏类别的选项列表并将其设置为显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:28:43.637

您应该查看任何显示最新文章的 Joomla 模块。在那里您可以看到他们如何访问类别名称。也许您可以直接使用该模块。从 \modules\mod_articles_latest 签出 helper.php。

# html - 如何在网页上添加下载音乐链接？

> ID：14425455
> 
> 赞同：0
> 
> 时间：2013-01-20T14:25:53.583
> 
> 标签：html, jsp, servlets

当用户单击“下载音乐”链接时，我想向用户显示如下所示的弹出窗口？

![在此处输入图像描述](../Images/1ba6d0e6733f76f86c7d02ac6ad99457.png)

如果我使用以下代码，则单击链接后会打开浏览器嵌入式音乐播放器，例如 Apple RealTIme ..

```
<a href="../mp3/horse.mp3" target="_blank">Click to download</a> 
```

如何防止浏览器运行音乐（不禁用/删除此插件）。

我希望我的浏览器应该下载音乐而不应该播放它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:42:29.723

首先，`onclick`从锚点中删除属性。您不需要为此使用 JavaScript。

其次，让您的服务器[`content-disposition: attachment`](https://stackoverflow.com/a/9195376/19068)在请求 mp3 时返回 HTTP 响应标头。如何执行此操作取决于您的服务器。例如，在 Apache 中，您可以在不涉及服务器端编程语言的情况下[使用`Header`指令](https://serverfault.com/questions/101948/how-to-send-content-disposition-headers-in-apache-for-files)。或者，查看[Java 中的示例](https://stackoverflow.com/a/7897624/19068)（尽管您应该`content-type`为 mp3 设置正确的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T00:05:29.483

在 nginx 上，您可以将其添加到您的 nginx.conf

```
location ~* (.*\.mp3) {
    types { application/octet-stream .mp3; }
    default_type application/octet-stream;
} 
```

并在 apache 上将其添加到您的 httpd.conf 或 .htaccess

```
<FilesMatch "\.(?i:mp3)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

我在[http://mp3boo.cc](http://mp3boo.cc)配置上使用了它，并且很好地强制下载 mp3 文件。hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:07:52.487

```
Explaining here how I did it:

1\. Add following snippet in web.xml:

<pre><code>
<servlet>
      <servlet-name>MyDownloadServlet</servlet-name>
      <servlet-class>com.lokur.MyDownloadServlet</servlet-class>      
  </servlet>
  <servlet-mapping>
      <servlet-name>MyDownloadServlet</servlet-name>
      <url-pattern>*.download</url-pattern>
  </servlet-mapping>

</pre></code>

2\. Add following in your servlet:

public class MyDownloadServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse response)
            throws ServletException, IOException {

        //Set the headers.
        response.setContentType("application/x-download"); 
        response.setHeader("Content-Disposition", "attachment; filename=downloaded_horse.mp3");

    //TODO: pull the file path from the request parameters  
        InputStream fileIn = getServletContext().getResourceAsStream("mp3/horse.mp3");
        ServletOutputStream outstream = response.getOutputStream();

        byte[] outputByte = new byte[40096];

        while(fileIn.read(outputByte, 0, 40096) != -1)
        {
            outstream.write(outputByte, 0, 40096);
        }
        fileIn.close();
        outstream.flush();
        outstream.close();

    }

}

3\. Finally this is the requested jsp:

<pre> <code>
       <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"

     %>  
    <body>  
    <form action="getMusicFile.download" method="post">
        Wanna download? <input type="submit" value="Download music"> 
      </form>  
    </body>

That's all to it!

Cheers,
Akshay :) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:14:26.437

您可以在服务器的 .htaccess 文件中添加以下代码行，以强制从服务器下载特定文件类型。然后一个正常的链接应该可以工作。

```
<FilesMatch "\.(?i:mp3)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

# javascript - 将相同大小的图像完全重叠在另一个图像之上

> ID：14425456
> 
> 赞同：1
> 
> 时间：2013-01-20T14:25:57.680
> 
> 标签：javascript, html, css, image

我是一名初级 Web 开发人员，我想将两个图像完全重叠在一起。我正在开发一个应用程序来检查输入到应用程序中的答案是否正确。对于每个答案，我将分别为正确/不正确的答案显示一个复选标记或一个“X”标记。为此，我将使用 CSS 和 JavaScript：

CSS：

```
#checkmark { visibility: hidden}
#xmark {visibility:visible} 
```

JavaScript：

```
function showCorrect(input, ans) {
    if (input == ans) {
        document.getElementById('checkmark').style.visibility=visible;
    }
} 
```

为此，我只想使复选标记可见，以便它完全覆盖 xmark。将图像完全叠加在任一图像之上以使复选标记覆盖“X”标记的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:34:12.793

如何使图像重叠：

```
.imagewrapper {
position:relative;}

.imagewrapper img {
position:absolute;
top:0px;
left:0px;
}

.img1 {
z-index:1
}
.img2 {
z-index:2;
} 
```

HTML

```
<div class="imagewrapper">
<img class="img1" src="img1.jpg" />
<img class="img2" src="img2.jpg" />
</div> 
```

这将使图像重叠。

Zindex 控制哪个图像在顶部。

或者，您也可以使用 display:none; 和显示：块；在你的 js 中，甚至更改 z-index。

如果您使用显示，则不需要重叠任何内容。

# sql - 从嵌入式 SQL 迁移到 ODBC 的工具

> ID：14425457
> 
> 赞同：2
> 
> 时间：2013-01-20T14:26:14.963
> 
> 标签：sql, migration, odbc, legacy, embedded-database

我有一堆通过嵌入式 SQL 访问数据库（Oracle、DB2 和 Sybase）的 C 代码：基本代码是相同的，但是使用三种不同的预编译器，构建了三种可执行文件，每个数据库/平台一个。

我工作得很好，但我们现在需要迁移到使用 ODBC 访问的解决方案。

问题是：可以使用哪些工具/api？一种直接的方法似乎是编写一个自定义预编译器（或修改一个存在的）来包装所有 SQL 和主机变量调用，以调用 ODBC 连接上的调用。

有人可以推荐用于该任务的工具或 api 以使其保持简单吗？

或者它是一种更简单的方法，另一种方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:37:20.417

对于这种情况，通常情况下，可能没有现成的答案；人们的代码库中总是有许多惊喜，而这种组合使 COT 工具在个别情况下变得不经济。

您需要的是一个[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)(PTS)，它带有 C 前端，可以定制以解析嵌入式 SQL。这样的工具可以应用源到源重写规则（“如果你看到*这个*模式，然后用*那个*模式替换它”）来解决问题。

这些工具需要一些技术上的努力来配置。在您的情况下，您必须调整 C 前端来处理嵌入式 SQL；这通常不在 C 解析器中。（如何以当前形式处理这些东西？）C 预处理器会有问题，因为人们用它做滥用的事情，这确实违反了解析器对宇宙的嵌套结构视图。然后你必须编写和测试规则。

这种努力是一种沉没成本，可以与手工完成工作的努力或一些更多的临时脚本（例如，Perl）进行交易，后者部分完成工作，让您清理它。我们的经验是，低于 100K SLOC 的麻烦是不值得的，并且您没有机会手动/临时修复高于 1M SLOC，并且您的里程会有所不同。

在这些中等大小的情况下，您可以为权衡取舍而苦恼；这也需要精力和时间。有时它只是更好地咬紧牙关，做任何你可以清理它的方式。

我们的 DMS 软件再造工具包就是这些 PTS 之一。它有一个可定制的 C 解析器和预处理器，正是为了帮助处理这些配置问题。我相信，维基百科文章中提到的其他 PTS 没有任何与它们相关的严重 C 解析器。（我是 DMS 背后的人）。

# c++ - 以下 c++ 代码返回什么？

> ID：14425458
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:26:21.373
> 
> 标签：c++, types, map, iterator, unordered-map

我有一段代码要理解。但是我迷失了一点。这是代码：

```
typedef unordered_map <string, TimeStampSet *> HIEMap;
typedef set <TimeStamp> TimeStampSet;

struct HostInfo {
    HostActivity *hostActivity;
    HIEMap *hieMapArr;
};

typedef unordered_map <uint32_t, HostInfo *> HostInfoMap;

HIEMap::iterator hieMapIt;

void method(...){
    for (hieMapIt = hostInfoIt -> second -> hieMapArr -> begin();
         hieMapIt != hostInfoIt -> second -> hieMapArr -> end();
         hieMapIt = nextMapIt)
    {
        if (hieMapIt -> second == NULL) {
           //what does *hieMapIt -> second* returns?
        }
    }
} 
```

返回什么`hieMapIt -> second`？我有点迷路了。

这不是所有的代码，还有初始化等等。但我没有把所有的代码都放在这里。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:27:19.027

它将返回一个`TimeStampSet *`. 即 unordered_map (string , TimeStampSet *) "pair" 的第二部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T14:31:56.893

Dereferencing an iterator of a container gives you an object whose type is the `value_type` of the container. For a `map<K, T>` (or `unordered_map`), the `value_type` is `pair<K const, T>`, so that you can use `it->first` and `it->second` to access the key and mapped value of the map element.

So `hostInfoIt->second` is a `HostInfo *`, `...->hieMapArr` is a `HIEMap *`, and `hieMapIt` is a `HIEMap::iterator`. Thus `hieMapIt->second` is a `TimeStampSet *`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:27:38.683

一个[`std::unordered_map<K,V>`](http://en.cppreference.com/w/cpp/container/unordered_map)contains [`std::pair<const K,V>`](http://en.cppreference.com/w/cpp/utility/pair)，因此将迭代器取消引用到此类 map 元素的元素可为您提供其中一个的句柄。And`std::pair<const K,V>::second`是 a `V`，在您的情况下是指向`TimeStampSet`

# string - strcat 在运算符重载中无法正常工作

> ID：14425468
> 
> 赞同：0
> 
> 时间：2013-01-20T14:27:23.133
> 
> 标签：string, visual-c++, operator-overloading, strcat

我正在练习运算符重载，但我无法正确完成。谁能告诉我我在这里做错了什么。

我不明白为什么`strcat`不连接两个字符串。

```
#include<iostream>
#include<string>

using namespace std;

class Strings
{
    char str[20];
public:
    Strings()
    {
        str[0] = '\0';
    }
    Strings(char *p)
    {
        strcpy_s(str,p);
    }

    void display()
    {
        cout<<str<<endl;
    }
    Strings operator+(Strings &);
};

Strings Strings::operator+(Strings &k)
{
    Strings temp;

    strcpy_s(temp.str,this->str);
    strcat_s(temp.str,k.str);
    return temp;

}

int main()
{
    Strings s1("Hello, "), s2("How are you?"),s3;
    s1.display();
    s2.display();
    s3.display();
    s3 = s1 + s2;
    s2.display();
} 
```

输出是：

```
Hello,
How are you?

How are you? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:31:39.260

You aren't displaying the concatenated string; change the last line from:

```
s2.display(); 
```

to:

```
s3.display(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:30:45.363

Because `s3` is a `null` string when you are trying to disply `s3`

Please look at your question yourself once again

```
 Strings s1("Hello, "), s2("How are you?"),s3;
    s1.display();    // Hello,
    s2.display();    // How are you?
    s3.display();    // '\0'
    s3 = s1 + s2;
    s2.display();    //How are you?

    s3.display();   //Add this line and test your code 
```

# java - 使用 getAccuracy 错误

> ID：14425470
> 
> 赞同：1
> 
> 时间：2013-01-20T14:27:34.637
> 
> 标签：java, android, geolocation

我正在构建一个基于位置的应用程序，我想避免这种位置：“特拉维夫，特拉维夫，以色列”，这是非常不准确的。

在使用位置之前，我使用以下条件：

```
if(!(this.location == null || this.location.getAccuracy() > 700))
    // use the location 
```

但我不断得到这个位置（特拉维夫，特拉维夫，以色列），而特拉维夫还不够小，无法通过这个条件。

我错过了什么？怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:42:35.100

您尚未指定涉及的几个参数，但我会尝试一下。

确切的`Location`参数取决于那个特定的来源`Location`，即它是如何获得的以及使用什么地理位置来源。例如：

*   如果您使用 GPS，`Location`则将具有可靠的`accuracy`值。
*   如果您使用蜂窝网络无线电台 (BTS)，您将收到的准确度将仅限于全球 BTS 的数据库、它们的位置和范围。
*   如果您使用 Wi-Fi 网络及其报告的信号强度，准确性将取决于 Wi-Fi 网络数据库的质量。不幸的是，这样的数据库维护和创建并不便宜。例如，谷歌购买此类数据库并使用谷歌街景汽车扫描此类网络。
*   如果您使用基于公共 IP 地址的本地化，您的准确性将仅限于城镇，因为这是 IANA IP 地址空间注册表中包含的最准确的信息。此外，它可以通过使用代理服务器来愚弄。

您将从定位服务获得的准确度表示距报告位置的距离（以米为单位），在获得该位置的那一刻，设备可能处于该位置。

因此（如果我正确理解您的问题），我认为您使用的是获取当前设备位置的低准确度方法。您只需切换到`Location`更准确的来源。

另请注意，位置服务使用的位置获取方法（即如上所述用于查找位置的服务）*可能实际上无法提供*返回的准确性`Location`。要理解我的意思，请考虑以下场景及其两个结果 - 请注意，它们都来自基于 Wi-Fi 网络的相同定位方法：

1.  您位于多个 Wi-Fi 网络的范围内。您向定位服务询问设备位置。范围内的所有 Wi-Fi 网络恰好位于位置服务数据库中。因此，定位服务能够以相当准确的方式获取您的位置。
2.  您位于多个 Wi-Fi 网络的范围内。然而，它们中的任何一个都不为定位服务所熟知，因为它们的起源（城镇）是已知的，但它们的确切位置和范围是未知的。在这种情况下，定位服务能够告诉您您所在的国家/城镇，但不知道您的确切位置。反过来，位置服务可以为您提供不准确的位置。

您必须通过测试是否完全可用，为这种情况做好准备。您可以通过发出`Location.hasAccuracy()`. 如果返回值为`false`，*则不能*调用`Location.getAccuracy()`（实际上可以调用，但要注意 - 它会返回`0`！）。所以，你的情况应该更像：

```
if (this.location != null && this.location.hasAccuracy() && this.location.getAccuracy() < 700) {
    // do something
} 
```

# c++ - 安装 Boost 数字绑定

> ID：14425474
> 
> 赞同：2
> 
> 时间：2013-01-20T14:28:00.717
> 
> 标签：c++, boost, numeric

最新版本的 Boost 数字绑定在这里： [http](http://svn.boost.org/svn/boost/sandbox/numeric_bindings/) ://svn.boost.org/svn/boost/sandbox/numeric_bindings/ ？

这些只是头文件吗？所以我不需要像这样编译和“安装”它，只需从我的程序中包含？

另外，我在哪里可以找到如何使用这些的示例或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T09:50:14.230

> 最新版本的 Boost 数字绑定在这里：[http](http://svn.boost.org/svn/boost/sandbox/numeric_bindings/) ://svn.boost.org/svn/boost/sandbox/numeric_bindings/ ？

我希望如此，至少它是 boost 从 svn 切换到 git 之前的最新版本。David Bellot 应该知道，可以通过[http://lists.boost.org/mailman/listinfo.cgi/ublas](http://lists.boost.org/mailman/listinfo.cgi/ublas)联系到他。

> 这些只是头文件吗？所以我不需要像这样编译和“安装”它，只需从我的程序中包含？

是和不是。绑定只是头文件，但您仍然需要将您的程序与 lapack（或 blas、atlas、umfpack、mumps）链接。

> 另外，我在哪里可以找到如何使用这些的示例或教程？

一些文档可以在[http://svn.boost.org/svn/boost/sandbox/numeric_bindings/libs/numeric/bindings/doc/html/index.html找到](http://svn.boost.org/svn/boost/sandbox/numeric_bindings/libs/numeric/bindings/doc/html/index.html)

可以在[http://svn.boost.org/svn/boost/sandbox/numeric_bindings/libs/numeric/bindings/lapack/test/找到一些示例](http://svn.boost.org/svn/boost/sandbox/numeric_bindings/libs/numeric/bindings/lapack/test/)

一般来说，如果您尝试使用绑定（或 ublas）并遇到问题，http://lists.boost.org/mailman/listinfo.cgi/ublas 上的人似乎会有所帮助[。](http://lists.boost.org/mailman/listinfo.cgi/ublas)但我不确定他们中是否有人在 stackoverflow 上检查遇到问题的潜在用户。

# error-handling - 让 vanilla php 显示错误而不是空白页面，就像 ROR 一样

> ID：14425475
> 
> 赞同：0
> 
> 时间：2013-01-20T14:28:11.627
> 
> 标签：error-handling, compiler-errors, php

> **可能重复：**
> [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)

我目前正在学习 php，同时也在学习一点 ruby​​ on rails，我注意到我真正喜欢的关于 ruby​​ on rails 的一件事是当页面上出现错误时，它会显示一个错误页面，指向你的方向出了什么问题..就像下面的图片

![ruby on rails 错误](../Images/f36a9271fac1dbcabbb17f1434595cb8.png)

但是当我在 php 中遇到错误时，我只会得到一个空白页，这意味着我必须通读每一行代码以尝试找出问题所在，因为我刚刚开始我的大部分错误往往是小的语法问题，这修复起来相对容易，但如果你错过了 `;`一条线的末端，就很难找到。

我可以`<head>`在开发过程中添加一条线来向我展示这些错误吗？类似的东西`<?php show_errors ?>`

或者是否有替代方案，目前我正在使用 sublime text 2、Mamp 和 Firefox 工作。是否有任何设置可以打开以允许我查看错误，或者 sublime text 2 中的代码验证或mamp 或 firefox 中的设置会显示错误页面而不是空白页面？

如果我要使用一个框架，它们中的任何一个都内置了错误警报吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:45:29.943

要解决空白页问题，您必须重新配置 PHP

```
display_errors = on
display_startup_errors = on 
```

将它们设置在脚本之外（即不使用`ini_set()`）很重要，否则解析错误仍会导致空白页。[有关详细信息，请参阅文档](http://php.net/manual/en/configuration.changes.php)。

然后，在您的脚本之上，确保显示每种错误：

```
error_reporting(-1) 
```

对于更好的错误消息，您可以安装[XDebug](http://xdebug.org/)（它是一个常见的扩展，而不是一个框架，并且不会以任何方式影响您的代码）。

# java - IntelliJ 拒绝添加自定义组件

> ID：14425476
> 
> 赞同：6
> 
> 时间：2013-01-20T14:28:19.273
> 
> 标签：java, swing, intellij-idea

我的问题如下：假设我们有以下文件：

```
package p;
import javax.swing.*;
public class test extends JPanel {
  test(){
    super(true);
  }
} 
```

我保存文件并编译它。现在，在 IntelliJ 中，我打开一个表单并尝试添加`test`。它不会工作！我单击“非调色板组件”，单击我的表单并在打开的对话框中输入`p.test`我的类名（IntelliJ 甚至在此处提供名称补全）并选中“自动创建绑定”。单击确定后，没有任何反应。但是 - 如果我将“javax.swing.JButton”作为类名，它就可以工作。这太荒谬了。我没有看到我做错了什么？测试是否必须实现或覆盖某个功能？我必须修改路径吗？还是我应该把我的电脑踢出窗外？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T09:20:20.707

> java.lang.UnsupportedClassVersionError：测试：不支持的major.minor版本51.0

问题是您将项目语言级别设置为 1.7 并使用 JDK 1.7 来构建它。IntelliJ IDEA 在您的系统上运行在 JDK 1.6 下，无法加载使用 1.7 语言级别编译的自定义组件类。

此问题的可能解决方案：

*   将项目/模块 JDK 更改为 1.6
*   在 IDEA 12 中，可以为[每个模块配置字节码版本](http://img109.imageshack.us/img109/2950/20130122131649.png)，将其设置为 1.6
*   在**附加命令行参数**字段中指定以下选项：`-source 1.6 -target 1.6`
*   [在 JDK 1.7 下运行 IDEA](http://blogs.jetbrains.com/idea/2006/08/running-mustang/)（适用于 Windows 和 Linux，不推荐在 Mac 上使用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T18:10:55.453

您是否正在运行最新版本的 IntelliJ IDEA？您描述的操作适用于 11.1.5 和 12.0.2（IDEA 11 和 12 的最新版本）。早期版本中可能存在错误。此外，由于`test`是“JPanel”，您是否在“添加非=调色板组件”上选择“是容器”选项。对于您显示的简单示例，如果未选择此选项，则当未在“UI 设计器”工具窗口中选择它时，我在 GUI 设计器中看不到任何*可见的东西。*但是您提到您甚至在控件层次结构中都看不到它。

如果您使用的是最新版本，我建议您检查日志（*Help > Reveal Log*）以查看其中是否存在可能对问题有所了解的错误。

最后，您可以尝试使缓存无效并重新启动。（*文件 > 使缓存无效*）。可能存在一些导致问题的损坏。

*我会将此作为对您问题的评论添加，但我没有足够的声誉点来这样做。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:10:57.740

确保编译自定义组件，然后单击`Reload Custom Components`工具栏上的按钮。这为我解决了这个问题。

# php - 无法让 PHP_SELF 发布复选框

> ID：14425478
> 
> 赞同：1
> 
> 时间：2013-01-20T14:28:28.600
> 
> 标签：php, checkbox, self

我试图让我的复选框在页面底部输出“Korting is ... %”，具体取决于选中哪个复选框，例如选中第 2 个和第 3 个框会输出“Korting is 15%”但我不能似乎让它工作。有人可以帮我提前谢谢你

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>XXL Computer winkel</title>
</head>
<body>
<h3>php lab 04</h3>

<table border=0 cellpadding=0 cellspacing=0 width=100%>
<form name="orderform" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<tr> 
<td> 
Korting:<br />
<input type="checkbox" name="korting" value="15" /> Student 15% <br/>
<input type="checkbox" name="korting" value= "10"  /> Senior 10% <br/>
<input type="checkbox" name="korting" value= "5" /> klant 5% <br/> 
<hr/>
<img src="images/Lab4/1.jpg" width="200px" height="200px" alt=" "/>
<td/>
</tr>     
<tr> 
<td>
Toshiba Satellite A100-510 basisprijs 999.99
</td>
</tr>

<tr>     
<td><!-- Shopping cart begin-->
<input type="hidden" name="toshibaproduct" value="001"/>
<input type="hidden" name="toshibamerk" value="Toshiba"/>
<input type="hidden" name="toshibamodel" value="Sattelite A100-510"/>
Aantaal: <input type="text" size=2 maxlenght=3 name="toshibaaantal" value="0"/>
<input type="hidden" name="toshibaprijs" value="999.99"/>

<input type="image" src="images/Lab4/2.jpg" border=0 value="bestellen"/>
<hr/>
</td><!--Shopping Cart END -->
</tr>
</form>
</table> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:31:51.630

You need to use a name ending in `[]` such as `name="korting[]"`. Then you can use `$_POST['korting']` which will be an array containig the values of the checked checkboxes.

Note that `$_POST['korting']` will not be set at all if no checkbox is checked!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:33:07.410

*   ~~如果您想选择一个选项，请使用`radio`而不是`checkbox`~~
*   不要使用 PHP_SELF，这是一个[安全漏洞](http://phpsecurity.wordpress.com/2007/11/03/the-danger-of-php_self/)。反而：`<form action="">`
*   ~~访问值`$_POST['korting']`~~

总结所有值，使您的表单如下所示：

```
<input type="checkbox" name="korting[]" value="15" /> Student 15% <br/>
<input type="checkbox" name="korting[]" value= "10"  /> Senior 10% <br/>
<input type="checkbox" name="korting[]" value= "5" /> klant 5% <br/> 
```

和这样的处理：

```
<?php
$korting = 0;
if (isset($_POST['korting']) && is_array($_POST['korting'])) {
  $korting = array_sum($_POST['korting']);
}
echo 'Korting is ' . $korting . '%';
?> 
```

# c# - 使用 WPF 如何在某些条件下使用绑定对图像进行灰度化

> ID：14425490
> 
> 赞同：1
> 
> 时间：2013-01-20T14:29:48.690
> 
> 标签：c#, wpf, data-binding, binding, converter

该应用程序是一个信使，我为此目的使用 microsoft lync 客户端。在其中一个上下文中，我在列表视图中获取联系人（这是 LyncClient 的一个对象，具有名称、图像、可用性等属性）并将它们加载到定义如下的数据模板中：

```
<DataTemplate x:Key="ContactsTemplate">
        <Grid HorizontalAlignment="Left" Width="150" Height="150" Margin="10">
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
            </Border>
            <StackPanel VerticalAlignment="Bottom" Background="{Binding Availability, Converter={StaticResource AvailabilityToPresenceColor}}" Opacity="0.75">
                <TextBlock Text="{Binding Name}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="20" Margin="15,0,15,15"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

它有一个 Grid 容器，其中我们有一个图像和文本块控件，它们显示联系人的图像和名称，如下所示，stackpanel 的背景绑定到 lync**联系人**对象的可用性属性，并使用转换器将可用性状态映射到颜色，例如当联系人忙时，stackpanel 的背景将变为红色。

我也想对图像控件产生类似的效果。

我是绑定新手，所以完全迷失在这个绑定概念中。

我的想法是：图像有一个效果事件处理程序，所以我想为此目的使用它并使用

在某些情况下在转换器内部我想使用一些我需要获取图像源的代码，但是当我们通过绑定获取图像源时

请建议我你的想法。

* * *

正如您在代码中看到的那样， `<Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title} effect="{Binding Availability, Converter={StaticResource AvailabilityToPresenceColor}}"/>` 我只是将图像控件的源与 ***Contact****对象的**属性***绑定。我想将 Contact 对象的可用性属性发送到 IValueConverter 的 Convert 方法，或者如果可能的话，我想将图像与整个**Contact**对象绑定……或者如果有其他方式，请告诉我。**

**#####################***评论附件***

```
var bitmap = new BitmapImage();
    bitmap.BeginInit();
    MemoreyStream ms=new MemoryStream(_image);
    bitmap.StreamSource = stream;
    bitmap.CacheOption = BitmapCacheOption.OnLoad;
    bitmap.EndInit();
 var grayBitmapSource = new FormatConvertedBitmap();
    grayBitmapSource.BeginInit();
    grayBitmapSource.Source = ms;
    grayBitmapSource.DestinationFormat = PixelFormats.Gray32Float;
    grayBitmapSource.EndInit();
..... 
```

现在问题是我有 grayBitmapSource，它的类型是 FormatConvertedBitmap，我不知道如何再次将其转换为 Stream。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:31:28.523

我建议看看这篇关于 WPF 中图像处理的文章：http: [//www.codeproject.com/Articles/237226/Image-Processing-is-done-using-WPF](http://www.codeproject.com/Articles/237226/Image-Processing-is-done-using-WPF)

使用图像处理逻辑，您可以为每个可用性状态创建不同的图片。您可以使用 IValueConverter，但这意味着您必须在每次可用性状态更改时重新处理图像。相反，您可以简单地更改您的 Contact 类，以便在您更改 Availability 属性时，它会自动向 WPF 发出信号以获取 Image 属性引用的图片：

```
public class Contact : INotifyPropertyChanged
{
    // EDIT: INotifyPropertyChanged implementation.
    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    // EDIT: INotifyPropertyChanged implementation.

    private ContactAvailability _Availability;

    public ContactAvailability Availability
    {
        get { return _Availability; }
        set
        {
            _Availability = value;
            NotifyPropertyChanged("Availability");
            NotifyPropertyChanged("Image");
        }
    }

    public BitmapImage _AvailablePicture;
    public BitmapImage _BusyPicture;

    public BitmapImage Image
    {
        get
        {
            switch (this.Availability)
            {
                case ContactAvailability.Available:
                    return this._AvailablePicture;
                case ContactAvailability.Busy:
                    return this._BusyPicture;
                default:
                    throw new NotImplementedException();
            }
        }
    }
} 
```

**编辑**（评论太长）：

我添加了实现`INotifyPropertyChanged`接口的代码。这在 WPF 中很常见，所以我认为您已经熟悉这种方法。

在您的示例中，`Image.Source`是`DepencyProperty`. 当一个类实现`INotifyPropertyChanged`时，您可以告诉 WPF 它的某个属性已更改。`NotifyPropertyChanged`您只需使用更改的属性名称引发事件。这会通知 WPF 更新所有`DepencyProperty`绑定到给定属性的 s。

> 就图像处理而言，这与绑定有何不同。我的意思是每次可用性发生变化时，图像处理代码也应该以这种方式执行。我是对还是错@bouvierr？

不。在这种情况下，我们将只执行固定次数的图像处理来为每个可用性状态创建图片（在我的示例中，每个联系人两次）。例如，我们可以在应用程序启动期间创建所有图片（3 个联系人 x 2 状态 = 6 个图片）并将它们存储在每个联系人的`_AvailablePicture`和`_BusyPicture`字段中。

这是重要的部分：当我们设置`Availability`属性时，我们也调用`NotifyPropertyChanged("Image")`. 这将强制 WPF 更新 ，`Image.Source` `DepencyProperty`因为它绑定到`Contact.Image`. 这将返回一个不同的图片，因为`Availability`已经改变了。

在我的示例中，我决定存储图片。这可能不是您的最佳解决方案。它消耗更多内存，但节省了处理时间。如果您希望在每次可用性状态更改时重新处理图像，您应该将`Contact.Image`属性更改为：

```
 public BitmapImage Image
    {
        get
        {
            switch (this.Availability)
            {
                case ContactAvailability.Available:
                    return this._AvailablePicture;
                case ContactAvailability.Busy:
                    return GetImageWithColorFilter(this._AvailablePicture, Colors.Red);
                default:
                    throw new NotImplementedException();
            }
        }
    } 
```**

# ajax - 如果托管 bean 未更新，如何在事件 onblur 上使用 ajax 验证字段

> ID：14425491
> 
> 赞同：0
> 
> 时间：2013-01-20T14:29:51.080
> 
> 标签：ajax, jsf-2, primefaces

通过失去焦点字段 (id="nome") 方法 (listener="#{loginMb.criticaCamposTela}") 被执行，但属性值 (value="#{loginMb.usuario.nome}") 没有被执行在托管 bean 中更新，值为 null。它不应该与输入的值一起验证吗？为什么为空？

按照代码。

页：

```
<h:outputText value="Nome:" />
<p:inputText id="nome" value="#{loginMb.usuario.nome}"
    required="true" size="20" requiredMessage="Informação do nome é obrigatório.">
<p:ajax event="blur" update="idMsgNome, nome" partialSubmit="treu" process="@this"  
    immediate="true" listener="#{loginMb.criticaCamposTela}"></p:ajax>
</p:inputText>
<h:outputText id="idMsgNome" value="#{loginMb.criticaNome.value}" /> 
```

ManagedBean LoginMb：

```
public void criticaCamposTela(AjaxBehaviorEvent actionEvent) {
 String idComponenteTela = actionEvent.getComponent().getId();

if (idComponenteTela.equals("nome")) {

if ((this.usuario.getNome() == null)
  || ((this.usuario.getNome() != null) && (this.usuario
  .getNome().trim().length() == 0))) {

    this.criticaNome.setValue(new String(
       "O nome é um campo obrigatório."));
} else {
   this.criticaNome.setValue(new String(""));
}} 
```

网页.xml：

```
<context-param>
<param-name>primefaces.SUBMIT</param-name>
<param-value>partial</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:43:42.190

尝试`immediate="true"`从`p:ajax`. 您的 ajax 在应用请求阶段处理，这就是您的字段未初始化的原因。

# javascript - AngularJS - ngRepeat with multiple object types

> ID：14425497
> 
> 赞同：23
> 
> 时间：2013-01-20T14:30:23.853
> 
> 标签：javascript, dom, polymorphism, angularjs, rendering

I have a list of items. An item can be a number of things, let's say the list is something like so :

```
[userObject , vehicleObject , userObject , animalObject , animalObject] 
```

Now I want to render the list with ngRepeat directive that will use a template according to the type of the object (Polymorphic rendering). can this be done?

maybe something like (**ng-use** is an **hypothetically** directive):

```
<ul>
    <li ng-repeat="item in items">
       <img ng-use="item.type == 'user'" ng-src="item.src">
       <a ng-use="item.type == 'vehicle'">{{item.link}}</a>
       <span ng-use="item.type == 'animal'">{{item.name}}</span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-20T14:34:58.867

```
<ul>
    <li ng-repeat="item in items" ng-switch="item.type">
       <img ng-switch-when="user" ng-src="item.src">
       <a ng-switch-when="vehicle">{{item.link}}</a>
       <span ng-switch-when="animal">{{item.name}}</span>
    </li>
</ul> 
```

API 参考：
[http ://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T19:46:38.777

尽管这不使用 ng-switch，但它确实解决了没有*类型*字段的问题，@DotNetHaggis 指出了这一点。

```
<div ng-repeat="field in fields">
    <div ng-if="field.user !== undefined">user info</div>
    <div ng-if="field.vehicle !== undefined">vehicle info</div>
    <div ng-if="field.animal !== undefined">animal info</div>
</div> 
```

# jquery - Checking if user is already logged in to webs site

> ID：14425499
> 
> 赞同：-2
> 
> 时间：2013-01-20T14:30:30.683
> 
> 标签：jquery, events, load

When a user enters my website, I want to redirect him to his page before the main page is fully loaded. My only problem is what jquery event should I use? Right now is use `$(document).ready`, but this is silly as I have to wait for nothing if the user has already signed in.

So, what event do I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:11:09.297

您应该使用`$(document).ready`依赖于正在加载的 DOM 的代码——即读取或操作页面上的对象的任何代码。

只要加载了任何其他依赖项，您就可以在页面正文中包含任何其他内容以执行而不将其包装在事件中。

**但是，在您的情况下**-您想在页面完全加载之前重定向某人-到目前为止，最好的用户体验将是进行服务器端重定向以将用户发送到他们的个性化页面-甚至不要渲染第一页，当然不要在页面加载中途使用 JavaScript 将它们反弹到不同的页面。

# entity-framework - EF 5.0 设置列等于一个事务中另一列的默认（计算）值

> ID：14425501
> 
> 赞同：0
> 
> 时间：2013-01-20T14:30:44.897
> 
> 标签：entity-framework

我有一个具有标识列的表，而另一列需要基于计算的标识列具有其值。

我的 EF 代码如下所示：

```
var context = new DBEntities();
var newTableRow = new TableRow();
newTableRow.Column1 = newTableRow.ComputedColumn;
context.TableRows.Add(newTableRow);
context.SaveChanges(); 
```

如果 ComputedColumn 是 IDENTITY 并且 Column1 是可为空的 varchar(50) 我希望 Column1 的值与 ComputedColumn 相同，但它为空。我什至试过这个：

```
var context = new DBEntities();
var newTableRow = new TableRow();
context.TableRows.Add(newTableRow);
context.SaveChanges();
newTableRow.Column1 = newTableRow.ComputedColumn;
context.SaveChanges(); 
```

和

```
var context = new DBEntities();
var newTableRow = new TableRow();
context.TableRows.Add(newTableRow);
context.SaveChanges();
var getTableRow = context.TableRows.Single(r => r.ComputedColumn == newTableRow.ComputedColumn);
getTableRow.Column1 = newTableRow.ComputedColumn.ToString();
context.SaveChanges(); 
```

请记住，这是更大交易的一部分。我不想做的是完成交易，然后在单独的交易中进行另一次更新。我想把所有东西都放在一笔交易中。这之前一直在插入过程中工作。

谢谢，

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:38:51.443

`ComputedColumn`如果有，您的第二个和第三个示例应该可以工作`DatabaseGeneratedOption.Identity`。但是他们有单独的交易，这是你不想要的。

你的第一个例子行不通。当一列有时`DatabaseGeneratedOption.Identity`，EF 在执行时读回标识值`SaveChanges`。它不知道您可能试图传达的任何特殊指令

```
newTableRow.Column1 = newTableRow.ComputedColumn; 
```

至于EF，它只是一个空值的赋值。

也许最好的选择是将[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)添加到您的数据库表中。你会用一块石头杀死两只鸟：

*   它是事务性的，因为计算列只是重新显示标识列
*   您可以防止冗余和可能的值冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:10:16.250

我刚刚查看了模型，你说得对，有一个我没有注意到的变化。Column1 已设置为计算值。删除该值应该可以解决问题。

# javascript - How to disable swipe.js carousel

> ID：14425503
> 
> 赞同：4
> 
> 时间：2013-01-20T14:30:50.230
> 
> 标签：javascript, jquery, responsive-design, swipe

I'm trying to responsively convert a list of images into a carousel. I am using the swipe.js (swipejs.com) libary as it's performs perfectly.

I want the carousel to be initiated when the body width reaches less than 540px but reversly if the window is resized to a body width that is greater than 540px this is reverted.

```
$(window).resize(function() {
    var bodyWidth = $('body').width();
    if(bodyWidth < 540){
        loadCarousel();
    }else if(bodyWidth > 540) {
        unLoadCarousel();
    }
});

function loadCarousel() {
        window.deviceSwipe = new Swipe(
            document.getElementById('device-slider')
        );
}

function unLoadCarousel() {

} 
```

Now this is close to how I want it (I believe), my real question is, how do I unload(disable?) this carousel and remove the inline styles swipe.js includes?

I can use the following line to remove the styles but this seems like a bit of a bodge job.

```
$('#slider-container li, #slider-container ul, #device-slider').attr('style', '') 
```

This also doesn't stop swipe.js from just re-applying the styles on window resize (even if the bodyWidth is greater than 540px for some reason).

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:29:07.103

您可以使用名为 kill 的方法作为 deviceSwipe.kill()

# arrays - Variation of permutation of an array containing Integers

> ID：14425504
> 
> 赞同：1
> 
> 时间：2013-01-20T14:30:54.740
> 
> 标签：arrays, algorithm, data-structures, permutation

Given an array of intergers, write a program to print all the permutations of the numbers in the array. The output should be sorted in a non-increasing order.

For example for the array `{12, 4, 66, 8, 9}`, the output should be:

```
9866412
9866124
9846612
....
....
1246689 
```

I thought of generating all permutations at the same time inserting them in a `BST`, then performing reverse inorder on `BST`. This seems highly inefficient, as I'm storing the permutations, can we do better ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:04:30.707

首先使用数字对数字进行排序（也许将它们转换为字符串）。例如，9 大于 11。您可以为此实现一个简单的插入排序。
所以现在你有一个以这种方式排序的数字列表（比如说 n1、n2、n3、n4）。
使用此列表，您可以轻松获得所有已排序的排列，合并列表中的元素并在生成过程中交换最后一个。
即：n1n2n3n4、n1n2n4n3、n1n3n2n4……等等。

例子 ：
4,11,76,100 100,11,4,76
10011476,10011764,10041176
...

`k*n^2``k`数字的最长大小（示例中为 3，由数字 100 给出），因为如果有相似的数字，您需要比较它们的所有数字（如 10000 和 100001）。然后你只需要生成所有排列，这需要`n!`. 最终的时间复杂度是`O(n!)`，不需要额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:43:15.377

c++ STL：

vector arr = .. sort(arr.begin(),arr.end())
do
{
// 在这里处理你的数据
}while(next_permutation(arr.begin(),arr.end());

这在 O(2^n) 中为你做你想做的事。在内部，它通过有效的方式交换来实现。如果您需要进一步的帮助，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:51:16.633

如果您使用的是 Python，模块 itertools 有一个解决方案，请参见[此处](http://docs.python.org/2/library/itertools.html#itertools.permutations)。

如果您可以访问 Knuth 的*The Art of Computer Programming*第 4 卷，第 2 册，它有许多解决方案，包括递归和迭代。

此外，RosettaCode 有多种语言的解决方案，请参见[此处](http://rosettacode.org/wiki/Permutations)。Fortran 77 解决方案是迭代的，您可以对其进行调整以满足您的需求，或将其翻译成任何语言。它以字典升序给出解决方案。

现在，如果我不明白您的要求，您需要按降序排列的解决方案，考虑连接数字字符串的顺序。可能很难直接实现，因为例如（100,99,999）谁“小于”（99,100,999），这将小于（999,99,100）：“10099999”<“99100999”<“99999100”。您不能简单地使用数字列表的字典顺序。但是，很容易按字典顺序生成排列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T19:02:47.843

出于推理，我会递归地这样做：

*   如果数组的长度为 1，则输出一个排列（数组本身）
*   如果有两个或更多元素，则一次选择一个元素（首先选择最大的元素，然后再选择较小的元素，直到找到最小的元素）。对于选择的每个元素`a`，您执行以下操作：
    *   `a`从数组中取出，得到一个比原数组少一个元素的数组。*递归*生成这个新获得的数组的所有排列，并在*每个*递归生成的排列`a`前面添加。

 *这种方法基本上对应于您将排列存储在搜索树（但是，不是二进制树）中并枚举它们的想法。尽管如此，它还是使用递归堆栈来执行此操作，并且不存储整个树。

另一种方法可能使用[阶乘数字系统](http://en.wikipedia.org/wiki/Factorial_number_system)。这可用于正确枚举排列。因此，您可以“仅倒数并重建相应的排列”。*

# android - why View class object showing null?

> ID：14425508
> 
> 赞同：1
> 
> 时间：2013-01-20T14:31:12.303
> 
> 标签：android

I have make a view class like this-

```
public class PuzzleView extends View {
public PuzzleView(Context context, AttributeSet attrs)
{
    super(context, attrs);
    bmap = BitmapFactory.decodeResource(getResources(), R.drawable.da);
    this.game = (Game) context;
    setFocusable(true);
    setFocusableInTouchMode(true);

    // ...
    setId(ID);
    // TODO Auto-generated constructor stub
}
Bitmap bmap;

private static final String TAG = "Sudoku";

private static final String SELX = "selX";
private static final String SELY = "selY";
private static final String VIEW_STATE = "viewState";
private static final int ID = 42;

private float width;

// width of one tile
private float height;// height of one tile
private int selX; // X index of selection
private int selY; // Y index of selection
private final Rect selRect = new Rect();

private final Game game;

@Override
protected Parcelable onSaveInstanceState() {
    Parcelable p = super.onSaveInstanceState();
    Log.d(TAG, "onSaveInstanceState");
    Bundle bundle = new Bundle();
    bundle.putInt(SELX, selX);
    bundle.putInt(SELY, selY);
    bundle.putParcelable(VIEW_STATE, p);
    return bundle;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    Log.d(TAG, "onRestoreInstanceState");
    Bundle bundle = (Bundle) state;
    select(bundle.getInt(SELX), bundle.getInt(SELY));
    super.onRestoreInstanceState(bundle.getParcelable(VIEW_STATE));
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    width = w / 9f;
    height = h / 9f;
    getRect(selX, selY, selRect);
    Log.d(TAG, "onSizeChanged: width " + width + ", height " + height);
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint();
    canvas.drawBitmap(bmap, 0, 0, paint);
    // Draw the background...
    Paint background = new Paint();
    background.setColor(getResources().getColor(R.color.puzzle_background));
    canvas.drawRect(0, 0, getWidth(), getHeight(), background);

    // Draw the board...

    // Define colors for the grid lines
    Paint dark = new Paint();
    dark.setColor(getResources().getColor(R.color.puzzle_dark));

    Paint hilite = new Paint();
    hilite.setColor(getResources().getColor(R.color.puzzle_hilite));

    Paint light = new Paint();
    light.setColor(getResources().getColor(R.color.puzzle_light));

    // Draw the minor grid lines
    for (int i = 0; i < 9; i++) {
        canvas.drawLine(0, i * height, getWidth(), i * height, light);
        canvas.drawLine(0, i * height + 1, getWidth(), i * height + 1,
                hilite);
        canvas.drawLine(i * width, 0, i * width, getHeight(), light);
        canvas.drawLine(i * width + 1, 0, i * width + 1, getHeight(),
                hilite);
    }

    // Draw the major grid lines
    for (int i = 0; i < 9; i++) {
        if (i % 3 != 0)
            continue;
        canvas.drawLine(0, i * height, getWidth(), i * height, dark);
        canvas.drawLine(0, i * height + 1, getWidth(), i * height + 1,
                hilite);
        canvas.drawLine(i * width, 0, i * width, getHeight(), dark);
        canvas.drawLine(i * width + 1, 0, i * width + 1, getHeight(),
                hilite);
    }

    // Draw the numbers...
    // Define color and style for numbers
    Paint foreground = new Paint(Paint.ANTI_ALIAS_FLAG);
    foreground.setColor(getResources().getColor(R.color.puzzle_foreground));
    foreground.setStyle(Style.FILL);
    foreground.setTextSize(height * 0.75f);
    foreground.setTextScaleX(width / height);
    foreground.setTextAlign(Paint.Align.CENTER);

    // Draw the number in the center of the tile
    FontMetrics fm = foreground.getFontMetrics();
    // Centering in X: use alignment (and X at midpoint)
    float x = width / 2;
    // Centering in Y: measure ascent/descent first
    float y = height / 2 - (fm.ascent + fm.descent) / 2;
    for (int i = 0; i < 9; i++) {
        for (int j = 0; j < 9; j++) {
            canvas.drawText(this.game.getTileString(i, j), i * width + x, j
                    * height + y, foreground);
        }
    }

    if (Prefs.getHints(getContext())) {
        // Draw the hints...

        // Pick a hint color based on #moves left
        Paint hint = new Paint();
        int c[] = { getResources().getColor(R.color.puzzle_hint_0),
                getResources().getColor(R.color.puzzle_hint_1),
                getResources().getColor(R.color.puzzle_hint_2), };
        Rect r = new Rect();
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                int movesleft = 9 - game.getUsedTiles(i, j).length;
                if (movesleft < c.length) {
                    getRect(i, j, r);
                    hint.setColor(c[movesleft]);
                    canvas.drawRect(r, hint);
                }
            }
        }

    }

    // Draw the selection...
    Log.d(TAG, "selRect=" + selRect);
    Paint selected = new Paint();
    selected.setColor(getResources().getColor(R.color.puzzle_selected));
    canvas.drawRect(selRect, selected);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() != MotionEvent.ACTION_DOWN)
        return super.onTouchEvent(event);

    select((int) (event.getX() / width), (int) (event.getY() / height));
    game.showKeypadOrError(selX, selY);
    Log.d(TAG, "onTouchEvent: x " + selX + ", y " + selY);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Log.d(TAG, "onKeyDown: keycode=" + keyCode + ", event=" + event);
    switch (keyCode) {
    case KeyEvent.KEYCODE_DPAD_UP:
        select(selX, selY - 1);
        break;
    case KeyEvent.KEYCODE_DPAD_DOWN:
        select(selX, selY + 1);
        break;
    case KeyEvent.KEYCODE_DPAD_LEFT:
        select(selX - 1, selY);
        break;
    case KeyEvent.KEYCODE_DPAD_RIGHT:
        select(selX + 1, selY);
        break;
    case KeyEvent.KEYCODE_0:
    case KeyEvent.KEYCODE_SPACE:
        setSelectedTile(0);
        break;
    case KeyEvent.KEYCODE_1:
        setSelectedTile(1);
        break;
    case KeyEvent.KEYCODE_2:
        setSelectedTile(2);
        break;
    case KeyEvent.KEYCODE_3:
        setSelectedTile(3);
        break;
    case KeyEvent.KEYCODE_4:
        setSelectedTile(4);
        break;
    case KeyEvent.KEYCODE_5:
        setSelectedTile(5);
        break;
    case KeyEvent.KEYCODE_6:
        setSelectedTile(6);
        break;
    case KeyEvent.KEYCODE_7:
        setSelectedTile(7);
        break;
    case KeyEvent.KEYCODE_8:
        setSelectedTile(8);
        break;
    case KeyEvent.KEYCODE_9:
        setSelectedTile(9);
        break;
    case KeyEvent.KEYCODE_ENTER:
    case KeyEvent.KEYCODE_DPAD_CENTER:
        game.showKeypadOrError(selX, selY);
        break;
    default:
        return super.onKeyDown(keyCode, event);
    }
    return true;
}

public void setSelectedTile(int tile) {
    if (game.setTileIfValid(selX, selY, tile)) {
        invalidate();// may change hints
    } else {
        // Number is not valid for this tile
        // Log.d(TAG, "setSelectedTile: invalid: " + tile);
        // startAnimation(AnimationUtils.loadAnimation(game,
        // R.anim.shake));
    }
}

private void select(int x, int y) {
    invalidate(selRect);
    selX = Math.min(Math.max(x, 0), 8);
    selY = Math.min(Math.max(y, 0), 8);
    getRect(selX, selY, selRect);
    invalidate(selRect);
}

private void getRect(int x, int y, Rect rect) {
    rect.set((int) (x * width), (int) (y * height),
            (int) (x * width + width), (int) (y * height + height));
} 
```

}

I have make xml of this view like this:-

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/mainlayout"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" 
      >
     <org.example.sudoku.PuzzleView
      android:id="@+id/puzzleView"
      android:layout_width="fill_parent"
      android:layout_height="300dp"
      android:layout_centerHorizontal="true"
      android:layout_alignParentTop="true"
      android:layout_marginLeft="10dp"
      android:layout_marginRight="10dp"
    />

</RelativeLayout> 
```

I use this xml in my activity its showing good but when I want to fill cell by dialog occur null pointer. code is as:-

```
public class Game extends Activity {
private static final String TAG = "Sudoku";
public static final String KEY_DIFFICULTY = "org.example.sudoku.difficulty";
private static final String PREF_PUZZLE = "puzzle";
public static final int DIFFICULTY_EASY = 0;
public static final int DIFFICULTY_MEDIUM = 1;
public static final int DIFFICULTY_HARD = 2;
protected static final int DIFFICULTY_CONTINUE = -1;

private int puzzle[];

private final String easyPuzzle = "360000000004230800000004200"
        + "070460003820000014500013020" + "001900000007048300000000045";
private final String mediumPuzzle = "650000070000506000014000005"
        + "007009000002314700000700800" + "500000630000201000030000097";
private final String hardPuzzle = "009000000080605020501078000"
        + "000000700706040102004000000" + "000720903090301080000000600";

private PuzzleView objpuzzleview;
private ViewGroup objviewgroup;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // puzzleView=new PuzzleView(this);
    Log.d(TAG, "onCreate");
    setContentView(R.layout.gameview);
    objviewgroup =(ViewGroup)findViewById(R.id.mainlayout);
    objpuzzleview = (PuzzleView)findViewById(R.id.puzzleView);
     //objpuzzleview.requestFocus();
     int diff = getIntent().getIntExtra(KEY_DIFFICULTY, DIFFICULTY_EASY);
        puzzle = getPuzzle(diff);
        calculateUsedTiles();
    //
    // ...
    // If the activity is restarted, do a continue next time
    getIntent().putExtra(KEY_DIFFICULTY, DIFFICULTY_CONTINUE);
}

/** Convert an array into a puzzle string */
static private String toPuzzleString(int[] puz) {
    StringBuilder buf = new StringBuilder();
    for (int element : puz) {
        buf.append(element);
    }
    return buf.toString();
}

/** Convert a puzzle string into an array */
static protected int[] fromPuzzleString(String string) {
    int[] puz = new int[string.length()];
    System.out.println(puz);
    for (int i = 0; i < puz.length; i++) {
        puz[i] = string.charAt(i) - '0';
    }
    return puz;
}

/** Return the tile at the given coordinates */
private int getTile(int x, int y) {
    return puzzle[y * 9 + x];
}

/** Change the tile at the given coordinates */
private void setTile(int x, int y, int value) {
    puzzle[y * 9 + x] = value;
}

/** Return a string for the tile at the given coordinates */
protected String getTileString(int x, int y) {
    int v = getTile(x, y);
    if (v == 0)
        return "";
    else
        return String.valueOf(v);
}

/** Change the tile only if it's a valid move */
protected boolean setTileIfValid(int x, int y, int value) {
    int tiles[] = getUsedTiles(x, y);
    if (value != 0) {
        for (int tile : tiles) {
            if (tile == value)
                return false;
        }
    }
    setTile(x, y, value);
    calculateUsedTiles();
    return true;
}

/** Open the keypad if there are any valid moves */
protected void showKeypadOrError(int x, int y) {
    int tiles[] = getUsedTiles(x, y);
    if (tiles.length == 9) {
        Toast toast = Toast.makeText(this, R.string.no_moves_label,
                Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
    } else {
        Log.d(TAG, "showKeypad: used=" + toPuzzleString(tiles));

        ///////////////////////////////////////////Exception is here PuzzeleView=null?why

           **Dialog v = new Keypad(this, tiles, objpuzzleview); 
        v.show();**
    }
}

/** Cache of used tiles */
private final int used[][][] = new int[9][9][];

/** Return cached used tiles visible from the given coords */
protected int[] getUsedTiles(int x, int y) {
    return used[x][y];
}

/** Compute the two dimensional array of used tiles */
private void calculateUsedTiles() {
    for (int x = 0; x < 9; x++) {
        for (int y = 0; y < 9; y++) {
            used[x][y] = calculateUsedTiles(x, y);
            // Log.d(TAG, "used[" + x + "][" + y + "] = "
            // + toPuzzleString(used[x][y]));
        }
    }
}

/** Compute the used tiles visible from this position */
private int[] calculateUsedTiles(int x, int y) {
    int c[] = new int[9];
    // horizontal
    for (int i = 0; i < 9; i++) {
        if (i == x)
            continue;
        int t = getTile(i, y);
        if (t != 0)
            c[t - 1] = t;
    }
    // vertical
    for (int i = 0; i < 9; i++) {
        if (i == y)
            continue;
        int t = getTile(x, i);
        if (t != 0)
            c[t - 1] = t;
    }
    // same cell block
    int startx = (x / 3) * 3;
    int starty = (y / 3) * 3;
    for (int i = startx; i < startx + 3; i++) {
        for (int j = starty; j < starty + 3; j++) {
            if (i == x && j == y)
                continue;
            int t = getTile(i, j);
            if (t != 0)
                c[t - 1] = t;
        }
    }
    // compress
    int nused = 0;
    for (int t : c) {
        if (t != 0)
            nused++;
    }
    int c1[] = new int[nused];
    nused = 0;
    for (int t : c) {
        if (t != 0)
            c1[nused++] = t;
    }
    return c1;
} 
```

} Here is logcat:-

```
 01-20 19:38:16.225: E/AndroidRuntime(2371): FATAL EXCEPTION: main
    01-20 19:38:16.225: E/AndroidRuntime(2371): java.lang.NullPointerException
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at org.example.sudoku.Keypad.returnResult(Keypad.java:86)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at org.example.sudoku.Keypad.access$0(Keypad.java:85)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at  org.example.sudoku.Keypad$1.onClick(Keypad.java:117)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at android.view.View.performClick(View.java:4084)
     01-20 19:38:16.225: E/AndroidRuntime(2371):    at android.view.View$PerformClick.run(View.java:16966)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at android.os.Handler.handleCallback(Handler.java:615)
     01-20 19:38:16.225: E/AndroidRuntime(2371):    at android.os.Handler.dispatchMessage(Handler.java:92)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at android.os.Looper.loop(Looper.java:137)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    01-20 19:38:16.225: E/AndroidRuntime(2371):     at java.lang.reflect.Method.invokeNative(Native Method)
   01-20 19:38:16.225: E/AndroidRuntime(2371):  at java.lang.reflect.Method.invoke(Method.java:511)
   01-20 19:38:16.225: E/AndroidRuntime(2371):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
   01-20 19:38:16.225: E/AndroidRuntime(2371):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
   01-20 19:38:16.225: E/AndroidRuntime(2371):  at dalvik.system.NativeStart.main(Native Method)

   ////////////////////   i add my KeyPad class????? 
```

public class Keypad extends Dialog {

```
protected static final String TAG = "Sudoku";

private final View keys[] = new View[9];
private View keypad;
private final int useds[];
private final PuzzleView puzzleView;

public Keypad(Context context, int useds[], PuzzleView puzzleView) {
    super(context);
    this.useds = useds;
    this.puzzleView = puzzleView;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setTitle(R.string.keypad_title);
    setContentView(R.layout.keypad);
    findViews();
    for (int element : useds) {
        if (element != 0)
            keys[element - 1].setVisibility(View.VISIBLE);
    }
    setListeners();
}

// ...

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    int tile = 0;
    switch (keyCode) {
    case KeyEvent.KEYCODE_0:
    case KeyEvent.KEYCODE_SPACE:
        tile = 0;
        break;
    case KeyEvent.KEYCODE_1:
        tile = 1;
        break;
    case KeyEvent.KEYCODE_2:
        tile = 2;
        break;
    case KeyEvent.KEYCODE_3:
        tile = 3;
        break;
    case KeyEvent.KEYCODE_4:
        tile = 4;
        break;
    case KeyEvent.KEYCODE_5:
        tile = 5;
        break;
    case KeyEvent.KEYCODE_6:
        tile = 6;
        break;
    case KeyEvent.KEYCODE_7:
        tile = 7;
        break;
    case KeyEvent.KEYCODE_8:
        tile = 8;
        break;
    case KeyEvent.KEYCODE_9:
        tile = 9;
        break;
    default:
        return super.onKeyDown(keyCode, event);
    }
    if (isValid(tile)) {
        returnResult(tile);
    }
    return true;
}

/** Return the chosen tile to the caller */
private void returnResult(int tile) {
    puzzleView.setSelectedTile(tile);
    dismiss();
}

private boolean isValid(int tile) {
    for (int t : useds) {
        if (tile == t)
            return false;

    }
    return true;
}

private void findViews() {
    keypad = findViewById(R.id.keypad);
    keys[0] = findViewById(R.id.keypad_1);
    keys[1] = findViewById(R.id.keypad_2);
    keys[2] = findViewById(R.id.keypad_3);
    keys[3] = findViewById(R.id.keypad_4);
    keys[4] = findViewById(R.id.keypad_5);
    keys[5] = findViewById(R.id.keypad_6);
    keys[6] = findViewById(R.id.keypad_7);
    keys[7] = findViewById(R.id.keypad_8);
    keys[8] = findViewById(R.id.keypad_9);
}

private void setListeners() {
    for (int i = 0; i < keys.length; i++) {
        final int t = i + 1;
        keys[i].setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                returnResult(t);
            }
        });
    }
    keypad.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            returnResult(0);
        }
    });
} 
```

}

please anyone suggest me ASAP.thanks in advance

# ios - Core Data migration error 134100

> ID：14425509
> 
> 赞同：2
> 
> 时间：2013-01-20T14:31:20.900
> 
> 标签：ios, core-data, core-data-migration

I am trying to migrate my current core data structure to a new data structure however I am continually getting the same error no matter what I do:

```
Terminating app due to uncaught exception 'Open Failed', reason: 'Reason: The operation couldn’t be completed. (Cocoa error 134100.)' 
```

According to the documentation this means: NSPersistentStoreIncompatibleVersionHashError

I cannot just erase the app from the simulator as it has already gone out to the app store.

The persistent store coordinator in the app delegate is as follows:

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

if (persistentStoreCoordinator != nil) {

    return persistentStoreCoordinator;

}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"DATABASELOC.sqlite"];

NSLog(@"URL: %@", storeURL);

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:

                         [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,

                         [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

NSError *error = nil;

persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {

    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

    abort();

}

return persistentStoreCoordinator;

} 
```

And my managedobjectmodel within the app delegate is as follows:

```
- (NSManagedObjectModel *)managedObjectModel
{

if (managedObjectModel != nil) {

    return managedObjectModel;

}

NSString *path = [[NSBundle mainBundle] pathForResource:@"DATABASELOC" ofType:@"momd"];

NSURL *momURL = [NSURL fileURLWithPath:path];

managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:momURL];

return managedObjectModel;

} 
```

I have generated a second model version, and updated the current version, and if I choose either as the current, if it is the same as the original model it loads fine. However as soon as I make a minor change the model that is current the same error comes up.

I guess it appears that it is not recognizing that there is a new model, but no matter what I do I cannot get past this error.

Has anyone else had this problem? Can anyone offer some advice?

Let me know if you need any more information.

Thanks in advance for your help!

# ios - UISearchBar not accepting multiple characters

> ID：14425510
> 
> 赞同：1
> 
> 时间：2013-01-20T14:31:23.320
> 
> 标签：ios, objective-c, uisearchbar

Here is the current views implementation file:

Currently it loads a single view with a Search Bar and Search Display Controller. This was working just fine. However, I can only type in one character. If I try to type in another character, the program crashes.

```
#import "TeamViewController.h"
#import "MatchScoutingViewController.h"

@interface TeamViewController ()
{
    NSArray *teams;
    NSArray *searchResults;
}
@end

@implementation TeamViewController

@synthesize tableContents;
@synthesize sortedKeys;
@synthesize competitionName;
@synthesize rowValue;
bool *canceledSearch = false;

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.sortedKeys objectAtIndex:section];
}

- (IBAction)ViewController:(id)sender;
{
    [self dismissViewControllerAnimated:true completion:nil];
}

- (void)viewDidLoad
{
    NSArray *arrTemp1 = [[NSArray alloc]initWithObjects:@"1885",@"483",@"597",nil];
    NSDictionary *temp =[[NSDictionary alloc]initWithObjectsAndKeys:arrTemp1,@"",nil];
    self.tableContents =temp;
    [temp release];
    self.sortedKeys =[[self.tableContents allKeys] sortedArrayUsingSelector:@selector(compare:)];
    [arrTemp1 release];
    [super viewDidLoad];
}

- (void)dealloc
{
    [tableContents release];
    [sortedKeys release];
    [searchResults release];
    [teams release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark Search Methods

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self handleSearch:searchBar];
}

- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    //[self handleSearch:searchBar];
}

- (void)handleSearch:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar
{
    searchBar.text=@"";
    [searchBar resignFirstResponder];
}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                predicateWithFormat:@"SELF contains[cd] %@",
                                searchText];

    searchResults = [teams filteredArrayUsingPredicate:resultPredicate];
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                           scope:nil];

    return YES;
}

#pragma mark Table Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.sortedKeys count];
}

- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    NSArray *listData =[self.tableContents objectForKey:[self.sortedKeys objectAtIndex:section]];
    if (table == self.searchDisplayController.searchResultsTableView)
    {
        return [searchResults count];

    }
    else
    {
        return [listData count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    NSArray *listData =[self.tableContents objectForKey:[self.sortedKeys objectAtIndex:[indexPath section]]];

    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier] autorelease];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
    }
    else
    {
        NSUInteger row = [indexPath row];
        cell.textLabel.text = [listData objectAtIndex:row];
    }

    teams = listData;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *listData =[self.tableContents objectForKey:[self.sortedKeys objectAtIndex:[indexPath section]]];
    NSUInteger row = [indexPath row];
    rowValue = [listData objectAtIndex:row];
    MatchScoutingViewController *second = [[MatchScoutingViewController alloc] initWithNibName:@"MatchScoutingView_iPhone" bundle:nil];
    second.teamName = rowValue;
    second.competitionName = [self competitionName];
    [self presentViewController:second animated:true completion:nil];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

@end 
```

Here is what using "bt" gives me:

```
#0  0x010ec09b in objc_msgSend ()
#1  0x005b6cb1 in kUIKitUIKitVersionNumber ()
#2  0x000dcf4b in -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] ()
#3  0x000dd01f in -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] ()
#4  0x000c580b in -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] ()
#5  0x000d619b in -[UITableView layoutSubviews] ()
#6  0x0007292d in -[UIView(CALayerDelegate) layoutSublayersOfLayer:] ()
#7  0x010ee6b0 in -[NSObject performSelector:withObject:] ()
#8  0x02299fc0 in -[CALayer layoutSublayers] ()
#9  0x0228e33c in CA::Layer::layout_if_needed ()
#10 0x0228e150 in CA::Layer::layout_and_display_if_needed ()
#11 0x0220c0bc in CA::Context::commit_transaction ()
#12 0x0220d227 in CA::Transaction::commit ()
#13 0x0220d8e2 in CA::Transaction::observer_callback ()
#14 0x01c65afe in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
#15 0x01c65a3d in __CFRunLoopDoObservers ()
#16 0x01c437c2 in __CFRunLoopRun ()
#17 0x01c42f44 in CFRunLoopRunSpecific ()
#18 0x01c42e1b in CFRunLoopRunInMode ()
#19 0x01bf77e3 in GSEventRunModal ()
#20 0x01bf7668 in GSEventRun ()
#21 0x0002265c in UIApplicationMain ()
#22 0x00001fa2 in main (argc=1, argv=0xbffff218) 
```

I don't understand what could be causing the program to crash when I try to enter multiple characters. Any clues?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T09:39:56.710

只要单击搜索按钮，您就会强制`UISearchbar`执行该操作。`resignFirstResponder`为什么 ？

你的流量：

*   `- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar`
*   `- (void)handleSearch:(UISearchBar *)searchBar`
*   `[searchBar resignFirstResponder];`

通常带有 displayController 的 searchBar 应该是这样的：

*   您会看到搜索栏。
*   您键入一些文本。
*   应立即根据搜索文本过滤结果。
*   如果您键入另一个字符，结果将重新加载匹配预设的搜索文本。

所以你应该实现这个委托方法来过滤结果和更新 displayController。

*   将属性声明为 `@property (nonatomic, copy) NSString *searchText;`

*   综合它 `@synthesize searchText = _searchText;`

*   像这样实现您的委托：

    ```
    - (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
     if (_searchText != searchText) {
        _searchText = [searchText copy];

    NSPredicate *keyPred = [NSPredicate predicateWithBlock:^BOOL(id  obj, NSDictionary *bindings) {
        NSRange range;
            range = [obj rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (range.location != NSNotFound) {
            return YES;
        } else {
            return NO;
        }
    }];

    searchResults  = [teams filteredArrayUsingPredicate:keyPred];

    // Refresh table view
    [self.searchDisplayController.searchResultsTableView reloadData];
    }
     } 
    ```

希望这能解决你的目的。

# razor - Kendo, Razor braces problems

> ID：14425511
> 
> 赞同：0
> 
> 时间：2013-01-20T14:31:28.533
> 
> 标签：razor, kendo-ui

I checked braces, brackets 100 times...I think they are correctly placed but I get

"Keyword, identifier, or string expected after verbatim specifier: @"

```
<script id="customercontactsTemplate" type="text/kendo-tmpl">
   @(Html.Kendo().TabStrip()
        .Name("TabStripCustomer")
        .SelectedIndex(0)
        .Items(items =>
        {
         items.Add().Text("Contacts").Content(obj => 

                 @(Html.Kendo().Grid<ModelApp.Models.CustomerContacts>()
                    .Name("customercontacts")
                    .Columns(columns =>
                    {
                    columns.Bound(l => l.CustomerContactID);
                    columns.Bound(l => l.CustomerID);
                    columns.Bound(l => l.CustomerContactName);
                    columns.Bound(l => l.CustomerContactPhone);
                    columns.Bound(l => l.CustomerContactDuty);
                    })
                    .DataSource(dataSource => dataSource
                    .Ajax()
                    .Model
                    (model=>{
                        model.Id(l => l.CustomerContactID);
                        model.Field(l=>l.CustomerContactID).Editable(false);
                        model.Field(l => l.CustomerID);
                        model.Field(l => l.CustomerContactName);
                        model.Field(l => l.CustomerContactPhone);
                        model.Field(l => l.CustomerContactDuty);
                             }
                     )
                    .Read(read => read.Action("CustomersContactsRead", "Customers", new { customerID = "#=CustomerID#" }))
                    .Update(update => update.Action("CustomersContactsEdit", "Customers"))
                    .Create(update => update.Action("CustomersContactsCreate", "Customers", new { customerID = "#=CustomerID#" }))
                    )
                    .Events(e => e.Edit("onEdit"))
                    .Pageable()
                    .Sortable()
                    .Editable(editing => editing.Mode(GridEditMode.InCell))
                    .ToolBar(toolbar =>
                    {
                        toolbar.Create();
                        toolbar.Save();
                    })
                    .ToClientTemplate())

                                           );})) 
```

Is there a braces code checker? Can you spot any error?

Thanx in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:11:04.253

The problem is this line

```
Content(obj => @(Html.Kendo().Grid<ModelApp.Models.CustomerContacts>() 
```

In razor you should use [template delegates](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx):

```
Content(@<text>
    @(Html.Kendo().Grid<ModelApp.Models.CustomerContacts>() 
```

# c - Why I can pass a pointer in a method and "free" the memory inside?

> ID：14425512
> 
> 赞同：1
> 
> 时间：2013-01-20T14:31:29.467
> 
> 标签：c, pointers, free

I have always read that in order to modify any variable inside a function in C, you must pass a pointer to that variable.

If I want to delete a particular element in a linked list, and I do something like:

```
int DeleteElement(element **head, element *deleteMe)
{
  free(deleteMe);
  return 1;
} 
```

Why am I able to free that deleteMe and that gets reflected outside the DeleteElement function? Isn't the deleteMe another thing inside the function?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:33:50.297

您没有向指针写入任何内容`deleteMe`。您正在使用它（以只读方式）来确定要释放的对象（它指向的对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:34:01.750

您将**指针传递给地址**（用于提供该指针的名称或变量无关紧要）。该地址的内存块被释放。因此，它也在`DeleteElement`函数“外部”被释放。

# perl - 通过将受污染的值用作散列键来清除受污染的值是什么意思？

> ID：14425515
> 
> 赞同：1
> 
> 时间：2013-01-20T14:31:47.503
> 
> 标签：perl, security

我正在阅读这篇文档来学习 Perl 的污点模式 => [http://www.webreference.com/programming/perl/taint/index.html](http://www.webreference.com/programming/perl/taint/index.html)

提到了一种清洁污染价值的方式，

> 清理受污染值的另一种更晦涩的方法是将它们用作哈希键。因为哈希键本身永远不会被认为是被污染的

我不太明白“将它们用作散列键”是什么意思，以及为什么散列键从未被视为被污染。感谢是否有人可以提供帮助？

提前谢谢， 林

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T15:03:14.693

你真的不应该注意那句话。这意味着，如果你在污点模式下运行它

```
my $fname = <>;
chomp $fname;
open my $fh, '>', $fname; 
```

那么程序就会死掉，因为你使用了一个被污染的文件名值。但是，如果您将该值存储为哈希键，就像这样

```
my $fname = <>;
chomp $fname;
my %data;
$data{$fname} = 1;
open my $fh, '>', $_ for keys %data; 
```

那么代码将运行良好。

这样做的原因与关于污染值的智慧无关，而是散列的键不是标量值，而只是存储在内部 Perl 散列结构中的简单字符串。Perl 标量值——如标量变量或散列值或数组值——是更复杂的数据结构，包含有关值的状态和性质及其实际内容的信息，只有这些可以被标记为被污染。相比之下，哈希键只是一串字符，它不能携带任何状态信息。

所以，正如我所说，除了意识到 Perl 的这个缺点之外，你应该忽略文档中的这个声明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T15:11:43.810

这似乎是一种规避污染检查的可疑方法。这是一件非常愚蠢的事情。污点检查是为了确保您没有在脚本中做任何不安全的事情。在这种情况下，使用来自不安全来源的数据而不首先对其进行验证。

这是一个例子。这里shebang中的`-T`开关是打开污染检查的原因。

```
#!/usr/bin/perl -T
use strict;
use warnings;

chomp(my $foo = <>);
#my %a; $a{$foo} = 1;
#($foo) = keys %a;
open my $fh, ">", $foo or die "cant open $foo: $!"; 
```

此代码将终止并产生错误：

> 在 foo.pl 第 11 行，<> 第 1 行使用 -T 开关运行时打开的不安全依赖项。

如果注释行未注释，它将正常运行，无论我们在其中放置什么任意文本，都不会受到任何污染。

如前所述，这是一个坏主意，因为它绕过了安全措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:43:24.947

Hash keys aren't full scalar structures that have the behind-the-scenes magic that tracks things such as taint. A hash key is raw string. Using a value as a hash key loses all the bookkeeping that Perl does with scalars. I talk about this quite a bit in the "Secure Programming Techniques" chapter in *Mastering Perl*.

# c++ - 在另一个命名空间中的模板函数中调用 C++ 命名空间限定函数

> ID：14425518
> 
> 赞同：0
> 
> 时间：2013-01-20T14:32:01.853
> 
> 标签：c++, namespaces

如果我在一个头文件的命名空间中定义了默认函数“foo”：

```
//DefaultFoo.h
namespace DefaultFooNamespace
{
    template <typename T>
    void foo(T& x){/*...*/}
} 
```

以及在一个或多个其他头文件中的另一个命名空间中定义的 foo 重载，例如 FooOverloads.h：

```
//FooOverloads.h
namespace FooOverloadsNamespace
{
    template <typename T>
    void foo(std::vector<T>& x){/*...*/}

    void foo(std::string& x){/*...*/}

    //etc.
} 
```

并且我有另一个函数'bar'，它在将 DefaultFooNamespace 和 FooOverloadsNamespace 命名空间都带入范围后调用 foo（请注意，我在 Bar.h 中仅 #include DefaultFoo.h，因为 DefaultFoo.h 在命名空间中包含一个函数，该函数永远不会要扩展，不像 FooOverloadsNamespace 将通过添加额外的重载来扩展）：

```
//Bar.h
#include "DefaultFoo.h" 

namespace BarNamespace
{
    template <typename T>
    void bar(T& x)
    {
        //... do stuff then call foo
        using DefaultFooNamespace::foo;
        using FooOverloadsNamespace::foo;
        foo(x);
    }
} 
```

'bar' 不会编译，除非我确保 FooOverloads.h 在 Bar.h 的 #include 之前是 #include'd，或者我确保 FooOverloads.h 在 Bar.h 中是 #include'd，或者我为 FooNamespace 中的虚拟类提供“foo”函数的声明，并在 Bar.h 中提供#include，例如

```
//Dummy.h:
struct DummyClass
{
private:
    DummyClass(){}
};
namespace FooNamespace
{
    inline void foo(DummyClass& x);  //purely to open up namespace
}

//Bar.h
#include "Dummy.h" 
```

有什么办法可以解决这个问题，这样我就可以定义 bar 并避免创建冗余代码来在 Bar 中打开 FooNamespace？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:53:14.410

我的解决方案是摆脱无用的`DefaultFooNamespace`命名空间。将默认值`foo`放在与重载相同的命名空间中，然后`bar`执行以下操作：

```
using FooNamespace::foo;
foo(x); 
```

`foo`如果调用者没有包含更合适的类型的定义，则使用默认值`x`

我看不出默认值`foo`位于单独的命名空间中的原因，特别是因为这样做需要单独的虚拟定义来生成`bar`有效代码，而相同的重载可以同时满足这两个目的。

# shadow - CSS box-shadow 到一个方向

> ID：14425520
> 
> 赞同：1
> 
> 时间：2013-01-20T14:32:29.683
> 
> 标签：shadow, css

我被要求进行以下设计：

![在此处输入图像描述](../Images/152039e07f40b39167649f263d6a9564.png)

这是我尝试实现级联阴影的方式：

```
box-shadow: -6px 0px 10px #514E49 
```

但它会导致阴影显示在相反的方向：

![在此处输入图像描述](../Images/5705961b5439b9af0f61c01ecd99c719.png)

我尝试将`h-shadow`参数更改为`6px`，但阴影仅在最右边可见。

我尝试`inset`按照[Emil 的建议](https://stackoverflow.com/a/14425575/75500)使用，但它也会导致`v-shadow`显示插图并在框内可见，应该避免这种情况，如下所示：

![在此处输入图像描述](../Images/d5f9f713c968ac65c8e63984770dbeac.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:39:00.517

尝试这个：

`box-shadow:inset 6px 0px 10px #514E49;`

编辑：

```
box-shadow: 6px 0px 10px #514E49;
float:right; 
```

[http://jsfiddle.net/6V7Et/4/](http://jsfiddle.net/6V7Et/4/)

你必须颠倒菜单的顺序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T16:08:50.810

另一种避免`float:right`和反转菜单的方法是使用负传播和增加的 h 阴影，如下所示：

```
.box {
    background: #817E77;
    display: inline-block;
    width: 100px;
    height: 40px;
    box-shadow: inset 10px 0px 10px -4px #514E49;
    float:left;
} 
```

[jsFiddle 结果](http://jsfiddle.net/shimmy/6V7Et/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:53:57.483

我相信这最好用 z-index 解决，因为你的问题是其他 div 隐藏了以前渲染的那些。

所以：

```
.box {
    ....your stuff here....
    float:right
} 
```

[http://jsfiddle.net/XKNn4/](http://jsfiddle.net/XKNn4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:47:36.967

另一种不涉及反转菜单顺序或使用的解决方案`z-index`是将 放在`box-shadow`伪元素上。

# [***演示***](http://dabblet.com/gist/4579430)

相关**CSS**：

```
li {
    overflow: hidden;
    position: relative;
    box-shadow: 6px 0px 10px #514E49;
    /* the other styles */
}
li:not(:first-child):after {
    position: absolute;
    right: 100%; width: 100%; height: 100%;
    box-shadow: 6px 0px 10px #514E49;
    content: '';
} 
```

# php - 在 Apache 中移动页面，同时跳过相同的 URL

> ID：14425521
> 
> 赞同：0
> 
> 时间：2013-01-20T14:32:31.197
> 
> 标签：php, apache, url, cakephp, mod-rewrite

我想重新排列我的网站，并将所有客户页面移动到一个目录 (/customerPages) 中，同时保持相同的 URL（访问页面的 URL 和浏览器中显示的 URL）。我正在使用`Apache`和`PHP`（`CakePHP`）。

我尝试通过以下方式重新连接我的*404 错误页面：*

```
// Redirect customers to customers landing pages under /customerPages
if (strpos($message,'customerPages') == false) {
    $url = 'http://'.$_SERVER['HTTP_HOST'].'/customerPages'.$message;
    $homepage = file_get_contents($url);
    echo $homepage;
} 
```

但是这个解决方案会破坏所有使用相对路径编写的图像。

后来我尝试使用重定向：

```
if (strpos($message,'customerPages') == false) {
    $url = 'http://'.$_SERVER['HTTP_HOST'].'/customerPages'.$message;
    header("Location: ".$url);
} 
```

但比 URL 变化。我试过摆弄`RewriteRule`没有运气。

如何使用第一种、第二种或任何其他方法实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:45:45.897

您需要将图像请求从较新的位置 (/customerPages) 重定向到旧路径。您可以使用 mod_rewrite apache 模块将此类请求重定向回来：

```
RewriteEngine on
RewriteRule ^/customerPages/(.*\.jpg|.*\.gif|.*\.png) /oldpath/$1 [R] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:35:04.767

另一种方式，只是基本的想法： 1\. 放入您的*/oldpath/.htaccess*文件（我们处理文件未找到 404 错误）：

```
ErrorDocument 404 /oldpath/redirect.php 
```

2\. */oldpath/redirect.php*文件（我们的处理程序） - 仅当文件存在于较新位置时才重定向到新路径：

```
$url = parse_url($_SERVER['REQUEST_URI']);
$filename = basename($url['path']);

if(file_exists('/newpath/'.$filename)) {
  header('Location: /newpath/'.$filename);
}else{
  header('Location: /your_real_404_handler');
} 
```

# c++ - 包含逗号分隔数字的 C++ 编码/压缩/压缩字符串，如何？

> ID：14425528
> 
> 赞同：0
> 
> 时间：2013-01-20T14:33:19.687
> 
> 标签：c++, compression

我有一个包含逗号分隔数字的字符串（它们是浮点数，但我可以转换为 int）。我想将此字符串作为 cURL POST 请求中的数据发送，但不幸的是，有时该字符串可能太长而无法发送，因此我的程序崩溃。出于这个原因，我想在发送之前将字符串压缩成更短的形式。它使用 char 字节仅存储 0-9 加上逗号加上（可能）小数点的数字这一事实使它成为压缩的沃土，对吧？

我想写一些可以完成这项工作的东西，但后来决定搜索一些库。我尝试使用 zlib 但无法破解它，与其他几个相同，但我开始认为我的任务不够复杂，无法使用这些高级库，特别是因为我希望数据为字符串格式（不是二进制文件），所以我可以将它包含在 URL 标头中。当然有一种简单的方法可以做到这一点，不是吗？

这是我的输入示例：

“1、2、4、2、3.421、3、4.54、3.43”

但是对于成千上万的数字。

我正在考虑通过将每两个连续数字编码为一个字符来组合它们。

# java - 做简单的移动动画的好方法？

> ID：14425535
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:33:52.290
> 
> 标签：java

```
// The "Animation" class.
import java.awt.*;
import hsa.Console;

public class Animation
{
    static Console c;           // The output console

    public static void main (String[] args) throws InterruptedException
    {
        c = new Console ();

        for (int index = 0 ; index < 300 ; index += 10)
        {

            // This is the night sky     
            c.setColor (Color.black);
            c.fillRect (0, 0, 1500, 700);
            c.drawRect (0, 0, 1500, 700);

            // This is the moon 
            c.setColor (Color.white);
            c.fillOval (550, 10, 80, 90);

            // These are the stars in the background 
            c.setColor (Color.yellow);
            c.fillStar (50, 70, 20, 20);
            c.fillStar (90, 100, 20, 20);
            c.fillStar (130, 70, 20, 20);
            c.fillStar (210, 70, 20, 20);
            c.fillStar (290, 70, 20, 20);
            c.fillStar (370, 70, 20, 20);
            c.fillStar (450, 70, 20, 20);
            c.fillStar (170, 100, 20, 20);
            c.fillStar (250, 100, 20, 20);
            c.fillStar (330, 100, 20, 20);
            c.fillStar (410, 100, 20, 20);

            // This is the shooting star 
            c.fillStar (index, index, index + 20, index + 10);

            Thread.sleep (1400);

        }

        // Place your program here.  'c' is the output console
    } // main method
} // Animation class 
```

我们正在研究计算机科学的总结，任务是利用我们在 Java 中的知识来构建一个可以运行简单动画的程序。这是我到目前为止得到的代码，问题是流星越来越大，但我希望它保持 1 号大小，你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:37:15.290

我认为这是因为你`index`在你的`width`和`height`参数中使用了。我还假设这个 API 的 Javadoc 在[这里](http://www.brentwoodhigh.com/apcs/holt/hsa-javadoc/Console.html)。如果是这样，我会建议类似：

```
c.fillStar(index, index, 20, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:37:24.837

代替

```
 c.fillStar (index, index, index + 20, index + 10); 
```

经过

```
 c.fillStar (index, index,  20,  10); 
```

# android - 包含 510 个图像的动画列表导致 OutOfMemoryError

> ID：14425536
> 
> 赞同：0
> 
> 时间：2013-01-20T14:34:01.680
> 
> 标签：android, android-animation

我已经获得了 510 张图片（我们称它们为 animation0000 到 animation0510），并希望创建一个动画图像视图，它可以连续循环遍历所有这些图像。

我按照建议使用了动画列表，但现在在尝试启动应用程序时出现以下异常。

> 01-20 18:20:49.024：E/AndroidRuntime(24340)：致命异常：主要 01-20 18:20:49.024：E/AndroidRuntime(24340)：java.lang.OutOfMemoryError 01-20 18:20:49.024： E/AndroidRuntime(24340): 在 android.graphics.BitmapFactory.nativeDecodeAsset(Native Method) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android. graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.content.res.Resources.loadDrawable(Resources.java:1992) 01-20 18:20:49.024：E/AndroidRuntime(24340)：在 android.content.res.Resources。getDrawable(Resources.java:660) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:282) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:885) 01-20 18:20:49.024: E/AndroidRuntime(24340): 在 android.graphics.drawable.Drawable.createFromXml (drawable.java:822)

动画列表中的每个项目如下所示：

```
 <item
    android:drawable="@drawable/z_animation0123"
    android:duration="20"/> 
```

ImageView 是这样包含的：

```
<ImageView 
        android:id="@+id/zzz_animation_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/baby_logo_animation"
        android:layout_centerHorizontal="true"
        /> 
```

动画在 onActivity 中开始，如下所示：

```
 // Start zzz animation
    ImageView zImageView = (ImageView) findViewById(R.id.zzz_animation_view);
    zImageView.setBackgroundResource(R.drawable.z_complete_animation);

    AnimationDrawable zAnimation = (AnimationDrawable) zImageView.getBackground();
    zAnimation.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:18:30.147

创建[一个指向这 510 个图像的`<animation-list>`可绘制资源](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)，以及每个图像应在屏幕上显示多长时间。`android:oneshot="false"`在`<animation-list>`元素上使用以使其循环。然后可以将生成的资源与`ImageView`小部件一起使用。

# macos - 在任意通道播放声音

> ID：14425539
> 
> 赞同：3
> 
> 时间：2013-01-20T14:34:11.087
> 
> 标签：macos, cocoa, core-audio, avaudioplayer, nssound

**(OSX/可可)**

我需要能够从声音文件集合中获取任何声音（或声音）并通过任意声音输出通道播放它（或它们），最好使用每个声音级别控制和或多或少的自动通道混合。（意味着多个声音可以在同一个通道中同时播放）

**声音必须能够干净地循环播放。**

*除了*默认的内置音频，可用的输出通道将通过 USB 音频设备添加。就本问题而言，“通道”相当于 USB 音频适配器。

换句话说，我需要找到/写一些类似的东西：

```
 -(BOOL) [someObject playContentsOfURL: (NSURL) soundURL  
                            viaChannel: (id) channelspec
                         atVolumeLevel: (double) volume
                                  loop: (BOOL) loop
         ]; 
```

**AVAudioPlayer**非常接近，但它似乎*假设使用内置立体声音频*。我无法弄清楚如何将输出路由到特定的输出设备。**然而，它的循环很棒**。

**NSSound**的**playbackDeviceIdentifier**做了输出设备路由部分，但是NSSound 的循环很*糟糕*。如果 NSSounds 循环不是那么糟糕，那将是赢家。

因此，如果您有一个**使 NSSound loop cleanly**的答案，那将非常令人满意地回答这个问题。

如果您可以指定**如何为 AVAudioPlayer 提供输出路由**，那将同样漂亮。

**或者**，如果您可以指向或提供 CoreAudio 或其他可以完成此操作的代码，那也可以。

# continuous-integration - 如何为 c# 应用程序进行持续集成？

> ID：14425542
> 
> 赞同：11
> 
> 时间：2013-01-20T14:34:32.330
> 
> 标签：continuous-integration

任何人都可以建议 c# 应用程序相当于 hudson 吗？

我曾经使用 hudson 作为 java 的构建服务器，在预定的时间为 java web 和批处理作业应用程序执行自动部署，并通过电子邮件通知技术团队

我想问我如何为 c# 应用程序做同样的事情。

构建服务器中是否有任何标准插件，例如静态代码分析工具，我可以用来扫描代码

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T14:17:15.667

除了 jamesj 提到的出色工具之外，[TeamCity](http://www.jetbrains.com/teamcity/)也可以很好地工作。从配置可用性的角度来看，与 CruiseControl 相比，我更喜欢它，而且它是免费的，只要您保持一定的限制。

但是，如果您已经将 TFS 作为源代码控制进行了投资，请确保您物有所值并将其用于构建和部署。

如果您喜欢 Hudson，请查看[Jenkins](http://jenkins-ci.org/)。我也见过有人将它用于 .NET 构建，尽管我没有亲自使用过它，并且根据他们的页面 Jenkins 曾经被称为 Hudson，所以你可能很熟悉它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T11:12:52.390

[TFS](http://msdn.microsoft.com/en-gb/vstudio/ff637362.aspx)非常适合持续集成，但您也可以将[CruiseControl.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)与[NAnt](http://nant.sourceforge.net/)一起使用。这两者都应该能够运行批处理作业、发送电子邮件和运行自动化部署

[StyleCop](http://stylecop.codeplex.com/)和[FxCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)都进行静态检查，并且都可以集成到您的构建过程中。

# objective-c - 为有符号整数交换字节顺序的适当方法是什么？

> ID：14425543
> 
> 赞同：2
> 
> 时间：2013-01-20T14:34:37.523
> 
> 标签：objective-c, c, cocoa, endianness, foundation

在 mac os x 上，我一直在使用 NSSwap*ToHost 系列函数来处理无符号整数。

对于大小为 8、16、32 和 64 的有符号整数，正确的方法是什么？我已经看到其他堆栈溢出帖子中推荐的 ntoh* 函数，但它们返回无符号整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:37:03.470

您可以对有符号整数使用相同的方法，只需使用一些强制转换来使编译器安静下来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:59:31.580

如果将值转换为无符号整数并返回，则使用这些函数进行有符号字节顺序交换应该没有问题。但是：如果您想将小端数据显式转换为大端数据，则不应使用这些函数，因为 ntoh* 函数不会在大端架构上执行交换。另一方面，如果您只想确保将本地计算机中的数据转换为大端，无论您的本地计算机的字节序如何，这些函数都可以正常工作。

# unit-testing - 处理 GUI 的验收测试？

> ID：14425550
> 
> 赞同：2
> 
> 时间：2013-01-20T14:35:04.297
> 
> 标签：unit-testing, tdd, continuous-integration, bdd, acceptance-testing

任何优秀的软件架构师都会同意，当某人从头开始构建一个新项目时，他一定不能在开始时进行边界（数据库、GUI、外部服务等）。事实上，他应该独立于构建软件的核心任何后端，并将它们视为应用程序的一种“插件”。

TDD 和验收测试促进了每个新功能：

1.  为功能编写失败的验收测试（端到端）
2.  借助一些单元测试，推动并完成您的代码设计
3.  验收测试通过后立即完成。

但是，很多文章解释说验收测试是一个真正真正端到端的测试，因此涉及 GUI（浏览器（例如使用 Selenium）或其他一些界面）。

验收测试不应该基于应用程序的 HEART 并且独立于任何边界吗？例如，这将迫使我考虑 GUI...：s

什么是好的做法？为每个功能编写两种验收测试？：一种用于业务逻辑，另一种确保 GUI 正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T15:04:16.937

首先让我建议阅读Steve Freeman 和 Nat Pryce 的[*《Growing Object-Oriented Software, Guided by Tests 》。*](https://rads.stackoverflow.com/amzn/click/com/0321503627)这是迄今为止我读过的最好的软件测试书籍。它的优点是作者不关注像`Calculator`类这样的虚拟用例和使用 TDD 来测试`add(int, int)`方法。这很愚蠢。相反，他们使用 Swing 接口、通过 XMPP 的网络连接和相当多的业务逻辑来构建功能齐全的应用程序。这让我们回到你的问题。

上面这本书的作者使用了各种技术和工具，但他们始终保持 TDD 实践。对于单元测试，他们使用[mockito](/questions/tagged/mockito "显示标记为“mockito”的问题")，但对于验收和集成测试，他们实际上会自动启动应用程序 (GUI) 和 XMPP 测试服务器。

他们设法通过在测试和 GUI 之间采用高度分离来测试驱动 GUI 测试。您应该将您的用户界面（Web、桌面、SOAP Web 服务等）隐藏在一个名为*driver*的抽象后面。您的测试仅使用高级方法（如`placeOrder("Foo")`. 每个驱动程序 ( `BrowserDriver`, `SwingDriver`) 都了解这意味着什么，要么浏览您的网页，要么点击胖 GUI 上的按钮。

如果您可以在不更改测试但仅通过更改底层驱动程序的情况下更改您的 GUI，那么您做对了。

# 也可以看看

*   [页面对象](http://code.google.com/p/selenium/wiki/PageObjects)- 保持 Selenium 测试可维护
*   [健身](http://fitnesse.org/)

# android - 安卓多点触控手势识别

> ID：14425552
> 
> 赞同：2
> 
> 时间：2013-01-20T14:35:22.113
> 
> 标签：android, gesture

我正在尝试开发一个应用程序，用户在其中创建手势并存储有关它的信息......但我的问题是识别多笔手势......“加号”绘制和“水平线下方绘制的垂直线”似乎相同。 ..请有人帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:10:46.523

我知道这是旧的，但如果你仍然有问题，我有两个建议：

1.  你看过使用手势生成器吗？它内置在 Android 模拟器中，您可以在[此处](http://code.google.com/p/quickdroid/downloads/detail?name=com.android.gesture.builder.apk)下载 apk并将其放在手机上。
2.  你总是可以在[这里](http://www.basic4ppc.com/forum/additional-libraries-classes-official-updates/7421-gestures-multi-touch-library.html)下载这个多点触控手势库（不幸的是它会花钱，我不知道它有多好）

# ruby - 命令 rake db:migrate 上的错误

> ID：14425555
> 
> 赞同：1
> 
> 时间：2013-01-20T14:35:43.307
> 
> 标签：ruby, ruby-on-rails-3, git

我是 railsand 通过它学习 selenium 工具的新手。在这个过程中，我遇到了以下步骤：在您选择的文件夹中，执行以下命令：

```
git clone http://github.com/wolframarnold/selenium-test-app.git 
```

转到 selenium-test-app 文件夹并运行以下命令：

```
cp ./vendor/plugins/active_scaffold/test/mock_app/config/database.yml ./config/ 
```

到上面的命令一切都很好，但是当我运行下面的命令时：

```
rake db:migrate" 
```

发现这个错误：

```
$ rake db:migrate
rake aborted!
undefined method `name' for "actionmailer":String
c:/Users/BH/selenium-test-app/config/environment.rb:9:in `<top (required)>'
Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

有人请帮助解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:03:34.747

如果您安装了一些外部依赖项，请运行`bundle install`但请记住重新启动您的 Web 服务器以获取这些更改。然后运行`rake db:migrate`。

# vb.net - 编写正确的 DataGridView 单元格背景色

> ID：14425556
> 
> 赞同：1
> 
> 时间：2013-01-20T14:35:50.787
> 
> 标签：vb.net, datagridview, xmltextwriter

我有一个`DataGridView`，其中某些单元格在单击时将颜色变为红色，然后在再次单击时变为白色。我遇到的问题是，如果我没有单击单元格，代码会认为单元格的背景颜色`0`是`white`.

我正在使用 a`XMLTextWriter`中的`loop`所有行/列`DataGridView`并将单元格背景颜色写入 XML 文件

这是我正在使用的代码：

```
For Each tp As TabPage In Me.TabControl.Controls.OfType(Of TabPage)()
                .  .  .
                For Each dgv As DataGridView In tp.Controls.OfType(Of DataGridView)()
                    .  .  .
                    For Each row As DataGridViewRow In dgv.Rows
                        .   .   .
                        For Each cell As DataGridViewCell In row.Cells
                            If i = 1 Then
                                xw.WriteStartElement("task")
                                xw.WriteAttributeString("name", cell.Value)
                                **xw.WriteAttributeString("backcolour", cell.Style.BackColor.Name.ToString)**
                                xw.WriteEndElement()
                            Else
                                **xw.WriteElementString("cell", cell.Style.BackColor.Name.ToString) 'writes the background color of the cell**
                            End If
                            i = i + 1
                        Next cell
                        xw.WriteEndElement()
                        i = 1
                    Next row
                    xw.WriteEndElement()
                Next dgv
                xw.WriteEndElement()
            Next 
```

有谁知道如何告诉它写`white`而不是`0`？

如果您需要澄清，请告诉我。

# mysql - 精度大于 2dp 的 MySQL 格式和货币数学

> ID：14425558
> 
> 赞同：0
> 
> 时间：2013-01-20T14:35:55.100
> 
> 标签：mysql, math, currency, currency-formatting

我正在寻找正确的格式并在 MySQL 中对货币进行数学运算，其中价格是动态计算的，因此精度大于 2dp。

```
calculated unit Price = 1.255
displayed price       = 1.26 
```

如果客户订购了 100 件产品：

```
actual total (100 * 1.255)   = 125.50
displayed total (100 * 1.26) = 126.00 
```

因此，如果客户查看他们的发票并进行数学计算，他们会发现他们的费用低于 50 便士，因为我将向他们收取 125.50 英镑，但他们会自己计算并认为应该向他们收费126.00 英镑。

我认为解决此问题的最简单方法是*截断*或*舍*入计算出的单价，例如显示和帐户将匹配的意思`ROUND(1.255, 2)`。`TRUNCATE(1.255, 2)`

这对于非常少量的产品来说不是问题，但是当客户订购更多产品时，它确实会变得很重要。

问题是我不想向客户收取 125.00 英镑或 126.00 英镑的费用，我想为 100 件商品向他们收取 125.50 英镑。

有什么想法，或者我应该简单地以 3dp 而不是 2dp 向客户显示价格，而是四舍五入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:39:14.677

通过四舍五入单价，您正在破坏信息。正如您所建议的，解决此问题的唯一方法是向客户完整显示单价。

# c# - 如何在 C# 中覆盖 Form.Show() 方法

> ID：14425559
> 
> 赞同：3
> 
> 时间：2013-01-20T14:35:56.180
> 
> 标签：c#, winforms

我想覆盖`Show()`表单的方法，但是 c# 不允许我这样做。当我返回上一个窗口时，我想刷新列表框。我不想使用可观察的集合等。

```
 protected override void Show() {
            base.Show();
            list.Items.Clear();
            loadListItems();
        } 
```

> “Sklep.OknoProduktow.Show()”：无法覆盖继承的成员“System.Windows.Forms.Control.Show()”，因为它未标记为虚拟、抽象或覆盖

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-19T22:05:37.297

您不能覆盖 Show 方法，但可以隐藏它。将此代码放在表单的类中：

```
public new void Show()
{
     //your code here

     //call the shadowed Show method on our form.       
     base.Show();

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-20T14:56:36.340

你需要区分*事件*和*方法*。如果未将事件声明为虚拟，则无法覆盖事件。Form.Shown 事件不是虚拟的，也不受保护。

在 Winforms 中还有另一种机制用于覆盖事件处理。每个事件 Xxxx 都有一个对应的名为 OnXxxx 的受保护方法。OnXxxx() 方法的职责是触发 Xxxx 事件，最终由基类中的实现来处理。在这种情况下，通过 Form.OnShown()。

这样做的价值在于，您可以在要覆盖事件的默认处理的方式上进行其他*选择：*

*   您可以先调用 base.OnShown()，然后执行任何您想要自定义事件的操作。这让您可以覆盖自定义事件处理程序可能所做的任何事情。在 OnPaint 事件处理程序中很常见，例如，当您想确保您绘制的任何内容都位于基类或事件处理程序绘制的任何内容之上时。
*   您可以编写自定义代码，然后调用 base.OnShown()。实现相反的目标，自定义事件处理程序可以覆盖您所做的任何事情。这是正常的方式。
*   您可以编写自定义代码*而不*调用 base.OnShown()。这完全阻止了事件处理程序的运行。很少这样做，但是当您的自定义如此广泛以至于客户端代码的事件处理程序可能出现故障时，您想要做出的选择。
*   您可以编写自定义代码，*而不是*调用 base.OnShown() 但仍会触发 Shown 事件。也很少见，但如果基本实现妨碍您，您必须这样做。

因此，您的方法最可能正确的实现是：

```
 protected override void OnShown(EventArgs e) {
        loadListItems();
        //Call the original OnShown.
        base.OnShown(e);
    } 
```

它使用第二个项目符号，允许事件处理程序自定义您加载的列表。

尽量不要混淆更大的问题，你做错了。该列表应在表单构造函数中初始化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T14:44:09.340

为什么不使用激活事件？

它会帮助你。当您的表单激活时，您的列表框将刷新。

我认为你不能覆盖`show()`，这就是为什么它没有解决你的问题。

```
private void Form1_Activated(object sender, System.EventArgs e)
{
  list.Items.Clear();
  loadListItems();
} 
```

# java - 两个命令Java之间的延迟？- 游戏

> ID：14425564
> 
> 赞同：1
> 
> 时间：2013-01-20T14:37:07.347
> 
> 标签：java, multithreading, delay, sleep, wait

我正在用java制作一个匹配游戏，它进展顺利。问题是当我点击第二张卡片时，如果它们不一样，卡片会转回来，但它永远不会告诉你第二张卡片是什么。我正在考虑在两张卡显示后延迟程序，但它不起作用。它只显示第一张卡片，延迟程序，然后执行它最初所做的事情。它不会显示第二张图片。我试过 wait() 和 Thread.sleep(1000)，但都不会产生我想要的效果。

```
// code above where it finds the first card and shows it
y.setIcon(FindTheCard(es2,'c')); //showing the second card
            try{Thread.sleep(3000L); // delaying
            }catch(Exception e){} 
```

我对线程很陌生，所以我想首先运行的是线程，然后是其余的代码，这不是我想要的。我希望 y.setIcon(..) 被执行，然后在其余代码运行之前有一点延迟。关于我的代码的一切都完美无缺，所以我想这只是我缺乏知识。我需要的只是延迟。

但是，我也尝试过这段代码：

```
public class testing {

    public static void main(String[] args) {
        System.out.println("Do this stuff");
        try { Thread.sleep(500); }
        catch ( Exception e ) { }
        System.out.println("Now do everything after this");

    }

} 
```

它有效。两句话之间有一点延迟。我怎样才能对我的卡片做同样的事情——它们实际上是按钮。我还删除了在卡片显示后将卡片转回并且卡片保持不变的代码。所以第二张卡片或图标没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:46:42.853

编写图形渲染引擎有两种方法：

1.  多线程
2.  单线程

事实证明，多线程很难做到正确，也很容易出错，而且性能提升令人怀疑。

Java 的决定是使用单线程进行渲染。结果是您在一个线程中运行事件处理和主逻辑，并将 GUI 更新工作提交给渲染线程。

我看不到您的整个代码，但很可能您正在滥用渲染线程，通过使其休眠 3 秒，您实际上阻止了 UI 在这 3 秒内更新以显示更改，您在睡眠后立即重置。

您不应该在渲染线程之外调用 UI 更新函数，您应该将请求提交给渲染线程并让您的事件线程（或第三个计时器线程）休眠所需的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:19:40.630

切勿`sleep`在 GUI 代码（在事件调度线程上运行的代码）中使用。而是安排一个 Swing`Timer`在延迟后执行该操作。基本上，将当前代码之后的所有代码复制粘贴到Swing 中涉及`sleep`的方法中。`actionPerformed``Timer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:21:48.913

如前所述，Swing 是单线程的。有一个称为 Event Dispatch Thread 的线程，它执行所有渲染并且是处理所有 Swing 事件的地方（您`ActionListeners`和其他类型的侦听器都在该线程上运行）。重要的是不要在该线程上执行任何长时间运行的进程（服务器调用、磁盘 I/O、Thread.wait()s），因为它会导致 GUI 挂起。查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)以获取更多详细信息和示例。

对于您的情况，您可能还想查看 Swing [Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)，因为它们似乎是为您想要的效果而设计的。

# javascript - 使用 Typescript 进行接口类型检查

> ID：14425568
> 
> 赞同：479
> 
> 时间：2013-01-20T14:37:38.110
> 
> 标签：javascript, typescript, interface

这个问题直接类似于[使用 TypeScript 进行类类型检查](https://stackoverflow.com/questions/12789231/class-type-check-with-typescript)

我需要在运行时找出任何类型的变量是否实现了接口。这是我的代码：

```
interface A{
    member:string;
}

var a:any={member:"foobar"};

if(a instanceof A) alert(a.member); 
```

如果在 typescript playground 中输入此代码，最后一行将被标记为错误，“当前范围内不存在名称 A”。但这不是真的，该名称确实存在于当前范围内。我什至可以将变量声明更改为`var a:A={member:"foobar"};`没有编辑器的投诉。在浏览网页并在 SO 上找到另一个问题后，我将接口更改为一个类，但是我不能使用对象文字来创建实例。

我想知道 A 类型是如何消失的，但是查看生成的 javascript 可以解释问题：

```
var a = {
    member: "foobar"
};
if(a instanceof A) {
    alert(a.member);
} 
```

没有将 A 表示为接口，因此无法进行运行时类型检查。

我知道 javascript 作为一种动态语言没有接口的概念。有什么方法可以对接口进行类型检查吗？

typescript playground 的自动补全显示 typescript 甚至提供了一个方法`implements`。我该如何使用它？

* * *

## 回答 #1

> 赞同：385
> 
> 时间：2013-01-20T15:57:07.803

`instanceof`您可以在没有关键字的情况下实现您想要的，因为您现在可以编写自定义类型保护：

```
interface A{
    member:string;
}

function instanceOfA(object: any): object is A {
    return 'member' in object;
}

var a:any={member:"foobar"};

if (instanceOfA(a)) {
    alert(a.member);
} 
```

# 很多会员

如果您需要检查大量成员以确定对象是否与您的类型匹配，则可以添加一个鉴别器。下面是最基本的示例，需要您管理自己的鉴别器......您需要更深入地了解模式以确保避免重复的鉴别器。

```
interface A{
    discriminator: 'I-AM-A';
    member:string;
}

function instanceOfA(object: any): object is A {
    return object.discriminator === 'I-AM-A';
}

var a:any = {discriminator: 'I-AM-A', member:"foobar"};

if (instanceOfA(a)) {
    alert(a.member);
} 
```

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2015-11-16T10:35:45.147

在 TypeScript 1.6 中，[用户定义的类型保护](https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards)将完成这项工作。

```
interface Foo {
    fooProperty: string;
}

interface Bar {
    barProperty: string;
}

function isFoo(object: any): object is Foo {
    return 'fooProperty' in object;
}

let object: Foo | Bar;

if (isFoo(object)) {
    // `object` has type `Foo`.
    object.fooProperty;
} else {
    // `object` has type `Bar`.
    object.barProperty;
} 
```

正如 Joe Yang 所说：从 TypeScript 2.0 开始，您甚至可以利用标记联合类型。

```
interface Foo {
    type: 'foo';
    fooProperty: string;
}

interface Bar {
    type: 'bar';
    barProperty: number;
}

let object: Foo | Bar;

// You will see errors if `strictNullChecks` is enabled.
if (object.type === 'foo') {
    // object has type `Foo`.
    object.fooProperty;
} else {
    // object has type `Bar`.
    object.barProperty;
} 
```

它也适用`switch`。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2016-07-16T00:37:48.893

用户定义的类型守卫怎么样？[https://www.typescriptlang.org/docs/handbook/advanced-types.html](https://www.typescriptlang.org/docs/handbook/advanced-types.html)

```
interface Bird {
    fly();
    layEggs();
}

interface Fish {
    swim();
    layEggs();
}

function isFish(pet: Fish | Bird): pet is Fish { //magic happens here
    return (<Fish>pet).swim !== undefined;
}

// Both calls to 'swim' and 'fly' are now okay.

if (isFish(pet)) {
    pet.swim();
}
else {
    pet.fly();
} 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2016-07-13T09:51:44.260

typescript 2.0 引入标记联合

[打字稿 2.0 功能](https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript)

```
interface Square {
    kind: "square";
    size: number;
}

interface Rectangle {
    kind: "rectangle";
    width: number;
    height: number;
}

interface Circle {
    kind: "circle";
    radius: number;
}

type Shape = Square | Rectangle | Circle;

function area(s: Shape) {
    // In the following switch statement, the type of s is narrowed in each case clause
    // according to the value of the discriminant property, thus allowing the other properties
    // of that variant to be accessed without a type assertion.
    switch (s.kind) {
        case "square": return s.size * s.size;
        case "rectangle": return s.width * s.height;
        case "circle": return Math.PI * s.radius * s.radius;
    }
} 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-11-12T11:50:31.573

现在有可能，我刚刚发布了一个增强版的`TypeScript`编译器，它提供了完整的反射能力。您可以从其元数据对象实例化类，从类构造函数中检索元数据并在运行时检查接口/类。你可以在[这里查看](https://github.com/pcan/reflec-ts)

使用示例：

在您的一个打字稿文件中，创建一个接口和一个实现它的类，如下所示：

```
interface MyInterface {
    doSomething(what: string): number;
}

class MyClass implements MyInterface {
    counter = 0;

    doSomething(what: string): number {
        console.log('Doing ' + what);
        return this.counter++;
    }
} 
```

现在让我们打印一些已实现接口的列表。

```
for (let classInterface of MyClass.getClass().implements) {
    console.log('Implemented interface: ' + classInterface.name)
} 
```

用reflect-ts编译并启动它：

```
$ node main.js
Implemented interface: MyInterface
Member name: counter - member kind: number
Member name: doSomething - member kind: function 
```

`Interface`有关元类型的详细信息，请参见反射.d.ts。

*更新：您可以*[在此处](https://github.com/pcan/reflec-ts-examples/tree/master/simple-validator) 找到完整的工作示例

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-01-26T05:26:07.233

这是另一种选择：模块[ts-interface-builder](https://github.com/gristlabs/ts-interface-builder)提供了一个构建时工具，可以将 TypeScript 接口转换为运行时描述符，并且[ts-interface-checker](https://github.com/gristlabs/ts-interface-checker)可以检查对象是否满足它。

对于OP的例子，

```
interface A {
  member: string;
} 
```

您首先运行`ts-interface-builder`它会生成一个带有描述符的新简洁文件，例如，`foo-ti.ts`您可以像这样使用它：

```
import fooDesc from './foo-ti.ts';
import {createCheckers} from "ts-interface-checker";
const {A} = createCheckers(fooDesc);

A.check({member: "hello"});           // OK
A.check({member: 17});                // Fails with ".member is not a string" 
```

您可以创建一个单行类型保护函数：

```
function isA(value: any): value is A { return A.test(value); } 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2020-10-31T09:56:09.020

## Typescript 中的类型保护：

TS有用于此目的的**类型保护**。他们以下列方式定义它：

> 执行运行时检查以保证某个范围内的类型的某些表达式。

这基本上意味着 TS 编译器在有足够信息的情况下可以将类型缩小到更具体的类型。例如：

```
function foo (arg: number | string) {
    if (typeof arg === 'number') {
        // fine, type number has toFixed method
        arg.toFixed()
    } else {
        // Property 'toFixed' does not exist on type 'string'. Did you mean 'fixed'?
        arg.toFixed()
        // TSC can infer that the type is string because 
        // the possibility of type number is eliminated at the if statement
    }
} 
```

回到您的问题，我们还可以将类型保护的这个概念应用于对象以确定它们的类型。要为对象定义类型保护，我们需要定义一个返回类型为**类型谓词**的函数。例如：

```
interface Dog {
    bark: () => void;
}

// The function isDog is a user defined type guard
// the return type: 'pet is Dog' is a type predicate, 
// it determines whether the object is a Dog
function isDog(pet: object): pet is Dog {
  return (pet as Dog).bark !== undefined;
}

const dog: any = {bark: () => {console.log('woof')}};

if (isDog(dog)) {
    // TS now knows that objects within this if statement are always type Dog
    // This is because the type guard isDog narrowed down the type to Dog
    dog.bark();
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-03-11T19:18:38.770

我想指出，TypeScript 并没有提供直接的机制来动态测试对象是否实现了特定的接口。

相反，TypeScript 代码可以使用 JavaScript 技术来检查对象上是否存在一组适当的成员。例如：

```
var obj : any = new Foo();

if (obj.someInterfaceMethod) {
    ...
} 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2018-02-21T12:07:31.840

与上面[使用用户定义的守卫](https://www.typescriptlang.org/docs/handbook/advanced-types.html)相同，但这次使用箭头函数谓词

```
interface A {
  member:string;
}

const check = (p: any): p is A => p.hasOwnProperty('member');

var foo: any = { member: "foobar" };
if (check(foo))
    alert(foo.member); 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-06-28T09:54:57.010

类型守卫

```
interface MyInterfaced {
    x: number
}

function isMyInterfaced(arg: any): arg is MyInterfaced {
    return arg.x !== undefined;
}

if (isMyInterfaced(obj)) {
    (obj as MyInterfaced ).x;
} 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2021-04-28T13:41:16.227

我认为这是最好的方法；在接口上附加一个“Fubber”符号。它的编写速度要快得多，对于 JavaScript 引擎来说比类型保护要快得多，支持接口的继承，并且在需要时使类型保护易于编写。

这就是 ES6 使用符号的目的。

# 界面

```
// Notice there is no naming conflict, because interfaces are a *type*
export const IAnimal = Symbol("IAnimal"); 
export interface IAnimal {
  [IAnimal]: boolean; // the fubber
}

export const IDog = Symbol("IDog");
export interface IDog extends IAnimal {
  [IDog]: boolean;
}

export const IHound = Symbol("IDog");
export interface IHound extends IDog {
  // The fubber can also be typed as only 'true'; meaning it can't be disabled.
  [IDog]: true;
  [IHound]: boolean;
} 
```

# 班级

```
import { IDog, IAnimal } from './interfaces';
class Dog implements IDog {
  // Multiple fubbers to handle inheritance:
  [IAnimal] = true;
  [IDog] = true;
}

class Hound extends Dog implements IHound {
  [IHound] = true;
} 
```

# 测试

如果您想帮助 TypeScript 编译器，可以将此代码放入类型保护中。

```
import { IDog, IAnimal } from './interfaces';

let dog = new Dog();

if (dog instanceof Hound || dog[IHound]) {
  // false
}
if (dog[IAnimal]?) {
  // true
}

let houndDog = new Hound();

if (houndDog[IDog]) {
  // true
}

if (dog[IDog]?) {
  // it definitely is a dog
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-08-26T14:13:06.663

根据 Fenton 的[回答](https://stackoverflow.com/a/14426274/1652450)，这是我实现的一个函数，用于验证给定对象是否具有全部或部分`object`的键。`interface`

*根据您的用例，您可能还需要检查每个接口属性的类型。下面的代码没有这样做。*

```
function implementsTKeys<T>(obj: any, keys: (keyof T)[]): obj is T {
    if (!obj || !Array.isArray(keys)) {
        return false;
    }

    const implementKeys = keys.reduce((impl, key) => impl && key in obj, true);

    return implementKeys;
} 
```

使用示例：

```
interface A {
    propOfA: string;
    methodOfA: Function;
}

let objectA: any = { propOfA: '' };

// Check if objectA partially implements A
let implementsA = implementsTKeys<A>(objectA, ['propOfA']);

console.log(implementsA); // true

objectA.methodOfA = () => true;

// Check if objectA fully implements A
implementsA = implementsTKeys<A>(objectA, ['propOfA', 'methodOfA']);

console.log(implementsA); // true

objectA = {};

// Check again if objectA fully implements A
implementsA = implementsTKeys<A>(objectA, ['propOfA', 'methodOfA']);

console.log(implementsA); // false, as objectA now is an empty object 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-04-14T13:51:13.140

[您可以使用ts-validate-](https://github.com/edbentley/ts-validate-type) type 在运行时验证 TypeScript 类型，就像这样（虽然确实需要 Babel 插件）：

```
const user = validateType<{ name: string }>(data); 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-08-21T15:58:53.763

[`@progress/kendo-data-query`](https://www.npmjs.com/package/@progress/kendo-data-query)我从文件中找到了一个示例`filter-descriptor.interface.d.ts`

检查器

```
declare const isCompositeFilterDescriptor: (source: FilterDescriptor | CompositeFilterDescriptor) => source is CompositeFilterDescriptor; 
```

示例用法

```
const filters: Array<FilterDescriptor | CompositeFilterDescriptor> = filter.filters;

filters.forEach((element: FilterDescriptor | CompositeFilterDescriptor) => {
    if (isCompositeFilterDescriptor(element)) {
        // element type is CompositeFilterDescriptor
    } else {
        // element type is FilterDescriptor
    }
}); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-10-18T07:21:46.523

```
export interface ConfSteps {
    group: string;
    key: string;
    steps: string[];
} 
```

```
private verify(): void {
    const obj = `{
      "group": "group",
      "key": "key",
      "steps": [],
      "stepsPlus": []
    } `;
    if (this.implementsObject<ConfSteps>(obj, ['group', 'key', 'steps'])) {
      console.log(`Implements ConfSteps: ${obj}`);
    }
  } 
```

```
private objProperties: Array<string> = [];

private implementsObject<T>(obj: any, keys: (keyof T)[]): boolean {
    JSON.parse(JSON.stringify(obj), (key, value) => {
      this.objProperties.push(key);
    });
    for (const key of keys) {
      if (!this.objProperties.includes(key.toString())) {
        return false;
      }
    }
    this.objProperties = null;
    return true;
  } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-09-05T16:45:17.330

**在 Typescript 中使用 Reflect 进行类型保护**

这是我的 Typescript 游戏引擎中的类型保护示例

```
 export interface Start {
    /**
     * Start is called on the frame when a script is enabled just before any of the Update methods are called the first time.
     */
     start(): void
 }

/**
  * User Defined Type Guard for Start
  */
 export const implementsStart = (arg: any): arg is Start => {
     return Reflect.has(arg, 'start')
 } 

 /**
  * Example usage of the type guard
  */

 start() {
    this.components.forEach(component => {
        if (implementsStart(component)) {
            component.start()
        }  

    })
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-10-31T15:04:48.897

自OP以来接近9年，这个问题仍然存在。我真的很想爱 Typescript。通常我会成功。但它在类型安全方面的漏洞是我捏着的鼻子无法阻挡的恶臭。

我的 goto 解决方案并不完美。但我认为它们比大多数更常用的解决方案要好。鉴别器已被证明是一种不好的做法，因为它们限制了可扩展性并完全违背了类型安全的目的。我的两个最漂亮的对接丑陋的解决方案是，按顺序：

类装饰器：递归扫描类型化对象的成员并根据符号名称计算散列。将散列与静态 KVP 属性中的类型名称相关联。在哈希计算中包含类型名称以降低与祖先的歧义风险（发生在空子类中）。优点：它被证明是最值得信赖的。它还提供了非常严格的执行。这也类似于其他高级语言如何原生实现多态性。然而，该解决方案需要进一步扩展才能真正实现多态性。缺点：匿名/JSON 对象必须在每次类型检查时重新散列，因为它们没有要关联和静态缓存的类型定义。在高负载情况下，过多的堆栈开销会导致严重的性能瓶颈。可以通过 IoC 容器缓解，但这对于没有其他理由的小型应用程序来说也可能是不可取的开销。还需要额外的努力才能将装饰器应用于每个需要它的对象。

克隆：非常丑陋，但可以通过深思熟虑的策略受益。创建类型化对象的新实例，并反射性地从匿名对象复制顶级成员分配。给定一个预先确定的通道标准，您可以同时检查和克隆转换为类型。类似于其他语言的“tryParse”。优点：在某些情况下，可以通过立即使用转换后的“测试”实例来减轻资源开销。装饰师不需要额外的勤奋。大量的弹性公差。缺点：内存泄漏就像面粉筛一样。如果没有“深度”克隆，变异的引用可能会破坏其他组件，而没有预料到会破坏封装。静态缓存不适用，因此在每个调用上都会执行操作——具有大量顶级成员的对象会影响性能。刚接触 Typescript 的开发人员会因为不理解您编写这种模式的原因而将您误认为是初级开发人员。

总而言之：我不为 Typescript 在多态性中的细微差别买“JS 不支持它”的借口。转译器绝对适合这个目的。用盐来治疗伤口：它来自微软。许多年前，他们已经成功地解决了同样的问题：.Net Framework 提供了一个强大的互操作 API，用于向后兼容 COM 和 ActiveX。他们没有尝试转换到较旧的运行时。对于像 JS 这样松散和解释的语言来说，这种解决方案会更容易，也不会那么混乱……但他们害怕失去对其他超集的支持而畏缩不前。使用 JS 中本应由 TS 解决的缺点，作为重新定义静态类型化面向对象原则的格式错误的基础是——好吧——胡说八道。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-07-22T16:55:11.350

使用字符串文字很困难，因为如果您想重构方法或接口名称，那么您的 IDE 可能不会重构这些字符串文字。如果界面中至少有一种方法，我会为您提供我的解决方案

```
export class SomeObject implements interfaceA {
  public methodFromA() {}
}

export interface interfaceA {
  methodFromA();
} 
```

检查对象是否属于接口类型：

```
const obj = new SomeObject();
const objAsAny = obj as any;
const objAsInterfaceA = objAsAny as interfaceA;
const isObjOfTypeInterfaceA = objAsInterfaceA.methodFromA != null;
console.log(isObjOfTypeInterfaceA) 
```

注意：即使我们删除 'implements interfaceA'，我们也会得到 true，因为该方法仍然存在于 SomeObject 类中

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-08-17T15:36:11.697

这是我使用类和*lodash*提出的解决方案：（它有效！）

```
// TypeChecks.ts
import _ from 'lodash';

export class BakedChecker {
    private map: Map<string, string>;

    public constructor(keys: string[], types: string[]) {
        this.map = new Map<string, string>(keys.map((k, i) => {
            return [k, types[i]];
        }));
        if (this.map.has('__optional'))
            this.map.delete('__optional');
    }

    getBakedKeys() : string[] {
        return Array.from(this.map.keys());
    }

    getBakedType(key: string) : string {
        return this.map.has(key) ? this.map.get(key) : "notfound";
    }
}

export interface ICheckerTemplate {
    __optional?: any;
    [propName: string]: any;
}

export function bakeChecker(template : ICheckerTemplate) : BakedChecker {
    let keys = _.keysIn(template);
    if ('__optional' in template) {
        keys = keys.concat(_.keysIn(template.__optional).map(k => '?' + k));
    }
    return new BakedChecker(keys, keys.map(k => {
        const path = k.startsWith('?') ? '__optional.' + k.substr(1) : k;
        const val = _.get(template, path);
        if (typeof val === 'object') return val;
        return typeof val;
    }));
}

export default function checkType<T>(obj: any, template: BakedChecker) : obj is T {
    const o_keys = _.keysIn(obj);
    const t_keys = _.difference(template.getBakedKeys(), ['__optional']);
    return t_keys.every(tk => {
        if (tk.startsWith('?')) {
            const ak = tk.substr(1);
            if (o_keys.includes(ak)) {
                const tt = template.getBakedType(tk);
                if (typeof tt === 'string')
                    return typeof _.get(obj, ak) === tt;
                else {
                    return checkType<any>(_.get(obj, ak), tt);
                }
            }
            return true;
        }
        else {
            if (o_keys.includes(tk)) {
                const tt = template.getBakedType(tk);
                if (typeof tt === 'string')
                    return typeof _.get(obj, tk) === tt;
                else {
                    return checkType<any>(_.get(obj, tk), tt);
                }
            }
            return false;
        }
    });
} 
```

自定义类：

```
// MyClasses.ts

import checkType, { bakeChecker } from './TypeChecks';

class Foo {
    a?: string;
    b: boolean;
    c: number;

    public static _checker = bakeChecker({
        __optional: {
            a: ""
        },
        b: false,
        c: 0
    });
}

class Bar {
    my_string?: string;
    another_string: string;
    foo?: Foo;

    public static _checker = bakeChecker({
        __optional: {
            my_string: "",
            foo: Foo._checker
        },
        another_string: ""
    });
} 
```

在运行时检查类型：

```
if (checkType<Bar>(foreign_object, Bar._checker)) { ... } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-29T18:52:39.390

这个答案很简单。然而，这种解决方案至少在 3/4 的情况下是可能的（尽管并不总是理想的）。因此，换句话说，这可能与正在阅读本文的人有关。

假设我有一个非常简单的函数需要知道参数的接口类型：

```
const simpleFunction = (canBeTwoInterfaces: interfaceA | interface B) => { 
  // if interfaceA, then return canBeTwoInterfaces.A
  // if interfaceB, then return canBeTwoInterfaces.B
} 
```

获得最多支持的答案往往是使用“功能检查”。IE，

```
const simpleFunction = (canBeTwoInterfaces: interfaceA | interface B) => { 
  if (canBeTwoInterfaces.onlyExistsOnInterfaceA) return canBeTwoInterfaces.A
  else return canBeTwoInterfaces.B
} 
```

但是，在我正在使用的代码库中，我需要检查的接口主要包含可选参数。另外，我团队中的其他人可能会在我不知情的情况下突然更改名称。如果这听起来像您正在使用的代码库，那么下面的函数会更安全。

就像我之前说的，这可能会让很多人觉得这是一件非常明显的事情。尽管如此，要知道何时何地应用给定的解决方案并不明显，无论它是否恰好是像下面这样一个非常简单的解决方案。

这就是我要做的：

```
const simpleFunction = (
  canBeTwoInterfaces: interfaceA | interface B,
  whichInterfaceIsIt: 'interfaceA' | 'interfaceB'
) => { 
  if (whichInterfaceIsIt === 'interfaceA') return canBeTwoInterface.A
  else return canBeTwoInterfaces.B
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-11-18T01:43:31.593

我知道我偶然发现了一个正确解决这个问题的 github 包，在浏览了我的搜索历史之后，我终于找到了它。查看[typescript-is](https://github.com/woutervh-/typescript-is) - 虽然它需要使用 ttypescript 编译您的代码（我目前正在欺负它使用 create-react-app，稍后将更新成功/失败），您可以做各种疯狂的事情。[与ts-validate-type](https://github.com/edbentley/ts-validate-type)不同，该软件包也得到了积极维护。

您可以检查某些内容是字符串还是数字并按原样使用它，而编译器不会抱怨：

```
import { is } from 'typescript-is';

const wildString: any = 'a string, but nobody knows at compile time, because it is cast to `any`';

if (is<string>(wildString)) { // returns true
    // wildString can be used as string!
} else {
    // never gets to this branch
}

if (is<number>(wildString)) { // returns false
    // never gets to this branch
} else {
    // Now you know that wildString is not a number!
} 
```

您还可以检查自己的接口：

```
import { is } from 'typescript-is';

interface MyInterface {
    someObject: string;
    without: string;
}

const foreignObject: any = { someObject: 'obtained from the wild', without: 'type safety' };

if (is<MyInterface>(foreignObject)) { // returns true
    const someObject = foreignObject.someObject; // type: string
    const without = foreignObject.without; // type: string
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-02-24T07:20:09.340

[与所选解决](https://stackoverflow.com/a/14426274)方案具有相同缺点的简单解决方案解决方案，但此变体捕获 JS 错误，仅接受对象作为参数，并具有有意义的返回值。

```
interface A{
    member:string;
}

const implementsA = (o: object): boolean => {
    try {
        return 'member' in o;
    } catch (error) {
        return false;
    }
}

const a:any={member:"foobar"};

implementsA(a) && console.log("a implements A");
// implementsA("str"); // causes TS transpiler error 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2019-05-14T12:05:46.507

因为在运行时类型是未知的，所以我编写了如下代码来比较未知对象，不是与类型，而是与已知类型的对象：

1.  创建正确类型的示例对象
2.  指定它的哪些元素是可选的
3.  将您的未知对象与此示例对象进行深入比较

这是我用于深度比较的（与接口无关的）代码：

```
function assertTypeT<T>(loaded: any, wanted: T, optional?: Set<string>): T {
  // this is called recursively to compare each element
  function assertType(found: any, wanted: any, keyNames?: string): void {
    if (typeof wanted !== typeof found) {
      throw new Error(`assertType expected ${typeof wanted} but found ${typeof found}`);
    }
    switch (typeof wanted) {
      case "boolean":
      case "number":
      case "string":
        return; // primitive value type -- done checking
      case "object":
        break; // more to check
      case "undefined":
      case "symbol":
      case "function":
      default:
        throw new Error(`assertType does not support ${typeof wanted}`);
    }
    if (Array.isArray(wanted)) {
      if (!Array.isArray(found)) {
        throw new Error(`assertType expected an array but found ${found}`);
      }
      if (wanted.length === 1) {
        // assume we want a homogenous array with all elements the same type
        for (const element of found) {
          assertType(element, wanted[0]);
        }
      } else {
        // assume we want a tuple
        if (found.length !== wanted.length) {
          throw new Error(
            `assertType expected tuple length ${wanted.length} found ${found.length}`);
        }
        for (let i = 0; i < wanted.length; ++i) {
          assertType(found[i], wanted[i]);
        }
      }
      return;
    }
    for (const key in wanted) {
      const expectedKey = keyNames ? keyNames + "." + key : key;
      if (typeof found[key] === 'undefined') {
        if (!optional || !optional.has(expectedKey)) {
          throw new Error(`assertType expected key ${expectedKey}`);
        }
      } else {
        assertType(found[key], wanted[key], expectedKey);
      }
    }
  }

  assertType(loaded, wanted);
  return loaded as T;
} 
```

下面是我如何使用它的示例。

在这个例子中，我希望 JSON 包含一个元组数组，其中第二个元素是一个名为接口的实例`User`（它有两个可选元素）。

TypeScript 的类型检查将确保我的示例对象是正确的，然后 assertTypeT 函数检查未知（从 JSON 加载）对象是否与示例对象匹配。

```
export function loadUsers(): Map<number, User> {
  const found = require("./users.json");
  const sample: [number, User] = [
    49942,
    {
      "name": "ChrisW",
      "email": "example@example.com",
      "gravatarHash": "75bfdecf63c3495489123fe9c0b833e1",
      "profile": {
        "location": "Normandy",
        "aboutMe": "I wrote this!\n\nFurther details are to be supplied ..."
      },
      "favourites": []
    }
  ];
  const optional: Set<string> = new Set<string>(["profile.aboutMe", "profile.location"]);
  const loaded: [number, User][] = assertTypeT(found, [sample], optional);
  return new Map<number, User>(loaded);
} 
```

您可以在用户定义的类型保护的实现中调用这样的检查。

# java - Java-JTable：如何更改特定单元格的属性（字体、颜色...？）

> ID：14425571
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:38:16.970
> 
> 标签：java, swing, fonts, jtable, cell

> **可能重复：**
> [Swing - 根据单元格的值设置单元格的颜色](https://stackoverflow.com/questions/14425364/swing-setting-the-color-of-a-cell-based-on-the-value-of-a-cell)

我有一个电子表格类，其中包含一个 JTable 及其 TableModel。我的主窗口包含这个电子表格和一个按钮列表，例如一个粗体。

我可以成功获取选定的单元格（参见下面的代码），但我不知道如何更改其内容和字体、颜色等。

```
public void actionPerformed(ActionEvent e)
{
    int rowToUpdate = -1, columnToUpdate = -1;
    for(int i = 0 ; i < tableToUpdate.getRowCount() ; i++)
        for (int j = 0 ; j < tableToUpdate.getColumnCount() ; j++)
            if(tableToUpdate.isCellSelected(i, j)){ rowToUpdate = i; columnToUpdate = j; }

    if(rowToUpdate >= 0 && columnToUpdate >= 0)
    {
        if(e.getSource == boldButton)
        {
             // Here, how to change the bold of the cell(rowToUpdate,columnToUpdate)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:15:55.930

几件事：首先，您编写的代码可能要简单得多。JTable 带有开箱即用`getSelectedRow()`的`getSelectedColumn()`方法，因此无需`for`自己编写循环。

话虽如此，如果您只是想更改所选单元格的呈现方式，那么您可能实际上并不想这样做。更改单元格呈现方式的方法是使用`TableCellRenderer`. 当`JTable`s 需要渲染一个单元格时，它们会将有关该单元格的所有信息（其值、是否被选中等）传递给 a `TableCellRenderer`。`DefaultTableCellRenderer`默认情况下安装了一个，它将您的单元格呈现为`JLabels`. 您可以使用`setDefaultRenderer()`. 在您的情况下，应该很容易扩展`DefaultTableCellRenderer`，覆盖`getTableCellRendererComponent()`调用`super()`，然后一旦`super()`返回，如果选择了单元格，则将字体设置为粗体。

javadoc`JTable`有一个指向 JTable 教程的链接，其中有一个关于使用自定义渲染器的特殊部分。可以在[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)找到该教程（以及许多其他很棒的 Swing 教程） 。

# mysql - 用SQL查询在mysql中查找和更新当前直播节目

> ID：14425576
> 
> 赞同：0
> 
> 时间：2013-01-20T14:39:02.330
> 
> 标签：mysql, sql, select

我在 mysql db 中有一个表，其中包含本周的电视节目列表。是这样的。

```
----------------------------------------------
start_time,        tv_program_name    isLive
2013-01-19 17:00   sports news
2013-01-19 18:30   NBA....

......

------------------------------------------------ 
```

我想使用 SQL 通过将 start_time 与 now() 进行比较来找出当前的电视节目，并在 db 中用 isLive = 1 标记当前的电视节目

我尝试使用 sql

```
-------------
SELECT * 
FROM tv_programs
ORDER BY ABS( TIMESTAMPDIFF( 
MINUTE , start_time, NOW( ) ) ) ASC 
------------- 
```

但这不是正确的解决方案，因为它只返回`tv_program`最接近当前的节目，而不是现在正在播放的直播电视节目。

谁能告诉我一些关于这个问题的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:45:33.620

您在寻找更新查询吗？

```
UPDATE tv_programmess
SET isLive = 1
WHERE start_time = Now() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:50:14.477

```
SELECT * FROM tv_programs
WHERE start_time <= NOW()
ORDER BY start_time DESC
LIMIT 1; 
```

# java - 如何在 Eclipse 中运行 JMS 程序的多个实例？

> ID：14425580
> 
> 赞同：0
> 
> 时间：2013-01-20T14:39:15.193
> 
> 标签：java, eclipse, glassfish, jms

[我从http://onjava.com/pub/a/onjava/excerpt/jms_ch2/index.html?page=2](http://onjava.com/pub/a/onjava/excerpt/jms_ch2/index.html?page=2)复制了一个示例聊天应用程序， 我还让它在 GlassFish 下编译和运行。不幸的是，要查看运行中的程序，您需要运行它的多个实例，将不同的用户名作为命令行参数传递。

我知道如何将命令行参数传递给 Eclipse 中的程序。我还可以一次为同一个程序运行不同的配置设置。但是，Eclipse 没有打开不同的控制台窗口，而是对所有内容（包括 GlassFish 服务器）使用相同的控制台窗口。更糟糕的是，Eclipse 会自动在不同用户之间切换。也就是说，一旦我在一个用户名下的 Chat 应用程序中键入一条消息并按 Enter 键，Eclipse 将自动切换到不同用户的控制台窗口。

对于我运行的程序的每个实例，我都需要不同的控制台窗口。有没有办法在 Eclipse 中做到这一点？或者，是否可以在 Eclipse 中启动 GlassFish 服务器，然后在 Eclipse 之外运行该程序？（注意：GlassFish 服务器是通过 Eclipse 安装的，而不是作为单独的服务器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:43:33.800

您可以在 Eclipse 中运行服务器，然后在 Eclipse 之外运行您的程序。

对于控制台：在 Eclipse 中运行的每个应用程序都有自己的控制台窗口。您可以使用控制台视图中的一个图标来切换它们（它看起来像一个监视器）。但是，Eclipse 会“重用”已终止应用程序的控制台窗口。

如果你想有多个并排，请参阅[在 Eclipse 中，我可以一次有多个控制台视图，每个都显示一个不同的控制台吗？](https://stackoverflow.com/questions/7261151/in-eclipse-can-i-have-multiple-console-views-at-once-each-showing-a-different "在 Eclipse 中，我可以同时拥有多个控制台视图，每个视图都显示不同的控制台吗？")

Eclipse 总是切换到其控制台堆栈中的“活动”控制台。您可以使用“标准输出更改时显示控制台”图标关闭此行为。

# python - 你好，带金字塔的斯普罗克斯世界 - 第 2 部分

> ID：14425584
> 
> 赞同：1
> 
> 时间：2013-01-20T14:40:09.457
> 
> 标签：python, pyramid, sprox

我尝试使用金字塔在[Sprox中构建最简单的形式。](http://sprox.org)

```
# model.py
class Allocation:
    # some fields ...
class SproxForm(AddRecordForm):
    __model__ = Allocation

sprox_form = SproxForm(DBSession) 
```

* * *

```
# views.py
@view_config(route_name='sprox_add', renderer='templates/sprox.pt')
def sprox_form_add(request):
    return {'form':sprox_form,'form_input':{}} 
```

* * *

```
<!-- sprox.pt -->
<html>
<body>
<div tal:content="structure form(form_input)"/>
</body>
</html> 
```

当我在浏览器中导航到该视图时，我得到

```
Traceback (most recent call last):
  File "D:\prg\py2\lib\site-packages\pyramid_debugtoolbar-1.0.4-py2.7.egg\pyramid_debugtoolbar\panels\performance.py", line 69, in noresource_timer_handler
    result = handler(request)
  File "D:\prg\py2\lib\site-packages\pyramid\tweens.py", line 21, in excview_tween
    response = handler(request)
  File "D:\prg\py2\lib\site-packages\pyramid_tm-0.7-py2.7.egg\pyramid_tm\__init__.py", line 82, in tm_tween
    reraise(*exc_info)
  File "D:\prg\py2\lib\site-packages\pyramid_tm-0.7-py2.7.egg\pyramid_tm\__init__.py", line 63, in tm_tween
    response = handler(request)
  File "D:\prg\py2\lib\site-packages\pyramid\router.py", line 161, in handle_request
    response = view_callable(context, request)
  File "D:\prg\py2\lib\site-packages\pyramid\config\views.py", line 367, in rendered_view
    context)
  File "D:\prg\py2\lib\site-packages\pyramid\renderers.py", line 531, in render_view
    return self.render_to_response(response, system, request=request)
  File "D:\prg\py2\lib\site-packages\pyramid\renderers.py", line 561, in render_to_response
    result = self.render(value, system_values, request=request)
  File "D:\prg\py2\lib\site-packages\pyramid\renderers.py", line 557, in render
    result = renderer(value, system_values)
  File "D:\prg\py2\lib\site-packages\pyramid\chameleon_zpt.py", line 42, in __call__
    result = self.template(**system)
  File "D:\prg\py2\lib\site-packages\chameleon\template.py", line 125, in __call__
    return self.render(**kwargs)
  File "D:\prg\py2\lib\site-packages\chameleon\zpt\template.py", line 257, in render
    return super(PageTemplate, self).render(**vars)
  File "D:\prg\py2\lib\site-packages\chameleon\template.py", line 190, in render
    raise_with_traceback(exc, tb)
  File "D:\prg\py2\lib\site-packages\chameleon\template.py", line 172, in render
    self._render(stream, econtext, rcontext)
  File "sprox_3aacd319285f07641f9292cdee192301f3a0bccd.py", line 136, in render

  File "D:\prg\py2\lib\site-packages\chameleon\zpt\template.py", line 261, in include
    self._render(*args, **kwargs)
  File "template_f352de36cd7e76f81188f12078004a91a152cf44.py", line 376, in render

  File "sprox_3aacd319285f07641f9292cdee192301f3a0bccd.py", line 106, in __fill_content

  File "D:\prg\py2\lib\site-packages\sprox\viewbase.py", line 113, in __call__
    return self.display(*args, **kw)
  File "D:\prg\py2\lib\site-packages\sprox\viewbase.py", line 119, in display
    return self.__widget__.display(*args, **kw)
  File "D:\prg\py2\lib\site-packages\tw2\core\widgets.py", line 438, in display
    return self.generate_output(displays_on)
  File "D:\prg\py2\lib\site-packages\tw2\core\widgets.py", line 475, in generate_output
    mw,
  File "D:\prg\py2\lib\site-packages\tw2\core\templating.py", line 204, in render
    return callback(kwargs)
  File "D:\prg\py2\lib\site-packages\tw2\core\templating.py", line 144, in <lambda>
    return lambda kwargs: Markup(tmpl.render(**kwargs))
  File "D:\prg\py2\lib\site-packages\mako\template.py", line 412, in render
    return runtime._render(self, self.callable_, args, data)
  File "D:\prg\py2\lib\site-packages\mako\runtime.py", line 766, in _render
    **_kwargs_for_callable(callable_, data))
  File "D:\prg\py2\lib\site-packages\mako\runtime.py", line 798, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "D:\prg\py2\lib\site-packages\mako\runtime.py", line 824, in _exec_template
    callable_(context, *args, **kwargs)
  File "form_mak", line 49, in render_body

  File "D:\prg\py2\lib\site-packages\tw2\core\widgets.py", line 436, in display
    r.prepare()
  File "D:\prg\py2\lib\site-packages\tw2\core\resources.py", line 165, in prepare
    resources = rl['middleware'].resources
KeyError: 'middleware'

 - Expression: "form(form_input)"
 - Filename:   d:\prg\py2\awsalloc2\awsalloc2\templates\sprox.pt
 - Location:   (9:28)
 - Source:     ... v tal:content="structure form(form_input)" />
                                            ^^^^^^^^^^^^^^^^
 - Arguments:  repeat: {...} (0)
               renderer_name: templates/sprox.pt
               req: <Request - at 0x46fceb8L>
               form: <SproxForm - at 0x471cb38L>
               request: <Request - at 0x46fceb8L>
               renderer_info: <RendererHelper - at 0x4a3b7b8L>
               context: <instance None at 0x4f93c88L>
               form_input: {...} (0)
               view: <function sprox_form_add at 0x4a3d278L> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T21:40:22.160

我不知道你真正的问题是什么，但我整理了一个小演示来演示如何在 Pyramid 下设置 Sprox。这有点痛苦，并且使用了一些我认为已经过时的习语，包括要求 Paste、SQLAlchemy < 0.8、Genshi 和 ToscaWidgets < 2.0。希望这可以帮助。

如果我不得不猜测，您并没有将中间件添加到您的应用程序中。

```
app = tw.api.make_middleware(
    app,
    {
        'toscawidgets.framework' : 'wsgi',
        'toscawidgets.middleware.inject_resources' : True,
    },
    stack_registry=True,
) 
```

[https://github.com/mmerickel/pyramid_sprox_demo](https://github.com/mmerickel/pyramid_sprox_demo)

# vim - 在多行选择上执行插入

> ID：14425585
> 
> 赞同：1
> 
> 时间：2013-01-20T14:40:33.080
> 
> 标签：vim

抱歉，如果这是一个无聊的问题，但是当我执行以下操作时，为什么执行函数会在选择中插入数量等于数字行的字符：

```
execute "silent normal!`>a".some_char 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:00:35.163

当您键入`:`从可视模式进入普通模式时，vim 会在您的命令之前自动插入与可视选择相对应的范围。看起来像

```
:'<,'>command 
```

当附加一个范围时，该`:normal`命令将针对范围中的每一行执行。

您应该找到另一种方法来作用于整个视觉选择，而不是作用于每一行。向我们提供您的完整功能和现实用例将帮助我们帮助您。

```
`>ax 
```

可能不会比您尝试做的任何事情慢得多或更冗长。

# java - 是否存在关于类结构的约定？

> ID：14425587
> 
> 赞同：2
> 
> 时间：2013-01-20T14:41:03.133
> 
> 标签：java, conventions

当我用 Java 编写一个类时，它（几乎）总是看起来像这样：

```
public class MyClass {

    // attributes

    // constructors

    // methods:
    //   * "interesting" methods
    //   * getters and setters
    //   * toString / equals / hashCode
} 
```

特别是，我总是在开头写下所有属性。

有没有约定如何在 Java 中构造类？

[我在Oracle Code Conventions](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)中找不到它。我对资源（例如其他风格指南，如[Mozilla Coding Style](https://developer.mozilla.org/en-US/docs/Developer_Guide/Coding_Style)或书籍）感兴趣，因为我是一名 Java 导师，我想给我的学生更多的东西，而不是“我是这样学的，所以你也应该这样做” . 如果有理由/来源提出类中的其他结构，我也很高兴知道这一点。

编辑：虽然我对你的想法很感兴趣，但我想我应该强调**我期待消息来源**。个人经验很有趣，但我也做了上面的结构很常见的经验。但我想给我的学生一些比模糊印象更多的东西，每个人似乎都在使用这种结构。特别是，因为他们中的一些人不使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:30:12.517

您应该更仔细阅读：您在第 3.1.3 节中链接到的 Oracle 编码约定：

> 下表按出现的顺序描述了类或接口声明的各个部分。有关包含注释的示例，请参见第 19 页的“Java 源文件示例”。
> 
> 1.  **类/接口文档注释`(/**...*/)`**
>     
>     
>     
>     请参阅第 9 页的“文档注释”以了解有关此注释的内容的信息。
>     
>     
> 2.  **类或接口语句**
>     
>     
> 3.  **`(/*...*/)`如有必要，类/接口实现注释**
>     
>     
>     
>     此注释应包含不适合类/接口文档注释的任何类范围或接口范围的信息。
>     
>     
> 4.  **类（静态）变量**
>     
>     
>     
>     首先是公共类变量，然后是受保护的，然后是私有的。
>     
>     
> 5.  **实例变量**
>     
>     
>     
>     首先是公共的，然后是受保护的，然后是私有的。
>     
>     
> 6.  **构造函数**
>     
>     
> 7.  **方法**
>     
>     
>     
>     这些方法应该按功能分组，而不是按范围或可访问性分组。例如，私有类方法可以位于两个公共实例方法之间。目标是使阅读和理解代码更容易。

也就是说，这个约定已经过时了，通常不遵循细则。例如，按可访问性排序字段似乎很奇怪，但按功能排序方法。事实上，我很少在专业代码中看到按可访问性排序的字段。不过，在专业代码中，项目符号的顺序非常普遍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:52:52.067

没有`the only`约定如何组织您的课程来源。您列出的结构非常常见-首先是属性，然后是构造函数，然后是方法。但是，有些团队喜欢将属性保留在类的尾部，有些团队正在将字段定义与其 setter 和 getter 混合在一起。团队应该在内部就一些约定达成一致，以保持其所有来源看起来相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:03:09.880

您可以使用 Checkstyle (http://checkstyle.sourceforge.net/) 之类的工具。

它包含对类结构的一些检查（例如修饰符的顺序[http://checkstyle.sourceforge.net/config_modifier.html](http://checkstyle.sourceforge.net/config_modifier.html)，命名约定[http://checkstyle.sourceforge.net/config_naming.html](http://checkstyle.sourceforge.net/config_naming.html)等）。

这不是呈现编码约定的最佳方式。但实际的优势是 Checkstyle 可以直接在您的 IDE 或自动构建中使用，因此您的学生可以看到它们直接应用于他们的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:40:40.060

与每种语言一样，除了语言规范（如果存在）以及团队或项目的本地约定之外，没有其他权威来源。Java 语言规范没有强制规定成员的特定顺序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-20T14:58:45.777

我不能支持这一点，但我相信在类的开头声明成员变量，然后是构造函数是适用于所有语言的唯一“约定”。我使用引号是因为它很自然地完成，好像这是将它们放在对象定义中的唯一合乎逻辑的方式（不像其他东西，例如 C++ 样式括号等）

# ruby-on-rails - 充当可标记标签未显示在我的视图中

> ID：14425589
> 
> 赞同：0
> 
> 时间：2013-01-20T14:41:22.100
> 
> 标签：ruby-on-rails, activeadmin, acts-as-taggable

我正在使用 activeadmin 并充当可标记的 gem。当我在 activeadmin 上插入标签时，它会保存标签但不在视图中显示标签

activeadmin 模型：

```
 ActiveAdmin.register Project do      
     index do
        column :id
        column :name
        column :created_at
        column :tag_list
        default_actions  
    end

    form(:html => { :multipart => true }) do |f|
        f.inputs do
        f.input :name
        f.input :tag_list, :label => "Tags", :hint => 'Comma separated'
        f.input :content, :input_html => {:class => "ckeditor"}
        f.input :image, :as => :file
    end
        f.buttons
    end 
   end 
```

模型：

```
class Project < ActiveRecord::Base
  attr_accessible :content, :name, :image, :tag_list
  mount_uploader :image, ImageUploader
  acts_as_taggable

  def previous_project
    self.class.first(:conditions => ["name < ?", name], :order => "name desc")
  end

  def next_project
    self.class.first(:conditions => ["name > ?", name], :order => "name asc")
  end
end 
```

看法：

```
<% @projects.each do |project| %>
    <figure class="d1-d3">
        <%= image_tag project.image_url(:thumb) if project.image? %>
        <figcaption>
            <h4><%= link_to project.name, project %></h4>
            <% project.tag_list %>
        </figcaption>
    </figure>
<% end %> 
```

我尝试使用`<%= project.tags %>`，它也没有工作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:29:32.137

尝试将此添加到您的项目模型中（在acts_as_taggable下方）

```
acts_as_taggable_on :tags 
```

并记住运行迁移，例如：

```
create_table :tags do |t|
  t.string :name
end

create_table :taggings do |t|
  t.references :tag

  # You should make sure that the column created is
  # long enough to store the required class names.
  t.references :taggable, :polymorphic => true
  t.references :tagger, :polymorphic => true

  # limit is created to prevent mysql error o index lenght for myisam table type.
  # http://bit.ly/vgW2Ql
  t.string :context, :limit => 128

  t.datetime :created_at
end

add_index :taggings, :tag_id
add_index :taggings, [:taggable_id, :taggable_type, :context] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:30:30.240

在视图中错过了等号

看法：

```
<% @projects.each do |project| %>
    <figure class="d1-d3">
        <%= image_tag project.image_url(:thumb) if project.image? %>
        <figcaption>
            <h4><%= link_to project.name, project %></h4>
            <%= project.tag_list %>
        </figcaption>
    </figure>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:00:04.273

关于什么：

```
 row :tags do
    resource.tag_list.join(", ")
  end 
```

# java - 如何遍历hashmap并将实体存储到mysql中

> ID：14425590
> 
> 赞同：0
> 
> 时间：2013-01-20T14:41:28.007
> 
> 标签：java, url, hashmap, loops

抱歉，我是新手，我一直在寻找有关如何迭代 hashmap 并将实体存储到 MySQL 数据库中的示例。打击代码下载我想存储到我的数据库中的汇率。输出是

```
{CCY=USD, RATE=1.5875}
{CCY=EUR, RATE=1.1919}
{CCY=ALL, RATE=166.2959}
{CCY=AMD, RATE=645.4025} 
```

如何迭代 HashMap 并将其存储到我的数据库中？一个插图会很好或类似于这种情况的来源。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

public class Rate {
    /** list of string array containing IOSCurrencyCodes*/
        final String[] CURRENCY = new String[] { "USD","EUR","ALL","AMD",};

        @SuppressWarnings("rawtypes")
        void checkRateAllAtEnd() throws Exception {     
                List<Callable<HashMap>> tasks = new ArrayList<Callable<HashMap>>();
                for (final String ccy : CURRENCY) {
                        tasks.add(new Callable<HashMap>() {
                                public HashMap<String, Comparable> call() throws Exception {
                                        return getRates(ccy);
                                }
                        });
                }
                ExecutorService executorPool = Executors.newCachedThreadPool();
                final List<Future<HashMap>> listRates = executorPool.invokeAll(tasks, 3600, TimeUnit.SECONDS);

                for (Future<HashMap> rate : listRates) {
                        HashMap ccyRate = rate.get();

                        System.out.println(ccyRate);
                     }
                }
                @SuppressWarnings("rawtypes")
                public HashMap<String, Comparable> getRates(String ccy) throws Exception {
                        URL url = new URL("http://finance.yahoo.com/d/quotes.csv?e=.csv&f=sl1d1t1&s=GBP"
                                                        + ccy + "=X");
                        BufferedReader reader = new BufferedReader(new InputStreamReader(
                                        url.openStream()));

                        String data = reader.readLine();
                        String[] dataItems = data.split(",");
                        Double rate = Double.valueOf(dataItems[1]);

                        HashMap<String, Comparable> ccyRate = new HashMap<String, Comparable>();
                        ccyRate.put("CCY", ccy);
                        ccyRate.put("RATE", rate);

                        return ccyRate;           
                }
        public static void main(String[] args) {
            Rate ccyRate = new Rate();
                try {
                       //ccyConverter.checkRateSequential();
                       ccyRate.checkRateAllAtEnd();
                } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:46:29.600

`Map`提供了`entrySet`对遍历地图非常有用的方法。

> Map#entrySet 返回此映射中包含的映射的集合视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射。
> 
> 参考 -[链接](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)

代码 -

```
HashMap<String, Comparable> ccyRate = new HashMap<String, Comparable>();
for(Map.Entry<String, Comparable> entry: ccyRate.entrySet){
    System.out.println(entry.getKey()+" - "+entry.getValue());
} 
```

# c++ - 在 C++ 中取消引用 NULL 指针

> ID：14425591
> 
> 赞同：2
> 
> 时间：2013-01-20T14:41:40.337
> 
> 标签：c++, pointers, null

所以我试图熟悉c++。这是应该练习使用指针的任务。这是怎么回事：

> 编写一个函数，提示用户输入他或她的名字和姓氏，作为两个单独的值。此函数应通过附加指针将这两个值返回给调用者。仅当调用者为姓氏传入 NULL 指针时，它才应提示输入姓氏。

我试过几个版本。我现在坚持的是：

```
#include <iostream>
#include <string>

using namespace std;

void getFullName(string *p_first, string *p_last) {
    cout << "First name:";
    getline(cin, *p_first);
    if (!p_last) {
        cout << "Last name:";
        getline(cin, *p_last);
    }
}

int main() {

    string first;
    string *p_first = &first;
    string *p_last = NULL;

    getFullName(p_first, p_last);

    cout << *p_first << endl << *p_last << endl;
    return 0;
} 
```

嗯，它崩溃了。我试图传递对“最后一个”的引用，然后指向它。但退出函数后，指针再次为 NULL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T15:25:16.270

我认为练习的文本有错误，应该是：

> 编写一个函数，提示用户输入他或她的名字和姓氏，作为两个单独的值。此函数应通过附加指针将这两个值返回给调用者。仅当调用者为姓氏传入一个**非 NULL**指针时，它才应提示输入姓氏。

就目前而言，您的代码通过取消引用空指针导致未定义的行为

```
void getFullName(string *p_first, string *p_last) {
    cout << "First name:";
    getline(cin, *p_first);
    if (!p_last) {    /* <-- This test should be inverted */
        cout << "Last name:";
        /* Now, you get here only when p_last == NULL. On the next line, 
         * you dereference that null-pointer and try to read a string into 
         * non-existing memory: recipe for disaster.
         * With the condition inverted, you would only get here if you have 
         * a string to store the text in. */ 
        getline(cin, *p_last);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:43:09.367

不要使用指针，你不需要指针。只需通过引用传递参数：

```
void getFullName(string& p_first, string& p_last) 
```

但是，问题是您要取消引用`p_last`- `NULL`> 未定义的行为：

```
if (!p_last) {  //this evaluates to true, because p_last==NULL
    cout << "Last name:";
    getline(cin, *p_last);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:21:41.807

首先，分配是错误的（如果这是完整的分配），或者您对分配的解释是错误的。这是一个读取姓氏的版本，如果 p_last 指向应该存储它的字符串：

```
void getFullName(string *p_first, string *p_last) {
    cout << "First name:";
    getline(cin, *p_first);
    if (p_last) {
        cout << "Last name:";
        getline(cin, *p_last);
    }
} 
```

这是一个版本，`p_last`如果它不为 NULL，则用作姓氏，否则从用户读取姓氏，并且在这两种情况下都返回全名`p_first`：

```
void getFullName(string *p_first, string *p_last) {
    cout << "First name:";
    getline(cin, *p_first);
    string lastname;
    if (!p_last) {
        cout << "Last name:";
        getline(cin, lastname);
    } else {
        lastname = *p_last;
    }
    *p_first += lastname;
} 
```

这是一个版本，它使用对指针的引用来改变`p_last`它是否为 NULL

```
void getFullName(string *p_first, string *&p_last) {
    cout << "First name:";
    getline(cin, *p_first);
    if (!p_last) {
        p_last = new string;
        cout << "Last name:";
        getline(cin, *p_last);
    }
} 
```

但是，这些都不符合您的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T14:55:45.547

它不起作用的原因是因为调用`getline`将字符串引用 ( `basic_string<>&`) 作为第二个参数，您正在取消引用空指针并将其传递。这几乎总是会出错。你需要`new`一个新的字符串来传递给它，但这是一个坏主意，因为它几乎肯定会导致内存泄漏，因为你已经给自己没有办法将它传递回来。

如果您传递一个指针，期望它指向的值被更改，因此充当返回值，您需要提供一个有效的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T14:50:47.400

鉴于您的问题表明您使用了额外的，我将其写为：

```
string getFullName()
{
    string first, last;
    cout << "First name:";
    getline(cin, first);
    cout << "Last name:";
    getline(cin, last);
    return first + last;  // note use of additional
} 
```

# php - Javascript函数未定义

> ID：14425592
> 
> 赞同：1
> 
> 时间：2013-01-20T14:41:45.790
> 
> 标签：php, javascript, jquery, function

这就是我所拥有的：

```
function loadGraphs(datawijk){

    $.ajax({                                      
      url: './api5.php',                  //the script to call to get data          
      data: {
       wijk: datawijk,
        },                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(rows)          //on recieve of reply
      {
        var htmlContent = "";
        // ADD TO 

        htmlContent += '<tr><th scope="row">Geboortes</th>';

        $.each(rows, function(i, data) {
          $.each(data, function(j, year) {
            htmlContent += 
              '<td>' + year + '</td>';
          });
        });

        htmlContent += '</tr>';

        var lol = updateOverlijdens(datawijk, htmlContent);
        alert(lol);

        $('#graphs table tbody').html(htmlContent);
      }   
    });
}

function updateOverlijdens(datawijk, htmlContent){

    $.ajax({                                      
      url: './api4.php',                  //the script to call to get data          
      data: {
       wijk: datawijk,
        },                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(rows)          //on recieve of reply
      {
        // ADD TO 

        htmlContent += '<tr><th scope="row">Overlijdens</th>';

        $.each(rows, function(i, data) {
          $.each(data, function(j, year) {
            htmlContent += 
              '<td>' + year + '</td>';
          });
        });

        htmlContent += '</tr>';

        return htmlContent;
      }   
    });
} 
```

当我发出警报时（大声笑）；在函数 loadGraphs 我得到 undefined ... 当我做 alert(htmlContent); 在函数 updateOverlijdens 中，就在我返回值之前，我做对了。只有当我提醒我的函数 loadGraphs 中的值时，我才会得到未定义。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:43:50.473

你得到未定义的原因是你没有返回任何东西 `updateOverlijdens`（但从内部函数成功）

您正在运行异步代码，通常您无法使用当前正在使用的函数返回模式轻松解决此问题，因为在返回时数据将不可用。你需要的是回调。

请参阅[此页面](http://api.jquery.com/jQuery.ajax/)以获取 jQuery ajax 的良好使用示例。您想要做的是将一个函数传递给 updateOverlijdens 并在您的 ajax 成功回调触发时调用它。网上有很多例子（在上面的链接中）。

例如，这里是您的代码在修改为正确的回调模式后解决了异步执行的问题

```
function loadGraphs(datawijk){

    $.ajax({                                      
      url: './api5.php',                  //the script to call to get data          
      data: {
       wijk: datawijk,
        },                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(rows)          //on recieve of reply
      {
        var htmlContent = "";
        // ADD TO 

        htmlContent += '<tr><th scope="row">Geboortes</th>';

        $.each(rows, function(i, data) {
          $.each(data, function(j, year) {
            htmlContent += 
              '<td>' + year + '</td>';
          });
        });

        htmlContent += '</tr>';
        updateOverlijdens(datawijk, htmlContent,function(lol){
            alert(lol);
            $('#graphs table tbody').html(lol);
        });

      }   
    });
}

function updateOverlijdens(datawijk, htmlContent,callback){

    $.ajax({                                      
      url: './api4.php',                  //the script to call to get data          
      data: {
       wijk: datawijk,
        },                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(rows)          //on recieve of reply
      {
        // ADD TO 

        htmlContent += '<tr><th scope="row">Overlijdens</th>';

        $.each(rows, function(i, data) {
          $.each(data, function(j, year) {
            htmlContent += 
              '<td>' + year + '</td>';
          });
        });

        htmlContent += '</tr>';

        callback(htmlContent)
      }   
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:07:57.620

As explained by a lot of answers, the problem is that you're trying to return something from the AJAX call back to the function which initiated the call. This cannot work, since the caller does not wait for the AJAX call to complete and will return before it is completed. That's the whole idea about *asynchronous* calls: you don't want to block the execution to wait for the results to come in.

One way to handle this is by passing a callback function which needs to be executed when the results are retrieved. This function will then be called from within the AJAX success callback.

Another interesting approach is to make use of jQuery's [deferred](http://api.jquery.com/jQuery.Deferred/)s and [promise](http://api.jquery.com/deferred.promise/)s. A promise represents some value which will be retrieved somewhere in the future. A deferred produces a promise and resolves it later on. For example, all AJAX functions return a promise and you can retrieve a promise from any jQuery object which is resolved when all animations are completed.

In your case, you can create a deferred which is resolved with the `htmlContent` when the AJAX results are retrieved. You return the promise of that deferred from the function so the caller can bind callbacks to it or combine it with other promises.

```
function updateOverlijdens(datawijk) {
    // Create the deferred
    var dfd = new jQuery.Deferred();
    // Initiate the AJAX request
    $.ajax({                                      
        url: './api4.php',
        data: {
            wijk: datawijk,
        },
        dataType: 'json',
        success: function(rows) {
            var htmlContent = '<tr><th scope="row">Overlijdens</th>';

            $.each(rows, function(i, data) {
                $.each(data, function(j, year) {
                    htmlContent += '<td>' + year + '</td>';
                });
            });

            htmlContent += '</tr>';

            // Resolve the deferred
            dfd.resolve(htmlContent);
        },
        error: function() {
            // An error occurred, reject the deferred
            dfd.reject();
        }
    });
    // Return a promise
    return dfd.promise();
} 
```

**BEGIN EDIT**

Thanks to Benjamin Gruenbaum for pointing out my usage of the [deferred anti-pattern](https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern). Here's an implementation using `.then` to do the chaining:

```
function updateOverlijdens(datawijk) {
    return $.ajax({                                      
        url: './api4.php',
        data: {
            wijk: datawijk,
        },
        dataType: 'json'
    }).then(function(rows) {
        var htmlContent = '<tr><th scope="row">Overlijdens</th>';

        $.each(rows, function(i, data) {
            $.each(data, function(j, year) {
                htmlContent += '<td>' + year + '</td>';
            });
        });

        htmlContent += '</tr>';

        return htmlContent;
    });
} 
```

**END EDIT**

You can then use the promise in your `loadGraphs` AJAX success callback like so:

```
// Produce the table header
var htmlContent = '<tr><th scope="row">Geboortes</th>';
$.each(rows, function(i, data) {
    $.each(data, function(j, year) {
        htmlContent += '<td>' + year + '</td>';
    });
});

var promise = updateOverlijdens(datawijk);
promise.then(function(htmlOverlijdens) {
    // Append to the previously created HTML content
    htmlContent += htmlOverlijdens;
    // Apply the HTML
    $('#graphs table tbody').html(htmlContent);
}); 
```

The advantage of using promises is that they give caller much more flexibility. The caller can easily register multiple callbacks using [`then()`](http://api.jquery.com/deferred.then/), combine it with other promises using [`jQuery.when()`](http://api.jquery.com/jQuery.when/) or pipe the results to another promise using ~~`pipe()`~~ `then`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:46:41.113

是的。没有错误。您需要为您的函数定义不在 $.ajax 中的返回值。在您的代码中，您将值返回给 $.ajax，而不是 updateOverlijdens。正确的代码需要是：

```
function updateOverlijdens(datawijk, htmlContent){    
    $.ajax({ ....}) 
    return 'some value' 
} 
```

# python - 具有某个变量的值时如何自动重新加载网页？

> ID：14425593
> 
> 赞同：0
> 
> 时间：2013-01-20T14:41:53.597
> 
> 标签：python, html, cherrypy, page-refresh

在以下 python/html 脚本中，我想在变量“condition”的值等于“1”时自动刷新网页。这样页面就会自动显示包含变量“myText”的新文本。变量“myText”可以包含任何文本，以下脚本只是一个示例。

```
#!/usr/bin/python
import cherrypy
import os.path
import struct
from auth import AuthController, require, member_of, name_is
import subprocess
import commands

class Server(object):
    led_logout=0 
    led_restart=0
    condition=0
    _cp_config = {
    'tools.sessions.on': True,
    'tools.auth.on': True
    }   
    auth = AuthController()      
    @cherrypy.expose
    @require()
    def index(self,logout=''):

    html = """
     <html>
      <head>
      </head>
          <body>
        <p>{htmlText} 
        <p>
            <a href="?logout=1" onclick="return confirm('Are you sure you want to logout?');"><img src="images/Logout.png"></a>
        </ul>
          </body>
     </html>    
           """
    myText = ''
    myText = "Hello"
    if logout:
        self.led_logout = int(logout)             
    if self.led_logout:
        print "Logout !!!!!"
        AuthController().logout('/?logout=0')         
    return html.format(htmlText=myText)      
    index.exposed = True
#configuration
conf = {
    'global' : { 
        'server.socket_host': '0.0.0.0', #0.0.0.0 or specific IP
        'server.socket_port': 8085 #server port
    },

    '/images': { #images served as static files
        'tools.staticdir.on': True,
        'tools.staticdir.dir': os.path.abspath('/home/ubuntu/webserver/images')
    }
    }
cherrypy.quickstart(Server(), config=conf) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:16:04.400

好的，您可以从需要一些 ajax 的服务器获取文本。

试试这个...

```
#!/usr/bin/python
import cherrypy
import os.path
import struct
from auth import AuthController, require, member_of, name_is
import subprocess
import commands

class Server(object):
    led_logout=0 
    led_restart=0
    condition=0
    _cp_config = {
    'tools.sessions.on': True,
    'tools.auth.on': True

    auth = AuthController()
    @cherrypy.expose
    @require()
    def index(self):

    html = """
     <html>
      <head>
      </head>
          <body>
       <script language="javascript" type="text/javascript">
       function getMyText()
       {
           // code for IE7+, Firefox, Chrome, Opera, Safari
           if(window.XMLHttpRequest)
               xmlhttp=new XMLHttpRequest();
           else// code for IE6, IE5
               xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

           xmlhttp.onreadystatechange=function()
           {
               if (xmlhttp.readyState==4 && xmlhttp.status==200)
               {
                   document.getElementById('message').innerHTML= = xmlhttp.responseText;
               }
           }

           xmlhttp.open("GET","/getMyText?logout=True", true);
           xmlhttp.send();
       }
       </script>
        <p id="message"><p>
        <a href="?logout=1" onclick="return var r = confirm('Are you sure you want to logout?');if (r==true){getMyText(condition);"><img src="images/Logout.png"></a>
        </ul>
          </body>
     </html>    
           """
    def getMyText(logout=False)
        myText = "Hello"
        if logout:
            self.led_logout = int(logout)
        if self.led_logout:
            print "Logout !!!!!"
            AuthController().logout('/?logout=0')
        return myText
    index.exposed = True

#configuration
conf = {
    'global' : { 
        'server.socket_host': '0.0.0.0', #0.0.0.0 or specific IP
        'server.socket_port': 8085 #server port
    },

    '/images': { #images served as static files
        'tools.staticdir.on': True,
        'tools.staticdir.dir': os.path.abspath('/home/ubuntu/webserver/images')
    }
    }
cherrypy.quickstart(Server(), config=conf) 
```

希望这可以帮助！

安德鲁

# javascript - jQuery：总是在 dom-tree 的图像下找到下一个 .gallery？

> ID：14425598
> 
> 赞同：0
> 
> 时间：2013-01-20T14:42:30.020
> 
> 标签：javascript, jquery, jquery-selectors

**HTML**

```
<div class="page-content">
    <div class="something">
      <img class="image" src="something alt="something">
    </div>
    <div class="another-div-in-there"></div>
    <div class="gallery">
      //stuff in there
    </div>

    <div class="something">
      <img class="image" src="something alt="something">
    </div>
    <div class="another-div-in-there"></div>
    <div class="another-div-in-there"></div>
    <div class="gallery">
      //stuff in there
    </div>

    <div class="something">
      <img class="image" src="something alt="something">
    </div>
    <div class="another-div-in-there"></div>
    <div class="gallery">
      //stuff in there
    </div>
</div> 
```

* * *

**jQuery**

```
$(".page-content .image").each(function(i) {
    //$(this).closest('.gallery') ??
}); 
```

如何`.gallery`为每个`.image`找到/选择“下一个”或“以下”

因此，当运行`each()`循环时，我想要第一个图像的第一个画廊。当运行第二个时，`.image`我想在 dom-tree 中找到`.gallery`第二个“下面”的那个。`.image`

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:44:01.283

一种可能的解决方案：

```
$(".page-content .image").each(function() {
    $(this).parent().next(".gallery");
}); 
```

这里使用类名（如果存在）`parent()`上升`<div class="something">`并`next(".gallery")`获取下一个兄弟元素。`"gallery"`

* * *

对于更新的问题，您可以使用`.nextUntil()`方法：

```
$(this).parent().nextUntil(".gallery").next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:44:18.817

```
$(".page-content .image").each(function() {
    $(this).parent().next('.gallery');
}); 
```

**编辑**：对于您更新的问题：

```
$(".page-content .image").each(function() {
    $(this).parent().nextAll('.gallery:first');
}); 
```

[在此处](http://jsfiddle.net/uHya7/)查看示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T14:46:58.450

这个插件就是为此而写的。*免责声明：我写的*

[http://techfoobar.com/jquery-next-in-dom/](http://techfoobar.com/jquery-next-in-dom/)

```
$(".page-content .image").each(function() {
    $(this).nextInDOM('.gallery');
}); 
```

# android - 如何编辑活动比例

> ID：14425603
> 
> 赞同：0
> 
> 时间：2013-01-20T14:42:44.997
> 
> 标签：android, properties, android-activity

我使用 ADT Bundle。我的项目中有 4 项活动。activity_main 是主要活动，是在创建项目时创建的。在我使用 File -> New -> Other 创建了其他活动之后。在这个向导中，我有 chechbox “Launcher Activity”。我选择了它。在我了解此复选框在设备的主菜单中显示您的活动之后。我怎样才能取消选择这个？

`

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="16dp"
    android:layout_marginTop="14dp"
    android:text="Bu oyun adamlarda hasaplamalary gechirmani owretmek uchin duzulendir!!!"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1"
    android:layout_marginRight="22dp"
    android:layout_marginTop="21dp"
    android:text="Habarlashmak uchin: +99365814342" /> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:46:26.023

打开您的 AndroidManifest.xml，转到 XML 视图，然后`intent-filter`从启动器中不需要的活动中删除以下内容：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

# java - 包装类 - 为什么整数文字对于 Long 失败但适用于任何更小的东西

> ID：14425606
> 
> 赞同：10
> 
> 时间：2013-01-20T14:43:02.780
> 
> 标签：java, wrapper, autoboxing

只是想了解自动装箱，我除了做一件事之外：

```
Short s = 250;
Long l = 250; 
```

分配`Long l`失败。我预计，这是因为您无法扩大然后框（即，它试图将`int`值扩大`250`到 a`long`然后将其装箱，这是它无法做到的）。

但是，分配`Short s`工作。这是怎么回事？我的假设是它仍在进行拳击和某种转换。但是，如果它知道`250`适合 a的情况`short`，为什么它不知道`250`适合 a`long`呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T14:58:49.017

通常，您不能在赋值中应用多个（隐式）转换（[JLS §5.2 赋值转换](https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.2)）：

> 当将表达式的值（第 15.26 节）分配给变量时，就会发生赋值转换：必须将表达式的类型转换为变量的类型。分配上下文允许使用**以下之一**：
> 
> *   身份转换（§5.1.1）
> *   扩大的原始转换（§5.1.2）
> *   扩大参考转换（§5.1.5）
> *   一个装箱转换（第 5.1.7 节）可选地后跟一个扩大的参考转换
> *   一个拆箱转换（第 5.1.8 节）可选地后跟一个扩大的原始转换。

`Long l=250;`需要两次转换（扩大原始转换，然后是装箱转换），这就是它无法编译的原因。

`Long l=250l;`编译，因为它需要一次装箱转换。

但是缩小常量表达式的转换是一种特殊情况，这就是`Short s=250;`编译的原因：

> 此外，如果表达式是 byte、short、char 或 int 类型的常量表达式（第 15.28 节）：
> 
> *   如果变量的类型是 byte、short 或 char，并且常量表达式的值可以用变量的类型表示，则可以使用窄化原语转换。
> *   如果变量的类型是：
>     *   字节和常量表达式的值可以用字节类型表示。
>     *   Short 并且常量表达式的值可以用 short 类型表示。
>     *   字符和常量表达式的值可以用 char 类型表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:17:57.783

理想情况下，不应允许自动缩小。

但是由于没有字节/短文字，我们不能写

```
byte b = 0b; 
```

这似乎很愚蠢

```
byte b = (byte)0; 
```

所以常量整数的自动变窄是允许的，所以我们可以写

```
byte b = 0; 
```

它被转移到自动装箱案例中。

对于 long/Long，因为有 long 字面量，所以这不是什么问题。尽管如此，它还是应该被允许的，因为有符号整数的自动扩展总是安全的。

# android - 安装谷歌USB驱动后如何在电脑上连接安卓USB设备

> ID：14425610
> 
> 赞同：-2
> 
> 时间：2013-01-20T14:43:24.353
> 
> 标签：android

我已经在手机中使用 SDK 管理器和调试模式安装了 Google USB 驱动程序。但是当我将安卓手机连接到我的电脑时，我看到 USB 已连接，但是当我想将应用程序运行到设备时，它说找不到兼容的设备。我应该知道什么？请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:49:30.317

确保您已在已连接的设备上启用 USB 调试。

# regex - 正则表达式和输入验证 Bash

> ID：14425613
> 
> 赞同：0
> 
> 时间：2013-01-20T14:43:38.087
> 
> 标签：regex, bash

我正在尝试验证用户输入

```
if ! [[ "$operator" =~ ("[+-/*]") ]] ; then     # validate user input to include decimals
        exec >&2; echo "error: Not a valid number, please try again";
        echo
else
        break
        echo
fi 
```

尝试了多种组合但不起作用？Ypu 的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:03:26.560

两个问题：

*   丢失正则表达式周围的引号和括号；它们被认为是正则表达式的一部分。在这种情况下也不需要引号`$operator`，尽管它们没有害处。
*   `-`是 中的一个特殊字符`[]`，用于`a-z`. 把它作为第一个或最后一个字符来解决这个问题。

所以：

```
if ! [[ $operator =~ [-+/*] ]] ; then 
```

我认为习惯上写`!`在里面`[[ ]]`，但要么工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:49:43.147

```
sgeorge-mn:~ sgeorge$ cat validate.sh 
OPERATOR=$1
REGEX='[+*-/]';
if ! [[ $OPERATOR =~ $REGEX ]]; then
        echo "Not valid input"
else
        echo "Valid input"
fi

sgeorge-mn:~ sgeorge$ bash validate.sh '-'
Valid input

sgeorge-mn:~ sgeorge$ bash validate.sh '*'
Valid input

sgeorge-mn:~ sgeorge$ bash validate.sh '/'
Valid input

sgeorge-mn:~ sgeorge$ bash validate.sh '+'
Valid input

sgeorge-mn:~ sgeorge$ bash validate.sh 's'
Not valid input

sgeorge-mn:~ sgeorge$ bash validate.sh '132'
Not valid input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:56:34.797

```
if ! [[ "$operator" =~ [-+]?[0-9]* ]] ; then
  ...
  ...
fi 
```

# c# - 错误：生成WinPRTManifest

> ID：14425614
> 
> 赞同：3
> 
> 时间：2013-01-20T14:43:47.400
> 
> 标签：c#, .net, windows-phone-8, windows-phone, monogame

我尝试创建一个新的`monogame`windows phone 8 项目，当我尝试运行它时出现此错误：

```
Error   1 The "GenerateWinPRTManifest" task failed unexpectedly.
System.ArgumentException: An item with the same key has already been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.Silverlight.Build.Tasks.GenerateWinPRTManifest.CCIHarvestRegistrationInformation(ProcessWinmd processWinmd, Dictionary`2 inprocServers)
   at Microsoft.Silverlight.Build.Tasks.GenerateWinPRTManifest.UpdateWinmdRegistration()
   at Microsoft.Silverlight.Build.Tasks.GenerateWinPRTManifest.ExecuteImplementation()
   at Microsoft.Silverlight.Build.Tasks.GenerateWinPRTManifest.Execute()
   at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__20.MoveNext() MonoGameWP8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T11:45:36.187

我今天收到了这个错误。
我引用了为不同架构（ARM 而不是 x86）编译的 DLL。
所以再次构建它们，删除它们的引用并再次引用它们。
希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-18T20:19:52.127

只有一次更新 - 我今天在我的 WP8.0 项目中也遇到了同样的错误。我有两个项目使用 NuGet 添加的 Lumia.Imaging SDK - 不同的时间，所以不同的 lib 版本。但是只需删除两个项目的 VS2013 中的引用并确保以相同的 .dll 为目标对我来说还不够。我必须在旧项目的文本编辑器中编辑 *.csproj 文件，并在那里删除该库的所有引用。之后手动添加 .dll 对我来说效果很好。

# android - 在共享首选项中保护排序列表

> ID：14425616
> 
> 赞同：0
> 
> 时间：2013-01-20T14:44:00.160
> 
> 标签：android, sharedpreferences

我想使用共享首选项来保存整数列表。使用 putStringSet() 方法很简单。

```
final Set<String> set = new TreeSet<String>();

for (final Station station : stations) {
    set.add(String.valueOf(station.getId()));
}
editor.putStringSet(USER_STATIONS, set); 
```

但有一个大问题。使用 getStringSet() 加载首选项后，列表不再排序

除了将列表保存为 json 或带有逗号分隔值的字符串之外，还有其他/更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:03:22.083

我认为没有办法使用首选项保存排序（至少 SharedPreferences 参考对此很清楚），相反，您可以使用 LiteSQL 或创建自定义文件：http: [//developer.android.com/guide/topics/数据/数据存储.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

# wpf - DataGridTextColumn 值更改时如何更改 DataGridCheckBoxColumn 值？

> ID：14425619
> 
> 赞同：1
> 
> 时间：2013-01-20T14:44:08.880
> 
> 标签：wpf, mvvm, datagrid

我正在将 wpf 与 mvvm 一起使用，并且我有一个包含 4 列的数据网格：ID、原始、已翻译、IsTranslated 当翻译列中的文本发生变化时我想要，IsTranslated 列的值自动更改为检查这是我的数据网格 xaml 代码：

```
<DataGrid Grid.Row="3" AutoGenerateColumns="False" ItemsSource="{Binding AllXliffs}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Path=Id}" />
                <DataGridTextColumn Header="Original" Binding="{Binding Path=Original}" />
                <DataGridTextColumn Header="Translated" Binding="{Binding Path=Translated}" />
                <DataGridCheckBoxColumn Header="IsTranslated"  Binding="{Binding Path=IsTranslated, Mode=TwoWay, Converter={StaticResource StringToBooleanConverter}, UpdateSourceTrigger=PropertyChanged}" ></DataGridCheckBoxColumn>
            </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:41:54.960

由于您使用的是 MVVM，因此您可以在模型属性中添加一个小型业务逻辑：

像这样 ：

```
 private string _translation;
        private bool _isTranslated;

        public string Translation
        {
            get { return _translation; }
            set
            {
                _translation = value;
                IsTranslated = !String.IsNullOrEmpty(_translation);
            }
        }

        public bool IsTranslated
        {
            get { return _isTranslated; }
            set
            {
                _isTranslated = value;
                OnPropertyChanged("IsTranslated");
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:02:07.577

您应该将 IsTranslated 列绑定到 Translated 绑定路径，而不是 IsTranslated 绑定路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:35:10.683

试试这个：

```
 <Window.Resources>
        <loca:StringToBooleanConverter x:Key="myCon" />
    </Window.Resources>
    <Grid>
        <DataGrid Grid.Row="3" AutoGenerateColumns="False" ItemsSource="{Binding}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Path=Id}" />
                <DataGridTextColumn Header="Original" Binding="{Binding Path=Original}" />
                <DataGridTextColumn Header="Translated" Binding="{Binding Path=Translated}" />
                <DataGridCheckBoxColumn Header="IsTranslated"  Binding="{Binding Path=Translated, Converter={StaticResource myCon}, UpdateSourceTrigger=PropertyChanged}" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid> 
```

转换器应如下所示：

```
public class StringToBooleanConverter: IValueConverter
{
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            string translated = (string)value;
            if (string.IsNullOrEmpty(translated))
                return false;
            else
                return true;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {            
            return Binding.DoNothing;
        }
} 
```

# ios - 使用 URL 打开我的应用程序，然后加载链接

> ID：14425625
> 
> 赞同：0
> 
> 时间：2013-01-20T14:44:35.823
> 
> 标签：ios, objective-c, url

我有一个带有 URL 标识符/方案“wb”的网络浏览器应用程序。

好的，当用户在 safari 中输入 wb:// 时，我的应用程序将打开。完美的！

但是，如果用户在 safari 中输入“wb://www.facebook.com”，我想在我的应用中打开“facebook.com”。

我如何获得“wb://”之后的链接？

我在 AppDelegate.m 中使用 (This:) ：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    // Display text
    UIAlertView *alertView;
    NSString *text = [[url host] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    alertView = [[UIAlertView alloc] initWithTitle:@"Text:" message:text delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    return YES;
} 
```

并在用户键入链接时获取链接。

但是我是如何把它放到我的 ViewController.m 中的，这样我就可以用文本加载我的 webview 了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T14:56:09.797

`application:handleOpenUrl:`您可以在 AppDelegate 中提供一个实现，例如：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
  // Do whatever is needed with the provided url
} 
```

# python - 测试数据生成：模拟员工的工作日

> ID：14425627
> 
> 赞同：0
> 
> 时间：2013-01-20T14:44:43.230
> 
> 标签：python

我正在尝试通过 python 生成一些测试数据。（我的应用程序不在 python 中，但 python 似乎很容易生成数据）。我想通过生成活动的“时间段”来模拟员工的典型工作日。下面的函数需要生成 ' ' 之间的`n`时隙数（之间有一些随机间隙看起来很自然）和（total_hrs）。`start``end``total`

```
slots = [] #list of slot == {start:<>, end:<>}
def time_slot(start, end, n, total_hrs):
  # generate n non-overlapping time slot between start and end (with some random gap between to seem natural)

print (slots) 
```

例如：

```
time_slot( "1/1/2013 9:00", "1/1/2013 17:00", 3, 8)

[ {start: "1/1/2013 9:00", end: "1/1/2013 10:30"}, ...., {start: "1/1/2013 14:00", end: "1/1/2013 16:44"}]

#total time == 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:16:31.813

我可以概述一下我会做什么：

1.  绘制`n`随机数
2.  `s = sum all numbers`
3.  转换`total_hrs`为`total_min`
4.  制作工作块：`chunks = [c/s * total_min for c in numbers]`
5.  `end - start`计算和之间的差异`total_hrs`
6.  再次执行相同的步骤 1 - 4 以获得该差异以获得间隙（使用 n+1 在开始时允许间隙
7.  最后将所有块转换为`datetime.timedelta`并连续添加 timedelta 以开始（在开始时您应该已经转换`start`为）`end``datetime.date`

# python - Python 正则表达式匹配空间但从分组中删除

> ID：14425629
> 
> 赞同：0
> 
> 时间：2013-01-20T14:45:07.640
> 
> 标签：python, xml, regex

给定以下 XML 行：-

```
<tmpr>10.85</tmpr><sensor>01</sensor><ch1><watts>1000</watts></ch1>

<tmpr>-1.85</tmpr><sensor>01</sensor><ch1><watts>1000</watts></ch1> 
```

我可以使用以下 Python 正则表达式来匹配三个捕获组：-

```
<tmpr>*([\-\d.]+)</tmpr>.*<sensor>(\d+)</sensor>.*<ch1><watts>0*(\d+)</watts></ch1> 
```

问题是，当温度低于 10.00 时，XML 会引入一个前导空格：-

```
<tmpr> 9.85</tmpr><sensor>01</sensor><ch1><watts>1000</watts></ch1> 
```

如何修改正则表达式以捕获温度但忽略前导空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:50:57.643

实际上，这样的正则表达式会起作用：

```
<tmpr>\s*([\-\d.]+)</tmpr>.*<sensor>(\d+)</sensor>.*<ch1><watts>0*(\d+)</watts></ch1>\n 
```

# android - 在 XML 布局中创建可绘制画布

> ID：14425632
> 
> 赞同：1
> 
> 时间：2013-01-20T14:45:28.513
> 
> 标签：android, xml, android-layout

我是 Java 和 android 的新手，所以我不知道这是否可能，但我想在我的应用程序中创建一个动态可绘制的表面/视图/位置。我知道如何用可绘制的画布替换我的整个 XML 布局，但这不是我想要的。我希望这个可绘制表面位于我的静态布局之上（或之中），但我仍然没有找到如何做到这一点。下面是我的意思的说明：

![示例应用](../Images/56b99d8319b6eb2cec54e98bff8f75fe.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:08:15.720

You have different options. You can put a custom `View` and override its `onDraw()` method to draw with its `Canvas`. Another option is to use `SurfaceView` (which provides a `Thread` for drawing with its `Canvas`, more efficient for more complex drawing). Here is more details about for the [first option](http://developer.android.com/training/custom-views/custom-drawing.html) and [second option](http://developer.android.com/reference/android/view/SurfaceView.html).

# ruby - “每个”方法有什么作用？

> ID：14425634
> 
> 赞同：0
> 
> 时间：2013-01-20T14:45:30.733
> 
> 标签：ruby, arrays, hash

我可以创建一个哈希数组：

```
people = [
  {"Name" => "J.R. Kruger", "State" => "WA"},
  {"Name" => "Carl Hennings", "State" => "CA"}
] 
```

然后我可以使用以下`each`语句：

```
people.each { |p| puts p["Name"] } 
```

它将按照我的预期呈现一个名称列表。

```
"J.R. Kruger"
"Carl Hennings" 
```

但是，如果我使用 JSON 对象的 Web 服务，这些对象会被解析为哈希数组：

```
speakers = JSON.parse(open("http://some.url.com/speakers.json").read) 
```

它返回给我一个哈希数组。但是，如果我尝试做与上述代表人的哈希数组相同的事情：

```
speakers.each {|s| puts s["SpeakerName"]} 
```

它只会输出扬声器的全部内容，这是一个哈希数组，而不是数组中`"SpeakerName"`每个哈希的键值的预期列表。

我应该补充一点，我可以做到：

```
speakers[0]["SpeakerName"] 
```

并获得所需的结果，以确保它不是错误的键。

缺少什么？

* * *

更新：

文件输出：

```
[
  {
    "Title"=>"Working with Maps in iOS 6: MapKit and CoreLocation in Depth",
    "Abstract"=>"Adding a Map to an App and recording a User\u2019s location as they use the App has become a common must have feature in may of todays popular applications. This presentation will go over the updated iOS 6 APIs for accomplishing such tasks including map annotations, dragging and dropping custom pins as well as delve into some of the finer aspects of the required location based calculations one needs to consider to find the center of the map or the distance between two points. Additionally the presentation will go over techniques to update a MapView with a moving object as well as positioning the image for the object properly along its heading. This will be a straight forward hands on development presentation with plenty of code examples.",
    "Start"=>"2013-01-11T20:35:00Z",
    "Room"=>"Salon A",
    "Difficulty"=>"Intermediate",
    "SpeakerName"=>"Geoffrey Goetz",
    "Technology"=>"Mac/iPhone",
    "URI"=>"/api/sessions.json/Working-with-Maps-in-iOS-6-MapKit-and-CoreLocation-in-Depth",
    "EventType"=>"Session",
    "Id"=>"4f248d87-0e18-488d-8cef-5e4130b8bb20",
    "SessionLookupId"=>"Working-with-Maps-in-iOS-6-MapKit-and-CoreLocation-in-Depth",
    "SpeakerURI"=>"/api/speakers.json/Geoffrey-Goetz"
  },
  {
    "Title"=>"Vendor Sessions - Friday",
    "Start"=>"2013-01-11T20:00:00Z",
    "End"=>"2013-01-11T20:20:00Z",
    "Room"=>"TBD",
    "Difficulty"=>"Beginner",
    "SpeakerName"=>"All Attendees",
    "Technology"=>"Other",
    "URI"=>"/api/sessions.json/Vendor-Sessions--Friday",
    "EventType"=>"Session",
    "Id"=>"43720cb8-d8ca-4694-8806-debcbdefa239",
    "SessionLookupId"=>"Vendor-Sessions--Friday",
    "SpeakerURI"=>"/api/speakers.json/All-Attendees"
  },
  {
    "Title"=>"Vendor Sessions - Thursday",
    "Start"=>"2013-01-10T20:00:00Z",
    "End"=>"2013-01-10T20:20:00Z",
    "Room"=>"TBD",
    "Difficulty"=>"Beginner",
    "SpeakerName"=>"All Attendees",
    "Technology"=>"Other",
    "URI"=>"/api/sessions.json/Vendor-Sessions--Thursday",
    "EventType"=>"Session",
    "Id"=>"2df202e4-219c-4efb-a838-3898d183dd19",
    "SessionLookupId"=>"Vendor-Sessions--Thursday",
    "SpeakerURI"=>"/api/speakers.json/All-Attendees"
  },
  {
    "Title"=>"Version your database on nearly any platform with Liquibase",
    "Abstract"=>"If you are still writing one-off scripts to manage your database, then it is time to make your life much simpler and less error-prone.  \nWe'll spend the time discussing Liquibase, a tool that will help you to manage that process.  It will even allow you to check your schema and seed data into source-control, and get new environments up and running quickly.  This session will focus not on the merits of using such a tool, but on its workflow and implementation in a project.  We'll run through the majority of features from the command-line, demonstrating that as long as a Java Runtime Environment (jre) is available, Liquibase can be used during deployments on any platform.  We'll also touch on usage with maven and quirks of Liquibase that are good to know ahead of time.",
    "Start"=>"2013-01-11T20:35:00Z",
    "Room"=>"Sagewood/Zebrawood",
    "Difficulty"=>"Beginner",
    "SpeakerName"=>"Daniel Bower",
    "Technology"=>"Continuous Deployment",
    "URI"=>"/api/sessions.json/Version-your-database-on-nearly-any-platform-with-Liquibase",
    "EventType"=>"Session",
    "Id"=>"4abb3869-bacd-42e1-93dc-14e712090b65",
    "SessionLookupId"=>"Version-your-database-on-nearly-any-platform-with-Liquibase",
    "SpeakerURI"=>"/api/speakers.json/Daniel-Bower"
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:13:43.020

我认为您正在使用 IRB 或 Pry 来查看您的数据和代码，这是正确的做法，但由于环境的行为方式，它也可能令人困惑。

我正在使用 Pry，如果我查看您的数组，并`'SpeakerName'`从每个哈希中提取字段，我会看到返回了四个：

```
[9] (pry) main: 0> ary.map{ |h| h['SpeakerName'] }
[
    [0] "Geoffrey Goetz",
    [1] "All Attendees",
    [2] "All Attendees",
    [3] "Daniel Bower"
] 
```

如果我`each`再次使用并遍历数组，我会看到四个名称输出，然后是每个名称的返回值，然后 Pry 会显示该值。我在这里截断了它，因为它太长了。

```
[10] (pry) main: 0> ary.each{ |h| puts h['SpeakerName'] }
Geoffrey Goetz
All Attendees
All Attendees
Daniel Bower
[
[0] {
              "Title" => "Working with Maps in iOS 6: MapKit and CoreLocation in Depth",... 
```

为了表明它是返回值，我通过附加`;nil`到该行来用不同的返回值欺骗 Pry：

```
[11] (pry) main: 0> ary.each{ |h| puts h['SpeakerName'] };nil
Geoffrey Goetz
All Attendees
All Attendees
Daniel Bower
nil 
```

`nil`输出名称后，Pry 尽职尽责地返回。

此问题仅发生在 IRB 或 Pry 中，而不发生在正在运行的程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:01:40.540

答案实际上正是我在我的 OP 中建议的 -> 结果是 Array#each 返回数组。

因此，当在实例变量上调用 each 时，它会在 say（视图）中发布相同的结果，它会在执行块后返回整个数组。

有关源代码以及它如何返回作为最终返回结果的数组，请参阅[Ruby Api 文档。](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)

# c - 为什么while循环在最后一条语句之后没有停止？

> ID：14425637
> 
> 赞同：1
> 
> 时间：2013-01-20T14:45:41.580
> 
> 标签：c

在下一个程序中，while 循环假设在块中的 printf 执行后停止：

不是吗？

```
#include <stdio.h>
#define HOUR 60

int main()

{

    int min, smallThenHour, timeInHour, minLeft;

    printf("please enter time in minutes: \n");

    scanf("%d", &min);

    while (min > 0)

    {
        timeInHour = min/HOUR;
        minLeft = min % HOUR;
        smallThenHour = min < HOUR;

        printf("in %d seconds, there are %d and %d min",min, timeInHour,smallThenHour);
    }

} 
```

希望有人能告诉交流初学者为什么它不停止:)

tnx

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T14:46:30.483

因为你永远不会改变`min`循环体内部的值。一旦条件为真，它就始终为真。

# javascript - Angular ng-model 从嵌套的 ng-repeat 绑定

> ID：14425641
> 
> 赞同：5
> 
> 时间：2013-01-20T14:46:11.660
> 
> 标签：javascript, angularjs

这一定已经完成了，我错过了关于 Angular 在这一点上如何工作的一些东西。

简而言之，我有`<select ng-model><option ng-repeat/></select>`而且我不知道如何在页面加载时给它一个默认值。

看法：

```
<div ng-ctrl="MyCtrl">
  <form ng-submit="submitChoice()">
    <select ng-model='choice'>
      <option ng-repeat='choice in choices' value='{{choice.id}}'>{{choice.id}}</option>
    </select>
  </form>
</div> 
```

**方式 1**：当用户更新视图（选择他想要的“选择”）时，`$scope`MyCtrl 中使用的得到它，我可以用它执行任何我想要的操作：

**方式2**：但是，如果反过来，我想以编程方式为控制器的选项设置默认值（在开始时），它不能改变显示的值：

```
function MyCtrl ($scope) {
  $scope.submitChoice = function() {return;}; // Way1: OK!
  $scope.choice = choice4;                    // Way2: Doesn't change the view!!
} 
```

我想这是因为 ng-repeat 中的每个元素都有自己的范围（仅供参考，如果我在视图中硬编码选项而不是 ng-repeat，它工作得很好）。

如果我理解得很好，在方式 1 中，用户选择的内部范围会发射`choice`到上层范围。但我不知道如何做方式2。

它可以以简单的方式实现吗？是否需要指令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:53:12.177

最好将`ng-options`指令与指令一起使用`select`。使用 select + ngRepeat 有各种限制，最好避免使用。使用 生成选项有什么特别的原因`ngRepeat`吗？

如果您可以共享更多代码（尤其是数据模型的结构），我也许可以提供更多信息。

# c# - 如何在数据库中保存未知属性？

> ID：14425652
> 
> 赞同：2
> 
> 时间：2013-01-20T14:47:11.440
> 
> 标签：c#, sql-server, database, properties, save

我要编写一本家政手册

所以我在类似的代码中创建属性`Name`，`Category`而其他一些需要在运行时创建。

那么我应该如何将人类可读的内容保存在 SQL Server 数据库中呢？

我的建议是创建一个名为`Properties`2 列 ( `Id, Name`) 的表，在该表中我可以存储我的所有属性，但它不再是人类可读的

我也不确定在一个大表中为每个属性创建一列是否明智

我也可以创建一个 XML“文件”并将其存储在我的数据库中，但我也不认为这是一个好主意

任何意见是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:20:19.313

对于每个值，基本上有三个接近此 A 列

您建议的那个称为实体属性值模型

或者您打折的那个是 xml（或序列化对象）

它们都有优点和缺点，其中一些缺点可能会变得非常严重。

每个值的列意味着每次要存储更多数据时都必须更改数据库和模型，这使得它非常脆弱且维护成本很高。

EAV 很容易导致查询变成巨大的连接，并且对其强加数据完整性是一种隐藏。

基于对象还可能导致重大的优化和维护问题，例如，必须打开每个对象以查看其中是否有东西。

现在，如果您坚持使用关系数据库，那么在您做出决定时，这些中的任何一个都可能是最好的（它们在某个方面都是脆弱的）。

查看 NoSQL 替代方案之一，它们是为此类数据设计的。

# hadoop - Hadoop reducer 错误：“Shuffle 错误：超过了中止失败限制；救助”

> ID：14425653
> 
> 赞同：1
> 
> 时间：2013-01-20T14:47:21.900
> 
> 标签：hadoop, mapreduce

我有一个 hadoop 0.20 map/reduce 作业，它曾经运行得很好。在过去的几天里，它卡在了 16.66% 的 reduce 阶段，当我在 jobtracker 中查看 reduce 任务时，我看到了以下错误；

```
Shuffle Error: Exceeded the abort failure limit; bailing-out. 
```

谁能告诉我这意味着什么，也许可以指出正确的方向，以便我弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:39:17.417

此错误对应于 reducer 在报告映射输出并映射到属性之前尝试获取映射输出的最大次数`mapreduce.reduce.shuffle.maxfetchfailures`。

您可以尝试增加该属性，但默认值 10 通常已足够，因此可能会出现更严重的问题。

我记得一个与 fetch failures 类似的情况是由于**/etc/hosts**文件不正确造成的，在谷歌搜索后看起来这可能是问题所在，因此请尝试以下操作：

*   使用主机名而不是 ips
*   在所有节点上同步您的 /etc/hosts（如果您使用 Puppet 之类的东西会更容易）
*   尝试注释掉“127.0.0.1 localhost”</li>
*   重启集群

# ios - 如何为录像指定曝光、对焦和白平衡？

> ID：14425655
> 
> 赞同：10
> 
> 时间：2013-01-20T14:47:32.917
> 
> 标签：ios, camera, avcapturedevice

我有一个程序可以使用默认参数拍摄视频，并且当我移动相机时会自动调整曝光、对焦和白平衡。我想在程序中添加 2 个按钮：LOCK 和 PRESET。按下 LOCK 按钮时，曝光、对焦和白平衡将被固定，它们的值将作为用户设置存储。PRESET 按钮用于设置相机的用户设置，以确保我们可以拍摄具有相同曝光、对焦和白平衡值的所有视频。

锁定部分很简单，我只需要更改模式，所以我想知道是否有任何方法可以获取和设置曝光、对焦和白平衡的值。

以曝光为例，默认情况下，exposureMode 设置为 AVCaptureExposureModeContinuousAutoExposure，也就是说，当我拿着 iPhone 拍摄视频时，会自动调整曝光，以确保我们在明亮或黑暗的环境中都能清晰地看到场景。

```
AVCaptureDevice* pCaptureDevice = [self videoDeviceWithPosition:AVCaptureDevicePositionBack];
[pCaptureDevice lockForConfiguration:nil];
[pCaptureDevice setExposureMode:AVCaptureExposureModeContinuousAutoExposure];
[pCaptureDevice unlockForConfiguration]; 
```

当按下LOCK按钮时，我将exposureMode更改为AVCaptureExposureModeLocked，这样当前的曝光值就不会再改变了。

```
[pCaptureDevice lockForConfiguration:nil];
[pCaptureDevice setExposureMode:AVCaptureExposureModeLocked];
[pCaptureDevice unlockForConfiguration]; 
```

但是，如何获得按下按钮时的曝光值？更重要的是，当按下 PRESET 时，如何将曝光值设置回 AVCaptureDevice。

我在论坛里搜索，只找到了 Michael Grinich 的帖子：[Accessing iOS 6 new APIs for camera exposure and shutter speed](https://stackoverflow.com/questions/12635446/accessing-ios-6-new-apis-for-camera-exposure-and-shutter-speed)。我按照他的发现并尝试使用私有API来获取和设置exposureGain和exposureDuration，但我发现在AVCaptureExposureModeContinuousAutoExposure模式下，当我将相机从黑暗环境移动到明亮环境时，这两个值从未改变（exposureGain = 1.0和曝光持续时间 = {1, 30, 1, 0})。设置它们根本不会改变曝光。

```
[pCaptureDevice lockForConfiguration:nil];
[pCaptureDevice setExposureMode:AVCaptureExposureModeLocked];
[pCaptureDevice setManualExposureSupportEnabled:YES];
NSLog(@"exposure gain: %f", [pCaptureDevice exposureGain]);
[pCaptureDevice setExposureGain:3.0];
NSLog(@"exposure gain: %f", [pCaptureDevice exposureGain]);
[pCaptureDevice unlockForConfiguration]; 
```

有人可以帮我解决这个问题吗？首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T08:24:40.933

我添加了一个答案，可以帮助您[访问 iOS 6 new APIs for camera exposure and shutter speed](https://stackoverflow.com/questions/12635446/accessing-ios-6-new-apis-for-camera-exposure-and-shutter-speed)。我可以在这里添加更多细节......

手动设置焦点与我为设置曝光概述的结构完全相同。那是：

```
#define AVCaptureFocusModeManual     3
NSError*    error = nil;
if ([captureDevice lockForConfiguration:&error]) {
    captureDevice.manualFocusSupportEnabled = YES;
    if ([captureDevice isFocusModeSupported:AVCaptureFocusModeManual]) {
        captureDevice.focusMode = AVCaptureFocusModeManual;
        // this is a value [0..1]
        captureDevice.focusPosition = ...;
    }
    [captureDevice unlockForConfiguration];
} 
```

白平衡似乎没有像曝光和对焦那样的特殊模式。不要将 WhiteBalanceMode 设置为锁定，否则您似乎可以只设置色温：

```
// this is also a value [0..1]
captureDevice.whiteBalanceTemperature = ...; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-24T20:46:12.317

要设置手动固定曝光值和 ISO，您现在可以执行以下操作：

```
[Device lockForConfiguration:nil];
[Device setExposureModeCustomWithDuration:CMTimeMake(5, 100) ISO:AVCaptureISOCurrent completionHandler:nil]; //currently set to 50ms for example
[Device unlockForConfiguration]; 
```

你可以在这里参考它的文档：[https ://developer.apple.com/reference/avfoundation/avcapturedevice/1624646-setexposuremodecustomwithduratio?language=objc](https://developer.apple.com/reference/avfoundation/avcapturedevice/1624646-setexposuremodecustomwithduratio?language=objc)

# asp.net - GridView 中的复选框更新

> ID：14425657
> 
> 赞同：0
> 
> 时间：2013-01-20T14:47:44.437
> 
> 标签：asp.net, vb.net, checkbox

当人们使用 a 在我的网站上搜索时，我`GridView`希望有一个`checkbox`他们单击的列，该列将更改名为`STATUS`to的列中的值`U`。我正在寻找有效的代码，所以我希望你们能提供帮助。我是一个完整的菜鸟，所以如果你知道答案，请描述一下。

按钮代码`Checkbox`- 目前，当我搜索时，它返回说它无法将字符串转换为`boolean`.

```
 <asp:TemplateField HeaderText="Successful Contact?">
                <EditItemTemplate>
                    <asp:CheckBox ID="CheckBox1" runat="server" checked='<%#Bind("status")%>'  AutoPostBack="true" />
                </EditItemTemplate>
                <ItemTemplate> 
                <asp:CheckBox ID="CheckBox1" runat="server" checked='<%#Bind("status")%>'
                   Enabled="False" /></ItemTemplate>
            </asp:TemplateField> 
```

这是vb代码

```
 Protected Sub GridView1_RowUpdating(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)
    For Each GridViewRow In GridView1.Rows

        Dim row As GridViewRow = GridView1.Rows(e.RowIndex)
        Dim value As Boolean
        value = DirectCast(GridView1.Rows(e.RowIndex).Cells(0).FindControl("CheckBox1"), CheckBox).Checked
        Dim connectionString As String = ConfigurationManager.ConnectionStrings("Data Source=server;Initial Catalog=i3FCC01;Integrated Security=True;").ConnectionString
        Dim com_sql As New SqlClient.SqlCommand
        Dim insertSql As String
        insertSql = "Update CallQueueFCC Set Status='U' where Id = @id"
        Using myConnection As New SqlConnection(connectionString)
            myConnection.Open()
            Dim myCommand As New SqlCommand(insertSql, myConnection)
            myCommand.Parameters.AddWithValue("@status", value)
            myCommand.ExecuteNonQuery()
            myConnection.Close()
        End Using
    Next
    GridView1.EditIndex = -1
    DataBind()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:38:30.767

就像前面提到的 Kiran 一样，status 有一个字符串值，因此您需要在行数据绑定事件中进行一些处理。

**标记**

```
<asp:TemplateField HeaderText="Successful Contact?">
            <EditItemTemplate>
                <asp:CheckBox ID="CheckBox1" runat="server"   AutoPostBack="true" />
            </EditItemTemplate>
            <ItemTemplate> 
            <asp:CheckBox ID="CheckBox1" runat="server" 
               Enabled="False" /></ItemTemplate>
        </asp:TemplateField> 
```

**背后的代码**

```
 Protected Sub GridView1_RowDataBound(sender As Object, e As   System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound

  If e.Row.RowType = DataControlRowType.DataRow Then
  'Evaluate the state of the check box, true when status =U , and false otherwise
  Dim itemstatus As Boolean=If(DataBinder.Eval(e.Row.DataItem, "Status"), True, False)
  Dim CheckBoxItemTemp As CheckBox=CType(e.Row.FindControl("CheckBox1"), CheckBox)
  CheckBoxItemTemp.Checked=itemstatus
  End if

  If e.Row.RowState & DataControlRowState.Edit Then
 'same as above but  now for edit item template
  Dim editstatus As Boolean=If(DataBinder.Eval(e.Row.DataItem, "Status"), True, False)
  Dim CheckBoxEditTemp As CheckBox=CType(e.Row.FindControl("CheckBox1"), CheckBox)
  CheckBoxEditTemp.Checked=editstatus
  End if

 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:08:38.233

您正在为复选框选中属性绑定状态值，该属性采用布尔值。

但是状态具有字符串值，因为您将字符串绑定到布尔值，它会引发错误。

# html - 响应式浮动 div - 定位错误

> ID：14425658
> 
> 赞同：0
> 
> 时间：2013-01-20T14:47:49.907
> 
> 标签：html, responsive-design

我对这个问题感到疯狂，我看不到这种行为的解决方案和原因。

我有三个 div，其中包含一些图像和音频。那些 div 的 CSS：

```
margin: 1%; 
float: left; 
width: 31%; 
min-width: 300px; 
```

这个 CSS 做 1 行 3 列，当这些 div 的宽度为 300px 时，必须向下做 2 行 2 列。这是我的麻烦，已经下降到第二列的问题：看这张图片：![坏 2 列](../Images/6c9928839f0d65b837a11c8fb56312ff.png)

这怎么可能？？？我在 css 中寻找某种错误，但我一无所获。

该 div 的容器 CSS 是：

```
width: 84%;
text-align: center;
margin-left: 9%;
overflow: hidden; 
```

一些线索？其他的查看方式可能是如何将“float：left”div 对齐到右侧？

任何帮助将是apreciatte...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:15:29.207

我必须回答自己：就像将高度放在 div 中的 img 一样简单......

谢谢！！！

# javascript - Json请求数据和jquery prettyphoto绑定问题

> ID：14425666
> 
> 赞同：0
> 
> 时间：2013-01-20T14:48:43.437
> 
> 标签：javascript, jquery, json, html, dom

我遇到了 jQuery 的一种情况。特别是它的 prettyPhoto 库和 getJSON 函数。

我有一个加载 HTML 的页面，它调用 jQuery 和 prettyPhoto。有一些内联 JS 在页面下方发出 JSON 请求：

**它应该像下面这样工作：**

1）页面加载，

2）Javascript代码运行，

3) 脚本运行一个 jQuery JSON 请求，该请求返回并在其中包含 HTML（每个 a-tag 中的 a-tags 和图像），

4) 脚本然后将 JSON 内部的 HTML 打印到屏幕上，

5) 用户单击 a-tag/image 并在 prettyPhoto 的 iframe 弹出窗口中打开。

注意 -> 每个 a-tag 都附加了一个 prettyPhoto id（使用 iframe 弹出窗口将图像加载到 prettyPhoto 中）。

问题是图片（链接）没有用 prettyPhoto 打开，我不知道为什么。没有 JS 错误。

但是，如果我手动拥有已经存在的 HTML（a-links/image），它确实有效（所以只是从 JSON 请求中加载它们的 HTML 似乎会有所不同）。

似乎 JSON 请求返回（带有 HTML）prettyphoto 已经绑定到 a-tags（或缺少关闭）。

**到目前为止测试过：**

尝试将 JSON 请求放入“document.ready”并将 prettyPhoto 放入“window.load”。JSON 请求也是如此，当其他所有内容加载时，prettyPhoto 也会绑定 - 失败

尝试使用 jQuery AJAX 而不是 JSON - 失败

特别不需要代码，但逻辑有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:50:02.653

听起来来自 JSON（a-links/images）的 HTML 没有足够快地返回（在“window.load”运行之前）。

尝试将 prettyPhoto JS 放入成功回调中（即返回数据的位置）。

load_images.json 下面是您执行的 JSON 请求，它返回 HTML（a 链接及其图像）：

```
$.getJSON("load_html.json", function() {
    //grab HTML data (images/a-links) from json file and print into page
})
.success(function() { 
    //JS code running prettyPhoto inside here. Now will bind to a-links.
}); 
```

PrettyPhoto 现在在 JSON 加载它们之后绑定到 A 链接。

希望将有助于在链接之后获得漂亮的照片。

如果失败，请尝试将 prettyPhoto 代码放在成功回调之后发生的完整回调中。像下面这样：

```
$.getJSON("load_html.json", function() {
    //grab HTML data (images/a-links) from json file and print into page
})
.success(function() { 
    //nothing
})
.complete(function() {
     //JS code running prettyPhoto inside here. Now will bind to a-links.
}); 
```

这样，您就可以给 prettyPhoto 足够的时间绑定到为其标记的正确 a 链接。

试试看。

# linux - Amazon Linux EC2 中的 Cron 作业

> ID：14425667
> 
> 赞同：1
> 
> 时间：2013-01-20T14:48:43.843
> 
> 标签：linux, amazon-ec2, cron, amazon, jobs

我在谷歌上搜索了如何在 amazon linux ami 上设置 cronjob，但我没有找到办法。有人知道任何教程或如何做吗？我还在学习...谢谢

# java - java中的肥皂响应迭代

> ID：14425668
> 
> 赞同：0
> 
> 时间：2013-01-20T14:48:49.880
> 
> 标签：java, soap, soap-client

我在我的代码中使用 java soap 请求和响应。我得到了正确的请求和响应。但我无法迭代响应请在下面查看我的响应和用于迭代的代码。请帮我解决这个问题。

回复

```
<?xml version="1.0" encoding="utf-16"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetUserResponse xmlns="http://XXXX.com/XXXXXXXX.XXXXXXX.WS">
      <GetUserResult>
        user
          <PersonID>111113</PersonID>
          <Username>0987654321</Username>
          <Password />         
          <FwyMember>Y</FwyMember>
          <WebMember>Y</WebMember>
          <FirstName>Mohamed</FirstName>
          <Tier>firstclass</Tier>
          <CountryOfResidence>IN</CountryOfResidence>
          <PreferencesChanged>false</PreferencesChanged>       
          <FamilyRelationship />
          <Title>Mr</Title>
          <MiddleName />
          ........ continue like this 
```

Java 代码

```
SOAPBody responseBody = response.getSOAPBody();
QName bodyName1 = new QName("http://XXXX.com/XXXXXXXX.XXXXXXX.WS","GetUserResponse");
java.util.Iterator iterator = responseBody.getChildElements(bodyName1);
while (iterator.hasNext()) {
  SOAPBodyElement responseElement = (SOAPBodyElement)iterator.next();
  String val = responseElement.getValue();
  System.out.println("The values are "+val);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:00:11.463

下面只有一个`GetUserResponse`元素`Body`。`getChildElements`只获取子元素，而不是后代元素。您必须首先到达`GetUserResponse`然后迭代*它的*孩子。

# android - 在gridview android中带有文本的图像

> ID：14425669
> 
> 赞同：1
> 
> 时间：2013-01-20T14:49:10.493
> 
> 标签：android, image, gridview, text

我正在开发基于图像的应用程序。我像这张图片一样在 GridView 中显示这些图像。

![在此处输入图像描述](../Images/db47675a1ad0d27daadb24a036b8acc2.png)

但我想把这个文本和图像放在一起，如下图所示。

![在此处输入图像描述](../Images/f509a35f99b125bbde64124e63eb74a4.png)

一种解决方案是一起创建带有文本的图像并在 gridview 中显示，但它看起来并不干净。请指导我，如果android为此提供了一些漂亮而干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:12:46.737

GridView 从 AdapterView 扩展而来。AdapterView 是一个视图，其子项由适配器确定。AdapterView 使用 getView() 方法来检索当前显示的项目。

您可以自定义此 getView() 方法以返回任何类型的视图。

> 例如相对布局

这个相对布局可以包含一个 ImageView 和一个 TextView

我希望这是有道理的，如果不在下面评论

# java - 享元模式中描述的内在和外在状态有什么区别？

> ID：14425671
> 
> 赞同：9
> 
> 时间：2013-01-20T14:49:14.347
> 
> 标签：java, design-patterns, flyweight-pattern

从“四人组中的模式”一章中，[当](https://rads.stackoverflow.com/amzn/click/com/0201633612)`FlyWeight`大多数**对象状态可以被设为外部时**，FlyWeight 模式适用。

 **是什么`extrinsic state`意思？我觉得这种模式是用来共享对象的。如果要共享对象，那么该对象怎么可能有任何状态呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T08:34:25.450

让我们以文字处理器为例：

字处理器处理字符对象。Character 对象的状态是字符内容、字体、样式、位置等（就字处理器而言）。不同的文档使用不同的字符实例。假设我们只处理*az*字符，不同的文档使用来自*az的字母*池，但可能会应用不同的字体/样式。因此，如果我们将字符的内容与字体/样式分开，我们可以共享这些字符，这是有道理的，因为与使用的不同字符实例相比，不同类型的字符总数更少（在我们的例子中为 26 个，否则为常量）在不同的文件中。共享这些字符实例意味着明智地共享字符实例内容并将诸如字体/样式之类的上下文应用到这些字符外部。字符内容是内在状态，字体/样式是外在状态。在上面的示例中，将状态分为内在和外在状态可以节省大量存储空间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-20T08:18:35.237

extrinsic - 属于对象上下文（外部）或对该实例唯一的状态

内在 - 自然属于“FlyWeight”对象的状态，因此应该是永久的或不可变的（内部的）或上下文无关的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T14:56:43.833

无论该项目符号列表中的具体措辞如何，理解该消息很重要：*享*元适用于状态的重要部分可以在许多对象之间共享的情况，因为它是对所有对象都相同的一些数据。通常，共享状态本质上是不可变的（即“普遍真理”）。带有字体的示例非常清楚地说明了这一点；日常 Java 中的一个示例是`java.util.regex.Pattern`享元，vs `Matcher`. 重用它并保持本地外部状态的客户端对象。许多`Matcher`s 可以并行存在，都在内部重用已编译的正则表达式。

这句话比你的问题更清楚：

> 共享的享元越多，节省的存储空间就越大。节省会随着共享状态的数量而增加。当对象同时使用大量的内在和外在状态，并且外在状态可以计算而不是存储时，最大的节省就会发生。然后您可以通过两种方式节省存储空间：共享降低了内在状态的成本，并且您可以用外在状态来换取计算时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-06T00:46:13.853

[Gang of Four 的](https://rads.stackoverflow.com/amzn/click/com/0201633612)享元设计模式引入了*内在*和*外在状态*的概念：

> *这里的关键概念是内在*和*外在*状态之间的区别。内在状态存储在享元中；它由独立于享元上下文的信息组成，因此可以共享。外部状态取决于享元的上下文并随其变化，因此无法共享。客户端对象负责在需要时将外部状态传递给享元。

换句话说，一个对象的状态可以*相对于一组对象*分解为内在状态和外在状态，其中内在状态是该组所有对象的状态的*交集*，外在状态是对象的状态和内在状态的*区别。*由于该组的每个对象中的固有状态都是重复的，因此可以通过将对象组替换为单个*享元来节省空间*存储单个内在状态的对象。然而享元对象不能存储组对象的多个外部状态，因此外部状态存储在外部，并在来自客户端对象的每个请求中传递给享元对象。这种优化的通信协议通常被称为*[无状态协议](https://en.wikipedia.org/wiki/Stateless_protocol)*，因为享元对象不存储外部状态。无状态协议的示例包括 IP 和 HTTP（以及更普遍的任何 REST 协议，其中内在状态称为*资源状态*，外在状态称为*应用程序状态*）。

例如，让我们使用三个对象及其各自的客户端：

> o1 ← c1
> o2 ← c2
> o3 ← c3

我们可以针对三个对象分解每个对象的状态：

> *状态 1* =*内在状态*∪*外在状态 1*
> *状态 2* =*内在状态*∪*外在状态 2*
> *状态 3* =*内在状态*∪*外在状态 3*
> 
> 在哪里：
> 
> *内在状态*=*状态 1* ∩*状态 2* ∩*状态 3*
> *外在状态 1* =*状态 1* \*内在状态*
> *外在状态 2* =*状态 2* \*内在状态*
> *外在状态 3* =*状态 3* \*内在状态*

在这里，内在状态被复制了。因此将其存储在单个享元对象中（并将外部状态移动到客户端）可以节省空间：

> o ← c1, c2, c3**

# java - JPA CriteriaBuilder - 按一对多关系中关联实体的数量排序

> ID：14425674
> 
> 赞同：3
> 
> 时间：2013-01-20T14:49:32.780
> 
> 标签：java, hibernate, jpa, criteria-api

我有两个实体 Customer 和 Order 处于一对多关系中。对于每个客户，我需要计算关联订单的数量并按此数字对结果进行排序。在本机 postgres 查询中，它看起来像这样：

```
select cust.id, count(order.id) from customers cust
left outer join orders order
on cust.id = order.customer_id
where .... conditions ...
group by cust.id
order by count desc; 
```

但我必须使用 CriteriaBuilder 执行此操作，因为此查询是使用 CriteriaBuilder 放入附加条件的较大代码段的一部分。在 Hibernate 中，我可能会使用 Projections，但在 JPA 中找不到类似的东西。

非常感谢使用 CriteraBuilder 编写查询的任何帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T16:10:07.170

假设实体 Customer 具有`OneToMany`如下属性：

```
@OneToMany(mappedBy = "customerId")
private Collection<Order> orders; 
```

您可以使用以下查询：

```
EntityManager em;  // to be built or injected
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Tuple> cq = cb.createTupleQuery();
Root<Customer> customer = cq.from(Customer.class);
CollectionJoin<Customer, Order> orders = customer.join(Customer_.orders, JoinType.LEFT);
cq.select(cb.tuple(customer, cb.count(orders)));
cq.where(... add some predicates here ...);
cq.groupBy(customer.get(Customer_.id));
cq.orderBy(cb.desc(cb.count(orders)));
List<Tuple> result = em.createQuery(cq).getResultList();
for (Tuple t : result) {
    Customer c = (Customer) t.get(0);
    Long cnt = (Long) t.get(1);
    System.out.println("Customer " + c.getName() + " has " + cnt + " orders");
} 
```

上述方法使用[Metamodel](http://docs.jboss.org/hibernate/jpamodelgen/1.0/reference/en-US/html_single/)。如果你不喜欢它，你可以`Customer_.orders`用`"orders"`和`Customer_.id`替换`"id"`。

如果`OneToMany`属性是另一种类型，则替换`CollectionJoin`为正确类型的集合（`ListJoin`, `SetJoin`, `MapJoin`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-18T17:13:55.350

在规范中使用它

```
cq.orderBy(cb.desc(cb.count(orders))); 
```

还送`PageRequest(1, 10, Sort.unsorted())`。我就是这样做的。如果您将排序值作为未排序传递，然后使用您自己对连接实体的排序逻辑覆盖条件查询

# javascript - JavaScript 中的“使用严格”不起作用？

> ID：14425675
> 
> 赞同：4
> 
> 时间：2013-01-20T14:49:51.740
> 
> 标签：javascript

根据 [这篇文章](http://javascriptweblog.wordpress.com/2011/05/03/javascript-strict-mode/#more-804)

> 在 JavaScript 代码中添加“use strict”作为第一条语句¹将在整个代码中强制执行严格模式

所以为什么 ：

```
"use strict";
012; 
```

不抛出错误

尽管

```
(function () {
    "use strict";
    012; })(); 
```

做 ？ *（严格模式下不允许使用八进制文字。）*

[约翰雷西格对此只字未提。他只是说：](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)

> 简单的。把它扔在程序的顶部，为整个脚本启用它：
> 
> “使用严格”；或者将它放在一个函数中，仅在该上下文中打开严格模式。
> 
> 函数 imStrict(){ "使用严格"; // ... 你的代码 ... }

# 编辑 ：

![在此处输入图像描述](../Images/32102a9ecb36f1f2889c422f589b8749.png)

# 编辑#2。

我在控制台中测试了代码。（chrome）。在 jsbin 示例中 - 它正在工作。仍然，我不明白为什么它在控制台中表现不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:53:52.367

它*确实会*引发错误。

```
quentin@workstation:~ # cat > tmp/foo.js
"use strict";
012; 

quentin@workstation:~ # node tmp/foo.js

/users/quentin/tmp/foo.js:2
012; 
^^^

module.js:434
  var compiledWrapper = runInThisContext(wrapper, filename, true);
                        ^
SyntaxError: Octal literals are not allowed in strict mode.
    at Module._compile (module.js:434:25)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:11:10.357

控制台的行为与其他地方不同，请尝试在浏览器中打开以下内容，您将看到错误重新出现，而无需将其包装在函数中。

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>use strict</title>
        <script>
"use strict";
012;
        </script>
    </head>
    <body>
    </body>
</html> 
```

`~`您可以通过键入,等来判断控制台的实现方式与直接执行不同`+`（您将得到一个`SyntaxError: Unexpected token }`）。
可以通过直接编写这样的代码来重现类似的行为（我不会这样称呼它*，*因为我不知道控制台是如何做到的）

```
example: { // labeled block
    "use strict"; // your code
    012;
} // end of block, no SyntaxError thrown for strict 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T15:12:35.390

012 是一个八进制文字，在严格模式下是不允许的，因为它已被 ECMA-262 的第 3 版弃用。JavaScript 1.5 仍然支持八进制整数文字以实现向后兼容性。你的例子是抛出一个错误！

你有 3 种可能性。

1.  删除那个八进制文字

2.  不要使用严格模式

3.  或者您可以先使用八进制文字，然后将所有代码包装在一个匿名函数中，并将严格模式限制为您立即调用的函数表达式（iife）：

012;

```
(function () {
  "use strict";

  ... your code
})(); 
```

# ruby-on-rails - 从heroku开始；更新 Rails 应用程序失败

> ID：14425678
> 
> 赞同：1
> 
> 时间：2013-01-20T14:50:11.440
> 
> 标签：ruby-on-rails, git, heroku

在学习了一些关于 Rails 的知识并在本地制作了一些东西之后，我想尝试将一个简单的 Rails 应用程序上传到 Heroku。顺便说一句，由于安装 Postgresql 的问题，这让人很头疼。但是，好的，这就完成了。

现在我在 heroku 上创建了一个应用程序，我做了登录、密钥、git 和上传。很好，毕竟很容易。我刚刚上传了一个空的 rails 应用程序，尝试使用 heroku。那么，我添加一个控制器。通过再次上传`git push heroku master`，不是很好！我为我的*关节*控制器做了脚手架。一旦在 someurl/articulos 上推送到 heroke，我就无法打开该 URL。我在这里收到了 404 heroku 消息：http: [//enigmatic-scrubland-8865.herokuapp.com/articulos](http://enigmatic-scrubland-8865.herokuapp.com/articulos)

然后我为主站点创建一个控制器并摆脱“欢迎加入”默认站点。再次推heroku ...在终端上，我收到了所有更新的消息，并且正在启动。一切都好。

但随后我再次访问“欢迎登机”默认页面。

在本地它工作正常。但现在我不确定我是否做得很好。让我害怕的是，没有失败的消息是无处可寻的，但显然它失败了。

编辑我的 rails 应用程序后，我总是这样做：

```
$ git init
$ git add .
$ git commit -m "init"
$ git push heroku master 
```

就像文档在heroku上所说的那样。但是，没有错误，也没有更新。

谢谢指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:07:22.350

从我从[heroku devcenter](https://devcenter.heroku.com/articles/git)看到的，该`git init`部分仅在 git repo 的第一次初始创建时完成，而不是“在编辑我的 rails 应用程序之后”。

换句话说，您不必`git init`在编辑铁路应用程序后“总是”这样做。

对于第一次推送，我建议：

```
git push -u heroku master 
```

这样，所有后续的推送都将变得很简单：

```
git push 
```

# ios - AS3：增加滚动条的大小

> ID：14425680
> 
> 赞同：0
> 
> 时间：2013-01-20T14:50:15.063
> 
> 标签：ios, actionscript-3, air, scroll, touch

这是一个非常简单的问题，但我已经用谷歌搜索了这么多的答案。我有一个显示一长串信息的数据网格。它是一个 iOS 应用程序，所以输入是触摸的，滚动条很小。我怎样才能增加它的大小以便于使用？

谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:04:14.690

使用这样的代码：

```
dataGrid.scroller.verticalScrollBar.scaleX = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:46:58.073

Feathers 是移动 ui 的 as3 解决方案：http: [//feathersui.com](http://feathersui.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:54:01.777

这些滚动条可以被`DataGridInstance.verticalScrollBar`和定位`DataGridInstance.horizontalScrollBar`。这些实际上是 ScrollBar 实例，因此您可以使用`.setSize()`方法或`.width`设置`.height`器来调整它们的大小。

但是，[**文档**](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f57.html)表明：

> ***注意：**如果使用该**`setSize()`**方法，则只能更改水平滚动条的宽度或垂直滚动​​条的高度。在创作时，您可以设置水平滚动条的高度或垂直滚动​​条的宽度，但这些值将在电影发布时重置。只能更改与其长度对应的滚动条的尺寸。*

所以恐怕这不是内置组件的选择。

# symfony - 在 twig 中使用存储库类方法

> ID：14425681
> 
> 赞同：1
> 
> 时间：2013-01-20T14:50:19.570
> 
> 标签：symfony, doctrine-orm, twig, symfony-2.1

在 Symfony2.1 项目中，如何在模板中调用自定义实体函数？详细说明，请考虑以下场景；有两个具有多对多关系的实体：用户和类别。

Doctrine2 产生了这样的方法：

```
$user->getCategories();
$category->getUsers(); 
```

因此，我可以在树枝中使用这些，例如：

```
{% for category in categories %}
   <h2>{{ category.name }}</h2>
   {% for user in category.users %}
      {{ user.name }}
   {% endfor %}
{% endfor %} 
```

但是我怎样才能让用户使用自定义功能呢？例如，我想列出具有一些选项的用户并按日期排序，如下所示：

```
{% for user in category.verifiedUsersSortedByDate %} 
```

我在 UserRepository.php 类中为此编写了自定义函数，并尝试将其添加到 Category.php 类中以使其工作。但是我收到以下错误：

> 在渲染模板期间抛出异常（“警告：Doctrine\ORM\EntityRepository::__construct() 缺少参数 1，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:12:30.817

直接在控制器中检索您`verifiedUsersSortedByDate`的内容然后将其传递给您的模板会更干净。

```
//...
 $verifiedUsersSortedByDate = $this->getYourManager()->getVerifiedUsersSortedByDate();

return $this->render(
    'Xxx:xxx.xxx.html.twig',
    array('verifiedUsersSortedByDate' => $verifiedUsersSortedByDate)
); 
```

您应该非常小心，不要在您的实体中做额外的工作。正如文档中引用的那样，“实体是保存数据的基本类”。使您的实体中的工作尽可能基本，并在`entityManagers`.

如果您不想迷失在代码中，最好按照这种格式，按顺序（从实体到模板）

```
1 - Entity. (Holds the data)

2 - Entity Repositories. (Retrieve data from database, queries, etc...)

3 - Entity Managers (Perform crucial operations where you can use some functions from your repositories as well as other services.....All the logic is in here! So that's how we can judge if an application id good or not)

4 - Controller(takes request, return responses by most of the time rendering a template)

5 - Template (render only!) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:58:31.917

您需要通过存储库获取控制器内部的用户

```
$em = $this->getDoctrine()->getEntityManager();
$verifiedusers = $em->getRepository('MYBundle:User')->getVerifiedUsers(); 
```

* * *

```
 return array(
            'verifiedusers'      => $verifiedusers,
                   );
    } 
```

# c# - 如何询问是否可以将字符串变量解析为 int 变量？

> ID：14425685
> 
> 赞同：3
> 
> 时间：2013-01-20T14:50:34.467
> 
> 标签：c#, parsing

我可以使用什么来返回一个布尔变量，该变量将说明我是否可以安全地解析字符串？

1847 将返回真 18o2 将返回假

拜托，不要太复杂...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:52:14.230

您可以使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

```
int result = 0;
bool success = int.TryParse("123", out result); 
```

*如果解析成功，这里的成功将为 true，否则为 false，结果将具有解析 int 值。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T14:52:14.257

使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)：

```
int i;
bool canBeParsed = int.TryParse("1847", out i);
if(canBeParsed)
{
    Console.Write("Number is: " + i);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T14:52:25.863

```
var str = "18o2"
int num = 0;

bool canBeParsed = Int32.TryParse(str, out num); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T14:51:59.003

你应该看看[TryParse](http://msdn.microsoft.com/de-de/library/vstudio/f02979c7.aspx)方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T15:05:16.533

多年来我一直在使用这些扩展方法。一开始可能有点“复杂”，但它们的使用非常简单。您可以使用类似的模式扩展大多数简单值类型，包括`Int16`、`Int64`、`Boolean`、等。`DateTime`

```
using System;

namespace MyLibrary
{
    public static class StringExtensions
    {
        public static Int32? AsInt32(this string s)
        {
            Int32 result;       
            return Int32.TryParse(s, out result) ? result : (Int32?)null;
        }

        public static bool IsInt32(this string s)
        {
            return s.AsInt32().HasValue;
        }

        public static Int32 ToInt32(this string s)
        {
            return Int32.Parse(s);
        }
    }
} 
```

要使用这些，只需将其包含`MyLibrary`在带有`using`声明的命名空间列表中。

```
"1847".IsInt32(); // true
"18o2".IsInt32(); // false

var a = "1847".AsInt32();
a.HasValue; //true

var b = "18o2".AsInt32();
b.HasValue; // false;

"18o2".ToInt32(); // with throw an exception since it can't be parsed. 
```

# javascript - AngularJS ng-options 不呈现值

> ID：14425686
> 
> 赞同：13
> 
> 时间：2013-01-20T14:50:37.263
> 
> 标签：javascript, html, json, angularjs

如何呈现以下选项列表的值？

```
$scope.limits = [ {value:  '5', text: 'Afficher 5 par page'},
                  {value: '10', text: 'Afficher 10 par page'},
                  {value: '15', text: 'Afficher 15 par page'},
                  {value: '20', text: 'Afficher 20 par page'}
                ];

<select id="limitType" name="limit" ng-model="limit" ng-options="limit.value as limit.text for limit in limits"></select> enregistrement par page 
```

预期结果（期望在 value="limit.value" 中：

```
<select ng-options="option.value as option.text for option in limits" ng-model="limit" id="limitType" class="ng-pristine ng-valid">
    <option value="5" selected="selected">Afficher 5 par page</option>
    <option value="10">Afficher 10 par page</option>
    <option value="15">Afficher 15 par page</option>
    <option value="20">Afficher 20 par page</option>
</select> 
```

结果：

```
<select ng-options="option.value as option.text for option in limits" ng-model="limit" id="limitType" class="ng-pristine ng-valid">
    <option value="0" selected="selected">Afficher 5 par page</option>
    <option value="1">Afficher 10 par page</option>
    <option value="2">Afficher 15 par page</option>
    <option value="3">Afficher 20 par page</option>
</select> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-20T16:44:19.420

该`ng-options`指令没有在元素上设置`value`属性。`<options>`它总是使用一个序列。

使用`limit.value as limit.text for limit in limits`手段：

*   将`<option>`' 标签设置为`limit.text`
*   将值保存`limit.value`到选择的`ng-model`

检查这个小提琴：http: [//jsfiddle.net/bmleite/k58Hw/](http://jsfiddle.net/bmleite/k58Hw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T11:35:22.117

为了让它发挥作用，您（我们）必须改变我们向服务器提交数据的方式。

浏览器是“愚蠢的”，它不关心 AngularJS、jQuery 或任何其他 JavaScript 框架在背后的代码中发挥作用。如果期权包含索引值而不是实际值，浏览器会将索引值发送给服务器。

如果你想让它工作，你要么必须使用 ng-repeat 结合选项标签来呈现正确的值，要么通过调用`.post`AngularJS 控制器的方法来提交数据。

这就是我喜欢和讨厌 AngularJS 的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T20:22:05.380

我意识到这是一个老问题，但我也有这个问题。我对此的简单解决方案是创建一个隐藏输入并使用 ngModel 将其与 select 绑定。然后，当您进行普通表单提交时，提交隐藏的输入。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T07:42:08.990

对于另一种方法，我们可以使用 ng-repeat

```
<select  ng-model="limit" id="limitType" class="ng-pristine ng-valid" >
 <option ng-repeat="option in limits " value="{{option.value}}" >
  {{option.text}}
 </option>
</select> 
```

# android - 我怎么知道按钮何时不再被点击

> ID：14425690
> 
> 赞同：-2
> 
> 时间：2013-01-20T14:51:06.610
> 
> 标签：android, button, click

我有一些问题 - 我必须知道何时不再单击该按钮。我需要类似 onClickListener 的东西，当用户停止将手指放在按钮上时执行。甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:56:07.843

使用`onTouchListener`并检查 MotionEvent [`ACTION_UP`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_UP)（`true`在您的实现中返回以使 Android 知道您正在处理整个 Touch 事件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:55:09.600

是的。你应该做的是*在触摸*处理程序上注册：

```
button.setOnTouchListener(listener) 
```

并且`listener`您应该检查`event`它的动作是否为`ACTION_UP`. 就这样。

# c# - 为什么我不能声明通用列表 作为接口方法的返回类型？

> ID：14425694
> 
> 赞同：0
> 
> 时间：2013-01-20T14:51:41.667
> 
> 标签：c#

为什么我不能创建一个返回类型的接口方法`List<T>`？我遇到了这个编译错误“找不到类型或命名空间名称'T'”

```
interface ILoader 
{        
    List<T> LoadValues();
} 
```

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T14:53:58.000

你`T`的界面应该是什么？对于编译器，`T`此时只是一个未知标识符。

您需要为 指定一些东西`T`，某些类型用作 的类型参数`List<T>`。

* * *

根据您想要实现的目标，有四个选项：

*   在接口/类级别声明`T`为通用参数：

    ```
    interface ILoader<T>
    {        
        List<T> LoadValues();
    } 
    ```

*   在方法级别声明`T`为泛型参数：

    ```
    interface ILoader
    {        
        List<T> LoadValues<T>();
    } 
    ```

*   将固定类型分配为`T`; 例如`int`（wlog）：

    ```
    interface ILoader
    {        
        List<int> LoadValues();
    } 
    ```

*   在更高的嵌套级别上声明`T`为通用参数（感谢[Jeppe Stig Nielsen](https://stackoverflow.com/users/1336654/jeppe-stig-nielsen)指出这种可能性）：

    ```
    class Outer<T>
    {
        interface ILoader
        {
            List<T> LoadValues();
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T14:53:37.440

T 泛型参数也必须在接口中声明。像这样的东西：

```
interface ILoader<T>
{        
    List<T> LoadValues();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:55:34.353

你应该这样做：

```
interface ILoader<T>
{
    List<T> LoadValues();
} 
```

或者

```
interface ILoader
{        
    List<T> LoadValues<T>();
} 
```

甚至，可能：

```
interface ILoader 
{        
    List<dynamic> LoadValues();
} 
```

^不是最好的主意，但可以使用。

# c# - 分步错误处理

> ID：14425695
> 
> 赞同：2
> 
> 时间：2013-01-20T14:51:46.867
> 
> 标签：c#, try-catch

我正在运行以下内容：-

```
 private void ConvertFile()

    {
        PrepElec1();
        MakeElec2();
        MakeElec3();
        MakeElec4();
        MakeElecMerged();
        SetDataSet.SetData(DtSet);
        btnConvert.Enabled = false;
        btnReport.Visible = true;
    } 
```

我怎样才能实现 try/catch，以便如果其中一个失败......

```
 PrepElec1();
        MakeElec2();
        MakeElec3();
        MakeElec4();
        MakeElecMerged(); 
```

...我收到一个消息框，显示它在哪一步失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:57:06.290

您可以让异常的堆栈跟踪为您完成工作。

```
private void ConvertFile()
{
    try
    {
        PrepElec1();
        MakeElec2();
        MakeElec3();
        MakeElec4();
        MakeElecMerged();
        SetDataSet.SetData(DtSet);
        btnConvert.Enabled = false;
        btnReport.Visible = true;
    }
    catch (Exception e)
    {
        var trace = e.StackTrace;

        // format trace however you like

        MessageBox.Show(this, trace, "Error");
    }
} 
```

# ruby-on-rails - 什么是 ruby on rails 中的基本模板

> ID：14425696
> 
> 赞同：1
> 
> 时间：2013-01-20T14:51:54.607
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2

开始学习 Rails，所以这个问题可能已经过时了，但我想知道它在 Rails 中到底是什么。

我正在尝试为用户创建一个登录表单，所以在谷歌搜索之后我遇到了`devise`（但不确定它到底是做什么的，但我试了一下）。

教程链接 - [http://www.slideshare.net/wleeper/devise-and-rails](http://www.slideshare.net/wleeper/devise-and-rails)

我被困在第 4 页，共 22 页 -

**在基本模板中添加一些 Flash 通知**

![图片](../Images/afe459eccea50c1b2a23aaef2ab19825.png)

我不知道我需要在哪里添加这些行。（东西在本地主机上），我想知道我真的按照正确的教程在 Rails 中创建登录表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:59:24.967

默认情况下是基本模板`application.html.erb`。

# php - 解析嵌套 JSON 以检索嵌套数组值

> ID：14425700
> 
> 赞同：5
> 
> 时间：2013-01-20T14:52:25.267
> 
> 标签：php, json

我试图从这个 Json 中获取一些特定的字段。我已经设法检索到第一级的那些，但我需要从数据字段中取出一些。我想获得以下数据字段的数组：

```
data = [(data artist id, data artist id name, and data rank), (data artist id, data artist id name, and data rank)...] 
```

例如：

```
data = [(ed61fe981f9143fe82536a0e5e9836f7, Rihanna, 1), (668dfb9383684b79ba603605db21ac51, PSY, 2)..] 
```

知道怎么做吗？

Json如下：

```
{
" response": {
"class": "chart",
"data": [
    {
        "artist": {
            "class": "artist",
            "id": "ed61fe981f9143fe82536a0e5e9836f7",
            "musicbrainz": "73e5e69d-3554-40d8-8516-00cb38737a1c",
            "name": "Rihanna"
        },
        "rank": 1,
        "value": 42437.6397
    },
    {
        "artist": {
            "class": "artist",
            "id": "668dfb9383684b79ba603605db21ac51",
            "musicbrainz": "f99b7d67-4e63-4678-aa66-4c6ac0f7d24a",
            "name": "PSY"
        },
        "rank": 2,
        "value": 21562.2685
    },

   … goes up to about 200 items
   ],

     "end_time": 1358553600,
    "id": "396c5b836ce74200b2b5b8ba1df28956",
     "name": "high_flyers_plays_total",
     "next_id": null,
     "now_id": "b857276b34cf488f9a934765c3281af7",
     "period": 86400,
     "previous_id": "cb566393058c4ddfa0b957063fbdc2e3",
     "start_time": 1358467200
     },
   "success": true
  } 
```

这是我的php代码：

```
<?php

  //Chart json url
  $url = "http://website.com";

   function get_json($url)
   {
      $ch = curl_init();

      //Very short time to get json so long timeout not needed
       $timeout = 5;
       curl_setopt($ch,CURLOPT_URL,$url);
       curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
       curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
       $data = curl_exec($ch);
       curl_close($ch);
       return $data;
   }

   $json = get_json($url);

   $info = json_decode($json,true);

//Prints the outer variables

   print "This is the end_time for the chart : ";
   print $info["response"]["end_time"]."<br />";

   print "This is the name for the chart : ";
   print $info["response"]["name"]."<br />";

   print "This is the UUID of the chart : ";
   print $info["response"]["id"]."<br />";

   print "This is the period for the chart : ";
   print $info["response"]["period"]."<br />";

   /* gets the json data from the URL */

?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T15:07:31.217

How about this?

```
$stuff = json_decode($json, true);

$results = array();

foreach($stuff['response']['data'] as $chunk) {
  $artist = $chunk['artist'];
  $id   = $artist['id'];
  $name = $artist['name'];

  $rank = $chunk['rank'];

  $tuple = array($id, $name, $rank);

  $results[] = $tuple;
} 
```

# windows - 访问远程计算机

> ID：14425709
> 
> 赞同：-1
> 
> 时间：2013-01-20T14:53:21.910
> 
> 标签：windows, networking, windows-7, windows-8

假设我希望通过 IP 地址连接到远程计算机，并打开共享 C 盘：我将点击 WinKey+r，然后在运行命令中输入：

> \192.168.0.1\C

现在假设这个服务器需要用户名和密码才能登录。通常，当我输入上述命令时，我会弹出一个窗口，要求我输入用户名和密码。一旦我输入，我就进去了。

如果我想跳过此“弹出窗口”并直接输入用户名和密码以登录怎么办，例如：

> \user:pass@192.168.0.1\C

我尝试使用 net use，但这并不能满足我的需求，因为我希望在我的 Windows 资源管理器中实际打开驱动器 C。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:59:50.503

您总是可以创建一个映射到另一台计算机的 C$ 的共享驱动器。创建驱动器时保存您的登录信息。

或者

在两台计算机上创建相同的登录。如果失败，Windows 会尝试使用您当前的用户名/密码登录，然后提示输入不同的用户名/密码。

注意：无论哪种方式，如果您使用选项 1)，那么该用户必须是您要连接的计算机上的管理员。如果使用选项 2)，那么您新创建的帐户必须是管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:25:49.910

您可以创建一个小批量脚本并将其添加到您的路径中，将下面的行添加到名为 example 的文件中`mapc.bat`并将其复制到`system32`目录中：

```
@echo off
net use x: \\%1\C /user:%2 %3
explorer x: 
```

现在您应该能够映射共享并在资源管理器中打开它，只需在控制台中键入以下内容：

```
mapc <address> <username> <password> 
```

# c# - 将 TextBox 值转换为 Form2 TextBox 值

> ID：14425713
> 
> 赞同：0
> 
> 时间：2013-01-20T14:53:31.850
> 
> 标签：c#, winforms, visual-studio-2012

基本上，当用户在 on 中输入数据`textfield`时`Form2`，我希望将该数据存储到变量中，然后当用户选择按钮输入时，`Form2`将隐藏并`Form1`出现。然后我想`Form1`在新`textfield`的.`Form2``textfield`

这是我的尝试，但它不起作用

在表格 2...

```
public string Player1 {get; set;}

private void pvpPlay_Click(object sender, EventArgs e)
    {

        Player1 = txtPlayer1.Text;
        Form1 op = new Form1();
        op.Show();
        this.Hide();

    } 
```

然后在 Form1 上调用这个我放...

```
Form2 f = new Form2();
txtTest.Text = f.Player1; 
```

但它不起作用。希望有人知道答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:56:01.290

我更喜欢使用这样的简单回调函数：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public String SomeProperty { get; set; }

    private void OpenFormButton_Click(object sender, EventArgs e)
    {
        var secondForm = new Form2()
        {
            GetSomeProperty = () => { return SomeProperty ;};
        };
        this.Hide(); //The best way to hide!
        secondForm.Show();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        SomeProperty = "HELLO WORLD";
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public Func<string> GetSomeProperty
    {
        get;
        set;
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        MessageBox.Show(GetSomeProperty.Invoke());
    }
} 
```

每次调用`GetSomeProperty.Invoke();`Func 时都会调用 get 访问器并从第一个表单返回它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:31:42.077

您可以做的是重载**构造**`Form1`函数。

```
public Form1(string s)
{  
    txtTest.Text=s;
} 
```

当从`Form2`

```
Form1 op = new Form1(Player1); 
```

# c - 中间四舍五入

> ID：14425715
> 
> 赞同：0
> 
> 时间：2013-01-20T14:53:34.570
> 
> 标签：c, c99

如果我有这样的情况；

```
int a = 1;
int b = 3;

if ((a/b) > 0) ... 
```

中间结果 (a/b) 是否像浮点数 (0.33) 或 int (0 因为舍入) 受到威胁？我来自 VB6 世界，这种情况的计算结果为假，因为当两个整数相除时，中间结果也将是一个整数（并且 0 > 0 = 假）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T14:55:04.693

将两个整数相除会导致整数除法，即结果被截断。在这种情况下，它的计算结果总是为 0。如果您希望结果为浮点值，您可以简单地将一个 int 除以一个浮点数、一个浮点数除以一个整数或两个浮点数。（可以通过将至少一个操作数转换为浮点类型来实现类似的行为。）

# c# - 如何覆盖 MVC API 中的 OData 查询？

> ID：14425719
> 
> 赞同：0
> 
> 时间：2013-01-20T14:53:45.787
> 
> 标签：c#, asp.net-mvc, entity-framework, odata

我正在尝试覆盖 OData 查询..

我想升级我的应用程序。

**OLD**应用程序获取 User 对象，如下所示：

`http://localhost:12345/api/users/?$filter=userName eq 'test'`

新**应用**程序将像这样获取 User 对象：

`http://localhost:12345/api/users/?userName=test`

我想支持旧应用程序，并覆盖 OData 查询`?$filter=...`

通过覆盖，我可以使用新方法并返回正确的用户对象。

有没有办法覆盖 OData 查询？

PS：我需要保持 $top 和 $orderby OData 查询不变...

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:36:42.123

WCF DS 没有提供这样做的方法。但是 IIS 可以帮助您。

这个想法是重写 url，使用 URL Rewrite 模块将其更改为您需要的内容。例如，在您的情况下，您应该指定当 IIS 收到包含*userName*的请求时，它会重写它以使用*$filter*代替。

```
<rewrite>
  <rules>
    <rule name="Compatibility with older versions" enabled="true" stopProcessing="true">
      <match url="^api/users/?$userName eq (.*)" />
      <action type="Rewrite" url="http://localhost:12345/api/users/?$filter={R:2}"/>
    </rule>
  </rules>
</rewrite> 
```

当然，我没有在您的应用程序中对其进行测试，但这就是我们在项目中进行测试以保持版本兼容性的方式。

您应该阅读更多有关它的信息，因为您可以使用该 IIS 模块做很多事情。

# jquery - 没有在 Struts 2 的 jquery 网格中获取数据

> ID：14425720
> 
> 赞同：3
> 
> 时间：2013-01-20T14:53:46.670
> 
> 标签：jquery, json, jqgrid, struts2, struts2-json-plugin

**网格.jsp：**

```
<html>
<head>
    <title>jqGrid Example Part 1</title>
    <link rel="stylesheet" href="jquery-ui-1.8.14.custom.css" type="text/css"/>
    <link rel="stylesheet" href="ui.jqgrid.css" type="text/css"/>
    <script src="jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="grid.locale-en.js" type="text/javascript"></script>
    <script src="jquery.jqGrid.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        function getGrid() {
            alert("I was here");
            var jqDataUrl = 'getData.action';
            // Set up the jquery grid
            $("#jqTable").jqGrid({
                // Ajax related configurations
                url        : jqDataUrl,
                datatype   : "json",
                gridModel  : "gridModel",
                // Specify the column names
                colNames   : ["id", "name"],
                // Configure the columns
                colModel   : [
                    { name: "id", index: "id", width: 40, align: "left" },
                    { name: "name", index: "name", width: 100, align: "left" }
                ],
                // Grid total width and height
                width      : 550,
                height     : 200,
                // Paging
                toppager   : true,
                pager      : $("#jqTablePager"),
                rowNum     : 5,
                rowList    : [5, 10, 20],
                viewrecords: true, // Specify if "total number of records" is displayed
                // Default sorting
                sortname   : "Id",
                sortorder  : "asc",
                // Grid caption
                caption    : "A Basic jqGrid - Read Only"
            }).navGrid("#jqTablePager",
                    { refresh: true, add: false, edit: false, del: false },
                    {}, // settings for edit
                    {}, // settings for add
                    {}, // settings for delete
                    {sopt: ["cn"]} // Search options. Some options can be set on column level
            );

            alert("out");
        }
    </script>
</head>
<body onload="getGrid();">
<div>
    <p>hi</p>
    <table id="jqTable" class="scroll">
    </table>
    <div id="jqTablePager"></div>
</div>
</body>
</html> 
```

我`Struts.xml`的是这样的

```
<action name="getData" class="net.viralpatel.contact.view.ContactAction" method="getData">
<result name="success" type="json" >gird.jsp</result>          
</action> 
```

当我执行为时，我可以看到 json`getData.action`结果

```
{
    "data"        : "success",
    "gridModel"   : [
        {"id": 1, "name": "akhilesh"},
        {"id": 0, "name": null}
    ],
    "page"        : 1,
    "records"     : 2,
    "rows"        : 2,
    "searchField" : null,
    "searchOper"  : null,
    "searchString": null,
    "sidx"        : null,
    "sord"        : null,
    "total"       : 2
} 
```

我无法在我的 Grid..gridModel 中获取值已正确映射到我的表..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:18:31.817

而不是定义：

```
gridModel: "gridModel" 
```

做：

```
jsonReader : {
    repeatitems: false,
    root       : "gridModel"
},                // Specify the column names 
```

所以它应该是：

```
$("#jqTable").jqGrid({
    // Ajax related configurations
    url        : "data.json",
    datatype   : "json",
    jsonReader: {
        repeatitems: false,
        root       : "gridModel"
    },                // Specify the column names
    colNames   : ["id", "name"],
    // Configure the columns
    colModel   : [
        { name: "id", index: "id", width: 40, align: "left" },
        { name: "name", index: "name", width: 100, align: "left" }
    ],
    // Grid total width and height
    width      : 550,
    height     : 200,
    // Paging
    toppager   : true,
    pager      : $("#jqTablePager"),
    rowNum     : 5,
    rowList    : [5, 10, 20],
    viewrecords: true, // Specify if "total number of records" is displayed
    // Default sorting
    sortname   : "Id",
    sortorder  : "asc",
    // Grid caption
    caption    : "A Basic jqGrid - Read Only"
}).navGrid("#jqTablePager",
        { refresh: true, add: false, edit: false, del: false },
        {}, // settings for edit
        {}, // settings for add
        {}, // settings for delete
        {sopt: ["cn"]} // Search options. Some options can be set on column level
); 
```

# java - 为什么我的 android 应用程序因“不幸的是我的应用程序停止”错误而崩溃？

> ID：14425726
> 
> 赞同：1
> 
> 时间：2013-01-20T14:54:36.410
> 
> 标签：java, android, xml

我仍在学习 android 应用程序开发，当我开始使用 google maps api v2（尚未使用它）制作一个非常简单的应用程序后，当我在我的 Sony Xperia SL 上运行它时，它显示“不幸的是 myapp 停止了”。LogCat 中的红色消息是“无法打开文件进行读取”（两次）。

主菜单.java

```
public class MainMenu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);

    Button bntStart = (Button) findViewById(R.id.buttonStart);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(1, menu);
    return true;
}
} 
```

MainActivity.java

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

活动主菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/menu_bg"
android:gravity="center_vertical"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <Button
        android:id="@+id/buttonStart"
        android:layout_width="80dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="5dp"
        android:text="Start" />

    <Button
        android:id="@+id/buttonStop"
        android:layout_width="80dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="5dp"
        android:text="Stop" />

</LinearLayout>

<Button
    android:id="@+id/buttonExit"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="5dp"
    android:text="Exit" />

</LinearLayout> 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="taxi.route"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="16" />

<permission
    android:name="taxi.route.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="taxi.route.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="taxi.route.MainMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCwPOMQ3LaE81JN3wdY6DvUi7EIJdn0q-I" />

    <activity
        android:name="taxi.route.MainActivity"
        android:label="activity_main" >
    </activity>
</application>

</manifest> 
```

堆栈跟踪（我不确定这是否是问题）

```
01-20 17:48:32.129: D/dalvikvm(663): Late-enabling CheckJNI
01-20 17:48:32.399: D/TextLayoutCache(663): Using debug level: 0 - Debug Enabled: 0
01-20 17:48:32.459: D/libEGL(663): loaded /system/lib/egl/libGLES_android.so
01-20 17:48:32.469: D/libEGL(663): loaded /system/lib/egl/libEGL_adreno200.so
01-20 17:48:32.469: D/libEGL(663): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
01-20 17:48:32.469: D/libEGL(663): loaded /system/lib/egl/libGLESv2_adreno200.so
01-20 17:48:32.509: I/Adreno200-EGLSUB(663): <ConfigWindowMatch:2078>: Format RGBA_8888.
01-20 17:48:32.519: D/memalloc(663): /dev/pmem: Mapped buffer base:0x5c67c000 size:27111424 offset:23343104 fd:64
01-20 17:48:32.519: E/(663): Can't open file for reading
01-20 17:48:32.519: E/(663): Can't open file for reading
01-20 17:48:32.529: D/OpenGLRenderer(663): Enabling debug mode 0
01-20 17:48:32.529: W/ResourceType(663): No package identifier when getting value for resource number 0x00000001
01-20 17:48:32.529: D/AndroidRuntime(663): Shutting down VM
01-20 17:48:32.529: W/dalvikvm(663): threadid=1: thread exiting with uncaught exception (group=0x40aa8210)
01-20 17:48:32.529: E/AndroidRuntime(663): FATAL EXCEPTION: main
01-20 17:48:32.529: E/AndroidRuntime(663): android.content.res.Resources$NotFoundException: Resource ID #0x1
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.content.res.Resources.getValue(Resources.java:1023)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2110)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.content.res.Resources.getLayout(Resources.java:862)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.view.MenuInflater.inflate(MenuInflater.java:92)
01-20 17:48:32.529: E/AndroidRuntime(663):  at taxi.route.MainMenu.onCreateOptionsMenu(MainMenu.java:21)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.app.Activity.onCreatePanelMenu(Activity.java:2444)
01-20 17:48:32.529: E/AndroidRuntime(663):  at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:392)
01-20 17:48:32.529: E/AndroidRuntime(663):  at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:743)
01-20 17:48:32.529: E/AndroidRuntime(663):  at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2838)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.os.Handler.handleCallback(Handler.java:605)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.os.Looper.loop(Looper.java:137)
01-20 17:48:32.529: E/AndroidRuntime(663):  at android.app.ActivityThread.main(ActivityThread.java:4441)
01-20 17:48:32.529: E/AndroidRuntime(663):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 17:48:32.529: E/AndroidRuntime(663):  at java.lang.reflect.Method.invoke(Method.java:511)
01-20 17:48:32.529: E/AndroidRuntime(663):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-20 17:48:32.529: E/AndroidRuntime(663):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-20 17:48:32.529: E/AndroidRuntime(663):  at dalvik.system.NativeStart.main(Native Method)
01-20 17:48:35.009: I/Process(663): Sending signal. PID: 663 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:42:50.057

由于以下行，您很可能会遇到问题`MainMenu`：

```
getMenuInflater().inflate(1, menu); 
```

`inflate()`需要一个指向 XML 菜单文件的资源 ID 和一个`Menu`对象。但是，`1`几乎可以肯定不是一个有效的 ID，从而导致异常。尝试将 ID 传递给 Menu XML 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T16:36:40.560

习惯使用异常处理，这样您的应用程序就不会崩溃。至少做一些类似的事情：

```
try {
    /// my code
} catch (Trowable t) {
    Log.e("MyTag", t.getMessage(), t);
} 
```

大多数时候你想做更多的事情：

```
try {
            /// my code
} catch (MostLikelyException mle) {
   /// Handle the exception
} catch (LikelyException le) {
   /// Handle the exception
} catch (Trowable t) {
   /// Handle the exception
} 
```

由于您无法访问日志，因此一种解决方法是使用 toast 来获取异常信息。

将每个方法的代码包装在 try/catch 中。当你捕捉到异常时，用 Toast.makeText(this / *pointer to the activity* /, t.getMessage, Toast.LENGTH_LONG).show();处理它

找出您无法访问日志的原因应该是当务之急。

# c# - 在 ActionLink 中与代码连接

> ID：14425728
> 
> 赞同：0
> 
> 时间：2013-01-20T14:54:43.410
> 
> 标签：c#, asp.net-mvc, concatenation, actionlink

我正在尝试连接`c.name`with`Response.Write(counts[c.ID]);`

基本上，在 中`<li>`，我希望它是“类别名称 (x)”。

`if`因此，基本上将声明推到`c.name`. 如何才能做到这一点？

```
<li>
    <%:Html.ActionLink(c.Name, "Browse", "Listing", routes, null)%>
    <%
        if (showCounts && (bool)(ViewData["ValidCategoryCounts"] ?? true))
        {
            Response.Write("(");
            if (counts.ContainsKey(c.ID))
            {
                Response.Write(counts[c.ID]);
            }
            else
            {
                Response.Write("0");
            }
            Response.Write(")");
        }
    %>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:08:57.553

我建议在控制器代码中构建完整的链接文本。或者，您可以在视图标记中使用帮助程序，例如以下示例：

```
<%:Html.ActionLink(Html.GetNameWithCount(c.Name, counts), "Browse", "Listing", routes, null)%> 
```

# c# - WPF ListBox 只能显示其项目的属性吗？

> ID：14425737
> 
> 赞同：0
> 
> 时间：2013-01-20T14:55:13.330
> 
> 标签：c#, wpf

我有一个`ListBox`看起来像这样的：

```
<ListBox ItemsSource="{StaticResource journal}" DisplayMemberPath="Title" /> 
```

当“标题”是一个属性时，例如：

```
public string Title { get; set; } 
```

它显示得很好，但是如果我`Title`改为创建一个公共字段，则`ListBox`只会显示一个空字符串。不幸的是，这使得无法使用结构，因为它们不支持属性。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:57:48.403

WPF 绑定引擎不支持公共字段。如果它们是结构，您最好创建一个 ViewModel 来显示这些项目（具有适当的属性）。

# c# - linq 如何在查询中通过连接和分离来休眠

> ID：14425749
> 
> 赞同：3
> 
> 时间：2013-01-20T14:56:26.983
> 
> 标签：c#, linq, nhibernate, join, linq-to-nhibernate

我有 3 个类：Person、Employee1、Employee2

```
public class Employee1 : Person
{
}

public class Employee2 : Person
{
} 
```

我需要对 Person_Table 进行查询，该查询需要一段时间才能加入 Employee1_Table 或 Employee_Table。

```
var q = SessionInstance.Query<Person>();

if (dto.Code != null)                           // A1 Condition
     q = q.Where(x => x.Code == dto.Code);

//if(A2 Condition)
//if(A3 Condition)
//...

switch (dto.Type)
{
    case PersonType.Employee1:
         var q1 = SessionInstance.Query<Employee1>();
         q.Join(q1, x => x.Id, xx => xx.Id, (x, xx) => x);

         if (!String.IsNullOrEmpty(dto.Unit))   // B1 Condition
             q1 = q1.Where(xx => xx.Unit == dto.Unit);

         //if(B2 Condition)
         //if(B3 Condition)
         //... 

         return q1.ToList<Person>();

    case PersonType.Employee2:
         var q2 = SessionInstance.Query<Employee2>();
         q.Join(q2, x => x.Id, xx => xx.Id, (x, xx) => x);

         if (!String.IsNullOrEmpty(dto.Serial)) // C1 Condition
             q2 = q2.Where(xx => xx.Serial == dto.Serial);

         //if(C2 Condition)
         //if(C3 Condition)
         //... 

         return q2.ToList<Person>();

    default:
         return q.ToList();
} 
```

此联接查询不完整。如果**dto.Type**等于**PersonType.Employee1**或**PersonType.Employee2**，`A1 , A2 , ...`则不影响。但是对于 switch 的默认情况，`A1 , A2 , ...`对查询有影响。我在 3 个单独的类中的 Where 条件很多，我需要`Where`单独添加查询条件。为什么？

**更新 ：**

```
var q = SessionInstance.Query<Person>();

if (dto.Code != null)                           // A1 Condition
     q = q.Where(x => x.Code == dto.Code);

//if(A2 Condition)
//if(A3 Condition)
//...

 var q1 = SessionInstance.Query<Employee1>();

 if (!String.IsNullOrEmpty(dto.Unit))   // B1 Condition
     q1 = q1.Where(xx => xx.Unit == dto.Unit);

 //if(B2 Condition)
 //if(B3 Condition)
 //... 

 return q.Join(q1, x => x.Id, xx => xx.Id, (x, xx) => x).ToList<Person>(); 
```

`B1`如果条件为真，则此更新的查询会出现异常。此异常的消息是：**不支持指定的方法。**

**堆栈跟踪是：**

```
 at NHibernate.Hql.Ast.ANTLR.PolymorphicQuerySourceDetector.GetClassName(IASTNode querySource)
   at NHibernate.Hql.Ast.ANTLR.PolymorphicQuerySourceDetector.Process(IASTNode tree)
   at NHibernate.Hql.Ast.ANTLR.AstPolymorphicProcessor.Process()
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(IASTNode ast, String queryIdentifier, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(String queryIdentifier, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters)
   at NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow)
   at NHibernate.Impl.AbstractSessionImpl.CreateQuery(IQueryExpression queryExpression)
   at NHibernate.Linq.NhQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.NhQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Data.Linq.QueryableBase`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T15:12:42.767

在非默认切换情况下，您分别返回 q1 和 q2。这些查询永远不会分配任何涉及 q 的内容，这解释了为什么最终查询中不存在 Ax 条件。

另外，考虑这一行：

```
q.Join(q1, x => x.Id, xx => xx.Id, (x, xx) => x); 
```

与所有 LINQ 方法一样，Join method() 不会以任何方式影响 q 或 q1，而是返回一个新的 IQueryable。编写的代码忽略了此返回值，因此该行对最终查询没有影响。

您在其他任何地方都有正确的模式，即：“q = q.Something ....”。

您必须更改 Join() 以在其最后一个参数中返回新的 {x, xx}，以便您可以将 .Where() 调用从 q1 移动到 q，并且仍然可以访问 q1 中的项目。就像是：

```
var qJoined = q.Join(SessionInstance.Query<Employee1>(),
                     x => x.Id, xx => xx.Id,
                     (x, xx) => new {x, xx});

if (!String.IsNullOrEmpty(dto.Unit))   // B1 Condition
    qJoined = qJoined.Where(w => w.xx.Unit == dto.Unit);

return qJoined.Select(w => w.x).ToList(); 
```

# php - 将 PHP 文件写入另一个目录中的另一个文件，其值取决于变量

> ID：14425753
> 
> 赞同：1
> 
> 时间：2013-01-20T14:57:04.407
> 
> 标签：php, cron

我对 PHP 很陌生，所以如果这是一个愚蠢的问题，我很抱歉。

我正在尝试创建一些东西来将 PHP 文件写入另一个目录中的另一个文件。这个想法是所有生成的目录都必须包含一个通过 cron 运行的文件，但是我不能简单地复制文件，因为文件的一部分取决于创建目录时存在的变量，但不是t 总是会在那里。

这与将以下内容写入文件的情况相同（显然这是一个示例）：

```
<?php
    $test = mysql_query("SELECT * FROM table WHEN memberID='$groupID'");
?> 
```

如何`$groupID`从执行`fopen('','w')`编写新 PHP 文件的函数的文件中获取变量？任何人都可以举一个将上述内容写入文件的示例吗？

提前致谢！

**编辑：**我已经接受了原始问题的答案，但是@MichaelBerkowski 的答案是一个可以考虑的有效替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:02:22.380

不确定我是否正确理解了您想要做什么，但万一我做到了：

```
<?php
$groupId = 343; // Define your Id here
$string = "<?php
    $test = mysql_query(\"SELECT * FROM table WHEN memberID='".$groupId."'\");?>";
$file = fopen("yournewfile.php","w");
fwrite($file,$string);
fclose($file);
?> 
```

这会将您提供的内容（PHP 文件）写入文件“yournewfile.php”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:10:42.027

我将提出一个替代解决方案。与其在每个目录中生成由 cron 执行的 PHP 文件，也许更好的解决方案是创建*一个*由 cron 运行的 PHP 脚本，并下降到您的每个动态目录并在那里执行必要的任务。

如果您的所有目录都在一个地方或一个级别，那么它可能就像用 a 迭代`glob('dirs/*', GLOB_ONLYDIR)`来定位它们一样简单。如果目录结构比较复杂，可能需要递归降序。

但是，如果您的目录成员关系在您的数据库中关联，则实际上只需从数据库中选择所有目录及其关联成员，并检查`filectime()`其中包含的文件以进行通知。

# wordpress - WordPress>EditMedia>ThumbnailCrop>坏了？

> ID：14425756
> 
> 赞同：1
> 
> 时间：2013-01-20T14:57:30.813
> 
> 标签：wordpress, thumbnails, crop

我正在学习制作 WordPress 主题，并正在使用 TwentyTwelve 主题作为参考进行测试，以确保我的主题兼容等，一切都很好。使用带有 TwentyTwelve 且没有插件的全新 WP 安装时会发生以下问题：

自动生成的缩略图效果很好，可以为类别视图制作 150 像素的正方形，但有时图像在中心加权裁剪时看起来不正确；因此需要在编辑媒体部分进行调整。如果我从“编辑媒体”页面重新裁剪并制作新的缩略图，它似乎在 WP Admin 中都可以工作，但是公共站点会出现故障并显示全尺寸图像的重新缩放版本；不是我新创建的 150px 缩略图。

在我自己的主题中，我添加了一个 php 函数来删除添加到缩略图文件名中的“e1358606444772”内容，因此新的缩略图现在用正确的文件名和路径替换自动创建的缩略图，但我仍然得到相同的响应：缩略图以正确的宽度显示；但实际上是以原始纵横比重新缩放的全尺寸图像。

我已经在 WP 论坛上发帖，但无法得到回复。请有人对此有所了解吗？谢谢 ....

# python - pygame.RESIZABLE 给出 KeyError

> ID：14425760
> 
> 赞同：1
> 
> 时间：2013-01-20T14:57:53.617
> 
> 标签：python, python-2.7, pygame, configparser

关于代码的一点点；我想要做的是将一个部分变成一个字典，这样我就可以轻松地管理它。当然，因为 ConfigParser 将所有内容都作为字符串返回（大多数情况下），我必须将其更改为所需的类型。这就是我的问题开始的地方。

### 代码

```
import ConfigParser, pygame

parser = ConfigParser.SafeConfigParser()

class loadfile(object):

    def __init__(self, filename):
        self.filename = filename

    def load(self):
        parser.read(self.filename)

        for section_name in parser.sections():
            vars()[section_name] = {}

            for name, value in parser.items(section_name):
                if value.isdigit():
                    value = int(value)
                elif value == "None":
                    value = None
                elif value == "True" or value == "False":
                    value = parser.getboolean( section_name, name )
                else:
                    value = vars()[ parser.get( section_name, name ) ]

                vars()[section_name].update( { name : value } )

            print vars()[section_name]

    def save(self):
        pass

loadfile("config.ini").load() 
```

### 配置文件

```
[Display]
Width       : 800
Height      : 600
Depth       : 32
Caption     : 45
Flags       : pygame.RESIZABLE
Icon        : None
Mouse       : True
FPS         : 30

; Key configuration;

[Keys]
Left        : pygame/K_LEFT
Right       : pygame.K_RIGHT
Jump        : pygame.K_UP
Duck        : pygame.K_DOWN
Sprint      : pygame.K_RSHIFT
Attack_1    : pygame.K_a
Attack_2    : pygame.K_s
Attack_3    : pygame.K_d
gameMenu    : pygame.K_ESCAPE
Dialogue    : pygame.K_RETURN 
```

### 错误

```
Traceback (most recent call last):
  File "C:\Users\***\Desktop\config2.py", line 35, in <module>
    loadfile("config.ini").load()
  File "C:\Users\***\Desktop\config2.py", line 27, in load
    value = vars()[ parser.get( section_name, name ) ]
KeyError: 'pygame.RESIZABLE' 
```

在我将代码放入它自己的类之前发生了同样的错误，如果我使用过`import pygame`，但是当我使用它时它神秘地消失了`from pygame import *`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:38:06.490

这是我为此编写的一些代码，它不使用`ConfigParser`但应该可以工作。
（至少在你的情况下）

```
class loadfile(object):

    def __init__(self, filename):
        self.filename = filename

    def load(self):
        x = open(self.filename).read()     # open as file and read
        d,k = x.split('; Key configuration;')   # split at Key configration
        d = d.splitlines()
        k = k.splitlines()
        ddict = {}
        for i in d:
                i = i.split(':')
                i = [z.strip() for z in i] # strip whitespace(s)
                if len(i) == 2: # a valid assignment line
                        ddict[i[0]] = i[1] # assignment of value
        #same for keys
        kdict = {}
        for i in k:
                i = i.split(':')
                i = [z.strip() for z in i]
                if len(i) == 2:
                        kdict[i[0]] = i[1]
        print '---Display---'
        for key in kdict:
            print '%10s:%19s' % (key,kdict[key]) # print display part
        print '---Keys---'
        for key in ddict:
            print '%10s:%19s' % (key,ddict[key]) # print key part
        self.kdict = kdict
        self.ddict = ddict
    def save(self):
        pass

x = loadfile("config.ini")
x.load() 
```

**输出**（来自您的 config.ini）

```
---Display---
  Attack_1:         pygame.K_a
  Dialogue:    pygame.K_RETURN
     Right:     pygame.K_RIGHT
      Jump:        pygame.K_UP
  Attack_3:         pygame.K_d
  Attack_2:         pygame.K_s
      Duck:      pygame.K_DOWN
    Sprint:    pygame.K_RSHIFT
  gameMenu:    pygame.K_ESCAPE
      Left:      pygame/K_LEFT
---Keys---
   Caption:                 45
    Height:                600
     Width:                800
     Depth:                 32
     Flags:   pygame.RESIZABLE
       FPS:                 30
     Mouse:               True
      Icon:               None 
```

此外，如果您对 ini 文件使用以下类型的格式（格式可能不是正确的词），它可能更容易使用。

```
[Display]
Width=800
Height=600
Depth=32
Caption=45
Flags=pygame.RESIZABLE
Icon=None
Mouse=True
FPS=30
-----
[Keys]
Left=pygame/K_LEFT
Right=pygame.K_RIGHT
Jump=pygame.K_UP
Duck=pygame.K_DOWN
Sprint=pygame.K_RSHIFT
Attack_1=pygame.K_a
Attack_2=pygame.K_s
Attack_3=pygame.K_d
gameMenu=pygame.K_ESCAPE
Dialogue=pygame.K_RETURN
----- 
```

这可以执行（从'-----'拆分后，并删除每一个的第一行。（[keys]，[display]）

# regex - OCaml 正则表达式：指定出现次数

> ID：14425762
> 
> 赞同：5
> 
> 时间：2013-01-20T14:58:03.480
> 
> 标签：regex, ocaml

在 OCaml 中，如何在正则表达式中指定模式的出现次数？我浏览了 Str 模块，找不到`{n}`量词的等价物。

例如，如果我想指定一个“年份”模式，即正好 4 位数字，除了做之外还有什么办法`"[0-9][0-9][0-9][0-9]"`吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T02:26:06.623

扩展 rgrinberg 注释，ocaml-re ( [https://github.com/ocaml/ocaml-re](https://github.com/ocaml/ocaml-re) ) 支持 Perl、PCRE 和 Emacs 模式，支持 {m,n} 量词。

显示它支持它的测试链接（使用 perl 模式）：[https](https://github.com/ocaml/ocaml-re/blob/master/lib_test/test_perl.ml#L80) ://github.com/ocaml/ocaml-re/blob/master/lib_test/test_perl.ml#L80 。

# jquery - jquery datepicker将事件添加到下一个和上一个按钮

> ID：14425765
> 
> 赞同：1
> 
> 时间：2013-01-20T14:58:29.700
> 
> 标签：jquery, datepicker

我显示了一个 3 个月的日期选择器，在右上角有下一个按钮可以提前一个月。我想给这个下一个按钮添加一个事件，我想用这个按钮触发另一个功能，但下个月也必须出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:02:58.640

您可以使用以下委托为此按钮创建单击处理程序`.on()`：

```
$(document).on('click','.ui-datepicker-next',function(){
     alert('next btn clicked');
}); 
```

# c# - 如何将图像上传到我的应用程序有权访问的任何本地或远程 Web 服务器

> ID：14425769
> 
> 赞同：0
> 
> 时间：2013-01-20T14:58:47.120
> 
> 标签：c#, asp.net-mvc, image-uploading, remote-server

我的第一个决定是是否将图像存储在数据库或文件系统中，经过一些研究，我选择了文件系统。

随着图像的增加，我需要通过获取更多 Web 服务器来水平扩展它，因此我需要将图像的网络/互联网位置存储在某处，以便我可以访问它可能位于的任何 Web 服务器。

我理论上有我需要的东西，但我不知道如何获取文件并将其保存在远程服务器上。具体来说，最好的方法是什么？UNC 路径是一种选择吗？

为了清楚起见，我已经获得了图像服务器端，只需将其发送/保存到我选择的任何 Web 服务器即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:09:17.067

在本地，您可以只[使用 File.Copy()](http://msdn.microsoft.com/it-it/library/system.io.file.copy%28v=vs.80%29.aspx)。否则，您必须使用 FTP 上传它们：

```
public void UpLoadFile(String serverFilePath, string localFilePath)
{
    String serverFullPath = "ftp://" + s_ServerHost + serverFilePath;
    FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create(serverFullPath);
    ftp.Credentials = new NetworkCredential("user", "password");
    ftp.KeepAlive = true;
    ftp.Method = WebRequestMethods.Ftp.UploadFile;
    ftp.UseBinary = true;

    using (FileStream fs = File.OpenRead(localFilePath))
    {
        Byte[] buffer = new Byte[fs.Length];
        fs.Read(buffer, 0, buffer.Length);
    }

    using (Stream ftpStream = ftp.GetRequestStream())
        ftpStream.Write(buffer, 0, buffer.Length);
} 
```

为了检索它，您必须知道服务器的 IP/主机名和文件的最终公共路径。

# sql - 具有多个条件的 SQL 选择查询的时间复杂度

> ID：14425771
> 
> 赞同：3
> 
> 时间：2013-01-20T14:58:57.393
> 
> 标签：sql, data-structures, complexity-theory, b-tree

涉及多个条件的 SQL 选择查询的时间复杂度是多少？

```
SELECT * 
  FROM products 
 WHERE price > 100 
   AND width > 100 
   AND rating > 100 
```

例如，数据库引擎 (InnoDB) 如何使用价格、宽度和评级索引来处理此查询？

引擎会先处理价格，然后按宽度和评级过滤结果吗？这意味着首先 O(log(n)+k)，其中 k 是结果数，n 是产品表中的条目数，然后是 O(n)，然后是 O(n)，n 是每个最后的结果数过滤操作？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:22:45.187

您基本上是在询问 SQL 优化器是如何工作的，并且正如所指出的，它因 SQL 版本而异，并且取决于。

通常（非常广泛），优化器保留有关表的元数据，以便它可以选择哪个索引有意义。例如，如果一个表包含学生性别和 GPA，您会期望优化器始终使用 GPA 上的索引。但是，如果您在一所全是男性的学校运行查询并搜索女性，优化器可能会意识到先搜索性别列会更快（因为返回的记录很少）。此外，如果您的表非常小，优化器可能会说，“见鬼的索引，我将只扫描整个该死的表”......

在您的示例中，请考虑有多少不同的值。该列都是整数吗？如果是这样，优化器可以查询元数据并说“嗯，只有 300 行评级超过 100，而 10,000 行价格超过 100，我想我会使用评级开始”...... .

但是，正如 OMG 小马指出的那样，**这取决于...**

# c++ - 通过 ADL 从另一个函数调用一个函数

> ID：14425774
> 
> 赞同：0
> 
> 时间：2013-01-20T14:59:17.733
> 
> 标签：c++, namespaces, argument-dependent-lookup

我有一个关于 ADL 在一般情况下如何找到类型的问题。具体来说，我有一些“通用”代码，我需要在编译时检查是否存在 ADL 应该找到的函数。例如：

```
#include "MyClass.h"
struct MyClass
{
    friend inline void DoSomething(MyClass& first, MyClass& second){} 
}

MyClass a, b;
DoSomething(a,b); //DoSomething in MyClass will be found by ADL 
```

我有一个特征类，它使用“sizeof 技巧”来检查这个 ADL 函数的存在：

```
//HasDoSomething.h
//type trait to check whether a type has a DoSomething function defined 
template<typename T>                                
struct has_doSomething
{                                                      
    typedef char yes;   
    typedef char (&no)[2];

    //SFINAE eliminates this when the type is invalid
    template <typename U, U> 
    struct Check; 

    template <typename U> 
    static yes Tester(Check<void(*)(U&, U&), &DoSomething>*);

    //overload resolution prefers anything at all over ...
    template <typename U> static no Tester(...);

    static bool const value = sizeof(Tester<T>(0)) == sizeof(yes);    
}; 
```

trait class/sizeof 技巧本身并不重要（您可以在 C++ Template Metaprogramming 一书中找到详细信息，如果您有兴趣，我会从这本书中找到它）。相反，问题是这种类型特征将不会编译，除非我在确实定义了 DoSomething 的（任意）类型的 #include*之后#include 它，例如，*

```
#include "MyClass.h"
#include "HasDoSomething.h" 
```

或者，我创建一个带有 DoSomething 函数声明的虚拟类：

```
struct DummyClass
{
public:
    friend inline void DoSomething(DummyClass&, DummyClass&);
private:
    DummyClass(){}
}; 
```

并将其（直接或通过 Dummy.h）包含到 HasDoSomething.h 中。通过强制#includes的顺序或插入冗余代码来启动ADL查找似乎并不理想，所以我误解了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:16:26.883

ADL 仅用于确定函数调用的重载集。
在编译器可以做到这一点之前，它必须首先确定这是一个函数调用，方法是进行正常的名称查找并找到一个函数。

# jquery - jQuery Click 在 iScroll 4 上不起作用？

> ID：14425785
> 
> 赞同：2
> 
> 时间：2013-01-20T15:00:06.413
> 
> 标签：jquery, iscroll4, iscroll

我有这段[iScoll 4](http://cubiq.org/iscroll-4)正确显示的代码：

```
<ul id="thelist">
<li id="1">Option 1</li>
<li id="2">Option 2</li>
<li id="3">Option 3</li>
<li id="4">Option 4</li>
</ul> 
```

但是当我使用这个 jQuery 代码时它不起作用：

```
$("li").click(function(){
alert($(this).text());
}); 
```

最奇怪的部分是这段代码有效：

```
$("#thelist").click(function(){
alert($(this).text());
}); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:12:59.337

有几种写法；我会尝试`.on()`看看会发生什么：

```
$('#thelist').on({

    click: function () { alert($(this).text()); }

}, 'li'); 
```

这是一个要测试的[jsfiddle 。](http://jsfiddle.net/fQEHm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:09:18.043

你有没有尝试过`$("#thelist").children("li").click(function() { ...`

# algorithm - 分布式计算中的 LCR vs Floodmax（Leader Election）

> ID：14425786
> 
> 赞同：0
> 
> 时间：2013-01-20T15:00:09.567
> 
> 标签：algorithm, networking, distributed

我试图在同步网络的背景下了解 LCR 和 Floodmax 之间的实际区别。

我知道 Floodmax 的时间复杂度为 O(N)，本质上的工作原理如下：

*   每个进程都保持它迄今为止看到的最大 UID（最初是它自己的）。
*   在每一轮中，每个进程都会将此最大值发送给每个传出邻居。
*   如果最大值是进程的 UID，则在 diam 回合之后，它会选举自己为领导者，否则它是非领导者。

另一方面，LCR：

*   每个进程在环周围发送其 UID。当一个进程收到一个 UID 时，它会将这个 UID 与它自己的进行比较。
*   如果传入的 UID 更大，那么它将这个 UID 传递给下一个进程。
*   如果传入的 UID 较小，则将其丢弃。
*   如果相等，则该进程将自己声明为领导者。

它的时间复杂度也为 O(N)。因此，从本质上讲，这两种算法都在令牌环网络中传递 UID。两者之间有什么真正的区别或优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:16:53.163

顾名思义，FloodMax 算法用消息“淹没”网络。与 LCR 不同，即使网络拓扑**不是**环形，FloodMax 也能正常工作。FloodMax 算法的先决条件是必须知道网络直径（对于 LCR，情况并非如此），并且具有直径轮次的时间复杂度。另一方面，LCR 不需要知道网络直径：因此，它需要额外的通信开销，因为领导者需要通知所有其他进程在它选择自己后终止。

# c++ - 标准排序似乎永远循环

> ID：14425788
> 
> 赞同：1
> 
> 时间：2013-01-20T15:00:14.373
> 
> 标签：c++, sorting, std

现在我有一门课来做二分搜索。该类接受一个向量，但随后我告诉该类进行排序。

我需要能够仅按名字或姓氏对其进行排序，因此我将字符参数设置为该类中的一个选项，以更改对向量进行排序的方式。我还在那个类中创建了一个 operator() 函数来使用 *this，作为对向量进行排序的类指针。但它似乎只是永远循环。谁能告诉我为什么？代码如下。

*请注意，如果有一些我不遵循的一般做法，请随时通知我。我不想现在就开始养成坏习惯。

按要求：Getname

```
void personType::getName(string& first, string& last)
{
    // get the name and set it
    first = firstName;
    last = lastName;
}

bool sBinary::operator()(studentType student1, studentType student2){
    string toCheck1, toCheck2, fName1,lName1 ,fName2 , lName2;
    student1.getName(fName1, lName1);
    student2.getName(fName2, lName2);
    toCheck1=checkStr(fName1, lName1);
    toCheck2=checkStr(fName2,lName2);
    return toCheck1<toCheck2;
}

string sBinary::checkStr(string fName, string lName){
    string toCheck;
    switch (choice){
    case 'f':
    case 'F':
        toCheck=fName;
        break;
    case 'l':
    case 'L':
        toCheck=lName;
        break;
    case 'r':
    case 'R':
        toCheck=fName+lName;
        break;
    default:
        toCheck=lName+fName;

    }

    return toCheck;

}

sBinary::sBinary(vector<studentType> _sList, char _choice){
    sList=_sList;
    steps=0;
    choice=_choice;
    sort(sList.begin(),sList.end(), *this);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T15:51:33.143

因此，似乎不是永远循环，而是执行时间过长。这是完全不同的故事。您的代码中有一些悲观之处：主要关注的是您将`*this`, 传递给排序算法：

```
sort(sList.begin(),sList.end(), *this); 
```

`std::sort`按值获取比较谓词并将其复制多次。你可以看到它，如果你定义了复制构造函数：

```
sBinary(const sBinary& r):choice(r.choice), sList(r.sList)
{
    std::cout << "copied\n";
} 
```

并且您的向量与对象本身一起被复制。

例如，如果数组大小为 200，则`std::sort`复制对象*13646 次*。这意味着，涉及*2700000 个*学生复制操作。

所以，你不应该传递`*this`给`std::sort`. 您最好定义静态函数`lessThen`，而不是`operator()`将其传递给排序算法。

## 进一步的改进：

1.  [按引用传递](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)，而不是按值传递。例如，在您的`lessThen`函数声明中应如下所示

    ```
    static bool lessThen(const studentType& student1, const studentType& student2);
                       //^^^^^            ^
                       //constant         reference 
    ```

2.  重构你的`studentType`类。

    你最好有 2 个单独的函数，返回名字和姓氏（通过常量引用）。在这种情况下，您可以摆脱将名称复制到临时变量。请注意，当您有单个功能时，您必须复制名字和姓氏，即使永远不会使用一个名字：

    ```
    const std::string& first_name() const { return _fname; }
    const std::string& last_name() const { return _lname; } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T18:00:28.587

我将其包括在内只是因为您应该知道如何排序此列表的替代方法。Lol4t0 已经谈到了拥有一个复制成本高昂的比较器的可怕之处（而且您将很难拥有一个比您的原始实现更昂贵的比较器）。

当`std::sort`给定一个尽可能简单的比较器时，算法效果最好，尽可能多地内联它的实现。理想情况下，您可以像这样实现比较器运算符功能：

```
struct cmpObjects
{
    bool operator ()(const Object& left, const Object& right) const
    {
        return (left compared to right somehow);
    }
} 
```

首先注意 const 引用的使用。您唯一应该考虑不这样做的情况是您的基础数据是本机内在类型（例如`int`,`char`等）。在这些情况下，按值传递实际上*更快。*但在这种情况下，您的学生记录通过引用访问无疑会更有效（无需复制）。

关于您的特定任务，您的任务会稍微复杂一些，因为您的排序标准是基于选择的。如果你想最大化排序速度，你最好为每个选择情况提供一个单一的、紧凑的、廉价的可复制比较器。然后，根据该选择使用适当的比较器，在调用*之前*`std::sort`确定。

例如，如果您知道要按姓氏排序，则：

```
// compares last name
struct cmp_LName
{
    bool operator ()(const studentType& left, const studentType& right) const
    {
        return left.lastName < right.lastName;
    }
} 
```

或者也许是名字，姓氏，例如：

```
// compares first name, then last name only if first name is identical.
struct cmp_FNameLName
{
    bool operator ()(const studentType& left, const studentType& right) const
    {
        int res = left.firstName.compare(right.firstName);
        return res < 0 || (res == 0 && left.lastName < right.lastName);
    }
} 
```

这使得您的构造函数的部分窥视`sBinary`现在看起来像这样：

```
sBinary(const std::vector<studentType>& sList_, char choice)
    : sList(sList_)
{
    switch (choice)
    {
        case 'L':
        case 'l':
            std::sort(sList.begin(), sList.end(), cmp_LName());
            break;

        case 'R':
        case 'r':
            std::sort(sList.begin(), sList.end(), cmp_FNameLName());
            break;

        ....
    }
} 
```

首先请注意，我们在实际调用*之前*选择了我们选择的比较技术`std::sort`。当我们这样做时，我们清楚地定义了我们正在使用的自定义比较器中的确切标准，并且管理它的开销为零。

那么有什么取舍呢？您将需要四个比较器（cmp_LName、cmp_FName、cmp_FNameLName 和 cmp_LNameFName），根据您的传入选择触发要使用的比较器。但是，这样做的好处不容小觑：*这将是根据选择对列表进行排序的最快方法。*

* * *

附录：**单个比较器**

如果您完全赞同使用单个比较器的想法，那么请尽可能降低复制成本，并将排序条件中的选择隐藏在其中，`const`以便为编译器提供清理代码的最佳机会。我在`sBinary`下面包含了一个完整的扩展来展示如何做到这一点，但我强调，如果速度是您的主要关注点，这**不是最佳选择。**

```
class sBinary
{
    // compare student based on fixed choice determine at construction.
    struct cmp_student
    {
        const char choice;
        cmp_student(char choice) : choice(choice) {};

        bool operator()(const studentType& left, const studentType& right) const
        {
            switch (choice)
            {
                case 'F':
                case 'f':
                    return left.firstName < right.firstName;

                case 'L':
                case 'l':
                    return left.lastName < right.lastName;

                case 'R':
                case 'r':
                {
                    int res = left.firstName.compare(right.firstName);
                    return res < 0 || (res == 0 &&  left.lastName < right.lastName);
                }

                default:
                {
                    int res = left.lastName.compare(right.lastName);
                    return res < 0 || (res == 0 &&  left.firstName < right.firstName);
                }
            }
        }
    };

public:
    sBinary(const std::vector<studentType>& sList, char choice)
        : sList(sList)
    {
        std::sort(sList.begin(), sList.end(), cmp_student(choice));
    }

    std::vector<studentType> sList;
}; 
```

# html - 有些网站不允许通过 IFRAME 嵌入，有没有可能？

> ID：14425790
> 
> 赞同：0
> 
> 时间：2013-01-20T15:00:27.483
> 
> 标签：html, iframe

我注意到有些网站不允许通过 iframe HTML 标签嵌入。

有没有其他方法可以工作？我也尝试过加载 HTML 对象标签，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:15:54.383

您不能在 iframe 中绕过像 google 这样的嵌入网站，因为它们会添加 x-frame-options 标头（拒绝或相同来源）。支持这些标头的浏览器根本不会允许它。

[https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

如果您只需要从页面获取数据并显示它，您可以在服务器端获取数据，但这可能不是您的意图。

祝你好运。

# linux - 如何使用 sed 用反斜杠替换字符串模式

> ID：14425791
> 
> 赞同：7
> 
> 时间：2013-01-20T15:00:29.610
> 
> 标签：linux, replace, sed, backslash

我想对以下模式进行替换（上述规则具有更高的优先级）

```
\right)   -> remain unchanged
\right )  -> remain unchanged
\right]   -> remain unchanged
\right ]  -> remain unchanged
\right}   -> remain unchanged
\right }  -> remain unchanged
\ri)      -> \right)
\ri       -> \rightarrow
\right    -> \rightarrow 
```

换句话说，如果有任何括号括号或大括号，我想有\right，如果有的话，应该用\rightarrow代替。简而言之，我试图将许多简写的谷歌文档方程转换为适当的 LaTeX 格式。我想出的是以下

```
sed -i 's/\\ri\([^g]\)/\\right\1/g' $tempfile1  #first step substitution
sed -i 's/\\right\([^])}>|a]\)/\\rightarrow\1/g' $tempfile1 
sed -i 's/\\right \([^])}>|a]\)/\\rightarrow \1/g' $tempfile1 
```

它工作正常，只是它没有按预期将 \right\ 更改为 \rightarrow\。我的测试输入 tempfile1 如下

```
\ri\right\right \right)\right]\right }\right )\ri \right ]\righta \al \\ 
```

它进入

```
\rightarrow\right\rightarrow \right)\right]\right }\right )\rightarrow \right ]\rightarrow \alpha \\ 
```

注意 \right\ 部分没有正确完成。然后我添加了以下行，认为它会显式拾取剩下的内容，但是，它没有按预期工作，现在我真的很困惑......

```
sed -i 's/\\right\\/\\rightarrow\\/g' $tempfile1 #why this does not work 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:04:43.193

当表达式出现问题时：

```
sed -i 's/\\right\([^])}>|a]\)/\\rightarrow\1/g' 
```

适用于：

```
\right\right\ 
```

第一个匹配读取`\right\`并替换为`\rightarrow\`; 当扫描恢复时会出现问题，它从`r`第二个开始`right`，而不是反斜杠（这是上一场比赛的一部分）。

简单的技巧是重复命令......

```
sed -i -e 's/\\right\([^])}>|a]\)/\\rightarrow\1/g' \
       -e 's/\\right\([^])}>|a]\)/\\rightarrow\1/g' 
```

*重新扫描通过再次从头*开始处理第二个`\right\`序列。

# r - 如何编辑现有的直方图（或任何图表）？

> ID：14425792
> 
> 赞同：4
> 
> 时间：2013-01-20T15:00:34.810
> 
> 标签：r, histogram

我正在学习 R 教程。目前我正在制作直方图。随着教程的进行，它会要求对已构建的直方图进行更改 - 添加 xlab、添加 main 等。

这很好，除非每次我必须从头开始创建直方图。

一个编辑如何存在而不是再次写出所有代码？是否将直方图作为对象并每次都对其进行编辑？我试过了。可以说我从这个开始：

```
hearthist <- hist(outcome[,11]) 
```

然后我想添加一个 xlabel。我没有高兴地尝试了这个：

```
hearthist (xlab="30-Day Death Rate") 
```

这里的最佳做法是什么？每次我想添加参数时是否需要重新创建一个新的直方图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:22:15.683

不; 基本图形使用笔在纸上的习语；一旦你做了一个标记，直到你得到一张新的纸。

所以，使用学习相应的工具。在这种情况下，您可以编写 R 代码并将其通过管道传输到正在运行的 R 实例中的 R 感知编辑器。我将 ESS 与 Emacs 一起使用，但酷儿们使用 RStudio。给后者一个机会。

即使是标准的、普通的旧 R 也有一个历史机制，它允许您向后滚动命令并从命令行重新运行它们。

或者学习使用适当的 R 工具。`title()`允许您向现有绘图**添加** `xlab`、`ylab`、`main`和。`sub`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:23:05.603

您正在尝试构建一个场景。我的意思是您将进一步的输出添加到基本绘图中。我认为图形包在视觉解码绘图信息方面不是很灵活。

我会使用其他基于网格包的 R-graphics 包，如 Lattice/ggplot2，它们更适合这种操作。

这是一个使用 ggplot2 的示例：

```
set.seed(1234)
df <- data.frame(cond = factor( rep(c("A","B"), each=200) ), 
                 rating = c(rnorm(200),rnorm(200, mean=.8)))
ggplot(df, aes(x=rating)) + geom_histogram(binwidth=.5) 
```

现在我编辑原始场景的 xlab：

```
last_plot()+xlab("30-Day Death Rate") 
```

# javascript - 使用 jQuery 输入太短时显示警告消息

> ID：14425796
> 
> 赞同：0
> 
> 时间：2013-01-20T15:00:51.547
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 在输入短于给定限制时显示警报消息。不幸的是，我的代码不起作用，因此寻求您的帮助。

这是我正在使用的代码。

HTML

```
<input type="textarea" name="message" id="message" row="20" col="50" />
<input type="submit" name="submit" id="submit" value="Send Message" /> 
```

JavaScript

```
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $("input:submit[name='submit']").on("click",function() {
        var msgwords = $("input:textarea[name='message']").val().replace( /[^\w ]/g, "" ).split( /\s+/ ).length;
        var minwords = 10;
            if (comwords < minwords) {
                alert("Your Comment is too short.");
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:03:41.020

你想切换`if(comwords < minwords)`到`if(msgwords < minwords)`

* * *

这是您的完整工作代码。随心所欲地改变。

```
<script type="text/javascript">
/* Use $ instead of `jQuery`, it's nicer */
$(document).ready(function() {
    /* Reference the button ID (it's unique...) */
    $("#submit").click(function(e) {
        /* Your function to replace works nicely */
        var msgwords = $("#message").val().replace( /[^\w ]/g, "" ).split( /\s+/ ).length;
        var minwords = 10;
        if (msgwords < minwords) {
            e.preventDefault();
            alert("Your Comment is too short.");
        } 
    });
});
</script> 
```

此代码引用了确切的 ID（一旦您知道它正在工作，您就可以更改它）。您检查*单词*而不是*字符*的拆分功能也可以很好地工作。最后，`e.preventDefault()`如果评论太短，阻止按钮提交。

* * *

我还想指出，您*可以*使用`e.preventDefault();`or `return false`，后者相当于`e.preventDefault();`and `e.stopPropagation();`。这可以防止该事件传播（或“冒泡”）DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:04:40.663

有两个问题。

1.  没有这样的`:textarea`伪选择器。
2.  `comwords`没有定义。

`:textarea`无论如何，您都可以从选择器中删除。并使用`msgwords`而不是`comwords`.

* * *

我会这样做：

*   用于`.form()`绑定到`submit`事件。另外，防止表单提交。
*   使用 . 清理前导和尾随空格`String#trim`。
*   利用`id`元素的属性；）

沿着这些思路：

```
<form>
  <input type="textarea" name="message" id="message" row="20" col="50" />
  <input type="submit" name="submit" id="submit" value="Send Message" />
</form> 
```

```
jQuery(function($) {
  $("form").submit(function () {
    var minwords = 10;
    /* Trim leading and trailing spaces */
    var message = $("#message").val().trim();
    var words = message.split(/\s+/).length;
    /* Disambiguous matches for an empty string  */
    if ((message == "") || (words < minwords)) {
      alert("Your comment is too short.");
      /* Prevent form submission by returning false */
      return false;
    }
    return true;
  });
}); 
```

# javascript - 拉斐尔：图形元素消失

> ID：14425798
> 
> 赞同：0
> 
> 时间：2013-01-20T15:01:00.003
> 
> 标签：javascript, raphael

我开始摆弄拉斐尔，但我有一个无法解决的问题：

出于测试目的，我正在尝试一个简化的场景：在给定位置添加一个圆圈，使用 x 和 y 的两个输入字段。

圆圈会出现几分之一秒，然后消失。它发生在 chrome 和 FF 中（未在其他人身上尝试过）

我有这个 html

```
<div id="canvas_container"></div>
x<input id="cx" /><br/>
y<input id="cy" /><br/>
<button onclick="see(document.getElementById('cx').value,document.getElementById('cy').value)">Populate</button> 
```

而这个js

```
 var paper;
window.onload = function () {paper = new Raphael(document.getElementById('canvas_container'), 1000, 1000);
}

function see(x, y) {

    alert("coords " + x + " " + y);
var fino = paper.circle(x, y, 20).attr({
    stroke: 'none',
    fill: '#f60'
}).toFront();} 
```

我敢肯定这会很容易而且可能很愚蠢，但我看不到它提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:47:01.213

首先。我建议您不要使用内联 javascript，最好以不同的方式定义事件侦听器。在下一个小提琴中，我使用的方法也不是更好。你可以使用`target.addEventListener(type, listener[, useCapture]);`例如你可以去[这里](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)看看它是如何工作的。

因此，您可以尝试使用此标记作为起点：

```
 <div id="canvas_container"></div>
    <lable>x</lable>
    <input id="cx" /><br/>
    <lable>y</lable>
    <input id="cy" /><br/>
    <button id="button">Populate</button> 
```

而这个JS：

```
var paper;
paper = new Raphael(document.getElementById('canvas_container'), 1000, 1000)

function see(x, y) {
    alert("coords " + x + " " + y);
    var fino = paper.circle(x, y, 20).attr({
        stroke: 'none',
        fill: '#f60'
    })

}

var button = document.getElementById('button');

button.onclick = function(){
    var x = document.getElementById('cx').value;
    var y = document.getElementById('cy').value;
    see(x,y);
} 
```

你可以看到它在[这个](http://jsfiddle.net/vJn7k/)小提琴上工作。你准备好了。

# ms-office - Windows Server 2012 上的办公自动化（互操作）

> ID：14425803
> 
> 赞同：2
> 
> 时间：2013-01-20T15:01:57.160
> 
> 标签：ms-office, office-interop

我在 Windows Server 2008 R2 和 Office 2007 上成功使用 Office 自动化，以便将 Office 文档转换为 PDF。代码相当简单：

```
public class WordConvert
{
    /// <summary>
    /// Converts a word file to PDF
    /// </summary>
    /// <param name="sourceFilePath">The path of the word file to convert</param>
    /// <param name="targetFilePath">The path of the PDF output file</param>
    public static void ConvertWord(string sourceFilePath, string targetFilePath)
    {
        object objTragetFileName = targetFilePath;
        Word.Application wordDocument = new Word.Application();
        try
        {
            OpenWord(sourceFilePath, wordDocument);
            SaveAsPDF(ref objTragetFileName, wordDocument);
        }
        finally
        {
            CloseWord(wordDocument);
        }
    }

    private static void OpenWord(object sourceFileName, Word.Application wordDocument)
    {
        wordDocument.Documents.Open(ref sourceFileName);
    }

    private static void SaveAsPDF(ref object targetFileName, Word.Application wordDocument)
    {
        object format = Word.WdSaveFormat.wdFormatPDF;
        wordDocument.ActiveDocument.SaveAs(ref targetFileName, ref format);
    }

    private static void CloseWord(Word.Application wordDocument)
    {
        if (wordDocument != null)
        {
            GC.Collect();
            GC.WaitForPendingFinalizers();

            // 2nd time to be safe
            GC.Collect();
            GC.WaitForPendingFinalizers();

            Word.Documents documents = wordDocument.Documents;
            documents.Close();
            Marshal.ReleaseComObject(documents);
            documents = null;

            Word.Application application = wordDocument.Application;
            application.Quit();
            Marshal.ReleaseComObject(application);
            application = null;
        }
    }
} 
```

问题是此代码在 Windows Server 2012 上不起作用。收到的错误是：

```
System.Runtime.InteropServices.COMException (0x800706BA): The RPC server is unavailable. (Exception from HRESULT: 0x800706BA) 
```

以交互式用户（控制台应用程序）身份运行代码工作正常，但从 IIS Web 应用程序或 Windows 服务运行时失败（即使使用“允许服务与桌面交互”）。运行应用程序的用户具有足够的权限（管理员），并且代码在 Office 2010 中运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T15:08:39.667

我可能会因为这个答案而被否决，但我在一个企业环境中工作，我们有一个使用办公自动化的产品，这是非常有问题的。

我在这个领域做过研究，***微软本身***建议不要做办公自动化。

以下直接来自微软的MSDN知识库

> Microsoft 不推荐也不支持 Office 的服务器端自动化。

还

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

来源： http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:34:32.280

找到的唯一解决方案是使调用 Office API 的进程以交互方式运行。它可以通过运行控制台应用程序（对于服务器解决方案来说不是最聪明的想法）或通过创建一些后台服务（例如，windows 服务）并设置它的站（SetProcessWindowStation）来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T12:50:00.607

看到该错误消息的原因之一是服务器是否**缺少 SysWow64**文件夹。这里有一个链接，可以帮助您更好地理解。

[http://per.lausten.dk/blog/2011/04/excel-automation-on-windows-server-2008-x64.html](http://per.lausten.dk/blog/2011/04/excel-automation-on-windows-server-2008-x64.html)

# php - 错误 1170：函数不返回 av 值

> ID：14425806
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:02:13.163
> 
> 标签：php, actionscript-3

我是 Flash 新手，我正在制作一个用鼠标控制的游戏。但我收到了这个错误：

错误 1170：函数不返回值。

我正在尝试编写一个 getter 以将 bulletType 返回到 main.as

```
public function get(_bulletT:String):String
{ 
    for (var i = 0; i < _bulletT.length; i++) 
    {
        if (_bulletT.charAt(i) == "star")
        {
            return "star";
            "star";
        }
        else 
        {
            return "circle";
            "circle";
        }
    } 
```

它要求什么价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:20:34.357

我建议您将来格式化您的代码。此外，最好不要在一行中编写代码，因为它不会带来额外的好处。您的代码将被编译成 Flash 播放器将执行的目标代码。

无论如何，您的功能有一些问题。第一个错误来源是您将返回值包含在 if/else 块中。函数体本身没有指定返回值。以下是您的代码的外观：

```
 public function get(_bulletT:String):String {
            for (var i:int = 0; i < _bulletT.length; i++) {
                if (_bulletT.charAt(i) == "star") {
                    return "star";
                } 
            }
            return "circle";
        } 
```

请注意，如果满足条件，您只想返回“star”。一旦你返回一个值，循环将终止并且函数将退出。另一种情况是，如果在循环中不满足条件，则函数应返回循环。但是，这个功能没有意义。我相信您正在测试一个字符串是否包含“星”这个词，对吗？如果是这种情况，那么您可以这样做：

```
 public function get(_bulletT:String):String {
            if (_bulletT.indexOf("star") != -1) {
                return "star";
            } 
            return "circle";
        } 
```

但是，我不认为那是你真正想要的。您可能想确定**_bulletT**是否持有价值星。因此，如果是这种情况，那么您可以这样做：

```
 public function get(_bulletT:String):String {
        if (_bulletT == "star") {
            return "star";
        } 
        return "circle";
    } 
```

您正在命名您的函数**get**，这是 Actionscript 在使用类和为类创建 getter/setter 属性时的保留字。无论如何，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:19:46.993

在您的场景中，当 的长度为零时，该函数实际上可能根本不返回任何内容`_bulletT`- 它根本不会进入块，并且（根据您提供的代码）是您拥有语句`for`的唯一地方。`return`

也许尝试`return`在块之后添加另一个语句`for`？`for`或者如果长度为零之前抛出错误？

# cakephp - CakePHP - 在后台调用动作

> ID：14425817
> 
> 赞同：0
> 
> 时间：2013-01-20T15:03:39.337
> 
> 标签：cakephp

我创建了一个不错的小函数，它可以创建发票并将其作为 PDF 保存在我的服务器上，称为 create_invoice()。

我想在同一个控制器的不同操作中使用该操作。它需要做的是在屏幕上将发票显示为 HTML，同时将 PDF 保存在后台。用户不应注意到这一点。

我看过 setAction 和 requestAction，但这并不是我真正需要的。有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:02:18.483

您在执行此操作时遇到问题，因为它是错误的。您应该将此代码构建为一个库，这样您就可以从任何地方运行发票。

MyInvoiceLib::generate($data);

例如，您可能希望稍后通过 crons 在 shell 中执行此操作。

请参阅[此处](https://github.com/ceeram/CakePdf/blob/master/Pdf/CakePdf.php)了解渲染 pdf 的好插件，请注意其中没有控制器。

# android - Android 上的 X264 和 ARM 编码

> ID：14425821
> 
> 赞同：0
> 
> 时间：2013-01-20T15:03:48.900
> 
> 标签：android, encoding, ffmpeg, arm, x264

我最近使用 ffmpeg 和本机代码构建了一个在 Android 上运行的视频编码类。我对编码视频所需的时间感到惊讶，最多大约 1 帧/秒。我已经尝试使用 x264 和针对速度优化的设置以及使用 mpeg - 没有真正的区别。

x264 库现在支持 ARM 架构，并且在这些拥有超过 20fps 的编码速度方面非常高效。我不确定我是否正确使用它。这是我用于编译的脚本：

```
./configure --prefix=$PREFIX \
--enable-shared \
--enable-static \
--disable-gpac \
--enable-debug \
--extra-cflags=" -I$ARM_INC -fPIC -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fno-short-enums -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ -Wno-psabi -march=armv5te -msoft-float -mthumb -O3 -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID -Wa,--noexecstack -MMD -MP " \
--extra-ldflags=" -nostdlib -Bdynamic -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,nocopyreloc -Wl,-soname,/usr/lib/libz.so -Wl,-rpath-link=$ARM_LIB,-dynamic-linker=/system/bin/linker -L$ARM_LIB -lc -lm -ldl -lgcc" \
--cross-prefix=${ARM_PRE}- \
--disable-asm \
--host=arm-linux \ 
```

我相信最后一行应该是我所追求的，即启用 ARM 优化。也许我错过了一些东西。

有关信息，我正在 Nexus 7 平板电脑上编码 640x480 视频。这是我的编码器设置（x264）

```
c->gop_size       = 12;
c->pix_fmt        = PIX_FMT_YUV420P;
c->max_b_frames   = 0;
c->scenechange_threshold = 0;
c->rc_buffer_size = 0; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:29:24.567

您应该启用 asm 并禁用调试。为了避免讨厌的警告，运行

```
 make STRIP= 
```

# delphi - 在 Delphi 应用程序中检测 madexcept

> ID：14425822
> 
> 赞同：2
> 
> 时间：2013-01-20T15:03:51.667
> 
> 标签：delphi, madexcept

我可以仅通过分析 exe 文件来检测 delphi 应用程序中是否使用了 madexcept 吗？

有没有一种简单的方法，通过在我的应用程序中添加几行代码并通知最终的 exe 文件用户是否使用了 madshi madexcept

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T18:10:54.043

如果您`madexcept`与 Delphi 应用程序一起使用，则应该有一个资源条目：`MAD->EXCEPT`在该可执行文件中。

要测试外部应用程序：

```
var
  h: HMODULE;

  h := LoadLibraryEx('c:\foo\bar.exe', 0, LOAD_LIBRARY_AS_DATAFILE);
  if h <> 0 then
  begin
    if FindResource(h, 'EXCEPT', 'MAD') <> 0 then 
      ShowMessage('madexcept Found!');
    FreeLibrary(h);
  end; 
```

在*您*自己的应用程序中进行测试：

```
if FindResource(HInstance, 'EXCEPT', 'MAD') <> 0 then 
  ShowMessage('madexcept Found!'); 
```

请注意，whis 不会告诉您`madexcept`使用什么选项。例如，可能有一个异常过滤器设置来过滤访问冲突异常，或者一个不会检查冻结线程等的设置......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T16:51:45.127

您可以对文本“madexcept”进行纯文本搜索。我知道的最简单的方法是使用命令行实用程序。我会像这样组合字符串和 grep 实用程序：

```
C:\mydir>字符串 MyApp.exe | grep -i madexcept
疯狂异常
疯狂异常
疯狂除外
        疯狂除外
U9v;1 madExcept5
一个疯子
        疯狂除外
        疯狂除外1
c madExceptionL
c madExcept
c madExcept
c madExceptionL
c madExcept
c madExcept
        疯狂除外
c madExceptH
这种方式 madExcept 无法安装线钩。
…………

```

我个人使用[GnuWin32](http://gnuwin32.sourceforge.net/)作为这些必不可少的实用程序的来源。

如果您不是命令行类型的人，请使用 Process Explorer。运行可执行文件，然后运行 ​​Process Explorer。找到进程并双击它。将打开 Process Explorer 属性对话框，其中包含一个名为*Strings*的页面。选择该页面并单击保存按钮。现在您有了一个包含可执行文件中所有字符串的文本文件，您可以在其中进行搜索。

所有这一切都会告诉您，您将 madExcept 代码编译到您的程序中。您将不知道它是否实际上处于活动状态。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T13:33:49.803

如果您查看启用了 madExcept 的项目选项，我相信您会看到使用的定义**madExcept**，例如，在您可以执行的任何地方的程序中：

```
{$IFDEF madExcept}
  ....
{$ENDIF} 
```

# java - 在内部类中访问变量。需要宣布最终

> ID：14425826
> 
> 赞同：137
> 
> 时间：2013-01-20T15:04:33.303
> 
> 标签：java, android

我的`onClick`.

这是代码。

```
public class fieldsActivity extends Activity {

Button addSiteButton;
Button cancelButton;
Button signInButton;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // to create a custom title bar for activity window
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.fields);
    // use custom layout title bar
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);

    Pager adapter = new Pager();
    ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager);
    mPager.setAdapter(adapter);
    mPager.setCurrentItem(1);

    addSiteButton = (Button) findViewById(R.id.addSiteButton);
    addSiteButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
           mPager.setCurrentItem(2, true); //Compilation error happens here.
        }

    });

    cancelButton = (Button) findViewById(R.id.cancel_button);
    signInButton = (Button) findViewById(R.id.sign_in_button);

} 
```

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2015-04-24T17:15:29.140

如果你不想让它成为最终的，你总是可以让它成为一个全局变量。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-02-04T17:39:40.677

您可以将变量声明为 final，或将其设为实例（或全局）变量。如果您将其声明为最终版本，则以后将无法更改。

在方法中定义并由匿名内部类访问的任何变量都必须是 final 的。否则，您可以在内部类中使用该变量，而不知道如果内部类中的变量发生更改，然后稍后在封闭范围中使用，则内部类中所做的更改不会在封闭范围中持续存在。基本上，内部类中发生的事情留在内部类中。

我在这里写了更[深入的解释](http://blog.brendanlacanette.com/2015/08/variable-is-accessed-within-inner-class.html)。它还解释了为什么不需要将实例变量和全局变量声明为 final。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-01-20T15:05:36.383

The error says it all, change:

```
ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager); 
```

to

```
final ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-04-09T17:36:03.393

这是一个有趣的答案。

您可以声明一个最终的单元素数组并显然更改数组的元素。我确信它打破了这个编译器规则首先实现的原因，但是当你像我今天一样处于时间限制时它很方便。

我实际上不能为这个赢得荣誉。这是 IntelliJ 的推荐！感觉有点hacky。但似乎没有全局变量那么糟糕，所以我认为这里值得一提。这只是解决问题的一种方法。不一定是最好的。

```
final int[] tapCount = {0};

addSiteButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
       tapCount[0]++;
    }

}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-12-05T04:36:31.527

正如@Veger 所说，您可以使`final`变量可以在内部类中使用。

```
final ViewPager pager = (ViewPager) findViewById(R.id.fieldspager); 
```

我之所以调用它，`pager`而不是`mPager`因为您将它用作`onCreate`方法中的局部变量。前缀通常保留给类成员变量（即，在类开头声明的`m`变量，对所有类方法都可用）。

如果您确实需要一个类成员变量，那么将其设置为 final 是行不通的，因为您不能使用`findViewById`它来设置它的值，直到`onCreate`. 解决方案是不使用匿名内部类。这样`mPager`变量就不需要声明为 final 并且可以在整个类中使用。

```
public class MainActivity extends AppCompatActivity {

    private ViewPager mPager;
    private Button mButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // ...

        mPager = (ViewPager) findViewById(R.id.fieldspager);

        // ...

        mButton.setOnClickListener(myButtonClickHandler);
    }

    View.OnClickListener myButtonClickHandler = new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            mPager.setCurrentItem(2, true);
        }
    };
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-28T06:15:24.503

```
 public class ConfigureActivity extends Activity {

        EditText etOne;
        EditText etTwo;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_configure);

            Button btnConfigure = findViewById(R.id.btnConfigure1);   
            btnConfigure.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            configure();
                        }
                    });
    }

    public  void configure(){
            String one = etOne.getText().toString();
            String two = etTwo.getText().toString();
    }
} 
```

# c - 常量的默认类型

> ID：14425830
> 
> 赞同：0
> 
> 时间：2013-01-20T15:04:58.213
> 
> 标签：c, c99

当我写：

```
if ((1/3) > 0) ... 
```

我是否需要将其中一个操作数转换为 (float) 以使此条件为真？或者 C 使用的默认变量类型是什么？

如果我要写：

```
if ((1.0/3) > 0) ... 
```

现在情况是否发生了变化，因为编译器注意到其中一个操作数必须是浮点数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:12:13.007

> 我是否需要将其中一个操作数转换为 (float) 以使此条件为真？

是的，因为整型文字是类型`int`，并且两种类型之间的除法`int`也返回一个`int`，这意味着省略了分数。

> 现在情况是否发生了变化，因为编译器注意到其中一个操作数必须是浮点数？

是的，因为除法的一个操作数现在是 a `double`，因此除法返回 a`double`以保持精度。（`float`文字后跟一个`f`, 就像在 中一样`1.0f`，但这对于您的问题并不重要。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T15:14:51.987

在没有后缀的情况下，足够小的数字有`int`或`double`类型

```
a = 42; /* 42 has type int */
b = 42.0; /* 42.0 has type double */ 
```

您可以使用后缀来指定文字的类型

```
c = 42U; /* unsigned int */
d = 42.0f; /* float */
e = 42.0L; /* long double */
f = 42ULL; /* unsigned long long (in C99; C89 didn't have long long) */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T15:28:52.003

“1”、“3”、“0”都是整数。
而“1.0”是双精度。
to 情况之间的不同之处在于 double/integer 是 double 而 integer/integer 是整数。

# python - 如何清理 exec 的使用，无法让 setattr 完成这项工作？

> ID：14425831
> 
> 赞同：1
> 
> 时间：2013-01-20T15:05:01.600
> 
> 标签：python, exec, eval, setattr

我想检查以文本表示的任意（在数据中定义的）规则集，而 eval() 很好地完成了这项工作。

例如，定义一个规则来检查 A 和 B 是否都有效：

```
Rule = "A and B"
print eval(Rule) 
```

那么如何动态地将值分配给任意一组项目呢？

我有一个命名选项列表和一个选择列表。选择中的所有内容都被认为是有效的 (True)，而选项中的所有内容，而不是选择中的所有内容都被认为是无效的 (False)。

所以这段代码有效，但我不喜欢它，因为我在本地名称空间中设置值，我无法防止选项名称与我的本地变量发生冲突。

```
def CheckConstraints(self, Selections):
    'Validate the stored constraints'
    Good = True
    ## Undefined options default to False
    for i in self.Options:
        exec(i+" = False")  ## Bad - can I use setattr?
    ## Set defined Options to True
    for i in Selections:
        exec(i+" = True")  ## Bad - can I use setattr?
    for i in self.Constraints:
        if not eval( i ):
            Good = False
            print "Constraint Check Failure:", i, Selections
        else:
            print "Constraint Check OK:", i, Selections
    return Good 
```

我曾尝试使用 setattr，但不清楚 setattr 设置了什么，并且 eval 似乎无法使用设置的值。

我在 python 2.7x

欢迎任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:11:25.857

`eval`可以将字典作为包含新环境的第二个参数。创建一个字典`env`并在其中设置新变量，以确保它不会与您的本地命名空间发生冲突：

```
def CheckConstraints(self, Selections):
    'Validate the stored constraints'
    Good = True
    env = {}
    ## Undefined options default to False
    for i in self.Options:
        env[i] = False
    ## Set defined Options to True
    for i in Selections:
        env[i] = True
    for i in self.Constraints:
        if not eval(i, env):
            Good = False
            print "Constraint Check Failure:", i, Selections
        else:
            print "Constraint Check OK:", i, Selections
    return Good 
```

# javascript - jQuery过滤系统多选不起作用

> ID：14425832
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:02.860
> 
> 标签：javascript, jquery, list, filter, selection

我一直在尝试解决这个问题，但我在 javascript/jquery 方面不是那么好，所以我再次问你们。

如果我选择白色和蓝色，我会得到所有白色和蓝色的动物，那很好。就像我选择马和鸡一样......但问题是，一旦我选择白马或其他东西，我就会得到随机信息......我的问题是我该如何解决这个问题？

Javascript：

```
$(function(){
$('div.tags').delegate('input[type=checkbox]', 'change', function()
{
var $lis = $('.results > li'),
    $checked = $('input:checked');

if ($checked.length)
{
    var selector = $checked.map(function ()
    {
        return '.' + $(this).attr('rel');
    }).get().join();

    $lis.hide().filter(selector).show().addClass("show");   
    console.log(selector)
}
else
{
    $lis.show().removeClass("show");
}
});

}) 
```

html:

```
 <div class="tags">
 <fieldset class="filter-grp">
 <label><input type="checkbox" rel="white" name="year" /> white </label><br>
 <label><input type="checkbox" rel="blue" name="year" /> blue </label><br>
 <label><input type="checkbox" rel="yellow" name="year" /> yellow </label><br>
</fieldset>

<br>
<fieldset class="filter-grp">
<label><input type="checkbox" rel="horse" name="type"  /> horse</label><br>
<label><input type="checkbox" rel="chicken" name="type"  /> chicken</label><br>
<label><input type="checkbox" rel="cow" name="type"  /> cow</label><br>
</fieldset>
<br>

</div>

<ul class="results">
<li class="white cow">white cow</li>
<li class="white horse">white horse</li>
<li class="white chicken">white chicken</li>
<li class="yellow cow">yellow cow</li>
<li class="blue horse">blue horse</li>
<li class="white chicken">white chicken</li>
 </ul> 
```

在这里测试:) [http://jsfiddle.net/d6Zyr/9/](http://jsfiddle.net/d6Zyr/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:16:14.653

```
$(function () {
$('div.tags').delegate('input[type=checkbox]', 'change', function () {
    var $lis = $('.results > li'),
        $checked = $('input:checked');

    if ($checked.length) {
        var selector = $checked.map(function () {
            return '.' + $(this).attr('rel');
        }).get().join();
        selector = selector.replace(",", "") // removes OR selector
        $lis.hide().filter(selector).show().addClass("show");
        console.log(selector)
    } else {
        $lis.show().removeClass("show");
    }
});

}) 
```

见**[演示](http://jsfiddle.net/d6Zyr/14/)**

# javascript - 获取 Dropbox 共享链接的文件列表

> ID：14425833
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:07.133
> 
> 标签：javascript, python, dropbox, dropbox-api, dropbox-php

我想做的事情似乎很简单，但我找不到办法。

想象一下，有人向您发送了一个 Dropbox 文件夹的链接。您可以转到该 URL 并查看文件夹中的所有文件。

我正在尝试用 python、php 或 javascript 编写一个脚本，以从该 URL 获取该文件夹中的所有下载链接。

我该怎么做？无需登录/验证首先发送链接的用户的帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:30:18.563

假设文件夹的内容确实是公开的，正如您在评论中指出的那样，您可能需要研究 PHP[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)函数的使用。

从文档：

> `file_get_contents`— 将整个文件读入字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:11:52.877

我怀疑没有身份验证是否可行。正如[Dropbox API 文档](https://www.dropbox.com/developers/reference/api)中提到的——“Dropbox 使用 OAuth 来验证所有 API 请求。”

# php - 在 Android 上使用 php 调用自定义 Tile 层

> ID：14425834
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:11.423
> 
> 标签：php, android, android-mapview, osmdroid

我需要在我的 Android 应用程序中实现一层非静态自定义图块，该应用程序将 OSMdroid 用于 MapView。调用 php 脚本时会渲染图块，这非常适合网络，但我不确定 Android/OSMdroid MapView 是否也可以以这种方式显示图块？电话看起来像

```
http://my.url/get_tile.php?zoom=1&coords=2,3 
```

它返回缩放级别为 2 的 256x256px .p​​ng 图像，OSM x,y-coordiantes 2,3。

有没有办法通过应用程序的 php 调用直接将这些图块实现到带有例如 XYTileSource 的 MapView 中？或者我需要一个网络脚本，首先将瓷砖渲染到相应的金字塔中，XYTileSource？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:38:37.943

一个 XYTileSourse 想要做的正是你想要的，但它非常接近。我认为您只需要制作自己的版本并使用自己的 getTileURLString 方法来处理 x、y、zoom 参数的格式略有不同。如果您查看 XYTileSourse 的源代码，您会发现它只有 20 行，您只需要更改其中的 2 个。

# javascript - Javascript淡入淡出带有youtube视频的div

> ID：14425836
> 
> 赞同：2
> 
> 时间：2013-01-20T15:05:13.060
> 
> 标签：javascript, css, youtube, fade

我不知道很多javascript，但我想知道这是否可能：

我需要使视频不可见，并且当我按下其中一个链接时，嵌入的 youtube 会淡入（并开始播放）。然后当我 mouseOver 和 mouseOut 我希望它淡出然后能够在 mouseOver 上再次淡入，但我没有让它工作。我得到了不同的结果，其中 div 似乎消失了（当我将鼠标悬停在播放器过去什么都没有消失的地方时），现在我陷入了困境：

这是我在stackoverflow上四处寻找解决方案的过程：

这是一个 jsFiddle > [http://jsfiddle.net/VKzxy/](http://jsfiddle.net/VKzxy/)

还有我的 jQuery：

```
/* elt: Optionally, a HTMLIFrameElement. This frame's video will be played,
     *       if possible. Other videos will be paused*/
    function playVideoAndPauseOthers(frame) {
        $('iframe[src*="http://www.youtube.com/embed/"]').each(function(i) {
            var func = this === frame ? 'playVideo' : 'pauseVideo';
            this.contentWindow.postMessage('{"event":"command","func":"' + func + '","args":""}', '*');
        });
    }
    $('#links a[href^="#vid"]').click(function() {
        var frameId = /#vid(\d+)/.exec($(this).attr('href'));
        if (frameId !== null) {
            frameId = frameId[1]; // Get frameId
            playVideoAndPauseOthers($('#playlist' + frameId + ' iframe')[0]);
                        $($('#playlist' + frameId + ' iframe')[0]).fadeIn(750);
                        //When hovering, fadeIn.
                        $('#content').mouseenter(function(){
                                $($('#playlist' + frameId)[0]).fadeIn(750);
                        });
                        //When leaving, fadeOut.  
                        $($('#playlist' + frameId)[0]).mouseleave(function(){
                                $($('#playlist' + frameId)[0]).fadeOut(750);
                        });
        }
    }); 
```

编辑：它不必在 javascript 中，任何可行的解决方案都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:39:35.330

你需要：

*   暂停所有视频

*   全部隐藏

*   显示所需的视频

*   播放想要的视频

**干得好：**

[http://jsfiddle.net/5Yxhj/6/](http://jsfiddle.net/5Yxhj/6/)

**笔记**

要使淡入淡出效果起作用，您必须将 wmode 设置为不透明，就像在 jsfiddle 示例中一样。

```
src="http://www.youtube.com/embed/a-TrP8Z3Cb8?wmode=opaque& (...) 
```

这将允许 jQuery 对不透明度级别的更改（实际上这是调用fadeIn 或fadeOut 时发生的情况）也显示在flash 对象的顶部。（实际上当 iframe 不透明度发生变化时）。

**这是小提琴中的 JS 代码**

```
function hideAll()
{
    $('#content').children('div').each(function()
    {
        $(this).hide();
    });
}

function fadeAll(strClickId)
{
    var elems = $('#content').children('div'), count = elems.length;

    elems.each(function()
    {
        $(this).fadeOut(750, function()
        {
            $(this).children('iframe')[0].contentWindow.postMessage(
                JSON.stringify({
                    "event": "command",
                    "func": "pauseVideo",
                    "args": ""
                }), "*"
            );
            if (!--count)
            {
                $(strClickId).fadeIn(750, function()
                {
                    $(strClickId).children('iframe')[0].contentWindow.postMessage(
                        JSON.stringify({
                            "event": "command",
                            "func": "playVideo",
                            "args": ""
                        }), "*"
                    );
                });
            }
        });
    });
}

$(window).load(function()
{
    hideAll();
});

$('#links a[href^="#vid"]').click(function()
{    
    var frameId = '#playlist' + $(this).attr('href').substr(4);
    fadeAll(frameId);
}); 
```

# ios - 带有 +(NSArray) 的 NSObject

> ID：14425838
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:05:18.510
> 
> 标签：ios, cocoa-touch, nsarray, nsobject

我正在创建一个 NSObject 来加载 TimeLine twitter 代码：

```
+ (NSArray *)executeTweetFetch

{

    __block NSArray *fetchedTweets = [NSArray array];

    NSURL *getTweetUrl = [NSURL URLWithString:@"http://api.twitter.com/1.1/statuses/home_timeline.json"];

    SLRequest *tweetRequest  = [SLRequest requestForServiceType:SLServiceTypeTwitter

                                                  requestMethod:SLRequestMethodGET

                                                            URL:getTweetUrl

                                                     parameters:nil];
    tweetRequest.account = ACAccount HERE!!!;

    [tweetRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

        if ([urlResponse statusCode] == 200) {
            // Parse the responseData, which we asked to be in JSON format for this request, into an NSDictionary using NSJSONSerialization.

            NSError *jsonParsingError = nil;
            fetchedTweets = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonParsingError];
            //At this point, fetchedTweet seems working fine, it gets the array send back.
        }
    }];

    return fetchedTweets;

} 
```

...是好的...但我必须添加一个 ACAccount （另一种观点）。并且由于它是 + (NSArray *) 它无法识别我的 (ACAccount) 或外部的任何对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:29:54.280

# 同步性

在讨论您要问的问题之前，有必要讨论一下@MartinR 更详细地提到的内容：该方法`-[ACAccount performRequestWithHandler:]`是异步的。

从正在执行代码的线程调用该方法会导致某些活动在第二个后台[队列](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)上启动。同时，在第一个线程（正在执行的线程`performRequestWithHandler:`和`executeTweetRequest`）上继续执行。在调用之后的某个不确定的时间量，`executeTweetRequest`作为唯一参数传递的块`-[ACAccount performRequestWithHandler:]`被调用。

因此，您将无法从 同步返回推文数组`executeTweetRequest`。

最时尚的方法是将您的方法更改为基于块：

```
+ (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block
{
    NSURL *getTweetUrl = [NSURL URLWithString:@"http://api.twitter.com/1.1/statuses/home_timeline.json"];
    SLRequest *tweetRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                                 requestMethod:SLRequestMethodGET
                                                           URL:getTweetUrl
                                                    parameters:nil];
    tweetRequest.account = //...this will be addressed in a moment
    [tweetRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if ([urlResponse statusCode] == 200) {
            NSError *jsonParsingError = nil;
            NSArray *fetchedTweets = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonParsingError];
            block(fetchedTweets, jsonParsingError);
        }
    }];
} 
```

`fetchTweetsWithCompletion:`从您的第二个子类调用时`UITableViewController`，您将传入一个可能类似于以下内容的块：

```
- (void)viewDidLoad
{
    //...
    [TwitterWrapper fetchTweetsWithCompletion:^(NSArray *tweets, NSError *error) {
        if (tweets) {
            self.tweets = tweets;
            [self.tableView reloadData];
        } else if (error) {
            //present a UIAlertView, perhaps...
        }
    }];
    //...
} 
```

这段代码的结果是，一旦后台队列上的推文获取完成，您的表视图控制器的属性`tweets`将设置为获取的结果，并且其表视图将重新加载其数据。

# 范围（解决问题）

你描述的问题

> 因为它是 + (NSArray *) 它无法识别我的 (ACAccount) 或外部的任何对象

`TwitterWrapper`是您无法从您的类方法中访问您的类的任何实例的实例变量（为方便起见，我将调用它） `+[TwitterWrapper executeTweetFetch]`。这里的问题是[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)之一。（结果，多亏了[ARC](http://en.wikipedia.org/wiki/Automatic_Reference_Counting)，问题也是内存管理之一。）

我们的目标是从您的第一个表视图控制器中存储一个实例，`ACAccount`并从您的第二个表视图控制器访问该实例。

有几种方法可以做到这一点：

## 使用全局变量

最**糟糕的** [方法](https://stackoverflow.com/a/7081703/1052673)是使用可怕的[全局变量](http://en.wikipedia.org/wiki/Global_variable#C_and_C.2B.2B)：

在中，您将`TwitterWrapper.h`声明for twitter：`extern``ACAccount`

```
//TwitterWrapper.h

extern ACAccount *twitterAccount;

@interface TwitterWrapper : executeTweetFetch
+ (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block;
@end 
```

在`TwitterWrapper.m`中，您将定义`twitterAccount`使其具有全局范围（例如，在`@implementation`块之前：

```
ACAccount *twitterAccount;

@implementation TwitterWrapper
//...
@end 
```

在您的类方法的定义中，您`executeTweetFetch`将拥有

```
+ (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block
{
    //...
    tweetRequest.account = twitterAccount;
    //...
} 
```

**注意**：这种方法非常不时尚，更不用说完全危险了。 [应尽可能避免使用全局变量。](http://c2.com/cgi/wiki?GlobalVariablesAreBad) 在这种情况下，避免一个当然是可能的。

* * *

接下来的两种方法都涉及更改`fetchTweetsWithCompletion:`为实例方法并将`ACAccount`属性添加到`TwitterWrapper`. 类'`@interface`看起来像

```
@interface TwitterWrapper : NSObject
@property (nonatomic) ACAccount *account;
- (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block;
@end 
```

会`@implementation`看起来像

```
@implementation TwitterWrapper

- (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block
{
    //...
    twitterRequest.account = self.account;
    //...
}

@end 
```

## 使用共享实例

在这种情况下，第二个最糟糕的方法是使用`TwitterWrapper`. 这涉及向类中添加一个类方法（称为类似 的方法`+sharedWrapper`）：

```
@interface TwitterWrapper : NSObject
+ (TwitterWrapper *)sharedWrapper;
@property (nonatomic) ACAccount *account;
- (void)fetchTweetsWithCompletion:(void (^)(NSArray *, NSError *))block;
@end 
```

并使用[Grand Central Dispatch](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)[`dispatch_once`](http://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_once)初始化[`static`局部变量](http://en.wikipedia.org/wiki/Local_variable#Static_local_variables)：

```
@implementation TwitterWrapper

//...

+ (TwitterWrapper *)sharedWrapper
{
    static TwitterWrapper *sharedWrapper = nil;

    static dispatch_once_t pred;
    dispatch_once(&pred, ^{ 
        sharedWrapper = [[self alloc] init]; 
    });

    return sharedWrapper;
}

//...

@end 
```

此时，您有一个实例`TwitterWrapper`，您可以将第一个表视图控制器中的实例存储到该实例中，`ACAccount`并从您的第二个表视图控制器中使用（通过`self.account`在 的实现中`-fetchTweetsWithCompletion:`）：

在您的第一`UITableViewController`个子类中的某个地方，您将拥有

```
//...
ACAccount *theAccount = //this is initialized somehow within this class (the first UITableViewController subclass), probably by the selection of a row
[[TwitterWrapper sharedWrapper] setAccount:theAccount];
//... 
```

然后，在您的第二`UITableViewController`个子类中（可能在 中`-viewDidLoad`），您将拥有

```
 //...
    [[TwitterWrapper sharedWrapper] fetchTweetsWithCompletion:^(NSArray *tweets, NSError *error) {
        if (tweets) {
            self.tweets = tweets;
            [self.tableView reloadData];
        } else if (error) {
            //present a UIAlertView, perhaps...
        }
    }];
    //... 
```

但是，此解决方案与使用全局变量非常相似。（不同之处在于全局变量的创建将是线程安全的。）

## 传递一个 TwitterWrapper 的实例

一个更好的解决方案是将`TwitterWrapper`您的第一个表视图控制器的实例传递给您的第二个。

**注意**：为简洁起见，我假设第二个表视图控制器在用户选择第一个表视图控制器中的帐户行后立即变为活动状态。

为此，您需要添加一个属性

```
@property (nonatomic) TwitterWrapper *twitterWrapper; 
```

到你的第二`UITableViewController`个子类。

在您的第一个表视图控制器中的某个地方，您将拥有

```
//...
ACAccount *theAccount = //this is initialized somehow within this class (the first UITableViewController subclass), probably by the selection of a row
TwitterWrapper *theTwitterWrapper = [[TwitterWrapper alloc] init];
twitterWrapper.account = theAccount;
SecondTableViewController *tweetsTableViewController = //initialize the table view controller
tweetsTableViewController.twitterWrapper = theTwitterWrapper;
//... 
```

然后，在您的第二`UITableViewController`个子类中（可能在 中`-viewDidLoad`），您将拥有

```
 //...
    [self.twitterWrapper fetchTweetsWithCompletion:^(NSArray *tweets, NSError *error) {
        if (tweets) {
            self.tweets = tweets;
            [self.tableView reloadData];
        } else if (error) {
            //present a UIAlertView, perhaps...
        }
    }];
    //... 
```

## 传递一个 ACAccount 实例

最好的解决方案不是`TwitterWrapper`在您的第二个子类实例上存储一个实例，而是存储一个实例并更改接口以再次获取推文。`UITableViewController``ACAccount``TwitterWrapper`

在这种情况下，我们希望 fetch 方法再次成为类方法。正如@MartinR 建议的那样，在您的 fetch 方法中添加一个帐户参数：

```
+ (void)fetchTweetsWithAccount:(ACAccount *)theAccount completion:(void (^)(NSArray *, NSError *))block
{
    NSURL *getTweetUrl = [NSURL URLWithString:@"http://api.twitter.com/1.1/statuses/home_timeline.json"];
    SLRequest *tweetRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                                 requestMethod:SLRequestMethodGET
                                                           URL:getTweetUrl
                                                    parameters:nil];
    tweetRequest.account = theAccount;
    [tweetRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if ([urlResponse statusCode] == 200) {
            NSError *jsonParsingError = nil;
            NSArray *fetchedTweets = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonParsingError];
            block(fetchedTweets, jsonParsingError);
        }
    }];
} 
```

接下来，将 type 的属性添加`ACAccount`到您的第二`UITableViewController`个子类：

```
@property (nonatomic) ACAccount *account; 
```

然后，在您的第一个表视图控制器中的某个地方，您将拥有

```
//...
ACAccount *theAccount = ////this is initialized somehow within this class (the first UITableViewController subclass), probably by the selection of a row
SecondTableViewController *tweetsTableViewController = //initialize the table view controller
tweetsTableViewController.account = theAccount;
//... 
```

然后，在您的第二`UITableViewController`个子类中（可能在 中`-viewDidLoad`），您将拥有

```
 //...
    [TwitterWrapper fetchTweetsWithAccount:self.account completion:^(NSArray *tweets, NSError *error) {
        if (tweets) {
            self.tweets = tweets;
            [self.tableView reloadData];
        } else if (error) {
            //present a UIAlertView, perhaps...
        }
    }];
    //... 
```

# validation - data validation based on adjacent cells in a google spreadsheet

> ID：14425840
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:38.047
> 
> 标签：validation, google-apps-script, google-sheets

The sheet I am using is [here](https://docs.google.com/spreadsheet/ccc?key=0As4zIxUmN7bjdDlQWjZodWJSaE5kMHFOM0pORzBjUHc).

I want to take the validation in column F, Row 2, and apply it to all rows of column F based on the respective values in columns B and C for each row.

E.g. A2 = Pittsburgh, B2=Philadelphia, F2 is a dropdown for either "Pittsburgh" or "Philadelphia". A116=CAROLINA, B116=PHILADELPHIA, then F116 should be a dropdown for either "CAROLINA", or "PHILADELPHIA".

I found [this example script](https://stackoverflow.com/questions/11696499/paste-data-validation-only-using-google-apps-script) that will copy just the validation, however I will need to add a counter to increment each source cell in the validation for each row that it applies to.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T21:42:10.137

我是否遗漏了什么：这不仅仅是编写一个脚本的问题，该脚本将创建一个验证规则，该规则引用由 A 列和 B 列中的相邻单元格相对于 F 列中的单元格组成的列表范围。

如果 'cellInF' 引用当前处于焦点的单元格，则

```
 var validList = cellInF.offset(0,-5,1,2);
   var rule = SpreadsheetApp.newDataValidation().requireValueInRange(validList, true).setAllowInvalid(false).build();
   cellInF.setDataValidation(rule); 
```

# c# - Detect & floodfill ROI using OpenCV

> ID：14425841
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:39.133
> 
> 标签：c#, image-processing, opencv, emgucv, imaging

i have a document image (b/w, 300dpi) containing newspaper like formated text (title, paragraph columns etc).
- How can i detect paragraphs columns to floodfill them with Black Color?
- How can i get distance with of floodfill textcolumns?

Is this possible using OpenCV or EmguCV/C# ?

See this link [http://goo.gl/6djHt](http://goo.gl/6djHt) (no Spam its a shortlink) of what i mean.

Thanks in advance for any hints and code-snippets.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:41:21.560

您可以尝试计算图像每列中黑色像素的数量。这将为您提供一个如下所示的数组（所有数字都是组成的）：

`0 0 0 987 935 967 923 975 954 932 944 0 0 0 923 965 987 933 965 976 922 0 0 0`

所以基本上你有一些大数字和一些零。大数字表示包含文本的列。零表示不包含任何内容的列。如果图像中有噪点，你可能不会得到零，但你可能会得到小数字，你可以处理它们。

您可以使用上面的数组拆分图像并获取列。然后，您可以使用类似的技术来查找文本行（通过对图像行中的黑色像素求和）。您还可以使用此技术来测量段落之间的距离。

当文本行不水平时，此方法可能会失败。此外，当您必须分析报纸的整个页面并且布局复杂时，这可能会失败。但如果您需要处理链接中的图像，这是一种很好的尝试技术。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T18:27:07.340

试试 cvDetectParagraph()。

说真的，另一位发帖人已经回答了您的问题，而您似乎只是希望有人为您完成这项工作。如果你能摆脱如此懒惰，那么软件编程就不会成为一种职业。

# sql - 如何在列中具有默认值的表中插入一行？

> ID：14425843
> 
> 赞同：0
> 
> 时间：2013-01-20T15:05:56.653
> 
> 标签：sql, postgresql, insert, foreign-key-relationship, postgresql-9.1

我有这样的表：

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: forum; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE forum (
    forum_id integer DEFAULT nextval('seq_forum'::regclass) NOT NULL,
    forum_name character varying NOT NULL,
    group_id integer NOT NULL,
    forum_parent integer DEFAULT (-1)
);

ALTER TABLE public.forum OWNER TO postgres;

--
-- Name: PK_forum; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY forum
    ADD CONSTRAINT "PK_forum" PRIMARY KEY (forum_id);

--
-- Name: FK_group; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY forum
    ADD CONSTRAINT "FK_group" FOREIGN KEY (group_id) REFERENCES groups(group_id) ON UPDATE CASCADE ON DELETE CASCADE;

--
-- Name: FK_parent; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY forum
    ADD CONSTRAINT "FK_parent" FOREIGN KEY (forum_parent) REFERENCES forum(forum_id);

--
-- PostgreSQL database dump complete
-- 
```

正如您在上面看到的，该表在列 forum_parent 中有（至少应该有......）一个默认值。我想在这个表中插入一些数据，我这样做：

```
INSERT INTO forum (forum_name, group_id) VALUES('new forum', 1); 
```

是的，我有一个 id = 1 的组。但是这段代码给了我：

```
PostgreSQL error: 23503 ERROR:  insert or update on table "forum" violates foreign key constraint "FK_parent"
DETAIL:  Key (forum_parent)=(-1) is not present in table "forum".

NOTICE:  there is no transaction in progress 
```

如何使它正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:10:35.647

你的`INSERT`说法是正确的。当您没有在`INSERT`语句中明确声明列名时，插入表中的值是默认值（*在您的情况下，它是`-1`*）。

但问题在于参照约束。`forum_parent`表的列`forum`依赖于`forum_id`同一个表的列的值。正如这个 DDL 所说，

```
ALTER TABLE ONLY forum
       ADD CONSTRAINT "FK_parent" FOREIGN KEY (forum_parent) 
       REFERENCES forum(forum_id); 
```

该`INSERT`语句在执行期间失败，因为该值`-1`不在列上`forum_id`。

我的建议是将默认值从更改`-1`为`NULL`

```
CREATE TABLE forum 
(
    forum_id integer DEFAULT nextval('seq_forum'::regclass) NOT NULL,
    forum_name character varying NOT NULL,
    group_id integer NOT NULL,
    forum_parent integer DEFAULT NULL
); 
```

`NULL`和之间的区别在于根本不`-1`知道。`NULL`或该值不存在，`-1`而是现有数值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:09:10.170

您添加了以下约束：

```
ALTER TABLE ONLY forum
 ADD CONSTRAINT "FK_parent" FOREIGN KEY (forum_parent) REFERENCES forum(forum_id); 
```

这基本上说 forum_parent 必须匹配 forum_id 的现有值。你可能没有一行，`forum_id = -1`因此它失败了。

您需要创建一行，`forum_id = -1`然后才能使用该默认值...

另一种选择是将默认值设置为**空**，因为它可以`forum_parent`为空

# sql - Why does Slick generate a subquery when take() method is called

> ID：14425844
> 
> 赞同：7
> 
> 时间：2013-01-20T15:06:02.240
> 
> 标签：sql, scala, slick

I use [Slick](http://slick.typesafe.com/) 1.0.0-RC1\. I have this definition for table object:

```
object ProductTable extends Table[(Int, String, String, String, Double, java.sql.Date, Int, Option[Int], Int, Boolean)]("products") {
  def id = column[Int]("productId", O.PrimaryKey, O.AutoInc)
  def title = column[String]("title")
  def description = column[String]("description")
  def shortDescription = column[String]("shortDescription")
  def price = column[Double]("price")
  def addedDate = column[java.sql.Date]("addedDate")
  def brandId = column[Int]("brandId")
  def defaultImageId = column[Option[Int]]("defaultImageId")
  def visitCounter = column[Int]("visitCounter")
  def archived = column[Boolean]("archived")
  def * = id ~ title ~ description ~ shortDescription ~ price ~ addedDate ~ brandId ~ defaultImageId ~ visitCounter ~ archived
} 
```

I need a simple query which selects 8 rows from database:

```
ProductTable.filter(_.title === "something")
  .sortBy(_.visitCounter)
  .map(_.title)
  .take(8)
  .selectStatement 
```

And the output is:

```
select x2.x3 from 
   (select x4.`title` as x3 from `products` x4 
     where x4.`title` = 'something' 
     order by x4.`visitCounter` limit 8) x2 
```

If I get rid of `take()` method:

```
ProductTable.filter(_.title === "something")
 .sortBy(_.visitCounter)
 .map(_.title)
 .selectStatement 
```

then the output is:

```
select x2.`title` from `products` x2 
where x2.`title` = 'something' 
order by x2.`visitCounter` 
```

So my question is: Why does Slick generate a subquery when its query object is constructed with `take()` method?

P.S. If it can be related, I use MySql driver with all of these

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T15:36:04.807

有一个简短的答案和一个长的答案。简短的是：子查询在那里，因为到目前为止没有人费心去删除它。

更长的答案与交换“map”和“take”没有任何区别的事实有关，这是因为查询的编译几乎是简单而直接的。

在查询编译器的相对较早的阶段，有一个“forceOuterBinds”阶段，它（可能）引入了许多在语义上等效且冗余的额外 Bind（又名 flatMap）操作。这个想法是获取一些具有集合类型的*x*并将其转换为*Bind(s, x, Pure(s))*，其中*s*是一个新的符号。如果*x*已经是*Pure(y)*的形状，我们将其转换为*Bind(s, Pure(ProductNode()), Pure(y))*。在 Scala 代码中，将其视为将*x: List[T]*转换为*x.flatMap(s => List(s))*或将*List(y)*转换为*List(()).flatMap(s => List(y ))*. 这种转换的目的是通过给我们一个地方来修改我们可能想要做的所有地方的投影（它是作为恒等映射创建的），从而使后面的编译器阶段中的树重写更容易。

稍后，在“convertToComprehensions”中，monadic 形式的所有节点（Bind、Pure、Filter、Take、Drop 等）都被*单独*转换为 Comprehension 节点（表示 SQL*选择*语句）。结果仍然不是合法的 SQL：SQL 推导不是 monad 推导。它们具有非常有限的范围规则，不允许*from*子句引用由前一个*from*子句引入的变量（在相同的理解或封闭理解中）。

这就是为什么我们需要下一个阶段，“fuseComprehensions”，乍一看可能纯粹是一种优化，但实际上是生成正确代码所必需的。这个阶段试图尽可能地融合个人理解，以避免这些非法引用。我们已经在可以融合的方面取得了一些进展，但范围问题的 100% 解决方案还遥遥无期（事实上，我很确定这是不可能解决的）。

重申一下，这一阶段的进步主要是出于对*正确性*的需求，而不仅仅是生成更好的代码。那么我们可以删除那个额外的子查询吗？是的，当然，但还没有人实施它。

如果你想尝试实现这样的优化，这里有一些注意事项需要考虑：

*   您是否满足于删除纯粹的混叠投影（即*选择*槽的形式为 Some(ProductNode(ch)) 的理解，其中 ch 的每个元素都是路径）？
*   或者也许你认为*select x+1 from (... limit ...))*也应该被融合。你可以允许什么样的表达方式？例如，RowNum 可以吗？
*   子查询需要有什么样的形状？例如，它可能包含*groupBy*或*orderBy*子句吗？

（还有一些事情让我思考：与解释为什么它还不存在相比，实现该优化需要多长时间？）

# java - Daemonizing java application with JSVC

> ID：14425846
> 
> 赞同：5
> 
> 时间：2013-01-20T15:06:18.803
> 
> 标签：java, jsvc, apache-commons-daemon

I'm trying to daemonize my application using Apache Commons Daemon using the *Daemon* interface. Java application it self isn't doing anything just writes to stout.

I compiled jsvc: [http://people.apache.org/~mturk/daemon-1.0.10/](http://people.apache.org/~mturk/daemon-1.0.10/)

(even tried newest version: [http://people.apache.org/~mturk/daemon-1.0.12/](http://people.apache.org/~mturk/daemon-1.0.12/) )

and wrote this basic script.

```
do_exec()
{
    $EXEC \
        -home "$JAVA_HOME" \
        -cp $CLASS_PATH \
        -outfile $LOG_OUT \
        -errfile $LOG_ERR \
        -pidfile $PID \
        $1 \
        $MAIN_CLASS
    echo "result: $?"
}

case "$1" in
    start)
            do_exec
            ;;
    stop)
            do_exec "-stop"
            ;;
    restart)
            do_exec "-stop"
            do_exec
            ;;
    *)
            echo "usage: daemon {start|stop|restart}" >&2
            exit 3
            ;;
esac 
```

Now when I try to stop the daemon when it's not running I'll get response code 255\. Thas fantastic.

But when I try start the daemon when it's already running I get response code 0\. But in my errfile I find:

```
Still running according to PID file /tmp/deamon.pid, PID is 1799
Service exit with a return value of 122 
```

Same thing when I try throw exception in start() method and attempt to start daemon, response code 0\. But errfile:

```
 Service exit with a return value of 5 
```

What I'm missing here? How can I inform user stat the deamon didn't start or that it is already running?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:19:12.700

仔细阅读 JSVC 的工作原理后：[http ://commons.apache.org/daemon/jsvc.html](http://commons.apache.org/daemon/jsvc.html)

我发现我做错了什么，我必须使用*等待*参数

> 当使用 -wait 参数时，启动器进程会一直等待，直到控制器说“我准备好了”，否则在创建控制器进程后返回。

# java - need to parse DOM xml using JAVA ADT

> ID：14425850
> 
> 赞同：-4
> 
> 时间：2013-01-20T15:06:33.527
> 
> 标签：java, xml, dom

hello there i am trying to do a project for my university and i need to know how to write and read an xml file i tried to read other awnsers but i didnt get anything as iam beiginner in booth java and DOM .... the structure of needed xml is the following :

```
<?xml version="1.0"?>
<xml>
  <cours lang="F" code="info404">
    <Enseignant nom="A. Hellani"/>
    <classe nom="INFO M1 F"/>
    <seances>
      <seance>
        <jour>1</jour>
        <salle>33</salle>
        <temps>1</temps>
      </seance>
      <seance>
        <jour>1</jour>
        <salle>33</salle>
        <temps>1</temps>
      </seance>
    </seances>
  </cours>
  <cours lang="F" code="math 200">
    <Enseignant nom="N. Ajram"/>
    <classe nom="MATH L2 F"/>
    <seances>
      <seance><jour>2</jour>
      <salle>40</salle>
      <temps>6</temps>
    </seance>
    <seance><jour>6</jour>
      <salle>33</salle>
      <temps>2</temps>
      </seance>
    </seances>
  </cours>.
.
.
. 
</xml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:22:48.553

与其在这里复制一堆介绍性材料（或为您编写解决方案），我建议您阅读有关 Java 中的 XML 处理的教程。

一个好的起点是以下 Oracle 文档页面之一：

*   [Java API for XML Processing (JAXP)](http://docs.oracle.com/javase/tutorial/jaxp/index.html)，它是 Java 教程的一部分，或者
*   [XML Parsing for Java](http://docs.oracle.com/cd/B28359_01/appdev.111/b28394/adx_j_parser.htm)，它是 Oracle 数据库文档的一部分。

* * *

[我应该指出，您问题中的术语是错误的。DOM 代表文档对象模型，是 XML 文档的常用内存表示的名称……*在它被解析之后*。所以“解析 XML DOM”没有意义。此外，解析“使用 Java ADT”的东西没有多大意义。如果您指的是抽象数据类型意义上的 ADT，那么您可能会说“使用 Java”。]

# performance - Should I add linenumber information in AST for debugging?

> ID：14425853
> 
> 赞同：0
> 
> 时间：2013-01-20T15:07:02.203
> 
> 标签：performance, compiler-construction, abstract-syntax-tree

I'm working on a DSL compiler and want to provide more friendly information for user. So I remember that those mature compilers like GCC or GHC all can point out what semantics error happened in which lines, and they even can strip them from generated codes.

The first idea is to add linenumbers in my AST while parsing. But I'm not sure if this is a standard solution, or there're other better ways to do that ? I doubt it because this solution ask every nodes in the AST to bring extra data, and they may become burden.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:04:39.457

好吧，如您所知，词法分析器是谁知道行号，然后，对于未知标记和语法错误，您可以毫无问题地获得行号。但是，出于调试目的，您必须生成调试信息并将其存储在某个地方（例如，在 .Net 中，您有两个不同的文件：编译文件和调试信息文件。在 Java 中，调试信息位于同一个 .class 文件中在将指令与代码行号映射的特殊表中）。该信息由调试信息传递生成，该传递使用 AST 等。

然后，答案是**肯定**的，你的 AST 节点可以有一个 lineNumber 属性用于调试信息生成器/代码生成器。这在编译器和解释器中都很重要。

我已经这样做了，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:20:30.820

> 这些都可以指出哪些语义错误发生在哪些行

而是语法错误（好吧，有人可能会争论......）。关键是这不是调试信息。我宁愿去维护一个 lexer pass 可以用当前行号更新的解析上下文。如果您想要**调试信息，**那就不同了，为此您最终需要存储行号，并发出调试器输出（请注意，在调试时，例如，一个 C 程序，它是显示行信息的调试器，而不是编译器）。

# java - missing attribute

> ID：14425858
> 
> 赞同：0
> 
> 时间：2013-01-20T15:07:56.037
> 
> 标签：java, html, jsoup

ok so im using Jsoup to get the link for an image from this piece of code

```
<div id="section_1" class="story  inview" bgimage="AAA" style="width: 1366px; height: 853.75px; background-image: url(http://Fake.link.comm);" scrollto="0"> 
```

and the code that i'm using is this

```
Document doc = Jsoup.connect(web).get();
Element content = doc.getElementById("section_1");
Elements elements = doc.getElementsByClass(content.className());
for( Element e : elements ) {
          String attr = e.attr("style");
          System.out.println( attr.substring( attr.indexOf("http://"), attr.indexOf(")") ) );
        } 
```

however it gives me back an out of index error with -1 value after some looking into it i realized for some reason the code that the parser reads is this

```
<div id="section_1" class="story" bgimage="AAA"> 
```

and as such there is no "style" attribute.... can someone tell me why it is behaving like this? many thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:25:13.663

如果您会使用它`content`而不是`e`它会起作用。

```
 String attr = content.attr("style");
      System.out.println( attr.substring( attr.indexOf("http://"), attr.indexOf(")") ) ); 
```

你刚刚`div`在`e`.

# php - take array values of input boxes in controller using code igniter

> ID：14425860
> 
> 赞同：0
> 
> 时间：2013-01-20T15:07:58.370
> 
> 标签：php, javascript, jquery, forms, codeigniter

I have form in which five fields are displaying in one row.. two of them are select boxes and the remaining are simple input boxes .. I put this row in a for loop which is less than five so now my form has five rows each contain two dropdown and three textboxes .. I want to take their values into the controller.. how am i gonna do that ..? as I am new in code igniter so don't know how to I take their parameters in a controller as an array ... here is my code ..the code is not working..it is storing 0 for price and quantity and in a database

```
 <?php for ($i = 0; $i < 5; $i++) {?>
    <tr>
    <td><?php echo form_dropdown('cat_id[]', $records2, 
         '#',   "id='category_".$i."' onchange='getItems(this.value,".$i.")' ");?>
        </td>

         <!-- Items --> 
           <td>&nbsp; <?php echo form_dropdown('item_id[]',
       $records3, '#',  "id='items_".$i."'"); ?></td>
                        <!-- end of Items -->

  <td><input type="text" name = "price_<?php echo $i ?>"
              id = "price_"<?php echo $i ?>>

     <td><input type="text" name = "quantity_<?php echo $i ?>"
              id = "quantity_"<?php echo $i ?>>

     <td><input type="text" name = "total_<?php echo $i ?>"
              id = "total_"<?php echo $i ?>>
                    </td>
            </tr>
   <?php }?> 
```

I am doing this in Controller

```
 for ($i = 0; $i < 5; $i++) {

    $data3 = array(

            'item_id' => $this->input->post('item_id'),
                            'price' => $this->input->post('price_'.$i),
                'quantity' => $this->input->post('quantity_'$i),
            // etc

    ); 
    }
            $this->load->model('salesModel');
    $this->salesModel->addSoldItemtoDB($data3); 
```

# ios - UITableViewDataSource method return types NSInteger instead of NSUInteger

> ID：14425863
> 
> 赞同：0
> 
> 时间：2013-01-20T15:08:01.897
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, delegates

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index 
```

Why do these methods return an NSInteger instead of a NSUInteger? I actually doesn't make sense.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:38:17.107

我相信这是因为有时它会返回一个负数，例如 -1，以表示错误。但是，您可能永远不会看到这一点，因为该类可能会处理翻译。

我假设您知道 nsuinteger 是无符号整数，不能为负数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-02T07:35:28.947

因为以上三个方法的最小值都是0。意味着最后一个对象总是零。所以，这里取一个 NSInteger。在该方法中不可能低于值。

# windows-phone-7 - How to Play .PLS Files on Windows Phone

> ID：14425865
> 
> 赞同：1
> 
> 时间：2013-01-20T15:08:10.587
> 
> 标签：windows-phone-7, audio-streaming

I have a problem playing .pls live streaming channel on windows phone 7 media element. i read it on someother post that you need to get into bytes then play it but i am unable to do it as well can anyone help me and tell me how can i play .pls on windowsphone 7 for example i have to stream this:

**http://69.175.103.226:8540/listen.pls**

In my app then how will it do it

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:57:28.253

您无法播放 PLS 文件，因为它本身不是媒体项目，而只是包含媒体内容链接的流参考文件。您需要下载 PLS 文件，将其解析出来，然后读取通过它传递的内容。

你有几个选择。例如，使用[BackgroundAudioPlayer](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.backgroundaudio.backgroundaudioplayer%28v=vs.105%29.aspx)。或者您可能决定下载并处理流 - 您应该[这样做](http://dotnet.dzone.com/articles/getting-bytes-continuous)。

# ruby - 获取调用当前方法的方法

> ID：14425867
> 
> 赞同：2
> 
> 时间：2013-01-20T15:08:25.407
> 
> 标签：ruby

> **可能重复：**
> [如何获取调用方法的名称？](https://stackoverflow.com/questions/5100299/how-to-get-the-name-of-the-calling-method)

在下面的示例中，我如何知道调用 foo 的方法？

```
class Example
  def initialize
  end

  def foo
    puts "Hello World"  
  end

  def bar
    foo 
  end

  def cats
    bar      
  end
end 
```

Example.new.cats 打印 bar。我正在尝试获取整个调用堆栈。例如猫 -> 酒吧 -> foo

**更新：**

这有效： puts caller[0..1]

```
Hello World
(irb):11:in `bar'
(irb):15:in `cats' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T16:29:39.903

例如使用：`puts caller[0]`这将为您提供呼叫者的信息。

# android - What's the difference between windowBackground and background for activities style?

> ID：14425868
> 
> 赞同：29
> 
> 时间：2013-01-20T15:08:26.663
> 
> 标签：android, background, styles, android-activity, android-theme

I have a background set for all of the activities of the app by using the "android:background" parameter in the styles and setting the theme of the application to link to this style.

All worked well, till I've noticed that for a dialog with a list of items, it makes each item to have the full size of the background .

After changing the parameter being used to "android:windowBackground" it seems to work fine in this case too.

Why does it occur? What is the difference between the two?

Also , does setting "android:windowBackground" to @null as [written here](http://android-developers.blogspot.co.il/2009/03/window-backgrounds-ui-speed.html) provide the same speed boost as using "android:background"?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-26T15:13:39.377

`android:background`是视图组件的背景颜色（准确地说是可绘制的`android:windowBackground`），而是视图所在的窗口（活动或对话框）的背景颜色。

默认情况下，视图是透明的（即没有背景颜色），因此在视觉上看起来它们正在从底层窗口中获取颜色。

请注意您链接到的文章如何提到将 设置`windowBackground`为 null 而不是全屏视图的背景。这是避免过度绘制的常用技术。

但是如果您有一个视图完全隐藏另一个视图，则可以将相同的原则应用于视图。

示例：[gist.github.com/floatingmonkey/5474959](http://gist.github.com/floatingmonkey/5474959)

# multithreading - 多线程中的Delphi TList

> ID：14425871
> 
> 赞同：6
> 
> 时间：2013-01-20T15:08:50.337
> 
> 标签：multithreading, delphi, tlist

在所有其他线程访问但只有一个线程写入它的多线程应用程序中使用 TList 是否安全。情况是

每个线程都有一个唯一的 TList，只有该线程会写入，而其他线程只会访问它以从中获取数据。

安全吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T15:10:47.577

没有同步是不安全的。读取线程可以在写入线程修改列表的同时处于读取的中间。修改列表可能意味着重新分配底层内存。

RTL`TThreadList`为这种场景提供了类。每个线程，包括写线程和读线程，都需要成对包装对列表的所有`LockList`访问`UnlockList`。

```
var
  ThreadList: TThreadList;//declared in some shared location
....
//each thread accesses the list like this:
var
  List: TList;
....
List := ThreadList.LockList;
try
  .... do stuff with List
finally
  ThreadList.UnlockList;
end; 
```

如果您使用的是支持泛型的 Delphi，则有一个泛型版本，`TThreadList<T>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T10:41:59.493

正如其他人所说，`TList`它本身不是线程安全的。如果您担心使用的开销`TThreadList`（它在内部使用临界区），那么看看用一个，甚至是一个 Win32 [SRW 锁](http://msdn.microsoft.com/en-us/library/aa904937.aspx)`TList`来包装您现有的代码 。[`TMultiReadSingleWriteSynchronizer`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.TMultiReadExclusiveWriteSynchronizer)

# java - 转换 PEM 格式的私钥

> ID：14425875
> 
> 赞同：9
> 
> 时间：2013-01-20T15:09:03.687
> 
> 标签：java, ssl, openssl, ssl-certificate, x509certificate

我用 Java 代码创建了一个自签名证书并添加到 KeyStore。现在我想将创建的私钥和证书导出到 PEM 格式的文件中。是否有可能在没有任何第三方库的情况下实现这一目标？下面是我用于创建自签名证书的代码。

```
 public void createSelfSignedSSLCertificate() {
    try {            
        final CertAndKeyGen keypair = new CertAndKeyGen("RSA", "SHA1WithRSA", null);
        final X500Name x500Name =
            new X500Name(commonName, organizationalUnit, organization, city, state, country);
        keypair.generate(keysize);
        final PrivateKey privKey = keypair.getPrivateKey();
        final X509Certificate[] chain = new X509Certificate[1];
        chain[0] = keypair.getSelfCertificate(x500Name, new Date(), validity * 24 * 60 * 60);
        final String alias = JettySSLConfiguration.SSL_CERTIFICATE_ALIAS;
        keyStore.setKeyEntry(alias, privKey, keyStorePassword.toCharArray(), chain);
    } catch (final Exception e) {
       // Handle Exception
    }       
} 
```

任何关于如何将密钥和证书导出到 PEM 格式文件的建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T11:45:14.970

您使用[Certificate.getEncoded()](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/cert/Certificate.html#getEncoded%28%29)和[Key.getEncoded()](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/Key.html#getEncoded%28%29)来获取 DER 并手动执行 base 64 编码和页眉/页脚，例如使用[DatatypeConverter.printBase64Binary()](http://docs.oracle.com/javaee/5/api/javax/xml/bind/DatatypeConverter.html#printBase64Binary%28byte%5B%5D%29)或其他方式。就像是：

```
certpem = "-----BEGIN CERTIFICATE-----\n" +
          DatatypeConverter.printBase64Binary(chain[0].getEncoded())) +
          "\n-----END CERTIFICATE-----\n";
keypem  = "-----BEGIN RSA PRIVATE KEY-----\n" +
          DatatypeConverter.printBase64Binary(privKey.getEncoded())) +
          "\n-----END RSA PRIVATE KEY-----\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-12T06:00:24.033

感谢 Daniel Roethlisberger 的回复。我从你的回复中得到了很大的帮助。。

在Java中实现如下

```
String encodedString = "-----BEGIN PRIVATE KEY-----\n";
            encodedString = encodedString+Base64.getEncoder().encodeToString(Enrollment2.getKey().getEncoded())+"\n";
            encodedString = encodedString+"-----END PRIVATE KEY-----\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-04T09:03:57.327

在 Android 上，您可以使用以下 Kotlin 扩展功能：

```
import android.util.Base64
import java.security.PublicKey

fun PublicKey.toPemString(): String {
    val publicKeyBase64: String = Base64.encodeToString(this.encoded, Base64.NO_WRAP)
    return publicKeyBase64.chunked(64).joinToString(
        separator = "\n",
        prefix = "-----BEGIN PUBLIC KEY-----\n",
        postfix = "\n-----END PUBLIC KEY-----\n"
    )
} 
```

# iphone - 奇怪的UITabBarItem定位

> ID：14425877
> 
> 赞同：0
> 
> 时间：2013-01-20T15:09:14.487
> 
> 标签：iphone, xcode, uitabbarcontroller, tabbar

我正在尝试制作自定义标签栏。我使用了 setFinishedSelectedImage:finishedUnselectedImage: 方法，该方法删除了苹果对 uitabbaritems 的默认光泽效果。这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self customizeInterface];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UITabBarController *tabController = [[UITabBarController alloc] init];

    UIViewController *viewController1 = [[NewsViewController alloc] initWithNibName:@"NewsViewController" bundle:nil];
    UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTitle:nil
                                                       image:[UIImage imageNamed:nil] tag:1];
    [viewController1 setTabBarItem:tab1];
    UITabBarItem *item = [[UITabBarItem alloc] init];

    [tab1 setFinishedSelectedImage:[UIImage imageNamed:@"icon_news.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_news.png"]];
    _tabBarController.tabBarItem = item;

    UIViewController *viewController2 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UITabBarItem *tab2 = [[UITabBarItem alloc] initWithTitle:nil
                                                       image:[UIImage imageNamed:nil] tag:2];
    [viewController2 setTabBarItem:tab2];
    UITabBarItem *item1 = [[UITabBarItem alloc] init];

    [tab2 setFinishedSelectedImage:[UIImage imageNamed:@"icon_programme.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_programme.png"]];
    _tabBarController.tabBarItem = item1;

    UIViewController *viewController3 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    UITabBarItem *tab3 = [[UITabBarItem alloc] initWithTitle:nil
                                                       image:[UIImage imageNamed:nil] tag:3];
    [viewController3 setTabBarItem:tab3];
    UITabBarItem *item2 = [[UITabBarItem alloc] init];

    [tab3 setFinishedSelectedImage:[UIImage imageNamed:@"icon_map.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_map.png"]];
    _tabBarController.tabBarItem = item2;

    UIViewController *viewController4 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    UITabBarItem *tab4 = [[UITabBarItem alloc] initWithTitle:nil
                                                       image:[UIImage imageNamed:nil] tag:4];
    [tab4 setFinishedSelectedImage:[UIImage imageNamed:@"icon_venues.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_venues.png"]];
    [viewController4 setTabBarItem:tab4];
    UITabBarItem *item3 = [[UITabBarItem alloc] init];

    [item3 setFinishedSelectedImage:[UIImage imageNamed:@"icon_venues.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_venues.png"]];
    _tabBarController.tabBarItem = item3;

     UIViewController *viewController5 = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil];
    UITabBarItem *tab5 = [[UITabBarItem alloc] initWithTitle:nil
                                                       image:[UIImage imageNamed:nil] tag:5];
    [viewController5 setTabBarItem:tab5];
    UITabBarItem *item4 = [[UITabBarItem alloc] init];

    [tab5 setFinishedSelectedImage:[UIImage imageNamed:@"icon_more.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"icon_more.png"]];
    _tabBarController.tabBarItem = item4;

    tabController.viewControllers = [NSArray arrayWithObjects:viewController1,
                                     viewController2,
                                     viewController3,
                                     viewController4,
                                     viewController5, nil];

    self.window.rootViewController = tabController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)customizeInterface
{
    UIImage* tabBarBackground = [UIImage imageNamed:@"navbar_bodyreal.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];

    [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"navbar_object_current.png"]];

} 
```

问题是标签栏上方的图标端口。有任何想法吗？

谢谢

![标签栏](../Images/179dd3685e313f6375382bb0025dadf8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:56:15.613

您应该只设置相应 UIViewConroller 的 tabbaritem 属性。删除这些行。

```
_tabBarController.tabBarItem = itemx; 
```

除了标签栏项目的最佳分辨率应该是 30x30 像素。

[http://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)

# wordpress - wordpress htaccess 如何删除除 index.php 之外的所有 php 扩展

> ID：14425881
> 
> 赞同：4
> 
> 时间：2013-01-20T15:09:46.803
> 
> 标签：wordpress, apache, .htaccess, url-rewriting

我有一个 WordPress 博客，我想在其中添加一些自定义页面`.php`并从 url 中删除扩展名和查询字符串。

所有 WordPress 页面 url 都是这样的`index.php?pagename=`，所以如果我尝试`RewriteRule ^(.*)$ $1.php`在`.htaccess`文件中添加，其他页面返回`500 internal server error`. 如何从除`index.php`and之外的所有内容中删除 php 扩展名`login.php`？

这是我现有的`.htaccess`文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# RewriteRule ^(.*)$ $1.php  # add this line will broken the wordpress rewrite rule
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:29:08.007

例如，如果您想添加一些自定义 php 页面，您应该在标准 Wordpress 部分之前添加自己的重写，但在`RewriteBase /`.

在这里，我添加了一些能够处理存储在私有目录中的自定义页面的重写`custom`。

```
 # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # *** START CUSTOM PART ***
    RewriteRule ^page1$     /custom/page1.php    [L,QSA]
    RewriteRule ^page2$     /custom/page2.php    [L,QSA]
    # *** END CUSTOM PART ***

    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>
    # END WordPress 
```

如果您的网站在 上可用`http://www.example.com`，您的自定义页面将可以使用 访问 `http://www.example.com/page1`，`http://www.example.com/page2`依此类推...

关于重写标志只有几句话`[L,QSA]`：

*   `L`- 如果重写匹配，立即停止重写过程并且不再应用任何规则。
*   `QSA`- 将原始请求 URL 中的任何查询字符串附加到自定义页面。这意味着调用`http://www.example.com/page1?foo=bar&c=1`将在内部重写为`/custom/page1.php?foo=bar&c=1`

请注意：

1.  如果您的 wordpress 站点中已经有一个名为“page1”的页面，则该页面将被添加到重写规则中的自定义页面覆盖。
2.  这些 Apache httpd 指令是标准的，由 Wordpress 生成，配置`Permalink Settings`. 我刚刚添加了自定义部分。
3.  任何时候你改变`Permalink Settings`，你`.htaccess`都会被覆盖，如果你改变`.htaccess`使文件只读的权限会更好。而且，无论如何，请保存一份 .htaccess 配置的副本。

另一方面，如果您只希望您的 Wordpress 具有对 SEO 更友好的 URL，即没有`.php`页面且没有完整查询字符串但只有帖子/页面 slug 作为唯一标识符的 URL，您可以访问`Wordpress Permalink Settings`并选择`Post name`您喜欢的选项：

![WordPress 永久链接设置](../Images/f45393fa12a67e2b6e9c6221e9af1b3a.png)

当您激活时`Permalink Settings`，Apache httpd 的工作仅限于 .htaccess 部分。这意味着 Apache 通过 .htaccess 将所有内容（请求标头和正文）重定向到 index.php 页面，并且 Wordpress 在内部实现每次重写。如果您需要更多与 Wordpress 配置相关的建议，我建议您在[https://wordpress.stackexchange.com/中写下您的问题](https://wordpress.stackexchange.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:14:52.193

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

好吧，这不会将 .php 留在索引上，但至少可以在没有 500 个内部服务器错误的情况下工作。为什么需要保留 index.php ？Login.php 将具有旧格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T00:42:51.087

WordPress 内置了 URL 重写功能，无需手动修改 htaccess 文件。您可以在“设置”->“永久链接”下选择您希望 URL 在 WordPress 管理员中的显示方式。

WordPress 还提供了一个类[WP_Rewrite](http://codex.wordpress.org/Class_Reference/WP_Rewrite)，如果需要，您可以使用它来进一步调整 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T08:59:07.103

你的问题最明显的答案是在你的 RewriteRule 之前添加一个 RewriteCond

```
RewriteCond %{REQUEST_URI} !^/(index|login).php$ 
```

这将完全实现您想要的。除了 index.php 和 login.php 之外的任何请求都将根据您的规则将 .php 添加到其中，因此请求它们不会起作用。

目前，您的规则将 index.php 和 login.php 转换为 index.php.php 和 login.php.php。解决它的一种更合乎逻辑的方法可能是添加它：

```
RewriteCond %{REQUEST_URI} !.*php$ 
```

然后它只是将没有 .php 的任何东西变成与 .php 相同的东西

请注意，您的 RewriteRule 不会剥离查询字符串，即使您说您想要它。如果您将查询字符串更改为：

```
RewriteRule ^(.*)$ $1.php? 
```

如果不添加 ? 默认情况下，它将附加 query_string

# java - 向 vGroup 添加视图时出现问题

> ID：14425890
> 
> 赞同：2
> 
> 时间：2013-01-20T15:10:47.167
> 
> 标签：java, android

我想在我的 Android 项目中向 ViewGroup 添加一些视图，但我遇到了有线问题。

首先，我有一个 ListView 和一个 EditText，它们位于 Linearlayout 中。

我正在以这种方式创建这些：

```
LinearLayout linearLayout = new LinearLayout(getActivity());
linearLayout.setId(1001);

EditText eText = new EditText(getActivity());
eText.setHint("Suche");
eText.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
linearLayout.addView(eText); 
```

在函数中`onCreateView`，所以我只返回线性布局。

后来，在另一个函数中，我想添加 ListView：

```
modeList.setAdapter(adapter);
LinearLayout layout = (LinearLayout) vGroup.findViewById(1001);
layout.addView(modeList); 
```

但它只显示 EditText 框。如果我不添加 EditText，它会显示 ListView，但行为不好：

左：ListView，右：使用 EditText ![应用布局](../Images/3583dd9cc70600042ac9e25f8c8e8197.png)

所以我的问题是：首先，为什么 ListView 不是全宽的？其次，如果我添加 EditText，为什么没有 ListView？

列表项 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="10dp" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="top|left"
            android:text="TEST"
            android:textColor="#000000"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtPosition"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="bottom|left"
            android:text="drittens"
            android:textColor="#0000ff"
            android:textSize="12sp"
            android:textStyle="bold" />
    </LinearLayout>

    <TextView
        android:id="@+id/txtVideos"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="right|center_vertical"
        android:text="nochmal"
        android:textColor="#00ff00"
        android:textSize="18sp"
        android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:17:57.453

> 机器人：方向=“水平”

改成

> 机器人：方向=“垂直”

# javascript - 跨实例共享的 Javascript 变量

> ID：14425893
> 
> 赞同：0
> 
> 时间：2013-01-20T15:10:57.383
> 
> 标签：javascript, private-members

我正在调用一个递归函数，我想将从递归调用中收到的错误连接回调用者。以下是我使用的代码。但是，看起来 _errors 变量在我的实例之间共享。我怎样才能使这个 _errors 变量对实例唯一。

```
var check = require('./validator.js').check;

var QV = function() {
  this._errors = {};
}

QV.prototype.a  = function (str) { check(str).len(1,4).notNull().isInt() };
QV.prototype.b  = function (str) { check(str).len(1,4).notNull().isInt() };
QV.prototype.c  = function (str) { check(str).len(1,4).notNull().isInt() };
QV.prototype.validator = function (opt) {
    qv = new QV();
    for(var i in opt) {
        try {
          if (opt[i].toString() === '[object Object]')
          {
            var errors =  qv.validator(opt[i]);
            console.log(qv._errors); //Here the qv._errors is overwritten with the 'sub' errors. I lose the error 'a' here.
            qv._errors[i] = errors;
          }
          else
          {
            qv[i](opt[i]);
          }
        } catch (e) {
            qv._errors[i] = e;
        }
    }
    return qv._errors;
}

module.exports = QV; 
```

我使用此代码进行验证

```
var test = require('./test_validator.js');
var q = new test();

msg = q.validator({
    'a' : "asdf",
    'sub' : {
        'b' : "asdf",
        'c' : "bsdf"
    }
});
console.log(msg); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:23:05.770

答案已经在评论中了。我建议你以下

1) 使用 Javascript “严格”模式 - 它会使现代浏览器将此类错误转换为错误[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)

2) 对你的脚本使用 jshint - 它可以防止像这样的错误 [http://jshint.com/](http://jshint.com/)

# python - 在 django-tastypie 中获取经过身份验证的用户

> ID：14425894
> 
> 赞同：2
> 
> 时间：2013-01-20T15:11:04.850
> 
> 标签：python, django, authentication, tastypie

我只是从 Python 和 Django 开始，并使用 sweetpie 创建一个 RESTful API。

我需要根据经过身份验证的用户计算资源的字段，我计划在我的资源中覆盖 dehydrate_field 方法，但我不知道如何在 dehydrate_field 方法中获取经过身份验证的用户。

我正在使用tastepie的ApiKeyAuthentication，我目前正在URL的查询字符串中传递身份验证参数，但我也希望能够在身份验证标头中传递身份验证参数。

我想我应该能够自己从查询字符串或授权标头中获取用户名，并找到用户，但我觉得它已经在某处的美味派中实现了，但我找不到它文档。

这是一些示例代码：

```
class MyModelResource(ModelResource):

    calculated_field = fields.BooleanField(readonly=True)

    class Meta:
        queryset = MyModel.objects.all()
        resource_name = 'mymodel'
        authentication = ApiKeyAuthentication()     

    def dehydrate_calculated_field(self, bundle):
        user = <get authenticated user somehow>
        return <some boolean that's calculated depending on authenticated user> 
```

我想知道tastepie是否有一些内置功能来获取经过身份验证的用户，或者根据查询字符串参数或标题字段来滚动我自己的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:11:28.377

我找到了问题的答案，以获取我正在做的当前用户

```
user = bundle.request.user 
```

感谢[Aidan Ewen](https://stackoverflow.com/users/795896/aidan-ewen)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:46:14.647

我对 Tastypie 不是很熟悉，但我认为 Tastypie Resource 是基于[django 类的 view](https://docs.djangoproject.com/en/1.4/topics/class-based-views/)。在这种情况下，您应该能够让用户使用

`user = self.request.user`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T21:14:07.737

我对查询集使用[按请求更改](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)

```
class CurrentUserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'current-user'

    def get_object_list(self, request):
        users = super(CurrentUserResource, self).get_object_list(request)
        return users.filter(id=request.user.id) 
```

# spring - MongoDB 文档的最大值/最小值

> ID：14425900
> 
> 赞同：1
> 
> 时间：2013-01-20T15:11:36.687
> 
> 标签：spring, mongodb, spring-data, nosql

我正在使用 Spring Data 访问 MongoDB 数据库。如何使用 MongoTemplate 类在其中一个字段中检索最大具有最大值的文档。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:26:30.263

使用 sort 和 limit 的组合来模拟 min 和 max：

> db.test.insert({a: 1})
> db.test.insert({a: 2})
> db.test.insert({a: 3})
> db.test.find().sort({a: 1 }).limit(1)
> db.test.find().sort({a: -1}).limit(1)
> sort({a: 1}) 是对 a 字段的升序（最小优先）排序，然后只返回第一个文档，这将是该字段的最小值。
> sort({a: -1}) 是对 a 字段的降序（最大值优先）排序，然后只返回第一个文档，这将是该字段的最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T17:08:49.167

Rinku 的回答是正确的，但不是 Spring。您可以在 spring-data-mongodb 中执行此操作。如果排序字段被索引（或@Id 字段），Mongo 将优化排序/限制组合。否则它仍然很好，因为它将使用 top-k 算法并避免全局排序（[mongodb sort doc）](https://docs.mongodb.com/manual/reference/method/cursor.sort/)。这是来自[Mkyong 的示例](https://www.mkyong.com/mongodb/spring-data-mongodb-get-last-modified-records-date-sorting/)，但我先进行排序并将限制设置为一秒。

```
Query query = new Query();
query.with(new Sort(Sort.Direction.DESC, "idField"));
query.limit(1);
MyObject maxObject = mongoTemplate.findOne(query, MyObject.class); 
```

# c# - 在c#中替换字符串中的一个字符

> ID：14425909
> 
> 赞同：-5
> 
> 时间：2013-01-20T15:12:23.633
> 
> 标签：c#, .net, string, character

我用来`Readline()`从串口读取字符串。

但问题是字符串总是`"\r"`在末尾附加。

我试过了

```
text.Replace("\r",""); 
```

但它不起作用。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T15:18:14.843

`Replace`不能就地工作。您必须将结果分配给变量。

```
text = text.Replace("\r",""); 
```

或者干脆

```
text = text.Trim(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T15:13:15.700

您需要将结果分配给某个字符串以获取没有的字符串`\r`

改变

```
 text.Replace("\r",""); 
```

到

```
text = text.Replace("\r",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:13:05.470

翻倍逃脱`\`，

```
text.Replace("\\r",""); 
```

或使用`@`，逐字字符串

```
text.Replace(@"\r",""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:14:32.873

`@` [`verbtaim literal`](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)用like试试；

```
text.Replace(@"\r",""); 
```

或者您可以使用双斜杠 ( `\\`)

```
text.Replace("\\r",""); 
```

`\r`是**回车**字符文字。查看[`Character literals`](http://msdn.microsoft.com/en-us/library/aa691087%28v=vs.71%29.aspx)

并且要小心[`String.Replace()`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)方法，因为它有两个重载。

*   [`Replace(Char, Char)`](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)
*   [`Replace(String, String)`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T15:16:39.873

改用这个，因为回车取决于当地文化：

```
text.Replace(Environment.NewLine, ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T15:39:14.360

"...字符串总是在末尾附加 "\r""

然后删除最后一个字符：

```
string a = "hello\r";
string b = a.Substring(0, a.Length - 1); 
```

# php - 如何使用 PHP 从 javascript 生成的 HTML 页面中提取输入标记值？

> ID：14425910
> 
> 赞同：0
> 
> 时间：2013-01-20T15:12:25.933
> 
> 标签：php, javascript, html

我需要一些帮助。我有一个像这样的 javascript 生成的 html 页面：

```
<html>
  <head>
    <script language="javascript" type="text/javascript" src="http://www.123.com/ProgressiveTickers/include/js/ProgressiveTickersMandatory.js"></script>
  </head>
  <body>
    <div id="myid">
<div style='padding:7px;'><script src='http://www.456.com/modules/common/getProgBlock.php?progid=1&cbox=all&showlogo=yes&currency=USD'></script>
</div>
  </div>
  </body>
</html> 
```

这将生成我感兴趣的这段代码：

...

```
<input id="progressive1" class="progressiveInput" type="text" style="background-color:Transparent;border-width:0px;width:100px;text-align:center;" readonly="readonly" value="1841576" name="progressive1"> 
```

...

我想从这个输入标签中提取 value="1841576" （所以，'1841576'）。我知道，我需要解析 javascript 文件。我尝试了很多方法，但没有成功。

变得疯狂。

如何使用 PHP 从这个输入标签（生成的 javascript）中提取值？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:15:52.063

将您的输入标签放在表单元素中并提交表单。然后输入标签的值将在 POST 标头中。

# zend-framework2 - APC 缓存适配器 - 独特？

> ID：14425911
> 
> 赞同：1
> 
> 时间：2013-01-20T15:12:28.667
> 
> 标签：zend-framework2

也许我现在还没有完全理解文档，但是有没有办法设置一个唯一标识符，这样我的缓存翻译就不会被覆盖？

每个域都有相同的命名空间。

这是我的 module.config.php 中的内容

```
'translator' => array(
    'locale'                    => 'en',
    'translation_file_patterns' => array(
        array(
            'type'        => 'gettext',
            'base_dir'    => __DIR__ . '/../language',
            'pattern'     => '%s.mo',
            'text_domain' => 'ftp'
        )
    ),
    'cache' => \Zend\Cache\StorageFactory::factory(array(
        'adapter' => 'apc',
        'plugins' => array(
            'exception_handler' => array(
                'throw_exceptions' => false
            )
        )
    ))
) 
```

现在我在同一台机器上运行了两个 Apache VirtualHost，在每个 VirtualHost 中我都有一个名为 Ftp 的模块，每个模块都使用 ftp text_domain 来翻译它们自己的翻译。

假设我有一个名为 translate_this_text 的翻译键，用于两个域。

在 domain1.com 上它会读取，Test1 在 domain2.com 上它会读取，Test2

如果我访问 domain1.com 文本被翻译成 Test1 如果我访问 domain2.com 文本被翻译成 Test1，但这应该是 Test2

如果我清除 APC 缓存并访问 domain2.com，则翻译显示 Test2，但如果我访问 domain1.com，则显示 Test2。

我希望这不会太混乱。

所以最后，有没有办法在每个主机上设置某种类型的唯一标识符，这样它们就不会相互覆盖，因为它们现在存在于同一台机器上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:09:40.563

将`adapter`值替换为数组，以便您可以将选项注入 APC 适配器：

```
'translator' => array(
    'cache' => \Zend\Cache\StorageFactory::factory(array(
        'adapter' => array(
            'name'    => 'apc',
            'options' => array(
                'namespace' => 'foo_bar',
            ),
        ),
        'plugins' => array(
            'exception_handler' => array(
                'throw_exceptions' => false
            )
        )
    ))
) 
```

我会在你的全局文件中写上**没有** `namespace`键的配置，然后`config.local.php`你添加这个规则：

```
$cache_namespace = 'foo_bar';

'translator' => array(
    'cache' => \Zend\Cache\StorageFactory::factory(array(
        'adapter' => array(
            'options' => array(
                'namespace' => $cache_namespace,
            ),
        ),
    ))
) 
```

对于每个应用程序，您都可以简单地编辑本地配置文件并共享全局缓存选项。

# jquery - 使用 jquery ui 自动完成选择功能不起作用？

> ID：14425925
> 
> 赞同：0
> 
> 时间：2013-01-20T15:13:41.207
> 
> 标签：jquery, jquery-ui

除非我在自动完成选择功能中添加以下行，否则一切似乎都有效：

```
 select: function(event)
                   {
                       BK.searchIndex = $.inArray(ui.item.value, BK.arrayList);
                       alert(BK.searchIndex);
                   }); 
```

在 firebug 中，我看到以下错误消息：

```
 ReferenceError: ui is not defined
            BK.searchIndex = $.inArray(ui.item.value, BK.arrayList); 
```

如果我在选择中注释掉代码，一切正常。知道什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:14:38.647

应该是这样的：

```
select: function(event,ui){...} 
```

# node.js - 如何检查 node.js 和 sqlite3 是否更新成功？

> ID：14425928
> 
> 赞同：2
> 
> 时间：2013-01-20T15:14:23.560
> 
> 标签：node.js, rest, sqlite

在使用 node.js 和从 npm install sqlite3 (https://github.com/developmentseed/node-sqlite3/wiki/API) 安装的 sqlite3 包时，任何人都可以给我任何关于如何检查更新语句是否成功的建议

要执行更新，我正在执行以下操作：

```
 var id = req.params.id;
    var thing = req.body;
    stmt = db.prepare("UPDATE FOO set name=?, year=? where id=?");
    stmt.bind(thing.name, thing.year, id);
    stmt.run(function(err, result) {
        if (err) {
            res.send(JSON.stringify(err));
            res.send({'error':'An error has occurred'});
        } else {
            if (result) {
                console.log('Success: ' + JSON.stringify(result));
            }
            res.send(JSON.stringify(wine));
        }
    }); 
```

但是，从未定义结果。

如果我将 stmt.run() 更改为 stmt.all()，我会得到一个结果，但它似乎是空的 - 将它打印到控制台不会显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:14:39.273

`result`用于从`SELECT`查询返回的记录。

如果`UPDATE`命令失败，您将获得`err`.

要了解有多少记录已更新，请参阅`changes`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-08T15:10:30.340

我遇到了这个问题，它返回未定义。我通过改变我的方法来修复它

从：

```
db.run(query, [data.isActive, data.id], (err) => {
    if (err) {
        console.log(err);
        res.status(500).send({'Response':'Error updating user', err });
    } else {
        console.log(`Rows affected: ${this.changes}`)
        res.status(200).send({'Response': 'Success updating'});
    };
}); 
```

到：

```
db.run(query, [data.isActive, data.id], async function (err) {
    if (err) {
        console.log(err);
        res.status(500).send({'Response':'Error updating user', err });
    } else {
        console.log(`Rows affected: ${this.changes}`)
        res.status(200).send({'Response': 'Success updating'});
    };
}); 
```

请注意第一行，我将其从箭头函数更改为异步函数。

# cocoa - 可可opengl如何显示多个视口

> ID：14425930
> 
> 赞同：1
> 
> 时间：2013-01-20T15:14:27.227
> 
> 标签：cocoa, opengl

我使用的示例来自：[http ://dragonsandbytecode.wordpress.com/2012/06/07/game-dev-diary-5-about-textures-and-2d/](http://dragonsandbytecode.wordpress.com/2012/06/07/game-dev-diary-5-about-textures-and-2d/)

我想显示多个视口，最好我能够通过按 1、2、3、4 等打开和关闭它们。但首先，我如何显示多个视口？在以下函数中：

```
- (void)reshape {
NSRect rect = [self bounds];

glViewport(0, rect.size.height/2, rect.size.width/2, rect.size.height/2);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(50, rect.size.width/rect.size.height, .1, 30);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glEnable(GL_DEPTH_TEST);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable( GL_BLEND );
glEnable(GL_TEXTURE_2D); 
```

}

如果我写了一个以上的 glviewport，它会覆盖另一个。我在某处读到我必须先让opengl再次绘制到屏幕上，但我该怎么做呢？如果我听起来毫无头绪，我深表歉意，但我非常感谢任何可以在这里帮助我的人。在 GLUT 中，我总是使用子窗口，但是看到它会使用许多不同的上下文，我认为更好的方法是使用 glViewport() 代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-02T11:59:21.903

如果你再次调用 glviewport，你只是将相同的 OpenGL 上下文的视口设置为一个新的矩形，覆盖以前的设置，这显然不是你想要的。

如果您的各种基于 OpenGL 的视图位于屏幕的不同区域，并且它们之间存在非 OpenGL 内容，那么在 OpenGL 中，您需要为每个视图使用单独的 GL 上下文（您可以通过使用多个基于 NSOpenGLView 的视图）。或者，如果您的 GL 视图是相邻的，您会发现使用单个 OpenGL 上下文（就像您正在做的那样）要简单得多，但是在一个地方绘制所有内容。

至于在同一个窗口中具有 GLUT 的多个上下文，在我看来这是不可能的。相反，我强烈建议使用 Apple 提供的 OpenGL 集成（NSOpenGLView、NSOpenGLContext 等）。见这里：[https ://developer.apple.com/opengl/](https://developer.apple.com/opengl/)

# php - filemtime 结果比 filectime 低大约一年

> ID：14425935
> 
> 赞同：0
> 
> 时间：2013-01-20T15:14:56.447
> 
> 标签：php, date, filemtime

在用 PHP 构建文件浏览器类应用程序时，我遇到了一个相当奇怪的问题。出于这个应用程序的目的，`filemtime()`对我来说更有用，因为我需要最后一次修改文件内容的日期。不幸的是，`filemtime()`see 返回的日期大错特错，总是低于`filectime()`，大多数时候差了将近一年。

虽然我可以设想这可能的场景（如果文件最近被 chowned，但很久以前就被修改了）。但是，情况并非如此，因为所有文件都在一个半月前被复制到机器上。

代码很简单

```
$mtime = date ("F d Y H:i:s.", filemtime(BASE_DIR.$target)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:18:01.230

AFAIK，这很正常。复制文件时，操作系统有时会将创建时间设置为复制时间，同时保留文件原始的“最后修改”日期。

我不能说哪些操作系统和文件系统组合支持这一点，而且我一目了然也找不到任何来源，但这绝对是我在 Windows、OS Xes 和 *nixes 上看到的情况。

# macos - Apple SidebarDemo 的奇怪行为

> ID：14425936
> 
> 赞同：1
> 
> 时间：2013-01-20T15:14:57.413
> 
> 标签：macos, cocoa, nsoutlineview, reloaddata

我必须在我的 Mac 应用程序中添加一个源列表（à la iTunes）。为此，我尝试了（[Apple 的 SidebarDemo](http://developer.apple.com/library/mac/#samplecode/SidebarDemo/Introduction/Intro.html)）。它工作正常。我在这个演示中添加了一个按钮来演示该`reloadData`方法在`NSOutlineView`. 正如您在图像中看到的那样，存在问题（左侧，`reloadData`通话前，右侧，`reloadData`通话后）。徽章消失，图标改变等。

问题是什么？我应该避免使用`reloadData`on`NSOutlineView`吗？

我正在使用 OS X 10.8.2、SDK 10.8 和 Xcode 4.5.2。

[您可以在此处](http://www.olofweb.com/stackoverflow/SidebarDemo.zip)下载修改后的 SidebareDemo 项目。

谢谢！

![之前和之后...](../Images/9e6f67c31f2a726aa094b7a4e007dd6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:43:03.607

SidebarDemo 示例代码错误地使用同一个对象来表示大纲视图中的多行。特别是，数据源使用的基础数据是这样创建的：

```
_childrenDictionary = [NSMutableDictionary new];
[_childrenDictionary setObject:[NSArray arrayWithObjects:@"ContentView1", @"ContentView2", @"ContentView3", nil] forKey:@"Favorites"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:@"ContentView1", @"ContentView2", @"ContentView3", nil] forKey:@"Content Views"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:@"ContentView2", nil] forKey:@"Mailboxes"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:@"ContentView1", @"ContentView1", @"ContentView1", @"ContentView1", @"ContentView2", nil] forKey:@"A Fourth Group"]; 
```

相同值的 NSString 字面量由编译器唯一标识，因此每次出现的 都`@"ContentView1"`指向内存中的同一个对象。这样做的结果是，当内部代码`-outlineView:viewForTableColumn:item:`查找项目的父项以确定要使用哪个图标或未读状态时，`-[NSOutlineView parentForItem:]`将只返回所有项目的单个父`@"ContentView1"`项。它在最初的情况下完全有效的事实似乎是实施中的意外。`-outlineView:viewForTableColumn:item:`在初始加载和重新加载期间，调用的顺序略有不同。

解决方案是使用独特的对象来表示大纲视图中的每个项目。实现此目的对 SidebarDemo 示例最简单的修改是在将每个 NSString 值存储到之前创建一个可变副本`_childrenDictionary`：

```
_childrenDictionary = [NSMutableDictionary new];
[_childrenDictionary setObject:[NSArray arrayWithObjects:[@"ContentView1" mutableCopy], [@"ContentView2" mutableCopy], [@"ContentView3" mutableCopy], nil] forKey:@"Favorites"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:[@"ContentView1" mutableCopy], [@"ContentView2" mutableCopy], [@"ContentView3" mutableCopy], nil] forKey:@"Content Views"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:[@"ContentView2" mutableCopy], nil] forKey:@"Mailboxes"];
[_childrenDictionary setObject:[NSArray arrayWithObjects:[@"ContentView1" mutableCopy], [@"ContentView1" mutableCopy], [@"ContentView1" mutableCopy], [@"ContentView1" mutableCopy], [@"ContentView2" mutableCopy], nil] forKey:@"A Fourth Group"]; 
```

在实际代码中，您不太可能被此问题困扰，因为您的底层数据对象将由模型类的实例组成，而不是仅由字符串文字组成。

# php - 使用全局变量在 PHP 中查询 MySQL 数据库

> ID：14425940
> 
> 赞同：1
> 
> 时间：2013-01-20T15:15:32.503
> 
> 标签：php, mysql, select, global-variables

我无法在我的 php / mysql Select 查询中获取全局变量。

这是我目前拥有的代码，它不会从我的数据库中返回任何值。

```
<HTML>
<HEAD>
<SCRIPT type="text/javascript">
window.onload = function()
{
    document.getElementById('wall').innerHTML="<?php zoomLevelOne();?>";
}
</SCRIPT>
<?php
$startBrick = rand (1, 4);
function zoomLevelOne()
{
    global $startBrick;
    $brickNo = rand (1, 4);
    $con = mysql_connect("localhost","root","password");
    if(!$con){die('Could not connect: ' . mysql_error());}
    mysql_select_db("wall", $con);
    $result = mysql_query("SELECT * FROM bricks WHERE BrickNo=$startBrick");
    $brick = mysql_fetch_array($result);
    mysql_close($con);
    echo $brick['year'];
}
?>
</HEAD>
<BODY>
<DIV id='wall'>
</DIV>
</BODY>
</HTML> 
```

如果我将选择查询的结尾更改为：

```
WHERE BrickNo=$brickNo"); 
```

所以整个代码是这样的：

```
<HTML>
<HEAD>
<SCRIPT type="text/javascript">
window.onload = function()
{
    document.getElementById('wall').innerHTML="<?php zoomLevelOne();?>";
}
</SCRIPT>
<?php
$startBrick = rand (1, 4);
function zoomLevelOne()
{
    global $startBrick;
    $brickNo = rand (1, 4);
    $con = mysql_connect("localhost","root","password");
    if(!$con){die('Could not connect: ' . mysql_error());}
    mysql_select_db("wall", $con);
    $result = mysql_query("SELECT * FROM bricks WHERE BrickNo=$brickNo");
    $brick = mysql_fetch_array($result);
    mysql_close($con);
    echo $brick['year'];
}
?>
</HEAD>
<BODY>
<DIV id='wall'>
</DIV>
</BODY>
</HTML> 
```

这对我来说似乎是正确的，因为我所做的只是将局部变量更改为全局变量，但它不起作用，所以也许我做错了什么，或者只是我的编码不佳。

谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T15:18:11.877

我的答案看起来很简单。代码在声明变量之前调用函数。只需将脚本块移动到定义函数之后，就在标记之前。

```
<HTML>
<HEAD>
<?php
$startBrick = rand (1, 4);
function zoomLevelOne()
{
    global $startBrick;
    $brickNo = rand (1, 4);
    $con = mysql_connect("localhost","root","password");
    if(!$con){die('Could not connect: ' . mysql_error());}
    mysql_select_db("wall", $con);
    $result = mysql_query("SELECT * FROM bricks WHERE BrickNo=$startBrick");
    $brick = mysql_fetch_array($result);
    mysql_close($con);
    echo $brick['year'];
}
?>
<SCRIPT type="text/javascript">
window.onload = function()
{
    document.getElementById('wall').innerHTML="<?php zoomLevelOne();?>";
}
</SCRIPT>
</HEAD>
<BODY>
<DIV id='wall'>
</DIV>
</BODY>
</HTML> 
```

# client - 评估 Asterisk 和 pjsip 以支持 IMS

> ID：14425945
> 
> 赞同：0
> 
> 时间：2013-01-20T15:16:30.450
> 
> 标签：client, asterisk, pjsip

我想开发一个已经包含 VoIP 基础设施的开源项目，以便在其中添加 IMS 支持。特别是符合 3gpp rel 9 的 IMS 客户端支持。

为此，我正在考虑使用星号或 pjsip 代码。因为我的目标是在 C 和 Linux 中工作，所以这两个项目适合我的先决条件。它们也是非常稳定的产品，因此我希望开始研究它们中的任何一个，而无需修复可能会延迟我的目标的错误。

问题是选择哪个项目开始工作 - asterisk 还是 pjsip？

我正在努力做出选择，所以我只是希望从其他程序员那里得到任何有价值的建议。任何帮助都非常受欢迎。我也将继续发布我的发现和我的愿望清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:37:47.940

您要求比较不同类型的项目。

星号是 PBX。它是服务器端。

pjsip 是 sip 堆栈和客户端库。

您可以同时使用两者，但不能将 pbx 与客户端库进行比较。

# android - 从 webapp 发送短信，在手机短信应用程序中传出

> ID：14425947
> 
> 赞同：0
> 
> 时间：2013-01-20T15:16:35.480
> 
> 标签：android, web-applications

有许多 Android 网关可以完成它们的工作，将消息从 Android 手机同步到桌面。我正在使用 DeskSMS 和 MightyText，并且已经开始研究 AirDroid v2。

现在，我需要解决的问题是从我的 webapp 发送消息。我找不到从我的 web 应用程序中发送消息的解决方案，以便将自动生成的消息通过 Android 手机发送给我们的客户。这里最重要的是在本机短信应用程序中记录所有传出短信。

有一个[DeskSMS API](https://github.com/ClockworkMod/DeskSMS/wiki/DeskSMS-API)，我完全不知道如何开始使用它，或者它能否解决我的问题。最后，如果没有人可以向我推荐任何解决方案，那么解决方法如何？例如，将文本复制并粘贴到 DeskSMS webapp，然后单击按钮发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:15:39.607

对不起，我在这个方面有点晚了。

如果您的 web 应用程序可以发送电子邮件，您可以在自己的 Android 手机上安装 PopMyPhone 并将其用作 SMS 网关。

您可以让 PopMyPhone 在收到电子邮件后向联系人发送 SMS 消息。例如，如果您的手机中有一个名为 Fred 的联系人，其电话号码为 +447777777777，那么向 +447777777777@popmyphone.com 发送电子邮件实际上会向 Fred 发送包含电子邮件正文的 SMS。本机 SMS 应用程序将发送 SMS 消息，并且会有一个日志。如果您将电子邮件发送给多个 PopMyPhone 收件人，他们将分别收到一条短信

我希望这是有道理的，你可以在这里得到它[https://play.google.com/store/apps/details?id=com.messagesphere.ui](https://play.google.com/store/apps/details?id=com.messagesphere.ui)

# xml - xml属性之间的比较（xsd）

> ID：14425950
> 
> 赞同：0
> 
> 时间：2013-01-20T15:16:50.767
> 
> 标签：xml, xsd

我得到了这个 xml 代码：

```
<s:complexType name="number">
  <xs:sequence>
    <xs:element name="number" minOccurs="1" maxOccurs="1"/>
  </xs:sequence>
  <xs:attribute name="start" type:"xs:double"/>
  <xs:attribute name="end" type:"xs:double"/>
<xs:complexType> 
```

我想确保 end 属性的数字比 start 大。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:20:43.617

使用 XSD 1.1，您可以使用[断言](http://www.w3.org/TR/xmlschema11-1/#cAssertions)

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"> 

    <xs:complexType name="number">
        <xs:sequence>
            <xs:element name="number" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
        <xs:attribute name="start" type="xs:double"/>
        <xs:attribute name="end" type="xs:double"/>
        <xs:assert test="@end gt @start"/>
     </xs:complexType>

</xs:schema> 
```

# php - 使用 PHP 将 HTML 表解析为数据库格式

> ID：14425953
> 
> 赞同：1
> 
> 时间：2013-01-20T15:17:19.647
> 
> 标签：php, html, parsing, html-parsing

我总是不得不使用数据库的内容来显示一个表格，但从不倒退。一家公司刚刚发布了一个包含一些有用信息的 HTML 表格，但是他们没有提供数据库文件，只是提供了表格。

这是一张普通的桌子。只是为了澄清，比如：

```
<table>
<tbody>
<tr>
<td>ELEMENT 1</td>
<td>ELEMENT2</td>
<td>ELEMENT 3</td>
<td>ELEMENT 4</td>
</tr>
</tbody>
</table> 
```

我想做的是创建一个具有该日期的数据库，元素 1 是“id”，其余的是与该 id 相关的信息。我不知道如何创建一个 bucle 来从该表中获取所有元素，并将它们插入到数据库中。

我要问的是是否有办法解析这些信息，所以我可以做我想做的事。我不是要求代码将其插入数据库左右，只是我应该如何解析这些信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:54:09.233

你需要这样做：

```
 <?php
  //Load the DOM Document
  $doc = new DOMDocument();
  $doc->loadHTMLFile("filename.html");

  //Find td elements
  $xpath = new DOMXPath($doc);
  $query = '//your/path/to/table/tbody/tr/td';
  $entries = $xpath->query($query);

  $id = $entries->item(0);
  $item1 = $entries->item(1);
  $item2 = $entries->item(2);
  $item3 = $entries->item(3);

  //You query here...
 ?> 
```

参考资料： [DOM](http://php.net/manual/en/book.dom.php)

# android - sharedpreferences 保存但在 if 语句上崩溃

> ID：14425960
> 
> 赞同：1
> 
> 时间：2013-01-20T15:18:17.267
> 
> 标签：android, crash, sharedpreferences

因此，对于我正在开发的应用程序，我想使用 sharedpreferences 来保存数据，在这种情况下，我想保存用户选择的语言。这是由 A 号完成的，它会保存它，但是当我尝试在我的菜单页面上使用这个值时，它总是崩溃

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);
    Button button1 = (Button) findViewById(R.id.button1);
    Button button2 = (Button) findViewById(R.id.button2);
    Button button3 = (Button) findViewById(R.id.button3);
    Button button4 = (Button) findViewById(R.id.button4);
    Button button5 = (Button) findViewById(R.id.button5);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    int taal=sp.getInt("taal", 4);
    if(taal==1){
        String tekst="Nieuw Spel";
        button1.setText(tekst);
        //button1.setText("Nieuw Spel");
        //button2.setText("Statestieken");
        //button3.setText("Opties");
        //Languege.MenuText(button1, button2, button3, taal);
        button1.setText(taal);
        button4.setVisibility(Button.GONE);
        button5.setVisibility(Button.GONE);
    } 
```

这又回到了错误的屁股上，我真的找不到我做错了什么

```
01-20 16:11:05.535: E/AndroidRuntime(4308): FATAL EXCEPTION: main
01-20 16:11:05.535: E/AndroidRuntime(4308): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.stevedc.thinklogic/com.stevedc.thinklogic.MainMenu}: android.content.res.Resources$NotFoundException: String resource ID #0x1
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.os.Looper.loop(Looper.java:137)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at java.lang.reflect.Method.invokeNative(Native Method)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at java.lang.reflect.Method.invoke(Method.java:511)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at dalvik.system.NativeStart.main(Native Method)
01-20 16:11:05.535: E/AndroidRuntime(4308): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x1
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.content.res.Resources.getText(Resources.java:247)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.widget.TextView.setText(TextView.java:3495)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at com.stevedc.thinklogic.MainMenu.onCreate(MainMenu.java:33)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.Activity.performCreate(Activity.java:4465)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-20 16:11:05.535: E/AndroidRuntime(4308):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:26:47.627

改变

```
button1.setText(taal); 
```

所以它是

```
button1.setText(String.valueOf(taal)); 
```

通过传递一个整数 ( `taal`)，Android 会尝试查找资源 id 并失败。

# macos - Git 忽略 .idea 文件夹，但这不在 gitignore

> ID：14425962
> 
> 赞同：6
> 
> 时间：2013-01-20T15:18:33.327
> 
> 标签：macos, git, intellij-idea, gitignore

## 问题：

我在 OSX 上。我有一个非常小的 .gitignore 文件，我什至尝试完全删除该文件。没有什么帮助。Git 在我的 intellij 的 .idea 目录下看不到任何内容。

至少我想存储 .idea/runConfigurations/*。更糟糕的是，根据[这篇文章](http://devnet.jetbrains.net/docs/DOC-1186)，该目录中除 1 或 2 之外的**所有**文件都应受源代码控制。

在我不知道的地方是否有额外的隐藏 .gitignore 设置？如果是这样，有什么方法可以搜索并杀死它？

## 到目前为止采取的步骤：

我手动添加了最重要的：

```
git add .idea/runConfigurations -f 
```

在没有 -f 的情况下尝试给出：

```
The following paths are ignored by one of your .gitignore files:
.idea
Use -f if you really want to add them. 
```

重申一下：即使我完全删除了 .gitignore 文件，它也会出现该错误

## 类似但未解决的线程：

在搜索完之后，我设法找到[了另一个](https://stackoverflow.com/questions/9436405/git-is-ignoring-files-that-arent-in-gitignore)有同样问题的线程。不幸的是，即使原始发帖人回答问题仍未解决，它仍被标记为已回答。无论如何，我的问题版本仍未解决

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T15:24:59.410

你有`~/.gitignore`档案吗？[以下](https://help.github.com/articles/ignoring-files)是可能有用的信息。

Git 有一个非常灵活的忽略文件层次结构：首先它读取`.gitignore`你的主目录中的文件。将所有存储库的通用数据放在这里（`*.bak`例如，您绝对不需要在任何存储库中使用它们）。然后，您可以`.gitignore`在仓库中的任何文件夹中拥有文件。它会影响此文件夹及其子目录中的任何文件。此外，您可以在`.git/info/exclude`. 它的不同之处`.gitignore`在于它没有被索引，您可以将个人设置放在这里。当然`~/.gitignore`也没有索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T22:03:50.230

我有同样的问题。在我的 .git/exclude/info 文件中，我排除了创建的可执行文件的名称。但我经常为这些可执行文件所在的目录使用相同的名称，例如“sphere”目录包含可执行文件“sphere”。由于我在排除 info/exclude 中的可执行文件名称之前添加了所有文件，因此即使在将目录/可执行文件名称排除到 info/exclude 之后，也不会出现致命错误。

但是，最近，我尝试从名称已被排除的目录中添加一个文件（因为它与我排除的可执行文件的名称匹配）。致命的错误开始了，我很困惑。我强制添加，现在任何后续添加都会忽略致命错误。

这表明在本地 .gitignore 文件中而不是在 info/exclude 中排除可执行文件名称是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T18:40:16.657

如果使用该`-f`标志没有任何区别（即文件仍然没有被暂存），请仔细检查您尝试添加的内容是否**已经**在存储库中。

在我的情况下，我试图添加一些已经添加然后在不同分支上删除的东西，这导致我错误地认为它一开始就没有被添加。Git 非常合理地拒绝添加两次相同的东西。

# php - 将每个链接的函数返回的数组添加到一个数组中

> ID：14425963
> 
> 赞同：0
> 
> 时间：2013-01-20T15:18:39.597
> 
> 标签：php

嘿伙计们，我有以下代码

```
$link_repository=array();

foreach ($links as $value) {
   $link_repository=$crawler->fetchLinks($value);
   print_r($link_repository);
   echo 'Count:'.count($link_repository);
   echo '<br><br>';
  } 
```

对于每个链接，**fetchLinks**函数返回一个元素数组。我想将每个链接的函数返回的数组添加到一个数组中。我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:22:41.517

如果我不得不猜测：

```
$link_repository = array();

foreach ($links as $value) {
   $temp = $crawler->fetchLinks($value); //Add to array
   $link_repository = array_merge((array)$link_repository, (array)$temp);
   print_r($link_repository);
   echo 'Count:'.count($link_repository);
   echo '<br><br>';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:22:44.570

试试这个：

```
$link_repository[] = $crawler->fetchLinks($value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:24:11.777

```
$link_repository=array();

foreach ($links as $value) {
    array_push($link_repository,$crawler->fetchLinks($value));
    //$link_repository[]=$crawler->fetchLinks($value);
    //$link_repository=$crawler->fetchLinks($value); I wouldn't use this
    print_r($link_repository);
    echo 'Count:'.count($link_repository).'<br><br>';
}
return $link_repository; 
```

我提供了两种将数据输入数组的方法。我不确定哪个是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:38:17.087

我认为这里的其他答案误解了你的问题。

`fetchLinks()`返回一个数组作为其结果。如果您只是将此结果添加到现有`$link_repository`变量中，那么该变量将最终成为一个多维数组 - 即一个数组数组。例如，如果第一次调用`fetchLinks()`返回`array(1,2)`，第二次调用返回`array(3,4)`，这会给你一个`$link_repository`看起来像 的变量`array(array(1,2), array(3,4)`。

我认为您实际上要求的是一种方法，以便将所有调用的结果`fetchLinks()`组合成一个一维数组。在上面的示例中，您希望 的最终结果`$link_repository`是`array(1,2,3,4)`。

如果这是正确的，那么你想要做的是将数组与[`array_merge`](http://www.php.net/manual/en/function.array-merge.php)：

```
$link_repository=array();
foreach ($links as $value) {
   $link_repository= array_merge($link_repository, $crawler->fetchLinks($value));
} 
```

我不确定性能权衡，但您可能希望推迟`array_merge`到最后。如果将每个`fetchLinks`数组作为其自己的元素添加到 中`$link_repository`，则可以`array_merge`通过使用将数组中的每个元素一次传递给它们来一次合并它们[`user_call_func_array()`](http://www.php.net/manual/en/function.call-user-func-array.php)。

值得注意的是，您可能希望使用数组联合运算符 ,`+`来合并数组，具体取决于`fetchLinks`返回的数据类型。有关该运算符如何工作的讨论，请参见此处[，](http://www.php.net/manual/en/language.operators.array.php)[有关](https://stackoverflow.com/questions/2140090/operator-for-array-in-php)它与`array_merge`.

# c++ - 在 netbeans 7.2 mac os x 上激活 C++ 11

> ID：14425970
> 
> 赞同：1
> 
> 时间：2013-01-20T15:19:12.080
> 
> 标签：c++, c++11, netbeans-7

[我已按照在 mac os x ( http://netbeans.org/community/releases/71/cpp-setup-instructions.html](http://netbeans.org/community/releases/71/cpp-setup-instructions.html) )上为 netbeans 7.2 安装 C++ 的说明进行操作。但我似乎无法使用任何新功能，例如`nullptr`. 有谁知道如何在我的 mac 上为 netbeans 激活 C++11？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:21:07.537

如果您将 GCC 与 Netbeans 一起使用，则必须附加`-std=c++11`编译标志。

根据我所做的谷歌搜索，可以通过`Project Properties -> Build -> C++ Compiler -> Additional Options.`

# truncate - 截断十进制数

> ID：14425973
> 
> 赞同：0
> 
> 时间：2013-01-20T15:19:40.733
> 
> 标签：truncate

在java中，如果我们有一个数字，它是双倍的，比如0.619879223757707784592145。

当您打印该号码时，它将显示为 6.19879223757707e-4。

我在问我是否可以将此数字打印为 0.000619。

在 C# 中，我们可以使用下面的代码

```
Console.WriteLine("Number{3:0.000000}",num);//output: 0.000619 
```

在Java中，我们可以这样写

```
System.out.printf("%.6f\n",num);//output:0.000619 
```

但我的问题是如何截断该值并将其存储在数据库或java中的文件中？

上述解决方案仅回答如何在命令提示符下打印该值（0.000619）。但我想同时截断该值并将其存储在文件或数据库中。

# php - 在 WordPress 插件功能下加载 .php 文件

> ID：14425974
> 
> 赞同：2
> 
> 时间：2013-01-20T15:19:46.767
> 
> 标签：php, wordpress

我有一个 WordPress 插件脚本

```
<?php
/*
Plugin Name: Saswat Routroy
Plugin URI: http://www.maheshchari.com/
Description: Description of my plugin
Author URI: http://www.maheshchari.com/
*/
class new_menu {

    function new_menu()
    {
        add_action('admin_menu', array(&$this, 'my_admin_menu'));
    }

    function my_admin_menu()
    {   //create a main admin panel
        //create a sub admin panel link above
        add_menu_page('CMS', 'CMS', 'administrator', 8, array(&$this,'overview'));
        add_submenu_page(8, 'View CMS Page', 'View CMS Page', 'administrator', 1, array(&$this,'view_page'));
        add_submenu_page(8, 'Add CMS Page', 'Add CMS Page', 'administrator', 2, array(&$this,'add_page'));
        //These functions adds sub menu for different kinds of admin panel on back end
        add_options_page('Pages Options', 'Saswat  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_options'));
        add_posts_page('Pages posts', 'Saswat  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_posts'));
        add_media_page('Pages media', 'Saswat  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_media'));
        add_pages_page('Pages pages', 'Saswat  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_pages'));
        add_users_page('Pages users', 'Saswat  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_users'));
        add_management_page('maheshchari', 'Mahesh  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_tools'));
        add_theme_page('maheshchari', 'Mahesh  Plugin', 'administrator', basename(__file__),array(&$this, 'my_plugin_themes'));

    }

    function overview()
    {
        echo '<h2>My Wordpress Plugin Overview</h2>';
    }

    function view_page()
    {
        echo '<h2>My Wordpress Plugin Settings</h2>';
    }

    function add_page()
    {
        //echo '<h2>My Wordpress Plugin Generel</h2>';
        echo "<form method='POST' action=''>
    <ul>
        <li><label for='fname'>Family Name (Sir Name)<span> *</span>: </label>
        <input id='fname' maxlength='45' size='10' name='fname' value='' /></li>    

        <li><label for='lname'>Last Name<span> *</span>: </label>
        <input id='lname' maxlength='45' size='10' name='lname' value='' /></li>
        <li><label for='lname'>Last Name<span> *</span>: </label>
        <input type='submit' maxlength='45' size='10' name='lname' value='' /></li>
    </ul>
</form>";
    }
    function my_plugin_options()
    {
        echo '<h2>My Wordpress Plugin Options</h2>';

    }
    function my_plugin_posts()
    {
        echo '<h2>My Wordpress Plugin posts</h2>';
    }
    function my_plugin_media()
    {
        echo '<h2>My Wordpress Plugin media</h2>';
    }
    function my_plugin_pages()
    {
        echo '<h2>My Wordpress Plugin pages</h2>';
    }
    function my_plugin_users()
    {
        echo '<h2>My Wordpress Plugin users</h2>';
    }

    function my_plugin_tools()
    {
        echo '<h2>My Wordpress Plugin tools</h2>';
    }

    function my_plugin_themes()
    {
        echo '<h2>My Wordpress Plugin themes</h2>';
    }

}

$mybackuper = &new new_menu();//instance of the plugin class

?> 
```

该文件保存在 \wp-content\plugins\admin-menu\new_menu.php 下

现在在函数 add_page() 中，我正在回显 html。我不想这样做，有没有办法可以在函数下加载 .php 页面而不回显脚本。

说类似

```
<?php get_template_part( 'content-home' );?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:20:21.810

我不确定是否理解你。这是一种在没有回显的情况下存储输出的方法：

```
public $contents_add_page = '';

function add_page()
{
    ob_start();

    //echo '<h2>My Wordpress Plugin Generel</h2>';
    echo "<form method='POST' action=''>
<ul>
<li><label for='fname'>Family Name (Sir Name)<span> *</span>: </label>
<input id='fname' maxlength='45' size='10' name='fname' value='' /></li>    
<li><label for='lname'>Last Name<span> *</span>: </label>
<input id='lname' maxlength='45' size='10' name='lname' value='' /></li>
<li><label for='lname'>Last Name<span> *</span>: </label>
<input type='submit' maxlength='45' size='10' name='lname' value='' /></li>
</ul>
</form>";

    $this->contents_add_page = ob_get_contents();
    ob_end_clean();
} 
```

您也可以包含一个文件并将其输出存储在一个 var 中：

```
ob_start();
include DIR . '/content-home.php';
$contents            = ob_get_contents();
ob_end_clean(); 
```

事实上，我在 WP 中使用这些技术通过 AJAX 输出 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:53:04.263

我得到了答案

```
include('content-home.php'); 
```

# deployment - 在一个文件中使用 Capistrano 部署到不同的应用程序

> ID：14425980
> 
> 赞同：1
> 
> 时间：2013-01-20T15:20:37.727
> 
> 标签：deployment, capistrano, ruby-on-rails-2

我有一个使用 capistrano 部署的 Rails 应用程序“master”。它是从存储库的主分支部署的。
然后创建了一个新的应用程序“演示”。它的代码存储在同一存储库的演示分支中。我需要为该应用程序编写部署。
它应该做：
`cap master deploy`部署主应用程序
`cap demo deploy`部署演示应用程序

目前，当我将 master 部署到命名空间中时，它给了我一个错误

```
roles cannot be defined in a namespace (NotImplementedError) 
```

我需要角色来重新启动应用程序

```
desc "Restart Application"
  task :restart, :roles => :app do
    run "[ -f #{unicorn_pid} ] && kill -USR2 `cat #{unicorn_pid}` || #{unicorn_start_cmd}"
  end 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:16:59.357

要点是名称空间和模块不能在这里使用。但你总是可以

```
task  :demo do
# code here
end 
```

使用**任务**不会导致错误

# javascript - ember.js 页面的标题作为控制器/视图

> ID：14425983
> 
> 赞同：1
> 
> 时间：2013-01-20T15:20:58.953
> 
> 标签：javascript, ember.js

新路由器有点问题。我想要一个单独的控制器视图的标题。老实说，我不确定如何实现它。

我试图在索引控制器/模板中定义页脚和标题，并在 IndexRoute 中重定向到“画廊”路由，但随后索引模板被省略。

使用以前的路由器，我创建了索引模板： {{outlet "hedaer"}} {{outlet "body" }} {{outlet "footer"}}

但是现在，我不确定如何将它们全部连接起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:23:26.940

我会像这样定义应用程序模板：

```
{{render header}}
{{outlet}}
{{render footer}} 
```

渲染助手将查找 HeaderView 类和 headerController 的实例并连接它们。与页脚相同。

# .net - 布尔值是 .NET 中的两个字节？

> ID：14425984
> 
> 赞同：17
> 
> 时间：2013-01-20T15:21:05.963
> 
> 标签：.net, vb.net, memory-management, boolean

这个问题源于[这里](https://stackoverflow.com/q/14425449/897326)。我在 VS 中尝试了这个语句，看看会发生什么：

```
Len(Name <= 3) 
```

根据[这个答案](https://stackoverflow.com/questions/204256/why-does-boolean-consume-more-memory-than-char)和[这个](https://stackoverflow.com/questions/294905/why-in-net-system-boolean-takes-4-byte)答案，布尔值应该消耗 4 个字节。根据 MSDN，[VB 中的 Len 函数](http://msdn.microsoft.com/en-us/library/dxsw58z6%28v=vs.90%29.aspx)

> 返回一个整数，其中包含字符串中的字符数或存储变量所需的标称字节数。

`Name <= 3`应该将 3 转换为 String 并执行字符串比较，返回一个布尔值，所以`Len`应该计算其中的字节数，应该是 4。出于某种原因，上面的代码返回 2，不管第二个参数。换句话说，`Len(True)`也返回 2。尝试了不同的平台目标（32 和 64）——同样的事情。

**为什么`Len(Boolean)`返回 2 而不是 4？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T15:44:56.193

> 使用用户定义的类型和对象变量，Len 函数返回将由 FilePut 函数写入文件的大小。如果一个对象包含一个字符串，它将返回字符串的长度。如果 Object 包含任何其他类型，它将返回对象的大小，因为它将由 FilePut 函数写入文件。

Len() 是一个遗留函数，它只能在从上一代 Visual Basic 项目移植的代码中使用。它通常出现在涉及 VB 值的二进制序列化的代码中。在那些旧版本中，基本类型的大小不同。 `Integer`例如，是 16 位，解释了您在网络中发现的大量使用 Long 的错误 pinvoke 声明。并且`Boolean`是一个 VARIANT_BOOL，一个 16 位的值。此外，通过将其`True`值转换为 -1 而不是 1，这很古怪。

显然，采用 .NET 大小对于 VB6 程序编写的文件中存在的大量数据来说是一个重大的改变。或通过 TCP 连接发送的二进制数据。等等。因此，Len() 函数返回旧尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:40:40.763

根据 MSDN 的[数据类型摘要 (VS2012)](http://msdn.microsoft.com/en-us/library/47zceaw7%28v=vs.110%29.aspx)，布尔值的大小取决于实现平台。但是，如果您查看[VS2003 的同一页面，](http://msdn.microsoft.com/en-us/library/47zceaw7%28v=vs.71%29.aspx)它确实说布尔值是 2 个字节。

ECMA-335 第 III.1.1.1 节规定：

> 评估堆栈仅保存 4 或 8 字节整数，但其他位置（参数、局部变量、静态、数组元素、字段）可以保存 1 或 2 字节整数。出于堆栈操作的目的，bool (§III.1.1.2) 和 char 类型分别被视为无符号的 1 字节和 2 字节整数。从这些位置加载到堆栈中会将它们转换为 4 字节值

第 III.1.1.2 节指出：

> CLI 布尔类型在内存中占用 1 个字节。全为零的位模式表示值为假。设置了任何一个或多个位的位模式（类似于非零整数）表示值为真。出于堆栈操作的目的，布尔值被视为无符号的 1 字节整数

* * *

因此，鉴于此，我对您为什么得到 2 而不是 1 感到更加困惑

# sml - 是否可以在 sml 中获取泛型变量的字符串表示形式

> ID：14425989
> 
> 赞同：1
> 
> 时间：2013-01-20T15:21:50.343
> 
> 标签：sml

我写了一个泛型函数，现在我想要泛型变量的字符串表示。有没有简单的方法来获得它们？

例如：

```
fun arg:(string*'a) = (#1 arg) ^ toString((#2 arg) 
```

这就是我想要做的基本。

`("hello", true")`因此，如果用我想要“hellotrue”调用该方法。如果有更复杂的结构，我希望尽可能打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:38:55.650

最简洁的答案是不。

与 Haskell 不同，SML 没有类型类，也无法派生新类型的展示等。

“唯一”的方法是为您创建的每种类型创建一个特定的 show 或 toString 函数。我说“只有”，因为 MLton 有一篇关于[类型索引值的非常好的文章](http://mlton.org/TypeIndexedValues)

# c# - MVC 4 bool（剃刀）的自定义模板

> ID：14425994
> 
> 赞同：16
> 
> 时间：2013-01-20T15:22:28.163
> 
> 标签：c#, .net, asp.net-mvc, razor

我正在使用 twitter 引导框架，因此为了让 EditorFor 和 DisplayFor 方法输出我需要的内容，我为字符串、文本、密码等每种类型创建了自定义模板。对于我的登录页面，我想要一个 RememberMe bool，所以和以前一样，我创建了以下模板并放入 Boolean.cshtml：

```
@model bool

<div class="control-group">
    <div class="controls">
        <label class="checkbox">
            @Html.CheckBoxFor(m => m, new {@class = "checkbox"})
            @Html.LabelFor(m => m)
        </label>
    </div>
</div> 
```

很简单，但是当我使用时：

```
@Html.EditorFor(m => m.RememberMe) 
```

我收到一个异常，说基于的值不能为空：

```
The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.Boolean'. 
```

我错过了什么？似乎它应该是直截了当的。模型对象上的字段如下所示：

```
[Display(Name = "Remember me?")]
public bool RememberMe { get; set; } 
```

谢谢。

**更新：**所以看起来最终是创建一个空的视图模型对象并将其传递给视图，而不是让 MVC 自己创建一个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-06T19:08:37.027

我不会那样做。如果该值可以为空，我会确保您的编辑器模板具有可空的布尔值作为模型类型。因此，您的编辑器模板（在 Views\Shared\EditorTemplates\Boolean.cshtml 中）将是：

```
@model Boolean?

@Html.CheckBox("", Model.HasValue && Model.Value) 
```

然后在你的主视图中，你可以有：

```
<div class="control-group">
    <div class="controls">
        <label class="checkbox">
            @Html.EditorFor(m => m, new {@class = "checkbox"})
            @Html.LabelFor(m => m)
        </label>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:10:45.120

阅读到目前为止的回复，我开始想知道模型对象是如何被初始化的。所以这很奇怪，但我找到了答案。希望有人可以解释其中的怪异之处。如果您不指定模型对象，可能是 MVC 初始化模型对象的方式。

登录操作的默认 MVC Internet 模板具有以下内容：

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
    ViewBag.ReturnUrl = returnUrl;

    return View();
} 
```

这给出了错误。但是，将其更改为以下内容可以解决问题：

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
    var loginModel = new LoginModel();

    ViewBag.ReturnUrl = returnUrl;

    return View(loginModel);
} 
```

所以这回答了如何解决问题的问题，但仍然没有解决原因。可能是因为 MVC 以不同的方式创建对象的实例，比如使用反射或其他方式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T16:07:17.750

您可以更改模型，使其接受空值作为“是”/“否”

```
public bool? RememberMe { get; set; } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T16:42:33.067

您必须初始化您的`RememberMe` `bool value`内部构造函数，如下所示。

> 请记住，不允许在 C# 中使用未初始化的变量。

```
using System.ComponentModel; 

public class ClassName
 {    
   public ClassName ()
        {
            RememberMe = false;
        }

   [DefaultValue(false)]
   [Display(Name = "Remember me?")]
   public bool RememberMe { get; set; }
 } 
```

有关更多信息，请查看[**默认值表**](http://msdn.microsoft.com/en-us/library/83fhsxwc.aspx)

我希望这对你有帮助。