# StackOverflow 问答 14736000-14736999

# python - 将纬度和经度写入 Geotiff 文件

> ID：14736001
> 
> 赞同：1
> 
> 时间：2013-02-06T18:16:40.543
> 
> 标签：python, geolocation, tiff, gdal

我基本上是想达到[这个问题](https://stackoverflow.com/questions/2922532/obtain-latitude-and-longitude-from-a-geotiff-file)的反面。

我在 WGS84 坐标系中有一组纬度和经度坐标（带有值），我想通过 gdal python 绑定将其写入 geotiff（或只是添加到 gdal 数据集）。

例如，我的起始数据可能是：

```
lat = np.array([45.345,56.267,23.425])
lon = np.array([134.689,128.774,111.956])
value = np.array([3.0,6.2,2.5]) 
```

怎么可能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:59:55.757

虽然这不是您的问题，但您似乎需要将 WGS84 基准的纬度/经度数据投影到 UTM 投影。这可以使用 GDAL 中的[ogr2ogr](http://www.gdal.org/ogr2ogr.html)命令行，使用两个选项`-a_srs 4326 -t_srs ????`（目标 SRID）。也可以使用 GDAL 的 OGR 模块在 Python 内部完成。[这是一个使用示例](https://gis.stackexchange.com/a/19416/1872)。

从点数据中获取栅格有两种*独立的方法。*第一种是对数据中的值进行[插值](http://en.wikipedia.org/wiki/Multivariate_interpolation)，以便这些值淹没该区域（或有时仅是凸包）。有许多方法和工具可以在 2D 中插值。使用 GDAL，命令行工具[gdal_grid](http://www.gdal.org/gdal_grid.html)可用于此目的，尽管我认为无法从 Python 中使用。可能最简单的方法是使用[scipy.interpolate](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html#multivariate-data-interpolation-griddata)。一旦你有了一个 2D NumPy 数组，用 GDAL/Python[创建一个光栅文件就很简单了。](http://www.gdal.org/gdal_tutorial.html)

将点转换为栅格的第二种方法是将点位置刻录为栅格上的像素。与第一种方法不同，只有点所在的位置才有值，而值不会在栅格中的其他任何地方插值。可以通过 GDAL 命令行工具[gdal_rasterize](http://www.gdal.org/gdal_rasterize.html)将矢量栅格化或刻录到栅格中。它也可以在内部使用 GDAL/Python 完成，[这里是一个示例](https://gis.stackexchange.com/questions/31568/gdal-rasterizelayer-doesnt-burn-all-polygons-to-raster)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T17:16:07.520

可以使用 Python 中的 gdal_grid。我正在使用它。您需要做的就是像在命令行中使用它一样构建命令并将其放入 subprocess.call(com, shell=True) 中。您需要先导入子流程模块。

这实际上是我使用它的方式：

```
pcall= "gdal_grid  --config 'NUM_THREADS=ALL_CPUS GDAL_CACHEMAX=2000'\
       -overwrite -a invdist:power=2.0:smoothing=2.0:radius1=360.0:radius2=360.0\
       -ot UInt16 -of GTiff -outsize %d %d -l %s -zfield 'Z' %s %s "%(npx, npy,\
       lname,ptshapefile,interprasterfile)

subprocess.call(pcall, shell= True) 
```

NUM_THREADS 选项可从 gdal 1.10+

# c++ - std::set::erase(const key_type& key) 如何导致段错误？

> ID：14736002
> 
> 赞同：2
> 
> 时间：2013-02-06T18:16:44.510
> 
> 标签：c++, pointers, stl, segmentation-fault, set

我正在跟踪一个错误，我遇到了非常奇怪的行为。我有一组指针，当我一个接一个地擦除它们时，第一个会擦除，但是擦除另一个会导致我出现段错误。我用

```
 size_type erase( const key_type& key ); 
```

所以它不可能是迭代器。我的调试器在调用堆栈中向我展示了这一点：

```
0 - std::less<cSubscriber *>::operator() //cSubscriber is an abstract base class and I have a set of cSubscriber *

1 - std::_Rb_tree<cSubscriber*, cSubscriber*, std::_Identity<cSubscriber*>, std::less<cSubscriber*>, std::allocator<cSubscriber*> >::equal_range

2 -  std::_Rb_tree<cSubscriber*, cSubscriber*, std::_Identity<cSubscriber*>, std::less<cSubscriber*>, std::allocator<cSubscriber*> >::erase

3 - std::set<cSubscriber*, std::less<cSubscriber*>, std::allocator<cSubscriber*> >::erase

4 - cEventSystem::unsubscribe //my function, it is as follows in the class which has the set as its member

cEventSystem::unsubscribe(cSubscriber * ptr)
{
   set.erase(ptr);
} 
```

在基础 cSubscriber 抽象类中有虚拟析构函数：

```
 virtual ~cSubscriber()
  {
      eventSystem.unsubscribe(this);
  } 
```

有任何想法吗？我不知道它如何导致段错误，当没有这样的元素时，擦除应该只返回 0。或者当试图从空容器中删除某些东西时它可能会崩溃？（当添加 3 个不同的指针后集合的大小仅为 2 时，我有另一个错误，但这是另一回事）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:19:28.553

如果您将无效地址传递给您`std::set<SOMETHING*>::erase()`，则在尝试将传递的值与容器中的值进行比较时，它将出现段错误。

例如：

```
struct IntPtrComparer {
    bool operator()(int* a, int* b) const {
        return *a < *b;
    }
};

std::set<int*,IntPtrComparer> a;
a.insert(new int);
a.erase(NULL); 
```

# 更新

^(根据评论)

由于您没有重新定义默认比较器，并且默认比较器不会取消引用您的指针，因此唯一的方法是您`std::set`的已损坏。

在内部，`std::set`实现为二叉树。这意味着它有很多指针可以找到一个值并删除它。如果`std::set`损坏，其中一些指针将指向无效的内存地址。这个无效的内存地址将用于将比较值的**引用**（指针的引用）传递给。接收对指针的引用，并将取消引用该引用以获取指针值。`cSubscriber* & const``std::less``std::less`

这样，内部的无效内存`std::set`只显示在`std::less`，因为`std::set`实际上并没有触及无效内存，它把无效内存地址给了我们可怜的家伙`std::less`打开它并在它的脸上遇到了*段*错误。

我的观点是，如果您创建一个使用副本而不是引用的比较器，那么`std::set`当它尝试复制指针值以提供给比较器时，损坏将出现在内部。

# java - Sencha GXT Grid 过滤器很慢。我能让他们快点吗？

> ID：14736012
> 
> 赞同：1
> 
> 时间：2013-02-06T18:17:30.393
> 
> 标签：java, gwt, extjs, gxt

我正在使用带有过滤器的 GXT Grid（确切地说是 StoreFilterField）。问题在于，当过滤器更改（用户键入或清除它）时，Grid 需要很长时间才能刷新。

我有一个相对较小的 1000 行 7 列网格。滚动效果很好，所以我相信浏览器能够快速处理它。

看起来问题在于，当调用一种类型的过滤器文本方法 Grid.refresh() 时，它会一次又一次地呈现所有行，并将它们作为一个巨大的 HTML 字符串插入。

有没有办法让它更有效率？例如，我认为在包含未过滤行集的现有 html 中隐藏元素会更快。

另一种方法是以某种方式缓存或延迟网格中组件的创建，但我在 GXT Grid API 中找不到任何行缓存功能。也许我忽略了它。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T21:03:31.300

缓存功能不在`Grid`API 本身中，而是在`GridView`. 网格有一个可以设置的视图属性。

你用的是什么版本的 GXT？在 GXT 2.x 中，有一个名为`BufferView`.

从文档：

> 在滚动到视图中时呈现行。此 GridView 一次显示多行速度很快，但它不支持普通 {link @GridView} 支持的所有功能，例如扩展行。

如果您使用的是 GXT 3.x，则可能必须`LiveGridView`改用，因为它们已删除`BufferView`.

由此，您可以指定缓存大小、滚动延迟等。

我希望这有帮助！

*   保罗

# asp.net - 如何增加 SessionTimeOut

> ID：14736013
> 
> 赞同：0
> 
> 时间：2013-02-06T18:17:31.390
> 
> 标签：asp.net

我通过将这一行写入 web.config 来做到这一点

`<sessionState timeout="540"/>`

但我客户的会话在 20-40 分钟内到期

有没有其他方法可以增加 SessionTimeout 8-9 小时？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:30:06.860

您的 IIS 应用程序池很可能正在回收。默认情况下，它会在空闲一段时间后关闭工作进程。

您可以使用[SQL Server 支持的会话状态](http://msdn.microsoft.com/en-us/library/ms178586.aspx)，或者您可以增加工作进程空闲超时限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:27:35.507

也许您可以在 global.asax.cs 文件中扔一些东西来重置过期时间。我会把它放在 Application_PreRequestHandlerExecute 方法/事件中。

```
 var cookie = Request.Cookies["ASP.NET_SessionId"];
  cookie.Expires = DateTime.Now.AddHours(8);
  Response.Cookies.Set(cookie); 
```

# bash - 在hadoop中批量重命名

> ID：14736017
> 
> 赞同：6
> 
> 时间：2013-02-06T18:17:46.170
> 
> 标签：bash, hadoop, file-rename

如何重命名 hdfs 目录中的所有文件以具有`.lzo`扩展名？`.lzo.index`文件不应重命名。

例如，此目录列表：

> ```
> file0.lzo file0.lzo.index file0.lzo_copy_1 
> ```

可以改名为：

> ```
> file0.lzo file0.lzo.index file0.lzo_copy_1.lzo 
> ```

这些文件是 lzo 压缩的，我需要它们具有`.lzo`hadoop 识别的扩展名。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T18:32:52.637

如果您不想为此编写 Java 代码 - 我认为使用命令行 HDFS API 是您最好的选择：

[`mv`在 Hadoop](http://hadoop.apache.org/docs/r0.20.0/hdfs_shell.html#mv)

`hadoop fs -mv URI [URI …] <dest>`

您可以使用一个小的衬垫获得路径：

```
% hadoop fs -ls /user/foo/bar | awk  '!/^d/ {print $8}'

/user/foo/bar/blacklist
/user/foo/bar/books-eng
... 
```

`awk`将从输出中删除目录..现在您可以将这些文件放入变量中：

```
% files=$(hadoop fs -ls /user/foo/bar | awk  '!/^d/ {print $8}') 
```

并重命名每个文件..

```
% for f in $files; do hadoop fs -mv $f $f.lzo; done 
```

您还可以使用`awk`其他条件过滤文件。这应该删除与正则表达式匹配的文件`nolzo`。然而，它未经测试。但是这样你就可以编写灵活的过滤器。

```
% files=$(hadoop fs -ls /user/foo/bar | awk  '!/^d|nolzo/ {print $8}' ) 
```

`hadoop`测试它是否可以将命令替换为`echo`：

```
$ for f in $files; do echo $f $f.lzo; done 
```

编辑：更新示例以使用`awk`而不是`sed`更可靠的输出。

“正确”的方法可能是使用[HDFS Java API](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html) .. 但是对于大多数工作来说，使用 shell 可能更快、更灵活。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-16T20:23:34.230

当我不得不重命名许多文件时，我正在寻找一个有效的解决方案并偶然发现了这个问题和[thi-duong-nguyen](/users/715283/thi-duong-nguyen)的评论，即重命名许多文件非常慢。我为批量重命名操作实现了一个 Java 解决方案，我强烈推荐它，因为它的速度要快*几个数量级*。基本思想是使用`org.apache.hadoop.fs.FileSystem`'s`rename()`方法：

```
Configuration conf = new Configuration();
conf.set("fs.defaultFS", "hdfs://master:8020");
FileSystem dfs = FileSystem.get(conf);
dfs.rename(from, to); 
```

where`from`和`to`是`org.apache.hadoop.fs.Path`对象。最简单的方法是创建要重命名的文件列表（包括它们的新名称）并将此列表提供给 Java 程序。

我[已经发布](https://github.com/rjoberon/hadoop-tools#batchrename)了完整的实现，它从`STDIN`. 它在不到 4 秒的时间内重命名了 100 个文件（重命名 7000 个文件需要相同的时间！），而`hdfs dfs -mv`前面描述的基于方法需要 4*分钟*来重命名 100 个文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-04T13:00:34.067

我们创建了一个实用程序来对 HDFS 中的文件进行批量重命名：[https](https://github.com/tenaris/hdfs-rename) ://github.com/tenaris/hdfs-rename 。该工具是有限的，但如果您愿意，您可以使用递归、awk 正则表达式等语法来改进它。

# asp.net-mvc - 使用共享的 BLL 和 DAL 发布多个网站

> ID：14736018
> 
> 赞同：0
> 
> 时间：2013-02-06T18:17:46.280
> 
> 标签：asp.net-mvc, deployment, azure, tfs

我有以下项目的解决方案：

解决方案 - Website1 项目（Asp.Net MVC，azure website project with code first migration） - BLL 项目（类库） - DAL 项目（类库） - Website2 项目（Asp.Net MVC，azure webrole 项目） - Website2.Azure 项目（Website2 的云项目）

website1 和 website2 都使用 BLL 和 DAL 项目进行业务逻辑和数据访问。当我更改 DAL 模型 i DAL 类库并在 Website1 项目中运行代码第一次迁移时，开发数据库中的数据库结构发生了变化。

当我将 website1 项目发布到 Azure 网站时，生产数据库结构会自动更新，并且 Website1 在生产中工作正常，但是 website2 的生产代码停止工作，因为 website2 的生产代码使用旧的 BLL 和 DAL 来更新数据库结构体..

所以我的问题是：我如何以最好的方式管理它？

1.  我可以以一种智能的方式同时将 2 个网站/MVC 项目部署到 Azure 吗？使用持续部署、TFSPreview 之类的......？（其中一个发布到 azure 网站，另一个发布到 azure webrole）
2.  有没有办法告诉website2数据库结构是否发生变化都没有关系，无论如何都要继续（当然，如果在尝试使用它时缺少属性会出现错误，但其余的可以继续工作直到更新/发布网站2)..
3.  还有什么想法...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:23:25.040

嗨，我的回答将属于“任何其他想法”类别。

如果您的 BAL 依赖于 DAL，那么某些类型的更改将影响 BAL。例如，假设您有一个架构，其中有表 A、B 和 C。您 DAL 将所有这些表公开为业务实体，而 BAL 公开操作以操作它们。

现在，如果您删除表 C 并重新生成 DAL，BAL 将中断，因为它将不再能够在 DAL 中找到 C。

但是，如果您添加一个新实体 E 并重新生成 DAL，BAL 应该不会受到影响，因为它没有使用 E 进行任何操作。

您可以做的一件事是尽量减少这种强耦合，即引入数据传输对象模式。使用 DTO 模式，您将 DAL 实体/实体打包到一个完全独立的类中，并使用该类与外部域进行通信。

现在，如果 DAL 发生更改，则取决于 DAL 如何将这些更改传播到调用代码的其余部分（在本例中为 BAL）。如果 DAL 删除了 C，它仍然可以保留代表 C 的 DTO，并在上层代码要求时采取特定的操作（例如在要求 C 的列表时传递 null ..）

通常 DTO 模式用于 UI 和 BAL 之间的通信，但也可以用于从 DAL 到 BAL 的通信。

这样做的一个缺点是您将为代码添加另一层复杂性。因此，您应该在此之前考虑并消除任何其他潜在的解决方案。

此解决方案并非特定于 Azure，而是一个非常通用的解决方案，您可以将其与任何 n 层解决方案一起使用

快乐编码

# ruby - Jekyll 与 .erb 的兼容性

> ID：14736019
> 
> 赞同：6
> 
> 时间：2013-02-06T18:17:50.337
> 
> 标签：ruby, yaml, erb, jekyll, liquid

据我了解，Jekyll 兼容 Liquid 和 YAML。但是，是否有插件或可用功能允许它与 .erb（嵌入式 Ruby）文件兼容？

否则，这是一个不必要的功能还是其他无用的功能？Jekyll 对 Liquid 和 YAML 的内置使用是否取代了 .erb 会或可以做的事情？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:18:27.647

使用`.erb`jekyll 是不合理的，但是您应该使用[jekyll-rendering](https://github.com/blackwinter/jekyll-rendering) gem。

# wpf - VisualBrush 中的 TextBox.Background 属性行为怪异

> ID：14736021
> 
> 赞同：3
> 
> 时间：2013-02-06T18:17:56.243
> 
> 标签：wpf, xaml

离开[这个](https://stackoverflow.com/questions/14714249/textblock-background-property-removing-stretch)问题，我有一个文本框定义如下：

```
<TextBox>
    <TextBox.Background>
        <VisualBrush Stretch="Uniform">
            <VisualBrush.Visual>
                <StackPanel>
                    <TextBlock Background="Blue" Opacity="0.5" Text="155"/>
                </StackPanel>
            </VisualBrush.Visual>
        </VisualBrush>
    </TextBox.Background>
</TextBox> 
```

这导致`TextBox`这样的：

![带背景的文本框](../Images/7d65591305adc26fa22168bca9dc85cb.png)

现在，如果我删除背景属性，`TextBox`看起来像这样：

![没有背景的文本框](../Images/ee01880ae7ffd11a5e9893350b139580.png)

我想要的是用彩色背景实现第二张图像。例如，在第一张图片中，我希望背景颜色也能填充剩余的空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:48:07.893

`Grid`您可以通过添加背景来实现这一点，`VisualBrush`并且在该网格中您可以添加`TextBox`：

```
<Grid>
    <Grid.Style>
        <Style TargetType="Grid">
            <Setter Property="Background">
                <Setter.Value>
                    <VisualBrush Stretch="Fill">
                        <VisualBrush.Visual>
                            <Rectangle Stretch="Fill" Stroke="Blue" Opacity="0.5" />
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Style>
    <TextBox>
        <TextBox.Style>               
            <Style TargetType="TextBox">
                <Setter Property="Foreground" Value="Black" />                    
                <Setter Property="Background">
                    <Setter.Value>
                        <VisualBrush Stretch="Uniform">
                            <VisualBrush.Visual>
                                <TextBlock Foreground="Gray" Opacity="0.5" Text="155"/>
                            </VisualBrush.Visual>
                        </VisualBrush>
                    </Setter.Value>
                </Setter>
            </Style>
        </TextBox.Style>
    </TextBox>
</Grid> 
```

# javascript - 什么时候 event.target.value 不是字符串？

> ID：14736026
> 
> 赞同：11
> 
> 时间：2013-02-06T18:18:03.840
> 
> 标签：javascript, dom, event-handling

`value = String(event.target.value || "")`当触发 textinputs keyup/keydown 事件时，我遇到了。

但我不确定什么时候`event.target.value`不是字符串？这可能吗？什么时候有其他东西作为`event.target.value`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T18:22:52.997

如果`event.target`元素不是输入类型元素，则它将没有`value`属性。例如，如果我单击 a`div`那么`event.target`是一个没有`value`.

不需要换行`event.target.value || ''`，`String()`因为它始终是 value（始终是 string 或`undefined`）或在 value 为 的情况下为空字符串`undefined`。

请参阅[this fiddle](http://jsfiddle.net/5hBCF/)进行演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:22:23.097

它可能有助于分解该声明中发生的事情。关键部分是`event.target.value || ""`在 String() 之前先评估。

意思是，它正在检查是否`event.target.value`为空或未定义。如果它为空或未定义，它将使用空白字符串`""`作为默认值。然后将该语句的结果传递给 String()。

# backbone.js - 从服务器中获取集合，当模型从服务器中删除时不触发更改

> ID：14736030
> 
> 赞同：0
> 
> 时间：2013-02-06T18:18:12.170
> 
> 标签：backbone.js, collections

我正在从服务器获取一个集合，假设我最初从 30 个模型开始，并且在数据库中，其中一个模型的一些属性发生了更改，当我获取集合时，检测到更改并呈现更改。好的工作就好了。但是，当模型在数据库中被删除并且有 30 个现在有 29 个的集合时，不会对丢失的模型进行破坏。模型不再存在，但视图仍然被渲染，并且它不对应于任何模型，因为模型不再是集合的一部分。在这方面需要帮助。并且视图被绑定到“改变”和“破坏”。我已经尝试了各种各样的东西，代码有很多变化，但似乎没有任何效果。

谢谢

`var commentCollection = new CommentList;`

 ````
commentCollection.fetch({ data: $.param({ user_id:id}), success: function(){
                  Profile_view = new Profile({collection: commentCollection});
                 $("div.Profile_container").html(this.Profile_view.el);        
     } });

            function fetch_collection(commentCollection, id){
              //commentCollection.reset();
           commentCollection.fetch({update: true, data: $.param({ user_id:id})});
            console.log(commentCollection)
            }
         setInterval(function(){fetch_collection(commentCollection, id)},10000); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:59:24.747

我知道了！！！！！
我所要做的就是将 remove 事件绑定到从 DOM 中删除实际视图的视图函数

`this.model.bind("remove", this.close, this)``

# android - 每当我打开 Android Emulator 时，MacbookPro 都会重新启动

> ID：14736031
> 
> 赞同：2
> 
> 时间：2013-02-06T18:18:16.257
> 
> 标签：android, emulation, virtualization, osx-mountain-lion

我刚刚从 Intel 安装了 HAXM，每当我现在尝试打开带有 Intel Atom x86 CPU 的模拟器时，计算机都会重新启动。

我在 OSX Mountain Lion 上运行笔记本电脑

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:45:32.670

您可能需要下载此处的修补程序，[http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager)

更多信息可以在这里找到：[http ://code.google.com/p/android/issues/detail?id=37826](http://code.google.com/p/android/issues/detail?id=37826)

# r - R中的对数对数概率图

> ID：14736038
> 
> 赞同：3
> 
> 时间：2013-02-06T18:18:47.020
> 
> 标签：r, power-law, ecdf

我确信这很容易，但我一直在努力寻找如何在 R 中做到这一点。

我有一些数据试图拟合幂律分布。为此，您需要在对数累积概率图上绘制数据。y 轴是数据频率的 LOG（或对数概率，如果您愿意），x 轴是值的对数。如果是一条直线，那么它符合幂律分布，梯度决定幂律参数。

如果我想要数据的频率，我可以使用 ecdf() 函数：

我的数据集称为Profits.negative，它只是一长串小于零的交易利润（我名义上将它们全部转换为正数以避免以后出现记录问题）。

所以我可以输入

```
plot(ecdf(Profits.negative)) 
```

我得到了一个方便的经验 CDF 函数。我需要做的就是将两个轴都转换为对数刻度。我可以做x轴：

```
Profits.negative.logs <- log(Profits.negative)
plot(ecdf(Profits.negative.logs)) 
```

差不多好了！我只需要弄清楚如何记录 y 轴！但我似乎做不到，我不知道如何从 ecdf 对象中提取数字。任何人都可以帮忙吗？

我知道有一个 power.law.fit 函数，但这只是估计参数 - 我想绘制数据并查看它是否对齐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:29:17.167

[您可以使用powerRlaw](https://github.com/csgillespie/poweRlaw)包拟合和绘制幂律。这是一个例子。首先，我们从重尾分布中生成一些数据：

```
set.seed(1)
x = round(rlnorm(100, 3, 2)+1) 
```

接下来我们加载包并创建一个数据对象和一个显示对象：

```
library(poweRlaw)
m = displ$new(x) 
```

我们可以估计`xmin`和缩放参数：

```
est = estimate_xmin(m)) 
```

并设置参数

```
m$setXmin(est[[2]])
m$setPars(est[[3]]) 
```

然后绘制数据并添加拟合线：

```
plot(m)
lines(m, col=2) 
```

要得到：

![在此处输入图像描述](../Images/3db081f92206245108eb1be5744dd528.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:42:13.520

首先生成数据（*实际上是你分开；*））：

```
set.seed(1)
Profits.negative <- runif(1e3, 50, 100) + rnorm(1e2, 5, 5) 
```

记录和`ecdf`：

```
Profits.negative.logs <- log(Profits.negative)
fn <- ecdf(Profits.negative.logs) 
```

`ecdf`返回函数，如果你想从中*提取*一些东西 - 查看函数的闭包是个好主意：

```
ls(environment(fn))
# [1] "f"      "method" "n"      "nobs"   "x"      "y"      "yleft"  "yright" 
```

好吧，现在我们可以访问`x`and `y`：

```
x <- environment(fn)$x
y <- environment(fn)$y 
```

可能这就是你需要的。确实，`plot(fn)`并`plot(x,y,type="l")`显示几乎相同的结果。要记录 y 轴，您只需要：

```
plot(x,log(y),type="l") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-14T01:43:25.407

这是一种使用方法`ggplot2`：

```
library(ggplot2)

# data
  set.seed(1)
  x = round(rlnorm(100, 3, 2)+1)

# organize data into a df
  df <- data.frame(x = sort(x, decreasing = T),
                   pk <- ecdf(x)(x),
                   k <- seq_along(x))

# plot
  ggplot(df, aes(x=k, y= pk)) + geom_point(alpha=0.5) + 
    coord_trans(x = 'log10', y = 'log10') +
    scale_x_continuous(breaks = trans_breaks("log10", function(x) 10^x), labels = trans_format("log10", math_format(10^.x))) +
    scale_y_continuous(breaks = trans_breaks("log10", function(x) 10^x), labels = trans_format("log10", math_format(10^.x))) 
```

[![在此处输入图像描述](../Images/c40e03be6caca8f41446d13546a0c2f4.png)](https://i.stack.imgur.com/YPB6A.jpg)

# ios - UIview Flip 使 Views 变暗

> ID：14736040
> 
> 赞同：2
> 
> 时间：2013-02-06T18:18:53.363
> 
> 标签：ios, uiviewanimation, flip, uiviewanimationtransition

我一直在 iOS 中实现一个简单的 FlipView：一个包含两个子视图的 UIView，一次显示一个，当你点击它时，它会翻转它们。我正在使用以下动画翻转。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    @synchronized(self){
        if(!self.flipping){
            self.flipping = YES;
            UIView *toView = self.currentView == self.primaryView ? self.secondaryView : self.primaryView;            
            [UIView transitionFromView:self.currentView toView:toView duration:self.speed options:UIViewAnimationOptionTransitionFlipFromLeft|UIViewAnimationOptionCurveEaseInOut completion:^(BOOL finished) {
                [self.currentView removeFromSuperview];
                self.currentView = toView;
                self.flipping = NO;
            }];                
        }
    }
} 
```

很直截了当，对吧？

但让我烦恼的是，当视图翻转时，翻转的内容变暗了。这表明，在浅色背景下。

有没有人知道一个解决方案来拥有完全相同的动画，但没有变暗（<= 这甚至是一个词吗？）

提前致谢 ！

PS：我的目标是 IOS 5 及更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:26:48.453

我最近遇到了类似症状的问题，每当我执行某个操作时，我都会一遍又一遍地在代码中的其他位置添加子视图。也许你正在做类似的事情？当您的触摸结束时，您是否对翻转的内容做其他事情？**如果这是您的问题，**您可能需要删除正在添加的子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:56:22.570

我成功了，从我在这里找到的代码中获得灵感[http://www.mycodestudio.com/blog/2011/01/10/coreanimation/](http://www.mycodestudio.com/blog/2011/01/10/coreanimation/)（他本人也从[http://www.mentalfaculty.com/获得灵感智力/博客/条目/2010/9/22_FLIPPIN_OUT_AT_NSVIEW.html](http://www.mentalfaculty.com/mentalfaculty/Blog/Entries/2010/9/22_FLIPPIN_OUT_AT_NSVIEW.html) )

无论如何，我在两个视图之间旋转。

```
- (void)flip{
    @synchronized(self){
        if(!self.flipping){
            self.flipping = YES;

            UIView *bottomView = self.currentView == self.primaryView ? self.secondaryView : self.primaryView;
            CALayer *top = self.currentView.layer;
            CALayer *bot = bottomView.layer;

            CAAnimation *topAnimation = [self flipAnimationWithDuration:self.speed/2.0 forLayerBeginningOnTop:YES scaleFactor:1];
            CAAnimation *bottomAnimation = [self flipAnimationWithDuration:self.speed/2.0 forLayerBeginningOnTop:NO scaleFactor:1];

            CGFloat zDistance = 1500.0f;
            CATransform3D perspective = CATransform3DIdentity;
            perspective.m34 = -1\. / zDistance;
            top.transform = perspective;
            bot.transform = perspective;

            topAnimation.delegate = self;
            [CATransaction setCompletionBlock:^{
                [top removeAllAnimations];
                [self.currentView removeFromSuperview];
                self.currentView = bottomView;
                [self addSubview:bottomView];

                [CATransaction setCompletionBlock:^{
                    self.flipping = NO;
                    [bot removeAllAnimations];
                }];
                [CATransaction begin];

                [bot addAnimation:bottomAnimation forKey:@"flip"];

                [CATransaction commit];
            }];
            [CATransaction begin];
            [top addAnimation:topAnimation forKey:@"flip"];

            [CATransaction commit];
        }
    }
}

-(CAAnimation *)flipAnimationWithDuration:(NSTimeInterval)aDuration forLayerBeginningOnTop:(BOOL)beginsOnTop scaleFactor:(CGFloat)scaleFactor
{
    // Rotating halfway (pi radians) around the Y axis gives the appearance of flipping
    CABasicAnimation *flipAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
    CGFloat startValue = beginsOnTop ? 0.0f : M_PI/2;
    CGFloat endValue = beginsOnTop ? -M_PI/2 : 0.0f;
    flipAnimation.fromValue = [NSNumber numberWithDouble:startValue];
    flipAnimation.toValue = [NSNumber numberWithDouble:endValue];

    // Shrinking the view makes it seem to move away from us, for a more natural effect
    // Can also grow the view to make it move out of the screen
    CABasicAnimation *shrinkAnimation = nil;
    if (scaleFactor != 1.0 ) {
        shrinkAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
        shrinkAnimation.toValue = [NSNumber numberWithFloat:scaleFactor];

        // We only have to animate the shrink in one direction, then use autoreverse to "grow"
        shrinkAnimation.duration = aDuration * 0.5;
        shrinkAnimation.autoreverses = YES;
    }

    // Combine the flipping and shrinking into one smooth animation
    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.animations = [NSArray arrayWithObjects:flipAnimation, shrinkAnimation, nil];

    // As the edge gets closer to us, it appears to move faster. Simulate this in 2D with an easing function
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:beginsOnTop?kCAMediaTimingFunctionEaseIn:kCAMediaTimingFunctionEaseOut];
    animationGroup.duration = aDuration;

    // this really means keep the state of the object at whatever the anim ends at
    // if you don't do this then it reverts back to the original state (e.g. brown layer)
    animationGroup.fillMode = kCAFillModeForwards;
    animationGroup.removedOnCompletion = NO;

    return animationGroup;
} 
```

这两个视图被命名为primaryView 和secondaryView。您可以使用任何视图，（ImageView，文本视图...）

# javascript - Google Maps JavaScript API 的问题

> ID：14736041
> 
> 赞同：-1
> 
> 时间：2013-02-06T18:18:54.837
> 
> 标签：javascript, xml, google-maps

这是我的代码。我从 xml 获取数据。但它不起作用..请看看哪里有错误。
我找不到它..我正在研究它一个多星期...

但什么都没有:(

PS对不起我的英语..

这是我的 XML 数据..

```
 <marker>
<line id_line="1" colour="#ccc" width="4" users="line" coordinats="47.828979,40.974844;47.839451,40.985211;47.848377,40.981064;47.853699,40.984822">
<point lng="40.974844" lat="47.828979"/>
<point lng="40.985211" lat="47.839451"/>
<point lng="40.981064" lat="47.848377"/>
<point lng="40.984822" lat="47.853699"/>
</line>
</marker> 
```

JavaScript：

```
function line() {
            var point=[];
            downloadUrl("line.php", function(data) {
        var xml = data.responseXML;
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");                             
        var lines = xmlDoc.documentElement.getElementsByTagName("line");
        for (var a = 0; a < lines.length; a++) {
        var colour = lines[a].getAttribute("colour");
        var width  = parseFloat(lines[a].getAttribute("width"));
        var points = lines[a].getElementsByTagName("point");

  alert (points[i].getAttribute("lat"));

 var pts = [];
            for (var i = 0; i < points.length; i++) {
               pts[i] = new google.maps.LatLng(parseFloat(points[i].getAttribute("lat")),
                                   parseFloat(points[i].getAttribute("lng")));
            }
            new google.maps.Polyline(pts,colour,width);
            pts.setMap(map);
          }

  google.maps.event.addListener(pointpath,'mouseover', function() {

        this.setOptions({strokeColor: '#3ADF00' });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 4 });
  });

     google.maps.event.addListener(pointpath,'mouseout', function() {

        this.setOptions({strokeColor: '#FF0040' });
           this.setOptions({strokeOpacity: 1.0 });
           this.setOptions({strokeWeight: 2 });
  });

       var mpenc = new google.maps.InfoWindow();
  var contentString = "Status: " + status ;
  google.maps.event.addListener(pointpath,'click', function(event) {
    mpenc.setContent(contentString);
    mpenc.setPosition(event.latLng);
    mpenc.open(map);
  });

 }

     });  
    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:00:16.767

xmlDoc 应该是什么？

```
 var xml = data.responseXML;
    var markers = xmlDoc.documentElement.getElementsByTagName("marker");                             
    var lines = xmlDoc.documentElement.getElementsByTagName("line"); 
```

看起来像这一行：

```
 var xml = data.responseXML; 
```

应该：

```
 var xmlDoc = data.responseXML; 
```

如果这没有帮助，请参阅[Google Maps API v3 文档中的本教程、](https://developers.google.com/maps/articles/phpsqlajax_v3#outputxml) “使用 PHP 输出 XML”部分以及有关检查 XML 输出是否有效的部分。

确保你有这一行：

```
header("Content-type: text/xml"); 
```

并且标头包含正确的内容类型。在浏览器中打开 XML 和/或通过验证器运行它（如果 XML 无效，requestXML 将为空）。

[稍微修改 xml 的示例](http://www.geocodezip.com/v3_GenericMapBrowser.asp?filename=SO_brio_question.xml)

# jquery - scrollTo 插件错误“对象 [对象对象] 没有方法 'scrollTo'”

> ID：14736043
> 
> 赞同：0
> 
> 时间：2013-02-06T18:19:00.433
> 
> 标签：jquery, asp.net, asp.net-mvc, scroll

我正在尝试使用 scrollTo 插件，但没有运气，我收到了这个错误

对象 [对象对象] 没有方法 'scrollTo'

脚本 scrollTo 包含在页面中...

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="~/Scripts/jquery.scrollTo-1.4.3.1.js"></script>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr") 
```

我这样称呼它

```
 $("#nav-next").click(function (e) {
        e.preventDefault();
        $("#slider").scrollTo(1300, 0);
    }); 
```

这是我试图在其上应用滚动的 Div：

```
 <div id="slider">
<div class="static-panel" id="static-panel">

  .... Images here 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:31:02.603

Try updating this:

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
</script>//--^^^^^^---this 
```

and try with this:

```
<script src="http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js">
</script> 
```

may be there are issues with the path of `scrollTo` plugin.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:47:21.777

这是同时加载 2 个版本的 Jquery 的问题......

Asp.Net mvc 默认模板添加 2 行

```
 @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false) 
```

这会加载 jquery 1.7.1

# ruby - 可以分配给变量的最低内存占用对象是多少？

> ID：14736048
> 
> 赞同：2
> 
> 时间：2013-02-06T18:19:13.577
> 
> 标签：ruby

我想创建一个`hash`，但我只对`keys`. 因此，我希望*内存占用*`values`尽可能小。最适合分配的对象是什么？

 **   `nil`?
*   一个很短的符号，比如`:a`?
*   更小的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:47:58.650

你可以使用任何你想要的值，只要你使用相同的值。

```
x = "A string value"
h =  Hash[ 10000.times.map{|i| [i, x]} ]
h2 = Hash[ 10000.times.map{|i| [i, nil]} ]
# h takes the same memory as h2 
```

在上面的例子中，`x`可以是任何你喜欢的。这些值将只保存指向 的指针，或者如果是立即值（、或 a ）`x`则值本身。`x``nil``true``false``Fixnum`

**无论哪种情况，使用的内存都是一样的！**它将是您平台上指针的大小（即`0.size`字节）。在 C 代码中，这对应于`VALUE`.

只是要小心重用同一个对象（即 same `object_id`），而不是每次都创建一个新对象。例如：

```
h3 =  Hash[ 10000.times.map{|i| [i, "A string value"]} ]
# => h3 will take a lot more space!
h.values.map(&:object_id).uniq.size  # => 1
h3.values.map(&:object_id).uniq.size # => 10000 
```

简而言之，万无一失的方法是使用`false`, `true`, `nil`, a`Fixnum`或 a `Symbol`，因为符号存储在全局表中。`:hello.object_id`在任何地方都相同，并且该字符串`'hello'`仅存储一次并为`:hello`代码中的所有符号共享。

```
h4 =  Hash[ 10000.times.map{|i| [i, :some_symbol]} ]
# => h4 will only take as much space as h and h2
h4.values.map(&:object_id).uniq.size # => 1 
```

仅供参考，内置库`Set`具有相同的要求，即它`Hash`仅将 a 用于键。`true`为简单起见，它用作值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:24:58.030

以下适用于官方的 Ruby 实现。在这方面，其他实现方式可能有所不同。

`nil`, `true`,`false`和`Fixnum`s 在 C 级别的指针内编码，而所有其他对象将涉及一个实际指向某处的指针（因此您将拥有指针的空间消耗加上它指向的空间）。所以这些对象是内存占用最小的对象。

其中，`nil`在语义上最有意义。*

# matlab - 在 MATLAB 中输出 4 路音频

> ID：14736049
> 
> 赞同：2
> 
> 时间：2013-02-06T18:19:19.783
> 
> 标签：matlab, audio

我希望使用外部声卡（[Creative Soundblaster X-Fi Surround 5.1 Pro USB](http://en.store.creative.com/sound-blaster/sound-blaster-x-fi-surround-5-1-pro/1-20055.aspx)）同时从 MATLAB 输出四个音频通道，但尚未找到可行的解决方案。

据我了解，MATLAB 的`audioplayer`对象只能输出立体声信号，所以我尝试了两种选择： [playrec](http://www.playrec.co.uk/)和[pa_wavplay](http://www.mathworks.com/matlabcentral/fileexchange/4017)。两者似乎都完全符合我的需要，但似乎只将声卡识别为双通道设备。

任何建议都会很棒。谢谢阅读。

（MATLAB 版本是 R2007b，唯一可用的工具箱是 Signal Processing Toolbox。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:27:44.500

我对 pa_wavplay 有一些经验，发现它可以毫无问题地处理大量输入/输出。我怀疑问题出在您的音频接口上。

虽然它可以输出 5.1，但它很可能通过在设备中解码杜比数字流来自行生成这些“附加”通道。这表明该接口不允许您输出 6 个 6 通道的 PCM 音频。

如果您决定使用此设备并准备动手，您可以随时尝试自己将音频编码为 ac3，但我想您必须在 Matlab 之外执行此操作。

# ipad - Monotouch 崩溃：将 UINavigationController A 替换为 B 并将 UiViewControllers 推送到 B

> ID：14736055
> 
> 赞同：2
> 
> 时间：2013-02-06T18:19:41.483
> 
> 标签：ipad, uinavigationcontroller, xamarin.ios, uistoryboard

我们使用 Xamarin 已经有一段时间了，它在开发最新的 iPad 应用程序时导致了奇怪的崩溃。以下是问题：

ipad 应用程序使用带有 2 个导航控制器（比如 A 和 B）的故事板，每个控制器都有一个 RootViewCONtroller（比如 A1 和 B1），其中 A 作为默认导航控制器，并在 APP 启动时显示。A1 上有 2 个按钮，按下按钮 1 加载 NavController B。以下是单击 NavController A 上的按钮 1 时代码执行的步骤。

在 Button Event handler 中，我在 AppDelegate 中调用了一个公共函数，该函数执行以下操作：

*   获取 StoryBoard iD 并使用 storyboard.InstantiateViewCONtroller 实例化 NavController B。
*   从其超级视图中删除 NavCONtroller A（使用 UIView.View.RemoveSuperView()）
*   将上述 B 的引用分配给 appdelegate 窗口的 Root 视图控制器（加载 NavCOntroller B 的 rootview 控制器 B1）。

在上述步骤之前它工作正常（我可以在 iPad 上看到 rootviewcontroller 的 UiView 负载）。

下一步我试图在实例化后推送另一个 UiViewController。（因为我的目标是 2 显示层次结构中的第二个屏幕）（storyboard.InstantiateViewController(identifier)。理想情况下，这应该向我显示推送的视图控制器。但是应用程序在之后崩溃这一步.!! WEIRD!!!!. 以下是简化代码：

```
public void SetNavControllerB(UINavigationController navA, UiStoryBoard StoryBoard)
{
   navA.View.RemoveFromSuperView();

   this.Window.RootViewController = (UiNavigationController)StoryBoard.InstantiateViewController("VC0");
   // 'VC0' is the identifier for NavigationController B with RootViewController as "VC1"

  // It works great till the above step

   UiViewController vc2 = (UiViewController)StoryBoard.InstantiateViewController("VC2");
   ((UINavigationController)this.Window.RootViewController).PushViewController(vc2, true);

   //The above executes with out any exception, but it crashes later.
} 
```

请帮帮忙！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:40:50.747

如果您在`UINavigationController`push 或 pop 之外修改堆栈，则需要替换其整个控制器堆栈：

```
myNavController.SetViewControllers(new UIViewController[] { controller1, controller2 }, true); 
```

如果您在之前的 push 或 pop 完成之前尝试 push 或 pop，那么您将在控制台输出中收到崩溃和警告。

PS - 我认为你不需要`RemoveFromSuperview`在你的情况下调用任何地方，你应该修改`UINavigationController's`堆栈或替换`RootViewController`你的窗口。

# c# - .Net 和 SQL Server 中小数和货币之间的舍入差异

> ID：14736061
> 
> 赞同：0
> 
> 时间：2013-02-06T18:20:03.057
> 
> 标签：c#, sql-server

这是 linqpad 的结果。

```
decimal d = .035m + .035m + .035m; 
d.Dump();
decimal.Round(d,2).Dump();
0.105
0.10 
```

这是 SMSS 的结果。

```
declare @d money
set @d = convert(money, .035) + convert(money, .035) + convert(money, .035)
select @d, round(@d,2)
(No column name)    (No column name)
0.105   0.11 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:23:18.593

正确答案是：

*   C# 的[round](http://msdn.microsoft.com/en-us/library/k4e2bye2.aspx)将中点四舍五入到最接近的偶数
*   T/SQL 的[四舍五入](http://msdn.microsoft.com/en-us/library/ms175003.aspx)中点向上

* * *

**下面的答案是错误的，但可能很有启发**
性 A SQL 常量 like `0.1`is a `decimal`not a `float`，如 hvd 注释。

* * *

在 C# 中，您输入的是带有后缀`0.35m`的精确`decimal`常量。`m`

但在 SQL 中，您正在`0.35`从转换`float`为`money`. 来自的转换`float`不准确。如果您使用前缀 输入货币类型`$`，您将获得与 C# 相同的结果：

```
declare @d money
set @d = $0.035 + $0.035 + $0.035
select @d, round(@d,2) 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/d41d8/2353/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:49:42.737

@sgeddes 在上面回答了它。看起来像 Round 默认向下舍入：stackoverflow.com/a/8844698/1073631 - 尝试添加 MidpointRounding.AwayFromZero。

# haskell - 如何在 Haskell 中简化嵌套 if 使用以返回值

> ID：14736062
> 
> 赞同：8
> 
> 时间：2013-02-06T18:20:07.647
> 
> 标签：haskell, if-statement, recursion, functional-programming, tail-recursion

我想检查前一个的条件`if condition`以确定下一个`if condition`是否要执行。每个都`if condition`可能返回一个值。

编辑：抱歉，我之前提供的示例看起来有点奇怪......:(这是我的真实示例，我想简化`if-then-else`for **goingToMove**

```
goingToMove p routes points w h = 
                        if canMove p points
                            -- the point can be moved in the map 
                            then let r = routes ++ [p]
                                     l = remainList p points
                                in move p r l w h
                            -- the point cannot be moved in the maps
                            else []

move p routes points w h = 
            if (length routes) == 2 
                then routes
                else let one = goingToMove (tallRightCorner p) routes points w h in
                    if (null one)
                        then let two = goingToMove(tallRightBCorner p) routes points w h in
                            if (null two)
                                then let three = goingToMove (tallLeftBCorner p ) routes points w h in
                                    if (null three)
                                        then ....
                                        ...... -- until, let eight = ..
                                        else three
                                else two
                        else one 
```

编辑：坏例子 **当这个东西是用java写的，我可能会使用一个可变的布尔标志，并返回一个可变的数据。**

```
public String move (int number){
        // base case
        if (number == 0){
            return "Finished the recursion";
        }
        // general case
        else {
            String result;
            boolean isNull = false;

            if ((result = move(3)) == null){
                isNull = true;
            }
            else {
                return result;
            }

            // continue to execute the if-conditions if the previous condition failed
            if (isNull){
                if((result = move(2)) == null){
                    isNull = true;
                }
                else {
                    return result;
                }
            }

            if (isNull){
                if((result = move(1)) == null){
                    isNull = true;
                }
                else {
                    return result;
                }
            }

            return null;
        }
    } 
```

但是在 Haskell 中，**没有可变数据，只有`if-then-else`条件。**然后代码看起来像这样，我想简化一下，因为在我的实际工作中，有 8 个级别`if-then-else`看起来很糟糕和混乱......

```
move 0 = "Finished the recursion"
move n = 
    let one = move 3 in
    if null one
        then let two = move 2 in
            if null two
                then let three = move 1 in
                        then null
                        else three
                else two
        else one 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T18:53:25.463

如果我想在 Java 中执行以下操作：

```
result = func1(arg);
if (result == null){
  result = func2(arg);
  if (result == null){
    result = func3(arg);
    if (result == null){
      result = func4(arg);
    }
  }
}
return result; 
```

我实际上在做的是从`func1(args)`, `func2(args)`,`func3(args)`中找到第一个`func4(args)`返回非空值的结果。

在 Haskell 中，我将`func1`、`func2`、`func3`和建模`func4`为返回`Maybe a`值的函数，以便它们`Nothing`在失败时返回。

```
func1, func2, func3, func4 :: Int -> Maybe Result 
```

然后我可以使用`<|>`运算符 (from `Control.Applicative`)，它对 具有以下定义`Maybe a`：

```
Nothing <|> x = x
x       <|> _ = x 
```

所以我可以将上面的Java转换为

```
func1 arg <|> func2 arg <|> func3 arg <|> func4 arg 
```

并且由于惰性评估的奇迹，仅在返回`func2 arg`时才评估，与 Java 示例中相同。`func1 arg``Nothing`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-06T19:20:52.593

除了使用[rampion和](https://stackoverflow.com/users/9859/rampion)[sclv](https://stackoverflow.com/users/371753/sclv)的类似建议`<|>`之外，另一种常见的方法是使用守卫，并利用惰性，

```
move :: Int -> Maybe String
move n
    | n == 0       = Just "Finished the recursion"
    | isJust move3 = move3
    | isJust move2 = move2
    | isJust move1 = move1
    | otherwise    = Nothing
      where
        move3 = move 3
        move2 = move 2
        move1 = move 1 
```

由于懒惰，只有在需要时才评估`move i`( )。`i = 3, 2, 1`

在给定的情况下，`move 3 <|> move 2 <|> move 1`情况要好得多，但是在条件需要评估具有不同返回类型的不同函数的情况下，在`where`子句中使用守卫和惰性绑定可能是避免尴尬的嵌套`if`s 的自然解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T18:33:16.947

*编辑*：这是新示例的一些代码：

```
move p routes points w h 
     | length routes == 2 = routes
     | otherwise = find (not . null) . map gtm [tallRightCorner, tallRightBCorner, tallLeftBCorner]
    where gtm f = goingToMove (f p) routes points w h 
```

请注意，这会返回一个可能。您可以使用`fromMaybe`坚持默认情况。

这是第一个建议示例中的旧（但类型检查）代码

```
move 0 = "Finished the recursion"
move n = concat . maybeToList . msum $ map move' [3,2,1]
  where move' x = let mx = move x in if null mx then Nothing else Just mx 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T00:07:25.983

`routes`如果它的长度为 2 或来自一系列应用程序的第一个非空结果，则您想要它`goingToMove`会因应用角函数而异`p`。

```
move p routes points w h
  | length routes == 2 = routes
  | otherwise = head
              $ filter (not . null)
              $ map tryMove corners
    where tryMove f = goingToMove (f p) routes points w h
          corners = [ tallRightCorner
                    , tallRightBCorner
                    , tallLeftBCorner
                    -- et cetera
                    ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:31:43.240

没有 Maybe 的选项可能是在递归中添加一个标志（在下面的示例中，您将调用该标志设置为 1 的函数）：

移动 p 路线点 wh 1

```
move p routes points w h flag 
  | (length routes) == 2 = routes
  | otherwise = 
      if null result then move p routes points w h (flag+1)
      else result
        where result = case flag of 
                        1 -> goingToMove (tallRightCorner p) routes points w h
                        2 -> goingToMove (tallRightBCorner p) routes points w h
                        3 -> goingToMove (tallLeftBCorner p) routes points w h
                        --...etc.
                        _ -> [] 
```

# java - Java 可重入锁的正确锁定/解锁用法

> ID：14736064
> 
> 赞同：3
> 
> 时间：2013-02-06T18:20:26.753
> 
> 标签：java, synchronization

我有一个名为“H2O 问题”的家庭作业，我应该在其中实现一个名为 H2OBarrier 的类，它有 3 个方法。

*   HReady，当一个氢原子（线程）准备好时调用的方法
*   OReady，当氧原子（线程）准备好时调用的方法
*   makeWater，当两个氢原子和一个氧原子准备好时调用的方法

我应该使用 Java 可重入锁和条件来执行此操作。

到目前为止，这是我的代码，我想知道我是否正确使用了锁定和解锁。

```
public class H2OBarrier {

int hCount;
int oCount;

Lock lock = new ReentrantLock();
Condition hWait = lock.newCondition();
Condition oWait = lock.newCondition();

public void HReady() {
    lock.lock();
    hCount++;

    try {
        hWait.await();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

public void OReady(){
    lock.lock();
    oCount++;

    try {
        while(hCount<2 && oCount<1){
            oWait.await();
        }   
    } catch (InterruptedException e) {
        e.printStackTrace();
    } finally {
        makeWater();
    }

}

public void makeWater(){
    hCount--;
    hWait.signal();
    lock.unlock();

    hCount--;
    hWait.signal();
    lock.unlock();

    oCount--;
    oWait.signal();
    lock.unlock();

}

} 
```

我应该在 makeWater 方法之外的任何地方调用 unlock() 吗？该程序的整个流程对我来说似乎非常合乎逻辑，我只是​​想确保我正在做的事情总体上看起来是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:44:09.703

您的代码正在产生死锁。想象一下 5 个原子首先通过，5 个进入由 await() 生成的 o 队列。现在，如果 2 h 个原子通过并不重要，所有的 h 个原子都会因为您的代码而自动等待。

# c# - 由于 .NET 1.1 中不支持串行端口，使用串行端口的解决方法是什么？

> ID：14736068
> 
> 赞同：1
> 
> 时间：2013-02-06T18:20:34.400
> 
> 标签：c#, .net, serial-port, legacy, zebra-printers

根据两个来源（[http://bytes.com/topic/c-sharp/answers/224314-serial-communication-dll](http://bytes.com/topic/c-sharp/answers/224314-serial-communication-dll)和[http://www.innovatic.dk/knowledg/SerialCOM/SerialCOM.htm），.NET](http://www.innovatic.dk/knowledg/SerialCOM/SerialCOM.htm) 1.1 没有串口支持。

第一个 URL 说，“.NET Framework 2.0 还添加了以下命名空间：System.IO.Ports -> 提供 SerialPort 类以实现串行端口操作。”

第二个：“.Net 1.1 RTM (Release To Manufactoring) = 不支持串口！”

因此，由于我正在增强的项目在 Visual Studio 2003 上的 .NET 1.1 中（在 Windows 7 上的 XP 模式下），我必须通过串行端口连接到带式打印机（Zebra QL220）并发送一些CPCL（打印指令）？

## 更新

似乎 OpenNETCF 可能是要走的路，但我也不确定如何使用它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:55:42.153

答案是使用 OpenNETCF 类，它有一个可以使用的 SerialPort 类。

# c# - c# 将字符串（无时区）解析为 DateTime，将 DST 考虑在内

> ID：14736069
> 
> 赞同：3
> 
> 时间：2013-02-06T18:20:36.317
> 
> 标签：c#, parsing, datetime, timezone, dst

我已经阅读了很多 SO 文章，但我似乎无法找到问题的好答案。发布的建议包括将日期转换为字符串或从字符串转换多次的函数，最后连接位，这一切似乎......混乱

那么问题来了：

我们在世界各地都有服务器。所有服务器都以自己的本地时间运行，并保留带有服务器本地时间条目的日志。一些服务器在 DST 观察区域，其他服务器不在

假设我有来自日志的这些字符串：*2013-01-01 12:34:56, 2013-07-01 12:34:56* 我知道这个服务器在纽约，所以它是 UTC-5 或 UTC-4 时夏令时正在运行

而且我在香港的服务器上的日志中有相同的字符串，其中 DST 不适用，时区为 +8

我所追求的是一段代码，我可以告诉它：

*   这是一个代表时间的字符串
*   这是字符串来自的时区
*   如果相关，应适用夏令时

并且代码会将字符串解析为 DateTimeOffset，如果解析的时间与 DST 相关，则根据 DST 调整偏移量

例如：NY 服务器日志显示“ *2013-01-01* ...”DST**不适**用于 1 月的这个日期，因此解析的日期应该是：纽约时间 12:34:56，又名 17:34:56 UTC（因为它是 -5，没有 DST）

纽约服务器日志显示“ *2013-07-01* ...”DST**确实**适用于 6 月的这个日期，因此解析的日期应该是：纽约时间 12:34:56，也就是 UTC 时间 16:34:56（因为它是-4，有夏令时）

香港服务器，两个日期时间都解析为 04:34:56 UTC

多谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:26:54.693

首先，我*强烈*建议您更改系统以在任何地方登录 UTC。它会让你的生活变得更简单。

如果你*真的*[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)坚持你所拥有的，你应该`DateTimeStyles`只使用 0（默认值）。这将为您提供 a `DateTimeKind`of的值`Unspecified`，这就是您想要的。（它不是 UTC，也不是进行解析的机器本地的。）

然后，您可以使用[`TimeZoneInfo.GetUtcOffset`](http://msdn.microsoft.com/en-us/library/bb396378.aspx)（使用该日志的正确时区）计算偏移量，并`DateTimeOffset`从两者中创建一个。

除了完全有偏见之外，您还可以更改为使用我维护的[Noda Time](http://noda-time.googlecode.com)项目，这将使您的代码更易于理解:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T19:02:43.740

要获取不同日志文件中记录的时间的 UTC 时间，您需要知道本地时区的名称。然后您可以使用[`DateTimeOffset`-struct](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx) [`TimeZoneInfo`-class](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)来计算 UTC 时间：

```
public DateTime ParseAsUtc(string logDate, string timezoneName)
{
    var timeZone = TimeZoneInfo.FindSystemTimeZoneById(timezoneName);
    var localDate = DateTime.Parse(logDate);
    var offset = new DateTimeOffset(localDate, timeZone.GetUtcOffset(localDate));
    return offset.ToUniversalTime().DateTime;
}

ParseAsUtc("2013-01-01 12:34:56", "Eastern Standard Time"); //01.01.2013 17:34:56
ParseAsUtc("2013-07-01 12:34:56", "Eastern Standard Time"); //01.07.2013 16:34:56
ParseAsUtc("2013-01-01 12:34:56", "China Standard Time");   //01.01.2013 04:34:56
ParseAsUtc("2013-01-01 12:34:56", "China Standard Time");   //01.07.2013 04:34:56 
```

# magento - Magento 收到的邮件（回复）会出现错误的电子邮件 SMTP 问题？

> ID：14736071
> 
> 赞同：0
> 
> 时间：2013-02-06T18:20:45.503
> 
> 标签：magento, smtp

我有一个客户，当他们应该去客户服务电子邮件时，他不断地让客户服务回复他邮箱中的电子邮件。我到处搜索他的电子邮件记录，但它无处可寻。我现在猜测，由于客户服务电子邮件属于不同的域，因此回复被标记为垃圾邮件并被发送到服务器管理员帐户。我已经下载了这个扩展： http: [//www.magentocommerce.com/magento-connect/ASchroder/extension/1865/aschroder.com-smtp-pro](http://www.magentocommerce.com/magento-connect/ASchroder/extension/1865/aschroder.com-smtp-pro)。不同的域电子邮件会是 SMTP 吗？建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:08:54.223

我们的一些收件人也遇到了这个问题。

主要是 Comcast 用户和 Century Link 等等。问题是，您是从（例如）发送的`www-data@thisdomain`（这将是**机器**域名，即。`www-data@WebServer01`） - 在标题中，无论谁在该`FROM`字段中。您在 FROM 字段中的实际域是`customer_service@yourstoredomain.com`. 您将需要做两件事之一。

如果您在自己的操作系统上托管 Magento 安装并且您可以控制它，则需要更改机器主机名以匹配您的 Web 域名。即`yourwebsite.com`。

如果这不是一个选项，那么您将需要使用您提到的 Magento 插件，并让它通过 SMTP 登录到您的电子邮件服务提供商（我们使用 Office365）并从“真实”电子邮件发送电子邮件您创建的地址。

失败的原因是提供商（即 Comcast CenturyLink）上的 SPF 记录不允许来自标头中指定的域以外的域的电子邮件。这通常是为了防止向客户发送垃圾邮件等。因此，像这样的公司只是阻止或在某些情况下将电子邮件重定向回原始`FROM`域的用户。

如果可能的话，最简单的方法是尝试更改电子邮件标题中的域。希望您管理自己的操作系统，以便您可以控制它。如果没有，请尝试查看您的托管服务提供商是否会为您提供“入狱”区域的访问权限，以便您可以更改上述设置。SMTP 路由不好玩...

# android - 我的应用程序的所有用户的总运行时间

> ID：14736087
> 
> 赞同：-1
> 
> 时间：2013-02-06T18:21:30.920
> 
> 标签：android

我是安卓新手。我有一个想法，我想知道哪个用户，自从他/她安装到他/她的设备后运行我的应用程序多长时间。（以日/时/分格式）

这些数据将保存在 SQL 表中。

*   我应该使用什么类型的技术和逻辑？

*   当普通主机的流量非常大时？

*   Android 是否允许访问此类信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:38:50.237

您可能需要考虑[Google Analytics](http://www.google.com/analytics/)

# animation - Maya to three.js 与动画

> ID：14736090
> 
> 赞同：3
> 
> 时间：2013-02-06T18:21:37.520
> 
> 标签：animation, model, three.js, maya, skeletal-mesh

我在 Maya 中有一个装配好的（骨架和软绑定）模型。该模型是一个无缝的低多边形，具有单个 jpeg 纹理映射。骨骼有简单的动画。（联合旋转）。我需要让它与 ThreeJs (webGL) 一起工作。

我是否尝试以某种方式导出带有 Morph Targets 的 OBJ？我可以做 OBJ，但我如何获得变形目标？我正在使用的开发人员可以在 webGL 中读取 Maya 的烘焙动画文件（.MC 或 .XML）吗？我要导出 Collada DAE 吗？

任何可以引导我们朝着正确方向前进的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-16T20:54:11.263

THREE.js 带有 Maya 导出器，但它仅适用于静态模型。我创建了一个更新版本，它还支持导出装配和动画模型。它不需要任何中间步骤：它只是直接输出到 .JS 文件。我们有一个将更新的导出器与三个主干集成的拉取请求，但如果您想立即获得新的和改进的导出器，您可以从这个存储库获取它：[https ://github.com/BlackTowerEntertainment/three.js/tree /maya_animation_exporter](https://github.com/BlackTowerEntertainment/three.js/tree/maya_animation_exporter)。导出器文件位于 utils/exporters/maya 中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T17:55:08.000

最好从 Maya 导出 Collada DAE 文件，以便将数据导入 ThreeJS。[您可以通过http://Clara.io](http://Clara.io) （一个在线 3D 编辑器、建模器、动画）预览和共享您的数据，它导入 Collada DAE 并使用 ThreeJS 进行显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:29:37.820

您应该阅读常见问题解答，因为那里有大量信息。[https://github.com/mrdoob/three.js/wiki](https://github.com/mrdoob/three.js/wiki)。很可能您需要导出到 Collada，因为 Wavefront obj 不支持动画。

# validation - Spring MVC 表单验证 - 客户端发送的请求在语法上不正确

> ID：14736092
> 
> 赞同：1
> 
> 时间：2013-02-06T18:21:40.793
> 
> 标签：validation, spring-mvc, tomcat7, hibernate-validator

我正在尝试将表单验证添加到工作应用程序。我首先在登录表单中添加了一个 NotNull 检查。我正在使用 Bean Validation api 的 Hibernate impl。

这是我写的代码

```
@Controller
@RequestMapping(value="/login")
@Scope("request")
public class LoginController {

  @Autowired
  private CommonService commonService;

  @Autowired
  private SiteUser siteUser;

  @InitBinder
  private void dateBinder(WebDataBinder binder) {
      SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
      CustomDateEditor editor = new CustomDateEditor(dateFormat, true);
      binder.registerCustomEditor(Date.class, editor);
  }

  @ModelAttribute
  protected ModelMap setupForm(ModelMap modelMap) {
    modelMap.addAttribute("siteUser", siteUser);
    return modelMap;
  }

  @RequestMapping(value="/form", method = RequestMethod.GET)
  public ModelAndView form(ModelMap map){
    if (siteUser.getId() == null){
      map.addAttribute("command",new SiteUser());
      return new ModelAndView("login-form",map);
    }else {
      return new ModelAndView("redirect:/my-dashboard/"+siteUser.getId());
    }
  }

  @RequestMapping(value="/submit", method=RequestMethod.POST)
  public ModelAndView submit(@Valid SiteUser user, ModelMap map, BindingResult result){
    if (result.hasErrors()) {
      map.addAttribute("command", user);
      System.out.println("Login Error block");
      return new ModelAndView("login/form",map);
    }
    else {
      User loggedInUser = commonService.login(user.getEmail(), user.getPassword());
      if (loggedInUser != null) {
        siteUser.setId(loggedInUser.getId());
        siteUser.setName(loggedInUser.getName());
        System.out.println("site user attr set");
      }
      return new ModelAndView("redirect:/my-dashboard/"+loggedInUser.getId());
    }
  }
} 
```

模型是

```
@Component
@Scope("session")
public class SiteUser {
private Integer id = null;
@NotNull
private String name = null;
private String email = null;
private String password = null;
private List<String> displayPrivList = null;
private List<String> functionPrivList = null;
    // And the getters and setters
} 
```

JSP 是

```
 <c:url var="loginSubmitUrl" value="/login/submit"/>
    <form:form method="POST" action="${loginSubmitUrl}">
        <form:errors path="*" />
        <div class="row">
            <div class="span4">
            </div>
            <div class="span4">
                <h3>Please Login</h3>
                <label><span style="color:red">*</span>Email</Label><form:input path="email" type="text" class="input-medium" />
                <label><span style="color:red">*</span>Password</Label><form:input path="password" type="password" class="input-medium" />
                <br/>       
                <button type="submit" class="btn btn-primary">Login</button>
                <button type="button" class="btn">Cancel</button>
            </div>
        </div>          
    </form:form> 
```

我在上下文 xml 中添加了 messages.properties 和注释驱动的 bean def。关于该主题的其他答案谈论未发布的表单字段。就我而言，这是预期的行为——如果我提交一个空白表格，我应该会收到一个错误。

请告知我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T15:33:27.467

我认为这个问题与您的问题相同

[在 Spring MVC（使用休眠验证器）中提交带有无效数据的表单时发送的语法错误请求](https://stackoverflow.com/questions/15336143/syntactically-incorrect-request-sent-upon-submitting-form-with-invalid-data-in-s)

这只是指出

> 您必须修改参数的顺序。始终将**BindingResult**结果参数直接放在带有**@Value**注释的参数之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:54:38.307

你需要这个：`<form:errors path="email" cssClass="errors" />` 对每个具有相同“路径”名称的输入使用标签形式：错误。

如果您不放置路径，也可以同时列出所有错误。

在这里，查看带有示例代码的完整示例，您可以下载以了解如何操作： [http ://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:10:37.180

您可以尝试`<form:form>`通过像这样包含命令名称来更改它吗

```
 <form:form method="POST" action="${loginSubmitUrl}" commandName="user"> 
```

# unix - 如何在unix中的每一行末尾附加一个字符

> ID：14736094
> 
> 赞同：5
> 
> 时间：2013-02-06T18:21:53.653
> 
> 标签：unix, append

我有一个大数据文件，我需要在每行末尾附加逗号。我该如何完成这个？谢谢。这是我的示例数据文件，如下所示。

```
1000050G8611
1000200G8611
1000250G8611
1000350G8611
1000375G8611
1000376G9403
1000475G8611
1000500G8611
1000550G8611
1000600G8611
1000610G8611
1000611G0807
1000612G0804
1000614G0802
1000617G8611
1000618G0710
1000619G8611
1000621G8611
1000624G0606 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:26:21.980

```
 awk '{print $0 "," }' file > outFile

 sed 's/$/,/' file > outFile

 sed -i 's/$/,/' file 
```

如果您的 sed 支持 -i 选项。

IHTH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:28:09.077

这应该可以解决问题 `awk '{ print $0 "," }' < inputfile`

# ios - 如何用一个角度和另一个 CGPoint 确定最近的 CGPoint

> ID：14736097
> 
> 赞同：0
> 
> 时间：2013-02-06T18:21:59.187
> 
> 标签：ios, objective-c, cocos2d-iphone, angle

我计算两个 CGPoints 之间的角度：

```
//calculate radian and degree
            CGPoint diff = ccpSub(center, location);//return ccp(v1.x - v2.x, v1.y - v2.y);
            float rads = atan2f( diff.y, diff.x);
            float degs = -CC_RADIANS_TO_DEGREES(rads);
            NSLog(@"Rad %.2f Degs %.2f",rads,degs); 
```

现在在另一个函数中，我有一个预先知道的 CGPoint 和上述函数的度数，我想计算满足度数的最近点。

我在想也许下面的代码会帮助我，但在下面的代码起点和旋转点是已知的，在我的情况下我只知道起点。

```
-(void) rotateAroundPoint:(CGPoint)rotationPoint angle:(CGFloat)angle {
    CGFloat x = cos(CC_DEGREES_TO_RADIANS(-angle)) * (self.position.x-rotationPoint.x) - sin(CC_DEGREES_TO_RADIANS(-angle)) * (self.position.y-rotationPoint.y) + rotationPoint.x;
    CGFloat y = sin(CC_DEGREES_TO_RADIANS(-angle)) * (self.position.x-rotationPoint.x) + cos(CC_DEGREES_TO_RADIANS(-angle)) * (self.position.y-rotationPoint.y) + rotationPoint.y; 
```

**假设我有一个点 800,600 并且我的度数是 70，我如何计算与那个点和那个度数最近的点？**

编辑：：：

通常在我的游戏中，精灵是用一个按钮移动的，因此当按下按钮时，所有的旋转、移动、速度等都会被处理`[sprite moveToPreGivenPostion:CGPoint]`

但是现在添加了一个指南针，当用户在指南针上选择一个角度时，我需要在指南针的度数方向上移动精灵，因为`[sprite moveToPreGivenPostion:CGPoint]`已经处理了旋转和其他事情，我只想确定我应该发送什么 CGPoint 来`moveToPreGivenPostion`运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:00:45.347

正如@trumpetlicks 所说，您找不到这样的最近点，但我想我理解您想要什么，并且`-(void) rotateAroundPoint:(CGPoint)rotationPoint angle:(CGFloat)angle`您尝试使用的功能完全可以实现您想要的。

![在此处输入图像描述](../Images/3e1fb125cf37074b410d9db297efb1e1.png)

您需要做的就是选择浮动半径。

你知道你当前的点，假设你的半径是 1，基本上你可以计算你的前一个点没有度数，假设`0`度数在你的点的左边，假设你的点是 200,200，半径为 0 度，你的前一个点自动变成 199,200。所以现在你有了一个参考点，所以现在计算你想要移动你的精灵的点：

```
//choose a feasable radius
    float radius = 0.5;
    //position_ is your preknown position as you said
    //find a the point to roate 
    //position_.x-radius is always 0 degrees of your current point
    CGFloat x = cos(rads) * ((position_.x-radius)-position_.x) - sin(rads) * ((position_.y)-position_.y) + position_.x;
    CGFloat y = sin(rads) * ((position_.x-radius)-position_.x) + cos(rads) * ((position_.y)-position_.y) + position_.y;

    //get the new point
    CGPoint newLocation = ccp(x, y); 
```

# html - CSS3 屏幕分辨率不起作用

> ID：14736104
> 
> 赞同：0
> 
> 时间：2013-02-06T18:22:33.947
> 
> 标签：html, css

我在我的 html 文件中使用以下 css 代码。

```
 <style>
            body{
            background: black;
            color: #fff;
            font: normal 62.5%/1.5 tahoma, verdana, sans-sarif;
        }

        h1{font-size: 2em;}
        p{font-size: 1.4em;}

        <!-- styles for smartphones and very small screen resolution -->
        @media only screen and (min-width: 320px) and (max-width: 400px)
        {
         body{background: blue;}
        }

        <!-- styles for screen resolution bigger than smartphones but smaller or equal to 1024px -->
        @media only screen and (min-width: 401px) and (max-width: 1024px)
        {
            body{background: red;}
        }

        <!-- styles for screen resolutions for a very wide resolution -->
        @media only screen and (min-width: 2000px)
        {
            body{background: green;}
        }
    </style> 
```

我读到代码将根据屏幕分辨率工作。

这个 CSS 会取决于浏览器窗口的大小吗？或者我的系统的屏幕分辨率会在这里计算吗？

我正在更改浏览器窗口的大小并重新加载文件，页面的 UI/设计没有变化。我也清除了缓存。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:38:52.033

这是浏览器窗口。这是一篇关于如何做到这一点的好文章。

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

例如，术语“屏幕”与输出（媒体）有关，而不是实际的屏幕硬件。例如，它可以替换为“打印”，并且在打印文件时使用。

# google-app-engine - GAE Memcached API

> ID：14736105
> 
> 赞同：0
> 
> 时间：2013-02-06T18:22:36.147
> 
> 标签：google-app-engine, memcached

我关注了[https://developers.google.com/appengine/docs/python/memcache/usingmemcache](https://developers.google.com/appengine/docs/python/memcache/usingmemcache)，并获得了 memcached 的工作。

但是当我尝试在缓存过期之前更新缓存时遇到问题。例如，之后：

```
"memcache.add('key', data, 60000000000)" 
```

如果我想更新“key”中的信息存储

我希望有一个API

> “memcache.update（'key'，newData，60000000000）”（否）

我尝试再次添加：

> “memcache.add('key', newData, 60000000000)”

但它不起作用。它没有取代前一个。

任何人都可以给我一些想法如何做到这一点？

我知道有一个

> “memcahed.flush_all()”

但它会刷新整个缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:46:39.143

用于`memcache.set('key', data, 60000000000)`设置值，而不考虑缓存中的先前内容。看：

[https://developers.google.com/appengine/docs/python/memcache/functions](https://developers.google.com/appengine/docs/python/memcache/functions)

# apache - 本地主机上相对 URL 的 URL 重写

> ID：14736106
> 
> 赞同：0
> 
> 时间：2013-02-06T18:22:37.410
> 
> 标签：apache, mod-rewrite, url-rewriting

我刚刚将我的网站移动到我的 Apache Web 服务器根目录内的一个文件夹（称为 test），现在我在页面尝试获取不同资源时收到 404 错误。当我查看 url 时 - 它们似乎指向服务器的根目录，因为它们是根相对 URL（而不是指向根目录内的文件夹 [test]）。

例如：当我的网站的索引页面引用了类似的图像时

```
<img src="/images/img-1.jpg" alt="Image 1" /> 
```

页面执行时，尝试从以下 url 获取图像

```
http://localhost/slider-images/img-1.jpg 
```

而不是从 url 访问图像

```
http://localhost/slider-images/test/img-1.jpg 
```

我一直在尝试各种选项，例如拥有 ReWriteBase 等，但这似乎不起作用！

相反，我将资源路径更改为绝对路径，但这对我来说对所有资源来说工作量太大！

```
<img src="./images/img-1.jpg" alt="Image 1" /> 
```

任何帮助深表感谢。

谢谢

**更新**

之前已经发布了一个类似的问题，但我没有回复解决 [使用 mod_rewrite 将相对 URL 请求转换为绝对 URL 请求的问题](https://stackoverflow.com/questions/6731564/converting-relative-url-requests-to-absolute-url-request-using-mod-rewrite)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:10:10.247

经过数小时的故障排除后，我做了一个可用于临时修复的解决方法。在这里发布它以帮助那些可能遇到同样问题的人。

只需将 httpd.conf 文件中的 DocumentRoot 更改为指向我移动网站文件进行测试的子目录。

希望这可以帮助那些可以使用此修复程序的人。

我仍然很想知道一种通过 htaccess 解决根相对 URL 重写的方法，希望这里有人能够提供帮助。

谢谢！

# asp.net - 在 UpdatePanel 中未定义超链接

> ID：14736109
> 
> 赞同：0
> 
> 时间：2013-02-06T18:22:53.693
> 
> 标签：asp.net

我在 UpdatePanel 中有一个 HyperLink：

```
<asp:UpdatePanel ID="UpdatePanel3" UpdateMode="Conditional" ChildrenAsTriggers="False" runat="server">
    <ContentTemplate> 
        <asp:HyperLink runat="server" ID="LinkMylink" Text="B3D Download" Visible="False"></asp:HyperLink>
    </ContentTemplate> 
</asp:UpdatePanel> 
```

但后来我遇到了这个问题：

```
 <script type="text/javascript"> //<![CDATA[ document.getElementById(ctl00_ContentPlaceHolder1_Link3Dlink)(function() {var fn = function() {$get("ctl00_ToolkitScriptManager1_HiddenField").value = '';Sys.Application.remove_init(fn);};Sys.Application.add_init(fn);})();Sys.Application.initialize(); Uncaught ReferenceError: ctl00_ContentPlaceHolder1_LinkMylink is not defined //]]> </script> 
```

看起来很奇怪，不是吗？这是什么原因，我该如何解决？javascript方法是自动生成的。

# android - 三星 Galaxy Tab 2 10.1 - 从端口读取信号

> ID：14736116
> 
> 赞同：0
> 
> 时间：2013-02-06T18:23:27.433
> 
> 标签：android, signals, port

是否可以将此选项卡连接到另一个设备并从该设备发送的端口读取信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:29:32.120

一些 android 设备支持通过附件协议与 throw USB 设备<--->设备通信。

这是一个详细讨论此功能[Android ADK的链接](http://developer.android.com/tools/adk/index.html)

要进行更一般的概述，您可以从此处开始阅读有关 android 中的 USB：[Android USB Connectivity Doc](http://developer.android.com/guide/topics/connectivity/usb/index.html)

# c# - wp7 在应用程序中快速本地化大量字符串

> ID：14736117
> 
> 赞同：0
> 
> 时间：2013-02-06T18:23:29.093
> 
> 标签：c#, windows-phone-7, localization, resx

我有一个应用程序，我试图将大约 100 个字符串本地化为 15 多种语言。在 Visual Studio 中使用 resx 时，我一次只能复制/粘贴到一个单元格中。当然，我不想这样做 1500 次。

有没有一种方法/程序可以用来获取所有翻译的字符串，然后将它们复制/粘贴到整个单元格列中，对于我拥有的 15 种以上的语言，各一次？

我尝试了 Resex，但从表面上看，我似乎无法做到这一点？也许我只是用错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:44:25.403

如果您可以获得 CSV 文件（例如：从 Excel 导出），我有一个简单的工具可以将 CSV 转换为 RESX 文件： http: [//lostintranslation.apphb.com/](http://lostintranslation.apphb.com/)（选择 CSV 以捆绑和 .NET）

# java - Jenkins CLI Java API - 指定构建参数

> ID：14736125
> 
> 赞同：3
> 
> 时间：2013-02-06T18:23:55.720
> 
> 标签：java, jenkins

鉴于即此代码::

```
...
List<String> arguments = new LinkedList<String>();
arguments.add("build");
arguments.add(projectName);
arguments.add("-s");
arguments.add("-v");
CLI cli  = new CLI(new URL(url));
cli.upgrade();
int exit_code = cli.execute(arguments);
... 
```

如何为参数化的詹金斯构建指定构建参数？将 ie 添加`arguments.add("-p options.properties=system.props");`到列表中不起作用 /message is '

> -p options.properties=system.props 不是有效选项

'/

我试图在命令行中实现的上述工作正常 :::

```
java -jar jenkins-cli.jar -s http://localhost:8080/jenkins build mvn_project01 -p options.properties=system.props 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:14:45.100

回答我自己的问题::

显然参数和参数值必须作为单独的条目进入列表。下面的代码将使用 2 个参数异步调用远程 jenkins 构建，打印控制台输出并返回退出代码；

```
List<String> arguments = new LinkedList<String>();
arguments.add("build");
arguments.add(projectName);

arguments.add("-p");
arguments.add("options.properties=system.props");
arguments.add("-p");
arguments.add("anotherOption=optionValue");

arguments.add("-s");
arguments.add("-v");
CLI cli  = new CLI(new URL(url));
cli.upgrade();
int exit_code = cli.execute(arguments); 
```

# algorithm - 仅使用交换函数基于父数组对给定数组进行排序

> ID：14736126
> 
> 赞同：4
> 
> 时间：2013-02-06T18:24:00.837
> 
> 标签：algorithm

这是一个编码面试问题。我们得到一个数组say ，我们**只**`random_arr`需要使用swap函数对其进行排序。

 **此外，每个元素的交换次数`random_arr`也是有限的。为此，您将获得一个数组`parent_arr`，其中包含 的每个元素的交换次数`random_arr`。

约束：

1.  您应该使用交换功能。
2.  每个元素可以重复最少 5 次，最多 26 次。
3.  您不能将给定数组的元素设为 0。
4.  您不应该编写辅助函数。

现在我将解释如何`parent_arr`声明。如果`parent_arr`是这样的：

parent_arr[] = {a,b,c,d,...,z} 然后

```
a can be swapped at most one time.

b can be swapped at most two times. 
```

如果 parent_arr[] = {c,b,a,....,z} 那么

```
c can be swapped at most one time.

b can be swapped at most two times.

a can be swapped at most three times 
```

我的解决方案：

对于 random_arr[] 中的每个元素，如果它已排序，则存储它下面有多少元素。现在从 parent_arr[] 中选择具有最小交换计数的元素并检查它是否存在于 random_arr[] 中。如果是并且它已经发生了不止一次，那么它将有多个可以放置的位置。现在选择具有最大交换计数的位置（而不是该位置的元素，非常宝贵）并交换它。现在减少该元素的交换计数并对 parent_arr[] 进行排序并重复该过程。

但它的效率很低，其正确性无法得到证明。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:08:22.793

首先，让我们简化您的算法；那么让我们非正式地证明它的正确性。

### 修改算法

请注意，一旦您计算了排序序列中每个数字下方的元素数，您就有足够的信息来确定每组相等元素`x`在排序数组中的位置。例如，如果`c`重复 7 次并且前面有 21 个元素，则`c`s 将占据范围`[21..27]`（所有索引都是从零开始的；范围包括其末端）。

按照掉`parent_arr`期数量增加的顺序进行。对于每个元素`x`，找到其目标范围的开始`rb`；还要注意其目标范围的结束`re`。`random_arr` *现在遍历范围之外*的元素`[rb..re]`。如果您看到`x`，请将其交换到范围内。交换后，递增`rb`。如果你看到`random_arr[rb]`等于`x`，继续递增：这些`x`s 已经在正确的位置，你不需要交换它们。

### 正确性的非正式证明

现在让我们证明上述的正确性。请注意，一旦一个元素被交换到它的位置，它就再也不会移动了。当您到达 中的一个元素`x`时`parent_arr`，所有交换次数较少的元素都已被处理。通过构建算法，这意味着这些元素已经到位。假设`x`有`k`允许的交换数量。当您将它交换到它的位置时，您将另一个元素移出。

这个被替换的元素不可能，因为在目标范围内寻找目的地时`x`算法会跳过s 。此外，被替换的元素不能是 中*下面*的元素之一，因为下面的所有元素都已经在它们的位置，因此不能移动。这意味着被替换元素的交换计数必然或更多。因为当我们完成处理时，我们已经用尽了任何元素上的最多交换（这很容易通过归纳证明），我们交换出来以腾出空间的任何元素将至少有一个剩余的交换可以让我们交换当我们按照.`x``[rb..re]` *`x``parent_arr``x``k+1``x``k``x``parent_arr`***

# android - 仅在获取当前位置时才执行某些操作

> ID：14736137
> 
> 赞同：1
> 
> 时间：2013-02-06T18:24:43.790
> 
> 标签：android, android-mapview

我正在设计基于地图的应用程序，我想在获取用户位置后执行某些步骤（地图上已显示蓝点）。在某些设备上，由于位置服务启动过程，可能需要长达 1 分钟。所以问题是我如何知道 Android Map 何时设法获取我的位置，以便我可以开始执行其余的初始化过程？

我正在考虑`LocationListener`在收到位置时实现我自己的并触发回调，但是这个解决方案似乎毫无价值，因为我只需要知道当前位置已被获取并显示蓝点的点。我不关心位置更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:28:16.363

如果您在谈论地图上的蓝点，我想您将其添加`MyLocationOverlay`到地图中。如果是这样，有一种简单的方法可以做你想做的事 -`MyLocationOverlay`有`runOnFirstFix(Rannable)`接口，所以`Runnable`一旦地图获取你的当前位置，提供的就会运行：

```
this.currentLocationOverlay.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            //do your magic here
        }
    }); 
```

# mysql - MySql 从桌面游戏中找到玩家 X 的朋友

> ID：14736140
> 
> 赞同：1
> 
> 时间：2013-02-06T18:24:54.350
> 
> 标签：mysql, sql, logic

1）我需要：**“查找所有玩相同游戏的玩家 '55' 对于游戏 id 大于 2”**

表格如下图所示：

![在此处输入图像描述](../Images/dbbf529283c43d87f8615d5d351db1f2.png)

我尝试了很多语句，但它们产生了错误的结果：

```
SELECT Games.id, Players.id from Games, Players 
WHERE Players.id='55' and Games.id > 2; 
```

2）另外，如果我说我需要选择与以前相同的选项，您会怎么做，其中“**游戏的 id 只是降序排列的最后 2 个**”（即在这种情况下，只有 id 为 3 和 4 的游戏，但这可能其他情况不同）。我只能想到将 Games.id 与用户输入的数字进行比较，但你们中的一些人可能知道另一种方式......

有人能帮助我吗？谢谢！

**编辑**：

1)`SELECT b.id_player, b.id_game FROM Players a, Players b WHERE a.id_player = '55' AND b.id_game = a.id_game AND b.id_player <> '55' AND a.id_game > 2;`

2) 选项 1 适用于问题 1，但问题 2 需要一个对我不起作用的 TOP 子句。

我怎样才能使用 LIMIT 或 TOP 来达到相同的效果`a.id_game > 2`？我只想要最后 2 个 ID_GAME 的结果，在这种情况下是 id=3 和 id=4...

**编辑：** 没关系，我有第一个问题。我将把 LIMIT 设置为一个固定的数字。谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:32:22.537

```
SELECT Players.* 
FROM 
(SELECT id_game 
    FROM Players 
    WHERE id_player = 55 
    ORDER BY id_game DESC 
    LIMIT 2) 
AS A JOIN Players ON Players.id_game = A.id_game 
WHERE id_player <> 55 
```

编辑。子查询中的限制在mysql中还没有实现（原帖），mysql本身的替代方案是使用这样的查询，这次测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:57:04.530

你需要一个自我加入。我现在也无法测试这个 - 稍后会做一个 SQL 小提琴，但它应该是这样的：

```
SELECT b.id_player, b.id_game 
FROM Players a, 
     Players b 
WHERE a.id_player = '55' 
AND   b.id_game   = a.id_game 
AND   b.id_player <> '55' 
AND   a.id_game > 2
order by b.id_game
limit 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:50:07.963

这肯定会奏效。

```
SELECT a.* FROM Players a 
INNER JOIN (SELECT id,id_player,id_game 
            FROM players 
            WHERE id_game > 2 AND id_player = 55
           ) b 
ON a.id_game = b.id_game
WHERE a.id_player != 55; 
```

# php - 表单验证但不会将数据提交到数据库表

> ID：14736143
> 
> 赞同：0
> 
> 时间：2013-02-06T18:24:58.890
> 
> 标签：php, forms, validation, phpmyadmin, html-table

我正在做这个项目，它已经完成了，它是一个验证用户是否提交无效数据的表单，但由于某种原因，数据不会存储在表中，因此不会被发布回屏幕，我只是想知道是否有人能发现我哪里出错了，因为我已经看了一个多小时了。非常感谢。

下面是我的代码：

索引.php

```
<!Doctype html public>
<body>
<table cellpadding="5">
<td>
<h1> Games Club Website</h1>
<form action="process.php" method = "post"> 

 <tr>
                    <td class="label">
                        <label for="firstName">
                            First name
                        </label>
                    </td>
                    <td>
                        <input type="text"
                               name="firstName"
                               id="firstName"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('firstName');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('firstName');
                            ?>
                        </span>
                    </td>
                </tr>

                 <tr>
                    <td class="label">
                        <label for="lastName">
                           Surname
                        </label>
                    </td>
                    <td>
                        <input type="text"
                               name="lastName"
                               id="lastName"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('lastName');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('lastName');
                            ?>
                        </span>
                    </td>
                </tr>

                     <tr>
                    <td class="label">
                        <label for="email">
                           Email Address
                        </label>
                    </td>
                    <td>
                        <input type="text"
                               name="email"
                               id="email"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('email');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('email');
                            ?>
                        </span>
                    </td>
                </tr>

                     <tr>
                    <td class="label">
                        <label for="age">
                           Age
                        </label>
                    </td>
                    <td>
                        <input type="text"
                               name="age"
                               id="age"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('age');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('age');
                            ?>
                        </span>
                    </td>
                </tr>

<tr>
                    <td class="label">
                        <label>
                            Gender
                        </label>
                    </td>
                    <td>
                        <label for="genderMale">Male</label>
                        <input type="radio"
                               name="gender"
                               id="genderMale"
                               value="Male"
                               <?php
                               if (isset($validator))
                                   echo $validator->isChecked("gender", "Male");
                               ?>
                        />

                        <label for="genderFemale">Female?</label>
                        <input type="radio"
                               name="gender"
                               id="genderFemale"
                               value="Female"
                               <?php
                               if (isset($validator))
                                   echo $validator->isChecked("gender", "Female");
                               ?>
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('gender');
                            ?>
                        </span>
                    </td>
                </tr>

                <tr>
                    <td class="label">
                        <label>
                            What is your preferred gaming platform?
                        </label>
                    </td>
                    <td>
                        <label for="consoleXbox">Xbox 360</label>
                        <input type="radio"
                               name="console"
                               id="consoleXbox"
                               value="Xbox 360"
                               <?php
                               if (isset($validator))
                                   echo $validator->isChecked("console", "Xbox 360");
                               ?>
                        />

                          <label for="consolePs3">Playstation 3</label>
                          <input type="radio"
                               name="console"
                               id="consolePs3"
                               value="PS3"
                               <?php
                               if (isset($validator))
                                   echo $validator->isChecked("console", "PS3");
                               ?>

                        <label for="consoleWii">Nintendo Wii</label>
                        <input type="radio"
                               name="Console"
                               id="consoleWii"
                               value="Wii"
                               <?php
                               if (isset($validator))
                                   echo $validator->isChecked("console", "Wii");
                               ?>
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('console');
                            ?>
                        </span>
                    </td>
                </tr>

                 <tr>
                    <td class="label">
                        <label for="password1">
                           Enter a password:
                        </label>
                    </td>
                    <td>
                        <input type="password"
                               name="p1"
                               id="p1"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('p1');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('p1');
                            ?>
                        </span>
                    </td>
                </tr>

                 <tr>
                    <td class="label">
                        <label for="p2">
                           Confirm password:
                        </label>
                    </td>
                    <td>
                        <input type="password"
                               name="p2"
                               id="p2"
                               value="<?php
                                      if (isset($validator))
                                          echo $validator->getValue('p2');
                                      ?>"
                        />
                        <span class="error">
                            <?php
                            if (isset($validator))
                                echo $validator->getError('p2');
                            ?>
                        </span>
                    </td>
                </tr>

                <tr>
                    <td></td>
                    <td>
                        <input type="submit"
                               name="submitButton"
                               id="submitButton"
                               value="Confirm Registration" />

                        <input type="reset"
                               name="resetButton"
                               id="resetButton"
                               value="Clear Data"
                               style="margin-right: 20px;" />
                    </td>
                </tr>

</form>

</td>
</table>

</body>

</html> 
```

进程.php

```
<?php

require_once "FormValidator.php";

$validator = new FormValidator();

if ($validator->validate($_POST)) {
    require 'dao.php';
}
else {
    require 'index.php';
}

?> 
```

FormValidator.php

```
<?php
class FormValidator {
    private $valid;
    private $errors;
    private $data;

    public function __construct() {
        $this->valid = TRUE;
        $this->errors = array();
        $this->data = NULL;
    }

    public function validate($data) {
        $this->data = $data;

        if (empty($data['firstName'])) {
            $this->valid = FALSE;
            $this->errors['firstName'] = 'A <u>First Name</u> is required<br/>';
        }
        if (empty($data['lastName'])) {
            $this->valid = FALSE;
            $this->errors['lastName'] = 'A <u>Surname</u> is required.<br/>';
        }
        if (empty($data['p1'])) {
            $this->valid = FALSE;
            $this->errors['p1'] = 'A <u>Password</u> is required.<br/>';
        }
        if (empty($data['console'])) {
            $this->valid = FALSE;
            $this->errors['console'] = 'Please choose a <u>Console</u>.<br/>';
            }
        if (empty($data['p2'])) {
            $this->valid = FALSE;
            $this->errors['p2'] = 'Please <u>Confirm</u> password.<br/>';
        }
        if (empty($data['age'])) {
            $this->valid = FALSE;
            $this->errors['age'] = 'Please enter your <u>Age</u>.<br/>';
        }
         else if (!$this->isValidIntegerInRange($data['age'], 18, 100)) {
            $this->valid = FALSE;
            $this->errors['age'] = 'Invalid age. You also need to be at least 18 to sign up.<br/>';            
        }
        if (empty($data['email'])) {
            $this->valid = FALSE;
            $this->errors['email'] = 'Please enter a valid <u>email address</u>.<br/>';
        }
        else if (!$this->isValidEmail($data['email'])) {
            $this->valid = FALSE;
            $this->errors['email'] = 'Incorrect format (name@website.something is required)<br/>';            
        }
        if (empty($data['p2'])) {
            $this->valid = FALSE;
            $this->errors['p2'] = 'Please <u>Confirm</u> password.<br/>';
        }
        if (!empty($data['p1'])
                && !empty($data['p2'])
                && $data['p1'] !== $data['p2']) {
            $this->valid = FALSE;
            $this->errors['p2'] = 'Error, passwords <u>do not match</u> .<br/>';
        }
        if (empty($data['gender'])) {
            $this->valid = FALSE;
            $this->errors['gender'] = '<u>Please select a Gender.<u>';
        }

        return $this->valid;
    }

    public function getError($key) {
        $error = "";
        if (isset($this->errors[$key])) {
            $error = $this->errors[$key];
        }
        return $error;
    }

    public function getValue($key) {
        $value = "";
        if (isset($this->data[$key])) {
            $value = $this->data[$key];
        }
        return $value;
    }

    public function isChecked($key, $value) {
        $checked = "";
        if (isset($this->data[$key]) && $this->data[$key] === $value) {
            $checked = ' checked="checked"';
        }
        return $checked;
    }

    public function isSelected($key, $value) {
        $selected = "";
        if (isset($this->data[$key]) && $this->data[$key] === $value) {
            $selected = ' selected="selected"';
        }
        return $selected;
    }

    private function isValidEmail($email) {
        return (filter_var($email, FILTER_VALIDATE_EMAIL) !== FALSE);
    }

     protected function isValidIntegerInRange($integer, $min, $max) {
        $options = array(
            'options' => array(
                'min_range' => $min,
                'max_range' => $max,
            )
        );
        return (filter_var($integer, FILTER_VALIDATE_INT, $options) !== FALSE);
    }

}
?> 
```

道.php

```
<html>
<body>
<?php

//Make connection to the database
$host = "localhost";
$username = "root";
$password = "";
$database = "my_db";
$dsn = "mysql:host=$host;dbname=$database";

TRY {
$conn = new PDO( $dsn, $username, $password );
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

if (isset($_POST['submit'])) {
    $firstName = $_POST['firstName'];
    $lastName = $_POST['lastName'];
    $email = $_POST['email'];
    $age = $_POST['age'];
    $gender = $_POST['gender'];
    $console = $_POST['console'];
    $p1 = $_POST['p1'];
    $p2 = $_POST['p2'];

    if (isset($_POST['id'])) {
        //Updates the record
        $id = $_POST['id'];

        $sql = "UPDATE userprofile2 SET"
            . "firstName=".$conn->quote($fname)
            . "lastName=".$conn->quote($lastName)
            . "email=".$conn->quote($email)
            . "age=".$conn->quote($age)
            . "gender=".$conn->quote($gender)
            . "console=".$conn->quote($console)
            . "p1=".$conn->quote($p1)
            . "p2=".$conn->quote($p2)
            . "WHERE id = ".$conn->quote($id);
        $userprofile2 = $conn->query($sql);
    } else {

        // Inserts new values into table
        $sql = "INSERT INTO userprofile2(firstName, lastName, email, age, gender, console, p1, p2"
            . " ) VALUES ("
            . $conn->quote($firstName).","
            . $conn->quote($lastName).","
            . $conn->quote($email).","
            . $conn->quote($age).","
            . $conn->quote($gender).","
            . $conn->quote($console).","
            . $conn->quote($p1).","
            . $conn->quote($p2) . ")";
        $userprofile2 = $conn->query($sql);
    }
} elseif (isset($_GET['ID'])) {

    // edit mode, allows user to change a selected parameter in the table (Not working)
    $userEditDataRows = $conn->query('SELECT * FROM userprofile2 WHERE ID ='.$conn->quote($_GET['ID']));
    if (sizeof($userEditDataRows)>0) {
       // $row = $userEditDataRows[0];
        $firstName = $row['firstName'];
        $lastName = $row['lastName'];
        $email = $row['email'];
        $age = $row['age'];
        $gender = $row['gender'];
        $console = $row['console'];
        $console = $row['p1'];
        $console = $row['p2'];
        $ID = $_GET['ID'];
    }

} else {
    //Set the empty values for fields that haven't been filled in
    $firstName = '';
    $lastName = '';
    $email = '';
    $age = '';
    $gender = '';
    $console = '';
    $p1 = '';
    $p2 = '';
    $ID = false;
}
    //construct the table
    $sql = "SELECT * FROM userprofile2";
    $userprofile2 = $conn->query($sql);
    $table = '<table>';
    $table .= '<tr>';
    $table .= '<th>  ID  </th>
               <th>  First Name  </th>
               <th>  Last Name  </th>
               <th>  Email Address  </th>
               <th>  Age  </th>
               <th>  Gender  </th>
               <th>  Console  </th>
               <th>  Password  </th>
               <th>  Password (Confirmed)  </th>';

    $table .= '</tr>';
    foreach ($userprofile2 as $userprofile2) {

        $table .= '  <tr>';
        $table .= '  <td>' . $userprofile2['id'] ." ".  '</td>';
        $table .= '  <td>' . $userprofile2['firstName'] . '</td>';
        $table .= '  <td>' . $userprofile2['lastName'] . '</td>';
        $table .= '  <td>' . $userprofile2['email'] . '</td>';
        $table .= '  <td>' . $userprofile2['age'] . '</td>';
        $table .= '  <td>' . $userprofile2['gender'] . '</td>';
        $table .= '  <td>' . $userprofile2['console'] . '</td>';
        $table .= '  <td>' . $userprofile2['p1'] . '</td>';
        $table .= '  <td>' . $userprofile2['p2'] . '</td>';
        $table .= '  </tr> ';
    }

    $table .= '</table>';

} catch (PDOException $e) {
    exit("Connection failed: " . $e->getMessage());
    //catches errors and prints them to screen
}
?>

<h2>Thank you <?php echo $_POST["firstName"]; // confirmation of a successful
 //entry ?>, your details have been stored!<br /></h2>
<u><h1>Here are the contents of your database:</h1></u>
<?php echo $table ?>

</br>

<a href="index.php">Click Here</a> to go back to the form. </br>

<html>
<body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:28:55.643

我认为问题是`$_POST['id']`。它没有在任何地方定义，因此由于以下代码块，它没有机会插入：

`if (isset($_POST['id'])) {`

尝试`$_GET['id']`改用：

`if (isset($_GET['id'])) {`

# sql - SQL 错误代码：1242 / 如何在表中转换我的代码？

> ID：14736144
> 
> 赞同：0
> 
> 时间：2013-02-06T18:25:04.430
> 
> 标签：sql

我大家，尽管阅读了许多文档和网页，但我不知道如何使我的代码工作。

```
select
(select count(*) from toto where (ddate between '2012-01-01' and '2012-12-31') group by produit) "2012",
(select count(*) from toto where (ddate between '2011-01-01' and '2011-12-31') group by produit) '2011',
(select count(*) from toto where (ddate between '2010-01-01' and '2010-12-31') group by produit) '2010' 
```

我有一条 SQL 错误代码：1242 消息。是的，这很正常，因为我确实有超过 1 行要返回。

我怎么能处理它？使用 PIVOT 吗？但是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:29:56.163

尝试这个;

```
select produit, 
sum(case when ddate between '2012-01-01' and '2012-12-31' then 1 else 0 end) as '2012',
sum(case when ddate between '2011-01-01' and '2011-12-31' then 1 else 0 end) as '2011',
sum(case when ddate between '2010-01-01' and '2010-12-31' then 1 else 0 end) as '2010'
from toto
where ddate between '2010-01-01' and '2012-12-31'
group by produit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:42:11.620

您可以使用以下内容来*透视*数据：

```
select produit,
    COUNT(case when ddate = '2012' then produit end) as Year_2012,
    COUNT(case when ddate = '2011' then produit end) as Year_2011,
    COUNT(case when ddate = '2010' then produit end) as Year_2010
from 
(
    select produit,
        year(ddate) ddate
    from toto
    where ddate between '2010-01-01' and '2012-12-31'
) src
group by produit 
```

# asp.net - asp.net 4.0 会话未在浏览器关闭时终止

> ID：14736148
> 
> 赞同：0
> 
> 时间：2013-02-06T18:25:13.400
> 
> 标签：asp.net

我有一个使用表单身份验证的 asp.net 4.0 网页。一切正常，但是我不确定 asp.net 是否应该自动执行此操作，但是当我在登录后关闭浏览器时，当我再次打开时，它会将我带到经过身份验证的页面。浏览器关闭时不应该破坏会话吗？如果不是通过终止会话或类似的东西来提供安全性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:34:03.940

ASP.NET 会话不会通过简单地关闭浏览器而结束。ASP.NET 通过将 cookie 写入浏览器来维护您的会话 ID（假设您没有将其设置为无[cookie 会话](http://msdn.microsoft.com/en-us/library/aa479314.aspx)）。默认情况下，您的会话设置为超时**20 分钟**。这意味着，一般来说，您的会话将在该 cookie 的持续时间内可供该浏览器使用。

作为一项安全措施，可以在您的站点上提供某种*注销*功能。然后可以调用[Session.Abandon](http://msdn.microsoft.com/en-us/library/ms524310%28VS.90%29.aspx)来终止你的会话。

# c# - WebApi AuthorizationFilterAttribute：ActionArguments 为空

> ID：14736149
> 
> 赞同：6
> 
> 时间：2013-02-06T18:25:14.477
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我正在为 WebApi 控制器实现 AuthorizationFilterAttribute，但我似乎无权访问传递给控制器​​的参数：

在 MVC4 中，这可以正常工作：

```
public class MyMVCController : Controller
{
    [CanAccessMyResourceApi]
    public MyViewModel Get(int id)
    {
       //...
    }
}

public class CanAccessMyResourceMVCAttribute : CanAccessAttributeBase
{
   public override void OnAuthorization(AuthorizationContext filterContext)
   {
       var param = filterContext.Controller.ValueProvider.GetValue("id")
       /// ... 
   }
} 
```

但是在WebAPI中，我认为参数应该在ActionArguments中，但是这里的“param”是空的：

```
public class MyWebApiController : ApiController
{
   [CanAccessMyResourceWebApi]
   public MyViewModel Get(int id)
   {
      //...
   }

}

public class CanAccessMyResourceWebApiAttribute : AuthorizationFilterAttribute 
{
    public override void OnAuthorization(HttpActionContext filterContext)
    {       
        // the debugger shows that ActionArguments is empty:
        var param = filterContext.ActionArguments["id"]
        /// ...
    }
} 
```

传递给控制器​​的参数是否在其他地方可用？（当我删除过滤器属性时，我验证了控制器的操作正确地获取了 Id 值。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T19:49:55.793

你看过**[这个](https://stackoverflow.com/questions/12817202/accessing-post-or-get-parameters-in-custom-authorization-mvc4-web-api)**StackOverflow 页面的解决方案了吗？

具体来说：

```
var variable = HttpContext.Current.Request.Params["parameterName"];

public class CustomAuthorizeAttribute : AuthorizeAttribute
  {
     protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext)
     {
        var clientId = actionContext.ControllerContext.RouteData.Values["clientid"];

     }
  } 
```

希望这有帮助！

# r - 重塑需要帮助

> ID：14736151
> 
> 赞同：1
> 
> 时间：2013-02-06T18:25:20.480
> 
> 标签：r, reshape, reshape2

我正在尝试将我的数据从展览 A 中的表格重塑为展览 B 中的表格。我尝试按每三列重塑和循环数据并附加数据集，但不能完全到达那里。我该如何重塑这个？

```
A   AFG1    AFG2    AFG3    US1 US2 US3 t
    5   7   9   3   4   5   1980
    6   8   10  4   6   5   2000

B   1   2   3   t   xtry        
    5   7   9   1980    AFG     
    6   8   10  2000    AFG     
    3   4   5   1980    US      
    4   6   5   2000    US 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:49:01.220

假设你`data.frame`被称为“mydf”，试试这个：

```
reshape(mydf, direction = "long",
        idvar = "t",
        varying = 1:6,
        v.names = c("1", "2", "3"), 
        times = c("AFG", "US"),
        timevar = "xtry")
#             t xtry 1 2  3
# 1980.AFG 1980  AFG 5 7  9
# 2000.AFG 2000  AFG 6 8 10
# 1980.US  1980   US 3 4  5
# 2000.US  2000   US 4 6  5 
```

* * *

对于您的问题，您的论点必须比简单的`reshape`问题更详细一点，因为您的变量的命名与 R 所期望的不同（其形式为`1.AFG`,`2.AFG`等）。

例如：

```
mydf2 <- mydf
names(mydf2) <- gsub("([A-Z]+)([0-9]+)", "\\2\\.\\1", names(mydf2)) 
```

如果您的姓名如下所示：

```
names(mydf2)
# [1] "1.AFG" "2.AFG" "3.AFG" "1.US"  "2.US"  "3.US"  "t" 
```

`reshape`命令更直接一些。

```
reshape(mydf2, direction = "long", idvar = "t",
        timevar = "xtry", varying = 1:6) 
```

* * *

### 重塑2

如果您正在寻找“reshape2”解决方案，我实际上发现它比使用基本 R 的`reshape`函数要多一些工作（通常是相反的）。这是我想出的：

首先，`melt`数据集。

```
library(reshape2)
mydf_m <- melt(mydf, id.vars="t")
head(mydf_m)
#      t variable value
# 1 1980     AFG1     5
# 2 2000     AFG1     6
# 3 1980     AFG2     7
# 4 2000     AFG2     8
# 5 1980     AFG3     9
# 6 2000     AFG3    10 
```

这个“变量”列在当前形式下对我们来说毫无用处，所以让我们修复它。

```
mydf_m <- cbind(mydf_m, 
                colsplit(gsub("([A-Z]+)([0-9]+)", 
                              "\\1_\\2", mydf_m$variable), 
                         "_", c("xtry", "var"))) 
```

这是数据现在的样子。

```
head(mydf_m)
#      t variable value xtry var
# 1 1980     AFG1     5  AFG   1
# 2 2000     AFG1     6  AFG   1
# 3 1980     AFG2     7  AFG   2
# 4 2000     AFG2     8  AFG   2
# 5 1980     AFG3     9  AFG   3
# 6 2000     AFG3    10  AFG   3 
```

现在是简单的部分。

```
dcast(mydf_m, t + xtry ~ var)
#      t xtry 1 2  3
# 1 1980  AFG 5 7  9
# 2 1980   US 3 4  5
# 3 2000  AFG 6 8 10
# 4 2000   US 4 6  5 
```

# php - MySQL PHP printf 到 $variable 添加附加值

> ID：14736154
> 
> 赞同：0
> 
> 时间：2013-02-06T18:25:30.113
> 
> 标签：php, mysql

我正在经历一些奇怪的事情，我无法弄清楚它为什么会发生。我正在运行查询以从 mysql 表中的列中提取数据，当我执行直接操作时`printf()`，数据按预期输出。但是，当我这样做时`$variable = printf()`，我会在字符串中获得一个附加值。

以下打印类似：22611,21435,23327,22876,22986,23692,21581,21832,22337,24313,22174,24368,

```
$query  = "SELECT column FROM table WHERE year in (2012)";
if ($result = mysqli_query($connect, $query)) {
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s,", $row["column"]);
    }
} 
```

但是，如果我尝试将结果放入这样的变量中：

```
$data = printf ("%s,", $row["column"]); 
```

我得到 22611,21435,23327,22876,22986,23692,21581,21832,22337,24313,22174,24368,6 的输出

为什么要增加这个额外的价值？我是否将结果错误地添加到变量中？仅供参考，这只是代码中的一个片段，我有错误处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:26:34.120

改为使用`sprintf()`（它的工作原理与 完全一样`printf()`）。这使它“沉默”并给出返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:28:50.133

`printf()`输出数据并返回其长度。这就是额外价值的来源。你想要`sprintf()`它只返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T18:33:13.300

只是出于好奇，你为什么要使用`sprintf()`？

您可以直接或使用字符串连接将值分配给变量。

```
$data = $row["column"];
$data = $row["column"] . ','; 
```

阅读更多关于[PHP 中的字符串](http://php.net/manual/en/language.types.string.php)。

在这种特定情况下，我会推荐[`implode()`](http://php.net/implode).

```
$data = array();
while ($row = mysqli_fetch_assoc($result)) {
    $data[] = $row["column"];
}
echo implode(',', $data); 
```

# android - Android RC2 加密

> ID：14736155
> 
> 赞同：0
> 
> 时间：2013-02-06T18:25:32.727
> 
> 标签：android, encryption, encryption-symmetric, rc2-cipher

我正在为一个相当古老的 web 服务制作一个 Android 客户端。Web 服务要求我以 RC2 样式对发送给它的一些数据进行加密。我无法获得任何东西（Cipher、KeyFactory、KeyGenerator 等），甚至无法获得 RC2 实现。

我无法更改 web 服务，所以我坚持使用 RC2 加密（我知道它较旧并且不是真正的首选）。

我可以在 java/android 库中使用任何实现吗？我更喜欢使用内置组件，但如果需要，我愿意使用第三方库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:29:45.393

充气城堡是一个不错的选择。您可能希望从有弹性的轻量级 API 中提取 RC2 代码，并将其直接放入您的代码库中以确保资源安全。Bouncy Castle获得了*非常*宽松的许可......

# ios - 在 iOS 中使用 AVAudioPlayer 播放声音错误

> ID：14736156
> 
> 赞同：0
> 
> 时间：2013-02-06T18:25:37.330
> 
> 标签：ios, objective-c, audio, avfoundation, playback

尝试在我的 iPhone 应用程序中播放声音时出现大错误。

这是用来播放声音的功能（从其他问题复制）：

```
-(BOOL) playSoundFXnamed: (NSString*) vSFXName Loop: (BOOL) vLoop
{
    NSError *error;
    NSBundle* bundle = [NSBundle mainBundle];
    NSString* bundleDirectory = (NSString*)[bundle bundlePath];
    NSURL *url = [NSURL fileURLWithPath:[bundleDirectory stringByAppendingPathComponent:vSFXName]];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

    if(vLoop)
        audioPlayer.numberOfLoops = -1;
    else
        audioPlayer.numberOfLoops = 0;

    BOOL success = YES;

    if (audioPlayer == nil)
    {
        success = NO;
    }
    else
    {
        success = [audioPlayer play];
    }

    return success;
} 
```

我用以下方式播放声音：

```
 [self playSoundFXnamed:@"Terror01.mp3" Loop: NO]; 
```

这是一个大错误：

```
Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-06 15:16:28.076 SoundLibDibam[68930:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
      Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-06 15:16:28.098 SoundLibDibam[68930:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-06 15:16:28.110 SoundLibDibam[68930:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-06 15:16:28.131 SoundLibDibam[68930:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-02-06 15:16:28.143 SoundLibDibam[68930:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

# ruby - 人偶错误：重复定义

> ID：14736168
> 
> 赞同：0
> 
> 时间：2013-02-06T18:26:48.233
> 
> 标签：ruby, puppet

在课堂上，我想这样做：

```
stop a service
reinstall a package
start the previous service again 
```

这是我的课：

```
class MyClass{
    service{"ServiceName-start":
      name => "ServiceName",
      ensure => "stopped",
    }
    package{"PackageName":
        ensure => "installed",
        require => Service["ServiceName-Start"],
    }
    service{"ServiceName-Stop":
      name =>  "ServiceName",
      ensure => "running",
      require => Package["PackageName"]
    }
} 
```

我收到了这个错误：

> 重复定义：Service[ServiceName] 已在文件 /puppet/mycsass.pp 第 2 行定义；无法在 /puppet/myclass.pp:9 处重新定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:59:09.580

不幸的是，它似乎不像你想的那么简单。[这里简单解释一下Puppet用户组的问题。](https://groups.google.com/d/msg/puppet-users/UKTCghrs1Sw/jNoF4TFuP28J%20%22A%20brief%20explanation%20from%20the)

这句话总结了这篇文章：

> Puppet 不是脚本引擎，它的语言也不是脚本语言。您*可以*在 Puppet 中编写脚本，但它很麻烦。Puppet 是关于实现和维护系统资源的特定状态，有意淡化从这里到那里的机制。因此，“我如何让 Puppet 表演？” 很少是一个有用的问题。

帖子作者还提供了一个替代方案（虽然不太吸引人的解决方案），我已针对您的示例进行了调整：

```
class MyClass {
  exec { "ServiceName-Stop":
    command => "/bin/sh -c '/sbin/service ServiceName stop",
  }
  package{"PackageName":
    ensure => "installed",
    require => Service["ServiceName-Stop"],
  }
  service{"ServiceName-Start":
    name =>  "ServiceName",
    ensure => "running",
    require => Package["PackageName"]
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:05:33.863

虽然我不确定，但虚拟资源可能在这里有用......我正在使用的两个 .pp 文件的当前结构如下：

```
/etc/puppet/modules/testmodule/manifests/init.pp
/etc/puppet/modules/testmodule/manifests/test.pp 
```

init.pp 看起来像这样；我已将 mysqld 用于该服务。

```
class testmodule {

  @service { "mysqld" :
    ensure => stopped,
  }

} 
```

test.pp 看起来像这样；

```
class testmodule::test inherits testmodule {

  realize(Service["mysqld"])

  package { "mysql" :
    ensure => installed,
    notify => Service["mysqld"],
  }

  Service["mysqld"] {
    ensure => running,
  }

  realize(Service["mysqld"])

} 
```

在您的 site.pp 中，您可以执行以下操作：

```
node 'my_nodename.com' {
   include testmodule::test
} 
```

希望这可以帮助....

# ruby-on-rails - 为什么这种方法实际上不会影响 SQL 查询？

> ID：14736171
> 
> 赞同：1
> 
> 时间：2013-02-06T18:26:55.753
> 
> 标签：ruby-on-rails, ruby

我有一个方法，旨在根据一组标准从数据库中返回许多项目：

```
scope :expired_not_marked, lambda { |client|
items = where('items.status > 0 AND items.expires_at < ? AND items.expired_at IS NULL AND (winning_bid_id IS NULL OR winner_id IS NULL)', Time.now)
unless client.nil?
    items.where('items.client_id = ?', client.id)
end
} 
```

它被称为`Item.expired_not_marked nil`. 当我从 IRB 运行它时，我得到了很多结果，但它显示 SQL 查询被执行为：

```
SELECT `items`.* FROM `items` 
```

很明显，这不是原作者的意图。结果，相同的项目被一遍又一遍地处理。

为什么这个坏了，我该如何修复它。where 子句似乎是正确的。上述方法在`item.rb`模型内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:52:30.250

您的问题是您`lambda`有时会返回`nil`，而返回的范围`nil`不会做任何有用的事情。

将`lambda`返回其最后一个表达式的值。在您的情况下，该表达式将是`unless`. 所以如果`client`不是`nil`，它将返回：

```
items.where('items.client_id = ?', client.id) 
```

一切都会好的。但如果`client.nil?`为真，`unless`则将评估为`nil`并且您的范围将返回`nil`。我认为你最好用这样的东西：

```
scope :expired_not_marked, lambda { |client|
  items = where('items.status > 0 AND items.expires_at < ? AND items.expired_at IS NULL AND (winning_bid_id IS NULL OR winner_id IS NULL)', Time.now)
  unless client.nil?
    items = items.where('items.client_id = ?', client.id)
  end
  items
} 
```

这样，您始终拥有清晰、明确且定义明确的返回值。

* * *

[ActiveRecord 查询接口指南](http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments)建议您对带有参数的范围使用类方法：

> 使用类方法是接受范围参数的首选方式。

`lambda`所以如果方法太吵，你也可以这样做：

```
def self.expired_not_marked(client)
  items = where('items.status > 0')
  items = items.where('items.expires_at < ?', Time.now)
  items = items.where('items.expired_at IS NULL')
  items = items.where('winning_bid_id IS NULL OR winner_id IS NULL')
  unless client.nil?
    items = items.where('items.client_id = ?', client.id)
  end
  items
} 
```

当然，您不必使用类方法。而且您不必将查询分解`where`为每个组件的一堆小调用，但这样阅读可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:52:50.030

lambda 始终没有返回任何内容。如果没有显式`return`语句，则 lambda 的最后一个计算表达式将是它的返回值。

```
scope :expired_not_marked, lambda { |client|
  items = where('items.status > 0 AND items.expires_at < ? AND items.expired_at IS NULL AND (winning_bid_id IS NULL OR winner_id IS NULL)', Time.now)
  unless client.nil?
    items.where('items.client_id = ?', client.id)
  end
  items
} 
```

如果我写这个，我会建议一个`scoped`对象。这将确保只执行一个 SQL 查询。

```
scope :expired_not_marked, lambda { |client|
  items = Items.scoped.where('items.status > 0 AND items.expires_at < ? AND items.expired_at IS NULL AND (winning_bid_id IS NULL OR winner_id IS NULL)', Time.now)
  items = items.where('items.client_id = ?', client.id) unless client.nil?
  items.all
} 
```

# java - 使用 Java 运行管道脚本

> ID：14736176
> 
> 赞同：0
> 
> 时间：2013-02-06T18:27:37.267
> 
> 标签：java, shell, process

我正在尝试这样做

```
echo "ls|head -3"|/bin/sh 
```

在爪哇。

重要的一点是我想即时创建脚本字符串并使用该脚本运行一个 shell 进程并捕获脚本标准输出。

上面的代码不起作用并挂起，可能在输入流上。

```
 Process p = Runtime.getRuntime().exec("/bin/sh");

        final OutputStream out = p.getOutputStream();
        final BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));

        final String cmd = "ls|head -3";

        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    out.write(cmd.getBytes());
                    out.flush();
                } catch (IOException ex) {
                }
            }
        }).start();

        final List list = new ArrayList();

        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    String line;
                    while ((line = in.readLine()) != null) {
                        list.add(line);
                    }
                } catch (IOException ex) {
                }
            }
        }).start();

        System.err.println("running ...");
        p.waitFor();

        System.err.println(list);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:34:57.390

您的输出流需要先关闭，然后输入流上才会有数据。关闭输出流向进程确认不会有进一步的输入。只有这样，它才会开始处理并输出到您的输入流。

在调用“flush”之后，尝试在第一个线程中添加以下代码：

```
out.close(); 
```

# git - git 检查错误路径规范

> ID：14736181
> 
> 赞同：0
> 
> 时间：2013-02-06T18:27:51.680
> 
> 标签：git, git-checkout

我是 git 和 ruby​​ on rails 的新手，我正在尝试用 git 恢复前几天的工作，所以我输入“git log”，我可以在我的应用程序目录中看到我的存储库“提交”：

```
commit 016a8807427c46087762b56e1ea02abc
Author: Antonio 
Date:   Mon Feb 4 11:32:32 2013 +0100

    session errors

commit cc3c292ffd110414cf4db54c5b976f2f
Author: Antonio 
Date:   Sun Feb 3 21:02:59 2013 +0100

    hw2_c

commit af2a509d462e454d0315c63ce98ad6d0
Author: Antonio 
Date:   Sun Feb 3 20:34:55 2013 +0100

    hw2_elementsId

commit 2314687a32c7f56ff8fc8557d95af3df
Author: Antonio 
Date:   Sun Feb 3 20:25:23 2013 +0100

    hw2_b 
```

但是当我尝试检查任何提交时，我总是收到相同的错误消息：

```
git checkout hw2_c

error: pathspec 'hw2_c' did not match any file(s) known to git. 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:28:59.250

您不能通过其消息检查提交。您需要使用哈希检查：

```
git checkout cc3c292ffd110414cf4db54c5b976f2f 
```

如果您想要一个符号名称，请在该哈希处创建一个分支或标记：

```
git branch hw2_c cc3c292ffd110414cf4db54c5b976f2f
git tag hw2_c cc3c292ffd110414cf4db54c5b976f2f 
```

# javascript - Log4Javascript AjaxAppender 请求标头

> ID：14736191
> 
> 赞同：0
> 
> 时间：2013-02-06T18:28:16.783
> 
> 标签：javascript, logging, log4javascript

我正在尝试使用 log4javascript 的 ajaxAppender 向我的应用程序中的服务器发送一批消息。

这就是我初始化日志记录的方式：

```
 var log = log4javascript.getDefaultLogger();
    log.info('Logging initialized');
    var ajaxAppender = new log4javascript.AjaxAppender("http://localhost:8080/mobile2/logger/logme.json");

    ajaxAppender.addHeader("Content-Type","application/json;charset=utf-8");
    ajaxAppender.setBatchSize(10);
    var jsonLayout = new log4javascript.JsonLayout(false,true);
    ajaxAppender.setLayout(jsonLayout);

    log.info(jsonLayout.getContentType());

    log.addAppender(ajaxAppender); 
```

我在服务器上使用 spring 及其 @RequestBody 标记来读取 json 对象。

这适用于我的其他服务器请求，但是在使用 ajaxAppender 时它总是失败并出现此错误；严重：servlet spring 的 Servlet.service() 抛出异常 java.lang.IllegalArgumentException: Invalid token character ',' in token "x-www-form-urlencoded, application/json"

我能看到的唯一区别是，当我检查请求标头时，用于记录的标头具有以下内容类型： Content-Type: application/x-www-form-urlencoded, application/json;charset=UTF-8

而我的其他 json 请求只有第二个字符串 'application/json;charset=UTF-8'

是否可以在没有第一个内容类型的情况下发送 ajax？不知道还有什么可以尝试的。

谢谢

# c++ - 使用 Bison / Antlr / Packrat / Elkhound / 编写 LLVM JIT Parser

> ID：14736194
> 
> 赞同：9
> 
> 时间：2013-02-06T18:28:32.827
> 
> 标签：c++, parsing, compiler-construction, llvm, bison

在[LLVM 教程](http://llvm.org/docs/tutorial/LangImpl4.html)中有说明如何编写简单的 JIT 编译器。不幸的是，本教程中的词法分析器和解析器是手动编写的。我在想，这样的解决方案有利于学习，但不适合编写复杂的、生产就绪的编译器。不过，GCC 和其他一些“大型编译器”似乎是手写的。但我认为，在编写自己的编译器时，所有这些解析器生成器都会大大提升（尤其是当你独自完成，没有团队的时候）。

是否可以将任何现有的解析器生成器（如 Bison / Antlr / Packrat / Elkhound 等）与 LLVM 一起使用来创建 JIT 编译器？我希望能够不断地（不是一开始就）向解析器“提供”表达式并在运行时编译它们。

另外我发现了很多关于“最好的、现代的”解析器生成器的问题（比如这个：[https](https://stackoverflow.com/questions/428892/what-parser-generator-do-you-recommend) ://stackoverflow.com/questions/428892/what-parser-generator-do-you-recommend ）。如果可以使用这些工具来创建 LLVM JIT 编译器，我将感谢任何额外的提示和建议，在这种特殊情况下，哪种工具在性能和灵活性方面最好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T01:05:44.097

使用像 bison 或 antlr 这样的解析器生成器有很多优点，尤其是在开发语言时。毫无疑问，您最终会在进行过程中对语法进行更改，并且您最终会希望获得最终语法的文档。从文档中自动生成语法的工具非常有用。它们还可以帮助您确信该语言的语法是 (a) 您认为的那样，并且 (b) 没有歧义。

如果您的语言（与 C++ 不同）实际上是 LALR(1)，甚至更好的是 LL(1)，并且您正在使用 LLVM 工具来构建 AST 和 IR，那么您可能需要做的不仅仅是编写了解语法并提供一些简单的操作来构建 AST。这会让你坚持一段时间。

人们最终选择构建自己的解析器的通常原因，除了“真正的程序员不使用解析器生成器”的偏见之外，是不容易为语法错误提供良好的诊断，尤其是使用 LR(1) 解析。如果这是您的目标之一，您应该尝试使您的语法 LL(k) 可解析（使用 LL(k) 提供良好的诊断仍然不容易，但似乎更容易一些）并使用 LL(k)像 Antlr 这样的框架。

还有另一种策略，即首先使用比 LL(1) 更灵活的 LALR(1) 解析器以最简单的方式解析程序文本，甚至无需尝试提供诊断。如果解析失败，您可以使用较慢的甚至可能回溯的解析器再次解析它，该解析器不知道如何生成 AST，但会跟踪源位置并尝试从语法错误中恢复。在不使 AST 失效的情况下从语法错误中恢复比仅仅继续解析更加困难，因此不尝试有很多话要说。此外，跟踪源位置真的很慢，如果您不必生成诊断信息（除非您需要它来添加调试注释），它就不是很有用，因此您可以通过不打扰来加快解析速度位置跟踪。

Personally, I'm biased against packrat parsing, because it's not clear what the actual language parsed by a PEG is. Other people don't mind this so much, and YMMV.

# python - 在python中显示pool.map操作的进度

> ID：14736195
> 
> 赞同：1
> 
> 时间：2013-02-06T18:28:37.617
> 
> 标签：python, multiprocessing

我实现`pool.map`了`multiprocessing`一长串独立且非常昂贵的操作，如我之前的问题中所述，[在 python 的多个核心上分发许多独立的、昂贵的操作](https://stackoverflow.com/questions/14723458/distribute-many-independent-expensive-operations-over-multiple-cores-in-python)。

即使有多个内核，这项工作也可能需要几个小时。我想提供一些关于操作进度的简单视觉提示。为了进行实验，我尝试从映射函数中打印列表中每个项目的 ID 号，但 1）在 IDE 中，直到所有操作完全完成（问题较少）才会显示，2）操作未完成按顺序（更成问题）。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:36:03.580

```
from threading import *
from time import sleep

class worker(Thread):
    def __init__(self, params = None):
        Thread.__init__(self)

        self.params = params
        self.status = 0.0
        self.start()

    def run(self):
        while self.status < 1.0:
                    # <--- This would be where you execute
                    #      your demanding/costly operations
                    # Also, update your status (progress)
            self.status += 0.1
            sleep(0.1)

x = worker()
y = worker()

while x.status < 1.0 and y.status < 1.0:
    print 'X status:', x.status
    print 'Y status:', x.status 
```

**注意：** 1.0 的计数器限制只是为了给你一个演示。在现实生活中的操作中，您只需让线程要么通过一个 enldess 循环永远活着，要么让 run() 函数进行计算，然后在您检索到所需的值后死亡，您可以将其存储在类似的`self.status`变量的方式。

# jsf-2 - p:selectOneMenu 第一次使用时“拒绝”选择

> ID：14736205
> 
> 赞同：1
> 
> 时间：2013-02-06T18:29:04.333
> 
> 标签：jsf-2, primefaces

我有这种奇怪的情况，当我第一次访问包含此代码的页面时，每当我选择任何值时，控件都会从所选值闪烁并返回到第一个值 - 如果存在，则不调用侦听器。从那时起，一切正常。

这些值是字母 az 加上一个空的非空字符串。

用tomcat 7运行它

谢谢

**启动器.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:body >
        <ui:composition template="/paginas/comun/layout.xhtml">
            <ui:define name="contenido">            
                <ui:insert name="funcionalidad" >
                    <ui:include src="_launcher.xhtml" />
                </ui:insert>     
            </ui:define>
        </ui:composition>    
    </h:body>
</html> 
```

**_launcher.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:form id="form">   
    <p:panel 
    header="faster than the speed of love"
    id="ulricso">

    <p:selectOneMenu                   
            value="#{direccionPuntualBean.letra11}">
                <p:ajax
                process="@all"
                update="@form"/>
                <f:selectItems value="#{direccionPuntualBean.letras}"/>
            </p:selectOneMenu>                      
    </p:panel>      

    </h:form>           

</html> 
```

**豆类摘录**

```
public List<String> getLetras() {
        List<String> ls = new ArrayList<String>();
        ls.add("");
        for (int i = 65; i <= 90; i++) {
            ls.add(new String("" + (char)i));
        }
        return ls;
    } 
```

# ios - 关闭 UISearchBar

> ID：14736206
> 
> 赞同：1
> 
> 时间：2013-02-06T18:29:17.740
> 
> 标签：ios, uisearchbar

我有运行`searchBarCancelButtonClicked:`的代码我想在用户点击离开搜索栏时运行相同的代码，即使不一定点击取消。我当前的代码如下，但有一个我无法弄清楚的问题。我在搜索栏下方放置了一个 UIView，单击该 UIView 会运行我想要的方法。

问题是，当搜索栏处于活动状态时，与 uisearchbar 关联的半透明视图出现在我的视图之上，单击该视图仍然只是关闭搜索栏，但不运行我的方法。关闭搜索栏后，单击视图确实会运行我的方法，所以我知道没关系。基本上，当搜索栏是第一响应者时，我需要能够使视图手势处于活动状态。

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar*)searchBar {
    UITapGestureRecognizer* singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissSearch:)];
    UIView *transparentView = [[UIView alloc]initWithFrame:transparentViewRect];
    [transparentView setBackgroundColor:[UIColor blackColor]];
    [transparentView addGestureRecognizer:singleTap];
    [self.view addSubview:transparentView];
    [self.view bringSubviewToFront:transparentView];

    return  YES;

}

- (void) dismissSearch:(UITapGestureRecognizer *)tapGesture
{
  //Run my code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:07:09.193

我想您可能可以使用`searchBarShouldEndEditing:`or`searchBarTextDidEndEditing:`委托方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T18:43:07.003

要解决上述问题（当在 UITablewView 上点击带有搜索结果的单元格时），请在`searchBarShouldEndEditing: or searchBarTextDidEndEditing:`方法上使用此条件：

```
- (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar
{
  if (self.searchDisplayController.searchResultsTableView.hidden) {
        self.searchBar.hidden = true;
  }

  return true;
} 
```

# ios - iOS + 蓝牙 - 怎么办？

> ID：14736210
> 
> 赞同：0
> 
> 时间：2013-02-06T18:29:34.300
> 
> 标签：ios, bluetooth

我是 iOS 开发的新手，我有几个关于我需要做的项目的问题。

首先，我的问题是要使用蓝牙设备创建单个硬件，它将为任何通过蓝牙连接到它的 iOS 设备或安卓设备发送信息......所以这是我的问题：

1) 我需要什么样的蓝牙硬件？BLE 4.0？或者我可以使用与 2.1 和 3.0 设备通信的普通设备？我需要保证 iPhone 4S 和更高版本可以正常工作，并且不会对安卓通信造成任何问题。

2）我需要什么来开发？我有一台 MacBook Pro，是否需要适配器才能使用 iOS 5 模拟器的 ble 4.0？还是mac的蓝牙可以处理？

3) 我的硬件是否可以发送旧版和最新版 iOS 的信息？

对不起任何愚蠢的问题，我几天前才开始开发..

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:26:53.583

1）这是一个相当广泛的问题。您可能确实想使用蓝牙 4.0。iOS 设备可以与蓝牙 2.1 设备通信，但要在您开发的应用程序中访问它们，您必须是 Apple 的 Made for iPhone 计划的成员。进入 Made For iPhone 计划绝非易事，除非您是一家有实际经验的公司，否则您将无法做到。您可以不受限制地开发与蓝牙 4.0（又名蓝牙 LE）通信的应用程序。

2) 这取决于你的 MacBook Pro 有多新。在我的脑海中，2012 年中期的 MacBook Pro 和 MacBook Airs 是第一款/唯一一款包含蓝牙 4.0 的 MacBook。iOS 模拟器*可*用于在这些机器上开发支持蓝牙 4.0 的应用程序。如果您的 MacBook Pro 较旧，我不确定通过适配器添加蓝牙 4.0 功能的选项。我认为你最好还是在真正的 iOS 设备上进行开发和测试。

编辑：自从我最初回答这个问题以来，我学到了更多。即使在具有内置蓝牙 4.0 的 Mac 上，您也需要外部蓝牙 4.0 适配器来测试 iOS 模拟器中的 BT 4.0 应用程序，如[技术说明 TN2295](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)中所述。

3）我真的不确定你在这里问什么。使用 CoreBluetooth.framework 和蓝牙 4.0 需要运行 iOS 5.0 或更高版本的 iPhone 4S、iPad 3、第 5 代 iPod Touch 或更高版本。对于大多数新开发，我的建议是只针对 iOS 6.1 及更高版本。iOS 6.0 为 CoreBluetooth 添加了一些不错的附加功能。

# javascript - 是否可以检测字符串是否包含 javascript？

> ID：14736212
> 
> 赞同：0
> 
> 时间：2013-02-06T18:29:45.863
> 
> 标签：javascript, regex, ace-editor

我试图找出是否可以检测给定的字符串是否是 JavaScript 脚本，以便自动设置 Ace 编辑器。

“参与规则”将是这样的，我可以拥有以下内容：

```
var x = function(){
    alert('hello world');
    } 
```

...这可以作为 JS 安全地“验证”吗？不幸的是，这将存储在数据库中，因此我不能依赖文件类型扩展名。在最坏的情况下，我可能不得不将其标记为 JS 内容，但现在我正试图避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:37:01.843

这是一个重量级的解决方案，但您当然可以在其上运行完整的 Javascript 解析器。其中有许多是用 Javascript 编写的，例如 Uglify、Narcissus、Esprima、Acorn 和 ZeParser。

大概其中任何一个都会告诉您您的字符串是否包含合法的 Javascript，并在它包含的情况下为您提供完整的语法树。

不过，我不确定是否有任何更轻量级的技术。

# android - 通过按 EditText 创建多项选择列表

> ID：14736215
> 
> 赞同：2
> 
> 时间：2013-02-06T18:29:56.633
> 
> 标签：android, layout, text, menu

假设我们有

```
EditText editTextTitle = (EditText) findViewById(R.id.textTitle); 
```

当用户触摸文本字段时，会出现键盘以写入一些文本。而不是这个，我想出现一个包含一些元素的[多项选择列表。](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)当用户确认所选项目时，我想在 editTextTitle 上传递这些元素的文本。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:32:44.303

当然，只需在 EditText 上设置一个 OnClickListener 即可打开您的自定义对话框。还使用回调将用户选择的选项分配给 EditText（假设您要这样做）。

* * *

**添加**

> 如何在 onClickListener 中传递 onCreateDialog(Bundle savedInstanceState)？

[`onCreateDialog(Bundle savedInstanceState)`](https://developer.android.com/reference/android/app/DialogFragment.html#onCreateDialog%28android.os.Bundle%29)是 DialogFragment 中的一种方法，因此不可能给出一个答案来涵盖您可以创建 Fragment 的所有方式......但是让我们假设您已经有一个名为`dialogFrag`Initialized 的 DialogFragment 并准备就绪：

```
editTextTitle.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick (View v) {
        dialogFrag.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:59:33.910

您可能可以使用微调器。它以漂亮的外观提供精确的服务。

[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

# java - 存根和模拟时的区别

> ID：14736219
> 
> 赞同：43
> 
> 时间：2013-02-06T18:30:12.117
> 
> 标签：java, unit-testing, junit4, mockito

我是mockito的新手。

需要知道存根和何时之间的区别

```
 1\. stub(cpproxy.getBinList()).toReturn(gettestbins());
      2\. when(cpproxy.getBinList()).thenReturn(gettestbins()); 
```

这两者有什么区别？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-06T19:25:53.350

实际上，它们在技术上是相同的。最初创建 Mockito 时，我们谈论的是存根，因此词汇表遵循了这个想法。后来人们认为用*交互*而不是*技术*术语来思考更好，所以词汇遵循了*when ... then ...*风格。这种词汇的变化有助于人们思考**对象**之间的**交互**、**消息传递**。这是面向对象语言中最有趣的想法（*消息传递）（*[*引用 Alan Kay*](https://softwareengineering.stackexchange.com/questions/46592/so-what-did-alan-kay-really-mean-by-the-term-object-oriented)的话）。***[](https://softwareengineering.stackexchange.com/questions/46592/so-what-did-alan-kay-really-mean-by-the-term-object-oriented)***

 ****如今，测试方法已经演变为行为驱动开发（来自 Dan North），这几乎是同一件事，但更多地关注设计时的行为。为了反映这种想法，人们要求 Mockito 提供反映这种变化的 API。所以你也使用*given ... will ...* style from`BDDMockito`

```
given(the_type.performs_that()).willReturn(something) 
```

这是我现在最喜欢的词汇，因为我使用测试来驱动我的对象设计。****

# javascript - 使用 onkeypress 1 激活此功能

> ID：14736220
> 
> 赞同：0
> 
> 时间：2013-02-06T18:30:23.540
> 
> 标签：javascript, onkeydown

```
 function addone()

 {

 document.getElementById("subtract").disabled=false;
x += 1;
document.getElementById("result").innerHTML="Doshi has said OK " + x + " times."
 if(x == 1 ){
document.getElementById("resetall").disabled=false;
document.getElementById("reset").disabled=false;
document.getElementById("result").innerHTML="Doshi has said OK " + x + " time."
 }
    if(x == 0){
document.getElementById("resetall").disabled=true;
document.getElementById("reset").disabled=true;
document.getElementById("result").innerHTML="Doshi has not said OK " 
}

  } 
```

如何使用 onkeydown 激活此功能。我想使用“1”键。我现在可以用任何键激活它。我希望它是 1 键

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:34:20.353

```
window.onkeydown = function (e) {
    if (e.which === 49 || e.keyCode === 49) {  // '1'.charCodeAt(0)
        addone();
    }

    return true; // allow normal keyboard output
}; 
```

# java - Guava Multimap 包含条目问题

> ID：14736221
> 
> 赞同：2
> 
> 时间：2013-02-06T18:30:33.230
> 
> 标签：java, collections, guava, multimap

下面我有一些代码将两个条目添加到第一个多重映射，并将一个条目添加到第二个，然后比较两者。既然键是相同的“Dec”（见输出），为什么它输出假？

输入

```
 Multimap<String, String> first = ArrayListMultimap.create();
    Multimap<String, String> second = ArrayListMultimap.create();
    first.put("Dec", "18");
    first.put("Dec", "12");
    second.put("Dec", "18");
    for (String key : second.keys()) {
            System.out.println(first.get(key));
        System.out.println(second.get(key));
        System.out.println(first.containsEntry(key, second.get(key)));
    } 
```

输出

```
 [18, 12]
    [18]
    false 
```

编辑：对于那些不理解下面答案的人， second.get(key) 将返回一个字符串集合（尽管只有一个），当然还有一个字符串集合 =/= string

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:35:06.763

您正在寻找一个键为`"Dec"`且值为“仅包含”的集合的条目`"18"`。该条目在或*中都不*存在。`first``second`

现在，如果您使用：

```
System.out.println(first.containsEntry("Dec", "18")); 
```

然后我希望那*会*打印`true`。基本上，您需要区分单个条目值和“与键关联的条目值的集合”。

# java - 为什么 KeyValue 需要公钥？

> ID：14736222
> 
> 赞同：0
> 
> 时间：2013-02-06T18:30:38.017
> 
> 标签：java, key, digital-signature, keystore, xml-signature

我正在尝试使用 Java 对 XML 文档进行签名，并且我正在关注本[教程](http://docs.oracle.com/javase/6/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html#wp268799)。我试图使用我的私钥对文档进行签名，但是当我查看 API 时，它说 [KeyValue](http://docs.oracle.com/javase/6/docs/api/javax/xml/crypto/dsig/keyinfo/KeyValue.html)仅将 PublicKey 作为参数。同样在本教程中，它让我使用私钥签署 DOMSignContext，然后使用公钥签署 XMLSignature。

```
DOMSignContext dsc = new DOMSignContext(kp.getPrivate(), doc.getDocumentElement()); 
KeyValue kv = kif.newKeyValue(kp.getPublic());
KeyInfo ki = kif.newKeyInfo(Collections.singletonList(kv)); 
XMLSignature signature = fac.newXMLSignature(si, ki); 
```

我认为私钥的全部意义在于人们会信任你？为什么你需要一个公钥来处理这里的任何事情？有人可以为我更好地解释一下这里的细节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:33:46.910

一般来说，当有人想要验证/解密用私钥加密的东西时，必须知道相关的公钥（这是公钥/非对称密码学的重点）。

在`XMLSignature`上下文中，想要使用 XMLSignature 验证文档的人需要知道使用什么公钥；因此，为方便起见，可以将公钥包含在 XMLSignature 结构中。

XMLSignature 的成功验证意味着人们可以相信签名的数据自签名创建以来未被修改。如果已知公钥与特定方相关联，则可以信任该方创建了签名。

如教程中所述，您仍然必须使用以下命令“签名”签名：

```
signature.sign(dsc); 
```

# logback - TimeBasedRollingPolicy 昨天未能翻转日志文件，但我没有看到 RolloverFailure？

> ID：14736223
> 
> 赞同：1
> 
> 时间：2013-02-06T18:30:42.553
> 
> 标签：logback

我有一个配置为...

```
<appender name="DAILY_ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
  <File>logs/dm.log</File>
  <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
    <FileNamePattern>logs/dm.%d{yyyyMMdd}.log</FileNamePattern>
  </rollingPolicy>
  <encoder>
    <pattern>%m%n</pattern>
  </encoder>
</appender>
...
<root level="info">
  <appender-ref ref="DAILY_ROLLING" />
  <appender-ref ref="SYSLOG" />
</root> 
```

...这通常具有将当前数据记录到 dm.log 文件的效果，并且每天午夜将 dm.log 滚动到一个以日期命名的文件中，dm.20130205.log。然而，昨天第一次没有发生这种翻转。我的 dm.log 文件现在有 2 天的数据，我想知道出了什么问题？我希望在 dm.log 文件中找到 RolloverFailure 或一些错误指示，但那里什么也没有。

我在哪里可以找出 logback 出了什么问题？我从未见过这种机制在 logback 或 log4j 中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:43:01.250

尝试添加：

```
-Dlogback.statusListenerClass=ch.qos.logback.core.status.OnConsoleStatusListener 
```

或者实现您自己的状态监听器的事件。然后尝试在测试系统中每 10 秒配置一次文件滚动，然后让它进行浸泡测试。

很可能是 NAS 问题。我们的 NAS 以难以察觉的方式悄无声息地失败了。此外，如果文件滚入是在半夜，并且它是一个夜间批处理系统，那么此时 NAS 负载可能会很高。

您使用的是什么版本的 logback？

编辑：如果文件重命名失败，则可以跳过翻转。在我自己的代码中，我会重试，但在 RenameUtil.rename() 中，logback 只会通过状态监听器警告你。

# ms-access - CFLOOP 和 SQL 更新

> ID：14736224
> 
> 赞同：1
> 
> 时间：2013-02-06T18:30:46.240
> 
> 标签：ms-access, coldfusion, sql-update, cfloop

如何使用 CFLOOP 更新 Access DB 上的记录？我尝试使用下面的代码，但它似乎给了我一个重复的值而不是一个增量

我的代码：

```
<cfloop index="i" from="1" to="3">
<cfquery name="query" datasource="datasource">
    update mytable
    set
    columnB = #i#
    where columnA = 'a'                                          
   </cfquery>
</cfloop> 
```

columnB下的记录输出=所有数字3，应该是1,2,3

我的桌子是这样的......

```
Column A|ColumnA1|ColumnB
A         A        
A         B
A         C 
```

列 A 和 A1 填充了以前的 CFLOOP 和 SQL 插入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:36:58.037

每次运行更新时，您都会更新所有具有 columnA = 'a' 的记录，您需要在 where 子句中使用更多条件来停止一次更新多行。

您可以通过使用 cfquery 的 result 属性轻松查看更新了多少行，类似于下面的代码。

```
<cfloop index="i" from="1" to="3">
<cfquery name="query" datasource="datasource" result='updated'>
    update mytable
    set
    columnB = #i#
    where columnA = 'a'                                          
   </cfquery>
   <cfdump var='#updated#' />
</cfloop> 
```

**更新：** 鉴于您更新的问题，示例更新查询可能看起来像这样，因为 columnA 和 ColumnA1 的组合使该行唯一。

```
<cfloop index="i" from="1" to="3">
<cfquery name="query" datasource="datasource" result='updated'>
    update mytable
    set
    columnB = #i#
    where columnA = 'a'      
    AND ColumnA1 = <cfqueryparam value='#i#' />                                    
   </cfquery>
   <cfdump var='#updated#' />
</cfloop> 
```

# php - Is passing session data from one PHP page to another efficient?

> ID：14736226
> 
> 赞同：1
> 
> 时间：2013-02-06T18:30:47.817
> 
> 标签：php, uri, session-variables

I was wondering if using a SESSION variable to pass data from one PHP page to another is efficient. I ask this because I thought that SESSIONS were only used to keep the user logged in to a website, and as an alternative to cookies. Would it not be better to pass data **(non-sensitive)** from one page to another via a URI such as `members.php?name=Joe&age=28`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:33:23.380

A PHP session writes a cookie to your browser and then stores the data associated with that session on disk; its about as expensive as an include() to read it back in on the next page load, which is to say completely trivial.

Additionally, the user can't change session data unless you create a mechanism which allows them to; they can mess with the query string easily.

Short answer: Yes, its efficient.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:32:55.430

Depends on what you're doing. If that page requires that information to function properly and is not behind a login then passing in a query string is the way to go (e.g. search results, product pages). If it is behind a login then using a session would allow you to keep your URLs clean and also make it difficult for users to abuse the page (e.g. swap out data in the query string).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T18:39:48.910

会话对很多事情都很有用，而不仅仅是登录信息。它们非常适合在 POST/redirect/GET 周期或任何其他跟踪用户会话状态的状态消息（因此得名） - 但仅限于当前会话，而不是长期永久配置选项。

就效率而言，您需要记住会话中的任何内容都需要在每次页面加载时进行序列化和反序列化。存储姓名和年龄不会增加太多。添加一兆字节的图像上传可能会很糟糕。

比效率考虑更重要的是要记住会话数据只是暂时持久的。如果您想始终知道 Joe 是 28 岁，则应该将其放入数据库中。如果它仅在单个页面加载时有用，它可能应该保留在 URL 中或被发布。如果你有兴趣记住它几分钟，会话可能是放置它的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T18:36:10.847

是的，您可以将数据和消息存储在 SESSION 中，并且可以从任何页面访问。但请记住，SESSION 使用浏览器支持来存储数据。它们可以由用户手动删除

# sql-server - Copy a primary key from a target table as a foreign key on the source table during an insert

> ID：14736227
> 
> 赞同：0
> 
> 时间：2013-02-06T18:31:00.380
> 
> 标签：sql-server, sql-server-2008, tsql

**The Situation:**
I am inserting information from one table to another, a source and target. When the information is inserted into the target, a primary key is created. (In this case it is an integer.) I then need to be able to tie back to the source table. However, based on the data being moved, I am not able to reliably get the 1:1 match between the target and source tables.

**The Question:**
Is there a way to copy the primary key that was created for record(x) in the target table and copy it as a foreign key to that same record(x) in the source table as the bulk insert is happening?

**Details:**
I am trying to get this done in SQL. I have a work-around to this problem but I figure there has to be a way to do what I'm asking.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:52:55.337

I found my answer after reading this great article.

[http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx)

I acheived what I was looking for by using a MERGE and its OUTPUT clause. Here is my sample code that I used to figure this out.

I started by creating 3 temporary tables, #Temp2, #Temp3 and #Temp4\. #Temp2 is considered the source table. #Temp3 would be the target table and #Temp4 is a bridge. I then inserted a few rows of very simple data, in this case just one field - Value.

```
CREATE TABLE #Temp2(
OldID INT IDENTITY(1,1),
Value INT,
NewFK INT)

CREATE TABLE #Temp3(
NewerID INT IDENTITY(1,1),
Value INT)

CREATE TABLE #Temp4(
OldID INT NOT NULL,
NewerID INT NOT NULL,
Value INT)

INSERT INTO #Temp2(Value)
VALUES(30), (40), (50), (70)

INSERT INTO #Temp3(Value)
VALUES (333), (444), (555), (777) 
```

Then comes the MERGE statement that does the dirty work. It will be taking the value from #Temp2 and putting it into #Temp3\. It will then take the ID created in #Temp3, the ID from #Temp2 and the Value that was passed, and throw them all into #Temp4.

```
MERGE INTO #Temp3 AS tgt
USING #Temp2 AS src
ON 1=0
WHEN NOT MATCHED THEN
    INSERT(
    Value)
    VALUES(
    src.Value)
OUTPUT
    src.OldID,
    INSERTED.NewerID,
    src.Value
INTO #Temp4(OldID, NewerID, Value); 
```

Then I ran an UPDATE to the staging table #Temp2 to update the NewFK field with the new ID. Lastly, do a simple SELECT to see the updated information.

```
UPDATE X
SET X.NewFK = Z.NewerID
FROM #Temp2 X
JOIN #Temp4 Z
ON X.OldID = Z.OldID

SELECT * FROM #Temp2 
```

This acheived exactly what I needed and is a pretty streamlined way of doing things. I hope this will help some people who come across this question. Thanks everyone for your insight and responses.

**NOTE:** I believe MERGE was introduced in SQL Server 2008.

Jonathan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:37:01.233

一种方法是将目标表的标识插入设置为“开启”（[http://msdn.microsoft.com/en-us/library/ms188059.aspx](http://msdn.microsoft.com/en-us/library/ms188059.aspx)）。然后在运行插入之前将该身份作为“源”数据的一部分。完成后请记住再次关闭身份插入。

**编辑**
不知道你的情况是什么，但我过去采用的一种方法是创建一个字段来保存“外部源 ID”，以防万一我需要在未来某个时候引用源。就我而言，这仅供参考，不是正常的交易用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:52:01.207

If you can get a SharedExtPK in the target then this should work.
In this case logID is the PK of the source.
Tested:

```
DECLARE @MyTableVar table(
  TargetPK     int NOT NULL,
  SourcePK     int NOT NULL
  );

INSERT INTO IdenOutPut (someValue, sharedExtKey)
  OUTPUT INSERTED.iden, 
         INSERTED.sharedExtKey
  INTO @MyTableVar
    SELECT name, logID
    FROM CatID

update sPK 
set sPK.ExtPK = tTbl.TargetPK
FROM @MyTableVar as tTbl 
JOIN CatID as sPK 
  on sPK.logID = tTbl.SourcePK 
GO 
```

If the values you insert are unique then could use that.
But it would get trickier.

# ember.js - Ember 相当于 POST 'n 重定向？

> ID：14736228
> 
> 赞同：4
> 
> 时间：2013-02-06T18:30:59.997
> 
> 标签：ember.js

我正在学习 Ember，并且正在寻找执行以下操作的最佳方法：

用户可以从 3 个按钮中进行选择来设置新游戏：2 位玩家、3 位玩家或 4 位玩家。单击一个将转到下一个屏幕，其中所选号码的游戏开始。的玩家。

您将如何在 Ember 中执行此操作？我可以使用操作来完成它：

```
<button {{action "start" 2}} type="button" />
<button {{action "start" 3}} type="button" />
<button {{action "start" 4}} type="button" /> 
```

这样我可以读取控制器的 start() 方法中的参数。

但是我想转换到一个新的 URL，为此我需要`{{linkTo}}`，不是吗？但是如何将基于按钮的值传输到新的 Route/URL？所以一个更普遍的问题是：有什么方法可以将一些变量“发布”或“获取”到新的路由/URL？有点像传统的表单发布和重定向。我查看了动态细分，但不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:24:55.137

您可以在控制器*启动*中添加一个方法，该方法将读取玩家数量并使用所有控制器都可用的 transitionToRoute 函数将用户转发到适用的路线。

```
start: function(numberOfPlayers) {
  App.gameConfiguration = updateGameConfigurationBasedOnNumberOfPlayersParamAndBoundVariables();
  this.transitionToRoute('games.start');
} 
```

这将导致用户被转发到 /games/start 路由。url 中没有上下文或动态段，但使用此方法依赖于一些逻辑，该逻辑已初始化启动游戏所需的游戏配置。

您也不必将所有属性都传递给*start*函数。您可以将模板上的输入字段绑定到模型中的属性，然后在*start*函数中使用这些绑定值来创建游戏配置。

对此的一个变体是为路由提供上下文/在 url 中指定一个动态段。那么您的*启动*函数可能如下所示：

```
start: function(gameConfiguration) {
  this.transitionToRoute('games.start', gameConfiguration);
} 
```

这会将用户转发到如下 URL：/games/:game_configuration_id/start，其中 game_configuration_id 指的是 DS.Model 的 id，它表示由玩家数量和任何其他特征组成的特定游戏配置。

您可以通过迭代模板中的游戏配置集来设置它，将 game_configuration 传递给每个链接。这样的事情就足够了：

```
{{#each game_config in model}}
  <button {{action "start" game_config}} type="button" />
  //This would be the equivalent of doing:
  //<#linkTo 'games.start' game_config>
{{/if} 
```

对于此配置，您需要一个*GamesStartRoute*，例如：

```
App.GamesStartRoute = Ember.Route.extend({
  model: function(params) {
    return GameConfiguration.find(params.game_configuration_id);
  }
}); 
```

希望这可以帮助

# python - How do I restructure this code so Pickle 'Buffer Region' errors do not occur

> ID：14736234
> 
> 赞同：2
> 
> 时间：2013-02-06T18:31:38.093
> 
> 标签：python, multithreading, qt, user-interface, matplotlib

I was wondering if anyone had any good solutions to the pickling error I am having at the moment. I am trying to set my code up to open several different processes in parallel, each with a fitting process to be display on a matplotlib canvas in real time. Within my main application, I have a button which activates this function:

```
def process_data(self):
        process_list = []
        for tab in self.tab_list:
            process_list.append(mp.Process(target=process_and_fit, args=(tab,)))
            process_list[-1].start()
            process_list[-1].join()
        return 
```

As you may notice, a 'tab' (PyQt4.QtGui.QTabWidget object) is passed to the function process_and_fit, which I have noticed is not able to be pickled readily ([link here](https://stackoverflow.com/questions/3862331/pickling-objects)) . However, I am not certain how to change the code to get rid of the frame being passed since it needs to be called in the process_and_fit function indirectly. By indirectly I mean something like this: (psuedo code again)

```
def process_and_fit(tab): # this just sets up and starts the fitting process
        result = lmfit.Minimizer(residual, parameters, fcn_args=(tab,))
        result.prepare_fit()
        result.leastsq()

def residual(params, tab):
    residual_array = Y - model
    tab.refreshFigure()
    return residual_array

class tab(QtGui.QTabWidget):
    def __init__(self, parent, spectra):
       # stuff to initialize the tab widget and hold all of the matplotlib lines and canvases

    # This just refreshes the GUI stuff everytime that the parameters are fit in the least squares method
    def refreshFigure(self):     
        self.line.set_data(self.spectra.X, self.spectra.model)
        self.plot.draw_artist(self.line)
        self.plot.figure.canvas.blit(self.plot.bbox) 
```

Does anyone know how to get around this pickling error since the tab associated with a process should have only one set of data associated with it? I looked at [Steven Bethard's](http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods) approach but I really didn't understand where to put the code or how to utilize it. (I am a chemical engineer, not a computer scientist so there's a lot that I don't understand)

Any help is greatly appreciated.

**EDIT:** I added the links in that I forgot about, as requested.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:14:46.297

主要问题是您无法从主 UI 线程（所有 Qt 调用都在其中）的单独进程中进行 UI 更改。您需要使用`mp.Pipe`or`mp.Queue`与主进程进行通信。

```
def process_data(self):
    for tab in self.tab_list:
        consumer, producer = mp.Pipe()
        process_list.append(mp.Process(target=process_and_fit, args=(producer,)))
        process_list[-1].start()
        while (true):
            message = consumer.recv()  # blocks
            if message == 'done':
                break
            # tab.spectra.X, tab.spectra.model = message
            tab.refreshFigure()
        process_list[-1].join()
    return

def process_and_fit(pipe_conn):
    ...
    pipe_conn.send('done')

def residual(params, pipe_conn):
    residual_array = Y - model
    pipe_conn.send('refresh')  # or replace 'refresh' with (X, model)
    return residual_array 
```

还有一点需要注意：阻塞`consumer.recv()`可能会挂起 GUI 线程。有很多资源可以缓解这种情况，“[子进程 Popen 阻塞 PyQt GUI](https://stackoverflow.com/questions/5613922/subprocess-popen-blocking-pyqt-gui) ”这个问题会有所帮助，因为您可能应该切换到`QThread`s. （Qthread：[PySide](http://srinikom.github.com/pyside-docs/PySide/QtCore/QThread.html)，[PyQt](http://pyqt.sourceforge.net/Docs/PyQt4/qthread.html)）

使用 QThreads 而不是 Python 线程的优势在于，使用 QThreads，由于您已经在 Qt 的主事件循环中，您可以使用异步（非阻塞）回调来更新 UI。

# css - flex-like states in CSS/grabbing multiple id-ed elements at once

> ID：14736236
> 
> 赞同：0
> 
> 时间：2013-02-06T18:31:44.613
> 
> 标签：css, apache-flex, states

Suppose I have a ui with a button. The ui has four states, each with the button in a different corner.

In Flex, this is easy to achieve, you simply define these four states (topLeft, topRight, bottomRight, bottomLeft), and each has an override for the button's position values.

How would you do this using CSS in a way that can be triggered by a simple assignment?

Flex: skin.currentState="topRight" JS: ???

I've defined the classes in css:

```
#button.topRight {...}
#button.topLeft{...}
#button.bottomRight {...}
#button.bottomLeft {...} 
```

Now, without having to know of the existence of #button, how in one line of code can I apply one of the four states to all the elements on the page that have that state defined?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:42:23.247

[jQuery](http://jquery.com/)在 JavaScript 中提供了一个方便的抽象层，因此：

```
$('.someClassName').addClass('blueOnLeft')  
$('.someClassName').removeClass('blueOnLeft') 
```

这将针对每个类名为“someClassName”的元素。

# javascript - innerHTML not being updated after changing value of input (checked = true/false/"checked")

> ID：14736238
> 
> 赞同：2
> 
> 时间：2013-02-06T18:31:48.313
> 
> 标签：javascript

Brief: I need to grab the information in parentElement, but I need the input information updated. when I am grabbing the innerHTML of parentElement, after the box is unchecked, it still shows up checked. The html is not reflecting changes I've made with javascript.

I have a small snippet of my code here: [http://jsfiddle.net/7993K/8/](http://jsfiddle.net/7993K/8/)

```
<div id="parentElement">
<label id="thisLabel">
    <input type="checkbox" id="idnumber" checked="checked"> Bring Mail Inside
</label>
</div>
<p>
<a onClick="checkit()">Check it out</a>
</p>
<p onclick="checkToggle()">change to false</p>

function checkit() {
alert(document.getElementById("parentElement").innerHTML);
}
function checkToggle() {
element = document.getElementById("thisLabel");
element.childNodes[0].checked = false;
alert("the checkbox is checked: " + element.childNodes[0].checked);
} 
```

*The slightly longer version of why I am going about it like this:* This is a large form that a site inspector checked out. It is brought into an online software app, and the lady in charge of communication with clients will review this information, speak back with the inspector on the phone. This form is saved in a database as html. After the woman is done reviewing the form, there may be a box or two that wasn't checked, that she would like to check, before emailing to the client ( there were issues, needed to be fixed, now that they are fixed, she can send out the proper report that everything was checked off)

She checks the boxes off, but they don't update the HTML, they only change the value, which will show, but won't show up when I get the innerHTML of parentElement. You will see in my JSFIDDLE [http://jsfiddle.net/7993K/8/](http://jsfiddle.net/7993K/8/):

Click check it out upon loading: checked = checked

uncheck box: checked = checked

change to false: alert confirms the checked property is false, but check it out shows the innerHTML as checked.

I will need to access this innerHTML with the proper information loaded (as in, if it is checkmarked, the html should reflect that)

PRE-EDIT: I think I can do this by making an event onclick of the label. That event takes the ("parentElement").innerHTML and split it in a few different places and put it back together with the right checked value. Will be slightly different if the input isn't checked to begin with. That is the only way I can think of doing this, and it just doesn't seem like the right way.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:34:58.507

复选框的状态和输入框的值不是源 HTML 的一部分。

为了证明这一点，请尝试将文本框放在带有 的页面上`value="old"`，更改值，然后比较`element.getAttribute("value")`-`element.value`它们不一样。

你真的应该保存表单的状态，而不是它背后的 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T18:37:41.500

发生这种情况是因为`element.childNodes[0].checked = false;`设置了*DOM 属性，它是一个独立于**HTML 属性*的实体。

您的`checkit`函数还应该询问*DOM 属性*，而不是检查`innerHTML`.

有关 DOM 属性和 HTML 属性的更多信息，请参阅[此问题](https://stackoverflow.com/questions/6003819/properties-and-attributes-in-html)。

# java - Load testing framework to test java applications

> ID：14736240
> 
> 赞同：1
> 
> 时间：2013-02-06T18:32:16.307
> 
> 标签：java, load-testing

Is there a load testing framework that I could use where I can supply my own Java class and test the performance of that class. So basically the framework would essentially spawn threads and record when those threads finished running and then generate a report with the final results.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:40:13.577

[Apache JMeter](http://jmeter.apache.org/)正是您想要的项目。您可以将它指向一个正在运行的进程，或者让它启动多个线程，每个线程都启动一个进程。它将监控吞吐量、错误率和您感兴趣的任何其他内容，并将其全部呈现在一组图表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:45:14.933

看看 Metrics ( [http://metrics.codahale.com/](http://metrics.codahale.com/) )。您可以使用它来检测您的应用程序，并在测试套件运行甚至发布到指标服务器后获得有趣的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T10:28:54.040

假设您有一个 Java 类和一个 Test 方法，如下所示：

```
import org.junit.Test;

public class AnyTestEndPoint {

    @Test
    public void anyTestMethod() throws Exception {
       ...
       your code goes here for a single user
       ...
    }
} 
```

您的上述测试可以通过以下配置馈送到负载生成器。

您可以`virtual-users`从如下所示的简单`properties`配置文件中生成。

```
#  my_load_config.properties
#############################

number.of.threads=50
ramp.up.period.in.seconds=10
loop.count=1 
```

在上面的配置中，`number.of.threads`表示要同时增加的虚拟用户。

然后您的负载测试如下所示，指向上述内容`Test`：

```
@LoadWith("my_load_config.properties")
@TestMapping(testClass = AnyTestEndPoint.class, testMethod = "anyTestMethod")
@RunWith(ZeroCodeLoadRunner.class)
public class LoadTest {

} 
```

这可以针对[JUnit4 负载生成](https://github.com/authorjapps/zerocode/wiki/Load-or-Performance-Testing-(IDE-based)#flexibility)和[JUnit5 负载生成](https://github.com/authorjapps/zerocode/wiki/JUnit5-Jupiter-Parallel-Load-Extension)来实现。请参阅 HelloWorld GitHub 存储库中的运行示例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T18:38:58.360

你可以试试 JUnit 或 TestNG。我过去曾使用过它们。不确定它是否正是您要找的。

# c++ - Additional functions added to a class cause a segfault when class is created as a shared_ptr

> ID：14736246
> 
> 赞同：1
> 
> 时间：2013-02-06T18:32:31.797
> 
> 标签：c++, linux, qt, shared-ptr

This really has me stumped.

We have a class with a dozen or so getters and setters defined, that take a mix of types (QString, int, bool) for the various member variables. I'm currently adding a new set of functions and variables for some additional data, everything builds fine however when I run the code and it creates a new instance of that class as a `boost::shared_ptr`, then I immediately get a segfault in `in QBasicAtomicInt::deref (this=0x0) at /usr/local/Trolltech/Qt-4.8.1/include/QtCore/qatomic_i386.h:132`.

I can take it further as well, if I add just the getter and the variable, it'll no longer segfault. If I change the variable to a bool instead of a QString, it'll work, however if I change to a std::string it'll still segfault in the same place which is even weirder as the variable is no longer a Qt one. If I create a new instance of the class without it being a `boost::shared_ptr` it's fine, no problems at all. The functions aren't used internally, or externally in the class yet.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-04T08:45:41.090

我有一个类似的问题。

我只是在一个类中创建一个变量，当尝试使用时会导致分段错误，我快疯了！

我的环境类似：一个在 Linux 上使用 Qt 的软件，用 C++ 语言编写。

所以我清理了项目并重建，然后工作正常！

StackOverflow 保存！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:25:45.013

删除目录并重新提取代码，重建并且它可以工作。我不知道为什么，我猜清理过程没有正确清理掉一些东西。

# python - How to write correct query for Haystack + Whoosh in Django

> ID：14736248
> 
> 赞同：0
> 
> 时间：2013-02-06T18:32:44.473
> 
> 标签：python, django, django-haystack, whoosh

I have model:

```
class Article(models.Model):
    title = models.CharField(max_length=250)
    slug = models.SlugField(max_length=250)
    text = models.TextField()
    date = models.DateTimeField(auto_now_add=True) 
```

And file search_indexes.py:

```
from haystack import indexes
from haystack import site
from models import Article

class ArticleIndex(indexes.SearchIndex):
    text_q = indexes.CharField(document=True, use_template=True)
    text = indexes.CharField(model_attr='text')

    # what I must add here ???

site.register(Article, ArticleIndex) 
```

When I execute query it can find only than words which I have in TITLE field. When I use word combination from TEXT field I got "No results found"

What I must add for executing queries with words from TEXT field?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:05:48.727

查询只在标记的字段中查找`document=True`（其他字段只能用于以后过滤）

该[文档](http://django-haystack.readthedocs.org/en/v1.2.7/tutorial.html#handling-data)建议命名该“文本”。

正如您所拥有`use_template=True`的，您应该有一个模板来指定文档中的对象字段。

例如 templates/search/indexes/main/article_text.txt 可以包含

```
{{ object.title }}
{{ object.text }} 
```

# embedded - Explanation of function used in embeded systems

> ID：14736253
> 
> 赞同：4
> 
> 时间：2013-02-06T18:32:55.650
> 
> 标签：embedded, arm

*Can anyone exactly explain what the function '__raw_writel' do and what are the arguments of '__raw_writel'*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:12:33.190

我不完全确定什么实现或您在哪里使用它。[但据此](http://www.xml.com/ldd/chapter/book/ch08.html)判断，它用于将数据写入 I/O 内存，并且 [在 Linux 内核中 b/w __raw_readl/__raw_writel 和 readl/writel 有什么区别？](https://stackoverflow.com/questions/9818657/whats-the-difference-b-w-raw-readl-raw-writel-and-readl-writel-in-linux-ker),

*   raw 表示原生字节顺序，non-raw 表示 little-endian
*   __prefix 替代方案不包括内存屏障

此外，您应该尝试查看[http://lxr.free-electrons.com/source/arch/microblaze/include/asm/io.h#L66](http://lxr.free-electrons.com/source/arch/microblaze/include/asm/io.h#L66)以了解该函数的更多详细信息和参数。

# javascript - Attaching event to element in jqMobi/jqUi header

> ID：14736261
> 
> 赞同：1
> 
> 时间：2013-02-06T18:33:25.400
> 
> 标签：javascript, jqmobi, jqui

If I wire up a click event for a button that is part of a custom header or footer, the event never fires. I have to register the onclick event directly in the html.

```
<footer id='currentchatfooter'>
    <div id="footerdiv">
        <input type='button' id="cannedRespBtn" class='icon stack footerbutton' value='responses' />

        <input type="text" id="segment" class="jq-ui-forms seginput" />

        <a class='icon check'  id="sendBtn" onclick='document.smTouch.SendSegment($("#segment").val())'>send</a>
    </div>
</footer> 
```

notice, the sendBtn anchor. I used to be able fire this event by declaring:

`$("sendBtn").on('click', function(){instance.SendSegment($("#segment").val());});`

It seems any elements within a header, footer, or modal do not get attached, or removed. I KNOW i am missing something

# remote-desktop - 树莓派 USB 重定向问题

> ID：14736270
> 
> 赞同：1
> 
> 时间：2013-02-06T18:34:07.083
> 
> 标签：remote-desktop, raspberry-pi, thin-client

好的，我将尝试在这里尽可能地描述以解决这个问题。我在一家制造大齿轮箱的公司工作，我们有运行我们的铣床/车床的计算机。这些计算机目前是运行 XP 的 FIT-PC。这些计算机用于通过 USB 转串口转换器（PL2303_Prolific USB 转串口转换器）控制车床/铣床。当它插入 xp 机器时，它被识别为 com 端口。所以这些机器很旧并且左右都出现故障，我打算用运行 xfreerdp 的树莓派替换它们，但我似乎无法将 USB 串行设备重定向到它正在远程处理的虚拟机。有没有人遇到过这个/知道解决方法？如果您不确定某些事情，请向我提问，因为我完全被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:31:59.470

不幸的是，Raspberry Pi 上的 USB 存在已知问题。他们意识到了这个问题并正在解决它，但它尚未解决。

[创建USB Redux 线程](http://www.raspberrypi.org/phpBB3/viewtopic.php?t=23544)是为了捕获工作状态以及当前的解决方法列表。[USB/串行转换器损坏](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=28&t=16280&start=100)是一个相关线程。

不过还是有希望的。首先，他们正在积极修复它，所以我怀疑这只是时间问题。其次，您可以尝试一些事情。

*   /boot/cmdline.txt 中有一个配置文件，您可以在其中尝试添加一些条目。一个看起来非常有效的是 dwc_otg.speed=1 和 dwc_otg.fiq_fix_enable=1 （但他们没有帮助我）。有关一些示例，请参阅[此页面](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=28&t=16280&start=50)。
*   将内核（搜索[rpi-update](https://github.com/Hexxeh/rpi-update)）更新到至少 #348 （使用 uname -a 确定内核级别）

祝你好运。

更新（2013 年 3 月 13 日）。从内核 #389 开始，大多数 USB 问题[似乎都得到了修复](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=28&t=23544&start=200)。使用[rpi-update](https://github.com/Hexxeh/rpi-update)进行更新。

# php - SEO 友好的 URL .htaccess

> ID：14736271
> 
> 赞同：0
> 
> 时间：2013-02-06T18:34:08.700
> 
> 标签：php, .htaccess

我正在使用 .htaccess 文件来创建 SEO 友好的 URL。仍在尝试它，到目前为止效果很好。我想让它更有活力。

我希望 URL 结构类似于下面的结构，但我并不总是知道会有多少级别。

```
http://website.com/level_1/level_2/level_3/level_4/ 
```

在下面的 .htaccess 文件中，我手动对其进行编码以检测 URL 的 2 个级别。有没有办法让它检查最后一个级别，然后从那里返回以使其更容易？所以换句话说，如果 URL 有 3 个级别，它会检测到，然后 RewriteRule 会调整到有多少级别。

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-/]+)/$([a-zA-Z0-9-/]+)/$ index.php?a=$1&b=$2
RewriteRule ^([a-zA-Z0-9-/]+)/$([a-zA-Z0-9-/]+)$ index.php?a=$1&b=$2
RewriteRule ^([a-zA-Z0-9-/]+)/$ index.php?a=$1
RewriteRule ^([a-zA-Z0-9-/]+)$ index.php?a=$1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:35:56.277

通常，您最好`RewriteRule ^(.*)$ index.php?path=$1`让 index.php 文件处理逻辑。

# version-control - Mercurial：将特定文件夹的更改移动到另一个仓库

> ID：14736274
> 
> 赞同：0
> 
> 时间：2013-02-06T18:34:18.000
> 
> 标签：version-control, mercurial, directory

我有两个 mercurial 存储库，每个存储库中都有一个文件夹（项目）（每个存储库中此文件夹的路径不同）。我在其中一个存储库中对其进行了许多更改，我想将这些更改从该存储库复制到另一个。

当然，我可以将修改后的 repo 文件夹中的所有文件复制到其他 repo，然后提交。但是这样一来，我就丢失了所有更改历史记录，这对我不利。

我可以做什么？（如果是批处理，则 Win cmd，而不是 bash）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:00:35.923

*   将公共文件夹转换为存储库 ( `hg convert`)
*   将其作为子存储库（或访客存储库）添加到两个“超级”存储库中
*   在 subrepo 中有共同的共享历史

# sql - 在传递给 SQL 表之前修改 MSAccess 中的数据

> ID：14736282
> 
> 赞同：0
> 
> 时间：2013-02-06T18:34:43.877
> 
> 标签：sql, ms-access, pass-through, bridge

我已经建立了一个带有指向 SQL 表的链接表的 Access 数据库。我已经在链接表的 Access 中创建了一个查询。我已经设置了将数据导出到 Access 查询的运输软件，并且它成功地传递到了 SQL 表。到现在为止还挺好。

现在到了这个问题。SQL 表中的“权重”列“隐含”了 4 个小数位。因此，当我导出权重“1”时，它在 SQL 表中显示为“.0001”。我需要将权重乘以 10000 以使其在 SQL 表中显示为“1.0000”。

我尝试修改查询的 SELECT 语句以对该列进行数学运算，但我从 ODBC 驱动程序中得到“无法更新字段”错误。

有没有办法做到这一点？我根本没有使用 MS Access（除了创建 .mdb 文件）。只需使用 .mdb 文件作为运输应用程序和 SQL 表之间的桥梁。

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:23:38.533

看看这个[答案](https://stackoverflow.com/a/11296097/886591)，它看起来与您正在寻找的内容非常相似。

[https://stackoverflow.com/a/11296097/886591](https://stackoverflow.com/a/11296097/886591)

# eclipse - Maven构建错误：未能执行目标，缺少一个类

> ID：14736283
> 
> 赞同：16
> 
> 时间：2013-02-06T18:34:48.057
> 
> 标签：eclipse, maven, vaadin

我正在尝试使用 Eclipse 的 maven 插件从 vaadin 7.0.0 打包示例应用程序，但是每次运行目标“包”时，构建都会失败并出现以下错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project essai: Execution default-compile of goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile failed: A required class was missing while executing org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile: org/codehaus/plexus/compiler/util/scan/InclusionScanException
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.maven.plugins:maven-compiler-plugin:2.3.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/Users/Benoit/.m2/repository/org/apache/maven/plugins/maven-compiler-plugin/2.3.2/maven-compiler-plugin-2.3.2.jar
[ERROR] urls[1] = file:/C:/Users/Benoit/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]] 
```

mvn package -X 的结果在这里： http: [//pastebin.com/jk5uW8Ut](http://pastebin.com/jk5uW8Ut)

我的 pom.xml 如下： http://maven.apache.org/maven-v4_0_0.xsd"> 4.0.0 com.mycompany essai war 0.0.1-SNAPSHOT Vaadin Web Application

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <vaadin.version>7.0.0.rc2</vaadin.version>
    <vaadin.plugin.version>${vaadin.version}</vaadin.plugin.version>
</properties>
<repositories>
    <repository>
        <id>vaadin-addons</id>
        <url>http://maven.vaadin.com/vaadin-addons</url>
    </repository>
    <repository>
        <id>vaadin-snapshots</id>
        <url>http://oss.sonatype.org/content/repositories/vaadin-snapshots/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>vaadin-snapshots</id>
        <url>http://oss.sonatype.org/content/repositories/vaadin-snapshots/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories>
<dependencies>
    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin-server</artifactId>
        <version>${vaadin.version}</version>
    </dependency>
    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin-client-compiled</artifactId>
        <version>${vaadin.version}</version>
    </dependency>
    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin-client</artifactId>
        <version>${vaadin.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin-themes</artifactId>
        <version>${vaadin.version}</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <!-- As we are doing "inplace" GWT compilation, ensure the widgetset -->
        <!-- directory is cleaned properly -->
        <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.4.1</version>
            <configuration>
                <filesets>
                    <fileset>
                        <directory>src/main/webapp/VAADIN/widgetsets</directory>
                    </fileset>
                </filesets>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.vaadin</groupId>
            <artifactId>vaadin-maven-plugin</artifactId>
            <version>${vaadin.plugin.version}</version>
            <configuration>
                <extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs>
                <!-- <runTarget>mobilemail</runTarget> -->
                <!-- We are doing "inplace" but into subdir VAADIN/widgetsets. This 
                    way compatible with Vaadin eclipse plugin. -->
                <webappDirectory>${basedir}/src/main/webapp/VAADIN/widgetsets
                </webappDirectory>
                <hostedWebapp>${basedir}/src/main/webapp/VAADIN/widgetsets
                </hostedWebapp>
                <noServer>true</noServer>
                <!-- Remove draftCompile when project is ready -->
                <draftCompile>false</draftCompile>
                <compileReport>true</compileReport>
                <style>OBF</style>
                <strict>true</strict>
                <runTarget>http://localhost:8080/</runTarget>
            </configuration>
            <executions>
                <execution>
                    <configuration>
                        <!-- if you don't specify any modules, the plugin will find them -->
                        <!-- <modules>     <module>com.vaadin.demo.mobilemail.gwt.ColorPickerWidgetSet</module> 
                            </modules> -->
                    </configuration>
                    <goals>
                        <goal>resources</goal>
                        <goal>update-widgetset</goal>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>com.vaadin</groupId>
                                    <artifactId>
                                        vaadin-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [7.0.0.rc2,)
                                    </versionRange>
                                    <goals>
                                        <goal>resources</goal>
                                        <goal>update-widgetset</goal>
                                        <goal>compile</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
</project> 
```

我是 maven 新手，即使我发现很多关于此错误的帖子，我也无法理解可能导致此错误的原因。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T06:57:28.673

这里似乎是问题：

> [致命] 不可解析的 POM C:\Users\Benoit.m2\repository\org\apache\maven\maven-parent\16\maven-parent-16.pom

由于这个错误，maven 无法将所有必要的库添加到插件的类路径中。

我建议您删除下的所有内容`C:\Users\Benoit\.m2\repository\org\apache\maven\`并重建项目。这应该会有所帮助。

# c++ - 为什么这个中点线算法不画垂直线（或接近垂直的对角线）？

> ID：14736284
> 
> 赞同：4
> 
> 时间：2013-02-06T18:34:50.087
> 
> 标签：c++, opengl, glut

我实现了我在网上找到的这个算法，它可以很好地绘制水平线和所有对角线的一半。但是当对角线通过“中途”标记变为垂直时，它不会更新 y 并且只会绘制斜率较小的线。它确实将它一直绘制到 x2，但绘制了一条倾斜到不同 y2 坐标的线。如果你尝试画一条垂直线，什么也画不出来。任何人都可以找到错误吗？

```
void init()
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, 500.0, 0.0, 500.0);
}

void midPoint(int x1, int y1, int x2, int y2)
{
    if (x1 > x2)
    {
        midPoint(x2, y2, x1, y1);
        return;
    }

    int slope;
    int dx, dy, d, x, y;

    dx = x2 - x1;
    dy = y2 - y1;
    d = dx - 2 * dy;
    y = y1;

    if (dy < 0) {
        slope = -1;
        dy = -dy;
    }
    else {
        slope = 1;
    }

    for (x = x1; x < x2; x++) {
        glBegin(GL_POINTS);
        glVertex2f(x, y);
        if (d <= 0) {
            d += 2 * dx - 2 * dy;
            y += slope;
        }
        else {
            d += -2 * dy;
        }
        glEnd();
    }

}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glColor3f(1.0, 0.0, 0.0);
    midPoint(10, 10, 110, 210);

    glColor3f(0.0, 1.0, 0.0);
    midPoint(10, 10, 210, 110);

    glColor3f(1.0, 1.0, 0.0);
    midPoint(210, 10, 10, 110);

    glFlush();
}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowPosition(50, 50);
    glutInitWindowSize(500, 500);
    glutCreateWindow("Bresenham\'s midpoint line algorithm");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-08T18:32:39.300

Bresenham 的线条绘制算法无法绘制垂直线。要绘制垂直线，请使用 DDA 线绘制算法。但 DDA 的问题在于，它并不准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:49:50.210

按照[维基百科的定义](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#Optimization)，实现看起来像：

```
void midPoint(int x1, int y1, int x2, int y2)
{
    bool steep = abs(y2 - y1) > abs(x2 - x1);
    if(steep) {
        // swap x1 and y1
        int tmp = x1;
        x1 = y1;
        y1 = tmp;
        // swap x2 and y2
        tmp = x2;
        x2 = y2;
        y2 = tmp;
    }
    if(x1 > x2) {
        // swap x1 and x2
        int tmp = x1;
        x1 = x2;
        x2 = tmp;
        // swap y1 and y2
        tmp = y1;
        y1 = y2;
        y2 = tmp;
    }

    int dx, dy, error, ystep, y;

    dx = x2 - x1;
    dy = abs(y2 - y1);
    error = dx / 2;
    y = y1;

    if(y1 < y2)
        ystep = 1;
    else
        ystep = -1;

    glBegin(GL_POINTS);
    for (x = x1; x <= x2; x++) {
        if(steep)
            glVertex2f(y, x);
        else
            glVertex2f(x, y);
        error -= dy;
        if (error < 0) {
            y += ystep;
            error += dx;
        }
    }
    glEnd();
} 
```

（尚无法测试，但已针对 aschepler 的评论进行了修复）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T18:32:14.940

我遇到了同样的问题，解决方案似乎很简单。while循环是正确渲染垂直线的关键。

下面的代码是来自我的 Java 图形项目的代码。z 坐标用于 z 缓冲区。

请注意，当采样沿 x 轴时，循环运行 dx 次，而当采样沿 y 轴时，循环运行 dy 次

```
display.setColor(Color.BLACK);
dx=x2-x1;
dy=y2-y1;

if(dx<0)
    xinc=-1;
else
    xinc=1;
if(dy<0)
    yinc=-1;
else
    yinc=1;
zinc=z2-z1;

dx=Math.abs(dx);dy=Math.abs(dy);
if(dx>dy){
    zinc/=dx;
    dy=dy<<1;
    p=dy-dx;
    y2=dx;
    dx=dx<<1;

    display.drawPixel(x1, y1, z1);
    for(j=0;j<y2;j++){
        z1+=zinc;
        if(p>=0){
            p-=dx;
            y1+=yinc;
        }
        x1+=xinc;
        p+=dy;
        display.drawPixel(x1, y1, z1);
    }

}
else{
    zinc/=dy;
    dx=dx<<1;
    p=dx-dy;
    x2=dy;
    dy=dy<<1;
    display.drawPixel(x1, y1, z1);
    for(j=0;j<x2;j++){
        z1+=zinc;
        if(p>=0){
            p-=dy;
            x1+=xinc;
        }
        y1+=yinc;
        p+=dx;
        //System.out.println("Pixel : "+x1+" ,"+y1);
        display.drawPixel(x1, y1, z1);
    }
} 
```

# objective-c - 如何检查 UIView 或 UIImage 的像素颜色？

> ID：14736285
> 
> 赞同：2
> 
> 时间：2013-02-06T18:34:53.020
> 
> 标签：objective-c, uiview, bitmap, uiimage, pixel

我正在尝试检查整个 UIView 是否填充了一种颜色。我设法使用以下代码块获取 UIView 的屏幕截图：

```
UIImage *image = [self imageFromView];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSData *myImageData = UIImagePNGRepresentation(image);
[fileManager createFileAtPath:@"/Users/{username}/Desktop/myimage.png" contents:myImageData attributes:nil];
[imageData writeToFile:@"/testImage.jpg" atomically:YES]; 
```

imageFromView 的方法实现如下：

```
- (UIImage*)imageFromView{  
UIImage *bitmapImage;
UIGraphicsBeginImageContext(self.bounds.size);
[self.layer renderInContext:UIGraphicsGetCurrentContext()];
bitmapImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return bitmapImage; 
} 
```

所以据我了解，我现在有一个 UIView 的位图图像。如何访问 UIImage 的每个像素并检查以验证它实际上是一种颜色（即 UIColor blackColor）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:24:18.543

如果你回到[那个答案](https://stackoverflow.com/questions/10113737/ios-looping-over-the-pixels-of-an-image/10114115#10114115%20that%20answer)，下面的（未经测试的）片段应该让你开始：

```
- (BOOL) checkForUniqueColor: (UIImage *) image {
    CGImageInspection * inspector = 
        [CGImageInspection imageInspectionWithCGImage: [image CGImage]] ;

    for (CGFloat x = 0 ; x < image.size.width ; x += 1.0f) {
        for (CGFloat y = 0 ; y < image.size.height ; y += 1.0f) {
            CGFloat red ;
            CGFloat green ;
            CGFloat blue ;
            CGFloat alpha ;

            [inspector colorAt: (CGPoint) {x, y}
                           red: &red
                         green: &green
                          blue: &blue
                         alpha: &alpha
            ] ;

            if (red == ... && green == ... && blue == ... && alpha == ...) {

            }
        }
    }
} 
```

# android - Android CDT setup std 无法解决

> ID：14736293
> 
> 赞同：1
> 
> 时间：2013-02-06T18:35:25.007
> 
> 标签：android, opencv, android-ndk, eclipse-cdt

我已经用 CDT 编程了一段时间，它运行良好。一般来说，一切都适用，例如，我可以通过键入来很好地导入 opencv

```
using namespace cv; 
```

但是，现在我需要两个不起作用的导入。

```
#include <vector>
using namespace std; 
```

这两个都带有下划线，std 导致编译错误（另一个只是警告）。当我设置它时，[本指南](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html#building-application-native-part-from-eclipse-cdt-builder)告诉我以下包含将消除这些错误：

```
# for NDK r8b and later:
${NDKROOT}/platforms/android-9/arch-arm/usr/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.6/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include
${ProjDirPath}/../../sdk/native/jni/include 
```

然而，这只有助于 opencv 的东西。我正在使用 NDK v r8d（据我所知是最新的）。除了这些之外，我还可以编译和构建它。我将不胜感激任何指向正确方向的指针！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:28:59.207

我不确定为什么 OpenCV Docs 中没有任何地方，但这是你如何编译它：

除了上述包含之外，您还需要包含另外两个（如果还没有的话）。你需要找到你的 c++ 文件在哪里。在 Mac 上，它们将位于 /usr/include。**所以在Project Properties->C/C++ General->Paths and Symbols->Includes Tab**下添加以下两个import

 **```
/usr/include/c++/<your version of c++>
/usr/include 
```

在我的情况下，上面是这样的：

```
/usr/include/c++/4.2.1
/usr/include 
```**

# ruby-on-rails - Rails：避免缓存关联计数

> ID：14736300
> 
> 赞同：1
> 
> 时间：2013-02-06T18:35:40.150
> 
> 标签：ruby-on-rails, rails-activerecord

我有以下 Rails 代码：

```
class Shop < ActiveRecord::Base  
  # ...
  def validate_books_have_authors
    self.books.each do |book|
      # Urghh...caching book.authors unless we call directly
      # puts book.authors
      errors[:books] << t('book.no_authors', :book => book.name) unless book.authors.any?
    end
  end
end 
```

在第一次运行时，验证器将正确处理......但如果我再次运行相同的方法，book.authors.any 的值？返回缓存值*，除非*我取消注释将 book.authors 行

所以，一个简单的问题：我如何确保 book.authors.any 的价值？没有缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:56:40.183

您应该能够使用`exists?`或调用`count`并检查结果是否大于零。

计数通常会慢一些，因为它需要数据库做更多的工作来建立精确的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:52:36.170

供参考：我通过更改 .any? 展示？

# tridion - 如何在 Tridion CWA Web 应用程序中配置环境框架

> ID：14736301
> 
> 赞同：6
> 
> 时间：2013-02-06T18:35:41.650
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ambient

我正在现有的 Tridion CWA Java Web 应用程序中添加环境框架，我对 java 过滤器的映射有一些疑问（环境框架过滤器与 CWA 过滤器）

在 SDL CWA 2011 SP1 文档（在线门户）中，他们说：

> 16 - 如果您打算将环境数据框架与 CWA 结合使用，还请打开 WEB-INF/ 文件夹中的 web.xml 文件并添加以下内容：
> 
> ```
> <filter>
>   <filter-name>Ambient Data Framework</filter-name>
>   <filter-class>com.tridion.ambientdata.web.AmbientDataServletFilter</filter-class>
> </filter>
> <filter-mapping>
>   <filter-name>Ambient Data Framework</filter-name>
>   <servlet-name>Content Delivery Web service</servlet-name>
> </filter-mapping> 
> ```

我不明白这个过滤器映射。在我的网络应用程序中，没有内容交付网络服务。

**我的问题：**

**1 - 这是否意味着环境数据框架需要安装内容交付 Web 服务才能工作**？对我来说，环境数据过滤器的过滤器映射应该与 CWA 请求过滤器的映射相同

```
<filter-mapping>
  <filter-name>cwa</filter-name>
  <url-pattern>my-mapping</url-pattern>
</filter-mapping>
<filter-mapping>
   <filter-name>Ambient Data Framework</filter-name>
   <servlet-name>my-maping</servlet-name>
</filter-mapping> 
```

**2 - PageFileDistributionFilter 和 BinaryFileDistributionFilter 怎么样？**

**3 - 是否有推荐的过滤顺序？在环境数据过滤器之前为 ex 配置 CWA 过滤器？**

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:12:00.433

在＃1：这是一个文档缺陷，应该是这样的：

```
<filter>
  <filter-name>Ambient Data Framework</filter-name>
  <filter-class>com.tridion.ambientdata.web.AmbientDataServletFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>Ambient Data Framework</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在＃2上，是的，您当然仍然需要这两个。

在 #3 上，我*怀疑*您应该首先加载 Ambient Framework，因为这是对非 CWA Web 应用程序的建议（例如，您的过滤器可以使用 Ambient Framework）

# asp.net - 使用日期删除记录

> ID：14736311
> 
> 赞同：1
> 
> 时间：2013-02-06T18:36:20.923
> 
> 标签：asp.net, .net, sql

我有一个作为 CostData 的表，其中我有一个作为 Month_year 的列，格式为 mm/dd/yyyy，现在我想根据日期删除数据。假设我将开始日期指定为 2012 年 1 月 31 日，将结束日期指定为 2013 年 1 月 31 日，它应该删除整个一年的记录。我必须在文本框中输入 start 和 endDate

（“从 CostData 中删除，其中 Month_year 在 {0} 和 {1} 之间”，TextBox2.Text，TextBox1.Text）

这是我正在使用的查询，但它不起作用。Month_year 是日期类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:49:38.323

实际上，我认为您的问题在于您的 SQL 字符串。如果您发布了更多代码，我可以肯定地说，但我怀疑您在上面使用 String.Format 吗？如果是这样，只需将 {0} 和 {1} 括在撇号周围：

```
("Delete from CostData where Month_year between '{0}' and '{1}'", TextBox2.Text, TextBox1.Text) 
```

请考虑使用参数化查询——这种方法容易受到 SQL 注入的影响。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:48:56.330

我有点生疏，但我认为它是这样的：

```
...where month(Month_year) => {0} and month(Month_year) <{1} 
```

# ms-access - 如何在生成表查询运行后自动为表添加索引？

> ID：14736313
> 
> 赞同：0
> 
> 时间：2013-02-06T18:36:26.487
> 
> 标签：ms-access

我有一个自动进程，可以在早上运行一些可生成的查询，我想应用一些索引来加快查询速度。我该怎么做呢？

# php - PHP中的数组总和

> ID：14736314
> 
> 赞同：1
> 
> 时间：2013-02-06T18:36:30.893
> 
> 标签：php, arrays

希望计算 $data 数组的平均值。我需要首先找到数组中值的总和。这是我所拥有的，但它似乎不起作用。

```
$sum = 0;
foreach($data as $value) {
        $sum = $sum+$value;
        return $sum;
}
$count = count($data);

$average = $sum / $count;
echo "Average is $average <br />"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:37:30.567

尝试这个：

```
$total = array_sum($data);
$average = $total / count($data); 
```

或者，如果你喜欢单行：

```
$average = array_sum($data) / count($data); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T18:37:33.423

去除`return`

```
$sum = 0;
foreach($data as $value) {
        $sum = $sum+$value;

}
$count = count($data);

$average = $sum / $count;
echo "Average is $average <br />"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T18:37:55.233

它失败的原因是你不应该有这个`return`声明。`return`仅用于从函数返回。

也就是说，您可以`array_sum()`改用。

# mysql - MySQL GROUP & COUNT 多个表

> ID：14736315
> 
> 赞同：1
> 
> 时间：2013-02-06T18:36:39.077
> 
> 标签：mysql, count, group-by, multiple-tables

我有一个 3 部分的问题，这给我带来了麻烦我知道如果我一次查询 1 个表，如何让表工作，但我似乎无法弄清楚如何将表`tags`和`more_tags`表结合起来以获得相同的结果.

下面列出了我遇到的 3 个主要问题。

**问题 1**

我希望能够从`tags`和`more_tags`表中对相同的标签进行分组。

**问题 2**

我还希望能够显示每个表中不存在于另一个表中的标签。

**问题 3**

我还想计算标签出现在`tags`和`more_tags`表中的总次数。

**MYSQL 表**

```
SELECT `tags`.`tag_id`, `tags`.`tag_name`, COUNT(`tags`.`tag_name`) as 'num' 
FROM `tags` 
INNER JOIN `users` ON `tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL
GROUP BY `tags`.`tag_name` 
ORDER BY `tags`.`tag_name` ASC";

SELECT `more_tags`.`tag_id`, `more_tags`.`tag_name`, COUNT(`more_tags`.`tag_name`) as 'num' 
FROM `more_tags` 
INNER JOIN `users` ON `more_tags`.`user_id` = `users`.`user_id` 
WHERE `users`.`active` IS NULL
GROUP BY `more_tags`.`tag_name` 
ORDER BY `more_tags`.`tag_name` ASC"; 
```

**期望的输出**

```
tag_id  tag_name    num
10  apple   12
192     pear    1
197     bored   1
203     sad     3
207     ads     2
217     news    1
190     bf  1
196     cape    1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:27:26.993

问题1：

```
SELECT tag_id, tag_name, count(*)
FROM (
  SELECT tag_id, tag_name FROM tags
  UNION ALL
  SELECT tag_id, tag_name FROM more_tags
) s
GROUP BY tag_id, tag_name 
```

问题2：

```
SELECT tag_id, tag_name, 'not present in more tags' as description
FROM tags LEFT JOIN more_tags ON tags.tag_id=more_tags.tag_id
WHERE more_tags.tag_id IS NULL
UNION ALL
SELECT tag_id, tag_name, 'not present in tags' as description
FROM tags RIGHT JOIN more_tags ON tags.tag_id=more_tags.tag_id
WHERE tags.tag_id IS NULL 
```

问题3：

```
SELECT tag_id, tag_name, COUNT(*)
FROM tags INNER JOIN more_tags ON tags.tag_id=more_tags.tag_id
GROUP BY tag_id, tag_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:24:48.677

您可以使用 UNION 将两个查询的结果集相加，前提是这些查询返回具有相同结构的行（即，如果第一个查询中的第一列是 int，则第二个查询中的第一列必须是 int ， 等等）。[在http://dev.mysql.com/doc/refman/5.1/en/union.html](http://dev.mysql.com/doc/refman/5.1/en/union.html)中阅读所有相关信息

一旦您编写了两个选择并使用 UNION 语句将它们连接起来，您就可以将其用作 GROUP BY 或其他内容的子查询：

```
SELECT * FROM (
(SELECT 1 AS ticked, col1, col2 FROM table1 INNER JOIN table2 USING (col3))
    UNION
(SELECT 0 AS ticked, col1, col2 FROM table1)
) AS combined_table /*derived tables need a unique name*/
GROUP BY col1 /*group by the unique col1 to stop duplicates*/
ORDER BY ticked DESC 
```

# android - 在 Android 中为 Api < 11 调整大小和移动图像

> ID：14736318
> 
> 赞同：0
> 
> 时间：2013-02-06T18:36:58.790
> 
> 标签：android, image-processing, android-imageview

我一直在努力实现

1.  拖放（移动）Api < 11

2.  调整大小（大于原始图像）

是否有任何外部库可以让我们在 View 中调整和移动图像的大小？

欢迎使用外部材料、API、图书馆和链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:08:47.973

玩弄工作`Matrix()`并`onTouchListener()`完成工作。

```
public class CustomizeActivity extends Activity {
private static final String TAG = "Touch" ;
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();
PointF start = new  PointF();
public static PointF mid = new PointF();

public static final int NONE = 0;
public static final int DRAG = 1;
public static final int ZOOM = 2;
public static int mode = NONE;
float oldDist;

private float[] matrixValues = new float[9];

public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
iv=new ImageView(this);
iv.setOnTouchListener(t);
}
 OnTouchListener t=new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

        ImageView view = (ImageView) v;

        switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:

            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG" );
            mode = DRAG;
            break;

        case MotionEvent.ACTION_POINTER_DOWN:

            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {

                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM" );
            }
            break;

        case MotionEvent.ACTION_MOVE:

            if (mode == DRAG) {

                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
            }
            else if (mode == ZOOM) {

                float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 10f) {

                    matrix.set(savedMatrix);
                    float scale = newDist / oldDist;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:

            mode = NONE;
            Log.d(TAG, "mode=NONE" );
            break;
        }

        // Perform the transformation
        view.setImageMatrix(matrix);

        return true; // indicate event was handled
    }

      private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event) {

        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }
};
  } 
```

# javascript - 谷歌浏览器框架和大画布

> ID：14736319
> 
> 赞同：2
> 
> 时间：2013-02-06T18:37:00.563
> 
> 标签：javascript, html, internet-explorer, google-chrome, canvas

我需要将 Google Chrome Frame 连接到我的项目。它基于Canvas，很多大元素。一切都很好，GHF 工作正常，购买...当画布的平方大于 2 ^(16)时，它不能正常工作。例如，如果画布的大小为 256x256 或 512x128 - 它可以工作，就像在 Chrome 中一样。但如果尺寸是 257x256 或 515x128 - 我的画布上什么都没有。

在 IE7 和 IE8 中检查。

这是我的测试代码：[http ://theshock.github.com/trash/chrome-frame-fail.html](http://theshock.github.com/trash/chrome-frame-fail.html)

这是 IE8 中的结果。你可以看到，矩形在较小的画布中正确绘制，但较大的画布清晰：

![在此处输入图像描述](../Images/24e1a601f5b71b596d70b69ff3f88afe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:35:52.723

升级到 Chrome 25.0.1364.160 解决了我在 Chrome Frame 和 Chrome 独立版中的问题。

# python - 字符分布

> ID：14736322
> 
> 赞同：-5
> 
> 时间：2013-02-06T18:37:05.813
> 
> 标签：python, string, character

如何在 Python 中解决这个问题？

请输入一串文字（越大越好）：西班牙的雨主要停留在平原。《西班牙的雨主要停留在平原》中的人物分布。是：

```
iiiiii
nnnnnn
aaaaa
sss
ttt
ee
hh
ll
pp
yy
m
r 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:44:56.670

这会打印出准确的输出：

```
dist={}
ex='The rain in Spain stays mainly in the plain.'
for ch in ex.lower():
    if ch.isalpha(): dist.setdefault(ch,[]).extend(ch)

out={k:''.join(val) for k,val in dist.iteritems()}.values()
print '\n'.join(sorted(out, key=lambda x: (-len(x),x))) 
```

印刷：

```
iiiiii
nnnnnn
aaaaa
sss
ttt
ee
hh
ll
pp
yy
m
r 
```

# erlang - 如何更改 erlang 中 gen_server 的回调模块？(gen_server:swap_handler)

> ID：14736323
> 
> 赞同：0
> 
> 时间：2013-02-06T18:37:07.710
> 
> 标签：erlang, erlang-otp, gen-server, dev-to-production

我正在构建一个可以以两种模式运行的应用程序。沙盒模式和生产模式。

在沙盒模式下，我想在我的 gen_server 中对数据库进行许多检查：如果表不存在，则创建它；如果列不存在，则添加它；如果列类型不允许我要存储的值然后更改它，等等。

在生产模式下，如果表不存在或列与值的类型不匹配，则会失败，没关系。

因此，为了避免像“case State#state.is_sandbox of true -> ...”这样的繁琐代码，我想为我的 gen_server 设置两个不同的模块，并且我想在 handle_call 或句柄信息。

实际上，我只是想从沙盒转到生产，但我认为如果它以这种方式工作，它可以向后工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:12:41.710

您可以将`module`模块名称添加到 gen_server 中的状态中。然后，您将需要 2 个模块 - 沙盒和生产，它们都实现了相同的功能（您可以为它创建一个行为）。

gen_server 回调将调用`module:function`来自沙盒或生产模块的函数。`module`可以在 gen_server 的函数中设置，`init`要更改它，只需向 gen_server 添加一个新函数：

```
use_production() ->
    gen_server:cast(production).

....

handle_cast(production, State) ->
    {noreply, State#state{module = production}). 
```

沙盒模块也是如此。

带有 gen_server 的回调示例`module`：

```
handle_call(Msg, _From, #state{module = Module} = State) ->
    Module:function(Msq),
    {reply, ok, State}. 
```

`function`必须在沙盒和生产模块中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:42:18.353

您可以使用获取模块名称`os:getenv/1`（当然在此之前您必须在不同的环境中设置不同的名称）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:11:15.797

您可以将 a`gen_event`与单个处理程序一起使用，这允许您返回一个`swap_handler`元组（请参阅[gen_event/handle_*](http://www.erlang.org/doc/man/gen_event.html#Module%3ahandle_call-2)）

此外，您不必在 gen_server 模型中使用 case 语句。如果您的状态包含沙箱变量，您可以通过在标头中绑定沙箱值来为您的回调函数定义不同的子句。例如：

```
handle_call(do_stuff, _From, State = #state{sandbox = true}) ->
    do_sandbox_stuff();
handle_call(do_stuff, _From, State) ->
    do_nonsandbox_stuff(). 
```

在此设置中，erlang 会根据沙箱变量的值自动选择要触发的正确子句，而无需定义单独的处理程序或使用 case 语句。以这种方式在函数子句中绑定变量也是提高效率的好习惯（因为变量绑定在函数体之外，绑定过程在调度程序中完成，因此不计入函数的执行时间，而所有匹配都是在一个案例中的函数体内完成的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T20:52:24.157

而不是`gen_server`你可以使用`gen_fsm`的*有限状态机*，它可以很容易地处理这种情况。您只有多个状态，它们根据状态调用不同模块中的函数。它基本上为您完成所有处理，无需携带显式`state`参数。这基本上是手动实现 FSM。

# java - 寻找使用 servlet 过滤器将内容插入响应的示例

> ID：14736328
> 
> 赞同：36
> 
> 时间：2013-02-06T18:37:32.540
> 
> 标签：java, tomcat6, servlet-filters

我一直在网络和 stackoverflow 中搜索某人使用 servlet 过滤器将内容插入响应的示例，但只能找到人们捕获/压缩输出和/或更改标头的示例。我的目标是在所有 HTML 响应的结束 </body> 之前附加一大块 HTML。

我正在研究一种扩展 HttpServletResponseWrapper 以使用我自己的 PrintWriter 的解决方案，然后覆盖其上的写入方法。在 write 方法中，我存储最后 7 个字符以查看它是否等于结束正文标记，然后我编写我的 HTML 块加上结束正文标记，然后继续对文档的其余部分进行正常写入操作。

我觉得一定有人已经解决了这个问题，而且可能比我更优雅。我将不胜感激任何有关如何使用 servlet 过滤器将内容插入响应的示例。

更新

回应评论，我也试图从[http://www.oracle.com/technetwork/java/filters-137243.html](http://www.oracle.com/technetwork/java/filters-137243.html)实现 CharResponseWrapper 。这是我的代码：

```
PrintWriter out = response.getWriter();
CharResponseWrapper wrappedResponse = new CharResponseWrapper(
        (HttpServletResponse)response);

chain.doFilter(wrappedRequest, wrappedResponse);
String s = wrappedResponse.toString();

if (wrappedResponse.getContentType().equals("text/html") &&
        StringUtils.isNotBlank(s)) {
    CharArrayWriter caw = new CharArrayWriter();
    caw.write(s.substring(0, s.indexOf("</body>") - 1));
    caw.write("WTF</body></html>");
    response.setContentLength(caw.toString().length());
    out.write(caw.toString());
}
else {
    out.write(wrappedResponse.toString());
}

out.close(); 
```

我也在包装请求，但该代码有效并且不应该影响响应。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-06T23:57:45.060

我正在使用的代码库在处理响应时调用 getOutputStream 方法，而不是 getWriter ，因此其他答案中包含的示例无济于事。这是一个更完整的答案，它适用于 OutputStream 和 PrintWriter，如果写入器被访问两次，甚至会正确出错。这源自一个很好的例子，[DUMP REQUEST AND RESPONSE USING JAVAX.SERVLET.FILTER](http://angelborroy.wordpress.com/2009/03/04/dump-request-and-response-using-javaxservletfilter/)。

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class MyFilter implements Filter
{
    private FilterConfig filterConfig = null;

    private static class ByteArrayServletStream extends ServletOutputStream
    {
        ByteArrayOutputStream baos;

        ByteArrayServletStream(ByteArrayOutputStream baos)
        {
            this.baos = baos;
        }

        public void write(int param) throws IOException
        {
            baos.write(param);
        }
    }

    private static class ByteArrayPrintWriter
    {

        private ByteArrayOutputStream baos = new ByteArrayOutputStream();

        private PrintWriter pw = new PrintWriter(baos);

        private ServletOutputStream sos = new ByteArrayServletStream(baos);

        public PrintWriter getWriter()
        {
            return pw;
        }

        public ServletOutputStream getStream()
        {
            return sos;
        }

        byte[] toByteArray()
        {
            return baos.toByteArray();
        }
    }

    public class CharResponseWrapper extends HttpServletResponseWrapper
    {
        private ByteArrayPrintWriter output;
        private boolean usingWriter;

        public CharResponseWrapper(HttpServletResponse response)
        {
            super(response);
            usingWriter = false;
            output = new ByteArrayPrintWriter();
        }

        public byte[] getByteArray()
        {
            return output.toByteArray();
        }

        @Override
        public ServletOutputStream getOutputStream() throws IOException
        {
            // will error out, if in use
            if (usingWriter) {
                super.getOutputStream();
            }
            usingWriter = true;
            return output.getStream();
        }

        @Override
        public PrintWriter getWriter() throws IOException
        {
            // will error out, if in use
            if (usingWriter) {
                super.getWriter();
            }
            usingWriter = true;
            return output.getWriter();
        }

        public String toString()
        {
            return output.toString();
        }
    }

    public void init(FilterConfig filterConfig) throws ServletException
    {
        this.filterConfig = filterConfig;
    }

    public void destroy()
    {
        filterConfig = null;
    }

    public void doFilter(
            ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException
    {
        CharResponseWrapper wrappedResponse = new CharResponseWrapper(
                (HttpServletResponse)response);

        chain.doFilter(request, wrappedResponse);
        byte[] bytes = wrappedResponse.getByteArray();

        if (wrappedResponse.getContentType().contains("text/html")) {
            String out = new String(bytes);
            // DO YOUR REPLACEMENTS HERE
            out = out.replace("</head>", "WTF</head>");
            response.getOutputStream().write(out.getBytes());
        }
        else {
            response.getOutputStream().write(bytes);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-06T19:08:27.733

您将需要实现 HttpServletResponseWrapper 来修改响应。请参阅此文档[The Essentials of Filters](http://www.oracle.com/technetwork/java/filters-137243.html)，它有一个转换响应的示例，这比您想要的要多

**编辑**

我尝试了一个带有响应过滤器的简单 Servlet，它运行良好。Servlet 输出字符串`Test`，响应过滤器将字符串附加到它上面`filtered`，最后当我从浏览器运行时，我得到了`Test filtered`你想要实现的响应。

我确实在 Apache Tomcat 7 上运行了以下代码，它毫无例外地工作。

**小服务程序：**

```
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

   response.getWriter().println("Test");

} 
```

**筛选：**

```
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    System.out.println("BEFORE filter");
    PrintWriter out = response.getWriter();
    CharResponseWrapper responseWrapper = new CharResponseWrapper(
            (HttpServletResponse) response);

    chain.doFilter(request, responseWrapper);

    String servletResponse = new String(responseWrapper.toString());

    out.write(servletResponse + " filtered"); // Here you can change the response

    System.out.println("AFTER filter, original response: "
            + servletResponse);

} 
```

**CharResponseWrapper**（和文章一样）

```
public class CharResponseWrapper extends HttpServletResponseWrapper {
    private CharArrayWriter output;

    public String toString() {
        return output.toString();
    }

    public CharResponseWrapper(HttpServletResponse response) {
        super(response);
        output = new CharArrayWriter();
    }

    public PrintWriter getWriter() {
        return new PrintWriter(output);
    }
} 
```

**web.xml**

```
<servlet>
    <servlet-name>TestServlet</servlet-name>
    <servlet-class>TestServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>TestServlet</servlet-name>
    <url-pattern>/TestServlet</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>TestFilter</filter-name>
    <filter-class>MyFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>TestFilter</filter-name>
    <url-pattern>/TestServlet/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-13T15:37:08.340

iTech 的答案部分对我有用，这是基于该响应..

但是您必须注意，似乎***某些 Web 服务器***（和 AppEngine 标准）***在第一次调用***过滤器内的 chain.doFilter 后关闭了 outputStream..

因此，当您需要在预先保存的 PrintWritter 上进行写入时，流将关闭并且您会看到一个空白屏幕。（我什至没有收到错误来意识到发生了什么）。

所以我的解决方案是创建一个“虚拟”ServletOutputStream 并返回到我的 ResponseWrapper 的 getOutputStream 方法中。

这些更改加上 iTech 的解决方案使我能够在 json 响应中的 html 中插入完全呈现的 jsp 响应（正确转义引号等冲突字符）。

这是我的代码：

**我的过滤器**

```
@WebFilter({"/json/*"})    
public class Myfilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        //Save original writer
        PrintWriter out = response.getWriter(); 
        //Generate a response wrapper with a different output stream
        ResponseWrapper responseWrapper = new ResponseWrapper((HttpServletResponse) response);
        //Process all in the chain (=get the jsp response..)
        chain.doFilter(request, responseWrapper);
        //Parse the response
        out.write("BEFORE"+responseWrapper.toString()+"AFTER"); //Just + for clear display, better use a StringUtils.concat
    }
    @Override
    public void destroy() {}
} 
```

我的**ResponseWrapper**：

```
public class ResponseWrapper extends HttpServletResponseWrapper {
    private StringWriter output;
    public String toString() {
        return output.toString();
    }
    public ResponseWrapper(HttpServletResponse response) {
        super(response);
        //This creates a new writer to prevent the old one to be closed
        output = new StringWriter();
    }
    public PrintWriter getWriter() {
        return new PrintWriter(output,false);
    }
    @Override
    public ServletOutputStream getOutputStream() throws IOException {
        //This is the magic to prevent closing stream, create a "virtual" stream that does nothing..
        return new ServletOutputStream() {
            @Override
            public void write(int b) throws IOException {}
            @Override
            public void setWriteListener(WriteListener writeListener) {}
            @Override
            public boolean isReady() {
                return true;
            }
        };
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-04T17:14:22.750

伟大的！但请更新内容长度，

```
 String out = new String(bytes);
        // DO YOUR REPLACEMENTS HERE
        out = out.replace("</head>", "WTF</head>");
        response.setContentLength(out.length());
        response.getOutputStream().write(out.getBytes()); 
```

# javascript - 如何仅在 div 中设置 TOP 水平滚动？

> ID：14736332
> 
> 赞同：1
> 
> 时间：2013-02-06T18:37:36.073
> 
> 标签：javascript, jquery, html

将顶部水平滚动条放在 div 上的最简单方法是什么？

我找到了这个解决方案，但它必须同时具有顶部和底部滚动。我只想要上一个。

[表格顶部和底部的水平滚动条](https://stackoverflow.com/questions/3934271/horizontal-scrollbar-on-top-and-bottom-of-table)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:38:54.087

给你...（经许可从@ascii-lime 回答“被盗”:)

该解决方案将与您提供的链接中的解决方案相同，除了溢出：隐藏添加到 .wrapper2 的 CSS 中。

```
$(function(){
    $(".wrapper1").scroll(function(){
    $(".wrapper2")
        .scrollLeft($(".wrapper1").scrollLeft());
});
$(".wrapper2").scroll(function(){
    $(".wrapper1")
        .scrollLeft($(".wrapper2").scrollLeft());
    });
}); 
```

这是更新的CSS：

```
.wrapper1, .wrapper2{width: 300px; border: none 0px RED;
overflow-x: scroll; overflow-y:hidden;}
.wrapper1{height: 20px; }
.wrapper2{height: 200px; overflow: hidden;}
.div1 {width:1000px; height: 20px; }
.div2 {width:1000px; height: 200px; background-color: #88FF88;
overflow: auto;} 
```

和 HTML：

```
<div class="wrapper1">
    <div class="div1">
    </div>
</div>
<div class="wrapper2">
    <div class="div2">
    aaaa bbbb cccc dddd aaaa bbbb cccc dddd aaaa bbbb cccc dddd aaaa bbbb cccc dddd aaaa bbbb     cccc dddd aaaa bbbb cccc dddd aaaa bbbb cccc dddd
    </div>
</div> 
```

# hibernate - Hibernate 插入后事件意外行为

> ID：14736334
> 
> 赞同：0
> 
> 时间：2013-02-06T18:37:40.167
> 
> 标签：hibernate, events, exception, insert

我正在使用 Hibernate 3.5.6 尝试使用 Post-Insert 事件侦听器。我遇到了一种似乎与后处理事件的概念不一致的行为。我去向数据库提交一个对象，这会导致刷新会话并触发插入后事件。在触发后插入事件后，它会进行一些处理并最终抛出一个错误，然后一直返回到原始事务。正是在这里捕获了错误。我无法从此时回滚事务，并且数据库中没有条目。如果删除了插入后事件侦听器，我已经确认我的代码按预期执行。

休眠中的任何事后事件的预期行为是否会影响原始事务？我的理解是 post 事件应该完全独立于原始交易。

请参阅下面的代码段和堆栈跟踪。

**堆栈跟踪**

```
at ems.server.domain.IpeManager.getCrcMessage(IpeManager.java:113) ~[bin/:na]
at ems.shared.hibernateEvents.PostInsertListener.onPostInsert(PostInsertListener.java:34) [bin/:na]
at org.hibernate.action.EntityInsertAction.postInsert(EntityInsertAction.java:148) [hibernate3.jar:3.5.6-Final]
at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:127) [hibernate3.jar:3.5.6-Final]
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:267) [hibernate3.jar:3.5.6-Final]
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:259) [hibernate3.jar:3.5.6-Final]
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:178) [hibernate3.jar:3.5.6-Final]
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) [hibernate3.jar:3.5.6-Final]
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51) [hibernate3.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206) [hibernate3.jar:3.5.6-Final]
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:375) [hibernate3.jar:3.5.6-Final]
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137) [hibernate3.jar:3.5.6-Final]
at ems.server.database.dao.Dao.saveOrUpdate(Dao.java:30) [bin/:na]
at ems.server.database.dao.IpeComponentDao.insertComponent(IpeComponentDao.java:29) [bin/:na]
at ems.server.domain.NetworkManager.insertIpeConfig(NetworkManager.java:2876) [bin/:na] 
```

**道类**

```
Session session = HibernateUtil.currentSession();
Transaction tx = null;
try {
       tx = session.beginTransaction();
       session.saveOrUpdate(obj);
       tx.commit();
       return obj;
} catch (ConstraintViolationException e) {
       if (tx != null)
              tx.rollback();
       throw e;
} catch (HibernateException he) {
       if (tx != null)
              tx.rollback();
       throw new HibernateException("Could not save object of class " + obj.getClass().getName(), he);
} 
```

**休眠.cfg.xml**

```
<event type="post-insert">
        <listener class="ems.shared.hibernateEvents.PostInsertListener"/>
</event> 
```

**PostInsertListener 类**

```
package ems.shared.hibernateEvents;

import java.util.*;

import org.hibernate.event.PostInsertEvent;
import org.hibernate.event.PostInsertEventListener;

public class PostInsertListener implements PostInsertEventListener{

       private static final long serialVersionUID = 2L;

       public void onPostInsert(PostInsertEvent event)  {
          //DO SOME PROCESSING HERE
       }      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T06:13:35.523

我知道这是一个旧线程，但是在研究相同的问题时，我在这里找到了建议的解决方案：

[Hibernate 事件监听器 - 回滚](https://stackoverflow.com/questions/12149870/hibernate-event-listeners-rollback)

希望它对将来的人有所帮助。

玛格丽特

# php - 在 php 中调用 html 表单 onsubmit

> ID：14736336
> 
> 赞同：0
> 
> 时间：2013-02-06T18:37:42.987
> 
> 标签：php, javascript, html

这是示例代码

```
<form name="login" onSubmit="return doLogin()">
   //here is some form elements
</form>
<script type="text/javascript">
function doLogin(){
    //Here is javascript code
}
<script>
<?php      //How call javascript from PHP ?> 
```

我怎样才能从 PHP 调用 javascript 代码。对不起，错误的代码粘贴..但只有在这个网站上我不能发布正常的代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:30:47.397

您的意思是在表单 POST 由 MySQL 数据库使用 php 脚本进行身份验证之后，您需要重定向到 Microtik 服务器，但是您必须再次传递一些 php 脚本接收到的 POSTED 值......？

在脚本中进行身份验证后，您可以使用 php [curl](http://php.net/manual/en/book.curl.php)进行重定向。或者，如果 Microtik 服务器登录接受 GET 变量，您可以尝试类似

```
<?php
    Header("Location: http://microtikurl/index.php?username=" . $_POST["username"])
?> 
```

或者，您可以创建另一个 HTML 页面来调用其`doLogin()`函数（重定向到 Microtik 服务器），如下所示：

```
<?php 
  //  authenticate POSTED values here against MySQL database
?>
<html>
etc...
<body onload="doLogin('<php echo $_POST["username"]; ?>');">
<script type='text/javascript'>
    function doLogin(username) {
      // etc...
      // use `window.location = ''`, or ajax, or create and `submit()` a hidden form on this page.         }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:42:26.157

> *我怎样才能从 PHP 调用 javascript 代码。对不起，糟糕的代码粘贴..但只有在这个网站上我不能发布正常的代码！*

问你应接受。

```
<?php
    $jsFunction='window.myJavaScriptFunction';
    echo '<script>'.$jsFunction.'();</script>';
?> 
```

添加参数由您决定。你只是没有得到任何返回值，除非你的 JavaScript 会回发或其他什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:46:10.033

您是否希望将数据发布到 PHP 页面？如果是这样，您应该查看 jQuery 的 Ajax 功能：
[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果您希望提交表单但不进行页面更改或其他任何操作，您可能希望 JavaScript 函数返回 false。

我直接从 jQuery 的演示页面中获取了这个：

```
$.ajax({
    type: "POST",
    url: "some.php",
    data: { 
        name: "John", 
        location: "Boston" 
    }
}).done(function( msg ) {
    alert( "Data Saved: " + msg );
}); 
```

您还可以获得 res.responseText 其中 res 被传递到回调

# java - Kryo 无法序列化 java.sql.Timestamp？

> ID：14736339
> 
> 赞同：0
> 
> 时间：2013-02-06T18:37:53.413
> 
> 标签：java, scala, kryo

**编辑：**使用 Kryo 1.04

我现在正在序列化一个`User`包含`java.sql.Timestamp`Scala 字段的类。由于某种原因，Kryo 找不到零参数的构造函数并抛出错误：

```
Caused by: com.esotericsoftware.kryo.SerializationException: Class cannot be created (missing no-arg constructor): java.sql.Timestamp
Serialization trace:
created (com.threetierlogic.AccountService.models.User)
        at com.esotericsoftware.kryo.Kryo.newInstance(Kryo.java:688)
        at com.esotericsoftware.kryo.Serializer.newInstance(Serializer.java:75)
        at com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:200)
        at com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)
        at com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:200)
        at com.esotericsoftware.kryo.Serializer.readObject(Serializer.java:61)
        at com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:589)
        ... 84 more
Caused by: java.lang.InstantiationException: java.sql.Timestamp
        at java.lang.Class.newInstance0(Class.java:340)
        at java.lang.Class.newInstance(Class.java:308)
        at com.esotericsoftware.kryo.Kryo.newInstance(Kryo.java:676)
        ... 90 more 
```

这是为 Riak 转换域对象的转换器类的一部分。这是我的转换器类：

```
/**
 * Kryo converter for passing domain objects into Riak
 */
class UserConverter(val bucket: String) extends Converter[User] {

  def fromDomain(domainObject: User, vclock: VClock): IRiakObject = {
    val key = domainObject.guid

    if(key == null) throw new NoKeySpecifedException(domainObject)

    val kryo = new Kryo()
    kryo.register(classOf[User])
    kryo.register(classOf[Timestamp])

    val ob = new ObjectBuffer(kryo)
    val value = ob.writeObject(domainObject)

    RiakObjectBuilder.newBuilder(bucket, key)
        .withValue(value)
        .withVClock(vclock)
        .withContentType(Constants.CTYPE_OCTET_STREAM)
        .build()
  }

  def toDomain(riakObject: IRiakObject): User = {
    if(riakObject == null) null

    val kryo = new Kryo()
    kryo.register(classOf[User])
    kryo.register(classOf[Timestamp])
    val ob = new ObjectBuffer(kryo)

    ob.readObject(riakObject.getValue(), classOf[User])
  }
} 
```

我是否需要扩展 Timestamp 并创建一个零参数构造函数？还是有更好的解决方法？

如果我需要升级到 2.20，`ObjectBuffer`不写入文件的替换是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:19:07.427

快速浏览一下[Kryo 主页](http://code.google.com/p/kryo/)表明，在没有零参数构造函数的情况下，您可以创建 Kryo 所谓的“实例化策略”来处理该类。查看[“对象创建”](http://code.google.com/p/kryo/#Object_creation)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:00:40.323

你可以这样做：

```
 class KryoSO {
    import com.esotericsoftware.kryo.KryoSerializable
    import de.javakaffee.kryoserializers.KryoReflectionFactorySupport
    import com.esotericsoftware.kryo.Kryo
    import com.esotericsoftware.kryo.Serializer
    import java.io.{ InputStream, OutputStream }
    import com.esotericsoftware.kryo.io.{ Output, Input }
    import java.sql.Timestamp

    object TimestampSerializer extends Serializer[Timestamp] {
      override def write(kryo: Kryo, output: Output, t: Timestamp): Unit = {
        output.writeLong(t.getTime(), true);
      }

      override def read(kryo: Kryo, input: Input, t: Class[Timestamp]): Timestamp = {
        new Timestamp(input.readLong(true));
      }

      override def copy(kryo: Kryo, original: Timestamp): Timestamp = {
        new Timestamp(original.getTime());
      }
    }
    val kryo: Kryo = new KryoReflectionFactorySupport
    kryo.addDefaultSerializer(classOf[Timestamp], TimestampSerializer)

    def serialize(o: Any, os: OutputStream) = {
      val output = new Output(os);
      this.kryo.writeClassAndObject(output, o);
      output.flush();
    }

    def deserialize(is: InputStream): Any = {
      kryo.readClassAndObject(new Input(is));
    }

  }
  val k = new KryoSO
  val b = new java.io.ByteArrayOutputStream
  val timestamp = new java.sql.Timestamp(System.currentTimeMillis())

  k.serialize(timestamp, b)

  val result = k.deserialize(new java.io.ByteArrayInputStream(b.toByteArray()))

  println(timestamp)
  println(result.getClass)
  println(result.isInstanceOf[java.sql.Timestamp])
  println(timestamp == result) 
```

结果 ：

```
2013-02-07 10:59:19.482
class java.sql.Timestamp
true
true 
```

# java - 多行 Java 数组声明。

> ID：14736343
> 
> 赞同：-4
> 
> 时间：2013-02-06T18:38:01.420
> 
> 标签：java, arrays

你好！

我刚开始学习Java，我想知道在声明数组时是否可以将数组元素放在多行中。

以下代码给了我一个错误：

```
public String[] songList = {'Stadium Arcadium', 'Make You Feel Better', 'Under The Bridge',
       'Wet Sand', 'Californication', 'Charlie', 'Aeroplane', 'Transcending', 'Ethiopia'}; 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T18:40:08.313

是的，您可以将字符串放在多行上。

但是，使用双引号将您的字符串文字括起来：

```
public String[] songList = {"Stadium Arcadium", "Make You Feel Better", "Under The Bridge",
       "Wet Sand", "Californication", "Charlie", "Aeroplane", "Transcending", "Ethiopia"}; 
```

这是关于[字符串文字的链接](http://java.about.com/od/understandingdatatypes/a/The-String-Literal.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:45:08.023

问题不在于在多行中声明数组元素，而在于**您如何声明您的数组元素**
看到您有数组类型，`String`并且`String`类型需要用`" "`（双引号）而不是单引号（用于字符）括起来，
只需声明您的数组作为：
`public String[] songList = {"Stadium Arcadium", "Make You Feel Better", "Under The Bridge", "Wet Sand", "Californication", "Charlie", "Aeroplane", "Transcending", "Ethiopia"};`

# vb.net - 激活后如何保持列表视图行突出显示？

> ID：14736344
> 
> 赞同：0
> 
> 时间：2013-02-06T18:38:02.877
> 
> 标签：vb.net, winforms

我正在开发一个使用列表视图的应用程序。当您从列表视图中选择一行时，它会突出显示，但是当我双击它以激活列表视图项目时，它不再突出显示。如何让列表视图项目在激活时保持突出显示，这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:33:36.607

听起来你不知何故失去了控制的焦点。 *如果*该逻辑是正确的，那么您可以设置列表视图的`.HideSelection = False`属性以在控件失去焦点时保留视觉选择。

# jvm - 为什么JVM在启动时会随着时间的推移更快地执行相同的程序？

> ID：14736345
> 
> 赞同：0
> 
> 时间：2013-02-06T18:38:03.540
> 
> 标签：jvm, java

我写了一个简单的数独求解器。为了粗略测试我使用简单的*System.currentTimeMillis*调用的性能。

我在文本文件中准备了一组初始数独配置。程序读取文件并解决每个数独配置。在运行测试时，我注意到前 3-4 次求解运行确实比其他运行慢，而且慢我的意思是数量级。

有示例伪代码片段：

```
main(){
     while(file has lines){
         configuration = readLine();
         Solver s = new Solver(configuration);

         now1 = System.currentTimeMillis();
         s.solve();
         now2 = System.currentTimeMillis();

         System.out.print(now2 - now1);
     }
} 
```

我只测量*solve()*方法，所以 IO 不是问题，我什至将一些数据硬编码到程序中 - 前几个仍然慢。谜题的难度也不是问题，因为我尝试了不同的排列和配置难度，并且总是相同 - 前几个较慢。

我的问题是 - 为什么会这样，有没有办法防止它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:39:14.990

这是*应该*发生的。JIT 编译器会优化随着程序运行时间的延长而更频繁地调用的代码。

这仅反映了您用于测试性能的技术在 Java 中根本不可靠的一般事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:47:53.773

在实践中，方法`JIT`在第一次调用时不会被编译`JVM`。对于每个方法，`JVM`维护一个`call count`，每次调用该方法时都会递增。解释一个方法，`JVM`直到它`call count`超过一个`JIT compilation threshold`。因此，**经常使用** `methods`的是在启动`compiled`之后不久`JVM`，而**较少使用** `methods`的是在很久以后编译，或者根本不编译。这`JIT compilation Threshold`有助于`JVM`快速启动。

> 因此， Java 程序中**最繁忙的方法**总是被最 *积极*地优化，从而在每次被程序调用时提高其执行速度。

[**这**](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.lnx.70.doc/diag/understanding/jit_overview.html)是上述信息的来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T18:45:41.463

在性能测试活动中，我们总是会运行被测试的系统一段时间以使其达到稳定状态。只有这样我们才能开始性能指标。您可以尝试相同的方法：在捕获指标之前多次运行 solve() 方法。

# apache - 在 /virtuserdir/access_log 和 /var/log/httpd/access_log 中创建 Apache 日志虚拟主机流量

> ID：14736346
> 
> 赞同：1
> 
> 时间：2013-02-06T18:38:09.360
> 
> 标签：apache, logging, virtualhost

我知道我可以通过在 VirtualHosts 配置中定义它来为虚拟主机生成 apache 日志流量，如下所示：

```
<VirtualHost 1.1.1.1>
DocumentRoot /home/virtuser/html
ServerName www.virtdomain.org
CustomLog /home/virtuser/logs/access_log common
</VirtualHost> 
```

但是，该虚拟主机的流量不再记录在主文件 /var/log/http/access_log 中。

有没有办法让它（访问和错误）在两个地方都记录？

网络开发人员希望实时访问 apache 日志以调试 html 页面，因此他们需要虚拟主机日志文件，但如果所有命中都记录在 1 个文件中以收集统计信息、监视黑客尝试等，那么在管理方面对我来说会更容易.

# python - 打开一个 csv 作为整数列表

> ID：14736347
> 
> 赞同：1
> 
> 时间：2013-02-06T18:38:12.200
> 
> 标签：python, csv, integer

我是一个试图自学 Python 的新手。我有一个包含一堆数字的文件，我想将它们作为整数“导入”到 python 列表中（或者至少这是我认为我想要做的）。我似乎遇到了问题，但我不明白它是什么。以下是有关我的问题和我尝试过的代码的一些详细信息：

我有一个 DNA 序列（例如一串约 150,000 个字母），我想让 python 转到该字符串中的某个位置，然后在该位置左侧打印 150 个字母，该位置的字母被正方形包围括号，然后是该位置右侧的 150 个字母。我需要对字符串中 >100 个位置执行此操作。我在单独的文件中有这些职位的列表。我发现 Biopython 有一个对象可以为我处理很长的字符串，如果我告诉 python 我想要什么位置（例如手动分配），我可以切片这个字符串并获得正确的输出。现在我希望能够从另一个文件中导入我的目标位置，然后让 python 迭代地遍历该列表并将输出打印到另一个文件。第一部分是我遇到一些麻烦的地方。

我尝试了几种不同格式的输入文件。像这样的一个：

```
500,1000,15000 
```

还有一个像这样的（所有位置在不同的行上）：

```
500

1000

15000 
```

根据我阅读的其他一些帖子，我尝试了几件事。这是一个：

```
from Bio import SeqIO
import csv

with open('Results.fa', 'a') as f1:
    Reference = SeqIO.read("GEO5FinalAssembly2SC.fa", "fasta") # Biopython
    DataFile = open('TestFile.csv', 'r')
    DataReader = csv.reader(DataFile)
    SNP = []
    for row in DataReader:
        SNP.append(row)
    for i in SNP:
        IA=i-151  #Creating the intervals
        IB=i-1
        JA=i+1
        JB=i+151
        Fragment = Reference.seq[IA:IB] + "[" + Reference.seq[i] + "]" + Reference.seq[JA:JB]
        F = str(Fragment)      #Need to turn Fragment into a string that can be written
        header = ">MINT_SNP" + str(i) + "\n"
        f1.write(header)
        f1.write(F)
        f1.write("\n") 
```

这将返回错误：

```
Traceback (most recent call last):
  File "./ReferenceSplitter3.py", line 15, in <module>
    IA=i-151  #Creating the intervals
TypeError: unsupported operand type(s) for -: 'list' and 'int' 
```

我也试过这个：

```
from Bio import SeqIO
import csv

with open('Results.fa', 'a') as f1:
    Reference = SeqIO.read("GEO5FinalAssembly2SC.fa", "fasta")
    with open('TestFile.txt', 'r') as Input:
        rows = csv.reader(Input, quoting=csv.QUOTE_NONNUMERIC)
        SNP = [[item for number, item in enumerate(row)] for row in rows]       
    for i in SNP:
        IA=i-151  #Creating the intervals
        IB=i-1
        JA=i+1
        JB=i+151
        Fragment = Reference.seq[IA:IB] + "[" + Reference.seq[i] + "]" + Reference.seq[JA:JB]
        F = str(Fragment)      #Need to turn Fragment into a string that can be written
        header = ">SNP" + str(i) + "\n"
        f1.write(header)
        f1.write(F)
        f1.write("\n") 
```

这给出了类似的错误：

```
Traceback (most recent call last):
  File "./ReferenceSplitter4.py", line 13, in <module>
    IA=i-151  #Creating the intervals
TypeError: unsupported operand type(s) for -: 'list' and 'int' 
```

但是，当我像这样 SNP = (500,1000,1500) 自己定义一个整数列表时，它似乎工作得很好。我想知道我是否在这里遗漏了一些基本的 python 概念。抱歉，如果这是一个非常基本的问题，但任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:41:56.677

对于它们都在以逗号 ( `500,1000,10000`) 分隔的同一行的输入，您可以使用以下命令读入：

```
SNP = next(DataReader) 
```

对于它们各自位于不同行的输入，请执行以下操作：

```
SNP = []
for row in DataReader:
    SNP.append(row[0]) 
```

要么将设置`SNP`为数字列表，例如`[500, 1000, 15000]`，然后您就可以迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:22:08.667

如果其他人有兴趣这样做（使用 Biopython），这应该可以。下面的脚本将找到 SNP 周围的侧翼区域。感谢大卫罗宾逊的有用建议！

```
from Bio import SeqIO
import csv

with open('Results.fa', 'a') as f1:
   reference = SeqIO.read("Reference.fa", "fasta")
   datafile = open('TestFile.csv', 'r')
   datareader = csv.reader(datafile)
   positions = next(datareader)
   snp = [int(i) for i in positions] #Convert strings in positions to integers
   for i in snp:
        IA=i-151  #Creating the intervals
        IB=i-1
        JA=i+1
        JB=i+151

        fragment = reference.seq[IA:IB] + "[" + reference.seq[i] + "]" + reference.seq[JA:JB]
        f = str(fragment)      #Need to turn Fragment into a string that can be written
        header = ">SNP" + str(i) + "\n"
        f1.write(header)
        f1.write(f)
        f1.write("\n") 
```

# ruby-on-rails-3 - MiniTest：如何获取夹具中的所有元素

> ID：14736353
> 
> 赞同：1
> 
> 时间：2013-02-06T18:38:38.797
> 
> 标签：ruby-on-rails-3, minitest

除了返回单个`User`via 之外`users(:id)`，有没有办法让所有用户在 中定义`users.yml`？

在 rspec 这似乎是，但这只是在 Minitest 中`users(:all)`寻找具有 id == 的用户。`all`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:42:42.813

如果您没有在测试中创建任何其他用户，您可以简单地调用以下命令：

```
User.all 
```

# php - 登录脚本不起作用

> ID：14736357
> 
> 赞同：0
> 
> 时间：2013-02-06T18:38:53.260
> 
> 标签：php, pdo

这是完整的脚本：

连接.php

```
class Connection{
    public function dbConnect(){
    return new PDO("mysql:host=localhost; dbname=test", "root", "");        
    }   
} 
```

用户.php

include_once('connection.php');

```
class User{

  private $db;

  public function __constructor(){
    $this->db = new Connection();
    $this->db = $this->db->dbConnect();
  }

  public function Login($name, $pass){
    if(!empty($name) && !empty($pass)){
        $st = $this->db->prepare("SELECT * FROM users WHERE name =? and pass =?");
        $st->bindParam(1, $name);
        $st->bindParam(2, $pass);
        $st->execute();     

        if($st->rowCount() == 1){
            echo "User verified. Access granted";   
        }else{
            echo "Incorrect";   
        }

    }else{
        echo "Please enter name and password";  
    }
  }

} 
```

索引.php

```
include_once('User.php');

if(isset($_POST['submit'])){
$name = $_POST['user'];
$pass = $_POST['pass'];

$object = new User();
$object->Login($name, $pass);   
} 
```

但是当我尝试它时，会出现这个错误：

致命错误：在第 16 行的 C:\wamp\www\testes\User.php 中的非对象上调用成员函数 prepare()

第 16 行：$st = $this->db->prepare("SELECT * FROM users WHERE name =? and pass =?");

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:40:32.667

你的魔法破灭了

`public function __constructor(){`

应该

`public function __construct(){`

# python - django admin 内联组件

> ID：14736360
> 
> 赞同：0
> 
> 时间：2013-02-06T18:38:57.043
> 
> 标签：python, django, django-models, django-admin

我开始学习 django，但我有疑问。这是我的模型：

```
from django.db import models

class Color(models.Model):
    title = models.CharField(max_length=30)
    code = models.CharField(max_length=7)
    def __unicode__(self):
        return '{0} ({1})'.format(self.title, self.code)

class Image(models.Model):
    color = models.ForeignKey(Color)
    src = models.ImageField(upload_to='media/img/')
    alt = models.CharField(max_length=255)
    def __unicode__(self):
        return '{0} ({1})'.format(self.alt, self.color.title)

class Manufacturer(models.Model):
    title = models.CharField(max_length=255)
    image = models.ForeignKey(Image)
    def __unicode__(self):
        return self.title 
```

我需要有可能在制造商页面上编辑图像实例（制造商有一个图像）。我怎样才能在 admin.py 中做到这一点

我需要类似的东西：

```
class ImageInline(admin.TabularInline):
    model = Image

class ManufacturerAdmin(admin.ModelAdmin):
    inlines = [ImageInline] 
```

但我收到

> 异常值：
> 
> <class 'catalog.models.Image'> 没有到 <class 'catalog.models.Manufacturer'> 的 ForeignKey

我需要为一个制造商提供一张图片

第二个：我打算创建产品模型，一个产品可以有很多图像。我认为我应该创建多对多关系。那么如何在管理员中用许多图像来描述产品呢？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:42:32.723

异常消息告诉你一切。您需要将 FK 关系添加到 Image 模型：

```
manufacturer = models.ForeignKey(Manufacturer) 
```

如果您只需要一个制造商的一张图片，请考虑将其放入制造商模型中。这将更有效（更少的数据库查询或“select_related”函数）并且更易于管理。

至于 Product 和 Image 之间的多对多关系 - 只需在 Product 模型中使用 ManyToManyField ( [https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/) ) 并保持 Image 模型不变。

# jquery - 用 jquery 递增 eq()

> ID：14736366
> 
> 赞同：0
> 
> 时间：2013-02-06T18:39:25.253
> 
> 标签：jquery

与这里讨论的内容有些相关： [jQuery eq() loop](https://stackoverflow.com/questions/4190331/jquery-eq-loop)

我有任意数量的可以添加到页面的元素：

而不是这样做：

```
$('.taskName a:eq(1)').addClass('fixme');
$('.taskName a:eq(2)').addClass('fixme'); 
```

//我可以在添加项目时以编程方式在此处添加更多内容，而不必编写 1、2、3、4 等代码吗？

我想完成计数，并在添加新元素时增加 eq() 中的数字。

我解决了其他问题，因此我删除了该问题不再需要的任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:51:13.753

不知道我明白了，但我会尝试：

```
$('a').filter(function() {
   return $(this).closest('.taskName').attr('title') == '' || 
          $(this).closest('.taskName').attr('title') == 'Role: Repeter_Manager';
}.addClass('fixme'); 
```

将类添加到具有匹配标题的元素内的锚点？？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:51:36.233

`.fixme`由于您没有发布 html，因此很难准确判断需要哪些元素，但我会假设除了第一个和最后一个元素之外的所有元素。在这种情况下，这将完成这项工作：

```
$('.taskName a').slice(1, -1).addClass('fixme'); 
```

[`.slice`](http://api.jquery.com/slice/)

# ajax - MVC 3.分别加载菜单和内容

> ID：14736371
> 
> 赞同：0
> 
> 时间：2013-02-06T18:39:34.640
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, iframe

我有一个包含 3 个部分的应用程序：

*   主菜单;
*   上下文菜单 - 与主菜单中的选定项目相关；
*   和页面正文 - 与上下文菜单中的选定项目相关；

“主菜单”和“上下文菜单”基于成员资格。我不想在每次页面加载时都加载它们，因为那会消耗资源数据库。So, I'm using ajax to load main menu only one time, and when an item is selected, I load the context menu for that item.

我的问题是：每个表单的帖子都会删除我的菜单。

问题：我是否必须使用 ajax 构建整个应用程序？我不想这样做，因为在表单中发布一个帖子然后使用ajax将所有数据发送到控制器太简单了。

到目前为止，我有两个选择：

1.  使用 ajax 加载我的菜单，使用 IFRAME 加载页面正文，因此帖子不会再次呈现我的菜单。
2.  使用 ajax 做所有事情；

有没有其他方法可以使用 ajax 加载我的菜单并能够使用表单的帖子？

对不起，如果我不够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:21:09.707

让我停顿的句子是“我不想在每次页面加载时都加载它们，因为那会消耗资源数据库。”

你看，我已经构建了很多应用程序，它们根据用户角色（你所谓的会员资格）显示菜单和子菜单。从资源或数据库的角度来看，这从来都不是问题。

*您可以在登录时*访问您需要的所有成员信息。在最简单的情况下，用户的身份将与他们拥有的角色（HttpContext.User）一起存储在上下文中，因此您不需要数据库查找以获取每个请求的此信息。请注意，在这种情况下，也不需要 ajax。

如果由于某种原因您不能在这样的上下文中存储您的会员信息，您仍然可以存储在会话中（如果在内存中）或加密的 Cookies。

现在，我明白了，我并没有详细说明您的方案，并且在您的方案中，您尝试做的事情可能是有道理的，但是我建议您重新考虑一下，因为在正常情况下，您表示的是问题（数据库资源）根本不应该是问题。

底线是：如果您更改应用程序，使其在用户登录时存储会员信息，您将不会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:43:48.983

您不必使用 Ajax 构建所有应用程序。但在这种情况下，Ajax 可能是最好的前进方式。

以下是我的建议

1.  为开发人员内部创建数据条目
2.  让每个输入控制器都标有一个类（比如“dataEntry”）
3.  创建一个 javascript 函数来迭代开发并构建具有类 dataEntry 的所有元素的列表
4.  使用列表构建一个 json 对象。使用每个元素的名称作为属性名，值作为属性值
5.  使用 jquery ajax 将此发布到控制器操作
6.  [可选] 您可以使用 .done 和 .fail 方法对调用的成功或失败采取措施

我知道这可能看起来很吓人，但如果您有许多数据输入表单，您可以重复使用此代码。

# ravendb - 使用 RavenDB 在父文档中存储 id 列表的更简单方法

> ID：14736376
> 
> 赞同：1
> 
> 时间：2013-02-06T18:39:51.270
> 
> 标签：ravendb

如果我有一个可以有多个子级的父文档，例如 a`Store`可以有多个`Product`s 有没有更简单的方法来存储文档`Product.Id`中的列表`Store`？

目前我只是`Product`先存储对象，然后遍历它们以获取`Product.Id`for`Store.ProductIds`属性。

**店铺**

```
class Store
{
    public string Id { get; set; }
    public string Name { get; set; }
    public IList<string> ProductIds { get; set; }
    [JsonIgnore]        
    public IList<Product> Products { get; set; }
} 
```

**产品**

```
class Product
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

**当前工作保存方法**

```
var store = new Store()
{
     Name = "Walmart",
     Products = new List<Product>
                    {
                        new Product {Name = "Ball"},
                        new Product {Name = "Bat"}
                    }
};

using (var session = DocumentStore.OpenSession())
{
    foreach (var product in store.Products)
    {
        session.Store(product);
    }

    session.SaveChanges();

    var list = new List<string>();

    foreach (var product in store.Products)
    {
        list.Add(product.Id);
    }

    store.ProductIds = list;

    session.Store(store);
    session.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:38:34.357

要回答您的具体问题 - 您可以使用代码简化两件事：

*   您可以消除第一个`session.SaveChanges();` 产品 id 将在您调用`.Store()`产品时创建。

*   您可以使用一些 linq 收集产品 ID 以将其折叠为一行：

    `store.ProductIds = store.Products.Select(x=> x.Id).ToList();`

不过，您仍然有相同的通用方法 - 它只是稍微简化了代码。

这种方法会*奏效*，但要意识到您只是为了方便而将产品放入商店。 `[JsonIgnore]`在这里没问题，但它只有助于序列化 - 而不是反序列化。换句话说，在加载商店时，只会填充 ProductIds 列表。您必须单独加载它们（可能使用`.Include()`）

就个人而言，我会将`Products`列表完全从 Store 对象中取出。Entity Framework 和 NHibernate 等其他关系产品为此使用虚拟成员和代理类，但在 RavenDB 中没有什么意义。您班级的消费者不会知道该属性被忽略，因此他们可能会误解它的用法。当我看到该`Products`属性时，我的期望是每个属性都`Product`完全嵌入到文档中——在这种情况下，您不需要单独的`ProductIds`列表。让他们两个都被忽略只会引起混乱。

反对您提议的设计的另一个论点是，它隐含地使每家商店中的每件产品都独一无二。这是因为您正在使用商店创建产品，然后分别添加每个产品。如果确实是所有产品都是唯一的（不仅仅是“球”，而是“这个特定的球”），那么您可以只嵌入没有`[JsonIgnore]`or`ProductIds`列表的产品，并且没有必要`Product`作为一个存在单独的文件。在产品不是唯一的情况下（多家商店可以出售球棒和球），您有两种选择：

```
class Store
{
    public string Id { get; set; }
    public string Name { get; set; }
    public IList<string> ProductIds { get; set; }
}

class Store
{
    public string Id { get; set; }
    public string Name { get; set; }
    public IList<Product> Products { get; set; }
} 
```

`Product`无论哪种情况，它仍会在其自己的文档中 - 第二种情况将用作[非规范化引用](http://ravendb.net/docs/client-api/querying/handling-document-relationships)，因此您可以在不加载产品的情况下获取产品名称。这是可以接受的，但如果产品名称可以更改，那么您有很多修补工作要做。

抱歉，如果没有干净的“这样做”答案。Raven 有很多选择，有时一种或另一种效果更好，具体取决于您可能使用它的所有不同方式。我个人 - 我只会保留 ProductIds 的列表。您可以随时[索引相关文档](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)以提取产品名称以进行查询。

# android - 以编程方式设置 ImageButton 状态

> ID：14736381
> 
> 赞同：1
> 
> 时间：2013-02-06T18:40:11.930
> 
> 标签：android

我有几个 ImageButtons，我试图强制其中一个像 CheckBox 一样。当用户按下按钮时，我想在“按下”（橙色，如您点击并按住时）和“正常”状态之间切换按钮的背景。如何做到这一点？下面的代码并没有真正做到这一点。

```
 public void btnErase_click(View v) {
        ImageButton btnErase = (ImageButton) findViewById(R.id.btnErase);
        if (pressed == true)
            btnErase.setBackgroundColor(Color.YELLOW);
        else        
            btnErase.setBackgroundColor(android.R.drawable.btn_default);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:50:38.643

首先，提供选择器。将其保存为 drawable/button_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_checked="true" android:drawable="@android:color/yellow" />
    <item drawable="@android:drawable/btn_default" />

</selector> 
```

将其作为背景应用到您的按钮。在代码中

```
public void btnErase_click(View v) {
    ImageButton btnErase = (ImageButton) findViewById(R.id.btnErase);
    if (pressed) {
        btnErase.getBackground().setState(new int[]{android.R.attr.state_selected});
    } else {
        btnErase.getBackground().setState(new int[]{-android.R.attr.state_selected});
    }
} 
```

但我不认为这是一个好主意。如果您的按钮有两种状态，最好使用[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:48:27.223

您应该使用`setBackgroundResource`而不是`setBackgroundCOlor`in`else`子句。因为`android.R.drawable.btn_defaul`不是颜色，它是资源的 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T18:50:15.947

您可以尝试这样做，通过xml设置不同的状态，将其保存在drawable中，然后将其设置为按钮的背景：

```
<item android:state_pressed="true"><shape>
        <solid android:color="#3c3c3c" />

        <stroke android:width="0.5dp" android:color="#3399cc" />

        <corners android:bottomLeftRadius="0dp" android:bottomRightRadius="0dp" android:topLeftRadius="4dp" android:topRightRadius="4dp" />

        <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item>
<item><shape>
        <gradient android:angle="270" android:endColor="#171717" android:startColor="#505050" />

        <stroke android:width="0.5dp" android:color="#3399cc" />

        <corners android:bottomLeftRadius="0dp" android:bottomRightRadius="0dp" android:topLeftRadius="4dp" android:topRightRadius="4dp" />

        <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T18:53:11.507

您应该使用`View v`传入的，无需再次找到ImageButton。

此外，如果您将按钮背景设置为图像，请使用`setBackgroundResource`而不是`setBackgroundColor`

```
public void btnErase_click(View v) {
        ImageButton btnErase = (ImageButton) v;
        if (pressed == true)
            btnErase.setBackgroundColor(Color.YELLOW);
        else        
            btnErase.setBackgroundResource(android.R.drawable.btn_default);
    } 
```

# jquery - 之后，Jquery Removed 字段仍然可以直接在代码中使用

> ID：14736383
> 
> 赞同：0
> 
> 时间：2013-02-06T18:40:30.030
> 
> 标签：jquery, dom

我有几个在首页加载时不存在的输入框。它们是由 JQuery 通过 .clone() 创建的。

```
<input type="text" class="myInputs" name="input[0]" />
<input type="text" class="myInputs" name="input[1]" />
<input id="remove" type="button" value="Remove last input"> 
```

然后我有一个函数来总结所有这些字段并使用结果发出警报，该函数由
a) 输入字段的 onchange 函数调用（就像一个魅力）和
b）“删除一个输入字段" - 应该删除一个字段然后再次调用该函数的按钮。

```
$(document).ready( function() {
    function calculatesum() {
        var sum = 0;
        var value = 0;
        var error = false;
        var count = new Number($("input.myInputs").length);

        if(count >= 1) {
            $("input.myInputs").each(function() {
                if($.isNumeric($(this).val())) {
                    value = new Number($(this).val());
                    sum = sum + value;
                }
                else
                    error = true;
            });
        }
        if(!error)  alert(sum);
        else        alert("Error");
    }

    $('body').on('change', 'input.myInputs', function () {  
        calculatesum();
    });

    $('#remove').click(function () {
        if (confirm("Are you sure?")) {                 
            $('.myInputs:last').slideUp('slow', function () {
                $(this).remove();
            });
            calculatesum();
        }
        return false;
    });
} 
```

现在的重点是，在通过按钮功能删除元素后，它仍然获得（先前删除的）输入字段及其值。
我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:43:41.907

您应该使用[.on](http://api.jquery.com/on)而不是单击下面的代码片段，就像这样

```
$('#remove').on('click', function () {
        if (confirm("Are you sure?")) {                 
            $('.myInputs:last').slideUp('slow').remove();
            calculatesum();
        } 
```

# json - RestFB：异常：无法将 Facebook 响应 JSON 转换为 java.lang.String 实例列表

> ID：14736392
> 
> 赞同：0
> 
> 时间：2013-02-06T18:41:03.683
> 
> 标签：json, message

我有一个桌面应用程序，它读取 Facebook 消息（FQL 术语中的 unified_message），它由其他用户留在我的 Facebook 页面上。问题是：当用户编写包含链接的消息时，Facebook 会自动将一些对象附加到消息中。这个附件在 RestFb Lib 中导致异常。不幸的是，我的页面访问令牌无济于事，因为您必须在 Facebook 中以我的身份登录才能使用它。但场景很简单，尝试在“www.wheather.com - 酷网站”之类的页面上留言。我已经用 RestFb 1.6.9 和 1.6.11 进行了尝试——两者的结果相同。抱歉格式化。我不能以其他方式做到这一点:(

**这是 1.6.11 的堆栈：**

```
com.restfb.exception.FacebookJsonMappingException: Unable to convert Facebook response JSON to a list of java.lang.String instances.  Offending JSON is {"38d79791ef0dac6f0b645a87f4d152d7":{"icon":"https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif","fb_object_type":"","tagged_ids":[],"description":"The Weather Channel and weather.com provide a national and local weather forecast for cities, as well as weather radar, report and hurricane coverage.","name":"National and Local Weather Forecast, Hurricane, Radar and Report","fb_object_id":"","caption":"www.weather.com","properties":[],"media":[],"href":"http://www.weather.com/"}}
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:171)
    at com.restfb.DefaultJsonMapper.toJavaType(DefaultJsonMapper.java:653)
    at com.restfb.DefaultJsonMapper.toJavaObject(DefaultJsonMapper.java:290)
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:181)
    at com.restfb.DefaultJsonMapper.toJavaType(DefaultJsonMapper.java:653)
    at com.restfb.DefaultJsonMapper.toJavaObject(DefaultJsonMapper.java:290)
       at myprogram.MyDefaultFacebokClient.executeMultiquery(MyDefaultFacebokClient.java:62)
Caused by: com.restfb.json.JsonException: JsonObject["data"] not found.
    at com.restfb.json.JsonObject.get(JsonObject.java:525)
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:155)
    ... 17 more 
```

**这是 1.6.9 的堆栈：**

```
com.restfb.exception.FacebookJsonMappingException: Unable to convert Facebook response JSON to a list of java.lang.String instances.  Offending JSON is {"38d79791ef0dac6f0b645a87f4d152d7":{"icon":"https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif","fb_object_type":"","tagged_ids":[],"description":"The Weather Channel and weather.com provide a national and local weather forecast for cities, as well as weather radar, report and hurricane coverage.","name":"National and Local Weather Forecast, Hurricane, Radar and Report","fb_object_id":"","caption":"www.weather.com","properties":[],"media":[],"href":"http://www.weather.com/"}}
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:167)
    at com.restfb.DefaultJsonMapper.toJavaType(DefaultJsonMapper.java:602)
    at com.restfb.DefaultJsonMapper.toJavaObject(DefaultJsonMapper.java:279)
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:177)
    at com.restfb.DefaultJsonMapper.toJavaType(DefaultJsonMapper.java:602)
    at com.restfb.DefaultJsonMapper.toJavaObject(DefaultJsonMapper.java:279)
       at myprogram.MyDefaultFacebokClient.executeMultiquery(MyDefaultFacebokClient.java:62)
    . . .
Caused by: com.restfb.json.JsonException: JsonObject["data"] not found.
    at com.restfb.json.JsonObject.get(JsonObject.java:525)
    at com.restfb.DefaultJsonMapper.toJavaList(DefaultJsonMapper.java:151)
    ... 17 more 
```

**这是 FQL 请求：**

```
{
"users":"SELECT uid,first_name,middle_name,last_name,name,pic_small,pic_big,profile_update_time,timezone,religion,birthday,birthday_date,sex,hometown_location,relationship_status,political,current_location,about_me,notes_count,wall_count,status,locale,profile_url,verified,profile_blurb,username,is_blocked,email,friend_count,languages FROM user WHERE uid IN (SELECT sender FROM #messages)"
,"msg":"SELECT message_id FROM unified_message WHERE thread_id='t_id.238275946308607' AND timestamp > '1360112817564' AND sender.user_id != '507447822604742' LIMIT 100"
,"messages":"SELECT message_id,thread_id,subject,body,unread,action_id,timestamp,tags,sender,recipients,object_sender,html_body,attachments,shares,share_map FROM unified_message WHERE message_id IN (SELECT message_id FROM #msg) AND timestamp > '1360112817564' AND timestamp <= '1360117314920' LIMIT 100"
} 
```

**以下是 Facebook Explorer 对上述请求的回复：**

```
{
  "data": [
    {
      "name": "msg", 
      "fql_result_set": [
        {
          "message_id": "m_mid.1360112949050:d17ca4ed7fc6236a75"
        }
      ]
    }, 
    {
      "name": "messages", 
      "fql_result_set": [
        {
          "message_id": "m_mid.1360112949050:d17ca4ed7fc6236a75", 
          "thread_id": "t_id.238275946308607", 
          "subject": null, 
          "body": "Have a look on http://www.weather.com 1", 
          "unread": true, 
          "action_id": "1360112949128000000", 
          "timestamp": "1360112949058", 
          "tags": [
            "inbox", 
            "source:web"
          ], 
          "sender": {
            "name": "Adam Client", 
            "email": "100004967623158@facebook.com", 
            "user_id": "100004967623158"
          }, 
          "recipients": [
            {
              "name": "MB Aerospace Corp.", 
              "email": "507447822604742@facebook.com", 
              "user_id": "507447822604742"
            }, 
            {
              "name": "Adam Client", 
              "email": "100004967623158@facebook.com", 
              "user_id": "100004967623158"
            }
          ], 
          "object_sender": null, 
          "html_body": "Have a look on http://www.weather.com 1", 
          "attachments": [
          ], 
          "shares": [
            "38d79791ef0dac6f0b645a87f4d152d7"
          ], 
          "share_map": {
            "38d79791ef0dac6f0b645a87f4d152d7": {
              "media": [
              ], 
              "name": "National and Local Weather Forecast, Hurricane, Radar and Report", 
              "href": "http://www.weather.com/", 
              "caption": "www.weather.com", 
              "description": "The Weather Channel and weather.com provide a national and local weather forecast for cities, as well as weather radar, report and hurricane coverage.", 
              "properties": [
              ], 
              "fb_object_type": "", 
              "fb_object_id": "", 
              "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif", 
              "tagged_ids": [
              ]
            }
          }
        }
      ]
    }, 
    {
      "name": "users", 
      "fql_result_set": [
        {
          "uid": 100004967623158, 
          "first_name": "Adam", 
          "middle_name": "", 
          "last_name": "Client", 
          "name": "Adam Client", 
          "pic_small": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/371585_100004967623158_2019810380_t.jpg", 
          "pic_big": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/371585_100004967623158_2019810380_n.jpg", 
          "profile_update_time": 1360108999, 
          "timezone": null, 
          "religion": null, 
          "birthday": null, 
          "birthday_date": null, 
          "sex": "male", 
          "hometown_location": null, 
          "relationship_status": null, 
          "political": null, 
          "current_location": null, 
          "about_me": null, 
          "notes_count": null, 
          "wall_count": null, 
          "status": null, 
          "locale": "en_US", 
          "profile_url": "https://www.facebook.com/adam.client.5", 
          "verified": null, 
          "profile_blurb": null, 
          "username": "adam.client.5", 
          "is_blocked": false, 
          "email": null, 
          "friend_count": 1, 
          "languages": [
          ]
        }
      ]
    }
  ]
} 
```

**最后一个。**我使用重新定义的 FacebookClient。源代码取自这里，stackoverflow.com。我不记得确切的原因，但类似于 DefaultFacebookClient 无法正确映射来自 Facebook 的结果（消息的附件）。

```
public class MyDefaultFacebokClient extends DefaultFacebookClient {

@Override public <T> T executeMultiquery (Map<String, String> queries, Class<T> objectType, Parameter... parameters)
{
verifyParameterPresence("objectType", objectType);
for (Parameter parameter : parameters)
if (QUERY_PARAM_NAME.equals(parameter.name))
throw new IllegalArgumentException("You cannot specify the '" + QUERY_PARAM_NAME
+ "' URL parameter yourself - " + "RestFB will populate this for you with "
+ "the queries you passed to this method.");

try {
List<JsonObject> jsonObjects = jsonMapper.toJavaList(makeRequest("fql", false, false, null,
parametersWithAdditionalParameter(Parameter.with("q", queriesToJson(queries)), parameters)), JsonObject.class);

JsonObject normalizedJson = new JsonObject();

for (int i = 0; i < jsonObjects.size(); i++)
{
JsonObject jsonObject = jsonObjects.get(i);

// For empty result sets, Facebook will return an empty object instead of
// an empty list. Hack around that here.
JsonArray resultsArray =
jsonObject.get("fql_result_set") instanceof JsonArray ? jsonObject.getJsonArray("fql_result_set")
: new JsonArray();

normalizedJson.put(jsonObject.getString("name"), resultsArray);
}

return objectType.equals(JsonObject.class) ? (T) normalizedJson : jsonMapper.toJavaObject(normalizedJson.toString(), objectType);

} catch (JsonException e) {
throw new FacebookJsonMappingException("Unable to process fql.multiquery JSON response", e);
}
}
} 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:57:58.563

我是 RestFB 的作者。也许从 Github 中提取最新的，运行“ant dist”来创建 1.6.12 JAR，并尝试调用新的 FacebookClient.executeFqlMultiquery 方法而不是 FacebookClient.executeMultiquery()。

新的 Graph API FQL 端点与旧端点略有不同，这个新的 executeFqlMultiquery() 方法有望解决您看到的问题。如果没有，或者您在正确映射结果类型时遇到问题，请告诉我。

下面是如何使用新方法的快速示例，从[https://groups.google.com/forum/?fromgroups=#!topic/restfb/yjCxSQuiieE](https://groups.google.com/forum/?fromgroups=#!topic/restfb/yjCxSQuiieE)复制：

```
static void test() throws Exception {
  FacebookClient facebookClient = new DefaultFacebookClient("xxx");

  final String threadsFql =
      "SELECT action_id, archived, can_reply, folder, former_participants, has_attachments, "
          + "is_subscribed, last_visible_add_action_id, name, num_messages, num_unread, object_participants, "
          + "participants, senders, single_recipient, snippet, snippet_sender, snippet_message_has_attachment, "
          + "subject, tags, thread_id, thread_participants, timestamp, unread "
          + "FROM unified_thread WHERE folder='inbox' AND has_attachments='1'";

  final String messagesFql =
      "SELECT message_id, thread_id, subject, body, unread, action_id, timestamp, tags, sender, recipients, "
          + "object_sender, html_body, attachments, attachment_map, shares, share_map "
          + "FROM unified_message WHERE thread_id IN (SELECT thread_id FROM #threads) LIMIT 2";

  ComplexMappingResults results = facebookClient.executeFqlMultiquery(new HashMap<String, String>() {
    {
      put("threads", threadsFql);
      put("messages", messagesFql);
    }
  }, ComplexMappingResults.class);

  out.println(results);
}

public static class ComplexMappingResults {
  @Facebook
  private List<Thread> threads;

  @Facebook
  private List<Message> messages;

  @Override
  public String toString() {
    return ReflectionUtils.toString(this);
  }

  public List<Thread> getThreads() {
    return threads;
  }

  public List<Message> getMessages() {
    return messages;
  }
} 
```

# iphone - 使用情节提要的子集作为第二个目标

> ID：14736393
> 
> 赞同：3
> 
> 时间：2013-02-06T18:41:05.720
> 
> 标签：iphone, ios, xcode, storyboard

我打算开发一个完整版、精简版和免费版的应用程序。（或至少其中两个）

过去，在没有 Storyboard 的情况下，我只是添加了另一个目标并设置了编译器变量，并使用 #if/else/endif 语句来管理版本之间的差异。到目前为止一切都很好。

这次我第一次使用故事板。它有大约 50 个视图控制器。现在我面临如何处理这个问题。特别是因为完整的应用程序是基于标签栏的，而精简版应该没有标签栏（它所涵盖的功能不超过与完整版本的标签之一相对应的功能）。

我该如何处理？我需要第二个故事板吗？我能否在情节提要 #2 和 #3 中重用情节提要 #1 中的视图？或者我是否可以至少使用第二个故事板作为起点，然后分支到故事板#1 的部分？（同样，精简版应用程序将主要包含完整应用程序的选项卡之一中的功能）。

坦率地说，我什至不知道从哪里开始。这就是为什么我不能分享我迄今为止尝试过的东西。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:21:19.950

好吧，终于找到合适的方法了。尽管我对它并不完全满意，因为它不是我想要的，但它确实有效，并且为我提供了高度的重用。

1) 在 xcode 中创建一个新目标。

2) Xcode 将创建第二组故事板。

3）故事板默认与原始名称相同，但位于不同的名称（由 xcode 新创建）并为每个目标分配一个。我重命名它是因为我的第二个目标中需要两个故事板.. 不需要重命名如果每个目标只使用自己的故事板。但在这种情况下，您应该重命名它。如果重命名它，则需要在目标的项目设置中分配新名称。效果很好。

4) 在我的例子中，免费应用程序的情节提要基本上由它的根视图控制器和一个常规视图控制器组成，它使我成为用户的一些主菜单。在我的情况下，完整的应用程序基于选项卡，并且由于功能减少和一些更精简的用例，免费应用程序不是。

5）然后这个主菜单视图控制器将以编程方式连接到另一个故事板的视图控制器。为此，情节提要中的所有 ID 都必须正确设置且唯一 (!)。在我的例子中，这个菜单由许多按钮组成。它们中的每一个都调用一个 IBAction。你当然可以给我们一张桌子等等。

```
 - (IBAction)newMinutes:(id)sender
 {
     // Get the storyboard named secondStoryBoard from the main bundle:
     UIStoryboard *secondStoryBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];

     // Load the view controller with its identifier string 
     // Change UIViewController to the appropriate class
     UIViewController *theTabBar = (UIViewController *)[secondStoryBoard instantiateViewControllerWithIdentifier:@"MinutesMenu"];

     // Then push the new view controller in the usual way:
     [self.navigationController pushViewController:theTabBar animated:YES];
 } 
```

6）一旦这个视图控制器启动并运行，它就会在自己的故事板中很好地工作，并将完美地连接到后续的视图控制器等。

7）但是，在某些地方我仍然需要做出一些改变。对于这些情况，我在每个目标的项目设置中设置了两个宏。`FREE`并且`FULL`是那些宏。因此，我可以使用该构造编译稍微不同的代码，例如程序化 segues `#ifdef`。

```
#ifdef FULL 
  // do this
#else 
  // do that
#endif 
```

或者

```
#ifdef FREE
  // do this
#endif 
```

希望，这有助于 TJ 和其他处于相同情况的人。

# jquery - jquery 只能添加结束元素标签（标记）吗？

> ID：14736398
> 
> 赞同：0
> 
> 时间：2013-02-06T18:41:29.020
> 
> 标签：jquery, html, append

给定表中的第n行，jquery可以只添加标记来关闭表吗

```
 <tr class="eop">
            <td> 8/31 </td>
            <td> XYZ </td>
            <td> 2 </td>
            <td> 92.00 </td>
        </tr>

   </tbody>            --
</table>                 |
<table>                  --     //  inserted markup
   head jquery var       |
   <tbody>             -- 
```

我正在尝试使用：

```
$('tr.eop').append("</tbody></table><table>+head+<tbody>");   // head = table header 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:24:55.880

DOM 由元素节点组成，一旦元素是 DOM 或 DOM 片段的一部分，开始和结束标记就没有任何意义。

您不能将没有结束标记的元素附加到页面。如果省略结束标签，则会为您创建一个。您也不能通过将结束标记附加为子元素来关闭父元素，它只会在父元素内创建一个新的完整元素。

如果要创建新表，请创建一个新表。

```
var newTable = $("<table><thead>"+head+"</thead><tbody></tbody></table>");
$('tr.eop').closest("table").after(newTable)
$('tr.eop').nextAll().appendTo(newTable.find("tbody")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:53:06.037

请试试这个。看看它是否有效。

```
var tt = $('tr.eop');
tt.innerHTML = tt.innerHTML + '</tbody></table><table>'+head+'<tbody>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:54:08.127

如果不是一个好的做法，但它可以工作**（我不确定它是否会在某些时候失败）**，请看一下这个例子：

[http://jsfiddle.net/MKSqy/](http://jsfiddle.net/MKSqy/)

但是我不确定您要完成什么，您可以通过操作 DOM 树轻松地做类似的事情。或者更改构建应用程序的方式，而不是使用表格，而是使用 div 并创建一个隐藏的或在需要时显示的。

```
<div class="table">
    <div class="row">
        <div>8/31</div>
        <div> XYZ </div>
        <div> 2 </div>
        <div> 92.00 </div>
    </div>
    <div class="head" style="visible:none;"></div>
</div> 
```

并操作 css 以创建表格样式。我推荐这只是为了以防万一，但是**table**标签的存在是有原因的，你不应该滥用**divs**。

**编辑：我不太明白所以这就是你需要的**

[http://jsfiddle.net/MKSqy/1/](http://jsfiddle.net/MKSqy/1/)

这样做基本上是选择第 n 个元素之后的下一个元素并创建一个表并将其附加到前一个表旁边。所以你不必处理关闭标签。

# matlab - matlab - 关于斜率的问题（衍生物）

> ID：14736400
> 
> 赞同：0
> 
> 时间：2013-02-06T18:41:35.297
> 
> 标签：matlab, math

我有一个功能`y=0.05*x.^2 - 0.24*x+(1/(x.^2+1))`。

1）我想找到 x [-4,4] 的斜率，所以我做了

```
syms x;
y=0.05*x.^2 - 0.24*x+(1/(x.^2+1))
der=diff(y)
matrix=subs(der,x,-4:4) 
```

我正在为 x 的不同值找到 y'(x) 的值。（结果是：-0.6123 -0.4800 -0.2800 0.1600 -0.2400 -0.6400 -0.2000 0 0.1323）

现在，我想确定斜坡的所有峰和谷。为了找到这个，我从结果中得出对于 x=3 我有 y'(3)=0 => 我有一个临界点。

所以，要找到山峰和山谷，我需要从第 3 点左右看到标志，对吧？所以，对于 x=-4,-2 =>valley ，x=-2,-1 peak, x=-1,0 valley, x=0,2 valley , x=2,4 peak。

这是正确的吗？另外，为了绘制我使用的斜率`ezplot(der)`？

2）我需要找到斜率的下降（y的最大值和最小值之间的差异）。我怎么能找到它，因为 y 是象征性的？

3）如果我想以度为单位找到斜率，我该怎么做？

4）如果我有 x 和 t 数据（位置和时间）并且我想计算速度，我只是这样做？

```
v=x./t;
result=diff(v) 
```

- - - - 更新 - - - - - - - -

对于我的最后一个问题，我有：

```
time=linspace(0,1.2,13);
position=[41,52,61,69,73,75,74,66,60,55,43,27,27];

v=position./time;
vel=diff(v)

plot(time,vel) 
```

但问题是 vel 向量导致 1x12 向量而不是 1x13。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:16:00.267

我对matlab不是很熟悉，但我会给你一些关于数学的建议。你定义：

```
 y(x) = 0.025*x^2 - 0.24*x + (1/(x^2+1)) 
```

这是添加图片中的蓝色曲线。我们可以对 x 求导，得到：

```
 dy(x)/dx = 0.1*x - 0.24 - (2*x/(1+x^2)^2) 
```

这是紫色曲线。我真的不知道“峰”和“谷”是什么意思，但如果你`y(x)`分别指的是最大值和最小值，那么你的答案是不正确的。`y(x)`可以通过找到`x`导数`dy/dx`为零的值来找到最大值或最小值。您可以通过查看图片来确认这一点。在`x=3`红色曲线处为零，因为`y(x)`那里有最小值。（请注意，通过找到`x`导数为零的点，并不能告诉您它实际上是最大值还是最小值，只是它是一个极值）。

![y(x) 和关于 x 的导数的图，dy/dx](../Images/e8640efe43d26dab7a20a70aff4901e5.png)

2) 你可以找到曲线的下降，如下所示。首先确定`x`最大值和最小值的值`x1`和`x2`（即求解`dy(x)/dx == 0`）。然后下降`abs( y(x1) - y(x2) )`。

3) 官方曲线没有一个斜率 - 它是弯曲的，所以它的斜率随 变化`x`。但是，如果您指的是最大值和最小值之间的平均斜率，那么它就是简单的几何形状。你有 和 的位移`x`，`y`查看函数`tan`，你将能够找到答案。

祝你好运

# regex - 所有合法正则表达式的正则表达式

> ID：14736404
> 
> 赞同：4
> 
> 时间：2013-02-06T18:42:08.410
> 
> 标签：regex, finite-automata

我很好奇是否有这样一个正则表达式定义了所有可能的正则表达式。由于 RE 中可能出现转义字符，因此在另一个（例如验证器）RE 中表示此类字符会很棘手，因为 RE 主要用于描述字母数字字符的序列。

我的问题可以类似地解释为好像有一个有限自动机能够确定一个有限自动机候选者是否是 FA。这是因为我们知道 FA 的设计方式可以排除给定的输入字符串是否匹配 FA 定义的模式。因此，如果我们可以以某种方式将所有内容（FA 候选）定义为字符串，我们将能够定义一个验证输入是否为 FA 的 FA。但是，我不知道如何证明这一说法，如果您能帮助我证明这一点，我会很高兴。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:08:34.450

为了能够确定 RE 是否“合法”，您需要能够“计算括号”以检查它们是否平衡，而 RE（或 FA）无法做到这一点。

# servicestack - ServiceStack Swagger-UI 重复

> ID：14736405
> 
> 赞同：1
> 
> 时间：2013-02-06T18:42:11.220
> 
> 标签：servicestack, swagger

使用 ServiceStack 的 SwaggerFeature，我看到我的所有路线都在 Swagger 文档页面上重复。在每个“/v1”节点下，我的所有端点都针对每个“/v1”重复。[我已经按照https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)上列出的方式配置了 ServiceStack 。知道为什么这些都会重复吗？

![在此处输入图像描述](../Images/1f9c5a41ea6265104e4294348ac240cf.png)

更新：这已在 ServiceStack 的更新版本中得到修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-15T21:56:45.977

Swagger 中重复路由的另一个潜在原因是继承 DTO 类。

应避免继承 DTO 类。

# linux - grep 第 n 行 linux 的一部分

> ID：14736411
> 
> 赞同：1
> 
> 时间：2013-02-06T18:42:30.180
> 
> 标签：linux, sed, grep

我有一个像这样的文件：

```
something1

something2 201101130000

thing

thing1

thing2

AAA, -2, 4, 0, 54;

thing3

thing4

AAA, 43, 43, 0, 5, 0, 0,;

thing5

AAA, 132.0, 43.0,  0.0,  0.0, 43.0,210.0,'

thing5 
```

如何从第二行复制日期 (201101130000)，添加逗号 (,)，然后将最后一行的数字 (132,0, 43.0, 0.0, 43.0, 210.0) 放入 newfile.txt 新文件应该看起来像：（原始文件在行之间没有空格，因为它在这里）

```
20110113, 132.0, 43.0,  0.0,  0.0, 43.0,210.0 
```

我尝试了 grep 和 sed，但没有成功。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:14:40.057

以下是我对您的问题的解释：

*   您正在尝试“grep”并连接两行的部分内容。这两行始终是倒数第二行和倒数第二行。

*   您还试图将输出重定向到另一个文件。您可以为此使用[shell 重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)，例如：`awk ... file > outputfile`.

* * *

* * *

这是一种使用方法`sed`：

```
sed '2h; $!N; $!D; ${ G; s/[^,]*\([^\n]*\).* \([0-9]\{8\}\).*/\2\1/; s/..$// }' file 
```

既然您已将其标记为 linux，我猜您已经拥有`GNU sed`并且不介意打高尔夫球：

```
sed -r '2h;$!N;$!D;${G;s/[^,]*([^\n]*).*\s([0-9]{8}).*/\2\1/;s/..$//}' file 
```

结果：

```
20110113, 132.0, 43.0,  0.0,  0.0, 43.0,210.0 
```

解释：

```
2h         # copy the second line to hold space
$!N        # if not the last line append the next line
$!D        # if not the last line delete up to the first newline in the pattern
$ { ... }  # one the last line, perform two substitutions 
```

* * *

* * *

或者，`awk`可能更容易理解：

```
awk 'FNR==NR { c++; next } FNR==2 { x = substr($NF,0,8) } FNR==c-1 { sub(/[^,]*/,x); sub(/..$/,""); print }' file file 
```

结果：

```
20110113, 132.0, 43.0,  0.0,  0.0, 43.0,210.0 
```

解释：

```
FNR==NR { c++; next }    # read the first file in the arguments list, to get a 
                         # count of the number of lines in the file
FNR==2 { ... }           # when reading the second line of the second file in the
                         # arguments list, take a substring of the last field
FNR==c-1 { ... }         # one the second last line of the second file in the
                         # arguments list, perform two substitutions and print
                         # the line. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:51:25.633

`AWK`做的伎俩：

```
awk '/something[0-9][ ]*[0-9]+/{d = $2;} /AAA/{v = $0;} END{gsub("AAA",d,v); print v;}' file.txt 
```

输出是：

```
201101130000, 132.0, 43.0, 0.0, 0.0, 43.0,210.0 
```

# javascript - 属性动态更改而不是设置值

> ID：14736415
> 
> 赞同：0
> 
> 时间：2013-02-06T18:42:46.863
> 
> 标签：javascript, jquery, html

所以我要做的就是将文本输入的禁用和只读属性分别设置为“禁用”和“只读”。我使用的是 Jquery 版本 1.7.1 。我尝试了以下方法：

```
$("#testtext").attr('disabled','disabled');
$("#testtext").attr("readonly","readonly");
$("#testtext").attr('disabled',true);
$("#testtext").attr("readonly",true);
$("#testtext").prop('disabled',true);
$("#testtext").prop("readonly",true); 
```

生成的标记如下所示：

```
<input type = "text" id = "testtext" disabled /> 
```

如您所见，它正在添加 disabled 属性但没有给它一个值。这适用于某些设备，但不适用于我尝试支持的所有设备。这似乎是 jQuery 应该做的事情，但我的谷歌搜索在这方面并没有想出太多。有没有人有任何意见或建议？任何建议将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:43:51.477

```
$("#testtext").prop("disabled", true);
$("#testtext").prop("readonly", true); 
```

适用于任何地方，因为这些是布尔标志：它们的存在表明标志处于打开状态（元素被禁用/只读），无论属性是否具有值（甚至标记中的值是什么 ⇨ `disabled=false`也被禁用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:47:14.763

`.prop( propertyName )` // propertyName 要获取的属性的名称。

`.attr( attributeName )` // attributeName 要获取的属性的名称。

根据规格：

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。
> 
> .prop() 方法仅获取匹配集中第一个元素的属性值。它为尚未设置的属性的值返回 undefined，或者如果匹配的集合没有元素。要单独获取每个元素的值，请使用循环构造，例如 jQuery 的 .each() 或 .map() 方法。
> 
> 属性和属性之间的区别在特定情况下可能很重要。在 jQuery 1.6 之前，.attr() 方法在检索某些属性时有时会考虑属性值，这可能会导致行为不一致。从 jQuery 1.6 开始，.prop() 方法提供了一种显式检索属性值的方法，而 .attr() 检索属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:20:22.267

与`.prop()`. 它比布尔属性更适合/可靠`.attr()`

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。**应该使用****.prop() 方法来设置禁用和检查，而不是 .attr()** **方法**

 ****（来自 的 jquery 文档`.prop()`）****

# c# - 使用 C# for windows CE 5.0 以编程方式建立 GPRS 连接？

> ID：14736416
> 
> 赞同：0
> 
> 时间：2013-02-06T18:42:49.093
> 
> 标签：c#, connection, windows-ce, gprs

我是 Windows CE 的新手，所以很容易上手。我想务实地创建一个 GPRS 连接并在 C# 中为 windows CE 5.0 (Visual Stdio 2008) 拨号。我搜索了超过 100 页，但没有！例如：http: [//msdn.microsoft.com/en-us/library/bb840031.aspx](http://msdn.microsoft.com/en-us/library/bb840031.aspx)

要连接 GPRS，我必须拨打 *99# 和一些设置，但我不知道如何在我的设置中使用这些示例代码。连接管理没有设置，或者我不知道如何设置。

是否有任何示例代码可以通过所需设置创建 GPRS 连接并拨号？而且我还需要拨打 USSD 代码请求并获得响应。可能吗？我有 OpenNetCF.dll 并且......我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:04:36.123

请查看我的问题：[这里](https://stackoverflow.com/questions/14748351/dialing-ras-from-wince-device#comment20643447_14748351)。我已经有一个解决方案，它应该可以工作，只是卡在一个问题上。也许你可以跨过去。在这种情况下，如果你能帮助我，我会很高兴。

[您可以从这里](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)下载 OpenNETCF 。

# linux - bash 源代码和别名问题

> ID：14736434
> 
> 赞同：0
> 
> 时间：2013-02-06T18:43:58.750
> 
> 标签：linux, bash

我有一个库文件，其中有一个别名：

```
$ cat mylib.sh
alias mal='ls -l'

$cat test.sh
#!/bin/bash
source mylib.sh
mal

$./test.sh
./test.sh: line 3: mal: command not found 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:45:09.337

要在非交互式 shell 中执行别名，请使用

```
shopt -s expand_aliases 
```

您可能想要使用函数：

```
mal() { 
    ls -l
}

mal 
```

# scala - 在 Scala 2.10 中导入类型时的奇怪行为

> ID：14736437
> 
> 赞同：1
> 
> 时间：2013-02-06T18:44:19.463
> 
> 标签：scala, compiler-construction, sbt, scala-2.10

今天我清理了我的 .ivy 缓存并清理了我的项目输出目标。从那时起，我在使用 SBT 运行测试或在 Scala IDE 中进行编辑时遇到了非常奇怪的行为。

鉴于以下情况：

```
package com.abc.rest

import com.abc.utility.IdTLabel 
```

我会收到以下错误：

```
object utility is not a member of package com.abc.rest.com.abc 
```

请注意，`com.abc`它重复了两次，因此编译器在执行导入时似乎使用了当前包的上下文（也许它应该这样做，但我以前从未注意到它）。

此外，如果我尝试从包`com.abc`中的任何位置`com.abc.rest`（即使使用完整路径）访问包中的类，编译器也会抱怨找不到类型。

似乎*只有当我尝试包含父包中的文件时才会出现错误*。我觉得奇怪的是我的代码曾经可以工作。它只是在我清理了我的项目和我的常春藤缓存之后才开始发生的，所以也许更高版本的编译器比以前的版本更严格。

我很想知道我可能做错了什么，或者我可以如何解决这个问题。

**更新：**

通过首先导入父类，然后定义当前包，问题就消失了：

```
import com.abc.utility.IdTLabel
import com.abs._

package com.abc.rest {
 // Define classes belonging to com.abc.rest here
} 
```

所以这行得通，但我仍然很想知道为什么反过来工作，然后停止工作，以及我到底该如何解决它。我仔细看了看，在父包中的任何地方都找不到以 com 为名的包、对象或特征。

**与工作表相关的更新：**

属于同一个包的 Scala 工作表共享相同的范围，这听起来很明显，但事实并非如此。工作表不是沙盒式的——它们可以看到项目，*项目也可以看到它们*。因此，您在工作表文件中创建的所有“测试”对象、特征和类也将在项目的其余部分中可见。

我有这么多工作表，我什至没有试图找出问题出在哪里。我只是将它们全部移到了自己的包中，就像魔术一样，问题就消失了。

因此，今天的经验教训是：***如果您在工作表内创建内容，则可以从工作表外部看到它。***

无论如何，这些新发现的知识将派上用场，这意味着可以在工作表中构建、监控和调整任何“有趣”的东西，而项目的其余部分可以实际使用它。其实很酷。

`sbt clean`想想一个和清理过的常春藤缓存如何设法突出以前隐藏的问题仍然很有趣，但是嘿，那是另一个故事......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:27:46.010

（应 JacobusR 的要求，我正在根据我之前的评论做出正确的回答）。

如果您在 package 中定义了一些类/特征/对象，就会发生这种情况`com.abc.rest.com`。一旦 package`com.abc.rest.com`存在，并且假设您在 package 中`com.abc.rest`，`com`将指定`com.abc.rest.com`而不是`_root_.com`. 最快（但非决定性）的检查方法是在“com/abc/rest/com”子文件夹中查找任何 .class 文件，甚至无需扫描源文件。

特别是，如果您的任何文件具有重复的包定义（如在 package 中`com.abc.rest; package com.abc.rest; ...`），您将获得此行为。如果您在出现错误的同一文件中的某处有此重复的包子句，您甚至不会看到 .class 文件有任何可疑之处，因为编译文件失败会阻止为任何类生成 .class 文件文件中的定义。

最后一点有用的信息是，当您发现 scala 工作表没有沙盒化时，您在工作表中定义的内容会影响您的项目代码（而不仅仅是让项目的代码影响工作表）。**因此，工作表中**的重复包子句很可能会导致您遇到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:02:47.290

如果包名称冲突，则可能会出现自定义错误消息。查看指定完整路径是否可以通过从`__root__`. 前任。`import __root__.com.foo.bar._`

# cordova - 使用 create 命令的 Phonehap-Cordova 错误消息

> ID：14736440
> 
> 赞同：0
> 
> 时间：2013-02-06T18:44:30.257
> 
> 标签：cordova, error-handling, wsh

我已经完成了所有必要的安装，android sdk、java sdk 等等。当我测试它们时，一切都运行良好，java、android、javax、ant 等等。

但是当我尝试`Create`从科尔多瓦“入门页面”运行命令时，我得到了一个例外。 ![在此处输入图像描述](../Images/ef47c301864781500132d83884e7f9a3.png)

烦人的部分是，在它工作之前，但错误是它说我缺少 Java 安装的 Android、Ant 之一。

我确保我有通往所有这些的正确路径，然后我开始收到这个新错误。

任何人都知道如何解决它。

我运行 Windows 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:09:19.500

听起来您在设置 android、ant 和 java 的路径时可能弄乱了 CScript.exe 的路径。

在windows环境下你应该可以`cscript`在命令行中运行。

仔细检查您的路径并确保将路径添加到 CScript.exe 如果它不存在，我`C:\Windows\System32`的路径应该能够在您的路径变量中看到。

**如果您更改路径，您可能需要重新启动才能使更改生效**

[或者你可以使用这个方法](http://www.nerdydork.com/update-windows-path-without-rebooting.html)

# ios - 如何在 ios 中使用 nsmutableurlrequest 发送递归 json 请求？

> ID：14736442
> 
> 赞同：0
> 
> 时间：2013-02-06T18:44:41.020
> 
> 标签：ios, xcode, json, api, nsmutableurlrequest

在 iOS 中创建这个

```
"{
"email":string, 
"password":string
}" 
```

json 请求正文，我正在传递我从字符串创建的 nsdata

```
email=myname@domain.com&password=mypassword 
```

到 NSMutableURLRequest 的 setHTTPBody 方法。这很好用。

但是如果我想创建这个怎么办

```
"{
"post":
       {
        "title":string,
        "room_id":int,
        "content":string,
       }
}" 
```

json 请求正文？我试图做一些字符串组合来解决这个递归，但并没有真正奏效。我还检查了 NSMutableURLRequest 的方法，但我找不到与解决此问题相关的内容。

编辑：

这会创建帖子，因为它应该很好，但是对于递归情况，我需要一个等效于字符串 email=myname@domain.com&password=mypassword 的字符串。当我按原样发送数据时，它不起作用。当我作为我提供的字符串发送时，它可以工作。

```
NSString *usertoken =  [appDelegate token];
NSString *posttopic = @"111testtopic";
NSString *postbody =  @"111testbody";

NSDictionary *dict = @{@"post":@{@"title":posttopic,@"room_id":@"246",@"content":postbody}};
NSData *body = [NSJSONSerialization dataWithJSONObject:dict
                                               options:NSJSONWritingPrettyPrinted
                                                 error:nil];

NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

//send the post
NSString *urlstring = [NSString stringWithFormat:@"http://mydomain.com/posts.json?auth_token=%@", usertoken];
[request setURL:[NSURL URLWithString:urlstring]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded;charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:body];

NSURLResponse *response;
NSData *POSTReply = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:22:48.023

尝试这个

```
NSDictionary *dict = @{@"post":@{@"title":string,@"room_id":int,@"content":string}};
NSData *body = [NSJSONSerialization dataWithJSONObject:dict 
                                               options:NSJSONWritingPrettyPrinted 
                                                 error:&error]; 
```

这个想法是使用一些嵌套字典来描述您的 json 并将它们序列化以让您的 jsonData 传递给请求。

# java - 更改响应正文中的日期格式

> ID：14736443
> 
> 赞同：2
> 
> 时间：2013-02-06T18:44:45.723
> 
> 标签：java, spring-mvc, date-format

我有一个带有请求映射的 spring 应用程序，它返回 json 中的帐户列表。Account 类有一个 Date 属性。此属性在 json 输出中作为 unix 时间戳返回。

有没有办法将日期格式更改为预定义格式，而不是将其作为 unix 时间戳返回？

```
@RequestMapping(value = "/userAccounts.json", method = RequestMethod.GET)
        public @ResponseBody ArrayList<Account> userAccounts() {
            ArrayList<Account> accounts = accountService.getAllUserAccounts(user);
            return accounts;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:06:57.167

从您的 JSON 提要中获取时间戳并在您的 JSP 文件中进行转换。您可以使用 javascript 来做到这一点：[Convert a Unix timestamp to time in JavaScript](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

# javascript - Javascript 对象方法

> ID：14736447
> 
> 赞同：3
> 
> 时间：2013-02-06T18:44:59.943
> 
> 标签：javascript

为什么我不能这样做？

```
var MyObject = {}
MyObject.foo = function(){
  this.sayhello = function(){
    alert('Hello');
  }
}
MyObject.foo.sayhello(); 
```

关于如何完成的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T18:46:25.460

within `foo`, `this`references `MyObject`，这意味着之后：

```
MyObject.foo(); 
```

您可以致电：

```
MyObject.sayhello(); 
```

如果你想能够调用`MyObject.foo.sayhello()`，你需要`sayhello`成为一个函数`MyObject.foo`：

```
var MyObject = {}
MyObject.foo = function () {...};
MyObject.foo.sayhello = function () {
    alert('hello');
} 
```

如果你不需要`foo`也是一个函数，你可以简单地声明：

```
var MyObject = {
    foo: {
        sayhello: function () {
            alert('Hello');
        }
    }
} 
```

这将允许您致电：

```
MyObject.foo.sayhello(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:46:20.333

您必须先调用`MyObject.foo()`，以便`this.sayhello`实际添加该函数。然后你应该可以打电话`MyObject.foo.sayhello();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:47:56.657

```
var MyObject = {}
MyObject.foo = {
  sayhello: function(){
    alert('Hello');
  }
}
MyObject.foo.sayhello(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T18:48:15.070

那是因为该功能还不存在。因此，您必须先调用 foo。你所做的是从属性 foo 调用函数 sayhello。但是你没有属性 foo。你有一个函数 foo.

但你也可以这样做并使其成为链式，就像 jQuery 所做的那样：

```
var MyObject = {}
MyObject.foo = function(){
  this.sayhello = function(){
    alert('Hello');
  }
  return this;
}
MyObject.foo().sayhello(); 
```

在对象 foo 中创建一个 sayhello 函数，而不是链式函数。而是一个对象里面有一个函数的对象。

```
var MyObject = {
    foo : {
        sayhello : function(){
            alert("hello");
        }
    }
}
MyObject.foo.sayhello(); // Now does work! 
```

# ruby - 将 Ruby 符号理解为方法调用

> ID：14736452
> 
> 赞同：12
> 
> 时间：2013-02-06T18:45:21.423
> 
> 标签：ruby, ruby-1.9

```
class A
   def test
       "Test from instance"
   end
   class << self
       def test
           "Test from class"
       end
    end
end

p A.send(:test)    # "Test from class"
p A.new.method(:test).call  # "Test from instance" 
```

这里的符号按预期工作，但在这里：

```
s="test"
s1=:s
p s1   # :s 
```

为什么**:s**在这里打印？我不明白背后的原因。谁能为我解释一下？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T19:04:24.550

符号是一种轻量级的字符串（尽管它们不是字符串）。`send()`and`method()`方法可以采用字符串或符号；一个在内部工作中转换为另一个（不确定是哪个），然后 ruby​​ 执行具有匹配名称的方法。因此`A.send(:text)`等价于`A.text()`。如果你有一个名为 的变量`methodName = :text`，你可以这样做，`A.send(methodName)`但不能`A.methodName()`。

符号不是变量，因此您不能为符号赋值。在您的示例中，该符号`:s`与变量无关`s`（尽管它们具有相同的“名称”，但在其前面加上冒号使其成为符号而不是变量）。您正在为变量分配一个字符串值，`s`但告诉它打印符号`:s`，它确实如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T18:52:41.587

来自[https://stackoverflow.com/a/1255362/509710](https://stackoverflow.com/a/1255362/509710)：

`p foo`确实 puts `foo.inspect`，即它打印的值`inspect`而不是`to_s`，这更适合调试（因为您可以例如区分`1`,`"1"`和`"2\b1"`，而在没有检查的情况下打印时您无法区分）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T18:49:59.313

您将 s1 的值设置为 :s，那么您为什么希望它返回任何不同的值呢？

如果您查看 Object 类的 ruby​​ API，您会看到[Object#send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)和[Object#method](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)都将符号作为参数，因此上面的示例也完全符合预期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T19:09:47.723

符号只是一种特殊的类似字符串的值，运行时处理它比普通字符串更有效。而已。它们不是方法或变量或类似的东西。

当你这样做时`A.send(:test)`，你所做的就是说“嘿，A，调用名为'test'的方法”。您不是发送方法本身，而是发送名称；内部的逻辑`send`负责查找要调用的实际方法。

当你要求方法 with 时也是如此`A.new.method(:test)`。您传递给`method`的只是名称“test”，而不是使用该名称定义的方法。取决于`method`使用名称并*找到*实际的方法，以便它可以返回它，而这就是你正在做的返回值 - 一个 Method 对象`call`。你不能`call`对像 一样的符号做`:test`，因为它只是一个名字。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-06T19:09:53.287

```
s="test"
s1=:s
p :s.object_id  #137448
p s.object_id   #77489950
p s1.object_id  #137448 
```

我现在已经明白了。我正在分配一个符号，但期待一个字符串。

# git - git：仅列出为所有存储修改的文件

> ID：14736453
> 
> 赞同：29
> 
> 时间：2013-02-06T18:45:22.257
> 
> 标签：git

根据[git 文档](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html#_options)，`git stash list`将接受您可以传递给的任何选项`git log`。

我想要做的是将`--stat`选项传递给`git stash list`. 这可行，但是它似乎显示了存储库中的每个文件。

现在，我知道有一个`git stash show`只会显示那些已更改的文件，但我需要手动检查并检查每个文件。

有什么方法可以让 git 向我显示存储列表，*只*显示每个存储的更改？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-09-04T02:25:47.917

**Git v2.2 及以后的更新：**

`git stash list --stat`作品。

[自从提出问题以来，情况发生了变化](https://github.com/git/git/blob/master/Documentation/RelNotes/2.2.0.txt#L29-L32)，OP 的困境不再适用。从 Git v2.2 开始，您*可以*简单地传递`--stat`给`git stash list`它，它的行为将与直观预期的一样。

`--name-status`您还可以使用任何其他文件列表选项，例如`--name-only`和`--raw`可用于`git log`。

如果您使用的是 v2.2 之前的 Git 版本，则下面的原始答案适用。

**原答案：**

像这样我猜：

```
git stash list | while IFS=: read STASH ETC; do echo "$STASH: $ETC"; git diff --stat $STASH~..$STASH --; done 
```

（在 Git Bash msysgit 中测试。）

`git stash show $STASH`而不是`git diff --stat $STASH~..$STASH`也有效，但速度慢得令人难以忍受。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-08-02T22:09:54.257

`git stash list --name-status`

输出：

```
stash@{0}: WIP on branch-name: face0ff97 Commit message

M       path/to/modified/file.cpp
A       path/to/added/file.xml
D       path/to/deleted/file.kt
stash@{1}: WIP on branch-name: 953add384 Commit message

... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T18:49:30.837

`git stash show -p`以补丁形式显示存储是我相信你所要求的。

对于特定的存储，您可以执行以下操作：`git stash show -p stash@{x}`其中 x 是堆栈上的存储 #。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-31T10:13:16.863

如果列出一个存储的所有文件，例如最新的存储，使用

> git show stash@{0} --stat

# file - 从我的 DVD 运行批处理文件

> ID：14736459
> 
> 赞同：0
> 
> 时间：2013-02-06T18:45:52.877
> 
> 标签：file, batch-file

我有一个批处理文件，用于查看您运行的是 64 位还是 32 位系统。它在我的电脑上很好用，但是当我把它放在 DVD 上运行它时，它就不起作用了。如何让它从 DVD 中正确运行？谢谢

```
@echo off
IF EXIST "%programfiles(x86)%" (GOTO 64-Bit) ELSE (GOTO 32-Bit)

:32-Bit
ECHO.   32-Bit Operating System Detected
GOTO END

:64-Bit
ECHO.   64-Bit Operating System Detected
GOTO END

:END

echo Press any key to exit...
pause >nul 
```

第二次尝试>>>> 这行得通吗？

```
@echo.off

for %%a in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do if exist %%a:\programfiles(x86) set SysType=%%a:

IF EXIST "%systemroot%\programfiles(x86)" %SysType%\ (GOTO 64-Bit) ELSE (GOTO 32-Bit)
:32-Bit
ECHO. 32-Bit O/S detected
GOTO END
:64-Bit
ECHO. 64-Bit O/S detected
GOTO END
:END
echo.
echo.
echo.
echo Press any key to exit...
pause >nul 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:23:56.000

```
@echo off

IF EXIST "C:\WINDOWS\system32\DRVSTORE\GEARAspiWD_1E13C24EB2F28CB6915317F7F17F180ECAA0DB1E\x86" goto :64-Bit
if not exist "C:\WINDOWS\system32\DRVSTORE\GEARAspiWD_1E13C24EB2F28CB6915317F7F17F180ECAA0DB1E\x86" goto :32-Bit

color c
cls
echo.
echo.
echo                                  UNSPECIFIED OPERATING SYSTEM TYPE.
echo -----------------------------------------------------------------------------------------------------------------------------
echo.
echo.
echo.
pause >nul
exit

:32-Bit
ECHO.   32-Bit Operating System Detected
echo.
echo.
pause >nul
goto :END

:64-Bit
ECHO.   64-Bit Operating System Detected.
echo.
echo.
echo.
pause >nul
goto :END

:END
exit 
```

经过测试，对我来说效果很好，希望它对你也一样！

# java - 通过 Xtext 和 Java 程序提供自动化

> ID：14736461
> 
> 赞同：4
> 
> 时间：2013-02-06T18:46:04.450
> 
> 标签：java, xtext

在我当前的项目中，我使用 xText 编辑器来编写我的 dsl 规范（即 voc.mydsl、arch.mydsl 和 network.mydsl）。我喜欢 xText 编辑器，因为它的代码完成和其他功能。

但是，我有一个单独的 Java 程序。这个 java 程序将文本文件（即 voc.txt、arch.txt、network.txt）作为输入，使用 ANTLR 解析器解析这些文件，并使用 StringTemplate 文件生成代码。

现在，我的问题是，目前，我必须手动执行以下步骤：
（1）我在 XText 编辑器（voc.mydsl、arch.mydsl 和 network.mydsl）中编写 dsl 规范。
(2) 我将这些规范复制粘贴到三个文本文件中（即 voc.txt、arch.txt、network.txt）。
(3) 最后，我运行 Java 程序来解析这些 .txt 文件并生成代码。

有什么方法可以自动化（单击执行）所有上述三个步骤？如果您需要任何详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:49:17.427

您可以为您的 DSL 编写一个“特殊”生成器。每当您编辑和保存 *.mydsl 文件时，XText 都会调用此生成器。Xtext 对你在这个“生成器”中实际所做的事情不感兴趣。所以你的`MydslGenerator.xtend`生成器可能看起来像这样：

```
// whereever Xtext generates your empty version of this file
package mydsl.xtext.generator

// add imports

@Singleton
class MydslGenerator implements IGenerator {

    override void doGenerate(Resource resource, IFileSystemAccess fsa) {

        // calculate new filename
        val newFilename= resource.URI.lastSegment.replaceAll(".mydsl", ".txt")

        // get text representation of parsed model
        val textContent = resource.contents.map[NodeModelUtils::getNode(it).text].join

        // write text content to new file
        fsa.generateFile(newFilename, textContent);

        // TODO: call ANTLR parser on new file here
    }
} 
```

在最后一步中，您可以通过`main`直接从 Eclipse 调用其方法或调用新的 JVM 来调用“其他”程序。仅当另一个生成器运行迅速时才建议使用后者，因为每当您保存 *.mydsl 文件时都会调用它。只有当其他程序没有内存泄漏并且没有太多 jar 依赖项时，才建议使用第一种方法。

# sql-server-2008 - 确定点之间的基本（罗盘）方向

> ID：14736464
> 
> 赞同：3
> 
> 时间：2013-02-06T18:46:10.410
> 
> 标签：sql-server-2008, geometry, geography

有没有办法在 SQL Server 2008R2 中知道一个点是否在另一个点的东南部、东部等...？

例如，我有一个原点`point(lat1,lng1)`，我想知道`point(lat2,lng2)`该原点的位置：北、西等...

我正在尝试构建风玫瑰图，这可能对我有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-18T10:07:08.717

我想出了一种使用标准 SQL 函数相当简单的计算方位角的方法。ATAN 函数完成了大部分实际工作；这两个 CASE 语句只是特殊情况的更正。1 是源，2 是目标。

```
atan(([Longitude2]-[Longitude1])/(10e-10+[Latitude2]-[Latitude1]))*360/pi()/2
+case when [Latitude2]<[Latitude1] then 180 else 0 end
+case when [Longitude2]<[Longitude1] and [Latitude2]>[Latitude1] then 360 else 0 end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:44:34.893

为了在 SQL Server 2008 R2 中使用 Geography 类型计算两个坐标之间的方位角，您可以使用此函数：

```
CREATE FUNCTION [dbo].[CalculateBearing] 
(
    @pointA as geography
    ,@pointB as geography
)

RETURNS decimal(18,12)

AS

    BEGIN

    -- Declare the return variable
    DECLARE @bearing decimal(18,12)

    -- Declare the local variables
    DECLARE @x decimal(18,12)
    DECLARE @y decimal(18,12)
    DECLARE @dLat decimal(18,12)
    DECLARE @dLong decimal(18,12)
    DECLARE @rLat1 decimal(18,12)
    DECLARE @rLat2 decimal(18,12)

    IF(@pointA.STIsEmpty() = 1 OR @pointB.STIsEmpty() = 1)
        set @bearing = null
    ELSE
        BEGIN

        -- Calculate delta between coordinates
        SET @dLat = RADIANS(@pointB.Lat - @pointA.Lat)
        SET @dLong = RADIANS(@pointB.Long - @pointA.Long)

        -- Calculate latitude as radians
        SET @rLat1 = RADIANS(@pointA.Lat)
        SET @rLat2 = RADIANS(@pointB.Lat)

        SET @y = SIN(@dLong)*COS(@rLat2)
        SET @x = COS(@rLat1)*SIN(@rLat2)-SIN(@rLat1)*COS(@rlat2)*COS(@dLong)

        IF (@x = 0 and @y = 0)
            SET @bearing = null
        ELSE
            BEGIN
                SET @bearing = CAST((DEGREES(ATN2(@y,@x)) + 360) as decimal(18,12)) % 360
            END
    END

    -- Return the result of the function
    RETURN @bearing

END

GO 
```

在此之后，您可以像这样使用此功能：

```
DECLARE @pointA as geography
DECLARE @pointB as geography

SET @pointA = geography::STGeomFromText('POINT(3 45)', 4326)
SET @pointB = geography::STGeomFromText('POINT(4 47)', 4326)

SELECT [dbo].[CalculateBearing](@pointA, @pointB) 
```

**更新**：添加架构

![轴承说明](../Images/709391abe4d4583ffecb121c41eafbfa.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-01T17:06:56.780

今天早上，当我在我们的系统中搜索附近的订单时，我需要这个功能来为用户提供范围和基本方向。我来到尼古拉斯的答案这里，它让我大部分时间都在那里。我创建了第二个函数，它使用 Nicolas 为我的 UI 获取一个缩写的基本方向（N、NE、E 等）。

使用此处提供的 Nicolas 方位计算结合来自[https://en.wikipedia.org/wiki/Points_of_the_compass](https://en.wikipedia.org/wiki/Points_of_the_compass)的值来确定每个基本方向的范围，

```
CREATE FUNCTION [dbo].[CalculateCardinalDirection] 
(
    @pointA as geography
    ,@pointB as geography
)

RETURNS varchar(2)

AS
BEGIN
    DECLARE @bearing decimal(18,12)
    -- Bearing calculation provided by http://stackoverflow.com/a/14781032/4142441
    SELECT @bearing = dbo.CalculateBearing(@pointA, @pointB)

    RETURN CASE WHEN @bearing BETWEEN 0 AND 22.5 THEN 'N'
                WHEN @bearing BETWEEN 22.5 AND 67.5 THEN 'NE'
                WHEN @bearing BETWEEN 67.5 AND 112.5 THEN 'E'
                WHEN @bearing BETWEEN 112.5 AND 157.5 THEN 'SE'
                WHEN @bearing BETWEEN 157.5 AND 202.5 THEN 'S'
                WHEN @bearing BETWEEN 202.5 AND 247.5 THEN 'SW'
                WHEN @bearing BETWEEN 247.5 AND 292.5 THEN 'W'
                WHEN @bearing BETWEEN 292.5 AND 337.5 THEN 'NW'
                ELSE 'N' -- Catches NULL bearings and the 337.5 to 360.0 range
           END
END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-31T19:01:21.580

`X=X2-X1`和`Y=Y2-Y1.`一个公式，从 0（正 Y 轴）到 360 度顺时针给出方位角。

```
 f(X,Y)=180-90*(1+SIGN(Y))*(1-SIGN(X^2))-45*(2+SIGN(Y))*SIGN(X)-180/PI()*SIGN(Y*X)*ATAN((ABS(Y)-ABS(X))/(ABS(Y)+ABS(X))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-02T18:06:58.437

如果点数据类型是“几何”（如 UTM 坐标系），您可以使用以下公式：

```
DEGREES(ATAN((X2-X1)/(Y2-Y1)))
+case when Y2<Y1 then 180 else 0 end
+case when Y2>Y1 and X2<X1 then 360 else 0 end 
```

以下是更多说明的架构：

[![连接两点的直线的方位角](../Images/4103307dd46623847a0e86394de47ce1.png)](https://i.stack.imgur.com/J8Aiv.png)

# vb.net - tcpclient 发送的数据包未到达目的地

> ID：14736466
> 
> 赞同：0
> 
> 时间：2013-02-06T18:46:18.297
> 
> 标签：vb.net, tcpclient, networkstream

我正在尝试使用 tcpclient 将消息发送到具有提供端口的远程服务器。在我的代码中，我看到连接成功并且正在发送消息，但是另一端的开发人员通知我没有收到任何消息。反正有调试这个吗？

```
 Public Sub New(ip As String, port As Integer)
    _GLOIP = IPAddress.Parse(ip)
    _port = port
    'initiate the client and get the stream to use
    myTcp = initiate()
    netStream = myTcp.GetStream()
End Sub
Public Sub send(text As String, ByRef err As String)
    If netStream.CanWrite Then
        If Not text.EndsWith(vbCr & vbLf) Then
            text += Environment.NewLine
        End If
        Dim sendBytes As Byte() = Encoding.UTF8.GetBytes(text)
        netStream.Write(sendBytes, 0, sendBytes.Length)
    Else
        err = "cannot write to the stream"
    End If
End Sub
Public Function initiate() As TcpClient
    Dim TcpClient As New TcpClient()
    Dim bytCommand As Byte() = New Byte(1023) {}
    TcpClient.Connect(_GLOIP, _port)
    Return TcpClient
End Function 
```

# android - android 应用程序如何将 IPv6 地址添加到接口？

> ID：14736467
> 
> 赞同：1
> 
> 时间：2013-02-06T18:46:19.647
> 
> 标签：android, ipv6

我想从 android 应用程序中将 IPv6 地址添加到我的 wifi 接口。我不想替换现有地址，只需添加一个。

我在 ConnectionManager 界面上找不到任何东西。

我试过使用`adb shell`调用`ip -6 addr add 2001:stuff/64 dev wlan0`，但我得到

```
RTNETLINK answers: Operation not permitted 
```

我假设如果我从一个 android 应用程序中调用它，我会得到类似的结果，但我还没有测试过这个假设。

我真的很想在不植根设备的情况下完成此操作。

# javascript - 如何创建自定义输入类型？

> ID：14736469
> 
> 赞同：16
> 
> 时间：2013-02-06T18:46:21.830
> 
> 标签：javascript, angularjs, angularjs-directive

例如，我想创建一个类似于 AngularJS 实现“电子邮件”的方式的自定义输入类型。

```
<input type="email" ng-model="user.email" /> 
```

我想创建的是这样的输入类型：

```
<input type="path" ng-model="page.path" /> 
```

关于如何实现这一点的任何想法？到目前为止，我只能弄清楚如何实现自定义指令，其中“路径”是标签、属性或类的名称。

例如，我可以让它工作，但它与其他表单字段**不一致**，我真的希望它们看起来一样。

```
<input type="text" ng-model="page.path" path /> 
```

```
app.directive('path', function() {
  return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) { ... }
  };
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T19:33:20.747

如果 type 属性设置为“path”，您可以通过使用自定义逻辑创建输入指令来创建自己的输入 type="path"。

我创建了一个简单的示例，只需替换`\`为`/`. 该指令如下所示：

```
module.directive('input', function() {
    return {
        restrict: 'E',
        require: 'ngModel',
        link: function (scope, element, attr, ngModel) {
          if (attr.type !== 'path') return;

          // Override the input event and add custom 'path' logic
          element.unbind('input');
          element.bind('input', function () {
            var path = this.value.replace(/\\/g, '/');

            scope.$apply(function () {
              ngModel.$setViewValue(path);
            });
          });
        }
    };
}); 
```

`[Example](http://plnkr.co/edit/Zgi8Zw8oaQiSO6CvJMGY?p=preview)`

**更新**：将 , 更改为 ,以`on`删除jQuery 依赖项。示例已更新。`off``bind``unbind`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T14:20:16.750

可以通过使用[ngModelController](https://docs.angularjs.org/api/ng/type/ngModel.NgModelController#$parsers)`$parsers`的属性来实现替代解决方案。此属性表示在将输入组件的值传递给验证（并最终将它们分配给模型）之前应用于输入组件值的解析器链。有了这个，解决方案可以写成：

```
module.directive('input', function() {
    return {
        restrict: 'E',
        require: 'ngModel',
        link: function (scope, element, attr, ngModel) {
          if (attr.type !== 'path') return;

          ngModel.$parsers.push(function(v) {
            return v.replace(/\\/g, '/');
          });
        }
    };
}); 
```

请注意，还有另一个属性`$formatters`是格式化程序的管道，可将模型值转换为输入中显示的值。

请参阅[此处](http://plnkr.co/edit/XUSWK6uXyybI1rEbYQIi?p=preview)了解 plunker。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T14:36:00.043

考虑到 compile 函数是第一个行，它会不会更好：

```
module.directive('input', function() {
  return {
    restrict: 'E',
    require: 'ngModel',
    compile: function Compile(tElement, tAttrs) {
      if (tAttrs.type !== 'path') return;

      return function PostLink(scope, element, attr, ngModel) {
        // Override the input event and add custom 'path' logic
        element.unbind('input');
        element.bind('input', function () {
          var path = this.value.replace(/\\/g, '/');

          scope.$apply(function () {
            ngModel.$setViewValue(path);
          });
        });
      }
    }
  };
}); 
```

# java - 我可以使用 OLE 在 Windows 应用程序中嵌入 Java 小程序吗？

> ID：14736473
> 
> 赞同：1
> 
> 时间：2013-02-06T18:46:31.100
> 
> 标签：java, com, applet, embed, ole

我编写了一组有用的 Java 小程序。它们被打包在 jar 文件中。如果它们可以嵌入到 Word 文档中（例如），那就太好了。现在，我想我可以编写一个成熟的 COM 服务器并注册 DLL，但这对于 Web 浏览器（以及随 JDK 和 Eclipse 提供的 applet-tester）没有任何麻烦的事情来说似乎有些过头了。**是否有用于 Java 小程序嵌入的现有 COM 包装器？**

我想嵌入 Word 文件而不是网页的原因是，理想情况下，文档将通过电子邮件发送并进行编辑。但是小程序仍在其中运行。我很欣赏可能存在一些障碍：

*   如果不能为小程序指定参数，我不介意。
*   如果有帮助，我很乐意将`JApplet`s 重写为纯 Java 应用程序（可执行 jar 文件）
*   我不介意出于安全目的是否必须对罐子进行签名等

我在谷歌上找不到问题的解决方案，但同样我看不出解决方案不存在的任何原因！

# ruby-on-rails - 设计两个具有复杂关联的模型

> ID：14736474
> 
> 赞同：1
> 
> 时间：2013-02-06T18:46:32.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, associations, rails-activerecord

我有两张桌子，`users`和`groups`。用户拥有一个组，并且可以属于多个组。一个组属于一个用户，可以有多个用户。

因此，对于我的`user`模型，我有

```
has_and_belongs_to_many :groups
has_many :groups 
```

而对于我的`group`模型，我有

```
has_and_belongs_to_many :users
belongs_to :user 
```

我的迁移中也有一个连接表..

```
def change
  create_table :groups_users, :id => false do |t|
    t.integer :group_id
    t.integer :user_id
  end
end 
```

我的问题是这有意义吗？我觉得`has_many`我`belongs_to`在`has_and_belongs_to_many`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:55:35.597

我会采用的方法，这是我自己的个人方法，使用 3 个表/模型，如下所示：

**group_user.rb**

```
class GroupUser < ActiveRecord::Base
  attr_accessible :user_id, :group_id

  belongs_to :group
  belongs_to :user
end 
```

**组.rb**

```
class Group < ActiveRecord::Base
  attr_accessible :owner_id

  validates_presence_of :owner_id

  has_many :group_users
  has_many :users, through: :group_users
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible :some_attributes

  has_many :group_users
  has_many :groups, through: :group_users
end 
```

然后，无论何时创建一个`Group`对象，`User`创建它的对象都会将其`id`放置在表的`owner_id`属性中，`Group`并将其本身放入`GroupUser`表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:56:44.937

为了不让多个外键指向同一个关系，另一种选择是使用连接模型，然后在连接模型上添加一个标志来表示用户是否是所有者。

例如：

```
class User < ActiveRecord::Base
  has_many :memberships
  has_many :groups, through: :memberships
  has_many :owned_groups, through: memberships, conditions: ["memberships.owner = ?", true], class_name: "Group"
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group

  #This model contains a boolean field called owner
  #You would create a unique constraint on owner, group and user
end

class Group < ActiveRecord::Base
  has_many :memberships
  has_many :users, through: :memberships
  has_one :owner, through: :memberships, conditions: ["memberships.owner = ?", true], class_name: "User"
end 
```

# kendo-ui - 在 Kendo Grid 中添加带有按钮的行

> ID：14736479
> 
> 赞同：1
> 
> 时间：2013-02-06T18:46:53.013
> 
> 标签：kendo-ui

我现在正在尝试使用 3 个并排按钮在表格顶部添加一个额外的行。我需要添加任何 HTML 还是通过 js 以某种方式动态添加？有点像下面的网址，但它只是一个按钮（可能是图像）而不是下拉菜单（这些将是编辑、删除和添加列按钮等控件）：

[http://demos.kendoui.c​​om/web/grid/toolbar-template.html](http://demos.kendoui.com/web/grid/toolbar-template.html)

```
<!doctype html>
<head>
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="styles/kendo.blueopal.min.css" rel="stylesheet" type="text/css" />
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/kendo.web.min.js" type="text/javascript"></script>

</head>
<body>
<div id="grid"></div>

<script>
$(function(){

   var people = [{patientName: "John Doe", MRN: "464684778", account: "56765765224768", dateOfBirth: "01/06/2013", room: 403, bed: 22, admitDate: "01/15/2013" },

   {patientName: "John Doe", MRN: "464684778", account: "56765765224768", dateOfBirth: "01/06/2013", room: 403, bed: 22, admitDate: "01/15/2013" },

   {patientName: "Jane Doe", MRN: "464684778", account: "56765765224768", dateOfBirth: "01/06/2013", room: 403, bed: 22, admitDate: "01/15/2013" },

   {patientName: "Bert Jones", MRN: "464684778", account: "56765765224768", dateOfBirth: "01/06/2013", room: 403, bed: 22, admitDate: "01/15/2013" },

   ];

   $("#grid").kendoGrid({
     columns: [{field: "patientName", title: "Patient Name"},
               {field: "MRN", title: "MRN"},
               {field: "account", title: "Account#"},
               {field: "dateOfBirth", title: "Date of Birth"}, 
               {field: "room", title: "Room"},
               {field: "bed", title: "Bed"},
               {field: "admitDate", title: "Admit Date" }],
     dataSource: {
       data:people
     },

     height:300,
     scrollable:true,
     pageable: true,
     pageSize: 2,
     sortable: true                
  });

});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:25:56.597

您可以`toolbar`在 kendoGrid 配置中添加一个部分，并提供要添加的按钮列表：

```
 $("#grid").kendoGrid({
     columns: [{field: "patientName", title: "Patient Name"},
               {field: "MRN", title: "MRN"},
               {field: "account", title: "Account#"},
               {field: "dateOfBirth", title: "Date of Birth"}, 
               {field: "room", title: "Room"},
               {field: "bed", title: "Bed"},
               {field: "admitDate", title: "Admit Date" }],

     toolbar: [
       {"name": "create"}, 
       {"name": "save"}, 
       {"name": "cancel"}
     ],

     dataSource: {
       data:people
     },

     height:300,
     scrollable:true,
     pageable: true,
     pageSize: 2,
     sortable: true                
  }); 
```

如果您无法使用工具栏使内容看起来像您想要的那样，您可以为此选项提供您自己的 HTML：

```
 toolbar: "<div>stuff here</div>" 
```

文档中有更多信息，这里：[http ://docs.kendoui.c​​om/api/web/grid#toolbar-array](http://docs.kendoui.com/api/web/grid#toolbar-array)

# c# - 无法加载文件或程序集，因为“访问被拒绝”（身份：网络服务）

> ID：14736483
> 
> 赞同：3
> 
> 时间：2013-02-06T18:47:17.127
> 
> 标签：c#, asp.net, iis

加载项目时出现以下错误。应用程序池标识设置为“网络服务”。“NETWORK SERVICE”作为“安全权限”对下面提到的 ASP.NET TEMP 目录具有完全访问权限。我应该怎么做才能解决以下问题？

```
 Could not load file or assembly 'EPi247.Selvbetjening.Templates' or one of its dependencies. Access is denied.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'EPi247.Selvbetjening.Templates' or one of its dependencies. Access is denied.
Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'EPi247.Selvbetjening.Templates' could not be loaded.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = EPi247.Selvbetjening.Templates
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: EPi247.Selvbetjening.Templates | Domain ID: 3
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/repo/projects/OppdalCMS6R2Empty/
LOG: Initial PrivatePath = C:\repo\projects\OppdalCMS6R2Empty\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\repo\projects\OppdalCMS6R2Empty\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/1725e370/13a5a0c6/EPi247.Selvbetjening.Templates.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/1725e370/13a5a0c6/EPi247.Selvbetjening.Templates/EPi247.Selvbetjening.Templates.DLL.
LOG: Attempting download of new URL file:///C:/repo/projects/OppdalCMS6R2Empty/bin/EPi247.Selvbetjening.Templates.DLL.
ERR: Failed to complete setup of assembly (hr = 0x80070005). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:01:57.447

如果您的站点使用模拟，则负载可能发生在用户帐户（而不是 AppPool 进程帐户）下。`Environment.UserName`您可以通过在异常时刻进行检查来确认它。

如果是这种情况，您需要确保触发程序集加载的代码在进程帐户下运行（所有其他需要文件系统访问的操作也是如此）。

# google-apps-script - 如何在 Google Apps 脚本 UI 上的 Firefox 中正确应用边距

> ID：14736485
> 
> 赞同：0
> 
> 时间：2013-02-06T18:47:23.630
> 
> 标签：google-apps-script

我在使用 Google Apps Script UiInstance 创建的 Web 应用程序中使用边距来定位元素（并在元素之间添加空格）。

在 Firefox 或 Opera 中没有正确应用边距。它们正在Chrome和Internet Explorer中应用，所以我觉得代码是正确的。

这是我在[此处发布](https://script.google.com/macros/s/AKfycbypbMK6plywsHKaDZYq2WtQ8uzEqoNcEfTN1HacJu-atILgXQjq/exec)的示例。

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.createLabel("Some Text").setStyleAttribute("margin-left","500px").setStyleAttribute("margin-top","25px"));
  return app;
} 
```

谁能解释为什么会这样？这是一个错误，还是这是不好的做法，我应该做点别的？

注意：使用 Firefox 检查器，我没有发现任何表明尝试了边距的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:22:41.673

语法问题，试试这样

```
function doGet() {
  var app = UiApp.createApplication().setStandardsMode(false);
  app.add(app.createLabel("Some Text").setStyleAttribute("marginLeft","500px").setStyleAttribute("marginTop","25px"));
  return app;
} 
```

或者像这样

```
function doGet() {
  var app = UiApp.createApplication().setStandardsMode(false);
  app.add(app.createLabel("Some Text").setStyleAttributes({marginLeft :"500px",marginTop :"25px"}));
  return app;
} 
```

# java - 64位java读写*dbf

> ID：14736486
> 
> 赞同：2
> 
> 时间：2013-02-06T18:47:25.297
> 
> 标签：java, odbc, 64-bit, dbf

大家好，

我遇到了一些问题，也许有人可以为我解答！

我正在尝试从 java 应用程序中读取一些 *DBF 表。我找到了这段代码：

```
try
        {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String connString="jdbc:odbc:Driver={Microsoft dBASE Driver *.dbf)};DefaultDir=C:\\test";//DefaultDir indicates the location of the db
            Connection connection=DriverManager.getConnection(connString);
            String sql="SELECT * FROM table_name where condition";// usual sql query
            Statement stmt=connection.createStatement();
            ResultSet resultSet=stmt.executeQuery(sql);
            while(resultSet.next())
            {
                System.out.println();
            }
            System.out.println();
        }
        catch (ClassNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (SQLException e)
        {
            e.printStackTrace();
        } 
```

这段代码在 32 位版本的 windows 上运行良好，但是当我尝试 64 位时，它给了我错误：

[Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

我查了一下，发现的最佳答案是关于在 system32 或 sysWOW64 中玩 DN，但我无法将它扔掉，或者我的理解还不够好......

这是该答案的链接：

[所以我找到的答案](https://stackoverflow.com/questions/8895823/the-specified-dsn-contains-an-architecture-mismatch-between-the-driver-and-appli/12537390#12537390)

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T15:07:00.727

我遇到了同样的问题，我卸载了 JDK 6 的 64 位版本并安装了 32 位版本解决了它。因此，我的应用程序开始恢复正常工作，对我的 *.DBF 文件进行查询/更新 :)

希望这可以帮助！

# ios - UIScrollView zoomToRect 不应该滚动视图

> ID：14736488
> 
> 赞同：3
> 
> 时间：2013-02-06T18:47:34.927
> 
> 标签：ios, objective-c, uiscrollview

我做了一个简单的测试项目来显示问题：有一个 imageview 包含在 scrollview 视图 -> scrollview -> imageview

scrollview 的内容大小与 imageview size = (AllWidth, AllHeight) 相同。

问题是，如果滚动视图完全按宽度（`scrollView.zoomScale = 320.0/AllWidth;`）缩放以适合图像，则调用 zoomToRect

```
[scrollView zoomToRect:CGRectMake(0.0,  0.0, AllWidth, AllHeight) animated: NO]; 
```

出于某种原因，确实将 imageview 滚动到底部。但预计 UI 不会发生任何事情

如果滚动视图没有完全按宽度 ( ) 缩放以适合图像`scrollView.zoomScale = (320.0-1)/AllWidth;`，则调用 zoomToRect 会执行预期的操作 - 图像被缩放并且不会滚动到底部。

我注意到在“错误”情况下 ContentOffset.y 已更改，但我不知道为什么。

要重现该问题，请在 viewcontroller.h 文件中添加新项目`<UIScrollViewDelegate>`；viewcontroller.m 在这里：[http](http://pastebin.com/bPUtuYn1) : //pastebin.com/bPUtuYn1 （在测试项目中，您需要双击绿色图像，然后将“320.0-1”更改为“320.0”并重试）

# batch-file - WMI 查询在键入时运行良好，但在编写脚本时失败

> ID：14736490
> 
> 赞同：1
> 
> 时间：2013-02-06T18:47:37.037
> 
> 标签：batch-file, wmi, wmic

我正在尝试使用各种 WMI 查询来收集我的某些服务器上的每日报告所需的数据。我的脚本中唯一失败的是最后一步，它查询某些服务的状态。当我在命令行中手动键入查询时，查询工作正常，但是当我将其转储到批处理脚本中时它会失败。我仅限于使用普通的旧 Windows 命令行，所以没有 Power Shell 或 vb。这是命令：

```
wmic /OUTPUT:"%HOMEDRIVE%%HOMEPATH%\Desktop\AutoDMR\DMRAuto_3.txt" service where "name like 'MPCX%' or name like 'nm%' or name like 'nb%' or name like 'ssacpha%' or name like 'EMC%'" get name,state,status /FORMAT:htable 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:20:37.877

批处理脚本中的所有百分比都必须加倍。例如`'EMC%'`变成`'EMC%%'`

此外，如果您尝试在 FOR /F IN() 子句中运行命令，则 GET 子句中的逗号必须转义为`^,`.

```
for /f ... in ('wmic ... get name^,state^,status ...') do ... 
```

# combobox - 似乎无法在 Extjs 中远程填充组合框

> ID：14736492
> 
> 赞同：1
> 
> 时间：2013-02-06T18:47:41.790
> 
> 标签：combobox, extjs4.1

我已经尝试了所有方法来让它填充组合下拉框。键入时，说“Apple”，它似乎正在加载数据，但下拉框中没有任何内容。Firebug 显示数据已加载。那么，我哪里错了？谢谢。

```
Ext.create('Ext.form.field.ComboBox', { 
    fieldLabel: 'Basket',
    emptyText : 'Type a fruit name',
        queryMode : 'remote',
        minChars  : 3, 
        fields    : ['id', 'name'], 
        store     : { 
                    proxy: {
                type: 'jsonp',
                callbackKey: 'method',
                url: 'http://www.comparetrainfares.co.uk/train_scripts/data.php',
                reader: {
                root: 'items'
            },
                }
             },
        needleKey     : 'query',
        labelKey      : 'id',
        label         : 'name',
        displayField  : 'name',
        width         : 260, 
        forceSelection: true,
        renderTo      : query1,
});

<?php
header('Access-Control-Allow-Origin: *');
//header('Content-Type: application/json; charset=utf8');
//header('Content-Type: application/x-json');

// http://www.comparetrainfares.co.uk/train_scripts/data.php

$output = array();

$output[] = array('id' => '1', 'name' => 'Apple');
$output[] = array('id' => '2', 'name' => 'Banana');
$output[] = array('id' => '3', 'name' => 'Orange');
$output[] = array('id' => '4', 'name' => 'Lemon');

$objects = array('items' => $output);

echo json_encode($objects);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:02:20.280

您正在使用 jsonp 代理。这不是加载商店的默认 ajax 方式。php 脚本应该从发送到 php 脚本的 'callback' 参数接收函数名，然后返回的数据应该是这样的格式：

```
callback({"items":[{"id":"1","name":"Apple"},{"id":"2","name":"Banana"},{"id":"3","name":"Orange"},{"id":"4","name":"Lemon"}]}) 
```

并记住用回调参数中发送的任何字符串的名称替换“回调”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:36:21.827

这是我在组合框中键入单词“Appl”时从 FireBug 得到的。我知道返回的数据与我输入的数据不同，但是即使我输入了应该匹配的内容，我仍然什么也得不到。

在“参数”选项卡下，我看到：

```
_dc 1361011625341
callback    Ext.data.JsonP.callback1
limit   10
page    1
query   appl
start   0 
```

“响应”选项卡显示：

```
{rows:[{"id":"1","genre_name":"Comedy"},{"id":"2","genre_name":"Drama"},{"id":"3","genre_name":"Action"},{"id":"4","genre_name":"Mystery"}]} 
```

“JSON”选项卡显示：

按键排序

```
rows    
[Object { id=    
"1"    
,  genre_name=    
"Comedy"    
}, Object { id=    
"2"    
,  genre_name=    
"Drama"    
}, Object { id=    
"3"    
,  genre_name=    
"Action"    
}, Object { id=    
"4"    
,  genre_name=    
"Mystery"    
}]    

0
    Object { id=    
"1"    
, genre_name=    
"Comedy"    
}       
1
    Object { id=    
"2"    
, genre_name=    
"Drama"    
}       
2
    Object { id=    
"3"    
, genre_name=    
"Action"    
}       
3
    Object { id=    
"4"    
, genre_name=    
"Mystery"    
} 
```

# css - 在 CSS 中使用 Font Awesome 图标

> ID：14736496
> 
> 赞同：324
> 
> 时间：2013-02-06T18:47:55.777
> 
> 标签：css, font-awesome

我有一些看起来像这样的 CSS：

```
#content h2 {
   background: url(../images/tContent.jpg) no-repeat 0 6px;
} 
```

我想用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)中的图标替换图像。

无论如何，我看不到将 CSS 中的图标用作背景图像。假设在我的 CSS 之前加载了 Font Awesome 样式表/字体，这可能吗？

* * *

## 回答 #1

> 赞同：528
> 
> 时间：2013-02-06T18:56:59.100

您不能使用文本作为背景图像，但您可以使用`:before`或`:after`伪类将文本字符放置在您想要的位置，而无需添加各种杂乱无章的额外标记。

请务必`position:relative`在您的实际文本包装器上进行设置，以使定位正常工作。

```
.mytextwithicon {
    position:relative;
}    
.mytextwithicon:before {
    content: "\25AE";  /* this is your text. You can also use UTF-8 character codes as I do here */
    font-family: FontAwesome;
    left:-5px;
    position:absolute;
    top:0;
 } 
```

**编辑：**

Font Awesome v5 使用其他字体名称而不是旧版本：

*   对于 FontAwesome v5，免费版，使用：`font-family: "Font Awesome 5 Free"`
*   对于 FontAwesome v5，专业版，使用：`font-family: "Font Awesome 5 Pro"`

请注意，您也应该设置相同的**font-weight**属性（似乎是 900）。

查找字体名称的另一种方法是右键单击页面上的示例字体真棒图标并获取字体名称（可以找到 utf-8 图标代码的相同方式，但请注意，您可以在 上找到它`:before`）。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-02-07T01:20:11.670

除了上面 Diodeus 的回答之外，您还需要`font-family: FontAwesome`规则（假设您`@font-face`的 CSS 中已经声明了 FontAwesome 的规则）。然后就是知道哪个 CSS 内容值对应于哪个图标。

我在这里列出了它们：http: [//astronautweb.co/snippet/font-awesome/](http://astronautweb.co/snippet/font-awesome/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-11-27T09:45:35.303

实际上，即使是`font-awesome`CSS 也有类似的设置图标样式的策略。如果您想快速掌握`icon` **代码**，请检查[`non-minified font-awesome.css`](https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome.css)文件，它们就在那里……*每种字体都纯正。*

[![Font-Awesome CSS 文件截图](../Images/bcec839e5b0a9e071f291c9f7f596320.png)](https://i.stack.imgur.com/9zNVN.png)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-08-31T07:37:55.080

整合以上所有内容，以下是运行良好的最终类

```
 .faArrowIcon {
        position:relative;
    }

    .faArrowIcon:before {
        font-family: FontAwesome;
        top:0;
        left:-5px;
        padding-right:10px;
        content: "\f0a9"; 
    } 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-08-03T05:30:14.940

To use font awesome using css follow below steps -

step 1 - Add Fonts of FontAwesome in CSS

```
/*Font Awesome Fonts*/
@font-face {
    font-family: 'FontAwesome';
    //in url add your folder path of FontAwsome Fonts
    src: url('font-awesome/fontawesome-webfont.ttf') format('truetype');
} 
```

Step - 2 Use below css to apply font on class element of HTML

```
.sorting_asc:after {
    content: "\f0de"; /* this is your text. You can also use UTF-8 character codes as I do here */
    font-family: FontAwesome;
    padding-left: 10px !important;
    vertical-align: middle;
} 
```

And finally, use "**sorting_asc**" class to apply the css on desired HTML tag/element.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-08-25T10:23:53.413

你可以试试这个示例类。并在这里找到图标内容：http: [//astronautweb.co/snippet/font-awesome/](http://astronautweb.co/snippet/font-awesome/)

```
 #content h2:before {
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transform: translate(0, 0);
    content: "\f007";
    } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-15T09:42:51.173

我参加聚会有点晚了。只是想建议另一种方式。

```
 button.calendar::before {
    content: '\f073';
    font-family: 'Font Awesome 5 Free';
    left: -4px;
    bottom: 4px;
    position: relative;
  } 
```

`position`,`left`并`bottom`用于对齐图标。

有时添加`font-weight: 600`或以上也有帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-01T19:29:20.887

无需将内容嵌入 CSS。您可以将徽章内容放在 fa 元素中，然后调整徽章 css。[http://jsfiddle.net/vmjwayrk/2/](http://jsfiddle.net/vmjwayrk/2/)

```
<i class="fa fa-envelope fa-5x" style="position:relative;color:grey;">
  <span style="
        background-color: navy;
        border-radius: 50%;
        font-size: .25em;
        display:block;
        position:absolute;
        text-align: center;
        line-height: 2em;
        top: -.5em;
        right: -.5em;
        width: 2em;
        height: 2em;
        border:solid 4px #fff;
        box-shadow:0px 0px 1px #000;
        color: #fff;
    ">17</span>
</i> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-14T07:44:01.397

```
#content h2:before {
    content: "\f055";
    font-family: FontAwesome;
    left:0;
    position:absolute;
    top:0;
} 
```

示例链接： [https ://codepen.io/bungeedesign/pen/XqeLQg](https://codepen.io/bungeedesign/pen/XqeLQg)

从以下位置获取图标代码： [https ://fontawesome.com/cheatsheet?from=io](https://fontawesome.com/cheatsheet?from=io)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-11T07:59:48.013

或者，如果使用 Sass，可以“扩展” FA 图标以显示它们：

```
.mytextwithicon:before {
  @extend .fas, .fa-angle-double-right;

  @extend .mr-2; // using bootstrap to add a small gap
                 // between the icon and the text.
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-06T23:00:54.690

为此，您只需在适用的情况下通过 :before 或 :after 将`content`属性和`font-family`属性添加到所需元素。

例如：我想在帖子中的所有元素*之后附加一个附件图标。*`a`所以，首先我需要搜索 fontawesome 中是否存在这样的图标。就像我在[这里](http://fontawesome.io/icon/paperclip/)找到它的情况一样，即`fa fa-paperclip`。然后我会右键单击那里的图标，然后转到`::before`伪属性以获取`content`它正在使用的标签，在我的情况下我发现它是`\f0c6`. 然后我会像这样在我的css中使用它：

```
 .post a:after {
     font-family: FontAwesome,
     content: " \f0c6" /* I added a space before \ for better UI */
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-09-27T16:41:52.260

通过命令行使用以下 Python 程序从 Font-Awesome 图标创建 png 图像：

[https://github.com/Pythonity/font-awesome-to-png](https://github.com/Pythonity/font-awesome-to-png)

# domain-driven-design - 关于表达与引用和存储库的关系的一些令人困惑的事情

> ID：14736504
> 
> 赞同：0
> 
> 时间：2013-02-06T18:48:16.160
> 
> 标签：domain-driven-design

• 我们可以通过**对象引用**来表达两个实体之间的*关联（尽管**聚合根*与其*内部实体*之间的关系也可以通过*根上定义的方法*来表达--> ）或通过从数据库中检索*相关实体的***存储库**. • 当通过*Repository*表达关系时，*客户端*会直接调用*Repository*来获取*相关实体* • 如何表达*关系*取决于该*关系是否存在******`SomeRootEnt.BorrowMeIntEnt(...)` *********是*保持完整性*所必需的（也许是*行为*是否需要*关联*才能表达自己）**************

 ******1）如果*关系*（比如**1:***）是通过*Repository*表达的，那么*子实体*是否需要包含*父实体的**ID*（注意：这个问题假设至少有一个父实体是根或者它们都位于同一个总计的 ）？

 *2）*不同聚合中的实体*之间的*关系*只能用*ID来表示*

 **a) 为什么？

b）这种*关系*本质上不是通过*Repository*表达的吗？

c) 如果**b)**是，这也表明在大多数情况下*，不同聚合中的实体*之间的*关联*不是为了支持特定*行为*而必需的？如果是，为什么？

 ****更新：**

2a)

> 用标识引用表达关系不同于用对象引用表达关系。应该用身份表示关系的原因是为了维护事务完整性——即在任何给定事务中只会修改单个聚合。如果使用对象引用，则事务可能会影响两个聚合。

我 - 我理解你想要表达的观点，因为如果关系将用*对象引用*来表达，那么仅仅是因为聚合 A1（正在修改）“物理”连接到另一个聚合 A2，这意味着A1 的一部分（即 A2 <--实际上 A2 并不是 A1 的一部分，但希望您理解这一点）与其他部分不同步？！

II - 但是从概念上讲，如果我们修改A1，那么即使两者之间的关系不使用*对象引用*来表达，两个聚合仍然是不同步的，所以实际上，A1和A2是否有什么区别？物理连接？

III - 无论如何，为什么我们不能在这两种情况下简单地使用*最终一致性*？

**第二次更新：**

原创_2)

> 需要明确的是，根实体（AR）之间的关系应该用身份来表示。应该禁止不同聚合中的非根实体之间的引用。

我们是否可以拥有只能从*A1 非根实体* 到*A2 根实体*的单向关联（即A1 中的*非根实体*将包含 A2 根的 ID）？

2) 一)

我。

> 如果使用对象引用，则事务可能会影响两个聚合。
> 
> 它创造了在修改 A1 的事务中修改 A2 的可能性。通过身份引用 A2 消除了这种可能性。此外，在加载 A1 时，诸如数据库锁定之类的事情将不适用于 A2。

暂时忽略在更新 A1 时 DB 锁定不适用于 A2 的事实 - 为什么在某些情况下我们不应该允许在单个事务中同时修改 A1 和 A2？

我知道聚合定义了一致性边界，但是如果在极少数情况下我们需要 A1 和 A2 在同一个事务中同步，那么只有其他选择可能是将 A1 和 A2 转换为单个聚合，在该特定模型中可能不是合适的？！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:08:39.087

1) 是的。例如，假设您有一个有订单的客户。要获取客户的所有订单，您可以通过订单存储库选择具有相应 CustomerId 的所有订单。

2）要清楚，根实体（AR）之间的关系应该用身份来表示。应该禁止不同聚合中的非根实体之间的引用。

2a) 用一个身份引用表达关系不同于用一个对象引用表达关系。应该用身份表示关系的原因是为了维护事务完整性——即在任何给定事务中只会修改单个聚合。如果使用对象引用，则事务可能会影响两个聚合。

2b) 是的。存储库允许遍历，身份表示关系。

2c）这是聚合的重点——它应该定义一个一致性边界。如果对聚合的更改应该影响聚合，那么这些更改应该能够以最终一致的方式应用。

**更新**

2a1) 它创造了在修改 A1 的事务中修改 A2 的可能性。通过身份引用 A2 消除了这种可能性。此外，在加载 A1 时，诸如数据库锁定之类的事情将不适用于 A2。

2a2) 如果修改 A1 的事务导致需要应用到 A2 的更改，这些更改*最终*将被同步。保持它们物理分离的原因在 2a1 中说明。

2a3) 你可以，但同样，2a1 中指定的原因解释了为什么使用身份引用更好。

**更新 2**

2）我想如果两个 AR 的完整性得到维护并且参考使生活变得更容易，这是可以接受的。引用本身不是问题，它可能会导致问题。

2a1) 其原因之一在于更现代的文档数据库架构。文档数据库通常只支持单个文档上的原子事务。另一个原因是两个 AR 可能存储在不同的数据库中，在这种情况下，需要分布式事务来保持一致性。但是，关系数据库当然可以锁定多个表，因此在一个事务中修改两个 AR 的情况是可能的。因此，这些限制应被理解为指导方针。如果了解所有后果并谨慎行事，则可以接受更新两个 AR。***********

# c++ - 优化模运算的代码

> ID：14736514
> 
> 赞同：2
> 
> 时间：2013-02-06T18:49:14.440
> 
> 标签：c++, math, optimization, modular-arithmetic

我正在尝试计算下面的大数表达式。

![N!/((N/2)!(N/2)!)](../Images/95641d22361f04b57ba71e94e353d916.png)

由于这个表达式的值会很大，我只需要这个表达式的值取模一些素数。假设这个表达式的值为`x`并且我选择素数`1000000007`；我正在寻找`x % 1000000007`。

这是我的代码。

```
#include<iostream>
#define MOD 1000000007
using namespace std;
int main()
{
    unsigned long long A[1001];
    A[2]=2;
    for(int i=4;i<=1000;i+=2)
    {
        A[i]=((4*A[i-2])/i)%MOD;
        A[i]=(A[i]*(i-1))%MOD;

    while(1)
    {
        int N;
        cin>>N;
        cout<<A[N];
    }
} 
```

但即使如此多的优化对于较大的 N 值也是失败的。例如，如果 N 为 50，则正确的输出是`605552882`，但这给了我`132924730`。如何进一步优化它以获得正确的输出？

**注意**：我只认为 N 是偶数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:13:28.157

进行模运算时，没有除法之类的操作。取而代之的是，您取分母的模逆并相乘。模逆是使用 Etienne Bezout 在 1779 年发现的扩展欧几里得算法计算的：

```
# return y such that x * y == 1 (mod m)
function inverse(x, m)
    a, b, u := 0, m, 1
    while x > 0
        q, r := divide(b, x)
        x, a, b, u := b % x, u, x, a - q * u
    if b == 1 return a % m
    error "must be coprime" 
```

该`divide`函数返回商和余数。上面给出的所有赋值运算符都是同时赋值，首先计算所有右侧，然后同时分配所有左侧。[您可以在我的博客](http://programmingpraxis.com/2009/07/07/modular-arithmetic/)上看到更多关于模运算的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T14:31:39.923

1.  对于初学者来说，根本不需要模除法，您的公式可以重写如下：

    N!/((N/2)!^2) =(1.2.3...N)/((1.2.3...N/2)*(1.2.3...N/2)) = ((N/2+1)...N)/(1.2.3...N/2))

    *   好的，现在您将较大的数字除以较小的数字
    *   所以你可以通过乘除数和除数来迭代结果
    *   所以展位子结果具有相似的幅度
    *   任何时候两个数字都可整除 2 将它们左移
    *   这将确保不会溢出
    *   如果你在 (N/2) 的和处！而不是只为其余的继续乘法。
    *   任何时候两个子结果都可以被任何东西整除
    *   直到你被除以 1
    *   在此之后，您可以乘以模算术直到正常结束。
2.  有关更高级的方法，请参阅此。

    *   N！和（N/2）！比第一眼看起来更容易分解
    *   我已经解决了一段时间了，...
    *   这是我发现的：[Fast exact bigint factorial](https://stackoverflow.com/q/18317648/2521214)
    *   简而言之，N！和 ((N/2)!)^2 将完全消失。
    *   只有简单的素数分解 + 4N <-> 1N 修正会提醒

解决方案：

```
I. (4N!)=((2N!)^2) . mul(i=all primes<=4N) of [i^sum(j=1,2,3,4,5,...4N>=i^j) of [(4N/(i^j))%2]]
II. (4N)!/((4N/2)!^2) = (4N)!/((2N)!^2)
----------------------------------------
I.=II. (4N)!/((2N)!^2)=mul(i=all primes<=4N) of [i^sum(j=1,2,3,4,5,...4N>=i^j) of [(4N/(i^j))%2]] 
```

*   唯一的问题是 N 必须能被 4 整除……因此在所有方面都是 4N。
*   如果您有 N%4!=0 则解决 NN%4 并且结果由 misin 1-3 数字正确。

希望能帮助到你

# ruby-on-rails - 带有执行 HTML 的 Markdown？

> ID：14736516
> 
> 赞同：2
> 
> 时间：2013-02-06T18:49:27.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, markdown

我正在尝试创建一个博客应用程序，它允许我输入一个模型对象文本，它是 HTML/ERB 和 MD 的组合，其中一些用于文字发布，一些用于渲染/执行。

理想情况下，我只是将我希望发布的文本描述为带有反引号或类似 Markdown/Redcarpet 的代码，然后执行 HTML/ERB 的其余部分。换句话说，我希望将这个（实际示例，与内容无关的）文本输入到我的 Post 模型中：

```
Take a look at the below strangely named cow, and imagine sorting through all 93 packages of ground meat.

<%= image_tag('MeatUp Log.png', class: 'blog_photo') %>

Since every package was associated with a given user and had an expected and actual weight, butchers had to comb through long lists of cuts (for cows, as MeatUp broke them down, there were 22 different cuts, totaling hundreds of packages), to find the right one to update after they weighed it.

To simplify the process both visually and practically, I looked into a simple Javascript expand/collapse function, and ended up homebrewing a neater, more adaptable version from something I found in a blog.

<div class="codebox">
 expand.js.coffee

 ```
 jQuery -> 
  $('.cl .bundle').on 'click', (e) ->
    e.preventDefault()
    $collapse = $(@).closest('.collapse-group').find('.collapse')
    $collapse.collapse 'toggle'
 ```

</div> 
```

看起来像这样：

![在此处输入图像描述](../Images/f70ba2bc416fa4e7a34681ab75334b68.png)

反而。它目前看起来像这样：

![在此处输入图像描述](../Images/f6fedebf5f3cb31881d7dd514118a824.png)

这里有两个问题。1) ERB 显示但不渲染，即使它没有被反引号包围。2) HTML 从显示中消失，但也未呈现。它用于格式化（上面的蓝色代码框），但似乎没有被读取。

我基本上遵循[这里](http://railscasts.com/episodes/207-syntax-highlighting-revised)的建议，使用 Redcarpet 进行降价，使用 Pygments 进行代码着色，但我想确保这个过程尽可能简单，并且我可以在其中包含已执行和未执行的代码——理想情况下通过仅使用反引号。

尝试在我的 application_helper 中取出“.html_safe”，但这只会让事情变得疯狂：

```
 class HTMLwithPygments < Redcarpet::Render::HTML
    def block_code(code, language)
        Pygments.highlight(code, lexer: language)
    end
  end

  def markdown(text)
    renderer = HTMLwithPygments.new(hard_wrap: true, filter_html: true)
    options = {
      autolink: true,
      no_intra_emphasis: true,
      fenced_code_blocks: true,
      lax_html_blocks: true,
      strikethrough: true,
      superscript: true
    }
    Redcarpet::Markdown.new(renderer, options).render(text).html_safe // This guy
  end 
```

有任何想法吗？

编辑——我尝试按照[此处](http://daringfireball.net/projects/markdown/syntax)的说明将 HTML 分隔一行。这只是导致上述消失问题。这是Redcarpet不可避免的功能吗？我应该放弃 MD 的想法吗？如果是这样，对于我可以同时提供纯文本和 ERB 的简单帖子模型的任何替代建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:49:43.877

我想出了一个解决方案，它仍然感觉有点老套，但很合我的胃口。一世

A) 从我的 application_helper 中的 RedCarpet 设置中删除了“filter_html: true”（这是我在上述 Railscast 之后默认启用的设置。

```
 def markdown(text)
    renderer = HTMLwithPygments.new(hard_wrap: true)
    options = {
      nowrap: true,
      autolink: true,
      no_intra_emphasis: true,
      fenced_code_blocks: true,
      lax_html_blocks: true,
      strikethrough: true,
      superscript: true
    }
    Redcarpet::Markdown.new(renderer, options).render(text).html_safe
  end 
```

B）我将要执行的 HTML 的每一段（除了链接和图像——所以只是样式化 HTML，我猜）包装在一个允许它被渲染的块中。在这里找到了相关文档。

C）我摆脱了ERB。在我看来，RedCarpet 并不是真正为渲染 ERB 而设计的，所以我将我需要的所有 ERB 转换为 HTML（这是一篇博文，所以这不是问题，尽管这个解决方案并不完全可扩展）。我所有的 link_to 都变成了常规的 HTML 链接。

D）我不得不对精确的缩进等进行一些修补，但它成功了。所以现在我可以用类似下面的东西填充一个 Post 对象，并让它变成带有 pygments 格式的蓝色格式的代码框，以及功能性的 CSS 链接和图像。对我有用，尽管它仍然比我理想的情况多出 15% 的头痛。如果有人想出更好的主意，请告诉我：

```
Some markdown text.

More markdown text with a nicely rendered <a href="#" title="title" class="stylin">link</a> in it. 

<img src="image.png">

And some code in a stylized codebox:

<notextile><div class="codebox">example.html.erb</notextile>

```html
<h4>This works!</h4>
<p>Well enough for now, at least</p>
<small>Any improvements you can think of would be appreciated</small>
```

<notextile></div>
</notextile> 
```

无论如何，这就是我现在的“答案”，但如果你们中有人能想到更好的答案，请告诉我。

# google-chrome - 使用输入类型日期时 ngModel 不更新

> ID：14736518
> 
> 赞同：5
> 
> 时间：2013-02-06T18:49:36.520
> 
> 标签：google-chrome, angularjs

我不确定这是否是一个错误，但这是我想要完成的。我只关心谷歌浏览器，因为这是出于调试目的。我想使用 html5 输入类型 date 并让它更新模型。问题在于，如果我从弹出窗口中选择一个日期，角度不会更新它。如果我改为使用箭头来遍历日期，则它会更新它。还有其他方法可以让 ngModel 更新吗？

```
<div ng-app>
     <input type="date" data-ng-model="date" style="width:200px;" />
     <br>
     {{ date }}
</div> 
```

这是它的一个小提琴：http: [//jsfiddle.net/rtCP3/55/](http://jsfiddle.net/rtCP3/55/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:16:32.170

当您向上/向下单击鼠标或单击错误时， Angular 会监听`input`似乎触发的事件。出于某种原因（错误？）该事件不会从日历对话框中触发。

我创建了简单的指令，该指令注册到`change`事件然后更新模型。[您可以在此处](http://plnkr.co/edit/r4PkFbvk9xJmMEGEoSD9?p=preview)查看一个工作示例。

该指令非常简单：

```
module.directive('dateFix', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, element, attr, ngModel) {
            element.on('change', function() {
                scope.$apply(function () {
                    ngModel.$setViewValue(element.val());
                });         
            });
        }
    };
}); 
```

然后像这样使用它：`<input type="date" ng-model="dateValue" date-fix />`

至少是一个临时的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-05T13:00:51.037

```
<form>
     <input type="date" name="date"  data-ng-model="date" style="width:200px;" />
</form> 
```

并且您的值位于：**form.date.$viewValue**；

# jquery - 最新的 Datepicker jquery-ui-1.10.0 问题

> ID：14736519
> 
> 赞同：0
> 
> 时间：2013-02-06T18:49:36.283
> 
> 标签：jquery, jquery-ui, datepicker

我有一个日期选择器，点击日期我正在做一些事情。这在我使用较旧的 jQuery UI 版本时有效，但在升级到最新版本后我遇到了问题。如果您检查日期选择器，您会看到每个单元格都有“ui-state-default”类，这是我点击的那个。

$(document).on("click", ".ui-state-default", function(){

```
alert("Inside"); 
```

});

此点击事件现在不适用于最新的 jQueryUI。

我正在使用最新的 jQuery 和 jQuery UI。

*   jquery-1.9.1.min.js

*   jquery-ui-1.10.0.custom.min.js

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:59:28.947

不知道你想做什么，但你为什么不做这样的事情呢？基本上将其链接`click`在实际`input`本身上，而不是将其附加到另一个`UI`元素上。

```
$('.dateBox').datepicker().click(function(){
    alert("yo");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:12:29.303

也许这会奏效。请注意，我尚未使用最新版本对此进行测试：

```
$( ".dateselector" ).datepicker({ onSelect: function(){ 
 alert('Hey You Clicked Me!');
} }); 
```

# php - swift mailer php windows 服务器

> ID：14736521
> 
> 赞同：0
> 
> 时间：2013-02-06T18:49:38.573
> 
> 标签：php, swiftmailer

我在 Windows 服务器上使用 swiftmailer 发送电子邮件时遇到了麻烦。在 linux 上一切正常，但无法在 windows 服务器上发送电子邮件（页面执行且不显示错误消息）。有什么必须在 php.ini 中设置的，这是我的代码：

.. require_once 'lib/swift_required.php';

```
$transport = Swift_SmtpTransport::newInstance();

$mailer = Swift_Mailer::newInstance($transport);

$message = Swift_Message::newInstance()

 ->setSubject('...')

  ->setFrom(array($fromm => '..')) 

  ->setTo(array($fromm, $mail))

  ->setBody( 
```

...

提前致谢

# c++ - 为什么会在意外标记附近出现语法错误？命令行参数？

> ID：14736523
> 
> 赞同：3
> 
> 时间：2013-02-06T18:49:42.007
> 
> 标签：c++, input, command-line-arguments

这是我没有的代码-不确定为什么会收到此错误消息：

```
$ ./main.cpp "hello" "is"
./main.cpp: line 4: syntax error near unexpected token `('
./main.cpp: line 4: `int main(int argc, char *argv[]){' 
```

它在 g++ 中编译得很好，但是当我运行它时，我得到了上述错误。知道为什么吗？这是我的完整代码..

```
#include <iostream>
#include <fstream>

int main(int argc, char *argv[]){

    for(int i = 0; i < argc; i++){
        std::cout << argc << " : " << argv[i] << '\n';
    }

    if (argc != 2){
        std::cout << "\nUSAGE: 2 command line arguments please." << std::endl;
        std::cout << "\n   (1) Input file with raw event scores.\n   (2) Output file to write into.";
    }

  // open the font file for reading
    std::string in_file = argv[1];
    std::ifstream istr(in_file.c_str());
    if (!istr) { 
        std::cerr << "ERROR: Cannot open input file " << in_file << std::endl;
  }

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:54:33.987

您必须运行已编译的程序，而不是源代码：

```
$ g++ -o main main.cpp
$ ./main "hello" "is"
3 : ./main
3 : hello
3 : is

USAGE: 2 command line arguments please.

   (1) Input file with raw event scores.
   (2) Output file to write into.ERROR: Cannot open input file hello 
```

您的示例试图将 C++ 代码作为 shell 脚本执行，但这是行不通的。正如您从我在这里的程序测试运行的输出中看到的那样，您仍然有一些错误需要解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:14:04.777

正如其他两个答案所说，您将其作为 shell 脚本运行，隐式使用`/bin/sh`.

以 开头的前两行`#`被 shell 视为注释。第三行是空白的，什么也不做。第四行被解释为 command `int`，但括号对 shell 来说是特殊的，在这里没有正确使用。您的 中可能没有`int`命令`$PATH`，但 shell 没有机会报告这一点，因为它会因语法错误而窒息。

这些细节都不是特别重要。问题是您执行的程序不正确。但是看看为什么会打印这些特定的错误消息可能会很有趣。

看来您已经做了类似的事情`chmod +x main.cpp`；否则shell会拒绝尝试执行它。使 C++ 源文件可执行不会造成任何真正的危害（只要它是可读和可写的），但它一点用处都没有，而且正如您所见，它延迟了对错误的检测。如果您这样做`chmod -x main.cpp`，然后再试`./main.cpp`一次，您将收到“权限被拒绝”错误。

正如卡尔的回答所说，您需要执行编译器生成的可执行文件，而不是 C++ 源文件。这就是为什么有一个编译器。编译器（嗯，实际上是链接器）将自动`chmod +x`对它生成的可执行文件执行等效的操作。

该`file`命令将告诉您某些文件是什么类型的文件，这会影响您可以使用它做什么。例如，在我的系统上使用您的代码，运行后`g++ main.cpp -o main`：

```
$ file main.cpp
main.cpp: ASCII C program text
$ file main
main: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0xacee0dfd9ded7aacefd679947e106b500c2cf75b, not stripped
$ 
```

（该`file`命令应该识别`main.cpp`为 C++ 而不是 C，但有时它会猜错。）

“ELF”是我的系统使用的可执行格式；该文件包含可执行的机器代码以及一些其他信息。系统上预装的命令使用相同的格式。

细节可能在您的系统上有所不同——在非类 Unix 系统（如 MS Windows）上会有很大差异。例如，在 Windows 上，可执行文件通常以`.exe`扩展名命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:55:58.873

默认情况下，编译器会创建一个名为“a.out”的可执行文件，因此您需要执行以下操作：

> $ a.out "你好" "是"

键入“./main.cpp”正在尝试执行 C++ 源文件，可能作为 shell 脚本

# shell - 查找其中没有特定文件的文件夹

> ID：14736524
> 
> 赞同：1
> 
> 时间：2013-02-06T18:49:43.727
> 
> 标签：shell, unix, scripting

我在 unix 中有许多文件夹（名称不同），它们都应该有相同的几个文件名。我想找到没有特定文件的文件夹：

例如：

```
A/
-->a.dat
-->b.dat
-->c.dat
B/
-->a.dat
-->b.dat
-->c.dat
C/
-->a.dat
-->c.dat 
```

查找`b.dat`文件时，如何确定该`C`文件夹没有它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:05:59.663

循环遍历每个目录，如果它没有您要查找的文件，请将其添加到结果列表中。

使用上面给出的文件结构，此脚本：

```
#!/bin/bash

result=()
for D in *; do
    if [ -d "${D}" ] && ! [ -f "${D}/b.dat" ]; then
        result+=("${D}")
    fi
done

echo "result is" "${result[@]}" 
```

印刷：

```
result is C 
```

# android - Android - 联系人和联系号码数据库

> ID：14736526
> 
> 赞同：0
> 
> 时间：2013-02-06T18:49:56.510
> 
> 标签：android, android-contacts

我在论坛上读了很多书，从中看来，联系人和他们的电话号码似乎存储在 android 上的单独数据库中。

有人可以解释这些数据库中的数据如何链接到 ContactsContract.RawContact 类，以及它是如何在 ContactsContract.Contacts 和 ContactsContract.CommonDataKinds 中组织的吗？当它们代表联系人的许多相似信息时，这两个类之间还有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:02:09.890

[ContactsContract](http://developer.android.com/reference/android/provider/ContactsContract.html)是一个数据库。但是您可以查询不同的表。并且一些表通过连接添加了其他信息。因此，如果您查询[ContactsContract.Data](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)表，您可以访问[ContactsContract.RawContacts](http://developer.android.com/reference/android/provider/ContactsContract.RawContacts.html)和[ContactsContract.Contacts](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)表。

去挖掘链接，你会发现很多信息。基本上，您有一个由具有数据的 RawContacts 组成的联系人。

# php - 如何缩短此 PHP 代码以使其更通用？

> ID：14736527
> 
> 赞同：-1
> 
> 时间：2013-02-06T18:49:58.290
> 
> 标签：php, optimization

对于阅读本文的 PHP 大师，我相信您会理解我在这里寻找的内容。我正在寻找一种通用的方法来做我已经在做的事情。目前，我支持一个方法值，该方法值最多有 6 个方法名称，由 | 分隔。特点。如果我希望能够支持 n 可以是任意数字的方法，我该如何转换下面的代码。我基本上是在寻找有助于减少我目前拥有的代码量的语法。

```
// example value for $method 
// $method = 'getProjectObject|getProgramObject|getName';

$methods = explode('|', $method);
if (sizeof($methods) == 1) {
    $value = $object->$method();
}
else if (sizeof($methods) == 2) {
    $value = $object->$methods[0]()->$methods[1]();
}
else if (sizeof($methods) == 3) {
    $value = $object->$methods[0]()->$methods[1]()->$methods[2]();
}
else if (sizeof($methods) == 4) {
    $value = $object->$methods[0]()->$methods[1]()->$methods[2]()->$methods[3]();
}
else if (sizeof($methods) == 5) {
    $value = $object->$methods[0]()->$methods[1]()->$methods[2]()->$methods[3]()->$methods[4]();
}
else if (sizeof($methods) == 6) {
    $value = $object->$methods[0]()->$methods[1]()->$methods[2]()->$methods[3]()->$methods[4]()->$methods[5]();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:53:34.097

您可以使用一些循环，例如`foreach`：

```
$methods = explode('|', $method);
foreach ($methods as $method) {
    $object = $object->$method();
}
$value = $object; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T18:54:36.353

```
$methods = explode('|', $method);
$ret = $object;
foreach ($methods as $method)
{
    $ret = $ret->$method();
}
return $ret; 
```

# networking - nmap 警告：因为重传上限命中而放弃端口 (2)

> ID：14736530
> 
> 赞同：22
> 
> 时间：2013-02-06T18:50:07.477
> 
> 标签：networking, nmap, port-scanning, domain-mapping

我正在尝试使用 nmap 扫描大量域名。我使用了以下命令：

```
Nmap -PN -p443 -sS -T5 -oX out.xml -iL in.csv 
```

我收到以下警告：

```
Warning: xx.xx.xx.xx giving up on port because retransmission cap hit (2). 
```

为什么会这样？如何解决问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-07T00:41:05.427

该选项`-T5`指示 nmap 使用“疯狂”的计时设置。这是当前源代码的相关部分，说明了这意味着什么设置：

```
 } else if (*optarg == '5' || (strcasecmp(optarg, "Insane") == 0)) {
    o.timing_level = 5;
    o.setMinRttTimeout(50);
    o.setMaxRttTimeout(300);
    o.setInitialRttTimeout(250);
    o.host_timeout = 900000;
    o.setMaxTCPScanDelay(5);
    o.setMaxSCTPScanDelay(5);
    o.setMaxRetransmissions(2);
  } 
```

`-T5`如您所见，最大重传次数为 2。当重传次数有非默认上限（使用、`-T4`或手动设置`--max-retries`）并且达到该上限时，将打印您看到的警告。

为避免此问题，请尝试缩减您的计时设置。`-T4`仍然非常快，并且应该适用于附近的网络。`-T3`是默认值。如果您确定您的延迟和带宽没有问题，但您可能由于硬件故障而丢包，您可以手动设置`--max-retries`为更高的值，并保留其余`-T5`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T20:38:21.447

我有同样的问题和改变`T`参数，`--max-retries`并没有改变任何东西。

对我来说问题是我在 VirtualBox 中的网络适配器被配置为`NAT`而不是`bridge`.

这可能是因为虚拟卡已被所有数据包饱和。这个配置解决了我的问题。

# c++ - 两级分层类中的C ++多态性：不明白为什么它不起作用

> ID：14736532
> 
> 赞同：0
> 
> 时间：2013-02-06T18:50:10.123
> 
> 标签：c++, inheritance, polymorphism

我有一个由 ValueNode 和 OperatorNode 继承的类 GenericNode。OR_Node 继承 OperatorNode。

```
#include <iostream>
#include <vector>

template< typename T_Value >
class GenericNode
 {
public: 
GenericNode() {} ;
virtual ~GenericNode() {} ;
// virtual T_Value evaluate() { std::cout << "BAD I'm abstract, who call me?" << std::endl ;} ;
virtual T_Value evaluate() = 0 ;
} ;

template< typename T_Value >
class ValueNode : public GenericNode<T_Value>
{
public:
ValueNode() {} ;
ValueNode( T_Value arg0 )
{
    this->aValue = arg0 ;
}
void setValue( T_Value arg0 )
{
    this->aValue = arg0 ;
}
~ValueNode() {} ;
 protected: 
T_Value aValue ;
public: 
virtual T_Value evaluate()
{
    return this->aValue ;
}
 } ;

 template< typename T_Value >
class OperatorNode : public GenericNode<T_Value>
{
public:
OperatorNode() {} ;

OperatorNode( GenericNode<T_Value>* arg0 , GenericNode<T_Value>* arg1 )
{
    std::cout << "aValue: " << arg0->evaluate() << std::endl ;
    std::cout << "aValue: " << arg1->evaluate() << std::endl ;
    this->left = arg0 ;
    this->right = arg1 ;
    std::cout << "aValue: " << this->left->evaluate() << std::endl ;
    std::cout << "aValue: " << this->right->evaluate() << std::endl ;
}
virtual T_Value evaluate() { std::cout << "BAD I'm abstract OperatorNode, who call me?" << std::endl ;} ;
virtual ~OperatorNode() {} ;
//protected:    
GenericNode<T_Value>* left ;
GenericNode<T_Value>* right ;

} ;

template< typename T_Value >
class OR_Node : public OperatorNode<T_Value>
{
public:
~OR_Node() {} ;
OR_Node( GenericNode<T_Value> *arg0 , GenericNode<T_Value> *arg1 )
{
    OperatorNode<T_Value>( arg0 , arg1 ) ;
}
public: 
virtual T_Value evaluate()
{
    std::cout << "ok here " << std::endl ;

    std::cout << "-> " << this->left->evaluate() << std::endl ;

    //return this->left->evaluate() + this->right->evaluate() ;
}
} ;
int main()
 {
 std::vector< GenericNode< int >* > myVec ;
 ValueNode<int> One , Two , Three , Four , Five ;
 One.setValue( 1 ) ;
 Two.setValue( 2 ) ;
 Three.setValue( 3 ) ;
 Four.setValue( 4 ) ;
 Five.setValue( 5 ) ;
 OR_Node<int> orOne( &Three , &Four ) ;

 //std::cout << "----> " << orOne.evaluate() << std::endl ;
 myVec.push_back( &orOne ) ;

 myVec.push_back( &One ) ;
 myVec.push_back( &Two ) ;
 myVec.push_back( &Three ) ;
 myVec.push_back( &Four ) ;
 myVec.push_back( &Five ) ;

// ValueNode< int > aVN( 1 ) ;
   while (!myVec.empty())
    {
        std::cout << "-> " << myVec.back()->evaluate() << std::endl ;
        myVec.pop_back();
    }

return 0 ;
} 
```

输出是：

```
aValue: 3
aValue: 4
aValue: 3
aValue: 4
-> 5
-> 4
-> 3
-> 2
-> 1
ok here 
Segfault 
```

我不明白为什么代码行：

```
std::cout << "aValue: " << this->left->evaluate() << std::endl ; 
```

工作正常，线路

```
std::cout << "-> " << this->left->evaluate() << std::endl ; 
```

产生段错误。

谢谢！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:05:34.917

```
OR_Node( GenericNode<T_Value> *arg0 , GenericNode<T_Value> *arg1 )
{
    OperatorNode<T_Value>( arg0 , arg1 ) ;
} 
```

这段代码：

1.  调用基类的默认构造函数`OperatorNode<T_Value>`
2.  构造另一个类型的临时对象，并`OperatorNode<T_Value>`传递给它。`arg0``arg1`
3.  暂时丢弃。

`OperatorNode<T_Value>`所以其中的成员`OR_Node<T_Value>`仍然是未初始化的指针。

初始化基类子对象的正确方法是使用成员初始化器列表：

```
OR_Node( GenericNode<T_Value> *arg0 , GenericNode<T_Value> *arg1 )
    : OperatorNode( arg0, arg1 )
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:05:48.180

我同意 GHL，您正试图弹出一个空堆栈。尝试首先检查堆栈以查看它是否为空，如果它确实为空，则抛出异常或退出。

# iphone - AS3 在 Flash Professional CS6 中检测 ipad 或 iphone

> ID：14736535
> 
> 赞同：0
> 
> 时间：2013-02-06T18:50:20.120
> 
> 标签：iphone, actionscript-3, ipad, flash, air

使用 Flash Professional CS6，我创建了一款在 iPad 2 和 3 上看起来和玩起来都很棒的游戏。所以现在我已经准备好通过制作一个更适用于 iPhone 上的小屏幕的应用程序来打造“通用”应用程序。

我想做的是在我的第一帧中检测到这样的事情：

```
if iPhone {
gotoAndPlay(2, "Scene 1");
}
else if iPad {
gotoAndPlay(3, "Scene 2");
}
else {
trace("Not an iOS Device");
} 
```

如果看到 2010 年的帖子，人们以 px 为单位检索设备的高度和宽度，但肯定有更好的方法，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:06:39.473

[能力](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html)类有有用的信息。os 属性应该有助于确定设备，但您需要进行试验以查看每个设备返回的内容。

但是，我建议基于屏幕大小而不是设备类型来进行逻辑 - 这样它就更灵活了。

# powershell - Powershell 附加 CSV 失败

> ID：14736538
> 
> 赞同：1
> 
> 时间：2013-02-06T18:50:34.493
> 
> 标签：powershell, csv

我对powershell相当陌生，但是当我尝试运行这部分代码时，它有时会起作用，但我通常会收到一条错误消息：

```
"Method invocation failed because [System.Management.Automation.PSObject] doesn't contain a method named 'op_Addition'." 
```

当我添加 $in + $o 时它似乎失败了，并且它在过去一直有效。我没有改变任何东西让它停止工作。我正在尝试附加到 csv，并且我尝试了 Export-CSV -append，但这对我不起作用。关于这段代码可能有什么问题的任何想法？

```
 $in = Import-Csv $csv

    $obj = New-Object PSObject
    $obj | Add-Member NoteProperty Column1 "$c1"
    $obj | Add-Member NoteProperty Column2 "$c2"
    $obj | Add-Member NoteProperty Column3 "$c3"

    $in + $obj | Export-Csv -Encoding ASCII -NoTypeInformation $csv 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:55:05.890

这可能在 $in 是一个数组之前有效。但是，如果您在 CSV 中仅读取一个元素，它将失败。您可以在 PowerShell 3.0 中执行此操作（您甚至不需要读取 $in）：

```
$obj | Export-Csv $csv -Encoding ASCII -NoTypeInformation -Append 
```

`-Append`Export-Csv 上的参数是 PowerShell 3.0 中的新参数。如果你没有 3.0 然后修改这一行：

```
$in = @(Import-Csv $csv) 
```

然后它应该工作。这确保它`$in`始终是一个数组。

# sql - Oracle SQL获取按日期过滤的完整数据集中第一次出现的行的计数？

> ID：14736540
> 
> 赞同：0
> 
> 时间：2013-02-06T18:50:46.180
> 
> 标签：sql, oracle

我们有一个如下所示的数据集：

```
ID       eventType     date
--------------------------------
1        foo           2 March 2013
2        foo           3 March 2013
3        bar           3 March 2013
4        foo           5 March 2013
5        foo           6 March 2013
6        bar           7 March 2013
7        baz           8 March 2013 
```

我可以很容易地从这个列表中得到唯一的`eventTypes`列表。但是，我如何查询`eventTypes`首先出现在 BETWEEN`startDate`和`endDate`. 我希望能够有一个从 2013 年 3 月 7 日到 2013 年 3 月 10 日的日期范围，并得到一个返回 1 的计数，因为`baz`值是`eventType`在该日期范围内新出现的。另一方面，2013 年 3 月 5 日至 2013 年 3 月 7 日的日期范围将返回计数 0，因为`eventTypes`在该范围内没有新出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:08:33.560

我只想看看使用`MIN`聚合函数在查询结束日期之前查找事件类型的最早出现。然后我会看看是否有任何事件在范围的开始日期之后有最早的事件。

```
SELECT event_type, date_value
from (
  SELECT event_type, min(date_value) as date_value
  from your_table
  where date_value <= date '2013-03-10'
  group by event_type
)
where date_value >= date '2013-03-07' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:55:13.460

我认为这应该对你有用。基本上加入表反对自己：

```
SELECT COUNT(DISTINCT T.EventType)
FROM YourTable T
   LEFT JOIN YourTable T2 ON T.eventType = T2.eventType AND T2.dateField < to_date('2013-03-07','yyyy-mm-dd')
WHERE T.DateField BETWEEN to_date('2013-03-07','yyyy-mm-dd') 
  AND to_date('2013-03-10','yyyy-mm-dd')
       AND T2.Id IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/2bfb1/13)。

- 编辑

正如@JoachimIsaksson 正确指出的那样，您可以轻松（并且可能最好）将其更改`LEFT JOIN`为：

```
 LEFT JOIN YourTable T2 ON T.eventType = T2.eventType AND T2.dateField < T.dateField 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:20:54.003

这样的事情应该可以解决问题：

```
SELECT COUNT(DISTINCT eventType)
FROM YOUR_TABLE T1
WHERE
    date BETWEEN :startDate AND :endDate
    AND NOT EXISTS (
        SELECT *
        FROM YOUR_TABLE T2
        WHERE T1.eventType = T2.eventType AND T2.date < :startDate
    ) 
```

用简单的英语：

*   排除`eventType`在给定日期之前已经存在的所有行。
*   然后只计算给定日期范围内剩余内容的不同出现次数。

另一种表达方式是使用 MINUS：

```
SELECT COUNT(*)
FROM (
  SELECT eventType
  FROM your_table
  WHERE date BETWEEN :startDate AND :endDate
  MINUS
  SELECT eventType
  FROM your_table
  WHERE date < :startDate
); 
```

注意：在这种情况下不需要 COUNT(DISTINCT)，因为 MINUS 意味着 DISTINCT，即 MINUS 的左侧将只返回唯一条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:17:14.307

我不完全理解您的数据和问题，但我认为您可以使用分析函数按日期之间/range_between 和事件类型对数据进行分区。然后你的分区中有 rownum() 或 rank()/dense_rank() ，这将是你的序列。最低的序列。也许你的答案。

# r - R错误无法使用url打开连接

> ID：14736543
> 
> 赞同：0
> 
> 时间：2013-02-06T18:50:56.470
> 
> 标签：r, url, ftp

我一直在研究这段代码，基本上我需要从[这个](ftp://agrofawn-prod01.osg.ufl.edu/pub/howard/georgia/)目录中读取文件，但是我一直收到错误“无法打开连接”，请帮我看看哪一部分出错了？

希望这段代码不会让你感到困惑，真的很想弄清楚如何从上面的链接中获取所有以 .M 文件（.M09 或 .M10）结尾的文件，如果你有更好的想法，请帮助，谢谢你。

```
file.path.in <- file.path("C:", "Users", "agclim", "GAData", fsep=.Platform$file.sep); # Windows                             
file.extension <- c("(\\.M\\d{2})"); 
filename.in.all <- list.files(file.path.in, pattern=paste(file.extension,"+$",sep=""), full.names=FALSE);    
filename.in.all <- sort(filename.in.all, decreasing=FALSE);        
library("gdata");
for (i.in in 1:length(filename.in.all)) { 
    cat(paste("The data in the",filename.in.all[i.in],"file are processing now.", sep=" "), "\n");
    url.conn.server <- url(file.path("ftp://agrofawn-prod01.osg.ufl.edu","pub", "howard","georgia",filename.in.all[i.in],fsep=.Platform$file.sep), open="r", blocking=TRUE, encoding=getOption("encoding"));    
    data.01 <- readLines(url.conn.server, n=-1, ok=TRUE);                     
    unlink(url.conn.server);
    close(url.conn.server);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:59:21.700

你不想`file.path()`在你的`url()`电话中出现这个问题。试试这个：

```
ftp_url <- "ftp://agrofawn-prod01.osg.ufl.edu/pub/howard/georgia/"
# ...skipping loop logic...
url.conn.server <- url(paste(ftp_url, filename.in.all[i.in], sep="")) 
```

# c# - 旋转变换后WPF图像不显示

> ID：14736545
> 
> 赞同：1
> 
> 时间：2013-02-06T18:51:02.493
> 
> 标签：c#, wpf, image, height, width

我想知道是否有人可以帮助我解决显示问题。我想使用下面的代码简单地允许顺时针旋转 90 度：

```
 RotateTransform rotateTransform = new RotateTransform();
        rotateTransform.CenterX = image1.Width / 2.0;
        rotateTransform.CenterY = image1.Height / 2.0;
         cW+= 90;

        rotateTransform.Angle = cW;

        TransformGroup transformGroup = new TransformGroup();
        transformGroup.Children.Add(rotateTransform);

        image1.RenderTransform = transformGroup; 
```

在 XAML 中，当我定义图像的高度和宽度时，图像将旋转。但是，当设置为自动时，执行此代码后图像会消失。为什么会发生这种情况，我该如何解决这个问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:52:28.100

您可能需要使用图像的`ActualHeight`and `ActualWidth`：

```
RotateTransform rotateTransform = new RotateTransform();
rotateTransform.CenterX = image1.ActualWidth / 2.0;
rotateTransform.CenterY = image1.ActualHeight / 2.0; 
```

如果您明确设置高度和宽度，则它们是相同的。未设置时，高度和宽度未设置，因此您的中心是错误的。

# objective-c - 键的 JSON 值以@开头

> ID：14736546
> 
> 赞同：0
> 
> 时间：2013-02-06T18:51:02.470
> 
> 标签：objective-c, json

我有如下的json响应：

```
 "hj.tradingResponse" =     {
    "@approved" = true;
    "@qualified" = true;
    billingAddress =         {
        address = "146 W. Main Street";
        city = Aguilar;
        country = US;
        postalCode = 81020;
        state = Colorado;
    }; 
```

我将结果存储在字典中。当我为键赋值时字节`[result valueForKey:@"\"@approved\""];`

我得到空值，但我认为`@approved`没有识别。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:06:17.203

在 JSON 中，引号本身不是键的一部分。

尝试

```
[result valueForKey:@"@approved"] 
```

# paypal - 如何使用 Paypal Payments Pro 沙盒模拟错误？

> ID：14736548
> 
> 赞同：1
> 
> 时间：2013-02-06T18:51:08.063
> 
> 标签：paypal, payflowpro

如何使用 PayPal Payments Pro 模拟错误？我正在尝试模拟诸如可疑欺诈、拒绝卡等内容。

我们正在使用 Magento Commerce 企业版，并且希望能够从用户界面中看到错误。任何帮助将不胜感激。

我们正在使用 PayPal 沙箱进行开发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T20:17:41.923

在 Developer Central 站点 ( [https://developer.paypal.com](https://developer.paypal.com) ) 上，登录并转到**Dashboard** >> **Sandbox** >> **Accounts**。查找 PayPal Payments Pro 帐户的电子邮件地址。单击它，然后单击**Profile**。在**设置**选项卡上，确保启用了**否定测试。**

启用否定测试后，请确保订单总额与 PayPal 的错误代码之一匹配（您可以在[此处](https://developer.paypal.com/docs/classic/api/errors/)查看完整列表）。例如，要模拟错误代码 15005（这是您的基本“卡被拒绝”错误），运行 150.05 美元的交易。

更多信息[在这里](https://developer.paypal.com/docs/classic/lifecycle/sb_error-conditions/)。

**2017 年 7 月 7 日编辑：**更改了说明以反映否定测试模式切换的当前位置，并更改了指向 PayPal 开发文档的链接。

# c# - 加密流使用不当

> ID：14736549
> 
> 赞同：0
> 
> 时间：2013-02-06T18:51:09.450
> 
> 标签：c#, encryption, cryptostream

我正在尝试在我的客户端 - 服务器应用程序上实现加密，但由于我实现了它，我无法在应用程序之间进行通信。

服务器：

```
private void CommsHandler(object client)
    {

        TcpClient tcpClient = (TcpClient)client;

        StreamWriter writer;
        StreamReader reader;
        using (RijndaelManaged myRijindel = new RijndaelManaged())
        {
            myRijindel.GenerateKey();
            myRijindel.GenerateIV();
            ICryptoTransform encryptor = myRijindel.CreateEncryptor(myRijindel.Key, myRijindel.IV);

            byte[] Key = {0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,  
                0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16};
            byte[] IV = {0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,  
               0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16};  

            CryptoStream secureStreamRead = new CryptoStream(tcpClient.GetStream(), myRijindel.CreateDecryptor(Key,IV), CryptoStreamMode.Read);
            CryptoStream secureStreamWrite = new CryptoStream(tcpClient.GetStream(), myRijindel.CreateEncryptor(Key, IV), CryptoStreamMode.Write);

            reader = new StreamReader(secureStreamRead);
            writer = new StreamWriter(secureStreamWrite);
        }

        NetworkStream network = tcpClient.GetStream();

        char[] buffer = new char[4096];

        while (true)
        {
            try
            {
                reader.Read(buffer, 0, buffer.Length);
            }
            catch (Exception)
            {
                InsertLog(2, "Communication with client closed");
                break;
            }
            string message = new string(buffer);
            Debug.Write(message);

            doJob(message, writer, network);

            for (int i = 0; i < buffer.Length; i++)
            {
                buffer[i] = (char)0;
            }
        }

        tcpClient.Close();
    } 
```

客户：

```
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        client.Connect(textBox1.Text, Convert.ToInt16(textBox2.Text));

        using (RijndaelManaged myRijindel = new RijndaelManaged())
        {
            myRijindel.GenerateKey();
            myRijindel.GenerateIV();
            ICryptoTransform encryptor = myRijindel.CreateEncryptor(myRijindel.Key, myRijindel.IV);

            byte[] Key = {0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,  
                0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16};
            byte[] IV = {0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,  
                0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16};

            CryptoStream secureStreamRead = new CryptoStream(client.GetStream(), myRijindel.CreateDecryptor(Key, IV), CryptoStreamMode.Read);
            CryptoStream secureStreamWrite = new CryptoStream(client.GetStream(), myRijindel.CreateEncryptor(Key, IV), CryptoStreamMode.Write);

            reader = new StreamReader(secureStreamRead);
            writer = new StreamWriter(secureStreamWrite);
        }

        network = client.GetStream();
        connected = true;
        MessageBox.Show("Connected successfully", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }
    catch (Exception ex)
    {
        MessageBox.Show("Could not connect to server:" + Environment.NewLine + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

我的实施有什么问题吗？特别是在`StreamWriter`和`StreamReader`零件上。还是其他地方的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:37:27.923

using 块总是在块的末尾调用 IDisposable.Dispose()。

所以如果你说：

```
using (RijndaelManaged myRijindel = new RijndaelManaged())
{
    ...
} 
```

一旦您结束区块，您的加密提供者就会关闭。我想这是你问题的一部分。

# css - Kendo Mobile - 模态视图未调整到内容的高度

> ID：14736553
> 
> 赞同：0
> 
> 时间：2013-02-06T18:51:18.307
> 
> 标签：css, html, kendo-ui, modal-view

我正在使用 Kendo Mobile 并正在测试模态视图。我的目标是让模态视图的高度自动调整为其中的内容。

这是我目前拥有的：

```
<div id="mPopover" data-role="modalview" style="width: 95%; height: auto;">
    <div data-role="content">
        <ul data-role="listview">
            <li>...</li>
            .
            .
            .
        </ul>
    </div>
</div> 
```

这在我测试过的所有移动浏览器（Android 2.3 普通浏览器、Firefox、Dolphin）上都能正常工作……除了 Opera Mobile。我知道 Opera 并没有声称得到完全支持，但是有没有人知道为什么 Opera Mobile 中的内联高度值没有得到同样的尊重？我在 Opera Mobile 中看到的只是一条非常薄的模态视图。

我正在使用适用于 Android 2.3 的最新 Kendo UI Mobile、Jquery 和 Opera Mobile 浏览器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:03:54.313

Kendo UI Mobile 没有声称对 Opera Mobile 有任何支持——很多东西都会在那里被破坏。这有几个原因 - flexbox（现在在最新的 Opera 中支持）、无法删除点击轮廓以及糟糕的 CSS 转换/转换性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:30:04.283

想出一个可靠的解决方法，使用 JQuery 正确调整所有模式视图的大小：

```
$(window).bind("load", function () {        
    // kendo rendering fix for windows phone 8 and opera mobile
    // correctly sizes all modal views
    $("[data-role=\"modalview\"]").each(function() {
        $(this).height($(this).height());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T17:35:35.540

在调用模式 'open' 调用之前调用它：

```
$(".km-modalview-wrapper").height('auto'); 
```

此外，您必须将 data-stretch="true" 设置为模态视图。

# r - R 的 ASCII 绘图函数

> ID：14736556
> 
> 赞同：18
> 
> 时间：2013-02-06T18:40:15.583
> 
> 标签：r, text, graphics, data-visualization

为了访问我的服务器，我不得不使用没有 X 窗口的旧文本终端应用程序。我要做的最好的事情是emacs/ESS。

通常，我希望制作诸如直方图和散点图之类的基本图，而不必费力地将文件传输到具有图形显示的计算机。

是否有基于文本终端的 R 图形库？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T02:52:30.153

有很多事情可以做一些事情。在`stem`默认的 R 中有[这个](https://biostatmatt.com/archives/491) `scat`ter plot 函数，但最重要的是[`txtplot`](https://cran.r-project.org/web/packages/txtplot/)，CRAN 上有一个包，它可以绘制散点图、箱线图、条形图、密度迹线、[acfs](https://en.wikipedia.org/wiki/Autocorrelation)和曲线图（就像`curve`函数......有点）。

我只是偶尔需要它一次——但如果我想像有时需要的那样用纯文本表达一个图形的粗略概念，它就是救命稻草。

过去，我写了一小段 R 代码，可以在很短的时间内制作出计数样式的 ascii 图形（例如横向条形图或用符号替换数字的茎叶图，这解决了我遇到的问题） -但我没有保留它，因为 stem 主要涵盖该领域。

当然，“table”工具会产生 ascii 输出，并且可以被操纵来做一些有趣/有用的半图形化的事情。

还有一个包*可*[`ascii`](https://cran.r-project.org/web/packages/ascii/index.html)用于以与 Sweave 类似的方式将各种 R 对象呈现为 ascii 形式 - 便于格式化表格等。只是将表格格式化为 ascii 并不是真正的用途，但您仍然可以通过一些工作和正确的输出格式来使用它。

txtplot 的示例输出：

散点图：

```
 > with(cars,txtplot(speed,dist))
     +----+-----------+------------+-----------+-----------+--+
 120 +                                                   *    +
     |                                                        |
 100 +                                                        +
     |                                                   * *  |
  80 +                          *         *                   +
     |                                       *      *    *    |
  60 +                          *              *              +
     |                             *    * *    *      *       |
  40 +                        *      *  * *  *                +
     |                *       * *    *  *    * *              |
  20 +         *      *  * *  * *  *                          +
     |           *    *  * *                                  |
     |  *      *    *                                         |
   0 +----+-----------+------------+-----------+-----------+--+
          5          10           15          20          25 
```

acf 图：

```
 > txtacf(ldeaths)
      +-+--------------+--------------+--------------+--------+
    1 + *                                                     +
      | *                                                     |
      | *  *                        * *  *                    |
  0.5 + *  *                        * *  *                    +
      | *  * *                   *  * *  * *                  |
      | *  * *                   *  * *  * *                  |
      | *  * *                   *  * *  * *                  |
    0 + *  * *  * *  * *  * *  * *  * *  * *  * *  * *  * *   +
      |           *  * *  * *                   *  * *  * *   |
      |           *  * *  * *                   *  * *  * *   |
      |           *  * *  * *                      * *  * *   |
 -0.5 +              * *  *                        * *  *     +
      |              * *  *                          *        |
      +-+--------------+--------------+--------------+--------+
        0             0.5             1             1.5 
```

密度迹线：

```
 > txtdensity(rnorm(100,m=5,s=.1))
   +------+----------+----------+----------+----------+-------+
   |                           *****                          |
 4 +                          **   ***                        +
   |                         *       ***                      |
   |                        **         ***                    |
 3 +                       **            ***                  +
   |                     ***               **                 |
   |                 *****                   **               |
 2 +               ***                        **              +
   |             ***                           **             |
   |            **                              **            |
 1 +           **                                ***          +
   |         ***                                   ******     |
   |  ********                                          ***   |
   +------+----------+----------+----------+----------+-------+
         4.8        4.9         5         5.1        5.2 
```

箱形图：

```
 > vc <- ToothGrowth[,2]=="VC"
 > oj <- ToothGrowth[,2]=="OJ"
 > txtboxplot(ToothGrowth[vc,1],ToothGrowth[oj,1])
       5      10       15       20       25       30      35   
  |----+-------+--------+--------+--------+--------+-------+--|
                  +--------+-----------+                       
 1   -------------|        |           |------------------     
                  +--------+-----------+                       
                         +------------+----+                   
 2          -------------|            |    |---------          
                         +------------+----+                   
 Legend: 1=ToothGrowth[vc, 1], 2=ToothGrowth[oj, 1] 
```

曲线图：

```
 > txtcurve(sin(pi*x),from=0,to=2)
      +--+-----------+------------+------------+-----------+--+
    1 +          *********                                    +
      |        ***        **                                  |
      |       **            **                                |
  0.5 +     **               **                               +
      |    **                  **                             |
      |   *                     **                            |
    0 +  *                       **                        *  +
      |                            *                      *   |
      |                             **                  **    |
 -0.5 +                              ***               **     +
      |                                **            **       |
      |                                  **        ***        |
   -1 +                                    *********          +
      +--+-----------+------------+------------+-----------+--+
         0          0.5           1           1.5          2 
```

条形图：

```
 > txtbarchart(as.factor(res),pch="|")
    +--+------------+------------+------------+------------+--+
 50 +  |                                                      +
    |  |                                                      |
 40 +  |                                                      +
    |  |                                                      |
 30 +  |                         |                            +
    |  |                         |                            |
    |  |                         |                            |
 20 +  |                         |                         |  +
    |  |                         |                         |  |
 10 +  |                         |                         |  +
    |  |                         |                         |  |
  0 +  |                         |                         |  +
    +--+------------+------------+------------+------------+--+
       1           1.5           2           2.5           3   
 Legend: 1=A, 2=B, 3=C 
```

`stem`从默认 R 图形中添加函数：

```
> stem(log(islands,10))

  The decimal point is at the |

  1 | 1111112222233444
  1 | 5555556666667899999
  2 | 3344
  2 | 59
  3 | 
  3 | 5678
  4 | 012 
```

你有很多报道。

# css - CSS 信息框翻转

> ID：14736557
> 
> 赞同：1
> 
> 时间：2013-02-06T18:51:38.447
> 
> 标签：css, image, rollover

我正在尝试使用图像创建一个简单的翻转以显示提示或信息框/气泡。我有一个包含图像 src 的 div 包装器，以及用于样式/定位包装器和子级的 css。我只是不知道如何使 img src 具有交互性。这是html：

```
 <div class="wrapper">
        <img src="images/gallery/wheat3.png" width="250" height="250" data-stellar-ratio="3.5" data-stellar-vertical-offset="200">
    </div> 
```

我想创建一个带有图像“wheat3.png”的翻转以显示和侧面的信息框。

这里也是测试链接： http: [//hatfielddesign.com/witbier_test/](http://hatfielddesign.com/witbier_test/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:06:22.770

查看您显示的测试链接的源代码，似乎他们使用[Stellar.js](http://markdalgleish.com/projects/stellar.js/)来实现此效果。阅读[文档](http://markdalgleish.com/projects/stellar.js/docs/)，它们可能会对您有所帮助；）

# php - 从mysql表中删除密码？

> ID：14736571
> 
> 赞同：0
> 
> 时间：2013-02-06T18:52:21.033
> 
> 标签：php, mysql

我需要从 mysql 的成员表中的密码字段中删除密码。

我有这些代码，如果我将 $password 和密码更改为 $id 和 id 将起作用，但随后它将删除整个用户帐户。我只需要删除/删除用户密码。

删除.php

```
<?php

$host="localhost"; // Host name
$username=""; // Mysql username
$password=""; // Mysql password
$db_name=""; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Delete data in mysql from row that has this id
$sql="DELETE FROM $tbl_name WHERE password='$password'"; <<<< if i change this to id=$id the script will work but it will remove the entire account!! 
$result=mysql_query($sql);

// if successfully deleted
if($result){
echo "Deleted Successfully";
echo "<BR>";
echo "<a href='suspend.php'>Back to main page</a>";
}

else {
echo "ERROR";
}
?>

<?php
// close connection
mysql_close();
?> 
```

这是我的 List.php

```
<?php

$host="localhost"; // Host name
$username=""; // Mysql username
$password=""; // Mysql password
$db_name=""; // Database name
$tbl_name="members"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>

<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td colspan="5" bgcolor="#FFFFFF"><strong>Delete data in mysql</strong> </td>
</tr>

<tr>
<td align="center" bgcolor="#FFFFFF"><strong>Id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Username</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Email</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Pass</strong></td>
<td align="center" bgcolor="#FFFFFF">&nbsp;</td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td bgcolor="#FFFFFF"><? echo $rows['id']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['username']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['email']; ?></td>
<td bgcolor="#FFFFFF"><? echo $rows['password']; ?></td>
<td bgcolor="#FFFFFF"><a href="delete_ac.php?id=<? echo $rows['id']; ?>">Ban and Remove</a></td>
</tr>

<?php
// close while loop
}
?>

</table>

<?php
// close connection;
mysql_close();
?> 
```

我怎样才能删除/删除成员表中的密码字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:58:40.690

RDBMS' 不适用于列，它们适用于行。INSERT、SELECT、DELETE 和 UPDATE 都旨在*在行*的上下文中工作，而不是在*列*的上下文中。

这意味着，如果您想从用户那里“删除”密码，您真正想要做的是`UPDATE`该用户的密码`NULL`( `WHERE user_id = 12345`)。

如果您发出 a `DELETE`，无论您的`WHERE`标准如何，您都在告诉数据库完全删除该行。这意味着数据库将不再包含该用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:56:32.523

您不删除字段。您只需将其更新为 NULL 或为空：

```
$sql="UPDATE $table_name SET password='' where id=$id"; <<<< if i change this to id=$id the script will work but it will remove the entire account!! 
$result=mysql_query($sql); 
```

或者

```
$sql="UPDATE $table_name SET password=NULL where id=$id"; <<<< if i change this to id=$id the script will work but it will remove the entire account!! 
$result=mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:54:22.270

你要做的是`UPDATE`记录，而不是`DELETE`它，

```
$sql="UPDATE $tbl_name SET password = '' WHERE id='$id'"; 
```

# entity-framework - 如何在数据库中的删除触发器中从实体框架/Wcf 服务获取用户 ID？

> ID：14736578
> 
> 赞同：0
> 
> 时间：2013-02-06T18:52:31.883
> 
> 标签：entity-framework, sql-server-2008-r2, entity-framework-4.1, wcf-ria-services, silverlight-5.0

假设我有一个表说 MyTab(ID, ..., UserID) 的数据如下

```
(ID=1, ..., UserID =123) 
```

然后使用 SL app + WCF Ria Service + EF，UserID = 456 的用户运行该应用并尝试删除上述一行数据。我所做的是使用 wcf ria 服务从实体集中删除实体实例，然后是 SubmitChanges。代码如：

```
 mytab.UserID = 456;
 context.MyTabs.Remove(mytab);
 context.SubmitChanges(....); 
```

但在删除触发器中，我无法获取数据 UserID = 456，因为这是删除，而不是更新。在这种情况下，如何在删除触发器中获取 UserID =456？

# android - 将变量值与 R.array 一起使用

> ID：14736579
> 
> 赞同：0
> 
> 时间：2013-02-06T18:52:36.297
> 
> 标签：android, xml

我有一个带有列表视图的活动。单击列表视图中的项目时，会将意图发送到包含单击项目的值的下一个列表。该列表是使用 xml 文件生成的。

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // Selected item
    String cat  = ((TextView) view).getText().toString();

    // Launching new Activity on selecting single Item List
    Intent intent   = new Intent(getApplicationContext(), ContentListing.class);

    // Sending data to new activity
    intent.putExtra("cat", cat);
    startActivity(intent);
} 
```

在下一个活动中，我再次必须读取一个 xml 文件，但该文件将根据在上一个列表中单击的项目而有所不同。

```
// Creating a handle to capture data sent from previous activity
Intent intent = getIntent();

// Storing the category into a variable
String cat = intent.getStringExtra("cat");

// Storing string resources into Array
String[] itemList   = getResources().getStringArray(R.array.itemList); 
```

我想做一些像**`String[] itemList = getResources().getStringArray(R.array.cat);`**ie **R.array.variable**这样对我不起作用的事情。我是 java 和 android 的新手，所以欢迎任何形式的帮助（易于理解和实施）。

另外，我希望第二个活动的名称每次都与单击的项目不同。我应该为此做些什么？

**编辑：**

这是我更新的代码，它给出了关于 getContext() 的错误

```
 public class ContentListing extends ListActivity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_content_listing);

        // Make sure we're running on Honeycomb or higher to use ActionBar APIs
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true); 
        }

        // Creating a handle to capture data sent from previous activity
        Intent intent = getIntent();

        // Storing the category into a variable
        String cat = intent.getStringExtra("cat");

        setTitle(cat);

        // Line that shows error
        int resourceId = Resources.getSystem().getIdentifier(cat, "array", getContext().getPackageName());

        Log.d("Print message1: ", String.valueOf(resourceId)+"\n");
        if(resourceId != 0) {
            Log.d("Print message: ", String.valueOf(resourceId)+"\n");

            // Storing string resources into Array
            //String[] itemList = getResources().getStringArray(R.array.itemList);
            String[] itemList   = getResources().getStringArray(resourceId);

            // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, itemList));

            ListView lv = getListView();

            // Listening to single list item on click
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    // Selected item
                    String product  = ((TextView) view).getText().toString();

                    // Launching new Activity on selecting single Item List
                    Intent intent   = new Intent(getApplicationContext(), ContentListing.class);

                    // Sending data to new activity
                    intent.putExtra("product", product);
                    startActivity(intent);
                }
            });
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_content_listing, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:06:58.903

您可以使用变量从资源中加载数组，如下所示：

```
int resourceId=Resources.getSystem().getIdentifier(cat, "array", getContext().getPackageName());
if(resourceId != 0){
  getResources().getStringArray(resourceId);
} 
```

要设置活动的标题，

```
setTitle(cat); 
```

不过，我会考虑检查您传入的额外值，然后使用 if else 语句加载资源。您可以更好地保证事情会正常工作。

```
int resId = R.array.defaultValue;
if(cat.equals("category1"){
  resId = R.array.categoryOneValues;
} else if(cat.equals("category2"){
  resId = R.array.categoryTwoValues;
}
getResources().getStringArray(resId); 
```

# c# - 有没有比使用这些 if 语句更有效的编码方式？

> ID：14736584
> 
> 赞同：0
> 
> 时间：2013-02-06T18:52:56.757
> 
> 标签：c#, if-statement

对于我的部分代码，有一个部分一遍又一遍地使用相同的 if 语句，唯一的区别是其中一个变量。有没有更好的方法来构建我的代码？

```
if (buttonArray[m, j].BackColor == levelTwo && buttonArray[m, a].BackColor == levelTwo
 && buttonArray[i, j].BackColor == levelTwo)

{
    buttonArray[i, j].BackColor = levelThree;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
}

if (buttonArray[m, j].BackColor == levelThree && buttonArray[m, a].BackColor == levelThree
 && buttonArray[i, j].BackColor == levelThree)
{
    buttonArray[i, j].BackColor = levelFour;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
}

if (buttonArray[m, j].BackColor == levelFour && buttonArray[m, a].BackColor == levelFour
 && buttonArray[i, j].BackColor == levelFour)
{
    buttonArray[i, j].BackColor = levelFive;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
}

if (buttonArray[m, j].BackColor == levelFive && buttonArray[m, a].BackColor == levelFive
 && buttonArray[i, j].BackColor == levelFive)
{
    buttonArray[i, j].BackColor = levelSix;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
}

if (buttonArray[m, j].BackColor == levelSix && buttonArray[m, a].BackColor == levelSix
 && buttonArray[i, j].BackColor == levelSix)
{
    buttonArray[i, j].BackColor = levelSeven;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
}

if (buttonArray[m, j].BackColor == levelSeven && buttonArray[m, a].BackColor == levelSeven && buttonArray[i, j].BackColor == levelSeven)
{
    buttonArray[i, j].BackColor = levelEight;
    buttonArray[m, j].BackColor = Color.Transparent;
    buttonArray[m, a].BackColor = Color.Transparent;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:01:36.610

你可以创建一个方法（虽然我不知道 Level 的类型......）

```
private void CheckLevel(int levelIndex)
{
    if (buttonArray[m, j].BackColor == levelArray[levelIndex] && buttonArray[m, a].BackColor == levelArray[levelIndex] 
        && buttonArray[i, j].BackColor == levelArray[levelIndex])
    {
        buttonArray[i, j].BackColor = levelArray[levelIndex + 1];
        buttonArray[m, j].BackColor = Color.Transparent;
        buttonArray[m, a].BackColor = Color.Transparent;
    }

} 
```

并在您的代码中：

```
CheckLevel(LevelTwoIndex);
CheckLevel(LevelThreeIndex);
CheckLevel(LevelFourIndex); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:09:31.070

看起来您正在尝试做的是每次发生某些事情时循环所有这些按钮的颜色。

这是对该概念的更重要的重写：

首先从创建一个开始，`private Queue<Color> colors = new Queue<Color>();` 这将包含您循环使用的所有颜色，按照它们的使用顺序。

我们可以在首次创建表单时填充它：

```
colors.Enqueue(Color.Red);
colors.Enqueue(Color.Yellow);
colors.Enqueue(Color.Violet);
//Add other colors 
```

现在我们只需要一个方法将“下一个”颜色应用于任意数量的控件：

```
public void ApplyNextColor(params Control[] controls)
{
    Color nextColor = colors.Dequeue();
    colors.Enqueue(nextColor);//add to end so that we cycle; 
    //you can optionally remove and do nothing if there are not items.

    foreach (Control control in controls)
        control.BackColor = nextColor;
} 
```

然后我们可以从例如按钮单击事件或计时器滴答事件中调用它：

```
ApplyNextColor(buttonArray[m, j], buttonArray[m, a]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:05:08.770

```
if (buttonArray[m, j].BackColor == buttonArray[m, a].BackColor 
        && buttonArray[m, a].BackColor == buttonArray[i, j].BackColor) {
    if (buttonArray[m, j].BackColor == levelThree) { // or a switch - case
        ....
    }
} 
```

# python - 如何在 AES 的 EAX 模式下加密文件？

> ID：14736591
> 
> 赞同：3
> 
> 时间：2013-02-06T18:53:21.577
> 
> 标签：python, encryption, aes

是否有支持 AES EAX 模式的 Python 库？[PyCrypto](https://github.com/dlitz/pycrypto)似乎不支持它。

它似乎不受支持是有原因的*吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:56:28.303

我建议你看看[这个](https://github.com/mikeboers/PyTomCrypt) [LibTomCrypt](http://libtom.org/?page=features)包装器。它应该支持你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T14:29:55.950

PyCrypto 2.7 版将很快支持 EAX（以及其他 AEAD 模式，如 GCM、CCM 和 SIV）。

现在，在[PyCrypto 网站上](https://www.dlitz.net/software/pycrypto/)有一个可供下载的 alpha 版本。[或者，您可以在github](https://github.com/dlitz/pycrypto)上查看当前的 master 分支。

# c - openmp 递归任务示例比顺序慢

> ID：14736594
> 
> 赞同：1
> 
> 时间：2013-02-06T18:53:25.060
> 
> 标签：c, parallel-processing, openmp

我刚刚开始研究 OpenMP 并一直在阅读任务。看来 Sun 这里的例子实际上比顺序版本慢。我相信这与任务创建和管理的开销有关。它是否正确？如果是这样，有没有办法让代码在不改变算法的情况下使用任务更快？

```
int fib(int n)
{
  int i, j;
  if (n<2)
    return n;
  else
  {
    #pragma omp task shared(i) firstprivate(n)
    i=fib(n-1);

    #pragma omp task shared(j) firstprivate(n)
    j=fib(n-2);

    #pragma omp taskwait
    return i+j;
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:38:03.500

唯一明智的方法是将并行度削减到一定水平，低于这个水平就没有意义，因为开销变得大于正在完成的工作。最好的方法是有两个单独`fib`的实现——一个串行的，比如说`fib_ser`，一个并行的，`fib`——并在给定的阈值下在它们之间切换。

```
int fib_ser(int n)
{
  if (n < 2)
    return n;
  else
    return fib_ser(n-1) + fib_ser(n-2);
}

int fib(int n)
{
  int i, j;

  if (n <= 20)
    return fib_ser(n);
  else
  {
    #pragma omp task shared(i)
    i = fib(n-1);
    #pragma omp task shared(j)
    j = fib(n-2);
    #pragma omp taskwait
    return i+j;
  }
} 
```

这里的阈值是`n == 20`。它是任意选择的，它的最佳值在不同的机器和不同的 OpenMP 运行时会有所不同。

另一种选择是使用`if`子句动态控制任务：

```
int fib(int n)
{
  int i, j;
  if (n<2)
    return n;
  else
  {
    #pragma omp task shared(i) if(n > 20)
    i=fib(n-1);

    #pragma omp task shared(j) if(n > 20)
    j=fib(n-2);

    #pragma omp taskwait
    return i+j;
  }
} 
```

这将关闭两个显式任务 if `n <= 20`，并且代码将以串行方式执行，但 OpenMP 代码转换仍会产生一些开销，因此它会比使用单独串行实现的先前版本运行得更慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:08:33.773

你是对的，减速与任务创建和管理的开销有关。

添加 if(n > 20) 是修剪任务树的好方法，并且可以通过不创建第二个任务来进行更多优化。当新任务产生时，父线程什么也不做。可以通过允许父任务处理其中一个 fib 调用而不是创建更多任务来加速代码：

```
int fib(int n){
  int i, j;
  if (n < 2)
    return n;
  else{
    #pragma omp task shared(i) if(n > 20)
        i=fib(n-1);

    j=fib(n-2);

    #pragma omp taskwait
    return i+j;
  }
} 
```

# google-maps - HP 触摸屏上的 Google Map Touch 事件

> ID：14736596
> 
> 赞同：4
> 
> 时间：2013-02-06T18:53:32.870
> 
> 标签：google-maps, google-maps-api-3, touch, multi-touch

我正在为 Windows 7 盒子上的 HP Compaq L2105tm 触摸屏开发 Web 应用程序。当我在 Chrome 中打开 maps.google.com 时，地图可以很好地配合捏缩放和您期望从触摸屏获得的其他触摸事件。但是，当我使用以下代码进行基本的谷歌地图嵌入时，触摸事件无法按预期工作。（双指缩放不起作用。）

```
<!doctype html>
<html lang="en">
<head>
    <style>
        html, body, div#map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>

    <script>
        (function() {
            var div = document.getElementById('map');
            var lat = -36.5;
            var lng = 150.5;

            var options = {
                center: new google.maps.LatLng( lat, lng ),
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                zoom: 8
            };

            var map = new google.maps.Map( div, options );
        })();
    </script>
</body>
</html> 
```

我的问题是为什么 maps.google.com 可以在完全相同的浏览器/触摸环境中使用捏缩放，而我的地图不能用于捏缩放？

**更新**

此问题已在 bug 中处理

[https://issuetracker.google.com/issues/35824421](https://issuetracker.google.com/issues/35824421)

并于 2016 年 12 月在 Google Maps JavaScript API 3.27 版中得到解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:36:41.857

我遇到了同样的问题，实际上与 Google Maps Api 团队的某个人交谈过，他们知道这个问题。不幸的是，没有时间表说明何时解决。所以我想你可以在知道他们知道这是一个问题时感到安慰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T22:43:41.370

似乎新的api解决了这个问题

[https://developers.google.com/maps/documentation/javascript/basics#Mobile](https://developers.google.com/maps/documentation/javascript/basics#Mobile)

# forms - 未检查任何内容时，不会更新 Symfony2 形式的复选框

> ID：14736599
> 
> 赞同：0
> 
> 时间：2013-02-06T18:53:43.447
> 
> 标签：forms, symfony, checkbox

我有用户实体和活动。用户有很多活动。我创建了一个表单 -> 用户列表和活动列表（复选框）。

```
User, ACT1, ACT2, ACT3

Jhon---x--------0--------0 
```

x- 复选框被选中

0-复选框未选中

当我有上述数据并按下保存按钮时，一切工作正常，但是当我想取消选中所有活动时：

```
User, ACT1, ACT2, ACT3

Jhon---0--------0--------0 
```

（我按保存按钮）活动没有更新。$_POST 是空的，我认为控制器中没有绑定。单个复选框由 form_widget 以这种方式生成：

```
input type="checkbox" name="users_activities[users][0][activities][1][enabled]" value="1" checked="checked" 
```

知道如何解决吗？

看法：

```
{%for actv in user.activities %}
    {{ form_widget(actv.enabled) }}
{%endfor%} 
```

控制器：

```
 $form->bindRequest($this->getRequest());
    foreach ($form->get('users') as $userF) {
        foreach ($userF->get('activities') as $actF) {
            $act = $actF->getData();
            $em->persist($act);
        }
    }
    $em->flush(); 
```

# javascript - Twitter Bootstrap 弹出框和 AJAX

> ID：14736604
> 
> 赞同：4
> 
> 时间：2013-02-06T18:54:05.027
> 
> 标签：javascript, asp.net, ajax, twitter-bootstrap, popover

我一直在浏览 SO 以获取有关如何在引导弹出窗口上加载 ajax 内容的解决方案，但找不到任何体面的解决方案。

这是我到目前为止所拥有的：

```
$(".btnCharge").click(function () {
    $("#boxPayment").fadeIn();
})
.popover({
    title: 'Advantages',
    html: 'true',
    content: function () {
        $.ajax({
            type: "POST",
            url: "Index.aspx/FindAdvantagesByCCID",
            data: '{"id": "' + 1 + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var json = jQuery.parseJSON(data.d);
                var html = '';
                $.each(json, function (i, item) {
                    html = html + '<a href="#"><i class="icon-ok"></i>' + item.Advantage + '</a><br />';
                });
            }
        });
    },
    placement: 'bottom',
    trigger: 'hover'
}); 
```

如何将 ajax 响应添加到 popover 内容？我尝试了“返回”但不起作用。

任何干净的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T18:57:26.280

是的。有可能的。它已经得到了[回答](https://stackoverflow.com/a/9105085)。

使用`data-`属性，您可以提供 URL，如下所示：

```
<a href="#" title="blabla" data-ajaxload="/test.php">blabla</a> 
```

现在处理程序：

```
$('*[data-ajaxload]').bind('hover',function(){
  var e=$(this);
  e.unbind('hover');
  $.get(e.data('ajaxload'),function(d){
      e.popover({content: d}).popover('show');
  });
}); 
```

`unbind('hover')`防止多次加载数据，并且 popover() 绑定了一个新的悬停事件。如果您希望在每次悬停事件时刷新数据，您应该稍微修改一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T12:27:04.287

您可以像这样直接访问弹出框选项数据：

```
popoverData = $('.myPopover').data('popover') 
```

因此，您可以这样做来更改弹出框内容，因为它一旦设置就无法更改。

```
if (popoverData = $('.myPopover').data('popover'))
{
    popoverData.options.content = newContent;
}

$('.myPopover').popover({ content: newContent, html:true, trigger:'hover' }).popover("show"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T14:27:46.520

你的HTML是这样的...

Id 存在于您的循环中。您将使用此值来检索附加信息 (ajax)。

```
 <tbody data-bind="foreach:persons">
                <tr>
                    <td data-bind="text: id"></td>
                    <td data-bind="text: name"></td>
                    <td ><span data-bind="popOver: {content : $root.contentData, id: id}"</td>
                </tr>
            </tbody> 
```

在您的 viewModel 中，您有一个变量 - 此变量最初为空。

```
 var contentData = ko.observable(); 
```

添加自定义绑定处理程序，例如：

```
> ko.bindingHandlers.popOver = {
>     init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
>         var value = ko.utils.unwrapObservable(valueAccessor());
> 
>         var options = {
>             placement: 'top',
>             title: "Title",
>             html: true,
>             trigger: 'manual',
>             content: value.content
>         };
> 
>         $(element).popover(options);
> 
> 
> 
> 
>         $(element).click(function () {
>             var id = value.id();
>             var response = myApp.GetAdditionalData(id);
>             value.content(response.content);
> 
>             $(this).popover('toggle');
>         });
>     } }; 
```

在您的 viewModel 之外，您将有一个进行 ajax 调用的函数：

```
 var GetAdditionalDataFromAjax = function (id) {
      return { "content": "some content returned by id"}; 
```

# asp.net - 无法将类型 void 隐式转换为对象

> ID：14736610
> 
> 赞同：0
> 
> 时间：2013-02-06T18:54:22.730
> 
> 标签：asp.net

```
protected void Page_Load(object sender, EventArgs e)
{
    using(SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS; database=employee; integrated security = SSPI"))
    {
        SqlCommand cmd = new SqlCommand("select * from emp",con);
        con.Open();
        SqlDataReader sdr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Columns.Add("ID");
        dt.Columns.Add("Name");
        dt.Columns.Add("Option");
        while (sdr.Read())
        {
           DataRow dr = dt.NewRow();
           dr["ID"] = sdr["uid"];
           dr["Name"] = sdr["uname"];
           dr["Option"] = addrbl();
           dt.Rows.Add(dr);

        }
        GridView1.DataSource = dt;
        GridView1.DataBind();

    }
}

private object addrbl()
{
    Panel p1 = new Panel();

    RadioButtonList rl1 = new RadioButtonList();
    rl1.Items.Add(new ListItem("yes","1"));
    rl1.Items.Add(new ListItem("no","0"));
    return(p1.Controls.Add(rl1));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:01:08.630

将 void 方法与 return 语句分开。

p1.Controls.Add(r11)); 没有返回值，因此不能用作 return 语句中的参数。

将 addrbl() 中的 return 语句更改为：

```
p1.Controls.Add(rl1);
return p1; 
```

此外，您应该返回实际的对象类型，而不仅仅是对象类型的对象：

```
private Panel addrbl() {..} 
```

# sql - 当一个条目不符合条件时，SQL 会消除所有重复条目

> ID：14736613
> 
> 赞同：1
> 
> 时间：2013-02-06T18:54:42.147
> 
> 标签：sql, select, where

我有 3 张桌子：食谱、配料表和配料。

我想选择所有不包含任何肉类成分的食谱的名称。

食谱和配料表有一个`recipeid`属性，配料表和配料表有一个`ingredientid`属性。

如果`ingredientlist.ingredientid`包含任何条目`ingredient="meat"`，我想排除`recipe.name`与该条目相关的所有条目`ingredientid`

我不知道怎么写，但这是我的选择：

```
SELECT recipe.name FROM recipe
INNER JOIN ingredientlist ON recipe.recipeid = ingredientlist.recipeid
INNER JOIN ingredients ON ingredientlist.ingredientid = ingredients.ingredientid
WHERE NOT ingredients.type="beef"
GROUP BY recipe.name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:59:51.137

这应该有效：

```
SELECT *
FROM Recipe R
WHERE NOT EXISTS (  SELECT * FROM IngredientList IL
                    INNER JOIN Ingredients I
                        ON I.ingredientid = IL.ingredientid
                    WHERE IL.RecipeId = R.RecipeId
                    AND I.type = 'beef') 
```

# ios - 在 iOS 上从 open 获得 -1，为什么？

> ID：14736614
> 
> 赞同：0
> 
> 时间：2013-02-06T18:54:59.610
> 
> 标签：ios, iphone, file-io, posix, file-descriptor

代码复制如下。我正在使用文档目录，因为我知道您可以在应用程序沙箱之外进行编写。我还比较了我用来确定由 NSFileManager 创建的路径的字符串，它们是相同的。大家怎么看？

```
- (NSString *)documentsDirectory
{
    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

    return [paths objectAtIndex:0];
}

- (void) whateverFunction{
    NSString *memfileName = @"memmapfile.map";

    NSString *filePath = [[self documentsDirectory] stringByAppendingPathComponent:memfileName];

    NSLog(@"Here is the filePath: %@", filePath);

    NSLog(@"Other        version: %s", [[NSFileManager defaultManager] fileSystemRepresentationWithPath:filePath]);
    int memFD = open([filePath cStringUsingEncoding:NSASCIIStringEncoding], O_RDWR);
    NSLog(@"I am getting -1 for memFD: %d", memFD);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:02:17.243

我猜你的文件还不存在，所以你当然不能打开它。您应该将 O_CREAT 添加到您的打开标志中，以便在不存在时创建它：

```
int memFD = open([filePath cStringUsingEncoding:NSASCIIStringEncoding], O_RDWR|O_CREAT); 
```

# dart - 为什么没有触发 keydown 事件？

> ID：14736620
> 
> 赞同：2
> 
> 时间：2013-02-06T18:55:27.947
> 
> 标签：dart

我正在尝试将事件处理程序附加到画布元素中的 keyDown 事件。这是我的代码的简化版本。

```
class CanvasFun{

  CanvasElement canvas;

  CanvasFun(this.canvas){
    print("Game is loading!");
    this.canvas.onKeyDown.listen(handleInput);
  }

  void handleInput(e)
  {
    //breakpoint is never hit
    print(e.keyCode);
  }
} 
```

我已经删除了一些绘图代码。在我的主函数中，我只需查询画布元素并将其传递给我的 CanvasFun 构造函数。

我也试过这样做：

```
void main() {

  var canvas = query("#Game");

  canvas.onKeyDown.listen(handleInput);

  var canvasFun = new CanvasFun(canvas); 

}
void handleInput(e)
{
  print(e.keyCode);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:44:31.157

事件未触发的原因是焦点位于文档（或其他元素，例如输入）上。事实上，canvas 元素即使在获得焦点时也不会触发事件。有些元素可以，比如输入元素。

解决方案是从文档或窗口中监听按键事件：

```
window.onKeyDown.listen(handleInput);
document.onKeyDown.listen(handleInput); // You already noticed this worked. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T00:43:29.743

John McCutchan 编写了一个不错的 Dart 包来帮助处理键盘输入。你可以在这里阅读更多关于它的信息：http: [//dartgamedevs.org/blog/2012/12/11/keyboard-input/](http://dartgamedevs.org/blog/2012/12/11/keyboard-input/)

请注意，此库可帮助您“正确”处理输入。您不想在输入处理中做任何“工作”，而只是想注册一个键被按下。您可以在 requestAnimationFrame 回调中检查任何按键的状态。

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T17:43:32.987

有一种解决方法可以让`canvas`-element 接受键盘事件：

[在 DartFlash 上处理键盘事件的问题](https://stackoverflow.com/questions/14128275/problems-handling-keyboardevents-on-dartflash)

将 - 属性添加`tabindex`到 -`canvas`元素后，它可以获得焦点，然后它将接收键盘事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T19:22:32.807

如果我在文档而不是画布元素上注册事件，看起来我可以让它工作。

```
document.onKeyDown.listen(handleInput); 
```

# google-apps-script - 在 doGet(e) 上将参数传递给 webapp

> ID：14736630
> 
> 赞同：2
> 
> 时间：2013-02-06T18:56:08.520
> 
> 标签：google-apps-script

我试图弄清楚 URL 中的参数如何传递给`doGet()`函数。我试着做

`https://script.google.com/a/macros/[my domain].com/s/[some random string generated by GAS]`其次是`"&variable=data"`

但它只给了我这个错误： *“对不起，您请求的文件不存在。”*

仅供参考，`https://script.google.com/a/macros/[my domain].com/s/[some random string generated by GAS]`没有`"&variable=data".`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:14:49.500

要将 GET 参数添加到 URL 的末尾，您需要使用`?`.

所以你的 URL 应该是这样的

```
http://script.[.......]/exec?variable=data&otherVariable=otherData 
```

此外，请务必发布您的应用程序以获取此功能。文件 > 管理版本。发布 > 发布为 Web 应用程序...

# javascript - .show .hide #div onClick 的简单方法

> ID：14736633
> 
> 赞同：0
> 
> 时间：2013-02-06T18:56:37.547
> 
> 标签：javascript, jquery

我希望有按钮在单击时显示 div 并在单击外部时隐藏。*（页面上的任何地方）*下面的代码不起作用——我不确定，为什么？

*我正在努力;*

```
<div class="side_button" id="side_button2">
TEXT 1
</div>

<div class="side_button" id="side_button3">
TEXT 2
</div> 
```

**CSS**

```
#page_button2 {
    display: none;
    position: absolute;
    height: 300px;
    width: 400px;
    border: 1px dotted red;
    z-index: 999;
}

#page_button3 {
    display: none;
    position: absolute;
    height: 300px;
    width: 400px;
    border: 1px dotted red;
    z-index: 999;
}

.side_button { 
    height: 60px;
    border-bottom: 1px solid #333;
    color: #333;
    font-family: "KlavikaBasic-Bold";

    background-image: linear-gradient(bottom, #e5edda 6%, #fff 100%);
    background-image: -o-linear-gradient(bottom, #e5edda 6%, #fff 100%);
    background-image: -moz-linear-gradient(bottom, #e5edda 6%, #fff 100%);
    background-image: -webkit-linear-gradient(bottom, #e5edda 6%, #fff 100%);
    background-image: -ms-linear-gradient(bottom, #e5edda 6%, #fff 100%);

    background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.06, #dce6cc),
    color-stop(1, #fff)
   );

} 
```

**JS**

```
<script>

// Click to View Page
$(document).ready(function(){

$('#side_button2').click(function() {
    $('#page_button2').show();
    $('#page_button3').hide();
});

$('#side_button3').click(function() {
    $('#page_button3').show();
    $('#page_button2').hide();
});
// 

</script> 
```

**HTML**

```
<!-- Show / Hide Div Side BTN -->

<div id="page_button2">
Test 1.
</div>

<div id="page_button3">
Test 2.
</div>

<!-- // Show / Hide Div Side BTN --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:09:56.780

正如我在评论中所说，您似乎缺少`});`关闭`$(document).ready(`. 没有它，您可能会遇到语法错误

尝试这个：

```
$(document).ready(function(){

    $('#side_button2').click(function() {
        $('#page_button2').show();
        $('#page_button3').hide();
    });

    $('#side_button3').click(function() {
        $('#page_button3').show();
        $('#page_button2').hide();
    });

}); 
```

# javascript - 渲染数组数据

> ID：14736637
> 
> 赞同：0
> 
> 时间：2013-02-06T18:56:50.830
> 
> 标签：javascript, arrays

这可能很容易做到，但是自从我上次使用 JavaScript 以来已经有一段时间了，而且我一生都不记得如何做到这一点（是的，我先搜索了，但没有找到任何可以帮助我的东西）。

本质上，我想使用一个函数将其呈现为 HTML 博客文章：

```
<html>
<head>
<style>
body
{
background-color:#ffa500;
}

#blogElement
{
background-color: #fff;
margin-left:auto;
margin-right:auto;
width:70%;
}
</style>
</head>

<body>

<div id="mainContent">
    <div id="blogElement"></div>
</div>

<script>
var myBlogPosting = {  
  title:    "Google launches underwater Street View",
  image:    "1.jpg",
  author:   "Xeni Jardin",
  bodyText: "<p>Today Google Maps unveils a new Street View feature: " +
            "underwater panoramic views of six special sea spots. " +
            "The idea is to create a virtual map of the oceans, " +
            "documenting the state of fragile ecosystems as they " + 
            "change over time, and sharing a vivid experience of " + 
            "part of our world that few humans get to see up close " + 
            "and in person, in real life.</p>" +
            "<p>The ocean collection on Google Street View is now " + 
            "available at maps.google.com/ocean, and includes coral " + 
            "reefs and the creatures who live in them, in Australia, " + 
            "the Philippines and Hawaii.</p>",
  link:     "http://boingboing.net/2012/09/25/google-launches-underwater-str.html",
  ranking:  "3",
}

function CreateBlogHtml(blogpost)
{
   return "<h1>"+blogpost.title+"</h1>"+
        "<img src="+blogpost.image+" />"+
        "<p>Author: "+blogpost.author+"</p>"+
        blogpost.bodyText+
        "<a href=\""+blogpost.link+"\">Read more</a>"+
        "<p>Ranking: "+blogpost.ranking+"</p>";
}

document.write(CreateBlogHtml(myBlogPosting));

</script>
</body>
</html> 
```

这可能是我一来就打自己脸的事情之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:16:08.057

你的问题不够清楚，有很多方法可以做你想做的事。

一个版本可以即时编写内容

```
<div id="blogElement"></div>
<script>
function CreateBlogHtml(blogpost)
{
   return "<h1>"+blogpost.title+"</h1>"+
          blogpost.bodyText+
          "<a href=\""+blogpost.link+"\">Read more</a>";
}

document.write(CreateBlogHtml(myBlogPosting)); 
</script> 
```

另一个版本将填充 HTML 元素

```
<div id="blogElement"></div>
<script>
function CreateBlogHtml(blogpost)
{
   return "<h1>"+blogpost.title+"</h1>"+
          blogpost.bodyText+
          "<a href=\""+blogpost.link+"\">Read more</a>";
}

function ShowBlogPost(blogpost)
{
    document.getElementById("blogElement").innerHTML=CreateBlogHtml(blogpost))
}

ShowBlogPost(myBlogPosting));
</script> 
```

您还可以创建一个版本来填充博客对象中每个字段的元素。JQuery 将为您提供许多额外的选项来实现您想要的。

注意：这些示例容易受到 HTML 注入的影响。如果您不知道这意味着什么，请阅读此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:05:41.027

```
myBlogPageElement.innerHTML += myBlogPosting.title + MyBlogPosting.bodyText + MyBlogPosting.link; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:07:47.437

```
var myBlogPosting = {  
    title:    "Google launches underwater Street View",
    bodyText: "<p>Today Google Maps unveils a new Street View feature: " +
        "underwater panoramic views of six special sea spots. " +
        "The idea is to create a virtual map of the oceans, " +
        "documenting the state of fragile ecosystems as they " + 
        "change over time, and sharing a vivid experience of " + 
        "part of our world that few humans get to see up close " + 
        "and in person, in real life.</p>" +
        "<p>The ocean collection on Google Street View is now " + 
        "available at maps.google.com/ocean, and includes coral " + 
        "reefs and the creatures who live in them, in Australia, " + 
        "the Philippines and Hawaii.</p>",
    link:     "http://boingboing.net/2012/09/25/google-launches-underwater-str.html"

}

function RenderBlogPost(targetElementID, blogObj) {
    var element = document.getElementById(targetElementID);
    element.innerHTML(blogObj.bodyText);
}

RenderBlogPost("someID", myBlogPosting); 
```

# javascript - 按名称获取对象

> ID：14736639
> 
> 赞同：-2
> 
> 时间：2013-02-06T18:56:54.827
> 
> 标签：javascript, jquery

我正在构建我认为稍微复杂的东西，但我意识到它并没有按照我想要的方式工作，所以我在这里。

以下是我正在做的一个例子。

```
ITEM1: {
  prop1: 'desc1',
  prop2: 'desc2',
},
ITEM2: {
  prop1: 'desc1',
  prop2: {
    SUBITEM1: {
      prop1: 'desc1',
      prop2: 'desc2',
      prop3: 'desc3'
    }
  }
} 
```

现在，如果我执行以下操作，这将非常有效

```
ITEM2.prop2.SUBITEM1.prop1; 
```

问题是我做不到`ITEM2.prop2.SUBITEM1`我需要按以下方式进行

```
ITEM2.prop2["SUBITEM1"].prop1 
```

该项目还很年轻，所以如果需要重建整个列表以正确执行此操作，我不介意。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:00:12.127

你实际上尝试了什么？它在 Chrome 中也是如此。截图供您参考...

![](../Images/1998fdd82f549397c91bdb823a7cb551.png)

文字表示：

```
ITEM1= {
  prop1: 'desc1',
  prop2: 'desc2',
},
ITEM2= {
  prop1: 'desc1',
  prop2: {
    SUBITEM1: {
      prop1: 'desc1',
      prop2: 'desc2',
      prop3: 'desc3'
    }
  }
}
Object
ITEM2.prop2.SUBITEM1.prop1;
"desc1"
ITEM2.prop2["SUBITEM1"].prop1
"desc1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:00:09.173

你想要单独的对象吗？我猜你错过了`var`关键字。在这种情况下，您还必须删除那里多余的逗号。尝试这个：

```
var ITEM1 = {
  prop1: 'desc1',
  prop2: 'desc2',
};
var ITEM2 = {
  prop1: 'desc1',
  prop2: {
    SUBITEM1: {
      prop1: 'desc1',
      prop2: 'desc2',
      prop3: 'desc3'
    }
  }
};
console.log(ITEM2.prop2.SUBITEM1.prop1); // Works! 
```

# c# - 将缩进文本转换为 XML

> ID：14736646
> 
> 赞同：3
> 
> 时间：2013-02-06T18:57:07.697
> 
> 标签：c#, xml, schema

我有一个基于文本的文件，其中的缩进代表 XML 文件的每个 XML 标记。

如何在 C# 中将此文本转换为示例 XML？
我有点失落。我必须计算空格并回顾列表以确定何时关闭标签。

```
sampleroot                                          
  rootHeader                                        
    miscInformation                                 
        Creation                                
        DocumentIdentification                              
            Identifier                          
            Message_Type                            
            Notes                           
        StandardDocumentationIdentification                             
            Standard                            
            Version                         
    Receiver                                    
        Name                                
        lok                             
        Location                                
    Sender                                  
        Name                                
        lok2                                
    msgref                                  
        DocumentIdentifier                              
        HoldInformation                             
            Name                            
            Date                            
        ReleaseInformation                              
            Date                            
    HoldDocumentReference                                   
        AlternativeIdentifier                               
            Authority                           
            Identifier                          
        Notes                               
    ReleaseDocumentReference                                    
        AlternativeIdentifier                               
            Authority                           
            Identifier                          
        Notes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:26:33.883

以下代码适用于具有**四个空格缩进**的输入文档（请**仔细查看输入文档**）。这只是一个示例：当然，您可以使用制表符缩进实现对输入文档的支持。

```
private static void ConvertToXml(Stream inputStream, Stream outputStream)
{
    const int oneIndentLength = 4; // One level indentation - four spaces.
    var xmlWriterSettings = new XmlWriterSettings
        {
            Indent = true
        };

    using (var streamReader = new StreamReader(inputStream))
    using (var xmlWriter = XmlWriter.Create(outputStream, xmlWriterSettings))
    {
        int previousIndent = -1; // There is no previous indent.
        string line;
        while ((line = streamReader.ReadLine()) != null)
        {
            var indent = line.TakeWhile(ch => ch == ' ').Count();
            indent /= oneIndentLength;

            var elementName = line.Trim();

            if (indent <= previousIndent)
            {
                // The indent is the same or is less than previous one - write end for previous element.
                xmlWriter.WriteEndElement();

                var indentDelta = previousIndent - indent;
                for (int i = 0; i < indentDelta; i++)
                {
                    // Return: leave the node.
                    xmlWriter.WriteEndElement();
                }
            }

            xmlWriter.WriteStartElement(elementName);

            // Save the indent of the previous line.
            previousIndent = indent;
        }
    }
} 
```

客户端代码：

```
using (var inputStream = File.OpenRead(@"Input file path"))
using (var outputStream = File.Create(@"Output file path"))
{
    ConvertToXml(inputStream, outputStream);
} 
```

输入文件：

```
sampleroot
    rootHeader
        miscInformation
            Creation
            DocumentIdentification
                Identifier
                Message_Type
                Notes
            StandardDocumentationIdentification
                Standard
                Version
        Receiver
            Name
            lok
            Location
        Sender
            Name
            lok2
        msgref
            DocumentIdentifier
            HoldInformation
                Name
                Date
            ReleaseInformation
                Date
        HoldDocumentReference
            AlternativeIdentifier
                Authority
                Identifier
            Notes
        ReleaseDocumentReference
            AlternativeIdentifier
                Authority
                Identifier
            Notes 
```

输出文件：

```
<?xml version="1.0" encoding="utf-8"?>
<sampleroot>
  <rootHeader>
    <miscInformation>
      <Creation />
      <DocumentIdentification>
        <Identifier />
        <Message_Type />
        <Notes />
      </DocumentIdentification>
      <StandardDocumentationIdentification>
        <Standard />
        <Version />
      </StandardDocumentationIdentification>
    </miscInformation>
    <Receiver>
      <Name />
      <lok />
      <Location />
    </Receiver>
    <Sender>
      <Name />
      <lok2 />
    </Sender>
    <msgref>
      <DocumentIdentifier />
      <HoldInformation>
        <Name />
        <Date />
      </HoldInformation>
      <ReleaseInformation>
        <Date />
      </ReleaseInformation>
    </msgref>
    <HoldDocumentReference>
      <AlternativeIdentifier>
        <Authority />
        <Identifier />
      </AlternativeIdentifier>
      <Notes />
    </HoldDocumentReference>
    <ReleaseDocumentReference>
      <AlternativeIdentifier>
        <Authority />
        <Identifier />
      </AlternativeIdentifier>
      <Notes />
    </ReleaseDocumentReference>
  </rootHeader>
</sampleroot> 
```

# javascript - jquery - 点击 jquery 函数生成的元素

> ID：14736649
> 
> 赞同：0
> 
> 时间：2013-02-06T18:57:28.700
> 
> 标签：javascript, jquery, live

我有一个 jquery 滑块（[nivo 滑块](http://nivo.dev7studios.com/)），它使用 jquery 生成下一个和上一个按钮。我正在尝试为该按钮上的 div 添加 hide() 操作。

```
$(document).ready(function(){
   $(".nivo-prevNav").live('click', function() {
      $("#slide3").hide();
   });
}); 
```

`.nivo-prevNav`类由slider的jquery函数生成

关于如何解决这个问题的任何想法，因为它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:59:25.837

`.live()`已被弃用。改用`.on()`：

```
$(document).on("click", ".nivo-prevNav", function() {
     $("#slide3").hide();
}); 
```

* * *

为了获得更好的性能，您应该`.on()`在 Nivo 插件运行之前调用最近的可用父级：

```
$("#nivo-wrapper").on("click", ".nivo-prevNav", function() {
     $("#slide3").hide();
}); 
```

您应该更改`#nivo-wrapper`为调用 Nivo Slider 的任何元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:03:30.640

您是否收到任何 JavaScript 错误？

```
$(document).ready(function(){
          $(document).on("click", ".nivo-prevNav", function() {
              $("#slide3").hide();
              });
        }); 
```

将“直播”改为“开启”。Live 在最新版本的 jQuery 中被贬低。

# c# - 如何将大文件存储到 SQL Server 2008 并检索所有文件？

> ID：14736650
> 
> 赞同：0
> 
> 时间：2013-02-06T18:57:32.263
> 
> 标签：c#, sql-server, wpf, sql-server-2008

我的问题与 SQL Server 数据库有关。

我使用以下代码成功地将数据从 C# 存储到 SQL Server 表中：

```
 internal static void SaveAutocadFileOnDataBase(string MapCode, byte[] dataElecMap, string dataElecMapName,byte[] dataCivilMap, string dataCivilMapName, byte[] dataArchiMap, string dataArchiMapName,byte[]dataMechaMap,string dataMechaMapName)
        {
            string sqlcommand = string.Concat("INSERT INTO AutoCadFiles VALUES ('", MapCode, "' , ", "cast ('", dataElecMap, "' as varbinary(max)),", " '", dataElecMapName, "' ", " , cast ('", dataCivilMap, "' as varbinary(max)) ,", " '", dataCivilMapName, "' ", " , cast ('", dataArchiMap, "' as varbinary(max)) ,", " '", dataArchiMapName, "' "," , cast ('", dataMechaMap, "' as varbinary(max)) ,", " '", dataMechaMapName, "' ", ")");  ExecuteNonQuery(sqlcommand);
        } 
```

并使用此代码检索它：

```
 internal static DataTable RetriveMaps(string MapNumber, string MapType)
    {
        string s = MapType + "Name";
        string SqlCommand = string.Concat("SELECT ", MapType, " , ", s, " FROM AutoCadFiles WHERE MapCode='",MapNumber, "'");
        return GetBinaryFiles(SqlCommand);
    }

    private static DataTable GetBinaryFiles(string SqlCommand)
    {
        SqlConnection SqlConnction = null;
        DataTable dt = new DataTable();
        SqlCommand sqlcom = GetConnection(SqlCommand, ref  SqlConnction);
        SqlDataReader sdldr = sqlcom.ExecuteReader();
        dt.Load(sdldr);
        return dt;
    } 
```

我成功地从 dataTable 获取文件并将其保存到文件系统中。但是存储的文件量是0字节

或者比数据库中存储的文件少 13 个字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:16:49.393

由于您一次检索一行，因此这个更简单的代码将完成检索数据的工作：

```
 string fileName;
        byte[] fileread;

        SqlCommand command;
        SqlConnection connection = MyGetSqlConnection();

        connection.Open();

        command = new SqlCommand("Select dataElecMapName From AutoCadFiles  Where MapCode = @MapNumber", connection);
        command.Parameters.Add("@MapNumber", SqlDbType.Int).Value = MapNumber;
        fileName = (string)command.ExecuteScalar();
        command.Dispose();

        command = new SqlCommand("Select dataElecMap From AutoCadFiles  Where MapCode = @MapNumber", connection);
        command.Parameters.Add("@MapNumber", SqlDbType.Int).Value = MapNumber;

        fileread = (byte[])command.ExecuteScalar();

        string tempPath = MyFunc.GetTempDirectory();

        FileStream fs = new FileStream(tempPath + fileName, FileMode.Create);
        fs.Write(fileread, 0, fileread.Length);

        System.Diagnostics.Process.Start(tempPath + fileName);

        fs.Close(); 
```

**编辑** 使用此代码转换您的文件：

```
 public static byte[] ConvertFileToBytes(string location, ref string FileName) 
    { 
        FileStream fs = new FileStream(location, FileMode.Open, FileAccess.Read);

        BinaryReader reader = new BinaryReader(fs);

        byte[] data = reader.ReadBytes((int)fs.Length);

        fs.Close(); 
        return data; 
    } 
```

# eclipse-plugin - 如何在eclipse windows7中安装CDT插件

> ID：14736654
> 
> 赞同：0
> 
> 时间：2013-02-06T18:57:44.237
> 
> 标签：eclipse-plugin

我在 eclipse 中工作，它有 Java、PHP、ant、XML

现在我需要使用 C++(cygwin/CDT)。那么如何将它添加到 Eclipse 中呢？

我下载了“eclipse-SDK-4.2-win32”并安装了它，但它没有显示 php 插件，尽管我需要使用 PHP 和 C++。

我在网上搜索安装 CDT，我认为它已安装，但没有显示 CDT 插件。

我已经尝试安装插件三天了，我相信它已经安装但没有显示插件 CDT。

我的任务是基于 Cygwin 的，我需要让它工作，因为我对这项工作非常陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T12:37:30.597

关于 CDT 部分，这可能会有所帮助： [http ://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseCpp_HowTo.html](http://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseCpp_HowTo.html)

安装后，CDT 提供了一个特定的视角，您可以使用它来编写、编译和执行 C 和 C++ 程序。

请注意，仅安装此 Eclipse 插件是不够的：还必须单独安装 C/C++ 编译器，如上述链接中所述。

对于 PHP，您需要另一个名为 PDT 的插件： [http ://projects.eclipse.org/projects/tools.pdt](http://projects.eclipse.org/projects/tools.pdt)

# javascript - jQuery UI Sortable：使用新位置更新每个项目的隐藏输入值

> ID：14736655
> 
> 赞同：5
> 
> 时间：2013-02-06T18:57:44.783
> 
> 标签：javascript, jquery, html, forms, jquery-ui

使用可排序的 jQuery UI 在项目列表中移动，并尝试更新它们在表单字段值中的位置。我不知道如何使用更新的位置编号更新每个项目的隐藏输入值。所有的“当前位置”值都应该在每次移动时发生变化。并且位置编号恰好在页面上以**相反的顺序**显示。

```
<div id='sort-list'>
  <div id='listItem_4'>
    ITEM 4
    <input class='originalposition' type='hidden' name='item[4][origposition]' value='4'>
    <input class='currentposition' type='hidden' name='item[4][currposition]' value='4'>
  </div>
  <div id='listItem_3'>
    ITEM 3
    <input class='originalposition' type='hidden' name='item[3][origposition]' value='3'>
    <input class='currentposition' type='hidden' name='item[3][currposition]' value='3'>
  </div>
  <div id='listItem_2'>
    ITEM 2
    <input class='originalposition' type='hidden' name='item[2][origposition]' value='2'>
    <input class='currentposition' type='hidden' name='item[2][currposition]' value='2'>
  </div>
  <div id='listItem_1'>
    ITEM 1
    <input class='originalposition' type='hidden' name='item[1][origposition]' value='1'>
    <input class='currentposition' type='hidden' name='item[1][currposition]' value='1'>
  </div>
</div> 
```

item[#][currposition] 值应更改为所有项目的新更新位置编号。每个项目的位置值应更新，并在提交表单时具有正确的值。并且这些位置将与提交时的原始值进行比较。

到目前为止，我得到的最接近的是：

```
$(function() {
    $( '#sort-list' ).sortable({
        update : function () { 
            var result = $('#sort-list').sortable('toArray');
            $('input.positioncurrent').each(function() {           

            });
        }
    });
}); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T19:05:54.140

您应该使用该`stop`事件在排序结束时更新位置。

我所做的是，当排序结束时，您检索要更新的输入列表及其编号，并为每个输入更新新位置。[each()](http://api.jquery.com/jQuery.each/)方法提供列表中元素的当前索引作为参数。

```
$(function() {
    $( '#sort-list' ).sortable({
        stop: function () {
            var nbElems = inputs.length;
            $('input.currentposition').each(function(idx) {
                $(this).val(nbElems - idx);
            });
        }
    });
}); 
```

工作[jsfiddle](http://jsfiddle.net/AJnDR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-09T09:54:42.743

您可以按照以下命令进行操作：

```
let oldSort = $('.field_list').sortable('toArray'); 
```

# mongodb - 使用 $in vs $or 在 MongoDB 中查询的优化方式

> ID：14736656
> 
> 赞同：13
> 
> 时间：2013-02-06T18:57:59.430
> 
> 标签：mongodb

实现一个应用程序，从大约 10 个电子邮件 ID 的列表中查找邮件 ID 存在的表。尝试使用 $or 和 $in。

$in 似乎提供了更好的性能，但并不重要。一个比另一个更优化吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-06T21:11:40.307

MongoDB 文档有[答案](http://docs.mongodb.org/manual/reference/operator/or/#_S_or%22)：

“当将 $or 与对同一字段的值进行相等检查的 <expressions> 一起使用时，请选择 $in 运算符而不是 $or 运算符。”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-15T18:33:10.137

`$or`运算符是逻辑运算符，您可以在其中定义自己的登录名，但`$in`运算符是**比较运算符**，您可以在其中进行比较，但不能使用逻辑。

的语法`$in`：

```
{ field: { $in: [<value1>, <value2>, ... <valueN> ] } } 
```

例子：

```
db.account.find( { qty: { $in: [ 5, 15 ] } } ) 
```

的语法`$or`：

```
{ $or: [ { <expression1> }, { <expression2> }, ... , { <expressionN> } ] } 
```

例子：

```
db.account.find( { $or: [ { quantity: { $lt: 20 } }, { price: 10 } ] } ) 
```

注意：Account 是您的收藏名称

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-22T21:23:12.513

“虽然 "$or" 将始终有效，但请尽可能使用 "$in"，因为查询优化器会更有效地处理它。”

此外，"$in" 具有更高的可读性。

参考：MongoDB：权威指南

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-02T10:45:46.513

好吧，如果您使用 $in，这将确保不会出现不确定性，但是我更喜欢将其格式化为 $ 或因为它将确保索引（可读性不会让我担心在我更喜欢使用的应用程序逻辑中处理应用程序的内存而不是 mongodb 服务器）

# java - 运行带有嵌入式环境和 jersey servlet 的 Websocket 连接

> ID：14736658
> 
> 赞同：1
> 
> 时间：2013-02-06T18:58:08.020
> 
> 标签：java, websocket, jetty, embedded-jetty, atmosphere

我试图在不使用 Web.xml 和使用 WebSocket 功能的情况下让 Atmosphere 实例作为 servlet 运行。

似乎映射不起作用，因为我能够连接到服务器 (localhost:8080)，并且 JavaScript 告诉我 WS 连接正在工作，但处理程序未被识别（从未调用方法）。AtmosphereServlet 似乎从未使用过 WebSocketHandlerAdapter。

我发现的所有示例都使用 Web.xml 来设置 servlet，但我需要能够以编程方式实例化我的 servlet（Jetty 容器中的 Atmosphere 和 Jersey）。

我一直在使用这个示例[Atmosphere Websocket Chat](https://github.com/Atmosphere/atmosphere/tree/master/samples/websocket-chat "气氛 websocket 聊天")来设置 WebSocketHandlerAdapter，并使用[Jersey Atmosphere Servlet](https://github.com/charlesbrown/Jersey-Atmosphere-with-Embedded-Jetty/tree/master/src/main/java/com/enteks/atmosphere/samples)在 Jetty 中实例化我的 servlet。

这是我实例化我的服务器/servlet的代码：

```
public Server create() throws Exception {
    logger.info("creating http server");
    Server server = new Server();
    server.setStopAtShutdown(true);

    // configure http
    SelectChannelConnector httpConnector = new SelectChannelConnector();
    httpConnector.setPort(config.getHttpPort());
    server.setConnectors(new Connector[] { httpConnector });

    handlers = new HandlerCollection();
    handlers.setServer(server);
    handlers.addHandler(createLoggingHandler());
    handlers.addHandler(createFileHandler());
    handlers.addHandler(createJerseyRestServletHandler());
    server.setHandler(handlers);
    return server;
}

private ServletContextHandler createJerseyRestServletHandler() {
    ServletHolder atmosphereHolder = initAtmosphereServletHolder();
    ServletHolder jerseyHolder = initJerseyServletHolder();

    // atmosphere
    atmosphereHolder.setInitParameter("org.atmosphere.useWebSocket", "true");
    atmosphereHolder.setInitParameter("WebSocketProtocol", "ChatAtmosphereHandler");
    atmosphereHolder.setAsyncSupported(true);

    FilterHolder filterHolder = new FilterHolder(CrossOriginFilter.class);
    filterHolder.setInitParameter("allowedOrigins", "*");
    filterHolder.setInitParameter("allowedMethods", "GET, POST");

    ServletContextHandler servletHandler = new ServletContextHandler(handlers, "/");
    servletHandler.addServlet(atmosphereHolder, "/websocket/*");
    servletHandler.addServlet(jerseyHolder, "/jersey/*");
    servletHandler.addFilter(filterHolder, "/*", null);

    return servletHandler;
}

private ServletHolder initJerseyServletHolder() {
        ...
}

private ServletHolder initAtmosphereServletHolder() {
    AtmosphereServlet atmosServlet = new AtmosphereServlet();
    ServletHolder atmosphere = new ServletHolder(atmosServlet);

    return atmosphere;
} 
```

* * *

处理程序 websocket ：

```
@WebSocketHandlerService(path = "/websocket", broadcaster = SimpleBroadcaster.class)
public class ChatAtmosphereHandler extends WebSocketHandlerAdapter {

private final ObjectMapper mapper = new ObjectMapper();

@Override
public void onOpen(WebSocket webSocket) throws IOException {
    System.out.println("on Open");
    webSocket.resource().setBroadcaster(BroadcasterFactory.getDefault().lookup("/websocket", true));
}

public void onTextMessage(WebSocket webSocket, String message) throws IOException {
    System.out.println("on Message");
    AtmosphereResource r = webSocket.resource();
    Broadcaster b = r.getBroadcaster();
    b.broadcast(mapper.writeValueAsString(mapper.readValue(message, Data.class)));
}

public final static class Data {

    private String message;
    private String author;
    private long time;

    public Data() {
        this("", "");
    }

    public Data(String author, String message) {
        this.author = author;
        this.message = message;
        this.time = new Date().getTime();
    }

    public String getMessage() {
        return message;
    }

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public long getTime() {
        return time;
    }

    public void setTime(long time) {
        this.time = time;
    }
}
} 
```

最后是 pom.xml

```
 <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlets</artifactId>
        <version>7.6.4.v20120524</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-websocket</artifactId>
        <version>7.6.4.v20120524</version>
    </dependency>
    <dependency>
        <groupId>eu.infomas</groupId>
        <artifactId>annotation-detector</artifactId>
        <version>3.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.3</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-annotations</artifactId>
        <version>1.1.0.beta3</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-jersey</artifactId>
        <version>1.1.0.beta3</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-commons</artifactId>
        <version>0.6.5</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:13:07.670

我是气氛组长。

你可以粘贴你的服务器的日志吗？此外，URL 应该`localhost:8080/websocket/<something>`用于连接。

其次，你为什么要定义 Jersey Servlet？Atmosphere 不需要它，因此只需定义 AtmosphereServlet。

如果可以，请跳上[邮件列表](https://groups.google.com/group/atmosphere-framework?pli=1)以获取更多信息。

# javascript - 根据选择显示不同的表单域

> ID：14736659
> 
> 赞同：1
> 
> 时间：2013-02-06T18:58:09.287
> 
> 标签：javascript, knockout.js

[jsFiddle](http://jsfiddle.net/zQQjE/)

我在项目的各个部分使用 Knockout.js。我正在寻找有关根据用户选择的内容将 HTML 内容添加到表单的最佳方法的建议。

我整理了一个[jsFiddle](http://jsfiddle.net/zQQjE/)，我相信它可以清楚地说明我想要完成的工作。

如果用户选择选项 1 或 2，则会将 HTML 标记`data-configuration="1,2"`添加到表单中。如果用户选择选项 3，则将 HTML 标记`data-configuration="3"`添加到表单中。

我对如何做到这一点有一些想法（挂钩到选择列表的更改事件），但是，我想知道是否有人有更好的“淘汰”方式来完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:16:32.663

通常，我希望根据下拉值在每个部分上设置 css 类，例如：

```
<div data-bind="css: { hide: TypeId() == '' || TypeId() != 3 }"> 
```

我也为你更新了[jsFiddle](http://jsfiddle.net/zQQjE/2/)。

或者，使用我上面使用的相同逻辑的[if 绑定](http://knockoutjs.com/documentation/if-binding.html)，这实际上会将隐藏的元素从 DOM 中取出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:08:02.680

另一个想法是创建一个绑定处理程序，因为它可以让您更好地控制行为。

[http://jsfiddle.net/DRP3d/](http://jsfiddle.net/DRP3d/)

它需要编写的 jQuery（但只是为了使代码更简洁）。

本质上，它只是查看绑定值，查看您在 html 中使用的属性（数据配置），然后根据值与配置的比较隐藏或显示给定元素。

```
ko.bindingHandlers.showtype = {
  update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
      var $element = $(element);
      var config = $(element).attr('data-configuration');
      var value = ko.utils.unwrapObservable(valueAccessor());
      config = config.split(',');

      var found = false;
      for(var i=0, len=config.length; i < len; i++) {
          if (value == config[i]) {
              found = true;
              break;
          }  
      }
      if (found) { $element.show(); } else { $element.hide(); } 
  }      
}; 
```

# javascript - 允许模块使用 AMD/CommonJs 或脚本标签的包装器？

> ID：14736661
> 
> 赞同：17
> 
> 时间：2013-02-06T18:58:35.017
> 
> 标签：javascript, amd, boilerplate, commonjs, dynamic-script-loading

我只是尝试包装我们的一个模块，该模块旨在通过`<script>`某个样板中的标签包含，以允许使用 requirejs 进行可选的 AMD 加载。

这很痛苦，我能想到的最好的办法是：

```
(function(){
var exports, jQuery;
if (typeof window.define === 'function' && typeof window.requirejs === 'function') {
    exports     = {};
    define(['jquery'], function (jq) {
        jQuery = jq;
        return thisModule();
    });
} else {
    exports     = window;
    jQuery      = window.jQuery;
    thisModule();
}

function thisModule() {
}

})(); 
```

请注意，这是

*   很多样板
*   要求您在变量中声明依赖项（幸好在这种情况下只有 jQuery）和 amd
*   如果我想获得 CommonJs 支持，还需要更多代码。

我主要关心第二点，因为当我超越包装我们的核心文件时，它会变得很糟糕。我确定那里有一些整洁的（呃）包装器实现，但我找不到。

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-28T12:20:42.220

您试图重新创建已经存在的东西，我做了完全相同的事情，在[我的 StackOverflow 问题](https://stackoverflow.com/questions/15815460/is-there-already-pre-existing-code-for-supporting-dojo-amd-nodejs-require-and-b)中提出了一个稍微不同的解决方案。

长话短说，您需要知道的名称是“通用模块定义”，并且有一个位于[https://github.com/umdjs/umd](https://github.com/umdjs/umd)的 GitHub，其中包含各种不同的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:06:16.067

在对此进行破解之后，我设法提出了以下内容，这似乎要好得多，甚至可以作为 shim 包含在常规脚本标签中：

几个注意事项和缺点。

*   您必须将窗口对象上的任何显式设置替换为导出对象
*   它假定任何依赖项都作为 window 对象上类似命名的属性存在（尽管它也确保将该属性放置在那里）。在我的情况下，这通常足够安全，但您可以轻松破解诸如 requirejs 路径配置之类的东西。
*   实际上，我不相信整个出口概念是特别必要的，或者至少在所有情况下都不是必要的。

```
(function () {
    var define, exports = {};
    if (window.define && window.define.amd) {
        define = window.define;
    } else {
        exports = window;
        define = function (name, dependencies, fn) {
            var deps = [];
            for (var i = 0; i < dependencies.length; i++)
                deps.push(window[dependencies[i]]);
            var module = fn.apply(undefined, deps);
            if (!window[name]) window[name] = module;
        };
    }

    define('mylib.interaction', ['jQuery', 'mylib.core', 'jQuery.UI'], function($, mylib) {
        return /*....blah...*/;
    })
})() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:37:26.647

您是要为内部模块还是外部模块执行此操作？

如果您不需要额外的模块，是否可以假设 AMD 构建您的模块，然后在代码中的其他位置填充 define() 函数（如果它不存在）？当然，您必须使用命名模块，但无论如何您基本上都必须这样做......

如果您的模块都从 define() 函数返回它们的导出，那么它会相对简单，并且您的填充定义函数可能看起来像这样：

```
//Whatever additional guards you want could be added, of course...
if (typeof(window.define) === undefined){
  window.define = function(name, deps, callback){
    window.myNamespace[name] = callback();
  };
} 
```

至少这样你就不必将样板添加到每个模块......

如果您有一个包含许多相互依赖的子模块的大型库，您可能只需要一直使用 Require 或不使用，然后使用您的整个库周围的包装代码来处理 AMD 支持, Jquery 和 Knockout JS 的方式。

# makefile - 如何使创建的软件包在 make menuconfig 上可用？

> ID：14736664
> 
> 赞同：4
> 
> 时间：2013-02-06T18:58:41.143
> 
> 标签：makefile, openwrt

我正在尝试为 OpenWrt 创建一个 libxerces 包。按照该站点[http://wiki.openwrt.org/doc/devel/packages](http://wiki.openwrt.org/doc/devel/packages)的说明，我在包目录中创建了一个名为 libxerces-c 的文件夹和一个简单的 Makefile 以在 make menuconfig 上列出该包，但它不是正在发生。

Makefile 定义如下：

```
#
# Copyright (C) 2006-2013 OpenWrt.org
#
# This is free software, licensed under the GNU General Public License v2.
# See /LICENSE for more information.
#

include $(TOPDIR)/rules.mk

# Name and release number of this package
PKG_NAME:=xerces-c
PKG_VERSION:=3.1.1
PKG_RELEASE:=1

PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)
PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz
PKG_SOURCE_URL:=http://apache.mirror.pop-sc.rnp.br/apache//xerces/c/3/sources/
PKG_CAT:=zcat

include $(INCLUDE_DIR)/package.mk

# Specify package information for this program. 
# The variables defined here should be self explanatory.
define Package/libxerces
  SECTION:=libs
  CATEGORY:=Libraries
  TITLE:=Validating XML parser written in a portable subset of C++.
  URL:=http://xerces.apache.org/
endef

define Package/libxerces/description
  Xerces-C++ is a validating XML parser written in a portable subset of
  C++.  Xerces-C++ makes it easy to give your application the ability
  to read and write XML data. A shared library is provided for parsing,
  generating, manipulating, and validating XML documents. Xerces-C++ is
  faithful to the XML 1.0 recommendation and associated standards (DOM
  1.0, DOM 2.0, SAX 1.0, SAX 2.0, Namespaces, XML Schema Part 1 and
  Part 2).  It also provides experimental implementations of XML 1.1
  and DOM Level 3.0\.  The parser provides high performance, modularity,
  and scalability.
endef     

CONFIGURE_ARGS+= --host=mips-openwrt-linux

define Build/Configure
  $(call Build/Configure/Default)    
endef

define Build/Compile
  $(call Build/Compile/Default)
endef

define Package/libxerces/install
endef

$(eval $(call BuildPackage,libxerces)) 
```

我已经尝试执行安装脚本

```
./scripts/feeds install libxerces-c 
```

但是什么也没发生。执行make menuconfig后还是看不到包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T18:48:11.583

可能您还没有在寻找它，但这里是答案。为了使您的包出现在 menuconfig TUI 中，您需要在定义包子句中的 Makefile 中添加以下选项：

```
MENU:1 
```

因此，您的 Makefile 的这一部分将如下所示：

```
define Package/libxerces
SECTION:=libs
  CATEGORY:=Libraries
  TITLE:=Validating XML parser written in a portable subset of C++.
  URL:=http://xerces.apache.org/
endef 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:32:37.670

你需要

1.  将带有包的*提要*`feeds.conf.default`添加到您的或创建一个`feeds.conf`

2.  然后`./scripts/feeds update -a`（更新所有提要...您可以只设置提要的名称而不是使用`-a`）

3.  然后`./scripts/feeds install foobar`

[...]

`libxerces-c`...您显然在调用软件包时调用了 install `libxerces`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T06:43:54.057

你能做一个`make menuconfig`，看看是否显示任何关于你的包'libxerces'的错误消息。我对自定义包的设置类似于：

```
mkdir package/custom
mkdir package/custom/
ln -s /path/to/package/libxerces/ package/custom/ 
```

*如果您的 makefile 正确，则 Libraries->libxerces 应该出现在 menuconfig 中，如果不是，则应该*在 make/make menuconfig 上打印错误消息。你也可以做`make package/libxerces/compile`等。注意：你的包名是 libxerces 而不是 libxerces-c。

# .htaccess - .htaccess 重写问题

> ID：14736666
> 
> 赞同：0
> 
> 时间：2013-02-06T18:58:48.340
> 
> 标签：.htaccess

我需要将动态 url 重定向到另一个 url，动态部分保持不变，例如：

[http://www.mydomain.com/VARHome.aspx?var=32](http://www.mydomain.com/VARHome.aspx?var=32)

需要重定向到：

至：[http ://www.otherdomain.com/VARHome.aspx?var=32](http://www.otherdomain.com/VARHome.aspx?var=32)

“var=”后面的值是动态的，可以是任意数字。

这需要通过 .htaccess 来完成。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:11:49.027

我在想`RewriteRule ^(.*)$ http://www.otherdomain.com/$1 [R=301,L]`或者类似的东西应该做这项工作。

编辑：也许像

```
RewriteRule ^VARHome.aspx?var=(.*)?$ http://www.otherdomain.org/VARHome.aspx?var=$1/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:35:50.280

如果您在 mydomain.com，请输入 .htaccess

重写引擎开启

重定向匹配 301 ^/VARHome.aspx?var=(.*)$ [http://www.otherdomain.com/VARHome.aspx?var=](http://www.otherdomain.com/VARHome.aspx?var=) $1

# java - 优化休眠条件查询变得更加动态

> ID：14736669
> 
> 赞同：0
> 
> 时间：2013-02-06T18:59:17.073
> 
> 标签：java, hibernate

我正在使用带有很多条件的休眠条件查询。查询是否包含应用程序状态和角色的采购申请表。所以为了简单起见，所有表格都以状态 1 或草稿开始。保存表单后，当前用户成为创建者。创建者可以将其他用户分配给表单，例如授权人或联系人。这些是我认为的动态角色。所以我的表格的前三个状态如下，

```
State 1 "Draft" role Creator
State 2 "Authorizer" role Authorizer
State 3 "Contact" role Contact 
```

离开状态 3 并进入状态 4 后，应用程序现在进入管理员角色。在表格最终获得批准和关闭之前，最多可能有 15 个州。直到最后四个状态，Creator、Authorizer 和 Contact 将继续具有访问权限。最后四个州，他们将无法访问。

除非管理员是创建者、授权者或联系人，否则用户将无权访问前三个状态，但将继续访问最后一个状态，包括非管理员无权访问的其余四个状态也。

我当前的查询如下所示，但是作为管理员，我希望不必手动硬编码要添加到查询中的每个 applicationState 并添加所有这些，但排除管理员不在动态中的状态角色创建者、授权者或联系人。

此查询有效，但非常混乱。

```
Disjunction programRoles = Restrictions.disjunction();
            programRoles.add(Restrictions.eq(Role.ROLE_CREATOR, user));
            programRoles.add(Restrictions.eq(Role.ROLE_AUTHORIZER, user));
            programRoles.add(Restrictions.eq(Role.ROLE_CONTACT, user));

            if(roleManagerService.isAdmin()) {
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.ARCHIVED.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.ASSESSOR_REVIEW.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.ASSIGNOR_REVIEW.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.AUDITOR_REVIEW.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.BURIED.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.DEAD.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.FINAL.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.FINAL_MAJOR_APPROVAL.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.FINAL_MINOR_APPROVAL.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.IFAS_LOAD.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.PO_COLLECTION.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.PO_DISTRIBUTION.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.PO_EVALUATION.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.PURGE.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.SECONDARY_MAJOR_REVIEW.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.SECONDARY_MINOR_REVIEW.name()));
                programRoles.add(Restrictions.eq("currentState.prStateCode", ApplicationStateEnum.SECONDARY_OVERHEAD_REVIEW.name()));
            }

        Criteria results = this.session.createCriteria(PurchaseRequest.class)
                .createAlias("currentState", "currentState")
                .add(programRoles);

                if(!roleManagerService.isAdmin()) {
                    results.add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.DEAD.name()))
                            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.ARCHIVED.name()))
                            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.FINAL.name()))
                            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.BURIED.name()));
                } 
```

我想知道是否有人可以指出我的方向来清理它，使其更具活力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:06:09.947

我还没有真正尝试过，但可能只是添加了不允许管理员用户查看的限制。就像是：

```
Disjunction programRoles = Restrictions.disjunction();
programRoles.add(Restrictions.eq(Role.ROLE_CREATOR, user));
programRoles.add(Restrictions.eq(Role.ROLE_AUTHORIZER, user));
programRoles.add(Restrictions.eq(Role.ROLE_CONTACT, user));

// change starts here
if(roleManagerService.isAdmin()) {
    Conjunction notHiddenStateForAdmin = Restrictions.conjunction();
    notHiddenStateForAdmin.add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.FIRST_STATE.name()));
    notHiddenStateForAdmin.add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.SECOND_STATE.name()));
    notHiddenStateForAdmin.add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.THIRD_STATE.name()));
    programRoles.add(notHiddenStateForAdmin);
}

// rest unchanged
Criteria results = this.session.createCriteria(PurchaseRequest.class)
       .createAlias("currentState", "currentState")
       .add(programRoles);

if(!roleManagerService.isAdmin()) {
     results.add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.DEAD.name()))
            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.ARCHIVED.name()))
            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.FINAL.name()))
            .add(Restrictions.ne("currentState.prStateCode", ApplicationStateEnum.BURIED.name()));
} 
```

# entity-framework - 如何将实体映射到多个表并具有导航属性？

> ID：14736672
> 
> 赞同：1
> 
> 时间：2013-02-06T18:59:25.530
> 
> 标签：entity-framework

我首先使用数据库创建了 EMDX，我遵循了[此处](http://msdn.microsoft.com/en-us/data/jj715646)描述的示例，所以现在我可以将一个实体映射到我的数据库中的多个表，这工作正常。

但是我还需要在这个实体的表上提供 FK 提供的导航属性，我该如何实现呢？

我有两个表，一个名为 Carteira，另一个名为 Ativo，在我的 EMDX 中，我希望 Ativo 的属性也可以在 Carteira 上，因为它们具有 0:1 的关系，所以我已经这样做了，它正在工作！:) 但我也希望 Ativo 类中的导航属性位于 Carteira

请参阅描述属性的示例：

```
 class Ativo
    {
        public string Id { get; set; }
        public IList<Valor> Valores { get; set; }
    }

    class Carteira
    {
        public string AtivoID { get; set; }
        public Ativo Ativo {get; set;}
    } 
```

所以我想要像
Carteira.Valores 这样的东西（这应该是从 Ativo 推断出来的）。

请注意，我不想使用部分类手动制作此代码并访问导航，我已经这样做了，我不喜欢这种方法，它看起来像这样：

```
 public partial class Carteira
    {
        public List<Valor> Valores
        {
            get
            {
                if (this.Ativo == null)
                    return null;
                return this.Ativo.Valores;
            }
        }
    } 
```

我想知道如何仅使用 EMDX 来实现这一点，就像简单属性可以做到的那样，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:20:05.703

对于 0:1 到 1 的关系，EF 要求外键与依赖表上的主键相同。所以 Ativo 类必须具有与 AtivoID 同名的主键，并且它也应该是外键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T13:06:43.947

我设法让导航以两种不同的方式工作：

**1 - 在模型 (EMDX) 上创建一个“关联”。** 这些关联就像它们是实际的 FK 一样工作，并且由于我已经在两侧都有映射列，因此可以通过执行以下步骤来完成：

在 Carteira（第二级）创建一个新的关联，它反映了 Ativo（第一级）中存在的 FK 的相同属性。完成后，将在两个类上创建导航属性

**2- 使用 Table-Per-Type 继承**

在这个特定场景中，该类实际上可以从另一个类继承，然后使用所有导航，为此我必须实现 TBT 继承，更改表并将“条件映射”添加到两个表（具体和继承）在模型（EDMX）

# html - 单选按钮中的标签顺序不起作用

> ID：14736674
> 
> 赞同：2
> 
> 时间：2013-02-06T18:59:28.707
> 
> 标签：html, jsf-2, radio-button, tabindex

谁能告诉我如何在 JSF2.0 Moajarra 中指定标签顺序？我的页面中有一个文本框 ( `h:inputText`) 和一个单选按钮 ( `h:selectOneRadio`)（显示`Yes`和`No`）以及一个下拉菜单 ( `h:selectOneMenu`)。一旦我从文本框中按制表符，它就会进入`Yes`单选选项，然后如果我从`Yes`单选选项按制表符，它会再次下拉，我希望它会出现在`No`单选选项中。有人可以建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:04:59.263

当单选按钮属于同一组时，这是预期的行为（阅读：当它们具有相同`name`并且您只能选择其中一个时）。在这种情况下，您应该使用箭头键在同一组中的单选按钮之间切换。

请注意，这一切都与 JSF 无关。这是特定于 HTML 的，当使用与 JSF 生成的 HTML 表示相同的“普通”HTML 页面时，您将遇到完全相同的问题（即使使用同样生成 HTML 的不同服务器端语言，例如 PHP/ ASP/等）。请注意，每个网站都以这种方式工作，因此最终用户应该已经习惯了这种行为。

### 也可以看看：

*   [W3C wiki - 单选按钮](http://www.w3.org/wiki/RadioButton)- 检查“键盘交互”部分

# android - 使用 json 使用 web 服务登录 android

> ID：14736676
> 
> 赞同：0
> 
> 时间：2013-02-06T18:59:31.327
> 
> 标签：android, json, web-services, login

```
 package com.example.friendfinder;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class login extends Activity implements OnClickListener{

    String APIurl = "http://friendfinder.hostzi.com/ws/";
    Button btnlogin;
    TextView login_user;
    TextView login_pass;
    TextView tv;
    JSONObject jObject;
    AlertDialog.Builder builder;
    AlertDialog alert;
    ProgressDialog progressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        start();
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btn_entrar:
            if (checkStatus()) {
                progressDialog.show();
                new Thread(new Runnable() {

                    public void run() {
                        try {
                            jObject = new JSONObject(getJSON("login.php?email="
                                    + login_user.getText().toString()
                                    + "&password="
                                    + login_pass.getText().toString()));
                            tv.setText(jObject.toString());
                            Log.e("JSON", jObject.toString());
                            if (jObject.getString("success").equalsIgnoreCase(
                                    "true")) {
                                progressDialog.dismiss();
                                confirm();
                            } else if (jObject.getString("success")
                                    .equalsIgnoreCase("false")) {
                                login.this.runOnUiThread(new Runnable() {

                                    @Override
                                    public void run() {
                                        progressDialog.dismiss();
                                        builder.setMessage("O inicio de sessão falhou, verifica os teus dados.");
                                        alert = builder.create();
                                        alert.show();
                                    }

                                });
                                login.this.runOnUiThread(null);

                            } else {
                                login.this.runOnUiThread(new Runnable() {

                                    @Override
                                    public void run() {
                                        progressDialog.dismiss();
                                        builder.setMessage("O inicio de sessão falhou, verifica os teus dados.");
                                        alert = builder.create();
                                        alert.show();
                                    }

                                });
                                login.this.runOnUiThread(null);
                            }
                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    }
                }).start();
            }
            else{
                builder.setMessage("Não existe de momento nenhuma conexão à Internet! O ínicio de sessão é impossivel de realizar");
                alert = builder.create();
                alert.show();
            }
        }
    }

    public void start(){
        login_user = (TextView) findViewById(R.id.login_user);
        login_pass = (TextView) findViewById(R.id.login_pass);
        tv = (TextView) findViewById(R.id.tv);
        btnlogin = (Button) findViewById(R.id.btn_entrar);
        btnlogin.setOnClickListener(this);
        progressDialog = new ProgressDialog(this);
        progressDialog.setMessage("A iniciar sessão...");
        builder = new AlertDialog.Builder(login.this);
        builder.setCancelable(false);
        builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        });
    }

    public void confirm(){
        Intent i = new Intent(login.this, maps.class);
        startActivity(i);
        finish();
    }

    public String getJSON(String rurl) {
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(APIurl + rurl);
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            } else {

            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return builder.toString();
    }

    public boolean checkStatus() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }

} 
```

**LogCat** [http://pastebin.com/0xVv2pBR](http://pastebin.com/0xVv2pBR)

当我单击按钮登录应用程序崩溃时，我真的不明白出了什么问题，如果您需要更多信息，请询问我。如果你知道如何解决请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:07:21.960

日志说

> “02-06 18:50:47.785: I/Choreographer(874): 跳过 41 帧！应用程序可能在其主线程上做太多工作”

如果你是 Android 新手，你必须学会[​​在](http://developer.android.com/reference/android/os/AsyncTask.html)你的`Activity`. 您不应该在`main/UI` `thread`. 在这里我找到[了实现 AsyncTask 的教程，](http://www.vogella.com/articles/AndroidPerformance/article.html)请学习它将解决您的问题。

# node.js - 无法在 Ubuntu VPS 服务器上安装 Socket.IO？

> ID：14736679
> 
> 赞同：2
> 
> 时间：2013-02-06T18:59:43.763
> 
> 标签：node.js, ubuntu, terminal, socket.io

我无法将 socket.io 安装在正确的目录中，我猜它可以与我的网站一起使用。我曾经让它工作过，但是我必须在包含我的网站文件的目录中安装 socketIO（所以它很混乱，不能在那里，我删除了这些文件，现在它不再工作了）。

我的网站文件位于：`/var/www/`

当我输入时，Node.js 似乎在全球范围内都能正常工作，`node -v`无论它给我版本。

我已经尝试过`sudo npm install socket.io -g`，但这并没有解决问题。我想在哪里安装socket.io，或者我想如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:06:17.097

可能重复： [尝试全局安装 socket.io 时出错](https://stackoverflow.com/questions/9968442/getting-errors-when-trying-to-install-socket-io-globally)

如果在本地执行，您必须在 package.json 和 node_modules 文件夹所在的项目文件夹中安装 npm 包。对于全局安装，你必须有 NODE_PATH 变量包含你的全局包文件夹，它应该是 /usr/local/lib/node_modules

# javascript - this.id 对应变量

> ID：14736680
> 
> 赞同：0
> 
> 时间：2013-02-06T18:59:47.340
> 
> 标签：javascript, jquery, html

我有一个与数字相对应的变量列表。我使用这些变量将数字写入我正在构建的网络应用程序中的“屏幕”，以获取乐趣。

```
var zero = 0;
var one = 1;
var two = 2;
var three = 3;
var four = 4;
var five = 5;
var six = 6;
var seven = 7;
var eight = 8;
var nine = 9;
var dec = ".";
var neg = "-"; 
```

![示例图像](../Images/46f916da1fa504c351c1cd6dfaf99c79.png)

`onclick`我曾经为每个按钮列出一长串功能：

```
$('#a0').click(function(){
    writeInput(input, zero);
});

$('#a1').click(function(){
    writeInput(input, one);
});
$('#a2').click(function(){
    writeInput(input, two);
});
... 
```

我想将所有这些点击功能转换成这样的：

```
$('.btnA').click(function(){
    var id = this.id;
    writeInput(input, id);
}); 
```

调用此函数：

```
function writeInput(field, str){
var text = $(field).val(function(i, v){
              return v + str;
           }).text(function(i, t){
              return t + str
           }).val();
convert(text, version); 
```

}

上面输入数字的所有按钮都有这个 HTML：

```
...
<a id="seven" class="btnA"><div class="inputBtn mar" id="input7">7</div></a>
<a id="eight" class="btnA"><div class="inputBtn mar" id="input8">8</div></a>
<a id="nine" class="btnA"><div class="inputBtn" id="input9">9</div></a>
... 
```

我的问题是：我可以从中获取 id 名称`<a id="nine" class="btnA">`并使其与`var nine = 9;`

我希望这是有道理的。如果没有，请询​​问我会回答任何问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:01:35.897

使用带有 ID 的对象作为键，你会得到数字：

```
var numbers = {one: 1, two: 2, three: 3, .....};

$('.btnA').click(function(){
    var id = numbers[this.id];
    writeInput(input, id);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:03:29.910

您可以使用数据类型属性并编写以下内容：

```
<a data-number="7" class="btnA"><div class="inputBtn mar" id="input7">7</div></a>

$('.btnA').click(function(){
    var number = $(this).data('number');
    writeInput(input, number);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:06:01.140

这应该这样做：

```
$('.btnA').click(function() {
    var t = $(this).text(),
        n = parseInt(t, 10);
    writeInput(input, isNaN(n) ? t : n);
}); 
```

但是，您也可以从 id 属性（只是`substr`“a”）中提取数字，甚至更好地为它们使用数据属性，而不是读取按钮文本。

# azure - ACS 每 5 分钟验证一次的未知原因

> ID：14736681
> 
> 赞同：0
> 
> 时间：2013-02-06T18:59:47.893
> 
> 标签：azure

我们有一个使用 Azure AD 进行身份验证的 MVC 应用程序。我们注意到 5 分钟后应用程序自动重新验证（到访问控制 URL）的行为。当然，这会导致应用程序使用受到干扰并导致丢失任何 ajax 帖子。澄清一下，令牌的生命周期是 30 分钟，所以它不会进入登录屏幕，只是发回 ACS，然后再发回应用程序。

除了首次实施时的默认设置外，我们没有对应用程序配置进行任何自定义。我已经验证每个 RP 的 Token 生命周期是 30 分钟。

我们有一个 Azure 网站和 Web 角色，这两者都发生了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:10:12.443

这里实际上有几个部分在起作用 - 令牌生命周期是一个，但本地 cookie 生命周期是另一个，我想知道问题是否是本地 cookie 在 5 分钟后过期，因此必须重新检索令牌。我不确定 cookie 生命周期的默认值是什么，但值得研究。

[这篇](http://blogs.msdn.com/b/vbertocci/archive/2010/06/16/warning-sliding-sessions-are-closer-than-they-appear.aspx)文章并不完全是关于您的问题，但它描述了正在发挥作用的机制，因此希望很有用，它还显示了您可以尝试和调整以进行调查的配置

# php - 两个scandir数组数组在foreach PHP中需要2个不同的变量

> ID：14736682
> 
> 赞同：0
> 
> 时间：2013-02-06T18:59:49.593
> 
> 标签：php, arrays, foreach, scandir

我有以下代码：

```
 $path=$_SERVER['DOCUMENT_ROOT'] . "/WOWSlider/data1/images";

    $files= array_diff(scandir($path), array('..',".")); 

    $path2=$_SERVER['DOCUMENT_ROOT'] . "/WOWSlider/data1/images/thumbs";

    $files2= array_diff(scandir($path2), array('..',"."));

foreach($files as $plaatje){

    print("

    <a href='WOWSlider/data1/images/$plaatje' class='highslide' onclick='return hs.expand(this)'>
        <img src='WOWSlider/data1/images/thumbs/$thumbnail' alt='Highslide JS'
            title='Click to enlarge' /></a>

    <div class='highslide-caption'>
        $plaatje
    </div>

    ");

} 
```

现在我需要这样的东西：

```
 $path=$_SERVER['DOCUMENT_ROOT'] . "/WOWSlider/data1/images";

        $files= array_diff(scandir($path), array('..',".")); 

        $path2=$_SERVER['DOCUMENT_ROOT'] . "/WOWSlider/data1/images/thumbs";

        $files2= array_diff(scandir($path2), array('..',"."));

    foreach($files as $plaatje){
foreach($files2 as $thumbnail){

        print("

        <a href='WOWSlider/data1/images/$plaatje' class='highslide' onclick='return hs.expand(this)'>
            <img src='WOWSlider/data1/images/thumbs/$thumbnail' alt='Highslide JS'
                title='Click to enlarge' /></a>

        <div class='highslide-caption'>
            $plaatje
        </div>

        ");

    }
} 
```

但它不起作用。它不会在屏幕上打印任何内容。

有人知道该怎么做吗？

我正在尝试制作一种相册。$plaatjes 是照片，$thumbnails 是照片的缩略图。

因为缩略图有不同的文件名，所以我需要在 foreach 中使用不同的变量，因此在 print() 中也需要使用不同的变量。

我不想让文件名不同，因为如果我需要添加其他照片，我不必在代码中做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:09:14.347

除非文件名彼此相关，例如

```
kittens.jpg   -> kittens_thumb.jpg 
```

在额外的东西 ( `_thumb`) 是不变的情况下，您无法以这样的自动化方式执行任何操作。您必须手动构建一个将图像与其缩略图相关联的列表。一旦你得到了那个数组，那么你可以使用一个简单的 foreach()。

使用“相关”文件名，您可以执行以下操作：

```
foreach($files as $file) {
   $base = pathinfo($file, PATHINFO_BASENAME);
   $ext = pathinfo($file, PATHINFO_EXTENSION);
   echo "real file: $base.$ext";
   echo "thumb nail: {$base}_thumb.$ext";
} 
```

# php - 在 Facebook Graph API 中间歇性地卷曲 SSL 和连接超时

> ID：14736684
> 
> 赞同：3
> 
> 时间：2013-02-06T19:00:01.270
> 
> 标签：php, facebook, facebook-graph-api, curl

我认为我的问题与 Stackoverflow 上的其他问题完全不同。我到处搜索和搜索，但找不到准确的解决方案或原因。希望我能在这里得到一些信息。

我的 Facebook 应用程序使用 Facebook PHP SDK，我的应用程序大部分时间都运行良好。他们确实有时会给出一些错误。但现在突然间，我的 Facebook 应用程序在身份验证后无法获取用户数据，并且加载时间过长，这在以前完全正常。每个应用程序都会发生这种突然的变化，在这两者之间确实对一些用户进行了身份验证，但在少数情况下。要在错误日志中查看，它会抛出如下错误：
**CurlException：28：SSL 连接超时**
**CurlException：28：操作在 60000 毫秒后超时，收到 0 个字节**
**Uncaught CurlException：28：SSL 连接超时**
**CurlException：28：connect() 超时！**
**CurlException：7：无法连接到主机**

但奇怪的是，这种情况随时都会发生，但这种突然的变化会自动停止，所有应用程序在 5 到 8 小时后像以前一样开始正常工作。现在我很困惑是什么导致了这样的问题？是 Facebook 的速率限制吗？我对 api.facebook.com 做了 nslookup、ping、curl -v，它也提供了输出。甚至我的端口和防火墙规则都可以。请帮助我的朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:24:13.010

有时网络连接会失败。有时远程服务会失败。您不能将通过 Internet 通过 HTTP 调用到第三方系统的远程服务调用作为故障证明。你必须编写你的软件来期待这个并优雅地处理它。设置合理的超时时间，寻找失败并准备好在放弃之前重试几次。

# jquery - jQuery remove() 用于通过变量删除对象

> ID：14736692
> 
> 赞同：4
> 
> 时间：2013-02-06T19:00:25.940
> 
> 标签：jquery

我正在尝试做这样的事情：

```
var rowResult = $(template(data)).find(".progressBar").progressbar({ value : 0 }).end();
this.jQueryDialog.find("ul#filesList").append(rowResult); 

$(rowResult).on("click", "button.removeButton", function()  { 
       $("ul#filesList").remove(rowResult);
 }); 
```

为什么 append() 有效但 remove() 会抛出类型错误？：

```
TypeError: expr.replace is not a function
Line: expr = expr.replace(rattributeQuotes, "='$1']" );     jquery.js 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:10:23.150

试试这个

```
$(rowResult).on("click", "button.removeButton", function()  { 
       $(rowResult, "ul#filesList").remove();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T19:04:11.970

我认为 remove 不需要任何论据。

试试 $("ul#filesList").remove();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T19:16:37.600

奇迹般有效：

```
$(rowResult).on("click", "button.removeButton", function()  { 
   $(this).remove();
}); 
```

我曾经避免在 JS 中使用“this”，但是一旦你学会了如何正确使用它，它就会非常有帮助。

# c# - 将sql数据库中的数据提取到文本字段中

> ID：14736693
> 
> 赞同：0
> 
> 时间：2013-02-06T19:00:31.260
> 
> 标签：c#, asp.net-mvc-4

我有一张学生表，我想在存储在学生表中的个人资料页面上显示学生的姓名。

这就是我对控制器的想法：

```
public ActionResult StudentName(StudentModel model)
{
     if(ModelState.IsValid)
     {
        using (var db = new SchoolDataContext())
        {
            var result = from s in db.Students select s.StudentName;
            model.StudentName = result.ToString();
        }
     }
} 
```

在我看来，我有：

```
@Html.LabelFor(s => s.StudentName)
@Html.TextBoxFor(s => s.StudentName) 
```

我的模型：

```
public class StudentModel
{
    [Display(Name = "Student Name")]
    public string StudentName{ get; set; }
} 
```

我需要一个 get 方法来让学生姓名显示在文本框中，同时有一个 post 方法，以便在单击保存后在同一个框中更改时可以保存它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:46:52.030

您的控制器可能看起来像这样：

```
public ActionResult StudentName(int studentId)//you can't pass a model object to a get request
{
        var model = new StudentModel();
        using (var db = new SchoolDataContext())
        {
            //fetch your record based on id param here.  This is just a sample...
            var result = from s in db.Students
                         where s.id equals studentId 
                         select s.StudentName.FirstOrDefault();
            model.StudentName = result.ToString();
        }
     return View(model);
} 
```

在上面的 get 中，您可以传入一个 id，然后从数据库中获取记录。使用检索到的数据填充模型属性并将该模型传递到您的视图中。

然后在下面的 post 操作中，您接受模型作为参数，检查模型状态并处理数据。我在这里显示了一个重定向，但是您可以在帖子执行后返回您想要的任何视图。

```
[HttpPost]
public ActionResult StudentName(StudentModel model)
{
     if(ModelState.IsValid)
     {
        using (var db = new SchoolDataContext())
        {
            //update your db record
        }
        return RedirectToAction("Index");
     }
     return View(model);

} 
```

# c# - 如何匹配正则表达式模式并从中提取数据

> ID：14736697
> 
> 赞同：3
> 
> 时间：2013-02-06T19:00:52.537
> 
> 标签：c#, regex

我可以在格式的文本区域中有 0 个或多个子字符串`{key-value}Some text{/key}`，

例如`This is my {link-123}test{/link} text area`

我想遍历与此模式匹配的任何项目，根据键和值执行和操作，然后用新字符串替换此子字符串（由基于键的操作检索的锚链接）。

我将如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:53:22.597

如果这些标签没有嵌套，那么您只需要遍历文件一次；如果嵌套是可能的，那么您需要对每一层嵌套进行一次迭代。

此答案假定大括号仅作为标记分隔符出现（而​​不是，例如，内部注释）：

```
result = Regex.Replace(subject, 
    @"\{                # opening brace
    (?<key>\w+)         # Match the key (alnum), capture into the group 'key'
    -                   # dash
    (?<value>\w+)       # Match the value (alnum), capture it as above
    \}                  # closing brace
    (?<content>         # Match and capture into the group 'content':
     (?:                # Match...
      (?!\{/?\k<key>)   # (unless there's an opening or closing tag
      .                 # of the same name right here) any character
     )*                 # any number of times
    )                   # End of capturing group
    \{/\k<key>\}        # Match the closing tag.", 
    new MatchEvaluator(ComputeReplacement), RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace);

public String ComputeReplacement(Match m) {
    // You can vary the replacement text for each match on-the-fly
    // m.Groups["key"].Value will contain the key
    // m.Groups["value"].Value will contain the value of the match
    // m.Groups["value"].Value will contain the content between the tags
    return ""; // change this to return the string you generated here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:52:27.510

像这样的东西？

```
Regex.Replace(text,

  "[{](?<key>[^-]+)-(?<value>[^}])[}](?<content>.*?)[{][/]\k<key>[}]",
  match => {

    var key = match.Groups["key"].Value;
    var value= match.Groups["value"].Value;
    var content = match.Groups["content"].Value;

  return string.format("The content of {0}-{1} is {2}", key, value, content);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:03:37.063

使用 .net 正则表达式库。下面是一个使用 Matches 方法的示例：

[http://www.dotnetperls.com/regex-matches](http://www.dotnetperls.com/regex-matches)

对于替换文本，请考虑使用 Antlr 等模板引擎

[http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)

以下是 Matches 博客中的示例

使用系统；使用 System.Text.RegularExpressions；

```
class Program
{
static void Main()
{
// Input string.
const string value = @"said shed see spear spread super";

// Get a collection of matches.
MatchCollection matches = Regex.Matches(value, @"s\w+d");

// Use foreach loop.
foreach (Match match in matches)
{
    foreach (Capture capture in match.Captures)
    {
    Console.WriteLine("Index={0}, Value={1}", capture.Index, capture.Value);
    }
}
}
} 
```

有关 C# 正则表达式语法的更多信息，您可以使用此备忘单：

[http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

# asp.net-mvc - 持久性 cookie 的作用不是很持久

> ID：14736699
> 
> 赞同：0
> 
> 时间：2013-02-06T19:01:11.333
> 
> 标签：asp.net-mvc, cookies, asp.net-membership

我已经实现了一个自定义会员提供程序，现在我希望为我的用户提供让网站记住他们的选项，这样他们就不必在每次访问时都登录。

我已将我的 cookie 设置为持久性，但它的作用并不持久。当我在登录网站后关闭浏览器并再次打开它时，需要我再次登录。

```
FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
                1,
                model.UserName,
                DateTime.Now,
                (model.RememberMe == true ? DateTime.Now.AddDays(7) : DateTime.Now.AddMinutes(60)),
                model.RememberMe,
                userData);
            string encTicket = FormsAuthentication.Encrypt(authTicket);
            HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
            Response.Cookies.Add(cookie);

            return RedirectToAction("Index", "Home"); 
```

在这种情况下，model.RememberMe 是一个值为 true 的布尔值，由 Visual Studio 调试器证明。

我在这里做一些公然错误的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T12:07:55.867

最后，正如 Slicksim 在 2013 年 2 月 7 日的评论中指出的那样，我还必须指定 cookie 的过期时间。

# visual-studio-2010 - 仅在测试代理上运行时编码的 ui 测试数据格式错误

> ID：14736700
> 
> 赞同：1
> 
> 时间：2013-02-06T19:01:12.950
> 
> 标签：visual-studio-2010, coded-ui-tests

我正在使用 Visual Studio 2010 并且有一个使用 csv 文件的数据驱动编码 ui 测试。csv 文件和 schema.ini 文件都已签入。当我在本地运行测试时，测试运行没有问题。当我通过测试管理器运行测试并将其发送到测试代理时，测试失败，因为它尝试将数据输入字段为 222197120000 而不是 1971-02-22。

csv 文件中的数据是 1971-02-22。

编码的 ui 测试具有以下内容：

[DeploymentItem("Applicant.csv")]

[DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "|DataDirectory|\Applicant.csv", "Applicant#csv", DataAccessMethod.Sequential)]

# ios - 宽度：100% 在 ipad 纵向模式下不会一直延伸

> ID：14736701
> 
> 赞同：0
> 
> 时间：2013-02-06T19:01:17.647
> 
> 标签：ios, css, ipad, width, portrait

我有一个宽度超过 1000 像素的网页。有一个跨越整个宽度的背景 DIV 元素

```
.bg_horizon {
  position:absolute;
  width:100%;
  height:800px;
  background-color:#f7f7f7;
  border-bottom:1px solid #8d9092;
  z-index:-9999;
  margin:0;
  padding:0;
} 
```

这个框在横向和桌面上渲染得很好，但在 ipad 纵向模式下，网页比视口宽……这很好，因为用户只能平移，我们不允许缩放……但是背景div 仅将 css width:100% 渲染到视口的可见部分。当我平移时，我可以看到网页的其余部分，但 div 没有延伸到这些区域。如何让 width:100% 跨越整个网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:11:13.317

iPad 屏幕宽度为 1024px，所以尝试添加：

```
html {
    min-width: 1024px;
    } 
```

# jsf - 如何创建可拖动的标记？

> ID：14736705
> 
> 赞同：0
> 
> 时间：2013-02-06T19:01:30.563
> 
> 标签：jsf, primefaces, primefaces-gmap

它下面的代码能够创建一个标记。

但我想创建一个可拖动的标记，问题是在创建标记后没有将点击事件发送到服务器。

创建标记时，*可拖动*标志设置为 true。

有任何想法吗？

```
<p:gmap id="gmap" center="36.890257,30.707417" zoom="13" type="HYBRID"

style="width:600px;height:400px"
model="#{mapBean.emptyModel}"
onPointClick="handlePointClick(event);"
widgetVar="map">
<p:ajax event="markerDrag" listener="#{mapBean.onMarkerDrag}" update="messages" />
</p:gmap>

<p:dialog widgetVar="dlg" effect="FADE" effectDuration="0.5" close="false" fixedCenter="true">
<h:form prependId="false">
<h:panelGrid columns="1">
<h:outputLabel value="Are you sure?"/>

<f:facet name="footer">
<p:commandButton value="Yes"
actionListener="#{mapBean.addMarker}"
update=":messages"
oncomplete="markerAddComplete()"/>
<p:commandButton value="Cancel" onclick="return cancel()"/>
</f:facet>
</h:panelGrid>

<h:inputHidden id="lat" value="#{mapBean.lat}"/>
<h:inputHidden id="lng" value="#{mapBean.lng}"/>
</h:form>
</p:dialog>

<script type="text/javascript">
var currentMarker = null;

function handlePointClick(event) {

console.log("click event");

console.log(event.marker);

if (currentMarker == null) {
document.getElementById('lat').value = event.latLng.lat();
document.getElementById('lng').value = event.latLng.lng();

currentMarker = new google.maps.Marker({
position: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
});

map.addOverlay(currentMarker);

dlg.show();
}
}

function markerAddComplete() {
//currentMarker = null; Only one can be added.
dlg.hide();
}

function cancel() {
dlg.hide();
currentMarker.setMap(null);
currentMarker = null;

return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:10:16.823

*p:gmap*的*onPointClick*属性引起了问题。在这种情况下，这是对函数*handlePointClickEvent()*的 Javascript 回调。

 **所以我用一个*EL*表达式设置了这个属性，所以在创建标记之后，这个表达式将评估为*null*，组件*p:gmap*在 AJAX 调用中更新，并且可拖动事件现在可以工作；）**

# python - 从已编译的包中获得 Python 输出的最简单方法是什么？

> ID：14736710
> 
> 赞同：0
> 
> 时间：2013-02-06T19:01:38.783
> 
> 标签：python, python-2.7

先前信息：我在 Mac 上。

问：如果我用 py2app 编译它以重新分发，如何从程序执行中获得类似终端的文本输出？

我的案例是一个复制大量大文件并需要一段时间来处理的程序，所以我希望每次复制每个文件时至少有一个输出通知。

如果我在命令行上运行它，这很容易，我可以打印一个新行。

但是当我做一个自给自足的包时，它只是在底部的底座上打开，没有窗口，完成后关闭。

一个简单的文本窗口就可以了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:22:50.470

如果你想创建一个简单的文本窗口，你需要选择一个 GUI 框架来做这件事。对于这么简单的事情，没有理由不使用`Tkinter`（任何 Python 附带的）或`PyObjC`（Apple 的 Python 2.7 预装的），除非您碰巧更熟悉`wx`, `gobject`,`Qt`等。

无论如何，无论你怎么做，你都需要编写一个函数来接收消息并将其附加到文本窗口（如果需要，可能会懒惰地创建它），然后在你通常会调用的任何地方调用该函数`print`。你可能还想编写和安装一个`logging`处理程序来做同样的事情，这样你就可以了`log.info`。（您*可以*改为创建一个类似文件的对象来执行此操作并重定向`stdout`和/或`stderr`，但除非您无法控制`print`ing 代码，否则这将是更多的工作。）

这里唯一真正的问题是 GUI 需要一个事件循环，而您可能只是将代码编写为顺序脚本。

解决此问题的一种方法是将整个当前脚本变成后台线程。如果您使用的是允许您从后台线程访问小部件的 GUI 库，那么一切都很容易；你`printfunc`就是这样做的`textwidget.append(msg)`。如果没有，它可能至少有一个`call_on_main_thread`类型函数，所以你`printfunc`的`call_on_main_thread(textwidget.append, msg)`. 如果最坏的情况变得最糟（我相信 Tkinter 确实如此），您必须创建一个显式队列来推送消息，并在事件循环中编写一个队列处理程序。[这个食谱](http://code.activestate.com/recipes/82965-threads-tkinter-and-asynchronous-io/)应该给你一个想法。用您的代码替换正文`workerThread`，并以 . 结尾`self.endApplication()`。（那里可能有更好的例子；这正是我在快速搜索中首先找到的。）

另一种方法是让您的代码与事件循环协同操作。一些库，比如`wx`，`SafeYield`如果你在每个处理块之后调用它，就可以让事情正常工作。其他人没有，但有办法从您的代码中显式驱动事件循环。其他人都没有——但每个事件循环框架都必须有一种方法来安排新事件，因此您可以将代码分解为一系列函数，每个函数都快速完成，然后执行类似`root.after_idle(nextfunc)`.

* * *

但是……您确定需要这样做吗？

首先，任何应用程序，包括由 . 创建的应用程序，`py2app`如果您使用`Foo.app/Contents/MacOS/Foo`. 如果您愿意，您甚至可以进行设置，使其以`open Foo.app`这种方式工作。显然，这对于只在 Finder 中双击应用程序的人没有帮助（因为那时*没有*终端），但有时只需在人们需要时输出可用并知道如何遵循说明就足够了。

您还可以更进一步：创建一个`Foo.command`类似 的文件，`$(dirname $0)/Foo.app/Contents/MacOS/Foo`当您双击该文件时，它会启动 Terminal.app 并运行您的脚本。

或者您可以变得更简单：只需使用`logging`syslog 输出，如果您想查看每个文件何时完成，只需查看日志消息在`Console.app`.

最后，你甚至`py2app`首先需要吗？如果您没有任何外部依赖项，只需将您的脚本重命名为`Foo.command`，然后双击它将在 Terminal.app 中运行它。如果您*确实*有外部依赖项，您可能仍然可以将它们捆绑在一起作为一个文件夹，其中包含一个`.command`而不是一个`.app`.

显然，这些想法都不是构建界面的专业或新手友好方式，因此如果这很重要，您将不得不创建一个 GUI。

# node.js - 如何使用 gruntJS 运行测试

> ID：14736721
> 
> 赞同：1
> 
> 时间：2013-02-06T19:01:59.497
> 
> 标签：node.js, unit-testing, gruntjs

那么，如何在 gruntjs 中运行测试套件？我认为它应该非常简单直接，但是对我来说不是:)

由于 gruntjs 应该能够运行测试，我认为我可以只运行“grunt test”，但由于某种原因需要服务器运行。我尝试使用“grunt server watch”在另一个进程中启动它，但是“grunt test”再次失败。

咕噜声应该如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T02:28:45.150

'grunt test' 是一项在需要时也启动服务器的任务。它启动一个测试运行器，例如 karma 和 karma 在浏览器环境中运行测试。

诀窍是运行业力并提供配置项`karma.conf.js`

[gruntjs 网站上的示例 gruntfile](http://gruntjs.com/sample-gruntfile)展示了如何使 qUnit 与 grunt 一起工作。

# javascript - Endless Load on Scroll 或如何多次不触发事件

> ID：14736731
> 
> 赞同：0
> 
> 时间：2013-02-06T19:02:47.233
> 
> 标签：javascript, jquery

我实现了一个加载功能，只要到达页面末尾就会触发该功能。它基本上可以工作，但是每当我向下滚动时，该事件都会被触发多次。有没有更好的方法来实现这个想法或*不*多次触发这个事件的方法？

这是我所做的：

```
var loading = false;
$(window).scroll(function(){
    if((($(window).scrollTop()+$(window).height())+250)>=$(document).height()){
        if(loading == false){
            loading = true;
            $.get("test", function(data){
             $("div.article:last").after(data);
});
            loading = false;

        }
    }
});
   $(document).ready(function() {
    $('#loaded_max').val(500);
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:08:34.590

你来做这件事：

```
$.get("test", function(data){
    $("div.article:last").after(data);
});
loading = false; 
```

`loading=false;`位于您的回调`$.get`函数之外。这`$.get`是一个异步函数，这意味着。`loading=false;`直接在您之后执行，`$.get`而不是在您的 Ajax 调用准备好时执行。

如果你把你的回调放在`loading=false;`里面。`$.get`您不会同时有多个请求。

一次只获得 1 个请求的解决方案：

```
$.get("test", function(data){
    $("div.article:last").after(data);
    loading = false;
}); 
```

此外，我会在人们到达底部之前开始加载页面的下一部分，例如 400px。所以他们可以继续滚动，而不必等待您的请求准备好。我这样更流畅。

# ios - iOS：有人可以为我解释一下 CFDictionaryRef 吗？

> ID：14736732
> 
> 赞同：0
> 
> 时间：2013-02-06T19:02:48.213
> 
> 标签：ios, addressbook

我正在对 AddressBook 进行一些测试，虽然我可以获得我正在寻找的数据，但我很好奇它是如何传递的。特别是 CFDictionaryRef。当我将它转换为 NSDictionary 并登录到控制台时，我只得到一个字符串值，而不是 key=value 对。如果我尝试记录 allKeys 我的测试应用程序会中断。

这是我正在使用的代码片段：

```
if ([contactName isEqualToString:ownerName]) { 

                    //get reference to  their email addresses
                    ABMultiValueRef contactEmails = ABRecordCopyValue(thisPerson, kABPersonEmailProperty);

                    //loop
                    for (NSUInteger e = 0; e < ABMultiValueGetCount(contactEmails); e++){

                        CFDictionaryRef thisPersonCFEmailDict = ABMultiValueCopyValueAtIndex(contactEmails, e);
                        NSDictionary* thisPersonEmailDict = (__bridge NSDictionary*)thisPersonCFEmailDict;

                        NSLog(@"%@", [thisPersonEmailDict allKeys]);

                    }

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:10:23.290

你假设`ABMultiValueCopyValueAtIndex()`返回一个`CFDictionaryRef`. 它没有。它返回适合该多值的任何值，如`CFTypeRef`返回值所示。

您可以使用它`ABMultiValueGetPropertyType()`来找出特定多值记录具有的值类型。如果返回，`kABDictionaryPropertyType`那么您知道它是一本字典，但在您的情况下，它可能正在返回`kABStringPropertyType`. 它也可以返回`kABInvalidPropertyType`，这可能表明多值包含不同的类型。如果是这样，您将需要使用 using`CFGetTypeID()`来识别从`ABMultiValueCopyValueAtIndex()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:13:55.697

CFDictionaryRef 是 NSDictionary 的核心基金会对应物。因为 NSDictionary 和 CFDictionary 是“免费桥接的”，所以您可以在代码中用 CFDictionary 对象替换 NSDictionary 对象（使用适当的转换）。虽然它们是对应的类型，但 CFDictionary 和 NSDictionary 没有相同的接口或实现，有时你可以用**CFDictionary**做一些你不能用**NSDictionary**轻易做到的事情。免费桥接，意味着您可以使用与 Core Foundation 函数调用的参数或 Objective-C 消息的接收者相同的数据类型。

# c++ - 复制构造函数双向链表中的头和尾节点没有得到正确的地址

> ID：14736733
> 
> 赞同：1
> 
> 时间：2013-02-06T19:02:47.510
> 
> 标签：c++, function, pointers, reference

复制构造函数：

```
 // Copy constructor.  Copies another list.

CRevList(const CRevList &b)
 {
    cout << "Copy" << endl;

    const Node *Start = b.Begin();

    const Node *End = b.End();

    cout << "Start; " << Start << endl;

    cout << "End; " << End << endl;

    cout << "b.Begin() : " << b.Begin() << endl;
    cout << "b.End()   : " << b.End() << endl;
    T temp_data;

    for(;;){
            cout << "Start->data() loop: " << Start->Data() << endl;

            temp_data = Start->Data();

            PushBack(temp_data);

            if(Start == End)
                    break;

            Start = Start->m_next;

    } 
```

}

调用 End 以获取指向尾节点的指针（Begin() 相同）：

```
const Node *End() const {}

   Node *End() {
      cout << "m_tail " << m_tail << endl;
      return m_tail;
   } 
```

对不起代码量。我只是不知道我哪里错了

编辑：好的，这是一个最小的完整示例

司机

```
using namespace std;

#include <iostream>
#include "RevList.h"

int main(){

    CRevList<int> List;
    List.PushBack(7);
    List.PushBack(300);
    cout << "End Ref: " << List.End() << endl;
    cout << "begin ref: " << List.Begin() << endl;
    cout << List.End() << endl;

    CRevList<int> New_list(List);

    cout << "End Ref: " << New_list.End() << endl;
    cout << "begin ref: " << New_list.Begin() << endl;

} 
```

双链表的实现：

```
template<class T> class CRevList
{

public:
//constructor stuff doesn't matter... ;

class Node
{
public:
 friend class CRevList;

 Node() {m_next = 0;  m_prev = 0;}
 Node(const T &t) {m_payload = t;  m_next = 0;  m_prev = 0;}

 T Data() {return m_payload;}
 const T Data() const {return m_payload;}

private:
 Node    *m_next;
 Node    *m_prev;
 T       m_payload;
};

  //Push Back ////////////////////////////////////////////////
  void PushBack(const T &t) {
      Node * Temp = new Node(t);

      if(IsEmpty()){
            cout << "is Empty" << endl;
              m_head = Temp;

              m_tail = Temp;

      }
      else{
            Node * Curr = m_tail;

            Curr->m_next = Temp;

            Temp->m_prev = Curr;

            m_tail = Temp;

      }

      size += 1;

 }

//Get a pointer to the first node in the list
const Node *Begin() const {}
Node *Begin() {
       cout << "m_head " << m_head << endl;
       return m_head;
} 

//get a pointer to the last node in the list
const Node *End() const {}

Node *End() {
       cout << "m_tail " << m_tail << endl;
 return m_tail;
}

private:

Node    *m_head, *m_tail;             // Head node
unsigned size;

};

}; 
```

并最终从驱动程序输出

```
m_tail 0x2068030
End Ref: 0x2068030
m_head 0x2068010
begin ref: 0x2068010
m_tail 0x2068030
0x2068030
Copy
Start; 0x7fff7745d240
End; 0x7fff7745d240
b.Begin() : 0x7fff7745d240
b.End()   : 0x7fff7745d240
Start->data() loop: 2
Segmentation fault  //don't care about this right now 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:37:01.900

你忘了初始化`size`。

# php - 打印从 select..where 在 php/mysql 中返回的值

> ID：14736734
> 
> 赞同：-2
> 
> 时间：2013-02-06T19:03:15.010
> 
> 标签：php, mysql

我想从表“学生”中选择行，其中用户名=来自 php 文件的名称。我如何打印返回的行？我使用了这个，但没有打印出值（没有结果出现）

```
$result=mysql_query("select name from students where name=$name);

if($result){

while($row=mysql_fetch_array($result))
{
echo " $row['name'];
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:06:36.043

如果`$name`不是数字，MySQL 会认为它是一个列，并且该列可能不存在，因此您将收到错误消息。在它周围加上引号，例如`'$name'`. 您还应该先调用`mysql_real_escape_string`on `$name`，并且应该检查`mysql_query`is not的结果`false`（如果是，请检查`mysql_error`）。

您还缺少一些引号。

* * *

更好的是，停止使用[`ext/mysql`](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)并改用 PDO。然后你可以像这样编写查询

```
select name from students where name = ? 
```

并且转义和引用添加会自动为您完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:05:59.540

如果您使用字符串，请使用引号，否则它将被视为列名

```
$result=mysql_query("select name from students where name='$name'"); 
```

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:04:43.277

尝试：

```
$result=mysql_query("select name from students where name='$name'"); 
```

并且`echo " $row['name'];`应该是`echo $row['name'];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:04:56.543

```
$result = mysql_query("select name from students where name='$name'");

if($result){

  while($row = mysql_fetch_array($result))
  {
    echo $row['name'];
  }
} 
```

# android - Android，活动完成（）上的回栈上的前一个活动会发生什么？

> ID：14736738
> 
> 赞同：1
> 
> 时间：2013-02-06T19:03:35.143
> 
> 标签：android, android-layout, android-intent, xamarin.android

我有一个活动开始另一个然后如果用户从第二个取消我调用完成（）并返回到第一个。

问题：当我返回第一个活动时，是否有一个方法会被调用？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:07:35.497

是的， onResume() 被调用。检查：[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

查看生命周期：

![活动生命周期](../Images/18f03fa30c8fe52987a64a5b708050b3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:05:00.853

是的，有 onStop() 和 onStart()，有关更多详细信息，请参阅：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

![图像](../Images/616d656872c65b63c4ad03b7a6b6f7fa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:14:18.767

原始应用程序将接收活动生命周期流程图上介于应用程序当前状态和“活动关闭”状态之间的任何回调。onDestroy() 是唯一可以保证发生的。

如果完成的应用程序位于堆栈顶部，那么在堆栈顶部替换它的 Activity 将至少收到 onResume()。如果它是完全不可见的（即它已经收到onStop()，那么它也会在onResume() 之前收到onRestart() 和onStart()。

如果完成的应用程序不在堆栈顶部，则不会通知其他应用程序。

# c++ - cocos2dx 错误：opengl 版本太旧

> ID：14736739
> 
> 赞同：3
> 
> 时间：2013-02-06T19:03:36.567
> 
> 标签：c++, cocos2d-x

我已经将我的 windows 从 7 升级到 8 并且我已经开始编译 cocos2dx 但是在打开 cmd 时出现错误：

```
Your OpenGl Version is 1.1.0, but Cocos2d-x requires OpenGl 1.5 or higher on Windows. Please upgrade the driver of your video card 
```

但是升级前 cocos2dx 运行良好！你能告诉我有什么问题吗？我该怎么办？我正在使用视觉工作室 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T10:40:42.033

您应该更新您的显卡（视频驱动程序）驱动程序或尝试运行旧版本 cocos 2dx 的第二种方式。我也遇到了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:56:02.673

你可以在 cocos2d-x 论坛上看到这个问题。观看此[链接](http://www.cocos2d-x.org/boards/6/topics/18315)。你的驱动没有更新或者你没有安装opengl。你也可以使用旧版本的 cocos2d-x。看到这个[链接](http://www.cocos2d-x.org/boards/6/topics/18984)。

# c++ - std::vector 大小在尝试填充后保持为零

> ID：14736741
> 
> 赞同：2
> 
> 时间：2013-02-06T19:03:43.780
> 
> 标签：c++, vector

我正在尝试有效地使用矢量。所以我先保留内存，然后使用向量。但是在我尝试使用 [] 运算符填充向量后，向量的大小保持为零。为什么会这样？

```
vector Vec; 
Vec.reserve(10); 
Vec[0] = 2.0; 
Vec[1] = 3.0;
... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T19:06:10.413

`reserve()`仅在后备存储中保留空间，因此后续推送的元素不必重新分配（直到您超过保留空间）。但它不会改变向量的实际大小，因此您的`Vec[0] =`访问实际上是在向量的末尾运行的。

你可以使用

```
vector Vec;
Vec.resize(10);
Vec[0] = 2.0;
Vec[1] = 3.0; 
```

如果您愿意，大小将为 10。或者如果您希望此时大小仅为 2，但仍保留空间以避免多次重新分配，您可以使用

```
vector Vec;
Vec.reserve(10);
Vec.push_back(2.0);
Vec.push_back(3.0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:06:00.960

`reserve()`不调整向量的大小。你需要使用`resize()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T19:06:19.003

当您使用时，`reserve`您实际上并没有在向量中创建元素。您的作业正在访问不存在的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T19:12:11.257

std::vector 不会自动扩展。函数reserve(size)不会增加大小，它只能确保你有足够的内存用于以后的大小扩展。

所以代替非法

```
Vec[0] = 2.0; 
```

尝试

```
Vec.push_back( 2.0 ); 
```

这将使向量大小增加 1。

顺便说一句，声明应该是

```
vector<double> Vec; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T19:21:30.897

`reserve`对向量的大小没有影响。在我使用的大多数实现中，以下访问会导致程序终止。如果没有，您可能编译时使用了错误的选项。

您应该直接构造大小为 10 的向量：

```
std::vector<double> vec( 10 ); 
```

如果您插入的值是常量，您可以执行以下操作：

```
static double initVec[] = { 2.0, 3.0 ... };
std::vector<double> vec( begin( initVec ), end( initVec ) ); 
```

，或者如果您使用的是 C++11：

```
std::vector<double> vec{ 2.0, 3.0 ... }; 
```

这两种方法都具有直接初始化向量中数据的优点。

# git - 取消忽略添加到 .gitignore 的目录

> ID：14736743
> 
> 赞同：2
> 
> 时间：2013-02-06T19:03:54.770
> 
> 标签：git, gitignore

我所做的是有两个分支：

*   当地的
*   生产

在我的`local`分支中，我拥有所有资产文件夹`css`、`js`和`img`. 在我的`production`分支中，我将它们添加到我的分支中，`.gitignore`因为我想在其他地方托管这些资产。

```
css/
img/
js/ 
```

所以这些文件夹在`production`分支中不再可见。无论如何要恢复分支`img`中的文件夹吗？`production`我尝试`img/`从我的`.gitignore`和提交中删除，但它不会在我的未跟踪文件中列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:07:47.680

`img/`从您的. 中删除后`.gitignore`，您可以从*本地*`git checkout local -- img`分支签出文件（假设您在*生产*分支上）。它们应该自动暂存（否则只需自己暂存），并将它们提交到您的*生产*分支。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:07:39.980

看看这个： [不忽略子目录中的文件？](https://stackoverflow.com/questions/3170137/not-ignore-a-file-in-a-sub-directory)

它也应该适用于文件夹***

# drupal - 保存编辑时 Drupal 中的内部错误消息

> ID：14736744
> 
> 赞同：0
> 
> 时间：2013-02-06T19:03:54.403
> 
> 标签：drupal, internal-server-error

我的网站是用`Drupal 7.19`.

当我对页面进行编辑时，我收到以下消息：

**服务器遇到内部错误或配置错误，无法完成您的请求。**

请联系服务器管理员 webmaster@xxxxxx.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。

服务器错误日志中可能会提供有关此错误的更多信息。”

我检查了我的日志消息，我注意到我有很多很多“找不到页面”的消息`"favicon.ico"`。我找到了这个信息，但它没有修复：[http ://web3us.com/drupal6/how-create-web-site-handbook/how-setup-drupal-5/how-fix-faviconico-page-not-found-德鲁巴](http://web3us.com/drupal6/how-create-web-site-handbook/how-setup-drupal-5/how-fix-faviconico-page-not-found-drupal)

反映了对页面的编辑，但为什么会出现此消息？没有关联的 404 或 500。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:31:38.647

丢失的图标与内部服务器错误无关。最可能的问题是您的 PHP 内存限制太低。Drupal 7 建议的内存限制为 128MB。您可以通过添加以下行来更改默认 (sites/default/settings.php) 文件夹中的 settings.php 文件中的限制：

ini_set('memory_limit','128M');

# java - 在测试用例中创建一个构造函数，以便它只会被调用一次

> ID：14736746
> 
> 赞同：3
> 
> 时间：2013-02-06T19:04:08.990
> 
> 标签：java, android, exception, junit, constructor

试图创建一个在我的单元测试中只调用一次的构造函数

```
public class ArtistTest extends InstrumentationTestCase{
    private static final String TAG_NAME = "TESTING_SUITE";
    private TestingMusicDAO musicDAO;
    private List<Song> songs;
    private Instrumentation instr;
    MusicService musicService;

    public ArtistTest() throws Exception {
        super();       
        instr = this.getInstrumentation();
        Log.d(TAG_NAME, "Setting up testing songs");
        musicDAO = new TestingMusicDAO(instr.getContext());
        musicService = new MusicServiceImpl(musicDAO);
        musicDAO.getAllSongsFromFile();
        songs = musicDAO.getAllSongs();
        for(Song song : songs)
            Log.d( TAG_NAME, song.toString() );
    } 
```

但是当我将文件作为 Android Junit 测试运行时，我在构造函数错误中遇到异常。这里也是堆栈跟踪

```
 junit.framework.AssertionFailedError: Exception in constructor: test0      (java.lang.NullPointerException
 at com.intellimec.ilane.ice.mediaservices.ArtistTest.<init>(ArtistTest.java:17)
 at java.lang.reflect.Constructor.constructNative(Native Method)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
 at junit.runner.BaseTestRunner.getTest(BaseTestRunner.java:118)
 at android.test.AndroidTestRunner.getTest(AndroidTestRunner.java:148)
 at android.test.AndroidTestRunner.setTestClassName(AndroidTestRunner.java:56)
 at   android.test.suitebuilder.TestSuiteBuilder.addTestClassByName(TestSuiteBuilder.java:80)
 at android.test.InstrumentationTestRunner.parseTestClass(InstrumentationTestRunner.java:444)
 at android.test.InstrumentationTestRunner.parseTestClasses(InstrumentationTestRunner.java:425)
 at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:370) 
 at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4382)
 at android.app.ActivityThread.access$1300(ActivityThread.java:141)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:137)
 at android.app.ActivityThread.main(ActivityThread.java:5039)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 at dalvik.system.NativeStart.main(Native Method)
 )
 at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
 at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
 at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
 at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:06:59.417

将在测试运行期间只需要执行一次的代码放入静态初始化程序中。它应该只运行一次，当类被加载时（不要重用这个类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:17:49.430

您还可以编写自己的 setUp() 方法来初始化您的“音乐”对象一次 有关详细信息，请参阅此页面 [http://www.methodsandtools.com/tools/tools.php?junit](http://www.methodsandtools.com/tools/tools.php?junit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:26:12.910

什么在`ArtistTest.java:17`？

如果`getInstrumentation`只是返回，`private field instr`那么这里的调用返回null，导致后面的NPE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T20:10:02.520

不要为您的测试用例使用具体的构造函数。

最好遵循junit范式。

使用这些注释来初始化您需要为每个类初始化一次的任何值。即@BeforeClass 和@AfterClass 确保你定义了你想要在类级别初始化的任何东西

```
@BeforeClass
public static void setUpBeforeClass() throws Exception {
 //per class attributes initialized here
   instr = this.getInstrumentation();
    Log.d(TAG_NAME, "Setting up testing songs");
    musicDAO = new TestingMusicDAO(instr.getContext());
    musicService = new MusicServiceImpl(musicDAO);
    musicDAO.getAllSongsFromFile();
    songs = musicDAO.getAllSongs();
    for(Song song : songs)
        Log.d( TAG_NAME, song.toString() );
}

@AfterClass
public static void tearDownAfterClass() throws Exception {
 //per class attributes destroyed here
} 
```

对于每个方法所需的任何初始化，请使用以下注释告诉 junit 为每个测试方法初始化这些值

```
@Before
public void setUp() throws Exception {
 //per method attributes initialized here

}

@After
public void tearDown() throws Exception {
 //per method attributes destroyed here
} 
```

使用注解@Test 指定一个方法为测试方法

IE

```
@Test
public void testMethodx() {
} 
```

# c - 锁定排序或调度问题

> ID：14736751
> 
> 赞同：0
> 
> 时间：2013-02-06T19:04:40.540
> 
> 标签：c, locking, pthreads, scheduling, deadlock

我有一个使用 pthreads 的 C 应用程序。

两个线程（比如 A 和 B）之间存在锁争用，其中 A 先获得锁，而 B 正在等待锁，一旦 A 完成并释放锁，B 仍然没有得到它，一段时间后 A 获得再次锁定（A 确实在循环中获取和释放）。
如果我将我的进程附加到 gdb 并在线程 A 放弃锁定并手动继续线程 B 后暂停线程 A，然后它会获取它并执行所需的操作。

对我来说，这看起来不像是死锁。什么可能阻止线程 B 获得锁？任何帮助是极大的赞赏。

示例代码：

线程 A：

```
while (true)  
{  
    lock.acquire(lock)  
    // Do stuff  
    lock.release(lock)  
    // Do more stuff  
} 
```

线程 B：

```
lock.acquire(lock)  
// Do some stuff  
lock.release(lock) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:19:58.607

看起来您的算法遭受饥饿，您应该排队访问锁，请参阅

[pthreads：快速重新锁定导致的线程饥饿](https://stackoverflow.com/questions/12685112/pthreads-thread-starvation-caused-by-quick-re-locking)

或者

[公平临界区 (Linux)](https://stackoverflow.com/questions/6449732/fair-critical-section-linux)

作为对评论的回答，什么是互斥锁（pthread 库）

> 互斥锁是一个锁（来自 Pthread 库），它保证以下三件事：
> 
> **原子性**- 锁定互斥锁是一种原子操作，这意味着线程库向您保证，如果您锁定了一个互斥锁，则没有其他线程可以同时成功锁定该互斥锁。
> 
> **奇点**- 如果一个线程设法锁定了一个互斥锁，则可以确保在原始线程释放锁之前没有其他线程能够锁定同一个互斥锁。
> 
> **非忙等待**- 如果线程 A 尝试锁定已被线程 B 锁定的互斥体，则线程 A 将被挂起（并且不会消耗任何 CPU 资源），直到线程 B 释放锁为止。当线程 B 解锁互斥锁时，线程 A 将唤醒并继续执行，互斥锁被它锁定。

它不保证公平。

如果您仍然对某种读者作家公平感兴趣`pthread_rwlock_rdlock`： 允许有利于作家而不是读者，以避免作家饥饿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:15:12.350

另一种可能性是您的锁已在 A 线程上声明，从而阻止锁/释放完全释放（锁计数线程保持过高）。

饥饿是另一种很大的可能性，但是您的问题指出“一段时间后A再次获得锁定”表明超过几微秒:)，这应该可以防止饥饿。

您是否有可能从 A 返回或使用 continue 语句，从而保持锁定？

# ios - MonoTouch 可以安全地与 Core Audio 一起使用吗？

> ID：14736754
> 
> 赞同：2
> 
> 时间：2013-02-06T19:04:47.137
> 
> 标签：ios, xamarin.ios, core-audio

我想到 Core Audio 回调需要非常低的延迟。在我的情况下，我一次收到 512 个样本的请求，这在 44100Hz 时意味着回调最多可以运行 11.6 毫秒。

现在，据我了解垃圾收集，每个收集周期都需要 VM 停止所有线程。然后，垃圾回收周期可能会中断 Core Audio 回调，并出现故障。

如果是这样，那么使用 MonoTouch 的 Core Audio 并不安全。

我的假设是否正确？还是这一切都不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:02:41.127

Core Audio 渲染回调将在一个对其截止日期**非常**严格的实时线程上调用。从它的声音来看，您偶尔会超出渲染回调的时间限制，并被切断（这 == 故障）。虽然我对 MonoTouch 了解不多，但您对 GC 延迟是罪魁祸首的猜测听起来确实是一个很可能的结论。

为了让您了解 Core Audio 渲染回调的严格程度，这里有一些在这种情况下是不可接受的：

*   分配内存
*   等待互斥锁
*   从磁盘读取数据
*   Objective-C 消息传递

由于 Core Audio 的架构，渲染回调将在您制作的音频被听到之前不久触发。因此，即使是短暂的 GC 挂断也可能触发可听故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:53:15.863

不会。MonoTouch VM 似乎不能保证在确定的时间内执行代码。实时音频回调需要代码（通常编译为原生 C），其性能可以在时间上得到严格限制，包括所有操作系统调用和任何解释器开销。

# objective-c - Objective C - 非空块的用途是什么？

> ID：14736763
> 
> 赞同：5
> 
> 时间：2013-02-06T19:05:08.380
> 
> 标签：objective-c, block

我见过许多返回类型为 void 的块。但是可以声明非空块。这个有什么用？

块声明，

```
-(void)methodWithBock:(NSString *(^)(NSString *str))block{
     // do some work
    block(@"string for str"); // call back
} 
```

使用该方法，

```
[self methodWithBock:^NSString *(NSString *str) {

        NSLog(str); // prints call back
        return @"ret val"; // <- return value for block 
    }]; 
```

在上面的块声明中，块的 NSString 返回类型究竟是什么目的？如何使用返回值（“ret val”）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T19:10:02.480

您可以使用非 void 块，原因与使用非 void 函数指针的原因相同 - 在代码执行时提供额外的间接级别。

`NSArray`'s`sortUsingComparator`提供了这种使用的一个例子：

```
NSArray *sorted = [originalArray sortedArrayUsingComparator:(NSComparator)^(id obj1, id obj2){
    NSString *lhs = [obj1 stringAttribute];
    NSString *rhs = [obj2 stringAttribute];
    return [lhs caseInsensitiveCompare:rhs];
}]; 
```

比较器块允许您将比较逻辑封装在执行排序的方法*之外。*`sortedArrayUsingComparator`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T19:09:53.573

这只是一个返回，所以你可以做这样的事情来利用返回值并对其进行处理。

```
-(void)methodWithBlock:(NSString *(^)(NSString *str))block{
     // do some work

    NSString *string = block(@"string for str"); // call back

    // do something with the return string
    NSLog(@"%@",string);
} 
```

# python - 为什么 gevent.socket 会破坏 multiprocessing.connection 的身份验证

> ID：14736766
> 
> 赞同：4
> 
> 时间：2013-02-06T19:05:10.790
> 
> 标签：python, connection, multiprocessing, gevent, monkey

我有一个应用程序同时使用IPC 通信和 HTTP 上的异步 RESTful 通信`grequests`。`multiprocessing.managers`

似乎`grequests`，在 using`gevent.monkey`的`patch_all()`方法中，破坏了类及其派生类`multiprocessing.connection`使用的模块。`multiprocessing.manager.SyncManager`

这显然不是一个孤立的问题，但会影响任何实现 的用例，`multiprocessing.connetion`例如`multiprocessing.pool`。

深入研究 中的代码`gevent/monkey.py`，我发现 stdlib`socket`模块的交换`gevent.socket`是导致损坏的原因。这可以在函数`gevent/monkey.py`下的第 115 行找到：`patch_socket()`

```
def patch_socket(dns=True, aggressive=True):
    """Replace the standard socket object with gevent's cooperative sockets.
    ...
    _socket.socket = socket.socket # This line breaks multiprocessing.connection!
    ... 
```

那么我的问题是为什么这个 swappage break `multiprocessing.connection`，以及使用`gevent.socket`而不是 stdlib 的`socket`模块有什么好处？也就是说，如果不修补`socket`模块，我会招致什么性能损失（如果有的话）？

## 追溯

```
Traceback (most recent call last):
  File "clientWithGeventMonkeyPatch.py", line 49, in <module>
    client = GetClient(host, port, authkey)
  File "clientWithGeventMonkeyPatch.py", line 39, in GetClient
    client.connect()
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 500, in connect
    conn = Client(self._address, authkey=self._authkey)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 175, in Client
    answer_challenge(c, authkey)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 414, in answer_challenge
    response = connection.recv_bytes(256)        # reject large message
IOError: [Errno 11] Resource temporarily unavailable 
```

## 重现错误的代码

（在 ubuntu 服务器 11.10、python2.7.3 上，安装了 gevent、greenlet 和 grequests）

管理器.py

```
## manager.py
import multiprocessing
import multiprocessing.managers
import datetime

class LocalManager(multiprocessing.managers.SyncManager):
    def __init__(self, *args, **kwargs):
        multiprocessing.managers.SyncManager.__init__(self, *args, **kwargs)
        self.__type__ = 'LocalManager'

def GetManager(host, port, authkey):
    def getdatetime():
        return '{}'.format(datetime.datetime.now())

    LocalManager.register('getdatetime', callable = getdatetime)
    manager = LocalManager(address = (host, port), authkey = authkey)
    manager.start()

    return manager

if __name__ == '__main__':
    # define our manager connection parameters
    port = 55555
    host = 'localhost'
    authkey = 'auth1234'

    # start a manager
    man = GetManager(host, port, authkey)

    # wait for user input to shut down
    raw_input('return to shutdown')
    man.shutdown() 
```

客户端.py

```
## client.py -- this one works
import time
import multiprocessing.managers

class RemoteClient(multiprocessing.managers.SyncManager):
    def __init__(self, *args, **kwargs):
        multiprocessing.managers.SyncManager.__init__(self, *args, **kwargs)
        self.__type__ = 'RemoteClient'

def GetClient(host, port, authkey):
    RemoteClient.register('getdatetime')
    client = RemoteClient(address = (host, port), authkey = authkey)
    client.connect()
    return client

if __name__ == '__main__':
    # define our client connection parameters
    port = 55555
    host = 'localhost'
    authkey = 'auth1234'

    # start a manager
    client = GetClient(host, port, authkey)
    print 'connected', client
    print 'client.getdatetime()', client.getdatetime()
    # wait a couple of seconds, then do it again
    time.sleep(2)
    print 'client.getdatetime()', client.getdatetime()

    # exit... 
```

clientWithGeventMonkeyPatch.py

```
## clientWithGeventMonkeyPatch.py -- breaks, depending on patch_all() parameters        
import time
import multiprocessing.managers

# this part is copied from grequests
# bear in mind that it doesn't actually do anything in this module.
try:
    import gevent
    from gevent import monkey as curious_george
    from gevent.pool import Pool
except ImportError:
    raise RuntimeError('Gevent is required for grequests.')

# this line causes breakage of the multiprocessing.manager connection auth method:
# Monkey-patch. 
# patch_all() parameters with default values:  socket=True, dns=True, time=True, select=True, thread=True, os=True, ssl=True, aggressive=True

curious_george.patch_all(thread=False, select=False) # breaks
#~ curious_george.patch_all(thread=False, select=False, socket = False) # works!
#~ curious_george.patch_all(thread=False, select=False, socket = True, aggressive = True, dns = True) # same as (thread=False, select=False); breaks
#~ curious_george.patch_all(thread=False, select=False, socket = True, aggressive = True, dns = False) # breaks
#~ curious_george.patch_all(thread=False, select=False, socket = True, aggressive = False, dns = True) # breaks
#~ curious_george.patch_all(thread=False, select=False, socket = True, aggressive = False, dns = False) # breaks

class RemoteClient(multiprocessing.managers.SyncManager):
    def __init__(self, *args, **kwargs):
        multiprocessing.managers.SyncManager.__init__(self, *args, **kwargs)
        self.__type__ = 'RemoteClient'

def GetClient(host, port, authkey):
    RemoteClient.register('getdatetime')
    client = RemoteClient(address = (host, port), authkey = authkey)
    client.connect()
    return client

if __name__ == '__main__':
    # define our client connection parameters
    port = 55555
    host = 'localhost'
    authkey = 'auth1234'

    # start a manager
    client = GetClient(host, port, authkey)
    print 'connected', client
    print 'client.getdatetime()', client.getdatetime()
    # wait a couple of seconds, then do it again
    time.sleep(2)
    print 'client.getdatetime()', client.getdatetime()

    # exit... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:10:12.003

如果您不修补套接字模块，`gevent`则不阻止网络操作的能力将不可用，因此`gevent`首先使用的大部分好处将不可用。

`gevent`并且`multiprocessing`并不是真正设计为相互配合 -`gevent`主要假设您正在通过它进行网络连接，而不是绕过最高级别的 Python 套接字接口（`multiprocessing`确实如此）。

# javascript - 悬停时使用jQuery显示时如何重叠块元素

> ID：14736767
> 
> 赞同：1
> 
> 时间：2013-02-06T19:05:16.733
> 
> 标签：javascript, jquery, html, css, dom

也许我正在处理这个错误，但我有一个表格，其中部分内容临时被删除......

```
.form_jquery {display: none;} 
```

当父 div 和标题悬停时，我正在显示内容......

```
$(document).ready( function () {
        $(".deliver").hover(
            function () {
            $(".form_jquery").css({'display':'block'});
            },
                function () {
                    $(".form_jquery").css({'display':'none'});
                }
         )
    }); 
```

问题是，我在此表单标题/切换下有一个“主要内容”区域，当我们...

```
css({'display':'block'}) 
```

下块元件被向下推。我在下部块上尝试了一些显示元素选项，但有不良反应。我最后的手段是将我的表单设置为“固定”，但我确实希望它模拟菜单标题并与该组一起滚动。

[http://www.testinr.com/](http://www.testinr.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:29:49.007

您应该将以下项目添加到您的 CSS

```
.deliverOnHover
{
    position:relative;
    z-index: 99;
    display: block;
}
body{
    position: absolute;
    table-layout:fixed;
} 
```

Jquery 将是这样的：

```
$(document).ready( function () {
    $(".deliver").hover(function(){
         $(".form_jquery").toggleClass('deliverOnHover');
    });
}); 
```

并添加`position:absolute`到下面 div 的 css 中。

# vim - 在 Vim 中缩进 Fortran 代码

> ID：14736769
> 
> 赞同：6
> 
> 时间：2013-02-06T19:05:18.513
> 
> 标签：vim, fortran, fortran90

我有一个看起来像这样的 fortran 代码：

```
 open(2,file=filenm(i),status='unknown')
         do j=1,num_lines
            do k=1,dime
                     read(2,*) z(k)
            enddo
               if( j .ge. 1000 ) then
                     do k=1,dime
                              sumz(k)=sumz(k)+z(k)
                     enddo
                     nsteps=nsteps+1.0
               endif
         enddo
   close(2) 
```

如您所见，缩进不均匀，我想要这样的东西：

```
 open(2,file=filenm(i),status='unknown')
          do j=1,num_lines
                 do k=1,dime
                        read(2,*) z(k)
                 enddo
                 if( j .ge. 1000 ) then
                        do k=1,dime
                               sumz(k)=sumz(k)+z(k)
                        enddo
                        nsteps=nsteps+1.0
                 endif
          enddo
   close(2) 
```

我可以逐行修复缩进，但代码有点大。我很感激任何评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T16:26:18.450

我经历了一个非常相似的过程，试图让 Fortran 缩进在 vim 中工作。我仍然没有很好，但我已经取得了一些进展。arutaku 发布的脚本 ( [http://www.vim.org/scripts/script.php?script_id=2299](http://www.vim.org/scripts/script.php?script_id=2299) ) 是我开始的地方，但你需要确保它`filetype plugin indent on`在你的 vimrc 中。

我还需要一个脚本来确定我使用的是固定格式还是自由格式语法，因为在我的环境中我同时使用了这两种语法。文档中建议这样做（[http://vimdoc.sourceforge.net/htmldoc/syntax.html#ft-fortran-syntax](http://vimdoc.sourceforge.net/htmldoc/syntax.html#ft-fortran-syntax)）。正如它所指定的，我把这个脚本放在`~/.vim/ftplugin/fortran.vim`：

```
let s:extfname = expand("%:e")
if s:extfname ==? "f90"
  let fortran_free_source=1
  unlet! fortran_fixed_source
else
  let fortran_fixed_source=1
  unlet! fortran_free_source
endif 
```

我还使用了一个脚本，这样我就可以按 F7 来自动完成某些结构：[http](http://www.vim.org/scripts/script.php?script_id=2487) ://www.vim.org/scripts/script.php?script_id=2487 。我也把它放进去`~/.vim/ftplugin/`。

我的 vimrc 中也有这些以尝试进一步改进：

```
let fortran_do_enddo=1
let fortran_more_precise=1
let fortran_have_tabs=1 
```

我相信这些应该与第一个脚本交互以控制其行为，但我不相信它们都对我有用。我知道第一个应该正确缩进`do`/`enddo`块。问题在于，由于旧式 Fortran 允许 a`do`没有匹配`enddo`，因此脚本无法正确缩进它们，除非您可以保证不会使用不匹配的 'do' 语句。应该是那种保证，但它似乎对`let fortran_do_enddo=1`我不起作用。最后一个应该允许使用制表符，旧的 Fortran 认为这是不好的，因此它可以防止它们被标记为错误。那个似乎对我有用。老实说，我不记得中间那个应该做什么，也不记得它是否对我有用。

**编辑：**

我发现我的 vim 安装目录（`/usr/share/vim/vim70/indent/`在我的情况下）中有第一个脚本的旧版本，我没有访问权限。您可能拥有这些权利，如果它给您带来问题，请覆盖或删除它。如果像我一样，你不能编辑它，你可以在你的 $HOME 中获取版本来覆盖第一个函数。我通过做两件事来做到这一点。首先，我必须删除检查以查看函数是否已经存在（语句如`if exists("*FortranGetFixedIndent")`），然后我必须更改所有函数声明以使用`!`字符强制覆盖，即`function! SebuFortranGetFreeIndent()`. 据我所知，现在一切都按我的预期工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:08:55.080

*gg=G*有效吗？

gg: 到顶部
=: 缩进...
G: ... 直到最后

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-03T02:30:48.440

试试：[https ://sourceforge.net/projects/findent/files/](https://sourceforge.net/projects/findent/files/)

从自述文件：

findent：缩进/美化/转换 Fortran 源

*   findent 支持 Fortran-2008

*   findent 可以从固定形式转换为自由形式

*   适用于 Unix 和 Windows 的二进制文件（分别为 findent 和 findent.exe）

*   用于在一次调用中处理一个或多个文件的包装器，适用于 Unix 和 Windows（分别为 wfindent 和 wfindent.bat）

*   (g)vim 用户：findent 可以作为插件使用 '=' 命令格式化您的编辑文件

*   gui frontent 在单独的包中可用：jfindent

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T19:09:06.200

您可以使用自动缩进写入`<x>==`（在命令模式下），其中`x`是要缩进的行数。

如果 vim 没有 fortran 缩进，您可以加载以下插件并尝试`==`组合：[http ://www.vim.org/scripts/script.php?script_id=2299](http://www.vim.org/scripts/script.php?script_id=2299)

# pdfbox - PDF Box 文件与传真机不兼容

> ID：14736771
> 
> 赞同：0
> 
> 时间：2013-02-06T19:05:34.223
> 
> 标签：pdfbox, fax, rightfax

我正在使用 apache pdf box api (java) 从预定义的模板（从 Open office 创建）生成 pdf。现在，当我尝试将该 pdf 发送到传真机（Rightfax 服务器）时，它的打印中带有点。此外，如果我更改字体，除了其中的一些点之外，什么都不会打印。

请告知在模板创建中是否需要进行任何设置以兼容传真格式。

问候， Niteesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T17:36:59.270

我的猜测是 PDF 文档是彩色或灰度生成的。传真是严格黑白的。当彩色或灰度文档转换为黑白时，您看到的点是抖动过程的结果。

# javascript - 为 Twitter Bootstrap 的模态对话框添加一些钩子

> ID：14736776
> 
> 赞同：1
> 
> 时间：2013-02-06T19:05:58.137
> 
> 标签：javascript, html, twitter-bootstrap

我在模式中有一个视频，可以通过页面上的许多链接打开。

问题是，当我在视频运行的情况下关闭模式时，我仍然可以听到视频......这是有道理的，但我不想要它。

有没有办法在 Bootstrap 的事件中实现钩子，比如模态？一些事件或其他事情允许我在模式关闭时停止视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:10:55.007

分别处理关闭前后触发的模式`hide`或事件*。`hidden`

```
$('#myModal').on('hidden', function () {
    // stop the video playback
}); 
```

**[**这里*](http://twitter.github.com/bootstrap/javascript.html#modals)***是所有支持的事件和方法。*

# android - 如何锁定对象/成为监视器的所有者（Android）

> ID：14736782
> 
> 赞同：2
> 
> 时间：2013-02-06T19:06:14.593
> 
> 标签：android, object, locking, owner

如何在 addTextChangedListener 中等待一秒钟？以下代码给出以下错误： E/AndroidRuntime(1003): java.lang.IllegalMonitorStateException: object not locked by thread before wait()

在 Object 的方法 wait() 的 Android 参考中它说：此方法只能由拥有此对象监视器的线程调用；请参阅 notify() 以了解线程如何成为监视器的所有者。

在对象的 notify() 处说：此方法只能由拥有该对象监视器的线程调用。线程成为对象监视器的所有者 • 通过执行该对象的同步方法；•通过执行在对象上同步的同步语句的主体；• 如果对象是Class 类型，则通过执行同步的静态方法。

我在这里遇到的一个问题：我不明白...

我应该在这里做什么来“暂停”一秒钟？

```
public class Spel extends FragmentActivity  {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.spel);
    editText2 = (EditText) findViewById(R.id.editText2);
editText2.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start,
            int before, int count) {
        if (before==0) {
            String v = s.toString();
            if (v.equals("0") || v.equals("1") || v.equals("2") || v.equals("3") || v.equals("4") || v.equals("5") || v.equals("6") || v.equals("7") || v.equals("8") || v.equals("9")) {
                try {
                    wait(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                editText1.requestFocus();
                editText1.setText(null);
                editText2.setText(null);
                int baanWorpScore = Integer.parseInt(v);
            } 
            else {
                // blijf wachten op goede invoer
                editText2.setText(null);
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:24:16.350

当多个线程使用某些共享资源时，wait()\notify() 方法需要解决消费者\生产者问题。在您的情况下，如果您只想等待一秒钟，则需要使用 Handler 和 postDelayed。方法。如果您想再次冻结您的应用程序，请使用 Thread.sleep(1000)

# android - 如何从 Android 应用程序写入外部存储？

> ID：14736783
> 
> 赞同：0
> 
> 时间：2013-02-06T19:06:16.777
> 
> 标签：android, file

我正在尝试编写一些代码以将文件从服务器直接流式传输到 Android 外部存储系统。

```
 private void streamPDFFileToStorage() {
    try {
        String downloadURL = pdfInfo.getFileServerURL();
        URL url = new URL(downloadURL);
        HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
        InputStream pdfFileInputStream = new BufferedInputStream(httpURLConnection.getInputStream());
        File pdfFile = preparePDFFilePath();
        OutputStream fileOutputStream = new BufferedOutputStream(new FileOutputStream(pdfFile));
        byte[] buffer = new byte[8012];
        int bytesRead;
        while ((bytesRead = pdfFileInputStream.read(buffer)) != -1) {
            fileOutputStream.write(buffer, 0, bytesRead);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private File preparePDFFilePath() {
    File sdCard = Environment.getExternalStorageDirectory();
    File dir = new File (sdCard.getAbsolutePath() + "/dir1/dir2");
    dir.mkdirs();
    File file = new File(dir, "filename");
    return file;
    /*
    String pdfFileDirectoryPath = ApplicationDefaults.sharedInstance().getFileStorageLocation() + pdfInfo.getCategoryID();
    File pdfFileDirectory = new File(pdfFileDirectoryPath);
    pdfFileDirectory.mkdirs();
    return pdfFileDirectoryPath + "/ikevin" + ".pdf";
    */
} 
```

**它不断收到“没有这样的文件或目录**”的异常

`"OutputStream fileOutputStream = new BufferedOutputStream(new FileOutputStream(pdfFile));"`

我该如何写文件？我的代码有什么问题？（另外，我没有使用`Context.getExternalFilesDir()`，因为我不知道如何从我的控制器逻辑代码中获取上下文。谁能建议这是否是更好的解决方案？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:15:12.720

`new File`正在返回一个文件对象而不是文件。您可能想在打开一个流之前创建一个文件。试试这个

```
File pdfFile = preparePDFFilePath();
boolean isCreated = pdfFile.createNewFile();
if(isCreated){
   OutputStream fileOutputStream = new BufferedOutputStream(new FileOutputStream(pdfFile));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:10:26.467

此代码有效：

```
 String root = Environment.getExternalStorageDirectory().toString();
    File dir = new File(root + "/dir1");    
    dir.mkdirs(); 
```

# python - 如何停止、重新启动或启动在 Debian 系统的 virtualenv 中运行的 Gunicorn？

> ID：14736788
> 
> 赞同：1
> 
> 时间：2013-02-06T19:06:29.417
> 
> 标签：python, python-2.7, debian, gunicorn

如何停止、重新启动或启动在 Debian 系统的 virtualenv 中运行的 Gunicorn？

除了找到 gunicorn 守护进程的 PID 并杀死它之外，我似乎找不到解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:14:14.943

这确实是正确的做法。使用该选项启动它，`-p`这样如果您有多个实例正在运行，您就不必猜测 PID。您可以告诉 gunicorn 重新加载您的应用程序，而无需重新启动 gunicorn 进程本身，方法是向它发送 SIGHUP 而不是杀死它。

如果这让您感到不舒服，您可以随时编写一个管理脚本来像任何其他服务一样放入`/etc/init.d`并启动它。

# c# - 来自外部数据源的 Oracle MERGE

> ID：14736789
> 
> 赞同：0
> 
> 时间：2013-02-06T19:06:34.420
> 
> 标签：c#, oracle, merge, bulkinsert

我正在构建一个与 Oracle 11g 数据库对话的 .NET 应用程序。我正在尝试从第三方提供的 Excel 文件中获取数据并进行更新（`UPDATE`如果存在，则记录，`INSERT`如果不存在），但在性能方面遇到了一些问题。

这些 Excel 文件用于替换关税代码和描述，因此每个文件中有几千条记录。

```
|   Tariff   |        Description        |
|----------------------------------------|
| 1234567890 | 'Sample description here' | 
```

我对批量插入进行了一些研究，甚至编写了一个在应用程序中打开事务，执行一堆`UPDATE`or`INSERT`语句，然后提交的函数。不幸的是，这需要很长时间并且会延长应用程序和数据库之间的会话。

```
public void UpsertMultipleRecords(string[] updates, string[] inserts) {
    OleDbConnection conn = new OleDbConnection("connection string here");
    conn.Open();
    OleDbTransaction trans = conn.BeginTransaction();
    try {
        for (int i = 0; i < updates.Length; i++) {
            OleDbCommand cmd = new OleDbCommand(updates[i], conn);
            cmd.Transaction = trans;
            int count = cmd.ExecuteNonQuery();
            if (count < 1) {
                cmd = new OleDbCommand(inserts[i], conn);
                cmd.Transaction = trans;
            }
        }
        trans.Commit();
    } catch (OleDbException ex) {
        trans.Rollback();
    } finally {
        conn.Close();
    }
} 
```

我通过 Ask Tom 发现，执行此类操作的一种有效方法是使用 Oracle`MERGE`语句，该语句在 9i 中实现。据我了解，这只能使用 Oracle 中的两个现有表。我已经尝试过但不了解临时表，或者如果可能的话。如果我创建一个只保存我的数据的新表`MERGE`，我仍然需要一种可靠的批量插入方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:17:28.667

[我通常将文件上传到合并的方式是首先使用sql*loader](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)插入加载表，然后从加载表执行合并语句到目标表。

临时表只会在会话期间保留其内容。我希望 sql*loader 在完成后结束会话，因此最好使用在合并后截断的普通表。

```
merge into target_table t
using load_table l on (t.key = l.key) -- brackets are mandatory
when matched then update
set t.col = l.col
,   t.col2 = l.col2
,   t.col3 = l.col3
when not matched then insert
(t.key, t.col, t.col2, t.col3)
values
(l.key, l.col, l.col2, l.col3) 
```

# java - 如何在 Swing 中组织我的动作？

> ID：14736792
> 
> 赞同：3
> 
> 时间：2013-02-06T19:06:43.620
> 
> 标签：java, swing, actionlistener, abstract-action

我目前正在替换我的匿名 ActionListeners

```
new ActionListener() {
    @Override
    public void actionPerformed(final ActionEvent event) {
        // ...
    }
} 
```

带有代表动作的类文件：

```
public class xxxxxxxAction extends AbstractAction {
} 
```

但是，我的 GUI 能够执行很多操作（例如 CreatePersonAction、RenamePersonAction、DeletePersonAction、SwapPeopleAction 等）。

有没有一种好方法可以将这些类组织成某种连贯的结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T19:14:31.817

您可以将您的操作保存在单独的包中以隔离它们。有时，将它们放在一个类中很有用，尤其是当动作相关或具有共同的父级时，例如：

```
public class SomeActions {
    static class SomeActionX extends AbstractAction {
        @Override
        public void actionPerformed(ActionEvent e) {
        }
    }

    static class SomeActionY extends AbstractAction {
        @Override
        public void actionPerformed(ActionEvent e) {
        }
    }

    static class SomeActionZ extends AbstractAction {
        @Override
        public void actionPerformed(ActionEvent e) {
        }
    }
} 
```

然后访问它们：

```
JButton button = new JButton();
button.setAction(new SomeActions.SomeActionX()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T19:20:30.403

> 我只是感觉到将大约 60 个 ActionListener 转换为单独的类的压力。

只有您可以决定是否`60`是最小的。此[示例](https://stackoverflow.com/a/5797965/230513)使用单个类的四个实例。`StyledEditorKit`，在[这里](https://stackoverflow.com/a/8534162/230513)看到，是一个很好的例子，如果分组为一系列[静态工厂方法](http://drdobbs.com/java/208403883)。[此处](https://stackoverflow.com/a/11944233/230513)引用的示例使用嵌套类。[，在这里](https://stackoverflow.com/a/13997870/230513)`JHotDraw`引用，动态生成合适的动作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T19:33:05.487

首先，您应该为您的操作中使用的所有 actionPerformed 提供公共方法（createPerson、removePerson 等）。所有这些操作方法都应该在一个类中（我称之为 PersonController）。然后，您需要定义您的 AbstractPersonAction：

```
public class AbstractPersonAction extends AbstractAction {
  private PersonController controller;

  public AbstractPersonAction(PersonController aController) {
    controller = aController;
  }

  protected PersonController getController() {
    return controller;
  }
} 
```

现在您可以将所有操作提取到单独的类中。

```
public class CreatePersonAction extends AbstractPersonAction {

  public CreatePersonAction(PersonController aController) {
    super(controller);
  }

  public void actionPerformed(ActionEvent ae) {
    getController().createPerson();
  }
} 
```

这些动作可以是外部类的一部分，也可以放在单独的“动作”包中。

# c# - SQL to LINQ 获取匹配所有值的所有记录

> ID：14736795
> 
> 赞同：4
> 
> 时间：2013-02-06T19:06:52.597
> 
> 标签：c#, sql, asp.net-mvc, linq

如何将此查询转换为 linq c# 代码：

```
SELECT k1.Ad_Id FROM KeywordAdCategories k1, KeywordAdCategories k2
WHERE k1.Keyword_Id =  (SELECT Id FROM keywords WHERE name = 'ALFA')
AND k2.Keyword_Id = (SELECT Id FROM keywords WHERE name = '145')
AND k1.Ad_Id = k2.Ad_Id 
```

想法是根据可以为 N 的关键字的数量构建一个动态查询（在示例中它们是 2：ALFA 和 145）

谢谢

编辑：

关键字广告类别模型：

```
public class KeywordAdCategory
{
    [Key]
    [Column("Keyword_Id", Order = 0)]
    public int Keyword_Id { get; set; }

    [Key]
    [Column("Ad_Id", Order = 1)]
    public int Ad_Id { get; set; }

    [Key]
    [Column("Category_Id", Order = 2)]
    public int Category_Id { get; set; }
} 
```

关键字模型：

```
public class Keyword
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

如果我有 5 个关键字，我会得到：

```
SELECT k1.Ad_Id FROM KeywordAdCategories k1, KeywordAdCategories k2, KeywordAdCategories k3, KeywordAdCategories k4, KeywordAdCategories k5
WHERE k1.Keyword_Id =  (SELECT Id FROM keywords WHERE name = 'KEYWORD1')
AND k2.Keyword_Id = (SELECT Id FROM keywords WHERE name = 'KEYWORD2')
AND k1.Ad_Id = k2.Ad_Id
AND k3.Keyword_Id =  (SELECT Id FROM keywords WHERE name = 'KEYWORD3')
AND k2.Ad_Id = k3.Ad_Id
AND k4.Keyword_Id =  (SELECT Id FROM keywords WHERE name = 'KEYWORD4')
AND k3.Ad_Id = k4.Ad_Id
AND k5.Keyword_Id =  (SELECT Id FROM keywords WHERE name = 'KEYWORD5')
AND k4.Ad_Id = k5.Ad_Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:25:42.267

我第一次看到它时认为这有点棘手，所以我可能想多了。但这里有一个我相信对你有用的解决方案：

```
var keywordList = new List<string>();
keywordList.Add("ALFA");
keywordList.Add("145");

var results = KeywordAdCategories.Select (kac => kac.Ad_Id).Distinct()
            .Select (a => 
                new
                { 
                    AdId=a,
                    Keywords=KeywordAdCategories.Where(kac => kac.Ad_Id == a).Select(kac => kac.Keyword_Id)
                })
            .Where(ac => ac.Keywords.Intersect(Keywords.Where(kw => keywordList.Contains(kw.Name)).Select (kw => kw.Id)).Count() == keywordList.Count())
            .Select (ac => ac.AdId); 
```

现在解释一下我在这里做了什么。首先，我想从所有可能的广告 id 开始，所以我们有这行：

```
KeywordAdCategories.Select (kac => kac.Ad_Id).Distinct() 
```

当然，这可能更容易从您的广告表中的不同选择中检索，但我试图只使用您定义的内容。

接下来，我将每个广告 ID 及其相关的关键字集合选择到一个匿名类型对象列表中：

```
.Select (a => 
              new
              { 
                  AdId=a,
                  Keywords=KeywordAdCategories.Where(kac => kac.Ad_Id == a).Select(kac => kac.Keyword_Id)
              }) 
```

接下来，我将结果过滤为仅包含与我们的关键字列表相交并且具有与我们的关键字列表相同数量的结果元素的关键字集合的对象。

```
.Where(ac => ac.Keywords.Intersect(Keywords.Where(kw => keywordList.Contains(kw.Name)).Select (kw => kw.Id)).Count() == keywordList.Count()) 
```

最后我只选择结果的广告 ID

```
.Select (ac => ac.AdId); 
```

如果您有兴趣，这里是 emmited sql

```
-- Region Parameters
DECLARE @p0 NVarChar(1000) = 'ALFA'
DECLARE @p1 NVarChar(1000) = '145'
DECLARE @p2 Int = 2
-- EndRegion
SELECT [t1].[Ad_Id]
FROM (
    SELECT DISTINCT [t0].[Ad_Id]
    FROM [KeywordAdCategories] AS [t0]
    ) AS [t1]
WHERE ((
    SELECT COUNT(*)
    FROM (
        SELECT DISTINCT [t2].[Keyword_Id]
        FROM [KeywordAdCategories] AS [t2]
        WHERE (EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [Keywords] AS [t3]
            WHERE ([t2].[Keyword_Id] = [t3].[Id]) AND ([t3].[Name] IN (@p0, @p1))
            )) AND ([t2].[Ad_Id] = [t1].[Ad_Id])
        ) AS [t4]
    )) = @p2 
```

我确信有更优雅的方法可以完成您想要做的事情，但我想看看是否可以在单个 linq 查询中完成这一切。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:18:38.337

```
List<string> keywordnames = new List<string>();
// populate keywordsnames list    

IQueryable<int> AdIds = from k in KeywordAdCategories
    where 
        (from kw in Keywords where keywordnames.Contains(kw.name) select kw.id)
        .Contains(k.keyword_id)
    select k.Ad_Id; 
```

或者

```
List<string> keywordnames = new List<string>();
// populate keywordsnames list   

List<int> keywordnameids = (from kw in ctx.Keywords
                            where keywordnames.Contains(kw.name)
                            select kw.id).ToList();

List<int> AdIds = (from k in ctx.KeywordAdCategories
                   where keywordnameids.Contains(k.Keyword_Id)
                   select k.Ad_Id).ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T19:13:15.297

```
public static int GetAdId(string KeywordId)
{
    var dbContext = new MyDbContext();

    var result = (from k in in dbContext.KeywordAdCategories
                   where k.Keyword_Id == KeywordId
                   select k.Ad_Id).SingleOrDefault();

    return result;
} 
```

通过此方法运行所有关键字 id，您将获得相应的广告 id。我建议您阅读 LINQ。一旦你了解了它，它就是一个很棒的工具，而且学习起来并不难，尽管起初它可能看起来有点吓人。Pluralsight.com 有很多很棒的视频，很容易掌握和学习:)

# php - 进一步获取 mysqli 提交 2 页

> ID：14736813
> 
> 赞同：1
> 
> 时间：2013-02-06T19:07:54.397
> 
> 标签：php, sql, mysqli

所以我有一个人们必须填写的表格，如果他们输入的电子邮件不存在，你会得到一个注册页面，我将他们填写的内容保存在 mysqli 查询中，如果注册，我想提交它过程完成。但要检查这一点，我需要将查询带到下一页。

长话短说，当他们按下提交时，我需要将查询带到下一页。

它也可以是 $_POST 值，但我认为将所有这些值保存在会话中将是丑陋的编码。那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:13:32.987

您绝对不想将实际查询发布到下一页，因为所有人都可以看到有关您的表的信息。一个很好的解决方法是像正常一样将所有形式的所有信息存储在会话中（如果它是几个不同的值也没关系，这绝对不是一个糟糕的编码实践），在下一页上获取它们，然后创建/在那里执行您的查询。这样，发送过来的信息就是用户已经输入的内容，并且您的所有数据库调用都保持不可见。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:19:49.500

我现在要使用会话并保持我的代码干净，我使用了一个数组和一个 foreach。只是想分享这个。

```
$posts = array("value1","value2");
foreach ($posts as $post) {
   if (isset($_POST[$post])) {
      $_SESSION[$post] = $_POST[$post];
      $$post = $_SESSION[$post];
   }
} 
```

# ruby-on-rails - Rails_admin 不显示所有包含的模型

> ID：14736814
> 
> 赞同：3
> 
> 时间：2013-02-06T19:07:57.570
> 
> 标签：ruby-on-rails, rails-admin

我有 Rails 应用程序，其中包含一些模型、前端和使用 rails_admin 的管理。我有这些 rails_admin 设置：

```
# Config/initializers/rails_admin.rb
RailsAdmin.config do |config|
  ...
  config.included_models = %w[ User Page Event Link Slide Main Partner ]
  ...
end 
```

但它不起作用，它只显示事件、链接、页面。我不知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T17:52:41.180

您是否在 Rails 管理员中使用 CanCan？也许您还没有设置能力模型以使它们易于管理。

或者，也许您还没有重新启动服务器。

# c# - 通过 P/Invoke 防止应用程序调用库发生无优雅崩溃

> ID：14736821
> 
> 赞同：3
> 
> 时间：2013-02-06T19:08:32.983
> 
> 标签：c#, c++

我有一个 C# 应用程序`App A`，它通过 P/Invoke 调用 C++ (Qt) DLL `App B`。假设我不能以任何方式编辑`App B`，但我知道这是在一组条件下`App B`抛出一个我可以复制但在将输入从to传递之前无法准确测试的条件。此异常不会对任何威胁构成任何威胁，如果可以以某种方式“重置”，则可以将其忽略，但是当崩溃时，它会调用这反过来会导致的运行时终止。`Out of Memory Exception``App A``App B``App A``App B``App B``abort()``App A`

我怎样才能防止`App B`不可避免的、不可预测的和通常平凡的崩溃影响`App A`？

*笔记：*

*   `UnhandledExceptionHandler`抛出此错误时将忽略已实现。
*   `App B`由于 QtWebkit 中的错误而崩溃，可以`App B`通过删除过大的对象并返回 null 来处理该错误。
*   `App A`不会报告为内存不足，并且机器有足够的内存来多次执行's 操作，无论错误如何，但无论出于何种原因，`App B`显然都没有分配此内存。`App B`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:19:10.397

您创建一个 shim 进程，其唯一目的是加载 App B 并使用某种 IPC 机制与 App A 通信。应用 A 生成 shim，如果 shim 崩溃，则应用 A 采取适当的操作（重新生成，向用户传达错误， ETC。）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:25:22.937

您可以处理来自非托管代码的 SIGABRT，但它有点混乱。有可能它可以完全在 C# 中完成，但我的方法需要一个 C++/CLI 程序集才能使其工作（至少它在一个过程中）。

步骤 1：创建一个 C++/CLI 类库项目，在 *.h 文件中放入以下函数

```
namespace ClassLibrary1 {

    public ref class Class1
    {
    public:
        static void callaborter();
    };
} 
```

第2步：在cpp文件中输入以下代码：

```
// This is the main DLL file.

#include "stdafx.h"
#include <csetjmp>
#include <csignal>
#include <cstdlib>
#include <iostream>
#include "ClassLibrary1.h"
#include "..\Win32Project1\Win32Project1.h"

#pragma managed(push, off) 
jmp_buf env;

void on_sigabrt (int signum)
{
    longjmp (env, 1);
}

void run()
{
    if (setjmp (env) == 0) {
            signal(SIGABRT, &on_sigabrt);
            fnWin32Project1();
    }
    else {
            std::cout << "aborted\n";
    }
}

#pragma managed(pop)

void ClassLibrary1::Class1::callaborter()
{
    run();
} 
```

我将我的类库和类的名称保留为默认值，我的中止函数是调用 fnWinProject1()。您需要将有问题的 DLL 直接链接到该项目（就像在 C++ 中一样）

在您的 C# 类中，包含对 C++/CLI 程序集的引用并调用“callaborter”方法。

运行中的代码将为 SIGABRT 设置一个捕获器（由 abort() 调用）并在 on_sigabrt() 中对其进行处理，这将导致整个函数退出。然后，您可以清理并重试。

我将把它作为 OP 选择有用名称的练习。

注意：在 Debug 中，您仍然会看到 abort 对话框，只需按 Ignore 继续。在 Release 中，您将看不到该对话框。

PS我应该提到我基于这个stackoverflow问题建立了我的回复：[如何处理SIGABRT信号？](https://stackoverflow.com/questions/8934879/how-to-handle-sigabrt-signal)

# java - Java RMI 和多个网络

> ID：14736822
> 
> 赞同：0
> 
> 时间：2013-02-06T19:08:33.717
> 
> 标签：java, networking, rmi

正如标题中所写，我对 Java RMI 有一些疑问。我的问题是：假设我有三个不同的网络：A、B 和 C。在网络中 AI 有一个 RMI 服务正在运行，我想使用网络 B 和 C 访问该服务。这可能吗？或者我必须使用网络服务来完成这项工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:22:20.457

RMI(/JRMP) 中有一个基本假设，即每个服务器主机都有一个对每个人都可见的“最公共”IP 地址，可以通过系统属性“java.rmi.server.hostname”在 RMI 中设置。此 IP 地址在远程存根中设置。

如果您的网络拓扑不符合此描述，那么您就不走运了。

# ruby-on-rails - 在预编译期间覆盖 rails 配置

> ID：14736827
> 
> 赞同：1
> 
> 时间：2013-02-06T19:08:53.677
> 
> 标签：ruby-on-rails, rake

在 期间`assets:precompile`，我想覆盖`config.threadsafe!`（将其设置为 false），否则我想使用`production.rb`. 有没有一种简单的方法来覆盖单个属性？我想避免复制`production.rb`到新的自定义环境中，因为`threadsafe!`它是唯一不同的属性。

**更新**：你不能“取消设置” `threadsafe!`，所以我可能只需要设置`config. allow_concurrency = false`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:34:10.747

您可以继承环境：

```
eval File.read("#{Rails.root}/..../production.rb") 
```

# c# - Sitecore Feed 最新 2 项

> ID：14736832
> 
> 赞同：0
> 
> 时间：2013-02-06T19:09:16.107
> 
> 标签：c#, asp.net, sitecore

我有一个 sitecore Web 部件，我试图按日期显示前 2 个最新项目。我遇到了麻烦，因为我只能显示最新的项目。

对于 ascx 代码：

```
 <asp:Repeater ID="newsContainer" runat="server">

        <ItemTemplate>
    <div class="newsItem">
    <h2><a href="/about-us/news.aspx">News</a></h2>
        <a href="<%# SitecoreUtility.NavigateUrl((Item)Container.DataItem)%>" class="newsHeadline">

 <span>  <sc:Date ID="Date1" Item="<%# Container.DataItem %>" Field="Posted-Date" Format="MM.dd.yyyy" runat="server" />    
 <sc:Text ID="Text1" Item="<%# Container.DataItem %>" Field="Title" runat="server" />
    </span>

            </a>

         <!--  <p class="newsSummary">
                <asp:Literal ID="litBody" runat="server" Text="<%# SitecoreUtility.TruncateByWords(((Item)Container.DataItem).Fields[Constants.Fields.BODY].Value, 20) %>"></asp:Literal>
                 ...
                <a href="<%# SitecoreUtility.NavigateUrl((Item)Container.DataItem)%>"     class="more">+ More</a></p> -->
        </div>
    </ItemTemplate>
</asp:Repeater>

<asp:Panel ID="pnlPagination" runat="server"></asp:Panel>
<asp:Panel ID="pnlArchive" runat="server">
  <!--  <div class="newsArchiveLink">
      <a href="?type=archive">View Archived News</a>
    </div> -->
</asp:Panel>
<asp:Panel ID="pnlCurrent" runat="server">
    <div class="newsArchiveLink">
      <a href="?type=current">View Current News</a>
    </div>
</asp:Panel> 
```

对于 ASCX.CS 文件：

```
public partial class Homepage_NewsListing : BaseSublayout
{
    int CurrentPage = 1;
    int PageSize = Constants.Values.SEARCH_SMALL_LIST;

    protected void Page_Load(object sender, EventArgs e)
    {

        CurrentPage = int.Parse(WebUtil.GetQueryString("page", "1"));

        List<Item> newsListings = new List<Item>();
        Item newsItems = SitecoreUtility.Db.GetItem(Constants.Items.NEWS);

        if (WebUtil.GetQueryString("type", "") == "archive")
        {
            newsListings = newsItems.Children.Where(item =>
                        (SitecoreUtility.FormatDateAtMidnight(item, Constants.Fields.ARCHIVEDATE) <= DateTime.Now)
                        &&
                        (!string.IsNullOrEmpty(item.Fields[Constants.Fields.ARCHIVEDATE].Value))
                    ).OrderBy(item => item.Fields[Constants.Fields.POSTED_DATE].Value).ToList();

            pnlArchive.Visible = false;
            //pnlCurrent.Visible = true;
            pnlCurrent.Visible = false;
        }
        else
        {
            newsListings = newsItems.Children.Where(item =>
                        (SitecoreUtility.FormatDateAtMidnight(item, Constants.Fields.ARCHIVEDATE) > DateTime.Now)
                        ||
                        (string.IsNullOrEmpty(item.Fields[Constants.Fields.ARCHIVEDATE].Value))
                    ).OrderBy(item => item.Fields[Constants.Fields.POSTED_DATE].Value).ToList();

            //pnlArchive.Visible = true;
            pnlArchive.Visible = false;
            pnlCurrent.Visible = false;
        }
        newsContainer.DataSource = DisplayResults(newsListings.OrderByDescending(item => item.Fields[Constants.Fields.POSTED_DATE].Value).ToList());
        newsContainer.DataBind();
    }

    protected List<Item> DisplayResults(List<Item> results)
    {
        pnlPagination.Controls.Add(new Pager(results.Count, PageSize, CurrentPage).BuildPaging());

        if (CurrentPage > 1)
            return results.Skip((CurrentPage - 1) * PageSize).Take(PageSize).ToList();

        return results.Take(PageSize).ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:05:27.570

我会首先尝试使您的代码更简单（用于调试）并使用快速查询来拉取日期范围内的项目。

```
var date = DateTime.Now.AddMonths(3);
var dateString = date.Year.ToString() + date.Month.ToString().PadLeft(2, '0') +     date.Day.ToString().PadLeft(2, '0');
var newsList = Sitecore.Context.Database.SelectItems("fast:/sitecore/content/home/your-path-to-news/*[@@templatename='Your template name' and @POSTED_DATE > '" + dateString + "']").ToList();
newsList = newsList.OrderByDescending(n => n.Fields["POSTED_DATE"].Value).Take(2).ToList();

newsContainer.DataSource = newsList;
newsContainer.DataBind(); 
```

# ruby-on-rails - Rails 应用程序的 Heroku 日志提供了“要求”：没有要加载的文件——心理 (LoadError)

> ID：14736835
> 
> 赞同：1
> 
> 时间：2013-02-06T19:09:33.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

我将 Rails 3.2 应用程序推送到 Heroku，但出现以下错误：

```
app[web.1]: [2013-02-06 07:39:44] ERROR SignalException: SIGTERM
app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
heroku[web.1]: Stopping remaining processes with SIGKILL
heroku[web.1]: Process exited with status 137
heroku[web.1]: State changed from up to down
heroku[slugc]: Slug compilation started
heroku[api]: Release v13 created by ashley@hybridgroup.com
heroku[api]: Deploy 1800efe by ashley@hybridgroup.com
heroku[web.1]: State changed from down to starting
heroku[slugc]: Slug compilation finished
heroku[web.1]: Starting process with command `bundle exec rails server -p 28816`app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml/psych_handler.rb:1:in `require': no such file to load --psych (LoadError)
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin/engine.rb:11:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin/engine.rb:11:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:59:in `<module:YAML>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin.rb:1:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin.rb:1:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml/psych_handler.rb:1:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:20:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:68:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:59:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:66:in `each'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:55:in `each'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:66:in `block in require'
app[web.1]:   from /app/config/application.rb:8:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:55:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler.rb:128:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:53:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
app[web.1]:   from script/rails:6:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:53:in `block in <top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
app[web.1]:   from script/rails:6:in `<main>'
heroku[web.1]: Process exited with status 1
heroku[web.1]: State changed from starting to crashed
heroku[web.1]: State changed from crashed to starting
heroku[web.1]: Starting process with command `bundle exec rails server -p 27035`
app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml/psych_handler.rb:1:in `require': no such file to load --psych (LoadError)
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:59:in `<module:YAML>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:20:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml.rb:59:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin/engine.rb:11:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin.rb:1:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:68:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/safe_yaml-0.6.3/lib/safe_yaml/psych_handler.rb:1:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin/engine.rb:11:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.4.4/lib/rails_admin.rb:1:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:53:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler.rb:128:in `require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:66:in `each'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:66:in `block in require'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:55:in `each'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.0.pre.5/lib/bundler/runtime.rb:55:in `require'
app[web.1]:   from /app/config/application.rb:8:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:53:in `block in <top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
app[web.1]:   from script/rails:6:in `require'
app[web.1]:   from script/rails:6:in `<main>'
2013-02-06T18:16:38+00:00 heroku[web.1]: Process exited with status 1 
```

我不确定为什么它说 gems 在 Ruby 1.9.1 中，因为当我`ruby -v`输入命令行时，它说我正在使用 Ruby 1.9.2 并且我只安装了该版本的 ruby​​。如果重要的话，我正在使用 Windows。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:46:42.237

您的 Gemfile 是否将 psych gem 作为依赖项？

***例如***

```
gem "psych", "~> 1.3.4" 
```

* * *

Heroku 维护一个非常特殊的堆栈。通过尝试我当前的一个 Heroku 应用程序，我发现我默认也没有 psych。

如果 psych 可用，则将返回以下命令`true`

`heroku run "ruby -e 'puts require \"psych\"'"`

# java - 在 AsyncTask 中捕获 HttpUrlConnection 的错误

> ID：14736848
> 
> 赞同：0
> 
> 时间：2013-02-06T19:10:15.797
> 
> 标签：java, android

我正在寻找一种最佳实践来处理 HttpURLConnection 中的错误，尤其是在主机不可用的情况下。我如何更改我的来源？：

```
 protected String doInBackground(String... strings) {
    URL aURL;
    String line;
    HttpURLConnection connection;
    BufferedReader reader;
    StringBuilder stringBuilder = null;
    try {
        aURL = new URL(strings[0]);
        connection = (HttpURLConnection) aURL.openConnection();

        InputStream aInputStream = connection.getInputStream();
        BufferedInputStream aBufferedInputStream = new BufferedInputStream(aInputStream);

        reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        stringBuilder = new StringBuilder();

        while ((line = reader.readLine()) != null)
        {
            stringBuilder.append(line);
        }

    } catch (IOException e) {
        Log.d("svc", e.toString());
    }
    return stringBuilder.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:16:26.383

您将使用 connection.getResponseCode() 获得不同的响应代码 检查主机不可用的响应代码，您将被设置。

# java - java.lang.ArrayIndexOutOfBoundsException，同时找到素数并用它创建数组

> ID：14736857
> 
> 赞同：0
> 
> 时间：2013-02-06T19:10:48.170
> 
> 标签：java, arrays, exception, loops, indexoutofboundsexception

**目标**- 找到所有的 primeNumbers 并用它创建数组 做了**什么**- 创建了方法 primeReturner - 如果 number prime 则返回 true -

```
 private static boolean primeReturner (int i){
    for (int j=2;j<i; j++){
        if (i%j==0)
            return false;
    }
    return true;
} 
```

created 用素数创建数字的方法

```
 private static void simpleArray()  {
    int []a = new int [100];
    a[0]=1;
    a[1]=2;
    for (int i=2; i<a.length; i++){
        if (primeReturner(i)==true){
            a[i]=i;
            i++;
            }
    }
} 
```

问题 - 我在创建数组期间遇到了一些错误 - 数组 0 中的一些项目和一些正常......有时它返回错误......

**提问- 我的方法 simpleArray 有什么问题**？****

 *** * *

稍微修改一下代码 - 现在它识别所有素数并用它创建数组，但是在将第 100 个项目添加到数组后我得到错误

代码

```
private static void simpleArray()  {
    int []a = new int [100];
    a[0]=1;
    a[1]=2;
    int count=2;
    while (count<100)
    for (int i=3; ; ++i){
        if (primeReturner(i)==true){
            a[count]=i;
            count++;
            }
    }
    for (int j=0; j<a.length; j++){
        System.out.print(" " + a[j]);
    }
}
private static boolean primeReturner (int i){
    for (int j=2;j<i; j++){
        if (i%j==0)
            return false;
    }
    return true;
} 
```

和主要功能公共类Exercise_1 {私有静态int选择；

```
public static void main (String[]args) throws IOException{
    System.out.println("Menu:");
    ....
    System.out.println("Array with simple numbers - enter 7");
    select = getNumber ();

    switch (select){
    .....
    case 7:{
        simpleArray();
    }
    }
} 
```

结果创建了所有具有素数 succsesfull 的数组， ![在此处输入图像描述](../Images/61e5bec9fec7a10275dff4d0569dffbb.png) 但是在打印此数组期间我得到**java.lang.ArrayIndexOutOfBoundsException 错误**...

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:43:12.717

查找错误 - 需要通过添加限制来停止循环所以，最终代码是

```
private static void simpleArray()  {
    int []a = new int [100];
    a[0]=1;
    a[1]=2;
    int count=2;
    while (count<100){
    for (int i=3;**i<524** ; ++i){
        if (primeReturner(i)==true){
            a[count]=i;
            count++;
            }
        }
    }
    for (count=0; count<a.length; count++){
        System.out.print(" " + a[count]);
    }
} 
```

认为 'i<524' 不是最好的变体，稍后会尝试找到更好的东西 =) 谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:13:47.273

你`i++`在你的`if(primeReturner(i)) == true)`街区做。这是对`for`循环的补充`i++`。您很可能会得到一个，`ArrayIndexOutOfBoundsException`因为您的`i`索引将达到大于 100 的值，这是您的数组最大大小。`i++`在`if`块中删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:17:30.330

该错误是由于您使用相同的变量在数组中进行索引（即第 n 个素数的索引）和素数的值引起的。因此，如果索引不是素数，则构造的数组`simpleArray`将具有零值，如果索引是素数，则该值`i`将具有。如果您想要一个完全打包的数组，则需要第二个索引：

```
private static void simpleArray()  {
    int []a = new int [100];
    a[0] = 2; // by definition 1 is not prime
    int i = 1;
    int possible_prime = 3;
    while (i < a.length) {
        if (primeReturner(possible_prime)) {
            a[i++]=possible_prime;
        }
        possible_prime++;
    }
} 
```

有关一的素数的讨论，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Prime_number#Primality_of_one)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:18:49.690

```
 for (int i=2; i<a.length; i++){
        if (primeReturner(i)==true){
            a[i]=i;
            i++;
            }
    } 
```

这就是问题所在...从代码中删除 i++

所以在这里：

```
for (int i=2; i<a.length; i++){
    if (primeReturner(i)==true){
        a[i]=i;
    }
} 
```**

# message - mail.thread Openerp 的函数 message_route 中的错误

> ID：14736858
> 
> 赞同：1
> 
> 时间：2013-02-06T19:10:49.107
> 
> 标签：message, openerp

在我看来，.message_route(...) 的默认行为之一（即第三次尝试获取消息路由：“回退到提供的参数，如果它们有效”）无法正常工作。

它应该将主题解析为 [ID] 之类的表达式，以用作“thread_id”来发布消息。到目前为止，一切都很好。

问题是消息在到达这一点之前（当然）在 .message_parse(...) 中被解析，这使得当以这种方式获取“thread_id”时，我们最终得到一个 unicode-string 而不是所需的#ID 为整数或长整数。

我是对的还是我在这里遗漏了什么？

```
def message_route(self, cr, uid, message, model=None, thread_id=None,
                  custom_values=None, context=None):
[...]
    3\. Fallback to the ``model``, ``thread_id`` and ``custom_values``
       provided.
[...]
# 3\. Fallback to the provided parameters, if they work
    if not thread_id:
         # Legacy: fallback to matching [ID] in the Subject
         match = tools.res_re.search(decode_header(message, 'Subject'))
         thread_id = match and match.group(1)
     assert thread_id and hasattr(model_pool, 'message_update') or hasattr(model_pool, 'message_new'), \
         "No possible route found for incoming message with Message-Id %s. " \
         "Create an appropriate mail.alias or force the destination model." % message_id
     if thread_id and not model_pool.exists(cr, uid, thread_id):
         _logger.warning('Received mail reply to missing document %s! Ignoring and     creating new document instead for Message-Id %s',
                         thread_id, message_id)
         thread_id = None
     _logger.debug('Routing mail with Message-Id %s: fallback to model:%s, thread_id:%s, custom_values:%s, uid:%s',
                   message_id, model, thread_id, custom_values, uid)
     return [(model, thread_id, custom_values, uid)] 
```

# php - 避免数据库中的重复记录

> ID：14736860
> 
> 赞同：1
> 
> 时间：2013-02-06T19:10:58.493
> 
> 标签：php, html, mysql

```
// Check to see if p_name exists
    $sql = mysql_query("SELECT patient_name FROM patient WHERE patient_name = '" . $p_name . "'");
    if (mysql_num_rows($sql) == 0){
       // patient database
       mysql_query("INSERT INTO patient (patient_name)
                   VALUES ( '$p_name' )") or die (mysql_error());
       }
    else
       die ("Patient name exist!"); 
```

为什么即使数据库中存在患者姓名，它仍会插入新记录？

是否`if (mysql_num_rows($sql) == 0)`正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:17:38.010

查询可能由于某种原因而失败。这意味着`$sql`是一个布尔值 FALSE。您尝试将其传递`FALSE`给`mysql_num_rows()`，这也失败了，因为它希望获得结果句柄。这意味着 mysql_num_rows() 也返回一个 boolean `FALSE`。在 PHP 中，`false == 0`is `TRUE`，所以你执行你的插入语句。

**永远不要**假设查询已经成功。**总是**检查失败。这意味着，作为最低限度，你有：

```
$result = mysql_query(...) or die(mysql_error());
                          ^^^^^^^^^^^^^^^^^^^^^^ 
```

# ios - SVG 使用 ios 原生捏合缩放清晰快速，但不使用 3d css 转换

> ID：14736862
> 
> 赞同：1
> 
> 时间：2013-02-06T19:11:07.747
> 
> 标签：ios, svg

嗨，我遇到了一个非常奇怪的问题。请记住，这一切都是在 iPad 3 上使用 iOS 6.1 移动 safari。

所以我有一个包含大约 1500 个对象（简单的对象，如矩形）的大型 SVG 文件。如果我将此 svg 文件直接加载到 safari 中，它会非常快速且响应迅速。我可以非常快速地平移和捏缩放，一切都变得清晰。

但是，这对于我正在创建的网站来说是不够的。我需要能够将 svg 文件加载到 div 中，并且仍然让用户平移和缩放。为此，我添加了一些触摸事件处理程序并使用 3d CSS 转换为 svg 设置动画。它非常适合平移，但是当我放大 svg 时，它开始变得像素化。

这非常令人困惑，因为这两种方法都使用硬件加速，但后者看起来模糊且像素化，而前者没有。

有谁知道这是为什么以及我该如何解决？

谢谢。

仅供参考，这是我将如何平移和缩放 svg：

```
<div style="-webkit-transform: scale3d(4, 4, 1) translate3d(20px, 100px, 0px);">
    <svg version="1.1" width="1024px" height="512px">
        ...
    </svg>
</div> 
```

# javascript - 如何在 Javascript 应用程序中进行冒烟测试和验收测试？

> ID：14736863
> 
> 赞同：3
> 
> 时间：2013-02-06T19:11:09.630
> 
> 标签：javascript, tdd, bdd, acceptance-testing, smoke-testing

我想做一个冒烟测试，以测试我的网络应用程序和服务器本身之间的连接。有人知道怎么做吗？另外我想做一个验收测试来测试我的整个应用程序。你推荐哪个工具？

我的技术栈是：backbone 和 require.js 以及用于 BDD 测试的 jquery mobile 和 jasmine。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:53:44.237

在做 BDD 时，你应该总是嘲笑合作者。测试应该快速运行，并且不依赖于任何外部资源，例如服务器、API、数据库等。

您想要在 fe Jasmine 中创建的方式是声明一个伪装成服务器的间谍。然后，您继续定义间谍在特定场景或示例中的响应。

如果您希望您的应用程序与环境无关，这是最好的方法。这在运行 Jenkins 作业时非常需要 - 围绕作业构建整个基础架构将很难重现。

制作代表服务器的 spy/mock 对象，并在您的规范中定义外部源的行为方式 - 这样您就可以专注于您的应用程序在特定情况下提供的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:50:09.623

我发现了一篇博文，作者解释了如何在 rails 应用程序之外使用 capybara、cucumber 和 selenium，因此可以用来测试 javascript 应用程序。这是链接：[http ://testerstories.com/?p=48](http://testerstories.com/?p=48)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:12:45.103

这不是一个完整的答案，但我们一直在为我们非常相似的堆栈使用的一个工具是[mockJSON](http://experiments.mennovanslooten.nl/2010/mockjson/)。这是一个 jQuery 插件，两者都做得很好：

1.  拦截对 URL 的调用，而是发回模拟数据和
2.  使基于模板生成随机模拟数据变得容易。

最好的部分是它完全是客户端，所以你不需要设置任何外部来获得体面的测试。它不会测试与您的服务器的实际网络连接，但它可以很好地验证您的服务器将回传的数据类型。FWIW，我们使用 Mocha 作为我们的测试框架，并且将它与我们的 BDD 工作集成没有任何问题。

原始的[mockJSON 存储库](https://github.com/mennovanslooten/mockJSON)仍然相当不错，尽管它已经有一段时间没有更新了。我和我的同事一直在尝试通过[我自己的 fork](https://github.com/mikeedwards/mockJSON)中的补丁和功能来保持它的运行。

# android - 交换光标后，带有光标的 FragmentPagerAdapter 不调用 getItem

> ID：14736866
> 
> 赞同：0
> 
> 时间：2013-02-06T19:11:16.047
> 
> 标签：android, fragmentpageradapter

我创建了 FragmentPagerAdapter，它使用由 Loader 加载的 Cursor。每次数据库中有新内容时，Loader 都会将光标加载到 Activity 中，然后我在 FragmentPagerAdapter 和`notifyDataSetChanged()`.

但是我遗漏了一些东西，因为没有人再次调用 Adapter 的 getItem 方法，所以没有任何变化。

基本上，新光标在位置 0 中包含一条新记录。如果我正在查看位置 0，我希望在该位置出现一个新的 Fragment .. 其余部分向右移动......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:54:36.963

好的，因为我一直在寻找带有 Cursor 的 FragmentPagerAdapter 我找不到并回答，但它实际上已经在这里回答了[Update ViewPager dynamic?](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)

# php - Zend_Form_Element_File 和“文件超出定义的 ini 大小”问题

> ID：14736870
> 
> 赞同：2
> 
> 时间：2013-02-06T19:11:39.133
> 
> 标签：php, zend-form, zend-form-element

我正在使用 Zend_Form_Element_File 来验证某些文件属性。有问题的文件输入元素是动态创建的 - 即。它可以是形式，但不需要；但是，如果是，并且文件已通过它提交，则它需要满足某些标准。

当表单不包含文件元素时，我遇到了“文件超出定义的 ini 大小”问题。这是预期的行为吗？

请记住，FormUpload 应该验证两个表单元素。我可以使用不同的 Zend_Forms，这取决于 $_FILES 数组是否为空，但感觉是一个糟糕的解决方案，因为 Zend_Form 应该为我验证数据/数据字段。

复制问题的代码：

```
<?php

class FormUpload extends Zend_Form
{
    public function init()
    {
        $upload = new Zend_Form_Element_File('upload');
        $upload->setRequired(false);
        $this->addElement($upload);
    }
}

var_dump($_POST, $_FILES);
if (!empty($_POST))
{
    $form = new FormUpload();

    if ($form->isValid($_POST))
    {
        $values = $form->getValues();
        var_dump($values);
    }
    else
        var_dump($form->getMessages());
}

?>

<form method='post' enctype="multipart/form-data">
    <input type='hidden' name='something' value='something'/>
    <input type='submit' value='submit'/>
</form>

<form method='post' enctype="multipart/form-data">
    <input type='file' name='upload'/>
    <input type='submit' value='submit'/>
</form> 
```

* * *

我将其视为错误-解决此问题的方法是**始终**使用经过验证的名称的输入字段；否则会出现这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T10:10:03.730

正如我在编辑中所说：我将其视为一个错误 - 这个问题的解决方案是始终拥有一个带有经过验证的名称的输入字段；否则会发生此错误（与问题无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T06:11:11.397

这是您可以添加以覆盖 Zend_Form 的 isValid() 方法的解决方法。那里有一个合法的错误，当没有文件上传时会产生相同的错误，但它仍然会尝试验证。也许这会帮助那里的人。

```
public function isValid($data) {
    $valid = parent::isValid($data);

    $errorCount = 0;
    foreach($this->getElements() as $elem) {

        if ($elem->hasErrors()) {
            $errorCount++;
        }

        // Related issues:
        // http://framework.zend.com/issues/browse/ZF-12159
        // http://framework.zend.com/issues/browse/ZF-10279
        // http://framework.zend.com/issues/browse/ZF-12189 

        if ($elem instanceof Zend_Form_Element_File && !$elem->isRequired() && !isset($_FILES[$elem->getName()]) && $elem->hasErrors()) {
            $elem->clearErrorMessages();
            $elem->setTransferAdapter( 'Http' ); // reset any errors that may be on the transfer adapter
            $errorCount--;
        }
    }

    if ($this->_errorsForced) {
        return false;
    }

    if ($errorCount==0) {
        $this->_errorsExist = false;
    }

    return $errorCount==0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T11:38:19.217

您应该`upload_max_filesize = 10M`在 php.ini 中进行更改（不仅在 Zend 中）。例如，您可以通过右键单击 wamp/php/php.ini 在 Wamp 中访问此文件。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:18:03.557

Zend_Form_Element_File 将最大文件大小添加到 post_max_size。如果设置了upload_max_filesize，它将设置为该值。

要改变你需要：

```
$upload->setMaxFileSize($newSize); 
```

但是如果设置或 post_max_size upload_max_filesize 未设置，您可以使用的较大大小是upload_max_filesize。

要更改这些，请编辑您的 php.ini 或 .htaccess。

# android - 通过方向更改保持选定的 NavigationItem

> ID：14736871
> 
> 赞同：3
> 
> 时间：2013-02-06T19:11:44.157
> 
> 标签：android, android-actionbar, navigationitem

我通过 ActionBar NavigationMode (DROP_DOWN_LIST) 为 Android 3+ 设备实现了视图导航。

```
 getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

      SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.action_list, android.R.layout.simple_spinner_dropdown_item);

      getActionBar().setListNavigationCallbacks(mSpinnerAdapter, new OnNavigationListener() {
          @Override
          public boolean onNavigationItemSelected(int index, long arg1) {
              if(index == 0)
                  selectHomeView();
              else
                  selectMainView();

              return true;
          }
      }); 
```

这可以按预期工作，但是在方向更改时，会再次调用 onNavigationItemSelected 并使用 index = 0，将我的 Activity 返回到第一个视图。

我怎样才能保持这种状态？并且不要让 onNavigationItem 被索引为 0 的 onCreate 调用？

编辑：

在基里尔回答之后，可以存储当前的 inedx，但是有第三个视图不能通过 NavigationList 选择，如果我在 onCreate 之后不调用 setNavigationItemSelected，它将自动触发 index = 0，将应用程序返回到第一个看法。

这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:18:25.813

您可以扩展以下功能，只要活动的状态可能丢失，就会执行该功能，

```
@Override    
protected void onSaveInstanceState(Bundle savedInstanceState) {   
    super.onSaveInstanceState(savedInstanceState);
    // Save the state of the drop down menu
    savedInstanceState.putInt("selectedIndex",mDropMenu.getSelectedIndex());
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
   super.onRestoreInstanceState(savedInstanceState);
   // Restore the state of the drop down menu
   mDropMenu.setSelectedIndex(savedInstanceState.getInt("selectedIndex"));
} 
```

请注意，mDropMenu 应该替换为您的对象，并且您应该在其上使用适当的方法

# php - 如何将 JSON 数组插入 Mysql？

> ID：14736880
> 
> 赞同：0
> 
> 时间：2013-02-06T19:12:09.573
> 
> 标签：php, mysql

我寻找例子来解决我的问题，但我很困惑。如果我有一个这样的 json 数组：

```
$json = '{"a":"test","b":"test2"},{"a":"test3","b":"test4"}';

//decode to get as php variable
$obj = json_decode($json); 
```

我的问题是当我尝试在数据库中插入值时

```
mysql_query("INSERT INTO suspiciousactivity (ID,Notes)
VALUES ('".$obj->{'a'}."','".$obj->{'b'}."')")or die(mysql_error()); 
```

我收到此错误：`duplicate entry for key PRIMARY`

如何将多个值从我的数据库插入`JsonArray`到我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:17:18.957

尝试使用：

```
$json = '{"a":"test","b":"test2"},{"a":"test3","b":"test4"}';

//decode to get as php variable
$arr = json_decode($json,true); //true to decode as a array not an object

mysql_query("INSERT INTO suspiciousactivity (ID,Notes)
VALUES ('".$arr[0]['a']."','".$arr[0]['b']."')")or die(mysql_error());
//use it as an array. 
```

# zend-framework - 如何忽略 Zend_DB 表保存中创建的列？

> ID：14736886
> 
> 赞同：0
> 
> 时间：2013-02-06T19:12:17.853
> 
> 标签：zend-framework, zend-db, zend-db-table

我将如何忽略 Zend_DB save() 尝试填写创建的列？对于某个模型，我不需要该列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:44:13.267

不要发送数据。`save()`是`Zend_Db_Table_Row`api 的一部分，被设计成在将数据保存到一行的方式上有点智能。它将根据需要执行插入或更新行。

`save()`也只会更新它有数据的列。如果您不为创建的列发送新数据，`save()`则不会覆盖数据。

只要有可能，我就让我正在使用的数据库创建和更新创建和更新的列。这样我就可以在需要时查询信息，但我不必使用 PHP 做一些我的数据库可以做得更好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:53:37.197

Check out [http://framework.zend.com/manual/1.12/en/zend.db.table.html](http://framework.zend.com/manual/1.12/en/zend.db.table.html) Section "Advanced usage".

> For more specific and optimized requests, you may wish to limit the number of columns returned in a row or rowset. This can be achieved by passing a FROM clause to the select object. The first argument in the FROM clause is identical to that of a Zend_Db_Select object with the addition of being able to pass an instance of Zend_Db_Table_Abstract and have it automatically determine the table name.
> 
> **Important**
> 
> The rowset contains rows that are still 'valid' - they simply contain a subset of the columns of a table. If a save() method is called on a partial row then only the fields available will be modified.

So, if you called an update() I think it would be as simple as unsetting the value for the column you don't want to touch. Of course database constraints will need to be honored - i.e. column should allow nulls.

# image-processing - 用于 3D 重建的图割算法类型

> ID：14736887
> 
> 赞同：4
> 
> 时间：2013-02-06T19:12:19.977
> 
> 标签：image-processing, computer-vision, 3d-reconstruction

我已经阅读了几篇关于使用**图形切割**进行**3D 重建**的论文，我注意到似乎有两种替代方法可以解决这个问题。

一种方法是体积方法，它描述了体素的 3D 区域，图切割用于推断每个体素的二进制标记（包含或不包含感兴趣的对象）。采用这种方法的论文包括[Multi-View Stereo via Volumetric Graph Cuts and Occlusion Robust Photo-Consistency](http://mi.eng.cam.ac.uk/%7Ecipolla/publications/article/2008-PAMI-volumetric-graphcuts.pdf)和[A Surface Reconstruction Using Global Graph Cut Optimization](http://people.csail.mit.edu/sparis/publi/2006/ijcv/Paris_06_Graph-cut.pdf)。

第二种方法是 2D 的，它试图用投影到那里的 3D 点的深度来标记参考图像的每个像素。采用这种方法的论文包括[Computing Visual Correspondence with Occlusions via Graph Cuts](http://www.cs.cornell.edu/rdz/Papers/KZ-ICCV01-tr.pdf)。

我想了解每种方法的优点/缺点，以及在选择使用哪种方法时最重要的。到目前为止，我了解第一种方法的一些优点是：

1.  这是一个二元问题，因此完全可以使用 Max-Flow 算法解决。
2.  提供简单的遮挡建模方法。

第二种方法的一些优点是：

1.  图的每个节点的较小邻居集。
2.  更容易建模平滑度（但它会提供更好的结果吗？）。

此外，我会对选择一种或另一种表示方式更好的情况以及原因感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T15:36:34.167

最显着的区别是算法通常使用**的场景类型，以及****它们表示对象 3D 形状**的方式。

**体积方法**表现最好...

1.  有大量的图像...
2.  从不同的角度拍摄，很好地分布在物体周围，...
3.  或多或少紧凑的“对象”（例如，与例如由车载摄像机观察到的室外场景形成对比的人工制品）。

体积方法在重建“对象”（尤其是人工制品）方面很受欢迎。给定足够的视图（即图像），算法给出对象形状的完整体积（即体素）表示。可以使用 Marching Cubes 或类似方法将其转换为表面表示。

您确定的第二种算法称为**立体算法**，图切割只是解决此类问题的众多方法之一。立体声最好...

1.  如果你只有两张图片...
2.  具有相当窄的基线（即相机之间的距离）

存在对多于两个图像（具有窄基线）的概括，但大多数文献都涉及双目（即两个图像）的情况。一些算法比其他算法更容易泛化到更多视图。

立体算法只给你一个深度图，即每个像素都有一个深度值的图像。这不允许您“环顾”对象。然而，有一些 3D 重建系统从图像对上的立体图像开始并结合深度图以获得完整对象的表示，这本身就是一个不平凡的问题。有趣的是，这通常使用体积表示作为中间步骤来解决。

立体算法可以并且经常用于“场景”，例如车辆中的一对摄像头观察到的道路，或者房间中的人进行 3D 视频会议。

**一些结束语**

*   对于立体和体积重建，图切割只是解决问题的几种方法之一。例如，立体也可以表述为连续优化问题，而不是离散问题，这意味着其他优化方法可以解决其问题。
*   我的回答包含一堆概括和简化。它并不意味着是对该主题的明确处理。

我不一定同意立体声情况下的平滑度更容易。你为什么这么认为？

# mysql - 带有总和或列的sql查询

> ID：14736890
> 
> 赞同：4
> 
> 时间：2013-02-06T19:12:36.480
> 
> 标签：mysql, sql, oracle10g

我有一个表 color_balls 条目如下

```
=====================================================
Name    Red_Ball    Green_Ball  Yellow_Ball     
=====================================================
John       27           56          66
Mathew     37           45          15
===================================================== 
```

我想编写一个 sql 或 mysql 查询来获得如下输出。

```
=====================================
Color_of_Balls      No_of_balls
=====================================
Red_Ball            64
Green_Ball          101
Yellow_Ball         81
===================================== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:19:18.607

这种类型的查询称为 UNPIVOT，不幸的是 MySQL 本身并不支持这种查询。但是，您可以使用 UNION 进行模拟：

```
SELECT 'Red_Ball' AS Color_of_Balls, SUM(Red_Ball) as No_of_Balls
FROM color_balls
UNION ALL
SELECT 'Green_Ball', SUM(Green_Ball)
FROM color_balls
UNION ALL
SELECT 'Yellow_Ball', SUM(Yellow_Ball)
FROM color_balls 
```

Oracle10g 本身也不支持这个，虽然有[这个解决方法](http://www.bobjankovsky.org/show.php?seq=97)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:37:44.513

这应该适用于 Oracle 和 MySQL：

```
SELECT b.Color_of_Balls
     , CASE b.Color_of_Balls 
         WHEN 'Red_Ball'    THEN d.sum_red_ball
         WHEN 'Green_Ball'  THEN d.sum_green_ball
         WHEN 'Yellow_Ball' THEN d.sum_yellow_ball
       END AS No_of_balls
  FROM ( SELECT 'Red_Ball' AS Color_of_Balls FROM DUAL 
         UNION ALL SELECT 'Green_Ball' FROM DUAL
         UNION ALL SELECT 'Yellow_Ball' FROM DUAL
       ) b
 CROSS
  JOIN ( SELECT SUM(c.Red_Ball)    AS sum_red_ball
              , SUM(c.Green_Ball)  AS sum_green_ball
              , SUM(c.Yellow_Ball) AS sum_yellow_ball
           FROM color_balls c
       ) d
 ORDER
    BY CASE b.Color_of_Balls 
         WHEN 'Red_Ball'    THEN 1
         WHEN 'Green_Ball'  THEN 2
         WHEN 'Yellow_Ball' THEN 3
       END 
```

请注意，这种方法只需要一次遍历`color_balls`表，而不是三次单独遍历表（或更多，取决于您需要返回多少行。）

# ant - 如何使用模式集过滤文件列表？

> ID：14736891
> 
> 赞同：4
> 
> 时间：2013-02-06T19:12:39.477
> 
> 标签：ant

这似乎应该是显而易见的，但我认为不是。鉴于：

*   以空格分隔的文件列表（或逗号分隔等）
*   列入白名单的`<patternset>`模式

我如何想出一个`<fileset>`包含列表中与白名单模式匹配的所有文件的文件？

从列表中获取文件列表很容易：

```
<patternset id="the-patternset" 包括="${list.of.files}" />
<fileset id="the-fileset" dir="${basedir}">
    <patternset refid="the-patternset" />
</文件集>
<pathconvert pathsep="${line.separator}" property="the-filelist" refid="the-fileset"/>
<echo>文件集：${the-filelist}</echo>

```

…会很高兴地生成一个文件集，其中包含`${list.of.files}`. 但添加各种过滤器：

```
<patternset id="the-filter">
    <include name="includeme/**/*.java" />
    <exclude name="excludeme/**/*.java" />
</模式集>

<patternset id="the-patternset" 包括="${list.of.files}" />
<fileset id="the-fileset" dir="${basedir}">
    <patternset refid="the-patternset" />
    <patternset refid="the-filter" />
</文件集>
<pathconvert pathsep="${line.separator}" property="the-filelist" refid="the-fileset"/>
<echo>文件集：${the-filelist}</echo>

```

…将列出模式集的并集——即所有匹配`the-filter` *或* `the-patternset`的文件。

如何生成一个文件集，其中包含`${list.of.files}` *匹配*的文件`the-patternset`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:55:43.810

这是一个盆栽的例子。从您的每个模式集中创建两个文件集（或者可能是文件列表）。我将在这里使用固定列表：

```
<property name="list.1" value="a,b,c" />
<property name="list.2" value="b,c,d" />

<fileset dir="." id="set.1" includes="${list.1}" />
<fileset dir="." id="set.2" includes="${list.2}" /> 
```

然后使用[`<intersect>`](http://ant.apache.org/manual/Types/resources.html#intersect)资源集合获取所需的“重叠”集：

```
<intersect id="intersect">
    <resources refid="set.1"/>
    <resources refid="set.2"/>
</intersect> 
```

大多数 Ant 任务将允许您使用资源集合来代替简单的文件集。

# command-line-interface - 控制台rouglike界面设计大纲

> ID：14736894
> 
> 赞同：1
> 
> 时间：2013-02-06T19:12:52.317
> 
> 标签：command-line-interface, ncurses, roguelike

我正在寻找一种按照 rougelike 模式（从Eric S. Raymond*的 The Art of Unix Programming*借用的术语）组织界面的方法，它基本上类似于 vim、链接等。我选择带有 ncurses 和 cdk 的 C++ .

我已经[看过 wicd-curses](http://wicd.sourceforge.net/)的来源（wicd 的rougelike 界面）。有一个处理击键和调用动作的主窗口对象。如果打开了一个新屏幕（例如，选项屏幕），则主窗口将击键委托给适当的 OptionsWindow 对象。视图部分与应用程序的控制器部分混合在一起。

我真的很想知道 rougelike 应用程序界面的正确设计。如何组织我的屏幕（窗口）？我应该在哪个组件中处理击键？所有窗口共有的东西（移动焦点等）呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:15:09.070

一本很好的书是[Using C With Curses, Lex, and Yacc: Building a Window Shell for Unix System V by Axel-Tobias Schreiner](https://rads.stackoverflow.com/amzn/click/com/0139328645)（也是 C 中面向对象编程的作者，[链接](http://www.cs.rit.edu/~ats/)）。

# jquery - 为什么我从这个 jquery 得到 javascript:unrecognized 表达式？

> ID：14736895
> 
> 赞同：0
> 
> 时间：2013-02-06T19:12:53.250
> 
> 标签：jquery

这是我的 jQuery 代码：

```
$('.ajax_modal a').not('.popup').live('click', function(e){

//do something

 }); 
```

当我单击锚点 a.popup 时，我希望什么都不会发生：

```
<div class="ajax_modal">
<a class="popup">Should do nothing</div>
<a class="something">Should do something<a>
</div> 
```

相反，我收到以下错误，这破坏了我的页面：

**错误：语法错误，无法识别的表达式：.ajax_modal a.not(.popup)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:15:28.603

`.live()`不适用于链式遍历方法。

将其更改为

```
$('.ajax_modal a:.not(.popup)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:18:59.543

**1：**标签没有正确关闭。

```
<div class="ajax_modal">
  <a class="popup">Should do nothing</div>
  <a class="something">Should do something<a>
</div> 
```

应该：

```
<div class="ajax_modal">
  <a class="popup">Should do nothing</a> <!-- changed from </div> -->
  <a class="something">Should do something</a> <!-- changed from <a> -->
</div> 
```

**2：**你最好使用**[`:not()`](http://api.jquery.com/not-selector/)而不是`.not()`**如下所示：

```
$('.ajax_modal a:not(".popup")').on('click', function(e){
   console.log(this);
}); 
```

**3：**最后，`live`已被弃用。所以**用来[`on`](http://api.jquery.com/on/)绑定事件**。

**[例子](http://jsfiddle.net/ChaseWest/buLTs/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:19:25.317

可能是因为您的“弹出”超链接是用标签而不是标签关闭的。同样，“某事”超链接没有正确关闭。另外值得注意的是：一些浏览器抱怨没有在超链接标签中包含“href”属性，所以至少添加`href="#"`它们。

# jquery - 如何使用 jquery 在 html5 中创建隐藏和显示导航栏？

> ID：14736898
> 
> 赞同：0
> 
> 时间：2013-02-06T19:13:11.200
> 
> 标签：jquery, html, navigationbar

我正在创建一个移动时尚杂志应用程序，我想创建一个导航栏按钮，以便当人们按下按钮时显示导航，再次按下时导航栏隐藏。像这个例子 [http://www.youtube.com/watch?v=mg1WkjJgfEU](http://www.youtube.com/watch?v=mg1WkjJgfEU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:19:20.317

据我了解，最简单的方法是为按钮单击/触摸事件添加切换，例如：

```
<... onclick="$('#navigation_bar').toggle()"> 
```

[您可以在此处](http://api.jquery.com/toggle/)阅读有关 jquery 切换的信息

# iphone - iphone：缩放表格单元格中的图像

> ID：14736903
> 
> 赞同：0
> 
> 时间：2013-02-06T19:13:34.620
> 
> 标签：iphone, uitableview, size, image-scaling

我正在使用 UITableViewCellStyleSubTitle。我正在尝试将缩略图添加到我的表格单元格中。UIViewContentModeScaleAspectFit 似乎无法正常工作，原因不明。我在堆栈溢出中看到了很多类似问题的答案。如果我使用 drawInRect 裁剪图像，它可以工作，就像这样

```
[thumbnail drawInRect:thumbnailRect];
UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

但我想要达到的目标不应该需要我这样做。我只是想缩放图像而不是裁剪它。因此，将默认单元格的图像视图的内容模式设置为“UIViewContentModeScaleAspectFit”应该可以工作..但它没有。

```
cell.imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

设置缩略图的完整逻辑.. fPath 是图像的路径

```
UIImage *thumbnail = [UIImage imageWithContentsOfFile:fPath];
[cell.imageView setImage:thumbnail];
cell.imageView.contentMode = UIViewContentModeScaleAspectFit;
cell.imageView.clipsToBounds = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:42:21.187

我发现 drawInRect 如果尺寸较小则拉伸原始图像，如果尺寸较大则裁剪它。

本文将帮助您准备图像的缩略图 [http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

它有几个有用的 UIImage 类扩展： * UIImage+Resize * UIImage+Alpha * UIImage+RoundedCorner

示例用法：

> UIImage *imageThumb = [YourImage thumbnailImage:70 transparentBorder:0 cornerRadius:10 interpolationQuality:kCGInterpolationHigh];

然后你可以使用 drawInRect 方法。如果图像不是矩形 - 图像将裁剪较大的一侧并取图像的中间

希望这个答案能指导你。

# c++ - SFML 将 OpenGL 绘制到多个窗口非常慢

> ID：14736904
> 
> 赞同：0
> 
> 时间：2013-02-06T19:13:36.057
> 
> 标签：c++, performance, sfml, frame-rate

情况如下：

我有 4 个 SFML 窗口，它们位于我构建的容器内。容器为每个窗口调用独立的重绘方法，从第一个窗口开始，到最后一个窗口结束。

如果每个窗口的绘图代码都包含`drawMyCube()`OR行`glClear(...)`，那么帧速率就会变慢。

`drawMyCube()`只是绘制一个立方体，它根据 sf::Clock 对象的值旋转。

如果一个窗口调用（其中任何一个）这些函数，则帧速率约为 60fps。如果两个窗口调用（其中任何一个）这些函数，则帧速率约为 30fps。如果三个窗口调用（其中任何一个）这些函数，则帧速率约为 20fps。最后，如果所有四个调用（其中一个）这些函数，则帧速率约为 15fps。

这看起来像是一种正在出现的模式，所以我尝试从 3 个窗口中删除函数，并从一个窗口调用它们 10 次。我原本预计帧速率约为 6fps，但仍保持在 60。

有谁知道为什么会这样？如果我从窗口绘图方法中删除任何其他功能，似乎没有任何效果，例如，`gluLookAt()`似乎不会减慢速度。

编辑：帧速率限制设置为零，vsync 为假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:18:05.397

这听起来就像垂直同步。您的每个窗口都在等待垂直刷新，这就是您的费率不断减半的原因。

我知道您说 vsync 已关闭，但您的视频驱动程序可能正在强制它。检查您的驱动程序设置。

# c# - Win32_Process 在远程计算机上创建，目标在共享上

> ID：14736905
> 
> 赞同：2
> 
> 时间：2013-02-06T19:13:36.317
> 
> 标签：c#, wmi

我正在尝试从位于远程计算机上的共享（指向另一台计算机）上的 ASP.NET 网站执行程序。这是配置的样子

网站服务器=>计算机A（带有指向的共享）=>计算机B（exe在这里）

如果我为 processName z:\tools\bin\myprogram.exe 传递以下参数，我会得到一个找不到路径的返回码。如果我为进程名称 \\computerB\tools\bin\myprogram.exe 传递以下参数，则会收到拒绝访问错误。

```
private static int CreateRemoteProcess(string serverName, string username, string password, string processName, params string[] arguments)
{
    var connection = new ConnectionOptions
    {
        Username = username,
        Password = password
    };

    var scope = new ManagementScope(@"\\" + serverName + @"\root\cimv2", connection);
    using (var managementClass = new ManagementClass(scope,
                                                    new ManagementPath("Win32_Process"),
                                                    new ObjectGetOptions()))
    {
        var inputParams = managementClass.GetMethodParameters("Create");
        if (arguments != null)
        {
            foreach (var param in arguments)
            {
                processName += " " + param;
            }
        }

        inputParams["CommandLine"] = processName;
        var outParams = managementClass.InvokeMethod("Create",
                                                     inputParams,
                                                     new InvokeMethodOptions());
        outParams = managementClass.InvokeMethod("Create", inputParams, null);
        var ret = Convert.ToInt32(outParams["ReturnValue"]);
        return Convert.ToInt32(outParams["ProcessId"]);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T09:20:26.527

不要传递驱动器号，而是使用完整的 UNC 路径。

Z：驱动器是未知的，并且没有为您使用“用户名”变量传递的用户映射。（你可能认为是但不是）

# vb.net - VB.NET 无法在命令提示符下运行影子命令

> ID：14736907
> 
> 赞同：0
> 
> 时间：2013-02-06T19:13:43.997
> 
> 标签：vb.net, command-line, command, process.start

我正在尝试从我的 VB 程序中运行 cmd.exe 中的影子命令，但由于某种原因它不会运行该命令，我尝试了一些不同的方法，但都没有奏效。我能够将命令保存到批处理文件中，然后成功执行，但我更愿意将参数/命令直接传递给命令提示符并以这种方式执行。基本上，我有一个用户运行我创建的另一个程序来提取 sessionid 和服务器名称（然后我只需将服务器编号从末尾取出）。他们得到一个 4 位数的密码，基本上前两个是 sessionid，后两个是服务器号（我们所有的服务器都被命名为 smdts-（一个数字）所以我只关心他们在什么服务器号上）然后我拿四位数代码并将其插入我的影子管理程序。这是我当前**没有的代码**工作：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim SessId As String
    Dim PassCode As String
    Dim ServNum As String
    Dim Prc As Process

    PassCode = TextBox2.Text
    SessId = PassCode.Substring(0, 2)
    ServNum = PassCode.Substring(PassCode.Length - 2)
    Dim fileargs As String = " shadow" + " " & SessId + " " + "/server:smdts-" + ServNum

    Dim Pinfo = New System.Diagnostics.ProcessStartInfo
    Pinfo.FileName = "cmd.exe"
    Pinfo.Arguments = fileargs
    Pinfo.ErrorDialog = False
    Pinfo.UseShellExecute = False
    Pinfo.CreateNoWindow = False
    Pinfo.WindowStyle = ProcessWindowStyle.Normal
    Pinfo.RedirectStandardOutput = False
    Pinfo.RedirectStandardInput = True
    Pinfo.RedirectStandardError = False

    Prc = New Process
    Prc.StartInfo = Pinfo
    Prc.Start()

End Sub 
```

什么工作（我不想使用的批处理文件）：

```
Public Class Form1
Public pathvar As String = Environment.GetFolderPath(Environment.SpecialFolder.Personal)

    Dim SessId As String
    Dim PassCode As String
    Dim ServNum As String

    PassCode = TextBox2.Text
    SessId = PassCode.Substring(0, 2)
    ServNum = PassCode.Substring(PassCode.Length - 2)
    Dim fileargs As String = " shadow" + " " & SessId + " " + "/server:smdts-" + ServNum

    Dim Streamwriter As StreamWriter
    Streamwriter = File.CreateText(pathvar + "\ShadowBatch.bat")
    Streamwriter.WriteLine(fileargs)
    Streamwriter.Close()
    Shell(pathvar + "\ShadowBatch.bat")
End Sub 
```

任何关于为什么第一个示例不起作用的帮助将不胜感激！谢谢！

汤姆·K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:17:22.507

您将`shadow ...`作为参数传递给 CMD。
CMD 不支持。

相反，您需要传递`/c shadow ...`，这将告诉 CMD 执行该命令并退出。

或者，您可以`shadow`直接运行，而无需通过 CMD。

# algorithm - 从给定的节点度构造一个图

> ID：14736909
> 
> 赞同：3
> 
> 时间：2013-02-06T19:13:47.433
> 
> 标签：algorithm, graph

我必须找出以下哪个值可以是具有 6 个顶点的无向图的度数：

a) 3 2 2 2 3 3
b) 4 2 2 2 3 2
c) 5 2 2 2 0 3
d) 5 2 2 2 1 2

我发现的唯一方法是尝试在一张纸上绘制图表，然后检查是否可行。如果可能的话，我只需要一个提示来启动这个问题，而不是绘制每个图表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T19:41:37.597

以下算法决定是否可以使用给定的节点度构造一个简单的图：

1.  按降序排列度数

2.  如果第一个度数是 0（即所有度数都是 0），那么显然可以形成这样的图（没有边），你就完成了。

3.  如果第一个度数具有值`d`（> 0），则以下`d`度数必须大于 0。如果不是，则完成：无法形成这样的图。

4.  去掉第一个度数（值`d`）并将以下`d`度数减少一个（即，从度数最高的节点到其余节点中度数最高的节点绘制所请求的边数 - 请参阅下面的证明以了解该假设的正确性），然后继续第 1 步（现在少一个节点）

示例a）（可以因为权重的奇数和而被拒绝，但上述算法也有效）

```
3 2 2 2 3 3
3 3 3 2 2 2
  2 2 1 2 2
  2 2 2 2 1
    1 1 2 1
    2 1 1 1
      0 0 1
      1 0 0
        -1   not possible 
```

示例 c)

```
5 2 2 2 0 3
5 3 2 2 2 0
  2 1 1 1 -1   not possible 
```

示例 d)

```
5 2 2 2 1 2 
5 2 2 2 2 1
  1 1 1 1 0
    0 1 1 0
    1 1 0 0
      0 0 0  ok 
```

缺少的是一个证明，如果一个图可以用给定的节点度来绘制，那么其中一个匹配图具有步骤 4 的这个属性，即具有最高度的节点与具有次高度的节点连接。

因此，让我们假设它`A`是度数最高的节点，并且它与`B`度数小于`C`未连接到 A 的节点度数的节点连接。因为`degree(B) > 0`我们知道`degree(C) > 1`。因此有另一个节点`D`连接到`C`。所以我们有了边`AB`，`CD`我们可以用 eges 替换它，`AC`而`BD`不用改变节点的度数。

通过重复此过程足够多次，我们可以使具有次高度数的所有节点都连接到具有最高度数的节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T04:28:16.447

在这种情况下，[握手引理](http://en.wikipedia.org/wiki/Handshaking_lemma)或度求和公式是充要条件，因为我们只关心它是否形成了一个无向图（边的方向无关紧要，但没有提到循环或平行边）。因此，选项 c 和选项 d 是有效的 6 顶点无向图。

如果问题要求*简单*的无向图（不允许循环和平行边），那么我们需要引入[Havel/Hakimi](http://en.wikipedia.org/wiki/Degree_%28graph_theory%29#Degree_sequence)的算法，如 @coproc 所述。

# c# - 依赖注入还是服务定位？

> ID：14736910
> 
> 赞同：2
> 
> 时间：2013-02-06T19:13:47.907
> 
> 标签：c#, language-agnostic, loose-coupling, service-locator

我正在尝试学习依赖注入，但我还没有掌握许多微妙之处。为此，我开始阅读的其中一本书是Karl Seguin 的*《[编程基础](http://codebetter.com/karlseguin/2008/06/25/foundations-of-programming-ebook/)》*。有一个关于依赖注入的例子：

```
public class Car
{
    private int _id;

    public void Save()
    {
        if (!IsValid())
        {
            //todo: come up with a better exception
            throw new InvalidOperationException("The car must be in a valid state");
        }

        IDataAccess dataAccess = ObjectFactory.GetInstance<IDataAccess>();
        if (_id == 0)
        {
            _id = dataAccess.Save(this);
        }
        else
        {
            dataAccess.Update(this);
        }
    } 
} 
```

然后他继续建议添加另一个间接级别，而不是`ObjectFactory`直接在方法中调用：

```
public static class DataFactory
{
    public static IDataAccess CreateInstance
    {
        get
        {
            return ObjectFactory.GetInstance<IDataAccess>();
        }
    }
} 
```

但这不是*“服务位置”*吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:32:46.700

它是服务定位器。有几种使用依赖的方法：

*   聚合（示例）

*   作品

    *   构造函数中的 DI，强制（可以在上层使用 SL 注入）

    *   属性中的 DI，可选（可以在上层使用 SL 注入）

选择什么取决于许多因素，例如它是稳定依赖还是不稳定依赖，是否需要在测试中模拟它等等。Mark Seemann 有一本关于 DI 的好书，名为“.NET 中的依赖注入”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:23:20.140

是的，对我来说看起来像 SL。依赖注入传统上遵循两种模式之一；属性注入或构造函数注入。

依赖注入一开始感觉比服务位置更努力，但服务位置 (SL) 有许多负面影响。使用服务定位器太容易了，不能随心所欲地疯狂请求服务，到处都是。这很好，直到你去重构并意识到耦合“太高了”。

对于 DI，我更喜欢构造函数注入形式，因为它迫使我预先考虑谁需要什么。

总而言之，我目前的项目是作为一个使用服务定位器的绿地项目开始的，因为它给了我“不”考虑依赖关系并让应用程序形状发展的灵活性。最近我一直在重构以使用 DI，主要是为了了解什么依赖于什么以及为什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:53:05.797

您的示例是 ServiceLocator。总有一个 ServiceLocator 某处。我想说关键是要理解为什么你会直接使用它，以及为什么理想情况下你可能不必这样做。

关键概念是依赖倒置原则。依赖注入和控制框架的反转是促进主体应用的工具。理想情况下，您希望您的对象构造函数参数是将在对象创建时解析的接口定义。

如果您使用的是现代工具，例如 asp.net MVC，那么您可以访问所谓的组合根，它是应用程序的入口点。在 MVC 中它是控制器。由于您可以访问组合根目录，因此您不需要使用 ServiceLocator，因为注入是由您注册和设置的 IOC 框架从顶部为您驱动的。基本上，您的控制器具有像 ISomeService 这样的构造函数参数，这些参数在 IOC 中注册并在创建控制器实例时自动注入。如果 ISomeService 有一些依赖关系，它们也将作为 ISomeUtility 在构造函数中，以此类推，因为您的对象越来越深。这是理想的，您永远不需要使用 ServiceLocator 来解析对象。

如果您使用的技术不允许您访问根目录，或者如果您想在没有 IOC 框架的应用程序中开始使用它并且您是第一次添加它，那么您可以发现你无法进入作文根目录。这可能是框架或代码质量的限制。在这些情况下，您必须使用 ServiceLocator 或自己直接创建对象。在这些情况下，使用 ServiceLocator 是可以的，并且比自己创建该对象更好。

# ios - 从 Nib 加载多个自定义单元格

> ID：14736913
> 
> 赞同：0
> 
> 时间：2013-02-06T19:14:04.670
> 
> 标签：ios, objective-c, xcode

如果我只返回 1 行单元格，这将非常有效。但是，如果我输入超过 1 个，我会收到错误消息：“索引 1 超出范围 [0 .. 0]”

我制作了一个 xib 文件，其中包含一个具有独特设计的表格单元格，我只想一遍又一遍地使用它，只更改一些标签。我会以错误的方式解决这个问题吗？

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        // Uncomment the following line to preserve selection between presentations.
        // self.clearsSelectionOnViewWillAppear = NO;

        // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
        // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    #pragma mark - Table view data source

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {

        // Return the number of sections.
        return 1;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {

        // Return the number of rows in the section.
        return 2;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *simpleTableIdentifier = @"Cell";

        SectionCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

        if (cell == nil)
        {

            NSArray * nib = [[NSBundle mainBundle] loadNibNamed:@"ButtonCell" owner:self options:nil];

cell = [[SectionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

            cell = (SectionCell *)[nib objectAtIndex:0];

        }

        cell.backgroundView.layer.masksToBounds = YES;
        cell.backgroundView.layer.cornerRadius = 20.0;

        cell.name.text=@"Cell Test";

        tableView.backgroundView = nil;
        tableView.backgroundColor = [UIColor clearColor];
        return cell;
    }

    /*
    // Override to support conditional editing of the table view.
    - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // Return NO if you do not want the specified item to be editable.
        return YES;
    }
    */

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        return 78;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:17:28.590

而不是使用：

```
cell = [nib objectAtIndex:indexPath.row]; 
```

采用：

```
if (cell == nil) {
    NSArray * nib = [[NSBundle mainBundle] loadNibNamed:@"ButtonCell" owner:self options:nil];
    cell = (SectionCell *)[nib objectAtIndex:0];

} 
```

因为您的笔尖可能只有一个对象，即您的自定义表格视图单元格。

PS：假设您有一个名为“ButtonCell”的xib，它有一个自定义视图，其自定义类设置为“SectionCell”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:15:31.007

更改此代码：

```
if (cell == nil)
    cell = [[[SectionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier] autorelease]; 
```

并删除您的 NSBundle 逻辑，因为您自己正在实例化单元对象，因此不再需要它。

例子：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *simpleTableIdentifier = @"Cell";
        SectionCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
        if (cell == nil)
            cell = [[[SectionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier ] autorelease];

        cell.backgroundView.layer.masksToBounds = YES;
        cell.backgroundView.layer.cornerRadius = 20.0;
        cell.name.text=@"Cell Test";
        tableView.backgroundView = nil;
        tableView.backgroundColor = [UIColor clearColor];
        return cell;
    } 
```

提示：

没有必要按照您的方式连续设置您的表格视图背景。您可以在首次加载对象时设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:23:44.987

找到了答案。我必须不使用静态表视图并使用动态原型。唯一的缺点是我不能使用自定义 xib 单元格，必须修改默认单元格以使其看起来尽可能接近我的静态单元格。

# php - 将 html 选择框附加到填充有 MYSQL 查询结果的页面

> ID：14736916
> 
> 赞同：0
> 
> 时间：2013-02-06T19:14:09.960
> 
> 标签：php, javascript, mysql, database, append

通常在创建动态填充的下拉列表时，我会使用如下简单的 foreach 循环来获取数据：

```
<select name="region" id="region" tabindex="1">
   <option value="">Select a Course</option>
   <?php foreach ( $courses as $course ) : ?>
   <option value="<?php echo $course->coursename; ?>"><?php echo $course->coursename; ?></option>
   <?php endforeach; ?>
</select>

*where $courses = select("SELECT * FROM courses"); 
```

等等等等

我不确定是否可以在 javascript 函数中以类似于其当前形式的任何形式使用它，例如我在某些表单上使用的下面的函数，以根据用户的要求附加额外的输入字段。例如，这适用于文本输入（如下所示，如果我手动输入每个输入选项，我可以使用它）但我完全不确定重新创建上面的 PHP/mySQL 示例的最佳方法，其中 javascript不碍事。我试图研究这是否可以通过 AJAX 轻松完成，但无法找到任何我正在尝试做的事情的例子。

```
<script type="text/javascript">
var count = 0;
$(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container').append(
                '<h4>Link #' + count + '</h4>&nbsp' 
                +'<select id="field_' + count + '" name="fields[]">' + '<option>Select a Course</option>'+'</select>');

    });
});
</script> 
```

非常感谢您提供有关执行此操作的最佳方法的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:24:32.580

更新 - 我最终设法回答了我自己的问题 - 按照下面的代码解决方案。

```
<script type="text/javascript">
var count = 0;
$(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container2').append(
                '<strong>Golf Course ' + count + '</strong>&nbsp&nbsp&nbsp' 
                +'<select id="field_' + count + '" name="fields[]">' + "<?php foreach ( $courses as $course ) { $name = $course->coursename; ?>"+"<?php echo '<option value=\''.htmlspecialchars($name).'\'>'.$name.'</option>'; ?>"+"<?php } ?>"+'</select><br />')

    });
});
</script> 
```

# mysql - 不记录 MySQL 慢查询

> ID：14736919
> 
> 赞同：3
> 
> 时间：2013-02-06T19:14:21.730
> 
> 标签：mysql, linux, centos, query-optimization

在我的 CentOS 机器上，我使用 MySQL 5.5.30。（我两天前租了服务器，我是 Linux 命令的新手）

我正在尝试检查缓慢的 MySQL 查询。所以我从 phpMyAdmin 做了这个

```
SET GLOBAL log_slow_queries = ON;
SET GLOBAL slow_launch_time = 1;
FLUSH LOGS; 
```

在默认配置`slow query log file`变量中是`/var/lib/mysql/srv1-slow.log`

但是当我`/var/`用 FTP 检查文件夹时，只存在`/var/tmp/`文件夹。这是空的。我应该怎么做才能看到慢查询日志？

注意：我试图创建`/var/lib`文件夹，但系统没有让我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:33:36.997

添加以下行`/etc/my.cnf`并重新启动mysql：

**注意：**在我的情况下 MySQL 版本是 5.0.x

```
[mysqld]

    log-slow-queries = /var/lib/mysql/sev1-slow.log
    long_query_time = 1 
```

在 MySQL 5.5 版本中

```
[mysqld]

    slow_query_log_file= = /var/lib/mysql/sev1-slow.log
    long_query_time = 1
    slow_query_log = 1 
```

您必须手动创建文件并以这种方式更改所有者：

```
mkdir /var/lib/mysql
touch /var/lib/mysql/sev1-slow.log
chown mysql.mysql -R /var/lib/mysql 
```

# jsf - Primefaces：必填字段消息覆盖 信息

> ID：14736922
> 
> 赞同：1
> 
> 时间：2013-02-06T19:14:36.247
> 
> 标签：jsf, dialog, primefaces, validation

我有一个具有必需属性的字段。当我按下“**接受**”按钮保存一些数据而不在字段中输入任何值时，会显示一条错误消息。到现在为止还挺好。但是，如果在那之后我决定单击“**取消**”按钮，则该错误消息会覆盖应该显示在`<p:dialog/>`元素内的确认消息。

**注意：**如果我改为使用该`<p:confirmDialog/>`组件，似乎没有问题，因为我猜它使用的是`message=""`属性，而不是`<p:messages/>`标签。

**XHTML**

```
<p:dialog>
<p:outputPanel>
      <h:form>

      <h:outputText value="Field:"/>
      <p:inputText id="field" value="" type="text" required="true" requiredMessage="You must complete the field" />                         
      <p:growl id="messages" showDetail="true"/>

      <p:commandButton id="dialogCancel" value="Cancel" oncomplete="confirmCancelDialog.show();"  actionListener="#{controller.addCloseWarn}" />    

      </h:form>
</p:outputPanel>
</p:dialog>

<h:form>
<p:dialog id="confirmCancelDialog" header="Warning!" widgetVar="confirmCancelDialog" modal="true" >                                         
    <p:messages id="closeMessage" showDetail="true" autoUpdate="true" />                                    
    <p:commandButton id="confirm" value="Accept" onclick="..." />  
    <p:commandButton id="decline" value="Cancel" onclick="..." />               
</p:dialog> 
</h:form> 
```

**豆控制器**

```
public void addCloseWarn(ActionEvent actionEvent) { 
        FacesContext.getCurrentInstance().addMessage("closeMessage", new FacesMessage(FacesMessage.SEVERITY_WARN, null, 
                          "Are you sure you want to leave the page?")); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:49:36.050

取消按钮的问题是您的表单已提交并执行了验证。您可以将`process="@this"`属性添加到`commandButton`，因此不会处理表单的其他部分并`addCloseWarn`执行您的方法。

我还要补充一点，这可能不是`message`标签的标准使用。它用于显示错误、警告和成功消息，而不是确认问题。所以使用`confirmDialog`或使用带有普通文本和 OK - Cancel 按钮的标准对话框。

# data-structures - 具有先拉和最少拉的数据结构 - java

> ID：14736923
> 
> 赞同：1
> 
> 时间：2013-02-06T19:14:39.603
> 
> 标签：data-structures, map

我正在寻找具有以下特性的数据结构： - 具有键和值 - 可以在 O(n) > t > O(logn ) 或 O(1) 中找到值 - 可以提取第一个元素和最后一个元素我插入。

TreeMep 不好，因为如果我插入键（作为字符串）“b”然后键“a”如果我要拉第一个我会得到“a”而不是“b”

ConcurrentSkipListMap 不好，因为我不能依赖 size func'

将不胜感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:37:38.653

您可以使用（通常是二叉搜索树）`deque`交叉引用的（双端队列） ，它允许重复键。`multimap`

队列的每个元素都会有一个对映射对应元素的引用（一个迭代器），反之亦然。

这样，您可以在 O(log N) 中的地图中进行搜索，并且可以在 O(log N) 中的序列的任一端进行推/拉。

您可以决定将字符串存储在地图中或队列中。

这是 C++ 中的一个实现：

```
#include <string>
#include <map>
#include <deque>

typedef int         my_key_type;       // Key type
typedef std::string my_value_type;     // Value type

struct queueitem;                                   // Queue element

typedef std::deque<queueitem> my_queue;             // Queue

typedef std::multimap <my_key_type,               
                       my_queue::iterator> my_map;  // Map

typedef std::pair <my_key_type,                  
                   my_queue::iterator> my_map_pair; // Map element

struct queueitem
{
    my_value_type value;
    my_map::iterator mapitem;

    queueitem (const my_value_type & val) : value(val) {}
};

class mapqueue
{
    public:

        mapqueue () {}

        my_value_type find (my_key_type key) const;
        size_t index_of (my_key_type key) const;

        my_value_type front_value () const { return Q.front().value; }
        my_value_type back_value () const { return Q.back().value; }

        my_key_type front_key () const
        { return Q.front().mapitem->first; }

        my_key_type back_key () const
        { return Q.back().mapitem->first; }

        void push_front (my_key_type key,
                         const my_value_type & value);

        void push_back (my_key_type key,
                        const my_value_type & value);

        void pop_front ();
        void pop_back ();

    private:

        my_queue Q;
        my_map M;

        mapqueue (const mapqueue &) {}
        mapqueue & operator= (const mapqueue &) { return *this; }
};

using namespace std;

my_value_type mapqueue::find (my_key_type key) const
{
    my_map::const_iterator it = M.find (key);

    if (it==M.end())
        throw "Not found";

    return it->second->value;
}

size_t mapqueue::index_of (my_key_type key) const
{
    my_map::const_iterator it = M.find (key);

    if (it==M.end())
        throw "Not found";

    return it->second - Q.begin();
}

void mapqueue::push_front (my_key_type key,
                           const my_value_type & value)
{
    Q.push_front (queueitem(value));
    my_queue::iterator qit = Q.begin ();
    qit->mapitem = M.insert (my_map_pair(key,qit));
}

void mapqueue::push_back (my_key_type key,
                          const my_value_type & value)
{
    Q.push_back (queueitem(value));
    my_queue::iterator qit = Q.end () - 1;
    qit->mapitem = M.insert (my_map_pair(key,qit));
}

void mapqueue::pop_front ()
{
    M.erase (Q.front().mapitem);
    Q.pop_front ();
}

void mapqueue::pop_back ()
{
    M.erase (Q.back().mapitem);
    Q.pop_back ();
} 
```

这也支持在 O(log N) 中查找任何给定键的队列中的索引。如果您不需要这个，您可以简化将字符串存储在映射中的设计，并从映射中删除对队列的引用。

**更新：**键和值类型现在通过`typedef`s 指定。这样很容易改变它们。将整个事物转换为由这两种类型参数化的模板会很有趣。这样，即使在同一个程序中，相同的代码也可以用于不同的键值类型对。

**更新：**一般情况下有一个工具：[Boost Multi-index Containers Library](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)。请参阅文档中的[此示例](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/tutorial/basics.html#list_fast_lookup)。

# c# - 如何在项目中的所有.cs中传播Form的UI控件的名称更改

> ID：14736929
> 
> 赞同：0
> 
> 时间：2013-02-06T19:14:55.390
> 
> 标签：c#, winforms, refactoring, uicontrol

在 C# 和 Winform 中，我创建了一个表单和一堆 UI 控件。我已经通过属性窗口更改了控件的名称，但以下自动生成的代码没有自动更新。但是，InitializeComponent 代码会自动更新。我现在的问题是我不记得我将哪个盒子或哪个标签重命名为某个名称。两个问题：我怎样才能更有效地开始呢？问题2）我现在可以做些什么来让它自动更改相应的名称？我听说过重构，但我不知道我是否可以在这里使用它以及如何使用它？我很感激任何帮助。

```
public partial class frmMyInterface : Form
{
    public frmMyInterface()
    {
        InitializeComponent();
    }

    private void frmMyInterface_Load(object sender, EventArgs e)
    {

    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void label4_Click(object sender, EventArgs e)
    {

    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void label2_Click(object sender, EventArgs e)
    {

    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:25:28.673

重命名这些事件处理程序，然后在属性窗口中，重新分配从下拉菜单中选择的事件。或者删除这些事件处理程序并双击属性窗口中的每个事件，这一次它将为您更新它

# jquery - 将“this”作为参数传递，但在调用函数的上下文中运行

> ID：14736930
> 
> 赞同：2
> 
> 时间：2013-02-06T19:14:57.910
> 
> 标签：jquery, jquery-selectors, parameter-passing, this

我希望能够卸载 setStatus() 以获取一些参数 - 但现在我什至无法让硬编码的选择器工作。如何正确卸载 setStatus() 函数？

HTML

```
<div id="first:test"> <span class="statusFlag"></span>
  <br/>
  <input type="checkbox" value="Stuff">Box 1</input>
  <input type="checkbox" value="Stuff">Box 2</input>
  <input type="checkbox" value="Stuff">Box 3</input>
</div>
<div id="second:test"> <span class="statusFlag"></span>
  <br/>
  <input type="checkbox" value="Stuff">Box 1</input>
  <input type="checkbox" value="Stuff">Box 2</input>
  <input type="checkbox" value="Stuff">Box 3</input>
</div>
<div id="noTest">
  <input type="checkbox" value="stuff">No Validate</input>
</div> 
```

jQuery

```
$('[id$=test] input:checkbox').change(function () {
  if ($(this).parent().children('input:checkbox').filter(':checked').length > 0) {
    setStatus(this);
  } else {
    $(this).closest('[id$=test]').find('.statusFlag').css('color', 'red').text('Incomplete');
  }
});

function setStatus(oldthis){
  alert(oldthis);
  $(oldthis).closest('[id$=test]').find('statusFlag').css('color', 'green').text('Complete');
} 
```

这个想法是动态传递选择器并为每个 div 部分设置文本......所以最终类似于：

```
setStatus(this, '[id$=test]', 'red', 'Incomplete'); 
```

在这里 [摆弄 http://jsfiddle.net/pMAXs/](http://jsfiddle.net/pMAXs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:22:01.973

您没有在第二个选择器中找到一个类。

```
$(oldthis).closest('[id$=test]').find('statusFlag').css('color', 'green').text('Complete'); 
```

“statusFlag”->“.statusFlag”

假设我理解您的最终目标是正确的，请参阅：http: [//jsfiddle.net/pMAXs/3/](http://jsfiddle.net/pMAXs/3/)

# php - 合并php生成表中的列或行

> ID：14736933
> 
> 赞同：0
> 
> 时间：2013-02-06T19:15:05.403
> 
> 标签：php, mysql, html-table

我有一个像这样的生成表：

```
型号# | 说明 | 身高 | 宽度 | 长度
项目 1 | 标准 | 5 | 3 | 1
项目 2 | 特别 | | |       
项目 3 | 塑料| | |       

```

所以每个项目的高度、宽度和长度都是相同的。所以我想弄清楚如何合并“高度”、“宽度”和“长度”，因为 3 个项目都是 5 x 3 x 1。谢谢！

这是代码：

```
function PrintProductTable($productResult, $productDetails, $headArr)
        {

            $productDetails = populteGeneralToDetail($productResult, $productDetails);

            echo "<table class=\"chart\" >";
            echo "<tr>";

            for($i=0; $i<count($headArr); $i++)
                echo "<th>".$headArr[$i]."</th>";

            echo "</tr>";
            foreach($productDetails as $modelName=>$productDetail)
            {
                echo "<tr>";

                for($i=0; $i<count($headArr); $i++)
                {
                    $col = $headArr[$i];
                    $value;
                    if (array_key_exists($col, $productDetail))
                        $value = $productDetail[$col];      

                    else 
                        $value = "" ;                       

                    echo "<td>".$value."</td>";

                }

                echo "</tr>";
            }
            echo "</table>";
        } 
```

# css - 在 CSS 中选择带有子元素的父列表

> ID：14736937
> 
> 赞同：0
> 
> 时间：2013-02-06T19:15:14.517
> 
> 标签：css

当子列表悬停时，我想在父列表上保持悬停颜色。

这是第二个菜单有子菜单的示例，当您将鼠标悬停在子菜单上时，主菜单的颜色消失了。

[http://jsfiddle.net/ya8ga/](http://jsfiddle.net/ya8ga/)

谢谢

HTML

```
<div id="menu2">
<ul>
    <li class="l1"><a href="#">Home</a></li>
    <li class="l2 dropDown"><a href="#">Hotel</a>
        <ul class="sub1">
            <li class="l1"><a href="#">Hotel Sub 1</a></li>
            <li class="l2"><a href="#">Hotel Sub 2</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:21:08.830

改变这个：

```
#menu2 li a:hover{background:#89E00C; color:#2D1C13;} 
```

对此：

```
#menu2 li:hover{background:#89E00C; color:#2D1C13;} 
```

# node.js - 如何在 heroku 命令行上调用 npm（安装 bower 组件）？

> ID：14736941
> 
> 赞同：32
> 
> 时间：2013-02-06T19:15:31.110
> 
> 标签：node.js, heroku, bower

[Bower](http://twitter.github.com/bower/)用于客户端 Javascript，npm 用于服务器端，它读取`component.json`文件以识别应在部署时获取的依赖项，因此我很高兴 heroku 会在 slug 编译时运行它。

不幸的是，我无法从 heroku 控制台或一次性命令 ( `heroku run "npm help"`) ( `heroku run bash`-> `npm help`) 调用 npm 或 bower，因为使用 ruby​​ 的 rake 是可能的。我已经将 npm 和 node（最新/x 版本）放在了我`package.json`的引擎部分，而不是依赖项。

我认为这可以通过自定义[节点构建](https://github.com/heroku/heroku-buildpack-nodejs)包来解决，但我认为这对于激活如此明显的东西来说有点太繁重了。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-12T08:20:15.483

您还可以`postintall`在您的`package.json`

```
"dependencies": {
    "bower": "0.6.x"
},
"scripts": {
    "postinstall": "./node_modules/bower/bin/bower install"
} 
```

然后`npm install`还将安装 bower 依赖项。

*优点*：一个命令来统治他们。

*缺点*：您不必要地将 bower 作为依赖项嵌入。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-04T04:42:17.387

你可以`run`这样使用：

```
heroku run npm install git://github.com/webjay/kaiseki 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T19:17:46.983

[您应该在 package.json 文件中声明 NPM 依赖项](https://devcenter.heroku.com/articles/nodejs#declare-dependencies-with-npm)

您从 shell 安装的所有内容都将在退出 shell 时删除。您处于克隆实例中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-22T13:26:46.697

你可以像这样直接使用凉亭

```
"dependencies": {
    "bower": "^1.7.9"
},
"scripts": {
    "postinstall": "sudo bower install --allow-root "
} 
```

# mysql - yum 抱怨（错误地？）MySql 依赖项 - 安装 zenoss 时

> ID：14736942
> 
> 赞同：0
> 
> 时间：2013-02-06T19:15:43.967
> 
> 标签：mysql, dependencies, rpm, yum, zenoss

我正在尝试安装 Zenoss Core - 按照安装手册中的说明进行操作，但它抱怨依赖项似乎不应该。看起来它没有查看本地安装的软件包。

*你能建议一种方法来改变 yum 命令来解决这个问题吗？*

为了说明，即使我安装的所有 MySql RPM**都是****5.6.10-1.el6**版本

 **```
[root@ip-10-110-175-98 tmp]# rpm -qa | grep -i mysql
MySQL-server-5.6.10-1.el6.x86_64
MySQL-shared-5.6.10-1.el6.x86_64
MySQL-client-5.6.10-1.el6.x86_64 
```

不过，我收到以下错误，抱怨它们**不是 >= 5.5.13**

```
[root@ip-10-110-175-98 tmp]# yum -y --nogpgcheck --enablerepo=epel localinstall zenoss-4.2.0.el6.x86_64.rpm
Loaded plugins: amazon-id, product-id, rhui-lb, security, subscription-manager
Updating certificate-based repositories.
Unable to read consumer identity
Setting up Local Package Process
Examining zenoss-4.2.0.el6.x86_64.rpm: zenoss-4.2.0-1586.el6.x86_64
Marking zenoss-4.2.0.el6.x86_64.rpm to be installed
Resolving Dependencies
--> Running transaction check
---> Package zenoss.x86_64 0:4.2.0-1586.el6 will be installed
--> Processing Dependency: memcached >= 1.4.4 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-client >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-server >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-shared >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-dig >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-dns >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-http >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-ircd >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-ldap >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-ntp >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-perl >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-ping >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-rpc >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: nagios-plugins-tcp >= 1.4.15 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: net-snmp >= 5.3.2.2-9 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: net-snmp-utils >= 5.3.2.2-9 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: liberation-fonts-common for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: liberation-mono-fonts for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: liberation-sans-fonts for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: liberation-serif-fonts for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: libgcj for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: sysstat for package: zenoss-4.2.0-1586.el6.x86_64
--> Running transaction check
---> Package liberation-fonts-common.noarch 0:1.05.1.20090721-5.el6 will be installed
---> Package liberation-mono-fonts.noarch 0:1.05.1.20090721-5.el6 will be installed
---> Package liberation-sans-fonts.noarch 0:1.05.1.20090721-5.el6 will be installed
---> Package liberation-serif-fonts.noarch 0:1.05.1.20090721-5.el6 will be installed
---> Package libgcj.x86_64 0:4.4.6-4.el6 will be installed
--> Processing Dependency: libart_lgpl >= 2.1.0 for package: libgcj-4.4.6-4.el6.x86_64
---> Package memcached.x86_64 0:1.4.4-3.el6 will be installed
---> Package nagios-plugins.x86_64 0:1.4.16-5.el6 will be installed
--> Processing Dependency: nagios-common >= 3.3.1-1 for package: nagios-plugins-1.4.16-5.el6.x86_64
---> Package nagios-plugins-dig.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-dns.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-http.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-ircd.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-ldap.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-ntp.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-perl.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-ping.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-rpc.x86_64 0:1.4.16-5.el6 will be installed
---> Package nagios-plugins-tcp.x86_64 0:1.4.16-5.el6 will be installed
---> Package net-snmp.x86_64 1:5.5-41.el6_3.1 will be installed
--> Processing Dependency: net-snmp-libs = 1:5.5-41.el6_3.1 for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libsensors.so.4()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libnetsnmptrapd.so.20()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libnetsnmpmibs.so.20()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libnetsnmphelpers.so.20()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libnetsnmpagent.so.20()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
--> Processing Dependency: libnetsnmp.so.20()(64bit) for package: 1:net-snmp-5.5-41.el6_3.1.x86_64
---> Package net-snmp-utils.x86_64 1:5.5-41.el6_3.1 will be installed
---> Package sysstat.x86_64 0:9.0.4-20.el6 will be installed
---> Package zenoss.x86_64 0:4.2.0-1586.el6 will be installed
--> Processing Dependency: mysql-client >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-server >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-shared >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Running transaction check
---> Package libart_lgpl.x86_64 0:2.3.20-5.1.el6 will be installed
---> Package lm_sensors-libs.x86_64 0:3.1.1-10.el6 will be installed
---> Package nagios-common.x86_64 0:3.4.4-1.el6 will be installed
---> Package net-snmp-libs.x86_64 1:5.5-41.el6_3.1 will be installed
---> Package zenoss.x86_64 0:4.2.0-1586.el6 will be installed
--> Processing Dependency: mysql-client >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-server >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Processing Dependency: mysql-shared >= 5.5.13 for package: zenoss-4.2.0-1586.el6.x86_64
--> Finished Dependency Resolution
Error: Package: zenoss-4.2.0-1586.el6.x86_64 (/zenoss-4.2.0.el6.x86_64)
           Requires: mysql-server >= 5.5.13
           Available: mysql-server-5.1.47-4.el6.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.47-4.el6
           Available: mysql-server-5.1.52-1.el6_0.1.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.52-1.el6_0.1
           Available: mysql-server-5.1.61-1.el6_2.1.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.61-1.el6_2.1
           Available: mysql-server-5.1.61-4.el6.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.61-4.el6
           Available: mysql-server-5.1.66-1.el6_3.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.66-1.el6_3
           Available: mysql-server-5.1.66-2.el6_3.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.66-2.el6_3
           Available: mysql-server-5.1.67-1.el6_3.x86_64 (rhui-us-east-1-rhel-server-releases)
               mysql-server = 5.1.67-1.el6_3
Error: Package: zenoss-4.2.0-1586.el6.x86_64 (/zenoss-4.2.0.el6.x86_64)
           Requires: mysql-client >= 5.5.13
Error: Package: zenoss-4.2.0-1586.el6.x86_64 (/zenoss-4.2.0.el6.x86_64)
           Requires: mysql-shared >= 5.5.13
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

机器是一个虚拟的 Red Hat Enterprise Linux Server 6.3 版

我的 /etc/yum.conf 是：

```
[main]
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=0
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
installonly_limit=3

#  This is the default, if you make this bigger yum won't see if the metadata
# is newer on the remote and so you'll "gain" the bandwidth of not having to
# download the new metadata and "pay" for it by yum not having correct
# information.
#  It is esp. important, to have correct metadata, for distributions like
# Fedora which don't keep old packages around. If you don't like this checking
# interupting your command line usage, it's much better to have something
# manually check the metadata once an hour (yum-updatesd will do this).
# metadata_expire=90m

# PUT YOUR REPOS HERE OR IN separate files named file.repo
# in /etc/yum.repos.d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:53:48.400

您需要删除 MySQL 5.6.10 并使用较旧的 5.5.28-1（我尝试使用 5.5.30）。确保您获得客户端、服务器和共享。我整个下午都在同一个问题上撞到了墙上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:13:04.880

谢谢mmmmmScotch。
我发现以下 RPM 无怨无悔地共存：
zenoss-4.2.3-1695.el6.x86_64
MySQL-server-5.6.10-1.el6.x86_64
MySQL-shared-5.6.10-1.el6.x86_64
MySQL-client -5.5.28-1.linux2.6.x86_64

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:37:39.287

案件不相符。严重地。`MySQL`并且`mysql`是两个完全不同的包。

也就是说，我对zenoss一无所知（我是为了`rpm`标签而来的）。你从哪里得到你的`MySQL`包安装？我不知道它的标准格式是什么，但他们可能应该`%provides`为`mysql`...**

# vba - excel在某些情况下删除行

> ID：14736943
> 
> 赞同：0
> 
> 时间：2013-02-06T19:15:49.450
> 
> 标签：vba, excel, delete-row

如果 G 列中有一个以 210 开头的数字，如何删除 Excel 工作表的整行。

如果单元格内部某处有 210，我不想删除该行，但只有从它开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:29:40.463

使用此代码：

```
Sub RemoveRows()

Dim i As Long

i = 1

Do While i <= ThisWorkbook.ActiveSheet.Range("G1").CurrentRegion.Rows.Count

    If Left(ThisWorkbook.ActiveSheet.Range("G" & i).Formula, 3) = "210" Then
        ThisWorkbook.ActiveSheet.Cells(i, 1).EntireRow.Delete
    Else
        i = i + 1
    End If

Loop

End Sub 
```

示例文件：[https ://www.dropbox.com/s/yp2cwphhhdn3l98/RemoweRows210.xlsm](https://www.dropbox.com/s/yp2cwphhhdn3l98/RemoweRows210.xlsm)

要查看并运行它，请按`ALT`- `F11`，打开 Module1 并按`F5`。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:35:39.540

如果您想在没有代码但纯粹在 UI 中执行此操作，这就是您可以非常有效地执行此操作的方法：

1.  插入一个临时列（例如 G 列右侧）（`Ctrl`-`Space`在 H 列的任何单元格中，`Ctrl`- `+`）
2.  用公式填充列`=LEFT(TEXT(G1),3)="210"`- 这将返回`TRUE`您查找的所有行
3.  将自动筛选应用于该新列或整个范围 ( `Ctrl`- `Shift`- `L`)
4.  过滤该列`TRUE`- 这样，只保留您要删除的行
5.  选择所有行并删除（`Ctrl`-`A`在表格中的任何单元格中，`Shift`- `Space`，`Ctrl`- `-`）
6.  删除临时列（`Ctrl`-`Space`在列 H 的任何单元格中，`Ctrl`- `-`）

完毕！

# sql - SQL - 如何为每个部门获取具有 MIN 和 MAX id 的特定列？

> ID：14736945
> 
> 赞同：0
> 
> 时间：2013-02-06T19:15:58.880
> 
> 标签：sql

我正在尝试使用 SQL 选择一些信息，但没有成功。这就是我想要做的。

我有 2 张桌子：

具有以下列的表员工：

```
IDemployee | name    | surname  | department_id
1          | John    | Smith    | 1
2          | Jane    | Smith    | 1
3          | Neo     | Anderson | 1
4          | John    | Mason    | 2
5          | James   | Cameron  | 2
6          | Morpheus| Grumpy   | 2 
```

带列的表部门：

```
IDdepartment | name
1            | Thieves
2            | Madmen 
```

我想选择每个部门的第一个和最后一个员工的姓氏和他们的员工人数。结果：

```
department_name | first_employee | last_employee | employee_count
Thieves         | Smith          | Anderson      | 3
Madmen          | Mason          | Grumpy        | 3 
```

我能够通过以下查询获得第一位和最后一位员工的计数和 ID：

```
SELECT d.IDdepartment, COUNT(*) as "employee_count", MIN(e.IDemployee) as "first_employee", MAX(e.IDemployee) as "last_employee"
        FROM ( employees e INNER JOIN departments d ON d.IDdepartment=e.department_id)
        GROUP BY d.name; 
```

但是，我找不到选择他们姓氏的正确方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:31:15.790

虽然可能有另一种方法，但一种方法是将您的查询用作子查询：

```
SELECT d.name department_name, 
  e.surname first_employee,
  e2.surname last_employee,
  t.employee_count
FROM (
    SELECT d.IDdepartment, 
       COUNT(*) as "employee_count", 
       MIN(e.IDemployee) as "first_employee", 
       MAX(e.IDemployee) as "last_employee"
    FROM employees e 
          INNER JOIN departments d 
            ON d.IDdepartment=e.department_id
    GROUP BY d.name
  ) t JOIN employees e on t.first_employee = e.IDemployee
  JOIN employees e2 on t.last_employee = e2.IDemployee
  JOIN departments d on t.IDdepartment = d.IDdepartment 
```

这是小提琴：[http ://sqlfiddle.com/#!2/17a5b/2](http://sqlfiddle.com/#!2/17a5b/2)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:26:21.777

这是基于现有 Oracle 表的通用 Oracle 示例。如果在您的 SQL 版本中可用，您需要使用分析函数。您没有指定正在使用的 SQL。如果 FIRST() 和 LAST() 分析 f-ns 在您的 SQL 中可用，那么这应该有效：

```
SELECT empno, deptno, sal,
   MIN(sal) KEEP (DENSE_RANK FIRST ORDER BY sal) OVER (PARTITION BY deptno) "Lowest",
   MAX(sal) KEEP (DENSE_RANK LAST ORDER BY sal) OVER (PARTITION BY deptno) "Highest"
 FROM scott.emp
ORDER BY deptno, sal
/

See lowest and highest salary by dept in output of above query:

DEPTNO  SAL     Lowest  Highest
---------------------------------
10      1300    1300    5000
10      2450    1300    5000
10      5000    1300    5000
20      800     800     3000
20      1100    800     3000
20      2975    800     3000
.... 
```

# maven - 我无法在 Maven 中为 JUnit 测试加载文件

> ID：14736946
> 
> 赞同：1
> 
> 时间：2013-02-06T19:15:59.133
> 
> 标签：maven, resources, junit4, surefire

我知道有很多关于这个的问题和答案，但我已经尝试了我读过的所有内容，你可以肯定它已经很多了。我正在使用 Spring Tool Suite 3.1.0（但还没有 Spring）、嵌入式 Maven 3.0.4 和 JUnit 4。Ubuntu 12.04。我有这个 JUnit 4 测试：

```
 @Test
public final void testCheckAudio() {
    final InputStream stream = AudioServiceImplTest.class.getResourceAsStream("/test.wav");
    assertNotNull(stream);
} 
```

test.wav 在 src/test/resources 中，我检查过它是否已复制到目标/测试类。当我运行为 ... Maven 测试时，我得到： ... 失败的测试：testCheckAudio(edu.gerher.askitcollector.test.services.AudioServiceImplTest) ... 无法执行目标 org.apache.maven.plugins:maven- surefire-plugin:2.10:test (default-test) on project ...

* * *

## 测试集：MyPackage.AudioServiceImplTest

测试运行：16，失败：1，错误：0，跳过：0，经过的时间：0.039 秒 <<< 失败！testCheckAudio(MyPackage.AudioServiceImplTest) 已用时间：0.005 秒 <<< 失败！java.lang.AssertionError at edu.gerher.askitcollector.test.services.AudioServiceImplTest.testCheckAudio(AudioServiceImplTest.java:238) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.lang.reflect.Method.invoke(Method .java:597) 在 org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123) 在 org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53) 在 org. apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.lang.reflect.Method.invoke(Method.java:597) at org。

我已经尝试使用“test.wav”、“/test.wav”，在 src/test/resources 中创建测试包并在那里复制文件并尝试“/MyPackage/test.wav”、“MyPackage/test.哇”。总是一样的答案。它找不到文件。

我试过 Run as... JUnit Test 和相同的 asnwers。En el pom.xml 我有

```
<build>
...
<resources>
  <resource>
    <directory>.../src/main/resources</directory>
  </resource>
</resources>
<testResources>
  <testResource>
    <directory>.../src/test/resources</directory>
  </testResource>
</testResources>
<directory>.../target</directory> 
```

真的，谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T09:47:43.623

我不知道它是否仍然相关，但是：
假设您在 src/test/resources/tree.png 下有一个图像。使用标准的 Maven 设置，您可以在代码中引用它，如下所示：

```
img = ImageIO.read(new File("src/test/resources/tree.png")); 
```

这是相对于当前项目位置的。

如果您将项目打包到 jar 文件中并希望在运行代码中使用资源，您还应该查看 Java ResourceLoader。这是一个起点：[java - 你如何制作资源加载器？](https://stackoverflow.com/questions/8868223/java-how-do-you-make-a-resourceloader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:07:58.433

为什么要更改资源位置的 Maven 默认值？“……”应该指什么？

我的建议： 1\. 删除自定义资源配置 2\. 将所需文件放在 src/test/resources 3\. 使用 getResourceAsStream("/test.wav"); 引用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T11:51:21.380

这对我有用。我需要从 src/test/resource/WsqImages 读取图像文件

```
 File filepath= new File("src" + File.separator + "test" + File.separator
    + "resources" + File.separator + "WSQImages");

    try (InputStream is = new BufferedInputStream(new FileInputStream(
        filepath))) {

    Bitmap bitmap = WSQJavaUtil.getBitMap(IOUtils.toByteArray(is));
    assertNotNull("BitMap Creation faild", bitmap);
    } catch (IOException e) {
    LOG.error(e.getMessage(), e);
    throw new WSQDecompressionException(e.getMessage(), e);

    } 
```

# android - android在调用另一个activity时如何保存一个activity的状态？

> ID：14736951
> 
> 赞同：0
> 
> 时间：2013-02-06T19:16:13.757
> 
> 标签：android, android-activity

例如，如果我从**A调用活动****B**，Android 系统如何保存活动 A 的状态？是用方法保存的吗？如果是这样，当活动 A 恢复时，为恢复活动 A 的状态而调用的方法序列是什么。我知道活动 A 会通过和)活动 B 被调用时的方法，并且一旦活动 A 需要恢复，方法就会被调用. 但是活动 A 的状态究竟是如何恢复的呢？**`onsaveinstancestate()``Onpause()``OnStop()``onRestart()`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:20:40.097

此图显示所有活动状态

![在此处输入图像描述](../Images/2911dfdc453460aff667f986b1720b59.png)

[此链接](https://stackoverflow.com/a/151940/2015318)很好地解释了如何存储信息并在活动恢复时检索它们。

* * *

```
protected void onCreate (Bundle savedInstanceState) 
```

在活动开始时调用。这是大多数初始化应该去的地方。 *参数* **savedInstanceState** *如果活动在之前关闭后重新初始化，则此 Bundle 包含它最近提供的数据* `onSaveInstanceState(Bundle)`。注意：否则为`null`.

* * *

```
protected void onRestoreInstanceState (Bundle savedInstanceState) 
```

`onStart()`当活动从先前保存的状态重新初始化时调用此方法，在此处给出`savedInstanceState`。**大多数实现将简单地使用 onCreate(Bundle) 来恢复它们的状态**，但有时在完成所有初始化之后在这里执行它或允许子类决定是否使用您的默认实现会很方便。此方法的默认实现执行对以前被冻结的任何视图状态的恢复`onSaveInstanceState(Bundle)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:26:15.613

它没有。你做。使用 onPause() 来编写您的应用程序状态。onResume() 来恢复它。使用首选项来存储和加载变量值。**

# javascript - 使用 jquery 在背景中循环

> ID：14736952
> 
> 赞同：0
> 
> 时间：2013-02-06T19:16:15.323
> 
> 标签：javascript, jquery, css

我使用渐进式 CSS 来设置网站背景图像的样式。我找到了一些关于使用 jQuery 循环图像的教程，但我还没有看到任何可以通过 CSS 完成的教程。它们都带有 HTML。我怎样才能做到这一点，以便 Jquery 或 Javascript 循环通过图像而不必创建一个 div 这样做。

我的 CSS：

```
html {
background: url('../assets/homepage.jpg') no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:36:28.417

尝试将背景图像滑出屏幕，更改它并重新滑动。

```
<style>
html {
background: url('Image1.jpg') no-repeat center center fixed; 
background-size: cover;
}
</style> 
```

```
<script type="text/javascript">
$(document).ready( function() {
    $('html').animate({
        "background-position": -2048
    },2000, function() {
        $('html').css('background-image',"url('Image2.jpg')");
        $('html').animate({
        "background-position": 0
        },2000);
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:21:53.797

你肯定*可以*做到，但是当图像改变时不会有任何过渡：

```
html, html.slide1 {
    background: url('../assets/homepage1.jpg') no-repeat center center fixed; 
    /* add vendor prefixes */
    background-size: cover;
}
html.slide2 {
    background-image: url('../assets/homepage2.jpg');
}
html.slide3 {
    background-image: url('../assets/homepage3.jpg');
} 
```

```
$(function () {
    var classList = ['slide1', 'slide2', 'slide3'],
        $html = $('html'),
        last = classList.length - 1,
        current = 0;

    setInterval(function () {
        current = current == last ? 0 : current + 1;
        $html.prop('class', classList[current]);
    }, 1000);
}); 
```

这是小提琴：http: [//jsfiddle.net/rmR7V/](http://jsfiddle.net/rmR7V/)

# git - Git 不会暂存被跟踪的文件

> ID：14736954
> 
> 赞同：1
> 
> 时间：2013-02-06T19:16:26.470
> 
> 标签：git

即使我坚定地询问，Git 也不会暂存跟踪的文件。我有一个带有更改的 web.config 文件。 `git status`将其显示为已修改且未暂存。然后我说`git add web.config`。它没有抱怨，但另一个`git status`仍然显示它已修改且未上演。它适用于其他文件。

所以不知何故，我搞砸了这个文件的本地状态。如果可能的话，如何在不丢失更改的情况下重置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:17:32.357

我想我想通了。我在 Windows 上使用 Git bash。我依赖于 shell 的文件名完成。该文件的名称是`Web.config`. 我一直在打字`git add web.c`并按 TAB。它将完成文件名，保留小写字母`w`。Git 不会抱怨，但不会暂存文件。使用大写`W`和文件名完成工作。

# javascript - Javascript Google Maps 坐标，parseFloat 'Coordinate' + 随机数错误

> ID：14736959
> 
> 赞同：0
> 
> 时间：2013-02-06T19:16:35.327
> 
> 标签：javascript, google-maps, google-maps-api-3, random, coordinates

我正在尝试`Marker`在谷歌地图上为 a 生成一个随机位置。我已经成功地`users latitude`使用 parseFloat 将其添加到随机数（当我简单地使用`+`它们时它不起作用......）。

但是，我使用完全相同的代码`users longitude`用随机数解析 ，但没有任何反应。

例如：

`Latitude = 49.0291`

`Longitude = -0.9912`

这两个数字都被添加到由`(Math.floor(Math.random() * 300)/1000)`

纬度是随机生成的，标记会相应移动。但是，当我尝试垂直移动相同的标记时，什么也没有发生（尽管值确实发生了变化！）。

我附上了我的代码的[JS FIDDLE](http://jsfiddle.net/kd6Uy/)。

非常感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:50:28.927

我没有将一堆代码塞进一行，而是将其拆分并让它工作：

```
var newLat = parseFloat(geoplugin_latitude()) +  Math.floor(Math.random() * 300)/1000.0;
var newLng = parseFloat(geoplugin_longitude()) + Math.floor(Math.random() * 300)/1000.0; 
```

[http://jsfiddle.net/UmCNZ/](http://jsfiddle.net/UmCNZ/)

在代码中嵌套函数是不好的。

# git - 将我的更改合并到与同事相同的分支

> ID：14736960
> 
> 赞同：0
> 
> 时间：2013-02-06T19:16:39.767
> 
> 标签：git, merge

我和我的朋友一直在同一个分支上工作。他已将他的更改提交给我们的分支，现在我也想做同样的事情。

我已经进行了本地 git 提交，但我不确定从现在开始的步骤是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:20:00.973

您将希望使您的分支保持最新，以便您可以推送您的更改。

首先你会做：

```
git pull --rebase 
```

您也可以这样做`git pull`会导致发生合并提交。

那么你需要做的就是：

```
git push 
```

并且更改应该在共享的远程分支上。

# tabs - Instagram 关于我们页面的工作原理是什么？

> ID：14736961
> 
> 赞同：-1
> 
> 时间：2013-02-06T19:16:41.023
> 
> 标签：tabs, rewrite, instagram

让我们从这个页面开始：http: [//instagram.com/about/us/](http://instagram.com/about/us/)

URL 有这个：/about/us。如果我去乔布斯，网址是：http: [//instagram.com/about/jobs/](http://instagram.com/about/jobs/)

我该怎么做类似的事情？这就像垂直标签对吗？锚标签有这个：href="/about/jobs/"

这是如何工作的？网址重写？或者是什么？我想在我的网站中实现类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:24:28.310

您可以为此使用 .htaccess

```
RewriteEngine on
RewriteRule ^about/us/?$ link/to/site.html
RewriteRule ^about/jobs/?$ link/to/site2.html 
```

我要做的是为此使用一个框架，例如 zend 或 symfony（如果您使用 php）。

# sql-server-2005 - 将 Oracle 查询迁移到 Sql Server 2005 时出现问题

> ID：14736965
> 
> 赞同：1
> 
> 时间：2013-02-06T19:17:01.843
> 
> 标签：sql-server-2005, oracle10g, migration

我有一个带有非传统掩码的简单 Oracle 查询：

```
SELECT TO_CHAR(1234567, '9G999G990D000000') VALUE_STR FROM dual
---  1.234.567,000000 
```

而且我无法将其转换为 Sql Server 2005，我无法弄清楚如何维护剩余的小数位：

```
SELECT  CONVERT(VARCHAR(30), CAST(1234567 AS MONEY),1)
--- 1.234.567,00 
```

对于执行此查询的优雅方式，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:56:31.580

一位同事找到了这个解决方案：

[http://eltonbicalho.blogspot.com.br/2010/08/formatar-dinheiro-no-sql-server.html](http://eltonbicalho.blogspot.com.br/2010/08/formatar-dinheiro-no-sql-server.html)

它工作得很好，但不是我正在寻找的优雅方式。无论如何，它为我们节省了一些时间。

PS：解决方案以葡萄牙语呈现。

# html - 来自 Django 模板的 HTML 中的空格

> ID：14736970
> 
> 赞同：0
> 
> 时间：2013-02-06T19:17:15.323
> 
> 标签：html, css, django, django-templates

我有一个需要以列表格式获取的 django 应用程序。我的问题是过滤结果后如何在 HTML 中对事件列表进行样式化。我已经尝试添加`&nbsp;`，但它似乎不需要并且可能不是最佳实践。

我已经成功地使用了一张桌子，但真的不喜欢它的外观。有没有办法使用 div 或 span 标签来获得具有适当间距的无序列表？例如，我希望我的列表看起来像

```
2/6/2013     Widget Company        Chicago
2/7/2013     Dodad Company2        Kansas City 
```

而不是

```
2/6/2013 Widget Company Chicago
2/7/2013  Dodad Company2 Kansas City 
```

这是我的代码，目前作为表格。

```
 {% if latest_events %}
     {% for event in latest_events %}
<table border="1">

     <tr>
       <td>  {{ event.event_date }}  </td> <td>{{ event.company  }}</td> <td> {{ event.venue  }} </td> <td>{{ event.city  }}</td>
     </tr>

     </table> 
{% endfor %}
</ul>
{% else %}
    <p>No Events are available.</p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:54:34.297

这里的问题是浏览器会去除空白序列，因此(_ = space)`____`将变为`_`. 如上所述，解决方案是为您的表格设置样式。

只需在表格元素上设置宽度即可获得所需的结果，因为默认情况下表格不会消耗超出所需的宽度。然而，它们会随着宽度的变化来调整它们的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:48:05.543

如果您想要的只是元素之间的额外间距，请添加一些填充。

[http://jsfiddle.net/n762q/](http://jsfiddle.net/n762q/)

```
table.associates td, table.associates th {
    padding-right: 2em;
}

<table class="associates">
    <thead>
        <tr>
            <th>Date</th>
            <th>Company</th>
            <th>City</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td>2/6/2013</td>
            <td>Widget Company</td>
            <td>Chicago</td>
        </tr>

        <tr>
            <td>2/7/2013</td>
            <td>Dodad Company2</td>
            <td>Kansas City</td>
        </tr>
    </tbody>
</table> 
```

或者，您可以`min-width`在单元格或表格本身上指定 a。

[http://jsfiddle.net/n762q/1/](http://jsfiddle.net/n762q/1/)

```
table.associates {
    min-width: 70%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:23:37.583

使用[中心](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#center)模板标签 - 它会为您完成这项工作。

可用的替代方案：[ljust](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ljust)和[rjust](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#rjust)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T14:53:26.167

想想你的目标是什么？为了实现这一点，不仅仅是 Django 或 Python，您可以使用 css 样式，例如：

```
<table border=1px style="width:100%;">
<tr>
       <td style="padding-left:10px; width=100px;"> {{ event.event_date }} </td> 
       <td style="text-align:center;width=40px;"> {{ event.company  }} </td> 
       <td style="text-align:center;width=40px;"> {{ event.venue  }} </td>
       <td style="text-align:center; width=40px;"> {{ event.city  }} </td>
</tr>
</table>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T19:24:49.997

你在这里只处理 HTML，我建议使用 Twitter Bootstrap，因为它带有很多你可以使用的好东西（样式/css），而且非常容易使用。例如，它有表格，看看它[Twitter Boostrap 表格](http://twitter.github.com/bootstrap/base-css.html#tables)或者网格[Twitter Bootstrap Grid](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# eclipse - Eclipse IDE 删除关键问题

> ID：14736977
> 
> 赞同：0
> 
> 时间：2013-02-06T19:17:35.313
> 
> 标签：eclipse, ide, key

我做了一些详尽的搜索，我一直找不到任何方向。每当我尝试键入 delete 以删除 IDE 中的一些后续文本，甚至尝试粘贴某些内容时，我都会在页面的右下角弹出一个菜单。我不确定它是如何打开的，或者如何关闭它。它使删除文本和复制粘贴非常费力。这是当我按下删除键时 eclipse 的样子的一个例子......

![截屏](../Images/ac26aba2deae5b7b54df11a651fc2f5c.png)

同样，请注意出现在右下角的小菜单。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:10:33.043

这肯定是您安装的插件，与剪贴板有关...可能是[MoreClipboard](http://sourceforge.net/projects/moreclipboard/)，尝试删除插件，一旦删除，弹出窗口就会消失。

# node.js - 如何在 express.js 中引用布局图像以便可以从嵌套目录中找到它们？

> ID：14736981
> 
> 赞同：2
> 
> 时间：2013-02-06T19:17:48.707
> 
> 标签：node.js, express, pug, ejs

我有一个 express.js 应用程序，当前使用 ejs（将翡翠用于较新的项目），我正在尝试以干净和适当的方式解决问题。

我有一个 layout.ejs 文件，其中包含我的页眉和页脚。到目前为止，我的大部分网站都是一层深度[http://innovationbound.com/about](http://innovationbound.com/about)或 /services 或 /amy 等等....

我开始在[http://innovationbound.com/courses/course-name](http://innovationbound.com/courses/course-name)创建在线课程，我遇到的问题是这些课程页面无法以相同的方式引用图像。`<img src="images/linknedin.png" alt="LinkedIn Icon">`例如。

从课程名称页面它尝试`<img src="courses/images/LinkedIn.png" alt="LinkedIn Icon">`并且显然无法在那里抓取图像。

快递中是否有设置，或者我缺少什么明显的东西？我希望我不必使用绝对 url，这只会让在本地机器上开发变得疯狂。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T21:46:59.150

只需使用站点根目录相对路径。例如`<img src="/images/linknedin.png" alt="LinkedIn Icon">`. 请注意`/`区别。

> 链接路径分为三种类型：
> 
> *   绝对路径（例如[http://www.adobe.com/support/dreamweaver/contents.html](http://www.adobe.com/support/dreamweaver/contents.html)）。
>     
>     
> *   文档相对路径（例如 dreamweaver/contents.html）。
>     
>     
> *   站点根目录相对路径（例如 /support/dreamweaver/contents.html）。

来自[Adob​​e](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c44a.html#WScbb6b82af5544594822510a94ae8d65-7c42a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:30:31.530

您可能会考虑它，但您可以使用“../images/link(n?)edin.png”。但是，我建议使用绝对路径，因为图像应该存储在 /public 中（在一般的翡翠设置中），并且您的路径深度可能会因您的路由规则而异。

作为提示，如果您丢失了图像的相对路径，请右键单击损坏的图像并在 Web 浏览器的属性中查看 URL。它会给你一个图像在哪里的提示。

# assembly - 如何为 PIC 汇编代码设置 emacs

> ID：14736984
> 
> 赞同：3
> 
> 时间：2013-02-06T19:18:01.787
> 
> 标签：assembly, emacs, pic

我想使用 emacs 起草和编辑可以插入 Microchip MPLAB IDE for PIC 项目的汇编代码。如果我使用 .asm 作为文件扩展名，当我在第一列中使用分号开始注释行时，我会得到一个有趣的效果——下一行总是缩进。我怎样才能避免这种情况？我将“gas”作为 .asm 文件的主要模式来尝试执行此操作，但它没有效果。

也许真正的问题是我不理解这些模式如何工作的描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T02:11:50.037

您可以通过将下面的函数放在 init.el 中来重新定义 asm-calculate-indentation。要“测试驱动”该功能，您可以将其粘贴到*暂存*缓冲区中，对其进行评估，然后在 asm 文件中进行一些编辑以查看这是否是您想要的。

```
(defun asm-calculate-indentation ()
  (or
   ;; Flush labels to the left margin.
   (and (looking-at "\\(\\sw\\|\\s_\\)+:") 0)
   ;; Same thing for `;;;' comments.
   (and (looking-at "\\s<\\s<\\s<") 0)
   ;; Simple `;' comments go to the comment-column.
   (and (looking-at "\\s<\\(\\S<\\|\\'\\)") comment-column)
   ;; Do not indent after ';;;' comments.
   (and (progn
          (previous-line)
          (beginning-of-line)
          (looking-at "\\s<\\s<\\s<")) 0)
   ;;The rest goes at the first tab stop.
   (or (car tab-stop-list) tab-width)) 
```

这将使该行直接位于 ;;; 下方 不会自动缩进。我不知道你是否注意到了，但是如果你保持原样，如果下一个认为你在评论下输入的标签是一个标签：标签将自动向左缩进，标签下方的所有内容都会自动缩进。我可以看到这对于评论指令或标题评论来说会很烦人。

# objective-c - Objective-C - 使用它的超级自定义初始化来初始化对象，你怎么能调用你自己的初始化逻辑？

> ID：14736986
> 
> 赞同：0
> 
> 时间：2013-02-06T19:18:03.613
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

我正在阅读一本 cocos2D 书籍，并且正在尝试初始化 Radar Dish 对象。动画是在 initAnimations 方法中设置的（在 init 方法中调用），但是从不调用 init 方法。在 GameLayer.m 中，他们使用 createObjectOfType 方法，该方法调用：

```
RadarDish *radarDish = [[RadarDish alloc] initWithSpriteFrameName:@"radar_1.png"]; 
```

所以initWithSpriteFrameName 是RadarDish 的超类的一个init，它设置了Radar Dish。那么 RadarDish.m 的 init 什么时候会被调用？它导致我的程序崩溃，因为动画从未在 init 中设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:48:57.423

您需要`initWithSpriteFrameName:`在任何子类中覆盖，包括`RadarDish`，它需要自己的初始化步骤。在该方法中，您需要调用超类的[指定初始化程序](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Initialization.html)，然后继续满足子类的特定需求，如下所示：

```
- (id)initWithSpritFrameName: (NSString *)frameName
{
    self = [super initWithSpriteFrameName:frameName];
    if( !self ) return nil;

    [self initAnimations];    // As long as initAnimations doesn't also call a
                              // superclass's initializer!
    // Other setup...

    return self;
} 
```

现在`[[RadarDish alloc] initWithSpriteFrameName:...]`将使用此实现，确保为您的对象设置动画。

`initAnimations`您还应该更改`init`. 调用它`setUpAnimations`或类似的东西。

# jquery - 模式不适用于 IE 中设置的 cookie

> ID：14736987
> 
> 赞同：1
> 
> 时间：2013-02-06T19:18:05.453
> 
> 标签：jquery, internet-explorer, cookies, syntax, colorbox

我在整个网站中使用 Colorbox 模式弹出窗口，但我想防止它出现在满足以下条件的情况下：

1.  该模态在过去 15 天内已经出现过一次或
2.  访问者通过特定页面进入网站，并且
3.  访问者在查看特定页面后访问网站上的任何其他页面

以下代码似乎可以正常工作，我在除 IE8 和 9 之外的所有内容中都对其进行了测试。我可以让模式在 IE 中打开一次，但不能再次打开，即使缓存/cookie 被清除并重新启动浏览器也是如此。我在控制台中看不到任何错误。谁能帮我？

我的想法是在有人进入网站时显示模式，除非页面上存在指定的 DIV 或者他们已经使用 DIV 查看了该页面。

提前感谢您的帮助。

```
 <script type="text/javascript">
            var jQuery_1_8_3 = jQuery.noConflict(true);
            jQuery_1_8_3(document).ready(function(){
                    var emailFormExists = jQuery_1_8_3('#e2ma_signup_form');
                    if (document.cookie.indexOf('visited=true') == -1 && !(emailFormExists.length)){
                        var fifteenDays = 1000*60*60*24*15;
                        var expires = new Date((new Date()).valueOf() + fifteenDays);
                        document.cookie = "visited=true;expires=" + expires.toUTCString();
                        jQuery_1_8_3.colorbox({width:"30%", inline:true, href:"#email"});
                    }
                    else
                    {
                    jQuery_1_8_3('#e2ma_signup_form').length
                        var fifteenDays = 1000*60*60*24*15;
                        var expires = new Date((new Date()).valueOf() + fifteenDays);
                        document.cookie = "visited=true;expires=" + expires.toUTCString();  
                    }
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:35:20.107

我发现问题出在哪里——IE 在“删除浏览历史”菜单顶部有一个设置，上面写着“保留收藏夹网站数据”。这个框被选中了，当我拉起窗口时，我只是快速扫描以确保在没有阅读其他所有内容的情况下选中了 cookie 选项。

我一直在使用开发人员工具中的 Cache > Clear Cookies For Domain 选项在测试时清除 cookie，但我认为它不起作用，因为在浏览历史菜单中检查了该选项并且我正在测试的页面已添加书签在我的收藏夹中。

感觉有点像一个笨蛋，之前没有抓住它，但也许我不是唯一一个，这可以帮助别人。

# javascript - location.pathname.indexOf 用于定位站点目录中的所有文件

> ID：14736993
> 
> 赞同：0
> 
> 时间：2013-02-06T19:18:19.613
> 
> 标签：javascript, jquery, html, css

我正在使用 location.pathname.indexOf 来定位 Volusion 电子商务框架中某些页面上的 CSS。基本上，我仅限于如何编辑某些 CSS，所以我发现如果我使用这个 Javascript，它为我提供了一种在通常无法编辑的页面上进行编辑的方法。

对于某些产品，它们是动态生成的，并且都可以在文件夹“ [http://www.example.com/product-p/RANDOM_PRODUCT_NUMBER.htm](http://www.example.com/product-p/RANDOM_PRODUCT_NUMBER.htm) ”中找到。我希望“product-p”文件夹中的每个页面都以 CSS 为目标。问题是，我不确定如何使用 location.pathname.indexOf 来执行此操作，我只使用它直接针对一个特定页面。

我在某处读过有关使用 * 的内容（通常以目录中的“所有”文件为目标），但我不确定如何在此 Javascript 中使用它。这是我到目前为止获得的代码示例（如果我插入特定页面，它不起作用但可以工作）：

```
if (location.pathname.indexOf('/product-p/') != -1 ) {
$("#login_head").css('top','0px !important');
$("#login_head").css('left','0px !important');
} 
```

谢谢你的帮助！

# android - Activity 被销毁但 asynctask 仍在运行

> ID：14736997
> 
> 赞同：1
> 
> 时间：2013-02-06T19:18:32.997
> 
> 标签：android

我正在处理推送通知。问题是当我加载一个非常大的表单并且我收到通知时，在表单完全加载之前我尝试点击通知我在 5-6 秒后得到一个空白屏幕。异常是由于 dialog.dismiss。

据我了解，在打开通知时，当前活动被销毁，一个新活动被创建。在创建新活动时，我正在使用 asynctask 在我的应用程序中完成一些其他功能。因此，当当前活动被销毁时，活动上下文为空，但 asynctask 仍在运行，同时还有进度对话框。一旦活动被破坏，就没有窗口显示对话框，因此窗口泄漏异常。

任何人都可以帮助我摆脱这个问题。当应用程序长时间空闲时，我也会得到空白屏幕，然后我打开通知。

有没有办法在活动被破坏后立即停止运行异步任务。

我的代码是：

公共类 MainActivity 扩展 Activity {

```
 private MyProgressDialog myProgressDialog;  
  public  LinearLayout mainPanel;  
  private VMobilet mobilet = null;  
  private String mobiletId;  
  private String formId ;

  @Override  
protected void onCreate(Bundle icicle) {  
    super.onCreate(icicle);   
    setContentView(mainPanel);   

    Intent i = getIntent();  
    mobiletId = i.getStringExtra("Mobilet Id");  
    formId = i.getStringExtra("Form ID");  
            VUiHelper.getInstance().setIsFinish(false);  
    myProgressDialog = MyProgressDialog.show(MainActivity.this,"","",true);  

    BackgroundTask backgroundTask = new BackgroundTask();  
    backgroundTask.execute(MainActivity.this);  
}  

    @Override  
protected void onPause() {  
    super.onPause();  
    if(VUiHelper.getInstance().isFinish())  
        {         
            this.finish();    
        }       
    else {  
         System.out.println("pausing mainactivity");  
    }  
}  

    @Override  
protected void onDestroy() {  
    super.onDestroy();  
    System.out.println("mainactivity ondestroy called");  
    if(mobilet != null)  
    mobilet.getForms().clear();  
    mobilet = null;  
    mainPanel = null;  
    VUiHelper.getInstance().clearControlCache();  
    VUiHelper.getInstance().MediaInput.clear();  
    System.gc();  
}  

    private class BackgroundTask extends AsyncTask<Context, String, Boolean> {  

    @Override  
    public void onPreExecute() {    
        super.onPreExecute();   
    }  

    @Override  
    protected Boolean doInBackground(Context... arg0) {  
        if (mobiletId != null) {  
            ** some logic **  
        }  
        return true;  
    }  

    @Override  
    public void onPostExecute(Boolean status){              
         super.onPostExecute(status);          
         myProgressDialog.dismiss();  //dismissing the progress dialogs    
         if (mobilet != null) {  
                      ** some logic  **  
         } else {  
              ** some logic **  
                 }  
     }  
     }      
}  
 } 
```

我尝试在 onDestroy() 中打印活动上下文，它为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:44:06.083

您可以停止运行 Asynctask（只要您有对它的引用）。你可能想做这样的事情

开始时：

```
Task ref = new Task();
ref.execute() 
```

然后在 onPause()

```
if(ref != null)
     ref.cancel(true); 
```

如果你定期做某事（比如下载），那么在你的 doInBackground() 里面有这样的东西：

```
if(isCanceled())
{
    return;
} 
```

上面的代码片段应该允许你优雅地退出 asynctask。

也在你的 onPause

```
if(myProgressDialog != null)
{
    if(myProgressDialog.isShowing())
    {
         myProgressDialog.dismiss()
    }
    myProgressDialog = null
} 
```

然后在你的 onPostExecute

```
if(myProgressDialog != null)
{
    if(myProgressDialog.isShowing())
    {
        myProgessDialog.dismiss;
        myProgessDialog = null;
    }
} 
```

在 onPuase 中将 myProgessDialog 设置为 null 应该使其在 onPOstExecute() 中为 null

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:28:52.723

[您可以通过调用cancel(Boolean)](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)来取消 AsyncTask 。有关该页面上“取消任务”的更多使用信息 ctrl-f

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:33:55.037

我认为这个问题的最佳解决方案是让您的 asyntask 检查是否仍有应用程序在运行。如果不是简单地退出。在 Activity.onPause 中设置一个标志，让异步任务在发送一些输出之前检查它。

# android - Android中从后台到前台数据的后台作业

> ID：14736999
> 
> 赞同：0
> 
> 时间：2013-02-06T19:18:45.063
> 
> 标签：android, android-service

我有一个应用程序需要跟踪我的位置，在执行此操作时读取传感器并使用信息（即我当前的速度）更新 Activity。Activity 还有一个“停止”按钮，允许用户取消后台作业。如果用户离开，数据收集应该继续，并且通知应该允许用户返回到显示信息的视图。

到目前为止，我有：

*   服务
    *   有一个`private static MyService instance`字段和一个吸气剂
    *   它设置`instance = this`在`onStartCommand(...)`
    *   它还有一个当前数据的吸气剂（包装在一个对象中）
    *   它提供了`goForeground()`一种调用`startForeground(...)`并显示通知的方法（`goBackground()`相反）
*   一个活动
    *   调用`MyService.getInstance()`，`onCreate(...)`如果它返回 null 它创建服务`startService(someIntent)`
    *   一种`updateViews()`从 Service 中提取数据并使用 Handler 安排对自身的调用以每 500 毫秒更新一次 View 的方法

这行得通。但是，我很确定这不是推荐的方法。它很难看，所有对返回值的调用`getInstance()`都包含在非空检查中。此外，所有工作都发生在 UI 线程中（当我向服务添加更多计算时，这肯定会导致问题）。另外，我想摆脱轮询服务数据的活动。

***推荐*的方法是什么？**

Android 文档目前还不是很清楚，我在 Google 上找到的所有内容要么已经过时，要么解决了不同的问题。铭记于心：

*   我的后台工作基本上是无止境的，不会在某个时间点“完成”。只有用户可以决定这一点（这是否排除了 AsyncTask？）
*   我需要将一些非原始日期从后台传递到前台
*   我需要从 Activity 控制背景
*   如果 Activity 关闭并重新打开，它应该能够“重新连接”到后台

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:29:09.553

正如您所说，从服务中提取数据不是最佳实践，幸运的是，有一个叫做[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)的东西，这个类在发送意图并且接收器配置为接收它时唤醒（在清单中）。

这允许您的服务在准备好时发送数据，或者以其他方式，您的活动可以发送对新数据的请求。

请注意，意图可以保存数据，因此您不需要为服务保存任何静态实例，只需将数据传递给意图