# StackOverflow 问答 15224000-15224999

# php - Magento Widget.xml ，禁用或隐藏参数

> ID：15224000
> 
> 赞同：2
> 
> 时间：2013-03-05T12:36:23.780
> 
> 标签：php, magento, widget

是否可以隐藏/禁用小部件中的参数？在 CMS 页面上放置小部件时，您会看到小部件参数，并且可以选择各种选项。在我的一个小部件中，如果特定模块未激活，我想隐藏一个参数。（我知道如何检查模块是否处于活动状态）我还想从模板下拉列表中删除选项值。删除使用缺失模块的模板。有Magento的方式吗？使用 Magento Enterprise 1.12.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-11T13:54:58.933

您可以通过位于模块的 etc 文件夹中的模块 widget.xml 来执行此操作。例如，在我的情况下，我想显示用于选择/关联事件（我的自定义模块中的实体）与小部件的选择器，所以，我这样做如下

在我的小部件块下（在 widget.xml 中）我添加了如下所示的参数：

```
 <eventsmanager_event_view type="tpl_eventsmanager/event_widget_view" translate="name description" module="tpl_eventsmanager">
        <name>Event Calendar</name>
        <description>Event Calendar widget</description>
        <is_email_compatible>0</is_email_compatible>
      <parameters>
            <event_id type="complex" translate="label">
                <visible>1</visible>
                <required>1</required>
                <label>Event</label>
                <type>label</type>
                <helper_block>
                    <type>tpl_eventsmanager/adminhtml_event_widget_chooser</type>
                    <data>
                        <button translate="open">
                            <open>Select Event</open>
                        </button>
                    </data>
                </helper_block>
                <sort_order>120</sort_order>
            </event_id>
        </parameters>
    </eventsmanager_event_view> 
```

然后我添加了包含此代码的文件选择器.php：

```
<?php
class Tpl_EventsManager_Block_Adminhtml_Event_Widget_Chooser extends Mage_Adminhtml_Block_Widget_Grid
{
    /**
     * Block construction, prepare grid params
     *
     * @access public
     * @param array $arguments Object data
     * @return void
     * @author TPL
     */
    public function __construct($arguments=array())
    {
        parent::__construct($arguments);
        $this->setDefaultSort('entity_id');
        $this->setDefaultDir('ASC');
        $this->setUseAjax(true);
        $this->setDefaultFilter(array('chooser_status' => '1'));
    }

    /**
     * Prepare chooser element HTML
     *
     * @access public
     * @param Varien_Data_Form_Element_Abstract $element Form Element
     * @return Varien_Data_Form_Element_Abstract
     * @author TPL
     */
    public function prepareElementHtml(Varien_Data_Form_Element_Abstract $element)
    {
        $uniqId = Mage::helper('core')->uniqHash($element->getId());
        $sourceUrl = $this->getUrl(
            '*/eventsmanager_event_widget/chooser',
            array('uniq_id' => $uniqId)
        );
        $chooser = $this->getLayout()->createBlock('widget/adminhtml_widget_chooser')
            ->setElement($element)
            ->setTranslationHelper($this->getTranslationHelper())
            ->setConfig($this->getConfig())
            ->setFieldsetId($this->getFieldsetId())
            ->setSourceUrl($sourceUrl)
            ->setUniqId($uniqId);
        if ($element->getValue()) {
            $event = Mage::getModel('tpl_eventsmanager/event')->load($element->getValue());
            if ($event->getId()) {
                $chooser->setLabel($event->getEventName());
            }
        }
        $element->setData('after_element_html', $chooser->toHtml());
        return $element;
    }

    /**
     * Grid Row JS Callback
     *
     * @access public
     * @return string
     * @author TPL
     */
    public function getRowClickCallback()
    {
        $chooserJsObject = $this->getId();
        $js = '
            function (grid, event) {
                var trElement = Event.findElement(event, "tr");
                var eventId = trElement.down("td").innerHTML.replace(/^\s+|\s+$/g,"");
                var eventTitle = trElement.down("td").next().innerHTML;
                '.$chooserJsObject.'.setElementValue(eventId);
                '.$chooserJsObject.'.setElementLabel(eventTitle);
                '.$chooserJsObject.'.close();
            }
        ';
        return $js;
    }

    /**
     * Prepare a static blocks collection
     *
     * @access protected
     * @return Tpl_EventsManager_Block_Adminhtml_Event_Widget_Chooser
     * @author TPL
     */
    protected function _prepareCollection()
    {
        $collection = Mage::getModel('tpl_eventsmanager/event')->getCollection();
        $collection->addAttributeToSelect('event_name');
        $collection->addAttributeToSelect('status');
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }

    /**
     * Prepare columns for the a grid
     *
     * @access protected
     * @return Tpl_EventsManager_Block_Adminhtml_Event_Widget_Chooser
     * @author TPL
     */
    protected function _prepareColumns()
    {
        $this->addColumn(
            'chooser_id',
            array(
                'header' => Mage::helper('tpl_eventsmanager')->__('Id'),
                'align'  => 'right',
                'index'  => 'entity_id',
                'type'   => 'number',
                'width'  => 50
            )
        );

        $this->addColumn(
            'chooser_event_name',
            array(
                'header' => Mage::helper('tpl_eventsmanager')->__('Event Name'),
                'align'  => 'left',
                'index'  => 'event_name',
            )
        );
        $this->addColumn(
            'chooser_status',
            array(
                'header'  => Mage::helper('tpl_eventsmanager')->__('Status'),
                'index'   => 'status',
                'type'    => 'options',
                'options' => array(
                    0 => Mage::helper('tpl_eventsmanager')->__('Disabled'),
                    1 => Mage::helper('tpl_eventsmanager')->__('Enabled')
                ),
            )
        );
        return parent::_prepareColumns();
    }

    /**
     * get url for grid
     *
     * @access public
     * @return string
     * @author TPL
     */
    public function getGridUrl()
    {
        return $this->getUrl(
            'adminhtml/eventsmanager_event_widget/chooser',
            array('_current' => true)
        );
    }
} 
```

# web - 如何为博主博客制作模板或主题？

> ID：15224001
> 
> 赞同：8
> 
> 时间：2013-03-05T12:36:24.170
> 
> 标签：web, themes, blogs, blogger

我了解 HTML5、CSS、PHP、SQL、JS、JQUERY。但是我仍然不知道如何制作博客模板，有人可以向我推荐任何可以帮助我开发博客模板的资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:40:23.240

没有官方手册 AFAIK。我所做的是，切换到标准博客模板（称为“简单”）并使用 Blogger 中的备份/恢复功能。这将允许您将简单模板下载为 XML 文件。由于该模板非常基础，因此很容易研究其结构并进行相应的修改。基本上，Blogger 模板由部分和小部件组成。部分是小部件的容器，小部件是博客中的特定内容区域（例如标题、存档或博客文章本身）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:08:39.437

这是另一个1

他将教程分成了不同的部分。 [http://www.thesimplexdesign.com/2011/07/how-to-make-blogger-template-body-and.html](http://www.thesimplexdesign.com/2011/07/how-to-make-blogger-template-body-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:16:04.973

Blogger 模板还使用了特殊的布局标签。

以下是完整列表：

[http://blogger2ools.mystady.com/](http://blogger2ools.mystady.com/)

# javascript - JavaScript - 将 HTML 表格数据导出到 Excel

> ID：15224002
> 
> 赞同：12
> 
> 时间：2013-03-05T12:36:26.800
> 
> 标签：javascript, html, excel, export-to-excel

我正在尝试将 HTML 表格转换为 Excel，我尝试使用将简单表格转换为 Excel 的 JavaScript 函数，它工作正常。如果我有多个表，我将如何将所有表数据添加到 Excel 文件中。这是我尝试过的。我创建了 2 个表并给出了表索引`testTable`和`testTable1`.

单击按钮时，我将如何将这 2 个表 ID 传递给 JavaScript 函数？现在点击按钮，只有第一个表被导出到 Excel，因为我只传递了`'testTable'`。我如何能够将多个表例如：`testTable`，导出`testTable1`到 Excel 中？

这是JavaScript：

```
<script>

var tableToExcel = (function() {
var uri = 'data:application/vnd.ms-excel;base64,'
, template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]>    
<xml>
<x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}
</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions>
</x:ExcelWorksheet></x:ExcelWorksheets>
</x:ExcelWorkbook>
</xml>
<![endif]-->
</head>
<body>
<table>{table}</table></body></html>'
, base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
, format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
return function(table, name) {
if (!table.nodeType) table = document.getElementById(table)
var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
window.location.href = uri + base64(format(template, ctx))
}
})()

</script> 
```

这是HTML部分，

```
<table id="testTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>ACP</th>
            <th>OEMCP</th>
            <th>Unix<br>
                NT 3.1</th>
            <th>Unix<br>
                NT 3.51</th>
            <th>Unix<br>
                95</th>
        </tr>
    </thead>
</table>
<table id="testTable1">
    <thead>
        <tr>
            <th>Name</th>
            <th>ACP</th>
            <th>OEMCP</th>
            <th>Windows<br>
                NT 3.1</th>
            <th>Windows<br>
                NT 3.51</th>
            <th>Windows<br>
                95</th>
        </tr>
    </thead>
</table> 
```

请告诉我，如何做到这一点？
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:05:13.263

我推荐另一种格式方法。John Resig 微模板是一个非常好的和简单的工具，可以满足您的需要。（[ejohn 微模板](http://ejohn.org/blog/javascript-micro-templating/)）

```
(function(){
  var cache = {};

  this.tmpl = function tmpl(str, data){
    // Figure out if we're getting a template, or if we need to
    // load the template - and be sure to cache the result.
    var fn = !/\W/.test(str) ?
      cache[str] = cache[str] ||
        tmpl(document.getElementById(str).innerHTML) :

      // Generate a reusable function that will serve as a template
      // generator (and which will be cached).
      new Function("obj",
        "var p=[],print=function(){p.push.apply(p,arguments);};" +

        // Introduce the data as local variables using with(){}
        "with(obj){p.push('" +

        // Convert the template into pure JavaScript
        str.replace(/[\r\t\n]/g, " ")
              .split("{{").join("\t")
              .replace(/((^|}})[^\t]*)'/g, "$1\r")
              .replace(/\t=(.*?)}}/g, "',$1,'")
              .split("\t").join("');")
              .split("}}").join("p.push('")
              .split("\r").join("\\'")
              + "');}return p.join('');");

    // Provide some basic currying to the user
    return data ? fn( data ) : fn;
  };
})(); 
```

使用起来非常简单。这不仅允许在 HTML 之间显示变量，还允许执行 JavaScript 代码

您的模板字符串需要一些修改才能使用此微模板。

```
{{for(var i=0; i<tables.length;i++){ }}
    <table>
        {{=tables[i]}}
    </table>
{{ } }} 
```

最后只需要选择您的示例中出现的所有表格

```
document.getElementsByTagName("table"); 
```

你可以看看它是如何工作[的 http://jsfiddle.net/Scipion/P8rpn/1/](http://jsfiddle.net/Scipion/P8rpn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:46:27.140

创建一个函数并将 tableID 传递给它

```
 function passing_id_to_excel(tableID){ 
  var myTableid =
 document.getElementById(tableID) //remaining code } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:14:00.457

1.  为每个表添加一个复选框。使用 javascript 来处理那些被检查的。
2.  如果您只想转换每个表格，您可以使用`$('table').each(function() { do something })`.

# javascript - JQuery 删除一个附加的 li fom ul

> ID：15224006
> 
> 赞同：0
> 
> 时间：2013-03-05T12:36:42.643
> 
> 标签：javascript, jquery, closest

我在`li`从其父项中删除列表项时遇到问题`ul`。通常我会做以下事情：

```
$(this).closest('li').remove(); 
```

或者

```
$(this).parent().remove(); 
```

由于列表项通过表单附加到页面，我认为`this`使用存在问题。

我的附加代码`li`如下：

```
$(document).on('click', '.add_section', function(){
var section_title=$('.section').val();
var menu_type=$('.menu_type_sel').val();
var rest_id=$('body').data('rest_id');
var menu_id=$('body').data('menu_id');
var error=false;
if(section_title=="")
{
    $('.error_box13').eq(2).html("<p>Please Add a Section Title</p>");
    $('.error_box13').eq(2).show(300);
    error=true;
    return;
}

var data="section="+section_title+"&rest_id="+rest_id+"&menu_id="+menu_id+"&menu_type="+menu_type;

$.ajax({
    type:"POST",
    url:"includes/write_section.php",
    data:data,
    success:function(html){
        if(html!="x")
        {
        var app_section="";
        app_section="<li class='hover' id='menu_"+html+"'>"+section_title+" <a href='javascript:void(0);' class='delete_section' data-id='"+html+"'>[x]</a></li>";
        $(app_section).appendTo('#sortme');
        $('.section').val("");
        }
    }
});//end ajax
}); 
```

要删除`li`到目前为止我有：

```
 $(document).on('click', '.delete_section', function(){
var delete_id=$(this).data('id');
var data="id="+delete_id;
alert(data);
$.ajax({
    type:"POST",
    url:"includes/delete_section",
    data:data,
    context:this,
    success:function(html){
        if(html!="X")
        {
            $(this).closest('li').remove();
            return false;
        }
    }
});//end ajax
}); 
```

我已添加该`context:`位作为试用版，但这仍然不会删除`li`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:43:20.430

试试老`var that = this`把戏。

```
$(document).on('click', '.delete_section', function(){
    var delete_id=$(this).data('id');
    var data="id="+delete_id;
    var that = this;
    $.ajax({
        type:"POST",
        url:"includes/delete_section",
        data:data,
        context:this,
        success:function(html){
            if(html!="X")
            {
                $(that).closest('li').remove();
                return false;
            }
        }
    });//end ajax
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:51:19.020

刚刚注意到我的愚蠢错误：

该网址缺少其 .php，因此没有返回代码。

# layout - 卡片布局 - 活动物品 - 煎茶触摸

> ID：15224007
> 
> 赞同：1
> 
> 时间：2013-03-05T12:36:43.187
> 
> 标签：layout, extjs4, sencha-touch

我有一个在卡片布局中的视图。卡片有 2 个子视图。

现在我想获得活动项目。在 extjs 我使用这个代码：

```
 activeItem = layout.getActiveItem().itemId; 
```

但是在 sencha touch 中，对于卡片布局，没有名为 getActiveItem() 的卡片布局方法。我已经提到了 sencha touch docs，我发现了这一点。

有人知道这个的替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:22:03.550

```
var panel = Ext.create('Ext.Panel', {
layout: 'card',
items: [
    {
        html: "First Item"
    },
    {
        html: "Second Item"
    },
    {
        html: "Third Item"
    },
    {
        html: "Fourth Item"
    }
]
});

panel.setActiveItem(1); 
```

它也有 getActiveItem() 方法可以使用。

参考[http://docs.sencha.com/touch/2-1/#!/api/Ext.layout.Card](http://docs.sencha.com/touch/2-1/#!/api/Ext.layout.Card)

# javascript - Sugarcrm 日期选择器禁用当前日期之前的日期

> ID：15224008
> 
> 赞同：0
> 
> 时间：2013-03-05T12:36:43.490
> 
> 标签：javascript, yui, sugarcrm

有没有人设法在当前日期之前禁用糖日期选择器上的日期？

我在自定义编程模块中调用它，如下所示：

```
<script id="script" type="text/javascript">

YAHOO.util.Event.onDOMReady(function()
{
    var now = new Date();
    Calendar.setup ({

        inputField : "date",
        ifFormat : cal_date_format,
        daFormat : "%m/%d/%Y %I:%M%P",
        button : "date_start_trigger",
        singleClick : true,
        step : 1,
        weekNumbers: false,
        startWeekday: 0

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:25:07.507

没有升级安全的方法可以做到这一点。

但是已经通过在 include/javascript/calendar.js 中添加一个参数来解决它

在该行之后搜索行 calendar.cfg.setProperty("selected" 添加以下代码

```
if(typeof(params.customMinDate) != 'undefined')
   calendar.cfg.setProperty("minDate", params.customMinDate); 
```

然后在您的日历设置数组中，您应该添加以下参数，

```
customMinDate : new Date(), 
```

现在应该禁用过去的所有日期。但这适用于文本字段上弹出的日历，而不是当您单击日历图像时。

如果您找到了解决方案，请在此处分享，这对其他人和我也有帮助。

我希望 SugarCRM 能够克服这个限制，并使其在未来的版本中更加灵活。

# asp.net - asp.net webforms 使用新步骤创建用户向导

> ID：15224009
> 
> 赞同：1
> 
> 时间：2013-03-05T12:36:43.967
> 
> 标签：asp.net

我正在使用创建用户向导，它适用于默认的 2 个步骤 1 - 输入所有信息 2 - 完成按钮

第 1 步中有一些额外的数据，我连接到创建的用户事件以启动其他一些进程。

我想为用户创建一个中间步骤，以确认他们在上一步中捕获的内容。

为此，我使用向导添加了一个新步骤，这给了我一个按钮。

但问题是第 1 步仍然会在我的数据库中创建所有用户信息，我只希望在第 2 步之后发生这种情况

# asp.net-mvc - 如何从 MVC 中的 DropDownList 访问选定的键

> ID：15224012
> 
> 赞同：0
> 
> 时间：2013-03-05T12:36:58.243
> 
> 标签：asp.net-mvc

我想从两个 DropDowns 访问 Selected Keys，然后以 Keys 作为参数调用控制器操作。

在我的 MVC 视图中，我有以下代码：

```
@model Test.Models.LoginViewModel
<p>
    Database @Html.DropDownListFor(x => x.SelectedDatabase, Model.DatabaseList, "-- Select an Item --", new {@id="databaseDD", @name="databaseDD"})
</p>
<p>
    Language @Html.DropDownListFor(x => x.SelectedLanguage, Model.LanguageList, "-- Select an Item --", new {@id="languageDD", @name="languageDD"})
</p>
<p>
    @using (Html.BeginForm("LoginToService", "Home", new { databaseKey = Model.SelectedDatabase, languageKey = Model.SelectedLanguage }, FormMethod.Post, new { target = "_self" }))
    {
        <input id="login" type="submit" name="login" value="Login" />
    }
</p> 
```

问题是，当下拉选择更改时，未设置属性 Model.SelectedDatabase 和 Model.SelectedLanguage。如何访问 Selected Keys 并将它们用作参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:15:37.697

在您的控制器中，您应该使用预定义的类，如下所示：

```
 public class DropDownItem
    {

        public int Key { get; set; }
        public string Value{ get; set; }
    } 
```

使用后端方法将所需字段映射到 DropDownItem ，例如：

```
 public SelectList FooListUsed()
    {
     List<DropDownItem> result =  from item in ListOfDataBaseTableElements
               select new DropDownItem{
                    Key = item.id,
                    Value = item.name
                     }
     result.Insert(0, new DropDownItem{ Key = 0, Value = "Select All" });
     return new SelectList(result, "Key", "Value"); //this mapping will take care of your selected value issue 
```

通过 Viewbag 或 Model 将查询结果传递给视图，让我们在本例中使用 viewbag：`ViewBag.FooList=FooListUsed();`

最后一步......使用你的下拉列表：

```
@Html.DropDownListFor(model => model.SelectedDatabase,(IEnumerable<SelectListItem>)ViewBag.FooList) 
```

# php - Oracle 11g XE 希腊字符集不显示

> ID：15224015
> 
> 赞同：1
> 
> 时间：2013-03-05T12:37:18.437
> 
> 标签：php, oracle, character-encoding, pdo, oracle11g

我使用 Oracle 11g EE 创建数据库并使用 PDO 通过 PHP 访问它，一切正常。但我不得不更改为 11g XE，因为我想在公司内部自由使用它。现在，希腊字符不会显示在 PHP 上（我得到 �������� 代替）。我试图改变字符集：

```
shutdown immediate;
startup mount;
alter system enable restricted session;
alter system set job_queue_processes=0;
alter database open;
alter database character set internal_use EL8MSWIN1253;
shutdown immediate;
startup; 
```

但我最终破坏了 CLOB。

现在，在恢复到最后一个已知的良好备份后，我正在尝试使用 CSSCAN，但我无法在我的 bin 文件夹或任何下载位置找到它。

对此有什么想法吗？？

我真的需要让它工作..

# php - 如何在不使用提交的情况下以另一种形式发布变量值

> ID：15224018
> 
> 赞同：-2
> 
> 时间：2013-03-05T12:37:32.610
> 
> 标签：php, post, http-post

我试图`$_POST['admin_name'];`在下一页上回显，但它不起作用。

我怎样才能做到这一点？

```
if(($a_name==$adminname)&&($pass_word==$pass)) {
    if($a_name=="goher") {
        $_POST['admin_name']=$a_name;
        echo "<script>window.location='home.php'</script>";
    }
    else {
       $_POST['admin_name']=$a_name;
       echo "<script>window.location='upload.php'</script>";
    }
}
else {
    echo "<script>window.location='signin.php?msg=Try Again'</script>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:40:31.047

分配某些东西`$_POST`不会使数据在其他页面上可用（在您的情况下甚至不发布）。

我认为您想要的是`$_SESSION`- 使用会话时，您存储在那里的数据将在后续页面加载时可用（假设您总是调用`session_start()`）。

# sharepoint - 如何在 Sharepoint 2007 中以编程方式将文档库文档复制到本地驱动器

> ID：15224019
> 
> 赞同：1
> 
> 时间：2013-03-05T12:37:38.623
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, splist

如何在 Sharepoint 2007 中以编程方式将文档库文档复制到本地驱动器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:16:55.073

我不在我的电脑前，但这样的事情应该可以解决问题。

```
using (SPSite site = new SPSite("http://sitecol"))
{
   SPWeb web = site.RootWeb;
   SPFolder docLib = web.GetFolder("DocLibName");

   foreach (SPFile f in docLib.Files)
   {
      // Use RWEP when accessing local file system
      SPSecurity.RunWithElevatedPrivileges(delegate(){
      {
         System.IO.File.WriteAllBytes(@"C:\Location\" + f.Name, f.OpenBinary());
      }
   }
} 
```

基本上抓取您的网站集，然后抓取您的 spweb 对象，然后抓取您的文档库作为 SPFolder。然后对该文件夹中的所有文件执行 foreach 循环，将字节数组保存到本地文件系统。

希望这可以帮助！

# ibm-mq - MQQueueManager(String queueManagerName) 抛出 MQException

> ID：15224020
> 
> 赞同：2
> 
> 时间：2013-03-05T12:37:47.487
> 
> 标签：ibm-mq

我有一个 java 程序来浏览队列中的消息。

当我运行应用程序时，它显示“java.lang.NoClassDefFoundError：”错误我还有 jar com.ibm.mq，其中包含类 MQQueueManager。但我收到错误消息，例如“此元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。”

第二个问题是一个浏览消息的程序。浏览消息后如何仅从消息中获取 messageID。

请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:08:55.223

通常，您看到的错误是当人们获取 jar 文件而不是从供应商分发媒体安装客户端时引起的。如果您没有从媒体安装 IBM MQ 客户端，您可以免费下载[SupportPac MQC75](http://ibm.co/SupptPacMQC75)。这将提供完整的客户端、测试安装的初始验证程序 (IVP) 以及许多其他诊断程序。

至于消息ID...

```
 MQMessage myMessage = new MQMessage();
     byte myMessageID = myMessage.messageId; 
```

...根据[此处](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQMessage.html)和[此处](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQMD.html#messageId)的文档。

# redirect - 批处理文件：如何重定向从新命令提示符执行的应用程序输出

> ID：15224021
> 
> 赞同：1
> 
> 时间：2013-03-05T12:37:55.120
> 
> 标签：redirect, batch-file

我正在编写一个批处理文件，它将调用应用程序（XYZ.exe）来更新固件，然后调用其他应用程序。

调用时，应用程序 XYZ.exe 在新的控制台窗口中打开、执行，然后提示用户输入。一旦用户提供输入，它就会返回原始控制台窗口并执行其余部分。

我有两个问题：

1) 退出时，应用程序提示用户“按任意键”。问题是我需要它在没有任何用户输入的情况下退出。是否可以从批处理文件中提供输入。注意：此应用程序在另一个控制台中运行，批处理文件在另一个控制台中执行

2）如何重定向应用程序的输出。注意：应用程序选项 > xxx.txt 文件不起作用。我希望这是由于应用程序在另一个控制台中运行。

# android - addView android强制关闭

> ID：15224026
> 
> 赞同：1
> 
> 时间：2013-03-05T12:38:08.423
> 
> 标签：android, dynamic, views

以下是我的代码。我正在尝试向我已经创建的 LinearLayout *activity_dynamic* 添加一个视图

```
public void onClick(View v)

   { 

    switch(v.getId()) {
   case R.id.add:

       Log.v("test","as");
       TextView t=(TextView) findViewById(R.id.a_text_view);
       LinearLayout layout = (LinearLayout)     findViewById(R.layout.activity_dynamic);
       layout .addView(t, 1);           

   }
} 
```

activity_dynamic.xml 的代码是：

```
<Button
    android:id="@+id/add"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="22dp"
    android:text="Add View" />

</LinearLayout> 
```

一切正常，但是当我按下 Add View 时，我强制关闭

LogCat 读数如下：

```
03-05 18:05:54.639: E/Trace(10003): error opening trace file: No such file or directory (2)
03-05 18:05:55.169: D/libEGL(10003): loaded /system/lib/egl/libEGL_adreno200.so
03-05 18:05:55.179: D/libEGL(10003): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-05 18:05:55.179: D/libEGL(10003): loaded /system/lib/egl/libGLESv2_adreno200.so
03-05 18:05:55.189: I/Adreno200-EGL(10003): <qeglDrvAPI_eglInitialize:294>: EGL 1.4     QUALCOMM build: AU_LINUX_ANDROID_JB.04.01.01.00.036_msm8960_JB_CL2644550_release_AU (CL2644550)
03-05 18:05:55.189: I/Adreno200-EGL(10003): Build Date: 07/31/12 Tue
03-05 18:05:55.189: I/Adreno200-EGL(10003): Local Branch: 
03-05 18:05:55.189: I/Adreno200-EGL(10003): Remote Branch: quic/master
03-05 18:05:55.189: I/Adreno200-EGL(10003): Local Patches: NONE
03-05 18:05:55.189: I/Adreno200-EGL(10003): Reconstruct Branch:     AU_LINUX_ANDROID_JB.04.01.01.00.036 +  NOTHING
03-05 18:05:55.319: D/OpenGLRenderer(10003): Enabling debug mode 0
03-05 18:05:59.624: V/test(10003): as
03-05 18:05:59.624: D/AndroidRuntime(10003): Shutting down VM
03-05 18:05:59.624: W/dalvikvm(10003): threadid=1: thread exiting with uncaught exception (group=0x40d5e300)
03-05 18:05:59.874: E/AndroidRuntime(10003): FATAL EXCEPTION: main
03-05 18:05:59.874: E/AndroidRuntime(10003): java.lang.NullPointerException
03-05 18:05:59.874: E/AndroidRuntime(10003):    at com.example.database.Dynamic.onClick(Dynamic.java:52)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.view.View.performClick(View.java:4084)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.view.View$PerformClick.run(View.java:16966)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.os.Handler.handleCallback(Handler.java:615)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.os.Looper.loop(Looper.java:137)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at android.app.ActivityThread.main(ActivityThread.java:4978)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-05 18:05:59.874: E/AndroidRuntime(10003):    at dalvik.system.NativeStart.main(Native Method) 
```

为什么会这样？

感谢您的帮助，谢谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:36:41.577

根据您的代码，出了什么问题

```
 layout = (LinearLayout) findViewById(R.layout.activity_dynamic); 
```

你得到带有布局的LinearLayout，你应该使用它`R.id.yourlayoutid`

应该像

```
 layout = (LinearLayout) findViewById(R.id.yourlayoutid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:46:01.693

```
 TextView t=(TextView) findViewById(R.id.a_text_view); 
```

您不能添加文本视图，因为它已经有一个您需要的父视图

1.  从 xml 布局中删除 textview 并动态创建 textview 并将其添加到 linearlayout。

这样做

```
TextView t=new TextView(this);
layout.addView(t); 
```

你有没有在你的 switch case 语句中添加中断

```
 case R.id.add:

           Log.v("test","as");
            TextView t=new TextView(this);
          layout.addView(t);

 break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:51:05.557

```
TextView t=(TextView) findViewById(R.id.a_text_view); 
```

您不能添加文本视图，因为它已经有一个父视图，从 xml 布局中删除。而且您还需要在 uiThread 中写下以下几行`(onCreate())`。

```
 LinearLayout layout = (LinearLayout) 
findViewById(R.layout.activity_dynamic); 
```

进而，

```
 public void onClick(View v) { 
switch(v.getId()) { 
   case R.id.add:

   Log.v("test","as");
   TextView t=new TextView(yourActivity.this); 
   layout.addView(t,1);          } } 
```

编辑：完整的代码将如下所示，

```
LinearLayout layout;
Button btnAdd;
TextView txtView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    layout = (LinearLayout) findViewById(R.id.activity_dynamic);
    btnAdd = (Button) findViewById(R.id.add);

    btnAdd.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    switch(v.getId()) { 
       case R.id.add:
       Log.v("test","as");
       TextView t=new TextView(this); 
       layout.addView(t,1);          
    }
} 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:02:25.830

添加`this.addview(layout)`代码

# android - 自定义 AutoCompletevView，如 android 中的 facebook 评论字段

> ID：15224027
> 
> 赞同：0
> 
> 时间：2013-03-05T12:38:08.600
> 
> 标签：android, autocomplete, android-custom-view, autocompletetextview

我想像这样制作自定义 AutoCompleteView ..

![在此处输入图像描述](../Images/b3068fe73a98f7c32a8c440e3536cc0e.png)

添加我的特殊字符时应该填充它（如 facebook .. 当您键入 @B 时，所有以“B”开头的朋友都将被填充，我们可以选择名称）。

在添加“@”之前，不应在键入时填充它。

当添加“@”时，自动完成视图被下拉，我们可以选择名称，选择后将被附加。

![在此处输入图像描述](../Images/ff462167d33c67b1331051b1f324160b.png)

我发现[了这一点](http://techdroid.kbeanie.com/2010/04/custom-autocomplete-for-android.html)，但并不满意。我需要线索。他们已经实现了......就像你输入'@'下拉填充时一样。但我必须自定义更多。现在，如果其他人有想法或任何未完成的来源，我需要帮助。

我必须自己尝试，但在实施 customview 之前让我问一下以节省我的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:20:17.010

您必须通过扩展类来制作自定义自动完成视图。并且您的问题中提到的代码将被更改。

```
public class CustomAutoComplete extends AutoCompleteTextView {
private String previous = "";
private String seperator = "@";
boolean isState = false;

public CustomAutoComplete(final Context context, final AttributeSet attrs,
        final int defStyle) {
    super(context, attrs, defStyle);
    this.setThreshold(1);

}

public CustomAutoComplete(final Context context, final AttributeSet attrs) {
    super(context, attrs);
    this.setThreshold(1);
}

public CustomAutoComplete(final Context context) {
    super(context);
    this.setThreshold(1);
}

/**
 * This method filters out the existing text till the separator and launched
 * the filtering process again
 */
@Override
protected void performFiltering(final CharSequence text, final int keyCode) {
    String filterText = text.toString().trim();
    String lastchar = filterText.substring(filterText.length() - 1,
            filterText.length());
    if (filterText.length() == 1) {
        if (lastchar.equals(seperator)) {
            isState = true;
        } else {
            isState = false;
        }
    }
    previous = filterText.substring(0,
            filterText.lastIndexOf(getSeperator()) + 1);

    filterText = filterText.substring(filterText
            .lastIndexOf(getSeperator()) + 1);

    if ((lastchar.equals(seperator)) || isState) {
        super.performFiltering(filterText, keyCode);

        isState = true;

    }
}

/**
 * After a selection, capture the new value and append to the existing text
 */
@Override
protected void replaceText(final CharSequence text) {
    isState = false;
    super.replaceText(previous + text);// + getSeperator());

}

public String getSeperator() {
    return seperator;
}

public void setSeperator(final String seperator) {
    this.seperator = seperator;
}

} 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T17:18:42.243

您可以使用`MultiAutoCompleteTextView`. 只需实现您自己的`Tokenizer`类，它就可以工作。对于提及我已经写了一个类，你可以使用它。

```
package howdysam.com.howdysuggesttext;

import android.text.SpannableString;
import android.text.Spanned;
import android.text.TextUtils;
import android.widget.MultiAutoCompleteTextView;

public class AtTokenizer implements MultiAutoCompleteTextView.Tokenizer {

    @Override
    public int findTokenStart(CharSequence text, int cursor) {
        int i = cursor;

        while (i > 0 && text.charAt(i - 1) != '@') {
            i--;
        }
        while (i < cursor && text.charAt(i) == '@') {
            i++;
        }

        return i;
    }

    @Override
    public int findTokenEnd(CharSequence text, int cursor) {
        int i = cursor;
        int len = text.length();

        while (i < len) {
            if (text.charAt(i) == '@') {
                return i;
            } else {
                i++;
            }
        }

        return len;
    }

    @Override
    public CharSequence terminateToken(CharSequence text) {
        int i = text.length();

        while (i > 0 && text.charAt(i - 1) == '@') {
            i--;
        }

        if (i > 0 && text.charAt(i - 1) == '@') {
            return text;
        } else {
            if (text instanceof Spanned) {
                SpannableString sp = new SpannableString(text + "@");
                TextUtils.copySpansFrom((Spanned) text, 0, text.length(),
                        Object.class, sp, 0);
                return sp;
            } else {
                return text;
            }
        }
    }
} 
```

然后在视图部分（活动或片段）而不是做

```
 edit.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

做以下

```
edit.setTokenizer(new AtTokenizer()); 
```

有用。

# java - 使用 Powermock 测试 Spring 控制器

> ID：15224028
> 
> 赞同：5
> 
> 时间：2013-03-05T12:38:08.710
> 
> 标签：java, spring-mvc, mockito, powermock, spring-test-mvc

我有一个测试特定控制器的类，它工作正常

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:config/test-applicationContext-config.xml")
@TestExecutionListeners({ 
    WebContextTestExecutionListener.class, 
    DependencyInjectionTestExecutionListener.class,
    DirtiesContextTestExecutionListener.class })
public class TestAdminController {  
     //.....
} 
```

我在那里使用来自[mockito.org](https://code.google.com/p/mockito/)的 Google 的 Mockito 库来模拟我的底层 bean。

**现在我的问题如下：**我有一些类也需要模拟，但它们有`final`方法，谷歌的模拟似乎没有解决这个问题。我的一位同事建议使用 powermock.org 的[Powermock](https://code.google.com/p/powermock/)。但它需要用注释来注释测试器类`@RunWith(PowerMockRunner.class)`。如果我使用它，我必须删除注释`@RunWith(SpringJUnit4ClassRunner.class)`，这会给我带来问题，因为不会创建 Spring 测试上下文。我怎样才能避免这种情况？

建议后我已配置为使用`PowerMockRule`而不是`@RunWith`注释

我的项目maven依赖如下

```
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-mockito-release-full</artifactId>
    <version>1.5</version>
    <type>pom</type>
</dependency> 
<dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4-rule</artifactId>
        <version>1.5</version>
        <scope>test</scope>
</dependency>
<dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-classloading-xstream</artifactId>
        <version>1.5</version>
        <scope>test</scope>
</dependency> 
```

现在我的课看起来像这样（另一个控制器测试）

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:config/test-applicationContext-config.xml")
@TestExecutionListeners({ 
    WebContextTestExecutionListener.class, 
    DependencyInjectionTestExecutionListener.class,
    DirtiesContextTestExecutionListener.class })
@PrepareForTest(ADSynchronizationImpl.class)
public class ThirdPartyLoginControllerTest {
    @Rule
    public PowerMockRule rule = new PowerMockRule();

    @Autowired
    private ThirdPartyLoginController thirtPartyLoginController;

    @Autowired
    private MockFactoryForControllers mockFactory;

    @Test
    public void testLoginActiveDirectory(){

    }
} 
```

但是在运行我的测试之后，我得到了以下异常跟踪

> com.thoughtworks.xstream.converters.ConversionException：javassist.NotFoundException：com.somecompany.analytics.manager.db.api.MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415：javassist.NotFoundException：com.somecompany.analytics.manager.db.api。 MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415 ---- 调试信息 ---- 消息：javassist.NotFoundException: com.somecompany.analytics.manager.db.api.MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415 原因异常：java.lang。 RuntimeException 原因消息：javassist.NotFoundException：com.somecompany.analytics.manager.db.api.MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415 类：com.somecompany.ui.controllers.ThirdPartyLoginController 所需类型：com.somecompany.ui.controllers .ThirdPartyLoginController 转换器类型：com.thoughtworks。xstream.converters.reflection.ReflectionConverter 路径：/org.powermock.modules.junit4.rule.PowerMockStatement$1/outer-class/fNext/fTarget/thirtPartyLoginController/mlDao 行号：14 类[1](https://code.google.com/p/mockito/) ：com.somecompany.ui.controllers.ThirdPartyLoginControllerTest 类[2](https://code.google.com/p/powermock/) ：org.junit.internal.runners.statements.InvokeMethod 类[3]
> ：org.powermock.modules.junit4.rule.PowerMockStatement 类[4]
> ：org.powermock。 modules.junit4.rule.PowerMockStatement$1 版本
> : null ------------------- 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java: 79) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66) 在 com.thoughtworks.xstream.converters.reflection .AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarstract.java(Abs :234) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72) 在 com。thinkworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField( AbstractReflectionConverter.java:355) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234) 在 com .thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65) 在 com.thoughtworks.xstream.core。TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66) at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355) at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java: 306) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72) 在 com.thoughtworks.xstream.core .AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter。unmarshallField(AbstractReflectionConverter.java:355) at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306) at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:23)在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother (TreeUnmarshaller.java:66) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134) 在 com.thoughtworks。 xstream.core。AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32) at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1052) at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1036) at com.thoughtworks.xstream .XStream.fromXML(XStream.java:912) 在 com.thoughtworks.xstream.XStream.fromXML(XStream.java:903) 在 org.powermock.classloading.DeepCloner.clone(DeepCloner.java:54) 在 org.powermock。 classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:89) at org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:78) at org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:49)在 org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74) 在 org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82) 在 org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72) 在 org.springframework.test。 context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236) at org.junit.runners.ParentRunner.access$000(ParentRunner.java: 53) 在 org.springframework.test.context.junit4.statements 的 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)。RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) at org.junit.runners.ParentRunner.run(ParentRunner.java:309)在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt .internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit .runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 引起：java.lang.RuntimeException：javassist.NotFoundException：com.somecompany.idm.analytics.manager.db。 api.MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415 at org.powermock.core.classloader.MockClassLoader.loadUnmockedClass(MockClassLoader.java:199) at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:149) at org. powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at com.thoughtworks.xstream.core.util.ClassLoaderReference.loadClass(ClassLoaderReference.java: 31) 在 com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:49) 在 com.thoughtworks。xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:55) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java: 30) 在 com.thoughtworks.xstream.mapper.PackageAliasingMapper.realClass(PackageAliasingMapper.java:88) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.ClassAliasingMapper .realClass(ClassAliasingMapper.java:79) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com。 com.thoughtworks.xstream.mapper.MapperWrapper 上的 thinkworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)。realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks .xstream.mapper.ArrayMapper.realClass(ArrayMapper.java:74) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java :30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper。 MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream。mapper.MapperWrapper.realClass(MapperWrapper.java:30) 在 com.thoughtworks.xstream.mapper.CachingMapper.realClass(CachingMapper.java:45) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.determineType(AbstractReflectionConverter.java:第 458 章.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72) ... 57 更多原因：javassist.NotFoundException: com.somecompany.analytics.manager.db.api.MlDao$$EnhancerByMockitoWithCGLIB$$b86d7415 at javassist.ClassPool.get (ClassPool.java:450) 在 org.powermock.core。classloader.MockClassLoader.loadUnmockedClass(MockClassLoader.java:192) ... 87 更多

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:18:01.093

看看[这篇文章](http://www.jayway.com/2010/12/28/using-powermock-with-spring-integration-testing/)，它解释了如何使用 PowerMock 和`SpringJUnit4ClassRunner`. 基本上，你只需要使用一个[特殊的`PowerMockRule`规则](https://code.google.com/p/powermock/wiki/PowerMockRule)：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:config/test-applicationContext-config.xml")
@TestExecutionListeners({ 
    WebContextTestExecutionListener.class, 
    DependencyInjectionTestExecutionListener.class,
    DirtiesContextTestExecutionListener.class })
public class SpringExampleTest {

    @Rule
    public PowerMockRule rule = new PowerMockRule();

} 
```

[编辑：其他人](https://code.google.com/p/powermock/issues/detail?id=350)似乎和你有同样的问题`@PowerMockRule`。[改用 PowerMockAgent](https://code.google.com/p/powermock/wiki/PowerMockAgent)可以解决您的问题。另请参阅SO 上的[这个答案](https://stackoverflow.com/a/13043338/500478)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-23T09:47:52.397

您也可以尝试使用注释您的测试类

```
@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class) 
```

[请参见此处](https://github.com/powermock/powermock/blob/powermock-1.6.0/examples/spring-mockito-delegate/src/test/java/org/powermock/examples/spring/mockito/SpringExampleTest.java)的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-25T13:03:34.543

您可以使用 JMockit 而不是 Powermock。它可以做 Powermock 可以做的所有事情，而且它不需要 @RunWith 子句，因此它不会干扰您的 Spring 测试运行器。我发现 PowerMockRule 引入的问题多于它解决的问题......

# ssrs-2008 - SSRS - 报告是否执行子查询？

> ID：15224037
> 
> 赞同：1
> 
> 时间：2013-03-05T12:38:55.743
> 
> 标签：ssrs-2008, report, reporting, reporting-services

我已经翻遍了，找不到我的问题的答案；我什至无法确定这是否可能。

参考附图，您会注意到这是一个激活了数据分组的报表。

1) 报告按日期显示向一个帐户开具发票的所有服务。您可以展开该组以查看当天构成该服务一部分的所有交易。（例如，您可以每天多次使用相同的服务）

2) 这是开票服务的详细布局。此列表因每个服务而异，但主要会显示一个汇总交易列表 (PK BatchId)，旁边有“+”符号，可以深入查看批次的详细报告。

**我的问题：**
当加载报表报告时，我们现在多次点击多个表，以生成要在#2 中分组和显示的数据（参考图片）。

我们正试图像瘟疫一样避免这种情况。

**我的问题**
有没有办法在且仅当用户单击“+”符号或“+”当前位于＃1 中的“展开”图像时填充＃2。

换句话说。我们处理组函数并在没有详细信息的情况下填充语句。当用户点击#1 时，我们加载一个存储过程，填充一个数据集并在#2 中显示数据。

对此有什么想法吗？

![报表报告](../Images/d5500313b677ae6880d90f50d5fbda22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:35:17.983

[钻取报告](http://technet.microsoft.com/en-gb/library/ff519554.aspx)在这里看起来是一个很好的解决方案。有关这些工作原理的更多信息，请参阅链接。所以基本上你有没有详细信息的报告，但是当有人点击 1 时，它会打开一个新报告，其中包含详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:36:47.813

经过测试，我确认子报表即使隐藏在可以切换的元素中也会被执行。

所以子报表不会回答这个问题。

[编辑：以前我认为它们可以使用。JAT 指出这个否定的答案可能有一些价值，所以我离开了。]

# jsonp - 重命名 JSONP 的回调参数

> ID：15224038
> 
> 赞同：2
> 
> 时间：2013-03-05T12:39:01.920
> 
> 标签：jsonp, servicestack

有没有办法重命名包含回调函数名称的查询字符串参数？比如说，我有一个无法访问源的旧版应用程序，我希望将其切换到 ServiceStack，但该应用程序使用“函数”查询字符串参数，而 SS 需要“回调”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:05:28.637

您可以在内部使用响应过滤器来做到这一点`AppHost.Configure()`：

```
ResponseFilters.Add((req, res, dto) =>
    {
        var func = req.QueryString.Get("function");
        if (!func.isNullOrEmpty())
        {
            res.AddHeader("Content-Type", ContentType.Html);
            res.Write("<script type='text/javascript'>{0}({1});</script>"
                .FormatWith(func, dto.ToJson()));
            res.Close();
        }
    }); 
```

# ajax - datatables fnRowCallback：将单击绑定到事件处理程序

> ID：15224039
> 
> 赞同：0
> 
> 时间：2013-03-05T12:39:04.073
> 
> 标签：ajax, jquery, datatables

使用数据表和 fnRowCallback。

我正在尝试将点击绑定到第二列的每一行。该表在第二列中返回正确的锚点以及正确的变量，但是当我单击链接时，ajax 将每个都作为相同的用户 ID 发送。

我想我需要使用 .each().click 但我尝试的每件事都不起作用。

任何人都知道我做错了什么......

```
 "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
    $('td:eq(1)', nRow).html('<a href="#" id="view_log.php?userid='+ aData[1] +'&acyear='+ aData[2] +'" class="view_log">'+ aData[3] +'</a>').click(function() {
        var url = $('.view_log').attr("id");
        var timestamp = (new Date()).getTime();
        $("#table_container").hide();
        $(".themenu").hide();
        $("#log").show();
        $.ajax({
        type: "GET",
        url: ''+url+'&x='+timestamp,
        dataType: "html",
        success: function(data) {
              $("#log").html(data);
        }
       });
    });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:33:42.370

`$('.view_log').attr("id");`只会得到第一次出现。

在此 SO 页面中，在控制台中尝试此操作：

```
$('.post-tag')   //returns all the tags element
$('.post-tag').attr('href')      //returns only the href value of the first occurrance 
```

在处理程序中，指定事件参数，然后`$(e.target)`改为使用。所以`$(e.target).attr('id')`应该做的工作。

```
... .click(function(e){
  var url = $(e.target).attr('id');
}); 
```

[**演示**](http://jsfiddle.net/LwW8K/)

# mongodb - 将 .NET 对象插入 MongoDB

> ID：15224048
> 
> 赞同：0
> 
> 时间：2013-03-05T12:39:25.727
> 
> 标签：mongodb, mongodb-.net-driver

我们有一个包含数百个类/枚举的大型应用程序，我们希望使用 MongoDB 来存储其中的一些。

情况是当前有一个系统，我们将 .NET 对象二进制序列化为 SQL 数据库中的字段，然后按需反序列化。我们想要的是以一种允许我们直接查询对象属性的方式将对象放入 Mongo（即，无需将对象加载到内存、反序列化等）。这样我们就可以开始从历史数据中获取一些分析，而无需大幅更改代码库。

我的问题是，这很容易吗？C# 驱动程序中是否有内置的序列化程序来执行此操作？

如果我试图做的事情本质上是错误的，我也愿意接受提出更好方法的答案。

**更新：**需要明确的是，我要做的是获取一个使用 NHibernate 加载的对象，并将其作为 Queryable 对象插入到 Mongo 中。最终，我也想在某个时候将它加载回内存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:45:20.370

MongoDB 基本上是 JSON 文档的存储，所以如果你可以以 JSON 方式序列化你的对象，你应该可以将它存储在 MongoDB 中，我假设有很多用于 .NET 的 JSON 序列化器，所以应该很容易找到一。

一旦所有内容都以 JSON 格式存储在 MongoDB 中，您就可以在没有任何其他工具直接查询数据库的情况下对其进行查询。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:23:37.730

您可以使用[Simple.Data.MongoDB](http://goo.gl/cFUak)一个用于 MongoDB 的轻量级动态数据访问 .NET 组件

# java - 如何使对话框中的整个视图可点击？

> ID：15224049
> 
> 赞同：1
> 
> 时间：2013-03-05T12:39:25.693
> 
> 标签：java, android, view, dialog, onclicklistener

我可以单击每个视图内的对话框和文本。我希望所有视图都是可点击的，只有文本。

编码 ：

```
 final Dialog dialog = new Dialog(List_Lists.this);
        dialog.setContentView(R.layout.dialog_edit_tables);
        dialog.setTitle("Action for " + table);

        TextView delete = (TextView) dialog
                .findViewById(R.id.tvDeleteTable);
        TextView cancel = (TextView) dialog.findViewById(R.id.tvCancel);

        OnClickListener l = new OnClickListener() {

            @Override
            public void onClick(View v) {

                dbAdapter = new DBmethods(getApplicationContext());
                switch (v.getId()) {

                case R.id.tvDeleteTable:
                    viewListsAdapter.listsV.remove(pos);
                    dbAdapter.deleteTable(table);
                    break;
                case R.id.tvCancel:
                    dialog.dismiss();
                    break;
                case R.id.bTableRenameName:

                    if(dbAdapter.checkTableNameOK(List_Lists.this  ,newName.getText().toString())){

                        viewListsAdapter.listsV.remove(pos);
                        viewListsAdapter.listsV.add(pos, newName.getText().toString().trim());
                        dbAdapter.renameTable(table , newName.getText().toString().trim());
                        renamedialog.dismiss();
                    };

                    break;

                default:
                    break;
                }
                // if button is clicked, close the custom dialog
                dialog.dismiss();
                lv.invalidateViews();
            }
        };

        delete.setOnClickListener(l);
        cancel.setOnClickListener(l);

        dialog.show();
    }
}); 
```

}

正如我所说，如果用户按下视图内的文本，此代码工作正常，但空视图显然不会响应。谢谢 ！

![如果用户按下红色点它激活输入，如果绿色而不是重复等等](../Images/a9881d0a3bb2464d679f00cb05cf5ab1.png)

如果用户按下红色点它激活输入，如果绿色比重复等等......当前状态是你必须按下这个词，如果你按下彩色点它什么都不做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:44:39.543

如果我没有错，你需要这个来使布局可点击

尝试这样的事情你可以在它上面添加一个 OnClickListener ：

```
//onCreate
LinearLayout layout = (LinearLayout) findViewById(R.id.LinearLayout01);
layout.setOnClickListener(yourOnClickListener); 
```

应该工作;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:41:36.120

如果我没有错，那么您正在使用`listview`或`tableview`显示文本。
你可以做一件事。
将文本视图`layout_width`设为`fill_parent`
这样，您将能够触摸您标记的位置。
希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:46:39.350

创建你的 id`dialog_edit_tables`

让`android:id=@+id\testing`在你的xml中说。

现在写这个

```
LinearLayout yourlayout = (LinearLayout) findViewById(R.id.testing);
yourlayout.setOnClickListener(l); 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:33:31.453

您尚未显示 XML 布局，但将可点击文本视图的宽度设置为 fill_parent 应该可以工作，还要确保您的父布局也将宽度设置为 fill_parent。

onClickListener 不是基于文本，而是基于实际组件，因此看起来 layout_width 属性设置为 wrap_content，因此组件只有文本的长度，因此只有文本所在的位置是可点击的。希望这是有道理的。

# c# - 静态方法中的变量是否会自动变为静态，因为它们在 c# 中的静态范围内？

> ID：15224050
> 
> 赞同：10
> 
> 时间：2013-03-05T12:39:25.897
> 
> 标签：c#, variables, methods, static

```
public static void DoSomething()
{
int a;
string b;

//..do something
} 
```

在上面的例子中，我声明了两个变量。它们是否因为包含它们的方法是静态的而变成静态的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T12:41:24.020

不，只有方法是静态的，而不是变量。

来自 MSDN：

> C# 不支持静态局部变量（在方法范围内声明的变量）。

如果您想在静态成员中有静态变量，请在静态方法之外进行声明，

```
private static int _var = 0;
public static void SampleMethod()
{
     _var++;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T12:42:00.417

尽管在 C 中可用，但在 C# 中不支持静态局部变量。

如果你想要一个等效的局部静态变量，你可以在类上创建一个实例变量，或者一个静态变量。否则，请考虑方法本身是否属于静态类以及它是否应该属于不同类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:42:14.613

来自[**MSDN**](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)

> C# 不支持静态局部变量（在方法范围内声明的变量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:45:50.657

我对您的意见持肯定态度，但在下面的示例代码中，我正在处理有关使用受保护内存的访问冲突异常。因此，它可能不支持静态局部变量，但在内存管理中它可以指向相同的地址。

```
public static byte[] RawSerialize(object anything)
        {

                int rawsize = Marshal.SizeOf(anything);
                IntPtr buffer = Marshal.AllocHGlobal(rawsize);
                Marshal.StructureToPtr(anything, buffer, false);
                byte[] rawdata = new byte[rawsize];
                Marshal.Copy(buffer, rawdata, 0, rawsize);
                Marshal.FreeHGlobal(buffer);
                return rawdata ;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T12:41:18.870

你不能有局部静态变量。

> C# 不支持静态局部变量（在方法范围内声明的变量）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-17T13:47:26.727

不，只有方法是静态的。

来自[MSDN](https://msdn.microsoft.com/en-us/library/79b3xss3.aspx)：

> C# 不支持静态局部变量（在方法范围内声明的变量）。

[在](https://msdn.microsoft.com/en-us/library/98f28cdx.aspx)这里：

> static 修饰符可以与类、字段、方法、属性、运算符、事件和构造函数一起使用，但不能与索引器、析构函数或类以外的类型一起使用。

如您所见，未提及局部变量。

但是，您可以使用静态字段：

```
public class MyClass
{
    private static int MyVariable = 10;

    public static void MyMethod()
    {
      MyVariable++;
    }
} 
```

一个类可以是静态的，它可以有静态成员，包括函数和字段，但不能是静态范围内的变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-05T01:57:19.117

**您可以使用System.Web.HttpContext.Current.Session**在 ASP.NET 中拥有“静态”基于会话的变量。

例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace SomeNameSpace
{
    public static class CSession
    {
        private static readonly string zE = "";
        private static readonly string CrLF = Environment.NewLine;

        /// <summary>
        /// 
        /// </summary>
        public static bool HasSession { get { return HttpContext.Current != null && HttpContext.Current.Session != null; } }

        /// <summary>
        /// Get a session variable
        /// </summary>
        /// <param name="pSessionKey"></param>
        /// <returns></returns>
        public static object Get(string pSessionKey)
        {
            object t = null;
            try
            {
                if (HasSession && HttpContext.Current.Session[pSessionKey] != null) { t = (object)HttpContext.Current.Session[pSessionKey]; }

            }
            catch (Exception ex) { t = null; string m = ex.Message; }
            return t;
        }//object Get(string pSessionKey)

        /// <summary>
        /// Set a session variable
        /// </summary>
        /// <param name="pSessionKey"></param>
        /// <param name="pObject"></param>
        public static void Set(string pSessKey, object pObject)
        {
            if(!HasSession) { return; }
            HttpContext.Current.Session.Remove(pSessKey);
            HttpContext.Current.Session.Add(pSessKey, pObject);
        }//void Set(string pSessionKey, object pObject)

        public static string GetString(string pSessKey)
        {
            string sTemp = zE;
            object t = Get(pSessKey);
            if (t != null) { sTemp = (string)t; } else { sTemp = zE; }
            return sTemp;
        }//string GetString(string pSessionKey)

        public static int GetInt(string pSessKey)
        {
            int s = 0;
            object t = Get(pSessKey);
            if (t != null) { s = (int)t; }
            return s;
        }//int GetInt(string pSessionKey)

        public static Int32 GetInt32(string pSessKey)
        {
            Int32 s = 0;
            object t = Get(pSessKey);
            if (t != null) { s = (Int32)t; }
            return s;
        }//Int32 GetInt32(string pSessionKey)

        public static bool GetBool(string pSessKey)
        {
            bool s = false;
            object t = Get(pSessKey);
            if (t != null) { s = (bool)t; }
            return s;
        }//bool GetBool(string pSessionKey)

    }//public static class CSession

} 
```

# python - 如何捕获特定错误“查询期间丢失与 MySQL 服务器的连接”

> ID：15224051
> 
> 赞同：0
> 
> 时间：2013-03-05T12:39:27.363
> 
> 标签：python, mysql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:04:55.147

而不是 while True，您可以尝试在 except 块中再次连接和提交。

```
def mysql_handling(string):
    global cursor
    try: 
        cursor.execute(string)
        if 'SELECT' not in string:
            db.commit()
    except MySQLdb.MySQLError:
        cursor.close()
                print 'something went wrong!!'
        time.sleep(1)
        cursor = get_cursor()
        cursor.execute(string)
        if 'SELECT' not in string:
            db.commit()
    finally:
            if cursor:
                cursor.close() 
```

或者你可以保持最大重试次数，比如 5 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:05:22.877

从[这个页面](http://dev.mysql.com/doc/connector-python/en/connector-python-apiref-errors-error.html)看来，您似乎无法真正捕获特定的异常，但需要尽可能接近（[OperationalError](http://dev.mysql.com/doc/connector-python/en/connector-python-apiref-errors-operationalerror.html)）并检查 errno 以获取[确切的错误代码](http://dev.mysql.com/doc/refman/5.5/en/error-messages-client.html)；

```
except MySQLdb.OperationalError as err:

    if err.errno == errorcode.CR_SERVER_LOST:
        # This is the error you're looking for
    else:
        # This is not the error you're looking for
        raise 
```

# php - 如何设置csv文件列的大小？

> ID：15224052
> 
> 赞同：16
> 
> 时间：2013-03-05T12:39:27.550
> 
> 标签：php, excel

我想在 csv 文件中设置每一列的大小，我想根据字段设置列的大小，我不知道在哪里可以做代码来设置大小？任何人都可以帮助它，将不胜感激，在此先感谢。

这是我的代码

```
function export($result)
{   
    Configure::write('debug',0);
    $filename = "excel.".csv";
    $csv_file = fopen('php://output', 'w');
    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename="'.$filename.'"');    

    // The column headings of  .csv file
    $header_row1 = array(   
                        "Last Name",
                        "First Name",
                        "Middle Name",
                        );

    $header_row =   array_merge($header_row1,$header_row2);
    fputcsv($csv_file,$header_row,',','"');

    // Array indexes correspond to the field names in your db table(s)
    if (!isset($result['Post']['User'])) {
        $row1 = array(
            $result['Post']['prefix_name'],
            $result['Post']['first_name'],
            $result['Post']['middle_name'],
            $result['Post']['last_name'],
        );
    }
    else {
            $row1 = array(
            $result['Post']['prefix_name'],
            $result['Post']['first_name'],
            $result['Post']['middle_name'],
            $result['Post']['last_name'],
        );
    }

    $row = array_merge($row1,$row2);

    unset($row2);
    fputcsv($csv_file,$row,',','"');
}

    fclose($csv_file);
    exit;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T12:43:12.837

您不能... CSV 文件没有任何格式，包括列大小。

如果要控制列宽，则需要将数据写入支持列宽的格式，例如 BIFF (.xls) 或 OfficeOpenXML (.xlsx) 或 OASIS 开放文档格式 (.ods) 或 Gnumeric 或其他电子表格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T13:01:14.467

没有办法做到这一点。
CSV 代表逗号[分隔值](http://en.wikipedia.org/wiki/Comma-separated_values)：

> 逗号分隔值 (CSV) 文件以纯文本形式存储表格数据（数字和文本）。纯文本意味着文件是一个字符序列，没有数据需要被解释为二进制数。CSV 文件由任意数量的记录组成，由某种换行符分隔；每条记录由字段组成，由其他字符或字符串分隔，最常见的是文字逗号或制表符。通常，所有记录都有相同的字段序列。

简短而清晰的定义。
CSV 太原始了。
你有没有尝试过用普通的文本编辑器打开 CSV 文件？
在这种情况下，您需要 XLS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T12:43:54.740

据我所知，您不能在 CSV 中设置列​​大小，因为绝对没有关于演示布局的信息。CSV 是逗号分隔值。

将打开文件的应用程序的最佳行为是设置列宽以适合数据。

如果您想管理您的演示文稿布局，您应该生成一个可以用 Excel 打开的 html 内容（例如）。在这样的内容中，您将能够设置一些属性，例如`width="400"`...

# java - 在 Axis2 SAAJ 中使用附件缓存

> ID：15224057
> 
> 赞同：1
> 
> 时间：2013-03-05T12:39:35.773
> 
> 标签：java, axis2, mtom, saaj

我正在升级应用程序内的现有 SOAP 堆栈（客户端和服务器端），以通过使用 SOAP 附件（SwA 或 MTOM）来支持二进制内容。现有代码库广泛利用 SAAJ，并使用 Axis2（目前是 1.5.6）实现。（应用程序的其他部分已经使用 Axis2，因此坚持使用它似乎是合理的）。

通过 SAAJ API（添加节点、元素、SOAPAttachments 实例...）构建 SOAPMessage 时，一切正常。序列化的 SOAPMessage 确实是一个正确的 xop/mtom 消息。

当通过 Axis2 的 MessageFactory 解析像 InputStream 这样的消息时出现了我的问题（不，我们不使用 AxisServlet/Endpoint，我们有时会直接解析原始流）。它可以工作（我取回了一个功能上等效的 SOAPMessage 实例），但我希望 Axis2 使用（axiom 的底层）附件缓存功能，以免附件读入主内存，我无法做到这一点。

根据我对 Axis2 在axis-saaj.jar 中的实现的理解，似乎 SOAPMessageImpl 被硬编码以在没有启用缓存功能的情况下实例化 Axiom Attachments 实例，而且看起来没有可配置的方式（axis conf 文件、系统属性、专有扩展messagefactory，无论如何......）来改变这种行为。

我错过了什么吗？没有办法使用带有附件缓存的axis-saaj（或从InputStream 到SOAPMessage 实例的任何其他方式）？我几乎找不到关于axis2-saaj 的文档，而且到目前为止，Axis User ML 对此保持沉默。

谢谢！

# jquery - 比较两个数组并创建第三个

> ID：15224060
> 
> 赞同：5
> 
> 时间：2013-03-05T12:39:51.747
> 
> 标签：jquery, arrays

我有两个数组，我试图比较并创建第三个

我的第一个数组：

```
sevenDays = ["04","05","06","07","08","09","10"]; 
```

我的第二个数组：

```
 json[0] =  [Object{day="04",value="5"}, Object { day="05",value="8"}, Object { day="09",value="9"}] 
```

我想要得到的是：

```
 [[04,5],[05,8],[06,0],[07,0],[08,0],[09,9],[10,0]] 
```

我试过这样

```
var desiredArray= [];                           
$.each(sevenDays, function (i, v) {
   val= 0;
     if (json[0][i].value) val = json[0][i].value;
     desiredArray[i] = [v, val]
}); 

 [[04,5],[05,8],[06,9],[07,0],[08,0],[09,0],[10,0]] //output 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:52:24.000

您当前正在将 index `i`in的值与 index of处的对象`sevenDays`的属性进行比较，但这不正确，因为顺序不匹配。的值位于索引 2 in但位于索引 5 in 。`value``i``json[0]``09``json[0]``09``sevenDays`

您需要遍历`sevenDays`，并为每次迭代遍历`json[0]`以找到匹配的对象，如下所示：

```
var desiredArray = [];

$.each(sevenDays, function (i, day) {
    val = 0;
    $.each(json[0], function(j, value) {
        if(day == value.day)
            val = value.value;
    });
    desiredArray[i] = [day, val];
}); 
```

看看[这个工作演示](http://jsfiddle.net/F56KY/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:54:03.613

考虑您的第二个数组以正确的 json 格式......

你可以这样做

```
var data[] =["",""]
for(value in sevenDays)
{
for(Object in json[0])
{
if(Object.hasOwnProperty(data[value])
{
     // do ur stuff here :)
}
else
{
     //do the other stuff here :)
}
}
} 
```

# java - 无法从命令中获得响应（使用 JSch）

> ID：15224066
> 
> 赞同：0
> 
> 时间：2013-03-05T12:40:29.997
> 
> 标签：java, android, jsch

我正在尝试从通过 ssh 发送的命令中获得响应。我使用 JSch lib 连接。连接已建立，但未从发送的命令中得到响应。

```
public void openSSH(
        String username,
        String password,
        String hostname,
        int port) throws Exception {     

    JSch jsch = new JSch();
    Session session = jsch.getSession(username, hostname, 22);
    this.session = session;
    session.setPassword(password);

    // Avoid asking for key confirmation
    Properties prop = new Properties();
    prop.put("StrictHostKeyChecking", "no");
    session.setConfig(prop);
    session.connect();

}

public String runCommand(String command)  throws Exception {
    // SSH Channel
    ChannelExec channelssh = (ChannelExec) session.openChannel("exec");      
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    InputStream in = channelssh.getInputStream();
    channelssh.setOutputStream(baos);

    // Execute command
    channelssh.setCommand(command);
    channelssh.connect();        

     System.out.println("Unix system connected...");
        byte[] tmp = new byte[1024];
        while (true){

            while (in.available() > 0) {
                Log.v("running", "line");  // won't work
                int i = in.read(tmp, 0, 1024);
                if (i < 0) {

                    break;
                }
                String line = new String(tmp, 0, i);
                System.out.println("Unix system console output: " +line);
                        channelssh.disconnect();
            }
        }
}

private class AsyncTaskOne extends AsyncTask<Void, Void, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {

        try {
            openSSH("login", "pass", "10.10.10.80", 22 );
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return true;
    }

    protected void onPostExecute(Boolean value) {

        if (value)  {
        try {
            runCommand("ls -llh");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:16:56.823

请检查您的 inputStream 是否实际可用。据我了解，问题是您的 inputStream 没有；没有给您任何东西，而不是

```
 InputStream in = channelssh.getInputStream();
// channelssh.setOutputStream(baos); 
```

评论这一行，看看这里是否真的有什么东西。另外，您如何确定已连接？设置命令的正确方法是这样，所以请这样做：

```
 Channel channel=session.openChannel("exec");
  ((ChannelExec)channel).setCommand(command); 
```

# css - 快速 CSS 字体查询

> ID：15224067
> 
> 赞同：0
> 
> 时间：2013-03-05T12:40:29.993
> 
> 标签：css, fonts, webfonts

谁能告诉我为什么我主页“新闻”部分的字体（[http://www.sehkelly.com](http://www.sehkelly.com)中间以“打开和关闭案例”开头的三张图片行）比页面的其余部分重?

字体不是粗体；它只是更重。

而且似乎只在谷歌浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:13:10.913

如果您删除`font-family`适用于您身体的规则，它会从我的测试中解决问题。

也许您可以以不那么全球化的方式定义这些字体？

# javascript - 多个元素上的 jQuery touchstart

> ID：15224069
> 
> 赞同：1
> 
> 时间：2013-03-05T12:40:31.183
> 
> 标签：javascript, jquery, mobile-safari, jquery-events

我正在寻找适用于 iOS 的解决方案，例如悬停在“桌面世界”中。我的页面上有很多图像项目，当用户在图像上移动手指时，实际图像的不透明度为 0。（所以一个移动隐藏了所有项目 :)）

我试过这样的事情：

```
 $("img").on "touchstart", ->  
        $(this).animate({opacity:0}, 100) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T12:44:38.980

如果您想在`touchstart`收到 -event 时隐藏所有图像，您应该使用：

```
$("img").on("touchstart", function() {  
    $("img").animate({opacity:0}, 100);
}); 
```

甚至更好：

```
var $images = $("img").on("touchstart", function() {  
    $images.fadeTo(100, 0);
}); 
```

关键字指的`this`是接收事件评估器的 DOM 元素，然后是整个 jQuery 集合。

对 CoffeeScript 不好。

```
$(document.body).on "touchmove", (event) ->
  if $(event.target).is("img")
    $(event.target).animate
      opacity: 0
    , 100 
```

# objective-c - NSMutableArray removeObjectAtIndex 奇怪的问题。

> ID：15224070
> 
> 赞同：6
> 
> 时间：2013-03-05T12:40:33.650
> 
> 标签：objective-c, nsmutablearray

中的奇怪行为`NSMutableArray`。

我已经创建了对象并填充了它。

```
NSMutableArray *array = [[NSMutableArray alloc] 
                         initWithObjects:@"1",@"2",@"3",@"4", nil];
[array removeObjectAtIndex:0]; 
```

在删除之前它看起来像：

```
array   NSMutableArray *    0x1040b5e0
[0] id  0x00088a44 @"1"
[1] id  0x00088a54 @"2"
[2] id  0x00088a64 @"3"
[3] id  0x00088a74 @"4" 
```

删除 FIRST 元素后：

```
array   NSMutableArray *    0x1040b5e0
[0] id  0x00000000 
[1] id  0x00088a54 @"2"
[2] id  0x00088a64 @"3" 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:46:37.290

您是否使用 lldb 进行调试？如果是这样，请尝试**gdb**。

lldb 有这种性质的已知错误，它会在调试会话期间报告不正确的变量值。

**要将调试器更改为 gdb：**

1.  在工具栏中单击您的目标
2.  选择“编辑方案”
3.  确保在左侧窗格中选择了“运行”方案。
4.  将“调试器”下拉列表从 lldb 更改为 gdb。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:53:09.240

您的相同代码工作正常。只需清理并构建项目。这是我的代码

```
NSMutableArray *sampleArray = [[NSMutableArray alloc]
                         initWithObjects:@"1",@"2",@"3",@"4", nil];
NSLog(@"%@", sampleArray);
[sampleArray removeObjectAtIndex:0];
NSLog(@"%@", sampleArray); 
```

# ios - 如何使用 NSURLProtocol 模拟 AJAX 调用？

> ID：15224071
> 
> 赞同：14
> 
> 时间：2013-03-05T12:40:43.260
> 
> 标签：ios, ajax, uiwebview, nsurlprotocol

我有 UIWebview 对外部服务进行 AJAX 调用。离线时我需要捕获这些请求并返回本地 json。

我实现了一个 NSURLProtocol 并且我设法捕获了 AJAX 请求，问题是 jquery 总是返回一个 0 错误代码：

```
$.ajax({
  url: url,
  dataType: 'json',
  contentType: "application/json",
  success: function(jsonData){
    alert("success :");
  },
  error: function (request, status, error) {
    alert("failure :" + request.status );
  } 
```

});

我总是得到一个 request.status = 0

为了测试我的协议，我尝试在我的 html 中模拟一个图像，并且效果很好。

*   从 google.fr => 对图像的 HTML 请求**工作正常**
*   在亚马逊上对 json 的 AJAX 调用 =>**失败**

这是我的完整实现：

```
#import "EpubProtocol.h"

@implementation EpubProtocol

#pragma mark - NSURLProtocol

+ (BOOL)canInitWithRequest:(NSURLRequest *)request {
    BOOL awsRequest = [self request:request contains:@"s3.amazonaws.com"];
    BOOL imgRequest = [self request:request contains:@"google.fr"];
    BOOL match = awsRequest || imgRequest;

    return match;
}

+ (NSURLRequest*)canonicalRequestForRequest:(NSURLRequest*)theRequest
{
    return theRequest;
}

- (void)startLoading {
    NSURLRequest *request = [self request];

    //Mock Amazon call
    if([EpubProtocol request:request contains:@"s3.amazonaws.com"]) {
        NSString *path = [[NSBundle bundleForClass:self.class] pathForResource:@"epub1" ofType:@"json"];
        NSData *data = [NSData dataWithContentsOfFile:path];

        [self mockRequest:request mimeType:@"application/json" data:data];
    }
    //Mock image call
    else if([EpubProtocol request:request contains:@"google.fr"]) {
        NSOperationQueue *queue = [[NSOperationQueue alloc] init];

        [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.itespresso.fr/wp-content/gallery/yahoo/1-yahoo-logo.jpg"]] queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
            [self mockRequest:request mimeType:@"image/jpeg" data:data];
        }];
    }
}

- (void)stopLoading
{
    NSLog(@"Did stop loading");
}

#pragma mark - Request utils

+ (BOOL) request:(NSURLRequest*)request contains:(NSString*)domain {
    NSString *str = [[request URL] absoluteString];
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@", domain];
    return [pred evaluateWithObject:str];
}

#pragma mark - Mock responses

-(void) mockRequest:(NSURLRequest*)request mimeType:(NSString*)mimeType data:(NSData*)data {
    id client = [self client];

    NSHTTPURLResponse *response = [[NSHTTPURLResponse alloc] initWithURL:[request URL] MIMEType:mimeType expectedContentLength:-1 textEncodingName:nil];

    [client URLProtocol:self didReceiveResponse:response
     cacheStoragePolicy:NSURLCacheStorageNotAllowed];
    [client URLProtocol:self didLoadData:data];
    [client URLProtocolDidFinishLoading:self];
}

@end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T21:46:46.197

问题来自 webkit，它由于跨域源请求而阻塞了响应。由于我们模拟了响应，我们必须强制使用 Access-Control-Allow-Origin。

然后我们还需要强制响应的内容类型。

这里是魔法发生的地方：

```
NSDictionary *headers = @{@"Access-Control-Allow-Origin" : @"*", @"Access-Control-Allow-Headers" : @"Content-Type"};
NSHTTPURLResponse *response = [[NSHTTPURLResponse alloc] initWithURL:request.URL statusCode:200 HTTPVersion:@"1.1" headerFields:headers]; 
```

协议的最终实现：

```
#import "EpubProtocol.h"

@implementation EpubProtocol

#pragma mark - NSURLProtocol

+ (BOOL)canInitWithRequest:(NSURLRequest *)request {
    BOOL isAwsRequest = [self request:request contains:@"s3.amazonaws.com"];

    return isAwsRequest;
}

+ (NSURLRequest*)canonicalRequestForRequest:(NSURLRequest*)theRequest
{
    return theRequest;
}

- (void)startLoading {
    NSURLRequest *request = [self request];

    //Mock Amazon call
    if([EpubProtocol request:request contains:@"s3.amazonaws.com"]) {
        NSString *path = [[NSBundle bundleForClass:self.class] pathForResource:@"epub1" ofType:@"json"];
        NSData *data = [NSData dataWithContentsOfFile:path];

        [self mockRequest:request data:data];
    }
}

- (void)stopLoading
{
    NSLog(@"Did stop loading");
}

#pragma mark - Request utils

+ (BOOL) request:(NSURLRequest*)request contains:(NSString*)domain {
    NSString *str = [[request URL] absoluteString];
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF contains[cd] %@", domain];
    return [pred evaluateWithObject:str];
}

#pragma mark - Mock responses

-(void) mockRequest:(NSURLRequest*)request data:(NSData*)data {
    id client = [self client];

    NSDictionary *headers = @{@"Access-Control-Allow-Origin" : @"*", @"Access-Control-Allow-Headers" : @"Content-Type"};
    NSHTTPURLResponse *response = [[NSHTTPURLResponse alloc] initWithURL:request.URL statusCode:200 HTTPVersion:@"1.1" headerFields:headers];

    [client URLProtocol:self didReceiveResponse:response
     cacheStoragePolicy:NSURLCacheStorageNotAllowed];
    [client URLProtocol:self didLoadData:data];
    [client URLProtocolDidFinishLoading:self];
}

@end 
```

JS 没什么特别的：

```
function loadJSONDoc()
{
  var url = "https://s3.amazonaws.com/youboox_recette/epub.json";

  $.ajax({
      url: url,
      dataType: 'json',
       contentType: "application/json",
      success: function(jsonData){
        alert('success');
        document.getElementById("myDiv").innerHTML='<p>'+$.param(jsonData)+'</p>';
      },
      error: function (request, status, error) {
        alert("failure :" + request.status );
      }
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:54:51.267

前段时间我不得不做类似的事情。

首先，我设法找到可以使 UIWebViewDelegate 捕获 ajax 调用的代码，所以在我的 webapp 部分中，我有：

```
//code to extend XMLHttpRequest, and have ajax call available in uiwebviewdelegate.

var s_ajaxListener = new Object();
s_ajaxListener.tempOpen = XMLHttpRequest.prototype.open;
s_ajaxListener.tempSend = XMLHttpRequest.prototype.send;
s_ajaxListener.callback = function () {
    window.location=this.url;
};

XMLHttpRequest.prototype.open = function(a,b) {
  if (!a) var a='';
  if (!b) var b='';
  s_ajaxListener.tempOpen.apply(this, arguments);
  s_ajaxListener.method = a;  
  s_ajaxListener.url = b;
  if (a.toLowerCase() == 'get') {
    s_ajaxListener.data = b.split('?');
    s_ajaxListener.data = s_ajaxListener.data[1];
  }
}

XMLHttpRequest.prototype.send = function(a,b) {
  if (!a) var a='';
  if (!b) var b='';
  s_ajaxListener.tempSend.apply(this, arguments);
  if(s_ajaxListener.method.toLowerCase() == 'post')s_ajaxListener.data = a;
  s_ajaxListener.callback();
} 
```

然后在 iOS 中，我在 UIWebViewDelegate shouldStartLoad 中返回 NO（我的情况有点难看）：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([[[request URL] scheme] rangeOfString:@"https"].length > 0) 
    {
        return NO;
    }

    return YES;
} 
```

最重要的是，我将注册我的协议：

```
[NSURLProtocol registerClass:[MyProtocol class]]; 
```

使用 StartLoad 实现。你也应该有子类 canInitWithRequest

```
+ (BOOL)canInitWithRequest:(NSURLRequest *)request 
{
    if ([request.URL.scheme rangeOfString:@"https"].length > 0) 
    {
        return YES;
    }

    return NO;
} 
```

告诉协议它应该用于请求。

并且不要忘记在有网络时取消注册。

如果您不想打扰 NSURLProtocol 实现，您可以使用我自己的：[https](https://github.com/bcharp/BOURLProtocol) ://github.com/bcharp/BOURLProtocol ;)

希望能帮助到你 ！

# iis-7 - SQLServer 会话状态

> ID：15224075
> 
> 赞同：1
> 
> 时间：2013-03-05T12:41:00.310
> 
> 标签：iis-7, session-state, sql-session-state

我正在使用 SessionState 的 InProc 模式，但由于应用程序池的回收，我的应用程序不断重新启动，因此我正在失去当前登录用户的会话。我想更改以将其保存在数据库中。我像这样编辑了我的webconfig

```
<sessionState mode="SQLServer" timeout="20" allowCustomSqlDatabase="true"
    sqlConnectionString="Data Source=Server;integrated security=True;Initial Catalog=SerialTracker;"
    cookieless="false" /> 
```

我是否必须为会话状态或新数据库创建一些表？我的主机是共享的，所以我无法访问管理控制台或其他任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:21:29.617

[这里](http://support.microsoft.com/kb/317604)有一个分步操作方法。似乎您将需要运行`InstallSqlState.sql`在数据库上命名的 SQL 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T14:57:15.260

是的，您必须使用可以找到的 InstallSqlState.sql 脚本 - 根据机器 - 在 %System Drive Letter%/Microsoft .NET/Framework/%v.????%

示例：c:\Windows\Microsoft.NET\Framework64\v4.0.30319\InstallSqlState.sql

还要考虑该脚本创建一个 AspState DB，默认情况下不会保留会话数据：这些数据将存储在 tempdb 表中。

如果这些对您不利，可以在 AspState DB 中保存数据，请看[这里](http://support.microsoft.com/default.aspx?scid=kb;EN-US;311209)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T21:20:59.047

自 2015 年起，您无需运行脚本，Universal Provider 包使用实体框架来创建它需要的表。

我使用 NuGet/Package Manager 安装了“Microsoft ASP.NET Universal Providers”包（当前为 v 2.0.0），该包也安装了核心：

安装包 Microsoft.AspNet.Providers

它会在您的 web.config 文件中插入一些（已注释的）项目。我按照评论中的说明将“InProc”更改为“自定义”，并使用我的数据库的连接字符串进行设置。第一次运行时，它会在我的数据库中创建一个“会话”表并将会话数据存储在其中。

如果您的项目中已经有一个“会话”表，我不确定它会做什么。

ps - 我删除了它插入的“profile”、“membership”和“rolemanager”标签，因为我只需要存储会话内容，而不是 asp 身份的其余部分。

# javascript - Dygraph 代码在 IE8 上崩溃

> ID：15224077
> 
> 赞同：1
> 
> 时间：2013-03-05T12:41:15.427
> 
> 标签：javascript, internet-explorer, dygraphs

我的 dygraph 代码在 IE8 上不起作用。控制台显示此错误：

```
SCRIPT5009: 'CanvasRenderingContext2D' is undefined 
dygraph-combined.js, line 2 character 13300 
```

这是在“dygraph-combined.js”中崩溃的行：

```
CanvasRenderingContext2D.prototype.installPattern=function(e){if ... 
```

该图在 IE9 和 IE7 上正确显示，使用完全相同的代码。

我研究过的所有可能的解决方案都没有奏效（其中许多只是“包含 excanvas.js”）。

**Edit1：**在 David Kiger 的反馈之后，我尝试完全按照要求格式化标题，但它仍然不起作用。我还删除了 Yii 的引导程序以隔离问题。这是确切的代码：

```
<!-- DOCTYPE html -->
<HTML><HEAD>
<META content="IE=EmulateIE7; IE=EmulateIE9;" http-equiv=X-UA-Compatible>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<SCRIPT type=text/javascript src="/js/dygraph/excanvas.js"></SCRIPT>
<SCRIPT type=text/javascript src="/fonto/js/dygraph/dygraph-combined.js"></SCRIPT>
</HEAD> 
```

在 excanvas.js 中评论这一行也不起作用：

```
//el.style.overflow = 'hidden'; 
```

**编辑2：**解决了！

所以我不得不结合这两种解决方案：

IE的格式代码...

```
<!DOCTYPE html>
<html>
<head>  
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9;"> 
```

...并在 excanvas.js 中评论该行

```
//el.style.overflow = 'hidden'; 
```

顺序也很重要：

*   第一个 excanvas.js

*   然后 dygraph-combined.js

非常感谢您的反馈。

# php - PHP：在最后一列添加删除按钮以删除表格行

> ID：15224092
> 
> 赞同：0
> 
> 时间：2013-03-05T12:42:12.057
> 
> 标签：php, mysql, post

我有一个以 HTML 格式显示的表格。我想`delete`在最后一列中添加一个按钮来删除表格中考虑的行。因此，我在最后一列中创建了一个表单，其中包含一个隐藏值，即`id`（= 我的表条目的主键），通过 POST 方法在另一个页面中传递 id 以启动 DELETE SQL 查询。以下代码不起作用：

```
<form action="delete_facture.php" method="post">
            <input type="hidden" name="id2" value="<?php $donnees['id'] ?>"/>
            <input type="submit" value="delete"/>
</form> 
```

比 delete_facture.php 是以下内容：

```
<?php
// Connexion à la base de données
try
{
$bdd = new PDO('mysql:host=localhost;dbname=mydb', 'root', '');
}
catch(Exception $e)
{
die('Erreur : '.$e->getMessage());
}
$req = $bdd->prepare('DELETE FROM factures WHERE id= :id2');
$req->execute(array(
                    ':id2'=>$_POST['id2']
                    ));
header('Location: index.php');
?> 
```

我的代码有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:45:20.337

put `echo`，那么只有它会在文本框中分配值。否则你会得到空值。试试这个，

```
<input type="hidden" name="id2" value="<?php echo $donnees['id'] ?>"/> 
```

# php - 使用以下 php SplClassLoader.php 时，每个命名空间是否需要多个实例

> ID：15224094
> 
> 赞同：1
> 
> 时间：2013-03-05T12:42:15.927
> 
> 标签：php

好吧，在比较了两个版本的 SplClassLoader 之后，我有点困惑

一个在这里：[https ://gist.github.com/jwage/221634](https://gist.github.com/jwage/221634)

如果我们有多个命名空间，我认为需要多个实例，正如实现所建议的那样

另一个是[https://wiki.php.net/rfc/splclassloader](https://wiki.php.net/rfc/splclassloader)，看起来不错，但我在某处找不到 git 版本。使用 add() 方法添加多个包含路径似乎很简单。

如果有人确认我的想法并建议我上述一种或更好的一种，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:32:21.733

事实证明，如果您传递`null`命名空间（第一个参数），您可以加载包含路径下的任何命名空间（第二个参数）：

```
$loader = new SplClassLoader( null, 'src');
$loader->register(); 
```

通常我见过`SplClassLoader`这样的示例用法：

```
$loader = new SplClassLoader( 'Mine', 'path\to\libs');
$loader->register();

use Mine\Craft;
$c = new Craft; 
```

如果您只想在`Mine`命名空间下加载类，这很好。但是如果你想使用`Yours`命名空间呢？你可以正确地做：

```
$loader = new SplClassLoader( 'Mine', 'path\to\libs');
$loader->register();
$loader = new SplClassLoader( 'Yours', 'path\to\libs');
$loader->register();

use Mine\Craft;
use Your\Hovercraft;

$c = new Craft;
$h = new Hovercraft; 
```

但这似乎很啰嗦不是吗？特别是因为它们存储在同一个地方。如果我们有三个或四个命名空间可以使用怎么办？

如果您所有的命名空间都在同一个目录中，您可能会变得懒惰。
这是完整的示例`root.php`：

```
require 'SplClassLoader.php';
$loader = new SplClassLoader( null, 'path\to\libs');
$loader->register();

use Mine\Craft;
use Your\Hovercraft;

$c = new Craft;
$h = new Hovercraft; 
```

这假设您的目录结构是这样的：

```
- path
  - to
    - libs
      - Mine
        - Craft.php
      - Yours
        - Hovercraft.php
root.php
SplClassLoader.php 
```

当然，您的类命名空间遵循标准：
`Craft.php`

```
namespace Mine;

class Craft
{
…
} 
```

现在，我无法评论这种方法的安全性。我想能够将某些命名空间列入白名单是件好事吗？不确定这是一项安全功能，似乎更像是某种内置的灵活性，因此您不必将所有库放在一个位置。不过，对于我的钱来说，一切都是为了简洁和简单。合并依赖项，传递`null`并继续使用您的代码。

# graphics - GPU Pixel 和 Texel 写入速度

> ID：15224095
> 
> 赞同：12
> 
> 时间：2013-03-05T12:42:19.557
> 
> 标签：graphics, opengl-es, gpu, performancecounter

许多嵌入式/移动 GPU 都提供对称为**Pixel Write Speed**和**Texel Write speed**的性能寄存器的访问。您能否解释一下如何从实际 GPU 硬件的角度来解释和定义这些术语？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T15:32:32.077

我认为像素和纹素之间的区别对您来说非常清楚。无论如何，只是为了让这个答案更加“普遍”：

*   像素是屏幕空间的基本单位。
*   纹理元素或纹理元素（也称为纹理像素）是纹理空间的基本单位。

> 纹理由纹素数组表示，就像图片由像素数组表示一样。在对 3D 表面进行纹理处理（称为纹理映射的过程）时，渲染器将纹素映射到输出图片中的适当像素。

![在此处输入图像描述](../Images/cd9b38d02fc5e1259992c08141308a15.png)

*顺便说一句，使用填充率*而不是*写入速度*更为常见，您可以轻松找到所有必需的信息，因为这个术语非常古老且被广泛使用。

**回答你的问题**

> 所有填充率数字（无论使用什么定义）都以 Mpixels/sec 或 Mtexels/sec 表示。
> 
> 那么填充率背后的原始想法是写入帧缓冲区的完成像素数。这符合理论峰值填充率的定义。所以在过去的好日子里，用 Mpixels 来表示这个数字是有意义的。
> 
> 然而，第二代 3D 加速器增加了一项新功能。此功能**允许您渲染到屏幕外表面并将其用作下一帧中的纹理**。所以写入缓冲区的值不再一定在屏幕像素上，它们可能是纹理的纹素。这个过程允许几个很酷的特殊效果，想象一下渲染一个房间，现在你将这个房间的图片存储为纹理。现在您不显示房间的这张图片，而是将图片用作镜子甚至反射贴图的纹理。
> 
> 使用 MTexels 的另一个原因是游戏开始使用多层多纹理效果，这意味着屏幕上的像素由各种子像素构成，这些子像素最终混合在一起形成最终像素。因此，根据这些子结果来表达填充率更有意义，您可以将它们称为纹素。

*   阅读整篇文章 -[填充率解释](http://www.beyond3d.com/content/articles/43/1)
*   可以在此处找到更多详细信息 -[纹理填充率](http://www.gpureview.com/texture-fill-rate-article-375.html)

**更新**

> 纹理填充率 = (# of TMU - 纹理映射单元) x (核心时钟)
> 
> 卡片每秒可以渲染到屏幕的纹理像素数。

很明显，具有更多 TMU 的卡在处理纹理信息时会更快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T18:30:25.277

性能寄存器/计数器`Pixel Write Speed`并`Texel Write speed`维护有关处理/写入的像素和纹素的统计/计数操作。我将解释峰值（最大可能）填充率。

## 像素率

> 图片元素是光栅图像中的物理点，是显示设备屏幕的最小元素。

`Pixel rate`是 GPU 在一秒钟内可能写入本地内存的最大像素量，以每秒数百万像素为单位。实际的像素输出率还取决于很多其他因素，最显着的是内存带宽 - 内存带宽越低，达到最大填充率的能力就越低。

像素速率是通过将数量乘以`ROPs (Raster Operations Pipelines - aka Render Output Units)`核心时钟速度来计算的。

**[渲染输出单元](http://en.wikipedia.org/wiki/Render_Output_unit)**：像素管道获取像素和纹素信息，并通过特定的矩阵和矢量运算将其处理成最终的像素或深度值。`ROPs`执行本地内存中相关缓冲区之间的事务。

**重要性**：像素率越高，GPU 的屏幕分辨率越高。

## 纹素率

> 纹理元素是纹理空间的基本单位（3D 对象表面的瓦片）。

`Texel rate`是每秒可以处理的纹理贴图元素（纹素）的最大数量。它在一秒钟内以数百万纹素为单位进行测量

这是通过将总数乘以`texture units`芯片的核心速度来计算的。

**[纹理映射单元](http://en.wikipedia.org/wiki/Texture_mapping_unit)**：需要处理和过滤纹理。这项工作由与像素和顶点着色器单元一起工作的 TMU 完成。`TMU`将纹理操作应用于像素是

**重要性**：纹素率越高，游戏渲染速度越快，可以流畅地显示要求苛刻的游戏。

示例：不是 nVidia 粉丝，但这里是 GTX 680 的规格，（对于嵌入式 GPU 找不到太多）

```
Model   Geforce GTX 680
Memory  2048 MB
Core Speed  1006 MHz
Shader Speed    1006 MHz 
Memory Speed    1502 MHz (6008 MHz effective)
Unified Shaders 1536 
Texture Mapping Units   128 
Render Output Units 32 
Bandwidth   192256 MB/sec 
Texel Rate  128768 Mtexels/sec 
Pixel Rate  32192 Mpixels/sec 
```

# c++ - 使用不同编译器递归的动态数组

> ID：15224099
> 
> 赞同：0
> 
> 时间：2013-03-05T12:42:35.017
> 
> 标签：c++

我写它来计算数字的反转并且我运行它很好`gcc version 4.2.1 20070831 patched`但是当我在代码块上运行它时使用`mingw32`它意外关闭。

我调试并发现它在`int *left = new int[middle];int *right = new int[length - middle];`但是`it just come to error when it recursive on second time`，我不知道它为什么会导致错误并且不知道如何修复它。

我的问题是

1.如何修复错误？

2.是否还有其他堆丢失我没有删除，因为我不确定只是想检查它。

提前谢谢。

```
#include<iostream>
using namespace std;
int invCount(int*, int);
int merge(int*, int*, int, int*, int);
int main(void){
    int array[] = {0, 1, 4, 3, 2};
    cout << invCount(array, 5) << "times" << endl;
    return 0;
}
int invCount(int *array, int length){
    cout << "length:" << length << endl;

    if(length <= 1){
            return 0;
    }

    int middle = (length + 1) / 2;

    cout << length << endl << middle << endl << length - middle << endl;
    cout << endl;

    int *left = new int[middle];
    int *right = new int[length - middle];

    for(int i = 0; i < middle; i ++)left[i] = array[i];//error
    for(int i = middle; i < length; i ++)right[i] = array[i];//error

    return invCount(left, middle) + invCount(right, length - middle
    ) + merge(array, left, middle, right, length - middle);
}

int merge(int* array, int* left, int leftLength, int* right, int rightLength){
   int i = 0, j = 0, count = 0;

   while(i < leftLength || j < rightLength){
       if(i == leftLength){
           array[i + j] = right[j];
           j ++;
       }
       else if(j == rightLength){
           array[i + j] = left[i];
           i ++;
       }
       else if (left[i] <= right[j]){
           array[i + j] = left[i];
           i ++;
       }
       else {
           array[i + j] = right[j];
           j ++;
           count += leftLength - i;
       }
   }
   delete[] left;
   delete[] right;
   return count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:55:35.667

```
int *right = new int[length - middle];
...
for(int i = middle; i < length; i ++)
   right[i] = array[i];//error 
```

你的写作方式已经超出了`right`.

我建议您将 :`std::vector`与`at()`函数一起使用（进行边界检查）。

`left`至于你关于“堆丢失”的问题（我假设你问的是内存泄漏......）我认为你的代码还可以，但只是风格不好：`right`应该在分配它们的同一个函数中删除，而不是比在`merge`. 无论哪种方式，如果抛出异常，您都会泄漏内存，这是首选`std::vector`.

# android - 安卓。MoPub SDK。代码片段集成

> ID：15224104
> 
> 赞同：1
> 
> 时间：2013-03-05T12:42:54.867
> 
> 标签：android, mopub

我正在尝试将 MoPub 集成到我的应用程序中，但我不确定将代码片段放在`onCreate()`我的活动方法中的确切位置：

```
mAdView = (MoPubView) findViewById(R.id.adview);
mAdView.setAdUnitId("xxxxxxxxxxx"); // Enter your Ad Unit ID from www.mopub.com
mAdView.loadAd(); 
```

我是在调用之前还是之后放置它`super.onCreate(savedInstanceState);`？

是的，我知道这是一个非常微不足道的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:45:08.903

之后编写代码，`setContentView`因为您将 findViewById 用于 mAdView。

# vba - Pass arguments to Constructor in VBA

> ID：15224113
> 
> 赞同：91
> 
> 时间：2013-03-05T12:43:23.953
> 
> 标签：vba, class, oop, constructor, factory

How can you construct objects passing arguments directly to your own classes?

Something like this:

```
Dim this_employee as Employee
Set this_employee = new Employee(name:="Johnny", age:=69) 
```

Not being able to do this is very annoying, and you end up with dirty solutions to work this around.

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-05T12:43:23.953

Here's a little trick I'm using lately and brings good results. I would like to share with those who have to fight often with VBA.

**1.-** Implement a public initiation subroutine in each of your custom classes. I call it InitiateProperties throughout all my classes. This method has to accept the arguments you would like to send to the constructor.

**2.-** Create a module called factory, and create a public function with the word "Create" plus the same name as the class, and the same incoming arguments as the constructor needs. This function has to instantiate your class, and call the initiation subroutine explained in point (1), passing the received arguments. Finally returned the instantiated and initiated method.

Example:

Let's say we have the custom class Employee. As the previous example, is has to be instantiated with name and age.

This is the InitiateProperties method. m_name and m_age are our private properties to be set.

```
Public Sub InitiateProperties(name as String, age as Integer)

    m_name = name
    m_age = age

End Sub 
```

And now in the factory module:

```
Public Function CreateEmployee(name as String, age as Integer) as Employee

    Dim employee_obj As Employee
    Set employee_obj = new Employee

    employee_obj.InitiateProperties name:=name, age:=age
    set CreateEmployee = employee_obj

End Function 
```

And finally when you want to instantiate an employee

```
Dim this_employee as Employee
Set this_employee = factory.CreateEmployee(name:="Johnny", age:=89) 
```

Especially useful when you have several classes. Just place a function for each in the module factory and instantiate just by calling **factory.CreateClassA(arguments)**, **factory.CreateClassB(other_arguments)**, etc.

# EDIT

As stenci pointed out, you can do the same thing with a terser syntax by avoiding to create a local variable in the constructor functions. For instance the CreateEmployee function could be written like this:

```
Public Function CreateEmployee(name as String, age as Integer) as Employee

    Set CreateEmployee = new Employee
    CreateEmployee.InitiateProperties name:=name, age:=age

End Function 
```

Which is nicer.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-12-18T18:33:24.707

I use one `Factory` module that contains one (or more) *constructor* per class which calls the `Init` member of each class.

For example a `Point` class:

```
Class Point
Private X, Y
Sub Init(X, Y)
  Me.X = X
  Me.Y = Y
End Sub 
```

A `Line` class

```
Class Line
Private P1, P2
Sub Init(Optional P1, Optional P2, Optional X1, Optional X2, Optional Y1, Optional Y2)
  If P1 Is Nothing Then
    Set Me.P1 = NewPoint(X1, Y1)
    Set Me.P2 = NewPoint(X2, Y2)
  Else
    Set Me.P1 = P1
    Set Me.P2 = P2
  End If
End Sub 
```

And a `Factory` module:

```
Module Factory
Function NewPoint(X, Y)
  Set NewPoint = New Point
  NewPoint.Init X, Y
End Function

Function NewLine(Optional P1, Optional P2, Optional X1, Optional X2, Optional Y1, Optional Y2)
  Set NewLine = New Line
  NewLine.Init P1, P2, X1, Y1, X2, Y2
End Function

Function NewLinePt(P1, P2)
  Set NewLinePt = New Line
  NewLinePt.Init P1:=P1, P2:=P2
End Function

Function NewLineXY(X1, Y1, X2, Y2)
  Set NewLineXY = New Line
  NewLineXY.Init X1:=X1, Y1:=Y1, X2:=X2, Y2:=Y2
End Function 
```

One nice aspect of this approach is that makes it easy to use the factory functions inside expressions. For example it is possible to do something like:

```
D = Distance(NewPoint(10, 10), NewPoint(20, 20) 
```

or:

```
D = NewPoint(10, 10).Distance(NewPoint(20, 20)) 
```

It's clean: the factory does very little and it does it consistently across all objects, just the creation and one `Init` call on each *creator*.

And it's fairly object oriented: the `Init` functions are defined inside the objects.

**EDIT**

I forgot to add that this allows me to create static methods. For example I can do something like (after making the parameters optional):

```
NewLine.DeleteAllLinesShorterThan 10 
```

Unfortunately a new instance of the object is created every time, so any static variable will be lost after the execution. The collection of lines and any other static variable used in this pseudo-static method must be defined in a module.

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-09-25T21:44:27.110

When you export a class module and open the file in Notepad, you'll notice, near the top, a bunch of hidden attributes (the VBE doesn't display them, and doesn't expose functionality to tweak most of them either). One of them is `VB_PredeclaredId`:

```
Attribute VB_PredeclaredId = False 
```

Set it to `True`, save, and re-import the module into your VBA project.

Classes with a `PredeclaredId` have a "global instance" that you get for free - exactly like `UserForm` modules (export a user form, you'll see its predeclaredId attribute is set to true).

A lot of people just happily use the predeclared instance to store state. That's wrong - it's like storing instance state in a static class!

Instead, you leverage that default instance to implement your factory method:

[`Employee` class]

```
'@PredeclaredId
Option Explicit

Private Type TEmployee
    Name As String
    Age As Integer
End Type

Private this As TEmployee

Public Function Create(ByVal emplName As String, ByVal emplAge As Integer) As Employee
    With New Employee
        .Name = emplName
        .Age = emplAge
        Set Create = .Self 'returns the newly created instance
    End With
End Function

Public Property Get Self() As Employee
    Set Self = Me
End Property

Public Property Get Name() As String
    Name = this.Name
End Property

Public Property Let Name(ByVal value As String)
    this.Name = value
End Property

Public Property Get Age() As String
    Age = this.Age
End Property

Public Property Let Age(ByVal value As String)
    this.Age = value
End Property 
```

With that, you can do this:

```
Dim empl As Employee
Set empl = Employee.Create("Johnny", 69) 
```

`Employee.Create` is working off the *default instance*, i.e. it's considered a member of the *type*, and invoked from the default instance only.

Problem is, this is also perfectly legal:

```
Dim emplFactory As New Employee
Dim empl As Employee
Set empl = emplFactory.Create("Johnny", 69) 
```

And that sucks, because now you have a confusing API. You could use `'@Description` annotations / `VB_Description` attributes to document usage, but without Rubberduck there's nothing in the editor that shows you that information at the call sites.

Besides, the `Property Let` members are accessible, so your `Employee` instance is *mutable*:

```
empl.Name = "Jane" ' Johnny no more! 
```

The trick is to make your class implement an *interface* that only exposes what needs to be exposed:

[`IEmployee` class]

```
Option Explicit

Public Property Get Name() As String : End Property
Public Property Get Age() As Integer : End Property 
```

And now you make `Employee` *implement* `IEmployee` - the final class might look like this:

[`Employee` class]

```
'@PredeclaredId
Option Explicit
Implements IEmployee

Private Type TEmployee
    Name As String
    Age As Integer
End Type

Private this As TEmployee

Public Function Create(ByVal emplName As String, ByVal emplAge As Integer) As IEmployee
    With New Employee
        .Name = emplName
        .Age = emplAge
        Set Create = .Self 'returns the newly created instance
    End With
End Function

Public Property Get Self() As IEmployee
    Set Self = Me
End Property

Public Property Get Name() As String
    Name = this.Name
End Property

Public Property Let Name(ByVal value As String)
    this.Name = value
End Property

Public Property Get Age() As String
    Age = this.Age
End Property

Public Property Let Age(ByVal value As String)
    this.Age = value
End Property

Private Property Get IEmployee_Name() As String
    IEmployee_Name = Name
End Property

Private Property Get IEmployee_Age() As Integer
    IEmployee_Age = Age
End Property 
```

Notice the `Create` method now returns *the interface*, and the interface *doesn't* expose the `Property Let` members? Now calling code can look like this:

```
Dim empl As IEmployee
Set empl = Employee.Create("Immutable", 42) 
```

And since the client code is written against the interface, the only members `empl` exposes are the members defined by the `IEmployee` interface, which means it doesn't see the `Create` method, nor the `Self` getter, nor any of the `Property Let` mutators: so instead of working with the "concrete" `Employee` class, the rest of the code can work with the "abstract" `IEmployee` interface, and enjoy an immutable, polymorphic object.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-05T10:44:17.097

Using the trick

```
Attribute VB_PredeclaredId = True 
```

I found another more compact way:

```
Option Explicit
Option Base 0
Option Compare Binary

Private v_cBox As ComboBox

'
' Class creaor
Public Function New_(ByRef cBox As ComboBox) As ComboBoxExt_c
  If Me Is ComboBoxExt_c Then
    Set New_ = New ComboBoxExt_c
    Call New_.New_(cBox)
  Else
    Set v_cBox = cBox
  End If
End Function 
```

As you can see the New_ constructor is called to both create and set the private members of the class (like init) only problem is, if called on the non-static instance it will re-initialize the private member. but that can be avoided by setting a flag.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-29T18:32:01.053

Another approach

Say you create a class clsBitcoinPublicKey

In the class module create an ADDITIONAL subroutine, that acts as you would want the real constructor to behave. Below I have named it ConstructorAdjunct.

```
Public Sub ConstructorAdjunct(ByVal ...)

 ...

End Sub

From the calling module, you use an additional statement

Dim loPublicKey AS clsBitcoinPublicKey

Set loPublicKey = New clsBitcoinPublicKey

Call loPublicKey.ConstructorAdjunct(...) 
```

The only penalty is the extra call, but the advantage is that you can keep everything in the class module, and debugging becomes easier.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-09-03T13:41:20.280

Why not this way:

1.  In a class module »myClass« use `Public Sub Init(myArguments)` instead of `Private Sub Class_Initialize()`
2.  Instancing: `Dim myInstance As New myClass: myInstance.Init myArguments`

# c++ - MPI 同步向量矩阵

> ID：15224116
> 
> 赞同：1
> 
> 时间：2013-03-05T12:43:26.910
> 
> 标签：c++, vector, matrix, synchronization, mpi

对不起，如果这个问题是常见的或微不足道的，我对 MPI 不是很熟悉，所以请多多包涵。

我有一个向量矩阵。每个向量都是空的或其中有一些项目。

```
std::vector<someStruct*>  partitions[matrix_size][matrix_size]; 
```

当我启动程序时，每个进程都会在这个矩阵中拥有相同的数据，但是随着代码的进行，每个进程可能会从一些向量中删除几个项目并将它们放入其他向量中。

所以当我遇到障碍时，我必须以某种方式确保每个进程都有这个矩阵的最新版本。最大的问题是每个进程都可能操纵任何或所有向量。

我将如何确保每个进程在屏障之后都有正确的更新矩阵？

编辑：对不起，我不清楚。每个进程可以将一个或多个对象移动到另一个向量，但只有一个进程可以移动每个对象。换句话说，每个进程都有一个它可以移动的对象列表，但是每个人都可以更改矩阵。两个进程永远不能移动同一个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:44:24.927

我建议以不同的方式排列数据：

每个进程都有他的对象及其在矩阵中的位置的映射。如何实现取决于您如何识别对象。如果所有本地对象都已编号，则可以只使用`vector<pair<int,int>>`.

将其视为您操作并与之通信的主要结构`MPI_Allgather`（每个进程将其数据发送给所有其他进程，最后每个人都拥有所有数据）。如果您需要通过坐标快速查找，那么您可以建立一个缓存。

这可能会或可能不会表现良好。其他优化（例如共享“事务”）完全取决于您的对象以及您对它们执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:39:16.320

在这种情况下，您需要使用`MPI_Bcast`该消息发送消息，通知其他处理器并指示他们执行相同操作。或者，如果在遇到障碍之前排序无关紧要，则只能将消息发送到执行排列的根进程，然后在障碍之后使用`MPI_Bcast`.

还有一件事：指针向量通常不是一个好主意，因为您需要在其中手动管理内存。如果您可以使用 C++11，请使用`std::unique_ptr`or`std::shared_ptr`代替（取决于您的语义），或者使用提供非常相似的工具的 Boost。

最后，将矩阵表示为固定大小数组的固定大小数组是非常糟糕的。第一：矩阵大小是固定的。第二：相邻的行不一定存储在连续的内存中，这会像疯了一样减慢你的程序（它实际上可以是数量级）。而是将矩阵表示为 size 的线性数组`Nrows*Ncols`，然后将元素索引为`Nrows*i + j`where`Nrows`是行数，`i`and`j`分别是行和列索引。如果您不想要以列为主的存储，请使用`i + Ncols*j`. 您可以将此索引杂耍包装在开销几乎为零的内联函数中。

# android - 如何将捕获图像设置为图像视图

> ID：15224117
> 
> 赞同：1
> 
> 时间：2013-03-05T12:43:41.883
> 
> 标签：android, android-camera, android-capture

如何在图像视图之间设置边距？在我的代码中，我使用 for 循环创建了许多图像视图，但两个图像视图之间没有空格我如何在 teo 图像视图之间设置边距？如何以编程方式在两个图像视图之间添加空间？？？

```
 ScrollView scroll = new ScrollView(MainActivity1.this);
     scroll.setLayoutParams(new   
  LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,  
   LayoutParams.WRAP_CONTENT));      

     btnLO = new LinearLayout(MainActivity1.this);  
     LinearLayout.LayoutParams paramsLO = new  
    LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     // button margins
     paramsLO.setMargins(0, 0, 0, 0);
     // button height/width *pixels*
     paramsLO.height = 75;
     paramsLO.width = 75;

     btnLO.setOrientation(LinearLayout.VERTICAL);
     btnLO.setBackgroundColor(5); // not working correctly

     //buttons
     for (i =0;i <reqdata.length;i++)
         {
             LinearLayout li=new LinearLayout(this);
             li.setOrientation(LinearLayout.HORIZONTAL);
             final Button b1 = new Button(MainActivity1.this);
             final ImageView imageView = new ImageView(MainActivity1.this);

             li.addView(b1, paramsLO);        
             li.addView(imageView, paramsLO);
             btnLO.addView(li);

             b1.setOnClickListener(new View.OnClickListener() 
                    {
                        public void onClick(View v) 
                        {               

                             imgIndex = btnLO.indexOfChild(b1)/2;

 Toast.makeText(getBaseContext(),imgIndex,  
  Toast.LENGTH_SHORT).show();
                             imageView1 = imageView;
                             Intent pictureActionIntent = new  
 Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

 pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new  
  File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

 startActivityForResult(pictureActionIntent,CAMERA_PICTURE);

                          } 

                    });    

         }

     final Button b2 = new Button(MainActivity1.this);
     b2.setText("Submit");
     b2.setOnClickListener(new View.OnClickListener() 
     {
         public void onClick(View v) 
         {                           
             for (i =0;i <reqdata.length;i++)
             {

 dbConnector.saveVisitDetail(blob[i],i,Long.valueOf(reqdata[i].getValue())
   .longValue());
             }               
         }
     }); 
     btnLO.addView(b2, paramsLO);
     btnLO.setGravity(Gravity.LEFT | Gravity.CENTER_HORIZONTAL);
     scroll.addView(btnLO);

     this.addContentView(scroll, new LayoutParams());

 }

 @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent  
 imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

            if (imageReturnedIntent.getExtras() != null) 
                {
                    // here is the image from camera
                    yourSelectedImage = (Bitmap)  
imageReturnedIntent.getExtras().get("data");
                    ByteArrayOutputStream outStr = new  
ByteArrayOutputStream();                  

yourSelectedImage.compress(CompressFormat.JPEG, 100, outStr);
                    blob[imgIndex] = outStr.toByteArray();
                    yourSelectedImage =   

BitmapFactory.decodeByteArray(blob[imgIndex], 0, blob.length);
                    imageView1.setImageBitmap(yourSelectedImage);

                }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:47:34.980

```
 protected void onActivityResult(int requestCode, int resultCode, Intent ata)                                     
              {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {

             imageView = (ImageView) findViewById(R.id.imageView1);
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo)
        }}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:46:18.730

尝试以这种方式逐步设置边距：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(30, 30, 30, 30);
image.setLayoutParams(params); 
```

# ms-access - pdi 勺子 ms-access concat

> ID：15224121
> 
> 赞同：0
> 
> 时间：2013-03-05T12:43:49.767
> 
> 标签：ms-access, integration, field, pentaho, concat

假设我有这个名为 table1 的表：

```
| f1| f2   | 
--------------
| 1 | str1 |
| 1 | str2 |
| 2 | str3 |
| 3 | str4 |
| 3 | str5 | 
```

我想做类似的事情：

```
Select f1, group_concat(f2) from table1 
```

这是在 mysql 中，我正在使用 ms-access！并得到结果：

```
| 1 | str1,str2|
| 2 | str3     |
| 3 | str4,str5| 
```

因此，我在 ms-access 中搜索了一个可以执行相同操作的函数并找到了它！xD

问题是每天我都必须下载一些数据库`ms-access`，在那里创建函数`concat`，然后使用这些连接值创建一个新表。

我想将该过程合并到 Pentaho 数据集成勺子转换中，我在完成所有这些工作后使用它。

所以我想要的是一种`ms-access`在 PDI 勺子中定义一个函数的方法，或者某种方法来组合可以模拟`group_concat`来自 mysql 的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:22:46.067

一种简单的方法是将 ms-access 中的数据移动到具有相同结构的 mysql（mysql DB 结构 = ms-access DB 结构），然后执行“Select f1, group_concat(f2) from table1”。有关详细信息，请按照以下步骤操作：

1.  创建转换 A 以将您的 ms-access 数据移动/传输到 mysql
2.  创建转换 B 执行 Select f1, group_concat(f2) from table1
3.  创建作业以执行转换 A 和 B（您必须在 B 之前执行转换 A）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:55:43.110

简单 - 从访问中查询，并使用“分组依据”步骤来执行您的 group_concat - 有一个选项可以连接由 分隔的字段，或者您选择的任何字符串。

不要忘记，除非您逐步使用内存组，否则必须按您分组的任何内容对流进行排序。

# android - 尽管使用了 FLAG_ACTIVITY_REORDER_TO_FRONT，但仍调用了 onCreate

> ID：15224127
> 
> 赞同：1
> 
> 时间：2013-03-05T12:44:08.450
> 
> 标签：android, android-intent, activity-lifecycle

我有 2 个活动（A 和 B），它们有 2 个按钮可以在它们之间切换。

1.  一个 oncreate
2.  B oncreate
3.  ***一个 oncreate***
4.  一份简历

我想做的是在将意图从 B 发送到 A 之后，不应调用 oncreate，但此时它确实如此。为了克服这个问题，我找到了 FLAG_ACTIVITY_REORDER_TO_FRONT （[从这里](http://www.youtube.com/watch?v=qb9d6nEbxrw)）并认为它只能调用 onresume 但它没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:43:46.990

`FLAG_ACTIVITY_REORDER_TO_FRONT` does exactly what you think it should do. However, if you start `ActivityA` and then `ActivityA` starts `ActivityB` and calls `finish()` on itself, then when `ActivityB` starts `ActivityA` with an Intent that has `FLAG_ACTIVITY_REORDER_TO_FRONT` there will be no instance of `ActivityA` to bring to the front. In this case Android will simply create a new one. I can only assume that is what you are seeing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:03:07.430

[`FLAG_ACTIVITY_REORDER_TO_FRONT`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)更改活动历史记录。如果在先前访问过的活动（在任务中）的历史记录中找到所请求的活动，则清除此活动的较旧历史记录。因此，在按下后退按钮时，用户不会在任务中遇到此活动。

此标志不会影响对 的调用`onCreate()`，如果任务中不存在活动（未加载或销毁），`onCreate()`将调用创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:03:10.103

您不能只取消 onCreate。如果 B 是全屏活动，android 可以杀死 A 活动，并在您尝试使用 FLAG_ACTIVITY_REORDER_TO_FRONT 标志重新启动它并调用它的 onCreate 方法时重新创建它。如果 Activity A 在您尝试将其置于最前面时仍然处于活动状态，则不应调用 onCreate 方法。

也许在你的情况下你应该尝试使用片段？

# java - 使用 Spring 的 Stuts 2 中的 String 和 lang 类的依赖异常

> ID：15224128
> 
> 赞同：-2
> 
> 时间：2013-03-05T12:44:12.193
> 
> 标签：java, spring, spring-mvc, configuration, struts2

我正在使用 Struts 2 和 Spring 3。我无法注入 bean 并`RunTimeException`开始启动`struts2`过滤器。我正在使用以下 jar 文件

> servlet-api-2.4.jar、struts2-spring-plugin-2.1.6.jar、struts2-spring-plugin-2.1.6.jar、org.springframework.beans-3.0.0.M3.jar、xwork-2.0。 2.jar、struts2-core-2.0.12.jar等

```
SEVERE: Exception starting filter struts2
    java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=java.lang.String, name='struts.objectFactory.spring.autoWire.alwaysRespect'] in public org.apache.struts2.spring.StrutsSpringObjectFactory(java.lang.String,java.lang.String,java.lang.String,javax.servlet.ServletContext).
        at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:290)
        at com.opensymphony.xwork2.inject.ContainerImpl$2.call(ContainerImpl.java:117)
        at com.opensymphony.xwork2.inject.ContainerImpl$2.call(ContainerImpl.java:115)
        at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:542)
        at com.opensymphony.xwork2.inject.ContainerImpl.injectStatics(ContainerImpl.java:114)
        at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:494)
        at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:145)
        at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)
        at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)
        at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)
        at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:205)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4071)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4725)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=java.lang.String, name='struts.objectFactory.spring.autoWire.alwaysRespect'] in public org.apache.struts2.spring.StrutsSpringObjectFactory(java.lang.String,java.lang.String,java.lang.String,javax.servlet.ServletContext).
        at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:136)
        at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:49)
        at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:431)
        at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:446)
        at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:48)
        at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:288)
        ... 28 more
    Caused by: java.lang.RuntimeException: com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=java.lang.String, name='struts.objectFactory.spring.autoWire.alwaysRespect'] in public org.apache.struts2.spring.StrutsSpringObjectFactory(java.lang.String,java.lang.String,java.lang.String,javax.servlet.ServletContext).
        at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:464)
        at com.opensymphony.xwork2.inject.ContainerImpl$7.call(ContainerImpl.java:501)
        at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:549)
        at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:499)
        at com.opensymphony.xwork2.config.impl.LocatableFactory.create(LocatableFactory.java:32)
        at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:134)
        ... 33 more
    Caused by: com.opensymphony.xwork2.inject.DependencyException: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=java.lang.String, name='struts.objectFactory.spring.autoWire.alwaysRespect'] in public org.apache.struts2.spring.StrutsSpringObjectFactory(java.lang.String,java.lang.String,java.lang.String,javax.servlet.ServletContext).
        at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.<init>(ContainerImpl.java:327)
        at com.opensymphony.xwork2.inject.ContainerImpl$5.create(ContainerImpl.java:299)
        at com.opensymphony.xwork2.inject.ContainerImpl$5.create(ContainerImpl.java:298)
        at com.opensymphony.xwork2.inject.util.ReferenceCache$CallableCreate.call(ReferenceCache.java:155)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at com.opensymphony.xwork2.inject.util.ReferenceCache.internalCreate(ReferenceCache.java:81)
        at com.opensymphony.xwork2.inject.util.ReferenceCache.get(ReferenceCache.java:121)
        at com.opensymphony.xwork2.inject.ContainerImpl.getConstructor(ContainerImpl.java:562)
        at com.opensymphony.xwork2.inject.ContainerImpl.inject(ContainerImpl.java:460)
        ... 38 more
    Caused by: com.opensymphony.xwork2.inject.ContainerImpl$MissingDependencyException: No mapping found for dependency [type=java.lang.String, name='struts.objectFactory.spring.autoWire.alwaysRespect'] in public org.apache.struts2.spring.StrutsSpringObjectFactory(java.lang.String,java.lang.String,java.lang.String,javax.servlet.ServletContext).
        at com.opensymphony.xwork2.inject.ContainerImpl.createParameterInjector(ContainerImpl.java:239)
        at com.opensymphony.xwork2.inject.ContainerImpl.getParametersInjectors(ContainerImpl.java:229)
        at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.<init>(ContainerImpl.java:318)
        ... 47 more
    5 Mar, 2013 6:14:01 PM org.apache.catalina.core.StandardContext start
    SEVERE: Error filterStart
    5 Mar, 2013 6:14:01 PM org.apache.catalina.core.StandardContext start
    SEVERE: Context [/Fundation] startup failed due to previous errors
    5 Mar, 2013 6:14:01 PM org.apache.catalina.core.ApplicationContext log
    INFO: Closing Spring root WebApplicationContext
    5 Mar, 2013 6:14:01 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
    SEVERE: The web application [/Fundation] registered the JDBC driver [com.microsoft.sqlserver.jdbc.SQLServerDriver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
    5 Mar, 2013 6:14:01 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
    SEVERE: The web application [/Fundation] registered the JDBC driver [oracle.jdbc.driver.OracleDriver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
    5 Mar, 2013 6:14:01 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
    SEVERE: The web application [/Fundation] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@7f162a9c]) and a value of type [com.opensymphony.xwork2.inject.InternalContext[]] (value [[Lcom.opensymphony.xwork2.inject.InternalContext;@847a8f3]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
    5 Mar, 2013 6:14:02 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
    INFO: validateJarFile(D:\eclipse-indigo\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\SpringMVCTutorial\WEB-INF\lib\servlet-api-2.4.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
    5 Mar, 2013 6:14:02 PM org.apache.catalina.core.ApplicationContext log
    INFO: Initializing Spring FrameworkServlet 'SpringMVCTutorial'
    5 Mar, 2013 6:14:02 PM org.springframework.web.servlet.FrameworkServlet initServletBean
    INFO: FrameworkServlet 'SpringMVCTutorial': initialization started
    5 Mar, 2013 6:14:02 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
    INFO: Refreshing org.springframework.web.context.support.XmlWebApplicationContext@1b83ee9a: display name [WebApplicationContext for namespace 'SpringMVCTutorial-servlet']; startup date [Tue Mar 05 18:14:02 IST 2013]; root of context hierarchy
    5 Mar, 2013 6:14:02 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
    INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/SpringMVCTutorial-servlet.xml]
    5 Mar, 2013 6:14:02 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
    INFO: Bean factory for application context [org.springframework.web.context.support.XmlWebApplicationContext@1b83ee9a]: org.springframework.beans.factory.support.DefaultListableBeanFactory@12f53870
    5 Mar, 2013 6:14:02 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
    INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@12f53870: defining beans [viewResolver,/welcome.htm,springMessage,message]; root of factory hierarchy
    5 Mar, 2013 6:14:02 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
    INFO: Mapped URL path [/welcome.htm] onto handler [com.cpt.spring.HelloWorldController@1aad40a0]
    5 Mar, 2013 6:14:02 PM org.springframework.web.servlet.FrameworkServlet initServletBean 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:56:09.837

将 servlet 规范至少更改为 2.4，spring 插件也应该与 spring 库一起使用。如果它没有帮助使用`struts.objectFactory.spring.autoWire.alwaysRespect=false`默认的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:51:04.853

你必须用最新的升级你的`struts2`核心 jar 和`xwork`jar。使用不同版本的 stuts2core 和 struts2spring jar 可能会出现问题。

希望这对你有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-26T18:24:11.973

我已经解决了这个问题。您首先提取 struts-spring 插件。在里面`struts2-spring-plugin-x.y.z.jar\org\apache\struts2\spring`你会发现`StrutsSpringObjectFactory.class`. 使用任何类编辑器，您都可以打开这个 .class 文件。

在那里你会看到 @Inject(value=StrutsConstants.STRUTS_OBJECTFACTORY_SPRING_AUTOWIRE_ALWAYS_RESPECT,required=false) 行

字符串 alwaysAutoWire 存在。最后，方法调用

```
this.setAlwaysRespectAutowireStrategy("true".equalsIgnoreCase(alwaysAutoWire)); 
```

存在导致问题。实际上这个方法调用不能映射到一个有效的 setter 方法，因此`NoSuchMethodError`.

现在，要解决问题，请下载 struts2-spring-plugin-2.0.11.1.jar 并将其添加到项目的 lib 中。如果您按照上述过程检查此 jar，您将找不到该 setter 调用，因此不会发生错误。希望对你有效。

# java - 匿名方法使用泛型值作为参数

> ID：15224129
> 
> 赞同：1
> 
> 时间：2013-03-05T12:44:13.427
> 
> 标签：java, generics, anonymous-types, anonymous-methods

我坚持使用匿名方法的 Java 传统，我正在使用第三方库，它有一个将 table_name 作为其泛型类型的通用接口

喜欢

```
TableQueryCallback<WYF_Brands> =new TableQueryCallback<WYF_Brands>() {
    @Override
    public void onCompleted(List<WYF_Brands> arg0, int arg1,
        Exception arg2, ServiceFilterResponse arg3) {
        // TODO Auto-generated method stub
    }
}; 
```

这里 WYF_Brands 是我的表名。

我想要的是

```
TableQueryCallback<WYF_Users> =new TableQueryCallback<WYF_Users>() {
    @Override
    public void onCompleted(List<WYF_Users> arg0, int arg1,
        Exception arg2, ServiceFilterResponse arg3) {
        // TODO Auto-generated method stub
    }
}; 
```

WYF_Users 是我的另一个表。

要求：我想以可重用的方式对我的所有表使用这种方法。

我在数据库中有许多表，并且不会为不同的表创建不同的方法。我不知道如何使用可以接受任何表名作为参数的泛型。

另一件事是该接口是第三方库的一部分，因此我无法更改它，因为它位于可执行 jar 文件中。

我使用 java 作为编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:48:10.970

听起来您只想要一个通用方法：

```
public <T> TableQueryCallback<T> createTableQueryCallback() {
    return new TableQueryCallback<T>() {
        @Override
        public void onCompleted(List<T> list, int arg1,
                Exception arg2, ServiceFilterResponse arg3) {
            // I'm assuming the implementation here would be the same each time?
        }
    };
} 
```

虽然我很想创建一个*命名*的嵌套类来代替：

```
private static SomeSpecificTableQueryCallback<T> implements TableQueryCallback<T> {
    @Override
    public void onCompleted(List<T> list, int arg1,
            Exception arg2, ServiceFilterResponse arg3) {
        // I'm assuming the implementation here would be the same each time?
    }
} 
```

...我不明白为什么将其设为匿名会在这里为您带来任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:55:34.153

我假设您有通用的基类/接口`WYF_Brands`，`WYF_Users`以及所有其他表。顺其自然`WYF_Base`。我还假设这个基类/接口足以让您实现常用方法。如果是这样，那么您可以像这样实现一次方法：

```
public class CommonTableQueryCallback <T extends WYF_Base>
    implements TableQueryCallback <T>
{
    @Override
    public void onCompleted(List <T> list, int n,
        Exception exception, ServiceFilterResponse response) {
        // Implement your logic here.
        // All elements of `list` are guaranteed to extend/implement WYF_Base
        // And compiler knows this!

        WYF_Base e = list.get (0); // This is correct!
    }
} 
```

然后你可以像下面这样使用这个类：

```
TableQueryCallback <WYF_Brands> callback = 
    new CommonTableQueryCallback <WYF_Brands> (); 
```

# c# - dbcontext throwAmbiguousMatchException

> ID：15224131
> 
> 赞同：0
> 
> 时间：2013-03-05T12:44:24.300
> 
> 标签：c#, xml, entity-framework, serialization, dbcontext

我尝试将一个类序列化为 xml。序列化后，我想更新 statusid。我能够找到第一个订单并更改 statusId ，当转到第二个 orderid 时，这是我遇到模棱两可的匹配发现错误的地方。

这是主要方法：

```
 using (var Context = new Context())
            {

                var orderRepo = new OrderRepository(Context);

                foreach (var orderId in orderIds)
                {
                    var order = orderRepo.Find(orderId);
                    order.orderStatusID = 5;

                }
                orderRepo.Save();
            } 
```

在 OrderRepository.cs

```
 public Order Find(int id)
            {
                return _context.Orders.Find(id);
            }

   public void Save()
        {

            try
            {
                _context.SaveChanges();
            }
            catch (Exception ex)
            {

               _logger.Error(ex);
            }

        } 
```

订单.cs：

```
 [XmlRoot("Orders")]
    [NotMapped]
    public class OrderCollection
    {

        public OrderCollection() { Orders = new List<Order>(); }

        [XmlElement("Order")]
        [NotMapped]
        public List<Order> Orders { get; set; }
    }

    [Serializable()]
    public class Order
    {

        public int id { get; set; }
        [XmlElement("date")]
        public DateTime createdDate
        {
            get
            {
                return (_createdDate == default(DateTime))
                   ? DateTime.Now
                   : _createdDate;
            }

            set { _createdDate = value; }
        }
        private DateTime _createdDate = default(DateTime);

        public string firstName { get; set; }

        public string lastName { get; set; }

        [XmlIgnore]
        public int orderStatusID { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:41:38.423

原来是一个实体，有两个名称相同但大小写不同的成员。一个是数据库中的字段，一个是导航属性。只需重命名两者之一即可解决问题。

# c# - SQL Server 2008 中的重复记录

> ID：15224132
> 
> 赞同：-4
> 
> 时间：2013-03-05T12:44:26.220
> 
> 标签：c#, sql, sql-server

你好朋友，

当我插入数据存储重复数据时，我该如何解决问题就像我将名称 xyz 存储在数据库中存储的两倍 xyz 任何朋友都知道解决我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:46:57.203

在表上定义一个`UNIQUE`约束，例如

```
ALTER TABLE myTableName ADD CONSTRAINT tb_unq UNIQUE (columnName) 
```

这样，您可以保证 的值`columnName`都是不同的。如果您尝试插入该列上已存在的值，则会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:12:38.213

或者，您可以检查：

```
if((select count(*) From TableName Where name='xyz')=0)
Begin
 -- Insert code here.
End 
```

希望这会有所帮助。

# sql-server - 使用 Active Directory 中的用户连接到 SQL Server（无需 Windows 身份验证）

> ID：15224139
> 
> 赞同：1
> 
> 时间：2013-03-05T12:44:57.670
> 
> 标签：sql-server, database, ldap

我正在尝试使用来自任何开源 LDAP（Open Ldap、Apache DS 等）的用户连接 SQL Server 数据库

在浏览了一些文档后，我发现 SQL Server 提供了一种使用 Windows 用户/活动目录连接到数据库的方法，但这与 Windows 身份验证有关。我正在寻找的不是使用 SQL Server 和 Active Directory 的 Windows 身份验证，而是使用 SQL Server 的 Active Directory 用户进行身份验证，而无需使用这些用户详细信息实际登录到 Windows。

还有一种方法可以通过其他开源 ldap 服务器实现吗？

谢谢。

# java - 如何监听所有捆绑事件？

> ID：15224144
> 
> 赞同：0
> 
> 时间：2013-03-05T12:45:12.740
> 
> 标签：java, eclipse, osgi

我已经编写了一个 Eclipse 插件，它将一个[BundleListener](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleListener.html)注册到它[启动的](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleActivator.html)[BundleContext](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html)中。注册的侦听器将记录所有[BundleEvents](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleEvent.html)。我注意到只记录了[STARTED](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleEvent.html#STARTED)类型的事件。

我已将捆绑包注册为在`config.ini`eclipse 中的级别 2 开始，默认捆绑包启动级别为 4。

例如，有什么方法可以让我收听 RESOLVED 类型的事件？我是否为接收该类型的事件而启动捆绑包太晚了？是否使用了多个捆绑上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:09:44.910

由于动态，强制排序通常是一个坏主意，在 OSGi 中更糟。你可以得到一些看起来像开始级别排序的东西，但它肯定是非常脆弱的，并且很快就会变得非常复杂。因为通常您需要事件来发现状态，所以我想知道您的用例是什么。在 OSGi 中，查找 Bundle 状态是微不足道的。对于需要状态发现事件的应用程序，BundleTracker 提供了一个非常好的 API 来发现处于一组状态的捆绑包。根据我的经验，BundleTracker 非常适合 99% 的 BundleListener 用例。

如果您只是记录，所有框架事件都会记录到日志服务，并且日志服务通常会很早就启动。使用日志阅读器服务，您可以访问在您开始之前发生的事件。

# git - 从 Github 到小型 Windows 服务器的自动 git 部署

> ID：15224146
> 
> 赞同：1
> 
> 时间：2013-03-05T12:45:15.920
> 
> 标签：git, deployment, github

我们是一个 5 人的小型团队，正在开发一个 JSF 2.1 网站作为一个为期两个月的项目。我们想用这个项目来学习Git/Github，因为它看起来用途非常广泛，知道如何使用它在上班时会很有用。

我家里有一台始终打开的 Windows HTPC，我想在项目期间将其用作 Web 服务器。我一直在谷歌上搜索如何设置自动部署，以便网络服务器获取最新的主版本作为当前网站。但大多数结果似乎都在基于 Linux 的服务器上。我可以实现某种[Git Hook](http://git-scm.com/docs/githooks)吗？这方面的大多数示例都是 bash 脚本。我对批处理脚本没有经验。

简短的问题：我想自动将最新版本从 Github 拉到 Windows 服务器。有关如何管理此问题的任何指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:18:26.747

这是非常 alpha 的，但我开源了一个简单的 .net Web 应用程序，它可以满足您的需求。

它可以接收 http POST（例如，来自 github 的 post-receive 钩子），如果需要，还可以执行 git pull + 运行可选的 pre 和 post 部署脚本。

[https://github.com/benjamine/gitdeployhub](https://github.com/benjamine/gitdeployhub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:56:06.917

是的，您需要的是一个 post-commit 挂钩，它调用一个 shell 脚本来登录服务器并部署最新版本。

# c# - 如何在android中创建选项菜单？

> ID：15224150
> 
> 赞同：12
> 
> 时间：2013-03-05T12:45:23.557
> 
> 标签：c#, android, menu, xamarin.android, xamarin

我想用 c# 和 Xamarin Studio 在 Android 应用程序中创建一个简单的选项菜单。我该怎么做？

我还没有找到任何 C# 示例。有人可以简单地解释一下如何创建一个选项菜单吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-05T13:58:12.220

# **定义菜单**

创建菜单的一种方法是使用放置在 Xamarin.Android 项目的 Resources/menu/ 文件夹中的 XML 文件。

例如：

**资源/菜单/mymenu.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/item1"
        android:title="Item 1"/>
  <item android:id="@+id/item2"
        android:title="Item 2"/>
  <item android:id="@+id/item3"
        android:title="Item 3"/>
</menu> 
```

要查看可以在菜单 xml 文件中定义的其他选项，请参阅[官方文档](http://developer.android.com/guide/topics/resources/menu-resource.html)。

# **使用菜单**

您可以在多个位置扩展 xml 菜单。几个例子：

## **在工具栏中**

```
Android.Support.V7.Widget.Toolbar toolbar = FindViewById<Android.Support.V7.Widget.Toolbar>(Resource.Id.mytoolbar);
toolbar.InflateMenu(Resource.Menu.mymenu); 
```

**处理点击**

要处理工具栏菜单上的单击事件，您必须`Toolbar.IOnMenuItemClickListener`通过覆盖以下方法来实现接口：

```
public bool OnMenuItemClick(IMenuItem item)
{
    switch (item.ItemId)
    {
        case Resource.Id.item1: 
                //Do stuff for item1
                return true;
        case Resource.Id.item2: 
                //Do stuff for item2
                return true;
        case Resource.Id.item3:
                //Do stuff for item3
                return true;
        default:
                return false;
     }
} 
```

然后，您必须将实现接口的类作为侦听器添加到工具栏：

```
toolbar.SetOnMenuItemClickListener(your_listener_class); 
```

## **在 Activity 或 Fragment 的默认菜单位置（已弃用）**

在大多数情况下，活动或片段的默认菜单位置是硬件菜单按钮或 ActionBar。在此处添加菜单可以通过覆盖以下方法来完成：

**在活动中：**

```
public override bool OnCreateOptionsMenu(IMenu menu)
{
    MenuInflater.Inflate(Resource.Menu.mymenu, menu);
    return true;
} 
```

**在一个片段中：**

```
public override void OnCreateOptionsMenu(IMenu menu, MenuInflater inflater)
{
    inflater.Inflate(Resource.Menu.mymenu, menu);
} 
```

确保您已`HasOptionsMenu`在 Fragment 的 onCreate 中设置为 true 以使其正常工作。

**处理点击**

然后，您可以通过覆盖来处理对菜单的点击`OnOptionsItemSelected`

```
public override bool OnOptionsItemSelected(IMenuItem item)
{
    switch (item.ItemId)
    {
       case Resource.Id.item1: 
                //Do stuff for item1
                return true;
        case Resource.Id.item2: 
                //Do stuff for item2
                return true;
        case Resource.Id.item3:
                //Do stuff for item3
                return true;
        default:
                return false;
     }
} 
```

在我们处理完选定的项目后，我们返回 true 以通知系统。

# **替代方案：以编程方式创建菜单**

一个非常基本的菜单是通过覆盖这样的`OnCreateOptionsMenu`方法来完成的：

```
public override bool OnCreateOptionsMenu(IMenu menu)
{
      menu.Add(0,0,0,"Item 0");
      menu.Add(0,1,1,"Item 1");
      menu.Add(0,2,2,"Item 2");
      return true;
} 
```

然后，您可以通过覆盖该`OnOptionsItemSelected`方法来处理选项菜单中的点击。

```
public override bool OnOptionsItemSelected(IMenuItem item)
{
    switch (item.ItemId)
    {
        case 0: 
                //Do stuff for item 0
                return true;
        case 1: 
                 //Do stuff for item 1
                return true;
        case 2: 
                //Do stuff for item 2
                return true;
        default:
                return false;
     }
} 
```

# java - Swings 中 JtextPane 中的项目符号列表

> ID：15224152
> 
> 赞同：0
> 
> 时间：2013-03-05T12:45:24.143
> 
> 标签：java, swing

功能是“每当我按下一个按钮时，一个项目符号应该出现在文本窗格中”，但我面临的问题是每当我在项目符号前面写一个文本然后按下按钮时会出现两个项目符号而不是一个项目符号。

我正在粘贴代码供您参考。

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JFrame;

import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.AbstractDocument;

import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLDocument;
import javax.swing.text.html.HTMLEditorKit;

public class HTMLDocumentEditor {
    JTextPane textPane;

    AbstractDocument doc;
    public JPanel createPanel(){
        JPanel panel = new JPanel();
        HTMLDocument document = new HTMLDocument();
        textPane = new JTextPane(document);
        HTMLEditorKit.InsertHTMLTextAction bulletAction = new HTMLEditorKit.
        InsertHTMLTextAction("Bullets", "<li> </li>",HTML.Tag.BODY,HTML.Tag.UL);
        JButton bulletButton = new JButton(bulletAction);
        bulletButton.setText("Bullet");
        textPane.setContentType("text/html");
        panel.add(bulletButton,BorderLayout.PAGE_START);
        JScrollPane scrollPane = new JScrollPane(textPane);
        scrollPane.setPreferredSize(new Dimension(200, 200));
        panel.add(scrollPane, BorderLayout.CENTER);
        HTMLEditorKit editorKit = new HTMLEditorKit();
        textPane.setEditorKit(editorKit);

        return panel;
    }

    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        HTMLDocumentEditor edit = new HTMLDocumentEditor();
        frame.add(edit.createPanel());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event dispatch thread:
        //creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {

                createAndShowGUI();
            }
        });
    }

} 
```

谢谢。

# installation - 在 Windows Server 2012 上安装 AppFabric 1.1 出现错误

> ID：15224153
> 
> 赞同：5
> 
> 时间：2013-03-05T12:45:26.607
> 
> 标签：installation, appfabric, sharepoint-2013, windows-server-2012

我正在尝试`AppFabric 1.1`在我的设备上安装，`Windows Server 2012`但它没有安装。它给出了类似的错误。

```
AppFabric installation failed because installer MSI returned with error code:1603 
```

已创建的日志文件如下。

```
2013-03-05 18:06:29, Information           Setup  ===== Logging started: 2013-03-05 18:06:29+05:30 =====
2013-03-05 18:06:29, Information           Setup  File:             c:\338f6462408072c851cf3b1e\setup.exe
2013-03-05 18:06:29, Information           Setup  InternalName:     Setup.exe
2013-03-05 18:06:29, Information           Setup  OriginalFilename: Setup.exe
2013-03-05 18:06:29, Information           Setup  FileVersion:      1.1.2106.32
2013-03-05 18:06:29, Information           Setup  FileDescription:  Setup.exe
2013-03-05 18:06:29, Information           Setup  Product:          Microsoft(R) Windows(R) Server AppFabric
2013-03-05 18:06:29, Information           Setup  ProductVersion:   1.1.2106.32
2013-03-05 18:06:29, Information           Setup  Debug:            False
2013-03-05 18:06:29, Information           Setup  Patched:          False
2013-03-05 18:06:29, Information           Setup  PreRelease:       False
2013-03-05 18:06:29, Information           Setup  PrivateBuild:     False
2013-03-05 18:06:29, Information           Setup  SpecialBuild:     False
2013-03-05 18:06:29, Information           Setup  Language:         Language Neutral
2013-03-05 18:06:29, Information           Setup  
2013-03-05 18:06:29, Information           Setup  OS Name:                   Windows Server 2012 Release Candidate Datacenter
2013-03-05 18:06:29, Information           Setup  OS Edition:                ServerDatacenter
2013-03-05 18:06:29, Information           Setup  OSVersion:                 Microsoft Windows NT 6.2.8400.0
2013-03-05 18:06:29, Information           Setup  CurrentCulture:            en-US
2013-03-05 18:06:29, Information           Setup  Processor Architecture:    AMD64
2013-03-05 18:06:29, Information           Setup  Event Registration Source :    AppFabric_Setup
2013-03-05 18:06:29, Information           Setup  
2013-03-05 18:06:29, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : Initiating V1.0 Upgrade module.
2013-03-05 18:06:29, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : V1.0 is not installed.
2013-03-05 18:06:38, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : Initiating V1 Upgrade pre-install.
2013-03-05 18:06:38, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : V1.0 is not installed, not taking backup.
2013-03-05 18:06:39, Information           Setup  Executing C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe with commandline -iru.
2013-03-05 18:06:39, Information           Setup  Return code from aspnet_regiis.exe is 0
2013-03-05 18:06:39, Information           Setup  Windows features successfully enabled.
2013-03-05 18:06:39, Information           Setup  Process.Start: C:\Windows\system32\msiexec.exe /quiet /norestart /i "c:\338f6462408072c851cf3b1e\Packages\AppFabric-1.1-for-Windows-Server-64.msi" ADDDEFAULT=Worker,WorkerAdmin,CacheClient,Setup /l*vx "C:\Users\Administrator\AppData\Local\Temp\AppServerSetup1_1(2013-03-05 18-06-39).log" LOGFILE="C:\Users\Administrator\AppData\Local\Temp\AppServerSetup1_1_CustomActions(2013-03-05 18-06-39).log" INSTALLDIR="C:\Program Files\AppFabric 1.1 for Windows Server" LANGID=en-US
2013-03-05 18:07:19, Information           Setup  Process.ExitCode: 0x00000643
2013-03-05 18:07:19, Error                 Setup  AppFabric installation failed because installer MSI returned with error code : 1603
2013-03-05 18:07:19, Error                 Setup  
2013-03-05 18:07:19, Error                 Setup  AppFabric installation failed because installer MSI returned with error code : 1603
2013-03-05 18:07:19, Error                 Setup  
2013-03-05 18:07:19, Information           Setup  Microsoft.ApplicationServer.Setup.Core.SetupException: AppFabric installation failed because installer MSI returned with error code : 1603
2013-03-05 18:07:19, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.WindowsInstallerProxy.GenerateAndThrowSetupException(Int32 exitCode, LogEventSource logEventSource)
2013-03-05 18:07:19, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.WindowsInstallerProxy.Invoke(LogEventSource logEventSource, InstallMode installMode, String packageIdentity, List`1 updateList, List`1 customArguments)
2013-03-05 18:07:19, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.MsiInstaller.InstallSelectedFeatures()
2013-03-05 18:07:19, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.MsiInstaller.Install()
2013-03-05 18:07:19, Information           Setup     at Microsoft.ApplicationServer.Setup.Client.ProgressPage.StartAction()
2013-03-05 18:07:19, Information           Setup  
2013-03-05 18:07:19, Information           Setup  === Summary of Actions ===
2013-03-05 18:07:19, Information           Setup  Required Windows components   :  Completed Successfully
2013-03-05 18:07:19, Information           Setup  IIS Management Console            :  Completed Successfully
2013-03-05 18:07:19, Information           Setup  AppFabric 1.1 for Windows Server  :  Failed
2013-03-05 18:07:19, Information           Setup  Hosting Services          :  Failed
2013-03-05 18:07:19, Information           Setup  Cache Client          :  Failed
2013-03-05 18:07:19, Information           Setup  Hosting Administration            :  Failed
2013-03-05 18:07:19, Information           Setup  Microsoft Update  :  Skipped
2013-03-05 18:07:19, Information           Setup  Microsoft Update          :  Skipped
2013-03-05 18:07:19, Information           Setup  
2013-03-05 18:07:19, Information           Setup  ===== Logging stopped: 2013-03-05 18:07:19+05:30 ===== 
```

请帮我解决这个问题。我试图搜索每件事，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T11:29:27.327

我在谷歌上搜索并找到了解决方案。当我在此之前尝试安装 AppFabric 时，我已经安装了 SQL Server。因此，在`Environment Variable`具有名称的变量中，其中包含`PSModulePath`SQL Server 路径。

所以我只是删除了该路径并尝试`AppFabric`再次安装，问题就解决了。

现在已安装。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-29T13:54:18.340

发生此错误是因为您已删除安装文件夹。在磁盘 C 上，文件夹名称是 GUID 键，格式为 c:/75f74225aca163c57a7737aa59a4。您必须重新运行 WindowsServerAppFabricSetup_x64.msi 并在第一个屏幕上按下一步之前，查看安装路径并复制包含已生成错误代码的丢失文件的临时文件夹：1603。

您可以在日志文件中引发错误之前看到该行

> **Process.Start:** C:\Windows\system32\msiexec.exe **/quiet** /norestart /i "c:\338f6462408072c851cf3b1e\Packages\AppFabric-1.1-for-Windows-Server-64.msi" ADDDEFAULT=Worker,WorkerAdmin,CacheClient,设置 /l*vx "C:\Users\Administrator\AppData\Local\Temp\AppServerSetup1_1(2013-03-05 18-06-39).log" LOGFILE="C:\Users\Administrator\AppData\Local\Temp \AppServerSetup1_1_CustomActions(2013-03-05 18-06-39).log" INSTALLDIR="C:\Program Files\AppFabric 1.1 for Windows Server" LANGID=en-US

然后删除单词`Process.Start`: 并`/quiet`在 MSDOS 中以管理员身份执行命令

> C:\Windows\system32\msiexec.exe /norestart /i "c:\338f6462408072c851cf3b1e\Packages\AppFabric-1.1-for-Windows-Server-64.msi" ADDDEFAULT=Worker,WorkerAdmin,CacheClient,Setup /l*vx " C:\Users\Administrator\AppData\Local\Temp\AppServerSetup1_1(2013-03-05 18-06-39).log" LOGFILE="C:\Users\Administrator\AppData\Local\Temp\AppServerSetup1_1_CustomActions(2013-03 -05 18-06-39).log" INSTALLDIR="C:\Program Files\AppFabric 1.1 for Windows Server" LANGID=en-US

安装程序将转到错误之前的步骤，然后询问丢失的文件夹，选择您复制到 C: 的文件夹的路径，如第一步所示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T18:36:08.417

同样的问题，PSModulePath 具有 SQL Server 2012 路径，因为我已经安装了它，但是该路径有一个尾随双引号 (")，它破坏了任何使用 PSModulePath 变量的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:47:28.977

在上面的错误跟踪中，它说：-

```
V1.0 is not installed 
```

看起来您正在安装*升级*包。那么，您不应该先安装 1.0*再*安装1.1 吗？

# c# - Visual Studio 2012 Ultimate - 在 URL 中创建一个随机字符串

> ID：15224158
> 
> 赞同：0
> 
> 时间：2013-03-05T12:45:41.833
> 
> 标签：c#, .net, webforms

每次我创建一个 .NET 4 Webforms (c#) 站点并按 F5 时，我总是会得到一个这样的 URL 字符串：

```
http://xxx.xxx.xxx:1086/(S(np4ocj1z5ze4ziohswu1zde4))/default.aspx 
```

在我测试时，我只是尝试发布一个新站点，而没有对其进行任何操作，并且当我将站点放在 IIS 上时，它还在 URL 中使用了一个随机字符串。

随着图像位置成为问题，有没有办法关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:40:04.010

（我对这个问题的评论是正确的，所以我将其添加为甜蜜、甜蜜业力的答案）。

看起来您将会话 ID 存储在 URI 中。您是否在 web.config 文件中启用了无 cookie 会话？

# ruby - UTF-8 中的 Rails Chinese locale 无效字节序列

> ID：15224159
> 
> 赞同：0
> 
> 时间：2013-03-05T12:45:42.710
> 
> 标签：ruby, ruby-on-rails-3, localization

我正在用繁体中文本地化 Rails 3.2 - Ruby 1.9.3 应用程序。英文一切正常，但中文我**在 UTF-8 中得到无效的字节序列。**

据我了解，Rails 应该可以开箱即用地使用中文（不是拉丁文）本地化。我错过了什么吗？

谢谢。

# javascript - Jquery ui 标签与玉

> ID：15224161
> 
> 赞同：1
> 
> 时间：2013-03-05T12:45:47.863
> 
> 标签：javascript, jquery, jquery-ui, node.js, pug

您好我正在尝试使用 Jade 模板引擎为节点 js 创建 Jquery UI 选项卡。它不工作。

这是 index.jade：

```
#tabs
  ul
    li
      a(href='#tabs-1') New employee
    li
      a(href='#tabs-2') Index of employees

  #tabs-1
    .page-header
      h1 New employee

    - var form = formFor(employee, {action: pathTo.employees(), method: 'POST', id: "employee_form", class: 'form-horizontal'})

    != form.begin()
    include _form
    .form-actions
      != form.submit('<i class="icon-ok icon-white"></i>  Create employee', {class: 'btn btn-primary'})
      span= ' or '
      != linkTo('Cancel', pathTo.employees(), {class: 'btn'})
    != form.end()

  #tabs-2
    .page-header
      h1 Index of employees

    - if (employees.length) {
    .row
      .span12
         table.table.table-striped
           thead
             tr
               th ID
               th.span3 Actions
           tbody
             - employees.forEach(function (employee) {
             tr
               td
                 != linkTo('employee #' + employee.id, path_to.employee(employee))
               td
                 != linkTo('<i class="icon-edit"></i> Edit', pathTo.edit_employee(employee), {class: 'btn btn-mini'}) + ' '
                 != linkTo('<i class="icon-remove icon-white"></i> Delete', pathTo.employee(employee), {class: 'btn btn-mini btn-danger', method: 'delete', remote: true, jsonp: '(function (u) {location.href = u;})'})
             - });
    - } else{
    .row
      .span12
         p.alert.alert-block.alert-info
            strong No employees were found.
    - } 
```

这是我的 layout.jade

```
!!! 5
html
  head
    title= title
    != stylesheetLinkTag('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/themes/base/jquery-ui.css', 'bootstrap', 'application', 'bootstrap-responsive')
    != javascriptIncludeTag('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js', 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', 'rails', 'application')
    script
      $(document).ready(function() {
        alert("hi");
        $("#tabs").tabs();
      });
    != csrfMetaTag()
  body
    .navbar
        .navbar-inner
            .container
               a.brand(href='#') Project name

    .container
      - var flash = request.flash('info').pop(); if (flash) {
        .alert.alert-info= flash
      - }

      - flash = request.flash('error').pop(); if (flash) {
        .alert.alert-error= flash
      - }

      != body

      hr
      footer
        p © Company 2012
  != contentFor('javascripts') 
```

选项卡未呈现。

呈现的 html 位于：http: [//jsfiddle.net/DUUdr/5/](http://jsfiddle.net/DUUdr/5/)

**但这不适用于玉**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:32:30.720

它的工作错误是在 jquery-min.js 和 jquery-ui.js 的位置

在将 javascripts 链接到页面时，Jquery-min.js 应该是第一个，而 Jquery-ui.js 应该是第二个

更新

```
 != javascriptIncludeTag('http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js', 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', 'rails', 'application') 
```

到

```
 != javascriptIncludeTag('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js', 'rails', 'application') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:57:50.530

1.  您的页面上没有有效的 JQuery UI 选项卡布局（在模板中）
2.  `tabs`您的页面上没有带有 id 的容器
3.  您的 JS 中有错误 - 您正在尝试提醒未定义的变量`hi`

[在官方文档](http://jqueryui.com/tabs/)中寻找工作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:57:52.677

你错过了`<ul>`标签标题里面`<div id="tabs">`的标签..标签正常工作..

试试这个

```
<div id="tabs">
<ul>
  <li><a href="#tabs-1">New employee</a></li>
  <li><a href="#tabs-2">Index of employees</a></li>
</ul>
<div id="tabs-1">
 ...... 
```

我对玉没有太多的想法..但是结构应该是这个标签才能工作和ui-css样式......添加`<ul><li>....` 玉结构，它应该可以工作

**注意：您的小提琴中缺少`""`警报..所以它不起作用**

`<ul>..`并在 html 中添加了上面的内容，它起作用了......在[这里工作小提琴](http://jsfiddle.net/bipen/DUUdr/1/)

**更新**

您首先加载了 jquery ui 代码，然后加载了 jquery min ......这是不正确的......首先加载 jquery min 然后再加载 ui .. 也检查 fiddle .. 查看 fiddle 的源代码，你会得到结构..

```
 != javascriptIncludeTag('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js','http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js', 'rails', 'application') 
```

# c++ - 如何创建一个不需要调用者将参数计数传递给它的可变参数函数？

> ID：15224165
> 
> 赞同：2
> 
> 时间：2013-03-05T12:45:53.990
> 
> 标签：c++, visual-c++, c++11

编辑：我很高兴看到有 C++11 的解决方案。无论如何，还没有人想出 C++98 的答案。所以，即使我已经接受了答案，问题仍然存在。

让我们假设您在命名空间中有一个函数：

```
namespace Math
{
  int Sum(<params>);
} 
```

您如何实现此函数 Math::Sum 以便调用者可以使用任意数量的参数调用它，而调用者也不需要传递参数的数量。呼叫者还需要在呼叫站点对其进行完全限定。例子： `Math::Sum(2, 4, 6, 8, 10, 12)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T12:51:32.537

这是一种在 C++11 中适用于任何支持加法运算符 ( `operator +`) 的通用方式：

```
#include <iostream>
#include <string>

template<typename T, typename U>
auto Sum(T&& t, U&& u) -> decltype(t + u)
{
    return (t + u);
}

template<typename T, typename... Ts>
auto Sum(T&& t, Ts&&... ts) -> decltype(
    t + Sum(std::forward<Ts>(ts)...)
    )
{
    return t + Sum(std::forward<Ts>(ts)...);
}

int main()
{
    std::cout << Sum(1, 2, 3) << std::endl;
    std::cout << Sum(1.0, 2.0, 3.0) << std::endl;
    std::cout << Sum(std::string("Hello "), std::string("World!")) << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T12:51:09.370

C++11使用的`std::min`和`std::max`在 C++11 中使用的方法是采用`initializer_list`

```
int Sum(std::initializer_list<int>); 
```

这适用于所有参数应该是相同类型的情况。你会称它为`Sum({ 1, 2, 3, 4})`

# c++ - 配置 C++ 应用程序构建的简单方法

> ID：15224167
> 
> 赞同：2
> 
> 时间：2013-03-05T12:45:58.557
> 
> 标签：c++, build, cmake

有些人使用自动工具，有些人编写 makefile，有些人声称配置 C++ 构建的最佳方式是使用 CMake。

我正在研究一些 CMake 文件，但是似乎有很多东西要写来使用一些外部库（如 boost 或其他东西）来获得最简单的配置。

我一直在仔细查看例如 SOCI CMake 文件（可在[http://sourceforge.net/p/soci/code-0/ci/a0c04683595a1c7c3d442c9cc8b3ec6804062f31/tree/src/cmake/](http://sourceforge.net/p/soci/code-0/ci/a0c04683595a1c7c3d442c9cc8b3ec6804062f31/tree/src/cmake/)获得），似乎有相当大的代码量。

是否可以以更简单的方式配置 C++ 应用程序？我只想构建一个 C++ 应用程序，包括一些目录，包括一些库。更重要的是，我想在不同的机器上构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:09:24.110

最简单的 CMakeList（包括 Boost）可能是这样的：

```
cmake_minimum_required(VERSION 2.8)
project(MyProject)

find_package(Boost 1.48.0 REQUIRED)

include_directories(${Boost_INCLUDE_DIRS})

add_executable(MyExeTarget source1.cpp source2.cpp header1.h header2.h) 
```

如果您正在使用需要链接的 Boost 部分，您可以这样做：

```
cmake_minimum_required(VERSION 2.8)
project(MyProject)

find_package(Boost 1.48.0 REQUIRED COMPONENTS filesystem)

include_directories(${Boost_INCLUDE_DIRS})

add_executable(MyExeTarget source1.cpp source2.cpp header1.h header2.h)

target_link_libraries(MyExeTarget ${Boost_LIBRARIES}) 
```

这些只是帮助您入门的简单示例。查看 CMake 文档，`FindBoost`了解更多关于将 Boost 与 CMake 结合使用的信息。

# javascript - 获取对象的名称

> ID：15224172
> 
> 赞同：0
> 
> 时间：2013-03-05T12:46:06.223
> 
> 标签：javascript, arrays, json

我有这个数组Json，我怎么能得到对象的名字？这是我的数组 json：

```
var datos =  {"animales":[
{
    "nombre":"Lucy",
    "animal":"Cat",
    "breed":"American Shorthair",
    "note":"She raised me"
},
{
    "nombre":"Homer",
    "animal":"Cat",
    "breed":"unknown",
    "note":"Named after a world-famous bassoonist"
},
{
    "nombre":"Muchacha",
    "animal":"Dog",
        "breed":"mutt",
        "note":"One of the ugliest dogs I’ve ever met"
    }
]} 
```

我怎么能得到钥匙的名字？（名词，动物，品种，注意）我正在尝试这种方式，但它不起作用：

```
for (key in datos) {
                HtmlT += "<td>" + datos.animales[key]+ "</td>"; // it should return nombre
            } 
```

datos.animales[key] 返回 undefind

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:49:02.020

您列出的名称不是 的属性`datos`，它们是`animales`数组中条目的属性。因此，您必须遍历`animales`数组，并且对于每个条目，使用`for-in`来遍历该条目的属性名称。

```
var animales, index, entry;

animales = datos.animales;
for (index = 0; index < animales.length; ++index) {
    entry = animales[index];
    for (key in entry) {
        // Here, `key` will have the names `"nombre"`, `"animal"`, etc.
    }
} 
```

或者在启用 ES5 的环境中，或者如果您使用 ES5 shim：

```
dataos.animales.forEach(function(entry) {
    var key;

    for (key in entry) {
        // Here, `key` will have the names `"nombre"`, `"animal"`, etc.
    }
}); 
```

请注意，所有条目的属性名称可能不同（当然，如果您的数据是这样定义的，它们可能是相同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:53:11.110

你可以试试 ：

```
for(var index in datos.animales){
    var animal = datos.animales[i];
    for(var prop in animal){
      console.log(prop+":"+animal[prop]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:49:51.633

尝试这个：

```
for (key in datos.animales[0]) { HtmlT += "" + datos.animales[0][key]+ ""; } 
```

这是您正在寻找的实际元素。

您可能想要遍历 datos 数组

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T12:49:23.847

尝试

```
for (key in datos) {
  for (animal in datos[key]) {
    HtmlT+= "\"" + animal + "\"";
  }
} 
```

在执行 for-each 类型循环时，这`key`是实际的键`object[key]`并将返回值。

# c# - 将绘制的线条另存为对象

> ID：15224175
> 
> 赞同：0
> 
> 时间：2013-03-05T12:46:15.543
> 
> 标签：c#, line

有没有可能保存我用图形创建的东西？例如：

```
Graphics g = PanelOne.CreateGraphics();
g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
g.DrawLine(p, beginn, end); 
```

是否可以将整行保存为对象？

原因是，我需要编写一个非常基本的 Drawtool，它应该有一个“撤消”功能。目前我将点保存在一个数组中，如果用户按下反斜杠键，则将它们过度绘制为白色，但性能非常缓慢，它会颤抖。

另外，我可能想为拖放线添加可能性，如果将线保存在对象中，这会容易得多。

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:53:22.493

你可以这样做，但你应该在`Paint`方法中绘制所有对象：

```
public abstract class DrawingObject
{
    public abstract void Draw(Graphics g);
}

public class Line : DrawingObject
{
    public Point Start { get; set; }
    public Point End { get; set; }
    public float Thickness { get; set; }
    public Color Color { get; set; }

    public override void Draw(Graphics g)
    {
        g.DrawLine(new Pen(Color, Thickness), Start, End);
    }
}

// Other classes derived from `DrawingObject` 
```

在您的表单中，存储您`DrawingObjects`的 s 列表并在需要时绘制它们：

```
public partial class MainForm : Form
{
    //...

    List<DrawingObject> _objects = new List<DrawingObject>();

    private void PanelOne_Paint(object sender, PaintEventArgs e)
    {
        base.OnPaint(e);

        foreach (var o in _objects)
        {
            o.Draw(e.Graphics);
        }
    }
} 
```

`Invalidate()`当您的对象发生任何更改（新行、删除行、移动行等）时调用面板的方法。

为避免绘图时闪烁，您可以将[`DoubleBuffer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doublebuffered.aspx)面板的属性设置为`true`。

# php - 使用 Paypal pro 在数据库中存储定期付款信息

> ID：15224177
> 
> 赞同：0
> 
> 时间：2013-03-05T12:46:17.847
> 
> 标签：php, api, paypal, payment, recurring

我想使用 Paypal pro API 制作一个在线注册系统。我想选择使用信用卡分期支付学费。为此，我正在使用 Paypal Pro 创建定期付款配置文件。我能够成功创建定期付款资料并将初始付款信息存储到数据库中。

现在，当下一次定期付款发生时，我想将付款信息与一些身份参数（例如 Payee Id 、 PayeeEmail 、 PayeeEnrolledDepartmentId ）一起存储到我的数据库中。

我听说过 Paypal pro 中的 IPN（即时付款通知）服务。但主要问题是，当我第一次创建重复配置文件时，我想发送一些身份参数，例如 ID、电子邮件等，以便下次执行 IPN 脚本时，我能够识别并存储付款具有正确标识的信息。

我怎样才能做到这一点 ？请帮助我一些有用的技术或代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:53:55.167

当 PayPal 创建配置文件时，它将创建配置文件 ID 并将其与买家相关联。您可以将其用作唯一的识别值。如果你想传递你自己的，你可以传递描述“DESC”变量中的一些东西。

# linux - 如果我们关闭一个关闭的套接字会发生什么

> ID：15224182
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:46:27.043
> 
> 标签：linux, sockets, tcp

我想知道如果我们关闭一个关闭的套接字或不存在的套接字会发生什么？
异常会影响发送/接收数据包的其他套接字吗？

编辑：
对不起，我没有说清楚。我的意思是我知道它将从关闭或关闭函数返回什么以及返回意味着什么，但我不知道它会影响现有的套接字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T12:55:45.893

可能，是的。如果您对曾经是 fd 的随机整数调用 close，您可能会破坏代码的其他部分，这些部分刚刚打开了另一个获得相同 fd 编号的连接。因此，您永远不应该双重关闭 fd：尽管从内核的角度来看它是完全安全的（您可以无害地获得 EBADF），但它可能会严重扰乱您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:56:42.563

或关闭（）：每`http://pubs.opengroup.org/onlinepubs/000095399/functions/close.html`

将返回`-1`并设置`errno`为`EBADF`. fildes 参数不是有效的文件描述符。

# php - file_put_contents 在使用 json_encode 时返回 null

> ID：15224183
> 
> 赞同：2
> 
> 时间：2013-03-05T12:46:29.533
> 
> 标签：php, javascript, json

我正在尝试使用 file_put_contents 将 json_encoded 变量放置到文件中。我不知道为什么它在目标文件上返回空值。

```
$json1=json_encode($php);
file_put_contents("path/text.txt",$json1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:53:45.860

`json_encode()``null`将在包含无效（非 UTF-8）字符的元素中设置一个值。

确保您的传入数据不包含无效字符。如果它来自不同的编码，[`iconv()`](http://php.net/iconv)请先将其转换为 UTF-8。

# mysql - MySQL 查询优化与 LIMIT、ORDER BY、bool 子句和 IN 子句

> ID：15224184
> 
> 赞同：0
> 
> 时间：2013-03-05T12:46:30.230
> 
> 标签：mysql, optimization, limit, in-clause

我需要一些建议。更笼统地说，我在以下示例中进行了解释：我有 MySQL InnoDB 表“帖子”，其中包含以下字段：

```
`id` - INT UNSIGNED AUTOINCREMENT
`title` - VARCHAR(100)
`abstract` - TEXT #can be converted to VARCHAR(2048)
`content` - TEXT #text + thml tags
`category` - SMALLINT
`created_on` - DATETIME
`modified_on` - DATETIME
`enabled` - TINYINT(1)
`deleted` - TINYINT(1) 
```

使用 inexes

```
`id` - PRIMARY
`category` - INDEX
`modified_on` - INDEX
(`enabled`,`deleted`) - INDEX 
```

表包含 10-15 百万条记录。我正在查询

```
SELECT id, title, abstract FROM posts 
WHERE enabled = 1 AND deleted = 0 
    AND category IN ( {id's} )
ORDER BY modified_on DESC 
LIMIT {offset}, {limit} 
```

随着对 MySQL 服务器的 50-100 个并发请求，它会停止。每个查询在 0.1-0.5 秒内执行，它取决于限制子句。

我是否需要单独的“类别”索引，因为有时我正在浏览所有类别的所有帖子，或者我可以将“类别”添加到 ( `enabled`, `deleted`) 索引并在每次我需要来自所有类别的帖子时传递所有类别的 ID (~200)他们的？

哪些解决方案可以提高此类查询的速度？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:50:27.270

我认为您应该在包含“已启用”和“已删除”的索引中添加类别。

希望它能减少您的查询时间

# c# - 为什么 Crystal Reports 不显示 int、DateTime、double、money 字段等？

> ID：15224188
> 
> 赞同：1
> 
> 时间：2013-03-05T12:46:38.590
> 
> 标签：c#, crystal-reports

我已经将一个类的对象设置为 CR 的数据源。所有的字符串字段都出现在设计中的Fields Explorer中。但是数字或日期时间字段会发生什么？我怎么带他们？

```
public class ClsOutDocket
{
    public string RegistrationNo { get; set; }        
    public double? WeightIn { get; set; }        
    public DateTime? DateIn { get; set; }        
    public string TimeIn { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:02:36.530

不幸的是，CrystalReport 不支持`Nullable<T>`并且`DateIn`和`WeightIn`字段都是可为空的。

如果它适用于您的情况，您可以做的是发布两个映射`null`到值的额外属性，如下所示：

```
public double _WeightIn
{
    get
    {
        if (WeightIn == null)
            return Double.NaN;

        return (double)WeightIn;
    }
    set
    {
        if (value == Double.NaN)
            WeightIn = null;
        else
            WeightIn = value;
    }
} 
```

当然，这会使您的类变得非常“脏”，除非您使用模型类将数据传递给报告，否则这可能是一个问题。您可以考虑添加此属性以在 VS 编辑器中隐藏该属性：

```
[EditorBrowsable(EditorBrowsableState.Never)] 
```

不要忘记 CR 会看到“假空”值 ( `Double.NaN`and `DateTime.MinValue`)，因为它不知道它们是*特殊值*，所以会照原样使用它们。如果这是一个问题（或者您不能使用正确的*null 值*），那么您需要更改您的报告来处理这种特殊情况。

# matlab - 将大量日期和时间值转换为序列号

> ID：15224194
> 
> 赞同：0
> 
> 时间：2013-03-05T12:46:57.373
> 
> 标签：matlab

我需要将日期和时间转换为数值。例如：

```
>> num = datenum('2011-05-07 11:52:23')

num = 
   7.3463e+05 
```

在不手动输入日期和时间的情况下，我将如何编写脚本来为众多值执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:51:07.180

您可以先将日期字符串存储在[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)（或矩阵，前提是它们具有固定格式）中，然后将其直接提供给[`datenum`](http://www.mathworks.com/help/matlab/ref/datenum.html). 例如：

```
C = {'2011-05-07 11:52:23'
     '2011-03-01 20:30:01'};
vals = datenum(C) 
```

# git - 合并行到行git冲突的简单方法

> ID：15224199
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:13.163
> 
> 标签：git, github

在解决 git 冲突方面面临很多问题，

如果有较少的文件冲突并且我们可以通过比较来合并它们，这很容易，但是如果没有大量文件冲突并且我想在我的本地设置中解决冲突，那么最好的解决方案是什么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:06:03.503

您可以为此使用任何外部合并工具。Ethier 在外部或通过`git mergetool`启动设置为默认合并工具（配置参数 merge.tool）或通过 --tool 选项提供的任何命令的命令运行它。[有关合并工具的更多信息](https://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

有许多可能的合并/差异应用程序，我不想特别偏爱一个。

# python - (nginx + uWSGI + Bottle) 提供静态文件

> ID：15224203
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:21.847
> 
> 标签：python, nginx, uwsgi, bottle, static-files

我决定在我的启动网站上使用 Python 作为主要语言。我很确定 uWSGI 和 Bottle 框架可以完美地协同工作。我有点担心他们会慢慢地提供静态文件（我在 NodeJS 中遇到过这个问题）。是否最好指定多个 uWSGI 应用程序并将它们指向不包含静态文件的不同目录？Nginx 会更快地提供静态文件吗？

```
ROOT/
|--assets/
|----some.css
|----and_image.png
|--robots.txt

sign_in/
|--[application related files here]
sign_up/
|--[application related files here] 
```

Web 服务器的根位于 Web 服务器的根`ROOT`之外，应用程序和包含应用程序文件的目录位于 Web 服务器的根之外。

我想这会更好

```
location /sign-in {
    uwsgi_pass      unix:///run/uwsgi/app/sign-in/sign-in.co.socket;
    include         uwsgi_params;
    uwsgi_param     UWSGI_SCHEME $scheme;
    uwsgi_param     SERVER_SOFTWARE    nginx/$nginx_version;
}

location /sign-up {
    uwsgi_pass      unix:///run/uwsgi/app/sign-up/sign-up.co.socket;
    include         uwsgi_params;
    uwsgi_param     UWSGI_SCHEME $scheme;
    uwsgi_param     SERVER_SOFTWARE    nginx/$nginx_version;
} 
```

比这个：

```
location / {
    uwsgi_pass      unix:///run/uwsgi/app/whole-website/whole-website.co.socket;
    include         uwsgi_params;
    uwsgi_param     UWSGI_SCHEME $scheme;
    uwsgi_param     SERVER_SOFTWARE    nginx/$nginx_version;
} 
```

真的更好吗？或者在这种情况下 uWSGI 不会提供静态文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:01:33.790

您希望 nginx 为您的静态文件提供服务。鉴于它们是静态的，与瓶中的模板/视图不同，它们不需要任何逻辑来提供服务。因此，静态文件请求永远不必打 python 更好。并且它真的很容易在 nginx 中设置！

在您的服务器块内只需添加：

```
location /assets/ {
  alias pathtoyourproject/ROOT/assets/;
} 
```

# delphi - Delphi Class def 导致 EStackOverflow

> ID：15224205
> 
> 赞同：2
> 
> 时间：2013-03-05T12:47:23.553
> 
> 标签：delphi, class, destructor

我有一个使用类的应用程序，一个名为 TBaseDB 的基类，并且会有许多 TBaseDB 的后代，所有 DIRECT 兄弟姐妹，现在只有一个已经启动，TOraDB，但稍后会添加 TSQLDB 和其他。

我的应用程序使用该类的一个实例，它是一个全局实例，即一个名为 PROJ 的全局变量。我对构造函数、析构函数和全局变量的理解存在问题，导致应用程序中的其他地方出现 EStackOverflow。如果我注释掉我的 PROJ.CREATE，EStackOverflow 就会消失。

我的构造函数只设置变量，它们不会动态创建链表、数组或其他内存密集型对象。

以下是一些代码片段。

```
// global var definition
// Specifically of BASE class, so I can call any child class without knowing which child class it is...
PROJ : TBaseDB; 
```

我的例程导致我的错误......

```
procedure TForm1.ShowBug;
begin
  // We have clicked on 'Create New Oracle Project

  // Now create our PROJ object.
  // This is defined globally, but MAY have been used before
  // so 'zero' it out
 FreeAndNil(PROJ);
 // Note that the create is on the CHILD class, not the BASE class
 // If I DON'T create the class, no error.... 
 PROJ := TOraDB.Create;

 // ... other code
end; 
```

这是我的类定义。

```
Type
  TBaseDB = class
  published    
  public

    DAC_ID: Integer;
    DAC_ShortName : String;
    DAC_LongName: String;

    Constructor Create;
    Destructor Destroy; override;
    ... other stuff
  end;

implementation

// TBaseDB /////////////////////////////////////////////////////////////////
constructor TBaseDB.Create;
begin
  inherited;
end;

destructor TBaseDB.Destroy;
begin
 // If I comment out next two lines, my issue goes away
 // but shouldn't I have them....?  
  Self.Free;
  Self := nil;

  // Always call the parent destructor after running your own code
  inherited;
end; 
```

这是我对 TOraDB 类的定义

```
Type
  TOraDB = Class(TBaseDB)
  public
    Constructor Create;
    Destructor Destroy; override;
   ... other stuff
  End;

implementation

// ------------------------------------------------------------------------------
constructor TOraDB.Create;
begin
  inherited;

  // Now set up the information about the source database.  We know it is Oracle
  // even though we DONT know if it is connected
  DAC_ID := 4;
  DAC_ShortName := 'Ora';
  DAC_LongName := 'Oracle';
end;

// -----------------------------------------------------------------------------
destructor TOraDB.Destroy;
begin
  // Always call the parent destructor after running your own code
  inherited;
end; 
```

我不了解有关“重置”全局类变量的内容。我应该在哪里'重置它，所以我仍然可以使用 GLOBAL 变量 PROJ？

谢谢，

GS

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:51:52.890

你不能调用`Self.Free`类的析构函数。

免费调用 Destroy 和 Destroy 调用 Free ......直到 Stack Overflow

```
destructor TBaseDB.Destroy;
begin

  // Don't do that at all in a destructor

  // Self.Free;
  // Self := nil;

  // Always call the parent destructor after running your own code
  inherited;
end; 
```

`TObject.Free`只是对析构函数的安全调用，因为它会测试Instance是否不为零。

```
procedure TObject.Free;
begin
  if Self <> nil then
    Destroy;
end; 
```

**编辑**

关于全局变量`PROJ`，有一个简单（**但不是很明智**）的解决方案

```
destructor TBaseDB.Destroy;
begin

  if Self = PROJ then
    PROJ := nil;

  // Always call the parent destructor after running your own code
  inherited;
end; 
```

你应该看看 Singleton 的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:52:28.693

不要使用：

```
 Self.Free;
  Self := nil; 
```

在你的析构函数中。

# jquery - Struts1.x 中的 JQuery

> ID：15224209
> 
> 赞同：-2
> 
> 时间：2013-03-05T12:47:32.343
> 
> 标签：jquery, struts-1

我`LookupdispatchAction`在struts 1.x中使用。我想使用 JQuery ajax 调用文件`getData`在类中调用一个方法。下面是我使用三个按钮的 JSP 代码。当我点击get按钮时，应该通过ajax调用来调用struts方法。`Action``Struts-config``getdata`

```
 <html>
    <head>
      <script type="text/javascript">
        var popup1 = false;

        function openPopUp(id) {
        }
      </script>

    </head>
    <body bgcolor="skyblue">

      <html:form action="/Appointment">
        <table>
          <tr><td><html:errors /></td></tr>
          <tr><td>PatientName:<html:text property="PatientName" /></td></tr>
          <tr><td>Time:<html:text property="Time" /></td></tr>
          <tr><td>INTime:<html:text property="INTime" /></td></tr>
          <tr><td>DoctorName:<html:text property="DoctorName" /></td></tr>
          <tr><td><html:submit property="method" value="register" /></td></tr>
          <tr>
            <td>
              <input type="button" onclick="openPopUp('popup1')" value="get" />
              <div id="popup1" class="popup"></div>
            </td>
          </tr>
          <tr><td><html:submit property="method" value="delete" /></td></tr>
        </table>
      </html:form>
    </body>
  </html> 
```

Struts 配置文件

```
<struts-config>
  <form-beans>
    <form-bean name="dynaRegistrationForm" type="org.apache.struts.action.DynaActionForm">

      <form-property name="PatientName" type="java.lang.String" />
      <form-property name="Time" type="java.lang.String" />
      <form-property name="INTime" type="java.lang.String" />
      <form-property name="DoctorName" type="java.lang.String" />

    </form-bean>
  </form-beans>

  <action-mappings>
    <action type="doctor.Appointing"
            name="dynaRegistrationForm"
            path="/Appointment"
            input="/Apoint.jsp" parameter="method" scope="request">
      <forward name="success" path="/Apoint.jsp" />
    </action>
  </action-mappings>

  <message-resources parameter="apps"/>

</struts-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:25:45.323

您应该使用 ajax 调用来调用 URL“/Appointment”。在您单击“获取”按钮时调用的 openPopUp(id) javascript 函数中添加以下内容。

```
function openPopUp(id) {
    $.get("Appointment.do", function(data){
          //do what you want with data. 
    });
} 
```

# .htaccess - htaccess 301 重定向：在 URL 中添加 cakephp 组件和操作作为查询字符串

> ID：15224210
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:33.873
> 
> 标签：.htaccess, redirect

我想在域上应用 301 重定向，以便我们可以将用户重定向到[http://domain.com/page/about](http://domain.com/page/about)。

**访问：**

重定向 301 域 域/页面/关于

**在 URL** [http://domain.com/page/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/中添加继续页面/about 的 URL关于页面/关于页面/关于页面/关于页面/关于](http://domain.com/page/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/aboutpage/about)

**浏览器错误：**

警告：glob() [function.glob]：模式超过了 260 个字符的最大允许长度。

请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:53:16.990

该`Redirect`指令链接两个路径节点，因此当您以 开头时`Redirect /path /something/something`，它会重定向以*开头*的*每个*URI 。这意味着像这样的请求被重定向到. 所以你不能用于你正在做的事情。你可以试试：*`/path``http://domain/path/some/other/path``/something/something/some/other/path``Redirect``RedirectMatch`*

 *```
RedirectMatch 301 ^/$ /page/about 
```

或者，或者，使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?$ /page/about [L,R=301] 
```*

# wpf - VisualStudio 2012 devenv.exe @ 50% F5 调试在完成之前不会启动

> ID：15224213
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:36.150
> 
> 标签：wpf, visual-studio, visual-studio-debugging, devenv

帮助表示赞赏。

我注意到当按 F5 开始调试 WPF 应用程序时，绿色的播放三角形会变灰，然后在一秒钟后再次变绿，就好像调试没有开始一样。经过一番调查，我发现 devenv.exe 运行热 @ ~50% 并且调试器不会启动，直到它停止，此时 myapp.vshost.exe 将在任务管理器/进程中创建并开始调试。

devenv 可能需要 30 到 120 秒才能完成它所做的任何事情，我可以开始调试这让我发疯。

我试过禁用所有扩展，重新启动 Visual Studio，但它们没有用。

任何人都可以对这种烦恼有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:11:27.850

重新安装 VS2012 解决问题。

不得不求助于这个很糟糕，但我没有时间去调查。

# php - 之后继续执行ajax调用的php脚本

> ID：15224214
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:41.890
> 
> 标签：php, jquery, ajax

我有一个名为 call.php 的页面，其中包含此代码

```
 <script src="http://localhost/js/jquery.js"></script>   
    <script>
        $(document).ready(function()
        {
            $.post("exe.php",
            { 
                a: 'a'
            },
            function(data)
            {
                alert(data);
            });
        });
    </script>   
///close tabs after onload 
```

在 exe.php 我有这个代码

```
<?php

    set_time_limit(60);
    ignore_user_abort(true);
    sleep(20);

    $file = fopen("test.txt","w");
?> 
```

即使在立即关闭选项卡后，我也需要继续执行 php，它在使用 WAMP 的 localhost 中工作正常，但在我的主机中不起作用，它在 localhost 中可能 10-14 秒后停止，并且服务器 ignore_user_abort(true) 关闭问题是：打开这个功能ON解决问题？以及为什么即使在此功能关闭时它在 localhost 中也能正常工作

## 我的执行需要大约 30 秒的时间我需要让它工作

**编辑**

我试过这样的东西

```
<?php
    ignore_user_abort(true);
function shutdown()
{
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/2.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/4.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/6.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/8.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/10.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/12.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/14.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/16.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/18.txt',"w");
    sleep(2);
    $file = fopen($_SERVER["DOCUMENT_ROOT"].'/logs/20.txt',"w");
}
//register_shutdown_function('shutdown');
shutdown();
?> 
```

打开选项卡并在完全加载后立即关闭此代码创建 2.txt ... 10.txt 所以肯定有一个选项可以在 10 秒后关闭脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:13:10.240

在 Windows 上，PHP 会将输出缓冲到一定数量的 Bytes（我上次测试时，我相信是 2048）。只要 PHP 不尝试刷新该缓冲区，它就不会检测到关闭的连接，因此它不会中止脚本。在 Linux 上，缓冲区的工作方式不同，最重要的是不会忽略`flush()`.

至于为什么你的`ignore_user_abort(true)`电话*“不起作用”*（这种句子不是一个好的错误报告，也不太可能导致你得到一个好的答案）我不可能知道。

*   但是，您可以尝试[`register_shutdown_function`](http://www.php.net/manual/en/function.register-shutdown-function.php)改用。

*   您还可以尝试使用`.htaccess`文件增加最大执行时间。语法很简单

    ```
    php_flag max_execution_time 120 
    ```

*   Web 服务器本身也可能有一个执行时间限制，可能会中止您的脚本，例如[TimeOut 。](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:53:03.327

您想使用该[`ignore_user_abort`](http://php.net/manual/en/function.ignore-user-abort.php)功能。

定义：

> 设置客户端断开连接是否应中止脚本执行

**警告：**请注意这一点，终止无限循环的唯一方法是终止 Web 服务器/PHP，具体取决于您的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:55:23.320

你需要打电话`ignore_user_abort`和打电话`set_time_limit`之前`sleep`。

# xpages - Xpage 错误：磁盘 i/o 是带有附件的受限操作

> ID：15224215
> 
> 赞同：1
> 
> 时间：2013-03-05T12:47:44.563
> 
> 标签：xpages, attachment

使用 Internet Explorer 附加文​​件和保存 xpage 文档时，我收到错误“磁盘 i/o 是受限制的操作”。

环境：具有富文本字段的 xpage 和绑定到相同富文本字段（用于保存附件）的上传控件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:34:18.233

将 XPage 签名者添加到服务器文档上标识允许运行受限操作的用户的字段中。此字段影响代理和 XPage 的权限。因此，在代理中被视为受限操作的任何操作也将在 XPage 中被视为受限操作，并且必须授予签名者足够的权限。

# android - ListView 行中的上下文菜单和切换按钮

> ID：15224218
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:52.380
> 
> 标签：android, listview, contextmenu, togglebutton

我有一个`ListView`，谁的`TextView`一个`ToogleButton`。现在我必须为我的`ListView`. 但如果切换按钮可见，上下文菜单将不会显示。`onListItemClick`也不行。为什么？![在此处输入图像描述](../Images/838d4d934ea0b3972d0c3316f7415805.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:36:59.670

@ChiragRaval，我找到了解决方案。

`android:focusable="false"`因为这`ToggleButton`是我需要的。现在`ToggleButton`s 和上下文菜单都可以工作了。

# eclipse - 搜索eclipse的快捷键

> ID：15224220
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:54.310
> 
> 标签：eclipse

单击`Help->Key Assist...`（或`Ctrl`- `Shift`-时，Eclipse 会显示快捷方式列表`L`。如何搜索此列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:47:54.310

今天我了解到，当在显示所有快捷键的窗口中再次点击`Ctrl`- `Shift`-`L`时，它会将您带到快捷键首选项页面，其中有一个文本框可以搜索键绑定。

# email - SMTP 点填充.. 何时何地进行？

> ID：15224224
> 
> 赞同：16
> 
> 时间：2013-03-05T12:47:58.083
> 
> 标签：email, smtp, rfc

在发送电子邮件时，我发现有关点填充的信息相互矛盾。

1.  如果该行包含一个点，则填充一个点（以避免提前终止）
2.  在每行填充一个点 stat 以点开头
3.  将一个点填充到 (1) 和引用的可打印消息部分的每一行部分

谁能澄清一下？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T09:47:19.800

根据 SMTP 标准 RFC 5321，第 4.5.2 节：

[https://www.rfc-editor.org/rfc/rfc5321#section-4.5.2](https://www.rfc-editor.org/rfc/rfc5321#section-4.5.2)

> 为了允许所有用户编写的文本透明地传输，使用了以下过程：
> 
> *   在发送一行邮件文本之前，SMTP 客户端会检查该行的第一个字符。如果是句点，则在行首插入一个附加句点。
> *   当 SMTP 服务器接收到一行邮件文本时，它会检查该行。如果该行由单个句点组成，则将其视为邮件结束指示符。如果第一个字符是句点并且该行还有其他字符，则删除第一个字符。

所以，从你问题的三点来看，第二点是对的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-19T00:41:54.057

实际答案：如果您使用引用的可打印格式，则始终将点转换为 = 2E。您不能依赖所有 smtp 服务器正确地进行点删除。

如果您想假设整个世界都符合标准，那么请使用上面的答案 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:28:39.210

在 SMTP 协议中，邮件由一个点和一个换行符终止

简单来说，例如：

> \r\n。\r\n

那些角色：

> CR LF 点 CR LF

这对应于一行开头的一个点。

如果邮件数据包含单个 . 在行首，后跟一个换行符，然后 SMTP 协议将其视为邮件终止，因此只会传递一部分邮件。

所以整个想法是通过填充一个额外的点来避免这种情况。

# php - 从下拉框中保存选定的选项

> ID：15224226
> 
> 赞同：0
> 
> 时间：2013-03-05T12:47:59.680
> 
> 标签：php, javascript, drop-down-menu

```
<form method="post">
  <select name="select_employee" id="select_employee">
    <?php $allemp=$this->AllEmployees; ?>
    <option selected value="">Select an employee..</option>
    <?php foreach($allemp as $row){ echo "<option value=".$row[ 'Id']. ">".$row[ 'Etunimi']. " - ". $row[ 'Sukunimi']. "</option>"; } ?>
  </select>
  <input type="hidden" name="send" value="namesent">
  <input type="submit" value="submit" id="button">
</form>
<br/>
<br/> 
```

当我提交此表单时，我停留在同一页面上，但我希望在同一时间保持先前选择的选项可见。我该怎么做？我试过：

```
document.getElementById('select_employee').value = "<?php echo $_GET['select_employee'];?>"; 
```

但它没有工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:50:33.217

这里：

```
 foreach($allemp as $row){
     echo "<option " . (isset($_POST['select_employee']) && $_POST['select_employee'] == $row['Id'] ? ' selected ' : '') . " value=".$row['Id'].">".$row['Etunimi']." - ".$row['Sukunimi']."</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:51:17.110

试试这个 ：

```
 $selected = ($row['Id'] == $_REQUEST['select_employee'])?'selected="selected"':'';
 echo '<option '.$selected.' value="'.$row['Id'].'">'.$row['Etunimi'].' - '. $row['Sukunimi'].'</option>'; 
```

1.  在上面添加了一行`echo options` `($selected = ($row['Id'] == $_REQUEST['select_employee'])?'selected="selected"':'';)`

2.  添加`'.$selected.'`在侧面选项中。

您的代码变为：复制粘贴下面的代码而不是您的代码

```
<form method="post">
  <select name="select_employee" id="select_employee">
    <?php $allemp=$this->AllEmployees; ?>
    <option selected value="">Select an employee..</option>
    <?php foreach($allemp as $row){ 
      $selected = ($row['Id'] == $_REQUEST['select_employee'])?'selected="selected"':'';
     echo '<option '.$selected.' value="'.$row['Id'].'">'.$row['Etunimi'].' - '. $row['Sukunimi'].'</option>';
 } ?>
  </select>
  <input type="hidden" name="send" value="namesent">
  <input type="submit" value="submit" id="button">
</form>
<br/>
<br/> 
```

# php - 假设我有 5 个文本字符串。我如何找到与其他人最“不同”的 2 个？

> ID：15224233
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:48:19.303
> 
> 标签：php

我正在使用 PHP。

假设我有 5 个字符串：

```
"The quick brown fox"
"The sly brown fox"
"The sly brown chicken"
"Totally different text here"
"Not like the others" 
```

我想找到与其他人最“不同”的 2 个。我希望能够将其扩展到 1000 个文本字符串并获得 300 个最“不同”的字符串。

任何想法从哪里开始？

**编辑**

如何定义“不同”有待商榷！

*** 编辑 2 ***

我们根据 PHP`similar_text`函数将“不同”定义为不同。但可能还有其他定义。真正的问题是如何比较所有的文本字符串。Jean 建议计算总数，这是 Phillipe 代码的破解版本：

```
$strings = array(
    "The quick brown fox",
    "The sly brown fox",
    "The sly brown chicken",
    "Totally different text here",
    "Not like the others"
);

$n = 3;
$sim = array();

for ($i = 0; $i < count($strings); $i++) {

    $total = 0;

    for ($j = 0; $j < count($strings); $j++) {

        if($strings[$i] != $strings[$j]) {

            $sim_val = similar_text($strings[$i], $strings[$j]);
            $total += $sim_val;
            $sim[$strings[$i]][] = array(
                "sim" => $sim_val,
                "w1" => $strings[$i],
                "w2" => $strings[$j]
            );

        }
    }

    $sim[$strings[$i]]['total'] = $total;

}

uasort($sim, function($w1, $w2) {
    return $w1["total"] > $w2["total"];
});

$sim = array_keys($sim);
$sim = array_slice($sim,0,$n); 
```

那返回

```
Array
(
    [0] => Not like the others
    [1] => Totally different text here
    [2] => The quick brown fox
) 
```

这似乎是正确的答案。感谢所有人（除了那些不赞成这个问题的人。向你嘘 ;-)

****编辑 3 *******

 **好的，所以我一直在用我的 1000 个字符串进行测试。它们每个都有大约 500 个独特的单词，a`strlen`大约有 14000 个。所以......为了快速运行，我们可以立即忘记`similar_text`'cos 所指出的那样，它很慢。我写了一个快速的`compare_words'函数：

```
function same_words($text1,$text2) {

    $words_1 = array_unique(explode(" ",$text1));
    $words_2 = array_flip(array_unique(explode(" ",$text2)));       

    foreach($words_1 AS $word) {
        if($words_2[$word]) {
            $count++;   
        }
    }

    return $count;

} 
```

但这也太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:52:17.943

使用该`similar_text()`功能并获得最低百分比。

[http://php.net/manual/en/function.similar-text.php](http://php.net/manual/en/function.similar-text.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:03:50.303

你需要做的是一点点蛮力并用其他单词测试每个单词，存储相似度（即基于similar_text），然后按相似度排序结果

```
$strings = array(
    "The quick brown fox",
    "The sly brown fox",
    "The sly brown chicken",
    "Totally different text here",
    "Not like the others"
);

$n = 5;
$sim = array();
$sum = 0;

for ($i = 0; $i < count($strings); $i++) {
    $t = 0;
    for ($j = 0; $j < count($strings); $j++) {
        if ($j != $i) {
            $t += similar_text($strings[$i], $strings[$j]);
        }
    }

    $avg = $t / (count($strings) - 1);
    $sim[] = array(
        "sim" => $avg,
        "word" => $strings[$i]
    );

    $sum += $avg;
}

$avg = $sum / count($strings);
usort($sim, function($w1, $w2) use ($avg) {
    return abs($w1["sim"] - $avg) < abs($w2["sim"] - $avg);
});

for ($i = 0; $i < $n && $i < count($sim); $i++) {
    echo $sim[$i]['word'] . "<br />";
} 
```

但是您要记住，这种方法不是很快并且可以运行`O(n^2 * m^3 + n log n)`

代替`similar_text`你也可以使用 levenshtein 它表现得更好，并产生类似的结果`O(n^2*m^2 + n log n)`（其中 m 是输入字符串的最大长度）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:59:49.510

好吧，这里有一个想法：定义你所说的与众不同。识别多种差异并为它们打分。例如 ：

*   相同的字符串：0
*   一些常用词，排序相同：分数取决于排序的程度和常用词的个数。
*   一些常用词，但顺序不同
*   一些单词具有相同顺序的一组共同字母（例如虚拟和虚拟），等等......

分数越高，所调查标准的字符串之间的差异就越大。

然后计算两个字符串的“差异”分数。分数越高，他们的差异就越大。

当需要根据多个不同的参数做出决定时，通常会使用这种方法。这就是一些反垃圾邮件软件识别垃圾邮件的方式。除了他们计算一个分数来确定电子邮件与垃圾邮件的相似程度。

问题是：它总是关于比较。因此，您可以将两个字符串一起比较，但不能将一个字符串与其他字符串进行比较。因此，要识别两个最不同的字符串，您需要使用一些平均系统……并选择那些得分离平均值较远的字符串。**

# python - 芹菜链任务顺序

> ID：15224234
> 
> 赞同：11
> 
> 时间：2013-03-05T12:48:22.843
> 
> 标签：python, django, celery, django-celery

我需要通过 ftp 下载文件，更改它并上传回来。我正在使用 celery 来执行此操作，但是在尝试使用链接时遇到了问题，我得到了：

> TypeError：upload_ftp_image() 正好需要 5 个参数（给定 6 个）

另外，我可以使用链并确保这些步骤是连续的吗？如果不是，还有什么选择？

```
res = chain(download_ftp_image.s(server, username , password, "/test_app_2/model.dae" ,"tmp/test_app_2/"), upload_ftp_image.s(server, username , password, "tmp/test_app_2/model.dae" ,"tmp/test_app_2/")).apply_async()
print res.get() 
```

任务：

```
@task()
def download_ftp_image(ftp_server, username , password , filename, directory):
    try:
        ftp = FTP(ftp_server)
        ftp.login(username, password)
        if not os.path.exists(directory):
            os.makedirs(directory)
            ftp.retrbinary("RETR /default_app/model.dae" , open(directory + 'model.dae', 'wb').write)
        else:
            ftp.retrbinary("RETR /default_app/model.dae" , open(directory + 'model.dae', 'wb').write)
        ftp.quit()
    except error_perm, resp:
        raise download_ftp_image.retry(countdown=15)

    return "SUCCESS: "  

@task()
def upload_ftp_image(ftp_server, username , password , file , directory):
    try:
        ftp = FTP(ftp_server)
        ftp.login(username, password)
        new_file= file.replace(directory, "")
        directory = directory.replace("tmp","")
        try:
            ftp.storbinary("STOR " + directory + new_file , open(file, "rb"))
        except:
            ftp.mkd(directory)
            ftp.storbinary("STOR " + directory + new_file, open(file, "rb"))
        ftp.quit()
    except error_perm, resp:
        raise upload_ftp_image.retry(countdown=15)

    return "SUCCESS: " 
```

对于我的具体情况，这是好的还是坏的做法？：

```
result = download_ftp_image.apply_async((server, username , password, "/test_app_2/model.dae" ,"tmp/test_app_2/",), queue='rep_data')
result.get()
result = upload_ftp_image.apply_async((server, username , password, "tmp/test_app_2/model.dae" ,"tmp/test_app_2/",), queue='rep_data')
#result.get() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-06T08:55:01.433

如果您不希望将前一个任务的返回值用作参数，另一种选择是使用“不变性”。

[http://docs.celeryproject.org/en/latest/userguide/canvas.html#immutability](http://docs.celeryproject.org/en/latest/userguide/canvas.html#immutability)

而不是将您的子任务定义为：

```
download_ftp_image.s(...) and upload_ftp_image.s(...) 
```

将它们定义为：

```
download_ftp_image.si(...) and upload_ftp_image.si(...) 
```

现在，您可以在链中使用具有通常数量参数的任务。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-05T13:03:03.373

链总是将*先前*的结果作为第一个参数传递。从[链文档](http://docs.celeryproject.org/en/latest/userguide/canvas.html#chains)：

> 链接的任务将应用其父任务的结果作为第一个参数，在上述情况下将导致`mul(4, 16)`结果为 4。

您的`upload_ftp_image`任务不接受这个额外的参数，因此它失败了。

你有一个很好的链接用例；*保证在第一个任务完成**后*调用第二个任务（否则无论如何都无法传递结果）。

只需为上一个任务的结果添加一个参数：

```
def upload_ftp_image(download_result, ftp_server, username , password , file , directory): 
```

您可以利用该结果值；也许使它成为下载方法返回下载文件的路径，以便上传方法知道要上传什么？

# c# - 如何在 DateTimePicker 控件中只显示月份和年份

> ID：15224237
> 
> 赞同：0
> 
> 时间：2013-03-05T12:48:28.227
> 
> 标签：c#, winforms

`DateTimePicker`WinForms中如何只显示月份和年份？
我想要像`January 2013`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:29:39.447

您需要三个步骤来修改显示格式`DateTimePicker`：

*   将`Format`属性设置为`DateTimePickerFormat.Custom`
*   将`CustomFormat`属性设置为`"MMMM yyyy"`
*   分配`Value`

现在分配的日期将以格式显示`January 2013`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T13:24:00.433

您可以使用此代码，但它仅提供数字格式：

```
DateTime now = DateTime.Now;

string s = now.ToString("MM-yy"); 
```

打印 s -> 03 13

# iphone - 当应用程序进入后台时关闭弹出窗口

> ID：15224245
> 
> 赞同：1
> 
> 时间：2013-03-05T12:49:13.143
> 
> 标签：iphone, ios, uipopovercontroller

应用程序进入后台时如何关闭弹出窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:52:50.110

每当您的应用程序进入后台时，最好注册您的控制器`UIApplicationDidEnterBackgroundNotification`或`UIApplicationWillResignActiveNotification`将其关闭，这将使您的生活变得更加轻松。

在您的注册通知`viewDidLoad`

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(myMethod)
                                                 name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

实现方法和

```
 -(void)myMethod{
    // dismiss popview here
    } 
```

最后从视图控制器中的通知中取消注册

```
-(void)dealloc{
[[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T12:51:26.377

您可以使用 appdelegate.m 文件中的委托方法执行此操作

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //put your dissmiss popover code here
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T12:52:16.657

`NSNotification`在您的应用程序委托的方法中发送一个`willResignActive`，并在包含弹出窗口的视图控制器中监听它，并在收到通知时关闭所述弹出窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:00:00.280

尝试这个

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   //[popover dissmissPopoverAnimated:YES];
} 
```

# html - 在 WPF 中组织 HTML 文件资源的最佳方法是什么？

> ID：15224246
> 
> 赞同：1
> 
> 时间：2013-03-05T12:49:17.337
> 
> 标签：html, wpf, visual-studio, resources

目前，我将我的 HTML 文件标记为内容资源。我将它们加载到我的 WebBrowser WPF 控件中，这很好用。

这是因为我认为不可能将它们作为资源保存在可执行文件中（我想这样做），因为无法解析 HTML 文件中的相对路径（例如 css 或脚本）。

这是唯一的方法还是我错过了什么？

我有以下想法：

1）我将所有资源保存到一个临时文件夹中并从那里加载它们

2）当控件尝试加载引用的css/脚本文件以从资源加载文件时，我使用回调事件（如果有）。

# c++ - 在 QGraphisItem 中移动子项

> ID：15224248
> 
> 赞同：1
> 
> 时间：2013-03-05T12:49:25.717
> 
> 标签：c++, qt, qt4, qgraphicsitem

我有一个项目是其他一些项目的父项。它不是一个组，实际上这个项目绘制了一条三次贝塞尔曲线，孩子们是它的控制点。

问题是移动子项会导致几何变化，所以我应该在移动子项时调用父项`prepareGeometryChange()`，但该方法受到保护。

这只是一个例子，总的来说，我正在寻求答案的问题是：

当 a`QGraphicsItem`具有依赖于其子级的几何图形，并且子级可以通过用户交互移动时，我该如何使用`prepareGeometryChange()`？

有必要调用吗？以这种方式构建物品并为此目的使用孩子是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:56:01.233

我自己记得同样的问题，我重新实现了

```
QGraphicsItem::itemChange(GraphicsItemChange change, const QVariant & value) 
```

为孩子和父母。

当每个`change`是`QGraphicsItem::ItemPositionChange`那个孩子发出一个信号时，父母有一个相应的插槽。

# sql - Oracle 11g SQL 行到列

> ID：15224249
> 
> 赞同：0
> 
> 时间：2013-03-05T12:49:31.390
> 
> 标签：sql, oracle, oracle11g, pivot

我有两个看起来像这样的表：

```
LOAN_APP_QST (profile on lending) and
QST_PART (it set up all the fields of loan application). 
```

询问：

```
SELECT LOAN_APP_QST.REQ_ID,
       LOAN_APP_QST.QST_PART_ID,
       LOAN_APP_QST.LAQ_VALUE,
       QST_PART.QP_NUM,
       QST_PART.QP_NAME
  FROM    SP_MTS.LOAN_APP_QST LOAN_APP_QST
       INNER JOIN
          SP_MTS.QST_PART QST_PART
       ON (LOAN_APP_QST.QST_PART_ID = QST_PART.QST_PART_ID)
       WHERE LOAN_APP_QST.REQ_ID = 23000; 
```

查询结果：

```
REQ_ID     QST_PART_ID     LAQ_VALUE     QP_NUM      QP_NAME
23000          -1           IVANOV       surname    FirstName
23000          -2           IVAN          name      LastName
23000          -3           V.            pname     Patronymic 
```

我想要这样的输出：

```
REQ_ID      surname     name    pname
23000       IVANOV       IVAN   V. 
```

我正在使用 Oracle DB 11。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:56:46.587

在 Oracle 11g 中，您可以使用以下`PIVOT`功能：

```
select *
from
(
  SELECT LOAN_APP_QST.REQ_ID,
   LOAN_APP_QST.LAQ_VALUE,
   QST_PART.QP_NUM
  FROM SP_MTS.LOAN_APP_QST LOAN_APP_QST
  INNER JOIN SP_MTS.QST_PART QST_PART
    ON (LOAN_APP_QST.QST_PART_ID = QST_PART.QST_PART_ID)
  WHERE LOAN_APP_QST.REQ_ID = 23000
) src
pivot
(
  max(LAQ_VALUE)
  for QP_NUM in (surname, name, pname)
) piv; 
```

这也可以使用带有`CASE`表达式的聚合函数来编写：

```
SELECT LOAN_APP_QST.REQ_ID,
  max(case when QST_PART.QP_NUM = 'surname' then LOAN_APP_QST.LAQ_VALUE end) as surname,
  max(case when QST_PART.QP_NUM = 'name' then LOAN_APP_QST.LAQ_VALUE end) as name,
  max(case when QST_PART.QP_NUM = 'pname' then LOAN_APP_QST.LAQ_VALUE end) as pname
FROM    SP_MTS.LOAN_APP_QST LOAN_APP_QST
INNER JOIN SP_MTS.QST_PART QST_PART
  ON (LOAN_APP_QST.QST_PART_ID = QST_PART.QST_PART_ID)
WHERE LOAN_APP_QST.REQ_ID = 23000
group by LOAN_APP_QST.REQ_ID; 
```

# leaflet - 在 Leafletjs 上设置投影

> ID：15224253
> 
> 赞同：6
> 
> 时间：2013-03-05T12:49:45.527
> 
> 标签：leaflet, map-projections

我在一个家庭项目中使用了 Leafletjs（现在看起来就是这样![](../Images/08176aa3bb856158724b6bd3a9041803.png)。但我找不到必须设置投影，我为 OpenLayers 找到了它，它看起来像这样：

```
// Openlayers settings 
    //var defaultMaxExtent = new OpenLayers.Bounds(427304, 6032920, 927142, 6485144); 
    var defaultMaxExtent = new OpenLayers.Bounds(427304, 6032920, 927142, 6485144);

    var defaultProjection = "EPSG:25832";
    var defaultUnits = "Meters";
    var defaultResolutions = new Array(1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024);
    var defaultExtent = new OpenLayers.Bounds(215446, 2103547, 706886, 6203897); //this extent is used when the page is loaded.
    //var defaultExtent = new OpenLayers.Bounds(705446, 6203547, 706886, 6203897); //this extent is used when the page is loaded.
    map = new OpenLayers.Map('map', { projection: defaultProjection, units: defaultUnits, maxExtent: defaultMaxExtent, resolutions: defaultResolutions, controls: [

        // Hide controls by default
    new OpenLayers.Control.Navigation({ wheelChange: HideInfoBox() }),
    new OpenLayers.Control.ArgParser(),
    new OpenLayers.Control.Attribution()]
    });
    layer = new OpenLayers.Layer.WMS("kort", "http://serverAddress?", { nbr: '', username: 'admin', password: 'adminadmin', layers: 'Overlayer', format: 'image/png' }); 
```

有人可以帮助我吗？

**更新：** 我试图从 Leaflet 中获取标准投影并对其进行自定义，就像这样

```
L.CRS.EPSG25832 = L.extend({}, L.CRS, {
    code: 'EPSG:25832',
    projection: L.Projection.SphericalMercator,
    transformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),

    project: function (latlng) { // (LatLng) -> Point
        var projectedPoint = this.projection.project(latlng),
                earthRadius = 6378137;
        return projectedPoint.multiplyBy(earthRadius);
    }
}); 
```

现在投影是正确的。但是现在的问题是坐标是错误的，例如，如果我从 Leaflet 获得坐标，则 Kolding 现在位于法国中部而不是丹麦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T09:50:11.060

我自己找到了问题的解决方案。通过这样做：

```
var crs = L.CRS.proj4js('EPSG:25832', '+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs', new L.Transformation(0.5 / (Math.PI * L.Projection.Mercator.R_MAJOR), 0.5, -0.5 / (Math.PI * L.Projection.Mercator.R_MINOR), 0.5));

  var map = new L.Map('Krak-Map', { center: new L.LatLng(latitude, longitude), zoom: 17, crs: crs }); 
```

# android - 将继承自 Theme.Dialog 的主题用于活动，根布局中的内容始终下移约 30dp

> ID：15224256
> 
> 赞同：0
> 
> 时间：2013-03-05T12:50:06.370
> 
> 标签：android, layout, dialog

我为我的活动使用了自定义主题。这个主题继承自 Theme.Dialog。

```
<style name="MyDialogTheme" parent="android:Theme.Dialog">
        <item name="android:windowBackground">@null</item>
        <item name="android:windowNoTitle">true</item> 
        <item name="android:windowIsFloating">true</item>
        <item name="android:gravity">center</item>
        <item name="android:windowFrame">@null</item>
        <item name="android:padding">0dp</item>

</style> 
```

这个活动视图的根布局是LinearLayout。问题是：根布局中的内容在 ANDROID 4.0 上总是向下移动约 30dp，但在 ANDROID 2.2 上运行良好。我不知道为什么。我搜索了几个小时，发现也许这条线是解决方案：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

我在我的 OnCreate() 中写了这一行，但仍然无法解决这个问题。
如果你知道为什么，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:21:50.220

你可以通过使用下面的代码来实现它

当您的创建对话框按如下方式传递主题时

```
Dialog dialog = new Dialog(context,
            android.R.style.Theme_Translucent_NoTitleBar); 
```

希望它能解决你的问题

# android - android从经纬度获取印度的邮政编码

> ID：15224257
> 
> 赞同：3
> 
> 时间：2013-03-05T12:50:10.140
> 
> 标签：android, gps

我需要从纬度和经度中获取邮政编码，我能够获取带有街道名称的地址，但无法获取邮政编码。String **pCode**在下面的代码中返回**Null 。**下面是我正在使用的代码：

```
 import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentResolver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.Toast;

public class GetCurrentLocation extends Activity implements OnClickListener {

    private LocationManager locationMangaer=null;
    private LocationListener locationListener=null; 

    private Button btnGetLocation = null;
    private EditText editLocation = null;   
    private ProgressBar pb =null;

    private static final String TAG = "Debug";
    private Boolean flag = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //if you want to lock screen for always Portrait mode  
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        pb = (ProgressBar) findViewById(R.id.progressBar1);
        pb.setVisibility(View.INVISIBLE);

        editLocation = (EditText) findViewById(R.id.editTextLocation);  

        btnGetLocation = (Button) findViewById(R.id.btnLocation);
        btnGetLocation.setOnClickListener(this);

        locationMangaer = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    }

    @Override
    public void onClick(View v) {
        flag = displayGpsStatus();
        if (flag) {

            Log.v(TAG, "onClick");      

            editLocation.setText("Please!! move your device to see the changes in coordinates."+"\nWait..");

            pb.setVisibility(View.VISIBLE);
            locationListener = new MyLocationListener();

            locationMangaer.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 10,
                    locationListener);

            } else {
            alertbox("Gps Status!!", "Your GPS is: OFF");
        }

    }

    /*----------Method to Check GPS is enable or disable ------------- */
    private Boolean displayGpsStatus() {
        ContentResolver contentResolver = getBaseContext().getContentResolver();
        boolean gpsStatus = Settings.Secure.isLocationProviderEnabled(
                contentResolver, LocationManager.GPS_PROVIDER);
        if (gpsStatus) {
            return true;

        } else {
            return false;
        }
    }

    /*----------Method to create an AlertBox ------------- */
    protected void alertbox(String title, String mymessage) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Your Device's GPS is Disable")
                .setCancelable(false)
                .setTitle("** Gps Status **")
                .setPositiveButton("Gps On",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // finish the current activity
                                // AlertBoxAdvance.this.finish();
                                Intent myIntent = new Intent(
                                        Settings.ACTION_SECURITY_SETTINGS);
                                startActivity(myIntent);
                                dialog.cancel();
                            }
                        })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // cancel the dialog box
                                dialog.cancel();
                            }
                        });
        AlertDialog alert = builder.create();
        alert.show();
    }

    /*----------Listener class to get coordinates ------------- */
    private class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location loc) {

                editLocation.setText("");
                pb.setVisibility(View.INVISIBLE);
                Toast.makeText(getBaseContext(),"Location changed : Lat: " + loc.getLatitude()
                                + " Lng: " + loc.getLongitude(),Toast.LENGTH_SHORT).show();
                String longitude = "Longitude: " +loc.getLongitude();  
                Log.v(TAG, longitude);
                String latitude = "Latitude: " +loc.getLatitude();
                Log.v(TAG, latitude);

                /*----------to get City-Name from coordinates ------------- */
                String cityName=null;
                String addrs = null;
                String pCode = null;
                Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());                  
                List<Address>  addresses;  
                try {  
                 addresses = gcd.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);  
                 if (addresses.size() > 0)  
                  System.out.println(addresses.get(0).getLocality());

                 cityName=addresses.get(0).getLocality();
                 addrs = addresses.get(0).getAddressLine(0);
                 pCode = addresses.get(0).getPostalCode();
                } catch (IOException e) {                 
                 e.printStackTrace();  
                } 

                String s = longitude+"\n"+latitude +"\n\nMy Currrent City is: "+cityName+" Address "+ addrs+
                        " Postal Code"+pCode;
                editLocation.setText(s);
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub          
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub          
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub          
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:03:11.330

使用这个 api 它也会给出邮政编码。通过传递纬度和日志。 [http://ws.geonames.org/findNearbyPostalCodesJSON?formatted=true&lat=23.0333&lng=72.6167](http://ws.geonames.org/findNearbyPostalCodesJSON?formatted=true&lat=23.0333&lng=72.6167)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:06:14.837

API`.getFromLocation`状态的描述：

> 返回值可以通过网络查找的方式获得。结果是最佳猜测，不保证有意义或正确。

因此，返回的位置很有可能只缺少一些信息。

您的问题有两种解决方案：

1）增加*maxResults*，假设为 5。并检查 5 中是否有任何一个有邮政编码。（查询可能返回小于 5，因此请确保进行适当的检查）

2）参考 [location 中的 ZipCode](https://stackoverflow.com/questions/5855843/zipcode-from-location)，如果我们有城市名称，如何单独查询。

# wordpress - WooCommerce - 税款计算不正确？

> ID：15224258
> 
> 赞同：0
> 
> 时间：2013-03-05T12:50:11.690
> 
> 标签：wordpress, woocommerce, financial

在撰写本文时，我正在使用最新的 WooCommerce 运行最新的 WordPress。

我有一个 20% 的标准税收规则设置。这是英国增值税。

我有一个 350 英镑的产品设置。350 的 20% 应该是 280。

```
20 x 350 / 100 = 70 
```

但是，在我的产品页面和结帐篮等上，金额为：291.67（不含税）。这应该是280。这真的是错误的！所以我不确定这与我如何对产品页面的输出进行编码有关，因为我根本没有接触过结帐模板。

我不确定我是否设置错误？为什么我得到这样一个奇数。

我设置的一些规则：

*   是的，我将输入含税价格。
*   在购物车/结账时显示价格：不含税。
*   运费税等级：基于购物车商品的运费税等级。

我真的无法解决这个问题。

**税收设置：**

![在此处输入图像描述](../Images/772d4292b7cedc5e873511c675f34e7b.png)

**结帐时的税金：**

![在此处输入图像描述](../Images/a0c972e944518c4d9a68941533f4b4b9.png)

非常感谢任何帮助！

谢谢，米奇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:06:34.560

我认为它是正确的，它*不是*：

```
ExVAT = £350 - ((£350 / 100) * 20) = £280 
```

因为这是计算已经包含增值税的价格，而不是它的价格；

```
 20% / 100 = 0.2
 0.2 + 1   = 1.2

 £350 / 1.2 = £291.67 
```

# bash - 用于从命令行接受字符串并显示包含该字符串的文件列表的 Shell 脚本

> ID：15224259
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:50:21.017
> 
> 标签：bash, shell, unix, filesystems

如何编写一个 shell 脚本，该脚本将在一个目录（或子目录）下的文件列表中*从命令行*搜索给定的字符串，并显示包含该字符串的所有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:54:16.173

试试这个，如果它给你你想要的：

```
grep -rl "string" **/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:54:49.390

基本示例：

```
#!/bin/sh

STRING=$1
DIR=$2

find $DIR -type f -exec grep -l $STRING {} \; 
```

修复处理空白等留给学生作为练习。

我将脚本命名为“findfile.sh”并使用第一个参数 = 要查找的字符串，第二个 = 要查找的目录运行它。像这样：

```
[jenny@ryo-ohki:tmp]$ ./findstring.sh lyskom /home/jenny/src/elisp
/home/jenny/src/elisp/lyskom-elisp-client-all-0.48/README
/home/jenny/src/elisp/lyskom-elisp-client-all-0.48/lyskom-all-0.48.el
/home/jenny/src/elisp/lyskom-elisp-client-all-0.48/lyskom-all-0.48.elc
/home/jenny/src/elisp/lyskom-elisp-client-all-0.48/NEWS-0.48
/home/jenny/src/elisp/lyskom-all-0.48.elc
/home/jenny/src/elisp/lyskom-swedish-0.48.elc
/home/jenny/src/elisp/lyskom.elc 
```

如您所见，它列出了目录 /home/jenny/src/elisp/ 及其子目录中包含单词“lyskom”的每个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:56:36.577

此 shell 脚本显示包含指定字符串的所有文件

```
#!/bin/bash
grep -l "$1" * 
```

您可以将其保存为 find_util.sh 并执行

```
chmod a+x find_util.sh

./find_util.sh search 
```

如果您希望它搜索子目录也可以将其更改为

```
#!/bin/bash
grep -lr "$1" * 
```

# php - 仅使用 foreach 显示前 2 个结果

> ID：15224278
> 
> 赞同：0
> 
> 时间：2013-03-05T12:51:41.013
> 
> 标签：php

我怎样才能让这条 foreach 行只通过结果 0 到 1 ？

```
<?php foreach ($categories as $forum_category) { ?> 
```

我不想只显示前 2 的所有结果。

任何帮助，将不胜感激。

谢谢

贾斯汀史密斯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T12:57:33.043

```
foreach (array_slice($categories, 0, 2) as $forum_category){
  //do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T12:53:43.857

```
<?php $i = 0;
  foreach ($categories as $forum_category) { 
     if($i < 2) {
         // display result
     }
     $i++;
  }
 ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T12:54:01.053

这是一种方法。

```
<?php

     $count = 0;
     foreach ($categories as $forum_category) {
           if($count == 2)
               break;
           else {
                     // Your Code
           }
        $count++;
     }

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:53:18.043

`<?php for($i=0;$i<2;$i++){you can do anything with $categories[$i]}?>`

或者您可以在语句`$i=0`之前添加一个参数，并且：`foreach`

```
$i=0;
<?php foreach ($categories as $forum_category) { $i++; if($i>2) return }?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T12:54:50.240

只保留一个柜台。根据您提供的有限结构，我只能建议：

```
<?php 
    $categoryNumber = 0;
    foreach ($categories as $forum_category) { 
        $categoryNumber++;
        if($categoryNumber > 2){
            continue;
        }
        //...
    }
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T12:55:20.717

```
for ($i = 0; $i < 2; $i++) {
    $categories[$i];
} 
```

或者

```
foreach ($categories as $forum_category) { 
   if($i < 2) {
       $categories[$i];
   }
   $i++;
} 
```

要不就

```
$categories[0];
$categories[1]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T12:55:37.573

```
<?php $i = 0;
  foreach ($categories as $forum_category) { 
     if($i <= 1) {
         //code
     }
     $i++;
  }
 ?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T12:55:43.780

试试这个：

```
$i = 0;
foreach ($categories as $forum_category) {
    echo $forum_category;
    if($i == 1) break;
$i++;
} 
```

# c# - 尝试设置组合框的选择时，对象引用未设置为对象的实例

> ID：15224279
> 
> 赞同：3
> 
> 时间：2013-03-05T12:51:42.170
> 
> 标签：c#, asp.net, telerik, page-lifecycle, radcombobox

我有一个`text box`和一个`RadComboBox`这样的：

```
<asp:TextBox ID="txt_inner_emp_num" runat="server" Width="60px" 
ontextchanged="txt_inner_emp_num_TextChanged" AutoPostBack="true"></asp:TextBox>
<telerik:RadComboBox ID="rad_ddl_inner_emp_name" runat="server" CausesValidation="False"
CollapseDelay="0" Culture="ar-EG" ExpandDelay="0" Filter="Contains" ItemsPerRequest="100"
MarkFirstMatch="true" Width="380px" EnableAutomaticLoadOnDemand="True" EmptyMessage="-emp name-" ShowMoreResultsBox="True" AutoPostBack="True">
</telerik:RadComboBox> 
```

* * *

根据[Telerik 文档](http://demos.telerik.com/aspnet-ajax/combobox/examples/populatingwithdata/autocompletesql/defaultcs.aspx)

> 将数据源设置为 RadComboBox。使用 DataSourceID 或 DataSource 属性来执行此操作，并将 DataTextField 和 DataValueField 属性设置为数据源中的相应字段。（注意，当使用 DataSource 时，您必须在每次回发时设置该属性，最方便的是在 Page_Init 中。）将 EnableAutomaticLoadOnDemand 设置为 true。

* * *

```
 protected void BindEmployees()
        {

            rad_ddl_inner_emp_name.Items.Clear();
            rad_ddl_inner_emp_name.DataSource = Utilities.GetAllEmployees();
            rad_ddl_inner_emp_name.DataTextField = "name";
            rad_ddl_inner_emp_name.DataValueField = "emp_num";
            rad_ddl_inner_emp_name.DataBind();

        } 
```

* * *

```
 protected void Page_Init(object sender, EventArgs e)
        {
            BindEmployees();
        } 
```

* * *

```
 protected void txt_inner_emp_num_TextChanged(object sender, EventArgs e)
        {
            rad_ddl_inner_emp_name.ClearSelection();
            rad_ddl_inner_emp_name.Items.FindItemByValue(txt_inner_emp_num.Text.TrimEnd()).Selected = true;//Get exception here Object reference not set to an instance of an object.
        } 
```

我发现`rad_ddl_inner_emp_name.Items.Count = 0`！！在设置选择之前！如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:45:58.787

我相信您现在已经知道，radcombox typeahead 功能通过客户端交互而不是按值搜索文本，这就是您找不到值的原因。

我建议通过 emp_num 搜索一个辅助对象（假设这是始终输入到文本框中的值）。

例如，创建一个全局变量：

```
private Dictionary<string, string> Emp_Dict = new Dictionary<string, string>(); 
```

然后在您进行绑定时填充此字典。以下代码假定返回一个可枚举的类型。如果不是，您可能必须以不同的方式填充字典。此外，要使其正常工作，您必须包含 (System.Linq)。

```
 var dataSource = Utilities.GetAllEmployees();
    Emp_Dict = dataSource.ToDictionary(ex => ex.emp_num, ex => ex.name);
    rad_ddl_inner_emp_name.Items.Clear();
    rad_ddl_inner_emp_name.DataSource = dataSource;
    rad_ddl_inner_emp_name.DataTextField = "name";
    rad_ddl_inner_emp_name.DataValueField = "emp_num";
    rad_ddl_inner_emp_name.DataBind(); 
```

所以现在我们需要在文本更改事件上使用字典。

```
protected void txt_inner_emp_num_TextChanged(object sender, EventArgs e)
{
    rad_ddl_inner_emp_name.ClearSelection();
    if (Emp_Dict.ContainsKey(txt_inner_emp_num.Text.TrimEnd()))
    {
        rad_ddl_inner_emp_name.SelectedValue = txt_inner_emp_num.Text.TrimEnd();
        rad_ddl_inner_emp_name.Text = Emp_Dict[txt_inner_emp_num.Text.TrimEnd()];
    }

} 
```

现在，当文本框中的文本发生更改时，当在文本框中输入有效的 emp_num 时，radcombobox 将更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:10:16.730

问题是项目仅在您请求时才被加载！

放

`EnableAutomaticLoadOnDemand="False"`

它会起作用的！

更新：

如果要使用 LoadOnDemand 设置这两个属性并删除 EnableAutomicLoadOnDemand！

```
EnableLoadOnDemand="True"
EnableItemCaching="True" 
```

更新 2：启用 ItemCaching 不是必需的，但它没有伤害！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:04:25.900

由于您没有任何项目，`rad_ddl_inner_emp_name.Items`您可以`txt_inner_emp_num.Text`在 ddl 中设置为已选择。

首先检查是否`rad_ddl_inner_emp_name.Items count > 0`然后设置选择的所需文本。或者您可以检查是否`rad_ddl_inner_emp_name.Items.FindItemByValue(txt_inner_emp_num.Text.TrimEnd())`不为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T18:40:27.077

除非禁用视图状态，否则无需在每次回发时将数据绑定到 RadComboBox。

Filter、MarkFirstMatch 和 EnableAutomaticLoadOnDemand 在您的情况下没有用，因为您自己加载所有员工。

LoadOnDemand 基本上是当用户开始在 ComboBox 内输入时，ComboBox 触发 ItemsRequested 事件并通过 ajax 检索数据。

```
<asp:TextBox ID="txt_inner_emp_num" runat="server" Width="60px" 
ontextchanged="txt_inner_emp_num_TextChanged" AutoPostBack="true" />

<telerik:RadComboBox ID="rad_ddl_inner_emp_name" runat="server" 
   CausesValidation="False" Culture="ar-EG">
</telerik:RadComboBox>

protected void Page_Init(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        rad_ddl_inner_emp_name.DataSource = Utilities.GetAllEmployees();
        rad_ddl_inner_emp_name.DataTextField = "name";
        rad_ddl_inner_emp_name.DataValueField = "emp_num";
        rad_ddl_inner_emp_name.DataBind();
    }
}
protected void txt_inner_emp_num_TextChanged(object sender, EventArgs e)
{
    string value = txt_inner_emp_num.Text;
    if(!string.IsNullOrWhiteSpace(value))
    {
        value = value.Trim();
        if (rad_ddl_inner_emp_name.Items
            .FindItemByValue(txt_inner_emp_num.Text.Trim()) != null)
            rad_ddl_inner_emp_name.SelectedValue = value;
    }
} 
```

# excel - 将超链接添加到 Excel 电子邮件正文文本

> ID：15224280
> 
> 赞同：12
> 
> 时间：2013-03-05T12:51:42.157
> 
> 标签：excel, vba

我正在尝试从 excel 生成电子邮件，但想向电子邮件正文添加超链接。我希望超链接显示为文本而不是文件路径。

我该怎么做呢？

我正在使用下面的代码。

```
 strBody = "Hello " & Range("QuoteFirstName").Value & "," & _
       vbNewLine & _
       vbNewLine & _
           "It was good to speak with you earlier today/yesterday." & _
       vbNewLine & _
       vbNewLine & _
           "[Any personal message]" & _
       vbNewLine & _
       vbNewLine

On Error Resume Next
With OutMail
    .To = StrTo
    .CC = ""
    .BCC = ""
    .Subject = StrSubject
    .Body = StrBody
    .Attachments.Add FileNamePDF
    If Send = True Then
        .Send
    Else
        .Display
    End If
End With 
```

我可以使用`.Hyperlinks.Add`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:55:43.813

假设您使用 Outlook 自动化，请切换到 HTML 邮件格式：

```
.BodyFormat = olFormatHTML '// 2
.HTMLBody = strBody 
```

并为正文使用标记：

```
strBody = "Hello ..<br />next line ..." & _
          "Click <a href=""http://www.foo.com"">here</a> to ..." 
```

# c# - 如何在页面重新加载 Mvc asp.net c# 后防止我的列表项消失

> ID：15224283
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:51:59.770
> 
> 标签：c#, jquery, asp.net-mvc-4

我对 MVC 和 C# 真的很陌生，我修改了 _Layout.cshtml 以拥有一个菜单，并且在单击任何菜单项时，我有一个 jquery 函数来根据我单击的父项创建子菜单项。当我单击子菜单中的任何链接时，它会重新加载母版页并清除我不喜欢的子菜单。有人可以帮助我在页面重新加载后动态重新创建相同的子菜单，或者欢迎任何解决该问题的想法好的我创建了一个控制器，我在我的 _Layout 中访问它来创建我的菜单栏

```
 public abstract class MainController : Controller
    {
        private static HRMenuDataContext db = new HRMenuDataContext();
        public static string theVal, toCheck;
        public static int num;
        public static HRMenuDataContext theData
        {
            get { return db; }
        }

        public MainController()
       {
           //ViewData["Parent"] = from c in theData.psHCMLanguages
           //                     where
           //                         (from m in theData.psHCMMenus
           //                          where
           //                             m.sModule == "AP"
           //                          select m.sMainRef
           //                         ).Distinct().Contains(c.szCode)

           //                     select c;

           ViewData["parent"] = theData.theParent("HR");

           ViewData["check"] = theData.doCheck(toCheck);

           ViewData["Child"] = from c in theData.psHCMLanguages
                               where
                                   (from m in theData.psHCMMenu_1s
                                    let parent = theVal
                                    where
                                      m.sModule == "HR" &&
                                      m.sSubRef == parent
                                    select
                                        m.sPrompt
                                    ).Contains(c.szCode)

                               select c; 

        }
    } 
```

在我的 _Layout.cshtml 我有这个

```
@using Menus.Data;
@using Menus.Controllers;
@using System.Linq;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - Persol Systems</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link href="~/Content/theStyle.css" rel="stylesheet" />
    <style type="text/css">
        #theSide {
            clear:both;
            position:relative;
            float:left;
            left:100px;
            bottom:50px;
            top:0;
            border:1px solid red;
            width:150px;
            height:600px;
        }
    </style>
</head>
<body>
    @{
        string[] name;
        char[] sep = { ' ', '/', '\\', '.' };
        string mess="";
     }
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("your logo here", "Index", "Home")</p>
            </div>
            <div class="float-right">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>
                    <ul id="menux">
                        @{
                            foreach (var c in (IEnumerable<theParentResult>)ViewData["parent"])
                            {

                            <li><a>@c.English </a>
                                @{MainController.theVal = c.szCode;}

                                <ul class="firstChild">
                                    @{foreach (var d in (IEnumerable<psHCMLanguage>)ViewData["Child"])
                                      {
                                          var data = MainController.theData.doCheck(d.szCode);

                                          if ((int)data == 1)
                                         {  
                                             <li><a onclick="theAlert('@d.szCode','@d.English')">@d.English</a>
                                            @{
                                              MainController.theVal = d.szCode;
                                            }

                                         </li>  
                                          }

                                          else if (data == 0)
                                          {
                                              name = d.English.Split(sep);
                                              foreach (string nams in name)
                                              {
                                                  mess += nams;
                                              }
                                            <li>
                                                <a onclick="theAlert('@d.szCode','@d.English')">@d.English</a>
                                                @*@Html.ActionLink(d.English, mess, c.English)*@

                                            </li>
                                              mess = "";
                                              Array.Clear(name, 0, name.Length);
                                          }
                                      }
                                    }
                                </ul>
                            </li>

                            }
                        }
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div id="body">  
        <div id="theSide">
            <ul id="sidePanel">

            </ul>
        </div>
        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">
                  @RenderBody()
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; @DateTime.Now.Year - Persol Systems</p>
            </div>
        </div>
    </footer>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
    <script type="text/javascript">
        function theAlert(theId, theName) {
            $("ul#sidePanel").contents().remove();
            $("ul#sidePanel ").append("<li id='" + theId + "'><a >" + theId + "</a></li>");
            $("li#" + theId + "> a").click(function (e) {
                window.location.href("../Home/About");
            });
            return false;
        }
    </script>
</body>
</html> 
```

单击链接它会重新加载整个页面并清除我的侧面板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:58:26.300

示例场景

模型

```
public class Menu
{
    // prop parent for example 
    public List<Parents> parents{ get; set; }
    // prop child
    public List<Childs> child{ get; set; }
    // prop check
    public bool checked { get; set; }
} 
```

控制器

```
public class Menu: Controller
{
    public ActionResult _MainMenu()
    {
        Menu menu = new Menu();
        menu.Parent = // parent elements from your db context
        menu.Child = // child elements from your db context
        menu.Parent = // check element from your db context

        return PartialView(menu);
    }
} 
```

_MainMenu.cshtml

```
@model Menu

// same like your layout view, fill here like layout
// for example
@foreach(var parent in Model.Parents)
{
    // generate menus
    ....
 } 
```

_Layout.cshtml

```
...
<nav>
    <ul id="menux">
         @Html.Action("_MainMenu", "Menu")
    </ul>
</nav>
... 
```

我建议你一个示例代码，你应该修改你想要的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:57:25.620

HTTP 是无状态的，这意味着您不持久的任何数据都会在回发之间丢失。如果您想保留该信息，您将需要使用 Javascript 通过 Ajax 将菜单结构发送到服务器或使用基于浏览器的[本地存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)。

# schema - Db2 一次性删除模式内容和模式

> ID：15224287
> 
> 赞同：1
> 
> 时间：2013-03-05T12:52:05.673
> 
> 标签：schema

db2 9.7 控制中心是否有一个查询，其中我不能一次查询`DELETE(DROP)`我的架构（包括架构）的所有内容？

我的另一个选择是先删除/删除对象，然后再删除模式。但我想立即删除`DROP THE ENTIRE SCHEMA WITH ALL OBJECTS`。

`DROP SCHEMA <schema_name> CASCADE/RESTRICT`对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:18:36.597

该`ADMIN_DROP_SCHEMA`程序是您正在寻找的。

> 该`ADMIN_DROP_SCHEMA`过程用于删除特定模式和其中包含的所有对象。
> ^([http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0022036.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0022036.htm))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T18:24:22.317

首先删除模式中的所有表。然后尝试使用删除架构

```
DROP SCHEMA SCHEMA_NAME RESTRICT 
```

webchain.in 有示例 java 程序，解释如何使用 java 程序删除模式

如果删除所有表后删除模式失败，错误 SQLCODE=-551，SQLSTATE=42501，请尝试命令

将数据库上的 dbadm 授予 USER_NAME

# java - 从简单的 JSP spring MVC 页面获取价值

> ID：15224290
> 
> 赞同：0
> 
> 时间：2013-03-05T12:52:17.337
> 
> 标签：java, spring, jsp, model-view-controller

我已经通过 MVC 模板创建了 Spring MVC 项目，但我无法从 textinput 中获取值。有人可以建议我怎么做吗？带有项目结构的 home.jsp 的源代码可以在下面的屏幕截图中看到。AdminController 类的代码是：

```
@Controller
@RequestMapping(value = "/foo")
public class AdminController {

@RequestMapping(value = "/bar")
public String testAction(@RequestParam String fieldName) {
    // yourValue contain the value post from the html form
    return "yourview";
    }
} 
```

![这是来自包资源管理器和 home.jsp 源的屏幕截图](../Images/622f41fd9134854c10802fc766b66c6a.png)

当我部署项目时，它从 address 开始`http://localhost:8080/test/`。哪里可以换成`/test/`别的？在点击提交按钮后，浏览器转发`http://localhost:8080/foo/bar`并显示`HTTP status 404`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:59:37.140

看看你在这里发布的图片。您的控制器请求映射是 /bar，而您形成的动作被称为 /foo/bar。看看这是不是错误。也为弹簧动作方法提供请求方法。

由于您使用 URL localhost:8080/foo/bar 访问应用程序，因此我建议对其进行一些更改。

从 Controller 中移除 RequestMapping 标签。它应该是 ：

```
@Controller    
public class AdminController {

    @RequestMapping(value = "bar", method=RequestMethod.POST)
    public String testAction(@RequestParam String fieldName) {
      // yourValue contain the value post from the html form
       return "yourview";
    }
} 
```

并给出表单动作名称，如 action="bar"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:14:04.497

**404：**

您的表单映射是绝对的

```
<form ... action="/foo/bar"> 
```

这就是为什么它正在命中`http://localhost:8080/foo/bar`并且您没有部署其上下文路径`/foo`因此为 404 的应用程序。

要更正此问题，请使用 spring 为您添加上下文路径：

```
<spring:url value="/foo/bar" var="form_url" />
<form ... action="${form_url}" method="POST"> 
```

**字段名称：**

您需要确定要映射到 testAction 参数的请求参数。

```
@RequestMapping(value = "/bar", method=RequestMethod.POST)
public String testAction(@RequestParam(value="fieldName") String fieldName) {
  // yourValue contain the value post from the html form
  return "yourview";
} 
```

**/测试：**

看起来您正在使用 Tomcat 服务器来运行该应用程序。这可能在 pom.xml 中配置为使用 /${project.artifactId} （默认）启动应用程序，其中您的工件 ID 为“test”。（[http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html#path](http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html#path)）。您可以通过配置 maven 插件来提供不同的值：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <configuration>
      <path>WHATEVER</path>
    </configuration>
  </plugin> 
```

# c++ - 基于现有文件创建 C++ Visual Studio 项目

> ID：15224292
> 
> 赞同：0
> 
> 时间：2013-03-05T12:52:20.307
> 
> 标签：c++, visual-studio-2010, opengl, visual-studio-2012

我从未使用过 C++ 或 C。我正在尝试基于可以在此处找到的现有文件创建一个 Visual Studio 项目：[example1.cpp](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/CODE/CHAPTER02/WINDOWS_VERSIONS/)和[资源](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/CODE/include/)。如您所见，这是一本 OpenGL 书籍的示例代码。我的计算机上有 opengl 和 glut 并且它们可以工作（经过测试）。

根据上面提到的文件，在 Visual Studio 2012 中创建了一个空的 C++ 项目（如果您可以在 2010 年左右提供解决方案，我还安装了其他版本）。我包括了头文件和源文件。虽然我仍然在我的 IDE 中得到以下信息：

![在此处输入图像描述](../Images/97bf9d4a7f714e2b80e30af1dae41ef3.png)

有以下错误：

> 无法打开源文件“Angle.h”

（虽然该文件存在于项目中）

谁能告诉我如何让这些文件编译和运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:14:56.263

头文件需要与源文件位于同一目录中才能使用带引号的#include。

```
#include "header.h" 
```

换句话说，Angel.h 必须与 example1.cpp 在同一目录中。

但是，您可以从 Project Settings>VC++ Directories 添加特定路径到您的项目，并使用包含在这些路径中的头文件

`#include <header.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:10:24.910

确保文件 angel.h 与 .cpp 文件位于同一路径中。

# java - 迭代地在另一个枚举的定义中使用一个枚举

> ID：15224294
> 
> 赞同：2
> 
> 时间：2013-03-05T12:52:24.217
> 
> 标签：java, enums

我试图通过使用枚举而不是字符串数组来使我的代码对其他开发人员更具可扩展性。我有：

```
public enum FOO {
   A, B, C, D, E
} 
```

和

```
public enum BAR {
   Z, Y, X, W
} 
```

在`FOO`我希望能够迭代地定义：

```
D, E, F(Z), F(Y), F(X), F(W) 
```

因此，当我将项目添加到 BAR 时，它会自动将其添加到 FOO。我认为它必须是 FOO 中的一个方法，并且 BAR 几乎可以肯定是一个内部类（因此是私有的），但我不知道该怎么做。使用

```
for (BAR b : BAR.values()) {} 
```

似乎至少是解决方案的一部分。如果有帮助，对于上下文，我正在使用 Pathfinder RPG 技能，并列出每个技能：

```
public enum SkillsEnum {
    ACROBATICS,
    APPRAISE,
    BLUFF,
    CLIMB,
    CRAFT,
    DIPLOMACY,
    DISABLE_DEVICE,
    DISGUISE,
    ESCAPE_ARTIST,
    FLY,
    HANDLE_ANIMAL,
    HEAL,
    INTIMIDATE,
    KNOWLEDGE(KnowledgeList.values().[0])
    KNOWLEDGE(KnowledgeList.values().[1]) etc
}
enum KnowledgeList {
     ARCANA,
     DUNGEONEERING,
     ENGINEERING,
     GEOGRAPHY,
     HISTORY,
     LOCAL,
     NATURE,
     NOBILITY,
     PLANES,
     RELIGION
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:05:05.740

关于将项目添加到`BAR`. [Java 中的枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)是一组预定义的常量，您应该在编译时知道它们的值。首先不可能将项目添加到 ENUM。希望我已经正确解释了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:06:56.617

枚举实例是由类似 C 的语法神奇地创建的`public enum E { A, B, C }`，您无法添加更多实例，即使它们在编译时已知也是如此。

根据您必须为每个枚举实例附加多少逻辑以及您拥有多少不同的“子枚举”类别，您可以尝试以下方法之一：

### 带参数的单个枚举类

```
public enum Day {
    MONDAY(false),
    TUESDAY(false),
    WEDNESDAY(false),
    THURSDAY(false),
    FRIDAY(false),
    SATURDAY(true),
    SUNDAY(true);

    private final boolean weekend;

    private Day(boolean weekend) {
        this.weekend = weekend;
    }

    public boolean isWeekend() {
        return weekend;
    }

    public void doSomething() {
        if (isWeekend()) {
            // have fun
        } else {
            // do some work
        }
    }
} 
```

优点：这种方法允许您拥有一个枚举类（例如，您可以轻松地在所有实例上迭代），简单，并且不添加样板。

缺点：如果您经常测试类别成员资格，您的代码将变得杂乱无章`if`；您不能在编译时强制变量引用特定类别的实例。

### 实现接口的枚举

```
public interface Day {
    public void doSomething();
}

public enum WorkDay implements Day {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY;

    @Override
    public void doSomething() {
        // do some work
    }
}

public enum WeekEnd implements Day {
    SATURDAY,
    SUNDAY;

    @Override
    public void doSomething() {
        // have fun
    }
} 
```

优点：您可以对单个类别的实例进行类型安全的引用；您可以在方法中隔离特定类别的代码，减少成员资格测试的需要；可以在不修改原始代码的情况下进行扩展。

缺点：需要一些样板文件（对于简单的情况可能太多了）；您不会获得所有实例的自动生成集合。

[有关枚举实现接口](https://stackoverflow.com/a/15147361/2093341)的更多示例，请参见此答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:10:29.680

我没有看到将值动态添加到枚举的方法。它的设计使得所有值在编译时都是已知的。

作为替代方案，考虑自己实现枚举（使用类型安全枚举设计模式）。例如，“enum” B 从“enum” A 扩展而来，并继承其所有值：

```
public class MyEnumA {
    private MyEnumA() {         
    }   
    public static MyEnumA a1 = new MyEnumA();
    public static MyEnumA a2 = new MyEnumA();
    public static MyEnumA a3 = new MyEnumA();
}

public class MyEnumB extends MyEnumA {
    private MyEnumB() {
        super();
    }   
    public static MyEnumB b1 = new MyEnumB();
    public static MyEnumB b2 = new MyEnumB();
    public static MyEnumB b3 = new MyEnumB();
} 
```

# javascript - 为什么这个输入总是保持可点击状态？

> ID：15224296
> 
> 赞同：2
> 
> 时间：2013-03-05T12:52:24.427
> 
> 标签：javascript, jquery, html, propagation

基本上我希望外部 div 接受所有事件，因此 div 中的输入和其他任何内容都不可点击：

```
<div id="div1">
    <div id="div2">
        <label>Input 1</label>
        <input type="text" id="input1" />
    </div>
</div>

$(document).ready(function() {
    $(document).on('click', '#input1', function(e){
        e.preventDefault();
    };
}); 
```

这是非工作示例[http://jsfiddle.net/KFWmk/3/](http://jsfiddle.net/KFWmk/3/)

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T12:54:44.933

在较新的 jQuery (1.6+) 中：

```
$('div input').prop("readonly", true); 
```

这会将 div 中的所有输入的 HTML`readonly`属性设置为 true。

请注意，`.attr()`在 jQuery 中已弃用用于设置属性（布尔值为 on 或 off 的属性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:00:59.257

首先，因为您没有包含 jQuery 库。
第二，因为你有一个类型-o。
第三，因为焦点是在点击事件之前发出的。（[证明](http://jsfiddle.net/KFWmk/25/)）

如果要使输入字段不可编辑，可以使用：

```
$("input").prop("readonly", true); 
```

或者只是当您在 html 中创建输入字段时：

```
<input readonly type="number"> 
```

如果您想防止专注于输入字段，您可以使用：

```
$("input").on("focus", function() {
    $(this).blur();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:53:56.697

```
$('div input').attr("readonly", "readonly"); 
```

您可以将 div 中的所有输入字段设置为只读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:55:05.423

你可以这样尝试

```
$(document).ready(function() {
    $('div input').prop("readonly", true);
}); 
```

# android - 为什么 AsyncTask 中的 rawQuery 慢得多..？

> ID：15224298
> 
> 赞同：2
> 
> 时间：2013-03-05T12:52:31.790
> 
> 标签：android, sqlite, android-asynctask

情况如下：在我的应用程序中，我有用于与其他特殊设备通信的服务。在此通信过程中，我需要在我的应用程序中查询数据库以获取继续与第二个设备通信所需的数据。在这里，我使用带有 2 个参数的 rawQuery。查询不是太复杂，因为我实际上是在查询数据库中的视图。结果，我应该得到大约*50 行*和*25 列*。

问题是，如果我只是从服务（同一个线程）调用这个查询，它会阻塞我的 UI *6 秒*。有动画信号长时间操作卡住了。

另一方面，如果我在 AsyncTask 的 doInBackground 中调用完全相同的查询（以将其从 UI 线程中移动），我的动画将毫无问题地流动，但对于相同数量的数据查询现在需要*25 秒*到*1 分钟*，具体取决于我正在测试的手机。 . （几乎 1 分钟就可以用 Intel cpu 对付新的摩托罗拉）

我测量时间以及浪费了这么多时间（因为两部手机上的查询和数据库完全相同），所有这些时间都浪费在第一次访问游标上。在我的情况下 c.moveToFirst() ..

我的问题更多的是面向 Android 而不是 SQL，因为在我的应用程序中我已经集成了完整的数据，数据库

有什么想法，有人吗？

**编辑：** 我尝试了不同的解决方案来解决我遇到的问题，这是我遇到的有趣的事情：当我使用另一个具有查询的 Runnable 线程时，时间减少到几秒钟（就像所有东西都在 UI 线程中执行一样） ***线程 t =新线程（RunnableWhichHoldQuery）；***//然后我就启动线程t。

仍然不确定为什么 AsyncTask 的行为会像它一样..现在我只是想解释一下，因为我想更好地了解发生了什么..感谢每个有想法的人..

# maven - Maven 插件：使用插件外的类

> ID：15224303
> 
> 赞同：1
> 
> 时间：2013-03-05T12:52:50.700
> 
> 标签：maven, maven-plugin

当我使用插件时，有没有办法使用插件之外的类？

我创建了一个 maven-plugin，我希望当您有一个从特定接口继承的类时使用该插件。该接口在我的 maven-plugin 中。

现在我使用我的 maven-plugin 创建了一个 maven-projekt。我如何在 maven-plugin 之外使用我的界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:02:48.683

好吧，项目总是可以依赖插件。我的意思是——它们也是普通的人工制品。

如果我是你，我会将可以在插件外部使用的通用代码提取到一个单独的模块（工件）中。这样插件和需要依赖它的项目都会很整洁。哪怕是一节课。

# perl - HTML::Template::Pro: 在循环的第二次运行时做一些事情

> ID：15224304
> 
> 赞同：1
> 
> 时间：2013-03-05T12:52:52.770
> 
> 标签：perl, loops, if-statement, perl-html-template

我在我的 perl 应用程序中使用 HTML::Template::Pro。我在循环中显示 HTML 元素，我想在循环的第二个元素之后显示一些内容。我`loop_context_vars`在我的 HTML::Template::Pro 初始化中添加了 ，以访问循环内的变量（如`__counter__`）。

现在我正在寻找一种方法来检查此循环的特定迭代以插入我的 HTML 元素。

```
<TMPL_IF __counter__ == 2>
   My new HTML element.
</TMPL_IF> 
```

如何`__counter__`在 HTML::Template::Pro 中访问条件语句中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:43:58.120

在 HTML::Template::Pro 中，您可以使用 HTML::Template::Expr 中的表达式

```
<TMPL_IF EXPR="__counter__ == 2" >
    My new HTML element.
</TMPL_IF> 
```

# git - 从 ubuntu 的 rabitvcs 中删除 nautilus 对 git 的支持

> ID：15224318
> 
> 赞同：1
> 
> 时间：2013-03-05T12:53:28.613
> 
> 标签：git, ubuntu-10.04, rabbitvcs

我已经在我的机器 Ubuntu 11.10 上安装了 rabbitVcs，它支持 SVN 和 git。但是对于 git，它的行为不端，因为我在所有令人讨厌的文件夹中发现了这些问号，我如何控制它并且可以特别指出只有这才是我的 git 存储库？或者我如何从 rabbitVCS 中删除对 git 的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:34:58.440

似乎我已经在我的主文件夹中完成了 git init 一次，它在那里使用 git 配置创建了 .git 文件夹，并将每个文件夹视为一个 git 存储库，因此是图标。删除该文件夹解决了这个问题。

# c++ - 服务无法正确识别 Windows 8 映射驱动器路径

> ID：15224320
> 
> 赞同：0
> 
> 时间：2013-03-05T12:53:34.090
> 
> 标签：c++, winapi, windows-8, privileges, elevated-privileges

我在 Windows 8 中面临一个问题，其中模拟登录用户的提升的应用程序/服务无法正确识别映射的驱动器路径。

我有一个 Windows 服务，用于将文件从 / 复制到不同的源路径/目标，包括映射的网络驱动器。路径通过 xml 文件提供给服务。然后服务从 xml 读取源和目标并复制文件。我从来没有遇到过在 Vista 和 7 中映射驱动器的问题，因为该服务总是通过获取资源管理器令牌和所有 my `CreateFile`, `ReadFile`s来模拟登录的用户，并且`WriteFile`运行良好。

这就是我模仿用户的方式

首先，我使用以下代码获取会话令牌

```
DWORD GetActiveSessionId(DWORD& ret)
{
    ret=0;
    DWORD active_session_id = WTSGetActiveConsoleSessionId();
    if (IsSessionActive(active_session_id)) 
    {
        return active_session_id;
    }

    DWORD console_session_ID = active_session_id;
    active_session_id = -2;
    WTS_SESSION_INFO* session_info = NULL;
    DWORD num_sessions = 0;
    if (WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1,
        &session_info, &num_sessions)) 
    {
            // Pick the first active session we can find
            for (DWORD i = 0 ; i < num_sessions; ++i) 
            {
                if (session_info[i].State == WTSActive) 
                {
                    // There is a user logged on to the WinStation associated with the
                    // session.
                    active_session_id = session_info[i].SessionId;
                    break;
                }
            }
            WTSFreeMemory(session_info);
            return active_session_id;
    }

    ret=::GetLastError();
    return -2;
}

BOOL GetSessionUserToken( HANDLE * phUserToken, DWORD& retCode )
{
    if( NULL == phUserToken )
    {
        return FALSE;
    }

    BOOL bRet = FALSE;
    HANDLE hImpersonationToken = NULL;

    BOOL bWin2K = FALSE;
    OSVERSIONINFOEX osv;
    ZeroMemory( & osv, sizeof( OSVERSIONINFOEX ) );
    osv.dwOSVersionInfoSize  = sizeof( OSVERSIONINFOEX );
    if( GetVersionEx( (OSVERSIONINFO*) & osv ) )
    {
        if( 0 == osv.dwMinorVersion && osv.dwMajorVersion == 5)
        {
            return FALSE;
        }
    }

    DWORD dwActiveSession= CGSSystem::GetActiveSessionId(retCode);

    if (dwActiveSession==GSInvalidSessionId)
        return FALSE;

    if( 0 != WTSQueryUserToken( dwActiveSession, & hImpersonationToken ) )
    {
        bRet = TRUE;
    }
    else
    {

    }

    DWORD neededSize = 0;
    HANDLE *realToken = new HANDLE;
    if(GetTokenInformation(hImpersonationToken, (::TOKEN_INFORMATION_CLASS) TokenLinkedToken, realToken, sizeof(HANDLE), &neededSize))
    {
        CloseHandle(hImpersonationToken);
        hImpersonationToken = *realToken;
    }
    DWORD lastError = GetLastError();
    delete realToken;

    if( TRUE == bRet )
    {
        bRet = DuplicateTokenEx( hImpersonationToken,
                                0,
                                NULL,
                                SecurityImpersonation,
                                TokenPrimary,
                                phUserToken );

        CloseHandle( hImpersonationToken );
    }

    return bRet;
} 
```

然后我有我的`CopyFile`函数，它是一个线程。这是一个巨大的功能，所以我只会提到重要的（模拟/安全）部分。

```
BOOL CopyFile(LPCTSTR source, LPCTSTR destination)
{

    //Some variables initializations
    //...

    HRESULT hrInternal = CoInitializeSecurity(
        NULL,                           //  Allow *all* VSS writers to communicate back!
        -1,                             //  Default COM authentication service
        NULL,                           //  Default COM authorization service
        NULL,                           //  reserved parameter
        RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  //  Strongest COM authentication level
        RPC_C_IMP_LEVEL_IDENTIFY,       //  Minimal impersonation abilities
        NULL,                           //  Default COM authentication settings
        EOAC_NONE,                      //  No special options
        NULL                            //  Reserved parameter
        );

    //Initialize security descriptors
    SECURITY_DESCRIPTOR    SD;
    SECURITY_ATTRIBUTES copyMutexAttrib;
    copyMutexAttrib.nLength = sizeof( SECURITY_ATTRIBUTES );
    copyMutexAttrib.lpSecurityDescriptor = & SD;
    copyMutexAttrib.bInheritHandle = TRUE;

    if(!InitializeSecurityDescriptor( & SD, SECURITY_DESCRIPTOR_REVISION ) )
    {
        //Error handling;           
    }

    // add a NULL disc. ACL to the security descriptor.
    //
    if( ! SetSecurityDescriptorDacl( & SD, TRUE, (PACL) NULL, FALSE ) )
    {
        //Error handling;           
    }

    HRESULT hr=S_OK;
    hr=ModifyThreadPrivilege( SE_BACKUP_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }

    hr=S_OK;
    hr=ModifyThreadPrivilege( SE_TCB_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }
    hr=ModifyThreadPrivilege( SE_IMPERSONATE_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }

    hr=ModifyThreadPrivilege( SE_MANAGE_VOLUME_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }

    hr=ModifyThreadPrivilege( SE_SYSTEM_PROFILE_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }

    hr=ModifyThreadPrivilege( SE_DEBUG_NAME, TRUE , m_hUserToken==NULL ? FALSE : TRUE  );
    if (FAILED(hr))
    {
        //Error Handling and logs
    }

    //Other variable initializations
    //...

    //Create the destination file
    SECURITY_ATTRIBUTES sa;
    sa.nLength = sizeof(sa);
    sa.lpSecurityDescriptor = NULL;
    sa.bInheritHandle = TRUE;

    HANDLE hFile = ::CreateFile(destination, GENERIC_WRITE, FILE_SHARE_WRITE | FILE_SHARE_READ, &sa,
                                CREATE_ALWAYS, FILE_FLAG_WRITE_THROUGH|FILE_FLAG_BACKUP_SEMANTICS, NULL);  //---> creates the file in the wrong location

} 
```

这是我的 ModifyThreadPrivilage 代码：

```
HRESULT ModifyThreadPrivilege(IN LPCTSTR szPrivilege,IN BOOL fEnable,IN BOOL OpenAsSelf)
    {
        HRESULT hr = S_OK;
        TOKEN_PRIVILEGES NewState;
        LUID luid;
        HANDLE hToken = NULL;

        // Open the process token for this process.
        if (!OpenThreadToken(GetCurrentThread(),
            TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY,
            OpenAsSelf,
            &hToken ))
        {
            int iLast=::GetLastError();
            if (iLast != ERROR_NO_TOKEN) 
            {
                return ERROR_FUNCTION_FAILED;
            }

            /*
            * No access token for the thread so impersonate the security context
            * of the process.
            */
            if (!ImpersonateSelf(SecurityImpersonation)) 
            {
                return ERROR_FUNCTION_FAILED;
            }

            if (!OpenThreadToken(GetCurrentThread(),
                TOKEN_ADJUST_PRIVILEGES|TOKEN_QUERY,
                FALSE,
                &hToken)) 
            {
                return ERROR_FUNCTION_FAILED;
            }   

        }

        // Get the local unique ID for the privilege.
        if ( !LookupPrivilegeValue( NULL,
            szPrivilege,
            &luid ))
        {
            CloseHandle( hToken );
            printf("Failed LookupPrivilegeValue\n");
            return ERROR_FUNCTION_FAILED;
        }

        // Assign values to the TOKEN_PRIVILEGE structure.
        NewState.PrivilegeCount = 1;
        NewState.Privileges[0].Luid = luid;
        NewState.Privileges[0].Attributes = 
            (fEnable ? SE_PRIVILEGE_ENABLED : 0);

        // Adjust the token privilege.
        if (!AdjustTokenPrivileges(hToken,
            FALSE,
            &NewState,
            0,
            NULL,
            NULL))
        {
            hr = ERROR_FUNCTION_FAILED;
        }

        // Close the handle.
        CloseHandle(hToken);

        return hr;
    } 
```

在 Windows 8 中，当目标是映射驱动器时，`"Z:\MyFile.txt"`它会将文件写入错误的位置，如下所示：

> 我已经映射了`Z:`映射到 `\\nsa\public\myfolder1\subfolder\`函数的网络驱动器将文件写入 `\\nsa\public\`

我在 Windows Vista 或 7 中从未遇到过此类行为，但似乎 MS 引入了一些导致此类行为的新特权或证券。

我注意到很多人抱怨 Windows 8 中的映射驱动器，特别是对于提升的进程，但所有解决方案都建议使用 UNC 路径而不是映射驱动器号。

我还注意到启用/禁用 UAC 对此没有影响。

有人可以解释我如何实现复制文件的目标吗？

# ios - CNCopySupportedInterfaces() 尽管连接了wifi，但没有返回值

> ID：15224324
> 
> 赞同：3
> 
> 时间：2013-03-05T12:53:46.790
> 
> 标签：ios, xcode, reachability, captivenetwork, bssid

我正在使用 CNCopySupportedInterfaces() 来获取 bssid 并且它没有返回任何值。不知道为什么。

我的代码如下所示：

```
 #import <SystemConfiguration/CaptiveNetwork.h>

    CFArrayRef myArray = CNCopySupportedInterfaces();
    CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
    NSLog(@"Connected at:%@",myDict);
    NSDictionary *myDictionary = (__bridge_transfer NSDictionary*)myDict;
    NSString * BSSID = [myDictionary objectForKey:@"BSSID"];
    NSLog(@"bssid is %@",BSSID); 
```

NSLog(@"%@",CNCopySupportedInterfaces());

返回（空）

不知道出了什么问题？需要一些指导

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T06:13:29.120

刚刚发现这段代码在ios6中不起作用..在ios5中工作正常..它在模拟器中不起作用。在设备中尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-08T23:32:58.533

要使用`CNCopySupportedInterfaces`，您必须在项目设置的 Capabilities 窗格中启用**Access WiFi Information功能。**

# windows-8 - 以编程方式获取 Windows 8 系统信息

> ID：15224329
> 
> 赞同：1
> 
> 时间：2013-03-05T12:54:00.807
> 
> 标签：windows-8

如何在 Windows 8 应用程序中使用 C# 以编程方式获取系统模型/系统类型信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:25:16.753

商店应用程序中允许使用[GetNativeSystemInfo](http://msdn.microsoft.com/en-us/library/windows/apps/ms724340.aspx)函数。只需像往常一样使用[PInvoke](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)，您就会在[SYSTEM_INFO](http://msdn.microsoft.com/en-us/library/windows/apps/ms724958.aspx)结构中获得所有信息。

# ajax - 如何将 JCE MediaBox 弹出窗口添加到 Joomla 文章中的 ajax 内容

> ID：15224333
> 
> 赞同：0
> 
> 时间：2013-03-05T12:54:13.667
> 
> 标签：ajax, joomla, joomla-article, joomla-content-editor

我在 ajax 选项卡中显示文章，并尝试将[JCE MediaBox](https://www.joomlacontenteditor.net/products/jce-mediabox)弹出窗口添加到 ajax 请求加载的文章中的内容。

因为 DOM 是由 ajax 更新的，并且 JCE MediaBox 必须添加页面的事件 onload，所以我无法附加 JCE MediaBox 弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:15:57.430

加载 ajax 内容后，使用以下代码行初始化 JCE MediaBox 弹出窗口：

```
window.jcepopup.create(); 
```

# performance - ModPagespeedDisallow - 内部服务器错误（页面速度）

> ID：15224338
> 
> 赞同：0
> 
> 时间：2013-03-05T12:54:17.890
> 
> 标签：performance, pagespeed, mod-pagespeed, google-pagespeed

我不知道为什么……但是当我将“pagespeed”升级到 1.3 版时……某些功能停止了……

```
<IfModule pagespeed_module>  
  ModPagespeed On

  ModPagespeedDomain http://www.domain.com

#  ModPageSpeedDisallow stopped :(
#  ModPageSpeedDisallow */page/*
#  ModPageSpeedDisallow */anotherpage/*

  ModPagespeedEnableFilters rewrite_javascript
  ModPagespeedEnableFilters combine_javascript
  ModPagespeedEnableFilters outline_javascript 

  ModPagespeedEnableFilters recompress_images
  ModPagespeedEnableFilters resize_images
  ModPagespeedEnableFilters recompress_jpeg 
  ModPagespeedEnableFilters recompress_png
  ModPagespeedEnableFilters convert_gif_to_png
  ModPagespeedEnableFilters inline_images

  ModPagespeedEnableFilters collapse_whitespace

  ModPagespeedEnableFilters outline_css

  ModPagespeedEnableFilters move_css_to_head,move_css_above_scripts
</IfModule> 
```

ModPageSpeedDisallow 停止工作。当我启用（删除“#”）..我得到内部服务器错误。

有谁知道为什么？我必须做什么？

**更新**

错误信息：

```
/path/.htaccess: Unknown directive ModPageSpeedDisallow 
```

**更新 - 2013 年 7 月 3 日**

在新版本（1.3 beta）中，“命令”区分大小写。我改为：

```
ModPageSpeedDisallow 
```

到：

```
ModPagespeedDisallow 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:21:26.457

正如邮件列表中所讨论的，该命令区分大小写。你需要

```
ModPagespeedDisallow 
```

过去是否允许其他版本？也许我们应该再次使它不区分大小写。

# php - 如何计算我创建的 mysql 中的行数

> ID：15224340
> 
> 赞同：0
> 
> 时间：2013-03-05T12:54:28.363
> 
> 标签：php, mysql

如何计算我创建的 mysql 中的行数。

这是我的声明

```
(
"SELECT COUNT(ct.title)
FROM exp_channel_titles as ct
LEFT JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
where ct.channel_id=1
and ct.status= 'open'
Group by ct.entry_id
"); 
```

当我 print_r 这个语句时，它给了我这个输出：

```
CI_DB_mysql_result Object ( [conn_id] => Resource id #9 [result_id] => Resource id #173 [result_array] => Array ( ) [result_object] => Array ( ) [current_row] => 0 [num_rows] => 135 [row_data] => ) 
```

但我只想要数字 135

这就是我尝试的方式，但我不工作，我不明白为什么？

```
$result = mysql_query($resultsofRestaurants);
$count = mysql_fetch_array($result);
print_r($count); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:55:27.500

您现在正在做的是您正在计算`ct.entry_id`，这将在每行上为您提供至少 1 个值。

您需要计数`cd.entry_id`而不是`ct.entry_id`.

```
SELECT  COUNT(cd.entry_id)
FROM    exp_channel_titles as ct
        LEFT JOIN exp_channel_data as cd 
           ON ct.entry_id = cd.entry_id
WHERE   ct.channel_id=1 AND
        ct.status= 'open'
GROUP   BY ct.entry_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:56:32.953

你可以试试`mysql_num_rows($result)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:22:14.360

这将 100% 有效

```
$rows= mysql_num_rows(mysql_query("YOUR SQL QUERY")); 
```

# asp.net - 当用户使用 URL Rewrite 2 登录时重定向到 HTTPS

> ID：15224342
> 
> 赞同：1
> 
> 时间：2013-03-05T12:54:33.697
> 
> 标签：asp.net, iis, https, rewrite, forms-authentication

如果用户经过身份验证（通过表单身份验证），有谁知道如何在 IIS 中使用 URL Rewrite 2 重定向到所请求 URL 的 https 版本。

基本上，我只想确保用户通过 https 登录，并且他们的整个会话在登录时保持在 https 中。

我知道我可以为表单身份验证 cookie 设置 requireSSL 属性，所以我也在这样做，但也希望从 http 重定向到 https。

我认为我们可以将代码放在 Global.asax 中来实现我想要的，但是如果我们可以使用 URL Rewrite 2 在 Web.config 中定义它会更整洁（并且可能会更好地提高性能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:01:01.533

如果您使用的是 ASP.NET MVC，那么此操作过滤器会有所帮助，必须归功于原作者。

```
//http://weblogs.asp.net/dwahlin/archive/2009/08/25/requiring-ssl-for-asp-net-mvc-controllers.aspx
public class RequiresSsl : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var req = filterContext.HttpContext.Request;
        var res = filterContext.HttpContext.Response;

        //Check if we're secure or not and if we're on the local box
        if (!req.IsSecureConnection && !req.IsLocal)
        {
            if (req.Url != null)
            {
                var builder = new UriBuilder(req.Url) { Scheme = Uri.UriSchemeHttps, Port = 443, Host = req.Url.Host.StartsWith("www.", StringComparison.OrdinalIgnoreCase) ? req.Url.Host : "www." + req.Url.Host };
                res.Redirect(builder.Uri.ToString());
            }
        }
        base.OnActionExecuting(filterContext);
    }
} 
```

# c++ - exe在同一目录中找不到文本文件

> ID：15224343
> 
> 赞同：0
> 
> 时间：2013-03-05T12:54:34.323
> 
> 标签：c++, text, mfc, release, exe

我正在运行一个从文件中读取文本的 exe，该文件与 exe 保存在同一目录中。我正在使用 _tfopen 函数，它返回 errno 2，这意味着文件丢失。如前所述，文本文件与 exe 位于同一目录中，因此我仅使用文本文件的文件名而不是整个路径（即使我尝试使用绝对文件路径......）。我正在从另一台计算机运行 exe，而不是我正在开发的计算机（发行版）。

另一个使用相同文件的应用程序，也在同一目录中，运行良好。

为什么exe找不到文本文件？

```
FILE* fileData;
if ((fileData = _tfopen(_T("Data.txt"), _T("r"))) == NULL)
    return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:11:34.317

你可能想试试这个：让你的程序调用`GetCurrentDirectory()`并将结果输出到某个地方，你可以确认程序的当前目录确实是你认为的那样。`OutputDebugString()`如果您在调试器下运行，或者`MessageBox()`不是，您可以使用。

当我需要确定我正在打开一个位于同一位置的文件时，我会调用`GetModuleFileName( NULL, szExeFqn, sizeof(szExeFqn))`以获取 EXE 文件的 FQN，去掉 EXE 文件名并添加我需要的文件名。这样，我就不会做出任何可能错误的假设——毕竟，为与包含 EXE 文件的目录不同的程序设置默认目录的快捷方式是微不足道的。

此外，如果您通过输入程序的完整路径从命令行运行程序，那么程序的当前目录就是您运行它时所在的目录，**而不是**找到 EXE 的目录。如果通过搜索环境变量找到您的程序也是如此`PATH`（是的，它仍然存在于 Windows 中。）

这是我十多年来用来做你所描述的事情的一个例子：

```
char szHelpFileName[_MAX_FNAME];
char *cp;

GetModuleFileName( NULL, szHelpFileName, sizeof(szHelpFileName) );
cp = strrchr( szHelpFileName, '\\' );
if( cp )
{
   cp++; // Point to the char just following the final slash.
}
else
{  // No backslash, is there a colon?
   cp = strrchr( szHelpFileName, ':' );
   if( cp )
   {
      cp++; // Point to the char just following the colon.
   }
   else
   {  // I give up.  I'll have no path information.
      cp = szHelpFileName;
   }
}
strcpy( cp, "program.hlp" ); 
```

最终结果是与 EXE 位于同一位置的帮助文件的名称。除非帮助文件丢失（或者它的权限被某种方式剥夺了），否则这总是有效的。我从来没有让它遵循评论说“我放弃”的“偏执狂”路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:12:27.137

通常操作系统会根据当前目录而不是可执行位置打开具有相对地址的文件。

因此，例如，如果您的可执行文件在`/path/to/exec/executable`其中并且您从中调用它`/path/to/invoke`，它将尝试`Data.txt`像原来一样打开`/path/to/invoke/Data.txt`。

您可以查看[这个问题](https://stackoverflow.com/q/2647429/912144)及其答案，了解如何在 Windows 中找到可执行文件的路径。或者[这个答案](https://stackoverflow.com/a/1024937/912144)适用于各种其他操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:25:28.023

即使没有指定完整路径，它也应该可以工作。您是否从 Visual Studio 启动可执行文件？如果是，请确保 Data.txt 文件位于 *.vcxproj 文件或 *.sln 文件所在的项目目录中。

# c# - 使用对象发送者和 EventArgs 调用方法 c#

> ID：15224344
> 
> 赞同：2
> 
> 时间：2013-03-05T12:54:34.767
> 
> 标签：c#, visual-studio, function, methods

如何调用以下方法手册？

```
 private void NetworkResponseReceived(object sender, Network.ResponseReceivedEventArgs e)
  {
         ExecuteTask();
  } 
```

有类似的东西：

```
NetworkResponseReceived(); 
```

括号内需要插入什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T12:55:53.180

显然你可以这样称呼它

```
NetworkResponseReceived(null, new ResponseReceivedEventArgs()); 
```

但这将是谎言。处理程序期望收到响应（来自某个对象），这是不正确的。我认为最好将处理程序的逻辑提取到单独的方法中。并从您的代码和处理程序中调用该方法。像这样：

```
void NetworkResponseReceived(object sender, Network.ResponseReceivedEventArgs e)
{
    // this method can have some arguments, if needed
    DoSomethingBusinessRelated();
} 
```

并简单地从其他地方调用相同的方法：

```
DoSomethingBusinessRelated(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:56:06.540

这应该有效：

```
NetworkResponseReceived(null, new Network.ResponseReceivedEventArgs()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T12:56:40.733

试试这样；

```
NetworkResponseReceived(null, new ResponseReceivedEventArgs()); 
```

# ruby - 如何调用存储在变量中的类方法

> ID：15224349
> 
> 赞同：0
> 
> 时间：2013-03-05T12:54:47.077
> 
> 标签：ruby, class-method

如果我想调用一个类方法（rails 中的邮件方法），在变量中提供它的名称。我怎样才能做到这一点？对于对象，我们可以使用`send`，或者我们可以使用`read_attribute`来读取一些值

```
my_object.send("#{self.action_type(self)}")
my_object.read_attribute("#{self.action_type}_email") 
```

但是对于类名，没有任何东西像`send`对象类中定义的实例方法那样工作。我想要这样的东西，因为`send`不能应用于课堂：

```
Notifier.send("#{self.action_type(self)}").deliver 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:57:52.387

采用`eval`

```
eval("Notifier.#{self.action_type}(self).deliver") 
```

不安全，但应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:04:23.317

你也可以这样做：

```
method = Notifier.method(action_type)
method.call(self).deliver 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T13:14:27.777

类是对象。申请方式没有区别`send`。

```
Notifier.send(action_type, self).deliver 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:08:43.737

你也可以使用

`self.class.send(:your_class_method)`

# java - Java（和Hibernate）中Long数据类型的主键长度？

> ID：15224353
> 
> 赞同：5
> 
> 时间：2013-03-05T12:54:57.183
> 
> 标签：java, oracle, hibernate, hibernate-mapping

```
日志（2 ^ 32）/日志（10）=〜9.63295986126
log(10^0.63295986126) / log(2) =~ 2.10264714​​605 > 2 位

日志（2 ^ 64）/日志（10）=〜19.2659197225
log(10^0.2659197225) / log(2) =~ 0.883366197155 < 2 位

```

如您所见，9 位数字`Integer`不会导致类型为负值`Integer`。

但是 19 位数字`Long`会导致符号溢出...我通常将`NUMBER(18)`其视为 ID 列的类型...

在 Hibernate中映射`NUMBER(19)`到是否有问题？`Long`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:50:34.840

不要使用 Long - 它适用于数字。您永远不会乘、加、减 PK。（您甚至可能从未对它们进行排序）。对于 Oracle 数据类型 NUMBER，使用 oracle.sql.NUMBER 或 java.math.BigDecimal。

# bash - 复合表达式的 bash 优先级

> ID：15224354
> 
> 赞同：2
> 
> 时间：2013-03-05T12:55:01.293
> 
> 标签：bash

我想浏览一个文件列表并检查它们是否存在，如果文件不存在则给出错误并退出。我写了以下代码：

```
FILES=( file1.txt file2.txt file3.txt )

for file in ${FILES[@]}; do
        [ -e "${file}" ] || ( echo "ERROR: ${file} does not exist" >&2 && exit )
done 
```

它运行没有错误，并产生以下内容（如果不存在任何文件）：

```
ERROR: file1.txt does not exist
ERROR: file2.txt does not exist
ERROR: file3.txt does not exist 
```

为什么“退出”从未执行？此外，我想知道做我想做的事情的首选方法（用括号控制分组）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:01:05.447

可能是因为您`( echo "ERROR: ${file} does not exist" >&2 && exit )`作为子进程运行（您的命令在 () 内部）？因此，您正在退出子流程。这是你的 shell 脚本的痕迹（我用 得到它`set -x`）：

```
+ FILES=(file1.txt file2.txt file3.txt)
+ for file in '${FILES[@]}'
+ '[' -e file1.txt ']'
+ echo 'ERROR: file1.txt does not exist'
ERROR: file1.txt does not exist
+ exit
+ for file in '${FILES[@]}'
+ '[' -e file2.txt ']'
+ echo 'ERROR: file2.txt does not exist'
ERROR: file2.txt does not exist
+ exit
+ for file in '${FILES[@]}'
+ '[' -e file3.txt ']'
+ echo 'ERROR: file3.txt does not exist'
ERROR: file3.txt does not exist
+ exit 
```

这有效：

```
set -x
FILES=( file1.txt file2.txt file3.txt )

for file in ${FILES[@]}; do
        [ -e "${file}" ] || echo "ERROR: ${file} does not exist" >&2 && exit
done 
```

放入`set -x`你的文件，看看你自己。

或者像这样

```
set -x
FILES=( file1.txt file2.txt file3.txt )

for file in ${FILES[@]}; do
        [ -e "${file}" ] || (echo "ERROR: ${file} does not exist" >&2) && exit
done 
```

**更新**
我猜你在问[bash - 分组命令](http://www.gnu.org/software/bash/manual/html_node/Command-Grouping.html)

这是在同一进程中分组和执行

```
FILES=( file1.txt file2.txt file3.txt )

for file in ${FILES[@]}; do
        [ -e "${file}" ] || { echo "ERROR: ${file} does not exist" >&2; exit; }
done 
```

这是在子流程中分组和执行

```
FILES=( file1.txt file2.txt file3.txt )

for file in ${FILES[@]}; do
        [ -e "${file}" ] || ( echo "ERROR: ${file} does not exist" >&2; exit )
done 
```

# layout - ZF2 EdpModuleLayouts

> ID：15224356
> 
> 赞同：4
> 
> 时间：2013-03-05T12:55:06.023
> 
> 标签：layout, module, zend-framework2

EdpModuleLayouts 模块有问题。我将 Module.php 放在 module/EdpModuleLayouts/ 目录中，内容如下：

```
<?php
namespace EdpModuleLayouts;

class Module {

public function onBootstrap($e) {
    $e->getApplication()->getEventManager()->getSharedManager()->attach('Zend\Mvc\Controller\AbstractActionController', 'dispatch', function($e) {
                $controller = $e->getTarget();
                $controllerClass = get_class($controller);
                $moduleNamespace = substr($controllerClass, 0, strpos($controllerClass, '\\'));
                $config = $e->getApplication()->getServiceManager()->get('config');
                if (isset($config['module_layouts'][$moduleNamespace])) {
                    $controller->layout($config['module_layouts'][$moduleNamespace]);
                }
            }, 100);
    }
} 
```

我还在 config/application.config.php 中注册了它：

```
return array(
'modules' => array(
    'EdpModuleLayouts',
    'Main',
    'Administrator',
    'Object'
),
'module_layouts' => array(
    'Main' => 'layout/main',
    'Administrator' => 'layout/admin',
),
'module_listener_options' => array(
    'module_paths' => array(
        './module',
    ),
    'config_glob_paths' => array(
        'config/autoload/{,*.}{global,local}.php',
    ),
),
); 
```

“主”模块的配置如下所示：

```
<?php
return array(
'router' => array(
    'routes' => array(
        'Main' => array(
            'type' => 'Literal',
            'options' => array(
                'route' => '/main',
                'defaults' => array(
                    '__NAMESPACE__' => 'Main\Controller',
                    'controller' => 'Index',
                    'action' => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type' => 'Segment',
                    'options' => array(
                        'route' => '[/:controller][/:action][/:id]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'id' => '[0-9]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
),
'service_manager' => array(
    'factories' => array(),
),
'controllers' => array(
    'invokables' => array(
        'Main\Controller\Index' => 'Main\Controller\EmailController',
        'Main\Controller\Error' => 'Main\Controller\ErrorController',
        'Main\Controller\FAQ' => 'Main\Controller\FAQController',
        'Main\Controller\Index' => 'Main\Controller\IndexController',
        'Main\Controller\Pages' => 'Main\Controller\PagesController',
        'Main\Controller\Settings' => 'Main\Controller\SettingsController',
        'Main\Controller\User' => 'Main\Controller\UserController',
    ),
),
'view_manager' => array(
    'template_map' => array(
        'layout/main' => __DIR__ . '/../view/layout/main_layout.phtml',
        'layout/header' => __DIR__ . '/../view/layout/main_header.phtml',
        'layout/footer' => __DIR__ . '/../view/layout/main_footer.phtml',
        'index/index' => __DIR__ . '/../view/index/index.phtml',
        'error/404' => __DIR__ . '/../view/error/404.phtml',
        'error/index' => __DIR__ . '/../view/error/index.phtml',
    ),
    'template_path_stack' => array(
        __DIR__ . '/../view',
    ),
    'display_exceptions' => true,
    'exception_template' => 'error/index',
    'display_not_found_reason' => true,
    'not_found_template' => 'error/404',
),
); 
```

但是当我访问我想要的应用程序中的任何模块时，它会引发异常：

( ! ) 致命错误：未捕获的异常 'Zend\View\Exception\RuntimeException' 带有消息 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "layout/layout"; 解析器无法解析到 D:\WebServer\www\homepage\vendor\library\Zend\View\Renderer\PhpRenderer.php 中第 461 行 (!) Zend\View\Exception\RuntimeException: Zend\View\Renderer 中的文件\PhpRenderer::render: 无法渲染模板“布局/布局”；解析器无法解析到第 461 行 D:\WebServer\www\homepage\vendor\library\Zend\View\Renderer\PhpRenderer.php 中的文件

什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-20T17:25:49.740

作为 ZF2 的新手，我花了一段时间才让 EdpModuleLayouts 模块工作。关键是配置“view_manager”和“template_map”设置。有关配置示例，请访问[http://www.webtrafficexchange.com/zf2-configure-layout-each-module-edpmodulelayouts](http://www.webtrafficexchange.com/zf2-configure-layout-each-module-edpmodulelayouts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T13:28:25.777

所有这一切都是设置适当的布局。

```
controller->layout($config['module_layouts'][$moduleNamespace]); 
```

错误消息告诉您它无法找到它尝试设置的模板。您仍然需要在模板地图中配置布局。这是我的一个项目中的一个例子。

```
'view_manager' => array(
    'template_map' => array(
        'cms-admin/admin/dashboard'  => __DIR__ . '/../view/cms-admin/admin/dashboard.phtml',
        'cms-admin/login/login'      => __DIR__ . '/../view/cms-admin/login/login.phtml',
        'cms-admin/users/index'      => __DIR__ . '/../view/cms-admin/admin/users/index.phtml'
    )
),

'module_layouts' => array(
    'CmsAdmin'   => 'layout/admin-layout',
), 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T14:46:07.020

if (isset($config['module_layouts'][$moduleNamespace])) 的计算结果是否为真？我认为您的选项 module_layouts 应该在 config 目录中：

./config/layouts.config.glob.php：

```
<?php
    return array(
        'module_layouts' => array(
            'Main' => 'layout/main',
            'Administrator' => 'layout/admin',
        ),
    );
?> 
```

你能试试吗？

# python - 使用python在mongodb中作为参数传递时升序和降序不起作用

> ID：15224357
> 
> 赞同：0
> 
> 时间：2013-03-05T12:55:09.427
> 
> 标签：python, mongodb, python-2.7, pymongo

我是 mongodb 的新手。并使用它进行简单的操作。我在数据库中创建了一个名为**users**的集合，它将有 2 个字段作为**fName**和**lname**。现在使用 python (.py 文件) 我正在显示所有记录。代码是-

```
from pymongo import Connection
from pymongo import ASCENDING, DESCENDING
from sys import argv

#making new connection
connection = Connection()

#mydb  is the database name
db = connection.mydb

# usersis the collection name
collection = db.users 
data = collection.find()

if len(argv) > 2:
   script, fieldname, sortOrder = argv
   data = collection.find().sort(fieldname,sortOrder)
#printing data
for each_data in data:
   print 'First Name: %s, Last Name: %s % (each_data['fname'],each_data['lname']) 
```

现在的问题是，如果我通过命令行将**sortOrder**作为参数传递，它不会接受它，结果将以正常方式（没有任何排序）。

那么我们可以将 .sort() 方法的第二个参数作为变量传递，还是必须直接传递**ASCENDING**、**DESCENDING**。

任何人都可以告诉解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:02:55.413

我想 sortOrder 是一个字符串，而 ASCENDING 和 DESCENDING 是从 pymongo 模块导入的常量。您必须先将 sortOrder 参数映射到常量，然后才能将其传递给 sort 方法。您可以使用 sortOrder 的有效值定义字典：

```
validSortOrders = {'ascending': ASCENDING, 'descending': DESCENDING} 
```

在将排序顺序传递给 sort 方法之前，您从字典中获取值：

```
data = collection.find().sort(fieldname, validSortOrders[sortOrder]) 
```

# java - 初始化时的 Swarm 错误

> ID：15224358
> 
> 赞同：0
> 
> 时间：2013-03-05T12:55:10.900
> 
> 标签：java, android, nullpointerexception

我正在尝试将 swarm 排行榜集成到我的游戏中，但我得到了 NullPointerException。在我的主要活动的 onCreate 方法中放置了 init 行：

```
Swarm.init(this, 4583, "e8398d93819da3d6d5f7dxxxxxxxxx"); 
```

我编辑了一点我的代码ID。:)

现在我在我的 logcat 中得到这个错误：

```
 03-05 14:16:02.543: I/Swarm(26723): Swarm Version v1
03-05 14:16:02.633: I/SwarmIOClient(26723): SwarmIO ClientID: f078ccf2-837e-4d6d-b53f-8b2f63a26d84
03-05 14:16:03.653: D/dalvikvm(26723): GC_CONCURRENT freed 262K, 50% free 2852K/5639K, external 0K/0K, paused 11ms+13ms
03-05 14:16:04.273: W/ResourceType(26723): No package identifier when getting value for resource number 0x00000000
03-05 14:16:04.273: D/AndroidRuntime(26723): Shutting down VM
03-05 14:16:04.273: W/dalvikvm(26723): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-05 14:16:04.333: E/AndroidRuntime(26723): FATAL EXCEPTION: main
03-05 14:16:04.333: E/AndroidRuntime(26723): java.lang.RuntimeException: Unable to start activity ComponentInfo{rs.androidaplikacijekvizopstekulture/com.swarmconnect.SwarmMainActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x0
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.os.Looper.loop(Looper.java:130)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at java.lang.reflect.Method.invoke(Method.java:507)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at dalvik.system.NativeStart.main(Native Method)
03-05 14:16:04.333: E/AndroidRuntime(26723): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x0
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.content.res.Resources.getValue(Resources.java:929)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:1955)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.content.res.Resources.getLayout(Resources.java:768)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:213)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.Activity.setContentView(Activity.java:1657)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.swarmconnect.ao.b(Unknown Source)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.swarmconnect.ax.onCreate(Unknown Source)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at com.swarmconnect.SwarmMainActivity.onCreate(Unknown Source)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-05 14:16:04.333: E/AndroidRuntime(26723):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
03-05 14:16:04.333: E/AndroidRuntime(26723):    ... 11 more
03-05 14:16:04.533: D/dalvikvm(26723): GC_CONCURRENT freed 448K, 50% free 2973K/5895K, external 0K/0K, paused 6ms+13ms
03-05 14:16:06.773: D/dalvikvm(26723): GC_CONCURRENT freed 384K, 49% free 3039K/5959K, external 0K/0K, paused 6ms+15ms 
```

我的清单文件：

```
<activity android:name="com.swarmconnect.SwarmMainActivity"
    android:screenOrientation="landscape"
    android:configChanges="orientation|keyboardHidden"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:windowSoftInputMode="stateHidden">
            </activity> 
```

我确实进口了他们说我需要的一切。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:20:36.220

@user2083882

听起来您使用的是旧版本的 Swarm Android SDK。最新版本的[Swarm](http://swarmconnect.com) SDK 是一个库项目，因此不需要将 SDK zip 文件中的文件复制到您的项目中。图书馆项目使您的社交功能（排行榜、成就等）的实现变得更加容易，您将永远不必再次记住此文件复制步骤 :)。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:31:12.670

好的，我找到了问题所在。我需要复制文件夹中的所有布局、资源、可绘制对象和内容。我不知道。他们在教程中没有提到这一点。所以，当我这样做时，游戏开始正常。谢谢你的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:57:43.683

查看您的日志猫：

> 引起：android.content.ActivityNotFoundException：找不到明确的活动类{rs.androidaplikacijekvizopstekulture/com.swarmconnect.SwarmMainActivity}；您是否在 AndroidManifest.xml 中声明了此活动？

# javascript - 是否应该将所有 javascript 都放在 body 事件的 load() 中？

> ID：15224360
> 
> 赞同：-1
> 
> 时间：2013-03-05T12:55:16.790
> 
> 标签：javascript, performance, correctness

我是否应该将所有这些放在 load() 正文事件中，以便在页面呈现并创建 DOM 对象后加载？（我确实发现我必须使用 .innerhtml 而不是 .value 才能工作。）如果是这样，如何...

（*我知道这是垃圾代码，但它比我上次的尝试好，比我的下一次尝试更糟糕。一旦我有时间回到这个问题，我将使用带有内部函数的文字构造函数重新创建它。我不希望在功能上进一步使用这个 Javascript。我拥有的后端 php 将处理安全和检查）

```
<script type="text/javascript">

//To get the price of a product applying discount
function getPrice(location,quantity)
{
    //Get the product choice
    var e = document.getElementById("productList["+location+"]");
    var productSelected = e.options[e.selectedIndex].value;

    //TODO: Determine discounts based on product choice
    switch(productSelected)
    {
        case '0':
            return 0;
        case '1':
            return 10;
        case '2':
            return 15;
    }
    return null;
}

//To update product only
function updateProduct(location)
{
    updateRow(location,document.getElementById("quantity["+location+"]").value);
}

//To update only that row
function updateRow(location,quantity)
{
    //Check Quantity is a valid Number and also not a float or negative
    if (!isNaN(quantity) && parseFloat(quantity) && isFinite(quantity) && (quantity >= 0)) {
        quantity = Math.floor(quantity);
    } else {
        quantity = 0;
    };

    //Update the quantity input field to whatever quantity is - Investigate later!
    document.getElementById("quantity["+location+"]").value = quantity;

    //Store old Price for changing total
    var oldTotal = document.getElementById("totalPrice").innerHTML;
    var oldLinePrice = document.getElementById("linePrice["+location+"]").innerHTML;

    //Calculate and Store Prices to adjust the total
    var productPrice = getPrice(location,quantity).toFixed(2);
    var newLinePrice = (quantity*productPrice).toFixed(2);

    //Apply  Updates
    document.getElementById("unitPrice["+location+"]").innerHTML = productPrice;
    document.getElementById("linePrice["+location+"]").innerHTML = newLinePrice;
    document.getElementById("totalPrice").innerHTML = (oldTotal-oldLinePrice+parseFloat(newLinePrice)).toFixed(2);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:58:03.583

您只需要将任何`getElement`调用或对获取元素的函数的调用放在加载函数中。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-05T13:13:00.160

好吧，你可以，但这可能会延迟一些 js 代码开始处理首先加载的 .html 编码部分。它还会使代码缩进超出需要的程度，从而导致可读性问题。

# c++ - '(1.0e + 0 - ((double)u)) * bezPoints[i][(j + 1)]' 中的 'operator*' 不匹配

> ID：15224374
> 
> 赞同：0
> 
> 时间：2013-03-05T12:55:45.780
> 
> 标签：c++, qt, bezier

我在尝试在 Qt 中用 C++ 实现 Bezier 曲线伪代码时遇到此错误，请使用以下方法实现。

```
 void GLWidget::drawBezierCurve() {
            int N_PTS = vertices.size();
            Point bezPoints[N_PTS][N_PTS];

            for (float u = 0.0; u <= 1.0; u += 0.01){
                for(int diag = N_PTS/2; diag >= 0;diag--){
                    for(int i = 0; i <= diag; i++){
                        int j = diag - i;
                        bezPoints[i][j] = (1.0 - u) * bezPoints[i][j+1] + u * bezPoints[i+1][j];
                    }
                }
                theImage.setPixel(bezPoints[0][0], bezPoints[0][0], RGBValue(100,12,140), 255);
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:07:37.663

这看起来是因为您将浮点数乘以 Point 对象。您很可能需要为此操作定义自己的乘法方法，或者重载 * 运算符来执行此操作，具体取决于您打算将浮点数乘以的 Point 对象中的哪些字段。

就像是：

```
float operator* (const float num, const Point& point) {
    return num * point.floating_point_field;
} 
```

其中 floating_point_field 是您要相乘的类的成员，它也应该与 float 具有相同的类型，否则您将不得不开始做一些更复杂的事情来定义乘法。

或者，如果乘法与上面的示例一样简单，您可以在代码中使用 getter，例如：

```
u * bezPoints[i][j+1].get_floating_point_value() 
```

希望有帮助，

马特

# sql - 查找重复的电子邮件地址

> ID：15224378
> 
> 赞同：6
> 
> 时间：2013-03-05T12:55:59.617
> 
> 标签：sql

我需要在我们的数据库中找到重复的电子邮件。我正在一张桌子上寻找这些信息。到目前为止我所拥有的

```
 SELECT name.email, name.ID

 From Name
 Group BY Name.ID, Name.EMAIL
 Having Count(*) > 1 
```

我知道这是错误的，但不确定如何正确编写。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T12:56:51.460

去除`ID`

```
 SELECT name.email
 From   Name
 Group  BY Name.EMAIL
 Having Count(*) > 1 
```

如果您想获取电子邮件的数量，

```
 SELECT name.email, COUNT(*) totalEmailCount
 From   Name
 Group  BY Name.EMAIL
 Having Count(*) > 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:10:11.603

查询将是

```
SELECT name.email, COUNT(*) FROM Name 
GROUP BY Name.email HAVING COUNT(*) > 1 
```

您需要知道的是，如果您还按 ID 分组，计数将为 1，这就是您的查询不起作用的原因。

如果您需要知道重复电子邮件的用户的 ID，您可以这样做：

```
select Name.ID, Name.Email from Name where Name.Email in (

SELECT name.email FROM Name 
    GROUP BY Name.email HAVING COUNT(*) > 1
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-20T20:21:56.373

**下面的 SQL 查询将返回包含相同（重复）EMAIL 的第一个匹配行的 ID 和 EMAIL**

`select ID, EMAIL from Name group by EMAIL having count(EMAIL) > 1`

**如果有人想要 Name 表中所有重复的 EMAIL，那么他/她可以执行以下 SQL 查询**

`select EMAIL from Name group by EMAIL having count(EMAIL) > 1`

*请注意： SQL 是一种完全不区分大小写的语言。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T13:02:25.943

干得好：

```
SELECT name.email, COUNT(*)
FROM
    Name
GROUP BY
    Name.email
HAVING 
    COUNT(*) > 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:32:01.340

```
 select id,email from 
 (select id,email,count(email) over (partion by email order by id) cnt from name) where cnt>1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-09T09:26:36.080

About all posted answers here, using Group by methods. This query can also be written with self join method.

```
select distinct f.email
from Name f
join Name s
where f.id <> s.id and f.email = s.email 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-08T05:32:29.323

无需将 tableName 放在选择列中

```
SELECT email
From Name
Group BY EMAIL
Having Count(*) > 1 
```

# android - 将图像保存在从 Web 服务获取的 SQLite 数据库中

> ID：15224397
> 
> 赞同：2
> 
> 时间：2013-03-05T12:56:49.163
> 
> 标签：android, parsing, android-sqlite

我正在开发 android 应用程序，我在其中解析来自 web 服务的数据，然后将其存储在数据库中。在这里，我还想将图像存储在数据库中并在下一个活动中检索。

我正在使用此代码将图像插入数据库。

```
Bitmap yourSelectedImage;
ByteArrayOutputStream stream;
byte[] byteArray; 
```

这是在 for 循环中

```
{ 
yourSelectedImage = BitmapFactory.decodeFile(SingleImageURL[i]);
stream = new ByteArrayOutputStream();
yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 100,
                    stream);
byteArray = stream.toByteArray();

database.insertDetail(ID[i],byteArray[i]); 

} 
```

这里 SingleImageURL 有来自网络服务的图像 url。

当我运行代码时，它会在这一行给出错误 nullPointerException

```
 yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 100,
                    stream); 
```

请告诉我哪里出错了。以及如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:04:38.633

`yourSelectedImage`使用[此链接](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)加载您的位图。然后通过将其转换为`byte[]`

您正在解码一个文件，它实际上是一个 URL。所以你`yourSelectedImage`是`null`。当您尝试使用压缩它时

```
yourSelectedImage.compress(Bitmap.CompressFormat.PNG, 100, stream); 
```

你得到`NullPointerException`

# windows - Windows 上的 Perl：编码问题

> ID：15224400
> 
> 赞同：4
> 
> 时间：2013-03-05T12:56:52.670
> 
> 标签：windows, perl, encoding, activeperl

我的 Perl 脚本有问题。在类 UNIX 系统中，它将所有 Unicode 字符`ä`正确地打印到控制台。在 Windows 命令行中，字符被分解为无意义的字形。有没有一种简单的方法可以避免这种情况？我正在使用`use utf8;`.

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T13:16:00.303

`use utf8;`只是告诉 Perl 你的源代码是使用 UTF-8 编码的。

它也不适用于unix。有一些字符串不能正确打印（`print chr(0xE9);`），大多数会打印“宽字符”警告（`print chr(0x2660);`）。您需要解码输入并编码输出。

在 unix 系统中，这通常是

```
use open ':std', ':encoding(UTF-8)'; 
```

在 Windows 系统中，您需要使用`chcp`找到控制台的字符页面。（对我来说是 437。）

```
use open ':std', ':encoding(cp437)';  # Encoding used by console
use open IO => ':encoding(cp1252)';   # Encoding used by files 
```

# c++ - shell 将伪代码排序为 C++ 代码

> ID：15224412
> 
> 赞同：0
> 
> 时间：2013-03-05T12:57:33.993
> 
> 标签：c++, sorting, pseudocode, shellsort

```
# Sort an array a[0...n-1].
gaps = [701, 301, 132, 57, 23, 10, 4, 1]

foreach (gap in gaps)
    # Do an insertion sort for each gap size.
    for (i = gap; i < n; i += 1)
        temp = a[i]
        for (j = i; j >= gap and a[j - gap] > temp; j -= gap)
            a[j] = a[j - gap]
        a[j] = temp 
```

[这是维基百科](http://en.wikipedia.org/wiki/Shellsort#Pseudocode)页面中的伪代码。我不确定我的 c++ 代码是否正确。这是我的代码：

```
void shellSort(int *array, int array_size)
{
  int e, i, j, temp;
  for(e = 0; e < array_size; e++)
  {
      for( i = e; i < array_size; i++)
      {
          temp = array[i];
          for( j = i; j >= e && array[j - e] > temp; j -= e)
          {
             array[j] = array[j-e];
          }
          array[j] = array[temp];
      }

  }
} 
```

这是我的测试代码：

```
int main()
{
    int sizes[9] = {9,3,5,7,1,0,6,2,4};
    int size = 0;
    shellSort(sizes,size);

    for(int i=0;i<size;i++)
    {
        cout << sizes[i] << endl;
    }

return 0;

} 
```

但它在屏幕上什么也没显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:30:09.047

好的，让我们从顶部开始

```
void shellSort(int *array, int array_size)
{ 
```

您的代码完全省略了所需的 gaps 数组

```
 const int gaps[] = {701, 301, 132, 57, 23, 10, 4, 1};
  int e, i, j, temp; 
```

外循环需要跨越间隙而不是 0 到 array_size

```
 for(e = 0; e < sizeof(gaps)/sizeof(int); ++e)
  {
      int gap = gaps[e]; 
```

您需要使用内部循环中的间隙数组中的间隙

```
 for( i = gap; i < array_size; ++i)
      {
          temp = array[i];
          for( j = i; j >= gap && array[j - gap] > temp; j -= gap)
          {
             array[j] = array[j-gap];
          } 
```

您需要将 temp 存储回数组中

```
 array[j] = temp;
      }

  }
} 
```

注意：我现在手头没有编译器，所以我没有检查过，但我认为它是正确的。

此外，还有一些小问题，这个：

```
 int e, i, j, temp; 
```

是不好的做法，而是在使用时声明每个变量，即改为：

```
 for( int i = gap; i < array_size; ++i)
      {
          int temp = array[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:05:39.933

出于某种原因（没有给出评论），我的第一个答案被删除了（错别字 - 您将大小设置为 0，而不是 9）。这个问题想知道为什么“它在屏幕上什么也没有显示”。如果将 size 设置为 0，当 for 循环从 0 迭代到 < size 时，你期望它做什么？？？

在查看算法之前，您的参数必须正确。从那里开始。如果现在有些东西被转储到屏幕上，现在您可以开始调试算法（如果输出错误）。如果输出正确，那么您的算法可能没问题。

如果我对此有误，请在我的答案中发表评论。不要只是“删除”它！？！

# ubuntu - 厨师中缺少节点的 FQDN

> ID：15224413
> 
> 赞同：1
> 
> 时间：2013-03-05T12:57:34.270
> 
> 标签：ubuntu, amazon-web-services, chef-infra

我是厨师和刀的新手，我正在运行几个 ec2 实例并安装了 chef-client，我可以在厨师的节点列表中看到所有实例，但是其中有几个缺少 FQDN，这导致了很多问题，这是我运行knife node show node_name时的输出

```
Environment: _default
FQDN:        
IP:          
Run List:    
Roles:       
Recipes:     
Platform:     
Tags: 
```

您可以看到期望 Env 其余的所有其他内容都是空白的。我该如何解决这个问题。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T19:17:40.513

直到第一次成功运行 Chef Client 后才会设置这些属性。如果 Chef 客户端运行未成功完成，则此信息不会存储在服务器上。

# jquery - Jquery load() 失败

> ID：15224415
> 
> 赞同：0
> 
> 时间：2013-03-05T12:57:44.790
> 
> 标签：jquery

我正在尝试获取图像的尺寸，但得到例如

```
Error: Syntax error, unrecognized expression: http://ecx.images-amazon.com/images/I/31Xu1OBZxvL._SL500_AA300_.jpg 
```

我使用的代码首先检查`image.display_height`变量是否为空或为空，如果是，则加载图像并获取尺寸。如果失败隐藏父母。

这是我正在尝试的：

```
if(!!image.display_height) {

    $(image.preview2).load(function(){
        var width =    $(this).width();
        var height =    $(this).height();
    }).error(function (){
        $(this).parent().hide();
    })

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:04:21.517

我猜正确的代码应该是这样的

image.preview2 应该在引用中

```
 $("image.preview2").load(function(){
        var width =    $(this).width();
        var height =    $(this).height();
    }).error(function (){
        $(this).parent().hide();
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:01:16.370

换！！单身！

像这样：- if(!image.display_height)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:05:55.013

应该有一种方法可以检查事件对象并确保您加载了您认为正确的图像

`.load( handler(eventObject) )`

而且我相信你的选择器应该用引号引起来。

```
 $("image.preview2").load(function(){ 
```

# scala - emacs scala模式，无法使其自动激活

> ID：15224433
> 
> 赞同：3
> 
> 时间：2013-03-05T12:58:44.387
> 
> 标签：scala, emacs

我将以下内容添加到我的 ~/emacs 文件中

```
(setq package-archives '(("gnu" . "http://elpa.gnu.org/packages/")
                         ("marmalade" . "http://marmalade-repo.org/packages/")
                         ("melpa" . "http://melpa.milkbox.net/packages/"))) 
```

通过 emacs 包管理器安装 scala-mode2

将以下内容添加到我的 ~/.emacs 文件中

```
(add-to-list 'auto-mode-alist
     '("\\.scala" . scala-mode2)
     '("\\.sbt\\'" . scala-mode2)
     ) 
```

然后我加载任何 scala 文件。scala-mode 没有被激活，没有高亮显示。

我在“消息”缓冲区中看到以下内容：

*文件模式规范错误：（void-function scala-mode2）*

但是，如果我输入`m-x scala-mode`，scala 模式将被激活并且工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:02:06.330

github上的坏文档应该是：

将以下内容添加到我的 ~/.emacs 文件中

```
(add-to-list 'auto-mode-alist '("\.scala" . scala-mode) '("\.sbt\'" . scala-mode) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-12T16:50:05.913

文档不是很好。

我通过将原始 el 文件下载到 .emacs.d/lisp/ 来使其工作，如下所示：

```
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-fontlock.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-imenu.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-indent.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-lib.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-map.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-paragraph.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-prettify-symbols.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-prettify-syntax.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode-syntax.el
wget https://raw.githubusercontent.com/ensime/emacs-scala-mode/master/scala-mode.el 
```

然后只需在 .emacs 中添加以下内容即可启用该模式：

```
(require 'scala-mode)
(add-to-list 'auto-mode-alist '("\\.scala$" . scala-mode)) 
```

# c# - 使用 c# 将大量或行写入 mssql 数据库

> ID：15224434
> 
> 赞同：1
> 
> 时间：2013-03-05T12:58:45.133
> 
> 标签：c#, .net, tsql, stored-procedures

我在使用 ac# 应用程序将大量数据行提交到数据库（sql 2008 R2）的代码时遇到问题。

我现在正在做的是创建一个相当大的 XML 文件（大约 30Mb），其中包含大约 40.000 行应该插入到数据库中。

从我作为变量传递给数据库的这个 xml 文档中，我有一个存储过程，它将从中读取数据并进行适当的插入或更新。

**伪c#代码：**

```
String xml = xmlWriter.ToString();
SqlCommand cmd = new SqlCommand("sp_CommitData", connection)
cmd.Variables.AddWithValue("@xml", xml);
SqlDataReader reader = cmd.ExecuteReader();
while(reader.Read())
{ 
 /* Read return data */
} 
```

**伪tsql代码：**

```
INSERT INTO DataTable
xmldata.value('@uID','[uniqueidentifier]') AS [uID]
FROM<
@xml.nodes('/data/m/r') [xmldata](xmldata) 
```

这种方法在过去对我来说效果很好，但现在数据似乎对于这种工作方法来说非常庞大......提交数据需要超过 3 分钟，而这只是很长的时间。:(

这一定是一个很常见的问题，你们在类似的情况下是怎么做的？您对如何使用 c# 提交大量数据有什么好的建议吗？该解决方案必须是线程安全的，所以我不太喜欢 bcp 或类似方法。

亲切的问候德鲁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:05:09.283

最快的方法是使用[SqlBulkCopy](http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server)，它将使用 SQL 的批量加载功能。

XML 方法的问题在于，您首先必须从行集/IEnumerable（您必须从什么开始？）转换为 XML，然后将其推送到网络上。XML 是一种非常臃肿的格式，当您提到有很多行时，这很重要。

批量复制方法将让您逐行流式传输它，而不必将整个事物具体化（进入内存或磁盘），从而减少内存占用。

如果数据量很大，您可能希望先将其加载到临时表中（因此没有真实表的事务），然后将其插入（或[合并](http://www.mssqltips.com/sqlservertip/1704/using-merge-in-sql-server-to-insert-update-and-delete-at-the-same-time/)）到真实表中。

线程安全是什么意思？如果您希望此操作不阻塞客户端，您可以轻松地在后台线程上启动它。没有外部进程或任何您需要开始执行此操作的东西，它在进程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:01:33.340

感谢您对此问题的意见。我已经开始查看 SqlBulkCopy 但过了一会儿就停止了，因为我需要一个存储过程来处理逻辑附近的数据。
鉴于我可能有许多并发线程到保存数据的服务，我无法用数据填充临时表，然后再从中读取内容。

然后我将注意力转向表值参数并在那里找到了我的答案。我有点惊讶我之前没有尝试过这个，因为它效果很好。在性能数据中，保存时间从大约 45 秒缩短到不到 5 秒！

感谢您为我指明了这个方向。

# database - 表单输入未通过

> ID：15224439
> 
> 赞同：0
> 
> 时间：2013-03-05T12:58:58.573
> 
> 标签：database, forms, input, integer

我是 php 新手（60 岁时我正在从多年的 VBScript 和 ASP 转换）并且在处理表单时遇到了困难。我已经在这个论坛和许多其他论坛中搜索了解决方案，但找不到。我正在尝试使用表单中的输入删除记录；

我的表单代码（$row[0] 是字段 ID，它会自动递增，在本例中值为 3）：-

```
 <form action="<?=$_SERVER[ 'PHP_SELF' ] ?>" method="post">
 <input type="hidden" name="id" value="<?php echo $row[0]?>">
 <input type="submit" value="Delete"></form> 
```

然后处理页面运行没有产生任何错误，但记录没有被删除，所以我在处理页面上测试了输入值，原因似乎是因为变量“id”的值没有通过。

我测试了表单页面上的输入值：

```
echo $row[0] 
```

它肯定会输出整数 3。

问题出现在处理页面上，我检查是否收到表单输入的代码是：

```
$id = (INT)$_post['id'];
echo 'Form input= ', $_post['id'], '<br>';
echo '$id= ', $id, '<br>'; 
```

它将为表单输入行显示一个空格，并将 0 作为 $id 的值，此时两者都应显示数字 3

谁能告诉我为什么“id”的值没有被发送到处理页面？

我希望答案很简单，但我无法理解。

我希望我已经令人满意地解释了这个问题，但如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:05:43.390

尝试这个：

```
$id = (int) $_POST['id'];
echo 'Form input= ' . $_POST['id'] . '<br>';
echo 'id= ' . $id . '<br>'; 
```

$_POST 在 PHP 中区分大小写。[http://www.php.net/manual/en/reserved.variables.post.php](http://www.php.net/manual/en/reserved.variables.post.php)

字符串与`.`not连接`,`

也会`'$id= '`呈现`$id`not $id的值

# ruby-on-rails - 使用 i18n 导出为 CSV

> ID：15224441
> 
> 赞同：0
> 
> 时间：2013-03-05T12:59:00.867
> 
> 标签：ruby-on-rails, ruby, mongodb, csv, mongoid

从 MongoDB 导出到 csv 时，我得到了当前的 i18n 语言环境，是否可以将其过滤掉？

`{"sv"=>"hejsan"}`

我希望这是唯一`hejsan`的。

参与者.rb（模型）

```
class Participant < Model
   ...
    def self.to_csv(options = {})
      CSV.generate(options) do |csv|
        csv << Participant.fields.keys
        all.each do |participant|
          csv << participant.attributes.values_at(*column_names)
        end
      end
   end
end 
```

模型.rb（模型）

```
class Model
    include Mongoid::Document
    def self.column_names
    self.fields.collect { |field| field[0] }
    end
end 
```

控制器

```
def index
    @participants = Participant.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @participants }
      format.csv { send_data @participants.to_csv }
      format.xls
    end
  end 
```

# events - 不能调用“on”来绑定方法

> ID：15224443
> 
> 赞同：2
> 
> 时间：2013-03-05T12:59:05.850
> 
> 标签：events, extjs, sencha-touch-2

我无法使用“on” Mehotd 注册任何事件。

未捕获的类型错误：无法调用未定义的“on”方法

`Ext.define('faragoo.view.Main', {`

 ````
extend: 'Ext.Container',
alias: 'widget.stream',
xtype: 'stream',
id : 'stream',   
requires: [
    'Ext.TitleBar',
    'Ext.form.Panel'
],

initialize: function () {

   this.on('afterrender', function() { alert('rendered'); } );

} 
```` 

`}`

这个简单的例子也不起作用：

`Ext.Viewport.on('orientationchange', function() { console.log("orientationchange"); }, this, {buffer: 50 });`

同样的错误:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:11:13.783

[本指南](http://docs.sencha.com/touch/2-1/#!/guide/events)解释了如何正确地将事件添加到组件。

创建组件后绑定事件：

```
var myButton = Ext.Viewport.add({
    xtype: 'button',
    text: 'Click me'
});

myButton.on('tap', function() {
    alert("Event listener attached by .on");
}); 
```

或使用侦听器配置绑定事件：

```
Ext.Viewport.add({
    xtype: 'button',
    text: 'My Button',
    listeners: {
        tap: function() {
            alert("You tapped me");
        }
    }
}); 
```

# c# - Win32_Account 类的奇怪行为

> ID：15224446
> 
> 赞同：0
> 
> 时间：2013-03-05T12:59:15.147
> 
> 标签：c#, winforms, wmi, user-accounts

我正在做一个小的计算机信息工具。现在我正在做用户帐户。我用可用的用户填充了一个组合框。

```
ManagementObjectSearcher mosAccounts = new ManagementObjectSearcher("SELECT * FROM Win32_Account");

        foreach (ManagementObject moUA in mosAccounts.Get())
        {
            comboBox4.Items.Add(moUA["Name"].ToString());
        } 
```

然后我显示它们：

```
private void comboBox4_SelectedIndexChanged(object sender, EventArgs e)
    {
        ManagementObjectSearcher mosAccounts = new ManagementObjectSearcher("SELECT * FROM Win32_Account");

        foreach (ManagementObject moUA in mosAccounts.Get())
        {
            lblDescriptionUA.Text = "Description: " + moUA["Description"].ToString();

            if (moUA["Domain"] != null)
            {
                lblDomain.Text = "Domain: " + moUA["Domain"].ToString();
            }

            else
                lblDomain.Text = "Domain: Not Available";

            if (moUA["InstallDate"] != null)
            {
                lblInstallDateUA.Text = "Install Date: " + moUA["InstallDate"].ToString();
            }

            else
                lblInstallDateUA.Text = "Install Date: Not Available";

            lblLocalAccount.Text = "Local Account: " + moUA["LocalAccount"].ToString();

            if (moUA["SID"] != null)
            {
                lblSID.Text = "SID: " + moUA["SID"].ToString();
            }

            else
                lblSID.Text = "SID: Not Available";

            if (moUA["SIDType"] != null)
            {
                lblSIDType.Text = "SID Type: " + moUA["SIDType"];
            }

            else
                lblSIDType.Text = "SID Type: Not Available";

            if (moUA["Status"] != null)
            {
                lblStatusUA.Text = "Status: " + moUA["Status"].ToString();
            }

            else
                lblStatusUA.Text = "Status: Not Available";
        }
    } 
```

但是每次我从组合框中选择一个用户时，标签都会变得疯狂，显示这么多信息，切换它。就像他们连续显示所有用户的信息一样。有什么我想念的吗？

附加信息：我在工作。有很多域用户。组合框将它们全部显示出来。Mybe 是因为所有的域用户。我选择了只显示本地用户，但同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:05:33.453

> 但是每次我从组合框中选择一个用户时，标签都会变得疯狂，显示这么多信息，切换它。就像他们连续显示所有用户的信息一样。

是的 - 因为这*正是*您的代码所说的：

```
// Every time you select a user...
private void comboBox4_SelectedIndexChanged(object sender, EventArgs e)
{
    // Find all the information about all users...
    ManagementObjectSearcher mosAccounts =
        new ManagementObjectSearcher("SELECT * FROM Win32_Account");

    // Iterate over all those users and display it
    foreach (ManagementObject moUA in mosAccounts.Get())
    {
        ...
    }
} 
```

代码完全按照您的要求执行。现在，你*为什么*要连接这样的事件处理程序？想想当所选索引发生变化时您*真正*想要实现的目标。您是否真的只想找到*单个*选定的用户？如果是这样，大概您只需要更改您在 in 中使用的查询`ManagementObjectSearcher`，然后找到单个结果而不是遍历所有结果。

# json - 如何使用 Gson 中的地图将 JSON 解析为列表？

> ID：15224454
> 
> 赞同：0
> 
> 时间：2013-03-05T12:59:45.337
> 
> 标签：json, map, gson

我有以下 Java 类：

```
public class ModuleParsed {

  String id_component;
  String id_instance;
  Map<ModuleParam, ModuleParam> input;
  Map<ModuleParam, List<ModuleParam>> output;
  int id_paas;
} 
```

和

```
public class ModuleParam {

  String name;
  Object type;
} 
```

JSON 应该将其解析`List<ModuleParsed>`为什么？

```
listModules = gson.fromJson(br, new TypeToken<List<ModuleParsed>>() {}.getType()); 
```

一切都很好，直到我介绍了输入和输出参数。

**编辑**

通过做相反的过程，我发现 JSON 应该是这样的

```
[
    {
        "id_component": "mod1",
        "id_instance": "mod1_inst1",
        "input": {  
            "moduleParam": {
                "name": "param3",
                "type": "obj3"
            },
            "moduleParam": {
                "name": "param2",
                "type": "obj2"
            }
        },
        "id_paas": 1
    },
    {
        "id_component": "mod2",
        "id_instance": "mod2_inst1",
        "input": {
            "moduleParam": {
                "name": "param3",
                "type": "obj3"
            },
            "moduleParam": {
                "name": "param2",
                "type": "obj2"
            }
        },
        "id_paas": 1
    }
] 
```

其中 moduleParam 元素类似于：`parser.ModuleParam@36c51089`

无论我如何命名这些元素，我都会收到以下错误：

```
Exception in thread "main" com.google.gson.JsonParseException: Expecting object found: "moduleParam" 
```

我怎样才能获得`ModuleParsed`Gson 的课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:49:30.330

在@Brian 的评论之后，我意识到我不需要使用复杂的对象作为键，所以这是我的解决方案。

```
public class ModuleParsed {

    String id_component;
    String id_instance;
    Map<String, ModuleParam> input;
    Map<String, List<ModuleParam>> output;
    int id_paas;
}

public class ModuleParam {

    String name;
    String id_module;
    String id_instance;
} 
```

我为此构建了以下 JSON

```
[
    {
        "id_component": "mod1",
        "id_instance": "mod1_inst1",
        "input": {
            "input1": {}
        },
        "output": {
            "output1": [
                {
                    "name": "input1",
                    "id_module": "mod2",
                    "id_instance": "mod2_inst1",
                    "type": "paramType"
                },
                {
                    "name": "input2",
                    "id_module": "mod2",
                    "id_instance": "mod2_inst1",
                    "type": "paramType"
                }
            ],
            "output2": []
        },
        "id_paas": 1
    },
    {
        "id_component": "mod2",
        "id_instance": "mod2_inst1",
        "input": {
            "input1": {
                "name": "output1",
                "id_module": "mod1",
                "id_instance": "mod1_inst1",
                "type": "paramType"
            },
            "input2": {
                "name": "output1",
                "id_module": "mod1",
                "id_instance": "mod1_inst1",
                "type": "paramType"
            }
        },
        "output": {},
        "id_paas": 1
    }
] 
```

这次 JSON 被正确解析了。

# biztalk - 映射器：如果/否则

> ID：15224459
> 
> 赞同：0
> 
> 时间：2013-03-05T13:00:01.163
> 
> 标签：biztalk

为什么映射器不想在 xslt-Dokument 中进行其他查询？

应该是：如果 script-functoid 返回“true”-> 它应该从“MRG_5”-Segment 中的“PV1_19”-Segment 复制值。否则它应该将 MRG1-Segment 从左侧复制到右侧 --> 即如果左侧的 MRG_1-Segment 存在，则复制它；如果没有，则消息中不应存在 MRG-Segment。

这张图片显示了我是如何做到的：

![在此处输入图像描述](../Images/ae9cfe5f2fef1f106bf351c9d8146d63.png)

这是来自映射器的 xslt-Code：

```
- <xsl:for-each select="ZBE_BewegungsdatenSegment">
  <xsl:variable name="var:v6" select="userCSharp:ChangeEventToA42(string(ZBE_5_SAPEVENT/text()) , string(ZBE_6_FAL_CASEPATNO/text()) , string(../MSH_MessageHeaderSegment/MSH.9_MessageType/CM_MSG.1_TriggerEvent/text()))" /> 
  <xsl:variable name="var:v7" select="userCSharp:StringConcat("A42")" /> 
  <xsl:variable name="var:v8" select="userCSharp:LogicalEq(string($var:v6) , string($var:v7))" /> 
- <xsl:if test="$var:v8">
      <xsl:variable name="var:v9" select="string(ZBE_5_SAPEVENT/text())" /> 
      <xsl:variable name="var:v10" select="string(ZBE_6_FAL_CASEPATNO/text())" /> 
      <xsl:variable name="var:v11" select="string(../MSH_MessageHeaderSegment/MSH.9_MessageType/CM_MSG.1_TriggerEvent/text())" /> 
    - <MRG_MergePatientInformation>
        - <MRG_1_PriorPatientIdentifierList>
              <xsl:variable name="var:v12" select="userCSharp:ChangeEventToA42($var:v9 , $var:v10 , $var:v11)" /> 
              <xsl:variable name="var:v13" select="userCSharp:LogicalNe(string($var:v7) , string($var:v12))" /> 
            - <xsl:if test="string($var:v13)='true'">
                  <xsl:variable name="var:v14" select="../MRG_MergePatientInformation/MRG_1_PriorPatientIdentifierList/CX_0_Id/text()" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v14" /> 
                  </CX_0_Id>
              </xsl:if>
              <xsl:variable name="var:v15" select="userCSharp:LogicalEq(string($var:v12) , string($var:v7))" /> 
            - <xsl:if test="string($var:v15)='true'">
                  <xsl:variable name="var:v16" select="""" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v16" /> 
                  </CX_0_Id>
              </xsl:if>
          </MRG_1_PriorPatientIdentifierList>
        - <MRG_2_PriorAlternatePatientId>
              <xsl:variable name="var:v17" select="userCSharp:ChangeEventToA42($var:v9 , $var:v10 , $var:v11)" /> 
              <xsl:variable name="var:v18" select="userCSharp:LogicalEq(string($var:v17) , string($var:v7))" /> 
            - <xsl:if test="string($var:v18)='true'">
                  <xsl:variable name="var:v19" select="""" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v19" /> 
                  </CX_0_Id>
              </xsl:if>
          </MRG_2_PriorAlternatePatientId>
        - <MRG_3_PriorPatientAccountNumber>
              <xsl:variable name="var:v20" select="userCSharp:ChangeEventToA42($var:v9 , $var:v10 , $var:v11)" /> 
              <xsl:variable name="var:v21" select="userCSharp:LogicalEq(string($var:v20) , string($var:v7))" /> 
            - <xsl:if test="string($var:v21)='true'">
                  <xsl:variable name="var:v22" select="""" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v22" /> 
                  </CX_0_Id>
              </xsl:if>
          </MRG_3_PriorPatientAccountNumber>
        - <MRG_4_PriorPatientId>
              <xsl:variable name="var:v23" select="userCSharp:ChangeEventToA42($var:v9 , $var:v10 , $var:v11)" /> 
              <xsl:variable name="var:v24" select="userCSharp:LogicalEq(string($var:v23) , string($var:v7))" /> 
            - <xsl:if test="string($var:v24)='true'">
                  <xsl:variable name="var:v25" select="""" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v25" /> 
                  </CX_0_Id>
              </xsl:if>
          </MRG_4_PriorPatientId>
        - <MRG_5_PriorVisitNumber>
              <xsl:variable name="var:v26" select="userCSharp:ChangeEventToA42($var:v9 , $var:v10 , $var:v11)" /> 
              <xsl:variable name="var:v27" select="userCSharp:LogicalEq(string($var:v26) , string($var:v7))" /> 
            - <xsl:if test="string($var:v27)='true'">
                  <xsl:variable name="var:v28" select="../PV1_PatientVisitSegment/PV1_19_VisitNumber/CX_0_Id/text()" /> 
                - <CX_0_Id>
                  <xsl:value-of select="$var:v28" /> 
                  </CX_0_Id>
              </xsl:if>
          </MRG_5_PriorVisitNumber>
      </MRG_MergePatientInformation>
    </xsl:if>
  </xsl:for-each> 
```

您知道为什么 Mapper 不进行“否则查询”（ if (yes) 和 if( not(yes) ) ）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:52:59.080

我发现视觉映射器不适用于复杂的映射。对于任何非常复杂的事情，我都会切换到外部 xslt 映射。

# css - 将 optgroup 标签显示为初始选项

> ID：15224466
> 
> 赞同：15
> 
> 时间：2013-03-05T13:00:45.247
> 
> 标签：css, html

是否可以在选择下拉列表中显示 optgroup 的标签作为第一个选项？

这有意义吗？或者有更好的方法吗？

我基本上需要第一个标签，它显示为 Select Price 并且不能直接选择，但是当您像 optgroup 标签一样展开选择菜单时显示。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-05T13:04:38.433

您可以使用标准`option`元素并简单地指定`disabled`属性：

```
<select>
  <option disabled="disabled" selected="selected">Select Price</option>
  <optgroup label="Gold">
    <option>5.00</option>
    <option>10.00</option>
  </optgroup>
</select>
```

请参阅此[**jsFiddle 演示**](http://jsfiddle.net/jgCG7/)。

# model-view-controller - 通过代理更新时未从嵌套 JSON 更新关联模型？

> ID：15224472
> 
> 赞同：1
> 
> 时间：2013-03-05T13:01:13.197
> 
> 标签：model-view-controller, extjs, model, proxy, extjs4

在我的 Ext JS 4.1 应用程序中，我有`Project`一个`belongsTo`关联到的模型`ProjectCategory`：

```
Ext.define('MyApp.model.Project', {
  extend: 'Ext.data.Model',
  fields: ['id', 'project_category_id', 'title'],
  belongsTo: {
    model: 'MyApp.model.ProjectCategory',
    associationKey: 'ProjectCategory',
    getterName: 'getCategory'
  }
  // ...
});

Ext.define('MyApp.model.ProjectCategory', {
  extend: 'Ext.data.Model',
  fields: ['id', 'title']
}); 
```

该项目通过直接代理读取，并且 ProjectCategory 详细信息作为嵌套值包含在响应中（主要用于显示目的）。加载商店时，相关数据被正确读取，我可以`ProjectCategory`通过自定义渲染器读取网格中的标题：

```
renderer: function(v, p, rec) {
  return v ? rec.getCategory().get('title') : '';
} 
```

但是，当通过 编辑和保存父`Project`记录时`form.updateRecord(record)`，关联记录的字段不会使用来自服务器响应的值进行更新，这与`Project`的“本机”字段不同。因此，在更改 时`project_category_id`，即使服务器将使用`ProjectCategory`包含新类别的正确嵌套字段进行响应，`getCategory`仍将返回旧类别。

为什么这不是从服务器响应中更新的，我该怎么做才能更新它？

我已经发现在商店的`write`监听器中，我可以访问记录和返回的关联数据。但我不知道如何在不触发任何其他事件的情况下静默更新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:37:56.947

好像我找到了我的解决方案。将此添加到`Project`商店：

```
listeners: {
  write: function(store, operation, opt) {
    var c = operation.records[0].getCategory();
    c.set(operation.response.result.ProjectCategory);
    c.commit(true);
  }
} 
```

关键元素是`commit(true)`调用，它将跳过通知存储/代理有关更改。

不过，这不是自动完成的，这仍然是一个遗憾。

# windows-phone-7 - win 8手机开发中哪个控件好用于显示RSS之类的新闻列表？

> ID：15224479
> 
> 赞同：-2
> 
> 时间：2013-03-05T13:01:23.457
> 
> 标签：windows-phone-7, windows-phone-8

我正在开发 win 8 手机应用程序。该应用程序的某些页面是新闻列表，每个新闻都有标题、图片和开头。在 iOs 版本中，我使用 java 脚本和 css 创建了一个 html 字符串，并在 webview 中显示 html。现在在窗口版本中，我意识到使用与 webbrowser 相同的技巧并不好，因为 webbrowser 滚动并且很难使用全景控件。哪个控件最好？我应该改用列表框吗？你有什么例子吗？

（我应该提到，我想在不重新加载页面的情况下从 url 获取数据后立即在列表中显示数据，这就是为什么我在 iOS 中使用 java 脚本在 Web 视图中加载数据而不进行任何刷新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:23:00.437

为了在列表中显示数据，您通常使用 ListBox 或 LongListSelector 控件。

要在不重新加载的情况下显示数据，请使用数据绑定。列表控件的来源应该是 ObservableCollection<> ，可以异步填充。每当更改集合时，您的 UI 都会刷新。

# asp.net - 如何真正结束会议

> ID：15224482
> 
> 赞同：0
> 
> 时间：2013-03-05T13:01:37.387
> 
> 标签：asp.net, session

我`Session`用来保存我的`login`. 我也对`page_load`我拥有的每一个进行测试，如下所示：

```
if (Session["login"] != null)
{
    LbLogado.Text = "";
    LbLogado.Text += "Logado Com: " + Session["login"].ToString();
}
else
{
    Response.Redirect("~/login.aspx");
} 
```

我也有一个按钮`exit`，这是事件：

```
Session.Clear();
Response.Redirect("~/Login.aspx"); 
```

当我点击退出按钮时，我想以`session`我所拥有的一切结束。
发生的事情是，当我退出并单击浏览器返回上一个网页时，它会正常返回该页面，但我想重定向到该`login.aspx`页面，因为没有`sessions`活动。
我发现了一些这样的[文章](https://stackoverflow.com/questions/1158086/session-not-ending-in-asp-net)。但这不是我的重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:07:05.510

```
Session.Abandon();
Response.Redirect("~/Login.aspx"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:07:14.407

您应该致电：

```
Session.Abandon(); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx)：

> 一旦调用了 Abandon 方法，当前会话就不再有效，可以开始一个新的会话。Abandon 会引发 End 事件。下一个请求将引发一个新的 Start 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:09:17.597

> 这应该适用于您的情况：

```
Session.Abandon();
Response.Redirect("~/Login.aspx"); 
```

# flash - FLARtoolkit - 是否可以隐藏网络摄像头？（动作脚本 3）

> ID：15224487
> 
> 赞同：0
> 
> 时间：2013-03-05T13:02:21.227
> 
> 标签：flash, actionscript, webcam, toolkit

目前我正在为我的大学做一个项目，用户应该能够控制带有打印标记和网络摄像头的动态生成电影。
为此，我认为使用基于 FLARtoolkit 的 FLARSquidderkit（提供多标记检测）是一个好主意[——](http://saqoo.sh/a/en/flartoolkit/start-up-guide)[但这](http://rawkes.com/articles/tracking-multiple-augmented-reality-markers-flarmanager-and-papervision)是我的问题：网络摄像头图像始终位于前景中，因此隐藏了生成的电影。有没有办法或功能将网络摄像头图像置于背景或使其不可见？

如果你有一些想法来解决这个问题，那会让我的生活变得更轻松；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:55:35.213

我没有使用 FLARSquidderkit 或测试过这个，但从你提供的链接和那里的代码摘录来看，你可以试试这个 - 不要通过删除或注释掉`addChild`它所说的调用来将网络摄像头添加到显示列表`/* Display webcam */`中`initFLAR`：

```
private function initFLAR():void {
    // ...

    /* Display webcam */
    //this.addChild(Sprite(fm.flarSource));
} 
```

另一种方法是，如果`flarSource`需要在显示列表中进行操作，您可以尝试将其放置在可见舞台之外，方法是将其`x`和`y`属性设置为 -1000 等。

# android - Android：尝试让 2 个 web 视图相互叠加，只有顶部的一个被绘制

> ID：15224491
> 
> 赞同：0
> 
> 时间：2013-03-05T13:02:25.877
> 
> 标签：android

我正在尝试使用 2 个 Web 视图进行布局。我无法弄清楚为什么底部没有显示。上面的那个有一个 TextView 可以显示。然后它下面有一个很大的空间，应该是 webview 的地方。我以前做过。

布局有 2 个垂直容器，位于一个水平容器内。第一个垂直容器有两个 webvies

xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:background="@drawable/bookmarkbackground"
    android:layout_height="match_parent"
    android:orientation="vertical" >

 <LinearLayout
  android:id="@+id/mainLayout"
  android:layout_width="wrap_content"
  android:layout_height="fill_parent"
  android:layout_gravity="center"   
  android:orientation="horizontal">    

<!-- right hand side, has web vues for next event and current message threads -->
<LinearLayout
  android:id="@+id/mainLayout"
  android:layout_width="wrap_content"
  android:layout_height="fill_parent"
  android:layout_gravity="center"   
  android:orientation="vertical">  

     <TextView      
        android:id="@+id/textPush"  
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Latest Message Board Threads"
        android:textColor="#ff000000"
        android:textStyle="bold"
        android:textSize="24dp"
        android:layout_gravity="left"/> >

// this one gets displayed
               <WebView
           android:id="@+id/webAuthor"
           android:layout_width="200px"
           android:layout_height="fill_parent"
           android:layout_weight="1.0"
           />   

               <TextView        
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Latest Message Board Threads"
        android:textColor="#ff000000"
        android:textStyle="bold"
        android:textSize="12dp"
        android:layout_gravity="center" />  

               // is not getting displayed
               <WebView
           android:id="@+id/webThreads"
           android:layout_width="200px"
           android:layout_height="fill_parent"
           android:layout_weight="1.0"
           /> 

          </LinearLayout>  

<!-- left hand side should over lay book mark and have buttons -->
    <LinearLayout
  android:id="@+id/mainLayout"
  android:layout_width="wrap_content"
  android:layout_height="fill_parent"
  android:layout_gravity="center"   
  android:orientation="vertical">  

          <TextView     
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Latest Message Board Threads"
        android:textColor="#ff000000"
        android:textStyle="bold"
        android:textSize="24dp"
        android:layout_gravity="center"     
                 />

</LinearLayout>

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:09:02.447

尝试这个 ：

```
<LinearLayout
  android:id="@+id/mainLayout"
  android:layout_width="wrap_content"
  android:layout_height="fill_parent"
  android:layout_gravity="center"   
  android:orientation="vertical">  

     <TextView      
        android:id="@+id/textPush"  
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Latest Message Board Threads"
        android:textColor="#ff000000"
        android:textStyle="bold"
        android:textSize="24dp"
        android:layout_gravity="left"/> 

           <WebView
       android:id="@+id/webAuthor"
       android:layout_width="200px"
       android:layout_height="0dp"
       android:layout_weight="1.0"
       />   

           <TextView        
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="Latest Message Board Threads"
    android:textColor="#ff000000"
    android:textStyle="bold"
    android:textSize="12dp"
    android:layout_gravity="center" />  

           // is not getting displayed
           <WebView
       android:id="@+id/webThreads"
       android:layout_width="200px"
       android:layout_height="0dp"
       android:layout_weight="1.0"
       /> 

      </LinearLayout> 
```

通常，如果您指定 `android:layout_height="fill_parent"`权**重**，则不会适当地应用。

# events - 从 zoho crm 中的事件表中获取数据

> ID：15224492
> 
> 赞同：2
> 
> 时间：2013-03-05T13:02:28.140
> 
> 标签：events, fetch, crm, zoho

我是 zoho crm 的新手。如何从 zoho CRM 中的事件表中获取所有数据？有没有api？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:58:23.427

您可以使用[https://crm.zoho.com/crm/private/xml/Events/getRecords?authtoken=Auth](https://crm.zoho.com/crm/private/xml/Events/getRecords?authtoken=Auth) Token&scope=cmapi 获取事件列表。

# c# - DataGridTemplateColumn 中的组合框。绑定不起作用

> ID：15224493
> 
> 赞同：1
> 
> 时间：2013-03-05T13:02:32.220
> 
> 标签：c#, wpf, data-binding, datagrid, combobox

在我的 WPF 窗口中，我声明了以下内容：

```
public List<Brand> BrandList; 
```

然后在构造函数中填充列表：

```
BrandList = new List<Brand>(EntityDao.GetInstance().GetProducts().Select(p => p.Brand).Distinct().OrderBy(b => b.Name)); 
```

然后在我的 XAML 代码中，我声明了一个 DataGrid：

```
<DataGrid <!-- Properties omitted--> >
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{Binding Path=BrandList, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <!-- Other columns omitted -->
    </DataGrid.Columns>
</DataGrid> 
```

问题是我的组合框是空的。通过调试，我验证了该`BrandList`对象包含80多个对象，所有对象都定义了一个`ToString()`方法。

DataGrid 的 ItemsSource 是一个简单的 ObservableCollection。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:26:45.183

绑定适用于属性，并且您声明了一个公共成员。您应该像这样定义您的列表：

```
public List<Brand> BrandList { get;set;} 
```

# cuda - What is the OpenCL analogue for CUDA's __syncthreads() and blockIdx.x?

> ID：15224498
> 
> 赞同：8
> 
> 时间：2013-03-05T13:02:42.860
> 
> 标签：cuda, parallel-processing, opencl

I am trying to translate CUDA code into OpenCL and right now I am stuck with these functions/variables:

*   `__syncthreads()`
*   `blockIdx.x`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T13:06:14.530

Actually I found it by my own! Here is a useful article: [http://www.netlib.org/utk/people/JackDongarra/PAPERS/parcocudaopencl.pdf](http://www.netlib.org/utk/people/JackDongarra/PAPERS/parcocudaopencl.pdf)

The answer is: for the __syncthreads() use barrier(CLK_LOCAL_MEM_FENCE); for blockIdx.x use get_group_id(0)!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T15:57:21.867

`__syncthreads()` -> `barrier(_)` but make sure to understand the difference between `barrier(CLK_LOCAL_MEM_FENCE)` and `barrier(CLK_GLOBAL_MEM_FENCE)` check this [question](https://stackoverflow.com/questions/6890302/barriers-in-opencl) or this [documentation](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/barrier.html) for more info.

`blockIdx.x` -> `get_group_id(0)` which will give you the first/x dimension id of the group/block

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T15:39:04.817

There are many pages on the web that can help you for porting CUDA to OpenCl (for example [here](http://developer.amd.com/tools-and-sdks/opencl-zone/opencl-resources/programming-in-opencl/porting-cuda-applications-to-opencl/)). I want just to remark, as it point out [here](https://stackoverflow.com/q/6890302/5078576) for the "barrier", that there are `barrier(CLK_LOCAL_MEM_FENCE)` and `barrier(CLK_GLOBAL_MEM_FENCE)`: mainly the difference is that the first one ensuree correct ordering of memory operations when you are using the local (shared in CUDA) memory and the second when you are operating on the global memory. Be sure to use the correct one for your case.

# qt - Qt 部署到远程 Linux 主机 - 如何指定要部署的文件？

> ID：15224500
> 
> 赞同：8
> 
> 时间：2013-03-05T13:02:49.823
> 
> 标签：qt

我从 QtGui tempate 创建了一个新的 Qt 项目，我想将它部署到远程设备。如何指定我希望部署可执行文件？在运行设置中，我只是被告知“不知道要运行什么”。

我需要在我的专业文件中指定什么吗？

![在此处输入图像描述](../Images/61524c0788fd4f90565fde6a3d0e19d8.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T14:39:40.710

在我的专业文件中修复了它：

```
target.path = /opt/$${TARGET}/bin
INSTALLS += target 
```

# c# - 将 c# 的 datetimepicker 值存储到 mysql 数据库中

> ID：15224503
> 
> 赞同：3
> 
> 时间：2013-03-05T13:03:02.473
> 
> 标签：c#, datetimepicker

您好，我想将 datetimepicker 值存储到 mysql 数据库中，我的代码如下所示

```
dtpDate = datetimepicker1.value.date;
dtpTime = datetimepicker2.value.Timeofday;
MySqlCommand cmd = new MySqlCommand("INSERT INTO schedule_days(schedule_name,start_time,status,days,start_date,connector_id) VALUES ('" + name + "','" + dtpTime + "','" + s + "','" + day + "','"+dtpDate+"','" + chkArray[i].Tag + "')", con);
con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

但是没有值存储在数据库中，并且在那个地方无法读取数据。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:55:29.483

由于在 dtpTime 和 dtpDate 字段的查询中存在错误，因此未在 MySQL 数据库中输入值。

你喊用 dtpTime.Value.TimeofDay 和 dtpDate.Value.Date 替换它，新的查询将是这样的

```
dtpDate = datetimepicker1.value.date;
dtpTime = datetimepicker2.value.Timeofday;
MySqlCommand cmd = new MySqlCommand("INSERT INTO schedule_days(schedule_name,start_time,status,days,start_date,connector_id) VALUES ('" + name + "','" + dtpTime.Value.TimeofDay + "','" + s + "','" + day + "','"+dtpDate.Value.Date.ToString("yyyy-MM-dd HH:mm")+"','" + chkArray[i].Tag + "')", con);
con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:15:01.317

好吧，这*可能*不是问题的原因（有任何例外吗？`ExecuteNonQuery`返回什么？）但您*绝对*不应该像这样构建您的 SQL。它会导致[SQL 注入攻击](http://bobby-tables.com)，以及数据转换问题。

相反，您应该使用参数化 SQL：

```
using (MySqlConnection conn = new MySqlConnection(...))
{
    conn.Open();
    using (MySqlCommand cmd = new MySqlCommand(
       "INSERT INTO schedule_days(schedule_name,start_time,status,days,start_date,connector_id) " +
       "VALUES (@name, @time, @status, @days, @date, @connector)", conn))
    {
        cmd.Parameters.Add("@name", MySqlDbType.VarChar).Value = name;
        cmd.Parameters.Add("@time", MySqlDbType.Time).Value = dtpTime;
        cmd.Parameters.Add("@status", MySqlDbType.VarChar).Value = s;
        cmd.Parameters.Add("@days", MySqlDbType.Int32).Value = day;
        cmd.Parameters.Add("@date", MySqlDbType.Date).Value = dtpDate;
        cmd.Parameters.Add("@connector", MySqlDbType.VarChar).Value = chkArray[i].Tag;

        int insertedRows = cmd.ExecuteNonQuery();
        // TODO: Validate that insertedRows is 1?
    }
} 
```

我已经猜到了数据类型 - 请根据您的实际数据库检查它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:15:22.453

使用 NuGet 包[MySql.Data 6.6.4](http://nuget.org/packages/MySql.Data/)。

目前 MySqlParameter 不支持未命名参数。参数必须以 a 开头`?`。

例子：

```
command.Parameters.AddWithValue("?Parameter", value); 
```

像这样的东西应该工作。避免使用 Sql 进行字符串连接，因为这会导致安全风险。

```
dtpDate = datetimepicker1.value.date.ToString("yyyy-MM-dd HH:mm"); //Formatted Date for MySql
dtpTime = datetimepicker2.value.Timeofday;

using(var connection = new MySqlConnection(connectionString))
{
    using(var command = connection.CreateCommand())
    {
        command.CommandText = "INSERT INTO schedule_days(schedule_name,start_time,status,days,start_date,connector_id) VALUES ( ?ScheduleName, ?StartTime, ?Status, ?Days, ?StartDate, ?ConnectorId )";
        command.Parameters.AddWithValue("?ScheduleName", name);
        command.Parameters.AddWithValue("?StartTime", dtpTime);
        command.Parameters.AddWithValue("?Status", s);
        command.Parameters.AddWithValue("?Days", day);
        command.Parameters.AddWithValue("?StartDate", dtpDate);
        command.Parameters.AddWithValue("?ConnectorId", chkArray[i].Tag);

        connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

# database - 表达数据转换

> ID：15224505
> 
> 赞同：0
> 
> 时间：2013-03-05T13:03:03.623
> 
> 标签：database, relational-database, analysis, data-transfer

两个不同的关系数据库。

您的任务是编写代码将数据从第一个数据库传输到第二个数据库。

您要传输到的数据库中的某些表与您要传输的表具有相同的结构，这些表的传输就像“INSERT INTO DbA.TableA (...) VALUES SELECT * FROM DbB.TableB”一样简单.

您正在传输的数据库中的某些表具有不同的结构和不同的用途。经过适当的分析，您了解了关系并了解了编码所需的正确转换。

我的问题是：你如何表达这样的知识？你如何表达两个数据库之间的转换关系？有没有工具或图表？

我现在知道的最好的方法是编写第一个数据库的表列表，并为每个表描述如何将其转换为第二个数据库。有没有可能让它更正式/简洁/酷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:15:40.860

如果您想要一个工具集并在 Microsoft 数据库堆栈中工作，那么这正是 SQL Server 集成服务（或 SSIS）的用途。

如果您想记录该过程，那么您通常会编写一个接口定义文档 (IDD)。Google 上有很多示例，但[这里有一些可以帮助您入门](https://filetea.me/t1s9VfVS2exRDKXvQUPzCLqLg)的内容。

# javascript - 如何在 phonegap javascript 中像 tablview 一样显示列表？

> ID：15224518
> 
> 赞同：0
> 
> 时间：2013-03-05T13:04:13.153
> 
> 标签：javascript, cordova

HTML：

```
<ul id="listview" data-inset="true"></ul> 
```

JavaScript：

```
for(i=0;i<titles.length;i++){
    $('#listview').append('<li><a href="#">'+titles[i]+'</a>      </li>');
} 
```

它会显示简单的列表，但我需要列表视图作为表格视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:09:27.653

PhoneGap 不是将您的 JS / HTML 编译为 Objective-C 样式代码的包装器。我假设您想要实现的目标类似于下图：

![在此处输入图像描述](../Images/6e494a027b1710f1ce202e46a5183a9e.png)

您需要`#listview`使用 CSS 设置样式以实现此目的。例如，您可以尝试这样的事情：

```
#listview {
    list-style: none;
    float: left;
    width: 100%;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
}

    #listview li {
        width: 100%;
        padding: 10px;
        font-weight: bold;
        -webkit-box-sizing: border-box;
                box-sizing: border-box;
        background-color: #fff;
        float: left;
        clear: both;
        border-bottom: 1px solid #ccc;
    }
        #listview li:last-of-type {
            border-bottom: none;
        } 
```

# quickbooks - 发票支付页面的 Intuit PaymentNetwork 元数据

> ID：15224522
> 
> 赞同：0
> 
> 时间：2013-03-05T13:04:28.043
> 
> 标签：quickbooks, intuit-partner-platform

QuickBooks Online 提供了使用 Intuit PaymentNetwork 启用发票付款的选项。注册 Intuit PaymentNetwork 后，该选项会出现在 QBO 发票编辑页面上。如果选中，电子邮件发票将包含一个秘密 URL，将客户带到[他们可以支付发票的页面](http://imgur.com/J14inio)。

是否可以根据通过 IPP DataServices API 提供的信息重建此 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:36:36.710

不，此 URL 不能通过 IDS API 获得。

# c++ - G++ -D 选项添加数字 1

> ID：15224524
> 
> 赞同：0
> 
> 时间：2013-03-05T13:04:32.030
> 
> 标签：c++, g++, c-preprocessor

我知道标题很奇怪，所以这里是解释：

我有一些我不想修改的代码，但我需要重新定义一些函数。最小的例子是这样的：

```
int main()
{
strcpy_s(a,b);
} 
```

但是当我运行这个时：

```
$ g++ -E -P -w -D"strcpy_s(D,S)   strcpy(D,S) buahaha" test.cpp 
```

我得到：

```
int main()
{
strcpy(a,b) buahaha 1;
} 
```

这是什么`1`？忽略buahaha，这只是为了表明PP做了一些事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:08:08.263

您可以通过两种方式使用该`-D`选项：

*   `-Dname`
*   `-Dname=value`

第一个定义`name`为`1`，第二个定义`name`为`value`。

`name`允许包含括号，以便您可以在命令行上定义类似函数的宏。like`-Dfoo bar`不包含等号，因此它被解释为尝试定义`foo bar`为`1`。宏名称不能包含空格，因此这可能会导致错误消息，但不会被检测到，最终会混淆编译器。试试`-D"strcpy_s(D,S)=strcpy(D,S) buahaha"`吧。

我怀疑正在发生的事情是`-Dname`被翻译成`#define name 1`，并被`-Dname=value`翻译成`#define name value`，并且错误检查仅在此之后发生。这将转化`-D"strcpy_s(D,S) strcpy(D,S) buahaha"`为`#define strcpy_s(D,S) strcpy(D,S) buahaha 1`，并解释您得到的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:07:54.753

[文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Preprocessor-Options.html#Preprocessor-Options#index-D-908)显示该`-D`选项在其语法中有一个等号，您没有使用它。

您的命令可能应该是：

```
$ g++ -E -P -w -D"strcpy_s(D,S)=strcpy(D,S)" test.cpp 
```

# vb.net - 在面板中查找最顶层（z 顺序）控件

> ID：15224525
> 
> 赞同：5
> 
> 时间：2013-03-05T13:04:33.910
> 
> 标签：vb.net, winforms, user-interface

看我的情况是，

我`forms (toplevel=false)`在一个`panel`. 所有`forms`打开的内部`panel`都将在运行时`dock filled`。`brought to front`我在这种情况下需要的是，我如何选择最上面的 control( `form`) `panel`。最顶部的控制意味着 control( `form`) 具有更大的`z-order`。

我目前正在假设使用此代码，

```
 panel.controls(0) 
```

任何人都可以告诉我，上面的代码片段是否正确或 dot net 中可用的任何替代语法来实现这一点。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:37:43.057

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)：

> 索引值为零的控件位于 z 顺序的顶部，数字越大越靠近底部。

因此，我会说你的假​​设是正确的。 `Controls(0)`将永远是最顶级的控制。唯一的问题是它是否可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:26:39.510

我没有看到任何其他循环遍历每个 Control 的解决方案，看看最上面的是什么。就像是：

```
Dim TopMostControl As Control = panel.Controls(0) 'Check if there are any control
For Each Control As Control In panel.Controls
    If panel.Controls.GetChildIndex(Control) < panel.Controls.GetChildIndex(TopMostControl) Then
        TopMostControl = Control
    End If
Next 
```

# android - 检测形状上的触摸事件

> ID：15224533
> 
> 赞同：0
> 
> 时间：2013-03-05T13:04:54.213
> 
> 标签：android, android-canvas

我有这个类似图形的圆圈，分为几个“部分”。我在画布上使用 drawArc 绘制这些。

```
canvas.drawArc(oval, startAngle, sweepAngle, true, fillPaint); 
```

我想让这些弧线可点击，以便在用户点击它们时触发事件。所以我决定覆盖 onTouchEvent，然后为 ACTION_DOWN 遍历我的所有部分并检查触摸位置是否在其中。

我在这里尝试[了这个代码，](https://stackoverflow.com/questions/5607768/can-handle-events-on-irregular-shapes-on-android)它回答了一个类似的问题，但是我得到了奇怪的角度值（即右上象限的负值，其余的值在 180-270 之间）。

```
public boolean isInArea(float x, float y){
        int deltaX = (int) (x - oval.centerX());
        int deltaY = (int) (y - oval.centerY());

        if (Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2)) > mRectShape.width()/2) {
            return false;
        }

     // offset for radiant, depending on quadrant
        double offset = 0;
        if (deltaX > 0 && deltaY < 0) {
            // top right -> nothing to do
        } else if (deltaX > 0 && deltaY > 0) {
            // bottom right -> add 90 degrees
            offset = Math.PI/2;
        } else if (deltaX < 0 && deltaY > 0) {
            // bottom left -> add 180 degrees
            offset = Math.PI;
        } else if (deltaX < 0 && deltaY < 0) {
            // top left -> add 270 degrees
            offset = Math.PI * 3/2;
        }

        //now calculate angle
        double angle = Math.asin(deltaY / deltaX);
        double total = angle + offset;
        double totalDeg = total * 180 / Math.PI;
        Log.d(LOG_TAG, "angle :" + totalDeg);

        if(totalDeg > mStartAngle && totalDeg < mSweepAngle){
            return true;
        }

        return false;
    } 
```

我也尝试不设置偏移量，然后我得到顶部象限的负值，底部象限的正值在 0 到 180 之间。

还尝试像这样使用 atan2：

```
angle = Math.atan2(deltaY, -deltaX); 
```

我在这里想念什么？

# linux - bash：将列表文件放入变量中，但数组的大小为 1

> ID：15224535
> 
> 赞同：15
> 
> 时间：2013-03-05T13:04:59.137
> 
> 标签：linux, bash, shell, unix

我在目录中列出文件并循环遍历它们，但我也需要知道有多少。${#dirlist[@]} 始终为 1，但 for 循环有效吗？

```
#!/bin/bash
prefix="xxx"; # as example

len=${#prefix}; # string length
dirlist=`ls ${prefix}*.text`;
qty=${#dirlist[@]};  # sizeof array is always 1
for filelist in $dirlist
do
    substring="${filelist:$len:-5}";
    echo "${substring}/${qty}";
done 
```

我有文件 xxx001.text 到 xxx013.text
但我得到的只是 001/1 002/1 003/1

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-05T13:15:27.200

这：

```
dirlist=`ls ${prefix}*.text` 
```

不做数组。它只生成一个带有空格分隔文件名的字符串。

你所要做的

```
dirlist=(`ls ${prefix}*.text`) 
```

使其成为一个数组。

然后`$dirlist`将仅引用第一个元素，因此您必须使用

```
${dirlist[*]} 
```

在循环中引用所有这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:08:21.353

除非您将其包围，否则您不会创建数组`(` `)`：

```
dirlist=(`ls ${prefix}*.text`) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-02T06:04:30.090

声明一个文件数组：

```
arr=(~/myDir/*) 
```

使用计数器遍历数组：

```
for ((i=0; i < ${#arr[@]}; i++)); do

  # [do something to each element of array]

  echo "${arr[$i]}"
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T13:08:45.223

```
dir=/tmp
file_count=`ls -B "$dir" | wc -l`
echo File count: $file_count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-16T09:12:22.530

中的*数组*语法`bash`很简单，使用括号`(`和`)`：

```
# string
var=name

# NOT array of 3 elements
# delimiter is space ' ' not ,
arr=(one,two,three) 
echo ${#arr[@]}
1

# with space
arr=(one two three)
# or ' ',
arr=(one, two, three)
echo ${#arr[@]}
3

# brace expansion works as well
# 10 elements
arr=({0..9})
echo ${#arr[@]}
10

# advanced one
curly_flags=(--{ftp,ssl,dns,http,email,fc,fmp,fr,fl,dc,domain,help});
echo ${curly_flags[@]}
--ftp --ssl --dns --http --email --fc --fmp --fr --fl --dc --domain --help
echo ${#curly_flags[@]}
12 
```

如果要运行命令并存储输出

```
# a string of output
arr=$(ls)
echo ${#arr[@]}
1

# wrapping with parentheses
arr=($(ls))
echo ${#arr[@]}
256 
```

一种更高级/更方便的方法是使用**内置的**bash 命令`mapfile`或`readarray`进程**替换**。这是一个使用示例`mapfile`：

```
# read the output of ls, save it in the array name: my_arr
# -t    Remove a trailing DELIM from each line read (default newline)
mapfile -t my_arr < <(ls)
echo ${#my_arr[@]}
256 
```

# windows - 在本地安装 Apache/MySQL/PHP Web 应用程序

> ID：15224537
> 
> 赞同：3
> 
> 时间：2013-03-05T13:05:00.093
> 
> 标签：windows, apache, installation, uac, windows-firewall

我们有一个基于 Apache、MySQL 和 PHP 的 Web 应用程序。我也想让它作为 Windows 的桌面应用程序提供，通过 MSI 安装。一个小的 .NET 应用程序启动一个我们部署的修改过的 xampp 包，然后打开一个基于 Chromium 的嵌入式浏览器。

问题：

*   如何确保我能够在运行时修改 Apache/MySQL/PHP 配置？这些文件存储在 Program Files 中，UAC 当然不允许我在没有“以管理员身份运行”的情况下更改它们。有没有办法在设置过程中使这些文件可编辑？否则我将不得不弄清楚如何使用临时目录中的自定义配置文件启动 Apache/MySQL。

*   如何告诉安装程序将 Apache 和 MySQL 添加到防火墙例外列表中，或者如何告诉防火墙仅在本地侦听的应用程序不是威胁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:41:48.060

我意识到我不想在这里进行肮脏的黑客攻击，并试图“正确”地做到这一点：

*   我修改了 Apache 和 MySQL 的配置，以便更改的所有内容都位于 %APPDATA% 中。配置文件作为命令行参数传递。
*   当前版本的[Advanced Installer](http://www.advancedinstaller.com)允许在安装时设置防火墙规则。

实际上改变配置并不像我想象的那么难，而且我在这个过程中学到了一些东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:23:43.377

我不确定这有什么帮助，但看看 inno setup 它是部署软件的免费工具，它允许使用 pascal 制作自定义安装脚本，我希望通过付出一些努力，你可以安装 wamp，添加防火墙限制等.

# laravel - Laravel 4：刀片布局中的 if 语句很奇怪

> ID：15224545
> 
> 赞同：5
> 
> 时间：2013-03-05T13:05:17.100
> 
> 标签：laravel, laravel-4, blade

如果我正常请求页面（不是ajax），有人可以解释一下为什么我会得到带有打印字符串“@extends（'layouts.default'）”的空白屏幕吗？

```
@if(!Request::ajax())
  @extends('layouts.default') 
  @section('content')
@endif
Test
@if(!Request::ajax())
  @stop
@endif 
```

我正在尝试解决 Ajax 的问题，我不想为每种请求类型创建 2 个模板，而且我确实想使用刀片模板，因此使用控制器布局对我不起作用。我怎样才能在刀片模板中做到这一点？我在看这个[Laravel：如何只渲染模板的一部分？](https://stackoverflow.com/questions/15096241/laravel-how-to-render-only-one-section-of-a-template)

*顺便一提。如果我用 ajax 请求它，它会像它应该的那样工作。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T16:46:45.027

是的 @extends 必须在第 1 行。

我找到了 PJAX 的解决方案。一开始我不确定这是否可以解决我的问题，但确实可以。如果您实际上不能以这种方式失去刀片功能，我不知道为什么我害怕失去刀片功能。如果有人使用 PJAX 并且需要使用一个带有和不带有布局的模板，这可能是您的解决方案：

```
protected $layout = 'layouts.default';

public function index()
{
  if(Request::header('X-PJAX'))
  {
    return $view = View::make('home.index')
      ->with('title',  'index');
  }
  else
  {
    $this->layout->title = 'index';
    $this->layout->content = View::make('home.index');
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:37:34.687

尝试移动`@extends`到第 1 行，您将看到刀片模板将正确渲染。

至于解决ajax问题，我认为将逻辑移回控制器会更好。

**例子：**

```
…
if ( Request::ajax() )
{
    return Response::eloquent($books);  
} else {
    return View::make('book.index')->with('books', $books);
}
… 
```

查看此线程以获取更多信息：[http ://forums.laravel.io/viewtopic.php?id=2508](http://forums.laravel.io/viewtopic.php?id=2508)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-16T10:32:05.200

你仍然可以像这样在拳头线上运行你的状况

```
@extends((Request::ajax())?"layout1":"layout2") 
```

# c# - 在 microsoft HPC 上通过 Com-interop C# API 打开一个 excel 文件

> ID：15224547
> 
> 赞同：2
> 
> 时间：2013-03-05T13:05:26.647
> 
> 标签：hpc, excel, c#, excel, interop, windows-server-2008, hpc

我正在使用 Windows [hpc](/questions/tagged/hpc "显示标记为“hpc”的问题")，我正在尝试制作一个在网格上运行[excel](/questions/tagged/excel "显示标记为“excel”的问题")宏的小程序。我正在使用 Com Interop API
它在我的计算机上运行良好，它运行不同的 VBA 宏，但是当我在网格上使用它时，它不再工作了。Open 方法无法正常工作。

```
workBook = excelApp.Workbooks.Open(path, Type.Missing,false, Type.Missing, Type.Missing, Type.Missing, true, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

这是从法语翻译的异常：

> 发现异常：类型：System.Runtime.InteropServices.COMException 消息：Microsoft Office Excel 无法访问文件
> 
> \服务器\路径\test.xls。有多种可能性：
> 
> *   文件名或路径不存在
> *   该文件当前与另一个程序一起使用
> *   您尝试使用的工作簿与已打开的另一个工作簿具有相同的名称
> 
> 来源：Microsoft Office Excel
> 
> Stacktrace：在 Microsoft.Office.Interop.Excel.Workbooks.Open（字符串文件名、对象 UpdateLinks、对象只读、对象格式、对象密码、对象 WriteResPassword、对象 IgnoreReadOnlyRecommended、对象来源、对象分隔符、对象可编辑、对象通知、对象转换器, Object AddToMru, Object Local, Object CorruptLoad) at namespace.ExcelFile.readExcel(Application excelApp) in E:\path\ExcelFile.cs:line 37

我尝试使用与应用程序中使用的帐户相同的帐户从计算节点访问文件，并且工作正常。可以访问，好像没有其他程序在使用，Excel也打不开。
编辑：我也可以在不使用 Microsoft API（头节点）的情况下在计算节点上运行我的小应用程序

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:58:51.983

因此，在处理使用 HPC 时实例化应用程序（例如办公室 COM）的 COM API 时，需要记住一些事项。在本地运行时，您似乎已经涵盖了权限；但是，当以服务的名义运行时，它会变得有点棘手。

HPC 在托管您的服务时模拟 IIS；因此，必须同样对待；在 IIS 中，当您需要通过 WCF 服务运行这些应用程序之一时，您通常指定允许 AppPool 的身份启动配置文件，该配置文件将授予应用程序配置文件目录以访问以执行操作。您还必须确保您对应用程序池所做的任何设置以在没有 HPC 的情况下运行这些服务也反映在您放置在 HPC 的服务注册目录中的服务配置文件中。

如果此应用程序是 32 位应用程序（您的应用程序不是 COM+），您必须在 SericeRegistration 标记中添加一个条目以指定此条目，这与您在 IIS 中配置应用程序池以接受 x86 应用程序的方式相同。默认情况下，HPC 在 Broker 的配置文件中内部指定 architecture="X64"。

```
<microsoft.Hpc.Session.ServiceRegistration>
    <service assembly="C:\ServicesR2\OfficeService.dll"
      contract="OfficeService.IOfficeService" type="OfficeService.OfficeService"
      includeExceptionDetailInFaults="true" maxConcurrentCalls="0"
      serviceInitializationTimeout="60000" enableMessageLevelPreemption="true"
      stdError="" maxMessageSize="65536" soaDiagTraceLevel="Off"
      architecture="X86" />
</microsoft.Hpc.Session.ServiceRegistration> 
```

确保您在以下位置有一个名为“Desktop”的目录：

C:\Windows\SysWOW64\config\systemprofile\ C:\Windows\System32\config\systemprofile\

这适用于集群中的所有节点；如果您只运行 32 位 Windows，您可以忽略 SysWow64 目录位置。

接下来，您需要检查 Office Excel 的 DCOM 设置。为此，只需打开一个运行对话框并输入：

Dcomcnfg -32

我们添加 -32 以打开 32 位 DCOM 配置，因为 Office 仅提供 32 位 COM+ 对象来使用（对于 2010 及以下版本，我无法评论 365/2013）。

确保选中位置“在此计算机上运行应用程序”。

确保在安全下，您的帐户可以完全控制启动和激活权限、访问权限和配置权限。如果您的用户是此系统上的管理员帐户，则您不需要进行任何更改，因为管理员默认具有这些功能。

如果运行此任务的计算节点是 Windows Server 2008 R2 机器，请在身份选项卡中指定 - “启动用户”。如果运行此任务的计算节点是 windows Server 2012 机器，请指定 -“此用户”并提供您的凭据；或指定交互式用户。我对后者的运气很少，所以我建议前者。

处理完这些事情后，您的 HPC 服务应该可以正确执行应用程序，而不会看到那些讨厌的失败 COM+ 错误。

此外，您需要额外确保在退出时清理应用程序；我强烈建议您为您的 WCF 服务编写一个小例程作为最后的例程，该例程在您完成后终止 excel 进程；我发现在 HPC 下使用 Excel 时，终止应用程序的常用方法很明显我们不可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T22:33:03.007

当您说您可以访问它时，您是指使用资源管理器通过文件系统还是通过代码？您的代码是否可能不喜欢该路径或认为存在权限问题？

如果添加如下内容，结果是什么？

```
 System.IO.FileInfo info = new System.IO.FileInfo(path);

 if(info.Exists)
 {
      System.Security.Permissions.FileIOPermission permission =
           new System.Security.Permissions.FileIOPermission(
               System.Security.Permissions.FileIOPermissionAccess.AllAccess, path);

       permission.Demand();
 }
 else{ 
      throw new System.IO.FileNotFoundException(path);
 } 
```

# linux - 无法在端口 80 上运行节点服务器

> ID：15224552
> 
> 赞同：0
> 
> 时间：2013-03-05T13:05:31.513
> 
> 标签：linux, node.js, port

我最近购买了一台富士通服务器。我在上面运行 Linux Mint ( Cinnamon )。

我安装了 Node.js 没有问题，并且可以在除 80 之外的任何端口上运行我的服务器脚本。起初，它以 EACCES 错误响应，但是当我以 root 身份运行 node.js 时，该错误消失了。现在它的输出与我在任何其他端口上运行它时的输出相同，但是当我进入域时它将无法工作。

```
var http = require('http');

http.createServer(server).listen(80);

function server(req, res) {
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.end('Hello World\n');

    console.dir(req);
} 
```

在 shell 中运行命令行为：

```
/home/xymon/node/node server.js 
```

su登录后。

我的代码几乎可以在我尝试过的任何其他端口上运行。甚至 81。只是不是 80，它把我逼疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:08:29.840

一种选择是作为 sudo 运行，这不是一个很好的选择，因为你们所有的网站代码都会被提升。

另一种选择是在备用端口上运行该站点并将其放在 nginx 或[httpproxy](https://github.com/nodejitsu/node-http-proxy)后面。

```
var proxyPort = 80;
var http = require('http');
var httpProxy = require('http-proxy');

var options = {
    router: {
        'localhost': '127.0.0.1:3000',
        'site1.com': '127.0.0.1:3000',
        'site2.com': '127.0.0.1:4000'
    }
};
console.log('Proxy Routing:')
console.log(options);
console.log();

var proxyServer = httpProxy.createServer(options);
proxyServer.listen(proxyPort);
console.log('Proxy listening on port ' + proxyPort); 
```

这还具有能够在端口 80 下运行多个站点的好处。如您所见，我还使该站点在端口 3000 上可用，但仅在本地可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:42:51.443

天哪，多么冒险！

我已经通过以下步骤解决了这个问题。

1.  打开端口 80 - 100。
2.  在端口 100 上运行服务器。
3.  将端口 80 重定向到 100... iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 100
4.  在 sudo 中运行 Node.js。

谢谢大家的帮助，这对我来说已经跑了两天了，但我正在学习！

成品：http: [//io-chat.com/home](http://io-chat.com/home)

# android - 来自广播接收器的 StartActivity

> ID：15224558
> 
> 赞同：2
> 
> 时间：2013-03-05T13:05:40.173
> 
> 标签：android

Onreceive 方法会在 context.startActivity(Intent.createChooser(sendIntent, "Send")); 它在 oncreate 方法中工作正常，但在广播接收器类中不起作用。有谁能知道原因。我是新的安卓程序员。提前致谢。

```
public class SMSReceiver extends BroadcastReceiver {
public void onReceive(Context context, Intent intent) {

    takePictureNoPreview(context);    
                String imagePath="test.jpeg";
                Intent sendIntent = new Intent(Intent.ACTION_SEND);
            //    sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
                sendIntent.putExtra("sms_body", "I Send you pic.");

                sendIntent.putExtra("address", phoneNumber);
                sendIntent.setType("image/png");
                sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(dataFile));
       //         context.startActivityForResult(sendIntent, 1);
                context.startActivity(Intent.createChooser(sendIntent, "Send"));
      //          context.startActivity(sendIntent);

            }       
        }
}        

        public void takePictureNoPreview(Context context){
            // open back facing camera by default
            Camera myCamera= Camera.open();//openFrontFacingCameraGingerbread();

            if(myCamera!=null){
              try{
                //set camera parameters if you want to
                //...

                // here, the unused surface view and holder
                SurfaceView dummy=new SurfaceView(context);
                myCamera.setPreviewDisplay(dummy.getHolder());    
                myCamera.startPreview(); 

                myCamera.takePicture(null, null, photoCallback);

              } catch (IOException e) {

                e.printStackTrace();
            }finally{
       //         myCamera.close();
              }      

            }else{
                 Toast toast = Toast.makeText(context, "No front Facing camera", Toast.LENGTH_LONG);
                 toast.show();
            }
        }

        Camera.PictureCallback photoCallback = new Camera.PictureCallback() {
            public void onPictureTaken(byte[] data, Camera camera) {
                // Save the image JPEG data to the SD card
                FileOutputStream fos = null;        
            //    camera.startPreview();

                bmp = BitmapFactory.decodeByteArray(data, 0, data.length);  
                StudentDemo.iView.setImageBitmap(bmp);
                 try {
                     fos = new FileOutputStream(dataFile,true);              
                     fos.write(data);
                     fos.close();

                } catch (FileNotFoundException e) {             
                    e.printStackTrace();
                } catch (IOException e) {           
                    e.printStackTrace();
                }

                /*new SavePhotoTask().execute(data);
                camera.startPreview();*/
            }
        }; 
```

}

Android清单文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.gen.stud"
      android:versionCode="1"
      android:versionName="1.0">

    <uses-sdk android:minSdkVersion="9"
        android:targetSdkVersion="9" 
        />

    <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
    <uses-permission android:name="android.permission.SEND_SMS"></uses-permission>

    <uses-permission android:name="android.permission.CAMERA"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-feature android:name="android.hardware.camera.autofocus" />
   <uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.front" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Demo"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".StudentDemo"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.StudentDemo" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:08:08.483

尝试：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.putExtra("sms_body", "I Send you pic.");
sendIntent.putExtra("address", phoneNumber);
sendIntent.setType("image/png");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(dataFile));
sendIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(Intent.createChooser(sendIntent, "Send")); 
```

每当从与 UI 相关的上下文（如服务或广播接收器）之外启动 Activity 时，您需要将 Activity 附加`FLAG_ACTIVITY_NEW_TASK`到意图。

# bash - 与bash中的变量进行浮点比较

> ID：15224581
> 
> 赞同：23
> 
> 时间：2013-03-05T13:06:43.000
> 
> 标签：bash, if-statement, floating-point

我想将浮点变量与整数进行比较。我知道这不是最好的 bash，但我的整个脚本已经用 bash 编写了。$number 可以是任何整数。如果它低于或等于 50，我想要 output1，对于所有其他人，我想要一个带有另一个变量 k 的输出。这是我到目前为止所拥有的：

```
number=43
test=$(echo "scale=2; $number/50" | bc -l)
echo "$test"
for k in {1..5}
do
    if ["$test" -le 1]
    then echo "output"

    elif ["$test" -gt $k]
    then echo "output$k"
    fi
done 
```

如果我尝试使用 test=0.43，则第一个循环甚至不起作用。我认为它与整数和浮点比较有关，但不能使其工作。

有什么我想念的吗？

PS：这`[0.43: command not found`是终端输出的。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-05T13:17:49.003

Bash 无法处理浮点数。管道`bc`改为：

```
if [ $(echo " $test > $k" | bc) -eq 1 ] 
```

您看到的错误是因为`test`命令（即`[`）前后需要空格

使用起来会更好，`(( ... ))`因为您可以像这样比较数字：

```
if (( $(bc <<< "$test > $k") )) 
```

循环中的部分应如下所示：

```
if (( $(bc <<< "$test <= 1") ))
then
    echo "output"
elif (( $(bc <<< "$test > $k") ))
then
    echo "output$k"
fi 
```

如果关系为假，则关系表达式计算为 0，如果关系为真，则计算为 1 [[来源](http://www.gnu.org/software/bc/manual/html_mono/bc.html#SEC11)]。但是请注意，这是 的行为`GNU bc`，并且不`POSIX`符合要求。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-17T14:42:48.053

有点老问题，但我认为它还有一个额外的答案。

虽然通过管道连接到更高精度的计算器（bc 或 dc）是可行的，但它是以分叉和额外过程为代价的，因为这些计算器不是内置于 bash 中的。但是，内置的一件事是`printf`. 因此，如果您可以处理您的数字在特定的小数位数内，您可以使用如下函数“伪造”浮点比较：

```
#!/usr/bin/env bash

function [[[ () {
  local LANG=C lhs rhs
  printf -v lhs '%07.3f' "$1"; lhs=${lhs/./}
  printf -v rhs '%07.3f' "$3"; rhs=${rhs/./}
  case "$2" in
    -lt) return $(( ! ( 10#$lhs < 10#$rhs ) )) ;;
    -le) return $(( ! ( 10#$lhs <= 10#$rhs ) )) ;;
    -eq) return $(( ! ( 10#$lhs == 10#$rhs ) )) ;;
    -ge) return $(( ! ( 10#$lhs >= 10#$rhs ) )) ;;
    -gt) return $(( ! ( 10#$lhs > 10#$rhs ) )) ;;
  esac
}

number=${1:-43}
test=$(dc -e "2k $number 50 / p")
echo "$test"

for k in {1..5}; do
    if [[[ "$test" -le 1 ]]]; then
      echo "output"
    elif [[[ "$test" -gt "$k" ]]]; then
      echo "output $k"
    fi
done 
```

这里有几件事要考虑。

*   我把这个函数命名为`[[[`可爱。你可以随意命名它。`ntest`或者`mynumericcomparison`甚至`[[[`。
*   `printf`是 bash 中的一个内部函数，因此尽管它在您的路径上，但它不需要分叉。
*   就目前而言，该功能支持最多 999.999 的数字。如果您需要更高的数字（或更精确），请调整`printf`格式。
*   语句中每个变量的`10#`开头`case`是强制比较在基数 10 处进行，因为零填充的数字可能会被解释为八进制。

另见： http: [//mywiki.wooledge.org/BashFAQ/022](http://mywiki.wooledge.org/BashFAQ/022)

# biztalk - Biztalk 2010：过滤器表达式上指定的属性不存在

> ID：15224582
> 
> 赞同：0
> 
> 时间：2013-03-05T13:06:47.810
> 
> 标签：biztalk, biztalk-2010

在我部署了一些程序集的新版本并尝试启动我的发送端口后，我不断收到此错误：

> 无法登记发送端口“”。过滤器表达式上指定的属性不存在。

是什么导致了该错误，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:44:26.227

在此 BizTalk 应用程序的架构下查找，您应该会看到您的属性架构，假设筛选器基于自定义属性。

检查您是否已在 Visual Studio 项目属性中设置应用程序，否则程序集将部署到默认应用程序 BizTalk Application 1。

失败，您可能只是缺少 BizTalk 应用程序中的引用。

# gwt - BrowserChannelServer IndexSizeError

> ID：15224583
> 
> 赞同：0
> 
> 时间：2013-03-05T13:06:49.270
> 
> 标签：gwt

当我在开发模式下启动我的 GWT 项目时，会出现以下错误：

> 13:44:59.875 [错误] [webapp] 未捕获的异常已转义
> 
> com.google.gwt.core.client.JavaScriptException: (IndexSizeError) @com.google.gwt.core.client.impl.Impl::apply(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object ;)([JavaScript object(955), JavaScript object(954), JavaScript object(1007)]): 索引或大小为负数或大于 com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript( BrowserChannelServer.java:249) 在 com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136) 在 com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571) 在 com .google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279) 在 com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91) 在 com.google.gwt.core.client .impl.Impl.apply(Impl.java) 在 com.google.gwt.core.client。impl.Impl.entry0(Impl.java:242) at sun.reflect.GeneratedMethodAccessor25.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source)在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103) 在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev .shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172) 在 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer .java:547) 在 com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) 在 java.lang.Thread.run(Unknown Source)242) 在 sun.reflect.GeneratedMethodAccessor25.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.google.gwt.dev.shell .MethodAdaptor.invoke(MethodAdaptor.java:103) 在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java :172) com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) com.google。 gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source)242) 在 sun.reflect.GeneratedMethodAccessor25.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.google.gwt.dev.shell .MethodAdaptor.invoke(MethodAdaptor.java:103) 在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java :172) com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) com.google。 gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source)在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java: 103) 在 com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172) 在 com.google.gwt 的 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) .dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) 在 com.google.gwt.dev.shell.BrowserChannelServer.run （BrowserChannelServer.java:364）在 java.lang.Thread.run（未知来源）在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java: 103) 在 com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172) 在 com.google.gwt 的 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) .dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) 在 com.google.gwt.dev.shell.BrowserChannelServer.run （BrowserChannelServer.java:364）在 java.lang.Thread.run（未知来源）在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103) 调用（未知来源）。 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 上 com.google.gwt.dev.shell 上的 google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)。 BrowserChannelServer.processConnection(BrowserChannelServer.java:547) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source)在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103) 调用（未知来源）。 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 上 com.google.gwt.dev.shell 上的 google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)。 BrowserChannelServer.processConnection(BrowserChannelServer.java:547) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source)在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) 在 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 调用(OophmSessionHandler.java:172)在 com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) 在 java.lang.Thread.run(Unknown Source)在 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) 调用(OophmSessionHandler.java:172)在 com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364) 在 java.lang.Thread.run(Unknown Source)

我想不通，它来自哪里。每次出现时，我从网络服务器获得的图像都不会显示。有时它不会出现，图像会按应有的方式显示。你能弄清楚，这个错误来自哪里？

# c++ - 将数组连接到 Qt 中的信号槽机制

> ID：15224585
> 
> 赞同：0
> 
> 时间：2013-03-05T13:06:49.567
> 
> 标签：c++, arrays, qt, signals-slots

我创建了一个`QSlider *x_slider[8]`数组，现在我想创建一个连接到这样的插槽，

```
connect(x_slider[0], SIGNAL(valueChanged(int)), this, SLOT(slider_x(int))); 
```

但是因为我不想为`x_slider`数组中的每个滑块创建一个插槽，所以在这种情况下`int`接收到的`slider_x`插槽应该是 0。

我该怎么做？，在我提供的代码中，它接收`int`来自`ValueChanged`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:15:22.917

您可以从您的阵列连接每个 QSlider，然后在您的插槽中，`slider_x`您可以找出哪个滑块通过`sender()`函数发送信号。[http://apidocs.meego.com/1.2/qt4/qobject.html#sender](http://apidocs.meego.com/1.2/qt4/qobject.html#sender)

只需遍历您的数组，并且由 sender() 返回的指向对象的指针等于数组中的 QSlider 将意味着您找到了数组的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:32:07.233

使用`QSignalMapper`：

```
auto sigMap = new QSignalMapper( this );
for ( int i = 0; i < 8; ++i ) {
    x_slider[i] = new QSlider( this );
    connect( x_slider[i], SIGNAL( valueChanged( int ) ),
             sigMap, SLOT( map() ) );

    sigMap->setMapping( x_slider[i], i );
}
connect( sigMap, SIGNAL( mapped( int ) ),
         this, SLOT( slider_x( int ) ) );

void MyClass::slider_x( int i )
{
    int value = x_slider[i]->value();
    ...
} 
```

# scroll - 使用快捷键切换滚动方向

> ID：15224587
> 
> 赞同：0
> 
> 时间：2013-03-05T13:06:53.020
> 
> 标签：scroll, autohotkey

我目前有一个 AHK 脚本，可以切换鼠标的滚动方向。

```
WheelUp::
Send {WheelDown}
Return

WheelDown::
Send {WheelUp}
Return 
```

我的同事不喜欢这样，有时会使用我的电脑。

如何分配快捷键来切换滚动方向？

**我想要什么：**
当我按`win`+`z`时滚动方向改变，当我再次按`win`+时`z`，滚动方向改变回来。

所以基本上可以在按下`win`+时改变滚动方向`z`

AHK可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:21:05.743

是的，您可以修改热键以获得更多代码。
您将不得不使用 if 语句和变量。

例子：

```
global direction := 1

^s::    ; ctrl + s will launch this code you can modify this to win + z
    direction := Mod( direction + 1 , 2 ) ; alternates values of direction between 1 and 0
return

WheelUp::
    if(direction)
        Send {WheelDown}
    else
        Send {WheelUp}
Return

; and reverse for wheeldown 
```

# windows - 是否可以将数据与正在运行的进程相关联？

> ID：15224589
> 
> 赞同：0
> 
> 时间：2013-03-05T13:07:04.987
> 
> 标签：windows, winapi, process

正如标题所说，我想将随机数据位（ULONG）与本地机器上正在运行的进程相关联。我希望该数据与它关联的进程保持一致，而不是与读取和写入数据的进程保持一致。这在Win32中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:21:35.107

是的，但这可能很棘手。您不能访问另一个进程的任意内存地址，也不能指望共享内存，因为您想对任意进程执行此操作。

## 棘手的方法

您可以做的是在要*装饰的进程中创建一个***窗口**（具有特殊且已知的名称） 。有关没有 Windows 的替代解决方案，请参阅帖子末尾。

 **   首先，您必须使用`OpenProcess`.
*   在另一个进程中分配内存`VirtualAllocEx`以保存一个短方法，该方法将创建一个具有特殊已知名称的（隐藏）窗口。
*   使用 .从您自己的代码中复制该函数`WriteProcessMemory`。
*   执行它`CreateRemoteThread`。

现在您需要一种方法来识别并从创建该内存的进程之外的另一个进程读回该内存。为此，您只需找到具有该已知名称的窗口，并且您拥有一小块数据的*持有者。*

请注意，此技术可用于在另一个进程中注入代码，因此某些防病毒软件可能会对此发出警告。

**最后说明**
如果地址空间随机化被禁用，您可能不需要在进程内存中*注入*`CreateRemoteThread`代码，您可以使用具有相同参数的 Windows 内核函数的地址进行调用（例如`LoadLibrary`）。您不能使用本机应用程序（未链接到 kernel32.dll）来执行此操作。 除非您对您的进程具有调试权限（使用）
，否则您无法注入系统进程。`AdjustTokenPrivileges`

作为*假窗口*的替代方案，您可以使用局部变量、TLS 或用作数据块的堆栈条目创建一个挂起的线程。要找到这个线程，你必须给它一个名字，例如，[this](http://msdn.microsoft.com/en-us/library/xcb2z8hs.aspx)（但它很少适用）。

## 天真的方式

一个穷人的解决方案（但可能更容易实现，并且以某种方式更健壮）可以使用[ADS](https://web.archive.org/web/20190501042433/https://support.microsoft.com/en-us/help/105763/how-to-use-ntfs-alternate-data-streams)为您要监控的每个进程隐藏一个小数据文件（当然，与其图像关联的 ADS 然后它不适用于services 和`rundll`'ed 进程，除非你让它变得更复杂）。

*   迭代所有进程，并为每个进程创建一个具有已知名称（和进程 ID）的 ADS。
*   在里面你必须存储系统启动时间和你需要的所有数据。

要回读该信息：

*   迭代所有进程并检查该 ADS，读取它并比较系统启动时间（如果它们不匹配，则意味着您找到了一个*寡妇*ADS，应该将其删除。

当然，您必须照顾这些*寡妇*，因此您可能需要定期检查她们。当然，您可以避免将所有这些小数据块存储到众所周知的位置，您的“读者”可能每次都检查它们，删除不再与正在运行的进程关联的文件。*

# mysql - 匹配，按相关性排序

> ID：15224597
> 
> 赞同：0
> 
> 时间：2013-03-05T13:07:42.947
> 
> 标签：mysql, full-text-search

我的查询

```
$query = selectQuery('SELECT * FROM page_info WHERE MATCH(content) 
           AGAINST("reactie klanten" WITH QUERY EXPANSION)'); 
```

如何按相关性排序？我回到了大约 10 行，但实际上包含“reactie”和“klanten”这两个词的行在中间的某个地方。其余的结果在某种程度上与单词相关：S

[MySQL 文档关于 'WITH QUERY EXPANSION'](http://dev.mysql.com/doc/refman/5.0/en/fulltext-query-expansion.html)

**编辑**
通过查询更改为：

```
SELECT *, MATCH(content) AGAINST("reactie klanten") AS relevance FROM page_info WHERE MATCH(content) AGAINST("reactie klanten" WITH QUERY EXPANSION) ORDER BY relevance DESC 
```

这似乎很有希望，因为现在该领域位居榜首。

其他人的关系如何？

例子：

```
 $text  = This page is being tested by our tester 
```

$text 与 有什么关系`reactie klanten`？

# ruby-on-rails - 登录用户（Ruby on Rails 教程第 8 章）

> ID：15224598
> 
> 赞同：1
> 
> 时间：2013-03-05T13:07:46.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

为什么需要中间方法？在我看来，这只是连接第一种和第三种方法的中间步骤。

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:20:56.137

**与当前在线**`current_user`的用户一起设置的是setter方法或helper方法。这用于标识当前用户。**`devise gem`**

 **因此，每当您需要为您的应用程序查找在线用户时，您只需使用以下代码 -

```
if current_user
#Do something important   
else
#You do not have enough privileges. Please login.
#Your offline stuff
end 
```**

# android - 从 Android App 调用 Web 服务返回 null 对象

> ID：15224600
> 
> 赞同：0
> 
> 时间：2013-03-05T13:07:51.717
> 
> 标签：android, null, wsdl, ksoap, propertyinfo

我正在编写一个使用 KSOAP 与 Web 服务通信的 Android 应用程序。Web 服务和 Android 应用程序之间的连接正在工作，因为我可以调用 Web 服务并获取返回值 (hello)。但是，如果我尝试通过 .addProperty 将应用程序中的名称赋予 Web 服务，则 Web 服务将返回一个空对象。

这是我的代码：

主要活动：

```
private final String NAMESPACE_Local = "http://test.com/";  
    private final String URL_Local = "http://168.185.226.21:7001/myTest/myTestWebServiceService";
  private final String SOAP_ACTION_Local = "Hello_Action_Extend";
   private final String METHOD_NAME_Local = "hello_extend";

    public void LocalServer(View view)
    {
        TextView text = (TextView) findViewById(R.id.update_text);

        SoapObject request = new SoapObject(NAMESPACE_Local, METHOD_NAME_Local);
        request.addProperty("name", "Christian");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_Local);

        try {
            androidHttpTransport.call(SOAP_ACTION_Local, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());

            text.setText(response.toString());

        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(this,"Device or service offline",Toast.LENGTH_LONG).show();
        }
    } 
```

网络服务器：

```
package com.test;

import javax.jws.*;

@WebService
public class myTestWebService {

    @WebMethod(action="Hello_Action") //that method works
    public String hello() {
        return "hello";
    }

    @WebMethod(action="Hello_Action_Extend")
    public String hello_extend(String name) //that works also, but it is giving back "hello null"
    {
        return "hello "+name;
    }
} 
```

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:01:16.427

尝试更换：

```
request.addProperty("name", "Christian"); 
```

为了：

```
request.addProperty("name",ElementType.STRING_CLASS, "Christian"); 
```

以及对以下内容的回应：

```
SoapObject reponse=(SoapObject)envelope.getResponse();
response.getProperty("name"); 
```

[API 肥皂对象](http://ksoap.objectweb.org/software/documentation/api/org/ksoap/SoapObject.html#getPropertyInfo%28int,%20org.kobjects.serialization.PropertyInfo%29)

# sql-server - 如何使用 EF5 Code First API 建立 FK 关系，以便在子级中存在行时不允许删除父级？

> ID：15224612
> 
> 赞同：0
> 
> 时间：2013-03-05T13:08:15.687
> 
> 标签：sql-server, entity-framework, entity-framework-4.1, entity-framework-5

我的数据库中存在以下表。我正在尝试设置外键，但我不确定我是否正确执行此操作。我所拥有的是表 [Application] 和表 [TestAccount] 之间的关系，其中有例如三个不同的 [Application] 行，每个行都有零个或多个 [TestAccount] 行。如果已经存在 [TestAccount] 行，我不希望能够删除 [Application] 行。

这是我的 SQL

```
CREATE TABLE [dbo].[Application] (
    [ApplicationId]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (50) NOT NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([ApplicationId] ASC)
);

CREATE TABLE [dbo].[TestAccount] (
    [TestAccountId]   INT            IDENTITY (1, 1) NOT NULL,
    [ApplicationId] INT,
    [Name] NVARCHAR (50) NOT NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.TestAccount] PRIMARY KEY CLUSTERED ([TestAccountId] ASC),
    CONSTRAINT fk_AccountApplication FOREIGN KEY (ApplicationId) REFERENCES Application(ApplicationId)
); 
```

我正在尝试为 EF 配置它，这就是我目前所拥有的：

```
 modelBuilder.Entity<Application>()
      HasKey(a => a.ApplicationId);
      Property(a => a.ApplicationId).
      HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity).
      IsRequired();

  modelBuilder.Entity<Application>().
      Property(a => a.Name).
      IsRequired().
      HasMaxLength(50);

  modelBuilder.Entity<TestAccount>()
      HasKey(a => a.TestAccountId);
      Property(a => a.TestAccountId).
      HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity).
      IsRequired();

  modelBuilder.Entity<TestAccount>().
      Property(t => t.Name).
      IsRequired(); 
```

有人可以告诉我我是否正确地使用数据库中的外键来解决这个问题，并告诉我如何使用流畅的 API 配置外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:13:39.663

假设您的模型看起来像这样：

```
public class Application 
{
    public int ApplicationId { get; set; }

    public string Name { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
}

public class TestAccount
{
    public int TestAccountId { get; set; }
    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual Application Application { get; set; }
} 
```

通过 fluent 将您的 FK 映射到您的导航属性将如下所示：

```
 modelBuilder.Entity<Application>()
        .HasMany(a => a.TestAccounts)
        .WithRequired(t => t.Application)
        .WillCascadeOnDelete(false); 
```

# asp.net-mvc-3 - 停止代理服务器将 HTTP POST 转换为 HTTP GET

> ID：15224616
> 
> 赞同：0
> 
> 时间：2013-03-05T13:08:21.490
> 
> 标签：asp.net-mvc-3, http-headers, node-http-proxy

我有一个 Web 应用程序，它具有仪表板功能。许多不同的公司在许多不同的环境中使用该应用程序，所有浏览器。

有一段 javascript 每 60 秒刷新一次仪表板，通过一个 http POST 到一个返回 JSON 的 url。

对于一位用户（并且仅根据我的日志，一位用户）每 60 秒从该 URL 生成以下 .NET 错误消息：

```
 System.InvalidOperationException: This request has been blocked because sensitive information     could be disclosed to third party web sites when this is used in a GET request. To allow GET    requests, set JsonRequestBehavior to AllowGet.
   at System.Web.Mvc.JsonResult.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

对于所有其他用户，从来没有问题。

我知道这个用户在代理的网络上（政府）。这个用户是一个新用户——也就是说，我们在这个网络上从来没有其他用户。

以上使我相信他们的代理出于某种原因正在修改请求（尝试带宽优化？），默默地将 POST 转换为 GET。出于安全原因，我的 Asp.NET MVC 应用程序（正确地）拒绝接受请求。

当然，我不太可能更改他们的代理设置。

我尝试将以下内容添加到操作中：

```
[OutputCache(Duration = 0, Location = OutputCacheLocation.None, NoStore=true)] 
```

也：

```
Response.Cache.SetNoTransforms(); 
```

但问题依然存在。

我是否可以设置任何其他 HTTP 标头来指示代理停止修改内容？使这些代理行为的任何其他方式？或者浏览器中是否有任何可能这样做的东西？

更新：写这篇文章后，来自同一家公司的另外 2 个不同的用户现在正在生成这些错误，这增加了我的代理理论的权重。

# google-closure-compiler - 将参数注释为函数，接受多种类型作为闭包编译器的参数

> ID：15224619
> 
> 赞同：0
> 
> 时间：2013-03-05T13:08:31.027
> 
> 标签：google-closure-compiler

我想将方法​​调用的参数注释为接受两个参数的函数，第一个是 Error 或 null，第二个是对象或对象数组。但是我似乎无法找出正确的注释 - 编译器总是给出错误类型的注释。

例子：

```
 /**
   * Allows to predefine the callback for a named 'run' method. This is
   * useful mostly for application code that has only one consumer for any
   * particular named request.
   *
   * @param {!string} run_name The name of the run to register default callback
   * for.
   * @param {function(Error, (Array.<Object>|Object)): undefined} callback The callback
   * function to execute for the named request if no other callback is provided
   * with the request.
   */
  _.registerRunCallback = function(run_name, callback) {
    this.internalImplementation(run_name, callback);
  }; 
```

我不确定这是否真的可行，但我发现它比使用未知类型更好。

所以我的问题是我该怎么做。

# c# - 如何按不同的值对字符串进行排序

> ID：15224622
> 
> 赞同：1
> 
> 时间：2013-03-05T13:08:44.130
> 
> 标签：c#, sorting

我试过寻找一个现有的问题，但不知道如何表达这个问题，这在任何地方都没有检索到任何结果:(

无论如何，我有一类具有不同属性的“订单项”。这些订单商品用于服装，因此它们将具有尺寸（字符串）。

因为我对这类事情有强迫症，所以我希望**元素不是按字母数字值的大小排序，而是按自定义顺序的大小排序。**

如果可能的话，我也希望不要对这个自定义订单进行硬编码。

分解它，如果我有一个这些订单项目的列表，每个项目都有一个尺寸，如下所示：

```
2XL
S
5XL
M 
```

使用字母数字排序，它将按以下顺序排列：

```
2XL
5XL
M
S 
```

但我想将此列表排序为以下顺序（***从最小到最大***）：

```
S
M
2XL
5XL 
```

我能想到的唯一方法是拥有一个硬编码的大小数组并按它们的索引排序，然后当我需要获取大小值时，我可以获取大小顺序数组 [i] 值。但是，正如我所说，我希望这个订单不要被硬编码。

我希望订单是动态的原因是订单项目是在运行时从硬盘上的文件加载的，并且还由用户在运行时添加/编辑/删除，它们可能包含我没有的大小t 硬编码，例如，我可以从 10XS 一直硬编码到 10XL，但如果有人添加尺寸“110cm”（又名 Medium），它会按照我不希望的顺序出现在某个地方，假设程序不会崩溃和烧毁。

我无法完全理解如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:10:59.213

您可以直接使用`OrderByDescending`+ `ThenByDescending`：

```
sizes.OrderByDescending(s => s == "S")
     .ThenByDescending( s => s == "M")
     .ThenByDescending( s => s == "2XL")
     .ThenByDescending( s => s == "5XL")
     .ThenBy(s => s); 
```

我使用是`...Descending`因为 a`true`类似于 1 而 a`false`是 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T13:23:15.873

此外，您可以创建一个`Dictionary<int, string>`并添加`Key` *如下* `Ordering order`。在 Keys 之间留下一些间隙以适应未来的新尺寸。例如：如果您想添加`L (Large)`，您可以添加一个新项目`{15, "L"}`而不破坏当前订单。

```
 Dictionary<int, string> mySizes = new Dictionary<int, string> { 
                                       { 20, "2XL" }, { 1, "S" },
                                       { 30, "5XL" }, { 10, "M" }
                                    };

 var sizes = mySizes.OrderBy(s => s.Key)
                    .Select(s => new {Size =  s.Value})
                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T13:10:34.160

我会实施[`IComparer<string>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)到你自己的`TShirtSizeComparer`. 您可能需要执行一些正则表达式才能获得所需的值。

`IComparer<T>`是任何排序机制的绝佳接口。.NET 框架中的许多内置内容都使用它。它使排序*可重用*。

我真的建议将大小字符串解析为一个单独的对象，该对象具有大小编号和大小大小，然后用它进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T13:10:05.473

您需要`IComparer`在您的类上实现接口。您可以谷歌如何做到这一点，因为那里有很多例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:23:23.297

您必须为此制作一个简单的解析器。您可以在字符串中搜索 XS XL 和 cm" 等元素，然后过滤掉您的单位。然后您可以获得作为值的整数。如果您确实可以使用 IComparer 对象，但它没有没有那么大的优势。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T14:31:30.670

我会用 Size 制作一个类，将来您可能需要为此添加更多功能。我添加了尺寸的全名，但您也可以添加宽度和长度等变量，以及英寸或厘米的转换器。

```
private void LoadSizes()
{
    List<Size> sizes = new List<Size>();
    sizes.Add(new Size("2X-Large", "2XL", 3));
    sizes.Add(new Size("Small", "S", 1));
    sizes.Add(new Size("5X-Large", "5XL", 4));
    sizes.Add(new Size("Medium", "M", 2));

    List<string> sizesShortNameOrder = sizes.OrderBy(s => s.Order).Select(s => s.ShortName).ToList();
    //If you want to use the size class:
    //List<Size> sizesOrder = sizes.OrderBy(s => s.Order).ToList();
}

public class Size
{
    private string _name;
    private string _shortName;
    private int _order;

    public string Name
    {
        get { return _name; }
    }

    public string ShortName
    {
        get { return _shortName; }
    }

    public int Order
    {
        get { return _order; }
    }

    public Size(string name, string shortName, int order)
    {
        _name = name;
        _shortName = shortName;
        _order = order;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-06T13:44:49.983

我`TShirtSizeComparer`用基类实现`Comparer<object>`。当然，您必须将其调整为可用的大小和对象：

```
public class TShirtSizeComparer : Comparer<object>
{
    // Compares TShirtSizes and orders them by size
    public override int Compare(object x, object y)
    {
        var _sizesInOrder = new List<string> { "None", "XS", "S", "M", "L", "XL", "XXL", "XXXL", "110 cl", "120 cl", "130 cl", "140 cl", "150 cl" };
        var indexX = -9999;
        var indexY = -9999;
        if (x is TShirt)
        {
            indexX = _sizesInOrder.IndexOf(((TShirt)x).Size);
            indexY = _sizesInOrder.IndexOf(((TShirt)y).Size);
        }
        else if (x is TShirtListViewModel)
        {
            indexX = _sizesInOrder.IndexOf(((TShirtListViewModel)x).Size);
            indexY = _sizesInOrder.IndexOf(((TShirtListViewModel)y).Size);
        }
        else if (x is MySelectItem)
        {
            indexX = _sizesInOrder.IndexOf(((MySelectItem)x).Value);
            indexY = _sizesInOrder.IndexOf(((MySelectItem)y).Value);
        }
        if (indexX > -1 && indexY > -1)
        {
            return indexX.CompareTo(indexY);
        }
        else if (indexX > -1)
        {
            return -1;
        }
        else if (indexY > -1)
        {
            return 1;
        }
        else
        {
            return 0;
        }
    }
} 
```

要使用它，您只需拥有一个 List 或任何您的对象并执行以下操作：

```
tshirtList.Sort(new TShirtSizeComparer()); 
```

您“硬编码”的顺序优先，其余的放在后面。

我确信它可以做得更聪明，更通用，以避免对所有内容进行硬编码。例如，您可以查找以“S”结尾的尺寸，然后检查有多少 X（例如 XXS）或 X 之前的数字（例如 2XS）并按此排序，然后重复“L”以及其他“主要尺寸” .

# acs - ACS - 绕过用户重定向到 IdP？

> ID：15224631
> 
> 赞同：2
> 
> 时间：2013-03-05T13:09:06.100
> 
> 标签：acs

我最近才开始研究 ACS、AAL、WAAD，我想避免将用户重定向到他们 IDP 的登录页面。我想将我的用户保留在我的站点中，并为他们提供一个下拉列表以选择他们希望与谁进行身份验证以及请求用户名和密码的区域，然后通过代码获取令牌。这可能吗？

我一直在审查一些示例应用程序并制作了一个快速模型，但似乎无法让事情正常工作，例如

```
 _authContext = new AuthenticationContext("https://littledeadbunny.accesscontrol.windows.net");

        string enteredEmailDomain = UserNameTextbox.Text.Substring(UserNameTextbox.Text.IndexOf('@') + 1);

        IList<IdentityProviderDescriptor> idpdList = _authContext.GetProviders("http://littledeadbunny.com/NonInteractive");
        foreach (IdentityProviderDescriptor idpd in idpdList)
        {
            if (String.Compare(ServiceRealmDropDownList.SelectedValue, idpd.Name, StringComparison.OrdinalIgnoreCase) == 0)
            {
                Credential credential;
                credential = new UsernamePasswordCredential(enteredEmailDomain, UserNameTextbox.Text, PasswordTextbox.Text);

                _assertionCredential = _authContext.AcquireToken("http://littledeadbunny.com/NonInteractive", idpd, credential);

                return;
            }
        } 
```

使用上面的代码，当我尝试使用 Windows Azure Active Directory 用户（管理员）时，我收到错误“根级别的数据无效。第 1 行，位置 1。” 我尝试获取令牌的地方。

当我使用 Google 时，我收到错误“0x8010000C：没有身份提供者与请求的协议匹配”。

如果有工作样本？如果我做的事情明显错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:17:42.537

被动身份提供者不支持此功能。Google、Facebook 等 IdP 不希望其他人为他们收集凭据，因为这会导致安全问题和可能的网络钓鱼攻击。他们也不支持它，因为他们需要能够显示权限对话框（询问用户是否要向您发布数据的屏幕），如果没有浏览器重定向到他们，他们就无法做到这一点。此外，谷歌特别支持双因素身份验证，这是您无法复制的，并且通常收集凭据会围绕其他 UI 问题（例如不正确或忘记密码）打开整罐蠕虫病毒。

这通常也是一种糟糕的用户体验，因为您的用户很可能已经登录到 Google 并在那里拥有 cookie。如果是这样，并且他们已经同意您的应用程序，他们只会被默默地重定向回您。在您的场景中，即使用户已经登录，他们仍然必须提供用户名/密码。

进行此类登录的正确方法是在您的应用程序中呈现浏览器控件，以允许用户在其 IdP 上登录，这正是 AAL 提供的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:59:50.630

我有同样的错误，执行 powerscript 解决了该错误

> PS C:\windows\system32> $replyUrl = New-MsolServicePrincipalAddresses -Address [https://mydomain.accesscontrol.windows.net/](https://mydomain.accesscontrol.windows.net/)
> 
> PS C:\windows\system32> New-MsolServicePrincipal -ServicePrincipalNames @(" [https://mydomain.accesscontrol.windows.net/](https://mydomain.accesscontrol.windows.net/) ") -DisplayName "MyDomain Namespace" -Addresses $replyUrl

但无论如何我都遇到了 403 权限错误

如果您进一步了解，我想知道如何:)

# java - 用于长轮询的 JavaEE 6 Servlet

> ID：15224633
> 
> 赞同：0
> 
> 时间：2013-03-05T13:09:13.913
> 
> 标签：java, ajax, glassfish, comet

我尝试在我的 Glassfish 服务器上使用[本教程](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/async-servlet/async-servlets.html)创建用于长轮询的异步 servlet ，但是效果不佳，POST 请求太长（超时）并且 GET 有时返回无效响应并显示“解析错误XML 文件”萤火虫消息。有人可以提供简单的 async-servlet 来处理长轮询请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:02:17.417

如果要实现长轮询解决方案，最好不要使用基于 servlet 的方法。[对于此类应用， Netty](http://netty.io/)是非常好的选择。只需在引导程序中使用 child.keepAlive 选项构建一个简单的 HTTP 实例，保持为真（服务器不会关闭客户端连接）。这样您就不需要处理 servlet 容器超时和连接处理的复杂性。Netty 是一个异步 IO 框架，应该为您提供出色的性能矩阵。

# android - 如何在曲线块中显示 TextView？

> ID：15224634
> 
> 赞同：2
> 
> 时间：2013-03-05T13:09:14.097
> 
> 标签：android, android-layout

这就是我想在以下位置显示我的文本的方式`TextView`： ![在此处输入图像描述](../Images/2b14e77724778e1c761549d0b4d0925e.png)

如何设置我的特殊捆绑包`TextView`？

# ios - 初始化视图（mapkit 示例）

> ID：15224641
> 
> 赞同：0
> 
> 时间：2013-03-05T13:09:33.457
> 
> 标签：ios, uiview, mapkit

我有一个小问题，说明我对 Obj C 缺乏了解。

我制作了一个带有根菜单和连接到另一个视图（地图）的按钮的小应用程序。我的问题是加载时在地图中设置默认位置。在我的 MapViewController.m 代码中，我包含了该函数：

```
 - (void)viewWillAppear:(BOOL)animated {
    CLLocationCoordinate2D zoomLocation;
    zoomLocation.longitude= desired_longitude;
    zoomLocation.latitude = desired_latitude;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 4*METERS_PER_MILE, 4*METERS_PER_MILE);

    [self.mapOutlet setRegion:viewRegion animated:YES];} 
```

现在，当我第一次运行应用程序并按下根菜单中的地图按钮时，地图位于大西洋某处的中心。但是，如果我导航回根菜单并再次按下地图按钮，地图就会在所需位置居中！我尝试将此代码也放入 viewDidLoad 方法中，结果相同。

有人可以解释我如何解决这个问题，更重要的是，它是如何工作的？出现新视图时会调用哪些方法？例如，我觉得很奇怪，只有在实现文件中包含上述方法，这个方法在我没有调用的情况下执行（目前只是在第二次导航到地图视图之后，但仍然如此）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:20:45.803

`-(void)viewWillAppear:(BOOL)animated`是从 继承的方法`UIViewController`。每次您的视图即将出现时都会调用它。这就是为什么代码在没有你调用的情况下执行的原因，它在 iOS 中作为视图和关联控制器实现的一部分被调用。

这是我用来将 MKMapView 设置为内部默认位置的代码`viewWillAppear`：

```
#define kMapDeltaLat 0.586746
#define kMapDeltaLon 0.878906

@interface MapViewController ()
//other properties here
@property bool firstDisplay;
@end

...
- (void)viewWillAppear:(BOOL)animated
{
    if (self.firstDisplay) {
        //zoom in and set the region where we want
        MKCoordinateRegion region;
        MKCoordinateSpan span;
        region.center = self.map.region.center;
        span.latitudeDelta = kMapDeltaLat;
        span.longitudeDelta = kMapDeltaLon;
        region.span = span;
        [self.map setRegion:region animated:NO];
        CLLocationCoordinate2D myLoc = CLLocationCoordinate2DMake(50.245, -1.787);
        [self.map setCenterCoordinate:myLoc animated:YES];
        self.firstDisplay = NO;
    }
} 
```

地图的区域定义了其视图的外观（即放大的程度）。中心坐标定义了地图当前所在的位置。

# node.js - CompoundJS 中的一对多关系

> ID：15224642
> 
> 赞同：5
> 
> 时间：2013-03-05T13:09:35.047
> 
> 标签：node.js, express, railway.js, compoundjs

我是 CompoundJS 的新手，在与 jugglingDB 建立一对多关系时遇到了问题。我使用 MySQL 作为数据库。

我已经设置了两个模型书和作者。

本书有许多作者。

这是我的`schema.js`（db/schema.js）：

```
var Book = describe('Book', function () {
    property('title', String);
    property('isbn', String);
    property('authorId', Number);
    set('restPath', pathTo.books);
});

var Author = describe('Author', function () {
    property('name', String);
    property('authorId', Number);
    set('restPath', pathTo.authors);
}); 
```

我将关系放在模型/Book.js 中。这是我的`Book.js`（模型/Book.js）：

```
module.exports = function (compound, Book) {
  Book.hasMany(compound.models.Author,   {as: 'author',  foreignKey: 'authorId'});
}; 
```

这是我的`Author.js`（模型/Author.js）：

```
module.exports = function (compound, Author) {
 Author.belongsTo(compound.models.Book, {as: 'books', foreignKey: 'authorId'});
}; 
```

问题是我无法创建这些关系。当我检查表时，表中没有设置外键。

我从模型 Book.js 和 Author.js 中删除关系并将关系放入 schema.js 本身

之后 schema.js 看起来像这样：

```
var Book = describe('Book', function () {
    property('title', String);
    property('isbn', String);
    property('authorId', Number);
    set('restPath', pathTo.books);
});

var Author = describe('Author', function () {
    property('name', String);
    property('authorId', Number);
    set('restPath', pathTo.authors);
});

Book.hasMany(Author, {as: 'author',  foreignKey: 'authorId'});
Author.belongsTo(Book, {as: 'books', foreignKey: 'authorId'}); 
```

但结果是一样的。

上面的代码有什么问题吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:58:26.490

~~看来compoundjs的作者并没有实现Model功能。~~现在，您的关系应该在模式文件的末尾定义。

此外，您通过存储定义函数的返回值来覆盖方案对象。删除 var Book = 和 var Author =。

并且，foreignKey 是自动创建的。

架构.js：

```
describe('Book', function () {
    property('title', String);
    property('isbn', String);
    set('restPath', pathTo.books);
});

describe('Author', function () {
    property('name', String);
    set('restPath', pathTo.authors);
});

Book.hasMany(Author, {as: 'author',  foreignKey: 'authorId'});
Author.belongsTo(Book, {as: 'books', foreignKey: 'authorId'}); 
```

更新：

哦。您的问题不是定义关系，而是使用它们。jugglingdb 的文档对此不是很清楚。为了建立关系，您必须使用以下格式：有关更多信息，请参阅 DOCS：[https ://github.com/1602/jugglingdb](https://github.com/1602/jugglingdb)

```
Author.find(id_here_as_string, function(err, author_record){
  book_record = new Book({
    title: 'whatever'
    isbn: 'again whatever here'
  });
  book_record.author(author_record);
  book_record.save()
}) 
```

或者

```
Author.find(id_here_as_string, function(err, author_record){
  book_record = author_record.books.build({
    title: 'whatever'
    isbn: 'again whatever here'
  });
  book_record.save()
}) 
```

# asp.net - 如果我不对 WCF 服务使用 ASP.NET 兼容性，是否可以忽略 Global.asax 文件？

> ID：15224647
> 
> 赞同：1
> 
> 时间：2013-03-05T13:09:57.157
> 
> 标签：asp.net, .net, wcf, iis-7.5, global-asax

ASP.NET 兼容模式的设置对 WCF 服务的 Global.asax 文件触发的事件有影响吗？

此外，如果 ASP.NET 兼容性为 FALSE，是否有可能完全忽略 Global.asax 并且不会触发其中的任何事件？

**PS**：我试图弄清楚为什么当我将服务部署到不同的环境时我的 Global.asax 文件没有被命中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:13:55.717

对于服务的 HTTP 访问，如果启用了 ASP.NET 兼容性，则会触发 Global.asax 事件；如果它被禁用，则服务不会获得 ASP.NET 生命周期模型，即使启用它，通过 TCP 访问也没有关系。

# spring - Spring MVC i18n 休眠验证

> ID：15224648
> 
> 赞同：4
> 
> 时间：2013-03-05T13:09:57.810
> 
> 标签：spring, hibernate, internationalization

如何根据我的语言正确获取消息验证消息，作为回报，我得到的是默认休眠验证器，但不是注释 @NotEmpt 中定义的消息。

```
 @Entity
    public class News {

        @Id
        private Integer idNews;

        @NotEmpty(message = "{news.title.error}")
        @Column
        private String title;
              ........
    } 
```

在我的配置中：

```
<!-- locale change using a cookie -->
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver" >
    <property name="defaultLocale" value="pt" />
</bean>

<!-- Access resource bundles with the specified basename -->
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>/WEB-INF/i18n/messages</value>
            <value>/WEB-INF/i18n/validation</value>
        </list>
    </property>
</bean>

<!-- JSR-303 -->
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource" ref="messageSource"/>
 </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T01:27:49.853

您的问题可能可以像这样解决： [https ://jira.springsource.org/browse/SPR-8658?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.springsource.org/browse/SPR-8658?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

重点是

```
change <mvc:annotation-driven /> to <mvc:annotation-driven validator="validator"/> 
```

希望这可以帮到你

# lua - 在 Lua 中获取列表或表格的一部分

> ID：15224650
> 
> 赞同：13
> 
> 时间：2013-03-05T13:10:04.797
> 
> 标签：lua, lua-table

我知道在 Python 中很容易做到：`someList[1:2]` 但是在 Lua 中你是怎么做到的？该代码给了我一个语法错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T13:53:15.727

```
{unpack(someList, from_index, to_index)} 
```

但是表索引将从 开始`1`，而不是从`from_index`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-05T14:03:04.873

[`unpack`](http://www.lua.org/manual/5.1/manual.html#pdf-unpack)Lua 内置的功能可以为您完成这项工作：

> 返回给定表中的元素。

你也可以使用

```
x, y = someList[1], someList[2] 
```

相同的结果。但是这种方法不能应用于可变长度的[lua-table](/questions/tagged/lua-table "显示标记为“lua-table”的问题")。

## 用法

```
table.unpack (list [, i [, j]]) 
```

返回给定表中的元素。这个函数相当于

```
return list[i], list[i+1], ···, list[j] 
```

默认情况下，`i`是*1*并且`j`是**`#list`**。

显示相同工作的[键盘](http://codepad.org/8zGPjX1g)链接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-11T15:24:00.897

完全等同于[Python](https://repl.it/repls/DeepSufficientMenus)

```
someList = [ 'a', 'b', 'c', 'd' ]
subList = someList[1:2]
print( subList ) 
```

[在 Lua](https://repl.it/repls/WebbedIdleCell)中是

```
someList = { 'a', 'b', 'c' , 'd' }
subList = { unpack( someList, 2, 2 ) }
print( unpack(subList) ) 
```

关键是`unpack`返回*不是表格的*[“多个结果”](https://www.lua.org/pil/5.1.html)，因此要在 Lua 中获取列表（也称为表格），您需要使用and将结果“制表” 。*`{``}`*

 *但是，您不能在 Lua 中打印*表格*，但可以打印*多个结果*，因此要获得有意义的输出，您需要再次解包。

因此，与 Python 使用列表来模拟多个返回不同，Lua*确实*拥有它们。

* * *

**Nb**在 Lua 的更高版本中`unpack`变为`table.unpack`*

# android - 在 Android 手机日历中添加和显示事件

> ID：15224654
> 
> 赞同：0
> 
> 时间：2013-03-05T13:10:08.667
> 
> 标签：android, android-intent, android-calendar

我想添加和显示存储在我的 Android 设备内置日历中的事件。我有几个问题

1.所有手机都内置日历吗？

2.如何在我的应用程序中添加和显示日历事件？

# python - 如何在python中多处理保存图形到文件？

> ID：15224662
> 
> 赞同：0
> 
> 时间：2013-03-05T13:10:33.923
> 
> 标签：python, matplotlib, multiprocessing

我正在尝试将许多 matplotlib 图形保存到 png 磁盘文件，因为 savefig() 很慢，我尝试通过使用多进程模块来提高速度。

这是我的代码：（我的环境是 Windows XP + python_2.6.1 + Matplotlib_1.2.0 + multiprocessing_0.70a1）

```
import multiprocessing
from figure_creation_mudule import fig_list

def savefig_worker(fig, img_type, folder_path):
    file_name = fig.FM_figname 
    fig.savefig(folder_path+"\\"+file_name+"."+img_type, format=img_type)
    return None

if __name__ == '__main__':
    pool = multiprocessing.Pool()
    for fig in fig_list:
        pool.apply_async(savefig_worker, [fig, 'png', 'D:\\img_folder'])
    pool.close()
    pool.join() 
```

并且`fig_list`是从其他模块导入的列表，包含 matplotlib 图形对象。

```
>>> fig_list
[<matplotlib.figure.Figure object at 0x0AAA1670>, <matplotlib.figure.Figure object at 0x0AD2B210>, <matplotlib.figure.Figure object at 0x0B277FD0>] 
```

当我运行代码时，它遇到了问题：

```
Exception in thread Thread-2:
Traceback (most recent call last):
  File "D:\Python\lib\threading.py", line 522, in __bootstrap_inner
    self.run()
  File "D:\Python\lib\threading.py", line 477, in run
    self.__target(*self.__args, **self.__kwargs)
  File "D:\Python\lib\multiprocessing\pool.py", line 225, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

这是什么意思 ？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:40:50.550

我调查了这一点，确实`Pool.apply_async()`会在幕后腌制物体。要确认这一点，请在 REPL 中尝试：

```
>>> from multiprocessing import Pool
>>> def test(obj):
...   print obj
... 
>>> class A():
...   def __getstate__(self):
...     print "pickling"
...     return {}
... 
>>> pool = Pool()
>>> pool.apply_async(test, [A()])
<multiprocessing.pool.ApplyResult object at 0x10bbe82d0>
pickling

>>> <__main__.A instance at 0x10bbe83b0> 
```

为避免这种情况，您需要使用其他东西`multiprocessing.Pool`来完成这项工作。`multiprocessing.Process`能行得通。但是，您应该注意不要产生太多进程，否则您会减慢速度而不是加快速度。

编辑：如果您打算使用`multiprocessing.Pool` [此问题/答案](https://stackoverflow.com/questions/7865430/multiprocessing-pool-picklingerror-cant-pickle-type-thread-lock-attribu)应该会有所帮助

# get - 如何在 sql server 2008 中查找插入记录的日期

> ID：15224674
> 
> 赞同：0
> 
> 时间：2013-03-05T13:11:20.603
> 
> 标签：get

我需要创建新字段并插入记录插入表的字段日期以前存在的插入日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:19:35.550

听起来你需要使用这样的东西

```
INSERT INTO [YourTableName] ([SomeDateColumn]) VALUES (GETDATE()) 
```

# mysql - 具有聚集索引或堆表的表？

> ID：15224675
> 
> 赞同：0
> 
> 时间：2013-03-05T13:11:22.803
> 
> 标签：mysql, foreign-keys, clustered-index, non-clustered-index

如果我有`X`经常更新（`INSERT`并且`DELETE`唯一）的表（堆表），以及`Y`永远不会超过 2000 行的表怎么办。Table`X`有一个外键列，引用了 table 的唯一索引，`Y`关系类型是一对多。但是，每个唯一索引最多只能有 10 个外键，这意味着该表`X`永远不能超过 20000 行。基本上，表`X`可以随时有 0-20000 之间的任意数量的行。说得通？

那么堆表在那里好还是我应该在那里添加一个聚集索引？或者也许有人有更好的解决方案？

# database - 如何在 django-tastypie 的 api.py 中定义外部数据库 url？

> ID：15224679
> 
> 赞同：0
> 
> 时间：2013-03-05T13:11:33.583
> 
> 标签：database, resources, tastypie

我不知道如何在资源中定义我的外部数据库（沙发数据库）的 url。我有这个：

类用户资源（资源）：

```
username=fields.CharField(attribute='username')
firstName=fields.CharField(attribute='firstName')
lastName=fields.CharField(attribute='lastName')
gender=fields.CharField(attribute='gender')
status=fields.IntegerField(attribute='status')
date=fields.DateTimeField(attribute='date')

class Meta:
    object_class = ??
    resource_name = 'users/list'
    always_return_data = True
    authorization= Authorization()

def get_object_list(self, request):
   ...            
       return results

def obj_get_list(self, request=None, **kwargs):
   # Filtering disabled for brevity...
   return self.get_object_list(request) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:36:45.247

```
class UserResource(ModeslResource)
    class Meta:
    queryset = UserModel.objects.all().using('dbname') 
```

# ubuntu - Ubuntu中的终端

> ID：15224681
> 
> 赞同：0
> 
> 时间：2013-03-05T13:11:39.053
> 
> 标签：ubuntu, virtualbox

我刚刚在 virtualbox 中安装了最新版本的 ubuntu。现在我需要终端窗口，但它不在左侧的任务栏上。我怎样才能让它出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:25:29.170

单击左上角的 Ubuntu 图标。

![在此处输入图像描述](../Images/5f92aac098658bf1fe3756f32b48f964.png)

你应该得到一个“搜索”窗口。输入单词“终端”，它应该会出现。

![在此处输入图像描述](../Images/c36baac5cdae1968ce0297c53b30ac89.png)

为了方便以后访问，您可以将其拖到左侧并进入启动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:12:48.397

按 Alt+F2 键入“Gnome-Terminal”。

要在将来获得相同的效果，您可以将其拖到左侧并进入启动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:23:43.437

单击左上角的 Ubuntu 符号，然后在搜索框中输入“术语”。它将自动完成并向您显示终端图标。单击以运行它。然后您可以在任务栏中右键单击它以将其锁定在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:00:04.567

Ctrl + Alt + T。这是默认快捷键。

# testing - then 子句中的 spock 单元测试循环

> ID：15224682
> 
> 赞同：20
> 
> 时间：2013-03-05T13:11:41.227
> 
> 标签：testing, loops, spock, clause

我在 then 子句中有一个循环测试：

```
result.each {
  it.name.contains("foo")
  it.entity.subEntity == "bar"
}

for (String obj : result2) {
  obj.name.contains("foo")
  obj.entity.subEntity == "bar"
} 
```

最近我认识到循环没有真正测试过。无论我是否有 foo 或 bar 或其他任何东西，测试总是绿色 :) 我发现，必须以不同方式测试循环，例如使用“每个”？但只需将 'each' 更改为 'every' 就会引发异常：

```
result.every {
  it.name.contains("foo")
  it.entity.subEntity == "bar"
}

org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Spec expression: 1: expecting '}', found '==' @ line 1, column 61.
   s("foo") it.entity.rootEntity == "bar" } 
```

我应该如何在测试中正确使用循环？我正在使用 spock 0.7-groovy-2.0

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-05T16:22:23.207

要么使用显式断言语句：

```
result.each {
    assert it.name.contains("foo")
    assert it.entity.subEntity == "bar"
} 
```

或内的单个布尔表达式`every`：

```
result.every {
    it.name.contains("foo") && it.entity.subEntity == "bar"
} 
```

# python - 为图提供峰值编号

> ID：15224687
> 
> 赞同：0
> 
> 时间：2013-03-05T13:12:06.403
> 
> 标签：python, matplotlib

我有以下脚本，它读取两列的 ascii 文件并生成一维图。该图有几个峰值。我想要的是给所有的峰值一个数字，比如第一个峰值 1，第二个峰值 2，依此类推。峰出现在 X 轴的等距位置。有人可以告诉我如何在 python 中做到这一点。编码-

```
from pylab import*

# Read the file. 
f2 = open('d012_SAXS-recomb.txt', 'r')

# read the whole file into a single variable, which is a list of every row of the file.
lines = f2.readlines()[2:-100]

f2.close()

# initialize some variable to be lists:
x1 = []

y1 = []

# scan the rows of the file stored in lines, and put the values into some variables:
for line in lines:

    p = line.split()

    x1.append(float(p[0]))

    y1.append(float(p[1]))

x = np.array(x1)

y = np.array(y1)

xlim(0.0,4.0)

# now, plot the data:
#subplot(211)
plt.plot(x, y, color='orange',linewidth=2.0, linestyle='-', label='Arabic - LPP''\nRoman - SPP''\nAsterisk - CHOL')
legend(loc='upper right')

xlabel('q')

ylabel('Intensity')

plt.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:23:01.710

这是一些找到第一个（最高）峰值的示例代码。（顺便说一句，我在这里使用 pylab，所以 plot 和 numpy 模块已经导入）。

```
x = linspace(0,10,501)
y = exp(-0.2*x)*sin(x)
k = y.argmax()
plot(x,y)
text(x[k],y[k],'Peak1') 
```

尝试开始。

# gradle - 使用 gradle 许可证插件的其他文件格式

> ID：15224688
> 
> 赞同：-2
> 
> 时间：2013-03-05T13:12:11.087
> 
> 标签：gradle

使用许可证 gradle 插件，

如果我们想包含其他类型的文件，如 .js、.xsl、.rptdesign 等，还要添加许可证文本，我们需要做什么？请任何人都可以建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:13:52.630

如果您[阅读说明](https://github.com/hierynomus/license-gradle-plugin#recognizing-other-file-types)，他们会说：

> 默认情况下提供大量格式和映射，请参阅[SupportedFormats 链接](https://code.google.com/p/maven-license-plugin/wiki/SupportedFormats)。有时，项目可能需要将未知文件类型的映射添加到现有的注释样式。
> 
> ```
> license {
>   mapping {
>     javascript='JAVADOC_STYLE'
>   }
> }
> // or
> license.mapping 'javascript' 'JAVADOC_STYLE'
> // or directly on the task
> licenseMain.mapping 'javascript' 'JAVADOC_STYLE' 
> ```
> 
> 目前不支持定义新的评论类型，但可以提交一个错误并添加它。

# asp.net - 无法将方法组转换为非委托类型

> ID：15224690
> 
> 赞同：0
> 
> 时间：2013-03-05T13:12:19.007
> 
> 标签：asp.net

```
var deletedItems = tmpData.FindAll(qr => (Int32)qr.YearQuarter < (Int32)useDate.YearQuarter);' 
```

`userdate.yearquarter`是

```
<Extension()>
  Public Function YearQuarter(currentDate As Date) As Integer
    Return Library.Dates.ToYearQuarter(currentDate)
  End Function 
```

我在这里收到一个错误：

```
"< (Int32)useDate.YearQuarter;" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:19:02.707

您没有`YearQuarter`正确调用；你需要做`YearQuarter(DateObject)`。如果没有括号，您将尝试传递`method group`表示函数的 —— 而不是函数的返回值。

# sql - SQL Server：使用计数更新字段的存储过程

> ID：15224694
> 
> 赞同：0
> 
> 时间：2013-03-05T13:12:29.773
> 
> 标签：sql, sql-server, stored-procedures

我以前从未写过存储过程。我将如何使用表 B 中共享密钥的记录计数的结果来更新表 A 中的字段？

表 A 是具有主键“userid”和字段“rentals_count”的“用户”表。表 B 是带有外键“userid”的“rentals”表

对于表 A 中的每个用户（记录），使用表 B 中与该用户匹配的租金总和作为整数更新“rentals_count”字段。

问题包括每晚实际实现和运行存储过程的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:15:04.017

为了`SQL Server`

```
CREATE PROCEDURE UpdateTableA
AS
UPDATE  a
SET     a.rentals_count = b.totalCount
FROM    TableA a
        INNER JOIN
        (
            SELECT  userID, Count(*) totalCount
            FROM    TableB
            GROUP   BY userID
        ) b ON a.userID = b.userID 
```

 ~~为了`MySQL`

```
UPDATE  TableA a
        INNER JOIN
        (
            SELECT  userID, Count(*) totalCount
            FROM    TableB
            GROUP   BY userID
        ) b ON a.userID = b.userID
SET     a.rentals_count = b.totalCount 
```~~

# c# - C#如何在winrt的gridview中将单选绑定到多选？

> ID：15224700
> 
> 赞同：0
> 
> 时间：2013-03-05T13:12:39.837
> 
> 标签：c#, data-binding, windows-8, windows-runtime, multi-select

我今天来找你是因为我不知道如何在网格视图中进行多选绑定。今天我知道如何制作单曲并获得结果，但我不知道如何制作多选。你有什么想法 ？

这是我的代码：

```
 public sealed partial class Base1 : ApplicationName.Common.LayoutAwarePage, INotifyPropertyChanged
{
    private ObservableCollection<Base> projects;
    public ObservableCollection<Base> Projects
    {
        get { return projects; }
        set
        {
            projects = value;
            NotifyPropertyChanged();
        }
    }

    private Base selectedProject;
    public Base SelectedProject
    {
        get {
            return selectedProject;
        }
        set {
            selectedProject = value;
            NotifyPropertyChanged();
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged([CallerMemberName] string propertyname = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyname));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:24:06.117

在 WinRT XAML Toolkit 中有一个附加行为[`GridViewExtensions.BindableSelection`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/c17bc873dfea#WinRTXamlToolkit/Controls/Extensions/GridViewExtensions.cs)，您可以尝试。[`ListViewExtensions.BindableSelection`此处](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/c17bc873dfea#WinRTXamlToolkit.Sample/Views/Controls.Extensions/ListViewExtensionsTestPage.xaml)的示例显示了您将如何使用它。只需绑定`GridViewExtensions.BindableSelection`到一个`ObservableCollection`，它们应该保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:17:01.233

在 Base1 的构造函数中：

```
this.SelectedProjects = new ObservableCollection<Base>(); 
```

并添加属性：

```
private ObservableCollection<Base> selectedProjects;
public ObservableCollection<Base> SelectedProjects
{
    get {
        return selectedProjects;
    }
    set {
        selectedProjects = value;
        NotifyPropertyChanged();
    }
} 
```

并将您的 gridview的[属性 SelectedItems](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.selecteditems)与 SelectedProjects数据绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:19:57.157

您不能直接将数据绑定到 SelectedItems 属性，因为它是只读的（我想我们在这里谈论的是 wpf）。但是，您可以在 Base 类中实现 IsSelected 属性，然后将其绑定到项目容器的 IsSelected 属性。

```
<Style TargetType="ListViewItem"> 
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
</Style> 
```

然后，您可以通过类似的方式获取选定的项目

```
public IEnumerable<Base> SelectedProjects 
{
    get { return Projects.Where(x => x.IsSelected);}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:02:07.487

我尝试了很多东西，但最后我发现了一些非常容易使用的东西。

我只是使用 GridView 的“SelectedItems”。在那之后，我在那些选择的项目上做了我想要的。如果有人想要更多信息，我会给。

非常感谢帮助我的其他人:)

# python - Django 长时间运行脚本和数据库 CPU 使用率

> ID：15224702
> 
> 赞同：1
> 
> 时间：2013-03-05T13:12:45.623
> 
> 标签：python, django, debugging, django-models, django-postgresql

我运行一个使用 Django ORM 的脚本。该脚本运行时间很长，有时超过三天。脚本如下所示

```
from app.models import *

for i in some_simpe_select():
    more_simple_selects()
    processing_for_few_minutes()
    new_object.save() 
```

同一脚本有多个实例同时运行，但选项略有不同。我们使用postgresql。随着时间的推移，这会导致 DB CPU 变高。ps 显示 postgres 进程在事务中空闲，但 CPU 使用率异常高。

我想知道关于长时间运行的 django 脚本的最佳实践是什么，特别是在高 db CPU 使用率方面。

Django 1.4、Python 2.7、Postgresql 9.1

# asp.net - 当 User-Agent = CasperJS 时，IIS 7.5 响应不包含 setCookie

> ID：15224709
> 
> 赞同：3
> 
> 时间：2013-03-05T13:13:07.183
> 
> 标签：asp.net, user-agent, casperjs

CasperJS 发送的 HTTP 标头包含：

```
...
 - User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/534.34 (KHTML, like Gecko) CasperJS/1.0.2+Phantomjs/1.8.2 Safari/534.34
... 
```

响应不包含**SetCookie**值！

当我手动更改用户代理时：

```
PageSettings: {
        userAgent: "User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22"
    } 
```

一切正常。我正在使用 ASP.Net MVC。

**如何在服务器端修复它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:51:24.670

这可能是因为运行时根据用户代理标头确定您的浏览器功能。尝试像这样（或类似地）将其关闭以尝试是否有帮助：

```
 // Global.asax.cs
  void Application_OnBeginRequest( object sender, EventArgs e )
  {
         HttpApplication app = ( HttpApplication )sender;
         HttpContext ctx = app.Context;

         ...
         if (
              ctx.Request != null &&
             !string.IsNullOrEmpty( ctx.Request.UserAgent ) &&
              ctx.Request.UserAgent.Contains( "CasperJS" )
             )
             ctx.Request.Browser.Adapters.Clear();
         ..
  } 
```

上面的代码片段不一定是一个好主意——它完全删除了某些浏览器的渲染适配器（这可能不是很好！），但它应该是一个更好的起点。

我希望这会有所帮助，我们能够解决片段的一些渲染问题，我希望它也有助于解决 cookie 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:12:31.133

我在这里找到了解决方案：[https ://stackoverflow.com/a/4816391/1010404](https://stackoverflow.com/a/4816391/1010404)

我将 generic.browser 放入 App_Browsers 文件夹。文件包含：

```
<browsers>
  <browser refID="Default">
    <capabilities>
      <capability name="cookies" value="true" />
    </capabilities>
  </browser>
</browsers> 
```

一切正常。

# ruby-on-rails - Elasticsearch 映射不包括来自 Rails 键值存储的属性

> ID：15224710
> 
> 赞同：1
> 
> 时间：2013-03-05T13:13:08.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

模型：

```
class Item
    store :socket_store, accessors: [:sockets, :socket_count, :socket_link_count]
end 
```

映射：

```
mapping do
  indexes :id,                    key: "value", index: :not_analyzed
  indexes :sockets,               type: "object"
  indexes :socket_count,          type: "integer"
  indexes :socket_link_count,     type: "integer"
end 
```

但这是我的实际索引的样子：

![](../Images/76d2dc7e4382e323ac6b660bb3cc49fb.png)

`socket_cout`并且其他 2 个属性不在映射的根部，就好像它们被完全忽略了一样。

我知道我可以创建具有不同名称的方法并将它们添加到 to_indexed_json，但我猜它应该按原样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:41.927

好，我知道了。

由于键值存储的访问器不是`Item`模型上的实际属性，因此需要将它们作为方法添加到方法中`to_indexed_json`：

```
def to_indexed_json
    to_json(include: [:stats], exclude: [:sockets_store], methods: [:socket_count, :socket_link_count, :sockets])
end 
```

就是这样！

# javascript - 平板电脑上的 HTML5 画布保存图像似乎不起作用

> ID：15224714
> 
> 赞同：1
> 
> 时间：2013-03-05T13:13:12.083
> 
> 标签：javascript, jquery, html, canvas

所以我正在使用画布开发一个 HTML5 绘图应用程序，并正在使用`canvas.toDataURL("image/png")`它来保存图像。

它在桌面上运行得很好，但在 Ipad 上它根本无法运行。

似乎 Ipad 需要更多时间来呈现 Data-URL 并尝试在 url 完成之前呈现图像。

每次我在 Ipad 上尝试时，它都会显示一个空白的白色屏幕，但如果我点击渲染几次，有时它会显示绘图。一旦画布完成渲染Data-URL，他们有什么方法可以异步设置图像的源吗？

现场示例：http: [//imstillreallybored.com/curtainapp/](http://imstillreallybored.com/curtainapp/)

# javascript - console.log() 在不使用括号 () 的情况下不返回逻辑测试

> ID：15224717
> 
> 赞同：0
> 
> 时间：2013-03-05T13:13:28.477
> 
> 标签：javascript, undefined-behavior

今天在尝试记录和测试条件时，我遇到了 Chome 控制台的以下场景。有人可以帮我理解为什么会出现这种行为。

```
// 1\. in this output "this is not good" is not there and returned is false then 
// undefined ?? is that returned value
console.log("this is not good = " + 100 > 0 )
false
undefined
// 2\. next case is executing fine by introducing ()... 
// undefined ?? return type
console.log("this is not good = " + (100 > 0) )
this is not good = true
undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:16:39.073

问题在于运算符优先级。“加号”运算符 (+) 的优先级高于 >。

因此，您的第一个日志解释如下：

```
console.log((this is not good = " + 100) > 0); 
```

在第一步中，JS interpeter 将连接字符串和“100”。

有关更多信息，请参阅此[MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:22:58.070

这是正常的行为。

1) 当你评估

```
"this is not good = " + 100 > 0 
```

您将评估：

```
"this is not good = 100" > 0 
```

很明显`false`，所以`false`会打印出来。

2）当你评估

```
"this is not good = " + (100 > 0) 
```

你会评估

```
"this is not good = " + true 
```

它只会打印字符串。

奖金）对于`undefined`，这是 的返回值`console.log()`。它始终`undefined`用于此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:27:08.490

因为 Javascript 正在按照您指定的顺序执行操作。

```
"this is not good = " + 100 
```

将导致

```
this is not good = 100 
```

进而

```
"this is not good = + 100" > 0 
```

将为假，因为 String 不大于零。

* * *

在您的流程中，第一个变量是一个字符串，`+`（加法运算符）将尝试连接两个字符串。然后`100`将被投入`"100"`并添加。

如果您改用括号，则将执行数学运算（因为第一个变量将是`100`，一个数字）并`false`返回结果，转换为字符串`"false"`，然后添加到您的第一个字符串变量。

# sql-server-2008 - 调用-sqlcmd 意外行为

> ID：15224728
> 
> 赞同：0
> 
> 时间：2013-03-05T13:13:52.957
> 
> 标签：sql-server-2008, powershell, bcp

我正在使用 invoke-sqlcmd 来 bcp 出一个文件。一切似乎都是鳍和花花公子，除非我在创建文件之前尝试删除它。然后在文件可用之前需要一个随机时间。任何想法为什么？

错误代码（当然，用您自己的值替换 $dir 和 $sql_srv）

```
$dir = "\\srv-ocmr\d$\temp\" 
$sql_srv = "srv-ocmr\rec1ocm" 
if (test-path $($dir+"*.dat")) {remove-item $($dir+"*.dat") } # culprit line 
$str = $("bcp sysobjects out " + $dir + "so.dat -S" + $sql_srv + " -T -N " ) 
invoke-sqlcmd -ServerInstance $sql_srv  -Query "exec xp_cmdshell '$str' " -Database    master -Verbose 
while (-not (test-path $($dir+"*.dat"))) { 
    sleep -Seconds 1 
    test-path $($dir+"*.dat")
    } 
```

删除罪魁祸首，瞧，一切都像魅力一样：

```
$dir = "\\srv-ocmr\d$\temp\" 
$sql_srv = "srv-ocmr\rec1ocm" 
$str = $("bcp sysobjects out " + $dir + "so.dat -S" + $sql_srv + " -T -N " ) 
invoke-sqlcmd -ServerInstance $sql_srv  -Query "exec xp_cmdshell '$str' " -Database    master -Verbose 
while (-not (test-path $($dir+"*.dat"))) { 
    sleep -Seconds 1 
    test-path $($dir+"*.dat")
    } 
```

用 cmd /c del 替换 remove-item 不会改变任何东西，与使用本地目录而不是 UNC 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T00:26:34.043

你有没有尝试过：

```
Get-ChildItem -Path:$dir -Filter:'*.dat' | Remove-item -Force 
```

我怀疑`Test-Path`和通配符发生了奇怪的事情。使用我发布的命令，它将使用管道。如果 get-childitem 没有找到文件，remove-item 只会默默地什么都不做。如果找到文件，Remove-Item 将尝试以极端偏见删除它们。

# iphone - 如何将 NSArray 输出连接到用逗号分隔的 NSString

> ID：15224731
> 
> 赞同：2
> 
> 时间：2013-03-05T13:14:03.730
> 
> 标签：iphone, ios, objective-c, nsarray

我正在使用以下代码尝试将数组输出加入到 NSString 中。

```
NSArray  *array1 = [NSArray arrayWithObjects:[item objectForKey:@"id"], nil];
NSString *joinedString = [array1 componentsJoinedByString:@","];

NSLog(@"joinedString is %@", joinedString); 
```

我希望将连接的字符串输出为：连接的字符串是 55,56,57,66,88... 等等... 目前输出是：

```
2013-03-05 13:13:17.052  [63705:907] joinedString is 55
2013-03-05 13:13:17.056  [63705:907] joinedString is 56
2013-03-05 13:13:17.060  [63705:907] joinedString is 57
2013-03-05 13:13:17.064  [63705:907] joinedString is 66 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T13:21:50.307

您可能正在循环内运行 join 方法。

我想这就是你想要的。

```
NSMutableArray * array1 = [NSMutableArray array]; // create a Mutable array

for(id item in items){
      [array1 addObject:[item objectForKey:@"id"]]; // Add the values to this created mutable array
}

NSString *joinedString = [array1 componentsJoinedByString:@","];

NSLog(@"joinedString is %@", joinedString); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T13:17:47.770

你可以这样做，

举个例子

```
NSArray *array=@[@"A",@"B",@"C"];
NSString *string=[array componentsJoinedByString:@","];
NSLog(@"%@",string); 
```

输出是：

```
A,B,C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:24:06.747

无论你写的是什么，一个正确的可能是问题，`[item objectForKey:@"id"]`一旦检查这个另一个都很好。

```
NSMutableArray *array = [[NSMutableArray alloc] 
                             initWithObjects:@"55",@"56",@"57",@"58", nil];

    NSString *joinedString = [array componentsJoinedByString:@","];
        NSLog(@"%@",joinedString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:29:42.887

我一直在这里评论几个答案，发现大多数答案只是给出提供的代码作为解决此代码的答案，原因是因为提供的代码（请参阅提供的代码）工作得很好.

（由提问者提供）

```
NSArray  *array1 = [NSArray arrayWithObjects:[item objectForKey:@"id"], nil];
NSString *joinedString = [array1 componentsJoinedByString:@","];

NSLog(@"joinedString is %@", joinedString); 
```

由于用户没有提供如何`item` `NSDictionary`创建我假设`NSArray`已经创建了一个包含一些`NSDictionaries`

```
NSArray *array = [[NSArray alloc] initWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"55", @"id", nil],
                  [NSDictionary dictionaryWithObjectsAndKeys:@"65", @"id", nil],
                  [NSDictionary dictionaryWithObjectsAndKeys:@"75", @"id", nil],
                  [NSDictionary dictionaryWithObjectsAndKeys:@"65", @"id", nil],
                  nil]; 
```

问题在于尚未提供的代码，因为我们知道这`item`是一个`NSDictionary`我们知道`[item objectForKey:@"id"]`不返回单个项目它返回一个`NSArray`ID 的项目。因此，根据它是否是一个`NSArray`它会记录类似`joinedString is (55, 56, 57...)"`. 我们也知道它不能只是一个字符串，因为我们也只有一个值，所以它会记录一些这样的事情，这`joinedString is 55,`又不是我们想要的。获得所提供的东西的唯一方法是拥有这样的东西

```
 for(NSDictionary *item in array) {

    NSArray  *array1 = [NSArray arrayWithObjects:[item objectForKey:@"id"], nil];
    NSString *joinedString = [array1 componentsJoinedByString:@","];

    NSLog(@"joinedString is %@", joinedString);
 } 
```

因此，如果是这种情况，解决此问题的方法将是

```
 NSMutableArray  *array1 = [NSMutableArray array];
  for(NSDictionary *item in array) {

     [array1 addObject:[item objectForKey:@"id"]];

  }
  // Note that this doesn't need to be in a for loop `componentsJoinedByString:` only needs to run once.
  NSString *joinedString = [array1 componentsJoinedByString:@","];
  NSLog(@"joinedString is %@", joinedString); 
```

这个的输出将是（如用户所愿）

```
 joinedString is 55,65,75,65 
```

一旦提问者提供了缺失的代码，我将根据那里的代码更正他的答案，但在那之前我假设。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:21:47.840

**编辑：**

首先检查`[item objectForKey:@"id"]`它是否正确？

然后使用以下代码：

```
NSArray  *array1 = [NSArray arrayWithObjects:[item objectForKey:@"id"], nil];
NSString *commaSpStr;

commaSpStr = [array1 componentsJoinedByString:@", "];

NSLog(@"%@", commaSpStr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T13:58:52.030

你每次都在**重新创造。** `array1`创建一个实例变量`array1`，向其中插入`[item objectForKey:@"id"]`值，您将看到`joinedString`将被更新。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T07:23:19.900

```
NSMutableArray *arr = [[NSMutableArray alloc] init];

for (NSDictionary *item in array) {
    [arr addObject:[item objectForKey:@"id"]];
}

NSString *joinedStr = [arr componentsJoinedByString:@","]; 
```

# java - 类级实例化与方法实例化之间的区别

> ID：15224734
> 
> 赞同：4
> 
> 时间：2013-03-05T13:14:07.213
> 
> 标签：java, class, variables

以下变量用法有什么区别

```
public class A{

    B b= new B();

    public void doSomething()
    {
        b.callme();
    }
} 
```

VS

```
public class A { 
    B b;
    public void doSomething() {
        b=new B(); 
        b.callme();
    }
} 
```

如果我们在一个类中有一个“b”，那么哪个是更好的实践以及为什么。以及在什么情况下可以使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:18:44.133

这些实际上有非常不同的含义。在情况 1 中，`b`对象是在`A`构造时分配的。它只被构造一次（除非你从类外的某个地方重新分配它）。

在情况 2 中，您每次调用方法时都重新分配`A's`实例`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:17:05.593

`Class level instantiation`当你的类的新对象被创建时，将实例化你的类变量。While`method instantiation`将在调用该方法时实例化您的变量。

**良好实践：**你应该做`Class level instantiation`或`instantiate in Constructor`当你的类变量是/必须是`final`，否则使用`method instantiation`ie`lazy initialization`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:17:11.433

`Case 2:`有助于[延迟初始化](http://www.javapractices.com/topic/TopicAction.do?Id=34)

`In case 1`的对象`B`是在您创建 的对象时创建的`A`。但是，如果创建`B`是**繁重的操作**，那么您可以在实际需要 B 实例时懒惰地创建它。

`Lazy Initialization`当创建对象是一项繁重的任务并且您希望仅在实际使用对象实例时才延迟创建对象实例时很有帮助。但是请注意`thread safety`您的类是否在线程之间共享。

**更新**：但是在您的情况下，每次调用该方法时，您都会重新分配引用 b。这本身不是延迟初始化。

```
//example of lazy initialization
public B getB()
{
  if (something =  = null)
    b = new B();
  return b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:17:13.837

第一种情况称为内联初始化。它会在任何构造函数的主体运行之前但在调用超级构造函数之后发生。

在第二种情况下，直到 doSomething 被调用（），b 才被初始化。

至于哪个更好，这取决于你的程序逻辑。如果每次调用 doSomething 时都想要一个新实例，则第二种方法更好。如果您更喜欢延迟加载 b 然后将其修改为

```
if (b == null) b = new B(); 
return b; 
```

就个人而言，为了可读性，我通常在构造函数中分配实例变量。

```
public class A {
  B b;

  public A() {
    b = new B();
  } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:19:28.513

这里真正的区别是你想要`B`每次`doSomething`调用不同的实例吗？在第二种情况下，这是真的，但这也意味着如果有任何其他方法使用`B`. 如果类中没有任何其他方法使用，`B`为什么不将其设为方法范围的变量呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-24T12:09:37.573

我只是在尝试类似的场景，但由于一个错误，我创建了一个递归场景（StackOverflow 错误）：-

```
public class Test{

Test t=new Test();
public static void main(String[] args) {
       Test t=new Test();
       System.out.println("Hello");
}
} 
```

我认为这可能对某些概念目的有所帮助。

# c# - Socket超时后还能用吗？

> ID：15224738
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:14:13.077
> 
> 标签：c#, sockets, .net-4.0, timeout, socketexception

由于超过指定的发送/接收超时，`Socket`在同步发送/接收方法引发 a 后是否可以继续使用 .NET ？[这里](https://stackoverflow.com/questions/10591235/net-how-can-i-keep-using-a-socket-after-a-read-timeout?rq=1)说方法会在第一次超时后立即抛出异常。我想了解一些有关套接字将做什么（关闭自身？）以及处理（超时）后套接字是否可以正常使用的信息。我没有在 MSDN 文档上看到任何相关内容。`SocketException``SocketException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:52:30.040

我相信给出的评论说socket可以在超时后正常使用，虽然我自己没有尝试过。

# eeprom - EEPROM 是一次可编程的吗？

> ID：15224744
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:14:32.483
> 
> 标签：eeprom

我只想擦除要在我的应用程序中修改的部分位置。EEPROM 是否支持这些功能？或者它们是一次性可编程的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:22:07.233

来自 Wikipedia： `[EEPROM] is a type of non-volatile memory used in computers and other electronic devices to store small amounts of data that must be saved when power is removed, e.g., calibration tables or device configuration.`大多数组件（例如 RTC）使用它们来存储它们的配置（例如，每天八点中断）。

您确实可以对其进行重新编程（例如设置警报）。它的难度取决于设备和可用的支持，您不提供任何信息。

# css - 通过 CSS 为 Windows Surface RT 设置视口

> ID：15224752
> 
> 赞同：3
> 
> 时间：2013-03-05T13:15:03.653
> 
> 标签：css, viewport, windows-rt

我正在为移动设备制作网站，尤其是平板电脑。要设置视口，我使用元标记来控制缩放范围：

```
<meta name="viewport" content="width=device-width, maximum-scale=1.8, minimum-scale=0.63"/> 
```

现在我面临的问题是，Windows Surface 上的 IE10 忽略了 Meta Tag，所以我尝试通过 CSS 规则设置视口。不幸的是，我尝试过的代码不起作用：

```
@-ms-viewport{
    minimum-scale: 0.63;
    maximum-scale: 1.8;
    min-zoom: 0.63;
    max-zoom: 1.8;
}
@viewport{
    minimum-scale: 0.63;
    maximum-scale: 1.8;
    min-zoom: 0.63;
    max-zoom: 1.8;
} 
```

这是来自我的 CSS 文件。我是媒体查询的新手，所以我不知道代码是否正确，或者我只是在语法或其他方面犯了一些错误。我也试过：

```
@media all{
@-ms-viewport{
    minimum-scale: 0.63;
    maximum-scale: 1.8;
    min-zoom: 0.63;
    max-zoom: 1.8;
}
@viewport{
    minimum-scale: 0.63;
    maximum-scale: 1.8;
    min-zoom: 0.63;
    max-zoom: 1.8;
}} 
```

也不行。那么有没有人控制 Surface 的缩放范围的解决方案？或者有人看到我犯的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:36:00.070

在我们使用以下标签解决的 Surface 平板电脑上测试我们的新响应站点时，我们遇到了类似的问题

```
@-ms-viewport { width: device-width; } 
```

然而，我们的初始和最大比例设置为 1，我们并没有试图改变它们。

在此处查看 @ms-viewport 的 MSDN 文档[http://msdn.microsoft.com/en-gb/library/ie/hh869615%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/ie/hh869615%28v=vs.85%29.aspx)它似乎不支持该设置使用视口规则进行缩放和缩放，因此您可能无法更改此设置。

根据文档，这些只能在标准@viewport 规则[http://www.w3.org/TR/css-device-adapt/#the-viewport-rule上设置，目前还不知道哪些浏览器支持它们。](http://www.w3.org/TR/css-device-adapt/#the-viewport-rule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T13:31:23.400

是的，这也让我难住了！我无法滚动我的“即将推出”页面超出 Surface RT 的屏幕空间。我尝试了`"@-ms-viewport"`没有太多运气，所以我进入了实验模式并找到了解决问题的方法！

我的CSS中有以下内容......

```
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
} 
```

诀窍是`overflow-x:hidden;`……只要我把它放在 Surface RT 上的 IE11（地铁和桌面）中，我就可以滚动到屏幕之外！:)

我希望这会有所帮助。

# actionscript-3 - 游戏结构设计

> ID：15224754
> 
> 赞同：0
> 
> 时间：2013-03-05T13:15:05.543
> 
> 标签：actionscript-3, flash, apache-flex, flex4, flashdevelop

行。我有一个关于 AS3 游戏结构的问题。如何构建简单的射击游戏。

我有一个主要的英雄和发射子弹的船。我想添加两个级别，但我不确定如何正确构建它们或哪种方式正确。

我的主要课程可以容纳所有内容，并且应该切换低谷水平。所以我把每个级别作为一个单独的类。

示例代码

```
package
{
    // imports

    public class Main extends Sprite
    {
         // properties
         private var testLevel:Level1;

         public function Main():void 
         {
    if (stage) init();
    else addEventListener(Event.ADDED_TO_STAGE, init);
     }

         private function init(e:Event = null):void 
     { 
             testLevel  = new Level1();
             addChild(testLevel);
         } 
    }
}

// Level1 code
package Levels
{
    // imports
    public class Level1 extends Sprite
{
         // properties
         private var ship:Ship;

         public function Level1(stage:Object) 
     {
            // do some stuff
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
         }

         public function onEnterFrame(e:Event):void
     {
              // do some stuff
         }

    }
} 
```

所以根据这段代码，我的问题是：我应该在 Ship 中使用单独的 ENTER_FRAME 函数添加飞船子弹，还是应该在关卡循环中添加它们？

我可以同时做这两种方式，但哪种方式更利于性能和维护，因为我计划在子弹到达场景尽头或击中英雄时添加一些动作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:25:46.303

这是一个妥协：

*   为了**提高性能**，最好有一个 ENTER_FRAME 侦听器。

*   但为了**维护**，最好在 Ship 类和游戏中的每个对象（例如，Enemy 类、Bullet 类等）内有单独的**更新函数。**

所以通常处理这个问题并充分利用这两个选项的首选方法是在主类上设置一个主 ENTER_FRAME 侦听器，这通常称为**Main Game Loop**。这应该是游戏中运行的唯一 ENTER_FRAME 侦听器。从这个游戏循环中，您应该为游戏中当前的每个对象调用一个**更新**函数，该函数负责更新游戏中对象的位置、状态等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:21:33.407

在我看来 - 制作一个关卡引擎并用 xml 描述一个关卡，而不是为每个关卡创建一个类。制作一个装有子弹的射击引擎并更新它。进行碰撞引擎以检查碰撞。一个很好的例子是废物入侵者的代码。[链接](https://github.com/renaun/ActionScriptExamples/tree/master/Waste%20Invaders) 检查 src / com / shooty / engine 代码，这将对您有很大帮助。

# javascript - 当您将鼠标悬停在 kendo ui 网格工具栏中的菜单上时，菜单文本会消失

> ID：15224756
> 
> 赞同：2
> 
> 时间：2013-03-05T13:15:18.167
> 
> 标签：javascript, html, css, kendo-ui, kendo-grid

在**Kendo UI**中当您将鼠标悬停在**网格工具栏中的****菜单**上时，菜单文本会消失。我想知道这是剑道 ui 错误还是我做错了什么？我正在使用地铁主题。

 **这是问题的屏幕截图： ![在此处输入图像描述](../Images/d6ad59034c38d0799f809b21cf31b64e.png)

这是重现问题的代码：

```
<!DOCTYPE>
<html>
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js" type="text/javascript"></script>
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.metro.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id='grid'></div>
    <script type="text/x-kendo-template" id="template">
        <div>
            <ul id='menu'>
                <li><span>Options</span>
                    <ul>
                        <li>Custom Option</li>
                    </ul>
                </li>
            </ul>
        </div>
    </script>
    <script>
        $(function () {
            $("#grid").kendoGrid({
                toolbar: kendo.template($("#template").html()),
                dataSource: new kendo.data.DataSource({
                    data: []
                }),
                columns: [{
                    field: "FIELD1",
                    title: "Field 1"
                }]
            }).data("kendoGrid");

            $("#menu").kendoMenu();
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:59:56.013

这是一个剑道错误。您会发现 2013.3.1114 版本的 CSS 会发生这种情况，但该问题已在 2013.3.1315 版本中得到修复。**

# c# - 在c#中用复数计算fft

> ID：15224760
> 
> 赞同：0
> 
> 时间：2013-03-05T13:15:22.847
> 
> 标签：c#, speech-recognition, naudio, speech-to-text, audio-processing

我使用这个公式来获取信号的频率，但我不明白如何用复数实现代码？与 Math.Sqrt(-1) 相关的公式中有“i”。如何使用 NAduio 库编写此公式以在 C# 中发出信号？

![在此处输入图像描述](../Images/0460c2d13312fd71e8e20c218778a6a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:22:42.957

如果您想回到基本水平，那么：

您需要使用某种形式的概率模型，例如隐马尔可夫模型 (HMM)。这将允许您测试用户对一组模型所说的内容，每个模型对应一个允许他们说的单词。

此外，您希望将音频波形转换为您的程序可以更轻松地解释的东西。类似于快速傅里叶变换 (FFT) 或小波变换 (CWT)。

步骤是：

1.  获取音频
2.  去除背景噪音
3.  通过 FFT 或 CWT 变换
4.  检测音频的峰值和其他特征
5.  将这些功能与您的 HMM 进行比较
6.  选择具有关于阈值的最佳结果的 HMM。

当然，这需要您事先使用正确的单词训练 HMM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:21:56.703

许多语言实际上为此提供了内置的库。在 C#.NET 中的一个示例位于[此链接](http://msdn.microsoft.com/en-us/library/hh361683%28v=office.14%29.aspx)。这为您提供了如何设置语音识别程序的分步指南。它还将您从解析某些现象等的音频的低级细节中抽象出来（坦率地说，除非您希望编写高度优化的版本，否则对于现有的库数量来说这毫无意义）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:19:57.727

尽管如此，这仍然是一个难题，您将不得不使用 ASR 框架来完成它。我使用 Sphinx4 做了一些稍微复杂的事情（约 100 个字）。您也可以使用 HTK。

一般来说，你需要做的是：

*   写下你想识别的所有单词
*   确定命令的语法，例如 (direction) (amount)

然后选择一个框架，得到一个声学模型，生成一个字典和一个与该框架兼容的语言模型。然后将框架集成到您的应用程序中。

我希望我已经提到了你需要做的所有重要事情。您可以单独搜索它们或转到您选择的框架的教程。

你的任务在语音识别方面比较简单，如果你完成了应该会得到不错的结果。

# python - QGraphicsEllipseItem 在边界外绘制，留下工件

> ID：15224761
> 
> 赞同：2
> 
> 时间：2013-03-05T13:15:26.663
> 
> 标签：python, qt, pyqt, pyside

如果你有一个 QGraphicsEllipseItem 比它的高（扁平）宽得多，它会在它自己的边界之外绘制。这意味着它不能正确绘制，并且在您拖动它时会在屏幕上留下伪影。这重现了这个问题（向非 Pythonistas 道歉，但对于 C++ers 应该是完全可以理解的）：

```
import sys
from PySide import QtCore, QtGui

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    scene = QtGui.QGraphicsScene()
    scene.setSceneRect(0, 0, 400, 400)
    ellipse = QtGui.QGraphicsEllipseItem(QtCore.QRectF(0, 0, 320, 5))
    ellipse.setFlag(QtGui.QGraphicsItem.ItemIsMovable, True)
    ellipse.setFlag(QtGui.QGraphicsItem.ItemIsSelectable, True)
    ellipse.setPos(40, 200)
    ellipse.setPen(QtGui.QPen(QtCore.Qt.red, 1))
    scene.addItem(ellipse)
    view = QtGui.QGraphicsView(scene)
    view.show()
    sys.exit(app.exec_()) 
```

关键是QGraphicsEllipseItem的宽度是320，高度正好是5。如果选择椭圆，选择框的虚线画在item的边界处，可以看到左右两边椭圆的边缘在这些边界之外。如果您然后将项目拖动到您周围，您将获得工件。

这是在 Windows 7 64 位上，使用 PySide 1.1.2，如果重要的话。

如果您打开抗锯齿（例如`view.setRenderHint(QtGui.QPainter.Antialiasing)`），椭圆会在其边界内绘制，一切都很好。

我宁愿选择绘制锯齿或抗锯齿，但作为最后的手段，我总是可以绘制抗锯齿，除非有人有更好的解决方案。我对 QGraphicsEllipseItem 进行了子类化，并在基类的边界矩形周围放置了大量填充，例如：

```
def boundingRect(self):
    return QGraphicsEllipseItem.boundingRect(self).adjusted(-40, -40, 40, 40) 
```

这解决了很多情况下的问题，但是如果椭圆非常大，您可能会超出界限，因此很难知道要添加多少填充，无论如何这是一个相当糟糕的解决方案因为这意味着在大多数情况下我的界限都在数英里之外（对碰撞检测等的影响）。

您还可以通过更改视图上的更新模式来停止工件，即：

```
view.setViewportUpdateMode(QtGui.QGraphicsView.FullViewportUpdate) 
```

不得不这样做来处理一种 GraphicsItem 类型的绘画，以防万一它非常扁平，这似乎有点难过......

我想我可以尝试在我自己的 QGraphicsEllipseItem 子类中“正确地”绘制东西，但我怀疑基类只是告诉画家画一个椭圆，所以我不得不乱七八糟想出我的自己的椭圆绘制算法，不使用画家一...

还有其他想法吗？什么似乎是最不坏的选择？我倾向于只打开 FullViewportUpdate。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:51:31.433

这是 QPen 的问题。

如果您使用宽度更大的 QPen（例如 1.2），问题就会消失（如果我没记错的话，默认情况下，对于连接，QPen 在找到交叉点时会扩展线条）。

# java - 为整数输入设置边界

> ID：15224765
> 
> 赞同：0
> 
> 时间：2013-03-05T13:15:41.147
> 
> 标签：java, input, limit

我有一小段代码，在运行它以确定某个值时需要用户输入。我不希望用户能够输入小于 0 和大于 100 万的任何内容，因此，0 =< YEARS_AHEAD =< 1000000。

我浏览了很多教程并搜索了这方面的帮助，但一无所获。这是我的代码。

```
Scanner reader = new Scanner(System.in);
    int YEARS_AHEAD;
    System.out.print("Enter the amount of years ahead: ");
    while (true)
        try {
            YEARS_AHEAD = Integer.parseInt(reader.nextLine());
            break;
        }catch (NumberFormatException nfe) {
            System.out.print("This value must be an integer, please enter the number of years ahead again: ");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:17:43.633

添加一个简单的 if：

```
if (YEARS_AHEAD < 0 || YEARS_AHEAD > 1000000) {
  // say something to the user, retry entering the number
} 
```

另一种选择是为此使用 while 循环：

```
int YEARS_AHEAD = -1; // invalid value
while (YEARS_AHEAD < 0 || YEARS_AHEAD > 1000000) {
    try {
        System.out.print("Enter the amount of years ahead: ");
        YEARS_AHEAD = Integer.parseInt(reader.nextLine());
    }catch (NumberFormatException nfe) {
        System.out.print("This value must be an integer, please enter the number of years ahead again: ");
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:19:14.973

一旦你阅读了输入

```
YEARS_AHEAD = Integer.parseInt(reader.nextLine()); 
```

检查`if-else`是否允许输入。

```
if(YEARS_AHEAD < 0 || YEARS_AHEAD >1000000){
   System.out.println("Invalid Input");
  }else{
     // do your processing here.
 } 
```

# android - 无法实例化活动 ComponentInfo{...}：java.lang.InstantiationException

> ID：15224768
> 
> 赞同：2
> 
> 时间：2013-03-05T13:15:52.163
> 
> 标签：android, apk

我已经尝试了我读过的所有线程的所有解决方案。有什么建议吗？

我已经调试了应用程序，但异常出现在内部代码 od android 中，并且没有行数。

这是课

```
package com.beppe.reminder;
import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.TextView;

public class ReminderShow extends Activity{

private Context mCtx; 
private long ID;
private DBAdapter db;
private Cursor c;

ReminderShow(Context c){
    mCtx=c;
}

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    db=new DBAdapter(mCtx);
    setContentView(R.layout.reminder_show);

    TextView tit=(TextView)findViewById(R.id.title11);
    TextView bod=(TextView)findViewById(R.id.body11);
    TextView dat=(TextView)findViewById(R.id.date11);
    TextView tim=(TextView)findViewById(R.id.time11);
    if(getIntent()!=null){
        ID=getIntent().getExtras().getLong(DBAdapter.KEY_ROWID);
        db.open();
        c=db.fetchTaskById((int)ID);
        c.moveToFirst();
        tit.setText(c.getString(1));
        bod.setText(c.getString(2));
        dat.setText(c.getString(3).split(" ")[0]);
        tim.setText(c.getString(3).split(" ")[1]);
    }
}
} 
```

这是清单

该活动已正确声明，如果我从包中删除它，编译器会显示一个错误。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.beppe.reminder"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />
<permission android:protectionLevel="normal" android:name="android.permission.WAKE_LOCK"></permission>
<permission android:protectionLevel="normal" android:name="android.permission.RECEIVE_BOOT_COMPLETED"></permission>
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.beppe.reminder.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name="com.beppe.reminder.TaskEdit"
        android:label="@string/edit_label"></activity>
    <activity 
        android:name="com.beppe.reminder.ReminderShow"
        android:label="@string/show_label"></activity>
</application> 
```

这是日志猫

```
enter code here03-05 15:36:33.474: W/dalvikvm(22257): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
03-05 15:36:33.484: E/AndroidRuntime(22257): FATAL EXCEPTION: main
03-05 15:36:33.484: E/AndroidRuntime(22257): java.lang.RuntimeException: Unable to    instantiate activity ComponentInfo{com.beppe.reminder/com.beppe.reminder.ReminderShow}: java.lang.InstantiationException: com.beppe.reminder.ReminderShow
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.os.Looper.loop(Looper.java:130)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at java.lang.reflect.Method.invoke(Method.java:507)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at dalvik.system.NativeStart.main(Native Method)
03-05 15:36:33.484: E/AndroidRuntime(22257): Caused by:  java.lang.InstantiationException: com.beppe.reminder.ReminderShow
 03-05 15:36:33.484: E/AndroidRuntime(22257):   at java.lang.Class.newInstanceImpl(Native Method)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at java.lang.Class.newInstance(Class.java:1409)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-05 15:36:33.484: E/AndroidRuntime(22257):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
 03-05 15:36:33.484: E/AndroidRuntime(22257):   ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:20:54.190

因为您将 null 传递`mCtx`给`DBAdapter`类。将您的代码更改为：

```
public class ReminderShow extends Activity{

        private Context mCtx; 
        private long ID;
        private DBAdapter db;
        private Cursor c;

        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);

            setContentView(R.layout.reminder_show);
            db=new DBAdapter(ReminderShow.this);
             // your code here.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:21:02.507

删除您用来启动活动上下文的构造函数，因为您可以通过以下方式轻松获取上下文`ReminderShow.this`：

现在你在行这里传递空上下文`db=new DBAdapter(mCtx);`

删除构造函数：

```
ReminderShow(Context c){
    mCtx=c;
} 
```

并改变这个：

```
 db=new DBAdapter(mCtx); 
```

到

```
db=new DBAdapter(ReminderShow.this); 
```

# linux - 应用增量 Linux 补丁

> ID：15224773
> 
> 赞同：1
> 
> 时间：2013-03-05T13:16:14.517
> 
> 标签：linux, kernel, patch

我已经安装了 Linux 3.7.7（稳定）内核。我的目标是应用所有可用的增量补丁，从 3.7.7-8 到 .... 无论如何，以获得最新的稳定版本（即 3.8.2）。

我已经下载并申请成功了3.7.7-8、3.7.8-9、3.7.9-10。kernel.org 上提供的下一个增量补丁是 3.8.1-2。当我尝试应用 3.8.1-2（超过最新安装的版本，即 3.7.10）时，我几乎没有“检测到反向（或以前应用的）补丁！” 消息，虽然我应该像魅力一样被应用。

我认为它发生是因为没有应用 3.8.0 补丁。但是 kernel.org 上没有可用的 3.8.0（无论是增量还是其他），所以我别无选择。

获得 3.8.2 的唯一方法（通过将补丁应用到一些旧的稳定版本到最新版本）是下载 3.8.1 的整个稳定源（因为它是 3.7.x 之后的第一个也是唯一一个可用的源），然后应用所有增量 3.8.1.x 补丁，直到我获得 3.8.2 版本。

它应该像那样工作还是实际上可以从 2.6.x 版本开始，并通过应用所有增量补丁，他/她最终将获得最新的 3.8.2（无论如何）版本？

除了修补之外，不要提出任何其他建议，我对这种用于教育目的的方法很感兴趣，而且当你得到你能得到的东西时，我不会处于死或活的状态，只是足以生存。我只想知道它是否应该工作，也许（这是我第一次这样做）我做错了什么（！？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:30:59.823

Linux 版本的工作方式如下：

```
.
.
.
|
3.5
|  \- 3.5.1 - 3.5.2 - 3.5.3 - ...
|
3.6
|  \- 3.6.1 - 3.6.2 - 3.6.3 - ...
|
3.7
|  \- 3.7.1 - 3.7.2 - 3.7.3 - ...
|
3.8
|  \- 3.8.1 - 3.8.2 - 3.8.3 - ...
|
.
.
. 
```

这意味着从`3.5`到`3.6`，有一个补丁，并且该补丁不包括`3.5.*`补丁（即`3.5.*`不在 and 之间`3.5`，`3.6`而是在单独的分支上）。事实上，torvalds Linux 本身根本不识别`3.*.*`补丁。其他人将错误修复移植到旧内核，他们是制作这些补丁的人。

也就是说，例如，如果您有`3.5.2`并且想要访问`3.6`，则首先需要反向应用`3.5.2`和补丁，然后再应用补丁。`3.5.1``3.6`

您获得反向（或先前应用）补丁的原因与我上面解释的完全一样。`3.7`和之间的一些更改`3.8`已经（由您）应用，通过向后移植错误修复补丁`3.7.*`。

# java - Java 应用程序中的内存不足错误

> ID：15224779
> 
> 赞同：3
> 
> 时间：2013-03-05T13:16:48.553
> 
> 标签：java, garbage-collection

我正在开发一个用 Java 5 开发的 Java 应用程序。我们正在尝试将其更新到 Java 6，因此我们已经开始使用 Jdk1.6。它运行 24 小时，我们没有为此应用程序安排任何及时退回。

这是一个基于线程的应用程序，所有 92 个线程都运行从 MQ 队列获取消息以将数据插入 Oracle 表中。

我的问题是我们有时会在 Java 6 中出现内存不足错误。这是因为我们应该每周/每月及时反弹一次应用程序吗？或者我们应该检查代码中的任何内存泄漏？

只是想知道 GC 是否足以长时间运行应用程序或总是需要重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:20:09.217

GC 可以长时间运行。你要么有内存泄漏，要么你的应用程序本质上碰巧使用了比 Java VM 允许的更多的堆空间。

您可以尝试使用`-Xmx1g`或[类似](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)的方式运行您的应用程序，以便为您的应用程序提供更多堆空间。

# c++ - TCP IP 通信

> ID：15224785
> 
> 赞同：0
> 
> 时间：2013-03-05T13:17:03.940
> 
> 标签：c++, tcp, boost-asio

我在 C++ 中使用 boost::asio 制作了一个客户端程序，它连接到 TCP/IP 服务器。当我发送命令说“llist”时，它会返回

```
? "llist"
l1 32x32 Video "Video L1"
l2 512x512 Video "Audio L2" 
```

每个句子都以一个换行符结束，在传输结束时它将有一个额外的换行符。所以我的监听函数从套接字中读取两个字符

```
 len=_socket->read_some(boost::asio::buffer(reply,sizeof(reply)),error);// char reply[2]; 
```

问题是当我检查“\n”时，如果它不起作用。

```
 if(reply[0]!='\n')
    if(reply[1]!='\n')
       str.insert(i,1,reply[0]); //std::string str; 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:27:48.047

您没有详细说明出了什么问题，但猜测一下，您当前的阅读方式会丢弃有效字符（即 中的内容`reply[1]`）。

您可以改为使用[`boost::asio::read_until`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/read_until.html)读取整行：

```
boost::asio::read_until(socket, buffer, '\n'); 
```

并将空行视为传输的结束。

# neo4j - neo4j 的非干净关闭和脏日志

> ID：15224789
> 
> 赞同：1
> 
> 时间：2013-03-05T13:17:08.817
> 
> 标签：neo4j, jrubyonrails

在为我的生产数据库重建索引时，我一直收到此错误：

`org.neo4j.kernel.impl.transaction.TxManager commit ** [out :: XXX] SEVERE: Commit failed ** [out :: XXX] java.lang.RuntimeException: java.io.FileNotFoundException: /bbp/www/pally/shared/db/neo4j-production/index/lucene/node/User_exact/_2i.fnm (No such file or directory)`

和

`Dirty log: /bbp/www/pally/releases/20130213131212/db/neo4j-production/index/lucene.log.1 now closed. Recovery will be started automatically next time it is opened.`

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:14:45.277

嗯，也许索引关闭或崩溃在一个糟糕的状态。不过，这非常罕见。是否可以从磁盘中删除该索引，从 neo4j 数据库中删除它并通过再次遍历所有用户节点来重建它？

# regex - 如何获取 tcl 中匹配字符串下的文本

> ID：15224799
> 
> 赞同：0
> 
> 时间：2013-03-05T13:17:33.167
> 
> 标签：regex, tcl

我在 tcl 中有一个字符串值

```
set out " ABC CDE EFG 
          123     456" 
```

我想获取文本“EFG”下方的文本。现在它是“456”，但它可以是任何东西，所以我需要一种方法，虽然我可以用 grep 搜索“EFG”并获取它下面的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:57:08.493

这个答案从 Johannes Kuhn 的答案中获得了一些灵感，但我用来`regexp`从“键”行中获取单词索引。

```
# this is as close as I can get to a here-doc in Tcl
set out [string trim {
ABC DEF GHI
123     456
}]

# map the words in the first line to the values in the 2nd line
lassign [split $out \n] keys values
foreach range [regexp -all -inline -indices {\S+} $keys] {
    set data([string range $keys {*}$range]) [string range $values {*}$range]
}
parray data 
```

输出

```
data(ABC) = 123
data(DEF) =    
data(GHI) = 456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:07:26.337

我建议将字符串拆分为键和值

```
lassign [split $out \n] keys values 
```

然后在键中查找字符串位置并在值中获取相同的范围

```
set start [string first "EFG" $keys]
set value [string range $values $start [expr {${start}+[string length "EFG"]-1}]] 
```

将它包装在一个过程中，我们得到

```
proc getValue {input lookFor} {
    lassign [split $input \n] keys values
    set start [string first $lookfor $keys]
    set value [string range $values $start \
        [expr {${start}+[string length $lookfor]-1}]]
} 
```

像这样调用它：

```
getValue $out "EFG" 
```

编辑：第二行如何对齐？使用制表符 ( `\t`)，空格？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:27:53.607

在这种情况下，您实际拥有的是两行，其中包含 3 个字母数字字符组，由空格分隔，第二行前面有大量前导空格（`"\x20ABC\x20CDE\x20EFG\n[string repeat \x20 10]123[string repeat \x20 5]456"`将重现您发布的内容）。在你的例子`[string range end-2 end]`中会给你你需要的东西。我建议逐行阅读文件，每次看到 EFG 时，在下一行提取您需要的部分（可能使用字符串范围）并发出它。

例如（未经测试）：

```
set state 0
set f [open $inputfile r]
while {[gets $f line] != -1} {
    if {$state} {
        puts [string range $line end-2 end]
        set state 0
    } else {
        if {[string match "*EFG" $line]} { set state 1 }
    }
}
close $f 
```

# magento - Magento Connect 扩展提交中的哪里可以上传 Magento 扩展包文件？

> ID：15224801
> 
> 赞同：0
> 
> 时间：2013-03-05T13:17:34.917
> 
> 标签：magento

我自己创建了新的 magento 扩展。我在我的 Magento 管理面板中创建了 package.xml 文件和扩展包文件。

创建扩展包文件后，我使用我的登录凭据在 magentocommcerce.com 中提交了扩展信息。在这种情况下，我已经填写了扩展信息并上传了扩展图标和屏幕截图。

**我应该上传那些付费扩展包文件吗？** **如果是这样我应该在哪里上传？**

我没有看到任何在 magentocommece.com 中上传这些包文件的选项。

```
Note : My extension is a paid version. 
```

**任何人都可以指出我在magento扩展提交期间上传包文件的位置吗？** 或者 **我错过了什么吗？上传是否仅适用于免费扩展或付费版本？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:27:32.753

请看这里： http: [//www.magentocommerce.com/magento-connect/create_your_extension/](http://www.magentocommerce.com/magento-connect/create_your_extension/)

特别是这个pdf：http: [//info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf](http://info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf)

您像往常一样上传您的扩展程序。免费扩展可以变成付费的，反之亦然，决定它是免费的还是付费的，是在扩展配置文件中设置的

# python - 适用于 Python 的 IDE（例如带有视觉辅助 X 的 Visual Studio）？

> ID：15224804
> 
> 赞同：0
> 
> 时间：2013-03-05T13:17:48.510
> 
> 标签：python, ide, visual-assist

我使用带有 Visual Assist X 插件的 C/C++ Visual Studio 2012。现在我要学习Python。我需要一个好的 Python IDE 和我的主要要求 - IDE 中非常好的智能/自动完成功能（我不喜欢记事本或 Python shell）你能推荐 IDE 来满足我的要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:42:12.450

> IDE中非常好的智能/自动完成功能

*很难为 python 找到一个好的 IDE。*主要原因是**你的要求*很难*实现**，如果不是完全不可能的话，因为python是**动态**绑定的，*所以实用程序不能确定什么去哪里*（就像它们在静态绑定的语言中所做的那样，例如`java`或`c#`) 以便在 IDE 中创建可靠的自动完成功能。

也就是说，在我看来，使用纯文本编辑器可能会更好地为您服务（`vim`很快就会想到，如果您在 Windows 上，则可以使用[notepad++](http://notepad-plus-plus.org/)的方式），然后使用您选择的 python vm 来运行和/或调试你的代码。

如果您仍然如此倾向于使用 IDE，那么[Aptana studio](http://www.aptana.com/)（或只是带有[pydev的](http://pydev.org/)[Eclipse](http://www.eclipse.org/)）可能就足够了。[如果您选择将 Visual Studio 与用于 Visual Studio 的 Python 工具](http://pytools.codeplex.com/)配对，那么 Visual Studio 也是一种选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:22:08.557

在为 Python 找到一个好的 IDE 之前，我费了很大的力气。目前我正在使用[PyCharm](http://www.jetbrains.com/pycharm/)，它有很多我习惯于使用其他语言和 IDE 的功能，例如非常好的语法突出显示、代码完成、结构导航、文档链接、VCS 集成（使用实时差异工具）等等上。

注意：虽然它不是免费的，但您可以进行免费且全功能的 30 天试用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:42:32.287

我对 python 也比较陌生（1 个月..），在与 idlex 斗争了几个星期之后，我发现 [pyscripter](https://code.google.com/p/pyscripter/)并且我对它非常满意，它对 python 具有几乎完美的自动完成功能！作为一个大优点..它让我不再希望那里有一个用于 python 的 netbeans 版本！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:19:40.163

您可以使用 APTANA、Geany 或 ipython 进行练习！我更喜欢 APTANA 或 GEANY
Eclipse 也是一个很好的 Python IDE！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:21:14.763

WingIDE 是我的首选 ide。它有很好的智能填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T13:24:24.407

这些天来，我使用 Sublime Text 来编辑所有内容（[http://www.sublimetext.com](http://www.sublimetext.com)）和 bpython（[http://bpython-interpreter.org](http://bpython-interpreter.org)）作为我的 Python shell。

也许 Stack Overflow 上的这些其他线程可能会有所帮助：

[用于 Python 的 IDE 是什么？](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python)

[https://stackoverflow.com/questions/126753/is-there-a-good-free-python-ide-for-windows](https://stackoverflow.com/questions/126753/is-there-a-good-free-python-ide-for-windows)

[哪个是适用于 Windows 的 Python 的最佳 IDE](https://stackoverflow.com/questions/7899732/which-is-the-best-ide-for-python-for-windows)

# android - Android TextView - 填充最大空间和椭圆大小的高度

> ID：15224809
> 
> 赞同：5
> 
> 时间：2013-03-05T13:18:18.340
> 
> 标签：android, android-layout, textview

我正在尝试制作这样的布局：

```
|---------------------------| |---------------------------|
| Title of text goes there  | | Title of text goes there  |
|---------------------------| |---------------------------|
| Image goes there, height  | | Image goes there, height  |
| can be different          | | can be different, very    |  
|---------------------------| | very, very different      |     
| Long, very long text goes | |---------------------------|
| here, and here, and here  | | Long, very long text goes |
| that should fill space    | | here, and here, and here  |
| lef after title and ima.. | | that should fill space ...|
|---------------------------| |---------------------------| 
```

现在想象一下，我有 5 个这样的 LinearLayout 位于屏幕上，2 个上层和 3 个下层，全部均匀。问题是我的@Long，很长的文本不会椭圆化并同时填充可用空间。当我设置 android:maxLines 时，它可以工作，但我没有常量 maxLines，因为图像和标题高度会发生变化。

```
 <!-- item -->
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dip"
        android:layout_weight=".3">

        <!-- item title -->    
        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:id="@+id/item_3_title"
            android:textSize="22sp"
            android:textStyle="bold"/>

         <!-- item image -->  
        <RelativeLayout
            android:id="@+id/item_3_image_holder"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical">

            <ImageView
                android:id="@+id/item_3_image"
                android:layout_width="wrap_content"
                android:layout_height="120dip"
                android:scaleType="centerCrop"
                android:padding="2dip" >
            </ImageView>

            <ProgressBar
                android:id="@+id/item_3_progress"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true" >
            </ProgressBar>

        </RelativeLayout>

        <!-- item text -->    
        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="left"
            android:id="@+id/item_3_text"
            android:ellipsize="end"
            android:textSize="18sp"/>                   

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T14:48:50.080

好的，终于在[这里找到了答案](https://stackoverflow.com/questions/14173776/ellipsize-not-working-properly-for-a-multiline-textview-with-an-arbitrary-maximu)

```
ViewTreeObserver observer = textView.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
@Override
public void onGlobalLayout() {
    int maxLines = (int) textView.getHeight()
            / textView.getLineHeight();
    textView.setMaxLines(maxLines);
    textView.getViewTreeObserver().removeGlobalOnLayoutListener(
            this);
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:30:16.593

```
 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:padding="10dip"
    >

    <!-- item title -->    
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:id="@+id/item_3_title"
        android:textSize="22sp"
        android:textStyle="bold"/>

     <!-- item image -->  
    <RelativeLayout
        android:id="@+id/item_3_image_holder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/item_3_title"
       >

        <ImageView
            android:id="@+id/item_3_image"
            android:layout_width="wrap_content"
            android:layout_height="120dip"
            android:scaleType="centerCrop"
            android:padding="2dip" >
        </ImageView>

        <ProgressBar
            android:id="@+id/item_3_progress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" >
        </ProgressBar>

    </RelativeLayout>

    <!-- item text -->    
    <TextView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:id="@+id/item_3_text"
        android:layout_below="@+id/item_3_image_holder"
        android:ellipsize="end"
        android:textSize="18sp"/>                   

</RelativeLayout> 
```

你需要这样的结构，我希望你能解释它。

# javascript - Javascript表单验证错误

> ID：15224815
> 
> 赞同：0
> 
> 时间：2013-03-05T13:18:47.013
> 
> 标签：javascript

```
<html>
<head>
<title> Form Validation </title>
<style type="text/css">
fieldset { width: 280px; padding: 6px; }
label { float: left; width: 100px; font: 12px Arial; padding: 5px; }
input { margin-bottom: 5px; }
</style>
</head>

<body>
<form id="inputForm" onsubmit="return validateForm();" action="#">
<fieldset>
    <label>First Name:</label><input type="text" name="first_name" /><br />
    <label>Surname:</label><input type="text" name="surname" /><br />
    <label>Postcode:</label><input type="text" name="postcode" /><br />
    <label>Email:</label><input type="text" name="email" /><br />
    <input type="submit" name="submit" value="Send form" />
    <input type="reset" name="reset" value="Reset" />
</fieldset>
</form>

<script type="text/javascript">
function validateForm() {
    var form = document.forms['inputForm'];
    var formats = {
        First_name: /^[a-z]+[\-`\s]?[a-z]+$/i, 
        Surname: /^[a-z]+[\-`\S]?[a-z]+$/i, 
        Postcode: /^\d{4}$/, 
        Email:/^w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/ 
    };

    var elCount = form.elements.length;
    for(var i = 0; i <elCount; i++) {
        var field = form.elements[i];
        if(field.type == 'text') {
            if(!formats[field.name].test(field.value)) {
                alert('Invalid '+field.name.replace('_', ' '));
                field.focus();
                return false;
            }
    }
}
}
</script>
</body>
</html> 
```

嘿家伙试图弄清楚为什么代码给我一个错误：underfinded formats[fields.Name] 但它已被定义。它只是一个简单的形式，所以我不确定我做错了什么。很抱歉这个基本问题，但我已经多次查看它并且看不到它。再次欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:22:34.407

假设您正在谈论的错误在这一行：

```
if(!formats[field.Name].test(field.value)) { 
```

我建议在“name”属性中使用小写“n”：

```
if(!formats[field.name].test(field.value)) { 
```

JavaScript 区分大小写。

更新：除了我已经提到的，但仍然关于区分大小写，您的`formats`对象具有混合大小写的属性名称，例如，`First_name`但相应的输入元素有一个`name`小写的属性，例如`name="first_name"`，，所以当您检索一个元素的`name`并尝试使用它来查找`formats`它会返回的属性`undefined`。你需要制作那些匹配案例。

修复这些错误，它可以工作：http: [//jsfiddle.net/M4Nzr/](http://jsfiddle.net/M4Nzr/)

# silverlight - 在 xaml 中为绑定 RelayCommand 设置 DataContext

> ID：15224816
> 
> 赞同：0
> 
> 时间：2013-03-05T13:18:47.217
> 
> 标签：silverlight, xaml, mvvm, mvvm-light, relaycommand

在下面的 xaml 代码中，我正在尝试绑定`ResourceButtonClick`视图模型中的 RelayCommand 。除此之外，我想将`Resource.Id`作为参数传递给这个命令。

但是，`ResourceButtonClick`不叫。我怀疑通过设置`ItemsSource`to `Resources`，我覆盖了数据上下文，即视图模型。

```
<UserControl ...>
    <Grid>
        <ItemsControl ItemsSource="{Binding Resources}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Tag="{Binding Id}" Content="{Binding Content}"
                    Width="300" Height="50"
                    Command="{Binding ResourceButtonClick}"
                    CommandParameter="{Binding Id}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl> 
```

这是`RelayCommand`视图模型中的。

```
public RelayCommand<int> ResourceButtonClick { get; private set; } 
```

视图模型的构造函数：

```
public ResourcesViewModel()
{
    this.ResourceButtonClick = 
        new RelayCommand<int>((e) => this.OnResourceButtonClick(e));
} 
```

视图模型中的方法：

```
private void OnResourceButtonClick(int suggestionId)
{
...
} 
```

我有两个问题：首先，我该如何调用`ResourceButtonClick`命令。其次，如何将`Resource.Id`参数作为参数传递给该命令。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:46:48.153

也许你可以展示你完整的 ViewModel 类？假设*ResourceButtonClick*命令位于还包含集合*Resources*的 ViewModel 上，您试图访问错误对象上的命令（在*Resources*中的项目上，而不是包含*Resources*集合和命令的 ViewModel 上）。

因此，您必须访问“其他”DataContext 上的命令，这是 ItemsControl 的 DataContext 而不是它的项目。最简单的方法是使用绑定的**ElementName属性：**

```
<UserControl ...>
    <Grid>
        <ItemsControl ItemsSource="{Binding Resources}" Name="ResourcesItemsControl">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Tag="{Binding Id}" Content="{Binding Content}"
                    Width="300" Height="50"
                    Command="{Binding DataContext.ResourceButtonClick, ElementName=ResourcesItemsControl}"
                    CommandParameter="{Binding Id}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl> 
```

也许这可以解决问题，否则请告诉我并提供更多细节。

我通常将整个项目作为命令参数传递，而不是 ID。这不需要任何费用，您也不必将 ID 翻译回物品。但这取决于你的情况。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:52:54.130

我以这样的方式解决了这个问题：在 View.xaml

1) 我为我的 ListView 添加了一个属性 SelectedItem：

```
<ListView Name="MyList" ItemsSource="{Binding MyList}" SelectedItem="{Binding MySelectedItem, Mode=TwoWay}" > 
```

2）我向按钮添加了一个命令属性：

在 viewModel 中： 3）我添加了一个命令处理程序：

```
MyCommand = new RelayCommand(MyMethod); 
```

4) 我添加了 MyMethod 方法，它从 MySelectedItem 属性中获取值：

```
private void MyMethod ()
       {
            MyType mt = MySelectedItem;
            //now you have access to all properties of your item via mt object
        } 
```

# r - 将数据子集到 bin 中的简单方法

> ID：15224822
> 
> 赞同：2
> 
> 时间：2013-03-05T13:19:12.200
> 
> 标签：r, subset, bins

我有一个如下所示的数据框，其中包含超过 1000 行。我想以 1m 的间隔（0-1m、1-2m 等）将数据子集到 bin 中。有没有一种简单的方法可以做到这一点，而无需找到最小深度并多次使用子集命令将数据放入适当的箱中？

```
Temp..ºC. Depth..m. Light  time       date
1     17.31     -14.8   255 09:08 2012-06-19
2     16.83     -21.5   255 09:13 2012-06-19
3     17.15     -20.2   255 09:17 2012-06-19
4     17.31     -18.8   255 09:22 2012-06-19
5     17.78     -13.4   255 09:27 2012-06-19
6     17.78      -5.4   255 09:32 2012-06-19 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:25:30.947

假设您的数据框的名称是`df`，请执行以下操作：

```
split(df, findInterval(df$Depth..m., floor(min(df$Depth..m.)):0)) 
```

然后，您将获得一个列表，其中每个元素都是一个数据框，其中包含`Depth..m.`特定 1 m 间隔内的行。

但是请注意，空垃圾箱将被删除。如果你想保留它们，你可以使用`cut`而不是`findInterval`. 原因是它`findInterval`返回一个整数向量，因此无法`split`知道有效 bin 的集合是什么。它只知道它看到的值并丢弃其余的值。`cut`另一方面，返回一个因子，该因子将所有有效的 bin 定义为级别。

# android - 如何在 android 中使用警报管理器重启设备？

> ID：15224825
> 
> 赞同：0
> 
> 时间：2013-03-05T13:19:16.737
> 
> 标签：android, alarmmanager, reboot

我需要存储设备的上次重启时间，如果一天内没有发生重启，那么设备应该重启 1）我通过计算设备启动的时间并存储它来获得重启时间。2）我在重启时间上增加了 24 小时 3）我的设备已经植根，所以我只需执行 shell 命令“su -c reboot”来重启设备

我的问题是如何触发警报并执行 shell 命令来重启我的设备？我在考虑警报管理器，但未决意图只需要活动、服务和广播接收器，而不是一段代码。有人可以提出任何替代方法吗？

# php - Codeigniter 事务

> ID：15224826
> 
> 赞同：36
> 
> 时间：2013-03-05T13:19:17.690
> 
> 标签：php, mysql, codeigniter, transactions, codeigniter-3

我正在使用 Codeigniter 事务

```
$this->db->trans_start();
$this->db->query('AN SQL QUERY...');
$this->db->trans_complete(); 
```

这很好用，我遇到的问题是在内部`trans_start`，`trans_complete`我正在调用其他函数，这些函数处理数据库，因此它们包含插入和更新以及一些删除......例如：

```
$this->db->trans_start();
 $this->utils->insert_function($data);
 $this->utils->update_function2($test);
$this->db->trans_complete(); 
```

现在，如果执行了这些函数并且发生了一些错误，CodeIgniter 将不会进行回滚。

处理此类问题的最佳方法是什么？

我想到的唯一解决方案是从这些函数中返回一个错误，并在这些函数内部添加（`trans_stat`和`trans_complete`）如果它返回一个错误，则进行测试`$this->db->trans_rollback`

前任：

```
 $this->db->trans_start();
     $result = $this->utils->insert_function($data);
     if($result === false){
       $this->db->trans_rollback();
     }
    $this->db->trans_complete(); 
```

有没有更好的方法来做到这一点？

**更新1：**

根据要求，我正在调用的外部函数示例：

```
 // insert_function contains

    $rec = array(
        'numero' => $numero,
        'transaction_id' => $id,
        'debit' => $product_taxes['amount_without_taxes'],
        'date' => $data['date_transaction'],
    );
    $this->addExerciceAccountingRecords($rec);

  and addExerciceAccountingRecords contains

   function addExerciceAccountingRecords($records) {
    $this->db->insert('transactions_exercices', $records);
    } 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-01-09T15:51:41.320

> > 使用`transactions`方法支持数据库安全插入数据。所以在 Codeigniter 中，我们在***模型*****中而不是在控制器中编写每个****与数据库相关的函数。***. 在您的第二个代码（不起作用）中，您已经在那里指出了模型。（**`utils`**）。如此简单，我相信这行不通。因为它不是模型和控制器并行的插入数据。交易应该在模型中编码（**我将在我的回答中写在模型中**）。*

 ** * *

**也加载这些东西**

1.  数据库库
2.  模型类
3.  网址助手
4.  会议

* * *

**假设**

在您的代码中，您使用了`$data`和`$test`作为数组。所以我假设有两个数组用于插入和更新数据。

* * *

**您的数据集**

```
$data = array(
   'title' => 'My title' ,
   'name' => 'My Name' ,
   'date' => 'My date'
);

$id = 007;
$test = array(
   'title' => $title,
   'name' => $name,
   'date' => $date
); 
```

**你的代码**

```
$this->db->trans_start(); # Starting Transaction
$this->db->trans_strict(FALSE); # See Note 01\. If you wish can remove as well 

$this->db->insert('table_name', $data); # Inserting data

# Updating data
$this->db->where('id', $id);
$this->db->update('table_name', $test); 

$this->db->trans_complete(); # Completing transaction

/*Optional*/

if ($this->db->trans_status() === FALSE) {
    # Something went wrong.
    $this->db->trans_rollback();
    return FALSE;
} 
else {
    # Everything is Perfect. 
    # Committing data to the database.
    $this->db->trans_commit();
    return TRUE;
} 
```

* * *

**笔记**

1.  默认情况下，Codeigniter 以严格模式运行所有事务。***启用*****严格模式****后，如果 **您正在运行多组事务，如果一组失败，所有组都将回滚。****如果*****禁用***严格模式，则每个组都**被独立处理**，**这意味着一个组的失败不会影响其他任何组**。**

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-08T23:22:39.410

我尝试的更多的是一种技巧，但它对我有用。

```
$this->db->trans_begin();
  $rst1=  $this->utils->insert_function($data);
  $rst2 =  $this->utils->update_function2($test);
if($this->db->trans_status() === FALSE || !isset($rst1) || !isset($rst2)){
   $this->db->trans_rollback();
}else{
   $this->db->trans_commit();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T18:31:22.710

我怀疑问题与 CodeIgniter 处理对象的方式有关。

如果您访问“创建库”部分下的 CI 文档，网址为：
[http](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)
://ellislab.com/codeigniter/user-guide/general/creating_libraries.html 并查看与以下相关的部分：

```
$CI =& get_instance();
$CI->load->helper('url');
$CI->load->library('session');
$CI->config->item('base_url'); 
```

在您的主控制器中，您已经使用自动加载或显式加载类加载/实例化了数据库类。

然后继续打开事务，然后通过 utils 库访问数据库函数。

但是，一旦您`$this-db`在库中使用，您实际上是在访问数据库实例的另一个副本，而不是与您的事务关联的副本。

要访问同一个实例，您需要使用 get_instance() 函数。

我认为这应该可以解决您的问题。您将功能分成各种模块的原始编码风格非常出色。您只需要了解这个额外的细节。

请尝试并确认回滚是否按预期进行。

代码的核心由以下控制器组成：

```
$this->db->trans_start();
$this->User_profile_m->create_new_user_profile();
$this->User_profile_m->create_new_user();
$this->db->trans_complete(); 
```

`user_profile_m`以及一个处理数据持久性的简单模型：

```
function create_new_user()
{
    $data['user_name_usr'] = $this->input->post('user_name');
    $data['create_date_usr'] = NULL;

    $this->db->insert('user_usr', $data);  
}

function create_new_user_profile()
{
    $data['user_name_pro'] = $this->input->post('user_name');
    $data['user_description_pro'] = $this->input->post('user_description');
    $data['create_date_pro'] = NULL;

    $this->db->insert('user_profile_pro', $data);  
} 
```

本质上，该演示尝试进行两次插入（两个表中的每一个）。如果一个插入失败，则回滚另一个。

我在 CodeIgniter 2.1.3 中构建了它，我可以通过 GitHub 提供应用程序文件，或者将它们压缩并发送给你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-30T12:04:26.630

注意：确保`$this->db->trans_begin()`在运行手动事务时使用，而不是`$this->db->trans_start()`.

```
$this -> db -> trans_begin(); 
$this -> utils -> insert_function ( $data );
$this -> utils -> update_function2 ( $test ); 
$this -> db -> trans_complete (); 
```

认证以防使用 MySql，以 InnoDb 格式使用

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-21T03:39:49.680

试试这个过程。它真的对我有用:)

```
$this->db->trans_start();
   $this->utils->insert_function($data);
   $this->utils->update_function2($test);
if($this->db->trans_status() === FALSE){
   $this->db->trans_rollback();
}else{
   $this->db->trans_complete();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-01T07:23:12.527

对于单个插入或更新记录，您可以使用affected_rows 函数

```
$this->db->insert('table_name', xss_clean($data));

//Check if there is a record affected
if($this->db->affected_rows() > 0)
              {
                  return true;
              }
              else
              { 
                  // if not succeeded
                  // check your last query 
                  die($this->db->last_query());
              } 
```***

# java - 使用 Profile 的 Spring 默认接线

> ID：15224827
> 
> 赞同：7
> 
> 时间：2013-03-05T13:19:24.220
> 
> 标签：java, spring, dependency-injection

我有两个豆子。两者都实现了邮寄功能。一个只有在部署到应用服务器时才有效。另一个用于测试。

我们有每个开发人员和环境的配置文件。我只想在实际测试时连接测试bean。不测试时应使用其他 bean。我该如何存档？

```
@Component
@Profile("localtest")
public class OfflineMail implements Mailing {} 
```

解决办法：

使用“默认”我在某处读到了这个，但对于像“dev”这样的配置文件似乎没有回退到“默认”：

```
@Component
@Profile("default")
public class OnlineMail implements Mailing {} 
```

-> 找不到用于接线的 bean 的异常。

留下个人资料：

```
@Component
public class OnlineMail implements Mailing {} 
```

-> 运行“localtest”配置文件时抛出一个独特的异常。

添加所有配置文件：

```
@Component
@Profile("prod")
@Profile("integration")
@Profile("test")
@Profile("dev1")
@Profile("dev2")
@Profile("dev3")
...
public class OnlineMail implements Mailing {} 
```

这实际上是有效的，但是我们的开发人员没有编号，他们使用“dev<WindowsLogin>”并添加配置文件，可能适用于一个 bean，但是当将它用于多个 bean 时会遇到麻烦，因为这肯定会变得丑陋。

使用 @Profile("!localtest") 之类的东西似乎也不起作用。

有谁知道更好的方法来获得“如果没有找到特定的 bean，则默认情况下获取电线”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T11:09:24.100

我终于找到了一个简单的解决方案。

在线邮件默认是有线的。

```
@Component
public class OnlineMail implements Mailing {} 
```

使用`@Primary`注释，离线邮件优先于在线邮件并避免了唯一异常。

```
@Component
@Profile("localtest")
@Primary
public class OfflineMail implements Mailing {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:08:35.310

试试这个：

```
@Component
@Profile("production")
public class OnlineMail implements Mailing {}

@Component
@Profile("localtest")
public class OfflineMail implements Mailing {} 
```

然后使用@ActiveProfiles("localtest") 运行测试并使用“production”作为*默认*配置文件运行生产环境。

另外我希望在 Spring 的下一个版本中`ActiveProfilesResolver`引入[SPR-10338](https://jira.springsource.org/browse/SPR-10338) - 它可能对你有帮助（避免“dev1”、“dev2”等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T12:52:48.083

Spring 非常支持 @Profile 注入 Bean：

```
interface Talkative {
    String talk();
}

@Component
@Profile("dev")
class Cat implements Talkative {
        public String talk() {
        return "Meow.";
    }
}

@Component
@Profile("prod")
class Dog implements Talkative {
    public String talk() {
        return "Woof!";
    }
} 
```

在单元测试中工作

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:applicationContex-test.xml"})
@ActiveProfiles(value = "dev")
public class InjectByDevProfileTest
{
    @Autowired
    Talkative talkative;

    @Test
    public void TestTalkative() {
        String result = talkative.talk();
        Assert.assertEquals("Meow.", result);

    }
} 
```

在 Main() 中工作：

@Component 公共类主 {

```
 public static void main(String[] args) {
            // Enable a "dev" profile
            System.setProperty(AbstractEnvironment.ACTIVE_PROFILES_PROPERTY_NAME, "dev");
            ApplicationContext context =
                    new ClassPathXmlApplicationContext("applicationContext.xml");
            Main p = context.getBean(Main.class);
            p.start(args);
        }

        @Autowired
        private Talkative talkative;

        private void start(String[] args) {
            System.out.println(talkative.talk());
        }
    } 
```

检查演示代码：[https ://github.com/m2land/InjectByProfile](https://github.com/m2land/InjectByProfile)

# facebook - 大量 API 错误

> ID：15224829
> 
> 赞同：2
> 
> 时间：2013-03-05T13:19:29.930
> 
> 标签：facebook, facebook-graph-api

Facebook 开发者警报说：

> 在过去三个小时内，对方法 POST /achievements 的 100% 调用都导致了错误。

```
Error Code: 100 Error Description:
Invalid parameter Error Count: 4,708 
```

但是我们在 4 或 5 个月内没有更改代码。可能是什么问题呢？正如我所看到的，facebook 成就中没有添加其他参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:15:10.070

这是因为一些用户没有授予`publish_actions`权限。授予此权限解决了这个问题。

# php - 如何从 PHP 字符串中替换

> ID：15224830
> 
> 赞同：1
> 
> 时间：2013-03-05T13:19:33.690
> 
> 标签：php, regex

我不想换

```
[a href='url']link[/a] 
```

到

```
<a href='url'>link</a> 
```

我正在使用`$line = str_replace("[a href='+(.*)+']", "<a href='+(.*)+' >", $line);`不工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:20:56.563

为什么不直接使用：

```
$search = array('[', ']');
$replace = array('<', '>');

$line = str_replace($search, $replace, $line); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:22:40.687

您必须使用正则表达式来执行此操作

```
$line = preg_replace('~\\[a +href=\'([^\']+)\'\\]([^\\[]+)\\[/a\\]~', '<a href="$1">$2</a>', $line); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:22:38.663

只需使用

```
$string = str_replace(array('[', ']'), array('<', '>'), $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:21:33.943

这是一个很棒的教程[http://www.youtube.com/watch?v=x9VLWlQhNtM](http://www.youtube.com/watch?v=x9VLWlQhNtM)它向您展示了如何制作一个小型模板引擎，它涵盖了您的要求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:23:12.060

试试这个 ：

```
$str = "[a href='url']link[/a]";
$new_str  = preg_replace('/\[a href=\'(.*)\'\](.*)\[\/a\]/','<a href=\'$1\'>$2</a>',$str);
echo $new_str; 
```

# c# - Outlook 查找/限制包含

> ID：15224834
> 
> 赞同：0
> 
> 时间：2013-03-05T13:19:43.860
> 
> 标签：c#, outlook

无论如何我可以将 Find 或 Restrict 与outlookfield.contains(mystring) 之类的东西一起使用吗？

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._items.restrict%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._items.restrict%28v=office.14%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:24:41.387

您可以在方括号中指定字段，如以下代码段所示：

```
Set contact = objContacts.Items.Find("[Email1Address]=" & Chr(34) & .SenderEmailAddress & Chr(34))

Set contact = objContacts.Items.Find("[FileAs] = ""Smith, Jeff"" and [FirstName] = ""Jeff""") 
```

字段名称在[MSDN 文档](http://msdn.microsoft.com/en-us/library/office/aa220093%28v=office.11%29.aspx)中进行了描述，或者可以使用 VBA 对象目录查看器进行检查。

要实现`Contains`，您可以`*`在要查找的字符串之前和之后使用通配符（例如“*myString*”）。要在字段中搜索文字`*`，您必须使用`~*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T10:52:47.610

根据[您链接到的文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._items.restrict%28v=office.14%29.aspx)，没有办法做到这一点。

> **补充说明**
> 
> 如果您尝试对用户定义的字段使用 Find 或 Restrict 方法，则必须在文件夹中定义字段，否则会出现错误。没有办法执行“包含”操作。例如，您不能使用“查找”或“限制”来搜索主题字段中包含特定单词的项目。相反，您可以使用 AdvancedSearch 方法，或者您可以遍历文件夹中的所有项目并使用 InStr 函数在字段中执行搜索。您可以使用 Restrict 方法搜索以特定字符范围开头的项目。例如，要搜索姓氏以字母 M 开头的所有联系人，请使用以下过滤器：
> 
> sFilter = "[LastName] > 'LZZZ' 和 [LastName] < 'N'"

从您的问题中不清楚您到底想做什么以提供更多上下文我正在尝试计算所有主题包含某个字符串的电子邮件（我将其称为 mystring 以匹配您的示例）。

这是我开始的代码：

```
 string mystring = "Such String";
 int count = inboxFolder.Items.Restrict("[Subject] = " + mystring).Count;
 Debug.WriteLine("{0} email(s) contain '{1}'", count, mystring); 
```

只要电子邮件的主题与 mystring**完全**匹配，这还不够好，我需要它来计算字符串是否包含在主题中的任何位置。

我尝试了[Axel Kemper 的](https://stackoverflow.com/a/15226250/971299)添加 * 符号作为通配符的答案，但它对我不起作用。

[我没有使用 AdvancedSeach 方法（这里](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._application.advancedsearch(v=office.14).aspx)的文档相当神秘），而是选择对每个项目执行循环并手动检查它是否包含感兴趣的字符串：

```
string mystring = "Such String";
int count = 0;
foreach (var item in inboxFolder.Items)
{
    if (item is Outlook.MailItem)
    {
         Outlook.MailItem mailItem = item as Outlook.MailItem;
         if (mailItem.Subject != null && mailItem.Subject.Contains(mystring))
         {
             count++;
         }
    }
}
Debug.WriteLine("{0} email(s) contain '{1}'", count, mystring); 
```

为了便于阅读和理解，我保留了未重构的代码，但这也可以做成一个单行 LINQ 表达式：

```
string mystring = "Such String";
int count = inboxFolder.Items.OfType<Outlook.MailItem>().Count(mailItem => mailItem.Subject != null && mailItem.Subject.Contains(mystring));
Debug.WriteLine("{0} email(s) contain '{1}'", count, mystring); 
```

两者的输出：

> 42 封电子邮件包含“此类字符串”

# java - 我们可以在 java 中从 USB 闪存驱动器获取 VID 和 PID 吗？

> ID：15224841
> 
> 赞同：2
> 
> 时间：2013-03-05T13:20:03.070
> 
> 标签：java, usb-flash-drive

我需要在 java 中获取可移动闪存驱动器的 VID 和 PID？我用谷歌搜索了很多，我无法得到任何正确的答案。许多社区几乎没有说明，但没有正确的说明，我必须导入哪些包。其中大多数答案都是用 C++ 编写的。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T13:40:57.520

Java 不允许与任何平台上的硬件（例如 USB 设备）进行通信。

[这个问题](https://stackoverflow.com/questions/544507/how-to-communicate-with-a-usb-device-under-windows-and-java)有一些链接到试图为此类功能提供 JNI 库包装器的已失效项目和其他旧项目。

# cordova - Phonegap 按钮状态 CSS 更改

> ID：15224843
> 
> 赞同：1
> 
> 时间：2013-03-05T13:20:09.613
> 
> 标签：cordova, mobile, touch

我是 phonegap 的新手，尽管进行了一些谷歌搜索，但我还没有真正弄清楚创建按钮的最佳解决方案是什么。

我的意思是，我想要一个明确的指示，当我按下按钮时，它被按下了。如果我按下的时间更长，按钮应该看起来像“向下”。我尝试使用 CSS 悬停和活动状态，但这不是一个令人满意的结果。

你会推荐使用一些触摸事件库还是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:58:46.913

我现在找到了一个令人满意的解决方案。它包括使用 xui.js touchstart 和 touchend 事件。这就是我一直在寻找的。

[我在 phonegap 中的 HTML 按钮没有反应](https://stackoverflow.com/questions/5894212/no-reaction-from-my-html-buttons-in-phonegap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:33:36.287

您是否在使用任何移动框架，例如 jQuery Mobile/Kendo UI Mobile？他们有很多移动小部件，包括按钮。从头开始创建所有的触摸小部件会很痛苦。

# shell - root 用户未在远程机器的 shell 脚本中执行命令

> ID：15224844
> 
> 赞同：3
> 
> 时间：2013-03-05T13:20:10.693
> 
> 标签：shell

我已经创建了一个如下所示的 shell 脚本。但它没有读取用户名和密码。我期望这个脚本以普通用户身份登录到远程机器并登录到 root 用户以在那里运行一些命令。

```
ssh -t qbadmin@10.3.2.0 '
  echo "user logined !";
  su root -c "
    echo Give username :;
    read username;
    echo Give password :;
    read password;
    echo $username;
    echo $password;
  ";
' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:24:46.843

您需要为`$`引号内的变量转义 's：

```
ssh -t qbadmin@10.3.2.0 '
  echo "user logined !";
  su root -c "
    echo Give username :;
    read username;
    echo Give password :;
    read password;
    echo \$username;
    echo \$password;
  ";
' 
```

否则，`ssh`作为 qbadmin 用户的命令创建的 shell 将在执行命令之前`$username`和`$password`之前执行字符串插值`su`。

# javascript - 淘汰赛是否会在已移除的虚拟元素内重新评估

> ID：15224846
> 
> 赞同：4
> 
> 时间：2013-03-05T13:20:13.943
> 
> 标签：javascript, dom, knockout.js

我当前的模板如下所示：

```
<!-- ko 'if': condition -->
    <ul data-bind="foreach: items">
        ...
    </ul>
<!-- /ko -->

<!-- ko ifnot: condition -->
    <ul data-bind="foreach: items">
        ...
    </ul>
<!-- /ko --> 
```

将其更改为以下是否有意义

```
<ul data-bind="foreach: items">
    <!-- ko 'if': $parent.condition -->
        ...
    <!-- /ko -->

    <!-- ko ifnot: $parent.condition -->
        ...
    <!-- /ko -->
</ul> 
```

我的实际用例是同时具有列表视图和网格视图 - 因为它们的 dom 不同，我不能只交换父`ul`块上的一些类。

我想知道哪种方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:30:05.677

我认为您的原始方法可能更可取，因为评估每个项目的`if`和`ifnot`绑定的开销会更少（包括将子元素保存为“模板”）。

# html - CSS 验证问题：标签中不允许有 div 元素

> ID：15224849
> 
> 赞同：0
> 
> 时间：2013-03-05T13:20:26.557
> 
> 标签：html, css, validation

验证我的 HTML 后出现此错误。

第 18 行，第 60 列：文档类型在此处不允许元素“div”；缺少“object”、“applet”、“map”、“iframe”、“button”、“ins”、“del”开始标签之一

```
 <a href="index.html"><div class="item" id="home"><br /> 
```

我认为它说我不允许在“a”标签中使用 DIV，但如果这里不是 div，我必须使用图层才能获得所需的视图。我可以用什么来代替 div？

错误消息包括以下几行：

此消息的一个可能原因是您试图放置一个块级元素（例如“

" 或 "") 内联元素（例如 ""、"" 或 ""）。

我收到该行的另一条错误消息：

```
<a class="img" href="#"><li>Item 1</li></a> 
```

我想我不能`<li> </li>`在标签内使用`<a> </a>`标签，但在这种情况下我必须这样做，你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:21:54.800

使用 a`<span>`代替，这是合法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:22:27.677

`<span>`a和 a的唯一区别`<div>`是a默认是一个元素，默认`<span>`是一个元素。`display:inline;``<div>``display:block;`

您想在内联元素 ( ) 中使用内联元素，`<a>`因为在其中包含块元素没有意义。内联元素继续页面的“流程”，而块元素中断流程（即转到下一行）。

通常在这些情况下，您可以`<span>`毫无问题地使用 a 。

**编辑：**使您的`<a>`元素具有`display:block;`make 也可以解决您的问题。

**编辑：**`<li>`在标签内包含 a实际上不是有效的 HTML `<a>`，它们必须在 a`<ul>`或`<ol>`.

这里有一些可以正常工作的选项，不需要额外的 CSS。

```
<a class="img" href="#">
    <span>Item 1</span>
</a> 
```

或者

```
<div>
    <a class="img" href="#">Item 1</a>
</div> 
```

或者

```
<ul>
    <li>
        <a class="img" href="#">Item 1</a>
    </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T15:29:53.003

验证的唯一方法是将您的文档类型更改为 HTML5，如上一篇文章中所述：

[有效的 HTML：'a' 元素内的 ul、p、div](https://stackoverflow.com/questions/7495144/valid-html-ul-p-div-inside-a-element)

希望这可以帮助。

# rest - 休息设计原则

> ID：15224852
> 
> 赞同：0
> 
> 时间：2013-03-05T13:20:32.253
> 
> 标签：rest, wadl, url-design

以下是列出客户所有订阅的良好休息设计实践：

[BaseUrl]/subscriptions/[accountid]/payTV
[BaseUrl]/subscriptions/[accountid]/paywall
等...

或者应该是：

[BaseUrl]/subscriptions/payTV?[accountID]
[BaseUrl]/subscriptions/paywall?[accountID]
等...

或者是其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:05:26.190

假设 accountid 是客户的唯一 ID，而 payTV/paywall 是订阅类型，我会选择如下内容：

```
[BaseUrl]/customers/[accountid]/subscriptions?type=payTV
[BaseUrl]/customers/[accountid]/subscriptions?type=paywall 
```

# asp.net-mvc - 如何获取高级 URL 路由参数？

> ID：15224853
> 
> 赞同：1
> 
> 时间：2013-03-05T13:20:32.407
> 
> 标签：asp.net-mvc, url-routing, viewengine

它现在像**localhost/Controller/Action**一样工作 ，但我希望它像**localhost/MainFolder/SubFolder/Controller/Action**

因为我需要获取我的 MainFolder 和 SubFolder 名称；喜欢

```
RouteData routeData = htmlHelper.ViewContext.RouteData;
string currentAction = routeData.GetRequiredString("action");
string currentMainFolder = routeData.GetRequiredString("mainFolder");
string currentSubFolder = routeData.GetRequiredString("subFolder"); 
```

MyViewEngine 代码；

```
 public class MyViewEngine: RazorViewEngine
{
    private static string[] NewViewFormats = new[] { "~/Views/MainFolder/SubFolder/{1}/{0}.cshtml" };

    public MyViewEngine()
    {
        base.ViewLocationFormats = base.ViewLocationFormats.Union(NewViewFormats).ToArray();
    }
} 
```

我的 RouteConfig.cs

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Panel", action = "Index", id = UrlParameter.Optional }
        );

        ViewEngines.Engines.Add(new MyViewEngine());
    } 
```

我的视图文件夹；

![在此处输入图像描述](../Images/22c95e6e88efaf634c7b29580110df3c.png)

我的控制器文件夹；

![在此处输入图像描述](../Images/5afdf4bae487be9200824591d92192a1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:54:03.377

MVC Routes are not filesystem-based like old-style ASP.NET sites. All the controllers are registered at compile and the route just picks the one with the matching name. Where the controller lives on your filesystem is irrelevant.

# php - 使用 PHP 和 MySQL 未定义的 Javascript

> ID：15224854
> 
> 赞同：0
> 
> 时间：2013-03-05T13:20:42.510
> 
> 标签：php, javascript, mysql, database

我有 2 个 PHP 页面...

**INDEX.PHP** 与此代码：

```
<form method="post" action="" name="f1">
<input type="text" name='p_name' size='50'><br> 
<input type="text" name='p_name2' size='50'><br>
<a href="javascript:void(0);" NAME="My Window Name" title=" My title here " onClick=window.open("index2.php","Ratting","width=550,height=170,left=150,top=200,toolbar=1,status=1,");>Click here to open the child window</a> 
</form> 
```

和带有此**avascript** 代码的 INDEX2.PHP：

```
<script langauge="javascript">
function post_value()
{
    opener.document.f1.p_name.value = document.frm.c_name.value;
    opener.document.f1.p_name2.value = document.frm.c_name2.value;
    self.close();
}
</script> 
```

和这个 PHP/HTML：

```
<form name="frm" method="post" action="">
<?php
$sql="SELECT * from customer";
$rs=mysql_query($sql,$conn) or die(mysql_error());
while($result=mysql_fetch_array($rs))
{
    echo '<input type="text" name="c_name" size="50" value="'.$result["sequence"].'" /><br>
    <input type="text" name="c_name2" size="50" value="'.$result["company"].'" /><br>
    <input type=button value=\'Submit\' onclick=\'post_value();\'><br><br>';
}
?>
</form> 
```

基本上，当您转到 index.php 时，单击链接以打开弹出窗口 index2.php，然后列出数据库中的客户并为每个客户提供 2 个文本框 - 一个用于客户的序列/ID，另一个用于为公司名称和每行一个提交按钮。

当按下按钮时，它运行 javascript 函数`post_value();`，该函数将数据库/子弹出窗口 (index2.php) 中的值放入父窗口 (index.php) 的文本框中

当我运行此代码时，它只是将单词 undefined 放在父页面的框框中，但是如果我删除 php 中的 while 循环，它只显示客户数据库中的一行，它工作正常。

它就像它不喜欢 php 中的 while 循环，但我不知道为什么。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:29:03.400

编辑 - 我刚刚意识到您的 while 循环将生成如下所示的内容：

```
<input type="text" name="c_name" size="50" value="A1" /><br>
<input type="text" name="c_name2" size="50" value="B1" /><br>
<input type=button value=\'Submit\' onclick=\'post_value();\'><br><br>

<input type="text" name="c_name" size="50" value="A2" /><br>
<input type="text" name="c_name2" size="50" value="B2" /><br>
<input type=button value=\'Submit\' onclick=\'post_value();\'><br><br>

<input type="text" name="c_name" size="50" value="A3" /><br>
<input type="text" name="c_name2" size="50" value="B3" /><br>
<input type=button value=\'Submit\' onclick=\'post_value();\'><br><br> 
```

这是行不通的，因为在同一个表单中有多个名为“c_name”和“c_name2”的元素。我认为您想要做的是将表单元素放入 while 循环中，如下所示：

```
<?php
    $sql="SELECT * from customer";
    $rs=mysql_query($sql,$conn) or die(mysql_error());
    $ctr = 0;
    while($result=mysql_fetch_array($rs))
    {
        echo '<form name="frm' . $ctr . '" method="post" action="">
        <input type="text" name="c_name" size="50" value="'.$result["sequence"].'" /><br>
        <input type="text" name="c_name2" size="50" value="'.$result["company"].'" /><br>
        <input type=button value=\'Submit\' onclick=\'post_value(' . $ctr . ');\'><br><br>' 
        </form>';
        $ctr++;
    }
?> 
```

请注意我是如何创建一个 $ctr 变量的，这样您就可以识别每个表单以及它是如何传递到 post_value 的。您需要使用它来获取正确的表单，如下所示：

```
<script langauge="javascript">
function post_value(ctr)
{
    opener.document.f1.p_name.value = document.forms["frm" + ctr].c_name.value;
    opener.document.f1.p_name2.value = document.forms["frm" + ctr].c_name2.value;
    self.close();
}
</script> 
```

默认情况下，mysql_fetch_array 返回一个带有数字键的数组（即 0、1、2 等）。如果要按列名检索记录，则需要使用：

```
while ($result = mysql_fetch_array($rs, MYSQL_ASSOC)) 
```

看这里的例子3：

[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

# paas - 限制对 PAAS 的访问

> ID：15224857
> 
> 赞同：0
> 
> 时间：2013-03-05T13:20:47.923
> 
> 标签：paas

我在办公室有一个实验室设置，人们在托管在 Cloud PAAS（如 openshift 或 cloudbees）上的开发环境中工作。

开发人员使用 SSH 连接连接到云 git 存储库。他们可以轻松地将 SSH 密钥带回家并在家中下载代码。我想限制该活动。

我可以使用他们的软件实用程序来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:24:00.523

你想要类似 GitHub 但自托管的东西？您可能可以使用[Gitlab](http://gitlab.org/)之类的克隆之一来执行此操作。否则很难限制用户访问单用户 PaaS。

# actionscript-3 - 如何在 mersenne twister 中初始化一次种子值并多次使用以获得不同的随机数

> ID：15224858
> 
> 赞同：0
> 
> 时间：2013-03-05T13:20:48.047
> 
> 标签：actionscript-3, actionscript, flash-media-server

我无法从 MT 获得不同的随机数，种子具有固定值（未按照测试人员的建议进行更改）。但是当我在一个程序中调用同一个函数两次时，它会显示不同的值，但即使我多次调用该程序，它也不会随机化值。我不明白我落后的地方。
请就此向我提出建议

下面是从我的 .asc 文件中粘贴的代码（与闪存媒体服务器相关）

主程序

```
 load(shuffle.asc);
  application.onAppStart=function()
  {
trace("Application Started");
  };

  application.onConnect=function(client,name)
   {

shuffledNumbers();
   } 
```

随机播放.asc

```
var gen_random;

function  shuffledeck()
{
trace("shufledeck");

gen_random = new Array();

gen_random= new Array();

for(i=0;i<1000;i++)
{
gen_random[i]=genrand_int32();
}
trace("gen_random: "+gen_random); // HERE WE CAN SEE THE RANDOMLY GENERATED NUMBERS . THE PROBLEM: EVERYTIME I AM GETTING THE SAME RANDOM GENERATED VALUES.

}

    var N = 624;  
    var M  = 397;  
    var MATRIX_A  = 0x9908b0df;   /* constant vector a */  
    var UPPER_MASK  = 0x80000000; /* most significant w-r bits */  
    var LOWER_MASK  = 0x7fffffff; /* least significant r bits */  
    var mt =[]; /* the array for the state vector  */  
    var mti ;  
    var seed ;  
    var returnLength ;  
    var maxSize ;  
    var returnArray = new Array();

    /* initializes mt[N] with a seed */  
    function init_genrand($seed)
    {
        mt[0]= $seed & 0xffffffff;

        for (mti=1; mti<N; mti++) {
            mt[mti] = (1812433253 * (mt[mti-1] ^ (mt[mti-1] >> 30)) + mti);
            mt[mti] &= 0xffffffff;
            /* for >32 bit machines */

        }
    }

    /* initialize by an array with array-length */
    /* init_key is the array for initializing keys */
    /* key_length is its length */
    /* slight change for C++, 2004/2/26 */
    //    void init_by_array(unsigned long init_key[], int key_length)  

    /* generates a random number on [0,0xffffffff]-interval */  
    function genrand_int32()     
    {
        var y ;
        var mag01 =[0x0, MATRIX_A];
        /* mag01[x] = x * MATRIX_A  for x=0,1 */

        if (mti >= N)
        {
            /* generate N words at one time */
            var kk ;

            if (mti == N+1)   /* if init_genrand() has not been called, */
                init_genrand(15475454); /* a default initial seed is used */

            for (kk=0;kk<N-M;kk++) {
                y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
                mt[kk] = mt[kk+M] ^ (y >> 1) ^ mag01[y & 0x1];
            }
            for (;kk<N-1;kk++) {
                y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
                mt[kk] = mt[kk+(M-N)] ^ (y >> 1) ^ mag01[y & 0x1];
            }
            y = (mt[N-1]&UPPER_MASK)|(mt[0]&LOWER_MASK);
            mt[N-1] = mt[M-1] ^ (y >> 1) ^ mag01[y & 0x1];

            mti = 0;
        }

        y = mt[mti++];

        /* Tempering */
        y ^= (y >> 11);
        y ^= (y << 7) & 0x9d2c5680;
        y ^= (y << 15) & 0xefc60000;
        y ^= (y >> 18);
    //  trace("y: "+y);
        return y;
    }

    /* generates a random number on [0,0x7fffffff]-interval */  
    function genrand_int31()     
    {
        return (genrand_int32()>>1);
    } 
```

任何帮助都会得到帮助

PS：我试图通过重新设置 int_genrand() 函数并获取输出来说服他们，但它似乎损害了随机性的可预测性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:41:56.347

如果您尝试洗牌，我发现此功能很有用：

```
function fisherYates (myArray) {
  var i = myArray.length;
   while ( i-- ) {
     var j = Math.floor( Math.random() * ( i + 1 ) );
     var tempi = myArray[i];
     var tempj = myArray[j];
     myArray[i] = tempj;
     myArray[j] = tempi;
  }
} 
```

用法：

```
myArray = [1,2,3,4,5];
fisherYates(myArray); 
```

# php - 目录选择框，然后是子目录选择框或将目录和子目录合二为一的选择框

> ID：15224859
> 
> 赞同：1
> 
> 时间：2013-03-05T13:20:51.923
> 
> 标签：php, directory, drop-down-menu, subdirectory

我得到以下代码：

```
 <div style="border:1px solid #CCCCCC; background-color:#F0F0F0; font-family:verdana; font-size:12px; padding:5px;">
    <?php
    $dir = '../klanten';
    // List of file names to exclude from output
    // NOTE: This is case-sensitive
    $exclude = array('klant_aanmaken.php','klanten_overzicht.php','klant_verwijderen.php','domein_aanmaken.php','domeinen_overzicht.php','domein_verwijderen.php','overzicht.php','documenten_toevoegen.php', 'dlf');
    // Check to see if $dir is a valid directory
    if (is_dir($dir)) {
      $contents = scandir($dir);
      echo '<strong>Selecteer klant: </strong><div class="styled-select"><select id="mydropbox">';
      foreach($contents as $file) {
        // This will exclude all filenames contained within the $exclude array
        // as well as hidden files that begin with '.'
        if (!in_array($file, $exclude) && substr($file, 0, 1) != '.') {
  echo '<option>'. $file .'</option>';
        }
      }
      echo '</select></div>';
    }
    else {
      echo "The directory <strong>". $dir ."</strong> doesn't exist.";
    }
    ?> 
```

这显示所有目录都很好。只有我现在需要另一个选择框，它从上面显示所选目录中的目录。

或者有没有办法让这个选择框也显示子目录。

我试过复制这个脚本并改变它：

```
 $dir = '../klanten'./.$file; 
```

和

```
 $dir = '../klanten/'.$file; 
```

但两者都不起作用。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-09T14:32:30.533

```
 <script>
  $.getJSON( "folderlist.php", function( data ) { 
  var items = ""; $.each( data, function( key, val ) { 
  items += "" + val.name + "";
  }); console.log(items); $("select[id=dynamic][apply=yes]").html(items); 
  });
 </script>

<style>
#dynamic {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        padding: 2px 30px 2px 2px;
        border: none;
        outline:none;
        background: transparent url("img/br_down.png") no-repeat right center;
      }
</style>

    <div class="selects">
                            <label>Select Folder : </label>
                            <select name="folder1" id="dynamic" apply="yes" onchange="addSelectChange()">

                            </select>

</div>

          <script>
          function addSelectChange(){ 

           $("select[apply=yes]").bind('click',function () {

           var folder = $(this).val();
           var select_id = $(this).attr("name").replace('folder', '');

            var myRegExp = /.php/;
            var string1 = folder;
            var matchPos1 = string1.search(myRegExp);

         if(matchPos1 != -1){

             // if .php file dont do anything ///
             // but delete previously vies directory select box removed if ther ///
             $("select[apply=yes][name=folder"+select_id+"]").nextAll("select[apply=yes]").remove();

         }else{

            $.ajax({
            url: 'filefolder_api.php',
            type: "POST",
            data: {"folder": folder},
            success: function(data) {

         var actual = Number(select_id);
             actual = actual+1;

         $("select[apply=yes][name=folder"+select_id+"]").nextAll("select[apply=yes]").remove();

         if($("select[name=folder"+actual+"]").length >= 0){

             if($("select[name=folder"+actual+"]").length == 1){
                $("select[name=folder"+actual+"]").html(data);   
             }else{
             var newSelectbox   = '<select name="folder'+actual+'" id="dynamic" apply="yes" onchange="addSelectChange()">';
             var selectBoxClose = '</select>';

             $( newSelectbox+data+selectBoxClose ).insertAfter( "select[name=folder"+select_id+"]");
             //console.log("ye");
             }
         }else{
             $("select[apply=yes][name=folder"+select_id+"]").html(data);
             //console.log("oh");
         }

         }});

         }
         });
         <script>

Download Sourcecode for (folderlist.php & filefolder_api.php )

Github Link : https://github.com/ganeshlore/Infinite-Directory-Select-Box-PHP-Jquery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:41:09.433

如果要动态更改所选目录中的文件，则需要使用 Ajax。您创建另一个空选择并使用 ajax 调用的 php 脚本的输出填充它。使用 jQuery：

```
$('#mydropbox').change(function() {
   $.getJSON('get_dir.php', {dir: $(this).val()}, function(data) {
       var box = $('#otherbox');
       box.empty();
       if (data) {
           $.each(data, function(i, file) {
               box.append('<option>' + file + '</option>');
           });
       }
   });
}); 
```

为此，您需要在选项中使用 value 属性

```
if (!in_array($file, $exclude) && substr($file, 0, 1) != '.') {
  echo '<option value="' . $file . '">'. $file .'</option>';
} 
```

来自 ajax 调用的 get_dir.php 文件应如下所示：

```
<?php
    $dir = '../klanten/' . $_GET['dir'];
    if (!preg_match('/\.\./', $_GET['dir'])) { // don't allow to traverse directories
        // Check to see if $dir is a valid directory
        if (is_dir($dir)) {
            echo json_encode(scandir($dir));
        } else {
            echo "null";
        }
    }
?> 
```

# regex - 在 Haskell 中提取特定类型的所有出现

> ID：15224860
> 
> 赞同：3
> 
> 时间：2013-03-05T13:20:53.960
> 
> 标签：regex, parsing, haskell, types, metaprogramming

我正在用 Haskell 编写一些程序，它们以某种方式操作 Haskell 源代码。我想做的一件事是提取特定类型的所有出现（以及它们的位置）。

我认为使用正则表达式的非常粗略的方法适用于简单的数据类型。例如，在以下图形代码中：

```
module Test where
    import Picture

    r1,r2,r3,r4 :: Region
    r1 = Shape(Rectangle 2 2)
    r2 = Shape(Ellipse 2 1.5)
    r3 = Shape(RtTriangle 3 2)
    r4 = Shape(Polygon [(-2.5, 2.5), (-3.0,0), (-1.7,-1.0), (-1.1,0.2),(-1.5,2.0)])

    p1,p2,p3,p4 :: Picture
    p1 = Region Red r1
    p2 = Region Green r2
    p3 = Region Blue r3
    p4 = Region Yellow r4

    pic :: Picture
    pic = foldl Over EmptyPic [p1,p2,p3,p4] 
```

我可以通过简单地创建一个正则表达式来提取每个数字，该表达式查找数字字符的每个实例，它们周围没有字母。同样，如果我想找到所有颜色，我可以硬编码一个正则表达式来搜索红色或绿色或蓝色......等的出现。

我用这种方法看到的问题是：

1.  如果我想更改我正在搜索的类型，我必须硬编码该类型可能表现出来的所有可能方式

2.  如果类型值作为函数调用的结果返回，则它不起作用。例如，如果 p1 改为：

    p1 = 区域 (getColor 1) r1

在哪里：

```
getColor :: Int -> Color
getColor n
    |n == 1 = Red
    |otherwise = Green 
```

是否有一种更通用的方法来解析 Haskell 文件，以便提取特定类型的所有出现，以及它们在源文件文本中的位置（如果可能）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T14:43:48.847

您可以使用解析器，即[haskell-src-exts](http://hackage.haskell.org/packages/archive/haskell-src-exts/1.13.5/doc/html/Language-Haskell-Exts-Parser.html)，它在输出 AST 中保留位置信息（行号和列号）。

# wpf - 无法解析资源“x”。

> ID：15224864
> 
> 赞同：10
> 
> 时间：2013-03-05T13:20:57.700
> 
> 标签：wpf, xaml, visual-studio-2012

我最近升级到了 VS 2012，因为我需要开始使用 .net 4.5，但那不是重点。我的问题如下：

我`ResourceDictionary`在我的主要项目中有一个名为`AppStyles.xaml`，并且在`App.Xaml`我有以下内容：

```
<ResourceDictionary>
  <ResourceDictionary.MergedDictionaries>
     <ResourceDictionary Source="AppStyles.xaml"/>
  <ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

在我`ResourceDictionary`有一个样式，然后我可以通过设置将此样式应用于我的任何项目中的任何按钮`Style={StaticResource MyButton}`。

升级到 VS 2012 后，我注意到标题中出现了很多错误，有时它会阻止我调试，有时它不会！

有没有不同的方式我应该这样做，或者 VS 2012 中是否有问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-22T21:52:44.187

WPF 无法解析您尝试合并的资源字典。创建合并字典时，WPF 会遵循一组规则来尝试解析 URI。在您的情况下，URI 不明确，因此 WPF 无法可靠地解析它。

`Source`将URI 中的 URI更改为`App.xaml`绝对包 URI。例如，如果您的项目被调用`MyProject`（即：“MyProject”是短程序集名称），那么您应该将`Source`in更改`App.xaml`为：

```
 <ResourceDictionary 
      Source="/MyProject;component/AppStyles.xaml"/> 
```

这假设`AppStyles.xaml`在`MyProject`. 您可以选择指定已签名程序集的权限、程序集版本和公钥信息。但是，使用短程序集名称（MyProject，在上面的示例中）应该是安全的。

有关 WPF 中 Pack URI 的更多详细信息，请参阅 MSDN 上的此页面：http: [//msdn.microsoft.com/en-us/library/aa970069 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa970069%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T14:31:19.017

我在VS2010中也时不时遇到这个问题。有时，如果我制作“清洁解决方案”和“重建解决方案”，问题就会解决。如果这不起作用，我通常会重新启动 VS2010。

我还将 Style x:Key 重命名为别的东西，问题就消失了。但我不觉得这个解决方案是完美的......

```
<Application.Resources>
<ResourceDictionary>
  <ResourceDictionary.MergedDictionaries>

    <!-- Load Infrastructure's Resource Dictionaries -->
    <ResourceDictionary Source="/MyProject.Modules.Infrastructure;component/ResourceDictionaries/ResourceLibrary.xaml" />

  </ResourceDictionary.MergedDictionaries>

  <!-- Workaround for ResourceDictionary loading bug/optimization -->
  <Style TargetType="{x:Type Rectangle}" />

</ResourceDictionary> 
```

参考我的代码示例中有关解决方法的问题：[Trouble references a Resource Dictionary that contains a Merged Dictionary](https://stackoverflow.com/questions/1229395/trouble-referencing-a-resource-dictionary-that-contains-a-merged-dictionary)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-25T08:26:44.607

您可以创建一个公共或基础设施项目，其他项目将从中引用。添加您的资源。然后创建一个包 URI。然后在资源字典中的用户控件或窗口资源中引用

```
<...Resources>
<ResourceDictionary>
   <!-- Resource Dictionaries -->
   <ResourceDictionary.MergedDictionaries>
       <ResourceDictionary 
          Source="pack://application:,,,/Common;component/Dictionaries/Styles.xaml"/>
   </ResourceDictionary.MergedDictionaries> 
```

在usercontrol 或使用Window.Resources 的情况下是一个窗口。这对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-26T08:34:36.500

可以使用 appStyles.xaml 文件夹的相对路径。希望这可以帮助。

像下面的东西

```
<ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../Resources/Styles.xaml"></ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
<ResourceDictionary> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-24T16:30:16.027

您可以将资源字典添加到您的项目中，然后将其构建操作更改为资源，然后尝试在代码中添加其 uri，如下所示：

```
 <ResourceDictionary>
<ResourceDictionary.MergedDictionaries>
   <ResourceDictionary 
      Source="/Styles.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

或者干脆让 vs2012 使用属性选项卡来处理它...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-04T20:55:53.583

我在 Window.Resources 中放置了一些样式，这导致了我的问题

从 MainWindow 中删除所有样式后，问题就消失了。

**发现第二个问题：**

问题是平台目标设置为 x64。

将其更改为 AnyCPU 后，设计中的资源可以工作..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-20T12:16:55.597

您还可以`x:key`在 AppStyles.xaml 中检查具有相同样式的样式。它给我带来了类似的错误。

# python - 我的 JSON 对象有什么问题？

> ID：15224868
> 
> 赞同：1
> 
> 时间：2013-03-05T13:21:08.183
> 
> 标签：python, json, syntax

我已经将一个 JSON 对象（由其他人生成，在我无法访问的代码中）写入一个名为 的文件`kommscache.json`，现在我正尝试在 Python 中再次读取它。

这就是我所做的：

```
import json
from pprint import pprint

with open('kommscache.json') as data_file:
    data = json.load(data_file)

pprint(data) 
```

在调用 时`json.load()`，我收到以下错误消息：

```
Traceback (most recent call last):
  File "./kladd.py", line 7, in <module>
    data = json.load(data_file)
  File "/usr/lib/python2.7/json/__init__.py", line 280, in load
    **kw)
  File "/usr/lib/python2.7/json/__init__.py", line 328, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 365, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 381, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting property name: line 1 column 1 (char 1) 
```

JSON 文件的前几行如下所示（我也尝试了非漂亮打印的版本，结果相同）：

```
{u'filtered': 458,
 u'items': [{u'comment_count': 0,
             u'current_revision': {u'created_by': {u'avatar': 19435601, 
```

不幸的是，我无法向您展示整个文件，因为它包含一些敏感数据（并且长度超过 6000 行......），但如果我正确读取错误消息，则错误已经在文件的开头。但是，我不明白为什么这个 JSON 语法不正确。我已经仔细检查过，这个片段中的所有大括号和方括号都有匹配的右括号。

为什么我不能加载这个 JSON 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:22:59.660

您保存了 python 对象的文字表示，**而不是**JSON。

您可以使用解码它们，[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval)但您可能想要修复您的 JSON 编写代码。确保`json.dumps()`在保存时使用您的结构。

使用`ast.literal_eval()`（关闭所有大括号后）：

```
>>> import ast
>>> ast.literal_eval('''\
... {u'filtered': 458,
...  u'items': [{u'comment_count': 0,
...              u'current_revision': {u'created_by': {u'avatar': 19435601,
... }}}]}''')
{u'filtered': 458, u'items': [{u'comment_count': 0, u'current_revision': {u'created_by': {u'avatar': 19435601}}}]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:23:06.093

那不是 JSON 文件。它似乎是通过简单地编写 Python 字典的字符串版本创建的文件。尽管格式相似，但它们并不相同。

您应该显示创建文件的代码。您需要使用`json.dump(data)`而不是简单地调用`str()`.

# android - 开发具有图像和音频的Android应用程序

> ID：15224869
> 
> 赞同：0
> 
> 时间：2013-03-05T13:21:11.493
> 
> 标签：android, html, web-applications, storage, hybrid

我正在设计一个 Android 应用程序：一个诗歌应用程序，它将

一个。展示诗歌

湾。音频控制 - 开始、停止、重新启动、移动诗歌

目前收藏了25首诗，未来可能会更新。

一种方法是

**方法 1**。制作一个包含所有可用内容的静态应用程序，并使用更新的内容定期更新应用程序优点：易于开发，因为一切都是静态的缺点：应用程序会很重，因为它包含大量内容。

**方法 2**是否可以将内容与应用程序分开放置，例如。安装应用程序并将内容放置在外部存储内存中。使用这种机制，每次有更新时，内容都可以替换为新内容（方法 2 = 一个非常轻量级的播放器，能够显示内容（可能以图像的形式）和音频功能 + 内容（图像）的单独位置+mp3) 放置)

**方法 3**。制作一个混合应用程序，作为用户对内容的请求，内容在运行时下载并使用 android 音频功能播放。

**方法 4**。制作纯 HTML5 的网络应用程序。

还有其他可能吗？从用户体验的角度来看，哪个选项更有益。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:48:10.043

我会使用**Approach 2,5**，它是**Approach 2**和**Approach 3**的混合，您将下载的文件保存到数据库中，这样您就不会多次下载同一个文件然后播放它。

一些澄清，据我了解，如果有 Google Play 更新并且**方法 3**正在流式传输，**方法 2**只会有更多的诗。使用**Approach 2,5**您将获得**Approach 2的存储和****Approach 3**的回放。

 ******更新：我正在寻找的术语是同步数据。**方法 2,5**实际上只是一种下载例如 JSON 并对其进行解析然后下载文件并将其放入数据库中的方式，以便应用程序稍后可以访问它。使用这种方法，用户无需更新应用程序，如果您想删除一首诗，这也是可能的。******

# nuget - 仅使用 Nuget.exe 打包 SQL 文件

> ID：15224870
> 
> 赞同：3
> 
> 时间：2013-03-05T13:21:13.600
> 
> 标签：nuget

有没有办法打包一个仅包含 .SQL 文件的文件夹，而不必使用 Nuget.exe 将它们添加到项目中？

我知道您可以在 nuspec 中指定文件夹，但是这样做的过程是什么？我只能使用 .net 项目/应用程序制作包。

例如，如果我在内部创建一个名为 Database.nuspec 的 nuspec

```
F:\folder\trunk\Source\Database.nuspec 
```

文件夹内

```
F:\folder\trunk\Source\Database 
```

我想打包我的补丁脚本文件夹

```
F:\folder\trunk\Source\Database\Patch Scripts 
```

在那个文件夹里我有

```
F:\folder\trunk\Source\Database\Patch Scripts\2.0
F:\folder\trunk\Source\Database\Patch Scripts\2.1
F:\folder\trunk\Source\Database\Patch Scripts\2.2 
```

我是否需要将这些文件夹包含在我的 nuspec 中，或者 nuget.exe 是否足够聪明，可以为我打包它们？例如

更新：

解决方案 1：将每个文件夹包含到 nuspec

```
<files>
<file src="F:\folder\trunk\Source\Database\*.sql" target="Database" /> 
<file src="F:\folder\trunk\Source\Database\Patch Scripts\*.sql" target="Database\Patch Scripts\" /> 
<file src="F:\folder\trunk\Source\Database\Patch Scripts\2.0\*.sql" target="Database\Patch Scripts\2.0" />  
</files> 
```

但是我有很多补丁文件，将大约 40 个补丁文件写入 nuspec 会非常乏味，如果我找到解决方法，我会更新。

解决方案 2：ufuk-haciogullari 建议使用

```
 *\*.sql 
```

作为源，因为它们低一级，这是我想要的，但我需要保持文件结构完整，如果我只是写

```
<files>
<file src="F:\folder\trunk\Source\Database\*.sql" target="Database" /> 
<file src="F:\folder\trunk\Source\Database\Patch Scripts\*\*.sql" target="Database\Patch Scripts" />    
</files> 
```

它将所有返回存储到目标 Database\Patch Scripts\ 这不是我想要的结构。

更新：

```
<?xml version="1.0" encoding="utf-8" ?>
<package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
  <metadata>
    <id>database</id>
    <version>1.0.6</version>
    <authors>me</authors>
    <description>Description</description>
  </metadata>
<files>
    <file src="F:\folder\trunk\Source\Database\*.sql" target="Database\" />     
    <file src="F:\folder\trunk\Source\Database\Patch Scripts\**\*.sql" target="Database\Patch Scripts" />       
</files> 
```

这会打包我的解决方案并按照以前的格式存储文件。

```
nuget.exe pack "F:\folder\trunk\Source\Database\database.nuspec" -OutputDirectory F:\NuGetStore 
```

更新：

回到这一点，如果您将目标留空，它将重新创建已经存在的相同文件夹结构，因此您不需要创建目录。

```
<?xml version="1.0" encoding="utf-8" ?>
<package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
  <metadata>
    <id>database</id>
    <version>1.0.6</version>
    <authors>me</authors>
    <description>Description</description>
  </metadata>
<files>
    <file src="F:\folder\trunk\Source\Database\*.sql" target="" />     
    <file src="F:\folder\trunk\Source\Database\Patch Scripts\**\*.sql" target="" />       
</files> 
```

这会打包我的解决方案并存储文件。

```
nuget.exe pack "F:\folder\trunk\Source\Database\database.nuspec" -OutputDirectory F:\NuGetStore 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:31:17.013

您可以创建一个 nuspec 文件并明确声明这些文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
  <metadata>
    <id>MyPackage</id>
    <version>1.0.0</version>
    <authors>me</authors>
    <description>Description</description>
  </metadata>
  <files>
    <file src="*.sql" target="Content\SqlFiles" />
  </files>
</package> 
```

然后对 nuspec 文件运行 pack 命令。

```
NuGet.exe pack MyPackage.nuspec 
```

# c# - 在 textBox1_TextChanged 事件的文本中将空格后的第一个字母设置为 Upper

> ID：15224876
> 
> 赞同：0
> 
> 时间：2013-03-05T13:21:32.347
> 
> 标签：c#

我对 TextBox 有疑问。当我在文本框中键入时，单词会自动更改。例如：“我的名字是 kumar”到“我的名字是 Kumar”，应该在 textBox1_TextChanged 事件上完成。

目前我正在休假活动中这样做

```
private void textBox1_Leave(object sender, EventArgs e)
{
  textBox1.Text = textBox1.Text.Substring(0, 1).ToUpper() + textBox1.Text.Substring(1);
} 
```

请帮我完成它。提前非常感谢。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:23:28.110

使用[TextInfo.ToTitleCase 方法](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)

```
private void textBox1_Leave(object sender, EventArgs e) 
{ 

    TextInfo myTI = new CultureInfo("en-US",false).TextInfo;
    textBox1.Text = myTI.ToTitleCase(textBox1.Text)

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:41:54.690

作为上一个答案的后续，如果您将以下几行添加到正文的其余部分，您将确保保持正确的行为：

```
 textBox1.SelectionStart = textBox1.TextLength;
        textBox1.SelectionLength = 0; 
```

所以完整的解决方案是：

```
private void textBox1_Leave(object sender, EventArgs e) 
{ 
        //Original from JW's answer
        TextInfo myTI = new CultureInfo("en-US",false).TextInfo;
        textBox1.Text = myTI.ToTitleCase(textBox1.Text);
        //New lines to ensure the cursor is always at the end of the typed string.
        textBox1.SelectionStart = textBox1.TextLength;
        textBox1.SelectionLength = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T13:42:45.563

这应该可以解决您的问题：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        TextInfo myTI = new CultureInfo("en-US", false).TextInfo;
        textBox1.Text = myTI.ToTitleCase(textBox1.Text);
        textBox1.SelectionStart = textBox1.Text.Length;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T13:42:51.007

我会在`Regex`这里使用 a ，因为它实现起来更简单，而且我认为您`TextBox`不会持有大字符串。由于您希望在编写时自动更正字符串，因此您需要`TextChanged`事件而不是事件`Leave`：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    Regex regex = new Regex(" [a-z]");
    foreach (Match match in regex.Matches(textBox1.Text))
        textBox1.Text = regex.Replace(textBox1.Text, match.Value.ToUpper());
} 
```

# c - 许多无效的符号索引和对 main 的未定义引用

> ID：15224880
> 
> 赞同：1
> 
> 时间：2013-03-05T13:21:45.620
> 
> 标签：c, compilation, linker, compiler-errors

我创建了两个程序。一个是myThreads.c，另一个是myThreads_test.c，都在同一个目录下。在该目录中，我还有 libslack.c 用于其列表功能。最后，我确实有一个 myThreads.h

我尝试使用编译：

```
gcc -o  myThreads_test.c myThreads.c -DHAVE_PTHREAD_RWLOCK=1 -lslack  -lrt 
```

或者

```
gcc -o  myThreads.c myThreads_test.c -DHAVE_PTHREAD_RWLOCK=1 -lslack  -lrt 
```

并得到以下错误：

```
 /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 0 has      invalid symbol index 11
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 1 has invalid symbol index 12
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 2 has invalid symbol index 2
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 3 has invalid symbol index 2
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 4 has invalid symbol index 11
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 5 has invalid symbol index 13
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 6 has invalid symbol index 13
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 7 has invalid symbol index 13
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 8 has invalid symbol index 2
   /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 9 has invalid symbol index 2
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 10 has invalid symbol index 12
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 11 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 12 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 13 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 14 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 15 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 16 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 17 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 18 has invalid symbol index 13
  /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 19 has invalid symbol index 13
 /usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 20 has invalid symbol index 13
/usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 21 has invalid symbol index 13
/usr/bin/ld: /usr/lib/debug/usr/lib/i386-linux-gnu/crt1.o(.debug_info): relocation 22 has invalid symbol index 21
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
 collect2: ld returned 1 exit status 
```

这很奇怪，因为似乎链接器抛出了错误而不是编译器。除此之外，根据 c 程序在上述编译命令中的顺序，myThreads.c 被删除或 myThreads_test.c 被删除。我以前从未见过。

所以我尝试使用上面的不同行进行编译。我觉得这与我编译的方式有关。

这是 myThreads.c

```
/*!
 @file myThreads.c
 An implementation of a package for creating, using and
 managing preemptive threads in linux. 
*/

// Assignment 1
// Author: Georges Krinker
// Student #: 260369844
// Course: ECSE 427 (OS)
// Note: This file has been commented using doxygen style. 
//       The API can be found at gkrinker.com/locker/OS/pa1
//       Refer to doxygen.org for more info

 /********************************************//**
 *  Includes
 ***********************************************/

#include <signal.h>
#include <sys/time.h>
#include <time.h>
#include <stdio.h>      
#include <stdlib.h>     
#include <math.h>
#include "myThreads.h"

/********************************************//**
 *  Defines
 ***********************************************/

#define MAX_NUMBER_OF_THREADS 20    ///< Limit on number of threads that can be created
#define MAX_NUMBER_OF_SEMAPHORES 5  ///< Limit on number of semaphores that can be created
#define DEFAULT_QUANTUM 250         ///< Default value for quantum if non is specified

/**
 * Thread States
 */
#define BLOCKED 0
#define RUNNABLE 1
#define EXIT 2
#define RUNNING 3
#define NOTHREAD -1

 /**
  * Error Handling
  */

#define handle_error(msg) \
    do { perror(msg); exit(EXIT_FAILURE); } while(0)

/********************************************//**
 *  Global Variables
 ***********************************************/

static ucontext_t mainContext;                          ///< Main context for initial thread
static int quantum;                                     ///< Quantum
static int threads_completed;                           ///< 1 if all threads finished execution, ie EXIT state
static int currentThread;                               ///< ID of currently running thread
static long dispatcherCount;                            ///< Number of times the dispatcher has been called. 

static List *runQueue;                                  ///< Thread Run Queue. Holds indices to the tcb table
static mythread_control_block table[MAX_NUMBER_OF_THREADS];                     ///< Holds thread control blocks
static semaphore semaphores[MAX_NUMBER_OF_SEMAPHORES];      ///< Holds semaphores
static int tableIndex;                                  ///< Holds the next free table index in the table
static int semaphoresIndex;                             ///< Holds the enxt free semaphore index in the table

static sigset_t block_alarm;                            ///< The signal set that will be blocked

/********************************************//**
 *  Functions
 ***********************************************/

 /**
 * This function initializes all the global data structures for the thread system. 
 *
 * Creates a new Run Queue and initilaizes the indices for both the 
 * TCB table and Semaphore table to 0\. It then initializes the TCB
 * and semaphore table. Finally, [TO BE COMPLETED]
 */
 int mythread_init(){
    runQueue = list_create(NULL);
    tableIndex=0;
    semaphoresIndex=0;
    currentThread = -1; //No threads have been created yet.
    int i;
    quantum = DEFAULT_QUANTUM;
    threads_completed = 0;

    //Set all Thread Statuses to 'No Thread' in the TCB table
    for(i=0;i<MAX_NUMBER_OF_THREADS;i++){
        table[i].status=NOTHREAD;
    }
    // Set all semaphores to inactive
    int j;
    for(j=0; j<MAX_NUMBER_OF_SEMAPHORES; j++)
        semaphores[j].active = 0;

    sigemptyset (&block_alarm);
    sigaddset (&block_alarm, SIGALRM);
}

/**
 * This function creates a new thread.
 *
 * The function is responsible for allocating the stack and setting
 * up the user context appropriately. The newly created thread
 * starts running the threadfunc function when it starts. The
 * threadname is stored in the TCB and is printed for info 
 * purposes The newly created thread is in the RUNNABLE
 * state when inserted into the system. It is added to the run queue.
 * @return the ID of the newly created thread
 * @param *threadfunc() function to be called on context switch
 * @param stacksize size of stack to be allocated to
 */
int mythread_create(char *threadName, void (*threadfunc)(), int stacksize){

    // Handle the error if any
    if (getcontext(&table[tableIndex].context) == -1)
      handle_error("ERROR IN GETCONTEXT!");

    // Allocate a stack for the new thread and set it's return context
    table[tableIndex].context.uc_stack.ss_size = stacksize;             //Set stack size
    table[tableIndex].context.uc_stack.ss_sp = malloc(stacksize);       // allocate that space
    table[tableIndex].context.uc_link = &mainContext;                   // set the return context as the main Context

    // Modify the context and fill out the thread info on the TCB table
    makecontext(&table[tableIndex].context, threadfunc, 0);             // set the function call and 0 arguments
    table[tableIndex].name = threadName;                                // set the thread name
    table[tableIndex].threadID = tableIndex;                            // set the thread ID
    table[tableIndex].status = RUNNABLE;                                // set the thread as RUNNABLE
    runQueue = list_append_int(runQueue, tableIndex);                   // add it to the run queue

    tableIndex++;                                                       //point to the next free slot

    return tableIndex-1;                                                // returns ID of thread
}
/**
 * This function is called at the end of the function that was invoked
 * by the thread. 
 *
 * The function firstly masks signals, sets the status of that
 * thread to 'EXIT' and then unblocks signals before returning.
 */
void mythread_exit(){ 
    sigprocmask (SIG_BLOCK, &block_alarm, NULL);
    table[currentThread].status=EXIT;
    sigprocmask (SIG_UNBLOCK, &block_alarm, NULL);
}
/**
 * Sets the quantum for the round robin (RR) scheduler.
 *
 * @param quantum_size quantum size in us
 */
void set_quantum_size(int quantum_size){
    quantum = quantum_size;
}

/**
 * Schedules threads in a Round Robin fashion.
 *
 * The function starts by checking if there are no more threads to run.
 * If that is the case, it sets threads_completed to 1 so that 
 * run_threads() will terminate and resume to the mainContext.
 * If there are still runnable threads, the dispatcher switches threads
 * by swapping context, and putting the expired thread at the end of the
 * run queue. Finally, if there is only one runnable thread, that thread
 * is allowed to run for one more quantum.
 */
void dispatcher(){  
    dispatcherCount++;
    //if there are no more threads to run, and the current thread is done, set
    // threads_completed to 1
    if(list_empty(runQueue) && table[currentThread].status==EXIT){
            threads_completed=1;
            swapcontext(&table[currentThread].context, &mainContext);
        }
        //else switch to the next thread
    else if(!list_empty(runQueue)){ 
        int nextThread = list_shift_int(runQueue);                          
        int tempCurrent = currentThread; 
        currentThread = nextThread;
        // if the current thread (which is yielding to the next runnable thread) is runnable, queue it 
        //back in the runqueue
        if(table[tempCurrent].status != EXIT && table[tempCurrent].status!=BLOCKED){
                runQueue = list_append_int(runQueue, tempCurrent);
                table[tempCurrent].status = RUNNABLE;
        }
        table[nextThread].status = RUNNING; //set the the enxt thread to run
        sigprocmask (SIG_BLOCK, &block_alarm, NULL); //stop the dispatcher from being called while updating timing
        clock_gettime(CLOCK_REALTIME, &table[tempCurrent].stopTime); //record stop time
        table[tempCurrent].elapsedTime += (double) (table[tempCurrent].stopTime.tv_nsec - table[tempCurrent].startTime.tv_nsec); //update elapsed time
        clock_gettime(CLOCK_REALTIME, &table[currentThread].startTime);//record start timer of new thread
                sigprocmask (SIG_UNBLOCK, &block_alarm, NULL);
        //switch context
        swapcontext(&table[tempCurrent].context, &table[nextThread].context); 
    }
    else{
        //Keep the only thread that's runnable for 1 more quantum (do nothing!)
    }
}

/**
 * The runthreads() switches control from the main thread to one of the threads in the runqueue.
 *
 * The function starts by defining a signal timer that triggers every
 * quantum usecs and calls the dispatcher. The function then starts the
 * first thread by doing a context switch.
 */
void runthreads(){
    //Set up the signal alarm to call dispatcher() every quantum interval
    struct itimerval tval;
    sigset(SIGALRM, dispatcher);
    tval.it_interval.tv_sec = 0;
    tval.it_interval.tv_usec = quantum;
    tval.it_value.tv_sec = 0;
    tval.it_value.tv_usec = quantum;
    setitimer(ITIMER_REAL, &tval, 0);

    // If there is nothing to run, throw an error!
    if(list_empty(runQueue)){
        handle_error("In runthreads: RUN QUEUE IS EMPTY!");
    }
    else{
        int nextThread = list_shift_int(runQueue);                          //find the next thread to run
        currentThread = nextThread;                                         //make it the current thread
        table[currentThread].status = RUNNING;                              //set it to running
        sigprocmask (SIG_BLOCK, &block_alarm, NULL);                        //stop signal from interrupting the timing calculations
        clock_gettime(CLOCK_REALTIME, &table[currentThread].startTime);     //record start time of the new current thread
        sigprocmask (SIG_UNBLOCK, &block_alarm, NULL);
        swapcontext(&mainContext, &table[nextThread].context);              //swap context
    }
    //only stop when there are no more threads to run!  
    while(!threads_completed);
}
/**
 * This function creates a semaphore and sets its initial value to the given parameter. 
 *
 * @param value initial semaphore value
 */
int create_semaphore(int value){
    // handle error as usual if value is less than 0
    if(value < 0)
           handle_error("semaphore initialization failed - value less than 0.");
    else{
        semaphores[semaphoresIndex].initialValue = value;                               //set initial value to value
        semaphores[semaphoresIndex].value = semaphores[semaphoresIndex].initialValue;   //set value
        semaphores[semaphoresIndex].active = 1;                                         // make it ative now
        semaphores[semaphoresIndex].waitingThreads = list_create(NULL);                 //create a waitingThreads list for it
    }
    semaphoresIndex++;

    return semaphoresIndex-1; //return ID
}

/**
 * Calls wait() on a Semaphore
 *
 * When a thread calls this function, the value of the semaphore is decremented.
 * If the value goes below 0, the thread is put into a WAIT state. That means
 * calling thread is taken out of the runqueue if the value of the semaphore
 * goes below 0.
 * @param semaphore index of semaphore to be manipulated in the table 
 *
 */
void semaphore_wait(int semaphore){ 
    long oldDispatcherCount=dispatcherCount;
    //if trying to access a semaphore that doesn't show or is inactive handle it
    if(semaphore > semaphoresIndex || semaphores[semaphore].active==0)
        handle_error("Wrong semaphore index in wait()");

    sigprocmask (SIG_BLOCK, &block_alarm, NULL);                                //mask signals for changing semaphore value (indivisibility)
    if(--semaphores[semaphore].value<0){                                        // if value < 0, add thread to waiting queue
        list_append_int(semaphores[semaphore].waitingThreads, currentThread);   
        table[currentThread].status = BLOCKED;                                  // change the status of the semaphore to BLOCKED
    }
    sigprocmask (SIG_UNBLOCK, &block_alarm, NULL);                              // Re-nable signals
    while(dispatcherCount == oldDispatcherCount);                               //wait for the scheduler to switch threads (could be made more efficient)
}
/**
 * Calls signal() on a Semaphore
 *
 * When a thread calls this function the value of the semaphore is incremented.
 * If the value is not greater than 0, then we should at least have one thread
 * waiting on it. The thread at the top of the wait queue associated with the
 * semaphore is dequeued from the wait queue and queued in the run queue. The
 * thread state is then set to RUNNABLE.
 * @param semaphore index of semaphore to be manipulated in the table 
 * 
 */
void semaphore_signal(int semaphore){
    //if trying to access a semaphore that doesn't show or is inactive handle it
    if(semaphore > semaphoresIndex || semaphores[semaphore].active <0)
        handle_error("Wrong semaphore index in signal()");

    if(++semaphores[semaphore].value<=0){                                       // if there are threads waiting...
        if(list_empty(semaphores[semaphore].waitingThreads))                    //contradiction! No thread waiting? Error!
            handle_error("in Semaphore signal: there should be at least one waiting thread in semaphore");
        //Dequeue a waiting thread and set it to RUNNABLE. Then add it to the run queue
        int readyThread = list_shift_int(semaphores[semaphore].waitingThreads);
        table[readyThread].status = RUNNABLE;
        list_append_int(runQueue, readyThread);
    }
}
/**
 * Destroys a semaphore.
 *
 * A call to this function while threads are waiting on the semaphore should fail.
 * That is the removal process should fail with an appropriate error message. 
 * If there are no threads waiting, this function will proceed with the removal
 * after checking whether the current value is the same as the initial value of 
 * the semaphore.  If the values are different, then a warning message is 
 * printed before the semaphore is destroyed.
 * @param semaphore index of semaphore to be manipulated in the table 
 * 
 */
void destroy_semaphore(int semaphore){
    //if trying to access a semaphore that doesn't show or is inactive handle it
    if(semaphore > semaphoresIndex || semaphores[semaphore].active ==0)
        handle_error("Wrong semaphore index in destroy()");
    //initil and final value check
    if(semaphores[semaphore].value != semaphores[semaphore].initialValue){
        puts("\nWARNING: Destroying a semaphore with different initial and final values!\n");
    }
    //check that there are no threads waiting on this baby
    if(!list_empty(semaphores[semaphore].waitingThreads)){
        printf("Semaphore %i was not destroyed since one or more threads are waiting on it..\n",semaphore);
    }
    //destroy it by setting it to inactive!
    else{
    semaphores[semaphore].active = 0;
    }
}
/**
 * Prints the state of all threads that are maintained by the library at
 * any given time.
 *
 * For each thread, it prints the following information in a tabular 
 * form: thread name, thread state (print as a string RUNNING, BLOCKED, 
 * EXIT, etc), and amount of time run on CPU.
 * 
 */
void my_threads_state(){
    int i;
    char* string;
    for(i=0; i<MAX_NUMBER_OF_THREADS; i++){
        if(table[i].status != -1){
            switch(table[i].status){
                case 0: string = "BLOCKED"; break;
                case 1: string = "RUNNABLE"; break;
                case 3: string = "RUNNING"; break;
                case 2: string = "EXIT"; break;
            }
            printf("thread name: %s with ID number: %i is in state: %s and has run for %fms.\n",
             table[i].name, i, string, table[i].elapsedTime/1000000);
        }
    }
} 
```

这是 myThreads.h

```
/*!
 @file myThreads.h
 An implementation of a package for creating, using and
 managing preemptive threads in linux. 
*/

// Multiple-include guard
#ifndef __myThreads_H_
#define __myThreads_H_

 #include <ucontext.h>
 #include <slack/std.h>  
 #include <slack/list.h>

/********************************************//**
 *  Structures
 ***********************************************/

 /*! \brief Structure that represents the thread control block (TCB). 
 */ 

 typedef struct _mythread_control_block {
    ucontext_t context;
    char *name;
    int threadID; //Between 0-# of Threads
    int status; // Any of the above defines
    struct timespec startTime;  //when it was created
    struct timespec stopTime;   // when it was stopped
    double elapsedTime; //start-stop in ns

 }mythread_control_block;

 typedef struct _mythread_semaphore{
    int value; 
    int initialValue;
    int active;
    List *waitingThreads; // holds indices to the semaphores table
}semaphore;

/********************************************//**
 *  Functions
 ***********************************************/

 /**
 * This function initializes all the global data structures for the thread system. 
 *
 * Creates a new Run Queue and initilaizes the indices for both the 
 * TCB table and Semaphore table to 0\. It then initializes the TCB
 * and semaphore table. Finally, [TO BE COMPLETED]
 */
 int init_my_threads();
/**
 * This function creates a new thread.
 *
 * The function is responsible for allocating the stack and setting
 * up the user context appropriately. The newly created thread
 * starts running the threadfunc function when it starts. The
 * threadname is stored in the TCB and is printed for info 
 * purposes The newly created thread is in the RUNNABLE
 * state when inserted into the system. It is added to the run queue.
 * @return the ID of the newly created thread
 * @param *threadfunc() function to be called on context switch
 * @param stacksize size of stack to be allocated to
 */
int mythread_create(char *threadName, void (*threadfunc)(), int stacksize);

/**
 * This function is called at the end of the function that was invoked
 * by the thread. 
 *
 * The function firstly masks signals, sets the status of that
 * thread to 'EXIT' and then unblocks signals before returning.
 */
void mythread_exit();

/**
 * Sets the quantum for the round robin (RR) scheduler.
 *
 * @param quantum_size quantum size in us
 */
void set_quantum_size(int quantum_size);

/**
 * Schedules threads in a Round Robin fashion.
 *
 * The function starts by checking if there are no more threads to run.
 * If that is the case, it sets threads_completed to 1 so that 
 * run_threads() will terminate and resume to the mainContext.
 * If there are still runnable threads, the dispatcher switches threads
 * by swapping context, and putting the expired thread at the end of the
 * run queue. Finally, if there is only one runnable thread, that thread
 * is allowed to run for one more quantum.
 */
void dispatcher();

/**
 * The runthreads() switches control from the main thread to one of the threads in the runqueue.
 *
 * The function starts by defining a signal timer that triggers every
 * quantum usecs and calls the dispatcher. The function then starts the
 * first thread by doing a context switch.
 */
void runthreads();

/**
 * This function creates a semaphore and sets its initial value to the given parameter. 
 *
 * @param value initial semaphore value
 */
 int create_semaphore(int value);

 /**
 * Calls wait() on a Semaphore
 *
 * When a thread calls this function, the value of the semaphore is decremented.
 * If the value goes below 0, the thread is put into a WAIT state. That means
 * calling thread is taken out of the runqueue if the value of the semaphore
 * goes below 0.
 * @param semaphore index of semaphore to be manipulated in the table 
 *
 */
void semaphore_wait(int semaphore);

/**
 * Calls signal() on a Semaphore
 *
 * When a thread calls this function the value of the semaphore is incremented.
 * If the value is not greater than 0, then we should at least have one thread
 * waiting on it. The thread at the top of the wait queue associated with the
 * semaphore is dequeued from the wait queue and queued in the run queue. The
 * thread state is then set to RUNNABLE.
 * @param semaphore index of semaphore to be manipulated in the table 
 * 
 */
 void semaphore_signal(int semaphore);

/**
 * Prints the state of all threads that are maintained by the library at
 * any given time.
 *
 * For each thread, it prints the following information in a tabular 
 * form: thread name, thread state (print as a string RUNNING, BLOCKED, 
 * EXIT, etc), and amount of time run on CPU.
 * 
 */
void my_threads_state();

#endif 
```

最后，这里是 myThreads_test.c

```
/*!
 @file myThreads_test.c
 A test program for testing myThreads.c 
*/

// Assignment 1
// Author: Georges Krinker
// Student #: 260369844
// Course: ECSE 427 (OS)
// Note: This file has been commented using doxygen style. 
//       The API can be found at gkrinker.com/locker/OS/pa1
//       Refer to doxygen.org for more info

 /********************************************//**
 *  Includes
 ***********************************************/

#include <stdio.h>      
#include <stdlib.h>     
#include "myThreads.h"

 /********************************************//**
 *  Global Variables
 ***********************************************/

 int mutex;                                         //Mutex used by shared resources 

 int a;
 int b;
 int mult;

 void multiply() {
    int i;
    for(i=0;i<1000;++i){
    semaphore_wait(mutex);  
    mult=mult+(a*b);
    a++;
    b++;
    semaphore_signal(mutex);    
    }
    mythread_exit();
 }

 int main(){
    a=0;
    b=0;
    mult=0;
    mutex=create_semaphore(1);

    int threads = 12;                               // How many threads are to be created
    char* names[] = {
        "thread 0",
        "thread 1",
        "thread 2",
        "thread 3",
        "thread 4",
        "thread 5",
        "thread 6",
        "thread 7",
        "thread 8",
        "thread 9",
        "thread 10",
        "thread 11"
    };

    mythread_init();                                // Initialize Package

    set_quantum_size(50);                           // set quantum to 50

    //Create threads

    int i=0;
    int dummy = 0;

    for(i=0; i<threads; i++)
    {
       dummy=mythread_create(names[i], (void *) &multiply, 100);
    }

    runthreads();                               // Run threads

    my_threads_state();                         // See state

    printf("The value of mult is %d\n", mult);

    return 0;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:50:56.620

`-o`表示要指定输出文件的方式。因此，

```
gcc -o  myThreads.c myThreads_test.c ... 
```

没有多大意义。尝试分别编译这两个文件：

```
gcc myThreads.c -o myThreads ...
gcc myThreads_test.c -o myThreads_test ... 
```

其中`myThreads`和`myThreads_test`将是可执行文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:20:40.367

`gcc -o myThreads_test.c myThreads.c`编译`myThreads.c`二进制输出并将其存储在`myThreads_test.c`. 所以，你`myThreads_test.c`现在是一个二进制文件！对于您的其他编译语句，反之亦然。这就是您的 .c 文件之一受到影响的原因。

只需将编译语句更改为：

`gcc -o myThreads myThreads_test.c myThreads.c -DHAVE_PTHREAD_RWLOCK=1 -lslack -lrt`

# r - R 无法识别正确的 libstdc++.so 库

> ID：15224886
> 
> 赞同：0
> 
> 时间：2013-03-05T13:21:58.217
> 
> 标签：r, libstdc++

当我尝试`kernlab`在 Scientific Linux 5.5 上的 R 2.15.2 上安装该软件包时，我收到以下错误消息：

```
Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object '~/bin/lib64/R/library/kernlab/libs/kernlab.so':
  /usr/java/jdk1.6.0_41/jre/../lib/amd64/libstdc++.so.6: version `GLIBCXX_3.4.9' not found (required by ~/bin/lib64/R/library/kernlab/libs/kernlab.so) 
```

R 2.11 安装在同一个系统上，安装 kernlab 就好了。此外，以下报告没有错误：

```
ldd -r ~/bin/lib64/R/library/kernlab/libs/kernlab.so 
```

因此，似乎 R 根本无法使用正确的库。我设置`LD_LIBRARY_PATH`为，这似乎是`/usr/local/gcc-4.6.0/lib64/`工作版本的位置，但这并没有帮助。`libstdc++.so.6`

R 怎么会拒绝使用正确的库？我怎样才能让它使用正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T15:29:49.603

> R 怎么会拒绝使用正确的库？

`libstdc++.so`在加载R 共享库之前，进程中的其他内容必须加载旧版本。我很惊讶 LD_LIBRARY_PATH 并没有帮助。

# c - c 指针和数组

> ID：15224892
> 
> 赞同：7
> 
> 时间：2013-03-05T13:22:10.460
> 
> 标签：c, arrays, pointers

```
#include <stdlib.h>
#include <stdio.h>

int main (void)
{
    int a[] = {1,2,3,4,5};
    int b[] = {0,0,0,0,0};
    int *p = b;

    for (int i =0; i < 5; i++)
    {
        b[i] = a[i]+1;
        *p = a[i]+1;
        p++;
    }
    for (int i = 0; i < 5; i++)
    {
        printf (" %i \t %i \t %i \n", *p++, b[i], a[i]);
    }
    return 0;
} 
```

对于这段代码，我知道为什么 a 和 b 的输出，但为什么指针具有相同的 a 值？

*p 是 b[0] = a[0]+1，不是吗？所以 p++ 意味着 b 的下一个地址，所以它是 b[1]=a[1]+1。

```
ie 
*p  b  a
1  2  1
2  3  2
3  4  3
4  5  4
5  6  5 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T13:24:50.033

你得到*未定义的行为*。在第一个循环的末尾`p`指向`b`. 在不重置它的情况下，您可以取消引用它并继续增加它，这两者都会导致*未定义的行为*。

*可能*是在您的实现中，数组在`a`array 之后立即存储`b`并且`p`已经开始指向 array `a`。这将是一种可能的“未定义”行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:46:37.350

在第一个for{}之后，p指向b[5]，但是b的大小是5，所以b[5]的值是未知的，printf *p和a[i]的值一样，原因可能是在内存中 b[5] 是 a[0]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T06:07:16.653

我认为你需要做的是添加一个`p = p - 5;`

```
#include <stdio.h>
int main (void)
{
    int a[] = {1,2,3,4,5};
    int b[] = {0,0,0,0,0};
    int *p = b;
       int i =0;

    for (i =0; i < 5; i++)
    {
        b[i] = a[i]+1;
        *p = a[i]+1;
        p++;
    }
    p = p - 5;
    for (i = 0; i < 5; i++)
    {
        printf (" %i \t %i \t %i \n", *p++, b[i], a[i]);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-05T14:44:16.820

您不应该为打印和递增数组的值创建单独的循环。在同一个循环中执行并执行以下操作以获得您的输出:) #include #include

```
int main(void)
{

int a[]={1,2,3,4,5};
int b[]={0,0,0,0,0};
int c[]={0,0,0,0,0};
int *p;
int i;
p=c;
for( i =0 ; i<5 ; i++)
{
    b[i]=a[i]+1;
    *p=b[i]-1;
    //*p++;

//for( i =0 ; i<5 ; i++)

    printf(" %i \t %i \t %i \n" ,*p,b[i],a[i]);

}
return 0;
} 
```

# javascript - 移除 带有 jQ uery 的元素

> ID：15224895
> 
> 赞同：0
> 
> 时间：2013-03-05T13:22:15.767
> 
> 标签：javascript, jquery

这是一个 jQuery 函数，用于确定表中图像的类别并采取相应措施。如果图像父级没有 class `selected`，它会给它那个 class 然后添加`td id`到 div （订单）。如果它确实有 class `selected`，它应该删除它确实的 class，然后删除包含`td id`.

```
$(document).ready(function () {
    $('td img').click(function () {
        if ($(this).parent().hasClass('x')) {
            alert("Seat " + ($(this).parent().attr("id")) + " is taken");
        } else if ($(this).parent().hasClass('selected')) {
            $(this).attr('src', 'images/a.gif');
            $(this).parent().removeClass('selected');
            var z = $(this).parent().attr('id');
            $(z).remove();
            return false;
        } else {
            $(this).attr('src', 'images/c.gif');
            $(this).parent().addClass('selected');
            alert($(this).parent().attr("class"));
            var z = $(this).parent().attr('id');
            $('<p>').attr('id', z).text(z).appendTo('#order');
            return false;
        };
    });
}); 
```

它一直有效，直到删除`p`元素，它只是没有。是动态设置的`p id`，并且与 相同`td id`，因此使用变量来选择 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:32:43.383

好的，所以这是这里的答案组合。

首先，id 不是唯一的，所以我给它们添加了一个后缀：

`var z = $(this).parent().attr('id'); $('<p>').attr('id', z+'1' ).text(z).appendTo('#order');'`

然后使用了的建议，`$('#' + z).remove();`但将其更改为我的新后缀，所以它现在显示了这个`$('#' + z+'1').remove();`

All seems to be working now, thanks for your help.

# android - 如何在“发布”版本中不编译某些 Android 菜单项

> ID：15224897
> 
> 赞同：2
> 
> 时间：2013-03-05T13:22:19.180
> 
> 标签：android, debugging, release, menuitem

我有一个我称之为“调试”的菜单项，它做了一些对“调试”版本很方便的事情。我希望此菜单项不存在于“发布”APK 中。

有没有办法告诉编译器忽略 XML 菜单文件中的那些条目？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:27:03.487

如果您正在使用菜单 XML 资源，则可以将这些仅用于调试的选项隔离到它们自己的资源 XML 文件中。然后，除了膨胀你的主要的，你也膨胀了调试专用的，如果`BuildConfig.DEBUG`是`true`：

```
if (BuildConfig.DEBUG) {
  // inflate that second resource XML file
} 
```

如果您使用 Java 代码设置菜单，则可以执行相同的基本操作，将仅调试`add()`调用封装在`BuildConfig.DEBUG`.

原则上，即将推出的基于 Gradle 的构建系统将有助于使这变得更容易一些，但目前 AFAIK 还需要几个月的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:33:00.013

如果您使用 Jenkins 创建构建，您可以使用 shell 命令将调试菜单 xml 文件替换为生产版本。这对于 web 服务详细信息 xml 文件也非常有效。

# c# - Dynamics CRM 业务流程错误 已添加具有相同键的项目

> ID：15224900
> 
> 赞同：0
> 
> 时间：2013-03-05T13:22:30.913
> 
> 标签：c#, plugins, dynamics-crm-2011, crm, microsoft-dynamics

您好，我正在尝试为 ms dynamics crm 2011 编写插件。该插件从合同行中获取相关记录，然后应该为发票行实体创建记录。如果 fetchxml 只返回一条记录，则代码运行完美，但是如果它为具有多个合同行的合同循环，则会引发以下错误：

业务流程错误已添加具有相同键的项目

我想我需要为每条记录提供一个唯一的 ID，或者请查看下面的代码。

```
Entity invoiceline = new Entity("invoicedetail");
foreach (Entity contractdetail in contractdetails.Entities)
{
    tracingService.Trace("loop no. " + loopint + "  " + "InvoiceID: " + stringinvoiceid);
    loopint++;
    invoiceline["invoiceid"] = new EntityReference("invoice", invoiceid);

    //collect data from fetchxml
    var title = contractdetail.Attributes["title"];
    decimal quantity = Convert.ToDecimal(contractdetail.Attributes["initialquantity"]);
    var price = contractdetail.Attributes["price"];
    bool booleanover = true;

    //add to invoiceline array
    invoiceline.Attributes.Add("productdescription", title);
    invoiceline.Attributes.Add("quantity", quantity);
    invoiceline.Attributes.Add("priceperunit", price);
    invoiceline.Attributes.Add("isproductoverridden", booleanover);
    //invoiceline.Attributes.Add("invoicedetailid", invoiceid);

    //add too database
    service.Create(invoiceline);
    tracingService.Trace("Created:" + title + " record");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:06:44.493

这是因为您正在使用`Attributes.Add`.

属性集合实际上是一个字典，你不能将同一个键（`productdescription`,`quantity`等）添加到字典中两次。

因此，您已加载的实体记录已经具有这些键（因为您将其包含在 中`columnset`）

避免这种情况的最简单方法就是使用：`invoiceline["quanity"] = quantity;`

这将覆盖该键的现有值 - 或者如果它不存在，则将新的键值对添加到字典中。

相关阅读：[Dictionary.Add 方法](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:11:43.737

试着这样写：

```
Entity invoiceLine;
foreach (Entity contractDetail in contractDetails.Entities)
{
    invoiceline = new Entity("invoicedetail");
    ...
} 
```

# php - 我可以获得最后插入行的列吗？

> ID：15224905
> 
> 赞同：0
> 
> 时间：2013-03-05T13:22:40.130
> 
> 标签：php, mysql, sql, codeigniter

嗨，我正在使用 Codeigniter，并且会喜欢 CI 中的解决方案，但使用 mysqli 或 PDO 就足够了。

我想知道是否有办法在 MySql 5.1.54 中获取最后插入行的列

原因是我插入了一个空值，然后触发器将该空值更改为某个计算值，而不是获取最后插入的 id 并查询该值。

有什么办法可以做到吗？

**如果我不清楚：我知道我可以对最后插入的 id 运行查询，我的意思是我可以得到最后插入的“列”吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:27:48.873

您可以通过以下方式获取最后插入的 id

```
$this->db->insert_id(); 
```

并选择最后一行并正常使用

ref[查询助手](http://ellislab.com/codeigniter/user-guide/database/helpers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:29:49.957

PDO 带有[lastInsertId 方法](http://www.php.net/manual/en/pdo.lastinsertid.php)。然后就可以了`SELECT * FROM table WHERE id=return_of_this_function`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:48:31.320

我猜@Eric 正在寻找的答案是否定的。

# linux - linux：灵活的缓冲命令？

> ID：15224908
> 
> 赞同：1
> 
> 时间：2013-03-05T13:22:43.767
> 
> 标签：linux, command, buffer

是否有可用的命令可以在指定的字节数或时间段内缓冲传入流？例如

```
wget -O - http://video.com/myvid.mp4 | mybuffer -t 5s | myvidplayer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:57:06.680

尝试 带有选项的`pv`or`bar` 命令。`--buffer-size`

我认为经典`dd`命令也应该允许这样做。

# c - unsigned long long int pow

> ID：15224911
> 
> 赞同：6
> 
> 时间：2013-03-05T13:22:46.897
> 
> 标签：c

我有以下对整数运算的幂函数，它工作正常：

```
int ipow( int base, int exp )
{
    int result = 1;
    while( exp )
    {
        if ( exp & 1 )
        {
            result *= base;
        }
        exp >>= 1;
        base *= base;
    }
    return result;
} 
```

现在我想要一个允许 exp > 32 的版本。所以我使用 unsigned long long ints：

```
unsigned long long int ipow( int base, int exp )
{
    unsigned long long int result = 1ULL;
    while( exp )
    {
        if ( exp & 1 )
        {
            result *= (unsigned long long int)base;
        }
        exp >>= 1;
        base *= base;
    }
    return result;
} 
```

但是第二个版本似乎不起作用：

```
unsigned long long int x;
x = ipow( 2, 35 );
printf( "%llu\n", x ); 
```

这将输出 0。

我的 unsigned long long int 实现有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:30:23.593

你的`base`变量太小了。像其他人一样将其更改为`unsigned long long int`，因为它包含大于 的数字`2^32`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:30:55.143

C 标准的第 6.5p4 节：

> 某些运算符（一元运算符 ~ 和二元运算符 <<、>>、&、^ 和 |，统称为按位运算符）需要具有整数类型的操作数。这些运算符产生的值取决于整数的内部表示，并且具有符号类型的实现定义和未定义方面。

C标准第6.5p5节：

> 如果在计算表达式期间出现异常情况（即，如果结果未在数学上定义或不在其类型的可表示值范围内），则行为未定义。

`int`如果以前在此代码中使用它似乎是一个好主意，那么现在不应该。这两个部分都在说您的代码没有它可以移植的那样可移植。

# r - 在图表标题中显示捷克语字符

> ID：15224912
> 
> 赞同：1
> 
> 时间：2013-03-05T13:22:47.477
> 
> 标签：r

如何在图表标题中显示捷克语字符？

例子：

```
plot(rnorm(100),main="Žluťoučký kůň, úpěnlivě pěl ódy") 
```

结果是： ![在此处输入图像描述](../Images/d9ba2c58cf17d3ee9737bc6ed808a4de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:48:09.817

根据[此处](https://stackoverflow.com/questions/15147769/how-to-display-d-in-r-graphs)的答案，我使用了十六进制代码而不是直接编写文本。

例如，要让`Žluťoučký`你必须写：

`paste("\u017D","lu","\u0165","ou","\u010D","ký",sep="")`

捷克语字符及其十六进制代码列表（取自维基百科）

```
znak    hex
Á   U+00C1
Č   U+010C
Ď   U+010E
É   U+00C9
Ě   U+011A
Í   U+00CD
Ň   U+0147
Ó   U+00D3
Ř   U+0158
Š   U+0160
Ť   U+0164
Ú   U+00DA
Ů   U+016E
Ý   U+00DD
Ž   U+017D
á   U+00E1
č   U+010D
ď   U+010F
é   U+00E9
ě   U+011B
í   U+00ED
ň   U+0148
ó   U+00F3
ř   U+0159
š   U+0161
ť   U+0165
ú   U+00FA
ů   U+016F
ý   U+00FD
ž   U+017E 
```

# r - R：为wordcloud图形/ png添加标题

> ID：15224913
> 
> 赞同：15
> 
> 时间：2013-03-05T13:22:49.940
> 
> 标签：r, graphics, tm, word-cloud

我有一些工作 R 代码可以从术语文档矩阵生成标签云。

现在我想从许多文档中创建一大堆标签云，并在以后直观地检查它们。要知道标签云图片属于哪个文档/语料库，我想为生成的图形添加一个标题。我怎么做？

也许这很明显，但我仍然是 R 图形的初学者。

我自己的语料库太大，无法在此处列出，但此 SO 问题的代码（结合 SO 用户 Andrie 接受的答案的代码形式可以使用： [Spaces in wordcloud](https://stackoverflow.com/questions/8069571/spaces-in-wordcloud) I want to add a custom title and some more custom text像[这样的图片](https://i.stack.imgur.com/ziPvP.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T14:46:00.503

该`wordcloud()`函数填充整个绘图。这意味着您需要在绘图之前在图形设备上为标题预留空间。

由于`wordcloud`使用基本图形，因此您可以使用`par(mfrow=...)`或来执行此操作`layout()`。然后用 . 创建情节标题`text()`。

我用 来说明`layout()`，将示例改编为`?wordcloud`：

```
library(tm)
library(wordcloud)

x <- "Many years ago the great British explorer George Mallory, who 
was to die on Mount Everest, was asked why did he want to climb 
it. He said, \"Because it is there.\"

Well, space is there, and we're going to climb it, and the 
moon and the planets are there, and new hopes for knowledge 
and peace are there. And, therefore, as we set sail we ask 
God's blessing on the most hazardous and dangerous and greatest 
adventure on which man has ever embarked."

layout(matrix(c(1, 2), nrow=2), heights=c(1, 4))
par(mar=rep(0, 4))
plot.new()
text(x=0.5, y=0.5, "Title of my first plot")
wordcloud(x, main="Title") 
```

这会产生：

![在此处输入图像描述](../Images/097b65098fc4f4f49429d85e97d93aa5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:50:49.023

一种想法是导入图像，然后使用 再次保存它们`grid.raster`，并使用 添加标题`grid.text`。例如：

```
ll <- list.files(patt='*.png')
library(png)
library(grid)
imgs <- lapply(ll,function(x){
  img <- as.raster(readPNG(x))
  ## get the file name
  x.name <- gsub('(.*).png','\\1',x)
  ## new device for new image version
  png(file =paste(x.name,'_modified','.png',sep=''))
  grid.raster(img)
  ## here I add title
  grid.text(label = x.name,x=0.5,y=0.9,gp=gpar(cex=2))
  dev.off()

}) 
```

# applescript - 在 Apple 脚本中使用 Delimiter for 循环

> ID：15224914
> 
> 赞同：0
> 
> 时间：2013-03-05T13:22:53.243
> 
> 标签：applescript

我有一个小动作脚本。

将 lf 设置为 ASCII 字符 10 将 csvFile 设置为（选择带有提示“选择要读取的文件：”的文件）打开以访问 csvFile 将 contentOfCsv 设置为（使用分隔符 {",", lf} 读取 csvFile）关闭访问 csvFile

我想运行一个循环来为“contentOfCsv”的每个部分制作东西。

我怎么做？

谢谢/埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:47:12.983

尝试：

```
repeat with aPiece in contentOfCsv
    display dialog aPiece
    -- replace display dialog with code for aPiece
end repeat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:50:42.823

我是这样做的

```
set lf to ASCII character 10
set csvFile to (choose file with prompt "Select a file to read:")
open for access csvFile
set contentOfCsv to (read csvFile using delimiter {",", lf})
close access csvFile

repeat with theItem in contentOfCsv
  -- Do stuff
end repeat 
```

# c# - 有没有办法将 Silverlight UI 元素作为图像获取？

> ID：15224915
> 
> 赞同：5
> 
> 时间：2013-03-05T13:22:53.817
> 
> 标签：c#, silverlight, maps, arcgis

我想导出带有图形图层的 ArcGIS 地图对象的图像。我已经尝试过 esri 自己的网络服务进行导出，但它们不是那么高效和清晰，不支持复杂的几何形状，也不支持本地图层，例如谷歌地图提供商。服务仅支持 ArcGISTiledLayer 我希望它在所有图层中。因此，我在他们的论坛中进行了搜索，但他们说在下一个版本之前他们不会支持本地图层。

我在 codeplex 中尝试过 ImageTool 库和 WritableBitmapEx 库。但是，当我尝试从 WritableBitmap 获取 byte[] 时，出于某些安全原因，我始终无法访问其 Pixels 属性。应用程序抛出 SecurityException 并说“您无法访问此像素属性”。

那么，有没有办法获取 UIElement 控件的图像并将其保存到磁盘？或者是否有解决此安全异常的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:24:16.900

是的，图像工具库有一种方法可以在 png/jpg 等中执行此操作。

[http://imagetools.codeplex.com/](http://imagetools.codeplex.com/)

您也可以使用 RenderTargetBitmap - [http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)

这是一个如何将文件保存到磁盘的示例。你只能从对话框中做到这一点

[http://www.silverlightshow.net/items/Using-the-SaveFileDialog-in-Silverlight-3.aspx](http://www.silverlightshow.net/items/Using-the-SaveFileDialog-in-Silverlight-3.aspx)

**编辑 - 示例代码**

打电话

```
var objImage = new WritableBitmap(MyElement, MyElement.RenderTransform);

var bytData = objImage.ToPng(); 
```

扩展方法

```
using ImageTools.IO.Png;
using ImageTools;

public static byte[] ToPng(this WriteableBitmap Image)
{
    byte[] bytResult;

    using (MemoryStream objPngStream = new MemoryStream())
    {
        PngEncoder objPngEncoder = new PngEncoder();
        objPngEncoder.Encode(Image.ToImage(), objPngStream);
        objPngStream.Seek(0, SeekOrigin.Begin);
        bytResult = objPngStream.ToArray();
        objPngStream.Close();
    }
    return bytResult;
} 
```

# php - PHP'里面'里面'

> ID：15224916
> 
> 赞同：-3
> 
> 时间：2013-03-05T13:22:55.627
> 
> 标签：php, jquery

我有一些代码可以在将鼠标悬停在图像上时显示缩略图。

```
<div onmouseover="document.getElementById('logo').style.display='block';" 
     onmouseout="document.getElementById('logo').style.display='none';">
    <img src = "img.jpg"/>                                          
</div> 
```

这次我想选择要显示的图像而不是静态的“img.jpg”，它将存储在变量 $filename 中，然后我想将其附加到另一个 jquery 变量 $result：

我试过了，但单引号引起了混淆：

```
$result.= '
           <div onmouseover="document.getElementById('logo').style.display='block';" 
            onmouseout="document.getElementById('logo').style.display='none';">
               <img  src = "images/' . $filename.'"/>                                         
           </div>
'; 
```

混淆出现在“logo”、“block”和“none”周围的单引号中。在这种情况下如何包含单引号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:24:03.883

你必须逃避你的`'`with `\'`。

```
$result.= '
    <div onmouseover="document.getElementById(\'logo\').style.display=\'block\';" 
         onmouseout="document.getElementById(\'logo\').style.display=\'none\';">
        <img src="images/' . $filename . '"/>                                         
    </div>
'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:25:43.560

尝试这个

```
$result.= '
       <div onmouseover="document.getElementById(\'logo\').style.display=\'block\';" 
        onmouseout="document.getElementById(\'logo\').style.display=\'none\';">
           <img  src = "images/' . $filename.'"/>                                         
       </div>
'; 
```

# asp.net-mvc - 无法将选定的值 DropDownListFor 传递给 javascript 函数

> ID：15224920
> 
> 赞同：0
> 
> 时间：2013-03-05T13:23:05.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的简单测试模型：

```
public class MovieModel {

    public string SelectedCategorieID { get; set; }

    public List<CategorieModel> Categories { get; set; }

    public MovieModel() {
        this.SelectedCategorieID = "0";
        this.Categories = new List<CategorieModel>() {new CategorieModel {ID = 1,
            Name = "Drama"},
        new CategorieModel {ID = 2,
            Name = "Scifi"}};
    }
}

public class CategorieModel {
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

我的家控制器动作索引：

```
 public ActionResult Index() {

        Models.MovieModel mm = new Models.MovieModel();

        return View(mm);
    } 
```

我的强类型视图：

```
@model MvcDropDownList.Models.MovieModel
@{
    ViewBag.Title = "Home Page";
}
<script type="text/javascript">
    function categoryChosen(selectedCatID) {
//        debugger;
        var url = "Home/CategoryChosen?SelectedCategorieID=" + selectedCatID;
        $.post(url, function (data) {
            $("#minicart").html(data);
        });
    }
</script>

@using (Html.BeginForm("CategoryChosen", "Home", FormMethod.Get)) {

    <fieldset>
        Movie Type
        @Html.DropDownListFor(m => m.SelectedCategorieID, new SelectList(Model.Categories, "ID", "Name", Model.SelectedCategorieID), "---Select categorie---")
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>

}
<input type="button" value="Minicart test" onclick="categoryChosen('@Model.SelectedCategorieID');" />
<div id="minicart">
    @Html.Partial("Information")
</div> 
```

请忽略第一个输入，因为我正在使用带有“Minicart test”的第二个输入（HTML.Beginform 可以稍后学习其他内容）。迷你推车的东西来自另一个教程，我很抱歉。请不要让它分散你的注意力。

当按钮被点击时 categoryChosen 会调用 jQuery，它会调用动作：

```
 [AcceptVerbs("POST")]
    public ActionResult CategoryChosen(string SelectedCategorieID) {

        ViewBag.messageString = SelectedCategorieID;

        return PartialView("Information");

    } 
```

部分视图信息如下所示：

```
@{
    ViewBag.Title = "Information";
}

<h2>Information</h2>
<h2>You selected: @ViewBag.messageString</h2> 
```

我的问题是即使在我更改下拉列表中的值之后，为什么 Model.SelectCategorieID 为零（Model.SelectCategorieID = 0）？我究竟做错了什么？非常感谢您提前回答。如果您需要任何信息或任何不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:45:27.617

> 我的问题是即使在我更改下拉列表中的值之后，为什么 Model.SelectCategorieID 为零（Model.SelectCategorieID = 0）？

那是因为您在 onclick 处理程序中对该值进行了硬编码：

```
onclick="categoryChosen('@Model.SelectedCategorieID');" 
```

如果你想正确地做到这一点，你应该从下拉列表中读取值：

```
onclick="categoryChosen(this);" 
```

然后修改您的 categoryChosen 函数：

```
<script type="text/javascript">
    function categoryChosen(ddl) {
        // debugger;
        var url = 'Home/CategoryChosen';
        $.post(url, { selectedCategorieID: $(ddl).val() }, function (data) {
            $('#minicart').html(data);
        });
    }
</script> 
```

另外，我建议您使用 URL 帮助程序来生成要调用的 url，而不是在您的 javascript 函数中对其进行硬编码。最后但并非最不重要的一点是，我建议您不显眼地执行此操作，以便您可以将其放在单独的 javascript 文件中并停止混合标记和脚本。

因此，考虑到我的评论后，您的代码如下所示：

```
@model MvcDropDownList.Models.MovieModel
@{
    ViewBag.Title = "Home Page";
}

@using (Html.BeginForm("CategoryChosen", "Home", FormMethod.Get)) 
{
    <fieldset>
        Movie Type
        @Html.DropDownListFor(
            m => m.SelectedCategorieID, 
            new SelectList(Model.Categories, "ID", "Name"), 
            "---Select categorie---",
            new { 
                id = "categoryDdl"
                data_url = Url.Action("CategoryChoosen", "Home") 
            }
        )
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>

}

<input type="button" value="Minicart test" id="minicart-button" />

<div id="minicart">
    @Html.Partial("Information")
</div> 
```

然后在您单独的 javascript 文件中不显眼地订阅您的按钮的单击处理程序并发送 AJAX 请求：

```
$(function() {
    $('#minicart-button').click(function() {
        // debugger;
        var $categoryDdl = $('#categoryDdl');
        var selectedCategorieID = $categoryDdl.val();
        var url = $categoryDdl.data('url');
        $.post(url, { selectedCategorieID: selectedCategorieID }, function (data) {
            $('#minicart').html(data);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:53:00.520

**为您的下拉列表提供一个 ID：**

```
@Html.DropDownListFor(m => m.SelectedCategorieID, new SelectList(Model.Categories, "ID",
  "Name", Model.SelectedCategorieID), new {id = "myDropDownList"}) 
```

**你的javascript函数如下：**

```
<script type="text/javascript">
  function categoryChosen() {
    var cat = $("#myDropDownList").val();

    var url = "Home/CategoryChosen?SelectedCategorieID=" + cat;
    $.post(url, function (data) {
        $("#minicart").html(data);
    });
  }
</script> 
```

**为什么你的代码不起作用？**

```
onclick="categoryChosen('@Model.SelectedCategorieID') 
```

生成为

```
onclick="categoryChosen('0') 
```

因为`SelectedCategorieID`它生成时的值为0。

# nosql - Couchbase Server 只能使用 RAM 内存吗？

> ID：15224931
> 
> 赞同：3
> 
> 时间：2013-03-05T13:23:26.217
> 
> 标签：nosql, memcached, couchbase

我们想在我们的应用程序中利用 No-Sql 数据库，我们发现了 Couchbase。

[我在另一个堆栈问题](https://stackoverflow.com/questions/8896/memcached-on-windows-x64)上读过它，有人说您可以将 Couchbase 配置为仅与 Memcached 一起使用（因此它仅将数据保存在内存上，而不是磁盘上）。

但是，我在文档中没有找到任何关于此的[内容](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-getting-started-setup.html)。

是否可以设置 Couchbase 服务器以使用 RAM 内存？

或者，您在客户端指定应保存数据的位置？（磁盘或内存）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:07:28.300

查看： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-introduction-basics.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-introduction-basics.html)

Couchbase 2.0 文档明确声明它是一个内存数据库。根据我的经验，存储桶都存在于 RAM 中。您可以设置每个存储桶的大小以适当地对 RAM 进行分区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:10:42.210

是的，只需使用[memcached 存储桶](http://docs.couchbase.com/admin/admin/Concepts/concept-dataStorage.html)。就这样

# php - 检测从数组中添加和删除了哪些值

> ID：15224933
> 
> 赞同：1
> 
> 时间：2013-03-05T13:23:30.127
> 
> 标签：php, arrays

我有一个包含两个数组的脚本，初始数据数组 ( `$initial`) 和修改后的数据数组 ( `$modified`)，但在检测数组之间的差异时遇到了问题。我需要确定添加了哪些值（它们之间的键将不同），以及删除了哪些值，然后将更改放入两个数组中（`$dataAdded`和`$dataRemoved`）。

是否有任何功能可以做到这一点，或者如果没有，是否有任何我可以遵循的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:31:13.213

[array_diff()](http://docs.php.net/function.array-diff)可以做到这一点。

```
<?php
$initial = array(1,2,3,4,5,6,7,8);
$modified = foo($initial);

$removed = array_diff($initial, $modified);
$added = array_diff($modified, $initial);

echo 'removed=', join(', ', $removed), "\n";
echo 'added=', join(', ', $added), "\n";

function foo($a) {
    // "removing" all odd numbers
    // and "adding" 10,12,14,16
    return array_map(function($e) { return $e*2; }, $a);
} 
```

印刷

```
removed=1, 3, 5, 7
added=10, 12, 14, 16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:23:30.127

我打算取消这个问题，但我觉得可能对遇到类似问题的其他人有用，或者如果这里有一些我错过的愚蠢的东西，但无论如何：

我使用了以下内容：

```
$dataAdded = array();
$dataRemoved = array();
foreach ($modified as $data) {
    if (!in_array($data, $initial)) {
        $dataAdded[] = $data;
    }
}
foreach ($initial as $data) {
    if (!in_array($data, $modified)) {
        $dataRemoved[] = $data;
    }
} 
```

# delphi - TPNGImage `LoadFromStream` 在某些情况下不起作用

> ID：15224938
> 
> 赞同：2
> 
> 时间：2013-03-05T13:23:39.753
> 
> 标签：delphi, delphi-xe, vcl

我正在使用 VCL`TPNGImage`类来加载 PNG 图像。如果我使用( is a并且它可能包含) 创建`TPNGImage`对象，当我尝试使用加载 png 图像时，我会淡化访问冲突异常。你有什么想法？`FindClass(S).Create``S``String``'TPNGImage'``LoadFromStream`

请注意，我使用以下代码创建一个新实例：

```
P := TPNGImage(FindClass('tpngimage').NewInstance); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:36:55.777

你说你通过调用创建类：

```
P := TPNGImage(FindClass('tpngimage').NewInstance); 
```

该代码将分配一个实例，但不会运行构造函数。那是你的问题。如果您没有正确构建实例，您就不能期望实例能够正常工作。

你需要使用

```
P := TPNGImage.Create; 
```

* * *

现在，听起来好像您希望能够编写可以在各种`TGraphic`后代上工作的代码。你可以做到这一点。

首先声明你的变量是 type `TGraphic`。

```
var
  Image: TGraphic; 
```

然后获取类引用。

```
var
  Cls: TPersistentClass;
....
Cls := FindClass('TPNGImage'); 
```

然后实例化对象，如果类引用是兼容的。

```
if Cls.InheritsFrom(TGraphic) then
  Image := TGraphicClass(Cls).Create; 
```

因为`TGraphic`使用将运行`TPNGImage`构造函数的虚拟构造函数。您可以使用相同的代码来构建 JPEG、BMP、GIF 等。

# javascript - 在多个 chrome 选项卡中打开搜索结果

> ID：15224941
> 
> 赞同：1
> 
> 时间：2013-03-05T13:23:47.087
> 
> 标签：javascript, google-chrome, browser, tabs

我正在创建一个搜索实用程序来搜索各种资源。我需要以在新选项卡中打开每个资源的结果的方式实现搜索。下面的代码在 Firefox 和 IE 中工作，但在 chrome 中只打开第一个选项卡，而不是第二个选项卡。

```
aForm.target="_blank";
aForm.submit(); 
```

我为我正在搜索的每个资源调用它（我在每次提交之前为变量操作了一些）。正如我所说，这适用于 Firefox 和 IE，但不适用于 Chrome？有什么建议么？chrome 扩展有一个 chrome.tabs.create() 方法，但为此我需要为 chrome 创建一个扩展，所有用户都必须安装它，我真的很想避免安装扩展。

此外，chrome 的 window.open(...) 会打开新窗口而不是选项卡。

谢谢。

# html - 有没有办法在 gmail 中隐藏图像以进行 html 响应式电子邮件构建？

> ID：15224944
> 
> 赞同：1
> 
> 时间：2013-03-05T13:23:56.227
> 
> 标签：html, email, gmail, html-email

我正在构建一封电子邮件，该电子邮件必须将图像隐藏在桌面上并显示在移动设备上。唯一可以做到这一点的方法是使用 gmail 不支持的 display none。

我想知道是否有任何其他方法可以在桌面版本上隐藏图像，以便我可以使用媒体查询来设置移动版本中的电子邮件样式。

问题仅在gmail中

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:15:24.900

在桌面的内联样式中，制作图像的`width`和。然后使用您的响应式媒体查询 CSS 将图像恢复到适当的大小。`height``0`

编辑：尝试添加`mso-hide:all;`到您的内联 CSS 以及修复 Outlook 的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T05:14:29.783

为了隐藏 HTML 电子邮件中的元素并使其在 Gmail 中工作，您需要将其归零并调整 CSS 中的大小（Gmail 将忽略）。

像这样：

```
<style>
    @media only screen and (max-width: 480px) { 
    *[class~=show_on_mobile] {
        display : block !important;
        width : auto !important;
        max-height: inherit !important;
        overflow : visible !important;
        float : none !important;
    }
</style>
    <table border="0" cellpadding="0" cellspacing="0">
    <tr>
    <!--[if !mso]><!-->
        <td style="width: 0; max-height: 0; overflow: hidden; float: left;">
        </td>
    </tr>
    <!--<![endif]-->
</table> 
```

此外，添加的条件注释涵盖了 Outlook 07。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-09T15:31:51.057

桌面的内联样式：

```
style="max-height:0;width:0;" 
```

响应式 css @media 查询：

```
max-height: none !important;
width: auto !important; 
```

像魅力一样工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:26:34.180

`hidden`不是 的有效值`display`。

尝试：

```
{
    display:none;
} 
```

或者，如果仍然不起作用，请尝试：

```
{
    visibility:hidden;
    width:0;
    height:0;
    padding:0;
    margin:0;
} 
```

# .net - .NET 4.5 会话身份验证模块

> ID：15224945
> 
> 赞同：0
> 
> 时间：2013-03-05T13:23:58.177
> 
> 标签：.net, .net-4.5, wif, claims-based-identity, asp.net-4.5

我正在尝试使用 SessionAuthenticationModule 创建令牌并将其写入 cookie，而不是使用旧的 FormAuthentication.SetAuthCookie。这样我还可以向我的委托人添加声明，并在每次请求时都可以使用它们。

它在我自己的计算机上运行良好，但是当我部署到服务器时出现此错误：指定的参数超出了有效值的范围。参数名称：keyExpirationTime

资料来源：System.IdentityModel 堆栈跟踪指向一个重载的构造函数——它似乎已经从我最初通过 TokenHandler 调用 CreateSessionSecurityToken 开始，然后通过几个构造函数。

我的 SessionAuthenticationModule 是我自己编写的类，但派生自 System.IdentityModel.Services.SessionAuthenticationModule 并覆盖 OnPostAuthenticateRequest。

我正在为 validFrom 和 validTo 参数发送 DateTime.Now 和 DateTime.Now.AddMinutes(20) （在单独的说明中，这可以是配置设置吗？如果可以的话，在哪里？ - 显然我可以为分钟设置 AppSetting但大概在某处有安全配置设置？）

我已搜索此错误消息，但找不到任何提及。

我已经使用了 FederationAuthentication.SessionAuthenticationModule.CreateSessionSecurityToken 并且还尝试了 HttpContext.Current.ApplicationInstance.Modules("SessionAuthenticationModule") - 两者都可以在我的开发机器上工作，但都不能在服务器上工作。

服务器有 Windows 2008 R2，我有 Windows 7 Professional。两者都有 IIS 7.5.7600.16385。两者都使用 dotNetFx45_Full_setup.exe v4.5.50709.17929 安装了 .NET 4.5。为了测试，我只是在默认网站下使用一个虚拟应用程序，它使用一个 64 位应用程序池和一个集成管道，两个应用程序池都在 AppPoolIdentity 下运行。

CreateSessionSecurityToken 是从在 sessionauthenntication 模块添加声明后执行的页面调用的。

这肯定是相当简单的事情，但我需要帮助弄清楚它是什么！非常感谢一些帮助。

谢谢菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:00:02.877

All samples says "Use DateTime.UtcNow", can you try it? Also you can paste null to a ValidTo to specify that the value should be determined by adding the value of the SessionSecurityTokenHandler.DefaultTokenLifetime property to the time specified by the validFrom parameter.

# algorithm - 在 O(1) 中删除 max 并在 O(logn) 中插入

> ID：15224948
> 
> 赞同：9
> 
> 时间：2013-03-05T13:24:00.677
> 
> 标签：algorithm, data-structures

设计一个支持对 n 元素集进行以下操作的数据结构：

1.  及时插入`O(lg n)`
2.  及时删除最大值`O(1)`。请注意，delete max 采用`O(lg n)`常规堆。

我的做法：

我决定我将保留一个单独的数组，它将跟踪将超过根的潜在继任者（这是最大堆中的最大值）；一旦被删除。因此，如果您删除最大值，`O(1)`我会及时查看我的数组以找到下一个合适的继任者（我假设我将智能设置）。

有人有更好的方法吗？尝试坚持使用堆。这不是一个家庭作业问题，我正在准备面试，它来自 Skiena 的书。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T17:38:03.107

您的要求非常具体——您只对这两个操作感兴趣：插入*O* (lg *n* ) 和 deleteMin *O* (1)。

没有一个已知的[堆结构](http://en.wikipedia.org/wiki/Minimum-heap_property)满足您的特定约束。相反，最好的结构（尽管理论上——有些人称之为[银河结构）是](http://rjlipton.wordpress.com/2010/10/23/galactic-algorithms/)[Brodal Queue ，它在](http://en.wikipedia.org/wiki/Brodal_queue)*O* (1) 最坏情况下执行所有堆操作，但 deleteMin 仍然需要*O* (lg *n* ) 最坏情况-案例时间。所有其他已知结构也好不到哪里去。

由于您只对这两个操作感兴趣，您可能能够摆脱只处理这两个操作的自定义结构，因为您不必担心减少键、合并等更多一般堆结构都需要担心。

维护双重结构*DL*，其中包含：

1.  已排序的[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)*D*，您可以通过二分搜索在*O* (lg *n* ) 时间内从中进行查找。
2.  排序链表*L*，您可以在*O (1) 时间内执行 deleteMin ，并在**O* (1) 最坏情况下执行插入给定后继（或前任）引用。
3.  最近插入到*L*中但尚未与*D*同步的元素的排序列表*T*。

 ***此外，在L*中的每个条目与其在*D*或*T*中的相应条目之间保持链接，反之亦然。此外，您需要为*D*的每个条目维护一个位，指示它是否已在*L*中删除。为了稍后在*D*和*L*之间进行大规模同步，您可能还想跟踪自上次同步以来 L 的删除次数*d* *。*您可以在以下不变量之后进行同步：

 **   **不变量 1：** *d* + | *T* | < *n*

被违反。这样同步时间在*n*中保持线性，您始终可以保证 | *T* | *d*在可控范围内。

因此，要将新元素*e*插入*DL*，您首先在*D中为其后继者（前身）执行 find(* *e )，然后在**T*中搜索其后继者，并获取较大后继者（较小前身）的引用并使用它插入*L*并将*e*添加到*T*并维护引用。插入*e*后，我们检查是否违反了不变量 1。如果是这样，我们触发同步。

 ***同步本质上合并了*T*和*D*的内容，同时将标记为已删除的元素删除到新的*D*结构中。这可以在 |T| 中线性时间完成。+ |D| = O(n)。在另一个线性时间中，可以更新*L*和*D之间的引用。*这种大规模同步的成本可以通过插入和删除来分配（摊销）。因此，这些成本只是摊销成本。

要执行 deleteMin，您只需删除*L的头部并使用其到**D*的反向链接将其在*D*中的相应条目标记为已删除并增加*d*。

**观察 1**：请注意 deleteMin 将始终删除最小元素，因为*L*始终是最新的。

**观察 2**：*D*并不总是与*L*同步。*它可能有一些已删除的元素（如此标记）和一些仅在T*中找到的插入元素。

通过观察 2，我们需要在某个时间安排*D*与*L*的同步，以维持*O* (lg *n* ) 查找和插入成本。每当违反不变量 1 时，都会执行此操作。

我有点掩盖的一个讨厌的问题如下：如何在对数时间内插入*T*，同时仍然能够在同步期间进行线性扫描。只有某种平衡的树才能实现这一点。我曾考虑过将 T 的大小限制为对数大小的想法，但是当完成足够数量的插入以触发同步时，这会增加同步的摊销成本。似乎一种线程平衡树甚至跳过列表应该在这里有所帮助。

随意批评和建议改进，因为我没有在这里证明或实施所有断言。

**更新**：正如@delnan 所指出的，这些成本是摊销的。我更新了描述以突出这一事实，并为清楚起见进行了修订。也许，通过一些技巧可以消除摊销，但在这种情况下，我们最终会得到另一个银河结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:32:00.440

我建议您使用[跳过列表](http://en.wikipedia.org/wiki/Skip_list)，因为它是我能想到的最容易实现的数据结构，它支持具有所需复杂性的操作。[斐波那契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)也可以完成这项工作，但实施起来要困难得多。

编辑：我收回我对斐波那契堆的承诺——它支持常量 insert 和`O(log(n))`delete_min，这与你想要的相反。对此感到抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-21T19:34:18.743

最简单的解决方案是使用插入时间 O(logn) 的 skiplist 来维护始终排序的集合，然后您可以删除 O(1) 中的最大或最小元素，因为它可能是列表的头部或尾部。******

# php - PHP-PDO 使用循环结构获取数据

> ID：15224958
> 
> 赞同：0
> 
> 时间：2013-03-05T13:24:34.037
> 
> 标签：php, pdo, fetch

我正在练习使用 PDO 获取方法从表中检索数据。我想在一个while循环中设置一个计数器来一次检索一行数据。请给我一些建议如何做到这一点。谢谢！

这是我使用 PDO::Query() 和 PDO::fetch() 方法的 2 个代码示例。代码示例 1 使用 PDO::Query() 方法

```
$sql = 'select first_name, last_name, pd, b_month, b_day, b_year from reg_data';
$birth_date = '';
try
{
    foreach($con->query($sql) as $row)
    {
       print $row['first_name'] . "  ";
       print $row['last_name']. "  ";
       print $row['pd'] . "  ";
       $birth_date =  $row['b_month'] . "-". $row['b_day'] . "-". $row['b_year'];
       print "$birth_date";
    } 

}
catch(PDOException $e)
{
    echo " There is a problem with you db connection";
    echo $e->getMessage();
} 
```

示例 2 使用 PDO::fetch() 方法

```
try {
    $con = new PDO ($dns, $db_uid, $db_pd, $option);
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "select * from reg_data";
    $stmt = $con->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL));
    $stmt->execute();

    //using cursor to interate through array
    while($row = $stmt->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT))
    {
        $data = $row[0].$row[1]. $row[2] .$row[3].$row[4].$row[5];
        print $data;
    }
   $stmt = null; //close the handle
}
catch(PDOException $e)
{
    echo " There is a problem with you db connection";
    print $get->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:36:58.093

我认为你需要 PDO::fetchAll。
直接来自[标签 wiki](https://stackoverflow.com/tags/pdo/info)的代码示例：

```
//connect
$dsn = 'mysql:host=localhost;dbname=test;charset=utf8';
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn,'root','', $opt);

//retrieval
$stm = $pdo->prepare("select * from reg_data");
$stm->execute();
$data = $stm->fetchAll();
$cnt  = count($data); //in case you need to count all rows
//output
?>
<table>
<? foreach ($data as $i => $row): ?>
  <tr>
    <td><?=$i+1?></td> <!-- in case you need a counter for each row -->
    <td><?=htmlspecialchars($row['first_name'])?></td>
  </tr>
<? endforeach ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:37:07.080

您可以使用变量并在循环中递增它

```
$counter++ ; 
```

# spring - 服务器故障后 Spring Batch 恢复

> ID：15224959
> 
> 赞同：19
> 
> 时间：2013-03-05T13:24:36.553
> 
> 标签：spring, batch-processing

我正在使用spring批处理来解析文件，并且我有以下场景：

我正在做一份工作。这项工作必须解析一个给定的文件。由于意外原因（比如说停电），服务器出现故障，我必须重新启动机器。现在，重新启动服务器后，我想从停电前停止的点恢复工作。这意味着如果系统从 10.000 读取 1.300 行，现在必须从 1.301 行开始读取。

如何使用 Spring Batch 实现这种情况？

关于配置：我使用 spring-integration 在目录下轮询新文件。当文件到达时，spring-integration 会创建 spring 批处理作业。此外，spring-batch 使用 FlatFileItemReader 解析文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-25T17:50:10.510

这是 JVM 崩溃后重新启动作业的完整解决方案。

1.  通过设置 restarable="true" 使作业可重新启动

> 工作 id="jobName" xmlns="http://www.springframework.org/schema/batch" restartable="true"

2\. 重新启动作业的代码

```
import java.util.Date;
import java.util.List;
import org.apache.commons.collections.CollectionUtils;
import org.springframework.batch.core.BatchStatus;
import org.springframework.batch.core.ExitStatus;
import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobInstance;
import org.springframework.batch.core.explore.JobExplorer;
import org.springframework.batch.core.launch.JobLauncher;
import org.springframework.batch.core.launch.JobOperator;
import org.springframework.batch.core.repository.JobRepository;
import org.springframework.beans.factory.annotation.Autowired;

public class ResartJob {

    @Autowired
    private JobExplorer jobExplorer;
    @Autowired
    JobRepository jobRepository;
    @Autowired
    private JobLauncher jobLauncher;
    @Autowired 
    JobOperator jobOperator;

    public void restart(){
        try {
            List<JobInstance> jobInstances = jobExplorer.getJobInstances("jobName",0,1);// this will get one latest job from the database
            if(CollectionUtils.isNotEmpty(jobInstances)){
               JobInstance jobInstance =  jobInstances.get(0);
               List<JobExecution> jobExecutions = jobExplorer.getJobExecutions(jobInstance);
               if(CollectionUtils.isNotEmpty(jobExecutions)){
                   for(JobExecution execution: jobExecutions){
                       // If the job status is STARTED then update the status to FAILED and restart the job using JobOperator.java
                       if(execution.getStatus().equals(BatchStatus.STARTED)){ 
                           execution.setEndTime(new Date());
                           execution.setStatus(BatchStatus.FAILED);                               
                           execution.setExitStatus(ExitStatus.FAILED);                               
                           jobRepository.update(execution);
                           jobOperator.restart(execution.getId());
                       }
                   }
               }
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
} 
```

3.

```
<bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean" p:dataSource-ref="dataSource" p:transactionManager-ref="transactionManager" p:lobHandler-ref="oracleLobHandler"/>

<bean id="oracleLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler"/>

<bean id="jobExplorer" class="org.springframework.batch.core.explore.support.JobExplorerFactoryBean" p:dataSource-ref="dataSource" />

<bean id="jobRegistry" class="org.springframework.batch.core.configuration.support.MapJobRegistry" />

<bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
        <property name="jobRepository" ref="jobRepository" />
        <property name="taskExecutor" ref="jobLauncherTaskExecutor" /> 
</bean> <task:executor id="jobLauncherTaskExecutor" pool-size="6" rejection-policy="ABORT" />

<bean id="jobOperator" class="org.springframework.batch.core.launch.support.SimpleJobOperator" p:jobLauncher-ref="jobLauncher" p:jobExplorer-re`enter code here`f="jobExplorer" p:jobRepository-ref="jobRepository" p:jobRegistry-ref="jobRegistry"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-01T09:28:06.227

Spring batch 4 的更新解决方法。将 JVM 启动时间考虑在内以检测损坏的作业。请注意，这在多台服务器启动作业的集群环境中不起作用。

```
@Bean
public ApplicationListener<ContextRefreshedEvent> resumeJobsListener(JobOperator jobOperator, JobRepository jobRepository,
        JobExplorer jobExplorer) {
    // restart jobs that failed due to
    return event -> {
        Date jvmStartTime = new Date(ManagementFactory.getRuntimeMXBean().getStartTime());

        // for each job
        for (String jobName : jobExplorer.getJobNames()) {
            // get latest job instance
            for (JobInstance instance : jobExplorer.getJobInstances(jobName, 0, 1)) {
                // for each of the executions
                for (JobExecution execution : jobExplorer.getJobExecutions(instance)) {
                    if (execution.getStatus().equals(BatchStatus.STARTED) && execution.getCreateTime().before(jvmStartTime)) {
                        // this job is broken and must be restarted
                        execution.setEndTime(new Date());
                        execution.setStatus(BatchStatus.FAILED);
                        execution.setExitStatus(ExitStatus.FAILED);

                        for (StepExecution se : execution.getStepExecutions()) {
                            if (se.getStatus().equals(BatchStatus.STARTED)) {
                                se.setEndTime(new Date());
                                se.setStatus(BatchStatus.FAILED);
                                se.setExitStatus(ExitStatus.FAILED);
                                jobRepository.update(se);
                            }
                        }

                        jobRepository.update(execution);
                        try {
                            jobOperator.restart(execution.getId());
                        }
                        catch (JobExecutionException e) {
                            LOG.warn("Couldn't resume job execution {}", execution, e);
                        }
                    }
                }
            }
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:30:40.770

在您的情况下，我会做的是创建一个步骤来记录文件中最后处理的行。然后创建将读取此文件并从特定行号开始处理的第二个作业。

因此，如果作业由于某种原因停止，您将能够运行将恢复处理的新作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T17:47:44.450

你也可以像下面这样写：

```
 @RequestMapping(value = "/updateStatusAndRestart/{jobId}/{stepId}", method = GET)
    public ResponseEntity<String> updateBatchStatus(@PathVariable("jobId") Long jobExecutionId ,@PathVariable("stepId")Long stepExecutionId )throws Exception {

       StepExecution stepExecution =  jobExplorer.getStepExecution(jobExecutionId,stepExecutionId);
            stepExecution.setEndTime(new Date(System.currentTimeMillis()));
            stepExecution.setStatus(BatchStatus.FAILED);
            stepExecution.setExitStatus(ExitStatus.FAILED);
        jobRepository.update(stepExecution);

       JobExecution jobExecution =  stepExecution.getJobExecution();
            jobExecution.setEndTime(new Date(System.currentTimeMillis()));
            jobExecution.setStatus(BatchStatus.FAILED);
            jobExecution.setExitStatus(ExitStatus.FAILED);
        jobRepository.update(jobExecution);
        jobOperator.restart(execution.getId());

        return new ResponseEntity<String>("<h1> Batch Status Updated !! </h1>", HttpStatus.OK);
    } 
```

在这里，我使用了 restApi 端点来传递 jobExecutionId 和 stepExecutionId 并将 job_execution 和 step_execution 的状态设置为 FAIL。然后使用批处理运算符重新启动。

# mysql - 如何使用 SQL 进行匹配？

> ID：15224960
> 
> 赞同：0
> 
> 时间：2013-03-05T13:24:37.617
> 
> 标签：mysql, sql

我正在使用以下 3 个表格：

**第一张桌子**

*   ID
*   回复

**第二张桌子**

*   响应号
*   患者编号

**第三张表**

*   患者编号

第一个和第二个表之间的关系是 on`id`和`responceid`。

第三和第二之间的关系是on `patientid`。

现在，我需要借助与第二个和第三个表的匹配来从这些表中检索值，例如第一个和第三个表中的所有值`patientid`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:29:03.157

基本上，如果定义它们关系的所有列都不能为空，那么`INNER JOIN`就足够了。但是，如果它们可以为*空*并且您仍想显示来自 的所有记录`firstTB`，则需要使用`LEFT JOIN`而不是`INNER JOIN`。

```
SELECT  a.*, b.*, c.*
FROM    firstTB a
        INNER JOIN secondTB b
            ON a.ID = b.responceID
        INNER JOIN thirdTB c
            ON b.patientID = c.patientID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:28:56.870

您可能正在寻找`INNER JOIN`或`JOIN`一般而言：

```
SELECT
    response.id,
    response.responce,
    patient.patientid
FROM
    `response_table` as `response`
INNER JOIN
    `relation_table` as `relation`
ON
    relation.responceid = response.id
INNER JOIN
    `patient_table` as `patient`
ON
    relation.patientid = patient.patientid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:33:33.620

尝试

```
 SELECT first.*
         , third.*
      FROM first
INNER JOIN second  ON ( second.responseid = first.id )
INNER JOIN third   ON ( third.patientid   = second.patientid )
         ; 
```

老实说，没有侮辱的意思，如果你自己想出这样的查询有困难，考虑一些关于数据库基础和数据库开发的培训，越早越好（只是希望我自己没有犯错……； -))。

# java - 如何在没有反射的情况下进行 Java 序列化？

> ID：15224969
> 
> 赞同：7
> 
> 时间：2013-03-05T13:25:01.337
> 
> 标签：java, serialization, reflection, mindstorms, lejos-nxj

我正在开发一个不支持 Java 反射的 Lego Mindstorm NXT 机器人。

出于某种原因（模拟器的并行创建和实际的头脑风暴），我们想使用序列化来交换 Java 对象。

问题是序列化使用了反射，mindstorm上的JVM不支持。

有任何想法吗？

我[在 Zwong.de 上找到了这个页面](http://zwong.de/2008/12/doing-java-serialization-without-reflection/)，但源代码已被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:48:24.633

让你的类实现 Externalizable，然后 ObjectOuputStream.writeObject() / readObject() 将在你的对象上直接调用 writeExternal(ObjectOutput out) / readExternal(ObjectInput)，而不使用反射

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:35:21.800

我相信[Kryo](https://code.google.com/p/kryo/)支持可序列化对象的无反射实例化。快速浏览他们的主页似乎证实了这一点：

> 当无法使用 ReflectASM 或反射时，可以将 Kryo 配置为使用 InstantiatorStrategy 来处理创建类的实例。Objenesis 提供了 StdInstantiatorStrategy，它使用 JVM 特定的 API 来创建类的实例，而根本不需要调用任何构造函数。这适用于许多 JVM。

听起来你需要创建自己的`InstantiatorStrategy`，因为我不确定标准的是否支持 NXT JVM - 不过值得一试！我自己没有尝试过，但听起来理论上应该是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:36:55.940

我找到了两个可能的线索。希望这些对你有一些帮助。

1)[不进行反射进行Java序列化](http://webcache.googleusercontent.com/search?q=cache:3NxyblkjB60J%3azwong.de/2008/12/doing-java-serialization-without-reflection/%20&cd=1&hl=en&ct=clnk&gl=us&client=firefox-a)

2)[不使用反射的 java xml 序列化生成器](http://www.rqna.net/qna/myumpx-xml-serialization-generator-for-java-without-using-reflection.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:39:59.433

序列化和反序列化只是一种写入和读取对象的方式。您始终可以编写自己的方法，将所有对象数据写入/读取字符串/文件/流。

此外，自定义序列化方法，尤其是那些使用二进制数据的方法，通常比 Serializable 提供的方法消耗更少的时间、内存和处理能力。

# python - python中的数组插值？

> ID：15224970
> 
> 赞同：5
> 
> 时间：2013-03-05T13:25:01.367
> 
> 标签：python, arrays, numpy, scipy, interpolation

我有两个数组：

```
array_x = [x1, x2, x3, x4... xn]
array_y = [y1, y2, y3, y4... yn] 
```

我想要一个函数，通过插值将关联`f(array_x, array_y, value_x)`返回到数组中。`value_y``value_x`

怎么做 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T13:27:47.610

我认为这`numpy.interp`正是你想要的。例如：

```
numpy.interp(value_x,array_x,array_y) 
```

请注意，此处`value_x`可以是标量或其他类似数组的值。如果它是一个类似数组的值，您将返回一个相应的插值数组。

# architecture - 用于在 Web App 中正确处理向导的模式/架构

> ID：15224971
> 
> 赞同：1
> 
> 时间：2013-03-05T13:25:13.323
> 
> 标签：architecture, design-patterns, modeling, n-tier-architecture

我已经在这个主题上搜索了一段时间，但到目前为止还没有找到“令人满意”的答案。

我会试着解释一下自己。

我们正在开发一个 Web 应用程序，对于某些实体，该应用程序需要创建/编辑过程的向导，因此用户可以在步骤之间切换，并更好地控制构建此类实体所需的复杂性和流程。

我发现的每一个替代方案（我已经检查了关于多步骤表单的 wicked Wizard gem 和 ASCII cast）都以需要更改向导的实体而告终。IMO，向导只是 VIEW 的特殊性，与实体及其接口无关......如果我最终改变我的模型来处理视图的问题，我将违反 SRP（单一责任原则），也会伤害关注点分离本身。在会话中存储数据是一个选项，但是在编辑已经存在的（持久）实体时，我必须通过坚持每一步来处理这个问题，而不是保留会话中的更改......

那么，你们中是否有人已经用向导构建了一个应用程序？有什么建议么？！？

PS：我正在使用Rails，但问题是如何正确建模所描述的场景，而不管技术如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:01:50.440

在我看来，您可以利用 cookie、本地存储、indexedDB 等浏览器功能来保存您的向导步骤数据，并使用您喜欢的 Jquery 或 Javascript 库来操作持久数据或检索此类数据。

如果您的向导步骤将触发任何操作，这将提供服务器端调用，则以某种类似的方式缓存这些结果，而不是从服务器重新填充结果。

# c# - 在 Asp.net 会话中存储大量数据

> ID：15224973
> 
> 赞同：2
> 
> 时间：2013-03-05T13:25:20.427
> 
> 标签：c#, asp.net, session

我正在编写一个 C#/asp.net 页面，目前我在页面加载时从数据库中提取了大量数据（比如 100 000 个 Datetime int 对），但是每次加载页面加载相同的数据似乎有点愚蠢。我考虑过将此值存储在会话中，但多个浏览器选项卡似乎会导致问题。

有没有更好的方法来存储这些值，如果我需要支持多个浏览器选项卡，是否使用合适的会话？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T13:29:58.227

您的会话会占用大量服务器内存。您可以将会话存储在数据库中（这违背了目的，因为这就是您首先要将它们存储在会话中的原因），但是在行之间读取（为什么每个访问者需要 100,000 个唯一的日期时间对？）我认为您应该真正考虑将这些值存储在缓存中（如果它们对所有用户都相同）。

在会话中存储 100k 个 int 对的问题在于它可能适用于 1 或 2 个，甚至可能是十几个用户。但是当您的网站变得流行时，它根本无法扩展。您的服务器将无法存储 500,000 个 100,000 个 int 对的用户会话。**你很快就会耗尽内存**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:32:51.250

如果此数据对于每个用户都是唯一的，则会话可能是缓存数据的有效位置。虽然，如果你这样做，那么你应该知道你添加到会话中的东西会保留在那里并且需要删除。此外，由于您为每个用户会话存储大量数据，因此您消耗大量服务器内存。这就是史蒂夫的回答 - 你很容易发现自己的空间不足，多个用户拥有大量会话数据

如果每个用户的数据没有变化，那么[缓存](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)就是答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:31:17.787

会话可能会变得笨拙。您可能需要考虑一个母版页来包装您的页面。然后您可以在母版中加载一次数据，并使其在页面之间保持可用，或者放入页面上的隐藏对象（例如文字）中能够访问。

为什么需要页面之间的所有对？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:36:19.597

使用缓存而不是会话变量怎么样：http: [//msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

# html - 如何附加远程流并将其发送到另一个对等点？

> ID：15224980
> 
> 赞同：0
> 
> 时间：2013-03-05T13:25:37.877
> 
> 标签：html, stream, chat, p2p, webrtc

我想附加远程流并将其发送到另一个对等方，像这样附加远程流：

```
firstPeer.onaddstream = function(remoteSteam) {
  otherPeer.addStream(remoteStream);  /* attaching remote stream */
}; 
```

但它不起作用！（我无法在其他浏览器中接收此流。）

谁能告诉我如何附加远程流？如何将远程流发送到另一个对等点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:38:03.227

我[前一阵子](https://github.com/muaz-khan/WebRTC-Experiment/issues/2)测试过。但是，如果附加了“远程流”，则流不会流动。

我发现 chrome 在创建 offer sdp 时遗漏了许多属性，并且 offer sdp 被设置为“<strong>recvonly”而不是“<strong>sendrecv”。

在最新的 chrome canary 中，您可以像这样附加“远程流”。

```
var newStream = new webkitMediaStream(remoteStream);
peer2.addStream(newStream); 
```

否则：

```
var newStream = new webkitMediaStream([remoteStream.getAudioTracks(),remoteStream.getVideoTracks()]);
peer2.addStream(newStream); 
```

在旧铬中：

```
var newStream = new webkitMediaStream(remoteStream.audioTracks, remoteStream.videoTracks);
peer2.addStream(newStream); 
```

填写“offer sdp”中遗漏的属性；我使用了以下编码：

```
sdp = sdp.replace(/a\=msid-semantic: WMS/g, 'a=msid-semantic: WMS ' + getChars());
sdp = sdp.replace(/recvonly/g, 'sendrecv')

var chars00 = getChars();
var numbers = getNumbers();

sdp += 'a=ssrc:'+ numbers+' cname:+Sb9HXiiNN/nhpZ1\r\n';
sdp += 'a=ssrc:'+ numbers+' msid:' + chars00 + ' v0\r\n';
sdp += 'a=ssrc:'+ numbers+' mslabel:' + chars00 + '\r\n';
sdp += 'a=ssrc:'+ numbers+' label:' + chars00 + '\r\n';

var replace = 'a=rtpmap:126 telephone-event/8000\r\n';
var chars00 = getChars();
var numbers = getNumbers();
replace += 'a=ssrc:'+ numbers+' cname:iecJoX+jqjkT8Dky\r\n';
replace += 'a=ssrc:'+ numbers+' msid:' + chars00 + '\r\n';
replace += 'a=ssrc:'+ numbers+' mslabel:' + chars00 + '\r\n';
replace += 'a=ssrc:'+ numbers+' label:' + chars00;
sdp = sdp.replace(/a\=rtpmap:126 telephone-event\/8000/g, replace) 
```

请记住，“getChars”和“getNumbers”方法返回随机值。

[一个要测试的演示](https://googledrive.com/host/0B6GWd_dUUTT8V1Fodm9WQldkb28/)。

# c++ - std::vector 的自定义分配器 被忽略

> ID：15224988
> 
> 赞同：11
> 
> 时间：2013-03-05T13:26:16.763
> 
> 标签：c++, c++11, allocator

我试图使用自定义分配器`std::vector<char>`，但我注意到`std::vector`不需要/使用我的分配器中的任何成员函数。这怎么可能？

```
#include <vector>

struct A : private std::allocator<char> {
   typedef std::allocator<char> alloc;
   using alloc::value_type;
   using alloc::pointer;
   using alloc::const_pointer;
   using alloc::difference_type;
   using alloc::size_type;
   using alloc::rebind;
   // member functions have been removed, since the program compiles without them
};

int main() {
    std::vector<char, A> v;
    v.resize(4000);
    for (auto& c : v)
      if (c)
         return 1; // never happens in my environment
   return 0; // all elements initialized to 0\. How is this possible?
} 
```

我正在使用在线 C++11 编译器 (LiveWorkSpace) 尝试上述程序，提供 g++ 4.7.2、4.8 和 4.6.3。

基本上`allocate()`,`deallocate()`和`construct()`并`destroy()`没有在我的分配器中定义，但是程序编译并且所有元素都将初始化为 0。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T13:36:16.360

GCC 标准库将始终重新绑定提供的分配器，因此在内部它会执行以下操作（在 C++03 中）：

```
typedef Alloc::template rebind<value_type>::other _Allocator_type; 
```

（在 C++11 中它使用`allocator_traits`但在这种情况下结果是相同的。）

然后，该向量在内部存储该类型的对象并将其用于所有（取消）分配。

由于您尚未`rebind`在分配器中定义成员模板，因此您只是从基类中重新声明了成员模板，重新绑定的结果是`std::allocator<value_type>`而不是您自己的类型。 `std::allocator`当然提供所有这些功能，所以这些都是使用的功能，无论您是否在自己的类型上定义它们。

您可以通过将其添加到分配器中来修复它，`using alloc::rebind;`以便在内部`vector`存储和使用`A`：

```
struct A : private std::allocator<char> {
    template<typename U>
      struct rebind {
        typedef A other;
      }; 
```

注意，这仅适用于`vector`，因为`vector`不需要重新绑定分配器（用户需要用 实例化模板`allocator<value_type>`，但 GCC`vector`无论如何都会重新绑定，这样如果用户实例化`vector<int, std::allocator<char>>`它仍然有效。）对于基于节点的容器，例如`std::set`您的分配器必须是可以反弹的模板，因为容器需要分配其内部节点类型，而不是`value_type`，所以需要`Alloc::rebind<internal_node_type>::other`有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T13:28:36.990

`vector`将重新绑定分配器。当你把它带入范围时`std::allocator`，`A::rebind<T>::other`就简单了`std::allocator<T>`。所以一切正常。

# c++ - XML 节点模板 - 我应该使用 XSLT 吗？

> ID：15224991
> 
> 赞同：0
> 
> 时间：2013-03-05T13:26:37.740
> 
> 标签：c++, xml, xslt

我有一个具有以下结构的 XML 文件（多个“实体”节点）：

```
<!-- entities.xml -->
<root>
    <entity template="foo-template" kind="foo" name="bar">
        <groups>
            <group id="1">
                <definition id="1" name="foobar" />
            </group>
        </groups>
    </entity>
</root> 
```

许多`entity`节点具有相似的属性和子节点。我想允许用户`entity`在单独的文件中创建模板。引用模板将按如下方式完成：

```
<entity template="foo-template" kind="foo" ... /> 
```

“foo-template”中的每个属性和子节点都应该复制到 中`entity`，除了那些已经存在的（即允许覆盖模板）。

我对 XSLT 不是很熟悉。它是完成这项任务的正确工具，还是没有它我最好实现它？

我正在使用 C++ 和 RapidXml，但可以使用其他 XML 库。

* * *

**编辑：示例**。

模板文件：

```
<!-- templates.xml -->
<templates>
    <entity template="foo-template" name="n/a" model="baz">
        <groups>
            <group id="1">
                <definition id="1" name="def1" />
                <definition id="2" name="def2" />
            </group>
            <group id="2">
                <definition id="1" name="def3" />
                <definition id="2" name="def4" />
            </group>
        </groups>
    </entity>
</templates> 
```

输出文件：

```
<!-- output.xml -->
<root>
    <entity kind="foo" name="bar" model="baz">
        <groups>
            <group id="1">
                <definition id="1" name="foobar" />
            </group>
            <group id="2">
                <definition id="1" name="def3" />
                <definition id="2" name="def4" />
            </group>
        </groups>
    </entity>
</root> 
```

因此输出包含来自“entities.xml”的第 1 组和来自“templates.xml”的第 2 组。无需合并`group`具有相同 id 的节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:02:56.213

如果你有一个`templates.xml`看起来像的文件

```
<templates>
  <entity template="foo-template" kind="foo" name="bar" model="baz" />
  <!-- and other entity elements with different template="..." values -->
</templates> 
```

然后像下面这样的 XSLT 将实现您所追求的

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:key name="kEntityTemplate" match="entity" use="@template" />

  <!-- identity template - copy everything not overridden by another template -->
  <xsl:template match="@*|node">
    <xsl:copy><xsl:apply-templates select="@*|node()"/></xsl:copy>
  </xsl:template>

  <xsl:template match="entity[@template]">
    <xsl:variable name="thisEntity" select="." />
    <!-- switch to templates doc -->
    <xsl:for-each select="document('templates.xml')">
      <xsl:variable name="template"
         select="key('kEntityTemplate', $thisEntity/@template)" />

      <entity>
        <!-- copy template attributes that are not overridden -->
        <xsl:for-each select="$template/@*">
          <xsl:if test="not($thisEntity/@*[name() = name(current())])">
            <!-- if not, copy the one from the template -->
            <xsl:apply-templates select="." />
          </xsl:if>
        </xsl:for-each>

        <!-- copy source attributes -->
        <xsl:apply-templates select="$thisEntity/@*[name() != 'template']" />

        <!-- deal with elements -->
        <xsl:if test="$thisEntity/groups/group | $template/groups/group">
          <groups>
            <!-- here we select all group elements from the source plus
                 those group elements from the template that do not also exist
                 in the source, and sort the whole lot by id -->
            <xsl:apply-templates select="$thisEntity/groups/group
              | $template/groups/group[not(@id = $thisEntity/groups/group/@id)]">
              <xsl:sort select="@id" data-type="number" />
            </xsl:apply-templates>
          </groups>
        </xsl:if>
      </entity>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

该`templates.xml`文件需要与样式表位于同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:46:53.533

除了进行任何类型的 XML 转换之外，您还有一个选择是导入另一个 XML 文件，然后从标记中引用它。有关示例，请参见[此处。](https://stackoverflow.com/questions/5121052/can-we-import-xml-file-into-another-xml-file)

这将要求您的用户为您可能不想要的每种模板类型拥有单独的模板文件。但是，由于[接吻原则](http://en.wikipedia.org/wiki/KISS_principle)，我更喜欢导入方法。如果您不熟悉 XSLT，那么导入可能也是一种更好的方法。

我希望这有帮助！

# java - 使用 mybatis 保存/更新集合，常见的做法是什么？

> ID：15224992
> 
> 赞同：10
> 
> 时间：2013-03-05T13:26:39.223
> 
> 标签：java, persistence, ibatis, mybatis

我决定尝试将 mybatis 用于一个新项目。我对 SQL 相当熟悉，最近我在使用 hibernate 时遇到了一些不好的经历，所以我正在寻找一种更底层的 DAO 方法。

除了一件事，这似乎是相当不错的，那就是处理集合。

我有两个 POJO，组和用户，它们是多对多的。我已经决定了一种设计理念，即具有集合的 POJO 应该只在保存时更新表之间的 MM 关系。因此，例如，当我保存一个包含用户集合的组对象时，设计理念规定用户应该已经保存，我只需将组和 group_user 关系保存在数据库中。

所以，对于界面中的 saveGroup 函数，我为 mybatis 做了这个 XML 映射：

```
 <insert id="saveGroup" keyColumn="id"
    parameterType="se.myapp.domain.Group">
    <choose>
        <when test="id == null">
        INSERT INTO myapp_group (name, description)
        VALUES
        (#{username}, #{password});
        </when>
        <otherwise>
        UPDATE myapp_group set name=#{name}, description=#{description}
        where id=#{id};
        </otherwise>
    </choose>

    <if test="users != null">
        create temporary table tmpnewgroups (group_id integer, user_id integer);

        insert into tmpnewgroups (group_id, user_id) values (
        <foreach collection="users" item="user" open="" close="" separator="),()">
             #{id},#{user.id}
        </foreach>
        );

        insert into myapp_user_group(group_id, user_id) 
        select tmp.group_id, tmp.user_id 
        from tmpnewgroups tmp 
        left outer join myapp_user_group ug 
            on ug.group_id = tmp.group_id and ug.user_id = tmp.user_id
        where ug.group_id is null;

        delete from myapp_user_group 
        where group_id = #{id} and user_id not in (select user_id from tmpnewgroups);
    </if>

</insert> 
```

这确实按预期工作（插入/更新组，将用户集合保存为数据库中的关系）。但我真的不觉得这是最佳实践。应用程序是为了让我可以在需要时切换到休眠状态，所以保存集合的逻辑最好在数据库层中。mybatis中是否有一些我不知道的“魔法”可以简化这样的操作？

关于如何改善这一点的任何想法？还是我应该重新考虑应用程序设计并将集合的处理放在模型中的更高级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T16:42:13.143

saveGroup 数据映射操作的第二部分确实是重新考虑应用程序设计的原因。将内存中的用户集合持久化到临时表中，以将其与持久化的表进行比较，以便插入和删除增量是一项相当繁重的操作，如果只是组的名称或描述需要更新，则根本不需要，即当没有增量时。是否是这种情况可以由数据库服务器（即您当前的解决方案）或数据库客户端（即您的应用程序）来决定。

除了组和可能的用户需要第一次插入的情况之外，如果您希望您的应用程序决定是否需要更新链接表，那么您的应用程序需要知道用户集合是否已更改它是从数据库中检索的。不幸的是，MyBatis 不会帮助您的应用程序做到这一点。

看，与 Hibernate 相比，MyBatis 幸福地不知道您的对象以及在 MyBatis 完成其工作后它们携带的状态，即数据映射，而不是对象关系映射。Hibernate 可以自动检测你的对象的所谓脏状态，MyBatis 不能，因为这从来不是它的工作描述的一部分。因此，您只能使用自己的设备。

一种超级简单的方法是在选择后存储用户的哈希码，并使用名为`isUserDirty()`. 您可以使用在映射中简单地测试该条件`<if test="isUserDirty">`。这当然不是一种非常通用的方法，并且取决于一个体面的 hashCode() 实现。查看leonbloy 对类似问题的[回答以获得更通用的方法。](https://stackoverflow.com/questions/4788886/inserting-child-objects-in-mybatis)当然，这也可能有点太简单了，特别是因为我们正在谈论多对多的关系。哪种方法最好取决于您的情况。

现在你应该知道该怎么做了。祝你好运！

PS而不是插入和删除增量我会建议一个简单的覆盖：删除所有然后插入所有，在一个事务中。您的临时表策略是一种优化策略，实际上可能根本不会提高数据库的性能，实际上我的猜测是它可能会使情况变得更糟。如果你已经正确地描述了这个策略并且知道你在做什么，你可以忽略这个后记。

# macos - Mac Cocoa 应用程序中是否存在 NSURLConnection 的连接限制？

> ID：15224996
> 
> 赞同：4
> 
> 时间：2013-03-05T13:26:45.353
> 
> 标签：macos, cocoa, nsurlconnection, limit, progress

我正在尝试使用 Objective-C 构建一个基于多连接的连续下载模块。

我设置了一个新的 NSThread 来处理 NSURLConnection 的事件（比如 connection:didReceivedData:)。但我发现我的下载速度并没有我在电脑上的测试那么快。

当我记录我的模块的一些信息时，我发现即使我启动了 60 个连接，也只有 6 个连接从服务器接收到数据。

在windows PC上测试后，我发现它的连接数远大于6。

所以我写了另一个测试应用程序来测试当我的下载模块运行时我是否可以在另一个应用程序中建立一些连接。

我编程在主线程中创建 100 个连接，在后台线程中创建 100 个连接，阻止线程退出`[[NSRunLoop currentLoop] run];`，使用锁将数据到达的连接存储在共享的 NSMutableSet 中以避免资源冲突，每秒转储这个可变集。

然后我发现可变集中还有6个实时连接（有数据到达）。

所以我相信 Mac/Cocoa 中每个进度的 NSURLConnection 计数是有限制的。

我想知道如何使限制更大，例如 20 或其他？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T10:58:38.140

我们可以通过使用 CFNetwork API (CFHTTPMessage) 来打破这个限制。

这是 CFNetwork 编程指南。[https://developer.apple.com/library/mac/documentation/Networking/Conceptual/CFNetwork/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001132](https://developer.apple.com/library/mac/documentation/Networking/Conceptual/CFNetwork/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001132)

顺便说一句，如果您决定使用 CFNetwork，则需要绕过代理并进行身份验证。

# c++ - 在 Boost Phoenix 表达式中转换函数体

> ID：15224997
> 
> 赞同：5
> 
> 时间：2013-03-05T13:26:45.977
> 
> 标签：c++, templates, boost, boost-phoenix, boost-proto

如何在 Boost Phoenix 表达式的转换中也包含函数体？

例如，我在[Boost Phoenix Starter Kit](http://www.boost.org/doc/libs/1_53_0/libs/spirit/phoenix/doc/html/phoenix/starter_kit.html#phoenix.starter_kit.lazy_functions)的 Lazy Functions 部分构建，并创建了一个惰性添加函数：

```
struct my_lazy_add_impl {
  typedef int result_type;
  template <typename T>
  T operator()(T x, T y) const { return x+y; }
};
phoenix::function<my_lazy_add_impl> my_add; 
```

[然后，我从上一个问题](https://stackoverflow.com/questions/15077637/transforming-a-boost-c-phoenix-expression-tree)准备一个简单的正负转换，如下所示：

```
struct invrt:
  proto::or_<
    proto::when<
      proto::plus<proto::_, proto::_>,
      proto::functional::make_expr<proto::tag::minus>(
        invrt(proto::_left), invrt(proto::_right)
      )
    >,
    proto::otherwise<
      proto::nary_expr<proto::_, proto::vararg<invrt> >
    >
  >
{}; 
```

但是，当我使用 , 对其参数应用一个倒置的 Phoenix`lambda`表达式时，`my_add`如下所示，似乎没有实现预期的倒置。有没有推荐的方法在 Phoenix 中实现函数调用，可以促进这种转换？

```
int main(int argc, char *argv[])
{
  auto f =         phoenix::lambda(_a = 0)[my_add(_1,_2)];
  auto g = invrt()(phoenix::lambda(_a = 0)[my_add(_1,_2)]);
  std::cout << f()(1,2) << std::endl; // 3
  std::cout << g()(1,2) << std::endl; // 3 again; alas not -1
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T01:02:21.463

答案真的很简单，你会踢自己。您编写的表达式转换知道如何将加*节点*转换为减*节点*。但是您传递给它的表达式中没有加号节点。再看一遍：

```
auto g = invrt()(phoenix::lambda(_a = 0)[my_add(_1,_2)]); 
```

加号节点在哪里？对于 Proto（和 Phoenix）来说，`my_add`是不透明的。他们不知道里面有一个额外的东西。他们怎么可能？

**====编辑====**

考虑一下这个，它可以满足您的意图：

```
#include <iostream>
#include <boost/phoenix.hpp>
#include <boost/proto/proto.hpp>
namespace proto = boost::proto;
namespace phoenix = boost::phoenix;
using namespace phoenix::arg_names;
using namespace phoenix::local_names;

auto const my_add = phoenix::let(_a = _1, _b = _2)[_a + _b];

struct invrt:
  proto::or_<
    proto::when<
      proto::plus<proto::_, proto::_>,
      proto::functional::make_expr<proto::tag::minus>(
        invrt(proto::_left), invrt(proto::_right)
      )
    >,
    proto::otherwise<
      proto::nary_expr<proto::_, proto::vararg<invrt> >
    >
  >
{};

int main()
{
  auto f =         phoenix::lambda(_a = 0)[my_add(_1,_2)];
  auto g = invrt()(phoenix::lambda(_a = 0)[my_add(_1,_2)]);

  std::cout << f()(1,2) << std::endl; // 3
  std::cout << g()(1,2) << std::endl; // -1, w00t!
} 
```