# StackOverflow 问答 14994000-14994999

# regex - 在 Groovy 中获取 Mac 地址

> ID：14994000
> 
> 赞同：0
> 
> 时间：2013-02-21T03:19:18.263
> 
> 标签：regex, grails, groovy, mac-address

只是想问一下是否有办法将本地机器的 Mac 地址作为字符串获取。我需要将本地机器的 mac 地址保存到域类中。我尝试使用此代码来获取我的 Mac 地址：

```
String address = "ifconfig".execute().text() 
```

但是这一行还返回了很多关于我的 ip 地址的详细信息，我需要得到的只是在子字符串“HWaddr”之后找到的 Mac 地址。我在想是否可以使用正则表达式提取此子字符串，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:54:25.783

您可以使用 获取接口的 MAC 地址`java.net.NetworkInterface`。请注意，可能有多个硬件网络接口，因此可能有多个 MAC 地址。此外，大多数机器都会有至少一个没有硬件地址的接口：环回接口。

这将获得所有 MAC 地址作为字符串的列表，包括没有 MAC 地址的接口的空值：

```
import java.net.NetworkInterface 
def macs = NetworkInterface.networkInterfaces.collect { iface -> 
    iface.hardwareAddress?.encodeHex().toString()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:30:34.290

您可以使用[NetworkInterface](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html)获取此信息，尤其是`getHardwareAddress()`返回字节数组的方法

# android - 将 Android Login 与 ASP.NET 网站集成

> ID：14994001
> 
> 赞同：0
> 
> 时间：2013-02-21T03:19:20.323
> 
> 标签：android, asp.net, asp.net-mvc, membership-provider

我正在着手创建一个 Android 应用程序（以及随后的 iOS，如果它对答案有影响的话）作为现有网站的移动版本。我希望网站上的用户能够登录移动版，反之亦然。

该网站是用 ASP.NET MVC 编写的，我计划使用 ASP.NET Web API（接受和返回 xml/json）来提交/检索应用程序的必要数据。该网站使用 .NET 会员提供者进行身份验证。

我可以重复使用我现有的身份验证机制来验证 Android 用户并让他们登录 Android 应用程序吗？如果是这样，建议的方法是什么？谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:41:11.747

考虑到您想创建一个 android 版本和后来的 iOS 版本，您应该考虑使用基于 Web 的手机框架。看看[jQuery 移动版](http://view.jquerymobile.com/master/)

这些并不适合所有人。它们非常适合 webapps。但不如原生应用程序快。

您的本机应用程序将只是一个包装器，然后在 Web 视图中显示您网站的移动版本。安卓和iOS都支持这个。

如果它适合您，将为您节省大量代码重写和维护。

如果你确实想创建一个原生应用程序，你绝对可以创建一个基于 WebAPI 的登录并从 android 客户端使用它。

# c++ - 将类指针传递给函数，然后在类在范围内时访问成员

> ID：14994006
> 
> 赞同：1
> 
> 时间：2013-02-21T03:20:03.170
> 
> 标签：c++

基本上，类构造函数已经设置好了，并且根据之前的一些测试可以正常工作。现在我需要在 main 中创建一个类指针对象，将其传递给一个函数，然后在该函数内部调用另一个函数，该函数将创建一个具有特定名称的 Box 类的实例，并且当该类在范围内时打印出该框名称。

这段代码只是根据一些限制设计的，所以这就是为什么它不像它可能的那样干净或简单。我尝试了很多不同的东西，但对我来说似乎没有任何意义。我不断收到访问冲突：

```
void objCreateTmp(char *n)
{
   //cout<<"HERE";      
   Box tmp(n);
   cout<<"HERE"; 
   //tmp.name_set(n);
   tmp.name_print();
}

void objCreateKeep(Box *p, char *n)
{
  objCreateTmp(n);
}

int main()
{   

    Box *pp = new Box;
    objCreateKeep(pp,"Blue Box");
    objCreateKeep(pp,"Red Box");
    objCreateKeep(pp,"Orange Box");

    system("PAUSE");
    return(0);
} 
```

**编辑**

好的，这里是与访问、获取、设置`Box`类的名称成员有关的所有内容：

```
void Box::pri_setname(char *n)
{
   strcpy(name,n);  
}
//Set the name of Box()
void Box::name_set(char *n)
{
    name = new char[30];
    strcpy(name,n);
    pri_setname(name);
}

 class Box{

  //Private data members
  private:
  char *name;
  void pri_setname(char *n);

  public:
  //Public constructors and deconstructor
  Box(char *);
  ~Box();
  //Public function prototypes
  void name_set(char *n);
  void name_print();

}; 
```

# assembly - MIPS/MARS 在指令中使用符号？

> ID：14994007
> 
> 赞同：1
> 
> 时间：2013-02-21T03:20:07.900
> 
> 标签：assembly, mips

我正在尝试创建一个指向字符串的指针数组，但它的行为不符合预期。该数组包含字符串的内容，而不是地址。这是源代码：

```
 showhelp:
        .data
    help1:  .asciiz "\nHELP FOR HW4_2b\n"
    help2:  .asciiz "Purpose: Displays the output from a one-bit full adder with inputs provided on the command line.\n"
    help3:  .asciiz "HW4_2b c a b\n"
    help4:  .asciiz "c\t\tThe carry in bit: 0|1\n"
    help5:  .asciiz "a\t\tOne of the bits to be added: 0|1\n"
    help6:  .asciiz "c\t\tThe other bit to be added: 0|1\n"
    helpar: .word help1, help2, help3, help4, help6
    helpsiz:.word 6
            .text
            lw          $t0, helpsiz    # load size of help array
            lw          $t1, helpar     # load address of address of first help string
    nxthlp: la          $a0, ($t1)      # specify string to print
            li          $v0, 4          # specify print string 
            syscall                     # print it
            addi        $t1, $t1, 4     # increment pointer to next string
            subi        $t0, $t0, 1     # decrement counter
            bgtz        $t0, nxthlp     # if not last string loop

            jr $ra          # return 
```

当它运行时，这是输出：

```
 HELP FOR HW4_2b
    P FOR HW4_2b
    R HW4_2b
    4_2b

    rpose: Displays the output from a one-bit full adder with inputs provided on the command line. 
```

如您所见，helpar: 包含所有连接的字符串，而不是地址。另外，"la $a0, ($t1)" 中的间接寻址是加载$t1 的内容，而不是$t1 包含的地址处的内容。

我有什么误解？

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:07:32.803

这是问题所在：

```
 lw          $t0, helpsiz
        lw          $t1, helpar     # load address of 1st string
nxthlp: la          $a0, ($t1)      # NOT SURE IF THIS IS EVEN VALID
        li          $v0, 4
        syscall
        addi        $t1, $t1, 4     # skip 4 chars in string; must be unsigned add!
        subi        $t0, $t0, 1
        bgtz        $t0, nxthlp 
```

这是你应该做的：

```
 lw      $t0, helpsiz
    la      $t1, helpar # t1 points to element 0 of helpar
nxthlp:
    lw      $a0, 0($t1) # fetch element of helpar that t1 points to
    li      $v0, 4
    syscall
    addu    $t1, $t1, 4 # t1 points to next element of helpar
    subi    $t0, $t0, 1
    bgtz    $t0, nxthlp 
```

# windows - 绘制自定义标题（框架）时如何在 alt+tab 切换器中绘制标题？

> ID：14994012
> 
> 赞同：2
> 
> 时间：2013-02-21T03:21:01.227
> 
> 标签：windows, gdi, paint

我需要绘制一个自定义标题栏，我自己在其中绘制窗口标题。

```
 HDC hdc = GetWindowDC(hwnd);
    if (hdc && prepareTitleBarDC(getWidth(), 27)) {
        SetWindowText(hwnd, _T(""));
        DefWindowProc(hwnd, WM_NCPAINT, wParam, lParam);
        m_titleBar->setSize(getWidth(), 27);
        m_titleBar->setBkColor(SkColorSetARGB(0x00, 0x00, 0x00, 0x00));
        m_titleBar->paintEvent(m_pTitleBarDC);
        FnSkBitmap::SaveSkBitmap(m_pTitleBarDC->canvas(), L"e:\\titlebar.bmp");

        HDC hdcPaint = CreateCompatibleDC(hdc);
        HBITMAP hbm = CreateCompatibleBitmap(hdc, getWidth(), 27);
        SelectObject(hdcPaint, hbm);
        FnSkBitmap::DrawSkBitmap(m_pTitleBarDC->bitmap(), hdcPaint);
        BLENDFUNCTION bfn = {0};
        bfn.BlendOp = AC_SRC_OVER;
        bfn.BlendFlags = 0;
        bfn.SourceConstantAlpha = 255;
        bfn.AlphaFormat = AC_SRC_ALPHA;
        AlphaBlend(hdc, 0, 0, getWidth(), 27, hdcPaint, 0, 0, getWidth(), 27, bfn);
    }
    ReleaseDC(hwnd, hdc);
    return 0; 
```

并且使用AlphaBlend和自己混合标准框架，但是如果我使用SetWindowText(_T(""))，那么Alt+Tab切换器中的标题就消失了。

我尝试处理 WM_GETTEXT 消息并返回标题字符串，但失败了。我怎样才能自己绘制标题文本，但仍然在 alt+tab 切换器中制作标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:43:54.377

由于您已经在绘制“自定义标题栏”，因此没有理由使用实际窗口的文本实际绘制它

有两种方法可以做到这一点，一种是使用传统`DrawCaption`的 Win9x Win32Api，另一种是使用更新鲜的“主题 api”

这是一个同时使用两者的示例：

```
#include <Windows.h>
#include <Uxtheme.h>
#include <vssym32.h>

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

const LPCWSTR WINDOW_CLASS = L"Test Window Class";
const LPCWSTR WINDOW_CAPTION = L"This is my test window";
const LPCWSTR CUSTOM_CAPTION = L"Custom Caption Text";

int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow)
{
    WNDCLASSEX wndClassEx = {};

    wndClassEx.lpszClassName = WINDOW_CLASS;
    wndClassEx.hInstance = hInstance;
    wndClassEx.lpfnWndProc = WindowProc;
    wndClassEx.cbSize = sizeof(wndClassEx);
    wndClassEx.hCursor = (HCURSOR) LoadImage(NULL, MAKEINTRESOURCE(IDC_ARROW), IMAGE_CURSOR, 0, 0, LR_SHARED | LR_DEFAULTSIZE);
    wndClassEx.style = CS_DBLCLKS | CS_DROPSHADOW;

    ATOM registeredClass = RegisterClassEx(&wndClassEx);

    HWND hwnd = CreateWindowEx(
        0,
        WINDOW_CLASS,
        WINDOW_CAPTION,
        WS_SYSMENU,

        200, 200, 500, 300,

        NULL, // parent
        NULL, // menu
        hInstance,
        NULL // extra
        );

    if (hwnd == NULL)
    {
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);

    MSG msg = {};
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_LBUTTONDBLCLK:
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hwnd, &ps);

            // fill the window with a color
            HBRUSH hbrush = CreateSolidBrush(RGB(33, 33, 33));
            FillRect(hdc, &ps.rcPaint, hbrush);
            DeleteObject(hbrush);

            // get a drawing area
            RECT rect = {};
            GetClientRect(hwnd, &rect);
            rect.bottom = rect.top + GetSystemMetrics(SM_CYCAPTION) + GetSystemMetrics(SM_CYEDGE) * 2;

            // draw a simple win9x style caption (switch out the window text while drawing)
            SetWindowText(hwnd, CUSTOM_CAPTION);
            DrawCaption(hwnd, hdc, &rect, DC_GRADIENT | DC_TEXT | DC_ACTIVE | DC_ICON);
            SetWindowText(hwnd, WINDOW_CAPTION);

            // use theme framework
            HTHEME htheme = OpenThemeData(hwnd, L"Window");

            // move downwards and then use new APIs for size
            rect.top += rect.bottom + 20;
            rect.bottom = rect.top + GetThemeSysSize(htheme, SM_CYSIZE) + GetThemeSysSize(htheme, SM_CXPADDEDBORDER) * 2;

            // draw the background
            DrawThemeBackground(htheme, hdc, WP_CAPTION, CS_ACTIVE, &rect, &ps.rcPaint);

            // load the caption font and save the old one
            LOGFONTW captionfont = {};
            GetThemeSysFont(htheme, TMT_CAPTIONFONT, &captionfont);
            HFONT newfont = CreateFontIndirect(&captionfont);
            HGDIOBJ oldfont = SelectObject(hdc, newfont);

            // center the font and draw
            rect.top += GetThemeSysSize(htheme, SM_CXPADDEDBORDER);
            DrawThemeTextEx(htheme, hdc, WP_CAPTION, CS_ACTIVE, CUSTOM_CAPTION, -1, DT_CENTER, &rect, NULL);

            // cleanup fonts
            SelectObject(hdc, oldfont);
            DeleteObject(newfont);

            // adjust draw location, load icon and draw
            rect.left += GetThemeSysSize(htheme, SM_CXPADDEDBORDER) * 2;
            rect.top += GetThemeSysSize(htheme, SM_CXPADDEDBORDER);
            HICON icon = (HICON) LoadImage(NULL, MAKEINTRESOURCE(IDI_APPLICATION), IMAGE_ICON, 0, 0, LR_SHARED | LR_DEFAULTSIZE);
            DrawIconEx(hdc, rect.left, rect.top, icon, GetSystemMetrics(SM_CXSMICON), GetSystemMetrics(SM_CYSMICON), 0, NULL, DI_NORMAL);

            // close theme
            CloseThemeData(htheme);

            EndPaint(hwnd, &ps);

        }
        return 0;

    }
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
} 
```

结果窗口如下所示：

![结果窗口的屏幕截图](../Images/15c4e29548e82cc78a8f3fe43634a68d.png)

您可以看到 2 个“自定义绘制”标题栏显示自定义文本，而不是窗口上的文本。

快速浏览一下代码会告诉您，使用自定义例程尝试主题窗口标题比传统的要困难得多。当然，权衡是它给了你更多的控制权。您还会注意到，在使用旧方法时，我切换了窗口文本以使其显示我想要的内容。此外，您需要记住，遗留方法在如何从与窗口关联的样式中绘制自己的队列中，如果您的窗口样式没有图标，即使您指定它也不会绘制...

这些技术中的任何一种都可以实现您的目标。如果我切换此代码以不绘制多个标题栏并摆脱由窗口样式创建的默认标题栏，结果将如下所示：

![显示结果的屏幕截图](../Images/9ad6c43888e5ea83c3d391df462be550.png) 你可以在这里看到任务开关如何仍然显示实际的窗口文本，我的“自定义”标题栏看起来像真正的交易......

祝你好运，我希望这会有所帮助-ck

附带说明：我正在运行 Windows8，但不确定为什么标题绘制例程忽略了我的主题......也许我忘记了一个指令

# php - 如果如何将其插入mysql

> ID：14994013
> 
> 赞同：0
> 
> 时间：2013-02-21T03:21:09.557
> 
> 标签：php, textfield

如果我选择它来生成文本字段，是否可以插入文本字段将获得的所有值。如果是，如何？如果没有，还有其他方法吗？

```
 <?php
    for($i=0;$i<$b;$i++)
    echo"<input type=text name=textbox id=textbox>";
    ?> 
```

tnx 提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:23:45.027

您将用于`$_POST`获取数据；最有可能使用数组：

```
<input type=text name=textbox[1] /> 
```

然后准备你的陈述并`INSERT`进入你的数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T03:26:30.127

我想您的问题是如何使用生成的文本字段处理表单的输出？如果您使用上面的代码，它将不起作用，因为 html id 对于元素来说应该是唯一的。因此，您应该将代码更改为：

```
<?php
for($i=0;$i<$b;$i++)
    echo"<input type=\"text\" name=\"textbox".$i."\" id=\"textbox".$id."\">";
?> 
```

我猜你知道你需要一个表单元素来围绕你的输入来提交它们？如果您生成这样的表单字段，您将拥有 $_POST 数组中的所有输入（如果您使用 post 方法提交表单）

# vb.net - 无需任何用户干预即可扫描

> ID：14994016
> 
> 赞同：0
> 
> 时间：2013-02-21T03:21:29.687
> 
> 标签：vb.net, button

我有一个程序可以从扫描仪读取条形码，并在用户按下“完成”按钮时保存在文件中。

现在，我想让它自动化，当用户扫描条形码时，它会自动保存在一个文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:10:50.830

这是简单的逻辑。

1.  获取条码长度
2.  执行点击

    ```
    If barcodeText.Text.Length >= 10 Then
        Call DoneButtonClick(Nothing, Nothing)
    End If 
    ```

# php - php 检索带有标题信息的图像：授权：基本和内容类型：图像/jpg

> ID：14994019
> 
> 赞同：0
> 
> 时间：2013-02-21T03:21:42.993
> 
> 标签：php, header

我有一个通过 Android IP Camera App 的网络摄像头。我正在编写一个 php 脚本，在温度传感器上执行 OCR 以读取数字并在超过特定温度时警告我。我希望通过摄像头 IP 获取的 URL 是 shot.jpg，但是网络摄像头有一个用户名和授权密码：基本。我能够使用第一种方法通过身份验证，但它只是输出大量随机字符。第二种方法加载图片，但是src不正确。关于如何使用内容类型正确格式化第一种方法的任何建议都会令人惊叹。谢谢

```
//METHOD 1
    $context = stream_context_create(array(
    'http' => array('header'  => "Authorization: Basic " . base64_encode("$username:$password"))
));
$data = file_get_contents($url, false, $context);
echo $data;

//METHOD NUMBER 2
header('Authorization: Basic' . base64_encode("$username:$password"));
header('Content-Type: image/jpg');
$data = file_get_contents($url, false);
echo $data; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:59:31.427

您没有`Content-Type:`在示例 1中输出正确的内容。`file_get_contents`没有传递它。因此，图像将在假设它是 HTML 页面的情况下被发送到浏览器。

这边走：

```
$data = file_get_contents($url, false, $context);
header('Content-Type: image/jpg');    
echo $data; 
```

此外，尝试`curl`（也支持 HTTP），以简化登录凭据的使用。

在您的第二个示例中，您使用的是页面响应`header()`。该`Authorization:`行将不会通过那里的 file_get_contents() URL 请求传递。

# c# - 从 DropDown 中删除选定的项目（突出显示）

> ID：14994020
> 
> 赞同：1
> 
> 时间：2013-02-21T03:22:02.043
> 
> 标签：c#, wpf, xaml, combobox

我想知道是否可以`Key.Delete`在 a`DropDown`打开时删除突出显示的项目？

[![例子](../Images/30a8380921c325d45c7f1639e9341888.png)](https://i.stack.imgur.com/uALS6.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/eolrdqjq.mx3.png)）]

我试过的..

**C＃**

```
 private void OnKeyUpHandler(object sender, KeyEventArgs e)
    {
        Boolean delete = e.Key == Key.Delete;
        if (sender == cbkSnpCodes && (delete && cbkSnpCodes.IsDropDownOpen))
        {
            cbkSnpCodes.Items.Remove(cbkSnpCodes.SelectedItem);
            cbkSnpCodes.Items.Refresh();
        }
    } 
```

**XAML**

```
<ComboBox ItemsSource="{Binding SnpCodeModel}" Name="cbkSnpCodes" Controls:TextboxHelper.Watermark="Enter an snp code and press enter" MaxDropDownHeight="50" KeyUp="OnKeyUpHandler" KeyDown="OnKeyDownHandler" DisplayMemberPath="SnpCode" IsEditable="True" HorizontalAlignment="Left" VerticalAlignment="Top" Text="{Binding Path=SnpCode, Mode=TwoWay}" IsReadOnly="False" Height="26" Margin="81,9,0,0" Width="223" Grid.Column="1" Grid.ColumnSpan="2" /> 
```

**绑定类`SnpCodeModel`**

```
class SnpCodeModel
{
    public string SnpCode { get; set; }

    public SnpCodeModel(string _snpcode)
    {
            this.SnpCode = _snpcode;
    }
} 
```

我还尝试了[Harold Bamford](https://stackoverflow.com/users/10574/harold-bamford)在 Stackoverflow 问题上发布的解决方案： [在组合框中，如何确定突出显示的项目（未选择的项目）？](https://stackoverflow.com/questions/2723977/in-a-combobox-how-do-i-determine-the-highlighted-item-not-selected-item)

```
 private void OnKeyUpHandler(object sender, KeyEventArgs e)
    {
        Boolean delete = e.Key == Key.Delete;
        ComboBox box = sender as ComboBox;
        if (box.IsDropDownOpen && delete)
        {
            const BindingFlags flags = BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance;
            PropertyInfo hl = box.GetType().GetProperty("HighlightedItem", flags);
            if (hl != null)
            {
                String hlString = hl.GetValue(sender, null).ToString();
                SnpCodeModel snp = new SnpCodeModel(hlString);
                cbkSnpCodes.Items.Remove(snp);
                cbkSnpCodes.Items.Refresh();
            }
        }
    } 
```

但它不起作用:-(并在`System.Diagnostics;`

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''. BindingExpression:Path=VerticalContentAlignment; DataItem=null; target element is 'ComboBoxItem' (Name=''); target property is 'VerticalContentAlignment' (type 'VerticalAlignment') 
```

我当前尝试的主要问题是，因为`ComboBox`是可编辑的，所以我尝试删除的项目`null`在到达`cbkSnpCodes.Items.Remove`.

是否有可能实现我正在寻找的功能？我在谷歌上找不到太多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:08:15.127

您正在使用 SnpCodeModel 创建一个新实例`SnpCodeModel snp = new SnpCodeModel(hlString);`。即使内容相同，在 cbkSnpCodes 中也找不到，因为它与 HighlightedItem 的实例不同。

尝试类似的东西

```
 if (hl != null)
        {
            box.Items.Remove(hl.GetValue(sender, null));
            //box.Items.Refresh();
        } 
```

或覆盖 SnpCodeModel 中的 Equals 方法：

```
 public override bool Equals(object obj)
    {
        if (obj is SnpCodeModel)
            return ((SnpCodeModel)obj).SnpCode == this.SnpCode

        return false;
    } 
```

# c - 理解栈数组实现（C）

> ID：14994021
> 
> 赞同：1
> 
> 时间：2013-02-21T03:22:08.743
> 
> 标签：c, gdb, stack

我完全理解堆栈应该做什么（后进先出）。这只是让我感到困惑的堆栈的一部分。

```
typedef struct dynArrStruct
{
    char *location; //element
    int length;  //max size
    int currSize; //top
}dynArr;

dynArr a; //declared in main
//sorry this is an assignment and I try to refrain from posting my full code
//on here b/c of potential cheaters 
```

我将此代码用作我的堆栈。

基本上我的程序应该找到平衡的字符：'{'、'('、'<'、'[' 和它们的关闭计数器部分。

简而言之，每当我找到一个开口支架时，我都会将它推入堆栈。我一直把它推到堆栈上，直到找到一个右大括号，一旦找到一个右大括号，我就需要弹出堆栈。

我感到困惑的是变量 char* 位置。

假设我的字符串是“（）”

在 GDB 中：

如果我读入'（'我将它推入堆栈......如果我读入'）'我会弹出它。

当我这样做时： p a->location 它会打印出“（）”

我只是想知道每次弹出堆栈或弹出与a->位置无关的堆栈时，我是否应该从a->位置的值中删除“（）”？

换句话说，它应该在弹出后打印出“”吗？

如果这个问题没有意义，我提前道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:26:10.117

是的，从堆栈中弹出一个元素后，它应该不再可以在堆栈上访问。代表可访问元素数量的堆栈大小也应该减一。访问顶部值和弹出顶部值之间的区别是 C++ STL（我知道您正在使用 C 语言，但这只是一个示例）提供两种不同函数来弹出和访问顶部的原因之一对象中的值`std::stack`。该`std::stack::top`方法允许您实际访问堆栈顶部的元素，而该`std::stack::pop`方法通过将元素从顶部“弹出”来删除它。如果你要和一个人一起去`pop`但是，该方法既应该返回堆栈顶部的值的副本，又应该从堆栈数据结构中删除该值的内部表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T03:28:19.900

由于您尚未发布代码，因此很难确定，但我怀疑您将指针（例如 char * 位置）与其指向的内容混淆了。当前指向字符串“()”的指针将在 gdb 中打印为 ()，但指向（堆栈顶部）的字符将只是 '('。

如果您至少发布部分代码，则更具体会更容易。

# c# - 如何让 C# 登录到网站

> ID：14994024
> 
> 赞同：0
> 
> 时间：2013-02-21T03:22:50.190
> 
> 标签：c#, python, authentication

我想弄清楚如何让我的 C# 应用程序登录到我的网站应用程序。我完全不知道从哪里开始。通常在网站上，用户只需输入用户名和密码并检查或不检查记住我按钮并单击登录。我的 python 框架验证登录，然后在响应的标头中设置一个 cookie 以保存登录 cookie。当用户尝试访问页面时，它会检查是否可以找到 cookie，如果可以，则保持用户登录状态。

我完全不知道如何在桌面 C# 应用程序中做这样的事情。有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:26:32.157

> 我想弄清楚如何让我的桌面 C# 应用程序登录到我的网站应用程序

使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx) 类。

```
string string loginData = "username=***&passowrd=***&next=/hurt/";

WebClient wc = new WebClient();

wc.Headers.Add("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5");
wc.Headers.Add("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
wc.Headers.Add("Accept-Encoding", "identity");
wc.Headers.Add("Accept-Language", "en-US,en;q=0.8");
wc.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
wc.Headers.Add("ContentType", "application/x-www-form-urlencoded");
string response = wc.UploadString("http://xyz.com/accounts/login/", "POST", loginData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:24:56.767

如果要模拟浏览器，请使用 COM。下面的例子

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

// Add a reference to "C:\Windows\System32\shdocvw.dll"

namespace BrowserAutomation
{
    class Program
    {   
        static void Main(string[] args)
        {
            var ie = new SHDocVw.InternetExplorer();
            // Ensure that ie.Quit() is called at the end via the destructor
            var raii = new IE_RAII(ie);
            // Just so you can see what's going on for now
            ie.Visible = true;
            ie.Navigate2("http://www.wellsfargo.com");
            var document = GetDocument(ie);
            var userid = document.getElementById("userid");
            userid.Value = "billy.everyteen";
            var password = document.getElementById("password");
            password.Value = "monroebot";
            var form = document.Forms("signon");
            form.Submit();
            // Hang out for a while...
            System.Threading.Thread.Sleep(10000);
        }
        // Poor man's check and wait until DOM is ready
        static dynamic GetDocument(SHDocVw.InternetExplorer ie)
        {
            while (true)
            {
                try
                {
                    return ie.Document;
                }
                catch (System.Runtime.InteropServices.COMException e)
                {
                    if (e.Message != "Error HRESULT E_FAIL has been returned " +
                                     "from a call to a COM component.")
                    {
                        throw e;
                    }
                }
                System.Threading.Thread.Sleep(1000);
            }
        }
    }
    class IE_RAII
    {
        public IE_RAII(SHDocVw.InternetExplorer ie)
        {
            _ie = ie;
        }
        ~IE_RAII()
        {
            _ie.Quit();
        }
        private SHDocVw.InternetExplorer _ie;
    }
} 
```

# gcc - 使用 gcc 编译宏 __COPYRIGHT 时出错

> ID：14994026
> 
> 赞同：0
> 
> 时间：2013-02-21T03:23:00.070
> 
> 标签：gcc, macros

这是简单的 echo.c 源代码：

```
#include <sys/cdefs.h>
#ifndef lint
__COPYRIGHT(
"@(#) Copyright (c) 1989, 1993\n\
    The Regents of the University of California.  All rights reserved.\n");
#endif /* not lint */

#ifndef lint
#if 0
static char sccsid[] = "@(#)echo.c  8.1 (Berkeley) 5/31/93";
#else
__RCSID("$NetBSD: echo.c,v 1.7 1997/07/20 06:07:03 thorpej Exp $");
#endif
#endif /* not lint */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main __P((int, char *[]));

int
main(argc, argv)
    int argc;
    char *argv[];
{
    /*
     *main code with no error at all
     */
} 
```

使用 gcc 4.4.6 编译时，报错：

```
echo.c:4: error: expected declaration specifiers or â...â before string constant
echo.c:3: warning: data definition has no type or storage class
echo.c:12: error: expected declaration specifiers or â...â before string constant
echo.c:12: warning: data definition has no type or storage class 
```

第 3 行和第 4 行是 __COPYRIGHT 宏。第 12 行是 __RCSID 宏。

如果我删除这两个宏，它会成功编译并正确运行。

经过一番谷歌搜索，我知道这两个宏是在 sys/cdefs.h 中定义的，它们是某种评论消息。

但为什么它不会在 gcc 中编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:04:08.037

在通过 sys/cdefs.h (ubuntu 11.10) 之后，我发现 no`__COPYRIGHT`或`__RCSID`定义。所以我猜这两个宏是在 NetBSD sys/cdefs.h 中定义的。我将它们添加到一个新的头文件中（我将其命名为“aeodefs.h”），如下所示：

```
#ifndef _AEODEFS_H_
#define _AEODEFS_H_
#include <sys/cdefs.h>

#define __IDSTRING(name,string) \
        static const char name[] __attribute__((__unused__)) = string

#ifndef __RCSID
#define __RCSID(s) __IDSTRING(rcsid,s)
#endif

#ifndef __COPYRIGHT
#define __COPYRIGHT(s) __IDSTRING(copyright,s)
#endif

#endif /* !_AEODEFS_H_ */ 
```

然后更改`#include <sys/cdefs.h>`为`#include "aeodefs.h"`.

完成！

# .net - 我的 VS2012 无人值守silent.xml 没有安装CORE

> ID：14994029
> 
> 赞同：1
> 
> 时间：2013-02-21T03:23:20.313
> 
> 标签：.net, visual-studio, visual-studio-2012, windows-installer, silent-installer

我遇到了大麻烦，我创建了这个无人值守的 xml 来安装 VS2012，但没有安装运行 VS 所需的 CORE 文件（包 vs_ultimatecore.msi 包含：devenv.exe、vsixintaller 和所有必要的运行VS ...）

我需要做什么？

```
<?xml version="1.0" encoding="utf-8"?>  
<AdminDeploymentCustomizations xmlns="http://schemas.microsoft.com/wix/2011/AdminDeployment">  
<BundleCustomizations TargetDir="C:\Program Files (x86)\Microsoft Visual Studio 11.0" NoWeb="no"/>  
<SelectableItemCustomizations>  
 <SelectableItemCustomization Id="WebTools" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="OfficeTools" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="SharepointTools" Hidden="no" Selected="no"/>   
 <SelectableItemCustomization Id="LightSwitch" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="SilverLight_Developer_Kit" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="SQL" Hidden="no" Selected="no"/> 
 <SelectableItemCustomization Id="VC_MFC_Libraries" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="Blend" Hidden="no" Selected="no"/>  
 <SelectableItemCustomization Id="BlissHidden" Selected="yes"/>  
 <SelectableItemCustomization Id="HelpHidden" Selected="no"/>   
 <SelectableItemCustomization Id="IntelliTraceUltimateHidden" Selected="yes"/> 
 <SelectableItemCustomization Id="LocalDBHidden" Selected="no"/> 
 <SelectableItemCustomization Id="NetFX4Hidden" Selected="no"/>  
 <SelectableItemCustomization Id="NetFX45Hidden" Selected="yes"/> 
 <SelectableItemCustomization Id="PortableDTPHidden" Selected="no"/>  
 <SelectableItemCustomization Id="PreEmptiveDotfuscatorHidden" Selected="no"/>  
 <SelectableItemCustomization Id="PreEmptiveAnalyticsHidden" Selected="no"/>  
 <SelectableItemCustomization Id="ProfilerHidden" Selected="no"/>  
 <SelectableItemCustomization Id="ReportingHidden" Selected="no"/>  
 <SelectableItemCustomization Id="RIAHidden" Selected="no"/>   
 <SelectableItemCustomization Id="SDKTools3Hidden" Selected="yes"/>  
 <SelectableItemCustomization Id="SDKTools4Hidden" Selected="yes"/>  
 <SelectableItemCustomization Id="Silverlight5DRTHidden" Selected="no"/>   
 <SelectableItemCustomization Id="SQLCEHidden" Selected="no"/> 
 <SelectableItemCustomization Id="SQLCEToolsHidden" Selected="no"/> 
 <SelectableItemCustomization Id="SQLCLRTypesHidden" Selected="no"/>  
 <SelectableItemCustomization Id="SQLDACHidden" Selected="no"/>  
 <SelectableItemCustomization Id="SQLDbProviderHidden" Selected="no"/>  
 <SelectableItemCustomization Id="SQLDOMHidden" Selected="no"/> 
 <SelectableItemCustomization Id="SQLSharedManagementObjectsHidden" Selected="no"/>  
 <SelectableItemCustomization Id="StoryboardingHidden" Selected="no"/>  
 <SelectableItemCustomization Id="TSQLHidden" Selected="no"/> 
 <SelectableItemCustomization Id="VCCompilerHidden" Selected="no"/> 
 <SelectableItemCustomization Id="VCCoreHidden" Selected="no"/>  
 <SelectableItemCustomization Id="VCDebugHidden" Selected="no"/>  
 <SelectableItemCustomization Id="VCDesigntimeHidden" Selected="no"/>  
 <SelectableItemCustomization Id="VCExtendedHidden" Selected="no"/>  
 <SelectableItemCustomization Id="WCFDataServicesHidden" Selected="yes"/>  
 <SelectableItemCustomization Id="WinJSHidden" Selected="no"/>  
 <SelectableItemCustomization Id="WinSDKHidden" Selected="no"/>  
</SelectableItemCustomizations>  
</AdminDeploymentCustomizations> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:17:15.337

比较：

```
<SelectableItemCustomization Id="WebTools" Hidden="no" Selected="yes"/>
<SelectableItemCustomization Id="OfficeTools" Hidden="no" Selected="yes"/>
<SelectableItemCustomization Id="SharepointTools" Hidden="no" Selected="yes"/>
<SelectableItemCustomization Id="LightSwitch" Hidden="no" Selected="yes"/>
<SelectableItemCustomization Id="SilverLight_Developer_Kit" Hidden="no" Selected="yes" />
<SelectableItemCustomization Id="SQL" Hidden="no" Selected="yes" />
<SelectableItemCustomization Id="VC_MFC_Libraries" Hidden="no" Selected="yes" />
<SelectableItemCustomization Id="Blend" Hidden="no" Selected="no" /> 
```

# entity-framework-5 - 代码优先约定

> ID：14994034
> 
> 赞同：1
> 
> 时间：2013-02-21T03:23:51.530
> 
> 标签：entity-framework-5, code-first

在使用 fluent api 的映射中使用 Entity Framework Code First 时，我可以使用 Ignore 来不映射某些类。

我有一个约定，我用字符`Stub`和`Missing`.

Entity Framework 5 Code First 中是否有一种方法可以设置一个不会映射任何以`Stub*`or开头的类的约定`Missing*`？

我尝试了搜索，但找不到任何可以帮助我解决此问题的东西。

# algorithm - 给定定义四面体的 3 个顶点中的 2 个以及它们之间的所有 3 个角度，找到第 3 个顶点

> ID：14994036
> 
> 赞同：1
> 
> 时间：2013-02-21T03:24:09.693
> 
> 标签：algorithm, 3d, geometry

假设四面体的四个顶点之一位于原点，另外三个位于向量**u**、**v**和**w**的末尾。如果向量**u**和**v**已知，并且**u**和**v**、**v**和**w**以及**w**和**u**之间的角度也已知，则似乎存在**w**的封闭形式解：旋转向量形成的两个圆锥的交点在关于**u轴的****u**和**w**角度处，并通过在**v**和**w**处旋转矢量******相对于**v**轴的角度。******

 ****尽管我在几天内无法提出封闭形式的解决方案，但我希望这是由于我缺乏 3d 几何经验，并且有更多经验的人可能会提出有用的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T08:53:19.483

我遇到了同样的问题，发现 MBo 的回答非常有用。但我认为我们可以多说一点**w**的值，因为我们可以自由选择要工作的坐标系。特别是，如果我们选择 x 轴在**u**的方向，并且 xy -plane以包含向量**v**，则 MBo 的方程组变为：

```
 wx         = cos(uw)
vx*wx + vy*wy = cos(vw)
||w||         = 1 
```

这个坐标系给出

```
vx = cos(uv), vy = sin(uv) 
```

所以我们马上就明白了

```
 _____________________
    (           cos(vw) - cos(uv) * cos(uw)    +  /        2              )
w = ( cos(uw), ----------------------------- , - /  1 - cos (uw) - wy*wy  )
    (                     sin(uv)              \/                         ) 
```

平方根上的 +- 给出了两种可能的解决方案，当然除非`1 - cos^2(uw) - wy^2 <= 0`. **当u**和**v**线性相关（指向同一方向）时，除以`sin(uv)`也突出显示了退化情况。

 ****我们可以进行的另一项检查是，如果向量`u`和`v`是正交的，则已知 `wy = cos(vw)`（参见[https://math.stackexchange.com/questions/726782/find-a-3d-vector-given-the-angles-of-the -axes-and-a-magnitude](https://math.stackexchange.com/questions/726782/find-a-3d-vector-given-the-angles-of-the-axes-and-a-magnitude)）。这不属于上面的表达式（因为`cos(uv) = 0`and `sin(uv) = 1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:42:48.177

没有足够的数据来计算顶点 w 位置。但是有可能找到单位向量**w**（如果它存在的话）。只需使用标量积属性并求解方程组（我使用 (vx,vy,vz) 作为单位（归一化）向量**v**的组成部分）

```
vx*wx+vy*wy+vz*wz=Cos(v,w angle)
ux*wx+uy*wy+uz*wz=Cos(u,w angle)
wx^2+wy^2+wz^2=1  //unit vector 
```

这个系统可以给我们： 没有解决方案（锥体不重叠）；一种解决方案（锥体接触）；两种解决方案（两条射线作为锥面相交）********

# iphone - 当应用程序进入前台时丢失所有绘图

> ID：14994042
> 
> 赞同：0
> 
> 时间：2013-02-21T03:24:49.533
> 
> 标签：iphone, ios, drawing, drawrect

我通过在 iPhone 应用程序上拖动手指来绘制多种颜色，但是当我最小化应用程序然后最大化时，我失去了所有的绘图，因为它调用了**drawrect**方法。我不知道从哪里调用此方法，但我看不到此问题的任何解决方案。主要是当我在设备上运行许多应用程序时发生。我认为 iOS 会删除缓冲区中的所有数据，以防止 iPhone 性能低下。这个问题的解决方案是什么？为什么它会丢失图纸？请帮忙！我没有找到这个问题的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:44:44.003

> 我丢失了所有的绘图，因为它调用了**drawrect**方法。

从您的问题来看，似乎您没有在 drawRect 方法中绘图，每次更新/加载视图时都会调用 drawrect 方法。所以当你从后台进入时会调用drawrect方法。如果您没有在 drawrect 方法中处理绘图机制，则会丢失所有数据。

[苹果表示](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCDGJHF)

> 此方法的默认实现什么也不做。使用原生绘图技术（如 Core Graphics 和 UIKit）来绘制其视图内容的子类应覆盖此方法并在那里实现其绘图代码。如果您的视图以其他方式设置其内容，则无需重写此方法。例如，如果您的视图仅显示背景颜色，或者您的视图直接使用底层图层对象设置其内容，则不需要覆盖此方法。同样，如果您的视图使用 OpenGL ES 进行绘图，则不应覆盖此方法。

如果您以其他方式处理它，那么您需要在 viewwillAppear 中绘制视图后处理它。

否则可能是内存原因，因为如果您收到内存警告，通常会在您初始化数据的地方调用 ViewDidLoad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:39:37.657

因为你的视图是在后台卸载的，当你回到前台时，视图会被重新创建，所以它会重绘。

当你进入后台时，如果设备内存不足，苹果会卸载后台应用的视图（甚至关闭你的应用），为当前运行的应用扩大内存。您的视图已卸载，当您返回前台时，视图将由“数据”重新创建，因此请确保不要在视图中保存“数据”。

并且可能在 IOS6 中，Apple 修改了机制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:38:48.580

框架将根据需要调用 drawRect，在调用时绘制视图是您的责任。您应该存储用户操作所需的任何状态，以便在调用 drawRect 时重绘视图。

# php - 在 PHP 中计算单词

> ID：14994044
> 
> 赞同：0
> 
> 时间：2013-02-21T03:24:54.920
> 
> 标签：php, substr, counting

我在 PHP 中计算单词时遇到问题，这是我的代码：

```
$word=substr(stripslashes(strip_tags($row['short_story'], '<a></a>')), 0,100 )."...";
$tpl->set( '{word}',$word); 
```

在该代码上，我只能在结果中显示 URL 链接，我需要显示完整的样式和 HTML 代码，所以我改为：

```
$word = substr( stripslashes (strip_tags($row['short_story'], '<a><b><i><u><br></a><div></div>')), 0,400 )."..."; 
```

我改变了这个：

```
<a></a> 
```

至：

```
<a><b><i><u><br></a><div></div> 
```

但问题是，如果我想显示我的结果正确，我必须设置超过 400-500 的字数限制！因为有 100 0r 200 字的限制，HTML 代码会被破坏！

我的问题是，我如何使用字数统计，但只计算数字和字母？例如在这段代码中：

```
<div style="color:red;">hello</div> 
```

我只需要数**你好**词。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:44:49.670

试试下面的代码：只有当你知道你的字符串中包含哪些标签时它才会起作用。

```
<?php
$tag_word = '<div style="color:red;">hello</div>';

// You can add any number of tags ex: strip_tags($tag_word, '<div><a><img><p>');
$word = strip_tags($tag_word, '<div>');
echo count($word);
?> 
```

# python - 找不到安装 rdflib 的路径

> ID：14994046
> 
> 赞同：0
> 
> 时间：2013-02-21T03:25:25.257
> 
> 标签：python, installation, rdflib

当我设置时，我得到：

```
C:\Python27>python Lib\site-packages\rdflib-master\setup.py
Traceback (most recent call last):
    File "Lib\site-packages\rdflib-master\setup.py", line 64, in <module>
        version = find_version('rdflib/__init__.py')
    File "Lib\site-packages\rdflib-master\setup.py", line 59, in find_version
        for line in open(filename):
IOError: [Errno 2] No such file or directory: 'rdflib/__init__.py' 
```

该文件在那里，我尝试将包路径添加到 PYTHONPATH；没运气。

因此，我尝试使用 ez_setup.py，但这会阻塞某些 url，导致它出现 404（下面的跟踪）。

我还搜索了一般安装建议：我找到了 pre-K 和 postgrad，但没有任何帮助。

```
Downloading http://cheeseshop.python.org/packages/2.7/s/setuptools/setuptools-0.6c5-py2.7.egg
Traceback (most recent call last):

  File "Lib\site-packages\rdflib-master\ez_setup.py", line 223, in <module>
    main(sys.argv[1:])

  File "Lib\site-packages\rdflib-master\ez_setup.py", line 155, in main
    egg = download_setuptools(version, delay=0)

  File "Lib\site-packages\rdflib-master\ez_setup.py", line 137, in download_setuptools
    src = urllib2.urlopen(url)

  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)

  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = meth(req, response)

  File "C:\Python27\lib\urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)

  File "C:\Python27\lib\urllib2.py", line 432, in error
    result = self._call_chain(*args)

  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)

  File "C:\Python27\lib\urllib2.py", line 619, in http_error_302
    return self.parent.open(new, timeout=req.timeout)

  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = meth(req, response)

  File "C:\Python27\lib\urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)

  File "C:\Python27\lib\urllib2.py", line 438, in error
    return self._call_chain(*args)

  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)

  File "C:\Python27\lib\urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 404: Not Found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:49:43.467

将源代码放入其中是一个奇怪的想法，`Lib\site-packages`但是如果要从源代码安装，则需要`setup.py`从源目录中调用。它抱怨`rdflib/__init__.py`不存在，因为它不存在：注意路径是相对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:43:52.077

恐怕我们需要更多信息。哪个版本的 RDFLib？如何尝试安装？我们可以得到完整的错误信息吗？

最好的方法是使用“pip”，以某种方式安装它：[http ://www.pip-installer.org/en/1.3.X/installing.html](http://www.pip-installer.org/en/1.3.X/installing.html)

然后做

```
pip install rdflib 
```

这将安装最新的 RDFLib 3.2.X！

# python - Pymongo 在 MacOS 上的安装和执行

> ID：14994048
> 
> 赞同：0
> 
> 时间：2013-02-21T03:26:10.887
> 
> 标签：python, mongodb, pip, pymongo, easy-install

我可以知道为什么我不能在 MacOS 上运行 pymongo 吗？我安装了pymongo

```
sudo easy_install pymongo 
```

但我不确定为什么会收到此错误

```
 conn = Connection(ip)
  File "/Library/Python/2.7/site-packages/pymongo-2.4.2-py2.7-macosx-10.8-intel.egg/pymongo/connection.py", line 180, in __init__
  File "/Library/Python/2.7/site-packages/pymongo-2.4.2-py2.7-macosx-10.8-intel.egg/pymongo/mongo_client.py", line 269, in __init__
pymongo.errors.ConnectionFailure: could not connect to 192.168.0.1:27017: [Errno 51] Network is unreachable 
```

因此我谷歌并发现我还没有启动pymongo，然后我尝试运行

```
mongod
mongo
./mongod 
```

然后它返回给我找不到命令。试图执行这个

```
sudo export PATH=$PATH:/usr/local/mongodb/bin 
```

任何人都知道我的安装发生了什么，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:52:44.550

您必须为 osx 安装 mongodb 服务器：http: [//docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)

# windows-7 - COM 注册失败，因为需要管理员权限

> ID：14994049
> 
> 赞同：2
> 
> 时间：2013-02-21T03:26:12.370
> 
> 标签：windows-7, com, visual-studio-2005, regasm

注册 COM 组件时出现错误。从命令行我收到以下错误

> RegAsm : error RA0000 : 将注册信息写入注册表时出错。需要管理员权限才能使用选定的选项。使用管理员命令提示符来完成这些任务。

从 Visual Studio 注册，我收到错误

> 错误 MSB3216：无法注册程序集“xxxxxxx.dll” - 访问被拒绝。试图执行未经授权的操作。

我正在使用安装了所有更新的 Windows 7 64 位，并且我禁用了 UAC。似乎是什么问题？

# backbone.js - 在 Backbone.View 的所有实例中触发的事件

> ID：14994057
> 
> 赞同：0
> 
> 时间：2013-02-21T03:27:04.797
> 
> 标签：backbone.js

我正在显示带有 Backbone 的类别表。我创建了两个视图：

*   **RowView**（包含单个 tr）
*   **TableView**（包含表结构）

定义：

```
RowView = Backbone.View.extend({
  el: "#content table tbody",
  initialize: function() {
    this.render();
  },
  render: function(){
    var params = { name: this.model.get('name'), route: this.options.route };
    var template = _.template( $("#rowTemplate").html(), params);
    this.$el.append(template);
  },
  events: {
    "click #name": "clickHandler"
  },
  clickHandler: function( event ) {
    console.log('Browse subcategories of ' + this.model.get('name'));
  }
});

TableView = Backbone.View.extend({
  el: "#content",
  initialize: function(){
    this.render();
  },
  render: function(){
    var row = new this.collection();
    var that = this;
    row.fetch({
      success: function() {
        console.log('Collection fetch succeeded');
        var params = { title: that.options.title,
                       counter: row.at(0).get('counter'),
                       route: that.options.route
                     };

        var template = _.template( $("#tableTemplate").html(), params);
        that.$el.html( template );
        // RowView's are created by iteration here
        for(var x = 1; x < row.length; x++) {
          var params = { model: row.at(x), route: that.options.route };
          var view = new RowView(params);
        }
      }
    });
  }
}); 
```

如您所见，我在 RowView 上附加了一个点击事件。

行视图模板：

```
<script type="text/template" id="rowTemplate">
<tr>
  <td id="name" class="fill"><%= name %></td>
  <td><a href="#<%= route %>/<%= name %>/edit" class="btn">Editar</a></td>
</tr>
</script> 
```

单击任何`#name`会在视图的所有实例中触发处理程序。因此，当单击一个类别时，我得到：

```
Browse subcategories of category1 127.0.0.1:68
Browse subcategories of category2 127.0.0.1:68
etc... 
```

据我所知，那是因为所有人`RowView's`都被委派给同一个`el`.

我想到的第一件事是将DOM 中`category name`的`rowTemplate`值与视图中的值进行比较，以查看哪个实际触发了事件。

但这种解决方案看起来真的很难看。完成此操作的正确方法是`Backbone`什么？

**额外：**如果我只创建一个视图并在模板中迭代以生成行，是否会更好？

**编辑：**我认为提供的代码就足够了。否则我可以添加它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:50:51.887

你可以`RowView`这样修改：

```
RowView = Backbone.View.extend({
    container: '#content table tbody',
    tagName: 'tr',
    initialize: function() {
        this.render();
    },
    render: function() {
        var params = {
            name: this.model.get('name'),
            route: this.options.route
        };
        var template = _.template($("#rowTemplate").html(), params);
        this.$el.html(template).appendTo(this.container);
    },
    events: {
        "click .fill": "clickHandler"
    },
    clickHandler: function(event) {
        console.log('Browse subcategories of ' + this.model.get('name'));
    }
}); 
```

和 RowView 模板：

```
<script type="text/template" id="rowTemplate">
<td class="fill"><%= name %></td>
<td><a href="#<%= route %>/<%= name %>/edit" class="btn">Editar</a></td>
</script> 
```

Backbone.js 将创建一个`tr`元素。然后用模板`this.$el.html(template).appendTo(this.container)`填充`tr`元素并附加到`#content table tbody`.

就像这样，RowView 的事件被委托给 RowView 的 el，而不是`#content table tbody`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:00:16.343

尝试这个

```
RowView = Backbone.View.extend({
    container: '#content table tbody',
    tagName: 'tr',

  //  initialize: function() {
 //           this.render();
 //       },
    render: function() {
        var params = {
            name: this.model.get('name'),
            route: this.options.route
        };
        var template = _.template($("#rowTemplate").html(), params);
        this.$el.append(this.template);
    },
    events: {
        "click .name": "clickHandler"
    },
    clickHandler: function(event) {
        console.log('Browse subcategories of ' + this.model.get('name'));
    }
}); 
```

RowView 模板（无需识别每个行视图）：

```
<script type="text/template" id="rowTemplate">
<td class="name"><%= name %></td>
<td><a href="#<%= route %>/<%= name %>/edit" class="btn">Editar</a></td>
</script> 
```

然后是表格视图：

```
...
       that.$el.html( template );
        // RowView's are created by iteration here
        for(var x = 1; x < row.length; x++) {
          var params = { model: row.at(x), route: that.options.route };
          var view = new RowView(params);
          that.$el.find('tbody').append(view.el);
          view.render()

        }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:22:03.600

您的页面上有多个具有相同 id 的元素，因为您的所有行都具有

`<td id="name" class="fill">`元素。

元素 ID 在您的文档中应该是唯一的。

一种解决方案是区分模板中的行，并使用事件作为函数来设置正确的 ID。

模板：

```
<script type="text/template" id="rowTemplate">
<tr>
  <td id="name-<%= name %>" class="fill"><%= name %></td>
  <td><a href="#<%= route %>/<%= name %>/edit" class="btn">Editar</a></td>
</tr> 
```

事件功能：

```
events: function(){
  _events = {};
  _events["click #name-" + this.model.get('name')] = "clickHandler";
  return _events;
} 
```

# java - 在 Java Play 应用程序上通过 SendGrid 发送邮件失败

> ID：14994059
> 
> 赞同：1
> 
> 时间：2013-02-21T03:27:10.050
> 
> 标签：java, heroku, playframework, smtp, sendgrid

我正在尝试从我的 Java Play 2.10 应用程序通过 SendGrid 发送一封简单的测试电子邮件。我正在使用 play-plugins-mailer 发送电子邮件并拥有一个免费的（heroku）SendGrid 帐户。这是我迄今为止所做的一切：

*   将 play-plugins-mailer 依赖项添加到我的 Build.scala
*   将 CommonsMailerPlugin 添加到我的 play.plugins 文件中
*   在我的控制器中添加了以下代码以发送电子邮件：

    ```
    MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email();
    mail.setSubject("test subject");
    mail.addRecipient("test@gmail.com");
    mail.addFrom("testapp@heroku.com");
    mail.send("some text"); 
    ```

*   在我的 application.conf 中添加了以下内容：

    ```
    smtp.host="smtp.sendgrid.net"
    smtp.user="[my-sendgrid-user]"
    smtp.pass="[my-sendgrid-pass]"
    smtp.port="587"
    smtp.channel=plain 
    ```

我很确定 Mailer 工作正常，这似乎是 SendGrid 配置问题。执行此代码时，我收到此错误：

**[RuntimeException：org.apache.commons.mail.EmailException：将电子邮件发送到以下服务器失败：smtp.sendgrid.net:587]**

我已经尝试在我的本地机器以及在我将 SendGrid 插件添加到我的应用程序的 heroku 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:50:16.287

你看过这个线程吗？ [使用 SendGrid 在 Heroku 中发送邮件](https://stackoverflow.com/questions/8196521/send-mail-in-heroku-using-sendgrid)

此外，您可能会尝试本教程中描述的 Typesafe 邮件插件：

> [http://blog.flurdy.com/2012/05/send-email-via-sendgrid-on-heroku-using.html](http://blog.flurdy.com/2012/05/send-email-via-sendgrid-on-heroku-using.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T07:26:57.997

我认为您可以使用官方 SendGrid-java Jithub 项目中提供的 Java API。

[官方发送网格 Java API](https://github.com/sendgrid/smtpapi-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:38:37.190

尝试：

```
smtp.ssl=true 
```

这[对我有用](https://github.com/jamesward/happytrails/blob/play2_java)。

# json - 从 Fiddler 使用 JSON 正文调用 POST Web API 4 方法的参数为 null

> ID：14994062
> 
> 赞同：14
> 
> 时间：2013-02-21T03:27:16.610
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api, fiddler, c#-5.0

在一些遗留数据库代码上，我有一个非常简单的 Web API 4 控制器。像这样的实体：

```
public class Employee
{
    public string EmploymentStatus { get; set; }
    public string CompanyCode { get; set; }
    public string Division { get; set; }
    public string OrgLevel1Code { get; set; }
    public string OrgLevel2Code { get; set; }
    public string OrgLevel3 { get; set; }
    public string StoreName { get; set; }
    public string EmployeeNumber { get; set; }
    public string EmployeeFirstName { get; set; }
    public string EmployeeMiddleInitial { get; set; }
    public string EmployeeLastName { get; set; }
    public string EmailAddress { get; set; }
    public string JobCode { get; set; }
    public string DateInJob { get; set; }
    public string OriginalHire { get; set; }
} 
```

该方法如下所示：

```
 public HttpResponseMessage PostEmployee(Employee item)
    {
        DataHelpers.AddUser(item.CompanyCode, item.Division, item.OrgLevel1Code, item.OrgLevel2Code, item.OrgLevel3, item.EmployeeFirstName, item.EmployeeMiddleInitial, item.EmployeeLastName, item.EmailAddress, item.JobCode, item.OriginalHire);
        var response = Request.CreateResponse<Employee>(HttpStatusCode.Created, item);
        string uri = Url.Link("DefaultApi", new { id = item.EmployeeNumber });
        response.Headers.Location = new Uri(uri);
        return response;
    } 
```

当我像这样通过 Fiddler 发布时：

```
POST /api/identity HTTP/1.1
User-Agent: Fiddler
Host: localhost:1421
Content-Length: 382
contentType: "application/json; charset=utf-8"
dataType: 'json'

{
"employmentStatus":"zzz",
"companyCode":"Titlemax",
"division":"bbb",
"orgLevel1Code":"ccc",
"orgLevel2Code":"ddd",
"orgLevel3":"eee",
"storeName":"fff",
"employeeNumber":"12343",
"employeeFirstName":"Bill",
"employeeMiddleInitial":"A",
"employeeLastName":"sempf",
"emailAddress":"bill@sempf.net",
"jobCode":"GM",
"dateInJob":"8/7/2005",
"originalHire":"8/7/2005"
} 
```

我从 .NET 中得到一个异常，并且 item 参数为空。

```
{"Message":"An error has occurred.","ExceptionMessage":"Object reference not set to an instance of an object.","ExceptionType":"System.NullReferenceException"} 
```

我错过了什么？我是 Web API 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T03:58:29.010

我认为这是 Fiddler 中的请求格式。尝试从 Content-Type 标头中删除引号

从作曲家选项卡：

```
POST http://localhost:1421/api/identity HTTP/1.1 
```

请求标头：

```
User-Agent: Fiddler
Host: localhost:1421
Content-Type: application/json; charset=utf-8 
```

请求正文：

```
{
   "employmentStatus":"zzz",
   "companyCode":"Titlemax",
   "division":"bbb",
   "orgLevel1Code":"ccc",
   "orgLevel2Code":"ddd",
   "orgLevel3":"eee",
   "storeName":"fff",
   "employeeNumber":"12343",
   "employeeFirstName":"Bill",
   "employeeMiddleInitial":"A",
   "employeeLastName":"sempf",
   "emailAddress":"bill@sempf.net",
   "jobCode":"GM",
   "dateInJob":"8/7/2005",
   "originalHire":"8/7/2005"
} 
```

回复：

```
HTTP/1.1 201 Created
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Location: http://localhost:1421/api/identity/12343
Server: Microsoft-IIS/8.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?YzpcdXNlcnNcY2FsdmlfMDAwXGRvY3VtZW50c1x2aXN1YWwgc3R1ZGlvIDIwMTJcUHJvamVjdHNcTXZjQXBwbGljYXRpb24yXE12Y0FwcGxpY2F0aW9uMlxhcGlcaWRlbnRpdHk=?=
X-Powered-By: ASP.NET
Date: Thu, 21 Feb 2013 03:53:04 GMT
Content-Length: 351

{"EmploymentStatus":"zzz","CompanyCode":"Titlemax","Division":"bbb","OrgLevel1Code":"ccc","OrgLevel2Code":"ddd","OrgLevel3":"eee","StoreName":"fff","EmployeeNumber":"12343","EmployeeFirstName":"Bill","EmployeeMiddleInitial":"A","EmployeeLastName":"sempf","EmailAddress":"bill@sempf.net","JobCode":"GM","DateInJob":"8/7/2005","OriginalHire":"8/7/2005"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T04:12:32.990

你的提琴手请求头应该是这样的：

内容类型：应用程序/json

# c# - 某种图片网址

> ID：14994064
> 
> 赞同：0
> 
> 时间：2013-02-21T03:27:24.470
> 
> 标签：c#, asp.net, webforms

我有这样的两行：

```
<img height="100" width="100" src="../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg">

<asp:Image id="img_prev" name="img_prev" src="" Height="80" Width="100" runat="server" />
img_prev.ImageUrl = "../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg" 
```

我尝试在 2 个 html 图像和 .net 图像中显示图像，在 html 代码中显示商品，但在 .net 图像中它无法显示到图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:37:20.510

试试这个

```
<asp:Image id="Img1" runat="server" Height="80" Width="100" ImageUrl="../uploadimages/18-2-2013-23-33-01-Lighthouse.jpg" /> 
```

或删除`src=""`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:33:30.433

您是否有理由尝试使用 asp 图像控件？通常，只有在需要访问服务器端的控件时才需要使用它。

尝试这个。

```
img_prev.ImageUrl = "~/folder/filename"; 
```

# subsonic - 仅生成修改后的表类 - Subsonic

> ID：14994066
> 
> 赞同：0
> 
> 时间：2013-02-21T03:27:37.560
> 
> 标签：subsonic

有没有办法只生成那些被更改的表（添加列、修改列、删除列等）的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:07:56.363

Not really, but there's usually no reason to worry about that. If you have custom code that you don't want overwritten you can put it in a partial class. Was that the issue?

# php - 按子数组键值对多维数组进行排序

> ID：14994075
> 
> 赞同：10
> 
> 时间：2013-02-21T03:29:15.520
> 
> 标签：php, arrays, sorting

为此发布了类似的问题和答案，但没有一个与我的数组结构完全匹配，所以如果我错过了什么，请道歉。这是由 WordPress wpdb 类生成的数组：

```
Array ( 
[0] => Array ( [meta_id] => 37850 [post_id] => 5548 [meta_key] => Item # [meta_value] => 66002 ) 
[1] => Array ( [meta_id] => 37851 [post_id] => 5548 [meta_key] => Hex Size [meta_value] => .051" ) 
[2] => Array ( [meta_id] => 37852 [post_id] => 5548 [meta_key] => Across Flats [meta_value] => 0.051 ) 
[3] => Array ( [meta_id] => 37853 [post_id] => 5548 [meta_key] => Type [meta_value] => Hexagonal ) 
[4] => Array ( [meta_id] => 37854 [post_id] => 5548 [meta_key] => Shank [meta_value] => .315" ) ) 

Array ( 
[0] => Array ( [meta_id] => 37910 [post_id] => 5553 [meta_key] => Item # [meta_value] => 66008 ) 
[1] => Array ( [meta_id] => 37911 [post_id] => 5553 [meta_key] => Hex Size [meta_value] => 1/8" ) 
[2] => Array ( [meta_id] => 37912 [post_id] => 5553 [meta_key] => Across Flats [meta_value] => 0.127 ) 
[3] => Array ( [meta_id] => 37913 [post_id] => 5553 [meta_key] => Type [meta_value] => Hexagonal ) 
[4] => Array ( [meta_id] => 37914 [post_id] => 5553 [meta_key] => Shank [meta_value] => .315" ) ) 

Array ( 
[0] => Array ( [meta_id] => 37862 [post_id] => 5549 [meta_key] => Item # [meta_value] => 66004 ) 
[1] => Array ( [meta_id] => 37863 [post_id] => 5549 [meta_key] => Hex Size [meta_value] => 1/16" ) 
[2] => Array ( [meta_id] => 37864 [post_id] => 5549 [meta_key] => Across Flats [meta_value] => 0.063 ) 
[3] => Array ( [meta_id] => 37865 [post_id] => 5549 [meta_key] => Type [meta_value] => Hexagonal ) 
[4] => Array ( [meta_id] => 37866 [post_id] => 5549 [meta_key] => Shank [meta_value] => .315" ) ) 

Array ( 
[0] => Array ( [meta_id] => 37886 [post_id] => 5551 [meta_key] => Item # [meta_value] => 66006 ) 
[1] => Array ( [meta_id] => 37887 [post_id] => 5551 [meta_key] => Hex Size [meta_value] => 3/32" ) 
[2] => Array ( [meta_id] => 37888 [post_id] => 5551 [meta_key] => Across Flats [meta_value] => 0.095 ) 
[3] => Array ( [meta_id] => 37889 [post_id] => 5551 [meta_key] => Type [meta_value] => Hexagonal ) 
[4] => Array ( [meta_id] => 37890 [post_id] => 5551 [meta_key] => Shank [meta_value] => .315" ) ) 
```

我需要按 Array[meta_value] 的顺序列出它们。然后我使用该数组按该顺序生成产品表。我一直在使用以下函数，但它产生的结果没有任何意义：

```
function subval_sort($a,$subkey) {
    foreach($a as $k=>$v) {
        $b[$k] = strtolower($v[$subkey]);
    }
    asort($b);
    foreach($b as $key=>$val) {
        $c[] = $a[$key];
    }
    return $c;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T03:45:18.047

使用[usort()](http://php.net/manual/en/function.usort.php)，例如：

```
$items = [
    ['id' => 3, 'item' => 'pc'],
    ['id' => 1, 'item' => 'mouse'],
    ['id' => 2, 'item' => 'kb'],
];

function compare_id($a, $b) {
    if ($a['id'] == $b['id']) return 0;
    return ($a['id'] < $b['id']) ? -1 : 1;
}

usort($items, 'compare_id');

var_dump($items); 
```

或使用匿名函数

```
usort($items, function ($a, $b) {
    if ($a['id'] == $b['id']) return 0;
    return ($a['id'] < $b['id']) ? -1 : 1;
}); 
```

# internet-explorer - Internet Explorer 9 兼容性问题

> ID：14994076
> 
> 赞同：0
> 
> 时间：2013-02-21T03:29:23.780
> 
> 标签：internet-explorer

我的客户网站 www.sateri.com 在 Internet Explorer 9 兼容性方面存在问题。该网站在 Firefox、Chrome 和 IE8 及以下版本中看起来不错。但在 IE9 中没有。问题是它没有在下拉菜单上显示文本。

然后，我尝试了在 Stack Overflow 以及其他网站上找到的所有方法来解决这个问题。这些是我添加的一些元标记。

> 1.  meta http-equiv="X-UA-Compatible" 内容="IE=7, IE=8, IE=9, IE=10"
> 2.  元 http-equiv="X-UA-Compatible" 内容="IE=Edge"
> 3.  元 http-equiv="X-UA-Compatible" 内容="IE=EmulateIE7; IE=EmulateIE8; IE=EmulateIE9"

我将元标记放在所有其他不是元或标题的元素之前。

我还将 DOCTYPE 更改为： DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" " [http://www.w3.org/TR/html4/loose.dtd](http://www.w3.org/TR/html4/loose.dtd) "

然后，我删除了头部和 DOCTYPE 下方的所有注释

但是，网站还是一样的。下拉菜单仍然没有很好地显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:59:43.450

你有一些小的标记错误......

[http://validator.w3.org/check?uri=http%3A//www.sateri.com/main/en](http://validator.w3.org/check?uri=http%3A//www.sateri.com/main/en)

但我看不到任何主要的东西，除了块中的标签......应该避免......是的utf-8编码......

您可以在 IE 中使用工具>Internet 选项>高级选项卡、可访问性按钮、选中“忽略网页中的字体样式”来测试 cufon...。这将强制 IE 使用其默认 Web 字体而不是 cufon 垫片...来自memory cufon 与 IE9 有一些问题...我认为解决方案是添加 x-ua IE=8 元以强制 IE9 使用 IE8 渲染引擎...然后您可能会失去对某些 html5 功能的支持您拥有在那里。

# progress-4gl - 为每个浏览行设置 add-calc-column() 值？

> ID：14994077
> 
> 赞同：0
> 
> 时间：2013-02-21T03:29:37.517
> 
> 标签：progress-4gl

使用静态浏览，在 ROW-DISPLAY 上，我将计算作为静态浏览列的变量。但是，使用 ADD-CALC-COLUMN() 我如何为浏览中的每一行设置该列值？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T19:57:23.787

计算列不能真正为您计算值。在我看来，这个名字有点误导。您需要使用 ROW-DISPLAY 触发器自己计算值并将它们显示在右列中。您可能还必须刷新浏览才能激活所有“计算”列上的触发器。

# jsf - 如何在运行时在 JSPX 和 Trinidad 项目中包含页面而不破坏 JSF 生命周期？

> ID：14994078
> 
> 赞同：0
> 
> 时间：2013-02-21T03:29:45.373
> 
> 标签：jsf, jakarta-ee, jspx, trinidad

我正在努力想办法在 JSPX 和 Trinidad 项目的运行时中包含动态确定的页面。当您看到我所拥有的时，您会有一个想法，即：

```
<tr:panelAccordion>

<tr:showDetailItem
    text="Test tab">
    <jsp:include page=".test.jspx" /> <!-- This part is working fine -->
</tr:showDetailItem>

<jsp:scriptlet>
    BackingTest backing = (BackingTest) session.getAttribute("backingTest");
    for (CaseTabConfigurationDTO tab : backing.getTabs()) {

        java.io.File f = new java.io.File(request.getRealPath(tab.getPagePath()));
        if (f.exists()) {
            pageContext.include(tab.getPagePath(), true);
        }
    }
</jsp:scriptlet>
</tr:panelAccordion> 
```

jsp:include 部分工作正常，没有什么会破坏 JSF 生命周期。

jsp:scriplet 部分成功包含正确的页面。但是，它破坏了 JSF 生命周期中的后续操作，包括仍然保留使用 useWindow="true" 打开的对话框的支持 bean。

为了使它与 Facelet 相适应，从而不破坏 JSF 生命周期。我尝试使用 tr:forEach, c:forEach, ui:include, ui:repeat 方法，但没有任何实际包含页面的运气。

你能分享一个合适的解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:22:36.800

您可能想要重新配置您的项目，以便可以[将 Facelets 与 Trinidad 一起使用](http://wiki.apache.org/myfaces/Facelets_with_Trinidad)。重新配置您的项目后，可以使用[Facelets](http://docs.oracle.com/javaee/6/tutorial/doc/gijtu.html)进行模板化。你最终会使用`xhtml`而不是`jspx`。

也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)
*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)

# javascript - 如何在 KineticJS 中获取点击事件相对于其层的位置？

> ID：14994079
> 
> 赞同：2
> 
> 时间：2013-02-21T03:30:12.540
> 
> 标签：javascript, html, html5-canvas, kineticjs

我正在用 HTML5 开发一个六角网格策略游戏，由于向 UI 添加更多按钮变得很复杂，我正在使用 KineticJS 重写我的代码来绘制画布。

在我的游戏中，有一个小地图，其中有一个矩形显示玩家相机的位置。当玩家点击小地图时，他的相机中心将被设置为他点击的位置。我的原始代码不使用任何外部库，它看起来像这样：

```
this.on('click', function(event){
    var canvas = document.getElementById('gameCanvas');
    var x = event.pageX - canvas.offsetLeft;
    var y = event.pageY - canvas.offsetTop;
    camera.setPos( // calculate new position based on x and y....);
    }
}) 
```

所以基本上我想要的是点击事件相对于画布的位置。由于现在 KineticJS 控制了画布，并且它不允许我设置画布 id，所以我不能再用它`getElementById`来选择我的画布了。还有另一种方法吗？

可能有某种方法我没有想出可以设置画布 id，但我期待一个更优雅的解决方案，最好是通过 KineticJS API。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:52:44.140

要获取舞台（画布）上的鼠标位置，您可以使用：

```
 var mouseXY = stage.getPointerPosition();
    var canvasX = mouseXY.x;
    var canvasX = mouseXY.y; 
```

您可以通过相同的方式单击形状内的鼠标位置：

```
 myShape.on('click', function() {
    var mouseXY = stage.getPointerPosition();
    var canvasX = mouseXY.x;
    var canvasY = mouseXY.y;
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:41:55.653

好问题，我认为您正在寻找的是 getAbsolutePosition()。以下是根据我的经验了解的有用信息。

获取位置（）

```
node x/y position relative to parent
if your shape is in layer, x/y position relative to layer
if your shape is in group, x/y position relative to group 
```

获取父母（）

```
To know what parent node is 
```

获取X（）

```
x position relative to parent 
```

得到Y（）

```
y position relative to parent 
```

获取绝对位置（）

```
absolute position relative to the top left corner of the stage container div 
```

还有一些有用的东西，

缩放（）

```
if your stage is zoomed in or out, better to know this. 
```

一切都在文档中， http: [//kineticjs.com/docs/symbols/Kinetic.Node.php](http://kineticjs.com/docs/symbols/Kinetic.Node.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-15T14:27:41.800

这是一个老问题，但正如我所见，最佳答案没有考虑轮换。

所以这是我基于 Kinetic v5.1.0 的解决方案。谁考虑到所有的转变。

```
var myStage = new Kinetic.Stage();    
var myShape = new Kinetic.Shape(); // rect / circle or whatever

myShape.on('click', function(){
    var mousePos = myStage.getPointerPosition();
    var p = { x: mousePos.x, y: mousePos.y }; // p is a clone of mousePos
    var r =  myShape.getAbsoluteTransform().copy().invert().point(mousePos);

    // r is local coordinate inside the shape
    // mousePos is global coordinates
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T16:26:08.107

我发现最好的方法是......

```
var bgxy = bg.getAbsolutePosition();
var x = event.pageX - stage.getContainer().offsetLeft - bgxy.x;
var y = event.pageY - stage.getContainer().offsetTop - bgxy.y; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-06T08:54:52.703

你应该使用`event.layerX`and `event.layerY`：

```
this.on('click', function(event){
    var canvas = document.getElementById('gameCanvas');
    var x = event.layerX;
    var y = event.layerY;
    camera.setPos( // calculate new position based on x and y....);
    }
}) 
```

# python - Python & Neo4j Heroku 安装

> ID：14994080
> 
> 赞同：0
> 
> 时间：2013-02-21T03:30:49.000
> 
> 标签：python, heroku, neo4j

我正在 Heroku 上设置 python 安装。我正在按照 Heroku 的说明进行操作。我的问题是在 Python 安装后如何集成或连接 neo4j？我的技能水平是初学者。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:08:02.280

看看这些例子：

neoblog 描述：一个使用 neo4j 数据库的非常简单的博客应用程序。您可以发布帖子并将相似的帖子链接在一起。

[http://gensen.herokuapp.com/show/26](http://gensen.herokuapp.com/show/26)

python、flask、neo4j 演示应用程序描述：此应用程序使用 neo4j 从其公共数据转储中探索 Stack Exchange 数据。该应用程序使用 Python 的 Flask 微框架构建，并使用 py2neo 访问 neo4j 数据。阅读项目 README 或文档 URL 以获取更多信息。

[http://gensen.herokuapp.com/show/25](http://gensen.herokuapp.com/show/25)

有关一般建议，另请参见[http://py2neo.org/](http://py2neo.org/)

# actionscript-3 - 在 AS3 项目的特定位置嵌入 SWF 动画

> ID：14994081
> 
> 赞同：0
> 
> 时间：2013-02-21T03:30:56.200
> 
> 标签：actionscript-3, flash, embed

我在 AS3 中做一个项目（没有外部库或 Flex），当它被破坏时，我需要在瓷砖上嵌入爆炸动画。我有一个小爆炸动画，但我不知道如何让它在特定位置播放。有没有办法做到这一点？我试过像这样嵌入它：

```
[Embed(source="../assets/64x48.swf", mimeType="application/octet-stream")] private var Explosion:Class 
var explosion:MovieClip;
explosion = new Explosion();
explosion.play(); 
```

但这似乎无济于事。如果不是 SWF，我也有一个可以使用的爆炸精灵表，但我不确定如何在不使用外部库的情况下为精灵设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:38:27.810

在您要播放的 swf 影片剪辑中的方法，您必须执行以下操作。swf转换为bytearray后，必须恢复。

## 编辑

我检查了你的 swf 文件。但是，您的 swf 文件内容不是`MovieClip`，而是`AVM1Movie`file. 所以直接嵌入是相当困难的。因为`AVM1Movie`文件转换为`MovieClip`算法。但别担心。使用 ForcibileLoader 很容易获得。

下载一个[ForcibileLoader](http://www.datafilehost.com/download-58b14f2b.html)

原始的 ForcibileLoader[在这里](http://www.libspark.org/svn/as3/ForcibleLoader/src/org/libspark/utils/ForcibleLoader.as)

参考以下代码。我测试了很棒的工作。

```
package
{
    import flash.display.Loader;
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.utils.ByteArray;
    import flash.utils.getTimer;

    import org.libspark.utils.ForcibleLoader;

    public class TestProject2 extends Sprite
    {
        private var loader:Loader = new Loader();
        private var mc:MovieClip;

        public function TestProjec2t()
        {
            var fLoader:ForcibleLoader = new ForcibleLoader(loader);
            fLoader.load(new URLRequest("../asset/64x48.swf"));
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onSwfLoaded);
            this.addChild(loader);
        }

        private function onSwfLoaded(e:Event):void 
        {
            trace(e.currentTarget.content);
            mc = e.currentTarget.content as MovieClip;
            mc.x = Math.random() * stage.stageWidth;
            mc.y = Math.random() * stage.stageHeight;
            mc.gotoAndPlay(1);
        }
    }
} 
```

# java - 在 Java 中解析 Facebook FQL 多查询

> ID：14994082
> 
> 赞同：0
> 
> 时间：2013-02-21T03:30:59.893
> 
> 标签：java, android, json, facebook-graph-api, fql.multiquery

我在解析 Facebook 的 FQL 多查询时遇到了一些麻烦。我不知道我需要如何处理结果中具有相同名称的 JSONArray -> fql_result_set。这是我得到的 FQL JSON。

```
{
"data": [
{
  "name": "query1", 
  "fql_result_set": [
    {
      "uid": uid1, 
      "eid": eid1, 
      "rsvp_status": "attending"
    }, 
    {
      "uid": uid2, 
      "eid": eid2, 
      "rsvp_status": "attending"
    }, 
    {
      "uid": uid3, 
      "eid": eid3, 
      "rsvp_status": "attending"
    }
  ]
}, 
{
  "name": "query2", 
  "fql_result_set": [
    {
      "uid": uid1, 
      "name": "name1", 
      "pic_square": "pic1"
    }, 
    {
      "uid": uid2, 
      "name": "name2", 
      "pic_square": "pic2"
    }, 
    {
      "uid": uid3, 
      "name": "name3", 
      "pic_square": "pic3"
    }
  ]
}
]
} 
```

这是我目前在我的 Java 代码中得到的，但我没有得到任何回报。我得到的数据最终会进入一个 ArrayList。

```
try {
            GraphObject go = response.getGraphObject();
            JSONObject jso = go.getInnerJSONObject();
            JSONArray data = jso.getJSONArray("data");
            for(int i = 0; i < data.length(); i++){
                JSONObject o1 = data.getJSONObject(i);
                JSONArray rs1 = o1.getJSONArray("fql_result_set");
                for(int j = 0; j < rs1.length(); j++){
                    JSONObject rso1 = rs1.getJSONObject(j);
                    String uid = rso1.getString("uid");
                    String eid = rso1.getString("eid");
                    String rsvp = rso1.getString("rsvp_status");
                }
                JSONObject o2 = data.getJSONObject(i);
                JSONArray rs2 = o2.getJSONArray("fql_result_set");
                for(int k = 0; k < rs2.length(); k++){
                    JSONObject rso2 = rs2.getJSONObject(k);
                    String name = rso2.getString("name");
                    String pic = rso2.getString("pic_square");
                }

            }
} catch (JSONException e) {
            e.printStackTrace();
        } 
```

有谁知道我需要如何解析这个 JSON 结果？提前致谢！

**解决方案**

```
try {
            people = new ArrayList<Person>();
            GraphObject go = response.getGraphObject();
            JSONObject jso = go.getInnerJSONObject();
            JSONArray data = jso.getJSONArray("data").getJSONObject(0)
                    .getJSONArray("fql_result_set");
            JSONArray data2 = jso.getJSONArray("data").getJSONObject(1)
                    .getJSONArray("fql_result_set");

            for (int i = 0; i < data.length(); i++) {
                Person p = new Person();
                JSONObject o1 = data.getJSONObject(i);
                uid = o1.getString("uid");
                p.setUserId(uid);
                p.setRsvp_status(o1.getString("rsvp_status"));

                for (int j = 0; j < data2.length(); j++) {
                    JSONObject o2 = data2.getJSONObject(j);
                    if (p.getUserId().equals(o2
                            .getString("uid"))) {
                        p.setName(o2.getString("name"));
                        p.setPic(o2.getString("pic_square"));
                    }
                }
                people.add(p);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:46:15.037

```
// assign the whole result to a JSON Object
JSONObject result = whatever-variable-name

// get 'data' JSONArray
JSONArray array = result.getJSONArray('data')

// loop
for(i = 0; i < array.length(); i++) {
 JSONObject obj = array.getJSONObject(i);
 **
 name = obj.getString('name');
} 
```

** 此时 obj 是`"name": "query1", "fql_result_set": [ { "uid": uid1, "eid": eid1, "rsvp_status": "attending" }, { "uid": uid2, "eid": eid2, "rsvp_status": "attending" }, { "uid": uid3, "eid": eid3, "rsvp_status": "attending" } ]`

并`name`具有值`query1`或`query2`取决于循环计数。您能否使用迄今为止访问`fql_result_set": [ { "uid": uid1, "eid": eid1, "rsvp_status": "attending" }, { "uid": uid2, "eid": eid2, "rsvp_status": "attending" }, { "uid": uid3, "eid": eid3, "rsvp_status": "attending" } ]`GLHF 的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T01:28:10.330

尝试这个：

```
 String strEvents = new JSONArray(apiResponse).getJSONObject(0).toString();
 String strVenues= new JSONArray(apiResponse).getJSONObject(1).toString();
 jsonArray  = new JSONObject(strEvents).getJSONArray("fql_result_set");
 jsonVenues = new JSONObject(strVenues).getJSONArray("fql_result_set"); 
```

# r - 多列数据并获得平均 R 程序

> ID：14994084
> 
> 赞同：0
> 
> 时间：2013-02-21T03:31:30.690
> 
> 标签：r, list, average, mean

我之前问过这样的问题，但我决定简化我的数据格式，因为我是 R 的新手，不明白发生了什么……这是问题的链接[如何处理多组数据R编程？](https://stackoverflow.com/questions/14983347/how-to-handle-more-than-multiple-sets-of-data-in-r-programming)

但是我编辑了我的数据应该是什么样子，并决定将其保留为这样......以这种格式......

```
X1.0   X X2.0 X.1
   0.9 0.9  0.2 1.2
  1.3 1.4  0.8 1.4 
```

如您所见，我有四列数据，我正在处理的真实数据多达 2000 个数据点......列“X1.0”和“X2.0”指的是“时间”......所以我想要的是“X”和“X.1”每 100 秒的平均值，基于我的 2 列时间，即“X1.0”和“X2.0”......我可以使用这个命令来做到这一点

```
cuts <- cut(data$X1.0, breaks=seq(0, max(data$X1.0)+400, 400))
   by(data$X, cuts, mean) 
```

但这只会给我一组数据的平均值......这是“X1.0”和“X”......我将如何做到这一点，以便我可以从多个数据集中获得平均值....我也想停止这种输出

```
cuts: (0,400]
[1] 0.7
------------------------------------------------------------ 
cuts: (400,800]
[1] 0.805 
```

请注意，输出是每 400 秒完成一次......我真的想要一份这些削减的列表，这些削减是不同间隔的平均值......请帮助......我只是用来`data=read.delim("clipboard")`将我的数据输入程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:33:15.740

您想要获得什么输出有点令人困惑。

首先我更改 colnames 但这是可选的

```
colnames(dat) <- c('t1','v1','t2','v2') 
```

然后我将使用`ave`类似`by`但输出更好的方法。我正在使用矩阵的技巧来索引列：

```
matrix(1:ncol(dat),ncol=2)  ## column1 is col1 adn col2...
     [,1] [,2]
[1,]    1    3
[2,]    2    4 
```

然后我将这个矩阵与`apply`. 这里是整个解决方案：

```
cbind(dat,
      apply(matrix(1:ncol(dat),ncol=2),2,
     function(x,by=10){      ## by 10 seconds! you can replace this 
                             ## with 100 or 400 in you real data
     t.col <- dat[,x][,1]   ## txxx
     v.col <- dat[,x][,2]   ## vxxx
     ave(v.col,cut(t.col, 
                   breaks=seq(0, max(t.col),by)),
         FUN=mean)})
  ) 
```

**编辑**更正剪切并简化代码

```
cbind(dat,
     apply(matrix(1:ncol(dat),ncol=2),2,
           function(x,by=10)ave(dat[,x][,1], dat[,x][,1] %/% by)))
   X1.0   X X2.0 X.1       1         2
1   0.9 0.9  0.2 1.2  3.3000  3.991667
2   1.3 1.4  0.8 1.4  3.3000  3.991667
3   2.0 1.7  1.6 1.1  3.3000  3.991667
4   2.6 1.9  2.2 1.6  3.3000  3.991667
5   9.7 1.0  2.8 1.3  3.3000  3.991667
6  10.7 0.8  3.5 1.1 12.8375  3.991667
7  11.6 1.5  4.1 1.8 12.8375  3.991667
8  12.1 1.4  4.7 1.2 12.8375  3.991667
9  12.6 1.8  5.4 1.2 12.8375  3.991667
10 13.2 2.1  6.3 1.3 12.8375  3.991667
11 13.7 1.6  6.9 1.1 12.8375  3.991667
12 14.2 2.2  9.4 1.3 12.8375  3.991667
13 14.6 1.8 10.0 1.5 12.8375 10.000000 
```

# php - 正则表达式匹配开头的两个不是特定长度范围的 URL 段

> ID：14994085
> 
> 赞同：0
> 
> 时间：2013-02-21T03:31:33.853
> 
> 标签：php, regex, parsing, url

我在这种形式的 URL 中使用开头的两个假子目录来表示区域和语言：

```
/gb/en/tours/lesson-observation 
```

当开头的两个假子目录分别为 2-3 和 2-5 个字符时，此正则表达式匹配。（旁注：我不知道为什么我必须在`{1,2}`这里使用而不是`{2,3}`。）

```
/^\/.{1,2}[^\/]\/.{1,4}[^\/]\/(.*)/ 
```

当请求的 URL与模式*不*匹配时`^/2-3chars/2-5chars/`，如何获取整个原始请求的 URL，以便我可以重定向到`/gb/en$1`. （这是需要的，因为该站点的英国地区和英语版本是默认的，如果在请求的 URL 中找不到地区和语言代码，则应使用该版本。）

例子：

```
/page-name
is not matched by the /2-3/2-5 pattern and so should be redirected to:
/gb/en/page-name

/ca/fr/page-name
is matched by the /2-3/2-5 pattern and so should not be redirected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:59:24.117

为了匹配这个：

```
/gb/en/tours/lesson-observation 
```

您可以使用：

```
/[^/]{2,3}/[^/]{2,5}/.* 
```

现在，您需要检测前两个段何时不在这些范围内，因此第一个段高于或低于 2 - 3 个字符：

```
/[^/]?/                   <-- 0 or 1 characters
/[^/]{4,}/                <-- 4 or more characters
/(?:[^/]?|[^/]{4,})/     <-- Combine the above two with an OR (|) 
```

同样，对于第二段：

```
/(?:[^/]?|[^/]{5,})/     <-- 0 or 1 characters, or 5 or more characters 
```

将两者放在一起，您就有了一个正则表达式，用于与我们的第一个正则表达式不匹配的任何内容：

```
/(?:[^/]?|[^/]{4,})/(?:[^/]?|[^/]{5,})/.* 
```

请注意，在所有这些正则表达式中，我都省略了分隔符，但请记住，您不必使用`/`分隔符。您可以使用`#`或`~`任何您想要的字符。好处：如果您不用`/`作分隔符，这允许您`/`在最终的正则表达式中保持未转义：

```
#/(?:[^/]?|[^/]{4,})/(?:[^/]?|[^/]{5,})/.*#   <-- # is the delimiter 
```

**编辑：**由于第二个 URL 段是可选的，我们需要这样的第二段：

```
(?:/(?:[^/]?|[^/]{5,})/)? 
```

将其带回完整的正则表达式，我们得到（带有锚点和分隔符：

```
#^/(?:[^/]?|[^/]{4,})(?:/(?:[^/]?|[^/]{5,})/)?.*$# 
```

# business-catalyst - 在 Business Catalyst 站点的子域上安装 wordpress

> ID：14994088
> 
> 赞同：1
> 
> 时间：2013-02-21T03:32:07.937
> 
> 标签：business-catalyst

我想在业务催化剂站点的子域上安装 wordpress。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:10:23.610

您不能将 Wordpress 安装到提供托管的业务催化剂上，因为它是不允许的。

但是，您可以做的是单独购买主机，然后从 BC 或域 DNS 管理工具将您的子域指向该主机。

这样，您仍然可以拥有 wpsubdomain.domain.com，但是您将拥有 Business Catalyst 托管和另一个托管资源来考虑费用。

[http://kb.worldsecuresystems.com/kb/add-subdomain.html](http://kb.worldsecuresystems.com/kb/add-subdomain.html)

希望这可以帮助。

# jquery - JQuery嵌套列表的孩子切换整个列表

> ID：14994090
> 
> 赞同：2
> 
> 时间：2013-02-21T03:32:23.900
> 
> 标签：jquery, list, nested

我有一个看起来像这样的列表

```
<ul>
   <li class="expandable">Game
     <ul>
        <li>Action</li>
        <li>RPG</li>
     </ul>
   </li>
   <li class="expandable">BBS
     <ul>
       <li class="expandable">Group 1
          <ul>
             <li>Board 1</li>
             <li>Board 2</li>
          </ul>
       </li>
       <li class="expandable">Group 2
          <ul>
             <li>Board 1</li>
          </ul>
       </li>
     </ul>
   </li>
</ul> 
```

以及一些用于折叠列表的 JQuery 代码。

```
$('li.expandable').click(function() {
    $(this).children('ul').toggle();
}); 
```

例如，像“游戏”这样的东西可以正常工作。但是，当我单击 BBS 下的任何嵌套列表（如 Group 1）时，它会导致 Group 1 和 Group 2 折叠到 BBS 中。单击 BBS 将再次展开列表并显示第 1 组已折叠。有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T03:37:01.103

你需要一个`return false`.

发生的事情是因为您的列表在另一个列表中，它触发了每个列表的点击事件。通过添加`return false`，它只会触发第一个。

[http://jsfiddle.net/4yyau/](http://jsfiddle.net/4yyau/)上的示例

# linux - 小猎犬板中的模块插入

> ID：14994092
> 
> 赞同：0
> 
> 时间：2013-02-21T03:32:49.203
> 
> 标签：linux, module, beagleboard

我正在尝试将 .ko 模块插入 beagleboard c3。我使用 arm-linux-gnueabi-gcc 交叉编译了模块。但是在使用 insmod 将模块插入小猎犬板（具有 linux 2.6.28-OMAP1）时，它显示错误

> 无效的模块格式

正常文件运行没有任何问题。（c 程序的可执行文件）。可能是什么问题呢。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:38:42.477

您需要同时构建 uImage 和模块，即。构建 uImage 后，您需要构建模块并一起放在板上。

# c# - 动态更新数据绑定列表框 C# WPF

> ID：14994099
> 
> 赞同：1
> 
> 时间：2013-02-21T03:33:51.440
> 
> 标签：c#, wpf, data-binding, listbox

因此，尽管在网上找到了文章，我仍然无法弄清楚这一点。

我有一个列表框

```
<ListBox HorizontalAlignment="Left" Margin="54,35,0,0" Name="resultsbox" VerticalAlignment="Top" Width="382" Visibility="Collapsed">
    <DataTemplate>
        <StackPanel>
            <TextBlock Text="{Binding nameElement}"/>
        </StackPanel>
    </DataTemplate>
</ListBox> 
```

那是数据绑定到

```
 ObservableCollection<string> results = new ObservableCollection<string>(); 
```

并更新为

```
 private void searchbox_TextChanged(object sender, TextChangedEventArgs e)
    {

    resultsbox.Visibility = Visibility.Visible;

    resultsbox.ItemsSource = results;

    if (results.Count == 0)
    {
        foreach (ele item in eles)
        {
            if (!results.Contains(item.nameElement))
            {
                results.Add(item.nameElement);
            }
        }
    }
    else
    {
        resultsbox.Items.Clear();
    }

    if (searchbox.Text.Equals(""))
    {
        window1.Height = 47;
        resultsbox.Visibility = Visibility.Collapsed;
    }

    if (resultsbox.Items.Count == 0)
    {
        resultsbox.Visibility = Visibility.Collapsed;
        window1.Height = 47;
    }
    else{
        window1.Height = 47 + (22 * resultsbox.Items.Count);
    }
  } 
```

它在那里加载所有数据，但不会更新！

如果我这样做`resultsbox.clear()`，则表示您无法清除绑定的项目。如果您尝试清除源，它什么也不做。如果您尝试将结果框 itemsource 设置为 null 并清除源然后重新绑定它，什么都没有。如果您尝试将列表框绑定到一个空源，它什么也不做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:07:38.337

答案是更改更新中的 foreach 循环

```
 resultsbox.ItemsSource = results;
    if (results.Count == 0)
    {
        foreach (ele item in eles)
        {
            if (!results.Contains(item.nameElement))
            {
                results.Add(item.nameElement);
            }
        }
    } 
```

到

```
results.Clear();
    foreach (ele item in eles)
    {
        if (item.nameElement.ToLower().Contains(searchbox.Text.ToLower()))
        {
            results.Add(item.nameElement);
        }
    }

resultsbox.ItemsSource = results; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T03:49:35.060

您可以尝试使用双向模式绑定来实现您的 IMO 要求，

```
<ListBox HorizontalAlignment="Left" Margin="54,35,0,0" Name="resultsbox" VerticalAlignment="Top" Width="382" Visibility="Collapsed">
<DataTemplate>
    <StackPanel>
        <TextBlock Text="{Binding nameElement, Mode=TwoWay}"/>
    </StackPanel>
</DataTemplate> 
```

# sql - oracle sql空值未选中

> ID：14994100
> 
> 赞同：9
> 
> 时间：2013-02-21T03:33:51.487
> 
> 标签：sql, oracle

在 NAME 表中，第一列为空，但未选择任何行。请帮我理解。

```
SELECT * FROM NAME WHERE FIRST != '1' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T03:35:54.317

与 的任何比较`null`都是错误的 -`=`和`<>`, `>`, `<`, 等等。您也不能`null`在`IN`列表中使用 - 它会被忽略。此外，两个`null`s甚至*不*相等。

要获取空值，您需要明确要求它们，如下所示：

```
SELECT * FROM NAME WHERE FIRST IS NULL OR FIRST != '1' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T03:35:02.413

任何与 NULL 的比较都会返回 NULL，这相当于 FALSE。这是真正的不等于前夕。

如果要包含 NULL 值，请执行以下操作之一：

```
where first <> '1' or first is null 
```

或者

```
where coalesce(first, '<null>') <> '1' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T03:35:12.800

在 Oracle 中，除非您明确要求，否则 null 不被视为合法值：

```
select * from name where (first != '1') or first is null 
```

您还可以使用 NVL（类似于 coalesce）：

```
select * from name where nvl(first,'0') != '1' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T03:41:29.617

这是正确的，因为 NULL 永远无法与其他任何东西进行比较......

您唯一的选择是在命令中包含一个 NULL 检查作为 or

```
SELECT * FROM NAME WHERE FIRST!=1 OR FIRST IS NULL 
```

根据 Oracle 文档，NULL 被定义为一个未知的值或当该值没有意义时。这仅仅是 Oracle 提到不将零值视为 NULL 的原因。这只是一个仅供参考，一个插件。谢谢！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-10T14:39:34.313

NULL 是愚蠢的。时期。

NULL 是邪恶的。

如果 X 为 NULL 而 Y 为 NULL，那么 X 实际上等于 Y，因为它们都是 NULL。

也是不能说的PITA

IF X IN ('a','B','C', null)

因为这种情况发生了。但现在我不得不说

```
IF ( X IN ('a','B','C') or X is NULL ) 
```

如果我忘记括号，这是浪费时间和出错的风险。

更让我恼火的是，NULL 一开始就不应该发生。字段（呃……好吧，孩子们，我称它们为列）应该始终被初始化。时期。停止空值。不允许他们。默认值应始终为零或空白，以便那些懒得在他们的软件中初始化列的人会自动为它们初始化它们。

在许多情况下，未能定义零和空白的默认值会使生活变得更加困难。

# ios - 在 NSOperationQueue 中添加操作

> ID：14994106
> 
> 赞同：0
> 
> 时间：2013-02-21T03:35:21.263
> 
> 标签：ios, afnetworking, nsoperationqueue

我开始使用 iOS 中的 NSOperationQueue 并面临一些我想澄清的基本问题。

这是我正在使用的代码：

```
-(void) SendRequestWithURL:(NSString*) URL andParam:(id) attributes {

    [[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount];
    _m_singleton = [Singleton sharedSingleton];
    _parser = [[Syncparser alloc]init];
    NSString *strServURL  = [NSString stringWithFormat:@"%@%@",_m_singleton.globalstrURLLink,URL];
    if (_theService == Item0 || _theService == Item1 || _theService == Item2){
        NSLog(@"Entrance _theService  %i", _theService);

    AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:strServURL]];
    [client postPath:@"POST" parameters:attributes
             success:^(AFHTTPRequestOperation *operation, id responseObject) {
                 NSLog(@"_theService  %i", _theService);
                 switch (_theService) {
                     case Item0: {
                         [_m_singleton.globalQueue addOperationWithBlock:^{
                             NSLog(@"ParseItem0  %@", [operation responseString]);
                             [_parser ParseItem0:[operation responseString]];
                         }];
                     }
                         break;
                     case Item1:{
                         [_m_singleton.globalQueue addOperationWithBlock:^{
                             NSLog(@"ParseItem1  %@", [operation responseString]);
                             [_parser ParseItem1:[operation responseString]];
                         }];
                     }
                         break;
                     case Item2:{
                         [_m_singleton.globalQueue addOperationWithBlock:^{
                             NSLog(@"ParseItem2  %@", [operation responseString]);
                             [_parser ParseItem2:[operation responseString]];
                         }];
                     }
                         break;
                     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    }
} 
```

我只调用了 item1 和 item2。这些是我在调试器中得到的值。

```
Entrance _theService  1
Entrance _theService  2
_theService  2
_theService  1 
```

这显然意味着 item2 首先被添加到队列中，然后是 item1。

但令人惊讶的是，ParseItem1 每次都在 ParseItem2 之前被调用。即使 _theService 1 出现在 _theService 2 之前。不知道为什么。对不起菜鸟问题。

需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:13:44.233

> 这显然意味着 item2 首先被添加到队列中，然后是 item1。

这个假设是错误的。AFNetworking 使用的 NSOperationQueue 不保证操作将按照您添加它们的顺序开始或完成。面对面，在AFHTTPClient的init方法中，可以看到：

```
self.operationQueue = [[NSOperationQueue alloc] init];
[self.operationQueue setMaxConcurrentOperationCount:NSOperationQueueDefaultMaxConcurrentOperationCount]; 
```

因此，您的队列肯定会同时执行操作。

我不能说为什么这个反向调用总是在你的测试中发生，但我认为第二个调用要么更快地返回，要么更快地解析，或者两者兼而有之。

无论如何，如果您需要这两个操作才能成功返回解析，您可以使用`enqueueBatchOfHTTPRequestOperations:progressBlock:completionBlock:`完成块，直到它们全部完成。或者您可以将一个操作设置为依赖于另一个操作（因为它是 NSOperation 子类。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:27:40.923

您是否尝试过更改要添加的 NSOperation 的优先级？以下是 NSOperation 优先级属性的可能值： - NSOperationQueuePriorityVeryLow - NSOperationQueuePriorityLow - NSOperationQueuePriorityNormal - NSOperationQueuePriorityHigh - NSOperationQueuePriorityVeryHigh

如果您希望一次处理一个操作，您可能还希望将 maxConcurrentOperationCount 属性设置为 1。

另一个是您可以将 _theService1 的 NSOperation 的依赖属性设置为 _theService2 值，以便 _theService2 在执行之前必须等待 _theService1 完成。

# ruby-on-rails - 为什么 has_and_belongs_to_many 生成的方法不是双向的？

> ID：14994113
> 
> 赞同：0
> 
> 时间：2013-02-21T03:36:01.837
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我有...

**应用程序/模型/report.rb：**

```
has_and_belongs_to :standards 
```

**应用程序/模型/标准.rb：**

```
has_and_belongs_to :reports 
```

**分贝/schema.rb：**

```
create_table "reports_standards", :id => false, :force => true do |t|
  t.integer "report_id"
  t.integer "standard_id"
end 
```

当我登录到 Rails 控制台时，最初似乎一切正常......

```
> @report = Report.create :name => "foo"
 => #<Report id: 2, name: "foo", created_at: "2013-02-21 03:10:06", updated_at: "2013-02-21 03:10:06"> 
> @standard = @report.standards.build :name => "bar"
 => #<Standard id: nil, name: "bar", created_at: nil, updated_at: nil> 
> @report.standards
 => [#<Standard id: nil, name: "bar", created_at: nil, updated_at: nil>] 
```

......但后来变得奇怪......

```
> @standard.reports
 => [] 
```

是不是应该这样：

```
> @standard.reports
 => [#<Report id: 2, name: "foo", created_at: "2013-02-21 03:10:06", updated_at: "2013-02-21 03:10:06">] 
```

为什么不是？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:49:19.460

您正在运行`@report.standards.build :name => "bar"`它只构建记录而不是在数据库中创建它。如果您将构建更改为创建，您应该能够看到关联。

# python - 对嵌套列表进行排序

> ID：14994115
> 
> 赞同：1
> 
> 时间：2013-02-21T03:36:13.693
> 
> 标签：python, list, nested

我有一个描述层次结构的列表，如下所示：

`[obj1, obj2, [child1, child2, [gchild1, gchild2]] onemoreobject]`

其中，child1（和其他）是 obj2 的孩子，而 gchild1 和 2 是孩子 2 的孩子。

每个对象都有属性`date`，例如，我想根据这些属性对它们进行排序。在常规列表中，我会这样：

`sorted(obj_list, key=attrgetter('date'))`

在这种情况下，尽管如此，该方法将不起作用，因为列表没有`date`属性......即使它有，如果它的属性与其父级不同，那么层次顺序就会被破坏。在 python 中是否有一种简单而优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:29:50.587

我认为您只需将密钥放入 sort(key=None) 函数中即可。我用字符串测试了它，它似乎工作。我不确定 onemoreobject 的结构。这是从 obj1 和 obj2 开始排序的。我认为 onemoreobject 可能代表一个新的层次结构，所以我将每个层次结构都包含在一个列表中，以将类似的对象放在一起。

```
def embededsort(alist):
  islist = False
  temp = []
  for index, obj in enumerate(alist):
    if isinstance(obj,list):
      islist = True
      embededsort(obj)
      temp.append((index,obj))
  if islist:
    for lists in reversed(temp):
      del alist[lists[0]]
    alist.sort(key=None)
    for lists in temp:
      alist.append(lists[1])
  else:
    alist.sort(key=None)
  return alist

>>>l=[['obj2', 'obj1', ['child2', 'child1', ['gchild2', 'gchild1']]], ['obj22', 'obj21', ['child22', 'child21', ['gchild22', 'gchild21']]]]  
>>>print(embededsort(l))
[['obj1', 'obj2', ['child1', 'child2', ['gchild1', 'gchild2']]], ['obj21', 'obj22', ['child21', 'child22', ['gchild21', 'gchild22']]]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:56:05.853

感谢您的回答，因为他们给了我很多想法，以及可以学习的新东西。最终的代码，看起来像这样。不像我想象的那么简洁和优雅，但有效：

```
def sort_by_date(element_list):
    last_item = None
    sorted_list = []
    for item in element_list:
        #if item is a list recurse and store it right below last item (parent)
        if type(item) == list:
            if last_comparisson:
                if last_comparisson == 'greater':
                    sorted_list.append(sort_by_date(item))
                else:
                    sorted_list.insert(1, sort_by_date(item))
        #if not a list check if it is greater or smaller then last comparisson
        else:
            if last_item == None or item.date > last_item:
                last_comparisson = 'greater'
                sorted_list.append(item)
            else:
                last_comparisson = 'smaller'
                sorted_list.insert(0, item)
            last_item = item.date
    return(sorted_list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:31:50.510

这是使用 Python 提供的多态性的 QuickSort 算法的实现。它应该适用于整数、浮点数、列表、嵌套列表、元组甚至字典

```
def qsort(list):
    if not list: return []
    first   = list[0]
    lesser  = filter( lambda x: x <  first, list[1:] )
    greater = filter( lambda x: x >= first, list[1:] )
    return qsort(lesser) + [first] + qsort(greater) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T03:49:13.087

如果要对节点的所有子节点进行排序而不考虑那些不是兄弟节点的节点，请使用树结构：

```
class Tree:
    def __init__ (self, payload):
        self.payload = payload
        self.__children = []

    def __iadd__ (self, child):
        self.__children.append (child)
        return self

    def sort (self, attr):
        self.__children = sorted (self.__children, key = lambda x: getattr (x.payload, attr) )
        for child in self.__children: child.sort (attr)

    def __repr__ (self):
        return '{}: {}'.format (self.payload, self.__children) 
```

# google-drive-api - 将文件移动到 Google Drive 文件夹而不更改其 ACL

> ID：14994116
> 
> 赞同：0
> 
> 时间：2013-02-21T03:36:14.957
> 
> 标签：google-drive-api

在 Google Drive 中，将文件放入文件夹时，文件夹的 ACL 会添加到文件的 ACL 中。

有没有办法避免这种情况？在我的用例中，很多用户对文件夹具有“可以查看”访问权限，但最终只有一部分用户可以查看该文件。即使我们快速跟进 ACL 更新请求，在短时间内文件的可见性对于我的用例来说过于宽泛。

请注意，解决方案涉及在短时间内访问受到更多限制，最终将是可以接受的。另外，我准备好使用 Drive API 或 Document List API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T08:50:22.890

[这](http://gappstips.com/docs-tips/view/112/dont-forget-the-advanced-editor-sharing-settings)可能会有所帮助

当我找到它时，我很高兴！不幸的是，对于包含文件夹创建者以外的其他人拥有的文档，它仍然无法覆盖文件设置。

# c# - WebMatrix.WebData.WebSecurity - 如何仅通过 PasswordResetToken 获取用户名

> ID：14994118
> 
> 赞同：6
> 
> 时间：2013-02-21T03:36:54.770
> 
> 标签：c#, asp.net-mvc, membership-provider

我只是想寻求帮助以使我的场景工作？我想使用 PasswordResetToken 获取用户名。

这是我的场景。

1.  我的网站中有一个忘记密码功能，它会向用户发送密码重置令牌电子邮件更改密码。
2.  我只想发送密码重置令牌字符串。
3.  当用户点击链接时。我将只查询 request["token"] 以获取用户名，然后允许用户更改密码和自动登录。

    这是我下面的代码：

    ```
    public ActionResult ChangePassword()
    {
        ChangePasswordModel model = new ChangePasswordModel();
        string token=string.Empty;
        try
        {
            token = Request["token"].ToString();
            int userId = WebSecurity.GetUserIdFromPasswordResetToken(token);

            if (userId > 0)
            {
               //Get the user object by (userid) 
               //???????????????????
               //???????????????????
            }
            else
            {
                throw new Exception("The change password token has expired. Please go to login page and click forgot password again.");
            }
        }
        catch
        {
            model.HasError = true;
            ModelState.AddModelError("", "The change password token has expired. Please go to login page and click forgot password again.");
        }

        return View(model);
    } 
    ```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T03:44:02.937

看文末的备注：[WebSecurity.GeneratePasswordResetToken Method](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.generatepasswordresettoken%28v=vs.111%29.aspx)。

为了您的方便，我将复制相关部分：

> 如果用户忘记了密码，他们可以申请新密码。要提供新密码，请执行以下操作：
> 
> 1.  创建一个密码重置页面，其中包含用户可以输入其电子邮件地址的字段。
> 2.  当用户在密码重置页面输入他或她的电子邮件地址时，验证该电子邮件地址是否代表有效用户。如果是，请通过调用 GeneratePasswordResetToken(String, Int32) 方法生成密码重置令牌。
> 3.  创建一个指向您站点中的确认页面的超链接，并将令牌作为查询字符串参数包含在链接的 URL 中。
> 4.  通过电子邮件将链接发送给用户。当用户收到电子邮件消息时，他或她可以单击该链接来调用确认页面。
> 5.  创建一个从 URL 参数中提取令牌并允许用户输入新密码的确认页面。
> 6.  **当用户提交新密码时，调用 ResetPassword(String, String) 方法并传递密码重置令牌和新密码。**如果令牌有效，密码将被重置。如果令牌无效（例如，它已过期），则显示错误消息。

突出显示是我的。基本上你不需要用户名。该框架为您完成所有繁重的工作。

针对您的评论，我不建议自动登录用户。他们手动登录以检查此密码更改的东西是否确实有效，而不是发现它不仅在下次出现，这是一个很好的做法。

无论如何，你可以这样做：

```
SimpleMembershipProvider provider = (SimpleMembershipProvider)Membership.Provider;
string username = provider.GetUserNameFromId(userId); 
```

参考：[GetUserNameFromId](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.getusernamefromid%28v=vs.111%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T17:39:03.927

我认为该`WebSecurity.GetUserIdFromPasswordResetToken(string token)`方法可以满足您的要求。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.getuseridfrompasswordresettoken%28v=vs.111%29.aspx)。

**更新**：

抱歉，但我没有看到您已经在使用该方法...因此，如果您想获取用户名并且您正在使用 Entity Framework 的代码优先迁移，则可以使用以下 LINQ 表达式获取用户名：

```
string username = yourDbContext.UserProfiles.FirstOrDefault(up=>up.UserId == userId).Username; 
```

# .htaccess - 如何在 htaccess 中重写 index.php?main_page=xxx？

> ID：14994122
> 
> 赞同：2
> 
> 时间：2013-02-21T03:37:18.183
> 
> 标签：.htaccess, mod-rewrite

如何在 htaccess 中重写 index.php?main_page=xxx？

```
RewriteEngine On
RewriteRule ...

/* ------- for example ------- */
www.laji.com/xxx      =>  www.laji.com/index.php?main_page=xxx
www.laji.com/xxx/     =>  www.laji.com/index.php?main_page=xxx 
```

xxx 可以是 [a-zA-Z\d] 和 "-" ，不能是 "xx.php"
我不擅长 htaccess。有人帮忙吗？
非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:58:44.750

在**www.laji.com**的文档根目录下的 htaccess 文件中，添加：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Z0-9-]+)/?$ /index.php?main_page=$1 [L,NC] 
```

# asp.net-mvc - Asp.net mvc4和Entity框架，显示两个相关表的Name而不是显示Id

> ID：14994126
> 
> 赞同：1
> 
> 时间：2013-02-21T03:37:22.523
> 
> 标签：asp.net-mvc, entity-framework-4

我有两个表，**Book**和**Category**。

```
------------- --------------
| 书 | | 类别 |
------------- --------------
|标识 | | 身份证 |
|类别 ID | | 类别名称|
|标题 | ---------------
|说明|
------------

```

我使用实体框架从数据库中获取数据并返回视图，如下所示：

**控制器**

```
using (var db = new BookEntities()){
     return View(db.Book.ToList())
} 
```

我可以在书表中显示所有数据，但我不知道如何显示类别名称而不是显示 CategoryId。

我是 Asp.net mvc4 和实体框架的新手。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:33:29.033

首先创建一个视图模型

```
public class BookViewModel
{
    public int id;
    public int Title;
    public int Description;
    public Category Category;
}

public class Category
{
    public int CategoryId;
    public string CategoryName;
} 
```

在你的 linq 查询中试试这个；

```
public List<BookViewModel> GetList()
{
    var books = db.Book
               .select(b=> new BookViewModel()
               {
                   id = b.id,
                   Title = b.Title,
                   Description = b.Description,
                   Category = b.Category
               });
       return books.ToList<BookViewModel>();
} 
```

现在，在您看来，就在页面顶部；

```
@model IEnumerable<BookViewModel> 
```

然后你可以像访问它；

```
@foreach(var item in Model)
{
   <h1>@item.Category.CategoryName</h1>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:00:29.990

在 Book 的模型定义中，您可以定义一个表示相关 Category 记录的对象，如下所示：

```
public virtual Category Category{ get; set; } 
```

确保将 CategoryId 配置为 FK。然后，您可以使用 CategoryName`Book.Category.CategoryName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:04:15.973

您是否先从数据库表开始，然后让 EF 创建您的模型？如果是这样，则两个表之间的数据库中不能存在外键关系。

否则，这应该与您的观点一样完美：

```
@using NamespaceOfBookModel
@model IList<Book>
@foreach (var book in Model)
{
    @book.Title
    @book.Category.CategoryName
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T06:36:00.207

视图（.cshtml）

```
<tr>
<td>@TradingHR.Repository.Repo.GetTeamMemberName(item.IdMember)</td>
</tr> 
```

--在回购

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Web;

namespace TradingHR.Repository
{
public class Repo {

public static string GetTeamMemberName(long idMemeber)
            {
                DBEntities db = new DBEntities();
                var value = (from c in db.Mi_TeamMember
                             where c.Id == idMemeber
                             select c.Name.FirstOrDefault();
                return value;
            }
}
} 
```

# ios - 如何在 Xcode 中打开 .srt 文件？

> ID：14994127
> 
> 赞同：1
> 
> 时间：2013-02-21T03:37:27.187
> 
> 标签：ios, objective-c, subtitle, srt

我有一个播放视频和`.srt`字幕的APP。

问题是我不知道如何打开`.srt`字幕文件。

我试过了：

```
NSString *content=[NSString stringWithContentsOfFile:filePath encoding:NSUTF16StringEncoding error:nil]; 
```

在这种情况下，字符串变成了混乱的代码。

我试过了：

```
NSString *content=[NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 
```

现在，字符串结果为空。

我也尝试过 read as `NSData`from file 首先，然后 make `NSString`from `NSData`，但它不起作用。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:50:39.467

字幕文件的文本编码`.srt`没有很好的定义。如果将文本解码为 UTF-8 失败，请尝试使用 ISO 8859-1 ( `NSISOLatin1StringEncoding`) 作为后备。

# jsf - 使用 jquery 重新加载 jsf 数据表

> ID：14994129
> 
> 赞同：0
> 
> 时间：2013-02-21T03:37:45.830
> 
> 标签：jsf, primefaces

我的数据表

```
<h:form>
   <h:dataTable value="#{testController.items}" var="item" border="0">
       <h:column>
           <h:outputText value="#{item.name}"/>
       </h:column>           
   </h:dataTable>
</h:form> 
```

我正在使用模态来保存我的表单，模态包含此命令按钮

```
<p:commandButton styleclass="btn btn-primary" action="#{testController.create}" oncomplete="handleComplete(xhr, status, args)" /> 
```

处理完成功能：

```
function handleComplete(xhr, status, args) {  
    if(args.validationFailed) {  
        alert("failed");
    }else{
        $('#test-modal').modal('hide');

          // Do something here to reload the datatable to add the newly created item

    }
} 
```

我正在使用 jsf 2，我还导入了 primefaces

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:59:12.207

您可以使用它[`<p:remoteCommand>`](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)来生成调用 JSF 命令操作的 JavaScript 函数。

```
<h:form>
   <h:dataTable id="table" value="#{testController.items}" var="item" border="0">
       <h:column>
           <h:outputText value="#{item.name}"/>
       </h:column>           
   </h:dataTable>
   <p:remoteCommand name="updateTable" action="#{testController.update}" update="table" />
</h:form> 
```

可以按如下方式调用：

```
function handleComplete(xhr, status, args) {  
    if (args.validationFailed) {  
        alert("failed");
    } else {
        $('#test-modal').modal('hide');
        updateTable();
    }
} 
```

# php - 在 Postgres-DB 中存储/读取文件

> ID：14994130
> 
> 赞同：1
> 
> 时间：2013-02-21T03:37:47.327
> 
> 标签：php, postgresql

我正在尝试将文件保存在数据库中，但无法检索它。结果不是有效文件。

隔离部分代码，我认为这应该可行：

```
$content = pg_escape_bytea (file_get_contents($tmp)); //image.jpg   
header('Content-type: ' . $mime); // image/jpg
echo pg_unescape_bytea($content); exit; 
```

`$content`已存储，但我无法再次读取！

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:51:00.123

一个可能的解释是您处于此配置中：

*   PHP 端使用一个`8.4`或更旧的`libpq`库
*   服务器是`9.0`或更新
*   bytea_output配置参数保留为默认值[(](http://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-BYTEA-OUTPU)`hex` )

在这种情况下，`pg_unescape_bytea`将无法正确解码来自数据库的文本格式的 bytea 内容。作为一种解决方法，您可以添加到 php 代码中：

```
pg_query("SET bytea_output=escape"); 
```

在选择 bytea 内容之前，看看是否有区别。如果它确实解决了问题，您可以通过发出以下命令使其成为数据库的持久设置：

```
ALTER DATABASE mydb SET bytea_output=escape; 
```

直到升级`libpq`到新版本。

# ruby-on-rails - Rails AJAX 搜索表单重新加载页面

> ID：14994131
> 
> 赞同：0
> 
> 时间：2013-02-21T03:37:50.977
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

AJAX 和搜索的新手。我觉得我离这个还有一英寸，但我不确定要解决什么问题。另外，我的控制器现在对我来说真的很老套。

无论如何，我正在尝试创建一个搜索，允许用户使用 AJAX 在我的页面上搜索博客文章。以下是（相关部分）部分：

**post_controller.rb**

```
def show
  @posts = Post.all.reverse
  @post = Post.find(params[:id])
  @link_num = 10

  respond_to do |format|
    format.html # show.html.erb
    format.json { redirect_to @post }
  end
end

def search
  @link_num = 10
  @posts = Post.all.reverse
  @post = Post.find(params[:id])

  #The including function returns the search results
  @search = Post.first.including(params[:term])
  render 'show'
end 
```

让我觉得“hacky”的地方是我重复了所有的变量赋值（还有一些我没有展示，因为它们不相关）。理想情况下，AJAX 调用是否不应该重新定义/重新加载所有这些变量？此外，我必须通过隐藏字段将 :id 传递给我的搜索操作。这对我来说感觉很奇怪/错误。

**显示.html.erb**

```
<h1 class="squeeze">Recent Posts</h1>
  <%= form_tag("/search", method: "get", class: "search") do %>
        <%= text_field_tag(:term, '', placeholder: "Search posts:") %>
        <%= hidden_field_tag(:id, @post.id) %>
        <%= submit_tag("Search", class: "btn search_button", remote: true) %>
    <% end %>
  <% if !@search%>
    <ul>
        <% @posts.first(@link_num).each do |p| %>
            <li><a href=<%= p.id %> ><%= p.name %> <span class="manual_small">(<%= p.created_at.strftime("%b %d, %Y") %>)</span></a></li>
        <% end %>
        <% if @posts.length > @link_num %>
            <div class="link_disclaimer">
            <h4>---</h4>
            <h5><%= "Only showing #{@link_num} most recent posts." %></h5>
            <h5>Search to narrow results.</h5>
        </div>
        <% end %>
    </ul>
  <% elsif @search.empty? %>
    <h3>Term not found!</h3>
  <% else %>
    <ul>
        <% @search.first(@link_num).each do |p| %>
            <li><a href=<%= p.id %> ><%= p.name %> <span class="manual_small">(<%= p.created_at.strftime("%b %d, %Y") %>)</span></a></li>
        <% end %>
        <% if @search.length > @link_num %>
            <div class="link_disclaimer">
                <h4>---</h4>
                <h5><%= "Only showing first #{@link_num} relevant hits." %></h5>
                <h5>Narrow search for more specific results.</h5>
            </div>
        <% end %>
    </ul>
  <% end %> 
```

**路线.rb**

```
match '/search', to: 'posts#search' 
```

目前，搜索本身运行良好，存在三个主要问题：

1.  我的控制器的上述混乱。
2.  整个页面重新加载的事实。这不与 AJAX 应该做的相反吗？我怎样才能让它重新加载链接列表？
3.  网址。它超级混乱（即“/search?utf8=✓&term=limits&id=11&commit=Search”）。理想情况下，我希望它不受搜索影响，但如果这不可能，也许只是像“/search？=”这样的东西。那是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:16:58.150

根据这里的评论是使功能工作的基本逻辑（抱歉没有真正的代码，因为这太耗时了）

1.  在控制器中，您创建一个方法说“搜索”。该方法需要一个参数，该参数是要搜索的短语。它从 db 获取结果并仅使用结果响应 JSON。

2.  在模板中，您有一个搜索表单。

3.  在 JS 中，你监听用户点击提交按钮的事件，捕捉他们写的字符，并将其处理给 ajax 函数。

4.  编写 Ajax 代码，首选使用 jQuery 的 ajax()。基本上使用 ajax() 将键入的字符作为参数发送到 #1 中的控制器方法。然后 ajax() 将从服务器获取响应（搜索结果）。

5.  更新 DOM 中的结果。您可以添加一个新的 div 来显示搜索结果，或者替换当前的主要内容 div 来显示结果。

# r - 为什么 read.delim 无法跳过 R 中的空白行

> ID：14994135
> 
> 赞同：2
> 
> 时间：2013-02-21T03:38:45.860
> 
> 标签：r, skip

我有一个`|`包含以下内容的输入文件（分隔）。

```
name|val1|val2
foo|30|20
bar||20
qux|30|
ert|12|11
uyt|| 
```

我想要做的是仅在每个字段都包含值时才提取行。产生这个：

```
foo|30|20
ert|12|11 
```

为什么以下不起作用：

```
data<-read.delim("myinput.txt",sep="|",na.strings="",
                  header=TRUE,blank.lines.skip=TRUE,fill=FALSE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:44:42.833

如果文件不是太大而不能一开始读入内存，您可以通过以下方式轻松解决此问题：

```
data <- data[complete.cases(data), ] 
```

此外，您没有任何*空白*行，您只有一些单元格缺少值的行，这并不完全相同，并且它并没有真正被`blank.lines.skip`参数覆盖。

# php - 正则表达式匹配超出预期

> ID：14994137
> 
> 赞同：0
> 
> 时间：2013-02-21T03:38:54.063
> 
> 标签：php, regex

我有一大块 HTML。

有了这个：

```
~<div>(?:.*?)<a[\s]+[^>]*?href[\s]?=[\s"\']+(#_ftnref([0-9]+))["\']+.*?>(?:[^<]+|.*?)?</a>(.*?)</div>~si 
```

我正在捕捉这个：

```
<div> </div><hr align="left" size="1" width="33%" /><div><p><a title="" href="#_ftnref1">[1]</a> This is not to suggest that there are only two possible arguments to be made in support of  blah blah <em>blah</em>.</p></div> 
```

但！我要这个：

```
<div><p><a title="" href="#_ftnref1">[1]</a> This is not to suggest that there are only two possible arguments to be made in support of  blah blah <em>blah</em>.</p></div> 
```

你能帮我吗？

PS： `(?: )`与 相比`( )`，用于避免捕获文本。我是故意这样做的，因为我希望返回的 $matches 数组对于本文中未提及的几个不同的正则表达式保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:49:33.853

如果惰性匹配`.*?`不起作用，则需要提出一些排除模式。

```
(?:(?!</div>).)* 
```

例如，仅匹配一个`div`并在包含任何内容后停止/跳过`</div>`

或者，长度约束可能是一种解决方法：

```
(?:.{0,20}) 
```

# arrays - 你如何在matlab中使数组中的每个其他整数都等于0？

> ID：14994140
> 
> 赞同：4
> 
> 时间：2013-02-21T03:39:15.350
> 
> 标签：arrays, matlab

假设我有一个数组

```
Y = [1, 2, 3, 4, 5, 6] 
```

我想创建一个新数组，用 0 替换所有其他数字，所以它创建

```
y = [1, 0, 3, 0, 5, 0] 
```

我将如何以有效的方式解决这个问题并为此编写代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T03:41:39.950

这应该这样做：

```
Y(2:2:end) = 0; 
```

使用这条线，您基本上可以说从秒到最后的每个元素，以两步为单位，应该为零。这也可以在更大的步骤中完成：`Y(N:N:end) = 0`使每个`N`th 元素都等于 0。

# sql - 在 Oracle SQL 表中存储 IP 地址

> ID：14994142
> 
> 赞同：1
> 
> 时间：2013-02-21T03:39:30.693
> 
> 标签：sql, database, oracle, ip-address

我创建了一个表来存储 IP 地址。

`CREATE TABLE ipdetails( ip_address DECIMAL(16,4) NOT NULL, vlan_id varchar(50) );`

但是当我尝试插入表格时，它给了我一个错误：

```
INSERT INTO ipdetails VALUES (192.169.165.128, 'Sample1') 
```

无论如何我可以在 SQL 表中存储一个带有很多小数位的数字，如果是这样，我应该使用什么数据类型？请指教。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:44:20.587

你有几个选择：

*   将其存储为 VARCHAR。IP 地址实际上并不是一个您可能会对其进行数学运算的数字，那么为什么要以数字格式存储它呢？
*   将其以十六进制形式存储为单个数字。虽然您不能真正以十进制执行此操作，但在十六进制中，IP 是一个 8 位数字。
*   将其存储为（最多）四个单独的字段。可能没有必要，但对于某些应用程序（您可能希望主要只关注 IP 的一部分），这可能很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T03:49:13.983

您可以将 IP 存储为数字，这就是它们在内部存在的方式，但您必须编写代码来来回转换：

```
#include <arpa/inet.h>
/* 
 * Returns a pointer to an internal array containing the string, which is overwritten with each call to the function.
 * You need to copy the string if you want to keep the value returned.
 */
extern char *inet_ntoa (struct in_addr in);

/* 
 * Convert Internet host address from numbers-and-dots notation in CP
 * into binary data and store the result in the structure inp.
 */
extern int inet_aton (const char *cp, struct in_addr *inp); 
```

这是一些简单的 SQL，它使用 127.0.0.1 执行其中一个执行 ip->decimal 的操作

```
SELECT
TO_NUMBER(REGEXP_SUBSTR('127.0.0.1','\w+',1,1))*POWER(2,24)
+ TO_NUMBER(REGEXP_SUBSTR('127.0.0.1','\w+',1,2))*POWER(2,16)
+ TO_NUMBER(REGEXP_SUBSTR('127.0.0.1','\w+',1,3))*POWER(2,8)
+ TO_NUMBER(REGEXP_SUBSTR('127.0.0.1','\w+',1,4))*POWER(2,0) IP
FROM
DUAL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T03:44:35.247

尝试将值存储为字符串并使用引号：

```
CREATE TABLE ipdetails( ip_address varchar(15) NOT NULL, vlan_id varchar(50) ); 
```

进而 。. .

```
INSERT INTO ipdetails VALUES ('192.169.698.365', 'Sample1') 
```

您可能希望将每个组件存储在单独的字段中。

# c# - 使用两个绑定时“无法下载元数据”

> ID：14994144
> 
> 赞同：0
> 
> 时间：2013-02-21T03:39:35.680
> 
> 标签：c#, wcf, web-config, metadata, wcf-binding

在我的书中，它希望我使用两个绑定公开两个端点：WsHttpBinding 和 NetTCPBinding，并将服务托管在主机应用程序中。

我在 C# 中使用以下代码尝试连接到我的服务：

```
Uri BaseAddress = new Uri("http://localhost:5640/SService.svc");

Host = new ServiceHost(typeof(SServiceClient), BaseAddress);
ServiceMetadataBehavior Behaviour = new ServiceMetadataBehavior();
Behaviour.HttpGetEnabled = true;
Behaviour.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
Host.Description.Behaviors.Add(Behaviour);
Host.Open(); 
```

在服务方面，我有：

```
[ServiceContract]
public interface IService...

public class SService : IService.... 
```

然后在我的配置文件中我有：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>

    <behaviors>
      <serviceBehaviors>
        <behavior name="Behavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>
      <service behaviorConfiguration="WsHttpBehaviour" name="SService.SService">

        <endpoint
          address=""
          binding="wsHttpBinding"
          bindingConfiguration="WsHttpBindingConfig"
          contract="SService.IService" />

        <endpoint
          address=""
          binding="netTcpBinding"
          bindingConfiguration="NetTCPBindingConfig"
          contract="SService.IService" />

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:5640/SService.svc" />
            <add baseAddress="net.tcp://localhost:5641/SService.svc" />
          </baseAddresses>
        </host>

      </service>
    </services>

  </system.serviceModel>
</configuration> 
```

但是当我尝试向我的主机应用程序添加服务引用时，它说无法从该地址下载元数据。我不明白出了什么问题，老师从来没有教过这个。我决定继续往下看，提前学习。我使用编辑器创建了上面显示的 WebConfig。

谁能指出我正确的方向？我通过编辑器添加了元数据行为，并将 HttpGetEnabled 设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:28:30.193

我可以找到一些可能导致此问题的代码问题：

`Host = new ServiceHost(typeof(SServiceClient), BaseAddress)`. 通过这里`typeof(SService.SService)`而不是`typeof(SServiceClient)`. 像这样改变：

```
Host = new ServiceHost(typeof(SService.SService)) 
```

`<service behaviorConfiguration="WsHttpBehaviour"`. 我想这应该是您定义的“行为”。由于您在配置中启用了元数据，您可以删除将 ServiceMetadataBehavior 添加到服务主机的代码行。

这是一个示例，您可以参考：

```
<system.serviceModel>
    <services>
      <service name="ConsoleApplication1.Service">
        <endpoint address="" binding="wsHttpBinding" contract="ConsoleApplication1.IService" />
        <endpoint address="" binding="netTcpBinding" contract="ConsoleApplication1.IService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://<machinename>:5640/SService.svc" />
            <add baseAddress="net.tcp://<machinename>:5641/SService.svc" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            ServiceHost host = new ServiceHost(typeof(Service));
            host.Open();

            Console.ReadLine();
        }
    }

    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        string DoWork();
    }

    public class Service : IService
    {
        public string DoWork()
        {
            return "Hello world";
        }
    }
} 
```

元数据将在配置中定义的 http 基地址自动可用。

# c# - 更改数据网格中行的背景颜色

> ID：14994148
> 
> 赞同：0
> 
> 时间：2013-02-21T03:40:07.230
> 
> 标签：c#, javascript, asp.net, datagrid

我有一个数据网格，它在行中有一个复选框。单击复选框时，我想更改行的背景颜色。示例代码：

```
 <asp:DataGrid ID="Grid" runat="server"  DataKeyField="KeyID" CssClass="grid"
                        AutoGenerateColumns="False" CellPadding="10" ForeColor="#333333" 
                            GridLines="None" OnPageIndexChanged="Grid_PageIndexChanged" 
                        OnEditCommand="Grid_EditCommand" OnDeleteCommand="GetResult" 
                            onitemdatabound="Grid_ItemDataBound" >
                        <Columns>

                            <HeaderTemplate>
                                    <input id="chkAllItems" type="checkbox" onclick="javascript:HeaderClick(this);"/>
                            </HeaderTemplate>
                            <ItemTemplate>
                                    <asp:CheckBox runat="server" Text='<%#DataBinder.Eval(Container.DataItem, "KeyID")%>' ID="checkBoxID" AutoPostBack="false" OnClick="chechkedChanged(this);" ></asp:CheckBox>
                            </ItemTemplate>
                        </asp:TemplateColumn>
                        <asp:TemplateColumn>
                             <HeaderTemplate>
                                     <label for="male">Category</label>
                            </HeaderTemplate>
                            <ItemTemplate>
                                    <asp:TextBox Text="" ID="Category" runat="server" AutoPostBack="false" MaxLength="10" CssClass="tb5" > </asp:TextBox>
                            </ItemTemplate>
                        </asp:TemplateColumn>
                        <asp:EditCommandColumn  EditText="Edit" CancelText="Cancel" UpdateText="Update" HeaderText="Edit">
                        </asp:EditCommandColumn>
                        <asp:ButtonColumn CommandName="Delete" HeaderText="TDK" Text="tdk"></asp:ButtonColumn>

                        </Columns>
                        <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                        <SelectedItemStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
                        <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" Mode="NumericPages" />
                        <AlternatingItemStyle BackColor="#FAAC58" />
                        <ItemStyle BackColor="#81DAF5" ForeColor="#333333" />
                        <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                </asp:DataGrid> 
```

如何在 javascript 中更改行的背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:58:36.593

我的简单 GridView 控件包含 Checkbox、Dept No、Dept Name、Location 列。

单击 CheckBox 时，相应的行背景颜色变为红色背景。.aspx 页面中的 Javascript 代码在实现您的功能方面发挥着重要作用。

.aspx 代码如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function ChangeBackgroundColor(checkBox1) {
            var parent = document.getElementById("<%= GridView1.ClientID %>");
            var items = parent.getElementsByTagName("input");
            for (i = 0; i < items.length; i++) {
                if ((items[i].type == "checkbox") && (items[i].checked)) {
                    alert(items[i].id + ' is checked');
                    items[i].parentElement.parentElement.style.backgroundColor = "Red";
                }
            }
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            onrowdatabound="GridView1_RowDataBound">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="CheckBox1" onclick="javascript:ChangeBackgroundColor(this);" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Dept No">
                    <ItemTemplate>
                        <asp:Label ID="Label2" runat="server" Text='<%# Bind("DeptNo") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Dept name">
                    <ItemTemplate>
                        <asp:Label ID="Label3" runat="server" Text='<%# Bind("DName") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Location">
                    <ItemTemplate>
                        <asp:Label ID="Label4" runat="server" Text='<%# Bind("LOC") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </div>
    </form>
</body>
</html> 
```

下面给出了代码背后的代码。

```
SqlConnection objConn = new SqlConnection(System.Web.Configuration.WebConfigurationManager.ConnectionStrings["STERIAConnectionString"].ConnectionString);
protected void Page_Load(object sender, EventArgs e)
{
    var objCmd = new SqlCommand("SELECT * FROM DEPT", objConn);
    objConn.Open();
    GridView1.DataSource = objCmd.ExecuteReader();
    GridView1.DataBind();
    objConn.Close();
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var checkbox1 = e.Row.FindControl("CheckBox1") as CheckBox;
        checkbox1.Attributes.Add("OnClick","return ChangeBackgroundColor('checkbox1');");
    }
} 
```

希望这段代码对您有所帮助。如果您需要更多帮助，请告诉我。

# sql - 给定一个套利，试图获取一周的第一天和最后一天的日期。日期

> ID：14994149
> 
> 赞同：0
> 
> 时间：2013-02-21T03:41:15.793
> 
> 标签：sql, database, oracle, relational-database

我正在寻找解决以下问题的方法：

显示周（例如：1-52）、该周的开始和结束日期以及某事的计数。

一周，被认为是这样的：to_Char(, 'WW')

但我不知道如何获得那几周的第一个和最后一个日期。

我如何用 SqlPlus 做到这一点？

编辑：

给定：包含一列日期的表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:23:58.830

尝试这样的事情：

```
SELECT to_char(date_col, 'iw') w, trunc(date_col, 'd') st, trunc(date_col, 'd')+6 et
FROM your_table 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/7601)

参考：

*   [TRUNC（日期）](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions201.htm)

*   [ROUND 和 TRUNC 日期函数](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions230.htm#i1002084)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:50:17.190

对于一周的第一个日期，请尝试`next_day(dateColumn-8, 'Monday')`

对于一周的最后一天，请尝试`next_day(dateColumn-1, 'Sunday')`

# random - 使用命名空间来处理阴影标识符

> ID：14994153
> 
> 赞同：3
> 
> 时间：2013-02-21T03:42:03.487
> 
> 标签：random, namespaces, scheme, racket

我正在使用 Racket（家庭作业）开发一个简单的游戏。要求指示我创建一个名为 random 的计算机播放器，它使用默认的随机数生成器。这段代码说明了我的问题：

```
(define (random)
  (random (10))) ; should be random number call 
```

我习惯了命名空间的 C 约定：

```
标准::字符串
```

球拍是否提供类似的东西？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T03:48:42.363

您可以使用[`prefix-in`](http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket/private/base..rkt%29._prefix-in%29%29)一些命名空间前缀来为标准库的导出添加前缀。例如：

```
#lang racket
(require (prefix-in std:: racket))
(define (* x)
  (std::* x x)) 
```

表明我们可以从 中隐藏绑定`#lang racket`，但仍然可以通过前缀标识符获取它们。

传统上，人们使用的前缀要简单一些，例如：

```
#lang racket
(require (prefix-in r: racket))
(define (* x)
  (r:* x x)) 
```

# php - 使用 RewriteRule 时，mail() 发送电子邮件两次

> ID：14994155
> 
> 赞同：3
> 
> 时间：2013-02-21T03:42:11.823
> 
> 标签：php

这让我感到困惑，如果它不是特定于脚本的，那么托管我的应用程序的 Amazon AMI 有问题。

我正在发布我的 .htaccess 和索引文件的确切内容。唯一的区别是我要发送的电子邮件。

这是我的 .htaccess 文件

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  Options +SymLinksIfOwnerMatch
  RewriteEngine On
  RewriteBase /
</IfModule>

Options -MultiViews

<IfModule mod_autoindex.c>
  Options -Indexes
</IfModule>

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

这是我的 index.php

```
<?php

mail('me@email.com', '', '7'); 
```

当我加载我的索引页面时，我会收到 2 封使用当前设置的电子邮件。但是，如果我注释掉 RewriteRule 并加载索引页面，我会正确收到一封发送给我的电子邮件。

有没有人遇到过这个？

编辑： access_log 用 RewriteRule 显示这个

```
[21/Feb/2013:03:48:27 +0000] "GET / HTTP/1.1" 200 - "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17"
[21/Feb/2013:03:48:27 +0000] "GET /favicon.ico HTTP/1.1" 200 - "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17" 
```

access_log 在没有 RewriteRule 的情况下显示了这一点

```
[21/Feb/2013:03:47:58 +0000] "GET / HTTP/1.1" 200 - "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17"
[21/Feb/2013:03:47:58 +0000] "GET /favicon.ico HTTP/1.1" 404 295 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:55:11.637

问题是您将对不存在的文件的每个请求路由到`index.php`. 加载页面时，浏览器会自动向[http://yourdomain.com/favicon.ico发出请求。](http://yourdomain.com/favicon.ico)由于您的网站上尚不存在此文件，`index.php`因此再次受到打击。您可以通过签`$_SERVER['SCRIPT_FILENAME']`入`index.php`并仅在应该是页面时才生成邮件来避免这种情况（与图像文件等相反）。

例如：

```
if (!preg_match('/\.(ico|jpg|png|gif|txt)$/i', $_SERVER['SCRIPT_FILENAME']))
    mail('me@email.com', '', '7'); 
```

这会检查`ico`、`jpg`、`png`和文件。`gif``txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:14:26.657

问题在于 RewriteRule 不正确

这是导致重复电子邮件的原因

```
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

解决方法是像这样在规则中添加“/”

```
RewriteRule ^/(.*)$ index.php/$1 [L,QSA] 
```

我的假设是原始`RewriteRule`文件没有正确捕获`GET`请求。正如**N Rohler**指出的那样，`favicon.ico`正在请求，但请求是作为`"/favicon.ico"`

原版没有捕捉到的`RewriteRule`

# c++ - 调用 COM 接口它返回 E_ACCESSDENIED

> ID：14994158
> 
> 赞同：1
> 
> 时间：2013-02-21T03:42:37.027
> 
> 标签：c++, com

我正在使用在 session-1 下运行的 com-client 来调用在 session-0 下运行的 COM-Server 中提供的 COM 接口。它以 E_ACCESSDENIED 失败。但是 CoCreateInstance 返回正常。

客户使用的是64位Windows Server 2008 R2操作系统，不知道他们修改了哪些安全配置。我正在使用内置管理员帐户并禁用 UAC，但问题仍然存在。

有没有人有一些信息？

谢谢！

# arrays - 重复的数组采样会产生重复。为什么？（红宝石）

> ID：14994159
> 
> 赞同：1
> 
> 时间：2013-02-21T03:42:43.537
> 
> 标签：arrays, duplicates, shuffle, sample

在红宝石中：

我从数组中采样元素。我每 30 个左右的样本都会看到重复的（相同的元素）。有时相隔 5-6 个样本。为什么？

这是我的代码：

```
some_array = IO.readlines("file with 5000 unique elements")

some_array.shuffle!

@random_element = some_array.sample

puts @random_element 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-04T16:49:16.360

如果您想要数组中的 n 个随机非重复元素，您应该调用`some_array.sample(n)`.

Sample 不保证两个连续调用不会包含重复；它保证在一次调用中选择的所有元素都不会。

# solr - Solr DisMax 查询等效项

> ID：14994163
> 
> 赞同：1
> 
> 时间：2013-02-21T03:43:21.393
> 
> 标签：solr, dismax

我正在尝试在 SOLR 3.5.0 中设置提升处理程序，我需要以下等效于 dismax 格式的查询，它根据匹配类型在同一字段上定义不同的提升值（精确匹配获得 200，而通配符匹配获得 100） .

q=name:(foo*^100.0 或 foo^200.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:05:11.973

This is one way to solve this problem.

Keep a text field with only WhiteSpaceTokenizer (and maybe LowerCaseFilter depending on your case-sensitivity needs). Use this field for the exact match. Let's call this field `name_ws`.

Instead of using a wild-card query on `name_ws`, use a text-type [copy field](https://wiki.apache.org/solr/SchemaXml#Copy_Fields) with [EdgeNGramTokenizer](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory) in your analyzer chain, which will output tokens like:

`food -> f, fo, foo, food`

Let's call this field `name_edge`.

Then you can issue this dismax query:

`q=foo&defType=dismax&qf=name_ws^200+name_edge^100`

(Add `debugQuery=on` to verify if the scoring works the way you want.)

# ruby-on-rails - 用 Rails 理解敏捷 Web 开发中的魔法代码（第 4 版）

> ID：14994164
> 
> 赞同：0
> 
> 时间：2013-02-21T03:43:48.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我不明白“line_items_controller.rb”中的**第 5 行**：我注意到 Rails 3.1 的代码没有这样的行，而在 Rails 3.2 的代码中有这样的行。从 Java 世界来看，很难说这里使用了什么样的魔法 ruby​​ :( 我一直在理解 Rails 文档。

例如 button_to 有签名**button_to(name, options = {}, html_options = {})**

但是在代码中，您可以添加参数，例如

```
<%= button_to 'Empty cart', @cart, :method => :delete, :confirm => 'Are you sure?' %> 
```

我想@cart 不应该在那里......

```
def create
    @cart = current_cart #this is a function method
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)
    @line_item.product = product

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart }
        format.json { render json: @line_item,
          status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors,
          status: :unprocessable_entity }
      end
    end
end 
```

此处项目的完整源代码： [https ://github.com/ilovejs/depot_i/blob/master/app/controllers/line_items_controller.rb](https://github.com/ilovejs/depot_i/blob/master/app/controllers/line_items_controller.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:08:06.320

似乎`@cart.add_product(product.id)`如果要向 中添加产品`@cart`，并且`@line_item.product = product`似乎也在做同样的事情

没有看到模型的代码很难说`Cart`，但是我认为

删除`@line_item.product = product`线也应该没有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:14:44.280

替换：

```
@line_item = @cart.add_product(product.id)
@line_item.product = product 
```

和

```
@cart.add_product(product.id) 
```

然后

```
@line_item 
```

下面的引用可能应该是@cart。

# android - 安卓 - 使用 apktool 编辑后运行 APK 文件得到错误：[INSTALL_PARSE_FAILED_NO_CERTIFICATES]

> ID：14994166
> 
> 赞同：11
> 
> 时间：2013-02-21T03:43:57.163
> 
> 标签：android, compiler-construction, apk, adb, decode

我有一个 APK 文件名：Splash.apk。首先我使用 apktool 对其进行解码

```
apk d Splash.apk 
```

然后我编辑清单，XML。最后我将项目导出为 APK 文件名：EditedSpash.apk。

```
apk b Splash 
```

当我在模拟器上运行 EditedSpash.apk 时。我有错误。你给我解释一下吗？

```
adb install EditedSplash.apk

Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES] 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T04:06:21.853

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T04:06:15.740

请指定您如何生成apk文件，因为生成apk文件我们需要使用certifiate生成它可能是调试证书或发布证书，如果生成的apk没有它们中的任何一个将通过错误生成apk使用eclipse它将使用调试证书自动生成 apk 文件。

# c++ - 什么是 C++ 中的硬编码，如何解决这个问题？

> ID：14994167
> 
> 赞同：0
> 
> 时间：2013-02-21T03:44:02.107
> 
> 标签：c++, hard-coding

好的，所以我在我的程序上被标记为硬编码，但不确定我做错了什么，这是我的程序的一部分，它是“硬编码”的

```
cout << "Tax $" << (meal_price * guests) * TAX << endl;
cout << "Tip $" << (meal_price * guests + meal_price * guests * TAX) * TIP << endl;
cout << "Total $" << (meal_price * guests) + (meal_price * guests * TAX) + (meal_price * guests + meal_price * guests * TAX) * (TIP); 
```

上述语句中的硬编码是如何定义的？它怎么可能是非硬编码的？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:56:54.587

我在该部分中没有看到任何“硬编码”，但如果这是您的讲师特别指出的部分，那么他们可能意味着他们想要类似的东西：

```
double total_price = meal_price * guests;
double total_tax = total_price * TAX;
double total_tip = total_price + total_tax * TIP;
double total = total_price  + total_tax  + total_tip;

std::cout << "Tax $" << total_tax  << std::endl;
std::cout << "Tip $" << total_tip  << std::endl;
std::cout << "Total $" << total  << std::endl; 
```

因为您的输出线过于杂乱，并且大多数（如果不是全部）计算应该在输出线之外完成。

你应该在第一次有机会时就去问你的教练，因为他们会确切地知道他们的意思以及如何解决它。

我注意到`TAX`并且`TIP`都是大写的，这是否意味着您曾经`#define`设置它们？
如果是这样，那可能是你的教练给你打分的地方。

# algorithm - 给定一个有N个定义点的圆和一个在圆外的点M，在N的集合中找到离M最近的点。O(LogN)

> ID：14994179
> 
> 赞同：5
> 
> 时间：2013-02-21T03:45:09.093
> 
> 标签：algorithm, geometry

[http://www.glassdoor.com/Interview/Google-Interview-RVW2382108.htm](http://www.glassdoor.com/Interview/Google-Interview-RVW2382108.htm)

我试图找到解决这个问题的方法。但我没有成功..任何人都可以给我一个关于如何处理这个问题的提示。

我将每人取 2 对两分。也就是说，我会制作2个和弦。找出它们的垂直平分线。使用这些平分线，我会找出圆的中心......

此外，我将提出圆的方程。并找到点 M 与圆的交点......那应该是最近的点。但是，该点可能存在也可能不存在于 N 个点的集合中

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:14:40.757

假设圆的圆周上的点是“有序的”（即按围绕圆中心的角度排序），您可以使用基于角度的二分搜索，这应该可以实现`O(log(n))`边界。

1.  计算`A`点`M`到圆心的角度 - `O(1)`。
2.  使用二分查找`I`在圆周上找到最大角度小于`A`-的点`O(log(n))`。
3.  由于圆是凸的，因此最接近的点`M`是`I`或`I+1`。计算两者的距离并取最小值 - `O(1)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:34:12.613

为了找到最接近 M 的点，我们需要基于平面切割对点进行二元消除。需要对输入点进行一点预处理，之后我们可以在 O(lgn) 时间内找到最接近任何给定点 M 的点。

1.  以 (r,θ) 格式计算（如果未给出）点的极坐标表示，其中 r 是与中心的距离，θ 是在 (-180,180] 范围内与 x 轴的角度。
2.  将所有 N 个点按与 x 轴的角度递增的顺序排序。

请注意，最接近 M 的点的简单二进制搜索在这里不起作用，例如，

*   如果给定点的排序使得 θ = (-130,-100,-90,-23,-15,0,2,14,170)，那么对于 θ = -170 的点 M，二分搜索将给出 -130 （40 度外）作为最近点，而 170（20 度外）是距离 M 最近的点。
*   如果我们在排序时忽略符号（认为它会产生正确的输出），我们的新排序数组将看起来像 θ = (0,2,14,15,23,90,100,130,170)，对点 M 进行二分搜索，θ = - 6 将产生结果应该是 2 或 14 而在这种情况下 0 是最接近 M 的点。

要使用平面切割执行搜索操作，

*   求通过圆心并垂直于连接圆心与点 M 的直线的平面切割线。
*   根据平面 M 所在的一半，消除圆形平面的一半 [90+θ,-90+θ) 或 [-90+θ,90+θ)。
*   使平面切割平行于第一个切割并通过前一个平面中间的点，并消除距离 M 较远的一半平面中的所有点，直到平面的近半部分没有任何点，在这种情况下消除飞机的近一半。
*   继续切割平面，直到我们只剩下一点。该点是离 M 最近的点。整个操作需要 O(lgn) 步。

![平面消除](../Images/35c632fa7301b8b64f8c464ef7318789.png)

如果数据是倾斜的并且没有均匀地分布在圆圈中，我们可以优化我们的平面切割，使每个切割都通过搜索操作中留下的那些点的中值（基于角度）。

# android - 尝试访问 Android 位置数据的问题

> ID：14994182
> 
> 赞同：0
> 
> 时间：2013-02-21T03:45:21.070
> 
> 标签：android, gps, location

所以我想为我的手机做一个简单的 Lat Long。我正在使用我自己的固件级别 2.3.6 的手机进行测试。

这是主要代码：

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.util.Log;

public class MainActivity extends FragmentActivity {
    private LocationManager locationManager = null;
    private LocationListener locationListener = null;

    // private LocationListener onLocationChange=null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        locationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);
        locationListener = new MyLocationListener();

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, locationListener);
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
        System.out.println("I got here");

    }

    public class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location loc) {
            /*
             * System.out.println("This happened"); String message =
             * "Longitude:" + loc.getLongitude() + "  Latitude: " +
             * loc.getLongitude(); Toast.makeText( getBaseContext(),
             * "Location changed: Lat: " + loc.getLatitude() + " Lng: " +
             * loc.getLongitude(), Toast.LENGTH_SHORT).show();
             */
            System.out.println("IN ON LO

CATION CHANGE, lat="
                    + loc.getLatitude() + ", lon=" + loc.getLongitude());
        }

        @Override
        public void onProviderDisabled(String arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            // TODO Auto-generated method stub

        }

    }

} 
```

这是清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cloud.pushpin"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.cloud.pushpin.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyArmkmqy3i-wNsVH0f8RH15OsaR4lv4Sp8" />
    </application>

    <permission
        android:name="com.cloud.pushpin.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.cloud.pushpin.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

所以基本上我看到的是当我启动应用程序时没有任何反应。当我摇晃手机时，我收到了很多次“我到了”的消息，但从来没有显示经纬度。我不明白为什么没有发生回调。其他权限供我稍后实现 google maps api 时使用。手机和移动数据都启用了 GPS。

# javascript - 在 iframe 中嵌入 Flashplayer

> ID：14994184
> 
> 赞同：2
> 
> 时间：2013-02-21T03:45:21.953
> 
> 标签：javascript, html, flash

如何使用**自定义 URL**将 Flash 播放器嵌入网页。使用 iframe 执行此操作，而不是在 html 中使用对象标记。我需要使用 javascript 来实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:28:57.403

我不明白为什么不能简单地使用 src 属性，例如：

```
<iframe width="100px" height="100px" src="youSwfFile.swf"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:24:52.260

一个选项是使用 jQueryTools flashembed()，这允许您将 flash 对象嵌入到 div 中......这对您来说可能是一个很好的起点。

```
$(document).ready(function() {
    //jquery call to embed flash object,
    flashembed("#frameID", {src: "the-SWF-URL",wmode:"opaque"});
    //set width and height - ffox fix
    $('#frameID').css({'width':'564px','height':'160px','z-index':'-1'});
}); 
```

有关更多信息和选项 - [http://jquerytools.org/documentation/toolbox/flashembed.html](http://jquerytools.org/documentation/toolbox/flashembed.html)

# xml - 如何在 Internet Explorer 中的 xslt 文件中将 document-uri 显示为 html 文档中的文本？

> ID：14994190
> 
> 赞同：2
> 
> 时间：2013-02-21T03:46:19.200
> 
> 标签：xml, internet-explorer, xslt, internet-explorer-9, xslt-2.0

我有以下两个文件。当我尝试在 Internet Explorer 9 中查看 xml 文档时，它不会使用 xslt 文件进行翻译。

我的xml文件

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="xsl.xslt"?>
<foo>
  <bar>baz</bar>
</foo> 
```

我的 xslt 文件

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
                xmlns:fn="http://www.w3.org/2005/xpath-functions"
>
    <xsl:output method="html"/>
  <xsl:template match="/">
    <html>
      <head>
        <title>
          <xsl:value-of select="/foo/bar"/>
        </title>
      </head>
      <body>

        <!-- It works if i remove the following xsl:value-of tag -->

        <xsl:value-of select="document-uri()"/>
        <div style="color: #ff0000;">
          <xsl:value-of select="/foo/bar/text()"/>
        </div>
        <div style="color: #ff0000;">RED</div>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

当我删除`<xsl:value-of select="document-uri()"/>`标签时，xml 被正确翻译。我尝试了以下 document-uri 的用法：

*   文档-uri()
*   文档-uri('/')
*   文档-uri('/foo')
*   文档 uri('foo')
*   fn:文档-uri()
*   fn:document-uri('/')
*   fn:document-uri('/foo')
*   fn:ocument-uri('foo')

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:54:13.870

**`document-uri()`是 XPath 2.0 函数——不是 XPath 1.0 函数。**

Internat Explorer 在内部使用 MSXML，它是一个仅限 XSLT 1.0 的处理器，不了解 XPath 2.0。

因此，你运气不好。

仅供参考——目前，5 个主要浏览器中没有一个实现 XSLT 2.0。

如果您想在浏览器中使用 XSLT 2.0，您可以使用**[Saxon CE](http://www.saxonica.com/ce/index.xml)**来实现。

**最近，Michael Kay 宣布 Saxon CE 的下一个版本将是完全开源的——现在可以使用了**。

# c# - OnPaint 油漆问题

> ID：14994193
> 
> 赞同：0
> 
> 时间：2013-02-21T03:46:36.397
> 
> 标签：c#, .net, winforms, checkbox, custom-controls

我创建了一个自定义`checkBox`来增加`checkbox`. 我已经覆盖了`OnPaint method`下面给出的。当我使控件透明时，背景变为白色，而不是透明。可能是什么问题？

```
 protected override void OnPaint(PaintEventArgs pevent)
    {        
        base.OnPaint(pevent);        
        int h = this.Height;

        if (BackColor == Color.Transparent)
        {
            pevent.Graphics.Clear(this.Parent.BackColor);            
        }
        else
        {
            pevent.Graphics.Clear(BackColor);
        }
        Rectangle rc = new Rectangle(new Point(0, 0), new Size(h, h));
        ControlPaint.DrawCheckBox(pevent.Graphics, rc,
            this.Checked ? ButtonState.Checked : ButtonState.Normal);

        SizeF stringMeasure = pevent.Graphics.MeasureString(Text, Font);

        int topOffset = (int)(ClientRectangle.Height - stringMeasure.Height) / 2;

        pevent.Graphics.DrawString(Text, Font, new SolidBrush(ForeColor), this.Height, topOffset);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:18:25.407

我不确定您是从给定类 CheckBox 派生复选框还是从 Control 派生它。如果您从控件派生，则应在构造函数中添加以下行：

```
public CustomChecBox()
        : base()
    {
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
    } 
```

请注意，还有一个名为 OnPaintBackground(...) 的函数可以覆盖，但您不需要这样做。在您的 OnPaint() 函数中，您应该替换

```
if (BackColor == Color.Transparent)
    {
        pevent.Graphics.Clear(this.Parent.BackColor);            
    }
    else
    {
        pevent.Graphics.Clear(BackColor);
    } 
```

和

```
pevent.Graphics.Clear(BackColor); 
```

或者

```
pevent.Graphics.FillRectangle(new SolidBrush(this.BackColor), this.ClientRectangle); 
```

但这就是 OnPaintBackground(...) 中发生的事情。如果将 BackColor 设置为透明并在构造函数中添加了 SetStyle-Methid，那么您的控件应该是真正透明的。我希望这有帮助。

# php - 在 foreach 之外获取 DOMDocument 数据

> ID：14994198
> 
> 赞同：0
> 
> 时间：2013-02-21T03:47:11.337
> 
> 标签：php, xpath, domdocument

我在这里有一个小问题，到目前为止，还没有多少搜索能够解决。我正在制作一个使用 cURL 从诊断工具中提取数据的脚本。我可以解释更多关于它是如何工作的，但问题只是语法问题，不知道我需要什么。这是我的代码：

```
 $dom = new domdocument;
    $dom->loadHTML($curlhtml);
    $finder = new DomXPath($dom);
    $headname="msg_head";
    $statname="msg_sub_head";
    $headnodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $headname ')]");     
    foreach ($headnodes as $head) 
    {
        $header = $head->nodeValue;
        $headarray[] = $head->nodeValue;

        $statnodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $statname ')]");

        ${$header}[] = $statnodes->nodevalue;
    } 
```

我的目标是将“statnodes”查询中的所有结果加载到单独的数组中，以“headnodes”查询中的所有结果命名。

$head->nodeValue 正是我想要的，因为它应该是因为 $head 在 foreach 循环中声明的。但是， $statnodes->nodeValue 没有。我知道它*不应该那样*工作，但我不知道我可以通过哪种方式来实现这一点。

如有任何反馈，我将不胜感激，我很乐意根据需要提供回复和编辑以进行任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:54:38.357

`DOMXPath::query`返回 a[`DOMNodeList`](http://www.php.net/manual/en/class.domnodelist.php)所以你也可以通过[`DOMNodelist::item`](http://www.php.net/manual/en/domnodelist.item.php). 假设您只在查询结果中的第一个值之后，`${$header}[] = $statnodes->item(0)->nodevalue;`如果您想要所有值，您可以执行或循环遍历它。

```
foreach ($statnodes as $stat) 
{
   ${$header}[] = $stat->nodevalue;
} 
```

# asp.net - ASP.NET 如何在许多用户同时修改它们的情况下管理服务器端变量？

> ID：14994201
> 
> 赞同：1
> 
> 时间：2013-02-21T03:47:53.953
> 
> 标签：asp.net, vb.net, web, client-server

我想知道的是，当超过 1 个用户使用在 ASP.NET 上开发的网站应用程序并修改它的变量时会发生什么，例如：

UserA 将一些数据设置为服务器端变量：

```
var = 5 
```

然后，另一台 PC 上的 UserB 登录并将其他一些数据设置为相同的服务器端变量：

```
var = 7 
```

然后 UserA 运行一个需要 var 变量中的值的进程，说它要打印该值，程序会打印什么？5个还是7个？

我知道客户端变量只对相关用户有意义，但我不知道服务器端变量会发生什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:28:05.890

看看[Asp.net 应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)。

对于来自用户的每个请求，都会创建所请求页面的对象。
每个请求都有自己的此类内部变量的副本，因此其他用户将无法看到它们。

请注意，此类变量仅针对请求存在。如果页面上有按钮并且用户回来了，这些按钮将在[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)中再次设置重置为其原始值。

如果您希望变量为每个用户保持其状态，则应将它们保存在[`Session`](http://msdn.microsoft.com/en-in/library/system.web.ui.page.session.aspx)or[`ViewState`](http://msdn.microsoft.com/en-in/library/ms972976.aspx)中。

保存在集合中的变量`Session`跨页面维护，而保留在集合中的变量`ViewState`直到您在同一页面上。这两个系列都有其优点和缺点。您必须很好地理解它们才能决定哪个是存储变量的正确位置。

# ios - 从文件路径加载视频

> ID：14994202
> 
> 赞同：1
> 
> 时间：2013-02-21T03:47:54.470
> 
> 标签：ios, objective-c

我正在尝试从文件系统项目中的路径加载视频，我有 URL 流的代码

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"US_Very_High_Dive_Boudia_US_44_x264" ofType:@"mp4"];
NSData *data = [[NSData alloc] initWithContentsOfFile:path];

MPMoviePlayerController *player =
[[MPMoviePlayerController alloc] initWithContentURL: myURL]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:53:40.083

你没有。`MPMoviePlayer`最清楚何时加载数据。将文件路径转换为 ​​a `NSURL`，甚至更好，只需使用

```
NSURL *myURL =`[[NSBundle mainBundle] URLForResource:@"US_Very_High_Dive_Boudia_US_44_x264" withExtension:@"mp4"];`
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: myURL]; 
```

# ios - 无法在 iphone 上运行错误具有相同的架构 (armv7) 并且不能在同一个胖输出文件中

> ID：14994203
> 
> 赞同：3
> 
> 时间：2013-02-21T03:47:58.287
> 
> 标签：ios, compilation, archive

我尝试在我的 iPhone 上运行该应用程序，但最终失败了。
我目前拥有的唯一设备上安装了 iOS6。架构设置是“armv7”。
尝试运行该应用程序时会显示以下内容：

```
CreateUniversalBinary
/Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Products/Debug-iphoneos/TestiPadCal.app/TestiPadCal
normal "armv6 armv7 armv7"
    cd /Users/tongfei20/Desktop/TestiPadCal
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    lipo -create /Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Intermediates/TestiPadCal.build/Debug-iphoneos/TestiPadCal.build/Objects-normal/armv7/TestiPadCal
/Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Intermediates/TestiPadCal.build/Debug-iphoneos/TestiPadCal.build/Objects-normal/armv7/TestiPadCal
-output /Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Products/Debug-iphoneos/TestiPadCal.app/TestiPadCal

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo:
/Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Intermediates/TestiPadCal.build/Debug-iphoneos/TestiPadCal.build/Objects-normal/armv7/TestiPadCal
and
/Users/tongfei20/Library/Developer/Xcode/DerivedData/TestiPadCal-eywphcxyudcjxhcvayjcldqtcetq/Build/Intermediates/TestiPadCal.build/Debug-iphoneos/TestiPadCal.build/Objects-normal/armv7/TestiPadCal
have the same architectures (armv7) and can't be in the same fat
output fileCommand
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo
failed with exit code 1 
```

但是当我没有添加'armv6 armv7'时。它可以被存档！这太奇怪了。任何人都会感激不尽！</p>

# java - Java 关键事件

> ID：14994205
> 
> 赞同：1
> 
> 时间：2013-02-21T03:48:28.253
> 
> 标签：java, swing, awt, keylistener, keyevent

我在弄清楚如何在按键被按下时得到正确通知时遇到了问题。`keyPressed`在处理多个键时，似乎不会再次为按下的第一个键调用该方法。

**示例：**如果我按下右箭头键并按住它，它会被重复调用（继续打印测试）。但是，如果我按右箭头键，然后按一次空格键，同时按住右箭头键，只要松开空格键，`keyPressed()`似乎就不会调用该方法。（没有打印）。

这就是我的代码的样子：

```
public void keyPressed(KeyEvent e) {

    System.out.println("test");

    switch (e.getKeyCode()) {

        case KeyEvent.VK_LEFT:
            guy.moveLeft();
            break;

        case KeyEvent.VK_RIGHT:
            guy.moveRight();
            break;

        case KeyEvent.VK_SPACE:
            guy.jump();
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:57:08.127

欢迎来到键盘焦点的美妙世界。

假设您已将 a 附加`KeyListener`到组件...

为了让任何组件接收按键事件，它必须是可聚焦的并且具有键盘焦点。当您想将它用于游戏之类的东西时，这使得它非常不稳定。

相反，您应该利用[键绑定 API](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。除了使编写关键操作更容易之外，它还允许您指定应在哪些焦点条件下触发各个事件。

# c++ - 从 .txt 读入

> ID：14994207
> 
> 赞同：0
> 
> 时间：2013-02-21T03:48:32.847
> 
> 标签：c++, heap-memory, abort

我有一个带有名称和等级的 .txt 文件，例如“emiltytaco 56”。在姓氏之后，有 3 个空行不应该插入到我的 trie 和堆中。但是，当遇到空行时，代码会被中止并转储。这是插入功能

```
while(myfile.good())
{
    getline(myfile, line);
    name = line.substr(0,line.find("\t"));
    stringstream convert((line.substr(line.find("\t")+1)));
    convert >> grade;  
    if(name.at(0) > 96 && name.at(0) < 123)
    {
        insert(name, grade);
        cout << name << "   " << grade << endl;
    }
}
myfile.close(); 
```

.close 是否应该是带有 if 的“else”语句的一部分？我的一个朋友有这个确切的东西，但他并没有流产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:43:36.017

首先，将循环更改为：

```
while (getline(myfile, line)) {
    // ...
} 
```

其次，将整行提供给字符串流可能要简单得多，然后从那里读取两部分：

```
stringstream convert(line);

std::getline(convert, name, '\t');
convert >> grade; 
```

第三，如果你想检查小写字母，你`islower`比比较像 96 和 123 这样的幻数要好得多。不过我不会那样检查。如果你想检查一个空行，最好直接做，`line.empty()`在你读完之后立即做。使用它，你最终会得到类似的东西：

```
while (getline(myfile, line))
    if (!line.empty()) {
        std::istringstream convert(line);
        std::getline(convert(line, name);
        convert >> grade;
        insert(name, grade);
        std::cout << name << "    " << grade << "\n";
    } 
```

除此之外还有一步：由于名称和等级（显然）相关，我可能会为它们定义一个类，并编写一个提取器以从流中获取该类型的对象：

```
class whatever { 
    std::string name;
    int grade;

    friend std::istream &operator>>(std::istream &is, whatever &w) { 
        std::getline(is, w.name, '\t');
        is >> w.grade;
        is.ignore(4096, '\n');
        return is;
    }
}; 
```

有了它，我们可以更简单地从文件中读取数据：

```
whatever w;

while (myfile >> w) {
    insert(w);
    std::cout << w.name << "    " << w.grade << "\n";
} 
```

请注意，在这种情况下，我们根本不需要显式检查空行——我们只需检查是否可以成功地`whatever`从流中读取和转换 a，对于空行将失败。

# c# - 没有足够的存储空间来处理这个命令（VS 编译，运行时）

> ID：14994209
> 
> 赞同：0
> 
> 时间：2013-02-21T03:48:44.743
> 
> 标签：c#, windows, visual-studio-2010, visual-studio, silverlight

**在构建**过程中，我在 Visual Studio 中收到以下错误：

> ...\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2868,9)：错误 MSB3021：无法将文件“obj\Debug\someproject.dll”复制到“Bin\Debug\someproject.dll” ”。**没有足够的存储空间来处理此命令**。

有时（如果我可以编译解决方案）在启动 Web 应用程序时在**运行时执行以下操作：**

> 无法加载文件或程序集“SomeWebSite”或其依赖项之一。**没有足够的存储空间来处理此命令**。（来自 HRESULT 的异常：0x80070008）

我已经尝试[`IRPStackSize`](http://support.microsoft.com/kb/106167)将其增加到最大值，但没有帮助。

*重启*后问题似乎暂时消失了，但后来又发生了。

*   Windows 7 32 位 SP1
*   视觉工作室 2010 SP1
*   银光 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:29:40.333

解决方法是从解决方案中的所有项目中删除**obj**文件夹。

该文件夹可以在构建项目时再次创建，因此不会对项目造成损害。

# jquery - jQuery Fade In 和 Fade Out Loop back to :first 兄弟

> ID：14994212
> 
> 赞同：2
> 
> 时间：2013-02-21T03:49:08.833
> 
> 标签：jquery, fadein, fadeout

JS Fiddle 位于此处：http: [//jsfiddle.net/8nqkA/2/](http://jsfiddle.net/8nqkA/2/)

HTML

```
<div>
<div class="show">Test 1</div>
<div class="hidden">Test 2</div>
<div class="hidden">Test 3</div>
<div class="hidden">Test 4</div>
</div> 
```

jQuery

```
$(document).ready(function() {
    myFunc($(".show"));
});

function myFunc(oEle)
{
       oEle.fadeOut('slow', function(){
            if (oEle.next())
            {
                oEle.next().fadeIn('slow', function(){
                   myFunc(oEle.next());
                });
            }
           else
               oEle.siblings(":first").fadeIn('slow', function(){
               myFunc(oEle.siblings(":first"));
               });
        });
} 
```

CSS

```
.hidden {
    display: none;
} 
```

试图让它在完成后循环回测试 1，但不起作用。只想让它重新开始，这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:58:46.997

在您的代码中-

```
$(document).ready(function() {
    myFunc($(".show"));
});

    function myFunc(oEle)
    {
           oEle.fadeOut('slow', function(){
                if (oEle.next().length)
                {
                    oEle.next().fadeIn('slow', function(){
                       myFunc(oEle.next());
                    });
                }
               else
                   oEle.siblings(":first").fadeIn('slow', function(){
                   myFunc(oEle.siblings(":first"));
                   });
            });
    } 
```

在这里查看演示 - [http://jsfiddle.net/8nqkA/3/](http://jsfiddle.net/8nqkA/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:04:10.797

```
if (oEle.next()){ // This needs to be oEle.next().length
    oEle.next().fadeIn('slow', function(){
        myFunc(oEle.next());
    });
}else{ // You should wrap this in a block
    oEle.siblings(":first").fadeIn('slow', function(){
        myFunc(oEle.siblings(":first"));
    });
} 
```

我们测试的原因`.length`是因为`.next()`像大多数 jQuery 方法一样，返回 jQuery - 不能直接对其进行测试。你可以把它想象成一个数组，所以这个`.length`属性为我们提供了当前选择中有多少元素。

我们还应该将您的代码包装`else`在一个块 ( `{..}`) 中，因为以下代码跨越多行。

# video - 为什么opencv无法读取rmvb视频？

> ID：14994213
> 
> 赞同：0
> 
> 时间：2013-02-21T03:49:09.743
> 
> 标签：video, opencv, ffmpeg, video-streaming

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:27:26.217

好的，但**这些消息不是来自 OpenCV**。

您安装的 OpenCV 使用**FFmpeg** (libavformat, libavcodec) 作为后端来处理视频文件。此消息告诉您的是，您当前的 FFmpeg 不支持 RMVB RV40。升级 FFmpeg 及其库。

另一种方法是手动编译 OpenCV 并将其设置为使用 GStreamer 作为后端。[有人](http://www.ozbotz.org/opencv-installation/)说OpenCV的build需要安装以下包才能在CMake配置过程中检测到。如果您的系统支持`apt-get`：

```
sudo apt-get install libgstreamer0.10-0 libgstreamer0.10-dev gstreamer0.10-tools gstreamer0.10-plugins-base libgstreamer-plugins-base0.10-dev gstreamer0.10-plugins-good gstreamer0.10-plugins-ugly gstreamer0.10-plugins-bad gstreamer0.10-ffmpeg 
```

# ruby-on-rails - 部分来自文件夹

> ID：14994217
> 
> 赞同：0
> 
> 时间：2013-02-21T03:49:22.830
> 
> 标签：ruby-on-rails

我正在与 Railscast 407（这是一个专业/付费剧集）一起工作，其中 Ryan Bates 将公共活动功能添加到一个站点，即每个活动（创建或更新食谱或对食谱的评论）都显示在公共提要中。在创建应用程序的某一时刻，他使用下面的代码从 /views/activities 文件夹中渲染出部分内容，但是，他还添加了一个注释子文件夹，因此创建部分路径是这样`views/activities/comment/_create.html.erb`的，指向它的链接是这样的

```
<%= render "activities/#{activity.trackable_type.underscore}/#{activity.action}", activity: activity %>

<h1> Activities </h1>

<% @activities.each do |activity| %>
    <%= div_for activity do %>
    <%= link_to activity.user.name, activity.user %>
    <%= render "activities/#{activity.trackable_type.underscore}/#{activity.action}", activity: activity %>
    <% end %>
<% end %> 
```

我很确定我正确复制了他的代码，但是当我尝试跟随时出现此错误，

```
The partial name (activities/comment/) is not a valid Ruby identifier; make sure your partial name starts with a letter or underscore, and is followed by any combinations of letters, numbers, or underscores. 
```

然而，他在这一集中没有得到那个错误。这是一个截图![在此处输入图像描述](../Images/35be2d3b52d5e86c86154747d7b9002c.png) 这是他的目录的截图![在此处输入图像描述](../Images/46f7705a50c11838bbf4bb037822059f.png)

仅供参考，这一集这一阶段的实际部分看起来像这样

```
commented on <%= link_to activity.trackable.recipe.name, activity.trackable.recipe %> 
```

你能解释一下为什么这对我不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:58:04.813

在这一集中的某一时刻，Ryan Bates 在跟踪活动的方法中（在应用程序控制器中）将默认操作设置为 nil

```
 def track_activity(trackable, action = nil)
    current_user.activities.create! action: action, trackable: trackable
  end 
```

但是，他后来将默认更改为像这样的参数操作

```
def track_activity(trackable, action = params[:action])
    current_user.activities.create! action: action, trackable: trackable
  end 
```

如果您使用以前的代码，那么除非您明确声明该操作，否则它在 db 中将为 nil，然后 OP 中的视图代码将触发错误。因此，使用 track_activity 的第二个版本更安全。

感谢@jvnill 的评论指出这一点

# git - Git 分支、变基、合并和标签

> ID：14994224
> 
> 赞同：1
> 
> 时间：2013-02-21T03:50:35.583
> 
> 标签：git, github

[这是我的分叉回购](https://github.com/iceblu3710/linux-sunxi-xenomai)

这是一个非常大的仓库，有几十万次提交，分支深度超过 20 个。只有带有 (-r#) 标签的提交才适用于我的硬件。我有一个已应用于 sunxi-v3.4.24-r1 标签的补丁。

```
 git clone https://github.com/iceblu3710/linux-sunxi-xenomai
    git checkout sunxi-v3.4.24-r1
    git branch -t i-pipe-core-uminded
    git add .
    git commit
    git push origin/i-pipe-core-uminded 
```

然后我想用上游内核更改重新设置该分支

```
 git for-each-ref --format '%(refname)' refs/tags
    NOTE: Any way to get the short hash of the commit with these tags? 
```

这将列出 repo 的所有标签，这与我相关：

```
 refs/tags/sunxi-v3.4.24-r2
    refs/tags/sunxi-v3.4.29-r0 
```

如何以干净的方式将我的分支重新定位到每个标签？

我的主要问题是 rebase 需要一个分支名称或哈希才能工作，它不接受标签，目前我不知道如何找到标签哈希，除了`git log --all | grep "TAG"`在这么大的 repo 上需要很长时间。

谢谢！

编辑 - 他们也是一种让 sunxi-v3.4.24-r1 标记我的 repo master 并丢弃它之前的所有提交的方法吗？我曾尝试使用 gitk 和 smartgit 之类的程序，但日志是如此之大，以至于内存不足。我永远不会合并下游，只会跟随该标签所在的上游分支。??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:22:08.530

要解决查找标签哈希的问题，可以使用以下命令：

```
git rev-parse TAG 
```

这将显示提交哈希。

# html - JS 多个粘性 div 和锚点

> ID：14994227
> 
> 赞同：1
> 
> 时间：2013-02-21T03:50:52.127
> 
> 标签：html, anchor, sticky

[http://nickscarantino.ministryportfolio.com/](http://nickscarantino.ministryportfolio.com/)是我正在开发的网站。

我的计划是为每个部分（顶部的导航）设置不同的“标题”。我希望这些标题贴在顶部，并使用锚点向下滚动页面。但是锚最终会在页面上跳跃。

例如，当我单击“历史”时，它应该滚动到“历史”锚并将该标题保留在页面顶部。但有时当我单击“历史记录”（例如 - 单击恢复后）时，它会一直滚动到页面顶部，而不是历史锚点所在的位置。

我该如何解决？

# javascript - 使按钮在单击时切换出图像

> ID：14994234
> 
> 赞同：2
> 
> 时间：2013-02-21T03:51:24.953
> 
> 标签：javascript, jquery, html, css

可能有一种更简单的方法可以做到这一点，我认为，比如使用 CSS、伪类或其他任何东西，但无论如何，由于某种原因，我已经编写了这个函数。

在`mouseup`它应该将图像切换回正常。（请注意，图像具有相同的名称，除了 mouse down`.png`是切换的，`ed.png`而 document.mouseup 则相反。但 document.mouseup 甚至不起作用）。

```
$.fn.buttonify = function () {
    console.log("buttonification successful");
    var that;
    var source;
    this.mousedown(function (event) {
        var top_value;
        var left_value;
        that = this;
        if (event.which == 1) { //if it is a left click
            source = this.src.substring(0, this.src.length - 4);
            source += "ed.png";
            this.src = source;
            console.log(this.src);
        }
    });

    $(document).mouseup(function () {
        if (that == null) {
            console.log("returninurnging");
            return;
        }
        console.log(source);
        source = source.substring(0, source.length - 6); //very questionable code
        source += ".png";
        that.src = source;
        console.log(that.src);
        that = null;
    });
} 
```

当鼠标移到点击区域之外时，它不会改变图像。
否则它工作。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T13:19:26.757

你真正想要什么？

```
<img src="image1.jpg" id="image">
<input type="button" value="whatever" onMouseDown="change()" onMouseUp="undochange()"> 
```

***JAVASCRIPT***

```
function change()
{
image = document.getElementById ("image");
image.src="image2.jpg";
}

function undochange()
{
image = document.getElementById ("image");
image.src="image1.jpg";
} 
```

# events - 处理在运行时创建的 OLEObject 命令按钮的事件

> ID：14994235
> 
> 赞同：6
> 
> 时间：2013-02-21T03:51:35.753
> 
> 标签：events, vba, event-handling, ole, commandbutton

我已经为这个问题苦苦挣扎了一段时间......我想做一些非常简单的事情。我想在运行时创建多个命令按钮，然后用一个过程处理这些命令按钮的事件。所以我建立了一个“withevents”类来处理自动化，但我的代码不起作用。当我运行 Test() 时，会创建命令按钮，但是当我单击它时...没有消息框响应...我找不到错误...请任何帮助都会很棒！

cTest 类

```
Public WithEvents Button As MSForms.CommandButton

Public Sub Button_Click()
s = MsgBox("Hello", vbOKOnly)
End Sub 
```

模块 1

```
Public TestCollection As Collection

Sub Test()

Set TestCollection = New Collection
Dim Btn As CommandButton
Dim OLEBtnObj As cTest
Set OLEBtnObj = New cTest
Set Btn = Sheet1.OLEObjects.Add(ClassType:="Forms.CommandButton.1", link:=False,_ DisplayAsIcon:=False, Left:=368.25, Top:=51, Width:=44.25, Height:=24).Object
Set OLEBtnObj.Button = Btn
TestCollection.Add Item:=OLEBtnObj

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:49:02.197

我有一个相当不切实际的解决方案。要对其进行测试，请将以下代码放在工作*表类模块*中（参见附图）。`Me.CodeName`是指工作表的[代码名称](https://docs.microsoft.com/en-us/office/vba/api/excel.worksheet.codename)。

对于每个新的 Sheet1 按钮，将添加一个处理的新事件。此事件处理程序将执行*公共事件处理程序*并将单击的命令按钮的名称传递给它。

```
' Standard Module
Sub test()
  ' adds three buttons to Sheet1 with click-event handlers
  Sheet1.AddButton
  ActiveCell.Offset(5, 0).Activate
  Sheet1.AddButton
  ActiveCell.Offset(5, 0).Activate
  Sheet1.AddButton
End Sub

' Sheet1 Class Module
Option Explicit

' Add Microsoft Visual Basic For Applications Extensibility

Public Function AddButton() As MSForms.CommandButton
  Dim msFormsCommandButton As MSForms.CommandButton
  Set msFormsCommandButton = Me.OLEObjects.Add(ClassType:="Forms.CommandButton.1").Object
  CreateEventHandler msFormsCommandButton.Name
  Set AddButton = msFormsCommandButton
End Function

Private Sub CommonButton_Click(ByVal buttonName As String)
  MsgBox "You clicked button [" & buttonName & "]"
End Sub

Private Sub CreateEventHandler(ByVal buttonName As String)
    Dim VBComp As VBIDE.VBComponent
    Dim CodeMod As VBIDE.CodeModule
    Dim codeText As String
    Dim LineNum As Long

    Set VBComp = ThisWorkbook.VBProject.VBComponents(Me.CodeName)
    Set CodeMod = VBComp.CodeModule
    LineNum = CodeMod.CountOfLines + 1

    codeText = codeText & "Private Sub " & buttonName & "_Click()" & vbCrLf
    codeText = codeText & "  Dim buttonName As String" & vbCrLf
    codeText = codeText & "  buttonName = """ & buttonName & "" & vbCrLf
    codeText = codeText & "  CommonButton_Click buttonName" & vbCrLf
    codeText = codeText & "End Sub"
    CodeMod.InsertLines LineNum, codeText
End Sub 
```

* * *

[![在此处输入图像描述](../Images/66720cf63104fd61c94ff1872a357576.png)](https://i.stack.imgur.com/GHjAH.jpg)

# excel - Excel行组合？

> ID：14994236
> 
> 赞同：2
> 
> 时间：2013-02-21T03:51:37.807
> 
> 标签：excel, vba

我有 4 个可用的“插槽”。我有 4 个“对象”，需要创建对象组合，每个对象都被放置在旋转的“插槽”中。例如，如果我有这些对象：

```
val1
val2
val3
val4 
```

我想使用脚本/宏/等来组合值的范围，以实现：

```
val1
val2
val3
val4

val2
val3
val4
val1

val3
val4
val1
val2

val4
val1
val2
val3 
```

接下来，我有 6 个“对象”，每个对象都需要在每个插槽中放置一个位置，因此总会有不包括 2 个对象的组合，但在所有组合完成后，每个对象都会访问一个插槽一次。

我不确定要使用哪些网络搜索关键字。我有点卡住了。最好的方法是什么？我安装了 Excel 2013。

谢谢。

编辑。

根据 Joe 的输入，我现在有以下代码：

```
Public Sub makeMore()
  Dim looper As Integer, colloop As Integer, numcols As Integer
  numcols = Cells(1, 1).Value
  For colloop = 1 To numcols
    For looper = Selection.Row To ((Selection.Row + Selection.Count) - 1)
      ActiveSheet.Cells(looper, colloop).Value = ActiveSheet.Cells((looper + colloop - 2) Mod numcols + 1, 1).Value
    Next looper
   Next colloop
End Sub 
```

我将 A1 中的值“6”放在工作表上，将值从 C4 到 C9“val1”“val2”“val3”“val4”“val5”“val6”，选择值，我看到的是数字“ 6" 散布在纸上。我想要制作的是多组 4 组，每个“val”在所有组中均等表示。我想，我在循环中的值设置中遗漏了一些东西。

所有进一步的想法表示赞赏。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:27:25.657

这样就可以了；我让它从 O15 读取行数的值。您可以将其设置在程序顶部的常量中，从某处读取它，将其放入 msgbox 中，无论您想要什么。

```
Public Sub makeMore()
  Dim looper As Integer, colloop As Integer, numcols As Integer
  numcols = Cells(15, 15).Value
  For colloop = 2 To numcols
    For looper = 1 To 4
      ActiveSheet.Cells(looper, colloop).Value = ActiveSheet.Cells((looper + colloop - 2) Mod numcols + 1, 1).Value
    Next looper
   Next colloop

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:23:16.697

伪代码解决方案

```
Get reference to the data range
Copy range data to a variant array
Get reference to output range
for i = 1 to number of output sets
    write array to sheet
    rotate array data
    offset output range reference
next i 
```

尝试编写此代码，如果遇到困难，请回复

# android - Facebook SDK + SlidingMenu SDK = Jar 不匹配！修复你的依赖

> ID：14994237
> 
> 赞同：7
> 
> 时间：2013-02-21T03:51:39.893
> 
> 标签：android, eclipse, facebook, sdk, slidingmenu

所以我已经将 Facebook SDK 和 SlidingMenu SDK 添加到我的 Android 项目中，但是我得到了那些令人讨厌的“Jar mismatch”错误。

我已经`android-support-v4.jar`从我的**libs**文件夹中删除了该文件，但错误仍然存​​在。

有想法该怎么解决这个吗？（我也尝试从文件夹中删除文件，但出现“找不到文件”错误）

图片：http: [//i.stack.imgur.com/9JOvg.png](https://i.stack.imgur.com/9JOvg.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-21T04:00:57.020

`android-support-v4.jar`从*SlidingMenu*库中删除。然后`android-support-v4.jar`从 Facebook SDK 的 libs 文件夹中复制文件并将其粘贴到您的*SlidingMenu 的*libs 文件夹中。

然后刷新SlidingMenu项目，完成上述操作后最后*清理所有项目。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:59:55.203

从两个库项目中删除支持库并将其重新添加到您的项目中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:08:17.087

尝试使用`android-support-v4.jar`从项目的 libs 文件夹中删除文件。

祝你好运。

# java - 带有动态 html 的 JSP 页面

> ID：14994241
> 
> 赞同：0
> 
> 时间：2013-02-21T03:52:30.163
> 
> 标签：java, jsp

我一直在尝试编写一个网站，其中所有导航都通过隐藏和显示 div 来处理。据我了解，这种方法称为单页界面。这在过去适用于简单的设计，但我目前的任务使用这种方法开始变得非常麻烦。我将如何去复制相同的行为，而不是隐藏和显示 div，我可以只拥有一个主容器 div，然后使用来自服务器的所需 html 填充？

例子：

```
<script>
    $("#button").onclick(function() {
        $("#a").show();
        $("#b").hide();
    });
</script>

<html>
    <body>
        <div id="a" style="display:none;">A: SOME HTML</div>
        <div id="b" style="display:block;">B: SOME HTML</div>
        <button id="button">Change to A</button>
    </body>
</html> 
```

（注意这是我正在尝试做的一个非常粗略的白色示例）

但我希望容器 div 的内容通过一些 jsp 从“B”更改为“A”

有人能指出正确的方向吗？

进一步说明：

也许我可以澄清一点。因此，当用户加载页面时，他们会看到一个部分，其中包含数据库中所有现有文件的表。用户可以从数据库列表中选择一个文件来重命名或复制。例如，如果用户希望重命名文件，他们将看到一个新的显示（都在同一个“选项卡”内），其中将为他们选择的文件填充一组字段和一组空字段他们可以在其中指定新文件名。目前，这种显示的更改是通过显示和隐藏 div 来处理的，但我想从服务器检索我想要显示的 html 并呈现它。基本上模仿 div 的隐藏和显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:49:56.293

由于我并不完全清楚您要做什么，因此我会给您一些选择：

1.  替换页面上元素的内容，请参阅
2.  由于您使用的是 JSP，因此您可以使用服务器端逻辑来显示某些片段
3.  您正在使用 JSP，使用它来呈现一些服务器端内容

广告 1：

（假设 jQuery）`$('body').load('serverSide.html');`见[http://api.jquery.com/load/](http://api.jquery.com/load/)

广告 2：

```
<% if ("a".equals(request.getParameter("aOrB"))) { %>
<jsp:include page="/a.jspf">
<% } else { %>
<jsp:include page="/b.jspf">
<% } %} 
```

广告 3：

```
<%= request.getAttribute('content') %> 
```

希望有帮助

# javascript - 无法在 IE7 中加载 jqgrid

> ID：14994244
> 
> 赞同：2
> 
> 时间：2013-02-21T03:52:45.343
> 
> 标签：javascript, jquery, jqgrid

我收到以下错误：

> SCRIPT1028：预期的标识符、字符串或数字招聘.html；jsessionid=1f7j1qesicu7u，第 646 行字符 56

```
 var pagerPrevTD = $('<td>',  {class: "myPager"}), prevPagesIncluded = 0,
 pagerNextTD = $('<td>', { class: "myPager"}), nextPagesIncluded = 0,
 totalStyle = grid[0].p.pginput === false,
 startIndex = totalStyle? this.p.page-MAX_PAGERS*2: this.p.page-MAX_PAGERS; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:32:34.380

我想你应该替换`{class: "myPager"}`为

```
{"class": "myPager"} 
```

因为旧版本的 Internet Explorer 解释`class`为保留字，如果没有被引用就不能用作属性。

您可以重写`$('<td>', {class: "myPager"})`或`$("<td>").addClass("myPager")`仅使用`$("<td class='myPager'></td>")`.

# jquery - jQuery简单：两个函数冲突

> ID：14994246
> 
> 赞同：0
> 
> 时间：2013-02-21T03:52:51.707
> 
> 标签：jquery

这是关于菜单上的“Contato”项目。当您单击它时，它会在 div 中上下弹出高度。工作正常。另外，我想放一个“X”按钮。

问题是：当我点击“Contato”时，它会弹出。我点击X，它会弹出。但是如果我再次点击“Contato”，它只有在我点击两次时才有效。

你们对我如何改进我糟糕的jQuery来解决这个问题有任何想法吗？

这是现场直播： [http ://www.arthurfalcao.com.br](http://www.arthurfalcao.com.br)

```
<section id="contato">
            <article id="info">
                <p>21 8668 1419</p>
                <p>22 7836 4351</p>
                <p>87*146596</p>
                <a href="mailto:artfalcao@gmail.com" title="E-mail para contato" target="_blank">artfalcao@gmail.com</a>
            </article>
            <div class="contato">
                <span class="close">X</span>
                <?php echo do_shortcode("[si-contact-form form='1']"); ?>
            </div>
        </section>

        <script>
            jQuery("#menu-item-21 a").click(function () {
                jQuery(this).toggleClass("black");
            });
            jQuery("#menu-item-21").toggle(function(){
                jQuery("#contato").animate({height:375},600);
                jQuery("#info").animate({height:0},700);},
                function(){
                jQuery("#contato").animate({height:150},600);
                jQuery("#info").animate({height:115},700);
            });

        </script>
        <script>
            jQuery(".close").click(function () {
                jQuery('#contato').animate({height:150},700);
                jQuery("#info").animate({height:115},700);
            });
            jQuery("#menu-item-21 a").click(function () {
                jQuery(this).removeClass("black");
            });         
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:58:54.030

改变这个

```
 jQuery(".close").click(function () {
            jQuery('#contato').animate({height:150},700);
            jQuery("#info").animate({height:115},700);
        }); 
```

至

```
 jQuery(".close").click(function () {
            jQuery('#menu-item-21').trigger('click');
        }); 
```

您遇到的问题是由于您使用`.toggle`. 现在，如果您单击 X，它会以动画方式关闭，但不会影响`.toggle`状态。相反，让 X 触发点击`#menu-item-21`，这样它就可以使用`.toggle`和影响切换状态。

# php - 在 Concrete5 中，如何更新我的块编辑视图以显示保存在数据库中的当前值？

> ID：14994248
> 
> 赞同：1
> 
> 时间：2013-02-21T03:53:08.667
> 
> 标签：php, jquery, concrete5, dynamic-list

我有动态创建产品功能列表并将所有值放在一个字符串中的代码，该字符串由换行符分隔并保存到数据库中。当这个字符串被传递给视图时，我输出为一个无序列表。当我去编辑块时，它不会显示列表中已有的内容，所以每次我需要编辑我的块时，我都必须重新输入所有功能，即使它不是功能列表（我有一些标题和其他文本区域） . 如果我将 php 变量放入我的编辑页面，它将向我显示已保存的内容，但我需要将其立即添加到列表中并且不单独显示。我基本上需要它来“自动追加”我的`<ul>`. 这是我的代码...

将列表保存在 controller.php 中的控制器函数

```
public function save($args) {
        $args['features'] = implode("\n", $args['features']);//combine all feature items into one string, separated by "newline" characters
        parent::save($args);
    } 
```

我的edit.php - 这将显示在一个列表中。如果我只是把`echo $features`它输出字符串。

```
echo '<div class="ccm-block-field-group">';
echo '<h2>' . t('Features') . '</h2>';
echo '<input type="text" id="inputList" />';
echo '<button type="button" id="addList">Add</button>';
echo $features = explode("\n", $features);
        foreach ($features as $feature) {
            echo '<li class="currentFeatures">' . $feature . '</li>';
        };

echo '<ul class="featureList">';
echo '</ul>';
echo '</div>'; 
```

我的 auto.js - 处理列表的创建

```
var listItemCounter = 0;
    $("#addList").click(function() {
        listItemCounter++;
        var text = $("#inputList").val(); //assign a unique id number to this button, so it knows which hidden field to remove when clicked
        var buttonDataId = text + '<button data-id="' + listItemCounter + '">x</button>';
        if(text.length){
            $('<li />', {html: buttonDataId}).appendTo('ul.featureList');
            $('<input type="hidden" name="features[]" value="' + text + '" data-id="' + listItemCounter + '" />').insertAfter('ul.featureList');
            };
    });
    $('ul').on('click','button', function(el){
        $('input[data-id="' + $(this).attr('data-id') + '"]').remove();//remove the hidden field so it does not get POSTed when user saves
        $(this).parent().remove()
    }); 
```

最后是我的 db.xml 的一部分

```
<field name="features" type="X2"></field> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:58:02.787

您将想做类似于我在其他问题（[https://stackoverflow.com/a/14968046/477513](https://stackoverflow.com/a/14968046/477513)）中为“视图”解释的内容。

您想将列表从字符串更改为数组（通过`explode("\n", $features)`），然后在每个功能上运行您的 javascript。由于这与有人通过文本框添加新项目时所做的基本相同的 javascript，因此您需要将所有代码移动到一个函数中并在两种情况下调用该函数（否则您将复制和粘贴相同的代码，这违反了“不要重复自己”的规则，将来不可避免地会导致错误）。所以你的 auto.js 代码可能看起来像这样：

```
var listItemCounter = 0;

function addItem(text) {
    if (text.length) {
        listItemCounter++;
        var itemHtml = '<li data-id="' + listItemCounter + '">'
                     + text
                     + '<button data-id="' + listItemCounter + '">x</button>'
                     + '</li>';
        var inputHtml = '<input type="hidden" name="features[]" value="' + text + '" data-id="' + listItemCounter + '" />';
        $('ul.featureList').append(itemHtml);
        $('ul.featureList').after(inputHtml);
    }
}

function removeItem(id) {
    $('input[data-id="' + id + '"]').remove();
    $('li[data-id="' + id + '"]').remove();
}

$("#addList").click(function() {
    additem($("#inputList").val());
});

$('ul').on('click','button', function(el) {
    var id = $(this).attr('data-id');
    removeItem(id);
}); 
```

然后在您的 edit.php 文件中，添加此代码以输出保存的数据并在每个文件上调用 addItem 函数：

```
<?php
//populate existing data when edit dialog is first opened
$featuresPHPArray = explode("\n", $features);
$featuresJSArray = Loader::helper('json')->encode($featuresPHPArray);
?>
<script>
var savedItems = <?php echo $featuresJSArray; ?>;
$.each(savedItems, function() {
    addItem(this);
});
</script> 
```

# javascript - Rails javascript文件（application.js除外）不起作用

> ID：14994249
> 
> 赞同：3
> 
> 时间：2013-02-21T03:53:09.397
> 
> 标签：javascript, jquery, ruby-on-rails

我正在将 jQuery 实现到一个 rails 项目中，并在我的 application.html.erb 文件的头部有这个 Javascript 标记：

```
 <%= javascript_include_tag "application" %> 
```

如果我将 jQuery 代码放入我的 application.js 文件中，它会在我的应用程序中按预期工作。但是，如果我将 jQuery 代码放入我的 assets/javascripts 文件夹（例如 home.js）中的任何其他 .js 文件中，它就无法在我的应用程序中正常工作。

这是我的 application.js 文件：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_tree . 
```

我的印象是，最后一行意味着我的所有其他 js 文件都将被编译到 application.js 中，因此在我的 application.html.erb 文件中只有 <%= javascript_include_tag "application" %> 就足够了让我所有的 js 文件都能正常工作——这是一个错误的假设吗？

这些是我的 home.js 文件的内容——当我将它直接放入我的 application.js 文件时，这个函数可以正常工作，但是当它在我的 home.js 文件中时它不起作用。

```
$(document).ready(function(){
  $("h2").click(function(){
    $(this).hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:49:57.610

尝试在 //=require_tree 上方的 application.js 文件中添加 //=my home 。希望这可以帮助。

# ios - Facebook iOS SDK 在发布成就时返回“HTTP 状态代码：400”

> ID：14994260
> 
> 赞同：1
> 
> 时间：2013-02-21T03:54:18.783
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试使用 SDK 3.1.1 将成就发布到用户的 Facebook 图表，但每次发送成就 URL 时，我都会在日志中收到“HTTP 状态代码：400”错误。我已经正确注册了 URL，当我将 URL 粘贴到其中时，所有内容都使用 Facebook 的小调试器工具进行了检查。还授予了发布权限，并且整个身份验证过程顺利进行。我目前使用的是虚拟用户 ID，但这是我在发送成就的函数中使用的代码......

```
NSMutableDictionary* params =   [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                     [NSString stringWithFormat:@"%@",
                                      [achievementURLs objectAtIndex:achievement]], @"achievement",
                                     nil];
userID = 100004505160614;

[FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%i/achievements", userID] parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    }]; 
```

这个错误可能来自哪里的任何想法？

# python - 无法理解“def gcd()”的代码

> ID：14994266
> 
> 赞同：1
> 
> 时间：2013-02-21T03:54:51.070
> 
> 标签：python, python-2.7, greatest-common-divisor

**更新：**一旦我不知道`3 %4 =0`...

```
def gcd(a, b):
    """Calculate the Greatest Common Divisor of a and b.

    Unless b==0, the result will have the same sign as b (so that when
    b is divided by it, the result comes out positive).
    """
    while b:
        a, b = b, a%b
    return a 
```

我认为它是这样工作的：

```
gcd(3,4) => while 4: => 3,4 = 4, 3%4 => 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T04:17:28.400

让我们一步一步来。

```
def gcd(a, b): 
```

`gcd`这定义了一个使用变量`a`及其`b`计算的新函数。这些值必须在函数开始之前设置。

```
while b: 
```

除非一个数等于 0，否则它被认为是真的。所以，如果`b`= 0，那么这部分代码**将不会执行。**

```
 a, b = b, a%b 
```

为了清楚起见，我将把它扩展到两行。

```
a = b
b = a%b 
```

第一部分是不言自明的——第二部分绝对不是。`a%b`是`a (mod b)`模数的 Python 表达式，是数学函数，在它们的最基本状态下，返回两个数字的余数。例如，`12%5 = 2`; 余数`12/5`为 2。

但是，在编写实际代码时，请确保将它们保持在同一行。“在一行中，分配同时发生（由元组打包和拆包提供）。在两行中，分配一个接一个地发生，这给出了一个不正确的答案（b 将始终为 0）” - [Tim](https://stackoverflow.com/users/1548678/tim)

这些行无限重复，直到变量`b`等于 0。之后，代码执行：

```
return a 
```

这会将值返回`a`给程序的其余部分，以便以后可以使用它。它也结束了函数。

要阅读有关欧几里得方程的更多信息（并且......因为我*喜欢*密码学和数学，“扩展”版）请访问[此 Wikipedia 页面。](http://en.wikipedia.org/wiki/Euclid%27s_algorithm)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T15:48:37.753

这是 gcd 函数的递归版本。

```
def gcd(a, b):
    c = a%b
    if c == 0:
        return b
    return gcd(b, c) 
```

# c - 即使使用 fflush 也会跳过 scanf

> ID：14994271
> 
> 赞同：1
> 
> 时间：2013-02-21T03:55:41.710
> 
> 标签：c, int, scanf, fflush

我有一个`scanf`不接受输入的。即使变量未初始化，该值也会自动为零。被`scanf`跳过：

```
printf("\nEnter the number of the student to be dropped: ");
fflush(stdin);
scanf(" %d ",&choice);
printf("choice is %d", choice); 
```

程序运行时，立即显示“choice is 0”。

上面的代码片段取自此代码中的 drop() 函数：

```
 #include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct student{
       char name[50];
       char* course;
};

main()
{
      char repeat;
      do{
      system("cls");
      int mainchoice;
      printf("Student Enrollment System");
      printf("\n");
      printf("\n");
      printf("1\. View\n");
      printf("2\. Enroll\n");
      printf("3\. Drop enrollment\n");
      printf("Select choice: ");
      fflush(stdin);
      scanf("%d",&mainchoice);
      system("cls");
      switch(mainchoice){
             case 1:
                  view();
                  break;
             case 2:
                  enroll();
                  break;
             case 3:
                  drop();
                   break;
             default:
                     printf("Please enter a valid number.");
                     getch();
                     fflush(stdin);
                     break;
             }

      printf("\nWould you like to make another transaction? [Y/N]: ");
      fflush(stdin);
      scanf("%c",&repeat);
      }while(repeat=='Y'||repeat=='y');     
}

view(){
       int ctr = count();
       printf("Enrolled Students:\n\n");
       system("type records.txt");
       printf("\n\nNumber of students enrolled: %d", ctr);
       getch();
       fflush(stdin);

}

enroll(){
         int choice;
         char validate;
         printf("1\. Information Technology\n");
         printf("2\. Computer Science\n");
         printf("3\. Computer Engineering\n");
         printf("4\. Information Systems\n");
         struct student news;
         printf("Name: ");
         fflush(stdin);
         gets(news.name);
         printf("Course Number: ");
         fflush(stdin);
         scanf("%d", &choice);
         switch(choice){
                        case 1:
                             news.course = "BSIT";
                             break;
                        case 2:
                             news.course= "BSCS";
                             break;
                        case 3:
                             news.course = "BSCpE";
                             break;
                        case 4:
                             news.course = "BSIS";
                             break;
                        default:
                                printf("Please enter a valid number\n");
                                break;
                        }
         printf("Enroll %s to %s? [Y/N]:",news.name,news.course);
         fflush(stdin);
         scanf("%c", &choice);
         if(choice=='Y' || choice=='y')
         {
          FILE * records;
          records = fopen("records.txt", "a+");
          fprintf(records, "%s, %s\n",news.name,news.course);
          fclose(records);
          printf("%s has been enrolled to %s\n",news.name, news.course);

         }
         else
         {
             printf("You have chosen to cancel your transaction");
         }
}

drop(){
       printf("Drop Student:\n\n");
       int ctr = 0;
       int choice; //which student to delete
       char c;
       FILE * record; // original records.txt
       FILE* repo;    //temporary data storage

       record = freopen("records.txt", "r", stdin);
       while((c = fgetchar())!=EOF){
                if(c == '\n'){

                }
                else{
                     ctr=ctr+1;
                     printf("%d.  ", ctr);
                     while(1){       
                                     printf("%c",c);
                                     c= fgetchar();
                                     if(c=='\n'){
                                                 printf("%c",c);
                                                 break;
                                                 }

                     }  

                }              
       }
       fclose(record);
       fflush(stdin);
       fflush(stdin);
       printf("\nEnter the number of the student to be dropped: ");
       fflush(stdin);
       scanf(" %d ",&choice);
       getch();
       getch();
       fflush(stdin);
       ctr = 1;
       fflush(stdin);

       repo = fopen("temp.txt","w");
       record = freopen("records.txt","r",stdin);
       while((c = getchar()) != EOF){
                if(c == '\n'){

                }
                else{

                     while(ctr!=choice){       
                                     fprintf(repo,"%c",c);
                                     c= fgetchar();
                                     if(c=='\n'){
                                                 fprintf(repo,"%c",c);
                                                 ctr = ctr + 1;
                                                 break;
                                                 }
                                     }
                     }
                }
       fclose(record);      
       fclose(repo);

       getch();
}

//counts the number of rows in the record
int count(){
       int ctr=0;
       char c;
       FILE * records;
       records = freopen("records.txt","r", stdin);
       if(records!=NULL){
            while((c=fgetchar()) !=EOF){
                if(c=='\n'){
                    ctr = ctr+1;
                    }
                }                      
       }
       fclose(records);   
       return ctr; 
} 
```

做`fflush`似乎没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T04:03:39.607

`fflush`没有为输入流定义的行为；`fflush(stdin)`是编码错误，您应该从代码中删除这些调用。

`%c`扫描单个字符时，在转换说明符前添加一个空格；这将告诉`scanf`跳过任何前导空格并读取下一个非空格字符：

```
scanf(" %c", &choice); 
```

`%d`and转换说明符将`%s`跳过任何前导空格。

**编辑**

从 C99 开始不再支持隐式类型，这是一个不好的习惯。显式键入您的函数，并`void`用作参数列表以指定它们不带参数：

```
main() => int main(void)
view() => void view(void) // void since it isn't returning a value
drop() => void drop(void) 
```

等等

同样，`gets`在 C99 中已弃用，并在 2011 标准中完全消失。使用它将*在*您的程序中引入故障点/主要安全漏洞。改为使用`fgets`。

# mmap - 检测 mprotected 内存地址

> ID：14994275
> 
> 赞同：1
> 
> 时间：2013-02-21T03:56:16.813
> 
> 标签：mmap, mprotect

是否有功能可以检测映射的给定虚拟地址`mmap`是否受保护`mprotect`？如果设置了访问这样的地址将导致分段错误`PROT_NONE`。所以我想首先检测它们是否受到保护。

如果我不需要引入信号处理程序会更好。如果没有这样的功能，任何其他轻量级的解决方案也可以。谢谢。

# java - Java ConcurrentModificationException

> ID：14994277
> 
> 赞同：6
> 
> 时间：2013-02-21T03:56:26.280
> 
> 标签：java, exception

删除倒数第二个元素时没有 ConcurrentModificationException

```
List<String> myList1 = new ArrayList<String>();
Collections.addAll(myList1, "str1","str2","str3","str4","str5");
for(String element : myList1){//no ConcurrentModificationException here
if(element.equalsIgnoreCase("str4"))
    myList1.remove("str4");
}
System.out.println(myList1); 
```

但是当删除其他元素时，会出现 ConcurrentModificationException

```
List<String> myList2 = new ArrayList<String>();
Collections.addAll(myList2, "str1","str2","str3","str4","str5");
for(String element : myList2){//ConcurrentModificationException here
if(element.equalsIgnoreCase("str1"))
    myList2.remove("str1");
}
System.out.println(myList2); 
```

是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:03:32.123

Java 使用 modCount(modification count) 和 expectedCount 来测试列表是否有修改。

```
final void checkForComodification() {
    if (modCount != expectedModCount)
        throw new ConcurrentModificationException();
} 
```

在这两种情况下，移除后 modCount 为 6，但 expectedModCount 为 5。

问题是 hasNext()。

```
public boolean hasNext() {
    return cursor != size;
} 
```

该列表使用光标和大小来检查是否有下一个元素。并且 hasNext() 发生在 checkForComodification 之前，因为在 next() 方法中调用了 checkForComodification()。

```
 public boolean hasNext() {
        return cursor != size;
    }

    @SuppressWarnings("unchecked")
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i >= size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (i >= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[lastRet = i];
    } 
```

因此，当您删除倒数第二个元素时，光标=4，大小也=4。hasNext() 返回假。跳出循环并打印结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T04:26:22.713

我看到的是一样的

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Launcher 
{
    public static void main(String[] args) 
    {
        doThis();
        doThat();
    }

    private static void doThis()
    {
        System.out.println("dothis");
        try
        {
            List<String> myList1 = new ArrayList<String>();
            Collections.addAll(myList1, "str1","str2","str3","str4","str5");
            for(String element : myList1){//no ConcurrentModificationException here
            if(element.equalsIgnoreCase("str4"))
                myList1.remove("str4");
            }
            System.out.println(myList1);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    private static void doThat()
    {
        System.out.println("dothat");
        try
        {
            List<String> myList2 = new ArrayList<String>();
            Collections.addAll(myList2, "str1","str2","str3","str4","str5");
            for(String element : myList2){//ConcurrentModificationException here
            if(element.equalsIgnoreCase("str1"))
                myList2.remove("str1");
            }
            System.out.println(myList2);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

哪个输出，

```
dothis
[str1, str2, str3, str5]
dothat
java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
    at java.util.AbstractList$Itr.next(Unknown Source)
    at com.foo.Launcher.doThat(Launcher.java:41)
    at com.foo.Launcher.main(Launcher.java:12) 
```

* * *

我找到[**了原因**](https://stackoverflow.com/questions/14673653/why-isnt-this-code-causing-a-concurrentmodificationexception)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:25:01.323

javac 构建的实际代码`for-each`是

```
 Iterator<String> i = myList1.iterator();
    while(i.hasNext()) {
        String element = i.next();
        if (element.equalsIgnoreCase("str4"))
            myList1.remove("str4");
    } 
```

这是 ArrayList Iterator.hasNext 实现

```
 public boolean hasNext() {
        return cursor != size;
    } 
```

正如我们所看到`hasNext()`的，它不检查并发修改，所以当我们删除最后一个元素时，循环结束而没有注意到问题。

实际上很奇怪，`next()`并且`remove()`检查并发修改但`hasNext()`没有。Fail-fast 迭代器应该检测错误，但我们的错误没有被注意到。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-21T04:05:19.740

这是一个经常出现的问题。StackOverflow 有数百个线程涵盖了这一点。您可以在这里找到问题的答案：

[在 Java 中修改对象时如何迭代对象？](https://stackoverflow.com/questions/3517666/how-can-i-iterate-over-an-object-while-modifying-it-in-java?lq=1)

当您删除倒数第二个元素时，hasNext() 检查失败并且循环迭代停止。检查 JDK 中的 ArrayList 迭代器代码。

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.Itr.hasNext%28%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.Itr.hasNext%28%29)

但是在删除第二个元素的情况下，hasNext() 检查通过并进入 next() 方法，其中它检查的第一件事是修改 arrayList 并因此出现异常。请检查此代码：

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.Itr.next%28%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.Itr.next%28%29)

最安全的方法是使用迭代器 remove 方法删除元素。

尝试**调试器**来单步执行代码，以便更好地理解它是如何工作的。

# vb.net - 对列标题和列值求和

> ID：14994280
> 
> 赞同：0
> 
> 时间：2013-02-21T03:56:42.497
> 
> 标签：vb.net, winforms, datagridview

如何通过列使用的值的数量（For＆Next）对VB.net中的`datagridview`列标题和列值求和？例子`textbox``datagridview`

在`datagridview`：之前

```
 column : ID        address        

                   1         street1 

                   2         street2

                   3         street3 
```

在`textbox`：之后

```
 ID = 1 / address = street1 

                  ID = 2 / address = street2 

                  ID = 3 / address = street3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:50:29.333

这段代码会将值添加到列表中，您可以从中填充文本框。它假定列的数量未知，并且 dgv 是您的 DataGridView：

```
 Dim txtBoxList As New List(Of String)
    Dim strLine As String
    For Each dgvRow As DataGridViewRow In dgv.Rows
        For i As Integer = 0 To dgv.Columns.Count - 1
            strLine = strLine & String.Format("{0} = {1}", dgv.Columns(i).HeaderText.ToString, dgvRow.Cells(i).tostring)
            If i < dgv.Columns.Count - 1 Then
                strLine = strLine & " / "
            End If
        Next
        txtBoxList.Add(strLine)
        strLine = String.Empty
    Next 
```

# objective-c - 在 Interface Builder 中访问 NSMutableDictionary 值

> ID：14994283
> 
> 赞同：0
> 
> 时间：2013-02-21T03:57:14.010
> 
> 标签：objective-c, xcode, macos, interface-builder, nsmutabledictionary

我认为这很简单，但两天后我承认失败。任务很简单：
在用户界面中，显示和编辑 myClass 中 NSMutableDictionary 中包含的键/值对中的单个 NSString 值。

以下是代码摘录： 在 IB 中： - 文件所有者类 = myClass - NSDictionaryController 内容字典绑定到文件所有者模型键路径“设置” - NSTextField 绑定到 DictionaryController 排列对象模型键路径“测试”
`myClass:
NSMutableDictionary *settings;
settings = [[NSMutableDictionary alloc] init];
[settings setObject:@"2400" forKey:@"test"];`

**产生错误：** `[<_NSControllerKeyValuePair 0x1001db3d0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key test.`

非常感谢任何评论和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:23:14.863

我不确定这与IB有什么关系。看起来你没有初始化你的 NSMutableDictionary。尝试：

```
NSMutableDictionary *settings= [NSMutableDictionary dictionaryWithCapacity:10];
[settings setObject:@"2400" forKey:@"test"]; 
```

希望这可以帮助。

# php - 如何在 PHP 中构建分词器？

> ID：14994287
> 
> 赞同：7
> 
> 时间：2013-02-21T03:57:30.907
> 
> 标签：php, tokenize

我正在建立一个网站来学习基本编程，我将使用一种伪语言，用户可以在其中提交他们的代码，我需要解释它。但是我不确定如何在 PHP 中构建标记器。

有一个像这样的片段：

```
a = 1
b = 2
c = a - b

if(a > b) {
    buy(a)
    } else {
    buy(b)
    } 
```

我将如何将此代码分成令牌？

--

这就是我现在正在尝试的：

```
$tokens = array();

// First token (define string)
$token  = strtok($botCode, '=');
$tokens[] = $token;

// Loop
while($token) {
    $token  = strtok('=');
    $tokens[] = $token;
} 
```

但是我无法弄清楚如何将 strtok 与常规表达式列表一起使用...我可以做一些类似于 strtok 的事情，但它接受数组作为带有 substr 和 strrpos 的针，但在我看来它应该是可能的使用 strtok 来完成它，因为它就是为此而设计的。任何信息或指向正确的方向将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:13:57.680

不要等待 strtok 的一些魔法。它类似于 preg_split。

我认为您想构建自己的词法分析器。因此，您可以使用文章[Writing a simple lexer in PHP](http://nitschinger.at/Writing-a-simple-lexer-in-PHP)或[其他内容](http://google.com/search?q=php%20lexer)。

# java - 没有指定退货？

> ID：14994291
> 
> 赞同：-1
> 
> 时间：2013-02-21T03:58:15.107
> 
> 标签：java, loops, return

```
public int removeAll(int i){
    while (head.getData() == i){
        int value = head.getData();
        head = head.getNext();
        return value;
    }
    Node curr = head;
    while (curr.getNext() != null){
        if (curr.getNext().getData() != i){
            int value = curr.getNext().getData();
            curr.setNext(curr.getNext().getNext());
            return value;
        }
        else {
            curr = curr.getNext();
        }

    }

} 
```

它一直说没有为函数指定返回，因为它是嵌套的，而不是在外循环上。我怎么能把它拿出来清除这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:08:52.057

Change your code to:

```
public int removeAll(int i) {
    int value = 0; //You can check in caller code like if it is 0 (or put your own value like -1) then do something

    while (head.getData() == i) {
        value = head.getData();
        head = head.getNext();
    }

    Node curr = head;
    while (curr.getNext() != null) {

        if (curr.getNext().getData() != i){
            value = curr.getNext().getData();
            curr.setNext(curr.getNext().getNext());
        }
        else {
            curr = curr.getNext();   //In this part, there is no return code
        }

     }
     return value;
} 
```

Since there was at-least one condition which can be satisfied, where there were no return statement, you were getting error. This code should work fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:13:12.053

如果程序控制从未在您的`removeAll`方法的任何 while 循环中到达怎么办。在这种情况下，您应该返回一个整数值，但程序永远不会到达任何`return`语句。因为这个编译器给你错误。

`return`在函数末尾添加语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:14:09.783

符合[JLS 8.4.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.7)，该程序编译失败，因为它确定该方法**可以**正常完成：

> 如果将方法声明为具有返回类型，则如果方法的主体可以正常完成，则会发生编译时错误。

在您的情况下，程序可能会在不进入任何 for 循环的情况下终止，因此不会返回任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:05:34.880

我认为你需要这个：

```
Node curr = head;
int value = -1;  // change is here
while (curr.getNext() != null){
    if (curr.getNext().getData() != i){
        value = curr.getNext().getData();  // change is here
        curr.setNext(curr.getNext().getNext());
        break;  // change is here
    }
    else {
        curr = curr.getNext();
    }
}
return value;   // change is here 
```

# java - 将节点插入链表

> ID：14994292
> 
> 赞同：0
> 
> 时间：2013-02-21T03:58:17.870
> 
> 标签：java, list, methods, insertion

我正在寻找一种方法来获取对象的信息，创建对象的实例，设置信息，然后创建节点并将信息设置到节点，最后将节点插入我的链表它所属的地方。链表只需按`rfidTag` `String`9 位十六进制表示的类型进行组织。这是我到目前为止所拥有的（我忽略了“by rfidTag”部分）......

```
public class ItemList {

    ItemInfoNode head;
    ItemInfoNode tail;
    ItemInfoNode cursor;

    int listCount = 0;

    public ItemList(){
        head = cursor = tail = null;
    }

    public void insertInfo(String name, String rfidTag, String initPosition,
            double price) {
        ItemInfo obj = new ItemInfo(name, rfidTag, initPosition, initPosition, price);
        ItemInfoNode temp = new ItemInfoNode();
        temp.setInfo(obj);
    }
} 
```

现在我不知道该放什么，但我会向您展示我尝试过的内容并添加评论，说明我在哪里迷失并希望完成......

```
ItemInfo obj = new ItemInfo(name, rfidTag, initPosition, initPosition, price);
ItemInfoNode temp = new ItemInfoNode();
temp.setInfo(obj);

if (head == null) {
    head = temp;
    cursor = temp;
    tail = temp;
    head.setNext(cursor);
    tail.setPrev(cursor);
    listCount++;
} else {
    cursor = temp;
    cursor.setPrev(head);
    cursor.setNext(tail);

    System.out.println(cursor.getPrev().getInfo().getName());
    System.out.println(cursor.getInfo().getName());
    System.out.println(cursor.getNext().getInfo().getName());
    // Now I stop here because I do not understand how to put a 3rd in
    // between my head and tail without losing the middle nodes info (cursor)
    // These printlns are here to help me understand what exactly is happening!
    // So I am rather unclear one what my next step should be
} 
```

**我目前正在尝试让我的其他尝试运行而不抛出异常！完成后会添加！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:13:30.273

假设*光标*指向要插入该节点的节点。

```
ItemInfo obj = new ItemInfo(name, rfidTag, initPosition, initPosition, price);
ItemInfoNode temp = new ItemInfoNode();
temp.setInfo(obj);

if(head == null){
  head = tail = cursor = tmp;
}

else{
  if(cursor == tail)
  {
    cursor.setNext(tmp);
    tmp.setPrev(cursor);
    tail = tmp;
  }
  else
  {
    tmp.setNext(cursor.getNext());
    tmp.setPrev(cursor);

    cursor.getNext().setPrev(tmp);
    cursor.setNext(tmp);
  }
}

listCount++; 
```

有了这个，如果节点是第一次插入，那么 All（头、尾和光标）将指向第一个节点。如果n个节点已经存在，那么我们需要根据光标的位置插入新节点。如果光标指向尾部，则在末尾添加新节点并更新尾部。如果光标指向任何其他节点（包括头部），则在光标之后插入新节点，并且尾部保持不变。在这两种情况下，head 都没有被触及，即 head 将始终指向第一个节点。[Tail 将始终指向最后一个节点——并相应更新]

希望这可以帮助！！

# android - 切换活动时由于asynctask或其他原因导致Android随机黑屏

> ID：14994296
> 
> 赞同：0
> 
> 时间：2013-02-21T03:58:53.087
> 
> 标签：android, android-intent, android-asynctask, android-activity, setbackground

我创建了一个在模拟器上运行良好的应用程序，但有时，在真实设备（三星注 2）上从一个活动切换到另一个活动时，我得到一个黑屏，然后一秒钟后，我被转发到我以前的活动。

有人有同样的问题吗？或解决方案？

例如（字母是活动）我去 A -> B -> C -> D 然后回到 A -> B 然后黑屏访问 C 并返回 B。

我的活动很简单，只是形式。起初，我以为是因为我有几个异步任务要访问互联网（提交表单、登录、下载或上传图片），但我总是添加：

```
 response.getEntity().consumeContent(); just after the get the response 
```

和

```
 mtask.cancel(); (après isCancelled) in the post execution section 
```

之后，我认为这是因为我有很多： putExtraString 但我检查了它没有足够的数据导致任何问题。

我的猜测可能是因为我在通过我的应用程序创建后设置了背景，这可能会产生一些工作量。但它没有。

我将启动模式参数切换为 cleartaskatlaunch 并稍微好一些，但我仍然经常出现黑屏。

早上 5 点在这里...睡觉，希望我明天能找到答案。

谢谢

洛朗

# java - 生成 xsd 到 jaxb 对象时如何解决冲突

> ID：14994306
> 
> 赞同：1
> 
> 时间：2013-02-21T04:00:17.860
> 
> 标签：java, xsd, jaxb

`xsd`生成对象时如何解决冲突`jaxb`？

下面是例子：

`A.xsd`包括`B.xsd`and `C.xsd`
Both`B.xsd`并且`C.xsd`有一个重复的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:31:12.653

当我不久前遇到这个问题时，我发现有 3 个选项可以解决这个问题：

1.  将 XSD 中的类重命名为其他名称以避免该问题。

2.  创建绑定文件以在生成时重新映射类。

3.  从下往上生成类，制作剧集文件并每次指定一个新包，以便对象不会在同一个包内发生冲突。

# angularjs - 如何让angularjs先显示快部分，然后渲染慢部分？

> ID：14994308
> 
> 赞同：0
> 
> 时间：2013-02-21T04:00:45.560
> 
> 标签：angularjs

我有一个很大的 angularjs html 页面，angularjs 的渲染会花费很多时间。所以页面一开始几乎是空白的，过了一会儿，它突然显示了一切。

我想知道有没有什么办法可以让快的部分先显示，慢的部分在后显示，这样用户就不会对空白页感到惊讶。

我做了一个简单的演示：

```
<!DOCTYPE html>

<html ng-app>
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>
</head>
<body ng-controller="Ctrl">
<button ng-click="go()">Go</button>
<hr/>
<div>Fast</div>
<button ng-repeat="name in fastNames">{{name}}</button>
<hr/>
<div>Slow</div>
<button ng-repeat="name in slowNames">{{name}}</button>
</body>
</html>
<script type="text/javascript">
    function Ctrl($scope) {
        $scope.fastNames = [];
        $scope.slowNames = [];

        $scope.go = function () {
          $scope.fast();
          $scope.slow();
        }

        $scope.fast = function() {
          $scope.fastNames = ["F1", "F2"];
        };

        $scope.slow = function() {
          for (var i = 0; i < 50000000; i++) {
            new Date();
          }
          $scope.slowNames = ["S1", "S2"];          
        }

    }
</script> 
```

您可以看到有两个部分——“快速名称”和“慢速名称”。我希望快的名字能尽快出现，然后是慢的名字。但目前，它们一开始不会出现，过一段时间，它们会一起出现。

我创建了一个现场演示：[http ://plnkr.co/edit/9lW2TbLBkCB1hhgBVGmo?p=preview](http://plnkr.co/edit/9lW2TbLBkCB1hhgBVGmo?p=preview)

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:39:45.803

正如评论中提到的，浏览器在返回之前不会有机会呈现`go()`（JavaScript 是单线程的）。拆分`go()`函数并将慢速部分放入一个单独的函数中，该函数通过 $timeout 异步调用。为确保浏览器在调用 $timeout 回调之前有机会呈现，请给 $timeout 50 毫秒的延迟。

```
$scope.go = function () {
   $scope.fast();
   $timeout(function() {
      $scope.slow();
   },50);  // give browser time to render
}; 
```

[普朗克](http://plnkr.co/edit/aguVEV4lbxZVTkVJmTPW?p=preview)

# ios - iOS 日志显示 NSArray 对象是 __NSDictionaryM

> ID：14994309
> 
> 赞同：1
> 
> 时间：2013-02-21T04:00:46.073
> 
> 标签：ios, objective-c, nsarray, nsdictionary

我正在尝试使用 NSArray 来存储数据，但是当我记录它的类时（因为它给了我错误）它返回`__NSDictionaryM`. 我唯一一次添加任何信息是当我这样做的时候

```
NSArray *a = [[NSArray alloc]initWithObjects:aa, nil]; 
```

对象`aa`是一个字符串。什么会将数组变成字典？

好的，我使用委托将此数组传递给不同的类：

```
for (CXMLElement *resultElement in [[p objectAtIndex:0] elementsForName:@"TrackDetail"]) {
NSString *aa = resultElement.stringValue;
NSArray *a = [[NSArray alloc]initWithObjects:aa, nil];
dispatch_async(dispatch_get_main_queue(), ^(void) {
[self.delegate XMLAvailable:a done:(a.count > 0)];
   }); 
```

然后我在另一堂课上这样做

```
- (void)XMLAvailable:(NSArray *)array done:(BOOL)done{
NSMutableArray *indexPaths = [NSMutableArray arrayWithCapacity:[array count]];
for(int i = [self.imageInfos count]; i < [self.imageInfos count] + [array count]; ++i) {
    NSIndexPath * indexPath = [NSIndexPath indexPathForRow:i inSection:0];
    [indexPaths addObject:indexPath];
}
NSLog(@"%@", array.class);
self.imageInfos = array;
NSLog(@"%@", self.imageInfos.class);
[self.tv insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationRight];

} 
```

但由于某种原因，在上述方法中，`array.class`日志`__NSDictionaryM`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:10:58.207

尝试在启用僵尸的情况下运行。如果您的数组意外地被释放并且字典被分配在同一地址，您会得到这样的症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:16:15.790

好的，事实证明我只需要在我的应用程序上重置一些东西，因为在恢复我的手机（它冻结并且不会重新启动）之后，一切都再次正常工作并且它们被记录为 NSArrays

# command - 理解cmd中的命令

> ID：14994310
> 
> 赞同：0
> 
> 时间：2013-02-21T04:00:50.643
> 
> 标签：command, cmd

> cd /d someDir && pathToJar.exe xf file.zip

这是我想要解释的命令。举个例子，

```
 cd /d c:\rf-jboss_pt2\instance\referral_pt2 && c:\rf-jboss_pt2\java\jdk1.7.0_03\bin\jar xf C:\CosmicInstallations\referral-jboss\referral-jboss-dist.zip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:10:07.980

我会尽力为你分解。有两个用 && 分隔的命令

&& -- 表示仅当符号前面的命令成功时才运行 && 后面的命令。

第一个命令：

```
cd /d c:\rf-jboss_pt2\instance\referral_pt2   

cd = change directory
/d = also cahnge drive 
c:\rf-jboss_pt2\instance\referral_pt2   is the new path 
```

如果成功，第二个命令运行：

```
c:\rf-jboss_pt2\java\jdk1.7.0_03\bin\jar xf C:\CosmicInstallations\referral-jboss\referral-jboss-dist.zip

c:\rf-jboss_pt2\java\jdk1.7.0_03\bin\jar is the name of the command (it could be a .bat, .exe or .com file)

xf = a command line parameter
C:\CosmicInstallations\referral-jboss\referral-jboss-dist.zip = a command line parameter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:12:21.027

```
cd /d someDir && anotherDir xf file.zip 
```

`cd /d someDir`表示将当前目录更改为 someDir。

`&&`: 它是和运算符

`anotherDir`: 从 anotherDir 执行命令

`xf`： 选项

`file.zip`: 参数

所以

```
cd /d c:\rf-jboss_pt2\instance\referral_pt2 && c:\rf-jboss_pt2\java\jdk1.7.0_03\bin\jar xf C:\CosmicInstallations\referral-jboss\referral-jboss-dist.zip 
```

表示：将当前目录更改为`c:\rf-jboss_pt2\instance\referral_pt2`，然后`c:\rf-jboss_pt2\java\jdk1.7.0_03\bin\jar`使用选项 xf 运行命令，参数为`C:\CosmicInstallations\referral-jboss\referral-jboss-dist.zip`

# ios - IOS XMPPFramework 连接到 Cisco IM Presence XMPP 服务器的问题

> ID：14994311
> 
> 赞同：0
> 
> 时间：2013-02-21T04:00:52.213
> 
> 标签：ios, objective-c, ios6, instant-messaging, xmppframework

我正在使用 RobbieHanson IOS XMPP 框架，并且能够使用显示具有存在状态的花名册的示例应用程序正确连接到 Google Talk。

但是，当我使用 XMPP 框架连接到 Cisco IM Presence 服务器（基于 XMPP）时，我能够连接到服务器，但是没有创建名册，并且在框架附带的 NSLog 中出现以下错误。

```
 NSLog:
  2013-02-18 20:32:07:015 iPhoneXMPP[26080:12f03] SEND: <iq type="set"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"/></iq>

  2013-02-18 20:32:07:064 iPhoneXMPP[26080:12f03] RECV: <iq xmlns="jabber:client" to="userid@cisco.com/312468361axcdf9887297cfd57d3e98474e447" type="error"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><resource>8222d2468361a8ff9887297cfd57d3e98474e447</resource></bind><error code="400" type="modify"><bad-request 
```

当我将此日志与从正确连接到 Cisco IM Presence 服务器的另一个 IM 客户端生成的日志（以下详细信息）进行对比时，问题似乎是该`<iq>`实体缺少该属性`<id>`

IM 客户端日志围绕连接的 IQ 设置：

```
<iq type='set' id='purple95a4a0c3'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'><resource>pidgin</resource></bind></iq> 
```

我想检查是否有办法为`<iq>`XMPPFramework 中的元素设置 id 属性和/或是否需要做其他事情来解决这个问题。

作为旁注，我注意到 Google Talk 无需在元素中使用 id 属性即可工作，而[http://xmpp.org/rfcs/rfc3920.html#stanzas-semantics-iq](http://xmpp.org/rfcs/rfc3920.html#stanzas-semantics-iq)`<iq>`上的 xmpp 规范表明 id 是强制性属性的元素。`<iq>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T10:16:22.387

你需要做，

allowSelfSignedCertificates = YES；

在 xmpp 框架中，然后你将连接到

# javascript - Sencha extjs 4.1 - 模型字段可以在配置中定义吗？

> ID：14994317
> 
> 赞同：0
> 
> 时间：2013-02-21T04:01:37.500
> 
> 标签：javascript, extjs, extjs4.1

我对 extjs 还很陌生。我声明了一个模型类“产品”。我只是不确定这个类的属性在哪里？字段或配置。使用 Sencha 4.1 向配置添加字段会给我 getter 和 setter 但这是正确的方法吗？以下哪两个是定义模型的首选方式？

```
Ext.define('MyApp.model.product', {
    extend: 'Ext.data.Model',,
    config: {
        color: '',
        price: 0,
}
}); 
```

或者

```
 Ext.define('MyApp.model.product', {
    extend: 'Ext.data.Model',,
    fields: [
        "color",
        "price" 
    ] 
 }); 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:28:42.867

您配置您的字段（并使用[`get()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-get)and [`set()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-set)）：

> 模型被定义为一组字段以及与模型相关的任意方法和属性。字段数组由 ModelManager 自动转换为 MixedCollection，所有其他函数和属性都复制到新模型的原型中。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)

# html - 接受属性中的值是否需要计算机知道 MIME 类型？

> ID：14994320
> 
> 赞同：0
> 
> 时间：2013-02-21T04:01:58.600
> 
> 标签：html, browser, mime-types, html-input

所以我有一个标准`<input type="file" accept="..."/>`，接受的地方是一大堆不同的 mime 类型。*我已经验证了服务器后端的文件类型，*但我想确保我没有过滤掉客户端 UI 上的有效文件。我意识到旧的浏览器根本不会过滤文件，这很好。我担心的是现代浏览器可能无法识别 mime 类型并过滤掉实际有效的文件。

所以我的问题基本上是，“接受”属性有多可靠？例如，如果未安装 microsoft office，浏览器会识别 .docx mime 类型吗？此外，某些文件类型有许多不同的可能的 mime 类型与之关联，如果我只列出其中一种 mime 类型有关系吗？

我不明白为什么规范最初使用mime-types，它会简单得多，我猜如果他们刚开始使用扩展名（比如chrome接受）会更可靠。

对于我目前使用的 mime 的完整列表：

```
application/msword,
application/vnd.openxmlformats-officedocument.wordprocessingml.document,
application/rtf,
application/msexcel,
application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
application/vnd.openxmlformats-officedocument.spreadsheetml.template,
application/vnd.ms-excel.template.macroEnabled.12,
application/vnd.ms-excel.sheet.macroEnabled.12,
text/csv,
application/mspowerpoint,
application/vnd.openxmlformats-officedocument.presentationml.presentation,
application/vnd.ms-powerpoint.presentation.macroEnabled.12,
application/vnd.ms-powerpoint,
application/vnd.openxmlformats-officedocument.presentationml.template,
application/vnd.openxmlformats-officedocument.presentationml.slideshow,
application/pdf,
image/jpg,
image/jpeg,
image/png,
image/bmp,
image/gif,
text/plain,
message/rfc822,
application/vnd.oasis.opendocument.text,
application/vnd.oasis.opendocument.spreadsheet,
application/vnd.oasis.opendocument.presentation,
application/visio,application/vnd.visio,
application/vst,
application/vnd.visio.webdrawing,
application/x-mspublisher 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:58:32.127

[该规范允许您使用扩展以及 mime 类型](http://www.w3.org/html/wg/drafts/html/master/single-page.html#attr-input-accept)

事实上，它实际上建议您*同时*使用mime-type 和 extension。

至于要求*操作系统*识别 mime 类型，这实际上没有意义，因为 mime 类型是 Internet 协议文件标识符。它实际上取决于用户代理（浏览器）对 mime 类型的支持。由于这是一个相当新的结构，如果浏览器只是通过在 mime 类型和扩展之间建立一个公共映射来最低限度地“支持”它，我不会感到惊讶。我无法想象浏览器会尝试统计所有可读文件以确定 mime 类型（根据我的经验，这甚至不接近可靠）。`accept`的意图似乎更多是关于改变文件上传对话框的外观，我怀疑任何浏览器都这样做了，尽管考虑到现在浏览器的发布速度有多快，我肯定是错的。

If you're still concerned, you could test yourself in common browsers since it really seems like it should be per user agent rather than per OS.

# python - Python优化用于计算欧几里德距离

> ID：14994322
> 
> 赞同：1
> 
> 时间：2013-02-21T04:02:12.873
> 
> 标签：python

这个函数在我的程序中运行了超过 200 万次。任何人都可以建议优化这个吗？x 和 y 是元组。

```
def distance(x,y):

    return sqrt((x[0]-y[0])*(x[0]-y[0])+(x[1]-y[1])*(x[1]-y[1])+(x[2]-y[2])*(x[2]-y[2])) 
```

我的尝试：我尝试使用 math.sqrt、pow 和 x**.5，但性能提升不大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:20:05.683

您可以通过不访问相同的 x[i] 元素并在本地绑定它来减少一些周期。

```
def distance(x,y):
    x0, x1, x2 = x
    y0, y1, y2 = y
    return sqrt((x0-y0)*(x0-y0)+(x1-y1)*(x1-y1)+(x2-y2)*(x2-y2)) 
```

例如，比较：

```
>>> import timeit
>>> timer = timeit.Timer(setup='''
... from math import sqrt
... def distance(x,y):
...    return sqrt((x[0]-y[0])*(x[0]-y[0])+(x[1]-y[1])*(x[1]-y[1])+(x[2]-y[2])*(x[2]-y[2]))
... ''', stmt='distance((0,0,0), (1,2,3))')
>>> timer.timeit(1000000)
1.2761809825897217 
```

和：

```
>>> import timeit
>>> timer = timeit.Timer(setup='''
... from math import sqrt
... def distance(x,y):
...    x0, x1, x2 = x
...    y0, y1, y2 = y
...    return sqrt((x0-y0)*(x0-y0)+(x1-y1)*(x1-y1)+(x2-y2)*(x2-y2))
... ''', stmt='distance((0,0,0), (1,2,3))')
>>> timer.timeit(1000000)
0.8375771045684814 
```

python wiki 上有更多[性能提示。](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:40:36.520

原来的：

```
>>> timeit.timeit('distance2((0,1,2),(3,4,5))', '''
... from math import sqrt
... def distance2(x,y):
...     return sqrt((x[0]-y[0])*(x[0]-y[0])+(x[1]-y[1])*(x[1]-y[1])+(x[2]-y[2])*(x[2]-y[2]))
... ''')
1.1989610195159912 
```

通用子表达式消除：

```
>>> timeit.timeit('distance((0,1,2),(3,4,5))', '''
... def distance(x,y):
...     d1 = x[0] - y[0]
...     d2 = x[1] - y[1]
...     d3 = x[2] - y[2]
...     return (d1 * d1 + d2 * d2 + d3 * d3) ** .5''')
0.93855404853820801 
```

优化开箱：

```
>>> timeit.timeit('distance((0,1,2),(3,4,5))', '''
... def distance(x,y):
...     x1, x2, x3 = x
...     y1, y2, y3 = y
...     d1 = x1 - y1
...     d2 = x2 - y2
...     d3 = x3 - y3
...     return (d1 * d1 + d2 * d2 + d3 * d3) ** .5''')
0.90851116180419922 
```

图书馆功能：

```
>>> timeit.timeit('distance((0,1,2),(3,4,5))', '''
... import math
... def distance(x,y):
...     x1, x2, x3 = x
...     y1, y2, y3 = y
...     d1 = x1 - y1
...     d2 = x2 - y2
...     d3 = x3 - y3
...     return math.sqrt(d1 * d1 + d2 * d2 + d3 * d3)
... ''')
0.78318595886230469 
```

点缀：

```
>>> timeit.timeit('distance((0,1,2),(3,4,5))', '''
... from math import sqrt
... def distance(x,y):
...     x1, x2, x3 = x
...     y1, y2, y3 = y
...     d1 = x1 - y1
...     d2 = x2 - y2
...     d3 = x3 - y3
...     return sqrt(d1 * d1 + d2 * d2 + d3 * d3)
... ''')
0.75629591941833496 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:41:36.127

scipy 具有欧几里得距离函数。你可能不会比这更快。

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.euclidean.html#scipy.spatial.distance.euclidean](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.euclidean.html#scipy.spatial.distance.euclidean)

```
from scipy.spatial.distance import euclidean
import numpy as np

# x and y are 1 x 3 vectors
x = np.random.rand(1,3) 
y = np.random.rand(1,3)
euclidean(x,y) 
```

编辑：实际上，通过 timeit 针对 OP 的纯 python distance() 函数运行它，这实际上在 python 浮点数上要慢得多。我认为 scipy 版本浪费了一些时间将浮点数转换为 numpy dtypes。至少可以说我很惊讶。

# routing - AngularJS + Base Href 区分大小写？

> ID：14994324
> 
> 赞同：11
> 
> 时间：2013-02-21T04:02:24.713
> 
> 标签：routing, angularjs, href, base

我很难理解为什么我的基本 href 似乎区分大小写。我有一个带有基本 href 的页面并使用 angularjs 路由。

html:

```
<html ng-app="app">
    <head>
        <base href="/Foo/"/>
    </head>
    <body>
        <div>Foo</div>
        <div ng-view></div>  
    </body>
</html> 
```

js：

```
var module = angular.module('app', []);

module.config(function ($routeProvider, $locationProvider) {
    $routeProvider
        .when('/Home/Page1', { templateUrl = 'partials/page1' })
        .otherwise({ redirectTo: '' });

     $locationProvider.html5Mode(true);
     $locationProvider.hashPrefix('!');
}); 
```

如果我导航到[http://www.example.com/Foo/](http://www.example.com/Foo/)，那很好。但是当我导航到[http://www.example.com/foo/](http://www.example.com/foo/)我得到一个角度错误：

```
Error: Invalid url "http://www.example.com/foo/", missing path prefix "/Foo" !
at Error (<anonymous>)
at Object.LocationUrl.$$parse (http://www.example.com/foo/Scripts/angular.js:4983:13)
at Object.LocationUrl (http://www.example.com/foo/Scripts/angular.js:5014:8)
at $LocationProvider.$get (http://www.example.com/foo/Scripts/angular.js:5387:21)
at Object.invoke (http://www.example.com/foo/Scripts/angular.js:2809:28)
at http://www.example.com/foo/Scripts/angular.js:2647:37
at getService (http://www.example.com/foo/Scripts/angular.js:2769:39)
at Object.invoke (http://www.example.com/foo/Scripts/angular.js:2787:13)
at $CompileProvider.directive (http://www.example.com/foo/Scripts/angular.js:3613:43)
at Array.forEach (native) angular.js:5582 
```

如果它有帮助/有所作为，则站点托管在 IIS 上并使用 MVC 4。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T02:33:59.900

您需要关闭 angularjs 路由提供程序的区分大小写。

请查看此功能的详细信息： [添加`caseInsensitiveMatch`url 匹配选项](https://github.com/angular/angular.js/commit/5e18a15fb01d2e81adda68503754289fa9655082)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-25T14:25:20.557

我正在使用 UI 路由器，因此无法使用为 ngRoute 建议的方法解决路由区分大小写问题。[https://github.com/angular-ui/ui-router/issues/197](https://github.com/angular-ui/ui-router/issues/197)上的解决方案 对我有用，但不适用于原始问题的基本 href 问题。

我能够通过为 $browser 添加一个装饰器来解决这个问题，它将 basehref 和 url 设置为小写。如果您查看导致问题的 beginWith 方法中导致问题的被比较值的来源，您会发现它们最终源自 $browser。

最终，该解决方案解决了路由和基本 href 区分大小写问题，并且不需要 $urlRouterProvider 建议。因此，如果您的 DOM 中没有明确设置的基本 href 元素，则该链接中建议的 $urlRouterProvider 规则将解决您的问题。否则，这将解决基本 href 和路由。

使用 ui-router 解决基本 href 和路由问题的完整解决方案：

```
 $provide.decorator('$browser', [
                    '$delegate', function($delegate) {

                        var _baseHref = $delegate.baseHref,
                            _url = $delegate.url;

                        $delegate.baseHref = function() {
                            return angular.lowercase(_baseHref());
                        };
                        $delegate.url = function(url, replace) {
                            // no need to modify the setter
                            if (url) {
                                return _url(url, replace);
                            }
                            // just lowercase the getter
                            return angular.lowercase(_url());
                        };
                        return $delegate;
                    }
                ]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-01T11:27:58.693

有同样的问题，但有不同的解决方案。这对我有用，并且不会干扰路由、 beginWith 或事物是/应该是小写的假设。

把它放在 angular 初始化之前（比如在你的 html 页面的头部）

```
// Fix base url being case sensitive
(function () {
     var base = document.querySelector("base");
     var normalized = RegExp(base.href, "i").exec(location.href);
     base.href = normalized ? normalized[0] : base.href;
}()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-20T13:15:45.180

这个问题的一个很好的解决方案是为 $route 创建一个装饰器并设置规则如何不区分大小写。通过这种方式，您不必为每个“何时”创建字段 caseInsensitiveMatch。在此 URL 中，您可以找到有关此解决方案的更多信息：http: [//iranreyes.com/angularjs-decorating-route](http://iranreyes.com/angularjs-decorating-route)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-27T16:21:33.390

截至今天，caseInsensitiveMatch 不包含在 AngularJS 1.0.7 的稳定版本中，但它包含在不稳定版本 1.1.5 中（[https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular .min.js](https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js) ) 测试并按预期工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-27T01:20:10.130

接受的答案将不起作用，因为它只会影响路由而不影响基本 url。对于 Angular 开发人员来说，这是一个看起来“太难”修复的错误。参考——https: [//github.com/angular/angular.js/issues/4056](https://github.com/angular/angular.js/issues/4056)

要自己解决这个问题，您需要重写 angular.js 中的 beginWith() 函数来比较小写字母——

```
function beginsWith(begin, whole) {
	if (whole.toLowerCase().indexOf(begin.toLowerCase()) === 0)
	{
    return whole.substr(begin.length);
  }
}
```

# mysql - 来自两个表格的份额百分比计算摘要

> ID：14994330
> 
> 赞同：0
> 
> 时间：2013-02-21T04:03:08.723
> 
> 标签：mysql, codeigniter, activerecord

我想从两个表中返回份额百分比计算的摘要结果，但我不知道如何执行此操作。我的表如下：

餐桌**_**

```
---+-----------+---------+-----------+---------+-----------+---------+----------+
id | product_1 | share_1 | product_2 | share_2 | product_3 | share_3 |  amount  |
---+-----------+---------+-----------+---------+-----------+---------+----------+
 1 |    3      |   50    |     2     |    50   |           |         |  5000    |
 2 |    2      |   50    |     1     |    25   |     4     |   25    |  10000   |
 3 |    5      |   50    |     4     |    50   |           |         |  7000    |
---+-----------+---------+-----------+---------+-----------+---------+----------+ 
```

餐桌**用品**

```
---+-----------+
id | name      |
---+-----------+
 1 | Book      |
 2 | Pen       |
 3 | Ruler     |
 4 | Pencil    |
 5 | Calendar  |
---+-----------+ 
```

我希望结果是这样的：

```
Product_name | Total
-------------+----------
Book         | 2500
Pen          | 7500
Ruler        | 2500
Pencil       | 6000
Calendar     | 3500
-------------+----------
Grand Total  | 22000 
```

到目前为止，我已经尝试过这个查询

```
$this->db->select('t1.name as product_name, sum(t2.amount) as total');
$this->db->from('products t1');
$this->db->join('pa t2', 't2.product_1 = t1.id OR t2.product_2 = t1.id OR t2.product_3 = t1.id', 'left');
$this->db->group_by('t1.name');
$query = $this->db->get(); 
```

SQL 小提琴：[http ://sqlfiddle.com/#!2/471c4/1](http://sqlfiddle.com/#!2/471c4/1)

但它没有返回我想要的结果，因为没有计算每个产品的份额百分比。

有没有办法只用 SQL 查询返回我想要的结果？还是我必须用 PHP 递归地进行计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:09:53.050

您可以通过首先取消透视数据来进行计算：

```
select p.name, sum(amount)
from ((select product_1 as pid, amount*share_1 / 100.0 as amount from pa) union all
      (select product_2 as pid, amount*share_2 / 100.0 as amount from pa) union all
      (select product_3 as pid, amount*share_3 / 100.0 as amount from pa)
     ) pp join
     product p
     on pp.pid = p.id
group by p.name 
```

您可以在应用程序中或使用`ROLLUP`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:23:35.507

试试下面的 SQL：

```
SELECT product_name, SUM(percentage)
FROM
(
    SELECT  t1.name as product_name, t2.share_1, t2.amount, (t2.share_1*t2.amount)/100 as percentage        
    FROM products t1 JOIN pa t2 ON  t2.product_1 = t1.id
    GROUP BY t1.name
    UNION
    SELECT  t1.name as product_name, t2.share_2, t2.amount, (t2.share_2*t2.amount)/100         as percentage        
    FROM products t1 JOIN pa t2 ON  t2.product_2 = t1.id
    GROUP BY t1.name
    UNION
    SELECT  t1.name as product_name, t2.share_3, t2.amount, (t2.share_3*t2.amount)/100 as percentage        
    FROM products t1 JOIN pa t2 ON  t2.product_3 = t1.id
    GROUP BY t1.name
) as temp_table
GROUP BY product_name 
```

[**SqlFiddle 演示**](http://sqlfiddle.com/#!2/471c4/17)

# c# - 将多个参数传递给java脚本函数

> ID：14994334
> 
> 赞同：0
> 
> 时间：2013-02-21T04:03:33.083
> 
> 标签：c#, javascript, asp.net

我想通过像这样的代码将多个参数传递给java脚本函数，我只想传递 `<script type="text/javascript"> function addmultiple(param1 ){}</script>`

例如：1,john,39,200,'insert';2,peter,30,300,'insert'（这些字段应传入上述参数）。

在后面的代码中，我通过网格视图绑定所有数据。我想通过分号分隔将值传递给java脚本函数。之后应该绑定下一行。我在 asp.net 中做这些

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:06:34.223

它应该只是：

```
<script type="text/javascript"> function addmultiple(param1, param2, param3)</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:13:26.843

```
<script>
  var param1='1,'+'name1,'+'30,'+'300,'+'insert,';
  var param1='2,'+'name2,'+'40,'+'400,'+'insert,';
  addMultiple(param1,param2);

  function addMultiple(param1,param2){
   //your code
  }
<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:15:22.430

**Javascript**

```
<script>
function addmultiple(param1)
{
    alert(param1);
}
</script> 
```

**调用函数**

```
<script>
function insertData()
{
    //create an two dimensional array to store data
    var arr1= [[1,'john',39,200,'insert'],[2,'peter',30,300,'insert']];

    //addmultiple(1,'john',39,200,'insert'); //for single row

    //loop here for passing multiple rows
    for(var i=0;i<arr1.length;i++)
    {
    var row='';
        for(var j=0;j<5;j++)
        {
            row = row + ',' + arr1[i][j];
        }
        addmultiple(row);
    }
}
</script> 
```

**html代码**

```
<input type="button" value="b1" onclick="insertData();"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:43:09.487

如果您的约束是您只需要传递一个参数，您还可以创建一个对象并将参数作为属性添加到该对象并单独传递该对象。

# asp.net-mvc-4 - 异步action方法返回一个Task，不能同步执行

> ID：14994335
> 
> 赞同：2
> 
> 时间：2013-02-21T04:03:36.287
> 
> 标签：asp.net-mvc-4, async-await

此代码在我的本地机器上运行良好

```
public async Task<ActionResult> teststuff()
    {

        using (var client = new HttpClient())
        {

            var twitter = await client.GetStringAsync("http://www.twitter.com");
            Response.Write(twitter);
        }

        return View();
    } 
```

但是，当我上传到服务器时，我得到了错误响应

> ## “/”应用程序中的服务器错误。
> 
> 异步操作方法“teststuff”返回一个不能同步执行的任务。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：异步操作方法“teststuff”返回一个无法同步执行的任务。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：异步操作方法'teststuff'返回一个Task，无法同步执行。]
> System.Web.Mvc.Async.TaskAsyncActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 2 parameters) +39 System.Web.Mvc.<> c__DisplayClass13.b__10() +120 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func 1 filters, ActionDescriptor actionDescriptor, IDictionary`2 参数) +307 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext,字符串动作名称）+688 NotFoundMvc.ActionInvokerWrapper.InvokeActionWith404Catch（控制器上下文控制器上下文，字符串动作名称）+54`2 parameters) +125
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`
> `1 continuation) +637
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`
> 
> NotFoundMvc.ActionInvokerWrapper.InvokeAction(ControllerContext controllerContext, String actionName) +19
> System.Web.Mvc.<>c__DisplayClass1d.b__19() +40
> System.Web.Mvc.Async.<>c__DisplayClass1.b__0() +15
> System.Web. Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53 System.Web.Mvc.Async.<>c__DisplayClass4.b__3(IAsyncResult ar) +15
> System.Web.Mvc.<>c__DisplayClass8.b__3(IAsyncResult asyncResult) +42
> System.Web .Mvc.Async.<>c__DisplayClass4.b__3(IAsyncResult ar) +15
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) + 288
> 
> -------------------------------------------------- ------------------ 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

我的服务器上缺少一些东西，但无法找出它是什么，任何帮助将不胜感激。

我尝试在服务器上重新安装 .net framework 4.5，但没有效果。但是我确实在服务器上注意到它同时具有

Microsoft .NET Framework 4 多目标包和 Microsoft .NET Framework 4.5 多目标包

不知道我是否应该删除4个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:55:50.993

很奇怪，我刚刚删除了网站中的所有文件，然后重新发布了该网站，一切正常。

我认为这可能是因为我最近将该站点从 MVC3 站点升级到 MVC4，并且目录中的 MVC3 站点可能留下了一个奇怪的 DLL。

感谢斯蒂芬的建议，它给了我清理网站并重新升级它的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-06T00:50:39.417

`ControllerActionInvoker`为了使用 Ninject 将依赖项注入 MVC 属性，在子类化后我遇到了这个错误。此页面描述了执行此操作的过程：http: [//codeclimber.net.nz/archive/2009/02/10/how-to-use-ninject-to-inject-dependencies-into-asp.net-mvc.aspx](http://codeclimber.net.nz/archive/2009/02/10/how-to-use-ninject-to-inject-dependencies-into-asp.net-mvc.aspx)

我的控制器中有一些异步方法，当调用这些异步方法时出现此错误。事实证明，我不需要子类化`ControllerActionInvoker`，而是`System.Web.Mvc.Async.AsyncControllerActionInvoker`.

更改基类后，我的代码很满意并且运行良好。

# python - 如何将字符串“1157903”转换为十进制“1.157903”

> ID：14994341
> 
> 赞同：1
> 
> 时间：2013-02-21T04:05:00.053
> 
> 标签：python, string, decimal

我想知道如何将没有小数点的字符串转换成小数点，例如在python中将“1157903”转换为“1.157903”

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:06:05.887

```
s = "1157903"
s2 = '{}.{}'.format(s[0],s[1:]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T04:22:57.083

更多方法：

```
>>> s = '115793'
>>> s[0] + '.' + s[1:]
'1.15793' 
```

和

```
>>> s = '115793'
>>> '.'.join([s[0], s[1:]])
'1.15793' 
```

根据您添加到问题的评论进行更新：

```
from bisect import bisect

_METRIC_PREFIXES = [  # must be in ascending order for bisect
   ( 0,   ''),  # <blank>
   ( 1, 'da'),  #  deca
   ( 2,  'h'),  #  hecto
   ( 3,  'k'),  #  kilo
   ( 6,  'M'),  #  mega
   ( 9,  'G'),  #  giga
   (12,  'T'),  #  tera
   (15,  'P'),  #  peta
   (18,  'E'),  #  exa
   (21,  'Z'),  #  zetta
   (24,  'Y'),  #  yotta
]

_BREAKPOINTS = tuple(10.**item[0] for item in _METRIC_PREFIXES)

def format_numeric_string(s, prec=1):
    v = int(s)
    i = bisect(_BREAKPOINTS, v)-1
    d = _BREAKPOINTS[i]
    s = _METRIC_PREFIXES[i][1]
    return '{:.{prec}f}{suffix}'.format(v/d, suffix=s, prec=prec)

if __name__ == '__main__':
    import random
    randigit = lambda: random.choice('123456789')
    n_digit_string = lambda n: ''.join(d for _ in xrange(n) for d in randigit())

    for s in (n_digit_string(prefix[0]+1) for prefix in _METRIC_PREFIXES):
        print '{:,d} --> {}'.format(int(s), format_numeric_string(s)) 
```

不同长度随机数字字符串的示例输出：

```
3 --> 3.0
18 --> 1.8da
389 --> 3.9h
3,765 --> 3.8k
2,152,457 --> 2.2M
1,965,289,562 --> 2.0G
7,624,947,619,324 --> 7.6T
7,424,298,578,879,224 --> 7.4P
5,546,663,458,831,949,667 --> 5.5E
4,794,459,711,325,322,715,236 --> 4.8Z
9,992,885,249,921,967,199,174,883 --> 10.0Y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:35:41.160

新的澄清，新的答案。我可能会这样处理：

```
import math
SUFFIXES = ['', 'K', 'M']

def convert(s):
    num = s[:len(s) % 3 or 3]
    return '{}{}'.format(num, SUFFIXES[int(math.ceil(len(s) / 3.0) - 1)])

In [1]: from n import convert
In [2]: print convert('123')
123
In [3]: print convert('123123')
123K
In [4]: print convert('12123')
12K
In [5]: print convert('123123123')
123M 
```

您可以通过结合此答案和其他答案来计算小数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:09:56.190

`"1.157903"` isn't a decimal, it's a string.

Are you looking to convert a string to a number, or the string representation of a number to a string with a decimal in it?

If it's the former, then:

```
>>> s = '115793'
>>> float(s) / 10 ** (len(s) - 1)
1.15793 
```

Otherwise:

```
>>> '{}.{}'.format(s[0], s[1:])
'1.15793' 
```

Another method to avoid copying strings is to use a `bytearray`:

```
>>> ba = bytearray('12345')
>>> ba.insert(1, ord('.'))
>>> ba
bytearray(b'1.2345') 
```

# php - 如何在上传时将音频转换为“.WAV”格式

> ID：14994342
> 
> 赞同：1
> 
> 时间：2013-02-21T04:05:05.627
> 
> 标签：php, android, file-upload, wav, audio-recording

我正在开发一个应用程序，用户可以通过以下方式将音频文件上传到服务器

在手机中使用任何安卓版本。通过使用内置的安卓录音机，他们可以

仅创建`.amr`音频格式。但我需要`.wav`一些格式的音频

服务器端的电话使用。

android中有什么方法可以`.wav`在内置的android录音机中创建格式

或者在服务器端是否可以将任何音频文件格式转换为`.wav`使用`PHP`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:13:15.920

我建议在服务器端进行转换以节省未压缩文件传输中的带宽。

您可以使用[FFMPEG](http://www.ffmpeg.org/)为您进行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:08:03.647

最好的方法是使用 FFMPEG 作为 php 扩展，或者您可以直接运行 ffmpeg 进行转换。使用 php 的简单方法是：

```
<?php exec(ffmpeg -i audio.amr testwav.wav) ?> 
```

但是你可能会遇到一些困难。所以你应该添加一些参数。您可以使用“-ar”设置音频采样率（以赫兹为单位），“-ab”设置音频比特率（以比特/秒为单位）等。以下是示例：

```
<?php exec("ffmpeg -i audio.amr -ar 22050 -ab 32 -map_meta_data audio.wav:audio.amr audio.wav"); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T05:42:51.020

我认为 PHP 是最好的选择，你可以使用[FFMPEG](http://www.ffmpeg.org/)，看看这些页面：

1.  [http://wiki.dreamhost.com/FFmpeg](http://wiki.dreamhost.com/FFmpeg)
2.  [http://wiki.dreamhost.com/Php-ffmpeg](http://wiki.dreamhost.com/Php-ffmpeg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:24:39.510

您也可以`FFMPEG`在`Android`设备上使用。这可能是一个棘手的设置（`NDK`需要一些配置），但这已通过`JavaCV`（可[在此处](http://code.google.com/p/javacv/)获得）大大简化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:03:15.930

我强烈建议您使用 3rd 方在线格式转换 API 来完成这项工作，但如果您的服务器不受资源限制，您可以`FFMPEG`按照 Brad 的建议访问。
您可以使用在线 API，如[online-convert](http://api.online-convert.com/)或找到最适合您的 API。

# iphone - 无法从 AppDelegate 自定义我的标签栏

> ID：14994350
> 
> 赞同：0
> 
> 时间：2013-02-21T04:05:51.440
> 
> 标签：iphone, ios, uitabbarcontroller, customization, tabbar

我想为我的应用程序制作一个自定义标签栏，并且我已经尝试将我的代码放在第一个视图控制器中并且它可以工作！但这是问题所在，我想声明并将我的代码放在 Appdelegate.m 中，但是当我运行它时，它只显示一个没有图像的黑色标签栏控制器。为了您的信息，我从情节提要中嵌入了我的标签栏控制器。

这是代码

```
 UIImage *selectedImage0   = [UIImage imageNamed:@"img1.png"];
    UIImage *unselectedImage0 = [UIImage imageNamed:@"img1hov.png"];

    UIImage *selectedImage1   = [UIImage imageNamed:@"img2.png"];
    UIImage *unselectedImage1 = [UIImage imageNamed:@"img2hov.png"];

    UIImage *selectedImage2   = [UIImage imageNamed:@"img3.png"];
    UIImage *unselectedImage2 = [UIImage imageNamed:@"img3hov.png"];

    UIImage *selectedImage3   = [UIImage imageNamed:@"img4.png"];
    UIImage *unselectedImage3 = [UIImage imageNamed:@"img4hov.png"];

    UIImage *selectedImage4   = [UIImage imageNamed:@"img5.png"];
    UIImage *unselectedImage4 = [UIImage imageNamed:@"img5hov.png"];

    UITabBar *tabBar = self.tabBarController.tabBar;
    UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:2];
    UITabBarItem *item3 = [tabBar.items objectAtIndex:3];
    UITabBarItem *item4 = [tabBar.items objectAtIndex:4];

    tabBar.backgroundImage = [UIImage imageNamed:@"back_menu.png"];

    [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
    [item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
    [item3 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3];
    [item4 setFinishedSelectedImage:selectedImage4 withFinishedUnselectedImage:unselectedImage4]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:40:57.310

通过以下链接，1) [http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)

2) [http://www.simplecode.me/2011/12/05/tab-based-ios-apps-uitabbarcontroller/](http://www.simplecode.me/2011/12/05/tab-based-ios-apps-uitabbarcontroller/)

3) [http://sugartin.info/2011/07/01/customizing-tab-bar/](http://sugartin.info/2011/07/01/customizing-tab-bar/)

4) [http://code4app.net/ios/TabBar-with-Expands/5004e0206803fa546a000001](http://code4app.net/ios/TabBar-with-Expands/5004e0206803fa546a000001)

5) [http://www.guerrillawebsitedesign.co.uk/wordpress/index.php/2010/09/30/how-to-create-a-custom-uitabbarcontroller-for-the-iphone-with-different-background-图像和图标-part-1-2/](http://www.guerrillawebsitedesign.co.uk/wordpress/index.php/2010/09/30/how-to-create-a-custom-uitabbarcontroller-for-the-iphone-with-different-background-images-and-icons-part-1-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:04:30.463

该代码对我来说看起来不错。如何在 appDelegate 中`UIViewController`添加？`UITabBarController`不是这样吗？

```
//appDelegate.h
@property (nonatomic, strong) SomeViewController *viewController;
@property (nonatomic, strong) UITabBarController *tabBarController;
//and synthesize those

//appDelegate.m
self.viewController = [[SomeViewController alloc]  initWithNibName:@"SomeViewController" bundle:nil];

UITabBarController *tabBarController = [[UITabBarController alloc] init];
[tabBarController setViewControllers:[NSArray arrayWithObjects:self.viewController, nil]; 
```

您可以通过使用从任何地方访问`self.tabBarController`并`self.viewController`驻留在 appDelegate 中`((AppDelegate *)[UIApplication sharedApplication].delegate)`

# batch-file - Pass all files in directory that match criteria to a program

> ID：14994355
> 
> 赞同：1
> 
> 时间：2013-02-21T04:06:28.810
> 
> 标签：batch-file

In windows explorer when I drag and drop 100 files over a batch file, I get an error saying that the "data area passed to a system call was too small"

I generated the batch file to take 100 arguments like so, thinking it would work

`MyProg.exe %1 %2 %3 %4 %5 ... %100`

MyProg takes a bunch of paths and does things to them.

So now my solution is

```
for %%X in (*.my_ext) do (
    MyProg.exe %%X
) 
```

But that is initializing my program again and again since I am just passing one file to it, which sort of defeats the purpose of accepting an arbitrary number of arguments and this start-up + finish is slowing things down.

Ideally, I would like to just pass all files to my program and let it run. How would I accomplish this?

EDIT:

One idea I'm going for is this one: [How to concatenate strings in a Windows batch file?](https://stackoverflow.com/questions/2027070/how-can-you-concatenate-strings-in-a-windows-batch-file)

My solution now looks like this. I have two batch files `get_files.bat` and `main.bat`

`get_files.bat`

```
@echo off
set myvar=myProg.exe
for /r %%i in (*.my_ext) DO call :concat "%%i"
echo %myvar%
goto :eof

:concat
set myvar=%myvar% %1
goto :eof 
```

`main.bat`

```
call get_files.bat > out.bat
call out.bat 
```

I first create the command I want to call, and then I call it. This allows me to pass 100's of paths that match the given crieria to my program, though it seems like at some point I reach the limit on how long the input string can be.

The ideal solution would look something like building as long of a list as possible and passing that list to the program, and then repeat until all files have been processed. The files may be searched recursively, etc.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T11:08:35.563

Microsoft 已发布支持文章[命令提示符 (cmd.exe) 命令行字符串限制](http://support.microsoft.com/kb/830473)。

> 在运行 Microsoft Windows XP 或更高版本的计算机上，您可以在命令提示符处使用的最大字符串长度为 8191 个字符。在运行 Microsoft Windows 2000 或 Windows NT 4.0 的计算机上，您可以在命令提示符处使用的最大字符串长度为 2047 个字符。

避免在执行具有许多文件的应用程序时出现这种限制的最佳方法是使用[Andriy M](https://stackoverflow.com/users/297408/andriy-m)也建议的列表文件。

例如，WinRAR 将文件名`@`以列表文件的名称开头，其中包含要压缩/提取的文件的名称。

文本编辑器 UltraEdit 支持命令行选项`/f"name of list file"`以逐行打开指定列表文件中列出的所有文件。

并且文件管理器 Total Commander`%L, %l, %F, %f, %D, %d, %WL, %WF, %UL, %UF`在命令行中支持由 Total Commander 调用的应用程序。在其中一个占位符出现的情况下，Total Commander 在临时文件的目录中创建一个列表文件，其中将所选文件的名称逐行写入其中，然后使用此列表文件的名称启动应用程序。Total Commander 甚至会监督启动的应用程序，并在应用程序终止后删除列表文件。

我认为，在您的情况下，您的应用程序最有可能在逐行处理此文件中列出的所有文件后删除列表文件本身。

# sql-server - 获取每个不同列值的前 5 个

> ID：14994357
> 
> 赞同：5
> 
> 时间：2013-02-21T04:06:40.097
> 
> 标签：sql-server, sql-server-2008, tsql

假设有一个这样的数据集

```
Grp   | Name (Unique)
A     | Joe
B     | Bob
C     | Jill
B     | James 
```

如果每组（A，B，C）大约有 50 个，我如何返回一个只有每组前 5 个的结果而不做这样的事情

```
SELECT TOP 5 * FROM TABLE WHERE Grp = 'A' UNION ALL
SELECT TOP 5 * FROM TABLE WHERE Grp = 'B' UNION ALL
SELECT TOP 5 * FROM TABLE WHERE Grp = 'C' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T04:12:08.113

尝试

```
SELECT Grp, Name FROM(
 SELECT Grp, Name, RANK() OVER (Partition By Grp ORDER By Name DESC) as rankname
   FROM YourTable)
    WHERE rankname <= 5 
```

编辑：我认为这就是你想要的。如果不是，请发表评论，我们可以解决它。

# javascript - 需要鼠标位置的图像/形状

> ID：14994358
> 
> 赞同：0
> 
> 时间：2013-02-21T04:06:45.673
> 
> 标签：javascript, jquery, highcharts, highstock

我目前正在做一个研究项目，我需要一点帮助。由于我只是 JS/Highcharts 的新手，这个问题对许多人来说似乎很基础。我想在鼠标位置显示一个圆圈（即每当鼠标悬停在图表上时）。

当我单击鼠标（mousedown）时，我希望圆圈停留在该位置，此后圆圈不跟随鼠标位置，而是停留在鼠标点击位置。

我相信可以使用[renderer.circle()](http://api.highcharts.com/highstock#Renderer.circle%28%29)来制作圆圈。并且鼠标位置可以从jQuery[函数](http://api.jquery.com/mousemove/)中获取。但我需要一个逻辑来将它们合并到 HighStocks 中。

任何帮助将不胜感激。如果您可以根据演示链接（jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick/）提供解决方案，那就是惊人的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:46:14.193

它并不完美（有点不稳定），但以下内容应该可以帮助您入门：

```
// setup `chart` object ...

var circle = chart.renderer.circle(0, 0, 5).attr({
    fill: 'blue',
    stroke: 'black',
    'stroke-width': 1
}).add()
  .toFront()
  .hide();

var stuck = false;

$(chart.container).mousemove(function(event){
    circle.show();

    if (stuck) {
        return;
    }

    circle.attr({
        x: event.offsetX,
        y: event.offsetY
    });
});

$(chart.container).click(function(event){
    stuck = true;

    circle.attr({
        x: event.offsetX,
        y: event.offsetY
    });
}); 
```

这是在行动：http: [//jsfiddle.net/Ukh5j/](http://jsfiddle.net/Ukh5j/)

# php - PHP：动态嵌套的无序列表

> ID：14994362
> 
> 赞同：0
> 
> 时间：2013-02-21T04:07:03.493
> 
> 标签：php, html-lists, performance

我目前正在回显来自查询的数组，我需要将它们呈现在嵌套的无序列表中。我正在尝试找到一种方法来无限地执行此过程，因为我目前正在手动回显每个嵌套的 ul（如果它们有的话），直到我手动编码的深度。如果有办法自动回显 ul 的深度“n”，请帮助我。

这是我目前的逻辑，只回显到深度 5：

```
<ul class="parent_tree"><?php
  foreach($category_tree as $category_level_1)
  {
    echo '<li><a href="#">' . $category_level_1['name'] . '</a>';

    if(array_key_exists('children', $category_level_1))
    {
      echo '<ul>';

      foreach($category_level_1['children'] as $category_level_2)
      {
        echo '<li><a href="#">' . $category_level_2['name'] . '</a>';

        if(array_key_exists('children', $category_level_2))
        {
          echo '<ul>';

          foreach($category_level_2['children'] as $category_level_3)
          {
            echo '<li><a href="#">' . $category_level_3['name'] . '</a>';

            if(array_key_exists('children', $category_level_3))
            {
              echo '<ul>';

              foreach($category_level_3['children'] as $category_level_4)
              {
                echo '<li><a href="#">' . $category_level_4['name'] . '</a>';

                if(array_key_exists('children', $category_level_4))
                {
                  echo '<ul>';

                  foreach($category_level_4['children'] as $category_level_5)
                  {
                    echo '<li><a href="#">' . $category_level_5['name'] . '</a>';

                    //level 6 goes here

                    echo '</li>';
                  }

                  echo '</ul>';
                }

                echo '</li>';
              }

              echo '</ul>';
            }

            echo '</li>';
          }

          echo '</ul>';
        }

        echo '</li>';
      }

      echo '</ul>';
    }

    echo '</li>';
  }
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:15:01.337

尚未对其进行测试，但您想为此使用递归。基本上，您继续使用不同的参数调用相同的函数。当没有更多子数组时，它将遍历所有内容并退出。

```
function recursive_list($category) {
    echo '<ul>';
    foreach($category as $item){
        echo '<li><a href="#">' . $item['name'] . '</a>';
        if(array_key_exists('children', $item)) {
            recursive_list($item);
        }
    }
} 
```

# android - NPE when trying to access variable using Singleton

> ID：14994364
> 
> 赞同：0
> 
> 时间：2013-02-21T04:07:10.003
> 
> 标签：android, nullpointerexception, singleton

I am working on a project for college and I am using the Singleton Design Pattern to globally access a variable from any activity within my application.

I am getting this error when I run my application:

```
java.lang.NullPointerException at com.example.waitronproto9.SectionsActivity$2.onClick(SectionsActivity.java:80) 
```

This is the line of code it relates to:

```
Order.getInstance().setTableNumber(table); 
```

This is my entire `SectionsActivity`:

```
public class SectionsActivity extends Activity{

    LayoutInflater inflater;
    ActionBar ab;
    Button homeBtn;
    Button viewBtn;
    Button langBtn;

    ImageView callWaiterBtn;

    public static Order order;
    public static EditText tableNum;
    public static EditText coverNum;
    int table;
    int covers;

    private OrderApplication app;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_sections);

        Dialog d = createDialog();
        d.show();

        callWaiterBtn = (ImageView)findViewById(R.id.callWaiter);
        callWaiterBtn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(v.getContext(), "A Waiter is on their way!",
                            Toast.LENGTH_SHORT).show();
                }
        });
    }

    public Dialog createDialog(){
        AlertDialog.Builder builder = new AlertDialog.Builder(SectionsActivity.this);

        View v = getLayoutInflater().inflate(R.layout.order_dialog, null);
        builder.setView(v);

        tableNum = (EditText)v.findViewById(R.id.numberEntry);
        coverNum = (EditText)v.findViewById(R.id.coversEntry);

        builder.setMessage("Order Information");
        builder.setPositiveButton("Confirm", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int id) {
                    // Create order object in here
                    table = Integer.parseInt(tableNum.getText().toString());
                    covers = Integer.parseInt(coverNum.getText().toString());
                    Order.getInstance().setTableNumber(table);
                    Order.getInstance().setCoverNumber(covers);
                    Toast.makeText(SectionsActivity.this, "Order Created",
                            Toast.LENGTH_SHORT).show();
                }
        });

        return builder.create();
    }
} 
```

This is the `Order` class:

```
public class Order {

    int tableNumber;
    int coverNumber;
    double amount;
    List<Dish> orderItems;

    private static Order instance;

    // Constructors hidden because it is singleton...
    private Order(int tableNumber, int coverNumber, double amount,
            List<Dish> orderItems) {
        super();
        this.tableNumber = tableNumber;
        this.coverNumber = coverNumber;
        this.amount = amount;
        this.orderItems = orderItems;
    }

    private Order() {
        super();
        orderItems = new ArrayList<Dish>();
    }

    // SET THE INSTANCE
    public static void initInstance() {
        if (instance == null) {
            instance = new Order();
        }
    }

    // RETURN INSTANCE
    public static Order getInstance(){
        return instance;
    }

    // Getters and Setters
    public int getTableNumber() {
        return tableNumber;
    }

    public void setTableNumber(int tableNumber) {
        this.tableNumber = tableNumber;
    }

    public int getCoverNumber() {
        return coverNumber;
    }

    public void setCoverNumber(int coverNumber) {
        this.coverNumber = coverNumber;
    }

    public double getAmount() {
        return amount;
    }

    public void setAmount(double amount) {
        this.amount = amount;
    }

    public List<Dish> getOrderItems() {
        return orderItems;
    }

    // Add to order
    public void addToOrder(Dish d){
        this.orderItems.add(d);
    }

    public void removeFromOrder(int position){
        this.orderItems.remove(position);
    }

    public void setOrderItems(List<Dish> orderItems) {
        this.orderItems = orderItems;
    }
} 
```

This is the `OrderApplication` class:

```
public class OrderApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        initSingletons();
    }

    protected void initSingletons(){
        Order.initInstance();
    }
} 
```

Can anyone see where I am going wrong? Any advice is much appreciated!

STACK TRACE:

```
02-21 04:06:14.559: E/AndroidRuntime(29562): FATAL EXCEPTION: main
02-21 04:06:14.559: E/AndroidRuntime(29562): java.lang.NullPointerException
02-21 04:06:14.559: E/AndroidRuntime(29562):    at com.example.waitronproto9.SectionsActivity$2.onClick(SectionsActivity.java:80)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at android.os.Looper.loop(Looper.java:137)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-21 04:06:14.559: E/AndroidRuntime(29562):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:12:50.233

你还没有实例化你的`Order`. 您需要在尝试访问其方法之前执行此操作。

在你的课堂上尝试这样的事情`Order`：-

```
//RETURN INSTANCE
public static Order getInstance(){
    initInstance(); // Instantiate and then return.
    return instance;
} 
```

**建议**：-

在你的`SectionsActivity`，既然你已经声明`public static Order order;`了，为什么不这样使用它： -

```
order = Order.getInstance();
order.setTableNumber(table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:14:27.983

在 getInsance() 中调用 initInstance()。

虽然，您可能需要重新考虑使用单例。关于这是否是好的做法存在一些争论，如果没有看到您的整个应用程序，我不会发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:50:09.780

R.Js 的建议确实消除了 NPE，但您的代码也应该可以工作，因为 OrderApplication 在创建时调用 Order.initInstance()，因此一旦 SectionsActivity 启动，就应该实例化单例。当然，除非您没有在 mainfest.xml 中声明 OrderApplication，这可能是 NPE 的根本原因：

```
<application
    android:name="OrderApplication" 
```

# hibernate - Hibernate not saving collection

> ID：14994365
> 
> 赞同：1
> 
> 时间：2013-02-21T04:07:19.370
> 
> 标签：hibernate

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC  "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-   mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.business.Test" table="Test">
    <composite-id name="key">
        <key-property name="x" column="X"/>
        <key-property name="y" column="Y"/>
    </composite-id>

    <set name="valueObjects" inverse="false" lazy="false" cascade="all">
        <key>
            <column name="X"/>
            <column name="Y"/>          
        </key>
        <one-to-many class="com.business.ValueObjects" />
    </set>

</class>
</hibernate-mapping>

<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
<class name="com.business.ValueObjects" table="ValueObjects" mutable="false">
    <id name="id" type="java.lang.Long" column="ID">
      <generator class="sequence">
          <param name="sequence">ID_SEQ</param>
      </generator>
    </id>

    <property name="x" column="X"/>
    <property name="y" column="Y"/>

</class>
</hibernate-mapping> 
```

When i load the Test object, hibernate loads the ValueObjects collections. But when i update the ValueObjects and save Test. I dont see any insert or Update statements.

PLease suggest what to do.

Raulito

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:04:57.117

在 hibernate 中，'<strong>mutable' 在**类**及其相关集合中默认为 '<strong>true'，表示类或集合允许**添加、更新和删除**。另一方面，如果将**mutable****更改为 false**，则它在类及其相关集合中具有不同的含义。所以你需要删除**mutable**属性并将**inverse**属性设置为**true**。

# java - Java中的输出错误

> ID：14994369
> 
> 赞同：-5
> 
> 时间：2013-02-21T04:07:54.737
> 
> 标签：java, symbol-not-found

我有这个代码

```
public class MemSim {

    public static final int NUM_PAGES = MemParam.NUM_PAGES;
    public static final int NUM_PROGRAMS = MemParam.NUM_PROGRAMS;
    public static final int MAX_SIZE = MemParam.MAX_SIZE;
    public static final int PAGE_SIZE = MemParam.PAGE_SIZE;

    public void PageUsage(int sval, int eval) {

        sval = 0;
        eval = NUM_PAGES - 1;

        System.out.println(sval, eval);

    }
} 
```

我收到错误消息：

```
MemSim.java:27: cannot find symbol
symbol  : method println(int,int)
location: class java.io.PrintStream
System.out.println(sval , eval); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:13:49.963

试试`System.out.println(sval + " " + eval);`？希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:14:07.043

System.out.println() 的所有签名都采用一个参数，但您传递了两个。

你用的是什么IDE？一个体面的 IDE 应该已经为您标记了这一点。

如果您没有使用 IDE，请检查 Java 文档以获取有效的类和方法：[http ://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:52:23.967

`System.out.println()`只有一个论点。如果您希望显示两个值，请尝试这种方式

```
System.out.println("sval="+sval+" eval="+eval); 
```

# scala - Using Scala's Macros to enforce type equality

> ID：14994371
> 
> 赞同：4
> 
> 时间：2013-02-21T04:08:03.247
> 
> 标签：scala, macros, scala-2.10, scala-macros

I've been experimenting with MacroParadise ([here](http://scalamacros.org/news/2012/12/18/macro-paradise.html) and [here](http://docs.scala-lang.org/overviews/macros/paradise.html)), as well a few other newer features. Today while using TypeTags, I came to the realization that I can now do something like this to enforce type equality.

```
def typeEq[A: TypeTag, B: TypeTag]: Boolean = {
    implicitly[TypeTag[A]].tpe =:= implicitly[TypeTag[B]].tpe
} 
```

I then remembered that `TypeTag` implicits are compiler generated, and I had the idea that I may be able write a macro enabling more concise TypeTag usage like this:

```
def foo[A](xs: List[A]): String = xs match {
  case y :: ys if typeEq[A, String] => y
  case y :: ys if typeEq[A, Int]    => y.toString 
} 
```

I've only written a handful of macros in Lisp, and am stumbling around attempting to use the macro library. This lead me to several attempts, but they all end up expanding to something like `Int =:= Int` which doesn't work, or something like `typeA =:= typeB` where both are free(which also doesn't work).

This lead me to two questions: 1) Is this possible to do without the Context Bounds on `foo`(like written above)? 2) How do I correctly splice the `Type`s obtained by the implicits into the result expression?

It seems to me that macros and implicits should allow me to fetch the `WeakTypeTag` implicit and use its `tpe` member for splicing, since they both occur at compile time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:31:19.823

您已经可以使用 type 强制类型相等`=:=[From,To]`：

```
def bar[A,B](a:A,b:B)(implicit ev: A =:= B)= (a,b)

bar(1,1)
res0: (Int, Int) = (1,2)

bar(1,"3")

error: could not find implicit value for parameter ev: =:=[Int,java.lang.String]
       bar(1,"3")
          ^ 
```

**编辑**：

抱歉，我猜你的问题有点错误。您的示例几乎可以工作，但是编译器不知道是什么`A`，因此找不到`TypeTag[A]`. 如果您添加绑定到方法定义的上下文，它将起作用：

```
def foo[A : TypeTag](xs: List[A]) = xs match {
  case _ if typeEq[A, String] => "yay"
  case _ => "noes"
}

scala> foo(List(2))
res0: String = noes

scala> foo(List(""))
res1: String = yay 
```

**编辑2**：

对于您的示例，您实际上根本不需要`TypeTag`s，您可以只使用模式匹配，因为您只使用第一个元素：

```
def foo[A](xs: List[A]): String = xs match {
  case (y: String) :: _ => y
  case y :: _ => y.toString
}

scala> foo(List(1,2,3))
res6: String = 1

scala> foo(List("foo"))
res7: String = foo 
```

但请注意，模式数学并非详尽无遗，因为它无法处理`Nil`.

# c# - 如何使用 LINQ 针对 1 个表返回父子节点

> ID：14994383
> 
> 赞同：4
> 
> 时间：2013-02-21T04:09:32.103
> 
> 标签：c#, .net, linq

一直在寻找解决方案，但到目前为止还没有找到。

我相当确定它可以通过一个 linq 调用但无法解决。

我有以下数据结构

```
Id      ParentId     Name       ValidFlag

1       NULL         parent 1   1
2       NULL         parent 2   1
3       NULL         parent 3   0
4       1            child 1    1
5       1            child 2    1
6       2            child 3    1
7       2            child 4    1
8       3            child 5    1
9       3            child 6    1 
```

现在我想做的是返回所有有效的父母和他们的孩子，所以在这种情况下，我会返回除 ID = 3（父母 3）之外的所有内容。

有没有一种简单的方法可以用 LINQ 做到这一点？我猜有，但我的 LinqIQ 非常有限，我知道基础知识，但除此之外我需要很多帮助。

这是 ToLookup() 或 Union 的情况，还是两者都不是？

**更新：**

更具体地说，因为我没有这样做，两种类型的记录都在同一个表中，如果可能的话，我想返回所有记录，无论它是 1 查询中的父还是子。

它不像只选择 ValidFlag = 1 的所有记录那么简单。源数据库是一团糟，获取所有记录的唯一方法是找到“有效”父母，然后找到“有效”父母的所有孩子。我知道我可以只做一个简单的查询来返回所有有效的父记录，然后做一个单独的查询来找到这些父母的所有孩子，但是组合成 1 个 LINQ 查询是我失败的地方，我希望这是可能的。在这种情况下，可能存在无效父母的有效子条目，因此需要该问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:21:48.367

这应该可以解决问题，（编辑：有关不使用 Distinct 的版本，请参见下文。）

```
(from parents in collection
from all in collection
where
    parents.ValidFlag == 1 &&
    parents.ParentId == null &&
    all.ValidFlag == 1 &&
    (all.ParentId == null || all.ParentId == parents.Id)
select all).Distinct(); 
```

上面的代码应该希望生成与它在 SQL 中看起来非常相似的东西，也许除了 distinct 可能导致它返回更多实际需要在客户端过滤的数据。如果有很多数据，可能会成为一个问题，主要是如果有很多父母，因为它会返回那些重复的）

这是在没有不同调用的情况下重新编写的查询

```
from parents in collection // parents is only used to decide which children to get
from all in collection // this is where we will actually grab our data from
where
    parents.ValidFlag == 1 &&  // only include parents that are valid
    parents.ParentId == null && // and that are parents
    all.ValidFlag == 1 &&  // only include entries that are valid
    (
        (all.ParentId == null && all.Id == parents.Id) ||  // If entry is a parent, match with itself to limit returns to 1
        all.ParentId == parents.Id // otherwise, parentid should match one of the valid parents.
    )
select all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:13:28.870

这应该这样做。创建包含该数据结构的对象类型的通用列表。然后使用返回相同类型的 IEnumerable 的 .Where 扩展名。

```
 List<YourObject> list = new List<YourObject>();
    IEnumerable<YourbObject> validItems = list.Where(x=>x.ValidFlag=1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:28:43.803

考虑以下 Linq to Sql 实体：

![在此处输入图像描述](../Images/8f487a1c020c3bd59c3892e2c828ea93.png)

假设我们已经将`OneToMany`关系的边命名为`ChildTables`and `ParentTables`，那么下面的代码应该可以完成这项工作

```
//create data context
MyTableDataContext dc = new MyTableDataContext("Your connection string"); 
//find all children, i.e. the entities with ParentId set
var allChildEntities = dc.MyTable.Where(t=>t.ParentId.HasValue);
//find all valid parents, which have no parent and no children
var allParentsWithChild = dc.MyTable.Where(c => !c.ParentId.HasValue && 
                                                !c.ChildTables.Any());
//union the results
var result = allChildEntities.Union(allParentsWithChild); 
```

`Id`如果和之间有外键关系`ParentId`，那就足够了。如果没有，您还应该搜索不存在父母的子实体。但这可能会更容易用纯 sql 完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:39:58.863

我打算使用 GroupJoin，但这应该可以满足您的要求。

```
 var query = dataContext.YourTable.Where(x => x.ValidFlag == 1 &&
 (x.ParentId == null ||
    dataContext.YourTable.Where( y => y.ParentId == x.Id)
    .First().ValidFlag == 1))
 .ToList();
                      . 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T04:50:20.507

对于您的示例数据，这将起作用：

```
 var validData = from d in data
                        where (!d.ParentID.HasValue && d.IsValid) //select all valid parents
                        || (d.ParentID.HasValue && data.Where(p => !p.ParentID.HasValue && p.IsValid).Select(p => p.ID).Contains(d.ParentID.Value)) //select children
                        select d; 
```

但如果您的数据中存在多级层次结构，并且您也想选择子子级，则它将不起作用。

另一件事，我不确定上述是否适用于 linq-to-sql 或其他 linq 提供程序，但它确实适用于内存数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T05:33:25.733

如果您使用的是实体框架并具有导航属性，则可以执行以下操作。不过，从这个问题中还不清楚是否是这种情况。

```
var query = db.YourTable
    .Where(x => x.Parent != null && x.Parent.ValidFlag == 1)
    .GroupBy(x => x.ParentId)
    .Select(g => new { ParentId = g.Key, Children = g.ToList() })
    .ToList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T07:30:11.437

考虑一下这种“错误”的方式，您想要的 SQL 是：

```
SELECT * FROM MyTable
WHERE IsValid = 1 AND
 (ParentID IS NULL -- Parents
 OR ParentID IN (SELECT ID FROM MyTable WHERE IsValid = 1 AND ParentID IS NULL))
     -- Children 
```

所以你想要的 LINQ 是：

```
var result = from d in MyTable
             where d.ValidFlag == 1
              && (d.ParentId == null
               || (from p in MyTable where p.ValidFlag == 1 && p.ParentId == null
                   && p.Id == d.ParentId select p.Id).Any())
             select d; 
```

（不完全相同的 SQL，但实际上如此。）

# email - 无法从 localhost（websphere 应用程序服务器）发送邮件

> ID：14994384
> 
> 赞同：3
> 
> 时间：2013-02-21T04:09:35.563
> 
> 标签：email, websphere, localhost

我正在尝试从本地主机发送电子邮件。我正在使用 websphere 应用程序服务器。我收到以下错误：

```
[2/21/13 9:21:24:407 IST] 00000036 SystemOut     O DEBUG: setDebug: JavaMail version 1.4ea
[2/21/13 9:21:24:502 IST] 00000036 SystemOut     O DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
[2/21/13 9:21:24:527 IST] 00000036 SystemOut     O DEBUG SMTP: useEhlo true, useAuth true
[2/21/13 9:21:24:527 IST] 00000036 SystemOut     O DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
[2/21/13 9:21:25:212 IST] 00000036 WSX509TrustMa E   CWPKI0022E: SSL HANDSHAKE FAILURE:  A signer with SubjectDN "CN=smtp.gmail.com, O=Google Inc, L=Mountain View, ST=California, C=US" was sent from target host:port "*:9043".  The signer may need to be added to local trust store "C:/Program Files (x86)/IBM/SDP/runtimes/base_v7/profiles/was70profile1/config/cells/drunkendeath-PCNode01Cell/nodes/drunkendeath-PCNode01/trust.p12" located in SSL configuration alias "NodeDefaultSSLSettings" loaded from SSL configuration file "security.xml".  The extended error message from the SSL handshake exception is: "PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error".
[2/21/13 9:21:25:214 IST] 00000036 SystemOut     O DEBUG SMTP: exception reading response: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:504 IST] 00000036 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [IBMBookSalesProjectEAR] [/IBMBookSalesProject] [/order_success.jsp]: Initialization successful.
[2/21/13 9:21:25:215 IST] 00000036 SystemErr     R javax.mail.MessagingException: Exception reading response;
  nested exception is:
    javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at com.sun.mail.smtp.SMTPTransport.readServerResponse(SMTPTransport.java:1462)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1260)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:370)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at javax.mail.Service.connect(Service.java:275)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at javax.mail.Service.connect(Service.java:156)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at com.tgmc.mail.MailSupport.sendMail(MailSupport.java:82)
[2/21/13 9:21:25:216 IST] 00000036 SystemErr     R  at com.tgmc.mail.MailSupport.sendMail(MailSupport.java:43)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at com.tgmc.servlets.CompleteTransactionServlet.doPost(CompleteTransactionServlet.java:143)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at com.tgmc.servlets.CompleteTransactionServlet.doGet(CompleteTransactionServlet.java:44)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1449)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:790)
[2/21/13 9:21:25:217 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3610)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:274)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:926)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
[2/21/13 9:21:25:218 IST] 00000036 SystemErr     R  at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1772)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[2/21/13 9:21:25:219 IST] 00000036 SystemErr     R  at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R  at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R  at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R  at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R  at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R  at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)
[2/21/13 9:21:25:220 IST] 00000036 SystemErr     R Caused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:221 IST] 00000036 SystemErr     R  at com.ibm.jsse2.n.a(n.java:42)
[2/21/13 9:21:25:221 IST] 00000036 SystemErr     R  at com.ibm.jsse2.sc.a(sc.java:277)
[2/21/13 9:21:25:221 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gb.a(gb.java:354)
[2/21/13 9:21:25:221 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gb.a(gb.java:292)
[2/21/13 9:21:25:221 IST] 00000036 SystemErr     R  at com.ibm.jsse2.hb.a(hb.java:118)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.hb.a(hb.java:162)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gb.n(gb.java:262)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gb.a(gb.java:177)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.sc.a(sc.java:71)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.sc.g(sc.java:167)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.sc.a(sc.java:170)
[2/21/13 9:21:25:222 IST] 00000036 SystemErr     R  at com.ibm.jsse2.e.read(e.java:38)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  at com.sun.mail.util.TraceInputStream.read(TraceInputStream.java:97)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  at java.io.BufferedInputStream.fill(BufferedInputStream.java:229)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  at java.io.BufferedInputStream.read(BufferedInputStream.java:248)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  at com.sun.mail.util.LineInputStream.readLine(LineInputStream.java:75)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  at com.sun.mail.smtp.SMTPTransport.readServerResponse(SMTPTransport.java:1440)
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R  ... 31 more
[2/21/13 9:21:25:223 IST] 00000036 SystemErr     R Caused by: com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:224 IST] 00000036 SystemErr     R  at com.ibm.jsse2.util.e.b(e.java:78)
[2/21/13 9:21:25:224 IST] 00000036 SystemErr     R  at com.ibm.jsse2.util.e.b(e.java:45)
[2/21/13 9:21:25:224 IST] 00000036 SystemErr     R  at com.ibm.jsse2.util.d.a(d.java:12)
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gc.a(gc.java:15)
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R  at com.ibm.jsse2.gc.checkServerTrusted(gc.java:48)
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R  at com.ibm.ws.ssl.core.WSX509TrustManager.checkServerTrusted(WSX509TrustManager.java:310)
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R  at com.ibm.jsse2.hb.a(hb.java:116)
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R  ... 43 more
[2/21/13 9:21:25:225 IST] 00000036 SystemErr     R Caused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:226 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:411)
[2/21/13 9:21:25:226 IST] 00000036 SystemErr     R  at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:258)
[2/21/13 9:21:25:226 IST] 00000036 SystemErr     R  at com.ibm.jsse2.util.e.b(e.java:51)
[2/21/13 9:21:25:227 IST] 00000036 SystemErr     R  ... 49 more
[2/21/13 9:21:25:227 IST] 00000036 SystemErr     R Caused by: java.security.cert.CertPathValidatorException: The certificate issued by OU=Equifax Secure Certificate Authority, O=Equifax, C=US is not trusted; internal cause is: 
    java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:227 IST] 00000036 SystemErr     R  at com.ibm.security.cert.BasicChecker.<init>(BasicChecker.java:111)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:176)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:732)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:649)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:595)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:357)
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R  ... 51 more
[2/21/13 9:21:25:228 IST] 00000036 SystemErr     R Caused by: java.security.cert.CertPathValidatorException: Certificate chaining error
[2/21/13 9:21:25:230 IST] 00000036 SystemErr     R  at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:298)
[2/21/13 9:21:25:230 IST] 00000036 SystemErr     R  at com.ibm.security.cert.BasicChecker.<init>(BasicChecker.java:108)
[2/21/13 9:21:25:230 IST] 00000036 SystemErr     R  ... 56 more 
```

此外，当我在 chrome 中打开我的项目时，我不断收到 https 错误。我该如何解决？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:14:57.840

您正在尝试向使用 SSL 的服务器发送电子邮件（在这种情况下看起来像 gmail），WebSphere 不信任该证书，这就是您失败的原因。

您需要将 Google 证书导入 WebSphere 的信任库，它应该可以为您工作。

最简单的方法是使用[从端口检索，](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.express.doc/ae/usec_sslretrievesignercert.html)它允许您提供主机名和端口，WebSphere 将为您获取证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:28:39.157

它清楚地说明了日志中的主机和端口：DEBUG SMTP：尝试连接到主机“smtp.gmail.com”，端口 465

所以试试那个端口。

# hyperlink - DirectX 11 linking error: fatal error LNK1104: cannot open file 'Effects11d.lib'

> ID：14994385
> 
> 赞同：2
> 
> 时间：2013-02-21T04:09:41.723
> 
> 标签：hyperlink, directx, linker-errors

I've started to begin my project in directx and already having trouble. First I got a link error with `d3dx11d.lib` that is now resolved however in resolving that error i am now faced with this one

> LINK : fatal error LNK1104: cannot open file 'Effects11d.lib'

and I'm not really sure what to do, directx is still fairly new to me and I just really want to get started.

any help would be much appreciated! thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:08:25.740

这不是任何版本的 DirectX SDK 附带的标准库。

快速浏览 google 表明您可能需要从您正在查看的示例的源文件中获取该库。

[http://d3dcoder.net/phpBB/viewtopic.php?f=4&t=241](http://d3dcoder.net/phpBB/viewtopic.php?f=4&t=241)

# javascript - “在 AngularJS 中思考”如果我有 jQuery 背景？

> ID：14994391
> 
> 赞同：4510
> 
> 时间：2013-02-21T04:09:56.063
> 
> 标签：javascript, jquery, angularjs

假设我熟悉使用[jQuery](http://jquery.com/)开发客户端应用程序，但现在我想开始使用[AngularJS](http://angularjs.org/)。你能描述一下必要的范式转变吗？这里有几个问题可以帮助你找到答案：

*   如何以不同的方式构建和设计客户端 Web 应用程序？最大的区别是什么？
*   我应该停止做什么/使用什么；我应该开始做什么/使用什么？
*   是否有任何服务器端注意事项/限制？

我不是在寻找 和 之间的详细`jQuery`比较`AngularJS`。

* * *

## 回答 #1

> 赞同：7170
> 
> 时间：2013-02-21T21:26:42.770

# 1\. 不要设计你的页面，然后用[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)操作改变它

在 jQuery 中，您设计一个页面，然后将其变为动态的。这是因为 jQuery 是为增强而设计的，并且从这个简单的前提下发展得令人难以置信。

但是在 AngularJS 中，您必须从头开始考虑您的架构。不要一开始就想“我有这部分 DOM，我想让它做 X”，你必须从你想要完成的事情开始，然后开始设计你的应用程序，最后再设计你的视图。

# 2\. 不要用 AngularJS 扩充 jQuery

同样，不要从 jQuery 做 X、Y 和 Z 的想法开始，所以我将在模型和控制器的基础上添加 AngularJS。当你刚开始时，这*真的*很诱人，这就是为什么我总是建议新的 AngularJS 开发人员根本不要使用 jQuery，至少在他们习惯于“Angular 方式”做事之前。

我在这里和邮件列表中看到许多开发人员使用 150 或 200 行代码的 jQuery 插件创建了这些精心设计的解决方案，然后他们使用一系列`$apply`令人困惑和令人费解的回调和 s 将其粘合到 AngularJS 中；但他们最终让它工作！问题在于，在**大多数**情况下，jQuery 插件可以在 AngularJS 中用一小部分代码重写，突然间一切都变得易于理解和直接。

底线是：解决时，首先“在 AngularJS 中思考”；如果您想不出解决方案，请咨询社区；如果毕竟没有简单的解决方案，*那么*请随意使用 jQuery。但是不要让 jQuery 成为拐杖，否则你永远不会掌握 AngularJS。

# 3\. 始终从架构的角度思考

首先要知道[单页应用](http://en.wikipedia.org/wiki/Single-page_application)就是*应用*。它们*不是*网页。*因此，除了*像客户端开发者一样思考之外，我们还需要像服务器端开发者一样思考。我们必须考虑如何将我们的应用程序划分为单独的、可扩展的、可测试的组件。

那么你是*怎么*做到的呢？您如何“在 AngularJS 中思考”？下面是一些与 jQuery 对比的一般原则。

## 该视图是“官方记录”

在 jQuery 中，我们以编程方式更改视图。`ul`我们可以像这样定义一个下拉菜单：

```
<ul class="main-menu">
    <li class="active">
        <a href="#/home">Home</a>
    </li>
    <li>
        <a href="#/menu1">Menu 1</a>
        <ul>
            <li><a href="#/sm1">Submenu 1</a></li>
            <li><a href="#/sm2">Submenu 2</a></li>
            <li><a href="#/sm3">Submenu 3</a></li>
        </ul>
    </li>
    <li>
        <a href="#/home">Menu 2</a>
    </li>
</ul> 
```

在 jQuery 中，在我们的应用程序逻辑中，我们将使用以下内容激活它：

```
$('.main-menu').dropdownMenu(); 
```

当我们只看视图时，并不能立即看出这里有任何功能。对于小型应用程序，这很好。但是对于非平凡的应用程序，事情很快就会变得混乱且难以维护。

然而，在 AngularJS 中，视图是基于视图的功能的官方记录。我们的`ul`声明应该是这样的：

```
<ul class="main-menu" dropdown-menu>
    ...
</ul> 
```

这两个做同样的事情，但在 AngularJS 版本中，任何查看模板的人都知道应该发生什么。每当开发团队的新成员加入时，她可以看看这个然后*知道*有一个指令叫做`dropdownMenu`操作它；她不需要凭直觉得出正确的答案或筛选任何代码。这个观点告诉我们应该发生什么。干净多了。

AngularJS 的新开发人员经常会问这样的问题：我如何找到所有特定类型的链接并在它们上添加指令。当我们回复时，开发人员总是大吃一惊：你没有。但是你不这样做的原因是这就像半jQuery，半AngularJS，没有好处。这里的问题是开发人员试图在 AngularJS 的上下文中“做 jQuery”。这永远不会奏效。观点*为*官方记录。在指令之外（更多内容见下文），您永远永远*不会*更改 DOM。*并且在视图*中应用了指令，因此意图很明确。

记住：不要设计，然后标记。你必须先建筑师，然后再设计。

## 数据绑定

这是迄今为止 AngularJS 最棒的特性之一，并且减少了我在上一节中提到的各种 DOM 操作的需要。AngularJS 会自动更新你的视图，所以你不必这样做！在 jQuery 中，我们响应事件然后更新内容。就像是：

```
$.ajax({
  url: '/myEndpoint.json',
  success: function ( data, status ) {
    $('ul#log').append('<li>Data Received!</li>');
  }
}); 
```

对于看起来像这样的视图：

```
<ul class="messages" id="log">
</ul> 
```

除了混合关注点之外，我们也有我之前提到的表示意图的相同问题。但更重要的是，我们必须手动引用和更新 DOM 节点。如果我们想删除一个日志条目，我们也必须针对 DOM 进行编码。除了 DOM，我们如何测试逻辑？如果我们想更改演示文稿怎么办？

这有点凌乱，有点脆弱。但在 AngularJS 中，我们可以这样做：

```
$http( '/myEndpoint.json' ).then( function ( response ) {
    $scope.log.push( { msg: 'Data Received!' } );
}); 
```

我们的视图可以是这样的：

```
<ul class="messages">
    <li ng-repeat="entry in log">{{ entry.msg }}</li>
</ul> 
```

但就此而言，我们的视图可能如下所示：

```
<div class="messages">
    <div class="alert" ng-repeat="entry in log">
        {{ entry.msg }}
    </div>
</div> 
```

现在，我们使用 Bootstrap 警报框，而不是使用无序列表。而且我们永远不必更改控制器代码！但更重要的是，无论日志在*何处*或*如何*更新，视图也会发生变化。自动地。整洁的！

虽然我没有在这里展示，但数据绑定是双向的。因此，这些日志消息也可以通过执行以下操作在视图中进行编辑：`<input ng-model="entry.msg" />`. 有很多的欣喜。

## 不同的模型层

在 jQuery 中，DOM 有点像模型。但是在 AngularJS 中，我们有一个单独的模型层，我们可以以任何我们想要的方式管理它，完全独立于视图。这有助于上述数据绑定，保持[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)，并引入更大的可测试性。其他答案提到了这一点，所以我就这样说吧。

## 关注点分离

以上所有内容都与这个总体主题相关：将您的担忧分开。您的观点作为应该发生的事情的官方记录（大部分）；您的模型代表您的数据；你有一个服务层来执行可重用的任务；您进行 DOM 操作并使用指令增强您的视图；然后你用控制器把它们粘在一起。其他答案中也提到了这一点，我要添加的唯一内容与可测试性有关，我将在下面的另一节中讨论。

## 依赖注入

[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)(DI)可以帮助我们解决关注点分离问题。如果您来自服务器端语言（从[Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)到[PHP](http://en.wikipedia.org/wiki/PHP)），您可能已经熟悉这个概念，但如果您是来自 jQuery 的客户端人员，那么这个概念可能看起来从愚蠢到多余到时髦. 但事实并非如此。:-)

从广泛的角度来看，DI 意味着您可以非常自由地声明组件，然后从任何其他组件中，只需请求它的一个实例，它就会被授予。你不必知道加载顺序、文件位置或类似的东西。威力可能不会立即显现，但我将仅提供一个（常见）示例：测试。

假设在我们的应用程序中，我们需要一个通过[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer) API 实现服务器端存储的服务，并且根据应用程序状态，还需要本地存储。在我们的控制器上运行测试时，我们不想与服务器通信 -毕竟我们正在测试*控制器。*我们可以添加一个与原始组件同名的模拟服务，注入器将确保我们的控制器自动获取假服务——我们的控制器不需要也不需要知道其中的区别。

说到测试...

# 4\. 测试驱动开发——*总是*

这实际上是关于架构的第 3 部分的一部分，但它非常重要，我将其作为自己的顶级部分。

在您见过、使用或编写的众多 jQuery 插件中，有多少带有附带的测试套件？不是很多，因为 jQuery 不太适合这种情况。但是 AngularJS 是。

在 jQuery 中，唯一的测试方法通常是使用示例/演示页面独立创建组件，我们的测试可以针对该页面执行 DOM 操作。因此，我们必须单独开发一个组件，*然后*将其集成到我们的应用程序中。多么不方便！很多时候，当使用 jQuery 进行开发时，我们选择迭代而不是测试驱动开发。谁能责怪我们？

但是因为我们有关注点分离，所以我们可以在 AngularJS 中迭代地进行测试驱动开发！例如，假设我们想要一个超级简单的指令在我们的菜单中指示我们当前的路线是什么。我们可以在应用程序的视图中声明我们想要的内容：

```
<a href="/hello" when-active>Hello</a> 
```

`when-active`好的，现在我们可以为不存在的指令编写一个测试：

```
it( 'should add "active" when the route changes', inject(function() {
    var elm = $compile( '<a href="/hello" when-active>Hello</a>' )( $scope );

    $location.path('/not-matching');
    expect( elm.hasClass('active') ).toBeFalsey();

    $location.path( '/hello' );
    expect( elm.hasClass('active') ).toBeTruthy();
})); 
```

当我们运行测试时，我们可以确认它失败了。只有现在我们才应该创建我们的指令：

```
.directive( 'whenActive', function ( $location ) {
    return {
        scope: true,
        link: function ( scope, element, attrs ) {
            scope.$on( '$routeChangeSuccess', function () {
                if ( $location.path() == element.attr( 'href' ) ) {
                    element.addClass( 'active' );
                }
                else {
                    element.removeClass( 'active' );
                }
            });
        }
    };
}); 
```

我们的测试现在通过了*，*我们的菜单按要求执行。我们的开发*既是*迭代的*又*是测试驱动的。酷酷的。

# 5.从概念上讲，指令*不是*封装的jQuery

你会经常听到“只在指令中进行 DOM 操作”。**这是必需品。**以应有的尊重对待它！

但是让我们再深入一点……

一些指令只是装饰视图中已经存在的内容（想想`ngClass`），因此有时会立即进行 DOM 操作，然后基本上就完成了。但是如果一个指令就像一个“小部件”并且有一个模板，它也应该*尊重*关注点分离。也就是说，模板*也*应该在很大程度上独立于其在链接和控制器功能中的实现。

AngularJS 带有一整套工具，使这变得非常容易；`ngClass`我们可以动态更新类；`ngModel`允许双向数据绑定；`ngShow`并`ngHide`以编程方式显示或隐藏元素；还有更多——包括我们自己写的。换句话说，我们可以在*没有*DOM 操作的情况下做各种令人敬畏的事情。DOM 操作越少，指令就越容易测试，它们越容易设置样式，它们在未来就越容易更改，它们的可重用性和可分发性就越高。

我看到很多 AngularJS 的新开发人员使用指令作为抛出一堆 jQuery 的地方。换句话说，他们认为“由于我无法在控制器中进行 DOM 操作，我将把该代码放入指令中”。虽然这肯定要好得多，但它通常*仍然是错误*的。

想想我们在第 3 节中编写的记录器。即使我们把它放在一个指令中，我们*仍然*想用“Angular 方式”来做。它*仍然*不需要任何 DOM 操作！很多时候 DOM 操作是必要的，但它比你想象的*要*少得多！*在应用程序中的任何地方*进行 DOM 操作之前，问问自己是否真的需要。可能有更好的方法。

这是一个快速示例，显示了我最常看到的模式。我们想要一个可切换的按钮。（注意：这个例子有点做作并且有点冗长，以表示以完全相同的方式解决的更复杂的情况。）

```
.directive( 'myDirective', function () {
    return {
        template: '<a class="btn">Toggle me!</a>',
        link: function ( scope, element, attrs ) {
            var on = false;

            $(element).click( function () {
                on = !on;
                $(element).toggleClass('active', on);
            });
        }
    };
}); 
```

这有几个问题：

1.  首先，jQuery 从来都不是必需的。我们在这里所做的一切都不需要 jQuery！
2.  其次，即使我们的页面上已经有 jQuery，也没有理由在这里使用它；我们可以简单地使用`angular.element`，当放入没有 jQuery 的项目时，我们的组件仍然可以工作。
3.  第三，即使假设该指令需要 jQuery 才能工作，jqLit​​e ( *)*`angular.element`如果加载了 jQuery将*始终使用它！*所以我们不需要使用`$`- 我们可以使用`angular.element`.
4.  第四，与第三个密切相关的是 jqLit​​e 元素不需要被包裹`$`——`element`传递给`link`函数的*已经是*一个 jQuery 元素！
5.  第五，我们在前面的章节中提到过，为什么我们将模板的东西混入我们的逻辑中？

该指令可以重写（即使对于非常复杂的情况！）更简单，如下所示：

```
.directive( 'myDirective', function () {
    return {
        scope: true,
        template: '<a class="btn" ng-class="{active: on}" ng-click="toggle()">Toggle me!</a>',
        link: function ( scope, element, attrs ) {
            scope.on = false;

            scope.toggle = function () {
                scope.on = !scope.on;
            };
        }
    };
}); 
```

同样，模板内容在模板中，因此您（或您的用户）可以轻松地将其换成符合任何必要风格的模板，并且无需触及**逻辑。**可重用性 - 繁荣！

还有所有其他好处，比如测试——很容易！无论模板中有什么，指令的内部 API 都不会被触及，因此重构很容易。您可以根据需要更改模板，而无需触及指令。无论您进行什么更改，您的测试仍然通过。

w00t！

因此，如果指令不仅仅是类 jQuery 函数的集合，它们是什么？指令实际上**是 HTML 的扩展**。如果 HTML 不做你需要它做的事情，你编写一个指令来为你做这件事，然后就像它是 HTML 的一部分一样使用它。

换句话说，如果 AngularJS 没有做一些开箱即用的事情，想想团队将如何完成它以适应`ngClick`, `ngClass`, 等。

# 概括

甚至不要使用 jQuery。甚至不包括它。它会让你退缩。当您遇到一个您认为您已经知道如何在 jQuery 中解决的问题时，在您使用 jQuery 之前，请`$`尝试考虑如何在 AngularJS 的范围内解决问题。不知道就问吧！20 次中有 19 次，最好的方法不需要 jQuery，尝试用 jQuery 解决它会为您带来更多的工作。

* * *

## 回答 #2

> 赞同：406
> 
> 时间：2013-02-21T04:09:56.063

## 命令式→声明式

在 jQuery 中，*选择器*用于查找[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)元素，然后将事件处理程序绑定/注册到它们。当事件触发时，该（命令式）代码将执行以更新/更改 DOM。

在 AngularJS 中，您需要考虑**视图**而不是 DOM 元素。视图是包含 AngularJS**指令**的（声明性）HTML 。指令为我们在幕后设置事件处理程序并为我们提供动态数据绑定。选择器很少使用，因此对 ID（和某些类型的类）的需求大大减少。视图与**模型**相关联（通过范围）。视图是模型的投影。事件更改模型（即数据、范围属性），并且投影这些模型的视图“自动”更新。

在 AngularJS 中，考虑模型，而不是 jQuery 选择的保存数据的 DOM 元素。将视图视为这些模型的投影，而不是注册回调来操纵用户看到的内容。

## 关注点分离

jQuery 采用[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript) - 行为 (JavaScript) 与结构 (HTML) 分离。

AngularJS 使用**控制器**和指令（每个都可以有自己的控制器，和/或编译和链接函数）从视图/结构（HTML）中删除行为。Angular 也有**服务**和**过滤器**来帮助分离/组织你的应用程序。

另请参阅[https://stackoverflow.com/a/14346528/215945](https://stackoverflow.com/a/14346528/215945)

## 应用程序设计

设计 AngularJS 应用程序的一种方法：

1.  想想你的模型。为这些模型创建服务或您自己的 JavaScript 对象。
2.  想想你想如何展示你的模型——你的观点。为每个视图创建 HTML 模板，使用必要的指令来获取动态数据绑定。
3.  将控制器附加到每个视图（使用 ng-view 和路由，或 ng-controller）。让控制器仅查找/获取视图完成其工作所需的任何模型数据。使控制器尽可能薄。

## 原型继承

在不了解 JavaScript 原型继承如何工作的情况下，您可以使用 jQuery 做很多事情。在开发 AngularJS 应用程序时，如果您对 JavaScript 继承有很好的了解，您将避免一些常见的陷阱。推荐阅读：[AngularJS 中作用域原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

* * *

## 回答 #3

> 赞同：184
> 
> 时间：2014-05-12T10:22:49.547

# AngularJS 与 jQuery

AngularJS 和 jQuery 采用非常不同的意识形态。如果您来自 jQuery，您可能会发现一些令人惊讶的差异。Angular 可能会让你生气。

这是正常的，你应该坚持下去。角是值得的。

## 最大的不同（TLDR）

jQuery 为您提供了一个工具包，用于选择 DOM 的任意位并对它们进行临时更改。你可以一点一点地做任何你喜欢的事情。

AngularJS 反而给你一个**编译器**。

这意味着 AngularJS 从上到下读取整个 DOM 并将其视为代码，字面意思是编译器的指令。当它遍历 DOM 时，它会寻找特定的**指令**（编译器指令）来告诉 AngularJS 编译器如何表现和做什么。指令是充满 JavaScript 的小对象，可以匹配属性、标签、类甚至注释。

当 Angular 编译器确定 DOM 的一部分与特定指令匹配时，它会调用指令函数，将 DOM 元素、任何属性、当前 $scope（这是一个局部变量存储）和其他一些有用的位传递给它。这些属性可能包含可由指令解释的表达式，并告诉它如何渲染以及何时重绘自身。

然后指令可以反过来引入额外的 Angular 组件，例如控制器、服务等。编译器底部出现的是一个完整的 Web 应用程序，连接起来并准备就绪。

**这意味着 Angular 是模板驱动**的。您的模板驱动 JavaScript，而不是相反。这是角色的彻底颠倒，与我们过去 10 年左右一直在编写的不引人注目的 JavaScript 完全相反。这可能需要一些时间来适应。

如果这听起来可能是过度规定和限制，那么没有什么比事实更远了。因为 AngularJS 将您的 HTML 视为代码，所以您可以**在 Web 应用程序中获得 HTML 级别的粒度**。一切皆有可能，只要你在概念上进行了一些飞跃，大多数事情都会变得异常简单。

让我们深入了解细节。

## 首先，Angular 不会取代 jQuery

Angular 和 jQuery 做不同的事情。AngularJS 为您提供了一组工具来生成 Web 应用程序。jQuery 主要为您提供修改 DOM 的工具。如果 jQuery 出现在您的页面上，AngularJS 将自动使用它。如果不是，AngularJS 附带 jQuery Lite，它是 jQuery 的精简版，但仍然可以完美使用。

Misko 喜欢 jQuery，并且不反对您使用它。但是，随着您的进步，您会发现您可以使用范围、模板和指令的组合来完成几乎所有的工作，并且您应该尽可能喜欢这个工作流程，因为您的代码将更加离散、更加可配置等等角。

如果你确实使用 jQuery，你不应该把它洒在所有地方。AngularJS 中 DOM 操作的正确位置是在指令中。稍后会详细介绍这些。

## 带有选择器的不显眼的 JavaScript 与声明式模板

jQuery 通常以不显眼的方式应用。您的 JavaScript 代码链接在页眉（或页脚）中，这是唯一提到它的地方。我们使用选择器来挑选页面的一部分并编写插件来修改这些部分。

JavaScript 处于控制之中。HTML具有完全独立的存在。即使没有 JavaScript，您的 HTML 仍保持语义。Onclick 属性是非常糟糕的做法。

关于 AngularJS，您首先会注意到的一件事是**自定义属性无处不在**。您的 HTML 将充满 ng 属性，这些属性本质上是类固醇上的 onClick 属性。这些是指令（编译器指令），是模板与模型挂钩的主要方式之一。

当你第一次看到这个时，你可能会想把 AngularJS 写成老式的侵入式 JavaScript（就像我一开始那样）。事实上，AngularJS 并不遵循这些规则。在 AngularJS 中，您的 HTML5 是一个模板。它由 AngularJS 编译以生成您的网页。

这是第一个很大的区别。对于 jQuery，您的网页是一个要操作的 DOM。对于 AngularJS，您的 HTML 是要编译的代码。AngularJS 读入你的整个网页，并使用它内置的编译器将它编译成一个新的网页。

你的模板应该是声明性的；它的含义应该通过阅读就清楚了。我们使用具有有意义名称的自定义属性。我们用有意义的名称组成新的 HTML 元素。具有最少 HTML 知识且没有编码技能的设计师可以阅读您的 AngularJS 模板并了解它在做什么。他或她可以进行修改。*这是 Angular 的方式。*

## 模板在驾驶座上。

在启动 AngularJS 并浏览教程时，我问自己的第一个问题是**“我的代码在哪里？”** . 我没有写过 JavaScript，但我有所有这些行为。答案很明显。因为 AngularJS 编译 DOM，AngularJS 将您的 HTML 视为代码。对于许多简单的情况，通常只需编写一个模板并让 AngularJS 为您将其编译成应用程序就足够了。

您的模板驱动您的应用程序。它被视为[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)。您编写 AngularJS 组件，AngularJS 将根据您的模板结构将它们拉入并在正确的时间使它们可用。[这与标准MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式非常不同，其中模板仅用于输出。

例如，它比[Ruby on Rails](http://en.wikipedia.org/wiki/Ruby_on_Rails)更类似于[XSLT](http://en.wikipedia.org/wiki/XSLT)。

这是一种彻底的控制反转，需要一些时间来适应。

**停止尝试从 JavaScript 驱动您的应用程序。让模板驱动应用程序，让 AngularJS 负责将组件连接在一起。这也是 Angular 的方式。**

## 语义 HTML 与语义模型

使用 jQuery，您的 HTML 页面应该包含语义上有意义的内容。如果 JavaScript 被关闭（由用户或搜索引擎），您的内容仍然可以访问。

因为 AngularJS 将您的 HTML 页面视为模板。该模板不应该是语义的，因为您的内容通常存储在您的模型中，而该模型最终来自您的 API。AngularJS 使用模型编译你的 DOM 以生成语义网页。

**您的 HTML 源代码不再是语义的，相反，您的 API 和编译的 DOM 是语义的。**

在 AngularJS 中，意义存在于模型中，HTML 只是一个模板，仅用于显示。

[在这一点上，您可能对SEO](http://en.wikipedia.org/wiki/Search_engine_optimization)和可访问性有各种疑问，这是正确的。这里有未解决的问题。大多数屏幕阅读器现在将解析 JavaScript。搜索引擎也可以索引[AJAXed](http://en.wikipedia.org/wiki/Ajax_%28programming%29)内容。不过，您需要确保您使用的是 pushstate URL，并且您有一个不错的站点地图。有关该问题的讨论，请参见此处：[https ://stackoverflow.com/a/23245379/687677](https://stackoverflow.com/a/23245379/687677)

## 关注点分离 (SOC) 与 MVC

[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)(SOC) 是一种在 Web 开发多年中成长起来的模式，原因有很多，包括 SEO、可访问性和浏览器不兼容。它看起来像这样：

1.  HTML - 语义。HTML 应该是独立的。
2.  CSS - 样式，没有 CSS 页面仍然可读。
3.  JavaScript - 行为，没有脚本，内容仍然存在。

同样，AngularJS 不按他们的规则行事。一口气，**AngularJS 摒弃了十年来公认的智慧**，而是实现了一个 MVC 模式，其中模板不再是语义的，甚至一点都没有。

它看起来像这样：

1.  模型 - 您的模型包含您的语义数据。模型通常是[JSON](http://en.wikipedia.org/wiki/JSON)对象。模型作为称为 $scope 的对象的属性存在。您还可以在 $scope 上存储方便的实用程序函数，然后您的模板可以访问这些函数。
2.  视图 - 您的视图是用 HTML 编写的。视图通常不是语义的，因为您的数据存在于模型中。
3.  控制器 - 您的控制器是一个 JavaScript 函数，它将视图与模型挂钩。它的作用是初始化$scope。根据您的应用程序，您可能需要也可能不需要创建控制器。一个页面上可以有多个控制器。

MVC 和 SOC 不在同一尺度的两端，它们在完全不同的轴上。SOC 在 AngularJS 上下文中毫无意义。你必须忘记它并继续前进。

如果你像我一样经历过浏览器大战，你可能会觉得这个想法很冒犯。克服它，这将是值得的，我保证。

## 插件与指令

**插件扩展了 jQuery。AngularJS 指令扩展了浏览器的功能。**

在 jQuery 中，我们通过向 jQuery.prototype 添加函数来定义插件。然后，我们通过选择元素并在结果上调用插件将它们挂钩到 DOM 中。这个想法是扩展 jQuery 的功能。

例如，如果你想在你的页面上有一个轮播，你可以定义一个无序列表的数字，可能包裹在一个 nav 元素中。然后，您可能会编写一些 jQuery 来选择页面上的列表并将其重新设置为带有超时的画廊以执行滑动动画。

在 AngularJS 中，我们定义了指令。指令是返回 JSON 对象的函数。这个对象告诉 AngularJS 要查找哪些 DOM 元素，以及对它们进行哪些更改。指令使用您发明的属性或元素连接到模板。这个想法是用新的属性和元素扩展 HTML 的功能。

*AngularJS 的方式是扩展原生 HTML 的功能。*您应该编写看起来像 HTML 的 HTML，并使用自定义属性和元素进行扩展。

如果你想要一个轮播，只需使用一个`<carousel />`元素，然后定义一个指令来拉入一个模板，并让那个傻瓜工作。

## 许多小指令与带有配置开关的大插件

使用 jQuery 的趋势是编写像 lightbox 这样的大型插件，然后我们通过传递大量值和选项来配置它们。

这是 AngularJS 中的一个错误。

以下拉列表为例。在编写下拉插件时，您可能会想在点击处理程序中编写代码，也许是在向上或向下的人字形中添加一个函数，也许更改展开元素的类，显示隐藏菜单，所有有用的东西。

直到你想做一个小的改变。

假设您有一个要在悬停时展开的菜单。那么现在我们有一个问题。我们的插件已经为我们连接到我们的点击处理程序中，我们将需要添加一个配置选项以使其在这种特定情况下表现不同。

在 AngularJS 中，我们编写更小的指令。我们的下拉指令会非常小。它可能保持折叠状态，并提供 fold()、展开() 或 toggle() 方法。这些方法将简单地更新 $scope.menu.visible，它是一个保存状态的布尔值。

现在**在我们的模板中，**我们可以把它连接起来：

```
<a ng-click="toggle()">Menu</a>
<ul ng-show="menu.visible">
  ...
</ul> 
```

需要在鼠标悬停时更新？

```
<a ng-mouseenter="unfold()" ng-mouseleave="fold()">Menu</a>
<ul ng-show="menu.visible">
  ...
</ul> 
```

模板驱动应用程序，因此我们获得了 HTML 级别的粒度。如果我们想逐个例外，模板使这很容易。

## 闭包与 $scope

JQuery 插件是在闭包中创建的。在该关闭范围内维护隐私。您可以在该闭包内维护您的范围链。您只能真正访问通过 jQuery 传递给插件的 DOM 节点集，以及闭包中定义的任何局部变量和您定义的任何全局变量。这意味着插件是完全独立的。这是一件好事，但在创建整个应用程序时可能会受到限制。尝试在动态页面的各个部分之间传递数据变得很麻烦。

AngularJS 有 $scope 对象。这些是由 AngularJS 创建和维护的特殊对象，您可以在其中存储模型。某些指令将产生一个新的 $scope，默认情况下，它使用 JavaScript 原型继承从其包装 $scope 继承。$scope 对象可以在控制器和视图中访问。

这是聪明的部分。因为 $scope 继承的结构大致遵循 DOM 的结构，元素可以访问自己的范围，以及无缝访问任何包含范围，一直到全局 $scope（与全局范围不同）。

这使得传递数据和在适当的级别存储数据变得更加容易。如果展开下拉菜单，则只有下拉菜单 $scope 需要知道它。如果用户更新了他们的偏好，您可能想要更新全局 $scope，并且任何监听用户偏好的嵌套范围都会自动收到警报。

这听起来可能很复杂，事实上，一旦你放松下来，就像飞翔一样。您不需要创建 $scope 对象，AngularJS 会根据您的模板层次结构正确且适当地为您实例化和配置它。然后，AngularJS 使用依赖注入的魔力将它提供给您的组件（稍后会详细介绍）。

## 手动 DOM 更改与数据绑定

在 jQuery 中，您可以手动进行所有 DOM 更改。您以编程方式构造新的 DOM 元素。如果你有一个 JSON 数组并且你想把它放到 DOM 中，你必须编写一个函数来生成 HTML 并插入它。

在 AngularJS 中你也可以这样做，但我们鼓励你使用数据绑定。更改您的模型，并且由于 DOM 通过模板绑定到它，您的 DOM 将自动更新，无需干预。

因为数据绑定是从模板完成的，使用属性或花括号语法，它非常容易做到。与之相关的认知开销很小，因此您会发现自己一直在这样做。

```
<input ng-model="user.name" /> 
```

将输入元素绑定到`$scope.user.name`. 更新输入将更新当前范围内的值，反之亦然。

同样地：

```
<p>
  {{user.name}}
</p> 
```

将在段落中输出用户名。这是一个实时绑定，所以如果`$scope.user.name`值更新，模板也会更新。

## 一直都是阿贾克斯

在 jQuery 中进行 Ajax 调用是相当简单的，但它仍然是您可能要三思而后行的事情。需要考虑额外的复杂性，并且需要维护相当多的脚本。

在 AngularJS 中，Ajax 是您默认的首选解决方案，它一直在发生，几乎没有您注意到。您可以使用 ng-include 包含模板。您可以使用最简单的自定义指令应用模板。您可以将 Ajax 调用包装在服务中，并为自己创建一个[GitHub](http://en.wikipedia.org/wiki/GitHub)服务或[Flickr](http://en.wikipedia.org/wiki/Flickr)服务，您可以轻松访问这些服务。

## 服务对象与辅助函数

在 jQuery 中，如果我们想要完成一个小的非 dom 相关任务，例如从 API 中提取一个提要，我们可能会在闭包中编写一个小函数来执行此操作。这是一个有效的解决方案，但如果我们想经常访问该提要怎么办？如果我们想在另一个应用程序中重用该代码怎么办？

AngularJS 为我们提供服务对象。

服务是包含函数和数据的简单对象。它们总是单例，这意味着它们中的一个永远不会超过一个。假设我们想要访问 Stack Overflow API，我们可能会编写一个`StackOverflowService`定义方法的方法。

假设我们有一个购物车。我们可以定义一个 ShoppingCartService 来维护我们的购物车并包含添加和删除商品的方法。因为该服务是单例的，并且由所有其他组件共享，所以任何需要写入购物车并从中提取数据的对象都可以。它总是同一个购物车。

服务对象是自包含的 AngularJS 组件，我们可以根据需要使用和重用它们。它们是包含函数和数据的简单 JSON 对象。它们始终是单例的，因此如果您将数据存储在一个地方的服务上，您只需请求相同的服务就可以将这些数据从其他地方取出。

## [依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)(DI) 与 Instatiation - 也就是去意大利化

AngularJS 为你管理你的依赖。如果您想要一个对象，只需引用它，AngularJS 就会为您获取它。

在您开始使用它之前，很难解释这是多么巨大的时间收益。jQuery 中不存在像 AngularJS DI 这样的东西。

DI 意味着您无需编写应用程序并将其连接在一起，而是定义一个组件库，每个组件都由一个字符串标识。

假设我有一个名为“FlickrService”的组件，它定义了从 Flickr 提取 JSON 提要的方法。现在，如果我想编写一个可以访问 Flickr 的控制器，我只需要在声明控制器时按名称引用“FlickrService”。AngularJS 将负责实例化组件并使其可用于我的控制器。

例如，这里我定义了一个服务：

```
myApp.service('FlickrService', function() {
  return {
    getFeed: function() { // do something here }
  }
}); 
```

现在，当我想使用该服务时，我只需按如下名称引用它：

```
myApp.controller('myController', ['FlickrService', function(FlickrService) {
  FlickrService.getFeed()
}]); 
```

AngularJS 会识别出需要一个 FlickrService 对象来实例化控制器，并会为我们提供一个。

这使得将事物连接在一起变得非常容易，并且几乎消除了任何导致 spagottification 的倾向。我们有一个简单的组件列表，AngularJS 在我们需要时将它们一一交给我们。

## 模块化服务架构

jQuery 很少提及如何组织代码。AngularJS 有意见。

AngularJS 为您提供了可以放置代码的模块。例如，如果您正在编写一个与 Flickr 对话的脚本，您可能想要创建一个 Flickr 模块来包装所有与 Flickr 相关的功能。模块可以包含其他模块 (DI)。您的主应用程序通常是一个模块，这应该包括您的应用程序将依赖的所有其他模块。

您可以获得简单的代码重用，如果您想编写另一个基于 Flickr 的应用程序，您可以只包含 Flickr 模块，瞧，您可以在新应用程序中访问所有与 Flickr 相关的功能。

模块包含 AngularJS 组件。**当我们包含一个模块时，该模块中的所有组件都可以作为一个由其唯一字符串标识的简单列表提供给我们**。然后我们可以使用 AngularJS 的依赖注入机制将这些组件相互注入。

## 总结一下

AngularJS 和 jQuery 不是敌人。可以很好地在 AngularJS 中使用 jQuery。如果你很好地使用了 AngularJS（模板、数据绑定、$scope、指令等），你会发现你需要的jQuery 比你可能需要的少得多**。**

要实现的主要事情是您的模板驱动您的应用程序。停止尝试编写可以做所有事情的大型插件。而是编写做一件事的小指令，然后编写一个简单的模板将它们连接在一起。

少考虑不显眼的 JavaScript，而是考虑 HTML 扩展。

## 我的小书

我对 AngularJS 感到非常兴奋，我写了一本关于它的短书，非常欢迎您在线阅读[http://nicholasjohnson.com/angular-book/](http://nicholasjohnson.com/angular-book/)。我希望它会有所帮助。

* * *

## 回答 #4

> 赞同：152
> 
> 时间：2013-02-21T04:29:51.773

> 你能描述一下必要的范式转变吗？

**命令式与声明式**

使用**jQuery**，您可以一步一步地告诉 DOM 需要发生什么。使用**[AngularJS](http://en.wikipedia.org/wiki/AngularJS)**，你描述了你想要的结果，而不是如何去做。更多关于这个[here](https://stackoverflow.com/questions/1784664/what-is-the-difference-between-declarative-and-imperative-programming)。另外，请查看 Mark Rajcok 的答案。

> 如何以不同的方式构建和设计客户端 Web 应用程序？

AngularJS 是一个使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式的完整客户端框架（查看他们的[图形表示](http://docs.angularjs.org/guide/concepts)）。它非常关注关注点分离。

> 最大的区别是什么？我应该停止做什么/使用什么；我应该开始做什么/使用什么？

**jQuery**是一个库

**AngularJS**是一个漂亮的客户端框架，高度可测试，它结合了大量很酷的东西，例如 MVC、[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)、数据绑定等等。

它侧重于[关注点](http://en.wikipedia.org/wiki/Separation_of_concerns)和测试的分离（[单元测试](http://en.wikipedia.org/wiki/Unit_testing)和端到端测试），这有助于测试驱动的开发。

最好的开始方法是阅读[他们很棒的教程](http://docs.angularjs.org/tutorial/)。您可以在几个小时内完成这些步骤；但是，如果您想掌握幕后的概念，它们包含大量参考资料以供进一步阅读。

> 是否有任何服务器端注意事项/限制？

您可以在已经使用纯 jQuery 的现有应用程序中使用它。但是，如果您想充分利用 AngularJS 的特性，您可以考虑使用[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)方法对服务器端进行编码。

这样做将允许您利用他们的[资源工厂](http://docs.angularjs.org/api/ngResource.$resource)，这将创建您的服务器端 RESTful [API](http://en.wikipedia.org/wiki/Application_programming_interface)的抽象并使服务器端调用（获取、保存、删除等）非常容易。

* * *

## 回答 #5

> 赞同：84
> 
> 时间：2014-02-21T07:57:22.130

为了描述“范式转变”，我认为一个简短的回答就足够了。

## AngularJS 改变了你*查找*元素的方式

在**jQuery**中，您通常使用**选择器**来查找元素，然后将它们连接起来：
`$('#id .class').click(doStuff);`

在**AngularJS**中，您使用**指令**直接标记元素，将它们连接起来：
`<a ng-click="doStuff()">`

AngularJS 不需要（或不希望）您使用选择器查找元素——AngularJS 的**jqLit​​e**与成熟的**jQuery**之间的主要区别在于[jqLit​​e 不支持选择器](https://docs.angularjs.org/api/ng/function/angular.element)。

所以当人们说“根本不包括jQuery”时，主要是因为他们不希望你使用选择器；他们希望您学习使用指令。直接，不选择！

* * *

## 回答 #6

> 赞同：69
> 
> 时间：2014-02-04T05:07:54.763

# jQuery

jQuery 制作了非常长的 JavaScript 命令，比如`getElementByHerpDerp`更短和跨浏览器。

# AngularJS

AngularJS 允许您制作自己的 HTML 标签/属性，这些标签/属性可以很好地与动态 Web 应用程序配合使用（因为 HTML 是为静态页面设计的）。

# 编辑：

说“我有 jQuery 背景，我如何看待 AngularJS？” 就像说“我有 HTML 背景，我如何在 JavaScript 中思考？” 您提出这个问题的事实表明您很可能不了解这两个资源的基本目的。这就是为什么我选择通过简单地指出根本区别来回答这个问题，而不是通过列表说“AngularJS 使用指令，而 jQuery 使用 CSS 选择器来创建一个 jQuery 对象来执行这个和那个等等......” . 这个问题不需要冗长的回答。

jQuery 是一种使在浏览器中编写 JavaScript 变得更容易的方法。更短的跨浏览器命令等。

AngularJS 扩展了 HTML，因此您不必`<div>`为了制作应用程序而到处乱扔垃圾。它使 HTML 实际上适用于应用程序，而不是它的设计用途，即静态的教育网页。它使用 JavaScript 以迂回的方式实现了这一点，但从根本上说，它是 HTML 的扩展，而不是 JavaScript。

* * *

## 回答 #7

> 赞同：61
> 
> 时间：2013-11-02T16:53:53.487

jQuery：你想了很多关于 DOM 元素的 'QUERYing the [DOM](http://en.wikipedia.org/wiki/Document_Object_Model) ' 和做一些事情。

AngularJS：模型就是真理，你总是从那个角度思考。

例如，当您从服务器获取数据时，您打算在 DOM 中以某种格式显示，在 jQuery 中，您需要 '1\. FIND' 在 DOM 中您要放置此数据的位置，即 '2\. 通过创建一个新节点或仅设置其[innerHTML](http://www.tizag.com/javascriptT/javascript-innerHTML.php)来更新/追加它。然后当你想更新这个视图时，你然后'3。查找'位置和'4。更新'。在从服务器获取和格式化数据的同一上下文中完成的查找和更新循环在 AngularJS 中消失了。

使用 AngularJS，你有你的模型（你已经习惯的 JavaScript 对象），模型的值告诉你模型（显然）和视图，模型上的操作会自动传播到视图，所以你不要'不必考虑。你会发现自己在 AngularJS 中不再在 DOM 中找到东西。

换一种说法，在jQuery中，你需要考虑CSS选择器，即有类或属性等的`div`或在哪里`td`，这样我就可以得到它们的HTML或颜色或值，但是在AngularJS中，你会发现自己是这样想的：我在处理什么模型，我将模型的值设置为 true。您不必担心反映此值的视图是复选框还是驻留在`td`元素中（在 jQuery 中您经常需要考虑的细节）。

通过 AngularJS 中的 DOM 操作，您会发现自己添加了指令和过滤器，您可以将其视为有效的 HTML 扩展。

您将在 AngularJS 中体验到的另一件事：在 jQuery 中，您经常调用 jQuery 函数，在 AngularJS 中，AngularJS 会调用您的函数，因此 AngularJS 会“告诉您如何做事”，但好处是值得的，所以学习 AngularJS通常意味着了解 AngularJS 想要什么或 AngularJS 要求你呈现函数的方式，它会相应地调用它。这是使 AngularJS 成为框架而不是库的原因之一。

* * *

## 回答 #8

> 赞同：46
> 
> 时间：2014-05-16T21:50:11.507

这些是一些非常好的，但冗长的答案。

总结一下我的经验：

1.  控制器和提供者（服务、工厂等）用于修改数据模型，而不是 HTML。
2.  HTML 和指令定义模型的布局和绑定。
3.  如果您需要在控制器之间共享数据，请创建一个服务或工厂——它们是跨应用程序共享的单例。
4.  如果您需要 HTML 小部件，请创建一个指令。
5.  **如果您有一些数据并且现在正在尝试更新 HTML...停止！更新模型，并确保您的 HTML 已绑定到模型。**

* * *

## 回答 #9

> 赞同：45
> 
> 时间：2013-10-10T08:58:31.563

jQuery 是一个 DOM 操作库。

AngularJS 是一个 MV* 框架。

事实上，AngularJS 是为数不多的 JavaScript MV* 框架之一（许多 JavaScript MVC 工具仍属于类别库）。

作为一个框架，它托管您的代码并负责决定调用什么以及何时调用！

AngularJS 本身包含一个 jQuery-lite 版本。所以对于一些基本的 DOM 选择/操作，你真的不必包含 jQuery 库（它可以节省很多字节来在网络上运行。）

AngularJS 具有用于 DOM 操作和设计可重用 UI 组件的“指令”的概念，因此您应该在需要进行 DOM 操作相关的东西时使用它（指令只是您在使用 AngularJS 时应该编写 jQuery 代码的地方）。

AngularJS 涉及一些学习曲线（超过 jQuery :-)。

-->对于任何有 jQuery 背景的开发人员，我的第一个建议是“在跳入像 AngularJS 这样的丰富框架之前，将 JavaScript 作为一门一流的语言学习！” 我以艰难的方式了解到上述事实。

祝你好运。

* * *

## 回答 #10

> 赞同：34
> 
> 时间：2013-08-14T14:19:07.533

它们是苹果和橘子。你不想比较它们。它们是两种不同的东西。AngularJs 已经内置了 jQuery lite，它允许您执行基本的 DOM 操作，甚至不包括完整的 jQuery 版本。

jQuery 是关于 DOM 操作的。它解决了所有跨浏览器的痛苦，否则你将不得不处理它，但它不是一个允许你将应用程序划分为 AngularJS 等组件的框架。

AngularJs 的一个好处是它允许您在指令中分离/隔离 DOM 操作。有一些内置指令可供您使用，例如 ng-click。您可以创建自己的自定义指令，其中将包含您的所有视图逻辑或 DOM 操作，这样您就不会最终将 DOM 操作代码混入应该处理业务逻辑的控制器或服务中。

Angular 将您的应用程序分解为 - 控制器 - 服务 - 视图 - 等等。

还有一件事，那就是指令。这是一个你可以附加到任何 DOM 元素的属性，你可以在其中使用 jQuery，而不必担心你的 jQuery 会与 AngularJs 组件冲突或弄乱它的架构。

我从参加的一次聚会上听说，Angular 的一位创始人说他们非常努力地分离出 DOM 操作，所以不要试图将它们重新包含进来。

* * *

## 回答 #11

> 赞同：31
> 
> 时间：2013-11-08T16:08:03.503

收听播客*[JavaScript Jabber：第 32 集](http://javascriptjabber.com/032-jsj-angular-js/)*，其中介绍了 AngularJS 的原始创建者：Misko Hevery 和 Igor Minar。他们谈论了很多关于从其他 JavaScript 背景（尤其是 jQuery）来到 AngularJS 的感觉。

关于你的问题，播客中提出的观点之一让我很高兴：

> **MISKO**：[...] 我们在 Angular 中几乎没有考虑过的一件事是，我们如何提供大量的逃生舱口，以便您可以脱身并基本上找到解决办法。所以对我们来说，答案就是这个叫做“指令”的东西。**有了指令，你基本上变成了一个普通的小 jQuery JavaScript，你可以做任何你想做的事情。**
> 
> **IGOR**：因此，将指令视为对编译器的指令，当您在模板中遇到此特定元素或此 CSS 时，它会告诉它，并且您保留这种代码，并且该代码负责元素以及该元素下的所有内容在 DOM 树中。

整个剧集的成绩单可在上面提供的链接中找到。

所以，直接回答你的问题：AngularJS - 非常 - 自以为是，是一个真正的 MV* 框架。但是，您仍然可以在指令中使用 jQuery 完成所有您知道和喜爱的非常酷的事情。这不是“我如何做我以前在 jQuery 中做的事情？”的问题。就像“我如何用我以前在 jQuery 中做的所有东西来补充 AngularJS？”的问题一样多。

这真的是两种截然不同的心态。

* * *

## 回答 #12

> 赞同：30
> 
> 时间：2013-09-12T23:21:00.470

我觉得这个问题很有趣，因为我第一次认真接触 JavaScript 编程是[Node.js](http://en.wikipedia.org/wiki/Node.js)和 AngularJS。我从来没有学过 jQuery，我想这是一件好事，因为我不需要忘记任何东西。事实上，我积极避免使用 jQuery 解决我的问题，而是只寻找一种“AngularJS 方式”来解决它们。所以，我想我对这个问题的回答基本上可以归结为“像从未学过 jQuery 的人一样思考”，并避免任何直接合并 jQuery 的诱惑（显然 AngularJS 在某种程度上在幕后使用它）。

* * *

## 回答 #13

> 赞同：23
> 
> 时间：2014-09-21T16:44:42.233

**AngularJS 和 jQuery：**

除了 JQLite 功能之外，AngularJs 和 JQuery 在每个级别上都完全不同，一旦您开始学习 AngularJs 核心功能（我在下面解释），您就会看到它。

AngularJs 是一个客户端框架，提供构建独立的客户端应用程序。JQuery 是一个围绕 DOM 运行的客户端库。

AngularJs Cool Principle - 如果您想对 UI 进行一些更改，请从模型数据更改的角度考虑。更改您的数据，UI 将重新呈现自己。你不需要每次都在 DOM 周围玩耍，除非并且直到它几乎不需要并且也应该通过 Angular Directives 来处理。

为了回答这个问题，我想分享我在第一个使用 AngularJS 的企业应用程序上的经验。这些是 Angular 提供的最棒的特性，我们开始改变我们的 jQuery 思维方式，我们将 Angular 作为一个框架而不是库。

**双向数据绑定非常棒：** 我有一个包含所有功能 UPDATE、DELTE、INSERT 的网格。我有一个使用 ng-repeat 绑定网格模型的数据对象。您只需要为删除和插入编写一行简单的 JavaScript 代码就可以了。随着网格模型的即时更改，网格会自动更新。更新功能是实时的，没有代码。你觉得不可思议！！！

**可重用指令是超级的：** 在一个地方编写指令并在整个应用程序中使用它。我的天啊！！！我将这些指令用于分页、正则表达式、验证等。这真的很酷！

**路由很强大：** 如何使用它取决于您的实现，但它只需要很少的代码行来路由请求以指定 HTML 和控制器 (JavaScript)

**控制器很棒：** 控制器负责处理自己的 HTML，但是这种分离对于通用功能也很有效。如果您想在主 HTML 上单击按钮调用相同的函数，只需在每个控制器中编写相同的函数名称并编写单独的代码。

**插件：** 还有许多其他类似的功能，例如在您的应用中显示叠加层。您无需为它编写代码，只需使用可用作 wc-overlay 的覆盖插件，这将自动处理所有[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest) (XHR) 请求。

**[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)架构的理想选择：** 作为一个完整的框架，AngularJS 非常适合与 RESTful 架构一起工作。调用 REST CRUD API 非常简单，而且

**服务**：使用服务编写通用代码，在控制器中编写更少的代码。服务可用于在控制器之间共享通用功能。

**可扩展性**：Angular 使用 Angular 指令扩展了 HTML 指令。在 html 中编写表达式并在运行时评估它们。创建您自己的指令和服务，并在另一个项目中使用它们而无需任何额外的努力。

* * *

## 回答 #14

> 赞同：19
> 
> 时间：2014-06-21T11:59:08.560

作为一个 JavaScript MV* 初学者并且只关注应用程序架构（而不是服务器/客户端问题），我当然会推荐以下资源（我很惊讶它还没有被提及）：[JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)，作者 Addy Osmani ，作为对不同**JavaScript 设计模式**的介绍。此答案中使用的术语取自上面的链接文档。我不会重复在接受的答案中措辞非常好的内容。相反，这个答案链接回了支持 AngularJS（和其他库）的**理论背景。**

像我一样，您很快就会意识到 AngularJS（或[Ember.js](http://en.wikipedia.org/wiki/Ember.js)、Durandal 和其他 MV* 框架）是一个组合许多不同 JavaScript 设计模式的复杂框架。

我还发现，在深入研究一个全局框架之前，**分别**为每一种模式测试**(1)**本机 JavaScript 代码和**(2)较小的库。**这使我能够更好地了解框架解决了哪些关键问题（因为您亲自面临这个问题）。

 **例如：

*   [JavaScript 面向对象编程](https://www.google.be/search?q=js+oop)（这是一个谷歌搜索链接）。它不是一个库，但肯定是任何应用程序编程的先决条件。它教会了我**原型、构造函数、单例和装饰器模式的原生实现**
*   用于**外观模式的**[jQuery](http://jquery.com) /[下划线](http://underscorejs.org)（如用于操作 DOM 的所见即所得）
***   [Prototype.js](http://prototypejs.org)用于**原型/构造函数/混合模式***   [RequireJS](http://requirejs.org) / [Curl.js](https://github.com/cujojs/curl)用于**模块模式/ AMD***   用于**可观察的发布/订阅模式的**[KnockoutJS](http://knockoutjs.com)**

 ****注意：此列表不完整，也不是“最佳库”；它们恰好是我使用的库。这些库还包含更多模式，提到的只是它们的主要关注点或原始意图。如果您觉得此列表中缺少某些内容，请在评论中提及，我很乐意添加。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2014-08-27T06:04:43.250

实际上，如果你使用 AngularJS，你就不再需要 jQuery。AngularJS 本身具有绑定和指令，对于您可以用 jQuery 做的大多数事情，这是一个非常好的“替代品”。

我通常使用 AngularJS 和[Cordova](http://en.wikipedia.org/wiki/PhoneGap)开发移动应用程序。我需要的唯一来自 jQuery 的东西是选择器。

通过谷歌搜索，我看到那里有一个独立的 jQuery 选择器模块。是嘶嘶声。

我决定制作一个小代码片段，帮助我使用 AngularJS 和 jQuery Selector（使用 Sizzle）快速启动一个网站。

我在这里分享了我的代码：[https ://github.com/huytd/Sizzular](https://github.com/huytd/Sizzular)******

# css - Extra white lines/pixels

> ID：14994392
> 
> 赞同：2
> 
> 时间：2013-02-21T04:09:56.707
> 
> 标签：css, lines

I have a webpage - [http://bit.ly/YHFX5B](http://bit.ly/YHFX5B) and if you take a look at the footer you will see that there are a few extra white pixels/lines after it. I can't understand where they are coming from.

Please advice where they could be coming from.

Thank you, Dan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:20:10.363

将`#footer`填充更改为

```
padding: 20px 0 15px 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:16:34.333

这是由这种样式的填充引起的：

```
#footer a {
   padding: 4px 4px 4px 0;
} 
```

将其更改为

```
#footer a {
    padding: 4px 4px 2px 0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:17:17.603

将此添加到您的`#footer`元素中：

```
#footer {
  overflow: hidden;
} 
```

# php - Create menu from multi dimensional infinite parent child tree

> ID：14994399
> 
> 赞同：3
> 
> 时间：2013-02-21T04:10:41.243
> 
> 标签：php, arrays, loops, multidimensional-array

Anyone?

Thanks in advance, and let me know if you need any additional info.

I am attempting to turn a multi dimensional array to a multiple nested html navigation menu. I have the jist of it from another answer on SO: [solution here](https://stackoverflow.com/questions/8685825/php-loop-through-multidimensional-array-and-establish-parent-child-relationship).

What I am trying to figure out is how to preserve the top level parent link (and any subsequent child page links) in the url for the next child array. I tried passing in the link to the function when it calls itself to build the array, but that only preserved the most recent parent link.

Example:

Home About
-Info
--Sub Page

becomes:

home about about/info about/info/subpage

Here is a sample array:

```
Array
(
[0] => stdClass Object
    (
        [id] => 12
        [parent] => 11
        [name] => Sub Page
        [link] => sub_page
        [target] => _self
    )

[1] => stdClass Object
    (
        [id] => 14
        [parent] => 12
        [name] => Test
        [link] => test_test
        [target] => _self
    )

[2] => stdClass Object
    (
        [id] => 9
        [parent] => 0
        [name] => Home
        [link] => home
        [target] => _self
    )

[3] => stdClass Object
    (
        [id] => 11
        [parent] => 10
        [name] => Info
        [link] => info
        [target] => _self
    )

[4] => stdClass Object
    (
        [id] => 13
        [parent] => 10
        [name] => Test
        [link] => test
        [target] => _self
    )

[5] => stdClass Object
    (
        [id] => 10
        [parent] => 0
        [name] => About
        [link] => about
        [target] => _self
    ) 
```

)

And here is the code I am using:

```
function create_menu_array($arr, $parent = 0){
    $pages = array();
    foreach($arr as $page){
        if($page->parent == $parent){               
            $page->sub = isset($page->sub) ? $page->sub : $this->create_menu_array($arr, $page->id);
            $pages[] = $page;
        }
    }
    return $pages;
}

function create_menu_html($nav){
    $html = '';
    foreach($nav as $page){
        $html .= '<ul><li>';
        $html .= '<a href="' . base_url().$page->link . '" target="'.$page->target.'">' . $page->name . '</a>';
        $html .= $this->create_menu_html($page->sub);
        $html .= '</li></ul>';
    }
    return $html;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:37:26.330

具有递归函数的解决方案：

示例： http: [//phpfiddle.org/main/code/pmw-7i3](http://phpfiddle.org/main/code/pmw-7i3)

```
<?php

function array_process_for_ids($items) {
    $new_array = array();
    foreach ($items as $item) {
        $new_array[$item['id']] = $item;
    }
    return $new_array;
}

function menu($items) {
    function menu_recursive($parent_item) {
        global $items;
        unset($items[$parent_item['id']]);
        echo '<div style="padding-left: 15px;">';
        echo '- '.$parent_item['name'];
        foreach ($items as $item) {
            if ($item['parent'] == $parent_item['id']) {
                menu_recursive($item);
            }
        }
        echo  '</div>';
    }
    foreach ($items as $item) {
        if ($item['parent'] == 0) menu_recursive($item);
    }
}

$items = array(
    array(
        'id' => 10,
        'parent' => 0,
        'name' => 'Top Page 1',
        'link' => 'top_page_1',
        'target' => '_self'
    ),
    array(
        'id' => 12,
        'parent' => 0,
        'name' => 'Top Page 2',
        'link' => 'top_page_2',
        'target' => '_self'
    ),
    array(
        'id' => 25,
        'parent' => 10,
        'name' => 'Sub Page 1 of top page 1',
        'link' => 'sub_page_1_of_top_page_1',
        'target' => '_self'
    ),
    array(
        'id' => 26,
        'parent' => 12,
        'name' => 'Sub Page 1 of top page 2',
        'link' => 'sub_page_1_of_top_page_2',
        'target' => '_self'
    ),
    array(
        'id' => 28,
        'parent' => 26,
        'name' => 'Sub Page of sub page 1 of top page 2',
        'link' => 'sub_page_of_sub_page_1_of_top_page_2',
        'target' => '_self'
    )
);

$items = array_process_for_ids($items);

menu($items);

?> 
```

# typescript - 打字稿：在地图中使用数字作为键

> ID：14994406
> 
> 赞同：7
> 
> 时间：2013-02-21T04:11:45.093
> 
> 标签：typescript

[这个答案](https://stackoverflow.com/questions/13315131/enforcing-the-type-of-the-indexed-members-of-a-typescript-object)表明声明一个强制 a`number`作为键的映射是有效的。

[但是，当我在操场](http://www.typescriptlang.org/Playground/#src=class%20Foo%0A%7B%0A%09stringMap%3A%20%7B%20%5Bs%3A%20string%5D%3A%20string%3B%20%7D%20%3D%20%7B%7D%3B%0A%09numberMap%3A%20%7B%20%5Bs%3A%20number%5D%3A%20string%3B%20%7D%20%3D%20%7B%7D%3B%0A%7D)上尝试以下操作时，出现错误。

```
class Foo
{
    stringMap: { [s: string]: string; } = {};
    numberMap: { [s: number]: string; } = {};
} 
```

`numberMap`生成以下编译器错误：

> 无法转换`'{}'`为`'{ [s: number]: string; }'`：类型的索引签名`'{}'`并且`'{ [s: number]: string; }'`不兼容`{}`

声明这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T04:15:41.010

我不是 100% 确定这是否是一个错误（我需要检查规范），但作为一种解决方法这样做绝对可以：

```
class Foo
{
    stringMap: { [s: string]: string; } = {};
    numberMap: { [s: number]: string; } = <any>{};
} 
```

如果某些东西可以按数字索引，您通常会使用`[]`而不是`{}`，但这显然取决于您。

# php - PHP组合2个表状数组

> ID：14994408
> 
> 赞同：1
> 
> 时间：2013-02-21T04:11:49.883
> 
> 标签：php, arrays

我想在 PHP 中将 2 个数组合并为 1 个。我在这个网站上搜索过类似的问题，但似乎找不到答案。

```
Array 1
(
[0] => Array
    (
        [LOGIN] => 123
        [CITY] => bangkok
        [GROUP] => bangkok-a
        [PREV_A] => 123.4
        [PREV_B] => 456.7
    )

[1] => Array
    (
        [LOGIN] => 456
        [CITY] => bangkok
        [GROUP] => bangkok-b
        [PREV_A] => 987.6
        [PREV_B] => 654.3
    )
)

Array 2
(
[0] => Array
    (
        [LOGIN] => 123
        [CITY] => bangkok
        [GROUP] => bangkok-a
        [A] => 555.5
        [B] => 666.6
    )

[1] => Array
    (
        [LOGIN] => 456
        [CITY] => bangkok
        [GROUP] => bangkok-b
        [A] => 777.7
        [B] => 888.8
    )
) 
```

我希望得到的数组变成这样：

```
Array 3
(
[0] => Array
    (
        [LOGIN] => 123
        [CITY] => bangkok
        [GROUP] => bangkok-a
        [PREV_A] => 123.4
        [PREV_B] => 456.7
        [A] => 555.5
        [B] => 666.6
    )

[1] => Array
    (
        [LOGIN] => 456
        [CITY] => bangkok
        [GROUP] => bangkok-b
        [PREV_A] => 987.6
        [PREV_B] => 654.3
        [A] => 777.7
        [B] => 888.8
    )
) 
```

每个数组是 64。我试过这段代码，但结果数组有 4096（=64x64）字段而不是 64。

```
foreach($arr1 as $x){
    foreach($arr2 as $y){
        if ($x['LOGIN']=$y['LOGIN']){
            $tmp=array();
            $tmp=array_merge($x,$y);
            array_push($res,$tmp);
        }
    }
} 
```

如何正确组合它们？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:27:47.747

怎么样：

```
$newArray = Array();
foreach($arr1 as $k=>$val)
{
    if(array_key_exists($k, $arr2))
    {
        $newArray[$k] = array_merge($val, $arr2[$k]);
    }
} 
```

没有测试，但我认为它应该工作......

# jsf-2 - 如果在 Primefaces SelectOneMenu 中未选择任何内容，如何禁用提交按钮

> ID：14994410
> 
> 赞同：2
> 
> 时间：2013-02-21T04:12:14.347
> 
> 标签：jsf-2, primefaces

我有一个`p:selectOneMenu`第一个元素是字符串“请选择”，其他项目是要选择的列表。我可以在选择“请选择”时禁用提交按钮并在选择其他元素时启用按钮吗？我知道`itemDisabled`可以使用，但这不是我的要求。

```
<p:selectOneMenu value="#{bean.value}" id="selectId"
    filter="true" required="true" converter="itemConverter"
    filterMatchMode="contains" height="120">
    <f:selectItem itemLabel="Please select"/>
    <f:selectItems value="#{listBean.selectItemList}"></f:selectItems>
</p:selectOneMenu> 
```

本质上，我希望在选择第一个项目时禁用提交按钮。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T07:04:05.007

你最好换

```
<f:selectItem itemLabel="Please select"/> 
```

和

```
<f:selectItem noSelectionOption="true" itemLabel="Please select"></f:selectItem> 
```

让jsf`required`为你处理......

* * *

如果您真的想禁用该按钮，只需使用`#{bean.value}`

像这样

```
<p:commandButton id="myButonId" disabled="#{empty bean.value}".... 
```

并添加`<p:ajax update="myButonId"`到您的`<p:selectOneMenu`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:19:16.643

您好 Rajath，为什么不能在 backingbean 中使用**SelectItemList**并从 backingbean 向该列表添加标签和值？这样做的好处是，您可以将“请选择”添加为 SelectItemList 中的第一个标签，并将值添加为 null。因此，为了禁用 SubmitButton，您可以有一个**布尔标志**，可以根据 SelectItemList 中的值设置为 true 或 false（使用**valuechangeListener**并在该方法中相应地更新布尔标志）。希望此解决方案对您有所帮助。

# node.js - vhost 使用 Node.js connect.vhost 指令与 NGINX proxy_pass？

> ID：14994413
> 
> 赞同：2
> 
> 时间：2013-02-21T04:12:30.430
> 
> 标签：node.js, nginx

使用带有 connect.vhost 指令的 node.js 作为路由器而不是使用 proxy_pass 的 NGINX 的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:37:20.560

# 连接.vhost

## 优点

*   相当简单
*   只需要担心一台服务器
*   您不会在同一主机上有多个进程争夺相同的内存

## 缺点

*   不会扩展到超过 1 个核心，如果您需要在一台机器上进行集群，那么无论如何您都可以使用 nginx 或类似的东西。
*   您仍然需要一个解决方案来将端口 80 重定向到 node.js（除非您可以很好地以 root 身份运行 node），例如 iptables 或 nginx。

# nginx

## 优点

*   这被成千上万（数百万？）的网站用作他们的前端或唯一的服务器
*   不会增加太多开销
*   您可以直接提供静态文件，而无需使用 node.js

默认情况下，我几乎会选择 nginx，但我可以看到使用 Connect.vhost 来实现我需要快速且不需要扩展的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T04:18:10.387

**连接 vhost 优势：** WebSockets 可以正常工作。您不必安装和配置 nginx。整个堆栈是 node.js。行为可能更符合您的喜好。

**Nginx 优势：** Nginx 是成熟稳定的 Web 服务器。它不太可能崩溃或表现出奇怪的行为。它还可以托管您的静态资源、PHP 站点等。

如果是我，除非我需要 Nginx 的某些特定功能，否则我会选择 Connect vhost 或[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)以获得 all-node.js 堆栈。

# css - 使用外部样式表处理图像

> ID：14994414
> 
> 赞同：0
> 
> 时间：2013-02-21T04:12:31.777
> 
> 标签：css, image

使用外部样式表操作图像的最佳方法是什么？没有得到以下代码的响应：

```
<div id="poster"><img src="squatchposter.jpg" alt="Squatch Poster"></div>

#poster {
    background-image:url('squatchposter.jpg');
    width: 400px;
    height: 500px;
    background-position: center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:52:03.750

```
<img src="squatchposter.jpg" cssclass="poster ">

#poster {

width: 400px;
height: 500px;
background-position: center;
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:54:26.150

您正在操纵 div 而不是图像本身。给图像标签一个 id 属性，然后在样式表中引用该 id。

# javascript - 打破 $(document).bind('keydown',function(e){}); 功能

> ID：14994431
> 
> 赞同：-1
> 
> 时间：2013-02-21T04:13:59.853
> 
> 标签：javascript, jquery, html, keyboard

```
$(document).ready(function(){
    $(document).bind('keydown',function(e){
        key  = e.keyCode;
        if(key == 37){
            left();
        }else if(key == 38){
            up();
        }else if(key == 39){
            right();
        }else if(key == 40){
            down();
        }
    });
            alert("Hi");
}); 
```

“嗨”只有一次提醒我如何才能在它开始后突破`$(document).bind`？类似`break;`或`return;`可能的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T04:19:51.643

“嗨”只发出一次警报，因为它不在`keydown`处理程序内……它在`ready`处理程序内。

```
$(document).ready(function(){
    $(document).bind('keydown',function(e){
        key  = e.keyCode;
        if(key == 37){
            left();
        }else if(key == 38){
            up();
        }else if(key == 39){
            right();
        }else if(key == 40){
            down();
        }
    });// keydown handler ends here
            alert("Hi");
}); 
```

另外作为旁注，请尝试使用`console`方法而不是`alert()`，因为它可以更具描述性并且是非阻塞的。

**更新**

我可以从下面的评论中看到您对代码中实际发生的事情感到非常困惑......所以让我们逐步了解一下。

```
$(document).ready(function(){ 
```

在这里，您将处理程序绑定到`DOM ready`事件。当浏览器完成构建文档结构时，它会被触发。它没有考虑任何需要加载的外部资产。

```
$(document).bind('keydown', function(e){ 
```

现在我们将处理程序绑定到`keydown`事件。当事件冒泡到级别时，函数内的任何内容（并且*仅*在函数内）都将被执行。`keydown``document`

```
key = e.keyCode; 
```

您将`keyCode`事件的属性分配给一个`key`变量。我建议在它前面加上关键字`var`，以保持范围。`var key = e.keyCode;`

```
if(key == 37){
    left();
}else if(key == 38){
    up();
}else if(key == 39){
    right();
}else if(key == 40){
     down();
} 
```

现在，您将跳过一系列`if`/`else`块，如果先前声明的变量与您的条件之一匹配，则调用`left`、和函数。`up``right``down``key`

```
}); 
```

这是处理程序的**结束**`keydown`。

```
alert("Hi"); 
```

给你`alert()`留言。这是在`keydown`处理程序绑定后直接完成的，而不是在每次或任何执行所述处理程序之后完成。该行作为文档`ready`处理程序的一部分执行一次。

```
}); 
```

这是文档`ready`处理程序的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:37:17.597

我想，你不想`keydown`多次使用。

您可以使用[on](http://jqapi.com/#p=on)和[off() 之](http://jqapi.com/#p=off)类的，

```
$(document).ready(function(){
    $(document).on('keydown',function(e){
        key  = e.keyCode;
        if(key == 37){
            left();
        }else if(key == 38){
            up();
        }else if(key == 39){
            right();
        }else if(key == 40){
            down();
        }
        $(document).off('keydown'); 
    });// keydown handler ends here
            alert("Hi");
}); 
```

或者您可以使用仅触发一次的[one() 。](http://jqapi.com/#p=one)

```
$(document).ready(function(){
        $(document).one('keydown',function(e){
            key  = e.keyCode;
            if(key == 37){
                left();
            }else if(key == 38){
                up();
            }else if(key == 39){
                right();
            }else if(key == 40){
                down();
            }  
        });// keydown handler ends here
                alert("Hi");
    }); 
```

# android - Facebook 无法使用导出/签名的 APK 文件

> ID：14994433
> 
> 赞同：6
> 
> 时间：2013-02-21T04:14:05.143
> 
> 标签：android, facebook

我最近在调试我的应用程序时让 Facebook 工作，方法是按照 facebooks 开发人员页面上关于如何导出和获取我们需要放入开发人员门户的哈希密钥的说明进行操作。

所以现在完成了，我尝试使用 facebook 登录和我的应用程序的导出和签名版本。不幸的是，我无法让它工作。通过 facebook 应用程序或网页登录后，它永远不会返回登录会话。

我相信这是由于发布和签名的 apk 与我用来调试的 apk 之间的密钥不同。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T04:32:57.363

您认为密钥哈希与 debug.keystore 和发布签名密钥不同是正确的。要解决这个问题，请按照本网站上的步骤操作：[http ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1)

它有一个很好的教程，几乎可以立即解决这个问题。

它的要点是：

1.  下载[适用于 Windows 的 OpenSSl](http://code.google.com/p/openssl-for-windows/downloads/list)并将 .zip 解压缩到一个简单的位置，例如：c:\openssl，并在此文件夹的根目录中提取 zip 的所有内容。
2.  将您的签名密钥文件复制到 JRE 安装的 bin 文件夹中。例如，在我的情况下：`C:\Program Files\Java\jre7\bin`
3.  在复制签名密钥的 bin 文件夹中时，按`SHIFT`+ 右键单击​​ -> 在此处打开命令窗口。
4.  运行以下命令：keytool -exportcert -alias YOUR_ALIAS -keystore YOUR_SIGNING_KEY > c:\openssl\bin\debug.txt
5.  输入签名密钥的密码
6.  现在，导航到 c:\openssl\bin 文件夹并输入以下命令：

`openssl sha1 -binary debug.txt > debug_sha.txt`

进而，

`openssl base64 -in debug_sha.txt > debug_base64.txt`

完毕！debug_base64.txt包含您的**密钥**哈希。将其复制到您的应用程序控制台中，一切就绪。

这听起来很长，但你真的会在 4 到 5 分钟内完成。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T10:57:51.093

为了生成密钥请按照上面提供的步骤。您可能面临的主要问题是别名，因为它会抛出异常：keytool 错误：无法找到别名（可能）。如果您已签署密钥以使用以下方式释放该密钥的应用获取别名：

keytool -list -keystore

现在在 keytool -exportcert -alias -keystore c:\openssl\bin\debug.txt 中使用这个别名

现在您可以按照前面评论中提到的步骤进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-11T05:23:16.930

复制 将 SHA1 密钥粘贴到[链接](https://tomeko.net/online_tools/hex_to_base64.php)中。

在内部将 Hex 转换为 Base64。

我们可以直接从本网站转换。

为我工作。[![在此处输入图像描述](../Images/0e2e50d26c665eea158ddb4fdfa15543.png)](https://i.stack.imgur.com/sLghQ.png)

# iphone - 'MSHookIvar' 未在此范围内声明

> ID：14994436
> 
> 赞同：1
> 
> 时间：2013-02-21T04:14:11.900
> 
> 标签：iphone, objective-c, theos

我正在尝试使用 MSHookIvar 获取 ivar，但出现此错误：“'MSHookIvar' 未在此范围内声明”。我试图在我的 iphone 和 mac 中编译它，但两者都说我有这个错误。谢谢

这是我的代码：

```
#import "substrate.h"

%hook SBAwayController

- (void)_unlockWithSound:(BOOL)arg1 unlockSource:(int)arg2 isAutoUnlock:(BOOL)arg3    bypassPinLock:(BOOL)arg4{

UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame = CGRectMake(21, 80, 100, 35);
[myButton setTitle:@"My Button" forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(myButtonPressed)      forControlEvents:UIControlEventTouchUpInside];

SBUIController *ui = MSHookIvar<id>(self, "_uiController");

[[ui window ] addSubview:myButton];

%orig(arg1,arg2,arg3,arg4);

}

%end

%hook SBUIController

- (id)window{
return %orig;
}

%end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:55:58.677

我有同样的问题尝试使用`%orig;`而不是`%orig(arg1,arg2,arg3,arg4);`。记得告诉我进展如何

# php - PHP 保存和重用时间戳

> ID：14994441
> 
> 赞同：0
> 
> 时间：2013-02-21T04:14:42.810
> 
> 标签：php, timestamp

我想使用时间戳。

我知道这会输出一个时间戳：

```
$date = date_create();
echo date_format($date, 'U'); 
```

但我想知道如何利用那个时间戳。--> 将其保存到数据库，稍后将其转换为所需的时区，然后以我选择的格式输出。

我只是不知道该怎么做。

如何使用时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:37:59.450

由于您的意图只是存储然后显示您的时间戳，您可以让 mysql 完成这项工作。

您的表 DDL 可能看起来像

```
CREATE TABLE `posts` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `post_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `post` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

重要部分`DEFAULT`[`CURRENT_TIMESTAMP`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_current-timestamp) 这样当前时间戳将分配给 post_date 列`INSERT`

```
INSERT INTO `posts` (`post`) VALUES ('post1'); 
```

然后您可以使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)从 mysql 获取格式化的时间戳数据

```
SELECT id, DATE_FORMAT(post_date, '%m/%d/%Y %H:%i:%s') post_date, post 
FROM `posts` 
```

输出

```
+----+---------------------+-------+
| id | post_date           | post  |
+----+---------------------+-------+
|  1 | 02/20/2013 23:45:43 | post1 |
|  2 | 02/20/2013 23:45:43 | post2 |
+----+---------------------+-------+ 
```

但是如果你想用 php 格式化它，你可以[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_unix-timestamp)先在查询中使用

```
SELECT id, UNIX_TIMESTAMP(post_date) post_date, post FROM `posts` 
```

然后`date()`像这样格式化它，假设你`$row`通过你最喜欢的扩展（PDO或mysqli）获取了一行

```
date_default_timezone_set('America/New_York');
echo date('m/d/Y H:i:s',$row['post_date']); 
```

输出

```
02/20/2013 23:45:43 
```

# ruby - 替代双向数组 Ruby 编程

> ID：14994444
> 
> 赞同：0
> 
> 时间：2013-02-21T04:14:55.547
> 
> 标签：ruby, arrays, class, attributes

问题是我需要一个包含 n 个元素的数组，其中每个元素都有 2 个属性（颜色和名称）。我不认为使用另一个类并使每个元素成为对象是最好的方法。

```
class House
    def initialize
        @door=Array.new
        ...
    end
    ...
end

house=House.new
...
puts house.door[i].color
puts house.door[i].name 
```

另一种选择是使用二维数组，其中：

```
house.door[i][0] would be house.door[i].name
house.door[i][1] would be house.door[1].color 
```

但我仍然认为这些都不是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:19:27.650

如果它是一个简单的脚本/程序，我会使用 Struct.new(..)

你可以有：

```
Door = Struct.new(:name, :color)
door = Door.new("name", "blue")
door.color # => "blue"
door.name  # => "name" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:23:31.800

为什么不只创建一个哈希：

```
door = Hash.new
door[name] = color 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:23:41.557

> 我不认为 [...] 将每个元素都作为对象是最好的方法。

为什么你这么想？它被称为面向对象编程而不是面向数组编程是有原因的！

Ruby 是一种面向对象的语言。对象是它最擅长的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:20:25.160

我会使用 OpenStruct，让您免于设计课程。

```
house.door[0] = OpenStruct.new(color:'red', name:'Front Door')
house.door[0].color 
```

# spring - Spring MVC 为 root 提供 404

> ID：14994451
> 
> 赞同：1
> 
> 时间：2013-02-21T04:15:33.533
> 
> 标签：spring, tomcat, spring-mvc

我有一个 springmvc 应用程序，主要用于提供 JSON 数据。所有页面都将通过 Angular 决定。我有一个 index.jsp，我需要能够查看它位于 WEB-INF 目录的根目录中。

因为我通过调度程序发送所有内容，所以正在接收并发送对 root 的请求。由于没有映射到 root 的控制器，因此它被拒绝并抛出 404。

我的问题是如何在不中断应用程序其余部分的情况下允许通过 index.jsp？

```
<servlet>
    <servlet-name>cr</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/conf/spring-controllers.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>cr</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:53:31.637

将`index.jsp`文件放在 webcontext 的根目录中。然后使用以下过滤器映射：

```
<servlet-mapping>
    <servlet-name>cr</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

`/`映射将拾取所有无法解决的请求。当找不到其他映射时，它基本上充当了一个包罗万象的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-12T01:40:58.167

我也有同样的问题。web.xml 配置：

```
<servlet>
    <servlet-name>SpringMVC-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:springMVC.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>SpringMVC-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log4j.properties</param-value>
</context-param> 
```

springMVC.xml 配置：

```
<mvc:view-controller path="/" view-name="/pages/index"/>
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

如果正确，路径`/`将获取视图文件`/WEB-INF/pages/index.jsp`，但出现 404 错误。最后，我找到了原因。因为`index.html`ROOT文件夹中有一个文件。当我删除文件时，它工作正常。

# apache - 清漆“在每个”负载平衡的 Web 服务器中会起作用吗？

> ID：14994454
> 
> 赞同：1
> 
> 时间：2013-02-21T04:15:53.270
> 
> 标签：apache, caching, load-balancing, varnish

I have 2 load-balanced Web Servers. Then i do not want to put additional Varnish Servers in-between of these 2 Web Servers and the top Load Balancer.

So my question is:

*   Can Varnish be installed inside each of load-balanced Web Servers?
*   If so, how will be the result of serving the load-balanced domain? Will i get the same performance result like putting the Varnish on the top?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T21:35:57.420

是的，您当然可以在每台 Web 服务器上安装 varnish，并且假设您的命中率很高，您将看到性能和容量的提升。至于您是否会看到比在单独的服务器上运行 varnish 有更多的改进，这只能通过对这两种情况进行基准测试来确定。CPU 方面，varnish 占用的空间非常小。但是有 I/O 考虑、文件描述符限制、内存使用计算等需要解决。您要确定的一件事是，varnish 可以在物理内存中适应其整个配置的缓存大小，当机器具有其他具有大量内存需求的进程会随着时间的推移而增长和缩小时，这将成为一个更复杂的等式。

# regex - POSIX 正则表达式 - 在“jd-ednl\a2bcdn44”中找到“a2bcd”

> ID：14994455
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:01.610
> 
> 标签：regex, posix

我正在尝试寻找正则表达式语法以在“jd-ednl\a2bcdn44”中找到“a2bcd”

到目前为止，我已经尝试过 (a2bcd) 和 ^a2bcd.* 但似乎没有任何效果。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:17:47.323

如果您使用 grep 或类似方法搜索字符串以查找匹配项，则`a2bcd`可以使用。否则，如果您需要匹配整个字符串，请尝试`^.*a2bcd.*$`.

# c# - 跨线程 InvalidOperationException，InvokeRequired == false 时被 2 个线程同时访问

> ID：14994456
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:15.127
> 
> 标签：c#, .net, multithreading, invoke, invokerequired

一个控件由两个工作线程访问，第二个工作线程在第一个工作线程完成它对控件的工作之前。第二个线程 (9) 获取 InvokeRequired == false，然后第一个线程 (17) 在子控件上调用 .Refresh 时获取异常。

这是预期的行为吗？究竟是什么导致线程将控件的 InvokeRequired 视为真/假？
最后，什么是一个好的解决方案。在所有调用语句上加一个锁，并让它们调用一个单独的方法（显然是为了避免死锁）？

```
private void OnHistoryUpdate(object sender)
{
    Console.WriteLine("<< Invoke? " + this.InvokeRequired   + " " + Thread.CurrentThread.ManagedThreadId );

    if (this.InvokeRequired)
        this.Invoke(new Action<object>(OnHistoryUpdate), sender);  

    LoadTimeSeries(this.Interval);
    Console.WriteLine(">> Invoke? " + this.InvokeRequired   + " " + Thread.CurrentThread.ManagedThreadId);

} 
```

输出：

```
<< Invoke? True Thread: 17
<< Invoke? False Thread:  9
>> Invoke? False Thread:  9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:26:13.853

您的代码两次更新控件：

*   使用对 的调用`Invoke`，它将另一个调用委托给`OnHistoryUpdate`。这是安全的，因为`Invoke`将执行编组到 UI 线程。
*   调用后`Invoke`。 `Invoke`同步执行，当它返回时，您的代码将再次调用`LoadTimeSeries`，这次是不安全的（它不会`InvokeRequired`再次检查）。

我将更改方法如下，并且还考虑`BeginInvoke`改用，这样工作线程就不会阻塞。

```
private void OnHistoryUpdate(object sender)
{
    Console.WriteLine("<< Invoke? " + this.InvokeRequired   + " " + Thread.CurrentThread.ManagedThreadId );

    if (this.InvokeRequired)
        this.Invoke(new Action<object>(OnHistoryUpdate), sender);
    else  
        LoadTimeSeries(this.Interval);

    Console.WriteLine(">> Invoke? " + this.InvokeRequired   + " " + Thread.CurrentThread.ManagedThreadId);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:28:00.697

如果您在需要从您的线程调用而不使用调用的控件上调用 Refresh，则预计会出现异常。确保你不这样做，你会没事的。这就是所有需要的。

# javascript - 小书签中的错误，而不是 javascript 中的错误

> ID：14994457
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:21.147
> 
> 标签：javascript, bookmarklet

我正在管理 Bookmarklet，当它点击时在任何网站上创建一个笑脸。
Javascript 运行良好，但我无法通过书签使相同的脚本完美运行（烦人的输出）。

javascript [jsfiddle 小](http://jsfiddle.net/vusan/ST8re/)
书签[jsfiddle](http://jsfiddle.net/vusan/ST8re/1/)

现在我所做的只是安排小书签

```
javascript:(function() {
// All javascript code

}
)(); 
```

请建议如何管理书签脚本，以便我可以拖放笑脸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:35:59.763

改变

```
document.onmouseup=new Function("isdrag=false"); 
```

到

```
document.onmouseup = function() {isdrag=false}; 
```

原因：当您将所有代码包装在外部函数块中以创建书签时，“var isdrag”的范围从窗口级别更改为该外部函数的本地。另一方面`new Function("isdrag=false")`，在窗口级别创建一个新函数，转义当前范围，并且该新创建函数中的“isdrag”无法访问您认为它正在访问的“var isdrag”。解决方案是通过不使用“new Function(...)”在与“var isdrag”相同的范围内创建新函数。

# java - 在我的应用程序相机活动中抛出空点异常

> ID：14994460
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:33.907
> 
> 标签：java, android

如果我单击相机按钮，单独的相机活动会在我的应用程序中产生问题，拍照后，相机活动会停止。

```
 imageView = (ImageView)findViewById(R.id.imageview01);
 startBtn = (Button) findViewById(R.id.startBtn);
 startBtn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        try {
            startCamera();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
});
 public void startCamera() 
      throws IOException {
  Log.d("TDM_CAMERA", "Starting camera on the phone...");
  File photosDir = new File(Environment.getExternalStorageDirectory(), "photos");
  if (!photosDir.isDirectory()) {
      photosDir.mkdirs();
  }
  File imageFile = File.createTempFile("testphoto", ".jpg", photosDir);
  Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
  intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(imageFile));
  intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
  startActivityForResult(intent, 1337);
} 
```

**现在logcat**在点击相机按钮时抛出空点异常，之后它会拍照，因为空点异常突然我的应用程序停止了。

```
02-21 04:13:18.672: E/AndroidRuntime(1456): FATAL EXCEPTION: main
02-21 04:13:18.672: E/AndroidRuntime(1456): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.ActivityThread.access$1300(ActivityThread.java:141)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.os.Looper.loop(Looper.java:137)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at java.lang.reflect.Method.invokeNative(Native Method)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at java.lang.reflect.Method.invoke(Method.java:511)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at dalvik.system.NativeStart.main(Native Method)
02-21 04:13:18.672: E/AndroidRuntime(1456): Caused by: java.lang.NullPointerException
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:379)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:322)
02-21 04:13:18.672: E/AndroidRuntime(1456):     at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
02-21 04:13:18.672: E/AndroidRuntime(1456):     ... 11 more 
```

现在`LogCat`显示我的活动抛出空点异常，这使我的应用程序崩溃 **这是我的活动结果**

```
if (requestCode == IMAGE_CAPTURE) {
      if (resultCode == RESULT_OK){
          Log.d("ANDRO_CAMERA","Picture taken!!!");
          imageView.setImageURI(imageUri);
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:15:17.127

通过如下声明请求代码来尝试如下：

> ```
> startActivityForResult(intent, IMAGE_CAPTURE); 
> ```

或者

您可以向它提供 id，如下所示：

> ```
>  private static final IMAGE_CAPTURE=1337; 
> ```

并将其用作：

> ```
> startActivityForResult(intent, IMAGE_CAPTURE); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:02:00.490

如果您至少花几秒钟的时间来[谷歌](http://bit.ly/VxH0HO)这个错误，您会注意到这与您的代码无关。

# android - 在活动之间切换时无法保存日期

> ID：14994461
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:36.450
> 
> 标签：android, saving-data

我的应用程序中有两个活动现在我想保存 editText 的文本，当用户转到下一个时，这是由用户给出的，在返回 MainActivity 后，该值应该放在 editText 我的代码是

```
public class MainActivity extends Activity {

EditText editText;
String name = null;

@Override
protected void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    editText = (EditText) findViewById(R.id.editText1);
    if(savedInstanceState == null){
    editText.setText("Some Thing");
    }else{
        String newValue = savedInstanceState.getString("myData");
        editText.setText(newValue);
    }
    Log.d("ARSHAY....", "in onCreate()");
}

@Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onSaveInstanceState(savedInstanceState);
    editText = (EditText) findViewById(R.id.editText1);
    name = editText.getText().toString();
    savedInstanceState.putString("myData", name);

}

public void goToNextArsh(View view ) {

    Intent intent = new Intent(MainActivity.this, Second.class);
    startActivity(intent);
}
  } 
```

但这不会在返回 MainActivity 时设置新输入。有没有人知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:48:22.567

首先你为什么要使用`editText = (EditText) findViewById(R.id.editText1);`两次。仅用于`onCreate()`

并使用此代码

```
@Override
protected void onPause() {
    SharedPreferences pref = getSharedPreferences("YOUR_KEY", MODE_PRIVATE);
    Editor edit = pref.edit();
    edit.putString("som.arshay.retreive.data", editText.getText().toString());
    edit.commit();
    super.onPause();
}

@Override
protected void onResume() {
    SharedPreferences pref = getSharedPreferences("YOUR_KEY", MODE_PRIVATE);
    String newValue = pref.getString("som.arshay.retreive.data", "");
    editText.setText(newValue);
    super.onResume();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:01:18.190

使用这些方法`onSaveInstanceState(Bundle outState)`和`onRestoreInstanceState(Bundle savedInstanceState)`

# ios - 在导航栏上查看部分内容（类似 Feedly 应用程序）

> ID：14994462
> 
> 赞同：0
> 
> 时间：2013-02-21T04:16:44.583
> 
> 标签：ios, xcode, uiview, uiviewcontroller, modalviewcontroller

我有一个可以使用过滤器订购的 UITableView。而不是使用模态视图，我只想制作一个从屏幕左侧开始并部分覆盖我的 tableView 的视图动画。

这是我希望我的“过滤器视图”看起来像的示例：

没有过滤器：

![没有过滤器](../Images/04d12139bb5a7bdc12166f60a561095e.png)

使用过滤器：

![带过滤器](../Images/f239083693210fe051d44c81e3e30dc4.png)

有什么诀窍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:14:48.283

使用可重用代码的正确方法：

将动画类别添加到`UIView`

```
@interface UIView (MyAnimation)
-(void)slideInWithDuration:(NSTimeInterval)duration;

//implementation

-(void)slideInWithDuration:(NSTimeInterval)duration
{
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    float nSpace = 0.0f //put any value you think right
    CGFloat extraOffset = self.view.frame.size.width / 2 + nSpace;

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.fromValue = [NSValue valueWithCGPoint:CGPointMake(screenRect.origin.x - extraOffset, self.view.center.y)];
    animation.toValue = [NSValue valueWithCGPoint:self.view.center];
    animation.duration = duration;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    [self.layer addAnimation:animation forKey:@"SlideInAnimation"];
} 
```

在`SomeWhereViewController.m`

```
UIWindow *mainWindow = [[UIApplication sharedApplication] keyWindow];
UIView *someView = [[UIView alloc] init];
someView.frame = // customize to your like
[mainWindow addSubview:someView];

[someView slideInWithDuration:0.7]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:19:36.870

一种方法是，添加这个带有框架集的新视图，使视图位于当前视图之外，然后使用动画块将帧动画到当前位置。您需要在`self.navigationController.view`.

例如：-

```
newView.frame = frameOutsideCurrentView;
[UIView animateWithDuration:0.5
    delay:1.0
    options:UIViewAnimationCurveEaseOut
    animations:^{
        newView.frame = currentFrame;
    } 
    completion:^(BOOL finished){

    }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:21:32.727

将覆盖视图包裹在 a 中`UIWindow`并将`windowLevel`属性设置为`UIWindowLevelAlert`or `UIWindowLevelStatusBar`。

# api - 如何获取 Facebook Insight 的“平台帖子”的 API 信息？

> ID：14994464
> 
> 赞同：-1
> 
> 时间：2013-02-21T04:17:11.817
> 
> 标签：api, facebook-insights

找不到Facebook Insight的“平台帖子”和“优惠”的API信息？

Facebook Insight 概述按帖子类型为管理员提供帖子信息 - 帖子、照片、链接、视频、平台帖子、问题和报价。但是我找不到相关的API信息。

我怎样才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:10:42.070

参考报价：[https ://developers.facebook.com/docs/reference/api/offer/](https://developers.facebook.com/docs/reference/api/offer/)

参考页面优惠：[https ://developers.facebook.com/docs/reference/api/page/#offers](https://developers.facebook.com/docs/reference/api/page/#offers)

# ruby - Ruby 无法加载 JSON gem？

> ID：14994468
> 
> 赞同：3
> 
> 时间：2013-02-21T04:17:44.617
> 
> 标签：ruby

当我尝试启动需要 JSON gem 的脚本时，它给了我一个错误：

```
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- json (LoadError)
from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /home/XXXXXX/XXXXXX/XXXXXX/XXXX.rb:2 
```

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T04:49:25.530

您正在运行 Ruby 1.8+，它出现：

```
/usr/lib/ruby/site_ruby/1.8 
```

这意味着您的 Ruby 不会自动加载 Rubygems，因此您必须告诉它该做什么。尝试：

```
require 'rubygems'
require 'json' 
```

* * *

在命令行调用的 Rubygems`gem`有许多可用的命令。尝试在命令行输入：

```
gem help 
```

获取它可以做什么的列表。

现在最有用的是：

```
gem list json 
```

以“json”开头的宝石列表或：

```
gem search json 
```

获取名称中带有“json”的宝石列表。

目标是查看 JSON gem 是否在其应有的位置。如果是，它将显示在命令的输出中。

另一个有用的 gem 命令是：

```
gem update --system 
```

它告诉 Rubygems 自我更新。有时 Rubygems 应用程序维护者会发布更新，而该命令就是我们告诉它使用最新版本引导自身的命令。因为您运行的是旧版本的 Ruby，所以 Rubygems 迫切需要更新的可能性非常大。但是，等等，还有更多。

因为您正在调整 Ruby 的系统版本，所以您需要使用：

```
sudo gem update --system 
```

“sudo”调整您的帐户以暂时具有系统管理功能。

Rubygems 完成自身升级后，如果 json 没有出现在`list`or的输出中`search`，则需要使用以下命令安装它：

```
sudo gem install json 
```

此时运行`search`or`list`命令应该可以工作，并且使用上述两个要求运行脚本应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T04:44:57.403

您可能没有`JSON`安装 gem。要检查`gem list`在终端中使用该命令，并查看是否看到`json`，则它已安装，如果没有，则 do `gem install json`。检查以确保它在`gem list`安装后。如果是的话，你应该很高兴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:25:40.967

您是否安装了 JSON gem？在那条宝石之路上？`gem install json`应该够了

# sql - 更新代码中的语法错误对此有任何帮助

> ID：14994471
> 
> 赞同：0
> 
> 时间：2013-02-21T04:17:51.583
> 
> 标签：sql, vb.net, sql-update

在我的更新查询中，我在以下代码中收到更新语法错误......

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    Dim strup As String
    Try
        strup = "update MCA set urno=" & CInt(txtUrn.Text) & ",sname='" & txtName.Text & "',fname='" & txtFname.Text & "',CAddress='" & txtCAdd.Text & "',PAddress='" & txtPAdd.Text & "',EmailID='" & txtEid.Text & "',cmbdate=" & CInt(cmbDate.Text) & ",cmbmonth='" & cmbMonth.Text & "',cmbyear=" & CInt(cmbYear.Text) & ",Gender='" & cmbGender.Text & "',Mobile" & CLng(txtMno.Text) & ",10PSSC=" & CInt(txt10Per.Text) & ",12PHSC=" & CInt(txt12Per.Text) & ",10YSSC='" & cmb10YofPass.Text & "',12YHSC='" & cmb12YofPass.Text & "',Course='" & cmbNameofGCourse.Text & "',gper=" & CInt(txtGPer.Text) & " WHERE urno =" & (txtUrn.Text) & ";"
        Dim command As New OleDb.OleDbCommand(strup, con)
        command.ExecuteNonQuery()
        con.Open()
        con.Close()
        MsgBox("Record Updated")

    Catch ex As Exception
        MsgBox(ex.ToString())
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:41:20.220

与上面的答案相同，并且在最后一个值上附加
`WHERE urno =" & (txtUrn.Text) & ";"`了数字或文本。

如果它是数字，你应该转换它或者它是文本，那么你应该把它作为
`WHERE urno ='" & (txtUrn.Text) & "';"`

这就是您的查询的样子。

```
strup = "update MCA set urno=" & CInt(txtUrn.Text) & ",sname='" & txtName.Text & "',fname='" & txtFname.Text & "',CAddress='" & txtCAdd.Text & "',PAddress='" & txtPAdd.Text & "',EmailID='" & txtEid.Text & "',cmbdate=" & CInt(cmbDate.Text) & ",cmbmonth='" & cmbMonth.Text & "',cmbyear=" & CInt(cmbYear.Text) & ",Gender='" & cmbGender.Text & "',Mobile=" & CLng(txtMno.Text) & ",10PSSC=" & CInt(txt10Per.Text) & ",12PHSC=" & CInt(txt12Per.Text) & ",10YSSC='" & cmb10YofPass.Text & "',12YHSC='" & cmb12YofPass.Text & "',Course='" & cmbNameofGCourse.Text & "',gper=" & CInt(txtGPer.Text) & " WHERE urno ='" & (txtUrn.Text) & "';" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:22:40.940

尝试：

```
strup = "update MCA set urno=" & CInt(txtUrn.Text) & ",sname='" & txtName.Text & "',fname='" & txtFname.Text & "',CAddress='" & txtCAdd.Text & "',PAddress='" & txtPAdd.Text & "',EmailID='" & txtEid.Text & "',cmbdate=" & CInt(cmbDate.Text) & ",cmbmonth='" & cmbMonth.Text & "',cmbyear=" & CInt(cmbYear.Text) & ",Gender='" & cmbGender.Text & "',Mobile=" & CLng(txtMno.Text) & ",10PSSC=" & CInt(txt10Per.Text) & ",12PHSC=" & CInt(txt12Per.Text) & ",10YSSC='" & cmb10YofPass.Text & "',12YHSC='" & cmb12YofPass.Text & "',Course='" & cmbNameofGCourse.Text & "',gper=" & CInt(txtGPer.Text) & " WHERE urno =" & (txtUrn.Text) & ";" 
```

你有`"',Mobile" & CLng(txtMno.Text)`而不是`"',Mobile=" & CLng(txtMno.Text)`

# java - 使用 ArrayList 的 Parcelable 实现

> ID：14994475
> 
> 赞同：4
> 
> 时间：2013-02-21T04:18:06.110
> 
> 标签：java, android, android-intent, parcelable

我认为这只是一个愚蠢的错误，但`ArrayList`总是结束`null`。这让我发疯，所以我想寻求帮助。

对象类：

```
import android.os.Parcel;
import android.os.Parcelable;

public class StoryTag implements Parcelable {

    private String tagTitle;
    private int occurrence;

    public StoryTag() {

    }

    public StoryTag(Parcel in) {
        tagTitle = in.readString();
        occurrence = in.readInt();
    }

    public String getTagTitle() {
        return tagTitle;
    }

    public void setTagTitle(String tagstring) {
        this.tagTitle = tagstring;
    }

    public int getOccurrence() {
        return occurrence;
    }

    public void setOccurrence(int occurrence) {
        this.occurrence = occurrence;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(tagTitle);
        dest.writeInt(occurrence);
    }

    public int describeContents() {
        return 0;
    }

    public static final Parcelable.Creator<StoryTag> CREATOR = new Parcelable.Creator<StoryTag>() {

        public StoryTag createFromParcel(Parcel in) {
            return new StoryTag(in);
        }

        public StoryTag[] newArray(int size) {
            return new StoryTag[size];
        }
    };
} 
```

`MainActivity`：

```
Intent tagIntent=new Intent(this,DisplayTagList.class);
tagIntent.putExtra("taglist", taglist);
startActivity(tagIntent);
return true; 
```

接收活动：

```
Bundle storyTagBundle = getIntent().getExtras();
ArrayList<StoryTag> listoftags = storyTagBundle.getParcelable("taglist"); 
```

非常感谢您提供的任何帮助。把我的头发拉到这里是因为我认为这是一个小错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:28:36.830

`putExtra()`and方法将`getSerializable()`存储和检索`ArrayList<?>`您的自定义对象，无需实现接口。（您的自定义对象类应该实现`Serializable`接口）。

但是在您的情况下，您可以简单地使用[`putParcelableArrayListExtra(String name, ArrayList<? extends Parcelable> value)`](http://developer.android.com/reference/android/content/Intent.html#putParcelableArrayListExtra%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29)and [`getParcelableArrayListExtra(String name)`](http://developer.android.com/reference/android/content/Intent.html#getParcelableArrayListExtra(java.lang.String))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:23:26.803

`ArrayList with Parcelable`您可以从这个完整的[示例](https://stackoverflow.com/questions/7400564/android-parcelable-retailerorderactivity-java-return-null/7400675#7400675)中获得清晰的实施思路。

# javascript - chrome profiler 产生看似随机的结果

> ID：14994477
> 
> 赞同：0
> 
> 时间：2013-02-21T04:18:13.377
> 
> 标签：javascript, profiling, google-chrome-devtools

我正在尝试确定三种计算方法中的哪一种最快。为了确定这一点，我简单地循环大量调用每个并期望查看分析器以查看每个需要多长时间。

使用 firefox + firebug 和 IE 9 开发工具进行分析可以得出合理的结果，显示每个函数花费了多少时间。但是在谷歌浏览器中，我从来没有在配置文件结果中看到所有三个功能，更糟糕的是，它每次都显示不同的功能，但从来没有全部三个。每次运行分析器时，我都会继续获得不同的外观结果。

我假设分析器可以工作，但我只是不知道如何使用它，但这对我来说确实很糟糕。我在[文档](https://developers.google.com/chrome-developer-tools/docs/cpu-profiling)中看不到任何解释这种行为的东西。（我使用的是普通版本，但也尝试了开发者版本（版本 26.0.1410.10 dev-m），看看它是否工作得更好 - 它没有。增加循环运行的次数，似乎也没有帮助）

示例 Firebug 结果（按预期显示 3 个函数 + 运行和 onClick）： ![在此处输入图像描述](../Images/2d124726a39d8702f4a07267198e9591.png)

示例 Chrome 结果 #1（仅显示 3 个中的 1 个）： ![Chrome 分析器结果 #1](../Images/e0288623b80f9a65705e3652b728ec8e.png)

示例 Chrome 结果 #2（显示 3 个中的 2 个）： ![Chrome 分析器结果 #2](../Images/593841e414e811be48cccac20e9d050d.png)

正在分析的代码是：

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <button onclick="run()">Run Test</button>
    <script type="text/javascript">
        var R = 6371,
            toRad = Math.PI / 180;

        function haversine1(lat1, lon1, lat2, lon2) {
            var dLat = (lat2 - lat1) * toRad,
                dLon = (lon2 - lon1) * toRad,
                a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(lat1 * toRad) * Math.cos(lat2 * toRad) *
                    Math.sin(dLon / 2) * Math.sin(dLon / 2),
                c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return (R * c);
        }

        function haversine2(lat1, lon1, lat2, lon2) {
            lat1 = lat1 * toRad;
            lon1 = lon1 * toRad;
            lat2 = lat2 * toRad;
            lon2 = lon2 * toRad;
            var dLat = lat2 - lat1,
                dLon = lon2 - lon1,
                a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(lat1) * Math.cos(lat2) *
                    Math.sin(dLon / 2) * Math.sin(dLon / 2),
                c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return (R * c);
        }

        function lawOfCosines(lat1, lon1, lat2, lon2) {
            lat1 = lat1 * toRad;
            lon1 = lon1 * toRad;
            lat2 = lat2 * toRad;
            lon2 = lon2 * toRad;
            return Math.acos(Math.sin(lat1) * Math.sin(lat2) +
                                Math.cos(lat1) * Math.cos(lat2) *
                                Math.cos(lon2 - lon1)) * R;
        }

        function run() {
            console.log('Test start');
            var lat1 = 90,
                lat2 = -90,
                lon1 = 180,
                lon2 = -180,
                i = 0,
                x,
                y,
                z
            while (i++ < 1000000) {
                lat1 -= .01;
                lat2 += .01;
                lon1 -= .01;
                lon2 += .01;

                if (lat1 < -90) lat1 = 90;
                if (lat2 > 90) lat2 = -90;
                if (lon1 < -180) lon1 = 180;
                if (lon2 > 180) lon2 = -180;

                x = haversine1(lat1, lon1, lat2, lon2);
                y = haversine2(lat1, lon1, lat2, lon2);
                z = lawOfCosines(lat1, lon1, lat2, lon2);

                if (i % 1000 === 0) {
                    console.log('x: ' + x + ' y: ' + y + ' z: ' + z);
                }
            }
            console.log('Test end');
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:18:37.203

Chrome DevTools 使用[统计 CPU 分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29) 每秒扫描 1000 次 javascript 调用堆栈。结果，它获得了许多堆栈跟踪并将它们组合成一个调用树。

优点：执行的 javascript 代码的小降级。

缺点：对于运行时间少于 0.5 秒的 js 代码，它将显示不正确的结果。

我建议为每个函数使用单独的循环，删除 console.log 并增加计数器值。v8 也可能内联函数的主体，我不确定分析器是否能够单独计算内联代码。

# asp.net-mvc-4 - asp.net mvc 模型绑定仅适用于模型的某些成员

> ID：14994478
> 
> 赞同：2
> 
> 时间：2013-02-21T04:18:15.483
> 
> 标签：asp.net-mvc-4, model-binding

我有一个强类型视图，它有一个复杂的模型（一个有孩子、孙子等的模型）。

我遇到了困惑，因为我无法绑定模型的所有成员。在我的情况下，如果我只使用第一个孩子，我只能成功绑定模型，它是孙子。如果我尝试绑定第二个孩子，当我从视图返回时，在我的控制器中我得到空值。

有人遇到过这种类型的问题吗？如何克服它？

模型在这里 [https://dl.dropbox.com/u/50400766/NewWellVo.cs](https://dl.dropbox.com/u/50400766/NewWellVo.cs) [https://dl.dropbox.com/u/50400766/WellVo.cs](https://dl.dropbox.com/u/50400766/WellVo.cs)

视图在这里 [https://dl.dropbox.com/u/50400766/NewWellWizard.cshtml](https://dl.dropbox.com/u/50400766/NewWellWizard.cshtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:01:30.993

您能否发布用于“AddWellActivity”操作的部分视图？似乎存在数据绑定问题。

# unix - 如何通过 Expect 获取远程主机名？

> ID：14994479
> 
> 赞同：0
> 
> 时间：2013-02-21T04:18:23.390
> 
> 标签：unix, expect, hostname

我正在尝试使用 Expect 在远程 Unix 系统上自动执行一些命令，这些命令尝试根据*远程*主机名获取数据。一个例子，

```
expect -re $prompt
send "lsnrctl status listener_`hostname`\r" 
```

问题是，当通过 Expect 运行时，此命令获取本地主机名而不是远程主机名，导致没有有用的输出。

我需要对 Expect 脚本进行哪些更改以使命令获取远程主机名？还是我需要对命令本身进行任何更改？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:24:55.570

使用单引号。本地 shell 不会解释单引号中的字符串：

```
expect -re $prompt 
send 'lsnrctl status listener_`hostname`\r' 
```

# javascript - Youtube 无铬播放器无法与 AS3 上的播放列表一起使用

> ID：14994480
> 
> 赞同：1
> 
> 时间：2013-02-21T04:18:28.040
> 
> 标签：javascript, youtube

我在网站上有这段代码，可以在无铬播放器中加载 Youtube 播放列表。

```
player.loadPlaylist({ 
        list:'PLB053FF53834A76D4', 
        listType: 'playlist', 
        index:1, 
        startSeconds:0, 
        suggestedQuality:'medium' 
}); 
```

它工作得很好，但现在，它不加载视频。我已经尝试过使用参数和对象语法，但它们都不起作用。如果我尝试加载单个视频，或者将视频 ID 数组作为参数的播放列表，它可以正常工作。

API 的工作方式是否发生了变化？

我最后的手段是将播放列表加载到嵌入式播放器而不是无铬播放器中。我怎么能加载这样的播放列表？我只看过单个视频的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T23:41:47.800

这是您正在寻找的示例：

```
player.loadPlaylist({
    'playlist': 'PLB053FF53834A76D4',
    'startSeconds': 0,
    'endSeconds': 60,
    'suggestedQuality': 'medium'
}); 
```

[这是最新的 API 文档。](https://developers.google.com/youtube/flash_api_reference)

# paypal - 使用Paypal在网站接受信用卡支付

> ID：14994483
> 
> 赞同：2
> 
> 时间：2013-02-21T04:19:15.693
> 
> 标签：paypal, credit-card

我想知道它是否可以实现：

我想在我自己的网站上接受用户的信用卡付款。假设我有一种捕获信用卡信息的形式，理想情况下，我想将客户端中的所有信息（根本不通过服务器）发布到 Paypal 以处理并让 Paypal 处理付款并重定向回我的网站。

由于 PCI 合规性，所有信用卡信息都不会通过我的服务器。我可以从贝宝获得的唯一信息是付款成功或失败以及在网站上完成交易所需的一些非敏感信息。

我发现 Payflow pro 可能是一个解决方案，但我不知道如何构建 nvp 请求并重定向到 Paypal。在服务器端使用 SDK 很容易，但不幸的是我不能使用它。

谁能帮我解决这个问题？

提前致谢， LD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:17:05.940

看看[DoDirectPayment API](https://www.x.com/developers/paypal/documentation-tools/api/dodirectpayment-api-operation-nvp)。

这应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T14:36:07.283

我正在使用此代码。

```
$infos = array(
            'METHOD' => 'DoDirectPayment', 
            'USER' => $paypal_pros_username, 
            'PWD' => $paypal_pros_password, 
            'SIGNATURE' => $paypal_pros_signature, 
            'VERSION' => urlencode('115'), 
            'PAYMENTACTION' => $_POST['paypal_pros_transaction_type'],
            'IPADDRESS' => $_SERVER['REMOTE_ADDR'],
            'CREDITCARDTYPE' => $_POST['creditCardType'], 
            'ACCT' => $_POST['creditCardNumber'],
            'EXPDATE' => $_POST['expDateMonth'].$_POST['expDateYear'],
            'CVV2' => $_POST['cvv2Number'], 
            //'EMAIL' => $_POST['email'], 
            'FIRSTNAME' => $_POST['firstName'], 
            'LASTNAME' => $_POST['lastName'], 
            'STREET' => $_POST['address1'], 
            'CITY' => $_POST['city'], 
            'STATE' => $_POST['state'],                     
            'ZIP' => $_POST['zip'], 
            'COUNTRYCODE' => $_POST['country'], 
            'AMT' => $_POST['amount'], 
            'CURRENCYCODE' => $_POST['PayPal_pros_curency'], 
            'DESC' => $_POST['paypal_pro_desc'], 
            'NOTIFYURL' => 'https://website.com/ipn.php'
            );

// Loop through $infos array to generate the NVP string.
$nvp_string = '';
foreach($infos as $var=>$val)
{
    $nvp_string .= '&'.$var.'='.urlencode($val);    
}

// Send NVP string to PayPal and store response
// Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $strPurchaseURL);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvp_string);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

// Get response from the server.
$result = curl_exec($ch);

// Parse the API response
parse_str($result, $output);

    if(array_key_exists('ACK', $output)){

print_r($output);

            if($output['ACK']=="Success"){
                //Success Email or save data in database etc...

                }
            elseif($output['ACK']=="Failure"){
                //Failure Email or send any error etc...

                }
            else {
                echo 'There is any error! Please go back and try again.';
                }   
        }
    else {
        echo 'There is any error! Please go back and try again.';
        } 
```

# python - 将函数传递给具有不同数量变量的函数

> ID：14994484
> 
> 赞同：1
> 
> 时间：2013-02-21T04:19:19.490
> 
> 标签：python, function

假设我有一个函数`def foo(A, B)`。

现在我有另一个函数`bar(func)`，其中`func`是一个只接受一个变量的函数。我想传入`foo`as `func`，但第二个变量`B`始终固定为 300。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:20:10.773

您使用`lambda`：

```
bar(lambda x: foo(x,300)) 
```

基本上，

```
func = lambda x: x*x 
```

或多或少等同于：

```
def func(x):
   return x*x 
```

所以在这种情况下，我们使用的东西或多或少等同于：

```
def new_func(x):
    return foo(x,300) 
```

然后我们传递等价的`new_func`to `bar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T04:21:37.600

Lambda 是最简单的，但您也可以将 functools.partial 用于更复杂的情况：

```
import functools

bar(functools.partial(foo, B=300)) 
```

# jakarta-mail - 如何使用 java mail 在邮件正文中打印名称列表

> ID：14994496
> 
> 赞同：0
> 
> 时间：2013-02-21T04:20:27.350
> 
> 标签：jakarta-mail

我正在使用 Java 邮件 api 发送电子邮件。我在邮件正文中嵌入了一个图像。它正确地出现在邮件正文中。现在我正在尝试在邮件正文中添加名称列表，迭代此列表并将其添加到`StringBuilder`. 我在每个名称之间添加了新行。在我打印时在控制台`StringBuilder`中，它在新行中打印每个名称。但是当我通过这个构建器时

```
StringBuilder emailContent;
MimeBodyPart htmlPart = new MimeBodyPart();
htmlPart.setContent(emailContent, "text/html"); 
```

我得到一个`IOException`.

& 当我使用 toString() 方法传递生成器时，我在同一行中获取名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:50:34.233

JavaMail 需要知道如何将对象转换为文本/html 内容的正确形式。它知道如何为 String 执行此操作，但不知道如何为 StringBuilder 执行此操作。使用 emailContent.toString()。

在 html 内容中插入换行符不会导致 html 输出中的换行符。您需要插入一个 html break <br/> 或类似的东西。

# jndi - LDAP JNDI 子树搜索

> ID：14994497
> 
> 赞同：2
> 
> 时间：2013-02-21T04:20:55.933
> 
> 标签：jndi, subtree

我在搜索 LDAP 时遇到问题。如果我使用以下代码，我可以使用以下代码获得级别 2。但我想获得 4 级对象。感谢您提供任何帮助。

当前搜索库：`ou=HQ2-BR`，过滤器：`"(ou=*)";`

问候， Man Pak Hong, Dave manpakhong@hotmail.com manpakhong@gmail.com

LDAP 结构

*   o=com,dc=rabbitforever #(0 级)
    *   ou=HQ2-BR // 引用其他广告#(level 1)
        *   ou=TSB // #(2级)
        *   ou=BM1 // #(2级)
        *   ou=IIC // #(2级)
            *   ou=People // #（3级）
                *   uid=IICCIO // #(4级)
                *   uid=IICSIO1 // #(4级)

编码：

```
public void loopLDAP() {
    String adminName = "uid=writer,ou=People,o=com,dc=rabbitforever";
    String adminPassword = "password";

    Properties env = new Properties();
    env.put(Context.INITIAL_CONTEXT_FACTORY,
            "com.sun.jndi.ldap.LdapCtxFactory");
    //env.put(Context.PROVIDER_URL,
    //        "ldap://192.168.1.127:389/dc=rabbitforever,dc=com");
    env.put(Context.PROVIDER_URL,
            "ldap://10.10.176.156:389/o=com,dc=rabbitforever");
    //env.put(Context.SECURITY_AUTHENTICATION, "none");

    env.put(Context.SECURITY_PRINCIPAL, adminName);
    env.put(Context.SECURITY_CREDENTIALS, adminPassword);
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.REFERRAL, "follow");

    try {
        LdapContext ctx = new InitialLdapContext(env, null);
        ctx.setRequestControls(null);

        String filter = "(ou=*)";

        NamingEnumeration<?> namingEnum = ctx.search("ou=HQ2-BR", filter,
                getSimpleSearchControls());
        while (namingEnum.hasMore()) {
            SearchResult result = (SearchResult) namingEnum.next();
            Attributes attrs = result.getAttributes();

            String cn = "";
            String sn = "";
            String description = "";
            String uid = "";
            if (null != attrs.get(cn)) {
                cn = attrs.get("cn").toString();
            }
            if (null != attrs.get("sn")) {
                sn = attrs.get("sn").toString();
            }
            if (null != attrs.get("description")) {
                description = attrs.get("description").toString();
            }
            if (null != attrs.get("uid")) {
                uid = attrs.get("uid").toString();
            }
            System.out.println(cn + " | " + sn + " | " + description
                    + " | " + uid);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} // end loopLDAP() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:55:13.087

您可能需要用 构造`SearchControls`对象`SearchControls.SUBTREE_SCOPE`，并将其传递给`ctx.search`方法。请参阅另一个答案的[示例](https://stackoverflow.com/a/10979944/902859)。

# java - 在 for 循环中添加值

> ID：14994505
> 
> 赞同：-1
> 
> 时间：2013-02-21T04:23:10.703
> 
> 标签：java, for-loop

我似乎无法弄清楚如何在 for 循环中添加值。我应该得到这样的输出：

> ```
> How many numbers?
> 3     //user inputs numbers desired.
> number please
> 1
> 2
> 3
> Total is 6 
> ```

任何帮助将不胜感激！

```
import java.util.Scanner ;
public class AddNumbers {

public static void main(String[] args) {
    int sum = 0;
    int count = 1;
    Scanner scan = new Scanner(System.in);
        System.out.println("How many numbers?");
        int n = scan.nextInt();

        for(int i=0; i <= n; i++){
            System.out.println ("number please");
            int c = scan.nextInt();

            //stuck

        }        
        System.out.println("Total is " + sum);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:44:20.090

```
public static void main(String[] args)
{
    Scanner scan = new Scanner(System.in);
    int sum=0;
    System.out.println("How many numbers?");
    int count = scan.nextInt();
    System.out.println("number please");

    // This is what you need to change
    for(int i=0; i<count; i++)
    {
        sum += scan.nextInt();
    }

    System.out.println("Total is " + sum);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:24:23.023

```
for(int i=0; i < n; i++){
    System.out.println ("number please");
    int c = scan.nextInt();
    sum =sum+c; // add this

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:25:25.017

只需在`for`循环外添加一个变量并将您的值添加到该变量即可计算总数：

```
int n = scan.nextInt();
int total = 0;
for(int i=0; i <= n; i++){
    System.out.println ("number please");
    int c = scan.nextInt();
    //stuck
    total += c;
} 
```

# php - PHP for MySQL 中的准备语句，我做错了什么？

> ID：14994514
> 
> 赞同：-2
> 
> 时间：2013-02-21T04:23:38.380
> 
> 标签：php

以前在即将被弃用的普通 mysql 函数中，我有：

```
 // On first connect to database, create a user to hold data for users not logged in
    if (mysql_num_rows(mysql_query("SELECT id FROM users WHERE id=1")) === 0) {
        mysql_query("INSERT INTO users(id,username,email,password) VALUES(1,'anonymous','anonymous','" . password_hash("noidentity", PASSWORD_BCRYPT) . "')");
    } 
```

这就是我现在所拥有的，试图完成同样的事情：

```
 // On first connect to database, create a user to hold data for users not logged in
    $stmt = $db->prepare("SELECT id FROM users WHERE id = ?");
    $stmt->execute(1);
    $stmt->store_result();
    if ($stmt->num_rows == 0) {
        $stmt = $db->prepare("INSERT INTO users (id, username, email, password) VALUES (?, ?, ?, ?)");
        $stmt->execute(1, 'anonymous', 'anonymous', password_hash("noidentity", PASSWORD_BCRYPT));
    } 
```

我不断收到错误“警告：mysqli_stmt::execute() 期望正好 0 个参数，给定 1”似乎它期望 1，因为我有 1 个问号，但我显然做错了什么。

我对以下那些做对了吗？

```
$stmt = $db->prepare("UPDATE users SET wins = wins + 1 WHERE id = ?");
$stmt->execute($_SESSION["id"]); 
```

我应该有吗？为胜利=部分？如果是这样，如果它取决于那里的当前值，我将如何填写该值？

关于什么：

```
$stmt = $db->prepare("SELECT id, username, password FROM users WHERE email = ?");
$stmt->execute($email);
$row = $stmt->fetch();

if (password_verify($password, $row["password"])) { 
```

我在那儿做吗？

出于安全目的，我只是试图掌握这些准备好的陈述，并发现它有点困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:25:40.167

使用此代码，您必须使用`bind_param`来设置数据。

```
$stmt = $db->prepare("SELECT id FROM users WHERE id = ?");
$stmt->bind_param('i', 1);
$stmt->execute(); 
```

# dart - 如何在 Dart 中等待单元测试中的异步设置？

> ID：14994518
> 
> 赞同：11
> 
> 时间：2013-02-21T04:24:02.983
> 
> 标签：dart, dart-unittest

我的单元测试需要一个需要异步运行的设置。也就是说，我需要在运行测试之前等待设置完成，但设置处理的是 Futures。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T04:24:02.983

使用 Dart M3，该`setUp`函数可以选择返回一个`Future`. 如果 setUp 返回一个 Future，unittest 框架将在运行各个测试方法之前等待 Future 完成。

这是一个例子：

```
group(('database') {
  var db = createDb();
  setUp(() {
    return openDatabase()
      .then((db) => populateForTests(db));
  });

  test('read', () {
    Future future = db.read('foo');
    future.then((value) {
      expect(value, 'bar');
    });
    expect(future, completes);
  });
}); 
```

了解有关设置的更多[信息](http://api.dartlang.org/docs/releases/latest/unittest.html#setUp)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-12-21T12:22:55.427

虽然 Seth 接受的答案是正确的，但以下示例可能更易于理解和重用。它返回 a`Future`并在 Future 的异步工作函数中执行设置：

```
setUp(() {
  return Future(() async {
    await someFuture();
    callSomeFunction();
    await anotherFuture();
  });
}); 
```

测试用例将在最后一次调用`anotherFuture()`返回后被调用。

# fortran - 两种功能，不同的结果。疑似 fortran 功能

> ID：14994521
> 
> 赞同：0
> 
> 时间：2013-02-21T04:24:26.630
> 
> 标签：fortran, precision

我正在做一个蒙特卡洛（MC）模拟。我有一种方法可以从头计算粒子的能量，也有一种方法可以只计算旧状态和新状态之间的差异。为了测试对我所做的代码的修改，我通过两种方式计算了一步后的能量，得到了不同的结果。这个数字很低（10^-5 的规模，而总能量的规模为 10^8），但我预计它会更低。我怀疑这是一个 fortran 问题的三个原因

1.  查看所有交互，我看不出这两种方式有什么区别

2.  价值观重演

3.  例如，许多值是两个 (2^-14) 的负幂。

我会很感激你的想法。

所述变量以及计算中使用的大多数变量（如果不是全部）都是双精度类型的。编译器是 gnu f95。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:33:09.367

双精度大约有 15 到 17 个十进制数字。您的两次计算相差大约 10 ^ 13 的一部分。改变对于真实数不会改变答案的计算顺序可以改变有限精度算术的答案。根据进行的计算次数和算法的详细信息，此顺序的差异可能是合理的。Fortran 编译器中的错误似乎不太可能......如果您仍然相信，请尝试使用不同的编译器。

你的意思是你正在使用 GNU gfortran？如果有，是哪个版本？

# xcode - 在 Xcode 4 中将新项目/工作区添加到 svn

> ID：14994523
> 
> 赞同：1
> 
> 时间：2013-02-21T04:24:35.083
> 
> 标签：xcode, svn, xcode4.6

我在创建一个新的 Xcode 4.6 项目然后将其导入我的 subversion 存储库并使其被识别为已被最初签入并且现在在 Xcode 开发环境中处于版本控制之下的过程中几乎没有成功。我需要在这里执行的一系列步骤是什么？Apple 的帮助文件没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:10:40.627

我能够使 Xcode 帮助文件中描述的步骤起作用。这些帮助文件说明的另一个声明也发布[在 Stack 上](https://stackoverflow.com/questions/9883752/add-scm-to-an-xcode-project-but-meet-an-authentication-issue)。它有助于查看两个版本。

但真正的问题是 Xcode 4.6 与更高版本的 subversion 不兼容。当前版本的 Xcode 不支持您拥有的 subversion 版本很有可能，至少在我的情况下是这样。希望这可以帮助。

# php - Apache / PHP 从目录服务（如 rails 服务器）

> ID：14994525
> 
> 赞同：0
> 
> 时间：2013-02-21T04:24:44.617
> 
> 标签：php, wordpress, apache

我在一家有很多 WordPress 网站的网店工作，但在过去的几年里，我一直在开发一些 Rails 应用程序，学习本地开发的方法等等。切换到目录并运行的绝对便利`rails server`让我想要为我的 Apache / PHP 开发工作流程提供类似的解决方案。有谁知道从工作目录快速轻松地启动 Apache（或 nginx，或 lighttpd）/PHP 服务器的解决方案，或者我是否坚持自己配置某些东西来观看某个目录？我过去使用过 MAMP，但这并不是我想要的。我也研究了 Vagrant，但它似乎比它的价值更麻烦。

抱歉，如果我在这里没有意义，我什至不知道这在技术上是否可行，只是想知道是否有人在寻找类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:44:41.143

您正在寻找[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)或[http://wiki.nginx.org/NginxHttpRewriteModule](http://wiki.nginx.org/NginxHttpRewriteModule)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:45:49.417

有几个解决方案：

1.  您可以编辑您的 httpd.conf（或 apache.conf）文件并添加一个 VirtualHost（下面的示例），然后重新启动 apache。（这是您最好的选择，因为它使用 Apache（设计为服务器的东西）来托管您的网站，而无需一遍又一遍地运行命令）
2.  您也可以在 conf 文件中使用`ScriptAlias`或。`ScriptAliasMatch`这不会转换目录，但它可以让您进行更详细的重定向。
3.  将您的目录连接到您的网站应该加载的任何位置。对我来说，这似乎草率且不理想。
4.  使用[内置的网络服务器](http://php.net/manual/en/features.commandline.webserver.php)。好处是这与运行命令和拥有即时服务器一样接近，缺点是它真的应该只用于开发并且它并不完全映射到 Apache 的能力。

* * *

虚拟主机示例（一定要添加`127.0.0.1 myserver.local`到`/etc/hosts`）：

```
 <VirtualHost *:80>
    DocumentRoot "/path/you/like"
    ServerName myserver.local
    # This should be omitted in the production environment
    SetEnv APPLICATION_ENV development
    <Directory "/path/you/like">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride All 
        Order allow,deny
        Allow from all 
    </Directory>
 </VirtualHost> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-07T23:51:27.087

作为另一个更新且有用的选项，PHP.net 上的指南展示[了如何使用 PHP 运行命令行网络服务器](http://php.net/manual/en/features.commandline.webserver.php)：

> “从 PHP 5.4.0 开始，CLI SAPI 提供了一个内置的 Web 服务器”

`php -S`从项目根目录运行：

```
$ cd ~/public_html
$ php -S localhost:8000 
```

# asp.net - 在 ASP.NET 网站上安装缺少的字体

> ID：14994531
> 
> 赞同：0
> 
> 时间：2013-02-21T04:25:12.190
> 
> 标签：asp.net, fonts

我正在开发一个使用 unicode 语言（波斯语、波斯语）的 ASP.NET Web 应用程序。我想使用所有系统上可能不存在的字体，我该如何管理场景？如果系统上不存在字体会怎样？我见过使用漂亮字体的网站（虽然我认为我的系统上没有这些字体），我应该在第一次启动时安装缺少的字体吗？如果是这样，我该怎么做（最好没有用户提示）另外我想要一些备用字体，例如我想要字体 A，如果这个字体不可用，我想切换到字体 B，我怎么能这样做？我应该使用什么样式？字体系列？或字体名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:39:45.540

您可以使用字体库将字体嵌入到您的网页中。

更多细节和例子在：[http ://typeface.neocracy.org/](http://typeface.neocracy.org/)

# java - 在java中获取命令行参数长度时出错

> ID：14994532
> 
> 赞同：-6
> 
> 时间：2013-02-21T04:25:14.947
> 
> 标签：java, string, command-line-arguments

我是java新手。在这里，我尝试找到命令行参数传递的长度第一个参数“arr [0]”。以及如何访问 arr[0] 的每个元素。这是我的程序。在第 5 行抛出错误。C

```
class LengthArr
{
    public static void main(String[] arr)
    {
        int len= arr[0].length;  //Cannot find symble
        System.out.println(arr[0] + "Have length : " + len);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:27:29.997

```
int l= arr[0].length; 
```

应该：

```
int l= arr[0].length(); 
```

我对这个问题的解读是你想要提供的实际参数的长度，因为它是一个回文测试器。许多人猜测您的意思是*提供的参数数量。* 因此，对于需要什么存在一些混淆。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T04:30:59.423

`arr[0]`是`String`。要获得它的长度，您需要使用`arr[0].length()`.

`arr`是`String[]`。要获得它的长度，您需要使用`arr.length`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:48:08.527

```
public static void main(String[] arr) {
    int numArgs, argLen, ii;
    numArgs = arr.length; // number of arguments
    System.out.println("There are " + numArgs + " arguments");
    for(ii=0; ii<numArgs; ii++)
    {
        argLen = arr[ii].length();
        System.out.println("The length of argument " + ii + " is " + argLen);
    }
} 
```

我认为这回答了这个问题，不管问题到底是什么......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T04:33:34.757

```
public static void main(String[] arr) {
    int len = arr.length;// to find length of array.
    System.out.println(len);
    int length = arr[0].length();// to find length of 0th element in arr.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T04:49:53.343

在您的代码中，

```
int l= arr[0].length; 
```

在这一行中，arr[0] 表示数组中名为 arr 的第 0 个索引处的值。因此，可以以这种方式使用长度函数来查找存储在数组中第 0 个索引处的值的长度。

```
int l = arr[0].length(); 
```

为了找出数组的长度，试试这个代码：

```
int l = arr.length; 
```

# javascript - 使用javascript将输入标签的值设置为另一个值

> ID：14994539
> 
> 赞同：2
> 
> 时间：2013-02-21T04:26:10.543
> 
> 标签：javascript, html, forms, input

我有一个 HTML 输入标记，我想在单击按钮时更改它的值，所有这些都在提交整个表单之前完成。

我正在尝试使用 getElementById(idOfInput).value = "value I want to set it to"，但这似乎不起作用。

在这里查看 jsfiddle：http: [//jsfiddle.net/dchaddock/83NZu/1/](http://jsfiddle.net/dchaddock/83NZu/1/)

```
<input id="resetTesting" value="Testing" />
<button type="button" onclck="resetInput();">Testing</button>

function resetInput() {
    document.getElementById("resetTesting").value = "I'm reset!";
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T04:27:48.093

你拼错了`onclick`：

```
<button type="button" onclck="resetInput();">Testing</button>
                         ^ 
```

**演示：http: [//jsfiddle.net/83NZu/2/](http://jsfiddle.net/83NZu/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:37:45.840

当您的 javascript 编译器点击您的 onclick="resetInput();" 时，您的函数未定义。将脚本放在 html 之前，您应该一切顺利。

```
<script type="text/javascript">
    function resetInput() {

    document.getElementById("resetTesting").value = "I'm reset!";
}
</script>
<input id="resetTesting" value="Testing" />
<button type="button" onClick="resetInput();">Testing</button> 
```

[http://jsfiddle.net/83NZu/6/](http://jsfiddle.net/83NZu/6/)

也......正如其他人提到的......它的onclick;）

```
edit 
```

这是不正确的。原始 jsfiddle 的问题是拼写错误和 onLoad vs no-wrap (head) fwiw 的设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:30:17.873

这是 jsFiddle 链接

[http://jsfiddle.net/83NZu/3/](http://jsfiddle.net/83NZu/3/)

```
<input id="resetTesting" value="Testing" />
<button type="button" id="btnSubmit" >Testing</button>

    $(function(){
        $("#btnSubmit").click(function(){
            $("#resetTesting").val('test'); // Set the Value
            alert($("#resetTesting").val()); // Get the Value
        })
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:49:45.117

问题是默认选项“onload”和错误拼写`onclck`：

“onLoad”选项意味着：包装代码，使其在 onLoad 窗口事件中运行

HTML 代码：

```
<input id="resetTesting" value="Testing" />
<button id="btn" type="button">Testing</button> 
```

JavaScript 代码：

```
document.getElementById("btn").onclick = function(){
  document.getElementById("resetTesting").value="I'm reset";
} 
```

[http://jsfiddle.net/83NZu/8/](http://jsfiddle.net/83NZu/8/)

或者选择“no wrap(head)”选项，意思是：不包装JavaScript代码，放在`<head>`section

[http://jsfiddle.net/83NZu/7/](http://jsfiddle.net/83NZu/7/)

# jquery - 除非选择第一个下拉菜单，否则我如何停止 slideToggle 关闭

> ID：14994544
> 
> 赞同：0
> 
> 时间：2013-02-21T04:26:36.723
> 
> 标签：jquery, slidetoggle

我对 jQuery 比较陌生，需要一些帮助来解决我遇到的问题。当有人从下拉选择列表中选择一个选项时，我编写了这个脚本来显示一个数量框。客户在我拥有的下拉列表旁边请求了一个“重置选择”链接。问题是，如果有人做出选择，但随后改变主意并选择了不同的选项，则再次触发 slideToggle，然后隐藏数量框并添加到购物车按钮。有没有办法让这个功能只有在单击第一个“选择选项”选项或“重置”链接时才会关闭滑动切换，而不是任何其他选项。

希望这是有道理的。

```
<script language="javascript">
jQuery.noConflict();
<!--
// prepare the form when the DOM is ready 
jQuery(document).ready(function() {
jQuery(".expcontent").hide();
jQuery(".reset").hide();        
jQuery(".back").change(function(){
jQuery(".expcontent").slideToggle(800);
jQuery(".reset").show();
});
jQuery(".reset").click(function(){ 
jQuery(".reset").hide();
jQuery(".expcontent").slideToggle(800);
jQuery('.back option:selected').removeAttr('selected');
});
});
</script> 
```

根据下面给出的回复，我尝试过：

```
jQuery(".back").change(function(){
var sel=jQuery('.back option:first')
if (sel) 
jQuery(".expcontent").slideUp(800);
else 
jQuery(".expcontent").slideDown(800); 
```

但是 slideDown 从来没有使用这个，所以我假设 var sel 的条件没有得到满足。它甚至是一个有效的条件吗？我正在努力寻找有关如何判断“选择”下拉菜单中的第一个选项是否已被选择的大量信息。

解决了。更换

```
var sel=jQuery(".back option:first") 
```

和

```
var sel=jQuery(".back option:first").attr('selected') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:47:04.533

```
var sel=$('#.back option:selected');

if(sel)
$(".expcontent").slideDown(800);

else 
$(".expcontent").slideUp(800); 
```

# jquery - Dynatree 如何在树修改时将数据发送回服务器

> ID：14994545
> 
> 赞同：0
> 
> 时间：2013-02-21T04:26:42.760
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, dynatree, jquery-dynatree

我将 Dynatree 与 ASP.NET 和 MVC4 一起使用，我能够使用来自服务器端的数据初始化树。

我的问题是如何在某些树修改时将数据发送回服务器。（例如编辑节点、剪切复制粘贴、拖放等）

有什么可行的例子可以看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:41:52.940

最简单的方法是`Ajax`调用服务器并从相应的`dynatree`事件处理程序传递相关数据。例如，对于拖放，你会这样做：

```
$("#tree").dynatree({
    dnd: {
        onDrop: function(node, sourceNode, hitMode, ui, draggable) {
            $.ajax({
                type: "POST",
                url: [url],
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify(node.data),
                success: function (arg) {
                    alert(JSON.stringify(arg));
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(JSON.stringify(xhr.responseText));
                }
        }
    }
}); 
```

# objective-c - 如何使用字符串对象作为键和位置数组作为键的对象来制作一个 nsdictionary

> ID：14994548
> 
> 赞同：0
> 
> 时间：2013-02-21T04:27:24.630
> 
> 标签：objective-c, nsarray, nsdictionary, nsrange

基本上我有一个 nsstring 对象数组，例如'A'，L，L，A，H，A，B，A，D。输出应该是 NSDICTIONARY 0,3,5,7 FOR KEY A, 1,2 FOR KEY L 4 FOR KEY H 6 FOR KEY B 8 FOR KEY D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:42:44.033

这是一个简单的 for-in 循环，看起来有点像这样：

```
- (NSDictionary*)dictionaryFromArrayOfStrings:(NSArray*)array {
    int idx = 1;
    NSMutableDictionary *retVal = @{}.mutableCopy;
    for (NSString *char in array) {
        //reverse them for a dictionary of NSNumbers for a set of NSString keys
        [retVal setObject:char forKey:@(idx)];
        idx++;
    }
    return retVal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:45:57.973

你不能有一个包含键和值的数组（即键 A 的 NSDictionary 0,3,5,7）.. 你可以用 NSDictionary 来完成，如果你只有一组值.. 那么你应该为此使用数组

这是你应该做的：

```
NSDictionary* parent = [NSDictionary dictionaryWithObjectsAndKeys:[NSArray arrayWithObjects:@"A",@"L",@"L",@"A",@"H",@"A",@"B",@"A",@"D", nil], @"A", [NSDictionary dictionaryWithObjectsAndKeys:[NSArray arrayWithObjects:[[NSNumber numberWithInt:1], [NSNumber numberWithInt:2], nil]], @"L", [NSNUmber numberWithInt4], @"H", [NSNumber numberWithInt:6], @"B", [NSNumber numberWithInt:8], @"D",nil]; 
```

# ruby-on-rails - Rails 方式（查询）获取用户尚未阅读或有新回复的帖子

> ID：14994551
> 
> 赞同：1
> 
> 时间：2013-02-21T04:27:26.720
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个论坛。每个用户都有帖子和回复。每个帖子都有回复。每当用户查看帖子时，我都会在 Views 表中创建一条记录（或使用最后一个 reply_id 更新它）。假设一个帖子还没有任何回复，那么我只需保存 user_id 和 post_id。如果有对帖子的回复，那么我保存 user_id、post_id 和在帖子查看时最后回复的回复 ID。

我正在尝试创建一个“搜索未读帖子”页面，向用户显示他们尚未阅读的任何帖子，或者是否对他们已经查看的帖子有新的回复。我相信你们中的大多数人都熟悉这个原则，因为大多数论坛引擎都有这种搜索，但我想确保不要留下任何问题。

以下是关联（除去所有权限检查和其他关联）：

```
class User < ActiveRecord::Base
  has_many :posts
  has_many :views
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :replies
  has_many :views
  has_one :latest_reply, :order => "created_at DESC", :class_name => "Reply", :conditions => { :replystatus => 'published' }
end

class Reply < ActiveRecord::Base
  belongs_to :post
  belongs_to :user
  has_many :views
end

class View < ActiveRecord::Base
  belongs_to :post
  belongs_to :reply
  belongs_to :user
end 
```

我想知道如何只获取用户根本没有阅读的帖子（视图中没有记录），或者帖子 latest_reply.id 大于保存在视图中的帖子。我已经想出了如何在 sql 中编写这个查询（使用连接、子查询和联合），但我想知道是否有人知道用 Rails 方式来执行此操作。我猜一些智能（链式）范围会起作用，但我就是无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:13:48.940

我为@BillyChan re 添加了一条评论：发布和查看计数。

回复：latest_reply，我认为您应该将其作为范围推入回复模型：

```
scope :latest, order('created_at DESC').first
scope :published, where(:replystatus => 'published') 
```

随后，您可以通过 post.views.published.latest / reply.views.published.latest 访问它，并根据需要进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:57:29.017

使用中介表是正确的方法，但它通常太重而无法处理，即使使用计数器缓存或其他东西（想象一下 View 表中的百万或记录......）。

所以我可以提供一个更轻、更快的选项，而无需任何连接表。

```
User has_many Posts and Replies
Posts has_many Replies 
```

Post 有一个属性：`last_viewed`(datetime)。每次当用户查看帖子的回复时，属性都会更新为特定回复的`created_at`值（如果它更新）。

现在：

```
Reply.includes(:post => :user).where(["users.id = ? AND posts.last_viewed < replies.created_at", @user.id]) # all replies belongs_to post, which ones the post's author (user) has never seen.

# and

Post.includes(:replies).where(["posts.user_id = ? AND posts.last_viewed < replies.created_at", @user.id]) # all user's posts having replies, which he has never seen. 
```

这种方法最常用于论坛引擎。因为它很快。

**[更新]**所有用户和所有帖子和所有回复：

向用户添加一个属性：（`last_view_posts_at`日期时间）当用户打开它时，该属性必须用 Post 或 Reply 的`created_at`值（如果更新）进行更新。

```
Reply.includes(:post).where(["posts.created_at > ? OR replies.created_at > ?", @user.last_view_posts_at.to_s(:db)]) # all replies which the @user has never seen.

# and

Post.includes(:replies).where(["posts.created_at > ? OR replies.created_at > ?", @user.last_view_posts_at.to_s(:db)]) # all unseen posts and post having unseen replies. 
```

问题是您无法管理特定帖子和回复的已读/未读，因为它取决于时间戳。你必须玩“last_view_posts_at”。假设您有 3 条未读消息。之后，您打开最旧的，然后阅读最新的，在这种情况下，第二个（中间）将不再是“未读”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:09:09.500

我能够微调服务于我提出的问题的实际查询。这是实际的查询（user_id 在本例中是硬编码的，但在控制器中是@current_user.id）：

```
select posts.id, posts.title
  from posts
 where posts.id not in (
        select p.id
          from (select posts.id, max(replies.id)
              from posts
              left outer join replies on replies.post_id = posts.id
             group by posts.id
            INTERSECT
            select views.post_id, views.reply_id
              from views
             where views.user_id = 1 ) as p ) 
```

这是我在控制器中的方式（将其作为范围移动到模型中）：

```
@posts = Post.includes(:latest_reply).where('posts.id not in ( select p.id from (select posts.id, max(replies.id) from posts left outer join replies on replies.post_id = posts.id group by posts.id INTERSECT select views.post_id, views.reply_id from views where views.user_id = ? ) as p )', @current_user.id).page(params[:page]).per(15) 
```

我知道它不漂亮，但是我已经尝试弄清楚如何执行这种“Rails Way”将近两天了，现在只需要这样做，因为我还有更多的编码要做:)

如果有人有任何提示或如何通过“Rails 方式”执行此操作或如何加快此查询（速度非常快），我将不胜感激您的所有意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:32:46.087

### 新答案

根据 OP 的评论，我意识到我误解了前一个答案中的问题。已读/未读跟踪深入到用户级别。我没有这样的经验，但可以为头脑风暴提供两个想法。

1.  数据库方式。你保留你现在所做的。但是对于创建的每个新帖子，您将每个用户的记录添加到 View 表中，每个用户的初始值为零视图计数。通过这种方式，您可以使用 SQL 检查特定用户的未读帖子。缺点是服务器工作量大，表很大，也许你可以使用cron添加查看记录，使用缓存来存储用户的未读帖子。

2.  数组比较方式。您将字段添加到用户表存储用户查看的帖子 ID。对于他查看的每个帖子，该字段将使用添加的帖子 ID 进行更新。然后，当您显示正常的帖子列表（例如最近的帖子）时，您可以比较此 id 是否在此字段中（转换为数组），如果没有，则将帖子标记为未读。要显示未读帖子的完整列表，请使用 SQL 搜索不在此字段中的帖子 ID（SELECT id FROM posts WHERE id NOT IN the_id_list_arrary）

随意批评。

### 由于对问题的误解而放弃了以前的答案

我的建议是添加一个名为`view_count`Post 的字段，默认值为 0。

每次您`View`使用有关 Post 的新记录写入表时，您`view_count`也会增加 1。

要搜索未读帖子，您可以简单地搜索 view_count 为 0 的帖子。

通过这种方法，您将在查询时节省大量服务器资源，因为 View 表将非常大，并且在您的问题中查询它的方式非常繁重。

可选的未来增强功能：

1.  您可以设计一个任务来通过 View 表重建 view_count，并手动或通过 cron 运行它。

2.  您甚至可以在将来根据需要添加 view_count_month、view_count_year、view_count_all 字段。使用重建机制，维护这些字段将很容易。

毕竟，在我看来，基本的解决方案应该已经足够好了。

# jquery - jquery .html() 不反映实际的 html；谷歌浏览器 24.0.1312.57

> ID：14994556
> 
> 赞同：1
> 
> 时间：2013-02-21T04:27:33.087
> 
> 标签：jquery, google-chrome

jQuery 1.9.1 或更高版本，osx 10.8.2 上的 Chrome 24。

我无法让 Chrome 在选择列表中选择给定值，并且该设置`obj.val('foo')`在工作时`$("option[value='foo']",obj).prop("selected",true)`不起作用。

我在 windows 和 mac 上运行的不同浏览器（即 chrome、firefox）之间得到了不同的结果。主要是那个

```
 obj.val('foo') 
```

目前仅在 mac chrome 上工作。这太疯狂了！

我注意到如果我查看对象的 .html() ，它不会显示选择了哪个项目，即使读取 val() 属性会正确报告它。也就是说，我期待（但不是）看到类似的东西

```
<option value="bucket" selected="selected">bucket</option> 
```

[http://jsfiddle.net/frumbert/a4RzY/](http://jsfiddle.net/frumbert/a4RzY/)

这是 chrome 的 innerHTML() 实现中的错误（正在使用[http://api.jquery.com/html/状态）？](http://api.jquery.com/html/)

# c++ - C++程序问题与图片

> ID：14994558
> 
> 赞同：0
> 
> 时间：2013-02-21T04:27:46.110
> 
> 标签：c++, sfml

每当我运行这个程序时，按下按钮时“Car1”图片就会重复。我该如何解决这个问题？我找不到任何会导致这种情况的东西。提前感谢您的帮助。这是代码：

```
#include <iostream>
#include <SFML/Graphics.hpp>
using namespace std;

int main()
{   

//variables,etc

sf::RenderWindow window(sf::VideoMode(800,600), "Maze");
window.setFramerateLimit(60);
window.setKeyRepeatEnabled(false);
bool play = true;

bool Up = false;
bool rButton = false;
bool lButton = false;
bool down = false;

int xVelocity = 0, yVelocity = 0;
int xVelocity2 = 0; yVelocity2 = 0;
sf::Event event;
sf::Texture pic1;
pic1.loadFromFile("Data/Car1.png");

sf::Texture pic2;
pic2.loadFromFile("Data/Car2.png");

sf::RectangleShape road;
road.setSize(sf::Vector2f(100,200));
road.setPosition(100,220);
road.setFillColor(sf::Color::White);

sf::RectangleShape car1;
car1.setSize(sf::Vector2f(70,70));
car1.setPosition(0,0);
car1.setTexture(&pic1);

sf::RectangleShape car2;
car2.setSize(sf::Vector2f(70,70));
car2.setPosition(20,20);
car2.setTexture(&pic2);

//events 

while (play == true)
{
while(window.pollEvent(event))
{
if(event.type == sf::Event::Closed)
{
    play = false;
}
if(event.type == sf::Event::KeyPressed&&event.key.code==sf::Keyboard::Up)
{
Up = true;
}

if(event.type == sf::Event::KeyReleased&&event.key.code==sf::Keyboard::Up)
{
Up = false;
}

if(event.type == sf::Event::KeyPressed&&event.key.code==sf::Keyboard::Right)
{
rButton = true;
}

if(event.type == sf::Event::KeyReleased&&event.key.code==sf::Keyboard::Right)
{
rButton = false;
}

if(event.type == sf::Event::KeyPressed&&event.key.code==sf::Keyboard::Left)
{
lButton = true;
}

if(event.type == sf::Event::KeyReleased&&event.key.code==sf::Keyboard::Left)
{
lButton = false;
}

if(event.type == sf::Event::KeyPressed&&event.key.code==sf::Keyboard::Down)
{
down = true;
}

if(event.type == sf::Event::KeyReleased&&event.key.code==sf::Keyboard::Down)
{
down = false;
}

//Logic

if (rButton == true)
{
xVelocity = 5;
}
if(lButton == true)
{
 xVelocity = 5;
}

 if(lButton ==false&&rButton==false)
 {
 xVelocity = 0;
 }
 if(down == true)
 {
 yVelocity = 5;
 }

 if(Up == true)
 {
 yVelocity = -5;
 }

 if(Up && down == false)
 {
 yVelocity = 0;
 }

car1.move(xVelocity,yVelocity);

window.draw(car1);
window.draw(car2);
window.draw(road);
window.display();

}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:38:13.430

在渲染每一帧之前，您需要使用[`RenderWindow::Clear`](http://www.sfml-dev.org/documentation/1.6/classsf_1_1RenderTarget.php#a125645088d7b2df07599ea36fbb8b87e)清除渲染表面。

# django - 是否可以将引导模板从 Wordpress 移植到 Django？

> ID：14994559
> 
> 赞同：0
> 
> 时间：2013-02-21T04:27:45.753
> 
> 标签：django, wordpress, user-interface, twitter-bootstrap, themes

我想将几个 WP boostrap 主题移植到 django，问题是如何？有没有一种直接的方法（因为两者都是用引导程序制作的）或者它需要太多的工作并且更容易从头开始构建一个类似的主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:33:34.347

Bootstrap 与框架无关。您只需复制文件并开始工作。您可能会更轻松地使用[Django-CMS](http://django-cms.org/)来构建您的网站，因为它会为您提供您希望在 WordPress 中找到的东西，但没有 1:1 的等价物。

# macos - 每个在 CUDA 中运行的结果不同

> ID：14994571
> 
> 赞同：-1
> 
> 时间：2013-02-21T04:28:35.830
> 
> 标签：macos, cuda, cumulative-sum

接下来我在 cuda 中编程：

1.  我得到一个带有图像值的矩阵（d_Data）
2.  我将矩阵复制到共享内存（平铺）中
3.  我得到一个基本的像素差异 (pixel(i)-pixel(i+1)) (d_diff)
4.  如果差异是特定值，例如 0，则在 d_diff 中找到数字 0 的每个位置的矩阵 (d_A) 中设置数字 1。这是为了能够得到原始差异矩阵中0的频率。
5.  并行累积和。
6.  频率结果转到频率向量。

一步一步检查，一切都按预期进行，直到累积总和。当我启动代码时，软件计算的值为 104347，但有时从 CUDA 我得到一个 nan 结果，其他时候我得到任何数字，例如 2425。非常奇怪的是，如果我坚持运行内核 20 或 30 次，该值变为预期的 104347 :S。

我正在使用每个矩阵：

```
h_Data  = (float *)malloc(data_size);
h_diff  = (float *)malloc(data_size);
h_A         = (float *)malloc(data_size); 
```

和

```
 cudaFree(d_A);
cudaFree(d_diff);
cudaFree(d_Av); 
```

所以我不明白为什么当我运行足够多的时间时代码越来越接近正确的结果。顺便说一句，当达到正确的值时，无论我运行多少次代码，它都不再移动。

编码：

```
 __global__ void spam(float *d_Data, float *d_diff, float *d_A, int dw, int dh, float *d_Av){

long bx = blockIdx.x;  long by = blockIdx.y;
long tx = threadIdx.x; long ty = threadIdx.y;

// Identify the row and column of the Pd element to work on
long Row = by * TILE_WIDTH + ty;
long Col = bx * TILE_WIDTH + tx;
long tid = Row*dw+Col;
long i=512*512;
long r = MASK_DIM/2;
long s = 0;

 __shared__ int tile[BLOCK_WIDTH][BLOCK_WIDTH];

for (int k=0; k<=8; k++)
     d_Av[k]=0; 

    if(tid < dw*dh)
    {

   // to shared memory.
                                          tile[ty + r][tx + r]=d_Data[Row*dw+Col];
        if (Col-r >=0)                    tile[ty + r]  [tx] = d_Data[Row*dw+Col-r];
        if (Col+r <dw)                    tile[ty + r]  [tx + 2*r] = d_Data[Row*dw+Col+r];
        if (Row-r >=0)                    tile[ty]      [tx + r] = d_Data[(Row - r)*dw + Col];
        if (Row+r <dw)                    tile[ty + 2*r][tx + r] = d_Data[(Row + r)*dw + Col];
        if (Row - r >= 0 && Col - r >= 0) tile[ty]      [tx] = d_Data[(Row-r)*dw+Col-r];
        if(Row - r >= 0 && Col + r < dw)  tile[ty]      [tx + 2*r] = d_Data[(Row-r)*dw+Col+r];
        if (Row + r < dw && Col - r >= 0) tile[ty + 2*r][tx] = d_Data[(Row+r)*dw+Col-r];
        if(Row + r <dw && Col + r < dw)   tile[ty + 2*r][tx + 2*r] = d_Data[(Row-r)*dw+Col+r]; 

        //Calculates the difference matrix
       d_diff[tid] = (tile[ty + r][tx +r] - tile[ty + r][tx + r + 1]);

        d_A[tid]=0;

       //Set a 1 in each position in d_A where 0 was found in d_diff.
        if (d_diff[tid] == 0)
        { d_A[tid]=1;}
        __syncthreads();

        //cumulative sum to get the frecuency of value 0 in d_diff.  // The error is HERE
      for (s = (i/2); s>=1; s=s/2) {
            if (tid < s)
            {   d_A[tid] += d_A[tid+s];
            }
        } 

       // set the frequency value in frequencies vector.
        d_Av[0] = d_A[0];

}} // END IF tid < dw*dh 
```

欢迎任何想法：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:25:23.800

您可以尝试用以下代码替换 if 语句： `d_A[tid] += d_A[tid+s] * (tid < s);`

并确保此代码不会导致竞争条件。它通常可能是并行求和的情况。

MK

# objective-c - 在 c / objective-c 中舍入浮点数。最后一位为 5 时出错

> ID：14994572
> 
> 赞同：0
> 
> 时间：2013-02-21T04:28:40.647
> 
> 标签：objective-c, c, cocoa-touch, floating-point, currency

**简化问题：**

我有一个 float `0.02275`，当我将它四舍五入到小数点后 4 位时，`0.0228`我得到的不是预期的`0.0227`. 我知道发生这种情况是因为 的浮点值`0.02275`类似于`0.0227499999999999...`，当四舍五入到小数点后 4 位时给出`0.0227`。

```
float a = 0.02275;
NSLog(@"float a is %f",a);
NSLog(@"float a, rounded to 4 decimal places is %0.4f",a);
NSLog(@"float a, rounded to 10 decimal places is %0.10f",a); 
```

给出输出

```
float a is 0.022750
float a, rounded to 4 decimal places is 0.0227
float a, rounded to 10 decimal places is 0.0227499995 
```

我的问题是：我如何正确地四舍五入得到`0.0228`而不是`0.0227`？

**实际情况的局限性：**

浮点数取自 plist 文件；`NSNumber floatValue`在将其分配给变量时使用`a`。

我的程序是处理金钱和百分比。货币价值是用户输入的，百分比是固定的，或者是用户输入的。上面示例中的浮点数是导致我的计算不准确的百分比值之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:37:24.263

~~格式运算符截断；它不圆。~~

有关详细信息，请参阅 printf 的文档。%.4f 确实四舍五入，但 0.02775 向下舍入为 0.0277，这就是您所看到的。我相信 0.027751 会给你你期望的 0.0278。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:53:08.147

不要使用浮点数来存储货币值。错误会不断增加，这对于金钱来说通常是不可取的。以整数形式将钱存储为美分（如果可以有小数美分，则为十分之一美分......）。也将百分比存储为整数，例如 100%=1000 或您想要的任何精度。

例子：

```
$10 * 105% (logical)
= 1000 * 1050 (variable values)
= 1050000 (intermediate result)
/ 1000 (divide by numeric value of 100%)
= 1050 (final cent value)
= (double)1050/100.0 (C code to get dollars as double for printing) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:53:21.697

这可能会有所帮助：

[http://www.accuretech.com/ios-app-development-rounding-number-tips/](http://www.accuretech.com/ios-app-development-rounding-number-tips/)

它还提供了一些其他信息，但总体上应该可以帮助您获得所需的信息。

# c# - 从列表中删除对象

> ID：14994574
> 
> 赞同：0
> 
> 时间：2013-02-21T04:28:46.207
> 
> 标签：c#, winforms, for-loop

我的清单是

```
public List<BaseHomePage.QueueListItem> QueueDataSource
   {
    get { return this._queueDataSource; }
    set { this._queueDataSource = value; }
   } 
```

我想从列表中删除对象，我的代码是

```
for (int i = 0; i < _queueDataSource.Count; i++)
{
    object queue = _queueDataSource[i];

    if (objQuery.BranchOutQueue)
    {
        this._queueDataSource.Remove(queue);   //Here I want to getting error
    }
} 
```

> 错误：与 system.collections.Generic.List.Remove(BaseHome.QueueList) 匹配的最佳重载方法有一些无效参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:32:34.953

而不是使用`object`use [var](http://msdn.microsoft.com/en-us/library/bb383973.aspx)。

```
var queue = _queueDataSource[i]; 
```

或者具体来说，您可以使用：

```
BaseHomePage.QueueListItem queue = _queueDataSource[i]; 
```

您收到错误的原因是`Remove`需要与 List 相同类型的参数，因为您正在以`object`不兼容的类型重新生成对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:33:43.500

只需使用`RemoveAt`来自`object`

```
 for (int i = 0; i < _queueDataSource.Count; i++)
        {
            if (IsSuccess)
             _queueDataSource.RemoveAt(i)
        } 
```

# python - 在python中格式化时间字符串

> ID：14994576
> 
> 赞同：0
> 
> 时间：2013-02-21T04:28:58.417
> 
> 标签：python, datetime

我有以下日期时间**作为字符串**：

```
datestr = "2013-02-20 17:57:25+00:00" 
```

我将如何在 Python 中将其格式化为 2013 年 2 月 20 日下午 5:57。?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:38:41.900

使用`strptime`和`strftime`

[http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

```
>>> import datetime
>>> strptime = datetime.datetime.strptime
>>> s = "2013-02-20 17:57:25+00:00"
>>> # Using s[:-6] to trim off the timezone
>>> strptime(s[:-6], "%Y-%m-%d %H:%M:%S").strftime("%b %d, %Y %I:%M %p")
'Feb 20, 2013 05:57 PM' 
```

不幸的是，该`%z`指令似乎不适用于`strptime`

[http://bugs.python.org/issue6641](http://bugs.python.org/issue6641)

```
>>> strptime(s, "%Y-%I-%d %H:%M:%S%z")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\apps\Python27\lib\_strptime.py", line 317, in _strptime
    (bad_directive, format))
ValueError: 'z' is a bad directive in format '%Y-%I-%d %H:%M:%S%z' 
```

# c++ - 链表没有正确循环

> ID：14994582
> 
> 赞同：0
> 
> 时间：2013-02-21T04:29:59.217
> 
> 标签：c++, list

这是我的代码：

```
void setUpEachFlechette(int numFlechettes){

int i = 0;
int totalNum = 0;

Flechette* next;
Flechette* head;
Flechette* pEnd;
Flechette* temp;

    while(numFlechettes != i){

        double x = getRandomNumberX();
        double y = getRandomNumberX();
        double z = getRandomNumberZ();

         if(i != 0)
          temp = next;

         next = new Flechette;

         next->setXYZ(x, y, z);

         if(i == 0)
            head = next;
         else
          next->link = temp;

         i++;

         next->display();

    }

 cout<<"\nThe total number of flechettes is "<<totalNum<<endl<<endl;

 char yes = NULL;

 cout<<"Ready? ";
 cin>>yes;

 i = 0;

 next->link = NULL;
 next = head;
 while(next != NULL){

    next->display();
    next = next->link;

    i++;

 } 
```

}

出于某种原因，当我遍历链表时，它只显示列表中的前 4 个节点，并继续重复前四个节点。我也无法让它正确地以 null 结束，因此我可以通过 while(next != null) 循环运行它。我想知道为什么我的编码没有遍历所有的 Flechette？作为参考，它应该循环通过 20 个不同的箭，而不仅仅是 4 个箭 'i' 的次数。

我认为这些功能是不言自明的。如果他们不让我知道，我会向你解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:40:42.080

您没有`totalNum`在打印之前修改变量。我也认为代码应该是这样的

```
void setUpEachFlechette(int numFlechettes){

int i = 0;
int totalNum = 0;

Flechette* next;
Flechette* head;
Flechette* pEnd;
Flechette* temp;
srand (time(NULL));
    while(numFlechettes != i){

        int x = rand();
        int y = rand();
        int z = rand();

         if(i != 0)
          temp = next;

         next = new Flechette;

         next->setXYZ(x, y, z);

         if(i == 0)
            head = next;
         else
          temp->link = next;

         i++;

         next->display();

    }

totalNum = numFlechettes;
 cout<<"\nThe total number of flechettes is "<<totalNum<<endl<<endl;

 char yes;

 cout<<"Ready? ";
 cin>>yes;

 i = 0;

 next->link = NULL;
 next = head;
 while(next != NULL){

    next->display();
    next = next->link;

    i++;

 }
} 
```

在您的原始代码`head`中，节点将是最后一个节点，并且`head->next`将是`NULL`

我希望您在构造函数`link`中正确初始化成员变量`NULL``Flechette`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:54:37.103

有两种方法可以处理简单的单链表。一种是始终添加在列表的开头，这是最简单的方法：

```
struct Node
{
    Node* next;

    Node()
        : next(nullptr)  // Make sure the `next` pointer is not pointing anywhere
        {}
};

Node* head = nullptr;

while (add_one_more_node())
{
    Node* newNode = new Node;

    // Make the `next` point to the old head
    newNode->next = head;

    // Make the head point to the new node
    head = newNode;
} 
```

第二种方法是跟踪列表中的最后一个节点，并在末尾插入。这有点棘手：

```
// Assume `Node` structure as in above example

Node* head = nullptr;
Node* tail = nullptr;

while (add_one_more_node())
{
    Node* newNode = new Node;

    if (tail == nullptr)
    {
        // List is empty
        head = tail = newNode;
    }
    else
    {
        // List is not empty

        // Make the current tails next link point to the new node
        tail->next = newNode;

        // Make the new node the next tail
        tail = newNode;
    }
} 
```

通过这两种方式，您可以使用相同的循环来遍历列表：

```
// Loop over the list
for (Node* node = head; node != nullptr; node = node->next)
{
    // ...
} 
```

要释放列表，您需要一个更复杂的循环，因此在获得下一个指针之前不要释放节点：

```
for (Node* node = head, *next; node != nullptr; node = next)
{
    // Next node to iterate to
    next = node->next;

    // Free the current node
    delete node;
} 
```

# loader - swf 的 swfobject 2.2 加载器

> ID：14994586
> 
> 赞同：1
> 
> 时间：2013-02-21T04:30:41.710
> 
> 标签：loader, swfobject

用 swfobject 2.2 嵌入 swf，我需要 swf 文件的加载器，并希望 swf 加载 100% 时回调。我目前正在使用 swfobject 的 percentLoaded 方法，因为我[在 stackoverflow 上找到了答案](https://stackoverflow.com/a/7719671/970467)

但问题是 Mozilla 给了我**太多递归**的错误并停止了进一步的执行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:32:40.030

为什么不使用 swf 梯子作为外壳来加载子 swif？所以你不需要在过程中包含任何JS？

# javascript - 更改 Javascript 背景图像的大小

> ID：14994589
> 
> 赞同：-2
> 
> 时间：2013-02-21T04:30:56.497
> 
> 标签：javascript, html, css

我有一个随机选择新背景图像的 Javascript。

```
<script  type="text/javascript">
    function changeImg(imgNumber)   {
        var myImages = ["images/001.jpg", "images/002.jpg", "images/003.jpg",      "images/004.jpg"]; 
        var imgShown = document.body.style.backgroundImage;
        var newImgNumber =Math.floor(Math.random()*myImages.length);
        document.body.style.backgroundImage =      'url('+myImages[newImgNumber]+')';
    }
    window.onload=changeImg;
    </script> 
```

我想知道如何调整该图像的大小。另外，我想知道如何使图像不固定在页面上，而是正常滚动页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:59:30.287

您可以尝试在 CSS3 中使用媒体查询或使用 jQuery 进行一些编码。 [https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:49:22.610

据我所知，您无法使用 css 调整正文中背景图像的大小。但您可以在下面实现相同的 senario。

```
<html>
    <head>
        <style type="text/css">
            .bgimage{
                position:absolute;
                top:0;
                left:0;
                z-index:-1;
                width:500px;
                height:200px;
            }
            .content{
                position:relative;
                z-index:1;
            }
            p{
                color:#fff;
            }
        </style>
    </head>
    <body>
        <img class="bgimage" src="http://www.hdwallpapersarena.com/wp-content/uploads/2012/07/Download-Hulk-HD-Wallpaper-For-Computer.jpg" />
        <div class="content">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis condimentum vestibulum elementum. Nunc cursus sem et odio porttitor bibendum. Nulla facilisi. Phasellus egestas sodales sapien, ut ullamcorper metus aliquam ac. Sed tellus ipsum, mattis nec vulputate non, ultrices vel mi. Etiam sodales porta nibh, dignissim porta eros viverra in. Nullam non augue lacus. Nullam et neque a arcu pellentesque mattis quis semper lectus. Ut a urna velit. Integer elementum, eros eu ullamcorper pretium, nisl est congue nibh, in aliquam risus massa nec lacus. Praesent blandit felis massa, ut suscipit lacus. Pellentesque sodales nulla at enim lobortis egestas ac ac urna. Pellentesque varius, erat ut mattis sodales, augue nisi luctus nibh, id ultrices lectus lectus feugiat mauris.
            </p>
        </div>
    </body>
</html> 
```

如果您想了解更多详细信息，请告诉我...

# android - 将图像放在android的进度条上

> ID：14994592
> 
> 赞同：0
> 
> 时间：2013-02-21T04:31:01.380
> 
> 标签：android, android-progressbar, cocos2d-android

我想根据进度百分比在进度条上叠加不同颜色的图像。

我将图像放在正确的位置并最初将其设置为不可见并根据条件将其设置为可见。

问题是图像在进度条上不可见，而在进度条下方可见。

这是我的进度条代码：

```
progressbar = CCProgressTimer.progress("TimeBar23.png");
progressbar.setType(5);
progressbar.setAnchorPoint(0, 0);

// progressbar.setPosition(47, 356);
progressbar.setPosition(47, 310); 
```

这是图像：

```
progressBarImage1.setPosition(68,500);
progressBarImage2.setPosition(68,456);
progressBarImage3.setPosition(68, 424);

progressBarImage1.setVisible(false);
progressBarImage2.setVisible(false);
progressBarImage3.setVisible(false); 
```

这是我使图像可见的条件：

```
if(GamebarLayer.progressbar.getPercentage() > 33.33)
{
    GamebarLayer.progressBarImage1.setVisible(true);
    GamebarLayer.progressBarImage1.setVertexZ(100);
}
else if(GamebarLayer.progressbar.getPercentage() > 66.66)
{
    GamebarLayer.progressBarImage2.setVisible(true);
}
else if(GamebarLayer.progressbar.getPercentage() > 100)
{
    GamebarLayer.progressBarImage3.setVisible(true);
} 
```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:55:26.887

进度条中使用的图像：试试这个 addChild(progressBar, 1);

这里“1”是Layer上的pogressbar优先级。

# vb.net - 杀死现有进程

> ID：14994595
> 
> 赞同：0
> 
> 时间：2013-02-21T04:31:25.040
> 
> 标签：vb.net, process, kill

我正在尝试构建一个启动脚本，然后停止一个进程：

```
Public Class Form1
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Process.Start("C:\batchfile.bat")
    End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles 
    (DESIRED CODE HERE)
    End Sub
End Class 
```

`Button2`启动`batchfile.bat`. 我需要找到一种方法来在`Button1`单击时结束此过程。有没有相对简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:55:18.057

请检查此示例代码

```
 Dim p1 As Process
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        p1 = Process.Start("C:\Users\082043\Desktop\akshay.bat")
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        p1.Kill()
    End Sub 
```

# sql-server - NOCHECK 不禁用外键引用

> ID：14994597
> 
> 赞同：0
> 
> 时间：2013-02-21T04:32:08.013
> 
> 标签：sql-server, tsql, sql-server-2012

建表脚本：

```
CREATE TABLE [dbo].[details](
    [id] [int] NULL,
    [details] [varchar](max) NULL
)

CREATE TABLE [dbo].[name](
    [id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
    [name] [varchar](max) NULL,
 CONSTRAINT [PK__name__3213E83F0D384EE4] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

ALTER TABLE [dbo].[details]  WITH NOCHECK ADD  CONSTRAINT [id] FOREIGN KEY([id])
REFERENCES [dbo].[name] ([id])
GO
ALTER TABLE [dbo].[details] NOCHECK CONSTRAINT [id]
GO 
```

表填充脚本

```
insert into name(name) values (newid())
go 100

insert into details (id,details) values(RAND()*10,newid())
Go 1000 
```

表截断脚本

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"
EXEC sp_msforeachtable "truncate table ?"
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all" 
```

取自[如何使用 T-SQL 临时禁用外键约束？](https://stackoverflow.com/questions/159038/can-foreign-key-constraints-be-temporarily-disabled-using-t-sql)

也试过

```
alter table name nocheck constraint all
truncate table name 
```

这两种情况都不允许我截断表，因为存在外键引用

错误信息：

> 无法截断表“dbo.name”，因为它被 FOREIGN KEY 约束引用。

有没有办法禁用 FK 约束，删除数据库中的所有数据并重新初始化身份，然后重新启用 FK 约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:14:24.480

我使用以下两个脚本来禁用外键。我没有创建它们，我在互联网上找到了它们，但在过去的几年里它们对我来说非常有效。不幸的是，我再也找不到它们的来源了。

references_sp.sql 是一个存储过程，需要在其他脚本运行之前创建。

references_run.sql 是一个脚本，用于生成禁用/启用外键的脚本。

请注意，运行此处提供的脚本是安全的 - 它不会修改数据库（除了创建然后删除临时表）它只是生成另一个脚本来删除并重新创建外键。

现在是脚本。

引用_sp.sql：

```
USE [master]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

/*********************************************************************************************
Copyright SQLServerNation.com
*  Author:  Tim Chapman
***********************************************************************************************/
CREATE PROCEDURE [dbo].[sp_ShowForeignKeyObjects]
AS
    SELECT 
        OBJECT_NAME(constid) AS ConstraintName,
        OBJECT_SCHEMA_NAME(fkeyid) + '.' + OBJECT_NAME(fkeyid) + '.' + COL_NAME(fkeyid, fkey) AS ForeignKeyObject,
        OBJECT_SCHEMA_NAME(rkeyid) + '.' + OBJECT_NAME(rkeyid) + '.' + COL_NAME(rkeyid, rkey) AS ReferenceKeyObject, 
        COL_NAME(fkeyid, fkey) AS ForeignKeyColumn,
        COL_NAME(rkeyid, rkey) AS ReferenceKeyColumn, 
        constid AS ConstraintID, 
        OBJECT_SCHEMA_NAME(fkeyid) + '.' + OBJECT_NAME(fkeyid) AS ForeignKeyTable,         
        fkeyid AS ForeignKeyID, 
        OBJECT_SCHEMA_NAME(rkeyid) + '.' + OBJECT_NAME(rkeyid) AS ReferenceKeyTable,
        rkeyid AS ReferenceKeyID,
        keyno AS KeySequenceNumber
    FROM 
        sysforeignkeys
    ORDER BY 
        OBJECT_NAME(rkeyid) ASC, COL_NAME(rkeyid, rkey)

GO 
```

参考运行.sql：

```
IF OBJECT_ID('tempdb..#FK')>0
  DROP TABLE #FK

IF OBJECT_ID('tempdb..#Const')>0
  DROP TABLE #Const

CREATE TABLE #FK
(
  ConstraintName VARCHAR(255),
  ForeignKeyObject VARCHAR(255),
  ReferenceObject VARCHAR(255),
  ForeignKeyColumn VARCHAR(255),
  ReferenceKeyColumn VARCHAR(255),
  ConstraintID INT, 
  ForeignKeyTable VARCHAR(255),
  ForeignKeyID INT, 
  ReferenceKeyTable VARCHAR(255),
  ReferenceKeyID INT, 
  KeySequenceNumber SMALLINT
)

CREATE TABLE #Const
(
  ConstraintID INT, 
  FBuildField VARCHAR(2000) DEFAULT(''), 
  RBuildField VARCHAR(2000) DEFAULT(''), 
  CountField SMALLINT 
)

INSERT INTO #FK
EXEC sp_Showforeignkeyobjects

SET NOCOUNT ON
DECLARE  tempcursor
CURSOR
READ_ONLY
FOR 

  SELECT    
    f.ConstraintName ,
    f.ForeignKeyObject ,
    f.ReferenceObject ,
    f.ForeignKeyColumn ,
    f.ReferenceKeyColumn,
    f.ConstraintID , 
    f.ForeignKeyID , 
    f.ReferenceKeyID , 
    f.KeySequenceNumber, 
    f.ForeignKeyTable,
    f.ReferenceKeyTable 
  FROM #FK AS  f
    INNER JOIN 
    (
      SELECT ConstraintID, MAX(KeySequenceNumber) AS MaxSeq
      FROM #FK AS  k
      GROUP BY k.ConstraintID
    )b ON f.ConstraintID = b.ConstraintID AND f.KeySequenceNumber = b.MaxSeq

DECLARE 
  @ConstraintName VARCHAR(255),
  @ForeignKeyObject VARCHAR(255),
  @ReferenceObject VARCHAR(255),
  @ForeignKeyColumn VARCHAR(255),
  @ReferenceKeyColumn VARCHAR(255),
  @ConstraintID INT, 
  @ForeignKeyID INT, 
  @ReferenceKeyID INT, 
  @KeySequenceNumber SMALLINT, 
  @ForeignKeyTable VARCHAR(255),
  @ReferenceKeyTable VARCHAR(255)

OPEN tempcursor

  FETCH NEXT FROM tempCursor INTO 
  @ConstraintName ,
  @ForeignKeyObject ,
  @ReferenceObject ,
  @ForeignKeyColumn ,
  @ReferenceKeyColumn,
  @ConstraintID , 
  @ForeignKeyID , 
  @ReferenceKeyID, 
  @KeySequenceNumber,
  @ForeignKeyTable ,
  @ReferenceKeyTable 

WHILE (@@fetch_status <> -1)
BEGIN

  DECLARE  tempcursor2
  CURSOR
  READ_ONLY
  FOR 

    SELECT ConstraintID, ForeignKeyColumn, ReferenceKeyColumn, KeySequenceNumber 
    FROM #FK 
    WHERE ConstraintID = @ConstraintID

    ORDER BY ConstraintID, KeySequenceNumber ASC

  DECLARE @ConstraintID2 INT, @ForeignKeyColumn2 VARCHAR(255), @ReferenceKeyColumn2 VARCHAR(255), @KeySequenceNumber2 SMALLINT
  DECLARE @FKeyBuildField VARCHAR(1000), @RKeyBuildField VARCHAR(1000), @Cnt SMALLINT 

  OPEN tempcursor2

  SELECT @FKeyBuildField = '', @RKeyBuildField = '', @Cnt = 0

  FETCH NEXT FROM tempcursor2 INTO @ConstraintID2 , @ForeignKeyColumn2 , @ReferenceKeyColumn2 , @KeySequenceNumber2
  WHILE (@@fetch_status <> -1)
  BEGIN
    SET @Cnt = @Cnt + 1
    SELECT @FKeyBuildField = @FKeyBuildField  + ISNULL(@ForeignKeyColumn2,'')+ 
      CASE 
        WHEN @ForeignKeyColumn2 IS NULL THEN '' 
      ELSE  
        CASE WHEN @KeySequenceNumber = @KeySequenceNumber2 THEN '' ELSE ',' END
      END

    SELECT @RKeyBuildField = @RKeyBuildField  + ISNULL(@ReferenceKeyColumn2,'')+ 
      CASE 
        WHEN @ReferenceKeyColumn2 IS NULL THEN '' 
      ELSE  
        CASE WHEN @KeySequenceNumber = @KeySequenceNumber2 THEN '' ELSE ',' END
      END

    INSERT INTO #Const
    (   
      ConstraintID , 
      FBuildField , 
      RBuildField, 
      CountField  
    )
    VALUES
    (
      @ConstraintID, 
      @FKeyBuildField,
      @RKeyBuildField,
      @Cnt
    )

    FETCH NEXT FROM tempcursor2 INTO @ConstraintID2 , @ForeignKeyColumn2 , @ReferenceKeyColumn2 , @KeySequenceNumber2
  END
  CLOSE tempcursor2
  DEALLOCATE tempcursor2

  FETCH NEXT FROM tempCursor INTO 
  @ConstraintName ,
  @ForeignKeyObject ,
  @ReferenceObject ,
  @ForeignKeyColumn ,
  @ReferenceKeyColumn,
  @ConstraintID , 
  @ForeignKeyID , 
  @ReferenceKeyID , 
  @KeySequenceNumber ,
  @ForeignKeyTable ,
  @ReferenceKeyTable 
END

CLOSE tempcursor
DEALLOCATE tempcursor

SELECT 'ALTER TABLE ' + FKTable + ' DROP CONSTRAINT ' + OBJECT_NAME(a.ConstraintID) AS DropKeys,
'ALTER TABLE ' + FKTable + ' WITH NOCHECK ADD CONSTRAINT ' + OBJECT_NAME(a.ConstraintID) + ' FOREIGN KEY(' + FBuildField + ') REFERENCES ' + RKTable + '(' + RBuildField+')' AS BuildKeys
,*
FROM #Const a
JOIN
(
  SELECT ConstraintID, MAX(countfield) AS maxcount
  FROM #Const
  GROUP BY ConstraintID
) b ON a.ConstraintID = b.ConstraintID  AND a.countfield = b.maxcount
JOIN
(
SELECT DISTINCT constraintid, '[' + OBJECT_SCHEMA_NAME(foreignkeyid) + '].[' + OBJECT_NAME(foreignkeyid) + ']' AS FKTable, '[' + OBJECT_SCHEMA_NAME(referencekeyid) + '].[' + OBJECT_NAME(referencekeyid) + ']' AS RKTable FROM #fk
) c ON a.constraintid = c.constraintid

DROP TABLE #Const 
```

# asp.net-mvc - 如何使特定操作的全局授权属性无效

> ID：14994601
> 
> 赞同：0
> 
> 时间：2013-02-21T04:32:32.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, authorization

我有一个全局变量`AuthorizeAttribute`，它在我的整个应用程序中应用以检查授权

我有一个控制器，但是在调试模式下构建时不应该被授权（它包含我的 jasmine 单元测试）。

我如何告诉 Asp.Net Mvc 不要只对这个控制器使用授权？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:49:58.757

您是否尝试过 [AllowAnonymous] 属性

```
 [AllowAnonymous]
   public ActionResult LogIn () {
   } 
```

# ios - ShinobiCharts：当你点击图表的点时如何显示X值和Y值

> ID：14994605
> 
> 赞同：5
> 
> 时间：2013-02-21T04:32:54.547
> 
> 标签：ios, charts, shinobi

我现在正在使用 ShinobiCharts iOS 图表框架。

谁能给我一个提供如下图功能的示例？ ![在此处输入图像描述](../Images/ed6e872864d677b520f0c667c986f612.png)

我想做一个功能，当你点击图表的点时可以显示 X 值和 Y 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:00:49.017

您必须实现 SChartDelegate 方法：

例如

```
- (void)sChart:(ShinobiChart *)chart toggledSelectionForSeries:(SChartSeries *)series nearPoint:(SChartDataPoint *)dataPoint atPixelCoordinate:(CGPoint)pixelPoint{
NSLog(@"x value:%@",dataPoint.xValue);
NSLog(@"y value:%@",dataPoint.yValue);
//here you can create an label to show the x/y values or even can add an annotation 
} 
```

您也可以使用以下方法进行点选择

```
- (void)sChart:(ShinobiChart *)chart toggledSelectionForPoint:(SChartDataPoint *)dataPoint inSeries:(SChartSeries *)series atPixelCoordinate:(CGPoint)pixelPoint{
     //Your code goes here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T19:12:57.333

您必须将 CrossHairEnabled 设置为 YES，如下所示：

```
- (SChartSeries*)barSeriesForKey:(NSString*)key {

SChartBarSeries *series = [SChartBarSeries new];

series.stackIndex = [NSNumber numberWithInt:1];
series.crosshairEnabled = YES; // this is what you want
series.title = [self titleForKey:key];

if ([key isEqualToString:land]) {

    series.style = [self.theme barSeriesStyleForSeriesAtIndex:3 selected:NO];
}

return series;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T22:54:57.033

为了显示默认十字准线，您需要设置以下内容：

在系列上启用十字准线

```
-(SChartSeries *)sChart:(ShinobiChart *)chart seriesAtIndex:(int)index {  
    SChartLineSeries *lineSeries = [[SChartLineSeries alloc] init];  
    lineSeries.style.lineColor = [UIColor darkGrayColor];  
    lineSeries.crosshairEnabled = YES;  
    lineSeries.selectionMode = SChartSelectionPoint;  
    return lineSeries;  
} 
```

使用默认十字准线工具提示

```
[chart.crosshair setDefaultTooltip]; 
```

# php - 上传图片到服务器目标c

> ID：14994607
> 
> 赞同：0
> 
> 时间：2013-02-21T04:33:06.777
> 
> 标签：php, image

我需要将图片从 iphone 应用程序上传到服务器。

我使用此代码在 localhost 上尝试：

```
 NSData *storeData = UIImageJPEGRepresentation(pictureItem, 90);
                NSString *URLString = @"http://localhost:8080/image_item/upload.php";

                NSMutableURLRequest *request  = [[NSMutableURLRequest alloc] init];
                [request setURL:[NSURL URLWithString:URLString]];
                [request setHTTPMethod:@"POST"];

                NSString *boundary = @"---------------------------14737809831466499882746641449";
                NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
                [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

                NSMutableData *body = [NSMutableData data];
                [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%d.jpg\"\r\n", idItem] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[NSData dataWithData:storeData]];
                [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [request setHTTPBody:body];

                NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
                NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
                NSLog(@"%@",returnString); 
```

使用 image_item 我的文件夹来存储图像， idItem 是图片的名称。

我调用了一个 upload.php 页面：

```
 <?php
$uploaddir = './';      //Uploading to same directory as PHP file
$file = basename($_FILES['userfile']['name']);
$uploadFile = $file;
$newName = $uploadDir . $uploadFile;

if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
    echo "Temp file uploaded. \r\n";
} else {
    echo "Temp file not uploaded. \r\n";
}

if ($_FILES['userfile']['size']> 300000) {
    exit("Your file is too large."); 
}

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {
    $postsize = ini_get('post_max_size');   //Not necessary, I was using these
    $canupload = ini_get('file_uploads');    //server variables to see what was 
    $tempdir = ini_get('upload_tmp_dir');   //going wrong.
    $maxsize = ini_get('upload_max_filesize');
}
?> 
```

但问题如下：文件夹中有我的图片，名称好，但我无法打开图片。出现以下错误：它可能已损坏或使用了预览无法识别的文件格式。

所以我不明白......有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:37:31.413

我找到了解决方案。正文中缺少一条线。正确的代码在这里：

```
NSString *boundary = @"---------------------------14737809831466499882746641449";
            NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
            [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

            NSMutableData *body = [NSMutableData data];
            [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%d.jpg\"\r\n", idItem] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[NSData dataWithData:storeData]];
            [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
            [request setHTTPBody:body];

            NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
            NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

# java - Appengine 缓慢

> ID：14994608
> 
> 赞同：0
> 
> 时间：2013-02-21T04:33:11.753
> 
> 标签：java, google-app-engine, jsf, primefaces

从 appengine 访问我的应用程序时，我经常收到以下错误。有人可以知道这是什么原因吗？

原因：com.google.apphosting.api.DeadlineExceededException：此请求 (216e5897c4ca40e3) 开始于 2013/02/21 04:27:45.277 UTC，并且仍在 2013/02/21 04:28:44.702 UTC 执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:39:13.623

这与 AppEngine 缓慢无关。正在发生的事情是，您正面临 AppEngine 为某些类型的调用设置的最后期限。

从文档中“请求处理程序生成并返回对请求的响应的时间有限，通常约为 60 秒。一旦达到最后期限，请求处理程序就会中断。Java 运行时环境通过抛出来中断 servlet com.google.apphosting.api.DeadlineExceededException。"

所以这意味着您很可能正在调用一个请求 URL，它已达到 60 秒的限制，但尚未完成其任务并发送响应。

如果您查看您提出的异常“原因：com.google.apphosting.api.DeadlineExceededException：此请求 (216e5897c4ca40e3) 开始于 2013/02/21 04:27:45.277 UTC 并且仍在 2013/02/ 执行21 04:28:44.702 UTC。” - 你可以看到 60 秒的最后期限已经到达：04:27:45 - 04:28:44.702

因此，请查看您的代码并尝试早点返回。如果您认为需要更多时间，请查看限制为 10 分钟或更复杂要求的[Cron Jobs](https://developers.google.com/appengine/docs/java/config/cron)，您有[Backends](https://developers.google.com/appengine/docs/java/backends/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T08:41:58.630

如果这些请求通常很快，那么失败的可能是第一个命中新实例的请求。这意味着大量的类加载会导致请求变长。

考虑使用预热请求来避免这种情况，确保您的预热请求与此方法使用的类/框架相同：

[https://cloud.google.com/appengine/docs/java/config/appconfig#Java_Warmup_requests](https://cloud.google.com/appengine/docs/java/config/appconfig#Java_Warmup_requests)

# ios - 使用 GData 解析 XML 与包含 HTML 的文本

> ID：14994613
> 
> 赞同：0
> 
> 时间：2013-02-21T04:33:41.033
> 
> 标签：ios, objective-c, xml, cocoa, gdata

我正在使用 GData 解析 XML 文档，其中一些元素包含带有 HTML 标记的文本。

```
<Paragraph>
Page 1 has some text
<br/>
<br/>
normal text
<br/>
<b>Strong Text</b>
<br />
<i>Italic Text</i>
<br />
normal text
</Paragraph>

NSString * para = [[[content elementsForName:@"Paragraph"] objectAtIndex:0]stringValue]; 
```

我想要段落标记的内容，包括要分配给 NSString 参数的 HTML 标记，但我得到的是删除了所有标记的文本，如下所示

```
Page 1 has some textnormal textStrong TextItalic Textnormal text 
```

有没有办法将带有 HTML 标签的整个字符串分配给 NSString？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:23:46.790

您需要调用 GDataXMLNode 的 XMLString 方法。它将以字符串格式返回您的 XML/HTML 表示。

```
NSString * para = [[[content elementsForName:@"Paragraph"] objectAtIndex:0] XMLString]; 
```

# web-hosting - 如何将文件管理系统添加到我的网站？

> ID：14994617
> 
> 赞同：0
> 
> 时间：2013-02-21T04:34:20.780
> 
> 标签：web-hosting

我创建了一个网站，我想在该网站上托管用户论坛。

由于其无限的数据库功能，我将托管切换到了 hosting24。但是我有一些事情我还没有完全弄清楚。

1.  最好将论坛显示为：MyFunForum.websitehost.com 或 Websitehost.com/boards/myfunforum

2.  **如何仅授予管理员文件访问特定文件夹或文件的权限？**我基本上希望用户能够完全自定义他们的论坛，但我想禁止访问主网站。

我认为2号是主要的。论坛的显示方式并不重要，我只希望用户只能单独访问他们的论坛。

我意识到可能需要对我的网站进行彻底的重新设计。这是网站链接： [link](http://ttf6.com)。

最初的前提很简单……也许有点太简单了。现在我确定我需要一个内容管理系统，但我想知道如何让它首先为用户工作。

提前感谢您帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:15:41.850

感谢 Cyber​​ Sleuth 的回答。我觉得我自己已经找到了答案。我相信。我需要一个好的 CMS 系统来做我想做的事……我想。

# sql - 选择过去 24(N) 个月的第一个日期

> ID：14994619
> 
> 赞同：2
> 
> 时间：2013-02-21T04:34:43.483
> 
> 标签：sql, sql-server, tsql

这是一个显示过去 24 个月的第一个日期的脚本。

> **我需要在单个 T-SQL 查询中而不是迭代中的以下功能。**

```
Declare @intCount as int

SET @intCount = 24

Declare @Date as varchar(25)  

While (@intCount >0)

Begin
SET @Date = CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),
                                DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
select @Date

SET @intCount = @intCount-1

End 
```

***上述查询返回 24 个结果集（选择）。但我想在一个结果集中***

**编辑：**

> 主要要求是在子查询中使用这个单一结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:53:15.067

您可以使用递归 CTE

```
;with cte(intCount,myDate)
 as
 (
   Select 1, CONVERT(VARCHAR(25),DATEADD(m,  1,
                            DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
   union all
    Select intCount+1 ,CONVERT(VARCHAR(25),DATEADD(m,-(intCount-1),
                            DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) from cte
                            where intCount<=24
 )
Select myDate from  cte 
```

> 更新：

如果需要，可以将其存储在表变量或临时表中

```
 Declare @Date table
 (myDate varchar(25))

 Declare @count int
 set @count=24
 ;with cte(intCount,myDate)
 as
 (
   Select @count-1, CONVERT(VARCHAR(25),DATEADD(m,-(@count-1),
                            DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
   union all
   Select intCount-1 ,CONVERT(VARCHAR(25),DATEADD(m,-(intCount-1),
                            DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) from cte
                            where intCount>0
 )
 Insert into @Date(myDate) 
 Select myDate from cte 
```

或者你可以创建一个函数

```
 go
 alter FUNCTION FnGetDate(@intCount int)
 RETURNS  @rtnTable TABLE 
 (
  myDate varchar(25)NOT NULL
 )
 AS
 BEGIN

 ;with cte(level,myDate)
  as
 (
   Select @intCount-1, CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),
                        DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
   union all
   Select level-1 ,CONVERT(VARCHAR(25),DATEADD(m,-(level-1),
                        DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) from cte
                        where level>0
 ) 
 Insert into @rtnTable(myDate)
 select myDate from cte
 return
 END 
```

现在你可以像

```
 Select * from dbo.FnGetDate(24) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:41:24.190

如果`@intCount`是恒定的，您可以通过简单的方式做到这一点`UNION ALL`：

```
select CONVERT(VARCHAR(25),DATEADD(m,-24, DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) as date
union all
select CONVERT(VARCHAR(25),DATEADD(m,-23, DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) as date
union all
.....
select CONVERT(VARCHAR(25),DATEADD(m,0, DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) as date 
```

或使用临时表：

```
Declare @intCount as int

SET @intCount = 24

Declare @Date as varchar(25)  

CREATE TABLE #temptable 
    (datefield date)

While (@intCount >0)

Begin
SET @Date = CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),
                                DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
insert into #temptable                              
select @Date

SET @intCount = @intCount-1

End
select * from #temptable
drop table #temptable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:02:21.113

这是一个如何使用 CTE 进行操作的示例：

```
;WITH DateCTE AS
    (
        SELECT dateadd(dd, - datepart(day, getdate()) + 1, Convert(date, getdate())) AS DateValue
        UNION ALL
        SELECT DATEADD(month, -1, DateValue)
        FROM DateCTE
        WHERE DATEADD(month, 23, DateValue) >  GetDate()
    )
select DateValue from DateCTE; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T04:47:46.480

这就是我的建议，我对存储过程很生疏，但我将我的建议加粗到您的原始过程中

```
Declare @intCount as int
  CREATE TABLE days (day varchar(25));
 SET @intCount = 24

 Declare @Date as varchar(25)  

 While (@intCount >0)

Begin
 SET @Date = CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),
                            DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
 INSERT Into days(day) VALUES (@Date)
 SET @intCount = @intCount-1

 End
 SELECT * FROM days; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T04:50:12.907

使用临时表：

```
Declare @intCount as int
SET @intCount = 24    
Declare @Date as varchar(25)  
create table #temp1 (myDate date)
While (@intCount >0)
Begin
SET @Date = CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101)
insert into #temp1
select @Date
SET @intCount = @intCount-1
End

select * from #temp1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T05:32:33.277

```
DECLARE @intCount AS INT

SET @intCount = 24

DECLARE @Date AS VARCHAR(25)  

WHILE (@intCount > 0)
BEGIN
    SET @Date = ISNULL(@Date, '') + CONVERT(VARCHAR(25),DATEADD(m,-(@intCount-1),
                                DATEADD(dd,-(DAY(GETDATE())-1),GETDATE())),101) + ' '
    --SELECT @Date   Don't have it here
    SET @intCount = @intCount -1
END

SELECT @Date 
```

# android - 按下按钮时不调用橡皮擦

> ID：14994621
> 
> 赞同：4
> 
> 时间：2013-02-21T04:34:55.897
> 
> 标签：android, android-canvas

我有这样的主要课程：

```
public class Main extends Activity {

    Button edit,save,eraser,clear;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        edit = (Button) findViewById(R.id.edit);
        save = (Button) findViewById(R.id.save);
        clear = (Button) findViewById(R.id.clear);
        eraser = (Button) findViewById(R.id.eraser);

        eraser.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    GameBoard aa = new GameBoard(Main.this);
                    aa.eraser();
                    aa.invalidate();
                }
        });
    }
} 
```

我的视图类如下所示：

```
public class GameBoard extends View{

    public void init() {
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        // mPaint.setColor(Color.BLACK);
        mPaint.setColor(0xFFFF0000);

        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);
    }

    public Paint mPaint;

    public GameBoard(Context context) {
        super(context);
        init();
    }

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;
    private Paint mBitmapPaint;

    public GameBoard(Context context, AttributeSet aSet) { 
        super(context, aSet); 
        init();
        mBitmap = Bitmap.createBitmap(800, 1024, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    public void onDraw(Canvas canvas) {
        // initialize
        // canvas.drawColor(Color.WHITE);
        canvas.drawColor(0xFFAAAAAA);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;

        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;

        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
        }
        return true;
    }

    public void eraser() {
        // TODO Auto-generated method stub
        Toast.makeText(getContext(), "eraser", Toast.LENGTH_LONG).show();
        mPaint.setXfermode(null);
        mPaint.setAlpha(0xFF);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        invalidate();
    }
} 
```

这是布局：

```
<com.authorwjf.GameBoard
    android:id="@+id/the_canvas"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

当我单击一个按钮时，它不会更改`mPaint`为`eraser`.

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:45:48.467

据我所知，您在 onClick 中创建的 GameBoard 从未附加到任何东西。

该视图是否应该在 Activity 的布局中？

# php - 如何在 PHP 中使用多维数组对所有国家和语言进行排序？

> ID：14994625
> 
> 赞同：1
> 
> 时间：2013-02-21T04:35:13.720
> 
> 标签：php, arrays, codeigniter, zend-framework, multidimensional-array

我正在做一个项目，我必须按升序对所有国家和语言进行排序并显示它。

用语言排序非常困难，当我用眼睛看时，我没有发现这种类型的问题。我花了几个小时来解决这个问题，但仍然无法解决这个问题。当我取消注释时`sort($languages);`，它显示数组的索引。

我需要以正确的方式（升序）对类别（即国家/地区）和语言进行排序。

用英语和某些语言进行排序似乎可以正常工作。但对于像日语和其他一些语言这样的语言它不起作用。

该`<th>`标签仅适用于俄罗斯语言类别标签。也请帮助设计。

如果你能解决这个问题，我将非常感谢你。提前致谢...

这是我尝试过的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<body>
<?php 
$languages = array(
'Russia' => array(
                'Russian'=>'rʌʃə',
                ),
'Japan'=>array('Japanese'=>"日本" ,'America'=>'アメリカ'),
'India' => array(
                'Bengali' => "ગુજરાતી", 
                'Hindi'   => 'क्रिकेट',
               'Telugu'   => "తెలుగు",
               'Malyalam'   => "മലയാളം",
               'Oriya' => 'ଓଡ଼ିଆ oṛiā',
               'Kannda' => 'ಕನ್ನಡ ಲಿಪಿ',
               'Kashmiri'=>'کٔشِیر',
               'Konkani' => 'कोंकणस्थ',
               'Panjabi' => 'ਪੰਜਾਬੀ',
               'Sanskrit'=>'संस्कृत',
               'Tamil' => 'தமிழ்'

        ));
        //sort($languages);
    echo "<table border='1' ><tr><td>";
        foreach ($languages as $obj_key =>$book){
        echo "<th>$obj_key Languages Category</th>";
                echo "<table border='1'>";
                    foreach ($book as $key=>$value){
                    echo "<tr><td>$key </td><td> $value</td></tr>";
                    }
                echo "</td></tr></table>";
        }
    echo "</table>";
?>
</body>
</html> 
```

问题到这里还没有解决。我需要用人类语言（升序）对其进行排序，其中有 6800 种语言。不使用多维数组。通过关联数组。

```
 $languages=array ('アメリカ','日本','ગુજરાતી','क्रिकेट','తెలుగు','മലയാളം','ଓଡ଼ିଆ oṛiā','ಕನ್ನಡ ಲಿಪಿ','کٔشِیر','कोंकणस्थ','ਪੰਜਾਬੀ','संस्कृत','தமிழ்');
   //sort ($languages);
   foreach ($languages as $language) {
      echo $language.'<br/>';
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:49:43.457

请检查，您的 html 结构不正确。

我认为应该如下

```
 echo "<table border='1' >";
    foreach ($languages as $obj_key =>$book){
    echo "<thead><tr><th>$obj_key Languages Category</th></tr></thead>";

                foreach ($book as $key=>$value){
                    echo "<tr><td>$key - $value</td></tr>";
                }

    }
    echo "</table>"; 
```

我看到您正在使用嵌套表，但首先在普通表中检查它

**解决方案**

在你的语言数组之后

```
ksort($languages);
echo "<table border='1' >";
    foreach ($languages as $obj_key =>$book){
        echo "<thead>
                   <tr>
                      <th>$obj_key Languages Category</th>
                   </tr>
              </thead>";
        ksort($book );
        foreach ($book as $key=>$value){
              echo "    <tr><td>$key - $value</td></tr>" . PHP_EOL;
        }

    }
    echo "</table>"; 
```

这对你有用（[http://codepad.org/dnZuvfjr](http://codepad.org/dnZuvfjr)）工作副本在这里

# javascript - 用html表格提交表单，用javascript动态分配行

> ID：14994626
> 
> 赞同：0
> 
> 时间：2013-02-21T04:35:18.003
> 
> 标签：javascript

我正在尝试使用嵌入的 html 表制作一个帖子表单，并使用 javascript 来允许该表添加和删除行。

我在将新行链接到 html 变量数组时遇到问题，如果提交了这些值，该数组应该存储这些值。

请帮忙！

这是我的javascript函数，

```
function addRow(tableID) {

    var table = document.getElementById(tableID); //access the table to dynamically allocate it. 

    var rowLen = table.rows.length; // Store number of rows
    var toAdd = table.insertRow(rowLen);

    var index = toAdd.insertCell(0);
    var element0 = document.createElement("input");
    element0.type = "checkbox";
    element0.name = "toDelete[rowLen]";
    index.appendChild(element0);

    var industry = toAdd.insertCell(1);
    var element1 = document.createElement("input");
    element1.type = "text";
    element1.name = "Industry[rowLen]";
    industry.appendChild(element1);

} 
```

where`toDelete`和`Industry`are html 表变量，用于存储添加的每个新行的值。

这是重要的html：

```
<BODY>

    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

    <form  method="post" action="test.php">
        <TABLE id="dataTable" width="350px" border="1">
            <tr> 
                <th></th>
                <th></th>

            </tr>
            <tr>
                <td><input type="checkbox" name="toDelete[]"</></td>
                <td><input type="text" name="Industry[]"</></td>

            </tr>
        </table>
        <input type="submit" value="Submit">
    </form>
</body> 
```

当我访问`$_POST`“test.php”中的变量时，没有存储任何内容，并且每个变量的计数长度永远不会超过 2，无论行数如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:49:19.163

我不确定您想要的确切结果，但似乎您正在尝试将变量插入到输入名称中。

```
element0.name = "toDelete[rowLen]";
element1.name = "Industry[rowLen]"; 
```

为此，您需要连接

```
element0.name = "toDelete[" + rowLen + "]";
element1.name = "Industry[" + rowLen + "]"; 
```

# .net - 当用户在未输入任何数据的情况下跳出文本框时在文本框上显示错误提供程序

> ID：14994628
> 
> 赞同：1
> 
> 时间：2013-02-21T04:35:32.450
> 
> 标签：.net, vb.net, winforms, data-binding, errorprovider

我知道这是非常基本的，但我不能让它为我的生活工作。

我有一个文本框 (PassportField) 和一个复选框 (PassportCheckBox)，它们绑定到我的班级的 (Person) 属性。Person 类实现了 INotifyPropertyChanged 和 IDataErrorProvider 接口。

这是我的绑定控件源代码：

```
Private WithEvents _PersonBindingSource As New Windows.Forms.BindingSource

Public Sub InitialiseBinding(ByVal person As Person)

  Me._PersonBindingSource.DataSource = person
  Me.PassportCheckBox.DataBindings.Add("Checked", _DoctorClinicBindingSource, "Passport", True,  Windows.Forms.DataSourceUpdateMode.OnPropertyChanged)
  Me.PassportField.DataBindings.Add("Text", _DoctorClinicBindingSource, "PassportText", True, Windows.Forms.DataSourceUpdateMode.OnPropertyChanged, String.Empty)

 End Sub 
```

我需要验证我的文本框，这样，如果选中了复选框，则文本框不能留空，这是通过针对文本框的错误提供程序来指示的。

因此，如果用户选中复选框，并且只是在不输入任何数据的情况下跳出文本框（即留空），则应该触发 INotifyPropertyChanged（我知道这可能不起作用，因为属性并没有真正改变)

目前验证在我的业务对象中。

有人可以对此有所了解吗？

# c# - 为什么'IsDBNull'为数据库中可为空的字段返回false？

> ID：14994633
> 
> 赞同：2
> 
> 时间：2013-02-21T04:35:57.047
> 
> 标签：c#, mysql, sqldatareader

我使用“IDataReader”和简单查询从数据库中读取数据

```
SELECT * FROM mytable ORDER BY Id 
```

问题是调用

```
reader.IsDBNull(i) 
```

即使对于可为空的字段也返回“false”...

并打电话给

```
reader.GetValue(i) 
```

如果这些字段中的值为 NULL，则返回 0。

请告知如何正确获取NULL？

附言

我相信我在配置连接字符串以访问数据时有问题，所以这里是：

```
<add key="ConnectionString.MySql.Data.DataProvider.MySqlDataProvider.MySql"
    value="server=***; user id=***; pwd=***; database=***; Convert Zero Datetime=true;"
    /> 
```

PS 是的，我使用 MySql，v.5.1

**PPS 我的错：使用了来自错误数据库的数据，实际上值为 0。请删除问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:36:46.120

> 即使对于可为空的字段也返回“false”...

`reader.IsDBNull`如果针对该字段的记录是 ，则返回 true `null`，它不知道数据类型是否可以为空。

# java - Android OnKeyListener 未注册 Enter 和 Search 键。

> ID：14994634
> 
> 赞同：0
> 
> 时间：2013-02-21T04:36:25.590
> 
> 标签：java, android, popupwindow, keyevent

我正在使用弹出窗口，在该窗口中我有一个搜索视图。单击搜索视图后，屏幕上会出现软键盘。所以我希望每当我按下搜索按钮或从键盘输入按钮时，它都会从搜索视图中获取数据并显示相关信息。我正在使用 an`OnKeyListener`来获取密钥，但它没有注册输入和搜索按键。

我的代码：

```
searchview.setOnKeyListener(new OnKeyListener() {
        @Override
        public boolean onKey(View arg0, int arg1, KeyEvent arg2) {

            if(arg2.getKeyCode() == KeyEvent.KEYCODE_SEARCH || arg2.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
                popupwindow.setFocusable(false);
                System.out.println("search pressed");
                Toast.makeText(getApplicationContext(), "Search Pressed", 0).show();    
            }
            return false;
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:39:47.630

你想要[getKeyCode()](https://developer.android.com/reference/android/view/KeyEvent.html#getKeyCode%28%29)而不是 getAction()。

使用[IME 动作侦听](https://developer.android.com/reference/android/widget/TextView.html#setOnEditorActionListener%28android.widget.TextView.OnEditorActionListener%29)器将是实现此目的的另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:58:21.063

使用 arg2.getAction() 而不是 getKeyCode() 它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T12:35:23.900

searchView 有它来自键盘的回调。

在 setOnQueryTextListener 中处理搜索/输入。此侦听器有 2 个回调：

1.  一个 onQueryTextSubmit
2.  和一个 onQueryTextChange

两者都从您的键盘中获取事件。

这是我的代码的一部分（在 onCreateOptionsMenu 中调用）

```
 MenuItem searchItem = menu.findItem(R.id.action_search);

    SearchManager searchManager = (SearchManager) SearchActivity.this.getSystemService(Context.SEARCH_SERVICE);

    if (searchItem != null) {
        final SearchView searchView = (SearchView) searchItem.getActionView();
        if (searchView != null) {
            searchView.setSearchableInfo(searchManager.getSearchableInfo(SearchActivity.this.getComponentName()));
        }

        if (searchView == null) {
            return true;
        }

        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

            @Override
            public boolean onQueryTextSubmit(String query) {
            // handle text submitted by user in here
                String text = query;
                searchView.setQuery("", false);
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(searchView.getWindowToken(), 0);
                if (text.length() > 0) downloadSearchQuery(text);
                return true;
            }

            @Override
            public boolean onQueryTextChange(String newText) { 
            // handle text changed here
                String mQueryString = newText.toString().trim();
                if (mQueryString.toString().trim().length() >= 3) {
                    downloadSearchQuery(mQueryString.toString().trim());
                } else {
                    if (mSearchList.size() != 0) {
                        mSearchList.clear();
                        mAdapter.notifyDataSetChanged();
                    }
                    checkAdapterIfEmpty();
                }
                return true;
            }
        });
    } 
```

# iphone - MKOverlay 只在 ios5 上覆盖所有奇怪的情况？

> ID：14994635
> 
> 赞同：5
> 
> 时间：2013-02-21T04:36:33.627
> 
> 标签：iphone, ios, mkmapview, mkannotation, mkoverlay

我有`MKMapView`一个非常奇怪的问题，很难解释。我有一个`MKOverlay`通过将覆盖点保存到文件并将覆盖加载到`viewDidLoad`. 所以问题来了：

脚步

1.  我添加`MKOverlay`一个`MKMapView`
2.  在添加`MKOverlay`到地图后的第二次或第三次运行时，地图上的所有内容都会被与我添加的颜色相同的叠加层覆盖。地图上的所有内容，加载视图时可以看到的地图视图除外。

其他奇怪的事情：

1.  此问题仅在`mapView.showsUserLocation`设置为 true时出现
2.  此问题仅发生在`iOS5`. 一切正常`iOS6`。
3.  如果您缩小彩色叠加层，则会重新调整地图可见部分的大小，以在您缩小到的新级别填充地图。

这个人也有同样的问题，尽管他的解决方案对我不起作用。

[使用 MKPolyline 和 MKPolylineView 覆盖问题](https://stackoverflow.com/questions/9220874/trouble-with-overlay-using-mkpolyline-mkpolylineview)

这是我的一些代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    MKPinAnnotationView *pinView = nil; //switch this to MKAnnotationView and use .image property if pins need to be images

     if(annotation == self.startingPin || annotation == self.endingPin){

        static NSString *defaultPinID = @"com.MagnusDevelopment.pin";

        pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

        if (pinView == nil)pinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:defaultPinID];

        pinView.canShowCallout = YES;
        pinView.animatesDrop = TRUE;

        if(annotation == self.startingPin){
        //starting pin
            pinView.pinColor = MKPinAnnotationColorGreen;
        }else{
        //ending pin
            pinView.pinColor = MKPinAnnotationColorRed;
        }

    }
    return pinView;
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKPolylineView *aView = [[MKPolylineView alloc] initWithPolyline:(MKPolyline *)overlay];
    aView.lineWidth = 7.0;
    aView.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.6];
    return aView;
} 
```

加载视图时调用的代码，我已经记录了在添加之前添加到折线数组的坐标，一切都很好，花花公子！

```
 NSInteger numberOfSteps = pointsArray.count;

    NSLog(@"number of steps: %i",numberOfSteps);

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [pointsArray objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;
        coordinates[index] = coordinate;
    }
    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.mainMap addOverlay:polyLine]; 
```

这是当覆盖出现并且用户在地图上平移到一侧时发生的情况的图片： ![在此处输入图像描述](../Images/95759f216e9d1fdb79aff8a4bc7cdb4d.png) 关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:47:03.403

您正在使用 dequeueReusableAnnotationViewWithIdentifier，但仅当 dequeueReusableAnnotationViewWithIdentifier 的结果为 nil 时，您才将注释分配给 pinView。

由于该方法通常会返回一个现有的 MKPinAnnotationView 实例，因此应该改为：

```
MKPinAnnotationView *pin = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
if (pin == nil) {
    pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID];
} else {
    pin.annotation = annotation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:55:55.480

这可能是问题所在：当地图视图尝试访问用户当前位置的视图时，您正在传递您的自定义视图。

尝试将其添加到您现有的实现中。

```
- (MKAnnotationView *) mapView:(MKMapView *) mapView viewForAnnotation:(id ) annotation 
{

if ([annotation isKindOfClass:[MKUserLocation class]]) {
    return nil;     
}
return yourView;
} 
```

PS：这可能不是叠加视图的问题。

最好的祝福。

# codenameone - 如何在代号中使用 ASP.Net wsdl Web 服务

> ID：14994637
> 
> 赞同：4
> 
> 时间：2013-02-21T04:36:49.740
> 
> 标签：codenameone

我是代号的新手。我想使用 ASP.Net WSDL Web 服务，我必须在其中发送一个带有他的值的参数。我已经使用 ksoap 库在 android 中实现了它，但不知道如何在 coodenameone 中实现它。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:04:11.650

Codename One 目前不支持 SOAP 功能，这是计划在未来使用的，但现在您需要按照此[讨论论坛帖子](https://groups.google.com/d/topic/codenameone-discussions/QOfW_1o8vDs/discussion)中的说明打包自己的信封。

# perl - 如何在 Perl 中引用和取消引用子例程的哈希值

> ID：14994645
> 
> 赞同：0
> 
> 时间：2013-02-21T04:37:56.590
> 
> 标签：perl, reference, subroutine, dereference, hash-of-hashes

有谁知道如何取消引用散列的散列，以便我可以在我的子例程中使用它。如您所见，我无法在我的子例程中访问我的 Hash of Hashes 数据结构。

```
my $HoH_ref = \%HoH;     # reference the hash of hashes

for(@sorted) {
print join("\t", $_, get_num($_, $HoH_ref))
}

sub get_num {
    my ($foo) = shift;
    my $HoH_ref = shift;
    my %HoH = %{$HoH_ref};    # dereference the hash of hashes
    my $variable = %HoH{$foo}{'name'};
    # do stuff
    return;
    } 
```

我在倒数第二行`%HoH{$protein}{'degree'}`附近出现语法错误，`%HoH{`并且哈希的哈希无法识别`$protein`来自`%HoH`. 我收到错误消息：`Global symbol "$protein" requires explicit package name`。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:03:17.983

访问散列元素的语法是`$hash{KEY}`，不是`%hash{KEY}`。

```
my %HoH = %{$HoH_ref};
my $variable = $HoH{$foo}{name};
               ^
               | 
```

但是复制整个哈希是愚蠢的。利用

```
my $variable = $HoH_ref->{$foo}{name}; 
```

# asp.net - 动态数据实体 Web 应用程序模板和 Asp.Net Web 表单模板的组合

> ID：14994646
> 
> 赞同：2
> 
> 时间：2013-02-21T04:37:58.500
> 
> 标签：asp.net, webforms, asp.net-membership, asp.net-dynamic-data, visual-studio-templates

我想使用 Visual Studio 2012 For Web 创建一个网站，它有一个数据库和一个生成的 UI，例如我们使用模板项目时所拥有的：

动态数据实体 Web 应用程序

但我也想有一个登录页面，例如模板项目提供的：

Asp.Net Web 表单应用程序

我发现这些模板非常适合这些任务中的任何一个，但如果你想要它们两个都非常糟糕。

如果我从动态数据实体 Web 应用程序模板开始，那么我可以在数据库端获得很棒的页面，只需很少的编码工作 - 但我无法让登录代码正常工作（另外，我认为我不应该编写无论如何，该代码，因为它已经存在于 Asp.Net Web 表单应用程序中）。每当我尝试时，我都会陷入可怕的混乱。我真的不想了解身份验证、成员资格和 cookie 或“它是如何做到的”或任何类似的东西。我想要的是让 .Net 框架处理所有这些，并告诉我查看页面的人的用户名是什么。就这样。有一种方法可以使用 Asp.Net Web Forms Application 模板。

但是，如果我从 Asp.Net Web Forms Application 模板开始，那么登录的东西就可以开箱即用......但是我在尝试为数据库创建 UI 时陷入了可怕的混乱！但鉴于该代码已存在于动态数据实体 Web 应用程序模板中，这应该不是必需的。同样，我真的不想学习它是如何做到的，我只是想用它来为我做这些事情，这样我就不必这样做了。我不想告诉它如何更新、删除等……我也不需要动态数据实体 Web 应用程序模板，但是我无法获取登录信息。

无论如何，我认为这是一项非常简单的任务，我已经扯掉了大部分头发：使用 Code First Entities 方法使用简单的数据库创建一个登录/注册的网站。我的经验是，如果你想拥有一个数据库但没有登录，那么你就是在笑。如果你想登录但没有数据库 UI，那你就笑了。如果你想要两者兼得，那么除非你是一个超级骗子微软技术专家，生活和呼吸这些东西......或者你知道“技巧”（可能存在于某个论坛的某个地方），否则你将面临很多痛苦。

无论如何，我的问题是，我在这里缺少什么？是否有一个网站包含一大堆其他模板，其中包含将 Web 表单（具有自动登录/成员资格控制）与动态数据实体 Web 应用程序相结合的模板，该应用程序在显示表格和允许编辑方面做得很好？我很难相信 Microsoft 打算让我知道如何完成 Dynamic Data Entities Web Application 和 Asp.Net Web Forms Application 所做的所有事情，才能获得这两种功能。

我花了一周的时间才弄清楚如何让“启用迁移”在 Web 表单模板类型中工作......基本上每一个小步骤都是一场巨大的战斗，需要一个又一个论坛阅读以发现小“技巧”​​。但最后，我真正想要的只是一个将动态数据实体 Web 应用程序功能（即数据驱动的网页）与 Web 表单功能（即用户登录）相结合并在 Azure 上发布的模板。我以为这很简单。但事实证明这是一场噩梦，事实上我完全被困住了。

更新：

[按照http://msdn.microsoft.com/en-us/library/ee923692(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee923692(v=vs.100).aspx)上的建议，我又花了半天时间试图让它工作。但这对我不起作用。它不应该那么复杂。制作这样一种常见的网站格式不需要那种程度的修修补补：带有 UI 和登录的数据库。

现在我回到几天前遇到的第一个问题，不知何故消失了，但我不知道如何：

PM> Enable-Migrations System.ArgumentException：参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）

服务器堆栈跟踪：在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs) 在 System.Runtime.Remoting 的 EnvDTE.Properties.Item(Object index) .Messaging.StackBuilderSink.SyncProcessMessage(IMessage 消息)

在 [0] 处重新引发异常：在 EnvDTE.Properties 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 System.Data.Entity.Migrations.MigrationsDomainCommand.GetFacade(String configurationTypeName) 在 System.Data. System.Data.Entity.Migrations.EnableMigrationsCommand.<>c_DisplayClass2 *.<.ctor>b*处的 Entity.Migrations.EnableMigrationsCommand.FindContextToEnable(String contextTypeName)*_0() at System.Data.Entity.Migrations.MigrationsDomainCommand.Execute(Action command) 参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）*

 *在这一点上，我要放弃了。我不得不放弃，因为经过一周的尝试，我可以设法在 Azure 上创建一个有数据库和 UI 但没有登录名的网站，*或者*在 Azure 上创建一个有登录名但没有数据库 UI 的网站。对我来说，为我的每一个表创建一个网格视图，并手动连接 RowChange、UpdateMethod、DeleteMethod 等（即不使用动态数据脚手架）将是荒谬的，因为脚手架存在（它只是除非我从一开始就使用该模板，否则很难让它工作，但是如果我使用该模板，那么我就没有登录页面！）。无论如何，现在这个“参数不正确”的错误再次弹出，所以我在转圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:19:44.010

您可以使用 ASP.NET 动态数据模板在 Visual Studio 中创建动态数据网站。

在继续之前，您必须决定是要创建网站项目还是 Web 应用程序项目。有关详细信息，请参阅 Web 应用程序项目与网站项目。按照相应程序中的步骤进行操作。您为创建使用脚手架的动态数据 Web 应用程序而遵循的大多数步骤对于网站项目和 Web 应用程序项目都是相同的。但是，根据您使用的项目类型，一些步骤会有所不同。

**创建动态数据网站项目**

1.  启动 Visual Studio 或 Visual Web Developer。
2.  在**文件**菜单中，单击**新建网站**。将显示**新建网站**对话框。
3.  在**Installed Templates**下，在左窗格中，选择**Visual Basic**或**Visual C#**。
4.  在中心窗格中，选择以下选项之一：

- 要使用 LINQ to SQL 模型，请选择**ASP.NET Dynamic Data LINQ to SQL Web Site**。
- 要使用 ADO.NET 实体框架模型，请选择**ASP.NET 动态数据实体网站。**

有关详细信息，请参阅[ASP.NET 动态数据层自定义。](http://msdn.microsoft.com/en-us/library/ee225428%28v=vs.100%29.aspx)

5.在**网站位置**框中，选择**文件系统**，然后输入要保留网站页面的文件夹的名称。

例如，输入文件夹名称**C:\WebSites\DynamicData**。

6.点击**确定**。

**参考：[创建动态网站](http://msdn.microsoft.com/en-us/library/cc488469%28v=vs.100%29.aspx)**

除此之外，您还可以从中读取其他信息。我相信编程没有什么是不可能的。如果你能想到，我相信你也能做到。:)*

# python - 如何在 tkinter 中创建 2 个工作区

> ID：14994651
> 
> 赞同：0
> 
> 时间：2013-02-21T04:39:07.593
> 
> 标签：python, programming-languages, tkinter

我的问题是这个。我已经用 tkinter 创建了一个程序，但我想在同一个窗口中运行它两次，在窗口的每一侧运行一次。我怎样才能做到这一点？？

这个想法是能够比较来自两个程序的数据，所以我希望它们分开工作。

非常感谢。

PD：由于我的声誉，我无法为您发布图片，抱歉 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:40:37.630

最终，您需要做的是将创建和使用单个工作区背后的所有逻辑放在单个`Frame`对象上。然后你只需要并排创建 2 个框架——每个框架都有一个“工作区”。

# php - 行为和 save() 冲突

> ID：14994653
> 
> 赞同：0
> 
> 时间：2013-02-21T04:39:16.407
> 
> 标签：php, yii

使用后`$model->save();`取消现有行为`DateTimeI18NBehavior`。有谁知道怎么解决？

行为 DateTimeI18NBehavior：[http ://www.yiiframework.com/extension/i18n-datetime-behavior/](http://www.yiiframework.com/extension/i18n-datetime-behavior/)

* * *

用户.php（模型）：

```
...
public function behaviors()
{
    return array(
        'datetimeI18NBehavior'=>array(
            'class' => 'ext.DateTimeI18NBehavior',
        ),
    );
}
... 
```

代码：

```
$criteria = new CDbCriteria;
$model = Users::model()->findByPk('1');
echo $model->birthday;
// Response: 15/10/1900 (right) 
```

代码 2：

```
$criteria = new CDbCriteria;
$model = Users::model()->findByPk('1');

$model->ip = Yii::app()->request->userHostAddress;
$model->save();

echo $model->birthday;
// Response: 1990-10-15 (wrong) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:00:57.963

那是`DateTimeI18NBehavior`. 它在保存数据之前将日期时间格式化为 Ymd 并保持原样。一个快速的解决方法是`afterSave()`在行为中添加一个事件处理程序，其逻辑与`afterFind()`

```
public function afterSave($event){

        foreach($event->sender->tableSchema->columns as $columnName => $column){

            if (($column->dbType != 'date') and ($column->dbType != 'datetime')) continue;

            if (!strlen($event->sender->$columnName)){ 
                $event->sender->$columnName = null;
                continue;
            }

            if ($column->dbType == 'date'){             
                $event->sender->$columnName = Yii::app()->dateFormatter->formatDateTime(
                                CDateTimeParser::parse($event->sender->$columnName, $this->dateIncomeFormat),'medium',null);
            }else{              
                $event->sender->$columnName = 
                    Yii::app()->dateFormatter->formatDateTime(
                            CDateTimeParser::parse($event->sender->$columnName, $this->dateTimeIncomeFormat), 
                            'medium', 'medium');
            }
        }
        return true;
    } 
```

# asp.net - ASP.NET“重新建立会话”性能命中

> ID：14994654
> 
> 赞同：3
> 
> 时间：2013-02-21T04:39:17.723
> 
> 标签：asp.net, performance, session

在用户最初与 ASP.NET 建立会话后，对于每个后续 HTTP 请求，有多少 StateServer 会话对象会**立即自动**获取和反序列化？例如：

1.  是否在收到请求并重新建立会话时获取**所有会话对象，或者...**
2.  会话重新建立后，会话对象是否会在每次对 HttpContext.Session["..."] 的请求时单独获取和反序列化？

答案对我如何使用会话有巨大的影响。例如，如果我已将大量用户数据预取到会话中，并且 StateServer 会话在每个 HTTP 请求时完全反序列化，那么我将体验到明显的性能损失。但是，如果仅在我请求特定会话密钥时才对预取的用户数据进行反序列化，那么对我来说就不用担心了。

**更新** 在标记了这个问题的答案后，我发现[带有 AppFabric Server 1.1 的 ASP.NET 可以选择按需恢复会话而不是 all-at-once](http://msdn.microsoft.com/en-us/library/hh361709%28v=azure.10%29.aspx)。这由web.config 中的[useBlobMode](http://msdn.microsoft.com/en-us/library/hh361700%28v=azure.10%29.aspx)控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:54:11.220

`Session`首次加载页面时加载所有用户`Session`信息。然后在页面完成处理后将用户会话信息持久化回存储区。

您可以通过 MSDN 更好地了解[自定义状态存储实现](http://msdn.microsoft.com/en-us/library/ms178587%28v=vs.100%29.aspx)。

这是您应该尽可能少使用 Session 的一个主要原因，因为它的处理成本很高（无论是在数据存储的往返传输以及在页面请求的生命周期内将数据保存在内存中） ）。

# jquery - 当我们非常缓慢地离开鼠标时，鼠标移出功能不起作用

> ID：14994659
> 
> 赞同：0
> 
> 时间：2013-02-21T04:39:55.583
> 
> 标签：jquery, css

正常的鼠标离开功能可以正常工作，但是如果我们离开鼠标的速度非常慢，那么鼠标退出功能就无法正常工作..

```
var timeoutId;
$('.box').mouseover(function(){
        var $this=$(this);
        if (!timeoutId) {
            timeoutId = window.setTimeout(function() {
            timeoutId = null;
                $this.animate({
                    marginTop:'-224px',
                    height:'300px'
                    })
    $this.find('.rotate-arrow').addClass('rotate');
    $this.find('.header-content-span').css('display','none');
                                                   },1000); }
            });
$('.box').mouseleave(function(){
        var $this=$(this);
         if (timeoutId) {
            window.clearTimeout(timeoutId);
            timeoutId = null;
            $this.animate({
                marginTop:'0px',
                height:'77px'
                })
    $this.find('.rotate-arrow').removeClass('rotate');
    $this.find('.header-content-span').css('display','block');

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:25:35.183

代码设置的方式，`mouseleave`如果您碰巧在`.box`容器上停留超过一秒钟，动画将不会出现。

这是因为`timeoutId`一旦`setTimeout`触发就会被清除，并且`mouseleave`回调包含仅在定义了动画时才执行动画的逻辑`timeoutId`。

要解决此问题，只需将动画从 if 语句中拉出。这是一个简化的示例：

```
var timeoutId;
$('.box').mouseenter(function () {
    var $this = $(this);
    if (!timeoutId) {
        timeoutId = window.setTimeout(function () {
            timeoutId = null;
            $this.stop().animate({
                height: '100px'
            });
        }, 1000);
    }
});
$('.box').mouseleave(function () {
    var $this = $(this);
    if (timeoutId) {
        window.clearTimeout(timeoutId);
        timeoutId = null;
    }
    $this.stop().animate({
        height: '50px'
    });
}); 
```

**注意：**我使用[`mouseenter`](http://api.jquery.com/mouseenter/)它是因为它与[`mouseleave`](http://api.jquery.com/mouseleave/). 根据您的具体情况，这两个处理程序往往是比使用更好的选择，`mouseover`并且`mouseout`由于它们为绑定对象的后代处理事件冒泡的方式。

[jsfiddle](http://jsfiddle.net/PUC4E/)

# email - 有效的电子邮件地址格式

> ID：14994660
> 
> 赞同：1
> 
> 时间：2013-02-21T04:39:56.070
> 
> 标签：email, special-characters, email-validation

我正在研究可以成为电子邮件地址一部分的字符。通常，我们知道电子邮件地址的格式为**localpart@domain**，其中**localpart**包含所有带有特殊字符的字母数字字符（尽管特殊字符有一些限制），根据[此 wiki 链接](http://en.wikipedia.org/wiki/Email_address)。

我的问题是，除了字母数字和特定的特殊字符 [、]、:、- 和 . **电子邮件地址的域**部分是否允许使用任何其他特殊字符？（这个问题是美国键盘）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:50:53.497

域名由一个或多个部分组成，技术上称为*标签*，由点分隔`.`。标签必须遵循[RFC 1035中的 LDH（字母、数字、连字符）规则：](https://www.rfc-editor.org/rfc/rfc1035)*标签*中允许的字符是 ASCII 字符集的子集，包括字符`a`- `z`、`A`- `Z`、`0`-`9`和连字符`-`。标签不能以连字符开头或结尾。

您的问题中提到的“特殊”字符`[`, `]`, `:`, 不允许在域名中使用。可以想象，它们可能是具有 IPv6 地址 ( `user@[::1]`) 的计算机上用户邮箱的电子邮件地址的一部分，但电子邮件地址往往包含完全限定的域名而不是 IP 地址。

# google-chrome - 有没有办法让 chrome 开发者工具的控制台更像 Firebug 控制台？

> ID：14994662
> 
> 赞同：3
> 
> 时间：2013-02-21T04:40:36.693
> 
> 标签：google-chrome, google-chrome-devtools

我一直在使用萤火虫很长一段时间。考虑改用 CDT。我们如何在 firebug 中启用多行控制台，并能够在控制台上的代码中添加断点？

# java - 小服务程序生命周期

> ID：14994668
> 
> 赞同：-8
> 
> 时间：2013-02-21T04:40:59.697
> 
> 标签：java, servlets

servlet 引擎中的 servlet 生命周期是如何发生的。

当 servlet init() service() destroy() 方法在 servlet 引擎中调用时。

你能解释一下**java中的servlet生命周期吗**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:54:43.263

你为什么不谷歌你的问题。它将为您提供更多有用的链接，例如[Servlet 生命周期](http://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html)

, [Java 小服务程序](http://www.sci.brooklyn.cuny.edu/~jniu/teaching/csc31800/notes/0421-Servlets.pdf)

# android - Android zxing NotFoundException

> ID：14994674
> 
> 赞同：2
> 
> 时间：2013-02-21T04:41:26.890
> 
> 标签：android, zxing

我正在使用 zxing 解码 QRcode 图像，但它总是返回 NotFoundException。[http://zxing.org/w/decode.jspx](http://zxing.org/w/decode.jspx)上的在线解码器可以完美地扫描这些图像，所以它应该能够在我的应用程序中这样做。我正在使用这段代码：

```
String path = Environment.getExternalStorageDirectory().getPath()+"/QRPictures/QRTest.bmp";
Bitmap bmp = BitmapFactory.decodeFile(path);
int[] pixels = new int[bmp.getWidth()*bmp.getHeight()];
bmp.getPixels(pixels, 0, bmp.getWidth(), 0, 0, bmp.getWidth(), bmp.getHeight());
LuminanceSource source = new RGBLuminanceSource(bmp.getWidth(), bmp.getHeight(), pixels); 
BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
Reader reader = new MultiFormatReader();
try {
    Result result = reader.decode(bitmap);
    String contents = result.getText(); 
    Log.d(TAG, content);
} catch (NotFoundException e) {
    Log.d(TAG, "NFE");
} catch (ChecksumException e) {
    Log.d(TAG, "CSE");
} catch (FormatException e) {
    Log.d(TAG, "FE");
} 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:58:29.333

根据对相关问题[的回答](https://stackoverflow.com/a/7416253/520779)，使用[`TRY_HARDER`](http://zxing.org/w/docs/javadoc/com/google/zxing/DecodeHintType.html#TRY_HARDER)解码提示可能会有所帮助，因为它“优化了准确性，而不是速度”：

```
Hashtable<DecodeHintType, Object> decodeHints = new Hashtable<DecodeHintType, Object>();
decodeHints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
Result result = reader.decode(bitmap, decodeHints); 
```

如果在线服务中正确解释了**相同的图像**但在您的情况下失败了，则它们很可能`TRY_HARDER`在您关闭时打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T07:32:52.757

我也有这个问题。我解决了它。尝试将此提示添加到您的代码中：

```
hints.put(DecodeHintType.PURE_BARCODE, Boolean.TRUE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T09:48:22.803

我通过以下方式解决了这个问题：`hints.put(DecodeHintType.PURE_BARCODE, Boolean.TRUE);`

# objective-c - 相同的代码，不同的结果 - MPMediaQuery 的方法“collectionSections”

> ID：14994678
> 
> 赞同：0
> 
> 时间：2013-02-21T04:41:59.970
> 
> 标签：objective-c, mpmediaquery

首先，我想说我的英语说得不太好。请理解TT

我在 Xcode 中输入了代码。

```
MPMediaQuery* songsQuery = [MPMediaQuery songsQuery];

self.songsSectionArray = [songsQuery collectionSections]; 
```

在songsQuery中，有很多以AZ开头的歌曲，还有其他歌曲。

而且，我使用了 'collectionSections' 方法

而且，我使用 NSLog 登录。签入 songSectionArray

正常输出了。它没有问题

但是，我复制了代码并粘贴了。

并登录。

然后，它有问题TT

结果不一样

**这是正常输出：**

```
title=A
title=B
title=C
title=D
title=E
title=F
title=G
title=H
title=I
title=J
title=K
title=L
title=M
title=N
title=O
title=P
title=R
title=S
title=T
title=U
title=V
title=W
title=Y
title=# 
```

**这是我复制代码的输出：**

```
title=B
title=K
title=O
title=P
title=Q
title=R
title=S
title=T
title=U
title=V
title=W
title=X
title=Y
title=Z
title=#
title=#
title=#
title=#
title=#
title=# 
```

代码显然是一样的。但是为什么输出不一样呢？

如果您知道解决方案，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:30:08.673

该`collectionSections`数组返回一个`MPMediaQuerySection`s 数组，表示与媒体项目集合的部分分组相关的部分标题。这些部分标题按媒体项目的第一个字母对所有内容进行分组。在这种情况下，`songsQuery`使用 ，因此每个部分的标题都相对于每首歌曲的第一个字母。

这里的问题是您的设备上没有存储以字母表中的每个字母开头的歌曲。由于不存在歌曲，您不会看到某些字母的部分。

例如，如果设备上没有以字母*“D”*开头的歌曲，则不会有*“D”*部分，并且您不会在日志语句中看到字母*“D”的任何部分输出。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T19:18:23.517

添加至少一个本地化文件（例如日语的 InfoPlist.strings）。

在我的情况下，该项目只有 Base 和 English 本地化会导致同样的问题。

# javascript - 敲除显示错误的验证消息？

> ID：14994680
> 
> 赞同：0
> 
> 时间：2013-02-21T04:42:05.477
> 
> 标签：javascript, jquery, validation, knockout.js

我正在使用 knokcout.js 和 knockout.validation 插件。我的代码中存在验证消息问题。我在可观察字段（比如密码）上应用了 2 次验证，例如：

**在 Js 代码中**

```
..
this.Password = ko.observable().extend({
       required: { message: "Enter password" },
       minLength: { params: 6, message: "Must be 6 chars long" }
});
.. 
```

**在 HTML 中**

```
<input type="password" data-bind="value: Password, valueUpdate:'afterkeypress"
  placeholder="Password" /> 
```

现在我的问题是，当我在密码字段中输入单个字符而不是显示验证消息`(Must be 6 chars long)`时，它会显示消息`(Enter password)`，而不是当我在字段中输入第二个字符时，它会显示消息`(Must be 6 chars long)`。这种行为适用于我应用验证的所有字段。谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:30:50.587

该代码似乎对“按键”而不是“按键后”做出反应。您在示例 html 中的“afterkeypress”之后缺少单引号。

该文档并未真正将“afterkeypress”列为 updateValue 选项，但在我的测试中似乎确实有效。

[来自值绑定的文档](http://knockoutjs.com/documentation/value-binding.html)

> 如果您的绑定还包括一个名为 valueUpdate 的参数，则这定义了 KO 应该使用的其他浏览器事件来检测除了更改事件之外的更改。以下字符串值是最常用的选择：
> 
> *   "keyup" - 当用户释放一个键时更新你的视图模型
> *   "keypress" - 当用户输入一个键时更新你的视图模型。与 keyup 不同，这会在用户按住键时重复更新
> *   “afterkeydown” - 一旦用户开始输入字符，就会更新您的视图模型。这是通过捕获浏览器的 keydown 事件并异步处理事件来实现的。
> 
> 在这些选项中，如果您想实时更新视图模型，“afterkeydown”是最佳选择。

文档建议使用“afterkeydown”选项以获得最佳效果，我发现确实如此。

我创建了一个使用“keypress”、“afterkeypress”和“afterkeydown”的示例。

见： http: [//jsbin.com/anerop/3/edit](http://jsbin.com/anerop/3/edit) （validatedObservable；注意：点击“Run with js”按钮）

绑定到“afterkeydown”似乎提供了最好的用户体验。在控件失去焦点之前，'afterkeypress' 不会更新。

示例数据绑定：

```
<input type="password" data-bind="value: Password, valueUpdate:'afterkeydown'"
  placeholder="Password" /> 
```

我创建了另一个没有使用 validObservable 的示例并得到了类似的结果。

见： http: [//jsbin.com/itatic/1/edit](http://jsbin.com/itatic/1/edit) （未验证Observable；注意：点击“用js运行”按钮）

# python - python 在 gtk textview 中搜索文本

> ID：14994684
> 
> 赞同：0
> 
> 时间：2013-02-21T04:42:41.333
> 
> 标签：python, search, text, gtk, textview

我环顾四周，我认为这真的很简单，由于某种原因，我只找到了我需要的部分。

我已经制作了一个文本编辑器，并且我有一个输入框，它会发现问题是它只会在文本视图中找到第一个单词，而我无法让它搜索下一行。就像文本文档中的查找功能。

```
def search(found):
    search_str = findentry.get_text()
    start_iter =  textbuffer.get_start_iter()
    found =       start_iter.forward_search(search_str,0, None) 
    if found:
      match_start,match_end = found
      textbuffer.select_range(match_start,match_end) 
```

我想我可以做一个下一个搜索的按钮，并让它再次向前搜索添加一些东西和一个变量+1。我怎样才能让它向前和向后搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:34:10.123

您正在使用`get_start_iter()`，它返回文本缓冲区中的第一个位置。大概，你想从 开始`match_end`，也就是第一次搜索时单词结束的位置，也就是说，你应该从那里开始。

假设您使用该参数返回`found`并再次调用`search`，则可以替换该行：

```
 start_iter =  textbuffer.get_start_iter() 
```

经过

```
 start_iter = found[1] if found else textbuffer.get_start_iter() 
```

第一次，或者当你想重置搜索时，你可以通过`found=None`.

# java - ActionEvent“找不到符号”

> ID：14994688
> 
> 赞同：-1
> 
> 时间：2013-02-21T04:43:06.760
> 
> 标签：java, swing, error-handling, actionlistener, actionevent

我正在制作一个程序来包装文本，根据用户输入，按单词或按字符。我的一切正常，除了我的 ActionEvent 给我一个“找不到符号”错误。我确定这是我错过的一些小东西，但我似乎找不到它：

```
import javax.swing.*;
import java.awt.*;
import javax.swing.border.*;

public class JTextWrap extends JFrame
{
   JScrollPane scroll = new JScrollPane();
   JPanel panel = new JPanel();
   JTextArea jta = new JTextArea();
   TitledBorder tb;
   JRadioButton jrb = new JRadioButton();
   JRadioButton jrb2 = new JRadioButton();
   ButtonGroup btg = new ButtonGroup();
   JCheckBox jdb = new JCheckBox();

   public JTextWrap()
   {
      tb = new TitledBorder("");
      setSize(new Dimension(400, 300));
      jta.setText("jTextArea1");
      panel.setBorder(tb);
      tb.setTitle("Wrap Options");
      jrb.setText("Wrap Words");
      jrb.addActionListener(
            new ActionListener()
            {
               public void actionPerformed(ActionEvent e) {
                  JTextWrap.jrb_actionPerformed(e);
               }
            });
      jrb2.setText("Wrap Characters");
      jrb2.addActionListener(
            new ActionListener()
            {
               public void actionPerformed(ActionEvent e) {
                  JTextWrap.jrb2_actionPerformed(e);
               }
            });
      jdb.setText("Wrap");
      jdb.addActionListener(
            new ActionListener()
            {
               public void actionPerformed(ActionEvent e) {
                  JTextWrap.jdb_actionPerformed(e);
               }
            });
      add(scroll, "Center");
      scroll.getViewport().add(jta, null);
      add(panel, "South");
      panel.add(jdb, null);
      panel.add(jrb, null);
      panel.add(jrb2, null);

      btg.add(jrb);
      btg.add(jrb2);
   }

   public static void main(String[] args)
   {
      JTextWrap frame = new JTextWrap();
      frame.setTitle("JTextWrap");
      frame.setDefaultCloseOperation(3);
      frame.setSize(400, 300);
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   void jdb_actionPerformed(ActionEvent e) {
      jta.setLineWrap(jdb.isSelected());

      if (jdb.isSelected()) {
         jrb.setEnabled(true);
         jrb2.setEnabled(true);
      }
      else {
         jrb.setEnabled(false);
         jrb2.setEnabled(false);
      }
   }

   void jrb_actionPerformed(ActionEvent e) {
      jta.setWrapStyleWord(jrb.isSelected());
      jta.revalidate();
   }

   void jrb2_actionPerformed(ActionEvent e) {
      jta.setWrapStyleWord(!jrb2.isSelected());
      jta.revalidate();
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T04:44:47.250

`ActionEvent`类在`java.awt.event`包中，您尚未导入此包。

# excel - Block the Excel message "content that is not suported" using AppleScript

> ID：14994693
> 
> 赞同：0
> 
> 时间：2013-02-21T04:43:32.980
> 
> 标签：excel, macos, applescript, excel-2008

I have an Excel 2008 file. This give a warning message when opened. I would like this message not to be displayed.

```
tell application "Microsoft Excel"  
    open workbook workbook file name "private:var:root:Desktop:XLS FILES:Copy of 
                                   New Microsoft Excel Worksheet (5).xlsx" read only 1
end tell 
```

With the above script the Excel file is opened but the Excel warning still appears:

![SO14994693 question example](../Images/946c9e3dfee7b07903369bf25cd7c9c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:16:32.857

Try:

```
tell application "Microsoft Excel"
    open workbook workbook file name "private:var:root:Desktop:XLS FILES:Copy of New Microsoft Excel Worksheet (5).xlsx" with ignore read only recommended
end tell 
```

# php - 如何修复页面上的变量

> ID：14994694
> 
> 赞同：0
> 
> 时间：2013-02-21T04:43:34.690
> 
> 标签：php

我正在从另一个页面获取一个变量，但是当我单击教师链接时，获取变量会被破坏。如何修复此页面上的变量？

```
<ul>
<?php if(isset($_GET['a'])){$var=$_GET['a'];};?>
<li><a href='<?php if(isset($var)){echo $var;} ?>.php'><span><?php if(isset($var))
{echo             $var." ";}?>Home</span></a></li>
<li><a href=''><span>HOD</span></a></li>
<li><a href='faculty.php?b=<?php if(isset($_GET['a'])){echo $_GET['a'];}?>'>
<span>Faculty</span></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:49:14.250

您的代码是完美的，只需确保您`URL`必须拥有`a`as `index.php?a=somevalue`。

```
<ul>
    <?php
        if(isset($_GET['a']))
        {
            $var=$_GET['a'];
    ?>
        <li>
            <a href = ""<?php echo $var; ?>.php" rel="">
                <span><?php echo $var." "; ?>Home</span>
            </a>
        </li>
        <li><a href = ''><span>HOD</span></a></li>
        <li>
            <a href = "faculty.php?b=<?php echo $var; ?>" rel="">
                <span>Faculty</span>
            </a>
        </li>
    <?php
        }
    ?>
</ul>
```

# c# - 用于 Azure 移动服务 (REST) 的 Live Connect 身份验证令牌

> ID：14994696
> 
> 赞同：1
> 
> 时间：2013-02-21T04:43:44.767
> 
> 标签：c#, rest, azure-mobile-services, jwt, live-connect-sdk

我有一个简单的 Windows 窗体应用程序来尝试 Live Connect 和 Azure 移动服务。不是 Windows 8 现代应用程序。

我正在尝试为 Live Connect 使用一些示例代码，并且已经能够让登录部分正常工作。最后，我在登录后得到一个 access_token。

在同一个 Windows 窗体应用程序的移动服务端，我正在尝试使用 REST 登录。但是，我似乎收到“401 Unauthorized”响应，因为“身份验证令牌的签名格式错误或由不同的密钥签名”

JWT 似乎有两个 '.' 在令牌中。SWT 似乎有 '/'、'+' 和 '='

我需要进行转换吗？

有没有办法配置 Live Connect，以便返回的身份验证令牌是 JWT（或任何移动服务期望的）？

我已经检查了 Live Connect 和移动服务上的客户端密码，它们是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:42:26.057

正如@carlosfigueira 所指出的，在 Live Connect 开发人员中心，您的应用程序需要在重定向域字段中包含一些内容。它可以是一个虚拟 URI。

[由此处的答案证实： http](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/4a110db0-6468-44fb-9152-771987ded050) ://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/4a110db0-6468-44fb-9152-771987ded050

# javascript - JSP Java 脚本验证不起作用

> ID：14994699
> 
> 赞同：0
> 
> 时间：2013-02-21T04:43:57.980
> 
> 标签：javascript, jsp

我在 JSP 页面中编写了一个 java 脚本代码，但是当我尝试提交页面时，我的 javascript 验证代码没有被触发，任何人都可以帮我解决问题吗？

这是我的代码：

```
<html>
<center><h3>Employee Absent Report</h3></center>

<head>

<script language="javascript" type="text/javascript">

function onFormSubmit(){
    var countErrors = 0;

    var strDt=document.getElementById("startdate").value;

    var endDt=document.getElementById("todate").value;
    var flag=false;
    var eFlag = false;

    if (IsEmpty(strDt)==false && IsEmpty(endDt)==true ) {       
        document.getElementById("divExpiryDate").innerHTML = "* Please Enter Expiry Date";
    return false;

    }

    if (IsEmpty(strDt)==true && IsEmpty(endDt)==false ) {       
        document.getElementById("divStartDate").innerHTML = "* Please Enter Start Date";
        return false;

    }
    return true;
}
</script>
</head>
<body>
<form name="form" action="FormServlet" method="get" onsubmit="return onFormSubmit(); ">
<center>
<div id="formErrors" class="error"></div>       
FromDate:
<input type="text" name="startdate" id="startdate"/>
 <div id="divStartDate"></div>
<br>
ToDate:
<input type="text" name="todate" id="todate"/>
 <div id="divExpiryDate"> </div>
<br>
<input type="submit" value="submit"/>
</center>
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:47:43.533

javascript中有一个方法“IsEmpty”吗？我认为这就是问题所在。如果你在其他地方定义了这个，试着在 Firefox 中运行你的代码并观察错误控制台是否有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:51:11.900

对我来说似乎是一个逻辑错误。尝试替换这个：

```
if (IsEmpty(strDt)==false && IsEmpty(endDt)==true ) {       
    document.getElementById("divExpiryDate").innerHTML = "* Please Enter Expiry Date";
return false;

}

if (IsEmpty(strDt)==true && IsEmpty(endDt)==false ) {       
    document.getElementById("divStartDate").innerHTML = "* Please Enter Start Date";
    return false;

} 
```

和：

```
if (endDt.length==0) {       
    document.getElementById("divExpiryDate").innerHTML = "* Please Enter Expiry Date";
return false;
}

if (strDt.length==0) {       
    document.getElementById("divStartDate").innerHTML = "* Please Enter Start Date";
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T04:56:12.237

以这种方式进行验证

```
if (endDt === "") {       
    document.getElementById("divExpiryDate").innerHTML = "* Please Enter Expiry Date";
    return false;
}

if (strDt === "" ) {       
   document.getElementById("divStartDate").innerHTML = "* Please Enter Start Date";
   return false;
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T05:01:29.493

这是工作修改代码

```
 <script>
    function onFormSubmit(event){
        var countErrors = 0;
        event.preventDefault();
        var strDt=document.getElementById("startdate").value;
        var endDt=document.getElementById("todate").value;
        var flag=false;
        var eFlag = false;
        if ( IsEmpty(endDt)==true ) {    
            document.getElementById("divExpiryDate").innerHTML = "* Please Enter Expiry Date";
        eFlag = true ;
        }

        if (IsEmpty(strDt)==true  ) {    
            document.getElementById("divStartDate").innerHTML = "* Please Enter Start Date";
            eFlag = true;
        }
        if(eFlag)
        {
            return false;
        }
        return true;
    }

    function IsEmpty(input)
    {
       if(input.replace(/^\s+|\s+$/g,"")    === "") {
           return true;
       }
      return false;
    } 
```

# jquery - jQuery 延迟循环

> ID：14994700
> 
> 赞同：0
> 
> 时间：2013-02-21T04:44:02.227
> 
> 标签：jquery, ajax, loops, deferred

我正在尝试为页面上每个选定的复选框调用 ajax 函数。一旦所有这些 ajax 调用都完成了，我想做点别的事情。在下面的示例中，“所有呼叫完成”文本在任何“单个呼叫完成”文本之前写入控制台。我怎样才能让它等到所有 ajax 调用都完成？谢谢！！

```
function ajax_function() {
  return $.ajax({
    url: "submit.php",
    type: "POST",
    dataType: "json",
    data: form_data,
    cache: false
  })
}

var deferreds = $('input:checkbox:checked.checkprint').map(function(i, elem) {
  $.when(ajax_function()).then(function(data) {
    console.log('single call completed');
    return data;
  });
});

$.when.apply($, deferreds.get()).done(function() {
  console.log('all calls completed');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:51:05.383

您可以使您的 ajax 调用同步。

```
function ajax_function() {
  return $.ajax({
    url: "submit.php",
    type: "POST",
    dataType: "json",
    data: form_data,
    cache: false,
    async:false
  })
} 
```

选项2：

```
var totalnumber = $('input:checkbox:checked.checkprint').length;
var counter   = { t: 0 };
var deferreds = $('input:checkbox:checked.checkprint').map(function(i, elem) {
  $.when(ajax_function(totalnumber,counter)).then(function(data) {
    console.log('single call completed');
    return data;
  });
});

function ajax_function(totalnumber,counter) {
  return $.ajax({
    url: "submit.php",
    type: "POST",
    dataType: "json",
    data: form_data,
    cache: false,

  }).done(function( html ) {
    counter.t++;
    if (counter.t == totalnumber) {
         console.log('all calls completed');
    }
  });
} 
```

为什么是counter.t，因为对象是作为引用传递的，我们需要改变counter.t的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:15:00.880

我想我使用 ajaxStop ( [http://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/) )完成了我想做的事情

```
$(document).delegate('#submit_all', 'click', function(e) {
  $('input:checkbox:checked.checkprint').each(function() {
    ajax_function();
  });
  $("#submit_all").one("ajaxStop", function() {
    console.log('all calls completed');
  });
}); 
```

# c++ - 如何确定我的代码中是否有应该是私有的公共成员函数？

> ID：14994709
> 
> 赞同：0
> 
> 时间：2013-02-21T04:44:58.370
> 
> 标签：c++, doxygen

我正在查看一些代码，在 doxygen 文档中，我发现了许多仅由同一类使用的成员函数，将它们更改为私有对我来说是有意义的。

有没有办法在编译时确定（可能是像 doxygen 这样的工具）可以列出所有这些函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:29:27.900

> 有没有办法在编译时确定（可能是像 doxygen 这样的工具）可以列出所有这些函数？

当然 ;-) 将它们更改为私有，然后重新编译。如果构建成功，那么你就完成了。

如果构建失败，那么它们“需要”公开/受保护，您可以调查原因，修复调用代码或将它们放回原处。

我意识到这并不是你真正要求的，但它确实有效。

我怀疑你可以写一些基于clang的东西。

# matlab - 在 Matlab 中访问单元格中的向量

> ID：14994711
> 
> 赞同：3
> 
> 时间：2013-02-21T04:45:09.523
> 
> 标签：matlab

`C`是一个由一些向量组成的单元格：

```
C = {[1, 2], [2, 3]}; 
```

我想读取 中第一个向量的第一个条目`C`。但我不能使用以下内容：

```
C{1}[2] 
```

我收到以下错误：

> 错误：不平衡或意外的括号或括号。

我怎样才能让它读取值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T04:51:41.133

您可以像这样访问元胞数组中矩阵的各个元素：

```
C{n,m}(ii,jj); 
```

这将为您提供单元格数组`(ii,jj)`索引处的矩阵元素。`(n,m)`

因此，对于您的特定示例，

`val = C{1,1}(1,1)`（或`val = C{1}(1)`）

会将元胞数组中第一个向量的第一个元素的值赋给变量`val`。

# f# - 如何为自定义运算符设置优先级？

> ID：14994712
> 
> 赞同：3
> 
> 时间：2013-02-21T04:45:17.710
> 
> 标签：f#, operators

如何为自定义运算符设置优先级？（如果可能的话）

喜欢`*`或`/`具有更高的优先级，`+`或者`-`我想将这样的规则添加到我的运营商。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T05:08:54.487

优先级由本页底部的表格决定：http: [//msdn.microsoft.com/en-us/library/dd233228.aspx](http://msdn.microsoft.com/en-us/library/dd233228.aspx)

特别是顺序是：

> |,',',||,&,&&,< op, >op, =, |op, &op,&&& , |||, ^^^, ~~~, <<<, >>>,^ op ,::,- op, +op, (binary),* op, /op, %op,** op,前缀运算符 (+op, -op, %, %%, &, &&, !op, ~op )

从同一页面：

> F# 支持自定义运算符重载。这意味着您可以定义自己的运算符。在上表中，op 可以是任何有效（可能为空）的运算符字符序列，可以是内置的也可以是用户定义的。因此，您可以使用此表来确定自定义运算符使用什么字符序列来实现所需的优先级。领导 。编译器确定优先级时忽略字符。

# javascript - 滚动上的运动模糊效果

> ID：14994718
> 
> 赞同：1
> 
> 时间：2013-02-21T04:45:52.303
> 
> 标签：javascript, motion-blur

我试图在滚动时对 HTML div 应用运动模糊效果。为此，我需要每 1/5 秒对每个 div 进行一次克隆，并在滚动时将其位置固定在页面上。我还需要每 1/5 秒降低每个 div 克隆的不透明度，并确保页面上一次只有 5 个 div 克隆（这样我就可以拥有数百个 div 克隆几秒钟后的页面）。是否可以使用这种方法在 JavaScript 中创建运动模糊效果？

```
<div id = "blurOnScroll">
Create the illusion of a motion blur by creating clones of this div every 1/5 of a second, reducing the opacity of each clone every 1/5 of a second, and remove each clone as soon as it has completely faded away.
</div>
<script type = "text/javascript">
    function motionBlurEffect(){
        //create the illusion of a motion blur effect, as described above.
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-12-10T03:12:37.037

此实现使用 SVG 高斯模糊滤镜。模糊的强度取决于您的滚动*速度。*

```
var blurFilter = document.getElementById('blur-kernel');
var html = $('html');
var prevPos = $(window).scrollTop();
var prevTime = Date.now();
var speed = 0;
var cheat = 0;

function blur() {
  cheat = 1 - cheat; // alternates between 0 and 1; used to force browser repaint by setting CSS

  let newPos = $(window).scrollTop();
  let newTime = Date.now()

  // distance over time times milliseconds per frame
  velocity = (newPos - prevPos) / Math.max(1, newTime - prevTime) * 1000 / 60;

  prevPos = newPos;
  prevTime = newTime;

  const STRENGTH = 1;
  blurSize = Math.max(0, Math.abs(velocity) / 2 * STRENGTH - 0.5);

  blurFilter.setStdDeviation(0, Math.floor(blurSize));
  blurFilter.setAttribute('stdDeviation', '0,' + blurSize);

  // forces browser repaint
  html.css('width', cheat + 'px');

  requestAnimationFrame(blur);
}

requestAnimationFrame(blur);
```

```
html {
  filter: url(#blur);
  -webkit-filter: url(#blur);
  will-change: filter, -webkit-filter;
  transform: translateZ(0);
  font: 16px sans-serif;
  line-height: 1.5;
}
body, img {
  /* setting the width of the body makes the
  html element's force-repaint "cheat" have no visible effect */
  width: calc(100vw - 20px); /* minus scrollbar */
  margin: 0;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eget tincidunt ipsum. Nullam metus mauris, scelerisque vel accumsan at, dapibus non odio. Cras volutpat malesuada tempus. Pellentesque vehicula posuere dolor et aliquet. Proin laoreet nisl sapien, ut congue neque placerat at. In ac nulla nec erat pretium egestas id ut orci. Vestibulum nec ultrices diam, sed efficitur ligula. Maecenas elementum molestie diam, vel mattis velit. Sed eu dignissim nibh, quis sollicitudin dolor. Praesent interdum pharetra aliquam. Maecenas mi est, semper nec dui euismod, semper interdum sem. Vestibulum sed porttitor purus. Ut convallis non urna non blandit. Quisque pharetra dolor ac ex dictum ultrices. Vestibulum cursus hendrerit elit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
</p>
<img src='https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg'>
<p>
Praesent mi nisl, dictum nec velit tincidunt, vestibulum congue purus. Nam venenatis elit lectus, quis fringilla felis dictum sed. Etiam ac lacus a neque lobortis rhoncus at vitae felis. In dapibus massa massa. Integer semper egestas interdum. Praesent augue magna, ultrices at consectetur eget, semper sit amet sapien. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sollicitudin libero tortor, at gravida justo suscipit et. Maecenas euismod tellus eget lectus sollicitudin, nec consequat mauris porta. Aliquam vitae dolor ut ante commodo volutpat non sed leo. Donec malesuada justo tempus enim aliquet cursus. Pellentesque magna lectus, rhoncus ac porttitor at, congue vitae eros.
</p>
<p>
Proin ultricies dignissim arcu. Maecenas felis nunc, convallis non turpis at, laoreet dictum velit. Proin euismod libero ut orci commodo, in consequat orci fringilla. Donec ac congue mauris, lacinia mollis risus. Maecenas lorem diam, pulvinar quis est non, ornare cursus libero. Quisque ut magna sed arcu hendrerit facilisis eget vitae risus. In gravida nunc nec arcu tincidunt finibus. Nam sem ligula, vulputate in lorem ut, lobortis feugiat purus. Etiam placerat arcu efficitur risus pharetra eleifend. Nunc consectetur urna quis sapien placerat molestie. Vestibulum commodo elit nec facilisis varius. Ut ut posuere nisl, vitae pharetra enim. Aliquam molestie viverra venenatis.
</p>
<img src='https://photographycourse.net/wp-content/uploads/2014/11/Landscape-Photography-steps.jpg'>
<p>
Quisque tempus, sem et malesuada ornare, orci leo pulvinar nisi, laoreet vestibulum augue sem vitae nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Morbi quis commodo lorem. Sed ac scelerisque mauris, in lobortis ligula. Curabitur vestibulum blandit auctor. Aenean viverra turpis in dui tincidunt, vitae auctor quam faucibus. Sed id risus cursus, vehicula lorem at, tincidunt mi. Aenean maximus porttitor magna cursus interdum. Etiam sit amet mattis quam. Fusce sodales sodales porta. In hendrerit, velit eget tempus pretium, sapien tortor rutrum enim, eget aliquet libero velit et libero. Aliquam a consequat sem. Integer feugiat ut quam eu finibus. Sed rhoncus eleifend viverra. Mauris at viverra nulla, sit amet ultrices diam.
</p>
<p>
In sagittis nisi quis mi tristique mollis. Sed vulputate orci quis leo commodo, eu auctor orci tincidunt. Nullam eget posuere felis, in ultricies nibh. Nunc congue lorem sed elit fringilla lacinia. Vivamus ac ante tempor, ultricies ante nec, volutpat eros. Aenean laoreet justo imperdiet metus placerat accumsan. Quisque odio nibh, venenatis sit amet dignissim ut, tempor ultrices libero.
</p>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="filters">
  <defs>
    <filter id="blur">
      <feGaussianBlur id="blur-kernel" in="SourceGraphic" edgeMode='duplicate' stdDeviation="0,0" />
    </filter>
  </defs>
</svg>
```

我正在 MacBook Pro 上对其进行测试，Chrome 是唯一可以流畅运行这种运动模糊效果的浏览器。我认为由于不同的渲染技术，它在 Safari 和 Firefox 中非常滞后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:30:26.650

我在 Stackoverflow 上找到了这篇文章：

[这种模糊效果是如何在 javascript 中完成的？](https://stackoverflow.com/questions/9509423/how-is-this-blur-effect-done-in-javascript)

```
$('img').on('mouseenter', function () {

        var $theClone = $(this).clone().css({ opacity : 0.5, position : 'absolute', top : 0 });

        $(this).parent().append($theClone);

        $theClone.animate({ left : 10 }, 500).on('mouseleave', function () {
            $(this).stop().fadeOut(250, function () {
                $(this).remove();
            });
        });      
    });​ 
```

或者也许这个功能：

```
 function addParallaxScrolling() {
        if (!$("bgImageTop")) {
            return
        }
        if (window.orientation == undefined && !Browser.firefox) {
            var body = document.getElement("body"),
                headerimage = $("bgImageTop"),
                headergrad = $("bgGradientTop");
            window.addEvent("scroll", function windowScrollEvent() {
                body.setStyle("background-position", "0px " + (this.getScroll().y / 4) + "px");
                headerimage.setStyle("top", this.getScroll().y / 4 + "px");
                headergrad.setStyle("top", headerimage.getStyle("top").toInt() + headerimage.getStyle("height").toInt() + "px")
            })
        }
    } 
```

希望我能帮助你。

# ios - 像旧应用一样在 iPhone 5 上运行的新应用（屏幕居中，上下有 2 个空白区域）

> ID：14994726
> 
> 赞同：0
> 
> 时间：2013-02-21T04:47:14.407
> 
> 标签：ios, objective-c, xib, iphone-5, screen-size

我为 iPhone 4 制作了一个应用程序，屏幕尺寸很好，一切都很好......当我在 iPhone 5 上运行应用程序时，虽然应用程序不像我的旧应用程序那样位于屏幕中间，它被拉伸以填满屏幕，并且发生了很多乱七八糟的东西。我怎样才能让它在屏幕中央，上下都有一个黑条，就像在 iPhone 5 上运行的旧应用程序一样，在 iPhone 5 现在发布之后，Apple 也会拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:26:52.267

通过从项目中删除 default-568h@2x.png（参考和文件）。并从模拟器中删除应用程序并执行“清理”然后“构建”它会起作用。但是会出现删除图像的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:02:05.930

正如 rmaddy 和我在评论中已经提到的解决方案：

只需`default-568h@2x.png`从设备中删除和删除应用程序并进行干净的构建即可“解决”问题。

# c - C 中的整数促销会降级“long int”吗？

> ID：14994728
> 
> 赞同：3
> 
> 时间：2013-02-21T04:47:26.590
> 
> 标签：c

来自[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

6.3.1.1

> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为无符号整数。这些被称为整数促销。

所以这意味着如果我`long int`在表达式中使用 a ，它将被降级为`unsigned int`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:17:22.763

您引用的位受其上方文本的限制：

> 可以在可以使用 int 或 unsigned int 的表达式中使用以下内容：
> 
> *   整数类型的对象或表达式，其整数转换等级小于 int 和 unsigned int 的等级。
> *   _Bool、int、signed int 或 unsigned int 类型的位域。
> 
> 如果一个 int 可以表示原始类型的所有值，则将该值转换为 int；否则，它将转换为无符号整数。这些被称为整数促销。整数提升不会改变所有其他类型。

换句话说，`long int`不会被提升为`int`or `unsigned int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:12:54.550

我认为“原始类型”是指“[...] 一个整数类型（除了 int 或 unsigned int），其整数转换等级小于或等于 int 和 unsigned int 的等级”，如前面第 6.3 节中定义的那样.1.1.2。但是，不错的尝试:)

# php - 如何为 PHP 循环我的数据

> ID：14994729
> 
> 赞同：0
> 
> 时间：2013-02-21T04:47:34.203
> 
> 标签：php

我有一些经过 json 解码的数据，如下所示：

```
stdClass Object
(
    [6] => stdClass Object
        (
            [13] => stdClass Object
                (
                    [buildingId] => 1
                )

        )

    [8] => stdClass Object
        (
            [20] => stdClass Object
                (
                    [Id] => 1
                )

        ) 
```

事情是我不知道如何循环获取信息以在我的脚本中使用它。

我需要得到例如：

```
$key, $innerkey, $Id = 1
Object [8][20].Id = 1 
```

这两个数字是 X;Y 坐标，所以重要的是我得到了这些值以及 id。

我设法得到了第一把钥匙：

```
$obj = JSON_decode($_GET['data']);  
    foreach($obj as $key) { 
        echo $key;                      
    } 
```

如何获得分配给变量的内键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:00:57.300

您需要用 {} 包装数字键。一种PHP警告。

`echo $obj->{8}->{20}->Id;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:08:13.237

更改`json_decode($_GET['data']);`为`json_decode($_GET['data'], true);`

如果第二个参数是`true`那么它返回数组，否则它是对象。

```
$obj = json_decode($_GET['data'], true);  
    foreach($obj as $key=>$val) { 
        foreach($val as $k=>$v){
           echo $k." : ".$v['Id'];
           echo "<br>";
        }                      
    } 
```

参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:52:05.620

您必须为此使用两个 foreach 循环，如下所示

```
$obj = JSON_decode($_GET['data']);  
    foreach($obj as $key) { 
        foreach($key as $val) { 
          echo $val->id;                      
        }                    
    } 
```

# 更新的答案

```
$obj->{8}->{20}->Id = 10; // assigned the value for testing purpose. 

$a = 8;
$b = 20;

echo $obj->$a->$b->Id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:03:41.200

你是这个意思吗？

```
$array = (array)json_decode($_GET['data']);  
foreach ($array as $key) { 
    var_dump($key);
} 
```

或者

```
$array = json_decode($_GET['data'], true);  
foreach ($array as $key) { 
    var_dump($key);
} 
```

json_decode()的2.参数：true：到数组，false：到对象。

# ssh - 无法通过 SSH 验证 openssl smime 验证

> ID：14994736
> 
> 赞同：1
> 
> 时间：2013-02-21T04:48:34.143
> 
> 标签：ssh, openssl, certificate, verification, smime

我正在尝试通过 SSH 连接到我大学的服务器以进行 OpenSSL 分配。我有我的自签名证书`aasignedcert.pem`、签名的私钥`aaprivatekey.pem`和我的明文`test.txt`。

我首先使用以下命令签署了我的消息以创建我的`testsigned.txt`文件：

`openssl smime -sign -signer aasignedcert.pem -in test.txt -inkey aaprivatekey.pem > testsigned.txt`

然后，加密文件以制作`testsigned.txt.enc`：

`openssl smime -encrypt -in testsigned.txt -aes128 aasignedcert.pem > test.txt.enc`

为了确保一切正常，我解密了该文件并将其存储在`testsigned.dec.txt`：

`openssl smime -decrypt -aes128 -in test.txt.enc -inkey aaprivatekey.pem > test.dec.txt`

解密后的文件确实有原始明文。最后，我尝试使用我签署的证书来验证它：

`openssl smime -verify -in test.dec.txt -CAfile aasignedcert.pem -certfile aasignedcert.pem`

但是，这不起作用。即使摆弄参数，我也始终收到此错误消息：

`Verification failure 139814549997256:error:21075075:PKCS7 routines:PKCS7_verify:certificate verify error:pk7_smime.c:342:Verify error:unable to get local issuer certificate`

我无法弄清楚我做错了什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:05:48.913

您是如何创建 aasignedcert.pem 的？也许您使用您创建的本地 CA 对其进行了自签名？如果是这种情况，我相信您需要将*CA 的证书*传递给 -CAfile 参数。

openssl smime -verify -in test.dec.txt -CAfile [CA 证书] -certfile aasignedcert.pem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T09:08:54.227

要在验证消息时禁止检查密钥证书，您可以将 -noverify 参数提供给 verify 命令（尽管 openssl smime verify -noverify 确实看起来有点奇怪）。

# rest - REST API 和实时事件通知

> ID：14994746
> 
> 赞同：0
> 
> 时间：2013-02-21T04:49:20.133
> 
> 标签：rest

我正在探索`REST API`，我想知道有没有办法联系`REST`到`Real time event notification`客户。我明白那`REST`是`STATELESS protocol`。一种方法是让客户注册感兴趣的事件，并`poll`使用一些`rest api`. 有没有其他方法可以在不使用的情况下进行说`poll`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:58:25.787

如果您正在使用 Java 进行尝试，您应该尝试 Atmosphere 框架。

它支持 Jersey REST 和服务器推送。

# c# - 从 c# 静态方法调用 javascript 函数

> ID：14994753
> 
> 赞同：0
> 
> 时间：2013-02-21T04:49:54.560
> 
> 标签：c#, asp.net

我在后面的 aspx 代码中使用下面的客户端脚本来调用 javascript 函数。但是下面的公共静态方法中的客户端脚本，所以我在 registerstartupscript 第一个参数中得到了错误。我的旧帖子在这里[从静态函数调用非静态函数](https://stackoverflow.com/questions/14978332/call-non-static-function-from-static-function)

如果有人有可能的解决方案，请发布..

Page.ClientScript.RegisterStartupScript(typeof(Page), "SymbolError", "from_bill_tab();");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:58:08.690

尝试这个：

```
ClientScript.RegisterStartupScript(typeof(Page), "SymbolError", 
 "<script type='text/javascript'>alert('Error !!!');</script>"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-14T07:10:39.670

我知道这是一个老问题。我回答这个问题是为了帮助遇到这个问题的新用户。

要在静态方法中使用客户端脚本，请将 Page 对象作为参数传递给您的静态方法

```
protected void Page_Load(object sender, EventArgs e)
        {
           LoadJavascript(Page);
        }

public static void LoadJavascript( Page page)
        {

           page.ClientScript.RegisterStartupScript(page.GetType(), "alert", "<script>alert('Hai');</script>");
        } 
```

# jquery - asp.net mvc 4 使用 ajax 表单助手上传文件

> ID：14994764
> 
> 赞同：1
> 
> 时间：2013-02-21T04:50:53.813
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用 ajax 表单将多个文件上传到服务器。这就是我的表格的样子

```
 @using (@Ajax.BeginForm("SaveProjectSummary", "Project", new { id = Model.ProjectId }, new AjaxOptions { OnSuccess = "Add_OnCompleteSummarySave()" }, new { enctype = "multipart/form-data" })) 
```

我可以引导我采取我想要的行动，但我在服务器上的 Request.Files 中找不到任何东西。只是想确定我是否使用了这个对我来说似乎没有的权利，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:10:40.043

另一个很棒的上传器组件是 PlUpload

[http://www.plupload.com/](http://www.plupload.com/)

它确实：

*   夹住文件上传器，因此您可以上传大文件。例如 100Mb
*   客户端文件缩放
*   拖放文件选择

仅供参考，.NET 中用于处理来自 PlUpload 的发布请求的服务器端代码：

```
var chunk = Request.Form["chunk"] != null ? int.Parse(Request.Form["chunk"]) : 0;

var fileName = Request.Form["name"] ?? "";

//open a file, if our chunk is 1 or more, we should be appending to an existing file, otherwise create a new file
var fs = new FileStream(Server.MapPath("/files/" + fileName), chunk == 0 ? FileMode.OpenOrCreate : FileMode.Append);

//write our input stream to a buffer
var buffer = new Byte[Request.Files[0].InputStream.Length];
Request.Files[0].InputStream.Read(buffer, 0, buffer.Length);

//write the buffer to a file.
fs.Write(buffer, 0, buffer.Length);
fs.Close(); 
```

如果您热衷于推出自己的组件，请查看现代浏览器上可用的文件系统 API。它允许您获取文件内容二进制文件并使用 AJAX 调用上传

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T04:53:24.700

遗憾的是，Ajax.BeginForm 不能用于上传文件。

*   有像uploadify这样的插件

[http://www.uploadify.com/forum/#/discussion/1685/uploadify-and-ajax/p1](http://www.uploadify.com/forum/#/discussion/1685/uploadify-and-ajax/p1)

*   或者这个 jquery 插件

[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:42:06.620

[HttpPost] public JsonResult UploadImage(HttpPostedFileWrapper imageFile) {

```
 if (imageFile == null || imageFile.ContentLength == 0 || imageFile.ContentLength > 205168)
        {

            return new JsonResult
            {
                ContentType = "text/html",
                Data = "No file was uploaded."

            };
        }

        if (imageFile == null || imageFile.ContentLength == 0 || (imageFile.ContentType != "image/png" && imageFile.ContentType != "image/jpg" && imageFile.ContentType != "image/jpeg" && imageFile.ContentType != "image/pjpeg"))
        {
            return new JsonResult
            {
                ContentType = "text/html",
                Data = "Type"
            };
        }
        if (Session["CityId"] != null)
        {
            if (MdlNadal == null)
            {
                MdlNadal = new mdlNadal();
            }
            string strFilePaths = "";

            int CityId = Convert.ToInt32(Session["CityId"].ToString());
            string strCityName = "";
            if (Session["CityName"] != null)
            {
                strCityName = Session["CityName"].ToString();
            }

            string strFileNames = imageFile.FileName.Replace(@"\", "/");
            string imgPath = ConfigurationManager.AppSettings["ImagePath"].ToString().Replace("~", "");
            strFileNames = strFileNames.Split('/')[strFileNames.Split('/').Length - 1];
            Session["ImageName"] = strFileNames;
            ViewBag.ImageName = strFileNames;
            strFilePaths = Request.Url.Scheme + "://" + Request.Url.Authority + imgPath + strCityName + "" + CityId + "/" + strFileNames;
            MdlNadal.UpdateCityImageByCityID(CityId, strFilePaths);
            if (imageFile != null)
            {
                if (!Directory.Exists(Server.MapPath(Url.Content(ConfigurationManager.AppSettings["ImagePath"].ToString() + strCityName + "" + CityId))))
                {
                    Directory.CreateDirectory(Server.MapPath(Url.Content(ConfigurationManager.AppSettings["ImagePath"].ToString() + strCityName + "" + CityId)));
                }
                else
                {
                    int counts = Directory.GetFiles(Server.MapPath(Url.Content(ConfigurationManager.AppSettings["ImagePath"].ToString() + strCityName + "" + CityId))).Count();
                    if (counts > 1)
                    {
                        string[] StrArr = Directory.GetFiles(Server.MapPath(Url.Content(ConfigurationManager.AppSettings["ImagePath"].ToString() + strCityName + "" + CityId)));
                        for (int i = 0; i <= counts - 1; i++)
                        {
                            string strFileNameCheck = StrArr[i];
                            //strFileNameCheck = strFileNameCheck.Replace(@"\", "/");
                            //strFileNameCheck = strFileNameCheck.Split('/')[strFileNameCheck.Split('/').Length - 1];
                            try
                            {
                                System.IO.File.Delete(strFileNameCheck);
                            }
                            catch (Exception ex)
                            {
                                throw ex;
                            }

                        }
                    }
                }
                var FilePath = Path.Combine(Server.MapPath(Url.Content(ConfigurationManager.AppSettings["ImagePath"].ToString() + strCityName + "" + CityId)), strFileNames);
                imageFile.SaveAs(FilePath);
            }

        }

        return new JsonResult
        {
            ContentType = "text/html",
            Data = "Save"

        };
    } 
```

* * *

@using (Html.BeginForm("UploadImage", "Nadal", FormMethod.Post, new { enctype = "multipart/form-data", id = "mws-Validate", target = "UploadTarget", @class = "mws -形式” }）） {

```
 <label class="title10">
                        <strong>Choose a background for this city</strong>
                    </label>                                             
                    <div class="mws-form-item large">
                        <input type="file" name="imageFile" id="imageFile" onchange="return SetAttachFlag();" />
                        (Supported File Types : .jpg, .jpeg, .png) (Maximum Size: 200 Kb)
                        <iframe id="UploadTarget" name="UploadTarget" onload="UploadImage_Complete();" style="position: absolute;
                            left: -999em; top: -999em;"></iframe>
                    </div>

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:00:56.553

为什么不利用 HTML5 中的 File API。查看这些链接，为您指明正确的方向。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

[http://timothypoon.com/blog/2011/05/10/ajax-uploading-with-html5s-file-api/](http://timothypoon.com/blog/2011/05/10/ajax-uploading-with-html5s-file-api/)

# c++ - 带有循环和消除的随机生成概率游戏

> ID：14994767
> 
> 赞同：0
> 
> 时间：2013-02-21T04:50:59.040
> 
> 标签：c++, loops, random, probability

这是我的任务：

* * *

在 Puzzlevania 的土地上，Aaron、Bob 和 Charlie 争论了他们中的哪一个是有史以来最伟大的解谜者。为了一劳永逸地结束这场争论，他们同意进行一场生死决斗。亚伦的射门很差，只有 1/3 的概率击中目标。Bob 稍微好一点，以 1/2 的概率击中了他的目标。查理是一位专家级的神枪手，从不失手。击中意味着杀死，被击中的人退出决斗。为了弥补枪法上的不公平，三人决定轮流进行，先是 Aaron，然后是 Bob，然后是 Charlie。循环将重复，直到有一个人站着。那个人将被永远铭记为有史以来最伟大的解谜者。

一个明显且合理的策略是让每个人向还活着的最准确的射手射击，理由是这个射手是最致命的，并且有最好的反击机会。编写一个程序来模拟使用这种策略的决斗。你的程序应该使用随机数和问题中给出的概率来确定射手是否击中了他的目标。您可能希望创建多个子例程和函数来完成问题。

提示 假设 Aaron 击中目标的几率是 1/3。您可以通过生成介于 1 和 99（含）之间的随机变量 R 来模拟此概率。R小于33的概率是多少？是 1/3。你知道这会导致什么吗？如果 R 为 33，那么我们可以模拟 Aaron 击中目标。如果 R > 33，那么他错过了。您还可以生成一个介于 0 和 1 之间的随机变量，并检查它是否小于 0.33。

* * *

这是我从头开始重写两次后终于能够编写的代码：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main ()
{
    int aaron=1, bob=1,charlie=1, a=0,b=0,c=0,counter=0;
    srand(time(0));
    a= rand() % 100;
    if (a<=33)//if aaron kills charlie
    {
        charlie=0;

        b= rand() % 100; //bob choots at aaron
        if (b<=50)  //if bob kills aaron
        {
            aaron=0;
            cout<<"error1"<<endl;
        }
        else if (b>50)
        {
            while (b>50) //if bob misses
            {
                a= rand() % 100; //aaron shoots at bob
                if (a<=33)// if he kills bob
                {
                    bob=0;
                    cout<<"error2"<<endl;
                }
                else //if he misses
                {
                    b= rand() % 100;//bob shoots at aaron

                    if (b<=50)//if he kills him
                    {
                        aaron=0;
                        cout<<"error3"<<endl;
                    }
                    else //if he misses then the loop continues
                    {
                        counter++;
                    }
                }
            }
        }
    }
    else if (a>33)//aaron misses
    {
        b= rand() % 100; //bob shoots at charlie
        if (b<=50) //he kills charlie
        {
            charlie = 0;
            a= rand() % 100; //aaron shoots at bob
            if (a<=33)//aaron kills bob
            {
                bob=0;
                cout<<"error4"<<endl;
            }
            else //if not
            {
                b= rand() % 100;//bob shoots at aaron
                if (b<=50) // if he kills aaron
                {
                    aaron=0;
                    cout<<"error5"<<endl;
                }
                else if (b>50)
                {
                    while (b>50)//if not then begin loop
                    {
                        a= rand() % 100; //aaron shoots at bob
                        if (a<=33) //if he kills him
                        {
                            bob=0;
                            cout<<"error6"<<endl;
                        }
                        else
                        {
                            b= rand() % 100;;   //if not bob shoots at aaron
                            if (b<=50)// if he kills aaron
                            {
                                aaron=0;
                                cout<<"error7"<<endl;
                            }
                            else
                            {
                                counter++; //if not loop around
                            }
                        }

                    }
                }
            }
        }

        else //he misses so charlies kills bob
        {
            bob=0;
            a= rand() % 100; //aaron shoots at charlie
            if (a<=33) //aaron kills charlie
            {
                charlie=0;
                cout<<"error8"<<endl;
            }
            else // or charlie kills aaron
            {
                aaron=0;
                cout<<"error9"<<endl;
            }
        }

        if (charlie==0 && bob==0)
        {
            cout<<"Aaron wins."<<endl;
        }
        else if (aaron==0 && bob==0)
        {
            cout<<"Charlie wins."<<endl;
        }
        else if (charlie==0 && aaron==0)
        {
            cout<<"Bob wins."<<endl;
        }
    }

    return 0;
} 
```

我在 cout 行中添加了错误#，以便在编译程序时查看我的错误在哪里。

如果我得到错误 1、2、3 和 6 的 cout 行，程序将继续运行，我没有得到一个带有命名获胜者的 cout，它应该附带它。此外，对于这些数字，我似乎有时会得到双重结果（即一个错误的结果和另一个来自程序不同部分的结果）导致我假设我的循环有问题。

我选择使用循环而不是递归函数，因为它超出了赋值的范围。

我会很感激任何对我的语法和形式的评论，因为我真的很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:56:42.403

第一点 -`a= rand() % 100;`不包含 1..99，而是包含 0..99。你可以`a = (rand() % 99) + 1`改用。这仍然不是一个完全均匀的分布，因为由 给出的随机数范围`rand`可能不能被 99 整除。可能的修复包括...

1.  使用 WhozCraig 建议的 C++11 随机数库。

2.  在循环中生成随机数。例如，如果`rand()`给出一个值`>= 9900`，则将其丢弃并重试。将此循环放在一个函数中，这样您就不必每次都担心它。

3.  不要担心——对于这样的事情，如果你应该关心这个问题，你可能已经被警告过了。

下一点是代码，例如...

```
if (b<=50)  //if bob kills aaron
{
    aaron=0;
    cout<<"error1"<<endl;
}
else if (b>50) 
```

这里`if (b>50)`是完全多余的，至少对编译器来说是这样。考虑到您在这里有相当长的代码块和一些深层嵌套，您可能会为了清楚起见将其包括在内，但我会将其作为注释，并让其`else`完成它的工作。

可能你真正的问题，虽然......

```
while (b>50) //if bob misses
{
    a= rand() % 100; //aaron shoots at bob
    if (a<=33)// if he kills bob
    {
        bob=0;
        cout<<"error2"<<endl;
    }
    else //if he misses
    {
        b= rand() % 100;//bob shoots at aaron

        if (b<=50)//if he kills him
        {
            aaron=0;
            cout<<"error3"<<endl;
        }
        else //if he misses then the loop continues
        {
            counter++;
        }
    }
} 
```

如果 Aaron 向 Bob 射击，`b`则未修改，因此循环再次重复。Aaron 可以一遍又一遍地射击 Bob，直到他最终没有命中，即使 Bob 已经死了，他也终于得到了转身。你需要改变你的循环条件——可能在其他情况下也是如此，尽管我没有检查过。我可能会使用`done`旗帜。

接下来，您实际上并不需要单独的变量`a`和`b`（而且我认为您甚至没有使用`c`） - 只需使用单个变量`r`for`random`或类似的。

最后，我将使用的结构是......

```
while num_alive > 1
  if aaron_alive
    if charlie_alive
      aaron tries to shoot charlie
    else
      aaron tries to shoot bob

  if bob_alive
    if charlie_alive
      bob tries to shoot charlie
    else
      bob tries to shoot aaron

  if charlie_alive
    if bob_alive
      charlie tries to shoot bob
    else
      charlie tries to shoot aaron 
```

这里的重点是，如果你试图在控制流中记住太多关于谁活着谁死了，代码就会变得复杂。在下一次迭代中再次检查似乎是不必要的工作，但这些检查是微不足道的，即使它们不是过早的优化。您应该更喜欢更简单的代码。

在这种情况下，您还可以查看这三个块有多相似`if <whoever>_alive`，以及如何将它们分解为一个函数。

# c# - 连接两个表时的C#实体框架

> ID：14994768
> 
> 赞同：0
> 
> 时间：2013-02-21T04:50:59.013
> 
> 标签：c#

我有一些表，使用实体框架

**用户表**

*   用户身份

**书桌**

*   书号
*   书名

**拥有表**

*   用户身份
*   书号

现在我可以使用：

```
uw.ownRepository.GetData().where(v=>v.userid=1).select(o=>o.Book) 
```

获取我拥有的所有书籍。但是如果我想获取所有书籍，请注意用户是否拥有它

我有一些解决方案

1.

选择所有书籍，然后为每本书选择一次

愚蠢的解决方案= =

2.

```
 var s = from book in uw.bookRepository.GetData()                    
    join own in uw.ownRepository.GetData() on book.Id equals like.Id into ps
    from o in ps.DefaultIfEmpty()
    select new {bookName =book.name,IsOwn =o==null}; 
```

只是一些伪代码。

我试过了，效果很好。

但我想知道是否还有其他更好的解决方案

如果我想选择一个强类型，比如

```
 select new Book{bookName =book.name,bookType=book.bookType, IsOwn =o==null}; 
```

在这种情况下，如果 bookTable 中有很多字段，我必须分配每个字段。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:37:24.570

这真的很简单。您想要所有书籍，因此您想在书籍实体上启动 lambda express。在此处的示例中，我选择了匿名类型。但是，您可以选择预定义的类型。

```
Books.GetData().Select(b=> new {name = b.BookName , DoIOwnThisBook = OwnTable.GetData().Where()}) 
```

# python - 按列匹配python pyfits表

> ID：14994770
> 
> 赞同：1
> 
> 时间：2013-02-21T04:51:09.480
> 
> 标签：python, numpy, fits

我正在尝试`pyfits`通过 OBJNO（对象编号）列匹配两个数据对象。在 IDL 中，这是通过`match, A.objno, B.objno, ii, jj`过程完成的。这将返回两个索引`ii`和`jj`哪个索引`A`和`B`这样的`A[ii].objno == B[ii].objno`。

有没有一种 numpy/pythonic 的方式来做到这一点？我不想对任何一个的订购或尺寸做出任何规定，`A`或者`B`因为它们可能是大尺寸的桌子。这就是我现在正在做的事情：

```
ii = np.in1d(A.OBJNO, B.OBJNO).nonzero()[0]
jj = [np.where(B.OBJNO == objno)[0][0] for objno in A[ii].field('OBJNO')] 
```

有没有更好的 numpy 数组匹配算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:47:53.363

表示数组的大小`N`和`M`( `N > M`)，您的解决方案是 O(N*M)。

假设您的数组足够大，那么使用 O(N*logN) 解决方案会更好。您可以通过首先对更大的数组进行排序（调用 is `A`），然后对in 中`bisect`的每个元素执行二进制搜索（例如使用）来实现这一点。`B``sorted_A`

# python - 在facebook的不同事件上调用函数

> ID：14994784
> 
> 赞同：2
> 
> 时间：2013-02-21T04:52:34.887
> 
> 标签：python, django, facebook

我一直在调用一个函数来在我的 python 站点上的 facebook like 按钮的类似事件上对数据库运行查询。它工作得非常好。

```
FB.Event.subscribe('edge.create', function(href, widget) 
```

但问题是我需要在 facebook 按钮的不同事件上使用另一个更新查询。

```
<script>
        FB.Event.subscribe('edge.create', function(href, widget) {
            top.window.location = 'http://pydev.abc.com/surpriseme/';
        });
    </script>
        <div class="suprise">
            <div class="suprise_con">
                <div class="fb-like"   style="overflow:hidden;" data-href="https://www.facebook.com/VivaAviesta" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div>
                <span style="margin-left:5px;"> Like Us to Reveal</span>
            </div>
        </div> 
```

对于 url 让我感到惊讶，我添加了一个功能视图：

```
def surpriseme(request):
        if request.user.is_authenticated():
        cursor = connection.cursor()
        cursor.execute("INSERT "......." (name,facebook_id,category,user_id) VALUES ('Abcd',1,'',%s)",[request.user.id])
        #return HttpResponse("success")
        return redirect("/showroom/") 
```

任何人都可以帮助在不同的事件中调用另一个函数吗？

实际上问题是，不喜欢我们网站上的脸书按钮的人将无法看到很少的产品，一旦他/她点击“喜欢”按钮，他们就可以看到产品。
现在我需要的是，如果有人再次与按钮不同，将无法看到产品，这目前不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T09:32:30.513

像这样打电话

```
<script type="text/javascript">
window.fbAsyncInit=function() {
FB.Event.subscribe('edge.remove', function(href, widget) {
 top.window.location = '{{baseurl}}/surprisemeunlike/';

});
 FB.Event.subscribe('edge.create', function(href, widget) {
            top.window.location = '{{baseurl}}/surpriseme/';
               var url = '{{baseurl}}/surpriseme/';
            });
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:37:28.817

好的，我得到了答案，还有另一个来自 facebook 的事件：

```
FB.Event.unsubscribe('edge.create', handleResponse); 
```

我们可以在这个事件上调用另一个函数。

```
<script>
        FB.Event.unsubscribe('edge.create', function(href, widget) {

            top.window.location = 'http://pydev.abc.com/surpriseunlike/';

        });
    </script> 
```

现在对我来说工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:48:59.590

“Like Gating”不违反服务条款，许多品牌都在使用。它在 FBML 下运行良好，但对于当前 API 选项的实际锁定来说并不可靠。Facebook 仅禁止要求为参赛作品点赞（除非您使用经批准的供应商来举办比赛）。

如果你真的想要求人们“喜欢”，你应该使用他们的 Graph API 和“实时更新” [https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/) 你的javascript函数只有在有人的情况下才有效在同一页面上喜欢或不喜欢。它不会处理在其他浏览器窗口或不同时间段中喜欢或不喜欢的人，这会破坏您的意图。

但是，如果有人喜欢您的页面，然后又不喜欢它 - 那又如何？他们已经看到了您的特殊内容。

# jquery - 调整浏览器大小时防止内容 div 与固定位置侧边栏重叠

> ID：14994791
> 
> 赞同：0
> 
> 时间：2013-02-21T04:53:17.500
> 
> 标签：jquery, css, positioning

所以我有一个简单的问题示例，托管在[http://linenwoods.com/random/this.html](http://linenwoods.com/random/this.html)

问题是侧边栏正在使用`position: fixed;`，因此取决于视口的大小。当我缩小浏览器并使用水平滚动条时，主要内容 div 与侧边栏重叠。我正在尝试使用 jQuery 在缩小浏览器时使用水平滚动条来调整侧边栏的位置。

我用来尝试解决问题的 jQuery 位：

```
$(document).scroll(function(e) {
  $('#right').css({
    'left': 0 - $(document).scrollLeft()
  });
}); 
```

jQuery几乎可以工作，但是因为固定定位左/右/上/下值取决于视口宽度/高度我不能给这个小函数一些自动值来计算视口宽度..这很容易修复还是会它需要大量可笑的代码？我是 jQuery 新手，因此很难深入了解文档并准确找到我需要的内容。我正在寻找的只是朝着正确方向迈出的一步。

任何帮助将不胜感激，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:12:05.060

如果您只是不希望它“跳跃”，您可以尝试在 CSS 中`left:0`为您指定。`#right`

虽然这会使布局略有变化，但它应该消除“跳跃”效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:40:19.687

## 试试这个：

查看[**小提琴**](http://jsfiddle.net/RdsUU/)并尝试使用水平滚动条

考虑[**全屏预览**](http://jsfiddle.net/RdsUU/embedded/result/)

```
$(document).scroll(function (e) {
   $('#right').animate({
    'left': 0 - $(document).scrollLeft()
   }, 100);
}); 
```

## 最初需要：

```
#right {
   width: 150px;
   position: fixed;
   left:50px;        /* <-----initially required*/
} 
```

# java - 当我更改 JTextArea 的大小时，为什么我的 JTextField 会调整大小？

> ID：14994797
> 
> 赞同：0
> 
> 时间：2013-02-21T04:53:54.193
> 
> 标签：java, swing, user-interface

我在使用这个 GUI 时遇到了很多麻烦。我将有一个applet，左侧有panel1，右侧有panel2。这是我的两个问题： 1) JTextArea 需要占据小程序的整个右侧，但我无法做到这一点。2) 每当我使 JTextArea 更长时，JTextField 也会变得更长，即使它位于完全不同的面板中。这是怎么回事？小程序和一切都是在另一个类中创建的——它可以编译并运行良好。我只是无法让这部分工作。

```
private JButton button1;

  private JLabel label1;
private JTextField field1;
private JPanel panel1;
private JPanel panel2;
private JPanel panel3;
private JTextArea area1;
int i = 0;
int j = 0;
private JScrollPane pane;

public Class()
{

this.petList = petList;
this.sPanel = sPanel;

panel1 = new JPanel();
panel1.setLayout(new BorderLayout());
button1 = new JButton("Test");
panel1.add(button1,BorderLayout.SOUTH);
field1 = new JTextField();
panel1.add(field1, BorderLayout.EAST);
label1 = new JLabel("Test");
panel1.add(label1, BorderLayout.WEST);

panel2 = new JPanel();
area1 = new JTextArea(10, 20);
panel2.add(area1);

panel3 = new JPanel();
panel3.setLayout(new BorderLayout(5,5));
panel3.add(panel1, BorderLayout.WEST);
panel3.add(panel2, BorderLayout.EAST);

this.add(panel3); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T05:03:20.010

您的想法很好，复合布局可以更轻松地布局多个组件，但是您选择的布局管理器有点偏离。

的本质`BorderLayout`是使用所有可用空间来布局它的组件。

`GridBagLayout`尝试使用类似的东西

![在此处输入图像描述](../Images/2c9f2df4bd00f6e9ffa34783db64c769.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BadLayout12 {

    public static void main(String[] args) {
        new BadLayout12();
    }

    public BadLayout12() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JButton button1;
        private JLabel label1;
        private JTextField field1;
        private JPanel panel1;
        private JPanel panel2;
        private JPanel panel3;
        private JTextArea area1;
        int i = 0;
        int j = 0;
        private JScrollPane pane;

        public TestPane() {

//            this.petList = petList;
//            this.sPanel = sPanel;

            button1 = new JButton("Test");
            field1 = new JTextField(10);
            label1 = new JLabel("Test");

            panel1 = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            panel1.add(label1, gbc);
            gbc.gridx++;
            panel1.add(field1, gbc);
            gbc.gridx = 0;
            gbc.gridy++;
            gbc.gridwidth = 2;
            panel1.add(button1, gbc);

            panel2 = new JPanel();
            area1 = new JTextArea(10, 20);
            panel2.add(new JScrollPane(area1));

            panel3 = new JPanel();
            panel3.setLayout(new BorderLayout(5, 5));
            panel3.add(panel1, BorderLayout.WEST);
            panel3.add(panel2, BorderLayout.EAST);

            this.add(panel3);
        }
    }
} 
```

看一眼;

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

更多细节

# c4 - C4 中的新课程

> ID：14994798
> 
> 赞同：1
> 
> 时间：2013-02-21T04:53:58.493
> 
> 标签：c4

我正在 C4 中创建一个新类，我想知道它们应该继承什么？

该类是辅助类而不是可视类，所以它应该从 C4Object 继承而不是 C4Control 或 NSObject （或其他一些默认类）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:30:20.407

非可视对象的最佳选择是从 C4Object 继承。

C4Object 类具有 C4Control 的所有相同功能，除了用于更改任何视觉状态的选项（例如 origin、borderWidth、animationDuration 等）。C4Control 子类应严格保留给可视对象。

# android - Maven Android SDK Deployer 运行命令“mvn install”错误：找不到属性文件。文件路径似乎不正确

> ID：14994808
> 
> 赞同：0
> 
> 时间：2013-02-21T04:54:43.193
> 
> 标签：android, maven, android-maven-plugin

> [错误] 无法在项目 android-17 上执行目标 org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2:read-project-properties（默认）：找不到属性文件：D:\maven-android -sdk-deployer-master\platforms\android-17\${env.ANDROID_HOME}\platforms\android-17\source.properties -> [帮助1]
> 
> org.apache.maven.lifecycle.LifecycleExecutionException: 无法执行目标 org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2:read-project-properties (default) on project android-17: Properties file not found : D:\maven-android-sdk-deployer-master\platforms\android-17\${env.ANDROID_HOME}\platforms\android-17\source.properties

1.  我在windows上使用maven。
2.  ANDROID_HOME 已设置。值为 D:\adt-bundle-windows-x86_64\sdk
3.  我可以在 D:\adt-bundle-windows-x86_64\sdk\platforms\android-17 下找到 source.properties
4.  D:\maven-android-sdk-deployer-master\platforms\android-17\${env.ANDROID_HOME}\platforms\android-17\source.properties 应该是 D:\maven-android-sdk-deployer-master\平台\android-17\D:\adt-bundle-windows-x86_64\sdk\platforms\android-17\platforms\android-17\source.properties。这不是一个有效的路径。我认为这就是失败的原因。

请告诉我如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T14:25:08.123

我有同样的问题。它可以通过打开 Android SDK 管理器来解决，删除产生错误的项目（在你的情况下是 Android 4.2.2 API 17 SDK），然后一旦它被删除，只需在再次运行部署程序之前再次安装它。

# php - Magento SOAP API sales_order_shipment 创建和 addTrack 问题

> ID：14994809
> 
> 赞同：0
> 
> 时间：2013-02-21T04:54:46.337
> 
> 标签：php, magento, soap, magento-1.7, magento-1.5

一些以前的程序员使用 Magento SOAP API V1 编写了这个程序，以将已发货的订单标记为已发货。在以前的 Magento vs 1.5 平台上它运行良好，但现在在 vs 1.7 上，跟踪号本身没有被导入。正如你在中途看到的那样，我的名字被注释掉了 //Caitlin。上面的那一行是以前的程序员写的，之后的两行是我认为 Magento vs 1.7 的代码，但我上次尝试这个片段时，我停止了他们的操作。这对您来说是否正确？有任何想法吗？

```
 $comment = '<b><br>*** Order has shipped. ***</b><br/><br/>' . 
                           '<b>3PL order number:</b> ' .  $fields[1] . '<br/>' . 
                           '<b>Weight:</b> ' .  $fields[2] . '<br/>' . 
                           '<b>Shipped via:</b> ' .  $fields[3] . '<br/>' . 
                           '<b>Tracking number:</b> ' .  $fields[4] . '<br/>' . 
                           '<b>Ship date:</b> ' .  $fields[5] . '<br/>' . 
                           '<b>Postage:</b> ' .  $fields[6] . '<br/>' . 
                           '<b>Fulfillment:</b> ' .  $fields[7] . '<br/>' . 
                           '<b>Per packslip:</b> ' .  $fields[8];

            // Make shipment and add tracking number
            if ($fields[3] == 'UPS-RESIDENTIAL') { $shippedby = 'ups'; $shipname = 'UPS Ground'; }
            elseif ($fields[3] == 'UPS-2') { $shippedby = 'ups'; $shipname = 'UPS 2nd Day Air'; }
            elseif ($fields[3] == 'UPS-OVERNIGHT') { $shippedby = 'ups'; $shipname = 'UPS Next Day Air Saver'; }
            elseif ($fields[3] == 'USPS-PRI') { $shippedby = 'usps'; $shipname = 'USPS Priority'; }
            elseif ($fields[3] == 'CANADA') { $shippedby = 'custom'; $shipname = 'MSI Canada (Standard) '; }
            elseif ($fields[3] == 'MSITRACK') { $shippedby = 'custom'; $shipname = 'MSI Canada (Express)'; }
            else { $shippedby = 'custom'; }
            // Attempt to create the order, notify on failure
            try { 
            $newShipmentId = $client->call($sess_id, 'sales_order_shipment.create', array($ShippedOrderId, array(), $comment, true, false, $shippedby, $shipname, $fields[4]));

            //Caitlin
            //$newShipmentId = $client->call($sess_id, 'sales_order_shipment.create', array($ShippedOrderId, array(), $comment, true, false)); 
            //$newTrackId = $proxy->call($sessionId, 'sales_order_shipment.addTrack', array($newShipmentId, $shippedby, $shipname, $fields[4]));
            }
            catch (Exception $e) { echo 'Shipment creation failed on order '. $ShippedOrderId . ': ', $e->getMessage(); }

            // Add comment to order with all the info
             $client->call($sess_id, 'sales_order.addComment', array($ShippedOrderId, 'complete',  $comment,  false));
            $mail_content .= $line . "\n";
            $importcount++;
         }
      //}
   } 
```

编辑 2/25/13

* * *

使用下面的实现。运行此脚本时出错。我无法测试它，因为我必须在 cron 在凌晨 5 点运行时进行测试。

```
// Make shipment and add tracking number
            if ($fields[3] == 'UPS-RESIDENTIAL') { $shippedby = 'ups'; $shipname = 'UPS Ground'; }
            elseif ($fields[3] == 'UPS-2') { $shippedby = 'ups'; $shipname = 'UPS 2nd Day Air'; }
            elseif ($fields[3] == 'UPS-OVERNIGHT') { $shippedby = 'ups'; $shipname = 'UPS Next Day Air Saver'; }
            elseif ($fields[3] == 'USPS-PRI') { $shippedby = 'usps'; $shipname = 'USPS Priority'; }
            elseif ($fields[3] == 'CANADA') { $shippedby = 'custom'; $shipname = 'MSI Canada (Standard) '; }
            elseif ($fields[3] == 'MSITRACK') { $shippedby = 'custom'; $shipname = 'MSI Canada (Express)'; }
            else { $shippedby = 'custom'; }

        /////////////////////////////////////////////       
        $order = Mage::getModel('sales/order')->loadByIncrementId($orderId);

        $shipment_collection = Mage::getResourceModel('sales/order_shipment_collection');
        $shipment_collection->addAttributeToFilter('order_id', $orderId);
        $shipment_collection->load();

        $firstItem = $shipment_collection->getFirstItem();

        if(count($shipment_collection) > 1)
        {

            $track_no = $fields[4]; // insert tracking # string here

                $shipment = Mage::getModel('sales/order_shipment');
                $shipment->load($firstItem->getId());
                if($shipment->getId() != '')
                {
                    $track = Mage::getModel('sales/order_shipment_track')
                        ->setShipment($shipment)
                        ->setData('title', $shipname) // User syntax correct name here
                        ->setData('number', $track_no)
                        ->setData('carrier_code', $shippedby) // use code that matches DB code for ship method here
                        ->setData('order_id', $shipment->getData('order_id'));

                    $track->save();
                }

            return true;

        } else {

            $orderShip = $order->prepareShipment(); // can take sku => qty array
            $orderShip->register();
            $orderShip->sendEmail();

            $tracker = Mage::getModel( 'sales/order_shipment_track' );
            $tracker->setShipment( $orderShip );
            $tracker->setData( 'title', $shipname );
            $tracker->setData( 'number', $importData['Tracking Number'] );
            $tracker->setData( 'carrier_code', $shippedby );
            $tracker->setData( 'order_id', $orderId );

            $orderShip->addTrack($tracker);
            $orderShip->save();

            $order->setData('state', "complete");
            $order->setStatus("complete");
                $history = $order->addStatusHistoryComment('Order marked as complete by shipment code.', false);
                $history->setIsCustomerNotified(false);
            $order->save(); 
            /////////////////////////////////////////////////

            // Add comment to order with all the info
             $client->call($sess_id, 'sales_order.addComment', array($ShippedOrderId, 'complete',  $comment,  false));
            $mail_content .= $line . "\n";
            $importcount++;
         }
      //}
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:16:20.663

上面的实现几乎对我有用，但我无法添加跟踪号码。我最终回到测试 Magento soap API 的代码。以下还添加了跟踪号：

```
 try { 
            // Create new shipment
            $newShipmentId = $client->call($sess_id, 'sales_order_shipment.create', array($ShippedOrderId, array(), 'Shipment Created', true, true));
            $newTrackId = $client->call($sess_id, 'sales_order_shipment.addTrack', array($newShipmentId, $shippedby, $shipname, $fields[4]));
            }
            catch (Exception $e) { echo 'Shipment creation failed on order '. $ShippedOrderId . ': ', $e->getMessage(); } 
```

不敢相信我花了这么多时间，因为我以前试过这个，我想我只是搞砸了一个变量。乐于帮助任何可能需要额外帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:26:32.437

我会一起去掉 API 的使用。

试试这个：

```
$order = Mage::getModel('sales/order')->loadByIncrementId($orderId);

        $shipment_collection = Mage::getResourceModel('sales/order_shipment_collection');
        $shipment_collection->addAttributeToFilter('order_id', $orderId);
        $shipment_collection->load();

        $firstItem = $shipment_collection->getFirstItem();

        if(count($shipment_collection) > 1)
        {

            $track_no = "FEDEX9879879"; // insert tracking # string here

                $shipment = Mage::getModel('sales/order_shipment');
                $shipment->load($firstItem->getId());
                if($shipment->getId() != '')
                {
                    $track = Mage::getModel('sales/order_shipment_track')
                        ->setShipment($shipment)
                        ->setData('title', 'United Parcel Service') // User syntax correct name here
                        ->setData('number', $track_no)
                        ->setData('carrier_code', 'ups') // use code that matches DB code for ship method here
                        ->setData('order_id', $shipment->getData('order_id'));

                    $track->save();
                }

            return true;

        } else {

            $orderShip = $order->prepareShipment(); // can take sku => qty array
            $orderShip->register();
            $orderShip->sendEmail();

            $tracker = Mage::getModel( 'sales/order_shipment_track' );
            $tracker->setShipment( $orderShip );
            $tracker->setData( 'title', 'United Parcel Service' );
            $tracker->setData( 'number', $importData['Tracking Number'] );
            $tracker->setData( 'carrier_code', 'ups' );
            $tracker->setData( 'order_id', $orderId );

            $orderShip->addTrack($tracker);
            $orderShip->save();

            $order->setData('state', "complete");
            $order->setStatus("complete");
                $history = $order->addStatusHistoryComment('Order marked as complete by shipment code.', false);
                $history->setIsCustomerNotified(false);
            $order->save(); 
```

请注意，orderShip 的保存会自动保存跟踪器，并且您不能单独保存跟踪器对象，因为它会失败外键约束。

# javascript - 从 JSON 文件中提取 Javascript 中的元素

> ID：14994810
> 
> 赞同：0
> 
> 时间：2013-02-21T04:54:56.777
> 
> 标签：javascript, json

我正在尝试从一个包含以下内容的 json 文件中读取：[3000,2500,6000,2200,5000,1300]。它保存为 data.txt。在我的代码中，我创建一个空数组作为第一步。然后我将一个函数传递给 $.getJSON 函数，该函数读取 data.txt 文件的内容。然后，我读取 JSON 数组中的每一项并将其推送到我之前创建的空数组中。当我尝试打印数组的第一个元素 arr[0] 时，我得到了未定义。如果我放置 document.write(arr[0]); 最后一个括号之前的表达式，它给了我正确的答案，3000，但我需要它在外面。为什么会这样？

```
arr=[];

$.getJSON('data.txt',function(data) {

for (var i in data){  
arr.push(data[i]);  
}

}); 

document.write(arr[0]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:59:13.207

1.  不要使用`for...in`语法迭代数组。这是迭代对象属性的语法，这不是您想要的。

    只需使用一个`for`循环：

    ```
    for (var i = 0; i < data.length; i++) {

    } 
    ```

2.  AJAX 是异步的，所以`arr`是在调用之后定义`document.write()`的。如果您想使用该值，请在`getJSON`回调中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:57:57.180

`getJSON`，就像任何其他 AJAX 请求一样，是异步的。任何依赖于它获得的数据的东西都必须放在成功回调中（或在由所述回调调用的函数中）。

结果，您将无法使用`document.write()`，因为文档已经加载。

相反，`arr.push(data[i])`请用一些代码替换以`data[i]`正确添加到文档中，例如将其放在文本节点中并将其附加到正文中。

```
var x = new XMLHttpRequest();
x.open("GET","data.txt",true);
x.onreadystatechange = function() {
  if( this.readyState == 4 && this.status == 200) {
    var r = window.JSON ? JSON.parse(this.responseText) : eval("("+this.responseText+")"),
      node, i;
    for( i in data) {
      node = document.createTextNode(data[i]);
      document.body.appendChild(node);
    }
  }
};
x.send(); 
```

# backbone.js - Coffeescript 和 Backbone.js + grunt.js 的 linting 问题

> ID：14994811
> 
> 赞同：1
> 
> 时间：2013-02-21T04:54:57.397
> 
> 标签：backbone.js, coffeescript, gruntjs

我对扩展 Backbone.Model 的类有点问题。

使用下面的类……</p>

```
class Turtles extends Backbone.Model

    idAttribute: "_id"
    legs: [0,1,3,5]
    urlRoot: '/turtles'

module.exports = Turtles 
```

linting 时 grunt.js 会抛出此错误。

```
[L21:C18] 'Turtles' is already defined.
    function Turtles() { 
```

编译 js 文件的输出如下所示：

```
(function() {
  var Turtles,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Turtles = (function(_super) {

    __extends(Turtles, _super);

    function Turtles() {
      return Turtles.__super__.constructor.apply(this, arguments);
    }

    Turtles.prototype.idAttribute = "_id";

    Turtles.prototype.points = [0, 1, 3, 5];

    Turtles.prototype.categories = ['story', 'tech', 'design', 'bug'];

    Turtles.prototype.urlRoot = '/cards';

    return Turtles;

  })(Backbone.Model);

  module.exports = Turtles;

}).call(this); 
```

这个输出与我使用 扩展的一些视图非常相似`class Application extends Backbone.View`，所以我不确定为什么当我的所有视图和集合都没有时，这个模型会失败 linting。

话虽如此，替换`class Turtles extends Backbone.Model`为`Turtles = Backbone.Model.extend`作品找到并不会导致错误。

只是想知道是否有人以前有过这方面的经验，或者可能会发现问题。

谢谢

# c# - 在 GridView 的 BottomPagerRow 中找不到控件

> ID：14994812
> 
> 赞同：0
> 
> 时间：2013-02-21T04:54:59.877
> 
> 标签：c#, asp.net, gridview, custompaging

我有一个非常简单的应用程序，它有一个 GridView。我有一个使用下拉列表和链接按钮的自定义 BottomPagerRow。如果我在默认页面显示时尝试使用控件，它可以正常工作，但是如果我更改页面大小，任何其他更改都会强制它恢复默认值。

只是自己看这段代码，我只能认为因为行号正在改变，控件的 ID 正在改变，当服务器试图找到它们时它们不再存在并切换到默认值。

```
<asp:GridView ID="dgCQMain" runat="server" EnableViewState="false" PagerSettings-Position="Bottom" OnPageIndexChanging="dgCQMain_PageIndexChanging" AutoGenerateColumns="true" OnRowCreated="dgCQMain_RowCreated">
    <HeaderStyle CssClass="gridHeaderRow" />
    <AlternatingRowStyle CssClass="gridAlternatingRows" />
    <PagerStyle CssClass="gridPager" />
    <RowStyle CssClass="gridRow" />
    <SelectedRowStyle CssClass="gridSelectedRow" />
    <FooterStyle CssClass="gridFooter" />
    <EmptyDataTemplate>
       <asp:Label ID="lblEmptyLaboratoryMain" runat="server" Text="[There are no current items for this patient]"></asp:Label>
       </EmptyDataTemplate>
       <EmptyDataRowStyle CssClass="gridEmpty" />
       <PagerTemplate>
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
             <tr class="gridPager">
                <td class="pagerNumbers">
                   <asp:LinkButton CssClass="pagerNumberLinks" ID="LinkButton1" runat="server" CommandName="Page" CausesValidation="false" CommandArgument="First"><<</asp:LinkButton>
                   |
                   <asp:LinkButton CssClass="pagerNumberLinks" ID="LinkButton2" runat="server" CommandName="Page" CausesValidation="false" CommandArgument="Prev"><</asp:LinkButton>
                   |
                   <asp:Repeater ID="rptPager" runat="server">
                      <ItemTemplate>
                         <asp:LinkButton CssClass="pagerNumberLinks" ID="lnkPage" runat="server" Text='<%#Eval("Text") %>' CommandArgument='<%#Eval("Value") %>' Enabled='<%# Eval("Enabled") %>' OnClick="dgCQMainPage_Changed"></asp:LinkButton>
                         <span>|</span>
                       </ItemTemplate>
                    </asp:Repeater>
                 <asp:LinkButton CssClass="pagerNumberLinks" ID="LinkButton4" runat="server" CommandName="Page" CausesValidation="false" CommandArgument="Next">></asp:LinkButton>
                 |
                 <asp:LinkButton CssClass="pagerNumberLinks" ID="LinkButton5" runat="server" CommandName="Page" CausesValidation="false" CommandArgument="Last">>></asp:LinkButton>
                 |
               </td>
               <td class="gridPager">
                  <asp:Label ID="MessageLabel" Text="Show me" runat="server" />
                  <asp:DropDownList ID="PageDropDownList" AutoPostBack="true" runat="server" OnSelectedIndexChanged="dgCQMainDropDownList_SelectedIndexChanged_Bottom">
                     <asp:ListItem Text="2" />
                     <asp:ListItem Text="5" />
                     <asp:ListItem Text="10" />
                  </asp:DropDownList>
                  <asp:Label ID="Label1" Text=" results per page" runat="server" />
               </td>
            </tr>
         </table>
      </PagerTemplate>
   </asp:GridView>

protected void dgCQMainDropDownList_SelectedIndexChanged_Bottom(Object sender, EventArgs e)
{
   // Set the PageIndex property to display that page selected by the user.
   dgCQMain.PageIndex = 0;
   dgCQMain.PageSize = int.Parse((sender as DropDownList).SelectedItem.Value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:01:30.097

我找到了答案，但我不确定我会说这是最好的方法。这里：

```
/// <summary>
/// Special method to handle the Drop down list value changing 
/// but ASP not accurately modifying the controls
/// </summary>
private void HandlePossibleBottomRowEvents()
{
    var page = associatedGridView.Page;
    var request = page.Request;

    var possibleCall = request.Form["__EventTarget"];
    if (possibleCall != null)
    {
        if (possibleCall.Contains("pagerDDL"))
        {
            var newPageSize = request[possibleCall];
            var newSize = int.Parse(newPageSize);
            if (associatedGridView.PageSize != newSize)
                UpdatePageSize(newSize);
        }
    }
} 
```

This will retrieve the postback cause, check to see if it is one of the two dll's (Top and Bottom row) and set the size to the value of the form post. AssociatedGridView is just the gridview that I'm working with. This is inside of an ITemplate that is acting as a Pager

# javascript - chrome devtool时间线框架轮廓矩形是什么意思？

> ID：14994815
> 
> 赞同：3
> 
> 时间：2013-02-21T04:55:19.707
> 
> 标签：javascript, google-chrome-devtools

[![在此处输入图像描述](../Images/b2ff2468690410805bb60161a5fdd4b1.png)](https://i.stack.imgur.com/SOaHL.png) （点击放大）

蓝色 - 加载，黄色 - 脚本，紫色 - 渲染，绿色 - 绘画

但是有很多轮廓矩形，那是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T06:10:43.390

@leiyonglin

谷歌浏览器开发人员已经定义了帧加载的标准度量。它的每秒 60 帧按照常识与 60Hz 的屏幕刷新率相吻合。所以一帧大约需要 1/60 秒。16 毫秒。每个垂直条代表一个框架，它应该在特定的 time-limit 内，您将其视为水平条，以使您的页面具有足够的响应性。每个帧都可以有多个从脚本、绘画、加载等方面发生的事情。加载方式 - N/w Request like image transfer (url) ...因此，轮廓矩形在统计上说明了这些过程（蓝色 - 加载，黄色 - 脚本，紫色 - 渲染，绿色 - 绘画）。矩形的无色部分表示浏览器（GPU/CPU）处理整个帧所需的时间。您可以通过链接了解更多信息：
[https://developers.google.com/events/io/sessions/gooio2012/209/](https://developers.google.com/events/io/sessions/gooio2012/209/)

看一个 1 帧的屏幕截图和分析

![在此处输入图像描述](../Images/0ddcee957f146462c463513a360792c8.png)

在这一帧显示中，有 2 个绘画作业和一个 JS 事件跨越 13.917 毫秒所有提到的事件（加载、绘画等）都被整理，其余时间由浏览器、CPU/GPU

# atk4 - 指向不同 DSN 的 ATK 示例

> ID：14994817
> 
> 赞同：1
> 
> 时间：2013-02-21T04:55:25.983
> 
> 标签：atk4

刚刚在我的网络服务器上安装了 atk4（最新）。

默认页面加载正常，数据库测试显示成功，但包中包含的示例似乎引用了配置中的 dsn。尽管我的（工作）配置信息示例尝试连接到 root@localhost 并失败。那不是我来自配置的 dsn 信息。

我检查了agiletoolkit 站点，他们的example.agiletoolkit 页面也在做同样的事情。

这是一个错误还是有多个配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:51:18.547

如果您已使用新的安全安装进行安装

```
curl -sS http://agiletoolkit.org/install | sh 
```

然后引导存储库出现问题。这是修复：

[https://github.com/atk4/atk4-secure/commit/a0c282e35277a044ed9048b7c292ac8da1b3092a](https://github.com/atk4/atk4-secure/commit/a0c282e35277a044ed9048b7c292ac8da1b3092a)

# ruby-on-rails - Ruby on Rails 与自我的多对多关系

> ID：14994819
> 
> 赞同：1
> 
> 时间：2013-02-21T04:55:45.157
> 
> 标签：ruby-on-rails, database, many-to-many, rails-activerecord

我正在尝试将一个人的 Facebook 朋友保存到我的数据库中。我想将 Facebook 用户存储在一个表中，然后将他们的友谊存储在另一个表中。友谊将具有请求友谊的 FacebookUser 的整数和朋友的整数，两者都是 facebook_users 表的外键。但是，当我尝试将用户的 Facebook 朋友与朋友联系起来时，我不断收到此消息。

**错误**

```
ActiveRecord::HasManyThroughSourceAssociationNotFoundError: Could not find the source association(s) :friend or :friends in model Friendship. Try 'has_many :friends, :through => :friendships, :source 
=> <name>'. Is it one of :FacebookUser or :FacebookFriend? 
```

**友谊.rb**

```
class Friendship < ActiveRecord::Base
  attr_accessible :facebook_user_id, :facebook_friend_id

  belongs_to :FacebookUser
  belongs_to :FacebookFriend, :class_name => :FacebookUser
end 
```

**facebook_user.rb**

```
class FacebookUser < ActiveRecord::Base
  attr_accessible :first_name, :gender, :last_name

  has_many :friendships, :foreign_key => :facebook_user_id
  has_many :friends, :through => :friendships, :source => :FacebookUser
end 
```

**架构**

```
create_table "facebook_users", :force => true do |t|
  t.string   "first_name"
  t.string   "last_name"
  t.string   "gender"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "friendships", :force => true do |t|
  t.integer "facebook_user_id"
  t.integer "facebook_friend_id"
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:04:33.503

Rails 使用的约定是使用由类名和外键定义的关联。如果您已经像上面那样设置了表格，则应该将模型更改为以下内容。

```
class Friendship < ActiveRecord::Base
  attr_accessible :facebook_user_id, :facebook_friend_id

  belongs_to :facebook_user # implies a foreign key of facebook_user_id and class of FacebookUser
  belongs_to :facebook_friend, class_name: 'FacebookUser' #implies a foreign key of facebook_friend_id
end

class FacebookUser < ActiveRecord::Base
  attr_accessible :first_name, :gender, :last_name

  has_many :friendships
  has_many :friends, :through => :friendships, :source => :facebook_friend
end 
```

# php - 是否可以通过graph api获取用户的所有组？

> ID：14994826
> 
> 赞同：2
> 
> 时间：2013-02-21T04:56:23.203
> 
> 标签：php, facebook, facebook-graph-api

我的要求是使用 facebook graph api 获取用户加入/喜欢的所有组/页面。我们是否需要用户的许可才能获取它们？我试过这个：

```
https://graph.facebook.com/puzzell/groups?access_token=xxxxxxxxxxxxxxxxxxxx|lGI-q-ooUDPJBryegadsgrfgr5dr 
```

但只有：

```
{
"data": [

]
} 
```

空数据。我错过了什么？或者甚至有可能获取它们？访问令牌由我创建的应用程序生成，其中 puzzell 是与我的应用程序无关的用户 ID。

请询问您是否需要了解其他信息。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:27:42.483

要阅读组，您需要：

1.  如果组是公开的（即组的
    隐私设置为 OPEN） ，则任何有效的 access_token
2.  用户非公共组的 user_groups 权限
3.  Friends_groups 用户朋友的非公共组的权限
4.  应用程序和游戏组需要使用应用程序 access_token。

> [https://graph.facebook.com/me?fields=id,name,groups](https://graph.facebook.com/me?fields=id,name,groups)

您可以通过使用 user_likes 或 friends_likes 权限向 /PROFILE_ID/likes 发出 HTTP GET 来阅读用户喜欢的页面。例如：

```
https://graph.facebook.com/me/likes 
```

# drupal - 基于邮政编码显示运费 drupal 7

> ID：14994828
> 
> 赞同：1
> 
> 时间：2013-02-21T04:56:35.107
> 
> 标签：drupal, drupal-7

对于我的网站，基于邮政编码的运费不同，如果邮政编码在我的邮政编码中列出，那么运费为零，其他明智的运费增加 15 美元，它在 drupal 7 中的表现如何。我没有使用 drupal 商务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:20:03.357

首先，您的问题含糊不清，没有正确解释。

现在，您如何尝试呈现该值，是通过视图还是通过自定义模块自定义主题。如果您使用的是自定义模块，那么您可以更好地控制您希望如何呈现该值，只需应用从数据库中提取数据的简单逻辑。或者，如果您使用视图来呈现值，我建议使用 'hook_views_pre_render()' 来更改最终值。

# iis - IIS URL Rewrite - 需要帮助为论坛重写友好的 URL

> ID：14994830
> 
> 赞同：0
> 
> 时间：2013-02-21T04:56:54.913
> 
> 标签：iis, iis-7, url-rewriting, iis-7.5

我是使用 URL Rewrite 模块的新手，我对论坛线程的简单 URL 重写遇到了麻烦（使用 IIS 7.5）

我需要重写：

```
/forum/100/2534/friendly-title 
```

或者：

```
/forum/100/2534/334/comment/friendly-thread-title 
```

至：

```
/forum/?forum=100&thread=2534&post=334&postType=comment 
```

我写的规则（不起作用）是：

```
^forum/([1-9][0-9][0-9]*)/([1-9]*)/(([1-9]*)/(post|comment)/)?([a-zA-Z0-9-]{5,50})$ 
```

映射到：

```
/forum/?forum={R:1}&thread={R:2}&post={R:4}&postType={R:5} 
```

我收到 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:02:54.550

这是正确的，`{R:4}`当`{R:5}`您使用第一个 URL 时为空。那是因为这些字段没有值。RegEx 仍然匹配，因此 URL 仍将被重写。您的代码应该正确处理`post`和`postType`querystring 参数的空值以显示整个线程，而不仅仅是特定的注释（至少我假设会发生这种情况）。

顺便说一句，更合乎逻辑的 URL 结构是：

```
/forum/100/2534/friendly-thread-title/comment/334 
```

虽然这不会帮助您解决这个特殊问题，但只是附带说明。

# ios - 多个 ManagedObjectContext

> ID：14994831
> 
> 赞同：0
> 
> 时间：2013-02-21T04:57:01.450
> 
> 标签：ios, managedobjectcontext

在**我的 managedObjectModel**中，我有几个实体。我认为可以为每个人创建**ManagedObjectContext** ......如果这是真的，我想知道：

1.  我是否需要每个 ManagedObjectContext 的方法**- (NSManagedObjectModel *)managedObjectModel ？**

2.  我是否需要每个 ManagedObjectContext 的方法**- (void)saveContext**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:00:07.130

再次阅读[Core Data Basics](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-TP1)并查看一些使用 Core Data的[示例代码。](http://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html)

通常，

*   您有一个 NSManagedObjectModel，它类似于提供实体描述的模式。
*   您有一个 NSPersistentStoreCoordinator 使用您的 NSManagedObjectModel 创建数据库
*   而且您有一个或多个 NSManagedObjectContext ，它们是“便签本”，它们与您的 NSPersistentStoreCoordinator 对话并管理对象的上下文。把它想象成一种交易方式。

当你制作一个项目时，一定要选中“使用核心数据”，这样项目就可以为你设置好大部分内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:45:31.023

你不需要这样做。单个托管对象上下文旨在处理多个实体，如果您的实体之间存在关系，则它们必须位于同一上下文中。

单独的上下文对于后台线程和临时工作区很有用，[这里](http://www.cocoanetics.com/2012/07/multi-context-coredata/)解释得很好。除非您需要，否则请坚持使用单一上下文。

# html - 网站风格随机调整

> ID：14994833
> 
> 赞同：0
> 
> 时间：2013-02-21T04:57:08.067
> 
> 标签：html, css, layout

我最近创建的网站遇到了一个奇怪的问题。当用户第一次访问网站时，导航栏和标题上的其他项目位于导航栏下方，但当用户重新加载页面时，它会正确显示。我检查了我的代码，但我不确定是什么导致了这个问题。该网站可以在[这里找到](http://rileykinsella.lua.bz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:26:52.097

我想你已经把它整理好了，因为所有的东西都很好地加载了我。

# c# - 亲子数据录入系统设计需要的建议

> ID：14994837
> 
> 赞同：2
> 
> 时间：2013-02-21T04:57:36.717
> 
> 标签：c#, asp.net, webforms

我最近继承了一个 ASP.Net 4.0/C#`webform`系统。在我修复之前，大部分应用程序都被破坏了，而且设计也不是最好的。我正在尝试就应用程序的一部分的最佳设计获得一些建议。我在网上搜索过，但我什至不太确定要搜索的术语。所以我来这里寻求你的帮助。

我正在谈论的部分要求用户提供一些基本的人口统计信息（即姓名，地址，一堆其他`textboxes`）`webform`. 输入此信息后，用户可以选择创建连接到此人口统计信息的 2 种类型的记录（A 和 B 用于论证）。记录类型 A 和 B 有自己的网络表单屏幕并收集大量信息，用户可以通过人口统计屏幕上的按钮访问这些信息。规则是，用户可以有 0 到 n 的每种记录类型，但至少必须有至少一个 A 或 B 类型的记录。一旦用户输入了人口统计信息，然后输入了 A 或 B 类型的任何记录，人口统计数据保存在一个表中，任何A类记录都保存在表A中，任何B类记录都保存在表B中。A类和B类记录通过人口统计数据表的主键链接到人口统计记录。

我什至不知道从哪里开始。

1.  什么是好的屏幕设计？
2.  逻辑背后的代码怎么样？我正在考虑使用 2 个集合（A 和 B）来存储记录 A 和 B。然后我将遍历它们以插入数据库。

您能否为我提供一个开始设计的地方，包括前端和中间层逻辑？

基本上它需要做的就是收集父记录信息，然后收集输入的尽可能多的子记录并将它们全部保存到数据库中。从概念上讲，我知道需要做什么，但我是 asp.net 的新手，对最佳架构或设计一无所知。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:28:01.437

对于您的中间层，对象关系映射 (ORM) 可能非常适合。

[http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

至于屏幕设计——你要我们做什么，我们只是编码员；）但说真的，有一个 ux.stackexchange.com 网站，如果你问那里，他们会到处都是。我会说它的逻辑结构，

## 人口统计

美洲原住民？是

## 记录

[如果不存在记录] 请至少添加一条记录...

[如果存在记录]

## 一个

喝水？是

## 乙

喝咖啡？是

等等

# eclipse - 开发 Android App 中的内存问题

> ID：14994839
> 
> 赞同：0
> 
> 时间：2013-02-21T04:57:49.393
> 
> 标签：eclipse

我目前正在尝试使用 Eclipse 为 Android 手机开发基于图像处理的应用程序。我的应用程序也包含几个按钮和子菜单按钮。我试图使其通用（以便它可以在任何分辨率上运行）使用不同分辨率的开关盒，从而为不同的分辨率使用不同的资源。问题是，我遇到了内存过载问题。它在 Xperia U 上运行良好，但在 Galaxy S 上运行良好，并且在模拟器中也崩溃了。我没有在我的应用程序中使用 XMl，而是以编程方式设计了整个 UI。请告诉我如何解决这个问题。任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:31:50.353

好吧，这个问题非常笼统，但这里有一些可能会有所帮助的要点：

1.  以编程方式设计所有内容意味着您的应用程序会很慢，并且会在运行时创建所有内容。它不是通过不使用 XML 来使用 Android UI 的设计优化。

2.  您使用什么上下文来创建 UI 对象。如果您将 UI 对象绑定到应用程序上下文而不是活动的上下文，则 UI 的所有组件都将保留在内存中，除非应用程序被终止。与活动不同，一旦活动被销毁，它的所有 UI 组件都会被杀死。

3.  您可以通过重用在 XML 中创建的组件来使用 XMl inflator 来减少 Java 中的工作。这将帮助您优化您重复使用的一些子组件。

# .net - 使用数据注释正则表达式属性时的奇怪行为

> ID：14994844
> 
> 赞同：0
> 
> 时间：2013-02-21T04:58:20.257
> 
> 标签：.net, regex

我需要在 ASP.NET MVC 4 中使用数据注释编写模型对象验证。要求是允许所有字母、数字和以下字符。

```
@'!&(){}:;,[].+?/- 
```

所有其他特殊字符都应该是验证错误。我有以下代码

```
[RegularExpression(@"^[a-zA-Z0-9 @'!&(){}:;,\[\].+?/-]+", ErrorMessage = NameIsNotValid)] 
public string Name { get; set; } 
```

此代码不会为字符串“TEST NAME |||”引发验证异常

但是如果我将代码修改为

```
[RegularExpression(@"^[a-zA-Z0-9 '!&(){}:;,\[\].+?/-]+", ErrorMessage = NameIsNotValid)] 
    public string Name { get; set; } 
```

通过从正则表达式验证中删除一个字符（@ 或 -）正确发生。我再次添加字符，不会引发验证错误

现在我被卡住了，不知道该怎么办..请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:21:47.223

我只能在普通的 c# 中测试这个，我发现你的正则表达式有两个问题：

1.  您不使用 end anchor `$`，因此只要名称以有效字符开头，您的验证就应该始终为真。

2.  `a-zA-Z`只是ASCII字母。我会用[Unicode character property](http://www.regular-expressions.info/unicode.html#prop) `\p{L}`替换它，它将匹配任何语言的任何字母。

所以，试试

```
[RegularExpression(@"^[\p{L}0-9 @'!&(){}:;,\[\].+?/-]+$", ErrorMessage = NameIsNotValid)] 
public string Name { get; set; } 
```

# jena - Apache Jena - 没有得到想要的结果

> ID：14994851
> 
> 赞同：0
> 
> 时间：2013-02-21T04:58:35.977
> 
> 标签：jena

我在这样的模型中添加了一些资源和属性：

```
String xyz = "http://www.example.com/xyz";
   String creator = "http://www.example.com/Harry";
   String email = "http://www.example.com/harry@xyz.com";
   Resource creat = m.createResource(creator);
   Resource eId = m.createResource(email);
   Resource res =        m.createResource(xyz).addProperty(DC.creator,creat.addProperty(VCARD.EMAIL, eId));
   m.write(System.out); 
```

结果我得到了这个：

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#"
xmlns:dc="http://purl.org/dc/elements/1.1/" > 
<rdf:Description rdf:about="http://www.example.com/xyz">
<dc:creator rdf:resource="http://www.example.com/Harry"/>
</rdf:Description>
<rdf:Description rdf:about="http://www.example.com/Harry">
<vcard:EMAIL rdf:resource="http://www.example.com/harry@xyz.com"/>
</rdf:Description>
</rdf:RDF> 
```

有没有其他方法可以得到结果，例如：

```
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#"
xmlns:dc="http://purl.org/dc/elements/1.1/" > 
<rdf:Description rdf:about="http://www.example.com/xyz">
<dc:creator rdf:resource="http://www.example.com/Harry"/>
    <vcard:EMAIL rdf:resource="http://www.example.com/harry@xyz.com"/>
</rdf:Description>
</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:17:15.307

试试 RDF/XML 漂亮的作家：使用

```
model.write( .... , "RDF/XML_ABBREV") 
```

或使用海龟。

# scala - SBT 任务提取 package-src 在某处创建的 jar

> ID：14994857
> 
> 赞同：2
> 
> 时间：2013-02-21T04:59:18.300
> 
> 标签：scala, sbt

我想创建一个依赖于另一个任务的任务，并将 jar 文件作为输出（例如 package-src），然后将生成的 jar 提取到某处？

注意：我对用于执行提取的库/方法不感兴趣，只对如何定义调用此类库或方法的任务感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:37:31.697

*相关文档页面是[Tasks](http://www.scala-sbt.org/release/docs/Detailed-Topics/Tasks.html)和[TaskInputs](http://www.scala-sbt.org/release/docs/Detailed-Topics/TaskInputs.html)。对于解压缩，您可以使用`sbt.IO.unzip(...)`.*

首先，我们需要定义任务的键（在`.scala`构建定义中）。该任务将返回一组解压缩文件。

```
val unzipPackage = TaskKey[Set[File]]("unzip-package", "unzips the JAR generated by package-src") 
```

然后，我们添加这样的设置：

```
unzipPackage <<= (packageSrc, target in unzipPackage, streams) map { (zipFile, dir, out) =>
  IO createDirectory dir  
  val unzippedFiles = IO unzip (zipFile, dir, AllPassFilter)
  out.log.info("Unzipped %d files of %s to %s" format (unzippedFiles size, zipFile, dir))
  unzippedFiles
} 
```

这让我们也将输出目录定义为一个设置：

```
target in unzipPackage <<= target / "unzippedPackage" 
```

希望这可以帮助。

# c++ - 如何处理带有 %d 格式说明符的字符？

> ID：14994861
> 
> 赞同：0
> 
> 时间：2013-02-21T04:59:43.937
> 
> 标签：c++, c

我正在使用`scanf`. 它应该继续从文件中读取，直到遇到`%`. 我如何比较`%`

```
scanf("%d",&a);

if (a=='$') terminate ; ?? 
```

它不起作用 什么是可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:05:47.433

你不能。`%d`不会转换 a `%`or `$`。换句话说，它不会将任何内容放入 a （更不用说您应该通过`&a`）。当转换失败时，它将保持打开状态`stdin`，以便您以后仍然可以阅读。

要知道转换是否成功，请检查`scanf()`的返回值。它返回成功 cnversions 的数量。

```
if (1 != scanf("%d", &a)) {
  char c = 0;
  scanf(" %c", &c);
  if (c == '%' || c == '$') {
    /* done */
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:32:06.200

尝试将其作为 a=='$' 或存储您以整数读取并检查的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:02:45.550

您的 if 条件`a`与`$`

改为：
`if (a =='$')`

*   **=**赋值运算符

*   **==**相等运算符

**编辑**
做同样的比较`%`
`if(a=='%')`

# html - 相同的 css，相同的 div，看起来不同

> ID：14994862
> 
> 赞同：0
> 
> 时间：2013-02-21T05:00:01.403
> 
> 标签：html, css

这两个看起来完全不同，即使它们应该看起来一样

```
 <div id="sidebar">
      <a href="post.php"><img class="button" src="/media/post.png"/></img></a>
      <a href="logout.php"><img class="button" src="/media/logout.png"></img></a>
 </div>

 <div id="sidebar">
      <input type="image" src="/media/submit.png" name = "submit" class="button" />
      <a href="logout.php"><img src="/media/logout.png" class="button" ></img></a>
      <a href="main.php"><img src="/media/back.png" class="button" ></img></a>
 </div> 
```

他们在所有其他`divs`/任何其他css之外，`</body>`标签就在他们的bot下方

```
#sidebar {
    position: fixed;
    display: block;
    top: 20%;
    width: 5px;
    right: 100px;
} 
```

如果这意味着任何 chrome 开发人员工具`<a>`在其中一个而不是另一个之间显示出两者之间的差异，那么这就造成了差异。如果有更愉快的方式来制作图片链接，请顺便告诉我。

编辑：我应该补充一点，这是两个不同的页面。

编辑：这是该死的文档类型:(

再也不。浪费了这么多时间。无论如何谢谢大家[=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:02:36.563

这是因为您只能拥有 1 个具有相同名称的 id。考虑将它们更改为类，或使用 css 选择器的不同名称，例如

```
#sidebar1, #sidebar2{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:03:47.643

你已经关闭了`img`标签本身，你试图再次关闭它，`</img>`另一个是你有两个`div's`是**`same id`**错误的。

尝试给它们***`unique id's`***或添加一个***`class`***，如图所示

```
<div id="sidebar1" class="sidebar">
      <a href="post.php"><img class="button" src="/media/post.png"></img></a>
      <a href="logout.php"><img class="button" src="/media/logout.png"></img></a>
</div>

<div id="sidebar2" class="sidebar">
  <input type="image" src="/media/submit.png" name = "submit" class="button" />
  <a href="logout.php"><img src="/media/logout.png" class="button" ></img></a>
  <a href="main.php"><img src="/media/back.png" class="button" ></img></a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:14:31.683

只是重复其他人所说的话......使用类而不是id。你不需要像那样关闭你的 img 标签。这是一个用于测试目的的 jsFiddle [http://jsfiddle.net/cVMdM/1](http://jsfiddle.net/cVMdM/1)

更新的 html

```
 <div class="sidebar">
      <a href="post.php"><img class="button" src="/media/post.png"/></a>
      <a href="logout.php"><img class="button" src="/media/logout.png"/></a>
 </div>

 <div class="sidebar">
      <input type="image" src="/media/submit.png" name = "submit" class="button" />
     <a href="logout.php"><img src="/media/logout.png" class="button" /></a>
     <a href="main.php"><img src="/media/back.png" class="button" /></a>
 </div> 
```

更新的 CSS

```
.sidebar{} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:18:53.550

```
/*CSS*/
.sidebar {
      position: fixed;
      display: block;
      top: 20%;
      width: 5px;
      right: 100px;
 }

<!-- HTML -->

<div class="sidebar"> <!-- replace both "id" with "class" like this --> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T05:10:20.037

如果`DOM`id 不同，它们看起来会相同。

尝试

```
<div class="sidebar">
      <a href="post.php"><img class="button" src="/media/post.png"/></img></a>
      <a href="logout.php"><img class="button" src="/media/logout.png"></img></a>
 </div>

 <div class="sidebar">
      <input type="image" src="/media/submit.png" name = "submit" class="button" />
      <a href="logout.php"><img src="/media/logout.png" class="button" ></img></a>
      <a href="main.php"><img src="/media/back.png" class="button" ></img></a>
 </div> 
```

**CSS**

```
.sidebar 
 {
      position: fixed;
      display: block;
      top: 20%;
      width: 5px;
      right: 100px;
 } 
```

# android - 如何与连接到与您连接的同一网络的其他 Mob 手机共享文件？

> ID：14994865
> 
> 赞同：0
> 
> 时间：2013-02-21T05:00:21.147
> 
> 标签：android, tcp, wifi, dhcp

我想将文件从我的 Mob Phone 共享到连接到与我连接的同一网络的其他 Mob Phone，是否可以使用 tcp 或 dhcp 或套接字轻松完成，请我也不知道所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:18:07.443

是的，您可以通过套接字通信共享文件。从具有该文件的设备实现服务器套接字。和其他设备中的客户端套接字。这是显示简单套接字通信的链接[http://www.javaworld.com/jw-12-1996/jw-12-sockets.html](http://www.javaworld.com/jw-12-1996/jw-12-sockets.html) 一旦套接字通信完成，只要在循环中从输入流中读取数据数据可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:56:49.733

您可以与与您已连接的同一网络连接的其他手机共享您的文件。现在如何在各方之间共享这些文件，请参阅这篇文章它将解决您的问题

[使用java中的套接字将文件从一个客户端发送到另一个客户端](https://stackoverflow.com/questions/13097455/sending-file-from-one-client-to-another-client-using-socket-in-java?rq=1)

# php - 如何使用 JavaScript 验证动态生成的输入框

> ID：14994866
> 
> 赞同：1
> 
> 时间：2013-02-21T05:00:22.433
> 
> 标签：php, javascript, html, ajax, validation

嗨，我有一个表单，它有一个 ajax 函数，当用户输入代码并从组合框中选择一个值时，它会附加数据。由于附加的数据具有动态行，因此我想验证这些输入框，以便用户只能输入诸如 01、02、03....10 之类的值，并且如果用户尝试输入的值大于10 它应该显示一个警告框。到目前为止，我有执行此操作的脚本，但由于 name 属性不断更改验证似乎不起作用。谁能帮帮我？

这是我的 JavaScript 代码：

```
function getXMLHTTP() { //function to return the xml http object
  var xmlhttp = false;
  try {
    xmlhttp = new XMLHttpRequest();
  } catch (e) {
    try {
      xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e) {
      try {
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e1) {
        xmlhttp = false;
      }
    }
  }
  return xmlhttp;
}

function getfunit2(makhcode, cmbmon) {
  var strURL = "subjsele2.php?makhcode=" + document.nigran.makhcode.value + "&cmbmon=" + document.nigran.cmbmon.value;
  var req = getXMLHTTP();
  if (req) {
    req.onreadystatechange = function () {
      if (req.readyState == 4) {
        // only if "OK"
        if (req.status == 200) {
          document.getElementById('suboth').innerHTML = req.responseText;
        } else {
          alert("There was a problem while using XMLHTTP:\n" + req.statusText);
        }
      }
    }
    req.open("POST", strURL, true);
    req.send(null);
  }
} 
```

这是我的PHP代码：

```
<?php
$makhcode=$_GET["makhcode"];

$cmbmon=$_GET["cmbmon"];
$monno1 = "mon$cmbmon";

$con = mysql_connect('localhost', '****', '*****');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("db", $con);

$scomp = mysql_query("SELECT * FROM subject WHERE compulsory !='1' ORDER BY ordby")or die(mysql_error());
if(mysql_num_rows($scomp)>0){
 echo "<table>";
   while($csub = mysql_fetch_assoc($scomp)){
         $msubjcode = $csub["code"];

         $csubqry = mysql_query("SELECT * FROM nigstat WHERE makhcode='".$makhcode."' AND subcode='".$msubjcode."'") or die(mysql_error());
         $fetchmon = mysql_fetch_array($csubqry) ;
         $mmonval =  $fetchmon["$monno1"];

    echo "<tr>";
    echo "<td width='200px'><font color='#FF0033'><strong>".$csub[name]."</strong></td><td><input id='s_id' name='s_$csub[code]' type='text' onkeypress=\"return chknum()\" size='1' maxlength='2' value='$mmonval'></td><input type='hidden' name='$mmonval' size='3' maxlength='3'>";
    echo "</tr>";

}

echo "</table>";
 }

mysql_close($con);
?> 
```

这是我的 HTML 代码：

```
 <table border ="0px" width="100%">

            <tr>
                <td align="right" width="58px"><label class="" for="element_1"><font size="3px"><b>Code</b></font></label></td><td><input id="makhcode" name="makhcode" onkeyup="showyear('makhsele.php?makh='+this.value); getfunit(); getfunit2();" type="text" maxlength="6" size="6" value=""/></td><td><label class="description" align="right" for="element_1">Month</label></td><td><select id="cmbmon" name="cmbmon" class="" onchange="getfunit(); getfunit2();" style="font-size:14px;">
                                <option value=""></option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>

                </td>
            </tr>
   </table>
    <p style="border-bottom: 1px dotted #ccc;"></p>
    <div id="makhhint" style=""></div>
    <p style="border-bottom: 1px dotted #ccc;"></p><br />

    <table border="0px" width="100%" cellspacing="0" cellpadding="0">

      <th><div class="form_description"><h2>Compulsory Subjects</h2></div></th>      
      <th><div class="form_description"><h2>Other Subjects</h2></div></th>
      <tr>
      <td style="vertical-align: top;">
    <div id="subcomp" align="left" align="top" style="background-color: #99FFFF;border: 1px solid black;padding:10px;">

    </div>
      </td>
      <td style="vertical-align: top;">
  <div id="suboth" align="left" align="top" style="background-color: #FFFFCC;border: 1px solid black;padding:10px;">

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:23:18.937

使用此功能验证代码

```
<input type="text" id="fname" onkeyup="validate_code(this)">

 function validate_code(that)
 {

   if(isNaN(that.value)==true || that.value>10)
    {
        that.value='';
        alert('enter a valid value');
    }
     return true
  } 
```

链接到示例[验证示例](http://jsfiddle.net/ZuhJE/2/)

# r - 将具有2个级别的因子转换为R中的二进制值0/1

> ID：14994870
> 
> 赞同：11
> 
> 时间：2013-02-21T05:00:42.080
> 
> 标签：r, binary, r-factor

我有一个变量，称为`gender`，具有二进制分类值“女性”/“男性”。我想将其类型更改为整数 0/1，以便可以在回归分析中使用它。即我希望将值“女性”和“男性”映射到 1 和 0。

```
> str(gender)
gender : Factor w/ 2 levels "female","male":  1 1 1 0 0 0 0 1 1 0 ...
> gender[1]
[1] female 
```

我想转换性别变量类型，以便在查询元素时得到 int 值 1，即

```
> gender[1]
[1] 1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T05:10:39.317

作为@Dason 回答的补充，请注意...

```
test <- c("male","female")

as.factor(test)
#[1] male   female
#Levels: female male 
```

...将`female`作为参考组 (1) 和`male`比较组 (2) 返回，

要以另一种方式旋转，您需要做...

```
factor(test,levels=c("male","female"))
#[1] male   female
#Levels: male female 
```

正如@marius 所说， using`contrasts`将向您展示它在回归模型中的工作方式：

```
contrasts(as.factor(test))
#       male
#female    0
#male      1

contrasts(factor(test,levels=c("male","female")))
#       female
#male        0
#female      1 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-21T05:04:02.427

转换为一个因子，让 R 处理剩下的事情。在使用 R 时，您永远不必考虑显式创建虚拟变量。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-21T05:18:32.633

如果你真的这样做，你绝对应该听从@Dason 的建议。我将假设您正在教授一门课并想要演示指标变量（感谢[这个问题](https://stackoverflow.com/q/5048638/1465387)）：

```
dat <- data.frame(gender=sample(c("male", "female"), 10, replace=TRUE))

model.matrix(~gender, data=dat)

   (Intercept) gendermale
1            1          1
2            1          0
3            1          1
4            1          0
5            1          1
6            1          1
7            1          1
8            1          0
9            1          0
10           1          1
attr(,"assign")
[1] 0 1
attr(,"contrasts")
attr(,"contrasts")$gender
[1] "contr.treatment" 
```

如果您不想要拦截，请`model.matrix(~gender -1 , data=dat)`改用。

# c++ - simple_search_text 的实现

> ID：14994871
> 
> 赞同：0
> 
> 时间：2013-02-21T05:00:47.830
> 
> 标签：c++, search

我正在使用`C++`. 该程序对于大多数输入都运行良好，但是当我使两者相`strings`同时，输出什么也不显示并正常返回。这可能是一个错误，但我无法找到它。我尝试遵循算法的控制流程，但仍然没有成功。我在下面给出了实现。

```
#include<iostream>
#include<cstring>
using namespace std;
int simple_text_search(const char* p, const char* q);
int main(){
    if( int i = simple_text_search("ell", "ell")) //strings are not from standard input
        cout << "Found at " << i;
    return 0;
}

int simple_text_search( const char* p, const char* q){
    int m = strlen(p);
    int n = strlen(q);
    int i = 0;
    while(i + m <= n) {
        int j = 0;
        while(q[i + j] == p[j]){
            j = j + 1;
            if(j == m)
                return i;
        }
        i = i + 1;
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:07:01.330

您的函数返回 0 作为答案。该`if`语句将其读取为错误，因此不输出答案。这是因为，语句`a=b`的值就是赋值后变量的值`a`。

[在此处查看固定版本](http://liveworkspace.org/code/48YzYK%243)- 检查返回值是否`-1`明确。

使固定 -

```
if( (i= simple_text_search("ell", "ell")) !=-1)  
                                        ^^^^^^^ 
```

# html - 像表格单元格一样并排的div

> ID：14994872
> 
> 赞同：4
> 
> 时间：2013-02-21T05:00:53.440
> 
> 标签：html, css

我想要两个并排的 div 并为一个 div 定义宽度。

然后，另一个 div 将自动适应父容器。我怎么做？

HTML：

```
<div class="parent">
    <div class="first"></div>
    <div class="last"></div>
</div> 
```

CSS：

```
.parent {
    width: 100%;
}
.parent .first {
    width: 300px;
    float: left;
    background-color: red;
}
.parent .last {
    width: auto;
    float: right;
    background-color: blue;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T05:04:31.210

不要`float`第二个div。只有第一个需要浮动。

[http://jsfiddle.net/zLef8/](http://jsfiddle.net/zLef8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:15:06.770

试试这个

```
<div class="parent">
    <div class="first">test</div>
    <div class="last">test2</div>
</div> 
```

CSS

```
.parent {
    width: 100%;
}
.parent > .first {
    width: 300px;
    float: left;
    background-color: red;
}
.parent > .last {
    width: auto;
    float: right;
    background-color: blue;
    text-align:left
} 
```

示例[jsfiddle](http://jsfiddle.net/nMCbx/1/)

# actionscript-3 - 随机像素呈白色闪烁 1/60 秒

> ID：14994876
> 
> 赞同：1
> 
> 时间：2013-02-21T05:01:20.013
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

我试图让单个像素闪烁 1/60 秒，然后在 2 秒内消失，直到 1280x720 屏幕上的每个像素都闪烁白色。经过 2 秒后，屏幕再次全黑 3 秒左右，然后循环并再次执行此操作。

我解决它的方法是使用另一个stackoverflow用户提出的这个fla，我修改了它使用电影剪辑。问题是让 921600 影片剪辑随机开始是行不通的。它变得非常沉重和缓慢。请参阅适用的附件

反正！我敢肯定有一种超级聪明的方法可以做到这一点。我是新手。感谢您的任何帮助或建议。

fla (cs5) [https://mega.co.nz/#!ERRFiJBJ!VYSaH164BcjD9QIiSdpk8WxFp68dYDC0vWzKySC8rg0](https://mega.co.nz/#!ERRFiJBJ!VYSaH164BcjD9QIiSdpk8WxFp68dYDC0vWzKySC8rg0)

瑞士法郎 [https://mega.co.nz/#!kBoxmJCR!Mx7sHX94-9ch15dKdT8knHRRKRljytZXdOBK-2P-TLQ](https://mega.co.nz/#!kBoxmJCR!Mx7sHX94-9ch15dKdT8knHRRKRljytZXdOBK-2P-TLQ)

最好的，罗林

对于我链接到上面的 fla 的原始设计，请参阅 Mahmoud Abd El-Fattah 在此链接上的解决方案。 [移动剪辑的随机开始时间](https://stackoverflow.com/questions/14945698/random-start-times-for-move-clips/14946307#14946307)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:41:02.040

好的，最简单的方法是这样的：

```
static const WIDTH:int=1280;
static const HEIGHT:int=720;
static const WH:int=WIDTH*HEIGHT;
static const FRAMES:int=120; // 2 seconds * 60 frames. Adjust as needed
static var VF:Vector.<int>; // primary randomizer
static var BD:BitmapData; // displayed object
static var curFrame:int; // current frame
static var BDRect:Rectangle;
function init():void {
    // does various inits
    if (!VF) VF=new Vector.<int>(WH,true); // fixed length to optimize memory usage and performance
    if (!BD) BD=new BitmapData(WIDTH,HEIGHT,false,0); // non-transparent bitmap
    BDRect=BD.rect;
    BD.fillRect(BDRect,0); // for transparent BD, fill with 0xff000000
    curFrame=-1;
    for (var i:int=0;i<WH;i++) VF[i]=Math.floor(Math.random()*FRAMES); // which frame will have the corresponding pixel lit white
}
function onEnterFrame(e:Event):void {
    curFrame++;
    BD.lock();
    BD.fillRect(BDRect,0);
    if ((curFrame>=0)&&(curFrame<FRAMES)) {
        // we have a blinking frame
        var cw:int=0;
        var ch:int=0;
        for (var i:int=0;i<WH;i++) {
            if (VF[i]==curFrame) BD.setPixel(cw,ch,0xffffff);
            cw++; // next column. These are to cache, not calculate
            if (cw==WIDTH) { cw=0; ch++; } // next row
        }
    } else if (curFrame>FRAMES+20) {
        // allow the SWF a brief black period. If not needed, check for >=FRAMES
        init(); 
    }
    BD.unlock();
}
function Main() {
    init();
    addChild(new Bitmap(BD));
    addEventListener(Event.ENTER_FRAME,onEnterFrame);
} 
```

# c# - 在一对多关系中获取父级的最大记录

> ID：14994877
> 
> 赞同：1
> 
> 时间：2013-02-21T05:01:22.107
> 
> 标签：c#, nhibernate

假设两个类有一个 ParentClass 和一个 ChildClass。父母有一个袋子来生孩子。
我已经尝试过 .SetResultTransformer(new DistinctRootEntityResultTransformer()) 和 distinct() 过滤掉重复并且在获取 .SetMaxResults() 时我没有在 ParentClass 级别得到它。

有什么东西可以用来让 .SetMaxResults() 在 ParentClass 级别而不是 ChildClass 上工作。我需要在父级别强制执行 maxresults。

示例 ParentClass 有 6 个孩子，setmaxresults(6) 和 distinct() 将导致我在查询中查找更多 5 ParentClass 记录时得到一个 ParentClass。我的标准包括 3 个与父记录匹配的参数和 2 个与子记录匹配的参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:18:54.637

一种解决方案可能是使用子查询。文档[14.11。子查询](http://nhforge.org/doc/nh/en/index.html#queryhql-subqueries)。

它将像内部选择一样工作。子查询将包含 WHERE 子句，其中包含要匹配的 2 个参数`Child`和要返回的投影`Parent.ID`。然后，主查询将包含 3 个要过滤的参数`Parent`以及对子查询的调用以匹配`Parent ID`.

子查询：

```
var sub = DetachedCriteria
 .For<Child>()
 .Add(Restrictions.In("FirsChildProperty", new int[] {1, 2 })) // WHERE
 .Add(Restrictions.... // Second
 .SetProjection(Projections.Property("Parent.ID")); // Parent ID as a SELECT clause 
```

主查询：

```
var criteria = session.CreateCriteria<Parent>()
 .Add(Restrictions.In("FirsParentProperty", new int[] {1, 2 })) // WHERE
 .Add(Restrictions.... // the second
 .Add(Restrictions.... // the third
 // no filter to match children
 .Add(Subqueries.PropertyIn("ID", sub)); // Parent.ID in (select
 // now paging just over Parent table....
 .SetFirstResult(100) // skip some rows
 .SetMaxResults(20)   // take 20

var result = criteria.List<Parent>(); 
```

# android - 如何在Android中删除标签小部件的间距？

> ID：14994878
> 
> 赞同：7
> 
> 时间：2013-02-21T05:01:23.867
> 
> 标签：android, android-layout, android-widget

![在此处输入图像描述](../Images/bae72931b1c128efe3df43d7ec6876fe.png)

我想删除标签之间的间距，如何实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-17T09:15:00.143

我解决了这个问题，

```
tabHost.getTabWidget().setDividerDrawable(null); 
```

如果您的构建目标是 Honeycomb 以上，您也可以使用以下代码。

```
if (Integer.parseInt(Build.VERSION.SDK) >= Build.VERSION_CODES.HONEYCOMB) {
    tabHost.getTabWidget().setShowDividers(LinearLayout.SHOW_DIVIDER_NONE);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-14T16:56:01.607

在某些时候我有同样的问题，我的问题是通过将填充设置为“0”来解决的。我认为，默认情况下它会采用一些填充。因此，如果您不想在 TabWidget 之间留出空间，请尝试使用 Blow 代码。如果我的解决方案可以解决您的问题，请告诉我。

```
for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
        tabHost.getTabWidget().getChildAt(i).setPadding(0, 0, 0, 0);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-10T09:06:46.160

在你的主要 res/values/theme.xml

```
<style name="Theme.Main" parent="...">
    ...
    <item name="android:actionBarTabBarStyle">@style/TabBar.Style</item>
    ...
</style> 
```

在 res/values/style.xml

```
<style name="TabBar.Style" parent="...">
    ...
    <item name="android:showDividers">none</item>
    ...
</style> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-17T09:25:03.333

试试这个。

```
 tabHost.getTabWidget().setDividerDrawable(R.drawable.empty); 
```

并定义drawable empty.xml。

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="line" >
    <size
        android:width="0px"
        android:color="@android:color/black"
        android:dashWidth="0px"
        android:dashGap="0px" />
</shape> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-16T05:33:57.950

我假设您正在为选项卡使用自定义视图。要删除两个选项卡之间的空间，您不应设置视图的左侧边距和右侧边距，或者您可能设置了设置顶部、左侧、底部和右侧边距的边距属性。

如果您的问题是选项卡内的间距，则不要将填充应用于您的视图。如果您的问题尚未解决，请发布您的代码。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-18T06:03:35.577

尝试使用以下内容：

```
tabHost.getTabWidget().setStripEnabled(false); 
```

有关更多解释，您可以参考[此](http://developer.android.com/reference/android/widget/TabWidget.html)链接

或在您的 XML 中执行 android:tabStripEnabled="false"

# c# - 避免额外的循环，并且找不到源类型 int 的查询模式的实现 未找到选择

> ID：14994882
> 
> 赞同：4
> 
> 时间：2013-02-21T05:01:53.477
> 
> 标签：c#, linq, foreach

我如何避免额外循环并在 LINQ 任务本身中构造顺序。

```
GetOrderListDataContext orderListDaCtx = new GetOrderListDataContext(address);
// This line showing compiler error could not find implementation of query pattern for source type int Select not found
var orderList = from order in orderListDaCtx.Base_Purchase_GetOrderListByUser_WS(request.UserGuid, request.CountryCode, request.FromDate, request.ToDate)
                select order;
// Here how i can avoid this loop and construct order object in the LINQ itself above                   
List<Order> orders = new List<Order>();
foreach (var order in orderList)
{
    orders.Add(new Order
     {
         OrderKey = order.OrderKey,
         UserEmail = order.UserEmail,
         CreatedDate = order.CreatedDate
     });
}
return orders; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:06:03.660

你是这个意思吗？

```
GetOrderListDataContext orderListDaCtx = new GetOrderListDataContext(address);
var orderList = from order in orderListDaCtx.Base_Purchase_GetOrderListByUser_WS(request.UserGuid, request.CountryCode, request.FromDate, request.ToDate)
select new Order{
         OrderKey = order.OrderKey,
         UserEmail = order.UserEmail,
         CreatedDate = order.CreatedDate
}

return orderList.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:29:48.017

您可以链接：

```
var orders = orderListDaCtx.Base_Purchase_GetOrderListByUser_WS(request.UserGuid, request.CountryCode, request.FromDate, request.ToDate)
                           .Select(order => new Order
                             {
                               OrderKey = order.OrderKey,
                               UserEmail = order.UserEmail,
                               CreatedDate = order.CreatedDate
                             })
                           .ToList();
return orders; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:31:57.787

> 显示编译器错误的这一行找不到源类型 int 的查询模式的实现 未找到选择

您的主要问题来自您的存储过程。参考：[Linq 存储过程问题 - 返回一个 int](https://stackoverflow.com/questions/13682812/linq-stored-procedure-issue-returning-an-int)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T07:45:29.280

请参阅[LINQ 错误](http://joshrharrison.com/archive/2008/12/16/linq-error-could-not-find-an-implementation-of-the-query.aspx)：

> 找不到源类型“Your.Type”的查询模式的实现。未找到“选择”。考虑明确指定范围变量的类型

很可能`orderListDaCtx.Base_Purchase_GetOrderListByUser_WS(request.UserGuid, request.CountryCode, request.FromDate, request.ToDate)`返回类型“IEnumerable”，但`LINQ`需要`IEnumerable<T>`. 您必须执行显式转换：

```
var orderList = from Order order in orderListDaCtx.Base_Purchase_GetOrderListByUser_WS(request.UserGuid, request.CountryCode, request.FromDate, request.ToDate)
                select order; 
```

我假设，这将`Base_Purchase_GetOrderListByUser_WS`返回`Order`.

# ajax - Ajax 搜索和 CGridView

> ID：14994890
> 
> 赞同：0
> 
> 时间：2013-02-21T05:02:38.607
> 
> 标签：ajax, yii

我正在尝试在我的 CGridView 中实现 ajax 搜索，但我没有太多运气让它工作。

我的网格：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'talent-grid',
    'dataProvider'=>$model->searchTalent(),
    'hideHeader'=>true,
    'template' => '{pager}{items}{pager}',
    'pager'=>array('cssFile'=>'/css/pager.css','header' => '',),
    'cssFile'=>'/css/client-grid.css',
    'columns'=>array(
        array(
            'name'=>'talent_id',
            'type'=>'raw',
            'value'=>'$data->getTalentGridRow($data)',
        ),
    ),
)); ?> 
```

搜索表格：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'action'=>Yii::app()->createUrl($this->route),
    'method'=>'get',
)); ?>

    <div class="row">
        <?php echo $form->label($model,'full_name',array('class'=>'inline')); ?>
        <?php echo $form->textField($model,'full_name',array('size'=>60,'maxlength'=>64)); ?>
    </div>
    <div class="row">
        <?php echo $form->label($model,'gender_id',array('class'=>'inline')); ?>
        <?php echo $form->checkBoxList($model, 'gender_id',CHtml::listData(Gender::model()->findAll(), 'gender_id', 'name'),array('separator'=>'&nbsp;&nbsp;&nbsp;')); ?>
        <?php echo $form->error($model,'gender_id'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Submit'); ?>
    </div>

<?php $this->endWidget(); ?> 
```

搜索模型：

```
public function searchTalent() {
    $criteria=new CDbCriteria;
    $criteria->compare('full_name',$this->full_name,true);

    if ($this->gender_id != "") {
        $criteria->compare('gender_id',$this->gender_id);
    }

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
        'pagination'=>array(
            'pageSize'=>30,
        ),
    ));
} 
```

的JavaScript：

```
Yii::app()->clientScript->registerScript('searchTalent', "
$('#search-form form').submit(function(){
    $.fn.yiiGridView.update('talent-list', {
        data: $(this).serialize()
    });
    return false;
});
"); 
```

控制器：

```
public function actionClients() {
    $model = new Talent('search');
    $model->unsetAttributes(); // clear any default values

    if (isset($_GET['Talent'])) {
        $model->attributes = $_GET['Talent'];
    }

    $this->render('clients', array(
        'model' => $model,
        'pages' => 10
    ));
} 
```

js 提交触发，但网格没有更新。不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:20:33.423

您已经在 js 中指定了 gridview 的 id，`talent-list`但原始 id 是`talent-grid`在小部件初始化调用中指定的。所以将行更改为

```
Yii::app()->clientScript->registerScript('searchTalent', "
$('#search-form form').submit(function(){
    $.fn.yiiGridView.update('talent-grid', {
        data: $(this).serialize()
    });
    return false;
});
"); 
```

# android - 滚动后gridview单元格视图位置发生变化...颜色设置为单击的单元格以外的其他单元格

> ID：14994893
> 
> 赞同：1
> 
> 时间：2013-02-21T05:02:49.357
> 
> 标签：android, gridview, android-gridview

我有一个 5 列的网格视图，我想为整行着色，这意味着单击时有 5 个单元格。单击可以正常工作，但是当我在单击颜色时滚动它们时，会在两行或三行之后设置单元格，因为它会更改视图位置。

这是我的 Gridview：

```
 <GridView
    android:id="@+id/gridView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/CornflowerBlue"
    android:gravity="center"
    android:horizontalSpacing="5dp"
    android:numColumns="5"
    android:verticalSpacing="5dp">
</GridView> 
```

具有自定义布局：

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@color/LightBlue"
android:gravity="center_vertical"
android:minHeight="?android:attr/listPreferredItemHeight"
android:paddingLeft="6dip"
android:textAppearance="?android:attr/textAppearanceLarge"
android:textSize="22sp" /> 
```

和我的gridview适配器代码：

```
 public class Fragment2 extends Fragment {
     ............................

gridView2 = (GridView) getView().findViewById(R.id.gridView2);
        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(
                getActivity(), R.layout.custom_layout, stg1); //stg1-array
        gridView2.setAdapter(adapter2);         
        gridView2.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String message;

                int p = (int) Math.ceil(position / 5) * 5; //to color 5 cells from starting on click

                try{
            gridView2.getChildAt(p).setBackgroundColor(Color.GREEN);
            gridView2.getChildAt(p+1).setBackgroundColor(Color.GREEN);
            gridView2.getChildAt(p+2).setBackgroundColor(Color.GREEN);
            gridView2.getChildAt(p+3).setBackgroundColor(Color.GREEN);
            gridView2.getChildAt(p+4).setBackgroundColor(Color.GREEN);

            }
        }); 
```

最初它工作正常，但在滚动颜色设置为除单击之外的不同单元格后？我应该怎么办？？我不想使用基本适配器....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:32:05.673

试试这个，让我知道它是如何工作的。

```
public int p=-1;

 /*
...OTHER STUFF...

*/

gridView2 = (GridView) getView().findViewById(R.id.gridView2);

ListAdapter<String> adapter2 = new ListAdapter<String>(
            getActivity(), R.layout.custom_layout, stg1); //stg1-array
    gridView2.setAdapter(adapter2);         
    gridView2.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            String message;

            int p = (int) Math.ceil(position / 5) * 5; //to color 5 cells from starting on click
        }
    });

/*
...OTHER STUFF...

*/

public class ListAdapter extends ArrayAdapter<String> {
private List<String> items;

public ListAdapter(Context context, int resource, List<Item> items) {
super(context, resource, items);
this.items = items;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

View v = convertView;

if (v == null) {
    LayoutInflater vi;
    vi = LayoutInflater.from(getContext());
    v = vi.inflate(R.layout.custom_layout, null);
    if(position==p) v.setBackgroundColor(Color.GREEN);
    if(position==p+1) v.setBackgroundColor(Color.GREEN);
    if(position==p+2) v.setBackgroundColor(Color.GREEN);
    if(position==p+3) v.setBackgroundColor(Color.GREEN);
    if(position==p+4) v.setBackgroundColor(Color.GREEN);
}      

return v;

}
} 
```

# java - 在 30 分钟内空闲时终止用户会话 - 基于 java

> ID：14994894
> 
> 赞同：-2
> 
> 时间：2013-02-21T05:02:55.537
> 
> 标签：java, eclipse, session, coding-style

再会！

我正在开发一个系统。一个基于java的Web应用程序。根据系统要求，当发现用户在 30 分钟内空闲时，必须终止会话。

最简单的方法是什么？

我已经阅读了使用 HttpSession 的 setMaxInactiveInterval() 但不知道如何实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:05:15.473

有两种方法：

1) web.xml

```
<web-app ...>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
</web-app> 
```

您可以在此处指定超时时间（以分钟为单位）。

2）在Servlet中

```
HttpSession session = request.getSession();
session.setMaxInactiveInterval(30*60); 
```

在这里，您以秒为单位指定会话超时。

**注意**`web.xml`：和之间的重要区别`setMaxInactiveInterval`。在`web.xml`您以分钟为单位`setMaxInactiveInterval`指定它时，您以秒为单位指定它，因此如果您希望以分钟为单位，您需要将其转换为分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:06:52.073

您可以在 web.xml 中设置：
`<session-config>`
`<session-timeout>30</session-timeout>`
`</session-config>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:08:57.057

如果您使用 tomcat 作为 web 容器来执行 servlet 或 jsp 应用程序，请在以下部分找到`[Tomcat_home]/conf/web.xml`：

```
<session-config>
  <session-timeout>30</session-timeout>
</session-config> 
```

超时值以分钟为单位指定。修改文件后重启Tomcat，使修改生效。

`OR`

您可以在 tomcat manager page( `http://localhost:8080/manager/html`) 下将会话到期更改为特定项目，如下图所示。默认超时为 30 分钟。您可以提供以分钟为单位的值。

![在此处输入图像描述](../Images/a9c837f95eae48105c70b860ce44d8b8.png)

# wpf - 如何从 MVVM 方式绑定 WPF TabItem 的属性？

> ID：14994912
> 
> 赞同：0
> 
> 时间：2013-02-21T05:04:25.297
> 
> 标签：wpf, mvvm, tabs, infragistics

我想以 MVVM 方式绑定 TabItem 属性的“标题”。

我将“XamTabControl”的“ItemsSource”属性绑定到视图模型列表（`List<MyTabItem>`MyTabItem 也是一个视图模型）。

这是 XAML 代码

```
<igWindows:XamTabControl 
        Height="198" 
        HorizontalAlignment="Left" 
        Margin="0,54,0,0" 
        ItemsSource="{Binding Tabs}"
        Name="xamTabControl1"
        VerticalAlignment="Top" 
        Width="651">

       <!-- this is the body of the TabItem template-->
       <igWindows:XamTabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock
                      Text="{Binding Header}" />
           </DataTemplate>
       </igWindows:XamTabControl.ItemTemplate>

      <igWindows:XamTabControl.ContentTemplate>
           <!-- this is the body of the TabItem template-->
           <DataTemplate>
                 <TextBlock
                        Text="{Binding Content}" />
           </DataTemplate>
      </igWindows:XamTabControl.ContentTemplate>
</igWindows:XamTabControl> 
```

这是视图模型。

```
private ObservableCollection<TabItem> tabs;
public ObservableCollection<TabItem> Tabs
{
     get
     {
          return tabs;
     }
     set
     {
          tabs = value;
          NotifyPropertyChanged("Tabs");
     }
} 
```

为了显示选项卡标题，我在 XamlTabControl 的 ItemTemplate 中插入了一个文本块。我想通过使用 TabItemEx 属性的“标题”属性而不是使用文本块来显示标题。我也想对“CloseButtonVisibility”属性执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:07:12.513

我得到了答案`stackoverflow`。请看这个[帖子](https://stackoverflow.com/a/686102/873979)

# ios - 尝试将 AVPlayerItems 添加到 AVQueuePlayer 时出现“NSInvalidArgumentException [__NSArrayM insertObject:atIndex:]: object cannot be nil”错误

> ID：14994920
> 
> 赞同：0
> 
> 时间：2013-02-21T05:04:39.230
> 
> 标签：ios, objective-c

我有一段代码尝试迭代地将项目添加到 AVQueuePlayer 中，如下所示：

```
for (int i = tempNowPlayingIndex - 1; i < [_itemsForPlayer count]; i++) {
        [self insertItem:[_itemsForPlayer objectAtIndex:i] afterItem:nil];
    } 
```

`_itemsForPlayer`是一个`NSMutableArray`包含 AVPlayerItems。

每当我在执行时到达这条线时，我都会得到一个

```
'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

错误。我知道负责的线路是

[self insertItem:[_itemsForPlayer objectAtIndex:i] afterItem:nil];

因为注释掉该行会消除错误。我曾认为问题在于`[_itemsForPlayer objectAtIndex:i]`没有返回 AVPlayerItem，但是添加一个打印语句来打印`[_itemsForPlayer objectAtIndex:i]`给了我：

```
<AVPlayerItem: 0x2002be60, asset = <AVURLAsset: 0x2003c0e0, URL = ipod-library://item/item.mp3?id=8966039988459606203>> 
```

所以代码应该能够将它添加到 AVQueuePlayer 就好了。有没有人有任何想法？

编辑：非常感谢@borrrden，他在评论中回答了这个问题——我已经覆盖了类中其他地方的 insertItem:afterItem，错误来自被覆盖方法中的问题。谈谈你的愚蠢错误 - 再次感谢 Borrrden！

# prolog - 以下序言代码有什么作用？

> ID：14994922
> 
> 赞同：2
> 
> 时间：2013-02-21T05:04:44.600
> 
> 标签：prolog

我无法理解下面的代码。
如果我有以下输入，有人可以逐步解释发生了什么：

```
append([1,2,3], Lst). 
```

实际上，我不知道如何将 1 和 2 添加到列表 Lst 中。

```
append([_], []).    
append([H|T], [H|N]) :- append(T,N). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T05:55:35.737

听起来你是 Prolog 的新手。如果是这样，欢迎！让我们来分析一下。

这个不幸命名的函数有两个子句。Prolog 会查看这些子句以查看适用于哪一个。当它找到一个匹配的，它会尝试执行它。如果执行它的某个地方出现故障，它将备份并尝试下一个选项。这些*选择点*的具体位置取决于程序；在这个程序中，唯一的一个将在子句级别，决定使用哪个规则。

查看第一条规则的一种方式是，它说“具有一个元素的列表，无论该元素是什么，都与空列表相关。” 看看`append([_], [])`，如果我们有`X = [foo]`and `Y = []`，它会成立，因为`[foo]`是一个单项列表并且`[]`是空列表。这条规则是很好的 Prolog 风格，因为不管实例化它都可以工作：我们可以提供左边或右边，或者都不提供，没关系。

第二条也很简单。它说，如果左参数和右参数都以相同的项目开头，并且其余列表也通过相同的谓词相关，则它们是相关的。换句话说，如果我有两个列表`X`并且`Y`这`append(X, Y)`是正确的，那么`append([H|X], [H|Y])`也是正确的。H 是什么并不重要，X 和 Y 是什么也不重要，除非`append/2`.

从逻辑上思考，如果我知道任何单项列表都与空列表相关，并且任何列表都与以相同项目开头的列表相关，否则相同，那么唯一可以如此相关的列表是列表中的每个项目都是相同的，除了左边的列表最后还有一个项目，右边不存在。所以 [1,2,3,4] 与 [1,2,3] 相关，但 [1,2,3,foo] 和 [1,2,3] 也是如此。

在程序上，让我们看看使用这组参数处理这个谓词时会发生什么：

```
append([1,2,3], X). 
```

第一条规则在 [1,2,3] 上不匹配。所以我们必须看第二条规则：

```
append([1|[2,3]], [1|X]) :- append([2,3], X). 
```

我们可以重复：

```
append([2|[3]], [2|Y]) :- append([3], Y). 
```

现在第一条规则*匹配*：

```
append([3], []). 
```

所以把它们放在一起：

```
append([1,2,3], [1|X]) implies
  append([2,3], X=[2|Y]) implies
    append([3], Y=[])
  so Y = []
so X = [2]
so the right side is [1,2]. 
```

Prolog 跟踪将向您显示基本相同的信息：

```
?- trace, append([1,2,3], X).
   Call: (7) append([1, 2, 3], _G1633) ? creep
   Call: (8) append([2, 3], _G1752) ? creep
   Call: (9) append([3], _G1755) ? creep
   Exit: (9) append([3], []) ? creep
   Exit: (8) append([2, 3], [2]) ? creep
   Exit: (7) append([1, 2, 3], [1, 2]) ? creep 
```

使这个 Prolog 代码令人困惑的是，它看起来不像您已经告诉 Prolog 如何做任何事情。这是真的，你没有，但是通过在逻辑上指定什么是真的，Prolog 能够自己弄清楚。这是非常聪明的代码。如果这是 Haskell，我们将讨论内置函数`init`，它返回除最后一项之外的所有列表。

希望这可以帮助！

# dsl - 生成工件后如何在 Xtext 编辑器中显示内容辅助的 ecore Eclass 名称？

> ID：14994926
> 
> 赞同：2
> 
> 时间：2013-02-21T05:05:20.407
> 
> 标签：dsl, xtext, emf

**目的：** 为 Fruits.ecore 提供配置模式规则的编辑器

DSL 规则将类似于 **“A Grade”+ Apple.name**

**问题：** 使用 Eclipse 应用程序的新实例，我创建了一个示例项目并在此编辑器中创建了一个带有 **text.fruit**的文件， 我需要创建新的 Fruit 规则

**EClass**名称和**EStructural**功能作为我的内容辅助

当我执行**Ctrl + Space**时 ，我希望将列表作为内容辅助

1.  苹果
2.  橙子

**采取的步骤：**

1.  创建了一个扩展名为 .fruit 的 xtext 插件作为我的fruit.xtext 作为 dsl。

2.  在我的“fruit.xtext”文件中使用 import 语句

    ```
     import “platform:/resource/com.emf.sample/model/Fruits.ecore” as ecore 
    ```

3.  在ecore作品的fruit.xtext内容辅助中

4.  现在生成 Xtext 工件并运行应用程序

上述场景的模型：

![在此处输入图像描述](../Images/9ca4293e4d40fc3b93b3ae42fdc63500.png)

如何在 xtext 编辑器的工作流程或语法中添加外部 ecore 作为内容辅助的一部分？任何示例示例或解决方法都会有所帮助。

谢谢

# android - 谷歌地图上的 OnTouch 删除了地图视图中的拖动和滚动，并且缩放控件不会出现在触摸屏上

> ID：14994928
> 
> 赞同：0
> 
> 时间：2013-02-21T05:05:42.350
> 
> 标签：android, google-maps, android-mapview

好的，因为问题说我设置了一个地图视图和一个 OnTouchListener，并且在 Ontouch 函数中我在地图上设置了一个叠加图像。但是在这个过程中，现在地图视图中的缩放控件和拖动功能以某种方式被删除了。请帮帮我。我已经将zoomcontrolson 设置为true（无效）。请帮忙。

```
public class marker extends ItemizedOverlay {

    Context mContext;

    OverlayItem overlayitem;

    Drawable marker;

    private int xDragImageOffset=0;

    private int yDragImageOffset=0;

    private int xDragTouchOffset=0;

    private int yDragTouchOffset=0;

    OverlayItem inDrag;

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public marker(Drawable defaultMarker, Context context) {

          super(boundCenterBottom(defaultMarker));

          mContext = context;

          marker=defaultMarker;
        } 

    public void addOverlay(OverlayItem overlay) {

        mOverlays.clear();

        mOverlays.add(overlay);

        populate();
    }

    @Override

    protected OverlayItem createItem(int i) {

       return mOverlays.get(i);
    }

        @Override

    public int size() {

    return mOverlays.size();
    }

        @Override

    public boolean onTap(GeoPoint geoPoint, MapView mapView){

    boolean tappedAnOverlay = super.onTap(geoPoint, mapView);

        if (tappedAnOverlay) {

            places.gp=geoPoint;  // do your thing if hit an overlay

        }

        else {
            // no overlay found in that location
        }

        MapController mc=mapView.getController();

        mc.animateTo(geoPoint);

            return true;
    }

}
this is my marker overlays file 
```

和

```
 public class places extends MapActivity implements android.view.View.OnClickListener/*,OnTouchListener*/  {

        MapView mapView;

        MapController mc;

        Button srchbtn;

        EditText searchstring;

        marker itemizedoverlay;

    public static List<Overlay> mapOverlays;

        OverlayItem overlayitem;

        public static GeoPoint gp;

        Button back;

        String s1;

        String s2="yourprofile";

        String s3="partnerprofile";

        public int zoom=5;

        @Override

        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);

            setContentView(R.layout.place);

            mapView = (MapView) findViewById(R.id.mapview);

            mapView.setBuiltInZoomControls(true);

            srchbtn=(Button)findViewById(R.id.searchbtn);

            searchstring=(EditText)findViewById(R.id.edplnm);

            srchbtn.setOnClickListener(this);

            mapView.setClickable(true);

            mapView.setBuiltInZoomControls(true);

            mapOverlays = mapView.getOverlays();

            Drawable drawable = this.getResources().getDrawable(R.drawable.marker);

            itemizedoverlay = new marker(drawable, this);

            back=(Button)findViewById(R.id.btnbk);

            back.setOnClickListener(this);

            s1=getIntent().getStringExtra("ClassName");

            mc=mapView.getController();

            mc.setZoom(zoom);

            gp=new GeoPoint((int)(21.7679 * 1E6), (int)(78.8718 * 1E6));

            mc.animateTo(gp);

                   // mapView.setOnTouchListener(this);

        }

     @Override

        protected boolean isRouteDisplayed() {

            return false;
        }

        @Override

        public void onClick(View arg0) {

            // TODO Auto-generated method stub

            switch(arg0.getId())

            {

            case R.id.searchbtn:String s = searchstring.getText().toString();

                                String[] vals =s.split(":");

                                float lat;

                                float logi;

                                lat=Float.parseFloat(vals[0]);

                                logi=Float.parseFloat(vals[1]);

                                gp = new GeoPoint((int)(lat * 1E6), (int)(logi * 1E6));

                                MapController mc=mapView.getController();

                                mc.setZoom(80);

                                mc.animateTo(gp);

                                overlayitem = new OverlayItem(gp, "", "");

                                itemizedoverlay.addOverlay(overlayitem);

                                mapOverlays.add(itemizedoverlay);

                                break;

            case R.id.btnbk: int Lat;

                             int Logi;

                             Lat=gp.getLatitudeE6();

                             Logi=gp.getLongitudeE6();

                             boolean val=s1.equals(s2);

                             boolean val2=s1.equals(s3);

                             Intent I1=new Intent(places.this,yourprofile.class);

                             Intent I2=new Intent(places.this,partnerprofile.class);

                             if(val)

                             {

                             I1.putExtra("LAT",Lat);

                             I1.putExtra("LONG",Logi);

                             setResult(RESULT_OK,I1); 

                             finish();

                             }else

                                 if(val2)

                                 {

                                     I2.putExtra("LAT",Lat);

                                     I2.putExtra("LONG",Logi);

                                     setResult(RESULT_OK,I2); 

                                     finish();
                                 }

                             break;

            }

    }

    /*public boolean onTouch(View v, MotionEvent e) {

            if(e.getAction()==MotionEvent.ACTION_UP){

             Projection p =((MapView)v).getProjection();

             gp = p.fromPixels((int) e.getX(), (int) e.getY());

             overlayitem = new OverlayItem(gp, "", "");

             itemizedoverlay.addOverlay(overlayitem);

             mapOverlays.add(itemizedoverlay);

             mc.setZoom(zoom);

             mc.animateTo(gp);

             searchstring.setText(((float)gp.getLatitudeE6())/1000000 + ":" +

    ((float)gp.getLongitudeE6())/1000000);

            }

            return true;
        }*/

    } 
```

这是我的地方类文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:11:51.883

这是您可能想要使用的[示例工作演示。](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/NooYawkTouch)

它将帮助您通过 Mapview 的缩放和触摸功能拖放图像。

希望它会有所帮助。

# asp.net-mvc-3 - 项目从旧 PC 和 VS2010 迁移到 VS2012 “等待操作超时。”

> ID：14994929
> 
> 赞同：0
> 
> 时间：2013-02-21T05:05:44.097
> 
> 标签：asp.net-mvc-3, entity-framework, windows-7, visual-studio-2012

我刚买了一台装有 VS 2012 的新 Windows 7 计算机。我的旧机器是装有 VS 2010 的 Windows XP。我复制了我的项目并让 VS2012 升级了项目，并在运行 ASP.NET MVC 3 应用程序时出现以下错误：

> [Win32Exception (0x80004005): 等待操作超时]
> 
> [SqlException (0x80131904): 与服务器建立连接成功，但在登录前握手过程中发生错误。（提供者：SSL 提供者，错误：0 - 等待操作超时。）]
> 
> [ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。]
> 
> [ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。]

那是消息的顺序。我通过 EntityFramework 连接（代码优先）。连接字符串在 VS2010 中运行良好：

```
Data Source=xxx.xxx.xxx.xxx; User ID=xxxxxx; Password=xxxxxxxxx; Initial Catalog=xxxxxxxxx; MultipleActiveResultSets=true 
```

我一直在寻找几个小时没有真正的解决方案。我唯一没有尝试过的是删除 VS 2012 和 .NET 4.5。那将是一个问题，因为那时我无法编码。我试图删除 .NET 4.5，但是 VS2012 没有启动。我已经安装了 .NET 4.0。

我已安装（仅根据我在搜索中看到的列出软件）：

*   对比 2012
*   Windows 7的
*   SSMS 2010（最初是在 VS 2012 之后安装的）

我也对VS2012进行了修复。我没有卸载并重新安装它。

有什么想法吗？我要疯了。现在我有一台四核电脑，它可以非常快地远程桌面到我的旧机器。

注意：我的防火墙已关闭。我有 Symantec Endpoint Protection，它正在连接到实时 SQL 服务器，所以我知道它正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:43:12.440

令人惊讶的是，这奏效了：

```
netsh Winsock reset 
```

请参阅[安装 VS 11 Pro Beta 后无法连接到数据库](http://social.msdn.microsoft.com/Forums/en-NZ/vssetup/thread/2d11b6f9-3ada-4682-b643-c721a97af4ba)

# php - 如何知道是否已经从数据库中检索到数据？

> ID：14994932
> 
> 赞同：0
> 
> 时间：2013-02-21T05:05:51.623
> 
> 标签：php, mysql, database

我正在使用 php 向 mysql 传递一个查询，我想知道如何检查 mysql 是否返回了一些东西？例如如果我想知道数据是否提交，我使用mysql_affected_rows。我想知道我是否从 mysql 获得了一些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:46:48.543

您可以尝试使用[mysql_info()](http://dev.mysql.com/doc/refman/5.0/en/mysql-info.html)函数，它检索一个字符串，提供有关最近执行的语句的信息。

[请注意，这仅适用于文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-info.html)中列出的功能。

[UPDATE 语句](http://dev.mysql.com/doc/refman/5.0/en/update.html)返回实际更改的行数。mysql_info() C API 函数返回**匹配和更新**的行数以及UPDATE 期间发生的**警告数。**

更新后的示例输出：

```
Rows matched: 40 Changed: 40 Warnings: 0 
```

插入后的示例输出：

```
Records: 3 Duplicates: 0 Warnings: 0 
```

# java - 如何在java中从IP地址获取子网

> ID：14994934
> 
> 赞同：2
> 
> 时间：2013-02-21T05:06:14.567
> 
> 标签：java, networking, ip, ipv4, subnet

我得到了ip（ipv4，例如192.168.161.125），我怎样才能得到我的电脑所在的子网？首选java方法和String格式的结果。

子网是使用IP地址和子网掩码计算的网络

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:47:14.980

这就是你在 Java 中的做法，

```
import java.util.ArrayList;
import java.util.List;

public class IPv4 {
    int baseIPnumeric;
    int netmaskNumeric;
    public IPv4(String symbolicIP, String netmask) throws NumberFormatException {

        /* IP */
        String[] st = symbolicIP.split("\\.");

        if (st.length != 4)
            throw new NumberFormatException("Invalid IP address: " + symbolicIP);

        int i = 24;
        baseIPnumeric = 0;

        for (int n = 0; n < st.length; n++) {

            int value = Integer.parseInt(st[n]);

            if (value != (value & 0xff)) {

                throw new NumberFormatException("Invalid IP address: "+ symbolicIP);
            }

            baseIPnumeric += value << i;
            i -= 8;
        }

        /* Netmask */
        st = netmask.split("\\.");

        if (st.length != 4)
            throw new NumberFormatException("Invalid netmask address: "

                    + netmask);

        i = 24;
        netmaskNumeric = 0;

        if (Integer.parseInt(st[0]) < 255) {

            throw new NumberFormatException(
                    "The first byte of netmask can not be less than 255");
        }
        for (int n = 0; n < st.length; n++) {

            int value = Integer.parseInt(st[n]);

            if (value != (value & 0xff)) {

                throw new NumberFormatException("Invalid netmask address: "  + netmask);
            }

            netmaskNumeric += value << i;
            i -= 8;

        }
/*
* see if there are zeroes inside netmask, like: 1111111101111 This is
* illegal, throw exception if encountered. Netmask should always have
* only ones, then only zeroes, like: 11111111110000
*/
        boolean encounteredOne = false;
        int ourMaskBitPattern = 1;

        for (i = 0; i < 32; i++) {

            if ((netmaskNumeric & ourMaskBitPattern) != 0) {

                encounteredOne = true; // the bit is 1
            } else { // the bit is 0
                if (encounteredOne == true)

                    throw new NumberFormatException("Invalid netmask: " + netmask + " (bit " + (i + 1) + ")");
            }

            ourMaskBitPattern = ourMaskBitPattern << 1;
        }
    }

/**
* Specify IP in CIDR format like: new IPv4("10.1.0.25/16");
*
*@param IPinCIDRFormat
*/
    public IPv4(String IPinCIDRFormat) throws NumberFormatException {

        String[] st = IPinCIDRFormat.split("\\/");
        if (st.length != 2)

            throw new NumberFormatException("Invalid CIDR format '"
                    + IPinCIDRFormat + "', should be: xx.xx.xx.xx/xx");

        String symbolicIP = st[0];
        String symbolicCIDR = st[1];

        Integer numericCIDR = new Integer(symbolicCIDR);
        if (numericCIDR > 32)

            throw new NumberFormatException("CIDR can not be greater than 32");

        /* IP */
        st = symbolicIP.split("\\.");

        if (st.length != 4)
            throw new NumberFormatException("Invalid IP address: " + symbolicIP);

        int i = 24;
        baseIPnumeric = 0;

        for (int n = 0; n < st.length; n++) {

            int value = Integer.parseInt(st[n]);

            if (value != (value & 0xff)) {

                throw new NumberFormatException("Invalid IP address: " + symbolicIP);
            }

            baseIPnumeric += value << i;
            i -= 8;

        }

        /* netmask from CIDR */
        if (numericCIDR < 8)
            throw new NumberFormatException("Netmask CIDR can not be less than 8");
        netmaskNumeric = 0xffffffff;
        netmaskNumeric = netmaskNumeric << (32 - numericCIDR);

    }

    /**
* Get the IP in symbolic form, i.e. xxx.xxx.xxx.xxx
*
*@return
*/
    public String getIP() {
        return convertNumericIpToSymbolic(baseIPnumeric);

    }

    private String convertNumericIpToSymbolic(Integer ip) {
        StringBuffer sb = new StringBuffer(15);

        for (int shift = 24; shift > 0; shift -= 8) {

            // process 3 bytes, from high order byte down.
            sb.append(Integer.toString((ip >>> shift) & 0xff));

            sb.append('.');
        }
        sb.append(Integer.toString(ip & 0xff));

        return sb.toString();
    }

/**
* Get the net mask in symbolic form, i.e. xxx.xxx.xxx.xxx
*
*@return
*/

    public String getNetmask() {
        StringBuffer sb = new StringBuffer(15);

        for (int shift = 24; shift > 0; shift -= 8) {

            // process 3 bytes, from high order byte down.
            sb.append(Integer.toString((netmaskNumeric >>> shift) & 0xff));

            sb.append('.');
        }
        sb.append(Integer.toString(netmaskNumeric & 0xff));

        return sb.toString();
    }

/**
* Get the IP and netmask in CIDR form, i.e. xxx.xxx.xxx.xxx/xx
*
*@return
*/

    public String getCIDR() {
        int i;
        for (i = 0; i < 32; i++) {

            if ((netmaskNumeric << i) == 0)
                break;

        }
        return convertNumericIpToSymbolic(baseIPnumeric & netmaskNumeric) + "/" + i;
    }

/**
* Get an arry of all the IP addresses available for the IP and netmask/CIDR
* given at initialization
*
*@return
*/
    public List<String> getAvailableIPs(Integer numberofIPs) {

        ArrayList<String> result = new ArrayList<String>();
        int numberOfBits;

        for (numberOfBits = 0; numberOfBits < 32; numberOfBits++) {

            if ((netmaskNumeric << numberOfBits) == 0)
                break;

        }
        Integer numberOfIPs = 0;
        for (int n = 0; n < (32 - numberOfBits); n++) {

            numberOfIPs = numberOfIPs << 1;
            numberOfIPs = numberOfIPs | 0x01;

        }

        Integer baseIP = baseIPnumeric & netmaskNumeric;

        for (int i = 1; i < (numberOfIPs) && i < numberofIPs; i++) {

            Integer ourIP = baseIP + i;

            String ip = convertNumericIpToSymbolic(ourIP);

            result.add(ip);
        }
        return result;
    }

/**
* Range of hosts
*
*@return
*/
    public String getHostAddressRange() {

        int numberOfBits;
        for (numberOfBits = 0; numberOfBits < 32; numberOfBits++) {

            if ((netmaskNumeric << numberOfBits) == 0)
                break;
        }
        Integer numberOfIPs = 0;
        for (int n = 0; n < (32 - numberOfBits); n++) {

            numberOfIPs = numberOfIPs << 1;
            numberOfIPs = numberOfIPs | 0x01;

        }

        Integer baseIP = baseIPnumeric & netmaskNumeric;
        String firstIP = convertNumericIpToSymbolic(baseIP + 1);
        String lastIP = convertNumericIpToSymbolic(baseIP + numberOfIPs - 1);
        return firstIP + " - " + lastIP;
    }

/**
* Returns number of hosts available in given range
*
*@return number of hosts
*/
    public Long getNumberOfHosts() {
        int numberOfBits;

        for (numberOfBits = 0; numberOfBits < 32; numberOfBits++) {

            if ((netmaskNumeric << numberOfBits) == 0)
                break;

        }

        Double x = Math.pow(2, (32 - numberOfBits));

        if (x == -1)
            x = 1D;

        return x.longValue();
    }

/**
* The XOR of the netmask
*
*@return wildcard mask in text form, i.e. 0.0.15.255
*/

    public String getWildcardMask() {
        Integer wildcardMask = netmaskNumeric ^ 0xffffffff;

        StringBuffer sb = new StringBuffer(15);
        for (int shift = 24; shift > 0; shift -= 8) {

            // process 3 bytes, from high order byte down.
            sb.append(Integer.toString((wildcardMask >>> shift) & 0xff));

            sb.append('.');
        }
        sb.append(Integer.toString(wildcardMask & 0xff));

        return sb.toString();

    }

    public String getBroadcastAddress() {

        if (netmaskNumeric == 0xffffffff)
            return "0.0.0.0";

        int numberOfBits;
        for (numberOfBits = 0; numberOfBits < 32; numberOfBits++) {

            if ((netmaskNumeric << numberOfBits) == 0)
                break;

        }
        Integer numberOfIPs = 0;
        for (int n = 0; n < (32 - numberOfBits); n++) {

            numberOfIPs = numberOfIPs << 1;
            numberOfIPs = numberOfIPs | 0x01;
        }

        Integer baseIP = baseIPnumeric & netmaskNumeric;
        Integer ourIP = baseIP + numberOfIPs;

        String ip = convertNumericIpToSymbolic(ourIP);

        return ip;
    }

    private String getBinary(Integer number) {
        String result = "";

        Integer ourMaskBitPattern = 1;
        for (int i = 1; i <= 32; i++) {

            if ((number & ourMaskBitPattern) != 0) {

                result = "1" + result; // the bit is 1
            } else { // the bit is 0

                result = "0" + result;
            }
            if ((i % 8) == 0 && i != 0 && i != 32)

                result = "." + result;
            ourMaskBitPattern = ourMaskBitPattern << 1;

        }
        return result;
    }

    public String getNetmaskInBinary() {

        return getBinary(netmaskNumeric);
    }

/**
* Checks if the given IP address contains in subnet
*
*@param IPaddress
*@return
*/
    public boolean contains(String IPaddress) {

        Integer checkingIP = 0;
        String[] st = IPaddress.split("\\.");

        if (st.length != 4)
            throw new NumberFormatException("Invalid IP address: " + IPaddress);

        int i = 24;
        for (int n = 0; n < st.length; n++) {

            int value = Integer.parseInt(st[n]);

            if (value != (value & 0xff)) {

                throw new NumberFormatException("Invalid IP address: "
                        + IPaddress);
            }

            checkingIP += value << i;
            i -= 8;
        }

        if ((baseIPnumeric & netmaskNumeric) == (checkingIP & netmaskNumeric))

            return true;
        else
            return false;
    }

    public boolean contains(IPv4 child) {

        Integer subnetID = child.baseIPnumeric;

        Integer subnetMask = child.netmaskNumeric;

        if ((subnetID & this.netmaskNumeric) == (this.baseIPnumeric & this.netmaskNumeric)) {

            if ((this.netmaskNumeric < subnetMask) == true
                    && this.baseIPnumeric <= subnetID) {

                return true;
            }

        }
        return false;

    }
/**
*@param args
*/
    public static void main(String[] args) { 
    IPv4 ipv4 = new IPv4("192.168.161.125/30"); //30 is the CIDR  for Mask 255.255.255.252
    System.out.println(ipv4.getCIDR());
    System.out.println(ipv4.getNetmask());
    System.out.println(ipv4.getNumberOfHosts());
    System.out.println(ipv4.getWildcardMask());
    System.out.println(ipv4.getBroadcastAddress());
    System.out.println(ipv4.getHostAddressRange());

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T13:03:39.943

一个简单的方法。假设我们将子网掩码和 IP 地址分成 2 个字符串：

```
String[] mask      = subnetMaskString.split("\\.");
String[] ipAddress = ipAddressString.split("\\.");
StringBuffer ipSubnet  = new StringBuffer();
for(int i=0; i<4; i++)
    try{
        if(ipSubnet.length()>0)
            ipSubnet.append('.');
        ipSubnet.append(Integer.parseInt(ipAddress[i]) & Integer.parseInt(mask[i]));
    }catch(Exception x){ 
        //Integer parsing exception, wrong ipaddress or mask
        break;
    }
// if no exception ipSubnet.toString() is the subnet ip // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-22T21:38:26.643

[IPAddress Java 库](https://seancfoley.github.io/IPAddress/)以多态方式支持 IPv4 和 IPv6 子网。免责声明：我是项目经理。

这是您的示例的示例代码，地址为 192.168.161.125，子网掩码为 255.255.255.252。它显示了三种方法。

第一种方法解析字符串 addr/mask：

```
public static String getNetwork1(String addrStr, String maskStr) throws AddressStringException {
    IPAddressString addrString = new IPAddressString(addrStr + IPAddress.PREFIX_LEN_SEPARATOR + maskStr);
    IPAddress addr = addrString.toAddress();
    IPAddress subnet = addr.toPrefixBlock();
    return subnet.toString();
} 
```

第二种方法屏蔽地址获取网络：

```
public static String getNetwork2(String addrStr, String maskStr) throws AddressStringException {
    IPAddressString addrString = new IPAddressString(addrStr);
    IPAddressString maskString = new IPAddressString(maskStr);
    IPAddress addr = addrString.toAddress();
    IPAddress mask = maskString.toAddress();
    IPAddress masked = addr.mask(mask);
    return masked.toString();
} 
```

第三种方法从掩码中获取前缀长度来获取网络：

```
public static String getNetwork3(String addrStr, String maskStr) throws AddressStringException {
    IPAddressString addrString = new IPAddressString(addrStr);
    IPAddressString maskString = new IPAddressString(maskStr);
    IPAddress addr = addrString.toAddress();
    IPAddress mask = maskString.toAddress();
    Integer prefLen = mask.getBlockMaskPrefixLength(true);
    IPAddress subnet = addr.setPrefixLength(prefLen).toPrefixBlock();
    return subnet.toString();
} 
```

使用三个选项：

```
String addrString = "192.168.161.125";
String maskString = "255.255.255.252";
System.out.println(getNetwork1(addrString, maskString));
System.out.println(getNetwork2(addrString, maskString));
System.out.println(getNetwork3(addrString, maskString)); 
```

我们得到输出：

```
192.168.161.124/30
192.168.161.124
192.168.161.124/30 
```

要删除第一个和第三个地址结果的前缀长度，可以使用 withoutPrefixLength()。

# java - 我对弗洛伊德循环检测算法的实现不正确吗？

> ID：14994935
> 
> 赞同：0
> 
> 时间：2013-02-21T05:06:16.030
> 
> 标签：java, linked-list, floyd-cycle-finding

我有以下代码用于检测链表中的循环：

```
public Class Node {
    Object data;
    Node next = null;
}

boolean containCycle() {
    boolean retVal = true;
    Node head = this;
    Node slower = head;
    Node faster = head;

    if(faster != null && faster.next != null) {
        faster = faster.next;
    } else {    // there is only one element or zero element
        retVal = false;
    }

    if (faster.next != null) {
        faster = faster.next;
    } else {    // there are only 2 elements
        retVal = false;
    }

    while (slower != faster && slower != null && faster != null) {
        faster = (faster.next != null && faster.next.next != null) ? faster.next.next : null;
        slower = (slower.next != null) ? slower.next : null;
    }

    if (slower == faster) {
        retVal = true;
        System.out.printf("The two pointers meet at: %d\n", faster.data);
    } else {
        retVal = false;
    }

    if (retVal) {    // this is the part for detecting where the loop begins
        slower = head;
        while(slower.next != faster.next) {
            slower = slower.next;
            faster = faster.next;
        }
        System.out.println("The cycle starts at: " + slower.data);
    }

    return retVal;
} 
```

这段代码运行良好，直到我实际开始检测循环开始的部分，我在代码中对此进行了注释。不知何故，这陷入了无限循环。

我怀疑这在某种程度上与 Java 中的引用传递有关？我是否在更新`head`检测循环时引用的值？我真的没有想法。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:21:33.463

我不知道确切的算法，但您可以使用以下方式找到会合点。

让我们将越来越慢的节点称为会合点。

有两个指针，一个从头部开始，另一个从会合点开始。并计算您需要从头到会点遍历多少个节点（让我们将此计数称为`a`）以及会合点的下一个节点到会合点。（让我们称之为计数 `b`）

现在`|a-b|`这两个计数的差异代表了共同的部分-对吗？（即循环开始和越来越快的交汇点之间的部分）。

所以现在重新开始。重置两个指针，一个指向头部，另一个指向会合点 + 1。

例如，如果`a>b`，将指针从头部`|a-b|`移动时间，否则将指针从会议点移动 + 1`|a-b|`次。

现在将两个指针一起移动，直到它们相遇。

另一种解释方式

由于您要查找的内容类似于您有两个链表并且它们在某个节点处合并并且您需要识别该节点的情况。您所拥有的只是两个链表的起点。

因此，您从 head1 开始并数到列表末尾。接下来，您从 head2 开始并数到列表末尾。

计算长度的差异。增加较长的路径差异时间。然后从较短的路径 head 和 diff 开始移动指针，直到两个指针相遇。

这基本上与您在另一种情况下所做的事情相同。

# java - GridBagLayout 中的 JTextArea 窃取了太多空间

> ID：14994939
> 
> 赞同：1
> 
> 时间：2013-02-21T05:06:41.757
> 
> 标签：java, swing, gridbaglayout

我有一个 GridBagLayout，出于某种原因，我的 JTextArea 决定它不想听 gridbag 的比例，当创建包含布局的面板时，我的文本框会增长到占据屏幕的 1/2。继承人一些代码：

```
 tp = new JTabbedPane();
        tp.setFont(Main.f);
        //Adds tabs with several buttosn to my tabbed pane
        for(Menu menu : FileManager.menus){
            JPanel tmp = new JPanel();
            int s = (int) Math.ceil(Math.sqrt(menu.products.size()));
            tmp.setLayout(new GridLayout(s,s));
            for(Product p : menu.products){//Act as
                p.setFont(Main.f);
                p.addActionListener(this);
                tmp.add(p);
            }
            tp.addTab(menu.name,null,tmp,null);
        }
        receipt.setBorder(BorderFactory.createEtchedBorder());

        //starting up with GridBag
        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.ipadx = 0;
        gbc.ipady = 0;

        //sets up and adds the JTabbedPane
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 1;
        gbc.gridheight = 1;
        gbc.weightx = 0.8;
        gbc.weighty = 0.8;
        add(tp,gbc);

        //sets up and adds receipt - The one that takes up half the screen
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.weightx = 0.2;
        receipt.setEditable(false);
        receipt.setText("Ticket number: 0\n" +
                "Transaction number: 0\n");
        receipt.setLineWrap(true);
        add(receipt,gbc);

        //sets up and adds a JPanel that has a bunch of buttons on it(Uses gridlayout)
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.gridwidth = 2;
        gbc.gridheight = 1;
        gbc.weightx = 1;
        gbc.weighty = 0.2;
        add(buttons,gbc);

        buttons.setLayout(new GridLayout(1,8));
        createButton(newtable);
        createButton(remove);
        for(JButton a : quicks)
            createButton(a);
        createButton(pay);
        createButton(exit);

        revalidate();
        repaint(); 
```

当我将 TextArea 更改为空白 JButton 时，它根本不会占用太多空间。基本上，该空间由右侧的对象填充。如何告诉 gridbag 我希望左侧对象跨越屏幕的 4/5，而右侧对象跨越最后 1/5？在这个版本中，我尝试使用加权来做到这一点，在我的原始版本中，我尝试使用单元格来做到这一点，所以左边的对象在 gridx=0 gridwidth = 4，右边的对象是 gridx = 4 gridwidth = 1

两种方法都没有奏效。我也愿意接受其他想法（比如更好的布局或 JTable？）

谢谢你的帮助，蔡斯

它在做什么 ![它能做什么](../Images/2aeeebb154af434aa0d379d7efe808e9.png) 尺寸对于它应该做什么 ![在此处输入图像描述](../Images/47d04ef6340c5adee740a5006c4cf6a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:46:30.170

如果您不固定在精确的 4/5 和 1/5 比例上，您可以使用 BorderLayout 并将按钮放置在中心，将文本区域放置在东方。

边框布局将根据您提供的宽度显示文本区域 - 指定首选大小（宽度，您可以将高度设置为您想要的任何数字，边框布局将忽略它）。然后由按钮面板占用其余空间。

您可以在此处了解有关边框布局的更多信息：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

# php - 用php将数字转换为罗马数字

> ID：14994941
> 
> 赞同：31
> 
> 时间：2013-02-21T05:06:47.040
> 
> 标签：php, arrays, numbers, roman-numerals

我需要用 php 将普通数字转换为罗马数字，我有以下代码：

```
 <?php

function roman2number($roman){
    $conv = array(
        array("letter" => 'I', "number" => 1),
        array("letter" => 'V', "number" => 5),
        array("letter" => 'X', "number" => 10),
        array("letter" => 'L', "number" => 50),
        array("letter" => 'C', "number" => 100),
        array("letter" => 'D', "number" => 500),
        array("letter" => 'M', "number" => 1000),
        array("letter" => 0, "number" => 0)
    );
    $arabic = 0;
    $state = 0;
    $sidx = 0;
    $len = strlen($roman);

    while ($len >= 0) {
        $i = 0;
        $sidx = $len;

        while ($conv[$i]['number'] > 0) {
            if (strtoupper(@$roman[$sidx]) == $conv[$i]['letter']) {
                if ($state > $conv[$i]['number']) {
                    $arabic -= $conv[$i]['number'];
                } else {
                    $arabic += $conv[$i]['number'];
                    $state = $conv[$i]['number'];
                }
            }
            $i++;
        }

        $len--;
    }

    return($arabic);
}

function number2roman($num,$isUpper=true) {
    $n = intval($num);
    $res = '';

    /*** roman_numerals array ***/
    $roman_numerals = array(
        'M' => 1000,
        'CM' => 900,
        'D' => 500,
        'CD' => 400,
        'C' => 100,
        'XC' => 90,
        'L' => 50,
        'XL' => 40,
        'X' => 10,
        'IX' => 9,
        'V' => 5,
        'IV' => 4,
        'I' => 1
    );

    foreach ($roman_numerals as $roman => $number)
    {
        /*** divide to get matches ***/
        $matches = intval($n / $number);

        /*** assign the roman char * $matches ***/
        $res .= str_repeat($roman, $matches);

        /*** substract from the number ***/
        $n = $n % $number;
    }

    /*** return the res ***/
    if($isUpper) return $res;
    else return strtolower($res);
}

/* TEST */
echo $s=number2roman(6,true);
echo "\n and bacK:\n";
echo roman2number($s);

?> 
```

尝试这种方式但不起作用：

```
echo $s=number2roman((.$row['id'].),true);
echo "\n and bacK:\n";
echo roman2number($s); 
```

问题是我需要更改的数字是我的 sql 数据库的读数，不知道如何、从和通过。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-02-22T11:48:56.963

I found this code here: [http://php.net/manual/en/function.base-convert.php](http://php.net/manual/en/function.base-convert.php)

Optimized and prettified function:

```
/**
 * @param int $number
 * @return string
 */
function numberToRomanRepresentation($number) {
    $map = array('M' => 1000, 'CM' => 900, 'D' => 500, 'CD' => 400, 'C' => 100, 'XC' => 90, 'L' => 50, 'XL' => 40, 'X' => 10, 'IX' => 9, 'V' => 5, 'IV' => 4, 'I' => 1);
    $returnValue = '';
    while ($number > 0) {
        foreach ($map as $roman => $int) {
            if($number >= $int) {
                $number -= $int;
                $returnValue .= $roman;
                break;
            }
        }
    }
    return $returnValue;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-10T11:51:30.220

另一种方法

```
<?php 
function ConverToRoman($num){ 
    $n = intval($num); 
    $res = ''; 

    //array of roman numbers
    $romanNumber_Array = array( 
        'M'  => 1000, 
        'CM' => 900, 
        'D'  => 500, 
        'CD' => 400, 
        'C'  => 100, 
        'XC' => 90, 
        'L'  => 50, 
        'XL' => 40, 
        'X'  => 10, 
        'IX' => 9, 
        'V'  => 5, 
        'IV' => 4, 
        'I'  => 1); 

    foreach ($romanNumber_Array as $roman => $number){ 
        //divide to get  matches
        $matches = intval($n / $number); 

        //assign the roman char * $matches
        $res .= str_repeat($roman, $matches); 

        //substract from the number
        $n = $n % $number; 
    } 

    // return the result
    return $res; 
} 

echo ConverToRoman(23); 
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-20T08:44:09.080

```
function rome($N){
    $c='IVXLCDM';
    for($a=5,$b=$s='';$N;$b++,$a^=7)
        for($o=$N%$a,$N=$N/$a^0;$o--;$s=$c[$o>2?$b+$N-($N&=-2)+$o=1:$b].$s);
    return $s;
}

// from polish wiki 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T17:23:18.437

存在非法抵消问题。

代替

```
$o=1:$b].$s); 
```

和

```
$o=1:$b >0 ? $b : 0].$s); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-03T12:13:19.770

> 由 PHP 单元检查和验证

创建一个名称为**RomanNumerals**的类，并按定义添加一个受保护的静态属性：

```
protected static $lookup = [
        1000 => 'M',
        900 => 'CM',
        500 => 'D',
        400 => 'CD',
        100 => 'C',
        90 => 'XC',
        50 => 'L',
        40 => 'XL',
        10 => 'X',
        9 => 'IX',
        5 => 'V',
        4 => 'IV',
        1 => 'I',
    ]; 
```

然后添加一个方法如下

```
public function output ($number)
    {
        $solution = '';

        foreach(static::$lookup as $limit => $glyph){
            while ($number >= $limit) {
                $solution .= $glyph;
                $number -= $limit;
            }
        }

        return $solution;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-17T18:35:24.797

我改进了 Jasiek 的 rome() 函数

```
function rome2($N)
{
    // support for numbers greater than a thousand
    $ss = '';
    while ($N > 1000) {
        $ss .= 'M';
        $N -= 1000;
    }

    $c = 'IVXLCDM';
    for ($a = 5, $b = 0, $s = ''; $N; $b++, $a ^= 7)
        for ($o = $N % $a, $N = $N / $a ^ 0; $o--; ) {
            $s = $c[$o > 2 ? $b + $N - ($N &= -2) + $o = 1 : $b] . $s;
        }
    return $ss.$s;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-22T07:10:32.833

我自己的功能它有最好的性能：

```
function romanNumber($n)
{
    // support for numbers greater than a thousand
    $ret1 = '';
    while ($n >= 1000) {
        $ret1 .= 'M';
        $n -= 1000;
    }

    $ret = '';
    if ($n > 0) {
        $n = (string) $n;
        $l = 'IVXLCDM';
        $j = 0; // goes by roman letters
        for ($i = strlen($n)-1; $i >= 0; --$i) { // goes by decimal number
            switch ($n[$i]) {
                case 0: $s = ''; break;
                case 1: $s = $l[$j]; break;
                case 2: $s = $l[$j].$l[$j]; break;
                case 3: $s = $l[$j].$l[$j].$l[$j]; break;
                case 4: $s = $l[$j].$l[$j+1]; break;
                case 5: $s = $l[$j+1]; break;
                case 6: $s = $l[$j+1].$l[$j]; break;
                case 7: $s = $l[$j+1].$l[$j].$l[$j]; break;
                case 8: $s = $l[$j+1].$l[$j].$l[$j].$l[$j]; break;
                case 9: $s = $l[$j].$l[$j+2]; break;
            }
            $j += 2;
            $ret = $s.$ret;
        }
    }

    return $ret1.$ret;
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2015-04-16T23:18:01.117

在这里查看我的解决方案[https://github.com/frostymarvelous/Whisppa-Libs/blob/master/Misc/Numeralo.php](https://github.com/frostymarvelous/Whisppa-Libs/blob/master/Misc/Numeralo.php)。它是双向的。

```
 <?php
     /**
     * @package    Whisppa
     * @subpackage Misc
     * @license    http://opensource.org/licenses/MIT  MIT License
     * @author     Stefan (frostymarvelous) Froelich <sfroelich@gmail.com>
     * @copyright  Copyright (c) 2015, Stefan (frostymarvelous) Froelich
     */
    namespace Whisppa\Misc;

    /**
     * This class allows you to convert from Roman numerals to natural numbers and vice versa.
     * I decided to do this as a fun challenge after reading http://thedailywtf.com/articles/Roman-Enumeration
     * Took me about 30 minutes to come up with, research and code the solution.
     * It can convert numbers up to 3,999,999 because I couldn't find any numerals for 5,000,000 above.
     * Due to my inability to get the correct accented characters 5000 above, I resulted to using the pipe (|) to represent accent. 
     */
    class Numeralo
    {
        /**
        * @var string[] A notation map to represent the common Roman numeral values. 
        * @static
        */
        protected static $NOTATION = 
        [
            '|', //one
            '[', //five
            ']', //ten
        ];

        /**
        * @var \ArrayObject[] A map of Roman numerals based on place value. Each item ends with the first numeral in the next place value.
        * @static
        */
        protected static $NUMERALS_BY_PLACE_VALUE =     
        [
            ['I', 'V', 'X',], //ones
            ['X', 'L', 'C',], //tens
            ['C', 'D', 'M',], // hundreds
            ['M', 'V|', 'X|',], //thousands
            ['X|', 'L|', 'C|',], //tens of thousands
            ['C|', 'D|', 'M|',], //hundreds of thousands
            ['M|', '~', '~',], // millions. there are no values for the last two that I could find
        ];

        /**
        * @var string[]  sA map of numbers and their representative Roman numerals in notation format. This map allows us to make any numeral by replacing the the notation with the place value equivalent.    
        * @static
        */
        protected static $NUMBER_TO_NOTATION = 
        [
            '0' => '',
            '1' => '|',
            '2' => '||',
            '3' => '|||',
            '4' => '|[',
            '5' => '[',
            '6' => '[|',
            '7' => '[||',
            '8' => '[|||',
            '9' => '|]',
        ];

        /**
        * @var int[] A map of the major Roman numerals and the number equivalent.
        * @static
        */
        protected static $NUMERALS_TO_NUMBER = 
        [
            'I' => 1,
            'V' => 5,
            'X' => 10,
            'L' => 50,
            'C' => 100,
            'D' => 500,
            'M' => 1000,
            'V|' => 5000,
            'X|' => 10000,
            'L|' => 50000,
            'C|' => 100000,
            'D|' => 500000,
            'M|' => 1000000,
        ];

        /**
        * Converts natural numbers to Roman numerals.
        *
        * @static
        * @param int|string $number a number or numeric string less than 3,999,999
        * @throws \InvalidArgumentException if the provided $number argument is not numeric or greater than 3,999,999.
        * @return string Roman numeral equivalent   
        */
        public static function number_to_numerals($number) {
            if(!is_numeric($number))
                throw new \InvalidArgumentException('Only numbers allowed');
            if($number > 3999999)
                throw new \InvalidArgumentException('Number cannot be greater than 3,999,999');

            $numerals = '';
            $number_string = strrev((string) $number);
            $length = strlen($number_string);

            for($i = 0; $i < $length; $i++) {
                $char = $number_string[$i];

                $num_map = self::$NUMERALS_BY_PLACE_VALUE[$i];
                $numerals = str_replace(self::$NOTATION, $num_map, self::$NUMBER_TO_NOTATION[$char]) . $numerals;
            }

            return $numerals;   
        }

        /**
        * Converts Roman numerals to natural numbers.
        *
        * @static
        * @param string $numerals the Roman numerals to be converted
        * @throws \InvalidArgumentException if the provided $numerals argument contains invalid characters.
        * @return int the equivalent number
        */
        public static function numerals_to_number($numerals) {
            $number = 0;
            $numeral_string = strrev((string) $numerals);
            $length = strlen($numeral_string);

            $prev_number = false;
            $is_accented = false;

            for($i = 0; $i < $length; $i++) {
                $char = $numeral_string[$i];

                if($char == '|') //check if it is an accent character
                {
                    $is_accented = true;
                    continue;//skip this iteration and process it in the next one as the accent applies to the next char
                }
                else if($is_accented)
                {
                    $char .= '|';
                    $is_accented = false;
                }

                //TODO Make a check using maybe regex at the beginning of the method.
                if(!isset(self::$NUMERALS_TO_NUMBER[$char]))
                    throw new \InvalidArgumentException("Invalid character '{$char}' in numeral string");

                $num = self::$NUMERALS_TO_NUMBER[$char];

                //this is where the magic happens
                //if the previous number divided by 5 or 10 is equal to the current number, then we subtract eg. 9 = IX. I = 1, X = 10, 10/10 = 1
                if($prev_number)
                {
                    if(($prev_number / 5) == $num || ($prev_number / 10) == $num)
                        $number -= $num;
                    else
                        $number += $num;
                }
                else
                    $number += $num;

                $prev_number = $num;
            }

            return $number;

        }

    } 
```

# javascript - javascript计算器：加号替代品

> ID：14994946
> 
> 赞同：0
> 
> 时间：2013-02-21T05:07:04.970
> 
> 标签：javascript, calculator

当我正在研究我当前的问题时，这篇[文章](https://stackoverflow.com/questions/1634341/overloading-arithmetic-operators-in-javascript)似乎很有希望，但我自己无法弄清楚这是否是我问题的答案。因此，如果有人可以帮助我，那就太好了。

这是我的功能：

```
function CalculateIMSUB(form) {
  var Atext = form.input_1.value;
  var Btext = form.input_2.value;
  var val = form.val.value;
  var A = eval(Atext);
  var B = eval(Btext);
  if (isNaN(A)) A = 0;
  if (isNaN(B)) B = 0;
  var answer = A - B;
  form.Answer.value = answer;
} 
```

这是我的html：

```
<form>
  <INPUT TYPE=TEXT name="input_1" SIZE=15>
  <INPUT TYPE=TEXT name="input_2" SIZE=10>
  <INPUT TYPE="button" VALUE="+" name="SubtractButton"
  onclick="CalculateIMSUB(this.form)">
  <INPUT TYPE=TEXT NAME="Answer" SIZE=12>
  <input type="hidden" name="val" value="" />
</form> 
```

我的问题：

我可以用“/”添加吗

例如，目前，如果您在输入 1 文本字段中输入 10 / 5 并单击计算，您将在答案文本字段中得到 2 的答案。因为众所周知，10 除以 5 等于 2。我希望能够在输入 1 文本字段中输入 10/5 并收到 15 的答案，这相当于 10+5。非常感谢您的帮助，谢谢，这是我的[jsFiddle](http://jsfiddle.net/qvDFY/20/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:24:32.410

这是一个非常简单的计算器实现，带有原型和模块，`eval`不需要。

```
var calc = (function calcModule() {
  function Calculator(operation) {
    this.op = operation;
    this._init();
  }

  Calculator.prototype = {
    _init: function() {
      this.n1 = +this.op.split(/\D/)[0];
      this.n2 = +this.op.split(/\D/)[1];
      this.result = this[this.op.match(/\D/)[0]]();
    },
    '+': function() { return this.n1 + this.n2 },
    '-': function() { return this.n1 - this.n2 },
    '*': function() { return this.n1 * this.n2 },
    '/': function() { return this.n1 / this.n2 }
  };

  return function(op) {
    return new Calculator(op);
  };
}()); 
```

您可以根据需要更改符号的作用。你像这样使用它：

```
console.log(calc('20-15').result); //=> 5
console.log(calc('15/5').result); //=> 3
... 
```

请注意，它非常简单，它只适用于两个数字，但只是为了让您了解......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:56:03.597

你也可以这样做：

```
var Atext = form.first.value.replace(/\//g,"+");
var Btext = form.second.value.replace(/\//g,"+"); 
```

这将在幕后替换所有除法运算符，以便您的 eval 将它们作为加法处理。（所以你可以放 5/5/5 得到 15，或者你有什么。）

# jquery - 迭代每一行 om 表并进行 api 调用

> ID：14994948
> 
> 赞同：0
> 
> 时间：2013-02-21T05:07:14.640
> 
> 标签：jquery, json, api

我正在尝试遍历表中的每一行并使用书籍和作者值，我进行 api 调用并获取一些详细信息并填充我的字符串。我在这里遇到的问题是，当我点击提交时，我的 str_tot 是空的。当我添加警报语句以找出发生这种情况的原因时，.each 函数似乎一次从表中获取所有值，然后仅使用最后一个值进入 api 调用循环。

api 调用有 1 秒的延迟来进行调用和获取信息。这有点奇怪，我用尽了我试图找出问题的选择。任何帮助深表感谢。

```
<table id="list">
<thead>
 <th>Author</th>
 <th>Book</th>
</thead>
<tbody>
<tr>
<td class="check"><input type="checkbox" checked></td>
<td class="author">Name1</td>
<td class="book">Book1</td>
</tr>
...
...
...
<tr>
<td class="author">Name10</td>
<td class="book">Book10</td>
</tr>
</table>

<script>
var str_tot = " ";
$('#submit').click(function () {
$('#list > tbody > tr').each(function () { 

             var author = $(this).find('td.author').val();
             var book = $(this).find('td.book').val();

             if($(this).find('td.check').find("input").is(':checked')) {

                 var url = "http://api.book.com/some/link/search?query="+author+"&title[]=booktitle:"+book;
                 $.getJSON(url, function(data) {
                    var book = data.result[0]["book"];
                    var author = data.result[0]["author"];
                 });
                str_tot = str_tot + " " + author + " " + book; 
           });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:17:50.133

AJAX 是异步调用服务的，所以调用`$.getJSON`方法后会立即跳转到下一条指令，即

`str_tot = str_tot + " " + author + " " + book;`

所以将上面的语句移到回调函数中。

```
$.getJSON(url, function(data) {
     var book = data.result[0]["book"];
     var author = data.result[0]["author"];

      str_tot = str_tot + " " + author + " " + book; 
}); 
```

# elasticsearch - 如何杀死elasticsearch集群上的搜索请求线程？是否有一些 API 可以做到这一点？

> ID：14994952
> 
> 赞同：6
> 
> 时间：2013-02-21T05:07:41.360
> 
> 标签：elasticsearch, kill-process

我用大数据做了一个elasticsearch集群，客户端可以向它发送搜索请求。有时，集群会花费大量时间来处理一个请求。我的问题是，是否有任何 API 可以杀死花费太多时间的指定线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T15:38:01.773

现在弹性搜索 1.0.0 已经发布，我想跟进这个答案。我很高兴地宣布，已经引入了一种新功能，可以对堆实施一些保护，称为断路器。

在当前的实现中，断路器会尝试预测有多少数据将被加载到字段数据缓存中，如果它大于限制（默认为 80%），它将触发断路器并终止您的查询.

如果要修改它们，有两个参数供您设置：

```
indices.fielddata.breaker.limit

indices.fielddata.breaker.overhead 
```

开销是用于估计将有多少数据加载到字段缓存中的常量；默认为 1.03。

这是 Elasticsearch 的一个令人兴奋的发展，也是我等待实现数月的一个功能。

如果有兴趣了解它是如何制作的，这是拉取请求；感谢 dakrone 完成这项工作！

[https://github.com/elasticsearch/elasticsearch/pull/4261](https://github.com/elasticsearch/elasticsearch/pull/4261)

希望这会有所帮助，马修J

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-04T07:29:58.483

目前无法终止或停止长时间运行的查询，但 Elasticsearch 将添加一个任务管理 API 来执行此操作。该 API 很可能会在 Elasticsearch 5.0 中添加，可能在 2016 年或更晚。

请参阅[任务管理 1](https://github.com/elastic/elasticsearch/issues/6914)和[任务管理 2](https://github.com/elastic/elasticsearch/issues/15117)。

# django - 在视图中使用 HTML 发送的参数

> ID：14994954
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:01.500
> 
> 标签：django, django-templates, django-views

我有一个包含以下数据的 DB Emp：

```
id|name|project
1|tom|p01
2|tom|p02
3|tom|p03
4|mat|p04
5|mat|p05
6|katie|p06 
```

我在 html 页面 name.html 中显示不同的 Emp.name，如下所示：

```
<a href="emp/{{ Emp.name }}/project/">{{ Emp.name }}</a> 
```

现在，当用户选择一个特定的 Emp.name 时，我想在新的 html 页面 project.html 中显示该名称的所有项目值。所以我需要编写如下视图：

```
def project(request, ***emp_name***):
    proj_list = Emp.objects.filter(name=***emp_name***)
    t = loader.get_template('name/project.html')
    c = Context({
        'proj_list': proj_list,
    })
    return HttpResponse(t.render(c)) 
```

name.html 必须将 emp_name 返回到视图 project() 才能查询数据库。如何传递 emp_name 以及如何在 project() 中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:13:58.183

从`urls.py`中，您可以提取`emp_name`并将其传递给视图。你必须使用`named-groups`. 有关更多详细信息，请参阅 [https://docs.djangoproject.com/en/1.3/topics/http/urls/#named-groups](https://docs.djangoproject.com/en/1.3/topics/http/urls/#named-groups)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:14:20.393

首先，您需要一个将参数传递给视图的 URL 模式：

```
from django.conf.urls.defaults import url, patterns

urlpatterns = patterns('your_module.views',
    url(r'^emp/(?P<emp_name>\w+)/project/$', 'project', name='projects'),
) 
```

然后你需要重构你的视图：

```
from django.shortcuts import render
from your_module.models import Emp

def project(request, emp_name):
    proj_list = Emp.objects.filter(name=emp_name)
    return render(request, 'name/project.html', {'proj_list': proj_list}) 
```

# python - 用记事本++包装

> ID：14994955
> 
> 赞同：3
> 
> 时间：2013-02-21T05:08:06.700
> 
> 标签：python, notepad++

我知道 Python 编码标准每行有 78 个字符的限制。我在 Notepad++ 中工作，如何设置它以使其在 78 个字符后换行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-25T23:34:41.763

Notepad++ 用户手册中有一篇关于[管理](https://npp-user-manual.org/docs/preferences/#editing)行长的好文章。它建议使用设置 -> 首选项 -> 编辑 -> 垂直边缘设置。似乎没有办法让它在您键入时自动换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T04:08:58.003

要应用 WordWrap，只需在菜单栏中查看并选中 WordWrap 选项。

# jakarta-ee - 通过从其他服务器下载自动更新战争文件

> ID：14994956
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:06.610
> 
> 标签：jakarta-ee, tomcat7

******我们正在构建这个 Java EE Web 应用程序并在每台客户端 PC 上的 tomcat 7.0 上进行部署。因为这个应用程序必须离线运行。每天我们都有新的部署和错误修复产生新的战争文件。我想要一些方法，以便那些旧部署了解新版本的战争并从服务器下载并将其部署在 tomcat 上。我进行了很多搜索，但找不到任何东西，阅读有关 cron 作业或 ant 脚本的信息……请对此有所了解。tomcat 7.0 是我们正在使用的 ******

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:32:45.950

您需要为此编写单独的计划任务。您可以编写一个任务，使用`TimerTask`它将在您的服务器文件夹上轮询新战争，如果新战争可用，那么任务将关闭 tomcat，部署新战争并启动 tomcat。您可以使用 Apache common`FileAlterationObserver`来观察文件夹中的变化以检查新的战争。**

# open-source - 在开源项目中包含字体

> ID：14994957
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:08.760
> 
> 标签：open-source

如果我想在我的开源项目中包含一种字体，我怎么知道这样做是否可以？

MS Windows 自带的字体可以吗？

OSX自带的字体可以吗？

Linux自带的字体可以吗？

谷歌开放字体可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:11:50.073

有免费字体的来源，但你提到的字体都不*一定*会在其中，尽管谷歌网络字体可能是你最好的选择。

就像您计划将其合并到项目中的任何代码一样：如果您没有编写它，请找出许可证的内容。您想要的字体不仅是“免费”或“开源”，而且可以免费**重新分发**。[这是关于gamedev的相关讨论。](https://gamedev.stackexchange.com/questions/360/where-can-i-find-fonts-which-i-can-distribute-with-an-open-source-game)

[这是](http://osliving.com/sourced/open-source-fonts/web-resources/)开源字体的五个来源的列表，其中许多都符合您的标准。（它包括谷歌网络字体。）

# php - 联系表未发送

> ID：14994958
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:09.083
> 
> 标签：php, forms, email, contact

我正在尝试设置一个简单的联系表格。一切的样式都正确，但是当我点击提交时它不会带我去任何地方，只是尝试打开contact.php。我认为实际发送消息的代码中缺少一些东西。我敢肯定，我错过了一些相当简单的事情，但这有点超出我的想象。任何帮助表示赞赏。

```
<form action="mail.php" method="POST">
    <p>Name</p> <input type="text" name="name">
    <p>Company</p> <input type="text" name="company">
    <p>Email</p> <input type="text" name="email">
    <p>Phone</p> <input type="text" name="phone">
    <p>Message</p><textarea name="message" rows="4" cols="25"></textarea><br />
    <input type="submit" value="Submit">
    </form>

<?php

$name = $_POST['name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "______@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";

$to ='______@gmail.com';
$send_contact=mail($to,$subject,$message,$header);

// Check, if message sent to your email 
// display message "We've received your information"

if($send_contact){
echo "We've received your contact information";
}
else {
echo "ERROR";
}
?> 
```

编辑：在添加 mail.php 的完整 url 后，我终于能够收到一封电子邮件......但是除了消息之外，没有任何信息被包括在内。发件人被列为 Apache...我如何确保在表单中输入的信息将包含在电子邮件中？感谢迄今为止的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:24:59.417

由于您在同一页面中指定代码，因此您可以`action`在表单中省略。此外，在脚本运行后设置运行 PHP 的条件。

```
<?php
if(isset($_POST['submit'])){
$name = $_POST['name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "______@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";

$to ='______@gmail.com';
$send_contact=mail($to,$subject,$message,$header);

// Check, if message sent to your email 
// display message "We've received your information"

if($send_contact){
echo "We've received your contact information";
}
else {
echo "ERROR";
} }
?>
<form action = "<?= $_SERVER["PHP_SELF"]; ?>"method="POST">
    <p>Name</p> <input type="text" name="name">
    <p>Company</p> <input type="text" name="company">
    <p>Email</p> <input type="text" name="email">
    <p>Phone</p> <input type="text" name="phone">
    <p>Message</p><textarea name="message" rows="4" cols="25"></textarea><br />
    <input type="submit" value="Submit" name="submit">
    </form> 
```

希望能帮助到你！

编辑：我不确定当前文件名是什么，但为了保持动态，我提到`$_SERVER["PHP_SELF"]`了不推荐的用法。不过，试试吧！:)

# c++ - 重载运算符 !=

> ID：14994961
> 
> 赞同：1
> 
> 时间：2013-02-21T05:08:17.883
> 
> 标签：c++, operator-overloading, smart-pointers

我写了一个更智能的指针类。并使以下代码正确

```
ZhjSmartPointer<int> a(new int);  
assert(a != NULL); 
```

我像这样重载 != 运算符：

```
bool operator !=(T *ptr) const; 
```

但是，这会导致如下编译错误：

> ZhjSmartPointer.h:132: 注意: 候选 1: bool ZhjSmartPointer::operator!=(T*) const [with T = Test] test.cpp:41: 注意: 候选 2: operator!=(int, int)

我对如何将 a`ZhjSmartPointer`转换为a 感到困惑`int`

SmartPointer 类的代码如下：

```
template <typename T>
class ZhjSmartPointer {
public:
    ZhjSmartPointer();
    explicit ZhjSmartPointer(T *ptr);

    ZhjSmartPointer(const ZhjSmartPointer &smartPtr);
    ZhjSmartPointer &operator =(const ZhjSmartPointer &smartPtr);
    ~ZhjSmartPointer();

    operator bool() const;
    T &operator *() const;
    T *operator ->() const;
    bool operator ==(const ZhjSmartPointer &smartPtr) const;
    bool operator !=(const ZhjSmartPointer &smartPtr) const;

    bool operator ==(T *ptr) const;
    bool operator !=(T *ptr) const;

private:
    void copyPtr(const ZhjSmartPointer &smartPtr);
    void deletePtr();
    T *ptr_;
    size_t *refCnt_;
}; 
```

我猜是因为我重载了'bool'运算符，'ZhjSmartPointer -> bool -> int'会导致这个问题。对吗？

对不起，这只是一个编译警告，而不是错误。有人建议我不要用参数（T *）重载！=，毕竟我们已经重载了'bool'。写这样的代码就可以了：
ZhjSmartPointer a(new int);
如果 (a) { ..........
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:16:30.973

在 C++`NULL`中被定义为`0`, not `(void*)0`，其实大部分教科书都会告诉你用`0`代替`NULL`.

如果你使用的是 C++11，你应该`nullptr`顺便使用

* * *

您的问题确实是`bool`隐式转换。要解决您的问题，请使用重载运算符 not ( `!`) 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:16:45.997

> 我猜是因为我重载了'bool'运算符，'ZhjSmartPointer -> bool -> int'会导致这个问题。对吗？

我认同。

但是*您是否为 定义了任何转换运算符* `ZhjSmartPointer`？

```
#include <cassert>
#include <cstddef>

template <class T>
class ZhjSmartPointer{
    public:
    ZhjSmartPointer (T* _ptr)
    :ptr_saved(_ptr){    }
    bool operator !=(T *ptr) const{
        return ptr!=ptr_saved;
    }
    private:
    T* ptr_saved;
};
int main(){
    ZhjSmartPointer<int> a(new int);  
    assert(a != NULL);     
} 
```

这虽然为我编译（`g++ 4.6.3`）。添加：

```
 operator bool() const{
        return ptr_saved!=0;
    } 
```

`g++ 4.6.3`发出**警告**，但它仍然编译。

```
1.cpp:9:14： Candidate 1： bool ZhjSmartPointer<T>::operator!=(T*) const [with T = int]
1.cpp:20:9： Candidate 2： operator!=(int, int) <builtin> 
```

* * *

**已弃用**

*令人惊讶* `NULL`的是`int`，不是`void*`。

像这样声明你的构造函数：

```
ZhjSmartPointer<int> a(new int); 
```

启用从 int 到`ZhjSmartPointer`. 相反，添加一个`explicit`：

```
explicit ZhjSmartPointer<int> a(new int); 
```

来抑制这种转换。

# oracle - 如何列出索引的不同键？

> ID：14994962
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:29.150
> 
> 标签：oracle, indexing

user_indexes 表有一个名为“不同键”的列。此值是否表示索引列中不同键的数量。在那种情况下，有没有办法列出所有这些键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:14:32.690

`Does this value represent the number of distinct keys in the column indexed.`

是的，它确实代表了不同索引值的数量。

`In that case, is there a way to list all those keys ?`

您必须手动执行`SELECT DISTINCT column_name FROM table_name`以获取不同值的列表。没有系统视图，它存储与索引列关联的不同值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:54:09.497

由于您对*index*中的不同值感兴趣，因此最好运行如下查询：

```
SELECT DISTINCT column_name FROM table_name WHERE column_name IS NOT NULL; 
```

这很可能使用索引非常快速地返回不同的值，而无需进行全表扫描和排序。

（注意：如果该列已经具有经过验证的 NOT NULL 约束，则不需要“IS NOT NULL” where 子句）。

# php - && 和 'and' 在 php 中是一样的吗？

> ID：14994963
> 
> 赞同：2
> 
> 时间：2013-02-21T05:08:31.973
> 
> 标签：php, logical-operators

我尝试了以下代码并得到了**&&**和**并且**是不同的。

```
<?php

$keyWord =  2 and 3>4;

$symbol  =  2 &&  3>4;

echo $keyWord===$symbol ? 'equal' : 'not-equal'; 
```

输出：不等

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T05:13:39.377

它们没有相同的优先级。完全括号内，您的代码是：

```
($keyWord = 2) and (3>4); // $keyWord = 2
$symbol = (2 && (3>4)); // $symbol = false 
```

`2`并且`false`显然不一样，因此`'not-equal'`.

[有关运算符优先级的更多信息](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T05:15:02.363

好吧，将代码稍微更改为：

```
<?php
$keyWord =  2 and 3>4;

$symbol  =  2 &&  3>4;

var_dump($keyWord);
var_dump($symbol);
?> 
```

产生以下输出：

```
int(2) bool(false) 
```

正如 Kolink 在上面指出的，这是由于运算符优先级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T05:20:57.713

这是逻辑运算符的优先级（表的一部分）

```
left    &&  logical
left    ||  logical
left    ? :     ternary
right   = += -= *= /= .= %= &= |= ^= <<= >>= =>     assignment
left    and 
```

在你的情况下：

```
case 1:

$keyWord =  2 and 3>4;

($keyWord =  2) and (3>4); 
```

这里`$keyWord = 2`

```
case 2:

$symbol  =  2 &&  3>4;

$symbol  =  (2 && (3>4)); 
```

这里`$symbol = false`

**解决方案**：`$keyWord = (2 and (3>4));`并`$symbol = 2 && (3>4);`使用括号

参考： http: [//php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

# ruby-on-rails - rails 单选按钮标签

> ID：14994964
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:31.207
> 
> 标签：ruby-on-rails, radio-button

我需要帮助。我在数组测验选项中有表单标签按钮。当值答案为 1 时，我需要检查真实答案。

```
<%= radio_button_tag('quiz_en_option[is_answer][]',"1",quiz_option_en.is_answer) %>True 
<!-- <input id="quiz_en_option_is_answer__1" type="radio" value="1" name="quiz_en_option[is_answer][]" checked="checked"> --> 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:18:47.480

[radio_button_tag（名称，值，选中 = false，选项 = {}）](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag)

```
# if quiz_option_en.is_answer is 1 it will get checked else unchecked 
<%= radio_button_tag('quiz_en_option[is_answer][]',"1",quiz_option_en.is_answer.eql?(1) %>True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:56:00.667

我现在得到了真正的答案，名字不应该是数组。

```
 <%= radio_button_tag('quiz_en_option[is_answer]', i.to_s, quiz_option_en.is_answer, id: "answer_" + i.to_s, class: "en-answer-radio" ) %>True 
```

# java - 在执行 xhtml 时出现非法状态异常

> ID：14994965
> 
> 赞同：0
> 
> 时间：2013-02-21T05:08:48.853
> 
> 标签：java, jsf-2, xhtml

我在做一个 jsf 应用程序时遇到了一些异常。这是我的 xhtml 代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"   
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core">

        <f:view> 
            <h:head><title>Index</title></h:head>
                <body>
                <h:form>
                    <h:outputText value="#{login.userName}"></h:outputText><br/>
                    <h:inputText id="userId" value="#{emp.userId}"></h:inputText>
                    <h:commandButton action="#{emp.check}" value="check"/>
                </h:form>
            </body>
        </f:view>   
 </html> 
```

这里的 login 是一个托管 bean。我从 bean 中获取用户名并尝试显示它。emp 是另一个 bean，我在这里给出了 userid。当我在服务器上运行它时，我得到以下异常。

```
Stacktrace:] with root cause
java.lang.IllegalStateException: Component javax.faces.component.UIViewRoot@11a700a not expected type.  Expected: javax.faces.component.UIOutput.  Perhaps you're missing a tag?
    at com.sun.faces.taglib.html_basic.OutputTextTag.setProperties(OutputTextTag.java:126)
    at javax.faces.webapp.UIComponentClassicTagBase.findComponent(UIComponentClassicTagBase.java:686) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:22:15.280

尝试使用此代码！

```
<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
    <ui:composition xmlns="http://www.w3.org/1999/xhtml"   
           xmlns:h="http://java.sun.com/jsf/html"
           xmlns:f="http://java.sun.com/jsf/core"
           xmlns:ui="http://java.sun.com/jsf/facelets">

    <f:view> 
        <h:head><title>Index</title></h:head>
            <body>
            <h:form>
                <h:outputText value="#{login.userName}"></h:outputText><br/>
                <h:inputText id="userId" value="#{emp.userId}"></h:inputText>
                <h:commandButton action="#{emp.check}" value="check"/>
            </h:form>
        </body>
    </f:view>   
</ui:composition> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T06:07:50.203

更新您的代码并`<html>`输入`<f:view>`如下：

```
<f:view>
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

        <html xmlns="http://www.w3.org/1999/xhtml"   
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core">

           //facelet code..

         </html>
</f:view> 
```

# iphone - 使用 NSMutableArray 中的数据填充 UITableView

> ID：14994969
> 
> 赞同：1
> 
> 时间：2013-02-21T05:08:57.810
> 
> 标签：iphone, ios, uitableview, nsmutablearray

我想用我`UITableView`的数据填充我的数据，`NSMutableArray`但它出现了异常。

例外：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryM isEqualToString:]: unrecognized selector sent to instance 0xa2ba880' 
```

我的 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    cell.textLabel.text = [callDetailArray objectAtIndex:indexPath.row];

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];

    return cell;
} 
```

这是数组：

```
Array: (
        {
        callId = 3;
        callKeyword = CALL100;
        callName = "Call to All";
        callNumber = 5908;
    }
) 
```

我想要发生的是，我的单元格`UITaleView`将显示`callId`、和`callKeyword`中的数据。`callName``callNumber`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:14:06.227

在您的`CellDetailArray`数据中`Dictionary`，您可以`NSMutableArray`像下面这样获取详细信息：-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    NSMutableDictionary *d=(NSMutableDictionary*)[callDetailArray objectAtIndex:indexPath.row];
    cell.textLabel.text =[d valueForKey:@"callName"];

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];

    return cell;
} 
```

如果您想在 TableCell 中显示所有四个值，则必须创建具有四个 UIlable 和 Sate 值的 customeCell，例如：-

`YourLable1.text =[d valueForKey:@"callId"];`

`YourLable2.text =[d valueForKey:@"callKeyword"];`

`YourLable3.text =[d valueForKey:@"callName"];`

`YourLable4.text =[d valueForKey:@"callNumber"];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:31:35.900

你使用下面的代码

```
cell.textLabel.text = [[callDetailArray objectAtIndex:indexPath.row]objectForKey:@"callName" ]; 
```

您正在尝试访问字典而不是字符串。callDetailArray 包含字典数据。在字典中只有字符串可用，因此您必须使用 objectForKey 访问它

# qt - QSharedMemory：第二个进程无法附加

> ID：14994970
> 
> 赞同：1
> 
> 时间：2013-02-21T05:09:03.077
> 
> 标签：qt, shared-memory

我有 2 个进程。

第一个使用密钥创建 QSharedMemory。

创建成功，没有返回错误。

在第二个进程中，我尝试连接到共享内存，使用`setKey()`与第一个进程相同的键名，然后尝试`attach()`连接到内存。

`attach()`失败。在共享内存上使用`errorString()`，返回以下字符串：

```
QSharedMemory::handle: doesn't exist 
```

平台是 Windows。

我在这里能错过什么？请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:47:48.873

你看过共享内存的例子吗？

[http://doc-snapshot.qt-project.org/4.8/ipc-sharedmemory.html](http://doc-snapshot.qt-project.org/4.8/ipc-sharedmemory.html)

下面是该示例中的一些代码片段。

这是第一个进程将“大小”缓冲区放入共享内存的操作：

```
if (!sharedMemory.create(size)) {
    ui.label->setText(tr("Unable to create shared memory segment."));
    return;
}
sharedMemory.lock();
char *to = (char*)sharedMemory.data();
const char *from = buffer.data().data();
memcpy(to, from, qMin(sharedMemory.size(), size));
sharedMemory.unlock(); 
```

当第二个进程想要访问共享内存时，会发生以下情况：

```
if (!sharedMemory.attach()) {
    ui.label->setText(tr("Unable to attach to shared memory segment.\n" \
             "Load an image first."));
    return;
}

QBuffer buffer;
QDataStream in(&buffer);
QImage image;

sharedMemory.lock();
buffer.setData((char*)sharedMemory.constData(), sharedMemory.size());
buffer.open(QBuffer::ReadOnly);
in >> image;
sharedMemory.unlock();

sharedMemory.detach();
ui.label->setPixmap(QPixmap::fromImage(image)); 
```

另请注意，在示例中，两个进程都必须正在运行并且仍然具有它们的 QSharedMemory 实例。以下是文档中的描述：

> Windows：QSharedMemory 不“拥有”共享内存段。当所有将 QSharedMemory 实例附加到特定共享内存段的线程或进程都已销毁其 QSharedMemory 实例或退出时，Windows 内核会自动释放共享内存段。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T14:00:23.823

遇到同样的问题。确保当第二个二进制文件尝试附加时 QSharedMemory 对象仍然存在。如果您想阻止运行相同 QT 二进制文件的 2 个实例的能力，只需使用动态内存创建 QSharedMemory 对象，该对象将一直存在到应用程序退出。

# permissions - 避免使用文件夹进行黑客攻击，其 CHMOD 为 777

> ID：14994975
> 
> 赞同：0
> 
> 时间：2013-02-21T05:09:24.797
> 
> 标签：permissions, chmod

我们的网站被黑了，因为一个文件夹有 777 权限，这意味着人们可以在那里上传文件并远程运行脚本。但是，该文件夹需要为 777，因为该站点具有裁剪图像的客户端功能，并且需要将裁剪的图像保存在那里。

如何保护此文件夹并防止黑客入侵？

请告诉我如何做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:44:31.600

CHMOD 777 本质上是不安全的。它仅用于在安装脚本时暂时避免出现问题。安装脚本后，您将其 CHMOD 回 755 之类的内容。为了保护它，您必须更改对全开以外的其他内容的访问权限。

要让用户裁剪图像，我会推荐像[Jcrop这样的传统 javascript 裁剪器](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:38:51.683

我会重新考虑你的设计。您应该限制客户端读取和执行（但不写入）您自己编写的脚本以完成他们需要的特定任务。在脚本中验证您正在对图像文件进行操作，因此它不能用于其他无效图像的文件。不仅要检查文件扩展名，还要检查文件的前几个字节（大多数格式会告诉你它是什么）。文件扩展名很容易更改。

永远不要让用户上传他们自己的脚本以执行到您的服务器。如果你这样做，入侵你将非常容易。如果您有必须能够执行此操作的“高级”用户，请为他们创建自己的用户帐户，该帐户被沙盒到他们自己的环境中。这样他们就不会影响其他用户或您的系统，并且您对他们的行为具有不可否认性（因此，如果他们做了一些愚蠢的事情，您可以追究他们的责任），并且他们打开的任何安全漏洞都将仅限于破坏他们的文件而不是你的。

# c# - 如何使用.net比较两个pptx文件？

> ID：14994976
> 
> 赞同：0
> 
> 时间：2013-02-21T05:09:35.950
> 
> 标签：c#, .net, compare, powerpoint

我想比较两个 .pptx 文件。比较后，我想打印输出，例如更改了哪张幻灯片？任何人都可以对此有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-22T07:52:03.963

您可以将 PPTX 文件重命名为 *.zip 文件，然后提取将包含 xml 和图像文件的内容，以便您可以单独比较这些文件。

这就是 dot net 所能做的一切。

1.  将 *.pptx 文件重命名为 *.zip 使用`System.IO.File.Rename()`
2.  使用任何压缩库将这些 *.zip 文件提取到单独的目录中
3.  提取的内容将包含 XML、Image 和其他文件
4.  遍历子目录和文件并比较两个 pptx 文件的提取内容。

```
\_rels\.rels
\docProps
\docProps\app.xml
\docProps\core.xml
\docProps\thumbnail.jpeg
\ppt
\ppt\_rels
\ppt\media
\ppt\notesMasters
\ppt\notesMasters\_rels
\ppt\notesMasters\notesMaster1.xml
\ppt\notesSlides
\ppt\notesSlides\_rels
\ppt\notesSlides\notesSlide1.xml
\ppt\notesSlides\notesSlide2.xml
\ppt\slideLayouts
\ppt\slideLayouts\_rels
\ppt\slideLayouts\slideLayout1.xml
\ppt\slideLayouts\slideLayout2.xml
\ppt\slideMasters
\ppt\slideMasters\_rels
\ppt\slideMasters\slideMaster1.xml
\ppt\slideMasters\slideMaster2.xml
\ppt\slides
\ppt\slides\_rels
\ppt\slides\slide1.xml
\ppt\slides\slide2.xml
\ppt\tags
\ppt\theme
\ppt\presentation.xml
\ppt\presProps.xml
\ppt\tableStyles.xml
\ppt\viewProps.xml
\[Content_Types].xml
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:30:16.683

[使用Presentation.Export](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint._presentation.export%28v=office.14%29.aspx)方法将每张幻灯片导出为 PNG，使用[此处](https://stackoverflow.com/a/6094092/529282)的答案获取每个图像中的像素值，对它们进行[散列](http://msdn.microsoft.com/en-us/library/s02tk69a.aspx)（很确定你可以只散列一个通道），将这些散列存储为 2 个列表（每个演示文稿一个），然后运行[except](http://msdn.microsoft.com/en-us/library/bb300779.aspx)查询，你得到了唯一幻灯片的哈希值。如果您将图像名称存储为字典键并将散列存储为值，则可以反向查找散列，然后您只需打印这些图像。

编辑：我将您的问题读作“打印幻灯片”。没关系，图像名称应该足以参考原始幻灯片编号

# php - MySQL - 在执行查询时插入额外的空白行

> ID：14994978
> 
> 赞同：0
> 
> 时间：2013-02-21T05:09:55.220
> 
> 标签：php, mysql, row

这是我的程序代码：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', true);

$host           = "localhost";
$user_name      = "usr";
$pwd            = "pwd";
$database_name  = "my2"; //assuming you created this

mysql_connect($host, $user_name, $pwd)or die(mysql_error());
mysql_select_db($database_name)or die(mysql_error());

$datee              = $_POST['datee'];
$time               = $_POST['time'];
$destination        = $_POST['destination'];
$days               = $_POST['days'];
$cab                = $_POST['cab'];
$route              = $_POST['route'];
$full_name          = $_POST['full_name'];
$address            = $_POST['address'];
$mobile_number      = $_POST['mobile_number'];
$pickup_location    = $_POST['pickup_location'];

$query2 = "SELECT `order_number` FROM `count` WHERE 1";
$countQuery = mysql_query($query2)or die(mysql_error());

while($row = mysql_fetch_array($countQuery))
{
    $order_number = $row["order_number"];
}

$query3 = "UPDATE `count` SET `order_number` = '".$order_number."'+ 1 WHERE 1";
mysql_query($query3)or die(mysql_error());

$query1="INSERT INTO booking VALUES     ('".$datee."','".$time."','".$destination."','".$days."','".$cab."','".$full_name."','".$ad       dress."','".$mobile_number."','".$pickup_location."','".$route."','".$order_number."')";
mysql_query($query1)or die(mysql_error());
?>

<html>
<body>
<div style="border:1px solid black;background-color:#FAFA23;width:600px;height:100px;">
<table>
<tr>
<td>
<?php
echo "Your order number is :".$order_number;
?>
</td>
</tr>

<tr align="center">
<td>Thank you for booking, We will contact you soon ! </td>
</tr>
</table>
</body>
</html> 
```

在执行这个程序时，每次都会添加一个额外的行。请告诉我这段代码有什么问题？此外，当我想将列的值增加 1 时，它会增加 2..see-`order_number=order_number+1;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:01:35.483

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors', true);

    $host           = "localhost";
    $user_name      = "usr";
    $pwd            = "pwd";
    $database_name  = "db"; //assuming you created this

    mysql_connect($host, $user_name, $pwd)or die(mysql_error());
    mysql_select_db($database_name)or die(mysql_error());

    $datee              = $_POST['datee'];
    $time               = $_POST['time'];
    $destination        = $_POST['destination'];
    $days               = $_POST['days'];
    $cab                = $_POST['cab'];
    $route              = $_POST['route'];
    $full_name          = $_POST['full_name'];
    $address            = $_POST['address'];
    $mobile_number      = $_POST['mobile_number'];
    $pickup_location    = $_POST['pickup_location'];

    $query2 = "SELECT order_number FROM `count` WHERE 1";
    $countQuery = mysql_query($query2)or die(mysql_error());

    while($row = mysql_fetch_array($countQuery))
    {
        $variable = $row["order_number"];
    }

    $query3 = "UPDATE `count` SET `order_number` = ''".$order_number."'+ 1 WHERE 1";
    mysql_query($query3)or die(mysql_error());

    $query1="INSERT INTO booking VALUES ('".$datee."','".$time."','".$destination."','".$days."','".$cab."','".$full_name."','".$address."','".$mobile_number."','".$pickup_location."','".$route."','".$variable."')";
    mysql_query($query1)or die(mysql_error());
?>
```

我已经在这里更新了你的问题代码，试试看，他们认为它有效。

不要忘记创建`$order_number`变量。

# c# - 功能测试，windows商店应用

> ID：14994979
> 
> 赞同：0
> 
> 时间：2013-02-21T05:09:57.940
> 
> 标签：c#, visual-studio-2012, windows-store-apps, functional-testing

我究竟需要如何运行功能测试 Windows Metro 应用程序的激活工具？我使用 Visual Studio 2012 作为测试平台。我是这个领域的新手，有人可以逐步解释一下这个过程吗？我在 C# 中找到了用于自动化的代码，但未能成功运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T05:51:11.167

如果您正在寻找自动化 Metro 应用程序的工具，请检查[RIATest](http://www.cogitek.com/riatest/features/technologies/windows.html)。

从 6.0 版开始，RIATest 中的一些特性专门针对 Metro 风格的应用程序自动化，特别是：

*   能够始终掌握 Metro UI，让您可以同时查看 Metro 应用程序和 RIATest IDE，并在自动化 Metro 应用程序时最大限度地减少从桌面到 Metro 屏幕的切换。

*   记录在本机 Windows GUI 元素（包括 Metro GUI）上执行的操作。记录器分析您的脚本代码并重用您的变量名称以生成更清晰的记录脚本，类似于您手动编写自动化脚本的方式。

*   Metro UI 中 Windows UI 自动化实施中[此类错误](https://connect.microsoft.com/VisualStudio/feedback/details/779279/ui-automation-tree-is-broken-for-windows-8-store-application)的无缝解决方法。

*免责声明：我在 RIATest 公司 Cogitek 工作。*

# c# - 如何使用 SharePoint 中的 ItemUpdated 事件接收器从另一个列表更新一个列表？

> ID：14994981
> 
> 赞同：1
> 
> 时间：2013-02-21T05:10:08.103
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010

我对 SharePoint 很陌生，并且已经在这方面工作了几天。我能够以某种方式使用 ItemAdded 事件接收器，但我希望如果我更新 List 1，那么使用 ItemUpdated 事件接收器 List 2 也应该得到更新。我在编码部分苦苦挣扎。如何将一个列表中的项目与另一个链接，然后如何更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:08:55.610

这是一个示例“ItemAdded”事件——您的 itemupdating 事件可以与此类似。在此示例中，每当将新项目添加到我的“任务”列表中时，事件接收器都会将类似的项目添加到我的“技能和能力”列表中：

```
 // ITEM ADDED
        public override void ItemAdded(SPItemEventProperties properties)
        {
            base.ItemAdded(properties);

            try
            {
                String curListName = properties.ListTitle;
                if (_applicableLists.Contains(curListName))
                {

                    if (properties.ListItem.ContentType.Name == "Discussion")
                    {

                        if (curListName == "Tasks")
                        {
                            SPList saList = properties.Web.Lists["Skills & Abilities"];
                            SPListItem saItem = SPUtility.CreateNewDiscussion(saList, properties.ListItem["Task Text"].ToString());
                            SPFieldLookupValue taskLookup = new SPFieldLookupValue();
                            taskLookup = new SPFieldLookupValue(properties.ListItem.ID, (string)properties.AfterProperties["Task ID"]);
                            saItem["Task Lookup"] = taskLookup;
                            saItem["Title"] = properties.ListItem["Task Text"].ToString();
                            saItem["Body"] = "Please leave a comment by clicking the Reply link on the right of this message.";
                            saItem[_inStatus] = "New";
                            // perform the update with event firing disabled
                            EventFiringEnabled = false;
                            saItem.Update();
                            EventFiringEnabled = true;

                        }
                    }
                }
            }
            catch (Exception ex)
            {
                // handle exception...
            }
        } 
```

我还敦促您查看 sharepoint.stackexchange.com 站点以了解 SharePoint。祝你好运！

# c# - 如何在两个表中保存外键？- 休眠

> ID：14994982
> 
> 赞同：0
> 
> 时间：2013-02-21T05:10:10.690
> 
> 标签：c#, nhibernate, asp.net-mvc-4

我有两个模型之间存在一对一的关系——RFP 和 Bid。这是相关代码 -

rfp.hbm.xml：

```
<one-to-one name="Bid" class="Bid" property-ref="Rfp" /> 
```

出价.hbm.xml：

```
<many-to-one name="Rfp" class="Rfp" column="RfpId" not-null="true" /> 
```

Rfp.cs：

```
public virtual Bid Bid { get; set; } 
```

投标文件：

```
public virtual Rfp Rfp { get; set; } 
```

当我执行以下操作时 -

```
bid.Rfp = Repository.Get<Models.Rfp>(command.BidDetails.RfpId);
Repository.SaveOrUpdate(bid); 
```

RFP 的外键保存在 Bid 记录中，但 Bid 的外键不保存在 RFP 记录中。结果，我无法通过说获得特定 RFP 的出价`bid.Rfp`- 它返回 null。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:14:23.147

扩大财产

```
private Rfp rfp;
public virtual Rfp Rfp
{
    get { return rfp; }
    set {
        rfp = value;
        if (rfp != null && rfp.Bid != this)
            rfp.Bid = this;
    }
} 
```

# ios - 使用 RestKit 映射空数组

> ID：14994984
> 
> 赞同：1
> 
> 时间：2013-02-21T05:10:14.677
> 
> 标签：ios, objective-c, restkit

基本上，我遇到了与[此处](https://stackoverflow.com/questions/9826310/object-mapping-an-empty-response-with-restkit)描述的相同的问题，但是由于我使用的是较新版本的 RestKit（确切地说是 v0.20.0-rc1），因此我无法使用答案中提到的解决方法。

我正在尝试映射一组视频，只要 JSON 响应中至少有一个对象，它就可以正常工作：

```
"videos": {"video": [
  {
   "id": 7066,
   "name": "firstVideo",
  },
  {
   "id": 7068,
   "name": "secondVideo",
  }
 ]} 
```

当没有视频时，我会收到以下回复：

```
"videos": "" 
```

这会导致我的应用程序崩溃并显示以下消息：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFConstantString 0x17db2d0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key video.' 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:09:16.850

当“videos”标签消失时，会有一个对象数组。不要担心外部数组。为您的服务创建一个映射`"video"`并调用您的服务。它会在映射结果中返回一个数组，可以获取为`[mappingResult array]`

# c# - 距离检查性能

> ID：14994992
> 
> 赞同：0
> 
> 时间：2013-02-21T05:10:39.373
> 
> 标签：c#, performance, xna, distance

在过去的几周里，我一直在学习 C#/XNA 以尝试制作游戏，所以这可能是一个明显的新手问题，但这里有：

我一直在制作一个相当简单的 2D 游戏，所以我有一个大约 1000 个对象（NPC）的列表，并且我非常频繁地迭代它们以对每个对象进行距离检查。问题是当我增加距离时，一切都会大大减慢到无法玩游戏的程度，我真的不明白为什么。

当距离很短时（如果所有对象都在一个 800x480 的世界大小范围内），它工作得很好，但是当它们增加时（例如，8000x4800 的世界大小），我的性能会下降。

这是一些相关的代码（显然，不是全部，因为这将是太多的东西，但这是正在发生的事情的要点）：

```
List<Human> humans;
List<Enemy> enemies;

public void Update(City city, float gameTime)
{
    humans = city.GetHumans();
    enemies = city.GetEnemies();

    for (int h = 0; h < humans.Count; h++)
    {
        Vector2 human_position = humans[h].position;

        Vector2 nearestEnemyPosition = Vector2.Zero;

        for (int e = 0; e < enemies.Count; e++)
            {
                Vector2 enemy_position = enemies[e].position;
                float distanceToEnemy = Vector2.DistanceSquared(human_position, enemy_position);

                if (distanceToEnemy < distanceToNearestEnemy)
                {
                    distanceToNearestEnemy = distanceToEnemy;
                    nearestEnemyPosition = enemy_position;
                }

                if (distanceToNearestEnemy < 2500f)
                {
                     logic code here (very little performance impact)
                }
            }

        for (int hh = 0; hh < humans.Count; hh++)
            {
                if (h == hh)
                {
                    continue;
                }

                if (humanMoved == true)
                {
                    continue;
                }

                Vector2 other_human_position = humans[hh].position;

                if (Vector2.DistanceSquared(human_position, other_human_position) < 100f)
                {
                   do more stuff here (movement code, no performance impact)
                } 
```

对于敌人列表，我也有几乎相同的循环。

制作它们的代码在这里：

```
foreach (Human human in this.humans)
        {
            Vector2 position = new Vector2(random.Next(800), random.Next(480));
            human.Spawn(position);
        } 
```

这工作正常。我得到了 60fps，它非常流畅，一切都运行得很好。但是，如果我这样做：

```
foreach (Human human in this.humans)
        {
            Vector2 position = new Vector2(random.Next(8000), random.Next(4800));
            human.Spawn(position);
        } 
```

一切都坦克，我得到1fps。这看起来很奇怪，更大的数字真的会使 DistanceSquared 函数的计算时间更长吗？为什么？还是有其他可能导致我失踪的原因？

我已经运行了几个性能分析器，但它们没有告诉我任何有用的信息，只是 DistanceSquared 占用了我绝大多数的 CPU 周期。如果它是 800x480 的正常值，那么我的游戏时间只有 38% 用于该循环。当我将数字从 800->8000/480->4800 更改时，我 90% 的时间都花在了循环中。这并不是说有更多的对象要调用，也不是要进行更多的数学运算，而是相同的数学运算，只是数字更大，那么为什么会有如此巨大的差异呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:00:33.733

尝试在计算之前将您的世界标准化为 [0-1,0-1] 并查看它是否有任何影响，这样您的循环代码将完全相同，每个位置都将在 0-1 范围内并计算真实世界位置只是在计算结束时将它们相乘

# perl - 如何使用命令行提取电子邮件？

> ID：14994994
> 
> 赞同：0
> 
> 时间：2013-02-21T05:11:13.117
> 
> 标签：perl, shell, command-line, command

我正在使用以下命令从文件中提取电子邮件：

```
perl -ne'if(/[\w\.\-\_]+@([\w\-\_]+\.)+[A-Za-z]{2,4}/g){print "$&\n"}' database.sql 
```

我需要更改哪些内容才能将结果打印到新文件？

或者，如果您通过命令行有更好的解决方案来提取所有电子邮件，请发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:37:49.097

也许以下使用[Email::Address](http://search.cpan.org/~rjbs/Email-Address-1.898/lib/Email/Address.pm)的选项会有所帮助：

```
perl -MEmail::Address -ne 'print "@a\n" if @a = Email::Address->parse($_)' inFile >outFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:16:39.987

只需将输出重定向到一个文件，如下所示：

```
perl -ne'if(/[\w\.\-\_]+@([\w\-\_]+\.)+[A-Za-z]{2,4}/g){print "$&\n"}' database.sql > somefile 
```

# c# - 当 C# 中的 mysql 出现问题时，我的事务不会回滚？

> ID：14994995
> 
> 赞同：0
> 
> 时间：2013-02-21T05:11:14.917
> 
> 标签：c#, mysql, transactions, mysql-connector

我正在使用 mysql connector6.2.3.0(.net) 从 C# 连接 mysql 5.1。我想一次插入 3 个表。所以，我为此使用事务。假设在将数据插入到我的第三张表，则事务不回滚。数据被插入到前两张表中。

这是我的代码...

```
MySqlDataAdapter da = new MySqlDataAdapter();
 DBUtil cUtil = new DBUtil();
 MySqlConnection mysqlCon=null;
 MySqlTransaction txn = null;

try
{
    mysqlCon = cUtil.getDbConnection();
    txn = mysqlCon.BeginTransaction();

    //1 
    sql = "insert into test_details()";
    da.InsertCommand = new MySqlCommand(sql, mysqlCon,txn);
    da.InsertCommand.ExecuteNonQuery();

    //2
    sql = "insert into task_details()";
    da.InsertCommand = new MySqlCommand(sql, mysqlCon,txn);
    da.InsertCommand.ExecuteNonQuery();

    sql = "select task_id from task_details where test_id='" + testId + "'";
    da.SelectCommand = new MySqlCommand(sql, mysqlCon,txn);
    dt1 = new System.Data.DataTable();
    da.Fill(dt1);
    string task_id = dt1.Rows[0]["task_id"].ToString();

    //3
    sql = "insert into test_evaluators()";
    da.InsertCommand = new MySqlCommand(sql, mysqlCon,txn);
    da.InsertCommand.ExecuteNonQuery();

    txn.Commit();
    mysqlCon.Close();
    da.Dispose();
}
catch (Exception e)
{
    txn.Rollback();
    mysqlCon.Close();
} 
```

我想，最初，我想禁用自动提交......但我不知道我必须在哪里设置这个......

请告诉我这是怎么回事...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:33:31.703

当我们发现这是数据库引擎问题时，您可以使用

```
ALTER TABLE tablename ENGINE = innodb 
```

参考[文档](http://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html)

# ravendb - RavenDB 计算平均值

> ID：14994996
> 
> 赞同：2
> 
> 时间：2013-02-21T05:11:18.523
> 
> 标签：ravendb, average

使用 RavenDB 计算简单平均值的正确方法是什么？

我的对象：

```
class Song 
{
    public int CommunityRank { get; set; }
} 
```

我的第一个天真的想法是，“我将只使用 .Sum！”，但我得到一个运行时错误，说 Raven 出于性能原因没有这样做，这是有道理的。

下一个想法是，“我会做一个计算它的小 map/reduce 索引！” 所以我想出了这个：

```
public Songs_CommunityRankIndex()
{
    Map = songs => from song in songs
                   select new 
                   { 
                       Id = song.Id, // # Hack? I only use this for grouping in the reduce.
                       SongCount = 1, 
                       RankSum = song.CommunityRank
                   };

   Reduce = results => from result in results
                       group result by result.Id into g
                       select new
                       {
                           Id = default(string),
                           SongCount = g.Sum(s => s.SongCount),
                           RankSum = g.Sum(s => s.RankSum)
                       };
}

...
// Now to calculate the average:
var communityRankStats = session
                        .Query<Song, Songs_CommunityRankIndex>()
                        .As<Songs_CommunityRankIndex.Results>()
                        .FirstOrDefault();
                    if (communityRankStats != null)
                    {
                        var averageSongRank = (double)communityRankStats.RankSum / communityRankStats.SongCount;
                    } 
```

我认为这很有效，但感觉很hackish，因为真的没有什么可分组的，所以我只是按歌曲ID分组。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:58:55.893

如果要将所有项目分组以获得单个结果，则只需按常数值分组，例如零。

虽然在客户端做这件事并没有错，但在指数本身内部计算平均值通常很方便。只要总和是由 map/reduce 完成的，那么划分客户端还是服务器端并不重要。

```
public class Songs_CommunityRankIndex : AbstractIndexCreationTask<Song, Songs_CommunityRankIndex.Results>
{
    public class Results
    {
        public long SongCount { get; set; }
        public long RankSum { get; set; }
        public double RankAverage { get; set; }
    }

    public Songs_CommunityRankIndex()
    {
        Map = songs => from song in songs
                        select new
                            {
                                SongCount = 1,
                                RankSum = song.CommunityRank,
                                RankAverage = 0
                            };

        Reduce = results => from result in results
                            group result by 0
                            into g
                            let songCount = g.Sum(s => s.SongCount)
                            let rankSum = g.Sum(s => s.RankSum)
                            select new
                                {
                                    SongCount = songCount,
                                    RankSum = rankSum,
                                    RankAverage = rankSum / songCount
                                };
    }
} 
```

# ios - UISearchDisplayController 显示父 UITableViewController 的标题部分

> ID：14994997
> 
> 赞同：4
> 
> 时间：2013-02-21T05:11:19.263
> 
> 标签：ios, uisearchdisplaycontroller

![在此处输入图像描述](../Images/fe492b4b6275625a79f25b3c3dde57e0.png)我遇到了 UITableViewController 的奇怪问题。我在 UISearchDisplayController 中显示搜索结果。如果我在搜索结果中有一些数据，那很好，但是当我有空结果时，它将显示位于此 SearchDC 后面的 UITableView 部分。对于搜索和普通表视图，我有相同的委托和来源。参考附有帖子的图片（一个在开头，一个在结尾）。我有如下所示的colde：

```
 - (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *pstrHeader = [[NSString alloc] init];
    if(self.isSearchActivated)
    {
        NSInteger count =  [self.parrSearchDataSourceKeys count];
        if(count > 0)
            pstrHeader = [pstrHeader stringByAppendingString:[self.parrSearchDataSourceKeys objectAtIndex:section]];
        else
        {
            pstrHeader = nil;
           [[[UIAlertView alloc]initWithTitle:@"header of section" message:@"Count is zero" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

        }

    }
    else
    {
        NSInteger count = [self.parrDataSourceKeys count];
        if(count > 0)
            pstrHeader = [pstrHeader stringByAppendingString:[self.parrDataSourceKeys objectAtIndex:section]];
        else
            pstrHeader = nil;

    }
    return pstrHeader;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
    // Return the number of sections.
    NSInteger count = 0;
    if(self.isSearchActivated)
    {
        count =  [self.parrSearchDataSourceKeys count];
        if(count <= 0)
        {
            [[[UIAlertView alloc]initWithTitle:@"number of section" message:@"Count is zero" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
        }
    }
    else
        count = [self.parrDataSourceKeys count];
    return count;

} 
```

我对委托和源有相同的类，但在内部它将为普通表视图和搜索结果表视图处理不同的映射和数组。

我还显示如下搜索结果：

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{

    NSString *selectedTitle = [searchBar.scopeButtonTitles objectAtIndex: searchBar.selectedScopeButtonIndex];
    selectedTitle = [self convertStringToEnglish:selectedTitle];
    self.isSearchActivated = YES;

    FolderInfo* searchFolder = [[FolderInfo alloc] init];
    if(self.pmdSearchDataSource != nil)
    {
        [self.pmdSearchDataSource removeAllObjects];
    }
    if(self.parrSearchDataSourceKeys != nil)
    {
        [self.parrSearchDataSourceKeys removeAllObjects];
    }
    NSString* pstrSearchText = [searchBar text];
    NSString* pstrSearchIn = @"Folder";
    if([self.pstrWorkspaceId isEqualToString:@"-1"])
    {
        pstrSearchIn = @"Application";

    }
    else if([self.pstrFolderId isEqualToString:@"-1"])
    {
        pstrSearchIn = @"Project";
    }

    self.pmdSearchDataSource = [[NSMutableDictionary alloc] initWithDictionary:[searchFolder GetSearchListForSubElementFor:pstrSearchText InWorkspaceId:self.pstrWorkspaceId
                                                                                                                InFolderId:self.pstrFolderId forSearchField:selectedTitle In:pstrSearchIn] copyItems:NO ];
    NSArray *keys = [[self.pmdSearchDataSource allKeys] sortedArrayUsingSelector:@selector(compare:)];
    self.parrSearchDataSourceKeys = [[NSMutableArray alloc] initWithArray:keys];

    self.pSearchDC.searchResultsTableView.delegate = self;
    self.pSearchDC.searchResultsTableView.dataSource = self;
    [self.view bringSubviewToFront:self.pSearchDC.searchResultsTableView];
    [self.pSearchDC.searchResultsTableView reloadData];
} 
```

如果最初正常的表格视图在屏幕上可见两个部分，然后我移至 searchResultDC，它将首先显示空白表格，但在我没有结果并重新加载 searchResultDC 表格视图时单击搜索后，它将显示此 searchResultDC 后面的普通表格视图部分

我参考了帖子： [在 UISearchDisplayController 后面重新加载 UITableView](https://stackoverflow.com/questions/3647319/reloading-uitableview-behind-uisearchdisplaycontroller)

但请注意，我也需要搜索结果中的部分，上面帖子中的解决方案是针对我们在搜索结果中没有部分的情况。

如果您需要更多信息，请与我们联系。

![在此处输入图像描述](../Images/7e6e46a0416e9b440ae55af2ba87447e.png)

# html - 如何将 li 内的锚标记的宽度增加到 li 宽度

> ID：14994999
> 
> 赞同：6
> 
> 时间：2013-02-21T05:11:34.897
> 
> 标签：html, css

我有这样的结构

```
 <div class='myClass'>
     <ul>
          <li>
               <a href="myfile.html">My link</a>
          </li>
     </ul>
  </div> 
```

我的`li`有一个固定的。
但是`a`文本并不总是等于`li`宽度
所以可点击区域小于`li`。
我试图通过增加宽度来修复它，`a`但它不起作用。
我怎样才能实现它。
我正在使用以下`css`

```
.tooltipinner ul {
   list-style-type: none;
   margin: 0;
   overflow-y: auto;
   padding: 0;
   width: 305px;
}
.tooltipinner ul li {
    background-color: #BBAEA5;
    background-image: url("../../Images/UIFiles/Menu/SubmenuBg.jpg");
    background-position: left top;
    background-repeat: repeat-x;
    border-top: 1px solid #C1BFBD;
    color: #FFFFFF;
    cursor: pointer;
    float: left;
    font-size: 12px;
    padding-bottom: 4px;
    padding-left: 5px;
    padding-top: 4px;
    width: 199px;
}
.tooltipinner ul li:hover {
    background-color: #BBAEA5;
    background-image: url("../../Images/UIFiles/Menu/SubmenuBgHover.jpg");
    background-position: left bottom;
    background-repeat: repeat-x;
    border-top: 1px solid #C1BFBD;
    cursor: pointer;
    float: left;
    padding-left: 5px;
}
.tooltipinner ul li a {
    color: #000000;
    font-size: 12px;
    font-weight: 400;
    text-decoration: none;
}
.tooltipinner ul li a:link {
    color: #000000;
    min-width: 200px;
    text-decoration: none;
} 
```

我也试图放一个`div`inside`a`但`block`元素不能放在里面`a`。我该如何解决这个问题。

这是一个小提琴
[http://jsfiddle.net/qry45/2/](http://jsfiddle.net/qry45/2/)
[http://jsfiddle.net/qry45/4/](http://jsfiddle.net/qry45/4/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T05:14:41.270

在你的 CSS 中是这样的：

```
.myClass li a {
    width: 100%;
} 
```

如果您使用的是 HTML5 文档类型，并且您在元素上设置了块元素，则可以将块元素放置在内联元素（`<a>`、等）中：`<span>``display: block;``<a>`

```
.myClass li a {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T05:18:43.850

我不确定，但如果你适用`width:inherit;`于所有内部 a，它可以工作

```
li {
    width: 400px;
    border: 1px solid red;
}

li a {
    position: relative;
    width: inherit;
    border: 1px solid green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T14:16:32.267

```
.myClass li a {
    display: flex;
    flex-basis: auto;
    justify-content: center;    
} 
```

使用 flex-basis 显示 flex: auto 将占用整个 li 容器，而 justfy 内容将使文本居中。这项工作也适用于 ie 11。