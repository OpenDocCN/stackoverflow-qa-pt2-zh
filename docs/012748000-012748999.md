# StackOverflow 问答 12748000-12748999

# eclipse - 在 CMD 中运行 RabbitMq

> ID：12748000
> 
> 赞同：2
> 
> 时间：2012-10-05T14:05:01.877
> 
> 标签：eclipse, cmd, rabbitmq, java

我目前正在做可以在rabbitMQ网站上找到的教程，并且在命令提示符（Windows7）中运行程序时遇到了问题。

现在我的客户端库在 Eclipse 中完美运行，即我能够在生产者和消费者等之间发送消息。但是如果我尝试在命令提示符下运行这个程序，我会得到这个：

```
Worker.java:1: error: package com.rabbitmq.client does not exist
import com.rabbitmq.client.Channel;
                      ^
Worker.java:2: error: package com.rabbitmq.client does not exist
import com.rabbitmq.client.Connection;
                      ^
Worker.java:3: error: package com.rabbitmq.client does not exist
import com.rabbitmq.client.ConnectionFactory;
                      ^
etc...... etc..... (this list goes on).... 
```

**现在我已将必要的库（.jar 文件）位置添加到类路径中！**并使用以下命令在命令提示符下编译：

```
javac -cp rabbitmq-client.jar Worker.java 
```

但我仍然遇到这些问题。如果有人可以提供帮助，我将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T00:14:28.757

在尝试运行 RabbitMQ 的示例 rabbitmq-java-client（Linux 机器上的 Netbeans）时，我遇到了类似的问题。即使 Netbeans 中的代码表明包在那里，运行 mnv install 或 javac 也会产生大量错误，例如：

> Send.java:11：错误：com.rabbitmq.client 包不存在导入 com.rabbitmq.client.ConnectionFactory；

我解决了修复目录结构的问题。它们应该如下所示：

```
my-app
|-- pom.xml
`-- src
    |-- main
    |   `-- java
    |       `-- com
    |           `-- mycompany
    |               `-- app
    |                   `-- App.java
    `-- test
        `-- java
            `-- com
                `-- mycompany
                    `-- app
                        `-- AppTest.java 
```

请参阅：[http ://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project](http://maven.apache.org/guides/getting-started/index.html#How_do_I_make_my_first_Maven_project)

我认为这符合 Maven 的要求。

另外，我手工重建了pom。示例 rabbitmq-java-client 中的 pom 缺少所有这些信息：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"> 
```

它只是有

```
<?xml version="1.0"?> 
```

见： [https ://github.com/rabbitmq/rabbitmq-java-client/blob/master/pom.xml](https://github.com/rabbitmq/rabbitmq-java-client/blob/master/pom.xml)

* * *

实际上，我想知道为什么海报在 Eclipse 中这样做。

现在我在这里猜测，但他的 Worker.java 不需要在 IED 中进行编辑。我想知道我们是否都犯了同样的错误。

他们不需要。只需将它们与这些文件放在自己的目录中

```
commons-cli-1.1.jar
commons-io-1.2.jar
rabbitmq-client.jar 
```

然后

```
javac -cp rabbitmq-client.jar Worker.java 
```

然后打开 RabbitMQ 服务器 ( `http://localhost:15672/`)

```
java -cp .:commons-io-1.2.jar:commons-cli-1.1.jar:rabbitmq-client.jar Send 
```

下一个

```
java -cp .:commons-io-1.2.jar:commons-cli-1.1.jar:rabbitmq-client.jar Recv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T18:57:05.580

这来自：[https ://www.rabbitmq.com/tutorials/tutorial-one-java.html](https://www.rabbitmq.com/tutorials/tutorial-one-java.html)

> Java 客户端库
> 
> RabbitMQ 使用 AMQP，这是一个开放的、通用的消息传递协议。有许多不同语言的 AMQP 客户端。我们将使用 RabbitMQ 提供的 Java 客户端。
> 
> 下载客户端库包，并按照说明检查其签名。将其解压缩到您的工作目录并从解压缩的目录中获取 JAR 文件：
> 
> $ unzip rabbitmq-java-client-bin- *.zip $ cp rabbitmq-java-client-bin-* /*.jar ./ （RabbitMQ Java 客户端也在中央 Maven 存储库中，其 groupId 为 com.rabbitmq 和 artifactId amqp 客户端。）

更多详细信息并在此处下载 Java 客户端库：[http ://www.rabbitmq.com/java-client.html](http://www.rabbitmq.com/java-client.html)

# database - 保护 sqlite 数据库不被下载

> ID：12748004
> 
> 赞同：1
> 
> 时间：2012-10-05T14:05:07.150
> 
> 标签：database, sqlite, core-data, encryption, jailbreak

没有解决方案可以防止在越狱 iPhone 中下载预加载的数据库。
[有什么方法可以让你的 SQLite DB 脱离 iPhone？](https://stackoverflow.com/questions/5424330/any-way-to-get-your-sqlite-db-off-iphone)

我认为唯一的方法是**加密预加载的数据库**（可能只加密我们不需要搜索的单个字段内的数据）**并仅在 View 必须显示数据时解密**。
（当然，所有这些都使用个人密钥）

有人知道该怎么做，是否有更好的解决方案？
我正在使用核心数据，但我无法解密 NSString 属性，我只能解密 NSData，但创建一个包含文本加密字符串的数据（BLOB）字段的 sqlite 数据库并不简单。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:23:29.757

也许我找到了解决方案！

我在 iOS5 和 iOS6 上尝试了这段代码，效果很好。现在我可以使用个人关键字加密 NSString 并获得 NSString（使用 AES256 和 Base64 编码）。实际上，代码只需要稍加修改即可与 ARC 一起使用。

[https://github.com/dev5tec/FBEncryptor.git](https://github.com/dev5tec/FBEncryptor.git)

如果有人找到更好的解决方案，请在此处发布。

对于最好的解决方案，如果有一种方法可以从 FileMaker 或其他文件中导出 csv 数据中的加密字段，然后导入到 sqlite 数据库中，那将非常有用。这样我们就可以在 Core Data 中预加载 sqlite db。当视图必须显示在屏幕上时，应用程序可以解密字段。

# tfs - 在团队基础服务器上构建时强制身份验证

> ID：12748010
> 
> 赞同：0
> 
> 时间：2012-10-05T14:05:13.127
> 
> 标签：tfs, tfsbuild

我想知道是否有办法强制用户在 Team Foundation Server 上排队新版本时重新进行身份验证。

现在我们的 Production 和 Staging 构建在同一个 TFS 服务器上。在 Staging 上排队新构建不是问题，但很容易意外地进入生产环境，然后未经测试的更改开始发挥作用。

所以理想的步骤是：

1）右键单击构建。2) 排队新建。3) 重新认证。4) 继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:15:27.200

简短的回答是否定的。您可以在构建定义上设置不同的安全性，但这首先需要使用不同的凭据进行连接。

我的 0.02 美元听起来好像您不是在尝试解决访问问题，而是“哎呀！” 问题。解决此问题的一种简单方法是使您的工作流程依赖于设置为特定值的参数。然后，当构建排队时，如果排队构建的人没有输入值，构建可能会在它离开应用程序层之前被迫“失败”。

# windows - Windows (x86) 程序集将空终止符附加到输入的字符串

> ID：12748013
> 
> 赞同：1
> 
> 时间：2012-10-05T14:05:19.693
> 
> 标签：windows, string, assembly, x86, append

我目前正在尝试将空终止符附加到（a？）用户输入的字符串：

```
.386
.model flat, stdcall

WriteFile PROTO STDCALL:DWORD, :PTR, :DWORD, :PTR DWORD, :PTR OVERLAPPED
ReadFile  PROTO STDCALL:DWORD, :PTR, :DWORD, :PTR DWORD, :PTR OVERLAPPED
GetStdHandle PROTO STDCALL:DWORD

.data
    buff            DB 100h DUP(?)
    stdInHandle     DWORD 0
    bytesRead       DWORD ?

.code
    start:
            ;read string from stdin
            INVOKE GetStdHandle, -10
            MOV stdInHandle, eax
            INVOKE ReadFile, stdInHandle, BYTE PTR[buff], 100, ADDR bytesRead, 0

            ;append null terminator on CR,LF
            MOV eax, bytesRead
            MOV edx, BYTE PTR[buff]
            SUB eax, 2
            AND BYTE PTR [eax+edx], 0
            RET
    END start 
```

它拒绝组装`MOV edx, BYTE PTR[buff]`并给我一个错误：
`error: Invalid combination of opcode and operands (or wrong CPU setting).`

所以我假设我不能`MOV`将值`BYTE PTR[buff]`放入寄存器 edx。所以我什至无法开始测试这种尝试将`NULL`终止符应用于字符串的方法是否有效。

我的问题是，上面的代码有什么问题（我应该使用不同的寄存器而不是 edx 吗？）

`NULL`将终止符应用于字符串 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:37:20.550

您不能将字节值移动到双字大小的寄存器中。您要么需要使用字节大小的寄存器，例如`dl`，要么使用`movzx`. 当您使用字节时，我建议您使用第一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-20T21:21:32.013

当我不得不为字符串创建方法而不使用来自好 ole Irvine 的任何东西时，我得到了字符串的长度，将返回的长度增加了 1（您需要为空终止符包含一个额外的 +1），然后将 0h 添加到指针所在的字符串的末尾，计数器所在的位置。

```
MOV     EAX, SIZEOF lpSourceString + 1      ; Get the string length of string, add 1 to include null-terminator
INVOKE allocMem, EAX                    ; Allocate memory for a target to copy to
LEA     ESI, [lpSourceString]           ; put source address in ESI
MOV     EDI, EAX                        ; copy the dest address to another register we can increment
MOV     ECX, SIZEOF lpSourceString      ; Set up loop counter 
```

我们有字符串的大小。现在我们可以向它添加空终止符。为此，我们需要确保有一个指向字符串末尾的指针。因此，如果我们有一个在 EAX 中返回字符串的方法，EAX 需要指向字符串的开头（所以我们保持`allocMem`不变，而不是在 EDI 中增加一个副本）。假设我们将字符放入字符串中：

```
nextByte:                   ; Jump label, get the next byte in the string until ECX is 0
MOV     DL, [ESI]           ; Get the next character in the string
MOV     [EDI], DL           ; Store the byte at the position of ESI
INC     ESI                 ; Move to next char in source
INC     EDI                 ; INCrement EDI by 1
loop nextByte               ; Re-loop to get next byte

MOV     byte ptr[EDI], 0h   ; Add null-terminator to end of string

; EAX holds a pointer to the start of the dynamically-allocated
; 0-terminated copy of lpSourceString 
```

MOV 需要`byte ptr`大小说明符，因为`[EDI]`内存操作数和`0`直接操作数都不会暗示操作的大小。汇编器不会知道您的意思是字节、字还是双字存储。

我在我的 MASM 中有这个，但是`String_length`由于类要求，我使用了我编写的 stdcall 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:05:29.587

这很常见，以至于 MASM32 运行时提供此功能作为其运行时的一部分。您需要做的就是包含相关代码：

```
include \masm32\include\masm32rt.inc 
```

然后`StripLF`像这样使用函数：

```
invoke StripLF, addr buff 
```

要解决您当前的问题（如果您想手动解决），您需要将地址移动`buff`到`edx`。

```
mov edx, offset buff 
```

# r - 在 igraph 中显示数据框

> ID：12748020
> 
> 赞同：1
> 
> 时间：2012-10-05T14:05:31.580
> 
> 标签：r, igraph

我的数据框被称为

p

```
Impacted_system, Application_Caused_Incident Number_of_Incident                   
Web                  Financials        10                   
PeopleSoft           HR                30
PPP                  PeopleSoft        50 
```

ETC

我喜欢展示 igraph 图，其中包含要影响系统的边缘，边缘有文本以显示受影响的系统和事件数。

我这样做了：

```
g <- graph.data.frame(p)
plot.igraph(g) 
```

我得到带有数字的边图。我很喜欢看 HR、Web 和边缘事件数量等文本。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:20:32.470

这有效：

```
g <- graph.data.frame(p)
plot(g,  layout = layout.fruchterman.reingold,  vertex.label = V(g)$name) 
```

# asp.net - Windows 身份验证 IIS7

> ID：12748022
> 
> 赞同：0
> 
> 时间：2012-10-05T14:05:33.973
> 
> 标签：asp.net, iis-7, windows-authentication

我有一个 ASP.NET 动态数据站点，只有当前登录并在域上的管理员才能访问该站点。我希望网站能够根据用户的登录信息来判断用户是谁，并允许或拒绝访问，而无需质疑凭据。由于动态数据站点的性质，我想确定没有其他人能找到他们的方式，所以我想在 IIS 中而不是 web.config 中管理身份验证和授权。但无论我做什么，它都拒绝以管理员身份访问。

在 64 位 Windows Server 2008 R2 标准机器上使用 IIS7。单击该站点并进入身份验证时，我已禁用除 Windows 之外的所有模式。

所有三个可用的提供程序都按以下顺序启用：

```
Negotiate:Kerberos
Negotiate
NTLM 
```

在授权中，我添加了一个拒绝规则来拒绝匿名用户，然后允许所有用户。最终会改变它以允许角色管理员，但一旦我开始工作，我就可以做到这一点。

我错过了什么？如果重要的话，Web 服务器、域控制器、页面所在的文件服务器都在同一个域中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:08:51.427

您可能想要使用这段代码：

```
Public Function GetGroups() As ArrayList
    Dim groups As New ArrayList()
    For Each group As System.Security.Principal.IdentityReference In System.Web.HttpContext.Current.Request.LogonUserIdentity.Groups
        groups.Add(group.Translate(GetType(System.Security.Principal.NTAccount)).ToString())
    Next
    Return groups
End Function 
```

这将返回当前 Windows 用户所属的所有组，这样您就可以检查 admin 组是否在数组列表中，如果没有则重定向它们。

所以放弃其他访问拒绝/允许并使用它们是否在管理员组中来确定访问。

您需要确保配置文件中包含以下内容：

```
<system.webServer>
...etc
  <security>
...etc
    <authentication>
      <windowsAuthentication enabled="true" />
    </authentication>
...etc
  </security>
...etc
</system.webServer> 
```

# javascript - Kendo combobox.value(x) 无法正常工作

> ID：12748024
> 
> 赞同：1
> 
> 时间：2012-10-05T14:05:40.480
> 
> 标签：javascript, combobox, kendo-ui

我正在尝试动态设置剑道组合框的值，但是在尝试时：

```
var lvl1 = $("#level1Id").data("kendoComboBox");                        
var lvl2 = $("#level2Id").data("kendoComboBox");

var l2value = lvl2.value(); // save value for later use
... // do something that includes changing lvl2.value 
lvl2.value(l2value.toString()); // set lvl2.value back to previous 
```

组合框值设置为“代码”字段 - 例如 - 2，而不是“值/文本”字段 - “l2value 代码的对应值”。我知道， value(x) 需要字符串参数，所以我尝试了不同的转换方法（int->string），但没有运气。我在这里错过了什么吗？动态设置此组合框值对我来说至关重要，因此我们将不胜感激。

编辑：我在第二次设置值之前更改了组合框过滤器。这可能是这里的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:26:01.930

看看这个小提琴：http: [//jsfiddle.net/pvanhouten/qb8rD/1/](http://jsfiddle.net/pvanhouten/qb8rD/1/)。我试图展示如何获取当前选定的文本（苹果）和选定的值（1）。您还可以在文本输入中键入一个值来设置组合框的选定值。如果您输入`apple`，它将`apple`从组合框中选择条目。如果您输入的内容不在组合框列表中，它会将组合框的值设置为该值，并且当前所选项目的 id 和文本都将是您输入的值。这有帮助吗有吗？

# api - 如何在 wordpress 中制作社交分享目标小部件

> ID：12748025
> 
> 赞同：1
> 
> 时间：2012-10-05T14:05:39.597
> 
> 标签：api, wordpress, wordpress-theming, social-networking

我需要像这个网站一样为 wordpress 制作一个共享目标小部件 - [https://www.sevenly.org/](https://www.sevenly.org/) 任何人都可以告诉我如何做到这一点。任何插件或任何方式来获取指定期间的份额总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:54:19.567

我认为目前没有具有此功能的插件，因此您可能不得不亲自动手编写代码。[这是一个关于如何](http://www.internoetics.com/2012/05/16/count-shares-to-facebook-twitter-linkedin-googleplus/)使用一些在 Wordpress 中工作的代码来获取共享数量的教程。我认为这对于插件开发人员来说是个好主意。

# javascript - 按数字突出显示字符

> ID：12748029
> 
> 赞同：9
> 
> 时间：2012-10-05T14:06:04.037
> 
> 标签：javascript, jquery

考虑使用以下字符串及其数值：

![在此处输入图像描述](../Images/2654d8c43e1f602c1ada5d592f5daa62.png)

然后，您允许用户输入文本框：`1|17|7|19`，我将如何突出显示文本，如下所示：

![在此处输入图像描述](../Images/29bbce18b6d90ae801eafe5f02999849.png)

在计算空格和段落时我可以让它工作，但是当我完全删除所有空白和新行（例如“Thisissomedummytext”）时，我无法弄清楚我将如何实现这一点。

**编辑**

[**这**](http://jsfiddle.net/rubeE/)是我到目前为止所拥有的，它考虑了空格和换行符（nl 计为 1 个字符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:24:05.643

我不确定这是否有帮助，但是：

[http://jsfiddle.net/mCsuH/1/](http://jsfiddle.net/mCsuH/1/)

它不是最干净的，而且我不确定您是否使用 jQuery（它可能更容易做到）。我敢肯定会有很多变化，例如此事件发生的方式/时间。为每个 onkeyup 事件完全重建输出可能不是最好的。

更新：

（支持空格）

[http://jsfiddle.net/mCsuH/2/](http://jsfiddle.net/mCsuH/2/)

新更新：

（支持所有空格）

[http://jsfiddle.net/4HFLx/1/](http://jsfiddle.net/4HFLx/1/)

（@eminor 提供的实际解决我之前问题的新逻辑）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:43:47.950

如果有两个索引，一个用于迭代文本，另一个用于计算字符呢？

（我已经分叉了你的小提琴@ianpgall）

[http://jsfiddle.net/FZHuj/1/](http://jsfiddle.net/FZHuj/1/)

```
function update() {
    var text = document.getElementById("orig_input").value;
    var mask = document.getElementById("mod_input").value.split("|");

    var char = 0;
    var result = '';
    for (var i = 0; i < text.length; i++) {
        if (/\s/.test(text[i])) {
            result += text[i];
            continue;
        }

        char++;

        if (mask.indexOf(char) === -1)
            result += text[i];
        else
            result += '<span class="mod">' + text[i] + '</span>';
    }

    document.getElementById("output").innerHTML = result;
} 
```

“char”索引计算有效字符，我们在“mask”数组中查找该索引。

“i”索引用于迭代输入文本。​</p>

# android - 奇怪的 Android.view.InfalteException

> ID：12748032
> 
> 赞同：0
> 
> 时间：2012-10-05T14:06:15.840
> 
> 标签：android, layout

嗨，我开发了一个小应用程序，它包含在仪表板上，可将您发送到一些不同的简单屏幕。我遇到了一个奇怪的问题，我在仪表板上打开应用程序，然后选择一个随机屏幕进行投射。按下返回选择第二个随机选项，如“联系我们”，在第三个选项上，无论我通过的菜单按钮顺序如何，它总是崩溃。

dashBoard.java 类就像 10 个按钮一样简单，它们各自的意图将您带到其他基本屏幕。

仪表盘.java 如下：

```
public class DashBoardActivity extends Activity implements View.OnClickListener{
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        Button soportebt, beneficiosbt, faqbt, twtbt, facebt;
        Button contactobt;
        Button cajerosbt;
        Button consultacuentabt;
        Button indicadoresfinancierosbt;
        Button promocionesbt;
        setContentView(R.layout.mainmenu);

        //inicializar variables de botones
        faqbt = (Button) findViewById(R.id.faqbtm);
        facebt = (Button) findViewById(R.id.twtbtm);
        beneficiosbt = (Button) findViewById(R.id.beneficiosbtm);
        twtbt = (Button) findViewById(R.id.facebtm);
        soportebt = (Button) findViewById(R.id.soportebtm);
        contactobt = (Button) findViewById(R.id.contactobtm);
        cajerosbt = (Button) findViewById(R.id.cajerobtm);
        consultacuentabt = (Button) findViewById(R.id.consultabtm);
        indicadoresfinancierosbt = (Button) findViewById(R.id.indicadoresbtm);
        promocionesbt = (Button) findViewById(R.id.promobtm);

        //click de las variables
        faqbt.setOnClickListener(this);
        beneficiosbt.setOnClickListener(this);
        facebt.setOnClickListener(this);
        twtbt.setOnClickListener(this);
        soportebt.setOnClickListener(this);
        contactobt.setOnClickListener(this);
        promocionesbt.setOnClickListener(this);
        cajerosbt.setOnClickListener(this);
        consultacuentabt.setOnClickListener(this);
        indicadoresfinancierosbt.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.faqbtm:
            Intent intent = new Intent(getApplicationContext(), FAQ.class);
            startActivity(intent);      
            break;
        case R.id.facebtm:
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com/KetanoLab") ) );
            break;
        case R.id.twtbtm:
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/#!/KetanoLab") ) );
            break;
        case R.id.soportebtm:
            Intent intent3 = new Intent(getApplicationContext(), soporte.class);
            startActivity(intent3);
            break;
        case R.id.consultabtm:
            Intent intent7 = new Intent(getApplicationContext(), consultacuenta.class);
            startActivity(intent7);
            break;
        case R.id.beneficiosbtm:
            Intent intent2 = new Intent(getApplicationContext(), beneficios.class);
            startActivity(intent2); 
            break;
        case R.id.contactobtm:
            Intent intent4 = new Intent(getApplicationContext(), contacto.class);
            startActivity(intent4); 
            break;
        case R.id.cajerobtm:
            Intent intent6 = new Intent(getApplicationContext(), cajeros.class);
            startActivity(intent6);
            break;
        case R.id.indicadoresbtm:
            Intent intent8 = new Intent(getApplicationContext(), indicadoresFinancieros.class);
            startActivity(intent8);
            break;
        case R.id.promobtm:
            Intent intent5 = new Intent(getApplicationContext(), promo.class);
            startActivity(intent5);
            break;

        }

    }
} 
```

布局 mainmenu.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bacoprin"
    android:orientation="vertical" >

    <Button
        android:id="@+id/twtbtm"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_toLeftOf="@+id/facebtm"
        android:adjustViewBounds="true"
        android:background="@drawable/tww"
        android:clickable="true"
        android:scaleType="fitStart" />

    <Button
        android:id="@+id/facebtm"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:adjustViewBounds="true"
        android:background="@drawable/face"
        android:clickable="true"
        android:scaleType="fitStart" />

    <Button
        android:id="@+id/faqbtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/promobtm"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnfaq"
        android:clickable="true"
        android:scaleType="fitStart" />

    <Button
        android:id="@+id/promobtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/indicadoresbtm"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnpromo"
        android:clickable="true"
        android:scaleType="fitStart" />

    <Button
        android:id="@+id/beneficiosbtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/consultabtm"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnbeneficios"
        android:clickable="true"
        android:scaleType="fitEnd" />

    <Button
        android:id="@+id/consultabtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/cajerobtm"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnconsulta"
        android:clickable="true"
        android:scaleType="fitEnd" />

    <Button
        android:id="@+id/indicadoresbtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/contactobtm"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnindicadores"
        android:clickable="true"
        android:scaleType="fitEnd" />

    <Button
        android:id="@+id/cajerobtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_above="@+id/contactobtm"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="12dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btncajeros"
        android:clickable="true"
        android:scaleType="fitEnd" />

    <Button
        android:id="@+id/contactobtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="25dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btncontacto"
        android:clickable="true"
        android:scaleType="fitEnd" />

    <Button
        android:id="@+id/soportebtm"
        android:layout_width="175dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="25dp"
        android:adjustViewBounds="true"
        android:background="@drawable/btnemergencias"
        android:clickable="true"
        android:scaleType="fitEnd" />

</RelativeLayout> 
```

仪表板上的每个可绘制按钮都具有以下结构：

btnconsulta.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/consulta" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/consultaapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/consulta" />
<item android:state_enabled="true"
    android:drawable="@drawable/consulta" />
</selector> 
```

显示问题发生的 logCat

```
10-05 10:01:29.490: D/ViewRootImpl(2621): Action[0] ID[0] Pos[105.92644,783.9985]
10-05 10:01:29.550: D/ViewRootImpl(2621): Action[1] ID[0] Pos[99.9306,794.9942]
10-05 10:02:02.100: I/dalvikvm-heap(2866): Grow heap (frag case) to 17.717MB for 3075856-byte allocation
10-05 10:02:02.170: D/dalvikvm(2866): GC_CONCURRENT freed 88K, 7% free 15725K/16811K, paused 4ms+2ms
10-05 10:02:02.230: I/dalvikvm-heap(2866): Grow heap (frag case) to 32.480MB for 12303376-byte allocation
10-05 10:02:02.270: D/dalvikvm(2866): GC_CONCURRENT freed <1K, 4% free 27739K/28847K, paused 5ms+2ms
10-05 10:02:02.500: I/dalvikvm-heap(2866): Grow heap (frag case) to 39.008MB for 309040-byte allocation
10-05 10:02:02.540: D/dalvikvm(2866): GC_CONCURRENT freed 4008K, 14% free 29130K/33711K, paused 2ms+2ms
10-05 10:02:18.010: D/ViewRootImpl(2866): Action[0] ID[0] Pos[151.39487,858.96924]
10-05 10:02:18.090: D/ViewRootImpl(2866): Action[1] ID[0] Pos[153.89313,865.4667]
10-05 10:02:19.050: D/ViewRootImpl(2866): Action[0] ID[0] Pos[181.37404,771.0036]
10-05 10:02:19.140: D/ViewRootImpl(2866): Action[1] ID[0] Pos[183.37265,777.0012]
10-05 10:02:19.190: I/dalvikvm-heap(2866): Grow heap (frag case) to 41.742MB for 4292480-byte allocation
10-05 10:02:19.240: D/dalvikvm(2866): GC_CONCURRENT freed 396K, 10% free 34488K/37935K, paused 2ms+2ms
10-05 10:02:19.260: I/dalvikvm-heap(2866): Grow heap (frag case) to 48.628MB for 7627300-byte allocation
10-05 10:02:19.300: D/dalvikvm(2866): GC_CONCURRENT freed 3K, 8% free 41933K/45423K, paused 2ms+3ms
10-05 10:02:21.080: D/ViewRootImpl(2866): Action[0] ID[0] Pos[223.84454,932.9403]
10-05 10:02:21.180: D/ViewRootImpl(2866): Action[1] ID[0] Pos[222.3456,937.43854]
10-05 10:02:21.300: I/dalvikvm-heap(2866): Grow heap (frag case) to 54.425MB for 3075856-byte allocation
10-05 10:02:21.360: I/dalvikvm-heap(2866): Clamp target GC heap from 66.160MB to 64.000MB
10-05 10:02:21.360: I/dalvikvm-heap(2866): Grow heap (frag case) to 64.000MB for 12303376-byte allocation
10-05 10:02:21.380: D/dalvikvm(2866): GC_CONCURRENT freed 4786K, 13% free 55102K/62767K, paused 2ms+4ms
10-05 10:02:22.650: D/ViewRootImpl(2866): Action[0] ID[0] Pos[199.8612,1071.8861]
10-05 10:02:22.720: D/ViewRootImpl(2866): Action[1] ID[0] Pos[199.36156,1073.3855]
10-05 10:02:22.840: I/dalvikvm-heap(2866): Forcing collection of SoftReferences for 12303376-byte allocation
10-05 10:02:22.860: D/dalvikvm(2866): GC_BEFORE_OOM freed 12808K, 28% free 45325K/62767K, paused 21ms
10-05 10:02:22.900: D/dalvikvm(2866): GC_CONCURRENT freed 12029K, 28% free 45311K/62767K, paused 2ms+3ms
10-05 10:02:24.370: D/ViewRootImpl(2866): Action[0] ID[0] Pos[204.35808,1217.3293]
10-05 10:02:24.480: D/ViewRootImpl(2866): Action[1] ID[0] Pos[208.3553,1217.3293]
10-05 10:02:24.610: I/dalvikvm-heap(2866): Forcing collection of SoftReferences for 12303376-byte allocation
10-05 10:02:24.640: D/dalvikvm(2866): GC_BEFORE_OOM freed 3021K, 28% free 45357K/62767K, paused 23ms
10-05 10:02:24.640: E/dalvikvm-heap(2866): Out of memory on a 12303376-byte allocation.
10-05 10:02:24.640: I/dalvikvm(2866): "main" prio=5 tid=1 RUNNABLE
10-05 10:02:24.640: I/dalvikvm(2866):   | group="main" sCount=0 dsCount=0 obj=0x40c0f460 self=0x1e0fa58
10-05 10:02:24.640: I/dalvikvm(2866):   | sysTid=2866 nice=0 sched=0/0 cgrp=[no-cpu-subsys] handle=1074357512
10-05 10:02:24.640: I/dalvikvm(2866):   | schedstat=( 2316137000 607448000 1407 ) utm=205 stm=26 core=0
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.Bitmap.nativeCreate(Native Method)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.content.res.Resources.loadDrawable(Resources.java:1937)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.View.<init>(View.java:2798)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.ViewGroup.<init>(ViewGroup.java:385)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.widget.LinearLayout.<init>(LinearLayout.java:174)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.widget.LinearLayout.<init>(LinearLayout.java:170)
10-05 10:02:24.640: I/dalvikvm(2866):   at java.lang.reflect.Constructor.constructNative(Native Method)
10-05 10:02:24.640: I/dalvikvm(2866):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.createView(LayoutInflater.java:586)
10-05 10:02:24.640: I/dalvikvm(2866):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-05 10:02:24.640: I/dalvikvm(2866):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:252)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.app.Activity.setContentView(Activity.java:1888)
10-05 10:02:24.640: I/dalvikvm(2866):   at com.ketanolab.banca.movil.generico.soporte.onCreate(soporte.java:32)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.app.Activity.performCreate(Activity.java:4518)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
10-05 10:02:24.640: I/dalvikvm(2866):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
10-05 10:02:24.650: I/dalvikvm(2866):   at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-05 10:02:24.650: I/dalvikvm(2866):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
10-05 10:02:24.650: I/dalvikvm(2866):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 10:02:24.650: I/dalvikvm(2866):   at android.os.Looper.loop(Looper.java:137)
10-05 10:02:24.650: I/dalvikvm(2866):   at android.app.ActivityThread.main(ActivityThread.java:4493)
10-05 10:02:24.650: I/dalvikvm(2866):   at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:02:24.650: I/dalvikvm(2866):   at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:02:24.650: I/dalvikvm(2866):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
10-05 10:02:24.650: I/dalvikvm(2866):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
10-05 10:02:24.650: I/dalvikvm(2866):   at dalvik.system.NativeStart.main(Native Method)
10-05 10:02:24.650: D/AndroidRuntime(2866): Shutting down VM
10-05 10:02:24.650: W/dalvikvm(2866): threadid=1: thread exiting with uncaught exception (group=0x40c0e1f8)
10-05 10:02:24.660: E/AndroidRuntime(2866): FATAL EXCEPTION: main
10-05 10:02:24.660: E/AndroidRuntime(2866): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ketanolab.banca.movil.generico/com.ketanolab.banca.movil.generico.soporte}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.os.Looper.loop(Looper.java:137)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread.main(ActivityThread.java:4493)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at dalvik.system.NativeStart.main(Native Method)
10-05 10:02:24.660: E/AndroidRuntime(2866): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:252)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.Activity.setContentView(Activity.java:1888)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at com.ketanolab.banca.movil.generico.soporte.onCreate(soporte.java:32)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.Activity.performCreate(Activity.java:4518)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
10-05 10:02:24.660: E/AndroidRuntime(2866):     ... 11 more
10-05 10:02:24.660: E/AndroidRuntime(2866): Caused by: java.lang.reflect.InvocationTargetException
10-05 10:02:24.660: E/AndroidRuntime(2866):     at java.lang.reflect.Constructor.constructNative(Native Method)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
10-05 10:02:24.660: E/AndroidRuntime(2866):     ... 23 more
10-05 10:02:24.660: E/AndroidRuntime(2866): Caused by: java.lang.OutOfMemoryError
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.Bitmap.nativeCreate(Native Method)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.content.res.Resources.loadDrawable(Resources.java:1937)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.View.<init>(View.java:2798)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.view.ViewGroup.<init>(ViewGroup.java:385)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.widget.LinearLayout.<init>(LinearLayout.java:174)
10-05 10:02:24.660: E/AndroidRuntime(2866):     at android.widget.LinearLayout.<init>(LinearLayout.java:170)
10-05 10:02:24.660: E/AndroidRuntime(2866):     ... 26 more 
```

注意：对于图像：每个视图背景图像为 40kb，一个按钮的两个图像中的每一个为 9kb 大小。

如果您查看 logcat，奇怪的想法是在崩溃之前分配的内存呈指数增长。还有一个奇怪的想法是，在我的 lg 4x HD 上有 1gb ram 比在我使用 cm7.1 端口的旧 x10 mini 上崩溃得更快。

任何关于如何解决这个问题的想法将不胜感激！

编辑 1：使用 DDMS 堆更新我看到在屏幕之后分配了更多更少的 45.000 个对象，无论是哪个。所以我猜是堆问题

编辑：对于那些想要查看支持类 xml 文件的人来说，这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/fondoemergencia"
    android:orientation="vertical" >

    <Button
        android:id="@+id/lostcardbtn"
        android:layout_width="270dp"
        android:layout_height="58dp"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_marginTop="130dp"
        android:background="@layout/btnstandar"
        android:text="@string/emergencia_lostcardbtn_txt"
        android:textStyle="bold"
        android:typeface="serif" />

    <Button
        android:id="@+id/callpolicebtn"
               android:layout_width="270dp"
        android:layout_height="58dp"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_marginTop="17dp"
        android:background="@layout/btnstandar"
        android:text="@string/emergencia_callpolicebtn_txt"
        android:textStyle="bold"
        android:typeface="serif" />

    <Button
        android:id="@+id/callhospitalbtn"
               android:layout_width="270dp"
        android:layout_height="58dp"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:layout_marginTop="17dp"
        android:background="@layout/btnstandar"
        android:text="@string/emergencia_callhospitalbtn_txt"
        android:textStyle="bold"
        android:typeface="serif" />

</LinearLayout> 
```

# mysql - MySql，使用 LIKE 查找确切的字符串

> ID：12748038
> 
> 赞同：1
> 
> 时间：2012-10-05T14:06:28.233
> 
> 标签：mysql

我的一个表有一个名为 MembersList 的字段，它是以`LASTNAME/FIRSTNAME.MIDDLENAMEorMIDDLEINITIAL`分号分隔的格式的名称列表`(;)`。例子：

`DOE/JOHN.PETER;SMITH/ANDREW.K;FORD/HENRY.GEORGE`

现在一个单独的记录可能包含 name `DOE/JOHN.P`，但是这个人可能`DOE/JOHN.PETER`和上面的例子不一样，他的 P 可能代表 Paul 或 Philip，但是我们服务的用户输入了他`DOE/JOHN.P`。

如果我说

```
SELECT * FROM Events WHERE MembersList LIKE '%DOE/JOHN.P%' 
```

我会得到记录`DOE/JOHN.P`以及`DOE/JOHN.PETER`不是我想要的记录。在`DOE/JOHN.P`这种情况下，应该将其视为他的中间首字母实际上是 P 并且只有 P。我尝试删除第二个`%`，但它没有返回任何内容。我应该是什么`LIKE`样子？？

这有意义吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:12:39.907

您需要测试四个条件：

```
SELECT * FROM Events
WHERE MembersList = 'DOE/JOHN.P'
WHERE MembersList LIKE 'DOE/JOHN.P;%'
WHERE MembersList LIKE '%;DOE/JOHN.P'
WHERE MembersList LIKE '%;DOE/JOHN.P;%' 
```

或者，如果您可以确定字符串中没有逗号，则可以使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

```
SELECT * FROM Events
WHERE FIND_IN_SET('DOE/JOHN.P', REPLACE(MembersList, ';', ',')) 
```

不幸的是，FIND_IN_SET 仅适用于逗号分隔的列表，因此您必须在使用前将分号转换为逗号。

所有这些解决方案都会很慢。如果您可以将成员维护在单独的表中（正确规范化），并且仅在需要时建立以分号分隔的列表，那就更好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:12:40.227

```
SELECT * 
FROM Events 
WHERE MembersList = 'DOE/JOHN.P' 
    or MembersList LIKE 'DOE/JOHN.P;%' 
    or MembersList LIKE '%;DOE/JOHN.P;%' 
    or MembersList LIKE '%;DOE/JOHN.P' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T14:14:38.963

这是一种方法：

```
SELECT * FROM Events WHERE CONCAT(';',MembersList,';') LIKE '%;DOE/JOHN.P;%' 
```

这里的诀窍是我们正在寻找分号分隔符，并且我们在我们正在搜索的字符串中添加一个前导和尾随分隔符。

或者，您可以避免添加前导和尾随分隔符，并在四个条件下进行测试。作为字符串中的中间元素，字符串中的第一个元素，字符串中的最后一个元素，以及字符串中唯一的元素：

```
LIKE '%;foo;%'
LIKE 'foo;%'
LIKE '%;foo'
LIKE 'foo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T14:12:20.337

您可以使用正则表达式而不是 like 检查名称是否以分号结尾或字符串是否在末尾

```
SELECT * FROM Events WHERE MembersList REGEXP 'DOE/JOHN\.P(;|$)' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:13:04.453

是`%`通配符。因此，如果您将它放在字符串 ( `Doe/John.P%`) 的末尾，它将找到以 P 结尾的任何内容以及该 P 之后的任何内容。

[http://www.w3resource.com/sql/wildcards-like-operator/wildcards-like-operator.php](http://www.w3resource.com/sql/wildcards-like-operator/wildcards-like-operator.php)

因此，如果您正在使用`LIKE(%..%)`语法并想要区分：`LIKE 'DOE/JOHN.P'`和`LIKE 'DOE/JOHN.PETER'`您不能在之后放置通配符，`P`因为这将`DOE/JOHN.P`获取字符串中的任何内容。

`%DOE/JOHN.P%`会拿起两个`.P`和`.PETER`

`%DOE/JOHN.P`会捡起任何以 a*结尾的东西*`p`

* * *

您可以将它们组合成一个`or`语句：

`LIKE ... OR LIKE....`并同时找到两者。

我建议`=`改用。

# c# - 从基色开始创建调色板

> ID：12748042
> 
> 赞同：0
> 
> 时间：2012-10-05T14:06:34.723
> 
> 标签：c#, asp.net, color-scheme

我需要在网站上实现主题（用 ASP.net MVC 制作）。

这个想法是用户选择一种颜色（基色），我必须从中生成：

*   悬停状态颜色（浅 40%）
*   按下状态颜色（浅 20%）
*   较深的颜色（深 20%）

我试图进行实施，但我意识到这无法正常工作。

如果用户使用较浅的颜色，则悬停状态将变得几乎不可见。

搜索互联网我发现这个[链接](https://stackoverflow.com/questions/4595475/programming-a-simple-color-scheme-generator)似乎是我正在寻找的，但我找不到一个真实的例子。

是否有任何项目或示例可以实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:19:17.407

您可以使用 JavaScript 在客户端执行此操作。

建议方法：

1.  使用 RGB 值选择基色。
2.  将 RGB 转换为 HSL
3.  增加和减少 HSL 亮度
4.  将 HSL 转换回 RGB
5.  将 RGB 转换为与 CSS 兼容的十六进制并在您的主题中使用。

要进行 HSL / RGB 转换，您可以使用以下命令：

[http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript](http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript)

这是一个示例，您可以修改以将 RGB 值转换为十六进制

[如何在 JavaScript 中将十进制转换为十六进制？](https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript)

这里也是关于颜色的 W3Schools 页面。也许与您的问题没有直接关系，但可能仍然有用

[http://www.w3schools.com/cssref/css_colors.asp](http://www.w3schools.com/cssref/css_colors.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:24:23.373

诀窍是不要让用户从完整的 RGB 空间中选择随机颜色。相反，让他们只通过色调选择一种基色，并为自己设置饱和度和亮度。该类`Color`本身已经具有检索这些值的方法，但缺乏从这些值创建颜色的支持。这可以通过[这个答案](https://stackoverflow.com/a/3837824/57488)来实现。

使用这种方法，您只需让用户只选择基色，这样您就可以确保可以使用较浅和较深的颜色。[在配色方案设计器](http://colorschemedesigner.com/)（您可能已经知道）中可以看到如何做到这一点的令人印象深刻的方法。他们也只能在第一步中选择色调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:02:03.480

尽管下面的示例有效，但您需要对颜色的数学有一些了解才能使其正常工作（如果颜色太亮、太暗、什么是色相等等）。

我找到了另一种方法，这正是我所需要的。这是[链接](https://stackoverflow.com/questions/7255514/generating-colours-after-applying-opacity-of-black-and-white)。

它将基色与不透明度为 50% 的白色混合，使颜色更浅。

# pdf - 为什么显示运算符的 PDF 文本不显示空格？

> ID：12748043
> 
> 赞同：1
> 
> 时间：2012-10-05T14:06:42.943
> 
> 标签：pdf, fonts, quartz-2d, cgpdfdocument

我正在使用 Apple 的 Quartz 框架解析 PDF。我输入的显示运算符的文本 (Tj, TJ, ', ") 没有为某些字体显示空格。你知道为什么会发生这种情况吗？我的想法只是因为 PDF 文件是这样制作的。但这里有另一个问题: 预览之类的应用程序如何检测该 PDF 文件中的空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:10:01.727

很多时候，PDF 中的一段文本中没有“空格”之类的东西，有时甚至没有单词。您可能只有放置在特定位置的字体字形。

# c++ - 如何调试外部调用的 C++ 可执行文件

> ID：12748047
> 
> 赞同：2
> 
> 时间：2012-10-05T14:06:47.717
> 
> 标签：c++, debugging, fortran, executable

我在网上寻找解决方案，我认为这是可以做到的，但我似乎找不到可行的方法来做到这一点。我继承了一些构建到可执行文件中的源代码。可执行文件由 C++ 和 Fortran 库组成。该文件放置在另一个程序调用可执行文件的模拟器环境中。我需要调试一些逻辑错误。除非其他程序调用它，否则可执行文件无法运行。我怎样才能让其他程序调用它并仍然访问 VS 调试器的功能。

捷运

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:08:24.237

VS Debugger has `Debug -> Attach to process`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T14:09:09.407

If I understood well your question you need to go in VS in Debug-->Attach to Process

# perl - 为什么'1'被映射到perl中的散列？

> ID：12748048
> 
> 赞同：2
> 
> 时间：2012-10-05T14:06:53.573
> 
> 标签：perl, hash, mapping

我有一些像这样的代码：

```
print "key $_ - $hJobT{$_}\n" foreach keys %hJobT;
%hJobT = map { $_ => 1 } %hJobT;
print "key $_ - $hJobT{$_}\n" foreach keys %hJobT; 
```

当我运行程序并打印结果时，我得到：

```
key office - 1
key recon - 1
key office - 1
key 1 - 1
key recon - 1 
```

前两个结果来自第一个打印语句并且是预期的。

该`key 1 - 1`部分不是预期的。

澄清一下 - 代码在一个循环中，当它迭代时，键值在某些条件下会增加。出于测试目的，我在循环末尾放置了一个退出语句，因此它只显示第一次迭代结果，因此它们是“1”。（就好像我没有毫无意义地将 1 映射到 1。）关于为什么我得到 1-1 映射的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T14:11:21.880

哈希是一个偶数列表。因此，在列表上下文中使用它时，您将获得所有这些键和值：

```
@list = qw(a b);
%hash = @list;   # valid!
@list = %hash;   # valid, but bad style. And the ordering may change 
```

因此，当您将哈希用作 arg 时`map`，您创建了以下列表：

```
(
   office => 1,
   1      => 1,
   recon  => 1,
   1      => 1
) 
```

因为`map`看到

```
("office", 1, "recon", 1) 
```

因为它是列表参数。

# php - 使用ajax将信息传递给PHP

> ID：12748054
> 
> 赞同：1
> 
> 时间：2012-10-05T14:07:08.730
> 
> 标签：php, jquery, .post

我制作了一个 js 函数来使用 ajax 从数据库中删除数据。它非常基本，但我想在添加其他任何内容之前让它工作，功能如下：

```
function removeAd(ad_id) {

    $.post('remove.php', {id: ad_id});

}; 
```

我使用 php 构建页面并创建使用此功能的链接：

```
<ul id='categoryorder'>

<?php while ($item = mysqli_fetch_array($r)) { ?>

<li id="advert_<?php echo $item['display_id'] ?>"><div class="<?php echo $item['ad_type']?>"><a href="javascript:removeAd('<?php echo $item['display_id'] ?>')" >Remove</a></div></li>

<?php } ?> 

</ul> 
```

它可以很好地构建页面并在具有 javascript:removeAd(id) 的 href 的 div 中创建删除链接，其中 id 是与数据库中该 div 相关的 id，例如：

```
<li id="advert_5"><div class="banner"><a href="javascript:removeAd('5')" >Remove</a></div></li> 
```

最后，这应该发送到 remove.php 脚本，该脚本实际上从数据库中删除具有该 ID 的条目

```
<?php

require ('Mysql_Connect.php');

if ($_SERVER['REQUEST_METHOD'] == 'POST') {

    $q = "DELETE FROM st_display WHERE display_id = {$_POST['id']}";
    $r = @mysqli_query ($dbc, $q);

}

?> 
```

我对此很陌生，所以我已经准备好被告知我犯了一个愚蠢的错误，或者这永远不会奏效！但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:18:14.613

您的查询非常适合良好的 SQL 注入。
但这不是这里的重要性，如果您尝试这样做`echo $q`，它会返回一些东西吗？在你之前
做一个，看看你是否也发送数据。`console.log(ad_id);``$.post`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:18:31.410

你在陈述`;`的最后不见了，`echo`

```
<li id="advert_<?php echo $item['display_id']; ?>"><div class="<?php echo $item['ad_type']; ?>"><a href="javascript:removeAd('<?php echo $item['display_id']; ?>')" >Remove</a></div></li> 
```

# list - 有没有可能实现这个功能？

> ID：12748055
> 
> 赞同：5
> 
> 时间：2012-10-05T14:07:10.160
> 
> 标签：list, function, haskell

我想要一个`q`类型的函数：

```
q :: ([b] -> b) -> ([(a, b)] -> (a, b)) 
```

它采用一个从列表中选择单个元素的函数，并将该函数提升到从一对列表中选择单个对的上下文中（完全忽略对的第一个元素）。

甚至可以编写这样的函数吗？我无法在这方面取得任何进展。

[*“提升”是正确的词吗？]

* * *

使用示例：如果我有一个功能：

```
safeMaximum :: b -> [b] -> b

> safeMaximum 18 [] 
18
> safeMaximum 18 [4,5,1,4,3]
5 
```

然后我想使用`safeMaximum`从对列表中获取第二个元素最大的对：

```
liftedSafeMaximum :: (a, b) -> [(a, b)] -> (a, b)
liftedSafeMaximum val = q val safeMaximum

liftedSafeMaximum ("?", 3) []
> ("?", 3)
liftedSafeMaximum ("?", 3) [("xyz", 1), ("123", 3), ("hi", 2)]
> ("123", 3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:38:34.663

如果您愿意稍微改进您对选择器函数的定义，您可以获得类似的工作。我们将有一个多态函数，而不是直接从列表中选择一个元素，给定一个允许它查看每个元素感兴趣的部分的投影，它将从列表中选择一个项目。

那么所要做`q`的，就是把它`snd`当作投影来使用。

```
{-# LANGUAGE Rank2Types #-}

import Data.Ord (comparing)
import Data.List (maximumBy)

q :: (forall c. (c -> b) -> c -> [c] -> c) -> (a, b) -> [(a, b)] -> (a, b)
q select = select snd

safeMaximumOn :: Ord b => (a -> b) -> a -> [a] -> a
safeMaximumOn proj x xs = maximumBy (comparing proj) (x:xs)

liftedSafeMaximum :: Ord b => (a, b) -> [(a, b)] -> (a, b)
liftedSafeMaximum = q safeMaximumOn 
```

[这与我之前的回答](https://stackoverflow.com/questions/9324862/how-to-let-a-function-a-a-operate-on-a-int/9325094#9325094)基本相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:13:43.410

您将此描述为想要“将功能提升到上下文中”，所以让我们看看它的含义。从所需的类型开始：

```
q :: (a, b) -> ([b] -> b) -> ([(a, b)] -> (a, b)) 
```

...我们可以乐观地抽象出所需的上下文：

```
q :: f b -> ([b] -> b) -> ([f b] -> f b) 
```

假设这`f`是一个`Functor`——在激励的例子中就是这样——我们可以提升`[b] -> b`到`f [b] -> f b`. 如果我们有一个 type 的函数，我们可以从它得到所需的类型`[f b] -> f [b]`，它看起来很像`sequence`.

`f`考虑一下is的情况`((->) a)`：给定一个函数`[b] -> b`和一个列表`[a -> b]`，我们可以返回一个函数`a -> b`，它将其类型的参数应用于`a`列表中的每个函数，使用选择器函数，然后返回类型的结果`b`。这听起来像你所追求的！

不幸的是，它不适用于您的特定示例-`Monad`涉及的是 writer monad，它将添加一个`Monoid`约束并始终返回列表中每个值`a`的 monoid 总和。`a`

它失败的原因是我们只有一个不透明的`b`值选择函数，必须在没有任何上下文的情况下使用它，这需要使用类似`sequence`提取（并在过程中合并）所有单独的上下文的东西。要编写所需的函数，您需要一种方法来合并上下文，而不会丢失将上下文与每个元素相关联的信息。

reader monad 可以在其他人不使用的地方工作，因为所涉及的“合并”过程是唯一的——将单个参数应用于多个函数是基于对 and 给出的规范 comonoid 的逆变使用`\x -> ()`，`\x -> (x, x)`其中每个结果元素唯一地确定原始输入.

为了在协变位置获得相同的属性，我们需要一个幺半群，其中每个输入元素唯一地确定结果和，这意味着每个输入必须相同，这意味着它们必须是只有一个值的类型。基于此，我们确实可以编写一个类型稍微受限的函数版本：

```
q' :: ([b] -> b) -> ([((), b)] -> ((), b)) 
```

但我想这不是很令人满意。:]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T14:38:02.837

有了新的签名/界面，现在这不是微不足道的吗？

```
import Data.List (elemIndex)

q v f [] = v
q v f xs = let ys = map snd xs; x = f (snd v) ys in
           case elemIndex x ys of Just i -> xs !! i ; _ -> v 
                                               -- or (fst v, x) if you prefer 
```

`safeMaximum`没有`Ord`约束就没有，对吧？那么这是一个遗漏，还是设计使然？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T15:05:49.167

我不相信这是可能的有意义的方式。由于这只是直觉，我无法证明，我只举一个反例：

假设我有这个功能`sum :: Num a => [a] -> a`。我可以将其应用于列表：

```
sum [1 .. 4]
> 10 
```

但是，假设我想应用我的 'lifted' `sum`：

```
liftedSum [("abc", 1), ("def", 2), ("ghi", 3), ("jkl", 4)]
> (??WTF??, 10) 
```

应该有什么有意义的价值`??WTF??`？我想不出一个。

问题是我将其解释`[b] -> b`为“选择一个”，而实际上，它也可能意味着“聚合”。正如我试图做的那样，没有任何有意义的方法可以将聚合函数“提升”为元组。

但另一个问题是，即使意味着“选择一个” ，如果存在重复值`[b] -> b`，您也不能使用它来唯一地选择 from 。例子：`[(a, b)]``b`

```
liftedMax [("abc", 1), ("def", 2), ("ghi", 2)]
> (>> is this "def" or "ghi"? <<, 2) 
```

所以我不认为我的功能可以合理地实现，而且我认为 Haskell 的类型系统让我很难在脚下射击自己，这很酷。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T15:21:13.803

没有那个确切的类型签名，不。例如，如果您选择`type b = Double->Double`并且您的函数`[b]->b`是`foldr (.) id`，那么您的多态函数`q` *不能*使用那里产生的值从对中进行选择，但我认为这会将您的问题误解为寻求特定类型的 sig，而不是提升/提升选择方式从元素到对。

## 解决原始选择问题

如果您的原始函数仅用于从列表中选择一个元素，您可以告诉 Haskell 如何在两者之间进行选择。

这个解决方案是安全的，因为它通过使用辅助函数强制使用原始列表或后备元素中的选择`b -> b -> Bool`，其中`True`表示您更喜欢第一个参数。

我们可以使用它从一对中进行选择：

```
selectPair :: (a -> a -> Bool) -> (a,c) -> (a,c) -> (a,c)
selectPair f (a,c) (a',c') 
    | f a a'    = (a,c)
    | otherwise = (a',c') 
```

然后折叠以从列表中选择：

```
selectList :: (a -> a -> Bool) -> (a,c) -> [(a,c)] -> (a,c)
selectList f = foldr (selectPair f) 
```

请注意，这不需要 type 上的任何实例`a`，因此可能是您在一般设置中所需要的。

## 解决最大问题

当然`(b -> b -> Bool)`感觉很像`>`来自一个`Ord`实例，并且您的示例使用了一个建议最大值的函数，但是如果您有一个 Ord 实例，那么使用 import`Data.List`和`Data.Function`执行将是最简单的

```
safePairMaximum :: Ord b => (a, b) -> [(a, b)] -> (a, b)
safePairMaximum m bs = maximumBy (compare `on` snd) $ m:bs 
```

这是[hammar 解决方案](https://stackoverflow.com/questions/12748055/is-it-possible-to-implement-this-function/12749595#12749595)的一部分的更基本、更不酷的版本。

## 也许你被 [b]->b 卡住了，但是在 b 上确实有相等性

这与我认为合理的类型签名一样接近，同时仍然解决了您陈述的问题：如果使用选择功能`::[b]->b`至关重要，那么您至少需要一个`Eq`上下文：

```
chooseLike :: Eq b => (a, b) -> ([b] -> b) -> ([(a, b)] -> (a, b))
chooseLike m selectb pairs = let wanted = selectb $ map snd pairs in
    case filter ((==wanted).snd) pairs of
      [] -> m
      (p:_) -> p 
```

（您当然可以`Eq`用参数替换上下文`(b -> b -> Bool)`，这一次表示相等。）

这并不理想，因为您将`[b]`列表单独遍历到`[(a,b)]`列表，这似乎效率低下。

## 结论

尽管我相信没有与您指定的类型完全相同的有用功能，但*有*多种方法可以解决您所说的问题。这是一个有趣的问题，谢谢。

# ruby-on-rails - 是否可以使用具有两个能力等级的康康

> ID：12748056
> 
> 赞同：6
> 
> 时间：2012-10-05T14:07:12.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我正在使用 rails 3.0.9、cancan 1.6.7 并设计 1.4.8

我正在使用两个设计模型（用户和管理员）进行不同的登录和注册过程

所以我想根据登录用户（资源）来划分能力，因为有 70 多个模型，两种类型的用户只有 10 个模型是通用的（这里 50 多个模型和视图仅供管理员用户使用)

我想实现两个能力类（UserAbility 和 AdminAbility），并且设计辅助方法 current_user/current_admin 应该传递给 UserAbility/AdminAbility

例子：

在 ApplicationController.rb 文件中

```
 def current_ability
        if current_user
            @current_ability = UserAbility.new(current_user)
        elsif current_admin
            @current_ability = AdminAbility.new(current_admin)
        end
    end 
```

从上面我的问题，

1.  在cancan中是否可以使用多种能力类，如果可能，那么如何创建它，因为我尝试过

    `rails g cancan:user_ability`

    但我收到错误，因为**找不到生成器 cancan:user_ability**。

2.  如何为登录的用户/管理员选择合适的能力等级。

3.  如果用户和管理员都访问了控制器，那么如何获取当前登录的用户/管理员的对象

有没有其他解决方案？

任何人请帮助解决这个问题

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T14:36:15.393

...也就是说，如果您愿意，可以直接使用多种能力模型：

```
class UserAbility
  include CanCan::Ability

  def initialize(user)
    can :read, :all
  end
end

class AdminAbility
  include CanCan::Ability

  def initialize(admin)
    can :manage, :all
  end
end

class ApplicationController < ActionController::Base
  # overriding CanCan::ControllerAdditions
  def current_ability
    if current_account.kind_of?(AdminUser)
      @current_ability ||= AdminAbility.new(current_account)
    else
      @current_ability ||= UserAbility.new(current_account)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T14:29:23.310

您不需要多个能力课程：

```
class Ability
  include CanCan::Ability

  def initialize(user_or_admin)
    user_or_admin ||= User.new

    common_rules(user_or_admin)

    if user_or_admin.kind_of? Admin
      admin_rules(user_or_admin)
    else
      user_rules(user_or_admin)
    end
  end

  def common_rules(user_or_admin)
    # can :verb, :noun
  end

  def admin_rules(admin)
    can :manage, :all
  end

  def user_rules(user)
    can :read, :all
  end
end 
```

CanCan 最终将`Ability.new()`使用任一模型调用，但这很好，因为您可以检查收到的对象类型。当然，如果您愿意，您可以委托给其他对象；这一切都只是红宝石。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-10T21:31:46.753

我已经实现了[@willgiynn](https://stackoverflow.com/a/12748560/5803973)解决方案的一部分，修改了**application_controller.rb**`current_ability`中的方法。

 **在**能力.rb**上：

```
class UserAbility
  include CanCan::Ability

  def initialize(user)
    can :read, :all
  end
end

class AdminAbility
  include CanCan::Ability

  def initialize(admin)
    can :manage, :all
  end
end 
```

在**application_controller.rb上**

```
def current_ability
  @current_ability ||= current_admin ? AdminAbility.new(current_admin) : UserAbility.new(current_user)
end 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-14T08:30:00.437

我会补充一下[willgiynn 的回答](https://stackoverflow.com/a/12748459/3480449)。看来我必须添加更多代码才能使其正常工作。[我从这篇文章](https://stackoverflow.com/a/23772257/3480449)中找到了答案

将以下内容添加到*application_controller.rb*

```
 def current_ability
    if admin_signed_in?
      @current_ability ||= Ability.new(current_admin)
    else
      @current_ability ||= Ability.new(current_user)
  end
end 
```**

# android - 从 RFID 阅读器读取隐藏的 Edittext

> ID：12748058
> 
> 赞同：1
> 
> 时间：2012-10-05T14:07:19.770
> 
> 标签：android, android-edittext, rfid

我正在使用一个 android 应用程序并且有这个烦人的问题:)

登录屏幕：用户使用他的令牌和连接到平板电脑的 rfid 阅读器登录。我的登录布局中有一个 EditText 字段，用户可以扫描他的令牌。一切正常。但我根本不知道如何隐藏 EditText 字段，因此用户令牌的值不会显示在屏幕上。我试图将可见性设置为 false，但是这些值没有存储在 EditText 中。有人可以帮我提供一个最佳实践示例。我只是想从 rfid 阅读器（或键盘，相同的原理）读取 8 个字符并能够读取此值。

谢谢图兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:11:39.307

如果您的阅读器使用键盘仿真驱动程序，请在您的活动中拦截 onKeyDown/Up 以将它们重定向到隐藏的 EditText。

另外，为什么要隐藏令牌的值？如果它充当键盘，则在任何文本输入字段上使用阅读器都会显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:13:50.320

为什么不直接将 EditText 的输入类型设置为 textPassword，这样字符就被隐藏了？将此属性添加到 XML 中的 EditText：

```
android:inputType="textPassword" 
```

如果您根本不希望 EditText 可见，您也可以将 layout_height 和 layout_width 设置为 1px。虽然，这是一个有点骇人听闻的解决方案。

# php - 使用 PHP 确定引用者

> ID：12748061
> 
> 赞同：0
> 
> 时间：2012-10-05T14:07:28.773
> 
> 标签：php, redirect

我有一堆 HTML 页面，每个页面上都有一个表单供用户订阅时事通讯。此表单提交给 subscribe.php 在这里我想确定用户来自的页面并将其重定向到同一页面。

```
header("Location: " . $_SERVER['HTTP_REFERRER']); 
```

给我一个错误

![在此处输入图像描述](../Images/a4a8f32409bfb9ef380bc1e0c7911abe.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:12:08.480

拼写错误，关联名称为`HTTP_REFERER`.

这会生成一个重定向到“”，这是同一页面，因此永远循环并导致错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T14:10:48.527

尝试验证`$_SERVER['HTTP_REFERRER']`没有指向包含此代码的 url，在这种情况下，除了创建无限循环之外，请执行其他操作。

它也应该`$_SERVER['HTTP_REFERER']`与一个 R 一起使用，您可能希望在严格的环境中测试您的代码，这实际上会给您一个错误，因为您的代码可能会抛出一个未定义的索引通知，然后返回 null ，它作为一个空字符串转换到该位置，它重定向到自己。

# scala - Scala Map[String,Seq[String]] 到 java.util.Map 的高效转换 >

> ID：12748062
> 
> 赞同：3
> 
> 时间：2012-10-05T14:07:29.247
> 
> 标签：scala

我是 Scala 的新手，试图将一些现有的 Java 代码与 Play Framework 中的 Scala 特定功能集成。

```
val scalaMap = getScalaMap() // returns Map[String,Seq[String]] 
```

将 scalaMap 转换为使用 Java 集合的好方法是什么？

```
val javaMap = ???  //  java.util.Map<String,List<String>> 
```

看起来我想使用 JavaConversions，但我不确定如何将嵌套集合链接在一起。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:12:32.723

尝试这个：

```
import collection.JavaConverters._
val javaMap = scalaMap.mapValues(_.asJava).asJava 
```

它分两步完成工作：

1.  首先转换`Map[String,Seq[String]]`为`Map[String,java.util.List[String]]`

2.  然后整个映射到Java `Map`：。`java.util.Map[String,java.util.List[String]]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T20:17:09.827

不要使用`mapValues`. 使用`map`：

```
import collection.JavaConverters._
val javaMap = scalaMap.map { case (k,v) => (k, v.asJava) }.asJava 
```

使用`mapValues`将导致内部映射在每次访问时都被重新转换。

## 演示

斯卡拉地图

```
scala> val scalaMap = Map(1 -> Map('a -> "A"), 2 -> Map('b -> "B")) 
```

转换为 Java Map（但每次转换内部 Map 时都会打印一些内容）

```
scala> val javaMapBad = scalaMap.mapValues(v => { println("evaluating "+v); v.asJava }).asJava
evaluating Map('a -> A)
evaluating Map('b -> B)
javaMapBad: java.util.Map[Int,java.util.Map[Symbol,java.lang.String]] = {1={'a=A}, 2={'b=B}}

scala> javaMapBad.get(1)
evaluating Map('a -> A)     // Re-conversion!
res0: java.util.Map[Symbol,java.lang.String] = {'a=A}

scala> javaMapBad.get(1)
evaluating Map('a -> A)     // Re-conversion!
res1: java.util.Map[Symbol,java.lang.String] = {'a=A} 
```

正确的方法

```
scala> val javaMapGood = scalaMap.map{case (k,v) => {println("evaluating "+v); (k,v.asJava)}}.asJava
evaluating Map('a -> A)
evaluating Map('b -> B)
javaMapGood: java.util.Map[Int,java.util.Map[Symbol,java.lang.String]] = {1={'a=A}, 2={'b=B}}

scala> javaMapGood.get(1)  // no re-conversion
res6: java.util.Map[Symbol,java.lang.String] = {'a=A}

scala> javaMapGood.get(1)  // no re-conversion
res7: java.util.Map[Symbol,java.lang.String] = {'a=A} 
```

# html - 获取锚标记以在段落末尾换行？

> ID：12748066
> 
> 赞同：1
> 
> 时间：2012-10-05T14:07:34.247
> 
> 标签：html, css

我有一个段落，末尾有一个链接，如下所示：

```
<p>Some text, blah blah blah</p>
<a href="#">... read more</a> 
```

这将最终呈现如下：

> 一些文字，等等等等
> 
> ... 阅读更多

除了我希望它像这样呈现：

> 一些文字，等等等等……阅读更多

有没有办法在不将链接放在段落内的情况下做到这一点？我已经绞尽脑汁几分钟并尝试了一些东西，但我无处可去。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:09:48.660

你可以用一点 css 说：

```
p, a { display: inline; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:13:17.700

为您的段落元素创建覆盖并更改标准样式

```
p {diplay: block;} 
```

至

```
p { display: inline-block; } 
```

在这里查看链接：http: [//jsfiddle.net/SGAy3/](http://jsfiddle.net/SGAy3/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:10:21.507

或者

```
p {float: left;}
a {display: inline-block;} 
```

这`display:inline-block`是为了确保文本链接不会换行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:10:30.033

坚持一个浮动：左`a`标记和`p`标记..

所以它可能像

```
p,a{float:left} 
```

# kobold2d - Kobold2d how to detect an ipad3

> ID：12748068
> 
> 赞同：2
> 
> 时间：2012-10-05T14:07:47.507
> 
> 标签：kobold2d, ipad-3

Hi I am trying to work out how to run a universal app in Kobold2d.

I would like to have graphics designed for 320x480, 640,960\. to support the iPhones. Just to repositions it for the iPad 1 & 2.

And not to use the iPad 3 (new) high resolutions?

So far if I enable Retina support it does for all devices.

Can it be restricted?

# objective-c - 如何正确使用 swipeWithEvent 导航 webView，Obj-C

> ID：12748072
> 
> 赞同：10
> 
> 时间：2012-10-05T14:08:01.900
> 
> 标签：objective-c, cocoa, event-handling

我想通过使用事件 swipeWithEvent 来实现在我的 webView 中向后和第四次导航的能力。但是，我不知道我应该如何使用它。

我有一个主要的 webView，以及向后和第四个导航的两种方法。这里的一个大问题是我不确定如何写这个问题。我只需要知道如何识别我的 webView 上的滑动手势并调用我的两个方法。类似于 Safari、Google Chrome 和 Mozilla Firefox 所做的事情。谢谢。

**编辑** 我已经实现了这些方法，这些方法可以让我前后滑动。

```
- (void)swipeWithEvent:(NSEvent *)event {
    NSLog(@"Swipe With Event");
    CGFloat x = [event deltaX];
    //CGFloat y = [event deltaY];

    if (x != 0) {
        (x > 0) ? [self goBack:self] : [self goForward:self];
    }
}

-(BOOL)recognizeTwoFingerGestures
{
    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
    return [defaults boolForKey:@"AppleEnableSwipeNavigateWithScrolls"];
}

- (void)beginGestureWithEvent:(NSEvent *)event
{
    if (![self recognizeTwoFingerGestures])
        return;

    NSSet *touches = [event touchesMatchingPhase:NSTouchPhaseAny inView:nil];

    self.twoFingersTouches = [[NSMutableDictionary alloc] init];

    for (NSTouch *touch in touches) {
        [twoFingersTouches setObject:touch forKey:touch.identity];
    }
}

- (void)endGestureWithEvent:(NSEvent *)event
{
    if (!twoFingersTouches) return;

    NSSet *touches = [event touchesMatchingPhase:NSTouchPhaseAny inView:nil];

    // release twoFingersTouches early
    NSMutableDictionary *beginTouches = [twoFingersTouches copy];
    self.twoFingersTouches = nil;

    NSMutableArray *magnitudes = [[NSMutableArray alloc] init];

    for (NSTouch *touch in touches)
    {
        NSTouch *beginTouch = [beginTouches objectForKey:touch.identity];

        if (!beginTouch) continue;

        float magnitude = touch.normalizedPosition.x - beginTouch.normalizedPosition.x;
        [magnitudes addObject:[NSNumber numberWithFloat:magnitude]];
    }

    // Need at least two points
    if ([magnitudes count] < 2) return;

    float sum = 0;

    for (NSNumber *magnitude in magnitudes)
        sum += [magnitude floatValue];

    // Handle natural direction in Lion
    BOOL naturalDirectionEnabled = [[[NSUserDefaults standardUserDefaults] valueForKey:@"com.apple.swipescrolldirection"] boolValue];

    if (naturalDirectionEnabled)
        sum *= -1;

    // See if absolute sum is long enough to be considered a complete gesture
    float absoluteSum = fabsf(sum);

    if (absoluteSum < kSwipeMinimumLength) return;

    // Handle the actual swipe
    if (sum > 0)
    {
        [self goForward:self];
    } else
    {
        [self goBack:self];
    }

} 
```

但是，这段代码没有做任何事情。它似乎根本没有被调用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T05:39:32.393

对于现代操作系统（Lion 和更新版本），这是“我如何用 Y 做 X？”之一。答案是“不要使用 Y”的问题。

`-swipeWithEvent:`用于实现 10.6 风格的触控板滑动，屏幕上的内容不会随着滑动而移动。大多数 Mac 触控板不再配置为允许这种滑动；触控板首选项窗格中的“在页面之间滑动”首选项必须设置为“用三个手指滑动”才能使用，这既不是默认设置，也不是用户更改的常用设置。

狮子风格的“流畅滑动”作为滚动事件出现。Xcode SDK 中的 PictureSwiper 示例项目是一个很好的起点，但作为概述，您可以这样做：

**如果只需要支持10.8+**

使用`NSPageController`历史堆栈模式。

**如果需要支持 10.7**

1.  认真考虑仅支持 10.8+，至少对于此功能。手动实现它是一个巨大的混乱。别说我没警告过你。

2.  创建一个自定义视图，它是您希望可滑动的任何视图的超级视图。

3.  覆盖`-wantsScrollEventsForSwipeTrackingOnAxis:`以返回`YES`适当的轴。如果您正在执行 Safari 风格的后退/前进导航，那就是`NSEventGestureAxisHorizontal`.

4.  深呼吸；这个太棒了。

5.  `-scrollWheel:`在您的自定义视图中覆盖。您的覆盖应该调用`-trackSwipeEventWithOptions:dampenAmountThresholdMin:max:usingHandler:`. 粗略地说，衰减量阈值最小值是用户可以向左滑动的数据浏览量，最大值是他们可以向右滑动的数据量。处理程序是一个在用户滑动时重复调用的块；它应该：

    1.  在内容视图后面放置一个`NSImageView`带有您要返回/前进到的页面的屏幕截图。
    2.  移动内容视图以匹配用户的动作。请注意，`gestureAmount`与阻尼量阈值一样，该参数是项目的（小数，可能是负数）数量；您必须将其乘以视图宽度才能正确定位内容视图。
    3.  如果手势阶段是`NSEventPhaseEnded`，则评估`gestureAmount`以确定用户是否完成了手势。如果他们没有，将内容视图动画化回原位；如果他们这样做了，请将内容视图放回原位，不使用动画并更新它以匹配屏幕截图。

如您所见，实际实现处理程序非常复杂，我什至没有描述所有细节。即使有了所有这些细节，一个技术高超的程序员也可能需要花几天时间才能做到这一点。10.7 SDK 中的 PictureSwiper 示例是一个很好的起点。（PictureSwiper 10.8 版本使用`NSPageController`. 就像你应该做的那样。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T06:10:51.977

从[10.7 发行说明](http://developer.apple.com/library/mac/releasenotes/Cocoa/AppKitOlderNotes.html)：

> **流体滑动跟踪 - API**
> 
> 以下 API 允许将手势滚轮事件作为流畅的滑动手势进行跟踪。与 iOS 类似，NSScrollView 将在需要时反弹一次，然后可选择传递手势滚轮事件，以便您的控制器可以使用此 API 将滚动手势作为流畅的滑动手势进行跟踪。
> 
> ScrollWheel NSEvents 现在响应 -phase 消息。卷轴有3种：
> 
> 1) 手势滚动——这些滚动以 NSEventPhaseBegan 开始，有许多 NSEventPhaseChanged 事件，并在用户用 NSEventPhaseEnded 抬起手指时终止。
> 
> 2) Momentum 滚动 - 这些具有 NSEventPhase none 的阶段，但它们具有 NSEventPhaseBegan/NSEventPhaseChanged/NSEventPhaseEnded 的momentumPhase。
> 
> 3) Legacy scrolls - 这些滚轮事件有一个 NSEventPhaseNone 的阶段和一个 NSEventPhaseNone 的动量阶段。无法确定用户何时开始或停止执行传统滚动。
> 
> NSScrollView 处理所有手势滚轮事件并且不会将它们传递给响应者链。通常，在响应者链中跟踪滑动是在更高级别完成的，例如在 WindowController 级别。要实现 iOS 风格的“不在边缘反弹，否则滑动”行为，您需要通知 NSScrollView 它应该在适当的时候转发滚轮消息。您的 NSResponder 可以实现以下方法并返回 YES，而不是手动设置 NSScrollView 上的属性。
> 
> ```
> - (BOOL)wantsScrollEventsForSwipeTrackingOnAxis:(NSEventGestureAxis)axis; 
> ```
> 
> 当适当的控制器接收到带有非 NSEventNone 阶段的 -scrollWheel: 消息时，您可以在该事件实例上调用以下消息来跟踪滑动或滚动到用户完成事件和动画完成。
> 
> ```
> enum {
>     NSEventSwipeTrackingLockDirection = 0x1 << 0,
>     NSEventSwipeTrackingClampGestureAmount = 0x1 << 1
> };
> 
> typedef NSUInteger NSEventSwipeTrackingOptions;
> 
> @interface NSEvent ...
> - (void)trackSwipeEventWithOptions:(NSEventSwipeTrackingOptions)options
>           dampenAmountThresholdMin:(CGFloat)minDampenThreshold
>                                max:(CGFloat)maxDampenThreshold
>                       usingHandler:(void (^)(CGFloat gestureAmount, NSEventPhase phase, > BOOL isComplete, BOOL *stop))handler;
> ... 
> ```
> 
> 下面是一个像 iOS Photo 应用一样滑动图片集合的伪代码示例。
> 
> ```
> - (BOOL)wantsScrollEventsForSwipeTrackingOnAxis:(NSEventGestureAxis)axis {
>     return (axis == NSEventGestureAxisHorizontal) ? YES : NO; }
> - (void)scrollWheel:(NSEvent *)event {
>     // NSScrollView is instructed to only forward horizontal scroll gesture events (see code above). However, depending
>     // on where your controller is in the responder chain, it may receive other scrollWheel events that we don't want
>     // to track as a fluid swipe because the event wasn't routed though an NSScrollView first.
>     if ([event phase] == NSEventPhaseNone) return; // Not a gesture scroll event.
>     if (fabsf([event scrollingDeltaX]) <= fabsf([event scrollingDeltaY])) return; // Not horizontal
>     // If the user has disabled tracking scrolls as fluid swipes in system preferences, we should respect that.
>     // NSScrollView will do this check for us, however, depending on where your controller is in the responder chain,
>     // it may scrollWheel events that are not filtered by an NSScrollView.
>     if (![NSEvent isSwipeTrackingFromScrollEventsEnabled]) return;
>     if (_swipeAnimationCanceled && *_swipeAnimationCanceled == NO) {
>         // A swipe animation is still in gestureAmount. Just kill it.
>         *_swipeAnimationCanceled = YES;
>         _swipeAnimationCanceled = NULL;
>     }
>     CGFloat numPhotosToLeft = // calc num of photos we can move to the left and negate
>     CGFloat numPhotosToRight = // calc num of photos we can move to the right
>     __block BOOL animationCancelled = NO;
>     [event trackSwipeEventWithOptions:0 dampenAmountThresholdMin:numPhotosToLeft max:numPhotosToRight
>                          usingHandler:^(CGFloat gestureAmount, NSEventPhase phase, BOOL isComplete, BOOL *stop) {
>         if (animationCancelled) {
>             *stop = YES;
>             // Tear down animation overlay
>             return;
>         }
>         if (phase == NSEventPhaseBegan) {
>             // Setup animation overlay layers
>         }
>         // Update animation overlay to match gestureAmount
>         if (phase == NSEventPhaseEnded) {
>             // The user has completed the gesture successfully.
>             // This handler will continue to get called with updated gestureAmount
>             // to animate to completion, but just in case we need
>             // to cancel the animation (due to user swiping again) setup the
>             // controller / view to point to the new content / index / whatever
>         } else if (phase == NSEventPhaseCancelled) {
>             // The user has completed the gesture un-successfully.
>             // This handler will continue to get called with updated gestureAmount
>             // But we don't need to change the underlying controller / view settings.
>         }
>         if (isComplete) {
>             // Animation has completed and gestureAmount is either -1, 0, or 1.
>             // This handler block will be released upon return from this iteration.
>             // Note: we already updated our view to use the new (or same) content
>             // above. So no need to do that here. Just...
>             // Tear down animation overlay here
>             self->_swipeAnimationCanceled = NULL;
>         }
>     }];
>     // We keep a pointer to a BOOL __block variable so that we can cancel our
>     // block handler at any time. Note: You must assign the BOOL pointer to your
>     // ivar after block creation and copy!
>     self->_swipeAnimationCanceled = &animationCancelled; } 
> ```

其他解决方案是直接处理触摸事件以识别手势。有关更多信息，请考虑查看[文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T06:29:47.263

我在 NSViewController 类中使用了`touchesBeganWithEvent:`和方法。`touchesEndedWithEvent:`下面的代码只是一个粗略的例子。出于某种原因，`swipeWithEvent:`永远不会被解雇。所以我放弃了这个（swipeWithEvent）。以下代码在 High Sierra 中使用 Xcode 10 进行了测试（在视图控制器的实现部分内）：

```
- (void)viewDidAppear {
       [超级 viewDidAppear];

 `[self.view setAcceptsTouchEvents:YES];
}

float beginX, endX;

- (void)touchesBeganWithEvent:(NSEvent *)event {

    if(event.type == NSEventTypeGesture){
        NSSet *touches = [event touchesMatchingPhase:NSTouchPhaseAny inView:self.view];
        if(touches.count == 2){
            for (NSTouch *touch in touches) {
                beginX = touch.normalizedPosition.x;
            }
            // since there are two touches, beginX will always end up with the data from the second touch
        }
    }
}

- (void)touchesEndedWithEvent:(NSEvent *)event {

    if(event.type == NSEventTypeGesture){
        NSSet *touches = [event touchesMatchingPhase:NSTouchPhaseAny inView:self.view];
        if(touches.count == 2){
            for (NSTouch *touch in touches) {
                endX = touch.normalizedPosition.x;
            }
            // since there are two touches, endX will always end up with the data from the second touch

            if (endX > beginX) {
                NSLog(@"swipe right!");
            }
            else if (endX < beginX) {
                NSLog(@"swipe left!");
            }
            else {
                NSLog(@"no swipe!");
            }
        }
    }
}` 

`[self.view setAcceptsTouchEvents:YES];`声明非常重要。我把它放在 viewDidAppear 方法中，以便在所有视图出现后开始接受触摸信息。如果您在子类中使用它，只需更改`self.view`为即可`self`（还需要在初始化或的某处使用“setAcceptsTouchEvents” `drawRect`）。这只是检测左右滑动的示例。对于上下滑动，您需要使用`touch.normalizedPosition.y`数据。

如果您在 NSWindowController 子类中使用它，则需要`self.window.contentView.acceptsTouchEvents=YES;`在 windowDidLoad 中使用这一行。您可能还需要将您的 OSX 目标设置为 10.10 以使所有这些都可以正常工作，因为 setAcceptsTouchEvents 已经不推荐用于更高版本。

```

# c# - 使用 Jenkins 执行 NUnit

> ID：12748079
> 
> 赞同：2
> 
> 时间：2012-10-05T14:08:25.157
> 
> 标签：c#, nunit, jenkins, jenkins-plugins

早上好。

我想配置 Jenkins 服务器以使用插件**Jenkins NUnit 插件**运行 NUnit，但我尝试了很多东西并且不起作用。

我单击按钮**添加构建步骤**>>**执行 Windows 批处理命令** ，但我在这里看到*http://stackoverflow.com/questions/9121312/how-do-you-run-nunit-tests-from-jenkins*然后我正在配置这个表格：

"c:\program files\nunit\bin\nunit-console.exe" $(project Local)\$(DLLTest).dll

此表单返回错误，但我在 bat 文件中尝试此操作，但没有任何反应，我将**start**放在第一行之前。打开 NUnit 但没有任何反应，在 Jenkins 中，建筑开始但永无止境。

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:30:03.083

这是我为特定的硬编码项目运行它的方式

"C:\Program Files\NUnit 2.6\bin\nunit-console.exe" "nUnitTests\bin\Release\nUnitTests.dll" /xml=nunit-result.xml

我需要指定 xml 输出，以确保 Violations 插件（我正在使用）可以获取输出并正确报告，一旦你让它工作，这可能会对你有所帮助。

您是否尝试过使用 %variable% 而不是 $variable？例如，在 Windows 批处理命令中，它使用 %WORKSPACE% 而不是 $WORKSPACE。这就是我在 FxCop/StyleCop 批处理命令中所做的。

# mysql - Removing Trailing Periods in MySQL Field

> ID：12748080
> 
> 赞同：0
> 
> 时间：2012-10-05T14:08:31.397
> 
> 标签：mysql, normalization

I have a MySQL database called arch, with a table called resources, which has a text field called title. I'm working on normalizing the title field; sometimes it ends with a period, sometimes it doesn't. I'd like to remove all trailing periods. I'm afraid of using the replace function because the title field does contain valid periods within the data.

I've tried using

```
SELECT TRIM(TRAILING '.' FROM 'title') 
```

but am not having luck. I think this must be simple. Shouldn't this be possible within MySQL?

EDIT:

I read elsewhere that TRIM() does not work on SELECT function. I rewrote the statement into

```
UPDATE resources SET title = TRIM(TRAILING '.' FROM title) 
```

and success!

Thanks all for the help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:17:13.733

你是怎么用的`trim()`？通过指定要修剪的字符，它应该可以工作；

```
select trim(trailing '.' from `your_column`)... 
```

编辑，

使用 时，您没有引用列`trim()`，而是指向字符串。删除单引号，或用记号 (`) 替换它们。

# java - Spring, prototypes, and MBeanExporter

> ID：12748087
> 
> 赞同：0
> 
> 时间：2012-10-05T14:08:50.773
> 
> 标签：java, spring, jmx

I am using Spring in conjunction with its `MBeanExporter`. I have a prototype bean definition which should only be instantiated when a call to `ApplicationContext.getBean()` is made. However, the `MBeanExporter` is (incorrectly) instantiating an instance of the prototype bean when bootstrapping the container.

I found [this bug report](https://jira.springsource.org/browse/SPR-5481) from ages ago, with no notable response.

This seems to me like it must be a common scenario, so I feel like I must be missing something. It's important that my prototype not be instantiated ahead of time, and that I can use `MBeanExporter` to make my JMX integration simpler. Can anyone explain what I'm doing wrong?

For reference, my spring config looks like this:

```
<bean id="foo" class="MyPrototypeClassName" scope="prototype"/>

<bean id="namingStrategy" class="org.springframework.jmx.export.naming.IdentityNamingStrategy"/>

<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="autodetect" value="true"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T06:00:02.590

您可以使用自定义标记接口，例如`MyJmxAutodetectExclude`并扩展 Spring `MetadataMBeanInfoAssembler`。这样你就不需要在每次重构代码时调整你的 context.xml

```
public class MyMBeanInfoAssembler extends MetadataMBeanInfoAssembler {

    @Override
    public boolean includeBean(final Class<?> beanClass, final String beanName) {
        if (super.includeBean(beanClass, beanName)) {
            List<Class<?>> list = Arrays.asList(beanClass.getInterfaces());
            if (list.contains(MyJmxAutodetectExclude.class)) {
                return false;
            }
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:24:38.037

我找到了一些解决方法，但它很笨拙，所以我怀疑这不是最佳实践。我只是将我的导出器配置更改为：

```
<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="autodetect" value="true"/>
    <property name="excludedBeans">
        <list>
            <value>foo</value>
        </list>
    </property>
</bean> 
```

这样，自动导出器就会忽略我的原型 bean。因此，我的原型 bean 现在可以引用`MBeanExporter`（以前这会导致无法解决的依赖循环）。所以现在我的原型可以在适当的时候在 JMX 中注册和注销自己。

如果有人可以权衡这是否是一种好/坏的方法，我将不胜感激。

# php - Mysql transction rollback fails

> ID：12748092
> 
> 赞同：0
> 
> 时间：2012-10-05T14:08:55.267
> 
> 标签：php, mysql, transactions

I am creating joomla(2.5) with hikashop (eshop component) component to automatically import customers. Problem is that I am using JDatabase transactions which is not working as expected(rollback does not work). Method processSingle processes each customer and returns weather it suceeded or not. Also for debugging there is one more parameter to know which method(step) failed. I have written another script which uses identical rolling back structure and it seems to work, but this one doesn't. I have tried to catch DatabaseException but there is no exceptions. There is part of code which fails rolling back transaction.

```
foreach ($this->customerList as $customer) {
        // start tracking database entries
        $this->db->transactionStart();

        $oCustomer = new stdClass();
        $oCustomer->raw_data = $customer;
        // escaping from sql injection
        $oCustomer = $this->escapeObj($oCustomer);
        // here we process all items taking one and going through all steps
        $methodfailed = "";
        $success = $this->processSingle($oCustomer, $methodfailed);
        $processed++;
        if ($success) {
            $succeeded++;
            // if succeded save changes
            $this->db->transactionCommit();
        } else {
            $failed++;
            echo $this->error . "<br/>";
            echo "failed method:" . $methodfailed . "<br/>";
            // if failed rollback database entries
            $this->db->transactionRollback();
        }
    } 
```

Anyone had similar problems? By the way I am using PHP/5.3.3-7.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:15:54.623

我不知道是什么`transactionStart`，但只有 InnoDB 表支持事务。我敢打赌你的数据库表是 MyISAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:16:14.880

检查您的 mysql 配置是否打开了*自动提交*模式。将其关闭会有所帮助。在此处阅读更多信息[http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

您还应该检查您的表是否是 InnoDB。MyISAM 不支持事务。

# user-interface - GUI to manage Gmail filters?

> ID：12748093
> 
> 赞同：18
> 
> 时间：2012-10-05T14:09:05.983
> 
> 标签：user-interface, filter, gmail

I have numerous filters in Gmail and whenever I need to do maintenance is very difficult. To make matters worse, whenever a filter is edited it changes the order of the listing, so I have to look for reading all filters. At least there could be the option to save a label for each filter.

Is there any way or software ready to more easily manage Gmail filters?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T08:16:54.313

自从 Google 实施过滤器以来，这一直是过滤器的问题。自从过滤器处于测试阶段以来，人们一直在寻求一种重新排序过滤器的方法。谷歌显然不想解决这个问题。我知道的唯一方法是导出所有过滤器，编辑生成的 mailfilters.xml 文件，然后删除所有过滤器，然后从编辑后的 ​​mailfilters.xml 文件重新导入。

这是一种草率且容易出错的方法。他们应该在过滤器列表页面上有一个简单的 +/- 和顶部/底部按钮或列，以将选定的过滤器移动到所需的方向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-02T09:58:11.507

最简单的解决方案是将过滤器编辑为 XML 文件。

您应该将过滤器导出到 XML 文件，使用记事本或任何其他文本编辑器或您喜欢的任何 IDE 编辑该文件，然后将它们导入回 Gmail。

以下是分步说明：

*   转到 Gmail**设置**>**过滤器和阻止列表**
*   点击“**全选**”
*   点击“**导出**”
*   在您喜欢的文本编辑器中打开下载的 XML 文件，根据需要进行编辑
*   返回到 Gmail**过滤器和阻止列表**选项卡
*   单击“**导入过滤器**”
*   单击“**选择文件**”，选择您的 XML 文件
*   点击“**打开文件**”
*   单击“**创建过滤器**”（请注意，已编辑的过滤器将覆盖其旧版本）

就这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-05T08:20:01.143

从技术上讲，它不是一个 GUI——除非你将 Vim（或 Emacs）算作一个 GUI——而且你必须学习一点 Haskell 才能做到这一点，但是：[http ://hackage.haskell.org/package/google-mail-过滤器](http://hackage.haskell.org/package/google-mail-filters)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-14T19:42:38.083

这是另一个选项，可让您在 YAML 中定义 Gmail 过滤器并上传它们。不幸的是，它目前似乎无法下载您当前的过滤器。

[https://github.com/mesozoic/gmail-yaml-filters](https://github.com/mesozoic/gmail-yaml-filters)

也不是 GUI，但可以说比原生 Gmail 界面更容易编辑和操作规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T17:51:39.553

似乎有一个经理过滤器，但“今天”无法访问该项目：[http ://www.antepedia.com/detail/p/13469527.html;jsessionid=A9A329776C66653E45067C25E28C9150](http://www.antepedia.com/detail/p/13469527.html;jsessionid=A9A329776C66653E45067C25E28C9150)

# javascript - Offer javascript string as ISO-8859 encoded downloadable blob

> ID：12748096
> 
> 赞同：5
> 
> 时间：2012-10-05T14:09:08.773
> 
> 标签：javascript, encoding

I am working on an application to simplify a task concerning CSV files at work. All CSV files are in ISO-8859-15 encoding and I can not change that since they are exported from a tool and after running through my javascript web application, they need to be reimported there.

I load the CSV using `FileReaderJS` [http://bgrins.github.com/filereader.js/](http://bgrins.github.com/filereader.js/) which I extended to supply `readAsText` with the proper encoding, thus converting the input to a UTF-8 string.

Now I modify the string I retrieved from the uploaded CSV and want to offer the result (in variable `content`) as a download using `FileSaver` [https://github.com/eligrey/FileSaver.js](https://github.com/eligrey/FileSaver.js) using this code:

```
var bb = new BlobBuilder();
bb.append(content);              
saveAs(bb.getBlob("text/plain;charset=iso-8859-15"),"export.csv"); 
```

When the file arrives on my machine, it is still UTF-8 though. I figure I will probably have to convert the UTF-8 string to iso-8859-15 encoding myself - which is not a problem as I don't require any non-iso-8859 characters, but I have no idea **how** to achieve that. I took a brief look at [http://www.webtoolkit.info/demo/javascript-utf-8](http://www.webtoolkit.info/demo/javascript-utf-8) but that didn't help my.

Does anyone know how to make this work?

# c++ - 如何更改 C++ 中的 freeglut 主窗口图标？

> ID：12748103
> 
> 赞同：1
> 
> 时间：2012-10-05T14:09:23.743
> 
> 标签：c++, winapi, icons, glut, freeglut

我有一个用 C++ 编写的 DLL，它使用 FreeGlut 来可视化一些数据。我想更改主（免费）过剩窗口的图标。

我读过这是不可能的，但在我看到的文档中：

> GLUT_ICON - 指定出现在 freeglut 窗口左上角的图标。

如果可能，如何更改（免费）过剩窗口的图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T01:00:48.570

好的，我做到了：

1.  为项目创建一个资源并添加一个 32x32 图标（编辑或导入）。此图标将获得等于 的 ID `IDI_ICON1`。
2.  包括“resource.h”文件。
3.  像这样创建过剩窗口：

    ```
    glutCreateWindow("VIZ"); 
    HWND hwnd = FindWindow(NULL, _T("VIZ") ); //probably you can get the window handler in different way.. 
    ```

现在获取图标 - 它在您的 DLL 文件中，ID 为 IDI_ICON1，因此我们使用：

```
 HANDLE icon = LoadImage(GetModuleHandle(_T("NAME_OF_YOUR_DLL")),  MAKEINTRESOURCE(IDI_ICON1), IMAGE_ICON, 32, 32,  LR_COLOR );
    //You can also prepare second, smaller (16x16) icon - it looks better in title bar. 
    //... 
```

现在将此消息发送到窗口。

```
 SendMessage(hwnd, (UINT)WM_SETICON, ICON_BIG, (LPARAM)icon); 
```

就是这样！大概打扫一下就好了。

此解决方案不需要部署 .ico 文件。如果您愿意，可以省略资源文件并加载图标：

```
 icon = LoadImage(GetModuleHandle(), _T("icon.ico"), IMAGE_ICON, 32, 32, LR_LOADFROMFILE | LR_COLOR); 
```

您也可以使用[LoadIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648072%28v=vs.85%29.aspx)功能，但是您不能选择图标大小。

手册： [LoadImage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648072%28v=vs.85%29.aspx) [SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx) [LoadIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx)

**编辑：**

我认为这不是最好的解决方案，所以欢迎你写你的。也许使用`GLUT_ICON`？

# delphi - Delphi 2009 链接器消除的功能

> ID：12748105
> 
> 赞同：3
> 
> 时间：2012-10-05T14:09:29.493
> 
> 标签：delphi, delphi-2009

我想`DateTimeToStr`在调试项目时使用该功能。我想使用评估/修改窗口或监视窗口。这总是会导致错误“链接器消除的功能”。

我确保该函数被项目使用（我还在我要调试的函数中显式调用），我也关闭了优化并重新编译了整个项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:16:02.233

我做了以下程序

```
program WhereDidItGo;
{$APPTYPE CONSOLE}
uses
  SysUtils;

begin
  DateTimeToStr(0.0);
end. 
```

并准确找到了您报告的内容。评估/修改窗口报告该功能已被消除。诡异的。

无论如何，我尝试了这个，这似乎足以欺骗它。

```
program WhyDoesThisSolveTheOddity;
{$APPTYPE CONSOLE}
uses
  SysUtils;

var
  FunctionPtr: function(const DateTime: TDateTime): string;
  VarFalse: Boolean;

begin
  if VarFalse then
    FunctionPtr := @DateTimeToStr;
end. 
```

也许问题在于该函数被声明为 being `inline`。尽管在我的测试中，函数调用实际上并没有被内联。

# jquery - jQuery验证多个输入：文件

> ID：12748106
> 
> 赞同：2
> 
> 时间：2012-10-05T14:09:32.253
> 
> 标签：jquery, html

我有以下 HTML：

```
<input id="upload1" type="file" /><br/>
<input id="upload2" type="file" /><br/>
<input id="upload3" type="file" /><br/>
<input id="upload4" type="file" /><br/>
<input id="upload5" type="file" /><br/>
<span id="label" style="color:red; display:none">
Wrong filetype!
</span> 
```

以及以下 jQuery：

```
$('input:file').change(function(){
    var ext = $(this).val().split('.').pop().toLowerCase();
    $('#label').toggle(ext != 'pdf');
}); 
```

我想要做的只是切换`#label`是否所有 5 个`input:file`元素都通过了验证（仅限 pdf 扩展名）。或者没有选择文件。

目前，如果我`.jpg`先选择a，则`#label`显示，然后如果我选择a `.pdf`，则`#label`消失。这是不正确的，因为在五个元素`.jpg`之一中仍然有一个选择。`input:file`

**编辑**：小提琴[在这里](http://jsfiddle.net/general_exception/nnZsA/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:14:35.437

那这个呢？

```
$('input:file').change(function(){

    $('input:file').each(function(){
      var ext =   $(this).split('.').pop().toLowerCase();

        $('#label').toggle(ext != 'jpg');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:14:29.960

您需要将其更改为：

```
$('input:file').change(function(){
    var
        all_ok = true,
        inputs_set = $('input:file');

    for (var e in inputs_set) {
        if (e.val().split('.').pop().toLowerCase() != 'pdf') {
            all_ok = false;
        }
    }

    $('#label').toggle(!all_ok);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:57:46.590

设法结合两个答案来做到这一点： -

```
$('input:file').change(function() {  
    var allok = true;
    $('input:file').each(function() {
        if ($(this).val() !== "" &&
            $(this).val().split('.').pop().toLowerCase() != 'pdf') {
                allok = false;
        }
    });
    $('#label').toggle(!allok);
}); 
```

# java - 循环遍历Java中的列表

> ID：12748113
> 
> 赞同：0
> 
> 时间：2012-10-05T14:10:02.870
> 
> 标签：java, oop, jakarta-ee

请帮助我理解，以下代码在 for 语句中显示类型不匹配：“无法从元素类型对象转换为列表”。我知道我错过了一些愚蠢的东西。请帮忙。

```
public void setMapPriceValue(SolrItemVO solrItemVO, ArrayList proce1) throws SolrDAOException
{
    List xcatentAttrList = (List<Xcatentattr>) proce1.get(0);

    solrItemVO.setMapPrice(-1); // setting default value

    for(List  xcatentattr : xcatentAttrList){

        if(xcatentattr.get(0) == 33)

                solrItemVO.setMapPrice(xcatentattr.get(1));

                solrItemVO.setMapPriceVal(xcatentattr.get(2));

        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:12:19.603

首先，您将泛型和原始类型混合在一起 - 如果您只使用泛型，它会让您的生活更轻松：

```
List<Xcatentattr> xcatentAttrList = (List<Xcatentattr>) proce1.get(0); 
```

您也可以考虑在方法签名中使用正确的泛型类型（我假设`proce1`是列表列表）：

```
public void setMapPriceValue(SolrItemVO solrItemVO, List<List<Xcatentattr>> proce1) 
```

在这种情况下，您不再需要演员表：

```
List<Xcatentattr> xcatentAttrList = proce1.get(0); 
```

那么增强 for 循环的语法是`for (TypeOfObjectInYourList object : list)`，所以在你的情况下：

```
for(Xcatentattr xcatentattr : xcatentAttrList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:12:38.603

如果您要输入内容，请尝试保持输入

```
List<Xcatentattr> xcatentAttrList = (List<Xcatentattr>) proce1.get(0);

solrItemVO.setMapPrice(-1); // setting default value

for(Xcatentattr  xcatentattr : xcatentAttrList){

    if(xcatentattr.get(0) == 33)

            solrItemVO.setMapPrice(xcatentattr.get(1));

            solrItemVO.setMapPriceVal(xcatentattr.get(2));

    }
} 
```

那么答案可能会更清楚;）

for 循环是 Xatentattr 类型的。您正在循环浏览该类型的列表。

查看此[链接](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)以获取有关 for-each 循环的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:18:50.490

这里有两个问题。

*   首先，如果你声明`List xcatentAttrList`不使用泛型，Java 只能知道你的列表包含`Object`s。所以你的`for`循环必须遍历一个`Object`s 列表。
*   其次，演员`(List<Xcatentattr>)proce1`表暗示列表包含`Xcatentattr`元素，但您正在迭代`List`对象。

因此，如果您已经声明了`List`using 泛型（因此说您正在使用`Xcatentattr`元素列表），那么循环`for`将是：

```
 for (Xcatentattr xcatentattr : xcatentAttrList) {
     . . .
 } 
```

# c++ - 为什么捕获视频帧的 OpenCV 程序会在几秒钟后冻结？

> ID：12748115
> 
> 赞同：2
> 
> 时间：2012-10-05T14:10:14.927
> 
> 标签：c++, opencv, raspberry-pi

我在我的 Raspberry Pi 上成功安装了[cvBlob](http://code.google.com/p/cvblob/)`red_object_tracking.cpp`并使用提供的`Makefile`（位于[此处](http://cvblob.googlecode.com/svn/trunk/samples/)的代码）对其进行了编译

当我执行时`./red_object_tracking`，我看到 GUI 弹出，我看到我的网络摄像头捕获的前几个视频帧，但是，5 秒后它冻结并且帧不再更新。该程序不会崩溃，因为当我执行“top”时，我可以看到它正在使用 93% 的 CPU 和 30% 的内存。

当我尝试在我的 Mac 上构建和执行相同的程序时，它运行良好（即框架正在更新，当我将红笔放在相机前面时，它正确地将红色部分装在一个矩形内。

有谁知道为什么它不能在我的 pi 上正常工作？我正在运行最新版本的 Raspbian Wheezy 并使用 Open CV 2.3.1。

我应该尝试超频我的 pi 的 CPU 或内存吗？

我应该在 pi 上运行不同的操作系统而不是 Raspbian Wheezy 吗？

将不胜感激所有/任何输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:54:32.087

USB存在一些[已知问题](https://stackoverflow.com/questions/14736270/raspberry-pi-usb-redirect-issue/14866397#14866397)，这些问题可能会影响您的网络摄像头（通过 USB 连接）。仍然存在一些[与相机相关的未决问题](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=28&t=23544&start=225)，尽管其他一些听起来正在工作。尝试运行 rpi-update 看看是否能解决您的问题。

# php - 无法让 preg_match 正常工作 PHP（这与另一篇文章有 关）

> ID：12748116
> 
> 赞同：0
> 
> 时间：2012-10-05T14:10:18.370
> 
> 标签：php, expression, match

我很难过`preg_match`，这是我之前问的一个问题：

[使用字符串作为表达式发送到 eval() 并用可变值 PHP 替换子字符串](https://stackoverflow.com/questions/12744654/using-a-string-as-an-expression-to-be-send-to-eval-and-replacing-a-sub-string)

现在我试图给 str 一个 preg_match ，如下所示：

```
$str =  "return (!(preg_match('/[^A-Za-z$]+/', ##replace##)));" 
```

如果我是正确的，如果我给##replace## 值“ValueWithNumber4”，这将返回 TRUE，

那么问题出在哪里，我应该如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:14:00.727

`preg_match`不替换任何东西，它*匹配*. `true`如果 in 中的值与给定的表达式匹配，它会返回`##replace##`（它会因为“ValueWithNumber4”中有一个非 Alpha/$。 - 它确实如此，我测试了它）我认为你的表达式不正确。你可能想要

```
/^[A-Za-z]+$/
/* or */ /^[a-z]+$/i 
```

# java - Objectify 中的模式迁移：AlsoLoad List 没有返回“整个”实体

> ID：12748119
> 
> 赞同：0
> 
> 时间：2012-10-05T14:10:37.987
> 
> 标签：java, google-app-engine, objectify

物化4+GAE 1.7.1

迁移前：实体有一个字段：

```
@Load
List<ChildEntity> children=new ArrayList<ChildEntity>(); 
```

现在我想删除这个字段，而是使用：

```
 List<String> childrenNames=new ArrayList<String>(); 
```

根据Objectify doc，我使用以下方法：

```
 void importPreviousChildren( @AlsoLoad( "children" ) List<ChildEntity> children )
    {
        for( ChildEntity c: children )
        {
            if( !childrenNames.contains( c.getName() ) )
                childrenNames.add( c.getName() );
        }
    } 
```

但是，结果是 childrenNames 字段只包含“null”。我猜原因是，加载孩子时它确实加载了整个 ChildEntity，那么解决这个问题的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:57:45.617

在内部，当 objectify 存储*“在这种情况下为 ChildEntity”*的实体时，它不存储实体本身，而是存储`key`“对实体的引用”。可能永远不会调用您的方法，因为 objectify 处理 a`List<Key>`并且您已声明`List<ChildEntity>`.

你可以试试这段代码：

```
 void importPreviousChildren( @AlsoLoad( "children" ) List<Key> children )
    {
        for( Key key: children )
        {
            ChildEntity c = ofy().load().entity(DatastoreService.get(key))

            if( !childrenNames.contains( c.getName() ) )
                childrenNames.add( c.getName() );
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:24:50.807

试试这个：

```
void importPreviousChildren( @Load @AlsoLoad( "children" ) List<ChildEntity> children )
{
    for( ChildEntity c: children )
    {
        if( !childrenNames.contains( c.getName() ) )
            childrenNames.add( c.getName() );
    }
} 
```

注意额外的 @Load 注释。您正在加载“部分”实体 - 只是关键字段。没有@Load 你不应该再使用具体的引用了；如果您尝试，Objectify4 的官方版本将引发异常。过去它是允许的，但正是由于这个原因，它被证明是一个坏主意。

# wordpress - FishPig Wordpress 集成 Magento 扩展

> ID：12748120
> 
> 赞同：0
> 
> 时间：2012-10-05T14:10:41.273
> 
> 标签：wordpress, magento, fishpig

我正在使用 FishPig Wordpress 集成扩展，它工作正常。问题是，当我在主页上输入 Magento 默认搜索栏时，我希望它从产品、CMS 页面和博客文章中拉回结果。默认情况下，它会撤回产品。对于 CMS 页面搜索，我已经安装了 Tangkoko CmsSearch 扩展，这也可以完美运行。我唯一坚持的是，搜索博客文章。有什么方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:01:18.883

你应该看看谷歌自定义搜索。虽然这可能不是您正在寻找的内容，但您可以选择为您网站的某些部分编制索引，例如 domain.com/blog、domain.com/products、domain.com/pages。

这是一篇关于如何将其添加到magento的文章。 [http://www.magebuzz.com/blog/2012/07/09/how-to-add-google-custom-search-into-magento/](http://www.magebuzz.com/blog/2012/07/09/how-to-add-google-custom-search-into-magento/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T05:56:34.257

是的你可以。使用来自同一个开发者的 Fishpig 的集成搜索扩展。你可以在这里找到它：http: [//fishpig.co.uk/magento/wordpress-integration/integrated-search/](http://fishpig.co.uk/magento/wordpress-integration/integrated-search/)

# java - 在 Java 中创建一个 ArrayList？

> ID：12748127
> 
> 赞同：2
> 
> 时间：2012-10-05T14:10:51.817
> 
> 标签：java, list, collections, arraylist

> **可能重复：**
> [List 与 ArrayList 作为引用类型？](https://stackoverflow.com/questions/4062982/list-versus-arraylist-as-reference-type)

通过以下方式创建数组列表有什么区别？

```
List listA = new ArrayList(); and ArrayList alist = new ArrayList(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T14:12:27.583

第一个将列表分配给由其*接口*定义的变量，第二个按类定义变量。

第一个声明将允许您稍后更改实现：

```
List listA = new LinkedList(); 
```

是有效的，而第二个不允许您更改实现：

```
ArrayList listA = new LinkedList(); // <<<=== INVALID 
```

值得注意的是，Java 5 开始`List`是泛型类型，所以应该指定类型参数来提高类型安全性：

```
List<ClassA> listA = new ArrayList<ClassA>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T14:11:48.137

在第一种情况下，您将列表的实现隐藏到使用`listA`.

这通常是推荐的，因为它（几乎）确保您以后可以更改为另一种类型的列表，而无需检查代码其他部分的依赖关系：代码 using`listA`不使用特定于类的任何内容，而只使用接口`ArrayList`中定义的内容`List`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:12:43.457

这是一个讨论得很远的问题:)

您应该使用接口而不是具体类，因为您可以在任何时间点轻松更改实现

当您想要访问该类的特定功能时，您应该只使用具体类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:12:46.047

都是一样的，只是引用类型不同。

在引用对象时，您应该始终使用接口（如 List）而不是像 ArrayList 这样的具体实现。

# javascript - Adobe Acrobat Pro：“调用”PDF 时有什么类似于查询字符串或命令行参数的东西吗？

> ID：12748130
> 
> 赞同：0
> 
> 时间：2012-10-05T14:11:05.737
> 
> 标签：javascript, soap, adobe, pdf-generation, acrobat

我正处于寻找可以在 Web 服务器上创建“智能”动态 PDF 的工具的早期阶段，具有特定类型的所需智能：当 PDF 被“调用”（打开、启动）时，它会读取命令行参数然后嵌入在 PDF 中的 javascript 使用它们来进行 SOAP 调用。一些伪代码来澄清：

```
// web-server pseudo code
ACROBAT acrobat = new ACROBAT();
acrobat.Open(PDFName, args[]);

// pseudo-code running inside the PDF enviroment

function MakeSOAPCall()
{
    custid = thisPDF.GetCommandLineArguments("CustomerID");  // extracts a value from args[]
    // now build a SOAP call using custid as one of the parameters
    .
    .
    .
} 
```

使用 Acrobat Pro 可以做到这一点吗？

# ajax - 用于从 SOLR 检索结果的 JSP

> ID：12748140
> 
> 赞同：0
> 
> 时间：2012-10-05T14:11:57.433
> 
> 标签：ajax, solr

我想使用一个使用 Ajax 的 JSP 客户端从 SOLR 集合中获取结果。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:49:55.100

我建议您查看 GitHub 上的[AJAX Solr](https://github.com/evolvingweb/ajax-solr)项目。

> AJAX Solr 是一个 JavaScript 库，用于为 Apache Solr 创建用户界面。

您应该能够将它与您喜欢的任何服务器端 Web 技术结合使用。

# javascript - 通过 http 从 mjpeg 流中提取其他数据

> ID：12748145
> 
> 赞同：7
> 
> 时间：2012-10-05T14:12:16.530
> 
> 标签：javascript, http, image, mjpeg, multipart-mixed-replace

我通过 http 获取 mjpeg 流并使用 <img> 标签查看它。非常标准，没有问题，一切都正确流式传输。

但是，除了编码的 jpg 数据之外，我想访问的 http 响应中还有一个 UTC 时间戳。基本上，我希望能够显示每帧的匹配时间。这是我正在处理的每个帧的响应：

```
Content-Type: image/jpeg
Content-Length: 60189
Time-Stamp: 51961243969
UTC-Time: 1349439599864
Flags: 2097153
PlayID: 1
Camera-Type: Halocam IP
Connection: Close

[encoded jpg data]
--myboundary 
```

目前 <img> 标签正在获取该流并直接解释 jpg。有没有办法通过 javascript 拦截、解释或分离 UTC-Time 值，以便我可以在页面上显示它？我不控制 http 响应，但如果可以通过那里的一些更改获得解决方案，我可以与控制它的人交谈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T07:50:37.557

使用 XMLHttpRequest，然后提取其所有响应标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:42:25.610

使用 jquery 的示例：

```
$.ajax({url:'a.jpg', 
        complete: function(r){
              console.log(r.getAllResponseHeaders());
        }
}) 
```

# visual-studio-2010 - Visual Studio 2010 安装项目 - 如何在安装过程中避免有关未知发布者的 UAC 消息？

> ID：12748146
> 
> 赞同：2
> 
> 时间：2012-10-05T14:12:16.793
> 
> 标签：visual-studio-2010, setup-project, uac

我使用 Visual Studio 2010 制作了一个简单的 Windows 窗体应用程序，不需要提升权限即可工作。

我创建了一个安装项目，将文件安装在以下位置，在安装过程中不需要管理权限：[LocalAppDataFolder][Manufacturer][ProductName]。安装程序也没有安装任何注册表项。

但它一直在询问“您是否要允许来自未知发布者的以下程序对您的计算机进行更改？” 在安装过程中，我想避免这种情况。

我已经看到，在安装程序文件没有使用从官方机构购买的证书签名之前，将一直提示此消息。

有没有办法自由地做到这一点？或者当应用程序不需要提升权限时避免此消息？

提前感谢您的帮助，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:17:49.147

当未签名的应用程序尝试将数据写入受保护的系统文件夹或注册表设置时，会显示该消息。

您指定您没有更改注册表项，但是您可以在使用[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)的安装过程中确认这是这种情况吗？

您可以通过确保将应用程序安装在 Program Files 以外的位置来克服这个问题，User 文件夹就是一个很好的例子。

[资源。](http://answers.microsoft.com/en-us/windows/forum/windows_7-security/uac-message-do-you-want-to-allow-the-following/bea30ad8-9ef8-4897-aab4-841a65f7af71)

# paypal - 使用 Paypal Adaptive Payments API for Mobile Web 是正确的选择吗？

> ID：12748147
> 
> 赞同：0
> 
> 时间：2012-10-05T14:12:18.480
> 
> 标签：paypal, mobile-website, paypal-adaptive-payments, express-checkout

这是关于我的要求的更多信息。

我正在开发游戏的移动网站项目。人们可以在其中托管游戏和销售数字商品/游戏物品。我们不希望用户离开我们的网站，即使在付款时也是如此。是的，只想使用 Paypal 进行结帐体验。（所以我们可以继续讨论 Paypal 范围。）

Paypal 移动快速结帐：它将用户重定向到 Paypal 进行付款确认，并在付款完成/取消后返回。此外，在每次购买时，用户都需要对自己进行身份验证。（如果我有错误的理解，请纠正我。我已阅读 Paypal 的文档。）

贝宝自适应支付：它允许更多地处理用户体验，它在迷你浏览器或灯箱中弹出贝宝对话框。在桌面和移动应用程序上运行良好。（根据我的研究，尚未实施。）。

我们可以为移动网络使用自适应支付吗？对 Pre-Approval 支付流程更感兴趣。有没有人在这方面有工作经验？请分享您的经验和您必须面对的挑战。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:27:48.060

当然。我已经在 jQuery Mobile 应用程序中使用了 Preapproved Payments 和 Pay，而且效果非常好。

还有一件很酷的事情是，如果付款人批准，您实际上可以实时接受新付款，而不会中断他们的游戏。

# java - 如何在 Internet Explorer 中从 JavaScript 创建 Java 对象？

> ID：12748172
> 
> 赞同：2
> 
> 时间：2012-10-05T14:13:08.543
> 
> 标签：java, javascript, internet-explorer, applet, internet-explorer-9

让我们从通过这些步骤演示问题开始：

1.  在 Internet Explorer 9 和真正的浏览器（Firefox 或 Chrome）中打开一些加载 Java 小程序的网页。让我们以[http://javatester.org/version.html](http://javatester.org/version.html)为例。

2.  在 JavaScript 控制台中运行此代码：

    ```
    j = document.applets[0].Packages;
    image = new j.java.awt.image.BufferedImage(256, 256, 2);
    image.getWidth(); 
    ```

这适用于 Firefox 和 Chrome，它输出正确的图像宽度 256。但 Internet Explorer 失败，它在第二行显示此错误消息：

```
"java.lang.IllegalArgumentException: No method found matching name java.awt.image.BufferedImage and arguments []" 
```

知道为什么这会失败吗？我能够实例化具有默认构造函数的其他 Java 类。所以这段代码可以正常工作：

```
new j.java.util.Random().nextInt() 
```

那么，也许 Internet Explorer 或 Java 插件存在将参数传递给构造函数的错误？错误消息听起来像是 IE 尝试在没有任何参数的情况下调用构造函数（并且 BufferedImage 中没有默认构造函数）。

我对任何有助于我理解这个问题、修复它或找到解决方法的信息（可能是现有的错误报告）感兴趣。请注意，这个问题是关于从 JavaScript 实例化 java 对象，而不是如何创建图像。所以请不要回答有关使用 Canvas 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:02:31.153

您的代码似乎正确。不知道为什么 IE 会失败。

一种解决方法是在 java 中创建一个适配器，该适配器执行您正在执行的一些功能。然后从 javascript 调用这个适配器代码。

**编辑**

为了使它更通用，在你的 Java 类中创建一个这样的方法，它使用反射来实例化一个类。我没有测试过这段代码。

```
public Object instantiate(String className, Object... params) throws NoSuchMethodException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, ClassNotFoundException {
    Class cls = Class.forName(className);
    List<Class> paramClasses = new ArrayList();
    for (Object p : params) {
        paramClasses.add(p.getClass());
    }
    if (params.length == 0) {
        Constructor constructor = cls.getConstructor();
        return constructor.newInstance();
    }
    else {
        Constructor constructor = cls.getConstructor(paramClasses.toArray(new Class[paramClasses.size()]));
        return constructor.newInstance(params);
    }
} 
```

# youtube-api - 在 PHP 中集成实时流媒体视频

> ID：12748180
> 
> 赞同：3
> 
> 时间：2012-10-05T14:13:41.763
> 
> 标签：youtube-api

我怎样才能在我的网站和 youtube 中集成实时流媒体视频功能？我只是一个PHP程序员而已。我必须使用哪些其他技术来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:37:53.187

您是否尝试过仅在您的页面上使用标准 YouTube 嵌入？如果您访问特定直播的 YouTube 观看页面，该页面上应该有一个链接，您可以使用嵌入代码。

# javascript - 在href中插入图像的最佳方法

> ID：12748187
> 
> 赞同：2
> 
> 时间：2012-10-05T14:14:11.117
> 
> 标签：javascript, dom, greasemonkey, href

我正在寻找将带有 greasmonkey 的图像插入 href 的最佳方法。图片应该在现在文本（??????）所在的位置。

```
 // ==UserScript==
   // @name           ...
   // @description    ...
   // @include        http://website/
   // @version        1.0
   // ==/UserScript==
    var links = document.getElementsByClassName( 'xyz' );
    for ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    var newlink = document.createElement( 'a' );
    newlink.href = link.href.replace( 'value=10', 'value=20' );

    newlink.textContent = '??????';

    var nextNode = link.nextSibling;
    link.parentNode.insertBefore( newlink, nextNode );
    var delim = document.createTextNode( ' - ' );
    link.parentNode.insertBefore( delim, newlink );
    } 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:22:08.293

```
var links = document.getElementsByClassName( 'xyz' );
for ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    var newlink = document.createElement( 'a' );
    newlink.href = link.href.replace( 'value=10', 'value=20' );
    var the_image = document.createElement('img');
    the_image.src = '';//Place image source file path here
    newlink.appendChild(the_image);

    var nextNode = link.nextSibling;
    link.parentNode.insertBefore( newlink, nextNode );
    var delim = document.createTextNode( ' - ' );
    link.parentNode.insertBefore( delim, newlink );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:22:17.670

插入以下行而不是带有 的行`???`：

```
var myImg = document.createElement('img');
myImg.src= 'path/to/image';
newlink.appendChild(myImg); 
```

# asp.net-mvc - 包含一个列表的视图模型，该列表包含一个字符串列表在提交时不返回

> ID：12748190
> 
> 赞同：1
> 
> 时间：2012-10-05T14:14:28.330
> 
> 标签：asp.net-mvc, forms, razor

使用 MVC 我有一个 FormModel：

```
public class FormModel
{  
    public string Description { get; set; }
    public List<CustomList> CustomList { get; set; }

    public FormModel(){}
} 
```

FormModel 类由 CustomList 类的列表组成：

```
public class CustomList
{
    public int CustomListId { get; set; }
    public string Description { get; set; }
    public List<String> StringList{ get; set; }

public CustomerList(){}
} 
```

其中包含一个字符串列表。我想要实现的是设置一个表单，允许用户编辑 StringList 中的每个值。为此，我设置了我的视图：

```
@model CMS.Models.FormModel
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using(Html.BeginForm("DoStuff", "Create", Model))
{
    <div>
        <p>Description: @(Html.EditorFor(e => e.Description))</p>

        @for (int i = 0; i < Model.CustomList.Count; i++)
        {
            @Html.LabelFor(l => l.CustomList[i].Description)
            @Html.HiddenFor(h => h.CustomList[i].CustomListId)
            for (int a = 0; a < Model.CustomList[i].StringList.Count; a++)
            {
                @Html.EditorFor(e => e.CustomList[i].StringList[a])                                        
            }
        }
        <input type="submit" />
    <div>
} 
```

提交时，FormModel 中的描述被返回给控制器，但 CustomList 被返回为空。我检查了乔·史蒂文斯的一些链接，但似乎我遗漏了一些东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:46:42.120

代替：

```
@using(Html.BeginForm("DoStuff", "Create", Model)) 
```

尝试：

```
 @using(Html.BeginForm("DoStuff", "Create", FormMethod.Post)) 
```

希望这对你有用！

@Mystere Man我认为在构造函数中实例化列表不是问题。我从未听说过或经历过模型绑定的问题，尽管无论如何这始终是列表的好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:28:15.663

您需要在两个模型的构造函数中实例化一个空列表。默认模型绑定器不会为您创建空列表。由于没有列表对象，它不会绑定值。

否则它看起来是正确的。

# php - zend 自动加载器...自定义类。我如何让它工作？

> ID：12748192
> 
> 赞同：0
> 
> 时间：2012-10-05T14:14:29.923
> 
> 标签：php, zend-framework, zend-autoloader

我希望在 library/common 文件夹中创建自己的类文件集合

```
/library/common/*class files go in here* 
```

在文件夹中，我将有各种我想要提供的类文件

如

```
DecoratorSimple.php 
```

代码示例如下所示？

```
class Common_Decorator_SimpleInput extends Zend_Form_Decorator_Abstract
{
  // code goes in here
} 
```

我的问题是如何让 zend 应用程序自动加载公共文件夹中前缀为 Common_ 的任何内容

我尝试将以下内容添加到引导程序中，但它没有用

```
protected function _initTestAutoLoader(){

    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->registerNamespace('Common_');

    // try and load the class
    $testVar = new Common_Decorator_SimpleInput();
    var_dump($test);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:09:33.540

您的类名是否与库路径匹配...
例如 Common_Decorator_SimpleInput
必须在 /library/Common/Decorator/SimpleInput.php

# svg - plone页面中的svg代码

> ID：12748197
> 
> 赞同：3
> 
> 时间：2012-10-05T14:14:38.593
> 
> 标签：svg, plone

我一直在尝试让一个 SVG 元素显示在我的测试网站上，该网站在 Plone CMS 之上运行。

正如有关该主题的其他帖子已经解释的那样，我确保在“HTML 过滤器设置”中，SVG 不包含在“讨厌”或“剥离”标签列表中，并将其添加到“自定义标签”中。

尽管如此，尝试从 W3Cschools 嵌入一个简单的 SVG 示例，如下所示，不会显示该元素。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <circle cx="100" cy="50" r="40" stroke="black"
  stroke-width="2" fill="red"/>
</svg> 
```

嵌入带有“object”标签的 SVG 图像可以很好地显示 SVG 图像。

```
<object data="http://upload.wikimedia.org/wikipedia/en/c/ce/SVG-logo.svg"
type="image/svg+xml"></object> 
```

Plone 中是否有我忘记打开或关闭的设置？它不会是我的浏览器，因为 W3Cschools 示例在它自己的网站上显示得很好。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T08:14:51.100

禁用portal_transforms->safe_html，重新启动服务器并在编辑项目时单击“不使用可视编辑器进行编辑”，将起作用。但是，这需要负责任的编辑（选择安全密码、注销等），因为没有过滤可能会发生脚本攻击。

**编辑：** 还有其他可能性，无需触及 html-filter-settings，这取决于您的要求。一些想法：

*   在本地准备 svg 文件，将其作为图像上传，通过 TinyMCE 插入。
*   将collective.portlet.tal 分配给项目，插入代码，使用Products.ContentWellPortlets 将其放置在您想要的位置。

第一个允许通过 TinyMCE 在内容类型的文本字段中插入 svg，第二个允许编辑 svg-element TTW。但是，不能两者兼得，还是？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:29:09.517

您可能需要正确发送文档的内容类型（以表明它是 svg）。

# linux - 带有 mmap(MAP_FIXED) 的程序在 Linux 2.6.18 && glibc 2.5 上崩溃

> ID：12748202
> 
> 赞同：2
> 
> 时间：2012-10-05T14:14:56.940
> 
> 标签：linux, segmentation-fault, mmap

以下程序：

```
#include <stdio.h>
#include <assert.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

void generate_test_file(int count)
{
    FILE *f;
    int i;

    f = fopen("testfile", "w+");
    for (i=0;i<count;i++) {
            fwrite(&i, 1, sizeof(i), f);
    }
    fclose(f);

}

void test_mmap_directly()
{
    int fd;
    void *area_short, *area_long;

    generate_test_file(1024);
    fd = open("testfile", O_RDONLY);
    assert(fd>=0);

    area_short = mmap(0, 4096, PROT_READ, MAP_PRIVATE, fd, 0);
    assert(area_short != MAP_FAILED);

    generate_test_file(1024*1024);
    area_long = mmap(area_short, 4096*1024, PROT_READ, MAP_PRIVATE | MAP_FIXED, fd, 0);
    assert(area_long != MAP_FAILED);
    assert(area_short == area_long);
}

int main(int argc, char ** argv)
{
    test_mmap_directly();
/* Crashes on shutdown for libc 2.5 and kernel 2.6.18 (CentOS 5) */
} 
```

在我的 CentOS 5 机器上因 Segfault 关闭而崩溃。这是一个已知的错误吗，一般情况下不应该使用 MAP_FIXED 还是程序有问题。它在其他平台上也会崩溃吗？

谢谢你的帮助，

*   约翰内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:01:13.693

您是否忘记`munmap`在指针和`close`文件描述符上使用。如果你没有，那么问题很可能是`MAP_FIXED`

我在我的 debian（内核 2.6.32）上进行了测试，它在使用 MAP_FIXED 标志时导致 SEGFAULT 并且在没有标志的情况下工作（除了第二个 mmap 之后的断言失败，我认为这并不意外）。

根据[`man mmap`](http://linux.die.net/man/3/mmap)支持，`MAP_FIXED` 定义了实现，不鼓励支持。我自己从未使用过它，所以除了省略它之外，我想不出任何解决方案。

# javascript - 在数组或类似上使用 jQuery.find()

> ID：12748203
> 
> 赞同：1
> 
> 时间：2012-10-05T14:15:00.993
> 
> 标签：javascript, jquery

假设我有一个搜索框，其中输入的任何内容都存储为：

```
var search_input = $(this).val(); 
```

我将如何用这个值搜索我的数组？

```
var devices = [{"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},{"Device_ID":"44","Image":"Apple-iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}] 
```

因此，假设我的 search_input 变量中有 Amazon 或 Kindle 等，我希望它搜索数组并输出以下内容。这同样适用于任何键入的内容或数组中的任何内容

```
<div id="device">43</div>
<div id="image">Amazon-Kindle-Fire.png</div>
<div id="name">Amazon Kindle Fire</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T14:28:24.510

循环中的简单循环

```
var devices = [{"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},{"Device_ID":"44","Image":"Apple-iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}];

function findItem (term) {
    var items = [];
    for (var i=0;i<devices.length;i++) {
        var item = devices[i];
        for (var prop in item) {
            var detail = item[prop].toString().toLowerCase();
            if (detail.indexOf(term)>-1) {
                items.push(item);
                break;               
            }
        }
    }
    return items;
}

console.log( findItem("amazon") );  //returns one item
console.log( findItem("kindle") );  //returns one item
console.log( findItem("apple") );   //returns one item
console.log( findItem("tablet") );  //returns two items
console.log( findItem("nerd") );    //returns zero items
​ 
```

[jsFiddle](http://jsfiddle.net/Lk5mZ/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-21T20:41:18.657

我认为在这个问题中实现目标的更优雅的方法是使用`jQuery.grep()`——参见[http://api.jquery.com/jquery.grep/](http://api.jquery.com/jquery.grep/)

```
var search_input = $(this).val();
var devices = [
       {"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},
       {"Device_ID":"44","Image":"Apple-iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}
];

var matchingItems = $.grep(devices, function(e) {
            return (e["Manufacturer"].indexOf(search_input) > -1 ||
                    e["Model"].indexOf(search_input) > -1);
}); 
```

现在`matchingItems`包含一组在制造商或模型属性中具有 search_input 字词的项目，您可以在 html 中输出这些项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:17:37.603

我认为你需要：

```
jQuery.inArray() 
```

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T14:23:12.360

另一种方法是用映射（JavaScript 对象）替换您的数组，其中键是您要与 search_input 进行比较的值。这样，您只需查找密钥并获取对象。

```
var devices = {"Amazon Kindle": {"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},{"Device_ID":"44","Image":"Apple-iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}} 
```

第二步涉及将 JavaScript 对象转换为 XML，此处已在 SO 上回答了[将 JavaScript 对象序列化为 XML 的最佳方法是什么？](https://stackoverflow.com/questions/442242/whats-the-best-way-to-serialize-javascript-objects-to-xml)

# php - 如何在 JOOMLA 2.5 中的数据库中插入数据时转义引号

> ID：12748208
> 
> 赞同：-2
> 
> 时间：2012-10-05T14:15:15.360
> 
> 标签：php, mysql, joomla, joomla2.5

我正在尝试在数据库（mysql）中插入数据，但当我尝试使用单引号或双引号添加数据时没有成功。否则它工作正常（没有引号）。我知道我们必须`mysql_real_escape_string`在这种情况下使用。但我正在使用这个功能不起作用的 joomla 框架。

我的代码如下：

```
function insert($table, $array) {
$db = JFactory::getDBO();
 $query = "INSERT INTO ".$table;
  $fis = array();
  $vas = array();
  foreach($array as $field=>$val) {

 if(is_array($val)){
 $x= implode(",",$val);
 }
 else
 {
 $x=$val;
 }

   $fis[] = "`$field`";//you must verify keys of array outside of function;
                         //unknown keys will cause mysql errors;
                         //there is also sql injection risc;
    $vas[] = "'".$x."'";
  }
$query .= " (".implode(", ", $fis).") VALUES (".implode(", ", $vas).")";
$db->setQuery($query);
$db->query();
}
insert('#__storage_companies',JRequest::get( 'post' )); 
```

请告诉我如何摆脱这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:28:38.330

请参阅[JDatabaseDriver::quote](http://api.joomla.org/Joomla-Platform/Database/JDatabaseDriver.html#methodquote)。像使用`$db->quote($value)`。还要引用字段名称，请使用`$db->quoteName($value)`.

查看从 Joomla wiki[准备查询。](http://docs.joomla.org/Accessing_the_database_using_JDatabase#Preparing_the_query)

你的代码应该是这样的：

```
$fis[] = $db->nameQuote($field);
$vas[] = $db->quote($x); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T15:22:04.143

你不能自己逃避引号吗？

做就是了：

```
$val = str_replace(array("'", '"'), array("\\'", '\\"'), $val); 
```

# c++ - 为什么 ADL 优先于“std 命名空间”中的函数但等于用户定义命名空间中的函数？

> ID：12748212
> 
> 赞同：6
> 
> 时间：2012-10-05T14:15:27.187
> 
> 标签：c++, namespaces, using-directives, argument-dependent-lookup

我有两个用于演示目的的 ADL 片段。两个片段都已由 VC10、gcc 和 comeau C++ 编译器编译，并且所有三个的结果都是相同的。

**<1>针对用户定义命名空间的 using 指令的 ADL：**

```
#include <algorithm>
namespace N 
{ 
    struct T {}; 
    void swap(T,T) {} 
} 

namespace M 
{ 
    void swap(N::T,N::T) {} 
} 

int main() 
{ 
    using M::swap; 
    N::T o1,o2;
    swap(o1,o2); 
} 
```

编译结果：

```
error C2668: 'M::swap' : ambiguous call to overloaded function
could be 'void M::swap(N::T,N::T)'
or       'void N::swap(N::T,N::T)' [found using argument-dependent lookup] 
```

这是预期的，因为 ADL 不优先于正常查找结果加上 ADL 不是二等公民，ADL 搜索结果与正常（非 ADL）未限定查找联合。这就是为什么我们有歧义。

**<2>针对 std 命名空间的 using 指令的 ADL：**

```
#include <algorithm>
namespace N 
{ 
    struct T {}; 
    void swap(T,T) {}  //point 1
} 

namespace M 
{ 
    void swap(N::T,N::T) {} 
} 

int main() 
{ 
    using std::swap; 
    N::T o1,o2;
    swap(o1,o2); 
} 
```

这个编译好了。

The result is compiler choose ADL result(it take precedent of std::swap), meaning `N::swap()` at 'point 1' will be called. Only when in the absense of 'point 1'(say if I comment out that line), the compile will use the fall back `std::swap` instead.

Note this way has been used in many places as a way to overwrite the `std::swap`. But my question is, why does ADL takes precedence over 'std namespace'(case2) but is considered equal to user-defined namespace function(case1)?

Is there a paragraph in C++ standard that says so ?

================================================================================= Edit after reading useful answers, might be helpful to others.

So I have tweaked my snippet 1 & now the ambiguity is gone and compile apparantly prefer Nontemplate function when doing overloading resolution !

```
#include <algorithm>
namespace N 
{ 
    struct T {}; 
    void swap(T,T) {} 
} 

namespace M 
{ 
    template<class T>
    void swap(N::T,N::T) {} 
} 

int main() 
{ 
    using M::swap;
    N::T o1,o2;
    swap(o1,o2); //here compiler choose N::swap()
} 
```

I have also tweaked my snippet 2\. Just to make the ambiguity appear just for fun !

```
#include <algorithm>
namespace N 
{ 
    struct T {}; 

    template<class _Ty> inline
    void swap(_Ty& _Left, _Ty& _Right)
    {
        _Ty _Tmp = _Move(_Left);
        _Left = _Move(_Right);
        _Right = _Move(_Tmp);
    }
} 

namespace M 
{ 
    void swap(N::T,N::T) {} 
} 

int main() 
{ 
    using std::swap; 
    N::T o1,o2;
    swap(o1,o2); 
} 
```

gcc and comeau both say ambiguity as expected:

```
"std::swap" matches the argument list, the choices that match are:
            function template "void N::swap(_Ty &, _Ty &)"
            function template "void std::swap(_Tp &, _Tp &)" 
```

BTW VC10 stupid as usual let this one pass ok unless I remove the 'using std::swap'.

Just a bit more to write: C++ overloading can be tricky(30+ page in C++ standard), but at appendlix B of there is a very readable 10 page there...

Thanks for all the nice inputs, now it's clear.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T14:20:07.710

A function call happens in several stages^(†</sup>:)

1.  name lookup -> puts candidate functions in a so-called *overload set*
    *   this is the part where ADL happens if you have an unqualified name lookup
2.  template argument deduction -> for every template in the overload set
3.  overload resolution -> pick the best match

You're confusing part 1 with part 3\. The name lookup will actually put both `swap` functions in the overload set (`{N::swap, std::swap}`), but part 3 will decide, which one to call in the end.

Now, since `std::swap` is a template, and the standard says that non-template functions are *more specialized* than template functions when doing overload resolution, your `<2>` calls `N::swap`:

`§13.3.3 [over.match.best] p1`

> Given these definitions, a viable function `F1` is defined to be a better function than another viable function `F2` if [...]
> 
> *   `F1` is a non-template function and `F2` is a function template specialization [...]

* * *

† I recommend the first three videos of [this excellent series](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-) on the subject.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T14:23:59.933

Your test does not check whether ADL takes precedence or not over usual lookup, but rather how overload resolution determines the best match. The reason that the second test case works is that `std::swap` is a template, and when performing overload resolution on a perfect match (found by ADL) and a template, the non-templated function takes precedence.

# python - mmap 上的 ValueError - Python

> ID：12748213
> 
> 赞同：2
> 
> 时间：2012-10-05T14:15:30.340
> 
> 标签：python, mmap

我正在尝试像这样映射文件：

```
f= open('file.txt', 'r')
data= mmap.mmap(f.fileno(), 0) 
```

但我得到：

```
 data= mmap.mmap(f.fileno(), 0)
ValueError: mmap offset is greater than file size 
```

搜索了这个之后，我仍然无法弄清楚是什么问题，奇怪的是，这是半小时前的工作！有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:33:51.183

> 我将其从我的评论中移出，因为它对 OP 很有帮助。

您需要检查您的文件是否为空..`mmap.mmap`抛出异常，如果参数中的文件为空..

检查文档-> [http://docs.python.org/library/mmap.html](http://docs.python.org/library/mmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T21:41:16.363

我在第一次尝试从文件中读取 memmap 时使用 mode='r' 时遇到了这个错误（作为一种声明文件的那部分是 memmap 的方式）。在这种情况下，numpy 尝试从文件中读取数据，意识到文件不够长，并尝试扩展文件以便新的 memmap 可以坐在那里。我花了一段时间才意识到 numpy 在没有写权限的情况下无法以这种方式扩展文件。

# javascript - 另一个该死的 Uncaught SyntaxError: Unexpected token

> ID：12748214
> 
> 赞同：0
> 
> 时间：2012-10-05T14:15:31.803
> 
> 标签：javascript

我知道这些问题已经够多了，但我已经浏览了其中的*几个*，但没有一个建议对我有用。

这是我的 JS： http: [//pastebin.com/gUbtB2WP](http://pastebin.com/gUbtB2WP)

错误是：`Uncaught SyntaxError: Unexpected token .`

该行是 `WPIS_Configuration.init();`出于所有意图和目的，我已经完全删除了该行（以及之前/之后的行）并手动重写了它。

Sublime 通常会给你一个视觉指示，我在下面给出了这个指示：

[![崇高的截图](../Images/9c8c7c24e4996375bb6423e1bca25baf.png)](https://i.stack.imgur.com/Ua0ZT.jpg)

所以 - 在这一点上，我完全迷失和沮丧。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:18:57.507

在 WPIS_Configuration.init(); 之前，您永远不会关闭 JSON，添加“}”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:19:52.783

您还没有关闭从这里开始的对象文字：

```
var WPIS_Configuration = { 
```

解析器期望对象中有另一个标识符，而不是代码。

# jqgrid - 重新定义 jgrid navgrid 添加/编辑按钮

> ID：12748216
> 
> 赞同：0
> 
> 时间：2012-10-05T14:15:35.623
> 
> 标签：jqgrid

在 jqgrid 中，有什么方法可以重新定义在导航网格的“添加”按钮时调用的函数？

我发现的唯一一件事是[添加一个重新定义“onclickbutton”属性的新按钮](https://stackoverflow.com/questions/5286562/jqgrid-navgrid-button-calling-asp-net-mvc-view-how)，并且我查看[了代码](https://github.com/tonytomov/jqGrid/blob/master/js/grid.formedit.js#L1788)，但我认为这是不可能的，不是吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:07:45.033

在您引用的代码中，您可以找到代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.formedit.js#L1779-1783)。因此，您是否定义了可以实现自己的“添加”按钮实现的`addfunc` [选项。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#parameters)`navGrid`

或者，您可以只使用`add: false`选项，`navGrid`然后使用[navButtonAdd](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_buttons)添加您的自定义按钮，该按钮看起来与“添加”按钮完全相同。

# android - 如何将笔划应用于android中的按钮特定侧面

> ID：12748225
> 
> 赞同：0
> 
> 时间：2012-10-05T14:16:02.237
> 
> 标签：android, layer-list

如何将笔划应用于按钮的唯一两侧，即左边框和右边框？在安卓。

我已经应用了以下代码，但它不起作用

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<!-- This is the main color -->
<item>
      <shape>
            <solid android:color="#EEEEEE" />
      </shape>
</item>

<!-- This is the line -->
<item android:right="1dp">
     <shape>
           <solid android:color="#333333" />
     </shape>
</item>

<item android:left="1dp">
    <shape >
        <solid android:color="#333333"/>
    </shape>
</item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T14:44:41.703

你走在正确的轨道上。这可以解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
          <shape>
                <solid android:color="#EEEEEE" />
          </shape>
    </item>

    <!-- This is the line -->
    <item android:right="1dp" android:left="1dp">
         <shape>
               <solid android:color="#333333" />
         </shape>
    </item>

</layer-list> 
```

并将其用作按钮的背景。刚刚测试它 - 工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:11:01.833

我建议使用如下所示的 9-patch 可绘制对象：

![在此处输入图像描述](../Images/659a27006a1c5f22b3f1b65ca089196c.png)

它具有所需的黑色边框，在 0x333 颜色的每一侧各有 1px，其余填充为 0xeee。9-patch 随它们应用到的视图的大小而缩放。所以你可以把它作为背景或者src

# c - 在库和程序之间共享变量

> ID：12748229
> 
> 赞同：3
> 
> 时间：2012-10-05T14:16:20.473
> 
> 标签：c, linux, shared-libraries

我有 2 个共享库（让它们成为 1.so、2.so）和程序（a.out）。2.so 链接到 1.so 和 a.out - 它具有在 1 和 a 中使用的一些功能。

2.so的代码是

```
FILE *in;
char filename[128];
int func_printer(int a)
{
    if(strlen(filename)==0)
    {
       sprintf(filename,"%ld",time(NULL);
    }
    if((in=fopen(filename,"a"))==NULL)return;
    fprintf(in,"%i",a);
    fclose(in);
} 
```

a.out 有下一个

```
extern int func_printer(int);
extern void some_action();
int main()
{
    some_action();
    func_printer(2);
    return 0;
} 
```

最后 1.so 有方法 some_action

```
extern int func_printer(int);
void some_action()
{ 
    func_printer(1);
    printf("hello world");
    return;
} 
```

因此，当 a.out 启动时，它调用 1.so(some_action()) 并调用 2.so(func_printer)。它创建名称为时间戳（t1）的文件，并在其中写入一些信息。之后 1.so 调用 2.so(func_printer) 并创建另一个带有时间戳的文件。

在这种情况下是否有可能 some_action 总是写入 t1，但是当程序再次启动时，它应该写入另一个文件。总而言之，当程序启动时，所有库都应该知道要写入的文件名（无需像 char *filename="somefile.txt"; 那样硬预定义文件名）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:23:48.120

似乎唯一写入文件的是`2.so`. 只需公开一个二传手：

```
char filename[128];

void set_filename(char * path) {
    strncpy(filename, sizeof(filename), path);
    filename[sizeof(filename) - 1] = '\0';
}

int func_printer(int a)
{
    FILE *in;
    if(strlen(filename)==0) {
       sprintf(filename,"%ld",time(NULL);
    }
    if((in=fopen(filename,"a"))==NULL)return;
    fprintf(in,"%i",a);
    fclose(in);
} 
```

# asp.net - 将大数据发送到 WCF 服务

> ID：12748231
> 
> 赞同：0
> 
> 时间：2012-10-05T14:16:25.497
> 
> 标签：asp.net, wcf

* * *

你好，

我正在尝试从客户端应用程序将自定义数据发送到 WCF 网站。当我尝试发送可能大量的数据时它不起作用。

失败的指令是：

> `roleCliente.SaveStructure(role, ref s);`

“角色”包含自定义对象列表；当列表足够短时，该指令可以正常工作。

服务器端 web.config 是：

```
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <httpRuntime maxQueryStringLength="2097151"/>
  </system.web>

  <system.diagnostics>
        <sources>
           <source name="System.ServiceModel" switchValue="All">
             <listeners>
                  <add name="xmlTraceListener" />
               </listeners>
           </source>
           <source name="System.ServiceModel.MessageLogging" switchValue="All">
               <listeners>
                   <add name="xmlTraceListener" />
               </listeners>
           </source>
       </sources>
       <sharedListeners>
        <add name="xmlTraceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="ClientLogBasic.svclog" />
     </sharedListeners>
     <trace autoflush="true" />
 </system.diagnostics>

  <system.serviceModel>

    <diagnostics>
      <messageLogging maxMessagesToLog="10000" logEntireMessage="true" logMessagesAtServiceLevel="true" logMalformedMessages="true" logMessagesAtTransportLevel="true">
        <filters>
          <clear/>
        </filters>
      </messageLogging>
    </diagnostics>

    <behaviors>
      <endpointBehaviors>
        <behavior name="EndPointBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <basicHttpBinding>
        <binding name="CustomBinding" closeTimeout="00:10:00" openTimeout="00:10:00"
          sendTimeout="00:10:00" maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
          maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFAgency">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFAgency" contract="ServiceReference1.IWCFAgency" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCompetence">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCompetence" contract="ServiceReference1.IWCFCompetence" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCompetenceScheme">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCompetenceScheme"
          contract="ServiceReference1.IWCFCompetenceScheme" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFPerson">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFPerson" contract="ServiceReference1.IWCFCompetenceScheme" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCertificate">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCertificate" contract="ServiceReference1.IWCFCertificate" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFAttitude">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFAttitude" contract="ServiceReference1.IWCFAttitude" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFClassificationType">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFClassificationType"
          contract="ServiceReference1.IWCFClassificationType" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCompetenceDetail">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCompetenceDetail"
          contract="ServiceReference1.IWCFCompetenceDetail" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCompetencyDetail">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCompetencyDetail"
          contract="ServiceReference1.IWCFCompetencyDetail" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFCompetencyScheme">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFCompetencyScheme"
          contract="ServiceReference1.IWCFCompetencyScheme" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFContext">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFContext" contract="ServiceReference1.IWCFContext" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFEducation">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFEducation" contract="ServiceReference1.IWCFEducation" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFEvidence">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFEvidence" contract="ServiceReference1.IWCFEvidence" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFFormativeCredit">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFFormativeCredit"
          contract="ServiceReference1.IWCFFormativeCredit" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFInstructionalEntity">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFInstructionalEntity"
          contract="ServiceReference1.IWCFInstructionalEntity" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFKnowledge">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFKnowledge" contract="ServiceReference1.IWCFKnowledge" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFResponsibility">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFResponsibility"
          contract="ServiceReference1.IWCFResponsibility" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFRole">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFRole" contract="ServiceReference1.IWCFRole" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFRoleScheme">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
          bindingConfiguration="CustomBinding" name="WCFRoleScheme" contract="ServiceReference1.IWCFRoleScheme" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFScale">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          binding="basicHttpBinding" name="WCFScale" contract="ServiceReference1.IWCFScale" />
      </service>
      <service behaviorConfiguration="ServiceBehaviour" name="ServiceReference1.WCFSkill">
        <endpoint address="http://193.205.191.6/WCFSiretCM/WCFSiretCM.svc"
          binding="basicHttpBinding" name="WCFSkill" contract="ServiceReference1.IWCFSkill" />
      </service>
    </services>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

而客户端 web.config 是：

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <httpRuntime maxQueryStringLength="2097151"/>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="EndPointBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <basicHttpBinding>
        <binding name="CustomBinding" closeTimeout="00:10:00"
          openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
            maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>        
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFAgency" name="BasicHttpBinding_IWCFAgency" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFPerson" name="BasicHttpBinding_IWCFPerson" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFCertificate" name="BasicHttpBinding_IWCFCertificate" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFAttitude" name="BasicHttpBinding_IWCFAttitude" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFClassificationType" name="BasicHttpBinding_IWCFClassificationType" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFCompetence" name="BasicHttpBinding_IWCFCompetence" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFCompetenceDetail" name="BasicHttpBinding_IWCFCompetenceDetail" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFCompetenceScheme" name="BasicHttpBinding_IWCFCompetenceScheme" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFCompetencyDetail" name="BasicHttpBinding_IWCFCompetencyDetail" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding" 
        contract="ServiceReference1.IWCFCompetencyScheme" name="BasicHttpBinding_IWCFCompetencyScheme" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFContext" name="BasicHttpBinding_IWCFContext" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFEducation" name="BasicHttpBinding_IWCFEducation" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFEvidence" name="BasicHttpBinding_IWCFEvidence" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFFormativeCredit" name="BasicHttpBinding_IWCFFormativeCredit" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFInstructionalEntity" name="BasicHttpBinding_IWCFInstructionalEntity" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFKnowledge" name="BasicHttpBinding_IWCFKnowledge" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFResponsibility" name="BasicHttpBinding_IWCFResponsibility" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc"
        behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
        bindingConfiguration="CustomBinding" contract="ServiceReference1.IWCFRole"
        name="BasicHttpBinding_IWCFRole" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" 
        behaviorConfiguration="EndPointBehavior" binding="basicHttpBinding"
        bindingConfiguration="CustomBinding" contract="ServiceReference1.IWCFRoleScheme"
        name="BasicHttpBinding_IWCFRoleScheme" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFScale" name="BasicHttpBinding_IWCFScale" />
      <endpoint address="http://localhost/WCFSiretCM/WCFSiretCM.svc" behaviorConfiguration="EndPointBehavior"
        binding="basicHttpBinding" bindingConfiguration="CustomBinding"
        contract="ServiceReference1.IWCFSkill" name="BasicHttpBinding_IWCFSkill" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T16:51:50.737

如果您决定将消息分块以简单地增加最大配额或超时，那么实际上有两种选择。

**选项1：**自己分块

**选项 2：**频道分块 [http://msdn.microsoft.com/en-us/library/aa717050(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa717050(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:05:13.950

如果您想在 WCF 中发送大量数据，您可能可以使用 Streamed 模式。

[http://msdn.microsoft.com/en-us/library/ms731913.aspx](http://msdn.microsoft.com/en-us/library/ms731913.aspx)

[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

或者您可以使用解决方法并通过在服务中实现几种方法来分块传输数据，例如

```
StartUpload()

SendChunk(byte[] chunk)

EndUpload() 
```

# c# - 实现 IComparable

> ID：12748232
> 
> 赞同：6
> 
> 时间：2012-10-05T14:16:36.430
> 
> 标签：c#, generics

我在尝试调整 Jon Skeet 的书 C# 中的清单 3.4 时收到以下错误消息...

> 类型“list_3_4.Dog”不能用作泛型类型或方法“list_3_4.Program.CompareToDefault(T)”中的类型参数“T”。没有从“list_3_4.Dog”到“System.IComparable”的隐式引用转换。

这是我的代码...

```
using System;

namespace list_3_4
{
     class Program
     {
          static void Main(string[] args)
          {
               //string mystring;
               Dog d = new Dog("howie");

               Console.WriteLine(CompareToDefault("x"));
               Console.WriteLine(CompareToDefault(10));
               Console.WriteLine(CompareToDefault(0));
               Console.WriteLine(CompareToDefault(-10));              
               Console.WriteLine(CompareToDefault(DateTime.MinValue));

               Console.WriteLine(CompareToDefault(d));

               Console.ReadKey();
          }

          static int CompareToDefault<T> (T value) where T: IComparable<T>
          {
               return value.CompareTo(default(T));               
          }

     }

     public class Dog 
     {
          private string _name;

          public Dog(string name)
          {
               _name = name;
          }
         }
} 
```

如何添加像“狗”这样的引用类型来使用 Jon Skeets 代码列表？？？我知道 Dog 需要实现 IComparable 但我不知道怎么做！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T14:19:01.860

您通过说您需要一个类型`T`来定义方法`IComparable<T>`：

```
where T: IComparable<T> 
```

但是`Dog`没有实现`IComparable<Dog>`

你需要做：

```
public class Dog : IComparable<Dog>
{
 //this will allow you to do a quick name comparison
 public string Name { get; set;}
 public int CompareTo(Dog other)
 {//compare dogs by name
        return this._name.CompareTo(other.Name);
 }
} 
```

**注意**：`default(T)`将为引用类型返回**null**，因此您应该在某处进行 null 检查。阅读[msdn 上的默认值](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T14:20:20.800

你的`Dog`班级应该实现[`IComparable<T>`](https://msdn.microsoft.com/en-us/library/4d7sx9hd(v=vs.110).aspx).

```
 public class Dog: IComparable<Dog>
 {
      private string _name;

      public Dog(string name)
      {
           _name = name;
      }

      public int CompareTo( Dog other )
      {
           if (other == null)
               return 1;
           return string.Compare( _name, other._name );
      }
 } 
```

# arrays - 将多个对象数组从 Javascript 发布到 MVC

> ID：12748235
> 
> 赞同：0
> 
> 时间：2012-10-05T14:16:44.860
> 
> 标签：arrays, json, asp.net-mvc-3, posting

我找到了许多将 1 个对象数组发布到 MVC 的答案，但我正在努力解决多个问题。这可能是我想念的小东西。

这是我的 JS：

```
 $.ajax({
                type: "POST",
                url: encodeURI("<%:Url.Action("SaveSimulator")%>"),
                data: JSON.stringify({ 
                    gevelshapes: (gevelshapes), 
                    gevelgaten:(gevelgaten),
                    dakshapes:(dakshapes),
                    dakgaten:(dakgaten),
                    dakrandshapes:(dakrandshapes), 
                    dakrandgaten:(dakrandgaten) 
                }),
                success: function(data){
                    $("form").submit();
                },
                contentType: 'application/json',
                dataType: "json"
            }); 
```

这些是包含具有 x 和 y 坐标的对象的数组。像这样：

```
var gevelshapes = [{ x: "1", y: "2" },{ x: "2", y: "1" }]; 
```

我的 MVC 控制器如下所示：

```
[HttpPost]
    public JsonResult SaveSimulator(List<Coordinaat> gevelshapes , List<Coordinaat> dakrandshapes, List<Coordinaat> dakshapes,List<Coordinaat> gevelgaten , List<Coordinaat> dakrandgaten, List<Coordinaat> dakgaten)
    {

        //do something 
    } 
```

我遗漏了一些东西，因为 MVC 认为它`List<Coordinaat> gevelshapes`有 1 个带有空 x 和 y 字符串的对象，而不是带有 2 个“coordinaat”对象的数组。

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:37:36.377

也许我错了，但 mvc 不会自动解析 Json 字符串。试试这样：

```
 $.ajax({
            type: "POST",
            url: encodeURI("<%:Url.Action("SaveSimulator")%>"),
            data: { x : JSON.stringify({ 
                gevelshapes: (gevelshapes), 
                gevelgaten:(gevelgaten),
                dakshapes:(dakshapes),
                dakgaten:(dakgaten),
                dakrandshapes:(dakrandshapes), 
                dakrandgaten:(dakrandgaten) 
            }) },
            success: function(data){
                $("form").submit();
            },
            contentType: 'application/json',
            dataType: "json"
        });

[HttpPost]
public JsonResult SaveSimulator(string x)
{
     var serializer = new JavaScriptSerializer();
     var result = serializer.Deserialize<object>(x); // You can cast to your preffered class
     // ...
} 
```

# sql - oracle查询：在某些条件下获取最大值

> ID：12748239
> 
> 赞同：0
> 
> 时间：2012-10-05T14:16:54.873
> 
> 标签：sql, oracle, plsql

我有一个名为 service_t 的表，它有一个列 Effective_dt，其中填充了 unix 时间戳。我需要找到最大有效dt 的所有行，但有效dt 必须小于给定值。我有以下sql，但我认为它效率不高：

```
Select *
  from service_t t1
 where t1.effective_dt <= :given_value
   and t1.effective_dt = (select max(effective_dt)
                            from service_t t2
                           where t2.effective_dt <= :given_value
                             and t1.id = t2.id) 
```

这是有效的还是任何其他好的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:21:59.033

使用分析函数可能更有效：

```
Select * from (
  select t1.*, 
       dense_rank() over (partition by id order by effective_dt desc) rn
  from service_t t1
 where t1.effective_dt <= :given_value)
where rn = 1 
```

# eclipse - Eclipse：连接和配置 Hibernate

> ID：12748245
> 
> 赞同：0
> 
> 时间：2012-10-05T14:17:10.887
> 
> 标签：eclipse, hibernate, eclipse-plugin, dali

我是日食的新手。我正在尝试使用 Hibernate。Java ee IDE 版本 Juno 和 Hibernate Tools 版本 3.5.1。在 IDE 的数据库开发中，我创建了一个数据源，并测试了连接，它工作正常。然后我创建了一个 Hibernate 配置文件 hibernate.cfg.xml 然后我创建了一个 Hibernate 控制台配置 当我尝试刷新控制台配置或尝试创建逆向工程文件时，出现错误“期间发生内部错误：获取 TestHiber01.plugin org.eclipse.core.jobs 的子项。所有错误日志为：

```
eclipse.buildId=M20120914-1800
java.version=1.6.0_25
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=it_IT
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

Error
Fri Oct 05 16:03:24 CEST 2012
An internal error occurred during: "Fetching children of TestHiber01".

java.lang.NoSuchMethodError: org.eclipse.jpt.jpa.core.JptJpaCorePlugin.getJpaProjectManager()Lorg/eclipse/jpt/jpa/core/JpaProjectManager;
    at org.jboss.tools.hibernate.jpt.core.internal.HibernateJptPlugin$1.revalidateProjects(HibernateJptPlugin.java:108)
    at org.jboss.tools.hibernate.jpt.core.internal.HibernateJptPlugin$1.configurationBuilt(HibernateJptPlugin.java:127)
    at org.hibernate.console.KnownConfigurations$1$3.notify(KnownConfigurations.java:94)
    at org.hibernate.console.KnownConfigurations$Notification.run(KnownConfigurations.java:123)
    at org.hibernate.console.KnownConfigurations.fireNotification(KnownConfigurations.java:259)
    at org.hibernate.console.KnownConfigurations.access$0(KnownConfigurations.java:253)
    at org.hibernate.console.KnownConfigurations$1.configurationBuilt(KnownConfigurations.java:92)
    at org.hibernate.console.ConsoleConfiguration.fireConfigurationBuilt(ConsoleConfiguration.java:320)
    at org.hibernate.console.ConsoleConfiguration.build(ConsoleConfiguration.java:190)
    at org.hibernate.eclipse.console.workbench.ConsoleConfigurationWorkbenchAdapter.getChildren(ConsoleCon

figurationWorkbenchAdapter.java:42)     at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.getChildren(BasicWorkbenchAdapter.java:100)    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)  at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

hibernate.cfg 文件是：

```
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">XXXXX</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mydb</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
</session-factory> 
```

这是什么意思？为什么连接不上数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:02:38.730

Hibernate Tools 3.5.1 依赖于 Eclipse Indigo。您遇到了兼容性问题。

当我使用[JBoss Juno 更新站点](http://download.jboss.org/jbosstools/updates/development/juno/)时，我看到这个版本的 Hibernate Tools 可供安装：Hibernate Tools 3.6.0.Alpha1-v20120910-1507-H32。这是相应的[JBoss 问题](https://issues.jboss.org/browse/JBIDE-11469)。

# algorithm - Sorting 1 million 8-decimal-digit numbers with 1 MB of RAM

> ID：12748246
> 
> 赞同：760
> 
> 时间：2012-10-05T14:17:12.867
> 
> 标签：algorithm, sorting, embedded, ram

I have a computer with 1 MB of RAM and no other local storage. I must use it to accept 1 million 8-digit decimal numbers over a TCP connection, sort them, and then send the sorted list out over another TCP connection.

The list of numbers may contain duplicates, which I must not discard. The code will be placed in ROM, so I need not subtract the size of my code from the 1 MB. I already have code to drive the Ethernet port and handle TCP/IP connections, and it requires 2 KB for its state data, including a 1 KB buffer via which the code will read and write data. Is there a solution to this problem?

**Sources Of Question And Answer:**

[slashdot.org](http://tech.slashdot.org/comments.pl?sid=232757&cid=18925745)

[cleaton.net](https://web.archive.org/web/20160309195130/http://nick.cleaton.net/ramsort.html)

* * *

## 回答 #1

> 赞同：784
> 
> 时间：2012-10-21T17:15:50.720

There is one rather sneaky trick not mentioned here so far. We assume that you have no extra way to store data, but that is not strictly true.

One way around your problem is to do the following horrible thing, which should not be attempted by anyone under any circumstances: Use the network traffic to store data. And no, I don't mean NAS.

You can sort the numbers with only a few bytes of RAM in the following way:

*   First take 2 variables: `COUNTER` and `VALUE`.
*   First set all registers to `0`;
*   Every time you receive an integer `I`, increment `COUNTER` and set `VALUE` to `max(VALUE, I)`;
*   Then send an ICMP echo request packet with data set to `I` to the router. Erase `I` and repeat.
*   Every time you receive the returned ICMP packet, you simply extract the integer and send it back out again in another echo request. This produces a huge number of ICMP requests scuttling backward and forward containing the integers.

Once `COUNTER` reaches `1000000`, you have all of the values stored in the incessant stream of ICMP requests, and `VALUE` now contains the maximum integer. Pick some `threshold T >> 1000000`. Set `COUNTER` to zero. Every time you receive an ICMP packet, increment `COUNTER` and send the contained integer `I` back out in another echo request, unless `I=VALUE`, in which case transmit it to the destination for the sorted integers. Once `COUNTER=T`, decrement `VALUE` by `1`, reset `COUNTER` to zero and repeat. Once `VALUE` reaches zero you should have transmitted all integers in order from largest to smallest to the destination, and have only used about 47 bits of RAM for the two persistent variables (and whatever small amount you need for the temporary values).

I know this is horrible, and I know there can be all sorts of practical issues, but I thought it might give some of you a laugh or at least horrify you.

* * *

## 回答 #2

> 赞同：428
> 
> 时间：2012-10-25T11:42:16.240

[Here's some working C++ code](https://gist.github.com/3952090) which solves the problem.

~~Proof that the memory constraints are satisfied:~~

**Editor:** There is no proof of the maximum memory requirements offered by the author either in this post or in his blogs. Since the number of bits necessary to encode a value depends on the values previously encoded, such a proof is likely non-trivial. The author notes that the largest encoded size he could stumble upon empirically was `1011732`, and chose the buffer size `1013000` arbitrarily.

```
typedef unsigned int u32;

namespace WorkArea
{
    static const u32 circularSize = 253250;
    u32 circular[circularSize] = { 0 };         // consumes 1013000 bytes

    static const u32 stageSize = 8000;
    u32 stage[stageSize];                       // consumes 32000 bytes

    ... 
```

Together, these two arrays take 1045000 bytes of storage. That leaves 1048576 - 1045000 - 2×1024 = 1528 bytes for remaining variables and stack space.

It runs in about 23 seconds on my Xeon W3520\. You can verify that the program works using the following Python script, assuming a program name of `sort1mb.exe`.

```
from subprocess import *
import random

sequence = [random.randint(0, 99999999) for i in xrange(1000000)]

sorter = Popen('sort1mb.exe', stdin=PIPE, stdout=PIPE)
for value in sequence:
    sorter.stdin.write('%08d\n' % value)
sorter.stdin.close()

result = [int(line) for line in sorter.stdout]
print('OK!' if result == sorted(sequence) else 'Error!') 
```

A detailed explanation of the algorithm can be found in the following series of posts:

*   [1MB Sorting Explained](http://preshing.com/20121026/1mb-sorting-explained)
*   [Arithmetic Coding and the 1MB Sorting Problem](http://preshing.com/20121105/arithmetic-coding-and-the-1mb-sorting-problem)
*   [Arithmetic Encoding Using Fixed-Point Math](http://preshing.com/20121105/arithmetic-encoding-using-fixed-point-math)

* * *

## 回答 #3

> 赞同：373
> 
> 时间：2012-10-19T20:43:59.063

**Please see the [first correct answer](https://stackoverflow.com/questions/12748246/sorting-1-million-8-digit-numbers-in-1mb-of-ram/12978097#12978097) or [the later answer with arithmetic encoding](https://stackoverflow.com/a/13067807/448474).** Below you may find some fun, but not a 100% bullet-proof solution.

This is quite an interesting task and here is an another solution. I hope somebody would find the result useful (or at least interesting).

**Stage 1: Initial data structure, rough compression approach, basic results**

Let's do some simple math: we have 1M (1048576 bytes) of RAM initially available to store 10^6 8 digit decimal numbers. [0;99999999]. So to store one number 27 bits are needed (taking the assumption that unsigned numbers will be used). Thus, to store a raw stream ~3.5M of RAM will be needed. Somebody already said it doesn't seem to be feasible, but I would say the task can be solved if the input is "good enough". Basically, the idea is to compress the input data with compression factor 0.29 or higher and do sorting in a proper manner.

Let's solve the compression issue first. There are some relevant tests already available:

[http://www.theeggeadventure.com/wikimedia/index.php/Java_Data_Compression](http://www.theeggeadventure.com/wikimedia/index.php/Java_Data_Compression)

> "I ran a test to compress one million consecutive integers using various forms of compression. The results are as follows:"

```
None     4000027
Deflate  2006803
Filtered 1391833
BZip2    427067
Lzma     255040 
```

It looks like LZMA ([Lempel–Ziv–Markov chain algorithm](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm)) is a good choice to continue with. I've prepared a simple PoC, but there are still some details to be highlighted:

1.  Memory is limited so the idea is to presort numbers and use compressed buckets (dynamic size) as temporary storage
2.  It is easier to achieve a better compression factor with presorted data, so there is a static buffer for each bucket (numbers from the buffer are to be sorted before LZMA)
3.  Each bucket holds a specific range, so the final sort can be done for each bucket separately
4.  Bucket's size can be properly set, so there will be enough memory to decompress stored data and do the final sort for each bucket separately

![In-memory sorting](../Images/50e2975c5118538b9a71da81540ed4c9.png)

**Please note, attached code is a [POC](http://en.wikipedia.org/wiki/Proof_of_Concept), it can't be used as a final solution, it just demonstrates the idea of using several smaller buffers to store presorted numbers in some optimal way (possibly compressed). LZMA is not proposed as a final solution. It is used as a fastest possible way to introduce a compression to this PoC.**

See the PoC code below (please note it just a demo, to compile it [LZMA-Java](https://github.com/jponge/lzma-java) will be needed):

```
public class MemorySortDemo {

static final int NUM_COUNT = 1000000;
static final int NUM_MAX   = 100000000;

static final int BUCKETS      = 5;
static final int DICT_SIZE    = 16 * 1024; // LZMA dictionary size
static final int BUCKET_SIZE  = 1024;
static final int BUFFER_SIZE  = 10 * 1024;
static final int BUCKET_RANGE = NUM_MAX / BUCKETS;

static class Producer {
    private Random random = new Random();
    public int produce() { return random.nextInt(NUM_MAX); }
}

static class Bucket {
    public int size, pointer;
    public int[] buffer = new int[BUFFER_SIZE];

    public ByteArrayOutputStream tempOut = new ByteArrayOutputStream();
    public DataOutputStream tempDataOut = new DataOutputStream(tempOut);
    public ByteArrayOutputStream compressedOut = new ByteArrayOutputStream();

    public void submitBuffer() throws IOException {
        Arrays.sort(buffer, 0, pointer);

        for (int j = 0; j < pointer; j++) {
            tempDataOut.writeInt(buffer[j]);
            size++;
        }            
        pointer = 0;
    }

    public void write(int value) throws IOException {
        if (isBufferFull()) {
            submitBuffer();
        }
        buffer[pointer++] = value;
    }

    public boolean isBufferFull() {
        return pointer == BUFFER_SIZE;
    }

    public byte[] compressData() throws IOException {
        tempDataOut.close();
        return compress(tempOut.toByteArray());
    }        

    private byte[] compress(byte[] input) throws IOException {
        final BufferedInputStream in = new BufferedInputStream(new ByteArrayInputStream(input));
        final DataOutputStream out = new DataOutputStream(new BufferedOutputStream(compressedOut));

        final Encoder encoder = new Encoder();
        encoder.setEndMarkerMode(true);
        encoder.setNumFastBytes(0x20);
        encoder.setDictionarySize(DICT_SIZE);
        encoder.setMatchFinder(Encoder.EMatchFinderTypeBT4);

        ByteArrayOutputStream encoderPrperties = new ByteArrayOutputStream();
        encoder.writeCoderProperties(encoderPrperties);
        encoderPrperties.flush();
        encoderPrperties.close();

        encoder.code(in, out, -1, -1, null);
        out.flush();
        out.close();
        in.close();

        return encoderPrperties.toByteArray();
    }

    public int[] decompress(byte[] properties) throws IOException {
        InputStream in = new ByteArrayInputStream(compressedOut.toByteArray());
        ByteArrayOutputStream data = new ByteArrayOutputStream(10 * 1024);
        BufferedOutputStream out = new BufferedOutputStream(data);

        Decoder decoder = new Decoder();
        decoder.setDecoderProperties(properties);
        decoder.code(in, out, 4 * size);

        out.flush();
        out.close();
        in.close();

        DataInputStream input = new DataInputStream(new ByteArrayInputStream(data.toByteArray()));
        int[] array = new int[size];
        for (int k = 0; k < size; k++) {
            array[k] = input.readInt();
        }

        return array;
    }
}

static class Sorter {
    private Bucket[] bucket = new Bucket[BUCKETS];

    public void doSort(Producer p, Consumer c) throws IOException {

        for (int i = 0; i < bucket.length; i++) {  // allocate buckets
            bucket[i] = new Bucket();
        }

        for(int i=0; i< NUM_COUNT; i++) {         // produce some data
            int value = p.produce();
            int bucketId = value/BUCKET_RANGE;
            bucket[bucketId].write(value);
            c.register(value);
        }

        for (int i = 0; i < bucket.length; i++) { // submit non-empty buffers
            bucket[i].submitBuffer();
        }

        byte[] compressProperties = null;
        for (int i = 0; i < bucket.length; i++) { // compress the data
            compressProperties = bucket[i].compressData();
        }

        printStatistics();

        for (int i = 0; i < bucket.length; i++) { // decode & sort buckets one by one
            int[] array = bucket[i].decompress(compressProperties);
            Arrays.sort(array);

            for(int v : array) {
                c.consume(v);
            }
        }
        c.finalCheck();
    }

    public void printStatistics() {
        int size = 0;
        int sizeCompressed = 0;

        for (int i = 0; i < BUCKETS; i++) {
            int bucketSize = 4*bucket[i].size;
            size += bucketSize;
            sizeCompressed += bucket[i].compressedOut.size();

            System.out.println("  bucket[" + i
                    + "] contains: " + bucket[i].size
                    + " numbers, compressed size: " + bucket[i].compressedOut.size()
                    + String.format(" compression factor: %.2f", ((double)bucket[i].compressedOut.size())/bucketSize));
        }

        System.out.println(String.format("Data size: %.2fM",(double)size/(1014*1024))
                + String.format(" compressed %.2fM",(double)sizeCompressed/(1014*1024))
                + String.format(" compression factor %.2f",(double)sizeCompressed/size));
    }
}

static class Consumer {
    private Set<Integer> values = new HashSet<>();

    int v = -1;
    public void consume(int value) {
        if(v < 0) v = value;

        if(v > value) {
            throw new IllegalArgumentException("Current value is greater than previous: " + v + " > " + value);
        }else{
            v = value;
            values.remove(value);
        }
    }

    public void register(int value) {
        values.add(value);
    }

    public void finalCheck() {
        System.out.println(values.size() > 0 ? "NOT OK: " + values.size() : "OK!");
    }
}

public static void main(String[] args) throws IOException {
    Producer p = new Producer();
    Consumer c = new Consumer();
    Sorter sorter = new Sorter();

    sorter.doSort(p, c);
}
} 
```

With random numbers it produces the following:

```
bucket[0] contains: 200357 numbers, compressed size: 353679 compression factor: 0.44
bucket[1] contains: 199465 numbers, compressed size: 352127 compression factor: 0.44
bucket[2] contains: 199682 numbers, compressed size: 352464 compression factor: 0.44
bucket[3] contains: 199949 numbers, compressed size: 352947 compression factor: 0.44
bucket[4] contains: 200547 numbers, compressed size: 353914 compression factor: 0.44
Data size: 3.85M compressed 1.70M compression factor 0.44 
```

For a simple ascending sequence (one bucket is used) it produces:

```
bucket[0] contains: 1000000 numbers, compressed size: 256700 compression factor: 0.06
Data size: 3.85M compressed 0.25M compression factor 0.06 
```

**EDIT**

**Conclusion:**

1.  Don't try to fool the [Nature](http://en.wikipedia.org/wiki/Lossless_compression#Limitations)
2.  Use simpler compression with lower memory footprint
3.  Some additional clues are really needed. Common bullet-proof solution does not seem to be feasible.

**Stage 2: Enhanced compression, final conclusion**

As was already mentioned in the previous section, any suitable compression technique can be used. So let's get rid of LZMA in favor of simpler and better (if possible) approach. There are a lot of good solutions including [Arithmetic coding](http://en.wikipedia.org/wiki/Arithmetic_coding), [Radix tree](http://en.wikipedia.org/wiki/Radix_tree) etc.

Anyway, simple but useful encoding scheme will be more illustrative than yet another external library, providing some nifty algorithm. The actual solution is pretty straightforward: since there are buckets with partially sorted data, deltas can be used instead of numbers.

![encoding scheme](../Images/bb0e8b1be2cc8a22770fa95476325724.png)

Random input test shows slightly better results:

```
bucket[0] contains: 10103 numbers, compressed size: 13683 compression factor: 0.34
bucket[1] contains: 9885 numbers, compressed size: 13479 compression factor: 0.34
...
bucket[98] contains: 10026 numbers, compressed size: 13612 compression factor: 0.34
bucket[99] contains: 10058 numbers, compressed size: 13701 compression factor: 0.34
Data size: 3.85M compressed 1.31M compression factor 0.34 
```

Sample code

```
 public static void encode(int[] buffer, int length, BinaryOut output) {
    short size = (short)(length & 0x7FFF);

    output.write(size);
    output.write(buffer[0]);

    for(int i=1; i< size; i++) {
        int next = buffer[i] - buffer[i-1];
        int bits = getBinarySize(next);

        int len = bits;

        if(bits > 24) {
          output.write(3, 2);
          len = bits - 24;
        }else if(bits > 16) {
          output.write(2, 2);
          len = bits-16;
        }else if(bits > 8) {
          output.write(1, 2);
          len = bits - 8;
        }else{
          output.write(0, 2);
        }

        if (len > 0) {
            if ((len % 2) > 0) {
                len = len / 2;
                output.write(len, 2);
                output.write(false);
            } else {
                len = len / 2 - 1;
                output.write(len, 2);
            }

            output.write(next, bits);
        }
    }
}

public static short decode(BinaryIn input, int[] buffer, int offset) {
    short length = input.readShort();
    int value = input.readInt();
    buffer[offset] = value;

    for (int i = 1; i < length; i++) {
        int flag = input.readInt(2);

        int bits;
        int next = 0;
        switch (flag) {
            case 0:
                bits = 2 * input.readInt(2) + 2;
                next = input.readInt(bits);
                break;
            case 1:
                bits = 8 + 2 * input.readInt(2) +2;
                next = input.readInt(bits);
                break;
            case 2:
                bits = 16 + 2 * input.readInt(2) +2;
                next = input.readInt(bits);
                break;
            case 3:
                bits = 24 + 2 * input.readInt(2) +2;
                next = input.readInt(bits);
                break;
        }

        buffer[offset + i] = buffer[offset + i - 1] + next;
    }

   return length;
} 
```

Please note, this approach:

1.  does not consume a lot of memory
2.  works with streams
3.  provides not so bad results

Full code can be found [here](http://renat.in.ua/web/stackoverflow/MemorySortDemo.java), BinaryInput and BinaryOutput implementations can be found [here](http://introcs.cs.princeton.edu/java/stdlib/)

**Final conclusion**

No final conclusion :) Sometimes it is really good idea to move one level up and review the task from a [meta-level](http://en.wikipedia.org/wiki/G%C3%B6del,_Escher,_Bach) point of view.

It was fun to spend some time with this task. BTW, there are a lot of interesting answers below. Thank you for your attention and happy codding.

* * *

## 回答 #4

> 赞同：187
> 
> 时间：2012-10-19T16:00:13.923

A solution is possible only because of the difference between 1 megabyte and 1 million bytes. There are about 2 to the power 8093729.5 different ways to choose 1 million 8-digit numbers with duplicates allowed and order unimportant, so a machine with only 1 million bytes of RAM doesn't have enough states to represent all the possibilities. But 1M (less 2k for TCP/IP) is 1022*1024*8 = 8372224 bits, so a solution is possible.

**Part 1, initial solution**

This approach needs a little more than 1M, I'll refine it to fit into 1M later.

I'll store a compact sorted list of numbers in the range 0 to 99999999 as a sequence of sublists of 7-bit numbers. The first sublist holds numbers from 0 to 127, the second sublist holds numbers from 128 to 255, etc. 100000000/128 is exactly 781250, so 781250 such sublists will be needed.

Each sublist consists of a 2-bit sublist header followed by a sublist body. The sublist body takes up 7 bits per sublist entry. The sublists are all concatenated together, and the format makes it possible to tell where one sublist ends and the next begins. The total storage required for a fully populated list is 2*781250 + 7*1000000 = 8562500 bits, which is about 1.021 M-bytes.

The 4 possible sublist header values are:

**00** Empty sublist, nothing follows.

**01** Singleton, there is only one entry in the sublist and and next 7 bits hold it.

**10** The sublist holds at least 2 distinct numbers. The entries are stored in non-decreasing order, except that the last entry is less than or equal to the first. This allows the end of the sublist to be identified. For example, the numbers 2,4,6 would be stored as (4,6,2). The numbers 2,2,3,4,4 would be stored as (2,3,4,4,2).

**11** The sublist holds 2 or more repetitions of a single number. The next 7 bits give the number. Then come zero or more 7-bit entries with the value 1, followed by a 7-bit entry with the value 0\. The length of the sublist body dictates the number of repetitions. For example, the numbers 12,12 would be stored as (12,0), the numbers 12,12,12 would be stored as (12,1,0), 12,12,12,12 would be (12,1,1,0) and so on.

I start off with an empty list, read a bunch of numbers in and store them as 32 bit integers, sort the new numbers in place (using heapsort, probably) and then merge them into a new compact sorted list. Repeat until there are no more numbers to read, then walk the compact list once more to generate the output.

The line below represents memory just before the start of the list merge operation. The "O"s are the region that hold the sorted 32-bit integers. The "X"s are the region that hold the old compact list. The "=" signs are the expansion room for the compact list, 7 bits for each integer in the "O"s. The "Z"s are other random overhead.

```
ZZZOOOOOOOOOOOOOOOOOOOOOOOOOO==========XXXXXXXXXXXXXXXXXXXXXXXXXX 
```

The merge routine starts reading at the leftmost "O" and at the leftmost "X", and starts writing at the leftmost "=". The write pointer doesn't catch the compact list read pointer until all of the new integers are merged, because both pointers advance 2 bits for each sublist and 7 bits for each entry in the old compact list, and there is enough extra room for the 7-bit entries for the new numbers.

**Part 2, cramming it into 1M**

To Squeeze the solution above into 1M, I need to make the compact list format a bit more compact. I'll get rid of one of the sublist types, so that there will be just 3 different possible sublist header values. Then I can use "00", "01" and "1" as the sublist header values and save a few bits. The sublist types are:

A Empty sublist, nothing follows.

B Singleton, there is only one entry in the sublist and and next 7 bits hold it.

C The sublist holds at least 2 distinct numbers. The entries are stored in non-decreasing order, except that the last entry is less than or equal to the first. This allows the end of the sublist to be identified. For example, the numbers 2,4,6 would be stored as (4,6,2). The numbers 2,2,3,4,4 would be stored as (2,3,4,4,2).

D The sublist consists of 2 or more repetitions of a single number.

My 3 sublist header values will be "A", "B" and "C", so I need a way to represent D-type sublists.

Suppose I have the C-type sublist header followed by 3 entries, such as "C[17][101][58]". This can't be part of a valid C-type sublist as described above, since the third entry is less than the second but more than the first. I can use this type of construct to represent a D-type sublist. In bit terms, anywhere I have "C{00?????}{1??????}{01?????}" is an impossible C-type sublist. I'll use this to represent a sublist consisting of 3 or more repetitions of a single number. The first two 7-bit words encode the number (the "N" bits below) and are followed by zero or more {0100001} words followed by a {0100000} word.

```
For example, 3 repetitions: "C{00NNNNN}{1NN0000}{0100000}", 4 repetitions: "C{00NNNNN}{1NN0000}{0100001}{0100000}", and so on. 
```

That just leaves lists that hold exactly 2 repetitions of a single number. I'll represent those with another impossible C-type sublist pattern: "C{0??????}{11?????}{10?????}". There's plenty of room for the 7 bits of the number in the first 2 words, but this pattern is longer than the sublist that it represents, which makes things a bit more complex. The five question-marks at the end can be considered not part of the pattern, so I have: "C{0NNNNNN}{11N????}10" as my pattern, with the number to be repeated stored in the "N"s. That's 2 bits too long.

I'll have to borrow 2 bits and pay them back from the 4 unused bits in this pattern. When reading, on encountering "C{0NNNNNN}{11N00AB}10", output 2 instances of the number in the "N"s, overwrite the "10" at the end with bits A and B, and rewind the read pointer by 2 bits. Destructive reads are ok for this algorithm, since each compact list gets walked only once.

When writing a sublist of 2 repetitions of a single number, write "C{0NNNNNN}11N00" and set the borrowed bits counter to 2\. At every write where the borrowed bits counter is non-zero, it is decremented for each bit written and "10" is written when the counter hits zero. So the next 2 bits written will go into slots A and B, and then the "10" will get dropped onto the end.

With 3 sublist header values represented by "00", "01" and "1", I can assign "1" to the most popular sublist type. I'll need a small table to map sublist header values to sublist types, and I'll need an occurrence counter for each sublist type so that I know what the best sublist header mapping is.

The worst case minimal representation of a fully populated compact list occurs when all the sublist types are equally popular. In that case I save 1 bit for every 3 sublist headers, so the list size is 2*781250 + 7*1000000 - 781250/3 = 8302083.3 bits. Rounding up to a 32 bit word boundary, thats 8302112 bits, or 1037764 bytes.

1M minus the 2k for TCP/IP state and buffers is 1022*1024 = 1046528 bytes, leaving me 8764 bytes to play with.

But what about the process of changing the sublist header mapping ? In the memory map below, "Z" is random overhead, "=" is free space, "X" is the compact list.

```
ZZZ=====XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

Start reading at the leftmost "X" and start writing at the leftmost "=" and work right. When it's done the compact list will be a little shorter and it will be at the wrong end of memory:

```
ZZZXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX======= 
```

So then I'll need to shunt it to the right:

```
ZZZ=======XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

In the header mapping change process, up to 1/3 of the sublist headers will be changing from 1-bit to 2-bit. In the worst case these will all be at the head of the list, so I'll need at least 781250/3 bits of free storage before I start, which takes me back to the memory requirements of the previous version of the compact list :(

To get around that, I'll split the 781250 sublists into 10 sublist groups of 78125 sublists each. Each group has its own independent sublist header mapping. Using the letters A to J for the groups:

```
ZZZ=====AAAAAABBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ 
```

Each sublist group shrinks or stays the same during a sublist header mapping change:

```
ZZZ=====AAAAAABBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAA=====BBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABB=====CCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCC======DDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDD======EEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEE======FFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEEFFF======GGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGG=======HHIJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHH=======IJJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHI=======JJJJJJJJJJJJJJJJJJJJ
ZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ=======
ZZZ=======AAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ 
```

The worst case temporary expansion of a sublist group during a mapping change is 78125/3 = 26042 bits, under 4k. If I allow 4k plus the 1037764 bytes for a fully populated compact list, that leaves me 8764 - 4096 = 4668 bytes for the "Z"s in the memory map.

That should be plenty for the 10 sublist header mapping tables, 30 sublist header occurrence counts and the other few counters, pointers and small buffers I'll need, and space I've used without noticing, like stack space for function call return addresses and local variables.

**Part 3, how long would it take to run?**

With an empty compact list the 1-bit list header will be used for an empty sublist, and the starting size of the list will be 781250 bits. In the worst case the list grows 8 bits for each number added, so 32 + 8 = 40 bits of free space are needed for each of the 32-bit numbers to be placed at the top of the list buffer and then sorted and merged. In the worst case, changing the sublist header mapping results in a space usage of 2*781250 + 7*entries - 781250/3 bits.

With a policy of changing the sublist header mapping after every fifth merge once there are at least 800000 numbers in the list, a worst case run would involve a total of about 30M of compact list reading and writing activity.

**Source:**

**[http://nick.cleaton.net/ramsortsol.html](http://nick.cleaton.net/ramsortsol.html)**

* * *

## 回答 #5

> 赞同：57
> 
> 时间：2012-10-21T22:06:11.900

Gilmanov's answer is very wrong in its assumptions. It starts speculating based in a *pointless* measure of a million **consecutive** integers. That means no gaps. Those random gaps, however small, really makes it a poor idea.

Try it yourself. Get 1 million random 27-bit integers, sort them, compress with [7-Zip](http://en.wikipedia.org/wiki/7-Zip), xz, whatever LZMA you want. The result is over 1.5 MB. The premise on top is the compression of sequential numbers. Even *delta encoding* of that is **over 1.1 MB**. And never mind, this is using over 100 MB of RAM for compression. So even the compressed integers don't fit the problem *and never mind run time RAM usage*.

It's saddens me how people just upvote pretty graphics and rationalization.

```
#include <stdint.h>
#include <stdlib.h>
#include <time.h>

int32_t ints[1000000]; // Random 27-bit integers

int cmpi32(const void *a, const void *b) {
    return ( *(int32_t *)a - *(int32_t *)b );
}

int main() {
    int32_t *pi = ints; // Pointer to input ints (REPLACE W/ read from net)

    // Fill pseudo-random integers of 27 bits
    srand(time(NULL));
    for (int i = 0; i < 1000000; i++)
        ints[i] = rand() & ((1<<27) - 1); // Random 32 bits masked to 27 bits

    qsort(ints, 1000000, sizeof (ints[0]), cmpi32); // Sort 1000000 int32s

    // Now delta encode, optional, store differences to previous int
    for (int i = 1, prev = ints[0]; i < 1000000; i++) {
        ints[i] -= prev;
        prev    += ints[i];
    }

    FILE *f = fopen("ints.bin", "w");
    fwrite(ints, 4, 1000000, f);
    fclose(f);
    exit(0);

} 
```

Now compress `ints.bin` with LZMA...

```
 $ xz -f --keep ints.bin       # 100 MB RAM
    $ 7z a ints.bin.7z ints.bin   # 130 MB RAM
    $ ls -lh ints.bin*
        3.8M ints.bin
        1.1M ints.bin.7z
        1.2M ints.bin.xz 
```

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2012-10-21T22:46:38.157

I think one way to think about this is from a combinatorics viewpoint: how many possible combinations of sorted number orderings are there? If we give the combination 0,0,0,....,0 the code 0, and 0,0,0,...,1 the code 1, and 99999999, 99999999, ... 99999999 the code N, what is N? In other words, how big is the result space?

Well, one way to think about this is noticing that this is a bijection of the problem of finding the number of monotonic paths in an N x M grid, where N = 1,000,000 and M = 100,000,000\. In other words, if you have a grid that is 1,000,000 wide and 100,000,000 tall, how many shortest paths from the bottom left to the top right are there? Shortest paths of course require you only ever either move right or up (if you were to move down or left you would be undoing previously accomplished progress). To see how this is a bijection of our number sorting problem, observe the following:

You can imagine any horizontal leg in our path as a number in our ordering, where the Y location of the leg represents the value.

![enter image description here](../Images/7de8046321a9a0e24acb6d2bb14bf6f9.png)

So if the path simply moves to the right all the way to the end, then jumps all the way to the top, that is equivalent to the ordering 0,0,0,...,0\. if it instead begins by jumping all the way to the top and then moves to the right 1,000,000 times, that is equivalent to 99999999,99999999,..., 99999999\. A path where it moves right once, then up once, then right one, then up once, etc to the very end (then necessarily jumps all the way to the top), is equivalent to 0,1,2,3,...,999999.

Luckily for us this problem has already been solved, such a grid has (N + M) Choose (M) paths:

(1,000,000 + 100,000,000) Choose (100,000,000) ~= 2.27 * 10^2436455

N thus equals 2.27 * 10^2436455, and so the code 0 represents 0,0,0,...,0 and the code 2.27 * 10^2436455 and some change represents 99999999,99999999,..., 99999999.

In order to store all the numbers from 0 to 2.27 * 10^2436455 you need lg2 (2.27 * 10^2436455) = 8.0937 * 10^6 bits.

1 megabyte = 8388608 bits > 8093700 bits

So it appears that we at least actually have enough room to store the result! Now of course the interesting bit is doing the sorting as the numbers stream in. Not sure the best approach to this is given we have 294908 bits remaining. I imagine an interesting technique would be to at each point assume that that is is the entire ordering, finding the code for that ordering, and then as you receive a new number going back and updating the previous code. Hand wave hand wave.

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2012-10-21T22:38:44.193

My suggestions here owe a lot to [Dan's solution](https://stackoverflow.com/a/13001778/1763801)

First off I assume the solution must handle *all* possible input lists. I think the popular answers do not make this assumption (which IMO is a huge mistake).

It is known that no form of lossless compression will reduce the size of all inputs.

All the popular answers assume they will be able to apply compression effective enough to allow them extra space. In fact, a chunk of extra space large enough to hold some portion of their partially completed list in an uncompressed form and allow them to perform their sorting operations. This is just a bad assumption.

For such a solution, anyone with knowledge of how they do their compression will be able to design some input data that does not compress well for this scheme, and the "solution" will most likely then break due to running out of space.

Instead I take a mathematical approach. Our possible outputs are all the lists of length LEN consisting of elements in the range 0..MAX. Here the LEN is 1,000,000 and our MAX is 100,000,000.

For arbitrary LEN and MAX, the amount of bits needed to encode this state is:

Log2(MAX Multichoose LEN)

So for our numbers, once we have completed recieving and sorting, we will need at least Log2(100,000,000 MC 1,000,000) bits to store our result in a way that can uniquely distinguish all possible outputs.

[This is ~= 988kb](http://www.wolframalpha.com/input/?i=%28log2%28multichoose%28100000000,1000000%29%29%29/%288*1024%29). So we actually have enough space to hold our result. From this point of view, it is possible.

[Deleted pointless rambling now that better examples exist...]

Best answer [is here](https://stackoverflow.com/a/13067807/1763801).

Another good answer [is here](https://stackoverflow.com/a/12978097/1763801) and basically uses insertion sort as the function to expand the list by one element (buffers a few elements and pre-sorts, to allow insertion of more than one at a time, saves a bit of time). uses a nice compact state encoding too, buckets of seven bit deltas

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2012-10-21T20:17:41.553

Suppose this task is possible. Just prior to output, there will be an in-memory representation of the million sorted numbers. How many different such representations are there? Since there may be repeated numbers we can't use nCr (choose), but there is an operation called multichoose that works on [multisets](http://mathworld.wolfram.com/Multiset.html).

*   There are [2.2e2436455](http://www.wolframalpha.com/input/?i=multichoose%28100000000%2C1000000%29) ways to choose a million numbers in range 0..99,999,999.
*   That requires [8,093,730](http://www.wolframalpha.com/input/?i=log2%28multichoose%28100000000%2C1000000%29%29) bits to represent every possible combination, or 1,011,717 bytes.

So theoretically it may be possible, if you can come up with a sane (enough) representation of the sorted list of numbers. For example, an insane representation might require a 10MB lookup table or thousands of lines of code.

However, if "1M RAM" means one million bytes, then clearly there is not enough space. The fact that 5% more memory makes it theoretically possible suggests to me that the representation will have to be VERY efficient and probably not sane.

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2012-10-21T14:22:52.160

(My original answer was wrong, sorry for the bad math, see below the break.)

How about this?

The first 27 bits store the lowest number you have seen, then the difference to the next number seen, encoded as follows: 5 bits to store the number of bits used in storing the difference, then the difference. Use 00000 to indicate that you saw that number again.

This works because as more numbers are inserted, the average difference between numbers goes down, so you use less bits to store the difference as you add more numbers. I believe this is called a delta list.

The worst case I can think of is all numbers evenly spaced (by 100), e.g. Assuming 0 is the first number:

```
000000000000000000000000000 00111 1100100
                            ^^^^^^^^^^^^^
                            a million times

27 + 1,000,000 * (5+7) bits = ~ 427k 
```

* * *

Reddit to the rescue!

If all you had to do was sort them, this problem would be easy. It takes 122k (1 million bits) to store which numbers you have seen (0th bit on if 0 was seen, 2300th bit on if 2300 was seen, etc.

You read the numbers, store them in the bit field, and then shift the bits out while keeping a count.

BUT, you have to remember how many you have seen. I was inspired by the sublist answer above to come up with this scheme:

Instead of using one bit, use either 2 or 27 bits:

*   00 means you did not see the number.
*   01 means you saw it once
*   1 means you saw it, and the next 26 bits are the count of how many times.

I think this works: if there are no duplicates, you have a 244k list. In the worst case you see each number twice (if you see one number three times, it shortens the rest of the list for you), that means you have seen 50,000 more than once, and you have seen 950,000 items 0 or 1 times.

50,000 * 27 + 950,000 * 2 = 396.7k.

You can make further improvements if you use the following encoding:

0 means you did not see the number 10 means you saw it once 11 is how you keep count

Which will, on average, result in 280.7k of storage.

EDIT: my Sunday morning math was wrong.

The worst case is we see 500,000 numbers twice, so the math becomes:

500,000 *27 + 500,000 *2 = 1.77M

The alternate encoding results in an average storage of

500,000 * 27 + 500,000 = 1.70M

: (

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-10-21T19:39:01.800

There is one solution to this problem across all possible inputs. Cheat.

1.  Read m values over TCP, where m is near the max that can be sorted in memory, maybe n/4.
2.  Sort the 250,000 (or so) numbers and output them.
3.  Repeat for the other 3 quarters.
4.  Let the receiver merge the 4 lists of numbers it has received as it processes them. (It's not much slower than using a single list.)

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2012-10-21T20:15:11.203

What kind of computer are you using? It may not have any other "normal" local storage, but does it have video RAM, for example? 1 megapixel x 32 bits per pixel (say) is pretty close to your required data input size.

(I largely ask in memory of the old [Acorn RISC PC](http://en.wikipedia.org/wiki/RiscPC), which could 'borrow' VRAM to expand the available system RAM, if you chose a low resolution or low colour-depth screen mode!). This was rather useful on a machine with only a few MB of normal RAM.

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2012-10-21T16:33:47.013

I would try a [Radix Tree](http://en.wikipedia.org/wiki/Radix_tree). If you could store the data in a tree, you could then do an in-order traverse to transmit the data.

I'm not sure you could fit this into 1MB, but I think it's worth a try.

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2012-10-21T13:24:11.813

A radix tree representation would come close to handling this problem, since the radix tree takes advantage of "prefix compression". But it's hard to conceive of a radix tree representation that could represent a single node in one byte -- two is probably about the limit.

But, regardless of how the data is represented, once it is sorted it can be stored in prefix-compressed form, where the numbers 10, 11, and 12 would be represented by, say 001b, 001b, 001b, indicating an increment of 1 from the previous number. Perhaps, then, 10101b would represent an increment of 5, 1101001b an increment of 9, etc.

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-10-21T20:54:45.517

There are 10^6 values in a range of 10^8, so there's one value per hundred code points on average. Store the distance from the Nth point to the (N+1)th. Duplicate values have a skip of 0\. This means that the skip needs an average of just under 7 bits to store, so a million of them will happily fit into our 8 million bits of storage.

These skips need to be encoded into a bitstream, say by Huffman encoding. Insertion is by iterating through the bitstream and rewriting after the new value. Output by iterating through and writing out the implied values. For practicality, it probably wants to be done as, say, 10^4 lists covering 10^4 code points (and an average of 100 values) each.

A good Huffman tree for random data can be built a priori by assuming a Poisson distribution (mean=variance=100) on the length of the skips, but real statistics can be kept on the input and used to generate an optimal tree to deal with pathological cases.

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2012-10-21T20:05:03.887

> I have a computer with 1M of RAM and no other local storage

Another way to cheat: you could use non-local (networked) storage instead (your question does not preclude this) and call a networked service that could use straightforward disk-based mergesort (or just enough RAM to sort in-memory, since you only need to accept 1M numbers), without needing the (admittedly extremely ingenious) solutions already given.

This might be cheating, but it's not clear whether you are looking for a solution to a real-world problem, or a puzzle that invites bending of the rules... if the latter, then a simple cheat may get better results than a complex but "genuine" solution (which as others have pointed out, can only work for compressible inputs).

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2012-10-21T22:24:04.020

**Google**'s (bad) approach, from HN thread. Store RLE-style counts.

> Your initial data structure is '99999999:0' (all zeros, haven't seen any numbers) and then lets say you see the number 3,866,344 so your data structure becomes '3866343:0,1:1,96133654:0' as you can see the numbers will always alternate between number of zero bits and number of '1' bits so you can just assume the odd numbers represent 0 bits and the even numbers 1 bits. This becomes (3866343,1,96133654)

Their problem doesn't seem to cover duplicates, but let's say they use "0:1" for duplicates.

Big problem #1: insertions for 1M integers *would take ages*.

Big problem #2: like all plain delta encoding solutions, some distributions can't be covered this way. For example, 1m integers with distances 0:99 (e.g. +99 each one). Now think the same but with **random distance** in the **range of 0:99**. (Note: 99999999/1000000 = 99.99)

Google's approach is both unworthy (slow) and incorrect. But to their defense, their problem might have been slightly different.

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2012-10-22T08:33:28.390

I think the solution is to combine techniques from video encoding, namely the discrete cosine transformation. In digital video, rather recording the changing the brightness or colour of video as regular values such as 110 112 115 116, each is subtracted from the last (similar to run length encoding). 110 112 115 116 becomes 110 2 3 1\. The values, 2 3 1 require less bits than the originals.

So lets say we create a list of the input values as they arrive on the socket. We are storing in each element, not the value, but the offset of the one before it. We sort as we go, so the offsets are only going to be positive. But the offset could be 8 decimal digits wide which this fits in 3 bytes. Each element can't be 3 bytes, so we need to pack these. We could use the top bit of each byte as a "continue bit", indicating that the next byte is part of the number and the lower 7 bits of each byte need to be combined. zero is valid for duplicates.

As the list fills up, the numbers should be get closer together, meaning on average only 1 byte is used to determine the distance to the next value. 7 bits of value and 1 bit of offset if convenient, but there may be a sweet spot that requires less than 8 bits for a "continue" value.

Anyway, I did some experiment. I use a random number generator and I can fit a million sorted 8 digit decimal numbers into about 1279000 bytes. The average space between each number is consistently 99...

```
public class Test {
    public static void main(String[] args) throws IOException {
        // 1 million values
        int[] values = new int[1000000];

        // create random values up to 8 digits lrong
        Random random = new Random();
        for (int x=0;x<values.length;x++) {
            values[x] = random.nextInt(100000000);
        }
        Arrays.sort(values);

        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        int av = 0;    
        writeCompact(baos, values[0]);     // first value
        for (int x=1;x<values.length;x++) {
            int v = values[x] - values[x-1];  // difference
            av += v;
            System.out.println(values[x] + " diff " + v);
            writeCompact(baos, v);
        }

        System.out.println("Average offset " + (av/values.length));
        System.out.println("Fits in " + baos.toByteArray().length);
    }

    public static void writeCompact(OutputStream os, long value) throws IOException {
        do {
            int b = (int) value & 0x7f;
            value = (value & 0x7fffffffffffffffl) >> 7;
            os.write(value == 0 ? b : (b | 0x80));
        } while (value != 0);
    }
} 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2012-10-21T21:27:17.500

We could play with the networking stack to send the numbers in sorted order before we have all the numbers. If you send 1M of data, TCP/IP will break it into 1500 byte packets and stream them in order to the target. Each packet will be given a sequence number.

We can do this by hand. Just before we fill our RAM we can sort what we have and send the list to our target but leave holes in our sequence around each number. Then process the 2nd 1/2 of the numbers the same way using those holes in the sequence.

The networking stack on the far end will assemble the resulting data stream in order of sequence before handing it up to the application.

It's using the network to perform a merge sort. This is a total hack, but I was inspired by the other networking hack listed previously.

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2012-10-21T22:44:43.030

I would exploit the retransmission behaviour of TCP.

1.  Make the TCP component create a large receive window.
2.  Receive some amount of packets without sending an ACK for them.
    *   Process those in passes creating some (prefix) compressed data structure
    *   Send duplicate ack for last packet that is not needed anymore/wait for retransmission timeout
    *   Goto 2
3.  All packets were accepted

This assumes some kind of benefit of buckets or multiple passes.

Probably by sorting the batches/buckets and merging them. -> radix trees

Use this technique to accept and sort the first 80% then read the last 20%, verify that the last 20% do not contain numbers that would land in the first 20% of the lowest numbers. Then send the 20% lowest numbers, remove from memory, accept the remaining 20% of new numbers and merge.**

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2012-10-22T01:59:14.353

To represent the sorted array one can just store the first element and the difference between adjacent elements. In this way we are concerned with encoding 10^6 elements that can sum up to at most 10^8\. Let's call this **D**. To encode the elements of **D** one can use a [Huffman code](http://en.wikipedia.org/wiki/Huffman_coding). The dictionary for the Huffman code can be created on the go and the array updated every time a new item is inserted in the sorted array (insertion sort). Note that when the dictionary changes because of a new item the whole array should be updated to match the new encoding.

The average number of bits for encoding each element of **D** is maximized if we have equal number of each unique element. Say elements *d1*, *d2*, ..., *dN* in **D** each appear *F* times. In that case (in worst case we have both 0 and 10^8 in input sequence) we have

**sum(1<=*i*<=*N*)** *F*. *di* = 10^8

where

**sum(1<=*i*<=*N*)** *F* = 10^6, or *F*=10^6/*N* and the normalized frequency will be *p*= *F*/10^=1/*N*

The average number of bits will be -log2(1/*P*) = log2(*N*). Under these circumstances we should find a case that maximizes *N*. This happens if we have consecutive numbers for *di* starting from 0, or, *di*= *i*-1, therefore

10^8=**sum(1<=*i*<=*N*)** *F*. *di* = **sum(1<=*i*<=*N*)** (10^6/*N*) (i-1) = (10^6/*N*) *N* (*N*-1)/2

i.e.

*N* <= 201\. And for this case average number of bits is log2(201)=7.6511 which means we will need around 1 byte per input element for saving the sorted array. Note that this doesn't mean **D** in general cannot have more than 201 elements. It just sows that if elements of **D** are uniformly distributed, it cannot have more than 201 unique values.

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-04-01T17:23:28.670

[Here](https://github.com/CensoredUsername/tinysort) is a generalized solution to this kind of problem:

# General procedure

The taken approach is as follows. The algorithm operates on a single buffer of 32-bit words. It performs the following procedure in a loop:

*   We start with a buffer filled with compressed data from the last iteration. The buffer looks like this

    `|compressed sorted|empty|`

*   Calculate the maximum amount of numbers that can be stored in this buffer, both compressed and uncompressed. Split the buffer into these two sections, beginning with the space for compressed data, ending with the uncompressed data. The buffer looks like

    `|compressed sorted|empty|empty|`

*   Fill the uncompressed section with numbers to be sorted. The buffer looks like

    `|compressed sorted|empty|uncompressed unsorted|`

*   Sort the new numbers with an in-place sort. The buffer looks like

    `|compressed sorted|empty|uncompressed sorted|`

*   Right-align any already compressed data from the previous iteration in the compressed section. At this point the buffer is partitioned

    `|empty|compressed sorted|uncompressed sorted|`

*   Perform a streaming decompression-recompression on the compressed section, merging in the sorted data in the uncompressed section. The old compressed section is consumed as the new compressed section grows. The buffer looks like

    `|compressed sorted|empty|`

This procedure is performed until all numbers have been sorted.

# Compression

This algorithm of course only works when it's possible to calculate the final compressed size of the new sorting buffer before actually knowing what will actually be compressed. Next to that, the compression algorithm needs to be good enough to solve the actual problem.

The used approach uses three steps. First, the algorithm will always store sorted sequences, therefore we can instead store purely the differences between consecutive entries. Each difference is in the range [0, 99999999].

These differences are then encoded as a unary bitstream. A 1 in this stream means "Add 1 to the accumulator, A 0 means "Emit the accumulator as an entry, and reset". So difference N will be represented by N 1's and one 0.

The sum of all differences will approach the maximum value that the algorithm supports, and the count of all differences will approach the amount of values inserted in the algorithm. This means we expect the stream to, at the end, contain max value 1's and count 0's. This allows us to calculate the expected probability of a 0 and 1 in the stream. Namely, the probability of a 0 is `count/(count+maxval)` and the probability of a 1 is `maxval/(count+maxval)`.

We use these probabilities to define an arithmetic coding model over this bitstream. This arithmetic code will encode exactly this amounts of 1's and 0's in optimal space. We can calculate the space used by this model for any intermediate bitstream as: `bits = encoded * log2(1 + amount / maxval) + maxval * log2(1 + maxval / amount)`. To calculate the total required space for the algorithm, set `encoded` equal to amount.

To not require a ridiculous amount of iterations, a small overhead can be added to the buffer. This will ensure that the algorithm will at least operate on the amount of numbers that fit in this overhead, as by far the largest time cost of the algorithm is the arithmetic coding compression and decompression each cycle.

Next to that, some overhead is necessary to store bookkeeping data and to handle slight inaccuracies in the fixed-point approximation of the arithmetic coding algorithm, but in total the algorithm is able to fit in 1MiB of space even with an extra buffer that can contain 8000 numbers, for a total of 1043916 bytes of space.

# Optimality

Outside of reducing the (small) overhead of the algorithm it should be theoretically impossible to get a smaller result. To just contain the entropy of the final result, 1011717 bytes would be necessary. If we subtract the extra buffer added for efficiency this algorithm used 1011916 bytes to store the final result + overhead.

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2012-10-24T12:30:48.007

If the input stream could be received few times this would be much easier (no information about that, idea and time-performance problem).

Then, we could count the decimal values. With counted values it would be easy to make the output stream. Compress by counting the values. It depends what would be in the input stream.

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2012-10-20T22:33:55.903

If the input stream could be received few times this would be much easier (no info about that, idea and time-performance problem). Then, we could count the decimal values. With counted values it would be easy to make the output stream. Compress by counting the values. It depends what would be in the input stream.

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2012-10-21T21:51:05.427

Sorting is a secondary problem here. As other said, just storing the integers is hard, and **cannot work on all inputs**, since 27 bits per number would be necessary.

My take on this is: store only the differences between the consecutive (sorted) integers, as they will be most likely small. Then use a compression scheme, e.g. with 2 additional bits per input number, to encode how many bits the number is stored on. Something like:

```
00 -> 5 bits
01 -> 11 bits
10 -> 19 bits
11 -> 27 bits 
```

It should be possible to store a fair number of possible input lists within the given memory constraint. The maths of how to pick the compression scheme to have it work on the maximum number of inputs, are beyond me.

I hope you may be able to exploit **domain-specific knowledge of your input** to find a good enough **integer compression scheme** based on this.

Oh and then, you do an insertion sort on that sorted list as you receive data.

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2012-10-21T23:12:29.903

Now aiming to an actual solution, covering all possible cases of input in the 8 digit range with only 1MB of RAM. NOTE: work in progress, tomorrow will continue. Using arithmetic coding of deltas of the sorted ints, worst case for 1M sorted ints would cost about 7bits per entry (since 99999999/1000000 is 99, and log2(99) is almost 7 bits).

But you need the 1m integers sorted to get to 7 or 8 bits! Shorter series would have bigger deltas, therefore more bits per element.

I'm working on taking as many as possible and compressing (almost) in-place. First batch of close to 250K ints would need about 9 bits each at best. So result would take about 275KB. Repeat with remaining free memory a few times. Then decompress-merge-in-place-compress those compressed chunks. This is **quite hard**, but possible. I think.

The merged lists would get closer and closer to the 7bit per integer target. But I don't know how many iterations it would take of the merge loop. Perhaps 3.

But the imprecision of the arithmetic coding implementation might make it impossible. If this problem is possible at all, it would be extremely tight.

Any volunteers?

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2012-10-22T00:21:54.280

We have 1 MB - 3 KB RAM = 2^23 - 3*2^13 bits = 8388608 - 24576 = 8364032 bits available.

We are given 10^6 numbers in a 10^8 range. This gives an average gap of ~100 < 2^7 = 128

Let's first consider the simpler problem of fairly evenly spaced numbers when all gaps are < 128\. This is easy. Just store the first number and the 7-bit gaps:

(27 bits) + 10^6 7-bit gap numbers = 7000027 bits required

Note repeated numbers have gaps of 0.

But what if we have gaps larger than 127?

OK, let's say a gap size < 127 is represented directly, but a gap size of 127 is followed by a continuous 8-bit encoding for the actual gap length:

```
 10xxxxxx xxxxxxxx                       = 127 .. 16,383
 110xxxxx xxxxxxxx xxxxxxxx              = 16384 .. 2,097,151 
```

etc.

Note this number representation describes its own length so we know when the next gap number starts.

With just small gaps < 127, this still requires 7000027 bits.

There can be up to (10^8)/(2^7) = 781250 23-bit gap number, requiring an extra 16*781,250 = 12,500,000 bits which is too much. We need a more compact and slowly increasing representation of gaps.

The average gap size is 100 so if we reorder them as [100, 99, 101, 98, 102, ..., 2, 198, 1, 199, 0, 200, 201, 202, ...] and index this with a dense binary Fibonacci base encoding with no pairs of zeros (for example, 11011=8+5+2+1=16) with numbers delimited by '00' then I think we can keep the gap representation short enough, but it needs more analysis.

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2012-10-22T04:50:37.937

You just need to store the differences between the numbers in sequence, and use an encoding to compress these sequence numbers. We have 2^23 bits. We shall divide it into 6bit chunks, and let the last bit indicate whether the number extends to another 6 bits (5bits plus extending chunk).

Thus, 000010 is 1, and 000100 is 2\. 000001100000 is 128\. Now, we consider the worst cast in representing differences in sequence of a numbers up to 10,000,000\. There can be 10,000,000/2^5 differences greater than 2^5, 10,000,000/2^10 differences greater than 2^10, and 10,000,000/2^15 differences greater than 2^15, etc.

So, we add how many bits it will take to represent our the sequence. We have 1,000,000*6 + roundup(10,000,000/2^5)*6+roundup(10,000,000/2^10)*6+roundup(10,000,000/2^15)*6+roundup(10,000,000/2^20)*4=7935479.

2^24 = 8388608\. Since 8388608 > 7935479, we should easily have enough memory. We will probably need another little bit of memory to store the sum of where are when we insert new numbers. We then go through the sequence, and find where to insert our new number, decrease the next difference if necessary, and shift everything after it right.

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2012-10-22T09:30:31.400

If we don't know anything about those numbers, we are limited by the following constraints:

*   we need to load all numbers before we can sort them them,
*   the set of numbers is not compressible.

If these assumptions hold, there is no way to carry out your task, as you will need at least 26,575,425 bits of storage (3,321,929 bytes).

What can you tell us about your data ?

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2012-10-22T16:50:18.710

The trick is to represent the algorithms state, which is an integer multi-set, as a compressed stream of "increment counter"="+" and "output counter"="!" characters. For example, the set {0,3,3,4} would be represented as "!+++!!+!", followed by any number of "+" characters. To modify the multi-set you stream out the characters, keeping only a constant amount decompressed at a time, and make changes inplace before streaming them back in compressed form.

**Details**

We know there are exactly 10^6 numbers in the final set, so there are at most 10^6 "!" characters. We also know that our range has size 10^8, meaning there are at most 10^8 "+" characters. The number of ways we can arrange 10^6 "!"s amongst 10^8 "+"s is `(10^8 + 10^6) choose 10^6`, and so specifying some particular arrangement takes [~0.965 MiB](http://www.wolframalpha.com/input/?i=log_2%28%2810%5E8%20%2b%2010%5E6%29%20choose%2010%5E6%29%20/%202%5E23)` of data. That'll be a tight fit.

We can treat each character as independent without exceeding our quota. There are exactly 100 times more "+" characters than "!" characters, which simplifies to 100:1 odds of each character being a "+" if we forget that they are dependent. Odds of 100:101 corresponds to [~0.08 bits per character](http://www.wolframalpha.com/input/?i=-1/101%20%2a%20log_2%281/101%29%20%2b%20-100/101%20%2a%20log_2%28100/101%29), for an almost identical total of [~0.965 MiB](http://www.wolframalpha.com/input/?i=%28-1/101%20%2a%20log_2%201/101%20%20%2b%20-100/101%20%2a%20log_2%20100/101%29%2a%2810%5E8%2b10%5E6%29/2%5E23) (ignoring the dependency has a cost of only [~12 bits](http://www.wolframalpha.com/input/?i=log_2%28%2810%5E8%20%2b%2010%5E6%29%20choose%2010%5E6%29%20-%20%28-1/101%20%2a%20log_2%201/101%20%20%2b%20-100/101%20%2a%20log_2%20100/101%29%2a%2810%5E8%2b10%5E6%29) in this case!).

The simplest technique for storing independent characters with known prior probability is [Huffman coding](http://en.wikipedia.org/wiki/Huffman_encoding). Note that we need an impractically large tree (A huffman tree for blocks of 10 characters has an average cost per block of about 2.4 bits, for a total of ~2.9 Mib. A huffman tree for blocks of 20 characters has an average cost per block of about 3 bits, which is a total of ~1.8 MiB. We're probably going to need a block of size on the order of a hundred, implying more nodes in our tree than all the computer equipment that has ever existed can store.). However, ROM is technically "free" according to the problem and practical solutions that take advantage of the regularity in the tree will look essentially the same.

**Pseudo-code**

*   Have a sufficiently large huffman tree (or similar block-by-block compression data) stored in ROM
*   Start with a compressed string of 10^8 "+" characters.
*   To insert the number N, stream out the compressed string until N "+" characters have gone past then insert a "!". Stream the recompressed string back over the previous one as you go, keeping a constant amount of buffered blocks to avoid over/under-runs.
*   Repeat one million times: [input, stream decompress>insert>compress], then decompress to output

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-12-02T21:31:17.150

While receiving the stream do these steps.

1st set some reasonable chunk size

Pseudo Code idea:

1.  The first step would be to find all the duplicates and stick them in a dictionary with its count and remove them.
2.  The third step would be to place number that exist in sequence of their algorithmic steps and place them in counters special dictionaries with the first number and their step like n, n+1..., n+2, 2n, 2n+1, 2n+2...
3.  Begin to compress in chunks some reasonable ranges of number like every 1000 or ever 10000 the remaining numbers that appear less often to repeat.
4.  Uncompress that range if a number is found and add it to the range and leave it uncompressed for a while longer.
5.  Otherwise just add that number to a byte[chunkSize]

Continue the first 4 steps while receiving the stream. The final step would be to either fail if you exceeded memory or start outputting the result once all the data is collected by beginning to sort the ranges and spit out the results in order and uncompressing those in order that need to be uncompressed and sort them when you get to them.

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2012-10-19T12:45:31.927

If the range of the numbers is limited (there can be only mod 2 8 digit numbers, or only 10 different 8 digit numbers for example), then you could write an optimized sorting algorithm. But if you want to sort all possible 8 digit numbers, this is not possible with that low amount of memory.

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2012-10-21T19:56:42.953

As ROM size does not count one does not need any additional RAM besides the TCP buffers. Just implement a big finite-state machine. Each state represents a multi-set of numbers read in. After reading a million numbers one has just to print the numbers corresponding to the reached state.

* * *

## 回答 #33

> 赞同：-2
> 
> 时间：2012-10-22T01:38:17.957

You have to count up to at most 99,999,999 and indicate 1,000,000 stops along the way. So a bitstream can be used that is interpreted such that at 1 indicates in increment a counter and a 0 indicates to output a number. If the first 8 bits in the stream are 00110010, we would have 0, 0, 2, 2, 3 so far.

`log(99,999,999 + 1,000,000) / log(2) = 26.59`. You have `2^28` bits in your memory. You only need to use half!

* * *

## 回答 #34

> 赞同：-2
> 
> 时间：2012-10-22T01:40:57.300

If it is possible to read the input file more than once (your problem statement doesn't say it can't), the following should work. It is described in Benchley's book "Programming Perls." If we store each number in 8 bytes we can store 250,000 numbers in one megabyte. Use a program that makes 40 passes over the input file. On the first pass it reads into memory any integer between 0 and 249,999, sorts the (at most) 250,000 integers and writes them to the output file. The second pass sorts the integers from 250,000 to 499,999 and so on to the 40th pass, which sorts 9,750,000 to 9,999,999.

* * *

## 回答 #35

> 赞同：-4
> 
> 时间：2012-10-21T17:10:22.780

If the numbers are evenly distributed we can use [Counting sort](http://en.wikipedia.org/wiki/Counting_sort). We should keep the number of times that each number is repeated in an array. Available space is: 1 MB - 3 KB = 1045504 B or 8364032 bits Number of bits per number= 8364032/1000000 = 8 Therefore, we can store the number of times each number is repeated to the maximum of 2^8-1=255. Using this approach we have an extra 364032 bits unused that can be used to handle cases where a number is repeated more than 255 times. For example we can say a number 255 indicates a repetition greater than or equal to 255\. In this case we should store a sequence of numbers+repetitions. We can handle 7745 special cases as shown bellow:

364032/ (bits need to represent each number + bits needed to represent 1 million)= 364032 / (27+20)=7745

* * *

## 回答 #36

> 赞同：-8
> 
> 时间：2012-10-23T02:02:09.660

Have you tried converting to hex?

I can see a big reduction on filesize after and before; then, work by part with the free space. Maybe, converting to dec again, order, hex, another chunk,convert to dec, order...

Sorry.. I don't know if could work

```
# for i in {1..10000};do echo $(od -N1 -An -i /dev/urandom) ; done > 10000numbers
# for i in $(cat 10000numbers ); do printf '%x\n' $i; done > 10000numbers_hex
# ls -lah total 100K
drwxr-xr-x  2 diego diego 4,0K oct 22 22:32 .
drwx------ 39 diego diego  12K oct 22 22:31 ..
-rw-r--r--  1 diego diego  29K oct 22 22:33 10000numbers_hex
-rw-r--r--  1 diego diego  35K oct 22 22:31 10000numbers 
```

# visual-studio-2010 - 有没有办法将我的 Mouse4 按钮“绑定”到 Visual Studio 中的“向后导航”？

> ID：12748253
> 
> 赞同：3
> 
> 时间：2012-10-05T14:17:58.200
> 
> 标签：visual-studio-2010

标题几乎解释了整个问题。我正在使用 Visual Studio 2010 Premium，我喜欢 Navigate Backward 命令，因为我右键单击某些内容并转到定义，然后我想回到我之前 Navigate Backward 工作的位置。但是我已经习惯了我的鼠标按钮按钮，我注意到我已经开始在 Visual Studio 中使用它并期望它返回但它没有。我知道如何将命令更改为不同的按键，但是有没有办法让它在鼠标按钮上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:47:08.483

这似乎是 Visual Studio 中 C++ IDE 的（毫无意义的）限制。在 C# 中，鼠标按钮按预期工作，但在 C++ 中则不然。

Visual Studio 有几个插件可以涵盖此功能，我将向您指出我在[此答案](https://stackoverflow.com/a/11148237/968531)中找到的插件：

[http://www.codeproject.com/Articles/57119/Forward-Backward-Code-Navigation-with-the-Mouse-Th](http://www.codeproject.com/Articles/57119/Forward-Backward-Code-Navigation-with-the-Mouse-Th)

这个加载项对我有用。我还可以通过简单地将插件文件中的版本标记更改为“11.0”来将其升级到 Visual Studio 2012。

# android - 带有图像和复选框的列表视图限制用户仅选择 5 个复选框

> ID：12748254
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:18:07.210
> 
> 标签：android

我有带有图像和复选框的列表视图，我必须限制用户检查 5 个复选框并禁用或使列表视图中的其他复选框不可见，并且每当用户取消选中先前选中的五个复选框之一时，应使复选框再次启用或可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:57:41.617

如果您只是想阻止用户选择超过 5 个 - 这意味着他们必须手动取消选中项目 - 只需使用 pratik 建议的计数器变量。如果您想自动取消选中用户检查的最旧的东西，我会使用所选索引的队列。然后你可以弹出最旧的东西，取消选中它，然后将新索引添加到队列中。您可以在 onItemClickListener 或 onItemSelectedListener 中完成所有这些操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:27:27.613

您可以通过计数器变量来执行此操作，因为您还必须使用迭代器检查所有复选框状态，或者您可以放入复选框的单击事件以检查它是否在检查第 5 个之后已经达到限制然后禁用另一个复选框，当它小于然后启用它重置复选框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:02:01.477

您可以使用 onCheckedChangeListener。

添加一个私有整数：

```
private int checkedCounter; 
```

初始化它：

```
checkedCounter = 0; 
```

设置监听器：

```
yourCheckbox = (CheckBox) findViewById(R.id.itsId);
yourCheckbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {   
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
        {
            if (checkedCounter == 5 && isChecked)
            {
                yourCheckbox.setChecked(false);
            }
            else if checkedCounter == 5 && !isChecked)
            {
                checkedCounter--;
            }
            else if (checkedCounter < 5)
            {
                (isChecked ? checkedCounter++ : checkedCounter--);
            }
        }
    }); 
```

我现在无法运行此代码，因此请检查条件。实际上，它也可以以另一种方式完成：当检查5个框时，您可以在其他方面使用setEnabled（false）方法。

# mysql - SQL嵌套查询问题

> ID：12748256
> 
> 赞同：2
> 
> 时间：2012-10-05T14:18:11.180
> 
> 标签：mysql, sql

我有一个带有 MESSAGE 表的数据库，它包含我的所有消息。我需要找到所有最后的对话消息。

该表包含以下字段： Id (int) From (int) To (int) Date (date) Message (varchar)

我需要找到一个返回所有最后消息的查询。例如：

```
1 -> 3 : This is a first message; yesterday
3 -> 1 : This is the last one; today
1 -> 2 : Another message with 1 and 2; some time
3 -> 5 : Some message i don't need; some time 
```

我需要找到：

```
"3 -> 1 : This is the last one; today"
"1 -> 2 : Another message with 1 and 2; some time" 
```

我希望我的意思很清楚......我已经可以通过以下查询找到与我交谈的用户：

在此示例中，用户的 Id = 47

```
select distinct m.To from MESSAGE m Where m.From = 47 union select distinct m2.from From MESSAGE m2 where m2.To = 47 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:32:11.590

伙计，这真的很粗糙而且看起来很丑陋，但我认为这是一个不错的起点......将 from 和 to 用户放入一个“虚拟化”单表，获取其中一个/两个的最大消息日期，然后最大化*那些*每个用户 ID，并加入原始消息表。这至少是希望！:) 请注意，“from”值几乎可以肯定是一个保留的 SQL 关键字，所以实际上它需要是 fromID 或类似的东西，但无论如何......有这个警告......

*编辑：测试了前面的例子，这不是很正确，但是这个在*[http://sqlfiddle.com/#!3/3f586/2](http://sqlfiddle.com/#!3/3f586/2)**上的每个 SQLFiddle 都有效*

```
select distinct fromid, toid, message
  from messages
  join (select distinct max(msgDate) msgdate, userid from
                    (select max(messageDate) msgdate, fromID userid
                       from messages
                      group by fromID
                      union 
                     select max(messageDate), toID userid
                       from messages
                      group by toID) as j group by userid ) as x
   on (messages.fromID=x.userid
       or messages.toID=x.userid)
  and messages.messageDate=x.msgdate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:21:41.317

我认为这会做你想要的，假设 id 可以用来定义“最后一条消息”：

```
select m.*
from message m join
     (select least(from, to) as p1, greatest(from, to) as p2, max(id) as maxid
      from message m
      group by least(from, to), greatest(from, to)
     ) mmax
     on m.id = mmax.maxid 
```

这使用 id 来查找对话中的最后一条记录。然后它重新加入以获取消息。

# java - 如何获取 ZipEntry 的简单名称？

> ID：12748257
> 
> 赞同：3
> 
> 时间：2012-10-05T14:18:11.020
> 
> 标签：java, android

我想知道是否有可能从`ZipEntry`...中获取简单的名称

当我调用`getName()`Entry 时，我得到一个完整的路径名。

我只需要获取文件名。

在这里，我需要获取简单名称而不是带有根的全名。

```
public class ZipFileSample {

    public static void main(String[] args) {

        try {
            ZipFile zip = new ZipFile(new File("C:\\Users\\Levi\\Desktop\\jessica.zip"));

            for (Enumeration e = zip.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                //Here I need to get the simple name instead the full name with its root
                System.out.println(entry.getName());
            }

        } catch (ZipException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:19:25.980

怎么样

```
new File(entry.getName()).getName() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:44:51.167

您可以尝试使用以下代码（可能您需要对 java.lang.StringIndexOutOfBoundsException 采取一些预防措施）。如果您知道扩展名，您也可以强制执行一些检查

```
 try {
            ZipFile zip = new ZipFile(new File("F:\\OTHERS\\classes.zip"));
            for (Enumeration e = zip.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                //Here I need to get the simple name instead the full name with its root
                String name =entry.getName();
                //if( name.endsWith(".java"))
//              {
                    name = name.substring(name.lastIndexOf("/")+1,name.length() );
                    System.out.println(name );
//              }
            }

        } catch (ZipException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        } 
```

# finite-automata - 需要 FSM 框架

> ID：12748259
> 
> 赞同：0
> 
> 时间：2012-10-05T14:18:21.767
> 
> 标签：finite-automata, state-machine

请推荐有限状态机创建和模拟的框架。我知道 Matlab 中的 Stateflow 包，但是还有其他好的选择吗？它不应该只是Matlab。Java、R 或 Python 上的框架也可以。

我基本上想做的是为二进制序列预测问题进化自动机，如[本文所示](http://www.biocut.unito.it/giacobini/files/ea01_prediction.pdf)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:52:21.610

考虑一下[拉格尔](http://www.complang.org/ragel/)。它有手册和大量示例；我发现文档优于[AT&T Research 的 FSM 工具](http://www2.research.att.com/~fsmtools/fsm/)（由几个联机帮助页和稀疏示例组成）。

# lambda - Lambda 演算：alpha 转换

> ID：12748260
> 
> 赞同：0
> 
> 时间：2012-10-05T14:18:29.957
> 
> 标签：lambda, alpha, lambda-calculus

这是一个阿尔法转换。虽然我已经完成了这个，但我不太确定这是否是一个正确的答案。

```
λx y.((λx y.x) x ((λx. x) y)) ((λx y. y)((λy. y) x) y)
=λx y.((λx1 y1\. x1) x((λx2\. x2) y1)) ((λx3 y2\. y2)((λy3\. y3) x3) y) 
```

这是一个正确的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:45:58.890

你犯了两个错误。当您使用它们时，粗体变量不在范围内：

λx y.((λx1 y1.x1) x((λx2.x2) **y1** )) ((λx3 y2.y2)((λy3.y3) **x3** ) y)

# facebook - Facebook 分享链接 rel="img_src" - 有限制吗？

> ID：12748264
> 
> 赞同：0
> 
> 时间：2012-10-05T14:18:43.033
> 
> 标签：facebook, facebook-graph-api

我们已经在我们的网站上正确设置了 rel="img_src"，但我们发现在某些情况下 Facebook 拒绝显示正在共享的链接的图像。这对病毒式传播有非常不利的影响；这是下沉或游泳之间的区别。

有时它使用图像，有时它不使用。但是我看不到它如何选择是否显示缩略图的模式。它是基于图像大小，还是我们可以改变的其他因素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:09:15.100

如果您对病毒式传播非常重视 :-)，那么您也许应该在您的页面中使用 Open Graph 元标记。

无论如何，我猜`link rel="img_src"`应该应用相同的限制，就像 og:image 标签一样：

> og:image - 应在图中表示您的对象的图像 URL。图片必须至少为 50 像素 x 50 像素（但最好是 200 像素 x 200 像素）并且最大宽高比为 3:1。

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

不确定这是否完全是最新的，因为如果 og:image 在每个维度上小于 200px，调试工具会抱怨 AFAIK。

使用调试工具测试您的页面，这对于找出可能的问题很方便：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# uiscrollview - 如何更改 UIScrollView 中的默认缩放比例

> ID：12748265
> 
> 赞同：0
> 
> 时间：2012-10-05T14:18:44.500
> 
> 标签：uiscrollview

我有一个 UIScrollView，它的内容是 UIImageView，我想在显示时显示比其原始大小大 3 倍的图像。我将缩放比例设置为 3。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T21:08:31.573

确保在设置 UIScrollView 的内容后设置 zoomScale。

# php - php中当前日期的星期几

> ID：12748267
> 
> 赞同：-6
> 
> 时间：2012-10-05T14:18:47.997
> 
> 标签：php, date

您如何找到当前日期的星期一日期和当前日期的星期日日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:22:24.333

尝试

```
echo date('Y-m-d', strtotime('Monday this week'));
echo date('Y-m-d', strtotime('Sunday this week')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:21:12.310

```
strtotime('next Monday') 
```

我不知道您所说的“当前日期的星期一”和“当前日期的星期日”是什么意思。

# c# - 如何重新创建“索引超出数组范围”将项目添加到字典？

> ID：12748275
> 
> 赞同：12
> 
> 时间：2012-10-05T14:19:03.630
> 
> 标签：c#, multithreading, dictionary, .net-3.5

我在多线程 .net 3.5 应用程序上始终收到此错误

> 错误 26 抛出异常。详细信息：'System.IndexOutOfRangeException：索引超出了数组的范围。
> 
> 在 System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
> 
> 在 System.Collections.Generic.Dictionary`2.Add（TKey 键，TValue 值）

我想我知道如何修复它（在适当的地方添加锁），但我希望能够在我的本地环境中重新创建这个问题，所以我会确保我修复它并且我能够添加一个单元测试为了它。

你知道任何一致的方式来重新创建这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T14:24:51.907

```
Dictionary<string, string> dict = new Dictionary<string, string>();

Task.Factory.StartNew(() => { while (true) dict["a"] = "a"; });
Task.Factory.StartNew(() => { while (true) dict.Remove("a"); }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T14:22:16.773

不幸的是，在发生竞争条件的多线程应用程序中保持一致是根本无法实现的。

您的机器和生产机器之间的硬件差异将确保当问题确实发生时，它可能不在同一个位置。即使硬件相同，软件差异（尤其是那些后台服务）也会导致时间差异，从而导致无法重复的情况。

哎呀，如果这些线程依赖于外部资源（如数据库调用），那么生产和测试盒之间的网络延迟差异可能会确保您永远无法复制它。

羞于在服务器上安装调试器（坏主意），你能做的最好的事情是对代码进行可视化分析，修复你认为需要修复的部分，测试它（尽可能地）然后发布并在生产中观看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:27:14.760

这不会帮助您在本地重新创建错误，但要完全删除错误，通用[Dictionary<TKey, TValue>](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)的 msdn 文档说：

> 有关线程安全的替代方案，请参阅[ConcurrentDictionary<TKey, TValue>](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。

[ConcurrentDictionary<TKey, TValue>](http://msdn.microsoft.com/en-us/library/dd287191.aspx)的文档说：

> 表示可由多个线程同时访问的键值对的线程安全集合。

**但是请注意， ConcurrentDictionary<TKey, TValue> 仅在 .Net 4 及更高版本中可用。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:38:05.097

为什么不为字典创建一个包装器，其中包含 ReaderWriterLockSlim。这样，您就可以在一个班级中完成所有锁定。

# android - Netbeans，NBAndroid，升级旧的 nbandroid 项目失败。有关详细信息，请参阅日志文件

> ID：12748276
> 
> 赞同：0
> 
> 时间：2012-10-05T14:19:04.887
> 
> 标签：android, netbeans, project

对于 Netbeans 中的一些 android 项目，我不断收到此错误（升级旧的 nbandroid 项目 projectName FAILED。有关详细信息，请参阅日志文件。）。我不确定在哪里可以找到消息所指的日志，我已经检查了我可以在 netbeans 和系统日志中找到的每个日志。无济于事，没有更多信息。

我尝试追踪分数代码，看看是什么产生了这个错误，我找到了这个代码（这里：[https ://code.google.com/p/nbandroid/source/browse/project/src/org/netbeans/modules/android /project/AndroidProjectUtil.java?name=v1.5beta&r=d12ce88eb7d6a04ac55d0ae2bd8813fea1651bb4](https://code.google.com/p/nbandroid/source/browse/project/src/org/netbeans/modules/android/project/AndroidProjectUtil.java?name=v1.5beta&r=d12ce88eb7d6a04ac55d0ae2bd8813fea1651bb4) )

```
private static AndroidGeneralData findSDKAndTarget(
        AndroidProject project, PropertyProvider props, FileObject nbproject) {
    String platformName = props.getProperties().get("platform.active");
    if (platformName == null) {
        LOG.log(Level.INFO, "Cannot upgrade old nbandroid project. platform definition not found in project.properties");
        return null;
    }
    FileObject storage = FileUtil.getConfigFile(PLATFORM_STORAGE);
    String buildTargetPath = null;
    if (storage != null) {
        for (FileObject platformProvider : storage.getChildren()) {
            buildTargetPath = parseIfActivePlatorm(platformProvider, platformName);
            if (buildTargetPath != null) {
                break;
            }
        }
    }
    if (buildTargetPath == null) {
        LOG.log(Level.INFO, "Cannot upgrade old nbandroid project. platform {0} not found", platformName);
        return null;
    }
    DalvikPlatform platform = toDalvikPlatorm(buildTargetPath);
    if (platform == null) {
        LOG.log(Level.INFO, "Cannot upgrade old nbandroid project. platform {0} not found in Android SDK", platformName);
        return null;
    }
    AndroidGeneralData data = new AndroidGeneralData();
    data.setPlatform(platform);
    data.setProjectDirPath(project.getProjectDirectoryFile().getAbsolutePath());
    data.setProjectName(project.getLookup().lookup(ProjectInformation.class).getName());

    return data;
} 
```

留下几乎 3 种可能性，我尝试寻找所有这些，据我所知，所有 3 种数据都存在。我检查了 project.properties、genfiles.properties 和 project.xml 文件，我很乐意必要时提供这些。

任何提示或建议将不胜感激，这些项目目前正在运行，但我想在启动时摆脱烦人的消息。

* * *

我现在已经设法找到了确切的故障。提到的日志文件很好地隐藏在 netbeans 目录中（在 netbeans 7.2 中也改变了位置）。

我需要 [netbeans 文件根目录]/config/services/platforms/org-netbeans-api-java-Platform 中的平台文件

无论如何我都找不到这些了，我还检查了我们拥有的所有旧的开发人员计算机。

如果有人有这些平台文件（我怀疑它们是 xml 文件，根据我的发现），如果他们能将它们发送给我，将不胜感激。我应该能够修改它们以使它们工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:16:48.630

似乎项目更新过程无法从您的 netbeans 用户目录中的某个文件加载 Java 平台定义 - [http://wiki.netbeans.org/FaqWhatIsUserdir](http://wiki.netbeans.org/FaqWhatIsUserdir)结果它无法设置 Android SDK 位置并找到目标是什么为您的项目提供平台。当您升级 IDE 或其他原因时，文件/设置可能会丢失。

我的建议是您手动迁移项目。[http://www.nbandroid.org/2011/02/beta-build-of-new-project-support.html](http://www.nbandroid.org/2011/02/beta-build-of-new-project-support.html)中有提示 删除 nbproject 目录并创建一个 Android 项目，如[http://developer.android中所述.com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html)。NBAndroid 可以识别这个项目结构并且能够使用它。或者在一个空目录中创建这个项目并将你的源+资源移动到那里。

-拉迪姆

# android - Speex 回声消除配置

> ID：12748277
> 
> 赞同：9
> 
> 时间：2012-10-05T14:19:06.523
> 
> 标签：android, voip, speex, aec

我正在使用它的 AudioRecord 和 AudioTrack 类以及通过 NDK 的 Speex 来制作一个 Android 到 Android VoIP（扬声器）应用程序来进行回声消除。我能够成功地传入 Speex 的 speex_echo_cancellation() 函数并从中检索数据，但回声仍然存在。

**这是录制/发送和接收/播放音频的相关android线程代码：**

```
//constructor
public MyThread(DatagramSocket socket, int frameSize, int filterLength){
  this.socket = socket;
  nativeMethod_initEchoState(frameSize, filterLength);
}

public void run(){

  short[] audioShorts, recvShorts, recordedShorts, filteredShorts;
  byte[] audioBytes, recvBytes;
  int shortsRead;
  DatagramPacket packet;

  //initialize recorder and player
  int samplingRate = 8000;
  int managerBufferSize = 2000;
  AudioTrack player = new AudioTrack(AudioManager.STREAM_MUSIC, samplingRate, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, managerBufferSize, AudioTrack.MODE_STREAM);
  recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, samplingRate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, managerBufferSize);
  recorder.startRecording();
  player.play();

  //record first packet
  audioShorts = new short[1000];
  shortsRead = recorder.read(audioShorts, 0, audioShorts.length);

  //convert shorts to bytes to send
  audioBytes = new byte[shortsRead*2];
  ByteBuffer.wrap(audioBytes).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(audioShorts);

  //send bytes
  packet = new DatagramPacket(audioBytes, audioBytes.length);
  socket.send(packet);

  while (!this.isInterrupted()){

    //recieve packet/bytes (received audio data should have echo cancelled already)
    recvBytes = new byte[2000];
    packet = new DatagramPacket(recvBytes, recvBytes.length);
    socket.receive(packet);

    //convert bytes to shorts
    recvShorts = new short[packet.getLength()/2];
    ByteBuffer.wrap(packet.getData(), 0, packet.getLength()).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(recvShorts);

    //play shorts
    player.write(recvShorts, 0, recvShorts.length);

    //record shorts
    recordedShorts = new short[1000];
    shortsRead = recorder.read(recordedShorts, 0, recordedShorts.length);

    //send played and recorded shorts into speex, 
    //returning audio data with the echo removed
    filteredShorts = nativeMethod_speexEchoCancel(recordedShorts, recvShorts);

    //convert filtered shorts to bytes
    audioBytes = new byte[shortsRead*2];
    ByteBuffer.wrap(audioBytes).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(filteredShorts);

    //send off bytes
    packet = new DatagramPacket(audioBytes, audioBytes.length);
    socket.send(packet);                

  }//end of while loop 

} 
```

**以下是相关的 NDK/JNI 代码：**

```
void nativeMethod_initEchoState(JNIEnv *env, jobject jobj, jint frameSize, jint filterLength){
  echo_state = speex_echo_state_init(frameSize, filterLength);
}

jshortArray nativeMethod_speexEchoCancel(JNIEnv *env, jobject jObj, jshortArray input_frame, jshortArray echo_frame){

  //create native shorts from java shorts
  jshort *native_input_frame = (*env)->GetShortArrayElements(env, input_frame, NULL);
  jshort *native_echo_frame = (*env)->GetShortArrayElements(env, echo_frame, NULL);

  //allocate memory for output data
  jint length = (*env)->GetArrayLength(env, input_frame);
  jshortArray temp = (*env)->NewShortArray(env, length);
  jshort *native_output_frame = (*env)->GetShortArrayElements(env, temp, 0);

  //call echo cancellation
  speex_echo_cancellation(echo_state, native_input_frame, native_echo_frame, native_output_frame);

  //convert native output to java layer output
  jshortArray output_shorts = (*env)->NewShortArray(env, length);
  (*env)->SetShortArrayRegion(env, output_shorts, 0, length, native_output_frame);

  //cleanup and return
  (*env)->ReleaseShortArrayElements(env, input_frame, native_input_frame, 0);
  (*env)->ReleaseShortArrayElements(env, echo_frame, native_echo_frame, 0);
  (*env)->ReleaseShortArrayElements(env, temp, native_output_frame, 0);
  return output_shorts;
} 
```

这些代码运行良好，音频数据肯定是从 android-to-android 发送/接收/处理/播放的。给定 8000 Hz 的音频采样率和 2000 字节/1000shorts 的数据包大小，我发现需要 1000 的 frameSize 才能使播放的音频流畅。filterLength 的大多数值（根据 Speex 文档又名尾长）将运行，但似乎对回声消除没有影响。

有没有人足够了解 AEC 来为我提供一些关于实施或配置 Speex 的指示？谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:17:16.003

您的代码是正确的，但在本机代码中缺少某些内容，我修改了 init 方法并在回声消除后添加了 speex 预处理，然后您的代码运行良好（我在 Windows 中尝试过） 这是本机代码

```
#include <jni.h>
#include "speex/speex_echo.h"
#include "speex/speex_preprocess.h"
#include "EchoCanceller_jniHeader.h"
SpeexEchoState *st;
SpeexPreprocessState *den;

JNIEXPORT void JNICALL Java_speex_EchoCanceller_open
  (JNIEnv *env, jobject jObj, jint jSampleRate, jint jBufSize, jint jTotalSize)
{
     //init
     int sampleRate=jSampleRate;
     st = speex_echo_state_init(jBufSize, jTotalSize);
     den = speex_preprocess_state_init(jBufSize, sampleRate);
     speex_echo_ctl(st, SPEEX_ECHO_SET_SAMPLING_RATE, &sampleRate);
     speex_preprocess_ctl(den, SPEEX_PREPROCESS_SET_ECHO_STATE, st);
}

JNIEXPORT jshortArray JNICALL Java_speex_EchoCanceller_process
  (JNIEnv * env, jobject jObj, jshortArray input_frame, jshortArray echo_frame)
{
  //create native shorts from java shorts
  jshort *native_input_frame = (*env)->GetShortArrayElements(env, input_frame, NULL);
  jshort *native_echo_frame = (*env)->GetShortArrayElements(env, echo_frame, NULL);

  //allocate memory for output data
  jint length = (*env)->GetArrayLength(env, input_frame);
  jshortArray temp = (*env)->NewShortArray(env, length);
  jshort *native_output_frame = (*env)->GetShortArrayElements(env, temp, 0);

  //call echo cancellation
  speex_echo_cancellation(st, native_input_frame, native_echo_frame, native_output_frame);
  //preprocess output frame
  speex_preprocess_run(den, native_output_frame);

  //convert native output to java layer output
  jshortArray output_shorts = (*env)->NewShortArray(env, length);
  (*env)->SetShortArrayRegion(env, output_shorts, 0, length, native_output_frame);

  //cleanup and return
  (*env)->ReleaseShortArrayElements(env, input_frame, native_input_frame, 0);
  (*env)->ReleaseShortArrayElements(env, echo_frame, native_echo_frame, 0);
  (*env)->ReleaseShortArrayElements(env, temp, native_output_frame, 0);

  return output_shorts;   
}

JNIEXPORT void JNICALL Java_speex_EchoCanceller_close
  (JNIEnv *env, jobject jObj)
{
     //close
     speex_echo_state_destroy(st);
     speex_preprocess_state_destroy(den);
} 
```

您可以在 speex 库的源 (http://www.speex.org/downloads/) 中找到有用的示例，例如编码、解码、回声消除

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-08T21:27:54.000

你是否正确对齐了远端信号（你称之为recv）和近端信号（你称之为记录）？总是有一些需要考虑的播放/记录延迟。这通常需要将远端信号在环形缓冲区中缓冲一段时间。在 PC 上，这通常约为 50 - 120 毫秒。在Android上，我怀疑它要高得多。大概在 150 - 400 毫秒的范围内。我建议使用 speex 的 100 毫秒尾长并调整远端缓冲区的大小，直到 AEC 收敛。这些更改应该允许 AEC 收敛，而与包含预处理器无关，这在此处不是必需的。

# vb.net - 在 Outlook 的已发送项目文件夹中枚举和输出项目的问题

> ID：12748280
> 
> 赞同：1
> 
> 时间：2012-10-05T14:19:20.173
> 
> 标签：vb.net, outlook, add-in, outlook-addin

正如标题所说，我在 Outlook 的已发送项目文件夹中枚举和输出项目时遇到问题。具体来说，我正在寻找已发送的任务。它一直告诉我文件夹里什么都没有，当有的时候。代码是：

```
 Private Sub GetSentTasks(objApp As Microsoft.Office.Interop.Outlook.Application)
        Dim objNS As Outlook.NameSpace = objApp.GetNamespace("MAPI")
        Dim folder As Outlook.MAPIFolder = _
            objNS.GetDefaultFolder( _
            Outlook.OlDefaultFolders.olFolderSentMail)

        Dim searchCriteria As String = "[MessageClass] = 'IPM.TaskRequest'"
        Dim strBuilder As StringBuilder = Nothing
        Dim counter As Integer = 0
        Dim taskItem As Outlook._TaskItem = Nothing
        Dim folderItems As Outlook.Items = Nothing
        Dim resultItem As Object = Nothing
        Dim TTDcounter As Integer = 0
        Try
            folderItems = folder.Items
            folderItems.IncludeRecurrences = True
            If (folderItems.Count > 0) Then
                resultItem = folderItems.Find(searchCriteria)
                If Not IsNothing(resultItem) Then
                    strBuilder = New StringBuilder()
                    Do
                        If (TypeOf (resultItem) Is Outlook._TaskRequestItem) Then
                            counter += 1
                            taskItem = resultItem

                            'If taskItem.Categories = "TTD" Then
                            TTDcounter += 1
                            Dim listarray() As String = {taskItem.Delegator, taskItem.Subject, taskItem.DueDate, stripEstComp(taskItem.Body.ToString())}
                            taskPaneControl3.ListView1.Items.Add(TTDcounter).SubItems.AddRange(listarray)
                            'End If

                        End If
                Marshal.ReleaseComObject(resultItem)
                resultItem = folderItems.FindNext()
                    Loop Until IsNothing(resultItem)
                End If
            End If
            If Not IsNothing(strBuilder) Then
                Debug.WriteLine(strBuilder.ToString())
            Else
                Debug.WriteLine("There is no match in the " + _
                                   folder.Name + " folder.")
            End If
        Catch ex As Exception
            System.Windows.Forms.MessageBox.Show(ex.Message)
        Finally
            If Not IsNothing(folderItems) Then Marshal.ReleaseComObject(folderItems)
        End Try
    End Sub 
```

# java - 将消息从 RabbitMQ 转换为字符串/json

> ID：12748284
> 
> 赞同：9
> 
> 时间：2012-10-05T14:19:26.803
> 
> 标签：java, json, spring, rabbitmq, amqp

我目前正在努力解决一个相当简单的问题。我想从 RabbitMQ 接收消息并将其转换为字符串（或稍后转换为 json 对象）。但我得到的只是字节。

*Message*对象以这种方式将自身显示为字符串

```
(Body:'{"cityId":644}'; ID:null; Content:application/json; Headers:{}; Exchange:; RoutingKey:pages.type.index; Reply:null; DeliveryMode:NON_PERSISTENT; DeliveryTag:1) 
```

配置类（使用spring）

```
@Configuration
public class RabbitConfiguration {

    @Bean
    public CachingConnectionFactory connectionFactory() {
        CachingConnectionFactory connectionFactory = new CachingConnectionFactory("www.example.com");
        connectionFactory.setUsername("xxxx");
        connectionFactory.setPassword("xxxx");
        return connectionFactory;
    }

    @Bean
    public MessageConverter jsonMessageConverter(){
        JsonMessageConverter jsonMessageConverter = new JsonMessageConverter();
        return jsonMessageConverter;
    }

    @Bean
    public SimpleMessageListenerContainer messageListenerContainer(){
        SimpleMessageListenerContainer container = new SimpleMessageListenerContainer(connectionFactory());
        container.setAutoStartup(false);
        container.setQueues(indexQueue());
        container.setConcurrentConsumers(1);
        container.setAcknowledgeMode(AcknowledgeMode.AUTO);
        container.setMessageListener(new MessageListenerAdapter(pageListener(), jsonMessageConverter()));
        return container;
    }

    @Bean
    public Queue indexQueue(){
        return new Queue("pages.type.index");
    }

    @Bean
    public MessageListener pageListener(){
        return new PageQueueListener();
    }

} 
```

和消息监听器

```
public class PageQueueListener implements MessageListener {

    public void onMessage(Message message) {
        System.out.println(message);
        System.out.println(message.getBody());
    }
 } 
```

我的问题是，*getBody()*方法显示*[B@4dbb73b0*所以没有任何东西被转换。既不是字符串也不是 json 对象:(

我觉得很愚蠢，但我在这里找不到解决方案

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T14:25:47.133

`message.getBody()`返回一个`byte[]`

尝试：

```
byte[] body = message.getBody();
System.out.println(new String(body)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-23T09:12:20.753

如果要解析为 JSONObject，最好的方法是将 RabbitMQ 消息以 String 格式添加到 StringBuilder。然后使用任何转换工具将 StringBuilder 解析为 JSONObject。
例如：

```
StringBuilder sb = new StringBuilder();
sb.append(publisher.toString());
payload = (JSONObject)jsonParser.parse(sb.toString()); 
```

# android - 在加载活动之前在代码中定义启动器活动

> ID：12748287
> 
> 赞同：0
> 
> 时间：2012-10-05T14:19:34.760
> 
> 标签：android

我意识到您可以在清单文件中设置应用程序的 LAUNCHER 活动，但是在 Dalvik VM 加载活动之前，您是否可以在代码中静态地执行此操作？就像是：

```
 public class MyActivity extends Activity{

      RunTime.LAUNCHER = MyActivity.class
      ...

} 
```

我意识到这可能是不可能的，但如果是的话，我会很感激一个安全可靠的代码示例来实现这一点？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:22:11.423

然而，有可能的是有一个第一个空活动，它开始你接下来需要的任何活动，而不显示它自己。

```
public void onCreate(Bundle stuff) {
    super.onCreate(stuff);
    startActivity(new Intent(...whatever...);
    finish();
} 
```

# python - 如何将 python 2.7 静态导入 python 2.3

> ID：12748291
> 
> 赞同：1
> 
> 时间：2012-10-05T14:19:45.150
> 
> 标签：python

有一台非常旧的机器只能在上面运行 python 2.3。但我需要运行一个包含只有新 python 版本才能解释的脚本，我安装了 python 2.7 static。通过使用`./python 2.7 static`我可以进入 python 2.7 环境。`python xxx.py`但是我怎样才能通过只在终端中输入来运行我的脚本。我试图`import python 2.7 static`在脚本中添加，但它是错误的。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:39:32.700

您可以通过键入运行脚本

```
./python2.7-static script.py 
```

`make install`您可以通过在构建 Python 的目录中以 root 身份运行来让自己的生活更轻松；这*应该*将程序复制到`/usr/local/bin/pythonSOMETHING`（可能不再是`python2.7-static`）。然后你可以把

```
#! /usr/local/bin/pythonSOMETHING 
```

在脚本的最顶部，`chmod +x`它并运行它

```
./script.py 
```

如果解释器的名称包含空格，这将不起作用，这就是我向您询问它们的原因。此外，该`#!`行必须是*文件的第一行，*否则它将不起作用。

如果您没有 root 权限，请使用`configure`:的附加参数重建 Python `--prefix=$HOME`。 `make install`然后将在您的个人主目录下安装所有内容，您可以使用`#! /path/to/your/home/bin/pythonSOMETHING`. 请注意，您不能*插入*一行；您必须自己查找它扩展为 ( ) 的内容。`$HOME``#!``echo $HOME`

# c# - 在哪里存储本地服务应用程序数据？

> ID：12748297
> 
> 赞同：1
> 
> 时间：2012-10-05T14:20:00.643
> 
> 标签：c#, windows-services, appdata

我正在编写一个具有“LocalService”帐户类型的 Windows 服务。我有一个文件存储它必须做的事情。

我还有一个 Windows 窗体 GUI，还可以访问该文件以添加/删除要执行的服务的操作实例。（不知道它是否相关，但该服务从网络服务下载表格并将它们导出到用户有权访问的任何数据库。这些下载计划定期发生）

该服务将仅安装在用户帐户上。

我计划将文件存储在用户 appdata 文件夹中，但是在调试服务时出现错误“访问路径 [路径] 被拒绝”

您建议将这个文件存储在哪里，以便两个程序都可以访问它？谢谢

编辑：再看一点，我意识到

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

为服务和 Windows 窗体应用程序找到不同的路径。并且该应用程序无法访问服务应用程序数据，就像服务似乎无法访问用户应用程序数据一样。所以同样的问题存在！

另一个编辑：事实证明

Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData)

可从本地服务和用户程序访问 - doh

...但有些地方似乎是只读的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:48:18.013

我看到的三个选项：

*   在用户的登录 id 下运行服务

好处 - 两个进程对文件系统的各个部分都具有相同的访问权限，因此应该消除您的直接问题

缺点 - 如果用户更改密码，两者将不同步。

*   写入文件系统（或注册表）的某些“中性”部分，共享访问不会成为问题。AppData 的问题在于，正如您所发现的，Windows 围绕它设置了各种保护措施，以便将不同的用户相互隔离。

上行 - 写作没有问题

不利的一面——你实际上是在发明自己的标准。15 年前，这将是一个显而易见的注册表，但这些天我得到的印象是注册表是不受欢迎的（尽管 ms 仍然依赖它！）。如果您确实走注册表路线，请确保您的目标是hklm而不是hkcu，否则您将遇到同样的问题！

*   在您的设置过程中，做一些技巧来设置对相关文件夹的访问。但这基本上是在破坏 Windows 设置的保护。对我来说听起来不太明智。

# javascript - Java 脚本错误抑制

> ID：12748300
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:20:10.770
> 
> 标签：javascript, error-handling

页面上是否有任何错误发生，我们可以抑制错误。当我们有 iframe 时，我们正在加载我们无法控制的第三方网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:32:09.067

抑制错误的唯一方法是代码在您的域上运行并且您可以使用[`window.onerror`](https://developer.mozilla.org/en-US/docs/DOM/window.onerror). 如果它在他们的 [in iframe/frame] 上，那么您无能为力。

告诉他们修复它或不包括他们的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:49:41.107

您不能从 iframe 或框架中的不同域修改网站的代码或行为。浏览器阻止任何跨域修改。有关详细信息，请参阅 MDN 上的[“同源策略”](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)。

需要一个浏览器插件来完成您所描述的操作。如果你想在 iframe/frame 中显示第三方网站，你会得到他们产生的任何行为。

# html - 如何在 html 中更改输入文件的类型？

> ID：12748301
> 
> 赞同：0
> 
> 时间：2012-10-05T14:20:11.233
> 
> 标签：html, file, file-io

我有这个 html 代码

```
<input type="file" id="path" name="selectpath"/> 
```

但是当我单击此输入时，当我单击任何文件夹时，它只能选择文件而不是文件夹，只需打开它而不获取此路径或目录，它必须选择任何文件（图像、文本文件等），但我只需要选择文件夹获取客户端计算机上任何位置的目录我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:25:09.573

不是通过 HTML 明确的。您需要一些 Java 小程序或 Flash 电影来完成它。我这样做的一种方法是使用自定义 PHP 脚本，该脚本接收一个 zip 或 tar 文件并在后端解压缩它，然后转储它。

# mysql - Mysql查询严重减慢连接

> ID：12748302
> 
> 赞同：0
> 
> 时间：2012-10-05T14:20:14.260
> 
> 标签：mysql, sql, join, mysql-slow-query-log

有一个大约 20,000 行的表。一切正常，但其中一个查询已减慢到大约 5 秒以上。所有表都有主键及其相关索引。还有外键及其相关索引。我已经尝试添加新索引并一点一点地修剪查询，但这并没有太大的区别。我也删除了订单，这确实有帮助，但也只有这么多。我想知道我是否可以得到一双新的眼睛，看看我是否在这里遗漏了什么。

```
SELECT DISTINCT 
t1.my_key,
t2.some_name,
t3.the_weather,
t4.another_value,
t5.hello_world,
t6.last_one
FROM
table_1 AS t1
INNER JOIN table_2 AS t2 
  ON t1.t2_id_fk = t2.t2_id_pk 
INNER JOIN table_3 AS t3 
  ON t1.t3_id_fk = t3.t3_id_pk
INNER JOIN table_4 as t4
  ON t1.t4_id_fk = t4.t4_id_pk 
LEFT JOIN table_5 AS t5 
  ON t1.t5_id_fk = t5.t5_id_pk
LEFT JOIN table_6 AS t6 
  ON t1.t6_id_fk = t6.t6_id_pk
LEFT JOIN (
  table_7 AS t7
  INNER JOIN table_8 AS t8
    ON (t7.t8_id_fk = t8.t8_id_pk)
           ) 
 ON (t1.t1_id_pk = t7.t1_id_fk) 
```

我想知道是什么导致了 using_temporary，尤其是当我为它们都定义了索引时。出于某种原因，当我运行解释时，一切看起来都很好，除了表 2 中的第一个连接值之外，每个都只需要搜索 1 行。在这种情况下，它返回一个 using_temporary 并且每次需要搜索近 3000 行。

更新我向 table_1 添加了一个唯一索引，该索引由其他连接表中的键以相同的顺序组成。Explain 告诉我，这将要搜索的行数从 3000 减少到 294，但查询执行时间仍然过长。现在我必须说它不寻常。

# ajax - $.ajax DELETE 忽略数据

> ID：12748303
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:20:15.167
> 
> 标签：ajax, jquery

我在寻找解决方案时找到了这个链接。它建议在版本 1.4.x 中进行错误修复。那是一个非常旧的版本，我还没有修复吗？

[$.ajax 忽略 DELETE 请求的数据参数](https://stackoverflow.com/questions/4018982/ajax-ignoring-data-param-for-delete-requests)

下面的代码在采用完全相同的请求参数的 GET 上完美运行。我如何调用 DELETE 方法？

```
 var data = {
            accessToken : accessToken
        }

        $.ajax({
            type : 'DELETE',
            url : "/user/" + userId,
            cache : false,
            data : data,
            success : function(profile) {
                $("#account-delete .response-container").html(JSON.stringify(profile, null, 2));
                $("#account-delete .request-container").html("/user/?" + $.param(data));
            }, 
            error : function(jqXHR, textStatus, errorThrown) {
                $("#account-delete .error-container").html(textStatus +" - " +  errorThrown);

            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:24:24.847

[您在这里](https://stackoverflow.com/questions/2153917/how-to-send-a-put-delete-request-in-jquery)查看了其他 SO 问题吗？这可能是你的问题：

请注意，如果您使用的是 IIS 网络服务器并且 jquery PUT 或 DELETE 请求返回 404 错误，则需要在 IIS 中启用这些动词。我发现这是一个很好的资源：

[http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx](http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:27:22.577

您可能不应该使用 DELETE，因为根据[jQuery 文档](http://api.jquery.com/jQuery.ajax/)，某些浏览器不支持它。

也许[这个答案](https://stackoverflow.com/questions/2456820/problem-with-jquery-ajax-with-delete-method-in-ie)会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:55:21.807

好的，这个灵魂有效。

在 web.xml 中添加此过滤器

```
<filter>
    <filter-name>hiddenHttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</filter> 
```

使用 POST 调用控制器，在数据中提供 _method: 'DELETE'。

```
 $.ajax({  
        url: "/application/form",
        type: 'POST',  
        data: { 
            _method: 'DELETE',
            param : "param"

        },  
        success: function (res) {  
            console.log("success");
        } , 
        error: function (res) {  
            alert(res);
        } 
    }); 
```

# google-app-engine - 如何在不迁移数据的情况下将 GAE 别名迁移到新应用程序

> ID：12748304
> 
> 赞同：1
> 
> 时间：2012-10-05T14:20:16.570
> 
> 标签：google-app-engine, migration

我们有一个使用旧版主从数据库的现有应用程序，该数据库具有我们其中一个子域的别名。当我们去 HRD 时，我们对应用程序进行了相当大的重新设计，因此我们不想使用迁移工具。事实上，我们根本不关心数据（原因见下文**背景**）。我只想更改别名，以便子域指向一个新的应用程序，或者换句话说：

subdomain.example.com --> oldapplication.appspot.com

至

subdomain.example.com --> newapplication.appspot.com

通常（在非 GAE 环境中）这将是一个简单的 DNS 更改，一旦 DNS 传播，我们可以关闭旧应用程序。在 GAE 中，我们可以删除旧别名并在新应用程序上设置别名，但我们不知道这需要多长时间才能完成（除了某人单击按钮并发布所需的 10 秒到控制面板）。我们可能愿意接受一个非常小的停机时间窗口，其中 subdomain.example.com 不会提供页面（因为我们知道什么时候是峰值负载）。但是有谁知道这种转换需要多长时间？

我们报告了一个生产问题，但没有任何反馈。

**背景：** 这个应用程序提供了一些可以嵌入到合作伙伴网站中的 Javascript。这方面的数据每天都通过 API 从我们的主站点（不在 GAE 上）获取。所以我们不关心迁移数据，事实上我们已经在为新的应用程序做每日提要，只需要更改别名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:34:57.403

我只是为我的域做了非常相似的事情。移动 example.com 以指向我在 GAE/google 应用程序中的新应用程序。我删除了现有的域/appengine 应用程序映射，并在不到 10 秒的时间内添加了新映射。

没有停机时间。大约一分钟后，我的域继续指向旧应用程序，然后它移动到新应用程序。

# javascript - Redis：使用列表保存 Javascript 对象

> ID：12748305
> 
> 赞同：1
> 
> 时间：2012-10-05T14:20:17.920
> 
> 标签：javascript, redis

基本上我正在尝试设置一个具有给定值的对象，但即使它看起来很成功，我也无法让它工作。这是我的 javascript 对象；

```
function student(){
  var newStudent = {};
  newStudent.lessons = [1,3,4];

  return newStudent;
} 
```

后来，当我想获得学生列表时，我失败了，因为 console.log 打印**“未定义”**，但是对象**不是 null**。我插入redis的代码；

```
var student = Students.student();
//Object is not null I checked it
client.set("studentKey1", student, redis.print);
    client.get("studentKey1", function(err, reply){
        console.log(reply.lessons);
    }); 
```

两个问题；

首先，我该如何正确地做到这一点，或者 Redis 不支持 Javascript 的列表结构。其次，如果我想用 studentKey1 获取项目并将一个项目插入到列表的后面，我该如何完成它（如何使用**RPUSH**）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:02:41.073

如果您只想保存整个 Javascript 对象，则需要先将其转换为字符串，因为 Redis 只接受字符串值。

```
client.set('studentKey1', JSON.stringify(student), redis.print); 
```

将来，如果您的`student`对象具有函数，请记住这些函数不会被序列化并存储在缓存中。从缓存中获取对象后，您需要对其进行补水。

```
client.get('studentKey1', function (err, results) {
   if (err) {
       return console.log(err);
   }

   // this is just an example, you would need to create the init function
   // that takes student data and populates a new Student object correctly
   var student = new Student().init(results);
   console.log(student);
} 
```

要使用 RPUSH，如果学生中除了要存储的列表之外还有其他数据，则需要将学生拆分为多个键。基本上，列表必须存储在自己的密钥中。这通常通过将列表名称附加到它所属的对象键的末尾来完成。

我已经使用了`multi`操作语法，因此可以一次性将学生添加到缓存中。请注意，如果密钥尚不存在，将为您创建密钥。

```
var multi = client.multi().set('studentKey1', 'store any string data');
student.lessons.forEach(function(l) {
    multi.rpush('studentKey1:lessons', l);
});
multi.exec(function (err) { if (err) console.log(err); }); 
```

然后要在最后添加一个新项目，您将执行以下操作。这会将一个新项目推到列表的末尾。在将新值推送到列表末尾之前，无需获取该项目。

```
client.rpush('studentKey1:lessons', JSON.stringify(newItem)); 
```

# java - 使用 JDT 将注释附加到类

> ID：12748308
> 
> 赞同：3
> 
> 时间：2012-10-05T14:20:29.060
> 
> 标签：java, eclipse-plugin, annotations, abstract-syntax-tree, eclipse-jdt

我有一个包含以下内容的 IFile：

```
package com.example;
//@SimpleAnnotation(Blab.ckass)
//@CustomAnnotation(arg1 = Blup.class , arg2 = Blup.Row.class)
public class SimpleClassWithAnnotation {

} 
```

如何在课堂上添加注释（注释的）？我尝试使用[此](https://stackoverflow.com/questions/8537884/how-to-generate-multiple-values-for-a-class-level-annotation-using-jdt)线程中的解决方案，但来源没有改变。这是我使用的代码片段：

```
 final ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setSource(this.cu);
    ICompilationUnit cu = JavaCore.createCompilationUnitFrom(this.ifile);
    final CompilationUnit astRoot = (CompilationUnit) parser.createAST(null);
    final AST ast = astRoot.getAST();
    astRoot.recordModifications();
    final NormalAnnotation newNormalAnnotation = astRoot.getAST().newNormalAnnotation();
    newNormalAnnotation.setTypeName(astRoot.getAST().newName("AnnotationTest")); 
```

这是尝试添加一个简单的注释`@AnnotationTest`。但是我需要这样的东西：`@CustomAnnotation(arg1 = Blup.class , arg2 = Blup.Row.class)`

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T09:02:12.710

经过多次尝试，我得到了解决方案。问题就像 Unni Kris 提到的那样，我必须使用`ASTRewriter`它来操纵 AST 树。另一个问题是如何将更改保存回文件。我找到了一个解决方案，我不确定它是否 100% 正确，但至少它对我有用。

```
 private void addAnnotations(final ICompilationUnit cu) throws MalformedTreeException, BadLocationException, CoreException {

     // parse compilation unit
    final ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setSource(cu);
    final CompilationUnit astRoot = (CompilationUnit) parser.createAST(null);

    // create a ASTRewrite
    final AST ast = astRoot.getAST();
    final ASTRewrite rewriter = ASTRewrite.create(ast);

    final ListRewrite listRewrite = rewriter.getListRewrite(astRoot, CompilationUnit.TYPES_PROPERTY);
    final NormalAnnotation eventHandlerAnnotation = astRoot.getAST().newNormalAnnotation();
    eventHandlerAnnotation.setTypeName(astRoot.getAST().newName("CustomAnnotation"));
    eventHandlerAnnotation.values().add(createAnnotationMember(ast, "arg1", "Blup"));
    eventHandlerAnnotation.values().add(createQualifiedAnnotationMember(ast, "arg2", "IsWorkbenchTest", "Blab"));

    final SingleMemberAnnotation runWithFop = astRoot.getAST().newSingleMemberAnnotation();
    runWithFop.setTypeName(astRoot.getAST().newName("SimpleAnnotation"));
    final TypeLiteral newTypeLiteral = astRoot.getAST().newTypeLiteral();
    newTypeLiteral.setType(astRoot.getAST().newSimpleType(astRoot.getAST().newSimpleName("Blop")));
    runWithFop.setValue(newTypeLiteral);
    listRewrite.insertAt(runWithFop, 0, null);
    listRewrite.insertAt(eventHandlerAnnotation, 0, null);
    final TextEdit edits = rewriter.rewriteAST();

    // apply the text edits to the compilation unit
    final Document document = new Document(cu.getSource());
    edits.apply(document);

    // this is the code for adding statements
    cu.getBuffer().setContents(formatFileContent(document.get()));
    cu.save(null, true);
}
protected MemberValuePair createQualifiedAnnotationMember(final AST ast, final String name, final String value, final String value2) {
    final MemberValuePair mV = ast.newMemberValuePair();
    mV.setName(ast.newSimpleName(name));
    final TypeLiteral typeLiteral = ast.newTypeLiteral();
    final QualifiedType newQualifiedName = ast.newQualifiedType(ast.newSimpleType(ast.newSimpleName(value)), ast.newSimpleName(value2));
    typeLiteral.setType(newQualifiedName);
    mV.setValue(typeLiteral);
    return mV;
}

protected MemberValuePair createAnnotationMember(final AST ast, final String name, final String value) {

    final MemberValuePair mV = ast.newMemberValuePair();
    mV.setName(ast.newSimpleName(name));
    final TypeLiteral typeLiteral = ast.newTypeLiteral();
    typeLiteral.setType(ast.newSimpleType(ast.newSimpleName(value)));
    mV.setValue(typeLiteral);
    return mV;
} 
```

我还发现了一个插件，它显示了 Eclipse 中 java 文件的 AST 结构（[ASTView](http://www.eclipse.org/jdt/ui/astview/index.php)）。这帮助我弄清楚了如何创建注释结构。只需创建一个具有所需结构的 java 文件，然后查看 AST 结构的外观。这是示例：

![Eclipse 截图](../Images/46fbc45abd9bbf352d93d78dddb760f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T06:24:06.787

所做的修改仅适用于 AST，不会记录到 Java 源代码文件中。

检查下面的链接。这提供了有关如何将 AST 更改写入文件的见解。

[http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)

***更新：***

您可以添加注释值，如下所示：

```
MemberValuePair mV = astRoot.getAST().newMemberValuePair();
mV.setName(astRoot.getAST().newSimpleName("name"));
TypeLiteral typeLiteral = astRoot.getAST().newTypeLiteral();
typeLiteral.setType(astRoot.getAST().newSimpleType(astRoot.getAST().newSimpleName("Blup")));
mV.setValue(typeLiteral);
newNormalAnnotation.values().add(mV); 
```

然后，您可以将 NormalAnnotation 添加到 Class 的修饰符列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T00:46:50.203

With your solution using:

```
final ListRewrite listRewrite = rewriter.getListRewrite(astRoot, CompilationUnit.TYPES_PROPERTY); 
```

I get one line space between annotation and class. So I tried to add annotation as Modifier and it seems working well. Below is an example how to do it:

```
final MarkerAnnotation javaTaskInfoA = ast.newMarkerAnnotation();
javaTaskInfoA.setTypeName(ast.newSimpleName(JavaTaskInfo.class.getSimpleName()));
acu.accept(new ASTVisitor() { public boolean visit(TypeDeclaration node) {
    rewriter.getListRewrite(node, node.getModifiersProperty()).insertAt(javaTaskInfoA, 0, null);
    return false;
}}); 
```

Marek

# ruby-on-rails - 对于带有导轨的自动css精灵，指南针导轨有什么好的替代品吗？

> ID：12748315
> 
> 赞同：2
> 
> 时间：2012-10-05T14:20:54.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, compass-sass, css-sprites

我在 Rails 3.2.6 应用程序中安装了 compass-rails，但仅用于自动精灵功能，我在想：

1.  这可能是矫枉过正
2.  我需要启动监视任务，否则什么也没有发生（这不是真正的问题）
3.  一旦 watch 注意到变化，与 Rails 原始方式相比，它非常慢

我试过 css_sprite 但由于另一个缺少库而无法安装（我在 Windows 上）

还有柠檬水，但服务器不会在 gemfile 中以它开始，因为它已被弃用并集成到... compass

所以我想知道是否有任何简单的宝石可以生成精灵和相关的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:22:24.350

Sprite Factory 对我的一些解决方案效果很好：[https ://github.com/jakesgordon/sprite-factory](https://github.com/jakesgordon/sprite-factory)

# android - 更改 AnalogClock 小部件的大小？

> ID：12748320
> 
> 赞同：4
> 
> 时间：2012-10-05T14:21:03.113
> 
> 标签：android, android-widget, clock

我在我的活动布局中使用内置的 AnalogClock 小部件。我想让它变大。调整 layout_width 和 layout_height 似乎没有什么不同。有没有一种简单的方法可以做到这一点？

```
<AnalogClock
    android:id="@+id/analogClock"
    android:layout_width="500dp"
    android:layout_height="500dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-01T11:46:06.177

你也可以使用

```
android:scaleX="preferedScale" 
```

和

```
 android:scaleY="preferedScale" 
```

与`preferedScale`= 1,2,3 ... n

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T14:54:31.410

默认的模拟时钟有拨号盘，在 HDPI 中是 231 * 231。即使您更多地提及 AnalogClock 的宽度和高度，这些图像也不会被拉伸。要显示更大的 AnalogClock，请提供您自己的拨号盘以及具有自定义尺寸的分针和时针。

```
 <AnalogClock
           android:dial="@drawable/your_dial_pad"
           android:hand_hour="@drawable/your_hour_hand"
           android:hand_minute="@drawable/your_minutes_hand"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-11T14:06:47.853

我发现以前的答案对我不起作用。我找到了一个简单的解决方案。只需为时钟的背景创建您自己的自定义可绘制对象，然后设置`android:dial`属性。您可以根据需要创建可绘制的对象。当然，如果你想让你的时钟看起来很漂亮，你也必须创建两个小时和分钟的可绘制对象。您可以简单地将默认可绘制对象复制到某处并使用图像编辑器调整它们的大小：

```
<AnalogClock
        android:id="@+id/AnalogClock"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:dial="@drawable/widgetdial_big"
        android:hand_hour="@drawable/widgethour_big"
        android:hand_minute="@drawable/widgetminute_big" /> 
```

如果您使用小部件，则必须像这样声明 AppWidgetProviderInfo（例如 300dip）：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minHeight="300dip"
    android:minWidth="300dip"
    android:updatePeriodMillis="0" /> 
```

# php - 哈希后PHP正确登录

> ID：12748327
> 
> 赞同：1
> 
> 时间：2012-10-05T14:21:33.123
> 
> 标签：php, authentication, passwords

当我搜索“php 正确登录”时，我发现的只是如何正确散列密码。但是，我记得读过以下代码是错误的，因为您可以将 ?loggedIn=True 添加到 URL。那么这样做的正确方法是什么？

```
if($hash == $hashFromDatabase){
    $loggedIn = True;
}

Then change the page accordingly to the value of $loggedIn. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:23:36.580

`?loggedIn=True`仅当您`register_globals`启用时才有效。检查您的 ini 设置（我*真的*希望您不要这样做）。

您也可以使用`$_SESSION['loggedIn'] = True`, 甚至`$_SESSION['user'] = $username`让他们在多个请求中保持登录状态。

# vim - 写入文件时 Vim 似乎卡住了

> ID：12748340
> 
> 赞同：5
> 
> 时间：2012-10-05T14:22:14.610
> 
> 标签：vim, terminal

我在 OSX 和 Vim 中使用 Terminal.app。每次我尝试写入/保存一个特定文件（它恰好是一个 .scss 文件）时，Vim 似乎只是挂起。我知道它成功地写入了文件，但它永远不会让我重新控制。相反，我在底部看到文件名，光标在行尾闪烁。我试过 Ctrl-Esc、Ctrl-c 和 Ctrl-[ 都无济于事。

如果我然后退出 Terminal.app 并重新打开它，我可以看到卡住的 Vim 进程仍在 Activity Monitor 中运行。

我可以写其他文件就好了。

我也在使用 CodeKit 来观看 .scss 文件，但认为这可能是原因，我退出了 CodeKit 并尝试用 Vim 再次写入文件，但它仍然卡住了。

如果我使用 MacVim，它似乎确实可以正确编写，但它似乎无法通过 Terminal.app 工作。

任何建议将不胜感激，谢谢！

编辑

这是我当前的 .vimrc：[https ://www.dropbox.com/s/1r72shv47f07crs/.vimrc](https://www.dropbox.com/s/1r72shv47f07crs/.vimrc)

我正在使用 Vim 7.3，以下是详细信息：

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Jun 20 2012 13:16:02)
Compiled by root@apple.com
Normal version without GUI.  Features included (+) or not (-):
-arabic +autocmd -balloon_eval -browse +builtin_terms +byte_offset +cindent 
-clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
-conceal +cryptv +cscope +cursorbind +cursorshape +dialog_con +diff +digraphs 
-dnd -ebcdic -emacs_tags +eval +ex_extra +extra_search -farsi +file_in_path 
+find_in_path +float +folding -footer +fork() -gettext -hangul_input +iconv 
+insert_expand +jumplist -keymap -langmap +libcall +linebreak +lispindent 
+listcmds +localmap -lua +menu +mksession +modify_fname +mouse -mouseshape 
-mouse_dec -mouse_gpm -mouse_jsbterm -mouse_netterm -mouse_sysmouse 
+mouse_xterm +multi_byte +multi_lang -mzscheme +netbeans_intg -osfiletype 
+path_extra -perl +persistent_undo +postscript +printer -profile +python/dyn 
-python3 +quickfix +reltime -rightleft +ruby/dyn +scrollbind +signs 
+smartindent -sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
+tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
 -toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
+vreplace +wildignore +wildmenu +windows +writebackup -X11 -xfontset -xim -xsmp
 -xterm_clipboard -xterm_save 
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -D_FORTIFY_SOURCE=0 -Iproto -DHAVE_CONFIG_H -arch i386 -arch x86_64 -g -Os -pipe
Linking: gcc -arch i386 -arch x86_64 -o vim -lncurses 
```

这就是我的 .bash_profile 中的全部内容：

```
# Tell ls to be colourful
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced

# Tell grep to highlight matches
export GREP_OPTIONS='--color=auto' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:20:38.503

我终于找到了问题的原因。它确实与文件权限有关。我在同一目录中创建了一个新的 test.scss 文件，并且能够在 Terminal.app 中使用 vim 很好地保存对它的更改。然后我比较了 test.scss 文件和我的主要 style.scss 文件的权限，这给我带来了麻烦。结果如下所示：

测试.scss

```
-rwx------ 
```

和 style.scss （给我带来麻烦的文件）

```
-rwx------@ 
```

我怀疑 CodeKit 在最初扫描文件时（由 CodeKit）向文件添加了一些额外的文件属性，而这些额外的属性（如 @ 所示）是罪魁祸首。这可以解释为什么即使 CodeKit 没有运行我仍然遇到问题。我使用 xattr 命令检查给我 com.apple.ResourceFork 的附加属性。然后我使用带有 -d 标志的 xattr 从文件中删除了这个附加属性，问题得到了解决。

```
xattr -d com.apple.ResourceFork style.scss 
```

我怀疑这是一个非常模糊和具体的情况，但希望它对其他人也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:29:40.640

你运行的是什么版本的 Vim？也许更新它可能会修复错误。

我认为唯一会导致 Vim 因保存文件等常见问题而窒息的其他事情是插件冲突或`.vimrc`.

如果您能提供一些更详细的信息，我可能会提供更多帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:45:55.807

默认的 Vim 在 Mac OS X 上总是很糟糕。

幸运的是，MacVim 带有一个`mvim`可执行脚本，允许您*在*shell 中使用 MacVim。把它放在你的某个地方，`$PATH`然后做`$ mvim -v filename`. 如果问题只发生在您使用`/usr/bin/vim`它时可能会解决它。

你有合成插件吗？

# oop - OOP - 句柄类

> ID：12748348
> 
> 赞同：-2
> 
> 时间：2012-10-05T14:22:36.180
> 
> 标签：oop, class, matlab

我是`handle class`在`Matlab`. 这是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:25:17.880

MatLab：[句柄类](http://www.mathworks.com/help/matlab/handle-classes.html)（与其他对象共享引用的对象）

# .net - 在 DataBound 事件上更改 GridView BoundField 值

> ID：12748352
> 
> 赞同：3
> 
> 时间：2012-10-05T14:23:01.677
> 
> 标签：.net, gridview

我有 GridView（动态创建）和 BoundFields。我想更改 DataBound 事件的 BoundField 值。该值包含布尔值（True / False），我需要将它们更改为“Active”/“Inactive”。如果这不是动态 GridView，我会使用 TemplateField，但是，因为我正在动态创建 GridView，最简单的方法是在 BoundField 中进行。

但我不明白如何改变它。

这是我正确触发的 DataBound 事件：

```
protected void gr_RowDataBound(object sender, GridViewRowEventArgs  e)
    {
        DataRowView drv = (DataRowView)e.Row.DataItem;
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (drv["IsRegistered"] != DBNull.Value)
            {
                bool val = Convert.ToBoolean(drv["IsRegistered"]);
                //???? HOW TO CHANGE PREVIOUS VALUE TO NEW VALUE (val) HERE?
            }
        } 
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T14:28:00.720

`BoundFields`例如，您不能使用在`FindControl`TemplateField 中查找控件来设置它的`Text`属性。相反，您设置`Cell-Text`：

```
protected void gr_RowDataBound(object sender, GridViewRowEventArgs  e)
{
    DataRowView drv = (DataRowView)e.Row.DataItem;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (drv["IsRegistered"] != DBNull.Value)
        {
            bool val = Convert.ToBoolean(drv["IsRegistered"]);
             // assuming that the field is in the third column
            e.Row.Cells[2].Text =  val ? "Active" : "Inactive";
        }
    } 
} 
```

除此之外，您`TemplateFields`甚至可以在动态`GridView`.

[如何以编程方式添加 TemplateField](https://stackoverflow.com/a/12581238/284240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T17:11:56.497

就我而言，我什至不知道包含 bool 值的列的名称或索引。因此，在第一次检查中，我检查单元格的值是“真”还是“假”，如果是，我记得它的索引。在此之后，我知道索引，如果没有，我什么都不做，如果我找到了，那么我会重放它的值。

这是我的工作代码：

```
// Cache of indexes of bool fields
private List<int> _boolFieldIndexes;

private void gvList_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //-- if I checked and there are no bool fields, do not do anything
    if ((_boolFieldIndexes == null) || _boolFieldIndexes.Any())
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //-- have I checked the indexes before?
            if (_boolFieldIndexes == null)
            {
                _boolFieldIndexes = new List<int>();
                for (int i = 0; i < e.Row.Cells.Count; i++)
                {
                    if ((e.Row.Cells[i].Text == "True") || (e.Row.Cells[i].Text == "False"))
                    {
                        // remember which column is a bool field
                        _boolFieldIndexes.Add(i);
                    }
                }
            }
            //-- go through the bool columns:
            foreach (int index in _boolFieldIndexes)
            {
                //-- replace its value:
                e.Row.Cells[index].Text = e.Row.Cells[index].Text
                    .Replace("True", "Ja")
                    .Replace("False", "Nein");
            }
        }
    }
} 
```

好消息是，这适用于任何网格视图。只需附加事件。

# java - java声明一个泛型数组

> ID：12748353
> 
> 赞同：0
> 
> 时间：2012-10-05T14:23:06.617
> 
> 标签：java, arrays, generics

首先我是Java新手，经验很少。

在一个类中，我具有以下属性

```
private List<Arc> arcs[]; // an array of a List of type Arc 
```

在类的构造函数中，我试图初始化它：

```
 @SuppressWarnings("unchecked")
 arcs = new List[500]; 
```

但它不会编译。我一直在试图弄清楚如何初始化这种类型的数组，我看到了我不理解的 Array.newinstance 的使用。

感谢您的帮助

解决方案：

弧=新列表[500]；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:24:08.520

用这个 ：

```
arcs = new List[500]; 
```

但不是“Lista”。

恐怕你的问题只是一个错字......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:25:08.360

你似乎在这里混合了一些东西。

如果您需要的是一维数组，则可以使用 List 或数组，但不能同时使用：

```
 List<Arc> list = new ArrayList<Arc>();
    list.add(new Arc());

    Arc[] array = new array[1];
    array[0] = new Arc(); 
```

除非您确实需要数组列表（二维结构），但似乎并非如此。

**编辑**

根据您的评论，您需要一个列表数组，如下所示：

```
List<Arc>[] listOfArrays = new List[500]; //you can't easily mix arrays and generics
List<Arc> list = new ArrayList<Arc>();
list.add(new Arc());
listOfArrays[0] = list; 
```

ps：您还可以使用列表列表：

```
List<List<Arc>> listOfLists = new ArrayList<List<Arc>>();
List<Arc> list = new ArrayList<Arc>();
list.add(new Arc());
listOfLists.add(list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:33:05.527

理想情况下，为避免警告，您应使用列表列表

```
List< List<Arc>> arcLists = new ArrayList< List< Arc >>(); 
```

当然，在 Java 7 中，使用类型推断可能看起来更简洁一些。

如果您对数组一心一意，请使用

```
arcs = (ArrayList<Arc>[]) new ArrayList[500]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:45:44.890

您不能做您想做的事，因为数组在运行时包含有关其组件类型的信息。泛型没有。所以要创建一个数组，你必须知道类型，这意味着在这种情况下你不能使用泛型。

这就是代码`List<Arcs>[] arcs`有效而无效的原因`new ArrayList<Arcs>[500]`。

当你尝试做这样的事情时你会得到同样的错误（T 是通用的）

```
T[] genericArray = new T[]; 
```

错误编译器失败是：`Cannot create a generic array`

要避免它，您可以创建如下内容：

`List<Arcs>[] arcs = new ArrayList[500];`

但是 thsi 不是类型安全的，要使用类型保存解决方案，您应该使用以下代码：

`List<List<Arcs>> lista = new ArrayList<List<Arcs>>();`

# javascript - jquery datepicker - 在标签中包装周数

> ID：12748354
> 
> 赞同：0
> 
> 时间：2012-10-05T14:23:07.583
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jquery datepicker，我正在尝试向它添加一些我自己的样式 - 但是 - 因为周数只是直接插入到表格单元格中，所以我只能使用它来做的事情非常有限CSS。

有什么办法可以制作当前格式：

`<td class="ui-datepicker-week-col">40</td>`

看起来更像这样

`<td class="ui-datepicker-week-col"><p>40</p></td>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:32:58.207

```
 $(document).ready(function() {
    $("#selector")
      .datepicker({ showWeek: true ,
                    onChangeMonthYear:function(a,b,c)
                                      {setTimeout(function(){$(c.input).trigger('update');},20);}
                  }).on('update',function(){$('.ui-datepicker-week-col',this).wrapInner('<p/>');})
                      .trigger('update');
  }); 
```

演示：http: [**//jsfiddle.net/doktormolle/7MqLn/**](http://jsfiddle.net/doktormolle/7MqLn/)

但我同意 Scott Selby 的观点，选择器`.ui-datepicker-week-col`足以用于自定义样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:33:01.203

您可能应该在生成表后运行 JavaScript 函数。

我没有测试过这段代码，但这应该是方法。

```
var targetTag = document.getElementsByClassName("ui-datepicker-week-col"); 
```

现在这会将所有元素作为一个数组提供给您，例如 targetTag[0]、targetTag[1]、... 然后您可以为每个循环运行一个并执行以下操作：

```
targetTag[i].innerHTML = "<p>" + targetTag[i].innerHTML + "</p>"; 
```

注意：一些较旧的浏览器可能不支持 getElementsByClassName JavaScript 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:28:41.450

您可以控制您的 jquery-ui css 文件，您可以覆盖其中的任何内容以按照您想要的方式设置样式，我不知道有任何方法可以更改呈现的 HTML，例如添加`<p>`日期，但您总是可以这样做css中这样的东西

```
.ui-datepicker-week-col{
      display: inline !important;  // or however you want to change it
  } 
```

或添加 HTML

```
<style type="text/css">
     .ui-datepicker-week-col{
        ...  /*HTML styling will override css file*/
         }
</style> 
```

# google-apps-script - GAS 函数返回错误的日期 - 是我还是缺陷？

> ID：12748363
> 
> 赞同：3
> 
> 时间：2012-10-05T14:23:49.137
> 
> 标签：google-apps-script

除非我使用 .toLocaleDateString() 方法，否则下面的函数会返回一个比应有的日期少一天的日期。我做错了什么还是这是一个缺陷？

```
 function myDate() {
  var sDate = '05/10/2012';
  var parts = sDate.split('/');
  var d = new Date( parts[2], parts[1]-1, parts[0]);
  Logger.log(d);
  Logger.log(d.toLocaleDateString());
}; 
```

记录器返回：

2012 年 10 月 4 日星期四 16:00:00 PDT

2012 年 10 月 5 日 00:00:00 BST

我在英国，因此使用英国日期格式。我检查了我的项目属性的时区设置为“(GMT+00:00) 伦敦”，那么为什么 Logger 会在 PDT 中显示第一个日期？这就是日期错误的原因吗？我已经在一个独立的项目中重现了这个问题。[这是它的链接。](https://script.google.com/d/1O_BdUBh6JEqG65ZzZ3Ub_qoqSJ-aXoAWoQOpGxOhHahflJGKZSnORVfe/edit)

我想将字符串变量转换为日期对象以进行一些日期数学运算，因此必须使用 .toLocaleDateString() 方法转换回字符串并没有帮助。

我已经检查了一致性，认为也许我可以通过测试其他日期来解决它。奇怪的是，如果我将 sDate 的值更改为 01/01/2012 和 04/03/2012 之间的任何值，它会准确返回。从 2012 年 5 月 3 日起，每天下降。对于 2013 年的日期，它会正确返回，直到 29/04/2013 再次开始下降一天。所以并不一致。这似乎与[此处](https://stackoverflow.com/questions/10756376/odd-issue-of-date-changing-in-script-output)报告的问题相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T06:34:35.397

我发现 getValues() 函数在旧 DST 规则和新 DST 规则之间的范围内读取的日期减少了 1 小时。因此，日期“2012 年 10 月 30 日”的隐式时间是 00:00:00。但是，当读入时，它减少了一个小时，在前一天登陆，即 2012 年 10 月 29 日 23:00:00。

这两个时间范围之间的任何日期，不包括开始日，但包括结束日，目前都会表现出这种行为，至少由 getValues() 函数读取：

*   在十月的最后一个星期日和十一月的第一个星期日之间
*   在三月的第二个星期天和四月的第一个星期日之间。

我最终编写了可以动态计算当前年份的这些日期的代码，如果日期落在目标范围内，我只需将其增加一个小时。这可能是修复它的漫长道路，但它确实有效。

这是我的代码：

```
/*
The old rules for DST stated that the time change occurred on the last Sunday in October, 
which would be 10/28/2012\.  So, when you type in 10/29/2012, the timestamp associated with the date (00:00:00) is being decremented by an hour (23:00:00), 
which drops it into the previous day.  The new rules for DST states that DST ends on the 1st Sunday in November, which is 11/04/2012\.  Also, the DST rules
for springtime are also an impacted range of dates that exhibit this behavior, between the second sunday in March and the first sunday in April.

Note:  Running this function from the script editor does not produce the strange DST behavior.  It seems to be an issue with the getValues() function on a Range object.
*/
function fixDateDSTProblem(lstrDate){
  var d = new Date(lstrDate);
  //Example ranges affected
  //10/29/2012 - 11/04/2012
  //03/11/2013 - 04/07/2013

  if(isNaN(d.getMonth())){
    //return what was passed in if it's not a date or null.
    return lstrDate;
  }
  else if(isAffectedDate(d)){
    //increment by one hour
    return new Date(d.getTime() + (60 * 60 * 1000));
  }
  else{
    //date is not affected, simply return it as it was passed.
    return lstrDate;
  }
}

//Check to see if a date is within a beginning and end date
function dateWithin(beginDate,endDate,checkDate) {
    var b,e,c;
    b = Date.parse(beginDate);
    e = Date.parse(endDate);
    c = Date.parse(checkDate);
  //slightly modified this for the date checking since beginning date is not inclusive, so needs to be > instead of >=
    if((c <= e && c > b)) {
            return true;
    }
    return false;
}

function isAffectedDate(targetDate){
  var yearNum = targetDate.getFullYear();

  //Get the last Sunday in October
  var lastSunOctDateStr = getLastOccurrenceDate(0, 10, yearNum);

  //Get the first Sunday in November
  var firstSunNovDateStr = getOccurrenceDate(1, 0, 11, yearNum);

  //Get the second Sunday in March
  var secondSunMarDateStr = getOccurrenceDate(2, 0, 3, yearNum);

  //Get the first Sunday in April
  var firstSunAprDateStr = getOccurrenceDate(1, 0, 4, yearNum);  

  //if the date is between the last sunday in october and the first sunday in november
  // or if the date is between the second sunday in march and the first sunday and april, fix it up!
  if(dateWithin(lastSunOctDateStr, firstSunNovDateStr, targetDate) || 
     dateWithin(secondSunMarDateStr, firstSunAprDateStr, targetDate)){
    return true;
  }
  return false;
}

function getOccurrenceDate(numOccurrence, dayIndex, monthCalendar, yearNum){
  //"Get date of first occurrence of Monday in June 2013"
  //"Get date of the second occurrence of Sunday in April 2013"
  //dayIndex:  Sunday = 0, Saturday = 6
  var monthIndex = monthCalendar - 1;
  var numFirstXDay = null;
  var firstDay = new Date(monthCalendar+"/01/"+yearNum);
  var numDayOfWeek = firstDay.getDay();
  if(numDayOfWeek == dayIndex){
    numFirstXDay = 1;
  }
  else if(numDayOfWeek > dayIndex){  
    numFirstXDay = 1+(6-numDayOfWeek)+1+dayIndex+(7*(numOccurrence-1));
  }
  else if(numDayOfWeek < dayIndex){
    numFirstXDay = 1+(dayIndex - numDayOfWeek)+(7*(numOccurrence-1));
  }

  return monthCalendar+"/"+numFirstXDay+"/"+yearNum; 
}

function getLastOccurrenceDate(dayIndex, monthCalendar, yearNum){
  //Example:  "Get date of last occurrence of Monday in June 2013"
  var monthIndex = monthCalendar - 1;
  var numLastXDay = null;
  //TODO:  Handle Leap Year!
  var monthMaxDaysArray = {
    '1':'31',
    '2':'28',
    '3':'31',
    '4':'30',
    '5':'31',
    '6':'30',
    '7':'31',
    '8':'31',
    '9':'30',
    '10':'31',
    '11':'30',
    '12':'31'}    

  var lastDay = new Date(monthCalendar + "/"+monthMaxDaysArray[monthCalendar]+"/" + yearNum);
  var numDayOfWeek = lastDay.getDay();
  if(numDayOfWeek == dayIndex){ 
    numLastXDay = 31;
  }
  else if(numDayOfWeek > dayIndex){    
   numLastXDay = monthMaxDaysArray[monthCalendar] - (numDayOfWeek - dayIndex); 
  }
  else if(numDayOfWeek < dayIndex){
    numLastXDay = (monthMaxDaysArray[monthCalendar] - numDayOfWeek) - (6 - (dayIndex-1));
  }

  return monthCalendar + "/" + numLastXDay + "/" + yearNum;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:36:56.627

记录器始终在 PDT 中记录日期。这是同一个时间实例，只是以不同的方式表示。您会看到 + 夏令时的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:49:45.703

即使科里的回答不需要任何确认（他知道他在说什么；）让我添加一些实用的细节......

*   即使您看到的记录器值看起来错误，您对日期对象 ( `getDay`, `getTime`, `getFulYear`...) 所做的每个 javascript 操作都将返回正确的值，因此如果您需要操作日期，则无需转换为字符串并返回数字
*   如果这些日期显示在电子表格中，则电子表格区域设置将用于显示所需的值。
*   有时您会在记录器中看到其他格式的值...不要问何时或为什么，但有时会发生在我身上（我在 GMT+1 比利时）
*   您在 10 月和 4 月注意到的日期变化确实发生在夏令时开始和停止时，当您需要在一个时期的日历事件中定义一个日期时，这可能会变得很棘手（例如，今天我在 12 月在那里创建了一个事件将相差 1 小时），因此当您在用户界面中读取日期对象时需要使用正确的 GMT+0X00 值`utilities.formatDate`
*   如果由于某种原因您显示了从夏令时切换日之前开始到之后结束的日期列表，并且您使用`utilities.formatDate`，最好使用一个变量来动态地使用“GMT+0X00”：我只需使用类似这样的东西就可以得到它：

*** EDIT***因为几个星期以来语法发生了变化，这个字符串的格式必须不同，所以我相应地更新了这个代码。（[见问题 2204](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2204)）

```
`var FUS1=new Date().toString().substr(25,6)+":00";// FUS1 gets the GMT+02:00 or GMT+01:00 string` 
```

希望它变得足够清楚

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T22:13:28.663

很抱歉迟到了几个月才入党……

这些答案的问题在于，他们都没有明确表明这是一个**BUG**。或者，更准确地说，这是谷歌认定的“正确”行为（例如，参见 Issue [1271](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1271)，没有采取任何行动就关闭了），而这显然是完全错误的做法。

考虑一下。我想将某人的生日放在电子表格中，并且我有一个很大的列表。然后我想读出该值并将其放入一个表格中：

```
function getAge(ss, index) {
  var ages = ss.getRangeByName("birthDates").getValues();
  return ages[index];
}
...
app.createLabel(getAge(ss, index)); 
```

该表格现在包含*错误*的出生日期为 4 月至 10 月之间出生的每个人。谷歌已经决定他们实际上是在一天前出生的。或者尝试读出年龄，并将它们放入另一个电子表格中，无需处理，两个电子表格具有相同的时区设置。同样的故事，当人们发邮件告诉我我弄错了他们的生日时，这让我看起来非常愚蠢。

应该这样做：如果有人手动指定一个日期，例如“06/06/1997”，然后用 读取该日期`getValue`，他们希望得到“06/06/1997”，而不是前一天。他们真的不希望您尝试第二次猜测他们：“好吧，这个日期恰好是在 DST 期间，所以他们*真正*希望读回的`getValue`是更正到非 DST 的内容，所以我们为什么不减去一个一个小时，并在前一天给他们？”

这很疯狂。如果 Excel 这样做，那将是一个笑柄。请修复它。

**编辑**

Serge，这很有趣，但是您的电子表格显示了一种解决方法，它提取 TZ，然后根据该 TZ 显示。但这只是避免了开始时这是错误的问题。考虑一下。电子表格几乎总是包含*固定*日期的周年纪念日——某人的生日、战斗的日期、约会的时间/日期等等。这些**独立于 TZ**. 如果您在比利时的生日是 1960 年 7 月 6 日，那么如果您碰巧住在加利福尼亚，那也是 7 月 6 日。如果您出生于上午 00:30，您的护照仍显示为 7 月 6 日，即使在 CET 和 PDT 中该时间实际上是 7 月 5 日。对于周年纪念日或约会，没有人在乎时区。在电子表格中，只有一小部分用户关心 TZ。我无法立即想到一个真正重要的用例。

Lotus 1-2-3 做对了。Excel 做对了。日期是一个整数序列号，**没有**时区信息。将日期从一个电子表格复制到另一个电子表格，它总是正确的。使用 VB/whatever 从电子表格中获取日期，将其放入另一个电子表格中，它总是正确的（我认为）。尽管我不想这么说，Excel 定义了电子表格，而且他们做得很好。除了VB。

在 GAS 中，如果我使用 复制日期`getValues`，这是*错误*的。谷歌对此过于聪明了。好的，有一个复杂的解决方法涉及查找创建电子表格的 TZ，假设您输入的日期实际上是相对于 UTC 的纪元日期，并根据电子表格的当前 TZ 设置显示它（至少，我认为这就是你正在做的）。但那又怎样？而且，它总是有效吗？如果您将电子表格邮寄给住在 PDT 的人怎么办？我相信你可以让它工作，但这没有抓住重点——这只是一种变通方法，我认为它可能很脆弱（请注意，有**3 个**TZ 设置：Google 帐户设置、工作表设置和脚本设置，你必须考虑所有这些 - 见 ahab'）。根本问题是 Google 电子表格存储相对于特定 TZ 的日期（底层格式 ms 是相对于 Unix 纪元吗？？）。这是错误的，现在无法修复，并且只是与日期处理有关的一大堆蠕虫的一部分。

作为一个短期修复，我可能会在电子表格中的所有日期上添加 12 小时。作为一个长期解决方案，我可能应该将所有日期作为文本字符串处理，并自己在 JavaScript 中完成。我已经不得不用“整数”毫秒数替换所有经过的时间，以处理与 GAS 日期中丢失的毫秒数有关的问题。继续，说服我我错了。

**由 Serge 编辑：** 您好，为了便于阅读，我冒昧地在您的编辑中回答（对此感到抱歉）。

我理解你的观点，但我不同意。

您引用的 UI 示例确实需要一种解决方法，因为这是纯 javascript，而不是电子表格日期......也就是说，Excel 电子表格和 Google 电子表格的工作方式相同（第二天是 day+1，时间 = 小数，参考日期 0 = 1899 年 12 月 31 日））只要您留在电子表格世界中，当您退出电子表格并转到 Javascript 时，问题就来了（参考日期 = 01/01/1970，以毫秒为单位）...

如果他们选择不关心 TZ 并在任何时区保持日期“静态”，那将会有很多其他问题：例如，如果你想在比利时的我和华盛顿的奥巴马总统之间在 Skype 上安排约会怎么办？ ? 如果我们决定在星期一早上 8 点进行谈话，是在比利时还是在华盛顿早上 8 点？

使用谷歌解决方案，他只需要早起一点，但我们都会在那里，因为日期和时间会显示相同的“时刻”，按照你建议的方式，我们不会有任何交谈的机会（那将是多么可悲^^）。

还有很多情况显然是更好的选择：与日历服务通信也是一个很好的例子。

静态 excel 解决方案效果很好，因为这样的文档没有以相同的方式共享，并且不会将日期转换为 Javascript 日期对象。Excel SS 与计算机用户相关，Google SS 使用时区设置保持与用户计算机的这种关系，因为它（本质上）与用户计算机无关。我几乎没有希望说服你 (;-) 但我希望这至少能让事情变得更清楚......（无论如何我不是谷歌工程师，也无法以任何方式影响他们^^）。

**再编辑...**

这是[一个小测试表，其 TZ 设置设置为 GMT-8](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dHdVUHlmSmk2aVk0anZJZnRyRXVjWlE)，它获取[另一个测试表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dENrc2h1M0ktQTlSNWpNUi1TS0lrNlE)的值 （设置为 GMT+2 比利时冬季时间），并使用这个简单的脚本以正确的方式显示它：

```
function timeCorrection() {
  var thisSheet = SpreadsheetApp.getActiveSheet();
  var otherSS = SpreadsheetApp.openById('0AnqSFd3iikE3dENrc2h1M0ktQTlSNWpNUi1TS0lrNlE');
  var otherSheet = otherSS.getSheetByName('Sheet1');
  var otherValue = otherSheet.getRange(1,1).getValue();
  var tz = otherSS.getSpreadsheetTimeZone();
  var thisSheetValue = new Date(Utilities.formatDate(otherValue,tz,'MM/dd/yyyy HH:mm:ss'));
  thisSheet.getRange(1,1).setValue(thisSheetValue);
} 
```

就这么简单 ;-) ，“外国工作表”的设置被设置为与其脚本设置相同的值，这是在温哥华创建的新创建工作表的默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-15T19:36:19.900

这不是错误...

我可以为程序化程度较低的问题提供另一种解决方案吗？我隔离了这个问题并花了一天时间试图弄清楚为什么**我的脚本**会在前一天和下午 23:00 提取日期。

然后，我意识到电子表格不是逗号分隔的数据库，而是具有自动格式化功能。**因此，当我在电子表格中选择包含日期的列并从菜单中选择格式>数字>纯文本时，问题就解决了。**现在我的脚本运行完美，没有太多的方法。将此应用于整个列甚至会影响新添加的单元格。所以这是一个甜蜜的解决方案。

因为这是stackoverflow，**所以这里是java解决方案**（我检查它是否有效）：

```
sheet.getRange(1,n).setNumberFormat('@STRING@'); 
```

我从 christian.simms 中获取，来自这里： [Format a Google Sheets cell in plaintext via Apps Script](https://stackoverflow.com/questions/13758913/format-a-cell-in-plaintext-via-javascript-spreadsheet-google)

# android - AndEngine 导入后报错

> ID：12748364
> 
> 赞同：0
> 
> 时间：2012-10-05T14:23:53.180
> 
> 标签：android, import, andengine

我已将 AndEngine 导入 Eclipse，但我总是遇到这些错误。我试图清理它，修复项目属性，打开“自动构建”但没有任何帮助。（相同的错误标记分布在 src 文件夹中的许多包上）。我做错了什么，我该如何解决？

![导入AndEngine后出现多个错误](../Images/b916fbccff686a43618377c8f297615e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:09:22.110

解决了。AndEngine 使用 Java Compiler **1.6**而不是**1.5**

# request - 如何从服务器请求中过滤掉机器人

> ID：12748366
> 
> 赞同：1
> 
> 时间：2012-10-05T14:23:58.083
> 
> 标签：request, user-agent, bots

我正在跟踪对我的服务器的所有请求，并希望从我的统计数据中过滤掉机器人/爬虫，因为它们会弄乱我正在寻找的内容：查看人类访问我网页的真实流量。

我开始使用各种列表创建 HTTP_USER_AGENT 黑名单，但新的机器人/爬虫不断出现——通常是在短时间内大量爆发。我找不到任何识别它们的好方法。

相反的解决方案是创建一个有效 HTTP_USER_AGENT 字符串的白名单，这也会有一些主要缺点。

关于这个问题有什么想法吗？

# c# - 使用包含对自身的引用的 OData 对象创建表时出现 SQLite 异常

> ID：12748380
> 
> 赞同：3
> 
> 时间：2012-10-05T14:24:43.903
> 
> 标签：c#, sqlite, sharepoint-2010, windows-8, windows-runtime

以下代码：

```
oc.CreateTablesAsync(typeof(ODataService.UserInformationListItem), typeof(ODataService.CategoriesItem), typeof(ODataService.PostsItem)); 
```

给了我这个例外：

```
System.NotSupportedException: Don't know about ODataApp.ODataService.UserInformationListItem 
```

起初我只是为 PostsItems 创建一个表，这是我需要存储的对象，但后来我得到了上述异常，然后是 ODataApp.ODataService.CategoriesItem。

由于 PostItem 具有属性 Category，它是 List<CategoriesItem> 我想我还必须将 CategoriesItem 添加为表格。

这样做之后，我得到了 PostsItems 上的 CreatedBy 属性的错误，它是一个 UserInformationListItem，现在这是它变得棘手的时候。

我还将 UserInformationListItem 添加到 CreateTables 函数中，这给了我当前的问题。

对象 UserInformationListItem 还包含一个 CreatedBy 属性，它也是一个 UserInformationListItem。

我正在寻找解决此问题的方法，而无需更改或重新创建这些对象的本地版本。

这些对象是在我无法编辑的 Sharepoint 上定义的，并且是通过 OData 服务引用获得的。如果需要更多信息来为我提供答案，请告诉我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T19:22:46.257

根据您的示例代码，我认为您正在使用[sqlite-net](http://nuget.org/packages/sqlite-net)。

Sqlite-net 不是真正的 ORM - 它仅支持基本数据类型，不能将您的自定义类型作为属性处理。您可以在类 ( )的`SqlType()`静态方法中自行检查。`Orm``SQLite.cs`

导致问题的不是自引用，而是类之间的任何引用。为以下两个类创建表也会失败`NotSupportedException`：

```
public class CategoryItem
{
    public int Id { get; set; }
    public string Title { get; set; }
}

public class PostItem
{
    public int Id { get; set; }
    public string Label { get; set; }
    public List<CategoryItem> Categories { get; set; }
} 
```

您需要创建自己的“数据库”类，它们将一对一地映射到数据库表。要处理`UserInformationListItem`，您只需将其键值作为属性添加到`PostItem`. 如果`PostItem`并且`CategoryItem`具有多对多关系，则还需要添加交叉引用表。

# mysql - 不可能的 MySQL 查询

> ID：12748384
> 
> 赞同：2
> 
> 时间：2012-10-05T14:24:51.813
> 
> 标签：mysql, left-join

我的数据库中有这些表：

“用户”

```
id  email                      name             last_access
1   user1@gmail.com     Name1 Surname1      2012-10-05 13:58:19.0
2   user2@gmail.com     Name2 Surname2      2012-10-05 13:56:59.0
3   user3@gmail.com     Name3 Surname3      2012-10-05 13:57:57.0 
```

“NETS_PERMISSIONS”

```
user_id     network_id     perm
1           1234           3
2           1235           3 
```

现在，我有这个查询：

```
SELECT DISTINCT user.id, user.name, nets.network_id, nets.perm
FROM users as user LEFT OUTER JOIN nets_permissions AS nets
ON user.id = nets.user_id AND nets.perm <> 3 WHERE user.id!=1 AND nets.network_id=1234 
```

结果查询是空的，但我想要的是 - 从“nets_permissions”表中，省略了 perm=3 和 user_id 和 network_id 的行，就像查询中指定的一样（在这种情况下，例如 user_id=1 和 network_id=1234 )：在这种情况下，查询的左侧部分为空。- 我想从“用户”表中获取每一行，但如果它不在“nets_permissions”表中，则这些行有 network_id 和 perm 。

所以，从这两个表中，在这个例子中，我会得到这个结果：

```
id    name             network_id    perm
2     Irene Pippo      <null>        <null>
3     Luca Niccolini   <null>        <null> 
```

非常感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:31:40.280

这应该给你你想要的——只有没有 perm 3 和 nework_id 1234 的用户

```
SELECT u.id, u.name, n.network_id, n.perm
  FROM users as u 
  LEFT JOIN nets_permissions as n
    ON u.id = n.user_id AND n.perm = 3 AND n.network_id=1234 
 WHERE n.network_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:35:26.083

我会这样写（应该可以）：

```
SELECT DISTINCT u.id, u.name, n.network_id, n.perm
FROM users as u 
LEFT OUTER JOIN nets_permissions as n ON u.id = n.user_id 
WHERE (n.perm is NULL || n.perm <> 3) AND u.id <> 1 AND n.network_id = 1234 
```

# sharepoint - 团队基础服务器共享点网站访问权限

> ID：12748389
> 
> 赞同：4
> 
> 时间：2012-10-05T14:25:14.077
> 
> 标签：sharepoint, tfs, project, sharepointfoundation2010

请帮忙。我是新手，在 TFS 和 Sharepoint 组合中遇到了麻烦。来自旧学校，您在 IIS 中右键单击并设置网站权限，现在我在 IIS 7 中找不到共享点站点来实际授予自己权限。在 IE 中打开 localhost/sites/ 项目时，出现错误：拒绝访问。这是我在 Visual Studio 2010 中将项目添加到我的 TFS ProjectCollection 时由 TFS 设置的共享点站点。如何访问该网站？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T03:33:51.277

不允许直接从 IIS 授予 SP 站点。

如果您是或您认识 SP 网站集管理员，请要求他们授予您对您请求的 SP 网站的适当访问权限。否则，如果没有网站集管理员，则向 SP 场管理员提升级别，请请求场管理员授予您尝试访问的 SP 网站集的网站集管理员权限。团队项目网站位于网站集下。

从那里，您可以使用“站点操作”>“站点权限”授予其他用户访问相应 SP 资源的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:56:07.490

网站集管理员应授予您在 SharePoint 中的权限。

网站集管理员应导航到 localhost/sites/{tfscollection}/{tfsproject}，单击站点设置，然后单击人员和组链接。

从那里，您需要被添加到站点并获得适当的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T23:14:54.753

有一个非常好的实用程序可以轻松地同时查看/编辑 TFS、SharePoint 和 Report Server 的权限。

[http://tfsadmin.codeplex.com/](http://tfsadmin.codeplex.com/)

# jquery-ui - 在 angularjs 的自定义指令的 $watch 中不评估表达式

> ID：12748392
> 
> 赞同：1
> 
> 时间：2012-10-05T14:25:20.940
> 
> 标签：jquery-ui, angularjs

我在 angularjs 中有一个下面的自定义指令，它使用从服务器更新的模型，我添加了一个监视侦听器来监视该模型的变化，

```
var linkFn;
linkFn = function(scope, element, attrs) {
        scope.$watch('$parent.photogallery', function(newValue, oldValue) {
            if(angular.isUndefined(newValue)) {
            return;
        }
        var $container = element;
        alert($container.element);
        $container.imagesLoaded(function() {
            $container.masonry({
            itemSelector : '.box'
                });
            });
        });
    };
    return {
        templateUrl:'templates/Photos_Masonry.htm',
        replace: false,
        transclude:true,
        scope: {
            photogallery: '=photoGallery',
        },
        restrict: 'A',
        link: linkFn 
```

但是，当我在 watch 指令中进行调试时，我仍然看到模板中的表达式仍未解决。即 photo.label、ng-src 仍然未解决。AFIK，$digest 只会在 $eval 之后被调用。这是预期的行为吗？由于这个原因，我的 jQuery 调用不起作用？是否有任何其他事件可以让我获得带有评估表达式的结果元素？

这是我的模板，里面有 ng-repeat，

```
<div id="container" class="clearfix">
    <div class="box  col2" ng-repeat="photo in photogallery">
        <a ng-href="#/viewphotos?id={{photo.uniqueid}}&&galleryid={{galleryid}}"
            title="{{photo.label}}"><img
            ng-src="{{photo.thumbnail_url}}"  alt="Stanley" class="fade_spot" /></a>
        <h3>
            <span style="border-bottom: 1px solid black;font-weight:normal;font-size:14px;">{{galleryname}}</span>
        </h3>
        <h3>
            <span style="color:#20ACB8;font-weight:normal;font-size:17px;">{{photo.seasonname}}</span>
        </h3>
    </div>
</div> 
```

相册在父控制器中初始化，

```
function MyCtrlCampaign($scope, srvgallery, mygallery) {

    $scope.updatedata = function() {
        $scope.photogallery     = srvgallery.getphotos($routeParams);
    };

    $scope.getphotos = function() {
        srvgallery.photos().success(function(data) {
            $scope.updatedata();
        }).error(function(data) {

        });
    }; 
```

指令以下列方式使用，

```
<div masonry photo-gallery="photogallery" >
            </div> 
```

请让我知道您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:45:45.800

看起来这已在您的[Github 问题](https://github.com/angular/angular.js/issues/1441)中得到解决（为方便他人而发布）。

# java - Java HashMap 实现哈希码问题

> ID：12748393
> 
> 赞同：1
> 
> 时间：2012-10-05T14:25:23.553
> 
> 标签：java, hashmap

在这里查看 Java HashMap 的实现：http: [//www.docjar.com/html/api/java/util/HashMap.java.html](http://www.docjar.com/html/api/java/util/HashMap.java.html)我注意到以下内容：

使用的内部数据结构是一个数组，它在每个索引处存储对链表中第一个条目的引用。数组索引基于键的哈希码，而链表表示该特定哈希码的存储桶。我发现有趣的是 indexFor(int h, int length) 方法，对于给定的键，该方法确定要查看数组中的哪个桶。但是从某种意义上说，return h & (length - 1) 的实现看起来很奇怪对于与给定数组索引不一致的不确定数量的哈希码，该方法将返回 0。因此，无论您为对象实现什么唯一哈希码，数组中的 0 存储桶很可能会充满对象，因此您不要从应该为您提供的唯一哈希码中受益，即更快的数据访问。

我错过了什么吗？

克里斯蒂安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:30:04.290

您在 HashMap 源代码中缺少以下 Javadoc：

```
/**
 * The table, resized as necessary. Length MUST Always be a power of two.
 */
transient Entry<K,V>[] table; 
```

这意味着`table.length-1`它将始终是一个 1 的序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:29:55.490

我不太明白你认为问题是什么。

这是计算哪里是二的幂的`h & (length - 1)`一种简单方法。在我的理解中，没有任何理由应该给出不自然的大量零。`h % n``n``h % n`

# asp.net-mvc - ASP.Net MVC 3 应用程序中的单个成员提供程序在 2 个 Web 应用程序之间共享

> ID：12748395
> 
> 赞同：0
> 
> 时间：2012-10-05T14:25:28.287
> 
> 标签：asp.net-mvc, sharing, aspnetdb

我们有 2 个不同的 mvc Web 应用程序在单个成员提供程序上运行。我已将这 2 个应用程序放在网络服务器上并具有虚拟路径： [http://aa.svr1/app1](http://aa.svr1/app1) http://aa.svr1/app2

如果用户在单独的浏览器中打开 app1 和 app2，它会注销另一个应用程序。当用户一次使用一个应用程序时，没有问题，同时使用，它会在其中一个应用程序中注销。

我已将机器密钥放在 app1 应用程序的 web.config 文件中，并且工作正常。我已经在实时服务器上发布了新的 tfs，现在又回到了当 app1、app2 同时浏览并注销其中一个应用程序时的相同情况。

什么可能导致这种阻塞会话/行为异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:41:32.030

您可以尝试显式指定身份验证 cookie 的路径参数：

```
<forms loginUrl="~/Account/LogOn" timeout="2880" path="app1" /> 
```

或者干脆使用 2 个不同的 cookie 名称：

```
<forms name="app1auth" loginUrl="~/Account/LogOn" timeout="2880" /> 
```

# android - Android 的动态可绘制行为按钮

> ID：12748396
> 
> 赞同：0
> 
> 时间：2012-10-05T14:25:37.370
> 
> 标签：android, xml, button, dynamic

我需要能够为我的项目中的按钮提供动态行为。到目前为止，我得到的最接近的是使用这样的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true" android:drawable="@drawable/mainmenu_button_pressed" /> 
<item android:state_enabled="false" android:drawable="@drawable/mainmenu_button_disabled" />  
<item android:drawable="@drawable/mainmenu_button" /> 

</selector> 
```

这正是诀窍，但正如问题主题所述，我的项目需要它是动态的，我将解释我的意思......

这个应用程序有一个介绍菜单，几个选项上有不同的图像。根据运行时用户做出的选择（在此菜单之前），我需要能够为按钮提供一组不同的图像。理想的方法是：

```
<item android:state_pressed="true" android:drawable="%MAINMENU_BUTTON_PRESSED%" /> 
```

所以我可以设置 %MAINMENU_BUTTON_PRESSED 并且它会使用集合 A (A_mainpressed.png) 或 B (B_mainpressed.png) 而不需要额外的编码。

我知道执行此操作的可能正确方法是使用 OnClick 函数并以编程方式执行所有操作。然而，考虑到对我的项目意味着大量的手动工作，我想首先确保确实没有办法创建动态 XML 并将其提供给按钮，因此它可以像那样工作（AFAIK 所有资源都已编译和因此不能在运行时修改，资产文件夹上的 XML 文件也不起作用，因为这些文件没有被编译，因此不会生成我可以提供的 ID）。

有什么方法可以实现这种行为，还是我应该吞下它并坚持使用 OnClick 方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:01:58.617

没关系，在另一篇文章中找到了答案[...](https://stackoverflow.com/questions/4697528/replace-selector-images-programmatically) ** 关键字是“选择器”。我几乎没有任何关于 Android 的经验，所以我不完全知道如何寻找这个（一个朋友实际上暗示了选择器，所以我发现了）。无论如何，感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:35:54.020

我有同样的问题，通过为每个可绘制状态定义级别列表来解决，例如，您的 mainmenu_button_pressed.xml 可绘制将是

```
<level-list
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/A_mainpressed.png"
        android:maxLevel="0"
        android:minLevel="0" />
<item
        android:drawable="@drawable/B_mainpressed.png"
        android:maxLevel="1"
        android:minLevel="1" />
<item
        android:drawable="@drawable/C_mainpressed.png"
        android:maxLevel="2"
        android:minLevel="2" />
</level-list> 
```

像这样为您的状态可绘制创建三个文件，在您的代码中只需根据您的配置调用方法 setImageLevel 。这对于显示（用户/根）图像按钮效果很好。

# oop - Matlab - 句柄

> ID：12748401
> 
> 赞同：1
> 
> 时间：2012-10-05T14:25:45.353
> 
> 标签：oop, class, matlab, handle

在编程中`Matlab`，如果我通过如下语句：

`classdef xyz < handle`

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:32:11.433

此行使您的类从`xyz`该类*继承*`handle`。该类`handle`允许您的对象通过引用传递给其他函数。这意味着如果您有一个内部`foo(x)`修改的函数`x`，您`x`将在函数返回后在调用者中进行修改。可以在[此处](http://www.mathworks.com/help/matlab/ref/handle.html)找到有关此主题的好文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:32:44.337

请阅读[手册](http://www.mathworks.com/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)：

> 句柄类构造函数返回一个句柄对象，该对象是对所创建对象的引用。您可以将句柄对象分配给多个变量或将其传递给函数，而不会导致 MATLAB 复制原始对象。修改作为输入参数传递的句柄对象的函数不需要返回该对象。

# c# - 数据重复器中的文本框不可见在滚动期间不保持其视图

> ID：12748402
> 
> 赞同：0
> 
> 时间：2012-10-05T14:25:45.057
> 
> 标签：c#, data-binding, datarepeater

我已经创建了一个表单，`DataRepeater`并且我有一个反序列化为类的 XML 文件。然后我创建了一个`dataset`代表班级。我将 绑定`dataset`到我的`DataRepeater`. 我还创建了一些标签和文本框，并将它们绑定到我的数据集中的适当数据。

以下是代码：

```
 TagLabel.DataBindings.Add("Text", ds, "Tag");
 PrecedenceLabel.DataBindings.Add("Text", ds, "Precedence"); 
 DataTypeLabel.DataBindings.Add("Text", ds, "DataType");           
 LengthLabel.DataBindings.Add("Text", ds, "Length");           
 ValueTextBox.DataBindings.Add("Text", ds, "Value");           
 MaxTextBox.DataBindings.Add("Text", ds, "Maximum");           
 MinTextBox.DataBindings.Add("Text", ds, "Minimum");           
 OverflowTextBox.DataBindings.Add("Text", ds,"OverflowBehaviour");

 bindingsource.DataSource = ds;
 dataRepeater.DataSource = bindingsource;
 dataRepeater.DataMember = "Preference"; 
```

`ValueTextbox`在此之后，如果它`DataTypeLebel`是，我想隐藏它`"Autoinrement"`。以下是代码：

```
for (int i = 0; i < dataRepeater.ItemCount; i++)            
{          
dataRepeater.CurrentItemIndex = i;

 if (((Label)dataRepeater.CurrentItem.Controls["DataTypeLabel"]).Text == "AutoIncrement")                
 {                    
 ((TextBox)dataRepeater.CurrentItem.Controls["ValueTextBox"]).Visible = false;           
 }    
 } 
```

完成此操作并运行项目后，在这种情况下，根据我的 XML 文件，我希望只有数据中继器第 5 行`ValueTextBox`隐藏。但是，当我滚动表格时。我可以看到其他一些行显示 invisible `VallueTextBox`。当我上下滚动并且隐藏的文本框无处不在时，情况更糟。谁能建议我做错了什么？

我还尝试了虚拟模式并根据事件处理程序中的条件更新控件并使文本框不可见，`dataeRepeater_itemValueNeeded`并且发生了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:25:09.927

如果在 If...Then 等条件语句中设置属性，则还必须使用 Else 子句指定不满足条件时的外观。试试这个：

```
if (((Label)dataRepeater.CurrentItem.Controls["DataTypeLabel"]).Text    == "AutoIncrement")                  
{                      

 ((TextBox)dataRepeater.CurrentItem.Controls["ValueTextBox"]).Visible = false;             

}      

else
{
 ((TextBox)dataRepeater.CurrentItem.Controls["ValueTextBox"]).Visible = true;         
} 
```

# c# - 触发 SelectionChanged 事件的访问控制

> ID：12748404
> 
> 赞同：0
> 
> 时间：2012-10-05T14:25:46.867
> 
> 标签：c#, wpf

如果我在 DataGridTemplateColumn 中定义一个组合框，如下所示，那么添加的每个新行都会有多个组合框

```
<DataGridTemplateColumn x:Name="DataGridTempCol" Header="Items">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox x:Name="combo" DisplayMemberPath="Value" SelectedValuePath="Key"   ItemsSource="{Binding comboBoxSelections, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}" SelectionChanged="combo_SelectionChanged" >
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我现在想为每个 Combox 添加 SelectionChanged 事件。我试过以下

```
private void combo_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    // Every SelectedItem is one data object in Dictionary collection.
    KeyValuePair<string, string> selob =
        (KeyValuePair<string, string>)combo.SelectedItem;
    string selKey = selob.Key;
    string selvalue = selob.Value; 
} 
```

但`combo`无法识别，因为它不是 ComboBox 的单个实例。如何引用生成事件的 ComboBox 并访问 SelectedItem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:33:49.070

您是否尝试过以下操作？我的第一个猜测是，这应该给你 ComboBox 或整个 DataGrid。

```
e.OriginalSource 
```

# documentation - 在哪里可以找到 Play 2.0.4 的更新日志

> ID：12748407
> 
> 赞同：1
> 
> 时间：2012-10-05T14:25:57.693
> 
> 标签：documentation, playframework, playframework-2.0

我在哪里可以找到 Play 2.0.4 的更新日志，以及其他任何 Play 框架版本的更新日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:08:34.007

新 Play 发布的所有公告始终首先在[Google Group](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/e16pHojeSvs)中提供。通常，它们包含更改摘要。

> ## 强调：
> 
> *   引入 ExternalAssets 控制器（在需要处理大量资产时在开发模式下很有用）
> *   将资产控制器中的日期处理切换到 Joda Time
> *   将资产控制器中的时区从 UTC 切换到 GMT
> *   使资产控制器中的日期解析更具弹性
> *   现在可以在 prod 模式下正确调用 Global.onStop

您还可以查看[LightHouse 的 2.0.4 里程碑票以](https://play.lighthouseapp.com/projects/82401/milestones/155624-204)获取更多详细信息。

提示：要查找特定版本的门票，请单击`Milestones`顶部导航上的按钮（但不是向下箭头），它将允许您切换到列表`Completed Milestones`

# internet-explorer - 在 InternetExplorer 9 中关闭“Ext.window.Window”的困难

> ID：12748409
> 
> 赞同：0
> 
> 时间：2012-10-05T14:26:02.623
> 
> 标签：internet-explorer, extjs, internet-explorer-9

我有一个用 ExtJs 4 创建的自定义窗口，我发现使用 Internet Explorer 9 关闭它有些困难。我尝试使用窗口右上角的 x 按钮关闭窗口，但大多数时候它不起作用. 它在 chrome 和 firefox 中运行良好。这是代码：

```
Ext.define('Mainstay.view.import.Window', {
   extend: 'Ext.window.Window',
   alias : 'widget.importWindow',
   title: 'Import Records',
   layout:'fit',
   height: 590,
   width: 900,
   modal: true,
   autoload: true,

   initComponent: function(){
       this.callParent(arguments);
   }
}); 
```

# jenkins - 为什么詹金斯“扩展电子邮件”不包括扩展信息？

> ID：12748411
> 
> 赞同：13
> 
> 时间：2012-10-05T14:26:04.810
> 
> 标签：jenkins, jenkins-plugins, email-ext

我们将[email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin) 2.24.1 安装到 Jenkins 1.447 中。我们将“扩展电子邮件通知”“默认内容”设置为

> $PROJECT_NAME - 构建 # $BUILD_NUMBER - $BUILD_STATUS：
> 
> 检查 $BUILD_URL 处的控制台输出以查看结果。
> 
> 失败的测试（与以前的版本相比的回归）：${FAILED_TESTS, onlyRegressions=true}
> 
> 更改：${CHANGES, showPaths=true, format="%a: %r %p \n--\"%m\", pathFormat="\n\t- %p"}

我们去了一个项目，选择“可编辑电子邮件通知”并保留默认设置，其中“默认主题”表示 $DEFAULT_SUBJECT，“默认内容”表示 $DEFAULT_CONTENT。

在发出的电子邮件中，就好像 email-ext 不存在一样。我只看到构建信息，没有关于失败的测试或自上次成功以来的更改。

为什么电子邮件不显示失败的测试和更改？我该如何调试呢？是否有日志显示正在运行的内容？

**编辑**：我在项目“默认内容”中添加了“HALLOO”。没有出现。

全局配置的电子邮件部分的屏幕截图： ![全局配置](../Images/48eaac9a1a958cd848f68f764c0251e6.png)

作业配置页面的电子邮件部分的屏幕截图： ![作业配置](../Images/13dd19f801fa2e7641be2743f78cd864.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T08:04:03.357

在该**`Post build actions`**部分中，完全删除`E-mail notification`。这将确保您的实例仅使用`Editable email notification`

这在我的版本（1.477）中是可能的，不确定这个添加/删除构建后操作的功能何时发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:11:41.950

您需要取消选中默认电子邮件通知框，然后将您的收件人列表添加到扩展电子邮件配置中。仅当您配置了默认值时，使用 $DEFAULT_RECIPIENTS 才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T21:53:41.147

有几个问题。首先，您需要在全局配置屏幕中添加一个默认收件人。每个作业的配置已损坏。作者声称它不应该再出现，但它仍然在最新版本中出现。

其次，您应该尝试在每个作业框中指定内容。删除 $DEFAULT_CONTENT 并将其替换为您的模板。

在我的安装中，我能够通过这样做来让它工作。我还必须点击高级（在每个作业配置中）并明确设置触发器，然后它才会向我发送电子邮件。

我在打印单元测试失败时遇到了麻烦，但 CHANGES 有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T22:21:30.133

In the job configuration page, go to the `Editable Email Notification` section. At the bottom of this section you can add triggers via a dropdown box you get after you've clicked on the `Advanced...` button. When I first configured the email notifications, there was no trigger defined, and no email was sent out.

If you always want an email sent out, use the `Before build` trigger. Then add a checkbox to determine the recipients of the email for this trigger. If you want all email addresses in `$DEFAULT_RECIPIENTS`, then click the checkbox at `Send To Recipient List`.

# java - UDP 多播未在多主计算机上的本地主机上传递

> ID：12748412
> 
> 赞同：0
> 
> 时间：2012-10-05T14:26:09.560
> 
> 标签：java, networking, udp, multicast

我有一台具有多个网络接口的机器，我正在尝试在其上使用 UDP 多播。我把它归结为这个小小的复制程序。

```
public class Main {
  public static void main(String[] args) throws Exception {
    InetAddress local = InetAddress.getByName("127.0.0.1");  // hangs
//    InetAddress local = InetAddress.getByName("10.0.0.145"); // finishes
    List<NetworkInterface> matchingIfs = new ArrayList<NetworkInterface>();
    Enumeration<NetworkInterface> netIfs = NetworkInterface.getNetworkInterfaces();
    while( netIfs.hasMoreElements() ) {
      NetworkInterface netIf = netIfs.nextElement();
      Enumeration<InetAddress> addrs = netIf.getInetAddresses();
      while( addrs.hasMoreElements() ) {
        InetAddress addr = addrs.nextElement();
        if( addr.equals(local) ) {
          matchingIfs.add(netIf);
          break;
        }
      }
    }

    NetworkInterface netIf = matchingIfs.get(0);
    InetAddress addr = InetAddress.getByName("233.245.29.143");
    int port = 59893;
    DatagramPacket sendPack = new DatagramPacket(new byte[1600],1600);
    DatagramPacket recvPack = new DatagramPacket(new byte[1600],1600);

    System.out.println("Using network interface: " + netIf);

    MulticastSocket send = new MulticastSocket();
    send.setTimeToLive(127);
    send.setNetworkInterface(netIf);

    MulticastSocket recv = new MulticastSocket(port);
    recv.setNetworkInterface(netIf);
    recv.joinGroup(addr);

    sendPack.setData("asdfasdf".getBytes());
    sendPack.setAddress(addr);
    sendPack.setPort(port);

    System.out.println("About to send");
    send.send(sendPack);
    System.out.println("Finished send");

    System.out.println("About to recieve");
    recv.receive(recvPack);
    System.out.println("Finished recieve");
    String s = new String(recvPack.getData(), recvPack.getOffset(), recvPack.getLength());
    System.out.println(s);
  }
} 
```

如果我不调用`setNetworkInterface`这个程序会在主机有多个网络接口时挂起。

当与`127.0.0.1`程序一起运行时，无论网络接口的数量如何，都会挂起等待接收。

当使用`10.0.0.145`（机器 IP 地址）运行时，程序按预期运行。

我所有的测试都是在运行 10.8.2 的 Mac 上进行的。

# objective-c - 从 UIImageVIew 获取 UIImage origin.x

> ID：12748413
> 
> 赞同：3
> 
> 时间：2012-10-05T14:26:17.740
> 
> 标签：objective-c, uiimageview, uiimage, coordinates

是否可以获得 a 的 X 坐标，当视图的缩放模式设置为时`UIImage`显示在 a中？`UIImageView``Center`

图片以更好地说明我想要的内容：

![图片说明问题](../Images/d6f14e4d4fc47bd7b0b5c11e0bc86346.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:29:40.397

这几乎是基本的数学：

```
CGFloat x = (imageView.frame.size.width - imageView.image.size.width) / 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:30:13.273

我想不是。

但是有解决方案，您可以计算图像的高度和宽度，并据此计算中心位置`(imageView.frame.size.width-image.size.width)/2`和高度相同的东西。

希望这可以解决您的问题。

# javascript - 自动填充多个选择框在 Internet Explorer 中选择了第一个选项

> ID：12748417
> 
> 赞同：1
> 
> 时间：2012-10-05T14:26:26.423
> 
> 标签：javascript, html, ajax, prototypejs, auto-populate

我正在使用带有原型的 ajax 更新多选框：

```
new Ajax.Updater(selectbox, someurl,{
    method:'post',
    parameters: "data=" + result,
    onFailure: function(){ alert('ajax updater error'); }
}); 
```

更新程序工作得很好，并且选择框会使用 ajax 调用返回的选项进行更新。唯一的问题是在 IE 中自动选择了最顶部的选项。

我试图通过放置手动取消选择它

```
document.getElementById(selectbox).options[0].selected = false; 
```

就在`Ajax.Updater()`函数之后和`onSuccess: {}`子句内部，但它是在更新复选框之前初始化的，所以从这里开始的唯一方法是设置延迟，但我想知道是否还有其他方法可以做到这一点？

将属性添加`selected="false"`到每个选项也不能解决问题，因为最后一个选项会被自动选择:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:47:50.393

尝试取消设置选择框上的选定索引

`$(selectbox).selectedIndex = -1;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:36:58.357

添加具有空值的第一个字段（或您的程序理解为“不是预期域中的值”）并选择它。HTML 选择字段必须始终选择一个字段（对吗？）

**编辑**w3c 规范指出：

> 17.6.1 预选选项 可以为用户预选零个或多个选项。用户代理应该确定哪些选项是预先选择的，如下所示：
> 
> 如果没有 OPTION 元素具有 selected 属性集，则用于选择最初选择哪个选项的用户代理行为是未定义的。笔记。由于现有实现对这种情况的处理方式不同，因此当前规范与 RFC 1866（[RFC1866] 第 8.1.3 节）不同，后者指出：初始状态选择第一个选项，除非任何元素上存在 SELECTED 属性。由于用户代理行为不同，作者应确保每个菜单都包含一个默认的预选选项。
> 
> 如果一个 OPTION 元素具有选定的属性集，则应预先选择它。
> 如果 SELECT 元素具有多个属性集，并且多个 OPTION 元素具有选定属性集，则它们都应该被预先选择。如果多个 OPTION 元素具有选定的属性集并且 SELECT 元素没有多个属性集，则认为是错误。用户代理处理此错误的方式可能会有所不同，但不应预先选择多个选项。

因此，行为必须由应用程序控制，因为默认情况下每个浏览器都可以选择不同的浏览器。但最终，将选择其中之一。通常，当它定义了*多个*属性时，它会选择 none 但是...规范对此没有任何说明，因此空选项也可以正常工作（可以肯定）。

# excel - 数字签名 - 当用户进行微小更改时传输 excel 文件会导致不同的签名。

> ID：12748420
> 
> 赞同：0
> 
> 时间：2012-10-05T14:26:50.530
> 
> 标签：excel, unique, digital-signature

我有一个将特定的 excel 文件转换为 XML 并将其传输到另一个应用程序的应用程序。传输中的一项要求是在 XML 中具有唯一编号标记 (REFNUM)。这样做的原因是为了避免同一文件的多次传输。

我对此的直观方法是创建文件的数字签名（MD5/SHA）并将签名嵌入到 REFNUM 标记中（将十六进制转换为十进制之后）。

问题是，有时用户可以简单地进行微小的更改，例如调整其中一列的大小，从而创建完全不同的签名。所以从系统的角度来看，这是一个从未传输过的新文件。

问题：我怎样才能避免它，或者数字签名可能不是正确的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:45:38.380

不要为此使用加密哈希/数字签名。它们的设计使得文件中任何位置的单个位更改都会生成完全不同的哈希/签名。其他选项将是一个简单的串行计数器，为每个“重大”更改递增（但如何确定尚不清楚），或者可能是时间戳（可能与有关作者或系统的其他信息相结合），或者类似于UUID，或者甚至可能只是一个随机数（不过，请选择一个足够大的范围以使您的冲突机会足够低）。

# jquery - jQuery 不适用于 XHTML 页面

> ID：12748422
> 
> 赞同：0
> 
> 时间：2012-10-05T14:27:05.750
> 
> 标签：jquery, xhtml

这是我的 XHTML 页面的代码。jQuery`/js/`在我的应用程序的文件夹中。所有其他页面的验证都是通过使用同一个文件的 jQuery 完成的，但是我无法在我创建的这个测试页面上运行简单的 jQuery 代码。这是页面的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Facelet Title</title>

    </h:head>
    <h:body>
        <script type="text/javascript" src="js/jquery.js"></script>

        <script>

            $(document).ready(function () {
                $("p").text("The DOM is now loaded and can be manipulated.");
            });

        </script>
        <br/><br/><br/>
        <p>Not loaded yet.</p>
        <input id="pedram" type="text" onclick="alert('hi');"/>
    </h:body>
</html> 
```

我也尝试过使用`CDATA`标签。我还将脚本移到了文档的开头。

唯一正常工作的是`alert()`我放入`onclick`事件中的那个。没有其他工作。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T14:28:40.703

改变

```
<script src="js/jquery.js">
        $(document).ready(function () {
            $("p").text("The DOM is now loaded and can be manipulated.");
        });
</script> 
```

至

```
<script>
        $(document).ready(function () {
            $("p").text("The DOM is now loaded and can be manipulated.");
        });
</script> 
```

您不需要指定 jQuery 源两次.. 当您在标签内使用 js 时也不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:46:40.993

我必须使用我的应用程序（java）的上下文路径并添加到我的 jquery 库地址。

```
 <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T20:31:30.423

问题似乎是您`<h:body>`与 jQuery 1.x 结合使用。

使用 jQuery 2.x 或`<body>`将解决您的问题。

jQuery 1.x 可能在`document.body`某处使用，它失败了，因为`document.body`使用`<h:body>`.

* * *

*如果你不介意我问，你为什么要使用 h 命名空间（[http://java.sun.com/jsf/html](http://java.sun.com/jsf/html)）？*

# jquery - 页眉和页脚幻灯片动画的区别

> ID：12748424
> 
> 赞同：10
> 
> 时间：2012-10-05T14:27:10.313
> 
> 标签：jquery, css, jquery-mobile, jquery-animate

当我使用幻灯片动画时（在本例中我使用了 slideToggle），我注意到滑动页眉 div 和页脚 div 之间存在差异。

滑动页脚时，内容（在本例中为 h1）与背景一起很好地滑动。标题 div 不是这种情况。似乎只有背景在移动，而我希望页眉以与页脚相同的方式滑动。

请查看我在[jsFiddle](http://jsfiddle.net/xhFz7/2/)上制作的演示。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:55:01.997

除了`.slideToggle()`使用方便之外，您还可以为标题元素的`top`属性设置动画，使其滑出屏幕而不是改变高度。

例如，您可以使用以下方式保存标题的状态`.data()`并为标题设置动画`.animate()`：

```
//set the initial state and bind click event handler
$('#toggleHeader').data('state', 0).bind('click',function(){

    //if the header is showing
    if ($(this).data('state') === 0) {

        //set state to not showing
        $(this).data('state', 1);

        //animate header element out-of-view
        $('#header').stop(true).animate({ top : -102 });
    } else {

        //set state to showing
        $(this).data('state', 0);

        //animate header element into view
        $('#header').stop(true).animate({ top : 0 });
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/xhFz7/3/](http://jsfiddle.net/xhFz7/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T17:23:18.877

Jasper 的修复确实有效，但 ThatSteveGuy 的解释也是正确的。要使用 ThatSteveGuy 的推理解决问题并仍然保留所有旧代码，请将其添加到 CSS：

```
#header h1 {
  position:absolute;
  text-align:center;
  width:100%;
  margin:0px;
  bottom:40px;
} 
```

​在这里看到[http://jsfiddle.net/xhFz7/58/](http://jsfiddle.net/xhFz7/58/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T05:03:20.910

切换事件本质上是一个专门的点击事件。您可以在此处阅读文档：http: [//docs.jquery.com/Events/toggle](http://docs.jquery.com/Events/toggle)

所以你可以像这样创建一个切换动画：

```
$('#toggleHeader').toggle(function() {
    $('#header').animate({top: "-102px"});
    }, function() {
        $('#header').animate({top: "0px"});
    }
); 
```

你可以在这里看到我的小提琴：http: [//jsfiddle.net/xhFz7/43/](http://jsfiddle.net/xhFz7/43/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T11:25:56.063

解决方案是动画不是高度（默认的slideToggle行为），而是marginTop或top（相对位置或绝对位置）。

```
$(document).ready(function(){
    $('#toggleHeader').bind('click',function(){
        $('#header').marginTopToggle();
    });       

    $('#toggleFooter').bind('click',function(){
        $('#footer').slideToggle();
    });        
});

$.fn.marginTopToggle = function(time) {
    time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;        
    if(parseInt($(this).css("margin-top")) == 0) {
        $(this).animate({"margin-top": "-" + $(this).outerHeight() + "px"}, time );
    } else {
        $(this).animate({"margin-top": 0}, time );
    }
} 
```

它与高度无关，并且可以使用标准的 jQuery 速度：

[http://jsfiddle.net/xhFz7/13/](http://jsfiddle.net/xhFz7/13/)

您还可以在标题中相对于其底部定位文本，这也可以。

[http://jsfiddle.net/xhFz7/14/](http://jsfiddle.net/xhFz7/14/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T12:20:26.727

尝试这个。

```
$(document).ready(function() {
    $('#toggleHeader').bind('click', function() {
        var header = $('#header'), //cached for repeated use
            height = header.outerHeight(),
            anims = {
                slideUp: function() {
                    header.stop().animate({'top': -(height) + 'px'}, 500, function() {
                        header.hide();
                    });
                },
                slideDown: function() {
                    header.stop().show().animate({'top': '0px'}, 500);
                }
            };
        (header.is(':visible')) ? anims.slideUp() : anims.slideDown();
    });

    $('#toggleFooter').bind('click', function() {
        $('#footer').slideToggle();
    });
});​ 
```

[http://jsfiddle.net/HXD2G/1/](http://jsfiddle.net/HXD2G/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-15T12:13:01.823

**slideToggle**为*高度*设置动画并将*溢出*设置为*隐藏*。作为标准行为，子元素 (h1) 位于其父元素的顶部。当父级缩小时，它们会停留*在顶部*，从而对页眉和页脚产生不同的效果。

通过在标题内容周围包裹一个具有固定高度的额外块，并将其从标题**底部**定位，当此框高度缩小时，内容将上升。

[http://jsfiddle.net/willemvb/2CSPR/](http://jsfiddle.net/willemvb/2CSPR/)

# asp.net-mvc - 如何为 [DataType(DataType.DateTime)] 设置像 datatime.now 这样的默认值

> ID：12748431
> 
> 赞同：0
> 
> 时间：2012-10-05T14:27:49.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3-areas

我想知道是否可以在 MVC asp.net 3 中为我的类的属性设置默认值。

目前我正在使用这个：

```
[DataType(DataType.DateTime)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:44:50.757

也许你想要的就在这里：[How to set a default value with Html.TextBoxFor?](https://stackoverflow.com/questions/3034986/how-to-set-a-default-value-with-html-textboxfor)

# android - Android缩放动画闪烁

> ID：12748437
> 
> 赞同：3
> 
> 时间：2012-10-05T14:28:11.577
> 
> 标签：android, textview, scale, flicker

我的应用程序中有框架布局。在框架中，我有 ImageView 和 TextView。我需要一直框架布局反弹。

我在 xml 中制作了这个动画：

```
<scale
    android:duration="100"
    android:fromXScale="0.1"
    android:fromYScale="0.1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="1.0"
    android:toYScale="1.0" />

<scale
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1200"
    android:fillAfter="false"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:pivotX="50%"
    android:pivotY="50%"
    android:startOffset="100"
    android:repeatCount="infinite"
    android:repeatMode="reverse"
    android:toXScale="0.9"
    android:toYScale="0.9" /> 
```

问题是文本视图中的文本闪烁。ImageView 很好。如何预防这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:53:52.603

我找到了解决方案：

在 Manifest.xml 中将 hardwareAccelerated 设置为 true。

# c# - 即使在我完成它们之后，绑定也会将我的控件保存在内存中。我怎样才能释放它们？

> ID：12748438
> 
> 赞同：1
> 
> 时间：2012-10-05T14:28:12.947
> 
> 标签：c#, silverlight, data-binding, telerik, silverlight-5.0

我有一个奇怪的行为，我认为这与绑定有关。基本上，我怀疑我的控件在 ViewModel 上的绑定会创建从 PropertyChanged 事件到控件的强引用。因此 ViewModel 始终保持对控件的引用。因此，即使我完成了控件，它们也始终保存在内存中。这将一直存在，直到我销毁我的 ViewModel，但在我的情况下，我有一个 ViewModel 来处理所有事情。有没有办法可以解除绑定创建的事件？

这是对我的问题的更详细解释，也是使我产生上述信念的原因：

我有一个视图模型：

```
public ViewModel()
{
    InitializeCommands();
}

public ICommand OpenPropertiesCommand { get; set; }

private void InitializeCommands()
{
    OpenPropertiesCommand = new DelegateCommand((o) =>
    {
        OpenProperties(o as ContentControl);
    });
}

private void OpenProperties(ContentControl propertiesWindowOwner)
{
    JobProperties jp = new JobProperties(this);
    jp.WindowStartupLocation = Telerik.Windows.Controls.WindowStartupLocation.CenterOwner;
    jp.Owner = propertiesWindowOwner;
    jp.ShowDialog();
}

private Job selectedJob;
public Job SelectedJob
{
    get
    {
        return selectedJob;
    }
    set
    {
        selectedJob = value;
        RaisePropertyChanged("SelectedJob");
    }
} 
```

这个 ViewModel 由我的主控件使用。在这个控件上，我有一个 GridView，其中每一行都是一个“作业”。您可以编辑作业的属性，这将打开一个 RadWindow 控件，让您编辑每个作业的属性。

我的 PropertyEdit 控件是一个 RadWindow，它使用与 DataContext 相同的 ViewModel。它的所有组件都绑定在 SelectedJob.something 上，其中 something 是 Job 的属性。

如果我打开 Job #1 属性。创建一个 PropertyEdit 控件并建立绑定。对于每个绑定，我的属性 SelectedJob.something 应该被访问一次。如果我关闭 PropertyEdit 控件并再次打开 Job #1 属性。又创建了一个 PropertyEdit 控件并建立了绑定。现在，如果我关闭这个并选择另一个作业，则会在 selectedJob 上调用 PropertyChanged 事件，并且每次绑定都会调用我的绑定两次。实际上，第一个 PropertyEdit 控件绑定被激活，第二个 PropertyEdit 绑定也被激活。现在，如果我打开 Job #1 属性 100 次，当我选择 Job #2 时，每个绑定都会被查询 100 次。因此，我怀疑内存泄漏，绑定将我的 PropertyEdit 控件保留在内存中，因为它们引用了所有这些。在我销毁我的 ViewModel 之前，这些引用将被保留，但在我的情况下，它是我的主应用程序的 ViewModel，并且永远不会被销毁。我怎样才能防止这种情况发生？有没有办法手动取消注册绑定的事件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:31:02.400

我已经解决了这个问题。问题不在于绑定，但似乎 Window 的 Owner 属性以某种方式阻止了窗口被垃圾收集。

通过注释掉这一行：

```
jp.Owner = propertiesWindowOwner; 
```

我解决了这个问题。我不确定这是为什么。我怀疑设置窗口的所有者具有将窗口设置为propertiesWindowOwner的子级的副作用。因此，在我销毁 propertiesWindowOwner 之前，它会保留对我的窗口的引用，即使在关闭它之后也是如此。

我有点困惑为什么会发生这种情况，以及在这样做时我需要做什么来不泄漏内存。如果有人知道，请对此发表评论。

# php - yii filevalidator 不会在 tooLarge 文件上显示错误，而是在顶部显示 php 警告

> ID：12748442
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:28:19.627
> 
> 标签：php, file-upload, yii, max-size

我只想允许最大 1MB 的文件

```
 array('taskfile', 'file', 'allowEmpty' => true, 'maxSize' => 1024 * 1024 * 1,'on' => 'newTask, edit'), 
```

现在，我的 php.ini 允许 post_max_filesize 为 8MB。如果文件小于 8MB 但大于 1MB，则会正确显示文件验证错误。

但如果文件大于 8MB，则不会出现来自 yii 的错误，而是来自 php 本身。问题是，它也出现在实时模式中。

```
Warning: POST Content-Length of 12028878 bytes exceeds the limit of 8388608 bytes in Unknown on line 0 
```

为什么 yii 不检查文件大小并抛出验证错误？我怎样才能做到这一点？

### 解决了：

好的，我用一个小助手方法解决了它。

我添加了一个新的验证规则

```
 array('taskfile', 'checkMaxPostSize', 'on' => 'newTask, edit'), 
```

和辅助方法

```
 public function checkMaxPostSize($attribute) {
    if (isset($this->taskfile)) {
        if ($this->taskfile->size > 1024*1024*1 ) {
            $this->addError($attribute, 'file is tooooooo large');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:50:47.497

我认为您最初的问题是`'on'`您的验证器的一部分。当你有多个验证器时，它们需要是一个数组；正确的代码如下所示：

```
array('taskfile', 'file', 'allowEmpty' => true, 'maxSize' => 1024 * 1024 * 1,'on' => array('newTask', 'edit')), 
```

# javascript - 将变量与 JSON 内容匹配并返回数据

> ID：12748444
> 
> 赞同：2
> 
> 时间：2012-10-05T14:28:27.940
> 
> 标签：javascript

我有一个包含国家名称的变量。

```
var country = 'belgium'; 
```

我有一个 JS 数据结构：

```
var countryCoords = {
  argentina: '56 100',
  belgium: '100 200'
} 
```

我如何获得比利时的坐标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:29:15.540

对象支持括号表示法和点表示法...

```
var country = 'belgium';

var countryCoords = {
  argentina: '56 100',
  belgium: '100 200'
}

countryCoords[country]; // '100 200'
countryCoords.belgium; // '100 200' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T14:29:12.480

你得到他们

```
var coords = countryCoords[country]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:31:46.677

`country`您可以使用作为密钥提取它们：

```
console.log(countryCoords[country]); 
```

# javascript - AngularJS - 如何在绑定的 html (ngBindHtml) 上设置事件

> ID：12748446
> 
> 赞同：2
> 
> 时间：2012-10-05T14:28:38.113
> 
> 标签：javascript, angularjs, jquery-events

我有以下控制器，它在启动时查询服务器以获取项目列表，该列表获取所有项目的基本详细信息。然后，当用户单击列表中的某个项目时，它会查询服务器以返回**所有**项目信息，包括一些 SVG 数据。

```
function ItemsCtrl($scope, $http) {
  $scope.items = [];
  $scope.selectedItemDesign = null;

  $http.jsonp('/items/all?callback=JSON_CALLBACK').
    success(function (data) {
      $scope.items = data;
    });

  $scope.getItem = function (item) {
    var index = $scope.items.indexOf(item);
    if (!$scope.items[index].SVG) {
      $http.jsonp('/items/byid/' + $scope.items[index]._id + '?callback=JSON_CALLBACK').
        success(function (data) {
          $scope.items[index].SVG = data.SVG;
          $scope.selectedItemDesign = $scope.items[index].SVG;
        });
    } else {
      $scope.selectedItemDesign = $scope.items[index].SVG;
    }
  };
} 
```

然后通过以下方式将 SVG 数据直接绑定到视图：

```
<div class="span9" ng-bind-html-unsafe="selectedItemDesign"> 
```

我遇到的问题是我希望能够将事件附加到 SVG 中的标签，以便允许用户与 SVG（简单`onClick`事件）进行交互，但我不知道如何做到这一点......

我以为是后行；`$scope.selectedItem = $scope.items[index];`然后我就可以访问 DOM 并附加事件，但事实并非如此（DOM 尚未更新）。我也查看了有关指令的信息，虽然我设法设置了一个指令来执行我需要的操作，但它在 SVG 更改时不会触发（即使这样我也不确定它是否是前/后 DOM 更新）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:42:17.093

你是对的，你应该在渲染 DOM 之后将 onClicks 添加到你的 SVG 中，并且应该在指令中完成这项工作。

困难的部分（这是一个反复出现的问题）是没有事件告诉您何时应该开始添加这些 onClick。Angular 无法告诉你，因为它不知道 DOM 什么时候准备好。您必须在指令中添加一些东西来启发式地计算出这一点，方法是使用 jQuery 通过 setTimeout 定期观察 DOM 并确定它何时准备好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T09:09:21.663

如果您可以控制返回的 html，则可以在 html 绑定到页面后使用 ngInit 调用控制器中的方法。返回 html 后，您需要将其编译到控制器的作用域中。

html:

```
<div id="results" ng-init="initResults()">Contents...</div> 
```

控制器：

```
$scope.getHtml = function(){
    // Get html using http call then compile results into current scope
    $http.get("/results").then(function(){    
        $compile(angular.element(document.getElementById('results')).parent().contents())($scope);
    });        
};

$scope.initResults = function(){
    // Html has loaded...
}; 
```

# websphere - Websphere 数据库登录模块？

> ID：12748453
> 
> 赞同：1
> 
> 时间：2012-10-05T14:29:09.113
> 
> 标签：websphere, websphere-7

我需要知道是否可以使用数据库登录模块保护 WAS 8 控制台（以及在其上运行的一般 Java EE 应用程序），以便将用户和组存储在数据库中。据我所知，安全向导中唯一可用的选项是本地操作系统、基于文件的安全性、独立 LDAP 或联合 LDAP...。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:56:20.163

还有另一种选择——定制。使用此选项，您必须提供一个 Java 类，该类将执行从 WebSphere 连接到数据库的功能。提供了一个示例类，以便您可以看到需要做什么，并且[信息中心中有文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/tsec_tdaman.html)。

# c++ - QTableView/自定义表格模型：在标题中设置文本颜色

> ID：12748460
> 
> 赞同：0
> 
> 时间：2012-10-05T14:29:25.077
> 
> 标签：c++, colors, qtableview, qabstracttablemodel

我的自定义表格模型源自`QAbstractTableModel`并显示在`QTableView`.

看起来像这样：

![在此处输入图像描述](../Images/5106f0040a5b7146bf6fb4384036e13a.png)

我想更改某些行标题的文本颜色，这可以在模型中决定。是否可以从那里为某些标题着色？到目前为止我找不到方法。我发现的是关于为所有标题设置背景/文本颜色，而不是为特别少的部分设置背景/文本颜色。颜色应该是用户的一种标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:36:16.267

你要做的就是重新实现`QAbstractTableModel::headerData()`。根据部分的值（从零开始的标题索引），您可以单独设置标题项的样式。[Qt::ItemDataRole](http://doc.qt.digia.com/qt/qt.html#ItemDataRole-enum)中前景（=文本颜色）和背景的相关值是`Qt::BackgroundRole`和`Qt::ForegrondRole`

比如像这样：

```
QVariant MyTableModel::headerData(int section, Qt::Orientation orientation, int role) const {
  //make all odd horizontal header items black background with white text
  //for even ones just keep the default background and make text red
  if (orientation == Qt::Horizontal) {
    if (role == Qt::ForegroundRole) {
       if (section % 2 == 0)
          return Qt::red;
       else
         return Qt::white;
    }
    else if (role == Qt::BackgroundRole) {
       if (section % 2 == 0)
          return QVariant();
       else
         return Qt::black;
    }
    else if (...) {
      ...
      // handle other roles e.g. Qt::DisplayRole
      ...
    }
    else {
      //nothing special -> use default values
      return QVariant();
    }
  }
  else if (orientation == Qt::Vertical) {
      ...
      // handle the vertical header items
      ...
  }
  return QVariant();
} 
```

# sql-server-2008 - 优化 where 子句（短路），SQL Server 2008

> ID：12748464
> 
> 赞同：0
> 
> 时间：2012-10-05T14:29:42.930
> 
> 标签：sql-server-2008, tsql

如何优化此查询：

```
declare @MyParam nvarchar(100) = 25846987;

select top 100 * from MySelectTable
where
(MyParam = @MyParam)
OR
(@MyParam = 0 and MyParam in (SELECT MyParam FROM aMassiveSlowTable WHERE Id = 'random1'))
OR
(@MyParam = 1 and MyParam in (SELECT MyParam FROM aMassiveSlowTable WHERE Id = 'random2'))
OR
(@MyParam = 2 and MyParam in (SELECT MyParam FROM aMassiveSlowTable WHERE Id = 'random3')) 
```

当我只使用这部分时：

```
declare @MyParam nvarchar(100) = 25846987;

select top 100 * from MySelectTable
where
(MyParam = @MyParam) 
```

它会在 1 秒内返回。

使用所有参数时，大约需要 5 分钟。

我相信这是因为它正在扫描 aMassiveSlowTable，而它所要做的就是匹配 MyParam = @MyParam。

如果@MyParam 与 MyParam 匹配，如何让它跳过所有其他比较？我尝试使用 CASE 语句，但它们不适用于**IN**子句。我尝试重新排列括号中的 AND，甚至向*aMassiveSlowTable*添加额外的过滤。

如果@MyParam 与MyParam 不匹配，则查询需要更长的时间也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:06:46.980

至于您的问题“使用所有参数时”的性能方面，您可能需要查看以下知识库：

修复：在 SQL Server 2008 或 SQL Server 2008 R2 或 SQL Server 2012 中运行包含相关 AND 谓词的查询时性能不佳

[http://support.microsoft.com/kb/2658214](http://support.microsoft.com/kb/2658214)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:46:09.820

这可能会解决它
在应该尽早评估的地方

```
(MyParam in (SELECT MyParam FROM aMassiveSlowTable WHERE Id = 'random1' and @MyParam = 0 )) 
```

或者

```
declare @MyParam nvarchar(100) = 25846987;
select * 
from MySelectTable
where MyParam = @MyParam 
union
select *  
from MySelectTable
join aMassiveSlowTable as Slow 
 and Slow.MyParam = MySelectTable.MyParam 
 and Slow.ID = 'random0'
where @MyParam = 0
union
select *  
from MySelectTable
join aMassiveSlowTable as Slow 
 and Slow.MyParam = MySelectTable.MyParam 
 and Slow.ID = 'random1'
where @MyParam = 1
union
select *  
from MySelectTable
join aMassiveSlowTable as Slow 
 and Slow.MyParam = MySelectTable.MyParam 
 and Slow.ID = 'random2'
where @MyParam = 2 
```

或玩加入提示

```
declare @MyParam nvarchar(100) = 25846987;
select top 100 * 
from MySelectTable
left join aMassiveSlowTable as Slow 
  on Slow.MyParam in (1,2,3)  -- now the optimizer has something hard to evalate
 and Slow.MyParam = MySelectTable.MyParam 
 or (Slow.MyParam = 0 and Slow.ID = 'random0')
 or (Slow.MyParam = 1 and Slow.ID = 'random1')
 or (Slow.MyParam = 2 and Slow.ID = 'random2')
where MyParam = @MyParam 
```

# python - SUDS 可以针对 XSD 验证对象吗？

> ID：12748466
> 
> 赞同：1
> 
> 时间：2012-10-05T14:29:46.070
> 
> 标签：python, web-services, xsd, wsdl, suds

在 Python 中，我使用 SUDS 作为 Web 服务客户端。

在调用 web 服务之前，参数将在代码中建立。

例如，其中一个参数被定义为 4 到 8 个字符之间的字符串。

是否可以在发送之前验证这样的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:23:37.823

快速浏览[一下代码](https://fedorahosted.org/suds/browser/trunk/suds/xsd/sxbasic.py)，看起来好像只处理了“枚举”限制。SUDS 不应该打破长度限制，但也不会强制执行。

该[`doctor`](http://jortel.fedorapeople.org/suds/doc/suds.xsd.doctor-module.html)模块为代码提供了一个接口，用于检查架构（目的是在可能被破坏的地方修复它。）您可以使用它来查找您想要强制执行的其他限制并构建代理在需要的地方这样做。或者，如果您需要处理的地方数量相对较少且是静态的，那么手动编写一些包装器可能会更容易。

# c# - 如何在 WP7 中将图像添加到边框对象

> ID：12748467
> 
> 赞同：0
> 
> 时间：2012-10-05T14:29:50.423
> 
> 标签：c#, image, windows-phone-7, border

在我的 windows phone 应用程序中，我有一个矩形`Border`. 我想在边框的中心添加图像。如何使用`C#`？

**编辑** 此代码不显示任何图像。知道为什么吗？

```
Border b = (Border)FindName("border"+nom);
if (move == 1)
{
   var bi = new BitmapImage
   {
       UriSource = new Uri("/Images/smiley1.png", UriKind.Relative)
   };
   b.Child = new Image { Source = bi };
} 
```

**编辑 2** 显然，正确的语法是`UriSource = new Uri("/BoxIt;component/Images/smiley1.png", UriKind.Relative)` 这解决了问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:44:17.893

这很简单。你可以做一个简单的搜索。无论如何，这是您正在寻找的解决方案 -

在 XAML 中 -

```
<Border BorderThickness="2,2,2,2" BorderBrush="#FF000000" >

<Image x:Name="imgMainImage"  Visibility="Visible" Height="205" Width="180" />

</Border> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:24:22.160

可以使用以下代码将*图像添加到**边框：*

```
// Assume you have a border named Border1
Border1.Child = new Image() { /* ... */ }; 
```

注意：我不建议这样做。应尽可能使用具有*数据绑定*或*TemplatedControls的**DataTemplates 。*

# database-design - 支持表上的自然键与代理键

> ID：12748473
> 
> 赞同：3
> 
> 时间：2012-10-05T14:30:05.803
> 
> 标签：database-design, primary-key, surrogate-key, natural-key

我已经阅读了许多关于自然主键与代理主键之间之争的文章。我同意使用代理键来识别其内容由用户创建的表的记录。

**但是在支持表的情况下我应该使用什么？**

例如，在假设的表“orderStates”中。此表中的值不可编辑（用户不能插入、修改或删除此值）。

如果使用自然键将有以下数据：

```
TABLE ORDERSTATES
{ID: "NEW", NAME: "New"}
{ID: "MANAGEMENT" NAME: "Management"}
{ID: "SHIPPED" NAME: "Shipped"} 
```

如果我使用代理键将有以下数据：

```
TABLE ORDERSTATES
{ID: 1 CODE: "NEW", NAME: "New"}
{ID: 2 CODE: "MANAGEMENT" NAME: "Management"}
{ID: 3 CODE: "SHIPPED" NAME: "Shipped"} 
```

现在让我们举个例子：用户输入一个新订单。

在使用自然键的情况下，在代码中我可以这样写：

```
newOrder.StateOrderId = "NEW"; 
```

每次我有一个额外的步骤时，都使用代理键。

```
stateOrderId_NEW = .... I retrieve the id corresponding to the recod code "NEW"

newOrder.StateOrderId = stateOrderId_NEW; 
```

每次我必须将订单移动到新状态时，都会发生同样的情况。

**那么，在这种情况下，选择一种密钥类型而不是另一种的原因是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:12:17.953

答案是：视情况而定。

在您更改代码中的订单状态的示例中，问问自己为这些状态创建常量的可能性有多大（例如，为了避免拼写错误）。如果是这样，两者都将完成相同的任务。

在通过表单提交新订单状态的情况下，您将使用自然键或代理键构建可能值的下拉列表（例如），没有区别。

当您对订单表进行查询并希望打印每个订单的状态时，情况会有所不同。拥有一个自然键将避免需要进行另一个连接，这会有所帮助（尽管有点）。

在存储和查询性能方面，代理键在大多数情况下分别更小和更快（取决于表大小）。

不过说了这么多，还是要慎重考虑。我个人觉得代理键已经成为一种教条。许多开发人员会在他们的所有表格中使用它们，建模软件会在创建表格时自动添加它们。因此，您可能会对您的选择产生不同的反应，但没有硬性规定禁止您使用它们；做出明智的选择 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:02:40.013

简而言之：

*   自然键可能导致更少的 JOINing ¹，
*   但也需要更多空间²（因此会损害缓存性能³）。

这里没有硬性规定。首先确定您是否需要这样的 JOIN，如果需要，是否值得为增加存储而付出代价。做到这一点的唯一方法是**测量**真实的数据量。

顺便说一句，在自然与替代辩论中还有其他考虑因素，例如……

*   级联更新，
*   聚类，
*   菱形依赖等

...但它们在大多数情况下不适用于您的情况。

* * *

*¹自然键会通过外键迁移到“主”表中，因此如果需要将其与主表行放在一起，则可以完全避免 JOIN。顺便说一句，如果您需要不同的 JOIN （用于获取非密钥），您将无法以这种方式消除它。*

*²据推测，“主”表很大，在这种情况下，存储许多字符串（用于迁移的自然键）的空间效率低于存储许多整数（用于迁移的代理）。如果主表很小，那么无论哪种方式都无关紧要。*

*³行“更胖”，因此更少的行将适合单个数据库页面。缓存通常在页面级别实现。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:35:52.487

如果我理解正确，您的第一个示例显示表的主键是一个字符串（varchar），而在第二个示例中，主键是一个整数。主键大概是另一个表中的外键。

显然，存储整数比存储 varchar 使用更少的磁盘空间，特别是因为必须为最长的 varchar 分配空间（在您的情况下，“管理”）。我想按整数索引比按字符串索引要快（索引也会占用更少的空间）。

第一个示例具有相同值的主键和“名称”字段；虽然更改名称不会更改主键（因此对使用“OrderStates”作为外键的表没有影响），但会出现逻辑断开 - 您可以将主键“NAME”作为主键，但将值“Person” '。

通常会编写查询，例如

```
select orders.ordname
from orders
inner join orderstatus on orders.status = orderstatus.id
where orderstatus.name = 'NEW' 
```

虽然老实说，我会使用一个标志字段来显示状态是否指示初始状态，“新”状态，而不是检查状态的名称 - 即使您更改其名称，状态仍将是初始状态。

您可以使用生成器来提供保证唯一的密钥，而如果您使用“自然”密钥，则必须检查冲突。

# android - 获取与 facebook 中特定用户关联的所有事件

> ID：12748475
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:30:06.053
> 
> 标签：android, facebook-graph-api

我想知道是否有可能获得一个用户被邀请参加的所有事件的列表，即使他没有点击加入、接受或拒绝。现在我可以通过查询我/事件来获得所有事件的列表（包括用户创建的事件）。但这不会返回用户刚刚被邀请但用户尚未与邀请进行交互的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:05:14.943

> 我想知道是否有可能获得一个用户被邀请参加的所有事件的列表，即使他没有点击加入、接受或拒绝。

是的，通过[FQL event_member 表](https://developers.facebook.com/docs/reference/fql/event_member/)。

它有一个名为`rsvp_status`：

> “用户对被查询事件的回复状态。有四种可能的返回值：出席、不确定、拒绝和未回复。”</p>

如您所见，它还列出了用户尚未回复的事件。

您可以通过`uid`.

# birt - org.xml.sax.SAXParseException：使用 birt 2.3.2 和 firefox 15 的文件过早结束

> ID：12748477
> 
> 赞同：0
> 
> 时间：2012-10-05T14:30:16.460
> 
> 标签：birt

我们使用的是 Birt 2.3.2。我们试图在 Firefox 15.0.1 中打开我们的报告，我们得到异常“org.xml.sax.SAXParseException: Premature end of file”而没有堆栈跟踪。

我们尝试调试它，发现 Firefox 发送了错误的内容类型。当我使用 Tamper Data 插件修改请求的标头时，它起作用了。

发送的请求是

```
POST <<URL>> 
Request Headers:
Host[<<MYHOST>>]
User-Agent[Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1]
Accept[text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8]
Accept-Language[en-us,en;q=0.5]
Accept-Encoding[gzip, deflate]
Connection[keep-alive]
Content-Length[1702]
Content-Type[application/x-www-form-urlencoded]
Referer[<<URL>>]
request-type[SOAP]
SOAPAction[""]
X-Prototype-Version[1.4.0]
X-Requested-With[XMLHttpRequest]
Cookie[JSESSIONID=A5E874082FE87F814F32B103EE864EBF.]
Pragma[no-cache]
Cache-Control[no-cache]
Post Data:
POST_DATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><<SOAPBODY>></soap:Body></soap:Envelope>]
Response Headers:
Server[Apache-Coyote/1.1]
X-Powered-By[Servlet 2.5; JBoss-5.0/JBossWeb-2.1]
Content-Type[text/xml;charset=utf-8]
Transfer-Encoding[chunked]
Date[Fri, 28 Sep 2012 00:05:39 GMT]
Connection[close] 
```

当我们修改 Content-Type 为 text/xml 时；charset=UTF-8，它工作

它也适用于 chrome 和 IE，有时它适用于 FF，但在我们重新启动 FF 后再次出现问题。

有没有办法解决它？

```
On server we are getting following exception

jvm 1    | java.io.CharConversionException: isHexDigit
jvm 1    |      at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:88)
jvm 1    |      at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:49)
jvm 1    |      at org.apache.tomcat.util.http.Parameters.urlDecode(Parameters.java:429)
jvm 1    |      at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:412)
jvm 1    |      at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:363)
jvm 1    |      at org.apache.catalina.connector.Request.parseParameters(Request.java:2562)
jvm 1    |      at org.apache.catalina.connector.Request.getParameterNames(Request.java:1102)
jvm 1    |      at org.apache.catalina.connector.Request.getParameterMap(Request.java:1082)
jvm 1    |      at org.apache.catalina.connector.RequestFacade.getParameterMap(RequestFacade.java:414)
jvm 1    |      at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.doPost(BirtSoapMessageDispatcherServlet.java:196)
jvm 1    |      at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
jvm 1    |      at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
jvm 1    |      at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
jvm 1    |      at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.service(BirtSoapMessageDispatcherServlet.java:122)
jvm 1    |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
jvm 1    |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:30:10.383

如果您从 servlet 使用引擎，请确保在响应中设置内容类型：

response.setContentType("text/html");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T15:33:09.993

[我相信这是Eclipse 错误列表中列出](https://bugs.eclipse.org/bugs/show_bug.cgi?id=310512#c6)的已知错误。

看评论#6：

> 解决方法是注释掉 webcontent/birt/ajax/lib/prototype.js 的第 668 和 669 行
> 
> 在注释掉这些行之前，Chrome 会将 Content-type 发送为“application/x-www-form-urlencoded, text/xml; charset=UTF-8”，这会导致异常。
> 
> 注释掉这些行后，Chrome 会将 Content-type 发送为“text/xml; charset=UTF-8”，就像其他表现良好的浏览器一样 :)
> 
> BIRT 报告附带的prototype.js 似乎相当陈旧，因为这部分代码已在 4 年多前的 1.5.0_rc0 版本中进行了修改

# python - python中的标准偏差 - 浮动对象不可迭代

> ID：12748478
> 
> 赞同：1
> 
> 时间：2012-10-05T14:30:19.827
> 
> 标签：python, python-3.x

我试图在 python 中找到数字的标准偏差。这是一个入门级的编程类，所以我避免尝试使用一个函数，因为它们还没有被引入。

该程序允许我将数字添加到列表中，分析所述列表，然后带出平均值、最小值、最大值、STDev 等。我已经成功地显示了除 STDev 之外的所有内容，我不断收到的错误是浮动对象不可迭代。这是相关部分的代码：

```
elif (menuchoice == 4):
        sum = 0.0
        print("std deviation")
        stdev = 0.0
        for i in range(listcount):
            scorenum4 = eval(scorenum[i])
            scoreaverage2 += scorenum4
        scoreaverage2 /= listcount
        for i in range(listcount):
            stdev = []
            scorenum3 = eval(scorenum[i])
            stdev += (scorenum3 - scoreaverage2)**2
            dev = sqrt((stdev)/listcount-1)
        print(dev) 
```

任何帮助都会很好，谢谢。

- 自我编辑 - 我刚刚从我的 for 循环中删除了 stdev=[]，不知道为什么它在那里 - 我现在得到了答案，但它在数学上是关闭的

*   更改为 dev = sqrt((stdev)/listcount) 并修复了我的数学错误，DSM 也确认了此修复。谢谢
*   程序现在运行正常！呜呜。谢谢大家的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:43:34.247

这是计算标准偏差的一种非常冗长的方法。这是一种更 Pythonic 的方式，我敢说它也更具可读性。

```
mean = sum(scorenum, 0.0) / len(scorenum)
d = [ (i - mean) ** 2 for i in scorenum]
std_dev = math.sqrt(sum(d) / len(d)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:42:40.283

首先，删除`stdev = []`，这没有任何意义（根据您的编辑，您已经这样做了，但它仍然在代码中）。

其次，将行`dev = sqrt(stdev/(listcount-1))`移出 for 循环（降低缩进级别）。这应该只在条款相加后进行一次。*编辑：*如@DSM 所指出的，还要修复括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:49:54.703

您的代码中的数学错误在这里：

```
 dev = sqrt((stdev)/listcount-1) 
```

您需要`dev = sqrt(stdev/listcount)`或`dev = sqrt(stdev/(listcount-1))`，具体取决于您的自由度偏好。修复此问题后，您的（修改后的）代码似乎可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:50:38.467

另一个答案提出了一种更pythonic的做法，但我在这里提出了一个更正。它效率不高，但经典算法对于初学者来说更容易理解。

假设 scorenum 是存储您需要的数据和 STD 的数组。

```
import math
average=0.0
for ii in scorenum: # iterate the data array, it can contain float
    sum+=ii
average/=float(len(scorenum)) # number of data=array length

# now, compute an estimator of std=sqrt(variance/n), where variance=sum((xi-xavg)**2)
std=0.0
for ii in scorenum:
    std+=(ii-average)**2
std=math.sqrt(std/float(len(scorenum))) # if you prefer n-1: std/float(len(scorenum)-1)

print "average=",average," std=",std 
```

评论： - 你可以迭代任何类型的数组 - 你必须导入数学库 - 像 += 和 /= 这样的运算符在这里是为了花哨。它们等价于 sum=sum+ii, average=average/....

# android - 在 android 市场上以另一种语言上传已发布的应用程序

> ID：12748483
> 
> 赞同：0
> 
> 时间：2012-10-05T14:30:31.343
> 
> 标签：android, google-play

我已经发布了我的 android 应用程序的英文版。现在我想上传同一个应用程序的西班牙语版本。如何实现市场上可见的英语和西班牙语应用程序？我必须在两个应用程序的清单文件中进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:34:05.257

不建议这样做。您应该能够使用单个 APK 获得完全可翻译的应用程序。（参见[开发者文档](http://developer.android.com/guide/topics/resources/localization.html)）

也就是说，如果你真的需要它，你将不得不发布 2 个不同的 APK 和 2 个不同的包名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:35:10.640

Android 提供了一个本地化系统，同时只使用一个 APK。本质上，您在 strings.xml 中定义所有字符串，并为您想要支持的每种语言创建一个 strings.xml。

有关详细信息，请参阅[此](http://developer.android.com/guide/topics/resources/localization.html)和[此](http://developer.android.com/training/basics/supporting-devices/languages.html)。

基本上，您需要`values-<two letter locale>`在您的`/res`目录中创建一个名为的子文件夹，并用本地化资源填充它。

除此之外，如果您真的需要，您可以更改包名称并将其作为两个单独的应用程序发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:32:14.573

如果您不想使用本地化字符串，请更改包名称并且您有两个应用程序....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:37:55.970

如果你希望你的应用程序支持多种语言​​，你必须创建一个名为 values-（语言代码）的文件夹，例如你应该创建一个名为“values​​​-es”的文件夹并将其放入文件中strings.xml 与默认文件夹的值相同，但翻译成西班牙语。那些在手机中设置了西班牙语的人会读取这个文件，那些没有西班牙语的人会读取英语的默认文件夹。这是推荐者，但如果您想上传两个应用程序，则需要在 google play 商店的上传菜单中建立语言要求。

# css - CSS 样式 textarea 类似 textfield 跨浏览器

> ID：12748488
> 
> 赞同：0
> 
> 时间：2012-10-05T14:31:14.277
> 
> 标签：css, textarea, appearance

下面的 FIDDLE 显示了一系列输入。最后一个是文本字段。在 Firefox 上，它看起来不同，并且基于填充不同呈现（尽管在 FIDDLE 上比没有 FIDDLE.

什么 CSS 可以用来强制它表现得像输入一样跨浏览器

[http://jsfiddle.net/JdKyr/2/](http://jsfiddle.net/JdKyr/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:35:26.393

使用以下内容：

```
textarea { 
    resize: none; 
    font: /* same font declaration here as for the input fields*/
} 
```

其余的对我来说看起来还可以。检查你**[修改过的 fiddle](http://jsfiddle.net/poikl/JdKyr/12/)**。

# r - 来自macports的MPICH缺少符号

> ID：12748491
> 
> 赞同：0
> 
> 时间：2012-10-05T14:31:26.473
> 
> 标签：r, macos, mpich

我正在尝试使用 Rmpi​​ 编写程序，不幸的是，所需的符号未定义，并且使用 otool 和 nm 跟踪它似乎只是引导我到`libmpich.3.3.dylib`. 不幸的是，符号`MPI_Comm_dup`, 在这个动态库中是未定义的。

但是，我不是 OSX 动态库方面的专家，我想知道我的方法和结论是否正确。此外，我愿意接受任何解决此问题的建议。

谢谢，

```
Error : .onLoad failed in loadNamespace() for 'Rmpi', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/home/jonathan.lisic/R/x86_64-apple-darwin12.2.0-library/2.15/Rmpi/libs/x86_64/Rmpi.so':
  dlopen(/home/jonathan.lisic/R/x86_64-apple-darwin12.2.0-library/2.15/Rmpi/libs/x86_64/Rmpi.so, 6): Symbol not found: _MPI_Comm_dup
  Referenced from: /opt/local/lib/libmpich.3.3.dylib
  Expected in: flat namespace
 in /opt/local/lib/libmpich.3.3.dylib
Error: package/namespace load failed for Rmpi

jonathan.lisic@server:/opt/local$ otool -L /home/jonathan.lisic/R/x86_64-apple-darwin12.2.0-library/2.15/Rmpi/libs/x86_64/Rmpi.so
/home/jonathan.lisic/R/x86_64-apple-darwin12.2.0-library/2.15/Rmpi/libs/x86_64/Rmpi.so:
        Rmpi.so (compatibility version 0.0.0, current version 0.0.0)
        /opt/local/lib/libmpich.3.3.dylib (compatibility version 0.0.0, current version 3.0.0)
        /opt/local/lib/libmpl.1.dylib (compatibility version 3.0.0, current version 3.0.0)
        /opt/local/lib/libopa.1.dylib (compatibility version 2.0.0, current version 2.0.0)
        /opt/local/lib/R/lib/x86_64/libR.dylib (compatibility version 2.15.0, current version 2.15.1)
        /usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1669.0.0)
        /opt/local/lib/gcc45/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)

jonathan.lisic@server:/opt/local/lib$ otool -L libmpich.dylib
libmpich.dylib:
        /opt/local/lib/libmpich.3.3.dylib (compatibility version 0.0.0, current version 3.0.0)
        /opt/local/lib/gcc43/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)

jonathan.lisic@server:/opt/local/lib$ otool -L libmpich.3.3.dylib
libmpich.3.3.dylib:
        /opt/local/lib/libmpich.3.3.dylib (compatibility version 0.0.0, current version 3.0.0)
        /opt/local/lib/gcc43/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)

jonathan.lisic@server:/opt/local/lib$ nm  -u libmpich.3.3.dylib | egrep dup
_MPI_Comm_dup
_MPL_trstrdup
_dup2
_strdup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:43:08.730

您正在寻找的符号（或者至少是 Rmpi​​ 正在寻找的符号）存在于`libpmpich.*.dylib`. 请注意该`p`名称中的 。为什么这个额外的库存在的细节大多是历史和无趣的，但它确实存在。它包含了库中几乎所有的`MPI_`符号，同时`libmpich.*.dylib`包含了库中的所有`PMPI_`符号以及 MPI 库的所有实际实现代码。

我自己从未使用过 Rmpi​​，但也许有一种方法可以将其配置为在不同的库中查找或将更多库添加到搜索集中？IIRC，Open MPI 没有将这两个库分开，这可能是 Rmpi​​ 开发人员假设单一库的来源。

# version-control - Windows 上的 RCS - rcsmerge 总是失败

> ID：12748493
> 
> 赞同：2
> 
> 时间：2012-10-05T14:31:36.353
> 
> 标签：version-control, rcs, three-way-merge

我正在使用来自[Purdue RCS 官方主页](http://www.cs.purdue.edu/homes/trinkle/RCS/)的适用于 Windows 的 GNU RCS 5.7 版。如果我使用 rcsmerge(1) 命令合并来自不同分支的更改，则会收到错误消息：

```
diff3.exe: subsidiary program failed 
```

每次。有谁知道为什么会发生这种情况（我至少在 10 年前就看到过这个问题）以及解决方法是什么？GNU 当前的 RCS 版本 5.8.1 是否修复了它？如果是这样，任何人都可以将我指向此版本的 Windows 二进制文件吗？

更新 2012-10-22：我已将 Purdue 发行版提供的 diifutils(cmp, diff, diff3, merge) 切换为当前 GNU diffutils 2.8.7 的等价物。这消除了`subsidiary program failed`错误，但现在`The filename, directory name, or volume label syntax is incorrect.`每次调用 rcsmerge 或 diff3 时正好给了我两次。这似乎是一条 Windows 错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-06T20:25:58.667

[Eli Zaretskii 在http://sourceforge.net/projects/ezwinports/files](http://sourceforge.net/projects/ezwinports/files)上将 RCS 的 Windows 二进制文件作为其 ezwinports 项目的一部分。

那里的自述文件描述了您描述的问题的原因。

> RCS-5.7-1：这是官方 RCS v5.7.13 源到 MS-Windows 的端口。我做这个端口是因为现有的 GnuWin32 端口被破坏：任何需要将另一个程序作为子进程（例如 rcsdiff）运行的 RCS 命令都会崩溃或产生错误消息，因为 Windows 版本的 spawn 中存在未处理的问题*库函数。

如果我没记错的话，不幸的是，该端口缺少 Purdue 版本的“伪符号链接”功能。（快速定义，以便自包含：伪符号链接是一个名为“RCS”的文本文件，与工作文件位于同一目录中，其内容是目录路径，将其视为指向包含主文件的目录。链接允许多个“工作副本”共享一个“存储库”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:48:04.447

`diff3.exe`看起来好像您缺少`%PATH%`. 尽管 Purdue 软件包似乎提供了 diff3 的源代码，但它们并没有为您提供 Win32 二进制文件。

如果您已经`diff3.exe`从其他来源安装，请更新您的路径以包含其安装位置，或者（不太理想）将`diff3.exe`二进制文件移动到路径中已命名的文件夹中。

如果您还没有安装它，您可能可以从 SourceForge 的（古老的）[UnxUtils 项目](http://unxutils.sourceforge.net/)或[DiffUtils 项目](http://gnuwin32.sourceforge.net/packages/diffutils.htm)中获得它。

# actionscript-3 - Flex 4.6 移动应用程序中的可靠持久性

> ID：12748496
> 
> 赞同：0
> 
> 时间：2012-10-05T14:31:40.140
> 
> 标签：actionscript-3, variables, apache-flex, flex4.6, persist

我注意到可绑定的公共变量在视图之间不可用，在整个应用程序中查看一组中心变量的最佳实践是什么。

提前致谢并感谢您的帮助。克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:51:27.940

偶然遇到这个问题，也许我有答案。即使问题本身是几个月前的问题。

我通过使用模型来解决您的问题。使用 MVC 模式，无论在哪里，您都可以拥有始终可供应用程序使用的变量“存储库”。在您掌握或对模式感到满意后，您可以根据您的项目规范灵活地选择您拥有的模型数量。原谅简单，因为您可以而且应该很好地规划您的结构以适应您的项目。

举个简单的例子：

. 假设您有 2 个视图：“v1”和“v2”

. 我们创建了一个单例模型——我们称之为“myNinjaModel.as”：

```
package modelo
{
// your imports here

[Bindable]
public class myNinjaModel

{

private static const _instance:myNinjaModel = new myNinjaModel( SingletonLock );

public static function get instance():myNinjaModel
{
return _instance;
}

public function myNinjaModel( lock:Class )
{
// Verify that the lock is the correct class reference.
if ( lock != SingletonLock )
{

throw new Error( "Invalid Singleton access.  Use Model.instance." );

}

}

// you can add some function here that you can access from anywhere in your application
// but be aware of data/logic separation, etc.

// also some nice variables here

var myNameAnywhere:String = "lawrence waterhouse";

} // end class
} // end package

class SingletonLock
{
} // end class 
```

. 如果您想在任何视图中使用此模型中的函数或变量：

```
import modelo.myNinjaModel;

[Bindable]
private var smodelo:AModel=AModel.instance; 
```

. 如果要访问变量，请执行以下操作：

```
trace(smodelo.myNameAnywhere); // this will output lawrence waterhouse 
```

对不起，如果我打错了什么，我是认真做的。

希望这对您有所帮助，尽管我认为您必须解决的问题不止于此。:-)

您可以在此处阅读有关 MVC 的一些信息（理论）：

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

# php - 在 PHP 中输 出 Mysql 数组

> ID：12748499
> 
> 赞同：6
> 
> 时间：2012-10-05T14:31:50.547
> 
> 标签：php, mysql

我正在为我们公司创建一个报价系统，但遇到了一个小问题。这是纲要；我有两张表，一张名为数据，另一张名为 zip。客户输入他们的性别、年龄、是否使用烟草、邮政编码和州。

**这是数据表：**

![图片](../Images/285fc870857669fae67196490b290d1c.png)

**这是拉链表：**

![图片](../Images/1afe59166538331a8f897d318de4d62d.png)

我已经根据邮政编码查询了要加入的两个表。这是我正在使用的查询：

```
SELECT data.Monthly_Rate, zips.ZIP_LOOKUP_CODE AS Expr1, zips.State, zips.County, zips.City, zips.Zipcode
FROM data INNER JOIN
zips ON data.ZIP_LOOKUP_CODE = zips.ZIP_LOOKUP_CODE
WHERE (zips.Zipcode = '$zipcode') AND 
(data.Company_Old LIKE '%Blue Cross%') AND
(data.Plan IN ('A','F','F (High)','G','N')) AND 
(data.Gender = '$gender') AND 
(data.Age = '$age') AND 
(data.Tobacco = '$tobacco') AND 
(data.State = '$state'); 
```

现在我要做的是在表格中的 php 中输出它。我遇到的问题是“计划”列下有多个计划字母。我只想返回 5 个不同的，但问题是有些公司不提供所有 5 个计划，所以在这种情况下，当我输出数组时，某个计划的费率将排在错误的列中在表中。

基本上，我不知道如何正确对齐数据应在的特定列中。在计划 A、F 和 N 仅适用于公司的情况下，它将填充前三个字段，并且计划 N 的费率不会在计划 N 列中排列。

我需要弄清楚如何将给定的费率与计划信相关联，并在表格中正确输出。在下面的例子中，计划 A 的费率为 111.40 美元，计划 F 的费率为 135.37 美元，而计划 N 的费率为 96.52 美元。如您所见，Plan N 费率未正确对齐。我该如何解决这个问题？

**表输出：**

![图片](../Images/a9a7df38df306fef2161e79c105c562c.png)

这就是我用来在 PHP 中输​​出数组的方法：

```
while($row = mysql_fetch_array($PlanRates))
{   
$Plan = "$" . number_format($row['Monthly_Rate'], 2, '.', '');
echo "<td align='center'>$Plan</td>";           
}
echo "</tr>";
mysql_free_result($PlanRates); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:46:51.547

在您的 SQL 查询中检索计划

```
SELECT data.Monthly_Rate, data.Plan ... 
```

然后使用下面的代码

```
while($row = mysql_fetch_array($PlanRates)) {   
  $Plans[$row['Plan']] = "$" . number_format($row['Monthly_Rate'], 2, '.', '');
}
echo "<td align='center'>".(isset($Plans['A']) ? $Plans['A'] : '')."</td>"; 
echo "<td align='center'>".(isset($Plans['F']) ? $Plans['F'] : '')."</td>"; 
echo "<td align='center'>".(isset($Plans['F (High)']) ? $Plans['F (High)'] : '')."</td>"; 
echo "<td align='center'>".(isset($Plans['G']) ? $Plans['G'] : '')."</td>"; 
echo "<td align='center'>".(isset($Plans['N']) ? $Plans['N'] : '')."</td>"; 
```

不过，您不应该以这种方式混合您的数据处理逻辑和您的演示文稿。您应该使用一个函数来运行查询并将数据作为数组返回。然后遍历 html 标记中的数组。

# android - 无法以编程方式重现布局

> ID：12748500
> 
> 赞同：1
> 
> 时间：2012-10-05T14:31:52.777
> 
> 标签：android, android-layout

我正在开发一个 Android 3.0 平板电脑应用程序。我正在尝试重现此布局：

```
 <LinearLayout
        android:weightSum="1"
        android:layout_width="fill_parent"
        android:layout_height="60dip"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/textView1"
            android:layout_weight=".1"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="1" />

        <TextView
            android:id="@+id/textView2"
            android:layout_weight=".6"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="Defecto 11" />

        <LinearLayout
            android:gravity="center"
            android:layout_weight=".05"
            android:layout_width="0dip"
            android:layout_height="fill_parent" >

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />
        </LinearLayout>

        <LinearLayout
            android:gravity="center"
            android:layout_weight=".05"
            android:layout_width="0dip"
            android:layout_height="fill_parent" >

        <CheckBox
            android:id="@+id/checkBox2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />
        </LinearLayout>

        <LinearLayout
            android:gravity="center"
            android:layout_weight=".05"
            android:layout_width="0dip"
            android:layout_height="fill_parent" >

        <CheckBox
            android:id="@+id/checkBox3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />
        </LinearLayout>

        <LinearLayout
            android:gravity="center"
            android:layout_weight=".05"
            android:layout_width="0dip"
            android:layout_height="fill_parent" >

        <CheckBox
            android:id="@+id/checkBox4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />

        </LinearLayout>

        <Button
            android:id="@+id/button1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".1"
            android:text="Button" />

    </LinearLayout> 
```

以编程方式：

```
 LinearLayout layout = new LinearLayout(context);
    LayoutParams parentParams = 
            new LayoutParams(LayoutParams.FILL_PARENT, 60);
    //parentParams.weight = 1;
    layout.setOrientation(LinearLayout.HORIZONTAL);
    layout.setLayoutParams(parentParams);

    // Parámetros para todos los EditText dentro de la tabla.
    LayoutParams params = new LayoutParams(0, LayoutParams.FILL_PARENT);

    // La primera columna es el número del defecto
    TextView textView = new TextView(context);
    params.weight = .1f;
    textView.setLayoutParams(params);
    textView.setGravity(Gravity.CENTER);
    textView.setText(Integer.toString(position));
    layout.addView(textView);

    // La segunda columna es la descripción del defecto.
    params.weight = .6f;
    textView = new TextView(context);
    textView.setLayoutParams(params);
    textView.setGravity(Gravity.CENTER);
    textView.setText(eDefect.getDescription());
    layout.addView(textView);

    LinearLayout chkLayout = new LinearLayout(context);
    LayoutParams chkParams = 
            new LayoutParams(0, LayoutParams.FILL_PARENT);
    chkParams.weight = .05f;
    chkParams.gravity = Gravity.CENTER;
    chkLayout.setLayoutParams(chkParams);

    params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.CENTER;
    String eDefectPos = Integer.toString(position);

    // Columna CRS
    String tag = eDefectPos + "_CRS";
    CheckBox chkBox = new CheckBox(context);
    chkBox.setLayoutParams(params);
    chkBox.setTag(tag);
    chkBox.setOnClickListener(checkListener);
    chkLayout.addView(chkBox);
    layout.addView(chkLayout);

    chkLayout = new LinearLayout(context);
    chkLayout.setLayoutParams(chkParams);

    // Columna CRF
    tag = eDefectPos + "_CRF";
    chkBox = new CheckBox(context);
    chkBox.setLayoutParams(params);
    chkBox.setTag(tag);
    chkBox.setOnClickListener(checkListener);
    chkLayout.addView(chkBox);
    layout.addView(chkLayout);

    chkLayout = new LinearLayout(context);
    chkLayout.setLayoutParams(chkParams);

    // Columna MA
    tag = eDefectPos + "_MA";
    chkBox = new CheckBox(context);
    chkBox.setLayoutParams(params);
    chkBox.setTag(tag);
    chkBox.setOnClickListener(checkListener);
    chkLayout.addView(chkBox);
    layout.addView(chkLayout);

    chkLayout = new LinearLayout(context);
    chkLayout.setLayoutParams(chkParams);

    // Columna MI
    tag = eDefectPos + "_MI";
    chkBox = new CheckBox(context);
    chkBox.setLayoutParams(params);
    chkBox.setTag(tag);
    chkBox.setOnClickListener(checkListener);
    chkLayout.addView(chkBox);
    layout.addView(chkLayout);

    // Boton tomar fotos
    params = new LayoutParams(0, LayoutParams.WRAP_CONTENT);
    params.weight = 0.1f;
    tag = eDefectPos;
    Button btnTakePhoto = new Button(mActivity);
    btnTakePhoto.setLayoutParams(params);
    btnTakePhoto.setTag(tag);
    btnTakePhoto.setText(getString(R.string.btn_take_photo));
    btnTakePhoto.setOnClickListener(takePhotoListener);
    layout.addView(btnTakePhoto);

    mLayout.addView(layout, mCurrentDefectTableIndex); 
```

但他们不喜欢平等。

这与 XML：

![在此处输入图像描述](../Images/80758b834f8c219077d48f2b164bf899.png)

这以编程方式：

![在此处输入图像描述](../Images/f0c32c1ead8ef8ec6dcfc9d241f10e91.png)

一切都向右移动了。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:42:06.797

您不想为不同的视图重复使用对 LayoutParams 的引用。如果要创建一个“基础”参数对象以供重复使用，则必须使用带有 LayoutParams 的 LayoutParams 构造函数进行新引用。像这样：

```
LayoutParams baseParams = new LayoutParams(0, LayoutParams.FILL_PARENT);

// La primera columna es el número del defecto
TextView textView = new TextView(context);
LayoutParams params1 = new LayoutParams(baseParams);
params1.weight = .1f;
textView.setLayoutParams(params1);
textView.setGravity(Gravity.CENTER);
textView.setText(Integer.toString(position));
layout.addView(textView);

// La segunda columna es la descripción del defecto.
LayoutParams params2 = new LayoutParams(baseParams);
params2.weight = .6f;
textView = new TextView(context);
textView.setLayoutParams(params2);
textView.setGravity(Gravity.CENTER);
textView.setText(eDefect.getDescription());
layout.addView(textView); 
```

# web-applications - 在我的可安装应用程序中，我应该将我的 couchDB 视图放在哪里？

> ID：12748501
> 
> 赞同：1
> 
> 时间：2012-10-05T14:31:58.307
> 
> 标签：web-applications, views, couchdb

所以，我正在考虑使用 couchDB 作为我下一个项目的数据库。我想构建一个可安装的 webapp：安装、配置、运行它——它可以工作。我不想建立一个 couchapp，我打算用`Python/Ruby/Node.js`.

现在，手头有一个 MySQL 数据库，我将我的查询直接放入代码中。但我只是不知道应该把我的 couchDB 视图放在哪里。我应该将它们放在公共 couchDB 上并在安装时复制，还是应该设置一些代码在第一次运行时插入必要的视图，或者 wut？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:28:10.913

我会在我的安装文件夹中保留一个 JSON 文件，然后将其插入到 couchdb 中，有点像 node.js`connect-couchdb`模块所做的：[https ://github.com/tdebarochez/connect-couchdb/tree/master/lib](https://github.com/tdebarochez/connect-couchdb/tree/master/lib)

# excel - Excel VBA - 到 SQL Server 2008 的连接字符串

> ID：12748506
> 
> 赞同：0
> 
> 时间：2012-10-05T14:32:12.737
> 
> 标签：excel, vba

我正在尝试使用连接字符串 ( `ADODB.Connection`) 从 Excel VBA 连接到 SQL Server 2008。

```
"Driver={SQL Native Client};Data Source=" & Range("Svr").Value & ";Database=" & Range("DB").Value & ";Trusted_Connection=yes" 
```

当我尝试打开连接时出现此错误

> *错误 (-2147467259) 描述 - [Microsoft][ODBC Driver Manager] 数据源名称太长*

有人可以给我一个样品吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:49:46.470

我认为您的连接字符串中的反斜杠导致您的问题，尝试像这样逃避它：

```
xxxxxxxxxxxx.xxx.xx.xxxxxxxx.xxx\\xxxx01xxx 
```

此外，在每个值周围加上引号也不会受到伤害：

```
"Driver={SQL Native Client};Data Source='" & Range("Svr").Value & "';Database='" & Range("DB").Value & "';Trusted_Connection=yes" 
```

基于[这个答案](https://stackoverflow.com/a/5998110/969613)。

# ruby-on-rails - 如何在嵌套资源中设置类似于“新”的控制器操作

> ID：12748508
> 
> 赞同：1
> 
> 时间：2012-10-05T14:32:13.893
> 
> 标签：ruby-on-rails, nested-resources

我在 routes.db 中定义了一个嵌套资源：

```
resources :accounts do
  resources :transactions do 
end 
```

我想创建一个类似于“new”的路由，但操作是 new_transfer，这将允许我处理一种特殊类型的新事务：

```
new_account_transaction GET    /accounts/:account_id/transactions/new(.:format)      transactions#new 
```

我试图定义包括方法定义的资源：

```
resources :accounts do
    resources :transactions
    member do 
      get 'new_transfer'
    end
end 
```

或者

```
resources :accounts do
   resources :transactions do 
      member do 
         get 'new_transfer'
      end      
   end
end 
```

但我得到：

```
new_transfer_account GET    /accounts/:id/new_transfer(.:format)                  accounts#new_transfer 
```

或者

```
new_transfer_account_transaction GET    /accounts/:account_id/transactions/:id/new_transfer(.:format) transactions#new_transfer 
```

第二个很接近，但我认为它确实应该是 transactions/new_transfer。如果这是我能做的最好的，那么我就找不到满足创建新链接的路径。

任何帮助，将不胜感激。

还尝试添加特定匹配。这条路线的 link_to 是什么？

```
match '/accounts/:account_id/transactions/new_transfer', to: 'transactions#new_transfer'

/accounts/:account_id/transactions/new_transfer(.:format) transactions#new_transfer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:46:15.610

您是否尝试过路线的匹配方法？

他们[在 Rails Guides 上](http://guides.rubyonrails.org/routing.html)的例子：

```
match "/patients/:id" => "patients#show" 
```

希望这可以帮助！

# ravendb - 转移 RavenDB

> ID：12748510
> 
> 赞同：0
> 
> 时间：2012-10-05T14:32:20.857
> 
> 标签：ravendb

我正在尝试将 RavenDB 中的数据库传输到远程服务器，在那里我将进行一些测试。

我使用的是 960 版本。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:44:30.100

您可以使用 raven Web 界面中任务菜单下的导入/导出功能。

或者，如果您的命令行说服力查找[Raven Smuggler](http://ravendb.net/docs/server/administration/backup-restore)。

# asp.net - 使用 jqGrid 4.4.0 依赖选择下拉菜单，根据其他列值动态从 dataUrl 加载第二个下拉

> ID：12748511
> 
> 赞同：0
> 
> 时间：2012-10-05T14:32:25.537
> 
> 标签：asp.net, asp.net-mvc-3, jqgrid

在网格中，我有一个国家下拉列表和一个省/州下拉列表。当用户选择“国家/地区”下拉列表时，我需要获取列表以在其行中加载当前所选国家/地区的省/州。

我使用 dataUrl 从服务器（使用 MVC 3、.Net）获取我的列表。我在网格的列中编写了代码来定义 dataInit 编辑选项来更改 dataUrl 以包含我当前的国家 ID。但是，似乎在 dataInit 事件发生之前调用了 dataUrl。

更复杂的是，我创建了一个基本网格视图，它在整个应用程序中重复使用。这是必需的，因为我们在应用程序中有 30-60 个不同的网格。因此，每个网格的用户只定义列、它们的类型、编辑类型、格式等。基本网格视图只是动态生成 jqgrid（它使用 Vs.Net 的 MVC 3 框架中的 RAZOR 视图引擎编写）。

在我定义为具有依赖列的选择类型的每一列的剃须刀代码（basegrid）中，我为 dataInit 函数生成代码以获取该值并更新列定义的 dataUrl。

我的结论：

看来我的省/州列的 dataInit 方法是在调用 dataUrl 之后调用的（即在我调用服务器获取列表之后）。如果这是 dataInit 的正常行为，我需要一个不同的列事件方法。

要求：

1）我不能使用标准网格“BeforeEditCell”事件，因为我可能有多个选择，这可能取决于其他列。同样，我的 basegrid 的用户将在运行时确定依赖关系。（剃刀代码遍历每一列并生成网格语法）。

2) 我希望在调用 url 进行加载之前修改 dataUrl。我不想执行加载列表的调用

3) 我想避免将列表加载到 javascript 数组中。所以必须使用dataUrl。

这是声明的内容的片段。我删除了其他列，因为它们遵循更简单的设置，但在脚本中类似。

```
jQuery("#gridList").jqGrid({
    url: '/Home/HonourAwardGridData',
    datatype: "json",
    colNames: [
    'Country',
    'Province / State',
        ],
    colModel: [
{
name: 'Country',
index: 'Country',
width: 90,
sortable: true,
editable: true,
editrules: {
        edithidden: false,
required: false    },
        hidden: false,
                    edittype: 'select',
                    editoptions: {
                    dataEvents: [
                                 { type: 'change', fn: function(e) { $("#gridList").jqGrid("saveCell", saveRow, saveCol); } },
                                ],
                    dataUrl: '/Common/GetCountryValues?pageId=HonourAward',
                    buildSelect: BuildLookupEntitySelect
                    },
},
{
name: 'ProvinceState',
index: 'ProvinceState',
width: 90,
sortable: true,
editable: true,
editrules: {
        edithidden: false,
required: false    },
        hidden: false,
                    edittype: 'select',
                    editoptions: {
                    dataEvents: [
                                 { type: 'change', fn: function(e) { $("#gridList").jqGrid("saveCell", saveRow, saveCol); } },
                                ],
                    dataUrl: '/Common/GetProvinceValues?pageId=HonourAward&countryId={0}',
                        dataInit: function(elem) {
                                      var myGrid = $('#gridList');
                                      var selRowId = mygrid.jqGrid('getGridParam', 'selrow');
                                      var depColName = 'Country';
                                      var depColValue = mygrid.jqGrid('getCell', selRowId, depColName);
                                      var newDataUrl = '/Common/GetProvinceValues?pageId=HonourAward&countryId={0}';
                                      newDataUrl = newDataUrl.replace("{0}", depColValue);

                                      $("#grid").jqGrid('setColProp', depColName, {dataUrl: newDataUrl}); 
                                  },
                    buildSelect: BuildLookupEntitySelect
                    },
}
    ],
    rowNum: 200,
        cellEdit: true,
        cellSubmit: 'remote',
        cellurl: '/Home/EditHonourAwardGridData',
    multiselect: true,
    grouping: false,
    jsonReader: {
        root: "rows", //array containing actual data
        page: "page", //current page
        total: "total", //total pages for the query
        records: "records", //total number of records
        repeatitems: false,
        id: 'RecordId' //index of the column with the PK in it
    },
    toppager: true,
    shrinkToFit: false,
    rownumbers: false,
    autowidth: true,
    height: 'auto',
    autoencode: true,
    altRows : true,
    pager: '#gridPager',
    viewrecords: true,
    sortable: false, 
    afterEditCell: function (id, name, val, IRow, ICol) { 
            saveRow = IRow; 
            saveCol = ICol; 
        }
});
jQuery("#gridList").jqGrid('navGrid', '#gridPager', { search: false,
                                                      edit: true,
                                                      add: false,
                                                      del: false,
                                                      editfunc: function(id) { 
                                                            var row = jQuery("#gridList").jqGrid('getRowData', id);
                                                            var dialogTitle = 'Honours and Career Awards' + ' - ' + row['Name'];
                                                            LoadReportUpdateView('HonourAwardUpdate', dialogTitle, row.RecordId);
                                                      },
                                                      addfunc: function() { 
                                                            LoadReportAddView('HonourAwardAdd', 'Honours and Career Awards' + ' - Add New');
                                                      }
                                                    })
                          .navButtonAdd('#gridPager', {
                              caption: "Columns",
                              onClickButton: function () {
                                  ChooseColumns("#gridList", 'HonourAward', 'Select columns for Honours and Career Awards grid');
                              },
                              position: "last"
                          });
}); 
```

提前感谢您提供的任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:57:51.870

看了jqGrid代码，当使用dataUrl填充选择列时，代码总是会先调用url进行加载。如果成功，则绑定其事件。如果已定义，则调用 dataInit 然后绑定所有声明的“dataEvents”。因此，在调用 dataUrl 之前不可能更改它。

如果 jqGrid 在调用 url 之前执行 'dataInit' 会很好，但这可能会导致编辑敲大字。

我的解决方法是一个两步过程。

1) 声明的初始 dataUrl 被定义为调用参数值为 -1 的服务器（我们很快返回一个空选择。

2）在dataInit方法中，我手动调用带有动态值（国家的当前值）的'修改'url，然后调用buildSelect定义的方法将json结果转换为选择列表。（注意：当你看到'@'它的 C# 代码注入的 RAZOR 语法时）

```
var myGrid = $('#gridList');
var selRowId = myGrid.jqGrid('getGridParam', 'selrow');
var depColName = '@column.PrimaryDependentColumnName';
var depColValue = myGrid.jqGrid('getCell', selRowId, depColName);
var newDataUrl = '@html.Raw(@column.SelectLoaderUrl)';
newDataUrl = newDataUrl.replace("-1", depColValue);

$.get(newDataUrl, function(data) {
    var values = BuildLookupEntitySelectJSON(data);
    var htmlValue = $(values).html();
    $(elem).empty();
    $(elem).append(htmlValue);
}); 
```

我希望在调用之前使用“preloadUrl”事件来更改 Url，因为它会使事情变得更容易和更高效。

再见！

吉姆

# jquery - 无法正常工作的下拉菜单

> ID：12748521
> 
> 赞同：0
> 
> 时间：2012-10-05T14:33:12.337
> 
> 标签：jquery, html, css

现在我正在使用以下源插件做下拉菜单这些所有插件都用于一个图像滑动现在我无法删除它这个 easing-1.3.pack.js ， easing-compatibility.1.2.pack.js ， coda-slider .1.1.1.pack.js ，根据我的情况，此下拉菜单无法正常工作，并且当我将鼠标悬停在显示链接不断下拉和向上时，它也显示隐藏时间很短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:55:48.863

这至少可以为您指明正确的方向...

[http://jsfiddle.net/Mutmatt/kcNXJ/11/](http://jsfiddle.net/Mutmatt/kcNXJ/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:56:40.690

一切正常尝试使用 show() 和 hide() 函数而不是幻灯片，看看当你滑动时发生了什么问题这需要一些时间，并且在向下滑动后需要一些时间向上滑动:] 如果你进入和离开区域几次- 上下滑动执行几次

# asp.net - 将用户重定向到 Page_Error 上的另一个页面

> ID：12748522
> 
> 赞同：3
> 
> 时间：2012-10-05T14:33:27.033
> 
> 标签：asp.net, redirect, file-upload

> **可能重复：**
> [超过最大请求长度，错误页面上未重定向](https://stackoverflow.com/questions/6773346/maximum-request-length-exceeded-not-redirect-on-error-page)

当他上传超过最大大小的文件时，我尝试将用户重定向到某个错误页面。

我在 Web.config 中添加了以下行以将文件限制为 10MB：

```
<httpRuntime maxRequestLength="10240" executionTimeout="360" /> 
```

在我的页面上有一个带有标准 ASP 文件上传控件和提交按钮的简单表单。我还在页面级别定义了重定向（我也在 Global.asax Application_Error 处理中尝试过，但结果是相同的）：

```
protected void Page_Error(object sender, EventArgs e)
{
    if (HttpContext.Current.Error is HttpException)
    {
        if ((HttpContext.Current.Error as HttpException).ErrorCode==-2147467259)
        {
            Server.ClearError();
            Response.Redirect("~/Error.aspx");
        }
    }
} 
```

我也试过`Server.Transfer()`- 不工作。

当我尝试上传大于 10 MB 的文件时，我可以调试并看到代码`Page_Error`完全执行了两次：即使使用`Server.ClearError()`，但页面未重定向到`Error.aspx`. 相反，会出现标准的、丑陋的“连接已重置”错误页面。

如果错误是另一种类型，则此代码可以正常工作，例如除以 0 设置 on `Page_Load`。你能告诉我我在这里做错了什么吗？

顺便提一句。我将 Visual Web Developer 2010 Express 与 .NET 4.0、WindowsXP 一起使用。测试内置到 VWD IIS 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:39:58.980

您可能想尝试在 web.config 文件中定义通用错误页面，而不是通过代码处理它：

```
<customErrors defaultRedirect="/Path/to/myErrorPage.aspx" mode="On" /> 
```

然后，您还可以为每个 http 状态代码定义特定页面，例如：

```
<customErrors defaultRedirect="/error/generic.aspx" mode="On">
    <error statusCode="404" redirect="/error/filenotfound.aspx" />
    <error statusCode="500" redirect="/error/server.html" />
</customErrors> 
```

这是一篇不错的操作方法文章：http: [//support.microsoft.com/kb/306355](http://support.microsoft.com/kb/306355)

**编辑：**我发布了一个可疑的重复项。在您问题的评论中查看。它看起来和你的很相似。也许 asp.net 在处理这些类型的错误时有问题..

**编辑2：**另外-我相信您要处理的错误是[http 413](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.14)：

```
<error statusCode="413" redirect="/error/upload.aspx"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:12:39.087

**答：**
好的，所以我找到的答案如下：不能通过“正常”异常处理来完成。以下代码，在提到的链接之一中找到，放在 global.asax 中，是一些解决方法：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    System.Web.Configuration.HttpRuntimeSection runTime = (System.Web.Configuration.HttpRuntimeSection)System.Web.Configuration.WebConfigurationManager.GetSection("system.web/httpRuntime");

    //Approx 100 Kb(for page content) size has been deducted because the maxRequestLength proprty is the page size, not only the file upload size
    int maxRequestLength = (runTime.MaxRequestLength - 100) * 1024;

    //This code is used to check the request length of the page and if the request length is greater than

    //MaxRequestLength then retrun to the same page with extra query string value action=exception

    HttpContext context = ((HttpApplication)sender).Context;
    if (context.Request.ContentLength > maxRequestLength)
    {
        IServiceProvider provider = (IServiceProvider)context;
        HttpWorkerRequest workerRequest = (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));

        // Check if body contains data
        if (workerRequest.HasEntityBody())
        {
            // get the total body length
            int requestLength = workerRequest.GetTotalEntityBodyLength();

            // Get the initial bytes loaded
            int initialBytes = 0;

            if (workerRequest.GetPreloadedEntityBody() != null)
                initialBytes = workerRequest.GetPreloadedEntityBody().Length;

            if (!workerRequest.IsEntireEntityBodyIsPreloaded())
            {
                byte[] buffer = new byte[512000];

                // Set the received bytes to initial bytes before start reading
                int receivedBytes = initialBytes;

                while (requestLength - receivedBytes >= initialBytes)
                {
                    // Read another set of bytes
                    initialBytes = workerRequest.ReadEntityBody(buffer, buffer.Length);

                    // Update the received bytes
                    receivedBytes += initialBytes;
                }
                initialBytes = workerRequest.ReadEntityBody(buffer, requestLength - receivedBytes);
            }
        }

        context.Server.ClearError();  //otherwise redirect will not work as expected
        // Redirect the user
        context.Response.Redirect("~/Error.aspx");
    }
} 
```

# django - Django + Pinax 打造回合制网页游戏

> ID：12748526
> 
> 赞同：0
> 
> 时间：2012-10-05T14:33:53.010
> 
> 标签：django

我心中有一个目标——那就是创建一个回合制网页游戏。基本上游戏可以容纳 10 名玩家，每个人每天都输入决策，游戏会每天刷新（并进行所有计算）并进行下一轮。

我开始研究 Django 来构建代码，并可能使用 Pinax 的一些可重用功能（用户注册、twitter 大喊等......）

你认为我的方向是对的吗，一些建议将不胜感激！

非常感谢！

# javascript - IE问题：IE + MVC3 + Fineuploader

> ID：12748531
> 
> 赞同：0
> 
> 时间：2012-10-05T14:34:20.123
> 
> 标签：javascript, jquery, asp.net-mvc-3, security

我遇到了 Internet Explorer 的问题，它是 Internet 站点的默认安全设置。

我将 MVC3 与[Fineuploader一起使用](http://Fineuploader.com)

当我尝试上传文件时，它运行 onCompleate 函数，但没有上传文件并且响应为空。

我们发现，如果将该站点添加到 Internet Explorer 中的“本地 Intranet 站点”，则一切正常。但是，如果该站点保留为应用默认设置的外部站点，则无法正常工作。

一些代码：

```
function createUploader() {
    jQuery.ajaxSettings.traditional = true;
    var uploader = new qq.FileUploaderBasic({
        //element: document.getElementById('uploadButton'), //$("#file-upload"),
        button: $("#file-uploader-basic").get(0),
        action: APPLICATION_ROOT + '/SharedWorkflow/UploadImg',
        params: {
            ImageID:        $('.imageShow').attr('data-ImageID'),
            testorderID:    $('.imageShow').attr('data-TestOrderID'),
            CaseNumber:     $('.imageShow').attr('data-CaseNumber'),
            Caption:        $('#newImgCaption').val()
        },
        debug: false,
        onSubmit: function (id, fileName) {
            if ($("#file-uploader-basic").hasClass('fired') == false) {
                $('#file-uploader-basic').addClass('fired');
                $.blockUI({
                    message: 'Uploading image...'
                });
            } else {
                alert('You are currently uploading an image.');
                return false;
            }
        },
        onComplete: function (id, fileName, responseJSON) {
            newImageName = fileName;
            debugger;
            $(".AddImage").attr('src', APPLICATION_ROOT + '/SharedWorkflow/GetImage?CaseNumber=' + responseJSON.Case.CaseNumber + '&r=' + Math.random());
            fillImageList(responseJSON.Image);
            $.growlUI('Image uploaded...', '');
            $('#file-uploader-basic').removeClass('fired');
        },
        onError: function (id, fileName, errorReason) {
            alert(errorReason);
        }
    });
} 
```

最初我认为它与 Fineuploader 组件有关，但在多次尝试使用不同的控制器后，在访问 input type='file' 的更改方法时遇到了相同类型的错误

注意：我在 ASP.NET 中有一个项目可以使用 Ajaxcontroltoolkit 中的 Fileuploader 正常工作。

# c# - WPF ComboBox 文化未应用于值

> ID：12748535
> 
> 赞同：0
> 
> 时间：2012-10-05T14:34:39.770
> 
> 标签：c#, wpf, combobox

我有一个组合框，它通过转换器绑定到双打集合，该转换器仅用于从关联属性的名称中定位集合。组合框位于属性网格编辑器的 DataTemplate 中。问题是组合框不显示当前系统文化中的值（即使用“，”作为小数分隔符，而不是“。”）。属性网格中的所有其他属性都正确显示（例如在文本框中）。

DataTemplate 看起来像这样，而 ListComboBoxValuesConverter 只返回一个双精度集合。

```
<ComboBox 
   ItemsSource="{Binding Converter={StaticResource ListComboBoxValuesConverter},
        RelativeSource={RelativeSource AncestorType={x:Type propgrid:IPropertyDataAccessor}}}"
   Text="{Binding Path=Value,
        RelativeSource={RelativeSource AncestorType={x:Type propgrid:IPropertyDataAccessor}}, 
        Mode=TwoWay,
        ValidatesOnExceptions=True, ValidatesOnDataErrors=True, NotifyOnValidationError=True}">
</ComboBox> 
```

谢谢

编辑：

我想出的解决方案是为组合框设置项目模板并使用转换器将值作为格式正确的字符串返回。感觉这应该是不必要的，但你去吧！

```
<ComboBox.ItemTemplate>
   <DataTemplate>
       <Label Content="{Binding Converter={StaticResource FloatValueCultureConverter}, ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}}"/>
   </DataTemplate>
</ComboBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:11:38.637

也许问题可能出在转换器上，尝试使用作为参数传递给转换器的 CultureInfo 返回 toString（从 double 到 string 的转换器）：

```
return someDouble.ToString(culture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:43:37.870

您需要将 ComboBox 或任何包含元素上的 Language 属性设置为当前区域性的 ietf-Tag。如果要尊重用户区域设置的自定义，则必须将绑定的 ConverterCulture 设置为 currentuiculture。[您可以在 WPF 中的本地化值格式中](http://wpfglue.wordpress.com/2010/01/14/localized-value-formatting-in-wpf/)找到有关此主题的详细信息。

# ios - UIActionSheet 中的黑色 UIPickerView

> ID：12748536
> 
> 赞同：3
> 
> 时间：2012-10-05T14:34:40.920
> 
> 标签：ios, uipickerview, uiactionsheet

我正在尝试在 UIActionSheet 中添加 UIPicker 视图！选择器的委托和数据源设置正确！（我在没有操作表的情况下单独测试了它）但是当操作表显示在视图中时，pickerview 是可怕的黑框！我搜索了问题，我听说 UIPickerView 的数据源和委托设置不正确！我认为选择器视图不会调用它的方法，当它在一个UIActionsheet内浮现！所以我强迫选择器重新加载其所有组件将操作表

**编辑**：我进行了更正，代码完美运行！

```
- (void) presentPicker{
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select some value" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Select", nil];
    actionSheet.tag = AS_VIEW_TAG;

    UIPickerView* picker = nil;
    picker = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 40, 320, 216)];
    picker.tag = 90;
    picker.dataSource = self;
    picker.delegate = self;
    [picker setShowsSelectionIndicator:YES];

    [actionSheet addSubview:picker];
    [actionSheet showInView:self.view];
    [actionSheet setFrame:CGRectMake(0, 50, 320, 380)];
}

- (void) willPresentActionSheet:(UIActionSheet *)actionSheet{
    if(actionSheet.tag == AS_VIEW_TAG){

        UIPickerView* picker = [actionSheet viewWithTag:PICKER_TAG];
        //I force reload 
        [picker reloadAllComponents];
        NSArray *subviews = [actionSheet subviews];
        [[subviews objectAtIndex:1] setFrame:CGRectMake(20, 266, 280, 46)];
        [[subviews objectAtIndex:2] setFrame:CGRectMake(20, 317, 280, 46)];
    }
} 
```

UIPicker 委托/数据源方法

```
- (NSInteger) numberOfComponentsInPickerView:(UIPickerView *)pickerView{
    if (pickerView.tag == 90) {
        return 1;
    }
    else{
        return 0;
    }

}

- (NSInteger) pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
    if(pickerView.tag == 90){
        return 20;
     }
     else{
         return 0;
     }
}

- (UIView*) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, 37)];
    label.text = [NSString stringWithFormat:@"Value %d", ];
    label.textAlignment = UITextAlignmentCenter;
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:17];
    return label;
} 
```

这是结果：

![动作表内的黑色pickerview](../Images/10484b6f4e744aba5a1d0b0192defd96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:03:49.500

我认为在操作表中添加pickerview可能会一团糟，对此有一个很好的解决方法检查这个SO[问题](https://stackoverflow.com/questions/1849873/how-do-i-make-a-uipickerview-in-a-uiactionsheet?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:27:07.283

我的一个项目也有一个 UIPicker 作为 UIActionSheet 的子视图，它工作正常。除非发生了变化，否则您无需强制重新加载它。尝试删除整个块：

```
[picker reloadAllComponents];
NSArray *subviews = [actionSheet subviews];
[[subviews objectAtIndex:1] setFrame:CGRectMake(20, 266, 280, 46)];
[[subviews objectAtIndex:2] setFrame:CGRectMake(20, 317, 280, 46)]; 
```

不确定您要对最后两行做什么，但我怀疑这可能是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:40:34.760

我做错了...

我改变了（我不知道为什么）选择器标签，然后是消息：

```
- (NSInteger) numberOfComponentsInPickerView:(UIPickerView *)pickerView; 
```

返回一个 0

所以我只需要删除：

```
 [picker setTag:PICKER_TAG] 
```

它会完美地工作！

# php - 处理从表单到 MySQL 数据库的数据，导致服务器错误

> ID：12748539
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:34:49.780
> 
> 标签：php, mysql, database, forms

我在制作 PHP 脚本时遇到了困难。此代码处理应将产品添加到数据库的表单。

我试图在我的代码中寻找可能的问题，但我完全迷失了。我尝试重写我的代码，但由于某种原因，我似乎没有任何工作。我肯定错过了一些东西。

代码如下。

```
 <form action="" method="post">
        <table width="436" border="0px">
            <tr class="even">
                <td width="132"><label for="title">title</label></td>
                <td width="333"><input type="text" size="40px" name="title" value=""  /></td>
            </tr>
            <tr class="odd">
                <td><label style=" text-align:top" for="icon_description">short description</label></td>
                <td><textarea name="icon_description" rows="2" cols="30"></textarea></td>
            </tr>
            <tr class="even">
                <td height="95"><label for="full_description">full description</label></td>
                <td><textarea name="full_description" cols="30" rows="6"></textarea></td>
            </tr>
            <tr class="odd">
                <td><label for="category">category</label></td>
                <td><select name="category" >
                    <?php
                        foreach(get_categories() as $category)
                        {
                    ?>
                        <option value="<?php echo $category['id']; ?>"> <?php echo $category['category_name']; ?> </option>
                    <?php
                        }
                    ?>
                </select></td>
            </tr>
            <tr class="even">
                <td><label for="price">price (<em>BsF</em>)</label></td><td><textarea name="price" rows="1" cols="20"></textarea></td>
            </tr>
            <tr class="odd">
                <td><label for="stock">stock</label></td><td><textarea name="stock" rows="1" cols="20"></textarea></td>
            </tr>
            <tr class="even">
                <td></td>
                <td style="margin-top:30px"><p style="text-align:left; margin-left:20px;"><input type="submit" value="Add Product" /></p></td>
            </tr>
        </table>
    </form>
</div> 
```

在同一页面上，在文档的顶部，我有这段代码来处理来自表单的数据并将其发送到将其添加到数据库的实际函数：

```
<?php
    include_once('init.php');
    include_once('store.php');

    $products = get_all_available_products();

    if( isset($_POST['title'], $_POST['icon_description'], $_POST['category'], $_POST['price'], $_POST['stock']) )
    {
        $title = $_POST['title'];
        $icon_description = $_POST['icon_description'];
        $category = $_POST['category'];
        $price = $_POST['price'];
        $stock = $_POST['stock'];

        $errors = array();

        if( empty($title) )
        {
            $errors[] = 'You need to add a title.';
        }
        else if( strlen($title) > 125 )
        {
            $errors[] = 'Title cannot be longer than 255 characters.';
        }
        if( empty($icon_description))
        {
            $errors[] = 'Short description is empty.';
        }
        if( empty($price))
        {
            $errors[] = 'You need to specify a price.';
        }
        if( empty($stock))
        {
            $errors[] = 'You need to ad stock amount.';
        }

        add_product($title, $category, $icon_description, $price, $stock);

        header('Location: products.php');
        die();
    } 
```

add_product() 函数所在的代码是：

```
include_once('init.php');

function add_product($title, $category_id, $description, $price, $stock)
{
    $title =  mysql_real_escape_string($title);
    $category_id = (int)($category_id);
    $description = mysql_real_escape_string($description);
    $price = doubleval($price);
    $stock = (int)$stock;

    $mysql_query("INSERT INTO `products` SET
                `product_name` = '{$title}',
                `product_description` = '{$description}',
                `category_id` = {$category_id},
                `price` = {$price},
                `stock` = {$stock}");
} 
```

我在数据库中显示产品的所有其他代码都可以正常工作，因此连接和配置都可以（我认为）。问题是当我尝试添加产品时，当我单击按钮提交网站时，它给了我一个服务器错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-05T15:38:50.247

如果我错了，请纠正我，但这应该是

```
 if( isset($_POST['title'] && $_POST['icon_description'] && $_POST['category'] && $_POST['price'] && $_POST['stock']) ) {
                   //....
} 
```

而不是在它们之间放置昏迷。

# bash - 高效搜索文本文件中的多个字符串

> ID：12748543
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:15.223
> 
> 标签：bash, grep, processing-efficiency

我使用**egrep**在一个非常长的文件（100 万行）中查找多个字符串的完全匹配：

```
egrep "\<string1\>|<\string2\>" my_file 
```

但是即使只找到两个字符串也需要太多时间。似乎它会沿着文件的总行查找每个字符串，即使它发现了一个事件。事实上，我知道该文件只包含每个字符串的一次出现。然后我想知道一旦发现字符串出现，如何强制 egrep 停止查找字符串并查找列表中的下一个。或者，如果有另一种方法可以有效地做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:45:48.583

有`-m`一个限制匹配数量的选项：

```
-m NUM, --max-count=NUM
     Stop reading a file after NUM matching lines. 
```

但是，您不能将它直接用于您的复杂模式，因为这样您将只获得所有子模式的 1 行。您可以做的是循环调用您的子模式`fgrep -m 1`：

```
for pat in $patterns; do
    fgrep -m 1 $pat my_file
done 
```

PS 另一种选择是像您一样使用复杂模式，并指定匹配数等于子模式数，但这会导致每个文件行的比较速度变慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T01:56:28.140

您应该如何优化搜索取决于您的 grep 实现使用的算法。egrep 的“传统”算法是将模式编译成确定性有限自动机。如果您不知道那是什么，请不要担心：重要的是编译需要一点时间，但是一旦完成，它就会非常快，而且它的速度并不取决于它正在寻找的模式的复杂性为了。事实上，一旦编译完成，egrep 实际上比 fgrep 快——这意味着 fgrep 在小文件上最快，egrep 在大文件上最快。

至少，[ef]grep 的传统实现是这样的。我认为大多数现代实现都是自适应的，并且会根据情况切换算法（例如，我认为现代 fgreps 将切换到足够大的文件的已编译 DFA 模式）。要找出最适合您的实现的方法，您确实需要尝试一些定时实验。

I can give you a few recommendations, though: First, avoid running the search more than once (e.g. running fgrep for each word), because that'll mean scanning the file multiple times. Second, don't worry about minimizing the number of strings it's searching for, because if you're in the best possible mode that won't matter anyway. Third, use @Lev's suggestion of `-m` to make it stop after it's found what it needs to (although I'm pretty sure that'll be single search for both words with `-m2`).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:38:26.110

我不确定，但也许这个更快：

```
grep -e '<pattern1>' -e '<pattern2>' -e '<pattern3>' your_file 
```

`-F`也可以加快速度，我认为你的模式不是真正的模式。另外，我认为如果您的输出是彩色的，那么 grep 就别无选择，只能查找所有模式。

# php - Google 无法重定向到我设置的 URL，OAuth 2

> ID：12748545
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:18.110
> 
> 标签：php, redirect, oauth-2.0, youtube-api

我正在尝试使用 OAuth 2.0 登录 Google。在我获得临时授权码然后​​使用它来获取之后`access_token`，Google 不会将我重定向到我在发布时设置的 URL，这是我发布的代码：

```
<form action="https://accounts.google.com/o/oauth2/token" method="post">
<input type="text" name="code" value='##code##'/>
<input type="text" name="client_id" value='##client_id##'/>
<input type="text" name="client_secret" value='##client_secret##'/>
<input type="text" name="redirect_uri" value='http://boomroom.tv/test.php'/>
<input type="text" name="grant_type" value='authorization_code'/>
<input type="submit" /></form> 
```

在我获得 JSON 中的 access_token 后，它不会将我重定向到我的 URL，而是留在页面“https://accounts.google.com/o/oauth2/token”中，我不知道为什么。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:19:17.667

There's no redirect involved in the [*exchange authorization code for an access token* step](https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse). You should use a server side POST request here, where you get the *access token* and *refresh token* as a direct response. In your example the user's browser would send such a request, but not listen for its response.

Note that your *client secret* would be accessible publicly in your website's source code.

There are multiple ways to do a server side POST request with PHP, e.g. [using cURL](http://bavotasan.com/2011/post-url-using-curl-php/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:41:27.150

如果您想在服务器端执行此操作，Jan 的响应是正确的。

如果您想在浏览器中处理客户端的事情，可以使用单独的 OAuth 2 for Web Applications 流程：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Side_Web_Applications_Flow](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Side_Web_Applications_Flow)

用于 JavaScript 的 Google APIs 客户端库可以很容易地实现这一点：

[https://code.google.com/p/google-api-javascript-client/wiki/Authentication](https://code.google.com/p/google-api-javascript-client/wiki/Authentication)

还有一个现场示例，您可以从以下位置使用/借用代码：

[http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html)

# iphone - 可以在 iPhone 或 iPad 上查看 Power View 吗？

> ID：12748546
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:19.607
> 
> 标签：iphone, ipad, reporting-services, powerview

如果没有，是否有计划在未来提供支持（使用 HTML5/Canvas 或其他技术）？这对我们来说可能是一个交易破坏者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:15:59.580

根据此处的信息：[http](http://technet.microsoft.com/en-us/library/hh213579.aspx) ://technet.microsoft.com/en-us/library/hh213579.aspx “Power View 是一个基于浏览器的 Silverlight 应用程序”，因此不幸的是它不会在 iOS 设备上本地运行。你剩下的问题我会留给微软来回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T11:55:26.477

[从这里](http://www.youtube.com/watch?feature=player_embedded&v=0vLLAdjGtrU#at=145)可以看到，基本上可以在 iOS 设备上使用 Power View（可能功能有限，请参见[这里](http://technet.microsoft.com/library/ms156511.aspx)）。但是，我不确定微软在将其 BI 工具引入移动设备的过程中的进展如何。

谁有这方面的更新？

# sql - SQL 我需要为一列提供多个案例

> ID：12748547
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:22.733
> 
> 标签：sql, sql-server-2008

我之前的问题是 -[将子字符串插入新列](https://stackoverflow.com/questions/12746573/insert-substring-into-new-column)

我有两个案例要在同一列上运行。

首先 -

```
SET [ref_id] = CASE 
WHEN CHARINDEX('-', [full_id]) = 4 
THEN SUBSTRING([full_id], 1, 3) ELSE NULL 
```

第二 -

```
SET [ref_id] = CASE 
WHEN CHARINDEX('ZZZ-', [full_id]) = 1 
THEN SUBSTRING([full_id], 5, 3) ELSE NULL 
```

我的`[full_id]`列数据格式主要是`ABC-123D2-45FG67`但其中一些是全数字或前缀`ZZZ-`

如果数据只是数字，我希望该`[ref_id]`列为 NULL。

如果数据以 I 为前缀，`ZZZ-`则跳过该部分。

如果数据不是`ZZZ-`并且以`ABC-`我想要复制的开头`ABC`（在某些情况下`AB-1234`应该是 NULL）。

我的代码工作正常，只是这两个字符串不能一起运行，当我单独运行它们时，它们会取消上一个查询的工作。

`123456`我如何才能同时运行两者并仅针对格式为和的数据以 NULLS 结束`AB-1234`

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:08:56.050

您想为此使用单个 case 语句：

```
SET [ref_id] = CASE WHEN CHARINDEX('ZZZ-', [full_id]) = 1 
                    THEN SUBSTRING([full_id], 5, 3)
                    WHEN CHARINDEX('-', [full_id]) = 4 
                    THEN SUBSTRING([full_id], 1, 3)
                    ELSE NULL
               END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:41:02.877

这不只是嵌套案例语句的一个案例（哈！）吗？

```
SET [ref_id] = CASE WHEN CHARINDEX('ZZZ-', [full_id]) = 1 THEN SUBSTRING([full_id], 5, 3) ELSE 
  (CASE WHEN CHARINDEX('-', [full_id]) = 4 THEN SUBSTRING([full_id], 1, 3) ELSE NULL end ) end 
```

编辑：删除“else null”接近尾声。认为这样更好。我没有可供我测试的服务器。

# javascript - 在 JavaScript API 中；处理 FQL 查询中返回的数组

> ID：12748550
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:34.897
> 
> 标签：javascript, arrays, facebook, facebook-fql

我正在尝试访问用户表上的 Hometown_Location 属性。它被列为数组并在响应对象中返回，但我不知道谁可以访问对象中的数据。有没有人有任何关于如何在 FQL 查询中访问非字符串属性的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:45:15.597

示例响应是：

```
{
   "id": "1234567890",
   "name": "Brandon Fisch",
   "location": {
      "id": "110970792260960",
      "name": "Los Angeles, California"
   }
} 
```

要访问您将使用的位置名称：

```
response.location.name 
```

# python - sqlite 不保存小数但在 MySQL 中工作正常

> ID：12748552
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:37.843
> 
> 标签：python, mysql, django, sqlite

> **可能重复：**
> [如何将 Python 十进制转换为 SQLite 数字？](https://stackoverflow.com/questions/6319409/how-to-convert-python-decimal-to-sqlite-numeric)

我遇到了一个问题，sqlite 没有显示不是小数点后 2 位的值，但是当我在 MySQL（工作台）上测试它时它工作正常。我没有给出错误或任何东西，只是静静地消失了。我想弄清这个巫毒的真相，这样它就不会回来咬我了。

```
MY_CHOICE = (
   (Decimal('20.00'), '20'), /#doesnt work with sqlite
   (Decimal('20.00'), '20.00'), /#doesnt work with sqlite
   (Decimal('10.50'), '10.50'), /#doesnt work with sqlite
   (Decimal('5.05'), '5.05'),  /#works with sqlite
   (Decimal('4.75'), '4.75'),  /#works with sqlite
)

my_model = models.DecimalField(max_digits=6, decimal_places=2, choices=My_CHOICE, null=True, blank=True) 
```

任何可能有用的想法或想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:44:17.337

SQLite 是一个非常“民主”的轻量级数据库。例如，您可以声明 VARCHAR(20) 字段并向其写入 30 个符号的字符串，而不会出现任何错误或警告消息。

从 SQLite[文档](http://www.sqlite.org/datatype3.html)：

> 字符串可能看起来像带有小数点和/或指数表示法的浮点文字，但只要该值可以表示为整数，NUMERIC 亲和性就会将其转换为整数。因此，字符串“3.0e+5”以整数 300000 而非浮点值 300000.0 的形式存储在具有 NUMERIC 亲和性的列中。

# wordpress - wordpress W3 Total Cache Fragmented Caching

> ID：12748553
> 
> 赞同：0
> 
> 时间：2012-10-05T14:35:38.250
> 
> 标签：wordpress, function

我想将此行添加到我的functions.php

```
<!-- mfunc wpb_set_post_views($post_id); --><!-- /mfunc --> 
```

但它产生错误，试图把`<?`但没有运气。知道为什么吗？

当我用dreamweaver打开functions.php来编辑它并粘贴这段代码时，它会用红色标记它并说语法错误，如果我还是保存它，那么我的网站就会崩溃。Fragmented Caching是为了防止w3总缓存缓存一些东西

这里是完整的功能

```
function wpb_track_post_views ($post_id) {
    if ( !is_single() ) return;
    if ( empty ( $post_id) ) {
        global $post;
        $post_id = $post->ID;    
    }
   <!-- mfunc wpb_set_post_views($post_id); --><!-- /mfunc -->
}
add_action( 'wp_head', 'wpb_track_post_views'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:37:48.507

你的语法是错误的。它应该是这样的：

```
<!-- mfunc --> wpb_set_post_views($post_id); <!-- /mfunc --> 
```

# iphone - iPhone：具有 1 像素高度的 UIView

> ID：12748555
> 
> 赞同：3
> 
> 时间：2012-10-05T14:36:03.650
> 
> 标签：iphone

我正在尝试创建一个`UIView`1 像素高度。

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0,0,20,1)]; 
```

在非 Retina iPhone 上没问题，但在 Retina 上看起来像 2 像素高度。

怎么了 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T14:40:06.047

在视网膜上的实际像素和 UIKit 像素是不同的。

尝试这个：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0,0,20,1/[[UIScreen mainScreen] scale])]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:46:05.173

那是因为 CGRectMake 使用**点**而不是**像素**。在视网膜设备上，他们将 dpi 翻倍，因此对于 1 点，您现在有 2 个像素。在非视网膜设备上**1 点 = 1 像素**。

# asp.net - 在电子邮件中提供更改密码链接的最简单方法是什么？

> ID：12748558
> 
> 赞同：0
> 
> 时间：2012-10-05T14:36:11.370
> 
> 标签：asp.net, encryption, passwords

显然我无法提供带有链接的电子邮件

```
example.net/changepassword.aspx?email=bob@example.com 
```

所以我需要

```
example.com/changepassword.aspx?email=fregrtgethytrhergerg 
```

我怎样才能做到这一点？我假设我需要一个加密密钥？我可以在不创建额外数据库表的情况下完成所有这些操作吗？我对安全一无所知。

我发现可能与我想要的最接近的解释是一篇关于[How to Hash and Salt Passwords in ASP.NET](https://web.archive.org/web/20120530074650/http://web.securityinnovation.com/appsec-weekly/blog/bid/58887/How-to-Hash-and-Salt-Passwords-in-ASP-NET)的文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:47:19.633

我在这里假设您要创建一个“恢复丢失的密码页面”，该页面向您的用户发送电子邮件。这是真的？

您不想创建新表，但可以在现有表中创建一个（或两个）新列吗？

如果是这样，您可以在现有表中添加一个“guid”列和另一个列“guidExpirationDate”。

当用户要求输入新密码时，在表（代码：）中创建一个 Guid，`Guid.NewGuid()`并设置一个到期日期`DateTime.Now.AddMinutes(30)`，例如。

在您的链接中，提供 Guid 而不是电子邮件地址。出于安全原因，当页面加载时，请验证 Guid 没有过期。

这里不需要加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:54:12.270

您可以将一列 ( **VerificationCode** ) 添加到您的表中，该列将包含一个 unquie 值（您可以使用 GUID）。

当用户请求更改密码时，生成并更新数据库中的验证码并在 URL 中使用相同的验证码：

```
example.com/changepassword.aspx?verificationCode=yourUniqueKey 
```

# vim - VIM 函数创建 CMakeLists.txt

> ID：12748561
> 
> 赞同：1
> 
> 时间：2012-10-05T14:36:17.160
> 
> 标签：vim, vim-registers

我是 Vim 新手，我想创建一个 Vim 函数来制作 CMake 文件。

它不起作用，我不知道该怎么做，所以我的代码的相关部分是：

```
function! CMake_CV()
let @d=@%:t
:split CMakeLists.txt<CR>iproject( <Esc>"dpi )<CR><Esc>:wq<CR>
endfunction 
```

它应该将当前文件的名称不带扩展名复制到变量中，然后将其复制到新文件并保存并关闭它。

它说，@%:t 是一个无效的表达式，并且只允许一个文件名。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:14:32.710

好吧，我解决了这个问题。

```
let @d=expand('%:t')
:split CMakeLists.txt
execute "normal i" "project( ".@d ")"
.
.
.
execute "normal gg=G"
execute ":wq" 
```

我不知道执行命令。

# sql-server - 如何在这个存储过程中使用 EXCEPT？

> ID：12748562
> 
> 赞同：0
> 
> 时间：2012-10-05T14:36:18.220
> 
> 标签：sql-server, tsql, stored-procedures

我写了一个存储过程：

```
SELECT 
    Encounter.EncounterNumber, 
    substring(Encounter.EncounterNumber,4,9) as Acct, 
    MedicalRecordNumber, 
    [AdmitDate - CCYYMMDD] as AdmitDate, 
    [DischargeDate - CCYYMMDD] as DischDate, 
    DischargeDisposition, 
    Encounter.Age, 
    EnctrAPR.APRDRG, 
    Age18, Age18To64, Age65
from 
    Encounter
    full outer join EnctrAPR on 
        substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber
where 
    HSP# = 1
    and InOutCode = 'I'
    and ActualTotalCharge >0 
    and AdmitSubService <> 'SIG'
    and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate
    and Encounter.Age >= 18 
```

我想使用`EXCEPT`or`INTERSECT`指令向我显示不在`EnctrAPR`其中的行`Encounter`。请注意，我`EncounterNumber`在两个表上有不同的格式。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:49:34.407

要**仅**获取那些在 Encounter 中而不在 EnctrAPR 中的记录，则只需使用`left outer join`而不是`full outer join`，并添加一个子句，不包括 EnctrAPR.EncounterNumber 的空值。

IE

```
SELECT  
    Encounter.EncounterNumber,  
    substring(Encounter.EncounterNumber,4,9) as Acct,  
    ...
    EnctrAPR.APRDRG,
    Age18, Age18To64, Age65 
from  
    Encounter 
    left outer join EnctrAPR on  
        substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber 
where  
    EnctrAPR.EncounterNumber is null
    and HSP# = 1 
    and InOutCode = 'I' 
    and ActualTotalCharge >0  
    and AdmitSubService <> 'SIG' 
    and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate 
    and Encounter.Age >= 18 
```

请注意，值`EnctrAPR.APRDRG`始终为空，因为 EnctrAPR 没有匹配的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:53:39.160

你真的不需要相交或除了你要找的东西，但你可以这样。

```
SELECT Encounter.EncounterNumber, substring(Encounter.EncounterNumber,4,9) as Acct,   
MedicalRecordNumber, [AdmitDate - CCYYMMDD] as AdmitDate, [DischargeDate - CCYYMMDD] as 
DischDate, DischargeDisposition, Encounter.Age, EnctrAPR.APRDRG, Age18, Age18To64, Age65
from Encounter
full outer join EnctrAPR on
substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber
where HSP# = 1
and InOutCode = 'I'
and ActualTotalCharge >0 
and AdmitSubService <> 'SIG'
and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate
and Encounter.Age >= 18
INTERSECT -- OR EXCEPT
SELECT Encounter.EncounterNumber, substring(Encounter.EncounterNumber,4,9) as Acct,   
MedicalRecordNumber, [AdmitDate - CCYYMMDD] as AdmitDate, [DischargeDate - CCYYMMDD] as 
DischDate, DischargeDisposition, Encounter.Age, EnctrAPR.APRDRG, Age18, Age18To64, Age65
from EnctrAPR 
join Encounter on
substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber
where HSP# = 1
and InOutCode = 'I'
and ActualTotalCharge >0 
and AdmitSubService <> 'SIG'
and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate
and Encounter.Age >= 18 
```

你可以通过这种方式完成它，但我不推荐它。这是一种蛮力的方法。要仅获取 EnctrAPR 中的记录，您可以更改 FROM EnctrAPR 并使用内连接到 Encounter。

```
SELECT Encounter.EncounterNumber, substring(Encounter.EncounterNumber,4,9) as Acct,   
MedicalRecordNumber, [AdmitDate - CCYYMMDD] as AdmitDate, [DischargeDate - CCYYMMDD] as 
DischDate, DischargeDisposition, Encounter.Age, EnctrAPR.APRDRG, Age18, Age18To64, Age65
from EnctrAPR 
join Encounter on
substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber
where HSP# = 1
and InOutCode = 'I'
and ActualTotalCharge >0 
and AdmitSubService <> 'SIG'
and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate
and Encounter.Age >= 18 
```

要仅获取 EnctrApr 中不存在的记录，我将使用左连接：

```
SELECT Encounter.EncounterNumber, substring(Encounter.EncounterNumber,4,9) as Acct,   
MedicalRecordNumber, [AdmitDate - CCYYMMDD] as AdmitDate, [DischargeDate - CCYYMMDD] as 
DischDate, DischargeDisposition, Encounter.Age, EnctrAPR.APRDRG, Age18, Age18To64, Age65
from Encounter 
left outer join EnctrAPR on
substring(Encounter.EncounterNumber,4,9) = EnctrAPR.EncounterNumber
where HSP# = 1
and InOutCode = 'I'
and ActualTotalCharge >0 
and AdmitSubService <> 'SIG'
and [DischargeDate - CCYYMMDD] between @StartDate and @EndDate
and Encounter.Age >= 18
and EnctrAPR.EncounterNumber IS NULL 
```

# javascript - 使用“ctrl+click”检测新标签页的打开

> ID：12748564
> 
> 赞同：0
> 
> 时间：2012-10-05T14:36:22.133
> 
> 标签：javascript, tabs, click

> **可能重复：**
> [如何在 JavaScript 中捕获右键单击事件？](https://stackoverflow.com/questions/4235426/how-can-i-capture-the-right-click-event-in-javascript)

我有链接，单击时会执行一些 javascript 代码。像这样：

```
<script>
        function myFunction(){
            alert("Hello World!");
        }
</script>

<a href="http://google.com" onclick="myFunction()">Click</a> 
```

当我执行“右键单击 -> 在新标签页中打开”时，它会将我定向到 'google.com' 而无需调用`myFunction()`. 这正是我想要的。

当我通过按链接“Ctrl+左键单击”在新选项卡中打开链接时出现问题。这样，它就会执行`myFunction()`，然后转到 google.com。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:39:41.960

签入`myFunction`以查看是否按下了修改键。

```
function myFunction(e) {
    // http://www.quirksmode.org/js/events_access.html
    var event = e || window.event;

    // https://developer.mozilla.org/en-US/docs/DOM/MouseEvent
    if (event.ctrlKey || event.metaKey) return;

    alert("Hello World!");
} 
```

注意这个确切的代码可能不适用于所有浏览器（这就是 JavaScript 库的用途）。

[http://jsfiddle.net/mattball/vEHyj](http://jsfiddle.net/mattball/vEHyj)

# javascript - 基于用户输入的 MySQL 查询 - 多个下拉列表

> ID：12748566
> 
> 赞同：0
> 
> 时间：2012-10-05T14:36:29.297
> 
> 标签：javascript, jquery, mysql

我正在创建一个下拉选择，其中每个子选择都使用前一个结果进行查询。在我发现一个类似的帖子之后，我已经搜索并形成了我的作品，不幸的是，我仍然无法让它工作。任何帮助都是极好的。谢谢你。

我在下拉菜单中使用 select，id=level1、level2、level3 等。

这是我的代码的 html 下拉选择部分

```
Enter Auction Category : <input type="text" name="fcv" id="fcv" /> <br> 
or Select Category : <br> 
<select class="sspecial" name="level1" id="level1" onchange="getDropdownOptions()"> 
<option></option>

<? 
$level1_sql="SELECT * FROM Ebay_Category WHERE Level = '1' ORDER BY Category"; 
$level1_results=mysql_query($level1_sql); 
while($level1=mysql_fetch_array($level1_results)) { 
  if ($level1['Leaf']) { 
    echo "<option value='".$level1['ebay_category_id']."'>".$level1['Category']."</option>"; 
   } else { 
  echo "<option value=''>".$level1['Category']."</option>"; 
  } 
} 
?> 

</select> 

<br><br> 
<select class="sspecial" name="level2" id="level2"> 
<option value=''></option> 
</select> 
```

用户只能看到为 level1 填充的下拉列表。然后他们从中进行选择 - 此时，我希望 level2 填充基于级别 1 选择的查询。

这是我所依赖的 javascript

```
<script type="text/javascript">
$(document).ready(function() {
    $('#level1').change(getDropdownOptions);
});

function getDropdownOptions() {
    var val = $(this).val();
    // fire a POST request to populate_L2.php
    $.post('populate_L2.php', { value : val }, populateDropdown, 'html');
}

function populateDropdown(data) {
    if (data != 'error') {
            $('#level2').html(data);
}
}

</script> 
```

我将使用 6 个级别或选择。

1.  父母
2.  1 岁的孩子
3.  2岁的孩子
4.  3岁的孩子等等

我对 javascript 的理解还不够好，无法看到它实际上是如何填充下一个选项列表的——这意味着，我确信我已经遗漏了一些东西。

使用上述方法，菜单从原始查询中提取父项，但在更改时，后续查询没有任何反应。

预先感谢您提供任何人可以提供的任何指导或帮助。

再次感谢你。

编辑：显示我的 populate_L2.php 代码

```
mysql_connect("$servername", "$dbusername", "$dbpassword")or die("cannot connect");
mysql_select_db("$dbname")or die("cannot select DB");
$parentid=$_GET['value'];

$postSQL="select * Ebay_Category where Level='2' and ParentID=$parentid";

$postSelect=mysql_query($postSQL);
$html = "<option>--select--</option>";

while ($row = mysql_fetch_array($postSelect)) 
{
    if($row['Leaf']!=0){
    $html .= "<option value='".$row['CategoryID']."'>".$row['Category']."</option>";
    } else {
        $html .= "<option value=''>".$row['Category']."</option>";
    }

} 
```

关于安置的一句话。我在文档的头部有 javascript。我还有其他可以完美运行的脚本——不过，这个脚本是最后一个加载到 head 部分的脚本。

因为我已经发布了这个 - 我验证了我的表名，我的字段名，并输入了一个回声，让我知道 populate_L2.php 是否被给予任何关注——它不是。

已编辑

我刚刚发出警报（'getDropdownOptions 已被执行'）；getDropdownOptions() 函数内的行 - 当我更改下拉列表的值时 - 没有任何变化，也没有警报....

再次感谢您的任何建议。

解决了，有点-使用jquery。现在我需要提出一个我认为的新问题，因为从技术上讲它解决了我原来的问题。

要做下拉菜单，最多 3 个成功完成以下操作；

在标题中创建了一个脚本；

```
 <script type="text/javascript">
    function getInfo(str) 
    {
if (str=="")
  {
  document.getElementById("catTitle").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("catTitle").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","cat_title.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

然后在同一个文档中，

我使用 onchange='getInfo(this.value)' 调用创建了我的第一个选择我在同一个文档中添加了一个带有 catTitle id 的 span 标签（也为每个其他选择重复它）

然后，我在脚本中调用的 cat_title.php 文件，

```
 $vx=$_GET["q"];
$SQL="SELECT * FROM Ebay_Category WHERE ParentID='".$vx."' ORDER BY Category";
$result=mysql_query($SQL);

echo "<select id='lev3' onchange='getInfo2(this.value)'>";
while ($row=mysql_fetch_array($result)){
    echo "<option value='".$row['CategoryID']."'>".$row['Category']."</option>";
}
    echo "</select>"; 
```

回声无需重新加载即可发送到表单，并创建一个新的选择框供我选择下一个选项。

这允许我使用级别 1 选择值来显示 2 的选项，然后选择选项 2，使用该值显示第三组选项 - 这是我个人遇到问题的地方，因为我不能再进一步了。

xmlhttp.status = 500，在第一个 2 之后的所有调用中。我希望找到一种方法来重置它 - 如果您还需要更深入的解决方案，请检查我的问题 - 因为我要要求更棒的堆栈专门针对该部分的溢出支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:05:35.320

[Chained Selects](http://www.appelsiini.net/projects/chained) jQuery 插件可以满足您的需求。

# c - C - 更改字符串中的字母

> ID：12748574
> 
> 赞同：1
> 
> 时间：2012-10-05T14:37:19.357
> 
> 标签：c, string, replace, character

我有以下用 C 编写的应用程序：

该应用程序基本上向用户呈现一个包含一个错误字母的单词。要求用户提供错误字母的位置并用新字母替换。

问题是，如果我尝试更改字母编号 4（数组索引 3），新词将是 Act 而不是实际。如果我以编程方式进行，即更改此行

```
string[letter_number - 1] = change; 
```

对此

```
string[letter_number - 1] = 'u' 
```

一切正常。请问我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:48:19.523

`scanf_s`用一个简单的替换你的`scanf`，你就完成了。否则你可以使用

```
scanf_s("%d ", ...); 
```

并删除`getchar();`

这对我有用：

```
#include <string.h>
#include <stdio.h>

int main()
{
  char string[9] = "Actwally";
  int letter_number;
  char change;

  printf("---Spot the Odd Letter Out---\n\n");
  printf("The word below contains one letter which is incorrect:\n\n");
  printf("Word: %s\n\n\n", string);
  printf("Please provide the position of the incorrect letter and propose a new   letter\n\n");
  printf("Position of incorrect letter: ");
  scanf("%d ", &letter_number);
  printf("\nProposed new letter: ");
  scanf("%c ", &change);
  string[letter_number - 1] = change;
  printf("\n\nThe new word looks like this %s\n\n\n", string); 
  if(strcmp("Actually", string) == 0)
  {
    printf("You are right!  Congratulations!");
  }
  else
  {
    printf("Sorry, but you have not guessed the word.  Better luck next time!");
  }
  printf("\n\n\nPlease press enter to exit the program");
  getchar();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:13:16.563

马修，

基本上我在 GCC 编译器中测试了你的代码。我需要更改以下内容以使其正常工作

*   “scanf_s”中的**换行符**不应该存在。其原因如下。***如果格式说明符中存在空白字符（包括空格、换行符和制表符），则 scanf 函数将读取并忽略（从标准输入）在下一个非空白字符之前遇到的任何空白字符***。因此，在这个特定的用例中；即使您输入了输入并按回车键， 您的程序执行也会在此 scanf 语句中**无限等待。**

> > scanf_s("%c\n", &change); //改变如下
> > 
> > scanf("%c", &change);

*   根据我的说法，在 scanfs 之后使用“getchar”的目的较少。最合适的方法应该是在第一个 scanf 之后刷新输入缓冲区，以便第二个 scanf 实际上期望用户输入而不是从输入缓冲区中进行选择。

**PS：请注意 fflush(stdin) 不适用于 GCC。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:40:25.040

在使用之前验证您的输入是否正确。听起来好像`change`被设置为 0，终止字符串。

我不确定您在`getchar()`通话之间的`scanf()`通话，它们可能会丢失输入。

# javascript - 拦截 jQuery 移动页面流，在页面更改之前解析 JSON

> ID：12748576
> 
> 赞同：1
> 
> 时间：2012-10-05T14:37:21.197
> 
> 标签：javascript, jquery, forms, cordova, jquery-mobile

使用 jQuery mobile 的正常页面流看起来有点像这样：

> 1.  从静态页面 (foo.html) 开始
> 2.  点击链接
> 3.  结束在另一个静态页面 (bar.html)

我需要改变这种行为。我正在寻找这样的东西：

> 1.  从静态页面 (foo.html) 开始
> 2.  点击链接
> 3.  从服务器收集 json（基于表单的外观）
> 4.  根据从上一步收集的数据呈现其他页面 (bar.html)

通常，我只需通过带有 POST/GET 的 PHP 脚本来执行此操作。但是，该项目是一个 PhoneGap 项目，所以这不是替代方案。

一个可能的解决方案是，如果我能以某种方式将第一页的表单指向第二个，因此第二个能够获取第一页的后参数。不过，这感觉很hackish。我还希望在显示第二页之前对其进行解析，这使得它更加复杂。

我怎样才能实现这种行为？更确切地说; 如何在页面之间传递数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:41:11.197

```
$.mobile.changePage("newPage.html", {data:{param1:'value1'}}); 
```

然后在 newPage.html

```
var url = $.url(document.location);
var param1 = url.param("param1"); 
```

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:46:34.520

还有一些事件可以帮助你实现你想要的`pagebeforechange`。`pagebeforeshow`

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# android - 安卓。如何在 PlayStore 中获取我所有付费应用程序的列表（仅）

> ID：12748577
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:37:29.200
> 
> 标签：android

我有兴趣了解我在 PlayStore 中购买的所有应用程序。有一种简单的方法可以检索此列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:43:31.277

如果您有根设备，则可以使用可以在[Modaco获取的 Legacy Play 商店](http://www.modaco.com/topic/356009-r2-legacy-play-store-with-all-purchased-apps-visible/)

# javascript - 如何在 python 中的 HTML 上运行 jquery 命令以进行 DOM 操作/抓取？

> ID：12748584
> 
> 赞同：2
> 
> 时间：2012-10-05T14:37:47.407
> 
> 标签：javascript, jquery, python, dom, web-scraping

假设我正在使用 urllib2 和 cookiejar（[就像这样](https://stackoverflow.com/a/2954448/496405)）从网站获取响应。现在我正在寻找一种简单的方法来使用 jQuery 从网络服务器返回的响应中抓取数据。

我知道还有其他模块可以在 python 中用于网络抓取（[如](https://stackoverflow.com/a/9552860/496405)），但它可能只使用 jQuery 命令吗？我假设我需要在 python 中使用某种 js 解析器？

我想使用 jQuery 的原因是我有大约 20 个 Greasemonkey 脚本（大部分是由其他人编写的），它们对许多网站和网络游戏进行了一些有趣的修改。他们使用 jQuery 进行所有的 DOM 修改。我希望能够简单地将其移植到 python（实现简单有效的自动化），而不是完全重构大部分工作且可靠的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T14:39:41.073

[pyquery](http://pypi.python.org/pypi/pyquery)非常适合这项任务。

它允许您在 Python 的 (X)HTML/XML 上使用 jQuery 之类的选择器。

例如：

```
>>> from pyquery import PyQuery as pq
>>> d = pq("<html><p id="hello">Foo</p></html>")

>>> d("#hello")
[<p#hello.hello>]

>>> d('p:first')
[<p#hello.hello>] 
```

有关详细信息，请参阅[完整的 API 文档](http://packages.python.org/pyquery/api.html)，以及有关源和问题跟踪器的[bitbucket 项目页面。](https://bitbucket.org/olauzanne/pyquery/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:39:31.123

用于`lxml`解析 HTML 并使用它的[`cssselect`模块](http://lxml.de/3.0/cssselect.html)：

```
from lxml.cssselect import CSSSelector
from lxml import etree

tree = etree.parse(document)
elements = CSSSelector('div.content')(tree) 
```

# birt - 在 BIRT 报表查看器中，如何在初始化事件脚本中取消报表执行？

> ID：12748594
> 
> 赞同：0
> 
> 时间：2012-10-05T14:38:13.427
> 
> 标签：birt

在 BIRT 报告查看器中的报告初始化事件中，我想取消（终止）报告的继续执行，基于那里发生的一些验证。

伪代码：`reportContext(stop);`

经过大量研究后，我发现只有一个想法提到：“有一种方法可以取消任务，但这会导致非常一般的异常。” 但是我找不到关于如何从 BIRT 事件处理程序中的 JavaScript 代码取消运行 BIRT 报告的信息，特别是初始化事件。一般的例外，我可以处理。
有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:36:59.797

您可以将 JavaScript 代码添加到`validate`报告参数的事件处理程序。仅当此脚本评估时，报告才会运行`true`。如果`false`你会得到你提到的“通用异常”......

# xamarin.android - GIF 图像在 monodroid 中没有动画

> ID：12748595
> 
> 赞同：0
> 
> 时间：2012-10-05T14:38:24.177
> 
> 标签：xamarin.android

当我添加 GIF 图像 ImageView 时，它保持不变，即它没有动画。为什么会这样？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:10:00.467

这是一个通用的 android 功能 - 动画 gif 是旧技术。

有关一些解决方法，请参阅

*   [在android的ImageView中添加gif图像](https://stackoverflow.com/questions/6533942/adding-gif-image-in-an-imageview-in-android)
*   [显示动画 GIF](https://stackoverflow.com/questions/3660209/android-display-animated-gif)

# javascript - Javascript / 我的动态函数安全吗？

> ID：12748598
> 
> 赞同：1
> 
> 时间：2012-10-05T14:38:33.007
> 
> 标签：javascript, node.js, function, eval

> **可能重复：**
> [如何在 node.js 沙箱中安全地运行用户提交的脚本？](https://stackoverflow.com/questions/7446729/how-to-run-user-submitted-scripts-securely-in-a-node-js-sandbox)

我希望我的用户可以创建自己的与特定对象一起使用的格式函数。我找到了两种方法，但我不知道这些功能是否可以被黑客入侵。它在 nodeJS 中运行。

```
//First way with eval (evil ?)
function convertObj(formula) {
   return function (obj) {
        return eval(formula);
    };
}

// Second way with function (same as eval ?)
function convertObj2(formula) {
  return new Function("obj", "return " + formula);
}

var inst = {
      "name": "BOB",
      "age": "30"    
    };

var formula = "obj.name.toLowerCase() + ' is ' + obj.age + ' years old'";

var next = convertObj(formula);
var next2 = convertObj2(formula);

document.write('<p>' + next(inst) + '</p>');
document.write('<p>' + next2(inst) + '</p>');​ 
```

打印

```
bob is 30 years old
bob is 30 years old 
```

该示例也可在[http://jsfiddle.net/DeWYy/2/获得](http://jsfiddle.net/DeWYy/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:30:10.743

两者都很脆弱，因为你实际上是让任何人在没有任何控制的情况下运行任何东西。

您可能想要做的是在沙箱中运行代码。有一些库可以帮助您解决这个问题（快速谷歌搜索提供了[Sandbox](http://gf3.github.com/sandbox/)）。请注意，即使您在沙箱中运行用户提交的代码，也总会存在风险，但它们大多都得到了缓解。因此，除非您运行关键服务，否则它可以被认为是安全的。

我还建议您查看有关安全运行用户提交的代码的问题。

*   [如何在 node.js 沙箱中安全地运行用户提交的脚本？](https://stackoverflow.com/questions/7446729/how-to-run-user-submitted-scripts-securely-in-a-node-js-sandbox)

# ffmpeg - 图片大小 0x0 在 FFMPEG 日志中无效

> ID：12748601
> 
> 赞同：4
> 
> 时间：2012-10-05T14:38:41.353
> 
> 标签：ffmpeg

在我的程序中，我试图从某个 url 解码 MPEG4 流，但解码失败。奇怪的是，来自其他 url 的 MPEG4 流被解码得很好，所以这不是没有编解码器的问题。

这是我的解码方式：

1）找到解码器：

```
 AVCodec* codec = avcodec_find_decoder(CODEC_ID_MPEG4); 
```

2）分配上下文

```
 ACodecContext* ctx = avcodec_alloc_context3(0); 
```

3) 打开编解码器

```
avcodec_open2(ctx, codec, 0) // it returns > 0, fine 
```

4）解码一个数据包（我有）

```
 avcodec_decode_video2(ctx, frame, &decoded, &packet); 
```

现在`avcodec_decode_video2`返回失败`-1`并打印 FFMPEG 日志：

**图片大小 0x0 无效 get_buffer() 失败 (-1 0 0x0)**

如果我手动设置`ctx->width`并`ctx->height`在解码为正确的值之前（我知道图片的尺寸），那么它可以很好地解码。

但是我一直无法确定尺寸，因此我想知道我是否可以克服 -1 错误。

通过查看 FFMPEG 日志输出，任何人都可以建议我做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:26:52.950

该文件是否有正确的 VOL 标头？如果没有，您将面临这个问题。VOL 标头具有高度和宽度。

# c# - 检索从 WCF 休息服务返回的 JSON 数据

> ID：12748602
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:38:42.380
> 
> 标签：c#, jquery, json, web

> **可能重复：**
> [如何使用 jQuery 从 JSON 中获取属性值](https://stackoverflow.com/questions/10432196/how-to-get-values-of-attributes-from-json-using-jquery)

我已经`json`使用 jsonlint 验证了正在返回并且它是有效的。举个简单的例子，

`"JSONDataResult": "{ \"?xml\":{\"@version\":\"1.0\",\"@encoding\":\"utf-8\"},\"Root\":{\"Information\":{\"Error\":{\"ErrorNo\":\"0\",\"ErrorMsg\":null},\"Address\":{\"Address\":[{\"@AddressID\":\"1232233\",\"@Sequence\":\"1\",\"@Description\":\"Company, Building, 11 Street, County, City\"}`

...更多数据和所有正确的标签等。

使用以下方法返回上述数据结构，但我无法将其分解为其组件。

```
 $.getJSON('http://localhost/WcfRestService/RestServiceImpl.svc/json/mypostcode', 
       function (data) {
          //tried all sorts of variations of this sort of thing: data.Root.Information.Address.Address[0]
    }); 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:08:22.587

我会尝试找出收到的 json 结构的真正样子。*只需将数据*调试到控制台或编写一个向您显示它的警报。我的猜测是您需要致电：

`data.JSONDataResult.Root...`

或者

`data.d.JSONDataResult.Root...`

访问“根”属性。

# java - 如何定义具有可变属性的类？

> ID：12748603
> 
> 赞同：1
> 
> 时间：2012-10-05T14:38:47.340
> 
> 标签：java, database

我正在制作一个数据库程序。我希望用户能够根据需要定义自己的列。然后我将如何在其类文件中定义每条记录？（因为属性会因用户而异）

* * *

它是学校作业的一部分——它将为教师为他们可以添加的不同学生保存不同的分数和喜欢的东西，但他们也可以添加新的作业 test(a column) 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:59:39.060

您需要这种数据库设计，因此您不需要添加新的“列”（类属性）或任何东西：

```
TEACHERS (Class called Teacher)
________
TeacherId
Name

STUDENTS (Class called Student)
________
StudentId
Name

ASSIGNMENTS (Class called Assignment)
___________
AssignmentId
TeacherId (REF)
Name

GRADES (Class called Grade)
______
AssignmentId (REF)
StudentId (REF)
Grade 
```

您应该能够使用`Map`s 转换为 Java 类设计。

我专门给出 DB 设计（“伪代码”）而不是 Java 代码，因为这是家庭作业。

仅供参考：REF 代表参考（DB 语言中的外键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:46:47.413

如果您想在数据库运行时添加和删除列，这通常表明您的设计是错误的。您的“列”可能应该对应于单个表中的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:48:48.180

你实际上不需要上课。基本上，在 Java 世界中，所有类都需要在执行之前进行编译。因此，基于属性向类动态添加字段并不是一个好方法。相反，我建议您使用集合。这可以像这样实现：

```
List<Map<String,Object>> data; 
```

您可以将 Map like 列名作为列值的键和值。可以在属性中配置键，并且可以以任何顺序存储数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:36:01.747

在这种类型的任务中，主要问题是如何存储配置。您不需要为每个结构修改创建一个类。

你应该把你的任务分成三个。

1.  如何扩展表定义？
2.  如何对这样的表运行查询？
3.  如何显示查询结果的结果？

* * *

A1：如何扩展表格？

如果你想用列扩展一个表，你应该有一些数据来做到这一点。

所以你应该从用户那里得到：

*   表名
*   列名
*   立柱类型

有了这些数据，您可以轻松地创建一个 ALTER 语句来添加列。

* * *

A2：如何对动态表执行查询？

我们在这里有两个选择，聪明的或正常的。

*   正常是将用户输入存储到某个表中
*   聪明的是使用数据库表信息。

如何检索这些数据取决于您，重要的是如何将它们存储在您的应用程序中。我建议您创建一些将映射表的对象。

结果集

```
TABLE_A | COLUMN_1 | String
TABLE_A | COLUMN_2 | Integer
TABLE_A | COLUMN_3 | Boolean 
```

简化代码

```
UserTable userTable = new UserTable("TABLE_A");
  userTable.addColumn(new UserTableColumn("COLUMN_1",String.class));
  userTable.addColumn(new UserTableColumn("COLUMN_2",Integer.class));
  userTable.addColumn(new UserTableColumn("COLUMN_3",Boolean.class)); 
```

拥有这样的结构，您可以轻松地创建针对此类表的查询。

A3：如何操作动态表中的数据？

这是棘手的部分。有多种方法可以做到这一点。不太复杂的是创建一个具有键值结构的对象。其中 key 是列名，value 是值。重要的是定义主键，即允许您以简单的方式确定这是新行的标识符，因此您应该插入它或只需要更新的旧行。

```
public class TableRow {

 private Map<UserTableColumn,Object> rowData = new HashMap<UserTableColumn,Object>();

 public Object getValue(UserTableColumn column);
 public void setValue(UserTableColumn column, Object value);

} 
```

我希望这个简短的解释能满足您的需求。

祝你好运 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T14:48:24.967

您需要针对您的数据库表生成类的“东西”。

看看[休眠](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)

有不同的方法可以做到这一点：

[http://www.hibernate.org/subprojects/tools.html](http://www.hibernate.org/subprojects/tools.html)

[http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables](http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables)

# google-maps - 用于谷歌地图和带有过滤器的地图的 Portlet

> ID：12748605
> 
> 赞同：1
> 
> 时间：2012-10-05T14:38:51.757
> 
> 标签：google-maps, plone

我已经尝试了 3 种不同类型的插件来查找用于显示地图的 portlet，但它们都不起作用。我尝试过collective.geo.bundle、Products.Maps 和Products.ATGoogleMaps。我的目标是拥有一个带有如下过滤器的地图： [http](http://www.orcogroup.com/company/activities) ://www.orcogroup.com/company/activities 和一个包含地图 portlet 的插件。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:20:31.563

由于 Plone 是开源的，因此只有您的想象力才是您可以使用它的极限。所以，是的，有一个解决方案。但是，有时需要技能和资源来实现这些目标:)

由于您的用例并不常见，因此 Plone 或其附加组件可能无法提供开箱即用的此类功能。在您的情况下，您正在寻找非常先进的 AJAX 和特定功能。

我在 Plone 网站上看到了一些类似的地图：

[http://iwlearn.net/iw-projects/@@project-map-view.html](http://iwlearn.net/iw-projects/@@project-map-view.html)

在这种情况下，看起来他们使用了以下部分或全部包

```
collective.geo.contentlocations
collective.geo.file
collective.geo.flexitopic
collective.geo.geographer
collective.geo.geopoint
collective.geo.index
collective.geo.kml
collective.geo.mapcontent
collective.geo.mapwidget
collective.geo.openlayers
collective.geo.settings 
```

您可能仍然需要大量自定义功能才能从中获得所需的输出。在这种情况下，您需要编写一个附加层来进一步定制 Plone 功能

[http://collective-docs.readthedocs.org/en/latest/getstarted/index.html](http://collective-docs.readthedocs.org/en/latest/getstarted/index.html)

# html - jQuery Mobile 没有触发 pageinit

> ID：12748606
> 
> 赞同：1
> 
> 时间：2012-10-05T14:38:56.437
> 
> 标签：html, ajax, jquery, jquery-mobile

现在，我的问题很“简单”（问题是，解决方案可能不是）。我有一个使用 $.json() 检索数据的函数。`<ul>`必须使用从“pageinit”/“pageshow”调用的函数将数据加载到一个函数中。虽然它根本不加载任何东西。但！当我刷新页面时，它会完全加载 pageinit 没有问题。

这是我的 jQuery；

```
$('#showsPage').bind('pageshow', function(event) {
    getShows();
});

/******* FUNCTIONS *********/
function getShows()
{
    // Loading.
    $.mobile.loading('show');

    // Load the data.
    $.getJSON("some url", function(json) {

        $("#listShows li").remove();

        $.each(json.data, function(index, show) {

            $("#listShows").append("<li><a href='#'>Stuff</a></li>");
            $("#listShows").listview('refresh');

            // Hide the loading.
            $.mobile.loading('hide');

        });
    });
} 
```

我做错了什么吗？我有一个 pageinit 在不同的页面上运行而没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:06:12.023

由于 jQuery Mobile 对页面转换的 AJAX 处理，您应该在绑定到页面事件时委托您的事件绑定，例如`pageinit`或`pageshow`.

这是一个例子：

```
$(document).on('pageshow', '#showsPage', getShows); 
```

这将确保在`#showsPage`元素实际位于 DOM 中之前不会发生绑定。

请注意，如果您不传入任何参数，您就不需要匿名函数。在不传递任何参数的情况下，您可以将函数的名称`.on()`作为回调传递给方法。

请注意，每当用户刷新页面或深度链接到您的站点时，都需要绑定此委托事件处理程序，因此我建议将其放在外部脚本中，并将该脚本包含在每个`<head>`文档的`</body>`，只是不在`data-role="page"`元素内），这样任何页面刷新都不会破坏您网站上的功能。另一种方法是将特定页面的代码放在`data-role="page"`元素内，这样当它通过 AJAX 引入 DOM 时，您的代码将由 jQuery Mobile 解析。

# php - PHPUnit 的 returnValueMap 没有产生预期的结果

> ID：12748607
> 
> 赞同：46
> 
> 时间：2012-10-05T14:39:00.750
> 
> 标签：php, cakephp, phpunit

我正在尝试使用 PHPUnit 的[returnValueMap()](http://www.phpunit.de/manual/3.6/en/test-doubles.html#test-doubles.stubs.examples.StubTest5.php)来存根读取的结果。它没有产生预期的结果，但等效的 returnCallback() 可以。如果您想自己检查，我已经提供了我的[测试用例。](http://pastebin.com/xkRJdYfa)

**返回值映射（）**

```
$enterprise = $this->getMock('Enterprise', array('field'));
$enterprise->expects($this->any())
    ->method('field')
    ->will($this->returnValueMap(array(
        array('subscription_id', null),
        array('name', 'Monday Farms')
    )));
$enterprise->subscribe('basic'); 
```

结果：

```
Subscription ID: NULL
Name: NULL 
```

**返回回调（）**

```
$enterprise = $this->getMock('Enterprise', array('field'));
$enterprise->expects($this->any())
    ->method('field')
    ->will($this->returnCallback(function ($arg) {
        $map = array(
            'subscription_id' => null,
            'name' => 'Monday Farms'
        );
        return $map[$arg];
    }));
$enterprise->subscribe('basic'); 
```

结果：

```
Subscription ID: NULL
Name: string(12) "Monday Farms" 
```

**企业::订阅**

```
public function subscribe() {
    echo 'Subscription ID: ';
    var_dump($this->field('subscription_id'));
    echo 'Name: ';
    var_dump($this->field('name'));
} 
```

为什么 returnValueMap() 不能按我的预期工作？我到底错过了什么？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-08T18:16:57.597

我遇到了同样的问题，最终发现 returnValueMap() 必须映射函数的所有参数，**包括可选**参数，然后是所需的返回值。

Zend 框架的示例函数：

```
public function getParam($key, $default = null)
{
    $key = (string) $key;
    if (isset($this->_params[$key])) {
        return $this->_params[$key];
    }

    return $default;
} 
```

必须像这样映射：

```
$request->expects($this->any())
        ->method('getParam')
        ->will($this->returnValueMap(array(array($param, null, $value)))); 
```

如果没有中间的 null，它将无法工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-27T12:38:51.730

我一直在寻找同样的问题，最终出于绝望 xdebug-stepped through Framework/MockObject/Stub/ReturnValueMap.php 和 Framework/MockObject/InvocationMocker.php [in method InvocationMocker::invoke(PHPUnit_Framework_MockObject_Invocation $invocation)]，和我观察到以下几点：

1.  当调用存根函数时，您提供的映射数组中的值不仅必须与预期的参数相同，而且它们必须是相同的类型。这是因为在 ReturnValueMap::invoke() 方法中的 Framework/MockObject/Stub/ReturnValueMap.php 内部，在第 75 行比较了提供的参数和预期的参数，如下所示：

    ```
    if ($invocation->parameters === $map) { 
    ```

    所以，预期的结果

    ```
    $mock->myStubbedMethod( "1", "2" ) 
    ```

    使用地图数组

    ```
    array(
        array( 1, 1, 500 ),
        array( 1, 2, 700 )
    ) 
    ```

    会失望的。相反，结果将是 NULL。

2.  在更微妙的一点上，您可能已经使用两种不同的模拟场景来存根该方法（就像我所做的那样 - 是的，我很傻！）

    因此，为了阐明，第一个模拟存根可以包含

    ```
    $mock->expects( $this->any() )
           ->method('myStubbedMethod')
           ->will( $this->returnValue(750) ); 
    ```

    然后，在相同的单元测试方法中，它可以包含

    ```
    $arrMap = array(
        array( 1, 1, 500 ),
        array( 1, 2, 700 ),
        array( 2, 3, 1500 ),
    );
    $mock->expects( $this->any() )
            ->method('myStubbedMethod')
            ->will( $this->returnValueMap($arrMap) ); 
    ```

    当调用 stubbed-method 时，将实现 map-array 版本。这是显而易见且不言而喻的，然而，当你在热火朝天的时候编码，并且在你开发时在你的脑海中区分不同的代码行为时，它很容易被忽视。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:26:27.343

问题似乎出在代码中的其他地方，或者可能是旧 PHPUnit 版本的问题。

对我来说，它使用以下代码工作：

**cat EnterpriseTest.php**

```
<?php

class EnterpriseTest extends PHPUnit_Framework_TestCase {

    public function testReturnValueMap() {
        $enterprise = $this->getMock('Enterprise', array('field'));
        $enterprise->expects($this->any())
            ->method('field')
            ->will($this->returnValueMap(array(
                array('subscription_id', null),
                array('name', 'Monday Farms')
            )))
        ;
        $enterprise->subscribe('basic');        
    }

}

class Enterprise {

    public function field($name) {
    }

    public function subscribe() {
        echo 'Subscription ID: ';
        var_dump($this->field('subscription_id'));
        echo 'Name: ';
        var_dump($this->field('name'));
    }

} 
```

**输出：**

```
phpunit-dev EnterpriseTest.php 
PHPUnit 3.7.6 by Sebastian Bergmann.

.Subscription ID: NULL
Name: string(12) "Monday Farms"

Time: 0 seconds, Memory: 6.75Mb

OK (1 test, 1 assertion) 
```

所以虽然我不知道为什么它不起作用，但我至少可以告诉你，你做得对，而且你理解`returnValueMap`正确:)

# css - 使用 LESS 控制颜色的受保护的 mixin

> ID：12748608
> 
> 赞同：1
> 
> 时间：2012-10-05T14:39:03.957
> 
> 标签：css, less, mixins

我的目标是在这个投票[http://tsn.thesn.net/poll/962](http://tsn.thesn.net/poll/962)上使用动态文本颜色，这样当没有背景颜色时，文本为深灰色，而当出现绿色背景时，文本为白色。

这是我的背景和文本样式：

```
.chartlist .item { 
  display: block; 
  padding: 0.4em 4.5em 0.4em 0.5em;
  position: relative; 
  z-index: 2;
  font-weight: bold;
  color: @grayDarker; 
}

.chartlist .index { 
  display: block; 
  position: absolute; 
  top: 0; 
  left: 0; 
  height: 100%; 
  background: @green; 
  text-indent: -9999px; 
  overflow: hidden; 
  line-height: 2em;
 } 
```

我已经在 LESS 上阅读了这方面的文档，但是在可视化语法的工作方式时遇到了麻烦。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:53:00.130

我会写这样的东西：

```
.colors(@col){
   color:@col;
}
.colors(@col,@bgcol){
   color:@col;
   background:@bgcol;
} 
```

然后你可以写：

```
.chartlist .item { 
 /* ... */
  colors(@grayDarker); 
}
.chartlist .index { 
  /* ... */
  colors(white,@green);
} 
```

# llvm - 获取 LLVM 中调用约定的已注册参数的数量

> ID：12748609
> 
> 赞同：1
> 
> 时间：2012-10-05T14:39:12.583
> 
> 标签：llvm

我正在修改 LLVM 中的 X86FrameLowering 以添加自定义序言（类似于`X86FrameLowering::adjustForSegmentedStacks`），并且我需要知道函数的指定调用约定的已注册参数的数量（即，应分配给寄存器的参数）。

我怎么能那样做？我正在使用 LLVM 3.2。

# asp.net - 如何在 iTextSharp 中将 PDF 添加到另一个 PDF？

> ID：12748623
> 
> 赞同：0
> 
> 时间：2012-10-05T14:39:55.577
> 
> 标签：asp.net, vb.net, pdf, itextsharp

我到处寻找这个，但找不到有效的答案。我有 2 个输入 PDF（只有 2 个）。

我想将 PDF2 添加到 PDF1（新页面）的底部，然后将两者都输出为 PDF3。

如果您在 vb.net 中提交任何代码，任何人都可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:19:15.333

我建议使用 PdfWriter.GetImportedPage ...

例如：

```
'' Create your blank PDF
Dim pdfDoc As Document = New Document(New Rectangle(0, 0, width, height))
Dim pdfWriter As PdfWriter = pdfWriter.GetInstance(pdfDoc, New FileStream("yourPDF.pdf", FileMode.OpenOrCreate))
pdfDoc.Open()

'' Create a reader to read in your PDF 2
Dim bgReader As PdfReader = New PdfReader("pdf2.pdf"))
Dim bg As PdfImportedPage = pdfWriter.GetImportedPage(bgReader, 1)

'' add the template beneath content
pdfWriter.DirectContentUnder.AddTemplate(bg, 0, 0)

'' now do the same for PDF1
bgReader = new PdfReader("pdf1.pdf")
bg = pdfWriter.GetImportedPage(bgReader,1)
pdfWriter.DirectContentUnder.AddTemplate(bg,0,0)

'' don't forget to close the doc which will save it
pdfDoc.Close() 
```

这是几种方法之一..尚未测试代码，但应该不会太远:)

编辑：

看，据我所知，您实际上无法更改 PDF1。您必须创建由 PDF1 和 PDF2 组成的 PDF3。因此，这就是我们实际在做的事情。

您可以做的另一件事是加载构成主要文档基础的文档，然后创建一个您将写入的 PdfStamper。所以假设PDF1是你的主要。

```
Dim reader as PdfReader = New PdfReader("pathToPDF1")
Dim stamper as new PdfStamper(reader, New FileStream("PathToSaveYourNewPdfTo.pdf"), IO.FileMode.Create) 
```

现在，阅读内容 PDF2

```
Dim bgReader As PdfReader = New PdfReader("pdf2.pdf"))
Dim bg As PdfImportedPage = pdfWriter.GetImportedPage(bgReader, 1) 
```

如果您想在您的模板下添加此内容，请调用 GetUnderContent。您可以通过在我的代码示例中提供 X 和 Y 坐标“0,0”来定位您想要的位置。请记住，坐标来自 PDF 的左下角。

```
'' add the template beneath content, 1 indicates pagenumber of the doc you loaded in
stamper.GetUnderContent(1).AddTemplate(bg, 0, 0) 
```

如果要添加到模板的顶部，则调用 GetOverContent 并可以使用相同的定位属性

```
stamper.GetOverContent(1).AddTemplate(bg, 0, 0) 
```

不确定我是否在您的评论中遗漏了其他内容...？...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-05T15:25:17.103

您可以使用...合并 Pds `"ITextSharp"`...这是我在最近的项目中尝试过的一个很好的示例...您可以从中获得好主意...

[ItextSharp 中的 Pdf 合并问题（合并 Pdf 后不保留其值）](https://stackoverflow.com/questions/12210002/pdf-merge-issue-in-itextsharp-after-merging-pdfs-dont-retain-their-values)

# ruby-on-rails - 什么时候应该在 Rails 中使用 `DateTime.now.utc` 与 `Time.current.utc`？

> ID：12748626
> 
> 赞同：21
> 
> 时间：2012-10-05T14:40:03.673
> 
> 标签：ruby-on-rails, time

在 Rails 中，我对何时使用 DateTime.now.utc 和 Time.current 之间的指导有点困惑。框架内部似乎对哪个最好有不同的看法，尤其是在不同的版本中。

它看起来像`DateTime.now.utc`产生一个*UTC 偏移量为零*的时间戳，而`Time.current.utc`产生一个*时区为 UTC*的时间戳。这似乎是一个微妙的区别，但在许多情况下（例如 DST 计算）非常重要。

你应该什么时候使用`DateTime.now.utc`，什么时候应该使用`Time.current.utc`？有什么理由使用`DateTime.now.utc`代替`Time.current.utc`吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T14:52:51.447

我认为你应该使用`.current`而不是`.now`.

`.current`和的区别`.now`在于`.now`使用服务器的时区，而`.current`使用 Rails 环境设置的时区。如果未设置，则`.current`与`.now`.

***时间.电流***

> **在设置Time.zone**或**config.time_zone**时返回**Time.zone.now**，否则只返回**Time.now**。

 *********日期时间.当前***

> **设置Time.zone**或**config.time_zone**时返回**Time.zone.now.to_datetime** ，否则返回**Time.now.to_datetime**。******

# css - 简单的 Tumblr iFrame 定位难题

> ID：12748631
> 
> 赞同：1
> 
> 时间：2012-10-05T14:40:22.163
> 
> 标签：css, iframe, positioning, blogs, tumblr

我在使用**Tumblr**时遇到了一个非常烦人的小问题。我已经自定义了一个主题，以便可以将其用作在线作品集，但是我在定位“页面”iFrame 时遇到了一些麻烦。

正如您在此处看到的 www.ellekorhalillerweb.tumblr.com ，当您单击“信息”时，iFrame 会显示不同的内容页面。我希望此内容位于页面中心，但由于某种原因，Tumblr 将其保留在左侧中心。我已经尽我所能在 CSS 中使用定位，但对这个看似简单、明显的问题感到困惑。我想知道它是否与某些 Tumblr 脚本有关？

任何帮助将非常感激。

艾丽。

# visual-studio-2010 - 为什么我的 BouncyBall 对象在 Visual Basic 中没有在屏幕上移动？

> ID：12748636
> 
> 赞同：1
> 
> 时间：2012-10-05T14:40:32.100
> 
> 标签：visual-studio-2010

我正在尝试在 Visual Basic 2010 中编写弹跳球应用程序。我有两个类：一个用于构建球对象和移动球，我有一个包含球位置和速度的球类。

我的主要课程：

```
Public Class Bouncer 'start of main class

    Private ball As BouncyBall 'private ball object field

    'form load event handler
    Private Sub CST8333_Lab3_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        ball = New BouncyBall(Me) 'call ball constructor
    End Sub 'end form load event handler

    'timer event handler to control ball movement
    Private Sub Timer_Tick(sender As System.Object, e As System.EventArgs) Handles Timer.Tick
        ball.MoveBall() 'move the ball object
    End Sub 'end timer event handler
End Class 'end main class 
```

我的球类：

```
Class BouncyBall 'start of ball class

    'private field variables
    Private ballX As Integer
    Private ballY As Integer
    Private ballMovementX As Integer
    Private ballMovementY As Integer
    Private location As Point
    Private _bouncer As Bouncer

    'ball object constructor
    Sub New(bouncer As Bouncer)
        'instantiate variables
        _bouncer = bouncer
        ballX = 50
        ballY = 50
        ballMovementX = 5
        ballMovementY = 5
        location = New Point(ballX, ballY)
    End Sub 'end ball object constructor

    'subroutine to move ball
    Public Sub MoveBall()
        If (ballX >= _bouncer.Width) Then 'check if ball hits right side
            ballMovementX = -ballMovementX
        ElseIf (ballX <= 0) Then 'check if ball hits left side
            ballMovementX = -ballMovementX
        End If
        If (ballY >= _bouncer.Height) Then 'check if ball hits bottom
            ballMovementY = -ballMovementY
        ElseIf (ballY <= 0) Then 'check if ball hits top
            ballMovementY = -ballMovementY
        End If
        'move ball
        ballX += ballMovementX
        ballY += ballMovementY
        Me.location = New Point(ballX, ballY)
    End Sub 'end subroutine to move ball
End Class 'end ball class 
```

球对象由围绕表格移动的标签组成。球对象称为 BouncyBall，我希望 MoveBall() 子例程中的规则引导球绕着表单移动。但是，我的球根本不动。我的计时器已启用，间隔为 50 毫秒，所以这不是我的问题。我认为我的问题是我的 MoveBall() 规则使用实际上不会更新标签属性的变量。

在找到使用变量更新 BouncyBall 球位置的方法后，我的球仍然没有移动。我仍然认为我需要以某种方式将包含我的规则的 BouncyBall 类链接到表单上的实际标签（也称为 BouncyBall）。

谁能帮我让我的球动起来？我开始没有想法了。谢谢！

# c# - 通过实体框架将相关记录插入数据库

> ID：12748641
> 
> 赞同：4
> 
> 时间：2012-10-05T14:41:09.127
> 
> 标签：c#, asp.net, linq, entity-framework

我很好奇是否有一种干净的方法可以做到这一点

```
Product product = new Product();
product.CreateDateTime = DateTime.Now;
product.Description = productCreateModel.Product.Description;
product.ManufacturerId = productCreateModel.Manufacturer;
product.MetaDescription = productCreateModel.Product.MetaDescription;
product.MetaTitle = productCreateModel.Product.MetaTitle;
product.Name = productCreateModel.Product.Name;
product.Status = ProductStatuses.Active;
product.URL = productCreateModel.Product.URL;

if (productCreateModel.ProductImage1.ContentLength > 0)
    {
        BinaryReader binaryReader = new BinaryReader(productCreateModel.ProductImage1.InputStream);
                product.ProductImages.Add(new ProductImage()
                {
                    CreateDateTime = DateTime.Now,
                    Image = binaryReader.ReadBytes(productCreateModel.ProductImage1.ContentLength),
                    PrimaryImage = true
                });
    }
db.Products.Add(product);
db.SaveChanges(); 
```

我遇到的问题是 product.ProductImages 为空 - 我希望能够这样做而不是执行多个 db.TableName.Add/db.SaveChanges 因为如果我理解正确，EF 会创建一个交易，这样如果出现任何问题，您将不会插入没有产品图像的虚拟产品记录 - 如果这有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:54:36.040

改变你的产品型号？

```
private IList<ProductImage> productImages_;
public virtual IList<ProductImage> ProductImages {
   get {
     return productImages_ ?? (productImages_= new List<ProductImage>());
   }
   set { productImages_ = value;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:10:12.150

我只是在这里进行头脑风暴，所以如果这不起作用，请不要生气，但我认为您可能需要在将新的 ProductImage 实体显式添加到 db.ProductImages 实体集之前，然后将其链接到 Product 实体。

```
Product product = new Product();
product.CreateDateTime = DateTime.Now;
product.Description = productCreateModel.Product.Description;
product.ManufacturerId = productCreateModel.Manufacturer;
product.MetaDescription = productCreateModel.Product.MetaDescription;
product.MetaTitle = productCreateModel.Product.MetaTitle;
product.Name = productCreateModel.Product.Name;
product.Status = ProductStatuses.Active;
product.URL = productCreateModel.Product.URL;

db.Products.Add(product);

if (productCreateModel.ProductImage1.ContentLength > 0)
    {
        BinaryReader binaryReader = new BinaryReader(productCreateModel.ProductImage1.InputStream);

        ProductImage image = new ProductImage()
        {
              CreateDateTime = DateTime.Now,
              Image = binaryReader.ReadBytes(productCreateModel.ProductImage1.ContentLength),
              PrimaryImage = true
        }

        db.ProductImages.Add(image); // Add the image to the ProductImage entity set
        product.ProductImages.Add(image); // link the image to this Product
    }

db.SaveChanges(); // Save all changes 
```

# java - 偶尔的“EJBTransactionRolledbackException：事务回滚”错误挂起应用程序

> ID：12748643
> 
> 赞同：3
> 
> 时间：2012-10-05T14:41:14.977
> 
> 标签：java, jakarta-ee, ejb, javabeans, jboss6.x

应用程序托管在 JBoss6（版本 6.0.0.Final）中。

在生产环境中，我有时会看到以下错误：

```
2012-10-01 17:59:00,290 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-9) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.handleEndTransactionException(CMTTxInterceptor.java:115) [:0.0.1]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:87) [:0.0.1]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:255) [:0.0.1]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.required(CMTTxInterceptor.java:349) [:0.0.1]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invoke(CMTTxInterceptor.java:209) [:0.0.1]
at org.jboss.ejb3.tx2.aop.CMTTxInterceptorWrapper.invoke(CMTTxInterceptorWrapper.java:52) [:0.0.1]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76) [:1.0.0.GA]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42) [:1.0.3]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:182) [:1.7.17]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41) [:1.7.17]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67) [:1.7.17]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47) [:1.7.17]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67) [:1.0.1]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86) [:1.7.17]
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.1.GA]
at org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:272) [:1.7.17]
at org.jboss.ejb3.stateless.StatelessContainer.invokeEndpoint(StatelessContainer.java:617) [:1.7.17]
at org.jboss.webservices.integration.invocation.InvocationHandlerEJB3.invoke(InvocationHandlerEJB3.java:137) [:6.0.0.Final]
at org.jboss.wsf.stack.cxf.AbstractInvoker._invokeInternal(AbstractInvoker.java:164) [:3.4.1.GA]
at org.jboss.wsf.stack.cxf.AbstractInvoker.invoke(AbstractInvoker.java:112) [:3.4.1.GA]
at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) [:2.3.1]
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [:1.6.0_23]
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [:1.6.0_23]
at java.util.concurrent.FutureTask.run(Unknown Source) [:1.6.0_23]
at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37) [:2.3.1]
at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106) [:2.3.1]
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255) [:2.3.1]
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113) [:2.3.1]
at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97) [:2.3.1]
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461) [:2.3.1]
at org.jboss.wsf.stack.cxf.ServletControllerExt.invoke(ServletControllerExt.java:172) [:3.4.1.GA]
at org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:57) [:3.4.1.GA]
at org.jboss.wsf.stack.cxf.transport.ServletHelper.callRequestHandler(ServletHelper.java:156) [:3.4.1.GA]
at org.jboss.wsf.stack.cxf.CXFNonSpringServletExt.invoke(CXFNonSpringServletExt.java:90) [:3.4.1.GA]
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179) [:2.3.1]
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103) [:2.3.1]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [:1.0.0.Final]
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159) [:2.3.1]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:67) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.0.0.Final]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [:6.0.0.Final]
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.0.0.Final]
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501) [:6.0.0.Final]
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.0.0.Final]
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.0.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [:6.0.0.Final]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.0.0.Final]
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.0.0.Final]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.0.0.Final]
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.0.0.Final]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.0.0.Final]
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:893) [:6.0.0.Final]
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600) [:6.0.0.Final]
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2019) [:6.0.0.Final]
at java.lang.Thread.run(Unknown Source) [:1.6.0_23]
Caused by: javax.transaction.RollbackException: ARJUNA-16063 The transaction is not active!
at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1148) [:6.0.0.Final]
at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:119) [:6.0.0.Final]
at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75) [:6.0.0.Final]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:82) [:0.0.1]
... 65 more 
```

它偶尔会每周发生一次，并且此类异常的数量在第一次发生后的几分钟内就会增加，从而使整个应用程序挂起。appserver重启后，应用程序正常工作。

直到重新启动，日志中有242个相同的错误：

```
Line 18231: 2012-10-01 17:19:24,290 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-12) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 18404: 2012-10-01 17:19:34,009 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-3) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 18559: 2012-10-01 17:19:24,728 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-7) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 19222: 2012-10-01 17:20:14,728 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-11) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 20212: 2012-10-01 17:27:22,900 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-14) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 20606: 2012-10-01 17:27:32,853 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-16) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 21258: 2012-10-01 17:28:18,540 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-21) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 21361: 2012-10-01 17:28:39,353 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-17) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 21618: 2012-10-01 17:28:39,743 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-12) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 21693: 2012-10-01 17:28:39,884 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-10) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 22428: 2012-10-01 17:38:20,509 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-2) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 23606: 2012-10-01 17:38:51,790 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-35) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 23987: 2012-10-01 17:38:42,181 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-11) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 24378: 2012-10-01 17:39:02,259 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-14) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 24625: 2012-10-01 17:39:12,306 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-50) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 25032: 2012-10-01 17:39:24,947 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-17) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 25191: 2012-10-01 17:39:34,634 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-25) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 25610: 2012-10-01 17:39:34,853 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-40) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 25690: 2012-10-01 17:39:35,009 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-23) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 25932: 2012-10-01 17:39:35,165 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-35) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 26013: 2012-10-01 17:39:45,165 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-49) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 26170: 2012-10-01 17:39:45,243 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-42) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 26331: 2012-10-01 17:39:56,712 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-81-14) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
Line 26651: 2012-10-01 17:40:08,243 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-18) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back
....other hundreds of errors...
Line 64132: 2012-10-01 18:19:01,712 ERROR [org.jboss.webservices.integration.invocation.InvocationHandlerEJB3] (http-ntpen1.company.name%2F80.95.224.149-444-15) Method invocation failed with exception: Transaction rolled back: javax.ejb.EJBTransactionRolledbackException: Transaction rolled back 
```

在每个错误之前，日志中都有以下条目：

```
Line 18188: 2012-10-01 17:17:38,837 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA-12117 TransactionReaper::check timeout for TX 0:ffff505fe095:1274:505afcea:577d43 in state  RUN
Line 18189: 2012-10-01 17:17:38,868 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA-12095 Abort of action id 0:ffff505fe095:1274:505afcea:577d43 invoked while multiple threads active within it.
Line 18190: 2012-10-01 17:17:38,868 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA-12108 CheckedAction::check - atomic action 0:ffff505fe095:1274:505afcea:577d43 aborting with 1 threads active!
Line 18191: 2012-10-01 17:17:59,087 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA-12117 TransactionReaper::check timeout for TX 0:ffff505fe095:1274:505afcea:577d43 in state  CANCEL
Line 18229: 2012-10-01 17:19:24,290 WARN  [com.arjuna.ats.arjuna] (http-ntpen1.company.name%2F80.95.224.149-81-12) ARJUNA-12077 Abort called on already aborted atomic action 0:ffff505fe095:1274:505afcea:577d43 
```

应用程序本身是一组 SOAP Web 服务和动态 JSF/Richfaces 网页。大多数逻辑位于无状态 bean (@Stateless) 中。

我的猜测是有时调用 web 服务需要太多时间，导致 EJBTransactionRolledbackException。问题是为什么有时它会挂起整个应用程序？此外，异常堆栈跟踪不包含应用程序代码中的调用。

可能是因为池（无状态 bean 对象池）用完了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T12:53:34.840

如果没有实际代码，这只是一个猜测，但这可能是JBoss 6.0.0 final 中存在的错误[EJBTHREE-2238的影响。](https://issues.jboss.org/browse/EJBTHREE-2238)

# java - Java 项目中的 While 循环：元音提取

> ID：12748644
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:41:17.063
> 
> 标签：java, loops

我的 Java 类遇到了一个问题，我不知道该如何解决。我的教授几乎没有讲过循环。我不知道如何解决这个问题。

以下是项目目标：

> 读取一个字符串并打印出该字符串中包含的所有元音。
> 
> 元音是 AEIOU aeio u。
> 
> 输入：s的值，一个字符串
> 
> 输出：一个包含 s 中所有元音的字符串，按照它们在 s 中出现的顺序

```
public class GetVowels
{
    public static void main(String[] args)
    {
        String r = "";

        Scanner in = new Scanner(System.in);
        String s = in.nextLine();

        System.out.println(r);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T14:44:35.087

一些想法：

*   存储要删除的所有元音列表
*   将所有内容转换为一种情况（`toUpperCase()`或`toLowerCase()`）
*   遍历每个字符，测试它们是否等于正在寻找的元音
*   如果它们匹配，记录匹配的一个

有关循环的一些指导，特别是在迭代字符串时：

[https://stackoverflow.com/a/2451660/101095](https://stackoverflow.com/a/2451660/101095)

> 对字符串中的每个字符进行 for-each 的最简单方法是使用 toCharArray()：

```
for (char ch: "xyz".toCharArray()) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:53:43.123

您可能想要的是一个“for”循环：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)

您需要输入的长度：`String.length()`对于循环的上限。请记住，Java 字符串的索引从 0 开始！

然后在循环内部逐个字符检查。

# c# - Windows phone 禁用应用程序栏按钮

> ID：12748647
> 
> 赞同：4
> 
> 时间：2012-10-05T14:41:46.813
> 
> 标签：c#, silverlight, windows-phone-7, application-bar

那么，我的问题是什么？我有一个`popup`，当我打开它时，我想在我的 Windows Phone 应用程序中禁用当前页面。所以我做了这个`this.IsEnabled = false;`但我`ApplicationBar`的仍然可用。我当然尝试：

```
ApplicationBar.IsMenuEnabled = false; 
```

我的下一个想法是做这样的事情：

```
for (int i = 0; i < ApplicationBar.MenuItems.Count; i++)
{
    ((ApplicationBarMenuItem)ApplicationBar.Buttons[i]).IsEnabled = false;
} 
```

仍然没有结果。我敢肯定以前有人这样做过，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T22:25:53.123

应用程序栏由 Buttons 集合和 MenuItems 集合组成。对于您的示例，您可能想尝试类似

```
foreach (var button in ApplicationBar.Buttons)
{
    ((ApplicationBarIconButton) button).IsEnabled = false; // disables the button
}

ApplicationBar.IsMenuEnabled = false; // this will prevent menu from opening 
```

如果这不起作用，您是否考虑过隐藏应用栏？
`ApplicationBar.IsVisible = false;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-11T06:53:08.333

这个怎么样

```
((ApplicationBarIconButton)this.ApplicationBar.Buttons[1]).IsEnabled = true; 
```

其中 [1] 是您要启用/禁用的按钮的索引

我知道这是可行的，因为我有在 Windows Phone 8 应用程序中使用它的代码

你能贴一些代码给我们看看吗

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T09:45:14.583

不幸的是，根据[这篇文章](http://www.learningwindowsphone.com/blog/?p=62)有一个错误，这意味着在菜单关闭并重新打开之前，设置`IsEnabled`an 的属性`ApplicationBarMenuItem`不会得到尊重。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T14:51:51.853

只需包含 using Microsoft.Phone.Shell 来获取 .cs 文件中的命名空间，您就可以执行以下操作：

```
ApplicationBar.Enable(); 
```

和

```
ApplicationBar.Disable(); 
```

根据[http://new.efficientcoder.net/2010/10/windows-phone-7-quick-tip-17.html](http://new.efficientcoder.net/2010/10/windows-phone-7-quick-tip-17.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-26T07:17:04.573

试试这个 ：

xml:

```
<shell:ApplicationBar IsVisible="False"> 
```

。CS

```
Dispatcher.BeginInvoke(() =>
            {
                UIHelper.ToggleVisibility(Canvas_LocationAR_Trans);
                UIHelper.ToggleVisibility(Grid_LocARLoadingGrid);
                **ApplicationBar.IsVisible = true;**
            }); 
```

# spring - 如何从会话的过滤器中获取会话范围的 bean？(jsf 2.1)

> ID：12748648
> 
> 赞同：2
> 
> 时间：2012-10-05T14:41:53.240
> 
> 标签：spring, session, jsf-2, scope, servlet-filters

如何在过滤器中检索会话范围的 bean？我试过这样，但它返回null。

这是我的会话范围 bean：

```
@SessionScoped
@ManagedBean(name="sessionData")
public class SessionData {
    private UserWrapper userWrapper;

public UserWrapper getUserWrapper() {
    return userWrapper;
}

public void setUserWrapper(UserWrapper userWrapper) {
    this.userWrapper = userWrapper;
}

} 
```

这是过滤器：

```
HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;
HttpSession session = httpServletRequest.getSession(false);
if(session != null) {
    SessionData sessionData = (SessionData)session.getAttribute("sessionData");
    System.out.println("sessionData:"+sessionData);
} 
```

但它返回空...

```
sessionData:null; 
```

如何在过滤器中检索 sessionData bean？

# jquery - 手机模拟器好用吗？iPad上的Css Jquery

> ID：12748651
> 
> 赞同：2
> 
> 时间：2012-10-05T14:42:13.530
> 
> 标签：jquery, html, css, jquery-mobile, ipad-2

大家好，这是我的 jquery 函数，用于根据屏幕宽度更改字体大小和其他特定的 css 值。

```
<script type="text/javascript" src="/jquery.js">
</script>
<script type="text/javascript">
var b=$(window).width();
var c=$(window).height();
$(document).ready(function() {
     get_font_size();
     set_sidebar();

});
function get_font_size()
{
var b=$(window).width();
var side_size=b*260/1440;
$("#alexa-widget img").css({"width":side_size});
$(".fb-like-box").attr("data-width",side_size); 
}
function set_sidebar()
{
var b=$(window).width();
var font_size=b*55/1440;
$("#my_tabs li").css({"font-size":font_size});
$("#justin input").attr("size",just_in);
}
</script> 
```

我实际上做了一个愚蠢的数学运算来找到不同屏幕尺寸的字体大小和其他 css 值。我所做的是我为 1440 的屏幕宽度提供正确的输入，比如 1440x768 的字体大小是 20 像素，那么对于 1024x768 它将是20x1024/1440。虽然它很愚蠢，但它工作正常，我使用在线模拟器在 ipad 和其他 android 设备上进行了测试，还通过更改 chrome 和 Firefox 中的用户代理设置进行了测试。的确，我很高兴，但突然又回到了起点。我在我的 ipad 2 上测试了这个，结果惨遭失败。

所需元素的css代码为：

```
@charset "utf-8";
/* CSS Document */
html
{
    height:100%;
}
#my_body {      

background: #f2f6f8;
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2YyZjZmOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q4ZTFlNyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iI2I1YzZkMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMGVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #f2f6f8 0%, #d8e1e7 50%, #b5c6d0 51%, #e0eff9 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f6f8), color-stop(50%,#d8e1e7), color-stop(51%,#b5c6d0), color-stop(100%,#e0eff9));
background: -webkit-linear-gradient(top,  #f2f6f8 0%,#d8e1e7 50%,#b5c6d0 51%,#e0eff9 100%);
background: -o-linear-gradient(top,  #f2f6f8 0%,#d8e1e7 50%,#b5c6d0 51%,#e0eff9 100%);
background: -ms-linear-gradient(top,  #f2f6f8 0%,#d8e1e7 50%,#b5c6d0 51%,#e0eff9 100%);
background: linear-gradient(to bottom,  #f2f6f8 0%,#d8e1e7 50%,#b5c6d0 51%,#e0eff9 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f2f6f8', endColorstr='#e0eff9',GradientType=0 );
min-height:100%;
}
#wrapper { 
}
#content {
width:1150px;
margin-top:6%;
background: rgb(245,246,246);
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Y1ZjZmNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjIxJSIgc3RvcC1jb2xvcj0iI2RiZGNlMiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQ5JSIgc3RvcC1jb2xvcj0iI2I4YmFjNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjgwJSIgc3RvcC1jb2xvcj0iI2RkZGZlMyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmNWY2ZjYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(245,246,246,1) 0%, rgba(219,220,226,1) 21%, rgba(184,186,198,1) 49%, rgba(221,223,227,1) 80%, rgba(245,246,246,1) 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(245,246,246,1)), color-stop(21%,rgba(219,220,226,1)), color-stop(49%,rgba(184,186,198,1)), color-stop(80%,rgba(221,223,227,1)), color-stop(100%,rgba(245,246,246,1)));
background: -webkit-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: -o-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: -ms-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: linear-gradient(to bottom,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f5f6f6', endColorstr='#f5f6f6',GradientType=0 );

;
}
.headline_font {
    -moz-box-shadow:inset 1px 1px 0px 1px #f29c93;
    -webkit-box-shadow:inset 1px 1px 0px 1px #f29c93;
    box-shadow:inset 1px 1px 0px 1px #f29c93;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fe1a00), color-stop(1, #ce0100) );
    background:-moz-linear-gradient( center top, #fe1a00 5%, #ce0100 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fe1a00', endColorstr='#ce0100');
    background-color:#fe1a00;
    -moz-border-radius:12px;
    -webkit-border-radius:12px;
    border-radius:12px;
    border:1px solid #d83526;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:24px;
    font-weight:bold;
    padding:12px 40px;
    text-decoration:none;
    text-shadow:1px 1px 0px #b23e35;
    text-align:center;
}.headline_font:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ce0100), color-stop(1, #fe1a00) );
    background:-moz-linear-gradient( center top, #ce0100 5%, #fe1a00 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ce0100', endColorstr='#fe1a00');
    background-color:#ce0100;
}.headline_font:active {
    position:relative;
    top:1px;
}
#header
{
    height:240px;

}
@font-face {
    font-family:mypost-font;
    src:url('http://www.pnrenquiry.in/fonts/HelveticaNeue-Roman.otf');
    font-weight:lighter;

}
@font-face {
font-family:mytitle-font;
    src:url('http://www.pnrenquiry.in/fonts/Veneer.ttf');
}

#post_my_head
{
    font-family:mytitle-font;
    font-size:28px;
}
#post_my_head a
{
    text-decoration:none;
    color:#000;
}
#post_my_content
{

    border-bottom:10px solid black;
    font-family:mypost-font;
    font-size:23px;
    text-decoration:none;
    text-align:left;

}
#posted_date_time
{
    font-size:22px;
    font-weight:bolder;
    float:left;
}
#my_site_headline 
{
    width:100%;
    display:inline;

}
.headline_font {
    -moz-box-shadow:inset 1px 1px 0px 1px #f29c93;
    -webkit-box-shadow:inset 1px 1px 0px 1px #f29c93;
    box-shadow:inset 1px 1px 0px 1px #f29c93;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fe1a00), color-stop(1, #ce0100) );
    background:-moz-linear-gradient( center top, #fe1a00 5%, #ce0100 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fe1a00', endColorstr='#ce0100');
    background-color:#fe1a00;
    -moz-border-radius:12px;
    -webkit-border-radius:12px;
    border-radius:12px;
    border:1px solid #d83526;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:24px;
    font-weight:bold;
    padding:12px 40px;
    text-decoration:none;
    text-shadow:1px 1px 0px #b23e35;
    text-align:center;
}.headline_font:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ce0100), color-stop(1, #fe1a00) );
    background:-moz-linear-gradient( center top, #ce0100 5%, #fe1a00 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ce0100', endColorstr='#fe1a00');
    background-color:#ce0100;
}.headline_font:active {
    position:relative;
    top:1px;
}
/* This imageless css button was generated by CSSButtonGenerator.com */

#my_site_headline a
{
background: #ffffff;
background: -moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(50%,#f1f1f1), color-stop(51%,#e1e1e1), color-stop(100%,#f6f6f6));
background: -webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%);
background: -o-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%);
background: -ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%);
background: linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0 );

    text-decoration:none;
    border:2px #0033FF hidden;
    color:#000;
    font-size:26px;
    font-weight:bolder;
}

#nav
{
    position:fixed;
    width:82%;
    height:8%;  
/*  background: rgb(53,106,160);
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzM1NmFhMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMzNTZhYTAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(53,106,160,1) 0%, rgba(53,106,160,1) 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(53,106,160,1)), color-stop(100%,rgba(53,106,160,1)));
background: -webkit-linear-gradient(top,  rgba(53,106,160,1) 0%,rgba(53,106,160,1) 100%);
background: -o-linear-gradient(top,  rgba(53,106,160,1) 0%,rgba(53,106,160,1) 100%);
background: -ms-linear-gradient(top,  rgba(53,106,160,1) 0%,rgba(53,106,160,1) 100%);
background: linear-gradient(to bottom,  rgba(53,106,160,1) 0%,rgba(53,106,160,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#356aa0', endColorstr='#356aa0',GradientType=0 );*/

}

@charset "utf-8";
/* CSS Document */
.button {
  font-family: Georgia;
  color: #ffffff;
  font-size: 34px;
  padding: 10px;
  padding-right: 25px;
  padding-left: 35px;
  text-decoration: none;
  text-align:center;
  -webkit-border-radius: 28px;
  -moz-border-radius: 28px;
  -webkit-box-shadow: 0px 1px 3px #666666;
  -moz-box-shadow: 0px 1px 3px #666666;
  text-shadow: 1px 1px 3px #666666;
  border: solid #2e2e2e 0px;
  background: -webkit-gradient(linear, 0 0, 0 100%, from(#7abbfc), to(#3f9de6));
  background: -moz-linear-gradient(top, #7abbfc, #3f9de6);
  -ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#7abbfc, endColorStr=#3f9de6);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#7abbfc, endColorStr=#3f9de6);
  display:inline-block; /* IE is so silly */
}
.button:hover {
  background: #e62097;
}
#my_tabs 
{
    width:100%;
    list-style:none; 
    margin-left:-4%;

}

#my_tabs li
{
    float:left;
    display:inline;

}
#my_tabs li a
{
white-space:nowrap;
text-decoration:none;
/*   text-shadow: 0.2em 0.2em 0.2em #999999;
*/  color:#000;
font-family:mytitle-font;

padding-left:6%;
}

#my_post_link:link {

    text-decoration:none;
    color:#0145ec;
}
#my_post_link:visited
{
    text-decoration:none;
    color:#999;

}
#my_post_link:hover
{
    text-decoration:none;
    color:#F0F;
}

#tool-1 {
    font-family:mytitle-font;
    text-align:center;
    font-size:30px;
    color:#F00;
    width:960px;
    padding-top:15%;
    padding-left:5%;
}
#sidebar {
    right:0;
    width:18%;
    position:absolute;
    margin-top:11%;

}
#twitter_follow
{
        padding-top:3px;

}
.fb-like-box {
    padding-top:3px;
    width:100%;
}
#alexa-widget
{
padding-top:3px;

}
#recent_posts
{
    border:2px #000000 solid;
        background: rgb(76,76,76); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzRjNGM0YyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEyJSIgc3RvcC1jb2xvcj0iIzU5NTk1OSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzY2NjY2NiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjM5JSIgc3RvcC1jb2xvcj0iIzQ3NDc0NyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzJjMmMyYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjYwJSIgc3RvcC1jb2xvcj0iIzExMTExMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijc2JSIgc3RvcC1jb2xvcj0iIzJiMmIyYiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjkxJSIgc3RvcC1jb2xvcj0iIzFjMWMxYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxMzEzMTMiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(44,44,44,1) 50%, rgba(0,0,0,1) 51%, rgba(17,17,17,1) 60%, rgba(43,43,43,1) 76%, rgba(28,28,28,1) 91%, rgba(19,19,19,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(76,76,76,1)), color-stop(12%,rgba(89,89,89,1)), color-stop(25%,rgba(102,102,102,1)), color-stop(39%,rgba(71,71,71,1)), color-stop(50%,rgba(44,44,44,1)), color-stop(51%,rgba(0,0,0,1)), color-stop(60%,rgba(17,17,17,1)), color-stop(76%,rgba(43,43,43,1)), color-stop(91%,rgba(28,28,28,1)), color-stop(100%,rgba(19,19,19,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 ); /* IE6-8 */
}
#rec_post
{
    list-style:none;
    font-style:mytitle_font;
    font-size:22px;
    color:#F00;

}
#rec_post_li a
{
    text-decoration:none;
    color:#ffffff;
    font-size:18px;

}
#my_post_links:link {

    text-decoration:none;
    color:#FFF;
}
#my_post_links:visited
{
    text-decoration:none;
    color:#999;

}
#my_post_links:hover
{
    text-decoration:none;
    color:#F0F;
}
#my_links:link {

    text-decoration:none;
    color:#000;
}
#my_links:visited
{
    text-decoration:none;
    color:#999;

}
#my_links:hover
{
    text-decoration:none;
    color:#F0F;
}

#footer { 
height:200px;
text-align:center;
font-family:mypost-font;
font-size:35px;
color:#000;
}
#justin
{
    width:100%;
    text-align:center;
    font-size:28px;
    font-weight:bolder;
    color:#F00;
    background:#000;
} 
```

抱歉发布了长代码。请参阅#content 和 #sidebar 和 #my_body。侧边栏和内容失败。这是我在 iPad 2 上的屏幕截图。

![Ipad 2 屏幕截图](../Images/c0461d1c6b6695439fd225bb56ac6b2a.png)

这是我的确切问题。我在右侧得到了这个奇怪的空间而没有被使用。字体大小重新调整大小工作完美，但宽度分配失败。它适用于我的台式机、笔记本电脑以及 iPad 和在线可用的移动模拟器.为什么会这样？

我还有几个问题。移动模拟器工作吗？它们是否可靠用于 UI 测试目的。如果是，为什么它们在我的案例中失败？我使用的在线模拟器是[link1](http://alexw.me/ipad2/)和[link2](http://www.opera.com/developer/tools/mini/) 。我的网站地址是[link3](http://www.pnrenquiry.in)。请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:55:07.120

这是解决简单事情的复杂方法！

缩放事物的最佳方法是使用视口设置：http: [//developer.apple.com/library/IOS/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/IOS/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

您可以根据需要使用它来放大或缩小整个显示。

然后，您通常使用媒体查询 ( [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/) ) 来根据需要更改字体大小或其他属性。

如果这还不够，您可以使用视口相对单位（而不是`px`or `em`，您使用`vw`,`vh`和`vmin`）来调整大小。

在这些示例中，`1vm`= 1% 的视口宽度，`1vh`是高度，并且`1vmin`是最小的。

这是与您的问题相关的示例： http: [//css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/) 这些在 iOS 6 中受支持。

# c - 需要修复这个素数生成代码（SPOJ PRIME1）

> ID：12748656
> 
> 赞同：-1
> 
> 时间：2012-10-05T14:42:48.760
> 
> 标签：c

我正在尝试解决[这个](http://www.spoj.pl/problems/PRIME1/)问题，我想出了这个

```
#include <stdio.h>
#define primeLimit 100000

int prime (long int Start2,  long int Stop2 )
{
    long int a[primeLimit];
    long int i,j,k,l;
    for (i=Start2;i<=Stop2;i++) {
        a[i] = 1;
    }
    for (i=Start2;i<=Stop2;i++) {
    if (a[i]!= 0 && i!=1) {
        for (j=2; j*j< i;j++) {
            if(i%j==0)
                break;
        }
        if(j*j > i) {
            printf(" \n %d",i);
            l = i;
            for (k = i*i; k< Stop2;) {
                a[k] = 0;
                k = k+l;
            }
        }
        else {
            a[i] = 0;
        }
    }
}

return 0;
}

int main(void)
{
    long int start,stop,a,look;
    scanf("%ld", &look);
    for (a=1;a<=look;a++) {
        scanf("%ld %ld", &start,&stop);
        prime (start,stop);
    }
    return 0;
} 
```

我在 32 位 windows 7 PC 上使用 GNU GCC 编译器、CodeBlocks IDE。当我在我的编译器上运行它时，代码很好。但是当提交它显示运行时错误（**SIGSEGV**）。谁能指出我哪里出错了/如何做得更好？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:18:44.370

允许的输入范围从 1 到 1000000000，但您的数组只有 100000 个元素 .. 两个输入之间的差异。您应该使用`i-Start2`or `k-Start2`、 not `i`or对其进行索引`k`。你需要`a[primeLimit+1]`，因为你需要访问 `a[Stop2-Start2]`，即`a[100000]`。

# parsing - Haskell 解析器到 AST 数据类型 - 输入“|”时解析错误

> ID：12748659
> 
> 赞同：1
> 
> 时间：2012-10-05T14:43:07.243
> 
> 标签：parsing, haskell

我正在为我们得到的一项任务而苦苦挣扎。我在这里根据不同的指南稍微编写了这段代码：[不在范围内：数据构造函数](https://stackoverflow.com/questions/10476050/not-in-scope-data-constructor)

我遇到的问题是这里的管道：

```
| x == "+" = (Sum y y',xs'') where 
```

这个问题似乎与在“where”后面有 3 个管道或一个管道有关。如果我交换最后 2 个管道。推杆

```
x == "+"  = (Sum y y' (...)) 
```

前

```
x == "*"  = (Prod y y' (...)) 
```

导致错误移动到该代码。如果我注释掉这两个代码段中的任何一个，一切正常，但我需要它们两个来完成我们被分配的任务。

快速总结：

```
| x == "*" = (Prod y y',xs'') where
                (y,xs') = ast xs
                (y',xs'') = ast xs' 
```

和

```
| x == "+" = (Sum y y',xs'') where
                (y,xs') = ast xs
                (y',xs'') = ast xs' 
```

两者都 100% 单独工作，但是当我将它们放在一起时，我的程序无法编译。

完整代码：

```
import Data.Char

data AST = Leaf Int 
            | Sum AST AST 
            | Min AST 
            | Prod AST AST
            deriving Show

tokenize::String -> [String]
tokenize[] = []
tokenize('+':xs) = "+": tokenize xs
tokenize('-':xs) = "-": tokenize xs
tokenize('*':xs) = "*": tokenize xs
tokenize(x:xs) = if isDigit x then (takeWhile isDigit (x:xs)) : tokenize (dropWhile isDigit xs) else tokenize(xs)

ast :: [String] -> (AST,[String])
ast [] = error "Empty string"
ast (x:xs) | all isDigit x = (Leaf (read x),xs)
    | x == "-" = let (y,xs') = ast xs in (Min y,xs')
    | x == "*" = (Prod y y',xs'') where
            (y,xs') = ast xs
            (y',xs'') = ast xs'
    | x == "+" = (Sum y y',xs'') where
            (y,xs') = ast xs
            (y',xs'') = ast xs' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:48:09.560

问题在

```
ast [] = error "Empty string"
ast (x:xs) | all isDigit x = (Leaf (read x),xs)
    | x == "-" = let (y,xs') = ast xs in (Min y,xs')
    | x == "*" = (Prod y y',xs'') where
            (y,xs') = ast xs
            (y',xs'') = ast xs'
    | x == "+" = (Sum y y',xs'') where
            (y,xs') = ast xs
            (y',xs'') = ast xs' 
```

`where`是函数定义中的每个方程只能有一个子句。因此，`where`在`x == "*"`替代方案之后，解析器期望模式的等式`(x:xs)`是完整的。

只需删除有问题的`where`，该`where`子句的范围涵盖等式中的所有替代项，并且两个`where`子句具有相同的内容（并且缩进更好，`where`根据我的喜好，属于自己的行）。由于`let`在第一个替代方案中使用了也存在于`where`子句中的绑定，因此也可以将其删除：

```
ast [] = error "Empty string"
ast (x:xs) | all isDigit x = (Leaf (read x),xs)
    | x == "-" = (Min y,xs')
    | x == "*" = (Prod y y',xs'')
    | x == "+" = (Sum y y',xs'')
      where
        (y,xs') = ast xs
        (y',xs'') = ast xs' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:51:49.490

一种解决方法是使用`let`而不是`where`：

```
ast :: [String] -> (AST,[String])
ast [] = error "Empty string"
ast (x:xs) | all isDigit x = (Leaf (read x),xs)
    | x == "-" = let (y,xs') = ast xs in (Min y,xs')
    | x == "*" = let
            (y,xs') = ast xs 
            (y',xs'') = ast xs'
            in (Prod y y',xs'')
    | x == "+" = let 
            (y,xs') = ast xs
            (y',xs'') = ast xs'
            in (Sum y y',xs'') 
```

您可以在 a 中拥有任意数量的定义`let`，而不仅仅是一个。

`where`语句在范围内到最后，而`let`在`in`. 这就是您收到错误消息的原因 - 它认为您仍在 中`where`，但您想继续。将您的条款推迟`where`到最后。

在这种情况下，您不需要将它们分开，因此可以将它们组合成一个 where，但`let`通常对这个问题很有用。

# android - Android SurfaceView 占据布局中的所有空间

> ID：12748672
> 
> 赞同：0
> 
> 时间：2012-10-05T14:43:55.907
> 
> 标签：android, layout, surfaceview

我有这个布局：

```
<LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical">

                <SurfaceView
                    android:id="@+id/Preview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginBottom="20dp"
                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp" />

                <VideoView
                    android:id="@+id/videoView"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginBottom="20dp"
                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp"/>
            </LinearLayout> 
```

SurfaceView 和 VideoView 应该平等地共享可用空间，如果我将 VideoView 放在首位，它们就会这样做。当我像上面那样做时，SurfaceView 会占用布局中的所有空间。如果不为宽度和高度提供特定的 dps，我怎么能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:47:28.727

尝试使用“weightSum=2”。还要在两个视图中分割边距！

```
<LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:weightSum="2">

            <SurfaceView
                android:id="@+id/Preview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_weight="1"/>

            <VideoView
                android:id="@+id/videoView"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="20dp"
                android:layout_weight="1"/>
        </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:51:21.940

你们两个都`Views`在填充父属性，因为属性状态：`android:layout_width=fill_parent`

要平均划分屏幕，使您的两个视图彼此相邻，您可以使用权重：

```
 <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical">

            <SurfaceView
                android:id="@+id/Preview"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_marginBottom="20dp"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_weight="1" />

            <VideoView
                android:id="@+id/videoView"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_marginBottom="20dp"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_weight="1" />
        </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:52:12.733

您必须添加 layout_weight=1

```
<LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical">

                <SurfaceView
                    android:id="@+id/Preview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginBottom="20dp"
                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp" 
                    android:layout_weight="1"/>

                <VideoView
                    android:id="@+id/videoView"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_marginBottom="20dp"
                    android:layout_marginLeft="20dp"
                    android:layout_marginRight="20dp"
                    android:layout_weight="1"/>
            </LinearLayout> 
```

# database - RESTful Web 服务的理想数据库框架

> ID：12748674
> 
> 赞同：0
> 
> 时间：2012-10-05T14:44:10.203
> 
> 标签：database, rest, jakarta-ee, frameworks, connection

我正在开发一个最小的 Web 服务（密码管理器）。目前，我在不使用任何数据库框架的情况下处理数据库连接，（我想让我的 Web 服务最小化）。我为每个方法打开一个实时连接并以相同的方法关闭它。就是这样。

这是理想的吗？或者那里有一个轻量级的数据库框架？一个最好是小而有效的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:47:35.090

我以前使用过 Sprint JDBC 模板：它们是轻量级的，允许您严格定义自己的 SQL，并为您处理所有连接的东西。

更多信息在这里：

[http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html](http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html)

我将从`SimpleJdbcTemplate`该页面上的描述开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:40:47.730

我强烈推荐阅读有关 CouchDB 的内容。它可以嵌入，它很小，使用 json 和本地 rest，你可以在它之上创建简单的 web 应用程序而无需其他任何东西。

# three.js - 射线与平面的交点坐标

> ID：12748677
> 
> 赞同：7
> 
> 时间：2012-10-05T14:44:24.277
> 
> 标签：three.js

我有射线和飞机。射线与平面相交，我想知道在哪里。我如何获得这个交叉点的世界坐标？

（我的特殊情况是我将屏幕坐标取消投影到相机并创建射线。平面是场景的地面）

```
var vector = new THREE.Vector3( mousePosition.x, mousePosition.y, 1 );
projector.unprojectVector( vector, camera );
var ray = new THREE.Ray(
    camera.position,
    vector.subSelf( camera.position ).normalize()
); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T15:20:34.953

这是通常的模式。您可能必须对其进行调整以适应您的特定情况。

```
var raycaster = new THREE.Raycaster(); // create once and reuse
var mouse = new THREE.Vector2(); // create once and reuse

...

mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;
mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;

raycaster.setFromCamera( mouse, camera );

var intersects = raycaster.intersectObjects( objects, recursiveFlag );

if ( intersects.length > 0 ) {

    console.log( intersects[ 0 ].point; );

} 
```

这里，`objects`是一个数组。例如，

```
var objects = [];

objects.push( plane_mesh ); 
```

编辑：更新为three.js r.84

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T22:29:21.653

从 r55 开始，您可以使用此快捷方式。它很相似，但将光线投射简化到您甚至不必担心 unprojectVector() 的程度。

这是 WestLangley 示例的修改版本：

```
 var vector = new THREE.Vector3( ( 
        event.clientX / window.innerWidth ) * 2 - 1, 
        - ( event.clientY / window.innerHeight ) * 2 + 1, 
        0.5 
    );

    var ray = projector.pickingRay( vector.clone(), camera );

    var intersects = ray.intersectObjects( objects );

    if ( intersects.length > 0 ) {

        console.log( intersects[ 0 ].point; );

    } 
```

这假设相同的对象数组

```
var objects = [];

objects.push( plane_mesh ); 
```

# .net - 为应用程序部署 SQLite 的设置步骤是什么？

> ID：12748678
> 
> 赞同：1
> 
> 时间：2012-10-05T14:44:24.190
> 
> 标签：.net, database, sqlite, deployment, entrypointnotfoundexcept

我迷失在试图弄清楚为什么我的开发计算机上的 sqlite 工作而不是另一个系统上。

我确实记得在我最终让它在我的开发计算机上工作之前，我必须采取一些步骤。我根本不记得他们是什么。

现在，我正在一个干净的系统上测试我的软件，在准备好该系统进行测试之后——比如安装 SQLite 引擎 2.5/3.5 ADO.NET。我的程序在使用数据库文件时启动并退出。窗口错误消息确实显示 - System.Data.Sqlite 和 System.IO.EntryPointNotFound。

有人知道那是什么意思吗？

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:06:13.243

谢谢西布卡。我弄清楚了为什么我在干净的系统上遇到 SQLite 问题。尽管我项目文件夹中的 System.Data.Sqlite dll 在名称和版本上与 program files/SQLite.NET/bin 文件夹中的 dll 文件完全相同，但不知何故它们是不同的。一旦我将 dll 从 SQLite.NET bin 文件夹复制到我的项目文件夹，它就可以在我干净的系统上运行。

因此，如果您遇到与我类似的问题，您首先要做的是，下载并安装 SQLite-1.0.66.0-setup.exe。然后，确保将 System.Data.SQLite dll 文件从 SQLite.NET/Bin 文件夹复制到测试或清洁系统上的项目或应用程序文件夹中。

# r - 在 r 中的同一图上绘制具有不同日期的 2 个数据集

> ID：12748681
> 
> 赞同：0
> 
> 时间：2012-10-05T14:44:37.583
> 
> 标签：r, datetime

我有一个 Dataset_1 几个月只有一些值，例如

```
Day Month   Year    Value
10  5   2003    12
17  5   2003    46
1   6   2003    23
16  6   2003    43
16  10  2003    23
26  10  2003    12 
```

和 Dataset_2 在同一时间段内具有常规 1 小时值，例如

```
Day Month   Year    Hour Value
10  5       2003    0:00 13
10  5       2003    1:00 12
(...)
26  10      2003    21:00 12
26  10      2003    22:00 12 
```

Dataset_1 用于评估 Dataset_2。因此，我想将常规间隔 Dataset_2 与不太常规的 Dataset_1 进行对比。有没有办法（可能使用共同的日期戳）来绘制 Dataset_2 的所有时间步，但让 R 在 Dataset_2 的相应日期绘制 Dataset_1 的点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:31:49.923

您唯一需要做的就是将您的日期和时间声明为确实的日期和时间对象：

```
Dataset_1$timestamp <- strptime(paste(Dataset_1$Day, Dataset_1$Month, 
                                Dataset_1$Year, sep="-"), format="%d-%m-%Y")
Dataset_2$timestamp <- strptime(paste(Dataset_2$Hour, Dataset_2$Day, 
                                Dataset_2$Month, Dataset_2$Year, sep="-"), 
                                format="%H:%M-%d-%m-%Y") 
```

然后，您可以正常绘制数据而无需采取任何特定的预防措施，因为`plot`会识别它们是日期和时间对象。

```
plot(Dataset_1$timestamp, Dataset_1$Value)
lines(Dataset_2$timestamp, Dataset_2$Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:57:48.527

如果您试图在 x 坐标上获得日期和时间的简单 2d 图（可能在 y 上带有“值”），则必须首先将日期和时间表示为实数。

因此，您可以定义一个将日期和时间映射到实数的函数（例如 unix 时间，或者只是 Hour + 24 * Day + ...），并在 Dataset_1 中为 Hour 插入 0（例如通过执行 Dataset_1$Hour <- 0，假设您的数据在数据框中）。

# c++ - 带有 char* 和 << 运算符的条件跳转 valgrind

> ID：12748713
> 
> 赞同：3
> 
> 时间：2012-10-05T14:46:33.713
> 
> 标签：c++, string, valgrind, cout, strcpy

我正在编写我的 String 类版本，但 Valgrind 抱怨我`<<`为我的字符串实现的运算符。错误出现在*错误的行*，如果我按字符打印 char 效果很好。

我哪里错了？

Valgrind 错误：

> ==2769== 条件跳转或移动取决于未初始化的值
> 
> ==2769== 在 0x4C2AC28：strlen（在 /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so 中）
> 
> ==2769== by 0x4ECAD60: std::basic_ostream >& std::operator<< >(std::basic_ostream >&, char const*) （在 /usr/lib/x86_64-linux-gnu/libstdc++.so 中。 6.0.17)
> 
> ==2769== by 0x400BD5: operator<<(std::ostream&, String&) (string.cpp:22)
> 
> ==2769== by 0x400AAC: main (main.cpp:12)

我`<<`的字符串运算符：

```
ostream & operator << (ostream & o, String & inS) {
    o << inS._pData << " "; // the wrong line
    return o;
} 
```

我的`String`班级：

```
class String {
    public:
         unsigned _size;
         char *   _pData;
         String();
         String(const char* inCString);
}; 
```

构造函数（对于`char*`）：

```
String::String(const char* inCString) {
    _size = strlen(inCString);
    _pData = new char[_size + 1];
    strncpy(_pData, inCString, _size);
} 
```

主要.cpp：

```
int main(int, char**) {
    String s1("hello");
    cout << s1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T14:53:40.440

我不建议使用这样的原始字符串。

然而，罪魁祸首在这里：

```
strncpy(_pData, inCString, _size+1); 
```

或者，手动存储 NUL 终止字符：

```
_pData[_size] = 0; 
```

*由于缺少 NUL 终止字符，输出操作将继续运行超过字符串的末尾*。（该行为可能看起来不错，因为该字符可能偶然为 nul，具体取决于编译器、选项等。）

暗示：

*   考虑使用 C++ 风格而不是 C API
*   如果你*必须*使用 C-style `char*`，至少使用`stdrup`and`free`
*   如果您坚持使用以 NUL 结尾的字符串，请考虑也使用 C++ 方式编写：

    ```
    #include <iostream>
    #include <vector>

    class String
    {
    public:
        std::vector<char> _data;
        String();
        String(const char* inCString);
    };

    std::ostream & operator << (std::ostream & o, String const& inS)
    {
        o.write(inS._data.data(), inS._data.size());
        return o << ' ';
    }

    String::String(const char* inCString)
    {
        for (const char* it=inCString; it && *it; ++it)
            _data.push_back(*it);
    }

    int main(int, char**)
    {
        String s1("hello");
        std::cout << s1;
        return 0;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:56:04.660

Because you fail to write the zero byte at the end. You need:

```
strncpy(_pData, inCString, _size + 1);
//                              ^^^^ 
```

You should always [read the manual](http://linux.die.net/man/3/strncpy) very carefully with the `n`-versions of C string functions, since they all have subtly different semantics.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T14:54:26.203

请注意，您没有显式初始化数据成员，而是为它们分配了一个值：

...in order to initialize, you should change to:

```
String::String(const char* inCString) :
    _size(strlen(inCString)),
    _pData(new char[_size + 1])
{
    strncpy(_pData, inCString, _size);
} 
```

# r - 替换R中内置函数的定义？

> ID：12748716
> 
> 赞同：5
> 
> 时间：2012-10-05T14:46:42.057
> 
> 标签：r, function, package

'sparcl' 包使用标准 'stat' 包中的 'kmeans' 函数。我想让它改用我自己的 kmeans++ 实现。

一种方法是编辑 sparcl 包本身的代码。我宁愿避免这种情况，因为它会很混乱，而且我不确定如何在 R 中安装编辑后的代码。

不幸的是，超赋值运算符“<<-”不起作用：

```
> kmeans <<- function(x) print("hi!")
Error: cannot change value of locked binding for 'kmeans' 
```

“分配”也没有：

```
assign("kmeans",function(x) {print("HI THERE!"); return(FALSE)},pos="package:sparcl")
Error in assign("is.null", function(x) { : 
  cannot add bindings to a locked environment 
```

那么编辑包代码是唯一的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T15:37:50.793

如果您确实想在交互式会话期间编辑函数的主体（而不是其参数），您可以使用`trace()`，如下所示：

```
trace("kmeans", edit=TRUE) 
```

然后，在弹出的编辑器中，编辑正文，使其看起来像这样（例如）：

```
function (x, centers, iter.max = 10, nstart = 1, algorithm = c("Hartigan-Wong", 
"Lloyd", "Forgy", "MacQueen")) 
{
    plot(rnorm(99), col = "red")
} 
```

保存编辑的函数定义，然后退出编辑器。

回到 R 命令行，您可以查看编辑的函数并尝试一下：

```
body(kmeans)  # To view the tracing code
kmeans()      # To use the edited function 
```

最后，要恢复到未编辑的功能，只需执行`untrace("kmeans")`. （我通常更喜欢使用`trace()`to`assignInNamespace()`和friends，因为`untrace()`它可以很容易地撤消更改。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:14:20.467

进一步思考（并在重新阅读您的问题后），这是一个适合您的简单解决方案。

您需要做的就是将您编辑的版本分配给全局环境`kmeans()`中的符号`kmeans`。换句话说，在命令行执行以下操作：

```
kmeans <- function(...) plot(rnorm(99), col="red") # but using your own edits

## Then run an example from ?KMeansSparseCluster to see that it works.
library(sparcl)
x <- matrix(rnorm(50*300),ncol=300)
x[1:25,1:50] <- x[1:25,1:50]+1
x <- scale(x, TRUE, TRUE)
KMeansSparseCluster.permute(x,K=2,wbounds=seq(3,9,len=15),nperms=5) 
```

这是有效的，因为`KMeansSparseCluster()`（和调用任何其他函数`package:sparcl`）`kmeans` *首先*查找in `namespace:sparcl`，*然后*in `imports:sparcl`，*然后*in `namespace:base`，然后 in ，它会在它到达 in 之前`.GlobalEnv`找到您的重新定义。要自己看看，试试这个：`kmeans``package:stats`

```
parent.env(asNamespace("sparcl"))
parent.env(parent.env(asNamespace("sparcl")))
parent.env(parent.env(parent.env(asNamespace("sparcl"))))
## etc., also wrapping any of the environments above in calls to ls() 
## to see what's in 'em 
```

很好，使用的 stats 包中的函数`kmeans()`不会被您的版本中断，因为它们会`kmeans`在符号搜索进入全局环境之前在自己的命名空间中找到。

# iphone - 未直接导航时未调用委托

> ID：12748720
> 
> 赞同：0
> 
> 时间：2012-10-05T14:46:55.393
> 
> 标签：iphone, ios, ios5, delegates, protocols

我创建了三个视图控制器，`FirstViewController`即`SecondViewController`& `ThirdViewController`。`FirstViewController`推，`SecondViewController`同样`SecondViewController`推`ThirdViewController`。

这`ThirdViewController`是一个 UITableViewController。

和`SecondViewController`具有`ThirdViewController`自定义协议。他们都传递了一些价值来`FirstViewController`使用他们各自的代表。

问题是`SecondViewController`成功地将值传递给`FirstViewController`，但`ThirdViewController`无法做到这一点。

是不是因为`SecondViewController`直接从 导航`FirstViewController`，所以可以通过，`ThirdViewController`没有连接，`FirstViewController`所以不能通过数据？

任何帮助，将不胜感激。

编辑：

`FirstViewController`只需按下`SecondViewController`按钮动作。

是`SecondViewController.h`：

```
@protocol secondViewDelegate <NSObject>

-(void)didCompleteSending:(NSArray *)array;

@end

@interface secondView : UIViewController
@property (nonatomic,strong) NSArray *footballPlayers;
@property (assign) id<secondViewDelegate>delegate;
- (IBAction)btnAction:(id)sender;
- (IBAction)btnGoToThirdView:(id)sender; 
```

是`SecondViewController.m`：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

footballPlayers = [[NSArray alloc]initWithObjects:@"Rooney",@"Van Persie",@"Ronaldo",@"Kagawa", nil];
}

- (IBAction)btnAction:(id)sender {
[delegate didCompleteSending:footballPlayers];
}
- (IBAction)btnGoToThirdView:(id)sender {
thirdView *objthirdView = [[thirdView alloc]init];
objthirdView.delegate=self;
[self.navigationController pushViewController:objthirdView animated:YES];
} 
```

同样，我有 for `ThirdViewController`。

在`FirstViewController.h` -(void)didSendDetailsFromThirdView:(NSString *)colors{ NSLog(@"selected string is = %@",colors); }

```
-(void)didCompleteSending:(NSArray *)array{
  for (NSString *str in array) {
    NSLog(@"%@",str);
  }
 } 
```

`-(void)didSendDetailsFromThirdView:(NSString *)colors`不会从“ThirdViewController”调用。

第二次编辑

```
- (IBAction)btnGoToThirdView:(id)sender {
FirstViewController *objFirstViewController = [FirstViewController alloc]init];
thirdView *objthirdView = [[thirdView alloc]init];
objthirdView.delegate=objFirstViewController;
[self.navigationController pushViewController:objthirdView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:08:52.610

`ThirdViewController`您正在将`SecondViewController`.m中的委托设置为 self

```
objthirdView.delegate=self; 
```

这意味着 the 的代表`ThirdViewController`是`SecondViewController`而不是`FirstViewController`。保留对`FirstViewController`in 的引用`SecondViewController`并将其用作这样的委托。

```
objthirdView.delegate=myFirstViewController; 
```

假设不可能从那里弹出，`ThirdViewController`您`FirstViewController`可能会滥用将`SecondViewController`数据传递回`FirstViewController`您已经实现的通过委托方法。但我不会推荐它——它不是一个好的设计。

# matlab - 在MATLAB中将非整数转换为二进制

> ID：12748721
> 
> 赞同：0
> 
> 时间：2012-10-05T14:46:58.937
> 
> 标签：matlab, binary, integer, decimal

当我尝试将十进制数（例如 1.571）转换为二进制时，对于所有非整数值，我得到 0。有没有办法在MATLAB中以二进制显示小数？

这是我的代码的摘录：

```
%The region between 0 and 2*pi is split up into 40 sections
N=20;
%The step is an the incrementation amount of the calculated sin
step= (2*pi)/40
%Cycle through and calculate the sin at each step
for i=1:N
    C_r(i) =  sin(step*i)
end

for i = 1 : N
    str_r = dec2bin(C_r(i),24);
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:54:50.253

[`typecast`](http://www.mathworks.se/help/matlab/ref/typecast.html)您可以使用然后使用将您的双打转换为 uint64 `dec2bin`：

```
ui = typecast(pi, 'uint64');
dec2bin(ui)
ans =

100000000001001001000011111101101010100010001000010110000000000 
```

`typecast`更改您查看数据的方式，而无需任何实际的类型转换。因此，您将获得原始双精度为无符号 64 位整数。现在您必须根据 IEEE 标准 754 自行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:11:45.957

关于如何用二进制表示小数，没有一个正确的答案。双精度浮点数是一，如果这是您想要的二进制字符串，请参阅 angainor 的答案。其他选择是单精度浮点或某种形式的定点。在定点中，您基本上将数字的缩放版本编码为整数。

在任何情况下，数据的消费者都需要在二进制字符串有意义之前就确切的格式达成一致。您的二进制字符串的用例是什么？

# batch-file - 如何从批处理脚本中的文件搜索中创建可选列表？

> ID：12748724
> 
> 赞同：0
> 
> 时间：2012-10-05T14:47:15.443
> 
> 标签：batch-file, dos

我想制作一个批处理文件，它将搜索目录中所有 .sln 文件的文件，然后将它们显示为列表，以便用户可以从列表中选择他们想要的文件，然后打开该文件。不确定如何存储文件以将它们放入列表中。这是我到目前为止..

```
set TT_API_PATH=C:\dir
cd %TT_API_PATH%
dir /b /s *.sln 
set cmd=dir /b /s *.sln 
FOR /F %%i IN (' %cmd% ') DO SET X=%%i 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T06:45:45.443

**编辑：**将不必要且危险的`call echo %%x] !choice[%%x]!`命令替换为`echo %%x] !choice[%%x]!`. 甚至不知道为什么我首先将它包括在内。

# **笔记：**

忽略单独的`:`行，由于某种原因，我的代码中的所有空行都崩溃了，在空行上放一些东西以保持格式是必要的。对不起。

```
@echo off
setlocal enabledelayedexpansion
set count=0

:
:: Read in files
for %%x in (*.sln) do (
  set /a count=count+1
  set choice[!count!]=%%x
)

:
echo.
echo Select one:
echo.

:
:: Print list of files
for /l %%x in (1,1,!count!) do (
   echo %%x] !choice[%%x]!
)
echo.

:
:: Retrieve User input
set /p select=? 
echo.

:
:: Print out selected filename
echo You chose !choice[%select%]! 
```

* * *

**编辑：**更改示例以根据要求包含子目录。

为了满足您对在子目录中找到的 sln 文件的要求，我更改了`for %%x in (*.sln)`，它只返回在当前目录中找到的 sln 文件，它在当前目录`for /f %%x in ('dir /s /b *.sln')`中执行`dir /s /b *.sln`命令并返回结果。

为了使输出尽可能干净和清晰，我还将列出整个路径中的文件时打印的内容更改为`!choice[%%x]!`从当前目录开始的相对路径`!choice[%%x]:%cd%\=!`（替换当前路径和目录（`%cd%`）加上反斜杠（`\`）什么都没有）。

```
@echo off
setlocal enabledelayedexpansion
set count=0

:
:: Read in files
for /f %%x in ('dir /s /b *.sln') do (
    set /a count=count+1
    set choice[!count!]=%%x
)

:
echo.
echo Select one:
echo.

:
:: Print list of files
for /l %%x in (1,1,!count!) do (
     echo %%x] !choice[%%x]:%cd%\=!
)
echo.

:
:: Retrieve User input
set /p select=? 
echo.

:
:: Print out selected filename
echo You chose !choice[%select%]! 
```

上面的代码仅显示从当前目录到文件的相对路径，但将完整路径保留在变量`choice[#]`中。

* * *

如果您根本不想处理整个路径，您可以在循环中**添加一行**，并将`for /f %%x...`循环中的 echo 行恢复为`for /l %%x ...`（编辑的）第一个示例中的内容，以便代码如下所示（解释更改的去向与显示整个代码一样长，所以）：

```
@echo off
setlocal enabledelayedexpansion
set count=0

:
:: Read in files
for /f %%x in ('dir /s /b *.sln') do (
    set /a count=count+1
    set choice[!count!]=%%x
    for %%y in (!count!) do set "choice[%%y]=!choice[%%y]:%cd%\=!"
)

:
echo.
echo Select one:
echo.

:
:: Print list of files
for /l %%x in (1,1,!count!) do (
     echo  %%x] !choice[%%x]!
)
echo.

:
:: Retrieve User input
set /p select=? 
echo.

:
:: Print out selected filename
echo You chose !choice[%select%]! 
```

编辑/恢复该`echo`语句并不是绝对必要的，并且根本不会更改输出，但这是一种很好的编程习惯，因为它只是识别出`choice[#]`在最初读取文件名时变量中当前目录的路径已经被删除的事实. 更改它可以消除不必要的复杂性，并消除如果代码被更改或适应其他用途时可能出现的意外结果。如果您不理会该行，它将再次尝试用任何内容替换变量中当前目录的所有实例`choice[#]`。当它无法替换任何内容时，它将简单地保持字符串不变。

# c - 为什么代码返回 23

> ID：12748726
> 
> 赞同：1
> 
> 时间：2012-10-05T14:47:32.653
> 
> 标签：c, exit, directfb

在directfb的教程中，链接是[画一条水平线的简单全屏应用程序](http://directfb.org/docs/DirectFB_Tutorials/image.html)

我的问题是为什么它返回 23？

在ASCII中，23表示ETB，返回ETB的原因是什么？这让我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:50:46.713

`main`C 或 C++ 程序的函数应向操作系统或其父进程返回[退出代码。](http://en.wikipedia.org/wiki/Exit_status)在这种情况下，`23`是此程序返回的退出代码。

通常，返回`0`意味着成功。根据系统的不同，其他退出代码可能会被“保留”用于特殊目的，也就是说，它们仍然可以使用，但可能会使操作系统误以为程序错误地结束了。

退出代码在运行外部程序并检查它们是否成功完成或有任何特定响应时很有用。您必须参考特定的程序文档以了解每个退出代码的含义。

# sql - 基于因行而异的表连接

> ID：12748730
> 
> 赞同：2
> 
> 时间：2012-10-05T14:47:41.487
> 
> 标签：sql, tsql

假设我有一个`Example`包含三列的表：`X, TableName, ColumnName`.

`TableName`将表的名称存储在数据库中，并`ColumnName`存储我要加入的列的名称`X`。问题是不同的行需要连接到不同的表（以明确定义的方式）。

我希望能够做类似的事情：

```
Select *
from Example join TableName on X = ColumnName 
```

这显然行不通。

我很新，做了一些谷歌搜索，似乎我可以使用游标循环遍历行并使用动态 SQL，因为表和列的名称存储在数据库中，但我听说游标和动态 SQL 都应该避免，所以我没有研究它的细节。我希望有一种首选的方法来解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:57:08.870

动态 SQL**可能**比存储过程慢，但并非总是如此，并且随着 SQL Server 的成熟而变得更好。只要有可能，就应该使用非动态 SQL，因为它更简洁且更易于维护。然而，动态 SQL 确实有它的位置（像 Entity Framework 和 NHibernate 这样的 ORM 工具几乎完全使用动态 sql）。如果可能的话，应该避免使用游标，但是 SQL 确实支持可以使用的 WHILE 循环。

```
DECLARE @Identity int = SELECT MIN(ex.Identity) FROM Example ex
DECLARE @TableName varchar(200)
DECLARE @ColumnName varchar(200)
WHILE @Identity IS NOT NULL BEGIN
    SELECT
        @TableName = ex.TableName,
        @ColumnName = ex.ColumnName
    FROM
        Example ex
    WHERE
        ex.Identity = @Identity

    /*
        build and execute your dynamic sql here
    */
    SET @Identity int = SELECT MIN(ex.Identity) FROM Example ex WHERE ex.Identity > @Identity
END 
```

# logcat - 如何使用 JellyBean 读取带有 -vtime 选项的完整 logcat 行？

> ID：12748731
> 
> 赞同：1
> 
> 时间：2012-10-05T14:47:46.207
> 
> 标签：logcat, android-4.2-jelly-bean

我在 ICS (4.0.3) 上有一个应用程序，它使用带有 -vtime 选项的 logcat。它使用以下代码读取 logcat：

```
try {
  Process process = Runtime.getRuntime().exec("logcat -vtime -d");
  BufferedReader bufferedReader = new BufferedReader(
  new InputStreamReader(process.getInputStream()));
  String line = "";

  while ((line = bufferedReader.readLine()) != null) {
      ... my stuff with this line...
} 
catch (IOException e) {
} 
```

我在清单文件中使用“android.permission.READ_CALL_LOG”和“android.permission.READ_LOGS”，并且我设法拥有完整的logcat。

当我将此代码与 JellyBean (4.1.1) 一起使用时，我的缓冲区仅捕获我的应用程序 logcat 而不是完整的设备 logcat。

我怎样才能拥有这个完整的 logcat？是另一种许可吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:38:46.930

JellyBean (4.1.1) does not grant 3rd party applications to access a full system logcat. Application can only see own logging rows. I think you don't need to give READ_LOGS permission in AndroidManifest.xml anymore(any app can logcat own lines).

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6U4A5irWang](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6U4A5irWang)

If you still want to read a full logcat you need to rooted device and give superuser access to your application.

# javascript - .wrap() 不适用于使用 jQuery 的自定义 XML

> ID：12748732
> 
> 赞同：0
> 
> 时间：2012-10-05T14:47:47.007
> 
> 标签：javascript, jquery, xml

所以我有这个xml

```
<Item name="Alpha">
   <Field name="CreationDateTime">2012-04-26</Field>
   <Field name="Material" readOnly="X"> Congress </Field>
</Item>
<Item name="Beta">
  <Field name="CreationDateTime">2012-04-26</Field>
  <Field name="Material" readOnly="X"> Congress </Field>
</Item> 
```

我想使用 jQuery 将它包装在这样的节点中

```
<parent>
 <Item name="Alpha">
   <Field name="CreationDateTime">2012-04-26</Field>
   <Field name="Material" readOnly="X"> Congress </Field>
</Item>
<Item name="Beta">
  <Field name="CreationDateTime">2012-04-26</Field>
  <Field name="Material" readOnly="X"> Congress </Field>
</Item></parent> 
```

我试过`$(xml).wrap('<parent />')`了，但它似乎不适用于非 html 标签名称！同样，我也尝试了 before() 和 append() 的组合。

有什么方法可以在 jQuery 中快速完成，而无需将其转换为字符串。如果那是最后一个选项，那么我如何转换为字符串并做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:18:39.943

You can apply xsl to wrap the xml doc, example

```
<xsl:template match="/">
    <parent>
        <xsl:apply-templates/>
    </parent>
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
         <xsl:apply-templates/>
    </xsl:copy>
 </xsl:template> 
```

should get you the output you want

# windows - System.Windows.Forms.TextBox.ForeColor

> ID：12748733
> 
> 赞同：0
> 
> 时间：2012-10-05T14:47:54.557
> 
> 标签：windows, winforms, textbox

我正在尝试根据 TextBox 中显示的文本在运行时设置 System.Windows.Forms.TextBox 的 ForeColor 属性，但我所做的任何事情都不会覆盖 Visual Studio 设置的属性值。

我正在使用 VB Express 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:51:49.417

您可以处理 Textbox.TextChanged 事件，如下所示：

```
Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged

    If TextBox1.Text.Length Mod 2 = 0 Then
        TextBox1.ForeColor = Color.Red
    Else
        TextBox1.ForeColor = Color.Blue
    End If

End Sub 
```

# javascript - 向所有不包含更多 ul 元素的项目添加类

> ID：12748737
> 
> 赞同：1
> 
> 时间：2012-10-05T14:48:04.010
> 
> 标签：javascript, jquery, html-lists

我有个问题。请参阅我的代码部分：

```
<ul>
  <li><a href="#">Test 1</a></li>
  <li><a href="#">Test 2</a>
    <ul>
      <li><a href="#">Test 3</a></li>
      <li><a href="#">Test 4</a></li>
    </ul>  
  </li>
  <li><a href="#">Test 5</a></li>
  <li><a href="#">Test 6</a></li>
  <li><a href="#">Test 7</a></li>  
  <li><a href="#">Test 8</a>
    <ul>
      <li><a href="#">Test 9</a></li>
      <li><a href="#">Test 10</a></li>
      <li><a href="#">Test 11</a></li>
      <li><a href="#">Test 12</a></li>  
    </ul>  
  </li>  
</ul> 
```

我想为所有不包含更多 ul 元素的项目添加类 - 请查看我想要实现的目标：

```
<ul>
  <li><a href="#" class="link">Test 1</a></li>
  <li><a href="#">Test 2</a>
    <ul>
      <li><a href="#" class="link">Test 3</a></li>
      <li><a href="#" class="link">Test 4</a></li>
    </ul>  
  </li>
  <li><a href="#" class="link">Test 5</a></li>
  <li><a href="#" class="link">Test 6</a></li>
  <li><a href="#" class="link">Test 7</a></li>  
  <li><a href="#">Test 8</a>
    <ul>
      <li><a href="#" class="link">Test 9</a></li>
      <li><a href="#" class="link">Test 10</a></li>
      <li><a href="#" class="link">Test 11</a></li>
      <li><a href="#" class="link">Test 12</a></li>  
    </ul>  
  </li>  
</ul> 
```

我想使用jquery。非常感谢任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:54:18.357

```
$('li > a').filter(function() {
  return !$(this).siblings('ul').length;
}).addClass('link'); 
```

**编辑**

刚刚在您的问题中注意到您希望嵌套列表锚也具有`link`该类，这样的事情应该可以工作：-

```
$('li > a').addClass('link').filter(function() {
  return $(this).siblings('ul').length;
}).removeClass('link'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:55:02.000

您可以[`.not()`](http://api.jquery.com/not/)与[`:has()`](http://api.jquery.com/has-selector/)选择器一起使用。

```
$("li").not("li:has(ul)")
       .children("a")
       .addClass("link"); 
```

[http://jsfiddle.net/j4zsq/](http://jsfiddle.net/j4zsq/)

* * *

或者考虑`a`到要定位的元素似乎总是唯一的孩子，您可以使用[`only-child`](http://api.jquery.com/only-child-selector/)选择器。

```
$("li > a:only-child").addClass("link"); 
```

[http://jsfiddle.net/j4zsq/1/](http://jsfiddle.net/j4zsq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:53:48.290

```
$("li").each(function(){
    if($(this).children('ul').length == 0)
        $(this).addClass('link');
}); 
```

# javascript - Mozilla pdf.js 没有全视图

> ID：12748747
> 
> 赞同：2
> 
> 时间：2012-10-05T14:48:25.820
> 
> 标签：javascript, jquery, pdf-generation

我喜欢这个 pdf 查看器[https://github.com/mozilla/pdf.js/](https://github.com/mozilla/pdf.js/)演示： http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)我想在 div 中打开它（比如400px 宽度）我该怎么做？现在我只能看到这个查看器的完整视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:51:46.057

最好的方法是使用 iframe，如果这是您的意思。您想在您的页面上看到该页面吗？

如果是，请使用并设置 size 和 scrollbars 属性以查看您想要的大小，我认为您可以在其中放置 url 的属性 src。

# java - 设备连接到 WiFi 接口时无法识别 WiFi Direct 对等体

> ID：12748749
> 
> 赞同：0
> 
> 时间：2012-10-05T14:48:36.600
> 
> 标签：java, android, samsung-mobile, android-4.2-jelly-bean, wifi-direct

我正在使用 samsung(google) nexus 设备在 android Jelly bean 4.1 中使用 WiFi Direct。当我纯粹使用 wifi direct 并且设备未连接到任何其他外部接口时，我能够发现对等点并与之连接。

但作为测试，我将两台设备都连接到路由器，然后在一台设备上直接启动 wifi 并创建了一个组。之后，我启动了下一个设备，当我调用发现对等设备时，它就成功了。

我立即调用 requestPeers 并返回一个空的对等点列表。但是当两个设备都没有连接到任何其他接口时，同样的工作。

我怎样才能正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:41:49.513

为什么除了你的两台设备外还要连接路由器？

我的设备要求我在使用 WiFiDirect 时禁用常规 WiFi，这让我相信它们不能同时使用。

# sql - PostgreSQL：列出依赖行

> ID：12748752
> 
> 赞同：3
> 
> 时间：2012-10-05T14:48:43.047
> 
> 标签：sql, postgresql, foreign-keys, cascade

如何查看哪些条目依赖于使用 PostgreSQL 的给定条目？（从属的意思是“有一个引用条目的外键”）。

基本上，我想检查当我`DELETE`给定表格条目时哪些条目可能被级联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:29:19.913

要通过 fk 约束查看所有实际*行，请使用下面描述的工具识别列。*

在用 定义外键约束的地方[`ON DELETE CASCADE`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)，依赖行将被删除（可能级联`DELETE`到更多*依赖*表）。

`ON DELETE SET NULL`在使用/定义外键约束的情况下`ON DELETE SET DEFAULT`，只有列中的值将重置为`NULL`/ 默认值。

否则`DELETE`，具有依赖行的行将失败并出现异常。

然后在已识别的表/列上运行如下查询：

```
SELECT f.tbl_fk_id, f.col_fk
FROM   tbl_fk f
JOIN   tbl t ON f.col_fk = t.col
AND    <same condition as DELETE here>; 
```

* * *

[pgAdmin](http://pgadmin.org/)提供了这个特性：

![家属](../Images/379363e190b957205e215317ac4266db.png)

在左侧的对象浏览器中选择对象，然后选择右上角的依赖项窗格。

pgAdmin 使用对系统目录的几个查询来组装列表。如果您想自己构建查询，您可以记录发出的命令。

此外，在删除您对依赖项不完全确定的对象时，请先尝试简单的`DROP`（不带`CASCADE`）。如果存在任何依赖项，您将收到一条错误消息...

最后，但**要谨慎行事！**，您可以[*启动事务*](http://www.postgresql.org/docs/current/interactive/sql-begin.html)并发出以下命令：

```
BEGIN;
DROP TABLE tbl CASCADE; 
```

然后，如果你喜欢你所看到的：

```
COMMIT; 
```

如果您不这样做：

```
ROLLBACK; 
```

就像它从未发生过一样。;)

你会看到这样的东西：

```
NOTICE:  drop cascades to 4 other objects
DETAIL:  drop cascades to constraint tbl1_tbl_id_fkey on table myschema.tbl1
drop cascades to constraint tbl_winner_tbl_id_fkey on table myschema.tbl_foo
drop cascades to constraint bar_tbl_id_fkey on table myschema.bar
drop cascades to constraint tbl1_tbl_id_fkey on table x.tbl1

Query returned successfully with no result in 47 ms. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:56:31.813

您可以直接从 PostgreSQL 系统目录中查询：

```
SELECT
  depending.relname as depending_table,
  referenced.relname as referenced_table
FROM pg_catalog.pg_depend d
JOIN pg_catalog.pg_constraint fkey ON fkey.oid=d.objid AND fkey.contype='f'
JOIN pg_catalog.pg_class depending ON depending.oid=fkey.conrelid
JOIN pg_catalog.pg_class referenced ON referenced.oid=d.refobjid
WHERE fkey.confdeltype='c'             -- just cascading deletes
  AND referenced.oid != depending.oid  -- ignoring reflexive dependencies
  AND referenced.relkind='r'           -- tables only 
```

请参阅[此 SQL Fiddle](http://sqlfiddle.com/#!12/69be1/31)和相关文档：

*   [pg_depend](http://www.postgresql.org/docs/9.2/static/catalog-pg-depend.html)用于学习依赖
*   [pg_constraint](http://www.postgresql.org/docs/9.2/static/catalog-pg-constraint.html)用于学习外键
*   [pg_class](http://www.postgresql.org/docs/9.2/static/catalog-pg-class.html)用于学习表

扩展它以告诉您所涉及的列作为练习留给读者。（提示：[pg_attribute](http://www.postgresql.org/docs/9.2/static/catalog-pg-attribute.html)。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T01:46:36.933

现有答案使用`pg_catalog`，这是可以的，但可以在 PostgreSQL 的主要版本之间不兼容地更改。只要有可能，您应该[使用`information_schema`](http://www.postgresql.org/docs/current/static/information-schema.html)。

```
SELECT *
FROM  information_schema.constraint_column_usage ccu
INNER JOIN information_schema.referential_constraints rc 
USING (constraint_catalog, constraint_schema, constraint_name); 
```

看：

*   [`referential_constraints`](http://www.postgresql.org/docs/current/static/infoschema-referential-constraints.html)
*   [`constraint_column_usage`](http://www.postgresql.org/docs/current/static/infoschema-constraint-column-usage.html)
*   [`constraint_table_usage`](http://www.postgresql.org/docs/current/static/infoschema-constraint-column-usage.html)

# javascript - 使用闭包编译器时如何拥有一组具有静态方法的类？

> ID：12748755
> 
> 赞同：1
> 
> 时间：2012-10-05T14:48:58.130
> 
> 标签：javascript, static-methods, google-closure-compiler, google-closure, google-closure-library

我正在开发的 API 有问题。我想要一个类数组，每个类都实现相同的接口并具有静态方法。我将有另一个类循环遍历类数组并根据其中一个静态方法的返回值选择一个，但是编译器正在删除静态方法，并且 javascript 在尝试调用静态方法时遇到 TypeError . 我试过搜索几个论坛，但我找不到任何有用的东西。这个错误只发生在高级编译模式下，不简单，甚至在调试模式下的高级编译中也会出现。

我认为这是因为编译器没有意识到我正在使用该函数，因为我调用它的方式很复杂。

我已经整理了一个稍微简化的示例，说明我正在尝试执行的操作会导致错误。

请参阅下面的代码：

该`Racer`接口是由两个类实现的接口：`Runner`和`Jogger`。该接口有一个名为 getModesOfTransportation 的静态方法，它返回一组赛车手可以移动的方式，以及一个名为 getTransportationModes 的实例方法，它执行相同的操作。该文件还定义了一个自定义类型，`racing.RacerClass`，（我认为）创建一个类型，该类型是一个函数，当使用`new`关键字调用时会返回一个 Racer 对象。我基于[https://developers.google.com/closure/compiler/docs/js-for-compiler#types](https://developers.google.com/closure/compiler/docs/js-for-compiler#types)形成了这个。我认为我应该定义该类型也有一个静态方法，但我不知道如何。这种自定义类型可能是错误的罪魁祸首吗？

赛车手.js：

```
 goog.provide('racing.Racer');

    /** @typedef function(new:racing.Racer)*/
    racing.RacerClass={};// My custom typedef

    /**
     * Interface for racers.
     * @interface
     */
    racing.Racer=function(){};

    /**
     * Gets the ways this racer can move.
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Racer.getModesOfTransportation=function(){}

    /**
     * Gets the ways this racer can move.
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Racer.prototype.getTransportationModes=function(){} 
```

该类`Helper`存储 Racer 构造函数的列表。该`registerRacer`函数接受 a 的构造函数`Racer`并将其添加到列表中。传递的构造函数也会有一个静态`getModesOfTransportation`函数。该`getRacers`函数返回已注册的赛车手列表。

helper.js：

```
 goog.provide('racing.Helper');

    /**
     * A collection of functions to help with finding racers.
     */
    racing.Helper={};

    /**
     * An array of racers.
     * @type {Array.<racing.RacerClass>}
     * @private
     */
    racing.Helper.racers_=[]

    /**
     * Adds the given racer to the list.
     * @param {racing.RacerClass} racer A racer to add to the list of racers.
     */
    racing.Helper.registerRacer=
    function(racer){
            racing.Helper.racers_.push(racer);
    }

    /**
     * Gets an array of registered racers.
     * @return Array.<racing.RacerClass> A list of all registered racers.
     */
    racing.Helper.getRacers=
    function(){
            return racing.Helper.racers_;
    } 
```

该类`Jogger`实现了`Racer`接口，两个函数的返回值都是`['jog']`在文件的末尾，向helper注册自己。

慢跑者.js：

```
 goog.provide('racing.Jogger');
    goog.require('racing.Racer');
    goog.require('racing.Helper');

    /**
     * This racer can jog.
     * @constructor
     */
    racing.Jogger=function(){
            console.log('Jogger is going');
    };

    /**
     * Gets the ways this racer can move.
     * @static
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Jogger.getModesOfTransportation=
    function(){
            return ['jog'];//I can jog
    }

    /**
     * Gets the ways this racer can move.
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Jogger.prototype.getTransportationModes=
    function(){
            return ['jog'];//I can jog
    }

    //Register this racer
    racing.Helper.registerRacer(racing.Jogger); 
```

该类`Runner`也实现了该`Racer`接口，但是这两个函数的返回值是`['run']`在文件的末尾，它向助手注册了自己。

亚军.js：

```
 goog.provide('racing.Runner');
    goog.require('racing.Racer');
    goog.require('racing.Helper');

    /**
     * This racer can run.
     * @constructor
     */
    racing.Runner=
    function(){
            console.log('Runner is going');
    };

    /**
     * Gets the ways this racer can move.
     * @static
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Runner.getModesOfTransportation=
    function(){
            return ['run'];//I can run
    }

    /**
     * Gets the ways this racer can move.
     * @return {Array.<string>} The ways this racer can move.
     */
    racing.Runner.prototype.getTransportationModes=
    function(){
            return ['run'];//I can run
    }

    //Register this racer
    racing.Helper.registerRacer(racing.Runner); 
```

该类`Organizer`有一个名为的公共函数`startRace`，它获取并存储一个`Racer`可以通过调用受保护`getRunner`函数运行的实例。该`getRunner`函数在竞速者列表中循环并尝试找到一个可以运行的，但是，一旦代码被编译，`racerClass.getModesOfTransportation()`失败说那`getModesOfTransportation`是未定义的。

组织者.js：

```
 goog.provide('racing.Organizer');
    goog.require('racing.Helper');
    goog.require('goog.array');

    /** 
     * Class that helps with starting a race.
     * @constructor
     */
    racing.Organizer=function(){}

    /**
     * A racer that can run.
     * @protected
     * @returns {racing.Racer}
     */
    racing.Organizer.prototype.runner=null;

    /**
     * Get a racer that can run.
     * @protected
     * @returns {racing.Racer}
     */
    racing.Organizer.prototype.getRunner=
    function(){
            //Cycle through the racers until we find one that can run.
            goog.array.findIndex(racing.Helper.getRacers(),
                    function(racerClass){
                            if(goog.array.contains(racerClass.getModesOfTransportation(),'run')){
                                    this.runner=new racerClass();
                                    return true;
                            }
                            else return false;
                    },this
            );
    }

    /**
     * Starts a race.
     */
    racing.Organizer.prototype.startRace=
    function(){
            this.runner=this.getRunner();
    } 
```

最终文件只包含编译器的所有类。

api.js：

```
 //Include the racers
    goog.require('racing.Runner');
    goog.require('racing.Jogger');

    //Include the organizer and export its properties
    goog.require('racing.Organizer')
    goog.exportSymbol('racing.Organizer', racing.Organizer);
    goog.exportProperty(racing.Organizer.prototype, 'startRace', racing.Organizer.prototype.startRace); 
```

在调试模式下运行`new racing.Organizer().startRace();`编译代码会产生以下错误，当我查看编译代码时，该`getModesOfTransportation`函数不再存在：

```
 Uncaught TypeError: Object function () {
            console.log("Runner is going")
    } has no method '$getModesOfTransportation$'
    $$racing$Organizer$$$$$startRace$$
    (anonymous function) 
```

我希望能够使其工作，而不必将类拆分为仅具有静态函数的类和仅具有构造函数的类，因为这会使代码混乱。我试图弄清楚这一点，但我做不到。

提前感谢您的任何想法/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:05:30.027

我认为您可能可以`@expose`用来阻止编译器删除成员。或者我可能误解了你在问什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T00:27:05.937

如上所述，“静态”方法被折叠，@expose 通过导出它们来防止这种情况。替代方法是间接添加属性：

```
function helperAddMyProp(obj, value) {
  obj.myProp = value;
}

/** @construcor */
function Foo() {};
helperAddMyProp(Foo, 1); 
```

它可能稍后会被内联，但在属性被折叠之后。这说明了问题（在closure-compiler.appspot.com 上）：

```
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// @output_file_name default.js
// @formatting pretty_print
// @debug true
// ==/ClosureCompiler==

function Foo(name) {
  alert('Hello, ' + name);
}
Foo.prop = 2;
Foo("me");
alert(Foo.prop); 
```

这是解决方案：

```
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// @output_file_name default.js
// @formatting pretty_print
// @debug true
// ==/ClosureCompiler==

function addProp(obj, value) {
  obj.prop = value;
}
function Foo(name) {
  alert('Hello, ' + name);
}
addProp(Foo,2);
Foo("me");
alert(Foo.prop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:17:43.007

如果您更改`RacerClass`为`@constructor`，它将起作用。

```
/** @typedef function(new:racing.Racer)*/
racing.RacerClass={};// My custom typedef 
```

仅用于`@typedef`对象属性一致性。它`instanceof`是`Object`。但是你需要`racing.RacerClass`instanceof 是`RacerClass`.

编辑：

改成：

```
/** 
* @constructor 
* @implements {racing.Racer} 
*/
racing.RacerClass={};// My custom typedef 
```

# php - PDF的PHP getimagesize - > Blob

> ID：12748756
> 
> 赞同：1
> 
> 时间：2012-10-05T14:49:00.537
> 
> 标签：php, oracle, pdf, getimagesize

我正在尝试实现将 PDF 上传添加到我继承的现有图像上传功能的能力。我注意到我无法在 PDF 上使用 getimagesize。有没有办法使用 PHP 确定 PDF 的尺寸？- 或者 - 在上传 PDF 时对尺寸进行硬编码会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:04:57.033

**选项1**

pdfinfo.exe（XPDF 工具的一部分）具有指定要获取尺寸的页面或所有页面的参数。

```
<?php
    $output = shell_exec("pdfinfo ".$your_pdf_file_or_url);

    // find page count
    preg_match('/Pages:\s+([0-9]+)/', $output, $pagecountmatches);
    $pagecount = $pagecountmatches[1];

    // find page sizes
    preg_match('/Page size:\s+([0-9]{0,5}\.?[0-9]{0,3}) x ([0-9]{0,5}\.?[0-9]{0,3})/', 
         $output, $pagesizematches);
    $width = round($pagesizematches[1]/2.83);
    $height = round($pagesizematches[2]/2.83);

    echo "pagecount = $pagecount <br>width = $width<br>height = $height";

?> 
```

[http://www.foolabs.com/xpdf/download.html](http://www.foolabs.com/xpdf/download.html)

[从 php/linux 获取 pdf 的布局模式（横向或纵向）](https://stackoverflow.com/questions/1467494/get-the-layout-mode-landscape-or-portrait-of-a-pdf-from-php-linux)

[PHP在Pdf文件属性中获取高度和宽度](https://stackoverflow.com/questions/9622357/php-get-height-and-width-in-pdf-file-proprieties)

**选项 2**

如果您在安装了 Image Magick 的 linux 服务器上：

```
$command = escapeshellcmd('identify -format "%wx%h" ' . $path_to_pdf) . '[0]';
$geometry = `$command`;
list($width, $height) = split("x", $geometry); 
```

然后您可以通过 $width 和 $height 访问尺寸。

[http://forums.phpfreaks.com/topic/134081-find-out-width-and-height-of-a-given-pdf-file/](http://forums.phpfreaks.com/topic/134081-find-out-width-and-height-of-a-given-pdf-file/)

# javascript - 替换选择框中的值

> ID：12748761
> 
> 赞同：0
> 
> 时间：2012-10-05T14:49:33.917
> 
> 标签：javascript, html

我正在尝试将*CLOSED*的值重新写入*TESTING*。请注意，选择框是动态填充的。我的代码如下，但它没有产生预期的结果。

```
<html>    
     <head>   
           <script type="text/javascript">
                 window.onload = function() { loadit() }    
                 function loadit(){
                       var x = new Array()
                       x[0] = ""
                       x[1] = "ACTIVE"
                       x[2] = "ON HOLD"
                       x[3] = "CLOSED"

                       for (i=0; i<x.length; i++) 
                       { 
                              document.getElementById('d1').options[i]=new Option(x[i], i) 
                       }
                 }

                 function changeit() {
                       var el = document.getElementById("d1");
                       for(var i=0; i < el.options.length; i++)
                       {
                               if(el.options[i].value == "CLOSED")
                               {
                                     el.options[i].value = "TESTING";
                                     el.options[i].innerText = "TESTING";        
                               } 
                       }
                 }
             </script>
       </head>
       <body>
             <select name="d1" id="d1" style="width: 200px;"></select>
             <p><a href="javascript:changeit()">change</a></p> 
       </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:55:06.577

看看你是如何创建选项的

```
document.getElementById('d1').options[i] = new Option(x[i], i) 
```

该值是一个数字，因此以下检查永远不会为真

```
 if(el.options[i].value == "CLOSED"){ 
```

您可以将其更改为 .text

```
if (el.options[i].text== "CLOSED") { 
```

或者您可以更改选择的填充

```
document.getElementById('d1').options[i] = new Option(x[i], x[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:54:51.087

您的值是 0,1,2,3 而不是文本，因此在您的循环中应该是：

```
for(var i=0; i < el.options.length; i++){
    if(el.options[i].value == "3"){
        el.options[i].value = "3";
        el.options[i].innerText = "TESTING";        
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:06:49.127

这些值是数字 0,1,2 等，因此您需要将代码更改为以下。

```
<html>

<head>

<script type="text/javascript">

window.onload = function() { loadit() }

function loadit(){
var x = new Array()
    x[0] = ""
    x[1] = "ACTIVE"
    x[2] = "ON HOLD"
    x[3] = "CLOSED"

    for (i=0; i<x.length; i++) { document.getElementById('d1').options[i]=new Option(x[i], i) }
}

function changeit() {

var el = document.getElementById("d1");
for(var i=0; i < el.options.length; i++)
    {
    if(el.options[i].value == "3")
        {
            el.options[i].value = "3";
            el.options[i].innerText = "TESTING";
        }
    }

}

</script>

</head>

<body>

<select name="d1" id="d1" style="width: 200px;"></select>

<p><a href="javascript:changeit()">change</a></p>

</body>

</html> 
```

# java - TrueZip 随机访问功能

> ID：12748764
> 
> 赞同：3
> 
> 时间：2012-10-05T14:49:47.630
> 
> 标签：java, compression, gzip, truezip, archive-tar

我试图了解如何在 Java 6 环境中使用 TrueZIP 随机遍历 .tar.gz 中的文件（使用 `Files`类）。我发现了它使用 Java 7 的实例`Path`，但是，我想不出一个关于如何在 Java 6 上随机读取存档的示例。

此外，“随机”读取是否意味着它首先解压缩整个存档，还是读取压缩文件中的部分？目的是我想从文件中检索一些基本信息，而不必为了读取它而解压缩整个内容（即用户名）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:18:15.483

`gzip`用于压缩文件（尤其是文件）的方法`.tar.gz`通常意味着输出文件不可随机访问 - 您需要从整个文件到当前块的符号表和其他上下文，甚至能够将该块解压缩到看看里面有什么。这是它实现（某种程度上）比 ZIP/pkzip 更好的压缩的方法之一，后者在将每个文件添加到容器存档之前单独压缩每个文件，从而能够查找特定文件并仅解压缩该文件。

因此，为了`.tar.gz`分开，您需要将整个内容解压缩到临时文件或内存中（如果它不是太大），然后您可以跳转到基础`.tar`文件中的特定条目，尽管这必须通过从标题跳到标题按顺序完成，因为`tar`不包括文件的中央索引/目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:15:26.890

我不知道特别是 TrueZip，但至少在 Zip、RAR 和 Tar 方面，您可以访问单个文件并检索有关它们的详细信息，甚至可以在不触及包的其余部分的情况下提取它们。

> 此外，“随机”读取是否意味着它首先解压缩整个存档

如果 TrueZip 遵循 Zip/RAR/Tar 格式，则它不会*解*压缩整个存档。

> 目的是我想从文件中检索一些基本信息，而不必为了读取它而解压缩整个内容（即用户名）。

和以前一样，这应该没问题——我特别不知道 TrueZip API，但是文件容器格式允许您检查文件信息而无需读取任何数据，并且可以选择提取/读取文件内容而无需接触任何其他内容容器中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:16:29.493

zran 的源代码注释描述了这些工具是如何工作的： [http ://svn.ghostscript.com/ghostscript/tags/zlib-1.2.3/examples/zran.c](http://svn.ghostscript.com/ghostscript/tags/zlib-1.2.3/examples/zran.c)

总之，可以说必须处理完整的文件以生成必要的索引。这比实际解压缩所有内容要快得多。该索引允许将文件拆分为可以解压缩的块，而无需之前解压缩这些块。这用于模拟随机访问。

# java - 可以使用 Apache BeanUtils 从列表中删除项目而不是将它们设置为 null 吗？

> ID：12748771
> 
> 赞同：2
> 
> 时间：2012-10-05T14:50:20.390
> 
> 标签：java, apache-commons-beanutils

我正在考虑使用 Apache BeanUtils 来管理我项目中的一些数据结构。该任务适用于仅在运行时知道的任意路径，以从列表中*删除*项目。

我想我可以使用 BeanUtils 通过这样的调用将项目设置为 null：

```
PropertyUtils.setProperty(myObject, "subitem.aList[3]", null); 
```

然而，在我项目的其他领域，有循环遍历这些列表。当前未处理列表中有一个空项目。有很多（几十个，可能是几百个）地方的代码期望这些项目不为空，因此不幸的是，为所有可能遍历这些列表的代码添加空检查是不切实际的。

是否可以使用`BeanUtils`从集合中删除项目而不是将其设置为空？

我想我可以通过解析传递给的路径并通过查找以结尾的路径然后解析数字、获取列表的路径并调用来`setProperty`确定它是否为 a来实现这一点。在推出自己的解决方案之前，我想使用现有的解决方案。`List``[<number>]``List``remove(number)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:33:47.537

我想您可以通过以下两个步骤来实现您的结果：

```
 List aList = (List)PropertyUtils.getProperty(myObject, "subitem.aList");
    aList.remove(3); // remove the fourth element

    //set the modified list back
    PropertyUtils.setProperty(myObject, "subitem.aList", aList); 
```

# entity-framework - 与实体框架导航属性一起使用的技术

> ID：12748774
> 
> 赞同：0
> 
> 时间：2012-10-05T14:50:36.733
> 
> 标签：entity-framework, lazy-loading

开始探索EF4.3。

使用导航属性使事情变得非常容易，尽管我在一个领域有顾虑，我希望得到一些关于其他人如何处理这种情况的建议。

以延迟加载嵌套属性时的场景为例 - Store.Programme.ProgrammeAccountNumber。

Store 是我要查询的实体。

Program是一个实体，也是Store的一个导航属性，ProgrammeAccountNumber是Programme的一个属性。

为了得到原始实体，我写了这样的东西：

```
 public static IQueryable<Store> FindActive()
    {
        var r = new ReadRepo<Store>(Local.Items.Uow.Context);

        return r.Find(s => s.StoreStatusId == (int)StoreStatus.Active);
    } 
```

但是让我们假设 Program 有它自己的状态字段：

```
var store = StoreBL.FindActive()
    .Where(s => s.Programme != null && s.Programme.ProgramStatusId = (int)ProgrammeStatus); 
```

每次查询超出原始实体时，记住每个实体的所有条件并不容易。

想象一个属性链，其中我有一个产品，它有一个开始/结束日期和一个状态，它属于一个商店，它有一个带有状态的程序，并且如果它运行的类别是有效的，则它是有效的。

我开始思考必须有一种技术可以有效地处理这个问题，或者是否有节制地使用延迟加载？

任何建议表示赞赏。

# ios - 正确调整 iPhone 5 屏幕的视图定位

> ID：12748776
> 
> 赞同：0
> 
> 时间：2012-10-05T14:50:38.787
> 
> 标签：ios, uiview

我正在更新一个应用程序以在 iPhone 5 屏幕上运行（同时也保持旧的屏幕尺寸布局）。

我有一个包含视图控制器主视图的 xib 文件，其中有一个水平滚动视图作为子视图。此滚动视图的高度在 iPhone 5 屏幕上被垂直拉伸。

我在 xib 中也有三个视图（用作滚动视图中的页面），它们被添加到滚动视图中。我已经设置了所有最顶部视图的支柱和弹簧。我已将这些视图内的子视图的所有支柱和弹簧设置为关闭。

我的问题是子视图在 iPhone 5 屏幕上的位置不正确。具体来说，我有一个图像视图，它应该位于视图顶部附近，该视图被移动到底部（在其他子视图下方，当它们根本不应该重叠时）。在图像视图上将顶部支柱设置为打开会使其保持在视图的顶部，但我希望它与视图高度的变化成比例地向下移动。

在我的视图控制器的 viewDidLoad 中，我将页面添加到滚动视图中，如下所示：

```
_pageOne.frame = CGRectMake(0, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height);
[_scrollView addSubview:_pageOne];

_pageTwo.frame = CGRectMake(320, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height);
[_scrollView addSubview:_pageTwo];

_pageThree.frame = CGRectMake(640, 0, _scrollView.bounds.size.width, _scrollView.bounds.size.height);
[_scrollView addSubview:_pageThree]; 
```

视图在旧屏幕高度的 xib 中设置。我在调试器中检查了滚动视图已经在 viewDidLoad 中拉伸。

如何让我的子视图正确重新定位？

* * *

（将对评论的回复移至答案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:55:02.243

实际上，我通过在图像视图上设置顶部和底部支柱、打开垂直弹簧并将图像视图的 contentMode 设置为 UIViewContentModeCenter 来解决我的问题。

但这是我设置视图的方式：

![在此处输入图像描述](../Images/930a410205ceed74476cb01076c708fe.png)

这是 iPhone 5 上的结果。

![在此处输入图像描述](../Images/3ec7120835a427779a799a73555af289.png)

我没有意识到我的图像视图就在我的视图顶部。我尝试将图像视图向下移动一点，并关闭所有支柱和弹簧，一切都开始按预期运行：

![在此处输入图像描述](../Images/1b892de80e51b39b6f7bf2d0fbb466de.png) ![在此处输入图像描述](../Images/b57cd0e2d5aa115c02d1ef970996e2ad.png)

# registration - 如何删除 Orchard 用户注册页面中的“角色”选项

> ID：12748779
> 
> 赞同：1
> 
> 时间：2012-10-05T14:50:45.840
> 
> 标签：registration, orchardcms, profiles

我安装了配置文件模块，然后安装了扩展注册模块。我正在从果园注册页面上收集用户的各种信息。但是，该页面的最后一部分要求用户使用管理员、编辑、版主等复选框来识别他们的“角色”......

我不希望用户在创建配置文件时看到这个选项。

任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:50:15.327

我不熟悉“扩展注册”模块，但是，如果您编辑“用户”内容类型，是否有与角色相关的部分？

如果是这样，您可以从“用户”内容类型中删除此部分。

希望这能解决您的问题。

# php - mysqli 多重查询

> ID：12748780
> 
> 赞同：1
> 
> 时间：2012-10-05T14:50:56.433
> 
> 标签：php, mysqli

我执行以下操作：

```
$query .=" SELECT * , COUNT(PRESENT) FROM seventh_a";
$query .=" WHERE class ='0' AND NAME ='Alexander Kirkby Scherer'";
$query .=" AND PRESENT = 'TS' GROUP BY lesson";

$query = " SELECT * , COUNT(lesson) FROM seventh_a";
$query .=" WHERE class ='0' AND NAME ='Alexander Kirkby Scherer'";
$query .=" GROUP BY lesson"; 
```

之后我可以回显`$row['COUNT(PRESENT)']`但不能`$row['COUNT(lesson)']`。

谁能告诉我如何获得这两个值，以便我能够使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:02:50.863

根据[手册页](http://php.net/manual/en/mysqli.multi-query.php)，如果您使用 mysqli_multi_query，您可以访问不同查询的结果，如下所示：

> 要从第一个查询中检索结果集，您可以使用`mysqli_use_result()`或 `mysqli_store_result()`。所有后续查询结果都可以使用 `mysqli_more_results()`和进行处理`mysqli_next_result()`。

他们提供了一些示例代码：

```
$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli->multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli->store_result()) {
            while ($row = $result->fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result->free();
        }
        /* print divider */
        if ($mysqli->more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli->next_result());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:54:43.473

您不能使用 2 query 。像这样使用组合查询

```
$query .=" SELECT * , COUNT(PRESENT),COUNT(lesson) FROM seventh_a";
$query .=" WHERE class ='0' AND NAME ='Alexander Kirkby Scherer'";
$query .=" AND PRESENT = 'TS' GROUP BY lesson"; 
```

你会得到你的结果`$row['COUNT(PRESENT)']`和`$row['COUNT(lesson)']`

或者使用mysqli的`multi_query`函数在这样的`;`查询之间添加

```
$query .=" SELECT * , COUNT(PRESENT) FROM seventh_a";
$query .=" WHERE class ='0' AND NAME ='Alexander Kirkby Scherer'";
$query .=" AND PRESENT = 'TS' GROUP BY lesson;";   // semicolon here

$query .= " SELECT * , COUNT(lesson) FROM seventh_a";
$query .=" WHERE class ='0' AND NAME ='Alexander Kirkby Scherer'";
$query .=" GROUP BY lesson"; 
```

# html - 使用时在 IE9 中播放 HTML5 视频 但不是

> ID：12748781
> 
> 赞同：1
> 
> 时间：2012-10-05T14:51:10.003
> 
> 标签：html, internet-explorer-9, html5-video

如果我将我的视频标签设置为类似

```
<video src="myvid.mp4"></video> 
```

IE9 会完整播放视频，但如果我将其作为

```
<video>
    <source src="myvid.webm" type="video/webm" />
    <source src="myvid.ogv" type="video/ogg" />
    <source src="myvid.mp4" type="video/mp4" />
</video> 
```

视频播放约 3 秒，然后停止。

不幸的是，如果我使用第一种方法，那么像 Firefox 这样的浏览器不会查看`<source>`属性并拒绝播放。

大量研究已排除 MIME 类型和视频编码是潜在问题。

我目前拥有的完整代码是：

```
<video controls="controls" poster="<?=$template_path;?>/images/home-video.png">
    <source src="<?=$template_path;?>/videos/intro_blue.webm" type="video/webm" />
    <source src="<?=$template_path;?>/videos/intro_blue.ogv" type="video/ogg" />
    <source src="<?=$template_path;?>/videos/intro_blue.mp4" type="video/mp4" />
    <object type="application/x-shockwave-flash" data="http://player.longtailvideo.com/player.swf" width="600" height="600">
        <param name="movie" value="http://player.longtailvideo.com/player.swf" />
        <param name="flashVars" value="controlbar=over&amp;image=<?=$template_path; ?>/images/home-video.png&amp;file=<?=$template_path; ?>/videos/intro_blue.mp4" />
        <param name="wmode" value="transparent" />
        <img alt="Intro" src="<?=$template_path; ?>/images/home-video.png" width="600" height="600" title="No video playback capabilities, please download the video below">
    </object>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:05:12.943

我认为问题可能出在服务器设置中。视频内容不需要 MIME 类型。IE 对它很严格。[例如，请参见此处](http://geekswithblogs.net/Wessty/archive/2011/03/13/ie9-and-the-mystery-of-the-broken-video-tag.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:44:08.993

在我的情况下，某些防火墙后面的 IE9 似乎不允许视频完全下载（其他浏览器允许）。

我对此并不满意，因此作为预防措施，我强迫 IE9 使用 Flash。

# c# - 如何正确处理此异常？

> ID：12748785
> 
> 赞同：1
> 
> 时间：2012-10-05T14:51:24.327
> 
> 标签：c#, .net, exception, user-interface, dll

我仍然是一个新手程序员（来自 C++），我正在创建一个 GIU，它显示来自正在运行的软件的标签。目的是显示标签属性`Description`和`Eng Units`. 我得到了 2 个 dll InTouchDataAccess 和 NDde。我读过异常处理，我见过的最好的想法是这个： [创建一个验证函数](https://stackoverflow.com/questions/6681514/c-sharp-catch-exception)

我做了。但是程序没有进入函数，我直接进入我的`SelectButton_Click`fct 的 catch 块。

**标签浏览器.cs**

```
using System;
using System.Windows.Forms;
using IOM.InTouchDataAccess;

namespace InTouchTagBrowser
{
    public partial class InTouchTagBrowser : Form
    {
        public string tagName;
        public string description;
        public string engUnits;

        public InTouchTagBrowser()
        {
            InitializeComponent();
        }

        private void TagBrowser_Load(object sender, EventArgs e)
        {
        }

        private void SelectButton_Click(object sender, EventArgs e)
        {
            try
            {
                tagName = tagNameBox.Text;
                InTouchDdeWrapper inTouchWrapper = new InTouchDdeWrapper();
                inTouchWrapper.Initialize();

                TagDotField tagDotField = new TagDotField(tagName);

                string value = inTouchWrapper.Read(tagName);

                if (EngValidate(inTouchWrapper.Read(tagDotField.EngUnits)) != 0)
                {
                    engUnits = inTouchWrapper.Read(tagDotField.EngUnits);
                }

                else
                {
                    engUnits = "N/A";
                }

                if (inTouchWrapper.Read(tagDotField.Description) != "")
                {
                    description = inTouchWrapper.Read(tagDotField.Description);
                }
                else
                {
                    description = "N/A";
                }

                descriptionlbl.Text = description;
                englbl.Text = engUnits;
                valuelbl.Text = value;
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
                MessageBox.Show(ex.Source);
                MessageBox.Show(ex.HelpLink);
                MessageBox.Show(ex.StackTrace);
            }
        }

        private void WriteButton_Click(object sender, EventArgs e)
        {
            try
            {
                if (tagName == "")
                {
                    MessageBox.Show("Please enter a tag!");
                }
                else
                {
                    string inputValue = ValueBox.Text;
                    InTouchDdeWrapper inTouchWrapperWriter = new InTouchDdeWrapper();
                    inTouchWrapperWriter.Initialize();

                    TagDotField tagWriter = new TagDotField(inputValue);
                    inTouchWrapperWriter.Write(tagName, inputValue);
                    valuelbl.Text = inputValue;
                }
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                MessageBox.Show("Tag change successfull");
            }
        }

        public int EngValidate(string engString)
        {
            string exception;
            int x;

            try
            {
                InTouchDdeWrapper inTouchWrapper = new InTouchDdeWrapper();
                inTouchWrapper.Initialize();
                TagDotField tagDotField = new TagDotField(tagName);
                engString = inTouchWrapper.Read(tagDotField.EngUnits);

                x = 1;
            }
            catch (Exception msg)
            {
                exception = msg.ToString();
                if (exception == "")
                    x = 1;
                else
                    x = 0;
            }

            return x;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:24:52.860

您正在`engString`为您的方法声明一个实际上并未使用的变量。此外，您设置此变量的方式从包装器中读取，这可能会导致异常（然后被外部 catch 块捕获）。更好的方法是声明这样的方法只读一次：

```
public bool TryRead(InTouchDdeWrapper wrapper, string prop, out string value) 
{
  try 
  {
    value = wrapper.Read(prop);
    return true;
  }
  catch (Exception e)
  {
    value = null;
    return false;
  }  
} 
```

像这样调用：

```
InTouchDdeWrapper wrapper = new InTouchDdeWrapper();
wrapper.Initialize();

TagDotField field = new TagDotField(tagName);

string engUnits;

if (!TryRead(wrapper, field.EngUnits, out engUnits)) 
{
  engUnits = "N/A";
} 
```

我希望你能理解这种模式。您在代码中一遍又一遍地实例化（和初始化）很多类，最好只有一个包装器、一个字段等......并且只读取一次值。此外，您不应该在 C# 中使用返回码，这就是异常的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:55:56.273

建议你调整`global treatment for exception`

您需要处理`System.Windows.Forms.Application.ThreadException event`Windows 窗体。

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)

注意：您删除了表单中所有已实现的 try-catch，并且只设置了一种处理

# windows - 在 Windows CMD 上递归删除文件或文件夹

> ID：12748786
> 
> 赞同：167
> 
> 时间：2012-10-05T14:51:25.357
> 
> 标签：windows, cmd, delete-file

如何从命令行递归删除 Windows 上的文件或文件夹？

我找到了这个解决方案，我们在命令行上驱动路径并运行此命令。

我给出了一个带有 .svn 文件扩展名文件夹的示例：

```
for /r %R in (.svn) do if exist %R (rd /s /q "%R") 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2015-07-11T23:53:19.820

其他答案对我不起作用，但确实如此：

```
del /s /q *.svn
rmdir /s /q *.svn 
```

**/q**禁用是/否提示

**/s**表示从所有子目录中删除文件。

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2014-10-09T14:09:58.873

请执行以下步骤：

1.  打开命令提示符
2.  将目录更改为所需路径
3.  给出以下命令

    ```
    del /S *.svn 
    ```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2012-10-05T15:37:42.027

您可以在`bat`脚本中使用它：

```
rd /s /q "c:\folder a" 
```

现在，只需更改`c:\folder a`文件夹的位置。仅当您的文件夹名称包含空格时才需要引号。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-07-22T05:19:53.057

```
RMDIR path_to_folder /S 
```

前任。`RMDIR "C:\tmp" /S`

请注意，如果您真的要删除“C:\tmp”文件夹，系统会提示您。将其与 /Q 开关结合使用将静默删除文件夹（例如`RMDIR "C:\tmp" /S /Q`）

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-07-23T19:44:19.810

对于文件删除，我编写了以下简单的批处理文件，它递归地删除了所有.pdf：

```
del /s /q "\\ad1pfrtg001\AppDev\ResultLogs\*.pdf"
del /s /q "\\ad1pfrtg001\Project\AppData\*.pdf" 
```

即使对于本地目录，我们也可以将其用作：

```
del /s /q "C:\Project\*.pdf" 
```

这同样适用于目录删除，我们只需要用rmdir**更改****del**即可。

 *** * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-28T12:23:03.243

如果要递归删除特定扩展，请使用以下命令：

```
For /R "C:\Users\Desktop\saleh" %G IN (*.ppt) do del "%G" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-02-28T18:29:41.583

用于使用本机命令完全擦除文件夹并获取已完成操作的日志。

这是一种不寻常的方法：

假设我们要清除 d:\temp 目录

```
mkdir d:\empty
robocopy /mir d:\empty d:\temp
rmdir d:\empty 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-01-05T18:07:57.367

你也可以这样做：

```
del /s /p *.{your extension here} 
```

`/p`如果您对删除不应该删除的内容感到紧张，它将提示您找到每个找到的文件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-08-03T16:12:19.637

# 使用 Windows *rmdir*命令

即**rmdir /S /Q** C:\Temp

> 几年来，我也完美地使用了下面的那些。
> 
> 查看其他选项：***forfiles /?***
> 
> **递归删除 Windows 文件夹中的 SQM/Telemetry**
> 
> ```
> forfiles /p %SYSTEMROOT%\system32\LogFiles /s /m *.* /d -1 /c "cmd /c del @file" 
> ```
> 
> **递归删除windows TMP文件**
> 
> ```
> forfiles /p %SYSTEMROOT%\Temp /s /m *.* /d -1 /c "cmd /c del @file" 
> ```
> 
> **递归删除用户 TEMP 文件和文件夹**
> 
> ```
> forfiles /p %TMP% /s /m *.* /d -1 /c "cmd /c del @file" 
> ```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-20T20:16:20.843

对于隐藏文件，我必须使用以下内容：

```
DEL /S /Q /A:H Thumbs.db 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-15T06:54:32.447

它对我有用

del /s /q "目录名"

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-30T16:16:27.210

```
dir /b %temp% >temp.list
for /f "delims=" %%a in (temp.list) do call rundll32.exe advpack.dll,DelNodeRunDLL32 "%temp%\%%a" 
```**

# mongodb - 尝试使用 mongodb 插件在 grails 中创建 mongodb 集合

> ID：12748788
> 
> 赞同：3
> 
> 时间：2012-10-05T14:51:45.000
> 
> 标签：mongodb, grails, groovy, mongodb-java

我正在尝试使用以下方法在 grails 中创建一个 mongodb 集合：

```
BasicDBObject DBoptions = new BasicDBObject();
DBCollection collection = db.createCollection("xyz",DBoptions) 
```

但我收到以下错误：

```
Caused by GroovyRuntimeException: Ambiguous method overloading for method com.mongodb.DBApiLayer#createCollection.    
Cannot resolve which method to invoke for [class java.lang.String, class com.mongodb.BasicDBObject] 
due to   overlapping prototypes between:
[class java.lang.String, interface com.mongodb.DBObject]
[class java.lang.String, interface java.util.Map] 
```

关于如何解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:59:59.433

在从 grails 服务类运行时，我在尝试使用可用于 mongo 驱动程序的 command() 函数时遇到了类似的问题。

每次我尝试创建一个 DBObject 并将其传递给 command() 函数时，我都会收到一个错误，抱怨 com.mongodb.DBObject 和 java.util.interfaces 之间的原型重叠。例如，尝试使用带有 DB 对象的 db.command() 创建数据库的新副本会引发该错误......

```
DBObject cmd = new BasicDBObject()
cmd.put("copydb", 1)
cmd.put("todb", "to_database")
cmd.put("fromdb", "from_database")
mongo.getDB("admin").command(cmd) 
```

通过一点点线索/错误，实际上最终为我工作的不是创建 DBObject，而是传入了一个标准的 groovy 地图实例。我的猜测是，由于 DBObject 使用 java.util.Map 接口，因此两者在大多数情况下应该可以互换。下面的代码最终为我工作..

```
def cmd = [ copydb: 1, "todb": "to_database", "fromdb": "from_database" ]
mongo.getDB("admin").command(cmd) 
```

听起来您找到了另一种解决方法，但是如果您将地图作为选项参数传递给 db.createCollection() 而不是 BasicDBObject 是否可行，我会很好奇。

无论如何，希望这可以帮助那些可能正在努力让其他一些 mongo api 函数在 grails 中工作的人......

# sql-server-2008 - 无法登录从 mysql 迁移到 sql server 的网站

> ID：12748795
> 
> 赞同：1
> 
> 时间：2012-10-05T14:52:01.223
> 
> 标签：sql-server-2008, login, asp-classic

我似乎可以正确连接到我的网站已从 mysql 数据库移动到 sql server 2008 r2 db。该网站是用经典的 asp 编写的，并使用 conn.inc 文件。该文件的内容如下。我有*** * 密码。

```
<%
Dim strConn
Dim conn
strConn = "Provider=SQLNCLI10;Server=chintranet2;Database=Gremlin;Uid=Gremlin;Pwd=********;"
Set conn = Server.CreateObject("ADODB.Connection")
conn.ConnectionString= strConn
conn.Open
%> 
```

我得到的错误是：

```
Microsoft SQL Server Native Client 10.0 error '80040e4d' 

Login failed for user 'Gremlin'. 

/Gremlinv4/connections/conn.inc, line 7 
```

任何人都可以对此有所了解。用户是在 sql server 中创建的，并具有分配为“所有者”的权限。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:10:27.627

到目前为止最好的猜测，你没有在数据库中启用你的用户。使用以下脚本作为参考，看看你是否得到了更好的结果：

```
Use [myDBName]
CREATE LOGIN [Gremlin] 
WITH PASSWORD=N'123', 
DEFAULT_DATABASE=[myDBName], 
DEFAULT_LANGUAGE=[us_english], 
CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF

ALTER LOGIN [Gremlin] ENABLE --Here is my best guess.

USE [myDBName]
CREATE USER [Gremlin] FOR LOGIN [Gremlin];
EXEC sp_addrolemember 'db_owner', 'Gremlin' 
```

# android - Android - 等待外部存储准备就绪

> ID：12748801
> 
> 赞同：5
> 
> 时间：2012-10-05T14:52:38.103
> 
> 标签：android, storage, external, boot, ready

我目前正在开发一种从外部存储读取的动态壁纸。当设备启动时，我认为可以在存储准备好之前启动动态壁纸。特别是如果它进行定期错误检查。其他人正在报告问题，我认为这就是原因。我似乎无法对此进行测试，因为外部存储似乎会立即安装在我的设备上，而且我不确定如何强制它进行错误检查。所以我的第一个问题是，在启动动态壁纸之前，系统是否真的按照 BOOT_COMPLETED 意图进行操作。

如果没有，等待外部存储准备就绪的正确方法是什么。我正在考虑在应用程序的开头调用这样的东西

```
public void waitForExternalStorage()
{
    while(Environment.getExternalStorageState().equals(Environment.MEDIA_CHECKING))
    {
        try { Thread.sleep(1000L); }
        catch(InterruptedException e) { e.printStackTrace(); }
    }
} 
```

我是否必须检查其他情况，以防它在启动时进入 MEDIA_REMOVED -> MEDIA_UNMOUNTED -> MEDIA_CHECKING(optional) -> MEDIA_READY？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T15:04:25.220

你可以注册一个`BroadcastReceiver`来监听外部存储状态的变化：

```
BroadcastReceiver externalStorageStateReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        updateExternalStorageState();
    }
};

IntentFilter filter = new IntentFilter();
filter.addAction(Intent.ACTION_MEDIA_MOUNTED);
filter.addAction(Intent.ACTION_MEDIA_REMOVED);
registerReceiver(mExternalStorageReceiver, filter);
updateExternalStorageState(); // You can initialize the state here, before any change happens 
```

并且`updateExternalStorageState()`您可以检查更改后的实际状态：

```
protected void updateExternalStorageState() {
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // SD card is mounted and ready for use
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // SD card is mounted, but it is read only
    } else {
        // SD card is unavailable
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:02:30.370

使用广播接收器，监听`Intent.ACTION_MEDIA_MOUNTED`：广播动作：外部媒体存在并安装在其安装点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T22:05:30.887

我正是需要那个。我正在从 SD 卡中读取配置文件，而我的启动运行应用程序根本无法在不读取它的情况下运行。一个简单的解决方案是等待最多 15-30 秒，以便 Android 操作系统自动挂载 SD 卡。如果不是，则抛出异常。这是代码。只需增加最大计数限制即可增加等待时间。ExternalStorageNotReadyException 是一个自定义异常。

```
public void awaitExternalStorageInitialization()
        throws ExternalStorageNotReadyException {
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    int count = 0;

    do {
        String state = Environment.getExternalStorageState();
        if(count > 0) {
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                Log.e(Constants.LOG_TAG, e.getMessage(), e);
            }
        }
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
        } else {
            // Something else is wrong. It may be one of many other states,
            // but all we need
            // to know is we can neither read nor write
            mExternalStorageAvailable = mExternalStorageWriteable = false;
        }
        count++;
    } while ((!mExternalStorageAvailable) && (!mExternalStorageWriteable) && (count < 5));
    if(!mExternalStorageWriteable)
        throw new ExternalStorageNotReadyException("External storage device (SD Card) not yet ready");
} 
```

# c# - 使用 Vim 作为 C# 编辑器，面临一些问题

> ID：12748802
> 
> 赞同：2
> 
> 时间：2012-10-05T14:52:42.283
> 
> 标签：c#, vim

我有几个问题和一些使用 vim 作为 C# 编辑环境的问题。首先，我是 vim 的新手，所以这对我来说是一个学习过程，如果您提供任何建议和指导，我将不胜感激。其次，我在编译任何 cs 文件时遇到了一些问题。

我使用它作为我的 cs.vim 编译器：

```
 if exists("current_compiler")
  finish
endif
let current_compiler = "cs"

if exists(":CompilerSet") != 2      " older Vim always used :setlocal
  command -nargs=* CompilerSet setlocal <args>
endif

CompilerSet errorformat&
CompilerSet errorformat+=%f(%l\\,%v):\ %t%*[^:]:\ %m,
            \%trror%*[^:]:\ %m,
            \%tarning%*[^:]:\ %m

execute 'CompilerSet makeprg=' . cs#get_net_compiler("csc.exe") . "\\ % 
```

不确定我在哪里找到这个。但是，如果我在一个目录名称中有空格的目录中，我会收到一个错误，即找不到该文件进行编译。我想我需要告诉它逃离空格，但我该怎么做呢？

即使我切换回原始的 cs.vim 编译器文件，我也会遇到奇怪的问题并且它似乎无法编译：

![在此处输入图像描述](../Images/31fd314cdd27f0a509a6b7822b96d428.png)

除此之外，是否可以在 vim 中使用 C# 项目，并且在编译时让它识别引用等？

编辑：为澄清起见，我拥有并使用 Visual Studios 作为我的主要 IDE。我想学习更好地使用vim，所以我问了这些问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:36:24.860

就个人而言，我将 Vim 和 Visual Studio（安装了 VsVim）组合用于我的日常 C# 编码。我用纯 Vim 进行了较长时间的编辑，因为 VsVim 虽好，但与完整的 Vim 环境及其生态系统不同。没有什么比 Visual Studio 更适合交互式调试了。

为了获得编译器，我在我的 vimrc 中使用了以下设置，这些设置是从互联网的某些部分窃取和变形的：

```
set errorformat=\ %#%f(%l\\\,%c):\ %m
set makeprg=C:\\windows\\microsoft.net\\framework\\v4.0.30319\\msbuild.exe\ /nologo\ /v:q\ /property:GenerateFullPaths=true 
```

请注意，这集成了 MSBuild，因此适用于完整`.sln`文件——整个构建工作正常，无需处理单个文件。执行完整构建所需要做的就是运行`:make`。

虽然不是严格要求，但我也喜欢这个标志：

```
set shellcmdflag=\/C 
```

因为它确保`cmd`窗口自行关闭。

# algorithm - 任何人都有针对非常慢的写入操作优化的排序算法？

> ID：12748808
> 
> 赞同：9
> 
> 时间：2012-10-05T14:53:07.247
> 
> 标签：algorithm, sorting

我需要一种排序算法，它在单个预先填充的数组上运行，并且仅限于执行一种类型的写操作：

**O** =*将项目 X 移动到索引 Y。后续位置上的元素移动 1 个位置。*

该算法必须针对尽可能少的操作 O 进行优化。读取操作比写入操作便宜得多。临时助手列表也很便宜。

**编辑**：由于它的行为，将其称为链表可能更正确，尽管实现对我来说是隐藏的。

**背景：**

问题是我正在使用[Google API](https://developers.google.com/google-apps/tasks/v1/reference/tasks/move)，它只允许我在他们的列表上执行此操作。该操作是一个 Web 服务调用。我想尽量减少通话次数。您可以假设排序程序（客户端）在启动之前在内存中具有列表的副本，因此无需对服务执行读取操作 - 只需写入。当然，您还可以在执行服务调用之前在本地执行任意数量的临时列表操作，包括复制列表或使用现有的 .NET 排序功能。

我如何在这里进行？我可以在这里使用一个已知的算法吗？

**尝试失败：**

我已经实现了一个愚蠢的算法，但它并不是对所有情况都是最优的。当列表如下时效果很好：

列表 A =`[2,3,4,5,6,7,8,9,1]`

它是这样的：

1.  列表是否排序？不
2.  查找属于位置 0 的元素：“1”
3.  将元素“1”移动到位置 0
4.  （新列表状态 A1 `[1,2,3,4,5,6,7,8,9]`：）
5.  列表是否排序？是的。结尾

...但是当列表是这样的时候，我遇到了麻烦：

清单 B =`[9,1,2,3,4,5,6,7,8]`

1.  列表是否排序？不
2.  查找属于位置 0 的元素：“1”
3.  将元素“1”移动到位置 0
4.  （新列表状态 B1 `[1,9,2,3,4,5,6,7,8]`：）
5.  列表是否排序？不
6.  查找属于位置 1 的元素：“2”
7.  将元素“2”移动到位置 1
8.  （新列表状态 B2 `[1,2,9,3,4,5,6,7,8]`：）
9.  ...你可以看到我要去哪里...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T15:17:06.840

计算数组的最长递增子序列。对序列中不存在的每个元素执行写入操作。

**编辑：**添加一个例子

让输入数组中的数字为`1 3 2 7 4 8 6 5 9`。最长的递增序列是`1 2 4 6 9`。在计算此序列时，存储序列中出现的元素的索引。然后可以直接遍历原始数组并找到序列中不存在的元素。在这种情况下，它们是`3 7 8 5`. 对于这些元素中的每一个，执行将它们放置在适当位置的写入操作。所以数组的修改顺序是：

```
1 2 3 7 4 8 6 5 9 (after writing 3 to appropriate position)
1 2 3 4 8 6 7 5 9 (after writing 7 to appropriate position)
1 2 3 4 6 7 5 8 9 (after writing 8 to appropriate position)
1 2 3 4 5 6 7 8 9 (after writing 5 to appropriate position) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:13:30.870

在本地对数组进行排序。保留原件的副本。

[使用LCS 距离](https://en.wikipedia.org/wiki/Longest_common_subsequence_problem)计算原始数组和排序版本之间的最佳编辑序列；这是不允许替换的[Levenshtein 距离](https://en.wikipedia.org/wiki/Levenshtein_distance)的变体。Levenshtein 的动态规划算法的简化版本可用于计算 LCS 距离。查看程序的源代码，例如[`diff`](https://en.wikipedia.org/wiki/Diff)查看如何从动态规划表中获取编辑序列。

您现在有一个编辑序列，这意味着要执行的插入和删除列表以将原始数组转换为排序版本。执行插入。（您可以跳过删除，因为它们将由您的操作 O 执行，但请注意，数组中的索引会因此而改变，因此您必须对此进行补偿。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:48:30.530

搜索最长的排序子序列，并将每个未排序的元素移动到正确的位置。

对于您的示例：

```
start: 2,3,4,5,6,7,8,9,1 (O = 0)
LSS:   2,3,4,5,6,7,8,9
step:  1,2,3,4,5,6,7,8,9 (O = 1)

start: 9,1,2,3,4,5,6,7,8 (O = 0)
LSS:   1,2,3,4,5,6,7,8
step:  1,2,3,4,5,6,7,8,9 (O = 1) 
```

我的一个：

```
start: 9,3,1,7,2,8,5,6,4 (O = 0)
LSS:   1,2,5,6
step:  3,1,7,2,8,5,6,9,4 (O = 1)
LSS:   1,2,5,6,9
step:  1,7,2,3,8,5,6,9,4 (O = 2)
LSS:   1,2,3,5,6,9
step:  1,2,3,8,5,6,7,9,4 (O = 3)
LSS:   1,2,3,5,6,7,9
step:  1,2,3,5,6,7,8,9,4 (O = 4)
LSS:   1,2,3,5,6,7,8,9
step:  1,2,3,4,5,6,7,8,9 (O = 5) 
```

您需要一种算法来识别 LSS。您只需要使用一次，拥有它后，您可以在排序时将元素插入其中。

伪代码：

```
function O(oldindex, newindex):
    # removes oldindex from list, shifts elements, inserts at newindex

function lss(list):
    # identifies the LSS of a list and returns it in a cheap temporary list

function insert(index, element, list):
    # inserts specified specified element into specified index in specified list
    # elements at and after specified index are shifted down to make room

function sort(input):
    lss_temp_list = lss(input)                     # get lss of input list

    do until lss == input:
    old = any(index where (input[index] not in lss)# item in input; not in lss

                                                   # getting new index is uglier
    nl = min(X where (X > input[old] and X in lss))# next lowest element in lss
    nh = max(X where (X < input[old] and X in lss))# next highest element in lss

    new = any(index                                # index of next lowest/highest
          where ((input[index + 1] == nl and nl exists)
              or (input[index + 1] == nh and nh exists))

    O(old, new)                                    # list shift

    il = min(index where (lss[index] > input[new]))# index of next lowest in lss
    ih = max(index where (lss[index] < input[new]))# index of next highest in lss
    i = any(X where (X == il or X == (ih + 1)))    # index to insert element
    insert(i, input[new], lss)                     # add new element to lss
    repeat
    return input 
```

为古怪的伪代码风格道歉，我试图让它足够窄，以至于代码块不需要滚动条。

# r - 这个 R 函数可以向量化吗？

> ID：12748811
> 
> 赞同：1
> 
> 时间：2012-10-05T14:53:26.183
> 
> 标签：r, vectorization, conditional-statements

```
bucketIndex <- function(v, N){
  o <- rep(0, length(v))

  curSum <- 0
  index  <- 1

  for(i in seq(length(v))){
    o[i] <- index

    curSum <- curSum + v[i]
    if(curSum > N){
      curSum <- 0
      index <- index + 1
    }
  }

  o
}

> bucketIndex(c(1, 1, 2, 1, 5, 1), 3)
[1] 1 1 1 2 2 3 
```

我想知道这个函数是否从根本上是不可矢量化的。如果是，是否有一些包来处理这个“类”函数，或者是唯一的选择（如果我想要速度）将它写为 ac 扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:56:41.043

这是一个尝试（尚未到达`bucketIndex`！）：

*   您的

    ```
    curSum <- curSum + v[i]
    if(curSum > N){
      curSum <- 0
      index <- index + 1
    } 
    ```

    几乎是 的整数除法`%/%`。`cumsum (v)`

*   但不完全是，即使 v [i] > 几次`N`并且您从 1 开始，您的索引也只会增加 1。我们几乎可以通过转换为因子并返回整数来解决这个问题。

*   但是，我想知道（从函数的名称）这种行为是否真的是有意的：

    ```
    > bucketIndex (c(1, 1, 2, 1, 2, 1, 1, 2, 1, 5, 1), 3)
    [1] 1 1 1 2 2 2 3 3 3 4 5
    > bucketIndex (c(1, 1, 1, 2, 2, 1, 1, 2, 1, 5, 1), 3)
    [1] 1 1 1 1 2 2 2 3 3 3 4 
    ```

    即只是交换两个连续的条目`v`可能会导致结果中的最大值不同。

*   另一点是您仅在导致总和为 > 的元素*之后*`N`才计数。这意味着结果应该在开头有一个额外的 1 并且应该删除最后一个元素。

*   `curSum`不管它射了多少，你都重置为 0 `N`。所以对于所有带有 的元素`cumsum (v) > N`，你需要减去这个值，然后寻找下一个`cumsum (v) > N`，依此类推。这减少了与您的`for`循环相关的循环迭代次数，但这是否会给您带来实质性的改进取决于`v`和 on `N`（或`max (index)`：`length (v)`比率）的条目。如果如您的示例中那样为 50%，我认为您不会获得可观的收益。除非他们之间至少有一个数量级，否则我会选择`inline::cfunction`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:37:53.603

我要在这里站出来，说答案是“不”。从本质上讲，您正在根据当前总和的结果更改总和。这意味着未来的计算取决于中间计算的结果，而向量化操作无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:38:49.797

我不认为这是完全可矢量化的，但@cbeleites 采用一种方法通过一次处理整个块（桶）来减少循环中的迭代次数。每次迭代都会查找累积和超过 的位置`N`，将索引分配到该范围，将累积和减少超出的任何值`N`，然后重复直到向量用尽。剩下的就是簿记（值的初始化和值的递增）。

```
bucketIndex2 <- function(v, N) {
    index <- 1
    cs <- cumsum(v)
    bk.old <- 0
    o <- rep(0, length(v))

    repeat {
        bk <- suppressWarnings(min(which(cs > N)))
        o[(bk.old+1):min(bk,length(v))] <- index
        if (bk >= length(v)) break
        cs <- cs - cs[bk]
        index <- index + 1
        bk.old <- bk
    }

    o
} 
```

这与您的各种随机输入的功能相匹配：

```
for (i in 1:200) {
  v <- sample(sample(20,1), sample(50,1)+20, replace=TRUE)
  N <- sample(10,1)
  bi <- bucketIndex(v, N)
  bi2 <- bucketIndex2(v, N)
  if (any(bi != bi2)) {
    print("MISMATCH:")
    dump("v","")
    dump("N","")
  }
} 
```

# mod-rewrite - 如果文件不存在，Mod 重写重定向到另一个域

> ID：12748813
> 
> 赞同：2
> 
> 时间：2012-10-05T14:53:30.963
> 
> 标签：mod-rewrite, redirect

### 我正在尝试做的事情：

如果文件不存在，我需要将对文件的请求重定向到另一个域。例如：

```
http://www.mydomain.com/js/foo.js 
```

重定向到（如果不存在）

```
http://www.myanotherdomain.com/js/foo.js 
```

### 我所做的：

我在 htaccess 的末尾写了下一行，但它们重定向了所有！

```
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^(.*)$ http://www.myanotherdomain.com/$1 [L,NC] 
```

在这些行之前，我有很多这样的行（我正在使用 MVC（模型、视图、控制器））：

```
RewriteRule ^car/brand/?$ ?controller=Car&action=viewBrand [L,NC] 
```

### 怎么了：

它适用于不存在的文件，但似乎与 MVC 规则不兼容。这些规则必须匹配然后停止评估规则，因为 de "L" 标志。但它似乎继续评估规则并最终评估重定向规则。结果是这样的：

```
http://www.mydomain.com/car/brand/ 
```

去

```
http://www.myanotherdomain.com/?controller=Car&action=viewBrand 
```

*请问有人可以帮我吗？*

*非常感谢，*

*乔纳森*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:57:01.327

尝试这个：

```
RewriteCond %{REQUEST_FILE} !-f
RewriteRule ^(.*)$ http://www.myanotherdomain.com/$1 [QSA,R,L] 
```

另请参阅：[如果找不到文件/文件夹，则修改目录](https://stackoverflow.com/questions/11076385/mod-rewrite-directory-if-file-folder-not-found)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:09:45.363

尝试将这些规则放在 MVC 规则**之后：**

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.(js|png|jpe?g|gif|css|html?)$ http://www.myanotherdomain.com/$1.$2 [L,R,NC] 
```

如果您想要所有请求，而不仅仅是脚本和图像等静态内容，请将`RewriteRule`行更改为：

```
RewriteRule ^(.*)$ http://www.myanotherdomain.com/$1 [L,R,NC] 
```

# wordpress - WordPress 自定义管理面板

> ID：12748814
> 
> 赞同：0
> 
> 时间：2012-10-05T14:53:31.677
> 
> 标签：wordpress, admin

我正在开发一个定制的 Wordpress 主题，包括 Wordpress CMS 中的自定义管理部分。

我一直在从现有的管理面板中寻找灵感，并找到了我正在寻找的东西（但不是工作）[http://demo.wpjobboard.net/wp-admin/admin.php?page=wpjb/job](http://demo.wpjobboard.net/wp-admin/admin.php?page=wpjb/job)

我设法创建了自己的面板部分和子菜单。

*   我的网站选项
    *   消息
    *   活动

当用户选择新闻或事件时，我需要 Wordpress 列出要在网站上显示的新闻和事件。不过，我对新闻和事件数据的存储位置感到困惑。

在自定义 php cms 中，我将有事件/新闻表，并在 html 表中列出这些数据。对于 Wordpress，它会在 Wordpress 帖子表中还是在自定义表中？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:35:04.380

我假设您想要的是带有可选主题设置的部分。在这里解释如何做到这一点需要做一些工作，[但我发现这个教程非常有帮助](http://wp.tutsplus.com/tutorials/theme-development/create-a-settings-page-for-your-wordpress-theme/)。

# android - 清空应用数据后，Urban Airship设备注册生成新的APID

> ID：12748822
> 
> 赞同：2
> 
> 时间：2012-10-05T14:53:54.643
> 
> 标签：android, urbanairship.com

我注意到通过 Urban Airship（通过 C2DM）接收推送通知的 Android 应用程序存在问题。

该应用程序在首次安装时注册到 Urban Airship。当用户启动应用程序时，他们被要求向应用程序接口的系统提供用户 ID 和密码。成功验证后，此用户 ID 被分配为此实例的 Urban Airship 别名。

当用户清除应用程序的应用程序数据时会出现此问题。下次启动应用程序时，它会重新注册 Urban Airship，但会收到不同的 APID。用户再次输入他们的凭据，现在我有两个不同的 APID，具有相同的别名，指的是同一设备。每当我发送广播消息或指向该别名的消息时，应用程序都会收到两次消息。显然，我不希望这种情况发生。

同时，用户完全有可能将应用程序安装在两个不同的设备（例如，手机和平板电脑）上，在这种情况下，我会将相同的别名分配给两个不同的 APID，这没关系. 我的问题是当两个 APID 引用同一设备时。

我试图弄清楚如何防止这种情况发生。我希望当用户选择清除应用程序数据时可能会触发某种意图，但似乎这种意图并不存在。

有没有其他人遇到过这个问题，你能想出一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:18:05.337

似乎城市空气已经解决了这个问题。现在，如果多个设备 id 注册在同一个别名下，他们只会将消息发送到最后一个注册的那个。虽然它解决了你的问题，但创造了一个新的另一种问题，就好像某些用户在某个别名下注册了两个设备 ID，只有最后一个会收到推送通知。但是由于多次注册而在单个设备上获得多个通知更为突出和糟糕的用例，因此我想他们一定考虑过这种权衡.

# java - 未找到速度模板

> ID：12748823
> 
> 赞同：0
> 
> 时间：2012-10-05T14:53:59.960
> 
> 标签：java, spring, spring-mvc, velocity

我正在尝试在我的 Spring MVC 站点中使用 Velocity 来模板电子邮件。我相信如果 Velocity 能找到我想要使用的模板，一切都会好起来的。我有一个模板`/WEB-INF/emails/faultNotification.vm`。在我的代码中，我有这个：

```
MimeMessageHelper helper = new MimeMessageHelper (message, true);
helper.setTo (toAddresses);
helper.setSubject (subject);
Map<String, Object> model = new HashMap<> ();
model.put ("username", "nikitin");
model.put ("emailAddress", "nik.estep@gmail.com");
helper.setText (VelocityEngineUtils.mergeTemplateIntoString (
                                 m_emailEngine,
                                 "faultNotification.vm",
                                 model), true);
helper.addAttachment (attachmentName,
                      new ByteArrayResource (attachment.toByteArray ()),
                      "application/zip");
m_sender.send (message); 
```

在我的 XML 中，我有这个：

```
<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
        <property name="resourceLoaderPath" value="file:/WEB-INF/emails" />
</bean>
<bean id="emailSender" class="com.tarigma.gem.communication.EmailSender">
    <constructor-arg ref="systemSettings" />
    <constructor-arg ref="velocityEngine" />
</bean> 
```

我一直在阅读我能找到的任何帖子，据我所知，这应该可以工作，但是当我去使用 Velocity 时找不到模板（`ERROR VelocityEngine - ResourceManager: Unable to find resource 'faultNotification.vm' in any resource loader`）。我不想把模板放进去，`/WEB-INF/classes`因为那不是那个文件夹里的东西，必须有办法让它工作。任何帮助将不胜感激，我昨天失去了所有试图解决这个问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:58:39.753

只要您的战争不是以爆炸形式部署的，就没有适合您的文件 URL。我会尝试配置：

[http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/view/WebappResourceLoader.html](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/view/WebappResourceLoader.html)

而不是文件资源加载器并使用从战争根目录开始的完整路径

# php - 坏消息号错误

> ID：12748826
> 
> 赞同：4
> 
> 时间：2012-10-05T14:54:05.400
> 
> 标签：php

我正在使用脚本转发电子邮件地址并收到错误的消息编号错误。消息号被解析为函数的参数，我不知道如何获取消息号并将其作为参数插入。请帮忙。我是 php 新手。错误指出 `$structure = imap_fetchstructure($connection, $id, FT_UID);`和`$result['text'] = imap_body($connection, $id, FT_UID);`部分。请帮我。

```
 <?php
require_once '../swift/lib/swift_required.php';
$hostname = '{imap.xyz.com:993/imap/ssl}INBOX';
$username = 'email';
$password = 'password';

/* try to connect */
$connection = imap_open($hostname,$username,$password) or die('Cannot connect to Tiriyo: ' . imap_last_error());

ini_set('memory_limit', '256M');

function Message_Parse($id)
{   
global $connection;
    if (is_resource($connection))
    {
        $result = array
        (
            'text' => null,
            'html' => null,
            'attachments' => array(),
        );  

                $structure = imap_fetchstructure($connection, $id, FT_UID);
        //print_r($structure);
//array_key_exists — Checks if the given key or index exists in the array
        if (is_array($structure) && array_key_exists('parts', $structure))
        {
            foreach ($structure->parts as $key => $part)
            {
                if (($part->type >= 2) || (($part->ifdisposition == 1) && ($part->disposition == 'ATTACHMENT')))
                {
                    $filename = null;
                    if ($part->ifparameters == 1)
                    {
                        $total_parameters = count($part->parameters);
                        for ($i = 0; $i < $total_parameters; $i++)
                        {
                            if (($part->parameters[$i]->attribute == 'NAME') || ($part->parameters[$i]->attribute == 'FILENAME'))
                            {
                                $filename = $part->parameters[$i]->value;
                                break;
                            }
                        }
                        if (is_null($filename))
                        {
                            if ($part->ifdparameters == 1)
                            {
                                $total_dparameters = count($part->dparameters);

                                for ($i = 0; $i < $total_dparameters; $i++)
                                {
                                    if (($part->dparameters[$i]->attribute == 'NAME') || ($part->dparameters[$i]->attribute == 'FILENAME'))
                                    {
                                        $filename = $part->dparameters[$i]->value;

                                        break;
                                    }
                                }
                            }
                        }
                    }
                    $result['attachments'][] = array
                    (
                        'filename' => $filename,
                        'content' => str_replace(array("\r", "\n"), '', trim(imap_fetchbody($connection, $id, ($key + 1), FT_UID))),
                    );
                }

                else
                {
                    if ($part->subtype == 'PLAIN')
                    {
                        $result['text'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else if ($part->subtype == 'HTML')
                    {
                        $result['html'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else
                    {
                        foreach ($part->parts as $alternative_key => $alternative_part)
                        {
                            if ($alternative_part->subtype == 'PLAIN')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['text'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }

                            else if ($alternative_part->subtype == 'HTML')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['html'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }
                        }
                    }
                }
            }
        }

        else
        {
            $result['text'] = imap_body($connection, $id, FT_UID);
        }

        $result['text'] = imap_qprint($result['text']);
        $result['html'] = imap_qprint(imap_8bit($result['html']));

        return $result;

    }

    return false;
}

 $emails = imap_search($connection,'ALL');
//  rsort($emails);

  /* for every email... */
 foreach($emails as $email_number) {
     echo $email_number;
$result = Message_Parse($email_number);
//$data = $result['attachments'];
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
//$attachment = Swift_Attachment::newInstance($result['attachments'], $filename, 'audio/mp3');
$message = Swift_Message::newInstance('test message1 ')
  ->setFrom(array('from address' => 'name'))
  ->setTo(array('to address.com'))
  ->setBody($result['text']);
//  ->attach($attachment);

  $result1 = $mailer->send($message);
 }

?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:17:50.937

该`FT_UID`标志表示您正在使用消息 uid，而不是消息序列 id。为了获取给定消息的 uid，您必须使用[msg_uid()](http://php.net/manual/en/function.imap-uid.php)函数。

由于您是初学者，我几乎不认为这是您的问题，所以这里是如何获取给定消息的标题和内容的完整示例：

```
<?php

$emailAddress = 'postmaster@example.com';
$password = 'someSecretPassword';
$server = 'localhost';
$folder = 'Inbox';

$dsn = sprintf('{%s}%s', $server, $folder);
$mbox = imap_open($dsn, $emailAddress, $password);

if (!$mbox) {
    die ('Unable to connect');
}

$status = imap_status($mbox, $dsn, SA_ALL);
$msgs = imap_sort($mbox, SORTDATE, 1, SE_UID);

foreach ($msgs as $msguid) {
    $msgno = imap_msgno($mbox, $msguid);
    $headers = imap_headerinfo($mbox, $msgno);
    $structure = imap_fetchstructure($mbox, $msguid, FT_UID);

    var_dump($headers);
    var_dump($structure);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-05T20:39:15.197

在循环内部时，我遇到了同样的错误，在处理电子邮件后，我将邮件移动到另一个文件夹。

在我注释掉错误之后`imap_move`，错误就消失了。

# module - 如何在 TypeScript 中只导入模块的一部分？

> ID：12748827
> 
> 赞同：1
> 
> 时间：2012-10-05T14:54:08.057
> 
> 标签：module, typescript

假设我有一个翻译模块，我只想导入法语翻译文件。我想做这样的事情：

```
import french = module("./translations").french; 
```

类似于`require`在 CommonJS 中使用 a 的方式。

是否可以在 TypeScript 中做类似的事情，或者我是否必须导入整个模块并只做类似的事情？

```
import translations = module("./translations");
var french = translations.french; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:58:12.533

在某些情况下，这实际上是相当合理的事情。不幸的是，目前 TypeScript 不支持这一点。导入声明的语法不允许对其进行点缀（参见规范第 9.2.2 节）。这是我们未来可以考虑改进的地方。[我建议在Codeplex](http://typescript.codeplex.com)网站上提交问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:33:13.910

如果您只需要模块的一部分，听起来您的模块设计可能是错误的——即您应该有一个代表您需要的模块并将您不需要的东西移到另一个模块中。

例如，每种语言都有一个模块。

# ios - 使用 XCode 4.5 支持 iOS 3.2（或 4.0）

> ID：12748829
> 
> 赞同：4
> 
> 时间：2012-10-05T14:54:11.517
> 
> 标签：ios, xcode, app-store

我将应用程序上传到 AppStore，最低支持`iOS 3.2`. 然后我下载`XCode 4.5`了`iOS 6.0 SDK`，我想为我的 3.2 支持的应用程序发布更新。但如您所知，在 XCode 4.5 中可以选择 4.3 作为最低版本。但由于我的项目比较老，我可以选择3.2。我想知道如果我构建和上传我的应用程序并选择了如图所示的 3.2，它会支持 3.2 吗？

![图片](../Images/d312b65d11cbecd6bc5e67f2700a78fa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:31:26.157

不，您不能使用 Xcode 4.5 构建和提交与 iOS 3.2 兼容的应用程序。

Xcode 4.5 无法构建 armv6 二进制可执行切片，这对于 iOS 4.3 以下的所有部署目标都是必需的（除非您最初提交了仅适用于 iOS 3.x armv7 的应用程序的非常不寻常的情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:19:17.550

Xcode 4.5 不支持 ios 4.3 及更低版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:58:44.993

汇总选项卡![截屏](../Images/cf8886ba2c12971337aa064d7d5aac0e.png)并将所需的部署目标字段（XCode 4.5）编辑为文本

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T15:05:15.360

[这是维基百科](http://en.wikipedia.org/wiki/Xcode)的引述：

> 在 2010 年 6 月的全球开发者大会上，Apple 在 Developer Tools State of the Union 演讲中宣布了 Xcode 的第 4 版。开发者工具版本 4 将 Xcode 编辑工具和 Interface Builder 整合到一个应用程序中，以及其他增强功能。[13][14] Apple 于 2011 年 3 月 9 日发布了 Xcode 4.0 的最终代码。该软件向每年 99 美元的 Mac 开发者计划和每年 99 美元的 iOS 开发者计划的所有注册会员免费提供。它还在 Mac App Store 上以 4.99 美元的价格出售给非会员（不再可用）。Xcode 4.0 放弃了对许多旧系统的支持，包括所有 PowerPC 开发以及适用于 Mac OS X 10.4 和 10.5 的 SDK，以及所有早于 4.3 的 iOS SDK。部署目标仍然可以设置为为那些旧平台生成二进制文件，

它说从 Xcode 4.0 开始，Apple 删除了对 iOS 4.3 的支持。SDK 不再可用。但是仍然可以为旧平台提供二进制文件。

# php - 如何在 Symfony2 中使用“原始”PHP Mongodb PECL 驱动程序

> ID：12748834
> 
> 赞同：1
> 
> 时间：2012-10-05T14:54:21.877
> 
> 标签：php, mongodb, symfony, pecl

> **可能重复：**
> [在 Symfony2 中使用 Imagick？](https://stackoverflow.com/questions/7109649/using-imagick-in-symfony2)

我是 Symfony 的新手，所以这可能是一个愚蠢的问题。但是由于经过几个小时的谷歌搜索，我还没有找到任何相关的答案，所以在这里可能值得一试。

所以基本上我使用 Windows、Apache、纯 PHP、Mongodb 和“原始”PHP_Mongodb PECL 驱动程序（此处使用“原始”一词与 Symfony2 中的 Doctrine Mongodb ODM 包不同）进行 Web 应用程序开发。PECL 驱动程序工作得很好，我可以这样写：

```
 <?php
  $m = new Mongo();
  $db = $m->myDB;
  $db->find();
  //Do Other DB Operations. 
```

上面的代码在没有任何“use”、“include”或“require”语句的情况下运行良好，因为我遵循标准说明并在 php.ini 中设置了 PECL 驱动程序扩展。在 Web 浏览器中显示 phpinfo() 时，Mongodb 驱动程序信息会正确显示。一切都很完美。

然后我开始使用 Symfony2，因为它提供了 url 重写、MVC 模式、安全性和其他有用的东西。Doctrine Mongodb ODM 包运行良好，但在我看来，**它只能持久化 PHP 对象**。我的项目中确实有一堆 javascript 对象要持久化，除了在其上放置一个“PHP 包装器”（创建一个仅包含该 javascript 对象的 PHP 对象）之外，根本没有办法做到这一点。

当我尝试使用旧的 PECL 技巧与上面相同的代码块与数据库通信时，我收到了这个错误：

```
Fatal error: Class 'MyProject\Controller\Mongo' not found in C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\Symfony\src\MyProject\Controller\DefaultController.php on line 47\. 
```

似乎 Symfony2 仅在寻找其自动类加载器时阻止或覆盖了 php.ini 中的扩展路径。我想我需要更改 autoload.php 和/或 AppKernel.php 以包含该扩展名？请帮助我了解这里发生了什么。我可以在 Symfony2 中使用 PECL 驱动程序吗？或者 Doctrine Mongodb ODM是在 Symfony2 中访问数据库**的唯一方法吗？**谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:49:40.757

Symfony2 使用命名空间 php。这使得使用非命名空间库/类有点棘手，但你真的只需要知道这些技巧。

当您尝试使用`new Mongo()`获取 mongodb 对象时，PHP 会在您当前的命名空间中查找，这意味着它会在您的类中查找 mongo() 函数。为了使这项工作，您需要为 mongo 指定命名空间。由于它不使用命名空间，PHP 将其放置在全局命名空间中。因此，要正确引用该函数，您需要使用`new \Mongo()`，PHP 将在您的 \ 命名空间中查找，而不是当前的命名空间。

# neo4j - py2neo 中的连接中止

> ID：12748835
> 
> 赞同：1
> 
> 时间：2012-10-05T14:54:23.407
> 
> 标签：neo4j, py2neo

我正在尝试 py2neo 的教程示例。有时，当我尝试创建索引或获取节点或与 neo4j 进行任何其他交互时，我会收到 SocketError: error(10053, 'An established connection was aborted by the software in your host')。有什么方法可以检测到 py2neo 库中的连接是否仍然存在，或者我是否应该在查询之前始终调用 GraphDatabaseService。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-02T05:35:43.920

晚了 5 年多，但使用 neo4j 和 py2neo 谷歌搜索我的 10053 错误将我发送到此页面。

我得到了同样的错误并添加和用户为我解决了它。

```
CALL dbms.security.createUser('test', 'test', false) 
```

# c++ - C++ 共享库未定义对 `FooClass::SayHello()' 的引用

> ID：12748837
> 
> 赞同：24
> 
> 时间：2012-10-05T14:54:28.460
> 
> 标签：c++, linux, shared-libraries

我正在制作一个 C++ 共享库，当我编译一个使用该库的主 exe 时，编译器给了我：

```
main.cpp:(.text+0x21): undefined reference to `FooClass::SayHello()'
collect2: ld returned 1 exit status 
```

库代码：

fooclass.h

```
#ifndef __FOOCLASS_H__
#define __FOOCLASS_H__

class FooClass 
{
    public:
        char* SayHello();
};

#endif //__FOOCLASS_H__ 
```

fooclass.cpp

```
#include "fooclass.h"

char* FooClass::SayHello() 
{
    return "Hello Im a Linux Shared Library";
} 
```

编译：

```
g++ -shared -fPIC fooclass.cpp -o libfoo.so 
```

主要：main.cpp

```
#include "fooclass.h"
#include <iostream>

using namespace std;

int main(int argc, char const *argv[])
{
    FooClass * fooClass = new FooClass();

    cout<< fooClass->SayHello() << endl;

    return 0;
} 
```

编译：

```
g++ -I. -L. -lfoo main.cpp -o main 
```

该机器是 Ubuntu Linux 12

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-05T14:57:21.953

```
g++ -I. -L. -lfoo main.cpp -o main 
```

是问题所在。最新版本的 GCC 要求您按照它们相互依赖的顺序放置目标文件和库 - 作为一个相应的经验法则，您必须将库标志作为链接器的最后一个开关；即，写

```
g++ -I. -L. main.cpp -o main -lfoo 
```

反而。

# python - “from AB import *”如何解释？

> ID：12748843
> 
> 赞同：2
> 
> 时间：2012-10-05T14:54:53.827
> 
> 标签：python

我遇到了一段代码，例如：

```
 from object_recognition_msgs.msg import * 
```

在我看来，这个但是我发现object_recognition_msgs（这是一个目录）中没有msg.py，但是object_recognition_msgs中有一个名为“msg”的目录，目录的结构是

```
 object_recognition_msgs
  ├── msg
      ├── __init__.py
      ├── _ObjectId.py
      ├── _ObjectInformation.py
      ├── _ObjectRecognitionActionFeedback.py
      ├── _ObjectRecognitionActionGoal.py
      ├── _ObjectRecognitionAction.py
      ├── _ObjectRecognitionActionResult.py
      ├── _ObjectRecognitionFeedback.py
      ├── _ObjectRecognitionGoal.py
      ├── _ObjectRecognitionResult.py
      ├── _RecognizedObjectArray.py
      ├── _RecognizedObject.py
      ├── _TableArray.py
      └── _Table.py 
```

我将“from object_recognition_msgs.msg import *”解释为在 object_recognition_msgs/msg 中导入所有 python 文件，这种解释正确吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:56:31.673

该语句将从`__init__.py`包中的模块导入所有名称，而不是包含的文件。

您必须在`__init__.py`文件中显式导入包中的每个模块，才能导入包`*`中所有模块中的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:57:48.260

因为`msg`是一个目录，所以 import 语句将执行该文件`msg/__init__.py`并导入该文件中定义的所有非私有名称。它不会导入任何其他文件，除非`msg/__init__.py`自己导入它们。

# exception - 当我尝试启动我的 jboss 服务器（来自 eclipse IDE 和来自我的 unix 终端的standalone.sh）时，我观察到以下堆栈跟踪：）

> ID：12748849
> 
> 赞同：1
> 
> 时间：2012-10-05T14:55:19.193
> 
> 标签：exception, jboss, persistence, jboss7.x, stax

当我尝试启动我的 jboss 服务器（来自 eclipse IDE 和来自我的 unix 终端的standalone.sh）时，我观察到以下堆栈跟踪。谁能告诉我为什么？：

```
JAVA_OPTS:  -server -XX:+UseCompressedOops -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

16:41:48,878 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
16:41:49,025 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
16:41:49,066 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
16:41:49,289 ERROR [org.jboss.as.server] JBAS015956: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:141) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.ServerService.boot(ServerService.java:266) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05-icedtea]
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:677)
    at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2104)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2010)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1102)
    at com.ctc.wstx.sr.BasicStreamReader.nextTag(BasicStreamReader.java:1125)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:67) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:133) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    ... 3 more

16:41:49,295 FATAL [org.jboss.as.server] JBAS015957: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
16:41:49,301 INFO  [org.jboss.as] JBAS015950: JBoss AS 7.1.1.Final "Brontes" stopped in 1ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:23:56.133

这意味着您的 Standalone.xml 存在一些问题。换一个新的，应该可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:35:33.267

这是相关行

```
JBAS014676: Failed to parse configuration
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog 
```

看起来您缺少配置文件（或更可能是空的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:15:55.200

我刚遇到同样的问题，发现**standalone.xml 是空**的。

我不知道是什么导致了这种情况......你可以在 ${AS7_installation}/standalone/configuration/standalone_xml_history 中找到你的standalone.xml的备份

# android - 在两个活动之间传递数据的问题

> ID：12748850
> 
> 赞同：0
> 
> 时间：2012-10-05T14:55:25.933
> 
> 标签：android, android-intent, android-activity

这是我的 onCreate() 方法。我正在尝试将变量从一个意图传递给这个意图。这很好用。当我按下后退按钮并返回到以前的意图来更改值时，应用程序就会崩溃。而且当我改变方向时，应用程序崩溃。我在 pp.getData() 方法中收到“Nullpointer 异常”。它将空参数传递给函数。我该如何克服呢？我需要添加任何其他详细信息吗？

```
public void onCreate(Bundle savedInstanceState) {

    // get intent data
    Intent i = getIntent();

    setQuery(i.getExtras().getString("query"));
    Log.v("query:", getQuery());

    userquery = getQuery();

    super.onCreate(savedInstanceState);
    setContentView(R.layout.product_view_layout);

    try {
        pp = new Parser(userquery);
        productData = pp.getData(asynctask, userquery);
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mProductViewPagerAdapter = new ProductViewPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mProductViewPagerAdapter);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:09:16.150

如果“查询”额外内容不存在，`Intent`那么它将返回`null`. 您应该执行空检查以确保您没有得到`nullPointerException`s。

```
String query = i.getExtras().getString("query"));

if(query == null) {
    setQuery("");
}
else {
    setQuery(query);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:14:55.020

如果你想在第一个活动中收到结果，你必须使用这个"

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{

 } 
```

同样，当您开始第一个活动时，您必须启动它 startActivityForResult。在后面将结果设置为 RESULT_OK 或 RESULT_CANCEL。查看开发人员 android 上的活动。

# core-data - 如何根据相关对象集合的属性对 Core Data 结果进行排序？

> ID：12748852
> 
> 赞同：6
> 
> 时间：2012-10-05T14:55:39.707
> 
> 标签：core-data, nssortdescriptor

设置：我有一个父对象的集合，称它们为 ObjectA。每个 ObjectA 与 ObjectB 具有一对多的关系。因此，一个 ObjectA 可能包含 0..n 个 ObjectB-s，并且每个 ObjectB 都有一个特定的 ObjectA 作为其父级。

现在，我想做一个 ObjectA-s 的核心数据提取，它们按最新的 ObjectB 排序。是否可以为此创建一个排序描述符？

有[一个相关的问题](https://stackoverflow.com/questions/5768123/core-data-sort-by-relationships-attribute)描述了完全相同的情况。答案建议将属性从 ObjectB 非规范化为 ObjectA。如果真的没有办法通过一个获取请求来做到这一点，这将是可以的。

相关问题还提到：

> 其实我只是有个想法！也许我可以按消息对对话进行排序。@max.sortedDate...</p>

我试过了。这似乎是不可能的。我收到此错误：

```
2012-10-05 17:51:42.813 xxx[6398:c07] *** Terminating app due to uncaught
exception 'NSInvalidArgumentException', reason: 'Keypath containing
KVC aggregate where there shouldn't be one; failed to handle
ObjectB.@max.creationTime' 
```

将属性非规范化为 ObjectA 是唯一/最佳解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T14:44:05.420

我知道这个问题有点老了，但我所做的是获取所有 ObjectB，遍历结果并提取 ObjectB 属性并将其添加到新数组中。

```
NSFetchRequest *fetchRequest = [NSFetchRequest new];
[fetchRequest setEntity:self.entityDescForObjectB];

// sort
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
[fetchRequest setSortDescriptors:@[sortDescriptor]];

NSError *error = nil;
NSArray *fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
if (fetchedObjects == nil) {
    NSLog(@"Error fetching objects: %@", error.localizedDescription);
    return;
}

// pull out all the ObjectA objects
NSMutableArray *tmp = [@[] mutableCopy];
for (ObjectB *obj in fetchedObjects) {
    if ([tmp containsObject:obj.objectA]) {
        continue;
    }
    [tmp addObject:obj.objectA];
} 
```

这是可行的，因为 CoreData 是一个对象图，因此您可以向后工作。最后的循环基本上检查`tmp`数组是否已经有一个特定的 ObjectA 实例，如果没有，则将其添加到数组中。

对 ObjectB 进行排序很重要，否则这个练习毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T17:35:48.667

您可以在 ObjectB 中添加一个属性，即添加日期的时间戳，然后在获取请求中您可以执行以下操作：

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"objectB.addTime" ascending:YES];
...
fetchRequest.sortDescriptors = @[descriptor]; 
```

# jquery - Javascript 查询

> ID：12748853
> 
> 赞同：1
> 
> 时间：2012-10-05T14:55:40.993
> 
> 标签：jquery

我一直在使用 Raptorize Jquery 插件，想知道是否有人知道如何偏移图像，以便它离开页面开始并移动。（我不知道如何使用 Javascript）

希望你能帮忙

```
(function($) {

    $.fn.raptorize = function(options) {

        //Yo' defaults
        var defaults = {  
            enterOn: 'click', //timer, konami-code, click
            delayTime: 5000 //time before raptor attacks on timer mode
            };  

        //Extend those options
        var options = $.extend(defaults, options); 

        return this.each(function() {

            var _this = $(this);
            var audioSupported = false;
            //Stupid Browser Checking which should be in jQuery Support
            if ($.browser.mozilla && $.browser.version.substr(0, 5) >= "1.9.2" || $.browser.webkit) { 
                audioSupported = true;
            }

            //Raptor Vars
            var raptorImageMarkup = '<img id="elRaptor" style="display: none" src="raptor.png" />'
            var raptorAudioMarkup = '<audio id="elRaptorShriek" preload="auto"><source src="raptor-sound.mp3" /><source src="raptor-sound.ogg" /></audio>'; 
            var locked = false;

            //Append Raptor and Style
            $('body').append(raptorImageMarkup);
            if(audioSupported) { $('body').append(raptorAudioMarkup); }
            var raptor = $('#elRaptor').css({
                "position":"fixed",
                "bottom": "0px",
                "right" : "0",
                "display" : "block"
            })

            // Animating Code
            function init() {
                locked = true;

                //Sound Hilarity
                if(audioSupported) { 
                    function playSound() {
                        document.getElementById('elRaptorShriek').play();
                    }
                    playSound();
                }

                // Movement Hilarity    
                raptor.animate({
                    "bottom" : "0"
                }, function() {             
                    $(this).animate({
                        "bottom" : "0px"
                    }, 100, function() {
                        var offset = (($(this).position().left)+600);
                        $(this).delay(300).animate({
                            "right" : offset
                        }, 2300, function() {

                            raptor = $('#elRaptor').css({
                                "bottom": "-700px",
                                "right" : "300"
                            })
                            locked = false;
                        })
                    });
                });
            }

            //Determine Entrance
            if(options.enterOn == 'timer') {
                setTimeout(init, options.delayTime);
            } else if(options.enterOn == 'click') {
                _this.bind('click', function(e) {
                    e.preventDefault();
                    if(!locked) {
                        init();
                    }
                })
            } else if(options.enterOn == 'konami-code'){
                var kkeys = [], konami = "38,38,40,40,37,39,37,39,66,65";
                $(window).bind("keydown.raptorz", function(e){
                    kkeys.push( e.keyCode );
                    if ( kkeys.toString().indexOf( konami ) >= 0 ) {
                        init();
                        $(window).unbind('keydown.raptorz');
                    }
                }, true);

            }

        });//each call
    }//orbit plugin call
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:08:22.540

您可以使用“right”属性偏移图像，只需将其设置为负宽度（这假定图像具有宽度，但它应该附加到正文中）。

例如：

```
 var raptor = $('#elRaptor').css({
                "position":"fixed",
                "bottom": "0px",
                "right" : -$("#elRaptor").width(),
                "display" : "block"
              }); 
```

我在[这里](http://jsfiddle.net/nrjrU/)创建了一个小样本，等待三秒钟，“猛禽”开始从屏幕的右下角走到左下角。

检测音频支持的更好方法是使用 Modernizr，请参阅[http://modernizr.com/docs/](http://modernizr.com/docs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T20:31:11.333

看起来您的代码与原始插件版本有点不同。这种差异导致猛禽从页面上开始，而不是隐藏在视图之外。

将css`bottom`属性从 0px 更新为 -700px：

```
var raptor = $('#elRaptor').css({
    "position": "fixed",
    "bottom": "-700px", // Update bottom from 0px to -700px
    "right": "0",
    "display" : "block"
}); 
```

旁注：自原始 raptorize 插件发布（2010 年）以来已经有很长时间了，并且它停止与较新的 jQuery 版本一起使用。有一个更新的实现 ( [https://github.com/randomvlad/raptorize-jquery](https://github.com/randomvlad/raptorize-jquery) ) 支持 jQuery 版本 1.7+、2.x 和 3.x 以及一些额外的改进。

免责声明：我是更新后的 raptorize 2.0 插件的“作者”，该插件本身基于 ZURB 的原始插件（[https://zurb.com/playground/jquery-raptorize](https://zurb.com/playground/jquery-raptorize)）。

# svn - SVN：如何获取有关修订的信息

> ID：12748856
> 
> 赞同：0
> 
> 时间：2012-10-05T14:55:47.540
> 
> 标签：svn, revisions, mergeinfo

我使用“svn mergeinfo”命令来获取有关应该从分支合并到主干的更改的信息。此命令仅返回修订列表，例如：r18427 r18428 r18429 ...

我还想获取在将这些更改提交到 svn 以准备此类输出期间添加的注释，例如：r18427 - “代码已格式化” r18428 - “添加了一个过程......” r18429 - “删除了一个冗余变量” ...您知道如何获取有关修订的详细信息吗？可以执行此操作的命令是什么？

感谢您的任何帮助和建议，拉菲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:40:16.730

您可以使用 svn log 命令获取特定版本的评论。通过一些脚本，您可以获得从 mergeinfo 命令返回的修订列表的注释

```
svn log <repo url> -r <rev #> 
```

# jquery - 简单的跨浏览器文本区域扩展器

> ID：12748857
> 
> 赞同：3
> 
> 时间：2012-10-05T14:55:50.400
> 
> 标签：jquery, css, textarea, prop

我以前简单的 textarea 扩展器现在引起了问题。

```
$(document).on('keyup', 'textarea',function(){
        $(this).height($(this).prop('scrollHeight'));
    }); 
```

在 Firefox 上运行良好，但在 webkit 浏览器上，无论需要还是现在，每次按键时都会不断增加文本区域的大小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:57:47.403

看起来你正在寻找这个。[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

# c# - 不确定这是否是公认的设计模式，需要改进

> ID：12748860
> 
> 赞同：0
> 
> 时间：2012-10-05T14:55:57.367
> 
> 标签：c#, inheritance, reflection

我有一个看起来像这样的基类：

```
public abstract class MetadataBase : NgageControl, INamingContainer, IValidator
{
    public abstract Type DataType { get; }
    public string SerializedData { get; set; }
    ....
} 
```

然后我有一个通用类，它扩展了上面的类：

```
public abstract class MetadataBase<Tdata, Traw, Tsettings> : MetadataBase
    where Tdata : new()
    where Tsettings : new()
    where Traw : INgageData
{
     ....
} 
```

然后我有一组基于这个的类，如下所示：

```
public class MetadataDateTime : MetadataBase<MetadataDateTimeData, NgageDateTime, MetadataDateTimeSettings>
{
public override Type DataType { get {return typeof(MetadataDateTimeData); } }
     ....
} 
```

这种方法的原因是我可以做这样的事情：

```
MetadataBase test = GetMetaData();
XmlSerializer xs = new XmlSerializer(test.DataType);
xs.Deserialize();
MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(test.SerializedData));
_xs.Deserialize(ms);
ms.Dispose(); 
```

我本可以从 Type.GetGenericArguments 方法中获取 MetadataDateTimeData 类型，但由于其性能缓慢，我不想开始使用反射，我不确定我是否正确，但似乎从被覆盖的属性中获取类型会快得多。

这一切都很好，但现在看来我可能不得不支持静态获取类型。目前我正在创建这个类的一个实例，只是为了获取它的类型以反序列化一些数据，这种方法真的会损害性能，所以我正在考虑使用属性来指定数据类。不过，问题在于您需要使用反射来读取属性，所以我不妨只使用 GetGenericArguments 方法。

你会推荐做什么？

谢谢，

乔

# ios - 为 iOS 应用添加库

> ID：12748863
> 
> 赞同：0
> 
> 时间：2012-10-05T14:56:06.603
> 
> 标签：ios, c

我正在构建一个需要使用 glm 库（[链接到站点](http://glm.g-truc.net)）的 iOS 应用程序。我不一定要在每次使用时都将整个库放在 app 文件夹中。是否有可能

A) 将 xcode 指向库文件夹，以便它知道在哪里可以找到标头

或者

B) 将库放在标准 iOS 库文件夹中。

我确信这是开发人员必须一直做的事情，但我一直无法在网络上找到简单的解决方案。

# javascript - 想知道如何调用这个 javascript 函数？

> ID：12748867
> 
> 赞同：0
> 
> 时间：2012-10-05T14:56:28.850
> 
> 标签：javascript

我知道 Z 和 A 是在下面这个缩小的代码中调用的函数。

```
function (A){z(a(l.username.el),"^[a-zA-Z][a-zA-Z0-9\\-\\.']+$","username")} 
```

我的问题是如何使用

```
Navigate Url=javascript:(somecode) 
```

有人可以给我一个例子，说明我如何通过 Url= 调用此函数，它是一个用户名字段，在用户输入他们的 javascript 表单的用户名后变为绿色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:57:52.453

它是一个函数表达式（在您提供给我们的代码中）从未在任何地方调用或分配，所以您不能。

代码（就像任何没有副作用并且没有分配到任何地方的代码一样）实际上什么都不做。

> 我知道 Z 和 A 是函数

不。

`Z`不存在。`A`是一个从未使用过的论点。`z`并且`a`是它调用的函数。

如果它们出现在全局范围内，您可以自己调用这些函数（通过提取函数表达式的主体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:01:16.577

你不能调用这个函数，因为它是匿名的......

如果你想调用它，你需要做：

```
var test = function (A){z(a(l.username.el),"^[a-zA-Z][a-zA-Z0-9\\-\\.']+$","username")};
var result = test('sample'); 
```

如果要调用匿名函数：

```
var result = (function (A){z(a(l.username.el),"^[a-zA-Z][a-zA-Z0-9\\-\\.']+$","username")})('sample'); 
```

# c# - 使gridview asp.net中的行可点击？

> ID：12748878
> 
> 赞同：1
> 
> 时间：2012-10-05T14:57:11.437
> 
> 标签：c#, asp.net

我创建了 gridview 并删除了选择按钮以使所有行都可点击，但我想重定向用户以获取所选项目的详细信息
注意：我删除了 CommandField 选择 V​​isible="False"

```
 int rowCount = 0;
protected void gv_TasksProjectForUser_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //var taskID = gv_TasksProjectForUser.SelectedDataKey.Value;
        e.Row.Attributes.Add("onclick", "location='TaskDetail.aspx?taskID=" + e.Row.RowIndex + "'");
        e.Row.Attributes.Add("onmouseover", "JavaScript:this.style.cursor='pointer';");

    }
    rowCount++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:18:38.027

我用项目模板做了这个。

您需要做的是删除属性 AutogenerateColums 并使用对象和项目模板手动添加它们，然后添加一个可能是按钮的对象。

稍后在代码后面添加一个事件来处理按钮单击，在该事件上您可以执行 response.redirect 到另一个页面。

```
<asp:GridView ID="userGrid" runat="server" CssClass="AdminGrid" 
                        AllowPaging="True" AutoGenerateColumns="False" PageSize="11">
                        <Columns>                
                            <asp:BoundField DataField="ApplicationId" Visible="False" />
                            <asp:BoundField DataField="UserName" Visible="False" />                                                                   
                            <asp:TemplateField >
                                <HeaderTemplate>
                                    <asp:Label ID="lblEmail" Text="E-Mail" runat="server" CssClass = "HeaderLabel" meta:resourcekey="lblEmail"></asp:Label>
                                    <asp:ImageButton ID="imgSortEMail" runat="server" ImageUrl="~/Images/normal.gif" OnClick="SortGrid" CommandArgument="EMail" CssClass="SortButton" ToolTip="Click here to Order" />
                                </HeaderTemplate>
                                <ItemTemplate>
                                    <asp:HyperLink ID="lnkEMail" runat="server" CssClass="EmailLinkButton" Text='<%# FormatGridTextDisplay(DataBinder.Eval(Container.DataItem, "EMail")) %>' ToolTip='<%# DataBinder.Eval(Container.DataItem, "EMail") %>' NavigateUrl='<%# DataBinder.Eval(Container.DataItem, "EMail","mailto:{0}") %>' ></asp:HyperLink>                                                                                
                                </ItemTemplate>
                                <HeaderStyle CssClass="OverFlowStringField" />
                                <ItemStyle CssClass="OverFlowLeftAligned" />
                            </asp:TemplateField>
                            <asp:TemplateField >
                                <HeaderTemplate>
                                    <asp:Label ID="lblSalonUser" Text="Salon User" runat="server" CssClass = "HeaderLabel" meta:resourcekey="lblSalonUser"></asp:Label>
                                    <asp:ImageButton ID="imgSortIsSalonUser" runat="server" ImageUrl="~/Images/normal.gif" OnClick="SortGrid" CommandArgument="IsSalonUser" CssClass="SortButton" ToolTip="Click here to Order" />
                                </HeaderTemplate>
                                <ItemTemplate>
                                    <asp:CheckBox ID="chkSalonUser" runat="server" Checked='<%# DataBinder.Eval(Container.DataItem, "IsSalonUser") %>' onclick="javascript:if (this.checked==true) this.checked=false; else this.checked=true;"/>                      
                                </ItemTemplate>
                                <HeaderStyle CssClass="OverFlowStringField" />
                                <ItemStyle CssClass="CenterAligned" />
                            </asp:TemplateField>
                            <asp:TemplateField >                
                                <ItemTemplate>
                                    <asp:Button ID="btnEdit" runat="server" Text="Editar" CssClass="GridButton" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "UserName")%> '  OnClick="btnEdit_Click" meta:resourcekey="btnEdit"/>                        
                                </ItemTemplate>
                                <HeaderStyle CssClass="OverFlowStringField" />
                                <ItemStyle CssClass="CenterAligned" />
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView> 
```

在那里你可以看到我添加了几种类型的项目模板，最重要的是 btnEdit，在那个上有 2 个重要属性，一个是 CommandArgument，您将值发送到页面重定向到另一个是事件OnClick 将处理按钮的单击。

```
Protected void btnEdit_Click(Object sender , System.EventArgs e ){
    Button clickedButton = (sender)Button;
    String() argumentsSend = clickedButton.CommandArgument.ToString().Split("|");
    String backParameters;

    Response.Redirect(String.Concat("RedirectPage.aspx?user=", Server.UrlEncode(argumentsSend(0)), "&company=", Server.UrlEncode(argumentsSend(1)), True);
} 
```

我从 VB 中获取这段代码并使用编译器将其更改为 c#，它可能有错误，但就是这样。最简单的方法是在网格模板上使用链接按钮或 hipperlink，这样您就无需转到代码文件。

# android - android膨胀异常

> ID：12748880
> 
> 赞同：1
> 
> 时间：2012-10-05T14:57:19.160
> 
> 标签：android, android-layout, inflate-exception

我想使用继承为我的 android 应用程序创建一个布局，即每个屏幕都将具有相同的背景和标题。

具有该背景和标题的布局是这样指定的：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="25dp"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/headerLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="2dp"
        android:text="@string/app_name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@string/ColorLabel" />

</LinearLayout>

</merge> 
```

而一个特定的屏幕，即登录屏幕，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/background" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="50dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/username_label"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="@string/Username"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/username_box"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="text" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/password_label"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:text="@string/Password"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/password_box"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="textPassword" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_gravity="fill"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:gravity="center_vertical"
            android:weightSum="2" >

            <Button
                android:id="@+id/login_button"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center|left"
                android:layout_marginRight="20dp"
                android:background="@drawable/background"
                android:text="@string/Login"
                android:textColor="@string/ColorLabel" />

            <Button
                android:id="@+id/register_button"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:background="@drawable/background"
                android:text="@string/Register"
                android:textColor="@string/ColorLabel" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

</merge> 
```

当我想运行此代码时，会导致错误：

```
10-05 17:10:11.620: D/AndroidRuntime(25222): Shutting down VM
10-05 17:10:11.623: W/dalvikvm(25222): threadid=1: thread exiting with uncaught exception (group=0x40015578)
10-05 17:10:11.635: E/AndroidRuntime(25222): FATAL EXCEPTION: main
10-05 17:10:11.635: E/AndroidRuntime(25222): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.shopassistent/com.shopassistent.Login_Activity}: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.os.Looper.loop(Looper.java:123)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at java.lang.reflect.Method.invokeNative(Native Method)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at java.lang.reflect.Method.invoke(Method.java:507)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at dalvik.system.NativeStart.main(Native Method)
10-05 17:10:11.635: E/AndroidRuntime(25222): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.parseInclude(LayoutInflater.java:682)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:619)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.inflate(LayoutInflater.java:383)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.Activity.setContentView(Activity.java:1657)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at com.shopassistent.Login_Activity.onCreate(Login_Activity.java:12)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-05 17:10:11.635: E/AndroidRuntime(25222):    ... 11 more
10-05 17:10:11.635: E/AndroidRuntime(25222): Caused by: java.lang.reflect.InvocationTargetException
10-05 17:10:11.635: E/AndroidRuntime(25222):    at java.lang.reflect.Constructor.constructNative(Native Method)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
10-05 17:10:11.635: E/AndroidRuntime(25222):    ... 26 more
10-05 17:10:11.635: E/AndroidRuntime(25222): Caused by: android.content.res.Resources$NotFoundException: File #ffffff from drawable resource ID #0x7f040009: .xml extension required
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.content.res.Resources.loadColorStateList(Resources.java:1824)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.widget.TextView.<init>(TextView.java:677)
10-05 17:10:11.635: E/AndroidRuntime(25222):    at android.widget.TextView.<init>(TextView.java:369)
10-05 17:10:11.635: E/AndroidRuntime(25222):    ... 29 more 
```

谁能看到这个错误来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:23:46.433

这里

```
android:textColor="@string/ColorLabel" 
```

它返回 a`#FFFFFF`作为一个字符串，它又被解释为一个可绘制的文件名，因此

```
Caused by: android.content.res.Resources$NotFoundException: File #ffffff from drawable resource ID #0x7f040009: .xml extension required 
```

对 textColor 使用可绘制对象或颜色参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:59:57.167

你有 background.xml 吗？

```
Caused by: android.content.res.Resources$NotFoundException: File #ffffff from drawable resource ID #0x7f040009: .xml extension required 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:04:46.810

您的第一个 xml 甚至是复制粘贴错误或无效：

`<merge>`标签没有尽头。您应该`</merge>`在文件末尾添加一个（如果这不是复制粘贴错误）

编辑：第二个xml文件有同样的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:05:15.600

你必须从你的第二个文件中删除“requestFocus”，改用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/background" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="50dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/username_label"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:text="@string/Username"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/username_box"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="text" >

        </EditText>

        <TextView
            android:id="@+id/password_label"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:text="@string/Password"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/password_box"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="textPassword" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_gravity="fill"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:gravity="center_vertical"
            android:weightSum="2" >

            <Button
                android:id="@+id/login_button"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center|left"
                android:layout_marginRight="20dp"
                android:background="@drawable/background"
                android:text="@string/Login"
                android:textColor="@string/ColorLabel" />

            <Button
                android:id="@+id/register_button"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:background="@drawable/background"
                android:text="@string/Register"
                android:textColor="@string/ColorLabel" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>
</merge> 
```

# twitter-bootstrap - 在 less 中隐藏被覆盖的样式（使用 Bootstrap）

> ID：12748881
> 
> 赞同：2
> 
> 时间：2012-10-05T14:57:20.083
> 
> 标签：twitter-bootstrap, less

我正在使用 Bootstrap 编译，并使用我自己的自定义项进行更少（使用通常的 . 但是，我覆盖的规则仍将在最终的 .min.css 中结束，只会被文件下方的规则覆盖。有什么办法吗？不打印覆盖样式以减小文件大小？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T00:42:03.447

当我有一个需要足够定制来证明单独构建 Bootstrap CSS 的项目时，我只需直接编辑 LESS 文件，这样任何被覆盖的规则都不会保留在编译版本中。假设正在使用**git ，可以将这些编辑提交到与****master**分支不同的分支，然后当 Bootstrap 上的更新通过时，将这些更改重新定位到跟踪分支，然后重建。

您的另一个选择是使用一些外部工具来尝试清理无法访问的 CSS。（[已在其他地方提出了相关工具](https://stackoverflow.com/questions/3574136/how-do-i-identify-and-eliminate-unused-css-styles-from-my-bloated-stylesheet)）

但是，我还想指出，对于许多 Bootstrap 项目，从流行的 CDN 加载 Bootstrap CSS，然后从您自己的服务器加载单独的覆盖就可以了。那些未使用的规则不会杀死你，根据我自己的经验，自定义构建是例外，而不是规则。我不知道你的项目，所以这真的是你的电话；只要确保收益超过增加的工作量，这将意味着未来的维护。

# firefox - 如何强制 Firefox 在字体系列列表中使用第一个字体？

> ID：12748884
> 
> 赞同：1
> 
> 时间：2012-10-05T14:57:40.583
> 
> 标签：firefox, font-family

我有这样的问题：在所有浏览器中，字体都是我想要的 - “Helvetica Neue”，但 Firefox 在字体系列列表中使用第二种字体。

我在 Firebug 中检查了它：

```
 /rule from Bootstrap.scss/
      p → "Helvetica Neue",Helvetica,Arial,sans-serif
      parent matched// 
```

这是我在 Firefox 中的截图：

![](../Images/05195fe4b2f25b772ccc556a4a7a0a67.png)

在 Chrome 中：

![](../Images/38c24da56edbcd8534fec4d51deab7fc.png)

或者我的字体对 Firefox 无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:02:14.557

字体类型列表的全部原因`font-family`是，如果客户端机器/浏览器没有可用列表中的第一个字体，它将使用第二个，如果第二个不可用，它将使用第三个。

**编辑**：

如果你真的必须使用你想要的字体系列，你需要获取它的字体文件并加载它。这是讨论此问题的线程的链接：

[如何将外部字体加载到 HTML 文档中？](https://stackoverflow.com/questions/2237540/how-do-i-load-external-fonts-into-an-html-document)

# oracle-apex - 更改 IR“主要报告”标签

> ID：12748895
> 
> 赞同：0
> 
> 时间：2012-10-05T14:58:03.043
> 
> 标签：oracle-apex

顶点 4.1.1.00.23

我可以从“1\. 主要报告”更改 IR 默认报告标签吗？

我找到了这段代码，它适用于页面加载，但是当页面更改或其他已保存的报告被选中时，它会恢复为默认值。

```
<script type="text/javascript">
  $(document).ready(function() {
        changeIRText('1\. Default');
    }); // end of ready function
  function changeIRText(pText){
        $('select#apexir_SAVED_REPORTS').find('option').each(function(index,elem) {
            $(elem).text(function(i, text) {
                        return text.replace('1\. Primary Report', pText);
                }); // end of changing text
            });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:46:53.850

当报表分页时，html 源代码也会被替换。您还需要绑定到`apexafterrefresh`IR 区域上的事件，或者创建一个在“刷新后”框架事件上触发的动态操作，触发元素是 IR 区域。您可以通过为 IR 分配静态 id 来最好地实现手动绑定

```
$("#my_ir_report").bind("apexafterrefresh", function(){changeIRText('1\. Default');}); 
```

## 页面属性中的代码

右键单击页面并选择编辑。
转到“Javascript”区域。
![页面属性中的 javascript](../Images/db81be978f19b09ecc5805cd56e6296e.png)

## 在动态动作中

将javascript函数放在页面属性中。这有利于代码的可重用性。但是，如果您不在动态操作之外使用它，请考虑将代码简单地放在动态操作中。不过危害较小，因为当您看到动态操作并检查它运行的代码时，您会看到它调用了一个函数，并且您会知道这将在页面属性或外部 javascript 文件中。

创建一个动态操作，输入Advanded。刷新后启动，然后选择您的 IR 区域。

动态动作属性：
![动态动作属性](../Images/7deed02ebdc2ab892114f309fe774a4a.png)

在真正的操作中，选择执行 javascript 作为操作。输入你的代码。向导创建动态动作后，返回真正的动作属性并确保选中“页面加载时触发”复选框！这将确保您的代码不仅会在刷新报告时运行，而且还会在页面加载完成时运行，并节省创建另一个动态操作！

真实动作属性：
![真实动作属性](../Images/fd45cc4c01a0f99c5817d8b949029cd8.png)

***在结束***
不熟悉 javascript 很好，随着时间的推移你会学会的。但是一定要学习一些动态动作知识！不要在你的页面上塞满脚本标签，它们会更难维护，也更难记住它们的位置和位置！
[Oracle 动态操作](http://st-curriculum.oracle.com/obe/db/apex/r40/apexdynactions/apexdynactions_ll.htm#t6)
[教程 Skillbuilders youtube 动态操作教程](http://www.youtube.com/watch?v=Xe3JvYUxMnY)

# c++ - 无法在 Microsoft Visual Studio 中打开 Windows.h

> ID：12748896
> 
> 赞同：38
> 
> 时间：2012-10-05T14:58:04.110
> 
> 标签：c++, windows, visual-studio, kinect

首先：我使用的是 Microsoft Visual Studio 2012

我是一名 C#/Java 开发人员，我现在正在尝试使用 Microsoft SDK 和 C++ 为 kinect 编程。所以我从 Color Basics 示例开始，但我无法编译它。起初，没有一个类能够找到 Windows.h。所以我安装（或重新安装，我不确定）Windows SDK，并将SDK的包含目录添加到项目的包含“路径”中。然后所有问题都消失了，除了一个：

```
Error   5   error RC1015: cannot open include file 'windows.h'. C:\temp\ColorBasics-D2D\ColorBasics.rc  17  1   ColorBasics-D2D 
```

这就是错误。没有原因，系统可以找到它，因为它在多个其他文件中使用，只有这个文件无法使用它。作为参考，有问题的整个文件（ColorBasics.rc）：

```
//------------------------------------------------------------------------------
// <copyright file="ColorBasics-D3D.rc" company="Microsoft">
//     Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
//------------------------------------------------------------------------------

// Microsoft Visual C++ generated resource script.
//
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#define APSTUDIO_HIDDEN_SYMBOLS
#include "windows.h"
#undef APSTUDIO_HIDDEN_SYMBOLS

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

/////////////////////////////////////////////////////////////////////////////
// English (United States) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US

/////////////////////////////////////////////////////////////////////////////
//
// Icon
//

// Icon with lowest ID value placed first to ensure application icon
// remains consistent on all systems.
IDI_APP                 ICON                    "app.ico"

/////////////////////////////////////////////////////////////////////////////
//
// Dialog
//

IDD_APP DIALOGEX 0, 0, 512, 424
STYLE DS_SETFONT | DS_FIXEDSYS | WS_MINIMIZEBOX | WS_CLIPCHILDREN | WS_CAPTION | WS_SYSMENU
EXSTYLE WS_EX_CONTROLPARENT | WS_EX_APPWINDOW
CAPTION "Color Basics"
CLASS "ColorBasicsAppDlgWndClass"
FONT 8, "MS Shell Dlg", 400, 0, 0x1
BEGIN
    DEFPUSHBUTTON   "Screenshot",IDC_BUTTON_SCREENSHOT,238,391,50,14
    CONTROL         "",IDC_VIDEOVIEW,"Static",SS_BLACKFRAME,0,0,512,384
    LTEXT           "Press 'Screenshot' to save a screenshot to your 'My Pictures' directory.",IDC_STATUS,0,413,511,11,SS_SUNKEN,WS_EX_CLIENTEDGE
END

/////////////////////////////////////////////////////////////////////////////
//
// DESIGNINFO
//

#ifdef APSTUDIO_INVOKED
GUIDELINES DESIGNINFO
BEGIN
    IDD_APP, DIALOG
    BEGIN
    END
END
#endif    // APSTUDIO_INVOKED

#ifdef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// TEXTINCLUDE
//

1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#define APSTUDIO_HIDDEN_SYMBOLS\r\n"
    "#include ""windows.h""\r\n"
    "#undef APSTUDIO_HIDDEN_SYMBOLS\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "\r\n"
    "\0"
END

#endif    // APSTUDIO_INVOKED

#endif    // English (United States) resources
/////////////////////////////////////////////////////////////////////////////

#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//

/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T15:28:00.690

如果您还没有这样做，请尝试添加`"SDK Path\Include"`：

```
Project → Preferences → C/C++ → General → Additional Include Directories 
```

并添加`"SDK Path\Lib"`到：

```
Project → Preferences → Linker → General → Additional Library Directories 
```

另外，尝试更改`"Windows.h"`为`<windows.h>`

如果没有帮助，请检查文件的物理存在，它应该位于 Visual Studio 安装目录的“\VC\PlatformSDK\Include”文件夹中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-15T06:41:30.287

启动 Visual Studio。转到工具-> 选项并展开项目和解决方案。从树中选择 VC++ 目录，然后从右侧的组合中选择包含文件。

你应该看到：

> $(WindowsSdkDir)\包括

如果缺少此内容，则说明您发现了问题。如果没有，请搜索文件。它应该位于

32位系统：

> C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include

64位系统：

> C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\Include

如果 VS 安装在默认目录中。

来源： http://forums.codeguru.com/showthread.php?465935-quot-windows-h-no-such-file-or-directory-quot-in-Visual-Studio-2008!-Help& [p=1786039#post1786039](http://forums.codeguru.com/showthread.php?465935-quot-windows-h-no-such-file-or-directory-quot-in-Visual-Studio-2008!-Help&p=1786039#post1786039)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-08-27T20:39:13.063

**如果您的目标是 Windows XP ( `v140_xp`)，请尝试安装*Windows XP Support for C++*。**

从 Visual Studio 2012 开始，默认工具集 (v110) 不再支持 Windows XP。因此，`Windows.h`如果您的项目使用默认 C++ 包以 Windows XP 为目标，则可能会发生错误。

*检查项目的Platform Toolset*中指定了哪个 Windows SDK 版本。( `Project → Properties → Configuration Properties → General`)。如果您的工具集以 结尾`_xp`，则需要安装 XP 支持。

[![Visual Studio：项目工具集](../Images/4626d9ba203affba8487d3410cc7f058.png)](https://i.stack.imgur.com/NWsFn.png)

打开 Visual Studio 安装程序，然后为您的 Visual Studio 版本单击*修改*。打开*Individual Components*选项卡并向下滚动到*Compilers, build tools, and runtimes*。在底部附近，检查*Windows XP 对 C++ 的支持，*然后单击*修改*开始安装。

[![Visual Studio 安装程序：XP 对 C++ 的支持](../Images/0a7983a791855efce9387cd1a9a64fa3.png)](https://i.stack.imgur.com/SnOLH.png)

### 也可以看看：

*   [如何在 Microsoft Visual Studio C++ 中定位 Windows XP](https://stackoverflow.com/q/35664861/3357935)
*   [平台工具集 v140 和 v140_xp 有什么区别？](https://stackoverflow.com/q/36226812/3357935)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-18T15:39:54.060

就我而言，我必须右键单击解决方案并单击“重新定位项目”。就我而言，我重新定位到 Windows SDK 版本 10.0.1777.0 和 Platform Toolset v142。我也不得不`"Windows.h"`改变`<windows.h>`

我在 Windows 10 机器上运行 Visual Studio 2019 版本 16.25

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-28T12:39:19.417

**1)**前往`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A for VS2013`

**2)**复制文件夹`Include`和`Lib`（您应该检查文件夹窗口中的文件夹在哪里，例如`v7.1`、`v8`、`v6`等）

**3）**将它们粘贴到`C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC`

我解决了我的问题，例如：

> **错误 lnk1104：**无法打开文件 'kernel32.lib'。
> **错误 c1083：**无法打开 Windows.h

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T20:32:26.900

需要选择 Windows SDK 版本和平台工具集的正确组合当然取决于您当前安装的工具集

[![SDK 版本和平台工具集](../Images/05f6f9e62271650e8b4f4c09674fae04.png)](https://i.stack.imgur.com/2tu1g.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-02T05:39:45.980

我收到此错误致命错误 lnk1104：无法打开文件“kernel32.lib”。出现此错误是因为 VC++ 目录中没有路径。为了解决这个问题

打开 Visual Studio 2008

1.  转到工具-选项-项目和解决方案-VC++ 目录-*
2.  然后在右上角选择库文件
3.  这里需要添加kernel132.lib的路径

就我而言，它是 C:\Program Files\Microsoft SDKs\Windows\v6.0A\Lib

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-01T11:54:12.493

如果有人在 Visual Studio 中遇到此问题，请执行以下步骤：

1.  运行 Visual Studio 安装程序
2.  去修改
3.  取消旧版本的Windows SDK版本（对我来说，它是10.0.18??????）
4.  勾选最新版本的 Windows SDK 版本（对我来说，它是 10.0.19??????）
5.  按 OK，它将卸载旧 SDK 并安装包含所有头文件的新 SDK 版本。

# vba - 将 ActiveX 控件作为参数传递给 VBA 函数会导致“类型不匹配”错误：IntelliSense 需要这个

> ID：12748897
> 
> 赞同：2
> 
> 时间：2012-10-05T14:58:11.357
> 
> 标签：vba, excel, activex, parameter-passing, type-mismatch

有一个用户窗体，其中包含多个第 3 方 ActiveX 网格控件（iGrid by 10Tec）的实例。我们有一个 sub 使用相同的语句初始化每个网格：

```
Sub SetupIgrid(ig as iGrid)
   ig.RowMode = True
   ig.MultiSelect = True
   ig.Appearance = igAppearanceFlat
   ig.Editable = False
End Sub 
```

我们不能将 iGrid 实例传递给这个子 - Excel VBA 总是在这样的调用中显示“类型不匹配”错误：

```
SetupIgrid igAuds 
```

没有其他帮助。例如，我们可以像 Variant 或 Object 参数一样传递 iGrid，但是当我们尝试从中提取真正的 iGrid 类型时，我们会得到相同的类型不匹配：

```
Sub SetupIgrid(igObj as Object)
   Dim ig as iGrid
   Set ig = igObj 
```

即使我们使用 hack 将 Long 指针传递给我们使用 ObjPtr 获得的 iGrid，然后使用 API CopyMemory 将其转换回 iGrid 类型，MS Excel VBA 也无法访问 iGrid 成员。

此任务的关键是在 SetupIgrid 子中拥有真正的 iGrid 对象以使用 IntelliSense 功能。现在我们可以将它作为对象（变体）或其他东西，但是当我们按下点时，确定这不会给我们智能感知列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:16:31.460

这是因为控件不打算以这种方式传递到其主机之外。“幕后”传递的是包装器的早期绑定“扩展器”控件，它反过来会导致您看到的类型不匹配。

[Microsoft](http://support.microsoft.com/kb/190210)对这个问题进行了更全面的处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:49:29.397

除了我上面的评论，我刚刚测试了它并且它有效（即没有错误消息）

你必须声明`ig As Control`

[我从这里](http://www.10tec.com/FS/Products/iGrid.ActiveX.Demo.zip)下载了网格

```
Option Explicit

Private Sub CommandButton1_Click()
    SetupIgrid iGrid1
End Sub

Sub SetupIgrid(ig As Control)
   ig.RowMode = True
   ig.MultiSelect = True
   ig.Appearance = igAppearanceFlat
   ig.Editable = False
End Sub 
```

**截屏**

前

![在此处输入图像描述](../Images/cd2724bde459159ca49f4c8ab699cdee.png)

单击命令按钮后

![在此处输入图像描述](../Images/ff782ec7367efadd71ac10cefae31bff.png)

# android - greenDAO 40秒插入600条记录

> ID：12748899
> 
> 赞同：14
> 
> 时间：2012-10-05T14:58:16.070
> 
> 标签：android, greendao

我选择了 greenDAO，因为它的网站声明它是最快的 Android ORM 系统之一。令我失望的是，在三星 i9001 上插入 600 条记录需要 40 秒。我不确定我是否做错了什么。

您能否提出任何建议以减少执行这些操作所需的时间？

生成器代码：

```
private static void addNewsArticle(Schema schema) {
    Entity article = schema.addEntity("NewsArticle");
    article.addIdProperty().autoincrement();
    article.addStringProperty("title").notNull();
    article.addStringProperty("body").notNull();
    article.addStringProperty("shortDescription").notNull();
    article.addStringProperty("thumb");
    article.addDateProperty("date").notNull();
} 
```

插入

```
Date now = Calendar.getInstance().getTime();
for (int i = 0; i < 600; i++) {
    NewsArticle testArticle = new NewsArticle();
    testArticle.setTitle("title-text" + i);
    testArticle.setBody("body-text" + i);
    testArticle.setShortDescription("short-text" + i);
    testArticle.setDate(now);
    newsArticleDao.insert(testArticle);
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-07T14:08:14.500

正如我怀疑的那样，事情并没有在单个 sql 语句中执行。为了实现它，只需在 DAO 对象上使用 insertInTx。

这是上面的代码，稍作更改，使其在半秒内运行

```
NewsArticle[] newsArticles = new NewsArticle[600];
NewsArticle testArticle;
    for (int i = 0; i < 600; i++) {
         testArticle = new NewsArticle();
         testArticle.setTitle("title-text" + i);
         testArticle.setBody("body-text" + i);
         testArticle.setShortDescription("short-text" + i);
         testArticle.setDate(now);
         newsArticles[i] = testArticle;
    }
newsArticleDao.insertInTx(newsArticles); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T09:53:20.297

您还可以创建一个新的 Runnable 来执行`DaoSession.runInTx`函数内的所有插入运行

```
daoSession.runInTx(new Runnable {
    public void run(){
        Date now = Calendar.getInstance().getTime();
        for (int i = 0; i < 600; i++) {
             NewsArticle testArticle = new NewsArticle();
                     testArticle.setTitle("title-text" + i);
                     testArticle.setBody("body-text" + i);
                     tesArticle.setShortDescription("short-text" + i);
                     testArticle.setDate(now);
                     newsArticleDao.insert(testArticle);
        }
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T08:50:08.973

这里给出了一篇关于加速 Android 的 SQLITE 插入操作的优秀文章。试用这个，我可以在同步 39MB 数据库时将同步模块的速度从 1.2 小时大幅优化到 14 分钟。

[http://tech.vg.no/2011/04/04/speeding-up-sqlite-insert-operations/](http://tech.vg.no/2011/04/04/speeding-up-sqlite-insert-operations/)

如果您需要代码旋转网，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-28T12:11:31.813

我尝试了下面提到的并获得了最佳性能

```
 DevOpenHelper helper = new DaoMaster.DevOpenHelper(this, "db-name",
                null);
        SQLiteDatabase dbGreen= helper.getWritableDatabase();

        dbGreen.beginTransaction();

        //Perform your insertion here
        dbGreen.setTransactionSuccessful();
        dbGreen.endTransaction(); 
```

# jquery - 在jQuery中如何确定一个或多个div元素是否重叠并完全覆盖另一个div？

> ID：12748900
> 
> 赞同：3
> 
> 时间：2012-10-05T14:58:17.180
> 
> 标签：jquery, jquery-plugins, geometry, collision-detection, computational-geometry

如果我有一个 DIV 元素（图中的蓝色方块 B）绝对位于文档中并重叠在另一个 DIV（空白方块 A）上，那么我可以通过比较 x1,y1,x2,y2 区域来获得 B 是否完全覆盖 A B 与 A。

但是，如果一个或多个 B 方格与 A 重叠，如果 A 被完全覆盖，我怎么能得到呢？

我无法合并 B1 和 B2 区域，然后将其与 A 进行比较，因为某些区域可能仍然未被发现（如图中的红色区域）。

在 Flash 中有一些方法可以简化区域的计算，但我不知道如何在 jQuery 中进行。

![在此处输入图像描述](../Images/59c2cc521657ada07ac5cb1da67ab2b8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:15:57.623

我认为仅使用 jQuery 没有办法解决这个问题，但是您可以使用元素的 z-indexes 和相对于窗口的位置[http://api.jquery.com/position/](http://api.jquery.com/position/)

此外，我在 Javascript 中找到了一个可能对您有所帮助的解决方案：

[如何使用 JavaScript 检测元素重叠（重叠）？](https://stackoverflow.com/questions/5720837/how-to-detect-elements-overlapping-overlaying-using-javascript)

# ruby-on-rails - 将 CLI 工具添加到 Rails 应用程序？

> ID：12748906
> 
> 赞同：0
> 
> 时间：2012-10-05T14:58:35.523
> 
> 标签：ruby-on-rails

我正在构建一个 Rails 应用程序，我需要定期将新数据从外部源加载到数据库中。我想构建一些工具来执行此数据加载，但这是我想要手动运行的任务，最好是从命令行运行，而不是完全自动化它或有一个自动后台任务。而且我想使用模型对象来做到这一点，而不是直接将数据转储到适当的表中。

就 Rails 项目组织而言，最好的方法是什么？如果有人可以将我指向一个现有的 FOSS 应用程序，那将是完美的。在我的首选资源 Rails Guides 和 Railscasts.com 中都没有找到好的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:01:12.397

嗯，有关于[Rake 任务和其他命令行工具的 Rails 指南，还有关于](http://guides.rubyonrails.org/command_line.html)[自定义 rake 任务](http://railscasts.com/episodes/66-custom-rake-tasks)主题的 Railscast 。

# android - 如何使用DOM解析android中的xml字符串

> ID：12748910
> 
> 赞同：0
> 
> 时间：2012-10-05T14:58:52.387
> 
> 标签：android, xml, dom

我有一个从 web 服务调用获取 xml 响应的 Android 应用程序。我正在尝试使用 DOM 解析器解析 xml。我无法获取 StartDate 标记的值以及调用标记中的其他标记。我出错的任何想法。当我从 startDate 记录值时，它是空的。谢谢。

```
public class DomParser {

    private static final String TAG = DomParser.class.getSimpleName();
    DocumentBuilderFactory builderFactory;
    DocumentBuilder builder;
     Document document;

    public DomParser() {
        super();
        Log.e(TAG, "inside domparser constructor");
        builderFactory = DocumentBuilderFactory.newInstance();
        document = null;
        try {
            builder = builderFactory.newDocumentBuilder();
            Log.e(TAG, "built the dom factory");
        } catch (ParserConfigurationException e) {
            e.printStackTrace();  
        }
    }// end of constructor

    public void parseXmlString(String str){

        try {
            String s = str.replace("&lt;", "<");
            String t = s.replace("&gt;", ">");
            document = builder.parse( new InputSource(new StringReader(t))); 
            Log.e(TAG, "document = " + document);
            Log.e(TAG, "str = " + t);
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Log.e(TAG, "about to parse the rootElement");
        Element rootElement = document.getDocumentElement();
        NodeList nodes = rootElement.getChildNodes();

        Node rota = nodes.item(0);
        NodeList callList = rota.getChildNodes();

        for(int i = 0; i < callList.getLength(); i++){

            Node call = callList.item(i);
            NodeList callChildrenList = call.getChildNodes();

            for(int j = 0; j < callChildrenList.getLength(); j++){
                Node callChild = callChildrenList.item(j);
                if(callChild instanceof Element){
                    //a child element to process
                    Element child = (Element) callChild;
                    String startDate = child.getAttribute("StartDate"); 
                    Log.e(TAG, "element StartDate = " + startDate);
                  }
            }

        }

    }//end of parseXmlString

} 
```

.

```
 <?xml version="1.0" encoding="utf-8"?>
    10-05 15:49:17.680: E/DomParser(31495): <string xmlns="http://tempuri.org/"><Rota><Call><StartDate>2012-10-05T07:00:00+01:00</StartDate><EndDate>2012-10-05T07:25:00+01:00</EndDate><Duration>25</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Ebbs</ClientSurname><ClientForename>Vera</ClientForename><NeedName>Assist With Dressing, Laundry, Leave A Drink, Leave A Sandwich For Later, Make A Hot Drink, Prepare Breakfast, Shower, TIME BAND - Early Breakfast</NeedName><CarerAwayReason /><CallID>47418572-73a1-4dab-bc24-739c122b2b25</CallID><ActualTimeIn>07:30</ActualTimeIn><ActualTimeOut>07:49</ActualTimeOut></Call><Call><StartDate>2012-10-05T07:30:00+01:00</StartDate><EndDate>2012-10-05T08:00:00+01:00</EndDate><Duration>30</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Brown</ClientSurname><ClientForename>Margaret</ClientForename><NeedName>Careline, Diabetic Type 2, Empty Commode, KEY SAFE, Leave A Drink, Make A Hot Drink, Meds - Level II Administer, Prepare Snack, TIME BAND - Early Bed</NeedName><CarerAwayReason /><CallID>14f4f796-c7a6-4942-9d91-e9e7a40394f5</CallID><ActualTimeIn>08:00</ActualTimeIn><ActualTimeOut>08:21</ActualTimeOut></Call><Call><StartDate>2012-10-05T08:00:00+01:00</StartDate><EndDate>2012-10-05T08:40:00+01:00</EndDate><Duration>40</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Weaver</ClientSurname><ClientForename>Margaret</ClientForename><NeedName>KEY SAFE, Morning Call - Get Up And Breakfast, Personal Care</NeedName><CarerAwayReason /><CallID>2a7e6c70-ee2c-4657-a313-a18b87a766ed</CallID><ActualTimeIn>08:35</ActualTimeIn><ActualTimeOut>09:13</ActualTimeOut></Call><Call><StartDate>2012-10-05T09:00:00+01:00</StartDate><EndDate>2012-10-05T09:20:00+01:00</EndDate><Duration>20</Duration><CallStatusID>3</CallStatusID><CallStatusName>NCR</CallStatusName><ClientSurname>Howarth</ClientSurname><ClientForename>Edith</ClientForename><NeedName>Change Incontinence Pads, KEY SAFE, Make Bed / Change As Neccessary, Meds - Level II Administer, Personal Care, Prepare Breakfast, TIME BAND - Late Breakfast</NeedName><CarerAwayReason /><CallID>383c9be6-4cbe-459a-92ed-5dc309a0bffb</CallID></Call><Call><StartDate>2012-10-05T09:00:00+01:00</StartDate><EndDate>2012-10-05T09:30:00+01:00</EndDate><Duration>30</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Kastik</ClientSurname><ClientForename>Lydia</ClientForename><NeedName>Keys Needed, Leave A Drink, Leave A Sandwich For Later, Make A Hot Drink, Make Bed / Change As Neccessary, Medication Prompt, Meds - Level II Administer, Personal Care, TIME BAND - Early Breakfast</NeedName><CarerAwayReason /><CallID>f4cc1f96-ef65-4231-9e03-0b8263b04d27</CallID><ActualTimeIn>09:28</ActualTimeIn><ActualTimeOut>09:57</ActualTimeOut></Call><Call><StartDate>2012-10-05T10:30:00+01:00</StartDate><EndDate>2012-10-05T11:00:00+01:00</EndDate><Duration>30</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Terett</ClientSurname><ClientForename>Mamie</ClientForename><NeedName>Assist With Dressing, Meds - Self Medicating, Morning Call, Personal Care, Strip Wash, TIME BAND - Late Breakfast</NeedName><CarerAwayReason /><CallID>03f52182-b9ff-4fa9-9b71-1a20b8bbeeaa</CallID><ActualTimeIn>10:10</ActualTimeIn><ActualTimeOut>10:57</ActualTimeOut></Call><Call><StartDate>2012-10-05T12:00:00+01:00</StartDate><EndDate>2012-10-05T12:15:00+01:00</EndDate><Duration>15</Duration><CallStatusID>1</CallStatusID><CallStatusName>Completed</CallStatusName><ClientSurname>Garland</ClientSurname><ClientForename>Mavis</ClientForename><NeedName>Empty Catheter Bag, Medication Prompt, Meds - Level II Administer, TIME BAND - Early Lunch, Toiletting / Commode</NeedName><CarerAwayReason /><CallID>802d8adf-3a80-40bd-be91-f29db7c1291e</CallID><ActualTimeIn>11:16</ActualTimeIn><ActualTimeOut>11:38</ActualTimeOut></Call><Call><StartDate>2012-10-05T12:30:00+01:00</StartD 
```

[更新]

```
Element rootElement = document.getDocumentElement();
        NodeList nodes = rootElement.getChildNodes();

        Node rota = nodes.item(0);
        NodeList callList = rota.getChildNodes();

        for(int i = 0; i < callList.getLength(); i++){

            Node call = callList.item(i);
            NodeList callChildrenList = call.getChildNodes();

            for(int j = 0; j < callChildrenList.getLength(); j++){
                Node callChild = callChildrenList.item(j);

                Log.e(TAG, "callChild name = " + callChild.getNodeName());

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:16:49.633

基于您的新示例代码的类似内容

```
// HERE LOOP TO FIND THE NODE LIKE YOU HAVE DONE IN YOUR EXAMPLE
// WHERE YOU HAVE callChild.getNodeName() AND LOOK FOR THE ONE THAT IS "StartDate"
// ASSUMING startDateNode HERE IS THE NODE YOU WANT

    // GET THE CHILD NODES AND LOOK FOR THE TEXT NODE  
    NodeList nList = startDateNode.getChildNodes();
    for (int i=0; i < nList.getLength(); i++) {
       Node tmpNode = nList.item(i);
       if (tmpNode.getNodeType() == Node.TEXT_NODE) {
          String dateStr = ((CharacterData)tmpNode).getData();
           // NOW YOU HAVE THE CHARACTER DATA
          // DO SOMETHING WITH THE VALUE
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:15:44.363

[检查here](http://typicaljava.blogspot.in/2012/06/dom-parsing-using-xml.html)以获得我在这样的代码之一中实现的正确想法。

# iphone - 按下后退按钮时执行操作

> ID：12748911
> 
> 赞同：1
> 
> 时间：2012-10-05T14:59:10.693
> 
> 标签：iphone, objective-c, ios, xcode

在里面`navigationController`，当我在一个`ChildViewController`和当用户点击后退按钮时。我很想`parentViewController`在我离开之前发送一些数据。

除了使用之外，还有什么简单的原因吗？

```
-(void)viewWillDisappear; 
```

首先，因为它`ChildViewController`也有自己的孩子，当它被推送时，`viewWillDisappear`也会被调用。

其次，当我用户点击主页按钮时。它被调用了。（我猜）

请问，有什么合理和适当的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:03:12.460

这是一个很好的简单解决方案，它解决了在显示 modalViewControllers 或推送更多 viewControllers 时调用 viewWillDisappear 的问题。例如，检测我们实际上从堆栈中取出的情况。

```
-(void)viewWillDisappear:(BOOL)animated {
  NSUInteger ind = [[self.navigationController viewControllers] indexOfObject:self];
  if (ind == NSNotFound) {
      // do something, we're coming off the stack.
  }
} 
```

这样做的好处是您不需要子类化 UINavigationController。

资料来源： http: [//objectivesea.tumblr.com/post/21705735018/poppingoffthestack](http://objectivesea.tumblr.com/post/21705735018/poppingoffthestack)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:03:12.257

我会使用[UINavigationControllerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UINavigationControllerDelegate)解决这个问题。

在这种情况下，您可以使用它来跟踪您的控制器，并且您可以实现`navigationController:willShowViewController:animated:`在控制器之间传输您需要的数据。这比尝试挂接到`viewWillDisappear`通知要干净得多，因为您可以在该委托中隔离数据传输逻辑，而不是在每个控制器中都有它的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T15:05:06.200

您可以通过以下任何方式执行此操作：

1.  当第二个控制器离开时发送通知并让父级监听它。

2.  创建一个委托协议，让第二个控制器直接引用父方法。

3.  使用父母的`viewWillAppear:`并检查`isMovingToParentViewController`属性是否只是重新出现。

并应用最适合您的价值传递条件和价值可用性的方法。

# visual-studio-2010 - 启动VS2010时目标抛出异常

> ID：12748912
> 
> 赞同：0
> 
> 时间：2012-10-05T14:59:23.137
> 
> 标签：visual-studio-2010, excel

我正在尝试阅读 Excel 2003 XLS 文档，当我使用 JET 4 驱动程序时，阅读合并单元格似乎存在问题：数据被删除。

所以，我尝试了 2007 年的 ACE 驱动程序：

XLS [http://www.microsoft.com/en-us/download/details.aspx?id=23734](http://www.microsoft.com/en-us/download/details.aspx?id=23734)

它读取 XLS 很好，但现在我遇到了 VS 2010 的问题

![在此处输入图像描述](../Images/8913bbc041ecc6cd3e1a146fb246d657.png)

当我卸载它时，我的 VS2010 似乎又可以工作了。当我重新安装它时，我下次重新启动时再次收到错误。

但是，在我看来，该错误不太可能是由该驱动程序引起的，我想知道这是否真的只是巧合，而真正的问题是其他问题。

两者有关系吗？如何解决此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:56:57.507

我正在研究这个问题，所有迹象都指向为 VS2010 安装/重新应用 SP1。

# google-drive-api - Google docs API v3：更新文档会将其从共享文件夹中删除

> ID：12748916
> 
> 赞同：3
> 
> 时间：2012-10-05T14:59:29.063
> 
> 标签：google-drive-api, google-docs-api

当我上传文档的新修订版（使用 odt 格式）时，它会从所有共享文件夹中删除。

我正在使用 OAuth 1 和 ruby​​ 客户端，但它也出现在 OAuth 游乐场（https://developers.google.com/oauthplayground/）

流量：

1.  （创建一个文本文档并将其放在共享文件夹中）

2.  获取文档条目：`GET /feeds/default/private/full/<docid>`.

    它应该有一个“共享”标签和一个指向#parent 中文件夹的链接

3.  获取文档的上传链接（链接@rel~=#resumable-edit-media）：

    `PUT https://docs.google.com/feeds/upload/create-session/default/private/full/document%3A<docid>`

    由于我没有更改任何文档元数据，因此此请求的正文为空

4.  将文档正文上传到`response.location`

5.  生成的文档不在共享文件夹中，没有`shared`标签或`#parent`链接。

这是设计使然吗？任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:24:59.507

我使用 Java API 注意到了这一点，直到几天前才发生。它看起来像一个回归，但由于文档列表 api 已被弃用，我担心它可能不会被修复:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:47:17.493

这可能是客户端库向您的请求添加一些字段或重置所有您未指定的字段的问题。

我建议升级到 Drive API 并使用参考指南中的代码来更新现有文件并创建新版本：

[https://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:00:20.047

我相信您在第 3 步中的 PUT 应该是 POST。不确定这是否重要。

# javascript - window.requestFileSystem() 函数的简单示例

> ID：12748920
> 
> 赞同：5
> 
> 时间：2012-10-05T14:59:52.023
> 
> 标签：javascript, jquery, google-chrome, google-chrome-devtools

我有下一个问题：我尝试`window.requestFileSystem()`在 Chrome 中使用函数，但失败了。寻找我的步骤：

1）我在 Chrome 中添加了“允许从文件访问文件”标志（见下面的 img）：![在此处输入图像描述](../Images/efbc98beb8f0450375b2208613ef8dde.png)

2）我重新启动了系统。

3）然后我运行带有“允许文件访问文件”标志的 Chrome。

4）毕竟我尝试启动这个示例代码：

```
function onInitFs(fs) {
  console.log('Opened file system: ' + fs.name);
}

    function errorHandler(e)
{
    console.log("Error");
}    
    window.requestFileSystem(window.TEMPORARY, 5*1024*1024 /*5MB*/, onInitFs, errorHandler); 
```

但它失败了： ![在此处输入图像描述](../Images/d9b94dfe3e9d99819d0aedad84747757.png)

我的行为有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T16:47:44.340

那是因为这个功能目前只有前缀可用，即`window.webkitRequestFileSystem`

你可能会觉得这个教程很有趣：[http ://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-21T07:50:34.673

这段代码在 chrome 中对我有用。我实际上将它用于phonegap，但我首先在笔记本上的chrome上对其进行了测试，浏览器顶部出现了一个黄色条，要求我允许该网络应用程序永久存储在我的本地驱动器上。

```
 navigator.webkitPersistentStorage.requestQuota(1024*1024, 
        function(grantedBytes) {
            window.requestFileSystem(window.PERSISTENT, grantedBytes, onInitFs, errorHandler);
        }, 
        function(errorCode) {
            alert("Storage not granted.");
        }
    ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-30T14:16:42.770

使用以下命令从命令行打开 chrome

```
chrome --allow-file-access-from-files 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-12-03T15:19:06.580

你应该改变

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem; 
```

至

```
window.RequestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem; 
```

（R 应该大写。）

# java - 应用程序内 Java 命令行

> ID：12748921
> 
> 赞同：3
> 
> 时间：2012-10-05T14:59:51.620
> 
> 标签：java, bash, shell, command-line, lua

我一直在试图弄清楚如何在 Java 中使用已知的库（如 jBASH 和 luaj）创建一种类似于[ComputerCraft 的](http://www.minecraftforum.net/topic/892282-132-computercraft-143-now-with-printed-books/)CraftOS 界面的命令行，但似乎我遇到的任何东西都不再维护或不再维护功能太好了。不幸的是，dan200 将他的源代码锁起来，所以我什至看不到他是如何做到的......

这是否意味着我最终可能不得不创建自己的 BASH-y shell 和/或我自己的 LUA-y 脚本方法，或者现在维护的东西至少在某种程度上是可用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:00:23.087

[BeanShell 是一个小型、免费、可嵌入的 Java 源解释器，具有对象脚本语言功能，用 Java 编写。BeanShell 动态执行标准 Java 语法，并使用常见的脚本便利性对其进行扩展，例如松散类型、命令和方法闭包，如 Perl 和 JavaScript 中的那些。](http://www.beanshell.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:15:04.567

只是用一些代码跟进我的评论；

```
Process p = Runtime.getRuntime().exec("/bin/bash");
InputStream stdout = p.getInputStream();
InputStream stderr = p.getErrorStream();
OutputStream stdin = p.getOutputStream(); 
```

您可能会将它们分别包装在`BufferedReader`和`BufferedWriter`中，以便您可以将它们用作字符流，从而允许您执行诸如读取和写入文本行之类的操作。例如;

```
BufferedReader stdoutReader = new BufferedReader(new InputStreamReader(stdout)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:16:46.437

> [...] 已知库，如 jBASH 和 luaj，但似乎我遇到的任何东西要么不再维护，要么功能不太好。

Luaj 在 Sourceforge 上获得高度评价；上次更新是一年前；从那时起缺乏更新可能只是意味着它并不真正*需要*更新。Lua 是一种非常简单的语言。

即使您发现 luaj 不是 100% 适合您，我想修改它也会比“必须创建我自己的 BASH-y shell 和/或我自己的 LUA-y 脚本方法”容易得多。（后者可能也不会给出 100% 完美的结果，除非您已经有实现脚本语言的经验。）

# javascript - Javascript：暂停程序流程，直到单击按钮

> ID：12748922
> 
> 赞同：1
> 
> 时间：2012-10-05T14:59:55.587
> 
> 标签：javascript

各位下午好。。

我正在尝试在 Javascript 中创建一个函数，该函数会生成一个屏幕对话框，类似于 VB/VBA 中的 msgbox 函数。到目前为止，我已经设法在 Javascript 中编写 msgbox 函数，以便在调用它时动态地在屏幕上创建一个对话框。

它的工作原理是这样的：-

```
if (msgbox("Do you want to continue", YesNo) == Yes) {
      //Do something here
} 
```

我想知道的是-有什么方法可以暂停/暂停代码中的流程，直到按下动态生成的对话框中的一个按钮？在用户单击我的对话框中的“是”按钮之前，我不希望“在这里做某事”位或任何其他以下代码运行。

（注意：YesNo 和 Yes，在上面的示例中是常量。到目前为止，对话框工作得很好，我只需要弄清楚如何在按下按钮之前停止流动，而不会使事情变得过于复杂）。

垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:02:38.760

如果您使用确认框，这应该对您有用 - 它会触发带有 ok/cancel 选项的提示：

```
 if (confirm("Are you sure you wish to continue?")){
//executed when OK clicked
}
else{
//executed when CANCEL clicked
} 
```

注意工作流在函数中暂停，直到给出答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T06:21:00.300

抱歉，我来晚了，但我会执行以下操作（假设只有两种可能的选择，即是或否，并且还假设正在使用模态类型确认框而不是花园品种警报/确认框）：

将此变量存储表单添加到您的 html（表单隐藏输入的注意值未列出，因此当前为空值）

```
<form id="UserSelection" style="display:none"><input type="hidden" name="yes_or_no">    
</form> 
```

然后在模态确认框中添加两个按钮，其中按钮“yes”触发“yes”值，按钮“no”触发表单隐藏输入的“no”值：

```
<div id="ModalConfirm">
<button type="button" onclick="StoredSelectionVar('yes')">Yes</button>
<button type="button" onclick="StoredSelectionVar('no')">No</button>
</div> 
```

其中函数 StoredSelectionVar() 定义为：

```
StoredSelectionVar(type) {
    if (type === 'yes') {
        document.forms['UserSelection']['yes_or_no'].value = 'yes';
    } else {
        document.forms['UserSelection']['yes_or_no'].value = 'no';
    }
} 
```

然后按如下方式修改剩余的javascript：

```
function YesOrNo() {
var x = document.forms['UserSelection']['yes_or_no'].value;
if (!x) {
    window.setTimeout(YesOrNo, 1000);<!--Modify time as desired.....checks form 
    UserSelection to see if a value is present, which implies the user clicked either    
    the yes or no button for the hidden input, or no click if still a null value, in 
    which case the function is called again and the process repeated-->
} else {
    if (x === 'yes') {
        //Do This
    } else {
        //Do that
    }    
}

function yourFunction() {
    if (msgbox("Do you want to continue")) {
        YesOrNo();
    } else {
        //whatever
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:01:22.377

在 JS 中有`alert()`和`prompt()`用于这类事情。Alert 用于只需要确认的简单消息，prompt 可以返回一些输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:05:38.790

如果您使用的是 HTML 元素，您希望将`onclick`yes 按钮的属性设置为包含所需操作的函数，或者您可以`addEventListener`用于现代浏览器。

```
function doStuff () {
    // do stuff here
}

button.onclick = doStuff; 
```

您应该构建脚本的方式是有一些顶级代码是设置全局变量或顶级函数所必需的，并且在页面加载时执行您希望发生的任何其他事情。然后，您创建函数来对各种用户操作（单击/悬停/击键等）进行回调。没有真正的“暂停”，但您可以推迟函数，以便它们仅在响应用户输入时执行。

如果您想在以模式对话框的方式执行此操作时阻止其他用户操作，则必须通过某个对象的全局变量或属性设置状态，并在执行之前让所有回调检查该状态。这很容易变得复杂，并且可能是更喜欢使用简单`confirm`提示的原因。

# c# - 通过单元测试调用时，DataGridView 不接受 DataSource

> ID：12748924
> 
> 赞同：7
> 
> 时间：2012-10-05T14:59:59.907
> 
> 标签：c#, data-binding, .net-4.0, datagridview, datasource

该代码在通过 UI 调用时工作正常，但在通过单元测试调用时不起作用。我能够为简单的 Winform App 重现这个。

```
namespace WinFormApp
{
    public class Pair
    {
        public string Key { get; set; }
        public string Value { get; set; }
    }

    public class FormManager
    {
        List<Pair> _source = new List<Pair>()
        {
            new Pair() { Key="1", Value = "one" },
            new Pair() { Key = "2", Value = "two" }
        };

        public FormManager(DataGridView dgv)
        {
            dgv.DataSource = _source;
        }
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            FormManager manager = new FormManager(dataGridView1); // This works
        }
    }
} 
```

单元测试代码

```
namespace WinFormApp.Test
{
    [TestClass()]
    public class FormManagerTest
    {
        private DataGridView dataGridView1;

        [TestMethod()]
        public void FormManagerTestSource()
        {
            this.dataGridView1 = new System.Windows.Forms.DataGridView();

            FormManager target = new FormManager(dataGridView1);

            Assert.AreEqual(2, dataGridView1.Rows.Count); // This fails.
        }
    }
} 
```

以下代码由设计师生成

```
private void InitializeComponent()
{
    this.dataGridView1 = new System.Windows.Forms.DataGridView();
    ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
    this.SuspendLayout();
    // 
    // dataGridView1
    // 
    this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
    this.dataGridView1.Location = new System.Drawing.Point(20, 27);
    this.dataGridView1.Name = "dataGridView1";
    this.dataGridView1.Size = new System.Drawing.Size(240, 150);
    this.dataGridView1.TabIndex = 0;
    // 
    // Form1
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.ClientSize = new System.Drawing.Size(284, 262);
    this.Controls.Add(this.dataGridView1);
    this.Name = "Form1";
    this.Text = "Form1";
    ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
    this.ResumeLayout(false);

} 
```

我的猜测是我在单元测试代码路径中缺少对 dataGridView1 对象的某种初始化调用。但是在单元测试中使用设计器生成的代码并没有帮助。这与与对象关联的实际对象有关`Form`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T09:02:42.977

添加`dataGridView1.BindingContext = new BindingContext();`使这项工作。这个答案有帮助。 [对不在 Form.Controls 集合中的 DataGridView 控件进行数据绑定？](https://stackoverflow.com/questions/8340787/databinding-a-datagridview-control-which-is-not-in-form-controls-collection)

```
[TestMethod()]
public void FormManagerTestSource()
{
    this.dataGridView1 = new System.Windows.Forms.DataGridView();
    FormManager target = new FormManager(dataGridView1);
    Assert.AreEqual(0, dataGridView1.Rows.Count); // 0 initially.
    dataGridView1.BindingContext = new BindingContext(); // this makes it work.
    Assert.AreEqual(2, dataGridView1.Rows.Count); // 2 as expected.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:48:15.423

看起来您正在尝试实现集成测试而不是单元测试

我看不到您在哪里设置 dataGridView1 的数据源

在您的 WinFormApp 中，您将数据源设置为：

```
 List<Pair> _source = new List<Pair>()
    {
        new Pair() { Key="1", Value = "one" },
        new Pair() { Key = "2", Value = "two" }
    };

    public FormManager(DataGridView dgv)
    {
        dgv.DataSource = _source;
    } 
```

单元测试应该没有环境要求，你应该尽可能多地模拟，这样你的测试就集中在一个点上。看看：https://nuget.org/packages/Moq/4.0.10827

为每个组件或单元创建单独的测试

我看到您正在尝试验证行数

尝试：

```
 [TestClass()]
public class FormManagerTest
{

    [TestMethod()]
    public void FormManagerTestSource()
    {
        var dgv = new System.Windows.Forms.DataGridView();
        var _source = new List<Pair>()
    {
        new Pair() { Key="1", Value = "one" },
        new Pair() { Key = "2", Value = "two" }
    };
        Assert.AreEqual(2, _source.Count); 
        //If you want to test dgv row count
        dgv.DataSource = _source;
        Assert.AreEqual(2, dataGridView1.Rows.Count);

    }
} 
```

# ruby - ruby savon jruby 的问题

> ID：12748925
> 
> 赞同：1
> 
> 时间：2012-10-05T15:00:00.380
> 
> 标签：ruby, jruby, savon

我正在尝试使用 savon Gem，以便与 webServices 交互。所以我安装了它，似乎安装没问题：

```
gem list savon
*** LOCAL GEMS ***
savon (1.2.0) 
```

我可以使用简单的命令对其进行测试：

```
ruby -rubygems -e 'require "savon"' 
```

[（感谢这个提示http://wiki.mccune.org.uk/index.php/Backtrack](http://wiki.mccune.org.uk/index.php/Backtrack)我没有更多错误）

当我想使用需要 savon 的 .rb 脚本时会出现此问题：

```
jruby -S buby -i -B /pentest/web/burpsuite/burpsuite_v1.4.01.jar -r /home/fred/soapAtk2.rb 

/usr/lib/jruby//lib/ruby/site_ruby/shared/builtin/javasupport/core_ext/object.rb:75 warning: already initialized constant StartBurp
Your JRE appears to be OpenJDK. 
Burp has not been fully tested on this platform and you may experience problems.
Loading: "/home/fred/soapAtk2.rb"

/usr/lib/jruby//lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in **`require': no such file to load -- savon** (LoadError)
    from /usr/lib/jruby//lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from /home/fred/soapAtk2.rb:3
    from /home/fred/soapAtk2.rb:31:in `require'
    from /usr/lib/jruby//lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from /usr/lib/jruby/lib/ruby/gems/1.8/gems/buby-1.3.1-java/bin/buby:63
    from /usr/lib/jruby/lib/ruby/gems/1.8/gems/buby-1.3.1-java/bin/buby:63:in `each'
    from /usr/lib/jruby/lib/ruby/gems/1.8/gems/buby-1.3.1-java/bin/buby:63
    from /usr/lib/jruby/lib/ruby/gems/1.8/gems/buby-1.3.1-java/bin/buby:19:in `load'
    from /usr/lib/jruby/bin/buby:19 
```

似乎存在环境问题，但我不知道如何解决它：-/

```
ruby -r rubygems -e "p Gem.path"

["/root/.gem/ruby/1.9.2", "/usr/lib/ruby/gems/1.9.2"]

# gem content savon

/var/lib/gems/1.9.2/gems/savon-1.2.0/.gitignore

/var/lib/gems/1.9.2/gems/savon-1.2.0/.rspe
...
... 
```

其他信息

```
# ruby -v
ruby 1.9.2dev (2010-07-02) [x86_64-linux]
# gem -v
1.3.7 
```

有没有人遇到同样的问题（我运行 backtrack5 last release）

谢谢'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:59:43.700

看起来你有两个红宝石，系统一个（1.9.2dev）和jruby。当您运行`ruby`or`gem`时，它会选择系统 ruby​​，而`jruby -S buby`命令会选择 jruby。

如果你运行：

```
jruby -rubygems -e 'require "savon"' 
```

这很可能会失败。

要在 jruby 实例上安装 savon，请运行：

```
jruby -S gem install savon 
```

这应该可以解决问题。

# python - SQLAlchemy：检查表中是否已经存在对象

> ID：12748926
> 
> 赞同：15
> 
> 时间：2012-10-05T15:00:03.853
> 
> 标签：python, python-3.x, sqlalchemy

我有一个类`Item`是`id`主键并自动生成。现在我从其他一些外部源读取数据，创建一个`Item`对象，并且需要检查这个对象是否已经存在于我的`items`表中。我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-05-15T11:54:52.030

最有效的方法是使用[exists()](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.exists)

```
q = session.query(Item.id).filter(Item.email==email)
session.query(q.exists()).scalar()    # returns True or False 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-05T16:24:49.497

您可以查询具有相同属性的项目并检查计数是否大于零。

```
if session.query(Item.id).filter(Item.email==newItem.email,
                                 Item.type==newItem.type).count() > 0:
    // item exists 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T16:32:15.933

您可以尝试类似的方法：

```
from sqlalchemy import exc

try:
    session.add(item)
    session.commit()
except exc.IntegrityError:
    session.rollback()
    print 'This item fails one of the unique/foreign key checks!'
except:
    print 'There was another error'
    raise
else:
    print 'Everything is OK' 
```

这有一个问题，它在提交时起作用，然后回滚......

另一种选择，如果您可以单独检查属性，那么这可能有效：

```
session.query(Item).filter_by(x=item.x, y=item.y).count() == 0 
```

# powershell - 强制以管理员身份运行 PowerShell 脚本

> ID：12748928
> 
> 赞同：6
> 
> 时间：2012-10-05T15:00:06.337
> 
> 标签：powershell

我编写了一个 powershell 脚本来安装和启动一些服务。只有当脚本以管理员身份运行时，它才会起作用。有没有办法强制脚本拥有这些权限？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T05:29:01.547

如果您使用的是 PowerShell V2，您还可以执行以下操作：

```
Start-Process "$psHome\powershell.exe" -Verb Runas -ArgumentList '-command "Get-Service"' 
```

这将以管理员身份运行“Get-Service”，您可以将其替换为您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:36:27.807

你可以看看[这个问题](https://stackoverflow.com/questions/1566969/showing-the-uac-prompt-in-powershell-if-the-action-requires-elevation)的答案。它允许您强制某些东西作为另一个帐户运行。

# php - 如何为此制定规则？

> ID：12748929
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:00:07.513
> 
> 标签：php, .htaccess, mod-rewrite

```
http://mysite.com/staticcategory/page_name 
```

改成

```
http://mysite.com/category/page-name?post_type=question 
```

如何成为这个规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:42:06.903

在您的 .htaccess 文件中：

```
RewriteEngine on
RewriteRule ^/staticcategory/(.*)$ /category/$1?post_type=question [R] 
```

# mysql - 将 A 中的每条记录与 B 中的特定 B.id 连接，其中 B.id =？

> ID：12748931
> 
> 赞同：0
> 
> 时间：2012-10-05T15:00:15.700
> 
> 标签：mysql

我有两张桌子，A和B。

A的字段：id，name

```
-----------------
 ID |   NAME    |
-----------------
 1  |   name1   |
-----------------
 2  |   name2   |
-----------------
 3  |   name3   |
-----------------
 4  |   name4   |
-----------------
 5  |   name5   |
----------------- 
```

B的字段：bid，id

```
-----------------
 BID    |   ID  |
-----------------
 11     |   1   |
-----------------
 11     |   2   |
-----------------
 12     |   1   |
-----------------
 12     |   2   |
-----------------
 12     |   3   |
----------------- 
```

我想执行查询以显示 A 中的所有记录，左侧有 A.id、A.name 列。并从 B ON id **WHERE bid = '11'**加入第三列。

所以我会有这样的事情：

```
--------------------------------
 A.ID   |   A.NAME  |   B.BID
--------------------------------
 1      |   name1   |   11
--------------------------------
 2      |   name2   |   11
--------------------------------
 3      |   name3   |
--------------------------------
 4      |   name4   |
--------------------------------
 5      |   name5   |
-------------------------------- 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:02:06.293

你会想要使用一个`LEFT JOIN`

```
SELECT A.ID, A.NAME, B.BID
FROM A
LEFT JOIN B
   ON A.id = B.id
WHERE B.BID = yourValue -- use the WHERE clause for additional filtering 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cc935/1)

根据您的更新，您需要将过滤器从`WHERE`子句移动到`JOIN`：

```
SELECT A.ID, A.NAME, IFNULL(B.BID, '') BID
FROM A
LEFT JOIN B
   ON A.id = B.id
  and b.bid = 11 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/24bbf/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:02:28.737

列出所有值，无论`bid`是否具有以下值`left join`：

```
select a.id, a.name, b.bid
from a
left join b on b.id = a.id
where b.bid = 11 
```

使用`inner join`if`bid`具有特定值：

```
select a.id, a.name, b.bid
from a
inner join b on b.id = a.id
where b.bid = 11 
```

[连接的好解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

[SQLFiddle 示例](http://sqlfiddle.com/#!2/c9966/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:06:46.143

table_B 中是否有一列与 table_A 中的 a.id 包含相同的值？否则，您将无法将 table_b 连接到 table_a。你在这里需要的是

```
WHERE bid = ? 
```

应该是这样的

```
WHERE bid = a.bid 
```

或者

```
WHERE a.ID = b.AID 
```

# firefox - 从不是 main.js 的文件访问小部件实例？

> ID：12748936
> 
> 赞同：0
> 
> 时间：2012-10-05T15:00:50.260
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

`main.js`我的Firefox 插件中有一个文件，它需要一个在另一个文件中定义的类，然后添加一个工具栏项。

```
// lib/main.js

var widgets = require('widgets'),
    disabler = require('./disabler');

var toolbarOptions = {
  id: 'the-id',
  label: 'The Widget',
  contentURL: self.data.url('icon-16.png')
};

// Add the toolbar item to the browser. Because this is a CommonJS environment,
// this reference to the toolbar is locally scoped.
var toolbar = widgets.Widget(toolbarOptions); 
```

我想做的是`contentURL`从`disabler`文件中更改工具栏的。但是，我无权访问`toolbar`该文件中的变量。

我怎样才能访问`toolbar`from `disabler`？

顺便说一句，我使用的是 1.10 版的附加 SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:55:11.520

每个模块都在自己的上下文中运行。如果您希望另一个模块拥有该变量，那么您应该明确地将该变量提供给它。例如，在`main.js`：

```
var toolbar = widgets.Widget(...);
disabler.setToolbar(toolbar); 
```

并在`disabler.js`：

```
var toolbar = null;
exports.setToolbar = function(tb)
{
  toolbar = tb;
};

...

doSomething(toolbar); 
```

# ms-access - 调试 Access 表单

> ID：12748937
> 
> 赞同：2
> 
> 时间：2012-10-05T15:01:03.713
> 
> 标签：ms-access, ms-access-2007, vba

我有一个包含一堆我没有构建的表单的访问数据库。表单上的其中一个字段在数据输入期间弹出错误。我在设计模式下打开了表单并查看了事件。但是我没有看到任何生成该错误文本的事件。我在整个项目中搜索了该错误文本并且无法获得成功。错误还会从哪里冒泡。从错误的文本中我可以看出它是开发人员编写的，而不是 Microsoft 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:20:04.923

如果弹出窗口是 vanilla VBA`MsgBox`并且您的 Access 数据库是`.mdb`/`.accdb`格式（例如没有`.mde`/ `.accde`），那么您可以这样做：

只需等待消息框显示，然后按`Strg`+ `Pause`。

你会看到这个：
![调试](../Images/366ea8703dd68c2092966df798529b9e.png)

按“调试”，Access 会显示代码中触发`MsgBox`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:14:42.927

如果该表单域已绑定（意味着它的 Control Source 属性是表单记录源中的一个域），请检查包含该域的表的设计。

在表格设计中，可以为字段分配验证规则属性和验证文本属性。查看验证文本属性是否与神秘错误文本匹配。

请注意，还可以为表本身定义验证规则和验证文本。因此，除了检查字段属性外，还要检查表本身的属性表。

# c - 如何确定某个色度的每个像素的平面数和字节数？

> ID：12748938
> 
> 赞同：14
> 
> 时间：2012-10-05T15:01:05.093
> 
> 标签：c, video, vlc, libvlc

我正在使用 LibVLC 并希望在内存中渲染视频像素，这样我就可以拍摄帧的快照，而无需在窗口中绘制视频（默认情况下）。

如果我理解正确，这可以通过调用 libvlc_video_set_callbacks 和 libvlc_video_set_format_callbacks 来实现。在第一个函数中，我必须指定类型为 [libvlc_video_lock_cb](http://www.videolan.org/developers/vlc/doc/doxygen/html/group__libvlc__media__player.html#ga91aefa2d59b4587c1cd8bfd3012379a6)的回调，在其中我必须初始化三个平面中的一个，据我所知，这三个平面是绘制像素的缓冲区。

我的问题是每个像素使用的字节数以及必须初始化的平面数取决于视频色度。虽然我知道如何获得这个色度的四字母标识符，但我不知道如何获得它的这些特殊属性；如果没有这些信息，我不知道我必须分配的缓冲区大小，以及有多少个平面。

有谁知道如何做到这一点？还是我理解错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:05:50.927

正如您所指出的，每个像素的字节数和平面数取决于编解码器。因此，一种选择是在代码中硬编码当前选项（GREY、I240、RV16、RV15、RV24、RV32、YUY2、YUYV、UYVY、I41N、I422、I420、I411、I410、MJPG）的值。

有关详细的代码/格式信息，[请访问 http://www.fourcc.org/](http://www.fourcc.org/)。

您还可以查看 VLC 项目中的[vlc_fourcc.h](http://www.videolan.org/developers/vlc/doc/doxygen/html/vlc__fourcc_8h_source.html)和[fourcc.c](http://www.videolan.org/developers/vlc/doc/doxygen/html/fourcc_8c.html)。具体看功能[`vlc_fourcc_GetChromaDescription`](http://www.videolan.org/developers/vlc/doc/doxygen/html/fourcc_8c.html#a753d6eba485325454301692f47ef0f76)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:16:38.840

`setup`回调（`libvlc_video_set_format_callbacks()`类型的第二个参数`libvlc_video_format_cb`）允许您读取视频格式，并且可以选择更改视频格式。

如果此回调获得了它不理解的格式，它可以将其更改为它知道的格式。

# html - html5boilerplate 中的响应式徽标（图像替换）

> ID：12748939
> 
> 赞同：2
> 
> 时间：2012-10-05T15:01:08.450
> 
> 标签：html, responsive-design, html5boilerplate, image-replacement

我正在通过 initializr.com 使用响应版本的 html5 样板。我的网站使用自定义徽标，因此我将 .ir 类添加到 h1

```
.ir {
    background-color: transparent;
    border: 0;
    overflow: hidden;
    *text-indent: -9999px;
} 
```

像这样

```
<h1 class="title ir">h1.title</h1> 
```

[文件](https://github.com/h5bp/html5-boilerplate/blob/v4.0.0/doc/css.md#ir)说_

> 将 .ir 类添加到您应用图像替换的任何元素。用图像替换元素的内容时，请确保还设置特定的背景图像：url(pathtoimage.png);、宽度和高度，以便显示替换图像。

所以我在代码中添加了这些行

```
.ir {
background-image: url(http://i.imgur.com/yYnyJ.jpg);
background-size: 100% auto;
width:450px;
height:450px
} 
```

问题是特定的宽度和高度。我无法摆脱它们，但徽标不会以这种方式响应。想法？这是小提琴。[http://jsfiddle.net/qeW3e/](http://jsfiddle.net/qeW3e/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:34:41.403

我认为这是指在您定位的元素上设置宽度和高度，而不是在 .ir css 类本身中。

实际的解决方案在网站上可能看起来更像这样。

HTML

```
<div class="header">
<div class="logo"><h1 class="title ir">h1.title</h1></div>
<div class="navigation"><p>navigation goes here</p></div>
</div> 
```

​CSS

```
 .ir {
    background-color: transparent;
    border: 0;
    overflow: hidden;
    text-indent: -9999px;

    background-image: url(http://i.imgur.com/yYnyJ.jpg);
    background-size: 100% auto;
    background-repeat: no-repeat;
    width: 100%;
    height: 100%;
}
.header {height:300px;}
.logo {width: 30%; float:left; height: 100%;}
.logo h1 {display:block;}
.navigation {float:left; width: 65%;} 
```

这是小提琴的例子

[http://jsfiddle.net/qeW3e/1/](http://jsfiddle.net/qeW3e/1/)

# sphinx - 在 Windows 上运行 searchd 时出现 Sphinx 错误（无法解析配置文件）

> ID：12748940
> 
> 赞同：0
> 
> 时间：2012-10-05T15:01:08.613
> 
> 标签：sphinx, config

我正在为我的数据库安装 sphinx。我正在按照这篇文章[http://www.infotales.com/installing-sphinx-searc-on-windows/](http://www.infotales.com/installing-sphinx-searc-on-windows/)和这个视频[http://www.youtube.com/watch?v=8mDDEStuBes](http://www.youtube.com/watch?v=8mDDEStuBes)的说明进行操作，

这看起来简单明了。但我一直遇到问题。我正在使用最小的配置文件，并且已经设置了所有内容。当我运行 searchd --config c:/sphinx/bin/sphinx.conf 时，我得到一个错误“无法解析配置文件”，当我在 cmd 中运行 searchd 时，我得到“没有可读的配置文件”。我不知道该怎么做，我一直在寻找类似的问题，但通常人们会遇到“无法解析配置文件错误”以及其他问题。我的没有任何额外的错误。

有任何想法吗？谢谢。

这是我的最小配置文件（称为 sphinx.conf ）：

```
source users_info
{
    type                            = mysql

    sql_host                        = localhost
    sql_user                        = root
    sql_pass                        = root123
    sql_db                          = users
    sql_port                        = 3306                  

    sql_query                       = \
            SELECT \
                id, fullname,username                     
            FROM \
                    users_info;

    sql_query_info          = SELECT * FROM users WHERE id=$id
}

index users_info
{
    source          = users_info
path            = C:/sphinx/data/users_info
docinfo         = extern
charset_type        = utf-8
}

indexer
{
mem_limit       = 32M
}

searchd
{
# listen            = 9312
listen          = 9306:mysql41
log         = C:/sphinx/log/searchd.log
query_log       = C:/sphinx/log/query.log
read_timeout        = 5
max_children        = 30
pid_file        = C:/sphinx/log/searchd.pid
max_matches     = 1000
seamless_rotate     = 1
preopen_indexes     = 1
unlink_old      = 1
workers         = threads # for RT to work
binlog_path     = C:/sphinx/data

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:22:48.913

在 mysql 字段声明后添加反斜杠。

```
id, fullname,username 
```

至

```
id, fullname,username  \ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T07:14:09.647

**检查 sphinx 服务安装。**

将完整路径写入您的 sphinx 配置。例如：

**- 无效的**

```
C:\Sphinx\bin\searchd --install --config mysphinx.conf --servicename MySphinxSearch 
```

**+ 有效**

```
C:\Sphinx\bin\searchd --install --config D:\Projects\mysite\mysphinx.conf --servicename MySphinxSearch 
```

# c# - 如何将枚举保存到 ApplicationData.Current.LocalSettings

> ID：12748944
> 
> 赞同：5
> 
> 时间：2012-10-05T15:01:16.693
> 
> 标签：c#, windows-8, windows-runtime

事实证明，当您尝试存储枚举值时，WinRT 保存设置的能力会引发异常。MSDN 在[“使用 Windows 运行时访问应用程序数据”](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464917.aspx)页面上说，仅支持[“运行时数据类型”](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br205768.aspx)。

那么，如何保存枚举？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:01:16.693

这是一个非常奇怪的行为。但是很容易解决。

首先，您需要某种类型的解析例程，如下所示：

```
T ParseEnum<T>(object value)
{
    if (value == null)
        return default(T);
    return (T)Enum.Parse(typeof(T), value.ToString());
} 
```

注意：ENUM 的默认值始终是它的 0 值成员。

然后你可以像这样与之交互：

```
var _Settings = ApplicationData.Current.LocalSettings.Values;

// write
_Settings["Color"] = MyColors.Red.ToString()

// read
return ParseEnum<MyColors>(_Settings["Color"]); 
```

基本上，我们只是将其转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T14:37:42.800

另一种实现该目标的方法是利用底层类型的枚举来序列化值

```
public void Write<T>(string key, T value)
{
    var settings = ApplicationData.Current.LocalSettings;

    if (typeof(T).GetTypeInfo().IsEnum)
    {
        settings.Values[key] = Convert.ChangeType(value, Enum.GetUnderlyingType(typeof(T)));
        return;
    }

    settings.Values[key] = value;
}

public bool TryRead<T>(string key, out T value)
{
    var settings = ApplicationData.Current.LocalSettings;

    object tmpValue;
    if (settings.Values.TryGetValue(key, out tmpValue))
    {
        if (tmpValue == null)
        {
            value = default(T);
            return true;
        }

        if (typeof(T).GetTypeInfo().IsEnum)
        {
            value = (T)Enum.ToObject(typeof(T), tmpValue);
            return true;
        }

        if (tmpValue is T)
        {
            value = (T) tmpValue;
            return true;
        }
    }

    value = default(T);
    return false;
} 
```

使用示例

```
// write
Write("Color", MyColors);

// read
MyColor value;
TryRead<MyColor>("Color", out value) 
```

# javascript - currentSrc 在 jquery 插件中不起作用

> ID：12748950
> 
> 赞同：4
> 
> 时间：2012-10-05T15:01:46.527
> 
> 标签：javascript, jquery, html5-video

“currentSrc”是我必须在具有多个源（*.mp3、*.ogg 等）的 html5 视频中切换源 src 的唯一选项

如果我在 Jquery 中使用，“currentSrc”会抛出“undefined”。但它工作正常，如果我在 html 页面中调用它。

详细：我的视频来源：

```
<video width="630" height="354" id="video1" class="video1" poster="asserts/poster.png" controls="controls" data-name="demo video" data-uid="57fb2708">
        <source src="http://static.clipcanvas.com/sample/clipcanvas_14348_H264_320x180.mp4" data-quality="sd" />
        <source src="asserts/samllfile.mp4" data-quality="hd" />
        <source src="http://static.clipcanvas.com/elephants-dream.webm" data-quality="hd" />
        <source src="http://video.webmfiles.org/big-buck-bunny_trailer.webm" data-quality="sd"/>
        <source src="http://video.webmfiles.org/elephants-dream.webm" data-quality="hd" />
</video> 
```

获取当前视频地址

html页面中的Javascript（工作正常）：

```
myVid=document.getElementById("video1");
    function getVid(){
        alert(myVid.currentSrc);
    }; 
```

Jquery 内的行（抛出“未定义”）：

```
alert($hdVideo.currentSrc); 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:03:20.197

因为 jQuery 对象没有 currentSrc 属性，所以它返回 undefined。

```
alert( $hdVideo.get(0).currentSrc );
alert( $hdVideo[0].currentSrc );
alert( $hdVideo.prop("currentSrc") );   //might be attr() instead of prop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:05:44.330

DOM 元素和 jQuery 包装的 DOM 元素没有相同的属性或方法。如果要从 jQuery 包装的 DOM 元素访问 DOM 元素的属性，则需要使用`get()`或索引器来访问底层 DOM 元素：

```
alert($hdVideo.get(0).currentSrc);
alert($hdVideo[0].currentSrc); 
```

# entity-framework - 实体框架连接字符串的底层是什么？

> ID：12748952
> 
> 赞同：1
> 
> 时间：2012-10-05T15:01:55.330
> 
> 标签：entity-framework

这是一个非常基本的问题。

我正在学习 EF 并看到以下连接字符串：

```
<add name="NorthwindEntities" connectionString="metadata=res://*/myEF_Northwind.csdl|res://*/myEF_Northwind.ssdl|res://*/myEF_Northwind.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=Northwind;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

问题是：

**res://***是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:05:11.823

**res**表示**资源**。[从 msdn 获取此链接](http://msdn.microsoft.com/en-us/library/cc716756.aspx)的峰值以获取完整的瘦身信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:10:09.200

了解 SSDL、CSDL 和 MSL 文件也很好。他们负责从模型生成数据库。

它不会提高您的编码技能，但知道总是很好:)

看看[这里](http://dmenin.wordpress.com/2012/07/07/entity-frameworkhow-does-model-first-generate-the-database/)

# android - 如何在不丢失数据的情况下卸载android apk？

> ID：12748953
> 
> 赞同：5
> 
> 时间：2012-10-05T15:01:57.690
> 
> 标签：android, backup, storage, apk

有没有办法在apk上使用adb卸载，但让数据持久化？我丢失了应用程序的原始密钥，现在我想更新它，但不会丢失以前的数据。所以我需要先卸载它以使用新密钥添加新的 apk。这可能吗？

我忘了提到我正在通过 .bat 文件执行命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:32:09.663

**编辑：应该指定，以下仅适用于 Android 4.0 及更高版本。**

只需启用`adb`访问权限，然后使用以下命令：

`adb backup -noapk -f /backup/myAppBackup.ab com.yourapp.packagename`

然后，您应该将一个文件存储在您的根目录（在 Windows 上，您的 C:\ 或等效目录）的一个名为 backup 的文件夹中。

一旦你有了这个文件，假设包名保持不变，你应该能够简单地使用命令

`adb restore /backup/myAppBackup.ab`

来恢复数据。

现在，我*不确定*这在您更改密钥后是否会起作用，但我相当确定它仅依赖于包名称，因此签名密钥无关紧要。更多信息[在这里](http://forum.xda-developers.com/showthread.php?t=1420351)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:22:18.853

批处理友好的版本。

```
My-make-clean.bat:
adb pull /data/data/com.blah.bla/file1 file1
adb pull /data/data/com.blah.bla/file2 file2
adb pull /data/data/com.blah.bla/file3 file3
...
adb uninstall com.blah.bla
adb install YourApkFile.apk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:12:55.173

如果您的数据是公开存储的，卸载后会保留，但如果您的数据是私有存储，您的数据将在您卸载应用程序时被删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T15:12:37.030

如果您的设备已植根，您可以访问`/data/<package_name>`包含应用程序数据，并且可以对其进行备份。

如果您的设备没有植根，则您没有其他方法可以保留您的数据。

# math - 计算球拍深处的 cos xn 步数

> ID：12748957
> 
> 赞同：1
> 
> 时间：2012-10-05T15:02:10.493
> 
> 标签：math, racket

我想知道我写的是否正确；这是一个学校项目，所以我想在上传之前确保它给出正确的输出。

计算 cos x = 1 - ((x^2)/(2!)) + ((x^4)/(4!)) - ((x^6)/(6!)) + 的数学算法。 ..

所以这是我的代码：

```
(define (calc-cos x n)
  (define (hulp ctr res prevPow prevFac switch)
    (let ((switchOp (if (eq? (modulo switch 2) 0) + -)))
      (if (> ctr (+ 2 n))
          res
          (let ((newPow (* prevPow x x))
                (newFac (* (- ctr 1) ctr prevFac)))
            (hulp (+ ctr 2) (switchOp res (/ newPow newFac)) newPow newFac (+ switch 1))))))
  (hulp 2 1 1 1 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:59:42.470

让我们更精确地定义我们在这里尝试计算的内容。我们有无限和：

```
1 - ((x^2)/(2!)) + ((x^4)/(4!)) - ((x^6)/(6!)) + ... 
```

意识到这里的“...”是“过程永远持续下去”的非正式表示法。这不是一个正式的符号：它要求读者思考模式是什么。让我们正式表达总和的条件。

令 T_n 为第 n 项：

```
T_n = (-1)^n * x^(2n)/(2n)! 
```

您是否接受这是部分和的第 n 项的正式表示？

如果是这样，我们可以用我们的编程语言来表达：

```
(define (t_n x n)
  (/ (* (expt -1 n) 
        (expt x (* 2 n)))
     (fact (* 2 n))))

(define (fact n)
  (if (= n 0)
      1
      (* n (fact (sub1 n))))) 
```

我不知道 t_n 计算的内容是否是您的函数计算的内容。我确实认为这里的 t_n 函数是数学函数的准确表示。

如果您接受 t_n 计算部分和的第 n 项，则：

```
(define (cos/approx x)
  (for/sum ([k (in-range 100)])
    (t_n x k))) 
```

作为余弦的近似值，您应该可以接受。

一旦我们从一个正确的 cos/approx 定义开始，我们就可以开始努力提高效率，通过逐步重写来做一些事情，比如保留累积的阶乘等，最终达到你的定义。我相信有一条路可以做到，尽管它可能不适合这个文本区域的边缘。:)

# ruby - 正则表达式排除文件模式

> ID：12748971
> 
> 赞同：1
> 
> 时间：2012-10-05T15:02:45.533
> 
> 标签：ruby, regex

我有以下正则表达式，我想忽略 sass 部分：

目前它看起来像这样：

```
 match /app\/stylesheets\/(?:.+\/)?[^_].+\.s[ca]ss/ do
    sass
  end 
```

我要解析的示例文件路径是：

```
/app/stylesheets/nonpartial.scss
/app/stylesheets/folder/anothernonpartial.scss 
```

我想忽略的部分示例是

```
/app/stylesheets/_partial.scss                   #this is ignored
/app/stylesheets/partials/_anotherpartial.scss   #this gets a match 
```

正则表达式没有拾取部分内容，任何人都可以提出更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:18:57.777

```
/app\/stylesheets(\/(\w+?))*\/(?!_)(\w+?)\.s[ca]ss/ 
```

此 RegEx 将匹配 /app/stylesheets 中任意数量的子目录中的文件，而文件名不得以下划线开头。

此 RegEx 使用[Look-Arounds](http://www.regular-expressions.info/lookaround.html)。

# javascript - Google App Engine 不会在 IE9 中设置 cookie

> ID：12748975
> 
> 赞同：0
> 
> 时间：2012-10-05T15:02:58.637
> 
> 标签：javascript, python, internet-explorer, google-app-engine, cookies

我正在使用 Google App Engine 为我高中的戏剧俱乐部建立一个网站，它在 Chrome、Firefox 等中运行良好。但是，（如你所料）它在 Internet Explorer 中不起作用。

当用户登录时，它会以以下形式设置一个 cookie '4|55b4e2aea49a225f1a8e436df051c678'，其中 4 是用户的 id，后跟一个散列版本。

我有一个自定义处理程序，我的所有类都继承它设置 cookie。

```
def set_cookie(self, name, value):
  val = self.make_secure_val(value)
  logging.debug(val)
  return self.response.headers.add_header("Set-Cookie", "%s=%s; Path='/'" % (name, val))

def make_secure_val(self, val):
  return '%s|%s' % (val, hmac.new(secret, val).hexdigest()) 
```

在它设置 cookie 之后，我有另一个输出 cookie 值的日志记录行。设置到 cookie 的值是正确的，但是，cookie 永远不会被设置。

我尝试更改所有 IE 的 cookie 设置以接受所有 cookie。但是，这并没有什么不同。我可以在 Javascript 中设置一个 cookie，它工作正常。但是，它也应该在 Python 中工作。我试过添加到期日期，但这也没有什么不同。

在我的研究中，我注意到很多人对带有 iframe 的 IE cookie 有问题，但是，这不适用于我。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:41:53.417

好吧，据我所知，所有浏览器都会收到 set-cookie 标头。

![要求检查](../Images/5c477b67f4dd62475581868284aa7613.png)

然后，当浏览器重定向到`http://hermantowndrama.appspot.com/`“*用户”* cookie时，不会发送到服务器，而是“测试”cookie

![重定向检查](../Images/1c7627171412af9993e1a482037903cc.png)

作为子域， cookie`http://hermantowndrama.appspot.com/`可能存在问题/错误，您可以尝试将其删除。`path="``user`

* * *

抱歉，图像并没有太大帮助，因为分辨率，无论如何它们只是为了说明浏览器接收标题但不发回用户 cookie。

# dojo - Dojo 图表图例没有颜色 1.6

> ID：12748976
> 
> 赞同：2
> 
> 时间：2012-10-05T15:02:59.360
> 
> 标签：dojo, dojox.charting

我正在尝试将图例与与图表中的颜色线相关的框颜色放置，但由于某种原因，框出现时带有十字，颜色未显示。

```
// Require the basic 2d chart resource: Chart2D dojo.require("dojox.charting.Chart2D"); // Require the theme of our choosing //"Claro", new in Dojo 1.6, will be used dojo.require('dojox.charting.widget.Chart2D'); dojo.require("dojox.charting.widget.Legend");
dojo.require("dojox.charting.action2d.Tooltip"); //dojo.require('dojox.charting.plot2d.Columns'); //dojo.require('dojox.charting.themes.PlotKit.blue'); dojo.require("dojox.charting.themes.Claro"); dojo.require('dojox.charting.DataSeries'); dojo.require('dojox.charting.StoreSeries');
// Define the data var chartData = [10000,9200,11811,12000,7662,13887,14200,12222,12000,10009,11288,12099]; var chartData2 = [100,200,1111,1200,7662,13287,14260,18222,14000,9009,10288,11099]; function trans1(store, item){ // let's create our object
var o = {
x: store.getValue(item, "first_online"),
y: store.getValue(item, "t"),
tooltip: store.getValue(item, "t"); //,color: store.getValue(item, "urgency") ? "red" : "green" }; // we can massage the object, if we want, and return it return o; }
// When the DOM is ready and resources are loaded... dojo.ready(function() { // Create the chart within it's "holding" node var chartA = new dojox.charting.Chart2D("chartNode"); // Set the theme chartA.setTheme(dojox.charting.themes.Claro); //chart.setTheme(dojox.charting.themes.PlotKit.blue);
// Add the only/default plot chartA.addPlot("default", { type: "Lines", markers: true }); // Add axes chartA.addAxis("x", {"title" : "Mês", min: 1, max: 12}); chartA.addAxis("y", { min: 1, max: 500, vertical: true, fixLower: "major", fixUpper: "major"
}); // Add the series of data //addSeries("My Month", new dojox.charting.DataSeries(mystore, {query:{}}, "MyMonth")). // var jsonStoreChart1 = new dojo.data.ItemFileReadStore({ url: "/docsismodem/getnewbymonths/year/
<?= d ate("Y", strtotime("-1 year")) ?> ", id: 'jsonStoreChart1' }); var jsonStoreChart2 = new dojo.data.ItemFileReadStore({ url: " / docsismodem / getnewbymonths / year /
  <?= d ate("Y") ?> ", id: 'jsonStoreChart2' }); var jsonStoreChartCuda = new dojo.data.ItemFileReadStore({ url: " / docsismodem / getnewbymonthsnetwork / year /
  <?= d ate("Y") ?> /network/10.1 ", id: 'jsonStoreChartCuda' }); var jsonStoreChartArris = new dojo.data.ItemFileReadStore({ url: " / docsismodem / getnewbymonthsnetwork / year /
  <?= d ate("Y") ?> /network/10.2 ", id: 'jsonStoreChartArris' }); var jsonStoreChartTera = new dojo.data.ItemFileReadStore({ url: " / docsismodem / getnewbymonthsnetwork / year /
  <?= d ate("Y") ?> /network/10.3 ", id: 'jsonStoreChartTera' }); chartA.addSeries("

<?= d ate("Y", strtotime("-1 year")) ?> ",new dojox.charting.DataSeries(jsonStoreChart1, {query: {first_online: '*'}} ,trans1)); chartA.addSeries("

<?= d ate("Y") ?> ",new dojox.charting.DataSeries(jsonStoreChart2, {query: {first_online: '*'}}, trans1)); chartA.addSeries("

<?= d ate("Y") ?> Cuda ",new dojox.charting.DataSeries(jsonStoreChartCuda, {query: {first_online: '*'}}, trans1)); chartA.addSeries(" <?= d ate("Y") ?> Terayon ",new dojox.charting.DataSeries(jsonStoreChartTera, {query: {first_online: '*'}}, trans1)); chartA.addSeries(" <?= d ate("Y") ?> Arris ",new dojox.charting.DataSeries(jsonStoreChartArris, {query: {first_online: '*'}}, trans1)); // Render the chart! chartA.render(); var legend1 = new dojox.charting.widget.Legend({ chart: chartA }, "
legend "); new dojox.charting.action2d.Tooltip(chartA);
                        });
```

```
<div style="float: left; background-color: #E0E4E7; border: 1px solid black; width:400px;">
  <!-- create the DOM node for the chart -->
  <p style="text-align: center;">Novos CM registrados por mês</p>
  <div id="chartNode" style="width:300px;height:150px; float: none;"></div>
  <div id="legend"></div>

</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-07T15:51:37.477

更改以下行：

```
var legend1 = new dojox.charting.widget.Legend({ chart: chartA }, "legend "); 
```

至

```
var legend1 = new dojox.charting.widget.Legend({ chart: chartA }, "legend"); 
```

# oracle - 在 Oracle SQL 中查找层次关系中每个项目的顶级

> ID：12748977
> 
> 赞同：2
> 
> 时间：2012-10-05T15:03:01.790
> 
> 标签：oracle, hierarchical-data

我正在尝试查询代表一些分层数据的（大）Oracle 9 表。父项有自己的 ID 作为父 ID。举个例子;

```
ID    PARENTID               
----- --------  
1     1
2     1
3     2
4     2
5     3
6     6
7     6
8     6
9     4
10    10 
```

我想要一个返回每个 ID 的查询，以及该 ID 的最终父级，所以继续我的示例

```
ID    UlitimateParent
----  ----
1     1
2     1
3     1
4     1
5     1
6     6
7     6
8     6
9     1
10    10 
```

我已经看到了一些使用 Connect By 的示例，但似乎无法使其正常工作。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:12:02.537

在 10g+ 中，您将使用以下[`CONNECT_BY_ROOT`](https://docs.oracle.com/database/122/SQLRF/Hierarchical-Query-Operators.htm#SQLRF51161)功能：

```
SQL> with data as (
  2     SELECT 1 id, 1 parent_id FROM DUAL
  3     UNION ALL SELECT 2 , 1  FROM DUAL
  4     UNION ALL SELECT 3 , 2  FROM DUAL
  5     UNION ALL SELECT 4 , 2  FROM DUAL
  6     UNION ALL SELECT 5 , 3  FROM DUAL
  7     UNION ALL SELECT 6 , 6  FROM DUAL
  8     UNION ALL SELECT 7 , 6  FROM DUAL
  9     UNION ALL SELECT 8 , 6  FROM DUAL
 10     UNION ALL SELECT 9 , 4  FROM DUAL
 11     UNION ALL SELECT 10, 10 FROM DUAL
 12  )
 13  SELECT id, connect_by_root(id) ultimate_parent_id
 14    FROM data
 15  START WITH id = parent_id
 16  CONNECT BY parent_id = PRIOR id AND id != PRIOR id  ;

ID  ULTIMATE_PARENT_ID
--- ------------------
  1                  1
  2                  1
  3                  1
  5                  1
  4                  1
  9                  1
  6                  6
  7                  6
  8                  6
 10                 10 
```

在 9i 中，您可以使用[`SYS_CONNECT_BY_PATH`](http://docs.oracle.com/cd/B10501_01/server.920/a96540/functions121a.htm#SQLRF06116)（带有适当的子字符串）：

```
SQL> with data as (
  2     SELECT 1 id, 1 parent_id FROM DUAL
  3     UNION ALL SELECT 2 , 1  FROM DUAL
  4     UNION ALL SELECT 3 , 2  FROM DUAL
  5     UNION ALL SELECT 4 , 2  FROM DUAL
  6     UNION ALL SELECT 5 , 3  FROM DUAL
  7     UNION ALL SELECT 6 , 6  FROM DUAL
  8     UNION ALL SELECT 7 , 6  FROM DUAL
  9     UNION ALL SELECT 8 , 6  FROM DUAL
 10     UNION ALL SELECT 9 , 4  FROM DUAL
 11     UNION ALL SELECT 10, 10 FROM DUAL
 12  )
 13  SELECT id, sys_connect_by_path(id, '->') path
 14    FROM data
 15  START WITH id = parent_id
 16  CONNECT BY parent_id = PRIOR id
 17         AND id != PRIOR id;

        ID PATH
---------- --------------------
         1 ->1
         2 ->1->2
         3 ->1->2->3
         5 ->1->2->3->5
         4 ->1->2->4
         9 ->1->2->4->9
         6 ->6
         7 ->6->7
         8 ->6->8
        10 ->10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:22:12.403

我刚学到这个，谢谢你的问题:)

你可以使用

```
replace(sys_connect_by_path(decode(level, 1, id), '~'), '~') 
```

替换 10g 之前的 connect_by_root 函数。

```
with data1 as (
   SELECT 1 id, 1 parent_id FROM DUAL
   UNION ALL SELECT 2 , 1  FROM DUAL
   UNION ALL SELECT 3 , 2  FROM DUAL
   UNION ALL SELECT 4 , 2  FROM DUAL
   UNION ALL SELECT 5 , 3  FROM DUAL
   UNION ALL SELECT 6 , 6  FROM DUAL
   UNION ALL SELECT 7 , 6  FROM DUAL
   UNION ALL SELECT 8 , 6  FROM DUAL
   UNION ALL SELECT 9 , 4  FROM DUAL
   UNION ALL SELECT 10, 10 FROM DUAL
) 
SELECT id, replace(sys_connect_by_path(decode(level,
                                               1, id), '~'), '~') 
            ultimate_parent_id
  FROM data1
  START WITH id = parent_id
  CONNECT BY parent_id = PRIOR id AND id != PRIOR id  ;

ID      PATH
--------------
1   1
2   1
3   1
5   1
4   1
9   1
6   6
7   6
8   6
10  10 
```

# javascript - MediaElement.js 音频无法在某些设备上播放

> ID：12748983
> 
> 赞同：2
> 
> 时间：2012-10-05T15:03:31.647
> 
> 标签：javascript, android, html5-audio, mediaelement.js

我收到报告称我们的 MediaElement.js 音频播放器无法在一部特定的 Android 手机上运行。 **编辑：**有些 mp3 文件有效，有些则无效。mp3 文件都是 Mono 128kbs CBR，没有 ID3 标签。

我们只有一个音频源，一个 mp3，具有所有默认选项。

html是：

```
<audio src ="/path/to/a/file.mp3" type='audio/mp3'> 
```

手机是运行 2.3.4 的 HTC Incredible 2，在默认浏览器中。相同的页面适用于我用于测试的 2.3.4 设备，以及适用于 2.3.3 的 android 模拟器（无 Flash）。

根据用户的说法，播放器加载正确，并且看起来正确，但是，无论音频文件的实际长度如何，长度都显示为 1:40:00。经常第二次单击播放将开始播放。

有人对从这里去哪里有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:51:26.030

音频/视频编解码器库的实现对于 Android 中的硬件供应商来说是独一无二的——并非所有设备都使用相同的库进行音频/视频解码，因为它们使用不同的硬件来实现这些目的。

因此，尤其是在旧版本的 Android 中，媒体播放不可靠。

我在维亚康姆工作了六年，处理移动视频和音频传输，这是我遇到过的最棘手的问题之一，因为这个问题没有公平的解决方案，特别是因为你不能强迫人们只使用 Flash（其中，面对现实吧，这是一个可怕的解决方案）。

我们花了很多时间与 Google 开发人员倡导者讨论这个问题——好处是他们为更高版本的操作系统改进了验收套件，这意味着 3.X 和 4.X 在媒体播放方面具有更好的公司间兼容性。

我最喜欢的错误是，如果您的 MP4 视频文件的音频和视频轨道未对齐（它们在不同的时间开始，符合规范），运行任何 2.X 系列的摩托罗拉手机将根本不播放音频.

所以我想，我的回答是你不能保证在这些设备上可靠播放，你应该检查音频属性以确保所有文件都是由具有相同属性的相同编解码器和编码器生成的。

另外我会检查一些是立体声的，一些是单声道的，哪些有 IDv3 标签，哪些没有，等等——编解码器真的很挑剔。

很遗憾，因为这些公司没有动力在他们的旧设备上升级操作系统，而且我们被困在移动社区中，拥有大量声称兼容的不兼容硬件，因此我们甚至无法测试功能，而是， ，不仅必须明确测试设备数据，还必须明确测试软件构建 ID。

# ios - 未使用复合谓词调用 NSFetchedResultsController 委托方法

> ID：12748986
> 
> 赞同：0
> 
> 时间：2012-10-05T15:03:38.710
> 
> 标签：ios, nspredicate, nsfetchedresultscontroller

> **可能重复：**
> [带有谓词的 NSFetchedResultsController 忽略从不同 NSManagedObjectContext 合并的更改](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different)

我正在使用 NSFetchedResultsController 来控制我正在使用的网格视图的更新。我正在设置一个复合谓词，其中有一个布尔属性，我正在检查 NO，然后还检查是否存在任何关系实体。

在后台线程中，我使用单独的 MOC 进行保存，这没有问题。仅将谓词设置为所选部分，我的委托方法被调用。如果我添加谓词的关系部分，我的委托永远不会被调用。

这是 NSFetchedResultsController 的限制吗？它不能检查子实体吗？

```
 NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES];
    NSFetchRequest *req = [NSFetchRequest fetchRequestWithEntityName:@"Tab"];
    //Problematic line here.
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(selected == NO) && (modules.@count > 0)"];
    [req setPredicate:pred];
    [req setSortDescriptors:@[sortDesc]];
    NSFetchedResultsController *fc = [[NSFetchedResultsController alloc] initWithFetchRequest:req managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    [fc setDelegate:self]; 
```

# android - 有什么方法可以知道动画何时在 FragmentTransactions 中完成

> ID：12748987
> 
> 赞同：2
> 
> 时间：2012-10-05T15:03:38.517
> 
> 标签：android, animation, android-fragments

```
FragmentTransaction t = getFragmentManager().beginTransaction() ;
            //left to right
            t.setCustomAnimations(R.anim.left_to_right, R.anim.left_to_right_out); 
```

我在 FragmentTransaction 中有一个动画。有什么方法可以知道动画何时完成或任何animationListener 类似物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:02:42.013

我从未使用过 Fragments，但我曾经遇到过类似的 scrollView 问题。我想知道卷轴什么时候结束。您可能会做的事情是实现自己的侦听器。您可以创建一个可运行对象（animationTask）并让该可运行对象检查是否满足某些条件以确定动画是否已经结束，如果没有，请继续调用可运行对象。

为此，您需要创建自己的 FragmentTransaction 类来扩展 FragmentTransaction 并声明一个接口（这将是您的侦听器）。

```
public abstract class M_FragmentTransaction extends FragmentTransaction {
private Runnable animationTask;
public interface OnAnimationFinish{
    void onAnimationStopped();
}

private OnAnimationFinish onAnimationFinishListener;

public M_FragmentTransaction() {
    super();
    animationTask = new Runnable() {

        public void run() {

            while(!SOMETHING_TO_DETERMINE_IF_HAS_STOPPED){//has stopped

                if(onAnimationFinishListener!=null){

                    onAnimationFinishListener.onAnimationStopped();
                }
            }
        }
    };
}

public void setOnAnimationFinish(OnAnimationFinish listener){
    onAnimationFinishListener = listener;
}

public void startAnimationStart(){

    animationTask.run();
} 
```

现在，在您发布的代码中，您必须考虑转换从 getFragmentManager().beginTransaction(); 返回的 FragmentTransaction；进入 M_FragmentTransaction 因为你不能做 child = parent。我不太确定这是否比它的价值更麻烦，但这种方法帮助我解决了我的问题。

希望这可以帮助！

# css - Opera 不支持粗体字重（我的 Opera 版本是 12.02）

> ID：12748989
> 
> 赞同：0
> 
> 时间：2012-10-05T15:03:41.513
> 
> 标签：css, opera, font-face

font-weight: IE、Opera、Safari、Chrome 不支持粗体属性。有没有办法在这里制作字体粗体格式我正在使用 TradeGothic 自定义字体，并且我在网站加载时安装了这种字体。

我编写了以下代码行：

```
<span style="font-family:TradeGothic; font-weight:bold; font-style:normal;">Surface or DIN rail mtg enclosed temperature controlle</span> 
```

请解决这个问题。谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:12:10.870

当然`font-weight`在 Opera 中是支持的。但是，如果您只包含常规字体而不包含粗体版本，则不能保证您会获得跨浏览器（以及更重要的跨操作系统！）结果。

另外 - 你确定，你的意思是`Trad Gothic`而不是`Trade Gothic`- 带有空格的字体也应该总是被引用：`"Trad(e) Gothic"`.

# ruby - ruby 将过去的日期字符串转换为另一种格式

> ID：12748990
> 
> 赞同：0
> 
> 时间：2012-10-05T15:03:41.420
> 
> 标签：ruby, datetime

我正在尝试解析以下日期字符串：

```
111005 
```

至

```
20111005 
```

我正在尝试使用 Date.parse，但它将其视为 0011 而不是 2011：

```
Date.parse("111005").strftime("%y%m%d") 
```

知道如何使用 DateTime 做到这一点吗？显然，我可以在一开始就连接 20，但我希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:12:50.600

你想要有世纪的年份吗？那是`%Y`选项：

```
 Date.parse("111005").strftime("%Y%m%d")
 # => "20111005" 
```

# c++ - 编译 c++ 文件时出错：未定义的符号

> ID：12748996
> 
> 赞同：0
> 
> 时间：2012-10-05T15:04:07.513
> 
> 标签：c++, linker, g++

我正在尝试编译别人的 C++ 代码。我自己对 C++ 的经验为 0。我在 MAC 上使用 g++ 来编译我收到的一个 .cpp 文件。当我这样做时，`g++ main.cpp`我得到一个未定义的符号错误。谷歌搜索时，答案似乎是关于文件之间的错误链接，但我不知道如何链接文件。我怎样才能让文件编译？我在下面粘贴了完整的代码。

```
Undefined symbols:
  "initializeFitness()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Grid::GetNeighbourhood(int, int, std::vector<Agent**, std::allocator<Agent**> >&)", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Grid::Grid()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Reaper::GetAgentToKill()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Cupid::GetRandomBreeder()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Reaper::Select()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Grid::~Grid()", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Breeder::Breed(Agent**, Agent**)", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Cupid::Select()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Cupid::GetEmptyCell()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Agent::GetType()", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Breeder::ProcessNeighbourhood(std::vector<Agent**, std::allocator<Agent**> > const&)", referenced from:
      runEvolution()     in ccZXBTDH.o
  "FateAgent::GetGenome(double*)", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Cupid::GetParents()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Agent::IncreaseAge()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Grid::GetAgent(int, int)", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "FateAgent::GetSelectedCount()", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Breeder::GetGenome(double*)", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Agent::GetFitness()", referenced from:
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
      runEvolution()     in ccZXBTDH.o
  "Agent::~Agent()", referenced from:
      runEvolution()     in ccZXBTDH.o
  "Grid::DoMovement()", referenced from:
      runEvolution()     in ccZXBTDH.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:11:24.923

我认为您正在尝试仅编译整个程序的一部分。试试`g++ *.cpp`
如果还是不行，可能是因为你的程序需要外部库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T15:13:29.057

g++ 无法找到一堆符号，而无需进一步了解您的情况 - 我猜您在链接之前没有编译所有源代码文件。

更多背景：

当您只调用 g++ 一个源文件参数时，它会编译文件，然后尝试将其链接到完整的可执行文件。

我的建议是使用 -c 标志编译每个源文件（-c 标志告诉编译器将文件编译为目标代码，但不将其链接到可执行文件中）。

```
g++ -c main.cpp
g++ -c file1.cpp
g++ -c file2.cpp 
```

上述命令将创建目标文件，其中 .cpp 替换为 .o。然后，您可以通过执行类似的操作将它们链接在一起

```
g++ main.o file1.o file2.o 
```

这将生成一个可执行的 a.out，您可以运行它。这应该可以帮助您解决缺少的符号链接器错误。

如果您要做比这更复杂的事情，我强烈建议您研究使用 Makefile 来构建代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T15:13:01.133

我只能在这里猜测。项目中有多少个文件？它有图书馆吗？

如果您有库，则需要使用 -l 开关链接它们

```
g++ -o output_binary_name source_file -lLibrary1 -lLibrary2 
```

或者很可能您在项目中有多个源文件，您需要枚举它们

```
g++ -o output_binary_name source_file1 source_file2 source_file2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T15:10:13.317

我不认为那是代码，我认为那是调试输出。

runEvolution() 使用尚未定义的函数。寻找这些的定义。

就像很多人建议的那样，您可能会丢失一些文件，gcc 显然会丢失您的代码中的某些内容。

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T15:13:36.957

**假设程序没有使用任何库**，您应该使用 switch 编译所有文件，`-c`然后将它们完全链接：

```
g++ -c main.cpp
g++ -c file1.cpp
..
g++ *.o 
```

或者您可以自动执行相同的操作：

```
g++ *.cpp 
```

# java - ClassNotFoundException Java 问题

> ID：12748997
> 
> 赞同：0
> 
> 时间：2012-10-05T15:04:12.213
> 
> 标签：java

我编写了 Test.java 来测试数据库连接。

我使用“javac Test.java”成功编译。

但是，我无法使用“java -cp ...”运行我的程序

```
>AssetMgmtDbTest me$ pwd
/Users/me/Workspace/tmp/AssetMgmtDbTest
>AssetMgmtDbTest me$ ls
Test.class  Test.java   classes12.jar   ojdbc6.jar
>AssetMgmtDbTest me$ java -cp ojdbc6.jar Test
Exception in thread "main" java.lang.NoClassDefFoundError: Test
Caused by: java.lang.ClassNotFoundException: Test
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

请指教。

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:09:13.540

将当前目录添加到您的类路径：

```
>AssetMgmtDbTest me$ java -cp ojdbc6.jar:. Test 
```

注意罐子后面的附加`:.`（冒号+点）。

如果你开始使用包，事情会变得更加复杂，因为目录结构很重要。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/12096016/java-cant-find-main-class/12096232#12096232)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T08:54:19.203

java xxx.java ：假定所有必需的类都在其类路径中或标准 java 库的一部分中。

如果您的类需要任何额外的 jar 或类，那么您必须在类路径中将其指定为 java -classpath .:xxx.jar 类名

如果引用的类是任何目录的一部分，则 java -classpath dir xxx

此外，如果将具有 main 方法的类放在某个包中，则使用 java -classpath dir pkg.xxx