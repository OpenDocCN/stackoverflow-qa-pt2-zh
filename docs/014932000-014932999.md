# StackOverflow 问答 14932000-14932999

# nanoc - Nanoc - 编译输出不同于 nanoc 视图

> ID：14932000
> 
> 赞同：1
> 
> 时间：2013-02-18T08:19:06.467
> 
> 标签：nanoc

如果您创建一个新`nanoc`站点，然后运行`nanoc view`，它运行良好。CSS、路径和资产得到了正确处理。但是，当我运行 a 时`nanoc compile,`，它的处理方式不同。我得到损坏的 CSS、损坏的路径等。

是什么导致了这个 - 我认为这是规则和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:32:12.463

编译只生成`/output`. 可以打开其中一个 html 文件，但正如文档所述，您的浏览器将无法找到 CSS 文件。

要么使用`nanoc view`正确加载 CSS 文件，要么使用本地 Web 服务器查看文件。（注意：`nanoc view`只不过是一个本地网络服务器）。

# silverlight - Windows Store 应用程序和 Windows Phone 中的 XAMl 版本语法？

> ID：14932001
> 
> 赞同：1
> 
> 时间：2013-02-18T08:19:10.913
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone-8, windows-store-apps

正如在 Windows Store 应用程序和 Windows Phone 应用程序中所知，我可以使用 XAML 编写我的视图，所以我有一个问题：

每种应用程序的 XAMl 是否都基于特定版本的 silverlight？或者它是 XAML 的独立版本。例如，对于不厌恶 SIlver Light 的 Windows 应用商店应用程序是否有 XAMl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:47:00.123

简短的回答：是的，您使用 XAML的方式与在 Silverlight 中使用它的方式*几乎*相同，适用于两个平台。

更长一点的答案：Windows Store 应用程序的 XAML 与 Windows Phone 有点不同。对于 Windows 应用商店应用，XAML 基本上是编译为非托管代码。对于 WP（7 和 8），它主要是版本的 Silverlight。3 有一些差异（例如，WP 中的反射支持要差得多）。有关标准 Silverlight 和 WP 版本之间差异的完整列表，请参见[此处](http://msdn.microsoft.com/en-us/library/ff426930%28VS.95%29.aspx)。

但最大的不同是 XAML for WP 仍然属于托管代码。这意味着 WP 和 W8 的 XAML 不是二进制兼容的。但好消息是他们共享了大部分控件。Microsoft 有几篇文章描述了在这两个平台之间重用代码的差异、相似之处和可能的方法，请查看[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714088%28v=vs.105%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735581%28v=vs.105%29.aspx)。

# android - 如何从 R.raw 文件夹中获取视频缩略图？

> ID：14932002
> 
> 赞同：0
> 
> 时间：2013-02-18T08:19:12.677
> 
> 标签：android, video, thumbnails

下面的代码无法获取位于`R.raw`文件夹中的视频的视频缩略图。

我想使用画廊来显示视频的缩略图。视频被放入`R.raw`文件夹（实际上我是Android新手，所以我真的不知道将这些视频放在哪里，所以我把它们放在`R.raw`文件夹中）。现在我想获取视频的缩略图。但是有人说缩略图只能从 SD 卡中获取。这是真的吗？接下来我应该怎么做？谢谢。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Gallery gallery = (Gallery) findViewById(R.id.gallery);
    final String[] videoFileList = new String[] { "R.raw.01", "R.raw.02" };

    BaseAdapter adapter = new BaseAdapter() {

        public int getCount() {
            return videoFileList.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView = new ImageView(Select.this);
            Bitmap bmThumbnail;
            bmThumbnail = ThumbnailUtils.createVideoThumbnail("android.resource://" + getPackageName() + "/"
                    + videoFileList[position], Thumbnails.MINI_KIND);
            System.out.println(videoFileList[position]);
            imageView.setImageBitmap(bmThumbnail);
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            TypedArray typedArray = obtainStyledAttributes(R.styleable.Gallery);
            imageView.setBackgroundResource(typedArray.getResourceId(
                    R.styleable.Gallery_android_galleryItemBackground, 0));
            return imageView;
        }
    };
    gallery.setAdapter(adapter);
    gallery.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent intent = new Intent(Select.this, Play.class);
            intent.putExtra("image", videoFileList[position]);

            startActivity(intent);
            Select.this.finish();
        }

        public void onNothingClick(AdapterView<?> parent) {
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-04T08:24:28.897

在 Android 5 上，`createVideoThumbnail()`总是`null`在请求资源中的视频缩略图时返回。这最终对我有用：

```
Uri videoURI = Uri.parse("android.resource://" + getActivity().getPackageName() + "/raw/animation");
MediaMetadataRetriever retriever = new MediaMetadataRetriever();              
retriever.setDataSource(getActivity().getApplicationContext(), videoURI);
Bitmap thumb = retriever.getFrameAtTime(10, MediaMetadataRetriever.OPTION_PREVIOUS_SYNC);
videoView.setBackground(new BitmapDrawable(getResources(), thumb)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:26:17.573

您是否看过 Class中的[createVideoThumbnail() ？](http://developer.android.com/reference/android/media/ThumbnailUtils.html#createVideoThumbnail%28java.lang.String,%20int%29)`ThumbnailUtils`

实际上，您的视频文件位于`resource/raw`目录中，因此您必须为其创建缩略图。

如果您的视频文件在**外部存储**中，那么 Android 媒体商店本身会为您创建。您可以通过[MediaStore.Video.Thumbnails](http://developer.android.com/reference/android/provider/MediaStore.Video.Thumbnails.html)类获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T09:32:56.493

您的应用程序文件夹中的视频`res/raw`不由 Android Media Content Provider 管理，因此您无法从中获取其缩略图。

或者，您可以尝试将它们作为普通文件保存在 SD 中，然后向媒体提供商索取缩略图或直接通过[ThumbnailUtils.createVideoThumbnail](http://developer.android.com/reference/android/media/ThumbnailUtils.html)类创建它（仅限 Android 2.2 或更高版本）

# css - 无法在所有移动浏览器上居中 - 普通浏览器效果极佳

> ID：14932003
> 
> 赞同：2
> 
> 时间：2013-02-18T08:19:16.403
> 
> 标签：css, html, mobile, browser

奇怪的是，我有一个奇怪的问题，即移动浏览器的 div 居中。就像我的标题所说：普通的电脑浏览器工作得很好 - nada problemo =D 但是这些移动设备让我的主要内容（在按钮部分下）粘在左边。我尝试了很多事情——也在 stackoverflow 上寻找解决方案——但到目前为止，给定的提示并没有帮助我……我能够集中注意力的最后一件事是使用 jQuery——但我不想再谈这个。

这里的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Website</title>
<link href="css/configcss.css" rel="stylesheet" type="text/css">
</head>
<body onLoad="MM_preloadImages('pictures/Layout/Button/homeo.png','pictures/Layout/Button/grafiko.png','pictures/Layout/Button/webo.png','pictures/Layout/Button/reklamo.png','pictures/Layout/Button/fotoo.png','pictures/Layout/Button/videoo.png','pictures/Layout/Button/muziko.png')">
<div id="headbackground">
    <div id="headcontent">
      <div id="language"> <a href="index.html"><img src="pictures/tr.png" width="40" height="24" alt="tr"></a>
      <br><br>
      <a href="de/"><img src="pictures/de.png" width="40" height="24" alt="de"></a> 
      <br><br>
      <a href="en/"><img src="pictures/en.png" width="40" height="24" alt="en"></a>  
      </div> 
</div>
  <div id="buttons">
    <div id="navimiddle"><a href="/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('home','','pictures/Layout/Button/homeo.png',1)"><img src="pictures/Layout/Button/homeo.png" alt="homebutton" width="190" height="50" id="home"></a><a href="tr/grafik/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('grafik','','pictures/Layout/Button/grafiko.png',1)"><img src="pictures/Layout/Button/grafik.png" alt="grafikbutton" width="141" height="50" id="grafik"></a><a href="tr/web/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('web','','pictures/Layout/Button/webo.png',1)"><img src="pictures/Layout/Button/web.png" alt="webbutton" width="101" height="50" id="web"></a><a href="tr/reklam/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('reklam','','pictures/Layout/Button/reklamo.png',1)"><img src="pictures/Layout/Button/reklam.png" alt="reklambutton" width="159" height="50" id="reklam"></a><a href="tr/foto/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('foto','','pictures/Layout/Button/fotoo.png',1)"><img src="pictures/Layout/Button/foto.png" alt="fotobutton" width="108" height="50" id="foto"></a><a href="tr/video/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('video','','pictures/Layout/Button/videoo.png',1)"><img src="pictures/Layout/Button/video.png" width="125" height="50" id="video" alt="videobutton"></a><a href="tr/muzik/" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('muzik','','pictures/Layout/Button/muziko.png',1)"><img src="pictures/Layout/Button/muzik.png" alt="muzikbutton" width="200" height="50" id="muzik"></a>
    </div>
  </div>
</div>
<div id="contentbody">
<div id="contentup">
  <div id="contentuplayout"><center>
    <iframe width="950" height="370" src="http://www.youtube.com/embed/E-dw03-s1vA?rel=0" frameborder="0" allowfullscreen></iframe>
  </center>
  </div>
</div>
<div class="contentdevider"></div>
<div id="contentmain">
<div id="mainrow1">
<span class="linkstyle2">    
<div class="smallarticel" >
  <div class="smallarticelpic"><a href="tr/grafik/"><span class="rollover"><img src="pictures/Grafik-Site/kurumsal-kimlik.png" width="270" height="150" alt="ambalaj">       </span></a>
  </div><hr>
  <strong><a href="tr/grafik/">GRAFiK TASARIM</a></strong>
  <hr>
  <p>Profesyonel ve Modern Grafik Tasar&#305;m</p>
  </div>  
  <div class="smallarticel2">
  <div class="smallarticelpic"><a href="tr/web/"><img src="pictures/Grafik-Site/webdesign.jpg" width="270" height="150" alt="ambalaj"></a>
  </div><hr>
  <strong><a href="tr/web/">WEB TASARIM</a></strong>
  <hr>
  <p>Profesyonel ve Modern Webtasar&#305;m
  </p>
</div>    
<div class="smallarticel">
  <div class="smallarticelpic"><a href="tr/foto/"><img src="pictures/fotograf-cekim.jpg" width="270" height="150" alt="ambalaj"></a>
  </div>
  <hr>
  <strong><a href="tr/foto/">FOTO&#286;RAF &Ccedil;EK&#304;M&#304;</a></strong>
  <hr>
  <p>Profesyonel St&uuml;dyo ve Outdoor &Ccedil;ekimleri</p>
</div>
</span>    
</div>
<div id="mainrow2">
<span class="linkstyle2">    
<div class="smallarticel">
  <div class="smallarticelpic"><a href="tr/reklam/"><img src="pictures/Reklam-Site/radio.jpg" width="270" height="150" alt="ambalaj"></a>
  </div><hr>
  <strong><a href="tr/reklam/">REKLAM AJANSI</a></strong>
  <hr>
  <p>Profesyonel Reklam Tasarim ve Jingle</p>
  </div>
  <div class="smallarticel2">
  <div class="smallarticelpic"><a href="tr/video/"><img src="pictures/video-prodüskiyon.jpg" width="270" height="150" alt="ambalaj"></a>
  </div><hr>
  <strong><a href="tr/video/">Video Prod&uuml;ksiyon</a></strong>
  <hr>
  <p>Profesyonel Video Prod&uuml;ksiyon ve Animasyon</p>
  </div>
  <div class="smallarticel">
  <div class="smallarticelpic"><a href="tr/muzik/"><img src="pictures/müzik-prodüksiyon.jpg" width="270" height="150" alt="ambalaj"></a>
  </div><hr>
  <strong><a href="tr/muzik/">M&uuml;zik Prod&uuml;ksiyon</a></strong>
  <hr>
  <p>&nbsp;Profesyonel M&uuml;zik Prod&uuml;ksiyon &nbsp; - Online Mastering ve Mixing -</p>
</div>
</span>
</div>
</div>  
<div class="placeholder"></div>    
</div>   
<div id="footer">
  <div id="footercontent">
    <span class="linkstyle1">
    <a href="tr/hakkimizda/">Hakk&#305;m&#305;zda</a> | <a href="tr/kariyer/">Kariyer</a> | <a href="tr/iletisim/">&#304;leti&#351;im</a> | <a href="tr/gizlilik/">Gizlilik</a></span>
    <div id="copyright">
    Can-Kat &copy; 2012
    </div>    
  </div>    
</div>
</body>
</html> 
```

和样式/CSS：问题出在#contentbody 中，其余的居中就好了。

```
body {
   background-color:#FFF;
   margin-left:0px;
   margin-top:0px;
   margin-right:0px;
   font-family:Verdana, Geneva, sans-serif;
}

#headbackground {
    width:100%;
    min-width:1024px;
    height:300px;
    position:relative;
    float:left;
    background-color:#2E2E2E;

}

#headcontent {
    width:1000px;
    height:180px;
    position:relative;
    margin-left:auto;
    margin-right:auto;
    margin-top:10px;
    text-align:center;
    background-image:url(../media/Can-Kat%20Productions%20Logo%20-%20wordpress.png);
    background-repeat:no-repeat;
    background-position:center;
}

#language {
    width:40px;
    position:relative;
    float:left;
    margin-left:920px;
    margin-top:35px;
    display:none;
}

#buttons {
    width:1024px;
    height:50px;
    margin-left:auto;
    margin-right:auto;
    color:#FFF;
    position:relative;
    font-size:20px;
}

#navimiddle
{
    width:1024px;
    height:50px;
    position:reltive;
    margin-top:4px;
    float:left;
    background-image:url(../pictures/Layout/Button/leiste.png);
}

#contentbody {
    width:1000px;
    margin-top:-55px;
    margin-left:50%;
    left:-500px;
    float:left;
    position:relative;
    display:block;
}

#contentup {
    width:997px;
    background-image:url(../media/body_top.png);
    background-repeat:no-repeat;
    position:relative;
}

#contentuplayout {
    width:960px;
    margin-left:auto;
    margin-right:auto;
    padding-top:18px;
    position:relative;
}

#contentmain {
    width:902px;
    margin-left:auto;
    margin-right:auto;
    margin-top:-10px;
    position:relative;
}

#mainrow1 {
    width:902px;
    height:305px;
    position:relative;
}

#mainrow2 {
    width:902px;
    height:280px;
    margin-top:5px;
    position:relative;
}

#verticalrowleft {
    width:600px;
    height:auto;
    color:#000;
    position:relative;
    float:left;     
}

#verticalrowright {
    width:295px;
    height:auto;
    position:relative;
    float:right;
    border-left:1px solid #000;
    text-align:center;
}

#footer {
    width:100%;
    min-width:1024px;
    height:100px;
    position:relative;
    background-color:#2E2E2E;
    float:left;
}

#footercontent {
    width:902px;
    margin-left:auto;
    margin-right:auto;
    margin-top:10px;
    position:relative;
    color:#FFF;
}

#copyright {
    width:150px;
    float:right;
    position:relative;
}

/* -------- Classes --------- */
.rollover {
    width:270px;
    background-image:url(../pictures/Layout/hover-zoom.png);
    background-repeat:no-repeat;
    background-color:transparent;
    margin:auto;
}

.smallarticel {
    width:280px;
    height:296px;
    background-color:#DDD;
    border:thin #333;
    text-align:center;
    position:relative;
    float:left;
    border-radius:5px;
}

.smallarticel2 {
    width:280px;
    height:296px;
    margin-left:26px;
    margin-right:26px;
    background-color:#DDD;
    border:thin #333;
    text-align:center;
    float:left;
    position:relative;
    border-radius:5px;
}

.smallarticelpic {
    width:270px;
    margin-left:5px;
    margin-top:5px;
    position:relative;
    background-color:#000;
    background-image:url(../pictures/Layout/hover-zoom.png);
}

.contentdevider {
    width:960px;
    height:40px;
    margin-left:auto;
    margin-right:auto;
    background-image:url(../pictures/contentdevider.png);
    position:relative;
}

.placeholder { width:100%; height:30px; position:relative; float:left; }

.linkstyle1 A:link    {color:#FFF; text-decoration:none;}
.linkstyle1 A:visited {color:#FFF; text-decoration:none;}
.linkstyle1 A:active  {color:#FFF; text-decoration:none;}
.linkstyle1 A:hover   {
    color: #F0F0F0;
    text-decoration: underline;
}

.linkstyle2 A:link    {color:#000; text-decoration:none;}
.linkstyle2 A:visited {color:#000; text-decoration:none;}
.linkstyle2 A:active  {color:#000; text-decoration:none;}
.linkstyle2 A:hover   {color:#000; text-decoration:underline;}

img
{  border-style: none; }

#language img { border-radius:5px; }

.centertext { text-align:center; }

a.link{
    background:transparent url(a-bg.png) no-repeat -81px bottom;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:50:52.423

如果您希望您的内容以移动设备为中心，您可能需要为移动设备添加特定的 CSS。而不是依赖基于像素的大小，您将需要使用百分比。

## 中心内容移动设备

```
#container {
    width: 100%
}

#content-container {
    width: 80%;
    margin-left: 10%;
    margin-right:10%;
} 
```

当然，您可以重写整个 CSS 以响应屏幕尺寸。这是一个快速示例，说明您如何去做。[http://jsfiddle.net/4LSmq/](http://jsfiddle.net/4LSmq/)

## 如何定位移动屏幕

```
// target small screens (mobile devices or small desktop windows)
@media only screen and (max-width: 480px) {
  /* CSS goes here */
}

/* high resolution screens */
@media (-webkit-min-device-pixel-ratio: 2),
         (min--moz-device-pixel-ratio: 2),
         (min-resolution: 300dpi) {
  header { background-image: url(header-highres.png); }
}

/* low resolution screens */
@media (-webkit-max-device-pixel-ratio: 1.5),
         (max--moz-device-pixel-ratio: 1.5),
         (max-resolution: 299dpi) {
  header { background-image: url(header-lowres.png); } 
} 
```

## 第二种解决方案

尝试改变

```
#contentbody {
    width:1000px;
    margin-top:-55px;
    margin-left:50%;
    left:-500px;
    float:left;
    position:relative;
    display:block;
} 
```

到

```
#contentbody {
    width:1000px;
    margin-right:auto;
    margin-left:auto;
    position:relative;
    display:block;
} 
```

您的移动屏幕小于 1000 像素，因此您设置的边距百分比相对于屏幕宽度，在这种情况下小于 1000 像素。示例[http://jsfiddle.net/R9rSx/](http://jsfiddle.net/R9rSx/)

此外，明智的做法是添加、更改宽度，直到获得所需的外观

```
<meta name="viewport" content="width=1200"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T17:10:39.973

使用元标签怎么样？

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width"> 
```

# c++ - 使用 OpenAL(Stream) 播放声音

> ID：14932004
> 
> 赞同：2
> 
> 时间：2013-02-18T08:19:20.597
> 
> 标签：c++, openal

我需要播放从网络获取的声音。每 10 毫秒，需要 882 字节的声音（单声道，16 位，44100 Hz）。这样做：

```
while (!ExitKey)
    {
        boost::system::error_code error;
        size_t len = VoiceSocket->read_some(boost::asio::buffer(buf), error);
        if (len==0)
        {
            continue;
        }
        alGenSources(1, &alSource);
        alGenBuffers(1, &alSampleSet);
        alBufferData(alSource, AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
        alSourcei(alSource, AL_BUFFER, alSampleSet);
        alSourcePlay(alSource);
    } 
```

但是我的声音没有播放。在 buf 变量中我有声音，因为如果我将它发送到文件，我在文件中有声音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:48:36.070

您的代码没有显示`alListener`. 这似乎有点太明显的错误，但是没有听众，没有听到声音，否则发布的代码应该会产生一些声音，假设有来自套接字的非零数据。

**编辑：**再看一遍，你有一个小错字，后果很严重。`alBufferData(alSource, ...)`应该是`alBufferData(alSampleSet, ...)`。您要填充缓冲区对象，而不是源。否则，您正在播放一个空缓冲区，不出所料，它不会产生声音。

另请注意，您的代码通常效率低下，无法按预期工作。

您绝对不想为每 10 毫秒收到的每个数据包生成一个新的源（和缓冲区）。这会产生*一些*声音，但不是你想要的。即使没有网络抖动（您将不可避免地遇到），如果没有可听见的间隙，它也不会很好地播放。

在进入循环之前生成一个源和至少 3 个缓冲区（最好多几个，5 或 6 个）。只要您在流式传输，一个源就会一直存在，并且会在这段时间内持续播放。

在进入循环之前至少接收 2 个缓冲区。按照您收到它们的顺序将这些缓冲区排队到源 ( `alSourceQueueBuffers`) 并开始播放。每当您收到新数据包时，将数据读入新缓冲区（从已分配缓冲区的空闲列表中拉出）并将其排队。

取消队列缓冲区并将它们回收到您的空闲列表中，因为它们变得空闲（首先查询！）。

这样，OpenAL 在播放声音时总是有一些数据要读取，这对于获得良好的结果至关重要。永远不要让它饿死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:03:00.843

因此，如果原始缓冲区中有有效数据，则需要使用 alGetError 检查 OpenAL 函数，以查看其中一些函数是否失败并找出它们失败的原因。从问题描述中我没有看到这个基本检查已经完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:31:18.523

我写了这段代码：

```
void Sound::GoChat()
{
    device = alcOpenDevice(NULL);
    //
    ofstream file;
    file.open("TESTSPEAKER", std::ios_base::binary);
    context = alcCreateContext(device, NULL);
    alcMakeContextCurrent(context);
    // alGetError();
    char *alBuffer;
    ALenum alFormatBuffer;
    ALsizei alFreqBuffer;
    long alBufferLen;
    ALboolean alLoop;
    unsigned int alSource;
    unsigned int alSampleSet[3];
    boost::array <char, 882> buf;
    int NumberOfSampleSet = 0;
    alGenSources(1, &alSource);
    alGenBuffers(3, alSampleSet);
    //
    alBufferData(alSampleSet[0], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
    alBufferData(alSampleSet[1], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
    alBufferData(alSampleSet[2], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
    alSourceQueueBuffers(alSource, 3, alSampleSet);
    //
    while (!ExitKey)
    {
        alSourceUnqueueBuffers(alSource, 3, alSampleSet);
        boost::system::error_code error;
        size_t len = VoiceSocket->read_some(boost::asio::buffer(buf), error);
        if (len==0)
        {
            continue;
        }
        file.write(buf.data(), 882);

        alBufferData(alSampleSet[0], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
        alBufferData(alSampleSet[1], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
        alBufferData(alSampleSet[2], AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);

        alSourcei(alSource, AL_BUFFER, alSampleSet[0]);
        alSourcei(alSource, AL_BUFFER, alSampleSet[1]);
        alSourcei(alSource, AL_BUFFER, alSampleSet[2]);
            alSourceQueueBuffers(alSource, 3, alSampleSet);
        //
        //alSourcei(alSource, AL_LOOPING, alSampleSet);         
        alSourcePlay(alSource);
        alErr = alGetError();
        //
    }
    VoiceSocket->close();
    file.close();
} 
```

但这也行不通（

# c++ - C ++中的地图与多地图（性能）

> ID：14932007
> 
> 赞同：16
> 
> 时间：2013-02-18T08:19:28.850
> 
> 标签：c++, dictionary

我正在研究输入非常大的数据结构，几乎 1 TB。我需要将数据加载到关联容器中。

数据有一些重复的整体，所以我正在使用多图，但有人建议我使用向量图而不是使用它。我可以知道性能方面的差异是什么吗？

```
 map<const char*, const char*, cmptr> mulmap;

 map <const char*, vector <const char*> ,cmptr> mmap; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T08:29:13.737

您正在浪费时间考虑`map`vs `multimap`。假设 bin 的数量为 N，每个 bin 的平均项目数为 M。

A`std::multimap<Key, Val>`通常使用具有重复键的 RB 树。

*   获取是 O(log N + log M)
*   插入是 O(log N + log M)
*   删除是 O(log N + log M)
*   迭代是 O(1)

A`std::map<Key, std::vector<Val>>`通常使用具有唯一键的 RB 树。

*   获取是 O(log N)
*   插入是 O(log N)
*   删除是 O(log N)
*   迭代是 O(1)

如您所见，除非 M 非常大，否则差异不值得讨论。

但是，两者的存储都受到 RAM 的限制。1 TB 对于大多数系统来说根本不可行，而且我听说没有主板支持它。

您最好使用数据库来存储 1 TB 的数据。您可以为此任务选择几乎任何数据库。 [京都内阁](http://fallabs.com/kyotocabinet/)很简单，做你想做的，但你也可以使用PostgreSQL，MySQL，Sqlite，Dynamo，Redis，MongoDB，Cassandra，Voldemort...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T08:31:35.233

有 1 TB 的输入，我都不会使用。很可能，您没有足够的 RAM。使用一些磁盘数据结构，如[B-tree](http://en.wikipedia.org/wiki/B-tree)。

# java - 转换时间戳表示自 1970 年 1 月 1 日协调世界时 (UTC) 午夜以来的秒数。到日期？

> ID：14932009
> 
> 赞同：0
> 
> 时间：2013-02-18T08:19:38.417
> 
> 标签：java, date, utc

我正在使用 MovieLens 数据集，并尝试将自 1970 年 1 月 1 日协调世界时 (UTC) 午夜以来以秒为单位的 UTC 时间戳转换为 Java 日期。

我找不到任何有用的资源。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:20:43.980

`Date`有一个以 a作为参数 的[构造函数。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#Date%28long%29)`long`

```
Date yourDate = new Date(milliseconds) 
```

# ios - 在 UITextfield 内创建 UIButton

> ID：14932011
> 
> 赞同：1
> 
> 时间：2013-02-18T08:19:41.327
> 
> 标签：ios, uibutton, uitextfield

我是 ios 开发的新手。我想在 UITextfield 中创建 UIButton。当我们单击 UIButton Uidatepicker 出现时，当我们从 datepicker 中选择日期时，日期应该显示在 UitextFiels 中。我知道除了在 Uitextfield 中插入 UiButton 和给予操作之外的所有逻辑.任何人都可以给我的想法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:29:31.833

您可以在不使用 UIButton 的情况下实现您的目标。为此使用 UITextField 的委托方法。作为`- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField`返回 NO 并显示 datePikcer 并且当 datepicker 关闭时设置 UITextFiled 的文本。参考看看[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:48:01.697

添加 UITextField 后添加 UIButton 实例。UIButton 的框架应该在 UITextField 框架内。添加子视图时请记住，在 UITextField 添加后添加 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:26:01.063

无需在 UItextfield 中插入 UIbutton。将 uibutton 放在 uitextfield 上。只是你需要为文本字段和按钮提供相同的框架，并将按钮设为自定义按钮。

# c# - 将 varchar 值“System.Web.UI.WebControls.CheckBox”转换为数据类型位时转换失败

> ID：14932012
> 
> 赞同：1
> 
> 时间：2013-02-18T08:19:41.270
> 
> 标签：c#, asp.net, .net, exception-handling, checkbox

当我选中数据类型为位的复选框时，它的值（即 1 或 0）没有存储在数据库中，它给出了错误

> 将 varchar 值“System.Web.UI.WebControls.CheckBox”转换为数据类型位时转换失败

```
if (CheckBoxDT.Checked) 
{ 
    cmd.CommandText = " Insert into ClientMaster(doTips) values ( 1 )";    
    cmd.Parameters.AddWithValue("doTips", bool.Parse("1")); 
    cmd.ExecuteNonQuery(); 
} 
else 
{ 
    cmd.CommandText = "insert into ClientMaster(doTips) values (0)";
    cmd.Parameters.AddWithValue("doTips", bool.Parse("0")); 
    cmd.ExecuteNonQuery(); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:43:00.037

将位值插入数据库

```
 cmd.Parameters.Add("@check", SqlDbType.Bit).Value = Convert.ToInt16(CheckBoxDT.Checked); 
```

检索选定的复选框 试试这个

```
<asp:CheckBox ID="CheckBoxDT" runat="server" Checked='<%#((bool)Eval("isActive"))%>'
                        Style="color: #FFFFFF" /> 
```

![在此处输入图像描述](../Images/24eba80f02427d590fef3b0d105e58c8.png)

你的代码

```
if (CheckBoxDT.Checked) 
{ 
cmd.CommandText = " Insert into ClientMaster(doTips) values ( 1 )";    
cmd.Parameters.AddWithValue("doTips", bool.Parse("1")); 
cmd.ExecuteNonQuery(); 
} 
else 
{ 
cmd.CommandText = "insert into ClientMaster(doTips) values (0)"; 
cmd.Parameters.AddWithValue("doTips", bool.Parse("0")); 
cmd.ExecuteNonQuery(); 
} 
```

将此替换为

```
cmd.CommandText = "insert into ClientMaster(doTips) values (@doTips)"; 
cmd.Parameters.Add("@doTips", SqlDbType.Bit).Value = Convert.ToInt16(CheckBoxDT.Checked)
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:23:48.047

您可能正在传递控件，而不是其状态的值；您应该传递状态，并在必要时显式转换：

```
CheckBox         // a web control, and no standard db type to represent it
CheckBox.Checked // a boolean value, generally translatable to db bit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:25:00.520

您很可能将实际控制权传递给您的数据库，而不是它的状态。您需要使用`myCheckBox.Checked`而不仅仅是`myCheckBox`.

# whoosh - 在标记中包含斜杠和括号

> ID：14932013
> 
> 赞同：0
> 
> 时间：2013-02-18T08:19:51.910
> 
> 标签：whoosh

### 背景

我有包含希腊字符的搜索索引。许多人不知道如何输入希腊语，所以他们输入了一个叫做“beta-code”的东西。Beta 代码可以转换为希腊语。例如，beta 代码“NO/MOU”将被转换为“νόμου”。斜线或括号等字符用于表示重音。

### 期望的行为

我希望用户能够使用希腊语脚本中的 beta 代码或文本进行搜索。我发现 Whoosh [Variations](http://pythonhosted.org/Whoosh/api/query.html#whoosh.query.Variations)类提供了我需要的机制，它几乎解决了我的问题。

### 问题

Variation 类运行良好，除非在用户查询中使用斜杠或括号表示重音。问题是查询被解析，以便用于表示重音的特殊字符导致单词被拆分。例如，搜索“NO/MOU”会导致 Variations 类被要求查找“no”和“mou”的变体，而不是“NO/MOU”。

### 问题

有没有办法影响查询的解析方式，以便在搜索词中包含斜杠和括号（即搜索“NO/MOU”会导致搜索“NO/MOU”的标记而不是“ no”和“mou”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:52:45.440

搜索解析器使用 Tokenizer 类将搜索字符串分解为单独的术语。Whoosh 将使用与模式关联的类。例如，在下面的情况下，搜索“内容”字段时将使用 SimpleAnalyzer()。

```
Schema( verse_id = NUMERIC(unique=True, stored=True),
        content  = TEXT(analyzer=SimpleAnalyzer()) ) 
```

默认情况下，SimpleAnalyzer() 使用以下正则表达式来标记搜索词：“\w+(.?\w+)*”

要使用不同的正则表达式，请将 SimpleAnalyzer 的第一个参数分配给另一个正则表达式。例如，要在标记中包含 beta 代码字符（斜杠、括号等），请使用以下 SimpleAnalyzer：

```
SimpleAnalyzer( rcompile(r"[\w/*()=\+|&']+(\.?[\w/*()=\+|&']+)*") ) 
```

搜索现在将允许术语包含特殊的 beta 代码字符，并且 Variations 类将能够将术语转换为 unicode 版本。

# php - 绑定变量的数量与标记的数量不匹配

> ID：14932014
> 
> 赞同：-1
> 
> 时间：2013-02-18T08:19:52.987
> 
> 标签：php, pdo

关于为什么会发生这种情况的任何想法？

我的代码看起来非常好......过去半小时左右我一直在看它......

```
$dept_id = $_POST['dept'];
$id = $_POST['moduleCode'];
$name = $_POST['moduleName'];

$sql = "INSERT INTO ts_module
                (id,
                name,
                dept_id)
                VALUES 
                (:id,
                :name,
                dept_id)";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':id' => $id,':name' => $name,':dept_id' => $dept_id ) );
var_dump($stm->errorInfo()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:23:35.277

答案很简单：绑定变量的数量与标记的数量不匹配
您必须计算标记的数量并将其与绑定变量的数量进行比较。**他们不匹配。**

请尝试在不使用 Stackoverflow 的情况下解决此类类似拼写错误的问题。

# r - 为什么 TRUE == "TRUE" 在 R 中为 TRUE？

> ID：14932015
> 
> 赞同：57
> 
> 时间：2013-02-18T08:20:08.023
> 
> 标签：r, boolean, comparison, boolean-logic

1.  为什么`TRUE == "TRUE"`在`TRUE`R 中？
2.  R中是否有任何等价物`===`？

**更新：**

这些都回来了`FALSE`：

```
TRUE == "True"
TRUE == "true"
TRUE == "T" 
```

唯一的`TRUE`值是`TRUE == "TRUE"`。

如果检查`identical()`一切正常。

**第二次更新：**

`===`操作员是指检查变量的*值*和*数据*类型*的*过程。在这种情况下，我假设操作员只会比较变量的*值*，而不是它们的*数据类型*。*`==`*

 **** * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-18T08:31:14.353

根据帮助文件`?`==`` ：

> 如果这两个参数是不同类型的原子向量，则将一个强制转换为另一个的类型，优先级（递减）顺序为字符、复杂、数字、整数、逻辑和原始。

所以`TRUE`被强制为`"TRUE"`(ie `as.character(TRUE)`)，因此相等。

`===`其他语言中的运算符的等价物（即两个对象是否相等且类型相同）将是 function `identical`：

```
identical(TRUE, "TRUE")
[1] FALSE 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-18T08:40:32.787

TRUE 和 FALSE 是 R 中的保留字。当他说任何非零值都是 TRUE 时，我认为 eznme 不正确（在他编辑之前），因为`TRUE == "A"`计算结果为 FALSE。（这在解释为什么`TRUE == 1`评估为 TRUE 时是正确的，但它不能解释结果`TRUE == 7`

plannapus 给出的解释脱离了描述`as.logical`. 它更接近“真相”，因为`==`创建此结果的是运算符对字符的 TRUE 隐式强制。尽管`T`和`F`最初被赋予 TRUE 和 FALSE 的值，但它们可以重新分配给其他值或类型。

```
> TRUE == as.logical( c("TRUE", "T", "true", "True") )
[1] TRUE TRUE TRUE TRUE

>  TRUE == 7
[1] FALSE
> TRUE == as.logical(7)
[1] TRUE
>  TRUE == as.logical("A")
[1] NA 
```

（我之前错误地写道，由 TRUE == "TRUE" 引起的强制是合乎逻辑的；它实际上是通过 as.character(TRUE) 返回 "TRUE"。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T09:06:10.190

此外

真 == “真”

这些也是正确的：

*   真==1
*   真==1.0
*   真==1.0000000000000001
*   TRUE==0.99999999999999999 等，通常所有值都足够接近 1.0 以进行 IEEE754 舍入。

但更有趣的是**`if()`**检查：它检查`non-false`; 事实上这情节！：

```
if(4.0) plot(1) 
```

我认为唯一不会触发的值`if()`是 0、F、FALSE 和“FALSE”，它们似乎被定义为正好 0。***

# iphone - cocos2d中背景的连续滚动

> ID：14932027
> 
> 赞同：0
> 
> 时间：2013-02-18T08:20:57.080
> 
> 标签：iphone, ios, cocos2d-iphone, scroll

我的连续滚动代码......

```
NSArray *spaceDusts = [NSArray arrayWithObjects:_spacedust1, _spacedust2, nil];
for (CCSprite *spaceDust in spaceDusts) {
if ([_backgroundNode convertToWorldSpace:spaceDust.position].x < -   spaceDust.contentSize.width) {
    [_backgroundNode incrementOffset:ccp(2*spaceDust.contentSize.width,0)   forChild:spaceDust];
}
} 
```

背景图片尺寸为1024*384

当将它运行到模拟器中时，它可以正常工作，但是当我在设备（iphone）中使用时，
它会将背景设置为中心并花一些时间来加载图像

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:52:53.400

我在 cocos2d 游戏中的背景滚动代码：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
 #define MM_BG_SPEED_DUR       ( IS_IPAD ? (6.0f) : (2.0f) )

-(void)onEnter
{
    [super onEnter];
    [self initBackground];

    [self schedule: @selector(tick:)];
}

-(void)initBackground
{
   NSString *tex = @"BG/Background.png";//[self getThemeBG];

    mBG1 = [CCSprite spriteWithFile:tex];
    mBG1.position = ccp(s.width*0.5f,s.height*0.5f);
    [self addChild:mBG1 z:LAYER_BACKGROUND];

    mBG2 = [CCSprite spriteWithFile:tex];
    mBG2.position = ccp(s.width+s.width*0.5f,s.height*0.5f);

    mBG2.flipX = true;
    [self addChild:mBG2 z:LAYER_BACKGROUND];

}

-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;

    pos1.x -= MM_BG_SPEED_DUR;
    pos2.x -= MM_BG_SPEED_DUR;

    if(pos1.x <=-(s.width*0.5f) )
    {
        pos1.x = pos2.x + s.width;
    }

    if(pos2.x <=-(s.width*0.5f) )
    {
        pos2.x = pos1.x + s.width;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;

}

-(void)tick:(ccTime)dt
{
    [self scrollBackground:dt];
} 
```

# django - facebook 的 Django 社交身份验证给出错误

> ID：14932032
> 
> 赞同：0
> 
> 时间：2013-02-18T08:21:07.667
> 
> 标签：django, django-models, django-socialauth, django-1.4

**我在用：**

*   django-social-auth v 0.7.19
*   django 1.4.3

**模型.py：**

```
class UserProfile(models.Model):
    user = models.ForeignKey(User)
    username = models.CharField(max_length = 64, blank = True, null = True)
    last_login = models.DateField(blank = True, null = True)
    is_active = models.BooleanField(blank = True) 
```

**social_auth pipeline.py：**

```
from social_auth.backends.pipeline.user import create_user

def create_user(backend, details, response, uid, username, user=None, *args,
            **kwargs):

    if user:
        return {'user': user}
    if not username:
        return None

    user, created = User.objects.get_or_create(username = username)
    profile, created = UserProfile.objects.get_or_create(user = user)

    return {
        'user': user,
        'profile' : profile,
        'is_new': True
    } 
```

**问题：**

1.  当我从模型中取出用户名、last_login 和 is_active 字段时，社交身份验证会给我一个 DataBaseError，因为这些列是必需的。我正在使用 ForeignKey User 但它无法检测到它。

2.  我正在覆盖社交身份验证的 create_user 方法来创建我的用户及其个人资料。当函数返回时，会创建用户和配置文件，但仍会在错误页面上重定向。无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:24:32.127

尝试使用以下代码更改您的个人资料创建：

```
profile, created = UserProfile.objects.get_or_create(user=user, defaults={
    'username': user.username,
    'last_login': date.today(),
    'is_active': True
}) 
```

或者为这些字段添加一些默认值。

编辑：关键字参数是默认值而不是默认值。

# ios - 如何解决分配字符串值时的内存泄漏

> ID：14932033
> 
> 赞同：2
> 
> 时间：2013-02-18T08:21:07.807
> 
> 标签：ios, memory-leaks, instruments

我观察到此代码存在内存泄漏。我已经在这堂课上发布了workingEntry。

```
self.workingEntry.duration = [NSString stringWithFormat:@"%02d:%02d",[result minute], [result second]]; 
```

我使用 Xcode 中的工具对此进行了检查。我该如何解决这种内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:06:02.200

如果你在 Scheme:Diagnostics 中打开了 Zombies，那么内存将不会被释放，一切看起来都像是内存泄漏。如果 Zombies 已关闭，则仅使用 Instruments 测试内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:03:27.240

手动释放workingEntry 时，为什么不分配init 和release。

```
self.workingEntry.duration = [[NSString alloc]initWithFormat:@"%02d:%02d",[result minute], [result second]]; 
```

# java - java中Vector和Collections.synchronizedList都是同步的，有什么区别呢？

> ID：14932034
> 
> 赞同：7
> 
> 时间：2013-02-18T08:21:12.560
> 
> 标签：java, list, vector, synchronization

如果多个线程访问vector，vector会保证同时只有一个线程可以访问vector。SynchronizedList 是一样的。那么有什么区别呢？在一些同步的情况下如何选择？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T08:27:55.490

这种冗余的主要原因是向后兼容为旧版本 Java 开发的 Java 代码。

如果我没记错的话，Java 1.2 之前集合是一个单独的库，并且不是标准 JDK/JRE 的一部分。

那时，SDK 提供的唯一类似数据结构的列表是 Vector。在 Collections 中，开发人员以多种方式改进了 Vector 结构。特别是，他们删除了同步，因为在大多数情况下它被证明是不必要的。

他们仍然希望允许一种简单的方法来创建类似集合的列表的同步版本。因此他们引入了 SynchronizedList。

现在 Vector 和 SynchronizedList 之间的主要区别在于您使用它的方式。通过调用 Collections.synchronizedList 您可以围绕当前的 List 实现创建一个包装器，这意味着您不会将数据复制到另一个数据结构并保持底层结构完整。例如，如果你想要它后面的 LinkedList 结构而不是 ArrayList。

如果是 Vector，您实际上会将数据复制到新列表中，例如结构 Vector。因此，如果您之前有一个列表，那么效率会降低，但是如果您之前没有任何数据结构，那么您可能想要使用 Vector，因为它不会为每个方法调用增加方法包装成本。向量的另一个缺点是您不能保留替代的底层结构（例如 LinkedList），您总是使用向量本身中实现的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:26:32.350

默认情况下，Java 向量是同步的。您不必明确同步。即使您这样做，也没有额外的好处

强烈建议不要使用 Java Vector，而是建议使用 Syncronized "ArrayList"。显然有同样的好处。

另请参阅[向量是否已过时？](https://stackoverflow.com/questions/5763838/java-6-se-are-vectors-obsolete)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:36:24.597

Vector is a synchronized List implementation and Collections.synchronziedList is a method of Collections utility class that creates a synchronized proxy for any List implementation

# postgresql - 如何缩小 Heroku 上的数据库？

> ID：14932043
> 
> 赞同：1
> 
> 时间：2013-02-18T08:21:50.350
> 
> 标签：postgresql, heroku

Heroku 阻止数据库维护活动。如何缩小数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:31:01.290

您可以使用`heroku pg:psql`和运行命令，例如`VACUUM`或`VACUUM FULL`。有关详细信息，请参阅[有关 Vacuum 的 postgres 文档。](http://www.postgresql.org/docs/9.2/static/sql-vacuum.html)

# tfs - 我们可以导出 WIT BUG 重命名它并在同一个项目上再次导入吗

> ID：14932044
> 
> 赞同：0
> 
> 时间：2013-02-18T08:21:54.047
> 
> 标签：tfs, tfs-sdk

我们有 TFS 2010 环境，我们有很多自定义的 WIT BUG。当前需要一个新的工作项类型，它具有与“Bug”完全相同的行为和功能，但名称不同（工作项、BUG 和新 WIT 都应该在同一个团队项目中）。那么我们可以导出 WIT 'BUG' 重命名它并将其导入到同一个团队项目中，如果我们这样做会产生什么影响。或者我们还需要做什么以及我们需要在哪里进行更改。如果不可能，请让我知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:47:00.483

绝对可以做到这一点，不会产生不良后果。

如果您使用的是开发人员命令提示符，则步骤如下：

1.  跑：`witadmin exportwitd /collection:http://yourserver:8080/tfs/YourCollection /p:YourProject /t:Bug /f:bug.xml`
2.  打开`bug.xml`，将`name`元素更改为文件顶部的其他内容。保存文件。
3.  跑：`witadmin importwitd /collection:http://yourserver:8080/tfs/YourCollection /p:YourProject /f:bug.xml`

# java - 列出 Clojure 协议已扩展到的类/接口

> ID：14932047
> 
> 赞同：1
> 
> 时间：2013-02-18T08:22:05.757
> 
> 标签：java, clojure, protocols

假设我有一个 Clojure 协议：

```
(defprotocol Foo
  (bar [x])) 
```

我知道这个协议可能已经（使用`extend-protocol`或`extend-type`）扩展到许多 Java 类和/或接口。

如何获取`Foo`在运行时扩展的类的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:01:46.603

参看。[`extenders`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/extenders)所以希望我输入更多字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:28:58.677

协议被实现为地图数据结构，如示例所示：

```
user=> (defprotocol Foo (bar [x]))
Foo
user=> Foo
{:on-interface user.Foo, :on user.Foo, :sigs {:bar {:doc nil, :arglists ([x]), :name bar}}, :var #'user/Foo, :method-map {:bar :bar}, :method-builders {#'user/bar #<user$eval331$fn__332 user$eval331$fn__332@cdd54e>}}
user=> (extend-protocol Foo String (bar [x] x))
nil
user=> Foo
{:impls {java.lang.String {:bar #<user$eval350$fn__351 user$eval350$fn__351@25bd56>}}, :on-interface user.Foo, :on user.Foo, :sigs {:bar {:doc nil, :arglists ([x]), :name bar}}, :var #'user/Foo, :method-map {:bar :bar}, :method-builders {#'user/bar #<user$eval331$fn__332 user$eval331$fn__332@cdd54e>}} 
```

因此，要获得协议的实现，您可以使用： `(Foo :impls)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T08:28:53.050

有两种情况需要处理

*   `extend-type`和`extend-protocol`
*   `deftype`和`defrecord`

有关讨论此问题的答案，请参阅[https://stackoverflow.com/a/14261880/1756702](https://stackoverflow.com/a/14261880/1756702)。

# php - 无法将 $pull/$pullAll 修饰符应用于非数组

> ID：14932056
> 
> 赞同：1
> 
> 时间：2013-02-18T08:23:01.083
> 
> 标签：php, mongodb

我在 mongo 中有一个具有以下结构的表：

```
array(
    'Subscriber' => array(
         '0' => 'Name 1',
         '1' => 'Name 1',
         '2' => 'Name 2',
    )
) 
```

我正在使用以下代码从订阅者中删除项目：

```
$setData["subscriber.1"]=1;
$result = $this->mongo->pages->update($condition1, array('$unset' => $setData), array('safe' => true));
$result = $this->mongo->pages->update($condition1, array('$pull' => array('subscriber' => null)), array('safe' => true)); 
```

它工作正常，但给出`Mongo cursor Error:Cannot apply $pull/$pullAll modifier to non-array`

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:28:48.190

我猜是因为：

```
$result = $this->mongo->pages->update($condition1, array('$pull' => array('Pinned' => null)), array('safe' => true)); 
```

您的文档中没有`Pinned`，它绝对不是一个数组。

这基本上就是这个错误所说的：`Pinned`不是数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T08:26:12.640

您确实使用了单引号 ('')。PHP 将忽略单引号内的变量。您必须删除单引号或用双引号替换它们。

这应该有效：

```
$setData["subscriber.1"]=1;
$result = $this->mongo->pages->update($condition1, array($unset => $setData), array('safe' => true));
$result = $this->mongo->pages->update($condition1, array($pull => array('Pinned' => null)), array('safe' => true)); 
```

# .htaccess - 无法在 RewriteRule 中获取 RewriteCond 的 Get 参数

> ID：14932057
> 
> 赞同：0
> 
> 时间：2013-02-18T08:23:02.620
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我无法获得 `GET`我在这里定义的第二个参数`RewriteCound`是我写的规则：

```
RewriteCond %{QUERY_STRING} ^cmtpage=(\d+)$
RewriteRule ^forums/139638-ideas/suggestions/([0-9]*)((-[a-zA-Z0-9-]+)*)\?cmtpage=(\d+)$ suggestion.php?id=$1&cmtpage=%1 [NC,L] 
```

例如 URL 的预期结果应该是这样的：

```
forums/139638-ideas/suggestions/2489549-ability-to-print?cmtpage=2 
```

我的正则表达式有问题还是语法有问题？？`cmtpage`我无法获取的get参数在哪里

# c# - 将用户控件的代码从 VB.NET 转换为 C#

> ID：14932063
> 
> 赞同：0
> 
> 时间：2013-02-18T08:23:58.983
> 
> 标签：c#, .net, vb.net, winforms, user-controls

我在 VB.NET 中有一个自定义用户控件的代码：

[链接到代码](http://www.sourcehints.com/articles/creating-a-real-transparent-label-in-vb-net.html#comment-21274)

我使用此站点将其转换为 C#：

[http://www.carlosag.net/tools/codetranslator/](http://www.carlosag.net/tools/codetranslator/)

转换后的结果是：

```
using System.Windows.Forms;
using System.Drawing;
using System.ComponentModel;
public class TransparentLabel {

public TransparentLabel() {
    //  This call is required by the designer.
    InitializeComponent();
    //  Add any initialization after the InitializeComponent() call.
    //  Add any initialization after the InitializeComponent() call.
    this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
    this.SetStyle(ControlStyles.Opaque, true);
    this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
    this.components = new System.ComponentModel.Container();
    RF = new RectangleF(0, 0, base.Width, base.Height);
    LabelForeColorBrush = new SolidBrush(base.ForeColor);
}

private StringFormat sFormat;

private RectangleF RF;

private SolidBrush LabelForeColorBrush = null;

private void UpdateText() {
    try {
        sFormat = new StringFormat();
        int x = 0;
        int y = 0;
        // With...
        switch (TextAlignment) {
            case ContentAlignment.BottomCenter:
                sFormat.Alignment = StringAlignment.Center;
                sFormat.LineAlignment = StringAlignment.Far;
                break;
            case ContentAlignment.BottomLeft:
                sFormat.Alignment = StringAlignment.Near;
                sFormat.LineAlignment = StringAlignment.Far;
                break;
            case ContentAlignment.BottomRight:
                sFormat.Alignment = StringAlignment.Far;
                sFormat.LineAlignment = StringAlignment.Far;
                break;
            case ContentAlignment.MiddleLeft:
                sFormat.Alignment = StringAlignment.Near;
                sFormat.LineAlignment = StringAlignment.Center;
                break;
            case ContentAlignment.MiddleCenter:
                sFormat.Alignment = StringAlignment.Center;
                sFormat.LineAlignment = StringAlignment.Center;
                break;
            case ContentAlignment.MiddleRight:
                sFormat.Alignment = StringAlignment.Far;
                sFormat.LineAlignment = StringAlignment.Center;
                break;
            case ContentAlignment.TopCenter:
                sFormat.Alignment = StringAlignment.Center;
                sFormat.LineAlignment = StringAlignment.Near;
                break;
            case ContentAlignment.TopLeft:
                sFormat.Alignment = StringAlignment.Near;
                sFormat.LineAlignment = StringAlignment.Near;
                break;
            case ContentAlignment.TopRight:
                sFormat.Alignment = StringAlignment.Far;
                sFormat.LineAlignment = StringAlignment.Near;
                break;
        }
        sFormat.FormatFlags = StringDirection;
        ResizeControl();
    }
    catch (Exception ex) {
    }
}

private void ResizeControl() {
    RF.Size = new Size(base.Size);
    Invalidate();
}

private StringFormatFlags _StringDirection = (StringFormatFlags.NoClip < Description("The Direction of the Text."));

public StringFormatFlags StringDirection {
    get {
        return _StringDirection;
    }
    set {
        _StringDirection = value;
        UpdateText;
    }
}

private System.Drawing.ContentAlignment _TextAlignment = (ContentAlignment.MiddleCenter < Description("The Text Alignment that will appear on this control."));

public System.Drawing.ContentAlignment TextAlignment {
    get {
        return _TextAlignment;
    }
    set {
        _TextAlignment = value;
        UpdateText();
    }
}

public override System.Drawing.Color ForeColor {
    get {
        return base.ForeColor;
    }
    set {
        base.ForeColor = value;
        LabelForeColorBrush = new SolidBrush(value);
    }
}

private string _Labeltext = ("TransparentLabel" < Description("The text to be displayed in supports with real transparency."));

public string LabelText {
    get {
        return _Labeltext;
    }
    set {
        _Labeltext = value;
        Invalidate();
    }
}

[Browsable(false)]
[EditorBrowsable(false)]
public override System.Drawing.Color BackColor {
    get {
        return base.BackColor;
    }
    set {
        base.BackColor = value;
    }
}

protected override System.Windows.Forms.CreateParams CreateParams {
    get {
        CreateParams cp = base.CreateParams;
        cp.ExStyle = (cp.ExStyle | 32);
        return cp;
    }
}

protected override void OnPaint(System.Windows.Forms.PaintEventArgs e) {
    try {
        base.OnPaint(e);
        //  draw the text on the control
        e.Graphics.DrawString(LabelText, base.Font, LabelForeColorBrush, RF, sFormat);
        //  MyBase.OnPaint(e)
    }
    catch (Exception ex) {
    }
}

private void TransparentLabel_Resize(object sender, System.EventArgs e) {
    ResizeControl();
}
} 
```

但是这段代码有错误。其中一个是 For`InitializeComponent()`和 for 基本关键字。我应该如何转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:33:57.703

这是转换：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.Xml.Linq;
using System.Drawing;
using System.Windows.Forms;

using System.ComponentModel;

/// <summary>
/// This Program Created by: SourceHints.com
/// Nolan F. Sunico - SourceHints Administrator
/// You are free to use or modify this code
/// but please visit our website for new articles
/// </summary>
/// <DateCreated>November 30, 2011</DateCreated>
/// <TimeCreated>3:43 PM</TimeCreated>
/// <remarks></remarks>
public partial class TransparentLabel
{
    public TransparentLabel()
    {

        // This call is required by the designer.
        InitializeComponent();

        // Add any initialization after the InitializeComponent() call.
        // Add any initialization after the InitializeComponent() call.
        this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        this.SetStyle(ControlStyles.Opaque, true);
        this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        this.components = new System.ComponentModel.Container();
        RF = new RectangleF(0, 0, base.Width, base.Height);
        LabelForeColorBrush = new SolidBrush(base.ForeColor);
    }
#region Private
    private StringFormat sFormat;
    private RectangleF RF;
    private SolidBrush LabelForeColorBrush = null;
#endregion
#region Subroutines
    /// <summary>
    /// Updates Text of this control.
    /// </summary>
    /// <remarks></remarks>
    private void UpdateText()
    {
        try
        {
            sFormat = new StringFormat();
            int x = 0;
            int y = 0;
//INSTANT C# NOTE: The following VB 'Select Case' included either a non-ordinal switch expression or non-ordinal, range-type, or non-constant 'Case' expressions and was converted to C# 'if-else' logic:
//              Select Case TextAlignment
//ORIGINAL LINE: Case ContentAlignment.BottomCenter
            if (TextAlignment == ContentAlignment.BottomCenter)
            {
            sFormat.Alignment = StringAlignment.Center;
            sFormat.LineAlignment = StringAlignment.Far;
            }
//ORIGINAL LINE: Case ContentAlignment.BottomLeft
            else if (TextAlignment == ContentAlignment.BottomLeft)
            {
            sFormat.Alignment = StringAlignment.Near;
            sFormat.LineAlignment = StringAlignment.Far;
            }
//ORIGINAL LINE: Case ContentAlignment.BottomRight
            else if (TextAlignment == ContentAlignment.BottomRight)
            {
            sFormat.Alignment = StringAlignment.Far;
            sFormat.LineAlignment = StringAlignment.Far;
            }
//ORIGINAL LINE: Case ContentAlignment.MiddleLeft
            else if (TextAlignment == ContentAlignment.MiddleLeft)
            {
            sFormat.Alignment = StringAlignment.Near;
            sFormat.LineAlignment = StringAlignment.Center;
            }
//ORIGINAL LINE: Case ContentAlignment.MiddleCenter
            else if (TextAlignment == ContentAlignment.MiddleCenter)
            {
            sFormat.Alignment = StringAlignment.Center;
            sFormat.LineAlignment = StringAlignment.Center;
            }
//ORIGINAL LINE: Case ContentAlignment.MiddleRight
            else if (TextAlignment == ContentAlignment.MiddleRight)
            {
            sFormat.Alignment = StringAlignment.Far;
            sFormat.LineAlignment = StringAlignment.Center;
            }
//ORIGINAL LINE: Case ContentAlignment.TopCenter
            else if (TextAlignment == ContentAlignment.TopCenter)
            {
            sFormat.Alignment = StringAlignment.Center;
            sFormat.LineAlignment = StringAlignment.Near;
            }
//ORIGINAL LINE: Case ContentAlignment.TopLeft
            else if (TextAlignment == ContentAlignment.TopLeft)
            {
            sFormat.Alignment = StringAlignment.Near;
            sFormat.LineAlignment = StringAlignment.Near;
            }
//ORIGINAL LINE: Case ContentAlignment.TopRight
            else if (TextAlignment == ContentAlignment.TopRight)
            {
            sFormat.Alignment = StringAlignment.Far;
            sFormat.LineAlignment = StringAlignment.Near;
            }
            sFormat.FormatFlags = StringDirection;
            ResizeControl();
        }
        catch (Exception ex)
        {

        }
    }
    /// <summary>
    /// Resizes Transparent Label Control.
    /// </summary>
    /// <remarks></remarks>
    private void ResizeControl()
    {
        RF.Size = new Size(base.Size);
        Invalidate();
    }
#endregion
#region Properties
    private StringFormatFlags _StringDirection = StringFormatFlags.NoClip;
    [Description("The Direction of the Text."), DefaultValue(StringFormatFlags.NoClip)]
    public StringFormatFlags StringDirection
    {
        get
        {
            return _StringDirection;
        }
        set
        {
            _StringDirection = value;
            UpdateText();
        }
    }

    private System.Drawing.ContentAlignment _TextAlignment = ContentAlignment.MiddleCenter;
    [Description("The Text Alignment that will appear on this control."), DefaultValue(ContentAlignment.MiddleCenter)]
    public System.Drawing.ContentAlignment TextAlignment
    {
        get
        {
            return _TextAlignment;
        }
        set
        {
            _TextAlignment = value;
            UpdateText();
        }
    }

#endregion
#region Overrides
    public override System.Drawing.Color ForeColor
    {
        get
        {
            return base.ForeColor;
        }
        set
        {
            base.ForeColor = value;
            LabelForeColorBrush = new SolidBrush(value);
        }
    }
    /// <summary>
    /// The text to be displayed in supports with real transparency.
    /// </summary> 
    /// <remarks></remarks>
    private string _Labeltext = "TransparentLabel";
    [Description("The text to be displayed in supports with real transparency."), Category("Text"), DefaultValue("TransparentLabel")]
    public string LabelText
    {
        get
        {
            return _Labeltext;
        }
        set
        {
            _Labeltext = value;
            Invalidate();
        }
    }

    [Browsable(false), EditorBrowsable(false)]
    public override System.Drawing.Color BackColor
    {
        get
        {
            return base.BackColor;
        }
        set
        {
            base.BackColor = value;
        }
    }
    protected override System.Windows.Forms.CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle = cp.ExStyle | 0x20;
            return cp;
        }
    }
    protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
    {
        try
        {
            base.OnPaint(e);
            // draw the text on the control
            e.Graphics.DrawString(LabelText, base.Font, LabelForeColorBrush, RF, sFormat);
            // MyBase.OnPaint(e)
        }
        catch (Exception ex)
        {

        }

    }
#endregion
    private void TransparentLabel_Resize(object sender, System.EventArgs e)
    {
        ResizeControl();
    }
} 
```

# c# - 将歌曲列表添加到 ListBox

> ID：14932065
> 
> 赞同：0
> 
> 时间：2013-02-18T08:24:11.550
> 
> 标签：c#, windows-phone-7, xaml, media

我正在尝试为 Windows Phone 7 制作自己的媒体播放器，第一步，我想显示媒体库中所有歌曲的列表以选择它们。据我了解列表框，我只需将 texblocks 命名为我的类的属性，这将是“Song”

```
<ListBox FontSize="30" Name="songListGUI" Height="330" Margin="0,120,0,0">
     <Button Width="430" Height="60" BorderThickness="0" Margin="0" >
          <Button.Content>
              <StackPanel Orientation="Horizontal" Width="420" Height="auto">
                 <TextBlock Name="Name" Text="{Binding Name}" FontSize="22"></TextBlock>
                 <TextBlock Text=" - " FontSize="22"></TextBlock>
                 <TextBlock Name="Artist" Text="{Binding Artist}" FontSize="22"></TextBlock>
              </StackPanel>
          </Button.Content>
       </Button>
    </ListBox> 
```

现在我想，我应该将我的歌曲列表处理到 GUI 上，我尝试这样做：

```
 songListGUI.ItemsSource = songs; 
```

但后来我得到一个“InvalidOperationException” - 在使用 ItemsSource 之前，项目集合必须为空。我发现了几个这样的问题，他们都创建了一个新类来显示这个内容。但我想坚持使用歌曲课程，因为它非常方便：/你知道我在这里做错了什么吗？

编辑：我刚刚找到了解决方案。不知道确切原因，但是 .xaml 中的这种变化让我很高兴 :)：

```
<ListBox FontSize="30" Name="songListGUI" Height="330" Margin="0,120,0,0">
   <ListBox.ItemTemplate>
       <DataTemplate>
           <Button Width="430" Height="60" BorderThickness="0" Margin="0" >
                 <Button.Content>
                      <StackPanel Orientation="Horizontal" Width="420" Height="auto">
                          <TextBlock Name="Name" Text="{Binding Name}" FontSize="22"></TextBlock>
                          <TextBlock Text=" - " FontSize="22"></TextBlock>
                          <TextBlock Name="Artist" Text="{Binding Artist}" FontSize="22"></TextBlock>
                      </StackPanel>
                  </Button.Content>
            </Button>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:44:39.263

ListBox 是一个[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)。ItemsControl 的内容映射到[Items](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)属性。所以通过这样做：

```
<ListBox>
  <SomeContent/>
</ListBox> 
```

您将 Items 属性设置为`<SomeContent/>`. 由于您不允许设置[Items](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)属性和[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性，因此您会遇到异常。

当你这样做时：

```
<ListBox>
  <ListBox.ItemTemplate>...</ListBox.ItemTemplate>
</ListBox> 
```

您没有设置内容，而是设置了 ListBox 的属性，因此没有冲突。

# c# - 会话变量会在不同的时间后过期吗？

> ID：14932068
> 
> 赞同：2
> 
> 时间：2013-02-18T08:24:25.077
> 
> 标签：c#, asp.net, session-variables

在我的登录页面中，我将连接字符串和登录用户角色放入会话变量中。为了检查会话是否未过期，我将以下代码行放入其他页面的 page_load 事件中。

```
protected void Page_Load(object sender, EventArgs e)
{
   if (Session["userRole"])==null
      Response.Redirect("Login.aspx");

   .........
} 
```

`Session[conString] is expired`但有时当 Web 应用程序空闲一段时间时我会出错。现在我想知道不同会话变量的到期时间是否不同。如果不是，那么当应用程序检测到会话已过期时，我不应该被重定向到登录页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:32:33.637

您的应用程序的空闲超时可能比会话超时短。这意味着如果 Web 服务器在您指定的会话到期时间之前处于空闲状态，它将终止您的应用程序。

不，会话变量不会过期。会话会（在指定的超时之后）。

# php - 如何配置 CodeIgniter 分页？

> ID：14932074
> 
> 赞同：0
> 
> 时间：2013-02-18T08:24:59.210
> 
> 标签：php, codeigniter

这是我的代码：

```
$config['base_url'] = base_url() . 'settings/profile/';
$config['total_rows'] = $data['count_user_posts'];
$config['per_page'] = 3;
$offset = ($this->uri->segment('3') * $config['per_page']) / 2;
$this->pagination->initialize($config);
$config['use_page_numbers'] = True;
$data['user_posts'] = $this->post_model->get_user_posts($_SESSION['user_id'], $config['per_page'], $config['offset']); 
```

问题是当我点击 2 或任何其他链接时，它也会显示上一页的一些数据。任何解决方案 - 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:31:11.747

这样做

```
public function index($offset = 0) 
{
   $this->load->library('pagination');
  $limit = 10;

  $total = $this->legend_model->get_legend_count($language_id);

  $config['base_url'] = base_url().'legend/index/';
  $config['total_rows'] = $total;
  $config['per_page'] = $limit;
  $config['uri_segment'] = 3;

  $config['first_link'] = '<< First';
  $config['last_link'] = 'Last >>';
  $config['next_link'] = 'Next ' . '&gt;';
  $config['prev_link'] = '&lt;' . ' Previous';
  $config['num_tag_open'] = '<span class="number">';
  $config['num_tag_close'] = '</span>';

  $config['cur_tag_open'] = '<span class="current"><a href="#">';
  $config['cur_tag_close'] = '</a></span>';

  $this->pagination->initialize($config);
  $data['offset'] = $offset;
  $data['legends'] = $this->legend_model->get_legend($language_id, $limit, $offset);

  $this->template->write('title', 'Legend : Manage Legend');
  $this->template->write_view('content', 'legend/index', $data);
  $this->template->render();
} 
```

在模型中

```
 //Get legend
    public function get_legend($language_id = 1, $limit = 10, $offset = 0)
    {        
        $this->db->select('l.id,lt.title,lt.status');
        $this->db->from('legends l');
        $this->db->join('legend_translations lt', 'l.id = lt.legend_id');
        $this->db->where('lt.language_id', $language_id);
        $this->db->order_by('l.id DESC');
        $this->db->limit($limit, $offset);

        $legend = $this->db->get();

        return $legend->result();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:15:42.737

我明白了。这将是 $offset 变量的代码............谢谢大家帮助我......

```
if($this->uri->segment(4) > 0)
    $offset = ($this->uri->segment(4) + 0)*$config['per_page'] - $config['per_page'];
else
    $offset = $this->uri->segment(4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:47:32.927

这是一个例子，我是如何实现的

在控制器中

```
function index()
{
    $this->load->library('pagination');

    $config = array();
    $config["base_url"] = base_url() . "city/index";
    $config["total_rows"] = $this->city_model->record_count();
    $config["per_page"] = 20;
    $config["uri_segment"] = 4;

    $this->pagination->initialize($config);

    $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
    $data["city"] = $this->city_model->get_cities($config["per_page"], $page);
    $data["links"] = $this->pagination->create_links();
} 
```

在模型中

```
function record_count() 
{
   return $this->db->count_all("city");
}

function get_cities($limit,$start)
{       

   $this->db->limit($limit,$start);
   $this->db->select('*');
   $this->db->from('city');
   $this->db->order_by('city_name');
   $query = $this->db->get();

   if ($query->num_rows() > 0) {
       foreach ($query->result() as $row) {
             $data[] = $row;
   }

return $data;
}

return false;

} 
```

# objective-c - Objective-c：放弃 Core Data，SQlite3 - 使用 .plist。我错了吗？

> ID：14932076
> 
> 赞同：0
> 
> 时间：2013-02-18T08:25:11.723
> 
> 标签：objective-c, database, core-data, plist

我正在开发我的第一个 iOS 应用程序。它实际上是我最近编写的一个 Android 应用程序的一个端口。我真的偶然发现了数据库部分！

它是一个简单的数据库，为每一行存储几个字符串/整数。Android 上的 SQLite3 简直是小菜一碟！

我尝试过学习 Core Data、Core Data Stack、SQLite3 教程……这些东西是为不同版本的 XCode 编写的，不要使用垃圾收集、简单的拼写错误或太不熟悉。

我不希望存储超过 100K 的数据。我应该改用 XML/plist，还是 Core Data 值得花时间投资？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:19:02.670

快速的解决方案是像之前一样使用普通的 sqlite3。

Core Data 工作得很好，但它需要深入了解你在做什么，以及它是如何工作的。它为您提供了一些灵活性、自动迁移和许多其他功能。但它也包含很多你可以在腿上开枪的地方。

我在很多小事上遇到了麻烦。例如，从 v.1 -> v.2 自动迁移效果很好，v.2 -> v.3 也很有效。但它不能从 v.1 -> v.3 本身迁移。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:41:56.313

不要使用 CoreData 来“从 sqlite 数据库中获取数据”。如果您需要“从 sqlite 数据库中获取数据”，请使用[FMDB](https://github.com/ccgus/fmdb)或类似工具。FMDB 是用于 iOS 的 sqlite3 的包装器。您应该能够直接复制您的`select`语句并将它们包装到 FMDB 中。

使用 CoreData 但用 SQL 语言思考只会造成混乱。如果您打算使用 CoreData，那么最好忽略 CoreData 使用 sqlite db 作为持久存储这一事实，并忘记您对 sql 语言的了解。

CoreData 是一个对象图框架而不是数据库接口。它碰巧默认将数据存储到 sqlite db，但从程序员的角度来看，使用是在对象方面。它不是在行和表方面。

回到 FMDB。在那里，打开一个数据库：

`FMDatabase *theDatabase = [FMDatabase databaseWithPath:pathToDB];`

`select`使用语句检索存储的行：

`FMResultSet *setOfRows = [db executeQuery:@"select * from tableName where attribute = ?", @"some criteria'"];`

然后使用 a 遍历检索到的行`while`：

```
while ([setOfRows next]) {
    NSLog(@"%d %@ %@ %f", // simply print to the console
          [rs intForColumn:@"integerColumn"],
          [rs stringForColumn:@"attribute"],
          [rs dateForColumn:@"dateColumn"],
          [rs doubleForColumn:@"doubleValue"]); 
} 
```

您应该能够保留在 android 下设计数据库布局的所有工作。只需包装访问部分。有关语法的更多信息，[FMDB的 github 页面上有一个很好的自述文件](https://github.com/ccgus/fmdb)

# c# - 比较小数点分隔符中的逗号和点（点）

> ID：14932078
> 
> 赞同：-2
> 
> 时间：2013-02-18T08:25:29.227
> 
> 标签：c#, silverlight

有人能帮我吗？我不确定是无知还是缺乏知识，但这真的很烦人。比较这种十进制格式`123.456,22`和`123,456.22`.

我尝试这种方式：

> 十进制 val1 = 0; 十进制 val2 = 0;
> 
> decimal.TryParse("123,456.22", out val1);
> 
> decimal.TryParse("123.456,22", out val2);

如果计算机有`123.456,22`格式，我试试 decimal.TryParse( `123,456.22`, out val1) --> val1 = 0;

现在我正在使用代码：按“，”或“。”分割 ，我只是想知道有什么更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:28:52.670

使用 Decimal.Parse 方法：http: [//msdn.microsoft.com/en-us/library/cafs243z.aspx](http://msdn.microsoft.com/en-us/library/cafs243z.aspx)

```
Decimal.Parse(value); 
```

您可以使用重载方法传入文化（[http://msdn.microsoft.com/en-us/library/t7xswkc6.aspx](http://msdn.microsoft.com/en-us/library/t7xswkc6.aspx)）

```
Decimal.Parse(value, new CultureInfo("en-GB")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:39:29.400

试试这个：

```
decimal d1;
string s1 = "123,456.22";
if (Decimal.TryParse(s1, 
    System.Globalization.NumberStyles.Any, 
    System.Globalization.CultureInfo.GetCultureInfo("ro-RO"), 
    out d1))
{
    Console.WriteLine("Success: {0} converted into {1} using the ro-RO number format", 
        s1, d1);
}
else if (Decimal.TryParse(s1, out d1))
{
    Console.WriteLine("Success: {0} converted into {1} using the {2} number format", 
        s1, d1,System.Globalization.CultureInfo.CurrentCulture.Name);
}
    }
} 
```

您可能会发现这篇 Wikipedia 文章很有趣：[十进制标记](http://en.wikipedia.org/wiki/Decimal_mark)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:44:07.047

`123.456,22`并且`123,456.22`有一个不同的分隔符，而在一种情况下它的 point( `.`) 在另一种情况下它是一个逗号( `,`)，当你只使用 Parse 时它会依赖于当前的文化，所以其中一个会导致解析失败。

在这种情况下，您应该建立相关`NumberFormatInfo`并根据您对小数分隔符（`NumberDecimalSeparator`）和千位分隔符（ `NumberGroupSeparator`）的需要进行设置

因此，您应该使用 TryParse，如果返回 false，则像这样构建您的自定义，并将其作为参数提供给 Parse。

```
// check with TryParse first and if it returns false then try as below
NumberFormatInfo numinf = new NumberFormatInfo();
numinf.NumberDecimalSeparator= ",";
numinf.NumberGroupSeparator= ".";
decimal.Parse("your failed tryparse", numinf); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T04:28:03.693

```
decimal d1;
string s1 = "123,456.22";
if (Decimal.TryParse(s1, 
    System.Globalization.NumberStyles.Any, 
    System.Globalization.CultureInfo.GetCultureInfo("ro-RO"), 
    out d1))
{
    Console.WriteLine("Success: {0} converted into {1} using the ro-RO number format", 
        s1, d1);
}
else if (Decimal.TryParse(s1, out d1))
{
    Console.WriteLine("Success: {0} converted into {1} using the {2} number format", 
        s1, d1,System.Globalization.CultureInfo.CurrentCulture.Name);
}
    }
} 
```

只能在控制台应用程序上使用？？

# cloud-foundry - 在多云控制器模式下设置 Cloud Foundry

> ID：14932080
> 
> 赞同：0
> 
> 时间：2013-02-18T08:25:38.507
> 
> 标签：cloud-foundry

我使用 4 个节点的 dev_setup 安装云代工厂。一个是rest节点，一个是dea节点，第三个是mysql0节点，最后一个是mysql1节点，但是有一个云控节点，就是rest节点。如何在多个云控制器模式下设置 Cloud Foundry，例如，两个云控制器节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:52:58.253

这个问题很适合[Cloud Foundry 开发者](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

# excel - 显示 Unicode 字符：Excel 2010 与 Excel 2013

> ID：14932086
> 
> 赞同：4
> 
> 时间：2013-02-18T08:26:05.857
> 
> 标签：excel, internationalization, excel-2010, vba

我需要用纯 ASCII 替换 Excel 电子表格中的 Unicode 字符。例如，将 Ståle 转换为 Stale。

以下在 Excel 2013 中工作正常。但在 Excel 2010 中，“？” 显示而不是有问题的字符。有任何想法吗？请注意，在 Excel 2010 中可以正确检测到非 Ascii 字符，但不会显示这些字符。

```
char = Mid(val, i, 1)
char_code = AscW(char)
If char_code > 127 Then
  MsgBox ("Problem with " & c.Address & " [" & char_code & "] " &
    StrConv(ChrW(char_code), vbUnicode))
End If 
```

我也试过了

```
MsgBox ("Problem with " & char & " " & ChrW(char_code)) 
```

它再次适用于 Excel 2013，但不适用于 Excel 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:56:43.947

更多研究表明：

Excel 2010 的 MsgBox 控件不支持 Unicode 字符。Excel 2013 MsgBox 可以。

将字符插入工作表单元格时，Unicode 非 ASCII 字符可以正常工作。问题仅在于使用 MsgBox 显示它时。好消息是这个问题在 Excel 2013 中得到了修复。[关于这个主题的更多信息。](https://stackoverflow.com/questions/6013443/display-non-english-language-text-in-a-message-box)

# javascript - 即使给出了不同的嵌入式代码，如何摆脱重复的 youtube 视频？

> ID：14932091
> 
> 赞同：0
> 
> 时间：2013-02-18T08:26:14.143
> 
> 标签：javascript, jquery, jquery-mobile, jquery-plugins, youtube-javascript-api

我正在开发一个移动网页，我必须在上面导入两个 youtube 视频。当我单击该视频时，该视频必须展开并开始播放。该视频已使用 javascript 和 html 获得。

我的问题是我已经使用 2 个不同的嵌入式 youtube 代码片段对 javascript 进行了编码，但它采用了 javascript 第二部分的视频代码并将其应用于两个视频。因此，请帮助我让这些视频中的每一个都根据嵌入的代码播放它们各自的视频。

这是jsfiddle： http: [//jsfiddle.net/tJpBY/](http://jsfiddle.net/tJpBY/)，代码如下：

**HTML 代码：**

```
<div class="container">
    <div class="preview">
        <img class="thumb">
        <img class="play" src="https://s-static.ak.fbcdn.net/rsrc.php/v2/yG/r/Gj2ad6O09TZ.png">
    </div>
</div>
<div class="container">
    <div class="preview1">
        <img class="thumb1">
        <img class="play" src="https://s-static.ak.fbcdn.net/rsrc.php/v2/yG/r/Gj2ad6O09TZ.png">
    </div>
</div> 
```

**Javascript代码：**

```
var youtube_video_id = "Cgovv8jWETM";
var video_url = "http://youtube.com/watch?v=" + youtube_video_id;
var thumbnail_url = "http://img.youtube.com/vi/" + youtube_video_id + "/1.jpg";
var iframe_url = "http://www.youtube.com/embed/" + youtube_video_id + "?autoplay=1";
var api_url = "https://gdata.youtube.com/feeds/api/videos/" + youtube_video_id + "?  v=2&alt=json-in-script&callback=?";

$(function () {
    // Get video information and set the title.
    $.getJSON(api_url, function (data) {
        $(".info").html("<b><a href='" + video_url + "' target='_blank'>" + data.entry.title.$t + "</a></b>");
    });

    // Set the thumbnail image for the video.
    $(".preview img.thumb").attr("src", thumbnail_url);

    // Switch to the iframe when the image is clicked.
    $(".preview").click(function () {
        $(this).html("<iframe width='400' height='250' src='" + iframe_url + "' frameborder='0' allowfullscreen></iframe>");
        $(this).css("float", "none");
    });
});

var youtube_video_id1 = "rHtVc1asWCc";
var video_url = "http://youtube.com/watch?v=" + youtube_video_id1;
var thumbnail_url = "http://img.youtube.com/vi/" + youtube_video_id1 + "/1.jpg";
var iframe_url = "http://www.youtube.com/embed/" + youtube_video_id1 + "?autoplay=1";
var api_url = "https://gdata.youtube.com/feeds/api/videos/" + youtube_video_id1 + "? v=2&alt=json-in-script&callback=?";

$(function () {
    // Get video information and set the title.
    $.getJSON(api_url, function (data) {
        $(".info").html("<b><a href='" + video_url + "' target='_blank'>" + data.entry.title.$t + "</a></b>");
    });

    // Set the thumbnail image for the video.
    $(".preview img.thumb1").attr("src", thumbnail_url);

    // Switch to the iframe when the image is clicked.
    $(".preview").click(function () {
        $(this).html("<iframe width='400' height='250' src='" + iframe_url + "'  frameborder='0' allowfullscreen></iframe>");
        $(this).css("float", "none");
    });
}); 
```

它在 jsfiddle 上运行良好，但是当我在项目中导入相同的代码时，相同的视频会重复两次。所以请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:41:10.317

这是修复它的一种方法。

[http://jsfiddle.net/tJpBY/2/](http://jsfiddle.net/tJpBY/2/)

您基本上需要重命名`.preview`为`.preview1`.

`$('.preview')`将适用于两个视频（以及具有预览类的所有其他内容）。我还编辑了您的一些 css（添加了 preview1）并修复了您的格式错误的 html。

我重命名了比必要更多的东西，因此更容易复制粘贴，这看起来就像你一开始所做的那样。

# xml - Eclipse：如何使用 XML 提取 XSD？

> ID：14932101
> 
> 赞同：3
> 
> 时间：2013-02-18T08:27:01.473
> 
> 标签：xml, eclipse, xsd

有没有办法使用现有的 XML 实例文本在 Eclipse 内部生成 XSD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T09:34:16.187

在这个封闭的问题中：[如何在 Eclipse 中从 XML 文件生成 XSD？](https://stackoverflow.com/questions/9825028/xml-to-xsd-plugin) srini.venigalla
的第一条评论“ [http://code.google.com/p/xsd-gen ”对我帮助很大。](http://code.google.com/p/xsd-gen)
虽然它是一个**独立的罐子**。

# java - java中的无限fifo

> ID：14932104
> 
> 赞同：0
> 
> 时间：2013-02-18T08:27:14.013
> 
> 标签：java, multithreading, concurrency, fifo

我正在寻找一个线程安全的无限阻塞fifo，它由一个固定的缓冲区（如数组）支持。语义是多个读取器和写入器线程可以安全地访问它。如果缓冲区已满，写入程序会阻塞并覆盖最旧的项目。如果缓冲区为空，则读取器阻塞。当添加的总数和删除的总数的计数器围绕内部缓冲区大小一圈或多次时，必须保持 Fifo 排序。

有趣的是，我通常会寻找的地方（java 自己的并发集合、公共集合、番石榴）看不到对这种“明显”要求的即时答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:29:44.110

您实际上是在描述[ArrayBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)。

它是线程安全的，并且专为此目的而设计：

*   如果队列已满，写入者会等待空间可用
*   如果元素可用，读者可以等待指定的等待时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:29:52.967

听起来您正在寻找[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:31:55.180

[java.util.concurrent.ArrayBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)怎么样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T08:39:05.470

目前尚不清楚您是在寻找无限阻塞队列还是有界阻塞队列。

1.  有界阻塞队列：**java.util.concurrent.ArrayBlockingQueue**
2.  无限阻塞队列（仅受 RAM 约束）：**java.util.concurrent.LinkedBlockingQueue**

对于所有情况，我建议使用 ArrayBlockingQueue。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:35:12.403

对于*无限*`BlockingQueue`队列，您必须使用队列委托（也许）创建自己的实现接口的类`ArrayBlockingQueue`，当队列满时，调整大小，创建一个新的更大的委托。这应该是无限的，`MAX_INT`并且避免了链接队列所涉及的 GC 开销（需要为每个插入的对象创建节点）。如果需要，您也可以缩小委托。

# objective-c - 使用 iTunes 将 iPad 上的证书安装到钥匙串中

> ID：14932109
> 
> 赞同：1
> 
> 时间：2013-02-18T08:27:27.320
> 
> 标签：objective-c, ipad, certificate, itunes

我无法找到如何使用 iTunes（或在 mac os x 上运行的其他工具）在我的 iPad 上将证书安装到钥匙串的方法。

我需要能够设置组（`kSecAttrAccessGroup`例如`"XKFABCDEFGH.com.mycompany.myapp"`）来存储证书。由于有一系列证书，我将把它们全部安装到根证书。此外，最后一个（叶）证书将具有私有部分（不知道这是否有任何区别）。

另一种方法是编写一个小应用程序并将证书编译为它的资源。然后我可以使用 SecItemAdd / SecItemUpdate 来编写这些证书。这样做的缺点是我想在每台设备上安装不同的证书，所以我必须多次编译应用程序。

注意：该应用程序是 B2B，例如。不是公共 iTunes 市场的应用程序！

编辑：我想使用证书[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，我不要求 iOS 本身识别这些证书（除非它会与 ASIHTTPRequest 库发生冲突）。

# javascript - jquery stopPropagation（）并发送“事件”？

> ID：14932115
> 
> 赞同：0
> 
> 时间：2013-02-18T08:28:18.643
> 
> 标签：javascript, jquery

[**(jsbin)**](http://jsbin.com/imager/2/edit)

我创建了一个表，里面有一个按钮。

![在此处输入图像描述](../Images/bf7748a56e4b042007fb27b06ac23b2c.png)

表格有`onclick`事件，也有内部按钮

但是当我按下按钮时，事件会冒泡到桌子上。（我收到 2 个警报）

所以我用 `ev.stopPropagation();`

及其工作。但为了让它工作，我必须这样做：

在 html 中：

```
<input type='button' onclick='doWork(event);'/> 
```

在 Js 中：

```
function doWork(ev)
{
  ev.stopPropagation();
  alert('button');
} 
```

*   这是正确的方法吗？
*   **我必须**发送事件吗？我知道不同的浏览器使用不同的`event`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:33:36.110

IE 不需要传递事件对象，我们可以使用 window.event 访问它。[旧 IE 版本不支持 e.stopPropagation](http://help.dottoro.com/ljgfjsxd.php)。因此，出于跨浏览器兼容性的原因，您应该尝试以下操作：

```
function doWork(e)
{
    var evt = e || window.event;

    if (evt.stopPropagation) {
        evt.stopPropagation();
    }
    else {
        evt.cancelBubble = true;
    }

    alert('button');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:34:40.810

我看不出有什么问题，是的，您需要对事件进行参数化，以便您可以在事件处理程序中对其调用 stopPropagation()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:07:04.800

这是另一种[方式](http://jsbin.com/imager/10/)：

```
<table onclick="doWork();" border=2 style="width:70px;">

<input type='button' onclick='alert("button");'/>

function doWork(ev)
{
  ev = ev || window.event;
  var target = ev.target || ev.srcElement;
  if(target.tagName.toUpperCase() !== 'INPUT'){
    alert('table');
  }
} 
```

# batch-file - 用于限制任何管理员成员远程登录的批处理命令

> ID：14932118
> 
> 赞同：0
> 
> 时间：2013-02-18T08:28:36.770
> 
> 标签：batch-file

我想限制新/现有添加的用户表单远程登录，但同一用户是系统上 ADMIN 组的成员。

是否可能，如果，请告诉我命令行选项。我尝试使用 net localgroup "Remote Desktop Users" user_name /Delete 但由于用户是管理员成员，所以它似乎不起作用:(。

请建议我任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:32:32.800

作为替代方式，您可以使用 wmic ：

一次对多台机器执行并将列表保存为格式良好的 html 表（以及其他格式）：

```
wmic /node:@servers.txt /output:services.html service get caption /format:htable 
```

当然，除了名称/标题之外，您还可以查询更多属性。

# angularjs - 为什么 Watch 函数的 Angular Js 参数应该是范围变量？

> ID：14932119
> 
> 赞同：2
> 
> 时间：2013-02-18T08:28:42.730
> 
> 标签：angularjs

```
$scope.myFunc = function(privilege){ 

    $scope.check = function(privilege){
       return ...
    };  

    $scope.$watch('check(privilege)',function(val){
        ...
    }    
} 
```

我的特权变量在每次手表检查时都变得未定义（不能是）？为什么我应该定义它的范围变量或者我错过了Angular Js的任何东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:23:12.147

[$watch](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)方法的第一个参数（“watchExpression”）可以是一个 Angular 字符串表达式（根据 $scope 计算），也可以是一个以 $scope 作为第一个参数调用的函数。无法将`privilege`作为第一个参数传递给作为函数的 watchExpression。

如果您不想将`privilege`值存储在 $scope 上，您可以创建一个闭包。例如，请参阅[Vojta 的小提琴](http://jsfiddle.net/vojtajina/w39eL/)。另请参阅[https://groups.google.com/forum/#!msg/angular/UJRxn_Y0Dd4/9ha38PC3PCwJ](https://groups.google.com/forum/#!msg/angular/UJRxn_Y0Dd4/9ha38PC3PCwJ)

# ios - 使用 RestKit 0.2 发布对象时出现词法错误

> ID：14932128
> 
> 赞同：1
> 
> 时间：2013-02-18T08:29:02.013
> 
> 标签：ios, objective-c, json, restkit

我在使用 RestKit 0.2 做一个简单的帖子时遇到了一些问题。这就是我的代码的样子：

```
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromArray:@[@"title"]];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[Feed class] rootKeyPath:@""]

NSURL *baseURL = [NSURL URLWithString:@"http://some.url.com"];
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

[client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

[objectManager addRequestDescriptor:requestDescriptor];

Feed *feed = [[Feed alloc] init];
feed.title = @"SomeTitle";

[objectManager postObject:feed path:/feeds parameters:nil success:nil failure:nil]; 
```

当我运行上面的代码时，我得到以下日志：

```
request.headers={
    Accept = "application/json";
    "Accept-Language" = "sv, en, nl, fr, de, ja, it, es, pt, pt-PT, da, fi, nb, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8";
    "Content-Type" = "application/x-www-form-urlencoded; charset=utf-8";
    "User-Agent" = "appName/1.2 (iPhone; iOS 5.1.1; Scale/2.00)";
}
request.body=[title]=Foobar
2013-02-13 12:05:55.450 appName[3672:330f] T restkit.network:RKHTTPRequestOperation.m:177 POST 'some.url.com' (400 Bad Request) [0.5037 s]:
response.headers={
    Connection = "keep-alive";
    "Content-Length" = 99;
    "Content-Type" = "application/json; charset=utf-8";
    Date = "Wed, 13 Feb 2013 11:05:55 GMT";
    "Set-Cookie" = "cookieTextHere; domain=.some.domain.com; path=/; expires=Wed, 27-Feb-2013 11:05:55 GMT; HttpOnly";
    "X-Request-Id" = xxe131e73e638733519c44xxa6224aa3f2xx;
}
response.body={"title":"JSON Parser Error","errors":
"lexical error: invalid string in json text. [title]=Foobar"} 
```

REST 服务器需要 JSON 格式的帖子，但是当我查看上面的日志时，我看到请求的内容类型设置为“application/x-www-form-urlencoded”——这是导致问题的原因吗？我尝试使用

```
[client setDefaultHeader:@"Content-Type" value:RKMIMETypeJSON]; 
```

......但这没有用。

我已经使用 www.hurl.it 将原始 json 数据（如 {"title":"Foobar"} ）发布到 url，没有任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:07:24.470

布莱克沃特斯已回复[google 组的 restkit](https://groups.google.com/forum/?fromgroups=#!searchin/restkit/expected%2420content%2420type%7Csort%3adate/restkit/tZgNNF8jL8U/1ECc3CDtx2QJ)

以下是我的实现：

1.  来自 RKManagedObjectRequestOperation 的子类，如果你是 ManagedObject。

## EPObjectRequestOperation.h

```
#import <RestKit/RestKit.h>

@interface EPObjectRequestOperation : RKManagedObjectRequestOperation

@end 
```

## EPObjectRequestOperation.m

```
#import "EPObjectRequestOperation.h"

@interface EPObjectRequestOperation ()

@property (nonatomic, strong, readwrite) NSError *error;
@end

@implementation EPObjectRequestOperation

- (void) main
{
    [super main];
    if([self.HTTPRequestOperation hasAcceptableStatusCode] && self.error.code == -1016) {//Expected content type

        self.error = nil;
    }
}
@end 
```

2.在RKObjectManager上注册子类

```
[objectManager registerRequestOperationClass:[EPObjectRequestOperation class]]; 
```

# php - PHP：Foreach一个数组不会输出

> ID：14932129
> 
> 赞同：-1
> 
> 时间：2013-02-18T08:29:05.623
> 
> 标签：php, arrays, loops, foreach

当我转储变量时，它有一个数据：

> var_dump($result);
> 
> object(stdClass)#2 (5) { ["user_id"]=> string(1) "1" ["username"]=> string(6) "user_name" ["email"]=> string(14) " test@mail.com" ["password"]=> string(32) "password" ["test"]=> string(1) "1" }

但是当我使用 foreach 时，除非我只是 echo $data; 否则没有返回值。但我想具体到我想要获得的价值。

> foreach($result 为 $data){
> 
> 回声 $data->use_id;
> 
> 回显$数据->用户名；
> 
> }

为什么没有返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:31:39.343

您不需要遍历对象。就这样做吧。

```
echo $result->user_id;
echo $result->username; 
```

使用您提供的示例，您将每个属性`$result`视为一个对象并查找`user_id`和`user_name`（不存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:58:42.657

试试这个：`json_decode`将 json 字符串转换为数组。参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

```
$array  = json_decode($result, true);

echo "<pre>";
print_r($array); 
```

您可以使用 foreach 来回`$array`显结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:37:53.427

正如你所写：

> ```
> var_dump($result); 
> ```

```
object(stdClass)#2 (5) { ["user_id"]=> string(1) "1" ["username"]=> string(6) "user_name" ["email"]=> string(14) "test@mail.com" ["password"]=> string(32) "password" ["test"]=> string(1) "1" } 
```

所以结果是一个对象本身。因此，如果您想指定并获取确切的变量，则无需迭代它！

# php - 时间戳转换

> ID：14932130
> 
> 赞同：0
> 
> 时间：2013-02-18T08:29:07.880
> 
> 标签：php, mysql, datetime, timestamp

我有uploader.php，它将从.csv 到mysql 数据库的数千个数据。

我的场景是：在我上传 .csv 中的所有数据后，我会将其转换为 mysql 可读数据类型。问题是

任何想法如何将**18-Feb-13 6:19:41 PM**数据从 .csv 文件转换为 mysql 中的可读数据。

例如：**2013-02-18 18:19:41**

注意：我不希望从 mysql 中的可读格式编辑 excel 文件中的时间戳。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:34:07.187

您可以使用`DateTime::createFromFormat`：假设您的日期在 col 1 中名为 CSV 的变量中：

```
$date = DateTime::createFromFormat('d-M-y G:i:s A',$csv[1]);
$query = "INSERT INTO yourtable(yourdate) VALUES(".$date->format('Y-m-d h:i:s').")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:31:34.110

尝试这个

```
$dat="18-Feb-13 6:19:41 PM";
echo date("Y-m-d H:i:s",strtotime($dat)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:32:13.070

尝试

```
$timestamp = strtotime($csv_date); 
```

在 PHP 中，然后在 mysql 查询中，您可以执行以下操作：

```
... FROM_UNIXTIME(' . $timestamp . ') ... 
```

# mod-rewrite - 导致 500 服务器错误的重写规则

> ID：14932133
> 
> 赞同：0
> 
> 时间：2013-02-18T08:29:26.113
> 
> 标签：mod-rewrite

我正在学习如何修改重写 URL，在我的根文件夹中有这个 .htaccess 文件后遇到了 500 服务器错误：

```
RewriteEngine On

RewriteRule ^([^/]*)$ /a.php?a=$1 [L] 
```

如果有人能告诉我我错了哪一部分，那就太好了，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:06:59.893

至少包括所有基本指令和一个防止循环的条件。像这样：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
# Prevent loops
RewriteCond %{REQUEST_URI}  !a\.php  [NC]
RewriteRule ^([^/]*)/?  a.php?a=$1   [L] 
```

也许这就是您所需要的，尽管我没有对其进行测试，因为没有传入 URL 的示例是不可能的，而问题中缺少该示例。

# python - Tkinter Python在画布的列表框中管理滚动条

> ID：14932134
> 
> 赞同：0
> 
> 时间：2013-02-18T08:29:27.080
> 
> 标签：python, listbox, tkinter, scrollbar

我得到了下面的代码，其中包含画布内的列表框，我试图将滚动条仅放在列表框内，但我得到的是滚动条始终设置在整个表单上。你能帮我把滚动条放在列表框中，而不是放在整个画布上。

```
def __init__(self):
    self.form = Tk()
    self.form.title("Admin");
    self.form.geometry('608x620+400+50')
    self.form.option_add("*font",("Monotype Corsiva",13))
    self.form.overrideredirect(True)
    self.form.resizable(width=FALSE, height=FALSE)
    self.canvas = Canvas(self.form)
    self.canvas.pack(expand=YES,fill=BOTH)
    self.photo = PhotoImage(file='src/back3.gif')
    self.canvas.create_image(-7,-8,image=self.photo,anchor=NW)

    self.scrollbar = tk.Scrollbar(self.canvas, orient="vertical")
    self.lb = tk.Listbox(self.canvas, width=78, height=15,yscrollcommand=self.scrollbar.set)
    self.lb.place(relx=0.04,rely=0.17)
    self.scrollbar.config(command=self.lb.yview)
    self.scrollbar.pack(side="right", fill="none") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:58:21.543

我建议你创建一个`Frame`来包装`Listbox`和`Scrollbar`. 这是我写的一个类来做同样的事情，它不完全符合你的代码——我用`grid()`的是`pack()`——，但你明白了。

```
class ScrollableListbox(tk.Listbox):
    def __init__(self, master, *arg, **key):
        self.frame = tk.Frame(master)
        self.yscroll = tk.Scrollbar(self.frame, orient=tk.VERTICAL)
        tk.Listbox.__init__(self, self.frame, yscrollcommand=self.yscroll.set, *arg, **key)
        self.yscroll['command'] = self.yview

    def grid(self, *arg, **key):
        self.frame.grid(*arg, **key)
        tk.Listbox.grid(self, row=0, column=0, sticky='nswe')
        self.yscroll.grid(row=0, column=1, sticky='ns') 
```

# java - 使休眠反引号所有表/列名

> ID：14932136
> 
> 赞同：18
> 
> 时间：2013-02-18T08:29:37.927
> 
> 标签：java, mysql, hibernate, escaping

我面临着为使用 MySQL 5.0 而编写的遗留系统，现在需要将其迁移到 MySQL 5.5（要求）。我发现有一列名为`maxvalue`，这似乎是 MySQL 5.5 中的系统字。因此，我所有包含此列的 Hibernate 查询都会给出语法错误：

> 原因：java.sql.BatchUpdateException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'maxvalue 附近使用的正确语法

似乎 Hibernate 不会自动反引号 ` 围绕字段名称。如果我提取查询，反引号``maxvalue``它在 MySQL 5.5 中正确运行。

我找到了如何为特定字段/表显式强制反引号的[解决方案。](http://www.mkyong.com/hibernate/how-to-use-database-reserved-keyword-in-hibernate/)问题是我不确定有多少其他列名会产生这样的问题。**有没有办法告诉 Hibernate 自动反引号所有表/列名？**（这将产生有效的 SQL，我不知道为什么它在默认情况下对 MySQL 不这样做）。

**编辑**：[这个讨论](https://forum.hibernate.org/viewtopic.php?p=2400843)几乎让我相信我想要的东西是不可能的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-18T19:15:07.047

为此目的，有一个[未记录的财产。](https://hibernate.atlassian.net/browse/HHH-5673)采用，

```
<property name="hibernate.globally_quoted_identifiers" value="true"/> 
```

或者

```
<property name="hibernate.globally_quoted_identifiers">true</property> 
```

# java - 从 JNI 返回状态信息到 JAVA

> ID：14932137
> 
> 赞同：0
> 
> 时间：2013-02-18T08:29:38.243
> 
> 标签：java, c, java-native-interface

我正在从我的 JAVA 应用程序中调用一个长期运行的 JNI 方法。JNI 方法做了几件事，我想在每一步之后得到一个状态消息。

我有这个 JNI 片段：

```
JNIEXPORT void JNICALL Java_my_package_Engine_start(JNIEnv * env, jclass class, jstring address, jstring file) {
    longRunningMethod1();
    // notify java that method 1 is finished

    longRunningMethod2();
    // notify java that method 2 is finished

    longRunningMethod3();    
} 
```

我以这种方式调用该方法：

```
Engine.start(param1, param2); 
```

此方法会一直阻塞，直到 JNI 中的所有内容都完成 - 没关系，但现在我想获取并处理状态信息。

也许像 puts() 这样的东西会有所帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:28:56.080

通知 Java 端的一种方法是调用方法。

对于可重用的解决方案，将通知定义为接口中的方法。修改本机方法，使其接受实现接口的对象作为参数。当需要通知 Java 方面发生了有趣的事情时，请在该对象上调用适当的方法。

如果你关心设计模式，这基本上就是[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:18.397

我按照“Andreas Grapentin”提到的那样做：

> 您不能将您的 JNI 方法拆分为多个较小的方法并处理应用程序中调用之间更新的进度吗？

这里真的没问题，就像一个魅力。谢谢！

# maven - Bamboo 在我的 Spring 项目中无法识别测试

> ID：14932139
> 
> 赞同：5
> 
> 时间：2013-02-18T08:29:45.197
> 
> 标签：maven, testing, junit, bamboo

我有一个托管在 BitBucket 上的 Spring 项目（Apache CXF、Spring、Hibernate、Maven ...），我正在尝试使用 Bamboo 作为我的 CI 服务器。我的想法是从 Bamboo 将代码直接部署到 Heroku，这样部署时间就会自动化。

我制定了一个计划，其中包含几项任务来实现这一目标。首先，我有一个 Source Code Checkout 任务和一个 builder 任务。他们都在工作，代码正在编译并且测试正在通过，我可以在任务日志中看到。问题是 Bamboo 似乎无法识别测试（它标志着该任务是无测试的）。

我还尝试创建一个新的 JUnit 测试任务，结果更糟。日志显示一切正常，但 Bamboo 在执行测试任务后将计划标记为失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:15:39.980

不确定您使用的是哪个版本的 Bamboo，但在我们拥有的版本中，您必须在`Builder`选项卡上打开单元测试结果评估。请查看随附的屏幕截图，并确保已启用此功能，并且目录设置指向 Maven Surefire 创建测试结果的目录（XML 格式）。 ![在此处输入图像描述](../Images/6f4d9e4bdc03d6c8025a4afc7d085030.png)

# markdown - 新帖子中的 Octopress 大写字母

> ID：14932141
> 
> 赞同：3
> 
> 时间：2013-02-18T08:29:46.133
> 
> 标签：markdown, jekyll, octopress

今天我更新了我的 Octopress 博客，当我运行时：

```
rake new_post["This is a test of title"] 
```

它在 source/_post/2013-02-18-this-is-a-test-of-title.markdown 中创建我的降价文件，然后我运行：

```
rake generate 
```

和

```
rake preview 
```

帖子现在有了标题

```
This Is A Test Of Title 
```

我查看了降价的来源并发现

```
...
title: "This is a test of title"
... 
```

所以降价很好。同样在网页中，我使用 Chrome 的开发人员工具来查看 css 属性是否具有“大写”的值，但它没有，锚看起来像这样

```
<a href="...">This Is A Test of Title</a> 
```

所以看起来大写的问题来自框架。

在 imathis/octopress repostory [https://github.com/imathis/octopress/issues/202](https://github.com/imathis/octopress/issues/202)的 wiki 中，似乎有些用其他语言发帖的人不喜欢这个“功能”，甚至在 Rakefile 中，imathis 删除了这一行：

```
post.puts "title: \"#{title.gsub(/&/,'&amp;').titlecase}\"" 
```

对于这个：

```
post.puts "title: \"#{title.gsub(/&/,'&amp;')}\"" 
```

对于那个提交，所以我打开我的 Rakefile，它有最后一行，所以我的文件是最新的，但显然问题仍然存在

知道如何在帖子标题中避免这种行为吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T17:05:42.800

在您的 _config.yml 中，找到该行

```
titlecase: true       # Converts page and post titles to titlecase 
```

并将其设置为假。

[有关titlecase](http://daringfireball.net/2008/05/title_case)的更多信息。你也可以看看`plugins/titlecase.rb`它是如何工作的。

# sql - 如何使某些标记为“历史”的 Oracle 表行不可见/不可用？

> ID：14932143
> 
> 赞同：2
> 
> 时间：2013-02-18T08:29:53.240
> 
> 标签：sql, database, oracle

我有一个庞大的现有订单管理应用程序。

现在，在主 ORDER 表中，我添加了一个新列：IS_HISTORICAL。如果其值为：TRUE，则表示订单现在是历史订单，不应显示在应用程序中。

现在，我必须在现有应用程序中修改许多 SQL 查询，以便它们只选择那些 IS_HISTORICAL 为“FALSE”的订单 - 即在 WHERE 子句中添加以下内容：

```
 AND IS_HISTORICAL='FALSE' 
```

**问题：** *有没有更简单的方法——这样我就不必修改这么多应用程序查询（隐藏历史订单）？
基本上所有标记为 IS_HISTORICAL='TRUE' 的订单都应该变得不可见/不可用于读取/更新！！*

***注意：***目前表大小不是很大，但最终我打算通过 IS_HISTORICAL true/false 对表进行分区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:52:27.547

如果您只想使用历史数据进行分析，那么我更喜欢 Florin 的解决方案，因为您需要为每个查询查看的数据量仍然较小。它使分析查询更加困难，因为您需要 UNION ALL 但其他一切都会“更快”运行（可能不明显）。

如果某些应用程序/用户需要访问历史数据，更好的解决方案是重命名您的表并使用您需要的查询在其之上创建一个视图。

重写所有查询的问题在于，您现在或将来都会忘记一个或得到一个不正确的查询。视图为您消除了该问题，因为查询是静态的，每次查询视图时，都会自动添加所需的附加条件。

就像是：

```
rename orders to order_history;

create or replace view orders as
  select *
    from order_history
   where is_historical = 'FALSE'; 
```

还有两点。

1.  我不会打扰`TRUE`/ `FALSE`，如果表变大，需要扫描很多额外的数据。将您的列创建为 VARCHAR2(1) 并使用`T`/`F`或`Y`/ `N`，它们很明显但更小。或者使用 NUMBER(1,0) 和`1`/ `0`。
2.  不要忘记对您的表施加约束，以便 IS_HISTORICAL 列只能具有您选择的值。

    如果您只想拥有这两个值，那么您可能需要考虑使用[CHECK CONSTRAINT](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1660)：

    ```
    alter table order_history 
      add constraint chk_order_history_historical
    check ( is_historical in ('T','F') ); 
    ```

    否则，也许你应该这样做，使用[FOREIGN KEY CONSTRAINT](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1649)。定义一个额外的表，ORDER_HISTORY_TYPES

    ```
    create table order_history_types ( 
         id varchar2(1)
       , description varchar2(4000)
       , constraint pk_order_history_types primary key (id)
         ); 
    ```

    用您的值填充它，然后添加外键：

    ```
    alter table order_history 
       add constraint fk_order_history_historical
    foreign key (is_historical)
    references order_history_types (id) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:03:45.937

您可以考虑使用[Virtual Private Database/row-level security](http://docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm)。这可用于在`is_historical = 'FALSE'`满足某些条件时自动添加谓词（例如，您作为应用程序用户连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:41:03.583

如果用户只需要非历史记录，一个选项是创建一个 ORDER_HIST 表并将历史记录移到那里。（删除并插入）

如果某些用户/应用程序需要这两种类型的记录，那么分区方法是最好的。

# c# - 尝试反序列化参数时客户端出现 InvalidOperationException。WCF DataContractSerializer

> ID：14932146
> 
> 赞同：2
> 
> 时间：2013-02-18T08:30:00.003
> 
> 标签：c#, .net, wcf

我很难摆脱这个异常。不好的是，它不会一直发生。不过，我经常在我的 XP 机器上得到它。我似乎在谷歌上找不到任何关于此的内容，我也不知道应该在哪里查找错误。我们正在使用 nettcpbinding 和 wcf datacontractserializer。

任何帮助将不胜感激。

这是调用我的 WCF 服务的方法时引发的完整异常：

```
2013-02-18 08:35:04.6718 Service 2080 => Error while calling service System.InvalidOperationException: There was an error while trying to deserialize parameter http://mydomain/product/Machine:GetBaysResult.  Please see InnerException for more details. ---> System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalGetSatelliteAssembly(String name, CultureInfo culture, Version version, Boolean throwOnFileNotFound, StackCrawlMark& stackMark)
   at System.Resources.ManifestBasedResourceGroveler.GetSatelliteAssembly(CultureInfo lookForCulture, StackCrawlMark& stackMark)
   at System.Resources.ManifestBasedResourceGroveler.GrovelForResourceSet(CultureInfo culture, Dictionary`2 localResourceSets, Boolean tryParents, Boolean createIfNotExists, StackCrawlMark& stackMark)
   at System.Resources.ResourceManager.InternalGetResourceSet(CultureInfo requestedCulture, Boolean createIfNotExists, Boolean tryParents, StackCrawlMark& stackMark)
   at System.Resources.ResourceManager.InternalGetResourceSet(CultureInfo culture, Boolean createIfNotExists, Boolean tryParents)
   at System.Resources.ResourceManager.GetString(String name, CultureInfo culture)
   at System.Runtime.Serialization.SR.GetString(String name, Object[] args)
   at System.Runtime.Serialization.XmlFormatReaderGenerator.CriticalHelper.ReadValue(Type type, String name, String ns)
   at System.Runtime.Serialization.XmlFormatReaderGenerator.CriticalHelper.ReadMembers(ClassDataContract classContract, Boolean[] requiredMembers, Label[] memberLabels, LocalBuilder memberIndexLocal, LocalBuilder requiredIndexLocal)
   at System.Runtime.Serialization.XmlFormatReaderGenerator.CriticalHelper.ReadMembers(ClassDataContract classContract, LocalBuilder extensionDataLocal)
   at System.Runtime.Serialization.XmlFormatReaderGenerator.CriticalHelper.ReadClass(ClassDataContract classContract)
   at System.Runtime.Serialization.XmlFormatReaderGenerator.CriticalHelper.GenerateClassReader(ClassDataContract classContract)
   at System.Runtime.Serialization.ClassDataContract.get_XmlFormatReaderDelegate()
   at System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 id, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
   at ReadArrayOfBayInfoFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString , XmlDictionaryString , CollectionDataContract )
   at System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
   at System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, DataContract dataContract, String name, String ns)
   at System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.ReadObject(XmlDictionaryReader reader, Boolean verifyObjectName)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameter(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)
   at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Iproduct.GetBays(Guid sessionId)
   at product.Service.Client.productClient.<>c__DisplayClass1d.<GetBays>b__1c()
   at product.Service.Client.productClient.Invoke[T](Func`1 func) 
```

我从 ServiceModel 获得的跟踪也没有真正的帮助：

```
<ExceptionType>System.InvalidOperationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Collection was modified; enumeration operation may not execute.</Message>
<StackTrace>
at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
at System.Reflection.RuntimeAssembly.InternalGetSatelliteAssembly(String name, CultureInfo culture, Version version, Boolean throwOnFileNotFound, StackCrawlMark&amp; stackMark)
at System.Resources.ManifestBasedResourceGroveler.GetSatelliteAssembly(CultureInfo lookForCulture, StackCrawlMark&amp; stackMark)
at System.Resources.ManifestBasedResourceGroveler.GrovelForResourceSet(CultureInfo culture, Dictionary`2 localResourceSets, Boolean tryParents, Boolean createIfNotExists, StackCrawlMark&amp; stackMark)
at System.Resources.ResourceManager.InternalGetResourceSet(CultureInfo requestedCulture, Boolean createIfNotExists, Boolean tryParents, StackCrawlMark&amp; stackMark)
at System.Resources.ResourceManager.InternalGetResourceSet(CultureInfo culture, Boolean createIfNotExists, Boolean tryParents)
at System.Resources.ResourceManager.GetString(String name, CultureInfo culture)
at System.ServiceModel.SR.GetString(String name, Object[] args)
at System.ServiceModel.Channels.ClientDuplexConnectionReader.CreateProcessActionActivity()
at System.ServiceModel.Channels.ClientDuplexConnectionReader.DecodeMessage(Byte[] buffer, Int32&amp; offset, Int32&amp; size, Boolean&amp; isAtEOF, TimeSpan timeout)
at System.ServiceModel.Channels.SessionConnectionReader.DecodeMessage(TimeSpan timeout)
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
</StackTrace> 
```

# git - 在 Github 的拉取请求中合并一些提交

> ID：14932150
> 
> 赞同：3
> 
> 时间：2013-02-18T08:30:18.637
> 
> 标签：git, version-control, github, pull-request

我在 Github 上创建了一个拉取请求。我在拉取请求中有 2 个提交。如何（如果可能）仅合并第一个提交，然后为第二个提交创建第二个拉取请求。

例如：我有一个提交 A 和 B 的拉取请求（按此顺序。B 是最新提交）。我只想将 A 与一个拉取请求合并，然后创建一个单独的拉取请求来合并 B。如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:53:26.560

人 A 有 repo A。人 B 将 repo A 分叉到 repo B 以修复问题 42。人 B 在 repo B 上创建分支 issue42，破解问题并提交它。人 B 在 repo A 上为分支 bug42 创建一个拉取请求。

现在，A 看到拉取请求包含两个提交 C1 和 C2，并决定他们只想要 C1。

在这里，正确的做法是让 A 要求 B 修改他们的拉取请求，使其只包含 C1。这正确地保留了历史。所以B人可以做类似的事情

```
git branch bug42_c1 bug42^ # create new branch bug42_c1 on the ancestor of the tip of branch bug42 
```

现在，B 可以提交分支 bug42_c1 的拉取请求。

希望这是对您问题的正确理解。如果不是，请考虑查看我的答案并查看如何改写您的问题以提高清晰度。

# ruby-on-rails - 防止 rspec 尝试连 接到 mongoid

> ID：14932151
> 
> 赞同：3
> 
> 时间：2013-02-18T08:30:19.170
> 
> 标签：ruby-on-rails, rspec, mongoid

我在 mongoid.yml 文件中使用 mongoid 作为我的数据库来运行 rails。

问题是每次我运行 rspec 它都会尝试连接到 mongodb 后端。

我想停止这种行为并在我的测试中使用模拟。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:18:06.470

对于 rspec 中的单元测试，如果您对模型对象进行 Mongoid 持久性调用，则需要将这些持久性调用替换为对模拟/存根库的调用。例如，[factory-girl](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)提供模型对象的模拟实现，然后您可以通过调用非持久性方法在单元测试中使用它...

```
person = FactoryGirl.build(:person)
person.should be_a_kind_of Person 
```

避免调用持久化到测试数据库的方法，例如“FactorGirl.create”

# c++ - 将代码在mingw中的编辑控件

> ID：14932152
> 
> 赞同：-1
> 
> 时间：2013-02-18T08:30:21.063
> 
> 标签：c++, mingw

如何使用 Mingw 创建编辑控件对象（Cedit 类）？我读过 msdn 确实使用过“afxwin.h”，但在 MinGw 编译器中找不到。是您显示的代码一样好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:44:56.360

afxwin.h 头文件是 MFC 框架的一部分。没有人想出它的 MinGW 版本。所以不，你不能将它与 MinGW 一起使用。请注意，即使可以，您仍然需要购买 MFC 附带的 Visual Studio 版本，以获得允许您使用 MFC 的许可证。

如果我是你，我会研究其他 GUI 框架。例如[Qt](http://qt-project.org/)（一开始就比 MFC 好得多；MFC 是一个大多数人不再使用的遗留框架。）

# javascript - 点击查看附加的html

> ID：14932154
> 
> 赞同：1
> 
> 时间：2013-02-18T08:30:35.163
> 
> 标签：javascript, jquery, html

我有这样的html：

```
<a class="link">text</a>
<div class="items"></div>

(function($) {

  var link = $('.link');
  link.click(function(){
    alert('it works!');
  });

  $('.items').each(function() {
    var items = $(this),
        item = $('<div>something inside</div>');

    items.append(item);
    item.click(link.click());
  });

})(jQuery); 
```

我正在尝试`click`为附加的`item`. 所以当我们点击时`item`，`link`应该会启动。

但是我从 jQuery 内部的某个地方得到一个错误`Uncaught TypeError: Object [object Object] has no method 'apply'`。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:34:04.503

您需要`event delegation`动态添加的元素：

```
items.on('click', item, function(){
     link.click();
}); 
```

## 试用小提琴：http: [//jsfiddle.net/qQLLL/](http://jsfiddle.net/qQLLL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:37:38.747

也许你应该试试。像这样：

```
function myClick(){
  alert('it works!');
}

$(".link").click(myClick);

$('.items').each(function() {
  var items = $(this),
      item = $('<div>something inside</div>');

  items.append(item);
  item.click(myClick);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T08:40:06.610

尝试事件委托

```
 items.on('click', item, function(){
    link.click();
 }); 
```

如果您想了解有关事件委托的更多信息， 请通过[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T08:42:53.483

试试这个

```
(function($) {
    var handleClick = function() {
        alert('it works!');
    };
    $('.link').click(handleClick);
    $('<div>something inside</div>').appendTo('.items').click(handleClick);
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T08:39:42.227

你的错误是：

```
item.click(link.click); 
```

应该

```
item.click(function(){ link.click() }); 
```

# ejb - 运行简单的 MDB 应用程序时出错

> ID：14932156
> 
> 赞同：1
> 
> 时间：2013-02-18T08:30:38.537
> 
> 标签：ejb, glassfish-3

我正在尝试运行以下程序。我正在使用 glassfish 服务器 3.1.2 来启用此 MDB 运行。然后我也无法运行它。

```
package com.mdb;

import javax.jms.ConnectionFactory;
import javax.jms.Queue;
import javax.jms.Connection;
import javax.jms.Session;
import javax.jms.QueueBrowser;
import javax.jms.Message;
import javax.jms.JMSException;
import javax.annotation.Resource;
import java.util.Enumeration;

import javax.ejb.Stateless;
/**
 * The MessageBrowser class inspects a queue and displays the messages it
 * holds.
 */
@Stateless
public class MessageClient {
    @Resource(mappedName = "jms/ConnectionFactory")
    private static ConnectionFactory connectionFactory;
    @Resource(mappedName = "jms/Queue")
    private static Queue queue;

    /**
     * Main method.
     *
     * @param args     the queue used by the example
     */
    public static void main(String[] args) {
        Connection connection = null;

        try {
            System.out.println("1");
            connection = connectionFactory.createConnection();
            System.out.println("2");
            Session session = connection.createSession(
                        false,
                        Session.AUTO_ACKNOWLEDGE);
            QueueBrowser browser = session.createBrowser(queue);
            Enumeration msgs = browser.getEnumeration();

            if (!msgs.hasMoreElements()) {
                System.out.println("No messages in queue");
            } else {
                while (msgs.hasMoreElements()) {
                    Message tempMsg = (Message) msgs.nextElement();
                    System.out.println("Message: " + tempMsg);
                }
            }
        } catch (JMSException e) {
            System.err.println("Exception occurred: " + e.toString());
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                } catch (JMSException e) {
                }
            }
        }
    }
} 
```

问题是我在运行它时遇到了以下异常。

```
Exception in thread "main" java.lang.NullPointerException
    at com.mdb.MessageClient.main(MessageClient.java:35) 
```

这里可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:33:32.797

您所构建的不是 MDB。它是一个浏览队列的无状态会话 bean。

MDB 具有@MessageDriven 注释。每当有消息进来时都会调用它。

除此之外，您可能希望使用“lookup”属性而不是“mappedName”属性。后者来自远古时代，当时人们还不确定任何事情，需要临时破解才能使事情神奇地工作。

您在无状态 bean 中使用静态字段和静态 main 方法根本没有任何意义。如果您通过该 main 方法访问您的 bean，那么您根本没有使用该 bean，而您只是在调用一个孤立的类似全局的方法。如果有的话，这可能是您的 NPE 的来源。

修复并不简单。您似乎完全混淆了 Java EE 和 Java SE，以及实例和静态方法。

# c3p0 - 带有 c3p0 的 jdbcTemplate 挂起

> ID：14932158
> 
> 赞同：1
> 
> 时间：2013-02-18T08:31:11.370
> 
> 标签：c3p0, jdbctemplate, apache-commons-dbcp

我有一个非常简单的测试，它适用于 dbcp 连接池并且永远挂起 c3p0 (0.9.2)。

```
 private String query="select ROWID from SOMETABLE "  +
            " where  rownum <= 100 for update skip locked";
private String deleteQuery = "delete from SOMETABLE where ROWID = ?";

public void retrieve() throws Exception {
    while (retrieveChunk() > 0){
        //do nothing
    }
}

@Transactional
private int retrieveChunk(){

    final List<Object[]> delPar = new ArrayList<Object[]>(100);
    template.query(query, new RowCallbackHandler() {
        public void processRow(ResultSet rs) throws SQLException {
            String rowid = rs.getString(1);
            delPar.add(new String[]{rowid});
        }
    });
    template.batchUpdate(deleteQuery, delPar);
    return delPar.size();
} 
```

春天上下文：

```
 <bean id="connPool" class="com.mchange.v2.c3p0.ComboPooledDataSource"
      destroy-method="close">
    <property name="user" value="**"/>
    <property name="password" value="**"/>
    <property name="driverClass" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="jdbcUrl" value="jdbc:oracle:thin:@****"/>
    <property name="initialPoolSize" value="0"/>
    <property name="maxPoolSize" value="10"/>
    <property name="minPoolSize" value="1"/>
    <property name="acquireIncrement" value="1"/>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg>
        <ref bean="connPool"/>
    </constructor-arg>
</bean> 
```

c3p0 配置有什么问题？

更新 - log4j 输出：

```
12:17:18,449 DEBUG JdbcTemplate:435 - Executing SQL query [select ROWID from SOMETABLE  where  rownum <= 100 for update skip locked] 
```

12:17:18,465 DEBUG DataSourceUtils:110 - 从 DataSource 获取 JDBC 连接
12:17:18,809 DEBUG DataSourceUtils:327 - 返回到 DataSource 的 JDBC 连接
12:17:18,809 DEBUG JdbcTemplate:881 - 执行 SQL 批量更新 [从 SOMETABLE 中删除 ROWID = ?]
12:17:18,824 DEBUG JdbcTemplate:570 - 执行准备好的 SQL 语句 [从 SOMETABLE 中删除，其中 ROWID = ?]
12:17:18,824 DEBUG DataSourceUtils:110 - 从 DataSource 获取 JDBC 连接
12:17:18,887 DEBUG JdbcUtils:362 - JDBC 驱动程序支持批量更新
12:17:18,902 DEBUG DataSourceUtils:327 - 返回 JDBC 连接到数据源
12:17:18,902 INFO PlainJdbcTableRetriever:36 - JdbcTemplateRetriever 检索开始
12:17:18,902 调试 JdbcTemplate:435 - 执行 SQL 查询 [从 SOMETABLE 中选择 ROWID，其中 rownum <= 100 用于更新跳过锁定]
12:17:18,902 调试 DataSourceUtils:110 - 从数据源获取 JDBC 连接
12:17:18,934 调试 DataSourceUtils ：327 - 返回到数据源的 JDBC 连接
12:17:18,934 调试 JdbcTemplate:881 - 执行 SQL 批量更新 [从 SOMETABLE 中删除，其中 ROWID = ？]
12:17:18,934 调试 JdbcTemplate:570 - 执行准备好的 SQL 语句 [从 SOMETABLE 中删除ROWID = ?]
12:17:18,934 DEBUG DataSourceUtils:110 - 从 DataSource 获取 JDBC 连接
12:17:18,934 DEBUG JdbcUtils:362 - JDBC 驱动程序支持批量更新
12:17:18,934 DEBUG DataSourceUtils:327 - 返回到 DataSource 的 JDBC 连接
12:17:18,934 调试 JdbcTemplate:435 - 执行 SQL 查询 [从 SOMETABLE 中选择 ROWID，其中 rownum <= 100 用于更新跳过锁定]
12:17:18,934 调试 DataSourceUtils:110 - 从数据源获取 JDBC 连接
12:17:18,981 调试 DataSourceUtils ：327 - 返回到数据源的 JDBC 连接
12:17:18,981 调试 JdbcTemplate:881 - 执行 SQL 批量更新 [从 SOMETABLE 中删除，其中 ROWID = ？]
12:17:18,981 调试 JdbcTemplate:570 - 执行准备好的 SQL 语句 [从 SOMETABLE 中删除ROWID = ?]
12:17:18,981 DEBUG DataSourceUtils:110 - 从 DataSource 获取 JDBC 连接
12:17:18,981 DEBUG JdbcUtils:362 - JDBC 驱动程序支持批量更新
12:17:18,996 DEBUG DataSourceUtils:327 - 返回到 DataSource 的 JDBC 连接
12:17:18,996 调试 JdbcTemplate:435 - 执行 SQL 查询 [从 SOMETABLE 中选择 ROWID，其中 rownum <= 100 用于更新跳过锁定]
12:17:18,996 调试 DataSourceUtils:110 - 从数据源获取 JDBC 连接
12:17:19,012 调试 DataSourceUtils ：327 - 返回到数据源的 JDBC 连接
12:17:19,012 调试 JdbcTemplate:881 - 执行 SQL 批量更新 [从 SOMETABLE 中删除，其中 ROWID = ？]
12:17:19,012 调试 JdbcTemplate:570 - 执行准备好的 SQL 语句 [从 SOMETABLE 中删除ROWID = ?]
12:17:19,012 DEBUG DataSourceUtils:110 - 从 DataSource 获取 JDBC 连接
12:17:19,012 DEBUG JdbcUtils:362 - JDBC 驱动程序支持批量更新

# cocoa-touch - iOS - 如何检测哪个按钮触发了 segue，以及如何根据按钮显示其内容

> ID：14932162
> 
> 赞同：3
> 
> 时间：2013-02-18T08:31:19.983
> 
> 标签：cocoa-touch, uibutton, segue

我的问题是我有一个内部包含不同按钮的视图：所有按钮都连接到同一个 segue（这是出于特殊原因，我知道制作不同的 segue 会更容易，但这就是我现在需要的）。

如何检测哪个按钮启动了我的新 segue，以及如何根据该决定更改新 segue 上的数据？（例如，我的新 segue 在 imageview 中，应该为每个按钮加载不同的图像）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:59:01.780

在 method`-prepareForSegue:sender:`中，在 sender 参数中，您可以引用启动 segue 的控件，例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"yourIdentifier"]) {
        UIButton *senderButton = (UIButton *)sender;
        // do what ever you need with the button and segue
    }
} 
```

# avahi - 需要 mDNS 响应以使用子类型进行服务发现

> ID：14932167
> 
> 赞同：0
> 
> 时间：2013-02-18T08:31:36.577
> 
> 标签：avahi

我正在尝试基于子类型进行服务发现。

例如，我正在运行 avahi-publish -s --domain=local --subtype="_ann._sub._http._tcp" "serviceName" "_http._tcp" 5353 "text Record"。

现在我正在查询子类型 ex：AT+MDNSSD=_ann,_sub,_http,_tcp,local。

但是来自 avahi-publish 的响应不包含子类型。我收到名称为“serviceNaem._http._tcp.local”的响应消息。

任何人都可以告诉我如何使用 avahi-publish 注册服务，以便我可以在资源记录中获得“serviceName._ann._sub._http._tcp.local”的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-08T14:18:46.360

您可以使用`<subtype></subtype>`服务文件中的元素注册子类型（请参阅**avahi.service 手册页** [https://linux.die.net/man/5/avahi.service](https://linux.die.net/man/5/avahi.service)）。

以下示例适用于我：

```
<service>
    <type>_http._tcp</type>
    <subtype>_ann._sub._http._tcp</subtype>
    <name>MyService</name>
    <port>12345</port>
<service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T23:02:41.823

avahi-browse 没有明确列出子类型。但是，如果您知道要查找的内容，则可以对其进行过滤：

```
[localhost]$ avahi-publish -s --subtype=_ann._sub._http._tcp  serviceName _http._tcp 5353 &
[1] 3012

[localhost]$ avahi-browse -t _http._tcp
+ eth0 IPv4 serviceName                                   Web Site             local
[localhost]$ avahi-browse -t _ann._sub._http._tcp
+ eth0 IPv4 serviceName                                   Web Site             local

[localhost]$ kill 3012 
```

如果您不发布子类型，则对其进行过滤将不会返回任何内容：

```
[localhost]$ avahi-publish -s serviceName _http._tcp 5353 &
[1] 3026

[localhost]$ avahi-browse -t _http._tcp
+ eth0 IPv4 serviceName                                   Web Site             local
[localhost]$ avahi-browse -t _ann._sub._http._tcp

[localhost]$ kill 3026 
```

如果您使用 [wire|t]shark 查看流量，过滤端口 5353，您会看到您的子类型在 DNS 查询中作为 PTR 记录返回。

# java - 从许多表中选择 count(*)

> ID：14932174
> 
> 赞同：3
> 
> 时间：2013-02-18T08:32:10.077
> 
> 标签：java, mysql, sql, hibernate

亲爱的朋友们，我需要从一张具有不同标准的表中获取计数（*）。我正在使用带有spring的hibernate。我正在使用下面的查询。

```
"select  " +
            "(select count(*)  from enquiry  where business_id="+busid+")  AS allEnqCount,"+
    "(select count(*)  from enquiry where status='"+Constants.ENQ_FALLOWUP+"' and us.business_id="+busid+")  AS followupCount," +
    "(select count(*)  from enquiry where status='"+Constants.ENQ_SITE_VISIT+"'and us.business_id="+busid+")  AS siteVisitCount ," +
    "(select count(*)  from enquiry where status='"+Constants.ENQ_CUST_VISIT+"'and us.business_id="+busid+")  AS customerVisitCount," +
    "(select count(*)  from enquiry where status='"+Constants.ENQ_OFFICE_VISIT+"'and us.business_id="+busid+")  AS officevisitCount,"+
    "(select count(*)  from enquiry where status='"+Constants.ENQ_PENDING+"'and us.business_id="+busid+")  AS pending"; 
```

但它需要相当多的时间。你能告诉我有没有什么方法可以用最少的时间和一个单一的选择子句来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:37:39.240

采用`CASE`

```
SELECT  SUM(CASE WHEN business_id = 'busid' THEN 1 END) allEnqCount,
        SUM(CASE WHEN status = 'ENQ_FALLOWUP' AND us.business_id = 'busid' THEN 1 END) followupCount,
        SUM(CASE WHEN status = 'ENQ_SITE_VISIT' AND us.business_id = 'busid' THEN 1 END) siteVisitCount,
        SUM(CASE WHEN status = 'ENQ_CUST_VISIT' AND us.business_id = 'busid' THEN 1 END) customerVisitCount,
        SUM(CASE WHEN status = 'ENQ_OFFICE_VISIT' AND us.business_id = 'busid' THEN 1 END) officevisitCount,
        SUM(CASE WHEN status = 'ENQ_PENDING' AND us.business_id = 'busid' THEN 1 END) pending
FROM    enquiry 
```

只需更改满足您需求的值即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:43:28.747

使用`group by`：

就像是：

```
select 
      status,
      count(*) 
from enquiry 
where business_id = @busid 
group by status 
```

# android - 布局高度无法增加到所需大小

> ID：14932179
> 
> 赞同：0
> 
> 时间：2013-02-18T08:32:32.087
> 
> 标签：android, android-relativelayout, android-imageview

我遇到了一个典型的问题。我无法增加布局宽度的大小。这些是屏幕截图。以下是当我保持父级高度等于 50dp 时的 singleRow.xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:background="@drawable/box_midbg" >

    <TextView
        android:id="@+id/textViewSingleRowClearHistory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="20dp"
        android:textSize="20dp"
        android:text="TextView" />

    <ImageView
        android:id="@+id/imageViewSingleRowClearHistory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="20dp"
        android:src="@drawable/tickmark_icon" />

</RelativeLayout> 
```

现在，如果我也将 layout_width 更改为 100dp，那没有什么区别。这怎么可能，我的意思是，我不明白我哪里出错了。

我用来在父布局上设置的图像尺寸的尺寸为：580 x 20 我在该布局中使用的 imageView 的尺寸为：33 x 33。谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:55:00.323

尝试将父相对布局的宽度设置为 wrap_content 并将图像视图的高度更改为 100dp，我相信它会反映。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:06:21.153

这是因为您的布局背景图像大小..使用另一个图像并检查。它会工作。

# virtuemart - Virtuemart 从哪里获得运输和处理费用？

> ID：14932182
> 
> 赞同：0
> 
> 时间：2013-02-18T08:32:39.400
> 
> 标签：virtuemart

这可能是一个很长的镜头，但我正在尝试找出哪个全局变量保存着 dermart 中的运输和处理量？

我看到它是使用 $shipping_display 设置的，但是每当我运行 var_export($shipping_display) 时，它都是 NULL。但是，如果我下订单，它会显示在页面上...

有什么想法吗？！

# c# - 传输编码：在 Windows Phone 中分块

> ID：14932183
> 
> 赞同：5
> 
> 时间：2013-02-18T08:32:44.853
> 
> 标签：c#, silverlight, windows-phone-7, httpwebrequest, transfer-encoding

我有一个带有 Transfer-Encoding: chunked 的服务器响应

```
HTTP/1.1 200 OK
Server: nginx/1.2.1
Date: Mon, 18 Feb 2013 08:22:49 GMT
Content-Type: application/json; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Accept-Encoding

c7
{<some json data>}
0 
```

查看 json 数据之前的 c7 块大小。

如何使用 Windows Phone 读取没有块的原始响应流`HttpWebResponse`？

* * *

提示：要使服务器禁用分块输出，我只需要指定 HTTP/1.0 协议版本。但我不知道该怎么做，因为Windows Phone 或 Silverlight`ProtocolVersion`中的类中没有属性`HttpWebRequest`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T09:51:03.017

`HttpClient`能够自动解析分块输出 [http://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.110).aspx)

`HttpClient`使用 PostAsync 和 GetAsinc 以及许多其他优点，整体来说是一件很酷的事情。我再也没有使用过 HttpWebRequest。

`HttpClient`在 .NET Framework 4.5、Windows 8 或 Windows Phone 8.1 中随时可用

如果您在 - .NET Framework 4 - Windows Phone Silverlight 7.5 - Silverlight 4 - 可移植类库中需要 HttpClient，请使用 NuGet 包[http://www.nuget.org/packages/Microsoft.Net.Http](http://www.nuget.org/packages/Microsoft.Net.Http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T12:21:51.937

您可以通过以下方式读取分块响应：

```
public static byte[] ReadChunkedResponse(this WebResponse response)
    {
        byte[] buffer;

        using (var stream = response.GetResponseStream())
        {
            using (var streamReader = new StreamReader(stream, Encoding.UTF8))
            {
                var content = new StringBuilder();
                while (!streamReader.EndOfStream)
                {
                    content.Append((char)streamReader.Read());
                }

                buffer = Encoding.UTF8.GetBytes(content.ToString());
            }
        }

        return buffer;
    } 
```

# fortran - Fortran 将指数输出到文件

> ID：14932185
> 
> 赞同：2
> 
> 时间：2013-02-18T08:32:51.857
> 
> 标签：fortran, exponential

我无法将指数数字写入文件。如果我将输出设置为 E20.8 格式并且数字在 e-99 到 e+99 范围内，我很好。当我尝试输出小于 e-99 的数字时，例如 1.23456e-100，我得到的是 1.23456000-100（由于 E20* *.8* * 删除了 e，零）。这对于后处理是有问题的。

有什么修复建议吗？指数大小的 Ew.d 格式是否还有另一个参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:48:17.063

我的搜索不够持久：完整的输出格式是 Ew.d 后跟“e”，以及为指数留下的空格数。就我而言，E20.8e3 效果很好。答案，供将来参考，在这里： [http ://www.hicest.com/Format.htm](http://www.hicest.com/Format.htm)

# ruby-on-rails - Ruby on Rails VPS RAM 数量

> ID：14932187
> 
> 赞同：1
> 
> 时间：2013-02-18T08:33:07.330
> 
> 标签：ruby-on-rails, delayed-job, vps, ram

目前我有一个最简单的 VPS：1 核，256 MB RAM，Ubuntu 12.04 LTS。我的应用程序似乎运行得很好（我正在使用 unicorn 和 nginx），但是当我`rake jobs:work`为我的 运行我的命令时`delayed_jobs`，unicorn 进程被杀死了。

我想知道它是否与RAM数量有关？

当 unicorn 进程启动并运行时，`free -m`命令显示大约 230 MB 的 RAM 被占用。我想知道，我总共需要多少内存？512？1024 ? 我应该和哪一个一起去？

很高兴收到任何答案！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:26:10.737

你可以从

```
ulimit -S -a 
```

找出环境的限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:42:57.027

您的 DJ 工作者将运行您的 Rails 应用程序的另一个实例，因此您需要确保您至少有足够的 RAM 用于该其他实例以及您正在运行的其他进程的余量。

*   检查`ps aux`Rails 应用程序的内存使用情况。
*   运行`top`并查看有多少物理内存可用（在 Rails 应用程序运行时）。

我的猜测是您必须将 RAM 增加到 512 MB。你当然不希望你的内存使用溢出来交换。

当然，除此之外，您还需要确保您的应用程序和数据库已经足够优化，以至于内存使用不会出现令人难以置信的峰值。

# php - 使用 PHP 在打印机上打印汉字

> ID：14932189
> 
> 赞同：0
> 
> 时间：2013-02-18T08:33:11.353
> 
> 标签：php

我正在尝试使用 PHP 的打印机模块（php_printer.dll）将中文打印到打印机。我已经从记事本成功打印了中文，所以我知道打印机可以打印中文。

我使用printer_draw_text() 将字节发送到打印机。打印机只是将字节解释为 ascii 字符，并打印出这些奇怪字符的字符串。在将字符串发送到打印机之前，我使用 mb_convert_encoding() 将字符串转换为 UTF-8 格式，但结果只是另一个奇怪的 ascii 字符字符串。

那么，问题出在哪里？如何强制打印机以另一种编码方式解释字节？或者...我应该将字节转换为另一种编码，例如 UTF-7、UTF-16 等???????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:49:43.073

你需要做的两件事

1.  将文档类型或标题设置为`content="text/html;charset=utf-8"`

2.  将这些用户汉字保存在数据库中，字段排序为`utf8_unicode_ci`

在 html 中使用以下代码。

`<meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>`

# labview - 没有格结构的字典

> ID：14932191
> 
> 赞同：3
> 
> 时间：2013-02-18T08:33:22.040
> 
> 标签：labview

有没有什么方法可以在 LabVIEW 中创建类似于从许多其他编程语言（如 C#、python、C++（映射））中知道的字典而不使用案例结构？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T11:39:49.837

OpenG 库已经很老了。另一种选择是直接使用变体属性，这也应该更有效：

![变体属性查找](../Images/ebd490f1331de0b28b51016fe7209928.png)

只要您使用相同的变体，属性就可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:03:00.563

在 OpenG 库中，您可以找到 Dictionary 库。[使用VI 包管理器](http://jki.net/vipm)安装它（LabVIEW 2012 附带，可下载用于以前的 LabVIEW 版本）。

由于它使用变体，因此有点难以使用，但这里有一个示例： ![在此处输入图像描述](../Images/0b89d951b4a62ae3dcb0208622b58e58.png)

# xml - 获取 XML 属性值的自动完成选项

> ID：14932192
> 
> 赞同：0
> 
> 时间：2013-02-18T08:33:22.320
> 
> 标签：xml, eclipse, xsd, intellisense, content-assist

如何在某些文本编辑器中使用预先存在的示例 XML（仅此而已）获得 XML 属性“值”的自动完成或智能感知或内容辅助选项？

例如如果有

```
<samplexml attr="a">
</samplexml>
<samplexml attr="b">
</samplexml>
<samplexml attr="c">
</samplexml> 
```

然后当我输入时，`<samplexml attr=`我应该看到选项 a、b 和 c

我想要 Eclipse 中的上述内容，但如果不是 Eclipse，是否有其他开源工具可以给我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:39:36.273

如果您有根节点，Eclipse XML 编辑器将为您提供自动完成功能。这个 XML 的问题是它没有根节点

![在此处输入图像描述](../Images/ce7a8f9281b066ae7ca6827ee9b15e29.png)

参考[http://en.wikipedia.org/wiki/Root_element](http://en.wikipedia.org/wiki/Root_element)

# erlang - 使用 R15B03 的 osx 机器上的 udp

> ID：14932193
> 
> 赞同：1
> 
> 时间：2013-02-18T08:33:34.197
> 
> 标签：erlang

我尝试通过 udp 进行多播，但是当我在 osx 下使用 erlang R15B03 时遇到问题。如果我在 Ubuntu 12.10 下运行相同的代码，一切正常。

当我打开套接字时，我使用以下选项：

```
-define(MULTICAST_GROUP, {239,255,255,250}).
-define(MULTICAST_PORT, 1900).
-define(OPTIONS,  [list,  {active,true}, {ip, ?MULTICAST_GROUP},{multicast_ttl, 255},   {reuseaddr,true},{multicast_loop,true}]).
{ok, Socket} = gen_udp:open(?MULTICAST_PORT, ?OPTIONS), 
inet:setopts(Socket ,[{add_membership,{?MULTICAST_GROUP, {0,0,0,0}}}]), 
```

当我在 OSX 10.7.5 下运行代码时，出现以下错误：

```
=ERROR REPORT==== 18-Feb-2013::09:21:38 ===
** Generic server sender terminating 
** Last message in was send_alive
** When Server state == {state,#Port<0.929>}
** Reason for termination == 
** {{badmatch,{error,eaddrnotavail}},
[{sender,handle_info,2,[{file,"src/sender.erl"},{line,110}]},
{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},
 {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]}
1...Address : {239,255,255,250}  Port : 1900 
```

正如我之前写的，代码相同的代码在 Ubuntu 下运行没有错误。

有没有人可以帮助我？

谢谢， 乌尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:48:37.867

现在我发现了我的问题。

1.  我必须添加 {ip, real ip} 而不是 {0,0,0,0}
2.  我必须通过我的本地 IP 发送。

# jquery - 解析多级 JSON

> ID：14932195
> 
> 赞同：4
> 
> 时间：2013-02-18T08:33:37.843
> 
> 标签：jquery, json, parsing

如何解析多级json？

Json 格式（n 级深）：

```
 [
      {
        "attr" : {
        "id" : "97987"
      },
      "children" : [
            {
              "attr" : {
              "id" : "97988"
            },
            "children" : [
                  {
                    "attr" : {
                    "id" : "97992"
                  },
                  "data" : "tag5"
              }],
            "data" : "tag2"
        },
        {
          "attr" : {
              "id" : "97993"
          },
          "data" : "tag6"
        }
      ],
    "data" : "tag1"
  },
  {
    "attr" : {
        "id" : "97989",
    },
    "children" : [
          {
            "attr" : {
              "id" : "97990"
            },
            "data" : "tag4"
          }],
    "data" : "tag3"
  }
] 
```

例如。我想阅读每个孩子的“身份证”。
我已经尝试过`$.each`，但这允许我解析固定数量的级别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T08:51:43.350

您需要使用[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。

```
function get_all_ids(data) {
    var result = [];

    $(data).each(function (i, element) {
        result.push(element.attr.id);

        if (element.children && element.children.length > 0) {
            var ids = get_all_ids(element.children);

            result = result.concat(ids); // or $.merge(result, ids);
        }
    });

    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:02:53.303

使用 $.each() 并检查每个对象的对象或数组。

1.  如果对象索引为“id”，则将 id 对象推入结果数组
2.  如果对象是数组或对象，则递归调用。
3.  如果没有，请返回。

这是一些代码。工作代码位于[http://jsfiddle.net/cwdoh/KKFCZ/](http://jsfiddle.net/cwdoh/KKFCZ/)

```
function getAll( input, target ) {
    var result = [];

    function parseData( input, target ) {
        $.each( input, function ( index, obj ) {
            if ( index == target ) {
                result.push( obj );
            }
            else {
                switch ( $.type( obj ).toLowerCase() ) {
                case "object":
                case "array":
                    parseData( obj, target );
                    break;
                }
            }
        } );
    }

    parseData( data, "id" );

    return result;
} 
```

# arrays - 访问数组中的元素

> ID：14932196
> 
> 赞同：0
> 
> 时间：2013-02-18T08:33:38.887
> 
> 标签：arrays, angularjs

我有一个控制器功能如下

```
function UserDetailsControl($scope, $routeParams, UserService) {
    $scope.user = UserService.get({id: $routeParams.id});
    alert($scope.user.phone);
} 
```

当我在模板中访问用户变量时，它看起来如下所示：

```
{
  "website_name": null,
  "email": "Monroe@Chamorro.com",
  "first_name": "Monroe",
  "id": "31",
  "last_name": "Chamorro",
  "phone": 2147483647,
} 
```

但这`alert($scope.user.phone);`总是返回`undefined`。为什么 ？无论我尝试访问什么元素，它总是返回`undefined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:43:09.367

这是因为 $resource 是异步的。检查此线程以获取详细说明：[$resource `get` 函数如何在 AngularJS 中同步工作？](https://stackoverflow.com/questions/11966252/how-does-the-resource-get-function-work-synchronously-in-angularjs/11966512#11966512)

# java - 将服务方法添加到队列以将其他数据加载到缓存中

> ID：14932197
> 
> 赞同：0
> 
> 时间：2013-02-18T08:33:43.447
> 
> 标签：java, spring, queue, scheduling, background-process

我有几个服务类（CustomerService、AgreementService）。每个方法结果都使用 ehcache 进行缓存。

一些服务方法调用非常昂贵或需要很长时间才能运行。

当我加载例如客户时，我知道接下来很可能需要客户协议。所以我需要将它们加载到后台缓存并使应用程序更加负责。

我试过使用方面。我已将切入点设置为 CustomerService.getById(id) 方法和 @AfterReturning 建议。

```
@AfterReturning(
    pointcut = "execution(* com.example.CustomerService.getById(..))", 
    returning = "result"
)
public void loadCustomerAgreements(Object result) {
    Customer customer = (Customer) result;
    // calls method which caches result into ehcache
    agreementService.findByCustomer(customer.getId());
} 
```

不幸的是，此解决方案会立即加载客户及其协议（由于响应时间长，这是不可取的）。我想加载客户并返回给用户。然后异步加载协议。

为此，建议`@After`效果很好。但是我无法获得客户身份，所以我不知道要加载哪些协议。

有没有办法使用方面或任何 Spring 触发器或其他技术来做到这一点？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:25:57.370

我发现按方面运行的方法阻止了进一步的程序执行，因为它是在同一个线程中执行的。可能的解决方案是使用 Spring Task Execution 框架异步运行方面方法。

Spring 配置可能如下所示：

```
<task:annotation-driven executor="executorWithPoolSizeRange" scheduler="taskScheduler"/>
<task:executor id="executorWithPoolSizeRange" pool-size="5-25" queue-capacity="100"/>
<task:scheduler id="taskScheduler" pool-size="1"/> 
```

然后方面将如下所示：

```
@Async
@AfterReturning(
    pointcut = "execution(* com.example.CustomerService.getById(..))", 
    returning = "result"
)
public void loadCustomerAgreements(Object result) {
    Customer customer = (Customer) result;
    // calls method which caches result into ehcache
    agreementService.findByCustomer(customer.getId());
} 
```

`loadCustomerAgreements()`如果有可用的空闲线程，这将在不同的线程中运行方法。

有关更多信息，请参阅：

*   [http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)
*   [http://krams915.blogspot.cz/2011/01/spring-3-task-scheduling-via.html](http://krams915.blogspot.cz/2011/01/spring-3-task-scheduling-via.html)

# java - 从 C 而不是 Java 管理 Android 应用程序设置？

> ID：14932200
> 
> 赞同：1
> 
> 时间：2013-02-18T08:33:50.280
> 
> 标签：java, android, c, api, application-settings

我可以从 C 而不是 Java 管理 Android 应用程序设置吗？

我的意思是我可以管理的设置：

*   *对于 Android，在 Java 中*- 通过`android.content.SharedPreferences`接口；
*   *对于 iOS，在 C 中*- 通过来自`CoreFoundation/CFPreferences.h`;的实用程序
*   *对于 Windows，在 C 中*- 通过 WinAPI 进行注册表管理；
*   *对于 Android，在 C* - ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:45:01.807

是的，但是会很乱。在 Android 中，您可以使用 NDK 通过 JNI 访问 sharedPreferences。看：

[在 ndk 应用程序中访问 android 上下文](https://stackoverflow.com/questions/4449864/access-android-context-in-ndk-application)

# extjs - ExtJS filter() 在商店中进行精确匹配

> ID：14932202
> 
> 赞同：1
> 
> 时间：2013-02-18T08:33:50.667
> 
> 标签：extjs, extjs4.1

我正在使用 ExtJs 4.1。我有一个有模型的商店。模型包含三个字段ID、姓名、年龄。这家商店附在网格上。

这是数据的外观：

![在此处输入图像描述](../Images/30fbc578d4e102c7345cf770c198ea35.png)

我在商店中使用过滤器功能来应用过滤器。

因此，当我在 ID 'Manu' 上应用过滤器时，我在网格 myStore.filter('ID', 'Manu'); 中看到两个结果 //工作正常

**问题** myStore.filter('ID', 'Sales'); // 返回 4 个结果。它还包括 ID“销售一号”和“销售二号”的结果

**我想要什么：**当我过滤“销售”ID 时，它应该只返回 ID“销售”的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:40:49.403

```
myStore.filter([
   {filterFn: function(item) { return item.get('ID') == 'Sales'; }}
]); 
```

# c# - 带有 linq 的 if 和 else 语句

> ID：14932203
> 
> 赞同：0
> 
> 时间：2013-02-18T08:33:53.987
> 
> 标签：c#, .net, linq, linq-to-sql

我正在尝试在我的 linq 查询中使用 if 和 else 语句，但我无法显示正确的结果，您可以在下面看到部分代码：

```
from c in dc.Train_TBLs select new {c.CodeTrain,
DBL1 = (from u in dc.Train_NormalRate_TBLs where u.CodeTrainID == c.CodeTrainID orderby u.NormalRateID ascending select u.DBL).First(),
TPL1 = (from u in dc.Train_NormalRate_TBLs where u.CodeTrainID == c.CodeTrainID orderby u.NormalRateID ascending select u.TPL == (decimal?)null ? u.DBL / 2 * 3 == (decimal?)null : u.TPL != 0).First(),....} 
```

在TPL1字段中，我的意图是显示“u.TPL”中的值等于“0”或null的情况，然后将字段“u.DBL”中的值除以2并乘以3，但是我的代码不走运，那么您对如何显示正确的结果有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:38:58.867

我想这就是你想要的：

```
select ((u.TPL ?? 0) == 0 ? u.DBL / 2 * 3 : u.TPL) 
```

用这个替换你的最后一个`select`。

你说：

> 如果 "u.TPL" 中的值等于 "0" 或 null，则将从字段 "u.DBL" 中获取值除以 2 并乘以 3

`(u.TPL ?? 0) == 0`检查是否`u.TPL`为 0 或 null。如果是，则返回`u.DBL / 2 * 3`，否则返回`u.TPL`自身。此代码仅在`u.TPL`可以为空（定义为`decimal?`）时才有效

# android - 操作栏 — 带有文本和图像的子菜单项无法正常工作

> ID：14932216
> 
> 赞同：6
> 
> 时间：2013-02-18T08:34:54.050
> 
> 标签：android, menu, android-actionbar, submenu

我正在开发小型 Android 应用程序，我在其中使用带有一些菜单项的操作栏。一个菜单项包含子菜单。现在我想做的是始终显示带有文本和图标的菜单项。

我以下列方式定义菜单项。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/card_menu"
        android:icon="@drawable/abc"
        android:showAsAction="withText|always"
        android:title="cards">

        <menu>

            <item
                android:id="@+id/C1"
                android:title="C1"/>

            <item
                android:id="@+id/C2"
                android:title="c2"/>

            <item
                android:id="@+id/C3"
                android:title="C3"/>
        </menu>
    </item>

    <item
        android:id="@+id/notification"
        android:actionLayout="@layout/notification_icon"
        android:icon="@drawable/notification"
        android:showAsAction="always"
        android:title="Notifications"/>

    <item
        android:id="@+id/filter"
        android:icon="@drawable/filter"
        android:showAsAction="always"
        android:title="Filter"/>

</menu> 
```

现在发生的是我的操作栏正确显示我的项目；唯一的问题是，当窗口处于纵向模式时，它只显示图像，而当窗口处于横向模式时，它同时显示图像和文本。但我想要两种模式下的图像和文本。

怎么做？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T18:23:28.590

如果您使用的是 Android Sopport 库 ( [android.support.v7.app.ActionBar](http://developer.android.com/reference/android/support/v7/app/ActionBar.html) ) 中的 ActionBar，您可能需要从以下位置更改菜单和项目声明：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/notification"
    android:actionLayout="@layout/notification_icon"
    android:icon="@drawable/notification"
    android:showAsAction="always"
    android:title="Notifications"/> 
```

至

```
<!-- Your menu -->
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:yourappname="http://schemas.android.com/apk/res-auto" >

<!-- Your item to be shown as action-->    
<item
    android:id="@+id/notification"
    android:actionLayout="@layout/notification_icon"
    android:icon="@drawable/notification"
    android:showAsAction="always"
    yourappname:showAsAction="always"
    android:title="Notifications"/> 
```

在提供与旧 android 版本的兼容性时，我遇到了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:53:20.547

比使用`android:showAsAction="ifRoom|withText"`更好`always`。
在这种情况下，取决于您的文本大小和屏幕宽度。

# java - 使用单个 servlet 请求上传多个文件

> ID：14932225
> 
> 赞同：5
> 
> 时间：2013-02-18T08:35:36.857
> 
> 标签：java, html, file, http, multipart

我想提议只点击一次上传按钮上传多个文件。我可以使用多部分发送文件吗？如果是，那么如何？

PS：我不想使用闪存或一次发送一个文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T09:03:22.710

在您的 HTML 中，您可以执行以下操作：

```
<input accept="image/jpeg,image/gif,image/png" type="file" name="upload[]" multiple/> 
```

添加`multiple`到输入的末尾可以为您提供所需的内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T08:53:59.297

希望这可以帮助...

```
//JSP File

<html>
<head><title>Upload page</title></head></p> <p><body>
<form action="upload_file" method="post" enctype="multipart/form-data" name="form1" id="form1">
<center>
 Specify file: <input name="file" type="file" id="file">
 Specify file: <input name="file" type="file" id="file">
 Specify file:<input name="file" type="file" id="file">
 <input type="submit" name="Submit" value="Submit files"/>
<center>
</form>
</body>
</html>

//Servlet Page

import java.util.List;
import java.util.Iterator;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.*;

boolean isMultipart = ServletFileUpload.isMultipartContent(request);
   if (!isMultipart) {
   }
   else{
      FileItemFactory factory = new DiskFileItemFactory();
      ServletFileUpload upload = new ServletFileUpload(factory);
      List items = null;
      try {
          items = upload.parseRequest(request);
          } catch (FileUploadException e) {
               e.printStackTrace();
          }
      Iterator itr = items.iterator();
      while (itr.hasNext()) {
           FileItem item = (FileItem) itr.next();
           if (item.isFormField()) {
           } else {
           try {
              String itemName = item.getName();
              File savedFile = new File(config.getServletContext().getRealPath("/")+"uploadedFiles/"+itemName);
              item.write(savedFile);
              out.println("<tr><td><b>Your file has been saved at the loaction:</b></td></tr><tr><td><b>"+config.getServletContext().getRealPath("/")+"uploadedFiles"+"\\"+itemName+"</td></tr>");
              } catch (Exception e) {
                   e.printStackTrace();
              }
       }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T08:48:34.523

是的你可以。试试[apache fileupload library](http://commons.apache.org/fileupload/)，你可以参考 stackoverflow 上的这个问题：[Multiple file upload in Jsp using Apache commons file upload API](https://stackoverflow.com/questions/5887214/multiple-file-upload-in-jsp-using-apache-commons-file-upload-api)或[这个完整的例子](http://www.kodejava.org/browse/55.html)。您也可以通过参考[这篇文章](http://dhruba.name/2008/12/27/implementing-single-and-multiple-file-multipart-uploads-using-spring-25/)来使用 Spring 。

# android - 可以在 assets 文件夹中搜索具有所需扩展名的文件吗？

> ID：14932227
> 
> 赞同：3
> 
> 时间：2013-02-18T08:35:37.703
> 
> 标签：android, assets, android-assets

我有一个随机生成的资产文件夹的应用程序。在该资产文件夹中，每次打开我的应用程序时，我都必须打开一个扩展名为“.jet”的文件。问题是每次应用打开时文件都会有一个不同的随机名称。

所以。如何搜索带有“.jet”扩展名的资产文件夹的第一个文件？

我在谷歌上找不到任何相关信息

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T08:39:30.830

唯一的方法是搜索扩展名：

```
AssetManager am = getAssets();
String fileList[] = am.list("");

for (String fileName : fileList) {
      if (fileName.endsWith(".jet") {

       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:42:45.207

让我知道以下代码是否适合您？

```
Arrays.asList(getResources().getAssets().list("")).contains(".jet"); 
```

它将返回一个*文件名包含 .jet*的数组，或者*您也可以在文件名上使用 endsWith*

# jquery - 如何使用 jQuery 创建 ASP.NET 回发确认对话框？

> ID：14932231
> 
> 赞同：0
> 
> 时间：2013-02-18T08:36:09.713
> 
> 标签：jquery, asp.net

我正在使用下面的代码来获取 Jquery UI 弹出窗口，但它没有返回值并且弹出框正在关闭

当我单击按钮时，我需要它必须作为确认框..！

代码 ：

```
<style type="text/css" >
        .ui-widget-header, .ui-widget-content
    { color: red !important;}
</style>
<script type="text/javascript">
    $(document).ready(function () {
        var $myDialog = $('<div></div>')
        .html('You are going to Lock the Record.<br/>Click OK to confirm.  Click Cancel to stop this action.')
        .dialog({
            autoOpen: false,
            title: 'Confirm..?',
            buttons: { "OK": function () {
                $(this).dialog("close");

            }, "Cancel": function () {
                $(this).dialog("close");

            }
            }
        });

        $(function fn() {
            $('#Button1').click(function (e) {
                return $myDialog.dialog('open');

            });
        });
    });
</script>

<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="return fn() onclick="Button1_Click"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:48:30.357

```
$(function fn() {

 }); 
```

你在另一个里面有一个dom准备好的功能。你需要删除上面的块......

```
 $(document).ready(function () {
        var $myDialog = $('<div></div>')
        .html('You are going to Lock the Record.<br/>Click OK to confirm.  Click Cancel to stop this action.')
        .dialog({
            autoOpen: false,
            title: 'Confirm..?',
            buttons: { "OK": function () {
                $(this).dialog("close");

            }, "Cancel": function () {
                $(this).dialog("close");

            }
            }
        });
            $('<%=Button1.ClientID%>').click(function (e) {
                $myDialog.dialog('open');
                return false;

            });
    }); 
```

我希望这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:41:43.810

在 HTML 输出中是否以 ID 'Button1' 呈现 asp.net 按钮？如果是，您可以尝试以下代码（修改您的代码）

代码 ：

```
<style type="text/css" >
        .ui-widget-header, .ui-widget-content
    { color: red !important;}
</style>
<script type="text/javascript">
    $(document).ready(function () {
        var $myDialog = $('<div></div>')
        .html('You are going to Lock the Record.<br/>Click OK to confirm.  Click Cancel to stop this action.')
        .dialog({
            autoOpen: false,
            title: 'Confirm..?',
            buttons: { "OK": function () {
                $(this).dialog("close");

            }, "Cancel": function () {
                $(this).dialog("close");

            }
            }
        });

         $('#Button1').click(function (e) {
               $myDialog.dialog('open');
               e.preventDefault();      
          });
      });
</script>

<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T18:20:49.020

将 CSS 类删除添加到控件，然后应用 jquery 确认对话框：

```
$('.delete').click(function () {
          return confirm('Are you sure you wish to delete this record?'); 
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T08:40:15.920

.dialog('open') 将始终立即返回，它不会等待用户操作。

您需要更改代码以触发 Button1 控件的回发。而不是依赖返回值。

有关使用 JavaScript触发回发[ASP.NET 回发的信息，请参见此处](https://stackoverflow.com/questions/1305954/asp-net-postback-with-javascript)

**编辑**

```
<style type="text/css" >
        .ui-widget-header, .ui-widget-content
    { color: red !important;}
</style>
<script type="text/javascript">
    $(document).ready(function () {
        var $myDialog = $('<div></div>')
        .html('You are going to Lock the Record.<br/>Click OK to confirm.  Click Cancel to stop this action.')
        .dialog({
            autoOpen: false,
            title: 'Confirm..?',
            buttons: { "OK": function () {
                $(this).dialog("close");

__doPostBack("<%=Button1.ClientID %>","");

            }, "Cancel": function () {
                $(this).dialog("close");

            }
            }
        });

        $(function fn() {
            $('#Button1').click(function (e) {
                return $myDialog.dialog('open');

            });
        });
    });
</script>

<asp:Button ID="Button1" runat="server" UseSubmitBehavior="false" Text="Button" OnClientClick="return fn()" onclick="Button1_Click"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T08:40:38.680

很难理解你的 dom 的结构。

但我会给你一个可行的解决方案

`<div id="someDialog">some controls or text or whatever you want to show./div>// add it to your page.`

然后使用 Jquery 和 Jquery UI 库，将其放入 head 标签中

```
$(function(){
$('#someDialog').dialog({ autoOpen: false,
            title: 'Confirm..?',
            buttons: { "OK": function () {
                if(confirm("are you sure you want to close the dialog))
                     $(this).dialog("close");

            }, "Cancel": function () {
                $(this).dialog("close");

            });

 $('#Button1').click(function (e) {
                $('#someDialog').dialog('open');

            }); // without return statement. 
}); 
```

# javascript - IE9 和 head.js 两次加载脚本

> ID：14932232
> 
> 赞同：3
> 
> 时间：2013-02-18T08:36:12.837
> 
> 标签：javascript, internet-explorer-9, head.js

使用**Head.js** (0.9) 并验证从 IE9 加载脚本，IE9 开发人员的网络窗格显示 javascript 被加载了两次。

第一次，使用 HTTP 结果代码 200 加载脚本，然后使用结果代码 304（未修改）重新加载相同的脚本。

但是，脚本窗格和脚本块下拉列表将脚本显示为已加载两次。这反过来使脚本之一 (sIFR.js) 重置其全局 sIFR 对象。

我怀疑双重加载是造成这种情况的原因。

注意：Chrome 和 Firefox 都按预期工作。

其他人见过这种奇怪的行为吗？

# velocity - 比较弦与速度

> ID：14932240
> 
> 赞同：8
> 
> 时间：2013-02-18T08:36:55.607
> 
> 标签：velocity, string-comparison

考虑速度模板中的以下代码：

```
#set($brandName = $player.brand.name)
#set($brandNameExample = "NameExample")

#if($brandName == $brandNameExample)
    11111
#else
    22222
#end 
```

我总是得到`22222`。当然，`player.brand.name = "NameExample"`。

任何人都可以解释一下为什么以及如何让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:20:29.193

我建议测试一下

```
#set($brandName = "NameExample")
#set($brandNameExample = "NameExample")
#if($brandName == $brandNameExample)
11111
#else
22222
#end 
```

如果它有效，那么我会尝试输出 $player, $player.brand, $player.brand.name 你需要确保 $player.brand.name - 保持正确的值。- 区分大小写？- 确定“$player.brand.name”的拼写正确吗？

我认为您只是在对象 $player 中有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:05:55.423

好吧，我找到了解决方案：我两次调用速度：第一次没有播放器对象，第二次使用它。所以在第一次调用时，所有关于玩家的指令都不能被评估并返回 null。谢谢大家的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T07:22:17.543

首先将其添加到您的上下文中（请参阅官方文档：[here](http://velocity.apache.org/engine/devel/developer-guide.html#the-context)）：

```
context.put("StringUtils", StringUtils.class); 
```

然后您可以从 Velocity 模板中调用**StringUtils.equals()方法：**

```
#if($StringUtils.equals($brandName, $brandNameExample))
    ## logic here...
#end 
```

# windows - 使用自定义 STS 从访问控制服务中注销

> ID：14932241
> 
> 赞同：3
> 
> 时间：2013-02-18T08:36:56.780
> 
> 标签：windows, azure, acs

我正在使用带有自定义 STS 的 Windows azure 访问控制服务。我可以通过 ACS 登录到我的应用程序，但我无法使用注销功能。我已经在我的应用程序中尝试过这段代码。

```
 WSFederationAuthenticationModule fam = FederatedAuthentication.WSFederationAuthenticationModule;

        try
        {
            FormsAuthentication.SignOut();
        }
        finally
        {
            fam.SignOut(true);
        }
        Page.Response.Redirect("default.aspx"); 
```

但似乎它从 ACS 中注销了用户，而不是从自定义 STS 中注销。我应该怎么做才能从 STS 注销。应用程序 (RP)、ACS 或 STS 中的问题可能出在哪里？

我认为 ACS 应该要求自定义 STS 注销用户，但它似乎没有这样做。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T10:22:27.983

我创建了一个辅助方法来执行 FederatedSignout，并在代码中添加了我一路上发现的注释（hth）

```
public static void FederatedSignOut(string reply = null)
{
   WSFederationAuthenticationModule fam = FederatedAuthentication.WSFederationAuthenticationModule;

   // Native FederatedSignOut doesn't seem to have a way for finding/registering realm for singout, get it from the FAM
   string wrealm = string.Format("wtrealm={0}", fam.Realm);

   // Create basic url for signout (wreply is set by native FederatedSignOut)
   string signOutUrl = WSFederationAuthenticationModule.GetFederationPassiveSignOutUrl(fam.Issuer, null, wrealm);

   // Check where to return, if not set ACS will use Reply address configured for the RP
   string wreply = !string.IsNullOrEmpty(reply) ? reply : (!string.IsNullOrEmpty(fam.Reply) ? fam.Reply : null);

   WSFederationAuthenticationModule.FederatedSignOut(new Uri(signOutUrl), !string.IsNullOrEmpty(wreply) ? new Uri(wreply) : null);

   // Remarks! Native FederatedSignout has an option for setting signOutUrl to null, even if the documentation tells otherwise.
   // If set to null the method will search for signoutUrl in Session token, but I couldn't find any information about how to set this. Found some Sharepoint code that use this
   // Michele Leroux Bustamante had a code example (from 2010) that also uses this form.
   // Other examples creates the signout url manually and calls redirect.

   // FAM has support for wsignoutcleanup1.0 right out of the box, there is no need for code to handle this.
   // That makes it even harder to understand why there are no complete FederatedSignOut method in FAM

   // When using native FederatedSignOut() no events for signout will be called, if you need this use the FAM SignOut methods instead.
} 
```

此代码用于我们为带有 ACS 的 Web SSO 创建的标准 RP 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:26:20.887

2012 年 12 月的 ACS 更新包括对联合单点注销的支持：

> 使用 WS-Federation 协议。使用 ACS 启用使用 WS-Federation 协议的身份提供者的单点登录 (SSO) 的 Web 应用程序现在可以利用单点注销功能。当用户退出 Web 应用程序时，ACS 可以自动将用户从身份提供者和使用相同身份提供者的其他依赖方应用程序中退出。
> 
> 此功能适用于 WS-Federation 身份提供程序，包括 Active Directory Federation Services 2.0 和 Windows Live ID（Microsoft 帐户）。为了启用单点注销，ACS 为 WS-Federation 协议端点执行以下任务：
> 
> *   ACS 识别来自身份提供者的 wsignoutcleanup1.0 消息，并通过向依赖方应用程序发送 wsignoutcleanup1.0 消息来响应。
>     
>     
> *   ACS 识别来自依赖方应用程序的 wsignout1.0 和 wsignout1.0 消息，并通过向身份提供者发送 wsignout1.0 消息和向依赖方应用程序发送 wsignoutcleanup1.0 消息来响应。

从[代码示例：ASP.NET MVC 4 with Federated Sign-out 中](http://technet.microsoft.com/en-us/subscriptions/jj984618.aspx)，实现这样的操作以从 ACS 中注销：

（请注意，Windows Identity Foundation 现在已合并到 .NET 4.5 框架中，这就是下面新命名空间的原因）

```
using System.IdentityModel.Services;
using System.IdentityModel.Services.Configuration;

public ActionResult Logout()
{
    // Load Identity Configuration
    FederationConfiguration config = FederatedAuthentication.FederationConfiguration;

    // Get wtrealm from WsFederationConfiguation Section
    string wtrealm = config.WsFederationConfiguration.Realm;
    string wreply;

    // Construct wreply value from wtrealm (This will be the return URL to your app)
    if (wtrealm.Last().Equals('/'))
    {
        wreply = wtrealm + "Logout";
    }
    else
    {
        wreply = wtrealm + "/Logout";
    }

    // Read the ACS Ws-Federation endpoint from web.Config
    // something like "https://<your-namespace>.accesscontrol.windows.net/v2/wsfederation"
    string wsFederationEndpoint = ConfigurationManager.AppSettings["ida:Issuer"];

    SignOutRequestMessage signoutRequestMessage = new SignOutRequestMessage(new Uri(wsFederationEndpoint));

    signoutRequestMessage.Parameters.Add("wreply", wreply);
    signoutRequestMessage.Parameters.Add("wtrealm", wtrealm);

    FederatedAuthentication.SessionAuthenticationModule.SignOut();

    string signoutUrl = signoutRequestMessage.WriteQueryString();

    return this.Redirect(signoutUrl);
} 
```

# iphone - 推送通知停止在我的实时应用程序上工作

> ID：14932243
> 
> 赞同：4
> 
> 时间：2013-02-18T08:37:09.010
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我在我的一个应用程序中使用了推送通知，该应用程序同时在 appstore 和 google play 市场上运行。几天前，它在 iPhone 和 android 两种类型的设备上都运行良好。但现在它只在安卓设备上工作。在 iPhone 设备上未收到推送通知。我们仍然可以从 iPhone 发送到 Android，但无法在 iPhone 上接收。它也适用于 android 到 android。

只是想知道这是否由于任何最近发布的 ios 版本或服务器上发生的任何不良情况而发生？Web 服务代码在 Ruby on rails 中。请建议我应该检查什么来解决问题？

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:21:38.083

我认为这与您的服务器或最近发布的 ios 版本无关。这可能是Eran提到的证书问题。Apple 推送通知服务 (APNS) 证书有效期为一年，必须每年续订。您可以创建新证书或更新旧证书。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T11:50:12.090

确保您的 APN 证书未过期（您可以在 Apple 供应门户中查看）。

# silverlight - 填充 ListBox 时冻结的 UI

> ID：14932245
> 
> 赞同：0
> 
> 时间：2013-02-18T08:37:16.017
> 
> 标签：silverlight, windows-phone-7

我有一个带有四个枢轴的枢轴页面。在两个枢轴中，我有一个 ListBox，我以网格的形式填充信息。我将 ListItems 绑定到一个 ObservableCollection，其中填充了从 WCF 异步获取的信息。

但是，当设置 DataContext 并且 UI 正在用数据填充 ListBox 时，UI 似乎冻结了。ListItems 越多，冻结的时间越长。

编辑：校准。我仍然可以向上/向下滚动页面，但我无法通过滑动导航到不同的枢轴。转换发生在 UI 解冻之后。

有没有办法在不冻结 UI 的情况下填充 ListBox？

编辑：一些示例代码松散地解释了会发生什么。

列表框

```
<ListBox Name="lbInterruptYesterday" ScrollViewer.VerticalScrollBarVisibility="Disabled"
    ItemsSource="{Binding Interrupts}" 
    ItemTemplate="{StaticResource InterruptListItem}" Tap="Interrupt_OnTap">
</ListBox> 
```

Interrupts 是一个包含 Interrupt 对象的 ObservableCollection。

InterruptListItem 包含一个带有 TextBlocks 的网格，文本绑定到中断对象中的变量。

我通过对 WCF 的异步调用来获取数据。完成后我会：

```
(sender, e) => Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        //Some code handling the result which I put in the ObservableCollection
        Production.Interrupts.add(new Interrupt());
        //Set the DataContext    
        DataContext = Production;
    }); 
```

并且当设置 DataContext 时，UI 会冻结，直到它被更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:30:25.870

这*可能*是因为`ObservableCollection`触发了一个事件，导致 UI 更新您添加的每个项目。如果添加大量项目，可能会很耗时。解决方案是创建一个更聪明的 ObservableCollection，您可以在事件触发方面暂停和恢复它。这是一个[示例](https://stackoverflow.com/questions/7687000/fast-performing-and-thread-safe-observable-collection)，您可以尝试看看它是否有帮助。

# python - 格式字符串中的可变位数

> ID：14932247
> 
> 赞同：14
> 
> 时间：2013-02-18T08:37:20.357
> 
> 标签：python

这是编写此格式化函数的一种简洁方法：

```
def percent(value,digits=0):
    return ('{0:.%d%%}' % digits).format(value)

>>> percent(0.1565)
'16%'

>>> percent(0.1565,2)
'15.65%' 
```

问题是用给定的位数格式化一个数字，我不喜欢同时使用 '%' 运算符和格式方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-18T09:01:50.517

我喜欢这个：

```
'{0:.{1}%}'.format(value, digits) 
```

测试：

```
>> '{0:.{1}%}'.format(0.1565, 0)
'16%'
>> '{0:.{1}%}'.format(0.1565, 2)
'15.65%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T08:44:20.650

[`*`做你想要](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)的，用于`printf`-style 字符串格式。

```
>>> def percent(value, digits=0):
...     return '%.*f%%' % (digits, value * 100)
...
>>> percent(0.1565, 2)
'15.65%' 
```

高级字符串格式化（在[PEP 3101](http://www.python.org/dev/peps/pep-3101/)中定义并在[7.1.3\. Format String Syntax](http://docs.python.org/2/library/string.html#formatstrings)中记录）似乎无法一次性完成。（见[7.1.3.1\. 格式规范 Mini-Language](http://docs.python.org/2/library/string.html#format-specification-mini-language) :`precision`是`integer`唯一的。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T08:47:37.757

从[文档](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)：

> 最小字段宽度（可选）。如果指定为“*”（星号），则从值中元组的下一个元素读取实际宽度，并且要转换的对象位于最小字段宽度和可选精度之后。

例子：

```
def percent(value, digits=0):
    print '%.*f%%' % (digits, value*100)
>>> percent(0.1565, 2)
15.65% 
```

# javascript - 为 YUI 日历插件设置时区

> ID：14932254
> 
> 赞同：1
> 
> 时间：2013-02-18T08:37:43.167
> 
> 标签：javascript, calendar, yui

我正在尝试设置 YUI 日历。

问题：由于最终用户处于不同的时区，因此当他们选择今天的日期时，他们会看到不同的日期，具体取决于他们的时区。

以下是我的代码

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/fonts/fonts-min.css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/calendar/assets/skins/sam/calendar.css" />
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/calendar/calendar-min.js"></script>
</head>
<body class="yui-skin-sam">
<div class="exampleIntro">
</div>

<div id="cal1Container"></div>

<div style="clear:both" ></div>

<!--END SOURCE CODE FOR EXAMPLE =============================== -->
<script type="text/javascript">
    YAHOO.namespace("example.calendar");

    YAHOO.example.calendar.init = function() {
        YAHOO.example.calendar.cal1 = new YAHOO.widget.Calendar("cal1","cal1Container");
        YAHOO.example.calendar.cal1.render();
    }

    YAHOO.util.Event.onDOMReady(YAHOO.example.calendar.init);
</script>

</body>
</html> 
```

我没有找到可以为日历设置时区的配置参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:12:42.450

我不认为 YUI 日历支持时区。JavaScript 本身不支持时区。每当我遇到这个问题时，我都会避免使用 Date 类，将日期作为字符串发送到服务器，并处理服务器上的时区。

# jquery - 垂直菜单与水平

> ID：14932256
> 
> 赞同：1
> 
> 时间：2013-02-18T08:38:07.263
> 
> 标签：jquery, css, menu

我有一个使用 jquery 打开子菜单的垂直菜单。有什么办法可以像这样在同一行打开子菜单：

项目
项目 SUBITEM1 SUBITEM2
项目

这是我的代码：
css：

```
#menu-main { margin: 0;  padding: 0; position:absolute; top:107px;}
#menu-main li{ list-style: none; position:relative; 
height:25px;
        margin:0 2px;
        padding:20px 5px 0 10px;
        color:#FFFFFF;
        font-weight:bold;
        font-size:36px;
        text-transform:uppercase;
        clear: left;}
#menu-main li a{   
background: #000; text-decoration: none; padding: 1px 1px;
z-index:1001;}
#menu-main li a:link, 
    #menu-main li a:visited, 
    #menu-main li a:active {

        text-decoration:none;
        color:#FFFFFF;
    }
#menu-main li a:hover {background: #000; color: white; padding: 1px 6px;}

#menu-main li ul{list-style: none; none; margin: 0; padding: 0; display:none; float:left; z-index:1002; position:absolute;  left:100%; top:0px;}

#menu-main li ul li {float:left; display:inline;}

#menu-main li ul li a:hover {display:inline-block; background: #000; padding: 0px 0px;}

#menu-main li ul li a:link, 
    #menu-main li ul li a:visited, 
    #menu-main li ul li a:active { color:#0CF;}

#menu-main li ul li a:hover{ opacity:1;}

#menu-main > li{   margin-left:0px;} 
```

javascript:

```
$(document).ready(function(){ 

// MENU SCRIPT

var timeout    = 500;
var closetimer = 0;
var ddmenuitem = 0;

function jsddm_open()
{  jsddm_canceltimer();
   jsddm_close();
   ddmenuitem = $(this).find('ul').css('display', 'inline-block');}

function jsddm_close()
{  if(ddmenuitem) ddmenuitem.css('display', 'none');}

function jsddm_timer()
{  closetimer = window.setTimeout(jsddm_close, timeout);}

function jsddm_canceltimer()
{  if(closetimer)
   {  window.clearTimeout(closetimer);
      closetimer = null;}}

$('#menu-main > li').bind('mouseover', jsddm_open)
$('#menu-main > li').bind('mouseout',  jsddm_timer)

document.onclick = jsddm_close;

}); 
```

在此先感谢您的帮助

# c# - 在linq中按选择最大值分组

> ID：14932257
> 
> 赞同：1
> 
> 时间：2013-02-18T08:38:10.070
> 
> 标签：c#, linq

我试图找出如何做到这一点，但仍然与 Linq 语法混淆。

我的目的是使用指定的 empCode 找到最大有效日期

```
var x = (from workingResult in this.DataWorkspace.ApplicationData.WorkingResults
         group workingResult by workingResult.EmployeeCode into g
         where g.EmployeeCode == employeeCode
         && (g.EffectiveDate.HasValue
         && g.EffectiveDate.Value.Equals(date))
         select new {EffectiveDate = g.Max(d=>d.EffectiveDate)}); 
```

但是编译器向我展示了这个

“找不到源类型'...'的查询模式的实现。找不到'GroupBy'。考虑明确指定范围变量'workingResult'的类型。”

这是什么意思？我真的很需要你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:06:12.030

该行`where g.EmployeeCode == employeeCode`无效。是`g`类型`IEnumerable<IGrouping<_EmployeeCode type_, _Working result type_>>`。尝试以下操作：

```
var x = from g2 in (from workingResult in this.DataWorkspace.ApplicationData.WorkingResults
                    group workingResult by workingResult.EmployeeCode into g
                    select g)
        select new {EmployeeCode = g2.Select(w => w.EmployeeCode), MaxEffectiveDate = g2.Max(w => w.EffectiveDate)}; 
```

现在`x`包含每个`IEnumerable<_EmployeeCode type_, _Effective data type_>`的最大值。`EffectiveDate``EmployeeCode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:41:01.740

您的代码的问题是您将组`g`视为单个工作结果。实际上，它是它们的列表。此外， 的目的是`g.EffectiveDate.Value.Equals(date)`什么？`date`如果不存在与`date`变量匹配的生效日期，则将导致最大生效日期始终为或不存在。

以下应该有效：

```
DataWorkspace.ApplicationData.WorkingResults
             .Where(x => x.EmployeeCode == employeeCode)
             .Max(x => x.EffectiveDate); 
```

`EffectiveDate`这将返回指定的最大值`employeeCode`。

# mysql - 空字段是否占用数据库空间？

> ID：14932258
> 
> 赞同：1
> 
> 时间：2013-02-18T08:38:10.633
> 
> 标签：mysql, database-design, innodb, normalization

我正在尝试对表格进行规范化。我需要决定添加一个`VARCHAR(255)`大部分时间可能为空的额外字段，或者创建一个新的*映射表*并将该值加上相关的*id*存储在那里。

我的问题是，在第一种方法中，该空`VARCHAR(255)`字段是否占用数据库中的任何空间？

平台：MySQL、InnoDB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:40:30.093

使用`NULL`.

在 SQL 中，`null`与空字符串不同`''`。

The`empty string`具体意味着`value was set to be empty`
While`null`意味着`value was not set`, or 被设置为空。

# knockout.js - 淘汰赛 js - 使用列标题对表格进行排序

> ID：14932259
> 
> 赞同：12
> 
> 时间：2013-02-18T08:38:15.267
> 
> 标签：knockout.js, html-table

我是淘汰 js 的新手，需要帮助锻炼如何使用列标题对表格进行动态排序。

以下是我的代码的一部分：

**HTML：**

```
<table>
    <thead>
        <tr data-bind="click: sortFunction">
            <th id='id'>Id</th>
            <th id='name'>Name</th>
            <th id='description'>Description</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: deptList">
        <tr>
            <td><span data-bind="text: id" /></td>
            <td><span data-bind="text: name" /></td>
            <td><span data-bind="text: description" /></td>
        </tr>    
    </tbody>
</table> 
```

在我的视图模型中，我使用以下函数使用表头对数据表进行排序。

**视图模型：**

```
self.deptList = ko.observableArray(mylist);
self.sortColumn = ko.observable("id");
self.isSortAsc = ko.observable("True");

var Dept = function(id, name, description) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.description = ko.observable(description);
};

var mylist = [
    new Dept(1, "Dept 1", "D1"),
    new Dept(2, "Dept 2", "D6"),
    new Dept(3, "Dept 3", "D3"),
    new Dept(4, "Dept 4", "D4")
];

self.sortFunction = function(data, event) {

    if (self.sortColum === event.target.id)
        self.isSortAsc = !self.isSortAsc;
    else {
        self.sortColumn = event.target.id;
        self.isSortAsc = "True";
    }

    self.deptList.sort(function(a, b) {
        if (self.sortColum === 'id') {
            if (self.isSortAsc)
                a.id < b.id ? -1 : 1;
            else
                a.name < b.name ? 1 : -1;
        } else if (self.sortColum === 'name') {
            if (self.isSortAsc)
                a.name < b.name ? -1 : 1;
            else
                a.name < b.name ? 1 : -1;
        } else(self.sortColum === 'description') {
            if (self.isSortAsc)
                a.description < b.description ? -1 : 1;
            else
                a.description < b.description ? 1 : -1;
        }

    });
}; 
```

即使上面的代码正在运行，我认为应该有更好的方法来做到这一点（我的意思是将列 id 作为参数传递），这在有大量列时会很有用。

我试过`left[self.sortColumn] < right[self.sortColumn] ? -1 : 1`了，没有按预期工作。

如果可以通过动态列名进行排序，请显示示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-06T14:31:53.213

这是一个快速的 bindingHandler，您可以将其添加到您的 th 中。单击 th 后，它将根据绑定中定义的属性名称对列进行排序。

```
ko.bindingHandlers.sort = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var asc = false;
        element.style.cursor = 'pointer';

        element.onclick = function(){
            var value = valueAccessor();
            var prop = value.prop;
            var data = value.arr;

            asc = !asc;

            data.sort(function(left, right){
                var rec1 = left;
                var rec2 = right;

                if(!asc) {
                    rec1 = right;
                    rec2 = left;
                }

                var props = prop.split('.');
                for(var i in props){
                    var propName = props[i];
                    var parenIndex = propName.indexOf('()');
                    if(parenIndex > 0){
                        propName = propName.substring(0, parenIndex);
                        rec1 = rec1[propName]();
                        rec2 = rec2[propName]();
                    } else {
                        rec1 = rec1[propName];
                        rec2 = rec2[propName];
                    }
                }

                return rec1 == rec2 ? 0 : rec1 < rec2 ? -1 : 1;
            });
        };
    }
    }; 
```

这更优雅一点，因为您不必为每列创建单独的函数。可以在此处找到更完整的工作示例：http: [//jsfiddle.net/brendonparker/6S85t/](http://jsfiddle.net/brendonparker/6S85t/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:49:45.273

```
left[self.sortColumn] < right[self.sortColumn] ? -1 : 1 
```

不起作用，因为 self.sortColumn 是一个 ko.observable ，您必须通过将其作为函数调用来获取值。

```
self.deptList.sort(function (a, b) {
  if(self.isSortAsc())
     a[self.sortColumn()]() < b[self.sortColumn()]() ? -1 : 1;
  else
     a[self.sortColumn()]() < b[self.sortColumn()]() ? 1 : -1;
}); 
```

而且您还需要在可观察对象上设置值，例如

```
if(self.sortColum === event.target.id)
                    self.isSortAsc(!self.isSortAsc());
                else
                {
                    self.sortColumn(event.target.id);
                    self.isSortAsc("True");
                } 
```

代替

```
if(self.sortColum === event.target.id)
                    self.isSortAsc = !self.isSortAsc;
                else
                {
                    self.sortColumn = event.target.id;
                    self.isSortAsc = "True";
                } 
```

我整理了一个工作示例

```
<table class="dept_table">
  <thead>
      <tr data-bind="click: sortFunction">
          <th id='id'>Id</th>
          <th id='name'>Name</th>
          <th id='description'>Description</th>
      </tr>
  </thead>

  <tbody data-bind="foreach: deptList">
      <tr>
              <td><span data-bind="text: id" /></td>
              <td><span data-bind="text: name" /></td>
              <td><span data-bind="text: description" /></td>
      </tr>    
  </tbody>
</table>
<script>
// deptlist data
var mylist = [
            {id:1, name:"Dept 1", description: "D1"},
            {id:2, name:"Dept 2", description: "D6"},
            {id:3, name:"Dept 3", description: "D3"},
            {id:4, name:"Dept 4", description: "D4"}];

// Deptlist-item Viewmodel
var Dept = function (data) {
  var self = this;

  for(var key in data){
    // this is the lazy approach usually you should only use observables where they are needed
    if(data.hasOwnProperty(key))this[key] = ko.observable(data[key]);
  }
};

// Deptlist Viewmodel
var Deptlist = function(table_data){
  var self = this;

  this.deptList = ko.observableArray([]);
  this.sortColumn = ko.observable("id");
  this.isSortAsc = ko.observable(true);

  for(var i = 0;i < table_data.length;i++){
    if(table_data.hasOwnProperty(i))this.deptList.push(new Dept(table_data[i]));
  }

  this.sortFunction = function(){
    if(self.sortColumn() === event.target.id)
        self.isSortAsc(!self.isSortAsc());
    else
    {
        self.sortColumn(event.target.id);
        self.isSortAsc(true);
    }

    self.deptList.sort(function (a, b) {
            if(a[self.sortColumn()]() < b[self.sortColumn()]())return !self.isSortAsc();
            else return self.isSortAsc();
    });
  }
};

var deptList = new Deptlist(mylist);

ko.applyBindings(deptList,$('.dept_table')[0]);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-14T12:10:32.890

感谢@brendonparker 的出色 bindingHandler。

我进一步扩展了它以处理哪个表头处于活动状态，然后`sorting`在元素上应用一个类，以及一个`asc`. 这样，如果表头正在排序并且设置为 asc 或 desc，您可以使用 CSS 向最终用户显示。

```
ko.bindingHandlers.sort = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        var asc = ko.observable(false);

        var value = valueAccessor();
        var prop = value.prop;
        var data = value.arr;

        if(!bindingContext.$data['currentClicked'])
        {
            bindingContext.$data['currentClicked'] = ko.observable();
        }

        var isActive = ko.computed(function()
        {
            return (bindingContext.$data['currentClicked']() === prop)
        });

        ko.applyBindingsToNode(element, {
                    css: {'sorting': isActive, 'asc': asc}
                }, bindingContext);

        element.onclick = function(){

            asc(!asc())

            bindingContext.$data['currentClicked'](prop);                       

            data.sort(function(left, right){
                var rec1 = left;
                var rec2 = right;

                if(!asc()) {
                    rec1 = right;
                    rec2 = left;
                }

                var props = prop.split('.');

                for(var i in props)
                {
                    var propName = props[i];
                    var parenIndex = propName.indexOf('()');

                    if(ko.isWriteableObservable(rec1[propName]))
                    {
                        rec1 = rec1[propName]();
                        rec2 = rec2[propName]();
                    } else {
                        rec1 = rec1[propName];
                        rec2 = rec2[propName];
                    }
                }

                return rec1 == rec2 ? 0 : rec1 < rec2 ? -1 : 1;
            });
        };
    }
}; 
```

# jquery - jQuery 代码滞后于某些用户不透明度

> ID：14932260
> 
> 赞同：1
> 
> 时间：2013-02-18T08:38:27.090
> 
> 标签：jquery, google-chrome, animation, opacity, lag

我的 jQuery 代码有点问题。我有一个带有多个预加载图像的背景。我希望背景在一定时间内在这些图像之间切换。例子：

图像 1 作为背景淡入 15 秒后淡出为黑色 图 2 作为背景淡入 15 秒后淡出为黑色等。

但问题是在 Chrome 上，有一些非常短的延迟，我的访问者并不喜欢它。（例如，如果我们在 textarea 框上书写，它会在淡出为黑色期间冻结半秒）。

这是代码：

```
var bgs = shuffle(["image1.png","image2.png","image3.png"]);
var actualBG = -1;
var endBG = bgs[bgs.length-1]; // "image3.png"

function changeBackground()
{
    if(actualBG == -1) // If it's the first time we fade in a background
    {
        $(".bg")
            .css({'background-image': 'url('+bgs[0]+'")'})
            .animate({opacity: 1}, 2000);
        setTimeout(changeBackground, 8000);
        actualBG++;
    } else {
        if(actualBG == endBG) // If we reached the end of the array
            actualBG = 0; // Go back to first slot
        else
            actualBG++; // Otherwise load the next background image

        $(".bg").animate({opacity: 0}, 'slow', function() {
            $(this)
                .css({'background-image': 'url('+bgs[actualBG]+')'})
                .animate({opacity: 1});
        });
        setTimeout(changeBackground, 15000);
    }
} 
```

注意：这个问题在 Firefox 上不会出现，但在 Chrome 上会出现。

感谢您的回答！

# c# - 中止 WCF 连接

> ID：14932261
> 
> 赞同：0
> 
> 时间：2013-02-18T08:38:36.283
> 
> 标签：c#, wcf

有没有办法停止远程连接？

如果 WCF 连接是使用 ChannelFactory 创建的，则更详细

```
var aChannelFactory = new ChannelFactory<ISomeService>(aBinding, aEndpoint); 
```

并且连接是通过 GSM 使用的，扩大超时时间是有意义的，这样

```
aChannelFactory.CreateChannel(); 
```

有可能连接到远程站点。

现在的问题是用户可能希望停止创建连接（中止正在连接的窗口，仅使用程序的离线部分）。

但这怎么可能？

CreateChannel 调用是同步的。

即使它被包裹在一个线程中，现在也不应该使用 Thread.Abort。

有什么办法可以自动停止创建频道？

或者它必须对用户“伪造”，以便连接仍然运行直到它的超时（或成功），即使用户决定暂时离线工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:32:11.930

正如格兰特托马斯所说，没有必要中止连接。

# visual-studio-2008 - 多线程 DLL (/MD) 与多线程 (/MT)

> ID：14932262
> 
> 赞同：3
> 
> 时间：2013-02-18T08:38:37.627
> 
> 标签：visual-studio-2008, visual-c++

我的 VC++ MFC 解决方案包括四个项目。

1.  两个项目构建为 DLL
2.  一个项目构建为静态库
3.  一个项目使用上述三个库构建为 exe。

我需要在没有 CLR 支持的情况下在 Windows XP 中托管这个应用程序。所以我 在所有四个项目中都`Use of MFC`使用配置。`Use MFC in a Static Library`

`C++-> Code Genaration`所以我的问题是每个项目的配置应该是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:55:43.517

对所有项目使用 /MD。正如在引用的问题中所述：保持一致很重要。所以：甚至使用 /MD 构建您的静态库，因为它将在 /MD 可执行文件中使用。执行此操作时，链接器不会尝试链接解决错误的两个不同版本的 Microsoft 库（静态和动态）。

# arrays - 数值数组到第二个数值数组的映射

> ID：14932267
> 
> 赞同：3
> 
> 时间：2013-02-18T08:38:46.437
> 
> 标签：arrays, matlab, mapping

我在写，因为我想知道你们是否对 MATLAB 中的以下“数组映射”问题有建议

我有一个时间数组覆盖，以一分钟为单位的一年（T1）和另一个时间数组（T2），它分布不均匀并且（不一定）与 T1 重叠。一个例子是：

```
T1 = [1-Jan-2011 00:01:23, 1-Jan-2011 00:02:23.... end of year 2011]
T2 = [1-Jan-2011 00:04:12, 1-Jan-2011 03:014:54, ....] 
```

T1 和 T2 实际上是`datenum`格式的，但我想在这里举一个清楚的例子。

两者的长度不一样，( `length(T1) ~ 5*length(T2)`)，但我知道 T2 中没有两个元素在 T1 的同一区间内。我的意思是 T2 的一个元素将始终由 T1 中的一个唯一标识。

我想要做的是（有效=快速）将 T2 映射到 T1，以便我有一组索引 idx ，这`T1(idx(n))`是最接近的时间点`T2(n)`。我已经有一个例行程序，但它有点慢。

建议？

提前非常感谢！里卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:19:56.177

据我所知，结果`datenum`是简单的数字。

```
[~,idx1]=sort([T1+offset,T2]);
idx = find(idx1>length(T1));
idx = idx - (0:length(idx)-1); 
```

如果您省略`offset`（或使用`0`），这将为您提供`T2`最小元素索引的每个元素（如果`T1`该元素较大）。为了得到最接近的那个，添加一半的间隔长度（即`T1`相当于半分钟）。`T1``datenum`

[编辑] 如果`T1`不包含等距步骤，则可以尝试使用包含每个间隔中间的向量`T1`来代替。

```
T1m = [(T1(1:end-1) + T1(2:end))/2];
[~,idx1]=sort([T1m,T2]);
idx = find(idx1>length(T1m)) - (0:length(T2)-1); 
```

[/编辑]

这是如何工作的：

我们首先对所有时间点的向量进行排序，然后忽略实际结果（替换`~`为变量名，例如，`T`如果您想以某种方式使用它）。的第二个返回值`sort`是原始数组中排序数组的每个条目的索引。我们想知道那些 from`T2`结束的地方，即原始连接数组`[T1 T2]`中的那些索引大于 中的值的数量`T1`，这是`idx`来自第二行的值。现在这些索引指的是组合数组的元素，这意味着相对于`T1`它们对于第一个元素是正确的，第二个元素减一个（因为`T2`之前抛出的第一个元素），第三个元素减两个（因为的两个要素`T2`来之前）...，我们在第三行更正。

您可以将第二行和第三行合并为`idx = find(idx1>length(T1)) - (0:length(T2)-1);`

# php - PHP Logging 选项记录所有函数调用？

> ID：14932268
> 
> 赞同：3
> 
> 时间：2013-02-18T08:38:49.630
> 
> 标签：php, logging

是否有 PHP（或 Apache？）选项可以在我的服务器端代码中启用每个函数调用的日志记录？（我想使用它而不是 error_log 来记录/分析代码流）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T08:43:13.720

使用您要的东西的[**xDebug**](http://xdebug.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:46:15.397

如果您不允许安装[Xdebug](http://xdebug.org)，您可以尝试[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)

# c# - 从 XML 文件中提取特定节点

> ID：14932269
> 
> 赞同：0
> 
> 时间：2013-02-18T08:38:57.187
> 
> 标签：c#, xml

我想用 C# 从下面的 XML 文件中读取一个部分。

```
 <?xml version="1.0" encoding="utf-8" > 
 <DataSet>
 <xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
 <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
 <xs:complexType>
 <xs:choice minOccurs="0" maxOccurs="unbounded">
 <xs:element name="Table">
 <xs:complexType>
 <xs:sequence>
  <xs:element name="Column1" type="xs:string" minOccurs="0" /> 
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  </xs:choice>
  </xs:complexType>
  </xs:element>
  </xs:schema>
 <diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
 <NewDataSet>
 <Table diffgr:id="Table1" msdata:rowOrder="0">
  <Column1><Properties><Property>..... 
```

我想提取节点下方的`Column1`节点。该`Properties`节点有很多`Property`节点，所以我想要`Properties`具有所有节点的`Property`节点。

请让我知道在 C# 中获取节点的最简单有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:15:28.170

您可以使用 Linq-to-XML 类来解析字符串，然后使用 XPath 表达式来选择您想要的节点：

```
XElement doc = XElement.Parse(s); //where s is a string containing the XML
var properties = doc.XPathSelectElements("//Column1/Properties"); 
```

现在`properties`包含您想要的节点的可枚举。

如果要遍历所有属性节点，可以这样做：

```
foreach(var pp in properties)
{
    foreach(var p in pp.Elements("Property"))
    {
         //do something
    }
} 
```

# twitter-bootstrap - 如何使用 twitter bootstrap 向链接添加图标

> ID：14932273
> 
> 赞同：3
> 
> 时间：2013-02-18T08:39:08.403
> 
> 标签：twitter-bootstrap

![在此处输入图像描述](../Images/1e4f855d67cd93daf6a65bf7b6e4bf59.png)我想使用 twitter bootstrap 为我的链接添加图标。

我有输入字段，如快照所示。我希望一切看起来都一样，包括框和图标，但不是输入框，而是我可以有一个链接。

PS：我不想要一个选择框。我想要一个带有图标的链接，就像我可以有一个带有图标的选择框一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T10:21:36.997

[检查 jsfiddle](http://jsfiddle.net/shail/zqNzk/show) 这样你就可以使用带有链接的图标

```
<li><a href=""><i class=" icon-pencil icon-2x"></i>About Us</a></li> 
```

# asp.net - ASP .NET MVC3 模拟

> ID：14932274
> 
> 赞同：1
> 
> 时间：2013-02-18T08:39:11.573
> 
> 标签：asp.net, asp.net-mvc-3, web-applications, azure, emulation

我正在尝试将 ASP .NET 4 MVC 3 网站放入 Web 应用程序中，并通过滚动将其部署到天蓝色。当我尝试在模拟器中运行它时，我得到了这个：

> 依赖项解析失败，类型 =“INIConnect.Common.Infrastructure.Interfaces.IUser”，名称 =“LoggedInUser”。异常发生时：解决时。例外情况是： InvalidOperationException - 当前类型 INIConnect.Common.Infrastructure.Interfaces.IUser 是一个接口，无法构造。您是否缺少类型映射？

* * *

在异常发生时，容器是：

```
Resolving INIConnect.Common.Infrastructure.Interfaces.IUser,LoggedInUser 
```

我不知道这是什么意思....有人可以帮忙吗？

谢谢！

# text - 页面中心之后的文本

> ID：14932281
> 
> 赞同：0
> 
> 时间：2013-02-18T08:39:32.243
> 
> 标签：text, center

我正在尝试用一些文本（一个单词）制作一个简单的标题（HTML）。我希望文本跟随页面的中心，我的意思是当我用鼠标缩小页面宽度时，我希望文本将其位置更改为页面的新中心。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:06:50.153

下面是示例代码。重要的是 CSS“文本对齐”。这有帮助吗？

```
<!DOCTYPE html>

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <title></title>
   <meta name="description" content="">
   <meta name="viewport" content="width=device-width">
</head>
<body>

    <style type="text/css">
       p.centerPara{text-align: center}
    </style>

    <p class="centerPara">Hello world!</p>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:00:45.280

试试这个示例代码。可能会简单一些。:)

```
<!DOCTYPE HTML>
<html>
<head>
<title>Title goes here</title>
<style type="text/css">

#banner{
width:100%
/*Additional banner code */
}

#banner h1{
text-align:center;
}
</style>
</head>

<body>

<div id="banner">
<h1>OneWord</h1>
</div>

</body>
</html> 
```

基本上，同样的事情。文本对齐：中心是最重要的。

# sql - SQL 关键字搜索的首选方式

> ID：14932283
> 
> 赞同：2
> 
> 时间：2013-02-18T08:39:35.913
> 
> 标签：sql, select, self-join

我有一个格式如下的表格：

```
row_key  extID  tag   val
-------  -----  ---   ---
1         1     A     a
2         1     A     b
3         1     B     c
4         2     A     d
5         2     C     e 
```

现在我想要所有的 extID，其中有几对具有特定值的 (tag, val)，例如：

```
(tag, val) = (A,a) AND (tag, val) = (B,c) 
```

或者，

```
(tag, val) = (C,e) 
```

约束的数量可以改变。

我可以想到几种方法来做到这一点：

1.  对每个约束执行自联接
2.  在调用程序中进行搜索（迭代）（多个 SQL 查询）
3.  （也许？）编写一个 SQL 函数来执行此操作
4.  嵌套的 SELECT 子句（将“extID”传递到外部级别并使用`WHERE extID IN (SELECT extID FROM ...)`
5.  *我找不到的唯一真正的解决方案。*

哪一种是首选（最快和最优雅）的方法？（当然，“当然，5\. 是正确答案除外。”）

我认为多重 SELF-join 非常优雅。但是，我不知道它是否快速且相对内存效率高。

此外，我想使用一种无​​需适应即可与 MySQL、PostgreSQL 和 SQLite 一起使用的方式——这就是我不能使用 PIVOT afaiu 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:51:34.757

```
SELECT  extID
FROM    tableName
WHERE   (tag = 'A' AND val = 'a') OR
        (tag = 'B' AND val = 'c')
GROUP   BY extID
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/58e5e/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

**更新 1**

由于您没有提到 and 可以重复组合，`tag`因此`val`需要`DISTINCT`关键字。

```
SELECT  extID
FROM    tableName
WHERE   (tag = 'A' AND val = 'a') OR
        (tag = 'B' AND val = 'c')
GROUP   BY extID
HAVING COUNT(DISTINCT tag, val) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/58e5e/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:55:19.060

元组语法可以工作：

```
SELECT  extID
FROM    tableName
WHERE   (tag, val) in (('A', 'a'), ('B', 'c'))
GROUP   BY extID
HAVING  COUNT(DISTINCT tag, val) = 2 
```

`HAVING COUNT(DISTINCT tag, val) = 2`确保每个约束元组至少出现一次。这意味着`2`需要根据查询中约束元组的数量进行调整。

如果您有两个像这样相同的行并且条件是`('C', 'e')`：

```
row_key  extID  tag   val
-------  -----  ---   ---
5         2     C     e
6         2     C     e 
```

对此的查询如下所示：

```
SELECT  extID
FROM    tableName
WHERE   (tag, val) in (('C', 'e'))
GROUP   BY extID
HAVING  COUNT(DISTINCT tag, val) = 1 
```

# vim - 安装插件时如何解决这些 Vimball 问题？

> ID：14932289
> 
> 赞同：1
> 
> 时间：2013-02-18T08:39:56.887
> 
> 标签：vim, installation

我不喜欢 Vim 中的 Vimball 文件，但越来越多的插件使用 Vimball 来安装自己。

一个月前我安装了一个 64 位操作系统并将我的 vimfiles 目录移动到**c:\users\"my-name"**
没问题。一切正常。

今天我想更新一个插件（现在在 Vimball 中）。

采购插件（`:so %`）后，
我收到了很多错误：

```
Error detected while processing function vimball#Vimvall..vimball#VimballHome:  
E739: Cannot create directory C:/Progra~1/Vim/vimfiles  
Error detected while processing function vimball# Vimball..<SNR>119_ChgDir:  
E344: Can't find directory "C:\Progra~1\Vim\vimfiles in cdpath  
E472: Command failed 
```

......等等这样的错误一整页。

发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:01:56.290

Vimball 被解压到 ; 上的第一个现有目录中`'runtimepath'`。根据您的输出，看起来 Vim 无法识别您将 vimfile 移动到的位置，而是默认为系统范围的`C:/Progra~1/Vim/vimfiles`位置，该位置可能受 Windows 权限保护，从而导致错误。

检查输出`:set runtimepath?`；第一个组件应该是你的`C:\Users\my-name\vimfiles`；如果不是，你需要让 Vim 包含它，或者通过外部方式（例如设置`HOME`环境变量），或者直接在你的`~/.vimrc`with `:set runtimepath=...`. 详情请参阅`:help runtimepath`。

另外，检查`g:vimball_home`; 这个 Vimball 配置覆盖了默认逻辑。

作为一种解决方法（不是解决方案），您可以将自定义安装目录传递给`:UseVimball`命令。

# java - 导入 com.google.android.gcm.GCMRegistrar；

> ID：14932296
> 
> 赞同：1
> 
> 时间：2013-02-18T08:40:19.910
> 
> 标签：java, google-cloud-messaging

我正在尝试创建基于 GCM 的应用程序。我按照[此处](http://developer.android.com/google/gcm/gs.html#android-app)所述的说明进行操作。

在第 4 步中，我需要导入以下行：

```
import com.google.android.gcm.GCMRegistrar; 
```

但我收到一个错误： ![在此处输入图像描述](../Images/b2ab0fbbb795b5716f973cc8462976a4.png)

正如我所说，我遵循了所有步骤，知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:55:31.783

请按照以下步骤操作

1.  在项目下创建一个lib文件夹
2.  将所有jar文件放在lib文件夹中
3.  展开 lib 文件夹选择所有 jars
4.  右键单击然后构建路径并选择添加到构建路径选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:57:58.863

右键单击项目并添加以构建路径-

![在此处输入图像描述](../Images/98065b6aacda98d7c3ac2293dfdb4df6.png)

![在此处输入图像描述](../Images/16eda111f75392079cac36e0848e85d4.png)

# c# - 所有数据类型的条件 XML

> ID：14932309
> 
> 赞同：1
> 
> 时间：2013-02-18T08:41:03.067
> 
> 标签：c#, xml-serialization

我正在尝试使用 [条件 xml 序列化中提到的方法创建一个条件 XML](https://stackoverflow.com/questions/4094985/conditional-xml-serialization)

但是，它在字符串的情况下工作得非常好，但是如果我添加另一种数据类型，例如`Int32`or `float`，那么即使没有为其分配任何值，默认值 0 也会插入到 XML 中。

这是我的代码。

```
public class Books
{
    public String BookName;
    [XmlElement("Book")]
    public List<Book> BookList;
}

public class Book
 {
    [XmlAttribute] public string Title {get;set;}
    public bool ShouldSerializeTitle() {
        return !string.IsNullOrEmpty(Title);
    }

    [XmlAttribute] public Single FloatValue { get; set; }
    public bool ShouldSerializeisFloatValue()
    {
       if (FloatValue == 0.0)
         return false;
       return true;
    }     

    [XmlAttribute] public Int32 IntValue { get; set; }
    public bool ShouldSerializeInt32()
    {
      if (IntValue <= 0)
        return false;
      return true;
    }
} 
```

这就是我使用它的方式。

```
Books books = new Books();
books.BookList = new List<Book>();
books.BookName = "My Book";

Book book1 = new Book();
book1.Title = "t1";
book1.FloatValue = 1.0F;
books.BookList.Add(book1);

Book book2 = new Book();
book2.Description = "d2";
book2.IntValue = 12;
books.BookList.Add(book2);

var serializer = new XmlSerializer(books.GetType());
String xmlFileName = @"C:/Test.xml";
TextWriter writer = new StreamWriter(xmlFileName);
serializer.Serialize(writer, books); 
```

这是我得到的 XML

```
-<Books>
<BookName>My Book</BookName>
<Book IntValue="0" FloatValue="1" Title="t1"/>
<Book IntValue="12" FloatValue="0" Description="d2"/>
</Books> 
```

我希望在第一种情况下，`IntValue`属性不应该存在，而在第二行，`Float`值不应该存在于我的 XML 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:26:25.967

我猜您的`ShouldSerialize*`方法名称应该是这样的（它们与您代码中的属性名称不匹配）：

```
 [XmlAttribute] public Single FloatValue { get; set; }
    public bool ShouldSerializeFloatValue()
    {
       if (FloatValue == 0.0)
         return false;
       return true;
    }     

    [XmlAttribute] public Int32 IntValue { get; set; }
    public bool ShouldSerializeIntValue()
    {
      if (IntValue <= 0)
        return false;
      return true;
    }
} 
```

# java - Google App Engine 实例因 ErrorCode 121 崩溃

> ID：14932312
> 
> 赞同：0
> 
> 时间：2013-02-18T08:41:10.723
> 
> 标签：java, google-app-engine, google-cloud-datastore

我的 GAE 应用程序上周五突然停止工作。我尝试了几次在后台启动一个实例（使用 cron 和手动），但是在实例启动一分钟后，我收到了这个错误：

```
/cron/spreadsheet 500 4660ms 0kb instance=0 AppEngine-Google; 
(+http://code.google.com/appengine)

0.1.0.1 - - [17/Feb/2013:12:40:05 -0800] "GET /cron/spreadsheet HTTP/1.1" 500 0 - 
"AppEngine-Google; (+http://code.google.com/appengine)"
"backend.myclimagest.appspot.com" ms=4661 cpu_ms=692 queue_name=__cron 
task_name=5ed789ec52683cb170ed3c2cc4ec48c9 pending_ms=3651 exit_code=121 
instance=0 

W 2013-02-17 12:40:05.268
A problem was encountered with the process that handled this request, 
causing it to exit. This is likely to cause a new process to be used 
for the next request to your application. (Error code 121) 
```

我不知道该怎么做，因为这个错误代码没有记录。我也尝试重新部署，但没有运气。您是否遇到同样的问题，您是否找到了解决方案？我认为这并不重要，但该应用程序是使用 Eclipse 用 Ja​​va 开发的。该应用程序正在生产中，所以我真的需要尽快解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:06:26.897

您的 App Engine 调度程序似乎有问题。试试这个，从似乎有帮助的性能设置中删除自动设置。[谷歌网上论坛](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/d36A_yvdoHo)

也检查这个 Google 官方页面[管理您的应用程序的资源使用](https://developers.google.com/appengine/articles/managing-resources)

# android - 模拟器的 GPS 和 NETWORK 的 hasSystemFeature 总是返回 false？

> ID：14932313
> 
> 赞同：0
> 
> 时间：2013-02-18T08:41:20.303
> 
> 标签：android, networking, gps, hardware

可以使用 . 检查 Android 中硬件的可用性`hasSystemFeature()`。但是，当我尝试在模拟器上调用时`context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS)`， `context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_LOCATION_NETWORK)`两个命令都返回 false。

尽管模拟器具有 GPS 的事实。可能是什么问题呢？如果模拟器有 GPS 或 NETWORK 硬件，我该如何签入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:00:01.060

尝试为模拟器设置您自己的纬度和经度：遵循此：使用 DDMS

```
->go to your android/tools directory, and launch the DDMS tool
->select the Emulator Control Tab
->fill the Location Controls fields with the longitude and latitude values
->press the Send button 
```

# c++ - 如何在 Windows 或 Linux、32 位或 64 位、Visual Studio 或 g++ 上静态或动态编译 Qt 5

> ID：14932315
> 
> 赞同：56
> 
> 时间：2013-02-18T08:41:29.997
> 
> 标签：c++, visual-studio-2010, qt, compilation, visual-studio-2012

只是一个帖子来帮助那些试图这样做的人，因为我没有博客。

这也适用于linux。随意编辑和改进它。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-18T08:41:29.997

注意：我还写了另一篇文章，用Windows 上[的自动脚本从 GIT 源代码编译。](https://blog.afach.de/?page_id=399)您可以为 Linux 修改它，因为差异显示在这篇文章中。

本文不断更新。如果这对您有帮助，请给它“竖起大拇指”，这样我就可以知道它是在帮助人们而不是无用。

如果您有任何意见或发现拼写错误，请告诉我，以便我改正。

首先，无论您要编译 32 位还是 64 位版本都没有关系。唯一的区别是您必须从 Visual Studio 中选择的命令提示符快捷方式，它将初始化不同的环境变量。

* * *

***让我们从这个开始：***

1.  下载并安装 Perl：[下载链接](http://www.perl.org/get.html)

2.  下载并安装 Python：[下载链接](http://www.python.org/download)

3.  下载并安装***Windows SDK***（可能不是必需的，但推荐）我使用的是 Windows 8，所以这是我使用的版本：[下载链接](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx) ，否则为您的 Windows 找到合适的版本。

4.  下载并安装***DirectX SDK*** *（如果你想用OpenGL*编译可能需要） [下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=6812)

5.  下载并解压***jom***到某个文件夹（对于 linux 不需要）（*jom是一个用 VS 并行编译东西的工具，有一种方法可以用**nmake*做到这一点，但我不熟悉它）[下载链接](http://qt-project.org/wiki/jom)

6.  下载***Qt Opensource***并解压它，比如说`C:\Qt\Qt5.6`，所以现在`qtbase`可以在`C:\Qt\Qt5.6\qtbase`.

7.  仅适用于 Windows：**您真的希望它完全静态吗？**

    通常，即使您选择静态编译，编译器本身仍然不会静态合并其库。如果您希望编译的源代码相对于编译器（Visual Studio）是完全静态的，则必须在 Qt 的 QMAKE 文件中进行此调整。

    转到文件（从你的 Qt 源目录开始），**对于高于 2012 的版本，只需在任何地方使用正确的版本（例如 win32-msvc2015）**：

    *   一种。**对于 VS2012：** qtbase\mkspecs\win32-msvc2012\qmake.conf

    *   湾。**对于 VS2010：** qtbase\mkspecs\win32-msvc2010\qmake.conf

    *   C。**对于 Qt 5.5.0 及更高版本**（任何 VS 版本）：qtbase\mkspecs\common\msvc-desktop.conf

    并编辑以下行

    ```
     QMAKE_CFLAGS_RELEASE    = -O2 -MD
     QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO += -O2 -MD -Zi
     QMAKE_CFLAGS_DEBUG      = -Zi -MDd 
    ```

    到

    ```
     QMAKE_CFLAGS_RELEASE    = -O2 -MT
     QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO += -O2 -MT -Zi
     QMAKE_CFLAGS_DEBUG      = -Zi -MTd 
    ```

注意：Qt 5.6+ 有一个 configure 参数`-static-runtime`可以为你做这件事。对于新版本的 Qt，您可能不再需要手动执行此操作。

8.  在 linux 中启动终端，或者在 Windows 中启动 Visual Studio 的终端（设置了正确的环境变量，或者使用[vcvarsall.bat](https://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx?f=255&MSPPError=-2147217396)）。要启动命令提示符并让它自动为您执行此操作，请转到开始，所有程序：

    *对于 8 之前的 Windows 版本：*找到 Microsoft Visual Studio 201x 文件夹，然后启动命令提示符（x86 用于 32 位或 x64 用于 64 位）。

    *对于 Windows 8：*转到“*开始*”，键入“cmd”，所有可用于命令提示符的版本都会显示出来。选择适当的 Visual Studio 版本（x86 代表 32 位或 x64 代表 64 位）。

以下是它的外观截图。如果存在，则始终倾向于选择“本机”。

[![在此处输入图像描述](../Images/4d0f91869e6ddbd3703ca80dbbc26bae.png)](https://i.stack.imgur.com/EHD1X.jpg)

9.

*   **对于 VS2012：对 VS2012**执行以下命令

    ```
     set QMAKESPEC=win32-msvc2012
     set QTDIR=C:\Qt\Qt5.7\qtbase
     set PATH=C:\Qt\Qt5.7\qtbase\bin;%PATH% 
    ```

注意：`QMAKESPEC`对于 Qt 5.8+ 版本，设置环境变量被认为是错误的。不要为新版本这样做。

用于动态链接（需要 8 GB）

```
configure -debug-and-release -opensource -platform win32-msvc2012 -opengl desktop 
```

对于没有示例的动态链接（需要 2 GB）

```
configure -debug-and-release -opensource -platform win32-msvc2012 -opengl desktop -nomake examples -nomake tests

 Now the last command depends on what you want to compile. Just type configure -help and see what the available command-line parameters are. 
```

对于静态链接（需要 70 GB，是的，这很疯狂，不做示例和演示更合理）。

```
configure -debug-and-release -opensource -platform win32-msvc2012 -opengl desktop -static 
```

对于没有示例的静态链接（需要 4 GB，更有意义）。

```
configure -debug-and-release -opensource -platform win32-msvc2012 -opengl desktop -static -nomake examples -nomake tests 
```

现在这需要一两分钟，然后按如下方式使用 jom（假设它是在 C:\Qt\jom 中提取的）：

```
C:\Qt\jom\jom.exe -j 50 
```

50 代表您要使用的核心数。我使用 50 是因为我有 8 个线程，并且仅使用 8 个不会完全占用所有内核，所以越多越好，但不要太贪心，因为它可能会使您的系统没有响应。

*   **对于 VS2010：对 VS2010**执行以下命令

    ```
    set QMAKESPEC=win32-msvc2010
    set QTDIR=C:\Qt\Qt5.7\qtbase
    set PATH=C:\Qt\Qt5.7\qtbase\bin;%PATH% 
    ```

注意：`QMAKESPEC`对于 Qt 5.8+ 版本，设置环境变量被认为是错误的。不要为新版本这样做。用于动态链接（需要 8 GB）

```
configure -debug-and-release -opensource -platform win32-msvc2010 -opengl desktop 
```

对于没有示例的动态链接（需要 2 GB）

```
configure -debug-and-release -opensource -platform win32-msvc2010 -opengl desktop -nomake examples -nomake tests 
```

最后一个命令取决于您要编译的内容。只需键入 configure -help 并查看可用的命令行参数是什么。对于静态链接（需要 70 GB，是的，这很疯狂，不做示例和演示更合理）。

```
configure -debug-and-release -opensource -platform win32-msvc2010 -opengl desktop -static 
```

对于没有示例的静态链接（需要 4 GB，更有意义）。

```
configure -debug-and-release -opensource -platform win32-msvc2010 -opengl desktop -static -nomake examples -nomake tests 
```

现在这需要一两分钟，然后按如下方式使用 jom（假设它是在 C:\Qt\jom 中提取的）：

```
C:\Qt\jom\jom.exe -j 50 
```

50 代表您要使用的核心数。我使用 50 是因为我有 8 个线程，并且仅使用 8 个不会完全占用所有内核，所以越多越好，但不要太贪心，因为它可能会使您的系统没有响应。

*   **对于 Linux：**

Linux 与 Windows 有一点不同。建议在linux下编译后*安装。*老实说，这是它对我没有问题的唯一方法。

对 Linux 执行以下命令。不要忘记将路径替换为 Qt 源的正确路径

```
 export QMAKESPEC=linux-g++
    export QTDIR=/home/username/Qt5.7/qtbase
    export PATH=/home/username/Qt5.7/qtbase/bin:$PATH 
```

注意：`QMAKESPEC`对于 Qt 5.8+ 版本，设置环境变量被认为是错误的。不要为新版本这样做。

假设您要将编译后的源代码安装到目录`/home/username/Qt5.7-install`中。在这种情况下，将以下内容添加到以下*任何*配置命令中：

```
-prefix /home/username/Qt5.7-install 
```

**警告**：不要安装到同一个源目录。那是完全错误的！

如果`-prefix`未设置，将选择默认路径，这是`/usr/local/`我猜的。我不喜欢使用 root 安装任何东西。我总是喜欢安装在我的用户文件夹中，因此可逆性和升级不是问题。

以下是不同的可能`configure`命令，具体取决于您要执行的操作。

用于动态链接（需要 8 GB）

```
./configure -debug-and-release -opensource -platform linux-g++ -opengl desktop 
```

对于没有示例的动态链接（需要 2 GB）

```
./configure -debug-and-release -opensource -platform linux-g++ -opengl desktop -nomake examples -nomake tests 
```

现在最后一个命令取决于您要编译的内容。只需键入 `./configure -help`并查看可用的命令行参数是什么。

对于静态链接（需要 70 GB，是的，这很疯狂，不做示例和测试更合理）。

```
./configure -debug-and-release -opensource -platform linux-g++ -opengl desktop -static 
```

对于没有示例的静态链接（需要 4 GB，更有意义）。

```
./configure -debug-and-release -opensource -platform linux-g++ -opengl desktop -static -nomake examples -nomake tests 
```

制作完成后，运行make命令

```
make -j 50 
```

50 代表您要使用的核心数。我使用 50 是因为我有 8 个线程，并且仅使用 8 个不会完全占用所有内核，所以越多越好，但不要太贪心，因为它可能会使您的系统没有响应。

10.  等待 2 个多小时，直到编译完成。

11.  清理！对于 Windows，您可以使用以下命令节省大量空间：`C:\Qt\jom\jom.exe clean` 对于 linux，使用以下命令：`make clean`

您可以将编译文件夹的大小从 8 GB 减少到 2.5 GB（用于动态链接）和从 70 GB 减少到 35 GB（用于静态链接）。

* * *

为了在 Qt Creator 中使用这个编译版本：

1.  启动 Qt Creator
2.  转到工具，选项
3.  从左侧的列表中选择 Build and Run。
4.  转到“Qt 版本”选项卡
5.  单击“添加”并从 qtbase 中的 bin 所在的文件夹中选择 qmake，因此从上方：

    C:\Qt\Qt5.7\qtbase\bin\qmake.exe

（或者对于 Linux 选择您安装已编译 Qt 源的路径，相当于`/home/username/Qt5.7-install/qtbase/bin/qmake`本教程中的路径）

6.  点击“申请”
7.  转到“套件”选项卡
8.  点击“添加”
9.  给它一个名字，选择合适的编译器（对于 VISUAL STUDIO EXPRESS，不要选择 amd64 FOR 64-BIT ，它不会工作，选择 x86_amd64 INSTEAD）
10.  单击确定。

现在只需打开一个项目，您会发现它要求您选择您添加的套件。

享受 ：）

# php - 带有布尔值的Mysql电子邮件搜索给出错误值

> ID：14932317
> 
> 赞同：1
> 
> 时间：2013-02-18T08:41:37.187
> 
> 标签：php, mysql

我的搜索查询有问题。我正在搜索电子邮件。

我有这样的搜索查询：

```
 $query = sprintf("SELECT mailer_subscribers.id, mailer_subscribers.email, mailer_subscribers.status,mailer_segmentlinker.segment_id, mailer_segmenten.segmentnaam FROM mailer_subscribers 
                        JOIN mailer_segmentlinker ON mailer_subscribers.id=mailer_segmentlinker.subscriber_id
                        JOIN mailer_segmenten ON mailer_segmentlinker.segment_id=mailer_segmenten.id
                        WHERE MATCH (email) AGAINST ('%s*' IN BOOLEAN MODE)", $key); 
```

但是当我在示例“ `john.smith`”中输入关键字时，它会返回所有具有相同名称或姓氏的值

```
john.smith@example.com
john.notsmith@example.com
smith.hendrix@example.com
josh.josh@smith.com 
```

我需要它会给我一个列表`john.smith`。

* * *

编辑：

对我有帮助的解决方案是： `WHERE mailer_subscribers.email LIKE '%%%s%%'", $key);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:08:12.527

尝试将关键字放在双引号中以搜索确切的短语。

```
... AGAINST ('\"%s*\"' IN BOOLEAN MODE) ... 
```

**[布尔全文搜索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)：**

> 'applebanana'
> 查找至少包含两个单词之一的行。
> 
> '"some words"'
> 查找包含确切短语“some words”的行（例如，包含“some words of intelligence”但不包含“some noise words”的行）。

# jquery - 从 JQuery 模板向服务器传递参数

> ID：14932320
> 
> 赞同：1
> 
> 时间：2013-02-18T08:41:58.857
> 
> 标签：jquery

我通过 json 格式的 wcf 服务获取 jquery 模板中的值。

```
<script id="ExItemTemplate" type="text/x-jquery-tmpl">
     <span class="some class" > ${user_id} </span>
</script> 
```

在这里，`${user_id}`被替换为从 wcf 服务获取的值的 id。

方法存在于服务器端，它将字符串作为参数并在服务器端代码上返回用户名。我想从存在用户 ID 的模板中调用此方法。

注意：模板执行多次。所以每次都有新的身份证。使用 Asp.net 和 Csharp.net

# spring - 通过 Web Socket 或 AJAX 刷新页面内容

> ID：14932322
> 
> 赞同：0
> 
> 时间：2013-02-18T08:42:04.083
> 
> 标签：spring, google-app-engine, rest, jquery, websocket

我正在开发一个基于 Springs MVC 和带有 Objectify 的 Google App Engine 的项目。

这个应用程序的主要功能是：如果有人向数据存储区发布了新内容，那么它应该会自动发布到它所连接的浏览器，而无需刷新页面内容。基本上它是一个类似网站的新闻。发送到浏览器的数据是基于 REST API 的 JSON 数据。

为了实现这个功能，我想到了使用以下方法：

1.  **AJAX**：我想过每 2-3 分钟使用一次 AJAX 调用来更新。但是这个解决方案似乎不可行，因为来自许多浏览器的许多 AJAX 调用导致许多数据存储读取操作。

2.  **Web Socket**：这个概念对我来说很新。我不知道这件事。一些**pusher.com**使用此技术建立此类连接。

现在我需要你的建议，使用上面两个中的哪一个，或者我也对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:10:15.063

Google 应用引擎不支持 Web 套接字，但它支持类似的东西，称为通道 api，它也适用于旧版浏览器。这可能不可行，具体取决于您将连接多少人（每 100 个频道收费 1 美分）。频道也有一些注意事项：[https ://developers.google.com/appengine/docs/python/channel/overview#Caveats](https://developers.google.com/appengine/docs/python/channel/overview#Caveats)

至于使用 Ajax - 如果您将响应缓存在 memcache 中并每 3 分钟刷新一次密钥，那么除非启动新实例或密钥过期，否则您将不会进行任何数据存储读取。

# php - phpChart不显示

> ID：14932324
> 
> 赞同：0
> 
> 时间：2013-02-18T08:42:10.637
> 
> 标签：php, charts

我正在尝试实现一个 phpChart Lite（来自 phpchart.net）。我已经调整了所有代码，但图表没有显示。我在底部有一行说我正在使用 phpchart 但图表没有显示。我已经粘贴了生产者网页上的示例，但它没有再次显示。你有什么想法为什么它不显示？

这是我正在使用的代码。

```
require_once('phpchart/conf.php'); 
$pc = new C_PhpChartX(array(array(11, 9, 5, 12, 4)),'basic_chart4');
$pc->set_animate(true);
$pc->set_title(array('text'=>'Basic Chart'));
$pc->draw(); 
```

是否还有其他配置可以显示图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:22:58.403

您是否在 conf.php 中设置了 SCRIPTPATH 值？您应该在 Chrome 中打开 Developer Tool 或在 Firefox 中打开 Firebug，并查看 javascript 控制台中是否有任何错误。

# file-upload - 如何使用主干更新文件上传消息？

> ID：14932326
> 
> 赞同：0
> 
> 时间：2013-02-18T08:42:21.563
> 
> 标签：file-upload, backbone.js, asynchronous, backbone-views, q

我正在使用 javascript 上传多个文件。

上传文件后，我需要运行几个处理函数。

由于需要处理时间，我需要在前面有一个 UI，告诉用户整个过程的估计剩余时间。

基本上我有3个功能：

1.  /upload - 这是上传文件的端点
2.  /generate/metadata - 这是应该在 /upload 之后触发的下一个端点
3.  /process - 这是最后一个端点。应该在 /generate/metadata 之后触发

这就是我期望屏幕基本上看起来的样子。

![在此处输入图像描述](../Images/1ef495b449296f0f7e048bfc65a5f6c9.png)

应显示剩余百分比和剩余时间等信息。

**但是，我不确定是否允许服务器提供信息，或者我只使用 javascript 进行粗略估计。**

我还需要更新屏幕，比如告诉用户消息，例如

“正在上传”

如果我在功能 1。

“生成元数据”，如果我在功能 2。

“处理中......”如果我在功能 3。

功能 2 仅在功能 1 成功完成后发生。

功能 3 仅在 2 成功完成后发生。

我已经在使用 q.js 承诺来处理其中的某些部分，但是代码变得非常混乱。

我最近遇到了 Backbone，它允许以结构化的方式来处理我想要的单页应用程序行为。

对于端点的成功或失败，服务器端返回 json 响应没有任何问题。

我想知道使用 Backbone.js 实现此功能的好方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:59:08.373

您可以使用存储后端进程状态的“进度”文件或数据库条目。让您的后端进程定期更新此文件。例如，将其写入文件：

```
{"status": "Generating metadata", "time": "3 mins left"} 
```

用户提交文件后，前端`progress`使用简单的 ajax 调用和[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)开始 ping 后端函数。该`progress`函数将简单地打开此文件，获取 JSON 格式的状态信息，然后更新前端进度条。

您可能希望将 ajax 调用附加到您的模型。让您的前端视图注意更改`status`并相应更新（例如进度条）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:53:50.037

长轮询请求： [更新主干模型/视图的轮询请求](https://stackoverflow.com/questions/11450461/polling-request-for-updating-backbone-models-views)

基本上，当您上传文件时，您将为每个给定文件分配一个“FileModel”。FileModel 将每隔 N 秒启动一次长轮询请求，直到获得“完成”状态。

# three.js - 使用 JSONLoader 的多种材料？

> ID：14932329
> 
> 赞同：2
> 
> 时间：2013-02-18T08:42:40.550
> 
> 标签：three.js

是否可以将两种材质分配给一个已使用 JSONLoader 加载的网格？

我在搅拌机中制作了一个简单的角色并将其导出为 three.js 格式，其中包含变形目标和 UV。

我试图将纯色材料分配给身体，将图片分配给我的角色头部（[http://touhou.ru/dev/webgl-test-stackoverflow/kourindouhime.jpg](http://touhou.ru/dev/webgl-test-stackoverflow/kourindouhime.jpg)），但是在加载网格和材料后我得到了灰色-彩色网格。

这是我项目的生产版本（使用 wasd 移动，当你看到你要控制的灰色播放器网格时，这正是我所说的）：[http ://touhou.ru/dev/webgl-test -堆栈溢出/](http://touhou.ru/dev/webgl-test-stackoverflow/)

这是我使用 JSONLoader 加载网格和材质的方式：

```
 var player_loader = new THREE.JSONLoader();

  player_loader.load( "running_babe.js", function(geo, material) {
    material[0].morphTargets = true;
    material[1].morphTargets = true;
    var materials = new THREE.MeshFaceMaterial(material);
    player = new THREE.Mesh( geo, materials );
    scene.add(player);
  }); 
```

难道我做错了什么？

* * *

更新：问题出在我的出口中。现在第二种材料看起来是这样的：

```
 {
            "DbgColor" : 15597568,
            "DbgIndex" : 1,
            "DbgName" : "Material.001",
            "blending" : "NormalBlending",
            "colorAmbient" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
            "colorDiffuse" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
            "colorSpecular" : [0.5, 0.5, 0.5],
            "depthTest" : true,
            "depthWrite" : true,
            "mapDiffuse" : "kourindouhime.jpg",
            "mapDiffuseWrap" : ["repeat", "repeat"],
            "shading" : "Lambert",
            "specularCoef" : 50,
            "transparency" : 1.0,
            "transparent" : false,
            "vertexColors" : false
    } 
```

它工作得很好。谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:59:59.220

如果我正确地查看了您的代码，`running_babe.js`那么您正在谈论的是网格。看其来源，材料如下：

```
"materials" : [ {
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "Material",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
    "colorDiffuse" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
    "colorSpecular" : [0.5, 0.5, 0.5],
    "depthTest" : true,
    "depthWrite" : true,
    "shading" : "Lambert",
    "specularCoef" : 50,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
},

{
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "default",
    "vertexColors" : false
}], 
```

可以清楚地看到没有纹理，第二个实际上没有任何东西，第一个具有所有颜色作为灰色阴影。好像材料没有正确导出。这并不奇怪，因为导出材料很困难，因为 3d 建模器概念和 three.js 材料参数之间可能没有清晰的映射。我只是通过手动将材料参数指定到该文件中来修复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T09:03:55.473

每个网格可以有一种材质，这就是 OpenGL 的工作方式。你确定你只有一个网格吗？

# sql - @password 执行错误

> ID：14932331
> 
> 赞同：1
> 
> 时间：2013-02-18T08:42:50.893
> 
> 标签：sql

需要您对此代码的建议...我有客户的表登录信息。我正在使用 SQL Server。一切正常，除了当我输入带有数字作为@password 值的 apphabet 时，我不断收到错误，而只有数字没有错误。请帮我找出错误！！！！

```
 CREATE PROCEDURE [dbo].[usp_login] 
    @customer_id numeric(5,0) = -1,     
    @password nchar(20) = '',           
    @customer_level numeric(2,0) = -1   
AS

BEGIN
    SET NOCOUNT ON;

    DECLARE @SQL AS varchar(300)
    DECLARE @WHERE1 AS varchar(200) = ''

    SET @SQL = 'SELECT *FROM Login'

    IF (@customer_id != -1)
    BEGIN
        SET @WHERE1 = @WHERE1 + 'id=' +  CONVERT(varchar,@customer_id)
    END

    IF (@password != '')
    BEGIN
        IF (@WHERE1 != '')
            SET @WHERE1 = @WHERE1 + ' and ' 
        SET @WHERE1 = @WHERE1 + 'password=' + @password
    END

    IF (@customer_level != -1)
    BEGIN
        IF (@WHERE1 != '')
            SET @WHERE1 = @WHERE1 + ' and ' 
        SET @WHERE1 = @WHERE1 + 'customer_level=' +  CONVERT(varchar,@customer_level)
    END

    IF (@WHERE1 != '')
        SET @SQL = @SQL + ' where ' + @WHERE1

    EXEC(@SQL)
    RETURN @@ROWCOUNT

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:55:13.393

由于您正在执行动态 sql，因此您需要用单引号包裹字符串类型。

```
--Problems starts here
SET @WHERE1 = @WHERE1 + 'password=' + @password

--You can correct it as below
SET @WHERE1 = @WHERE1 + 'password=''' + @password + '''' 
```

# android - 我应该在销毁活动时手动关闭我的应用程序创建的 HandlerThreads 吗？

> ID：14932332
> 
> 赞同：11
> 
> 时间：2013-02-18T08:42:52.827
> 
> 标签：android, activity-lifecycle, android-handler

我的应用程序由单个`Activity`. 在这个活动中，我创建了多个`HandlerThread`在循环中运行以执行套接字阻塞操作的 s。

目前，我`HandlerThread`在`Activity.onDestroy()`.

有时，当我打开我的应用程序，关闭它并重新启动它时，它会崩溃（很多时候是由于将消息发布到未运行的处理程序线程）。

我的问题是：*当我关闭我的应用程序时**，正确的关闭方式是什么？`HandlerThread`*（请注意，这些线程可能会阻塞套接字操作）。

**编辑：更多信息：** 我有一个在 onCreate 中启动的处理程序线程池（当我第一次启动我的应用程序时没问题）。

每个处理程序可运行循环都用一个

```
 if (shouldRun) {
//body
} 
else { 
 close();
} 
```

陈述。

close 方法删除所有挂起的消息和可运行项，并向处理程序发布一条消息，这将导致他调用它的`looper.quit()`. 这样，如果当前的处理程序线程被 IO 操作阻塞，只有当它完成它才会退出（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:46:39.123

是的，关闭它是个好主意。还要确保删除您的回调。

```
@Override
public void onDestroy() {
    super.onDestroy();
    handler.removeCallbacksAndMessages(null);
    handler.getLooper().quit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:01:25.763

*   你必须有一些不一致的地方，否则你的应用程序不会崩溃。您确定*没有运行的 HandlerThread*真的是原因吗？创建 Activity 时不创建 HandlerThread 对象吗？
*   如果您的 HandlerThreads 正在等待 I/O 操作，我会考虑尝试中断它们。简单地删除回调和消息并要求 Looper 退出，甚至向 Handler 发送终止消息，都不会做任何事情。HandlerThread 对象仍然存在，直到 Android 终止进程（可能会发生也可能不会发生）。这意味着“您的应用程序将收集可能无法访问的僵尸 HandlerThread 对象”。当然，除非您可以向这些 HandlerThreads 发送终止消息，该消息到达它们阻塞的通道。
*   重用 HandlerThread 对象会好得多。服务可能是执行此操作的正确模型。
*   此外，如果线程在您的 Activity 中存活，您需要通知他们他们的通信对等方（您的 Activity）已经消失。否则，它们可能指的是已经消失的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T16:11:00.190

```
 /**
 * Ask the currently running looper to quit.  If the thread has not
 * been started or has finished (that is if {@link #getLooper} returns
 * null), then false is returned.  Otherwise the looper is asked to
 * quit and true is returned.
 */
public boolean quit() {
    Looper looper = getLooper();
    if (looper != null) {
        looper.quit();
        return true;
    }
    return false;
} 
```

以上是HandlerThread.java源码的'quit'方法，直接调用即可。

为什么要叫退出？下面是 HandlerThread.java 源代码的 'run' 方法。

```
 public void run() {
    mTid = Process.myTid();
    Looper.prepare();
    synchronized (this) {
        mLooper = Looper.myLooper();
        notifyAll();
    }
    Process.setThreadPriority(mPriority);
    onLooperPrepared();
    Looper.loop();//always loop except for a Message with null target

    mTid = -1;
} 
```

答案是'循环是一个'while(true)'方法，它会返回，直到收到一个目标为空的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T08:50:42.480

最佳实践方法是在您的活动中删除对您的处理程序的回调`onDestroy()`。有关更多信息，请参阅此答案：

[https://stackoverflow.com/a/5038542/1369222](https://stackoverflow.com/a/5038542/1369222)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:01:24.010

Looper 退出时 HandlerThread 停止。HandlerThread.getLooper().quit() 当你停止你的活动时。（见[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/IntentService.java#IntentService.ServiceHandler.%3Cinit% 3E%28android.os.Looper%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/IntentService.java#IntentService.ServiceHandler.%3Cinit%3E%28android.os.Looper%29)是正确使用 HandlerThread 的一个很好的例子）

# c# - 我需要更新抽象类的所有方法吗？

> ID：14932339
> 
> 赞同：6
> 
> 时间：2013-02-18T08:43:13.397
> 
> 标签：c#, inheritance, abstract-class, roleprovider

我需要从一个基本的抽象类继承。我只想覆盖一种方法。但是 Visual Studio 要求我全部重写，所以我重写了 10 多个 throw 方法`NonImplementedException`，我觉得这很愚蠢。有没有办法只覆盖我需要的东西。或者至少告诉 Visual Studio 覆盖其余部分（未实现的方法和属性）？

基类是框架写的所以不能改（我说`RoleProvider`的是ASP.NET MVC）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T08:49:08.557

```
abstract class Base
{
    public void Method1()
    { 
        //some code
    } // No need to override
    public abstract void Method2(); // must be overriden
    public virtual void Method3()
    {
        // some code
    } // Not necessarily be overriden
}

class Derived : Base
{
} 
```

在这里，编译器只会要求您`override` `Method2()`作为授权。它不会要求您覆盖`Method1()`或`Method3()`。你可以`override` `Method3()`因为它带有关键字`virtual`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-15T14:24:16.020

如果方法是**抽象**的，则**必须重写**。

如果方法是**virtual**，您**可以覆盖但不一定**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T08:46:59.317

这里真正的问题是你有一个基类，其中包含太多方法，派生类只能使用其中的一个子集。这意味着您的基类很可能有多个职责，因此违反了[单一职责原则 (SRP)](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

解决方案是将您的基类拆分为几个较小的类，其中每个类都有一个职责。

* * *

如果基类不是你的，你真的需要实现所有这些方法。
如果基类是违反 SRP 的类，并且如果您只实现一小部分方法，您的实现可以真正正常工作，您可以创建一个派生自该其他抽象基类的抽象基类。在您的抽象基类中，您可以实现所有不需要的方法并抛出`NotImplementedException`. 不要实现你需要的那些方法。
现在，从你的基类派生一个类——你现在只需要实现你感兴趣的方法。一定要正确地记录它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T08:46:15.127

> 有没有办法只覆盖我需要的东西。

不，这就是抽象类的工作方式。如果你也让你的类抽象，你就不需要实现所有方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T08:46:00.110

有必要覆盖所有声明为`abstract`. 你不能跳过非具体的方法。如果你真的想做，那么让你的类抽象。你不能改变抽象的机制。

请记住，抽象类具有以下特性：

1.  抽象类不能被实例化。
2.  抽象类可能包含抽象方法和访问器。
3.  不能用sealed修饰符修改抽象类，这意味着该类不能被继承。
4.  从抽象类派生的非抽象类必须包括所有继承的抽象方法和访问器的实际实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-23T06:59:01.647

您还可以创建一个抽象类来继承和实现所有方法（使用 NotImplementedException），然后您的子类可以继承该抽象类并仅实现与您相关的方法。

# mysql - Yii 框架 - InnoDB 与 MyISAM

> ID：14932341
> 
> 赞同：7
> 
> 时间：2013-02-18T08:43:16.143
> 
> 标签：mysql, innodb, myisam, yii

我有一个问题：我用 Yii 和 InnoDB 构建了一个大型应用程序并遇到了问题，插入/更新持续时间真的很长，这是我的 php 报告：

INNODB：管理员用户更新 55.247464895248 秒 ekuskov 用户更新 13.282548904419 秒 doriwall 用户更新 0.002094030380249 秒

MYISAM：管理员用户更新 7.8317859172821 秒 ekuskov 用户更新 1.6304929256439 秒 doriwall 用户更新 0.0020859241485596 秒

谁能提出一些解决方案来加快插入/更新？

编辑 - - - - - - - - - - - - - - - - - - - - - - -

现在我使用了一些非常简单的插入循环：

```
public function run($args) {
    $time = -microtime(true);

    $begin    = DateTime::createFromFormat('Y-m-d H:i:s', '2010-01-01 00:00:00');
    $end    = DateTime::createFromFormat('Y-m-d H:i:s', '2013-01-01 00:00:00');
    $end->add(new DateInterval('P1D'));
    $interval = DateInterval::createFromDateString('1 day');
    $days     = new DatePeriod($begin, $interval, $end);

    foreach ( $days as $day ) {
        echo "i";
        $track = new TimeTracking();
        $track->user_id = 25;
        $track->date = $day->format('Y-m-d H:i:s');
        $track->active = 4;
        $track->save(false);
    }

    $time += microtime(true);
    echo count($days)." items insert - $time seconds\n";
} 
```

现在插入时间如下：

InnoDB：项目插入 - 72.269570827484 秒

MyISAM：项目插入 - 0.87537479400635 秒

***[编辑]***现在我正在计算整个 SAVE 方法和 Yii 模型“save()”函数的时间：

更新：模型->保存（假）- 0.1096498966217 秒

更新：控制器保存功能 () - 0.1302649974823 秒

创建：模型->保存（假）- 0.052282094955444 秒

CREATE：控制器保存函数 () - 0.057214975357056 秒

为什么只是 save() 方法需要这么长时间？

***[编辑]***我已经测试了 save() 与 command() 并且它们的持续时间相同：

```
$track->save(false); 
```

或者

```
$command = Yii::app()->db->createCommand();
            $command->insert('timeTracking', array(
                    'id'=>NULL,
                    'date'=>$track->date,
                    'active'=>$track->active,
                    'user_id'=>$track->user_id,
            )); 
```

**编辑**------------------

这是插入 1,097 个对象的统计数据：

```
save(): 0.86-0.94, 
$command->insert(): 0.67-0.72,
$command->execute(): 0.46-0.48,
mysql_query(): 0.33-0.36 
```

**最后回答：**如果你想使用一些大规模的 INSERT 或 UPDATE 方法，你应该考虑使用直接 MYSQL 调用来创建函数，在那里你将节省近 70% 的执行时间。

问候，

埃德加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T15:46:15.553

在插入和更新时爬行的表可能表明您对索引有点忘乎所以。请记住，数据库必须在每次提交后停止并重新编译索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:21:39.797

InnoDB 在许多方面都比 MyISAM 复杂得多，功能丰富的引擎。这使它变慢了，并且您在查询、配置或其他方面无能为力来解决这个问题。然而，MySQL 正试图通过最近的更新来缩小差距。

看5.6版：

[http://dev.mysql.com/doc/refman/5.6/en/innodb-performance.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-performance.html)

如果你落后了，你最好的选择可能是升级你的 MySQL 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T07:14:50.407

正如 MySQL 专家所说，在您可以明确证明您需要 MyISAM 之前，请使用 InnoDB。性能问题不是很好的论据。

如果您有大型应用程序，您可能会面临表级锁和数据不一致的问题。**所以使用 InnoDB**。

您的性能问题可能与缺少索引或硬盘及其文件系统问题有关。

我使用的表具有数亿行，这些行从多个连接中不断更新和插入。这些表有 InnoDB 引擎。

当然，如果您有应该成堆添加的数据，请使用一个插入语句添加它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T13:38:27.117

InnoDB 提供了创建关系和约束的选项，这使数据库更快，您将能够使用这些关系生成模型和 crud。

您还可以考虑将查询分解为较小的查询并一一执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T22:12:01.633

使用 Yii 和 InnoDB 您应该将命令包装在事务中，如下所示：

```
$transaction = Yii::app()->db->beginTransaction();

try {
    // TODO Loop through all of your inserts

    $transaction->commit();
} catch (Exception $ex) {
    // There was some type of error. Rollback the last transaction
    $transaction->rollback();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T08:57:00.420

解决方案是：对于那些需要大量插入和快速响应的表，将它们转换为 MyISAM。否则用户必须等待很长时间并且存在威胁，PHP Max Script Execution Time 将停止您的脚本。

# html - 如何更改每个 id 页面的正文背景？

> ID：14932352
> 
> 赞同：0
> 
> 时间：2013-02-18T08:44:23.317
> 
> 标签：html, css, background-color

单击页面时，我想将正文背景更改为不同的颜色。我的 HTML 代码只有一页，所以页面被分类为`<div>`s。我不想更改 id 的背景。我只想改变身体的颜色。

我试过：

```
body #home {background-color:#099;} 
```

但它只在**#home div**的尺寸内变化，而不是身体背景

我试过：

```
body#home {background-color:#099;} 
```

但什么也没发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:52:19.010

在 CSS 中，没有办法根据它的后代来选择一个元素。

给 body 元素一个 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:57:15.263

JavaScript

```
<script type="text/javascript">
        function changeBackgroundColor(Bodycolor) {
            alert(Bodycolor);
            document.body.style.background = Bodycolor;
        }
    </script> 
```

HTML

```
 <div>
        <a onclick="changeBackgroundColor('red');">Home</a> <a onclick="changeBackgroundColor('black');">
            About</a>
    </div> 
```

# jquery - KendoUI 格式化日期和时间字段

> ID：14932359
> 
> 赞同：8
> 
> 时间：2013-02-18T08:45:13.730
> 
> 标签：jquery, kendo-ui, kendo-grid

我正在尝试将以前的仅日期字段转换为日期时间字段，但它不起作用。

我有：

```
schema: {
    model: {
    id: 'id',
    fields: {
        dateCreated: {
        type: "date", format: "{0:yyyy/MM/dd HH:mm}", editable: "false"
        },
        ...
    }
} 
```

但这不起作用，日期格式正确，但时间最终为 00:00。

如果我将字段类型更改为“字符串”，则数据会正确显示，但会以 SQL 方式格式化，即：

```
2012-05-11 12:56:29 
```

没有“日期时间”这样的字段类型，只有“日期”。我如何让它输出我想要的？IE：

```
11/05/2012 12:56 
```

* * *

有人有想法么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-18T09:57:25.043

您必须使用模板`'#= kendo.toString(kendo.parseDate(dateCreated), 'MM/dd/yyyy HH:mm tt')#'`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T01:58:29.337

你想在哪里使用这些数据？如果您在网格中使用它，则可以在列定义中使用“模板”属性

```
var columnDefinition = [
    {
        field: "dateCreated",
        title: "Created",
        template: "#= kendo.toString(dateCreated,'MM/dd/yyyy HH:mm tt') #"
    }
]; 
```

[这是网格中格式的小提琴](http://jsfiddle.net/schapman/Pm4y3/)

# java - 误用 hamcrest hasItems

> ID：14932363
> 
> 赞同：10
> 
> 时间：2013-02-18T08:45:28.567
> 
> 标签：java, junit, hamcrest

我有一个整数列表（当前），我想检查此列表是否包含预期列表中的所有元素，甚至不包含列表 notExpected 中的一个元素，因此代码如下所示：

```
 List<Integer> expected= new ArrayList<Integer>();
    expected.add(1);
    expected.add(2);

    List<Integer> notExpected = new ArrayList<Integer>();
    notExpected.add(3);
    notExpected.add(4);

    List<Integer> current = new ArrayList<Integer>();
    current.add(1);
    current.add(2);

    assertThat(current, not(hasItems(notExpected.toArray(new Integer[expected.size()]))));

    assertThat(current, (hasItems(expected.toArray(new Integer[expected.size()])))); 
```

这么久这么好。但是当我添加

```
 current.add(3); 
```

测试也是绿色的。我是否误用了 hamcrest 匹配器？顺便提一句。

```
 for (Integer i : notExpected)
        assertThat(current, not(hasItem(i))); 
```

给了我正确的答案，但我认为我可以轻松地使用 hamcrest 匹配器。我正在使用 junit 4.11 和 hamcrest 1.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T09:52:43.953

`hasItems(notExpected...)``current`仅当来自的所有元素`notExpected`也都在时才会匹配`current`。所以用线

```
assertThat(current, not(hasItems(notExpected...))); 
```

您断言`current`不**包含**来自`notExpected`.

一种断言`current`不包含**任何元素**的解决方案`notExpected`：

```
assertThat(current, everyItem(not(isIn(notExpected)))); 
```

然后您甚至不必将列表转换为数组。这个变体可能更具可读性，但需要转换为数组：

```
assertThat(current, everyItem(not(isOneOf(notExpected...)))); 
```

请注意，这些匹配器不是来自`CoreMatchers`in `hamcrest-core`，因此您需要添加对`hamcrest-library`.

```
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest-library</artifactId>
    <version>1.3</version>
</dependency> 
```

# postgresql - Postgres 模式和数据比较工具

> ID：14932365
> 
> 赞同：0
> 
> 时间：2013-02-18T08:45:44.807
> 
> 标签：postgresql, compare

我正在寻找一种工具，它可以比较两个 postgresql 数据库的模式和数据并创建一个脚本来同步它们。对于 MSSQl 数据库，我们使用 Red Gate SQL Compare，我正在寻找类似的东西。我已经尝试了一些产品，但它们都不能完全满足我们的要求（大多数是因为它们无法为我们的测试数据库创建功能齐全的同步脚本）。

这是我到目前为止尝试过的产品：

*   EMS 数据库比较器
*   Datanamic Sc​​hemaDiff 和 DataDiff
*   DB独奏
*   dbforge
*   apgdiff

有谁知道我可以尝试的另一种产品（开源或商业）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:13:37.663

出于这样的目的，我创建了一堆 Python 程序来从 PostgreSQL、Oracle 和 Informix DBMS 中检索模式信息。对于 PostgreSQL 看看：[http ://code.activestate.com/recipes/576557-dump-postgresql-db-schema-to-text/](http://code.activestate.com/recipes/576557-dump-postgresql-db-schema-to-text/)

当然，这个实用程序是为我的需要而创建的：表、列、键、索引、触发器、函数。它可以与 Python 或 Jython 一起使用。它创建的文本输出应该易于与其他数据库的输出进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T18:31:05.887

[Aqua Data Studio](http://www.aquafold.com/aquadatastudio/schema_sql_compare.html)有一个强大的 PostgreSQL 模式比较工具。您可以比较表、视图、存储过程、索引、触发器或任何其他数据库对象类型。比较的状态与差异数量（差异计数）一起显示在颜色编码的网格中。Schema Compare Tool 还允许比较不同 DBMS 供应商的数据库对象。启动模式比较后，该工具仅加载两个数据库中都存在的常见对象类型。
但是，ADS 不会为 PostgreSQL 生成增量脚本。您需要使用比较工具将模式与数据库进行比较并手动创建增量脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T17:43:12.130

试试[Aqua Data Studio](http://www.aquafold.com/)，它支持许多类似 Red Gate 的工具。它不如 Red Gate，但它确实支持包括 Postgres 在内的大量数据库。

# flash - 加载具有透明背景的外部 SWF

> ID：14932372
> 
> 赞同：1
> 
> 时间：2013-02-18T08:46:02.320
> 
> 标签：flash, transparent

我已使用将外部 swf 加载到主 swf 中

```
var swf_load:Loader  = new Loader();
swf_load.load(new URLRequest("two.swf")); 
```

我使用 wmode 作为“透明”在 HTML 中将“main.swf”背景设置为透明，并且工作正常。加载“two.swf”文件时，默认背景为白色。如何使它也透明

谢谢，沙迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T04:29:12.407

在您发布的 HTML 页面中

```
<script language="javascript">
    if (AC_FL_RunContent == 0) {
        alert("This page requires AC_RunActiveContent.js.");
    } else {
        AC_FL_RunContent(
            'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0',
            'width', '100%',
            'height', '100%',
            'src', 'PROJECT_SOURCE',
            'quality', 'high',
            'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
            'align', 'middle',
            'play', 'true',
            'loop', 'true',
            'scale', 'showall',
            'wmode', 'transparent',
            'devicefont', 'false',
            'id', 'PROJECT_ID',
            'bgcolor', '#006699',
            'name', 'PROJECT_NAME',
            'menu', 'true',
            'allowFullScreen', 'false',
            'allowScriptAccess','sameDomain',
            'movie', 'PROJECT_MOVIE',
            'salign', '',
            'flashVars', ''
            ); //end AC code
    }
</script> 
```

将“wmode”属性设为“透明”。如果您的 HTML 页面包含标签内容，请将标签中的“wmode”属性更改为“透明”。

*注意：*确保您的 swf 页面不包含任何背景。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T05:58:06.870

嗨，我在 HTML 页面集中得到了解决方案`transparent as true`

谢谢沙迪亚

# symfony-2.1 - 表单日期时间类型验证错误

> ID：14932378
> 
> 赞同：2
> 
> 时间：2013-02-18T08:46:42.560
> 
> 标签：symfony-2.1, symfony-forms

我正在使用集合表单类型，其中子项将日期时间类型输入为单个文本。但是当我在验证中提交数据失败并且 getErrorsAsString 显示这个奇怪的错误：

```
inputDateTime:
        ERROR: This value is not valid.
        date:
            No errors
        time:
            No errors 
```

这是我添加字段的方法

```
//form child
$builder->add('inputDateTime', 'datetime', array(
    'date_widget' => 'single_text',
    'time_widget' => 'single_text'
)); 
```

为什么 inputDateTime 有错误但日期或时间都没有错误？我的语言环境已设置，我尝试添加日期格式，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T21:06:14.413

“[日期”和“时间”字段的“错误冒泡”属性](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/DateTimeType.php#L146)设置为`true`，因此这些字段上的错误会冒泡并附加到日期时间字段。

你是对的，错误消息不是很有帮助（有一个[开放的票证），但你可以通过在](https://github.com/symfony/symfony/issues/5946)[块中打印捕获](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php#L611)由 DataTransformer (Form.php:611) 生成的`$exception`变量来调试问题。异常包含详细的错误描述，出于安全目的对最终用户隐藏。[`TransformationFailedException`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Form.php#L611)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T15:45:21.397

事实上，这似乎是由于格式日期无效（例如，当您使用不同的格式时，可能会在您设置另一个时区或语言环境时出现）。因此，您只需为 datetime 字段指定 date_format 选项。

就我而言，这解决了问题：

```
'date_format' => 'dd/MM/yyyy', 
```

# c# - 确保 Singleton 只调用一次数据库查询

> ID：14932387
> 
> 赞同：4
> 
> 时间：2013-02-18T08:47:13.570
> 
> 标签：c#, singleton

我正在尝试创建一个负责读取所有用户访问设置的对象。

我这样创建了类：

```
public class SettingsManager
{
    private static string _connString =
        @"Data Source=MyDB;Initial Catalog=IT;Integrated Security=True;Asynchronous Processing=true;";
    private const string _spName = "SettingTest";
    private IEnumerable<string> _mySettings;
    private static readonly Lazy<SettingsManager> _instance = new Lazy<SettingsManager>(() => new SettingsManager());

    private SettingsManager()
    {
        //Console.WriteLine("Hello from constructor");
        if (_mySettings == null)
            _mySettings = ReadSettings();
    }

    public static SettingsManager Instance
    {
        get { return _instance.Value; }
    }

    public bool CanDo(string setting)
    {
        return _mySettings.Contains(setting);
    }

    private IEnumerable<string> ReadSettings()
    {
        try
        {
            using (var conn = new SqlConnection(_connString))
            {
                using (var cmd = new SqlCommand())
                {
                    cmd.Connection = conn;
                    cmd.CommandText = _spName;
                    cmd.CommandType = CommandType.StoredProcedure;
                    conn.Open();
                    using (var reader = cmd.ExecuteReader())
                    {
                        return reader.Select(SettingParser).ToList();
                    }
                }
            }
        }
        catch
        {
        }
        return null;
    }

    private string SettingParser(SqlDataReader r)
    {
        try
        {
            return r[0] is DBNull ? null : r[0].ToString();
        }
        catch
        {
        }
        return null;
    }
} 
```

和 SqlDataReader 扩展

```
public static class DBExtensions
{
    public static IEnumerable<T> Select<T>(
        this SqlDataReader reader, Func<SqlDataReader, T> projection)
    {
        while (reader.Read())
        {
            yield return projection(reader);
        }
    }
} 
```

然后在我的应用程序中，我可以这样称呼它：

```
SettingsManager.Instance.CanDo("canWrite") 
```

这返回真/假值取决于用户访问级别。

我的问题是：

1.  这个线程安全吗？数据库是否有可能被多次查询？如何防止这种情况？

2.  我应该使用等待和异步吗？我只查询 db 一次。我该如何改进呢？（await 和 async 对我来说真的很新，因为我刚从 .NET3.5 迁移到 4.5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:53:00.867

> 1）这个线程安全吗？

是的。

> 数据库是否有可能被多次查询？

不。

> 2）我应该使用等待和异步吗？

这将取决于您是否需要对数据库进行异步访问。如果需要，可以使用异步 ADO.NET API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:49:45.693

**1）是的，这是线程安全的**

线程安全的 Singleton：此实现使用内部类使 .NET 实例化完全惰性。只有 GetInstance() 会触发类型初始化器；所以，这个版本和经典版本一样懒惰。而且，它将像任何其他版本一样快速运行。

```
public sealed class Singleton
{

   private Singleton() {}

   public static Singleton GetInstance()
   {
      return NestedSingleton.singleton;
   }

   class NestedSingleton
   {
      internal static readonly Singleton singleton = new Singleton();

      static NestedSingleton() {}
   }
} 
```

**2）这取决于您是否想要异步访问您的数据库。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:15:52.500

> 1.  这个线程安全吗？

是的。您正在`Lazy<T>`正确使用类型以确保线程安全。

> 1.  我应该使用等待和异步吗？

我会推荐它。现在，当您的应用程序代码第一次调用`SettingsManager.Instance.CanDo("canWrite")`时，它将阻塞直到数据库响应。也可以有一个`async`你的消费者可以做`(await SettingsManager.Instance).CanDo("canWrite")`（或`await SettingsManager.CanDoAsync("canWrite")`）的实现。这意味着您的消费者在等待数据库时不会阻塞。

您可以使用被调用的`async`就绪版本，该版本[最初由 Stephen Toub 开发](http://blogs.msdn.com/b/pfxteam/archive/2011/01/15/10116210.aspx)并[包含在我的 AsyncEx 库](http://nitoasyncex.codeplex.com/wikipage?title=AsyncLazy)中。`Lazy<T>``AsyncLazy<T>`

# java - 从非活动选项卡获取输入

> ID：14932388
> 
> 赞同：0
> 
> 时间：2013-02-18T08:47:17.157
> 
> 标签：java, android

我的布局中有 2 个选项卡。我无法在非活动选项卡的 EditText 中输入输入值。因此，假设选择了包含 registerLoginFragment 的选项卡。以下代码返回预期值。

```
EditText editTextEmail = (EditText)registerLoginFragment.getView().findViewById(R.id.editTextEmail); 
```

但是从第二个不活动的选项卡获取值会因 NPE 失败，因为不活动的选项卡的 getView() 返回 null。所以以下是失败的：

```
EditText EditTextFirstName = (EditText)registerPersonalFragment.getView().findViewById(R.id.EditTextFirstName); 
```

因此，当单击第一个选项卡上的按钮时，我需要从两个选项卡中获取输入。两个选项卡都被访问并输入了值。

更多代码：

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(tab.getTag().toString().equals("LOGIN_TAB")){

        if(registerLoginFragment == null){
            registerLoginFragment = Fragment.instantiate(this, RegisterLoginFragment.class.getName());
            ft.add(R.id.linearLayoutRegister, (Fragment)registerLoginFragment);
        }
        else{
            ft.attach((Fragment)registerLoginFragment);
        }

        currentFragment = registerLoginFragment;
    }
    else if(tab.getTag().toString().equals("PERSONAL_TAB")){
        if(registerPersonalFragment == null){
            registerPersonalFragment = Fragment.instantiate(this, RegisterPersonalFragment.class.getName());
            ft.add(R.id.linearLayoutRegister, (Fragment)registerPersonalFragment);
        }
        else{
            ft.attach((Fragment)registerPersonalFragment);
        }

        currentFragment = registerPersonalFragment;
    }

} 
```

所以显然这不是从非活动选项卡获取值的正确方法，但我找不到正确的方法。

我想我可以这样做：[Get text from edit text fields that are in multiple tabs](https://stackoverflow.com/questions/13621831/get-text-from-edit-text-fields-that-are-in-multiple-tabs)

但是有没有更“优雅”的方式呢？

谢谢 Velja

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:09:47.463

我找到了完成这项任务的有趣方法。我没有分离和附加（或使用 FragmentTransaction.replace），而是在选项卡操作上显示和隐藏我的片段。请注意，使用 GONE 值而不是 INVISIBLE 非常重要，因为 GONE 不使用视图中的任何空间：http: [//developer.android.com/reference/android/view/View.html#GONE](http://developer.android.com/reference/android/view/View.html#GONE) 我会留下问题打开听听是否还有更多“正确”的方式？所以重构后的代码是这样的：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(tab.getTag().toString().equals("LOGIN_TAB")){

        if(registerLoginFragment == null){
            registerLoginFragment = Fragment.instantiate(this, RegisterLoginFragment.class.getName());
            ft.add(R.id.linearLayoutRegister, (Fragment)registerLoginFragment);
        }
        else{
            //ft.attach((Fragment)registerLoginFragment);
            registerLoginFragment.getView().setVisibility(View.VISIBLE);
        }

        currentFragment = registerLoginFragment;
    }
    else if(tab.getTag().toString().equals("PERSONAL_TAB")){
        if(registerPersonalFragment == null){
            registerPersonalFragment = Fragment.instantiate(this, RegisterPersonalFragment.class.getName());
            ft.add(R.id.linearLayoutRegister, (Fragment)registerPersonalFragment);
        }
        else{
            //ft.attach((Fragment)registerPersonalFragment);
            registerPersonalFragment.getView().setVisibility(View.VISIBLE);
        }

        currentFragment = registerPersonalFragment;
    }

}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if(currentFragment != null){
        //ft.detach((Fragment)currentFragment);
        currentFragment.getView().setVisibility(View.GONE);
    }

} 
```

# ios - c语言如何获取数据

> ID：14932400
> 
> 赞同：0
> 
> 时间：2013-02-18T08:48:21.513
> 
> 标签：ios, clang, midi

下面是我要在标签上显示的注释类型和注释编号的 c 方法。实际上我正在播放一个midi文件，方法是返回midi文件数据，但是在clang方法中，但我想在标签上显示它。

```
static void MyMIDIReadProc(const MIDIPacketList *pktlist,
                           void *refCon,
                           void *connRefCon) {

    AudioUnit *player = (AudioUnit*) refCon;

    MIDIPacket *packet = (MIDIPacket *)pktlist->packet;
    for (int i=0; i < pktlist->numPackets; i++) {
        Byte midiStatus = packet->data[0];
        Byte midiCommand = midiStatus >> 4;

        if (midiCommand == 0x09) {
            Byte note = packet->data[1] & 0x7F;
            Byte velocity = packet->data[2] & 0x7F;

            int noteNumber = ((int) note) % 12;

            NSString *noteType;
            switch (noteNumber) {

                case 0:
                    noteType = @"C";
                    break;
                case 1:
                    noteType = @"C#";
                    break;
                case 2:
                    noteType = @"D";
                    break;
                case 3:
                    noteType = @"D#";
                    break;
                case 4:
                    noteType = @"E";
                    break;
                case 5:
                    noteType = @"F";
                    break;
                case 6:
                    noteType = @"F#";
                    break;
                case 7:
                    noteType = @"G";
                    break;
                case 8:
                    noteType = @"G#";
                    break;
                case 9:
                    noteType = @"A";
                    break;
                case 10:
                    noteType = @"Bb";
                    break;
                case 11:
                    noteType = @"B";
                    break;
                default:
                    break;
            }

            NSLog(@"noteType : noteNumber %@",[noteType stringByAppendingFormat:[NSString stringWithFormat:@": %i", noteNumber]]);
            ViewController* audio = (__bridge ViewController*)refCon;
            [audio.self.noteDisplayLabel setText:@"sdasd"];
           audio.test_messages = @"sdsadsa";
            [audio labelText:@"asdasdas"];
            NSLog(@"%@", audio.test_messages);
            OSStatus result = noErr;
          //    result = MusicDeviceMIDIEvent (player, midiStatus, note, velocity, 0);
        }
        packet = MIDIPacketNext(packet);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T13:16:38.370

我还在我的代码中使用了这段代码，并对其进行了调整，以使用 NSNotification 在标签上显示注释。

```
static NSString* kNAMIDINoteOnNotification = @"kNAMIDINoteOnNotification";
static NSString* kNAMIDI_Note = @"kNAMIDI_Note"; 
```

...

在 case 语句之后添加这个

```
NSMutableDictionary* info = [[NSMutableDictionary alloc] init];
[info setObject:[NSNumber numberWithInteger:note] forKey:kNAMIDI_Note];
NSNotification* notification = [NSNotification notificationWithName:kNAMIDINoteOnNotification object:nil userInfo:info];
[[NSNotificationCenter defaultCenter] postNotification:notification]; 
```

将此添加到您的视图控制器中，该控制器显示要监视通知的注释

```
// notification to monitor for incoming midi note events
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(log:) name:@"kNAMIDINoteOnNotification" object:nil];

- (void)log:(NSNotification *)notification
{

    [NSThread isMainThread];

    NSDictionary* info = notification.userInfo;

    NSNumber *note;
    note = [info objectForKey:kNAMIDI_Note];

    BRMidiNoteName *noteConverter = [[BRMidiNoteName alloc] init];

    NSString *noteName;
    noteName = [noteConverter nameFromNumber:[note intValue] withNotation:[defaults valueForKey:kSettingsNotation]];

   [self.currentNoteLabel performSelectorOnMainThread: @selector( setText: ) withObject: noteName waitUntilDone: NO];

} 
```

我的代码实际上是使用字典将 midi 音符编号转换为音符名称（EG 音符编号 60 = C4）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:09:40.413

您的 NSLog 消息是否正常工作？看起来他们应该是。

从 MIDI Read Proc 设置您的视图不是一个好的做法（甚至可能有问题），因为这是一个实时回调，您不想花时间在这个地方写入 UI。

如果您将事件推送到某个地方（如数组）并在结束函数处向您的视图控制器（使用数组对象）发送通知，那就更好了。你想从这个函数中快速返回。

# c# - WCF DTO 中的接口

> ID：14932408
> 
> 赞同：1
> 
> 时间：2013-02-18T08:48:56.723
> 
> 标签：c#, wcf

我尝试传输一个 DTO（WCF 客户端到 WCF 服务器），其中包含一个带有接口的子对象。

我的代码：

WCF服务方法：

```
[OperationBehavior(TransactionScopeRequired = true)]
public void SendTest(MyTestDto testDto)
{
  ...
} 
```

MyTestDto 类：

```
[Serializable]
[DataContract(Name = "MyTestDto")]
public class MyTestDto : ITestDto
{
   [DataMember(IsRequired = true, Order = 1, Name = "MyTestDto")]
   [DataMemberValidation(IsRequired = true)]
   public ITest Test { get; set; }

} 
```

测试接口：

```
public interface ITest
{
    int Field1 {get;set;}
    int Field2 {get;set,}
} 
```

问题是，`FaultException`如果我将 MyTestDto 从服务器传输到客户端，我总是会得到一个。我分析了 WSDL 文件，测试字段的类型为：`AnyType`. 我想，这就是问题所在。我已经用`ITest`抽象类替换了 ，因此通信正常（当然我必须`ServiceKnownType`用抽象类设置属性）。

你能帮助我吗？为什么它适用于抽象类而不适用于接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:50:44.727

WCF 使用具体类型，接口不能通过 WCF 序列化。

`ServiceKnownType`仅当您使用属性标记服务或使用属性标记数据协定时，才能使接口成为抽象类`KnownType`。下面是一个例子；

```
public abstract Test
{
    public int Field1 {get;set;}
    public int Field2 {get;set,}
}

public class SomeTest : Test
{ 
    ...
}

[ServiceKnownType(typeof(SomeTest))]
public class SomeService : ISomeService
{
     public void SendTest(Test test)
} 
```

# clojure - 如何通过递归制作列表？

> ID：14932414
> 
> 赞同：2
> 
> 时间：2013-02-18T08:49:30.603
> 
> 标签：clojure, lisp

在很多情况下，我想通过递归函数列出列表，但我找不到正确的方法。

例如（没用，但我能找到最短的）我想从列表中一个一个地获取元素并创建与第一个相同的新列表。

```
(defn f [x] (list 
          (first x) 
          (if (not= (rest x) '())
          (f (rest x))
          '()       
)))

(f '(1 2 3)) 
```

我想得到

```
(1 2 3) 
```

但我明白了

```
(1 (2 (3 ()))) 
```

我不想使用扁平化。例如这个输入

```
(f '([1 1] [2 2] [3 3])) 
```

将被 flatten 破坏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:52:58.993

替换`list`为`cons`：

```
(defn f [x] 
  (cons (first x) 
        (if (not= (rest x) '())
          (f (rest x))
          '()))) 
```

操作`(list x y)`返回两个元素的列表：`(x y)`. 操作`(cons x y)`返回列表的头部（即第一个元素）`x`和尾部（列表的其余部分）应该是列表本身的`y`位置。`y`

# c# - 如何提高 WPF、C# 应用程序的 VS 2012 编辑器性能

> ID：14932419
> 
> 赞同：1
> 
> 时间：2013-02-18T08:49:46.273
> 
> 标签：c#, wpf, performance, visual-studio-2012

我正在研究 VS 2012，有时它真的很痛苦。我知道我可以通过更改 VS 编辑器中的一些设置来提高速度，但实际上我不知道是哪个设置。你能建议我那些可以提高我的开发速度的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T04:52:45.597

尝试执行[此建议](http://blog.geocortex.com/2007/12/07/slow-visual-studio-performance-solved/)

> 转到 OPTIONS>ENVIRONMENT..在 Visual Experience 下，取消勾选“Use Hardware Graphics Acceleration If Available”</p>
> 
> “工具”-“选项”-“环境和更新”并禁用“自动检查更新”

# php - php preg_match 查找标签但不带有 gif 扩展名

> ID：14932421
> 
> 赞同：2
> 
> 时间：2013-02-18T08:50:06.000
> 
> 标签：php, regex, preg-match

我知道如何在字符串中找到 img 标签，但我需要排除任何带有 gif 扩展名的 img 标签。如何在我的 preg_match 中使用负数？我只需要第一个不包含 .gif 扩展名的图像标签。

我目前有这个：

```
 $text = html_entity_decode($text, ENT_QUOTES, 'UTF-8');
  $pattern = "/<img[^>]+\>/i";
  preg_match($pattern, $text, $matches);
  $text = $matches[0]; 
```

$text 会给我第一个标签，例如`<img src="something.gif" border="0" />` 但是，我不想接受 .gif，所以如果第一个是 gif，它将跳过它并继续搜索 other 。

请告诉我如何将我的代码更改为它。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:58:12.470

不要那样做。尝试使用正则表达式解析 HTML 是一项注定要失败的任务，因为 HTML 的复杂性或需求的轻微增加将使您的正则表达式变得难以置信地复杂。

最好的方法是使用为任务设计的工具：`DOMDocument`类。

```
$dom = new DOMDocument;
$dom->loadHTML($text);

$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
    if (!substr($image->getAttribute('src'), -4) === '.gif') {
        break;
    }
}

// $image is now the first image that didn't end with .gif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:04:03.887

如果您仍想使用正则表达式，请尝试将您的模式更改为类似的内容。

```
<?php
$text = '<img src="something.jpg" ';
$pattern = '/<img\s+src="(([^"]+)(.)(jpeg|png|jpg))"/';
preg_match_all($pattern, $text, $out);

echo '<pre>';
print_r($out);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:06:49.813

试试这个 ：

```
<?php
$text = '<img src="something.jpg" ';

preg_match('/src="(?P<image>.*\.(jpeg|png|jpg))"/', $text, $matches);

echo $matches['image'];
?> 
```

# wordpress - Wordpress 如何替换“wp_nav_menu”输出或 %3$s 中的字符串/URL？

> ID：14932436
> 
> 赞同：2
> 
> 时间：2013-02-18T08:51:02.567
> 
> 标签：wordpress, menu

我目前正在使用类似的东西：

```
wp_nav_menu( array(
               'theme_location' => 'primary', 
               'container' => false, 
               'items_wrap' => '<ul id="primary-main-menu" class="primary-main-menu-en">%3$s</ul>',
               'fallback_cb' => false
)); 
```

然后我得到了一个装饰精美的菜单，上面有我自己的班级等。
但现在另一个更棘手的步骤是：

*   如何**替换**该菜单对象输出中的 url 链接？（替换，例如：`www.domain1.com`to `www.domain2.com`）
*   换句话说，实际上我想替换里面的字符串`%3$s`。如何？

注意：
我使用过`walker`，但我不能完全使用 walker`items_wrap`选项和/或输出失真。所以我放弃了`walker`。请问有什么好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:51:46.463

无需定义自己的 Walker 类，您只需使用 filter 挂钩到默认 Walker 即可`walker_nav_menu_start_el`。在这里，您可以在输出链接 HTML 之前对其进行修改。

以下是您的用例的工作示例：

```
function mytheme_walk_nav_menu_items($output, $item, $depth, $args) {

    if ( $args['theme_location'] === 'primary' ) {
        $output = str_replace( 'www.domain1.com', 'www.domain2.com', $output );
    }

    return $output;
}
add_filter( 'walker_nav_menu_start_el', 'mytheme_walk_nav_menu_items', 10, 4 ); 
```

# ftp - 如何使用 Apache Common vfs 列出文件目录/文件

> ID：14932439
> 
> 赞同：9
> 
> 时间：2013-02-18T08:51:11.370
> 
> 标签：ftp, file-transfer, jsch, apache-commons-vfs

我是使用 Apache Common vfs 的新手，我成功连接到我已经阅读过文档的服务器，但我被困在这段代码中。我如何列出目录/文件？

```
....
Session session = null;
        FileSystemManager fsManager = null;
        FileSystem fs = null;
        try {
            String host = "host_here";
            int port = 22;

            String userStr = "user_here";
            char [] username = userStr.toCharArray();

            String passStr = "password_here";
            char [] password = passStr.toCharArray();

            session = SftpClientFactory.createConnection(host, port, username, password, null);
            //session.connect();

            System.out.println("Connected to the server");

            FileSystemOptions opts = new FileSystemOptions();
            fsManager = VFS.getManager();
            FileObject file = fsManager.resolveFile("ftp://"+userStr+":"+passStr+"@"+host+"/home/", opts);    

            // .... whats next i do here? .....

        } catch (Exception e) {
            session.disconnect();
            e.printStackTrace();
        }
... 
```

请帮助我，谢谢你:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T18:26:36.947

可以使用[FileObject#getChildren()](http://commons.apache.org/vfs/apidocs/index.html)方法显示文件列表。

```
FileSystemOptions opts = new FileSystemOptions();
fsManager = VFS.getManager();

// List all the files in that directory.Try to give the directory path  
FileObject localFileObject=fsManager.resolveFile("ftp://"+userStr+":"+passStr+"@"+host+"/home");
FileObject[] children = localFileObject.getChildren();
for ( int i = 0; i < children.length; i++ ){
    System.out.println( children[ i ].getName().getBaseName() );
}
// End of List Files.

FileObject file = fsManager.resolveFile("ftp://"+userStr+":"+passStr+"@"+host+"/home/", opts); 
```

我的建议是使用最适合 SFTP 操作的[JSCH框架。](http://www.jcraft.com/jsch/)由于这`Apache Common VFS`本身就使用了这个框架。复杂度会大大降低`JSCH`。

# java - 通过 Hibernate Criteria 在列表中查找具有多个唯一元素的对象

> ID：14932445
> 
> 赞同：1
> 
> 时间：2013-02-18T08:51:41.510
> 
> 标签：java, hibernate, criteria

我有一个带有元素B列表的A类。每个B还有一个对象C。我需要做的是找到A的实例，其中列表中至少有两个具有不同C实例的B实例。

```
public class A {
   long id;
   List<B> elements;
}

public class B {
    long id;
    C object;
}

public class C {
    long id;
} 
```

我已经尝试了很多不同的东西，直接比较，创建两个别名，DetachedCriteria，或者我得到 0 行，我得到至少有一个 B 的每一行，或者我得到一个异常。我从来没有得到符合我想要的那一排。

我要疯了，有人知道我如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:11:45.827

与往常一样，一旦我最终屈服并将问题作为问题发布，我稍后会找到解决方案。

```
Criteria crit = session.createCriteria(A.class, "a");

DetachedCriteria cCount = DetachedCriteria.forClass(A.class, "a2");

cCount.createAlias("a2.elements", "elements2");
cCount.add(Restrictions.eqProperty("a2.id", "a.id");
cCount.setProjection(Projections.countDistinct("elements2.object.id");

crit.add(Subqueries.lt(1L, areaCount);

return (List<A>) crit.list(); 
```

# python - 如何在csv文件python的特定列下插入数据

> ID：14932452
> 
> 赞同：0
> 
> 时间：2013-02-18T08:52:06.753
> 
> 标签：python, csv

我有这个代码：

```
 def _download_url(url):
    response = None
    try:
        response = urllib.request.urlopen(url)

        content_bytes=response.read()
        content_string=content_bytes.decode(encoding='utf-8')

        data = io.StringIO(content_string)
        mycsv=csv.reader(data)
        mycsv = csv.DictReader(data)

        print('{:<11} {:<8} {:<12} {:<12}'.format('Date', 'Close', 'Indicator', 'Signal'))
        for row in mycsv:

            print('{:<11} {:<8}'.format(row['Date'], row['Adj Close'])) 
```

如何创建代码以便能够在指标/信号列下方插入数据？我想从“关闭”列中获取数据并使用该数字列表来查找平均值并将其打印在指标列下方。然后使用指标中的结果并在信号列下方对其进行处理。

--edit-- 这是我运行时的样子

```
Date        Close    Indicator    Signal      
2012-11-30  698.37   
2012-11-29  691.89  
2012-11-28  683.67  
2012-11-27  670.71  
2012-11-26  661.15  
2012-11-23  667.97 
```

但是，我希望它看起来像

```
Date        Close    Indicator    Signal      
2012-11-30  698.37     0
2012-11-29  691.89  -put data here-
2012-11-28  683.67  -another data-
2012-11-27  670.71  -etc-
2012-11-26  661.15  
2012-11-23  667.97 
```

我想从第二列（关闭）中获取数据并使用这些数字来计算平均值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:40:22.200

仍然不了解 OP 想要什么，如下所示

> 在指标/信号列下方插入数据，但我不敢相信这就是 OP 想要的。

因此，通过放入`calculated_indicator`和`calculated_signal`输入，我们可以确定这些函数是对行还是对完整的行起作用。

```
def calculated_indicator(row):
     return 0

def calculated_signal(row):
     return 0

def _download_url(url):
    response = None
    try:
        response = urllib.request.urlopen(url)

        content_bytes=response.read()
        content_string=content_bytes.decode(encoding='utf-8')

        data = io.StringIO(content_string)
        mycsv=csv.reader(data)
        mycsv = csv.DictReader(data)

        print('{:<11} {:<8} {:<12} {:<12}'.format('Date', 'Close', 'Indicator', 'Signal'))
        for row in mycsv:

            print('{:<11} {:<8}'.format(row['Date'], row['Adj Close'], calculated_indicator(row), calculated_signal(row))) 
```

# windows-8 - Windows 商店应用程序漫游设置测试值是否存在

> ID：14932454
> 
> 赞同：0
> 
> 时间：2013-02-18T08:52:22.350
> 
> 标签：windows-8, windows-store-apps

我想知道键声音的值是否存在，但下面的代码对我不起作用

```
if (roamingSettings.Values["Sound"] == null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:59:53.380

“Values”是一个集合，可以像这样检查它的成员。

```
if(roamingSettings.Values.ContainsKey("Sound"))
{
    var myRoamingSettingValue = roamingSettings.Values["Sound"];
    // do stuff with the value you pulled back
}
else
{
    // your roaming settings collection doesn't contain the value you are interested in.
    // Add it?
    roamingSettings.Values.Add("Sound", "myDefaultValue");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:02:04.283

我想你想要这个

```
/// <summary>Returns if a setting is found in the specified storage strategy</summary>
/// <param name="key">Path of the setting in storage</param>
/// <param name="location">Location storage strategy</param>
/// <returns>Boolean: true if found, false if not found</returns>
public static bool SettingExists(string key, StorageStrategies location = StorageStrategies.Local)
{
    switch (location)
    {
        case StorageStrategies.Local:
            return Windows.Storage.ApplicationData.Current.LocalSettings.Values.ContainsKey(key);
        case StorageStrategies.Roaming:
            return Windows.Storage.ApplicationData.Current.RoamingSettings.Values.ContainsKey(key);
        default:
            throw new NotSupportedException(location.ToString());
    }
}
public enum StorageStrategies
{
    /// <summary>Local, isolated folder</summary>
    Local,
    /// <summary>Cloud, isolated folder. 100k cumulative limit.</summary>
    Roaming,
    /// <summary>Local, temporary folder (not for settings)</summary>
    Temporary
} 
```

你可以这样称呼它：

```
var _Exists = SettingExists("Sound", StorageStrategies.Roaming); 
```

这取自我的 StorageHelper：[http ://codepaste.net/gtu5mq](http://codepaste.net/gtu5mq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:57:32.593

也许您可以尝试编写如下代码：

```
 if(string.IsNullOrWhiteSpace(roamingSettings.Values["Sound"])) 
```

# php - Magento列表按属性排序按属性排序而不是值排序

> ID：14932455
> 
> 赞同：2
> 
> 时间：2013-02-18T08:52:23.363
> 
> 标签：php, magento, sorting, e-commerce, magento-1.7

我在magento中遇到属性排序问题。我为用于对类别列表进行排序的产品创建了一个下拉属性。我遇到的问题是排序是按值而不是按我给它们的顺序进行的。

示例：我有带有选项的属性颜色：1\. 红色
2\. 黑色
3\. 绿色

当我选择按颜色排序时，顺序是黑色、绿色、红色，但我需要它是红色、黑色、绿色。

我找到了一个理论上可以解决问题的补丁，但我无法让它工作。 [https://gist.github.com/colinmollenhour/4082426](https://gist.github.com/colinmollenhour/4082426)

我的 magento 版本是 1.7.0.2。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:11:20.230

该补丁需要一些修改才能工作。然而，代码最好放在不同类的模型重写中。

对我有用的解决方案是覆盖`Mage_Eav_Model_Entity_Attribute_Source_Table::addValueSortToCollection`并将以下代码添加到函数的末尾：

```
 $attribute = $this->getAttribute();
        $order = $attribute->getAttributeCode();
        $dir = strtoupper($dir);
        $collection->getSelect()->reset(Zend_Db_Select::ORDER);
        $collection->getSelect()
            ->joinLeft('eav_attribute_option AS eao', "eao.option_id=IF({$order}_t2.value_id > 0, {$order}_t2.value, {$order}_t1.value)", array("sort_order" => 'eao.option_id'))
                ->order(new Zend_Db_Expr('eao.sort_order '.$dir)); 
```

必须注意，这将替换每个目录集合和每个属性的 option_id 排序的值排序，其源模型类是`eav/entity_attribute_source_table`

# c - 为脚本语言选择正确的数据类型

> ID：14932460
> 
> 赞同：0
> 
> 时间：2013-02-18T08:52:47.450
> 
> 标签：c, types, int64

我正在编写一个与“C”非常相似的脚本语言解释器，不同之处在于数字变量的数据类型较少，只有`int`（表示 int 数据类型）和`real`（显然是实数......）。

解释器是一种“虚拟机”（是的，脚本语言被编译成字节码流），现在我需要决定`C`在虚拟机中为脚本语言数字数据类型使用哪种数据类型。现在我打算使用`int64_t`for `int`s 和`long double`for `real`s，但是如果您考虑这两个，我想听听您的意见，相当“大”会有任何性能问题，如果我需要它是否会有问题在只有 32 位架构的嵌入式硬件上运行解释器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:55:21.380

嗯，是的，当然，使用非常大的类型会对您的语言的执行成本产生（巨大的）影响。

许多嵌入式平台在硬件中没有浮点运算，而那些通常只有`float`，甚至没有`double`。整数通常也一样，许多平台仍然只有 32 位。

您将不得不回退到这些功能的软件仿真，这将使执行成本非常高，无论是在速度方面还是在所需的代码量方面。

# iphone - 在 ios 应用程序中创建 .docx 文件，如 office word 文档

> ID：14932463
> 
> 赞同：1
> 
> 时间：2013-02-18T08:52:52.183
> 
> 标签：iphone, ios, objective-c, ipad

我想创建 .docx 文件，我们可以在其中创建包含文本、图像等的 .doc 文件。我该怎么办？有什么方法或参考可以这样做吗？

谢谢，KD

# java - 如何将 JavaDoc 链接到不同的类？

> ID：14932466
> 
> 赞同：5
> 
> 时间：2013-02-18T08:52:55.007
> 
> 标签：java, javadoc

我正在尝试编写一个 javadoc，它显示来自另一种方法的 javadoc，例如：

```
private List<Object> list;

/**
 * {@link list#indexOf(Object)} 
 */
int getMyIndex(Object o) {
   return list.indexOf(o);
} 
```

`getMyIndex()`当我使用我的方法时，这会给我一个 javadoc 链接。但我想要的是 Eclipse 实际上显示（！）来自我在 中引用的方法的 javadoc `@link`。

当然，这不是链接的用途。在这种情况下，Link 做了应该做的事情。

但是我必须用什么来以某种方式“导入”一个外国的javadoc呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T09:01:55.903

不，据我所知，没有任何这样的标签或功能。有关详细信息，请参阅[javadoc 标记列表](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#javadoctags)。

从链接

```
    标签 | 在 JDK/SDK 中引入
----------------------------------
    @作者 1.0
    {@code} 1.5
    {@docRoot} 1.3
    @弃用 1.0
    @异常 1.0
    {@inheritDoc} 1.4
    {@链接} 1.2
    {@linkplain} 1.4
    {@literal} 1.5
    @参数 1.0
    @return 1.0
    @见 1.0
    @序列号 1.2
    @serialData 1.2
    @serialField 1.2
    @从 1.1 开始
    @抛出 1.2
    {@值} 1.4
    @版本 1.0

```

# java - Android：在锁定键长按单击时启动应用程序

> ID：14932472
> 
> 赞同：0
> 
> 时间：2013-02-18T08:53:21.870
> 
> 标签：java, android, android-keypad

我想在长按锁定键时调用我的应用程序。实际上会出现关闭对话框。我想覆盖那个。

这可能吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:54:47.077

**它不可能**，没有定制的 Android 操作系统。或编写自己的启动器应用程序。由于 Android OS 安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:06:17.570

我认为它超出了您的应用范围。您必须获得对手机的root访问权限或编写启动器应用程序...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:24:50.433

如果您对手机具有 root 访问权限并且能够编写自己的 ROM，则可以在锁定菜单中调用您的选项，但正如其他人所说，您不能没有对 ROM 的更多控制。

我的建议是前往：xda-developers.org 并四处询问。

您的应用程序可能会依赖于设备。

# java - 休眠排序忽略空值

> ID：14932476
> 
> 赞同：1
> 
> 时间：2013-02-18T08:53:55.437
> 
> 标签：java, hibernate, null

我有两个班：`A`和`B`这样。

```
public Class A {
    public B b;
    // Setter and Getter
} 
```

```
public Class B {
    String code;
    // Setter and Getter
} 
```

我想要一个`A`从数据库加载的列表，按`B.code`. 但问题是，当 的实例的`A`具有空值时`b`，它会被忽略，并且不会被加载。

这里应该做什么？一个简短的提示就足够了。

**更新**

这是我的代码：

```
DetachedCriteria cr = DetachedCriteria.forClass(A.class, "a");
cr.createAlias("a.b", "b");
cr.addOrder(Order.asc("b.code"));
// something like cr.list(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:49:25.643

默认情况下`createAlias(String associationPath, String alias)`会生成一个内部连接，但在这里您需要一个 LEFT_OUTER 连接，因此请改用以下内容：

```
cr.createAlias("a.b", "b", CriteriaSpecification.LEFT_JOIN); 
```

# jsf-2 - 禁用/启用primefaces中的多个按钮

> ID：14932477
> 
> 赞同：0
> 
> 时间：2013-02-18T08:53:56.953
> 
> 标签：jsf-2, primefaces

如何禁用/启用 Primefaces Buttons() 以便如果启用第一个，则其他两个将被禁用，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:55:07.150

您需要阅读有关[此](https://www.google.ca/search?q=JSF%20%2b%20partial%20%2b%20ajax%20%2b%20submit&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)内容的信息。它被称为部分 ajax 提交，它用于将请求中涉及的相关组件的更新发送回服务器。

# python - 基于直方图的概率密度估计

> ID：14932480
> 
> 赞同：0
> 
> 时间：2013-02-18T08:54:08.933
> 
> 标签：python, histogram, probability, estimation

如何对该数据集的每个边缘分布 p(x1 ) 和 p(x2 ) 进行基于直方图的概率密度估计：

```
import numpy as np
import matplotlib.pyplot as plt
linalg = np.linalg

N = 100
mean = [1,1]
cov = [[0.3, 0.2],[0.2, 0.2]]
data = np.random.multivariate_normal(mean, cov, N)
L = linalg.cholesky(cov)
# print(L.shape)
# (2, 2)
uncorrelated = np.random.standard_normal((2,N))
data2 = np.dot(L,uncorrelated) + np.array(mean).reshape(2,1)
# print(data2.shape)
# (2, 1000)
plt.scatter(data2[0,:], data2[1,:], c='green')    
plt.scatter(data[:,0], data[:,1], c='yellow')
plt.show() 
```

为此，您可以使用 Matlab 或 R 中的 hist 函数。更改 bin 宽度（或等效的 bin 数量）如何影响绘图和 p(x1 ) 和 p(x2 ) 的估计？

我正在使用 Python，是否有类似于 Matlab 中的 hist 函数的东西以及如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:11:25.510

Matlab`hist`函数在 matplotlib 中实现为（你猜对了）[`matplotlib.pyplot.hist`](http://matplotlib.org/api/pyplot_api.html)。它绘制直方图，将 bin 的数量作为参数。要计算直方图而不绘制它，请使用 Numpy[`numpy.histogram`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)函数。

要估计概率分布，您可以使用 中的分布[`scipy.stats`](http://docs.scipy.org/doc/scipy/reference/stats.html)。您从正态分布生成了上述数据。要使此数据符合正态分布，您将使用[`scipy.stats.norm.fit`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html#scipy.stats.norm). 下面是一个代码示例，它绘制数据的直方图并拟合正态分布：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import norm
linalg = np.linalg

N = 100
mean = [1,1]
cov = [[0.3, 0.2],[0.2, 0.2]]
data = np.random.multivariate_normal(mean, cov, N)
L = linalg.cholesky(cov)
# print(L.shape)
# (2, 2)
uncorrelated = np.random.standard_normal((2,N))
data2 = np.dot(L,uncorrelated) + np.array(mean).reshape(2,1)
# print(data2.shape)
# (2, 1000)
plt.figure()
plt.scatter(data2[0,:], data2[1,:], c='green')    
plt.scatter(data[:,0], data[:,1], c='yellow')
plt.show()

# Plotting histograms and fitting normal distributions
plt.subplot(211)
plt.hist(data[:,0], bins=20, normed=1, alpha=0.5, color='green')
plt.hist(data2[0,:], bins=20, normed=1, alpha=0.5, color='yellow')
x = np.arange(-1, 3, 0.001)
plt.plot(x, norm.pdf(x, *norm.fit(data[:,0])), color='green')
plt.plot(x, norm.pdf(x, *norm.fit(data2[0,:])), color='yellow')
plt.title('Var 1')

plt.subplot(212)
plt.hist(data[:,1], bins=20, normed=1, alpha=0.5, color='green')
plt.hist(data2[1,:], bins=20, normed=1, alpha=0.5, color='yellow')
x = np.arange(-1, 3, 0.001)
plt.plot(x, norm.pdf(x, *norm.fit(data[:,1])), color='green')
plt.plot(x, norm.pdf(x, *norm.fit(data2[1,:])), color='yellow')
plt.title('Var 2')

plt.tight_layout() 
```

# c# - 动态生成一个动作

> ID：14932481
> 
> 赞同：3
> 
> 时间：2013-02-18T08:54:16.720
> 
> 标签：c#, .net, expression-trees

我正在尝试弄清楚如何在运行时动态创建一个动作，但结果很短。

假设我想调用一个方法并传入一个动态创建的动作，这样我就可以跟踪是否调用了动作等（无论出于何种原因）。

```
void DoSomething(Action<string> action); 
```

这就是我要调用的方法，我想以某种方式动态构建一个满足参数的 Action。

我知道我可以使用`new Action<string>((s) => { });`

但是对于这种情况，我在编译时不知道 Action 的签名，我想要的只是一个超级通用的 Action，它会让我知道它是否被调用。

这是项目通信系统的一部分，我希望能够支持可用的操作（想想 OnCompleted 回调）。

```
Proxy.DoSomething((s) => Console.WriteLine("The server said: " + s); 
```

我希望能够生成一个表示，通过网络拍摄，在服务器上动态创建一个动作，调用对象上的方法并传入我的动态动作，将结果发送回客户端并在那里调用*实际*动作.

一点澄清：

客户端：

```
var proxy = GetProxyObject(); // Comms proxy
proxy.DoSomething((reply) => Console.WriteLine("Server said: " + reply)); 
```

下：

1.  发现动作的签名
2.  构建一个内部表示对象（很简单）
3.  通过网络将其发送到服务器

服务器端：

```
void ReceivedMessage(msg)
{
   var actParam = msg.Parameters[0]; // This is obviously just for demonstration
   var action = BuildActionWrapper(actParam);
   var result = target.InvokeMethod("DoSomething", action.UnderlyingAction);

   // Send result and Action result back to client
   ReplyToClient(...);
}

void DoSomething(Action<string> act)
{
   act("HELLO!");
} 
```

然后回到客户端，将参数传递给服务器上动态生成的动作，真正的动作只是被这些参数调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:01:46.793

这是一个如何构建这样一个表达式树的示例：

```
var mi = typeof(Console).GetMethod("WriteLine", BindingFlags.Public | BindingFlags.Static, null, new[] { typeof(string) }, null);
var parameter = Expression.Parameter(typeof(string));
var body = Expression.Call(null, mi, new[] { parameter });
Expression<Action<string>> expression = Expression.Lambda<Action<string>>(body, new[] { parameter });

expression.Compile()("test"); 
```

作为替代方案，您可以使用[`Reflection.Emit`](http://msdn.microsoft.com/en-us/library/z43fsh67.aspx)它在运行时生成委托。

例如：

```
var dynMethod = new DynamicMethod("", null, new[] { typeof(string) });
var il = dynMethod.GetILGenerator();
il.Emit(OpCodes.Ldarg_0);
var mi = typeof(Console).GetMethod("WriteLine", BindingFlags.Public | BindingFlags.Static, null, new[] { typeof(string) }, null);
il.Emit(OpCodes.Call, mi);
il.Emit(OpCodes.Ret);

var dynDelegate = (Action<string>)dynMethod.CreateDelegate(typeof(Action<string>));
dynDelegate("test"); 
```

这将生成以下委托：

```
(string s) => Console.WriteLine(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:59:09.253

将`DoSomething`签名转换为以下内容；

```
void DoSomething<T>(Action<T> action, T parameter)
{
    action(parameter);
} 
```

并称之为;

```
Proxy.DoSomething<string>((q) => Console.WriteLine("The server said: " + q, "some string"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:54:35.337

行，

所以我似乎在一定程度上解决了这个问题，这很糟糕，而且可能与它的外观相差甚远。

```
 var mi = this.GetType().GetMethod("DoSomething");
    var actArg = mi.GetParameters()[0];
    var args = actArg.ParameterType.GenericTypeArguments;

    var lt = Expression.Label();

    List<object> values = new List<object>();

    var valVar = Expression.Variable(typeof(List<object>), "vals");
    var para = args.Select(a => Expression.Parameter(a))
        .ToArray();

    var setters = new List<Expression>();

    foreach (var p in para)
    {
        setters.Add(Expression.Call(valVar,
            typeof(List<object>).GetMethod("Add", new[] { typeof(object) }), p));
    }

    var block = Expression.Block(
        variables: new ParameterExpression[]
        {
            valVar,
        },

        expressions: Enumerable.Concat(para,
        new Expression[]
        {
            Expression.Assign(valVar, Expression.Constant(values)),
        }.Concat(setters)
        .Concat(new Expression[]
        {
            Expression.Return(lt),
            Expression.Label(lt),
        })));
    var l = Expression.Lambda(block, para).Compile();
    mi.Invoke(this, new object[] { l }); 
```

基本上，这会构建一个列表来保存方法设置的所有 Action 参数：

```
public void DoSomething(Action<string> act)
{
    act("Hello");
} 
```

表达式的参数是使用动作的类型参数构建的，并且构建了许多 setter 表达式以将该特定参数添加到值列表中。

运行时，表达式将值列表作为常量分配给它拥有的变量，然后 setter 表达式将它们的值添加到列表中，表达式返回。

最终结果是任何 Action 都可以动态生成一个动作，并将结果放入一个列表中，然后该列表可以通过线路从服务器发送到客户端，并且这些值将在客户端上用作实际的参数行动。

# hl7 - Mirth Connect Sender Channel Destination Database writer 无法更新数据库中的记录

> ID：14932482
> 
> 赞同：0
> 
> 时间：2013-02-18T08:54:30.193
> 
> 标签：hl7, mirth

我对 Mirth Connect Sender Channel 有一个奇怪的问题。

一切工作正常并在测试环境中进行了测试，当我在现场部署发送方通道时出现了奇怪的问题。

数据在 Source Transformer 中成功处理并发送到目的地，LLP Sender 将消息成功发送到接收者。

在 Database Writer 步骤，我收到以下错误

```
[2013-02-18 09:02:29,981]  ERROR (org.mule.impl.DefaultComponentExceptionStrategy:95): Caught exception in Exception Strategy for: d3b08b4e-baf1-4462-b2cc-ad36acafdcde: java.sql.SQLException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.net.SocketException
MESSAGE: Broken pipe

STACKTRACE:

java.net.SocketException: Broken pipe

at java.net.SocketOutputStream.socketWrite0(Native Method)

at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)

at java.net.SocketOutputStream.write(SocketOutputStream.java:136)

at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)

at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)

at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:2744)

at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1612)

at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)

at com.mysql.jdbc.Connection.execSQL(Connection.java:3283)

at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1332)

at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1604)

at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1519)

at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1504)

at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)

at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)

at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:596)

at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doDispatch(JdbcMessageDispatcher.java:132)

at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doSend(JdbcMessageDispatcher.java:160)

at org.mule.providers.AbstractMessageDispatcher.send(AbstractMessageDispatcher.java:164)

at org.mule.impl.MuleSession.sendEvent(MuleSession.java:191)

at org.mule.impl.MuleSession.sendEvent(MuleSession.java:130)

at org.mule.routing.outbound.AbstractOutboundRouter.send(AbstractOutboundRouter.java:85)

at org.mule.routing.outbound.FilteringMulticastingRouter.route(FilteringMulticastingRouter.java:61)

at org.mule.routing.outbound.OutboundMessageRouter$1.doInTransaction(OutboundMessageRouter.java:78)

at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:48)

at org.mule.routing.outbound.OutboundMessageRouter.route(OutboundMessageRouter.java:82)

at org.mule.impl.model.DefaultMuleProxy.onCall(DefaultMuleProxy.java:247)

at org.mule.impl.model.seda.SedaComponent.doSend(SedaComponent.java:209)

at org.mule.impl.model.AbstractComponent.sendEvent(AbstractComponent.java:277)

at org.mule.impl.MuleSession.sendEvent(MuleSession.java:201)

at org.mule.routing.inbound.InboundMessageRouter.send(InboundMessageRouter.java:176)

at org.mule.routing.inbound.InboundMessageRouter.route(InboundMessageRouter.java:143)

at org.mule.providers.AbstractMessageReceiver$DefaultInternalMessageListener.onMessage(AbstractMessageReceiver.java:487)

at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:266)

at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:229)

at com.mirth.connect.connectors.jdbc.JdbcMessageReceiver.processMessage(JdbcMessageReceiver.java:179)

at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.doInTransaction(TransactedPollingMessageReceiver.java:159)

at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:72)

at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.run(TransactedPollingMessageReceiver.java:149)

at org.mule.impl.work.WorkerContext.run(WorkerContext.java:290)

at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)

at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)

at java.lang.Thread.run(Thread.java:662)

** END NESTED EXCEPTION **

Last packet sent to the server was 1 ms ago. Query: UPDATE hl7worklist SET status = ? WHERE id = ?;
 Parameters: [2.0, 12596]
    java.sql.SQLException: Communications link failure due to underlying exception: ** BEGIN NESTED EXCEPTION ** java.net.SocketExceptionMESSAGE: Broken pipeSTACKTRACE:java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:2744)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1612)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
    at com.mysql.jdbc.Connection.execSQL(Connection.java:3283)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1332)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1604)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1519)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1504)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:596)
    at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doDispatch(JdbcMessageDispatcher.java:132)
    at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doSend(JdbcMessageDispatcher.java:160)
    at org.mule.providers.AbstractMessageDispatcher.send(AbstractMessageDispatcher.java:164)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:191)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:130)
    at org.mule.routing.outbound.AbstractOutboundRouter.send(AbstractOutboundRouter.java:85)
    at org.mule.routing.outbound.FilteringMulticastingRouter.route(FilteringMulticastingRouter.java:61)
    at org.mule.routing.outbound.OutboundMessageRouter$1.doInTransaction(OutboundMessageRouter.java:78)
    at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:48)
    at org.mule.routing.outbound.OutboundMessageRouter.route(OutboundMessageRouter.java:82)
    at org.mule.impl.model.DefaultMuleProxy.onCall(DefaultMuleProxy.java:247)
    at org.mule.impl.model.seda.SedaComponent.doSend(SedaComponent.java:209)
    at org.mule.impl.model.AbstractComponent.sendEvent(AbstractComponent.java:277)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:201)
    at org.mule.routing.inbound.InboundMessageRouter.send(InboundMessageRouter.java:176)
    at org.mule.routing.inbound.InboundMessageRouter.route(InboundMessageRouter.java:143)
    at org.mule.providers.AbstractMessageReceiver$DefaultInternalMessageListener.onMessage(AbstractMessageReceiver.java:487)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:266)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:229)
    at com.mirth.connect.connectors.jdbc.JdbcMessageReceiver.processMessage(JdbcMessageReceiver.java:179)
    at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.doInTransaction(TransactedPollingMessageReceiver.java:159)
    at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:72)
    at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.run(TransactedPollingMessageReceiver.java:149)
    at org.mule.impl.work.WorkerContext.run(WorkerContext.java:290)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)** END NESTED EXCEPTION **Last packet sent to the server was 1 ms ago. Query: UPDATE hl7worklist SET status = ? WHERE id = ?; Parameters: [2.0, 12596]
    at org.apache.commons.dbutils.QueryRunner.rethrow(QueryRunner.java:542)
    at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:599)
    at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doDispatch(JdbcMessageDispatcher.java:132)
    at com.mirth.connect.connectors.jdbc.JdbcMessageDispatcher.doSend(JdbcMessageDispatcher.java:160)
    at org.mule.providers.AbstractMessageDispatcher.send(AbstractMessageDispatcher.java:164)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:191)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:130)
    at org.mule.routing.outbound.AbstractOutboundRouter.send(AbstractOutboundRouter.java:85)
    at org.mule.routing.outbound.FilteringMulticastingRouter.route(FilteringMulticastingRouter.java:61)
    at org.mule.routing.outbound.OutboundMessageRouter$1.doInTransaction(OutboundMessageRouter.java:78)
    at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:48)
    at org.mule.routing.outbound.OutboundMessageRouter.route(OutboundMessageRouter.java:82)
    at org.mule.impl.model.DefaultMuleProxy.onCall(DefaultMuleProxy.java:247)
    at org.mule.impl.model.seda.SedaComponent.doSend(SedaComponent.java:209)
    at org.mule.impl.model.AbstractComponent.sendEvent(AbstractComponent.java:277)
    at org.mule.impl.MuleSession.sendEvent(MuleSession.java:201)
    at org.mule.routing.inbound.InboundMessageRouter.send(InboundMessageRouter.java:176)
    at org.mule.routing.inbound.InboundMessageRouter.route(InboundMessageRouter.java:143)
    at org.mule.providers.AbstractMessageReceiver$DefaultInternalMessageListener.onMessage(AbstractMessageReceiver.java:487)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:266)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:229)
    at com.mirth.connect.connectors.jdbc.JdbcMessageReceiver.processMessage(JdbcMessageReceiver.java:179)
    at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.doInTransaction(TransactedPollingMessageReceiver.java:159)
    at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:72)
    at org.mule.providers.TransactedPollingMessageReceiver$MessageProcessorWorker.run(TransactedPollingMessageReceiver.java:149)
    at org.mule.impl.work.WorkerContext.run(WorkerContext.java:290)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-24T07:59:33.817

“通信链接故障...”是一种非常普遍的消息类型。

我遇到此错误的时间与数据库服务器运行时间过长（+500 天或其他时间......）有关。只需重新启动 Windows Server 即可解决问题。

当时它与 Windows Server (2003/2008 Server) 中的 TCP/IP 堆栈中的一个错误有关，即当服务器启动时间过长时，它无法再创建新连接。我认为 a 已在 Windwows 的补丁中解决。较新的 Windows Server 版本也不会出现此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T16:50:24.240

“断管”是指与服务器的连接出现问题。检查那个。

# java - 在java中设置png图像的DPI

> ID：14932488
> 
> 赞同：1
> 
> 时间：2013-02-18T08:55:01.677
> 
> 标签：java

我正在使用以下代码来设置 [ng 文件的 dpi。此代码仅显示在该站点的一个线程中。但是我无法理解该代码的第一行会产生异常：

```
static BufferedImage gridImage;
....

private static void saveGridImage(File output) throws IOException {
output.delete();

final String formatName = "png";

for (Iterator<ImageWriter> iw = ImageIO.getImageWritersByFormatName(formatName); iw.hasNext();) {
   ImageWriter writer = iw.next();
   ImageWriteParam writeParam = writer.getDefaultWriteParam();
   ImageTypeSpecifier typeSpecifier = ImageTypeSpecifier.createFromBufferedImageType(BufferedImage.TYPE_INT_RGB);
   IIOMetadata metadata = writer.getDefaultImageMetadata(typeSpecifier, writeParam);
   if (metadata.isReadOnly() || !metadata.isStandardMetadataFormatSupported()) {
      continue;
   }

   setDPI(metadata);

   final ImageOutputStream stream = ImageIO.createImageOutputStream(output);
   try {
      writer.setOutput(stream);
      writer.write(metadata, new IIOImage(gridImage, null, metadata), writeParam);
   } finally {
      stream.close();
   }
   break;
}
 }

 private static void setDPI(IIOMetadata metadata) throws IIOInvalidTreeException {

// for PMG, it's dots per millimeter
double dotsPerMilli = 1.0 * 300 / 10 / 2.54;

IIOMetadataNode horiz = new IIOMetadataNode("HorizontalPixelSize");
horiz.setAttribute("value", Double.toString(dotsPerMilli));

IIOMetadataNode vert = new IIOMetadataNode("VerticalPixelSize");
vert.setAttribute("value", Double.toString(dotsPerMilli));

IIOMetadataNode dim = new IIOMetadataNode("Dimension");
dim.appendChild(horiz);
dim.appendChild(vert);

IIOMetadataNode root = new IIOMetadataNode("javax_imageio_1.0");
root.appendChild(dim);

metadata.mergeTree("javax_imageio_1.0", root);
 } 
```

例外是：

```
java.lang.IllegalArgumentException: image == null! 
```

请帮我弄清楚，因为我是java新手..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:40:10.363

`gridImage`字段显然从未分配过，当`new IIOImage(gridImage, null, metadata)`被调用时它为空。

# android - Android OpenGL 旋转矩阵变形

> ID：14932494
> 
> 赞同：0
> 
> 时间：2013-02-18T08:55:17.057
> 
> 标签：android, opengl-es, matrix, rotation

在我的渲染器中，我有：

```
private float[] MATRIX_VIEW = new float[16];
private float[] MATRIX_PROJECTION = new float[16];
private float[] MATRIX_VP = new float[16]; 
```

在“onSurfaceChanged”中：

```
...
//Set projection
Matrix.orthoM(
  MATRIX_PROJECTION,0,
  -hDim,hDim,
  -vDim,vDim,
  1,100
);
//Set View
Matrix.setLookAtM(
  MATRIX_VIEW,0,
  cameraPosition[0],
  cameraPosition[1],
  cameraPosition[2],
  cameraFacing[0],
  cameraFacing[1],
  cameraFacing[2],
  cameraHook[0],
  cameraHook[1],
  cameraHOOK[2]
);
//SetView*Projection
Matrix.multiplyMM(
  MATRIX_VP,0,
  MATRIX_PROJECTION,0,
  MATRIX_VIEW,0
);
... 
```

我有一个形状的许多克隆，所以我编写了“ShapeSet_Set”类：

```
...    
private float[] MATRIX_ORIGIN = new float[16];
private float[] MATRIX_VPO = new float[16];

private float[] MATRIX_SCALE = new float[16];
...

/*
origin matrix is group of all shapes center position
scale matrix represents zoom
*/ 
```

和“ShapeSet_Element”：

```
...    
private float[] MATRIX_POSITION = new float[16];
private float[] MATRIX_ROTATION = new float[16];

private float[] MATRIX_ALL = new float[16];
...

/*
position matrix is position of shape relative to origin position
rotation matrix is shape rotation arond its center
all matrix is matrix which will be passed to shader
*/ 
```

在渲染器的“DrawFrame”上，ShapeSet_Set 的“onDrawFrame”被调用。它计算 View*Projection*Origin 矩阵：

```
...
Matrix.multiplyMM(
  MATRIX_VPO,0,
  RENDERER.getVPMatrix(),0,
  MATRIX_ORIGIN,0
);
... 
```

并调用每个 ShapeSet_Element 的“onDrawFrame”，其中包含：

```
...
//Get View*Projection*Origin matrix
System.arraycopy(
  SET.getVPOMatrix(),0,
  MATRIX_ALL,0,
  16
);
//Apply zoom
Matrix.multiplyMM(
  MATRIX_ALL,0,
  MATRIX_ALL,0,
  SET.getScaleMatrix(),0
);
//Apply element's position
Matrix.multiplyMM(
  MATRIX_ALL,0,
  MATRIX_ALL,0,
  MATRIX_POSITION,0
);
//Apply element's rotation
Matrix.multiplyMM(
  MATRIX_ALL,0,
  MATRIX_ALL,0,
  MATRIX_ROTATION,0
);
... 
```

一切正常，直到我应用旋转。这是设置元素旋转的方法：

```
public void setRotation(float xDeg,float yDeg,float zDeg)
{
  //Set new rotation values to open up actual values
  rotation_X = xDeg;
  rotation_Y = yDeg;
  rotation_Z = zDeg;
  //Set new rotation matrix
  Matrix.setIdentityM(MATRIX_ROTATION,0);
  //Rotate around x axis
  Matrix.rotateM(
    MATRIX_ROTATION,0,
    rotation_X,0,
    1,0,0
  );
  //Rotate around y axis
  Matrix.rotateM(
    MATRIX_ROTATION,0,
    -rotation_Y,0,
    0,1,0
  );
  //Rotate around z axis
  Matrix.rotateM(
    MATRIX_ROTATION,0,
    rotation_Z,0,
    0,0,-1
  );
} 
```

当元素围绕 x 或 y 轴旋转时，它可以正常工作，但是......当围绕 z 轴旋转时，元素的高度（原始 y 尺寸）在几何上减小到 0，当旋转 90 度并在旋转 180 时放大到原始值度。

有谁知道，这可能是什么原因？

如果这是通过错误的矩阵乘法或错误的旋转矩阵设置完成的，我无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:06:36.957

可以避免像这样没有四元数的万向节锁定[http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html](http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html)

听起来您的模型视图矩阵中的某些东西出了问题，请尝试像上面的链接中那样进行旋转，它可能会解决您的问题

# c# - 上传文件时的 C# 内存分配

> ID：14932496
> 
> 赞同：4
> 
> 时间：2013-02-18T08:55:21.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

与在 MVC 中上传文件有些相关的问题。

上传文件时如何分配内存？

```
[HttpPost]
    public ActionResult FileUpload(string qqfile)
    {
            var stream = Request.InputStream; 
```

假设一个人正在上传一个 100 MB 的文件，一旦`Request.InputStream`收到它会发生什么？

编辑：

流和`Request.InputStream`处理退出时会发生什么`ActionResult`？

*   流存储在哪里？内存分配？
*   什么时候处理？Request.InputStream 什么时候处理？
*   如果我将流存储在变量中，它保存到哪里？
*   一旦动作结果退出，“流”变量会发生什么？
*   变量“流”持有什么？，Request.InputStream的引用/指针？还是字节的“完整”副本（假设为 100MB）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:10:11.463

Stream 旨在允许在尚未接收到所有数据时从数据源读取数据。情况就是如此`Request.InputStream`。其他的，比如`MemoryStream`，直接包装一个内存缓冲区。

数据的确切存储位置取决于流的类型。在 Socket 级别有一个缓冲区，数据可能会一直保存到它被读取，或者 IIS 可能会为您缓冲它。

当您（或 .NET，在这种情况下）处置 Stream 或垃圾收集器为您执行此操作时，缓冲区将被处置。套接字层当然只会在连接关闭后释放其缓冲区 - 释放流并不总是释放底层缓冲区。

流的设计使您可以只使用这些数据 - 一个`Stream`数据 - 而不必担心底层缓冲区。谁负责处理流的一般规则是：您创建它？你处理它。

响应您的编辑：如果您将流存储在变量中，例如在 ASP.NET 会话中，一旦`Request`不再需要该对象，.NET 无论如何都会处理该流。您的变量仍将包含对该流的引用，但从中读取将抛出一个`ObjectDisposedException`.

注意 a`Stream`和缓冲区之间的区别 - a`Stream`提供对任何类型缓冲区的读取和/或写入访问 - 甚至是“包含”尚未接收到的数据的虚拟缓冲区。尝试从该缓冲区读取将阻塞当前线程，直到（部分）数据已被接收（或直到发生错误）。

而且，为了完成混淆，您可以拥有从多个缓冲区读取的流、从同一缓冲区读取的多个流以及包装流的流。

# javascript - NiceScrollbar 与 Pageslide

> ID：14932499
> 
> 赞同：0
> 
> 时间：2013-02-18T08:55:27.853
> 
> 标签：javascript, jquery, css

我正在尝试将[jQuery Nice Scrollbar](http://areaaperta.com/nicescroll/)添加到使用[jQuery Page Slide 插件](http://srobbin.com/jquery-plugins/pageslide/)的滑动面板。

但这似乎不起作用。请帮我检查我的代码，这是示例页面

[https://dl.dropbox.com/u/69217301/scroll/index.html](https://dl.dropbox.com/u/69217301/scroll/index.html)

我提供了错误的 id 还是因为缺少某些东西？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:48:36.720

试试这个

```
#pageslide 
  {
    background-color: #333333;
    box-shadow: 0 0 5px 5px #222222 inset;
    color: #FFFFFF;
    display: none;
    height: 100%;
   padding: 20px;
   position: fixed;
   top: 0;
   width: 260px;
} 
```

# java - Android、Logcat 和 BufferedReader - 无日志

> ID：14932502
> 
> 赞同：1
> 
> 时间：2013-02-18T08:55:37.870
> 
> 标签：java, android, logging, logcat

我正在制作一个应用程序，它必须在日志中显示我在设备上启动了哪些应用程序。我`logcat ActivityManager:I *:S`在某些设备和模拟器上使用并且做得很好。

但在某些设备上它有奇怪的行为——我在日志中看到的一切都是重复的：

`02-18 16:32:09.132: D/LockApp(4082): --------- beginning of /dev/log/main`

代码片段：

```
Process process = null;
try {
    process = Runtime.getRuntime().exec("logcat -c");
    process = null;
    process = Runtime.getRuntime().exec("logcat ActivityManager:I *:S");
    br = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String line = null;

    line = br.readLine();

    while( line != null && !this.isInterrupted()){
        Log.d(Tag, "Start LockApp loop");
        Log.d(Tag, line);
    }
} catch (IOException e) {
    Log.d(Tag, e.toString());
} 
```

我`android.permission.READ_LOGS`在清单中有

我正在使用 Android 4.1 和 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:06:02.687

这是什么`logcat -c`>这将清除（刷新）整个日志并退出。

只有`V,D,I,W,E & WTF`:-) 六类 logcat 类

在此处将其更改为`Runtime.getRuntime().exec("logcat -e");` [链接：](http://developer.android.com/tools/debugging/debugging-log.html)

**编辑：** 在此处阅读果冻豆 [链接时出现问题](https://stackoverflow.com/q/11461650/1012284)

Jelly Beans (Android 4.1) 的 READ_LOGS 权限将不再授予普通应用程序。

应用程序只允许读取自己的日志。

查看更多[信息](https://groups.google.com/group/android-developers/browse_thread/thread/e94e00e62ad66a78)

您可以尝试实现一个功能，为拥有根设备的用户授予自己 READ_LOGS 权限。

# c++ - 优化 C++ 代码

> ID：14932504
> 
> 赞同：-2
> 
> 时间：2013-02-18T08:55:45.533
> 
> 标签：c++, optimization

我正在在线法官上尝试经典的子集和问题。但是，这次的不同之处在于 n<​​=30，因此最大操作数可以达到 30*2^30。我已经在下面有一些工作代码。但是，程序的时间限制是 1 秒，我的程序在 0.5 到 1.1 秒之间徘徊。尽管我已尽我所能加快我的代码速度，但这会导致 TLE。你们对我如何能够进一步加快和优化我的代码有什么建议吗？提前致谢。

```
#include <iostream>
#include <cstdio>
using namespace std;

unsigned power(unsigned x, unsigned y){        //pow function
    unsigned sum=x;
    for (int i=1;i<=y-1;i++)
        sum*=x;
    return sum;
}

int main(){
    unsigned t, n, p, sum, sum2, tmpsum=0;
    unsigned bars[32];
    bool found;
    scanf("%u", &t);
    while (t--){
        tmpsum=0;
        found=false;
        scanf("%u %u", &n, &p);
        for (int i=0;i<p;i++){
            scanf("%u",&bars[i]);
            tmpsum+=bars[i];
        }
        if (tmpsum<n)found=false;
        unsigned end=power(2,p)-1;          //counting from the end and from the start
        for (unsigned i=0;i<power(2,p)&&tmpsum>=n;i++){       //counting from 1 to 2^n in binary
            sum=0;
            sum2=0;
            for (unsigned j=0;j<p;j++){
                if (i&(1<<j))
                    sum+=bars[j];
                if (end&(1<<j))     //counting from the end and start at the same time
                    {sum2+=bars[j];end--;}
            }
            if (sum==n||sum2==n)
                {found=true;break;}
        }
        cout<<(found==true?"YES":"NO")<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:57:48.050

移出`power(2,p)`循环。

```
for (unsigned i=0;i<power(2,p)&&tmpsum>=n;i++)
                      ^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T08:58:39.610

使用位移来计算 2 的度数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T09:00:39.237

编写丑陋的代码并不能使它更快，将您的语句分成不同的行，即替换`{sum2+=bars[j];end--;}`为

```
{
    sum2 += bars[j];
    --end;
} 
```

关于问题：您的主要时间损失可能在这里：

```
for (unsigned i=0;i<power(2,p)&&tmpsum>=n;i++){ 
```

除非你有一个特别好的编译器，否则`power(2, p)`每个循环都会计算一次，这是完全不需要的。预先计算它。

```
int pow2p = power(2, p);
for (unsigned i=0;i<pow2p&&tmpsum>=n;i++){ 
```

此外，以这种方式执行 2 的幂非常慢，因此请`<<`改用 ( `1<<p == power(2, p)`)。

**编辑**由于这已被接受，我将从其他答案/评论中收集小点：

1.  正如 Nim 指出的那样，`tmpsum>=n`检查不需要在每个循环中都进行，因为在循环期间既不改变`n`也不`tmpsum`改变。

2.  正如 Karthik T 指出的那样，这条线`if (tmpsum<n)found=false;`是多余的，`found`只能`false`在这一点上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T09:30:15.417

除了其他人所说的，[避免分支](http://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction)。例如：

```
if (i&(1<<j))
    sum+=bars[j]; 
```

可以写成

```
sum+=bars[j] * ((i&(1<<j))>>j); 
```

诚然，它使已经很难阅读的代码变得更难阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:00:01.480

```
if (tmpsum<n)found=false; 
```

这条线一事无成，`found`已经是`false`。

```
1<<j 
```

正在计算两次，通过存储结果可以减少到一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T09:01:11.813

对于初学者，您可以移出`power(2,p)`for 循环

```
for (unsigned i=0, end=power(2,p); i<end && tmpsum>=n; i++) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-18T09:01:52.357

1.  幂（2，p）等于 1 << p
2.  将 sum 和 sum2 定义为寄存器变量。

    注册无符号和，sum2；

# javascript - 打印 Html 可滚动页面：未打印可滚动部分

> ID：14932505
> 
> 赞同：2
> 
> 时间：2013-02-18T08:56:00.123
> 
> 标签：javascript, css, html

我在打印 html 页面时遇到问题。实际上我的结构如下：我有一个包含几个 iframe 的 html 页面。这些 iframe 中的每一个都嵌入了一个 html 页面。我需要做的是在 fraim“Main”中添加一个打印链接，让用户打印 iframe 内容。

我在该特定 iframe 的 html 中添加了以下内容：

```
<a href="javascript:window.print()"><img src="./custom/images/print.png" /></a> 
```

但我有几个问题。1）主要是该页面内的文本是可滚动的，因为它是动态的并且可以很长，因此通常不会适合屏幕，用户需要滚动才能看到整个文本。现在，当我尝试打印页面时，打印的只是我放置链接的 iframe 的内容（这就是我想要的，即使是意外的原因，我从未指定它）并且只有文本的可见部分，相反，我想要它作为一个完整的文件。还打印了可滚动条，我不知道为什么。有什么我需要添加来打印的吗？

2) 我对 Safari 有另一种不正确的行为，而 Chrome 没有这种行为。基本上，当我单击 Chrome 上的打印按钮时，浏览器会打开一个新层，其中显示页面预览，加载我创建的“打印”css（这真的很酷，可能是 Chrome 的功能）。与 safari 不同，预览直接加载到 iframe 中，因此显示给用户的内容会发生变化，并且通常会卡在上面。你知道我为什么会遇到这个问题吗？对我来说可以不显示任何打印预览，我只希望页面中的内容不被修改。

PS关于第一点我需要直接打印页面，如果页面，我无法打开一个带有可打印版本的新窗口，然后打印新的。这导致我的页面是使用外部“工具”api动态生成的，所以假设我没有脱离这个上下文。我可以，但我需要让某人创建一个 API 来做到这一点，而且只有当我 100% 确定这会解决问题时，我才能做到这一点。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:02:36.243

老实说，保持简单！

在 iram 下有一个可打印版本的链接！所以说你有你的 iframe 代码

```
<iframe>page2.php </iframe>
<a href="page2.php">Print</a> 
```

这是一个真正的新作品，看起来不错，大多数用户通常会接受，因为它的场景很多！

自然地，iframe 标签中的 page2.php 只是一种表示形式，我相信还有另一种方法，但对我来说这将是最简单的！

# jquery - jquery验证：密码更改和确认

> ID：14932508
> 
> 赞同：0
> 
> 时间：2013-02-18T08:56:13.730
> 
> 标签：jquery, jquery-validate

我以成员数据修改的形式使用了 jQuery 验证。表单中共有三个字段，即原密码（`passwordOrig`）、新密码（`password`）和密码确认（`passwordSecond`）。我想确保用户输入**all of them**或**none of them**。我如何用 jQuery 做到这一点？

以下是我想出的：

```
$("#accountData").validate({
  rules: {
    passwordOrig: {checkPassword: true},
    password: {validChars: true, noSpace: true, minlength: 5},      
    passwordSecond: {equalTo: "#password"},
    ...
  }
  message: {
    ...
  } 
```

在上面，`checkPassword`、`validChars`和`noSpace`是添加的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:01:07.890

您将需要包含[additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)文件并使用名为`skip_or_fill_minimum`.

`class`在相关`input`字段中添加一个共同点：

```
<form id="accountData">
    <input type="text" class="pw" name="passwordOrig" />
    <input type="text" class="pw" name="password" id="password" />
    <input type="text" class="pw" name="passwordSecond" />
    ....
</form> 
```

该`skip_or_fill_minimum`规则需要两个参数，分组中的字段数和`class`您在上面创建的名称`skip_or_fill_minimum: [3,".pw"]`：

```
$(document).ready(function () {

    $('#accountData').validate({ // initialize the plugin
        rules: {
            passwordOrig: {
                checkPassword: true,
                skip_or_fill_minimum: [3,".pw"]
            },
            password: {
                validChars: true,
                noSpace: true,
                minlength: 5,
                skip_or_fill_minimum: [3,".pw"]
            },
            passwordSecond: {
                equalTo: "#password",
                skip_or_fill_minimum: [3,".pw"]
            }
        },
        groups: {
            justaname: "passwordOrig password passwordSecond"
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/DmTNW/](http://jsfiddle.net/DmTNW/)**

我还使用[了将三条消息组合为一条的`groups:`选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)，但如果需要，您可以将其删除。您可能还希望将自定义`noSpace`方法替换为已包含在`additional-methods.js`名为 的文件中的方法`nowhitespace`，但同样，这取决于您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:33:00.640

您需要确保给定集合中的最少字段数被填写或留空 - [additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)有一个方法可以满足此要求，称为**skip_or_fill_minimum**

要使用此规则，您需要向您感兴趣的输入添加一个类

```
<input class="mygroup" name="fname" id="fname">
<input class="mygroup" name="sname" id="sname">
<input class="mygroup" name="other" id="other"> 
```

然后指定规则说明您需要填写多少，在您的情况下全部三个，以及您使用的类，在这种情况下是 mygroup。

```
...
rules : {
 fname : {skip_or_fill_minimum: [3,".mygroup"]}, 
 sname : {skip_or_fill_minimum: [3,".mygroup"]},
 other : {skip_or_fill_minimum: [3,".mygroup"]},
},
... 
```

[在这个答案中](https://stackoverflow.com/a/14883356/678338)有一个使用姐妹函数 require_from_group 的好例子

# java - 如何选择一个或多个不与特定单词相交的字符

> ID：14932510
> 
> 赞同：0
> 
> 时间：2013-02-18T08:56:42.157
> 
> 标签：java, regex

我有一个简单的问题。我想选择一个或多个不与特定单词相交的字符（开始和结束短语）。

例如：我想从下一个文本中选择 1234, efghijabcklmn。

```
String now   = "abcd";
String next  = "1234abcdefghijabcklmn"; 
```

我试过 ^abcd, ^(abcd), [^a][^b][^c][^d] 没有任何效果。我知道这可以通过拆分和标记化来完成。但我想通过正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:59:37.410

> 我知道这可以通过拆分和标记化来完成。但我想通过正则表达式。

好吧，只[`String#split(regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)接受一个`regex`as 参数。所以，为什么不使用它，因为这个问题是*分裂*的理想候选者。

```
String now = "abcd";
String next = "1234abcdefghijabcklmn";

System.out.println(Arrays.toString(next.split(Pattern.quote(now)))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:01:10.147

只是拆分abcd ...

```
System.out.println(Arrays.toString("1234abcdefghijabcklmn".split("abcd"))); 
```

# facebook - 未连接用户的 Facebook 粉丝页面为空

> ID：14932511
> 
> 赞同：0
> 
> 时间：2013-02-18T08:56:47.870
> 
> 标签：facebook, facebook-page

我管理许多 Facebook 页面。在其中一些上，每个人都可以查看状态更新。在其他人上，只有连接的成员可以看到他们，其他人什么都看不到。我检查了页面的参数，但我无法弄清楚它们之间到底有什么不同。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:00:12.343

似乎 Facebook 只向未连接的用户显示最近的页面更新。我的大部分页面都没有最近的更新，这让我觉得它根本没有显示任何东西。

# matlab - 如何在 HMM matlab 统计工具箱中定义发射矩阵

> ID：14932512
> 
> 赞同：1
> 
> 时间：2013-02-18T08:56:49.577
> 
> 标签：matlab, image-recognition, hidden-markov-models, training-data

我是 Matlab 图像处理的新手，现在我正在使用带有 Matlab 统计工具箱的 HMM 进行字符识别。

我有一个输入图像宽度：400，高度：100，图像是二进制图像。我将每个输入图像分成 10 个水平块。在每个块中，我计算图像的密度。因此在每张图像中我可以获得 10 个特征向量。

假设 F 是图像的特征向量

F=[26 55 74 123 186 260 258 75 43 21]

我的问题是如何将特征向量转换为 hmm 序列，以便我可以使用 hmmtrain 命令使用它。在我的情况下，发射矩阵是什么？

在问这个问题之前，我已经看过[Omid Sakhi](http://www.mathworks.com/matlabcentral/fileexchange/37351-face-recognition-software)的类似例子。但是，我还是不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T14:52:13.567

我会推荐 Yamato 等人的这篇论文“Recognizing human action in time-sequential images using hidden Markov model”。在这项工作中，他们使用 k-means 算法执行向量量化，将特征向量转换为符号，我认为这与您的问题相似。

所以，基本上你对特征向量进行聚类并将聚类中心保存为码本。之后，您可以将每个特征向量映射到最近的集群中心，然后将其替换为相应的集群 ID。因此，您可以将块序列表示为集群 ID 序列。

发射可以是集群 ID。

# sql - GridView 的过程分页

> ID：14932515
> 
> 赞同：0
> 
> 时间：2013-02-18T08:56:53.950
> 
> 标签：sql, sql-server, tsql, webforms

我想循环将数据从@tbl 表放入@tbl2 表中。不幸的是，我不知道我必须在 insert (INSERT INTO @tbl2 Values(@ID,?,?)) 中放入什么，我的意思是第二个和第三个参数。

**MSSQL 2008 R2**

例如（表@tbl）：

规格 ID | SP

3 | “2008 年 5 月 1 日上午 8 点 30 分 52 秒”

8 | “2008 年 5 月 1 日上午 8 点 30 分 52 秒”

9 | “2008 年 5 月 1 日上午 8 点 30 分 52 秒”

如果@count = 3 我想获取这些数据 (9 | '5/1/2008 8:30:52 AM')

```
DECLARE @tbl TABLE
(
    SpecId BIGINT,
    SP DATETIME
) 
DECLARE @tbl2 TABLE
(
    ID int,
    SpecId BIGINT,
    SP DATETIME
) 
DECLARE @ID INT
DECLARE @count INT
DECLARE @firstNumber INT
DECLARE @secondNumber INT
SET @firstNumber = @PageSize * 10
SET @secondNumber = @firstNumber - 10 

WHILE (@count <= @TotalRowsNumber)

BEGIN

   IF @count > @secondNumber and @count <= @firstNumber
   BEGIN
        SET @ID +=1
        INSERT INTO @tbl2 Values(@ID,?,?)
   END

   SET @count = (@count + 1)

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:58:43.747

固定的。

我添加到这个表**ID int**并且稍后在循环中我为这两个参数创建了简单的选择：

声明 @tbl 表（SpecId BIGINT，SP DATETIME）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:07:40.357

你快到了……看看这个：

```
DECLARE @tbl TABLE
(
  Id int identity(1, 1),
    SpecId BIGINT,
    SP DATETIME
) 
DECLARE @tbl2 TABLE
(
    ID int,
    SpecId BIGINT,
    SP DATETIME
) 
DECLARE @ID INT
DECLARE @count INT
DECLARE @firstNumber INT
DECLARE @secondNumber INT
declare @PageSize int
declare @TotalRowsNumber int

SET @firstNumber = @PageSize * 10
SET @secondNumber = @firstNumber - 10 

-- Populate tbl
insert
into    @tbl
select  value1, value2
from    original_table

set @TotalRowsNumber = @@rowcount
set @count = 1

WHILE (@count <= @TotalRowsNumber)

BEGIN

  select  @value1 = value1
        , @value2 = value2
  from    @tbl
  where   Id = @count 

   IF @count > @secondNumber and @count <= @firstNumber
   BEGIN
        SET @ID +=1
        INSERT INTO @tbl2 Values(@ID,@value1,@value2)
   END

   SET @count = (@count + 1)

END 
```

我做了什么。@tbl 需要获得一个额外的列，称为 Id。这是一个标识列，用于在以后的体育场中进行引用。接下来，您使用原始值填充 @tbl。在 while 循环中，您将 @tbl 值放入一些变量中（感谢 @count = id 您正在循环记录），然后将它们插入 @tbl2

# c# - 将 inputSteam 存储到数据库并读取它们会导致文件损坏

> ID：14932518
> 
> 赞同：0
> 
> 时间：2013-02-18T08:57:12.313
> 
> 标签：c#, file-upload, bytearray, jquery-file-upload

我正在使用 C#`HttpPostedFileBase`使用以下代码将字节数组保存到我的 sql server 数据库中：

```
private byte[] GetByteArrayFromFile(HttpPostedFileBase file)
{
    using (var b = new BinaryReader(file.InputStream))
    return b.ReadBytes(file.ContentLength);
} 
```

当我阅读该文件时，我得到一个损坏的应用程序异常，我用 pdf 文件、excel 文件打开它。它似乎只适用于 txt 文件。

这是我用来检索文件的代码：

```
 _response = context.HttpContext.Response;
_response.ContentType = GetMimeType(Path.GetExtension(_fileDownloadName));
_response.AddHeader("Content-Disposition", "attachment; filename=" + _fileDownloadName);
_response.OutputStream.Write(_buffer, 0, _buffer.Length);
_response.Flush();
_stream.Close();
_response.Flush();
_response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:10:14.313

尝试关闭响应输出缓冲（参见[HttpResponse.BufferOutput 属性](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.bufferoutput.aspx)）：

```
HttpContext.Current.Response.BufferOutput = false; 
```

此外，这篇文章可能很有用：[ASP.NET 中的 Range-Specific Requests](http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx)，请参阅“使用 RangeRequestHandlerBase HTTP 处理程序”部分。

# javascript - “使用严格”是否已过时？

> ID：14932520
> 
> 赞同：7
> 
> 时间：2013-02-18T08:57:14.290
> 
> 标签：javascript, jslint, use-strict

请假设“使用严格”；并且还假设 JSLint 已打开并且不能忽略错误。

我发现运算符和 ',' 启动的列表更具可读性，

例如：

```
var i = 0
    , j = 1
    , someLongVariablename1
    , someLongVariablename2
    , someLongVariablename3
    , someLongVariablename4;

 if( (
     'dcr' === cmd
      && (action)
      && ('get' === actionHttp || 'post' === actionHttp )
      && whatever
   ) { ... } 
```

因此我的问题
是：“使用严格”是否已过时？

编辑：'使用严格'；不会阻止坏行代码的执行。它可以防止执行某些类型的错误。

我看到 JSLint 和 JSHint 以不同的方式处理坏换行符。JSHint 对我喜欢的语法更加友好。

因此，对于正在从事此工作的其他人来说，这可能是一个解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:03:05.743

不幸的是，[严格模式](http://www.ecma-international.org/ecma-262/5.1/#sec-C)不会禁用[自动分号插入](http://www.ecma-international.org/ecma-262/5.1/#sec-7.9)的恐怖，因此“坏”换行符仍然是一个问题。例如：

```
(function() {
  "use strict";

  console.log(foo());

  function foo() {
    var a = 1, b = 2;

    return
    a + b;
  }
})(); 
```

[实例](http://jsbin.com/erukab/1)| [源码](http://jsbin.com/erukab/1/edit)（需要打开控制台查看）

那仍然记录`undefined`而不是`3`，因为 ASI 启动并在`return`in之后添加一个分号`foo`。

# mysql - Bash 脚本和行

> ID：14932525
> 
> 赞同：4
> 
> 时间：2013-02-18T08:57:22.193
> 
> 标签：mysql, arrays, bash

我的问题是行mysql_query。我需要：

```
Record 0: 2,text is text,3.23 
```

但是我有：

```
Record 0: 2
Record 1: text
Record 2: is
Record 3: text
Record 4: 3.23 
```

请帮我。

```
results=($(mysql --user root -proot test -Bse "select id,name from Object"));

cnt=${#results[@]}

for (( i=0 ; i<${cnt} ; i++ ))
do
    echo "Record No. $i: ${results[$i]}"

    fieldA=${results[0]};
    fieldB=${results[1]};

done 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:17:44.127

问题是您将输出存储`mysql`到数组中。现在，如果`mysql`返回多条记录，您将不知道一条记录何时结束，下一条记录何时开始，因为数组将包含“扁平化”数据，例如`( record1_fieldA record1_fieldB record2_fieldA record2_fieldB ... )`

相反，使用`while`循环来遍历记录，如下所示：

```
i=0
while read fieldA fieldB
do
    echo "Record $(( i++ )): fieldA: $fieldA fieldB: $fieldB"
done < <(mysql --user root -proot test -Bse "select id,name from Object") 
```

# android - Android ViewFlipper 更多控制

> ID：14932526
> 
> 赞同：0
> 
> 时间：2013-02-18T08:57:25.637
> 
> 标签：android, viewflipper

我有 1 个 viewflipper，它包含 3 个布局。布局 1 有 2 个按钮，一个用于显示文本，另一个用于另一个活动。第二种布局有 3 个按钮。我想知道如何控制第二个布局并在每个按钮上制作点击监听器，这样我就可以制作一个用于下一个显示，另一个用于另一个活动。

这是xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="44dp"
                android:src="@drawable/ballchr3" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignTop="@+id/imageView1"
                android:layout_toLeftOf="@+id/imageView3"
                android:src="@drawable/ballchr4" />

        </RelativeLayout>

 <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="73dp"
                android:layout_toRightOf="@+id/imageView3"
                android:src="@drawable/ballchr3" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignTop="@+id/imageView1"
                android:layout_toLeftOf="@+id/imageView3"
                android:src="@drawable/ballchr4" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:layout_marginBottom="128dp"
                android:src="@drawable/ballchr5" />

        </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/imageView2"
            android:layout_marginTop="76dp"
            android:src="@drawable/ballchr3" />

    </RelativeLayout>        

    </ViewFlipper>

</RelativeLayout> 
```

活动代码

```
public class MainActivity extends Activity implements OnClickListener {

    ViewFlipper viewflipper;
    ImageView btn, fail;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        viewflipper = (ViewFlipper)findViewById(R.id.viewFlipper1);
        btn = (ImageView)findViewById(R.id.imageView1);
        fail = (ImageView)findViewById(R.id.imageView2);

        btn.setOnClickListener(this);
        fail.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        switch(arg0.getId()){
        case R.id.imageView1:
            viewflipper.showNext();
            break;

        case R.id.imageView2:
            Intent i = new Intent(MainActivity.this, Fail.class);
            startActivity(i);
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:12:46.110

首先，不要在同一个xml文件中重复id，我可以看到你多次使用了imageView1、2和3。不要那样做。

要回答您的问题，请在您的活动中声明更多 imageViews 并将它们分配给您在上面已经完成的相应按钮，并设置它们的 onClickListeners，实现它们。因为它在同一个 xml 中，所以当视图退出时，它的引用也将存在。

# android - 在为 Android 构建 OpenCV 后包含目录丢失的文件

> ID：14932527
> 
> 赞同：1
> 
> 时间：2013-02-18T08:57:27.633
> 
> 标签：android, opencv, android-ndk

我尝试为 Android 构建 OpenCV，我成功了。我所做的是我 git 克隆了 Opencv 2.4.9 源文件，然后运行 ​​cmake_android.cmd。之后一切正常，但是当我尝试将库与 A​​ndroid 项目链接时，我注意到 opencv2 目录包含在 opencv for android 源代码的 include 目录中，不包含必要的模块目录，但只是一个opencv.hpp。有什么想法可以在 opencv 目录中找到包含目录吗？

# ruby-on-rails - ActiveRecord 不创建表

> ID：14932543
> 
> 赞同：2
> 
> 时间：2013-02-18T08:58:27.807
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, rails-migrations

我正在尝试在非 Rails 项目中使用 ActiveRecord 和 rails 迁移。我安装了[standalone_migrations](https://github.com/thuss/standalone-migrations) gem，它似乎可以工作。为了测试，我创建了两个迁移

```
rake db:new_migration name=users
rake db:new_migration name=logins 
```

这是我的迁移文件：

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table(:users) do |t|
      t.string    :full_name,   :null => false

      # Database authenticable
      t.string    :username,           :null => false, :default => '', :unique => true
      t.string    :encrypted_password, :null => false, :default => ''
    end
  end

  def self.down
    drop_table :users
  end
end

class CreateLogins < ActiveRecord::Migration
  def self.up
    create_table :logins do |t|
      t.integer   :user_id,       :null => false
      t.datetime  :logged_in_at,  :null => false
      t.datetime  :logged_out_at, :null => false
    end
  end

  def self.down
    drop_table :logins
  end
end 
```

然后我跑了`rake db:migrate`，它似乎工作：

```
==  CreateUsers: migrating ====================================================
-- create_table(:users)
   -> 0.0020s
==  CreateUsers: migrated (0.0020s) ===========================================

==  CreateLogins: migrating ===================================================
-- create_table(:logins)
   -> 0.0020s
==  CreateLogins: migrated (0.0020s) ========================================== 
```

我有一个`db/migrate`文件夹和一个`db/config.yml`配置，就像standalone_migrations gem 手册中一样。但是，当我创建用户模型时：

```
require '../../db/dbconnect'

p ActiveRecord::Base.connection.tables

class User < ActiveRecord::Base

end

User.new 
```

首先，我得到一个空列表，然后是一个异常

```
Could not find table 'users' (ActiveRecord::StatementInvalid) 
```

我该怎么做才能让它发挥作用？

**编辑1：**

我的`db/config.yml`：

```
development:
  adapter: sqlite3
  database: development.db
  encoding: utf8

production:
  adapter: sqlite3
  database: aquareader.db
  encoding: utf8

test: &test
  adapter: sqlite3
  database: test.db
  encoding: utf8 
```

我的`db/dbconnect.rb`：

```
require 'rubygems'
require 'active_record'
require 'yaml'

# read the connection information from the database config file
dbconfig = YAML::load(File.open(File.expand_path(File.dirname(__FILE__) + '/config.yml')))

# connect to the database
ActiveRecord::Base.establish_connection(dbconfig['development']) 
```

**编辑2：**

我发现我的`developement.db`表正在使用正确的表和所有内容在我的根文件夹中创建我的迁移。但是，当我运行`lib/myproject/users.rb`它时，它会在项目目录中创建一个`development.db`并且不使用`dbconnect.rb`文件中指定的那个。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:44:47.397

我的问题的解决方案是如此明显，以至于我很惭愧我在这里问了一个问题。我所要做的就是在我的`config.yml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:14:33.027

嗯..我怀疑命名可能有问题。Rails 使用“魔术”从 ActiveRecord 类派生表名。

您能否展示您的表在数据库中的实际命名方式： `describe tables`或数据存储的等价物？

# delphi - Delphi 7中Unicode的chr等价物

> ID：14932549
> 
> 赞同：2
> 
> 时间：2013-02-18T08:58:46.400
> 
> 标签：delphi, delphi-7

我需要在 Delphi 7 中初始化 Widestring，但我不能使用`chr`ANSI 函数

```
var
  ws : Widestring;
begin

 ws := chr($FFFF) + chr($FFFF) + chr($FFFF);

end; 
```

那我能用什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T09:07:59.683

我不确定是否有一种简单的方法可以做你想做的事。您可以使用简单的转换将 a 转换`Word`为 a `WideChar`：

```
WideChar($FFFF) 
```

但你不能连接`WideChar`。所以这是一个编译器错误：

```
WideChar($FFFF) + WideChar($FFFF) 
```

您可以使用辅助函数来完成工作：

```
function InitialiseWideString(const chars: array of Word): WideString;
var
  i: Integer;
begin
  SetLength(Result, Length(chars));
  for i := 0 to high(chars) do
    Result[i+1] := WideChar(chars[i]);
end; 
```

然后你可以这样称呼它：

```
ws := InitialiseWideString([$0054, $0069, $006D, $0065, $0020, $0074, $006F, 
  $0020, $0075, $0070, $0067, $0072, $0061, $0064, $0065]); 
```

# iis - 排查 MS Web 部署 ACL 权限错误

> ID：14932552
> 
> 赞同：11
> 
> 时间：2013-02-18T08:58:52.927
> 
> 标签：iis, webdeploy, visual-web-developer-2010

我一直在尝试将我的网站部署在运行 windows server 2012/IIS8 的新 VPS 上。Visual Studio 可以连接并创建目录结构然后失败。查看服务器日志，我收到以下链接中描述的错误 - 滚动到底部。

[http://www.iis.net/learn/publish/troubleshooting-web-deploy/troubleshooting-common-problems-with-web-deploy](http://www.iis.net/learn/publish/troubleshooting-web-deploy/troubleshooting-common-problems-with-web-deploy)

```
5/12/2011 11:31:41 AM) An error occurred when the request was processed on the remote computer.
The server experienced an issue processing the request. Contact the server administrator for more information.
This particular error does not give you much to go on, but the picture becomes much clearer if you look at the Web Deploy error log in Event Viewer.
User: DEPLOYSERVER\User1
Client IP: 192.168.0.203 
Content-Type: application/msdeploy
Version: 8.0.0.0
MSDeploy.VersionMin: 7.1.600.0
MSDeploy.VersionMax: 7.1.1070.1
MSDeploy.Method: Sync
MSDeploy.RequestId: 63b2f3d1-1817-444f-8280-9fa4f6f85d53
MSDeploy.RequestCulture: en-US
MSDeploy.RequestUICulture: en-US
Skip: objectName="^configProtectedData$"
Provider: auto, Path:
Tracing deployment agent exception. Request ID '63b2f3d1-1817-444f-8280-9fa4f6f85d53'. Request Timestamp: '5/12/2011 9:31:41 AM'. Error Details:
System.UnauthorizedAccessException: Attempted to perform an unauthorized operation.
at System.Security.AccessControl.Win32.SetSecurityInfo(ResourceType type, String name, SafeHandle handle, SecurityInfos securityInformation, SecurityIdentifier owner, SecurityIdentifier group, GenericAcl sacl, GenericAcl dacl)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, SafeHandle handle, AccessControlSections includeSections, Object exceptionContext)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, AccessControlSections includeSections, Object exceptionContext)
at Microsoft.Web.Deployment.FileSystemSecurityEx.Persist(String path)
at Microsoft.Web.Deployment.SetAclProvider.Add(DeploymentObject source, Boolean whatIf)
at Microsoft.Web.Deployment.DeploymentObject.Update(DeploymentObject source, DeploymentSyncContext syncContext)
at Microsoft.Web.Deployment.DeploymentSyncContext.HandleUpdate(DeploymentObject destObject, DeploymentObject sourceObject)
at Microsoft.Web.Deployment.DeploymentSyncContext.SyncChildrenOrder(DeploymentObject dest, DeploymentObject source)
at Microsoft.Web.Deployment.DeploymentSyncContext.ProcessSync(DeploymentObject destinationObject, DeploymentObject sourceObject) 
```

为了解决这个问题，他们提出以下建议：

```
From this, we can see that User1 does not have rights to set security information. In this case, the user does not have Modify permissions on the content. Granting "Change Permissions" to the content resolves the problem. 
```

'授予“更改权限”'是什么意思？我认为他们的意思是文件权限，因此已授予网站目录结构的读/写/修改文件权限，但我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-13T00:49:05.833

要使用 Web 部署，部署服务需要对您的根 Web 应用程序文件夹具有访问权限。所以我所做的就是将我的网站根文件夹的完全访问权限授予用户组“Authenticated Users”。它对我有用。

# php - 正则表达式，抓取链接

> ID：14932556
> 
> 赞同：-3
> 
> 时间：2013-02-18T08:59:07.357
> 
> 标签：php, expression

我有 html 文档和链接，比如`http://example.com/some?b=20130218082149&a=20130218092249&info=1152&hash=079caaaae2fcd602c6d8dx`

我需要一个正则表达式来找到它，如果你能向我解释这个表达式，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:04:40.823

**我的刺**

```
<?php

$pattern = "#^https?://([a-z0-9-]+\.)*blah\.com(/.*)?$#";

$tests = array(
    'http://blah.com/so/this/is/good'
  , 'http://blah.com/so/this/is/good/index.html'
  , 'http://www.blah.com/so/this/is/good/mice.html#anchortag'
  , 'http://anysubdomain.blah.com/so/this/is/good/wow.php'
  , 'http://anysubdomain.blah.com/so/this/is/good/wow.php?search=doozy'
  , 'http://any.sub-domain.blah.com/so/this/is/good/wow.php?search=doozy' // I added this case
  , 'http://999.sub-domain.blah.com/so/this/is/good/wow.php?search=doozy' // I added this case
  , 'http://obviousexample.com'
  , 'http://bbc.co.uk/blah.com/whatever/you/get/the/idea'
  , 'http://blah.com.example'
  , 'not/even/a/blah.com/url'
);

foreach ( $tests as $test )
{
  if ( preg_match( $pattern, $test ) )
  {
    echo $test, " <strong>matched!</strong><br>";
  } else {
    echo $test, " <strong>did not match.</strong><br>";
  }
}

//  Here's another way
echo '<hr>';
foreach ( $tests as $test )
{
  if ( $filtered = filter_var( $test, FILTER_VALIDATE_URL ) )
  {
    $host = parse_url( $filtered, PHP_URL_HOST );
    if ( $host && preg_match( "/blah\.com$/", $host ) )
    {
      echo $filtered, " <strong>matched!</strong><br>";
    } else {
      echo $filtered, " <strong>did not match.</strong><br>";
    }
  } else {
    echo $test, " <strong>did not match.</strong><br>";
  }
} 
```

# c# - 部署 C# 应用程序

> ID：14932563
> 
> 赞同：0
> 
> 时间：2013-02-18T08:59:47.323
> 
> 标签：c#

首先，对不起，如果我的问题看起来很愚蠢，但我真的需要帮助。我刚刚发布了我的 C# 应用程序。我在发布文件夹中有exe。在我的应用程序中，我使用了 WMPLib 等参考资料在集成的多媒体播放器中播放视频。当应用程序位于发布文件夹中时，它可以正常工作，但是当我仅在桌面上复制 exe 时，我收到一个错误，即找不到 lib 引用。所以我的问题是如何让我的 exe 找到这些库，无论它们在计算机上的什么位置？先感谢您。

![在此处输入图像描述](../Images/6583319210da40af1d96b6f9bd2998bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:06:58.970

首先浏览这些链接：

[http://msdn.microsoft.com/en-us/library/ms173084(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173084(v=vs.80).aspx)

[如何安装/部署/构建我的 Visual C# 应用程序以供所有用户使用？](https://stackoverflow.com/questions/425207/how-do-i-install-deploy-build-my-visual-c-sharp-application-so-its-available-to)

# c# - 将样式应用到文档

> ID：14932564
> 
> 赞同：0
> 
> 时间：2013-02-18T08:59:50.720
> 
> 标签：c#, openxml, openxml-sdk

如何将样式应用于“CSS”之类的文档，但使用 OpenXML 以编程方式？我不想将样式应用于单个元素，而是设置默认值并让文档部分服从它们。

我找到了 HTMLToOpenXML，但我更喜欢自己做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:07:55.860

解决了，只需使用 OpenXML Productivity Tool，找到您要查找的部件的名称。或者，只需打开文档并确定您要更改的内容，例如标题或 A 部分或正常。

这是带有示例更改的代码：

```
public static void GetAndSetStyleFromDoc(string file)
{
            bool styleExists = true;

            using (var document = WordprocessingDocument.Open(file,true))
            {

                // Get the Styles part for this document
                StyleDefinitionsPart part = document.MainDocumentPart.StyleDefinitionsPart;

                foreach (Style style in part.RootElement.Elements<Style>())
                {
                    // PartA can be changed for "Normal", "Header1" etc
                    if (style.StyleId.Value.Equals("PartA", StringComparison.InvariantCultureIgnoreCase))
                    {
                        style.StyleParagraphProperties.SpacingBetweenLines.Line = "276";
                        style.StyleRunProperties.FontSize.Val = "14";
                        style.StyleRunProperties.Color.Val = "4F81BD"; // font color

                        ParagraphBorders paragraphBorders1 = new ParagraphBorders();
                        TopBorder topBorder1 = new TopBorder(){ Val = BorderValues.Single, Color = "856363", Size = (UInt32Value)24U, Space = (UInt32Value)0U };
                        LeftBorder leftBorder1 = new LeftBorder(){ Val = BorderValues.Single, Color = "856363", Size = (UInt32Value)24U, Space = (UInt32Value)0U };
                        BottomBorder bottomBorder1 = new BottomBorder(){ Val = BorderValues.Single, Color = "856363", Size = (UInt32Value)24U, Space = (UInt32Value)0U };
                        RightBorder rightBorder1 = new RightBorder(){ Val = BorderValues.Single, Color = "856363", Size = (UInt32Value)24U, Space = (UInt32Value)0U };

                        paragraphBorders1.Append(topBorder1);
                        paragraphBorders1.Append(leftBorder1);
                        paragraphBorders1.Append(bottomBorder1);
                        paragraphBorders1.Append(rightBorder1);

                        style.StyleParagraphProperties.ParagraphBorders = paragraphBorders1;
                    }
                }

            }
} 
```

# android - 布局膨胀究竟发生在哪里？

> ID：14932565
> 
> 赞同：3
> 
> 时间：2013-02-18T08:59:50.943
> 
> 标签：android, android-layout, layout-inflater

嗨，这些问题似乎非常基本，但我还没有找到任何答案。

然后，当我们`setContentView(R.layout.somelayout)`的布局 XML 文件被`LayoutInflater`服务膨胀时。但我想知道它到底发生在哪里。我在活动源代码中没有找到任何会膨胀 xml 文件的代码。

以及为 R 中的视图生成的 id 到底在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:14:52.690

较少的文档和编写的基本过程和调用的调用`setContentView()`和其他方法。

实际上，当您调用`setContentView(R.layout.<layout_file_name>);`. **Android 简而言之**，它将从其 id 膨胀给定的布局文件并为您当前的 Activity 准备 View 并放入顶层。

**`What happen when you call setContentView(R.layout.<layout_name>) ?`**

Android 系统接收此引用并使用它来使树无效、测量和绘制树。层次结构的根节点请求其子节点自己绘制——反过来，每个视图组节点负责调用其自己的每个子视图来绘制自己。子对象可能会请求父对象中的大小和位置，但父对象对每个子对象的大小有最终决定权。Android 按顺序（从层次结构树的顶部）解析布局的元素，实例化视图并将它们添加到它们的父级。因为这些是按顺序绘制的，所以如果有重叠位置的元素，最后一个要绘制的元素将位于之前绘制到该空间的其他元素之上。

**更新：**

好的，看了之后发现，

当你调用Activity基类的[setContentView()时，它调用了Window类的](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Activity.java#Activity.setContentView%28int%29)[setContentView()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/view/Window.java#Window.setContentView%28android.view.View%2Candroid.view.ViewGroup.LayoutParams%29)的Abstract方法，它是Abstract方法，并且这个方法的唯一重写是在[PhoneWindow](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/com/android/internal/policy/impl/PhoneWindow.java)类中。看起来像，

```
 @Override
    public void setContentView(int layoutResID) {
        if (mContentParent == null) {
            installDecor();
        } else {
            mContentParent.removeAllViews();
        }
        mLayoutInflater.inflate(layoutResID, mContentParent);
        final Callback cb = getCallback();
        if (cb != null) {
            cb.onContentChanged();
        }
    } 
```

所以视图膨胀发生在这个类中。

**更新：2关于R.java文件生成..**

`Aapt(Android Asset Packaging Tool)`– 此工具编译所有 XML 布局文件和`AndroidManifest.xml`文件。除了已编译的版本，这还会生成一个`R.java`包含已编译资源的所有引用的文件。

存储在 res 子目录中的资源包括图标、布局和字符串等内容。这些使用 aapt 工具编译成一个名为 的文件`R.java`，存储在`gen/`子目录中。

**来自 aapt 帮助**

```
aapt p[ackage] [-d][-f][-m][-u][-v][-x][-z][-M AndroidManifest.xml] \
        [-0 extension [-0 extension ...]] [-g tolerance] [-j jarfile] \
        [--min-sdk-version VAL] [--target-sdk-version VAL] \
        [--max-sdk-version VAL] [--app-version VAL] \
        [--app-version-name TEXT] [--custom-package VAL] \
        [-I base-package [-I base-package ...]] \
        [-A asset-source-dir]  [-G class-list-file] [-P public-definitions-file] \
        [-S resource-sources [-S resource-sources ...]]         [-F apk-file] [-J R-file-dir] \
        [raw-files-dir [raw-files-dir] ...]

   Package the android resources.  It will read assets and resources that are
   supplied with the -M -A -S or raw-files-dir arguments.  The -J -P -F and -R
   options control which files are output. 
```

**aapt 命令：（**对于 HelloWorld Android 应用程序）

```
aapt \package -v -f -m -M AndroidManifest.xml -S .\bin\res -S .\res \
   -I C:\local\android-sdk-windows\platforms\android-15\android.jar \
   -J .\gen --generate-dependencies 
```

结果看起来像，

```
Configurations:
 (default)
 hdpi
 ldpi
 mdpi

Files:
  drawable\ic_launcher.png
    Src: (hdpi) .\res\drawable-hdpi\ic_launcher.png
    Src: (ldpi) .\res\drawable-ldpi\ic_launcher.png
    Src: (mdpi) .\res\drawable-mdpi\ic_launcher.png
  layout\main.xml
    Src: () .\res\layout\main.xml
  values\strings.xml
    Src: () .\res\values\strings.xml
  AndroidManifest.xml
    Src: () AndroidManifest.xml

Resource Dirs:
  Type drawable
    drawable\ic_launcher.png
      Src: (hdpi) .\res\drawable-hdpi\ic_launcher.png
      Src: (ldpi) .\res\drawable-ldpi\ic_launcher.png
      Src: (mdpi) .\res\drawable-mdpi\ic_launcher.png
  Type layout
    layout\main.xml
      Src: () .\res\layout\main.xml
  Type values
    values\strings.xml
      Src: () .\res\values\strings.xml
Including resources from package: \
C:\local\android-sdk-windows\platforms\android-15\android.jar
applyFileOverlay for drawable
trying overlaySet Key=ic_launcher.png
baseFile 0 has flavor ,,,,,,,,,,,hdpi,,,,,,,
baseFile 1 has flavor ,,,,,,,,,,,ldpi,,,,,,,
baseFile 2 has flavor ,,,,,,,,,,,mdpi,,,,,,,
overlayFile 0 has flavor ,,,,,,,,,,,hdpi,,,,,,,
overlayFile 1 has flavor ,,,,,,,,,,,ldpi,,,,,,,
overlayFile 2 has flavor ,,,,,,,,,,,mdpi,,,,,,,
found a match (0) for overlay file ic_launcher.png, \
for flavor ,,,,,,,,,,,hdpi,,,,,,,
found a match (1) for overlay file ic_launcher.png, \
for flavor ,,,,,,,,,,,ldpi,,,,,,,
found a match (2) for overlay file ic_launcher.png, \
for flavor ,,,,,,,,,,,mdpi,,,,,,,
applyFileOverlay for layout
applyFileOverlay for anim
applyFileOverlay for animator
applyFileOverlay for interpolator
applyFileOverlay for xml
applyFileOverlay for raw
applyFileOverlay for color
applyFileOverlay for menu
applyFileOverlay for mipmap
    (new resource id ic_launcher from \
    .\bin\res\drawable-hdpi\ic_launcher.png)
    (new resource id ic_launcher from \
    .\bin\res\drawable-ldpi\ic_launcher.png)
    (new resource id ic_launcher from \
    .\bin\res\drawable-mdpi\ic_launcher.png)
    (new resource id main from .\res\layout\main.xml)
  Writing symbols for class R. 
```

# java - 带有浮点数的 Java msgpack 类崩溃

> ID：14932566
> 
> 赞同：1
> 
> 时间：2013-02-18T08:59:51.793
> 
> 标签：java, floating-point, runtime-error, msgpack, messagepack

我有一个非常简单的 java 类，它代表一个 2d 向量。然而，当我运行代码将其序列化为消息包时，它会产生运行时错误。序列化这个类应该是真正的基本行为，应该可以工作，对吧？我发现没有其他人有类似的问题。

代码和异常如下。我在 Eclipse 中的 Windows 7 上使用 java 1.7 SDK，我尝试了来自 maven 的消息包 1.6.6 和 1.6.7。

```
import org.jbox2d.common.Vec2;
import org.msgpack.annotation.Message;

@Message
public class SerVec2
{
        public float x,y;

        public SerVec2(Vec2 v)
        {
                this.x = v.x;
                this.y = v.y;
        }

        public Vec2 toV()
        {
                return new Vec2(x,y);
        }

}

void someWhereElse(SerVec2 sv)
{
    MessagePack msgpack = new MessagePack();
    byte[] bytes = msgpack.write(sv);
} 
```

运行时错误：

```
Feb 18, 2013 8:48:49 AM org.msgpack.template.builder.BuildContext build
SEVERE: builder:
{
  if (!$3 && $1.trySkipNil()) {
    return null;
  }
  skylights.util.SerVec2 _$$_t;
  if ($2 == null) {
    _$$_t = new skylights.util.SerVec2();
  } else {
    _$$_t = (skylights.util.SerVec2) $2;
  }
  $1.readArrayBegin();
    _$$_t.x = $1.readFloat();
    _$$_t.y = $1.readFloat();
  $1.readArrayEnd();
  return _$$_t;
}

org.msgpack.MessageTypeException: org.msgpack.template.builder.TemplateBuildException: Cannot compile:
{
  if (!$3 && $1.trySkipNil()) {
    return null;
  }
  skylights.util.SerVec2 _$$_t;
  if ($2 == null) {
    _$$_t = new skylights.util.SerVec2();
  } else {
    _$$_t = (skylights.util.SerVec2) $2;
  }
  $1.readArrayBegin();
    _$$_t.x = $1.readFloat();
    _$$_t.y = $1.readFloat();
  $1.readArrayEnd();
  return _$$_t;
}

        at org.msgpack.template.TemplateRegistry.buildAndRegister(TemplateRegistry.java:516)
        at org.msgpack.template.TemplateRegistry.lookupAfterBuilding(TemplateRegistry.java:413)
        at org.msgpack.template.TemplateRegistry.lookup(TemplateRegistry.java:246)
        at org.msgpack.template.builder.JavassistTemplateBuilder.toTemplate(JavassistTemplateBuilder.java:128)
        at org.msgpack.template.builder.JavassistTemplateBuilder.buildTemplate(JavassistTemplateBuilder.java:116)
        at org.msgpack.template.builder.AbstractTemplateBuilder.buildTemplate(AbstractTemplateBuilder.java:61)
        at org.msgpack.template.TemplateRegistry.buildAndRegister(TemplateRegistry.java:503)
        at org.msgpack.template.TemplateRegistry.lookupAfterBuilding(TemplateRegistry.java:413)
        at org.msgpack.template.TemplateRegistry.lookup(TemplateRegistry.java:246)
        at org.msgpack.MessagePack.write(MessagePack.java:195)
        at skylights.core.Entity.saveToBytes(Entity.java:260)
        at skylights.level.Level.saveToFile(Level.java:106)
        at skylights.core.gui.KeyHandler.keyPressed(KeyHandler.java:29)
        at skylights.core.Game.keyPressed(Game.java:219)
        at org.newdawn.slick.Input.poll(Input.java:1182)
        at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:656)
        at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:456)
        at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:361)
        at skylights.core.Game.run(Game.java:264)
        at skylights.core.Game.main(Game.java:287)
Caused by: org.msgpack.template.builder.TemplateBuildException: Cannot compile:
{
  if (!$3 && $1.trySkipNil()) {
    return null;
  }
  skylights.util.SerVec2 _$$_t;
  if ($2 == null) {
    _$$_t = new skylights.util.SerVec2();
  } else {
    _$$_t = (skylights.util.SerVec2) $2;
  }
  $1.readArrayBegin();
    _$$_t.x = $1.readFloat();
    _$$_t.y = $1.readFloat();
  $1.readArrayEnd();
  return _$$_t;
}

        at org.msgpack.template.builder.BuildContext.build(BuildContext.java:73)
        at org.msgpack.template.builder.DefaultBuildContext.buildTemplate(DefaultBuildContext.java:56)
        at org.msgpack.template.builder.JavassistTemplateBuilder.buildTemplate(JavassistTemplateBuilder.java:118)
        at org.msgpack.template.builder.AbstractTemplateBuilder.buildTemplate(AbstractTemplateBuilder.java:61)
        at org.msgpack.template.TemplateRegistry.buildAndRegister(TemplateRegistry.java:503)
        ... 19 more
Caused by: javassist.CannotCompileException: [source error] no such constructor
        at javassist.CtBehavior.setBody(CtBehavior.java:417)
        at javassist.CtBehavior.setBody(CtBehavior.java:383)
        at javassist.CtNewMethod.make(CtNewMethod.java:138)
        at org.msgpack.template.builder.BuildContext.buildReadMethod(BuildContext.java:144)
        at org.msgpack.template.builder.BuildContext.build(BuildContext.java:65)
        ... 23 more
Caused by: compile error: no such constructor
        at javassist.compiler.MemberCodeGen.atMethodCallCore2(MemberCodeGen.java:593)
        at javassist.compiler.MemberCodeGen.atMethodCallCore(MemberCodeGen.java:575)
        at javassist.compiler.MemberCodeGen.atNewExpr(MemberCodeGen.java:302)
        at javassist.compiler.ast.NewExpr.accept(NewExpr.java:73)
        at javassist.compiler.CodeGen.atAssignCore(CodeGen.java:860)
        at javassist.compiler.CodeGen.atVariableAssign(CodeGen.java:793)
        at javassist.compiler.CodeGen.atAssignExpr(CodeGen.java:747)
        at javassist.compiler.CodeGen.atStmnt(CodeGen.java:332)
        at javassist.compiler.ast.Stmnt.accept(Stmnt.java:50)
        at javassist.compiler.CodeGen.atStmnt(CodeGen.java:351)
        at javassist.compiler.ast.Stmnt.accept(Stmnt.java:50)
        at javassist.compiler.CodeGen.atIfStmnt(CodeGen.java:391)
        at javassist.compiler.CodeGen.atStmnt(CodeGen.java:355)
        at javassist.compiler.ast.Stmnt.accept(Stmnt.java:50)
        at javassist.compiler.CodeGen.atStmnt(CodeGen.java:351)
        at javassist.compiler.ast.Stmnt.accept(Stmnt.java:50)
        at javassist.compiler.CodeGen.atMethodBody(CodeGen.java:292)
        at javassist.compiler.Javac.compileBody(Javac.java:223)
        at javassist.CtBehavior.setBody(CtBehavior.java:409)
        ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:05:33.247

回答我自己的问题： SerVec 缺少默认构造函数。为了能够序列化，MessagePack 需要默认构造函数可用。

# coq - Coq Qed 战术被挂了

> ID：14932567
> 
> 赞同：-1
> 
> 时间：2013-02-18T08:59:53.073
> 
> 标签：coq

我证明了一个引理（证明完成），但是当我使用 Qed 保存它时，系统变得很忙。在同一个文件中，还有其他类似的引理，其中 Qed 执行正常，除了这个。任何机构都可以教我它的解决方案吗？

谢谢，

维拉亚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:42:46.953

如果不知道您正在处理哪个特定示例，就很难说。每当您输入`Qed`Coq 时，内核都会分析您的策略产生的证明，并确保它确实有效；战术引擎本身实际上并没有执行很多检查。因此，即使您的有问题的证明与其他证明略有不同，也可能导致它产生了一个非常大的证明项，这使得内核需要很长时间。

# php - Ghostscript pdf to jpg windows/linux 颜色差异

> ID：14932568
> 
> 赞同：2
> 
> 时间：2013-02-18T08:59:54.260
> 
> 标签：php, linux, pdf, ghostscript

我正在使用 ghostscript 编写一个函数，将多页 PDF 转换为每页一个 JPG。

在带有 ghostcript 9.05 和 WAMP 服务器的 Windows 上一切正常。

问题是我在 WAMP 和我的 linux 服务器（1&1 Hosting）之间存在差异：

该命令正在运行：我可以将 pdf 转换为 jpg，但问题：颜色完全过饱和。

我尝试了选项 -dUseCIEColor ：颜色现在很好，除了现在是灰色/较浅的深色背景。

为什么会有这些差异？我在 windows 和 linux 上使用了相同的版本。

我听说过 ICC 颜色配置文件，但我不知道它是否是好方法，因为我使用默认值。

如果有人有信息...谢谢

或者，如果您知道将 PDF 转换为 JPG 的替代 ghostscript 的好方法...

这是我正在使用的命令：

`$ghostscriptCommand="gs -dUseCIEColor -dSAFER -dBATCH -dNOPAUSE -dPDFSETTINGS=/screen -sDEVICE=jpeg -dJPEGQ=60 -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r144 -sOutputFile=$dir/p%03d.jpg $pdfFile"; exec($ghostscriptCommand);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:26:03.290

在 Ghostscript IRC 频道上讨论过这个问题后，问题是 Linux 服务器运行的是 Ghostscript 8.71，而不是 9.05 - 9.xx 版本引入了基于 ICC 配置文件的全新颜色工作流程。

唯一现实的解决方案是将 Linux 服务器更新到 9.05。

# asp.net-mvc-4 - asp.net mvc 4 如何将点击事件绑定到视图模型方法

> ID：14932573
> 
> 赞同：0
> 
> 时间：2013-02-18T09:00:09.800
> 
> 标签：asp.net-mvc-4, viewmodel

我想将复选框的单击事件绑定到我的视图模型的方法。如果选中该复选框，则应显示视图的其他复选框。

这样做的最佳方法是什么？

# java - 一种避免 JSP 和 HTML 标记语法模糊（<、/ 和 > 字符）的方法？

> ID：14932574
> 
> 赞同：2
> 
> 时间：2013-02-18T09:00:13.673
> 
> 标签：java, jsp, coding-style, template-engine

我读了[http://www.smarty.net/syntax_comparison](http://www.smarty.net/syntax_comparison)和要点，而不是`<`, `/`,`>`符号使用`{`and `}`。Python Django 模板语法引擎中的情况相同。

但是当谈到 Java JSP 时，你会得到这样难以阅读的代码：

```
<div <c:if test="${bean != null}">style="text-align:center"</c:if>>${bean.title}</div>

```

或者：

```
<a href="<c:url value="/show/${group.id}.htm"/>">${group.name}</a>

```

这个序列：`"</c:if>>$`, `"/>">${`,`="<c:url value="/`上面的代码对我来说看起来*很*神秘。

有一堆问题：

*   `"`在 HTML 中使用 JSP `"`。
*   使用 JSP `<>`，`</>`在 HTML 中`<>`，`</>`.

EL 简化了 JSP 的查找，但不那么匹配。此外，重新格式化代码使其更具可读性。但是*为什么*JSP 语法*这么笨*？是否有可能以某种方式使用 HTML/XML 语法解决 JSP 语法模糊问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:02:48.693

这只是 JSP 的语法，没有必要被它惹恼。显然，您应该更好地格式化您的代码，以使其尽可能易于阅读。

如果您不喜欢它，您可以尝试使用 Freemarker 或 Velocity 作为替代模板语言：

[http://freemarker.sourceforge.net/](http://freemarker.sourceforge.net/)

[http://velocity.apache.org/](http://velocity.apache.org/)

我个人觉得 freemarker 最容易阅读。

artbristol 建议的另一种选择是百里香：

[http://www.thymeleaf.org/](http://www.thymeleaf.org/)

# concurrency - 为什么实时操作系统不是主流

> ID：14932575
> 
> 赞同：2
> 
> 时间：2013-02-18T09:00:16.087
> 
> 标签：concurrency, operating-system

有趣的是，RTOS 对于并发系统来说应该是一件好事，**那么为什么 RTOS 不主导操作系统市场呢？**

我对它们一无所知，并且很好奇为什么作为一个行业，在 RTOS 方面我们不是更多的“在循环中”。

ps，如果我想开始玩，你能推荐一个好的、现代的操作系统来开始做基准测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:10:29.037

使用 RTOS 实际上相当复杂。为了能够保证实时行为，需要提前研究您想要使用的进程和线程，以及分配哪些优先级。出于这个原因，使用非 RT 操作系统通常更简单，尤其是在应用程序数量和应用程序类型未知的情况下。

此外，在提前进行研究时，并不是为线程分配一些优先级那么简单，因为可能会出现高级问题，例如[http://en.wikipedia.org/wiki/Resource_starvation](http://en.wikipedia.org/wiki/Resource_starvation) 和[http://en.wikipedia.org/维基/Priority_inversion](http://en.wikipedia.org/wiki/Priority_inversion)。

然而，在某些情况下，当您希望能够保证 RT 行为时，RTOS 可能非常有用。一些不错的免费 RTOS 是用于嵌入式设备的 FreeRTOS 和用于桌面 PC 的 QNX

# android - 如何在 gridView 中创建操作栏选项卡导航？

> ID：14932576
> 
> 赞同：0
> 
> 时间：2013-02-18T09:00:19.867
> 
> 标签：android, list, android-actionbar

如果我使用简单的操作栏选项卡导航添加选项卡，当我添加超过 10 个选项卡时，它会在列表中显示选项卡。

如何设置，如果action bar有超过2个标签，它会在列表中显示标签；以及如何将 listView 更改为 gridView，在项目上设置一些图像？

GridView item1 是tab1，item2 是tab2，item3 是tab3 等等，在里面可以点击item2 打开tab2，点击item3 打开tab3。并且可以添加和删除选项卡，就像在操作栏选项卡导航中一样。

就像在 Opera 迷你浏览器中一样。

# excel - Excel：如何在 col B 中查找文本并在 col C 中使用数据验证列表 - 自动

> ID：14932577
> 
> 赞同：0
> 
> 时间：2013-02-18T09:00:23.133
> 
> 标签：excel, validation

我在 C 列中有一个带有数据验证的列表（汽车、食品、动物）。在 B 列中，有数百行，带有一些文本。但是我知道例如（BMW，VOLVO，OPEL，KIA）通常用col B写成。我想标记为CAR。我不想让我手动做，所以我怎么能用规则自动做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:42:46.817

您需要创建一个包含所有您知道的单词的支持表。然后您可以使用 VLOOKUP 公式查找此表。在以下示例中，我将此表放在 E&F 列中：

![在此处输入图像描述](../Images/a528368efac2e2f3e590c6f53bef26a8.png)

我在 C2 中使用了以下公式：

```
=IFERROR(VLOOKUP(B2,E:F,2,0),"未知类别")

```

# alfresco - 可以强制 Alfresco Share Extension 模块的加载/评估顺序吗？

> ID：14932578
> 
> 赞同：4
> 
> 时间：2013-02-18T09:00:23.620
> 
> 标签：alfresco, alfresco-share

有没有办法强制 alfresco 共享扩展模块的加载/评估顺序？

我们目前在**module-general.jar中定义了****两个扩展模块，在****project-specific.jar**中定义了另一个模块 module-general.jar 中的模块自定义了应用于所有站点的功能，例如只允许创建私人站点等。

 ******project-specific.jar 中的模块依赖于在其他通用模块之后被加载/评估才能正常工作。**

当模块被添加到“已部署的模块”组并按下“应用更改”按钮时，一切都会按预期工作。

模块顺序如下：

```
GEN (00) Hide Create Site
GEN (01) Manage Permissions
PRO_ID Manage Permissions 
```

重新启动 Alfresco/tomcat 后`http://localhost:8080/share/page/modules/deploy`，活动模块顺序上的 http GET 不同，并且“管理权限”功能不再按项目请求的预期工作。

服务器重启后的模块顺序如下：

```
PRO_ID Manage Permissions
GEN (00) Hide Create Site
GEN (01) Manage Permissions 
```

我们如何确保“通用”自定义模块在项目特定模块之前加载/评估，因为它们在服务器重新启动之前被激活？

问候

## 安德烈亚斯

露天 4.0.2.9/Tomcat/Win7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-04T12:40:48.947

在共享模块 xml 文件中使用标签 **auto-deploy-index**数字越低优先级越高

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:06:35.753

目前无法在共享可扩展性模块中声明依赖关系，就像使用 AMP 一样。

因此，无法保证模块首次添加到 Share 时的加载顺序。

模块可以由管理员在模块部署控制台中重新排序，这是我用来确保在它们所依赖的模块之后加载依赖模块的方法（有关此示例，请参阅我上周的[Tech Talk Live](http://wiki.alfresco.com/wiki/Live) ） .

`auto-deploy`不幸的是，对于标志设置为 的模块，这种顺序不会持续存在`true`。这是因为自动部署无法将状态持久化到存储库（因为没有活动的用户会话）。每次重新启动服务器时都会重新部署自动部署的模块，这就是它们最终重新出现在列表末尾的原因。

解决方案是避免对加载顺序很重要的任何模块使用自动部署。我发现在我的模块描述符中进行必要的代码更改后，我必须删除所有模块并应用更改，然后以正确的顺序重新添加它们并再次单击应用更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:55:28.093

您应该在`module.properties`文件中指定依赖项，如[wiki](https://wiki.alfresco.com/wiki/Developing_an_Alfresco_Module#Module_Properties)中所述。因为`GEN (00) Hide Create Site`你不必做任何事情。因为`GEN (01) Manage Permissions`你需要这样的东西：

```
module.depends.com.tullo.alfresco.module.gen00=1.0-* 
```

和`PRO_ID Manage Permissions`：

```
module.depends.com.tullo.alfresco.cmodule.gen01=1.0-* 
```

将上述内容调整为您开发的模块的真实 ID 和版本。****

# java - 在逻辑问题上需要帮助

> ID：14932583
> 
> 赞同：-3
> 
> 时间：2013-02-18T09:00:36.760
> 
> 标签：java, for-loop, logic, if-statement

我不确定如何使最终的“ **else if** ”语句正常工作。

有问题的代码目前已被散列并位于程序的最底部。阅读上面的其他“ **else if** ”语句可能会让您更好地了解我的思维过程。

**即**，我不确定如何使最终的“ **else if** ”起作用，因为它没有定义的最大值。

```
 else if((gross_income >= 80001) && (gross_income <= 180000))
                {
                        gross_income = gross_income - 80000;
                        tax_payable = tax_payable + 17547;

                        for(i = 1; i <= gross_income; i++)
                        {
                                tax_payable = tax_payable + 0.37;
                        }

                        System.out.print("\n\n");
                        System.out.print("YOU MUST PAY $" + df.format(tax_payable) + " IN TAX!");
                        System.out.print("\n\n");
                }
//              else if(gross_income >= 180001)
//              {
//                      gross_income = gross_income - 180000;
//                      tax_payable = tax_payable + 54547;
//
//                      for(?????)
//                      {
//                              tax_payable = tax_payable + 0.45;
//                      }
//
//                      System.out.print("\n\n");
//                      System.out.print("YOU MUST PAY $" + df.format(tax_payable) + " IN TAX!");
//                      System.out.print("\n\n");
//              }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:12:57.677

哦，亲爱的，因为我非常喜欢你的税收计算：

这样做 - 总是尽量防止重复代码（例如计算只完成一次，唯一改变的是税收百分比）：

```
double perc = 0.0;

if( gross_income < 80001 ) 
{
    perc = 0.16; // dont know american tax limits, so lets pretend 0.16
}
else if( gross_income >= 80001 && gross_income < 180001 )
{
    perc = 0.37;
}
else
{
    perc = 0.45;
}
tax_payable = gross_income * perc;

System.out.print("\n\n");... and so on 
```

# asp.net-mvc - 如何验证（限制）创建日期每个月（任何间隔）最多可以保存 3 个对象？

> ID：14932587
> 
> 赞同：0
> 
> 时间：2013-02-18T09:00:42.267
> 
> 标签：asp.net-mvc, linq

在我的应用程序中，用户可以放置产品他的个人资料。我想限制这一点。型号为：

```
public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime CreateDate { get; set; }

        public int UserId { get; set; }
    } 
```

当我保存产品时，我需要 `AllowedProductSave(userId)` 检查是否允许的方法：

```
if (AllowedProductSave(userId))
{
  SaveProduct(productModel, userId);
} 
```

假设我有所有方法`GetProductsByUserId(), GetUsersFirstProduct(), GetUsersLastProduct()`和其他查询方法。**我只需要限制逻辑**，授予用户权限，他只能创建 3 个产品，仅限一个月。这意味着，每 30 天，用户只能保存 3 个产品。如果他保存了 3 个产品，他将等待接下来的 30 天间隔来保存更多的 3 个。

它应该以某种方式：

**1)**按月份名称 - 检查从 1 到 31 的月份。

**2)**任何间隔。间隔可能在不同的月份。从 2 月 9 日（此区间的第一个产品）到 3 月 9 日（此区间的最后一个产品）

但对我来说都是一样的。

产品模型具有`CreateDate`属性，如果需要我可以添加其他属性（例如计数）。我该如何解决这个任务？

# jquery - 使用 js 函数或 jQ 插件创建钟形图

> ID：14932590
> 
> 赞同：1
> 
> 时间：2013-02-18T09:01:05.213
> 
> 标签：jquery, graph, charts

我需要一个 js 函数或 jQ 插件来创建以下类型的钟形图。如果有人知道链接请帮助我![在此处输入图像描述](../Images/2bf82801cea75d7e098a4c04542aef9b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:18:31.783

Raphaël 是一个小型 JS 库，用于生成您可能需要的基于矢量的图像。您可以在[http://raphaeljs.com/](http://raphaeljs.com/)找到它。

# node.js - 在 Ember.js 视图中查找重复数据的来源

> ID：14932594
> 
> 赞同：0
> 
> 时间：2013-02-18T09:01:18.570
> 
> 标签：node.js, ember.js, redis, socket.io

不久前，我使用 Socket.io、Redis 和 Node.js 制作了一个聊天应用程序。最近，一位朋友在 Github 上 fork 了我的存储库，并在 Ember.js 中实现了相同的聊天实现。我想我会帮忙的，因为他添加的很多东西破坏了我代码的很多功能。我已经尝试尽可能多地修复它，我可以。我想解决的两个问题是重复的数据。

我不是 Ember.js 专家——我几乎不知道这个框架。我想解决两个问题： 在用户的在线列表中 - 有重复的用户名。提交消息时，会出现两条内容相同的消息。

在尝试查找错误时，我在本地查看了 Redis，并且在 Redis 中没有重复的内容。app.js 中的代码也没有任何明显足以让我发现的错误。

这是代码参考存储库的链接，因为它们太大而无法在此处添加（实时示例在自述文件中）：

[https://github.com/declandewet/ember-js-chatapp/](https://github.com/declandewet/ember-js-chatapp/)（我的 repo 的分支） [https://github.com/declandewet/chatapp](https://github.com/declandewet/chatapp)（我的 repo）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:02:08.837

将 current_users.push 移动到循环的部分并将其添加到 redis 似乎可以修复它。

# ios - 从包含 id 的字符串形成 NSPredicate

> ID：14932595
> 
> 赞同：2
> 
> 时间：2013-02-18T09:01:19.227
> 
> 标签：ios, objective-c, core-data, nspredicate, nsfetchrequest

我有这个问题，我想不出如何写这个谓词。

我有一个名为 Contact 的实体，它有一个字符串属性“pages”，比如说

```
contact.pages = @"1,5,11,15,17"; 
```

我的数据库中有很多联系人，我只想获取这些包含某个 id 的联系人。因此，假设我只想获取这些联系人，哪些页面包含 id @“1”。

我能想到这样的事情，

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"self.pages CONTAINS %@", _pageId]; 
```

但我的问题是这也会获得联系人，例如有 pages = @"11,15"。

那么关于如何实现这一目标的任何想法？如有任何建议，我将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:55:46.370

的 "MATCHES" 运算符`NSPredicate`可用于与正则表达式进行比较：

```
NSString *pageId = @"1";
NSString *regex = [NSString stringWithFormat:@"(.*,)?%@(,.*)?", pageId];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"pages MATCHES %@", regex]; 
```

*但是您还应该考虑将字符串属性替换为与Page*实体的一对多关系，然后谓词看起来像

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY pages.pageid == %@", pageId]; 
```

# wpf - WPF Datepicker 仅制作可选择的日期列表

> ID：14932596
> 
> 赞同：4
> 
> 时间：2013-02-18T09:01:22.733
> 
> 标签：wpf, wpf-controls, datepicker

我不确定这是否可能，但是否可以在 wpf 日期选择器中只制作一个可选择的日期列表？

我需要确保使用只能从一定数量的日期中选择。我可以使用下拉列表来做到这一点，但使用日期选择器会更好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T09:21:25.360

具有以下`DatePicker`属性来控制哪些日期应该是可选的：

[DisplayDateStart](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydatestart%28v=VS.100%29.aspx)：要包含在`Calendar`弹出窗口中的第一个日期。
[DisplayDateEnd](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydateend%28v=vs.100%29.aspx)：要包含在`Calendar`弹出窗口中的最后日期。

因此，如果您有一个包含允许日期的列表，您可以设置`DisplayDateStart`为列表中的第一项，以及列表`DisplayDateEnd`中的最后一项。

这将阻止用户选择该范围之外的日期。

要处理允许日期列表包含间隙的情况，您可以使用该`BlackoutDates`属性使日期范围不可选。

因此，要将列表中不存在的日期添加为涂黑，您可以执行以下操作。

日历弹出窗口中仅显示列表中的日期，列表中未显示的日期被涂黑，因此无法选择。

```
var dates = new List<DateTime>
{
    new DateTime(2013, 1, 5),
    new DateTime(2013, 1, 6),
    new DateTime(2013, 1, 7),
    new DateTime(2013, 1, 8),
    new DateTime(2013, 1, 15),
    new DateTime(2013, 1, 16),
    new DateTime(2013, 1, 28),
    new DateTime(2013, 1, 29),
    new DateTime(2013, 2, 9),
    new DateTime(2013, 2, 12),
    new DateTime(2013, 2, 13),
    new DateTime(2013, 2, 17),
    new DateTime(2013, 2, 18)
};

var firstDate = dates.First();
var lastDate = dates.Last();
var dateCounter = firstDate;

foreach (var d in dates.Skip(1))
{
    if (d.AddDays(-1).Date != dateCounter.Date)
    {
        dtp.BlackoutDates.Add(
            new CalendarDateRange(dateCounter.AddDays(1), d.AddDays(-1)));
    }

    dateCounter = d;
}

dtp.DisplayDateStart = firstDate;
dtp.DisplayDateEnd = lastDate; 
```

如果允许的日期相距很远，这可能对用户不太友好，因为将 90% 的日期涂黑会很烦人。在这种情况下，a`ComboBox`可能会更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T09:08:04.043

您可以使用该集合执行您想要的操作，`BlackoutDates`以防止用户选择您想要避免的所有日期。

代码：

```
myDatePicker.BlackoutDates.Add(myCalendarDateRange); 
```

XAML：

```
<DatePicker Name="myDatePicker">
    <DatePicker.BlackoutDates>
        <CalendarDateRange Start="02.20.2013" End="02.22.2013" />
    </DatePicker.BlackoutDates>
</DatePicker> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:09:20.300

您需要创建自己的 ControlTemplate。最简单的方法是采用默认模板（您可以从下面的 URL 下载它）并更改您想要的部分。

[http://archive.msdn.microsoft.com/wpfsamples#themes](http://archive.msdn.microsoft.com/wpfsamples#themes)

# javascript - Knockout.js 显示/隐藏块可见性模式

> ID：14932600
> 
> 赞同：7
> 
> 时间：2013-02-18T09:01:30.290
> 
> 标签：javascript, design-patterns, knockout.js, dry

在下一个案例中我有**代码重复问题。**在我的页面上，我需要通过单击链接来显示/隐藏很多块：

```
<div>
    <a data-bind="click: showHiddenFirst, visible: isVisibleFirst"href="#">Show first</a>
    <div data-bind="visible: !isVisibleFirst()" style="display:none">
        hidden content first
    </div>
</div>
<div>
    <a data-bind="click: showHiddenSecond, visible: isVisibleSecond"href="#">Show second</a>
    <div data-bind="visible: !isVisibleSecond()" style="display:none">
        hidden content second
    </div>
</div> 
```

还有我的 JS

```
var vm = function(){
    this.isVisibleFirst = ko.observable(true);

    this.showHiddenFirst = function(){
        this.isVisibleFirst(false)
    };

    this.isVisibleSecond = ko.observable(true);

    this.showHiddenSecond = function(){
        this.isVisibleSecond(false)
    };
};

ko.applyBindings(new vm()); 
```

这是 jsfiddle 示例[http://jsfiddle.net/sstude/brCT9/2/](http://jsfiddle.net/sstude/brCT9/2/)

**问题**是*如何避免所有这些显示/可见的重复*？也许我需要一些自定义绑定，在其中放置隐藏块的 id 或 smth。别的？您可以建议任何模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:18:02.800

这是针对您的特定场景将这个功能完全封装在可观察对象中的想法：

```
ko.bindingHandlers.clickVisible = {
    init: function(element) {
       var visible = ko.observable(true),
           opposite = ko.computed(function() { return !visible(); }),
           clickHandler = visible.bind(null, false);

        //apply bindings to anchor
        ko.applyBindingsToNode(element, { click: clickHandler, visible: visible });

        var sibling = element.nextSibling;
        //find the div (as text nodes, etc. will show up in nextSibling)
        while (sibling && sibling.nodeType != 1) {
            sibling = sibling.nextSibling;   
        }        

        //apply bindings to div
        if (sibling) {
            ko.applyBindingsToNode(sibling, { visible: opposite });
        }
    }
}; 
```

如果传递给绑定的值可能很重要，则可以根据需要进一步调整它。

示例：http: [//jsfiddle.net/rniemeyer/gCgy5/](http://jsfiddle.net/rniemeyer/gCgy5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:42:10.393

您可以将[**模板**](http://knockoutjs.com/documentation/template-binding.html)与隐藏元素的单独模型一起使用：

**HTML**

```
<div data-bind="template: { name: 'hidden-template', data: first }"></div>
<div data-bind="template: { name: 'hidden-template', data: second }"></div>

<script type="text/html" id="hidden-template">
    <a data-bind="click: showHidden, visible: isVisible, text : linkText" href="#"></a>
    <div data-bind="visible: !isVisible(), html: content" style="display:none"></div>
</script> 
```

**JS**

```
var hiddenModel = function(linkText, content) {
    this.linkText = linkText;
    this.content = content;
    this.isVisible = ko.observable(true);
    this.showHidden = function(){
        this.isVisible(false)
    };
}

var vm = function() {
    this.first = new hiddenModel('Show first', 'hidden content first');
    this.second = new hiddenModel('Show second', 'hidden content second');
}; 
```

*注意：对于这两个元素，这可能开销太大，但只要您需要更多隐藏物品，它就会得到回报。任何额外的元素都只需要一行简短的 HTML 和 JS。*

## 具有绑定的复杂模板的更新：

如果您的 HTML 内容本身包含绑定，您也可以将其放入模板中并动态加载它们

[**工作示例**](http://jsfiddle.net/xA9RU/)

**HTML**

```
<div data-bind="template: { name: 'hidden-template', data: first }"></div>
<script type="text/html" id="content-first">
    test simple content
</script>
<div data-bind="template: { name: 'hidden-template', data: second }"></div>
<script type="text/html" id="content-second">
    test content <a href="#" data-bind="click:testBtn">with binding</a>
</script>

<script type="text/html" id="hidden-template">
    <a data-bind="click: showHidden, visible: isVisible, text : linkText" href="#"></a>
    <div data-bind="visible: !isVisible(), template: { name: content, data: $parent }" style="display:none"></div>
</script> 
```

**JS**

```
var hiddenModel = function(linkText, content) {
    this.linkText = linkText;
    this.content = content;
    this.isVisible = ko.observable(true);
    this.showHidden = function(){
        this.isVisible(false)
    };
}

var vm = function() {
    this.testBtn = function(){alert('it works');}
    this.first = new hiddenModel('Show first', 'content-first');
    this.second = new hiddenModel('Show second', 'content-second');
}; 
```

`content`现在是模板 id 而不是 HTML 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:15:36.987

为什么不使用带有一些 id 的 observableArray（每个复选框一个）？

然后，您可以使用以下方法：

```
model hideElement = function(id) {
  model.hiddenElements.push(id);
}

model.showElement = function(id) {
  model.hiddenElements.remove(id);
} 
```

在你的绑定中：

```
<div data-bind="click: function() { hideElement('two') }, visible: !hiddenElements().contains('one')"></div> 
```

**编辑**：我更新了您的小提琴以显示可能的实现：http: [//jsfiddle.net/brCT9/4/](http://jsfiddle.net/brCT9/4/)

# java - 如何允许访问类？

> ID：14932604
> 
> 赞同：1
> 
> 时间：2013-02-18T09:01:42.980
> 
> 标签：java, android, singleton, global-variables

我知道，这个问题以前问过，但我无法解决这个问题。我想定义全局变量，所以我使用了 extend `application class`。但我达不到这个`subclass`。

我也创建了公共构造函数。

我的`superclass`和`subclass`在这里：

```
class GlobalVariables extends Application {

    private int sessionid;
    private Locale locale;

    public GlobalVariables(){
    }

    public int getSessionid() {
        return sessionid;
    }

    public void setSessionid(int sessionid) {
        this.sessionid = sessionid;
    }

    public Locale getLocale() {
        return locale;
    }

    public void setLocale(Locale locale) {
        this.locale = locale;
    }
}

class Application extends Activity {

    Intent intent;
    int sessionid;
    Log log = new Log();
    SQLiteDatabase db2;
    GeneralLog db = new GeneralLog(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        sessionid = getSessionId()+1;

        GlobalVariables glb = new GlobalVariables();
        glb.setSessionid(sessionid);

        setContentView(R.layout.application);
    }

    public int getSessionId() {
        SQLiteDatabase db2 = db.getReadableDatabase();
        final SQLiteStatement stmt = db2.compileStatement("SELECT MAX(sessionid) FROM LOG2");

        return (int) stmt.simpleQueryForLong();
    }

    public Application() {
    }
} 
```

我收到此错误：

```
java.lang.IllegalAccessException : access the class not allowed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:05:58.767

添加`public`到您的班级将解决您的问题。

```
public class GlobalVariables extends Application 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:04:02.847

扩展类`Application`必须是`public`

```
public class GlobalVariables extends Application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:35:32.873

如果不指定类的范围，则默认为私有。您必须公开您的信息，以便您可以从其他地方访问它。

# ios - 显示为模态的两个导航控制器上的警告

> ID：14932612
> 
> 赞同：6
> 
> 时间：2013-02-18T09:02:01.580
> 
> 标签：ios, uiviewcontroller

我创建了两个`UIViewControll`显示为模态的。假设前 5 次尝试，模态将正常显示，但之后它会给我一个：

```
Warning: Attempt to dismiss from view controller <UINavigationController: 0x76a8450> while a presentation or dismiss is in progress! 
```

下面是关闭当前视图控制器并呈现另一个的代码

```
[customAlertLoad dismissViewControllerAnimated:NO completion:^{ 
     CustomAlertMsg *cust = [[CustomAlertMsg alloc] init];
     cust.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
     cust.modalPresentationStyle = UIModalPresentationFormSheet;
     cust.delegate = self;

     [self.navigationController presentModalViewController:cust animated:YES];
     cust.view.superview.frame = CGRectMake(0, 0, 458, 230);
     cust.view.superview.center = self.view.center;
}]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:29:07.367

正如错误消息所说，问题出现在*dismissing*期间。因此`presentModalViewController`，引起您麻烦的不是 ，而是`dismissViewControllerAnimated`。

如果您可以为该调用粘贴一些上下文，我们可能会找到解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T21:22:54.603

**编辑**

我只记得几周前的另一个类似问题。您遇到了竞争状况，这可能可以使用[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)（Grand Central Dispatch）解决。这类似于@rakeshNS 建议的解决方案，但危险性较小。（使用计时器来处理竞争条件是不好的做法，尽管在许多语言中调用具有 0 秒计时器等待时间的方法是一种用于将该方法调用放在调用堆栈末尾的技巧，也就是使其异步）。苹果为此提供了一种机制。

我会尝试做这个轻微的编辑：

```
[customAlertLoad dismissViewControllerAnimated:NO completion:^{ 
                             dispatch_async(dispatch_get_main_queue(), ^(void) {
                                  CustomAlertMsg *cust = [[CustomAlertMsg alloc] init];
                                  cust.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
                                  cust.modalPresentationStyle = UIModalPresentationFormSheet;
                                  cust.delegate = self;

                                  [self.navigationController presentModalViewController:cust animated:YES];
                                  cust.view.superview.frame = CGRectMake(0, 0, 458, 230);
                                  cust.view.superview.center = self.view.center;
                                 });
                         }]; 
```

对 dispatch_async 的调用将块放在执行堆栈的末尾。在模式被解除之前，它无法运行。这也允许在两个模态的解除和呈现上制作动画。

然而，我应该提到，在这个特定的问题中，这是一个 hack。 **你在其他地方有问题**。如果我在测试项目中重现您的设置，我可以从完成块中创建/关闭任意数量的模式，而不会遇到您的错误（只要从用于关闭模式的自定义委托回调中调用解除代码，就像苹果建议的那样）。我会查看您的自定义警报负载和自定义警报类代码​​。

**结束编辑**

这可能与您的问题不同，在将我的代码库移动到 ARC 之后，我之前遇到过弹出窗口的问题。在我的 Popover 发布得太早或保留时间过长的情况下发生了奇怪的事情。解决方案是创建一个实例变量来保存 Popover，并手动管理它。然后一切都开始工作了。

所以我会这样做：

```
@interface YourClass:UIViewController

@property (nonatomic,strong) CustomAlertMsg *cust;

@end

@implementation YourClass

... Codey Code....

-(void)pushView{
     // For the sake of sanity, nil the modal here
     if(self.cust != nil) self.cust = nil;
     self.cust = [[CustomAlertMsg alloc] init];
     self.cust.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
     self.cust.modalPresentationStyle = UIModalPresentationFormSheet;
     self.cust.delegate = self;

     [self.navigationController presentModalViewController:self.cust animated:YES];
     self.cust.view.superview.frame = CGRectMake(0, 0, 458, 230);
     self.cust.view.superview.center = self.view.center;
}

// Then where you dismiss it, or in the delegate callback that is 
//  called when you dismiss it, if you are using one anyway, 
//  nil it out
- (void)methodThatDismissesModal
{
     [self dismissModalViewControllerAnimated:YES];
     // This is pretty important
     if(self.cust != nil) self.cust = nil; 
}

... Codey Code....

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:48:36.083

尝试更改为：

```
[self.navigationController presentModalViewController:cust animated:NO]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T16:54:39.307

也许尝试从导航控制器中解散，而不是`customAlertLoad`：

```
[self.navigationController dismissViewControllerAnimated:NO completion:^{

    CustomAlertMsg *cust = [[CustomAlertMsg alloc] init];
    cust.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    cust.modalPresentationStyle = UIModalPresentationFormSheet;
    cust.delegate = self;

    [self.navigationController presentModalViewController:cust animated:YES];
    cust.view.superview.frame = CGRectMake(0, 0, 458, 230);
    cust.view.superview.center = self.view.center;

}]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T11:07:45.333

试试这个，

```
[customAlertLoad dismissViewControllerAnimated:NO completion:^{ 

     [self performSelector:@selector(pushView) withObject:ni afterDelay:0.4];
}

-(void)pushView{
     CustomAlertMsg *cust = [[CustomAlertMsg alloc] init];
     cust.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
     cust.modalPresentationStyle = UIModalPresentationFormSheet;
     cust.delegate = self;

     [self.navigationController presentModalViewController:cust animated:YES];
     cust.view.superview.frame = CGRectMake(0, 0, 458, 230);
     cust.view.superview.center = self.view.center;
} 
```

# mysql - 我得到了这样的错误“在第 8 行的 'Before INTEGER, PRIMARY KEY (ID), )' 附近使用正确语法的服务器版本”

> ID：14932614
> 
> 赞同：0
> 
> 时间：2013-02-18T09:02:22.943
> 
> 标签：mysql

我得到这样的错误：

> 在第 8 行的 'Before INTEGER, PRIMARY KEY (ID), )' 附近使用正确语法的服务器版本

```
CREATE TABLE PatientPX (
  ID INTEGER NOT NULL, 
  PXDate DATETIME, 
  PatientID INTEGER, 
  PatientPXCategoryId INTEGER, 
  FileName VARCHAR(255), 
  PXName VARCHAR(255), 
  Before INTEGER, 
  PRIMARY KEY (ID),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:10:58.047

我认为它`MySQL`不是`SQL Server`，在 mysql 中，`BEFORE`是一个保留关键字。

```
CREATE TABLE PatientPX 
(
  ID INT NOT NULL, 
  PXDate DATETIME, 
  PatientID INT, 
  PatientPXCategoryId INT, 
  FileName VARCHAR(255), 
  PXName VARCHAR(255), 
  `Before` INT, 
  PRIMARY KEY (ID),
) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

但我宁愿避免使用保留关键字上的名称，因为如果名称处理不当，则会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:09:28.537

before 是一个关键字（主要在 pl/sql 触发器中使用）。所以使用另一个列名。不要使用任何关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:12:48.053

它确实看起来像 MySQL 而不是 MS SQL ......但是我相信“之前”是一个保留字......因此它不能用于列名。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

表 9.2。MySQL 5.0.96 中的保留字

# .net - .Net 等效于 VB6 记录集

> ID：14932615
> 
> 赞同：3
> 
> 时间：2013-02-18T09:02:25.820
> 
> 标签：.net

我想知道 .net 中的 vb 记录集的等价物吗？

哪个 ado.net 对象可用于替换 vb 记录集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:09:20.253

在 ADO.NET 中没有直接替换 VB6 记录集。这取决于你想用它做什么，但候选人是

*   一个[数据集](http://msdn.microsoft.com/en-US/library/zb0sdh0b%28v=vs.110%29.aspx)（这可能是最接近的匹配）

*   一个[数据表](http://msdn.microsoft.com/en-us/library/6zd7cwzh.aspx)

*   或[数据读取器](http://www.simple-talk.com/dotnet/.net-framework/should-you-use-ado.net-datareader-or-dataset/)

一个非常基本的例子是：

```
 public DataSet GetDataset(string sql, string connectionString)
    {
        DataSet ds = new DataSet();

        using (SqlConnection sqlConn = new SqlConnection(connectionString))
        {
            using (SqlDataAdapter adapter = new SqlDataAdapter(sql, sqlConn))
            {
                adapter.Fill(ds);
            }
        }
        return ds;
    } 
```

你还应该看看：

*   [ADO.NET 和 ADO 的比较](http://msdn.microsoft.com/en-us/library/904fck4k%28v=vs.90%29.aspx)
*   [生成强类型数据集](http://msdn.microsoft.com/en-us/library/wha85tzb.aspx)
*   [Linq2Sql](http://msdn.microsoft.com/en-us/library/bb425822.aspx)

# mysql - 如果每个表中都存在数据，如何从几个表中删除？

> ID：14932621
> 
> 赞同：0
> 
> 时间：2013-02-18T09:02:48.703
> 
> 标签：mysql, mysqli

我有 7 个表我需要从所有表中删除数据，但有时我在其中一个表中没有数据，因此常规 DELETE 不起作用（返回 false）

```
DELETE `lead`.*, `wp_users`.*, `wp_sfmembers`.*, `wp_usermeta`.*,
       `crm_notes`.*,`deposits`.*,`meta_accounts`.* 
FROM `lead`, `wp_users`, `wp_sfmembers`,
     `wp_usermeta`, `crm_notes`,
     `deposits`, `meta_accounts` 
WHERE
  `wp_users`.`ID`=`lead`.`uid` 
  AND `wp_sfmembers`.`user_id`=`lead`.`uid` 
  AND `wp_usermeta`.`user_id`=`lead`.`uid` 
  AND `crm_notes`.`uid`=`lead`.`id` 
  AND `deposits`.`uid`=`lead`.`id` 
  AND `meta_accounts`.`uid`=`lead`.`id` 
  AND `lead`.`id`='89' 
```

我尝试使用 JOIN 但它删除了我错误的数据：

```
DELETE `l`.*
FROM `lead` as `l`   
     LEFT OUTER  JOIN `wp_users` ON `wp_users`.`ID`=`l`.`uid`
     LEFT OUTER  JOIN `wp_sfmembers` ON `wp_sfmembers`.`user_id`=`l`.`uid`
     LEFT OUTER  JOIN `wp_usermeta` ON `wp_usermeta`.`user_id`=`l`.`uid` 
     LEFT OUTER  JOIN `crm_notes` ON `crm_notes`.`uid`=`l`.`uid` 
     LEFT OUTER  JOIN `deposits` ON `deposits`.`uid`=`l`.`id` 
     LEFT OUTER  JOIN `meta_accounts` ON `meta_accounts`.`uid`=`l`.`id`
     AND `l`.`id`='89' 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:05:52.950

只需运行 7 个单独的删除查询，而不是一个复杂的。
这是经验法则：如果您不能以复杂的方式做某事，那就以简单的方式来做。简单的方法总是有效的。

# ruby-on-rails - Which many_to_many model should I use to make database queries efficient?

> ID：14932627
> 
> 赞同：0
> 
> 时间：2013-02-18T09:03:07.670
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3.2, associations

Currently in my app I have the following models:

*   Student (not connected to the other models yet)
*   Dojo: `has_many :training_times`
*   TrainingTime: `belongs_to :dojo`

I want a student to have many training times, and training times to have many students.

Currently in my student controller I have:

```
def show
  @student = Student.includes(:senseis).find(params[:id])
  @times = TrainingTime.includes(:dojo).order("time ASC")
  @times = sort_by_place_and_day(@times)
end 
```

Which I then render as:

![students#show view](../Images/87f978ec06a94470e7f6cd7905e3bc9a.png)

If the training time is associated to the current student then I want to highlight it as red, so something like:

```
<% if time.students.exists?(@student) %>
  <td class="orange">...</td>
<% else %
  <td class="normal">...</td>
<% end % > 
```

So my question is: will this query the database again each time? How do I associate / include the 2 models so that it doesn't?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:58:49.243

For me, the most efficient approach to this issue is through js. Use erb/haml to show all the training times available then add a js code that will go through each of the training times related to the student. The js code will just change the class of the td which is what you want. So at most, you only get 3 queries, the student, all the training times and the student's training times.

# javascript - javascript日期（闰年）

> ID：14932630
> 
> 赞同：1
> 
> 时间：2013-02-18T09:03:17.163
> 
> 标签：javascript

我有这个代码，用户输入开始日期，然后它会自动添加结束日期。结束日期距开始日期 +3 天。问题是在 2 月之后，3 月 26 日至 31 日，因此输出错误的结束日期。它总是从 26-31 输出错误的结束日期。我认为问题是闰年，但我不知道如何解决它。请帮我。

这是代码：

```
<input type="date" name="start_date" id="start" onKeyUp="date()">
<input type="text" name="end_date" id = "end" onKeyUp="date()" disabled />
        <script type = "text/javascript">
function date() {
var startdate = document.getElementById('start');
var enddate = document.getElementById('end');
//conver you selected stuff to a proper date format
var old = new Date(Date.parse(startdate.value));
//take a new date
var newdate=new Date(Date.parse(startdate.value)+24*60*60*1000*3);
// add how many days you want to add i use 3 you can use as many
newdate.setDate(old.getDate()+3);
enddate.value = (newdate.getMonth()+1)+'-'+newdate.getDate()+'-'+newdate.getFullYear(); 
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:17:09.663

尝试

```
var newdate=new Date(Date.parse(startdate.value)+24*60*60*1000*3); 
```

而不是直接操纵`getDate()`结果。

**编辑**：

号码说明：

```
 24            * 60               * 60                 * 1000                    * 3
//hours per day   minutes per hour   seconds per minute   milliseconds per second   3 days 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:25:16.237

这是因为`.setDate()`在您的代码中应用了今天的日期，因此无法正常工作。在开始进行日期计算之前，两个日期需要彼此相等。

```
var old = new Date(Date.parse(startdate.value)),
newdate = old;

newdate.setDate(old.getDate() + 3); 
```

这也适用于闰秒之类的东西。

# linq - Linq Lambda 连接表达式到 XML

> ID：14932645
> 
> 赞同：1
> 
> 时间：2013-02-18T09:04:06.553
> 
> 标签：linq, linq-to-xml

我有一个以下格式的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<root>

  <EntityType_Data>
    <EntityType>
      <ID>1</ID>
      <Caption>Entity1</Caption>
      <Description>Entity1</Description>
      <ModuleID>3</ModuleID>
      <Category>1</Category>
    </EntityType>
    <EntityType>
      <ID>2</ID>
      <Caption>Entity2</Caption>
      <Description>Entity2</Description>
      <ModuleID>3</ModuleID>
      <Category>1</Category>
    </EntityType>
    <EntityType>
      <ID>3</ID>
      <Caption>Entity4</Caption>
      <Description>Entity4</Description>
      <ModuleID>3</ModuleID>
      <Category>1</Category>
    </EntityType>
    <EntityType>
      <ID>4</ID>
      <Caption>Entity5</Caption>
      <Description>Entity5</Description>
      <ModuleID>3</ModuleID>
      <Category>1</Category>
    </EntityType>
    </EntityType_Data>
  <AttributeType_Table>
    <AttributeType>
      <ID>1</ID>
      <Caption>AttributeType1</Caption>
      <DataType>string</DataType>
      <SqlType>nvarchar(max)</SqlType>
     </AttributeType>
    <AttributeType>
      <ID>1</ID>
      <Caption>AttributeType2</Caption>
      <DataType>integer</DataType>
      <SqlType>int</SqlType>
     </AttributeType>

   </AttributeType_Table>
  <Attributes_Table>
    <Attribute>
      <ID>1</ID>
      <Caption>SingleLineTextbox</Caption>
      <AttributeTypeID>1</AttributeTypeID>
      </Attribute>
    <Attribute>
      <ID>2</ID>
      <Caption>MultiLineTextBox</Caption>
      </Attribute>
    <Attribute>
      <ID>3</ID>
      <Caption>OrgLevel</Caption>
      <AttributeTypeID>3</AttributeTypeID>
      </Attribute>
  </Attributes_Table>
  <EntityRelationtable>
    <EntityTypeAttributeRelation>
      <EntityTypeID>2</EntityTypeID>
      <AttributeID>1</AttributeID>
    </EntityTypeAttributeRelation>
    <EntityTypeAttributeRelation>
      <EntityTypeID>3</EntityTypeID>
      <AttributeID>2</AttributeID>
      </EntityTypeAttributeRelation>
    <EntityTypeAttributeRelation>
      <EntityTypeID>3</EntityTypeID>
      <AttributeID>1</AttributeID>
      </EntityTypeAttributeRelation>
    <EntityTypeAttributeRelation>
      <EntityTypeID>3</EntityTypeID>
      <AttributeID>3</AttributeID>
      </EntityTypeAttributeRelation>
    <EntityTypeAttributeRelation>
      <EntityTypeID>2</EntityTypeID>
      <AttributeID>2</AttributeID>
      </EntityTypeAttributeRelation>
  </EntityRelationtable>
</root> 
```

现在我想从**“EntityRelationtable”元素中获取数据过滤器****“EntityTypeID”**和**“AttributeID”** ，使用基于**“AttributeID”之**​​后的条件需要从“AttributeType_Table”元素中获取**“Caption”**、“Datatype”并且需要获取**“描述”**来自**“EntityType_Data”**元素。

 ******我必须使用 Linq lambda 表达式来完成上述要求。请仅通过带有 lambda 的 linq 解决。

到目前为止，我试图从**“EntityRelationtable”**元素中获取**“EntityTypeID”**和**“AttributeID” 。**

 **```
var attributeresult = workingXmldoc
  .Descendants("EntitytypeAttributeRelation_Table")
  .Elements("EntityT‌​ypeAttributeRelation")
  .Where(x => x.Element("EntityTypeID").Value == "" + entitytypeId + "")
  .Select(v => new { EntitytypeID = v.Element("EntityTypeID").Value, AttributeID = v.Element("AttributeID").Value }); 
```

我正在考虑将这个结果与**"AttributeType_Table"**元素**"AttributeID"**结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:38:34.053

最后，我只使用 linq 查询而不是 linq Lambda 解决了我的问题。

```
var attributeresult = from a in workingXmldoc.Descendants("EntityRelationtable").Elements("EntityTypeAttributeRelation")
                          join b in workingXmldoc.Descendants("Attributes_Table").Elements("Attribute")
                          on (string)a.Element("AttributeID") equals (string)b.Element("ID")
                          join c in workingXmldoc.Descendants("Attributetype_Table").Elements("AttributeType")
                          on (string)b.Element("AttributeTypeID") equals (string)c.Element("ID")                                                                                           
                          where (string)a.Element("EntityTypeID") == "" + entitytypeId + ""
                          select new {
                              AttributeID = a.Element("AttributeID").Value,
                              AttributeName = b.Element("Caption").Value,
                              AttributeDatatype = c.Element("DataType").Value,
                              AttributeSqltype = c.Element("SqlType").Value
                          }; 
```

如果有任何机构给出值得赞赏的 Linq-lambda 查询..********

# javascript - 在 RTL 模式下，IE6 和 IE7 中 span 的无效 getBoundingClientRect() 需要解决方法

> ID：14932646
> 
> 赞同：2
> 
> 时间：2013-02-18T09:04:06.367
> 
> 标签：javascript, internet-explorer, right-to-left

我正在寻找解决以下问题的方法：

当文档处于 RTL 模式时，当我尝试使用`getBoundingClientRect()`带边框的跨度时，我得到无效值。`<span id="hello_id" style="border-bottom:dotted 1px">helo</span>`

以下代码显示了一个示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
function show_rectangle()
{
    var el = document.getElementById('hello_id');
    var rec = el.getBoundingClientRect();
    alert('Left:' + rec.left + ' Right:' + rec.right);
}
setTimeout(show_rectangle,2000);
</script>
</head>
<body style="direction:rtl">
<p id='xxx' style="text-align:center"><span id="hello_id" style="border-bottom:dotted 1px">hello</span></p>
</body>
</html> 
```

在 IE6 和 IE7 中，警报显示为“左：-621 右：-593”

当我从 Body 的样式或样式属性中删除“direction:rtl”时，我得到了合理的正值。

如何解决此问题：即如何在 rtl 文档中创建带边框的跨度并具有正确的边界矩形？或者也许生成一个没有这个属性的边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:01:47.953

解决方案是将一个跨度放在另一个跨度内，将边框样式赋予内部跨度并测量外部：

```
<p id='xxx' style="text-align:center"><span id="hello_id" ><span style="border-bottom:dotted 1px">hello</span></span></p> 
```

比它有效。

# phpbb - PHP BB 用户发布基于组可见

> ID：14932647
> 
> 赞同：0
> 
> 时间：2013-02-18T09:04:07.237
> 
> 标签：phpbb, phpbb3

我正在使用 phpbb 论坛。我创建了两个名为：British Airways 和 Oman Airways 的组。两家航空公司创建的帖子将被区别对待。即，英国航空公司的帖子不会看到阿曼航空公司的帖子。

我希望你能得到我的分数。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:58:44.247

我相信您的解决方案是创建两个单独的子论坛并仅授予每个论坛相应组的权限。

例如，创建一个名为“British Airways Discussion”的子论坛。在 ACP 中，选择`Forums`选项卡，然后选择`Forum permissions`。在`Groups`添加/删除适当的组下。在这种情况下，您将添加`British Airways`.

对名为“阿曼航空公司讨论”的子论坛重复此操作。在 ACP 中，添加`Oman Airways`组。

现在，每个小组将有自己的区域来讨论主题，而无权查看其他子论坛。

# wix - WiX：在安装过程中获取引导程序文件名

> ID：14932648
> 
> 赞同：1
> 
> 时间：2013-02-18T09:04:11.030
> 
> 标签：wix

我们公司正在使用 WiX 来创建我们（目前非常简单）的设置。我们有一个引导程序项目，它安装 .Net 4.0 框架并运行我们的 MSI 包（WiX 安装项目）。我们现在想要在运行时访问引导程序 (Setup.exe) 的文件名并将其保存到文件中。只是为了背景：文件名不是固定的，我们的下载服务器会经常更改，所以我们必须在运行时访问它。

不幸的是，我没有找到使用 WiX 完成此任务的任何解决方案。有人能帮我吗？也许你有一些想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:40:46.347

这是你自己的引导程序，对吧？如果是这样，引导程序要么知道它自己的名称，要么可以在运行时检测到它（`::GetModuleFileName()`）。当引导程序运行**.msi**安装时，让它在命令行上将其名称作为公共属性传递：

```
msiexec /i OurPackage.msi IWASBOOTSTRAPPEDBY=bootstrappername.exe 
```

然后，该属性`IWASBOOTSTRAPPEDBY`可供基于 WiX 的**.msi**包随意使用。

就此而言，引导程序*本身*可以将其名称写入文本文件，甚至不会打扰 . **​​msi**包的任务。

# ios - 将动态字符串传递给 urlwithstringformat 方法的方法 ios

> ID：14932652
> 
> 赞同：0
> 
> 时间：2013-02-18T09:04:26.623
> 
> 标签：ios, objective-c

我有一个与 Web 服务连接的类，我创建了这个方法：

```
+(listingObject *) getDetailsForId : (NSString *) id {

    NSURL *url=[NSURL urlwithstringFormat : @"htt://mywebservic&id=%@",id];
} 
```

它不起作用请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:07:46.707

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://example.com/%@", id]] 
```

...是一个人为的例子。在单独的行上创建字符串可能更容易阅读。

# java - 如何在 linux 中选择正确的活动串口？

> ID：14932654
> 
> 赞同：0
> 
> 时间：2013-02-18T09:04:33.367
> 
> 标签：java, linux, serial-port, usb

我正在尝试使用 java 与微控制器通信。在 Windows 中，我只需使用“COM4”，我的代码就可以完美运行。在 linux 中，我正在尝试使用“/dev/ttyUSB0”。但给我一个错误“找不到串行端口”。

我曾经`dmesg | grep tty`看到活动的串行端口。这是正确的方法吗？

我该如何解决这个问题？我对linux真的很陌生，所以请用简单的语言解释一下

这是我的代码

```
Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

  CommPortIdentifier portId = null; 
  while (portIdentifiers.hasMoreElements())
  {
      CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
      if(pid.getPortType() == CommPortIdentifier.PORT_SERIAL &&
         pid.getName().equals("/dev/ttyUSB0")) 
      {
          portId = pid;
          break;
      }
  }
  if(portId == null)
  {
      System.err.println("Could not find serial port "); // + wantedPortName);
      System.exit(1);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:34:12.450

`lsusb`应该向您展示串口转 USB 转换器

```
lsusb | grep -i serial 
```

给我的系统

> 总线 001 设备 005：ID 067b:2303 Prolific Technology, Inc. PL2303 串行端口

和

```
ls -l /dev/ttyUSB* 
```

> crw-rw---- 1 root dialout 188, 0 Feb 18 10:30 /dev/ttyUSB0

然后我可以访问它

```
cat /dev/ttyUSB0 
```

需要访问端口的用户必须在组`dialout`或系统中的任何组中。您可以添加用户

```
adduser <user-name> dialout 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:43:25.407

显然 java 通信 API 没有 linux 实现[http://www.oracle.com/technetwork/java/index-139971.html](http://www.oracle.com/technetwork/java/index-139971.html)这就是我的代码不起作用的原因。

我安装了用于串行通信的 RXTX 库，代码现在工作正常。感谢 nos 和 Olaf Dietsche 的帮助和支持。

# iphone - alloc initWithObjects 与 arrayWithObject

> ID：14932658
> 
> 赞同：2
> 
> 时间：2013-02-18T09:04:58.273
> 
> 标签：iphone, ios

我不明白为什么如果我写这些代码

```
icons = [[NSArray alloc] initWithObjects:
             @"appointment",
             @"work",
             @"anniversary",
             @"me",
             nil]; 
```

应用程序崩溃了。但是后来我用这些代码代替了

```
icons = [NSArray alloc] arrayWithObjects:
             @"appointment",
             @"work",
             @"anniversary",
             @"me",
             nil]; 
```

并且应用程序没有崩溃。但是这些方法之间的效果是一样的！我不知道为什么？你能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:11:47.377

1.  initWithObjects 方法意味着您必须在不需要时释放数组的对象，因为这是实例方法，有关更多详细信息，[请单击](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithObjects%3a)：

2.  arrayWithObjects 方法意味着您不需要在不需要时释放数组的对象，因为这是类方法，有关更多详细信息，[请单击](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithObjects%3a)：

如果您不清楚要点，请回复我..

# html - 如何使 css 属性在加载时运行？

> ID：14932659
> 
> 赞同：0
> 
> 时间：2013-02-18T09:05:04.463
> 
> 标签：html, css, css-transitions, onload, onload-event

我有一个 css 可以让按钮旋转并增加大小。我想知道是否只有通过 CSS 和 HTML5，我才能使该属性在页面完全加载或加载后运行。

示例：我有一个包含 10 个事物的评级列表，它们显示在一个表格中，每行一个条目。每行前面是一个数字，显示该特定项目在排名中的当前位置。

现在我想要实现的是在列表中加载图像和链接时，10 个按钮会旋转和展开。

此外，如果这不仅不能通过 CSS 和 HTML5 实现，那么 Javascript 有没有办法处理它？如果可能的话，一个小例子将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:17:43.277

据我所知，只能使用 Javascript。这 10 个按钮在加载表格中的相应行时会旋转和展开，然后对于每个按钮，您可以编写和编写 tr 的 Javascript 函数 onload 事件。样本可能看起来像这样。

```
<html>
<head>
<head>
 <script>
function toDoForButton()
{
// You code goes here
}
</script>
</head>
<body>
<table>
<tr onload=toDoForButton()>
<td>  </td>
</tr>
</table>
</body>
</html> 
```

如果这是您的意图并且对您有帮助，请告诉我。

-- 维诺德

# java - 如何从我在该类中创建的类中访问该类的变量？

> ID：14932662
> 
> 赞同：0
> 
> 时间：2013-02-18T09:05:05.193
> 
> 标签：java, class

我有两个这样的课程：

```
public class A{
    ArrayList<Runnable> classBList = new ArrayList<Runnable>();
    int x = 0;

    public A(){
        //This code here is in a loop so it gets called a variable number of times
        classBList.add(new B());
        new Thread(classBList.get(classBList.size())).start();
    }
}

public class B implements Runnable{
    public B(){

    }

    public void run(){
        //Does some things here. blah blah blah...
        x++;
    }
} 
```

问题是我需要让 B 类的实例更改创建类 B 的类 A 中的变量 x。但是，我不知道如何让 B 类知道它需要更改值，或者如果它可以。任何有关如何更改它的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:09:42.750

您需要授予您的`B`实例访问该`A`实例的权限。有几种方法可以做到这一点：

1.  `B`从. _ `A`_ _ 我倾向于回避这个。`protected``A`

2.  在其构造函数中`B`接受一个`A`实例。

3.  接受在`B`其构造函数中实现某个接口的类的实例，并`A`实现该接口。

你选择哪一个取决于你。我以大致递减的耦合顺序给出了它们，其中耦合越松散越好（通常）。

代码中的第三个选项：

```
public TheInterface {
    void changeState();
}

public class A implements TheInterface {
    ArrayList<Runnable> classBList = new ArrayList<Runnable>();
    int x = 0;

    public A(){
        //This code here is in a loop so it gets called a variable number of times
        classBList.add(new B(this)); // <=== Passing in `this` so `B` instance has access to it
        new Thread(classBList.get(classBList.size())).start();
    }

    // Implement the interface
    public void changeState() {
        // ...the state change here, for instance:
        x++;
    }
}

public class B implements Runnable{
    private TheInterface thing;

    public B(TheInterface theThing){
        thing = theThing;
    }

    public void run(){
        // Change the thing's state
        thing.changeState();
    }
} 
```

现在，两者`A`和`B`都耦合到`TheInterface`，但仅`A`耦合到`B`; `B`不耦合到`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:06:32.610

您需要在 B 类中扩展 A 类，即：

```
public class B extends A implements Runnable {
} 
```

这将 B 类设置为 A 类的子类，并允许它访问其变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:10:41.510

你需要让类`B`以某种方式知道哪个类的实例`A`创建了它。它可以引用其创建者，例如：

```
public class B implements Runnable{
    private A creator;
    public B(A a){
        creator = a;
    }

    public void run(){
    //Does some things here. blah blah blah...
    x++;
    }
} 
```

然后在从类构造它时传递创建者`A`：

```
...
classBList.add(new B(this));
... 
```

# database - 如何为 PhoneGap android 应用程序创建数据库

> ID：14932663
> 
> 赞同：1
> 
> 时间：2013-02-18T09:05:08.260
> 
> 标签：database, cordova

我是 phonegap 的新手。请让我知道为 phonegap ANDROID 项目创建数据库的过程是什么？我正在使用 ECLIPSE-JUNO 和 CORDOVA 2.3.0。

phonegap 文档中给出的代码不起作用...

```
<html>
<head>
<title>Contact Example</title>
<script type="text/javascript" charset="utf-8" src="phonegap-2.3.0.js"></script>
<script type="text/javascript" charset="utf-8">

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
var db = window.openDatabase("test", "1.0", "Test DB", 1000000);
}

</script>
</head>
<body>
<h1>Example</h1>
<p>Open Database</p>
</body>
</html> 
```

这是我尝试过的程序之一......我得到了 d body 标签中的任何输出......

**我的另一个疑问是我们在哪里可以看到插入到数据库中的数据。在 Android 中，我们在 SQL LITE MANAGER 的帮助下查看它。PhoneGap 有什么特别的吗？？？**

所以，请指导我完成这个......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:38:00.933

您只是在创建一个新的 SQL Lite 数据库。使用数据库对象来操作数据。

试试这个代码（来自官方文档）

```
<!DOCTYPE html>
<html>
  <head>
    <title>Storage Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    // Populate the database 
    //
    function populateDB(tx) {
         tx.executeSql('DROP TABLE IF EXISTS DEMO');
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
         tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
         tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
    }

    // Transaction error callback
    //
    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Database</p>
  </body>
</html> 
```

# android - 更新查询不适用于android

> ID：14932665
> 
> 赞同：0
> 
> 时间：2013-02-18T09:05:27.883
> 
> 标签：android

我有一个简单的表，其中包含三个字段 _id 名称电子邮件

我正在尝试通过搜索电子邮件来更新记录名称

```
db.execSQL("update contacts set email='"+email+"' where name='"+name+"'"); 
```

即使在使用查询运行它时它也不起作用

```
ContentValues cv=new ContentValues();
    cv.put("name",n);
    dbase.update(table, cv, "email="+e,null); 
```

我们可以在没有主键的情况下运行查询吗？或者这个错误是什么。在早期的情况下，应用程序停止运行。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:09:29.870

您可以肯定地在没有主键的情况下运行更新。但是，如果我得到正确你需要的是以下内容：

```
ContentValues cv=new ContentValues();
cv.put("email",e);
String whereClause = "name = ?";
String [] whereArgs = {n};
dbase.update(table, cv, whereClause, whereArgs); 
```

你想搜索`name`所以在这里。

始终用于`whereArgs`设置`whereClause`参数，否则您将面临 SQL 注入的风险 - 参数将不会被清理（这是针对您的这部分代码的：）`"email="+e`。

# javascript - 将滚动条添加到 2 个表

> ID：14932667
> 
> 赞同：1
> 
> 时间：2013-02-18T09:05:34.510
> 
> 标签：javascript, html, css, html-table, autoscroll

我正在尝试为包含在 div 中的 2 个表格显示 2 个单独的滚动条。

我的代码如下

```
<html>
<body>

<div style="width:300px;background:#00CC33;height:100px;">
<div style="width:150px;float:left;">
<table width="100px" border="1">
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr><tr>
  <td>100</td>
</tr><tr>
  <td>100</td>
</tr>

</table>
</div>
<div style="width:100px;float:left;">
<table width="100px" border="1">
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>

</table>

</div>
</body>
</html> 
```

我尝试了什么：我尝试使用溢出：滚动；但是当我这样做时，两个表都被包裹在一个滚动条中。

上面提到的表格是动态生成的。演示：http: [//jsfiddle.net/HLyDq/](http://jsfiddle.net/HLyDq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:19:06.340

将以下样式添加到两个表父 div：

```
<div style="...;overflow-y:auto;max-height:100px;"> 
```

JsFiddle：http: [//jsfiddle.net/gQyYe/](http://jsfiddle.net/gQyYe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:24:49.763

您必须为每个表的直接父 DIV指定**height:100px**和**overflow:auto样式。**

这是更正后的代码

```
 <html>
<body>

**<div style="width:300px;background:#00CC33;height:100px;">
<div style="width:150px;float:left;height:100px;overflow:auto;">**
<table width="100px" border="1">
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr>
<tr>
  <td>100</td>
</tr><tr>
  <td>100</td>
</tr><tr>
  <td>100</td>
</tr>

</table>
</div>
**<div style="width:100px;float:left;height:100px;overflow:auto;">**
<table width="100px" border="1">
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>
<tr>
  <td>100</td>
  <td>200</td>
  <td>300</td>
</tr>

</table>

</div>
</body>
</html> 
```

一对 ** 之间的代码是更正后的行。检查这个 JSFiddle - [http://jsfiddle.net/yYxuN/1/](http://jsfiddle.net/yYxuN/1/)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:09:57.010

[这里](https://stackoverflow.com/questions/130564/i-need-my-html-tables-body-to-scroll-and-its-head-to-stay-put)有一个可能会有所帮助的答案- 我希望。`overflow:auto;`无论如何我都希望

# ssis - 如何修复无法获取架构行集 DBSCHEMA_TABLES_INFO 的错误？

> ID：14932668
> 
> 赞同：2
> 
> 时间：2013-02-18T09:05:51.923
> 
> 标签：ssis, oledb

我正在尝试纠正 SSIS 作业中的一些错误。错误的数量是 12 并且知道我到了 5

我收到以下错误消息，它是**法语**的。

> [OLE DB 源 [1]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E14。OLE DB 记录可用。来源："Microsoft SQL Server Native Client 10.0" Hresult：0x80040E14 描述："Impossible d'obtenir l'ensemble de lignes du schéma "DBSCHEMA_TABLES_INFO" pour le Fournisseur OLE DB "SQLNCLI10" du serverur lié "serverur3"。Lefournisseur prend en charge l'interface, mais retourne un code d'erreur lorsqu'elle est utilisée."。[SSIS.Pipeline] 错误：组件“OLE DB 源”(1) 未通过预执行阶段并返回错误代码 0xC0202009

错误消息翻译为以下**英文**。

> [OLE DB 源 1] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E14。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0”Hresult：0x80040E14 描述：“无法获取架构行集”DBSCHEMA_TABLES_INFO“用于 OLE DB 提供程序”SQLNCLI10“用于链接服务器”server3。“提供者支持接口，但使用时返回失败码。”。[SSIS.Pipeline] 错误：组件“OLE DB 源”(1) 未通过预执行阶段并返回错误代码 0xC0202009。

如何修复错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:32:22.807

### 翻译后的错误信息：

您在评论中添加的错误消息是法语的。使用谷歌翻译，错误消息翻译成以下内容：

> [OLE DB 源[1](https://stackoverflow.com/faq) ] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E14。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0”Hresult：0x80040E14 描述：“无法获取架构行集”DBSCHEMA_TABLES_INFO“用于 OLE DB 提供程序”SQLNCLI10“用于链接服务器”server3。“提供者支持接口，但使用时返回失败码。”。[SSIS.Pipeline] 错误：组件“OLE DB 源”(1) 未通过预执行阶段并返回错误代码 0xC0202009。

*   该消息暗示您可能正在尝试使用*`SQL Server Native Client 10.0`*. 我将猜测链接服务器指向`SQL Server 2000`基于网络上的搜索。

### 检查以下内容：

阅读以下有关如何解决问题的 Microsoft Connect 网站错误报告。

[*无法查询链接的 SQL Server 2000*](http://connect.microsoft.com/SQLServer/feedback/details/465959/unable-to-query-linked-sql-server-2000)

### 来自网站的报价：

这里的问题似乎是您的 SQL 2000 服务器上的 instcat 版本已过时。按照 KB 906954 ( [http://support.microsoft.com/kb/906954](http://support.microsoft.com/kb/906954) ) 中的步骤应该可以解决这个问题。

### 其他链接：

其他可能有助于解决您的问题的链接：

[*无法获取 OLE DB 提供程序的架构行集“DBSCHEMA_TABLES_INFO”*](http://blogs.xtivia.com/home/-/blogs/cannot-obtain-the-schema-rowset-dbschema_tables_info-for-ole-db-provider)

[*无法获取链接服务器“XXXXXX”的 OLE DB 提供程序“SQLNCLI10”的架构行集“DBSCHEMA_TABLES_INFO”*](http://saveadba.blogspot.com/2012/02/dbschematablesinfo-cannot-obtain-schema.html)

这些链接建议在 master 数据库中创建以下存储过程并授予适当的用户帐户执行权限。

```
USE master;
GO

CREATE PROCEDURE sp_tables_info_rowset_64
        @table_name SYSNAME
    ,   @table_schema SYSNAME = NULL
    ,   @table_type nvarchar(255) = NULL
AS 
    DECLARE @Result INT 
    SET @Result = 0
    EXEC @Result = sp_tables_info_rowset @table_name, @table_schema, @table_type
GO 
```

运行程序（只需要一次）

```
USE master
GRANT EXEC ON sp_tables_info_rowset_64 TO PUBLIC 
```

### 创建数据源以从 SSIS 2008 R2 连接到 SQL Server 实例的步骤

以下是使用2008 R2创建*`Data Source`*连接到 SQL Server 实例的步骤。*`Business Intelligence Development Studio (BIDS)`*

在 BIDS 项目解决方案上，右键单击该文件夹*`Data Sources`*，然后单击*`New Data Source...`*

![新数据源](../Images/3a02a9d3673e6c3c46ffc843e1d563fa.png)

在“数据源向导”上，单击“新建...”以创建新连接。

![数据源向导](../Images/cf76d9307c905884a2b9d4ec76aecf60.png)

在“连接管理器”对话框中，执行以下步骤：

*   *`Provider`*根据您要连接的 SQL Server 版本选择适当的。您只会看到机器上安装的提供程序。
*   对于*SQL Server 2000*，选择**`Microsoft OLE DB Provider for SQL Server`**
*   对于*SQL Server 2005 - 2008 R2*，选择**`Native OLE DB\SQL Server Native Client 10.0`**
*   对于*SQL Server 2012*，选择**`Native OLE DB\SQL Server Native Client 11.0`**

*   输入服务器名称或实例名称，例如**`MachineName\InstanceName`**

*   根据您希望如何连接到 SQL Server 实例，选择 Windows 身份验证或 SQL Server 身份验证。如果选择 SQL Server 身份验证，请输入有效的用户名和密码。

*   单击测试连接以确保凭据有效。

*   选择要连接的数据库。

*   点击确定

![连接管理器](../Images/9e38fcddaf6eac155259abdb558aff56.png)

单击数据源向导上的下一步。在最后一步，为数据源起一个正确的名称，例如**`OLEDB_AdventureWorks`**. *`OLEDB`*表示连接类型并*`AdventureWorks`*表示数据库名称。单击完成。

![完成向导](../Images/21ffbc4e3c5ac0f5dbe6e9ecff9a199d.png)

新创建的数据源 OLEDB_AdventureWorks 将显示在 SSIS 项目的 Data Sources 文件夹下。

![数据源](../Images/7aee59b1f43cfe75c7b71008852ade47.png)

要将数据源添加到包中，请右键单击*`Connection Manager`*SSIS 包底部显示的选项卡，然后单击*`New Connection From Data Source...`*

![来自数据源的新连接](../Images/d08cb8cfe9a6c86db5d4ac0c5f23f953.png)

选择数据源对话框将显示 SSIS 项目中所有可用的数据源。选择要添加到包中的那些，然后单击确定。

![选择数据源](../Images/4168da52fd8e2918a538611c019bcbbd.png)

新数据源将出现在包连接管理器上。您现在可以在包任务中使用连接管理器。

![包上的连接管理器](../Images/a1c63f85532a02ea06088a9f4f215b9f.png)

### 其他选项：

除了创建数据源，您还可以直接在包本身上创建连接管理器。右键单击*`Connection Manager`*SSIS 包底部显示的选项卡，然后选择要创建的适当连接。此连接管理器将仅对包可见，而对 SSIS 项目解决方案中的其他包不可见。

### 忠告：

*   阅读**[常见问题解答](https://stackoverflow.com/faq)**，了解如何发布包含足够信息供其他人回答的问题。

*   **不要**在评论中添加错误消息。阅读和理解信息非常困难。

*   始终编​​辑您的问题以详细解释问题或添加更多信息。

*   如果错误消息不是英文的，请翻译错误消息。

# c++ - 如何在聚合根类中编写只读访问器函数？

> ID：14932675
> 
> 赞同：0
> 
> 时间：2013-02-18T09:06:11.093
> 
> 标签：c++, delegates, domain-driven-design, aggregateroot, law-of-demeter

**总体设计**：我有一个聚合类`C`，其中包含`N`类型的成员变量`M_i, i = 1 ... N`，每个变量都有一个**通用的只写** `update()`接口以及**特定于类的只读**访问器函数`[F]un_i(), [F] = any letter, i = 1 .. N`（实际上它们没有这样的常规名称）。每个成员类型都`M_i`形成了自己的独立抽象，并在我的程序的其他地方使用。

聚合类需要在一个事务中更新所有成员，所以它有一个`update()`自己的函数调用它`update()`的所有成员变量的成员函数。

```
// building blocks M_i, i = 1 ... N

class M_1
{
public:
    // common write-only interface
    void update();

    // M_1 specific read-only interface
    int fun_1() const;
    // ...
    int fun_K() const;

private:
    // impl
};

// ...

class M_N
{
public:
    // common write-only interface
    void update();

    // M_N specific read-only interface
    int gun_1() const;
    // ...
    int gun_K() const;

private:
    // impl
};

// aggregate containing member variables M_i, i = 1 ... N
class C
{
public:
    // update all members in a single transaction
    void update() 
    {
        m1_.update();
        // ...
        mN_.update();
    }

    // read-only interface?? see below

private:
    M_1 m1_;
    // ...
    M_N mN_;
}; 
```

**问题**：我是否可以访问聚合类中各种成员变量的各种成员函数？我可以想到**三种选择**：

**备选方案 1**：将`N * K`委托写入所有成员变量`K`的所有成员函数`N`

```
class C
{
    int fun_1() const { return m1_.fun_1(); }
    // ...
    int fun_K() const { return m1_.fun_K(); }

    // ...

    int gun_1() const { return mN_.gun_1(); }
    // ...
    int gun_K() const { return mN_.gun_K(); }

    // as before
};

int res = C.fun_5(); // call 5th member function of 1st member variable 
```

**备选方案 2**`N` ：对所有`N`成员变量写入访问器

```
class C
{
    M_1 const& m1() const { return m1_; }

    // ...

    M_N const& mN() const { return mN_; }

    // as before
};

int res = C.m1().fun_5(); // call 5th member function of 1st member variable 
```

**备选方案 3**：将`1`访问器模板写入所有`N`成员变量

```
class C
{
public:
    enum { m1, /* ... */ mN };

    template<std::size_t I>
    auto get() const -> decltype(std::get<I>(data_)) 
    { 
        return std::get<I>(data_); 
    }

private:
    std::tuple<M_1, /* ... */ M_N> data_;
};

int res = C.get<m1>().fun_5(); // call 5th member function of 1st member variable 
```

备选方案 1 避免违反**得墨忒耳定律，**但它需要大量繁琐的样板代码（在我的应用程序中，`N = 5`并且`K = 3`，因此`15`委托包装器）。备选方案 2 减少了包装器的数量，但调用代码对我来说有点难看。但是由于所有这些代码都是只读的，并且修改只能通过一致的聚合发生`update()`，所以我目前认为替代方案 2 比替代方案 1 更可取（并且至少是安全的）。如果是这种情况，那么更进一步，备选方案 3 应该是最佳选择，因为它只使用一个访问器并且具有与备选方案 2 相同的安全保证。

**问题**：这种代码的首选接口是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:11:22.430

另一种可能性是

```
int func(int i, int j); // i,j can be enums as well.. 
```

尽管您需要确定这对您是否有意义。你需要在里面写一个巨大的嵌套开关，但界面更简单。

如果您可以将对象存储在数组中，并且所有成员函数都是`M_i`类型的公共接口的一部分，则此方法当然是理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:20:34.037

为您提供具有编译时调用分辨率的最佳用户友好代码的解决方案必须依赖模板。

实际上，如果您希望能够`fun(i,j)`（实际上`fun<i,j>()`）调用 where`i`是成员变量`j`的索引和该变量的成员函数的索引，那么您必须定义映射。两种映射。

*   首先是成员变量索引和变量本身之间的映射，即成员变量索引和变量类型之间的映射。

*   成员函数索引和成员函数本身之间的第二个映射。但是，由于此映射取决于索引成员变量的类型，因此必须为每个组合定义它。如果不定义此映射，您将无法为用户提供完全索引的解决方案。*或者反过来*：如果您不想让调用者为第 i 个变量的类型而烦恼，以知道他要调用的第 j 个函数的名称是什么（这取决于 i 的类型-th 变量），那么您必须提供映射。

这样，用户将能够在`int v = c.fun<i, j>()`不知道第 i 个变量的类型的情况下调用，也不知道这个第 i 个变量的第 j 个函数的名称。

```
template <typename M, int K> int fun(M const & m) const;

template <> int fun<M_1, 1>(M_1 const & m) const { return m.fun_1(); }
template <> int fun<M_1, 2>(M_1 const & m) const { return m.fun_2(); }
template <> int fun<M_1, 3>(M_1 const & m) const { return m.fun_3(); }

template <> int fun<M_2, 1>(M_2 const & m) const { return m.fun_1(); }
template <> int fun<M_2, 2>(M_2 const & m) const { return m.fun_2(); }
template <> int fun<M_2, 3>(M_2 const & m) const { return m.fun_3(); } 
```

...

```
class C
{
    // Define the specialized class type for every N
    template <int N> class Mi { typedef void M; };
    template <> class Mi<1> { typedef M_1 M; };
    template <> class Mi<2> { typedef M_2 M; };
    template <> class Mi<3> { typedef M_3 M; };

    // Define the function to get the member N
    template <int N> Mi<N>::M const & get_M() const;
    template <> Mi<1>::M const & get_M() { return m1; } const;
    template <> Mi<2>::M const & get_M() { return m2; } const;
    template <> Mi<3>::M const & get_M() { return m3; } const;

    // Define the member function to call member N, function K
    template <int N, int K>
    int fun() { return fun<Mi<N>::M, K>( get_M<N>(); }

}; 
```

现在，如果您希望用户可以使用`i`和`j`作为运行时变量进行调用，那么这不是要走的路。更喜欢一个`int fun(i, j)`有很多`if`和的函数`switch`。你不能两者兼得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:58:59.967

我会将更新行为与单个元素功能完全分开。所有 M_i 类都应该实现一个仅包含更新方法的可更新接口。

这允许您安全地将 N 个访问器公开给（非 const）可更新接口。

```
class Updatable{

public:
  virtual void update() = 0;
} ; 

class M_i : public Updatable{

public:
 void update();

}; 
```

给定聚合类 C，您可以：

*   向 const M_i 类公开 N 访问器

*   请求给定 M_i 类的可更新接口。通过访问这个（非常量）引用，您可以安全地向任何 M_i 实例发布更新。

*   直接调用委托更新。

.

```
class C{
    public:
              /** Returns the updatable interface related to M_1 */
              Updatable& getM_1Updater(){ return M_1}

              /** Returns the const reference to M_1*/
              const M_1& getM_1() const { return M_1}

              /** delegates update to each contained element */
              void update(){

                  m1.update();
                  m2.update();

                  [...]
              }

            }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:30:49.227

将我的评论变成答案。

如果您决定使用替代 1（N*K 代表），您可以使用[Boost.Preprocessor](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/index.html)为您完成样板工作：

```
#include <boost/preprocessor.hpp>

// Define identifier names

#define FUNCTIONS (fun)(gun)(hun)

#define MEMBER_NAMES (m1_)(m2_)(m3_)

#define SUFFIXES (_1)(_2)(_3)

// Utility "data structure"
// Used to hand down state from iteration over functions to iteration over suffixes

#define WRAP_DATA(function, member) \
  (2, (function, member))

#define UNWRAP_DATA_FUNTION(data) \
  BOOST_PP_ARRAY_ELEM(0, data)

#define UNWRAP_DATA_MEMBER(data) \
  BOOST_PP_ARRAY_ELEM(1, data)

// Accessor-generating functionality

  // Convenience macro for generating the correct accessor name
#define CREATE_FUNCTION_NAME(data, suffix) \
  BOOST_PP_CAT(UNWRAP_DATA_FUNCTION(data), suffix)

  // Macro generating one accessor delegation
#define GENERATE_ACCESSOR(r, data, suffix) \
  int CREATE_FUNCTION_NAME(data, suffix) () const { return UNWRAP_DATA_MEMBER(data).CREATE_FUNCTION_NAME(data, suffix) (); }

// Generate accessors

class C
{

  // Execute GENERATE_ACCESSOR once for each element of SUFFIXES
#define BOOST_PP_LOCAL_MACRO(iter) \
  BOOST_PP_SEQ_FOR_EACH(GENERATE_ACCESSOR, WRAP_DATA(BOOST_PP_SEQ_ELEM(iter, FUNCTIONS), BOOST_PP_SEQ_ELEM(iter, MEMBER_NAMES)), SUFFIXES)

#define BOOST_PP_LOCAL_LIMITS (0, BOOST_PP_SEQ_SIZE(FUNCTIONS) - 1)

  // Execute BOOST_PP_LOCAL_MACRO once for each value within BOOST_PP_LOCAL_LIMITS
#include BOOST_PP_LOCAL_ITERATE()

// rest of class C here
// ...

}; 
```

翻译成伪代码以更好地突出工作逻辑：

```
FUNCTIONS = {fun, gun, hun};
MEMBER_NAMES = {m1_, m2_, m3_};
SUFFIXES = {_1, _2, _3};

struct Data {
  auto function, member;
};

auto createFunctionName(data, suffix) {
  return data.function + suffix;
}

auto generateAccessor(data, suffix) {
  return "int " + createFunctionName(data, suffix) + "() const { return " + data.member + "." + createFunctionName(data, suffix) + "(); }";
}

class C
{

for (i = 0; i < sizeof(FUNCTIONS); ++i) {
  foreach (suffix in SUFFIXES) {
    generateAccessor(Data(FUNCTIONS[i], MEMBER_NAMES[i]), suffix);
  }
}

}; 
```

# ruby-on-rails - 将属性列表添加到表单中的集合

> ID：14932681
> 
> 赞同：0
> 
> 时间：2013-02-18T09:06:25.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的目标是在表单中创建一个下拉框，为用户提供已经可用的所有“专业”列表。

我有一个指南模型，这个模型有一个属性：specialty，但我不知道如何在我的表单中添加这个视图/指南/_form.html.erb（我使用的是 simple_form）

**指南控制器.rb**

*def listspecialty*

```
@speclist = Guideline.order(:specialty).uniq.pluck(:specialty) 
```

*def topicspecialty*

```
 @guidelines = Guideline.find_all_by_specialty(params[:specialty]) 
```

**意见/指南**

*新的.html.erb*

```
<%= render 'form', speclist: @speclist %> 
```

*_form.html.erb*

```
<%= f.input :specialty, as: :select, collection: speclist %> 
```

*listspecialty.html.erb*

```
 <% @speclist.each do |specialty| %>
<%= link_to specialty, :action => :topicspecialty, :specialty => specialty %> 
```

**路线**

```
get "guidelines/listspecialty"
  get "guidelines/topicspecialty"
  match "specialty", to: "guidelines#listspecialty", as: :specialty
  get '/:id', to: 'guidelines#topic'
  get '/:id', to: 'guidelines#topicspecialty' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:07:30.347

`simple_form`试试这个：

```
<%= f.input :specialty, as: :select, collection: @list %> 
```

您还可以将数组代码简化为：

```
@list = @guidelines.map(&:specialty).uniq 
```

或者，如果您正在获取指南，`@list`那么请执行以下操作：

```
@list = Guideline.order(:specialty).uniq.pluck(:specialty) 
```

要传递`@list`给您的表单，您可能必须将其传递给部分：

```
# guidelines controller
def list_specialty
  #some code
  @list = Guideline.order(:specialty).uniq.pluck(:specialty)
end

# routes, something like:
match "specialty", to: "guidelines#list_specialty", as: :specialty

# where you add your partial
<%= render 'form', list: @list %>

# then in your form
<%= f.input :specialty, as: :select, collection: list %> 
```

### 更新

`new.html.erb`与`guidelines#new`动作相关，因此您想在视图中使用的任何代码也应该在动作中，例如：

```
# guidelines controller
def new
  @specialties = Guideline.order(:specialty).uniq.pluck(:specialty)
  @guideline = Guideline.new
end

# in guidelines/new.html.erb
<%= simple_form_for @guideline do |f| %>
  <%= f.input :some_attr %>
  <%= f.input :specialty, as: :select, collection: @specialties %>
  ....
<% end %> 
```

# ios - 防止调整 UINavigationController 的大小

> ID：14932684
> 
> 赞同：1
> 
> 时间：2013-02-18T09:06:35.387
> 
> 标签：ios, uinavigationcontroller, ipad

我尝试为 iPad 应用程序实现自定义拆分视图。

在左侧，我有一个包含导航的 ViewController。右侧应包含带有导航栏的 NavigationController。当我初始化 NavigationController 时，我将框架设置为正确的宽度：

```
FirstViewController *firstView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    [firstView.view setFrame:CGRectMake(186, 0, 838, 748)];
    [firstView.view setAutoresizesSubviews: NO];

UINavigationController navController = [[UINavigationController alloc] initWithRootViewController:firstView];
        [navController.view setFrame:CGRectMake(186, 0, 838, 748)];
        navController.navigationBar.topItem.title = @"Title"; 
```

但是在 viewWillAppear 和 viewDidAppear 之间的某个地方，来自 navController.view 的 frame.width 变回了 1094 像素。所以我的标题标签没有正确居中（在可见区域内）。我可以阻止 NavigationController 调整大小吗？我已经尝试过 setAutoresizesSubviews: NO 但这似乎不起作用。

# java - Java：什么被认为更具可读性，“这个”或没有“这个”

> ID：14932697
> 
> 赞同：9
> 
> 时间：2013-02-18T09:07:22.040
> 
> 标签：java, coding-style, this, readability

您实际上不需要在 Java 中编写“this”关键字。但是这样做更好吗？使您的风格同质化是否有意义，即如果您使用“this”一次，则每次暗示它时都使用它？或者是否有一个地方你会一直使用它而其他地方你从不使用它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T09:08:25.177

一般的共识是，您应该`this`只在必要时使用，而不是在任何其他时间使用。

```
private String param;
public Construct(String param) {
  // Usually the only place you need to use this.
  this.param = param;
}

// A less common use of this
public Function() {
  synchronized(this) {
    // Some synchronized stuff.
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T09:37:51.823

作为一项规则，我倾向于不使用它——如果你可以减少冗余代码那就更好了。

但是，我可以想到三个无法避免 this 关键字的地方：

*   构造函数（委托给同一类中的另一个构造函数）

    ```
    public MyClass() {
        this("Default Parameter"); 
    ```

*   在当前对象上同步

    `synchronized(this) {`

*   将当前对象传递给另一个类

    ```
    public void methodOne() {
        anotherClass.doSomething(this); 
    ```

您有时在字段名称与参数相同的构造函数中需要它，但这并不是强制性的，因为您可以简单地重命名参数：

```
public MyClass(String data) {
    this.data = data 
```

除了这些，我想不出太多其他我会使用`this`关键字的场景。我已经看到它被过度使用（在每个方法和字段引用上），这会使代码非常难以阅读。

仅在必要时使用它，或者当您认为它可以提高代码可读性时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T09:14:25.513

作为一般规则，您应该避免出现多余的语法。你会读到很多相反的观点，主要是指一个完全神话般的程序员，他不知道成员变量，不知道括号的用途，也不记得他在第三节教过的运算符优先规则年级。40年来我从未见过他。假设他将（a）不理解它并（b）因此破坏它，这不足以证明为他毁容您的代码是合理的。我从来没有见过这种情况发生。

我*看到*的是这样一个人制作的代码。这不是为他简化您自己的代码的理由。有人实际上错误地重写了我的一段代码的情况恰好有两次：一次是在 1979 年，有人重构了一个语法以删除运算符优先级，这很愚蠢，他不应该这样做它，还有一次是在 1992 年左右，但在这两种情况下，我都无法编写可以阻止它的语法或代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T09:10:36.780

代码中有一些地方不能跳过`this`关键字，例如 setter：

```
public void setValue(String value) {
    this.value = value;
} 
```

但如果可能的话，最好跳过：

```
public String getValue() {
    return value;
} 
```

# java - REST 文件上传 - 多部分或仅在输入流上发送内容

> ID：14932701
> 
> 赞同：2
> 
> 时间：2013-02-18T09:07:31.057
> 
> 标签：java, rest, jersey, multipartform-data

我需要编写应该接收文件并将其保存到磁盘的 REST 资源。
这些文件将从泽西客户端发送。
现在，我看到两个选项：
1\. 使用多部分
2\. 只需将输入流作为字符串读取并将其保存到文件中。

使用多部分的优点是什么？它与文件大小有关吗？还是别的什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:46:45.757

如果您使用 Jersey 服务器端，则使用 multipart 可以获得

*   磁盘缓冲（当然你不想在内存中保留大文件）
*   自动base64/二进制流转换

如果您选择字符串选项，这些好处将不可用。

另请参阅我对问题[JAX-RS Accept Images as input](https://stackoverflow.com/questions/14858321/jax-rs-accept-images-as-input)的回答，有一个 multipart 选项的示例实现

# iphone - 解析 - 应用程序终止错误

> ID：14932702
> 
> 赞同：0
> 
> 时间：2013-02-18T09:07:36.960
> 
> 标签：iphone, ios, ios6, parse-platform

在我的聊天应用程序中，它在运行时显示以下解析错误，

```
 Trying to retrieve from cache
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This query has an outstanding network connection. You have to wait until it's done.' 
```

这是怎么回事，请帮帮我？提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:11:26.327

（为清楚起见，OP 指的是[parse.com](http://parse.com) BaaS SDK）。

您可能正在尝试做某事一段`PFQuery`时间，因为它处于上一个操作的中间。解析对象一次只能执行一个网络操作。查看您的代码以查看您是否对同一个查询对象进行了两次查询调用，而无需等待第一次完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:37:36.860

您可能正在使用旧版本的 Parse iOS SDK。更新到最新版本应该可以解决此问题。

# python - Python如何实现保持cmdA执行直到cmdB一个cmdC完成

> ID：14932704
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:07:44.850
> 
> 标签：python

我想在执行 cmd B 和 cmd C 时记录一些信息。我的想法是，在cmd B和cmd C启动之前执行cmd A（cmd A是记录信息），然后在cmd B和cmd C完成时暂停cmd A。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:22:52.897

您可以从 cmdA 函数运行 cmdB 和 cmdC 函数。

```
def cmdB():
     pass

def cmdC():
    pass

def cmdA():
    # start recording information
    print "recording started"
    #run cmdB
    cmdB()
    # run cmdC
    cmdC()
    # stop recording
    print "recording stopped"

if __name__ == '__main__':
    cmdA() 
```

# jquery - 如何在滑块 jquery 对象中停止事件“更改”传播

> ID：14932706
> 
> 赞同：0
> 
> 时间：2013-02-18T09:07:47.363
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我需要了解如何停止事件传播，特别是滑块的“更改”传播。通常，在我的应用程序中，当

*   我直接在栏上移动滑块；
*   `$("#idPlayerSlider").slider("value", nNewPosition);`我在代码中的某处使用此命令更改滑块位置。

这是滑块：

```
$("#idPlayerSlider").slider({
  orientation: "horizontal",
  range: "min",
  max: nPlayerTime,
  value: PLAYER_VIEW.TIMESTAMP_TOTAL,
  change: seekPlayerVideo
}); 
```

这是我更改滑块值的操作：

```
$("#idPlayerSlider").slider("value", nNewPosition); 
```

问题是：当我设置滑块的新值时，有没有办法停止更改传播？因为我需要在真正的滑块上移动它时调用更改回调，但是如果我强制一个新值，我希望不再调用这个回调。所以需要停止它的传播。我能怎么做？先感谢您。

# web - 如何使用 Paypal 网站付款标准为非美国网站设置运费

> ID：14932711
> 
> 赞同：0
> 
> 时间：2013-02-18T09:08:01.497
> 
> 标签：web, paypal, standards, payment, shipping

我正在制作我的第一个电子商务网站，它只是基本的和少量的。我使用了带有购物车上传功能的 Paypal Website Payments Standard 来与 Paypal 集成。但是有一个问题，在用户在 Paypal 中输入他们的地址之前，我无法提供运费估算，并且在不使用 Paypal Express Checkout 的情况下，我看不到一种设施可以根据国家/地区对适当的运费进行某种回调到我的网站。运费只能由 Paypal 上的商家资料中的商品成本指定，我的客户只希望在新西兰有一个价格，在澳大利亚有一个价格，在所有其他国家/地区有一个价格。有小费吗？还是只有在将购物车上传到 Paypal 之前不获取用户地址信息的情况下，Paypal Express 才是唯一的方式？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:44:35.773

快递是为您提供运输回调设施的最低产品。Payments Standard 没有类似功能。

由于您只有三个区域，因此您可以在不需要完整地址的情况下索取并提供下拉列表...然后在 IPN 处理程序中进行有效性检查以保留订单，如果他们在法国并选择了新西兰国内。

# c# - 在 Entity Framework 5 Code First 中覆盖 SaveChanges 以复制旧遗留库的行为

> ID：14932715
> 
> 赞同：10
> 
> 时间：2013-02-18T09:08:18.263
> 
> 标签：c#, entity-framework, entity-framework-5, code-first, savechanges

我们公司提供了一套处理数据库中数据的各种应用程序。每个应用程序都有其特定的业务逻辑，但所有应用程序共享一个公共的业务规则子集。常见的东西被封装在一堆用 C++ 编写的遗留 COM DLL 中，它们使用“经典 ADO”（它们通常调用存储过程，有时它们使用动态 SQL）。这些 DLL 中的大多数都具有基于 XML 的方法（更不用说基于专有格式的方法！）来创建、编辑、删除和检索对象，以及额外的操作，例如快速复制和转换许多实体的方法。

中间件 DLL 现在已经很老了，我们的应用程序开发人员想要一个新的面向对象（不是面向 xml）的中间件，它可以很容易地被 C# 应用程序使用。公司里的很多人说我们应该忘记旧的范式，转向新的酷东西，比如实体框架。他们对 POCO 的简单性很感兴趣，并希望使用 LINQ 来检索数据（DLL 的基于 Xml 的查询方法并不那么容易使用，并且永远不会像 LINQ 那样灵活）。

所以我试图为一个简化的场景创建一个模型（真实的场景要复杂得多，在这里我将只发布简化场景的一个简化子集！）。我正在使用 Visual Studio 2010、Entity Framework 5 Code First、SQL Server 2008 R2。如果我犯了愚蠢的错误，请原谅，我是实体框架的新手。由于我有很多不同的疑问，我将它们发布在单独的线程中。这是第一个。旧版 XML 方法具有如下签名：

```
 bool Edit(string xmlstring, out string errorMessage) 
```

使用这样的格式：

```
<ORDER>
    <ID>234</ID>
    <NAME>SuperFastCar</NAME>
    <QUANTITY>3</QUANTITY>
    <LABEL>abc</LABEL>
</ORDER> 
```

Edit 方法实现了以下业务逻辑：当 Quantity 发生变化时，必须对所有具有相同 Label 的 Orders 应用“自动缩放”。例如，有三个订单：OrderA 的数量 = 3，标签 = X。OrderB 的数量 = 4，标签 = X。OrderC 的数量 = 5，标签 = Y。我调用 Edit 方法，为 OrderA 提供一个新的数量 = 6，即，我将 OrderA 的数量增加一倍。那么，按照业务逻辑，OrderB的数量一定是自动加倍的，一定是8个，因为OrderB和OrderA的label是一样的。不得更改 OrderC，因为它具有不同的标签。

如何使用 POCO 类和实体框架复制它？这是一个问题，因为旧的 Edit 方法一次只能更改一个订单，而 Entity Framework 在调用 SaveChanges 时可以更改很多订单。此外，对 SaveChanges 的一次调用也可以创建新订单。临时假设，仅用于本次测试： 1) 如果多个 Order Quantities 同时更改，且缩放因子对于所有它们都不相同，则不会发生缩放；2) 新添加的订单即使与缩放订单的标签相同，也不会自动缩放。

我试图通过覆盖 SaveChanges 来实现它。

POCO 类：

```
using System;

namespace MockOrders
{
    public class Order
    {
        public Int64 Id { get; set; }
        public string Name { get; set; }
        public string Label { get; set; }
        public decimal Quantity { get; set; }
    }
} 
```

迁移文件（创建索引）：

```
namespace MockOrders.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

    public partial class UniqueIndexes : DbMigration
    {
        public override void Up()
        {
            CreateIndex("dbo.Orders", "Name", true /* unique */, "myIndex1_Order_Name_Unique");
            CreateIndex("dbo.Orders", "Label", false /* NOT unique */, "myIndex2_Order_Label");
        }

        public override void Down()
        {
            DropIndex("dbo.Orders", "myIndex2_Order_Label");
            DropIndex("dbo.Orders", "myIndex1_Order_Name_Unique");
        }
    }
} 
```

数据库上下文：

```
using System;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration;
using System.Linq;

namespace MockOrders
{
    public class MyContext : DbContext
    {
        public MyContext() : base(GenerateConnection())
        {
        }

        private static string GenerateConnection()
        {
            var sqlBuilder = new System.Data.SqlClient.SqlConnectionStringBuilder();
            sqlBuilder.DataSource = @"localhost\aaaaaa";
            sqlBuilder.InitialCatalog = "aaaaaa";
            sqlBuilder.UserID = "aaaaa";
            sqlBuilder.Password = "aaaaaaaaa!";
            return sqlBuilder.ToString();
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new OrderConfig());
        }

        public override int SaveChanges()
        {
            ChangeTracker.DetectChanges();

            var groupByLabel = from changedEntity in ChangeTracker.Entries<Order>() 
                        where changedEntity.State == System.Data.EntityState.Modified
                                && changedEntity.Property(o => o.Quantity).IsModified
                                && changedEntity.Property(o => o.Quantity).OriginalValue != 0
                                && !String.IsNullOrEmpty(changedEntity.Property(o => o.Label).CurrentValue)
                        group changedEntity by changedEntity.Property(o => o.Label).CurrentValue into x
                        select new { Label = x.Key, List = x};

            foreach (var labeledGroup in groupByLabel)
            {
                var withScalingFactor = from changedEntity in labeledGroup.List 
                    select new 
                    { 
                        ChangedEntity = changedEntity, 
                        ScalingFactor = changedEntity.Property(o => o.Quantity).CurrentValue / changedEntity.Property(o => o.Quantity).OriginalValue 
                    };

                var groupByScalingFactor = from t in withScalingFactor 
                                           group t by t.ScalingFactor into g select g;

                // if there are too many scaling factors for this label, skip automatic scaling
                if (groupByScalingFactor.Count() == 1)
                {
                    decimal scalingFactor = groupByScalingFactor.First().Key;
                    if (scalingFactor != 1)
                    {
                        var query = from oo in this.AllTheOrders where oo.Label == labeledGroup.Label select oo;

                        foreach (Order ord in query)
                        {
                            if (this.Entry(ord).State != System.Data.EntityState.Modified
                                && this.Entry(ord).State != System.Data.EntityState.Added)
                            {
                                ord.Quantity = ord.Quantity * scalingFactor;
                            }
                        }
                    }
                }

            }

            return base.SaveChanges();

        }

        public DbSet<Order> AllTheOrders { get; set; }
    }

    class OrderConfig : EntityTypeConfiguration<Order>
    {
        public OrderConfig()
        {
            Property(o => o.Name).HasMaxLength(200).IsRequired();
            Property(o => o.Label).HasMaxLength(400);
        }
    }
} 
```

它似乎有效（当然排除错误），但这是一个只有 1 个类的示例：一个真正的生产应用程序可能有数百个类！恐怕在现实场景中，由于有很多约束和业务逻辑，SaveChanges 的覆盖可能很快变得冗长、混乱且容易出错。一些同事也关心性能。在我们遗留的 DLL 中，许多业务逻辑（例如“自动”操作）存在于存储过程中，一些同事担心基于 SaveChanges 的方法可能会引入过多的往返并影响性能。在 SaveChanges 的覆盖中，我们还可以调用存储过程，但是事务完整性呢？如果我在调用“base.SaveChanges()”之前对数据库进行了更改，并且“base.SaveChanges()”失败了怎么办？

有不同的方法吗？我错过了什么吗？

非常感谢你！

德米特里奥

ps 顺便问一下，覆盖 SaveChanges 和注册到“SavingChanges”事件之间有区别吗？我阅读了这份文件，但它没有解释是否有区别： http: [//msdn.microsoft.com/en-us/library/cc716714 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc716714(v=vs.100).aspx)

这篇文章： [实体框架 SaveChanges - 自定义行为？](https://stackoverflow.com/questions/6797895/entity-framework-savechanges-customize-behavior)

说“当覆盖 SaveChanges 时，您可以在调用 base.SaveChanges 之前和之后放置自定义逻辑”。但是还有其他警告/优点/缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:33:24.293

我想说这个逻辑要么属于你的 MockOrders.Order 类，要么属于使用你的 Order 类（例如 BusinessLogic.Order）的更高层的类，要么属于 Label 类。听起来您的标签充当连接属性，因此，在不知道细节的情况下，我会说将其拉出并使其成为自己的实体，这将为您提供导航属性，因此您可以更自然地访问具有相同标签的所有订单.

如果修改数据库以规范化标签不是一个行家，请为此构建一个视图并将其带入您的实体模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T22:24:25.287

我不得不做类似的事情，但我创建了一个`IPrepForSave`接口，并为需要在保存之前执行一些业务逻辑的任何实体实现了该接口。

接口（请原谅 VB.NET）：

```
Public Interface IPrepForSave
    Sub PrepForSave()
End Interface 
```

dbContext.SaveChanges 覆盖：

```
Public Overloads Overrides Function SaveChanges() As Integer
    ChangeTracker.DetectChanges()

    '** Any entities that implement IPrepForSave should have their PrepForSave method called before saving.
    Dim changedEntitiesToPrep = From br In ChangeTracker.Entries(Of IPrepForSave)()
                                Where br.State = EntityState.Added OrElse br.State = EntityState.Modified
                                Select br.Entity

    For Each br In changedEntitiesToPrep
        br.PrepForSave()
    Next

    Return MyBase.SaveChanges()
End Function 
```

然后我可以将业务逻辑保留在实体本身中，在实现的`PrepForSave()`方法中：

```
Partial Public Class MyEntity
    Implements IPrepForSave

    Public Sub PrepForSave() Implements IPrepForSave.PrepForSave
        'Do Stuff Here...
    End Sub

End Class 
```

请注意，我对方法中可以执行的操作设置了一些限制`PrepForSave()`：

1.  对实体的任何更改都不会使实体验证逻辑失败，因为这将在调用验证逻辑之后调用。
2.  数据库访问应该保持在最低限度，并且应该是只读的。
3.  任何在保存前不需要做业务逻辑的实体都不应该实现这个接口。

# java - 仅在 Java 中生成随机的“深色”颜色

> ID：14932718
> 
> 赞同：2
> 
> 时间：2013-02-18T09:08:27.523
> 
> 标签：java, swing, random, colors

所以我有以下方法来生成我在应用程序中使用的随机颜色：

```
public final Color generateRandomColour() {

    return Color.getHSBColor(new Random().nextFloat(),
            new Random().nextFloat(), new Random().nextFloat());
} 
```

我得到了一系列不同的颜色，但是当我使用这些颜色在 Swing 中用浅色背景绘制“矩形”时，我对生成相对较暗的颜色感兴趣。背景是浅灰色的，所以有时生成的随机颜色也是浅灰色的，这使得很难看到矩形。

我试图对最大浮点值设置一个上限，但它似乎并没有让我只看到更深的颜色。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:14:24.030

你可以试试：

```
public final Color generateDarkColor() {
  return generateRandomColour().darker();
} 
```

另请参阅[http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#darker()](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#darker())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:23:17.237

这似乎有效。注意使用相同的实例`Random`！第一张图片将 HSB 的 B 限制为 0.5f，而第二张图片显示了使用的效果`Color.darker()`。

![图像 HSB](../Images/39cf5a61ef4c70fc813e52a89af57504.png) ![颜色.darker()](../Images/12905b3323a332804ea1d6b273652e06.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.util.Random;
import java.util.logging.*;
import javax.imageio.ImageIO;
import java.io.*;

class DarkHSB {

    float darker = .5f;
    Random r = new Random();

    public final Color generateRandomColor(boolean useHsbApi) {
        float brightness = (useHsbApi ? r.nextFloat() * darker : r.nextFloat());
        // Random objects created sequentially will have the same seed!
        Color c = Color.getHSBColor(
                r.nextFloat(),
                r.nextFloat(),
                brightness);
        if (!useHsbApi) c = c.darker();
        return c;
    }

    public void paint(Graphics g, int x, int y, int w, int h, boolean useApi) {
        g.setColor(generateRandomColor(useApi));
        g.fillRect(x,y,w,h);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                final JPanel gui = new JPanel(new GridLayout(0,1));

                final DarkHSB dhsb = new DarkHSB();
                int w = 300;
                int h = 100;

                BufferedImage hsb = new BufferedImage(w,h,BufferedImage.TYPE_INT_RGB);
                Graphics g = hsb.getGraphics();
                int sz = 5;
                for (int xx=0; xx<w; xx+=sz) {
                    for (int yy=0; yy<h; yy+=sz) {
                        dhsb.paint(g,xx,yy,sz,sz,true);
                    }
                }
                g.dispose();

                BufferedImage darker = new BufferedImage(w,h,BufferedImage.TYPE_INT_RGB);
                g = darker.getGraphics();
                for (int xx=0; xx<w; xx+=sz) {
                    for (int yy=0; yy<h; yy+=sz) {
                        dhsb.paint(g,xx,yy,sz,sz,false);
                    }
                }
                g.dispose();

                gui.add(new JLabel(new ImageIcon(hsb)));
                gui.add(new JLabel(new ImageIcon(darker)));

                JOptionPane.showMessageDialog(null, gui);

                File userHome = new File(System.getProperty("user.home"));
                File img = new File(userHome,"image-hsb.png");
                dhsb.saveImage(hsb,img);
                img = new File(userHome,"image-darker.png");
                dhsb.saveImage(darker,img);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }

    public void saveImage(BufferedImage bi, File file) {
        try {
            ImageIO.write(bi, "png", file);
        } catch (IOException ex) {
            Logger.getLogger(DarkHSB.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:12:11.743

你可以使用`%`：

```
new Random().nextFloat() % maxValue; 
```

编辑：没有看到您正在使用 HSB（色相饱和度亮度）。只需减少最后一个值就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T09:15:12.787

尝试在另一个颜色空间中生成颜色坐标，然后转换为 RGB。建议您使用[LAB 颜色空间](https://en.wikipedia.org/wiki/Lab_color_space)。如果你保持 L 低，那么你会得到深色。

我没有检查过，但看起来可以通过 JDK 中的[ColorSpace](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/color/ColorSpace.html)类完成到 RBG 的转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:21:23.367

我从未使用过 hsb 模型，但 HSB 模型中的第三个值是亮度，所以你需要做的就是限制第三个值的范围。这取决于你想要多深的颜色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T09:27:45.840

这应该生成相对较暗的颜色。

```
 Random r = new Random();
    Color c = new Color(r.nextInt(100),r.nextInt(100),r.nextInt(100)); 
```

# ios - 多个 UIWebView 以及单个视图控制器中的边框

> ID：14932721
> 
> 赞同：1
> 
> 时间：2013-02-18T09:08:48.170
> 
> 标签：ios, objective-c, uiwebview

我是 iOS 新手，并且正在使用，`UIWebView`因为我在单视图控制器中创建了两个 Web 搜索。但它只需要一次搜索，即下面的代码中的 www.apple.com，并且没有为两个视图创建边框。

这是代码。

```
- (void)viewDidLoad
{
[super viewDidLoad];
webview=[[UIWebView alloc]initWithFrame:CGRectMake(60, 0,500,350)];
[webview setBackgroundColor:[UIColor blueColor]];

CALayer *webViewLayer = webview.layer;
[webViewLayer setBorderColor: [[UIColor greenColor] CGColor]];
[webViewLayer setBorderWidth: 2.75];  

NSString *url=@"http://www.google.com";
NSURL *nsurl=[NSURL URLWithString:url];
NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
[webview loadRequest:nsrequest];
[self.view addSubview:webview];
[webview setScalesPageToFit:YES];

webview2=[[UIWebView alloc]initWithFrame:CGRectMake(60, 400,500,350)];
   [webview2 setBackgroundColor:[UIColor redColor]];
NSString *url2=@"http://www.apple.com";
NSURL *nsurl2=[NSURL URLWithString:url2];
NSURLRequest *nsrequest2=[NSURLRequest requestWithURL:nsurl2];
[webview loadRequest:nsrequest2];
[self.view addSubview:webview2];
[webview setScalesPageToFit:NO];

CALayer *webViewLayer2 = webview2.layer;
[webViewLayer2 setBorderColor: [[UIColor greenColor] CGColor]];
[webViewLayer2 setBorderWidth: 2.75]; 

} 
```

# facebook-like - Facebook 喜欢按钮：弹出窗口中的预定义文本

> ID：14932723
> 
> 赞同：0
> 
> 时间：2013-02-18T09:09:00.487
> 
> 标签：facebook-like

我需要在单击“喜欢”时弹出的文本区域中指定一个预定义的文本。我怎样才能做到这一点？（我不是在谈论您可以使用 og:description 设置的描述）。

![在此处输入图像描述](../Images/aa4c5007fd82eeceec80d99146ab4ef0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:29:51.570

帖子的该部分填充了[内置的like](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/likes/)（来自您的应用程序）。我不认为有一种方法可以将文本添加到 facebook，除非分享它的人想要添加评论。如果您的应用程序具有特殊的 API 权限，那么您可能可以添加个性化消息。尽管如此，您必须申请并且申请目前已关闭。我希望这有帮助。

# scope - 在父视图/控件中更改实例化按钮的正确方法

> ID：14932724
> 
> 赞同：0
> 
> 时间：2013-02-18T09:09:02.993
> 
> 标签：scope, angularjs, parent, controllers

我正在创建一个单页 Web 应用程序，该应用程序具有一个用于整个页面（PageController）的控制器和用于两个视图（ViewController 和 EditController）的单独子控制器。

ViewController 在应用程序的标题栏中需要一个名为“Edit”的按钮，EditController 需要一个名为“Save”的按钮。这些按钮占据相同的空间，但具有不同的标签和不同的点击处理程序。标题栏属于父模板/控制器（即 PageController）范围。

实现此目的的一种方法是在父范围内创建按钮并让子控制器更改文本并覆盖 ng-click 处理程序 - 但我认为 Angular 可能有更好的方法。我想要一些方法让子控制器“注入”（不确定这是否是正确使用这个词）他们的按钮到父模板并在本地处理 onclick，使父不知道发生了什么子控制器...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:00:18.470

我会以不同的方式考虑您的“观点”。对我来说，标题栏是一个视图，就像你的视图和编辑视图一样。因此，它应该包含渲染您可能希望在该视图中显示的任何内容所需的所有 HTML，或者它应该知道要 ng-include 哪些文件。

视图由模型驱动。View 和 Edit 控制器应该调用在包含标题栏模型的任何控制器（或服务）上定义的方法，以适当地设置一些状态/属性。标题栏视图/HTML 将使用 ng-show/hide 或 ng-include 指令根据模型/$scope 的当前状态显示/包含适当的 HTML。

要在按钮单击时收到通知，查看和编辑范围可以 $watch 模型/$scope 属性以进行更改。例如， `<a ng-click="buttonState.clicked=true">...</a>` 我正在使用一个具有`clicked`属性的对象，以便子控制器可以重置其 $watch 回调中的值（如果使用了原语，则重置将不起作用——将创建一个新的子范围属性）：

```
$scope.$watch('buttonState.clicked', function() {
   buttonState.clicked = false
   ... handle button click here ...
} 
```

# java - 摆动焦点问题，失去焦点，未调用焦点增益

> ID：14932726
> 
> 赞同：4
> 
> 时间：2013-02-18T09:09:10.330
> 
> 标签：java, swing, focus, jdialog

我有一个复杂而繁重的摇摆客户端应用程序，其中包含许多模态组件、jdialogs、内部框架等。在某些情况下，会出现问题并且不可能再专注于摇摆文本字段。您可以单击一些 jbuttons、jcheckboxes，但不可能再在可编辑的 jtextfields 上聚焦和编辑值。不再触发可编辑文本字段的*gainfocus*事件，仅在您执行单击文本字段时调用*requestfocus方法。*我找到了一种方法（hack）来解决有问题的情况，当问题发生时，你会显示一些*joptionpane*消息或*模态 jdialog*并通过单击或处置将其关闭，您可以单击文本字段并对其进行编辑，问题就会消失。作为一种解决方案，我做了一些检查，如果您尝试关注某个组件，我会在单击的文本字段的 requestfocus 事件中启动一个计时器线程，并将该实例保留为**focusrequesting**组件。一段时间后，我通过以下方式检查最后一个重点组件

*KeyboardManager.getCurrentKeyboardFocusManager().getPermanentFocusOwner()*

如果没有出现问题，并且文本字段获得焦点，则返回的对象（getPermanentFocusOwner 的返回值）与焦点请求组件的实例**相同**。但是，如果发生有问题的情况，返回的对象与请求焦点的对象不同，我通过以下方式打开我的临时 jdialog：

```
JDialog dialog=new OptionPane().createDialog(KeyboardFocusManager.getCurrentFocusManager().getActiveWindow(), "");
dialog.setModal(true); 
// MUST be modal to fix the lost focus case
// start closing thread, which closes the dialog after some few time by dialog.dispose
new Closer(dialog).start();
dialog.setVisible(true); 
```

这个机制有效，我现在不是很稳定。在某些情况下，*dialog.dispose()*不起作用，临时窗口始终保持在屏幕上，不可关闭，并且因为它是模态的，客户端无法再执行任何操作。对话框必须是模态的才能解决焦点问题，因为非模态对话框不能解决上面声明的焦点问题。jdialog 的 dispose 方法有很多同步块、互斥对象等，我认为会出现一些死锁。

有更好的机制建议和想法吗？我知道最好的解决方案是检查当前的应用程序，分析它或重写它。但它非常复杂、沉重，模型和视图组织得不好。我的时间很短，因为客户正在等待，需要一些临时解决方案、技巧或技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:49:14.947

> 您可以单击一些 jbuttons、jcheckboxes，但不可能再在可编辑的 jtextfields 上聚焦和编辑值。

*   `JTextField`这是in`JWindow`没有父级 ( )的问题（很常见） ，请改用`JFrame`undecorated`JDialog`

*   我在这里看到了一些问题`Focus`，最后一个，但从未导致阻止用户输入到 JTextField`FocusSubsystem``Linux OS``Java version`

*   上午问题的最佳解决方法是[RequestFocusListener](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)`@camickr`

*   `dialog.setVisible(true);`应该包含在 中`invokeLater()`，更多请参见[Initial Thread（也适用于在运行时创建的所有顶级容器）](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   如果没有发布[SSCCE](http://sscce.org/)，您的问题就不清楚了，简短，可运行，可编译，演示，由 am 问题引起

# validation - cakephp notempty 和唯一的字段验证

> ID：14932739
> 
> 赞同：0
> 
> 时间：2013-02-18T09:09:45.623
> 
> 标签：validation, cakephp

我正在使用 cakephp。我需要在电子邮件字段上添加三个验证。如果未提供电子邮件，则首先进行验证，第二次验证有效的电子邮件地址，第三次如果提供了电子邮件地址，则它应该是唯一的。因为它是一个注册表单。

我如何在一个字段上添加三个验证我尝试使用以下代码，但它对我不起作用。

```
public $validate = array(
        'email' => array(
            'email' => array(
                'rule' => array('email'),
                'message' => 'Invalid email address',
                'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            )
        ),
        'email' => array(
                'rule'    => 'isUnique',
                'message' => 'Email already registered'
            ) 
); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T09:34:25.930

您有两个相同的索引“电子邮件”，PHP 不允许您这样做。更改为：-

```
array(
    'email' => array(
        'notEmpty' => array(
            'rule' => 'notEmpty',
            'message' => 'Provide an email address'
        ),
        'validEmailRule' => array(
            'rule' => array('email'),
            'message' => 'Invalid email address'
        ),
        'uniqueEmailRule' => array(
            'rule' => 'isUnique',
            'message' => 'Email already registered'
        )
    )
); 
```

否则只会使用您的规则之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-11T00:04:10.897

从实体表中的 cakephp 3.0 开始，它应该看起来像这样

```
namespace App\Model\Table;

public function validationDefault($validator)
{
$validator
    ->email('email')
    ->add('email', 'email', [
        'rule' => [$this, 'isUnique'],
        'message' => __('Email already registered')
    ])
    ->requirePresence('email', 'create')
    ->notEmpty('email', 'Email is Required', function( $context ){
        if(isset($context['data']['role_id']) && $context['data']['role_id'] != 4){
            return true;
        }
        return false;
    });
 return $validator;
 }
}

function isUnique($email){
$user = $this->find('all')
    ->where([
            'Users.email' => $email,
      ])
    ->first();
    if($user){
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:27:31.197

你用的是什么版本的 Cakephp？

因为我觉得如果你用2.3的话，应该是：

```
public $validate = array( 'email' => 'email' ); 
```

将 SQL 表中的字段 email 设置为主键。

# jquery - HTML 编辑器插件

> ID：14932742
> 
> 赞同：0
> 
> 时间：2013-02-18T09:09:53.807
> 
> 标签：jquery, html, jquery-plugins

我正在为我的应用程序寻找一个 html 编辑器插件 我的要求是我需要在文本框中输入时查看预览，例如堆栈溢出中的问题字段 我尝试了一些插件，但它们不支持预览功能.. ..有没有人知道的请分享..

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:30:30.383

试试这些插件：

[CK编辑器](http://ckeditor.com/)

[TinyMCE](http://www.tinymce.com/)

这两个工具都支持预览功能。

# c# - 如何使用 3 层架构动态调用存储过程？

> ID：14932743
> 
> 赞同：1
> 
> 时间：2013-02-18T09:09:54.413
> 
> 标签：c#, stored-procedures, 3-tier

其实我最近做了一个网络应用程序。我有大约 20 个存储过程 [用于插入、更新和删除]，大约 12 个存储过程具有不同数量的过程。

我为每一个操作都做了不同的功能，就像下面的代码一样。

```
#region Update Comment
public int Update_Comment(string Comment, string Leave_ID)
{
SqlCommand com = new SqlCommand("Update_Comments", con);
com.CommandType =CommandType.StoredProcedure;
com.Parameters.Add("@Comments",SqlDbType.NVarChar,1000).Value =Comment;
com.Parameters.Add("@Leave_ID", SqlDbType.NVarChar, 50).Value = Leave_ID;
con.Open();
int row = com.ExecuteNonQuery();
con.Dispose();
con.Close();
return row;

}
#endregion

#region Updating Leave after approval
public int Updating_Leave(string User_Id, string Leave_Type, int Leave_Applied)
{
SqlCommand com = new SqlCommand("Update_Leave", con);
com.CommandType =CommandType.StoredProcedure;
com.Parameters.Add("@User_Id",SqlDbType.NVarChar,50).Value = User_Id;
com.Parameters.Add("@Leave_Type", SqlDbType.NVarChar, 50).Value = Leave_Type;
com.Parameters.Add("@Leave_Applied", SqlDbType.Int).Value = Leave_Applied;
con.Open();
int row = com.ExecuteNonQuery();
con.Dispose();
con.Close();
return row;

}
#endregion 
```

有两个函数，第一个函数有 2 个参数，第二个函数有 3 个，但其余代码相同。

那么有没有可能，在 enum 和 param 的帮助下，我们可以减少我创建的函数的数量。所有 12 个函数都有不同数量的参数。

为此我喜欢下面

```
enum Operation_Type
{
Insert,
Update,
Delete,
Select
}

public void Do_Insert_Update_Delete(string Proc_Name, Operation_Type Type ,int No_Of_Args , params object[] args)
{
if(Operation_Type.Insert ==Type)
{
    SqlCommand com =new SqlCommand(Proc_Name,con);
    com.CommandType = CommandType.StoredProcedure;
    for(int i=1; i== No_Of_Args; i++)
    {
    com.Parameters.AddWithValue("sss",args);
    }
    con.Open();
    com.ExecuteNonQuery();
    con.Close();
    con.Dispose();

}

} 
```

但我不知道如何`Proc_Name`在这段代码中传递和参数。以及如何在业务逻辑层和 UI 中操作？

请告诉我。

# mysql - Mysql使用表中的if条件更新

> ID：14932746
> 
> 赞同：0
> 
> 时间：2013-02-18T09:10:00.897
> 
> 标签：mysql, if-statement, sql-update

我无法使用 UDPATE AND IF 条件更新表中的 2 个字段。需要帮忙。

我有一个发票表，如果字段 Nos=0 我需要从容量和字段 Nos=1 更新同一表中的字段 Qty。

我的 sql 语句不起作用：

```
UPDATE INVDTLS_draft1 SET `Nos`=1, `Qty`=`Capacity` IF (Nos=0) WHERE id=id 
```

错误信息：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'IF (Nos=0) WHERE id=id' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:11:42.797

试试这个查询，使用`AND`运算符

```
UPDATE INVDTLS_draft1 SET `Nos`=1, `Qty`=`Capacity` WHERE id=id AND Nos=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:13:17.927

试试这个：

```
UPDATE INVDTLS_draft1 SET 
Nos=1,
Qty = if(nos=0, capacity, Qty)
WHERE id=? 
```

如果 nos != 0，这对 qty “没有任何作用”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:19:02.803

为什么id=id？我认为你需要这个：

```
UPDATE INVDTLS_draft1
SET    `Nos`=1, `Qty`=`Capacity`
WHERE  Nos=0 
```

# android - 窗口管理器：WIN DEATH: Window{40c12c30 com.example.trackme/com.example.trackme.MainActivity paused=false}

> ID：14932748
> 
> 赞同：1
> 
> 时间：2013-02-18T09:10:13.837
> 
> 标签：android, android-intent, gps

**描述**：我正在开发**LBS**应用程序，我正在使用 GPS 和网络提供商来访问位置并将数据通过 GPRS 发送到服务器。我想连续运行这个应用程序来定位用户。一切都运行得很好，只有当我的应用程序进入后台时。

**问题**：我的应用程序在前台运行时正确运行，但我希望此应用程序在后台运行，当我在运行应用程序时按下主页按钮时，我收到此错误消息。以下是我的 MainActivity 和 Mylocationlistener 类。

**主要活动**：-

```
package com.example.trackme;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.telephony.TelephonyManager;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

@SuppressLint("NewApi")
public class MainActivity extends Activity {

    private Button start;

    private static final int TEN_SECONDS = 10000;
    private static final int TEN_METERS = 10;
    private static final int TWO_MINUTES = 1000 * 60 * 2;
    private boolean mGeocoderAvailable;
    private String addressText;
    LocationManager mlocManager ;
     LocationListener mlocListener=new MyLocationListener("", "");

    private String device_ID;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         mGeocoderAvailable =Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD && Geocoder.isPresent();

        setContentView(R.layout.activity_main);

        start=(Button)findViewById(R.id.button1);

        start.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

            }
        });
    }

    protected void onResume() {
        super.onResume();
        setup();
    }
    private void setup() {
         Location gpsLocation = null;
            Location networkLocation = null;

            TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

            device_ID=telephonyManager.getDeviceId();

            mlocManager.removeUpdates(mlocListener);
                gpsLocation = requestUpdatesFromProvider(
                     LocationManager.GPS_PROVIDER);

                networkLocation = requestUpdatesFromProvider(
                        LocationManager.NETWORK_PROVIDER);
                // Update the UI immediately if a location is obtained.

                // If both providers return last known locations, compare the two and use the better
                // one to update the UI.  If only one provider returns a location, use it.
                if (gpsLocation != null && networkLocation != null) {
                    updateUILocation(getBetterLocation(gpsLocation, networkLocation));
                } else if (gpsLocation != null) {
                    updateUILocation(gpsLocation);
                } else if (networkLocation != null) {
                    updateUILocation(networkLocation);

    }
}

                private void doReverseGeocoding(Location location) {
                    // Since the geocoding API is synchronous and may take a while.  You don't want to lock
                    // up the UI thread.  Invoking reverse geocoding in an AsyncTask.
                    (new ReverseGeocodingTask(this)).execute(new Location[] {location});
                      mlocListener = new MyLocationListener(addressText,device_ID); 
                }

                private void updateUILocation(Location location) {
                    // We're sending the update to a handler which then updates the UI with the new
                    // location.
                    Toast.makeText(getApplicationContext(),location.getProvider()+ ","+ location.getLatitude() + ", " + location.getLongitude(),Toast.LENGTH_LONG).show();

                    if (mGeocoderAvailable) doReverseGeocoding(location);
                }

                protected Location getBetterLocation(Location newLocation, Location currentBestLocation) {
                    if (currentBestLocation == null) {
                        // A new location is always better than no location
                        return newLocation;
                    }

                    // Check whether the new location fix is newer or older
                    long timeDelta = newLocation.getTime() - currentBestLocation.getTime();
                    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
                    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
                    boolean isNewer = timeDelta > 0;

                    // If it's been more than two minutes since the current location, use the new location
                    // because the user has likely moved.
                    if (isSignificantlyNewer) {
                        System.out.println("Provider"+newLocation.getProvider());
                        return newLocation;
                    // If the new location is more than two minutes older, it must be worse
                    } else if (isSignificantlyOlder) {
                        System.out.println("Provider"+currentBestLocation.getProvider());
                        return currentBestLocation;
                    }

                    // Check whether the new location fix is more or less accurate
                    int accuracyDelta = (int) (newLocation.getAccuracy() - currentBestLocation.getAccuracy());
                    boolean isLessAccurate = accuracyDelta > 0;
                    boolean isMoreAccurate = accuracyDelta < 0;
                    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

                    // Check if the old and new location are from the same provider
                    boolean isFromSameProvider = isSameProvider(newLocation.getProvider(),
                            currentBestLocation.getProvider());

                    // Determine location quality using a combination of timeliness and accuracy
                    if (isMoreAccurate) {
                        System.out.println("Provider"+newLocation.getProvider());
                        return newLocation;

                    } else if (isNewer && !isLessAccurate) {
                         System.out.println("Provider"+newLocation.getProvider());
                        return newLocation;

                    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
                         System.out.println("Provider"+newLocation.getProvider());
                        return newLocation;
                    }
                    System.out.println("Provider"+currentBestLocation.getProvider());
                    return currentBestLocation;

                }

                private boolean isSameProvider(String provider1, String provider2) {
                    if (provider1 == null) {
                      return provider2 == null;
                    }
                    return provider1.equals(provider2);
                }

    private Location requestUpdatesFromProvider(String provider) {
        Location location = null;

        if (mlocManager.isProviderEnabled(provider)) {
            mlocManager.requestLocationUpdates(provider, TEN_SECONDS, TEN_METERS, mlocListener);
            location = mlocManager.getLastKnownLocation(provider);
        } else {
          //  Toast.makeText(this, errorResId, Toast.LENGTH_LONG).show();
        }
        return location;

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onStart() {
        super.onStart();

         mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        final boolean gpsEnabled = mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 

        if (!gpsEnabled) {
            // Build an alert dialog here that requests that the user enable
            // the location services, then when the user clicks the "OK" button,
            // call enableLocationSettings()

            Toast.makeText(getApplicationContext(), "Pls Enable GPS" , Toast.LENGTH_LONG).show();

    }

}

private class ReverseGeocodingTask extends AsyncTask<Location, Void, Void> {
    Context mContext;

    public ReverseGeocodingTask(Context context) {
        super();
        mContext = context;

           }

    @Override
    protected Void doInBackground(Location... params) {
        Geocoder geocoder = new Geocoder(mContext, Locale.getDefault());

        Location loc = params[0];
        List<Address> addresses = null;
        try {
            addresses = geocoder.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
        } catch (IOException e) {
            e.printStackTrace();
            // Update address field with the exception.

            System.out.println(e.toString());
        }
        if (addresses != null && addresses.size() > 0) {
            Address address = addresses.get(0);
            // Format the first line of address (if available), city, and country name.
             addressText = String.format("%s, %s, %s",
                    address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                    address.getLocality(),
                    address.getCountryName());
            // Update address field on UI.
           // Message.obtain(mHandler, UPDATE_ADDRESS, addressText).sendToTarget();
        //Toast.makeText(getApplicationContext(), addressText, Toast.LENGTH_LONG).show();
        System.out.println(addressText);

        }
        return null;
    }
}
} 
```

**Mylocation监听器**：-

```
package com.example.trackme;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.os.AsyncTask;
import android.os.BatteryManager;
import android.os.Bundle;
import android.os.IBinder;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class MyLocationListener extends Service implements android.location.LocationListener {

    private static String device_ID;
    private float mySpeed;
    private Object time;
    private String lat;
    private String longitude;
    private int level;

    private String locate;

    public MyLocationListener(String addressText,String Device_id) {
        locate=addressText;
        MyLocationListener.device_ID=Device_id;
    }

    @Override
    public void onLocationChanged(Location loc) {

        lat= String.valueOf(loc.getLatitude());

        longitude=String.valueOf(loc.getLongitude());

        if((lat!=null) && (longitude!=null))
        {

              String Text = "My current location is: " +

              "Latitud = " + loc.getLatitude() +

              "Longitud = " + loc.getLongitude();

            //  Toast.makeText(this, Text, Toast.LENGTH_SHORT).show();

          //  Send.performClick();
              AsyncTaskRunner runner = new AsyncTaskRunner();
                String sleepTime = "2000";

                if(loc.hasSpeed()){ 

                    mySpeed =  (float) (3.6 * (loc.getSpeed())); 
                   //  System.out.println("\nCurrent speed: " + mySpeed + " km/h"); 
                }

                runner.execute(sleepTime);
            Log.d("Location Found", Text);
        }

    }

    @Override
    public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(), "Provider is Disabled",Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderEnabled(String provider) {

        Toast.makeText(getApplicationContext(), "Provider is Enabled",Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    private BroadcastReceiver batteryInfoReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

        //  int  health= intent.getIntExtra(BatteryManager.EXTRA_HEALTH,0);
        //  int  voltage= intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE,0);
             level= intent.getIntExtra(BatteryManager.EXTRA_LEVEL,0);

            System.out.println( "Level" +level);
        }
    };

    private class AsyncTaskRunner extends AsyncTask<String, String, String> {

          private String resp;

          @Override
          protected String doInBackground(String... params) {
           publishProgress("Sleeping..."); // Calls onProgressUpdate()
           try {
            // Do your long operations here and return the result
            int time = Integer.parseInt(params[0]);

            // Sleeping for given time period
            Thread.sleep(time);

           HttpClient httpClient = new DefaultHttpClient();

            String postURL = "";

             postURL = "http://smpl.trackfleet.biz/lat_long.php?lat="+lat+"&long="+longitude+"&speed="+mySpeed +"&IMEI_NO="+MyLocationListener.device_ID+"&battery_level="+level +"&location="+locate;

            //postURL = "http://bb.trackfleet.biz/android_gps/lat_long.php?lat="+lat+"&long="+longitude+"&speed=0" +"&IMEI_NO=911223100301734"+"&battery_level="+level;
                    System.out.println(postURL);
            HttpPost httpPost = new HttpPost(postURL);

            HttpResponse httpResponse = null;

            try
            {
        //      Toast.makeText(getApplicationContext(),"Sending location to Server", Toast.LENGTH_SHORT).show();
                System.out.println("Sending to server");
                httpResponse = httpClient.execute(httpPost); 

                String str = inputStreamToString(httpResponse.getEntity().getContent()).toString();
                System.out.println("Response"+str);
            //  location_sms="Sales Person="+str+"latitude="+lat+"longitude="+longitude+"&speed="+mySpeed +"&IMEI_NO="+device_ID+"&battery_level="+level +"&location="+addressText;
                // getSharedPreferences("Values", 4).edit().putString("location_sms",location_sms).commit();

            //  Toast.makeText(getApplicationContext(), str, Toast.LENGTH_SHORT).show();

            }
            catch(Exception ex)
            {
                //Toast.makeText(getApplicationContext(),"Could not communicate with Server" , Toast.LENGTH_SHORT).show();  
                System.out.println("Could not communicate with Server");
ex.printStackTrace();
            }

           } catch (InterruptedException e) {
            e.printStackTrace();
            resp = e.getMessage();
           } catch (Exception e) {
            e.printStackTrace();
            resp = e.getMessage();
           }
           return resp;
          }

        private StringBuilder inputStreamToString(InputStream is) {
          String line = "";
            StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // Return full string
    return total;
}
    }

    } 
```

**日志猫**：-

```
 WIN DEATH: Window{40c12c30 com.example.trackme/com.example.trackme.MainActivity paused=false}
02-18 13:16:45.939: I/SurfaceFlinger(201):                                                                              
02-18 13:16:45.939: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting enter
02-18 13:16:45.939: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting exit: 0
02-18 13:16:45.940: I/SurfaceFlinger(201):                                                                              
02-18 13:16:45.940: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting enter
02-18 13:16:45.940: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting exit: 0
02-18 13:16:45.942: D/IPCThreadState(201): [DN #5] BR_DEAD_BINDER cookie 0x3b5c08
02-18 13:16:45.942: D/IPCThreadState(201): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x3b5c08
02-18 13:16:45.942: D/IPCThreadState(201): [DN #5] BR_DEAD_BINDER cookie 0x20ce78
02-18 13:16:45.942: V/LocationManagerService(201): Location listener died
02-18 13:16:45.942: D/IPCThreadState(201): [DN #5] BR_DEAD_BINDER cookie 0x5ba5d8
02-18 13:16:45.943: V/ActivityManager(201): Death received in com.android.server.am.ActivityManagerService$AppDeathRecipient@40945b90 for thread android.os.BinderProxy@40a29e30
02-18 13:16:45.943: I/ActivityManager(201): Process com.example.trackme (pid 26976) has died.
02-18 13:16:45.943: V/ActivityManager(201): Dying app: ProcessRecord{408e7ae8 26976:com.example.trackme/10067}, pid: 26976, thread: android.os.BinderProxy@40a29e30
02-18 13:16:45.943: V/ActivityManager(201): Removing app ProcessRecord{408e7ae8 0:com.example.trackme/10067} from list [HistoryRecord{40a61240 com.android.phone/.InCallScreen}, HistoryRecord{4077ea58 com.example.trackme/.MainActivity}, HistoryRecord{40875438 com.android.mlabs/.Launcher}, HistoryRecord{409808e8 com.android.settings/.SettingsTabActivity}, HistoryRecord{40adb610 com.android.settings/.ApplicationSettings}, HistoryRecord{4093d3a0 com.android.settings/.ManageApplications}] with 6 entries
02-18 13:16:45.943: V/ActivityManager(201): Record #5 HistoryRecord{4093d3a0 com.android.settings/.ManageApplications}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.943: V/ActivityManager(201): Record #4 HistoryRecord{40adb610 com.android.settings/.ApplicationSettings}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.943: V/ActivityManager(201): Record #3 HistoryRecord{409808e8 com.android.settings/.SettingsTabActivity}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.943: V/ActivityManager(201): Record #2 HistoryRecord{40875438 com.android.mlabs/.Launcher}: app=ProcessRecord{407ef4e8 23796:android.process.acore/10036}
02-18 13:16:45.943: V/ActivityManager(201): Record #1 HistoryRecord{4077ea58 com.example.trackme/.MainActivity}: app=ProcessRecord{408e7ae8 0:com.example.trackme/10067}
02-18 13:16:45.943: V/ActivityManager(201): Removing this entry!
02-18 13:16:45.943: V/ActivityManager(201): Record #0 HistoryRecord{40a61240 com.android.phone/.InCallScreen}: app=ProcessRecord{40881af0 289:com.android.phone/1001}
02-18 13:16:45.943: V/ActivityManager(201): Removing app ProcessRecord{408e7ae8 0:com.example.trackme/10067} from list [] with 0 entries
02-18 13:16:45.943: V/ActivityManager(201): Removing app ProcessRecord{408e7ae8 0:com.example.trackme/10067} from list [] with 0 entries
02-18 13:16:45.943: V/ActivityManager(201): Removing app ProcessRecord{408e7ae8 0:com.example.trackme/10067} from list [] with 0 entries
02-18 13:16:45.944: V/ActivityManager(201): Removing app ProcessRecord{408e7ae8 0:com.example.trackme/10067} from history with 10 entries
02-18 13:16:45.944: V/ActivityManager(201): Record #9 HistoryRecord{4093d3a0 com.android.settings/.ManageApplications}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.944: V/ActivityManager(201): Record #8 HistoryRecord{40adb610 com.android.settings/.ApplicationSettings}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.944: V/ActivityManager(201): Record #7 HistoryRecord{409808e8 com.android.settings/.SettingsTabActivity}: app=ProcessRecord{40c1f9e8 26810:com.android.settings/1000}
02-18 13:16:45.944: V/ActivityManager(201): Record #6 HistoryRecord{40875438 com.android.mlabs/.Launcher}: app=ProcessRecord{407ef4e8 23796:android.process.acore/10036}
02-18 13:16:45.944: V/ActivityManager(201): Record #5 HistoryRecord{4077ea58 com.example.trackme/.MainActivity}: app=ProcessRecord{408e7ae8 0:com.example.trackme/10067}
02-18 13:16:45.944: V/ActivityManager(201): Keeping entry, setting app to null
02-18 13:16:45.944: V/ActivityManager(201): Record #4 HistoryRecord{40c103b8 com.android.mms/.ui.ComposeMessageActivity}: app=null
02-18 13:16:45.944: V/ActivityManager(201): Record #3 HistoryRecord{40a540b8 com.android.mms/com.gionee.mms.ui.MmsSmsTabActivity}: app=null
02-18 13:16:45.944: V/ActivityManager(201): Record #2 HistoryRecord{40923ef8 com.android.contacts/.DialtactsActivity}: app=null
02-18 13:16:45.944: V/ActivityManager(201): Record #1 HistoryRecord{40a21258 com.android.calculator2/.Calculator}: app=null
02-18 13:16:45.944: V/ActivityManager(201): Record #0 HistoryRecord{40a61240 com.android.phone/.InCallScreen}: app=ProcessRecord{40881af0 289:com.android.phone/1001}
02-18 13:16:45.944: D/IPCThreadState(201): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x5ba6c8
02-18 13:16:45.947: V/LocationManagerService(201): _removeUpdates: listener = Receiver{409892c0 Listener android.os.BinderProxy@40929d88}mUpdateRecords: {gps=UpdateRecord{40a5e288 mProvider: gps mUid: 10067}, network=UpdateRecord{408e66d0 mProvider: network mUid: 10067}}
02-18 13:16:45.949: D/IPCThreadState(201): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x5ba5d8
02-18 13:16:45.949: D/LocationManagerService(201): removeUpdatesLocked is called provider:receiver: Receiver{409892c0 Listener android.os.BinderProxy@40929d88}mUpdateRecords: {gps=UpdateRecord{40a5e288 mProvider: gps mUid: 10067}, network=UpdateRecord{408e66d0 mProvider: network mUid: 10067}}callingPid: 201ap name:system
02-18 13:16:45.950: D/PowerManagerService(201): acquireWakeLock flags=0x1 tag=GpsLocationProvider
02-18 13:16:45.950: I/SurfaceFlinger(201):                                                                              
02-18 13:16:45.950: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting enter
02-18 13:16:45.950: I/SurfaceFlinger(201): surface flinger stars handleComposing3DStateSetting exit: 0
02-18 13:16:45.952: D/Settings/Provide(201): lookupValue, table secure cache.containsKey location_providers_allowed
02-18 13:16:45.952: D/LocationManagerService(201): isAllowedBySettingsLocked gpsistrue
02-18 13:16:45.952: D/PowerManagerService(201): acquireWakeLock flags=0x1 tag=GpsLocationProvider
02-18 13:16:45.952: D/Settings/Provide(201): lookupValue, table secure cache.containsKey location_providers_allowed
02-18 13:16:45.952: D/LocationManagerService(201): isAllowedBySettingsLocked networkistrue
02-18 13:16:45.955: W/GpsLocationProvider(201): Unneeded remove listener for uid 1000
02-18 13:16:45.955: D/IPCThreadState(201): [DN #5] BR_CLEAR_DEATH_NOTIFICATION_DONE cookie 0x20ce78
02-18 13:16:45.957: D/androidNlpServiceThread(280): adding listener com.google.android.location.internal.client.NetworkLocationClient$1@40553208 with period 86400
02-18 13:16:45.957: D/androidNetworkLocationListeners(280): Still have listener com.google.android.location.internal.client.NetworkLocationClient$1@40553208
02-18 13:16:45.959: D/PowerManagerService(201): acquireWakeLock flags=0x1 tag=NetworkLocationLocator
02-18 13:16:45.960: D/GpsLocationProvider(201): stopNavigating
02-18 13:16:45.961: D/WifiService(201): acquireWifiLockLocked: WifiLock{NetworkLocationLocator type=2 binder=android.os.BinderProxy@409c64a0}
02-18 13:16:45.961: D/Settings/Provide(201): lookupValue, table secure cache.containsKey wifi_on
02-18 13:16:45.961: D/WifiService(201): doUpdateWifiState, mDisableByWifiManager=false, wifiEnabled=true
02-18 13:16:45.961: D/Settings/Provide(201): lookupValue, table system cache.containsKey airplane_mode_radios
02-18 13:16:45.961: D/Settings/Provide(201): lookupValue, table system cache.containsKey airplane_mode_on
02-18 13:16:45.962: D/PowerManagerService(201): acquireWakeLock flags=0x1 tag=*wifi*
02-18 13:16:45.963: D/WifiService(201): setWifiEnabledBlocking, enable=true, persist=false, uid=1000
02-18 13:16:45.963: D/WifiStateTracker(201): restart, mConnectingSupplicant=false
02-18 13:16:45.964: V/AlarmManager(201): set: Alarm{40936e10 type 2 com.google.android.location}
02-18 13:16:45.965: V/AlarmManager(201): Adding alarm Alarm{40936e10 type 2 com.google.android.location} at 0
02-18 13:16:45.965: V/AlarmManager(201): alarms: 5 type: 2
02-18 13:16:45.965: V/AlarmManager(201): 0: Jan 02 10:10:39 am com.google.android.location
02-18 13:16:45.965: V/AlarmManager(201): 1: Jan 02 10:14:56 am com.google.android.gsf
02-18 13:16:45.965: V/AlarmManager(201): 2: Jan 02 10:30:33 am com.google.android.apps.maps
02-18 13:16:45.965: V/AlarmManager(201): 3: Jan 02 11:52:19 am com.google.android.apps.maps
02-18 13:16:45.965: V/AlarmManager(201): 4: Dec 15 06:01:30 am com.google.android.apps.maps
02-18 13:16:45.965: V/AlarmManager(201): Native set alarm :Alarm{40936e10 type 2 com.google.android.location}
02-18 13:16:45.966: E/TelephonyManager(280): getDefaultSim is sim1 
```

我在向服务器发送数据时使用了 AsyncTask，并且我正在服务方法中执行我的 GPS 活动。我不知道为什么 WindowManager 会在应用程序中停止我的 GPS。我看到了一些与 ANR 问题相关的帖子，但在我的 logcat 中没有生成 ANR。我的活动响应正常，我正在后台做所有繁重的工作，但这种情况仍在发生。

我在 logcat WindowManager 中看到 WIN 死亡信号正在发出，因为我的 GPS 正在停止。我无法找到解决此问题的方法。

有人可以告诉我原因并告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:28:00.093

好吧，一方面，你不能`Service`像你在这里做的那样实例化：

```
LocationListener mlocListener=new MyLocationListener("", ""); 
```

`Service`是一个 Android 组件，Android 组件由 Android 框架实例化。要启动`Service`您需要调用`startService()`. 由于您显然想将一些参数传递给您的`Service`，您可以将它们放入`Intent`您传递给的`startService()`.

不要为`Service`. 安卓会这样做。

阅读[Android 文档](http://developer.android.com/reference/android/app/Service.html)`Service`中的生命周期

# asp.net - 我想结合日期和时间并与UTC日期进行比较

> ID：14932753
> 
> 赞同：3
> 
> 时间：2013-02-18T09:10:27.257
> 
> 标签：asp.net, sql, sql-server-2008

当我写这个查询

```
SELECT Convert(datetime,Convert(varchar,CAST(GETUTCDATE() AS DATE))+' '+ 
       CONVERT(varchar, cast(meas_pain.datetime AS time))) FROM meas_pain 
```

它对我有用，但是当我在 WHERE 子句中使用相同的部分时，它会给出错误“从字符串转换日期和/或时间时转换失败。”

```
SELECT schedules.id 
FROM meas_pain LEFT JOIN schedules ON schedules.id=meas_pain.schd_id 
WHERE meas_pain.schd_id=9150 AND  
      Convert(datetime,(Convert(varchar,CAST(GETUTCDATE() AS DATE))+' '+
      CONVERT(varchar, cast(meas_pain.datetime AS time)))) < 
      CONVERT(datetime,DATEADD(Minute,0,getutcdate())) 
```

谁能解释一下？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:41:31.897

我不确定为什么您的 select 语句中没有出现此错误，因为我可以仅使用

```
SET DATEFORMAT DMY;
SELECT  CONVERT(DATETIME, CONVERT(VARCHAR,CAST(GETUTCDATE() AS DATE))) 
```

**[错误示例](http://sqlfiddle.com/#!3/d41d8/8995)**

您依赖于本地化转换设置，您应该使用显式转换，例如

```
SET DATEFORMAT DMY;
SELECT  CONVERT(DATETIME, CONVERT(VARCHAR, CAST(GETUTCDATE() AS DATE), 111), 111) 
```

通过显式定义日期格式以转换为 varchar 和 varchar (111)，您可以避免任何隐含的转换。

**但是**，如果您的日期/时间是这样存储的，则不需要所有与 varchar 之间的转换，这只是更多出错的机会和不必要的工作，您可以简单地将时间添加到日期时间。例如

```
DECLARE @Date1 DATETIME = DATEADD(HOUR, 1, GETUTCDATE()),
        @Date2 DATETIME = DATEADD(DAY, 1, GETUTCDATE());

SELECT  [Date1] = @Date1,
        [Date2] = @Date2,
        [Date1/Time2] = CAST(CAST(@Date1 AS DATE) AS DATETIME) +
                           CAST(@Date2 AS TIME); 
```

从我可以从您的查询中收集到的信息，您只是想获得时间`meas_pain.datetime`小于当前 UTC 时间的结果，无论日期如何。因此，您应该能够将查询简化为：

```
SELECT  schedules.id 
FROM    meas_pain 
        LEFT JOIN schedules 
            ON schedules.id = meas_pain.schd_id 
WHERE   meas_pain.schd_id = 9150
AND     CAST(meas_pain.[DateTime] AS TIME) < CAST(GETUTCDATE() AS TIME); 
```

并删除进一步的冗余转换。

**[SQL Fiddle 上的简化示例](http://www.sqlfiddle.com/#!3/ff96b/1)**

**附录**

显然这个时间比较不是你所追求的（尽管它是你发布的查询正在做的），所以我假设 GETUTCDATE() 只是为了演示。

您尝试执行的转换等同于：

```
CAST(CAST(GETUTCDATE() AS DATE) AS DATETIME) + CAST(meas_pain.[DateTime] AS TIME) 
```

**[另一个使用上述转换的 SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/ff96b/3)**

# c - 使用 C 编程显示图像文件

> ID：14932756
> 
> 赞同：1
> 
> 时间：2013-02-18T09:10:41.340
> 
> 标签：c, libpng

我想使用 c 编程读取和显示 png 图像。请提出一些方法。是否可以使用 libPng 库来显示图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:14:16.687

libPng 只会为您将图像解码为 RGBA 数组。然后显示图像，您可以使用 OpenGL 或依赖于操作系统的图形库。

**编辑**：既然你说你正在使用 Windows：

在 Windows 上，您有许多库选择：我建议您从 SDL 开始，您可以先显示您的图像，如下所示：[http](http://www.sdltutorials.com/Data/Posts/105/ss1.jpg) ://www.sdltutorials.com/Data/Posts/105/ss1.jpg 然后继续构建您的应用程序从那里。有很多关于 SDL 的教程（参见此处：[http](http://www.sdltutorials.com/tutorials) ://www.sdltutorials.com/tutorials ）。JPG来自这个：[http ://www.sdltutorials.com/sdl-coordinates-and-blitting](http://www.sdltutorials.com/sdl-coordinates-and-blitting)

# objective-c - 在 Objective-c 中将 int 连接到字符串

> ID：14932763
> 
> 赞同：0
> 
> 时间：2013-02-18T09:11:17.793
> 
> 标签：objective-c, string-concatenation

我如何将 连接`int length`到我试图插入该数组的字符串，所以它是“ **C10** ”，给定长度 == 10，当然。我看到`@"%d", intVarName`在其他地方使用的方法。在 Java 中，我会完成`"C" + length;`. 我正在使用该`replaceObjectAtIndex`方法替换我之前在`MSMutableArray`“board”中填充的空字符串“”。`@"C%d", length`但是，当我在该方法的末尾添加该部分时*（**上面的倒数第二行`i++`**）* ，我收到了一个错误。

作为我作业的一部分，我必须随机放置“Chutes”（由格式字符串“C'length_of_chute'”表示，在第一个作业中，它们的长度始终为 10，因此它只是“C10”）到由数组表示的游戏板。

```
 -(void)makeChutes: (int) length {// ??Change input to Negative number, Nvm.
    //??Make argument number of Chutes ??randomly?? across the board.
    for(int i = 0; i < length;){
        int random = arc4random_uniform(101);
        if ([[board objectAtIndex:random] isEqual:@""]) {
            //[board insertObject:@"C%d",length atIndex:random];
            [board replaceObjectAtIndex:random withObject:@"C%d",length];
            i++;
        }
    }
} 
```

请忽略其中的额外和垃圾代码，我将其留在上下文中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:16:39.690

在 Objective-C 中，该`stringWithFormat`方法用于格式化字符串：

```
NSString *formattedString = [NSString stringWithFormat:@"C%d", length];
[someArray insertObject:formattedString]; 
```

在 Objective-C 中创建自己的格式化字符串通常更容易，因为如您所见，调用可能相当冗长！

# java - 根据设置更改字符串中的 EOL

> ID：14932772
> 
> 赞同：0
> 
> 时间：2013-02-18T09:12:10.643
> 
> 标签：java, cross-platform, eol

我正在尝试根据设置更改字符串的行尾。基本上我有字符串，主要是 LF 结尾，很少有其他东西，但它会发生，如果被问到，我希望能够将它们更改为 CRLF 或 CR，或者如果被问到，请确保它们是纯粹的 LF。源平台和目标平台因操作系统而异，因此我想根据自己的喜好更改行尾。

目前我正在使用这段代码

```
 if(this.eolCharacter.equalsIgnoreCase("CR")){
            //replaces all \r\n with \r
            //replaces all \n that are not preceded by \r with \r
            return input.replaceAll("\\r\\n", "\r").replaceAll("\\n", "\r");
    }else if(this.eolCharacter.equalsIgnoreCase("LF")){
            //replaces all \r\n with \n
            //replaces all \r with \n
            return input.replaceAll("\\r\\n", "\n").replaceAll("\\r", "\n");
    }else{
            //replaces all \n that are not preceded by \r
            //replaces all \r that are not followed by \n
            return input.replaceAll("(?<!\\r)\\n", "\r\n").replaceAll("\\r(?!\\n)", "\r\n");} 
```

我有点担心这段代码可能很脆弱，或者我错过了正则表达式中的某些内容，所以我想知道是否有一种本地方式可以做到这一点，它是 Java 6，如果那样的话，我们正在使用 Apache StringUtils可能有帮助。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:19:54.123

看起来它会起作用，但正如 EJP 提到的，你不应该这样做，它可以简化如下：

```
if(this.eolCharacter.equalsIgnoreCase("CR")){
   return input.replaceAll("(\\r)?\\n", "\r");
}else if(this.eolCharacter.equalsIgnoreCase("LF")){
   return input.replaceAll("\\r(\\n)?", "\n");
}else{
   return input.replaceAll("((\\r)?\\n)|(\\r(?!\\n))", "\r\n");
} 
```

# macos - OSX Cocoa 在 webview 中嵌入 opengl 视图

> ID：14932775
> 
> 赞同：2
> 
> 时间：2013-02-18T09:12:21.873
> 
> 标签：macos, cocoa, opengl

我正在尝试构建一个 MacOS 应用程序，它创建一个 OpenGL 视图并将其作为元素嵌入到 webview 中（使用 OpenGL 而不是 WebGL）。主要目标是使用 web (html/javascript) 作为 UI 并使用 OpenGL 视图绘制结果。（此外，OpenGL 视图也将处理用户输入）

问题是 webview 和 OpenGL 视图之间的覆盖。如果 OpenGL 视图位于 webview 之上，则 webview UI（如：下拉框）可能会被 OpenGL 视图剪切。webview 在 OpenGL 视图之上，所有的 webview 视图都会挡住 OpenGL 视图。

有什么解决方案可以解决这个问题吗？（OpenGL 和 Web 视图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T00:24:52.500

WebKit 有一个有趣的功能，您可以将具有某些 MIME 类型的 webview 关联到您自己的自定义 NSView 类。

在您的 HTML webview 中，您可以放置​​一个具有自定义 mimetype 的 iframe（例如“application/my-custom-view”）。

之后，从您的本机应用程序中，您可以调用：

```
[WebView registerViewClass:[MyCustomView class] representationClass:[MyCustomRepresentation class] forMIMEType:@"application/my-custom-view"]; 
```

请参阅[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Webkit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/clm/WebView/registerViewClass:representationClass:forMIMEType](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Webkit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/clm/WebView/registerViewClass:representationClass:forMIMEType)：

MyCustomRepresentation 可以非常轻量级，我的 Representation 类不做任何事情，它只是定义了存根委托函数。

# c++ - 关于自旋锁

> ID：14932778
> 
> 赞同：0
> 
> 时间：2013-02-18T09:12:31.760
> 
> 标签：c++, locking

我对 boost spinlock 代码有一些疑问：

```
class spinlock
{
public:
    spinlock()
        : v_(0)
    {
    }

    bool try_lock()
    {
        long r = InterlockedExchange(&v_, 1);
        _ReadWriteBarrier();        // 1\. what this mean            
        return r == 0;
    }

    void lock()
    {
        for (unsigned k = 0; !try_lock(); ++k)
        {
            yield(k);
        }
    }

    void unlock()
    {

        _ReadWriteBarrier();                      
        *const_cast<long volatile*>(&v_) = 0;  
        // 2\. Why don't need to use InterlockedExchange(&v_, 0);
    }

private:
    long v_;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:19:42.603

1.  ReadWriteBarrier() 是“内存屏障”（在这种情况下用于读取和写入），是对处理器的特殊指令，以确保导致内存操作的任何指令都已完成（`load`&`store`操作 - 或者在例如 x86 处理器中，任何两边都有一个内存操作数的操作）。在这种特殊情况下，在我们继续之前确保 InterlockedExchange(&v_,1) 已完成。

2.  因为 an`InterlockedExchange`效率会降低（与机器中的任何其他内核进行更多交互以确保所有其他处理器内核都“放开”该值 - 这是没有意义的，因为最有可能（在正确工作的代码中）我们只有`unlock`当我们实际上持有锁，所以没有其他处理器缓存的值与我们正在写入的值不同），并且`volatile`写入内存也一样好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:17:32.093

障碍的存在是为了确保内存同步；没有它们，不同的线程可能会以不同的顺序看到内存的修改。

并且`InterlockedExchange`在第二种情况下不需要，因为我们对先前的值不感兴趣。的作用 `InterlockedExchange`无疑是设置值并返回之前的值。（为什么`v_`会是`long`，当它只能取值`0`并且`1`, 超出了我的范围时。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:01:14.713

原子访问变量存在三个问题。首先，确保在读取或写入值的过程中没有线程切换；如果发生这种情况，则称为“撕裂”；第二个线程可以看到部分写入的值，这通常是无意义的。其次，确保所有处理器都能看到写入所做的更改，或者读取值的处理器看到该值的任何先前更改；这称为“缓存一致性”。第三，确保**编译器**不会在读写之间移动代码；这称为“代码运动”。`InterlockedExchange`做前两个；尽管 MSDN 文档相当混乱，`_ReadWriteBarrier`但第三个，可能是第二个。

# c# - 如何更改表达式树中的类型？

> ID：14932779
> 
> 赞同：12
> 
> 时间：2013-02-18T09:12:34.443
> 
> 标签：c#, expression-trees

我有这样的方法：

```
private bool Method_1(Expression<Func<IPerson, bool>> expression)
{
    /* Some code that will call Method_2 */
} 
```

在这种方法中，我想将`IPerson`类型更改为另一种类型。我想调用另一个看起来像这样的方法：

```
private bool Method_2(Expression<Func<PersonData, bool>> expression)
{
    /* Some code */
} 
```

所以，在`method_1`我需要更改`IPerson`为`PersonData`. 我怎样才能做到这一点？

编辑：

当我打电话时：`Method_1(p => p.Id == 1)`我想“保存”条件 ( `p.Id == 1`) 但我想在另一种类型上执行此条件，即`IPerson`. 所以，我需要改变表达式或创建一个新的表达式`IPerson`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T09:32:43.490

如果您使用 .net 4 很容易（更新：如评论中所述，`ExpressionVisitor`是在版本 4 而不是 4.5 中添加的）它需要对旧框架进行一些谷歌搜索：

有一些假设，但我认为它们对您的 DTO 和实体场景有效 - 访问的属性必须匹配。

```
class PersonData
{
    public bool Prop { get; set; }
}

interface IPerson 
{
    bool Prop { get; set; }
} 
```

在 .net 4 中`ExpressionVisitor`定义了一个类，如果您使用较旧的类，这会使这变得容易得多，那么您需要编写或找到它的实现：

```
class Visitor<T> : ExpressionVisitor
{
    ParameterExpression _parameter;

    //there must be only one instance of parameter expression for each parameter 
    //there is one so one passed here
    public Visitor(ParameterExpression parameter)
    {
        _parameter = parameter;
    }

    //this method replaces original parameter with given in constructor
    protected override Expression VisitParameter(ParameterExpression node)
    {
        return _parameter;
    }

    //this one is required because PersonData does not implement IPerson and it finds
    //property in PersonData with the same name as the one referenced in expression 
    //and declared on IPerson
    protected override Expression VisitMember(MemberExpression node)
    {
        //only properties are allowed if you use fields then you need to extend
        // this method to handle them
        if (node.Member.MemberType != System.Reflection.MemberTypes.Property)
            throw new NotImplementedException();

        //name of a member referenced in original expression in your 
        //sample Id in mine Prop
        var memberName = node.Member.Name;
        //find property on type T (=PersonData) by name
        var otherMember = typeof(T).GetProperty(memberName);
        //visit left side of this expression p.Id this would be p
        var inner = Visit(node.Expression);
        return Expression.Property(inner, otherMember);
    }
} 
```

概念证明：

```
class Program
{
   static void Main()
    {
        //sample expression
        Expression<Func<IPerson, bool>> expression = x => x.Prop;

        //parameter that will be used in generated expression
        var param = Expression.Parameter(typeof(PersonData));
        //visiting body of original expression that gives us body of the new expression
        var body = new Visitor<PersonData>(param).Visit(expression.Body);
        //generating lambda expression form body and parameter 
        //notice that this is what you need to invoke the Method_2
        Expression<Func<PersonData, bool>> lambda = Expression.Lambda<Func<PersonData, bool>>(body, param);
        //compilation and execution of generated method just to prove that it works
        var boolValue = lambda.Compile()(new PersonData());
    }
} 
```

请注意，这适用于简单的表达式。如果你需要处理，`x.Prop.Prop1 < 3`那么你需要进一步扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-08T12:27:25.610

这是@Rafal 解决方案的改进。它允许对复杂对象的属性调用进行管道化。

```
//sample expression
Expression<Func<IPerson, bool>> expression = x => x.PropA.PropB.PropC == "ABC"; 
```

只需更改`otherMember`以使用`inner`.

```
class Visitor<T> : ExpressionVisitor
{
    ParameterExpression _parameter;

    //there must be only one instance of parameter expression for each parameter 
    //there is one so one passed here
    public Visitor(ParameterExpression parameter)
    {
        _parameter = parameter;
    }

    //this method replaces original parameter with given in constructor
    protected override Expression VisitParameter(ParameterExpression node)
    {
        return _parameter;
    }

    //this one is required because PersonData does not implement IPerson and it finds
    //property in PersonData with the same name as the one referenced in expression 
    //and declared on IPerson
    protected override Expression VisitMember(MemberExpression node)
    {
        //only properties are allowed if you use fields then you need to extend
        // this method to handle them
        if (node.Member.MemberType != System.Reflection.MemberTypes.Property)
            throw new NotImplementedException();

        //name of a member referenced in original expression in your 
        //sample Id in mine Prop
        var memberName = node.Member.Name;

        /*Fix*/
        //visit left side of this expression p.Id this would be p
        var inner = Visit(node.Expression);
        //find property on type T (=PersonData) by name
        var otherMember = inner.Type.GetProperty(memberName);

        return Expression.Property(inner, otherMember);
    }
} 
```

# charts - 不使用 AutoRanging 的 JavaFx Customzied CategoryAxis 手册

> ID：14932788
> 
> 赞同：2
> 
> 时间：2013-02-18T09:13:04.470
> 
> 标签：charts, javafx-2

我有一个可能有空值的图表，我也想要修复 X ​​轴刻度（例如 20 点）。以及绑定到 Y 轴的值（不是空值 ex.10 值）。

![我想要的图表](../Images/3b6fffc70b4a8c6f60ca09a0cbddb9fb.png "X 轴类别固定，Y 值为空")

[更新]

```
String [] categories = {"32-11, 33-11, 34-11, 35-11, 36-11, 37-11, 38-11, 39-11, 40-11, 41-11, 42-11, 43-11, 44-11, 45-11, 46-11, 47-11, 48-11, 49-11, 50-11, 51-11"};
LineChart<String, Number> myChart;
CategoryAxis xAxis;
NumberAxis yAxis;

yAxis = new NumberAxis();
xAxis = new CategoryAxis();
xAxis.setCategories(FXCollections.<String>observableArrayList(Arrays.asList(categories))); 
xAxis.setAutoRanging(false);

myChart = new LineChart<String, Number>(xAxis,yAxis);

    Series<String, Number> aSeries = new Series<String, Number>();
    for (int i = 0; i < categories.length; i++) {
        aSeries.getData().add(new XYChart.Data(categories[i],"Some Long values and may be null"));
    }

myChart.getData().add(aSeries); 
```

*   图表绘制无
*   //xAxis.setAutoRanging(false); 图表绘制但具有自动范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:16:40.110

## 我为我的问题找到了解决方案：

*   我得到 CategoryAxis 源代码！来自[CategorAxis](http://hg.openjdk.java.net/openjfx/2.1/master/rt/file/5c3b3d524f07/javafx-ui-controls/src/javafx/scene/chart/CategoryAxis.java)。
*   并添加一行一切顺利。

    ```
    public final void setCategories(ObservableList<String> value) {
    categories.set(value);
    invalidateRange(value);  //add that line
    requestAxisLayout();
    } 
    ```

**更新：**

该问题可以在不更改 CategoryAxis 类的情况下解决，只需将该行添加到我的代码中：

```
xAxis.setAutoRanging(false); 
xAxis.setCategories(FXCollections.<String>observableArrayList(Arrays.asList(categories))); 
xAxis.invalidateRange(Arrays.asList(categories));  // add that line to my code. 
```

# android - 检查从移动设备到服务器的请求需要多长时间

> ID：14932789
> 
> 赞同：0
> 
> 时间：2013-02-18T09:13:04.490
> 
> 标签：android, performance, http

我正在从我的移动 Android 应用程序向服务器发送一个 http 请求，我想打印出上传花了多长时间。我怎样才能做到这一点？

仅仅在请求之前和之后打印出系统时间并没有帮助，因为它还包括服务器响应所花费的时间。

这是我当前的请求代码：

```
HttpPost httppost = getHeader(uri, 0);    //fileSize);
httppost.setEntity(reqEntity);
HttpResponse response = null;
httpclient = new DefaultHttpClient();

Log.i(TAG, "start execute");
response = httpclient.execute(httppost);
int code = response.getStatusLine().getStatusCode();
if (code != 200) {
    Log.i(TAG, "http error! : " + code);
    throw new HttpException("Server returns with http error (" + code + ")");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:18:45.887

这是一个流程：

*   发送到服务器 Android 当前时间。
*   服务器应该存储服务器时间和安卓时间之间的时间偏移
*   接下来，将您的请求发送到其中一个参数应该是 Android 发送消息的时间。
*   服务器将采用他的本地时间，在服务器时间和android时间之间添加偏移量并计算接收时间。

容易，对吧？

==================================================== ==========

假设 android 有时间 14:23:01:010 服务器时间 14:23:15:000

Android 使用他的本地时间和服务器存储偏移 (14:23:15:000) - (14:23:01:010) = 13.990 秒发送请求。

现在Android在当地时间14:24:01:000发送消息，服务器在**HIS**当地时间14:24:16:050收到消息。

所以 (14:24:16:050) - (14:24:01:000) = 15.050 秒。

现在删除偏移量：

15.050 - 13.990 = 1.06 秒

这是您的请求时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:30:43.647

发送HTTP请求之前的简单保存时间和返回时保存的时间，然后它们的区别将是请求完成所花费的时间。

# sql-server - 如何在 dbExpress 中处理来自 SQL Server 的用户定义错误？

> ID：14932790
> 
> 赞同：2
> 
> 时间：2013-02-18T09:13:05.320
> 
> 标签：sql-server, delphi, delphi-xe2, dbexpress

我正在使用 dbExpress 访问 SQL Server 2005/2008 数据库。我从触发器/存储过程向我的应用程序提出了一条[用户定义的错误消息：](http://msdn.microsoft.com/en-us/library/ms178592.aspx)

```
raiserror 99999 "MSG" 
```

通过这样做，我得到了如下异常：

```
SQL State: 42000, SQL Error Code: 99999
MSG 
```

我尝试使用以下代码获取错误代码，但我得到的错误代码为 3604 而不是 99999：

```
if (pErrorObj.ErrorCode = 99999) then
   ShowMessage('Error'); 
```

如何检索此错误代码 (99999) 及其消息 (MSG)？

# android - 如何使用 API ping BluetoothDevice？

> ID：14932791
> 
> 赞同：0
> 
> 时间：2013-02-18T09:13:05.250
> 
> 标签：android, bluetooth

我正在寻找一种方法来 ping 一个`BluetoothDevice`我只知道 MAC 地址的遥控器。我想知道（至少每秒一次或更快）该设备是否仍在我的 Android 手机范围内。我无权访问其他设备（因此我无法创建客户端软件）。如果我不需要 root 手机并且可以使用标准 API 那就太好了。但如果没有其他可能，我可以想象它会扎根。

我已经找到[了这个问题](https://stackoverflow.com/questions/6281231/ping-a-bluetooth-device-from-an-android-device)，但它并没有真正解决我的问题。

我已经尝试了一些方法：

1.  定期进行 DeviceDiscovery
2.  `hcitool -i hci0 inq --flush`结合使用`hcidump`
3.  使用`l2ping`

我什至尝试从`BlueZ`堆栈中提取重要的行，并使用 JNI 将它们本地实现到我的代码中。

我对这些想法的问题：

1.  太慢（每台设备每 9-13 秒只能找到一次）
2.  太慢了（在 linux pc 上要快很多。在 android-phone 上它和 1 一样慢。）
3.  它比大多数设备要快一点，`hcitool`但在大多数设备上它需要配对

我的下一个想法如下：

我想为远程设备创建一个不安全的套接字并在其上执行`ServiceDiscovery`ping 操作。据我了解`l2ping`，几乎相同（仅在没有可用 API 功能的情况下进行名称解析）。但我真的不知道如何执行`ServiceDiscovery`. 我几乎从 Android 阅读了整个蓝牙 API，并尝试了类似`createInsecureRfcommSocketToServiceRecord(UUID myUUID)`不同 UUID 的东西，但我真的不知道我在做什么。

所以我有两个问题：

1.  如何以编程方式执行远程`ServiceDiscovery`操作？`BluetoothDevices`
2.  还有其他方法/想法，如何定期 ping 蓝牙设备？

**编辑：**

```
 mMyDevice = mBluetoothAdapter.getRemoteDevice(MY_MAC);
    mMyUUID = UUID.fromString("00001105-0000-1000-8000-00805F9B34FB");
    try {
        mBT_Socket = mMyDevice.createInsecureRfcommSocketToServiceRecord(mMyUUID);
        mBluetoothAdapter.cancelDiscovery();
        mBT_Socket.connect();
    }catch(Exception e){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:07:06.923

我想在 ping 附近设备方面分享的一个想法是使用 OBEX Push UUID 向附近设备发送蓝牙请求。我不确定需要多长时间，但值得一试。在此方法中，您使用 RFComm Socket 创建到另一台设备上的 OBEX 服务器的连接。请注意，每个设备都有一个运行的本机 OBEX 服务器，可以接收 OBEX 推送请求。OBEX 推送 UUID 为“00001105-0000-1000-8000-00805F9B34FB”。

这样，如果附近的蓝牙设备不可用，您的客户端设备将无法连接到附近的设备，并且您可能会在 1-2 秒内断开连接。

您可以在此处注意两件事的时间范围 1\. 如果附近的设备可用，需要多长时间才能建立连接？2\. 需要多长时间才能知道您是否无法建立连接。如果蓝牙设备不可用？

# macos - 在 mac os x 10.8 上设置 hadoop 的问题

> ID：14932794
> 
> 赞同：0
> 
> 时间：2013-02-18T09:13:08.623
> 
> 标签：macos, hadoop

我已经在我的 mac 上设置了一些东西来安装 hadoop。但是有这样的错误消息：

```
13/02/18 04:05:52 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 0 time(s).
13/02/18 04:05:53 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 1 time(s).
13/02/18 04:05:54 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 2 time(s).
13/02/18 04:05:55 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 3 time(s).
13/02/18 04:05:56 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 4 time(s).
13/02/18 04:05:57 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 5 time(s).
13/02/18 04:05:58 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 6 time(s).
13/02/18 04:05:59 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 7 time(s).
13/02/18 04:06:00 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 8 time(s).
13/02/18 04:06:01 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000\. Already tried 9 time(s).
java.lang.RuntimeException: java.net.ConnectException: Call to localhost/127.0.0.1:9000 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.mapred.JobConf.getWorkingDirectory(JobConf.java:546)
    at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:318)
    at org.apache.hadoop.examples.PiEstimator.estimate(PiEstimator.java:265)
    at org.apache.hadoop.examples.PiEstimator.run(PiEstimator.java:342)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.examples.PiEstimator.main(PiEstimator.java:351)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.net.ConnectException: Call to localhost/127.0.0.1:9000 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1099)
    at org.apache.hadoop.ipc.Client.call(Client.java:1075)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:119)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:238)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:203)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1386)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1404)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123)
    at org.apache.hadoop.mapred.JobConf.getWorkingDirectory(JobConf.java:542)
    ... 17 more
Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:599)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:489)
    at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
    at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1206)
    at org.apache.hadoop.ipc.Client.call(Client.java:1050)
    ... 31 more 
```

然后我进入jps查看服务，结果是：20635 jps

20466 任务跟踪器

20189 数据节点

20291 次要名称节点

我不知道如何处理这个错误。有人可以给我一个答案吗？多谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:50:13.830

实际上，由于 IP 配置错误，所有进程（hadoop 应该运行）都没有运行。我不熟悉 Mac OS，但在 linux 和 windows 上，我们需要将 hadoop 输入用于连接主机文件（etc/hosts），我该死确保它应该适用于 Mac。现在的重点是
您需要将您的 hadoop 条目作为本地机器（如 127.0.0.1）放入该文件中，
实际上您需要将其放在您机器的实际 IP 上，
例如
hadoop-machine 127.0.0.1 -->（这里放回环IP是错误的，因为hadoop会尝试连接这个IP）。
删除这个 127.0.0.1 并将你的机器的实际 IP 放在这个条目的前面。[你可以很容易地找到你的mac机器的ip](http://www.wikihow.com/Find-Your-IP-Address-on-a-Mac).这里有一些与hadoop没有直接关系的问题，但我想它们会对你有所帮助。
[问题 1](https://stackoverflow.com/questions/10188889/hbase-connection-refused) ,[问题 2](https://stackoverflow.com/questions/10663839/namenode-java-net-bindexception) ,[问题 3](https://stackoverflow.com/questions/10673779/master-not-running)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T18:07:02.687

这可能会有所帮助。但首先你必须使用命令删除早期的安装

> rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup

然后你可以开始在你的 Mac 上全新安装 Hadoop。

第 1 步：安装 Homebrew

> $ ruby​​ -e "$(curl -fsSL [https://raw.github.com/mxcl/homebrew/go](https://raw.github.com/mxcl/homebrew/go) )"

第 2 步：安装 Hadoop

> $ brew 安装 hadoop

假设 brew 安装 Hadoop 1.2.1

第 3 步：配置 Hadoop

> $ cd /usr/local/Cellar/hadoop/1.2.1/libexec

将以下行添加到 conf/hadoop-env.sh：

> 导出 HADOOP_OPTS="-Djava.security.krb5.realm= -Djava.security.krb5.kdc="

将以下行添加到配置标签内的 conf/core-site.xml 中：

> ```
> <property>
> <name>fs.default.name</name>
> <value>hdfs://localhost:9000</value>
> </property> 
> ```

将以下行添加到配置标签内的 conf/hdfs-site.xml 中：

> ```
> <property>
> <name>dfs.replication</name>
> <value>1</value>
> </property> 
> ```

将以下行添加到配置标签内的 conf/mapred-site.xml 中：

> ```
>  <property>
>  <name>mapred.job.tracker</name>
>  <value>localhost:9001</value>
>  </property> 
> ```

转到系统偏好设置 > 共享。确保选中“远程登录”。

> $ ssh-keygen -t rsa $ cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

第 4 步：启用 SSH 到 localhost

> $ cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

第 5 步：格式化 Hadoop 文件系统

> $ bin/hadoop 名称节点-格式

第 6 步：启动 Hadoop

> $ bin/start-all.sh

确保所有 Hadoop 进程都在运行：

> $ 日元

运行一个 Hadoop 示例：

还有一件事 ！“brew update” 会将 hadoop 二进制文件更新到最新版本（目前为 1.2.1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T17:21:03.117

我有同样的错误：`ConnectException: Connection refused`在所有的secondarynamenode 日志文件中。

但我也在namenode的日志文件中找到了这个：

```
2015-10-25 16:35:15,720 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: Failed to start namenode.
org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /private/tmp/hadoop-admin/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible. 
```

因此我做了一个

```
hadoop namenode -format 
```

问题就消失了。因此，错误消息只是关于名称节点没有成功启动的事实。

# javascript - 准备好在 jquery 文档中绑定时运行的函数

> ID：14932802
> 
> 赞同：2
> 
> 时间：2013-02-18T09:14:09.320
> 
> 标签：javascript, jquery, binding, click

我正在尝试将单击事件绑定到下面的函数，但是当绑定到文档中准备好时，整个函数当前正在运行。

是否可以仅在单击事件上运行它？可能与我的方法的组成方式有关？

提前致谢

```
 $(function() {
        $("#expand-search").on("click", search.resize());
    });

    var search = {

        element: $('#search_advanced'),

        resize: function() {
            search.element.slideToggle(400, 'swing', search.buttonState());
        },
        buttonState: function() {
            if(search.element.is(':hidden')) {
                console.log('hidden');
            } else {
                console.log('visible');
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:15:04.817

您正在调用`function`(handler) 而不是将`reference`函数 (handler) 的 (name) 传递给[**on()**](http://api.jquery.com/on/)。

*改变*

```
 $("#expand-search").on("click", search.resize()); 
```

*到*

```
 $("#expand-search").on("click", search.resize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:19:21.317

事件处理程序[没有括号！](http://quirksmode.org/js/events_tradmod.html#link2)您想传递要执行的函数，而不是执行它的结果。此外，您需要将`search`对象移动到就绪处理程序中，因为您使用选择器进行初始化。

```
$(function() {
    var search = {
        element: $('#search_advanced'),
        resize: function() {
            search.element.slideToggle(400, 'swing', search.buttonState);
        },
        buttonState: function() {
            if(search.element.is(':hidden')) {
                console.log('hidden');
            } else {
                console.log('visible');
            }
        }
    };
    $("#expand-search").on("click", search.resize);
}); 
```

# excel - delphi - 如何设置空值以在delphi中突出特定单元格？

> ID：14932814
> 
> 赞同：0
> 
> 时间：2013-02-18T09:14:59.333
> 
> 标签：excel, delphi

作为标题，我尝试了一些解决方案，但都没有奏效。

```
XLApp.Application.cells[1, 1].Value := '';

XLApp.Application.cells[1, 1].Value := nil;

XLApp.Application.cells[1, 1].Value := EmptyParam; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:21:03.853

可用于清除单元格内容的变量值为`Unassigned`.

```
Cells[1,1].Value := Unassigned; 
```

或者，您可以`Clear`在单元格上使用该方法。

```
Cells[1,1].Clear; 
```

我个人认为后者更具可读性。

# c++ - 为什么这个while循环不会停止？

> ID：14932816
> 
> 赞同：0
> 
> 时间：2013-02-18T09:15:02.363
> 
> 标签：c++

我不明白为什么一旦匹配结束条件，这个while循环就不会停止？

这个想法是用户输入一个 5 位整数，并且可以键入任何其他内容来终止输入过程。但

```
bool noerror(true);
int n(0),part2temp;
vector<int> part2;

while(noerror){
    cout << "Please enter the 5 integer (x to stop)" << endl;
    cin >> part2temp;
    part2.push_back(part2temp);
    n++;

    if (cin.fail()||part2temp>99999||part2temp<10000){
        cout << "End condition matched" << endl;
        cin.clear();
        cin.ignore(10);
        noerror=(false);
    }
}
cout << "escaped loop" << part2[n] << endl; 
```

例如，当我输入 x 时，我从循环的 IF 部分将输出输出到屏幕，但由于某种原因，更改 bool 值不会终止循环，并且文本“转义循环”永远不会显示在屏幕上。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:20:38.753

存在未定义的行为，因为`part2[n]`超出了 的范围，这`vector`可能是以下代码行的输出从未出现的原因：

```
cout << "escaped loop" << part2[n] << endl; 
```

给人的印象是循环没有退出。如果循环只执行一次，那么`n == 1`在`vector`named中只有一个元素`part2`，这意味着 only`part2[0]`有效。要确认此使用`vector::at()`并将其包装在一个`try{}catch(std::out_of_range&)`块中：

```
try
{
    cout << "escaped loop" << part2.at(n) << endl;
}
catch (std::out_of_range const&)
{
    std::cerr << "Access out of range\n";
} 
```

要更正，请确认`vector`is not[`empty()`](http://en.cppreference.com/w/cpp/container/vector/empty)并使用`[n - 1]` or [`vector.back()`](http://en.cppreference.com/w/cpp/container/vector/back)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:37:31.110

你为什么用`cin.ignore()`？如所写，`cin.ignore()`仅在读取 10 个字符后才会返回。您真的希望用户在输入后（在他输入新行之前）必须输入 10 个字符吗？如果您的输入是面向行的，通常的过程是使用`std::getline`读取整行，然后使用解析它`std::istringstream`；或者，您可以使用类似的东西`std::cin.ignore( MAX_INT, '\n' );`，它将忽略下一个新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:38:40.690

改变

> cin.ignore(10);

至

> cin.ignore(10,'\n');

然后循环退出，试试看！

# javascript - 添加的课程没有被记住

> ID：14932821
> 
> 赞同：0
> 
> 时间：2013-02-18T09:15:12.003
> 
> 标签：javascript, jquery

我有一个带有 2 个按钮的导航，当单击一个按钮时，它会加载一个新页面（新页面加载），当单击该按钮时，应该添加一个选择了类名的类......它部分做到了 - 它添加了类，但是当它加载新页面时，该类又被删除了？如何让课程坚持用户点击的内容？

```
$(document).on("click", ".list-mode button", function () {
    $(".list-mode button").removeClass("selected");
    $(this).addClass("selected");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:18:59.373

如果您要导航到新页面，则您使用 JavaScript 对当前页面所做的更改不会出现在新页面中。你真的有三个选择：

1.  使用服务器端代码将正确的类添加到新页面的 HTML 中的正确元素。
2.  在新页面中使用 JavaScript 将正确的类添加到正确的元素；您需要一种方法来确定应将类添加到哪个元素（可能是新页面的 URL 的一部分）。
3.  使用 AJAX 导航，而不是加载一个全新的页面，只需加载新内容并替换已加载页面的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:20:14.247

为此，您需要 cookie 或 DOM 存储。

每当页面要被放弃时，您需要将用户上次所做的存储在某个地方，并使用存储的设置初始化整个按钮。

当您使用 jQuery 时，处理`document.ready`事件并在页面加载时在那里初始化按钮：

```
$(document).ready(function() {
   // Initialize the whole buttons
}); 
```

# qt - Qt中的系统范围互斥锁

> ID：14932824
> 
> 赞同：1
> 
> 时间：2013-02-18T09:15:22.907
> 
> 标签：qt, mutex

我有一个进程，我想检查它是否正在运行，并朝那个方向做出决定，即，我想从另一个实例检查该应用程序的运行实例。

我可以运行 2 个应用程序实例，处理 2 种类型的数据。当第三个实例打开时，它需要检查其类型的另一个实例（来自已创建的 2 个类型）是否已经在运行。如果是这样，新的需要关闭并向其类型的已运行实例发送消息。

正因为如此，我认为`QtSingleApplication`行不通。

我希望创建一个系统范围的互斥体并以这种方式完成检查，但我在 Qt 中没有看到任何系统范围的互斥体。

有 QMutex，它只用于应用程序的线程。

我在网上搜索时也有一些东西`QSystemMutex`，但我想这是一个自定义解决方案？我没有在我的 Qt 安装或助手中找到它。

那么有什么方法可以使用 Qt 创建一个系统范围的互斥锁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:27:07.187

互斥锁被定义为在一个进程中用作对象。您正在寻找流程之外的解决方案。

一个简单的解决方案是使用文件系统。创建一个文件并在进程停止时将其删除。但是，当多个进程从不同的目录运行或应用程序崩溃时，这可能会更难。

更高级的解决方案是使用共享内存对象。这些对象存在于流程之外，可以从任何流程中检查和修改。可以在此处找到有关 QT 共享内存的示例：http:
[//doc.qt.digia.com/4.7-snapshot/ipc-sharedmemory.html](http://doc.qt.digia.com/4.7-snapshot/ipc-sharedmemory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:46:04.150

你绝对可以用`QtSingleApplication`. 如果应用程序已经在运行，则没有任何义务要求您终止。您可以在提供的内容之上定义引导协议`QtSingleApplication`，即您将其 api 用作*锁定原语*。

您可以做的是向正在运行的实例发送具有特定类型的消息，例如该类型的字符串表示。很简单：您向正在运行的实例发送一条消息，他会告诉您是否欢迎您。

*   每次应用程序启动时，它都会监听消息（即使有一个正在运行）。如果类型与他的不同，他只能确认一条消息。
*   如果没有应用程序在运行，他会直接开始工作。
*   如果有一个应用程序正在运行，他会发送一个*hello 消息*（例如他的类型）并等待 ACK、NACK 或超时。您决定如果超时该怎么办。
*   如果您正在等待回复并且收到*您好*，您拒绝。

ps：你描述的不完全是互斥锁。以下代码

```
int main(int argc, char **argv) {
   QtSingleApplication app(argc, argv);

   if (app.isRunning())
       return 0;
   //blah blah blah
} 
```

已经是互斥体了。

# android - 禁用 GCM 推送通知

> ID：14932825
> 
> 赞同：2
> 
> 时间：2013-02-18T09:15:24.310
> 
> 标签：android, google-cloud-messaging

我为我的 Android 应用程序使用 GCM 推送通知，它基本上是一个即时通讯工具，如 Line/What's App。在我的应用程序中，即使在用户注销后，推送通知也会继续发生。换句话说，我无法控制通知。

理想情况下，我希望在用户退出应用程序时停止通知并在他登录后恢复。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T09:27:35.690

你应该使用`SharedPreferences`.

如果应该提醒用户，您应该有一个包含该值的首选项。假设，一旦用户注销 - 将首选项值设置为 false。现在，在您的 GCMIntentService`onMessage`方法中，检查首选项的值，如果它为假，则什么也不做。

看看这个例子：

[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T09:36:27.857

`GCMRegistrar.unregister(context);`当用户退出时调用该方法停止接收推送消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:43:00.040

您必须注销您的应用程序以避免收到进一步的推送通知。您可以使用 GCMRegistrar.unregistrar() 来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T17:30:49.173

由于不推荐使用 Google unregister() 方法，请改用 `InstanceID.deleteInstanceID()`.

# android - 由于 ImageView NullPointerException 导致应用程序崩溃

> ID：14932830
> 
> 赞同：0
> 
> 时间：2013-02-18T09:15:33.123
> 
> 标签：android, nullpointerexception, imageview

我正在尝试使用下面的代码在弹出窗口中显示图像。基本上有一个音频文件列表，当我点击它时，会出现一个弹出窗口，显示它的专辑封面（这是我期望它做的）。但是，应用程序崩溃了。LogCat 给出了一个`NullPointerException`——我相信这是`ImageView`唯一的。这是我的代码：

```
public class MainActivity extends SherlockListActivity {
    Uri sourceUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    @SuppressWarnings("deprecation")
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        @SuppressWarnings("unused")
        ActionBar ab = getSupportActionBar();
        String[] from = {MediaStore.MediaColumns.TITLE,MediaStore.MediaColumns.DATA};
        int[] to = {android.R.id.text1};

        CursorLoader cursorLoader = new CursorLoader(this,sourceUri,null,null,null,MediaStore.Audio.Media.TITLE);
        Cursor cursor = cursorLoader.loadInBackground();
        startManagingCursor(cursor);
        ListAdapter adapter = new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1,cursor,from,to,CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        setListAdapter(adapter);

    }
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Cursor cl = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        cl.moveToPosition(position);
        String loc = cl.getString(cl.getColumnIndex(MediaStore.MediaColumns.DATA));
        File f = new File(loc);
        MusicMetadataSet mmds;
        try {
            mmds = new MyID3().read(f);
            if(mmds!=null){
            MusicMetadata mmd =  (MusicMetadata)mmds.getSimplified();
            String s = mmd.getArtist() +"-"+mmd.getSongTitle();
            Toast.makeText(this,s,Toast.LENGTH_SHORT).show();
            @SuppressWarnings("unchecked")
            Vector<ImageData> img = mmd.getPictureList();
                if(!img.isEmpty()){
                    byte[] imgData = img.get(0).imageData;
                    Bitmap bmp = BitmapFactory.decodeByteArray(imgData, 0, imgData.length);
                    LayoutInflater layoutInflater=(LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
                    View popupView = layoutInflater.inflate(R.layout.popup, null);
                    final PopupWindow popupWindow = new PopupWindow(popupView,100,100);

                                /**** PROBLEM BECAUSE OF THIS ************/
                    ImageView iv = (ImageView)findViewById(R.id.imageView);
                    iv.setImageBitmap(bmp);

                    popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 0);
                    Button btnOk = (Button)popupView.findViewById(R.id.btnOk);
                    btnOk.setOnClickListener(new OnClickListener() 
                    {                    
                        @Override
                        public void onClick(View v) 
                        {
                            popupWindow.dismiss();  //dismissing the popup
                        }
                    });

                }
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我该如何解决？这是我的`popup.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:orientation="vertical"
  android:background="#90FFFFFF"
  android:layout_height="wrap_content">

  <TextView
      android:layout_width="fill_parent"
      android:text="@string/art"
      android:textColor="#000000"
      android:gravity="center"
      android:textStyle="bold"
      android:layout_height="wrap_content">
  </TextView>
  <ImageView
      android:layout_width="fill_parent"
      android:id="@+id/imageView"
      android:contentDescription="@string/art"
      android:layout_height="wrap_content"
      />
  <Button
      android:layout_width="fill_parent"
      android:id="@+id/btnOk"
      android:text="@string/ok"
      android:layout_height="wrap_content">
  </Button>
</LinearLayout> 
```

问题是，`TextView`和`Button`看起来就好了。奇怪的是，`ImageView`只有！请帮忙，这让我发疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:17:12.323

更改您的代码

```
 ImageView iv = (ImageView)findViewById(R.id.imageView); 
```

到

```
 ImageView iv = (ImageView)popupView.findViewById(R.id.imageView); 
```

# ios - iOS App 未显示在 App Store 的“新”类别下

> ID：14932833
> 
> 赞同：1
> 
> 时间：2013-02-18T09:15:36.907
> 
> 标签：ios, app-store

我的 iOS 应用程序更新在星期六获得批准。我在它被批准后立即发布了它（让它为开发者发布而保留），然后它保持在“正在处理 App Store”状态大约 12 小时。

在“Ready for sale”的时候，在App Store的“New”下没有出现？！我搜索了它分配到的每个类别，但它没有出现在任何地方。

所以，我的问题是：可能是什么原因？

*   更改图标/类别/任何元数据是否会影响处理持续时间以及它仍然显示在“新”下的可能性？
*   是因为我的应用程序为 App Store 处理了很长时间，以至于它被推到了“新”队列中吗？
*   “等待开发者发布”是否与它有关？
*   还是只是新应用程序并不总是显示在“新”下？

我真的很想知道应用程序是如何进入“新”类别的，以及我的应用程序完全跳过了这部分可能会做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:52:13.617

“新”部分中的应用程序按首次发布的批准日期排序。更新不在“新”部分。如果您想推广您的应用程序，您将不得不使用付费广告的传统方式。因为只有几次下载，您才会进入另一个部分，例如“热门下载”或“热门收入”。免费推送应用程序下载的另一个技巧是将其价格降低大约一周，因为有几个工具和网络服务突出了应用程序商店的价格下降。

# c# - 会员资格中的 EnablePasswordReset

> ID：14932835
> 
> 赞同：2
> 
> 时间：2013-02-18T09:15:39.697
> 
> 标签：c#, asp.net, telerik, asp.net-membership

我想重设用户密码。我有一个类似以下代码的方法。`EnablePasswordReset`不会覆盖，因为它是抽象的。我已经更改了 web.config。但是还是报错：

> 未启用密码重置。将成员资格提供程序的 EnablePasswordReset 属性设置为 true。

如何设置`EnablePasswordReset`值`true`？

```
 public static string ResetCurrentUserPassword(string userName)
  {
      MembershipProvider p = (MembershipProvider)Membership.Providers["Default"];
      //p.EnablePasswordReset value false;
      MembershipUser obj = Membership.GetUser(userName);

      return obj.ResetPassword();             
  } 
```

网络配置

```
 <siteMap defaultProvider="SitefinitySiteMap">
            <providers>
                <add name="SitefinitySiteMap" type="Telerik.Sitefinity.Web.SitefinitySiteMap, Telerik.Sitefinity" enablePasswordReset="true" taxonomyProvider="OpenAccessDataProvider" pageTaxonomy="Pages" rootNode="FrontendSiteMap" pageProvider="OpenAccessDataProvider"/>
            </providers>
        </siteMap>
        <roleManager enabled="false"/>
        <membership defaultProvider="Default">
            <providers>
                <clear/>
                <add name="Default" type="Telerik.Sitefinity.Security.Data.SitefinityMembershipProvider, Telerik.Sitefinity" enablePasswordReset="true"/>
            </providers>
        </membership> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:19:11.420

设置在您的`web.config`文件中；

```
enablePasswordReset="true" 
```

查看[*MSDN*](http://msdn.microsoft.com/en-us/library/system.web.security.membership.enablepasswordreset.aspx)示例；

```
<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="20">
  <providers>
    <add name="SqlProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="SqlServices"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="true"
      passwordFormat="Hashed"
      applicationName="MyApplication" />
  </providers>
</membership> 
```

你说，你以前做过，请像这样检查你的代码隐藏；

```
if (!Membership.EnablePasswordReset)
{

} 
```

检查您的会员是否真的在使用它。

# mysql - 我，收到错误 - 警告：mysql_fetch_assoc() 期望参数 1 是资源

> ID：14932836
> 
> 赞同：1
> 
> 时间：2013-02-18T09:15:44.840
> 
> 标签：mysql, compiler-errors

这是代码......

```
<?php
include('../inc/php/inc/dbc.php');
$query = "SELECT * FROM available_fsv WHERE a_status = '1'";
$result_query = mysql_query($query);

while($row = mysql_fetch_assoc($result_query)){ 

        $billingid = $row['billingid'];

$query = "UPDATE available_fsv SET b_status = '1' WHERE billingid = '$billingid'";
$result_query = mysql_query($query);
echo $result_query; 
}
?> 
```

我得到的错误............

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in C:\wamp\www\php\fsv_shutdown_cron.php on line 6 
```

数据库结构就像——

```
____________________________________________________
|   id   |   a_status | b_status    | billingid    |
|--------|------------|-------------|--------------|
|    1   |    1       |     0       |      1       |
|--------|------------|-------------|--------------|
|    2   |    0       |     0       |      12      |
|--------|------------|-------------|--------------|
|    3   |    0       |     0       |      9       |
|--------|------------|-------------|--------------|
|    4   |    1       |     0       |      3       |
|________|____________|_____________|______________| 
```

我想做的是如果 a_status 为 1，则将 b_status 更新为 1。

我正在学习 php，我知道这是一个愚蠢的问题，但请帮助我。提前致谢.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:20:15.827

你搞砸了`$query`and `$result_query`，它们出现`twice`在代码中

错误就`while($row = mysql_fetch_assoc($result_query)){` 行了..这里你`$result_query`只是你的`update`查询的响应..

试试这个 ：

```
<?php
 include('../inc/php/inc/dbc.php');
 $query = "SELECT * FROM available_fsv WHERE a_status = '1'";
 $result_query = mysql_query($query);

 while($row = mysql_fetch_assoc($result_query)){ 
    $billingid = $row['billingid'];
    $update_query = "UPDATE available_fsv SET b_status = '1' WHERE billingid = '$billingid'";
    $update_result_query = mysql_query($update_query);
    echo $update_result_query; 
    echo "<br />";
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:16:52.993

此调用`mysql_query($query)`返回 FALSE，而不是结果集，这意味着您的查询中有错误。使用以下代码查看错误：

```
$result_query = mysql_query ($query);
if ($result_query === FALSE)
{
    echo (mysql_error ());
    die (1);
} 
```

看来我错了。`$result_query`当您执行更新查询时，您确实会覆盖原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:17:23.293

您可以使用内联直接更新`IF`

```
UPDATE tableName
SET    b_status = IF(a_status = 1, 1 , b_status ) 
```

如果您正在执行此操作，则无需在数据库上进行两次通信。

# java - java EE 应用程序的 SMS 身份验证

> ID：14932844
> 
> 赞同：0
> 
> 时间：2013-02-18T09:16:48.367
> 
> 标签：java, jakarta-ee, authentication, sms-gateway

我正在使用 Java EE 创建一个应用程序。

我在 PostgreSQL 数据库中为用户数据（用户名、密码、角色）创建了一个表。我想创建一个安全领域或类似的东西来放置一些 servlet。目标是生成唯一代码并将其发送到用户编号，以便用户可以登录应用程序。这个领域的目的是加强认证机制。

我遇到的问题是我不知道是否有框架/API 可以帮助我实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:23:35.890

您需要访问某些 SMS 提供商。您很可能必须为此付费，并且很可能他们提供了类似 HTTP REST 的 API。您将需要[httpclient](/questions/tagged/httpclient "显示标记为“httpclient”的问题")或简单`URL`的类来发出请求并发送消息 (MT)。

接收传入消息是类似的。通常，您必须公开一些简单的 URL，当消息被发送回给您时，SMS 提供商将调用这些 URL。Servlet 和公共 IP 足以处理传入 (MO) 流量。

寻找 SMS 提供商并与他们签订合同。他们将为您提供文件。不幸的是，没有标准的 API。存在低级[SMPP](http://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer)，但提供商通常不会公开它。

我知道没有框架支持。但这就像生成随机密码一样简单，将其存储在数据库中，发送给用户并在客户回复时将其读回。

# android - 在android中保存捕获的图像

> ID：14932847
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:16:52.500
> 
> 标签：android, android-camera

我尝试在我的 android 应用程序中不使用本机相机应用程序拍照。我想将捕获的图片保存在单独的文件夹中。我从 onPictureTaken() 获取图像的字节数组。我想将这张图片保存到一个单独的文件夹中，并带有文件名。这怎么可能。我的代码片段如下：

```
 mCamera.mCameraInstance.takePicture(null, null,
            new Camera.PictureCallback() {

                @Override
                public void onPictureTaken(byte[] data, final Camera camera) {

         byte[] capturedBytes=data;

                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:33:43.857

这就是我正在使用的。takePicture 使用 jpegCallback。jpegCallback 将图像保存到 sdcard，然后重新启动预览。

```
preview.camera.takePicture(null, null, jpegCallback);

PictureCallback jpegCallback = new PictureCallback() { // <8>
  public void onPictureTaken(byte[] data, Camera camera) {
    FileOutputStream outStream = null;
    try {
      // Write to SD Card
      outStream = new FileOutputStream(String.format("/sdcard/before.jpg")); 
      outStream.write(data);
      outStream.close();
    } catch (FileNotFoundException e) { // <10>
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } finally {
    }
    camera.startPreview();
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:21:45.300

看看：[https ://stackoverflow.com/a/7982964/944070](https://stackoverflow.com/a/7982964/944070)

也不要忘记清单权限[WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# opengl - 使用 CARenderer 将 CALayer 渲染到 openGL 3.2

> ID：14932848
> 
> 赞同：1
> 
> 时间：2013-02-18T09:16:57.530
> 
> 标签：opengl, core-animation

我想在 openGL 3.2 Core 中将 CALayer 渲染到我的 openGL 上下文中。

我正在使用 CARenderer 渲染图层，但是当我尝试渲染时出现以下错误。

CoreAnimation：不支持的图形硬件；需要两个或更多纹理单元；需要 ARB_texture_rectangle 扩展；需要 EXT_framebuffer_object 扩展；需要 ARB 着色器扩展。

当我要求使用旧版本的 openGL 时，不会出现此问题。在 rendererWithCGLContext:options: 中是否有要传递给 CARenderer 的常量？

# report - ReportViewer 的免费替代品

> ID：14932856
> 
> 赞同：1
> 
> 时间：2013-02-18T09:17:33.000
> 
> 标签：report, reportviewer

在我的应用程序中，我需要生成两种不同类型的报告。- 每页一个业务对象报告，其中实际数据写入适当的占位符 - 使用分组和摘要行跨越多个页面的表格报告。

目前我正在使用 ReportViewer，但我正在寻找免费的替代品。

我发现了一些类似的问题，例如[ReportViewer 的替代方案](https://stackoverflow.com/questions/2638933/alternative-to-reportviewer)，但它们有点过时了，因此在头脑中可能会有新的库/产品可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:34:40.333

如果您正在寻找一些开源和免费的报告工具，那么您应该看到[fyiReporting](http://www.fyireporting.com/)。有关更多详细信息，请参阅这个[问题](https://stackoverflow.com/questions/2258502/free-cross-browser-reporting-tool-for-asp-net)和[这个](https://stackoverflow.com/questions/202817/open-source-net-reporting-tool)问题，您还可以在其中找到一些 .net 的开源报告工具。[iTextSharp](http://itextsharp.com/cgi-sys/defaultwebpage.cgi)也值得一试

# azure - 如何在我的容器中找到特定的 blob

> ID：14932860
> 
> 赞同：0
> 
> 时间：2013-02-18T09:17:51.177
> 
> 标签：azure, azure-blob-storage

我想访问容器中的特定 blob，但我尝试了一些不同的方法，但我想了解在容器中查找特定 blob 的最佳方法是什么。这是我的代码：

```
 var game = Get<Game>().SingleOrDefault(x => x.Name == name);

            var account = CloudStorageAccount.FromConfigurationSetting("blobConnection");

            var container = account
                                   .CreateCloudBlobClient()
                                   .GetContainerReference("gamehtmls");

            var blobUri = container.ListBlobs().SingleOrDefault(x => x.Uri.ToString().ToLower().Contains(name.ToLower()));

            var blobName = blobUri.Uri.AbsolutePath.Replace("/gamehtmls/", "");

            var blob = container.GetBlobReference(String.Format("{0}index.html", blobName));
            blob.Properties.ContentType = "text/html"; 
```

而且在这个容器中，我有两个游戏，它们的名称是：Galactians 和 Galactians2，所以我的代码不适用于这个游戏。

有人对我有建议吗？

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:55:16.983

您的问题更多是您如何搜索目录的问题，而不是 Azure 的问题。

String.Contains 会将包含字符串“Galactians”的任何目录与“Galactians”、“Galactians2”和“my cat is named Galactians99”进行匹配。也许只是...

```
var blobUri = container.ListBlobs().SingleOrDefault(x => x.Uri.ToString().ToLower() == name.ToLower()); 
```

...如果有一些您无法检测到的额外字符，将完全匹配名称甚至 String.StartsWith。

# c# - 以可编辑模式在 webbrowser 控件中加载本地 html 文件

> ID：14932863
> 
> 赞同：1
> 
> 时间：2013-02-18T09:17:58.677
> 
> 标签：c#, .net, winforms, webbrowser-control

我想以*可编辑*模式在 webbrowser 控件中加载本地 html 文件。我在 webBrowser 中加载 html 文件的代码是：

```
private void LoadFile(string filename)
{
    using (StreamReader reader = File.OpenText(filename))
    {
       webBrowser1.DocumentText = reader.ReadToEnd();
       reader.Close();
       Text = webBrowser1.DocumentTitle;
    }
} 
```

但它不可编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:25:49.643

请检查此片段。

```
 webBrowser1.AllowWebBrowserDrop = false;
    webBrowser1.Url = new Uri(@"D:\TEMP\sample.htm"); 
```

# language-agnostic - 有没有一种工具可以自动、静默地将所需的开发工具/包一次性安装到机器上

> ID：14932865
> 
> 赞同：0
> 
> 时间：2013-02-18T09:18:15.877
> 
> 标签：language-agnostic

我正在寻找一种工具（首选开源），它可以一次将所需的软件（如 ASP.NET MVC 等）安装到我的机器上。一旦我知道有一个适用于 Windows 的开源工具，但我忘记了名字。因此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:19:59.320

[http://chocolatey.org/](http://chocolatey.org/)可以编写脚本并且有很好的软件包集合。试试看。

# php - 附加目录中的文件并使用 codeigniter 发送到电子邮件

> ID：14932869
> 
> 赞同：0
> 
> 时间：2013-02-18T09:18:23.307
> 
> 标签：php, file-upload, codeigniter-2, uploadify, email-attachments

我是一个使用 codeigniter 的新手，我想使用 codeigniter 框架构建一个网站。从一开始，它看起来不错，我可以使用数据库、验证、电子邮件、会话，然后我尝试附加文件并使用电子邮件发送：

> $this->email->attach('/path/ofyour/constan/file.anything');

那也有效。

因为那是一个网站，所以我希望我的客户选择他们要上传的文件。我尝试了很多方法，其中许多方法告诉将文件上传到服务器根目录并获取 file_data，使用 file_data[file_patch]

> $this->email->attach('file_data[file_path]');

问题是：

1.  由于代码点火器无法上传多个数据，我必须使用插件。我试过了，它的痛苦

2.  我觉得它无效，将数据上传到服务器根目录然后发送到电子邮件？

3.  最好只获取上传文件的file_path并将它们发送到电子邮件，如何？

我用 jquery mobile 构建它，我该怎么办？

# 更新

好的，我决定使用 uploadify 我搜索每个网站，然后我在[这里](http://ellislab.com/forums/viewthread/109751/)找到了，我的代码是

上传.php

```
<?php
/*
*   Functions taken from CI_Upload Class
*
*/

    function set_filename($path, $filename, $file_ext, $encrypt_name = FALSE)
    {
        if ($encrypt_name == TRUE)
        {       
            mt_srand();
            $filename = md5(uniqid(mt_rand())).$file_ext;   
        }

        if ( ! file_exists($path.$filename))
        {
            return $filename;
        }

        $filename = str_replace($file_ext, '', $filename);

        $new_filename = '';
        for ($i = 1; $i < 100; $i++)
        {           
            if ( ! file_exists($path.$filename.$i.$file_ext))
            {
                $new_filename = $filename.$i.$file_ext;
                break;
            }
        }

        if ($new_filename == '')
        {
            return FALSE;
        }
        else
        {
            return $new_filename;
        }
    }

    function prep_filename($filename) {
       if (strpos($filename, '.') === FALSE) {
          return $filename;
       }
       $parts = explode('.', $filename);
       $ext = array_pop($parts);
       $filename    = array_shift($parts);
       foreach ($parts as $part) {
          $filename .= '.'.$part;
       }
       $filename .= '.'.$ext;
       return $filename;
    }

    function get_extension($filename) {
       $x = explode('.', $filename);
       return '.'.end($x);
    } 

// Uploadify v1.6.2
// Copyright (C) 2009 by Ronnie Garcia
// Co-developed by Travis Nickels
if (!empty($_FILES)) {
    $path = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
   //$client_id = $_GET['client_id'];
   $file_temp = $_FILES['Filedata']['tmp_name'];
   $file_name = prep_filename($_FILES['Filedata']['name']);
   $file_ext = get_extension($_FILES['Filedata']['name']);
   $real_name = $file_name;
   $newf_name = set_filename($path, $file_name, $file_ext);
   $file_size = round($_FILES['Filedata']['size']/1024, 2);
   $file_type = preg_replace("/^(.+?);.*$/", "\\1", $_FILES['Filedata']['type']);
   $file_type = strtolower($file_type);
   $targetFile =  str_replace('//','/',$path) . $newf_name;
   move_uploaded_file($file_temp,$targetFile);

   $filearray = array();
   $filearray['file_name'] = $newf_name;
   $filearray['real_name'] = $real_name;
   $filearray['file_ext'] = $file_ext;
   $filearray['file_size'] = $file_size;
   $filearray['file_path'] = $targetFile;
   $filearray['file_temp'] = $file_temp;
   //$filearray['client_id'] = $client_id;

   $json_array = json_encode($filearray);
   echo $json_array;
}else{
    echo "1";   
} 
```

我不知道这里发生了什么，就像我说我是新手，但我知道 $json_array，该数组保存我的数据 $filearray，即上传的数据文件。任务一完成

现在我的控制器：upload.php

```
<?php
class Upload extends CI_Controller
{
public function __construct()
    {
        parent::__construct();

                $this->load->helper('form');
                $this->load->helper('url');

    }
    /*
    *   Display upload form
    */
    function index()
    {

        $this->load->view('view');
    }

    /*
    *   Handles JSON returned from /js/uploadify/upload.php
    */
    function uploadify()
    {

        //Decode JSON returned by /js/uploadify/upload.php
        $file = $this->input->post('filearray');
        $data['json'] = json_decode($file);

        $this->load->view('uploadify',$data);
    }

}
/* End of File /application/controllers/upload.php */ 
```

我的计划是在 onComplete 函数中发送数据

我的看法：view.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<<head>
    <meta charset="UTF-8">
    <title>Uploadify and Codeigniter Tutorial</title>
<?php
   $this->load->helper('html');
   echo link_tag('http://uploadify_tutorial/uploadify/uploadify.css');
   echo '<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>';
   echo '<script src="http://localhost/uploadify_tutorial/uploadify/swfobject.js" type="text/javascript"></script>';
   echo '<script src="http://localhost/uploadify_tutorial/uploadify/jquery.uploadify.v2.1.4.min.js" type="text/javascript"></script>';
$uploadpath="";
$uploadpath=str_ireplace($_SERVER['DOCUMENT_ROOT'],"", realpath($_SERVER['SCRIPT_FILENAME']));
$uploadpath=str_ireplace("index.php","",$uploadpath);
?>

    <script type="text/javascript" language="javascript">
        $(document).ready(function(){

                    $("#upload").uploadify({
                            uploader: '<?php echo base_url();?>uploadify/uploadify.swf',
                            script: '<?php echo base_url();?>uploadify/uploadify.php',
                            cancelImg: '<?php echo base_url();?>uploadify/cancel.png',
                            folder: '/uploads',
                            scriptAccess: 'always',
                            multi: true,
                            'onError' : function (a, b, c, d) {
                                 if (d.status == 404)
                                    alert('Could not find upload script.');
                                 else if (d.type === "HTTP")
                                    alert('error '+d.type+": "+d.status);
                                 else if (d.type ==="File Size")
                                    alert(c.name+' '+d.type+' Limit: '+Math.round(d.sizeLimit/1024)+'KB');
                                 else
                                    alert('error '+d.type+": "+d.text);
                                },
                            'onComplete'   : function (event, queueID, fileObj, response, data) {
                                                //Post response back to controller
                                                $.post('<?php echo site_url('upload/uploadify');?>',{filearray: response},function(info){
                                                    $("#target").append(info);  //Add response returned by controller                                                                         
                                                });                                         
                            }
                    });             
        });
    </script>
</head>

<body>
<h1>Uploadify Example</h1>

    <?php echo form_open_multipart('upload/index');?>

    <p>
        <label for="Filedata">Choose a File</label><br/>
        <?php echo form_upload(array('name' => 'Filedata', 'id' => 'upload'));?>
        <a href="javascript:$('#upload').uploadifyUpload();">Upload File(s)</a>
    </p>

    <?php echo form_close();?>

    <div id="target">

    </div>
</body>
</html> 
```

我的观点：上传

```
<html>
    <ul>

        <li>Extension: <?php echo $json->{'file_ext'};?></li>
        <li>File Size: <?php echo $json->{'file_size'};?></li>
        <li>File Path: <?php echo $json->{'file_path'};?></li>
    </ul>
    </html> 
```

然后将 json_array 变量解析为我的视图，即计划，但实际上代码不起作用数据未定义错误尝试获取非对象的属性我[在这里](https://bitbucket.org/pickupman/codeigniter-uploadify)使用此代码，我想问题出在 json

我只是想使用上传的数据文件如果有人可以解决这个问题请分享或将CI+uploadify程序发送到我的电子邮件，如果有任何关于CI和Uploadify插件的专家请逐步制作教程如何使用它，一步一步一步，我认为这对像我这样的新手会有很大帮助

谢谢....

我的电子邮件：saya.dean@gmail.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:39:03.577

我不太清楚你在哪里遇到问题。'那个变量'将是您上传的文件，是吗？在上传文件路径时创建一个数组，并在上传完成后循环遍历每个电子邮件附件。您是否检查过网站上的其他答案？也许看看[这里](https://stackoverflow.com/questions/3079325/php-send-multiple-attachments-with-email)。但[CI 的文档](http://ellislab.com/codeigniter/user-guide/libraries/email.html)明确指出您可以使用：

```
$this->email->attach('/path/to/that_file.jpg'); 
```

多次。

## **更新：**

您可以尝试在 uploadify 中使用 onUploadSuccess 函数将每个文件名附加到您以后可以使用的内容...

```
 'onUploadSuccess' : function(file, data, response) {
     alert('The file name is ' + file.name);
     ... 
```

或从uploadify.php 中。从那里您可以存储之后附加所需的内容。

**在您的情况下，我会坚持修改 uploadify.php**。如果你被卡住了，你必须试一试并发布一些代码，但是有很多地方可以获得一些想法，比如[这里](https://stackoverflow.com/questions/7363317/uploadify-rename-uploaded-file)和[这里](http://www.uploadify.com/documentation/uploadify/customizing-the-server-side-upload-script/)

# java - 如何在 Java 中提取特定于语言环境的格式的日期字段？

> ID：14932874
> 
> 赞同：7
> 
> 时间：2013-02-18T09:18:42.860
> 
> 标签：java, internationalization, locale, date-format, chinese-locale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:24:44.597

I don't think that any pre-defined constants would exist for year-and-month formatting in zh-CN locale, so you have to format it.

```
 new SimpleDateFormat("yyyy年M月").format(date) 
```

As `SimpleDateFormat` says (highlighted by me):

> Date and time formats are specified by date and time pattern strings. Within date and time pattern strings, unquoted letters from 'A' to 'Z' and from 'a' to 'z' are interpreted as pattern letters representing the components of a date or time string. Text can be quoted using single quotes (') to avoid interpretation. "''" represents a single quote. **All other characters are not interpreted**; they're simply copied into the output string during formatting or matched against the input string during parsing.

So, it is safe to put chinese characters into the format string this way.

Since Java is Unicode, you can inline the characters in your source as long as you compile with unicode source character set. Otherwise you should read this String externally, e.g. from some Unicode property file or database.

# java - 在 Java 中对 C 对象进行类型转换或解码

> ID：14932875
> 
> 赞同：0
> 
> 时间：2013-02-18T09:18:43.683
> 
> 标签：java, c

如何在不使用 CORBA、SWIG 等中间体的情况下在 Java 中对 C 对象进行类型转换或解码？

我需要从 C 到 Java 的直接方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:20:28.610

您正在寻找[Java Native Interface](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/)，它允许您拥有实现是“本机”（编译的非 Java 代码）的 Java 方法，还允许您在“本机”（编译的非 Java）应用程序中嵌入 JVM . “本机”部分可以用 C 编码。

# xml - 将 xsl:template 的执行限制为指定的次数

> ID：14932885
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:07.970
> 
> 标签：xml, xslt, loops

这是我的 XSLT：

```
<!-- Looping through both Items and Categories of Items -->
<xsl:for-each select="statement">

    <!-- Define whether current node is a single item or a category of items -->
    <xsl:choose>

        <!-- Category of items -->
        <xsl:when test="statement">

            <!-- Render all items in this category -->
            <xsl:for-each select="statement">
                <xsl:call-template name="renderItem" select="current()" />
            </xsl:for-each>

        </xsl:when>

        <!-- Single item -->
        <xsl:otherwise>
            <xsl:call-template name="renderItem" select="." />
        </xsl:otherwise>

    </xsl:choose>

</xsl:for-each> 
```

我希望能够输出特定数量的项目，但不是全部。如何使“renderItem”执行不超过 4 次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:53:12.960

您的代码看起来很奇怪：所有这些 xsl:choose、xsl:for-each 和 xsl:call-template 看起来都像是应用模板和模板规则的自制实现。此外，xsl:call-template 没有选择属性——这是一个语法错误，您的 XSLT 处理器应该将其标记为这样，而不是简单地忽略它。

忽略这一点，我认为解决问题的最简单方法是通过检查项目在树中的位置来测试是否要处理项目。就像是

```
<xsl:template match="statement">
  <xsl:variable name="pos">
    <xsl:number level="any" from="..."/>
  </xsl:variable>
  <xsl:if test="$pos &lt; 5">...
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:39:53.363

您的问题的解决方案依赖于使用递归，手动控制模板执行的次数（或计算项目呈现的次数）。

与其说是解决您的问题，不如说是如何实现它的想法（我不知道您的 XML 文件是什么样子），但是我尝试调整您发布的代码（可能不正确，没有我的 XML没有把握）。

```
<xsl:template match="renderItems">
    <!-- Set of items to process -->
    <xsl:param name="items" />
    <!-- Tracks number of times that this template is going to be executed -->
    <xsl:param name="count" />

    <!-- Check if we have available executions -->
    <xsl:if test="$count > 0">
        <!-- Define whether the current node is a single item or a category of items -->
        <xsl:choose>
            <!-- Category of items -->
            <xsl:when test="$items/statement">
                <!-- Select the number of items which are going to be rendered taking into
                     account the count parameter -->
                <xsl:variable name="items-to-render"
                              select="$items/statement[position() &lt;=$count]" />
                <!-- Render item in this category -->
                <xsl:for-each select="$items-to-render">
                    <!-- 
                        Do whatever you have to do with each item
                    -->
                </xsl:for-each>
                <!-- Call this template again with the updated values -->
                <xsl:call-template name="renderItems">
                    <!-- Remove the category of items from the items to be processed -->
                    <xsl:with-param name="items"
                                    select="$items[position() > 1]" />
                    <!-- Extract from the count, the number of items that we already processed -->
                    <xsl:with-param name="count"
                                    select="$count - count($items-to-render)" />
                </xsl:call-template>
            </xsl:when>
            <!-- Single item -->
            <xsl:otherwise>
                <!-- Render this item -->
                <!--
                    Do whatever you have to do with each item
                -->
                <!-- Call this template again with the updated values -->
                <xsl:call-template name="renderItems">
                    <!-- Remove this item from the items to be processed -->
                    <xsl:with-param name="items"
                                    select="$items[position() > 1]" />
                    <!-- One item less to process -->
                    <xsl:with-param name="count"
                                    select="$count - 1" />
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>       
    </xsl:if>

</xsl:template> 
```

然后你可以使用（或类似的东西）调用模板。

```
<xsl:call-template name="renderItems">
    <xsl:with-param name="items"
                    select="statement" />
</xsl:call-template> 
```

# php - 使用 smarty 将数组转换为字符串时出错

> ID：14932887
> 
> 赞同：1
> 
> 时间：2013-02-18T09:19:15.023
> 
> 标签：php, arrays, string, smarty

我正在尝试在我在 php 上制作的 smarty 模板上打印一个数组。我得到这个错误：

注意：第 87 行 C:\wamp\www\smarty\templates_c\e43b807af9cc8df7d350c3baf9e47f167c9520a0.file.index.tpl.php 中的数组到字符串转换

我想不出如何解决它。你能告诉我错误在哪里吗？

这是我在 php 中创建数组的部分

```
function get_db_results()
{
    $mysql = "SELECT COUNT(*) FROM question";
    $myresult = mysql_query($mysql);
    $myr = mysql_fetch_row($myresult);
    SmartyPaginate::setTotal($myr[0]);
    $index = SmartyPaginate::getCurrentIndex();
    $limit =SmartyPaginate::getLimit();
    $rsql = "SELECT question_title FROM question ORDER BY question_id DESC LIMIT $index, $limit ";

    $rresult = mysql_query($rsql);
    //$column = array();

    while($rrow = mysql_fetch_array($rresult , MYSQL_ASSOC))
    {
        $column[]=$rrow;

    }

    return $column;
}
$smarty->assign('results', get_db_results()); 
```

这是聪明的部分：

```
{section name=res loop=$results}
    {$results[res]}
{/section} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:21:41.480

更改`{$results[res]}`为`{$results.res}`假设您的数组中有键“res”

通过查看您的功能，我猜它应该是：

```
{$results.question_title} 
```

这是解决方案：

```
{foreach from=$results item=results name=results}
    {$results.question_title}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:31:30.370

首先**删除**所有缓存文件`C:\wamp\www\smarty\templates_c\`，然后尝试这样，`{$results[res].YOUR FIELD NAME}`因为您使用了`{section}{/section}`.

**例如** `{$results[res].question_title}`

希望能帮到你。

# javascript - 应用 js 代码（appjs.serveFilesFrom）从目录提供静态文件不起作用？

> ID：14932890
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:32.653
> 
> 标签：javascript, appjs

我在我的桌面应用程序中使用 appjs（使用 nodejs + chromium）。我需要在我的 app.js 文件中包含 js 文件并调用这些文件中定义的函数（主要在使用 app.createMenu(..) 创建的菜单中）。因此，我尝试使用[http://appjs.org/](http://appjs.org/)、[http://comments.gmane.org/gmane.comp.lang.javascript.nodejs/45736](http://comments.gmane.org/gmane.comp.lang.javascript.nodejs/45736)中给出的以下代码包含文件，但它不起作用：

```
var appjs = require('appjs');

// serve static files from a directory
appjs.serveFilesFrom(__dirname + '/content'); 
```

是否需要添加其他任何内容才能使此代码正常工作？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:05:21.107

`.serveFilesFrom()`仅在`content`目录中提供静态资产。对于静态，这意味着 CSS、HTML 和图像以及**客户端**JavaScript。

你仍然需要自己处理请求和依赖管理。不过，这很容易掌握。

一个好的方法是使用 AppJS 主页上提供的现有启动程序包分发包之一开始开发您的应用程序（确保为您的操作系统选择正确的包），因为它将包含所有样板文件为您编写的代码和配置。

# c++ - C++ 适配器 - 用于具有相同名称但不同返回类型的方法

> ID：14932892
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:37.790
> 
> 标签：c++, boost, adapter

我一直在尝试在 C++ 中找到两个外部接口的适配器解决方案，它们非常相似，但枚举中的返回类型不同。

```
enum
{
   SAME_VALUE1,
   SAME_VALUE2
} EnumTypeA

enum
{
   SAME_VALUE1,
   SAME_VALUE2,
   DIFFERENT_VALUE3
} EnumTypeB

class A // not inherited
{
    EnumTypeA Method();
}

class B // not inherited
{
    EnumTypeB Method();
} 
```

您对解决方案有任何想法，以便我可以使用包装器来调用接口 A 或 B？

```
ReturnType? MyAdapter::Method()
{
// Call Method from A or B but how
} 
```

问候， 布拉克

补充说明：我已经使用 Boost.Variant 解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:49:51.383

据我所知，不可能编写具有可变返回类型的函数。因此，我会推荐如下内容：

```
enum ReturnTypeEnum
{
    ReturnTypeA,
    ReturnTypeB
};

struct ReturnType
{
    ReturnTypeEnum actualType;
    union 
    {
        EnumTypeA a;
        EnumTypeB b;
    }actualValue;
}

ReturnType MyAdapter::Method()
{
    ReturnType retval;

    //Call method from A or B, whichever necessary
    //and construct retval accordingly.

    return retval;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:38:07.273

我将创建一个具有自己返回值的适配器接口。

```
struct Adapter
{
    virtual ~Adapter() {}

    enum Enum {
        VALUE1,
        VALUE2,
        VALUE3,
    };

    virtual Enum Method( ) = 0;
}; 
```

然后为 A 和 B 创建一个适配器。

```
struct AdapterA : public Adapter {
    Enum Method( ) override { return Enum( a.Method() ); };    
    A a;
};

struct AdapterB : public Adapter {
    Enum Method( ) override { return Enum( b.Method() ); };    
    B b;
}; 
```

这些很可能需要在单独的实现文件中，以免在`SAME_VALUE1`编译时发生冲突。然后您可以执行以下操作：

```
std::unique_ptr<Adapter> drv;

drv.reset( new AdapterA() );
drv->Method();

drv.reset( new AdapterB() );
drv->Method(); 
```

# subdomain - 第二个域和“/”

> ID：14932893
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:41.423
> 
> 标签：subdomain

假设我有一个域`a.com`和一个子域`a.a.com`

子域的文件夹在主域的文件夹内，所以访问和访问`a.com/a/`是一样的`a.a.com`。

如果`index.php`子域中的图像有`url(/a/a.png)`而不是`url(a/a.png)`，当我加载子域时`a.a.com`，

我是否有可能从中下载图像`a.com/a/a.png`而不是`a.a.com/a/a.png`导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:27:56.677

我测试过。这样做是安全的。

# jboss7.x - jBPM 5.4 人工任务中的 onExit

> ID：14932897
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:53.080
> 
> 标签：jboss7.x, jbpm, bpmn

我将 jBPM 5.4 与 MsSql 一起使用。

它工作正常。

我有简单的工作流程，从 START ----> TASK A ----------> TASK B --------> STOP

我正在尝试从 Servlet 访问这样的工作流程

当我执行这样的工作流程时，我可以转发到任务 B 的开始。

**未调用任务 B 的onExit**。

因此，工作流未达到已**完成**状态，但任务表已更新为已完成状态，也未记录任何异常。

这是我的服务器日志，

```
[stdout] (http-localhost-127.0.0.1-8080-1) ****** Creating EMF

[stdout] (http-localhost-127.0.0.1-8080-1) ****** Creating env

[stdout] (http-localhost-127.0.0.1-8080-1) ****** Reading Properties

[stdout] (http-localhost-127.0.0.1-8080-1) ****** config section

[stdout] (http-localhost-127.0.0.1-8080-1) OnEntrying the First Task ***

[stdout] (http-localhost-127.0.0.1-8080-1) Started Process Output 14

[stdout] (http-localhost-127.0.0.1-8080-1) Completed Process Output 14

[stdout] (Thread-73) OnExiting the First Task ***

[stdout] (Thread-73) OnEntrying the Second Task ***

[stdout] (http-localhost-127.0.0.1-8080-1) Started Process Output 15

[stdout] (http-localhost-127.0.0.1-8080-1) Completed Process Output 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:03:59.277

由于它已成功运行第一个任务，因此在第一个任务完成后它似乎可能不会保留更改。您正在使用哪个处理程序类？您能否打开 sql 输出（在您的 persistence.xml 中）并检查在完成第一个任务后是否在流程实例信息类中看到了必要的更改？

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:59:47.373

当您完成任务时，让 ksession 连接到您的任务服务非常重要，以便该会话可以继续执行您的流程。所以：

*   您如何使用任务服务？本地任务服务，还是远程使用 HornetQ？

*   启动流程实例的会话是否仍处于活动状态？或者如果没有，您是否在完成任务之前实例化一个新会话？

*   创建人工任务处理程序后，您是否在其上调用了 connect()？这实际上将处理程序连接到任务服务并注册必要的侦听器

# php - 使用 PDO 的多个数据库

> ID：14932900
> 
> 赞同：0
> 
> 时间：2013-02-18T09:19:56.313
> 
> 标签：php, mysql, pdo, multiple-databases

我对使用 PDO 很陌生，我想对其进行设置，以便在需要时可以拥有多个数据库。因此，我创建了一个函数，允许您传递数据库名称以用作和何时使用。

它在一定程度上确实有效，因为它选择了您传入的数据库，但即使数据库被省略或不正确，它仍然允许您从似乎基于 MySQL 用户随机选择的数据库中选择表和行.

我想这不是一个主要问题，但我想让它到达它不会选择任何数据的地方，除非通过我的函数传递了一个数据库。

我的代码在下面，我会很感激你对我如何更好地解决这个问题的想法。谢谢。

**索引.php**

```
require 'app/cream.php';

try {

    $db = new Cream_Model();
    $db = $db->selectDb( 'cream' );

    $data = $db->query('SELECT * FROM users');
    foreach( $data as $row ) {
        print_r( $row );
    }

} catch( PDOException $e ) {

    echo 'An error has occurrred: ' . $e->getMessage() . '<br />';

} 
```

**模型.php**

```
class Model {

    public $connection;

    public function connect() {

        try {

            $connection = new PDO( DB_DSN . ':' . DB_HOST, DB_USERNAME, DB_PASSWORD, array( PDO::ATTR_PERSISTENT => true ) );
            $connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            $connection->setAttribute( PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC );

        } catch( PDOException $e ) {

            echo 'An error has occurred: ' . $e->getMessage() . '<br />';
            die();

        }

        return $connection;

    }

} 
```

**Cream_Model.php**

```
class Cream_Model extends Model {

    public $conn;

    public function selectDb( $db ) {

        try {

            $conn = $this->connect();
            $conn->exec( "USE $db" );

        } catch( PDOException $e ) {

            echo 'An error has occurred: ' . $e->getMessage() . '<br />';

        }

        return $conn;

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:30:33.750

对于 PDO，您不应该`USE dbname`直接执行。

我认为您有多个 PHP 脚本实例，并且当每个实例都在`USE dbname`PDO 不知道它发生的情况下执行时，会发生什么，这会导致整个混乱。

相反，您应该在 PDO 连接字符串中指定 dbname，例如`'mysql:host=localhost;dbname=testdb'`. 这意味着您在创建 Model 类后无法真正在数据库之间切换。您应该预先知道您的数据库名称并在模型构造函数中使用它。

[在PDO 文档](http://php.net/manual/en/ref.pdo-mysql.connection.php)中阅读更多内容。

# ios - 确定 MKMapView 是否被拖动或缩放

> ID：14932902
> 
> 赞同：3
> 
> 时间：2013-02-18T09:20:01.973
> 
> 标签：ios, mkmapview

在玩地图时，我只需要一种方法来区分这两个事件：

1.  拖动地图视图
2.  缩放地图视图

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:43:59.967

在 MKMapView 委托方法中：

```
- (void)mapView:(MKMapView *)mapView region{Will,Did}ChangeAnimated:(BOOL)animated 
```

将“新”跨度与“旧”跨度进行比较。就像是

```
MKZoomScale currentZoomScale = (CGFloat)(map.bounds.size.width / map.visibleMapRect.size.width); 
```

在面包屑示例项目中。

[http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Listings/Classes_BreadcrumbViewController_m.html](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Listings/Classes_BreadcrumbViewController_m.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:52:03.297

`MKMapView`不是基于`UIScrollView`所以它不调用`UIScrollViewDelegate`方法。但尽管如此，您可以实例化`UIPanGestureRecognizer`和`UIPinchGestureRecognizer`，将它们添加到您的地图视图并使用它们的操作方法。

# android - 集成 Nagare 项目 Android

> ID：14932903
> 
> 赞同：1
> 
> 时间：2013-02-18T09:20:06.573
> 
> 标签：android

有人能告诉我这个示例项目的限制在哪里吗？

当我输入我的 url 并运行项目时，一切运行正常，但是当我将项目导出到我的项目时，播放按钮不会启动。

有人可以帮我找到线索吗？这个项目有什么限制吗？

这是链接[https://github.com/Dawnthorn/nagare](https://github.com/Dawnthorn/nagare)

这里是法律术语

+版权 (c) 2011 peterh@sapros.com

```
2 
```

+

```
3 
```

+特此免费授予任何获得副本的人的许可

```
4 
```

+该软件和相关文档文件（“软件”），以处理

```
5 
```

+在软件中不受限制，包括但不限于权利

```
6 
```

+使用、复制、修改、合并、发布、分发、再许可和/或出售

```
7 
```

+软件的副本，并允许接收软件的人

```
8 
```

+提供这样做，但须符合以下条件：

```
9 
```

+

```
10 
```

+以上版权声明和本许可声明应包含在

```
11 
```

+本软件的所有副本或大部分。

```
12 
```

+

```
13 
```

+本软件按“原样”提供，不提供任何形式的明示或

```
14 
```

+暗示，包括但不限于对适销性的保证，

```
15 
```

+适用于特定目的和不侵权。在任何情况下均不得

```
16 
```

+作者或版权持有人应对任何索赔、损害或其他

```
17 
```

+责任，无论是在合同诉讼、侵权行为还是其他方面，由以下原因引起：

```
18 
```

+与软件或使用或其他交易无关或与之相关

```
19 
```

+软件。

# jsf - JSF 2.0 复合组件不工作

> ID：14932908
> 
> 赞同：1
> 
> 时间：2013-02-18T09:20:28.920
> 
> 标签：jsf, jakarta-ee, jsf-2, jboss7.x, composite-component

我想在我的项目中引入 CC。我在 JBoss 7.1.1 上运行 Java EE 6。

*/myProj/src/main/webapp/composites/scheda.xhtml*：

```
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:composite="http://java.sun.com/jsf/composite">

    <composite:interface>
        <composite:attribute name="prod" />
    </composite:interface>

    <composite:implementation>
        Hello!
    </composite:implementation>

</html> 
```

*/myProj/src/main/webapp/someDir/page.xhtml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   xmlns:composites="http://java.sun.com/jsf/composite/composites"
   template="/templates/default.xhtml">

    <ui:define name="content">

        <p:dialog 
            header="Scheda" 
            widgetVar="schedaDialog" 
            id="schedaDialogId">

            <composites:scheda prod="test" />

        </p:dialog>

    </ui:define>

</ui:composition> 
```

这导致：

> javax.servlet.ServletException: /.../page.xhtml 标记库支持命名空间：http: [//java.sun.com/jsf/composite/composites](http://java.sun.com/jsf/composite/composites)，但没有为名称定义标记：scheda

一些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:26:04.127

您没有将复合组件的 xhtml 放在正确的位置。正如我所看到的，您正在使用 Maven，因此您的复合组件的正确路径应该是：

```
/myProj/src/main/webapp/resources/composites/scheda.xhtml 
```

`resources`是 JSF 查找复合组件的文件夹。

# c# - 我如何从字符串中获取不仅匹配案例？

> ID：14932909
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:20:29.653
> 
> 标签：c#

这是我的代码：

```
public static void ColorListBox(List<string> data, DrawItemEventArgs e, string word)
        {
            int keywords = 0;
            string keyword = null;
            string url = data[e.Index].Substring(0, 5);
            if (data[e.Index].Contains(word))//"Local KeyWord:"))
            {
                keywords = data[e.Index].IndexOf(word);//"Local KeyWord:");
                keyword = data[e.Index].Substring(keywords, word.Length);
            }
            else
            {
                keywords = data[e.Index].IndexOf(word);//"Localy KeyWord:");
                keyword = data[e.Index].Substring(keywords, 15);
            } 
```

当我调用这个函数时，Form1 中的问题：

```
ColorText.ColorListBox(data, e); 
```

我怎么知道要添加的文本？`ColorText.ColorListBox(data, e, "Local KeyWord");`或者`ColorText.ColorListBox(data, e, "Localy KeyWord");`因为当我运行我的程序时它是 Localy KeyWord 但是当我添加一个新的 url 时它是“Local KeyWord”

我在调用函数时需要在 Form1 中覆盖所有选项。在添加变量词之前，我使用了手动字符串“Local KeyWord”和“Localy Keyword”，但现在我想做一些事情，我将输入的每个单词或单词作为单词将在函数中使用。

问题是当我运行我的程序时，变量数据中的字符串是“Localy KeyWord：”，当我在程序运行时添加一个新的 url，那么在数据中，字符串是“Localy KeyWord：”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:29:28.173

由于这不仅仅是一个案例比较，而是实际上不同的词，我会尽快摆脱这些差异：

```
private const string LocalKeyword = "Local Keyword";
private static readonly Dictionary<string, string> keywords = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase)
{
    { "Localy KeyWord:", LocalKeyword },
    { "Localy Keyword", LocalKeyword },
    { "Local Keyword:", LocalKeyword },
    { ... }
}

if (!keywords.TryGetValue(rawKeyword, out realKeyword))
{
    throw new ApplicationException("Unknown keyword or keyword alias!");
}
ColorText.ColorListBox(realKeyword, e) 
```

# ember.js - 在另一个 ContainerView 中交换一个 ContainerView 会导致视图被破坏

> ID：14932914
> 
> 赞同：4
> 
> 时间：2013-02-18T09:20:51.883
> 
> 标签：ember.js

我有一个`ContainerView`可以交换其他视图的方法。我使用另一个`ContainerView`作为内容。在我将其换出后尝试换入嵌套的`ContainerView`，会导致错误：`Uncaught Error: assertion failed: calling set on destroyed object`.

这是小提琴：http: [//jsfiddle.net/hekevintran/bFSKD/](http://jsfiddle.net/hekevintran/bFSKD/)

要使错误发生，请单击“其他表单”，然后单击“第一个表单”。

我认为错误是因为从中删除的视图`ContainerViews`被破坏并且嵌套的子视图`ContainerView`没有重新创建。修复此示例的正确方法是什么？

模板：

```
<script type="text/x-handlebars" data-template-name="box">
<div>
    {{#each forms}}
        <button {{action "selectForm" this }}>{{this.name}}</button>
    {{/each}}
    {{view container}}
</div>
</script>

<script type="text/x-handlebars" data-template-name="form">
    <form>
        {{#each fields}}
            <div>
                {{this.label}}: {{view this.widget}}
            </div>
        {{/each}}
    </form>
</script> 
```

JavaScript：

```
App = Ember.Application.create({});

App.BoxController = Ember.Object.extend({
    initialForm: null,
    currentForm: null,
    init: function () {
        var form = this.get('initialForm');
        this.set('currentForm', form);
        this.get('container').set('currentView', form.get('view').create());
    },
    forms: [],
    container: function () {
        return Ember.ContainerView.create({
            boxController: this,
            controllerBinding: 'boxController.currentForm'
        })
    }.property(),
    selectForm: function (form) {
        this.set('currentForm', form);
        this.get('container').set('currentView', form.get('view').create());
    }
});

App.Field = Ember.Object.extend({
    value: null,
    widgetBaseClass: Ember.TextField,
    widget: function () {
        return this.get('widgetBaseClass').extend({
            field: this,
            valueBinding: 'field.value'
        });
    }.property('widgetBaseClass')
});

App.RangeField = App.Field.extend({
    widget: function () {
        var field = this;
        return Ember.ContainerView.extend({
            childViews: [field.get('select1').create(), field.get('select2').create()]
        });
    }.property('select1', 'select2'),
    fromValue: null,
    toValue: null,
    value: function () {
        return [this.get('fromValue.value'), this.get('toValue.value')];
    }.property('fromValue', 'toValue'),
    choices: [
        '1',
        '2',
        '3',
        '4'
    ],
    remainingChoices: function () {
        var fromValue = this.get('fromValue');
        if (fromValue) {
            var choices = this.get('choices');
            var index = choices.indexOf(fromValue);
            return choices.slice(index + 1);
        }
        return [];
    }.property('fromValue', 'choices'),
    select1: function () {
        return Ember.Select.extend({
            field: this,
            valueBinding: 'field.fromValue',
            contentBinding: 'field.choices'
        });
    }.property(),
    select2: function () {
        return Ember.Select.extend({
            field: this,
            valueBinding: 'field.toValue',
            contentBinding: 'field.remainingChoices',
            contentHasChangedOnce: false,
            contentChanged: function () {
                // Set the initial value only once
                if (! this.get('contentHasChangedOnce')) {
                    this.set('contentHasChangedOnce', true);
                    this.set('value', this.get('content')[0]);
                }

                // Reset the value if the chosen value is no longer
                // available
                if (! this.get('content').contains(this.get('value'))) {
                    this.set('value', this.get('content')[0]);
                }
            }.observes('content')
        });
    }.property()
});

App.Form = Ember.Object.extend({
    fieldNames: [],
    fields: function () {
        var that = this;
        var out = [];
        _.each(this.get('fieldNames'), function (fieldName) {
            out.pushObject(that.get(fieldName));
        });
        return out;
    }.property('fieldNames')
});

aForm = App.Form.create({
    name: 'First Form',
    fieldNames: [
        'a',
        'b'
    ],
    a: App.Field.create({label: 'A'}),
    b: App.RangeField.create({label: 'B'}),
    view: Ember.View.extend({
        templateName: 'form'
    })
});

var boxController = App.BoxController.create({
    initialForm: aForm,
    forms: [
        aForm,
        Ember.Object.create({
            name: 'Other Form',
            view: Ember.View.extend({
                template: Ember.Handlebars.compile('Foobar')
            })
        })
    ]
});

var boxView = Ember.View.create({
    templateName: 'box',
    controller: boxController
});

boxView.append(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:35:34.813

问题是您正在实例化，`select1`并且`select2`当您创建`ContainerView`在`widget`.`App.RangeField`

更改此代码：

```
App.RangeField = App.Field.extend({
    widget: function () {
        var field = this;
        return Ember.ContainerView.extend({
            childViews: [field.get('select1').create(), field.get('select2').create()]
        });
    }.property('select1', 'select2'),
    ...
} 
```

对此：

```
App.RangeField = App.Field.extend({
    widget: function () {
        var field = this;
        return Ember.ContainerView.extend({
            init: function() {
                this.set('childViews', [field.get('select1').create(), field.get('select2').create()]);
                this._super();
            }
        });
    }.property('select1', 'select2'),
...
} 
```

现在，您每次实例化时都会创建新的子视图，`widget`而不是重新使用第一次从 DOM 中删除它们时销毁的相同的两个视图。

# javascript - Protovis 工具提示

> ID：14932919
> 
> 赞同：0
> 
> 时间：2013-02-18T09:21:08.953
> 
> 标签：javascript, jquery, charts, tooltip, protovis

我正在尝试通过使用我的标记的标题属性向我的预测以及 protovis 图表上的实际指标添加工具提示，但我不知道如何访问它。

```
var vis = new pv.Panel()
.data(bullets)
.width(400)
.height(30)
.margin(20)
.left(100);

var bullet = vis.add(pv.Layout.Bullet)
.orient("left")
.ranges(function(d) d.ranges)
.measures(function(d) d.measures)
.markers(function(d) d.markers);

 bullet.range.add(pv.Bar)
  .event("mouseover", function() self.status ="orange");
 bullet.measure.add(pv.Bar).title(??????);

 bullet.marker.add(pv.Dot)
.shape("bar")
.lineWidth("4")
.height("1")
.title(???????); 
```

我希望能够显示的是实际值和预测值作为我的工具提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:15:18.480

哎呀，想通了，你可以通过编写以下代码来做到这一点

```
bullet.marker.add(pv.Dot)
.shape("bar")
.lineWidth("4")
.height("1")
.title(function(d) {
return d
 }); 
```

# iphone - 用于访问 SMS 并将其存储在 iCloud 上的 Iphone 应用程序

> ID：14932920
> 
> 赞同：3
> 
> 时间：2013-02-18T09:21:10.973
> 
> 标签：iphone, cocoa-touch, ios5

是否可以编写一个可以访问手机上的 SMS 消息并将其存储在其他地方的 Iphone 应用程序？我已经看到[类似](https://stackoverflow.com/questions/3533938/accessing-sms-content-iphone)这样的其他问题和另一个[问题](https://stackoverflow.com/questions/4290845/how-to-access-and-open-the-iphones-sms-api-from-an-iphone-app)，即可以使用 MessageUI 框架中的 MFMessageComposeViewController 发送 SMS。

由于这两个问题都存在一年多，现在是否可以这样做（访问 SMS 消息并将其存储在 iCloud 上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:23:22.730

不，这是不可能的，iOS SDK 不允许您从 messages.app 访问消息。

此外，在进行设备备份时，所有消息都已备份到 iCloud。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T17:05:43.020

[Apple Dev Library](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/SystemMessaging_TopicsForIOS/Articles/SendinganSMSMessage.html)说：“在 iOS 4.0 及更高版本中，您可以从应用程序中发送短信。此功能仅用于发送消息。收到的 SMS 消息会转到内置的 Messages 应用程序。” 我希望他们能解释为什么他们不允许程序访问消息。

因此，显然不是使用 iPhone 应用程序，但您可以使用桌面应用程序访问它们。请参阅[http://www.wired.com/2013/11/backup-sms-iphone](http://www.wired.com/2013/11/backup-sms-iphone)：

“Apple 将您的短信保存在其 iPhone 备份中，无论它们是保存在本地 PC 上，还是它们是 iCloud 备份的一部分——您应该拥有。这很好！不幸的是，它们没有被分离出来。但是，您可以通过文件系统访问它们。如果您在 Apple 机器上进行本地备份，您可以在 Library > Application Support > MobileSync > Backup 下找到该文件。那里应该有多个文件夹，每个文件夹都有不同的手机备份图像。每个文件夹都应该有一个名为“3d0d7e5fb2ce288813306e4d4636395e047a3d28.mddata”的文件。这些是您的文本，采用 SQLite 数据库形式。”

您需要使用 SQLite 来破译该文件。这里有一些说明：

[如何访问和阅读 iPhone SMS 文本消息备份文件](http://osxdaily.com/2010/07/08/read-iphone-sms-backup/)。

# c# - 将 javascript 日期时间转换为 C#/VB.NET 日期时间

> ID：14932928
> 
> 赞同：0
> 
> 时间：2013-02-18T09:21:40.540
> 
> 标签：c#, javascript, asp.net, vb.net

我想获取客户端时区，所以我使用下面的代码

```
function filltime() 
{
        document.getElementById("hdnTime").value = new Date();
} 
```

转换

```
 Dim time As Date = DateTime.ParseExact(hdnTime.Value,
                                           "ddd MMM d HH:mm:ss UTCzzzzz yyyy",InvariantCulture) 
```

我没有得到确切的价值。它只显示服务器时间。但`hdnTime.Value`包含正确的值（“Mon Feb 18 14:46:49 UTC+0530 2013”​​）。我认为问题在于转换。

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:47:00.463

*日期和时间在 1 种语言中是一种痛苦，更不用说在 2 之间传递值了。*

我建议将 JavaScript`Date()`对象序列化为 JSON，然后再将其发送回服务器。`DateTime`然后使用[JSON.NET](http://json.net)等库将其反序列化为 C#对象。关于序列化和反序列化时可以应用哪些设置，有综合文档（[JSON 中的序列化日期）。](http://james.newtonking.com/projects/json/help/?topic=html/DatesInJSON.htm)

## JavaScript

```
function filltime() 
{
    document.getElementById("hdnTime").value = JSON.stringify(new Date());
} 
```

*JSON 并非每个浏览器都原生，因此您的意思是需要手动加载它，有关更多信息，您可以参考：[浏览器原生 JSON 支持 (window.JSON)](https://stackoverflow.com/questions/891299/browser-native-json-support-window-json)*

## C# 使用[JSON.NET](http://json.net)

```
DateTime dateTime = JsonConvert.DeserializeObject<DateTime>(hdnTime.Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:04:14.610

您将 DateTime 对象与其显示混淆了

您看到服务器时间是正常的，因为您看到的是当前时区的日期时间表示。

你没有得到的是 DateTime 是如何工作的......

如果您传递带有时区信息的日期时间，那么它将转换为具有正确偏移量的时区。

如果您想传递一个日期时间并按原样获取它，那么您必须删除时区部分。

无论如何，在您的情况下，如果您只需要知道客户端时区，只需通过它！

```
var d = new Date()
var n = d.getTimezoneOffset(); 
```

getTimezoneOffset() 方法返回 UTC 时间和本地时间之间的时差，以分钟为单位。

例如，如果您的时区是 GMT+2，则将返回 -120。

对于一般性讨论：根据我的经验，处理日期时间转换为字符串并在不同系统之间传递的最佳方法是使用 ISODATE 格式：

```
DateTime.Now.ToString("s"); //"2013-02-18T11:17:24" 
```

# html - 为粘贴到窗口的内容添加圆角边框（html & css）

> ID：14932930
> 
> 赞同：0
> 
> 时间：2013-02-18T09:21:44.090
> 
> 标签：html, css

我想设计一个网站，页面的角落是圆形的（窗口所有角落都有黑色圆圈）。

为此，我将主体颜色设置为黑色，并在内容 div 中添加了一个圆角，这是其背景的一部分。

```
<body style="backgound: black">
  <div class="content" style="background: blue; border-radius: 8px;">
   ....
  </div>
</body> 
```

之后我尝试过：

**不工作的解决方案1**

```
position: absolute;
height: 100%; 
```

当内容高度大于窗口时不起作用，因为滚动时内容背景会隐藏。

**不工作的解决方案2**

```
position: fixed;
height: 100%; 
```

内容高度大于窗口时不工作；不显示滚动条。

**不工作的解决方案3**

什么都没有。

当内容高度小于窗口时不起作用；底部为黑色。

**丑陋的工作解决方案1**

添加4张带边框的图片，位置固定

有谁知道这个问题的干净解决方案？css3 被接受。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:26:05.123

我认为这应该有所帮助：

```
.content
{
   position: absolute;
   height: 100%;
   width: 100%;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background blue;
   border-radius: 8px;
} 
```

**编辑**此解决方案将起作用：

```
.content
{
   float:left;
   min-height: 100%;
   height: auto;
   width: 100%;
   background: blue;
   border-radius: 8px;
} 
```

[工作jsfiddle](http://jsfiddle.net/VDBJa/1/)

[此处](http://jsfiddle.net/VDBJa/4/)使用 css3 的另一个示例`calc()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:27:48.533

你可以试试`height:100%`

```
body, html{height:100%}
.content{height:100%} 
```

**[演示](http://jsfiddle.net/X4mbL/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:50:16.647

对页眉使用两个嵌套的固定 div，对页脚使用相同的 div。

这适用于每种浏览器上的每种内容：

运行示例：http: [//jsfiddle.net/5kgN3/](http://jsfiddle.net/5kgN3/)

HTML

```
<div id="headerOuter"><div id="headerInner"></div></div>
<div class="content">
    <br />test
    <br />test
    <!-- More tests here -->
    <br />test
    <br />test
</div>
<div id="footerOuter"><div id="footerInner"></div></div> 
```

CSS

```
body, html {
    height: 100%;
    width: 100%;
}
.content {    
    min-height: 100%;
    height: auto;
    width: 100%;
    background: blue;
    padding-top: 20px;
    padding-bottom: 20px;
}

#headerOuter{
    background-color: black;
    height: 20px;
    width: 100%;
    position: fixed;
    top: 0;
}

#headerInner{
    border-radius: 20px 20px 0px 0px;
    background-color: blue;
    height: 20px;
    width: 100%;
    position: fixed;
    top: 0;    
}

#footerOuter{    
    background-color: black;
    height: 20px;
    width: 100%;
    position: fixed;
    bottom: 0;
}

#footerInner{
    border-radius: 0px 0px 20px 20px;
    background-color: blue;
    width: 100%;
    height: 20px;
    position: fixed;
    bottom: 0;
} 
```

我使用了 20px 的边框半径，将其调整为 8px 时，请记住调整填充和高度。

# javascript - 按 cookie 中的数据对 JSON 响应进行排序

> ID：14932932
> 
> 赞同：0
> 
> 时间：2013-02-18T09:21:47.110
> 
> 标签：javascript, jquery, json

我有一个名为 products 的表

```
ProudctID   ProductName
1           A
2           B
3           C
4           D 
```

我想使用 javascript 对产品进行排序。所以我所做的是...

```
var visits= [
   { 'ProudctID' : 4 }
];
$.cookie("visit", JSON.stringify(visits)); 
```

在每个产品视图上，我都在这样做

```
var visits= $.parseJSON($.cookie("visits");)
visits.push(
    { 'ProudctID' : 1}
);
$.cookie("visit", JSON.stringify(visits)); 
```

我有所有产品的 JSON 结果，所以我如何根据 cookie 中存储的内容按 ProductID 对产品进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:28:32.353

您的`visits`变量是指一个数组。两种选择：

1.  数组有这个方便的[`sort`方法](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.11)。;-) 它接受一个用于比较数组中项目的函数。因此，只需`sort`在添加您的项目后使用。

2.  而不是`push`，循环遍历数组以找到新条目的正确位置，然后使用[`splice`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.12)将其放在正确的位置。（就像插入排序一样。）然后数组总是被排序的。

因为数组是一流的 JSON 概念，所以在被刺杀和复活时会保持顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:35:38.927

最简单的方法是不存储对象，只存储 ID 本身的数组。

```
var visits= $.parseJSON($.cookie("visits");)
visits.push( /* value */);
visits.sort();
$.cookie("visit", JSON.stringify(visits)); 
```

# java - 同时从两个不同的线程调用2个方法-Java

> ID：14932933
> 
> 赞同：-2
> 
> 时间：2013-02-18T09:21:52.243
> 
> 标签：java, multithreading, synchronization

如果同时从两个不同的线程调用这些方法，结果会是什么？

```
public class FirstWord {
       public static synchronized void writeFirstWord(boolean fromSecondWord) throws Exception {
              if(fromSecondWord == false)
                     SecondWord.writeSecondWord();
              System.out.print("Redflex"); }}

public class SecondWord {
       public static synchronized void writeSecondWord() throws Exception {
              Thread.sleep(100);
              FirstWord.writeFirstWord(true);  
              System.out.print(" Traffic Systems"); }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:51:15.050

在您拥有的代码示例中很可能出现死锁 - 如果您有 2 个线程，例如 ThreadA 和 ThreadB，那么在这种情况下：

ThreadA 调用`FirstWord.writeFirstWord(false)`，线程在 ThreadB 调用`SecondWord.writeSecondWord()`中暂停一次，线程在其中暂停一次

现在 ThreadA 继续它会停止，`SecondWord.writeSecondWord();`因为 ThreadB 有锁 SecondWord。

ThreadB 无法继续，因为 ThreadA 已锁定 FirstWord。

结果是死锁。

请注意，这不是此代码的唯一可能结果 - 根据时间等，代码*可能会*在一段时间内正常运行，但您很可能会在某个时候遇到死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:14:08.490

```
package com.blt;

    public class ThreadsExample implements Runnable { 
       public static void main(String args[]) {     
        Thread t=new Thread(new ThreadsExample());
        Thread t1=new Thread(new ThreadsExample());     
        t.start();
        t1.start();      
}

    public void run()  {    
    try { 
        writeSecondWord();  
    }   
    catch(Exception e)  {   
      e.printStackTrace();  
    }
 }

    public static synchronized void writeSecondWord() throws Exception {
        Thread.sleep(100);
        writeFirstWord(true);  
        System.out.print(" Traffic Systems"); 
        } 

    public static synchronized void writeFirstWord(boolean fromSecondWord) throws Exception {
        if(fromSecondWord == false)
               writeSecondWord();
        System.out.print("Redflex"); 
     }
 } 
```

输出是： Redflex 交通系统Redflex 交通系统

运行在代码之上是好的，但是代码在某个时间点很可能会产生死锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:29:53.320

由于 . 的不可预测性，结果是不可预测的`sleep()`。

此外，这取决于有多少核心，以及您在`writeFirstWord(boolean)`调用中提供的参数。

我会把它留给你弄清楚细节:-)

* * *

提示：一种可能性是死锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T09:41:37.830

示例 SSCCE（修改）：

```
public class ThreadTest {

    public static void main(String[] args) {
        new Thread() {
            public void run() {
                try {
                    FirstWord.writeFirstWord(false);
                } catch (Exception e) {
                    e.printStackTrace();
                }  
            }
        }.start();

        new Thread() {
            public void run() {
                try {
                    SecondWord.writeSecondWord(false);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }.start();
    }

}

class FirstWord {
    public static synchronized void writeFirstWord(boolean fromSecondWord) throws Exception {
        System.out.println("FirstWord start");
        Thread.sleep(100);
        if (!fromSecondWord) SecondWord.writeSecondWord(true);
        System.out.println("FirstWord end");
    }
}

class SecondWord {
    public static synchronized void writeSecondWord(boolean fromFirstWord) throws Exception {
        System.out.println("SecondWord start");
        Thread.sleep(100);
        if (!fromFirstWord) FirstWord.writeFirstWord(true);  
        System.out.println("SecondWord end");
    }
} 
```

如您所见，控制台显示：

```
FirstWord start
SecondWord start 
```

第一个线程“进入”`FirstWord`同步块，而第二个线程进入同步块`SecondWord`。然后，在休眠一点之后，第一个线程尝试进入 SecondWord 方法，并且必须等待，因为第二个线程拥有该方法的锁。

当这种情况发生时，第二个线程也在等待获得另一个锁，这就是为什么**两个线程都阻塞**并且永远不会到达“结束”，因为**它们永远不会获得两个锁**。

如果您`Thread.sleep`在这两种方法中删除它可能会起作用。如前所述，这是不可预测的。你不知道哪个线程会先进入。

# android - 由于使用 ANativeWindow API 导致应用程序崩溃

> ID：14932934
> 
> 赞同：1
> 
> 时间：2013-02-18T09:21:53.070
> 
> 标签：android, image, android-ndk, java-native-interface

我正在调用我的本机函数，该函数`ANativeWindow API`从`UI`线程的 java 代码中使用，如下所示：

```
MainActivity.this.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // your stuff to update the UI
                        mainFunction(3,inputFile,outputFile,surface);
                        Log.d(TAG, "Thread executed successfully");
                    }
                }); 
```

然后在本机代码中，在将数据从 rgba 缓冲区复制到位时，应用程序正在运行。本机代码片段如下所示：

```
void yuv2rgba(UINT8* y,UINT8* u,UINT8* v,int w, int h,FILE *fp_Out_File,jobject surface)
{
     int mem1=w*h,i=0,j=0,k=0;
__android_log_print(ANDROID_LOG_DEBUG,"MYDECODER","yuv2rgba is entered.....",NULL);

    JNIEnv *env;
    ANativeWindow* window;
    ANativeWindow_Buffer buffer;
//buffer1: holds the rgba data
    UINT8 *buffer1=(UINT8*)malloc(sizeof(UINT8)*(4*mem1));
    UINT8 *r=(UINT8*)malloc(sizeof(UINT8)*mem1);
    UINT8 *g=(UINT8*)malloc(sizeof(UINT8)*mem1);
    UINT8 *b=(UINT8*)malloc(sizeof(UINT8)*mem1);
    int y1,u1,v1,rcomp,gcomp,bcomp;

    int getEnvStat = (*g_vm)->GetEnv(g_vm,(void **)&env, JNI_VERSION_1_6);
    if (getEnvStat == JNI_EDETACHED) {
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","GetEnv: not attached.....",NULL);
    }
    else if (getEnvStat == JNI_OK) {

        __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","getEnvStat == JNI_OK.....",NULL);
    }
    else if (getEnvStat == JNI_EVERSION) {

        __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","GetEnv: version not supported.....",NULL);
    }

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","computing rgb.....",NULL);

    for(i=0;i<mem1;++i)
     {
        y1=y[i]-16;
        u1=u[i]-128;
        v1=v[i]-128;

        rcomp=((298 * y1) +( 409 * v1))>>8;
        r[i]=(UINT8)((rcomp<0)?0:((rcomp > 255)?255:rcomp));

        gcomp=((298 * y1) - (100 *u1) - (208 * v1))>>8;
        g[i]=(UINT8)((gcomp<0)?0:((gcomp > 255)?255:gcomp));
        bcomp=((298 * y1) + (516 * u1))>>8;
        b[i]=(UINT8)((bcomp<0)?0:((bcomp > 255)?255:bcomp));
    }
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","assigning rgba to buffer....",NULL);
    // Storing the RGB value into a buffer
    for(i=0,j=0;(i<(mem1*4))&&(j<mem1);i=i+4,++j)
       {
        buffer1[i]=r[j];
        buffer1[i+1]=g[j];
        buffer1[i+2]=b[j];
        buffer1[i+3]=0xff;
       }
    free(r);
    free(g);
    free(b);
    //fwrite to an output file
    //fwrite(buffer1,sizeof(UINT8),w*h*3,fp_Out_File);

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","before creating a window.....",NULL);

     window = ANativeWindow_fromSurface(env, surface);

     __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","window created.....",NULL);

     if (ANativeWindow_lock(window, &buffer, NULL) == 0) {

       memcpy(buffer.bits, buffer1,  sizeof(UINT8)*(4*mem1));

       __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","memcpy successfull.....",NULL);

       ANativeWindow_unlockAndPost(window);

       __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","unlock and post  successful..." ,NULL);
     }
     ANativeWindow_release(window);
     __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","release successful.....",NULL);

    free(buffer1);
} 
```

当应用程序运行时，应用程序在注释后崩溃：**"window created...."**。以及 logcat 中的以下消息：

```
02-18 14:46:55.344: I/dalvikvm(2080): threadid=4: reacting to signal 3
02-18 14:46:55.348: I/dalvikvm(2080): Wrote stack traces to '/data/anr/traces.txt' 
```

在上面的代码中，我的目标是使用API`buffer1`在设备屏幕上显示 rgba 数据`ANativeWindow`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:01:12.843

最后 - 经过大量的试验和错误 - 我能够找出崩溃。

原因就在上面的代码之前：

```
if (ANativeWindow_lock(window, &buffer, NULL) == 0)
{
  memcpy(buffer.bits, buffer1,  sizeof(UINT8)*(4*mem1));

  __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","memcpy successfull.....",NULL);

  ANativeWindow_unlockAndPost(window);

  __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","unlock and post  successful..." ,NULL);
} 
```

我们需要添加：

```
ANativeWindow_setBuffersGeometry(window,w,h,WINDOW_FORMAT_RGBA_8888) 
```

其中，`w`-> 框架的宽度，`h`-> 框架的高度，以及 RGBA 格式。

# forms - 选择记录填写块上的字段（Oracle Forms）

> ID：14932937
> 
> 赞同：1
> 
> 时间：2013-02-18T09:22:20.187
> 
> 标签：forms, oracle, select

我有一张桌子上的一块。

我希望我用一个数字填充代码字段，然后在他们的 ID 上选择带有这些数字的记录。我想在代码字段上使用 when-validate-item，我不知道如何在 oracle 表单上“选择”想要的记录。任何想法？

对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:50:56.963

如果您的表单上有两个块，这会更容易：

1.  `SEARCH_BLK`带有代码字段（例如）的单记录控制块（例如`CODE`），将充当“搜索”字段以及“搜索”按钮。

2.  基于您的数据库表（例如`MYTABLE`）的第二个块将显示记录。为块的 DEFAULT_WHERE 属性添加谓词，例如`ID = :SEARCH_BLK.CODE`.

您的搜索按钮上的按下按钮时触发器将具有以下内容：

```
GO_BLOCK('MYTABLE');
EXECUTE_QUERY; 
```

请注意，您不能从 when-validate-item 触发器调用 GO_BLOCK 内置函数。

如果您*真的*想从 when-validate-item 完成它，您可以使用计时器技巧，如下所述：[GO_BLOCK in WHEN_VALIDATE Trigger](https://stackoverflow.com/questions/12608330/go-block-in-when-validate-trigger)

# c# - 如何将我的应用程序登录到 Windows 注册表？

> ID：14932938
> 
> 赞同：0
> 
> 时间：2013-02-18T09:22:21.090
> 
> 标签：c#, windows, registry

我正在编写一个应用程序，该应用程序需要在用户安装后每次计算机启动时运行。我尝试在 afterInstall 事件中的安装程序 calss 上执行此操作，但安装程序将其放入注册表并在 Windows 重新启动时运行，因此我尝试使用提交的事件执行此操作并得到相同的结果。之后，我将提交的属性安装程序类更改为 false，但随后提交的事件不会触发。我的最后一次尝试是在安装后运行该应用程序，然后让它自己写入注册表，发生了一件奇怪的事情，它确实在注册表中扭动，但没有到我想要的地方有没有人知道为什么会这样以及怎么能我修复它？

我的代码：

```
bool registry = true;

RegistryKey rkSubKey = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", false);
string[] values = rkSubKey.GetValueNames();

foreach(string name in values)
{

  if (name.Equals("appName"))
    registry = false;
}

if (registry)
{

  RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
  rkApp.SetValue("appName", Application.ExecutablePath.ToString());
  DialogResult r = MessageBox.Show("The system now needs to restart your computer whould you like to do it now?", "Restart is needed", MessageBoxButtons.YesNo);
  if (r == DialogResult.Yes)
  {
    System.Diagnostics.Process.Start("ShutDown", "/r");
  }
  return;
}
mainModule.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:32:19.553

您是否尝试过像这样打开子根密钥：

```
var HKLM = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser,   Environment.Is64BitOperatingSystem ? RegistryView.Registry64 : RegistryView.Registry32); 
```

然后获取您的子项：

```
var baseKey = HKLM.OpenSubKey(...<the path here>..) 
```

?

# django - 美味派中基于过滤器的字段排除

> ID：14932940
> 
> 赞同：0
> 
> 时间：2013-02-18T09:22:37.107
> 
> 标签：django, tastypie

我有一个非常简单的 ModelResource。

```
class UserResource(ModelResource):
    class Meta:
        queryset = CUser.objects.all()
        resource_name = 'c_user' 
```

CUser 模型如下所示：

```
class CUser(models.Model):
    user = models.OneToOneField(User)

    ## Some other fields here ##

    phone = models.IntegerField()
    show_contact_info = models.BooleanField(default=True) 
```

现在我希望查询集包含所有用户，但我想排除`phone`没有`show_contact_info`字段设置为的用户的字段`True`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:57:55.403

```
class UserResource(ModelResource):
   class Meta:
      queryset = CUser.objects.all()
      resource_name = 'c_user'

   def dehydrate(self, bundle):
      if not bundle.obj.show_contact_info:
          bundle.data.pop(phone)

       return bundle 
```

# php - 从数组中删除元素不起作用

> ID：14932941
> 
> 赞同：0
> 
> 时间：2013-02-18T09:22:37.360
> 
> 标签：php, arrays, unset

我有以下代码从数组中删除一个元素：

```
for ($i = 0; $i < count($contracte); $i++) {  
    if ($contracte[$i]['total_luni_contract'] == $contracte[$i]['luni_contract_cu_cheltuieli']) {
        unset($contracte[$i]);        
    }
} 
```

数组如下所示：

```
Array
(
    [0] => Array
        (
            [id_contract] => 3
            [numar] => 2955
            [data] => 2011-04-04
            [total_luni_contract] => 2
            [luni_contract_cu_cheltuieli] => 0
        )

    [1] => Array
        (
            [id_contract] => 25
            [numar] => 14
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 1
        )

    [2] => Array
        (
            [id_contract] => 26
            [numar] => 15
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 1
        )

    [3] => Array
        (
            [id_contract] => 27
            [numar] => 16
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [4] => Array
        (
            [id_contract] => 28
            [numar] => 17
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [5] => Array
        (
            [id_contract] => 29
            [numar] => 23
            [data] => 2013-01-08
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 0
        )

    [6] => Array
        (
            [id_contract] => 30
            [numar] => 24
            [data] => 2013-01-08
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 0
        )

    [7] => Array
        (
            [id_contract] => 31
            [numar] => 33
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 1
        )

    [8] => Array
        (
            [id_contract] => 32
            [numar] => 34
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [9] => Array
        (
            [id_contract] => 33
            [numar] => 35
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [10] => Array
        (
            [id_contract] => 34
            [numar] => 36
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [11] => Array
        (
            [id_contract] => 35
            [numar] => 37
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [12] => Array
        (
            [id_contract] => 36
            [numar] => 38
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [13] => Array
        (
            [id_contract] => 37
            [numar] => 39
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [14] => Array
        (
            [id_contract] => 38
            [numar] => 40
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [15] => Array
        (
            [id_contract] => 39
            [numar] => 41
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [16] => Array
        (
            [id_contract] => 40
            [numar] => 42
            [data] => 2013-01-09
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 0
        )

    [17] => Array
        (
            [id_contract] => 41
            [numar] => 43
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 0
        )

    [18] => Array
        (
            [id_contract] => 42
            [numar] => 44
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 0
        )

    [19] => Array
        (
            [id_contract] => 43
            [numar] => 45
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 0
        )

    [20] => Array
        (
            [id_contract] => 44
            [numar] => 46
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 6
        )

    [21] => Array
        (
            [id_contract] => 45
            [numar] => 47
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 6
        )

    [22] => Array
        (
            [id_contract] => 46
            [numar] => 48
            [data] => 2013-01-09
            [total_luni_contract] => 6
            [luni_contract_cu_cheltuieli] => 4
        )

) 
```

运行代码后，数组保持不变。它应该取消设置`$contracte[1]`,`$contracte[2]`和。`$contracte[7]``$contracte[20]`

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:29:00.057

而是在阵列上运行**foreach**。已经证明，从当前使用 foreach 循环迭代的数组中删除键是完全安全的。

```
foreach($contracte as $cheie => $contract) {
   if ($contract['total_luni_contract'] == $contract['luni_contract_cu_cheltuieli']) {
      unset($contracte[$cheie]);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:33:34.320

问题：当循环到达第二个元素 (1) 时，它会取消设置，因此 2 处的元素会到达该位置。所以在下一个循环中它会检查 $i=1 这将是下一个元素。所以（2）被跳过了。

解决方案 ：

使用 foreach

```
foreach($contracte as $key=> $val) {
   if ($val['total_luni_contract'] == $val['luni_contract_cu_cheltuieli']) {
      unset($contracte[$key]);
   }
} 
```

或者

将键设为字符串 - 将其设为关联数组，然后设为您的解决方案。

如果您的数组是这样的：它将起作用

```
Array
(
    [one] => Array
        (
            [id_contract] => 3
            [numar] => 2955
            [data] => 2011-04-04
            [total_luni_contract] => 2
            [luni_contract_cu_cheltuieli] => 0
        )

    [two] => Array
        (
            [id_contract] => 25
            [numar] => 14
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 1
        )

    [three] => Array
        (
            [id_contract] => 26
            [numar] => 15
            [data] => 2013-01-07
            [total_luni_contract] => 1
            [luni_contract_cu_cheltuieli] => 1
        )

    [four] => Array
        (
            [id_contract] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:28:48.480

尝试改用 array_splice

array_splice($contracte, $i, 1);

此外，当您从数组中删除某些内容时，您需要减少 $i ，以便它会第二次检查位置 $ia 处的项目。

# php - 如何获取客户端的用户名，在 JS 或 php 中登录客户端机器？

> ID：14932942
> 
> 赞同：0
> 
> 时间：2013-02-18T09:22:40.077
> 
> 标签：php, javascript, macos

我们有大约 10 台 iMac 连接到 mac mini 服务器。服务器上启用了 php 和 Apache。我正在使用 php 开发 Intranet 网站。我的要求是让客户端的用户名连接到服务器。$_SERVER['REMOTE_USER'] 不工作。我不知道为什么。请帮帮我。是不是可以写JS来找呢？它不应该要求用户登录。它应该直接从客户端机器登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:26:13.237

`$_SERVER['REMOTE_USER']`将包含用于*HTTP auth*的用户名。没有合理的方法可以说服浏览器告诉您访问者登录的操作系统用户是什么（您可能对已签名的 Java 小程序有一些运气，但我不会打赌）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:52:20.493

对于您可以控制客户端计算机的 Intranet 站点/应用程序，您可以使用一些在系统启动时运行的脚本/应用程序，它将读取用户名并将其存储为 cookie。您可以从您的网站读取该 cookie。

Cookie 的存储方式因浏览器而异。例如，firefox 3+ 使用带有文档格式的 sqlite 数据库（有关更多信息，请参阅[这篇文章）。](https://stackoverflow.com/questions/302294/cookies-in-firefox)您必须确保在访问 cookie 时浏览器没有运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:31:26.383

我相信您正在寻找的是单点登录 (SSO)。这在连接到域的 Windows 计算机上最常用，它允许用户在不输入任何凭据的情况下对 Intranet 站点进行身份验证（例如，它使用他们的域凭据）。

我不知道纯mac等价物。（最新的）Windows 系统称为 Kerberos，并由 Mac 上的 Firefox 支持，如下所述：[http ://www.cgl.ucsf.edu/Security/CGLAUTH/CGLAUTH.html](http://www.cgl.ucsf.edu/Security/CGLAUTH/CGLAUTH.html)

值得注意的是，这需要操作系统、浏览器和网站协同工作。一些问题：firefox（即使在 Windows 上）不会自动发送登录详细信息，它需要更改配置以包含您要进行身份验证的站点。网站需要能够验证传递给它的凭据的真实性，这通常意味着它需要能够与凭据授权机构（域控制器/RADIUS/X500 服务器等）进行通信。pesmissions 机制需要支持（并配置）以允许凭证委托（即允许客户端 PC 将令牌传递到网站以证明身份）。

[这个问题](https://serverfault.com/questions/142220/single-sign-on-for-intranet-with-apache-and-linux-mit-kerberos)是由设法让它在 linux 上工作的人提出的，所以应该是一个很好的起点

# objective-c - AVAudioRecorder 后台模式和电话呼叫

> ID：14932943
> 
> 赞同：0
> 
> 时间：2013-02-18T09:22:46.817
> 
> 标签：objective-c

我的应用使用了所需的背景模式“应用播放音频”我可以在背景模式下录制。但如果打电话呢？我使用了代表

```
-(void)loadView
{    
  NSError *error=nil;
  [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&error];

  if (error) {//Do something error}

  error = nil;

  [[AVAudioSession sharedInstance] setActive:YES error:&error];
  if (error) {//Do something error}
}

-(void)audioRecorderBeginInterruption

{

   [AVAudioRecorder  pause];

}

-(void)audioRecorderEndInterruption

{

   [AVAudioRecorder  record];

} 
```

这两个方法都正常执行但`AVAudioRecorder`不是Run。

我想在电话结束时继续录音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:04:53.557

试试这个委托方法，

```
- (void)applicationWillResignActive:(UIApplication *)application 
{

//post your Notification
} 
```

应该在您的工作班回电，其中包括您的方法，

```
-(void)audioRecorderEndInterruption

{
// add Notification
   [AVAudioRecorder  record];

} 
```

# xcode - 在 xcode 中定义变量并在 WebView 中使用它

> ID：14932947
> 
> 赞同：1
> 
> 时间：2013-02-18T09:22:55.173
> 
> 标签：xcode, cordova

我很想知道我们是否可以在 xcode 中定义变量，然后在 HTML 或 javascript 中访问它。

例如，像这样在 xcode 中定义一个变量

```
NSString * abc = @"Hi there!"; 
```

并像这样在 Baker 或 phonegap 中访问它

```
<script>
var xyz = xcode.abc //XCode 
alert(xyz);
</script> 
```

# c# - 如何将两个字符串（日期和时间）组合成一个 DateTime

> ID：14932950
> 
> 赞同：13
> 
> 时间：2013-02-18T09:23:07.903
> 
> 标签：c#, string, parsing, datetime

我有两个字符串：

```
string one = "13/02/09";
string two = "2:35:10 PM"; 
```

我想将这两者结合在一起并转换为`DateTime`.

我尝试了以下方法，但它不起作用：

```
DateTime dt = Convert.ToDateTime(one + " " + two);
DateTime dt1 = DateTime.ParseExact(one + " " + two, "dd/MM/yy HH:mm:ss tt", CultureInfo.InvariantCulture); 
```

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T09:33:33.267

试试这样；

```
string one = "13/02/09";
string two = "2:35:10 PM";

DateTime dt = Convert.ToDateTime(one + " " + two);
DateTime dt1 = DateTime.ParseExact(one + " " + two, "dd/MM/yy h:mm:ss tt", CultureInfo.InvariantCulture);

Console.WriteLine(dt1); 
```

这是一个**[演示](http://ideone.com/KqlpEh#view_edit_box)**。

*HH*使用 24 小时制从`00`到`23`。例如; `1:45:30 AM -> 01`和`1:45:30 PM -> 13`

*h*使用从 1 到 12 的 12 小时制。例如；`1:45:30 AM -> 1`和`1:45:30 PM -> 1`

查看更多信息**[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:28:58.157

您的问题在于您的时间说明符；您想要`h`（*小时，使用从 1 到 12 的 12 小时制*），而不是`HH`（*小时，使用从 00 到 23 的 24 小时制*）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T09:31:11.560

尝试使用与`DateTime`您的字符串值格式匹配的文化信息：

```
DateTime dt = Convert.ToDateTime(one + " " + two,
    CultureInfo.GetCultureInfo("ro-RO")); 
```

或修改输入字符串，使小时有 2 位数字：

```
string one = "13/02/09";
string two = "02:35:10 PM";
DateTime dt1 = DateTime.ParseExact(one + " " + two, 
    "dd/MM/yy HH:mm:ss tt",
    CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T09:28:03.437

问题是您指定的格式字符串不正确。

'HH' 表示两位数的小时，但您有一位数的小时。

请改用“h”。

所以完整的格式是 'dd/MM/yy h:mm:ss tt'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-14T06:55:12.643

我有不同的格式，上面的答案不起作用：

```
string one = "2019-02-06";
string two = "18:30"; 
```

这种格式的解决方案是：

```
DateTime newDateTime = Convert.ToDateTime(one).Add(TimeSpan.Parse(two)); 
```

结果将是：newDateTime{06-02-2019 18:30:00}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T09:32:34.107

由于 AM/PM 格式，使用`string two = "02:35:10 PM";`代替`string two = "2:35:10 PM";`和`hh`代替。`HH`

下面是代码：

```
string one = "13/02/09";
string two = "02:35:10 PM";

DateTime dateTime = DateTime.ParseExact(one + " " + two, "dd/MM/yy hh:mm:ss tt", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T09:35:15.143

以下代码将执行您想要的操作。我使用英国文化来处理您日期的 d/m/y 结构：

```
 string string1 = "13/2/09";
        string string2 = "2:35:10 PM";
        DateTime combined = DateTime.Parse(string1 + ' ' + string2, new CultureInfo("UK")); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T09:54:40.883

`Convert.ToDateTime``DateTime.ParseExact`与当前线程的文化一起使用，因此您只需执行以下操作就可以使事情变得更清晰：

```
string date = "13/02/09";
string time = "2:35:10 PM";
DateTime dateTime = DateTime.Parse(date +" "+ time, new CultureInfo("en-GB"));
Console.WriteLine (dateTime); 
```

这给出了结果`13/02/2009 14:35:10`，并强制解析使用 en-GB 日期时间格式。如果您的 Windows 安装仍然是 en-GB，则不需要该`CultureInfo(..)`参数。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-18T09:28:56.847

使用 DateTime.Parse() 分别解析日期和时间。然后把第二个的时间分量加到第一个上，像这样

```
var date = DateTime.Parse (one);
var time = DateTime.Parse (two);
var result = date + time - time.Date; 
```

# database - magento 未将新添加的字段值保存在 db 中

> ID：14932954
> 
> 赞同：0
> 
> 时间：2013-02-18T09:23:23.907
> 
> 标签：database, magento, model, controller, block

在 Magento 中，我创建了一个新模块，就像客户模块一样。

一切都会好起来的。

在我的模块中有一些附加字段，但这些值没有保存到数据库中。

只有特定的字段保存到数据库中。

我没有像核心部分那样创建设置文件。

我需要安装文件吗？如果是的话，请问我该怎么做？

如何设置默认实体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:45:32.237

删除缓存。如果存在问题。
请参阅[链接 1](http://www.excellencemagentoblog.com/magento-admin-form-field)。
希望这对您有所帮助。

# eclipse - 在我的项目中看不到错误 - 感叹号

> ID：14932955
> 
> 赞同：0
> 
> 时间：2013-02-18T09:23:25.697
> 
> 标签：eclipse

当我尝试运行我的项目时，它说我的项目中有错误，但我看不到任何错误。我的项目上有一个感叹号。如果我正在尝试运行其他项目，它会完美运行。
在此之前，我玩了一下项目库，并尝试将一些 jar 复制到库中。我试图将罐子手册复制到。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:30:39.250

您是否尝试过“问题”视图？这应该显示附加信息。到达那里的最简单方法： `Ctrl`+ `3`，然后输入“问题”。

-汉内斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:42:45.723

除了“问题”视图之外，还有可以给您一些提示的控制台。

对于Console View，存在可以显示不同子视图的问题；例如，它可以显示 Android 控制台或 DDMS 控制台。在控制台视图右上角的工具栏中，您将找到选择要显示的正确控制台的控件。请务必选择“Android 控制台”。

另一种可能性是使用“修复项目属性”，您可以通过右键单击项目 => Android 工具 -> 修复项目属性来找到它。这将解决您可能在项目中引入的一些但不是全部的潜在问题。

其余的，详细检查项目的所有属性。

# c# - 在一个列表中选择多个 ListItem 从代码隐藏 c#

> ID：14932959
> 
> 赞同：0
> 
> 时间：2013-02-18T09:23:37.073
> 
> 标签：c#, asp.net, listbox

我有一个`ListBox(with selectionMode=multiple)`并将选定的值存储在 cookie 中。当用户回来时，我想为他提供再次选择的所有选项。

到目前为止我所做的：我获取所有选定的值并将索引“，”存储在cookie中的字符串中。

当用户回来时，我拆分字符串并循环遍历所有 ListItems 以再次选择每一个！

但有：

```
foreach (string str in selectedStr)
{
    listbox1.SelectedIndex = Int32.Parse(str);
} 
```

我只得到一个（随机？）选定值。

谁能帮我重新选择所有选定的值？也许甚至是更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:47:45.600

只需尝试使用`FindByValue`Listview 的属性如下...

```
foreach (string str in selectedStr)
{
    if(listbox1.Items.FindByValue(str) != null) 
    { 
          listbox1.Items.FindByValue(str).Selected = true; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:26:57.167

您可以遍历拆分的字符串数组，并`ListBox.Items[]`根据索引访问并将`Selected`属性设置为 true。

```
foreach (string str in selectedStr)
{
    listbox1.Items[Int32.Parse(str)].Selected = true;
} 
```

*确保它`str`确实是一个整数并且它在范围内`Items.Length`*

# android - Android：没有将微调器的值放入edittext

> ID：14932964
> 
> 赞同：0
> 
> 时间：2013-02-18T09:23:49.067
> 
> 标签：android, spinner

我有 a`EditText`和 a 的dailog `Spinner`，我正在实施如下

```
spinner1 = (Spinner) dialog.findViewById(R.id.quesspinner);

ArrayAdapter<CharSequence> arrayadapter = ArrayAdapter.createFromResource(activity, R.array.fbquestion,R.layout.textview);

spinner1.setAdapter(arrayadapter); 

logo.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            spinner1.setVisibility(View.GONE);
            spinner1.performClick();
        }
}); 
```

现在我无法读取 的值`Spinner`，我希望 中的文本`Spinner`显示在我的`EditText`. 代码对我来说似乎很好，但它不起作用。感谢任何帮助

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent,
            View view, int pos, long id) {
         int Text = parent.getSelectedItemPosition();
           edittext.setText(Text);
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:26:19.070

使用`spinner.getSelectedItem()`代替`parent.getSelectedItem()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:27:01.060

将您的代码更改为这样

要在更改微调器之前在 EditText 中显示内容，然后这样做

```
spinner1.setAdapter(arrayadapter); 
edittext.setText(spinner1.getSelectedItem().toString()); 
```

.

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

@Override
public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) {
     String Text = spinner1.getSelectedItem().toString();
     edittext.setText(Text);
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

}); 
```

# javascript - 使用 Model.destroy

> ID：14932966
> 
> 赞同：0
> 
> 时间：2013-02-18T09:23:50.413
> 
> 标签：javascript, rest, backbone.js

在浏览了主干文档之后，很明显要发送模型的删除请求，我们需要设置`urlRoot`and `id`。我想到的另一种技术是`sync`为我的模型实现一个。

由于我的服务器`POST`用于删除，我使用`emulateHTTP = true`. 我怎样才能完成上述任务，以便我的模型的请求 url 将采用以下形式 `http://myWerService.com/myresource/deleteMyModel?modelName="abc"`

*   那么，我怎样才能将我的设置`id`为`modelName`
*   以下两个 url 模式有什么区别 `http://myWerService.com/myresource/deleteMyModel?modelName="abc"` `http://myWerService.com/myresource/deleteMyModel/abc`
    原因是，我看到每个示例都使用第二个 url 模式，但我不知道两者之间的区别。
*   我`url`为此模型设置了创建请求，我如何使用不同的 url（我想使用上面指定的 url）来发送删除请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:03:03.937

我不确定这是否正是您要问的，但也许这个例子会有所帮助：

```
var MyModel = Backbone.Model.extend({
    ID: 0,
    Name: '',

    ... other attributes for the model ...

},

initialize: function (id) {
    this.ID = id;
},

idAttribute: 'Name', // set the id attribute as the name attribute

// you can have different urls for different operations

methodToURL: {
    'read': 'GetModel',
    'update': 'UpdateModel',
    'delete': 'DeleteModel'

},

// overwrite the sync function

sync: function (method, model, options) {
    options = options || {};
    options.url = model.methodToURL[method.toLowerCase()];

    switch (method) {
        case 'read':
        case 'update':
        case 'delete':
            options.url += '/' + this.id;
            break;
    }

    Backbone.sync(method, model, options);
}
}); 
```

# c++ - 作为错误 g++ 的警告集

> ID：14932969
> 
> 赞同：14
> 
> 时间：2013-02-18T09:24:19.467
> 
> 标签：c++, compiler-errors, g++, compiler-warnings

我想为我的 g++ 编译器更改警告和错误的行为：

*   我希望将正常警告发现为错误 ( `-Werror`)
*   我希望发现额外的警告。(`-Wall`和`-Wextra`)

但我的问题是，这样一来，所有额外的警告都会出错。有没有一种方法可以实现我想要的，而无需在`-Werror=xxx,xxx,xxx`.
是否有某种错误集的别名？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T09:38:03.137

如果你只是给出`-Werror`所有的警告就会变成错误。除了将您（不）想犯的错误列为 之外`-W(no-)error=xxx`，我不相信有一种方法可以“将一些警告变成错误”。

当然，一种解决方案可能是编译代码两次 - 一次使用`-Wall`and `-Wextra`，一次使用`-Werror`，但不使用`-Wall`and `-Wextra`。

从长远来看，我确信将您（不）希望`-Werror`看到的错误标记为错误的额外努力是值得的[尽管我会说更好的解决方案可能是使用 -Wno-xxx，禁用任何你认为可以接受的警告，而不是“警告但不要让它成为错误”——毕竟，`-Werror`在我看来，这样做的目的是防止代码被提交给带有警告的项目——这应该表示以下两种情况之一：警告已修复，或警告已禁用。无论哪个对那个项目有意义]。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T09:37:48.300

您可以使用更短的警告列表（仅由 启用的警告），而不是使用`-Werror=...`一长串警告。手册列出了启用了哪些警告，因此很容易。`-Werror -Wno-error=...``-Wall -Wextra``-Wall -Wextra`

# windows - 使用 wmi 类 c++ 的 win32_processor 从 windows 中提取 cpu 状态和可用性

> ID：14932970
> 
> 赞同：1
> 
> 时间：2013-02-18T09:24:24.360
> 
> 标签：windows, winapi, cpu-usage, win32-process

我需要在从 win32_processor 嵌入的 Windows 上借助 WMI 提取有关 cpu 的一些信息。我在打开的 msdn 上执行例程处理； [http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423(v=vs.85).aspx)

```
 CoInitializeEx(0, COINIT_MULTITHREADED);
 CoInitializeSecurity
 CoCreateInstance and etc.. 
```

我成功地获取了 cpu 状态和可用性，它并没有那么慢。但是当我连续执行这项工作时有一些延迟，同时另一个应用程序在机器上运行，它会出现性能问题，因为其他应用程序正在处理器上运行，当我确实从处理器中提取数据，性能变慢了。那么还有另一种快速获取 CPU 属性的方法吗？

# maven-profiles - 基于类路径属性的 Maven 配置文件激活

> ID：14932971
> 
> 赞同：3
> 
> 时间：2013-02-18T09:24:32.810
> 
> 标签：maven-profiles

是否可以根据您又根据读取属性文件设置的类路径属性来激活 Maven 配置文件？我已经验证了类路径存在于我的配置文件应该生效的阶段，并且还通过命令行单独提供了该属性，但是当我尝试从属性文件中读取它并尝试运行配置文件时classpath 属性，它不起作用。我什至尝试将感兴趣的属性设置为系统属性，希望该配置文件将被激活，但结果相同。[此链接](http://maven.apache.org/pom.html#Activation)表示好像可以读取类路径属性，但[该链接](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)提到好像只能读取系统属性以进行配置文件激活。但是，对我来说两者都不起作用。任何指针都会有所帮助。

谢谢，
稻田

# c# - 单击组合框的文本框部分

> ID：14932973
> 
> 赞同：3
> 
> 时间：2013-02-18T09:24:42.723
> 
> 标签：c#, wpf, xaml, combobox, textbox

我们有一个 ComboBox 的样式，例如：

```
<Style x:Key="OurComboBox" TargetType="ComboBox">
    <!-- omitted style Properties -->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid>
                        <ToggleButton Name="ToggleButton"
                                      Grid.Column="2"
                                      ClickMode="Press"
                                      Focusable="false"
                                      IsChecked="{Binding Path=IsDropDownOpen,
                                                          Mode=TwoWay,
                                                          RelativeSource={RelativeSource TemplatedParent}}"
                                      Style="{StaticResource ComboBoxToggleButton}" />
                        <ContentPresenter Name="ContentSite"
                                          Margin="3,3,23,3"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Center"
                                          Content="{TemplateBinding SelectionBoxItem}"
                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                          IsHitTestVisible="False" />
                        <TextBox x:Name="PART_EditableTextBox"
                                 Margin="5,3,23,1"
                                 HorizontalAlignment="Left"
                                 VerticalAlignment="Center"
                                 Background="Transparent"
                                 Focusable="False"
                                 FontFamily="Arial Narrow"
                                 FontWeight="DemiBold"
                                 Foreground="#FF404040"
                                 IsReadOnly="True"
                                 PreviewMouseDown=""
                                 Style="{x:Null}"
                                 Template="{StaticResource ComboBoxTextBox}"
                                 Text="{TemplateBinding Text}"
                                 Visibility="Hidden" />

            <!-- omitted PopUp and ControlTemplate.Triggers --> 
```

在此基础上，我们有另一种更具体的风格

```
 <Style x:Key="comboBoxSpecialPage"
           BasedOn="{StaticResource OurComboBox}"
           TargetType="ComboBox">
        <Style.Triggers>
            <Trigger Property="SelectedIndex" Value="-1">
                <Setter Property="Text" Value="Select value" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

如果在组合框中没有选择任何内容，例如在应用程序启动时，这会导致文本“选择值”。

但是当我直接单击 TextBox 文本时，什么也没有发生。

所以问题是：如何实现弹出弹出窗口的打开，就像单击组合框的其余部分（没有文本的部分）一样？

-edit- 如果我省略了有趣的部分，请告诉我，我会添加它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:21:33.023

也许 IsHitTestVisible 属性是您正在寻找的，更多信息在这里： [文本框标记和 IsHitTestVisible 属性](https://stackoverflow.com/questions/9564285/textbox-tag-and-ishittestvisible-property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:28:55.760

ComboBox 有一个名为 DropDownStyle 的属性。将此设置为 DropDownList 并且文本区域不再可编辑，即您必须从列表中进行选择。

# android - Android SDK 未找到错误

> ID：14932974
> 
> 赞同：0
> 
> 时间：2013-02-18T09:24:48.803
> 
> 标签：android, eclipse, adt

我正在开发一个使用 Facebook SDK 的 Android 项目。直到今天一切都很好。当我尝试运行该项目时，它给出了以下错误。

```
Unable to resolve target 'android-10' until the SDK is loaded 
```

虽然我有 SDK 2.3.3（10 级），但它没有出现在项目属性中。在 Eclipse 的属性中它说，

```
This Android SDK requires Android Developer Toolkit version 21.1.0 or above.  Current version is 21.0.0.2012-10-31-0-17\.  Please update ADT to the latest version. 
```

但是，根据 Android SDK Manager，我已经安装了最新版本（见下图）。

![在此处输入图像描述](../Images/1c2e5b67cc1a27dfc6b0fbb452ac0917.png)

我该如何解决这个问题？任何帮助将不胜感激，在此先感谢。

**编辑：**

我使用的是 Mac OSX 10.8，我尝试重新启动 eclipse 和 os。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T09:28:14.033

您已更新 android sdk 但未更新 adt 以匹配它。最新的 ADT 版本是 21.1.0，你需要得到它。

转到 eclipse > 帮助 > 检查更新。

它应该列出 adt 的最新更新。如果它不起作用，试试这个：

*   转到 Eclipse > 帮助 > 安装新软件

*   点击添加

*   添加此网址：[https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

*   它将列出可用的更新——理想情况下应该是 adt 21.1.0（最新）

*   安装最新的adt，一切都应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T09:32:49.413

尝试这个：

我找到了问题的答案。（我正在使用 Helios，但无论如何它应该可以工作）

1.  以管理员身份运行 Eclipse。（Windows 7的）

2.  转到帮助 → 安装新软件。

3.  在使用：输入[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)并按 ENTER。

4.  等待 Eclipse 获取存储库。一个名为 Developer tools 的项目将出现在列表中。将其标记为安装，按下一步并按照步骤安装 ADT 工具。

5.  完成后，它将要求重新启动 Eclipse。确保你这样做。

6.  当 Eclipse 重新启动时，您的所有 Android SDK 包应该会再次出现。

# python - 无法通过 django-tastypie 发布以保存具有外键的模型

> ID：14932977
> 
> 赞同：2
> 
> 时间：2013-02-18T09:24:51.210
> 
> 标签：python, django, tastypie

我正在尝试使用具有外键的 POST 保存模型。在我为相关模型设置“添加”、“修改”权限之前，它返回 401 未经授权。简单示例：models.py

```
class AnotherModel(models.Model):
    field = models.TextField()

class MyModel(models.Model):
    foreign_key = models.ForeignKey(AnotherModel) 
```

资源.py

```
class AnoterResource(ModelResource):
    class Meta:
        queryset = AnoterModel.objects.all()
        resource_name = 'another'
        authorization = DjangoAuthorization()
        authentication = ApiKeyAuthentication()

class MyModelResource(ModelResource):
    foreign = fields.ToOneField(AnoterResource, 'foreign_key')

    class Meta:
       queryset = MyModel.objects.all()
       authorization = DjangoAuthorization()
       authentication = ApiKeyAuthentication()
       allowed_methods = ['get', 'post', 'patch', 'put'] 
```

那么，我是否还需要允许 AnotherModel 的“添加”、“修改”权限，以保存 MyModelResource 或者我是否在某个地方弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:52:38.663

为此，您需要首先检查您是否已授予用户适当的权限。有关详细信息，请参阅[此](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#authorization)链接。

以下设置也适用于我。所以我`models.py`看起来像：

```
class AnotherModel(models.Model):
    id = models.Integerfield()
    another_field = models.TextField()

class MyModel(models.Model):
    foreign_key = models.ForeignKey(AnotherModel)
    mymodel_field = models.TextField() 
```

并且`resource.py`是：

```
class AnotherResource(ModelResource):       
    class Meta:
        queryset = AnotherModel.objects.all()
        resource_name = 'another'
        authorization = Authorization()

class MyModelResource(ModelResource):
    another = fields.ToOneField(AnotherResource, 'another', full=True)   
    class Meta:
        queryset = MyModel.objects.all()
        resource_name = 'myresource'
        authorization = Authorization() 
```

现在使用`POST`模型保存任何新数据。我可以做以下`CURL`请求。

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data { "mymodel_field" : "Some text value": "another" : { "id" : 1243 } }' http://localhost/api/v1/myresource/ 
```

希望这可以帮助您解决问题。:)

# ios - 将文件复制到iOS中的不同目录

> ID：14932979
> 
> 赞同：2
> 
> 时间：2013-02-18T09:24:57.330
> 
> 标签：ios, objective-c, cocoa-touch, nsfilemanager

我想将文件从应用程序资源复制到文档目录。我正在使用此代码，但这会将文件复制到我自己的应用程序文档目录中。

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *storePath = [documentsDirectory stringByAppendingPathComponent: @"TestFile.txt"];
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"TestFile" ofType:@"txt"];

[[NSFileManager defaultManager] copyItemAtPath:filePath toPath:storePath error:nil];
if (![fileManager fileExistsAtPath:getDatabasePath])  {
    NSLog(@"file doesn't exist");
    // file doesn't exist
} else {
     NSLog(@"file exist");
} 
```

我曾尝试将此代码更改为，但它不起作用也许是这样的

```
NSString *storePath = [documentsDirectory stringByAppendingPathComponent: @"Applications/AppFolder/Documents/TestFile.txt"]; 
```

那么有没有办法将文件复制到不同的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:30:22.613

您不能从任何应用程序内部将一个应用程序的资源复制到另一个应用程序，因为您不会获得另一个应用程序的任何引用。每个应用程序都有其自动生成的应用程序 ID，您无法从其他应用程序访问它。

如果您尝试在设备中实现，这是不可能的，但是如果您在模拟器中尝试某些东西，只需手动复制粘贴资源..

# php - 如何使用 Wordpress 拼写检查插件？

> ID：14932980
> 
> 赞同：2
> 
> 时间：2013-02-18T09:25:02.207
> 
> 标签：php, wordpress, plugins

wordpress 拼写检查插件（3.5.1 版）显示此错误：

```
Warning: require_once(C:\wamp\www\wordpress\wordpress\wp-content/wp-config.php) [function.require-once]: failed to open stream: No such file or directory in C:\wamp\www\wordpress\wordpress\wp-content\plugins\spell-plugin\spellInclude.php on line 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:35:42.297

你确定你有这个文件：

```
C:\wamp\www\wordpress\wordpress\wp-content/wp-config.php 
```

如果是，我的猜测是从

```
require_once(C:\wamp\www\wordpress\wordpress\wp-content/wp-config.php) 
```

to（并非所有系统都接受两个斜杠）

```
require_once(C:\wamp\www\wordpress\wordpress\wp-content\wp-config.php) 
```

# mysql - 有条件的 Where 子句备用

> ID：14932981
> 
> 赞同：3
> 
> 时间：2013-02-18T09:25:06.497
> 
> 标签：mysql, xml

我正在使用 xml 来显示查询结果。我有一个与我的查询相关的问题。假设在客户表中我有一个数据，其 id 不是任何其他表中的外键，但我仍然想显示数据。ia，为此使用左连接。但问题在于其他表条件（Where 子句 pr.fActive=1...），因此我无法显示仅存在于客户表中但不存在于其他表中的数据。怎么做

```
<Table>customer cu</Table>
          <Joins>
            left join customerprogramxref cuprxref on cu.ixcustomer=cuprxref.ixcustomer
            left join tblprogram  pr on cuprxref.ixprogram=pr.ixprogram
            left join programworkpackagexref prwpxref on pr.ixprogram= prwpxref.ixprogram
            left join workpackage wp on wp.ixworkpackage =prwpxref.ixworkpackage
            left join workpackageactivityxref wpactxref on              wpactxref.ixworkpackage=wp.ixworkpackage
            left join activity act on act.ixactivity=wpactxref.ixactivity
          </Joins>
          <WhereClause>
            cu.fStatus=1 AND pr.fActive=1 AND pr.fDeleted=0 AND wp.fStatus=1 AND act.fStatus=1
          </WhereClause> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:31:20.290

尝试使用**AND将其他条件（例如（Where 子句 pr.fActive=1...）与它的相对****左连接子句放在一起）**

 **例子...

**LEFT JOIN tblprogram pr ON cuprxref.ixprogram = pr.ixprogram AND pr.fActive=1 AND pr.fDeleted=0**

希望，这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:31:57.343

因为`LEFT JOIN`，在正确的部分你有 NULL 时没有加入。

试试这个：

```
cu.fStatus=1
        AND (pr.fActive=1 OR pr.fActive IS NULL)
        AND (pr.fDeleted=0 OR pr.fDeleted IS NULL)
        AND ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:09:16.017

在 Where 子句中检查这一点：

```
 cu.fStatus=1 OR ( pr.fActive=1 AND pr.fDeleted=0 AND wp.fStatus=1 AND act.fStatus=1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T11:46:45.920

您不能尝试使用嵌套查询：

像这样的东西，

```
SELECT finalMap.ixCustomer,finalMap.ixprogram, finalMap.ixWorkPackage,
FROM customer t
left outer join
(SELECT t.ixCustomer,cpRef.ixprogram, cpRef.ixWorkPackage
 FROM customerprogramxref t
left outer join
(SELECT pRef.ixprogram, pRef.ixWorkPackage FROM tblprogram pr
left outer join
(SELECT t.ixprogram,w.ixWorkPackage FROM programworkpackagexref t
left outer join
(SELECT wpa.ixWorkPackage FROM workpackage w
left outer join
(SELECT wpactxref.ixWorkPackage FROM workpackageactivityxref wpactxref
left outer join (SELECT t.ixactivity FROM activity t where t.fStatus=1) act
on act.ixactivity=wpactxref.ixactivity) wpa on w.ixworkpackage =wpa.ixworkpackage
where w.fStatus=1) w  on t.ixWorkPackage = w.ixWorkPackage) pRef
on pr.ixprogram = pRef.ixprogram
where pr.fActive=1  AND pr.fDeleted=0)cpRef
on t.ixprogram=cpRef.ixprogram)finalMap
on t.ixCustomer=finalMap.ixCustomer
where t.fStatus=1; 
```**

# linux - 从当前目录执行 Shell 脚本，不带 '"./filename"

> ID：14932983
> 
> 赞同：7
> 
> 时间：2013-02-18T09:25:09.047
> 
> 标签：linux, shell, admin

我创建了一个名为“testfile”的文件，并使用`chmod +x testfile`. 为了执行文件“testfile”，我需要运行命令`./testfile`。

我需要知道有什么方法可以在不使用`./`和使用`testfile`命令执行文件的情况下运行程序？

下面显示的是文件“testfile”中的一个简单代码

```
echo Todays date is : 
date 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T09:40:00.823

您可以在没有 ./ 的情况下使用以下命令执行它：

```
sh testfile 
```

或者

```
sh /path/to/file/testfile 
```

**编辑**
如果你想直接用命令执行程序，你可以做的是定义一个别名：

```
alias execute_testfile="sh /path/to/file/testfile" 
```

然后，您将在编写时执行程序

```
execute_testfile 
```

或您定义的任何名称。

要使此别名持久化，请`alias ...`在 ~/.profile 或 ~/.bash_profile 文件中包含该行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T19:31:15.140

您可以在您的主目录下找到的 .profile 文件中定义 PATH 变量。

```
vi ~/.profile 
```

添加到您的 .profile 末尾

```
/path/to/dir/:$PATH 
```

这意味着“将 /path/to/dir/ 添加到任何设置的 PATH 变量”

如果您想为系统的所有用户添加一个目录到 PATH 中，您可以：

```
vi /etc/environment - edit, save your changes
source /etc/environment
echo $PATH - should now return your new PATH 
```

在 Ubuntu 服务器上工作，我猜在所有 Debian 发行版上，我不确定其他发行版是否有 /etc/environment 或者是否在其他地方指定了 PATH

别名仍然是一个更好的解决方案

```
vi ~/.bashrc 
```

添加到文件末尾

```
alias <your_script> ='/path/to/your_script.sh' 
```

注销，重新登录 - 你不应该再输入 ./.sh 了

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T09:26:27.547

您需要像这样添加`.`到`PATH`变量中：

```
> echo 'echo Hello, World!' > mycommand
> mycommand
-bash: mycommand: command not found
> ./mycommand
Hello, World!
> PATH=".:$PATH";
> mycommand
Hello, World!
> 
```

# jquery - 云轮播幻灯片，需要点击查看详情，只看前面的图片

> ID：14932984
> 
> 赞同：0
> 
> 时间：2013-02-18T09:25:15.373
> 
> 标签：jquery, cloud, carousel, slide

我的第一个网页有云轮播幻灯片来显示 10 张图片，当我单击下一张图片时看起来还不错，我的问题是我只想要前面的图片可以点击以获取更多详细信息，其余的我不需要，显示在正面位置可以查看更多细节。

/************ Jquery 代码 ********************/

```
<script type="text/javascript">
    $(function(){
            if($("#carousel .objects").length) {               
                    $("#carousel .goprev, #carousel .gonext").click(function(){
                            return false;
                    });

                    var xPos = $("#carousel .objects").width() / 2;
                    var yPos = $("#carousel .objects").height() / 4;        //8;

                    // This initialises carousels on the container elements specified, in this case, carousel1.
                    $("#carousel .objects").CloudCarousel({         
                            reflHeight: 25,         //30,//56,
                            reflOpacity: 0.2,
                            reflGap: $.browser.msie || $.browser.safari ? 0 : 1,    //2,
                            //xRadius: $("#carousel .objects").width() * 0.48,
                            yRadius:-60,    //-25,//0.1,//40,
                            xPos: xPos,     //128,
                            yPos: yPos,     //32,
                            minScale:-0.1,          //0.4,
                            FPS:30,
                            speed: $.browser.msie || $.browser.safari ? 0.2 : 0.05,         //0.2,
                            //mouseWheel:true,
                            bringToFront:true,

                            autoRotate: 'left',
                            autoRotateDelay: 6000,          //5000,

                            buttonLeft: $("#carousel .goprev"),
                            buttonRight: $("#carousel .gonext"),
                            altBox: $("#carousel .mid .padding"),
                            titleBox: $("#carousel .title"),
                            nameBox: $("#carousel h1")
                    });
            }
    }); 
```

/******************* PHP 代码 *************/

```
 $html .= "<a href='"._URL_."property/{$p->pdId}/".strtolower(str_replace(array(" ","/"),"-",$alt)).".html' onclick='return false';'>
                <img src='"._URL_."upload_pictures/{$image->imPhysicalPath}' class='cloudcarousel' width='407' height='242' alt='$siteDescription' title='$price' name='$alt' />
            </a>";
            // {$p->pdTitle}
    }
    return $html; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T17:31:58.693

您可以将以下代码添加到您的 cloud-carousel.js 文件中

```
$(container).on('click', 'a', function(event){

    if($(this).index()!=$(container).data('cloudcarousel').frontIndex){
        event.preventDefault();         
    }

}); 
```

# cordova - 使用phonegap检测黑莓中的网络连接

> ID：14932993
> 
> 赞同：1
> 
> 时间：2013-02-18T09:25:45.100
> 
> 标签：cordova, blackberry, network-programming

```
document.addEventListener("deviceready", onDeviceReady(), false);
function onDeviceReady() {
var networkState = navigator.network.connection.type;
        alert(networkState );
} 
```

phonegap中的上述代码对黑莓没有任何影响，但对androin和ios都有效。

在我的 config.xml 文件中，我有以下内容：

```
<plugin name="NetworkStatus"  value="org.apache.cordova.network.Network"/>

                                  and also

<preference name="phonegap-version" value="2.1.0" /> 
```

在我的主文件中，我有以下脚本标签：

```
<script src="phonegap.js" type="application/x-javascript" 
charset="utf-8"></script> 
```

但是我仍然在警报中得到“未定义”！我需要一些帮助来使用 phonegap 检测黑莓中的互联网连接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:56:22.323

你为什么不尝试对你的服务器进行 ajax 调用，如果你得到响应显示“互联网连接可用”或者在 ajax 错误中显示“没有互联网连接”。

# jquery - https和code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js

> ID：14932997
> 
> 赞同：0
> 
> 时间：2013-02-18T09:26:04.157
> 
> 标签：jquery, jquery-mobile, https, cdn

我在加载时遇到问题

[https://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js](https://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js) (httpS)

但是下载没有问题

[http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js](http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js) (http)

结果是：它没有加载，萤火虫说 [https://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js](https://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js) `Status Aborted`

如果我使用 http（不是 https），那么它看起来没问题：`200 OK`.

为什么会发生以及如何解决？

他们不允许使用httpS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:36:33.807

[jQuery.com](http://jquery.com/)上托管的库由不支持 https:// 的 CDN 提供，这就是您收到错误的原因。

如果您真的希望通过 https:// 传递 jQuery（移动），您可以使用[Google](https://developers.google.com/speed/libraries/devguide#jquery)或[Microsoft](http://www.asp.net/ajaxLibrary/CDN.ashx#jQuery_Mobile_Releases_on_the_CDN_3) CDN。遗憾的是，Google 没有托管 jQuery Mobile 库，Microsoft 也没有托管 1.3.0 RC 版本。

托管在 Microsoft SDN（可通过 https 访问）的 jQuery mobile 的最新版本是[1.2.0](http://www.asp.net/ajaxLibrary/CDNjQueryMobile120.ashx)：

> [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.structure-1.2.0.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.structure-1.2.0.css) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0 /jquery.mobile.structure-1.2.0.min.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.theme-1.2.0.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.theme-1.2.0.css) [https://ajax .aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.theme-1.2.0.min.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile.theme-1.2.0.min.css) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery。 mobile-1.2.0.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.css) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.js](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.js) [https://ajax.aspnetcdn.com/ajax/jquery。 mobile/1.2.0/jquery.mobile-1.2.0.min.css](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js) [https: //ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/ajax-loader.gif](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/ajax-loader.gif) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/ajax-loader.png](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/ajax-loader.png) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons -18-black.png](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-18-black.png) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-18-white.png](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-18-white.png) [https://ajax.aspnetcdn.com/ajax/jquery.mobile /1.2.0/images/icons-36-black.png](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-36-black.png) [https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-36-white.png](https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/images/icons-36-white.png)

# python - Python 3 中的打印语句出错

> ID：14932999
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:26:07.103
> 
> 标签：python

我在这里找到的所有问题都不能完全回答我的问题。

我正在做一个关于 Python 的教程，他正在使用它的旧版本。（3.0 之前）

现在他正在显示字符串索引但是，Python 中的语法发生了变化，所以他的代码是无效的，这里是：

```
s = '<any string>'
print s[0] 
```

假设打印 < 但我收到语法错误。这是错误。

```
print name[0]
         ^
SyntaxError: invalid syntax 
```

我现在已经尝试了所有我知道的方法来做到这一点，但我似乎无法让它发挥作用。

有人可以解释我在哪里可以找到正确的答案，或者你可以告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:27:55.763

问题不在于索引，而在于`print`语句。

[`print`是 in 中的一个函数`Python 3`](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)，而在 中`Python 2`，它只是一个`statement`. 您需要这样使用它：

```
print(s[0]) 
```