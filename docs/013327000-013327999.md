# StackOverflow 问答 13327000-13327999

# sass - SCSS 扩展后代选择器的问题

> ID：13327000
> 
> 赞同：0
> 
> 时间：2012-11-10T23:13:09.247
> 
> 标签：sass

我有一种情况，我正在尝试`@extend`使用后代选择器，但出现错误。示例如下所示。

```
#font {
    .link{
        font-family: 'Segoe UI Light', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
        ... some other stuff..
    }
}

a, .link {
    @extend #font > .link;
    @extend #state > .link;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:27:55.270

首先，第一组代码的选择器实际上是`#font .link`，而不是`#font > .link`。

其次，`@extend`只能扩展简单的选择器（`tag`, `.class`, `#id`, `%silentclass`, `tag.class`, `tag#id`, `tag%silentclass`, 等），不能扩展嵌套选择器。如果您尝试这样做，错误实际上会告诉您：

> 无法扩展 #font .link：无法扩展嵌套选择器

# java - 如何在同一台机器上运行两个具有不同平台的 Web 服务？

> ID：13327001
> 
> 赞同：-1
> 
> 时间：2012-11-10T23:13:11.650
> 
> 标签：java, php, debian, squid

我想做这样的事情，我有一台机器 xxxx，我需要在其中运行两个网站**www.xyz.com**，它在 php 中（在 apache 2 服务器中运行）和另一个 javaEE 服务在**www.xyz.com/服务**（在 apache tomcat 或 glassfish 服务器中运行）。两者都需要在端口 80 上运行（从客户端视图）。你能回答我吗，怎么做？我的机器是 Debian linux 6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:19:13.000

加载附加模块时，使用同样支持 AJP 协议的`mod_proxy`apache 模块`mod_proxy_ajp`。

简单示例：

```
<Location /service/>
   ProxyPass ajp://localhost:8009/service/
</Location> 
```

其中 8009 是在 tomcat 中为连接器定义的端口`server.xml`，/service 是上下文根（也可能与“/service”不同）。

文档：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

# python - 大多数 Pythonic 双重调度，用于从模型中提取视图信息

> ID：13327004
> 
> 赞同：1
> 
> 时间：2012-11-10T23:13:39.863
> 
> 标签：python, qt, model-view-controller, double-dispatch

我正在使用 PySide 使用 Python 和 Qt 编写桌面应用程序。我需要显示一个树视图，其中顶级项目是与其子项不同类型的对象。具体来说，顶级项目是 Git 存储库，而其子项目是工作树中的目录。

对于存储库，我想显示其路径和当前签出的分支。对于一个目录，我只想显示它的名称。

现在，我通过让我的`QAbstractItemModel`后代使用`isinstance`底层模型对象（从`internalPointer()`方法中检索）并决定如何格式化结果字符串来做到这一点。

我想知道是否有一种更 Pythonic（或者不那么笨重）的方式来进行这种双重调度。

我不想做的是在我的 Git repo 和工作树文件的模型类中为此目的定义一个方法，因为我觉得这会违反 SRP。

任何想法或想法都是最受欢迎的。另外，如果有人能为这个问题想出一个不那么笨拙的标题，请告诉我；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T02:11:05.390

如果您对每个 Model 类都有一个包含 View 代码的函数感到满意，那么您可以调用这些函数。要在不使用的情况下分离模型/视图代码`isinstance`，这听起来像是访问者模式的一个案例，如this [SO answer](https://stackoverflow.com/a/2526397/783037)中所述，并在[ast 模块](http://docs.python.org/2/library/ast.html#ast.NodeVisitor)中使用。

基本上，每个模型类都有一个`accept()`接受访问者对象的方法。存储库的方法`accept()`调用该`visit_repository()`访问者对象的方法，传递`self`（即模型实例）。同样，`accept()`目录的方法调用该`visit_directory()`Visitor 对象的方法，传递`self`. `visit_repository()`or方法然后`visit_directory()`可以访问 Model 实例并知道它的类型并可以显示适当的视图。这将视图代码（在访问者对象中）与模型代码（在模型类中）分开。

*注意：您可以使用多方法，而不是使用不同的函数名称（`visit_repository()`vs `visit_directory()`），例如，this [SO answer](https://stackoverflow.com/a/7308379/783037) about multimethods in Python。

# jquery - $(document).ready 在 MVC4 项目下不起作用

> ID：13327008
> 
> 赞同：10
> 
> 时间：2012-11-10T23:14:19.247
> 
> 标签：jquery, .net, asp.net-mvc-4

我只是插入

```
$(document).ready(function () {
    alert("!!!");
}); 
```

像往常一样

```
@{
    ViewBag.Title = "Sign Up";
    Layout = "~/Views/Shared/_WebSite.cshtml";
}

<script type="text/JavaScript">

    $(document).ready(function () {
        alert("!!!");
    });

</script>

<h2>Sign Up</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary()
{

}

}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

但我看不到 alert() 消息...

**jQuery**的其他东西在这个页面上工作正常......

我错过了什么？

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-10T23:17:12.387

如果您检查 html，您可以看到在您的代码之后引用了 jQuery。

默认项目带有一个可选的脚本部分，它将在布局中的 jQuery 引用之后呈现，这是您的代码应该去的地方。

```
@{
    ViewBag.Title = "Sign Up";
    Layout = "~/Views/Shared/_WebSite.cshtml";
}

<h2>Sign Up</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary()
{

}

}

@section Scripts {
    <script type="text/JavaScript">

    $(document).ready(function () {
        alert("!!!");
    });

    </script>
} 
```

# mysql - MySQL：三个月内抢，不抢行

> ID：13327009
> 
> 赞同：0
> 
> 时间：2012-11-10T23:14:24.593
> 
> 标签：mysql

```
SELECT users.email FROM users
INNER JOIN orders
ON orders.user_id = users.id
WHERE orders.status = 'new'
AND orders.date_created > three months back? 
```

我想从今天起 3 个月内获取所有未在我的网站上下订单的用户电子邮件。因此，如果 3 个月内没有订单，请抓住电子邮件。

`date_created`是类型 TIMESTAMP。所以一个例子是：2012-11-10 23:54:20

另外我想要一个查询来获取根本没有下过任何订单的用户电子邮件（订单表中没有行）？

我试过：

```
SELECT users.email FROM users
    WHERE users.id NOT IN (select user_id from orders where user_id = users.id and orders.status = 'new') 
```

但它似乎还是用订单来抢用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:24:43.530

1.  > 我想从今天起 3 个月内获取所有未在我的网站上下订单的用户电子邮件。

    按用户对订单进行分组，并针对最近一次订单超过 3 个月前的订单过滤结果：

    ```
    SELECT   users.email
    FROM     users JOIN orders ON orders.user_id = users.id
    GROUP BY orders.user_id
    HAVING   MAX(orders.date_created) < CURRENT_DATE - INTERVAL 3 MONTH; 
    ```

2.  > 另外我想要一个查询来获取根本没有下过任何订单的用户电子邮件（订单表中没有行）？

    对交集之外的记录进行外部连接和过滤：

    ```
    SELECT   users.email
    FROM     users LEFT JOIN orders ON orders.user_id = users.id
    WHERE    orders.user_id IS NULL 
    ```

# node.js - 实例上设置的 Mongoose 键/值未显示在 JSON 或控制台中。为什么？

> ID：13327011
> 
> 赞同：5
> 
> 时间：2012-11-10T23:14:27.833
> 
> 标签：node.js, mongoose

我有一些关于我的猫鼬模型的信息，这些信息是暂时的。出于性能原因，我不希望将其存储在模型中。但我确实希望能够将此信息提供给连接到我的服务器并请求它的客户端。

这是一个简单的例子：

```
 var mongoose = require('mongoose'),
     db = require('./dbconn').dbconn;

 var PersonSchema = new mongoose.Schema({
  name    : String,
  age     : Number,
});

var Person = db.model('Person', PersonSchema);
var fred = new Person({ name: 'fred', age: 100 }); 
```

Person 模式有两个我要存储的属性（姓名和年龄）。这很有效。我们在控制台中看到：

```
console.log(fred); 
```

> { 姓名：“弗雷德”，年龄：100，_id：509edc9d8aafee8672000001 }

但是，我确实有一个属性（“状态”）会迅速变化，我不想将其存储在数据库中。但我确实想动态跟踪它并将其提供给客户端，因此我将其作为键添加到实例中/ val 对。

```
fred.status = "alive"; 
```

如果我们在添加“alive”键/值对后再次在控制台中查看 fred ，我们会再次看到*fred* *，*但没有显示他的状态：

> { 姓名：“弗雷德”，年龄：100，_id：509edc9d8aafee8672000001 }

然而，key/val 对肯定存在.. 我们看到：

```
console.log(fred.status); 
```

呈现：

> 活

我发送给客户端的对象的 JSON 表示也是如此。“状态”不包括在内。

我不明白为什么..有人可以帮忙吗？

或者，是否有更好的方法将属性添加到未持久化到数据库的猫鼬模式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T03:26:54.240

将以下内容添加到您的架构中应该可以满足您的要求：

```
PersonSchema.virtual('status').get(function() {
  return this._status;
});

PersonSchema.virtual('status').set(function(status) {
  return this._status = status;
});

PersonSchema.set('toObject', {
  getters: true
}); 
```

这添加了虚拟属性`status`- 它不会被持久化，因为它是虚拟的。最后一部分是正确输出控制台日志所必需的。从[文档](http://mongoosejs.com/docs/guide.html)：

> 要让所有虚拟对象都显示在您的 console.log 输出中，请将 toObject 选项设置为 { getters: true }

另请注意，您需要使用除`status`（此处我使用`_status`）之外的内部属性名称。如果使用相同的名称，执行get时会进入无限递归循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:09:41.130

只需调用`.toObject()`数据对象。

对你来说，代码如下：

`fred.toObject()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-27T18:35:16.107

这非常有帮助。我自己不得不为此挣扎。就我而言，我从猫鼬那里得到了一份文件。当我添加一个新密钥时，如果我 console.log 它，则该密钥对对象不可见。当我搜索密钥 (console.log(data.status) 时，我可以在日志中看到它，但如果我记录了整个对象，则看不到它。

阅读此响应线程后，它起作用了。

例如，我从 MongoDB 调用中得到了一个像这样的对象：

```
`Model.find({}).then(result=> {
    //console.log(result);// [{ name:'John Doe', email:'john@john.com'}];

    //To add another key to the result, I had to change that result like this:
    var d = result[0];
    var newData = d.toJSON();
    newData["status"] = "alive";
    console.log(newData);// { name:'John Doe', email:'john@john.com', status:'alive'};
}).catch(err=>console.log(err))` 
```

希望这对其他人有帮助。快乐编码

# java - 我在哪里定义我的变量？

> ID：13327012
> 
> 赞同：-5
> 
> 时间：2012-11-10T23:14:32.380
> 
> 标签：java, variables

所以在我的小 Java 程序中，我在 main 方法中声明了所有变量，但我希望能够从类中的任何位置修改它们，所以我在类主体中声明了它们。现在我不能再在 main 方法中修改它们了。将变量声明为静态的解决方案是什么？如果我这样做，我仍然可以从 main 方法中更改这些变量吗？

```
public class MainGUI
{
  int num1= 1366, num2= 528, num3= 482, sum; // declare these static?

  public static void main(String args[])
  {
    sum = num1 + num2+ num3; //compiler tells me "non-static varable cannot be refrenced from a static context"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:16:16.560

您必须创建**类的实例**才能从java 中的**静态方法****访问非静态变量。**

 **```
public class MainGUI
{
  int num1= 1366, num2= 528, num3= 482, sum; // declare these static?

  public static void main(String args[])
  {
MainGui m = new MainGUI();
    sum = m.num1 + m.num2+ m.num3; 
  }
} 
```

或使您的**实例变量静态**，以便您可以直接访问它们，而无需从您的静态方法的任何实例。

```
 public class MainGUI
    {
      static int num1= 1366, num2= 528, num3= 482, sum; // declare these static?

      public static void main(String args[])
      {
        sum = num1 + num2+ num3; 
      }
    } 
```

但是，按照惯例，静态方法中的静态变量应该使用**classname.variablename访问**

```
 sum =  MainGUI.num1 + MainGUI.num2 + MainGUI.num3; 
```

请参阅此链接以更好地了解[不同类型的变量访问](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:17:52.173

```
public class MainGUI
{
  static int num1= 1366;
..
..

  public static void main(String args[])
  {
   MainGUI.sum = MainGUI.num1 + MainGUI.num2+ MainGUI.num3; 
  }
} 
```**

# c - 用c写跳转指令

> ID：13327013
> 
> 赞同：0
> 
> 时间：2012-11-10T23:15:03.207
> 
> 标签：c, assembly

作为序言，是的，这是一个从外部控制可执行文件的项目。不，我对此没有任何恶意，这个项目的最终结果无论如何都不会有任何用处。我在 cygwin 中使用 32 位安装的 XP 编写此内容。

我需要做的是将 COM 文件的前几位更改为跳转指令，以便在执行时跳转到 COM 文件的最后。我查看了汇编程序手册以查找该命令的字节数，以便我可以在 C 中对其进行硬编码，但没有运气。

第一个问题：我可以在 C 中执行此操作吗？在我看来，我可以在任何 COM 文件的开头插入操作码，这样它就会执行它而不是 COM 文件。

第二个问题：有人知道我在哪里可以找到 OpCodes 的资源，以便我可以将它们插入到我的文件中吗？或者，有谁知道跳转指令的字节是多少？

如果您对本文的真实性有任何疑问，请随时提问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:22:32.313

英特尔[® 64 位和 IA-32 架构软件开发人员手册第 2A 卷指令集参考](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)解释了`JMP`指令的编码（实模式是 IA-32 的子集）。

对于 16 字节的近跳转（在当前代码段内），您将使用`0xE9`后跟要跳转到的相对偏移量。如果您的跳转是 COM 文件的第一个字节，那么偏移量将相对于地址`0x103`- COM 文件的第一条指令始终加载到 address `0x100`，并且跳转是相对于 3 字节跳转之后的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:03:50.890

在 XP 上应该有 debug.exe。简单地启动它，用'a'
type jmp ff00 开始编写代码，如果没有显示相应的十六进制转储，则用'u' dis/[u]nassemble 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:19:30.550

首先请注意，您的程序必须是特定于操作系统、ABI 和机器指令集的。（例如它不会在 Linux/x86-64 或 Linux/PowerPC 下运行）

*您可以在C*中将机器指令编写为字节序列。你必须写哪些字节（即适当的跳转指令的编码）留给你！！！！！！

当然，这不是可移植的 C。但是您基本上可以`memcpy`使用一些适当的源字节区域来做 a。

也许像[asmjit](http://code.google.com/p/asmjit/)或[GNU Lightning](http://www.gnu.org/software/lightning/)之类的库可能会激发您的灵感。

^(您可能无法直接使用它们，但研究它们的代码可以帮助您。)

另请参阅[x86](http://en.wikipedia.org/wiki/X86)维基百科页面以获取更多参考。

# r - 使用 R 预测概率

> ID：13327014
> 
> 赞同：0
> 
> 时间：2012-11-10T23:15:16.743
> 
> 标签：r

我在 R 中创建的模型是：

```
fit <- lm(hired ~ educ + exper + sex, data=data) 
```

我不确定的是如何拟合模型以预测 p = pr(hiring = 1) 的兴趣概率。

任何帮助将不胜感激，克莱

编辑：那么 glm 在我的模型中扮演什么角色？（我在下面的回答）根据 Jason 对 Greg 的回答所做的编辑，我看不出它具体做了什么。

我的回答是否分析了被录用的几率？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T02:53:17.597

对于使用 估计的模型`glm`，您可以使用该`predict`函数为数据集中的每个观测值提取线性预测变量。然后，您可以简单地使用适当的概率分布函数来获得预测概率。例如，在逻辑回归的情况下，使用`plogis`. 换句话说，如果`mod`您的模型适合`glm`：

```
> plogis(predict(mod)) 
```

假设您估计了一个逻辑模型，将返回数据集中每个观察值的预测概率。如果您需要计算不在数据集中的点的预测概率，请参阅`newdata`选项`predict`。请注意，`predict`还可以提供每个点的标准误差。查看文档以`predict.glm`获取更多信息。

编辑：正如格雷格所建议的，您可以`type="response"`在电话中使用免费`predict`获得：`plogis`

```
> predict(mod, type="response") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:29:01.113

So I did my best to interpret the glm notes that I found and this is what I came up with.

```
 > test<-glm(hired ~ educ + exper + sex, data=data, family=binomial())
 > summary(test)

 Call:
 glm(formula = hired ~ educ + exper + sex, family = binomial(), 
     data = data)

 Deviance Residuals: 
     Min       1Q   Median       3Q      Max  
 -1.4380  -0.4573  -0.1009   0.1294   2.1804  

 Coefficients:
             Estimate Std. Error z value Pr(>|z|)  
 (Intercept) -14.2483     6.0805  -2.343   0.0191 *
 educ          1.1549     0.6023   1.917   0.0552 .
 exper         0.9098     0.4293   2.119   0.0341 *
 sex           5.6037     2.6028   2.153   0.0313 *
 ---
 Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

 (Dispersion parameter for binomial family taken to be 1)

     Null deviance: 35.165  on 27  degrees of freedom
 Residual deviance: 14.735  on 24  degrees of freedom
 AIC: 22.735

 Number of Fisher Scoring iterations: 7 
```

# objective-c - 如何保存不是属性列表对象的 Objective-C 对象，或者有比属性列表更好的方法吗？

> ID：13327020
> 
> 赞同：6
> 
> 时间：2012-11-10T23:16:06.300
> 
> 标签：objective-c, properties, save, plist

我正在编写一个 Cookbook 应用程序，但我找不到任何关于如何保存我创建的类（Recipe 类）的数据的任何信息。我见过的唯一方法是可能将此类的内容作为一个整体保存，而无需通过为我的 Recipe 类创建此方法来单独保存每个对象的类的每个元素：

```
-(void) writeToFile:(NSString *)file atomically:(BOOL)atomic{

} 
```

但我完全不知道我将如何实现它以使用此方法将此对象保存到文件中。一些属性是：

```
NSString* name;
UIImage* recipePicture;
NSDate* dateAdded;
NSMutableArray* ingredients; //The contents are all NSStrings. 
```

有谁知道如何保存 Recipe 类的对象？它一直让我发疯，无法弄清楚。任何帮助将不胜感激。我已经有一个名为“RecipeData.plist”的.plist。我是否只需要将每个属性写入 plist 并在运行时使用这些属性初始化一个新的配方对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T23:21:05.360

采纳：

```
@interface Recipe : NSObject<NSCoding> 
```

实施：

```
- (void)encodeWithCoder:(NSCoder *)coder
{
    [coder encodeObject:name_ forKey:@"name"];
    [coder encodeObject:recipePicture_ forKey:@"recipePicture"];
    [coder encodeObject:dateAdded_ forKey:@"dateAdded"];
    [coder encodeObject:ingredients_ forKey:@"ingredients"]; 
```

}

```
// Decode an object from an archive
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super init];
    if (self!=NULL)
    {
       name_ = [coder decodeObjectForKey:@"name"];
       recipePicture_ = [coder decodeObjectForKey:@"recipePicture"];
       dateAdded_ = [coder decodeObjectForKey:@"dateAdded"];
       ingredients_ = [coder decodeObjectForKey:@"ingredients"];   
    }
    return self;
} 
```

现在在你的保存中：

```
- (void) save:(NSString*)path recipe:(Recipe*)recipe
{
    NSMutableData* data=[[NSMutableData alloc] init];
    if (data)
    {
        NSKeyedArchiver* archiver=[[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
        if (archiver)
        {
            [archiver encodeInt:1 forKey:@"Version"];
            [archiver encodeObject:recipe forKey:@"Recipe"];
            [archiver finishEncoding];

            [data writeToFile:path atomically:YES];

        }
     }
 } 
```

在负载中：

```
- (Recipe*) load:(NSString*)path
{
    Recipe* ret=NULL;
    NSData* data=[NSData dataWithContentsOfFile:path];
    if (data)
    {
        NSKeyedUnarchiver* unarchiver=[[NSKeyedUnarchiver alloc] initForReadingWithData:data];
        if (unarchiver)
        {
            int version=[unarchiver decodeIntForKey:@"Version"];
            if (version==1)
            {
                 ret=(Recipe*)[unarchiver decodeObjectForKey:@"Recipe"];
            }
            [unarchiver finishDecoding];
        }
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:36:32.353

一种选择（除了编码/解码）是将类的每个属性存储在字典中。然后将字典写入文件。诀窍是确保您放入字典中的每个对象都允许在 plist 中。在您显示的四个属性中，除了 UIImage 之外的所有属性都可以按原样存储。

```
-(BOOL)writeToFile:(NSString *)file atomically:(BOOL)atomic{
    NSMutableDictionary *data = [NSMutableDictionary dictionary];

    [data setObject:name forKey:@"name"];
    [data setObject:dateAdded forKey@"dataAdded"];

    NSDate *imageData = UIImagePNGRepresentation(recipePicture);
    [data setObject:imageData forKey:@"recipePicture"];

    // add the rest

    return [data writeToFile:file atomically:YES];
} 
```

我更新了这个以返回一个 BOOL。如果失败，则意味着以下两种情况之一：

1.  文件不合适
2.  您试图在字典中保存一个非 plist 友好对象

您需要添加代码以避免尝试添加`nil`对象（如果有的话）。重要的是要确保所有键都是字符串，并且只存储 plist 友好的对象（NSString、NSNumber、NSDate、NSValue、NSData、NSArray 和 NSDictionary）。

# java - 从 EJB 抛出的 LazyInitializationException

> ID：13327025
> 
> 赞同：0
> 
> 时间：2012-11-10T23:16:27.510
> 
> 标签：java, jakarta-ee

我创建了一个作为 Web 服务 (REST) 公开的 EJB。但是，当我尝试它时，我得到了下面的异常。我将其追溯到问题实体上的 JPA 注释。`@ManyToOne`当我取消注释映射（具有 fetch 属性的映射）时，似乎会引发此异常。我故意将实体与其他实体之间可能存在的所有关系建立为`FetchType.LAZY`. 我想保持这种状态。

我正在使用容器管理的事务和所有正常的 EJB 荣耀。为什么会这样？什么是修复？

**编辑：** 我有一个用 注释的存储库类`@Stateless`，然后我在另一个 EJB 中使用这个类，它从存储库中检索问题列表。然后最后我有一个资源也用`@Stateless`. 是因为一些持久性上下文还是什么？

**PS我已经从实体中遗漏了所有其他东西，当我按照描述修复注释时，代码可以工作。**

```
@Entity
public class Question extends AbstractModel {

    private int id;
    private Participant participant;
    private List<Answer> answers;
    private List<QuestionCategory> categories;
    private List<QuestionFeedback> feedback;

    public Question() {
        answers = new ArrayList<Answer>();
        categories = new ArrayList<QuestionCategory>();
        feedback = new ArrayList<QuestionFeedback>();
    }

    @ManyToOne
    //@ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ParticipantId")
    public Participant getParticipant() {
        return participant;
    }

    //@OneToMany(cascade = CascadeType.ALL)
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "QuestionId", nullable = false)
    public List<Answer> getAnswers() {
        return answers;
    }

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "QuestionQuestionCategory",
            joinColumns = @JoinColumn(name = "QuestionId", nullable = false),
            inverseJoinColumns = @JoinColumn(name = "QuestionCategoryId", nullable = false)
    )
    public List<QuestionCategory> getCategories() {
        return categories;
    }

    //@OneToMany(cascade = CascadeType.ALL)
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "QuestionId", nullable = false)
    public List<QuestionFeedback> getFeedback() {
        return feedback;
    }
} 
```

抛出此异常：

> [#|2012-11-11T00:10:59.182+0100|警告|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=71;_ThreadName=Thread-8;| StandardWrapperValve [javax.ws.rs.core.Application]：PWC1406：Servlet javax.ws.rs.core.Application 的 Servlet.service() 抛出异常 org.hibernate.LazyInitializationException：无法初始化代理 - org.hibernate 没有会话.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:165) 在 org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:272) 在 org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:java:185\. ) 在 sun.reflect.GeneratedMethodAccessor76.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 com.sun.xml.bind.v2.runtime.reflect.Accessor$GetterSetterReflection.get(Accessor.java:354) 在 com.sun .xml.bind.v2.runtime.reflect.Accessor.getUnadapted(Accessor.java:147) 在 com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.hasValue(TransducedAccessor.java:251) 在 com .sun.xml.bind.v2.runtime.property.SingleElementLeafProperty.serializeBody(SingleElementLeafProperty.java:105) 在 com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:358) 在 com.sun .xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:350) 在 com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:696) 在 com.sun.xml.bind .v2.runtime.property.SingleElementNodeProperty。com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:358) 上的 serializeBody(SingleElementNodeProperty.java:158) com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer. java:696）在 com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:69) 在 com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty. java:172) 在 com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:159) 在 com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java: 358) 在 com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:593) 在 com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:340) 在 com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323) 在 com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494) 在 com .sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:178) 在 com.sun.jersey.json.impl.BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103) 在 com.sun.jersey.json .impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143) 在 com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:157) 在 com.sun.jersey.spi.container .ContainerResponse.write(ContainerResponse.java:306) 在 com.sun.jersey.server.impl.application.WebApplicationImpl。bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323) 在 com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:178) 在 com.sun.jersey.json.impl。 BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103) 在 com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143) 在 com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider。 writeTo(AbstractRootElementProvider.java:157) 在 com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306) 在 com.sun.jersey.server.impl.application.WebApplicationImpl。bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:323) 在 com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:178) 在 com.sun.jersey.json.impl。 BaseJSONMarshaller.marshallToJSON(BaseJSONMarshaller.java:103) 在 com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143) 在 com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider。 writeTo(AbstractRootElementProvider.java:157) 在 com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306) 在 com.sun.jersey.server.impl.application.WebApplicationImpl。marshallToJSON(BaseJSONMarshaller.java:103) 在 com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143) 在 com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo( AbstractRootElementProvider.java:157) 在 com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306) 在 com.sun.jersey.server.impl.application.WebApplicationImpl。marshallToJSON(BaseJSONMarshaller.java:103) 在 com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.writeTo(JSONRootElementProvider.java:143) 在 com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo( AbstractRootElementProvider.java:157) 在 com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306) 在 com.sun.jersey.server.impl.application.WebApplicationImpl。*handleRequest(WebApplicationImpl.java:1437) 在 com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349) 在 com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl. java:1339) 在 com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416) 在 com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)在 com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:770) 在 org.apache.catalina.core.StandardWrapper org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) 处的 .service(StandardWrapper.java:1550)。*_invoke(StandardContextValve.java:175) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java) 在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) 在 org.apache.catalina .core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:161) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java) 在org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) 在 com.sun.enterprise.v3.services.impl。 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) 上的 ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)。sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) 在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757) 在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask. java:1056) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute (DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly。 ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun。com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool. java:513) 在 java.lang.Thread.run(Thread.java:722) |#]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:51:29.570

我遇到了安迪的确切问题。到目前为止我发现的是：

```
@ManyToOne
//@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "ParticipantId")
public Participant getParticipant() {
    return participant;
} 
```

您**可以**设置`LAZY`为单个属性关联，但您不应该这样做。将`@ManyToOne`注释留在那里：

> 惰性属性获取：访问实例变量时获取属性或单值关联。**这种方法需要构建时字节码检测，并且很少需要。**

至于`Collections`我这样添加的`Hibernate.initialize(categories)`：

> 有时需要**在关闭 Session 之前初始化代理或集合。**例如，您可以通过调用 cat.getSex() 或 cat.getKittens().size() 来强制初始化。但是，这可能会使代码的读者感到困惑，并且对于通用代码来说也不方便。静态方法 Hibernate.initialize() 和 Hibernate.isInitialized() 为应用程序提供了一种使用延迟初始化的集合或代理的便捷方式。Hibernate.initialize(cat) 将强制初始化代理 cat，只要**它的 Session 仍然打开。**Hibernate.initialize(cat.getKittens()) 对小猫的收集有类似的效果。

```
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "QuestionQuestionCategory",
        joinColumns = @JoinColumn(name = "QuestionId", nullable = false),
        inverseJoinColumns = @JoinColumn(name = "QuestionCategoryId", nullable = false)
)
public List<QuestionCategory> getCategories() {
    Hibernate.initialize(categories)
    return categories;
} 
```

现在我有一个`org.hibernate.HibernateException: collection is not associated with any session`例外。根据粗体文本，会话应该是开放的。我仍然找不到在容器管理的应用程序中启动会话的方法。只是调用`getCategories()`不会做代理或会话初始化的伎俩。

有小费吗？

**编辑：解决方案**

可能您希望在用户单击某些内容然后触发动作或 actionListener 时加载关联的集合。

你需要做的是（拜托，这是非常通用的）：

*   使用该方法实现一个`find(Object id)`方法`Hibernate.initialize()`（将其从`getCategories()`上面代码片段中的方法中删除）：

    ```
    public Question find(Object id) {
        Question question = getEntityManager().find(Question.class, id);
        Hibernate.initialize(question.getCategories());
        Hibernate.initialize(question.getAnswers());
        Hibernate.initialize(question.getFeedback());

        return question ;
    } 
    ```

*   当视图请求加载时搜索实体：

    ```
    public void userHasClickedAQuestion(Object id) {
        selectedQuestion = questionFacade.find(id);
    } 
    ```

你完成了。当您调用 getter 方法时，您的答案、问题和反馈将被加载并显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:47:38.703

`LazyInitializationException`: `Session`（否则：）`EntityManager`关闭后，其实体将被**分离**。`QuestionFeedback`问题是 object (`QuestionCategory`和)的集合`Answer`是分离的。如果在 中使用`lazy=false`(Otherwise : `FetchType.EAGER`) `hibernate`，即使`Session`关闭，对象的集合也会被加载到内存中。

参考：[Hibernate：理解延迟获取](http://www.javalobby.org/java/forums/t20533.html)

# java - 如何在java中访问字符串数组的动态数组的元素？

> ID：13327032
> 
> 赞同：2
> 
> 时间：2012-11-10T23:17:27.137
> 
> 标签：java, arrays, pointers, dynamic

我正在尝试使用 opencsv ( [http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/) )。opencsv 的下载中包含示例。这是他们创建动态数组的示例的摘录：

```
CSVReader reader = new CSVReader(new FileReader(ADDRESS_FILE));
String [] nextLine;
while ((nextLine = reader.readNext()) != null) {
    System.out.println("Name: [" + nextLine[0] + "]\nAddress: [" + nextLine[1] + "]\nEmail: [" + nextLine[2] + "]");
} 
```

它读取的 CSV 文件如下：

```
Joe Demo,"2 Demo Street, Demoville, Australia. 2615",joe@someaddress.com
Jim Sample,"3 Sample Street, Sampleville, Australia. 2615",jim@sample.com
Jack Example,"1 Example Street, Exampleville, Australia. 2615",jack@example.com 
```

如果我将 println 语句移到 while 循环之外，我会在 Eclipse 中得到一个错误：“空指针访问：变量 nextLine 在这个位置只能为空。”

我的猜测是 nextLine 有一个指针当前指向它的最后一个位置或超过它的最后一个位置。我想我的问题是，我如何控制那个指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:21:12.187

你退出循环，当`nextLine == null`. 因此，当您将`println`语句移出循环时，`nextLine`就是`null`. 这个错误`"Null pointer access: the variable nextLine can only be null at this location."`完全有道理。

要访问您在循环之后读取的所有内容，您可以执行以下操作：

在进入循环之前添加：

```
List<String[]> readLines = new ArrayList<>(); 
```

并在循环中这样做：

```
readLines.add(nextLine); 
```

因此，在循环之后，您可以从列表中读取所有已读取的行`readLines`。

# matlab - 使用 cmake 构建带有在 Windows 上编译的 C 和 Fortran 函数的 Matlab mex 文件

> ID：13327036
> 
> 赞同：2
> 
> 时间：2012-11-10T23:17:37.573
> 
> 标签：matlab, windows-7, cmake, mex, gfortran

使用 Windows 7 和 Matlab R2011a（32 位），我想使用 Cmake 编译一个用 C 编写的 Matlab mex 文件（`procedure.c`）。该文件包含`void mexFunction()`与 Matlab 接口所需的文件。然而，这个文件中的 C 代码调用了一个用 Fortran 95 编写的子例程（在文件中找到`fp.F`）。

至少，有两个文件需要编译：

```
procedure.c
fp.F 
```

将来，我最终将不得不编译并链接其他 C 代码文件和 Fortran 函数。

我想使用 Windows 平台，使用`gcc`或`Visual Studio 2010`作为 C 编译器和`gfortran`Fortran 编译器来执行此操作。

我必须只使用支持的 Matlab 编译器吗？

似乎`Open Watcom`可以创建适合 mex 的目标文件，但我不能使用`Open Watcom`，因为它只支持`f77`. 我在 Fortran 中的代码是为在 UNIX 操作系统上运行的 gcc 编译器编写的。

使用 Open Watcom 创建的对象文件似乎有非官方支持：http: [//www.mathworks.com/support/solutions/en/data/1-155BQG/? solution=1-155BQG](http://www.mathworks.com/support/solutions/en/data/1-155BQG/?solution=1-155BQG)

* * *

问题是将所有这些与 Cmake、gcc 或 Visual Studio 以及 gfortran 链接在一起。也许 Cmake 不是最佳的，可以使用其他类型的脚本语言？

我无法在 Windows 上访问 Intel Visual Fortran。

# ruby-on-rails - 如何将收到的短信（通过 twilio）关联到我的 rails 应用程序中的特定用户

> ID：13327037
> 
> 赞同：2
> 
> 时间：2012-11-10T23:17:49.630
> 
> 标签：ruby-on-rails, twilio

我正在制作一个应用程序，它可以向一群人发送短信，然后人们可以回复短信。我希望能够记录响应，知道是谁发送的，并将其与发送原始消息的用户相关联。我已经开始发送工作了，我已经开始整理接收短信，但我很困惑。如果 twilio 使用发件人号码和消息向我的服务器发送一个发布请求，我如何知道我的哪些用户发送了原始消息？

如果两个不同的用户大约在同一时间向同一个人发送消息怎么办？处理这个问题的最佳方法是什么？我是否需要为每个用户提供单独的“收件人”号码？似乎那会变得相当昂贵。另外，如果每个用户都有多个活动（消息），我如何将响应与特定活动相关联？

我正在构建一个 Rails 应用程序。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T06:32:42.560

您需要为用户发送到的每个联系人使用不同的 Twilio 号码。这将在 2 个移动设备和一个 Twilio 号码之间建立唯一的映射。这允许您将发送到 Twilio 号码的传入消息转发回适当映射的移动电话。您将根据传入消息的发件人来查找映射。

您不需要每个用户都有一个 Twilio 号码，但您需要一个号码池，这是一个人可以联系的最大数量。

Twilio 网站上有一篇文章提供了更多信息：

[https://www.twilio.com/help/faq/sms/how-can-i-have-users-send-text-messages-to-each-other-over-twilio](https://www.twilio.com/help/faq/sms/how-can-i-have-users-send-text-messages-to-each-other-over-twilio)

# java - 必须有一个@Id 字段（String、Long 或 long）

> ID：13327039
> 
> 赞同：2
> 
> 时间：2012-11-10T23:18:10.300
> 
> 标签：java, google-app-engine, objectify

我一直在试图弄清楚如何解决这个问题：

```
There must be an @Id field (String, Long, or long) 
```

虽然`@Id`课堂上有注释。我试过做 mvn clean，Eclipse 项目 clean，没有编译时错误。但是，当我运行我的应用程序并尝试保留已注册的实体时，我收到此错误。

我正在使用 Objectify-4 并使用 OfyLoader 模式。

**代码：**

```
import java.util.List;
import com.googlecode.objectify.annotation.Entity;
import com.googlecode.objectify.annotation.Id;

@Entity
public class TestEntity {
    @Id
    private Long id;
    private List<String> strList;

    public TestEntity() {}

    public TestEntity(List<String> strList){
        this.setStrList(strList);
    }

    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public List<String> getStrList() {
        return strList;
    }
    public void setStrList(List<String> strList) {
        this.strList = strList;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T18:23:16.477

确保 objectify 4 在您的类路径上，并且唯一的 id 导入是：

```
import com.googlecode.objectify.annotation.Id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:29:17.480

您应该首先打包然后运行您的项目。因为如果你jetty run，比如run操作看不到注解

# java - 如何判断在我的 SQLite 数据库中创建的 TextView 是否被点击？

> ID：13327048
> 
> 赞同：0
> 
> 时间：2012-11-10T23:19:34.293
> 
> 标签：java, android, sql, textview

我有一个包含团队名称和团队编号的数据库（都存储为字符串 - 数字有时包含字母）

我想要它，所以当您单击“打开”按钮时，它会弹出一个包含所有团队名称和号码的弹出窗口，如果您单击一个，它将关闭弹出窗口并将两个 editText 设置为名称＆ 数字。

```
 Dialog d = new Dialog(this);
            ScoutingFormData info = new ScoutingFormData(this);
            info.open();
            ScrollView scr = info.getData();
            info.close();
            d.addContentView(scr, null);
            d.show(); 
```

那是来自主程序，当您单击“打开”时，会发生这种情况。ScoutingFormData 是我的 SQLite 数据库，这里是 getData：

```
 public ScrollView getData() {
    String[] columns=new String[]{KEY_ROWID,KEY_NAME,KEY_NUM};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    ScrollView result=new ScrollView(null);
    int iID = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iNum = c.getColumnIndex(KEY_NUM);
    LinearLayout vertlay = new LinearLayout(null);
    vertlay.setOrientation(LinearLayout.VERTICAL);
    for (c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
        TextView tv=new TextView(null);
        tv.setText(c.getString(iNum)+"  "+c.getString(iName));
        vertlay.addView(tv);
    }
    result.addView(vertlay);
    return result;
} 
```

所以这会构建对话框，但是我如何制作它以便主程序（顶部代码）知道何时单击了这些 TextView 之一？

附带问题：在制作视图时（如 LinearLayout vertlay = new LinearLayout(null);），我应该使用什么上下文？我不完全理解“上下文”是什么，所以我真的不知道用什么替换“null”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:22:58.517

> 如何使主程序（顶部代码）知道何时单击了这些 TextView 之一？

只需制作`tv` `clickable`并添加一个`OnClickListener`.

> 附带问题：我应该使用什么上下文？

您暗示`getData()`在您的数据库适配器类`ScoutingFormData`中，保存对传递给构造函数的 Context 的引用并稍后重用它：

```
private Context mContext;
public ScoutingFormData(Context context) {
    mContext = context;
} 
```

全部一起：

```
TextView tv=new TextView(mContext);
tv.setClickable(true);
tv.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {
        // Do something
    }
}); 
```

# trigger.io - 调用 forge.ajax 时 Java NullPointerException null

> ID：13327050
> 
> 赞同：0
> 
> 时间：2012-11-10T23:19:37.533
> 
> 标签：trigger.io

当调用`forge.ajax`和请求返回带有 JSON 的 401 时，仅在 Android 下（设备和模拟器）我收到以下错误消息：

```
[信息] D/Forge (25373): 返回: {"content":{"type":"UNEXPECTED_FAILURE","message":"Forge Java 错误: NullPointerException: null","full_error":"java.lang.NullPointerException \n\tat io.trigger.forge.android.modules.request.API$1$1.getPasswordAuthentication(API.java:107)\n\tat java.net.Authenticator.requestPasswordAuthentication(Authenticator.java:140)\n\tat libcore.net.http.HttpURLConnectionImpl.getAuthorizationCredentials(HttpURLConnectionImpl.java:432)\n\tat libcore.net.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:407)\n\tat libcore.net.http.HttpURLConnectionImpl.processResponseHeaders( HttpURLConnectionImpl.java:356)\n\tat libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:292)\n\tat libcore.net.http.HttpURLConnectionImpl。getInputStream(HttpURLConnectionImpl.java:168)\n\tat io.trigger.forge.android.modules.request.API$1.run(API.java:285)\n\tat io.trigger.forge.android.core.ForgeTask $1.doInBackground(ForgeTask.java:112)\n\tat android.os.AsyncTask$2.call(AsyncTask.java:287)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305 )\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:137)\n\tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n\tat java.util. concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java: 856)\n"},"状态":"错误","callid":"46C2A570-7229-4427-9BF8-F64FB12F6D8F"}android.modules.request.API$1.run(API.java:285)\n\tat io.trigger.forge.android.core.ForgeTask$1.doInBackground(ForgeTask.java:112)\n\tat android.os. AsyncTask$2.call(AsyncTask.java:287)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java :137)\n\tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\n\tat java. util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java:856)\n"},"status":"error","callid" ：“46C2A570-7229-4427-9BF8-F64FB12F6D8F”}android.modules.request.API$1.run(API.java:285)\n\tat io.trigger.forge.android.core.ForgeTask$1.doInBackground(ForgeTask.java:112)\n\tat android.os. AsyncTask$2.call(AsyncTask.java:287)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java :137)\n\tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\n\tat java. util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java:856)\n"},"status":"error","callid" ：“46C2A570-7229-4427-9BF8-F64FB12F6D8F”}112)\n\tat android.os.AsyncTask$2.call(AsyncTask.java:287)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)\n\tat java.util .concurrent.FutureTask.run(FutureTask.java:137)\n\tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor. java:1076)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java:856)\n"},"状态":"错误","callid":"46C2A570-7229-4427-9BF8-F64FB12F6D8F"}112)\n\tat android.os.AsyncTask$2.call(AsyncTask.java:287)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)\n\tat java.util .concurrent.FutureTask.run(FutureTask.java:137)\n\tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor. java:1076)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java:856)\n"},"状态":"错误","callid":"46C2A570-7229-4427-9BF8-F64FB12F6D8F"}concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java: 856)\n"},"状态":"错误","callid":"46C2A570-7229-4427-9BF8-F64FB12F6D8F"}concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)\n\tat java.lang.Thread.run(Thread.java: 856)\n"},"状态":"错误","callid":"46C2A570-7229-4427-9BF8-F64FB12F6D8F"}

```

正在触发 forge.ajax 错误回调，但 error.content 对象包含上面的字符串并且没有响应。请注意，这在 iOS 上不会发生。

[当您从Play 商店](http://play.google.com/store/apps/details?id=com.boorgle.app)运行应用程序并尝试使用错误的密码/不存在的用户登录时，您可以看到这一点。

完整的源代码在[github上可用](http://github.com/burgalon/boorgle-spine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:24:44.717

当尝试访问受基本身份验证保护的 HTTP 资源时会出现这种情况，并且没有向 request.ajax 提供用户名。

该错误已在平台 v1.4.24 中修复 - 不便之处敬请见谅！

[http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-24](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-24)

# c++ - 为什么 QPlainTextEdit 中没有放大和缩小插槽？

> ID：13327051
> 
> 赞同：0
> 
> 时间：2012-11-10T23:19:38.810
> 
> 标签：c++, qt, user-interface, text-editor, qtextedit

我注意到[QTextEdit](http://doc.qt.digia.com/qt/qtextedit.html)具有放大和缩小插槽并且使用它们非常容易。但是，我使用的是从[QPlainTextEdit](http://doc.qt.digia.com/qt/qplaintextedit.html)继承的小部件，而 QPlainTextEdit 没有这些小部件，这对我来说似乎很奇怪。我认为这两个小部件是做类似的工作。

如何在我的小部件（继承 QPlainTextEdit）中实现放大和缩小功能？继承 qplaintextedit 和 qtextedit 是一个好的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:55:55.530

我不建议从两个不同的 qt 文本编辑器多重继承，这是一个危险的游戏。如果你需要 QTextEdit 固有的功能，你应该只继承它。

# ios - 使用圆形布局滚动集合视图

> ID：13327053
> 
> 赞同：6
> 
> 时间：2012-11-10T23:19:50.370
> 
> 标签：ios, uicollectionview

我使用这篇博文中的代码：http: [//markpospesel.wordpress.com/2012/10/25/fixing-circlelayout/](http://markpospesel.wordpress.com/2012/10/25/fixing-circlelayout/)（github上的代码：[https](https://github.com/mpospese/CircleLayout) ://github.com/mpospese/CircleLayout ）

它基本上是 Apple 在 WWDC 上提供的 CircleLayout 项目的修改版本。

我想做的是向圆形集合视图添加滚动功能。或者也许它应该被称为旋转。

我将把集合视图放在屏幕底部，这样你就只能看到它的顶部三分之一。并通过滑动滚轮滚动让用户查看所有项目。

我怎样才能做到这一点？集合视图是否默认支持滚动，还是我必须添加识别器并手动执行操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:36:43.753

我觉得 iCarousel 对你来说是个不错的选择： [https](https://github.com/nicklockwood/iCarousel) ://github.com/nicklockwood/iCarousel 使用 Wheel 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T09:26:51.410

我开发了一个自定义 UICollectionviewLayout，它的布局是圆形布局中的集合视图单元格。它可以配置为显示特定的。

在您的情况下，您将需要 180 - 0 度。

[https://github.com/DoddaSrinivasan/DSCircularCollectionView](https://github.com/DoddaSrinivasan/DSCircularCollectionView)

# xcode - Xcode (LLVM) 和 SQLite：错误：“struct Btree”类型的定义不完整

> ID：13327058
> 
> 赞同：1
> 
> 时间：2012-11-10T23:20:34.070
> 
> 标签：xcode, sqlite, llvm

我对此感到困惑.... SQLite 是一个单独的项目，也是工作区的一部分。在构建目标时，LLVM 抱怨：

```
<path>/sqlite3.c:44924:24: Incomplete definition of type 'struct Btree' 
```

那是在第 44924 行（以及 44924 之后的 14 个其他地方）。这是我看到的其他内容：

```
7145: /* Forward declaration */
7146: typedef struct Btree Btree;
...

11378: struct Btree {
11379:   sqlite3 *db;       /* The database connection holding this btree */
11380:   BtShared *pBt;     /* Sharable content of this btree */
11381:  u8 inTrans;        /* TRANS_NONE, TRANS_READ or TRANS_WRITE */
11382:  u8 sharable;       /* True if we can share pBt with another db */
11383:  u8 locked;         /* True if db currently has pBt locked */
11384:  int wantToLock;    /* Number of nested calls to sqlite3BtreeEnter() */
11385:  int nBackup;       /* Number of backup operations reading this btree */
11386:  Btree *pNext;      /* List of other sharable Btrees from the same db */
11387:  Btree *pPrev;      /* Back pointer of the same list */
11388:#ifndef SQLITE_OMIT_SHARED_CACHE
11389:  BtLock lock;       /* Object used to lock page 1 */
11390:#endif
11391:};
...

44919: static void lockBtreeMutex(Btree *p){
44920:   assert( p->locked==0 );
44921:   assert( sqlite3_mutex_notheld(p->pBt->mutex) );
44922:   assert( sqlite3_mutex_held(p->db->mutex) );
44923: 
44924:   sqlite3_mutex_enter(p->pBt->mutex);
44925:   p->pBt->db = p->db;
44926:   p->locked = 1;
44927: } 
```

我还尝试将 11378 处的结构重命名为`struct Btree_S`（并更改了`typedef`）。同样的问题。

我想我的问题是，它怎么可能不完整？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:23:53.900

确保`sqlite3.c`编译为 C，而不是 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:23:25.810

`SQLITE_HAS_CODEC=1`找到答案....未定义预处理器宏。为什么没有定义？由于[Xcode 4：项目不遵守工作区中的 $(inherited) 构建设置？](https://stackoverflow.com/questions/13327744/xcode-4-project-does-not-honor-inherited-build-setting-in-workspace).

`$(inherited)`不能在 Xcode 4 中按预期在父/子关系中的项目中工作（尽管 IDE 的树视图向我们显示了什么），以及文档对`$(inherited)`.

Xcode 配置文件 (xcconfig) 也无法按预期工作。我无法将配置文件分配给其他子项目（仅限顶级项目）。

苹果应该解雇他们的整个 QA 部门和技术作家，并雇佣一批新的 ID10T。

# c# - C# 使用 HttpWebRequests 提取名称

> ID：13327059
> 
> 赞同：0
> 
> 时间：2012-11-10T23:20:44.790
> 
> 标签：c#, web, response, extract, names

我是动漫迷，我想获得所有动漫角色的完整列表，所以我遇到了这个网站： [http](http://www.animevice.com/characters/?page=1) ://www.animevice.com/characters/?page=1 我的目标是提取所有名称并添加他们到listBox1。这是我当前的代码：

```
 try
        {
        while (true)
        {
            HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://www.animevice.com/characters/?page=" + n);
            req.Method = "GET";
            req.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0";
            req.KeepAlive = true;

            HttpWebResponse response = (HttpWebResponse)req.GetResponse();
            Stream responseData = response.GetResponseStream();
            StreamReader reader = new StreamReader(responseData);
            string responseFromServer = reader.ReadToEnd();
            string m = "<a href=\"(.*)\" class=\"name\">(.*)</a>";
            Match match = Regex.Match(responseFromServer, m, RegexOptions.IgnoreCase);
            if (match.Success)
            {
                listBox1.Items.Add(match.Groups[2]Value.ToString());

            }
            if (listBox1.Items.Count % 50 == 0)
            {
                n++;
            }
        }
}
catch { } 
```

然而，这给了我很多次名单上的第一个名字（Monkey D. Luffy）。有什么解决办法吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:36:11.370

我会使用像[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)这样的真正的 html 解析器来解析 html 而不是正则表达式。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(responseFromServer);
var names = doc.DocumentNode.SelectNodes("//a[@class='name']")
                .Select(a=>a.InnerText)
                .ToList();

listBox1.DataSource = names; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:30:03.517

您只读取了一个页面名称。

反而：

```
Match match = Regex.Match(responseFromServer, m, RegexOptions.IgnoreCase);
if (match.Success)
{
    listBox1.Items.Add(match.Groups[2]Value.ToString());

}
if (listBox1.Items.Count % 50 == 0)
{
    n++;
} 
```

尝试这个：

```
var matches = Regex.Matches(responseFromServer, m, RegexOptions.IgnoreCase);
foreach (var item in matches)
{
    var match = item as Match;
    if (match.Success)
    {
        listBox1.Items.Add(match.Groups[2]Value.ToString());    
    }
    if (list.Count % 50 == 0)
    {
        n++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:32:29.550

```
using (StreamReader reader = new StreamReader(responseData))
  {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
             string m = "<a href=\"(.*)\" class=\"name\">(.*)</a>";
             Match match = Regex.Match(line, m, RegexOptions.IgnoreCase);
             if (match.Success)
             {
                 listBox1.Items.Add(match.Groups[2].Value.ToString());
             }
         }
  } 
```

# sql - 部分行到列

> ID：13327066
> 
> 赞同：0
> 
> 时间：2012-11-10T23:21:34.970
> 
> 标签：sql, sql-server, sql-server-2008, pivot

任何人都可以指导我如何旋转我的数据。我有：

```
RowID Dimension Value
1 Country Italy
1 Year 2011
1 GDP 4
1 Population 6
2 Country Spain
2 Year 2011
2 GDP 7
2 Population 5 
```

我想以这样的方式：

```
RowID Country Year GDP Population
1 Italy 2011 4 6
2 Spain 2011 7 5 
```

PS 我使用的是 MS SQL Server 2008 R2 Express Edition。我尝试使用 PIVOT，但它返回了许多带有 NULL 的行，所以我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:25:07.007

你可以用`PIVOT`这个。如果您知道所有值，则可以对其进行硬编码：

```
select *
from
(
  select rowid, dimension, value
  from yourtable
) src
pivot
(
  max(value)
  for dimension in ([Country], [Year], [GDP], [Population])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6cdb5/1)

或者你们中的一些人无权访问该`PIVOT`函数，那么您可以使用带有 a 的聚合`CASE`：

```
select rowid,
  max(case when dimension = 'country' then value end) country,
  max(case when dimension = 'Year' then value end) Year,
  max(case when dimension = 'GDP' then value end) GDP,
  max(case when dimension = 'Population' then value end) Population
from yourtable
group by rowid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6cdb5/3)

如果您有未知数量的值，则可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Dimension) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT rowid, ' + @cols + ' from 
             (
                select rowid, dimension, value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for dimension in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6cdb5/4)

# node.js - 我应该使用什么编码在 nodeJS 中正确生成带有加密的 ETag？

> ID：13327068
> 
> 赞同：6
> 
> 时间：2012-11-10T23:21:50.937
> 
> 标签：node.js, caching, http-headers, etag

在我的 nodeJS 应用程序中，我想为返回给客户端的所有内容生成 ETag。我需要 ETag 基于文件的实际内容而不是日期，以便跨不同节点进程的同一文件具有相同的 ETag。

现在，我正在执行以下操作：

```
var fs = require('fs'), crypto = require('crypto');
fs.readFile(pathToFile, function(err, buf){
  var eTag = crypto.createHash('md5').update(buf).digest('hex');
  res.writeHead(200, {'ETag': '"' + eTag + '"','Content-Type':contentType});
  res.end(buf);
}); 
```

我不确定我应该为不同的加密函数使用什么编码才能建立适当的系统。我应该使用其他东西`hex`吗？我应该得到`fs.readFile`返回十六进制编码缓冲区的调用吗？如果是这样，这样做会影响返回给用户的内容吗？

最好的，谢谢，
萨米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T04:50:49.090

你做得很好。没有理由以任何特殊格式对文件进行编码，并且使用十六进制作为输出是非常标准的。粗略地说，要求是：

*   同一个文档应该总是返回相同的 ETag
*   文档中的任何更改都会导致 ETag 发生更改
*   ETag 数据应该整齐地放入 HTTP 标头中

# google-apps-script - 在电子表格列中搜索字符串中的文本并在另一列中返回结果

> ID：13327069
> 
> 赞同：6
> 
> 时间：2012-11-10T23:21:53.287
> 
> 标签：google-apps-script, google-sheets

使用谷歌应用程序脚本和电子表格，我一直在尝试做一件简单的事情，但无法找出问题所在。我有一张纸，有一个空白列和一个带文本的列。列不相邻。我正在尝试在一列中的每个单元格中搜索文本，如果找到文本，则将空列中单元格的值设置为“是”。

示例（抱歉没有代码 - 我已经用它转了几个小时，我所拥有的东西太复杂了，最好只提供一个例子）：

```
Column A with text  Empty Column F
abcd efg hij
klmn opq rstu  
vwxzy                  Yes 
```

在 A 列中搜索“xyz”并在 F 列中返回“是”的最简单代码是什么？

我已经在网上查看并尝试了十几个不同的代码示例，但都无法使它们工作。感谢任何帮助！

**编辑**（希望是最终版本）供我使用（我有一些后端实用程序可以根据标题名称获取列号，该代码未包含在此代码中，仅供参考）：

```
var sskey = SpreadsheetApp.openById('**********************')

function otherfunction(){
  addCustomValue('POCs', 'Groups', 'Champion', 'Champion', 'Yes');
}

function addCustomValue(sheetNamestr, searchColnamestr, writeColnamestr, searchKeystr, writeValstr) {
  var sheet = sskey.getSheetByName(sheetNamestr);
  var searchColnum = MyUtilities.getColIndexByName(sheet, 1, searchColnamestr);
  var writeColnum = MyUtilities.getColIndexByName(sheet, 1, writeColnamestr);
  var data = sheet.getDataRange().getValues();
  for (n=0; n<data.length; ++n) {
    if (data[n][searchColnum-1].toString().match(searchKeystr)==searchKeystr){ data[n][writeColnum-1] = writeValstr};
    }
  sheet.getRange(1,1,data.length,data[0].length).setValues(data);
} 
```

谢谢塞尔！现在我可以根据任何列和条件在我的电子表格上运行它！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T09:50:19.303

这是一个可能的简单脚本，可以满足您的需要。（如果您的工作表包含公式或自定义函数，则应对其进行修改以将其考虑在内）

```
function test(){
  var sh = SpreadsheetApp.getActiveSheet();
  var data = sh.getDataRange().getValues(); // read all data in the sheet
  for(n=0;n<data.length;++n){ // iterate row by row and examine data in column A
    if(data[n][0].toString().match('xyz')=='xyz'){
      // if column A contains 'xyz' then set value in index [5] (is column F)
      data[n][5] = 'YES'
    };
  }
  Logger.log(data)
  sh.getRange(1,1,data.length,data[0].length).setValues(data); // write back to the sheet
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T03:44:19.053

```
function myFunction() {
  //Variable to keep track of the sheet
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  //Start at row 1, end at the last row of the spreadsheet
  for(var i=1;i<sheet.getLastRow();i++){
    var value = sheet.getRange(i, 1).getValue();
    //Compare the value of the cell to 'xyz', if it is then set column 4 for that row to "Yes"
    if(value == 'xyz'){
      sheet.setActiveRange(sheet.getRange(i, 4)).setValue('Yes');
    }
  }
} 
```

# php - 搜索数组并删除条目

> ID：13327084
> 
> 赞同：1
> 
> 时间：2012-11-10T23:24:21.407
> 
> 标签：php, arrays

如何删除状态等于 0 的所有数组条目？

这意味着：`$array[1][3];`和`$array[4];`

```
Array
(
    [1] => Array
        (
            [id] => 1
            [parent_id] => 0
            [status] => 2
            [title] => bananer
            [breadcrumb] => /bananer
            [slug] => /bananer
            [2] => Array
                (
                    [id] => 2
                    [parent_id] => 1
                    [status] => 2
                    [title] => sub bananer
                    [breadcrumb] => /bananer/sub bananer
                    [slug] => /bananer/sub-bananer
                )
            [3] => Array
                (
                    [id] => 3
                    [parent_id] => 1
                    [status] => 0
                    [title] => sub bananer 2
                    [breadcrumb] => /bananer/sub bananer 2
                    [slug] => /bananer/sub-bananer-2
                )
        )
    [4] => Array
        (
            [id] => 4
            [parent_id] => 0
            [status] => 0
            [title] => appelsin
            [breadcrumb] => /appelsin
            [slug] => /appelsin
            [5] => Array
                (
                    [id] => 5
                    [parent_id] => 4
                    [status] => 2
                    [title] => sub appelsin
                    [breadcrumb] => /appelsin/sub appelsin
                    [slug] => /appelsin/sub-appelsin
                )
            [6] => Array
                (
                    [id] => 6
                    [parent_id] => 4
                    [status] => 2
                    [title] => sub appelsin 2
                    [breadcrumb] => /appelsin/sub appelsin 2
                    [slug] => /appelsin/sub-appelsin-2
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:46:18.387

这样的事情可能会有所帮助

```
function parse($var)
{
    foreach($var as $key => $val)
    {
        if( is_array($val) )
        {
            parse($val)
        }
        else
        {
            if($key == 'status' && $val ==0 )
            {
                // do something here
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:46:57.773

试试这个：

```
function deleteIt(&$array)
{
    foreach($array as $key => &$value)
    {
        if (is_numeric($key)) deleteIt($value);
        if (isset($value['status']) && !$value['status']) unset($array[$key]);
    }
} 
```

这会在传递引用时递归地遍历数组，以便在删除时修改原始数组。注意函数原型和`&`.`deleteIt``foreach`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:49:11.760

您可以做一些高度专业化的事情，例如：

```
function stripBadStatus($array) {
foreach($array as $k=>$arr) {
    if($arr['status'] == 0) {
        unset($array[$k]);
    } else if(is_array($arr)) {
        foreach($arr as $deepk=>$deeparr) {
            if($deeparr['status'] == 0) {
                unset($array[$k][$deepk]);
            }
        }
    }
}

return $array;
} 
```

# gwt - GWT RPC 服务器端安全反序列化以检查字段大小

> ID：13327085
> 
> 赞同：1
> 
> 时间：2012-11-10T23:24:29.487
> 
> 标签：gwt, rpc

假设我通过 RPC 从 GWT 客户端向服务器发送以下类型的对象。对象被存储到数据库中。

```
public class MyData2Server implements Serializable
{
    private String myDataStr;
    public String getMyDataStr() { return myDataStr; }
    public void setMyDataStr(String newVal) { myDataStr = newVal; }
} 
```

在客户端，我将字段 myDataStr 限制为最多 20 个字符。

我一直在阅读有关 Web 应用程序安全性的内容。如果我学到了一些东西，那就是客户端数据不应该被信任。然后服务器应该检查数据。所以我觉得我应该在服务器上检查我的字段确实不超过 20 个字符，否则我会中止请求，因为我知道这一定是一次攻击尝试（当然假设客户端没有错误）。

所以我的问题是：

1.  在服务器端实际检查我的字段不超过 20 个字符有多重要？我的意思是攻击的机会/风险有多大，后果会有多严重？根据我的阅读，它看起来可能会通过溢出和拒绝服务使服务器停机，但不是安全专家，我可能会误解。

2.  假设我不会浪费时间在服务器上进行字段大小检查，应该如何完成呢？我似乎记得读过（对不起，我不再有参考），一个天真的检查就像

    if (myData2ServerObject.getMyDataStr().length() > 20) throw new MyException();

不是正确的方法。相反，需要定义（或覆盖？）方法 readObject()，类似于[此处](http://www.java2s.com/Code/Java/File-Input-Output/OverridewriteObjectObjectOutputStreamoosandreadObjectObjectInputStreamois.htm)。如果是这样，那么在 RPC 调用的上下文中应该如何做呢？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:48:29.673

> 在服务器端实际检查我的字段不超过 20 个字符有多重要？

这是 100% 重要的，除非您可以 100% 信任最终用户（例如某些内部应用程序）。

> 我的意思是有什么机会

一般：增加。确切的概率只能针对您的具体情况单独回答（即这里没有人能够告诉您，尽管我也对一般统计数据感兴趣）。我能说的是，篡改非常容易。它可以在 JavaScript 代码中完成（例如使用 Chrome 的内置开发工具调试器）或通过编辑清晰可见的 HTTP 请求数据来完成。

> /攻击的风险以及后果有多严重？

风险可能会有所不同。最直接的风险可以通过思考来评估：“如果您可以将任何 GWT 可序列化对象的任何字段设置为任何值，您可以存储和做什么？” 这不仅是关于超出大小，还可能是篡改用户 ID 等。

> 根据我的阅读，它看起来可能会通过溢出和拒绝服务使服务器停机，但不是安全专家，我可能会误解。

这是另一个需要处理的级别，无法通过 GWT RPC 方法实现中的服务器端验证来解决。

> 相反，需要定义（或覆盖？）方法 readObject()，就像这里一样。

我不认为这是一个好方法。它试图完成两件事，但都不能很好地完成。服务器端有两种检查必须完成：

1.  在低级别上，当字节进入时（在它们被 RemoteServiceServlet 转换为 Java 对象之前）。这需要在每台服务器上处理，不仅是 GWT，还需要在单独的问题中回答（答案可能只是服务器设置的最大请求大小）。
2.  在逻辑层面上，在您拥有 Java 对象中的数据之后。为此，我会推荐一个验证/授权层。GWT 的一个很棒的特性是，您现在可以在服务器端和客户端使用 JSR 303 验证。它没有涵盖所有方面（您仍然需要测试用户权限），但它可以涵盖您的“@Size(max = 20)”用例。

# android - 在android中调整位图大小

> ID：13327086
> 
> 赞同：0
> 
> 时间：2012-11-10T23:24:42.260
> 
> 标签：android, bitmap

我有尺寸为 908 x 1003 的位图。我的屏幕尺寸是 480 x 800。我想全屏显示这个位图。我正在调整位图的大小，但我的屏幕上仍有空白空间（图像以全高而不是全宽显示）。

这是我的代码

我有一个名为 processesMap(908 x 1003) 的位图。

```
 DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);

    int widthPix = (int) Math.ceil(dm.widthPixels * (dm.densityDpi / 160.0));
    int heightPix = (int) Math.ceil(dm.heightPixels * (dm.densityDpi / 160.0));

    Bitmap resizedBitmap = Bitmap.createScaledBitmap(processedMap, (int) widthPix, (int)heightPix, true);

    imageView.setImageBitmap(resizedBitmap); 
```

奇怪的是，当我增加 widthPix 的大小（如 widthPix + 40）时，问题就解决了！请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:56:32.827

您的具体问题在这里：

```
(dm.densityDpi / 160.0) 
```

在此语句上放置一个断点，然后评估此计算。您在没有强制转换的情况下划分 2 个整数，并且由于它在括号中，因此在乘法之前对其进行评估。最终结果是您丢失了小数部分，例如 240 / 160 => 1

用这个：

```
(dm.densityDpi / 160.0d) 
```

话虽如此，Doomsknight 的评论是合理的。既然只需要处理像素，为什么要复杂化呢？

# meteor - Meteor bundle 失败，因为fibers.node 丢失

> ID：13327088
> 
> 赞同：23
> 
> 时间：2012-11-10T23:24:45.060
> 
> 标签：meteor

捆绑的 node.fibers 在部署到不同的服务器后无法加载，并出现以下错误：

```
/home/ec2-user/bundle/server/node_modules/fibers/fibers.js:13
    throw new Error('`'+ modPath+ '.node` is missing. Try reinstalling `node-fibe
          ^
Error: `/home/ec2-user/bundle/server/node_modules/fibers/bin/linux-x64-v8-3.11/fibers.node` is missing. Try reinstalling `node-fibers`?
    at Object.<anonymous> (/home/ec2-user/bundle/server/node_modules/fibers/fibers.js:13:8)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/ec2-user/bundle/server/server.js:3:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-10T23:29:31.990

解包后必须重新安装节点光纤。要解决此问题，请转到服务器目录。

```
$ cd bundle/programs/server 
```

然后卸载`fibers`

```
$ npm uninstall fibers 
```

然后安装`fibers`

```
$ npm install fibers 
```

然后启动您的应用程序

```
$ cd ../../
$ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp node bundle/main.js 
```

每次更新应用程序时，您都必须重复这一点。这正是 Meteor 目前使用 Node 的方式。可以在这里找到潜在的长期修复：http: [//meteorhacks.com/how-meteor-uses-node.html](http://meteorhacks.com/how-meteor-uses-node.html)

注意：在 Meteor 0.6.5 和 Node 0.10.* 上，这可能会略有不同。您可能必须手动从 和 中删除`bundle/server`纤维`bundle/programs/server`。你可以用`$ rm -R node_modules/fibers`. 然后，您必须使用`$ npm install fibers`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-09T11:46:49.550

Meteor 1.0.3.2 和 Node 0.12.0 也有同样的问题。我不得不降级到节点 0.10.31。这解决了这个问题。

请记住，所有说明都在 bundle 文件夹的自述文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-07T21:36:42.270

## 不匹配的节点版本

当您执行和运行流星应用程序时，节点的版本**必须**匹配： 。`npm install``node app.js`

否则，您最终可能会得到不同版本的预期`glibc`文件夹......

## 看看你是否有这个问题：

1.  请注意您看到的运行时错误。例如，在我的情况下：

```
Try running this to fix the issue: /usr/bin/node <bundle location>/bundle/programs/server/node_modules/fibers/build
Cannot find module '<bundle location>/bundle/programs/server/node_modules/fibers/bin/linux-x64-83-libc/fibers` 
```

*   即使`/usr/bin/node`我通过`nvm`.
*   `fibers`可执行文件在`linux-x64-83-libc`文件夹中寻找。

2.  导航到`bundle/programs/server/node_modules/fibers/bin`并检查您的`glibc`子文件夹。就我而言：`linux-x64-57-glibc`&`linux-x64-64-glibc`

*   我的可执行文件正在寻找并且`linux-x64-83-libc`它不存在。

## 笔记

就我而言，我`nvm`用来管理我的节点版本。但正如我在说明中看到的那样`fix`，我的可执行文件正在使用`/usr/bin/node`，而不是`nvm`我期望的版本。

## 使固定

我删除了`/usr/bin/node`版本`sudo apt-get remove nodejs`，一切都很好。一切都开始使用该`nvm`版本。

# javascript - jquery自动隐藏元素 - 代码不起作用

> ID：13327089
> 
> 赞同：0
> 
> 时间：2012-11-10T23:24:47.960
> 
> 标签：javascript, jquery

我在 aspx 页面中有一个带有 class="._aHide" 的元素，它带有一条消息，并且反复显示。

```
<div id="Message1" class="._aHide" runat="server" visible="true"><p>My Message</p></div> 
```

*   如果可见属性 = true，则在页面加载时不会创建 aspx 服务器端元素。

我需要在显示 7 秒后隐藏这个 div，除非鼠标悬停。

我创建了这段代码

```
$(document).ready(function () {
    var hide = false;
    $("._aHide").hover(function () {
    clearTimeout(hide);
    });

    $("._aHide").mouseout(function () {
    hide = setTimeout(function () { $("._aHide").fadeOut("slow") }, 7000);
    hide;
    });

    $("._aHide").ready(function () {
    hide = setTimeout(function () { $("._aHide").fadeOut("slow") }, 7000);
    hide;
    });
}); 
```

但是这里有些不对劲

1-此代码仅工作一次，并且我多次显示此消息。

2-所有消息框一次隐藏，因为我不能在 settimeout 中使用 $(this) 并且我不知道为什么。

谢谢你的帮助，我真的很感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:26:26.967

删除 HTML 代码中的点：

```
<div id="Message1" class="_aHide" runat="server" visible="true"><p>My Message</p></div> 
```

见：[http ://api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:29:31.910

tbraun89 是对的，去掉“。” 在您的 html 代码中。

然后，您可以像这样简化代码：

JQuery [hover](http://api.jquery.com/hover/)有 2 个函数使用`mouseenter`和`mouseleave`

```
$(document).ready(function () {
    var hide = false;
    $("._aHide").hover(
    function () {
        //Cancel fadeout
        clearTimeout(hide);
    },
    function(){
         //re-set up fadeout
        clearTimeout(hide);            
        hide = setTimeout(function () { $("._aHide").fadeOut("slow") }, 7000);
    });

    //Set up fadeout
    hide = setTimeout(function () { $("._aHide").fadeOut("slow") }, 7000);
}); 
```

# javascript - JQM：如何在通过 $.mobile.changePage() 加载的 JS 文件中进行调试时中断

> ID：13327092
> 
> 赞同：0
> 
> 时间：2012-11-10T23:25:33.140
> 
> 标签：javascript, jquery, debugging, jquery-mobile, firebug

我正在使用 jQuery、jQuery mobile（和 PhoneGap，但这不相关）开发一个移动应用程序。假设我有两个 html 页面：page1.html 和 page2.html。我正在使用 page1.html 中的 $.mobile.changePage() 加载 page2.html。page2.html 中的页面 div（即，具有 data-role="page" 的 div）包含特定于 page2 的 javascript 代码，它也与 page2.html 一起加载。page2.html 中的代码如下所示：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Title</title>
</head>
<body>
<div id="conf-page" data-role="page">

    <script type="text/javascript" charset="utf-8">

    <!-- MY SCRIPT HERE ----->

    </script>
    <div data-role="header" style="height: 45px"> 
```

现在我想在 page2.html 中的 javascript 代码的某个地方打断。目前，我正在使用 Firefox (16.0.2) 和 Firebug 进行开发和调试。加载 page2.html 时，我在 firebug Scripts 列表的两个位置看到 page2.html 的 JS 代码：

1.  在 jQuery.min.js/eval/MD5/
2.  在 jQuery.min.js/eval/seq/<#>

如果我在其中一个代码中的某处放置一个断点，它将应用于上面 (1) 中的代码，但在加载 page2.html 时它永远不会被命中。

如何在 page2.html 的 JS 代码中设置断点和中断？我在网上找不到任何相关的东西，这让我觉得我一定遗漏了一些东西，因为这一定是一个非常普遍的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:53:44.823

看起来我正在寻找不同的术语。在这个网站上有一些关于这个问题的讨论。以下是一些参考资料：

*   [动态加载的 js 函数不会出现在 Firebug js 调试器中](https://stackoverflow.com/q/874256/194742)
*   [通过 jQuery 添加的脚本在 FireBug 中不可见](https://stackoverflow.com/q/3075609/194742)
*   [通过 jQuery getScript 函数添加的调试脚本](https://stackoverflow.com/q/690781/194742)
*   其他几个。

上述线程中建议了两种解决方案：

*   这些线程中的大多数都提出了相同的解决方案：使用“调试器”；代码中的语句（不带引号）两次以使 FireBug 调试器停止。我这样做了，这是一个部分解决方案：萤火虫确实坏了，但变量堆栈是空的。所以这不是很有用。
*   将脚本放在一个文件中，使用 AJAX Get 调用加载脚本，并将 crossdomain 设置为 true，然后获取脚本文件，加载它并在调试器中显示脚本文件。现在可以用来设置断点等。比上面更有用。

保持开放，看看是否有其他解决方案。

# android - 从 broadcastReceiver 调用服务中的函数

> ID：13327096
> 
> 赞同：3
> 
> 时间：2012-11-10T23:27:01.227
> 
> 标签：android, service, sms, broadcastreceiver

我一直在努力解决这个问题。我有一个广播接收器，它应该接收 SMS' 并且它会这样做，但我想在我的服务中使用一个方法/函数，目的是最终使它成为一个前台服务，永远不会关闭。广播接收器如下所示：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;            
        if (bundle != null)
        {
        //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            }
        //want to send msgs[] to SmsService 
        }                         
    }
} 
```

在使其接收的清单中，我添加了：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.BROADCAST_SMS"/>
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.SEND_SMS" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".SmsReceiver" > 
        <intent-filter> 
            <action android:name= "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver>
    <service android:name="SmsService"></service>
</application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T23:34:08.093

```
Intent myIntent = new Intent(context, SmsService.class);
myIntent.putExtra("msg", msgs);
context.startService(myIntent); 
```

# html - Preventing wp from removing br and p tags

> ID：13327100
> 
> 赞同：4
> 
> 时间：2012-11-10T23:28:20.460
> 
> 标签：html, wordpress

Is there a way to prevent WP from removing br and p tags from posts or pages ?

so far I've added `remove_filter('the_content', 'wpautop');` to my `functions.php` file which completely disables formatting.

However when i edit a post or page, and in the HTML editor add br or p tags then switch back to visual mod the br/p tags that i added get removed.

Is there a way to prevent this ?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-09T10:45:42.557

这不是真正的解决方案，而是一种解决方法：`<p>`像这样编写您的标签：

```
<p dir="ltr">something</p> 
```

这样，在从编辑器切换时它们会被保留。您可以将此应用于任何文本标签。在这里您可以阅读有关该`dir`属性的信息：http: [//www.w3.org/TR/html401/struct/dirlang.html](http://www.w3.org/TR/html401/struct/dirlang.html)

我注意到，如果您尝试对`<br>`标签执行相同操作，则当您切换编辑器时，WP 已替换`<br>`为`&nbsp;`. 为了防止这种情况，`br`标签可以这样写：

```
<br class="blank" /> 
```

我也在为这个问题寻找一个明确的解决方案，似乎还没有，即使是新的 Wordpress 3.6 版本也是如此。如果有人知道更好的解决方案，我会很高兴的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:14:24.040

在您的functions.php中尝试以下代码，

```
function stop_removing_tags(){
    remove_filter('the_content', 'wpautop');
}

add_action('init', 'stop_removing_tags'); 
```

代码未测试...

# java - Java Swing 取消无限循环

> ID：13327101
> 
> 赞同：4
> 
> 时间：2012-11-10T23:28:20.587
> 
> 标签：java, swing

我在 Swing 中遇到了无限循环问题。做了一些研究并遇到了 SwingWorker 线程，但不确定如何实现它们。我拼凑了一个显示问题的简单程序。一个按钮启动无限循环，我希望另一个按钮停止它，但当然由于 Swing 单线程问题，另一个按钮已冻结。下面的代码和帮助表示赞赏： -

```
public class Model
{
    private int counter;
    private boolean go = true;

    public void go()
    {
        counter = 0;

        while(go)
        {
            counter++;
            System.out.println(counter);
        }
    }

    public int getCounter()
    {
        return counter;
    }

    public void setGo(boolean value)
    {
        this.go = value;
    }
}

public class View extends JFrame
{
    private JPanel                  topPanel, bottomPanel;
    private JTextArea               messageArea;
    private JButton                 startButton, cancelButton;
    private JLabel                  messageLabel;
    private JScrollPane             scrollPane;

    public View()
    {
        setSize(250, 220);
        setTitle("View");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        topPanel = new JPanel();
        bottomPanel = new JPanel();
        messageArea = new JTextArea(8, 20);
        messageArea.setEditable(false);
        scrollPane = new JScrollPane(messageArea);
        messageLabel = new JLabel("Message Area");
        topPanel.setLayout(new BorderLayout());
        topPanel.add(messageLabel, "North");
        topPanel.add(scrollPane, "South");
        startButton = new JButton("START");
        cancelButton = new JButton("CANCEL");
        bottomPanel.setLayout(new GridLayout(1, 2));
        bottomPanel.add(startButton);
        bottomPanel.add(cancelButton);
        Container cp = getContentPane();
        cp.add(topPanel, BorderLayout.NORTH);
        cp.add(bottomPanel, BorderLayout.SOUTH);
    }

    public JButton getStartButton()
    {
        return startButton;
    }

    public JButton getCancelButton()
    {
        return cancelButton;
    }

    public void setMessageArea(String message)
    {
        messageArea.append(message + "\n");
    }
}

public class Controller implements ActionListener
{
    private Model theModel;
    private View  theView;

    public Controller(Model model, View view)
    {
        this.theModel = model;
        this.theView = view;
        view.getStartButton().addActionListener(this);
        view.getCancelButton().addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae)
    {
        Object buttonClicked = ae.getSource();
        if(buttonClicked.equals(theView.getStartButton()))
        {
            theModel.go();
        }
        else if(buttonClicked.equals(theView.getCancelButton()))
        {
            theModel.setGo(false);
        }
    }
}

public class Main
{
    public static void main(String[] args)
    {
        Model model = new Model();
        View view = new View();
        Controller controller = new Controller(model, view);
        view.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:32:40.407

您正在阻止`Event Dispatch Thread`(EDT)。该线程负责处理绘画和其他与 UI 相关的请求。一旦 EDT 被阻止，UI 将被冻结，因为它无法处理任何事件。有关更多详细信息，请参阅[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)教程。

考虑使用计时器（[如何使用 Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)）`SwingWorker`或辅助后台线程。后台线程可以使用`SwingUtilities.invokeLater()`. 该机制已在 中实现`SwingWorker`，因此使用它可能更容易。这取决于所需的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:18:28.983

使用 a`javax.swing.Timer`来完成`go()`工作一次，（有一些可选的延迟），在事件处理中使用`start()`and 。`stop()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T00:49:27.253

你可以很容易地做到这一点，而无需实现任何计时器，你只需要在你的**actionPerformed**方法中添加两行：

```
public void actionPerformed(ActionEvent ae)
{
    Object buttonClicked = ae.getSource();
    if(buttonClicked.equals(theView.getStartButton()))
    {
      theModel.setGo(true); //make it continue if it's just stopped
      Thread t = new Thread(new Runnable() { public void run() {theModel.go();}}); //This separate thread will start the new go...
      t.start(); //...when you start the thread! go!
    }
    else if(buttonClicked.equals(theView.getCancelButton()))
    {
        theModel.setGo(false);
    }
} 
```

由于您的**Model.go()**在单独的线程中运行，**事件调度线程**可以自由地做它的事情，比如绘制再次释放的按钮，而不是在按钮向下时挂起。

***有一个问题！***但是，因为运行**Model.go()**的线程会***疯狂运行！***，它实际上每秒被调用的次数与您的系统一样多。

如果您打算实现一些动画等，那么您将需要：

*   使用计时器，

或者

*   为新线程添加一些[睡眠时间。](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)

例如，如果您使用线程：

```
public void go()
{
    counter = 0;
        while(go)
    {
        counter++;
        System.out.println(counter);
        try {
            Thread.sleep(1500); //Sleep for 1.5 seconds
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

如您所见，我添加了**Thread.sleep(1500)**为 1500 毫秒（1.5 秒）的时间。Thread.sleep 可能由于某些原因被中断，因此您必须捕获**InterruptedException**。

在这种特殊情况下，没有必要更深入地正确处理**InterruptedException**，但是如果您对此感到好奇，可以阅读这篇[不错的文章](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T16:22:53.737

我决定使用 SwingWorker 线程，下面是更新后的 Controller 类。它做了我需要它做的事情，但我的问题是，它是正确的方法吗？它是干净的代码吗？另外，我已经尝试根据注释掉的行将 model.go() 方法的输出放入视图的文本区域，但没有成功，有人知道怎么做吗？

```
public class Controller implements ActionListener
{
private Model theModel;
private View  theView;
private SwingWorker<Void, Void> worker;

public Controller(Model model, View view)
{
    this.theModel = model;
    this.theView = view;
    view.getStartButton().addActionListener(this);
    view.getCancelButton().addActionListener(this);
}

public void actionPerformed(ActionEvent ae)
{
    Object buttonClicked = ae.getSource();
    if(buttonClicked.equals(theView.getStartButton()))
    {
        theModel.setGo(true);
        worker = new SwingWorker<Void, Void>()
        {
            @Override
            protected Void doInBackground()
            {
                // theView.setMessageArea(theModel.getCounterToString());
                return theModel.go();
            }
            @Override
            protected void done()
            {
                // theView.setMessageArea(theModel.getCounterToString());
            }
        };
        worker.execute();

    }
    else if(buttonClicked.equals(theView.getCancelButton()))
    {
        theModel.setGo(false);
    }
}
}

public class Model
{
    public Void go()
    {
        counter = 0;

        while(go)
        {
            counter++;
            System.out.println(counter);
        }
        return null;
    } 
```

# python - 根据元组内的值拆分元组列表

> ID：13327105
> 
> 赞同：2
> 
> 时间：2012-11-10T23:28:45.950
> 
> 标签：python

如果我有以下情况：

```
[(1,2),(2,3),(0,0),(4,0),(0,1),(3,9),(2,0),(2,4)] 
```

我怎样才能把它分成：

```
[(1,2),(2,3)], [(0,1),(3,9)], [(2,4),] 
```

每次我在索引 1 处看到一个 0 的元组时，例如 (1,0)，我都会拆分列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T23:34:58.433

试试这个：

```
from itertools import groupby

x = [(1,2), (2,3), (0,0), (4,0), (0,1), (3,9), (2,0), (2,4)]

print [l for l in [list(group) for key, group in groupby(x, key=lambda k: k[1]==0)]
             if l[0][1] != 0]

[OUT] [[(1,2), (2,3)], [(0,1), (3,9)], [(2,4)]] 
```

它会生成一个列表，您可以遍历该列表以获取这些子列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:37:31.403

它不是特别光滑，但你可以像这样循环它：

```
myList = [(1,2),(2,3),(0,0),(4,0),(0,1),(3,9),(2,0),(2,4)]
groupedList = []
subList = []
for tup in myList:
    if tup[1] == 0:
        if subList != []:
            groupedList.append(subList)
            subList = []
    else:
        subList.append(tup)
if subList != []:
    groupedList.append(subList)
print groupedList 
```

输出：

```
[[(1, 2), (2, 3)], [(0, 1), (3, 9)], [(2, 4)]] 
```

# c - 嵌套循环遍历数组

> ID：13327115
> 
> 赞同：5
> 
> 时间：2012-11-10T23:30:12.503
> 
> 标签：c, performance, optimization, assembly

有两个非常大的系列元素，第二个比第一个大 100 倍。对于第一个系列的每个元素，第二个系列中有 0 个或多个元素。这可以通过 2 个嵌套循环进行遍历和处理。但是第一个数组的每个成员的匹配元素数量的不可预测性使得事情变得非常非常缓慢。

第二系列元素的实际处理涉及逻辑与 (&) 和人口计数。

我找不到使用 C 的良好优化，但我正在考虑对第一个系列的每个元素进行内联 asm、rep* mov* 或类似操作，然后对第二个系列的匹配字节进行批处理，可能在缓冲区中1MB什么的。但是代码会变得非常混乱。

有人知道更好的方法吗？首选 C，但 x86 ASM 也可以。非常感谢！

为了清楚起见，带有简化问题的示例/演示代码，第一个系列是“人”，第二个系列是“事件”。（原来的问题其实是 100m 和 10,000m 条目！）

```
#include <stdio.h>
#include <stdint.h>

#define PEOPLE 1000000    //   1m
struct Person {
    uint8_t age;   // Filtering condition
    uint8_t cnt;   // Number of events for this person in E
} P[PEOPLE]; // Each has 0 or more bytes with bit flags

#define EVENTS 100000000  // 100m
uint8_t P1[EVENTS]; // Property 1 flags
uint8_t P2[EVENTS]; // Property 2 flags

void init_arrays() {
    for (int i = 0; i < PEOPLE; i++) { // just some stuff
        P[i].age = i & 0x07;
        P[i].cnt = i % 220; // assert( sum < EVENTS );
    }
    for (int i = 0; i < EVENTS; i++) {
        P1[i]    = i % 7;  // just some stuff
        P2[i]    = i % 9;  // just some other stuff
    }
}

int main(int argc, char *argv[])
{
    uint64_t   sum = 0, fcur = 0;

    int age_filter = 7; // just some

    init_arrays();      // Init P, P1, P2

    for (int64_t p = 0; p < PEOPLE ; p++)
        if (P[p].age < age_filter)
            for (int64_t e = 0; e < P[p].cnt ; e++, fcur++)
                sum += __builtin_popcount( P1[fcur] & P2[fcur] );
        else
            fcur += P[p].cnt; // skip this person's events

    printf("(dummy %ld %ld)\n", sum, fcur );

    return 0;
}

gcc -O5 -march=native -std=c99 test.c -o test 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:56:30.280

由于平均每人获得 100 件物品，因此您可以通过一次处理多个字节来加快处理速度。为了使用指针而不是索引，我稍微重新安排了代码，并将一个循环替换为两个循环：

```
uint8_t *p1 = P1, *p2 = P2;
for (int64_t p = 0; p < PEOPLE ; p++) {
    if (P[p].age < age_filter) {
        int64_t e = P[p].cnt;
        for ( ; e >= 8 ; e -= 8) {
            sum += __builtin_popcountll( *((long long*)p1) & *((long long*)p2) );
            p1 += 8;
            p2 += 8;
        }
        for ( ; e ; e--) {
            sum += __builtin_popcount( *p1++ & *p2++ );
        }
    } else {
        p1 += P[p].cnt;
        p2 += P[p].cnt;
    }
} 
```

在我的测试中，这将您的代码从 1.515s 加速到 0.855s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:15:02.030

尼尔的答案不需要按年龄排序，顺便说一句，这可能是个好主意——

`cumsum[n+1]=cumsum[n]+__popcount(P[n]&P2[n]);`
如果第二个循环有漏洞（请更正原始源代码以支持该想法），一个常见的解决方案是为每个人 做Then`sum+=cumsum[fcur + P[p].cnt] - cumsum[fcur];`

无论如何，计算负担似乎只是为了事件，而不是事件*人。无论如何，都可以通过为满足条件的所有连续人调用内部循环来进行一些优化。

`sums (_popcounts(predicate[0..255]))`如果真的有最多 8 个谓词，则将每个人的所有谓词预先计算到单独的数组 C[256][PEOPLE] 中可能是有意义的。这几乎使内存需求翻了一番（在磁盘上？），但将搜索从 10GB+10GB+...+10GB（8 个谓词）本地化到一个 200MB 的流（假设 16 位条目）。

根据 p(P[i].age < condition && P[i].height < cond2) 的概率，计算累积和可能不再有意义。也许，也许不是。更有可能一次只有 8 或 16 人的 SSE 并行性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T06:44:03.533

一种全新的方法可能是使用[ROBDD](http://en.wikipedia.org/wiki/Binary_decision_diagram)对每个人/每个事件的真值表进行编码。首先，如果事件表不是很随机，或者不是由病态函数组成，比如大数乘法的真值表，那么第一个可以实现函数的压缩，第二个真值表的算术运算可以压缩形式计算. 每个子树可以在用户之间共享，并且两个相同子树的每个算术运算只需要计算一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T00:08:49.197

我不知道您的示例代码是否准确反映了您的问题，但可以这样重写：

```
for (int64_t p = 0; p < PEOPLE ; p++)
    if (P[p].age < age_filter)
        fcur += P[p].cnt;

for (int64_t e = 0; e < fcur ; e++)
    sum += __builtin_popcount( P1[e] & P2[e] ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:59:42.370

我不知道 gcc -O5 （这里似乎没有记录）并且似乎使用我的 gcc 4.5.4 产生与 gcc -O3 完全相同的代码（虽然，只在相对较小的代码示例上进行了测试）

根据您想要实现的目标，-O3 可能比 -O2 慢

与您的问题一样，我建议您更多地考虑您的数据结构而不是实际算法。只要您的数据没有以方便的方式表示，您就不应专注于通过适当的算法/代码优化来解决问题。

如果您想根据单个标准（此处为您的示例中的年龄）快速剪切大量数据，我建议您使用排序树的变体。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T05:15:56.510

如果您的实际数据（年龄、计数等）确实是 8 位，则计算中可能存在很多冗余。在这种情况下，您可以通过查找表替换处理 - 对于每个 8 位值，您将有 256 个可能的输出，并且可以从表中读取计算数据而不是计算。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T14:05:23.860

为了解决分支错误预测（在其他答案中缺失），代码可以执行以下操作：

```
#ifdef MISPREDICTIONS
if (cond)
    sum += value
#else
mask = - (cond == 0);  // cond: 0 then -0, binary 00..; cond: 1 then -1, binary 11..
sum += (value & mask); // if mask is 0 sum value, else sums 0
#endif 
```

它不是完全免费的，因为存在数据依赖性（想想超标量 cpu）。但对于大多数不可预测的情况，它通常会获得 10 倍的提升。

# c++ - 程序调试

> ID：13327116
> 
> 赞同：0
> 
> 时间：2012-11-10T23:30:13.767
> 
> 标签：c++, debugging

程序输出应如下所示：

```
Enter an even number: 23
The number is not a positive even number.
Enter an even number: -6
The number is not a positive even number.
Enter an even number: 4

20 20.25 20.50 20.75 21
The sum is 102.5 
```

程序运行不正常。奇数/偶数被识别，但增加变量的循环（20 + 1 /（输入的偶数））不能正常工作。

```
#include <iostream>

int main(int argc, char *argv[])
{

    float val, sum, incr;
    int num;

    cout << "Enter an even number: ";
    cin >> num;

    if (num % 2 != 0)
        cout << "The number " << num << " is not a positive even number." << endl;
    else
        cout << num << " is even!" << endl << endl;

    incr = 1 / num;

    for (val = 20.0F; val <= 21.0; val += incr)
    {
        cout << val;
        sum += val;
    }

    cout << "The sum is " << sum << endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:45:07.780

如果你将一个整数除以另一个整数 `1`，`num`结果是一个整数，正如克里斯所说的 0。

你应该做：

```
incr = 1.0F / (float)num; 
```

为了退出错误的引入值，您应该从 main 返回

```
#include <iostream>

int main() {
    float val, sum, incr;
    int num; 

    cout << "Enter an even number: ";
    cin >> num;
    if (num < 0 || num % 2 != 0){
        cout << "The number " << num << " is not a positive even number." << endl;
        return -1;
    }
    else {
        cout << num << " is even!" << endl << endl;
    }

    incr = 1.0 / num;
    for (val = 20.0F; val <= 21.0; val += incr) {
        cout << val << " ";
        sum += val;
    }
    cout << "The sum is " << sum << endl;
    return 0;
} 
```

# c - 套接字编程-如何让服务器只存储数字

> ID：13327117
> 
> 赞同：-3
> 
> 时间：2012-11-10T23:30:16.120
> 
> 标签：c, sockets, networking, tcp

我正在编写要在服务器端执行的套接字编程代码。现在，客户端基本上以字符串（通过 TCP）的形式发送数据。我的服务器代码试图做的是读取字符串并仅将数字存储在数组中，以便可以对获得的这些数字执行其他功能。但我完全不知道如何实现这个功能。

```
/* tcpserver.c */
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>

int main()
{
    int sock, connected, bytes_recieved , true = 1;  
    int n[3],i,arr[3][5];
    char send_data [1024] , recv_data[1024];       

    struct sockaddr_in server_addr,client_addr;    
    int sin_size;

    if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("Socket");
        exit(1);
    }

    if (setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&true,sizeof(int)) == -1) {
        perror("Setsockopt");
        exit(1);
    }

    server_addr.sin_family = AF_INET;         
    server_addr.sin_port = htons(5001);     
    server_addr.sin_addr.s_addr = INADDR_ANY; 
    bzero(&(server_addr.sin_zero),8); 

    if (bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1) {
        perror("Unable to bind");
        exit(1);
    }

    if (listen(sock, 5) == -1) {
        perror("Listen");
        exit(1);
    }

    printf("\nTCPServer Waiting for client on port 5000");
    fflush(stdout);

    while(1) {  
        sin_size = sizeof(struct sockaddr_in);
        connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);
        printf("\n I got a connection from (%s , %d)",
               inet_ntoa(client_addr.sin_addr),ntohs(client_addr.sin_port));
        while (1) {
            printf("\n SEND (q or Q to quit) : ");
            gets(send_data);

            if (strcmp(send_data , "q") == 0 || strcmp(send_data , "Q") == 0) {
                send(connected, send_data,strlen(send_data), 0); 
                close(connected);
                break;
            } 
            else {
                send(connected, send_data,strlen(send_data), 0);
            } 

            for(i=0;i<3;i++) {
                bytes_recieved= recv(connected,recv_data,1024,0);
                recv_data[bytes_recieved] = '\0';

                n[i]=atoi(recv_data);     
            }

            if (strcmp(recv_data , "q") == 0 || strcmp(recv_data , "Q") == 0) {
                close(connected);
                break;
            }
            else  {
                for(i=0;i<3;i++) {
                    printf("\n RECIEVED DATA = %d \n",n[i]);
                    fflush(stdout);
                }
            }
        } /* end inner while */

        close(sock);
        return 0;
    } /* end outer while */
} /* end main */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:48:20.150

您并没有真正说出问题所在，也没有显示您的客户端代码。但我怀疑这是您的服务器循环中的问题。

```
for(i=0;i<3;i++)
{
    bytes_recieved= recv(connected,recv_data,1024,0);
    recv_data[bytes_recieved] = '\0';
    n[i]=atoi(recv_data);     
} 
```

首先，如果 recv() 返回 1024，您最终会在 recv_data[1024] 处写入一个 '\0'。此数组的有效索引范围是 0..1023。您可以通过在此函数顶部将 recv_data 声明为 1025 字节而不是 1024 来轻松解决此问题。

但真正的问题是，无论客户端实际发送的字节数如何，都不能期望 recv() 返回任何预期的长度。（或者其他人会告诉你：“TCP 是一种 STREAM 协议”）

这可能是您想要的 recv() 循环。

```
for (i = 0; i < 3; i++)
{
    j=0; // j is declared as 32-bit int above
    success = ReadIntegerFromSocketStream(connected, &j);
    if (success == 0)
    {
        close(connected);
        connected = -1;
        break;
    }
    n[i] = j;
}

int ReadIntegerFromSocketStream(int sock, int* result)
{
    int ret;
    int count= 0;

    char COMPILE_TIME_ASSERT[ (sizeof(int)==4) ? 1 : -1 ];

    unsigned char data[4];

    while (bytes_received < 4)
    {
        ret = recv(sock, data+count, 4-count, 0);
        if (ret <= 0)
        {
            /* socket got closed, abort */
            return 0;
        }
        count += ret;
    }

    memcpy(&result, data, 4);

    // not shown: calling result = ntohl(result);
    // I'll let you look this function up

    return 1;
} 
```

# ios - 如何在 iOS6 上计算地图路线？

> ID：13327118
> 
> 赞同：0
> 
> 时间：2012-11-10T23:30:20.660
> 
> 标签：ios, mapkit, routes

我正在开发一个用于驾驶的 iPhone 应用程序。我使用 mapkit 来显示位置。我需要在其中添加转弯导航。我怎么能在ios6上做到这一点？你能举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:23:17.643

SDK 中未内置逐向导航。您可以要求内置的 Apple Maps 应用程序为用户提供两点之间的方向，但这不会在您的应用程序中显示路线。

您可能想查看免费的 Mapbox SDK：

[https://github.com/mapbox/mapbox-ios-sdk](https://github.com/mapbox/mapbox-ios-sdk)

虽然这需要你使用 OpenStreetMaps 作为地图，但我相信。

看起来可能还有其他一些免费选项（例如 MapQuest 的一些东西），我认为 Cloudmade 为路线提供 SDK 支持，尽管该 SDK 不是免费的：

[http://developers.cloudmade.com/documentation/iphone-sdk/v3/index.html](http://developers.cloudmade.com/documentation/iphone-sdk/v3/index.html)

# c# - 使用 lambda 表达式将列表拆分为多个列表

> ID：13327119
> 
> 赞同：0
> 
> 时间：2012-11-10T23:30:51.017
> 
> 标签：c#, linq, lambda

```
class order {
    Guid employeeId;
    DateTime time;
} 
```

我需要根据时间范围将订单列表过滤为 4 个列表。0-9AM 到第 1 个列表，9AM-2PM 到第 2 个列表，2-6PM 到第 3 个列表和 6-12PM 到第 4 个列表。

我很好奇这是否可以有效地使用 lambda 表达式来实现？否则拆分列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:41:15.637

这应该有效：

```
var orders = list.OrderBy(o => o.time);
var first  = orders.TakeWhile(o => o.time.TimeOfDay.TotalHours <= 9);
var second = orders.SkipWhile(o => o.time.TimeOfDay.TotalHours <= 9)
                   .TakeWhile(o => o.time.TimeOfDay.TotalHours <= 14);
var third  = orders.SkipWhile(o => o.time.TimeOfDay.TotalHours <= 14)
                   .TakeWhile(o => o.time.TimeOfDay.TotalHours <= 18);
var fourth = orders.SkipWhile(o => o.time.TimeOfDay.TotalHours <= 18); 
```

这是另一种可能更有效、更灵活、更简洁的方法，它使用`Enumerable.GroupBy`：

```
var groups = list.Select(o => new
{
    Order = o,
    DayPart = o.time.TimeOfDay.TotalHours <= 9 ? 1
       : o.time.TimeOfDay.TotalHours > 9  && o.time.TimeOfDay.TotalHours <= 14 ? 2
       : o.time.TimeOfDay.TotalHours > 14 && o.time.TimeOfDay.TotalHours <= 18 ? 3 : 4
})
.GroupBy(x => x.DayPart)
.OrderBy(g => g.Key);

var first = groups.ElementAt(0);  
var second = groups.ElementAt(1);
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:50:25.507

最易读的方法是使用命名函数进行分组并将其作为委托传递给 GroupBy()

```
var orderGroups = orders.GroupBy(GetOrderGroup)

private int GetOrderGroup(order o)
{
    //implement your groups
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:46:53.357

这应该可以解决问题：

```
var first = orders.Where(o => o.time.Hour >= 0 && o.time.Hour < 9);
var second = orders.Where(o => o.time.Hour >= 9 && o.time.Hour < 14);
var third = orders.Where(o => o.time.Hour >= 14 && o.time.Hour < 18);
var fourth = orders.Where(o => o.time.Hour >= 18 && o.time.Hour < 24); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T23:48:40.533

我现在在 OSX 中，所以我无法测试解决方案，但我可能会在我的订单类中添加一个属性来计算组。我觉得你的订单会合理地关注这一点。所以，你可以有这样的东西：

```
class order {
    Guid employeeId;
    DateTime time;

    public int Group { get { return /* check hours of day to group /} }
} 
```

然后，它应该像`orders.GroupBy(o => o.Group)`;

如果您觉得您的订单不应该知道这些组，您可以使用另一种方法，您认为定义组更重要。那你还是可以说`orders.GroupBy(o => GetGroupNumber(o))`。

如果下次我在 Windows 中您仍然需要帮助，我会为您编写一个片段。

**编辑：**

我注意到这个问题的其他几个答案建议在您要创建的每个子列表的原始列表上执行 Where 或 Skip-Take 策略（带有排序的开销）。

我担心的是大型集会损害性能。例如，四个 .Where 评估将对所有对象执行四次比较，尽管这些组是互斥的。

我不知道你有多少数据，但为了你，我希望有很多订单:)。无论如何，我可能会尝试像我推荐的那样在一次迭代中进行分组和比较。如果您不喜欢该解决方案，我建议您自己遍历列表并在没有 linq 到对象的情况下构建您的集合。

只是我的两分钱。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T00:03:12.553

使用该`DateTime.TimeOfDay.TotalHours`属性很重要，它将返回由整数小时和小数小时表示的时间。

```
var endTimes = new List<int>() { 9, 14, 18, 24 };
var results = orders.GroupBy(o => endTimes.First(t => o.time.TimeOfDay.TotalHours < t))
                    .OrderBy(g => g.Key); 
```

# php - “OAuthException: (#100) Invalid parameter”通过创建事件

> ID：13327120
> 
> 赞同：3
> 
> 时间：2012-11-10T23:30:55.027
> 
> 标签：php, facebook, facebook-graph-api

我尝试使用打开的图形和 php sdk 创建一个 facebook 事件。

我使用这个代码：

```
 $facebook = new Facebook(array(
        'appId'  => 'XXXXXXXXX', 
        'secret' => 'XXXXXXXXXX', 
        'cookie' => true // enable optional cookie support
    ));
    $user = $facebook->getUser();

$event_start = time() + (7 * 24 * 60 * 60);

if ($user) {
  try {
    $event = $facebook->api("/me/events","post",array(
      'title'=>'My Event Name',
      'start_time'=>$event_start
      // etc add your other event info here
    ));
  } catch (FacebookApiException $e) {
    echo($e);
  }
} 
```

我有这个权限：create_event,rsvp_event

我得到这个错误：

**OAuthException: (#100) 无效参数**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:32:39.597

我发现了问题...我使用“标题”而不是“名称”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:31:13.373

我有同样的问题。

我的解决方案是将 'start_time' 正确格式化为[ISO 8601](http://de.wikipedia.org/wiki/ISO_8601)。

例如 CET 中的 01.12.2012 13:45 将是

```
2012-12-01T13:45:00+0100 
```

到目前为止，我在任何地方都没有找到该解决方案。干杯。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T10:07:23.110

对于任何想更好地了解的人，这里是与 Event 相关的详细信息的 fb 页面。

[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

`title`应该是事件名称的参数。

# c - 在这里找不到错误... C 代码

> ID：13327121
> 
> 赞同：0
> 
> 时间：2012-11-10T23:31:06.337
> 
> 标签：c, recursion, operator-precedence

在这段代码中，我尝试编写一个函数，如果两个字符串不匹配，则返回 0 值，如果我可以在 str 中找到一个完全重新编码 patt 的子字符串，则返回匹配字符的长度。

```
#include....

int check(char *str, char *patt, int *b)
{   
    if (*str == *patt && *patt != 0)
        return *b * (1 + check(str+1,patt+1,&b));
    else if (*patt == 0)
        return 0;
    else{
        *b = 0;
        return 0;
    }
}

main()
{
    char s1[SIZE] = "mama";
    char s2[SIZE] = "mama";
    int b = 1;

    printf("%d\n",check(s1,s2,&b));
    b = 1;          

    system ("pause");
    return;
} 
```

在这里我应该得到输出 4，但我得到 -77779463。感谢帮助！

PS 我使用递归并将 b 参数设置为可更改的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T23:35:26.067

`b`已经是指向 an 的指针`int`，因此您想使用`b`and not进行递归调用`&b`。

任何体面的编译器，启用警告，都会提醒你这个错误！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:36:20.457

```
return *b * (1 + check(str+1,patt+1,&b));
                                    ^ dont pass address. 
```

`b`改为传递给它。

# html - HTML 5 视频不适用于 Mozilla

> ID：13327124
> 
> 赞同：2
> 
> 时间：2012-11-10T23:31:45.820
> 
> 标签：html

出于某种原因，我的 HTML 5 元素在 Mozilla Firefox 上不适合我。

视频的控制按钮确实出现了，但是当我按下播放时没有任何反应。

不过，它在 chrome 上完美运行。这是我的代码：

```
 <video width="100%" controls="controls">
                <source src= "video/myvideo.mp4" type="video/mp4">
                <source src="video/myvideo.webmhd.webm" type="video/webm">
            </video> 
```

你能帮我找出它不工作的原因吗？

编辑：我的问题是，如果我按下播放按钮，视频将不会播放......但如果我按下时间栏，视频就会播放。如何通过按播放按钮启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:16:20.853

标签的`controls`属性`<video>`是一个布尔值。只需使用

```
<video width="100%" controls> 
```

或者

```
<video width="100%" controls="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:45:11.593

Mozilla 不支持 mp4

你可以在这里看到它 [https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements](https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:45:02.560

将视频转换为 .ogg 并包含它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T23:46:29.953

可能是 Mozilla 不支持视频格式。只是将文件重命名为该视频类型可能不正确。

检查 Mozilla 支持的视频格式 - [一个链接](https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements)！

# c - MPI io 按行平均读取文件（而不是按块大小）

> ID：13327127
> 
> 赞同：3
> 
> 时间：2012-11-10T23:32:32.497
> 
> 标签：c, mpi

我是 MPI 的新手，我遇到了这个问题。我想读取一个超过 20000 行的文件的内容，然后将这些行平均分配给所有进程以进行进一步处理。文件中每一行的内容是这样的（两列数字），

```
45.87   13.22
45.71   13.27
45.78   13.21
45.67   13.1
45.7    13.24
45.81   13.28
45.85   13.32 
```

我需要在运行时将行平均划分为任意数量的进程（进程数可以是例如；2、3、4、5、....、128）

我知道如何将文件分成一个块，但我需要保留每一行中的值，所以我需要逐行读取。

这是我用来完成这项工作的 MPI 代码和串行代码，但我遇到了分段错误。

```
/* Open the file */
MPI_File_open (MPI_COMM_WORLD, "small.txt", MPI_MODE_RDONLY, MPI_INFO_NULL, &myfile);
/* Get the size of the file */
MPI_File_get_size(myfile, &filesize);
/* Calculate how many elements that is */
filesize = filesize/sizeof(char);

/* Calculate how many elements each processor gets */
bufsize = filesize/np;
/* Allocate the buffer to read to, one extra for terminating null char */
buf = (char *) malloc((bufsize+1)*sizeof(char));

/* Set the file view */
MPI_File_set_view(myfile, myid*bufsize*sizeof(char), MPI_CHAR, MPI_CHAR,"native",MPI_INFO_NULL);

Nooflines_Real = count_lines(myfile);
printf("%s contains %d lines\n", argv[1], Nooflines_Real);

int count_lines (FILE *infile) {
  char readline[80];
  int lines=0;
  while( fgets(readline,80,infile) != NULL ) lines++;
  rewind(infile);
  return(lines);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T05:23:57.270

您的参数`myfile`是 type 的变量`MPI_File`，而不是`FILE *`，因此您不能将其用于`fgets()`,`rewind()`等。这可能是您的段错误的来源。

我的建议是采用[此答案](https://stackoverflow.com/a/12942718/463827)中的方法并读取每个文件的重叠块（以考虑到您不知道一行有多长的事实），每个任务都读取它们的块和进程`their`行。如果您真的关心每个文件具有完全相同的行数（尽可能），您可以让它们相互交换数据以具有完全相同的行数。

**更新**：如果你真的想这样做（请注意，如果你的输入都是数字，这在二进制格式中会容易得多），一些读取文本文件的代码，在另一个数字中的分区，然后处理每个行（例如通过对列求和）作为我上面链接的答案的直接扩展：

```
#include <stdio.h>
#include <mpi.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

void readlines(MPI_File *in, const int rank, const int size, const int overlap,
               char ***lines, int *nlines) {
    MPI_Offset filesize;
    MPI_Offset localsize;
    MPI_Offset start;
    MPI_Offset end;
    char *chunk;

    /* figure out who reads what */

    MPI_File_get_size(*in, &filesize);
    localsize = filesize/size;
    start = rank * localsize;
    end   = start + localsize - 1;

    /* add overlap to the end of everyone's chunk... */
    end += overlap;

    /* except the last processor, of course */
    if (rank == size-1) end = filesize;

    localsize =  end - start + 1;

    /* allocate memory */
    chunk = malloc( (localsize + 1)*sizeof(char));

    /* everyone reads in their part */
    MPI_File_read_at_all(*in, start, chunk, localsize, MPI_CHAR, MPI_STATUS_IGNORE);
    chunk[localsize] = '\0';

    /*
     * everyone calculate what their start and end *really* are by going 
     * from the first newline after start to the first newline after the
     * overlap region starts (eg, after end - overlap + 1)
     */

    int locstart=0, locend=localsize;
    if (rank != 0) {
        while(chunk[locstart] != '\n') locstart++;
        locstart++;
    }
    if (rank != size-1) {
        locend-=overlap;
        while(chunk[locend] != '\n') locend++;
    }
    localsize = locend-locstart+1;

    /* Now let's copy our actual data over into a new array, with no overlaps */
    char *data = (char *)malloc((localsize+1)*sizeof(char));
    memcpy(data, &(chunk[locstart]), localsize);
    data[localsize] = '\0';
    free(chunk);

    /* Now we'll count the number of lines */
    *nlines = 0;
    for (int i=0; i<localsize; i++)
        if (data[i] == '\n') (*nlines)++;

    /* Now the array lines will point into the data array at the start of each line */
    /* assuming nlines > 1 */
    *lines = (char **)malloc((*nlines)*sizeof(char *));
    (*lines)[0] = strtok(data,"\n");
    for (int i=1; i<(*nlines); i++)
        (*lines)[i] = strtok(NULL, "\n");

    return;
}

void processlines(char **lines, const int nlines, const int rank) {
    for (int i=0; i<nlines; i++) {
        float a, b;
        sscanf(lines[i],"%f %f", &a, &b);
        printf("%d: <%s>: %f + %f = %f\n", rank, lines[i], a, b, a+b);
    }
}

int main(int argc, char **argv) {

    MPI_File in;
    int rank, size;
    int ierr;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    if (argc != 2) {
        if (rank == 0) fprintf(stderr, "Usage: %s infilename\n", argv[0]);
        MPI_Finalize();
        exit(1);
    }

    ierr = MPI_File_open(MPI_COMM_WORLD, argv[1], MPI_MODE_RDONLY, MPI_INFO_NULL, &in);
    if (ierr) {
        if (rank == 0) fprintf(stderr, "%s: Couldn't open file %s\n", argv[0], argv[1]);
        MPI_Finalize();
        exit(2);
    }

    const int overlap=100;
    char **lines;
    int nlines;
    readlines(&in, rank, size, overlap, &lines, &nlines);

    printf("Rank %d has %d lines\n", rank, nlines);

    processlines(lines, nlines, rank);

    free(lines[0]);
    free(lines);

    MPI_File_close(&in);

    MPI_Finalize();
    return 0;
} 
```

并在您提供的数据集上运行它：

```
$ mpirun -np 2 ./textio foo2.in 
Rank 0 has 4 lines
0: <45.87   13.22>: 45.869999 + 13.220000 = 59.090000
0: <45.71   13.27>: 45.709999 + 13.270000 = 58.980000
0: <45.78   13.21>: 45.779999 + 13.210000 = 58.989998
0: <45.67   13.1>: 45.669998 + 13.100000 = 58.769997
Rank 1 has 3 lines
1: <45.7    13.24>: 45.700001 + 13.240000 = 58.940002
1: <45.81   13.28>: 45.810001 + 13.280000 = 59.090000
1: <45.85   13.32>: 45.849998 + 13.320000 = 59.169998 
```

# mysql - MySQL 子查询 - 返回不止一行

> ID：13327128
> 
> 赞同：2
> 
> 时间：2012-11-10T23:32:33.477
> 
> 标签：mysql, subquery

我有一个表，其中有一个名称列表，列中的第一个和最后一个。因此，名为“manager”的列的值可能为“John Doe”。我想纠正一个简单地遍历该表中每一行并显示“经理”列的第一个字母和姓氏的查询。我所做的一切都提出了“子查询返回不止一行”。

从小处着手，我刚刚决定拉出第一个字母：

```
SELECT id, LEFT((SELECT manager FROM my_table), 1) FROM my_table; 
```

或者我只是完全基于这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:39:01.523

您正在使用子查询来获取父查询的字段。因此，子查询只能返回一行。这样想：结果集是一个二维结构。一系列的列和行。子查询返回的数据必须与它返回的事物的物理约束相匹配。

由于您正在获取一个字段，这意味着一个 SINGLE 值。如果允许返回多个值，您实际上是在尝试将 2D 结果集转换为 3d 集（行 + 列加上从其中一个字段中长出的摩天大楼）。

您的查询根本不需要是子查询：

```
SELECT id, LEFT(manager, 1) AS first_letter FROM yourtable 
```

此外，并不是说如果您想要单独的名字和姓氏，最好将它们存储为单独的字段。从一组名字/姓氏字段中重建一个名字很容易，但是很难将一个单一的名字可靠地分离成单独的名字和姓氏，例如

```
simple:
     John Doe   (fn: john, ln: doe)
hard:
     Billy Jo Todd (is that "Billy" and "Jo Todd", "Billy" and "Todd" with middle name Jo?

dead simple:

    field firstname = John
    field lastname = Doe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:42:29.257

如果您想使用子查询，则此查询可以按您的意愿工作，尽管我不确定这是在任何情况下进行的最佳方式。我们需要更多关于您需要的信息来断言这一点。

```
SELECT 
  m1.id, 
  m2.manager

FROM 
  my_table AS m1 INNER JOIN
  (SELECT id, LEFT(manager, 1) AS manager FROM my_table) as m2
  ON m1.id = m2.id 
```

[http://sqlfiddle.com/#!2/9c395/6](http://sqlfiddle.com/#!2/9c395/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:40:22.223

您必须向子查询添加条件以返回要比较的行

```
SELECT manager FROM my_table WHERE id = 1 
```

# c# - 预先计算循环中使用的常量（或其他任何地方）是否有益？

> ID：13327132
> 
> 赞同：1
> 
> 时间：2012-11-10T23:33:30.920
> 
> 标签：c#, loops, constants

编译器是否以相同的方式处理以下两种情况，或者情况 2 是否提供了性能提升，因为 x/2 没有不断地重新评估？我一直认为是后者，但如果有人能证实这一点，那就太好了。

情况1：

```
double result;
for (int i = 0; i < 10000000; i++) {
    result += variables[i] * (x/2);
}
return result; 
```

案例二：

```
double result;
double xOverTwo = x/2;
for (int i = 0; i < 10000000; i++) {
    result += variables[i] * (xOverTwo);
}
return result; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T23:51:36.250

这取决于是什么`x`。

如果它是一个常数，那么计算是在编译时完成的，所以两个代码执行相同。如果它是一个 volatile 变量，那么编译器每次都会被迫进行计算，那么你肯定会从循环外计算它中受益。

对于任何其他情况，这取决于编译器本身是否可以优化代码以在循环外进行计算。为了安全起见，您可以计算循环外的值。

当然，在您的示例中，您根本不需要`x`在循环内部使用，这将是修改使用的方法而不是尝试优化它的示例：

```
double result;
for (int i = 0; i < 10000000; i++) {
    result += variables[i];
}
return result * (x / 2); 
```

# jsf - p:tooltip 的动态“for”属性无法按预期工作

> ID：13327133
> 
> 赞同：3
> 
> 时间：2012-11-10T23:33:33.620
> 
> 标签：jsf, primefaces, tooltip

我正在尝试将 tooptips 附加到 ui:repeat 循环中的 commandButtons。我动态地创建命令按钮的 ID 和工具提示的“for”属性。这会产生以下错误：

```
 HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Cannot find component "a_test" in view.
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:325)
    org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
root cause

javax.faces.FacesException: Cannot find component "a_test" in view.
    org.primefaces.component.tooltip.TooltipRenderer.getTarget(TooltipRenderer.java:93)
    org.primefaces.component.tooltip.TooltipRenderer.encodeScript(TooltipRenderer.java:66)
    org.primefaces.component.tooltip.TooltipRenderer.encodeEnd(TooltipRenderer.java:35)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:883)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1659)
    com.sun.faces.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:104)
    com.sun.faces.facelets.component.UIRepeat.process(UIRepeat.java:504)
    com.sun.faces.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:958)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1652)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:853)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1652)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1655)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:399)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:313)
    org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.12 logs.

Apache Tomcat/7.0.12 
```

我的jsf如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>
<h:form id="MyForm">
    <ui:repeat var="rs"
        value="#{rezervasyonBean.rezervasyonSaatleriListesi}">
        <p:commandButton action="#" value="#{rs.saatAraligi}"
            update="@form" 
            id="#{rs.saatAraligi}_test" 
        />

        <p:tooltip for="#{rs.saatAraligi}_test" value="test text"/>
    </ui:repeat>

</h:form>
</html> 
```

rezervasyonBean.rezervasyonSaatleriListesi 是列表，rs.saatAraligi 的元素是 a、b、c。

我的问题是：如何以相同的方式动态识别 ui 组件和 p:tooltip 的“for”属性？

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T00:04:41.507

JSF UI 组件的 ID 属性是在视图构建期间评估的，但是`<ui:repeat>`在视图渲染期间运行，因此`#{rs.saatAraligi}`将评估为`null`，因此命令按钮的 ID 将始终为`_test`.

只需从and中删除`#{rs.saatAraligi}`表达式。你在这里不需要它。JSF 会自动为 的迭代索引添加前缀，从而确保 ID 的唯一性。`id``for``<ui:repeat>`

```
<p:commandButton action="#" value="#{rs.saatAraligi}"
    update="@form" 
    id="test" 
/>
<p:tooltip for="test" value="test text"/> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)- 同样的故事也适用于`id`JSF UI 组件的属性

# asp.net - 提供者使用

> ID：13327137
> 
> 赞同：1
> 
> 时间：2012-11-10T23:34:16.733
> 
> 标签：asp.net, yetanotherforum

我在 VS 2010 中创建了一个新的“ASP.NET 网站（Razor）”。进行了一些设置，现在我的 SQL 数据库中有表 pages_Membership、webpages_Roles 和 pages_UsersInRole。一切正常——在网站中，WebSecurity.UserExists 等方法有效。我假设这是使用 SimpleMembershipProvider。

然后，我决定将 Yetanotherforum 论坛集成到我的网站中。当我按照有关如何将 Yetanotherforum 集成到现有网站的说明进行操作时，提供了两种选择，YafMembershipProvider 和 AspNetSqlMembershipProvider。我将提供程序默认为 AspNetSqlMembershipProvider。

现在，我有一个冲突——如果 enableSimpleMembership 设置为 True，我现有的代码可以工作，但论坛不工作；否则，论坛工作，但我现有的代码没有。看来我需要标准化一个提供商......

理想情况下，我希望拥有一组成员资格表。这是否意味着使用 AspNetSqlMembershipProvider 是我唯一的选择？一般来说，使用 AspNetSqlMembershipProvider 而不是 SimpleMembershipProvider 有什么缺点吗？

谢谢

# c++ - boost::async - 不确定实现

> ID：13327141
> 
> 赞同：0
> 
> 时间：2012-11-10T23:34:57.217
> 
> 标签：c++, boost, asynchronous, future

查看`boost::async`boost 1.52 中的新实现，我有点不确定它的实现`launch::deferred`：

```
else if (int(policy) & int(launch::deferred))
{
  packaged_task<R> pt( boost::forward<F>(f) );

  BOOST_THREAD_FUTURE<R> ret = pt.get_future();
  return ::boost::move(ret);
} 
```

我不太明白这是如何工作的。`broken_promise`一旦`packaged_task`被销毁，这不会总是抛出异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:42:21.007

该文件称它“未实施”。

[http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.futures.reference.async](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.futures.reference.async)

# php - PDO 在类中不存储值

> ID：13327143
> 
> 赞同：0
> 
> 时间：2012-11-10T23:34:58.090
> 
> 标签：php, database, class, pdo

我现在有点困惑，因为我的 DB 类似乎没有在查询后存储任何结果（即“结果”属性仍然是一个空数组）。不同寻常的是，当我将逻辑转移到类定义之外时，它可以完美运行。

我的带有数据库凭据的代码被清空：

```
namespace DatabaseConnection;
use PDO;

class DB {

/*****STATES*****/
private $con;
private $results; 

/*****METHODS*****/
public function init(){

    $this->con = new PDO("***************************");
    $this->results = array();

    return $this;
}

public function getInfo(){
    if($this->con === null ) return "No Connection";
    else return "Connected"; 
}

public function getResults(){
    return $this->results;
}

public function retrieve(){
    $query = $this->con->prepare("select * from documents");
        $query->execute(); 

        while($row = $query->fetch(PDO::FETCH_ASSOC)){
        $this->results[] = $row;
        }

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:40:28.190

尝试：

```
public function retrieve(){
    $query = $this->con->prepare("select * from documents");

    $query->execute();  //<---------

    while($row = $query->fetch(PDO::FETCH_ASSOC)){
       $this->results[] = $row;
    }

    return $this;
 } 
```

OP 正在**准备一个语句，然后从不执行**它，并且由于完全缺乏对 DB 调用的任何错误处理，因此无法检测到这一点。– 马克 B

# c++ - 使用 MinGW 对 DevIL 函数的未定义引用

> ID：13327148
> 
> 赞同：1
> 
> 时间：2012-11-10T23:35:30.177
> 
> 标签：c++, windows, mingw, eclipse-cdt, devil

我在 C++ 链接、静态与动态、.lib 与 .a 等方面不是很有经验。

请注意，下面我对所有 DevIL 库（DevIL、ILU、ILUT）都有 -l。至于库文件，我将 dll 放在 System32 和 SysWOW64 中，并将 .libs 放在 MinGW\lib 中。Eclipse 项目的“当前工具链”确实是 MinGW GCC。该项目只有 1 个源文件 facecube.cpp（有 main()）。我错过了什么？

包括：

```
#include "Angel.h"
#include <IL\config.h>
#include <IL\ilut_config.h>
#include <IL\il.h>
#include <IL\ilu.h>
#include <IL\ilut.h>
#include <iostream>
using namespace std; 
```

编译器输出：

```
16:50:49 **** Rebuild of configuration Release for project TextureCube ****
Info: Internal Builder is used for build
g++ -DGLEW_STATIC "-IC:\\Users\\Brent\\Desktop\\angel_code\\include" "-IC:\\Users\\Brent\\Desktop\\6631AdvGraphics\\4631_HW4_brent_barre\\include" -O3 -Wall -c -fmessage-length=0 -o facecube.o "..\\facecube.cpp" 
In file included from ..\facecube.cpp:7:0:
C:\Users\Brent\Desktop\6631AdvGraphics\4631_HW4_brent_barre\include/IL/ilut.h:333:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
C:\Users\Brent\Desktop\6631AdvGraphics\4631_HW4_brent_barre\include/IL/ilut.h:334:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
C:\Users\Brent\Desktop\6631AdvGraphics\4631_HW4_brent_barre\include/IL/ilut.h:356:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
..\facecube.cpp: In function 'void quad(int, int, int, int)':
..\facecube.cpp:56:12: warning: unused variable 'colors' [-Wunused-variable]
..\facecube.cpp: In function 'void init()':
..\facecube.cpp:129:38: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
..\facecube.cpp:130:39: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
In file included from C:\Users\Brent\Desktop\angel_code\include/Angel.h:75:0,
                 from ..\facecube.cpp:6:
C:\Users\Brent\Desktop\angel_code\include/CheckError.h: At global scope:
C:\Users\Brent\Desktop\angel_code\include/CheckError.h:37:1: warning: 'void _CheckError(const char*, int)' defined but not used [-Wunused-function]
g++ -DGLEW_STATIC "-IC:\\Users\\Brent\\Desktop\\angel_code\\include" "-IC:\\Users\\Brent\\Desktop\\6631AdvGraphics\\4631_HW4_brent_barre\\include" -O3 -Wall -c -fmessage-length=0 -o "Common\\InitShader.o" "..\\Common\\InitShader.cpp" 
In file included from C:\Users\Brent\Desktop\angel_code\include/Angel.h:75:0,
                 from ..\Common\InitShader.cpp:2:
C:\Users\Brent\Desktop\angel_code\include/CheckError.h:37:1: warning: 'void _CheckError(const char*, int)' defined but not used [-Wunused-function]
g++ -o TextureCube.exe facecube.o "Common\\InitShader.o" -lfreeglut -lglew32 -lopengl32 -lwinmm -lgdi32 -lDevIL -lILU -lILUT 
facecube.o:facecube.cpp:(.text+0x53f): undefined reference to `__imp__ilInit@0'
facecube.o:facecube.cpp:(.text+0x545): undefined reference to `__imp__iluInit@0'
facecube.o:facecube.cpp:(.text+0x54b): undefined reference to `__imp__ilutInit@0'
facecube.o:facecube.cpp:(.text+0x558): undefined reference to `__imp__ilutRenderer@4'
facecube.o:facecube.cpp:(.text+0x566): undefined reference to `__imp__ilutGLLoadImage@4'
collect2.exe: error: ld returned 1 exit status

16:50:50 Build Finished (took 1s.38ms) 
```

上面忽略的编译指示警告的代码（似乎与我无关）：

```
333 #pragma warning(push)
334 #pragma warning(disable : 4115)  // Disables 'named type definition in parentheses' warning
...
356 #pragma warning(pop) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:40:01.823

看起来您正在混合使用 32 位和 64 位模块。具体来说，当我编译一个 32 位程序但链接到 64 位 DevIL 库时，我会遇到同样的问题。

确保您已下载并链接到 DevIL-SDK-x86-1.7.8 SDK ( [http://downloads.sourceforge.net/project/openil/DevIL%20Windows%20SDK/1.7.8/DevIL-SDK- x86-1.7.8.zip](http://downloads.sourceforge.net/project/openil/DevIL%20Windows%20SDK/1.7.8/DevIL-SDK-x86-1.7.8.zip) )。您还应该确保您使用的是来自相应 SDK 的标头，尽管这可能不太重要。

# c++ - Memset 定义和使用

> ID：13327155
> 
> 赞同：51
> 
> 时间：2012-11-10T23:36:36.277
> 
> 标签：c++, c, function

该功能有什么用处`memset()`？

> **定义**：将 ptr 指向的内存块的前 num 字节设置为指定值（解释为无符号字符）。

这是否意味着它对内存地址中的值进行硬编码？

`memset(&serv_addr,0,sizeof(serv_addr)`是我试图理解的例子。

有人可以用非常简单的方式解释吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-10T23:40:35.297

`memset()`是一个相对简单的操作的非常快的版本：

```
void* memset(void* b, int c, size_t len) {
    char* p = (char*)b;
    for (size_t i = 0; i != len; ++i) {
        p[i] = c;
    }
    return b;
} 
```

也就是说，将从 address 开始的字节`memset(b, c, l)`设置为 value 。它只是比上面的实现快得多。`l``b``c`

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-10T23:40:23.997

`memset()`通常用于初始化值。例如考虑以下结构：

```
struct Size {
    int width;
    int height;
} 
```

如果您像这样在堆栈上创建其中一个：

```
struct Size someSize; 
```

然后该结构中的值将是未定义的。它们可能为零，它们可能是从上次使用堆栈的该部分时发生的任何值。所以通常你会遵循这条线：

```
memset(&someSize, 0, sizeof(someSize)); 
```

当然也可以用于其他场景，这只是其中之一。只需将其视为一种简单地将一部分内存设置为某个值的方法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-10T23:49:41.010

`memset`无论数据类型如何，都是将内存区域设置为 0 的常用方法。可以说它`memset`不关心数据类型，只是将所有字节设置为零。

恕我直言，在 C++ 中应该尽可能避免这样做`memset`，因为它规避了 C++ 提供的类型安全性，而是应该使用构造函数或初始化作为初始化的手段。在类实例上完成的 memset 也可能无意中破坏某些东西：

例如

```
class A
{
public:
  shared_ptr<char*> _p;
}; 
```

a`memset`在上述实例上不会正确执行引用计数器减量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-10T23:40:53.033

我猜那`serv_addr`是某种`struct`类型的局部或全局变量`struct sockaddr`- 可能是 - （或者可能是 a `class`）。

`&serv_addr`正在获取该变量的地址。它是一个有效的地址，作为 的第一个参数给出`memset`。to的第二个参数`memset`是用于填充的字节（零字节）。最后一个参数`memset`是要填充的内存区域的大小（以字节为单位），即`serv_addr`示例中该变量的大小。

因此，此调用清除了包含 some`memset`的全局或局部变量。`serv_addr``struct`

实际上，*GCC*编译器在优化时会为此生成聪明的代码，通常是展开和内联它（实际上，它通常是内置的，因此*GCC*可以为它生成非常聪明的代码）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T09:06:30.563

只不过是将内存设置为特定值。

这是示例代码。

Memset(const *p,unit8_t V,unit8_t L) ，这里的 P 是指向目标内存的指针，V 是指向目标缓冲区的值，它将被设置为值 V，l 是数据的长度。

```
while(L --> 0)
{
    *p++ = V;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-08T03:05:10.973

memset- 设置内存中的字节数

概要-

```
#include<string.h> 
```

void *memset(void *s,int c,size_t n)

描述**- memset() 函数应将 c（转换为无符号字符）复制到 s 指向的对象的前 n 个字节中的每个字节中。** 这里对于上述函数，memset() 应返回 s 值。

# c++ - C++11 空标志类

> ID：13327158
> 
> 赞同：5
> 
> 时间：2012-11-10T23:36:50.083
> 
> 标签：c++, constructor, c++11

在C++11 中的一些`unique_lock` [构造函数中，可以传递一些](http://en.cppreference.com/w/cpp/thread/unique_lock/unique_lock)[类](http://en.cppreference.com/w/cpp/thread/lock_tag_t)，如标志，即

```
auto lock = std::unique_lock<std::mutex> lock(m, std::defer_lock); 
```

其中`std::defer_lock`定义为

```
struct defer_lock {} 
```

为什么以这种方式完成，而不是使用枚举？

我试图将其应用于一个小代码示例，但我无法编译它：

```
class A {};
void foo(A a) {}

int main() {
  foo(A); // error: 'A' does not refer to a value
} 
```

当我把括号放在`foo(A());`它的工作原理上时，但我看不出与 STL 的区别。为什么这在那里表现不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T23:42:30.787

使用不同的类型来标记某个操作而不是`enum`使代码路径的选择成为编译时选择而不是运行时选择。不同功能的实现也可能截然不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T23:41:48.073

实际上，[`std::defer_lock`](http://en.cppreference.com/w/cpp/thread/lock_tag)不是在您编写时定义，而是定义为

```
constexpr std::defer_lock_t defer_lock = std::defer_lock_t(); 
```

这就是为什么您的版本“模仿”（严重）标准库定义不起作用的原因；将您的定义更改为例如。

```
struct A {} A; 
```

它会起作用。（或者，尝试更有吸引力`struct A_t {} A`）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T23:43:27.180

标准库中的实际代码是

```
struct defer_lock_t {};
constexpr defer_lock_t defer_lock {}; 
```

第一行定义了一个没有成员的类。第二行定义了该类型的对象。该对象在函数调用中使用。

# javascript - AJAX 链接导致 div 内容被删除但没有插入新文本

> ID：13327161
> 
> 赞同：0
> 
> 时间：2012-11-10T23:37:01.283
> 
> 标签：javascript, ajax, jquery, ruby-on-rails-3.2

*使用 Rails 3.2.8*

选择链接会产生预期的确认对话，“哦，是吗？”。

选择“确定”按钮的预期结果是文本“表单在此处”`<div id = "target">`应更改为“表单\nsnookum”。

实际结果是文本“表格到这里”消失了，但没有放置任何内容`<div id = "target"></div>`

显示 HTML5 doctype、rails 包含的 jQuery 文件和 AJAX 链接的页面代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title></title>
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="0ycwNRsr8kneUjB5/SFz+LD+bnhbQHXMJzgADbkv78g=" name="csrf-token" />
  </head>
  <body>
    <a href="/sessions/new" data-confirm="oh yeah?" data-remote="true">Hello world!</a>
      <div id="target">
        the form goes here
      </div>
  </body>
</html> 
```

会话控制器，

`respond_with(@session)`将导致变量`@session`传递到 app/views/sessions/new.js.erb

```
respond_to :html, :js
  def new
    @session = "snookums"
    respond_with(@session)
  end 
```

模板：app/views/sessions/new.js.erb

```
var session_form = $('<%= j(render(:partial => "form")) -%>');
$('#target').html(session_form); 
```

表单：app/views/sessions/_form.html.erb

使用 Firebug 检查元素

```
GET http://localhost/sessions/new Response

var session_form = $('the form\nsnookums');
$('#target').html(session_form); 
```

开发日志

```
Started GET "/sessions/new" for 127.0.0.1 at 2012-11-10 15:57:20 -0500
Processing by SessionsController#new as JS
the form "snookums"
  Rendered sessions/_form.html.erb (1.2ms)
  Rendered sessions/new.js.erb (48.9ms)
Completed 200 OK in 65ms (Views: 64.0ms | ActiveRecord: 0.0ms) 
```

一切似乎都是相互关联的。问题是我在 new.js.erb 中生成的响应有问题吗？是否`$('#target').html(session_form);`相当于“将div‘target’的内容替换为‘session_form’中包含的文本？

顺便说一句，FWIW 我也在没有确认的情况下尝试过 - 没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:05:28.067

对于 ajax 相关的问题，使用错误处理程序查看返回的内容是一个好习惯。为此，我在所有使用 ajax 的页面中包含此代码块；

```
$.ajaxSetup({
  error:function(x,e){
       if(x.status==0){
       alert('You are offline!!\n Please Check Your Network.');
       }else if(x.status==404){
       alert('Requested URL not found.');
       }else if(x.status==500){
       alert('Internal Server Error.');
       }else if(e=='parsererror'){
       alert('Error.\nParsing JSON Request failed.');
       }else if(e=='timeout'){
       alert('Request Time out.');
       }else {
       alert('Unknow Error.\n'+x.responseText);
       }
  }
  }); 
```

# php - 如何在不刷新页面的情况下在 php 中获取 cookie？

> ID：13327166
> 
> 赞同：0
> 
> 时间：2012-11-10T23:37:34.707
> 
> 标签：php, javascript, ajax, cookies, time

我目前有这个代码和两个问题：

我使用 Javascript 获取用户时区并通过 ajax 将其发布到 timezone.php，该 ajax 使用用户时间设置 cookie。如果未设置 cookie，例如在第一次访问时，则必须刷新页面才能显示 cookie 值。我目前正在使用 javascript 执行此操作，但必须有另一种方式。此外，由于如果没有 cookie，页面会刷新，禁用 cookie 的用户将获得刷新循环。

关于如何解决这些问题的任何建议？

谢谢你，马库斯

**索引.php：**

```
<!DOCTYPE html>
<html>
<head>
<style>
    .night {
        background: #000;
        color: #fff;
    }
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<?php

        if(isset($_COOKIE["time"])) {
            $time = $_COOKIE["time"];
            if($time < 5.5 || $time > 19) {
                $night = true;
            }
        } else {
            echo("
            <script>
              var timezone = new Date().getTimezoneOffset()/60;

              $(document).ready(function() {
                $.post('timezone.php',{timezone: timezone}, function(data){location.reload(true)});
              });
            </script>
            ");
        }
?>

</head>
<body class="<?php echo $night ? "night" : "day"; ?>">
<?php if($night) {
    echo "It's nighttime! ($time)";
} else {
    echo "It's daytime! ($time)";
} ?>
</body>
</html> 
```

**时区.php：**

```
<?php

$timezone = $_POST["timezone"];

if(isset($timezone)) {
    date_default_timezone_set('Etc/GMT'.($timezone <= 0 ? '' : '+').$timezone);
    $time = date("G") + (date("i")/60);
    setcookie("time", $time);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:43:21.710

用 JavaScript 设置类，不需要服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:43:25.557

您可以使用 JQuery 插件[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)并检查 cookie 是否设置在您的 $.post 方法中

```
 $.post('timezone.php',{timezone: timezone}, function(data){
     if ($.cookie("time") != null) 
         location.reload(true);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:41:35.123

PHP 脚本仅在向服务器发出请求时运行。您可以使用 JS 和 AJAX，或者，如果合适，可以使用 iframe。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T23:56:22.890

您可以更改 index.php：

```
 $.post('timezone.php',{timezone: timezone}, function(data){ 
    if(data=='success'){
        location.reload(true)
    }
 }); 
```

在 timezone.php 中：

```
<?php

$timezone = $_POST["timezone"];

if(isset($timezone)) {
    date_default_timezone_set('Etc/GMT'.($timezone <= 0 ? '' : '+').$timezone);
    $time = date("G") + (date("i")/60);
    setcookie("time", $time);
    echo "success";
}

?> 
```

# java - 如何在 Java 中实现 GDate

> ID：13327167
> 
> 赞同：0
> 
> 时间：2012-11-10T23:37:38.250
> 
> 标签：java

我是 c++ 的 jave 新手。我想知道如何使用 http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/GDate.html 中指定的[Gdate](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/GDate.html)

谁能举一个简单的例子，如何使用 Gdate 计算两个日期之间的时间段？或者也许只是当前日期......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:51:42.183

仅查看 API 规范，以下代码似乎应该为您提供以毫秒为单位的时间段

```
public long dateDiffInMillis (final GDate date1, final GDate date2) {
    return date1.getCalendar ().getTimeInMillis () - date2.getCalendar ().getTimeInMillis ();
} 
```

# android - Android：膨胀异常

> ID：13327170
> 
> 赞同：0
> 
> 时间：2012-11-10T23:38:36.237
> 
> 标签：android, xml, android-layout

所以我一直在关注 Wrox 关于如何学习 android 的书，并且已经了解了如何从 Activity 获取结果并得到错误的部分

```
11-10 15:50:31.145: E/AndroidRuntime(528): FATAL EXCEPTION: main
11-10 15:50:31.145: E/AndroidRuntime(528): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.activites/com.example.activites.MainActivity}: android.view.InflateException: Binary XML file line #12: Error inflating class EditTest 
```

所以现在我现在我的 xml 中的 EditTest 导致了错误，但我不知道为什么。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Please enter you name" />
<EditTest
    android:id="@+id/txt_username"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
<Button
    android:id="@+id/btn_OK"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="OK" />

</RelativeLayout> 
```

这是无法开始的课程。

```
package com.example.activites;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.widget.Toast;

public class MainActivity extends Activity {
    String tag = "Events";
    int request_Code = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        Log.d(tag, "In the onCreate() event");
    }

    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode== KeyEvent.KEYCODE_DPAD_CENTER)
        {
            startActivityForResult(new Intent("com.example.ACTIVITY2"),request_Code);
        }
        return false;

    }

    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if(requestCode == request_Code){
            if(resultCode==RESULT_OK){
                Toast.makeText(this, data.getData().toString(), Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

提前感谢您的帮助。我确定这是一个简单的解决方案，我对平台还很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:42:08.187

我很惊讶它编译：

```
<EditTest 
```

我想你的意思是`<EditText`

# java - java中一个简单的按钮处理程序的运行时错误

> ID：13327174
> 
> 赞同：1
> 
> 时间：2012-11-10T23:39:20.167
> 
> 标签：java, swing

您好，我的基本按钮处理程序有问题。运行时出现此错误。

```
Exception in thread "main" java.lang.NullPointerException
    at java.awt.Container.addImpl(Container.java:1086)
    at java.awt.Container.add(Container.java:998)
    at javax.swing.JFrame.addImpl(JFrame.java:562)
    at java.awt.Container.add(Container.java:966)
    at practicagrafica5.botonpanel.<init>(botonpanel.java:44)
    at practicagrafica5.Practicagrafica5.main(Practicagrafica5.java:17)
Java Result: 1 
```

这是我的代码：

```
 package practicagrafica5;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class botonpanel {

    JButton botones[];
    String nombresbot[]={"primero","segundo","tercero"};
    JTextArea areatexto;
    JPanel panelbotones;
    JFrame ventana;

    botonpanel(){
    JFrame.setDefaultLookAndFeelDecorated(true);
    ventana= new JFrame("botones de prueba");
    ventana.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ventana.setLayout(new BorderLayout());
     ventana.setSize(400, 400);

    /* NOTA:
     ventana.setIconImage(Toolkit.getDefaultToolKit().createImage("aqui iria la ruta de la imagen en la pc")
    */
    botones=new JButton[nombresbot.length];
    panelbotones=new JPanel();
    panelbotones.setLayout(new FlowLayout(FlowLayout.LEFT));

    for (int i=0; i<nombresbot.length; i++){
    botones[i]=new JButton();
    botones[i].setName(nombresbot[i]);
    botones[i].setToolTipText("este es "+nombresbot[i]);
    botones[i].addMouseListener(new handlerbotones());
    panelbotones.add(botones[i]);
    }
    ventana.add(panelbotones,BorderLayout.NORTH);
    ventana.add(areatexto,BorderLayout.CENTER);
    ventana.setVisible(true);
    }//finaliza el constructor

    class handlerbotones extends MouseAdapter{

        @Override
        public void mousePressed(MouseEvent e){
            //como JPanel es un "hijo" de Component utilizamos en los metodos un objeto de la clase Component
            //y con su metodo getComponent obtendremos una referencia al componente en este caso el boton.
    Component aux = e.getComponent();
    System.out.println(aux.getName());
    }
        @Override
    public void mouseReleased(MouseEvent e){
     Component aux= e.getComponent();
            switch (aux.getName()) {
                case "primero":
                    areatexto.append("se ha pulsado el primer boton \n");
                    break;
                case "segundo":
                    areatexto.append("se ha pulsado el segundo \n");
                    break;
                case "tercero":
                    areatexto.append("se ha pulsado el tercero \n");
                    break;
                default:
                    areatexto.append("no has pulsado un coño");
                    break;
            }
    }
    }//finaliza la clase interna handlerbotones

} 
```

主应用程序中的代码只是：

```
package practicagrafica5;

public class Practicagrafica5 {

    public static void main(String[] args) {
    botonpanel lol= new botonpanel();
    }
} 
```

拜托我的头会被这个炸飞。我不知道我的错误在哪里。任何建议都会有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:42:03.310

您永远不会创建`areatexto`对象，例如

```
areatexto = new JTextArea(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:05:01.380

错误在这里：“ventana.add(areatexto,BorderLayout.CENTER)”。问题是您将 areatexto 作为参数传递，但尚未创建任何 JTextArea 类型的对象。因此，在您必须将 JTextArea 类型的对象分配给 areatexto 之前。它会是这样的：

areatexto=new JTextArea("hola");

顺便说一句，按照惯例，类的名称应该有大写字母的第一个字母（Botonpanel，不是 botonpanel）

祝你的实践好运！

托尼。

# ruby - Ruby 中 Array.delete_at 的问题

> ID：13327177
> 
> 赞同：-1
> 
> 时间：2012-11-10T23:39:43.053
> 
> 标签：ruby

我有两个数组函数：

```
def available_billing_address_types
  options = []
  options << "Home" if address.present?
  options << "Organisation" if organisation.present?
  return options         
end

def available_billing_address_types
  options = ["Home", "Organisation"]
  options.delete_at(0) if address.blank?
  options.delete_at(1) if organisation.blank?
  return options         
end 
```

第一个按预期工作，第二个没有。

我怀疑不可能调`delete_at()`两次？

或者我在这里错过了什么？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:44:10.893

你有这个数组：

```
options = ["Home", "Organisation"] 
```

如果你现在打电话给`options.delete_at(0)`你，你有这个数组：

```
options = ["Organisation"] 
```

因此，如果您现在调用`options.delete_at(1)`，则没有`1`要删除的元素。

你可以这样做：

```
def available_billing_address_types
  options = ["Home", "Organisation"]
  options.delete("Home") if address.blank?
  options.delete("Organisation") if organisation.blank?
  return options         
end 
```

# objective-c - 将 UIGraphics 上下文中的 UIImage 添加到推文

> ID：13327179
> 
> 赞同：0
> 
> 时间：2012-11-10T23:39:47.410
> 
> 标签：objective-c, ios, twitter

我有一个我一直在为 iOS 开发的游戏。我们让我们的用户在推特上发布他们的游戏结果，我认为在推特上添加徽章或其他东西来显示细节会很有趣。

我使用 UIKit 创建了一个图像。然后，我在 iOS 6.0`-[SLComposeViewController addImage:]`或 iOS 5.* 中附加该图像，`[TWTweetComposeViewController addImage:]`但它们都不会附加图像。

如果我使用 Facebook 或微博，图片可以很好地附加。使用 Twitter，一点运气都没有。

有没有人幸运地将图片附加到推文上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:14:30.603

如果您收到 NO 的返回值`TWTweetComposeViewController`，则文档显示：如果成功，则为 YES。如果图像不适合当前可用的字符空间或视图已呈现给用户，则为 NO。

# delphi - 是否有将圆的度数移动到 0 的功能？

> ID：13327187
> 
> 赞同：6
> 
> 时间：2012-11-10T23:40:40.637
> 
> 标签：delphi, math, geometry, delphi-xe2

我正在 Delphi XE2 中的某处寻找一个函数，类似于`Inc()`它允许我从当前度数中添加/减去多个度数并产生新度数。例如，如果我目前有一个点在一个圆周围 5 度，我想减去 10，我不应该得到 -5 度，而是 355 (360 - 5)。与添加过去的 360 相同 - 当它达到 360 时它应该回到 0。

Delphi中是否已经有类似的东西所以我不必重新编写它？也许在`Math`单位？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T09:34:38.010

```
uses
  System.SysUtils,Math;

Function WrapAngle( angle : Double) : Double;
Const
  modAngle : Double = 360.0;
begin
  Result := angle - modAngle*Floor(angle/modAngle);
end;

begin
  WriteLn(FloatToStr(WrapAngle(-5)));
  WriteLn(FloatToStr(WrapAngle(5-720)));
  WriteLn(FloatToStr(WrapAngle(360)));
  ReadLn;    
end. 
```

产生结果：

```
355
5 
0 
```

更新：

正如@Giel 发现的那样，在 XE3 中有一个新功能`DegNormalize()`可以完成这项工作。甚至快 25% 左右。诀窍是将`Floor()`调用替换为`Int()`，如果结果是否定的，则添加`modAngle`到结果中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T16:23:40.960

```
function WrapAngle(Value: Integer): Integer;
begin
  Result := Value mod 360;
  if Result < 0 then
    Inc(Result, 360);
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T08:57:32.157

我用来执行此任务的代码是：

```
function PosFrac(x: Double): Double;
(* PosFrac(1.2)=0.2 and PosFrac(-1.2)=0.8\. *)
begin
  Result := Frac(x); (* Frac(x)=x-Int(x) *)
  if Result<0.0 then begin
    Result := 1.0+Result;
  end;
end;

function ModR(const x, y: Double): Double;
(* ModR(1.2,1)=0.2 and ModR(-1.2,1)=0.8 *)
var
  absy: Double;
begin
  if y=0.0 then begin
    Result := 0.0;
  end else begin
    absy := abs(y);
    Result := PosFrac(x/absy)*absy;
  end;
end;

function Mod360(const x: Double): Double;
begin
  Result := ModR(x, 360.0);
end; 
```

此代码会将所有角度带入到 的范围`0`内`360`。例如：

```
Writeln(Round(Mod360(5-10)));
Writeln(Round(Mod360(5-360)));
Writeln(Round(Mod360(5-720)));
Writeln(Round(Mod360(5+720))); 
```

输出：

```
355
5
5
5

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T00:35:36.133

我不知道，但无论如何我更喜欢使用更通用的解决方案......

```
Procedure IncOverFlow(var Value:Double;Difference:Double;Limit:Double=360);
begin
   Value := Value + Difference;
   While Value < 0 do Value := Value + Limit;
   While Value >= Limit do Value := Value -Limit;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T16:42:40.463

```
procedure WrapAngle(var Degs: Integer);
begin
  Degs := Degs mod 360;
  if Degs < 0 then
    Inc(Degs, 360);
end; 
```

# php - 如何将字符串格式化为日期

> ID：13327189
> 
> 赞同：-1
> 
> 时间：2012-11-10T23:41:12.657
> 
> 标签：php, date, formatting

好的，所以我试图显示我从数据库中获得的日期

这是我可以在没有任何格式的情况下显示的内容：`2012-11-21 19:00:00`

我试图显示的是：`2012-11-21 at 19:00:00`

下面是代码

```
$expiryDate = date('Y/m/d', $data[0]->dinExpiry);
$expiryTime = date('H:i', $data[0]->dinExpiry); 
```

这是我得到的错误；

![在此处输入图像描述](../Images/9a62f9c86a89189300e31cae6f965fa7.png)

它显示的日期也是错误的

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:29:22.470

## 简单的解决方案

你说你可以显示`2012-11-21 19:00:00`没有任何格式。

因此，如果您可以将任意 $date 显示为 2012-11-21 19:00:00，为什么不直接对其进行子串化：

```
$dateToDisplay = substr($date, 0, 11).'at '.substr($date, 11, 8); 
```

并将 $dateToDisplay 显示为`2012-11-21 at 19:00:00`.

## 再来一点...

在不知道 $data[0]->dinExpiry 的输出的情况下回答这个问题很棘手。（我假设它为您提供了一个名为 $date 的变量）。

正如@Marc B 所说，您从中得到 1970 的事实表明它不是有效的时间戳*（提示：它是一个字符串）*，因此自 Unix 纪元（1970 年 1 月 1 日 00:00：格林威治标准时间 00)。

您可以将其转换为有效的时间戳，如下所示：

```
$expiryDate = date('Y-m-d', strtotime($date)); 
```

或匹配您的示例：

```
$expiryDate = date('Y-m-d', strtotime($data[0]->dinExpiry));
$expiryTime = date('H:i', strtotime($data[0]->dinExpiry)); 
```

# java - btree算法的问题

> ID：13327192
> 
> 赞同：3
> 
> 时间：2012-11-10T23:41:46.433
> 
> 标签：java, b-tree

我一直在寻找一些指针，并且有点短。我有一个项目的任务，我们必须通过扩展提供给我们的 234 Tree 类来实现 btree。

该类`234Tree`正在工作，而树仍然是 234 树。当我尝试将其用作 btree 时，似乎使用此类中的 insert 方法会中断。我已经将 insert 方法复制到我的 btree 类中作为覆盖，以防我必须更改某些内容，这样 234 树拆分仍然可以工作。

[这是我在 pastebin http://pastebin.com/TcP0UMA2](http://pastebin.com/TcP0UMA2)上的 btree 类的链接

我在命令提示符下使用所有这些。这是我运行它时的输出

```
Enter first letter of show, insert, find, change, read, or quit: s<br/>
level=0 child=0 /20/30/50/70/<br/>
level=1 child=0 /10/<br/>
level=1 child=1 /25/<br/>
level=1 child=2 /35/40/45/<br/>
level=1 child=3 /60/<br/>
level=1 child=4 /80/90/100/<br/>
Enter first letter of show, insert, find, change, read, or quit: i<br/>
Enter value to insert: 85<br/>
Moving 2 items. Those values are 50, 70.<br/> 
Exception in thread "main" java.lang.NullPointerException<br/>
    at frankaddeliaproject2.BTree.insert(BTree.java:115)<br/>
    at frankaddeliaproject2.Tree234App.main(Tree234App.java:43)<br/> 
```

Java 结果：1

我注意到的问题最终是当父节点变满时（在这种情况下它的顺序是 5，所以它想在第 5 次插入时拆分节点）。这就是为什么在尝试插入 85 时它会在此时中断。

```
while(true)
 {

     if( curNode.isFull() )               // if node full,
     {
         split(curNode);                   // split it
         curNode = curNode.getParent();    // back up
                                          // search once
         curNode = getNextChild(curNode, dValue);
      }  // end if(node is full) 
```

在`nullPointerException`具有此语句的行中：

```
if( curNode.isFull()) 
```

当我查看这段代码时，我可以发现它正在检查是否`curNode`已满，所以它会在第一次运行时出现问题

```
curNode = getNextChild //... 
```

因为从技术上讲，在这个之后没有孩子。从这一点来看，我主要不确定如何解决它。

在此先感谢，任何帮助表示赞赏！-坦率

编辑：看起来我与班级的链接有点被埋没了。如果这更容易，我会在下面发布

```
public class BTree extends Tree234 {

public void split(Node thisNode)     // split the node
  {

  // assumes node is full
  int tmp = Node.getOrder();
  int counter = 0;

  //figures out number of children to move during a move (2^n < x < 2^n+1)
  while(tmp >= 2)
  {
    tmp /= 2;
    counter++;
  }

  DataItem[] items = new DataItem[counter + 1];      

  for(int x = counter; x > 0; x--)
  {
    items[x] = thisNode.removeItem();
  }

  DataItem itemB;
  Node parent;
  Node[] children = new Node[counter];
  int itemIndex;

  itemB = thisNode.removeItem();    // this node

  //makes array of children to move
  int tmpcount = 0;
  for(int i = counter; i > 0; i--)
  {
      children[tmpcount] = thisNode.disconnectChild(Node.getOrder() - i);
      tmpcount++;
  }

  Node newRight = new Node();       // make new node

  if(thisNode==root)                // if this is the root,
    {
     root = new Node();                // make new root
     parent = root;                    // root is our parent
     root.connectChild(0, thisNode);   // connect to parent
    }
  else                              // this node not the root
     parent = thisNode.getParent();    // get parent

  // deal with parent
  itemIndex = parent.insertItem(itemB); // item B to parent
  int n = parent.getNumItems();         // total items?

  for(int j=n-1; j>itemIndex; j--)          // move parent's
     {                                      // connections
     Node temp = parent.disconnectChild(j); // one child
     parent.connectChild(j+1, temp);        // to the right
     }
                               // connect newRight to parent
  parent.connectChild(itemIndex+1, newRight);

  // deal with newRight
  // moves items to newRight
  // then alerts how many items are being moved and the values
  String msg = "Moving " + counter + " items. Those values are ";

  for(int y = 0; y < counter + 1; y++)
  {
    if(items[y] == null)
    {
      continue;
    }

    newRight.insertItem(items[y]);

    //build output message
    if(y < counter)
      msg += items[y].dData + ", ";
    else
      msg += items[y].dData + ". ";

  }

  //outputs message
  System.out.println(msg);

  //reconnect children to new parent
  for(int j = 0; j < counter; j++)
  {
      newRight.connectChild(j, children[j]);
  }

  }  // end split()
// -------------------------------------------------------------
// gets appropriate child of node during search for value

public void insert(long dValue)
  {
  Node curNode = root;
  DataItem tempItem = new DataItem(dValue);

  while(true)
     {

     if( curNode.isFull() )               // if node full,
        {
        split(curNode);                   // split it
        curNode = curNode.getParent();    // back up
                                          // search once
        curNode = getNextChild(curNode, dValue);
        }  // end if(node is full)

     else if( curNode.isLeaf() )          // if node is leaf,
        break;                            // go insert
     // node is not full, not a leaf; so go to lower level
     else
        curNode = getNextChild(curNode, dValue);

     }  // end while

      curNode.insertItem(tempItem);       // insert new DataItem
  }  // end insert()
// -------------------------------------------------------------    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:47:29.440

我不知道您是否仅从该片段中遇到了潜在问题，但您可以`NullPointerException`通过简单地先检查来解决`curNode`。

```
if(curNode != null && curNode.isFull() )               // if node full,
{
    split(curNode);                   // split it
    curNode = curNode.getParent();    // back up
                                      // search once
    curNode = getNextChild(curNode, dValue);
}  // end if(node is full) 
```

# c++ - 测试对象是否已从

> ID：13327198
> 
> 赞同：6
> 
> 时间：2012-11-10T23:42:06.977
> 
> 标签：c++, c++11, move-semantics, universal-reference

我正在测试我的容器包装器是否正确实现了 URef。我能想到的唯一明显的方法是尝试找出一种方法来检测物体是否已移动。

有没有一种很好的测试方法来确保对象没有被复制？还是有另一种方法来测试我想要什么？我更喜欢不需要修改我正在测试的类的解决方案。因为有几十个。

> 你能否提供更多关于你所拥有的信息？就像你的容器是什么，你如何使用它，你能不能修改它等等。也许你可以在不修改你的容器的情况下测试它，而是使用特殊的容器元素类型——它跟踪副本和移动。

几个不同的容器和一些独立的模板函数。大多数情况下，它是 STL 库类型（如 deque、list、map、set 等）的包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:46:03.313

> 有没有一种很好的测试方法来确保对象没有被复制？

您可以尝试以下检查：

[现场演示](http://coliru.stacked-crooked.com/a/3adf62d1818be83f)

```
#include <boost/container/vector.hpp>
#include <iostream>
#include <ostream>
#include <vector>
#include <string>

using namespace boost;
using namespace std;

struct Test
{
    bool copied;
    Test()
        : copied(false)
    {
    }
    Test(const Test&)
        : copied(true)
    {
    }
};

template<typename Container>
void check_move_constructor()
{
    Container from(1);
    Container to(boost::move(from));
    cout << "\tmove constructor is" << (to[0].copied ? " not" : "") << " working" << endl;
}

template<typename Container>
void check_move_assignment()
{
    Container from(1);
    Container to;
    to=boost::move(from);
    cout << "\tmove assignment is" << (to[0].copied ? " not" : "") << " working" << endl;
}

template<typename Container>
void check_move(const string &name)
{
    cout << name << " :" << endl;
    check_move_constructor< Container >();
    check_move_assignment< Container >();
    cout << string(16,'_') << endl;
}

int main()
{
    cout << boolalpha;
    check_move< container::vector<Test> >("boost::container::vector");
    check_move< vector<Test> >("std::vector");
    return 0;
} 
```

MSVC2008 输出：

```
boost::container::vector :
        move constructor is working
        move assignment is working
________________
std::vector :
        move constructor is not working
        move assignment is not working
________________ 
```

请注意，在这段代码中，我使用了从左值显式移动，因此复制省略在这里不起作用。

* * *

* * *

* * *

* * *

* * *

* * *

PS 另一种方法是检查生成的汇编代码。例如 MSVC 上的 /FA 编译器选项或 GCC 上的 -S。

您可以使用特殊函数调用标记感兴趣的地方：

```
__declspec(noinline) void asm_marker(int line) { volatile int i=line; };
#define ASM_MARKER asm_marker(__LINE__) 
```

并将该标记放在代码中：

```
 ASM_MARKER;
    func_of_interest();
    ASM_MARKER; 
```

Asm 代码可能如下所示：

```
 mov     ecx, 235                                ; 000000ebH
    call    ?asm_marker@@YAXH@Z                     ; asm_marker
    mov     edi, r12d
    lea     rcx, QWORD PTR [rdi+rdi*4]
    mov     rax, QWORD PTR vec$[rsp]
    lea     r9, QWORD PTR [rax+rcx*8]
    mov     rbx, QWORD PTR vec$[rsp+32]
    mov     ecx, 237                                ; 000000edH
    call    ?asm_marker@@YAXH@Z                     ; asm_marker 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:45:04.683

`false`添加一个在构造对象时设置为的布尔字段。在移动构造函数和移动赋值运算符中，分配`true`给要从中移动的对象中的该字段。

# python - 如何根据 Python 中的用户输入返回电子表格中的单元格值？

> ID：13327213
> 
> 赞同：3
> 
> 时间：2012-11-10T23:43:43.947
> 
> 标签：python, regex

我的目标是向用户询问日期，然后扫描电子表格列的单元格值并返回以该日期开头的所有单元格。

我有一个电子表格，其中第一列是时间戳列表（例如，2012 年 10 月 29 日“9:10:12”）。我正在使用 Python 和[gpsread](https://github.com/burnash/gspread)访问 Google 电子表格。

```
import gspread
import re

gc = gspread.login('username', 'password') # login
wks = gc.open('googleSpreadsheet').sheet1 # open spreadsheet 
```

我正在尝试向用户询问这样的日期输入：

```
dateInput = str(raw_input('Date? (MM/DD/YYYY) ')) 
```

然后我想获取该输入并在正则表达式中使用它来查找以它开头的所有单元格：

```
amount_re = re.compile(r'(^dateInput)')
cell_list = wks.findall(amount_re) 
```

但这会返回一个空数组。

那么，如何获取用户输入并返回以该输入开头的任何单元格？最终，我希望能够在电子表格中找到具有给定日期的任何单元格，然后将相应的行复制并粘贴到不同的电子表格中。解析数据和存储单元格的第一部分是我挂断的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:02:12.427

如果您实际上是以您呈现的方式提取用户输入，则问题可能是尾随换行符。尝试：

```
dateInput = raw_input("Date? (MM/DD/YYYY) ").strip()
amount_re = re.compile(r"(^%s)" % (dateInput,))
cell_list = wks.findall(amount_re) 
```

# mongodb - 如何在 MongoDB 中清除控制台

> ID：13327218
> 
> 赞同：81
> 
> 时间：2012-11-10T23:44:15.260
> 
> 标签：mongodb, mongo-shell

在使用 Mongodb 控制台或 shell 时，有时我的屏幕上会出现很多我不需要的以前的输出。那么，MongoDB中有清除控制台的功能吗？

类似于 MatLab 中的 clear 的类似物。

我试过了`clc`，`clear`但没有成功。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-11-10T23:49:16.270

从[Jira](https://jira.mongodb.org/browse/SERVER-2533?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)来看，他们已经做到了：你需要`cls`在 shell 中编写。

您也可以使用热键：`CTRL`+ `L`。

在 macOS 中：`Command`+ `K`。

[在此处](http://docs.mongodb.org/manual/reference/mongo-shell/#keyboard-shortcuts)查看更多 shell 热键。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-11-11T02:24:58.557

如果您使用的是 MongoDB 2.0 或更高版本，则`mongo`shell 支持以下两者：

*   `cls`命令
*   `Ctrl+l`（清屏）

请注意，这两个都清除屏幕并将光标放在顶部.. 但您仍然可以回滚以查看以前的历史记录。

在 OS X Terminal.app 中，您还可以执行以下操作：

*   `Command+K`（清除回滚）

清除屏幕和/或回滚缓冲区与历史记录无关，因此您仍然可以向上/向下光标运行以前的命令。

# javascript - 当 htacess 将主页重定向到 mydomain.com 时，使用 ajax 内部链接到主页 (/index)

> ID：13327219
> 
> 赞同：0
> 
> 时间：2012-11-10T23:44:17.587
> 
> 标签：javascript, ajax, .htaccess, http-status-code-301

我在我的 Apache .htaccess 文件中使用重定向将所有流量从 index.html 发送到 mydomain.com。为此，我使用以下内容：

```
Options +FollowSymLinks
RewriteCond %{THE_REQUEST} ^.*/index.html
RewriteRule ^(.*)index.html$ http://www.mydomain.com/$1 [R=301,L] 
```

我现在遇到的问题是在`<div>`使用 AJAX 调用内容时使用到我的主页的相对路径。

如果我想从 /index.html 获取内容，我会收到 404 错误。我可以通过使用绝对路径来解决这个问题，即。“http://mydomain.com”，但有没有办法我仍然可以使用主页的相对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:34:48.863

就在我的脑海中，我会说您的 URL 参数/锚点没有经过重写。您可以使用 QueryStringAppend`QSA`标志来修复它，如下所示：

```
RewriteRule ^(.*)index.html$ http://www.mydomain.com/$1 [QSA,R=301,L] 
```

# android - ActionBarSherlock 4.2.0 在尝试构建时返回一堆错误

> ID：13327220
> 
> 赞同：0
> 
> 时间：2012-11-10T23:44:18.133
> 
> 标签：android, intellij-idea, actionbarsherlock, android-library

我正在尝试将 Android 应用程序更改为使用 ActionBarSherlock。我添加了库并正确设置了所有内容（我认为）。但是当我尝试运行应用程序时，我遇到了一堆错误，不是应用程序本身，而是 ActionBarSherlock 源。

这就是它所说的：

```
Information:Compilation completed with 24 errors and 13 warnings
Information:24 errors
Information:13 warnings
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\app\ActionBar.java
    Warning:Warning:line (949)[deprecation] FILL_PARENT in LayoutParams has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\app\ActionBarImpl.java
    Error:Error:line (66)error: ActionBarImpl is not abstract and does not override abstract method setSecondaryProgress(int) in ActionBarSherlock
    Error:Error:line (135)error: constructor ActionBar in class ActionBar cannot be applied to given types;
required: Activity,int
found: no arguments
reason: actual and formal argument lists differ in length
    Error:Error:line (147)error: constructor ActionBar in class ActionBar cannot be applied to given types;
required: Activity,int
found: no arguments
reason: actual and formal argument lists differ in length
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\widget\ActionBarContainer.java
    Warning:Warning:line (58)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\widget\ActionBarContextView.java
    Warning:Warning:line (81)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
    Warning:Warning:line (115)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
    Warning:Warning:line (129)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
    Warning:Warning:line (231)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
    Warning:Warning:line (244)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\widget\ScrollingTabContainerView.java
    Warning:Warning:line (280)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\widget\IcsProgressBar.java
    Warning:Warning:line (207)[deprecation] animationResolution in attr has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\view\menu\MenuPopupHelper.java
    Warning:Warning:line (145)[deprecation] removeGlobalOnLayoutListener(OnGlobalLayoutListener) in ViewTreeObserver has been deprecated
    Warning:Warning:line (216)[deprecation] removeGlobalOnLayoutListener(OnGlobalLayoutListener) in ViewTreeObserver has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\app\ActionBarWrapper.java
    Error:Error:line (16)error: ActionBarWrapper is not abstract and does not override abstract method startActionMode(Callback) in ActionBarSherlock
    Error:Error:line (24)error: constructor ActionBar in class ActionBar cannot be applied to given types;
required: Activity,int
found: no arguments
reason: actual and formal argument lists differ in length
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\view\ActionProviderWrapper.java
    Warning:Warning:line (22)[deprecation] onCreateActionView() in ActionProvider has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\src\com\actionbarsherlock\internal\view\menu\ListMenuItemView.java
    Warning:Warning:line (86)[deprecation] setBackgroundDrawable(Drawable) in View has been deprecated
C:\Users\Nolan\IdeaProjects\ActionBarSherlock-4.2.0\library\test\com\actionbarsherlock\internal\ManifestParsingTest.java
    Error:Error:line (3)error: package org.junit does not exist
    Error:Error:line (5)error: cannot find symbol class ActionBarSherlockCompat
    Error:Error:line (5)error: static import only from classes and interfaces
    Error:Error:line (6)error: package org.hamcrest does not exist
    Error:Error:line (6)error: static import only from classes and interfaces
    Error:Error:line (7)error: package org.junit does not exist
    Error:Error:line (7)error: static import only from classes and interfaces
    Error:Error:line (10)error: cannot find symbol class Test
    Error:Error:line (17)error: cannot find symbol class Test
    Error:Error:line (24)error: cannot find symbol class Test
    Error:Error:line (31)error: cannot find symbol class Test
    Error:Error:line (13)error: cannot find symbol method cleanActivityName(String,String)
    Error:Error:line (14)error: cannot find symbol method equalTo(String)
    Error:Error:line (20)error: cannot find symbol method cleanActivityName(String,String)
    Error:Error:line (21)error: cannot find symbol method equalTo(String)
    Error:Error:line (27)error: cannot find symbol method cleanActivityName(String,String)
    Error:Error:line (28)error: cannot find symbol method equalTo(String)
    Error:Error:line (34)error: cannot find symbol method cleanActivityName(String,String)
    Error:Error:line (35)error: cannot find symbol method equalTo(String) 
```

我真的不确定出了什么问题，因为这似乎不是我所做的任何事情，而是 ActionBarSherlock 本身的问题。我应该怎么办？

另外我正在使用 IntelliJ IDEA 来创建和构建项目。项目本身是一个库项目，有两个不同的版本，所以我可以支持免费和付费版本的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:12:31.703

1）您是否在项目中正确添加了 ActionbBarSherlock？ ![见图书馆](../Images/1eeb852d3ace336b7ead06547f782ec8.png)

2) 您的项目构建目标是否 >= Android 3.0 ？ ![请参阅项目构建目标](../Images/1eeb852d3ace336b7ead06547f782ec8.png)

3）你在你的项目中使用android支持库吗？如果是这样，请删除它，因为它已经在 ActionBarSherlock 库中

![请参阅 Java 构建路径](../Images/d222cdfbf220eeffb254f73ccd8208bc.png)

4) 每次您尝试将 ActionBarSherlock 包含到您的项目中时，请务必执行步骤 1、2、3，如果您看到任何“x”和“！”，请经常清理这些项目。两个项目上的标记 ![项目 -> 清理...](../Images/1961eb12b1637c719a3bec4fe152f712.png)

# ruby - 检测包含的 Ruby mixin

> ID：13327222
> 
> 赞同：1
> 
> 时间：2012-11-10T23:44:44.193
> 
> 标签：ruby, dynamic

我有一个与[此类](https://stackoverflow.com/questions/3175496/executing-a-mixin-method-at-the-end-of-a-class-definition)似的问题。我正在编写一个具有插件系统的应用程序。有一个 Addon mixin 模块，它检测何时包含并自动注册新的插件：

```
module Addon
  def self.included(receiver)
     addon = receiver.new   # Create an instance of the addon
     (snip)                 # Other stuff to register the addon 
     addon.on_register      # Tell the instance it was registered
  end
end 
```

以下是如何使用 mixin 的示例：

```
class MyAddon
  def on_register
    puts "My addon was registered"
  end
  include Addon  # ** note that this is at the end of the class **
end 
```

如上所述，此实现要求包含位于类的底部。否则 on_register 在 self.included 被调用时没有定义。

我担心插件开发人员可能会不小心将包含放在顶部，导致插件无法工作。或者可能有一个派生类或在 MyAddon 类被包含后会扩展它的东西。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:17:50.320

在提炼出其他答案和我发现的其他一些信息之后，我想记录最终对我有用的答案。

正如[这个问题](https://stackoverflow.com/questions/7215352/callback-when-a-class-is-loaded)所解释的，当定义一个类“完成”时，您无法在 include() 时间检测到。因此，依靠“包含”回调来创建对象并不是一个非常强大的解决方案。

相反，解决方案是发现所有插件并在加载所有内容**后**实例化它们。对插件开发人员的唯一限制是他们的代码必须共享一个通用的顶级模块命名空间。

我仍然不知道这是否是*最好*的方法，但它肯定比我开始时更好。

这是在模块中搜索插件的代码。它从传入的命名空间开始并递归搜索包含插件类的类：

```
def find_and_instantiate(mod, addons)
   consts = mod.constants
   consts.each do |c|
     sym = mod.const_get(c)
     if (sym.class == Module)
       find_and_instantiate(sym, addons)
     else
       if (sym.class == Class && sym.include?(Addon))
         addons << sym.new(@container)            
       end
     end        
   end
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:28:14.137

我能想到的最好方法是在声明方法后通知模块的用户需要包含它`#on_register`：

```
module Addon
  def self.included(receiver)
        raise "include #{self.name} after the #on_register method is defined" unless receiver.method_defined? :on_register
        receiver.new.send(:on_register)
  end
end 
```

这不太理想，但它可以防止加重错误，直到您找到更好的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T02:28:10.133

对不起，但我必须把这个交给你。所以你想听听你的代码很聪明，伙计。是的，是的，它太聪明了。但是，如果您想关心其他开发人员，您将不得不停止聪明并开始变得正常。

Ruby 是一种面向对象的语言。OOP 的基础是我首先定义我的对象结构和它们的方法，然后，当一切都定义好后，我理想地用一个调用 MyApp.new 来实例化我的世界。这样，我首先定义的内容并不重要。'include' 调用用于建立模块继承层次结构，仅此而已。

但是不，你不想做 OOP。您想滥用`included`钩子并在其中实例化接收器（！），并调用其实例方法。这就是他们所说的混淆代码。换句话说，您从 OOP 回到了旧的良好`goto`风格的指令编程。Ruby 允许你混淆，不是限制你的能力，而是拥有巨大的权力，责任重大，你自己必须保持适度。

您将不得不重构您的代码以使其正常。我们无法为您做到这一点，因为我们不知道您想要实现什么。谁知道呢，也许你的想法不愧是天才。太糟糕了，我们不知道你的问题。你有一些插件系统。我问你：你需要吗？好的旧 mixin 系统对你来说还不够好吗？你确定你不是用 Ruby 编程 Java 吗？那么，你的应用程序会比 Rails 更强大吗？如果是，请继续使用插件系统。如果没有，那就别再胡闹了，把时间花在编写真正执行您的应用程序应该执行的操作的算法上，而不是提前创建不可分割的插件系统。如果你在一家公司工作——我对此表示怀疑——一定要让你的老板读到这篇文章。

# sql - 从表中插入/查询数据时出现 ORA-00904

> ID：13327223
> 
> 赞同：3
> 
> 时间：2012-11-10T23:44:52.017
> 
> 标签：sql, database, oracle11g

我收到流动错误：

```
Error starting at line 1 in command:
INSERT INTO driver (registration, make, model, gvw, year, body) VALUES('4585 AW','ALBION','RIEVER',20321,1963, ' ');
Error at Command Line:1 Column:53
Error report:
SQL Error: ORA-00904: "BODY": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

当我执行以下操作时

```
INSERT INTO driver 
(registration, make, model, gvw, year) 
VALUES
('4585 AW','ALBION','RIEVER',20321,1963, ' '); 
```

所以我暂时删除了正文数据，然后给出了错误

```
Error starting at line 1 in command:
INSERT INTO driver (registration, make, model, gvw, year) VALUES('4585 AW','ALBION','RIEVER',20321,1963)
Error at Command Line:1 Column:53
Error report:
SQL Error: ORA-00904: "YEAR": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

我有两个名为 year 和 body 的列，但我遇到了错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T06:15:29.190

似乎您在 DDL 中的引号下指定了列名。

Oracle 将引号下的标识符视为区分大小写，因此创建列名为“body”或“year”的表将不会解析查询中的 body 或 year，因为当您省略引号时，它会考虑大写变体。

所以当你有这个时：

```
 create table driver_case (registration varchar2(60), 
                      make varchar2(60),
                      model varchar2(60),
                      gvw number,
                      "year" number, 
                      "body" varchar2(60)); 
```

然后尝试做

```
select year, body from driver_case 
```

然后 Oracle 尝试在您的表中查找与“year”、“body”不同的列“YEAR”、“BODY”（请记住，没有不带引号的标识符会被转换为大写）。

你的解决方案？

*   不要在 DDL 中的引号下提及列名
*   如果您忽略以上几点，那么您**必须**在所有 DML 语句中的引号下提及列名。

[我在这个SQL Fiddle](http://sqlfiddle.com/#!4/bb80c/7)中演示了上述观点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T12:39:31.937

尝试这个：

```
INSERT
    WHEN city='palanpur' THEN INTO Ashish 
    When city='Aburoad' THEN INTO abhi
SELECT no, name
    FROM arpit; 
```

# linq - VS 2010 和 VS 2012 中的不同 LINQ 答案

> ID：13327224
> 
> 赞同：6
> 
> 时间：2012-11-10T23:44:54.083
> 
> 标签：linq, ienumerable, lazy-evaluation

以下给出的答案在 VS 2010 中为 1，在 VS 2012 中为 2。我个人认为应该是 2。我不确定这里发生了什么。

```
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System;

namespace _335ExamPreparation
{
    public class Doubts
    {
        int[] nums = { 10, 11, 12, 13, 14, 15, 16 };
        int[] divisors = { 7, 10 };

        static void Main(string[] args)
        {
            Doubts d = new Doubts();
            d.func();
        }

        public void func()
        {
            var m = Enumerable.Empty<int>();
            foreach (int d in divisors)
            {
                m = m.Concat(nums.Where(s => (s % d == 0)));
            }

            int count = m.Distinct().Count();
            Console.WriteLine(count);
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T23:53:20.290

您所看到的是两种不同应用程序的结果`foreach`。VS 2012 中的行为发生了变化。请参阅[这篇文章](http://msmvps.com/blogs/kathleen/archive/2012/07/03/lifting-foreach-breaking-change-in-visual-studio-2012.aspx)。

两者的区别在于循环中`d`变量的作用域和生命周期。`foreach`在 VS 2012 之前，只有一个`d`变量，所以这意味着您正在创建两个`s => (s % d == 0))`引用*相同* `d`的闭包 ( ) 副本。在循环完成评估后，`d`是 10。当您通过调用执行查询时`.Distinct().Count()`，两个闭包都会看到 10 的值`d`。这就是为什么在 VS 2010 上计数为 1。

^(VS 2012 为每次迭代1)生成一个不同的变量，因此每个闭包都会看到该变量的*不同*实例，该实例`d`对应于该特定迭代。

这大致是 VS 2010 生成的代码：

```
int d;
for (int _index = 0; _index < divisors.Length; ++_index) {
    d = divisors[_index];
    m = m.Concat(nums.Where(s => (s % d == 0)));
} 
```

这大致是 VS 2012 生成的：

```
for (int _index = 0; _index < divisors.Length; ++_index) {
    int d = divisors[_index];
    m = m.Concat(nums.Where(s => (s % d == 0)));
} 
```

这两者之间的区别应该很明显。

如果您想无论哪个 VS 版本都获得相同的行为，请*始终*复制您的迭代变量：

```
foreach (int d in divisors)
{
    var copy = d;
    m = m.Concat(nums.Where(s => (s % copy == 0)));
} 
```

* * *

¹从技术上讲，只有在闭包中引用了迭代变量时。如果不是，则无需进行复制，因为无论如何这只会影响闭包语义。

# c++ - 未创建 NT 内核记录器会话日志

> ID：13327232
> 
> 赞同：0
> 
> 时间：2012-11-10T23:45:47.787
> 
> 标签：c++, windows, visual-studio-2010, logging, etw

我正在尝试编译从 Microsoft 的一个网站（[原始](http://msdn.microsoft.com/en-us/library/aa363691%28VS.85%29.aspx)）获得的以下代码：

```
#include "stdafx.h"

#define INITGUID  // Include this #define to use SystemTraceControlGuid in Evntrace.h.

#include <windows.h>
#include <stdio.h>
#include <conio.h>
#include <strsafe.h>
#include <wmistr.h>
#include <evntrace.h>

#define LOGFILE_PATH L"C:\Documents and Settings\Administrator\My Documents\My Dropbox\Log.etl"

void wmain(void)
{

    ULONG status = ERROR_SUCCESS;
    TRACEHANDLE SessionHandle = 0;
    EVENT_TRACE_PROPERTIES* pSessionProperties = NULL;
    ULONG BufferSize = 0;

    // Allocate memory for the session properties. The memory must
    // be large enough to include the log file name and session name,
    // which get appended to the end of the session properties structure.

    BufferSize = sizeof(EVENT_TRACE_PROPERTIES) + sizeof(LOGFILE_PATH) + sizeof(KERNEL_LOGGER_NAME);
    pSessionProperties = (EVENT_TRACE_PROPERTIES*) malloc(BufferSize);    
    if (NULL == pSessionProperties)
    {
        wprintf(L"Unable to allocate %d bytes for properties structure.\n", BufferSize);

        goto cleanup;
    }

    // Set the session properties. You only append the log file name
    // to the properties structure; the StartTrace function appends
    // the session name for you.

    ZeroMemory(pSessionProperties, BufferSize);
    pSessionProperties->Wnode.BufferSize = BufferSize;
    pSessionProperties->Wnode.Flags = WNODE_FLAG_TRACED_GUID;
    pSessionProperties->Wnode.ClientContext = 1; //QPC clock resolution
    pSessionProperties->Wnode.Guid = SystemTraceControlGuid; 
    pSessionProperties->EnableFlags = EVENT_TRACE_FLAG_NETWORK_TCPIP;
    pSessionProperties->LogFileMode = EVENT_TRACE_FILE_MODE_CIRCULAR;
    pSessionProperties->MaximumFileSize = 5;  // 5 MB
    pSessionProperties->LoggerNameOffset = sizeof(EVENT_TRACE_PROPERTIES);
    pSessionProperties->LogFileNameOffset = sizeof(EVENT_TRACE_PROPERTIES) + sizeof(KERNEL_LOGGER_NAME); 
    StringCbCopy((LPWSTR)((char*)pSessionProperties + pSessionProperties->LogFileNameOffset), sizeof(LOGFILE_PATH), LOGFILE_PATH);

    // Create the trace session.

    status = StartTrace((PTRACEHANDLE)&SessionHandle, KERNEL_LOGGER_NAME, pSessionProperties);

    if (ERROR_SUCCESS != status)
    {
        if (ERROR_ALREADY_EXISTS == status)
        {
            wprintf(L"The NT Kernel Logger session is already in use.\n");
        }
        else
        {
            wprintf(L"EnableTrace() failed with %lu\n", status);
            getchar();
        }

        goto cleanup;
    }

    wprintf(L"Press any key to end trace session ");
    _getch();

cleanup:

    if (SessionHandle)
    {
        status = ControlTrace(SessionHandle, KERNEL_LOGGER_NAME, pSessionProperties, EVENT_TRACE_CONTROL_STOP);

        if (ERROR_SUCCESS != status)
        {
            wprintf(L"ControlTrace(stop) failed with %lu\n", status);
        }
    }

    if (pSessionProperties)
        free(pSessionProperties);
} 
```

该程序似乎运行成功，但从未创建日志文件。有谁知道问题是什么？我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:05:00.837

您应该将 LOGFILE_PATH 中的 '\' 替换为 '\\'。否则将被视为转义序列

# entity-framework - Entity Framework 5 - 如何从现有数据库生成 POCO 类

> ID：13327235
> 
> 赞同：15
> 
> 时间：2012-11-10T23:46:06.570
> 
> 标签：entity-framework, poco, entity-framework-5

我正在使用 VS 2012 和 EF 5。我有一个现有数据库，我想从现有数据库创建 POCO 类。我按照步骤将 ADO.NET 实体数据模型添加到我的项目中。我通过向导使用现有数据库。然后它在设计器打开的情况下创建了 edmx 和 tt 文件。但是，我想创建 POCO 对象并使用它们。Microsoft 站点声明 POCO 实体框架生成器已过时，我应该使用 DBContext 生成器。我不知道我用来生成 POCO 类的步骤。我只看到 edmx 设计师。我真的什至不想要一个 edmx 文件，而只是 POCO 类。如何使用 EF 5 和 VS 2012 从现有数据库创建 POCO 类？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T23:49:35.100

使用[EF 5.x DbContext Fluent Generator](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)

您可以从在线模板中添加它：

*   从现有数据库生成 edmx
*   选择`Add New Item`
*   搜索 POCO 的在线模板
*   添加 EF 5.x DbContext Fluent 生成器

它将向您的项目添加三个 T4 模板：

*   **XXX.Context.tt** - 从 DbContext 继承的上下文
*   **XXX.Entities.tt** - POCO 实体
*   **XXX.Mappings.tt** - 每个实体的流畅映射

*但是*您需要手动设置 edmx 数据模型的路径。这些模板中的每一个都有行`string inputFile = @"$edmxInputFile$";`。您需要在此处提供 edmx 文件的名称：

`string inputFile = @"Northwind.edmx";`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T16:00:59.377

现在看来，执行此操作的过程非常简化。现在，EDMX 设计人员本身可以轻松完成已接受答案中的步骤。基本上，

*   通过将 ADO.NET 实体数据模型添加到项目中，从现有数据库生成模型 (edmx)（有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/vstudio/cc716703(v=vs.100).aspx)），
*   接着

> 在实体设计器中打开 .edmx 文件。
> 
> 右键单击实体设计器图面上的空白区域并指向添加代码生成项。
> 
> 在 Add New Item 对话框中，选择 Online Templates 并在 Search Online Templates 文本框中键入 DBContext。
> 
> 为您的模板选择适当的版本（5.0，如果您想定位实体框架 5.0）。
> 
> 单击确定。

显然，这将完成所有工作。此处引用的说明指的是在线模板，因为需要安装 EF 5.x DbContext Fluent Generator。如果您已经安装了它，则无需在 Online Templates 中搜索它，而是在 Installed Templates 中搜索它。

有关更多信息，您可以查看[此](http://msdn.microsoft.com/en-us/library/cc716703%28v=vs.103%29.aspx)页面，“使用 DbContext 生成器模板生成对象层代码”部分。

# jquery - 点击时的jQuery无法识别child-div

> ID：13327245
> 
> 赞同：-1
> 
> 时间：2012-11-10T23:47:23.083
> 
> 标签：jquery, jquery-ui, onclick

我正在使用 jQuery 的单击将单击绑定到具有类 coda-nav-left-arrow 的动态添加的 div。

```
$('#slider-wrap').on('click', '.coda-nav-left-arrow', function () {
    alert(countClicks);
}); 
```

问题是，这个生成的 div 是另一个生成的 div 的子级，所以它不在 #slider-wrap div 的正下方：

```
<div id="slider-wrap">
  <div id="slider-id-wrapper" class="coda-slider-wrapper arrows">
    <div class="coda-nav-left-arrow"> 
```

这就是为什么（我认为）jQuery 无法识别它的原因。我的假设正确吗？我怎样才能让它可见？

**编辑：**为了清楚起见，#slider-wrap div 从一开始就存在。这不是动态生成的。其他的都是。

**Edit2（已解决）：**这足以使代码正常工作：

```
$('.coda-nav-left-arrow').on('click',function(){}); 
```

只要它包含在

```
$(document).ready(function(){} 
```

堵塞。

**编辑 3：**所以我们了解到 .on() 深入多个级别，并且仅在文档准备好时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:09:48.927

您确定已将处理程序附加到`#slider-wrap`它在 DOM 中的时间吗？

尝试包装[jQuery.ready](http://api.jquery.com/ready/)：

```
jQuery(function($) {
    $('#slider-wrap').on('click', '.coda-nav-left-arrow', function () {
        alert(countClicks);
    });
}); 
```

或者在创建div之后添加脚本代码：

```
<div id="slider-wrap">
  <div id="slider-id-wrapper" class="coda-slider-wrapper arrows">
    <div class="coda-nav-left-arrow">
    ....
  ....
</div> <!-- end of #slider-wrap -->
<script type="text/javascript">
    $('#slider-wrap').on('click', '.coda-nav-left-arrow', function () {
        alert(countClicks);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T23:50:16.320

尝试这个：

```
$(document).on('click', '.coda-nav-left-arrow', function () {
    alert(countClicks);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T00:53:02.977

你的代码很好

```
$(document).ready(function(){
    $('#slider-wrap').on('click', '.coda-nav-left-arrow', function () {
        alert(countClicks);
    });
}); 
```

...[检查这个小提琴](http://jsfiddle.net/GgwmS/)。

代表团不仅影响到直系子女，还影响到所有下层。您可能有另一个 js 或语法错误会破坏此特定代码（但如果没有链接很难说）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T23:57:23.860

您需要选择要委托给的父元素。您需要选择一个确实存在的元素。如果有父母，`body`尽量不要这样做。`document``#slider-wrap`

我建议的替代方法是在动态创建元素时附加事件，例如：

```
var $sliderWrap = $('<div id="slider-wrap">{YOUR OTHER HTML HERE}</div>');
$sliderWrap.on('click', '.coda-nav-left-arrow',function(){
  alert(countClicks);
});
$sliderWrap.appendTo('body'); 
```

我还建议阅读事件委托，以便您了解 jQuery 在幕后所做的事情。这不是太复杂：

[http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T18:11:42.877

```
<button class="btn">Do Something</button>​ 
```

```
$('.btn').on('click', function() {
  $('body').prepend($('<button>').attr('id', 'foo').html('I\'m a foo doer'));
  return $('#foo').on('click', function() {
    return alert("Foo thing");
  });
}); 
```

[**小提琴**](http://jsfiddle.net/3Fr3t/)

# ruby-on-rails - 复杂的条件 rails 3 activerecord 查询

> ID：13327253
> 
> 赞同：1
> 
> 时间：2012-11-10T23:48:42.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

以下是 Package.rb 中的当前代码

```
def self.available
  joins(:deals).where(:available_for_purchase => true).uniq
end 
```

现在我想要更多关于包裹的条件，这里的条件是::

```
:duration != nil
:expiration_date > Date.today 
```

*   :duration 和 :expiration date 都不应该存在，我的意思是其中一个必须为空，

*   两者也不能为空。

*   退回满足上述所有条件的包裹

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:55:24.467

我希望我理解这个问题是正确的，你可以试试这个：

```
def self.available
  joins(:deals).where("available_for_purchase = ? AND duration NOT ? AND expiration_date > ?",
      true,
      nil,
      Date.today
  ).uniq
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:29:31.697

好的，终于得到了查询，这是结果

```
def available
    joins(:deals).where("available_for_purchase=?
            AND(
               (expiration_date IS NOT NULL AND expiration_date > ? AND duration IS NULL)
                OR (duration IS NOT NULL AND expiration_date IS NULL)
         ) ",true,Date.today).group(:id)
end 
```

# c++ - ubuntu 命令获取 C++ 程序中的所有函数

> ID：13327257
> 
> 赞同：3
> 
> 时间：2012-11-10T23:49:18.020
> 
> 标签：c++, linux, ubuntu

我正在寻找一种工具，它可以帮助我获得 C++ 程序中可用的所有函数以及它们可用的目录（如果是递归调用）。

例如，如果在文件夹 2 所在的文件夹 1 中运行，则 foo.c 具有 int foo()

我想获取 int foo() 目录 folder2/foo.c

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:09:21.940

您还可以查看以下工具：

*   [示波器](http://cscope.sourceforge.net/)

*   [OpenGrok](http://opengrok.github.io/OpenGrok/)

*   [LXR](http://lxr.linux.no/+trees)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T04:29:36.923

这是一个非常粗略的近似值，但可能已经让您更接近您正在寻找的内容，并且它具有非常简单的优点。从代码库的顶级目录中，运行：

```
find -name "*.h" -exec grep -H '^[^/]*(' {} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:56:54.877

万一您安装了带有 CDT 的 Eclipse ( [http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/) )，您可以创建一个新项目，导入所有代码并进行 C/C++ 搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T02:20:58.320

ctags 也许是你想要的。[http://ctags.sourceforge.net/](http://ctags.sourceforge.net/)

它是 vim 或 emacs 等编辑器创建标签的工具。这些编辑器可以使用标签来查找函数和类的声明和定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T07:26:51.373

我假设当您谈到您的*“C++ 程序”*时，您可以访问所有 C++ 源文件及其构建，例如它的`Makefile`等。

如果您可以访问生成的二进制文件，则可以使用`nm -C`它来获取其中的函数。

然后，您可能会考虑使用一些 GCC 扩展或插件。您可以使用[MELT](http://gcc-melt.org/)（这是一种扩展 GCC 编译器的领域特定语言）来扩展 GCC。[melt-examples/ex02](https://github.com/bstarynk/melt-examples/tree/master/ex02)示例的作用非常相似（它只是计数函数，您可以添加几行使其输出当前计数函数的名称和源位置）。

但请注意，由于 GCC 正在优化，程序中函数的概念可能没有你想象的那么明显：GCC​​ 是克隆和内联函数，这意味着生成的程序中的函数集不是程序中的函数集源代码。

在 GCC 编译器中工作的优点是您可以真正获得编译器所看到的功能。例如，文本方法（如`ctags`或`grep`基于答案）不能很好地与预处理技巧配合使用。

# knitr - 是否可以使用 engine="bash" 在 knitr 块之间共享变量？

> ID：13327258
> 
> 赞同：7
> 
> 时间：2012-11-10T23:49:22.123
> 
> 标签：knitr

像这样的东西，但它不起作用：

```
```{r examples, engine="bash"}
    export EXAMPLES="example/path"
```

```{r example1, engine="bash"}
    echo $EXAMPLES
``` 
```

但是，这有效：

```
```{r examples2, engine="bash"}
    export EXAMPLES="example/path"
    echo $EXAMPLES
``` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T21:05:17.487

这是一个很好的问题！这也是我真正想要完成但不知道该怎么做的事情（如果有人可以帮助我，我很感激）。它不仅对 有用`bash`，而且对`knitr`like中的所有其他引擎也有用`python`，`ruby`依此类推。它目前不起作用的原因`knitr`只是通过运行代码`system('engine -arg code')`，即对于每个代码块，都会打开一个新的引擎会话，因此所有块本质上都是在不同的进程中执行的。

理想情况下，我想要一个能够打开会话并继续收听新代码的引擎，但我不确定这是否可能。AFAIK，共享变量的唯一方法是将它们写入文件，这显然很尴尬。

# ruby-on-rails - e 如何选择与父模型无关的记录 - Rails 3.2

> ID：13327259
> 
> 赞同：0
> 
> 时间：2012-11-10T23:49:29.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

首先，我的模型：

```
User has_many :subscriptions
     has_many :courses, :through => :subscriptions

Subscription belongs_to :both

Course has_many :subscriptions
       has_many :users, :through => :subscriptions 
```

获取用户订阅的课程很容易：

```
@subscribed_courses = current_user.courses 
```

**现在，我想获取与 current_user 没有关联的 5 个随机课程的列表**（对于用户主页上的“您可能还喜欢...”功能）。最好的方法是什么？选择所有课程然后在 ruby​​ 中将散列限制为仅不在`@subscribed_courses`实例变量中的课程是否有效？如果这是最好的方法，我会怎么做？

### 编辑：

例如，`Course.joins(:subscription)`会给我与订阅相关的所有课程。我想查询用户未订阅的课程，包括尚未订阅的课程（因此，与订阅无关）。抱歉，我之前没有说得更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:22:13.000

```
Course.joins(:subscriptions).where('subscriptions.user_id <> ?', current_user.id).order('random()').limit(5) 
```

# php - 调用类中未定义的方法，即使它已定义

> ID：13327269
> 
> 赞同：2
> 
> 时间：2012-11-10T23:50:29.013
> 
> 标签：php, doctrine-orm, codeigniter-2

我的 apache 错误日志中出现以下错误消息：

> PHP 致命错误：在第 544 行的 /var/www/www.website.com/application/libraries/MyWebsite/Model/ContentVersion.php 中调用未定义的方法 MyWebsite\Model\ContentMedia::getImagePath()

在第 544 行进行`ContentVersion.php`了调用：

```
$cm->getImagePath('img', 'small'); 
```

该类`ContentMedia`扩展了另一个`Model`确实具有该方法*的类：*

```
class ContentMedia extends \MyWebsite\Model{ 
```

......`Model`班级：

```
namespace MyWebsite;

class Model{

    public function getImagePath($field, $size = null){

        ...
    } 
```

我不时在日志文件中出现此错误，因此它可能是用户遇到此错误的一个特定实例，但我不知道在哪里。此方法在整个站点中都使用并且有效。如果方法是明确定义的，怎么会抛出这个错误？

我考虑过检查访问日志以将请求的 URL 与错误的时间戳相匹配，但是访问日志当然非常大，因此有关如何从大型访问日志中仅输出一段时间的任何建议都是惊人。

我正在使用 Doctrine 2 和 Codeigniter 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:25:28.530

我的第一个想法是检查脚本中是否确实存在模型实例。您是否尝试过创建另一个函数以进行测试，它只会回显“对象已正确实例化和继承函数”之类的内容。

这样我们也许可以缩小问题的范围

# solr - Solr 突出显示停用词

> ID：13327277
> 
> 赞同：4
> 
> 时间：2012-11-10T23:52:11.430
> 
> 标签：solr, highlighting, stop-words

schema.xml （与我的问题相关的部分）：

```
<field name="question" stored="true" type="text" multiValued="false" indexed="true"/>
<field name="question_highlight" stored="true" type="string" multiValued="false" indexed="true"/>
</fields>
<!-- AND -->
<copyField source="question" dest="question_highlight" /> 
```

**注意：**我为**fieldType: text启用了停用词**

当我索引文档时，当我尝试使用此查询进行搜索时，我现在传递问题字段

```
select?q=question:have fever&hl=true&hl.fl=question_highlight 
```

知道单词**have**包含在我的停用词列表中，单词**have**未在结果中突出显示我该如何解决这个问题？我需要突出显示停用词，我检查了这篇文章[Solr highlighting without stop-words for phrases?](https://stackoverflow.com/questions/4670807/solr-highlighting-without-stop-words-for-phrases) 这就是为什么我将**question_highlight**作为字符串但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:03:47.693

简单的解决方案是在高亮字段上使用 hl.q 参数，同时在具有 StopFilter 和 hl.q 的搜索字段上使用 q

# c# - 鼠标悬停时出现弹窗

> ID：13327278
> 
> 赞同：2
> 
> 时间：2012-11-10T23:52:13.363
> 
> 标签：c#, wpf, popup, togglebutton

我希望每次悬停切换按钮时都会出现一个弹出窗口。然后它需要保持打开状态，直到我单击应用程序中的其他位置。下面的代码在启动时可以正常工作，但是一旦我选中或取消选中切换按钮，弹出窗口就会拒绝出现。关于我做错了什么的任何想法？

WPF 代码

```
 <ToggleButton Name="btnLogFile" Style="{StaticResource StandardToggle}"
                      Grid.Row="1" Grid.Column="3" Margin="0,3,3,0" 
                      MouseEnter="btnLogFile_MouseEnter">
            <Path Margin="7" SnapsToDevicePixels="True" Stretch="Uniform"
                Stroke="{StaticResource TextLight}" StrokeThickness="2">
                <Path.Data>
                    <GeometryGroup FillRule="Nonzero">
                        <PathGeometry Figures="M 0 0 L 20 0 L 20 10 L 30 10 L 30 40 L 0 40 Z" />
                        <PathGeometry Figures="M 20 0 L 22 0 L 30 8 L 30 10" />
                    </GeometryGroup>
                </Path.Data>
            </Path>
        </ToggleButton>
        <Popup Name="popLogFile"
               PlacementTarget="{Binding ElementName=btnLogFile}" Placement="Custom"
               HorizontalOffset="0" VerticalOffset="0"
               MouseLeftButtonDown="popLogFile_MouseLeftButtonDown">
            <Border Background="{StaticResource BackgroundDark}" BorderBrush="{StaticResource TextBoxBorder}" BorderThickness="1"
                    Width="300" Height="Auto">
                <Grid Margin="3">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="3" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3" />
                        <ColumnDefinition Width="22" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="22" />
                    </Grid.RowDefinitions>

                    <TextBlock Margin="0,1" Grid.Row="0" Grid.Column="0" Foreground="{StaticResource TextLight}" HorizontalAlignment="Right">Directory</TextBlock>
                    <TextBox Name="logfilePath" Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="3"
                             Style="{StaticResource StandardTextBox}"
                             Foreground="{StaticResource TextLight}">
                        C:\logfile.txt
                    </TextBox><!-- Button made invisible for the time being -->
                    <Button Name="btnBrowseLogfile" Style="{StaticResource StandardButton}" Grid.Row="0" Grid.Column="4" Visibility="Collapsed">...</Button>

                </Grid>
            </Border>
        </Popup> 
```

以及切换按钮的鼠标事件：

```
 private void btnLogFile_MouseEnter(object sender, MouseEventArgs e)
    {
        this.popLogFile.IsOpen = true;
        this.popLogFile.StaysOpen = false;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:03:59.090

不要使用代码来操作 UIElement。`IsOpen`将 Popup 的属性绑定到切换按钮的`IsMouseOver`属性。或者，如果您需要多个或更复杂的条件，请将 a 设置`Style`为 Popup 并在您可以包含的样式中包含`Triggers`or `DataTriggers`。我建议你看看这个[WPF 教程](http://www.wpftutorial.net/)

编辑：

应该是这样的：

```
<DataTrigger Binding="{Binding IsChecked, ElementName=YourToggleButton}" Value="True">
   <Setter TargetName="ThePopup" Property="IsOpen" Value="True"/>
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:14:06.080

1）给ToggleButton添加事件触发器：

```
 <ToggleButton Name="btnLogFile" 
                  Style="{StaticResource StandardToggle}"
                  Grid.Row="1" Grid.Column="3" Margin="0,3,3,0" >
        <ToggleButton.Triggers>
            <EventTrigger RoutedEvent="MouseEnter">
                <BeginStoryboard>
                    <Storyboard TargetName="popLogFile" TargetProperty="IsOpen">
                        <BooleanAnimationUsingKeyFrames  FillBehavior="HoldEnd">
                            <DiscreteBooleanKeyFrame
                    KeyTime="00:00:00"
                    Value="True" />
                        </BooleanAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>

            <EventTrigger RoutedEvent="ToggleButton.Checked">
                <BeginStoryboard>
                    <Storyboard TargetName="popLogFile" TargetProperty="IsOpen">
                        <BooleanAnimationUsingKeyFrames  FillBehavior="HoldEnd">
                            <DiscreteBooleanKeyFrame
                    KeyTime="00:00:00"
                    Value="False" />
                        </BooleanAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>

            <EventTrigger RoutedEvent="ToggleButton.Unchecked">
                <BeginStoryboard>
                    <Storyboard TargetName="popLogFile" TargetProperty="IsOpen">
                        <BooleanAnimationUsingKeyFrames  FillBehavior="HoldEnd">
                            <DiscreteBooleanKeyFrame
                    KeyTime="00:00:00"
                    Value="False" />
                        </BooleanAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>

        </ToggleButton.Triggers>

        <Path Margin="7" SnapsToDevicePixels="True" Stretch="Uniform"
        ... 
```

2) 在 XAML 中设置 StaysOpen="False" ：

```
<Popup Name="popLogFile"
           PlacementTarget="{Binding ElementName=btnLogFile}" Placement="Custom"
           HorizontalOffset="0" VerticalOffset="0"
           StaysOpen="False"
           MouseLeftButtonDown="popLogFile_MouseLeftButtonDown"> 
```

3) 删除方法 btnLogFile_MouseEnter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T03:53:11.920

您可以将 Popup.IsOpen 和 ToggleButton.IsChecked 绑定到同一个 bool 属性。在此处查看演示代码。[http://bit.ly/L5jxFl](http://bit.ly/L5jxFl)

# python - 从 Python 文件创建 .dll

> ID：13327280
> 
> 赞同：1
> 
> 时间：2012-11-10T23:52:37.143
> 
> 标签：python, dll

> **可能重复：**
> [py2exe 生成 dll？](https://stackoverflow.com/questions/550446/py2exe-to-generate-dlls)

我正在寻找一种从 python 文件中制作 .dll 文件的方法。我还想知道我是否可以从另一种语言（如 C++ oder Assembler）中使用 dll 中的函数？我一直在研究 py2exe 和 pyapp，但它不提供对 dll 的移植。

我很抱歉这个问题。我感到很抱歉，因为我之前没有在 StackOverflow 上搜索类似的问题/可能的重复项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:02:42.273

您可以使用 clr 将多个 python 脚本编译成一个程序集。

```
import clr
clr.CompileModules("modules.dll", "module.py", "module2.py") 
```

这是 IronPython，但在我看来，从其他语言（例如 C++ 或 C#）引用这些模块 IronPython 会更好，因为它作为 .NET 解释器运行，可以被其他实现 .NET 的语言理解

要从另一个 IronPython 脚本引用已编译的 dll，例如：

```
import clr
clr.AddReference("modules.dll") 
```

# vim - 在插入模式下使用 vim 文件名完成遍历目录 (Ctrl-X Ctrl-F)

> ID：13327285
> 
> 赞同：7
> 
> 时间：2012-11-10T23:54:15.830
> 
> 标签：vim, autocomplete, keyboard-shortcuts

我正在尝试使用 vim 的`compl-filename`功能 ( `Ctrl-X``Ctrl-F`) 在`INSERT`模式下完成路径，但我无法弄清楚如何在不（暂时）结束完成模式的情况下遍历目录：

假设我想完成路径`/etc/sysconfig/network-scripts/ifup`。

我希望能够做类似的事情：

```
/eCtrl-XCtrl-F
/e tc/ 
/etc/ sysCtrl-F
/etc/sys config/ 
/etc/sysconfig/ netCtrl-F
/etc/sysconfig/net控制台Ctrl-N
/etc/sysconfig/net workCtrl-N 
/etc/sysconfig/net work-scripts/ 
/etc/sysconfig/network-scripts /ifupCtrl-Y
/etc/sysconfig/network-scripts/ifup

```

**问题是，一旦我在路径匹配（如`/etc/`）后开始输入*，它就会结束文件名完成**。我希望它保留在文件名完成中，这样我仍然可以使用`Ctrl-F`,`Ctrl-N`等。由于它结束了完成，我必须`Ctrl-X``Ctrl-F`再次键入才能重新启动它，同时有用的完成弹出菜单消失了。

我可以设置一个选项来改变它吗？

*****这里的“输入”指的是字符`'isfname'`——当然，输入其他字符（如空格或标点符号）不应继续完成文件名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:28:54.647

我不确定您在说什么，但是您可以`Ctrl-X``Ctrl-F`在完成菜单中再次按目录以展开它。您不必先关闭菜单。我只是`Ctrl`按住并点击`xf`以遍历目录，`n`上下`p`移动并`w`返回。

如果你不使用`:h i_CTRL-F`，那么你可以重新映射它。例如，

```
inoremap <C-f> <C-x><C-f> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-21T08:09:47.917

简单的重新映射将是

```
inoremap / /<C-x><C-f> 
```

因此，当您在插入模式下键入斜杠（/）时，您将获得自动完成弹出窗口:)

将它放在你的 .vimrc 文件（对于 vim）或 init.vim（对于 neovim）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:35:56.710

Vim 不做**自动**补全。

为此，您需要像[AutoComplPop](http://www.vim.org/scripts/script.php?script_id=1879)或[NeoComplCache这样的专用插件](http://www.vim.org/scripts/script.php?script_id=2620)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T12:04:55.583

请在使用 cntr+x+f 之前先插入“i”。我也有类似的情况。:)

# excel - 在代码执行期间保留剪贴板内容

> ID：13327286
> 
> 赞同：2
> 
> 时间：2012-11-10T23:54:19.527
> 
> 标签：excel, clipboard, vba

这似乎应该是一个简单的问题，但我一直无法解决它。我有一个我正在编写的程序，用户可以通过以下步骤获得婴儿：

**第 1 步：**转到另一个电子表格并复制内容
**第 2 步：**返回我的电子表格并按下按钮粘贴该内容

当他们按下我的按钮时，它需要解锁当前工作表并粘贴没有任何格式的数据。这就是我所拥有的：

```
ActiveWorkbook.ActiveSheet.Unprotect
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteValues, _
                       Operation:=xlNone, _
                       SkipBlanks:=False, _
                       Transpose:=False 
```

因此，如果我不执行“取消保护”行，它会完美运行，但我试图阻止人们在不使用我的按钮的情况下粘贴数据。

我知道这个问题与我取消保护工作表时剪贴板内容丢失有关，但我用来保留该内容的方法不起作用，即：

*   Lib User32 - OpenClipboard 和 CloseClipboard
*   DataObject - GetFromClipboard、PutInClipboard

奇怪的是，如果我调试 VBA 并逐行执行，它会完美运行？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:49:56.600

好的，我已经解决了（但有人可能有更好的解决方案）。我相信问题在于，当我使用 DataObject 方法来保留剪贴板内容时，它会剥离格式，因此它不能 PasteSpecial，这对我来说实际上很好，因为无论如何我只关注数据！考虑到这一点，这似乎可行：

```
Dim dClipBoard As MsForms.DataObject
Dim sClipBoard As String
Set dClipBoard = New MsForms.DataObject
dClipBoard.GetFromClipboard
sClipBoard = dClipBoard.GetText
ActiveWorkbook.ActiveSheet.Unprotect
Set dClipBoard = New MsForms.DataObject
dClipBoard.SetText sClipBoard
dClipBoard.PutInClipboard
Range("A1").Select
ActiveSheet.Paste 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:55:01.877

这并不能直接解决您的问题，但是......为什么不避免复制和粘贴呢？

如果您只是粘贴值，则不需要复制。当您执行第 1 步时。“转到另一个电子表格并复制内容”而不是复制，您可以将值存储到数组中。当您想“粘贴”这些值时，只需将数组放回`ActiveSheet`.

既然我已经说过了，下面是示例代码：

```
Private myArray
Sub fakecopy()
    myArray = Selection
End Sub
Sub FakePaste()
    With ActiveSheet
        If IsArray(myArray) Then
            .Range(.Cells(1, 1), .Cells(UBound(myArray), UBound(myArray, 2))) = myArray
        Else
            .Cells(1, 1) = myArray
        End If
    End With
End Sub 
```

当您要粘贴值时，只需将适当的范围设置为等于数组即可。

此外，如果当您保护您设置的工作表时`UserInterfaceOnly = true`，则无需取消保护它即可运行您的代码。

# r - 导致 rlm() 错误的无效字符

> ID：13327287
> 
> 赞同：1
> 
> 时间：2012-11-10T23:54:26.497
> 
> 标签：r, invalid-characters

列名中包含无效字符的数据框导致 rlm() 出错。

深入研究一下，在 rlm() 中，该变量似乎`xvars`包含公式的解释变量的名称，但它在有问题的名称周围加上了反引号。然后当 xvars 用作数据框的索引时，即`mf[xvars]`会导致以下错误：

```
Error in `[.data.frame`(mf, xvars) : undefined columns selected 
```

这是预期的行为吗？（我意识到关键字词组*无效*字符）。奇怪的是，在同一模型和数据帧上调用 lm() 不会导致任何问题。

```
# SAMPLE DATA
mydf <- data.frame(matrix(rnorm(36),ncol=6))
colnames(mydf) <- c("y", "x1", "x2", "x1^2", "x2^2", "x1:x2")

rlm(y~., data=mydf)  # Error

lm(y~., data=mydf)   # No Problem

# Clean up column names
colnames(mydf) <- make.names(colnames(mydf))
rlm(y~., data=mydf) # No Problem 
```

看一下`MASS:::rlm.formula`，似乎错误是
由`mf[xvars]`以下几行引起的：

```
xlev <- if (length(xvars) > 0L) {
    xlev <- lapply(mf[xvars], levels)
    xlev[!sapply(xlev, is.null)]
} 
```

有什么想法为什么要添加反引号但随后会导致错误？

* * *

附加信息

我复制了 rlm() 函数，添加了`dput(mf)`&`dput(xvars)`并得到了以下值。*请注意，xvars 的值与上面指定的名称不同（即添加了反引号）。此外，mf 的名称与上面给出的名称相同。*

```
# dput yielded
mf <- structure(list(y = c(-0.242914027018629, 0.724255425682537, -0.0578467214604185, -0.274193999595702, -0.38985000750839, 0.406046200943395), x1 = c(1.53071709960635, -1.87493297716611, 1.0936519723035, -0.977011182431237, -0.510890461021046, 1.20136627562427), x2 = c(-0.801995963036553, 1.30590232081605, 0.635922235436178, -1.86824341731708, -2.76797814532917, -0.497992681627495), `x1^2` = c(0.914146279518207, 0.103458073891876, -1.29818230391818, -0.629048606358592, 1.71534374557621, 0.922690967521984), `x2^2` = c(-0.0879726513660469, 1.05299413769867, 1.01955640371072, 0.546413685721721, 0.947757793667223, -0.0998700630220064), `x1:x2` = c(-0.757490494166813, 1.31307393014016, 1.90233916482184, 0.68844011701049, -1.28717997826724, -0.581800325341162)), .Names = c("y", "x1", "x2", "x1^2", "x2^2", "x1:x2"), terms = y ~     x1 + x2 + `x1^2` + `x2^2` + `x1:x2`, row.names = c(NA, 6L), class = "data.frame")
xvars <- c("x1", "x2", "`x1^2`", "`x2^2`", "`x1:x2`")

mf[xvars]  
# Error in `[.data.frame`(mf, xvars) : undefined columns selected

# Removing the backticks from xvars eliminates the error.
xvars <- sapply(xvars, function(x) gsub("`", "", x))
mf[xvars2]  # No Error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:54:38.693

您的问题归结为您使用的是非语法变量名称。

这些应该谨慎使用，不要期望包作者能够预测可能出现的任何问题。

从帮助中引用`formula`

> 变量名可以`like this`在公式中用反引号引用，但不能保证所有使用公式的代码都接受这种非语法名称。

如何`xvars`创建的问题`rlm.formula`

```
xvars <- as.character(attr(mt, "variables"))[-1L] 
```

然后稍后使用

```
xlev <- if (length(xvars) > 0L) {
        xlev <- lapply(mf[xvars], levels)
        xlev[!sapply(xlev, is.null)]
    } 
```

正如你所展示的，这不起作用

这将为非语法名称创建带引号的反引号变量。如果它们已经被反引号，那么他们将创建双反引号名称

即，如果列名是`"x1^2"`，则其中的元素`xvar`变为`"`x1^2`"`。

`[.data.frame`例如，这失败了

```
x <- data.frame(`a` = 1)
> x[,'`a`']

Error in `[.data.frame`(x, , "`a`") : undefined columns selected 
```

因为列名`'a'`不是``a``

如果你反引号列名

即，如果列名是`"`x1^2`"`，则其中的元素`xvar`变为`"``x1^2``"`。

这又不是您的 data.frame 中的列

起作用的原因`lm`是它没有尝试定义和使用`xvars`，而是直接`model.matrix`定义设计矩阵`x`以传递给`lm.fit`

如果你想拟合模型，`y ~ x1 + x2 + x1:x2 +x1^2 + y1^2`那么你可以使用

```
rlm(y ~ x1*x2 + I(x1^2) + I(x2^2) 
```

在这种情况下，您只需要 data.frame 中的三列（或评估环境中的对象`y`）`x1`和`x2`. as`I()`函数允许对变量执行算术运算，as`I`被解析为符号 `terms.formula`

# oracle - 按当月分组并显示结果

> ID：13327295
> 
> 赞同：0
> 
> 时间：2012-11-10T23:56:01.597
> 
> 标签：oracle, plsql

我有一张如下表

```
Reading (ReadingNo Int, Readdate Date, ReaderID Int) 
```

我需要显示每个读者在当月阅读的阅读次数的结果。

我尝试了以下内容：

```
Select Count(*), to_char(Trunc(ReadDate,'mm'),'Month') Month
From Reading
Group By trunc (ReadDate,'mm'); 
```

结果 = 每个月完成的阅读次数和

```
Select COUNT(*), ReaderID
From Reading
Group By ReaderID; 
```

结果 = 读者阅读的次数

但是，我需要可以嵌套此 2 语句的查询，以便为我提供每个读者在当月完成的阅读次数的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:59:39.783

它应该很简单：

```
Select Count(*), ReaderID, to_char(Trunc(ReadDate,'mm'),'Month') Month
From Reading
Group By  ReaderID, trunc (ReadDate,'mm'); 
```

结果 = 读者每月阅读的次数

或者，如果您想要针对特定​​读者的过滤器，并且只是当前月份，您可以使用

```
Select Count(*)
From Reading
Where ReaderID = READER's CODE
AND Trunc(ReadDate,'mm') = Trunc(Sysdate,'mm') 
```

结果 = ONE Reader 本月阅读的次数

# android - 如何防止像 YouTube 这样的特定应用程序启动？

> ID：13327304
> 
> 赞同：2
> 
> 时间：2012-11-10T23:57:49.673
> 
> 标签：android

基本上我想阻止特定的应用程序启动。另一个问题可能与从单击应用程序按钮到应用程序运行的 Android 内部行为有关。帮助澄清每个内部步骤将不胜感激。

详细地说：当用户点击屏幕上的“YouTube”按钮时（假设 YouTube 到目前为止还没有启动），谁首先知道这个特定的点击是 YouTube？另外，我认为最终 Zygote 会产生一个代表 YouTube 的新进程，这个进程将写入内核的进程表中。我应该让 Zygote 知道这是一个用户不应该启动的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:42:19.827

如果用户默认通过单击应用程序图标来启动应用程序，您将无法拦截它。

如果您制作了自己的启动器应用程序，该启动器应用程序拥有手机上所有应用程序的快捷方式，您也许可以做一些事情。这将是我对可能的解决方法的最佳建议。

# r - 使 Rcout 输出立即出现在 R 控制台上

> ID：13327305
> 
> 赞同：5
> 
> 时间：2012-11-10T23:58:09.063
> 
> 标签：r, flush, rcpp

我已经使用`Rcpp`（特别是`RcppArmadillo`）编写了一个 MCMC 采样器。我希望我的采样器将定期状态消息打印到 R 控制台，但是当采样器终止时，这些消息会立即出现。输出语句是：

```
Rcout << "Progress => " 
      << double(iterations) / double(maxit) * 100 
      << "%" 
      << std::endl; 
```

可以扩充此代码，使其输出立即出现在 R 控制台上吗？

R版本：2.14.1

平台：达尔文9.8.0

rcpp 版本：0.9.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:32:13.780

此行为已在`Rcpp`0.10.0（即将发布）中实施，遵循[对此问题的答案的](https://stackoverflow.com/questions/13329812/custom-flush-implementation)建议。

同时，您可以手动调用[`R_FlushConsole`](http://cran.r-project.org/doc/manuals/R-exts.html#Embedding-R-under-Unix_002dalikes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T11:17:35.820

flush() 和 flush.console() 仍然损坏。R 3.0.2 / OSX

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T16:52:53.757

你需要一个帽子戏法：

```
R_FlushConsole();
R_ProcessEvents();
R_CheckUserInterrupt(); 
```

复制自：[parallel-computing-in-r-with-c-within-r-functions](https://stackoverflow.com/questions/23020228)

# java - android.content.res.Resources$NotFoundException: 来自 xml 类型布局资源 ID #0x1020014 的文件

> ID：13327308
> 
> 赞同：2
> 
> 时间：2012-11-10T23:58:47.470
> 
> 标签：java, android, android-layout, listactivity, android-resources

我正在尝试在 ListActivity 中使用 ArrayAdapter：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.id.text1, new String[] { "a", "b"});
setListAdapter(adapter); 
```

这是布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@id/android:text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="false"
        android:layout_below="@id/android:text1" >

    </ListView>

</RelativeLayout> 
```

我在 StackOverflow 上找到的解决方案似乎都不起作用。我正在使用 API 10。你能帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T00:09:20.813

您使用了错误类型的资源，您需要引用`R.layout`not `R.id`。尝试`android.R.layout.simple_list_item_1`：

```
new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, new String[] { "a", "b"}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:45:37.540

为 ListView 的行定义布局，并调用它，例如（在文件夹中`simple_list_item_1`创建文件）。把你的进入这个布局： `simple_list_item_1.xml``res/layout``TextView`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@id/android:text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10" />
</RelativeLayout> 
```

然后像这样创建您的 ArrayAdapter：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.simple_list_item_1, R.id.text1, new String[] { "a", "b"}); 
```

[在这里](http://www.vogella.com/articles/AndroidListView/article.html#listactivity_overview)，您将找到有关列表和适配器的详细说明。

# .net - 使用鼠标在图片框图像上绘制 vb.net

> ID：13327311
> 
> 赞同：2
> 
> 时间：2012-11-10T23:59:34.710
> 
> 标签：.net, vb.net, mouse, draw, picturebox

如何在 vb.net 中使用鼠标在图片框图像上绘制线条或画笔？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:12:36.020

[使用一行测试和工作，将类似的问题](https://stackoverflow.com/questions/1537090/how-to-draw-drawings-in-picture-box)从 C#转换为 VB.NET：

```
Private _Previous As System.Nullable(Of Point) = Nothing
Private Sub pictureBox1_MouseDown(sender As Object, e As MouseEventArgs) Handles PictureBox1.MouseDown
  _Previous = e.Location
  pictureBox1_MouseMove(sender, e)
End Sub

Private Sub pictureBox1_MouseMove(sender As Object, e As MouseEventArgs) Handles PictureBox1.MouseMove
  If _Previous IsNot Nothing Then
    If PictureBox1.Image Is Nothing Then
      Dim bmp As New Bitmap(PictureBox1.Width, PictureBox1.Height)
      Using g As Graphics = Graphics.FromImage(bmp)
        g.Clear(Color.White)
      End Using
      PictureBox1.Image = bmp
    End If
    Using g As Graphics = Graphics.FromImage(PictureBox1.Image)
      g.DrawLine(Pens.Black, _Previous.Value, e.Location)
    End Using
    PictureBox1.Invalidate()
    _Previous = e.Location
  End If
End Sub

Private Sub pictureBox1_MouseUp(sender As Object, e As MouseEventArgs) Handles PictureBox1.MouseUp
  _Previous = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:38:54.500

我已经修改了您的代码以放置一个“点”，可以在鼠标单击时移动（覆盖）

我需要的是这个用于多个“点”，比如四个。

用户从列表中选择一个标记，并将其放在图片框上，然后他们选择另一个并放置在不同的位置，但是它会覆盖以前的标记。

```
Marker = Lst_Markers.SelectedIndex + 1
If _Previous IsNot Nothing Then
  For i As Integer = 0 To Marker
    Dim bmp As New Bitmap(PictureBox1.Width, PictureBox1.Height)
    PictureBox1.Image = bmp
  Next
  Select Case Marker
    Case 1
      'PictureBox1.Image = bmp1
      Using g As Graphics = Graphics.FromImage(PictureBox1.Image)
        g.FillEllipse(Brushes.Red, e.X, e.Y, 10, 10)
      End Using
    Case 2
      'PictureBox1.Image = bmp2
      Using g As Graphics = Graphics.FromImage(PictureBox1.Image)
        g.FillEllipse(Brushes.Yellow, e.X, e.Y, 10, 10)
      End Using
    Case 3
      'PictureBox1.Image = bmp3
      Using g As Graphics = Graphics.FromImage(PictureBox1.Image)
        g.FillEllipse(Brushes.Green, e.X, e.Y, 10, 10)
      End Using
    Case 4
      'PictureBox1.Image = bmp4
      Using g As Graphics = Graphics.FromImage(PictureBox1.Image)
        g.FillEllipse(Brushes.Blue, e.X, e.Y, 10, 10)
      End Using
    Case Else
      MsgBox("Select a marker")
  End Select
  PictureBox1.Invalidate()
  _Previous = e.Location
End If 
```

# c++ - Qt - MDI Child没有正确关闭

> ID：13327318
> 
> 赞同：2
> 
> 时间：2012-11-11T00:01:14.630
> 
> 标签：c++, qt, window

我正在尝试关闭一个 MDI 子级（MainWindow 是它的父级），但我无法实现它。正在发生的一切是所有控件都从 MDI 子项中删除，但实际窗口并未从“mdiArea”中删除。

使用我的 QDialog（MDI 子项），我调用 close。那没有用，所以除了调用 close 之外，我还尝试调用：

```
ui->mdiArea->removeSubWindow(mdiChildDialog); 
```

同样，结果相同： ![在此处输入图像描述](../Images/7544fda635cb6b382e2fd7d9d01c82ff.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:40:09.447

试试... this->parentWidget()->close(); 关闭子 mdi。

# r - R中的R图像功能

> ID：13327326
> 
> 赞同：6
> 
> 时间：2012-11-11T00:03:21.570
> 
> 标签：r, image, matrix, colors, plot

我在 R 中使用附加的图像函数。我更喜欢将其用作与热图相反的速度，因为我将它用于巨大的矩阵（~ 400000 x 400）。

我的函数中的问题是调色板的动态范围，在我的例子中它只有蓝色和黄色。我已经尝试了对 colorramp 线的几处更改，但没有一个给我想要的输出。

我尝试的最后一个颜色渐变选项是在 R 中使用一个名为[ColorRamps](https://i.stack.imgur.com/K2D4k.png)的不错的包，它给出了合理的结果是：

```
library("colorRamps")
ColorRamp = blue2green2red(400)
ColorLevels <- seq(min, max, length=length(ColorRamp)) 
```

但是，仍然不如 matlab 颜色渐变选项灵活。

我不太熟悉如何让它看起来更好，范围更广，比如附图中。![在此处输入图像描述](../Images/cccbdf3877ce6bcac2bbe26e15d7c3ab.png)

请告知我是否可以更改我的图像功能以使我的图像看起来像照片中的图像。

我用于绘制图像的 R 函数（速度为 raster = TRUE）如下：

```
# ----- Define a function for plotting a matrix ----- #
myImagePlot <- function(x, filename, ...){
  dev = "pdf"
  #filename = '/home/unix/dfernand/test.pdf'
  if(dev == "pdf") { pdf(filename, version = "1.4") } else{}
     min <- min(x)
     max <- max(x)
     yLabels <- rownames(x)
     xLabels <- colnames(x)
     title <-c()
  # check for additional function arguments
  if( length(list(...)) ){
    Lst <- list(...)
    if( !is.null(Lst$zlim) ){
       min <- Lst$zlim[1]
       max <- Lst$zlim[2]
    }
    if( !is.null(Lst$yLabels) ){
       yLabels <- c(Lst$yLabels)
    }
    if( !is.null(Lst$xLabels) ){
       xLabels <- c(Lst$xLabels)
    }
    if( !is.null(Lst$title) ){
       title <- Lst$title
    }
  }
# check for null values
if( is.null(xLabels) ){
   xLabels <- c(1:ncol(x))
}
if( is.null(yLabels) ){
   yLabels <- c(1:nrow(x))
}

layout(matrix(data=c(1,2), nrow=1, ncol=2), widths=c(4,1), heights=c(1,1))

 # Red and green range from 0 to 1 while Blue ranges from 1 to 0
 ColorRamp <- rgb( seq(0,1,length=256),  # Red
                   seq(0,1,length=256),  # Green
                   seq(1,0,length=256))  # Blue
 ColorLevels <- seq(min, max, length=length(ColorRamp))

 # Reverse Y axis
 reverse <- nrow(x) : 1
 yLabels <- yLabels[reverse]
 x <- x[reverse,]

 # Data Map
 par(mar = c(3,5,2.5,2))
 image(1:length(xLabels), 1:length(yLabels), t(x), col=ColorRamp, xlab="",
 ylab="", axes=FALSE, zlim=c(min,max), useRaster=TRUE)
 if( !is.null(title) ){
    title(main=title)
 }
# Here we define the axis, left of the plot, clustering trees....
#axis(BELOW<-1, at=1:length(xLabels), labels=xLabels, cex.axis=0.7)
# axis(LEFT <-2, at=1:length(yLabels), labels=yLabels, las= HORIZONTAL<-1,
# cex.axis=0.7)

 # Color Scale (right side of the image plot)
 par(mar = c(3,2.5,2.5,2))
 image(1, ColorLevels,
      matrix(data=ColorLevels, ncol=length(ColorLevels),nrow=1),
      col=ColorRamp,
      xlab="",ylab="",
      xaxt="n", useRaster=TRUE)

 layout(1)
  if( dev == "pdf") {
    dev.off() }
}
# ----- END plot function ----- # 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T07:37:00.363

您可以在 中定义偏差`colorRampPalette`。我还调整了函数来定义颜色之间的步数`color.palette`：

```
#This is a wrapper function for colorRampPalette. It allows for the
#definition of the number of intermediate colors between the main colors.
#Using this option one can stretch out colors that should predominate
#the palette spectrum. Additional arguments of colorRampPalette can also
#be added regarding the type and bias of the subsequent interpolation.
color.palette <- function(steps, n.steps.between=NULL, ...){

 if(is.null(n.steps.between)) n.steps.between <- rep(0, (length(steps)-1))
 if(length(n.steps.between) != length(steps)-1) stop("Must have one less n.steps.between value than steps")

 fill.steps <- cumsum(rep(1, length(steps))+c(0,n.steps.between))
 RGB <- matrix(NA, nrow=3, ncol=fill.steps[length(fill.steps)])
 RGB[,fill.steps] <- col2rgb(steps)

 for(i in which(n.steps.between>0)){
  col.start=RGB[,fill.steps[i]]
  col.end=RGB[,fill.steps[i+1]]
  for(j in seq(3)){
   vals <- seq(col.start[j], col.end[j], length.out=n.steps.between[i]+2)[2:(2+n.steps.between[i]-1)]  
   RGB[j,(fill.steps[i]+1):(fill.steps[i+1]-1)] <- vals
  }
 }

     new.steps <- rgb(RGB[1,], RGB[2,], RGB[3,], maxColorValue = 255)
 pal <- colorRampPalette(new.steps, ...)
 return(pal)
} 
```

这是两者的示例（我已经压缩了青色和黄色之间的步数）：

```
Z <- t(as.matrix(1:100))

pal.1 <- colorRampPalette(c("blue", "cyan", "yellow", "red"), bias=1)
pal.2 <- colorRampPalette(c("blue", "cyan", "yellow", "red"), bias=3)
pal.3 <- color.palette(c("blue", "cyan", "yellow", "red"), n.steps.between=c(10,1,10))

    x11()
par(mfcol=c(1,3))
image(Z, col=pal.1(100))
image(Z, col=pal.2(100))
image(Z, col=pal.3(100)) 
```

![在此处输入图像描述](../Images/fe9849c780975063e3bd4bc7cf4b6b71.png)

另外，如果您有兴趣，[我编写了一个](http://menugget.blogspot.de/2011/08/adding-scale-to-image-plot.html)绘制色标并使用与`image`. 如果您正确设置绘图布局，这也是绘制矩阵和相应色标的快速方法。

# apache - Mod Rewrite：链接被重写但未找到

> ID：13327328
> 
> 赞同：0
> 
> 时间：2012-11-11T00:03:41.597
> 
> 标签：apache, .htaccess, url, mod-rewrite, typo3

我正在尝试在 WAMP 系统上使用 TYPO3，但我遇到了重写 URL 的问题。我已经安装了具有“入门”网站的介绍包。每次我尝试通过以下之一访问网站时：localhost/typo3 localhost/typo3/index.php localhost/typo3/index.php/get-started

url 变成 localhost/typo3/get-started

没关系，这意味着 mod_rewrite 已打开并正在工作。问题是我看不到站点 localhost/typo3/get-started，而我有一个“找不到对象”页面。

我在使用 Symfony 1.4 的同一台机器上遇到了同样的问题，但我从不关心这个问题，因为在 Symfony 上我可以使用 frontend_dev.php 页面访问该站点（在我的生产环境中，重写 URL 可以正常工作）。

这是 TYPO3 目录的 httpd.conf 条目：

```
Alias /typo3 "C:\workspace\typo3"
<Directory "C:\workspace\typo3">
Options Indexes FollowSymLinks MultiViews
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

这是 .htaccess 文件（已经在 TYPO3 包中，我没有修改），我已经删除了不相关的部分

```
### Begin: Settings for mod_rewrite ###

# You need rewriting, if you use a URL-Rewriting extension (RealURL, CoolUri, SimulateStatic).

<IfModule mod_rewrite.c>

# Enable URL rewriting
RewriteEngine On

# Change this path, if your TYPO3 installation is located in a subdirectory of the website root.
#RewriteBase /

# Rule for versioned static files, configured through:
# - $TYPO3_CONF_VARS['BE']['versionNumberInFilename']
# - $TYPO3_CONF_VARS['FE']['versionNumberInFilename']
# IMPORTANT: This rule has to be the very first RewriteCond in order to work!
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]

# Stop rewrite processing, if we are in the typo3/ directory.
# For httpd.conf, use this line instead of the next one:
# RewriteRule ^/TYPO3root/(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]
RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]

# Redirect http://example.com/typo3 to http://example.com/typo3/index_re.php and stop the rewrite processing.
# For httpd.conf, use this line instead of the next one:
# RewriteRule ^/TYPO3root/typo3$ /TYPO3root/typo3/index.php [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

# If the file/symlink/directory does not exist => Redirect to index.php.
# For httpd.conf, you need to prefix each '%{REQUEST_FILENAME}' with '%{DOCUMENT_ROOT}'.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

# Main URL rewriting.
# For httpd.conf, use this line instead of the next one:
# RewriteRule .* /TYPO3root/index.php [L]
RewriteRule .* index.php [L]

</IfModule>

### End: Settings for mod_rewrite ### 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:02:44.917

解决了，问题出在easyphp设置上，因为我没有使用它的DocumentRoot（而只是使用别名），将DocumentRoot更改为我保留项目的那个就解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:31:32.540

您应该按照文件中的说明更改`#RewriteBase /`为。`RewriteBase /typo3/``.htaccess`

# objective-c - 更改 UIImageView 的前端位置

> ID：13327330
> 
> 赞同：0
> 
> 时间：2012-11-11T00:03:55.040
> 
> 标签：objective-c, ios, xcode

我想放置在按钮单击时显示的 UIImageView。如果我把它放在 Storyboard 的最后一个地方，那效果很好。当我以编程方式执行一些动画时会出现问题，然后我单击按钮以显示 UIImageView 并且它不在屏幕的前面位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:06:47.343

你可以使用`bringSubviewToFront:`方法。像这样的东西：

```
[self.view bringSubviewToFront:imageView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T00:07:04.473

如果您要添加和删除子视图，则视图的顺序可能会发生变化。

一种解决方案是将视图保留在原处，仅修改`hidden`属性或`alpha`.

另一种解决方案是使用`insertSubviewAtIndex:`而不是`addSubview:`.

此外，您还可以使用`bringSubviewToFront:`只是为了确保。

# c - 应用程序在虚拟机中运行得更快？

> ID：13327336
> 
> 赞同：5
> 
> 时间：2012-11-11T00:05:14.740
> 
> 标签：c, linux, virtualization

我正在调整一些服务器代码以获得最佳性能，但我得到了一些奇怪的结果。服务器在虚拟机中的运行似乎比在本地运行时更快。两种设置都使用相同的硬件。

服务器是为 Linux 编写的，测试客户端是 100% 标准 POSIX。这两个应用程序都是用 C 编写的。

**设置 1：（~300k 请求/秒）**

*   OSX 10.7.4 主机
*   在 VirtualBox 中虚拟化的 Ubuntu Linux 12.04 服务器
*   VirtualBox 已设置为使用高达 100% 的主机资源
*   VirtualBox处于桥接网络模式，Ubuntu在网络上获得自己的IP
*   测试在 OSX 上运行的客户端程序

**设置 2：（~100k 请求/秒）**

*   Ubuntu Linux 12.04 服务器主机操作系统
*   测试器和服务器本地运行，通过 localhost 连接

测试器通过产生 256 个线程来工作，这些线程都独立地连接到服务器并发送命令。服务器在管道中处理请求，只产生与可用内核数相等的线程数。

**以下是我到目前为止提出的可能性：**

*   OSX 调度程序在处理来自测试程序的 256 个线程时效率更高
*   Virtualbox的网络接口比linux的loopback接口效率更高
*   虚拟化服务器允许调度程序更有效地在测试人员和服务器之间分配时间

我需要弄清楚是什么导致了速度变慢，以及我能做些什么来解决这个问题。

编辑以获取更多信息：

*   我无权访问任何其他计算机来运行测试仪
*   服务器类似于memcached，它不访问磁盘
*   4 核 i7 - 8GB RAM（对于测试仪和服务器来说足够多的 RAM（即使在 VM 中））

# php - 狮身人面像结果的顺序始终是升序的

> ID：13327340
> 
> 赞同：1
> 
> 时间：2012-11-11T00:06:05.240
> 
> 标签：php, search, sphinx

不知何故，无论查询是什么，Sphinx 总是以升序（按主 ID 排序）返回结果。假设我在这 5 个文档中搜索“foo”：

1.  `foo bar`
2.  `foo foo foo foo`
3.  `ja la la`
4.  `foo foo foo foo foo`
5.  `foo foo foo`

这将返回匹配项：1、2、4、5，其中 1 是最相关的。至少，这是 var_dump 在 PHP 中向我展示的。但是，我希望真正的顺序是：4、2、5、1。我应该如何解决这个问题？我正在使用以下设置：

```
$sphinx->SetMatchMode(SPH_MATCH_ALL);
$sphinx->SetRankingMode(SPH_RANK_PROXIMITY_BM25);
$sphinx->SetSortMode(SPH_SORT_RELEVANCE); 
```

正在搜索以下来源：

```
source pages
{
      type = mysql
      sql_query = SELECT text_id, book_id, content, page_number FROM text
      sql_attr_uint = page_number
      sql_attr_uint = book_id
      sql_query_pre = SET SESSION group_concat_max_len = 4294967295
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:15:18.520

尝试使用带有 SPH_RANK_WORDCOUNT 的 SPH_MATCH_EXTENDED2 匹配模式

# wpf - 在自定义 WPF 窗口中包含故事板动画

> ID：13327342
> 
> 赞同：1
> 
> 时间：2012-11-11T00:06:17.580
> 
> 标签：wpf, vb.net, animation, window, storyboard

好的，这是我的问题。我有一个带有自定义阴影的自定义窗口，以及两个平移变换动画。最终结果有点像 Window 8 Metro Screen。IE 一个窗口，其中有几个从左到右滑动的全窗口用户控件，反之亦然。现在的问题是我不知道如何包含动画，以便它们不会覆盖我拥有的自定义窗口阴影。

这是问题的屏幕截图： ![在过渡期间 - 我想停止在阴影上显示动画](../Images/e29fd8dcb410404f448450f000fcc960.png)

这是过渡后的窗口： ![过渡后](../Images/4cca4970540579a4321ba4ea9814d1ee.png)

这是我的窗口的 XAML：

```
<Window x:Name="PrimaryWindow"
 x:Class="MainWindow"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:local="clr-namespace:Metro_Test"
 Title="MainWindow"
 Height="800"
 Width="1280"
 IsTabStop="False"
 AllowsTransparency="True"
 Background="Transparent"
 BorderBrush="#FF3F3F3F"
 SnapsToDevicePixels="True"
 TextOptions.TextFormattingMode="Display"
 TextOptions.TextRenderingMode="ClearType"
 WindowStyle="None"
 WindowStartupLocation="CenterScreen" AllowDrop="True" ResizeMode="CanResizeWithGrip">

<Window.Resources>
    <local:ValueConverter x:Key="NegativeConverter"/>
    <Style x:Key="NoChromeButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                            <Setter Property="Opacity" TargetName="Chrome" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Image x:Key="WhiteClose" Source="Images\White\Close.png" Height="24" Width="24"/>
    <Image x:Key="WhiteAdd" Source="Images\White\Add.png" Height="24" Width="24"/>
    <Image x:Key="WhiteMinus" Source="Images\White\Minus.png" Height="24" Width="24"/>
    <Image x:Key="GrayClose" Source="Images\Gray\Close.png" Height="24" Width="24"/>
    <Image x:Key="GrayAdd" Source="Images\Gray\Add.png" Height="24" Width="24"/>
    <Image x:Key="GrayMinus" Source="Images\Gray\Minus.png" Height="24" Width="24"/>
    <XmlDataProvider x:Key="PageViews">
        <x:XData>
            <Views xmlns="">
                <View Title="View1">
                    <Page Source="MainPage.xaml"/>
                </View>
                <View Title="View2">
                    <Page Source="AddReferencePage.xaml"/>
                </View>
                <View Title="View3">
                    <Page Source="ReferenceManagementPage.xaml"/>
                </View>
            </Views>
        </x:XData>
    </XmlDataProvider>

    <Storyboard x:Key="SlideLeftToRight"  
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="{Binding Width, ElementName=PrimaryWindow}" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="{Binding Width, ElementName=PrimaryWindow, Converter={StaticResource NegativeConverter}}"/>
    </Storyboard>

    <Storyboard x:Key="SlideRightToLeft" 
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="{Binding Width, ElementName=PrimaryWindow, Converter={StaticResource NegativeConverter}}" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="{Binding Width, ElementName=PrimaryWindow}"/>
    </Storyboard>

    <VisualBrush x:Key="VisualBrush1" Visual="{Binding ElementName=PageViewer}"/>

</Window.Resources>

<Border
    x:Name="m_edgeBorder"
    Margin="14"
    Background="White">

    <Border.Effect>
        <DropShadowEffect
        Opacity="0.999"
        BlurRadius="14"
        ShadowDepth="0"/>
    </Border.Effect>

    <Grid x:Name="MainGrid">

        <Rectangle
            x:Name="TitleBar"
            Height="28"
            Fill="Blue"
            VerticalAlignment="Top"
            AllowDrop="False"
            PreviewMouseLeftButtonDown="FormMouseDown"
            PreviewMouseMove="FormMouseMove"/>

        <Button x:Name="CloseButton" Style="{DynamicResource NoChromeButton}" Click="HandleCloseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,2,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayClose"/>
        </Button>

        <Button x:Name="MaximiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMaximiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,28,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayAdd"/>
        </Button>

        <Button x:Name="MinimiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMinimiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,54,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayMinus"/>
        </Button>

        <TextBlock Text="Metro Form" FontSize="18" FontFamily="Segoe Light" Margin="0,5" HorizontalAlignment="Center" Foreground="White"/>

        <StackPanel>
            <StackPanel Orientation="Vertical" Margin="0,28,0,0">
                <ListBox x:Name="ViewList" Height="20" Width="300" SelectedIndex="0"
                ItemsSource="{Binding Source={StaticResource PageViews}, XPath=Views/View}"
                DisplayMemberPath="@Title"                    
                SelectionChanged="ChangedSlideSelection">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>
            </StackPanel>

            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                <Border x:Name="BorderVisual" HorizontalAlignment="Stretch">
                    <Rectangle x:Name="RectangleVisual"/>
                    <Border.RenderTransform>
                        <TranslateTransform/>
                    </Border.RenderTransform>
                </Border>

                <ItemsControl x:Name="PageViewer" DataContext="{Binding Path=SelectedItem, ElementName=ViewList}"
                    ItemsSource="{Binding XPath=Page}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Frame x:Name="frame" Source="{Binding XPath=@Source}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.RenderTransform>
                        <TranslateTransform/>
                    </ItemsControl.RenderTransform>
                </ItemsControl>
            </Grid>
        </StackPanel>
    </Grid>
</Border>
</Window> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:21:23.343

将一个`Border`或一个`Grid`或一些其他容器作为整个事物的容器（在任何其他元素之前的 Window 下方），`Margin`并在您的动画中引用此元素，而不是`Window`.

编辑：

应该是这样的：

```
<Window>
   <Grid x:Name="MainGrid" Margin="10,0,10,0"> <!-- Or add more margin if needed -->
      ....
        <DoubleAnimation From="0" To="{Binding ActualWidth, ElementName=MainGrid}"/>
      ....
    </Grid
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:11:28.780

好的，我解决了！我所要做的就是将 Grid 的 ClipToBounds 属性设置为 true！感谢 HighCore 让我走上正轨！如果有人遇到这个问题并且无法解决，请告诉我！

# mysql - 简化 MySQL 查询

> ID：13327344
> 
> 赞同：2
> 
> 时间：2012-11-11T00:06:32.527
> 
> 标签：mysql, sql, database

我有一个 MySQL 查询，用于返回两个用户之间的共同朋友，但现在我正在重新编写我的网站，我正在尝试简化此代码，或者至少让它变得更好。

所以这是我下面的代码来检查共同的朋友：

```
SELECT a.friendID
FROM
(SELECT CASE WHEN userID = $id
    THEN userID2 
    ELSE userID 
    END AS friendID 
FROM friends 
WHERE (userID = $id OR userID2 = $id) 
    AND state='1'
) a

 JOIN
(SELECT CASE WHEN userID = $session
    THEN userID2 
    ELSE userID 
    END AS friendID 
FROM friends 
WHERE (userID = $session OR userID2 = $session) 
    AND state='1'
) b

ON b.friendID = a.friendID 
```

我的桌子是这样设置的：

```
 userID -- userID2 -- state
      1 ------- 2 ------- 1
      2 ------- 3 ------- 1
      1 ------- 3 ------- 0 
```

（对不起，我不知道如何进行漂亮的数据库结构设计，所以如果有人可以为我编辑...）

但是对于上述情况，当用户 1 在用户 3 的个人资料中时，由于用户 1 和用户 2 是朋友，用户 2 和用户 3 是朋友，但用户 1 和用户 3 不是，它应该返回用户 2 作为共同朋友. （状态 1 表示已接受友谊，状态 0 表示友谊待定，因此只有状态为 1 时才算作朋友）

另请注意，userID 和 userID2 可以按任何顺序排列，这取决于谁请求谁成为朋友，所以就像上面的查询一样，我还需要返回“friendID”，因为上面的查询是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:18:39.840

```
SELECT t.f FROM friends JOIN (

  SELECT IF(userID = $id, userID2, userID) f
  FROM   friends
  WHERE  state AND $id IN (userID, userID2)

) t ON t.f IN (userID, userID2)
WHERE  state AND $session IN (userID, userID2) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ce67a/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:45:41.073

不一定是最快但易于阅读的：

```
Create View ActiveFriends As
Select
  UserId, UserID2
From
  friends
Where
  State = '1'
Union All
Select
  UserId2, UserID
From
  friends
Where
  State = '1'

Select
  f1.userID2 as MutualFriendId
From
  ActiveFriends f1
    Inner Join
  ActiveFriends f2
     On f1.UserID2 = f2.UserID
Where
  f1.UserID = $session And
  f2.UserID2 = $id 
```

[http://sqlfiddle.com/#!2/5748f/1/0](http://sqlfiddle.com/#!2/5748f/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T00:21:30.520

你可以这样做：

```
SELECT userID2
FROM friends_table
WHERE userID IN ( $id, $session )
AND state = 1
GROUP BY userID2
HAVING COUNT(userID2) >= 2 
```

朋友表：

```
user_id | friend_id | state
-----------------------------
   1    |     7     |    1
   2    |     3     |    0
   7    |     1     |    1 
```

用户 1 和 7 是好友，用户 2 想和用户 3 成为好友，但用户 3 还没有回复。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-11T00:15:58.113

乍一看，我会说使用 intersect 是一个很好的解决方案，所以这个查询应该为你解决问题

```
SELECT userID2
FROM friends 
WHERE userID = $fromID 
INTERSECT
SELECT userID2
FROM friends 
WHERE userID = $theOtherID 
```

编辑：另一个不太明确的解决方案是

```
SELECT userID2
FROM friends INNER JOIN friends f2
USING (userID2)
WHERE friends.UserID = $fromID AND f2.userID = $theOtherID 
```

# objective-c - NSString stringWithFormat：如何只传递非空字符串？

> ID：13327357
> 
> 赞同：0
> 
> 时间：2012-11-11T00:08:57.303
> 
> 标签：objective-c

```
[NSString stringWithFormat:@"%@ \n%@ \n%@",
 self.message1,self.message2,self.message3]; 
```

有一种方法只传递 message1 ..2 ..3 如果不是 == "" ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:35:22.117

只是建议一个替代和更紧凑的解决方案：

```
[[@[self.message1, self.message2, self.message3]
    filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"length > 0"]]
            componentsJoinedByString:@" \n"]; 
```

因此，与 Mundi 的解决方案不同的是：

1.  创建一个包含所有可以使用的字符串的数组；
2.  创建一个谓词来区分您想要的字符串和您不想要的字符串；
3.  通过使用谓词过滤第一个数组来创建第二个数组；
4.  要求将第二个数组中的所有项目用一个字符串和一个换行符粘合在一起。

There are obviously more steps in there so it'll cost a bit more but for most purposes you really don't need to care about that nickel and dime stuff.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T00:17:19.047

如果您通过`@""`，则无论如何都不会显示任何内容，因此这不是问题。所以我假设如果字符串为空，您也不希望换行符。

```
NSMutableString *s = [NSMutableString string];
if (self.message1 && self.message1.length) {
   [s appendFormat:@"%@ \n", self.message1];
}
if (self.message2 && self.message2.length) {
   [s appendFormat:@"%@ \n", self.message2];
}

if (self.message3 && self.message3.length) {
   [s appendFormat:@"%@ \n", self.message3];
} 
```

# excel - Rapidminer / Excel 缺失值替换

> ID：13327361
> 
> 赞同：0
> 
> 时间：2012-11-11T00:09:43.017
> 
> 标签：excel, missing-data, rapidminer

我正在学习如何在项目中使用 Rapidminer。我在某个时候卡住了。我有一个数据集如下：有国家。对于每个国家，我都在跟踪 1990-2012 年的一些价值观（比如说奖牌）。举个例子：

*   国年金银铜

    * * *

    ```
    USA      1990    10      5         7
    .....
    USA      2012    12      3         8
    Spain    1990    8       12        9
    ...
    Spain    1992    7       ?         8
    ....
    Spain    2012    4       11        12
    ...GOES ON... 
    ```

我想要做的是替换缺失值。例如，西班牙在 1992 年的银牌上有缺失值。我想找到西班牙可用的 Silver 数据的平均值，并用它替换缺失的值。我怎样才能做到这一点？如果 Rapidminer 中的当前模块无法做到这一点，是否有某种宏等？我也可以使用 Excel 来预处理数据（但如何）？？？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:30:26.293

使用`Replace Missing Values`运算符。它的默认设置用该列的平均值填充任何缺失的数据——这正是你想要的。

# dynamic - 为永恒而爬行

> ID：13327366
> 
> 赞同：4
> 
> 时间：2012-11-11T00:10:54.590
> 
> 标签：dynamic, seo, bots, web-crawler

我最近一直在构建一个处理重复事件的新网络应用程序。这些事件可以每天、每周或每月重复发生。

这一切都很好。但是当我开始创建事件浏览器页面（公共互联网可以看到）时，我想到了一个想法。

如果爬虫点击此页面，并带有下一个和上一个按钮来浏览日期，它会永远继续下去吗？所以我选择不使用通用 HTML 链接并使用 AJAX。这意味着机器人将无法访问链接。

但是这种方法意味着我失去了没有 Javascript 的用户的任何功能。还是没有 Javascript 的用户数量太少而无需担心？

有没有更好的方法来处理这个？

我也对像 Google Crawler 这样的机器人如何检测到这样的黑洞以及它如何处理它们非常感兴趣？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:58:45.260

将`nofollow`标签添加到页面或您不想抓取的各个链接。这可以在页面源中`robots.txt`或在页面源中。请参阅[机器人排除标准](http://www.robotstxt.org/)

您可能仍然需要考虑如何抵御不遵守标准的行为不端的机器人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:28:13.567

即使是功能最少的网络爬虫也需要比您想象的要复杂得多，而且您描述的情况不是问题。爬虫在广度优先搜索的某些变体上运行，因此即使它们不采取任何措施来检测黑洞，也没什么大不了的。网络爬虫的另一个有帮助的典型特征是，它们避免在短时间内从同一域中获取大量页面，否则它们会无意中对带宽小于爬虫的任何站点执行 DOS 攻击。

尽管爬虫检测黑洞并不是绝对必要的，但好的爬虫可能具有各种启发式方法，以避免在低价值页面上浪费时间。例如，它可以选择忽略没有最少英语（或任何语言）文本的页面、只包含链接的页面、似乎包含二进制数据的页面等。启发式算法不必是完美的，因为搜索的基本广度优先性质确保没有一个网站可以浪费太多爬虫的时间，而且网络的庞大规模意味着即使它错过了一些“好”的页面，总有很多其他好的页面可以找到。（当然这是从网络爬虫的角度来看的；如果你拥有被跳过的页面，这对你来说可能是一个更大的问题，

# trigger.io - 使用 type: 'DELETE' 调用 forge.ajax 会生成一个 GET 请求

> ID：13327370
> 
> 赞同：2
> 
> 时间：2012-11-11T00:11:36.803
> 
> 标签：trigger.io

**当使用 type: DELETE**调用 forge.ajax 时，生成的请求（在 Proxy 上观察到并且也在服务器端记录）是一个**GET**。

另一方面，“POST”和“PUT”似乎工作得很好。

例子：

```
window.forge.ajax({
  type: 'DELETE', 
  url: 'http://www.boorgle.com/api/v1/friends/4f463d32ff47b20018000002', 
  error: function() {console.log('error', arguments);}, 
  success: function() {console.log('success', arguments);}
}) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:09:09.933

我假设这是在iOS上？

我们使用的底层 HTTP 库不支持 DELETE 动词，但我刚刚检查过，这似乎已经修复，所以我们应该能够在未来的平台版本中解决这个问题：我会在什么时候更新这个答案那个会发生！

# r - 单变量异常值检测

> ID：13327373
> 
> 赞同：7
> 
> 时间：2012-11-11T00:11:56.833
> 
> 标签：r, statistics, regression, outliers

这次我不会像以前在我的一个问题中那样直接询问如何检测异常值。我确实阅读了一些与该主题相关的帖子，但没有得到我需要的东西。我有一组值，如下所示：

```
y<-c(0.59, 0.61, 0.59, 1.55, 1.33, 3.50, 1.00, 1.22, 2.50, 3.00, 3.79, 3.98, 4.33, 4.45, 4.59, 4.72, 4.82, 4.90, 4.96, 7.92, 5.01, 5.01, 4.94, 5.05, 5.04, 5.03, 5.06, 5.10, 5.04, 5.06, 7.77, 5.07, 5.08, 5.08, 5.12, 5.12, 5.08, 5.17, 5.18) 
```

现在，正如大多数研究人员所说，异常值检测过程不仅取决于数据，还取决于上下文。我使用了 R 中的几个包，例如异常值（grubbs 测试）、极值、mvoutlier（pcout 方法），但找不到使用它们的最佳方法。在这种情况下（取决于我的要求），7.77（obs no 31）、7.92（obs on 20）和 3.50（obs no 6）是异常值。使用异常值包的 grubbs 测试，我可以将 7.77 和 7.92 检测为异常值，但不能检测到 3.50。我不知道我是否可以在此处发布我的数据图，但在查看图上数据的趋势或分布后，观察号 6 将是明显的异常值。

我正在尝试为这些数据拟合一个非线性模型，但是由于这些异常值，我找不到最佳拟合（最佳拟合不是唯一的要求），无论如何我需要检测这些异常值，因为我将拟合一个单独的对这些异常值进行建模。

我的问题很简单。是否有可能我可以使用一些标准包检测这 3 个异常值，或者如何使用我的非线性生成模型来帮助检测这些异常值？

最好的祝福

沙赫扎德

![在此处输入图像描述](../Images/337dc42e9803818663dee18ed30fbc78.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T15:26:11.097

只是说我尝试`detectAO()`按照上面的建议使用，但我的数据没有发现任何东西（看起来有点相似：短尖峰来自连续趋势）。谷歌搜索后，我发现 Hempel 过滤器（`hempel()`来自 package的函数`pracma`）可以满足我的需求。我想我会在这里添加这个，以防其他人正在寻找解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T00:59:05.387

```
library(TSA)
ar = TSA::arima(y, c(1,0,0))
detectAO(ar) 
```

准确显示这 3 个点（`ind`是可能异常值的索引）：

```
> detectAO(ar)
            [,1]      [,2]      [,3]
ind     6.000000 20.000000 31.000000
lambda2 4.739695  5.957604  5.490739 
```

但要小心地将这种方法应用于任何类型的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T10:36:51.673

```
install.packages("forecast")         
library(forecast)
tsoutliers(data) 
```

R 中的这三个代码将回答您的问题。之后`tsclean(data)`将清理您的数据。

步骤如下：

```
install.packages("forecast")
library(forecast)
t_s<- ts(y)
plot(t_s)
tsoutliers(t_s)
t_s_new<-tsclean(t_s)
plot(t_s_new) 
```

如果仍然存在问题，请回复我。我将提供更复杂的异常值检测器。

# haskell - Haskell - 在“where”中定义一个带有守卫的函数

> ID：13327374
> 
> 赞同：24
> 
> 时间：2012-11-11T00:12:10.953
> 
> 标签：haskell, where-clause, parse-error

我刚刚开始自学 Haskell。此代码应该进行素数分解：

```
divides :: Integer -> Integer -> Bool
divides small big = (big `mod` small == 0)

lowestDivisor :: Integer -> Integer
lowestDivisor n = lowestDivisorHelper 2 n
    where lowestDivisorHelper m n
        | (m `divides` n) = m  -- these should belong to lowestDivisorHelper
        | otherwise = lowestDivisorHelper (m+1) n

primeFactors :: Integer -> [Integer]
primeFactors 1 = []
primeFactors n
    | n < 1 = error "Must be positive"
    | otherwise = let m = lowestDivisor n
                  in m:primeFactors (n/m) 
```

我在注释行上收到解析错误。我认为我的问题可能是`lowestDivisorHelper`有警卫，但编译器不知道警卫是否属于`lowestDivisorHelper`or `lowestDivisor`。我该如何解决这个问题？

我应该补充一点，我不想在顶层定义辅助函数以隐藏实现细节。导入文件不应该使用辅助函数。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-11T00:27:54.487

```
lowestDivisor :: Integer -> Integer
lowestDivisor n = lowestDivisorHelper 2 n where 
  lowestDivisorHelper m n
        | (m `divides` n) = m  -- these should belong to lowestDivisorHelper
        | otherwise = lowestDivisorHelper (m+1) n 
```

您需要使用辅助函数开始一个新语句，以便通过比较来充分缩进警卫。（而且您还忘记了一个论点`n`。）这也可以：

```
lowestDivisor :: Integer -> Integer
lowestDivisor n = lowestDivisorHelper 2 n 
    where 
  lowestDivisorHelper m n
        | (m `divides` n) = m  -- these should belong to lowestDivisorHelper
        | otherwise = lowestDivisorHelper (m+1) n 
```

但这不是：

```
lowestDivisor :: Integer -> Integer
lowestDivisor n = lowestDivisorHelper 2 n 
  where lowestDivisorHelper m n
        | (m `divides` n) = m  -- these should belong to lowestDivisorHelper
        | otherwise = lowestDivisorHelper (m+1) n 
```

关键是`|`必须比函数名更靠右。

一般来说，只要它更靠右，开始一条新线就会继续前一条线。守卫必须从函数名称继续。

# python - 如何在 Blender 导出脚本中导出每个顶点的 UV 坐标

> ID：13327379
> 
> 赞同：12
> 
> 时间：2012-11-11T00:12:44.197
> 
> 标签：python, blender, blender-2.61

我正在从 Blender 2.64 编写一个 python 导出脚本。这个想法是我试图以对 OpenGL VBO 友好的方式导出网格数据。所以我在结构布局数组中导出顶点属性。例如，对于具有顶点、法线和一对纹理坐标的网格，`vertexAttribute`VBO 中的每个都是 8 个连续的浮点数：

```
vvvnnntt 
```

到现在为止还挺好。问题是，当 Blender 进行 UV 映射时，它实际上可以将不同的 uv 分配给同一个顶点。

也就是说，假设您有一个立方体：您有 8 个顶点，并且您有 6 个面（在这种情况下为四边形）。我本来期望索引为 0,1,2,3 的面/多边形暗示：

```
vertex 0, normal 0, uvCoord0 
vertex 1, normal 1, uvCoord1 
vertex 2, normal 2, uvCoord2 
vertex 3, normal 3, uvCoord3 
```

因此，任何提及索引 0 的内容，例如，在任何面上，都将始终暗示顶点 0、法线 0、uvCoord0 元组。好吧，结果在 Blender 中，如果我理解正确的话，一张脸可以用 uvCoord 0 引用顶点 0，而另一张脸可能用不同的 uVCoord 引用相同的顶点 0。因此，人脸的 loop_indices 实际上必须用于在一般对象`data.vertices`和`data.uv_layers[].data`容器中查找向量和 uvCoord。

这允许为每个面应用 uv 贴图。所以你可以有一个立方体，每个面都应用了不同的 uv 纹理，即使两个相邻的面共享一个顶点，顶点也有不同的 uv 坐标，具体取决于面。

尽管如此，我的网格不应该对同一个顶点有不同的 uv，因为我正在展开相邻的面。这意味着在我的 UV 贴图中，展开的网格是一组相邻的面（例如，如果它是由 6 个面组成的立方体，则考虑一个十字形）并且在两个相邻面之间，它们的公共顶点应该映射到同一个点在 uv 贴图中。

因此，鉴于上述情况，我认为这种方法应该可行：

```
vertexAttributeList = []
    for vertex in mesh.data.vertices:
        vertexAttribute = list(vertex.co)
        vertexAttribute.extend(list(vertex.normal))
        vertexAttributeList.append(vertexAttribute)

    for triangle in mesh.data.polygons:
        for uv_layer in mesh.data.uv_layers:
            for i in triangle.loop_indices:
                lookupIndex = mesh.data.loops[i].vertex_index
                if len(vertexAttributeList[lookupIndex]) == 6:
                    uvCoord = uv_layer.data[i].uv
                    vertexAttributeList[lookupIndex].extend([uvCoord[0], 1 - uvCoord[1]]) 
```

如您所见，上面代码中的含义是我将多次访问顶点，因为我正在迭代共享顶点的网格面（在本例中为三角形）。每次我访问一个顶点时，如果它还没有分配它的 UV 坐标，那么我通过使用三角形的 loop_indices 查找它们来分配它们。毕竟，我的假设是，在一天结束时，每个顶点都有唯一的 uv 坐标。

例如，上面的代码给出了以下布局（我正在显示网格的前 6 个顶点属性）：

```
-1.000000 -1.000000 -1.000000 -0.707083 -0.707083  0.000000  0.076381  0.948520
-1.000000  1.000000 -1.000000 -0.707083  0.707083  0.000000  0.454183  0.948519
 1.000000  1.000000 -1.000000  0.707083  0.707083  0.000000  0.325162  0.948519
 1.000000 -1.000000 -1.000000  0.707083 -0.707083  0.000000  0.205674  0.948519
-1.000000 -1.000000  1.000000 -0.577349 -0.577349  0.577349  0.581634  0.795012
-1.000000  1.000000  1.000000 -0.577349  0.577349  0.577349  0.454183  0.795012
... 
```

但是当我使用这个信息加上一个网格的面时，我的布局是这样的：

```
4 5 1
5 6 2
6 7 3
7 4 0
... 
```

为了在我的程序（某种引擎）中渲染我的模型，uv 映射显然搞砸了。也就是说，模型在顶点和法线方面渲染得很好，但 uv 纹理显然没有正确映射。

有什么想法吗？我的意思是，要么我导出正确并弄乱了我的应用程序中的 OpenGL 渲染代码，要么我导出了顶点和 uv 坐标之间的错误映射。（或两者兼而有之，当然......但我现在假设我正在搞乱导出脚本）。

最后一件事，如果我更改上面的 python 代码以附加分配给顶点的每个新 uv，而不是仅在尚未分配 uv 时才附加，对于顶点 1，我得到：

```
[-1.0, -1.0, -1.0, -0.7070833444595337, -0.7070833444595337, 0.0, 0.07638061791658401, 0.9485195726156235, 0.5816344618797302, 0.9485194832086563, 0.07638061791658401, 0.9485195726156235] 
```

请注意，此示例中只有一个 uv 层。很明显，Blender 确实为顶点 1 分配了 2 个 uv 坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T06:04:30.060

我认为可能有一种方法可以插入或以其他方式协调/混合 UV，以便在所有内容都相邻的情况下最终每个顶点都有一个 UV。但与此同时，鉴于没有人提出替代方案，我最终复制了具有不同 UV 的顶点，并放弃了为 GL_ELEMENT_ARRAY 导出的尝试。如果使用单个 VBO（使用 glDrawArrays）进行渲染，则以下代码有效：

```
def exportMesh(filepath):

    # Only one mesh per scene
    objList = [object for object in bpy.context.scene.objects if object.type == 'MESH']

    if len(objList) == 0:
        return
    elif len(objList) > 1:
        return
    #raise exepction? dialog box?

    # Process the single mesh object:
    mesh = objList[0]

    # File name is same as the mesh's name in Blender
    meshFilePath = filepath[0 : filepath.rindex('/') + 1] + mesh.name + ".mesh"
    file = open(meshFilePath, 'w')

    WorldTransform = Matrix().Identity(4)
    WorldTransform *= Matrix.Rotation(radians(90), 4, "X")
    file.write('World Transform:\n')
    for rcol in WorldTransform_T.row:
        file.write('{:9f} {:9f} {:9f} {:9f}\n'.format(row[0], row[1], row[2], row[3]))
    file.write('\n')

    # Mesh (local) transform matrix
    file.write('Mesh Transform:\n')
    localTransform_T = mesh.matrix_local.copy()
    localTransform_T.transpose()
    for row in localTransform_T.row:
        file.write('{:9f} {:9f} {:9f} {:9f}\n'.format(row[0], row[1], row[2], row[3]))
    file.write('\n')

    vertexAttributeList = []
    for triangle in mesh.data.polygons:
        vertices = list(triangle.vertices)
        i = 0
        for vertex in vertices:
            vertexAttribute = list(mesh.data.vertices[vertex].co)

            if triangle.use_smooth:
                vertexAttribute.extend(list(mesh.data.vertices[vertex].normal))
            else:
                vertexAttribute.extend(list(triangle.normal))

            for uv_layer in mesh.data.uv_layers:
                uvCoord = uv_layer.data[triangle.loop_indices[i]].uv
                vertexAttribute.extend([uvCoord[0], 1 - uvCoord[1]])

            totalVertexWeight = 0
            jointWeights = [group.weight for group in mesh.data.vertices[vertex].groups]
            jointIndices = [group.group for group in mesh.data.vertices[vertex].groups]
            for weight in jointWeights:
                totalVertexWeight += weight

            vgNum = len(mesh.vertex_groups)
            jointWeightsAttribute = []
            jointIndicesAttribute = []
            for vgIndex in range(4):
                if vgIndex < len(jointIndices):
                    jointWeightsAttribute.append(jointWeights[vgIndex] / totalVertexWeight)
                    jointIndicesAttribute.append(jointIndices[vgIndex])
                else:
                    jointWeightsAttribute.append(0)
                    jointIndicesAttribute.append(0)

            vertexAttribute.extend(jointWeightsAttribute)
            vertexAttribute.extend(jointIndicesAttribute)

            vertexAttributeList.append(vertexAttribute)
            i += 1

    # VBO
    vNum = len(vertexAttributeList)
    tNum = len(mesh.data.uv_layers)
    file.write('VBO Length: {:d}\n'.format(vNum))
    for vertexAttribute in vertexAttributeList:
        file.write('{:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:9f} {:d} {:d} {:d} {:d}\n'.format(vertexAttribute[0],
                                                                                                                          vertexAttribute[1],
                                                                                                                          vertexAttribute[2],
                                                                                                                          vertexAttribute[3],
                                                                                                                          vertexAttribute[4],
                                                                                                                          vertexAttribute[5],
                                                                                                                          vertexAttribute[6],
                                                                                                                          vertexAttribute[7],
                                                                                                                          vertexAttribute[8],
                                                                                                                          vertexAttribute[9],
                                                                                                                          vertexAttribute[10],
                                                                                                                          vertexAttribute[11],
                                                                                                                          vertexAttribute[12],
                                                                                                                          vertexAttribute[13],
                                                                                                                          vertexAttribute[14],
                                                                                                                          vertexAttribute[15]))
    file.write('\n')

    # Done writing mesh file
    file.close() 
```

# javascript - $('') 在 JavaScript 中是什么意思？

> ID：13327380
> 
> 赞同：0
> 
> 时间：2012-11-11T00:12:47.580
> 
> 标签：javascript, d3.js

> **可能重复：**
> [javascript中的“$”符号是什么意思](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)

我在 JavaScript 中遇到过如下代码：

```
$('svg circle').tipsy({ 
    gravity: 'w', 
    html: true, 
    title: function() {
      return 'Color: '; 
    }
}); 
```

这里是什么`$('')`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:14:59.637

这是因为使用了[jQuery](http://www.jquery.com)库，该库用于标准化浏览器之间的 JavaScript 使用，并使访问元素和其他常见任务变得更加容易。它不是 JavaScript 本身的一部分，除非`$`是函数或变量的可接受名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T00:14:43.087

通常当您遇到 时`$()`，这意味着开发人员正在使用 javascript 库，例如 jQuery。

该`$`符号是这些库的名称空间。他们定义的所有函数都以 开头`$.`，例如`$.get()`。像这样传递 html 标签的 id:`$("#myId")`会给你一个代表那个节点的 jQuery 对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T00:14:36.277

这是[jQuery](http://jquery.com/)或[zeptojs的简短初始化函数](http://zeptojs.com/)

```
$("selector").method(); 
```

`document.getElementById`如果使用框架，它也可能意味着缩短：

```
$('myId'); // document.getElementById("myId"); 
```

* * *

插件[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)用于在悬停时创建工具提示。

# c++ - C++ 预期 `)' 在 ';' 之前 ')' 令牌之前的令牌预期主表达式

> ID：13327391
> 
> 赞同：1
> 
> 时间：2012-11-11T00:14:40.427
> 
> 标签：c++, templates, g++, dev-c++, typename

您好，我正在实现一个基于底层数组的二叉树。

我的项目包含一组 c++ 文件和用于生成编译的 makefile。

我正在使用 DEV-C++ 4.9.9.2 提供的 g++。

启动编译后，我收到以下两组错误。

AlberoBinariov.h：在成员函数`bool AlberoBinariov<T>::figlioSinistroVuoto(typename Alberoa<T, int>::posizioneNodo)': AlberoBinariov.h:198: error: expected`)' 之前 ';' 令牌 AlberoBinariov.h:198: 错误: ')' 之前的预期主表达式令牌 AlberoBinariov.h:198: 错误: 预期';' 在 ')' 标记之前

AlberoBinariov.h：在成员函数`bool AlberoBinariov<T>::figlioDestroVuoto(typename Alberoa<T, int>::posizioneNodo)': AlberoBinariov.h:204: error: expected`)' 之前 ';' 令牌 AlberoBinariov.h:204：错误：预期`)' before ';' token AlberoBinariov.h:204: error: expected primary-expression before ')' token AlberoBinariov.h:204: error: expected`；' 在 ')' 标记之前

下面提供了感兴趣的代码部分：

```
 template <class T>
      bool AlberoBinariov<T>::figlioSinistroVuoto(posizioneNodo p)
      {
          return (figlioSinistro(p)==(posizioneNodo)P_NULL); //line 198
      }

      template <class T>
      bool AlberoBinariov<T>::figlioDestroVuoto(posizioneNodo p)
      {
           return (figlioDestro(p)==((posizioneNodo)P_NULL)); //line 204
      } 
```

也为了您的方便，我在下面的链接中包含了完整的源代码。

[https://filetea.me/t1sc3e60](https://filetea.me/t1sc3e60)

你能告诉我吗？提前感谢您的宝贵时间。我期待着收到您的来信。

亲切的问候，杰拉德

PS：P_NULL 是在 Constants.h 文件中声明的 NULL 指针常量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:18:47.280

您有 3 个单独的右括号，没有相应的左括号：

```
return (figlioDestro(p) == ((posizioneNodo)P_NULL)) /* -> */ ))); 
```

将其更改为：

```
return (figlioDestro(p) == ( (posizioneNodo)P_NULL )); 
```

# random - 如何让 NPC 在 XNA 中随机移动？

> ID：13327393
> 
> 赞同：0
> 
> 时间：2012-11-11T00:14:53.507
> 
> 标签：random, xna, 2d, xna-4.0

我基本上希望一个角色朝一个方向走一会儿，停下来，然后朝另一个随机方向走。现在我的精灵看起来但不动，随机快速地向各个方向移动，然后等待并再次癫痫发作。如果有用，我将发布到目前为止的代码。

```
class NPC: Mover
{
    int movementTimer = 0;

    public override Vector2 direction
    {
        get
        {
            Random rand = new Random();
            int randDirection = rand.Next(8);

            Vector2 inputDirection = Vector2.Zero;

            if (movementTimer >= 50)
            {
                if (randDirection == 4)
                {
                    inputDirection.X -= 1;
                    movingLeft = true;
                }
                else movingLeft = false;

                if (randDirection == 1)
                {
                    inputDirection.X += 1;
                    movingRight = true;
                }
                else movingRight = false;

                if (randDirection == 2)
                {
                    inputDirection.Y -= 1;
                    movingUp = true;
                }
                else movingUp = false;

                if (randDirection == 3)
                {
                    inputDirection.Y += 25;
                    movingDown = true;
                }
                else movingDown = false;

                if (movementTimer >= 100)
                {
                    movementTimer = 0;
                }
            }

            return inputDirection * speed;
        }
    }

    public NPC(Texture2D textureImage, Vector2 position,
        Point frameSize, int collisionOffset, Point currentFrame, Point sheetSize,
        Vector2 speed)
        : base(textureImage, position, frameSize, collisionOffset, currentFrame,
        sheetSize, speed)
    {
    }

    public NPC(Texture2D textureImage, Vector2 position,
        Point frameSize, int collisionOffset, Point currentFrame, Point sheetSize,
        Vector2 speed, int millisecondsPerframe)
        : base(textureImage, position, frameSize, collisionOffset, currentFrame,
        sheetSize, speed, millisecondsPerframe)
    {
    }

    public override void Update(GameTime gameTime, Rectangle clientBounds)
    {

        movementTimer++;
        position += direction;

        if (position.X < 0)
            position.X = 0;
        if (position.Y < 0)
            position.Y = 0;
        if (position.X > clientBounds.Width - frameSize.X)
            position.X = clientBounds.Width - frameSize.X;
        if (position.Y > clientBounds.Height - frameSize.Y)
            position.Y = clientBounds.Height - frameSize.Y;

        base.Update(gameTime, clientBounds);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:45:34.377

您如何**创建一种方法来获得随机方向**：

```
Vector2 GetRandomDirection()
{
    Random random = new Random();
    int randomDirection = random.Next(8);

    switch (randomDirection)
    {
        case 1:
            return new Vector2(-1, 0);
        case 2:
            return new Vector2(1, 0);
        case 3:
            return new Vector2(0, -1);
        case 4:
            return new Vector2(0, 1);
        //plus perhaps additional directions?
        default:
            return Vector2.Zero;
    }
} 
```

然后，**当设定的时间已经过去时**，您调用该方法来改变方向：

```
double totalElapsedSeconds = 0;
const double MovementChangeTimeSeconds = 2.0; //seconds

public override void Update(GameTime gameTime, Rectangle clientBounds)
{
    totalElapsedSeconds += gameTime.ElapsedGameTime.TotalSeconds;

    if (totalElapsedSeconds >= MovementChangeTimeSeconds)
    {
        totalElapsedSeconds -= MovementChangeTimeSeconds;
        this.direction = GetRandomDirection();
    }

    position += direction;

    //...
} 
```

使用**不同的代码**来检测 NPC 移动的方向（布尔值`movingLeft`、`movingRight`等）。根据`direction`向量检测这些值。这样**您就不必分配多余的值**。

```
enum MoveDirection
{
    Up, Down, Left, Right, UpLeft, UpRight, DownLeft, DownRight, None
}

public MoveDirection GetMoveDirection(Vector2 direction)
{
    if (direction.Y < 0)
    {
        if (direction.X < 0)
            return MoveDirection.UpLeft;
        else if (direction.X > 0)
            return MoveDirection.UpRight;
        else
            return MoveDirection.Up;
    }
    else if (direction.Y > 0)
    {
        if (direction.X < 0)
            return MoveDirection.DownLeft;
        else if (direction.X > 0)
            return MoveDirection.DownRight;
        else
            return MoveDirection.Down;
    }
    else
    {
        if (direction.X < 0)
            return MoveDirection.Left;
        else if (direction.X > 0)
            return MoveDirection.Right;
        else
            return MoveDirection.None;
    }
} 
```

我认为这用于旋转精灵（或者可能绘制不同的精灵），所以现在你只需要一个开关：

```
public override void Draw(GameTime gameTime, SpriteBatch spriteBatch)
{
    MoveDirection moveDirection = GetMoveDirection(this.direction);
    switch(moveDirection)
    {
        case MoveDirection.Up:
            //Draw up-facing sprite, or assign a value to a rotation variable.
            break;
        case MoveDirection.UpLeft:
            //...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:39:20.597

您可以检查 Platformer Starter Kit 以了解敌人的移动方式。

由于 Microsoft 停止了针对 Windows 8 的 XNA 开发，他删除了所有下载 XNA 4 入门工具包的链接。

我将原始 Platformer 源代码上传到 bitbucket。

在这里您可以下载 XNA 4 的原始 Platformer Starter Kit Source Code [http://vackup.blogspot.com.ar/2012/11/download-original-platformer-starter.html](http://vackup.blogspot.com.ar/2012/11/download-original-platformer-starter.html)

# iphone - 在 iOS 6 中禁用 iPhone 应用程序的通知中心

> ID：13327394
> 
> 赞同：2
> 
> 时间：2012-11-11T00:14:57.383
> 
> 标签：iphone, notifications, center, local

我希望我的应用程序在使用手机时在屏幕顶部向用户显示通知，并且我还希望通知显示在锁定屏幕上。

但是，我不希望通知显示在通知中心 - 应用程序在不需要用户启动应用程序的情况下进行通知，因此我无法清除通知中出现的不必要/烦人的通知累积中央。

用户可以通过将应用程序的“通知中心”设置为“关闭”，从“设置”中的“通知”手动控制 - 有没有办法在应用程序安装时指定它？（我知道这在 iOS 5 中是不可能的）。

谢谢！

# c# - 用什么代替数据库？

> ID：13327397
> 
> 赞同：-3
> 
> 时间：2012-11-11T00:15:03.623
> 
> 标签：c#, asp.net, database

我的小网站在 asp.net 3.5 上运行，我没有任何 sql 服务器来托管我的数据库。但是网站的某些内容必须是可变的。（网站名称、版权年份等）

我不想打开让我们说“default.aspx”文件并更改我想要的任何内容。

我应该将这些信息读/写到文件中。

（*我确定有人问过这个问题，但我找不到*）

正确的方法是什么？[xml、文本文件、配置文件或 ? ]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:32:34.730

如果您只想更改站点中的内容，那么 web.config（或其他配置文件）是您的最佳选择。如果有可以交互编辑的动态内容，我建议使用 NoSQL Db。[RavenDb](http://ravendb.net/)之类的东西（只是因为它在 C# 中）。

要完成这项工作，您需要访问文件系统，解压缩 RavenDb 的安装并单击 cmd 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:20:31.023

如果您没有数据库服务器，也许您可​​以考虑 SQL Lite（最好的选择）、Json 文件或 XML（最差的选择）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T00:30:46.497

该`web.config`文件将在这里工作。您可以在以下部分中指定您的信息`appSettings`：

```
<appSettings>
    <add key="WebsiteTitle" value="MyWebsiteTitle"/>
</appSettings> 
```

然后像这样读回来：

```
string websiteTitle = ConfigurationManager.AppSettings["WebSiteTitle"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T00:37:04.697

取决于您需要存储的数据..

如果我们谈论的是标题、版权等内容，那么任何类型的数据库都是多余的，一个简单的配置文件就可以了。

但是，如果您需要存储复杂的数据，例如您的员工列表，您可能需要更复杂的东西。有几个选项：便携式数据库（例如 SQLite）或某种文件存储。`About me`您可以将数据存储在没有任何特殊编码的纯文本中（如果您想拥有可编辑的文本（前面提到过）。

没有“通用的正确方法”，您必须适应您的特定需求和选项（硬件/软件）。

# html - 为什么 display:inline 取消高度？

> ID：13327398
> 
> 赞同：1
> 
> 时间：2012-11-11T00:15:03.570
> 
> 标签：html, css

我正在制作一个带有 id 的菜单，`menu`其中包含以下设置：

```
display: inline;
height: 200px; 
```

一旦我删除`display: inline;`，高度再次起作用。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:17:02.323

```
display: inline; 
```

通常用于指代文本元素；

从 w3c 页面：

> [inline] 使元素生成一个或多个内联框。

因此，您必须设置的高度是[line-height](http://www.w3.org/wiki/CSS/Properties/line-height)属性。从 w3c 页面：

> 在内容由行内元素组成的块容器元素上，'line-height' 指定元素内行框的最小高度。

请注意，您只能控制内联元素的**最小高度**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:20:12.380

因为[规范是这样说的](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)：

> **'height'** ... 适用于：所有元素，但未替换的内联元素、表格列和列组

[`line-height`](https://developer.mozilla.org/en-US/docs/CSS/line-height)但是，确实适用于`inline`元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T00:23:48.037

通过使某些内容内联显示，您实际上使其与跨度相同。因此，唯一有效的高度值是 line-height，因为您正在处理内联元素。

要呈现高度值，您需要使用 div 标签或强制现有选项卡像接受高度属性的 div / 对象一样呈现。您可以通过设置 display:block 来做到这一点。

本质上，您可以通过设置 display:inline 将 div 渲染为像 span 一样工作，反之，通过 display:block 将 span 渲染为有效的 div。

Span 标签用于内联样式，例如字体大小、颜色、装饰等。

# scala - 如何避免糟糕的类型转换与路径相关类型一起使用？

> ID：13327399
> 
> 赞同：5
> 
> 时间：2012-11-11T00:15:13.537
> 
> 标签：scala, type-mismatch, path-dependent-type

我是 Scala 新手，不知道为什么我必须在以下代码中执行与路径相关类型相关的（对我来说不直观）类型转换。（我不喜欢 getter、setter 或 null，它们是用来分离操作并消除错误来源的）

```
// Module A public API
class ModA {
  trait A
}

// Module B public API that depends on types defined in Module A
class ModB(val modA: ModA) {
  trait B {
    def getA: modA.A;
    def setA(anA: modA.A);
  }
}

// One implementation of Module A
class ModAImpl extends ModA {
  class AImpl extends A
}

// One implementation of Module B
class ModBImpl(mod: ModA) extends ModB(mod) {
  class BImpl extends B {
    private[this] var privA: modA.A = _;
    override def getA = privA;
    override def setA(anA: modA.A) = privA = anA;
  }
}

object Main {
  def main(args: Array[String]): Unit = {
    // wiring the modules
    val modAImpl = new ModAImpl;
    val modBImpl = new ModBImpl(modAImpl);

    // wiring objects
    val a = new modAImpl.AImpl;
    val b = new modBImpl.BImpl;
    b.setA(a); //don't compile and complain: type mismatch;  found: modAImpl.A  required: modBImpl.modA.A

    //i have to do this horrible and coutnerintuitive cast to workaround it
    b.setA(a.asInstanceOf[modBImpl.modA.A]);

    var someA: modAImpl.A = null;
    someA = b.getA; // don't compile with same reason
    someA = b.getA.asInstanceOf[modAImpl.A]; // horrible cast to workaround

    println(a == b.getA); // however this prints true
    println(a eq b.getA); // this prints true too
  }
} 
```

我已经阅读了有关单例类型的信息，以便在两种类型相同时通知编译器，但我不知道如何在这里应用它。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T03:47:53.897

您可以在类型上粘贴类型参数`ModB`：

```
class ModA { trait A }

class ModB[AA](val modA: ModA { type A = AA }) {
  trait B {
    def getA: AA
    def setA(anA: AA)
  }
}

class ModAImpl extends ModA { class AImpl extends A }

class ModBImpl[AA](
  mod: ModA { type A = AA }) extends ModB(mod) {
  class BImpl extends B {
    private[this] var privA: AA = _
    override def getA = privA
    override def setA(anA: AA) = privA = anA
  }
} 
```

并且类型推断都可以按需要进行：

```
scala> val modAImpl = new ModAImpl
modAImpl: ModAImpl = ModAImpl@7139edf6

scala> val modBImpl = new ModBImpl(modAImpl)
modBImpl: ModBImpl[modAImpl.A] = ModBImpl@1dd7b098

scala> val a = new modAImpl.AImpl
a: modAImpl.AImpl = ModAImpl$AImpl@4cbde97a

scala> val b = new modBImpl.BImpl
b: modBImpl.BImpl = ModBImpl$BImpl@63dfafd6

scala> b.setA(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-22T02:18:46.960

让我们从简化代码开始，消除不必要的复杂性。

```
class Aout {
    class Ain
}

class Bout(val link: Aout)  {
    class Bin(val field: link.Ain)
}

object Main {
    def main(args: Array[String]): Unit = {
        // wiring outer object
        val aout: Aout = new Aout;
        val bout: Bout = new Bout(aout);

        // wiring inner object
        val ain: aout.Ain = new aout.Ain;
        val bin: bout.Bin = new bout.Bin(ain); //don't compile and complain: type mismatch;  found: aout.Ain  required: bout.link.Ain
    }
} 
```

**回答：**

编译器抱怨类型不匹配错误，因为他比较了赋值中涉及的两个声明类型的路径，它们是不同的。编译器不够聪明，无法在那时注意到这一点`aout eq bout.link`。你必须告诉他。所以，换行

```
val ain: aout.Ain = new aout.Ain; 
```

和

```
val ain: bout.link.Ain = new bout.link.Ain; 
```

解决了依赖于路径的类型不匹配。

无论如何，在原始代码中更正类型的路径是不够的，因为还有继承问题。一种解决方案是让班级像这样`ModBImpl`了解`ModAImpl`班级：

```
class ModA {
    trait A
}

class ModB[M <: ModA](val modA: M) { // type parameter added
    trait B {
        def getA: modA.A;
        def setA(anA: modA.A);
    }
}

class ModAImpl extends ModA {
    class AImpl extends A
}

class ModBImpl(mod: ModAImpl) extends ModB(mod) { // changed type of `mod` parameter from `ModA` to `ModAImpl`

    class BImpl extends B {
        private[this] var privA: modA.A = _;
        override def getA: modA.A = privA;
        override def setA(anA: modA.A): Unit = privA = anA;
    }
}

object Main {
    def main(args: Array[String]): Unit = {
        val modAImpl = new ModAImpl;
        val modBImpl = new ModBImpl(modAImpl);

        val a: modBImpl.modA.AImpl = new modBImpl.modA.AImpl; // changed the path of the type
        val b: modBImpl.BImpl = new modBImpl.BImpl;
        b.setA(a); // here IntellijIde complains with a type mismatch error, but the ScalaIDE (eclipse) and the scala compiler work fine.
    }
} 
```

如果您的业务规则不允许`ModBImpl`该类具有该类的知识`ModAImpl`，请告诉我，以便我们找到另一个解决方案。

# c# - 在列表视图中搜索字符串和过滤器

> ID：13327402
> 
> 赞同：3
> 
> 时间：2012-11-11T00:16:00.003
> 
> 标签：c#, wpf, listview, filtering

如何在列表视图中搜索和过滤关闭字符串。

例如，我的列表视图中有两列，并且都是可绑定的。

假设第一列名为**bindlname**，第二列名为“ **bindfname** ”

例如这是我的列表视图记录：

![在此处输入图像描述](../Images/c9609bbbe31bcd1667958b60078716c1.png)

现在，如果我输入“ **Y**并点击搜索按钮。它将过滤**YU ZIQ 和 FEAGS YAPSLE 姓氏** 中的所有第一个字母，并且以字母“ **Y** ”开头的名字将被过滤......如果每个我都会输入“ **UY** ”它将显示**UY QILUZ 和 UY ZKAE**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:44:53.963

您可以使用`ICollectionView`将数据绑定到`ListView`，当您按下按钮时，您可以过滤此数据。

示例代码：

```
public class Person
    {
        public string Name { get; set; }
        public string Surname { get; set; }
    }

    public class MainViewModel : NotificationObject
    {
        public MainViewModel()
        {
            SearchPerson = new DelegateCommand(this.OnSearchPerson);        

            // test data
            _myDataSource.Add(new Person { Name = "John", Surname = "Blob" });
            _myDataSource.Add(new Person { Name = "Jack", Surname = "Smith" });
            _myDataSource.Add(new Person { Name = "Adam", Surname = "Jackson" });
        }

        private List<Person> _myDataSource = new List<Person>();

        private string _searchString;
        public string SearchString
        {
            get { return _searchString; }
            set { _searchString = value; RaisePropertyChanged(() => SearchPerson); }
        }

        private ICollectionView _people;
        public ICollectionView People
        {
            get { return CollectionViewSource.GetDefaultView(_myDataSource); }           
        }

        public ICommand SearchPerson { get; private set; }
        private void OnSearchPerson()
        {
            if (!string.IsNullOrEmpty(SearchString))
            {
                People.Filter = (item) => { return (item as Person).Name.StartsWith(SearchString) || (item as Person).Surname.StartsWith(SearchString) ? true : false; };
            }
            else
                People.Filter = null;
        }
    } 
```

XAML 文件：

```
 <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal">
            <TextBox Text="{Binding SearchString}" Width="150" />
            <Button Content="Search" Command="{Binding SearchPerson}" />
        </StackPanel>

        <ListView Grid.Row="1" ItemsSource="{Binding People}">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" />
                        <GridViewColumn Header="Surname" DisplayMemberBinding="{Binding Surname}" />
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid> 
```

[这](http://sdrv.ms/RLZdj5)是完整的示例（ListViewSearch.zip）。

# java - 同时通知两个线程

> ID：13327403
> 
> 赞同：0
> 
> 时间：2012-11-11T00:16:13.417
> 
> 标签：java, multithreading, notify

如何同时通知 Thread t1 和 Thread t2 （因此获得的概率与第一个相同`hey 1`）`hey2`？我已经尝试过 notifyAll，但无法使其工作。

```
class Thr extends Thread
{
    Thr () throws InterruptedException
    {
        Thread t1 = new Thread() {
            public synchronized void run()
            {
                while (true)
                {
                    try {
                        wait();
                    } catch (InterruptedException e1) {
                        e1.printStackTrace();
                    }
                    try
                    {
                        Thread.sleep(1500);
                    } catch (Exception e) { }
                    System.out.println("hey 1");
                }
            }
        };

        Thread t2 = new Thread() {
            public synchronized void run()
            {
                while (true)
                {                    
                    try {
                        wait();
                    } catch (InterruptedException e1) {
                        e1.printStackTrace();
                    }
                    try
                    {
                        Thread.sleep(1500);
                    } catch (Exception e) { }
                    System.out.println("hey 2");
                }
            }
        };

        t1.start();
        t2.start();
    }

    public static void main(String args[]) throws InterruptedException
    {
        new Thr();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:28:53.780

您应该[等待](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)共享对象并使用[notifyAll](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#notifyAll%28%29)，如下所示：

```
class Thr extends Thread
{
    Thr () throws InterruptedException
    {
        final Object lock = new Object ();

        Thread t1 = new Thread() {
            public void run()
            {
                    try {
                        synchronized (lock) {
                            lock.wait();
                        }
                    } catch (InterruptedException e1) {
                        e1.printStackTrace();
                    }

                    System.out.println("hey 1");
            }
        };

        Thread t2 = new Thread() {
            public synchronized void run()
            {
                    try {
                        synchronized (lock) {
                            lock.wait();
                        }
                    } catch (InterruptedException e1) {
                        e1.printStackTrace();
                    }

                    System.out.println("hey 2");
            }
        };

        t1.start();
        t2.start();
        synchronized (lock) {
            lock.notifyAll ();
        }
    }

    public static void main(String args[]) throws InterruptedException
    {
        new Thr();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:33:32.030

正确的方法是使用`notifyAll`. 您的代码的真正问题似乎是您有两个线程在等待不同互斥锁上的通知。您需要他们等待单个对象...如@ShyJ 的回答中所述。

* * *

请注意，您无法对此进行编码，以保证通知首先以相同的概率传递给任一线程：

*   Java 线程规范不保证等待/通知的公平性。

*   在操作系统级别（通常）实现（通常）的线程调度程序也没有做出这样的保证。

关键是应用程序无法控制这一点。最好的方法是让 wait/notifyAll 做他们通常做的事情，并设计你的应用程序，使线程调度中的任何偏差都不会以重要的方式影响应用程序的行为。

（FWIW，通常的问题是人们明确或隐含地假设非随机性......并且当线程以意外的随机顺序安排时会被烧毁。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T05:40:14.703

如果您使用的 Java 版本高于 1.4，那么使用任何`concurrent`锁都会大大简化您的任务：

`java.util.concurrent.locks`特别是`ReadWrite`类型。

现在，将消息传递给相同类型的所有线程 - 实现`Observer Pattern`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T00:41:57.323

我强烈建议避免使用等待/通知并使用更强大的东西。问题是在任何组合中使用等待/通知都可能导致竞争条件。

*在学术*上给予它们相等概率的唯一方法是创建两个`Semaphore`对象，让线程尝试获取它们，并使用`Random`来选择首先释放哪个对象。即便如此，如果调度程序决定运行第一个试图获得锁的调度程序，那么不管是否`Sempahore`公平，你都会在那里得到偏差。这迫使您等到第一个线程完成后再运行第二个线程，例如 via `Thread.join`。

*归根结底，在并发系统中保证*顺序的唯一方法是强制它们进入单线程格式，这首先抛弃了让它们并发的全部意义。

# xslt - Xpath检测孩子是否交错

> ID：13327411
> 
> 赞同：1
> 
> 时间：2012-11-11T00:17:34.877
> 
> 标签：xslt

我需要一个 XSLT 1.0 测试表达式来指示当前节点 t 的元素是否完美交错，就像这样

```
<t>
    <cat />
    <dog />
    <horse />
    <cat />
    <dog />
    <horse />
</t> 
```

或有其他顺序，例如

```
<t>
    <cat />
    <cat />
    <dog />
    <dog />
    <horse />
    <horse />
</t> 
```

或者

```
<t>
    <cat />
    <dog />
    <cat/>
    <horse/>
    <cat/>
    <horse />
</t> 
```

如果是第一个，则可以有任意数量的此类元组。如果是第二个，则每种孩子可以有任意数量（包括零），并且顺序任意。

一只猫、一只狗、一匹马的特殊情况可以测试真假，以使算法更容易为准。

我事先知道这三个元素的名称。

* * *

编辑。应 Dimitre 的要求，让我试着用另一种可能更简单的方式说出来。

上下文节点有任意数量的子节点，但每个子节点只有三个名称之一。在处理这些孩子之前，我需要测试它们是否以重复模式出现，例如 ABCABCABC 或 CABCAB，或任何其他重复三元组​​的组合，三元组中的三个中的每一个出现一次（ABCABC 测试为真，ABBABB 测试为假） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:35:57.010

```
test="name(*[last()])=name(*[3]) 
  and name(*[1])!=name(*[2])
  and name(*[2])!=name(*[3])
  and name(*[1])!=name(*[3])
  and not(*[position() > 3][name()!=name(preceding-sibling::*[3])])" 
```

如果交错是完美的（或者如果只有三个项目），则返回 true。

编辑：添加了第一个条件以确保最终元组是完整的，并添加了三个中间条件以确保重复的元组包括三个项目中的每一个（即不包括重复项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:32:35.263

如果元组的顺序是固定的，则此模板将在存在 1 个或多个元组的所有情况下返回 true，否则返回 false：

```
<xsl:template match="t">
  <xsl:sequence
    select="
    count(*) gt 2 and
    count(*) = count(*[
      self::cat   and position() mod 3 = 1 or
      self::dog   and position() mod 3 = 2 or
      self::horse and position() mod 3 = 0])"/>
</xsl:template> 
```

如果元组的顺序可以变化，则对于所有有 1 个或多个元组的顺序与元组的第一个实例相同的情况，此模板将返回 true，否则返回 false

```
<xsl:template match="t">
  <xsl:variable name="cat.pos"   select="(count(cat[1]/preceding-sibling::*) + 1)   mod 3"/>
  <xsl:variable name="dog.pos"   select="(count(dog[1]/preceding-sibling::*) + 1)   mod 3"/>
  <xsl:variable name="horse.pos" select="(count(horse[1]/preceding-sibling::*) + 1) mod 3"/>
  <xsl:sequence
    select="
    count(*) gt 2 and
    count(*) = count(*[
      self::cat   and position() mod 3 = $cat.pos or
      self::dog   and position() mod 3 = $dog.pos or
      self::horse and position() mod 3 = $horse.pos])"/>
</xsl:template> 
```

# javascript - 时间戳不一致

> ID：13327413
> 
> 赞同：4
> 
> 时间：2012-11-11T00:18:12.393
> 
> 标签：javascript, datetime, casting, timestamp

我在玩 JavaScript 日期，我正在寻找与最后记录的数组有关的解释。为什么数字`1352589000, 1352589395`不一样？

代码

```
var examples = [
    "Fri Jan 16 1970 10:43:09 GMT-0500 (EST)",
    1352589395
];

var text = [
    new Date((examples[0])),
    new Date((examples[1])),
];

var unix = [
    new Date((examples[0])).getTime(),
    new Date((examples[1])).getTime(),
];

console.log(examples);
console.log(text);
console.log(unix); 
```

输出

```
[
  'Fri Jan 16 1970 10:43:09 GMT-0500 (EST)',
  1352589395
][
  'Fri Jan 16 1970 10:43:09 GMT-0500 (EST)' ,
  'Fri Jan 16 1970 10:43:09 GMT-0500 (EST)' 
][
  1352589000,
  1352589395
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:23:18.493

数字以毫秒为单位。它们之间的差异是395，不到半秒。您使用的字符串格式只下降到秒，因此它的毫秒部分为 0，但您正在解析的数字包括毫秒（全部 395）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:23:37.620

因为那个 Unix 时间戳是以毫秒为单位的。您没有指定毫秒，因此它在 1970 年 1 月 16 日给您准确的 10:43:09。另一个时间戳在 1970 年 1 月 16 日给您 10:43:09.395。

编辑

Unix 时间戳是自 1970 年 1 月 1 日以来的 SECONDS 数。Javascript 的 getTime() 返回自 1970 年 1 月 1 日以来的 MILLISECONDS 数。所以是的，它是 Unix 时间戳……以毫秒为单位。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T00:36:12.780

你给 Date() 两个不同的时间，它们都是不正确的。Javascript 的 Date 对象不接受当前时间或毫秒或日期字符串或 [年、月、日、小时、分钟、秒、毫秒] 的参数。

“Fri Jan 16 1970 10:43:09 GMT-0500 (EST)”对于 Date() 格式无效。有关正确的 DateString 格式，请检查[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)

# javascript - 为什么这个简单的 JavaScript 函数没有像我预期的那样工作？试图确定是否选中了复选框

> ID：13327417
> 
> 赞同：1
> 
> 时间：2012-11-11T00:18:51.557
> 
> 标签：javascript, jquery, jquery-selectors, client-side

我有以下形式的 HTML：

```
<div id="filters">
    <ul>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".one">One</label></li>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".two">Two</label></li>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".three">Three</label></li>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".four">Four</label></li>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".five">Five</label></li>
        <li><label class="checkbox"><input type="checkbox" value="" checked data-filter=".six">Six</label></li>
    </ul>
</div> 
```

我的 JavaScript 函数如下：

```
<!-- language: lang-js -->
function initFilters()
{
    $('#filters input').each(function(){
        if ($(this).checked) {
            console.log($(this).attr('data-filter')+' is checked');
            addFilter($(this).attr('data-filter'));
        } else {
            console.log($(this).attr('data-filter')+' is unchecked');
            removeFilter($(this).attr('data-filter'));
        };
    });
} 
```

我遇到的问题是`$(this).checked`总是返回false。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:20:41.270

jQuery 对象没有`checked`属性。试试这个：

```
this.checked 
```

或者

```
$(this).prop("checked") 
```

我发现第一种方式更容易阅读，而且效率更高，但是有些人坚持使用 jQuery 来处理*所有事情，*所以......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:20:35.020

`checked`是 DOM 元素的属性，而不是 jQuery 对象的属性。

```
if (this.checked) { 
```

* * *

您还可以使用[`.prop`](http://api.jquery.com/prop/)jQuery 对象方法检索所述属性：

```
if ($(this).prop("checked")) { 
```

然而，上面的代码片段创建了一个新的 jQuery 对象并在其上调用了一个方法，这是不推荐的 - 这是不必要的，提供了较慢的性能并需要更多的输入。我也发现本地方法更容易阅读。

`.prop`在使用一组元素或传递选择器而不是 DOM 元素引用时更合适。

不过，请选择您认为更具可读性和可维护性的任何一个，因为两者都适合您的用例。

# excel - VBA-excel粘贴图表为图片

> ID：13327420
> 
> 赞同：4
> 
> 时间：2012-11-11T00:19:15.793
> 
> 标签：excel, vba, charts, paste

我正在从同一来源创建各种图表。我希望能够用 vba 将每个图表剪切粘贴为图片。有谁知道正确的代码？

我试过这个，但它不起作用：

```
Range("B21:C22").Select
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("'Graphs'!$B$21:$C$22")
ActiveChart.ChartType = xl3DPie
ActiveChart.ChartArea.Select
ActiveChart.ChartArea.Copy
ActiveSheet.Pictures.Paste.Select 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T01:01:20.833

我总是觉得复制图表令人困惑，但我认为这可以满足您的需求，并且不使用 any `Selects`，这总是很好的。

```
Sub CreateAndCopyChart()
Dim ws As Worksheet
Dim cht As Chart

Set ws = ThisWorkbook.Worksheets("Graphs")
Set cht = ws.Shapes.AddChart.Chart
With cht
    .SetSourceData ws.Range("$B$21:$C$22")
    .ChartType = xl3DPie
    .ChartArea.Copy
End With
ws.Range("A2").PasteSpecial xlPasteValues
cht.Parent.Delete
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:55:09.363

```
Range("A1:A8").Select
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("'Sheet1'!$A$1:$A$8")
ActiveChart.ChartType = xlLine
ActiveChart.PlotArea.Select
ActiveChart.ChartArea.Copy

Range("A20").Select
ActiveSheet.Paste 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T10:55:11.190

有点慢，但可以让您将图表转换为图片。我使用它来创建报告（在之前的步骤中，我从另一个选项卡复制图表，其中创建了原始图表）

```
ActiveSheet.ChartObjects.Select 
Selection.Copy                        'copy charts 
Range("A1").Select                    'choose destination
ActiveSheet.Pictures.Paste.Select     'paste as pictures
ActiveSheet.ChartObjects.Delete       'delete charts (leaving just pictures) 
```

# module - Centos 6.3 上的 Nginx 模块安装

> ID：13327429
> 
> 赞同：1
> 
> 时间：2012-11-11T00:20:36.760
> 
> 标签：module, nginx, directory, installation, centos

我想安装一个模块，我找不到 nginx 源目录。有人可以告诉我吗？

# meteor - Meteor：如何获取用于调试客户端的未压缩文件

> ID：13327432
> 
> 赞同：2
> 
> 时间：2012-11-11T00:20:41.317
> 
> 标签：meteor

如何获得未压缩的 JS 以使用 Meteor 调试客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:54:24.657

如果您在开发模式下在本地运行流星，则 javascript 应该已经解压缩（即未缩小）。

如果你想在部署后解压 javascript，使用`meteor deploy --debug`命令

（见[http://docs.meteor.com/#meteordeploy](http://docs.meteor.com/#meteordeploy)）

# php - 创建一个函数来检查用户是否登录 php

> ID：13327433
> 
> 赞同：0
> 
> 时间：2012-11-11T00:20:44.443
> 
> 标签：php

我想创建一个函数来检查用户是否已登录。如果是，则应将用户导航到 userActive，否则应显示 loginForm。

我还想在 loginForm 页面上进行检查，以检查用户是否已登录。如果是，则应将它们带到 userActive，或保留在 loginForm 页面上。

为什么问题是以下代码不起作用的原因。我一直在循环。

```
$_COOKIE['user_id'] = "user_id: 1";

activeUser();

function activeUser()
{
    if($_COOKIE['user_id'] == "user_id: 1")
    {
        header('location: index.php?a=activeUser');
    }
    else
    {
        header('location: index.php?a=loginForm');
    }
}

switch($_GET['a'])
{
    case 'loginForm':
        include_once('loginForm.php');
    break;

    case 'activeUser':
        include_once('activeUser.php');
    break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:25:09.707

这不是在 PHP 中设置 cookie 的正确方法。有关详细信息，请参阅[文档](http://php.net/manual/en/function.setcookie.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:27:28.953

如果你把它放在你的索引页面上......你正在使用 GET 变量重定向到你的索引页面......所以......循环后循环到同一页面。

您也没有正确设置 cookie。

您可能想要研究 SESSION 变量，以及在实现登录系统时可能更容易掌握的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T00:57:24.093

这是大多数框架的做法：

将所有请求重定向到一个页面：index.php

在此文件中加载您需要的所有函数/类（引导程序），这可能是：

*   用户是否已登录（访问受限）？

*   他来自哪个国家（显示他附近的内容）？

*   他说什么语言（英语或西班牙语网站...）？

*   ...

*   最后：他想去哪里（页面），他可以去那里吗？如果不重定向。

从头开始构建所有这些可能很棘手，会话、cookie、重定向、布局、视图、404、500、数据库查询（安全的）......大多数人使用框架，这里是其中的一些列表：

*   CakePHP

*   代码点火器

*   Symfony

*   Zend 框架

希望能帮助到你。

# jailbreak - 神学跳板

> ID：13327435
> 
> 赞同：2
> 
> 时间：2012-11-11T00:21:02.113
> 
> 标签：jailbreak, tweak, theos

有没有人有这种经验？

我只是按照[http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak/](http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak/)，但是每个 make 命令最终都像：没有 springboard/springboard.h 文件或目录。如何解决这个问题？

还有一件事，谁能给我**Saurik 的 libsubstrate.dylib 动态库的**下载链接？我做了很多搜索，一无所获。

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T12:54:26.270

从这里[https://github.com/rpetrich/iphoneheaders](https://github.com/rpetrich/iphoneheaders)使用rpetrich 存储库中的**SpringBoard 标头**

下载这些**头文件**并将它们放在 /var/theos/include 中。（如果你在你的 iDevice 上开发）。然后在顶部的tweak.xm 中输入#import`<SpringBoard/SpringBoard.h>`并尝试编译。现在应该为你工作。

还要查看 rpetrich 的 theos fork。你应该在那里找到 libsubstrate.dylib

# wpf - wpf，位图解码器问题

> ID：13327437
> 
> 赞同：0
> 
> 时间：2012-11-11T00:21:20.993
> 
> 标签：wpf, bitmap, icons

在对话框窗口的代码隐藏中，我根据应用程序的字体大小选择图标大小，方法如下：

```
double iconSize = 24;
if (Session.FontSize <= 16)
  iconSize = 48;
else if (Session.FontSize >= 28)
  iconSize = 72;

Uri uri = new Uri("pack://application:,,,/MyApp;component/Resources/
                                               Status-dialog-information.ico");
BitmapDecoder decoder = BitmapDecoder.Create(uri, 
                                          BitmapCreateOptions.DelayCreation,
                                          BitmapCacheOption.Default);
BitmapSource bms = decoder.Frames.
                   Where(f => f.Width == iconSize).FirstOrDefault(); 
imageControl.Source = bms; 
```

，其中 imageControl 是图像控件。我使用 Oxygen 中的图标（在 iconarchive.com 中找到）

现在，上面的代码适用于一些图标，没有问题。但是对于其他一些图标文件，例如上面的，它只在我第一次创建我的对话框窗口时起作用。第二次创建对话框窗口 BitmapDecoder.Create() 方法抛出 System.IO.FileFormatException -“图像格式无法识别”。请建议如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:29:31.313

可能很难回答，没有更多细节。我刚刚创建了静态字段来初始化一次。

# objective-c - 视图是否在每次打开时都会重置其所有变量？

> ID：13327441
> 
> 赞同：0
> 
> 时间：2012-11-11T00:22:26.617
> 
> 标签：objective-c

我有一个 int ，每次视图重新打开/离开时都会自行重置。我已经尝试了所有我能想到的声明 int 的方法，从公共到实例变量再到全局变量，但它似乎仍然重置！

```
@interface MainGameDisplay : UIViewController
extern int theDay;

@implementation MainGameDisplay

- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"%i", theDay);
}

- (IBAction)returnToHome:(id)sender {
        ViewController *new = [[ViewController alloc] initWithNibName:nil bundle:nil];
        [self presentViewController: new animated:YES completion:NULL];
        NSLog(@"%i", theDay);
}

- (IBAction)theDayAdder:(id)sender {
    theDay++;
} 
```

好的，所以 theDay 是一个全局整数变量。在 View load NSLog 返回输出 0。然后我可以根据需要多次单击 theDayAdder，当我单击 returnToHome 时，它​​会告诉我 theDay 是什么。然而，当我回到 MainGameDisplay 页面时，theDay 将被重置为零，即使它是一个全局变量？

```
Output:
0
N (number of times you clicked 'theDayAdder' button)
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:50:10.373

问题是您每次返回 MainGameDisplay 时都会分配一个新实例，因此您的全局变量当然会重置为 0。您需要在 ViewController 中创建一个属性（类型为强），使用它来每次都回到同一个实例。

```
- (IBAction)returnToGameDisplay:(id)sender {
     if (! self.mgd) {
        self.mgd = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];
     }
     [self presentViewController: self.mgd animated:YES completion:NULL];
     NSLog(@"%i", theDay);
} 
```

在此示例中，mgd 是在 .h 文件中创建的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:18:36.397

`extern`变量应该是恒定的。如果您希望您的`MainGameDisplay`类是长期存在的，或者如果`theDay`只应该与该类相关联，为什么不将 theDay 声明为属性，或者，如果您只需要在 MainGameDisplay 内部将其设置为 ivar .

如果您希望该值独立于声明它的类实例继续存在，另一种选择是声明它`static`。静态 var 将保留其值，即使在声明它的类的不同实例的生命周期中也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:01:03.887

您应该知道 viewDidLoad() 是在加载视图时调用的——而不是在视图“打开”时调用。您可能会在保留值中打开一个视图，然后一次又一次地重新打开，并且只调用一次 vieDidLoad()。然而，每当视图变得可见时，viewWillAppear() 就是被调用的委托。因此，尝试在 viewWillAppear() 中输出您的值——而不是 viewDidLoad() 并适当地调用视图（即，让它保持不变，而不是在每次需要时创建）。这将防止视图在调用之间被破坏。您的视图代码应如下所示：

```
@interface MainGameDisplay : UIViewController
extern int theDay;

@implementation MainGameDisplay

- (void)viewDidLoad {
    [super viewDidLoad];
}

-(void) viewWillAppear:(BOOL) animated {
    [super viewWillAppear:animated];
    NSLog(@"%i", theDay);
}

- (IBAction)returnToHome:(id)sender {
        ViewController *new = [[ViewController alloc] initWithNibName:nil bundle:nil];
        [self presentViewController: new animated:YES completion:NULL];
        NSLog(@"%i", theDay);
}

- (IBAction)theDayAdder:(id)sender {
    theDay++;
} 
```

视图的父级（我假设 appDelegate）应该执行以下操作

```
@property (nonatomic, strong) MainGameDisplay *mainGameDisplay = [[MainGameDisplay alloc] initWithNib:@"MainGameDisplay" …] 
```

ViewDidLoad() 被调用一次——在视图被创建和加载之后。但是，由 IBAction 等触发的 viewWillAppear() 和其他函数被适当地调用。

# asp.net-mvc-3 - 如何在我的模型中有一个必需的和非序列化的属性

> ID：13327443
> 
> 赞同：0
> 
> 时间：2012-11-11T00:22:33.017
> 
> 标签：asp.net-mvc-3, requiredfieldvalidator, nonserializedattribute

在我的模型中，我有这样的事情：

```
 [...]

    public string PasswordConfirm { get; set; }

    public string Captcha { get; set; }

    [...] 
```

我希望这两个属性是必需的，但不可序列化

我尝试使用 [required] 和 [nonSerialized] 注释，但没有成功。我已经看过[这个帖子了](https://stackoverflow.com/questions/1728367/how-to-prevent-auto-implemented-properties-from-being-serialized)

但我不知道如何做我想做的事。这将有助于 NonObtrusive-Validation，我希望这些字段完整，但我不想序列化它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:24:20.623

我找到了答案的解决方案。

我可以使用与 [required]、[compare] 兼容的注解 [notMapped] ...

我也使用这个：context.Configuration.ValidateOnSaveEnabled = false; 我在那里填满了我的基地，因为我在这里遇到了验证问题。

# java-ee-6 - 从 JBoss 7.1 EJB3.1 访问 JBoss 5 EJB3.0

> ID：13327449
> 
> 赞同：0
> 
> 时间：2012-11-11T00:23:38.213
> 
> 标签：java-ee-6, jboss7.x

我有一堆在 JB-AS 5.1.0 上运行的服务（EJB、远程无状态）。现在我有一个新的 AS7.1，我在其上开发了新的服务（JEE6、EJB、CDI，...）我想通过远程 JNDI 访问 AS5.1 服务。

有没有人这样做过并且可以提供帮助？我需要我的 JEE6-Beans 才能访问 AS5.1 客户端罐子，所以我试图将它们添加到 ear/lib 或创建一个包含罐子的模块，但到目前为止还没有运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:23:43.680

到目前为止我看到的最好的解决方案可以在[这里](http://wolf-71.blogspot.com/2010/02/et-phone-home.html)找到。您可以关注[此](https://community.jboss.org/message/623404)论坛以获取更多信息。

请在此处发布您的发现，以便其他人可以帮助/受益。

祝你好运！

# jquery-ui - jquery ui selectable：手动/以编程方式选择孩子

> ID：13327454
> 
> 赞同：0
> 
> 时间：2012-11-11T00:24:32.123
> 
> 标签：jquery-ui, select

> **可能重复：**
> [如何使用 jQuery UI 以编程方式选择可选择项？](https://stackoverflow.com/questions/3140017/how-to-programmatically-select-selectables-with-jquery-ui)

有谁知道如何手动或以编程方式选择可选择的 jQuery UI 的子项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:35:03.530

这不是可选对象独有的，但如果您只想获取 html 节点，可以使用[此处](http://api.jquery.com/nth-child-selector/)`:nth-child()`找到的选择器。

```
$(".selector li:nth-child(2)") 
```

根据您需要对这个孩子做什么，这可能对您有用。

编辑

我想我错过了您对“选择”的预期含义。我没有立即看到使用 API 选择项目的简单方法，但您始终可以将类添加`ui-selected`到子项目中，其余的应该由 css 处理。但是，这可能不会触发 API 事件。

或者，你可以这样做

```
$(".selector li:nth-child(2)").click(); 
```

用假鼠标点击选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:59:56.510

从我对[这个问题](https://stackoverflow.com/questions/3140017/how-to-programmatically-select-selectables-with-jquery-ui)的回答...

[http://jsfiddle.net/XYJEN/1/](http://jsfiddle.net/XYJEN/1/)

```
function SelectSelectableElements (selectableContainer, elementsToSelect)
{
    // add unselecting class to all elements in the styleboard canvas except the ones to select
    $(".ui-selected", selectableContainer).not(elementsToSelect).removeClass("ui-selected").addClass("ui-unselecting");

    // add ui-selecting class to the elements to select
    $(elementsToSelect).not(".ui-selected").addClass("ui-selecting");

    // trigger the mouse stop event (this will select all .ui-selecting elements, and deselect all .ui-unselecting elements)
    selectableContainer.data("selectable")._mouseStop(null);
} 
```

# php - 谁有好的 SSL 教程？(PHP)

> ID：13327457
> 
> 赞同：2
> 
> 时间：2012-11-11T00:24:45.897
> 
> 标签：php, ssl

这将是一个有点具体。我不准备为 CA 签名证书付费，我将自己签名。我相信我，我不相信他们，我看不出我的证书会变得更不安全。

我很确定我的主机提供 SSL（我正在检查）。我只是想知道我应该如何使用 SSL 来保护登录页面，也许还有几个文件夹，谁知道呢。我找不到不涉及 VeriSign 或其他一些荒谬组织的教程。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:29:31.787

SSL 不是 PHP 的功能，而是您的 Web 服务器（很可能是 Apache）的功能。

附带说明：自签名证书不会降低其加密的安全性（只要您对私钥非常小心）。但是，您网站的每位访问者在加载您的任何内容之前都会看到一条警告，说明您的证书不受信任。

这是因为您不是有效的 CA，并且您的“根证书”没有安装在普通计算机上。SSL*应该*与身份验证一样重要，因为它与加密有关，并且通知基本上是声明您无权验证自己的身份。

# java - ListView 更新单行

> ID：13327459
> 
> 赞同：5
> 
> 时间：2012-11-11T00:25:51.247
> 
> 标签：java, android

按下按钮后，我想用不同的内容更新列表视图中的单行。我知道我可以使用`notifydatasetchanged(`），但这会更新整个`listView`。

我已经阅读了这个[答案](https://stackoverflow.com/a/9987616/1552551)，它非常适合我想做的事情。

我已经完成了 5 行的列表视图，当我按下按钮时，我想用不同的文本更新第 4 行。我不想以编程方式设置文本，因为这只是一个虚拟项目，只是为了查看是否可以刷新单行，而我的真实项目比`textview`.

所以我的问题是：我可以`getView()`用来更新 a 中的单行`listview`吗？

这是我的代码：

*我的活动：*

```
public class MainActivity extends Activity {

    public ListView list1;
    public listAdapter adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        list1 = (ListView) findViewById(R.id.my_list);
        adapter = new listAdapter(this);
        list1.setAdapter(adapter);

        Button button1 = (Button) findViewById(R.id.my_button);
        button1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                adapter.setText("Different text");
                View row2Update = list1.getChildAt(3);
                list1.getAdapter().getView(3, row2Update, list1);

            }
        });

    } 

} 
```

*我的适配器：*

```
public class listAdapter extends BaseAdapter{

    public Activity activity;
    public String text="Normal Text";

    public listAdapter(Activity activity){

        this.activity = activity;
    }

    public void setText(String text){
        this.text = text;
    }

    public int getCount() {
        return 5;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = activity.getLayoutInflater();
        LinearLayout rowView = (LinearLayout) inflater.inflate(R.layout.row_layout, null);
        TextView textView = (TextView) rowView.findViewById(R.id.row_text);
        textView.setText(text);
        return rowView;
    }

} 
```

这是活动的样子：

![活动快照](../Images/82c1998a670eae651d9f3fef35bdbda8.png)

但是当我按下按钮时，什么都没有改变

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:40:13.077

您**不能自己**调用​​适配器的**getView()**方法。适配器的 getView() 方法仅在以下情况下被调用

*   列表视图已创建
*   当用户滚动列表视图时
*   当 notifysetdatachanged() 被调用时。
    所有这些都是由操作系统完成的。为列表视图中的所有行调用 GetView()。它不只是单行调用。因此，如果您想更改行，则必须在 a 等中再次提供数据`String[]`如果 您希望为单行显示不同的文本，onClick() 按钮 - 您可以这样`ArrayList<>`做

    公共类 listAdapter 扩展 BaseAdapter{

    ```
    public Activity activity;
    public ArrayList<String> text;

    public listAdapter(Activity activity){

        this.activity = activity;
    }

    public void setText(ArrayList<String> text){
        this.text = text;
    }

    public int getCount() {
        return 5;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = activity.getLayoutInflater();
        LinearLayout rowView = (LinearLayout) inflater.inflate(R.layout.row_layout, null);
        TextView textView = (TextView) rowView.findViewById(R.id.row_text);
        textView.setText(text[position]);
        return rowView;
    } 
    ```

    在
    你的活动中：

    ```
    list1 = (ListView) findViewById(R.id.my_list);
    adapter = new listAdapter(this);
    String[] entries={"Normal Text","Normal Text","Normal Text","Normal text","Normal text"};
    ArrayList<String> text=Arrays.asList(entries);
    adapter.setText(text);
    list1.setAdapter(adapter);

    Button button1 = (Button) findViewById(R.id.my_button);
    button1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
           text.set(3,"Different Text");
            adapter.setText(text);
            list1.setAdapter(adapter);

        }
    }); 
    ```

    正如@Andy 在其中一个评论中建议的那样，还有另一种方法：

    ```
    listViewPeople.setOnItemClickListener(new ListView.OnItemClickListener() {
            @Override
        public void onItemClick(AdapterView<?> a, View v, int position, long l) {
                 //IF YOU WANT TO CHANGE THE CONTENT OF THE ROW CLICKED
           if(position == someNumber) {
                   text.set(position,"different Text");
                   list1.setAdapter(text);
           }
        }
    }); 
    ```

对不起，粗体文字。出于某种原因，**CTRL+K**不适用于上述代码。

# python - 如何使用 tkinter 从输入框中获取值

> ID：13327460
> 
> 赞同：0
> 
> 时间：2012-11-11T00:26:25.880
> 
> 标签：python, python-2.7, tkinter, python-imaging-library

我想从打开的输入框中获取值，并将它们变成`crop1`. 我是 tkinter 和编程的新手，所以我不确定如何将值放入函数中。很抱歉在短时间内问了两个问题，这是我今天的最后一个问题。

```
 from Tkinter import *
from PIL import Image, ImageTk, ImageFilter, ImageEnhance

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        master.wm_title("Image examples")
        self.pack()
        self.createWidgets()
        master.bind('s', self.sharpen)
        master.bind('b', self.brighten)
        master.bind('d', self.darken)
        master.bind('B', self.blur)
        master.bind('r', self.rotate)
        master.bind('I', self.brighten)
        master.bind('c', self.cool)
        master.bind('w', self.warm)
        master.bind('<BackSpace>', self.undo)

def createWidgets(self):
    self.img = Image.open("lineage.jpg")
    self.photo1 = ImageTk.PhotoImage(self.img.convert("RGB"))
    self.label1 = Label(self, image=self.photo1)
    self.label1.grid(row=0, column=0, padx=5, pady=5, rowspan=10)

    self.photo2 = ImageTk.PhotoImage(self.img.convert("RGB"))
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

    button1 = Button(self, text="Brighten", command=self.brighten)
    button1.grid(row=0, column= 2)
    button2 = Button(self, text="Darken", command=self.darken)
    button2.grid(row=1, column= 2, sticky=N)
    button3 = Button(self, text="Warm", command=self.warm)
    button3.grid(row=2, column= 2, sticky = N)
    button4 = Button(self, text="Cool", command=self.cool)
    button4.grid(row=3, column= 2, sticky = N)
    button5 = Button(self, text="Sharpen", command=self.sharpen)
    button5.grid(row=4, column= 2, sticky = N)
    button6 = Button(self, text="Blur", command=self.blur)
    button6.grid(row=5, column= 2, sticky = N)
    button7 = Button(self, text="Rotate", command=self.rotate)
    button7.grid(row=6, column= 2, sticky = N)
    button8 = Button(self, text="Crop", command=self.crop)
    button8.grid(row=7, column= 2, sticky = N)
    button9 = Button(self, text="W/B Levels", command=self.brighten)
    button9.grid(row=8, column= 2, sticky = N)
    button10 = Button(self, text="Undo", command=self.undo)
    button10.grid(row=9, column= 2, sticky = N)

def brighten(self, event = None):
    img2 = self.img.point(lambda p: p * 1.9)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def darken(self, event = None):
    img2 = self.img.point(lambda p: p * 0.5)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def warm(self, event = None):
    img = Image.open("lineage.jpg").convert("RGB")
    (w, h) = (img.size[0], img.size[1])
    img2 = img.copy()
    pixels = img2.load()
    for x in range(w):
        for y in range(h):
            (r, g, b) = pixels[x,y]
            r = int(r*1.3)
            pixels[x,y] = (r, g, b)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def cool(self, event = None):
    img = Image.open("lineage.jpg").convert("RGB")
    (w, h) = (img.size[0], img.size[1])
    img2 = img.copy()
    pixels = img2.load()
    for x in range(w):
        for y in range(h):
            (r, g, b) = pixels[x,y]
            r = int(r/1.3)
            pixels[x,y] = (r, g, b)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def sharpen(self, event = None):
    img2 = self.img.filter(ImageFilter.SHARPEN)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def blur(self, event = None):
    img2 = self.img.filter(ImageFilter.BLUR)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def rotate(self, event = None):
    img2 = self.img.rotate(270)
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def undo(self, event = None):
    img2 = self.img
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

def crop(self):
    self.root = Tk()
    self.root.wm_title("Insert Coords")

    self.x0 = Entry(self.root)
    self.x0.grid()

    self.x1 = Entry(self.root)
    self.x1.grid()

    self.y0 = Entry(self.root)
    self.y0.grid()

    self.y1 = Entry(self.root)
    self.y1.grid()

    Button(self.root, text="Crop", command=self.close_crop).grid()

def close_crop(self):        
    self.crop1(self.x0.get(), self.x1.get(), self.y0.get(), self.y1.get())
    self.root.destroy()                

def crop1(self, x0, x1, y0, y1):
    print x0, x1, y0, y1
    img = Image.open("lineage.jpg").convert("RGB")
    (w, h) = (img.size[0], img.size[1])
    img2 = self.img
    img2 = img2.crop((self.x0,self.x1,self.y0,self.y1))
    self.photo2 = ImageTk.PhotoImage(img2)
    self.label2 = Label(self, image=self.photo2)
    self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:29:42.690

可能有更好的方法来做到这一点，但这有效。添加一个按钮，当按下该按钮时，从文本条目中获取输入并将它们传递给裁剪功能。

```
def crop(self):
    self.root = Tk()
    self.root.wm_title("Insert Coords")

    self.x0 = Entry(self.root)
    self.x0.grid()

    self.x1 = Entry(self.root)
    self.x1.grid()

    self.y0 = Entry(self.root)
    self.y0.grid()

    self.y1 = Entry(self.root)
    self.y1.grid()

    Button(self.root, text="Crop", command=self.close_crop).grid()

def close_crop(self):        
    self.crop1(self.x0.get(), self.x1.get(), self.y0.get(), self.y1.get())
    self.root.destroy()                

def crop1(self, x0, x1, y0, y1):
    print x0, x1, y0, y1 
```

# design-patterns - JavaFx 2.0 方块游戏动画/代码设计

> ID：13327461
> 
> 赞同：4
> 
> 时间：2012-11-11T00:26:46.550
> 
> 标签：design-patterns, javafx-2

为了提高我自己的编码技能，我最近一直在使用 JavaFx 2.0 用 Ja​​va构建[这个游戏（Block blaster）的一个版本。](https://web.archive.org/web/20181006184919/http://www.mindjolt.com:80/block-blaster.html)因为这只是为了我的利益，没有真正考虑软件模式或设计，所以所有的游戏逻辑最终都在 GUI 类中，随着我添加功能，它变得越来越臃肿。我最终决定重构代码库，将游戏逻辑和模型与演示 (GUI) 分开。

经过一番研究，我决定使用 MVC 或 MVP 之类的东西。在这样做的过程中，我决定动画（方块在触发时向上滑动游戏网格，方块在从游戏中移除时闪烁等）将成为视图层的一部分。

这导致的问题是，当用户启动一个块并且控制器告诉视图移动块时，它会`timeline`为动画创建 JavaFx 并调用`timeline.play()`. 这样做不会导致程序流在动画发生时在视图中暂停，因此视图方法返回只是刚刚开始动画，这意味着控制器然后继续检查该块是否已生成一组块如果是这样，在移动动画到达任何地方之前删除它们。

在旧的（讨厌的）实现中`timeline.onFinish`，一旦动画完成，我就使用 来调用块组检查，但是由于`timeline`现在在视图中和控制器中的检查功能，我不知道如何将其放入我的新设计中。

有没有一种方法可以等待 JavaFx 动画完成（不让应用程序线程休眠）或者我应该使用不同的设计模式来帮助避免这些问题？

**来自控制器的代码**

```
public void fire()
{   
    //Get the current column the launcher is in.
    int x = launcher.getX(), startY = launcher.getY();
    //Find the next available block in the column.
    int endY;
    for(endY = h; endY > 0 && blockMap[endY - 1][x] == null; endY--){}

    //Create a new block of the same colour and location as that on the launcher.
    addBlock(x, launcher.getY(), getCurrentColourAndRotate());
    //Move the block in the GUI and model (this will trigger the animation in the GUI)
    moveBlock(x, startY, x, endY);

    //Remove any block groups that have been made.
    checkBlock(blockMap[endY][x]);
    //Remove any blocks now not connected to the top of the game grid
    removeUnconnectedBlocks();
} 
```

**示例游戏截图**

[![示例游戏图片](../Images/8a3bb3c78e2c16fc6c32cb9be5799f2a.png)](https://i.stack.imgur.com/4KcC1.jpg)
[（来源：[myhappygames.com](http://m2.myhappygames.com/files/pics/2/Block-Blaster-6-2787.jpg)）]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:34:36.233

好的，所以这是匆忙完成的，但是假设一个 Block 是您按下的正方形，而 Group 是 3 个或更多与我的绘图中颜色相同的相邻 Block 的集合，那么您遇到的问题是您用同样的方法做的太多了。

![在此处输入图像描述](../Images/ab031e21848552d078ad763aefd7c5fb.png)

![在此处输入图像描述](../Images/f6ba6a53bd55ccfd595cff97ce42146c.png)

当你按下一个块时，你应该通知你的控制器。这应该决定这是否是 Group 的一部分，如果是，则让 Group 着火？（我不熟悉术语）。然后应该给这个组中的块一个新的状态，例如 ON_FIRE。模型将通知所有观察者这些块现在是 ON_FIRE。一旦 View 获得此信息，您将执行 ON_FIRE 动画、折叠或其他任何操作。一旦完成，应该对应于`timeLine.onFinnish`，您现在调用控制器中的下一个方法，例如`completedBurning`。这现在将负责清理和间接触发新事物。

希望这是有道理的。

![类图](../Images/c88dbf611fc4734fb98e61a7f8296e17.png)

# php - 如何在 Zend Framework 2 的 PHPUnit 测试中要求一个类？

> ID：13327462
> 
> 赞同：1
> 
> 时间：2012-11-11T00:26:57.127
> 
> 标签：php, phpunit, zend-framework2, code-reuse, require-once

目前，我正在尝试更新和扩展我对 Zend Framework 2 的知识，并且正在查看[Zend 的用户指南](http://zf2.readthedocs.org/en/latest/index.html)，特别是有关[Routing and Controllers](http://zf2.readthedocs.org/en/latest/user-guide/routing-and-controllers.html)的页面。

看到四个几乎相同的用于断言操作的测试函数可以访问，这冒犯了我的最佳实践概念，因此我重写了最后四个方法，添加了第五个作为帮助程序，如下所示：

```
 private function assertActionCanBeAccessed ($action)
    {
        $this->routeMatch->setParam('action', $action);

        $result     = $this->controller->dispatch($this->request);
        $response   = $this->controller->getResponse();

        $this->assertEquals (200, $response->getStatusCode());
    }

    public function testAddActionCanBeAccessed()    { $this->assertActionCanBeAccessed('add'); }
    public function testDeleteActionCanBeAccessed() { $this->assertActionCanBeAccessed('delete'); }
    public function testEditActionCanBeAccessed()   { $this->assertActionCanBeAccessed('edit'); }
    public function testIndexActionCanBeAccessed()  { $this->assertActionCanBeAccessed('index'); } 
```

当我运行 PHPUnit 时，它运行良好。

但在我看来，这种方法可能对其他控制器有用。而且，此外，我只想知道如何使方法在我的代码中普遍可用。

所以我写了以下课程：

```
<?php

class ActionTestToolkit
{
    public static function assertActionCanBeAccessed ($testcase, $action)
    {
        $testcase->routeMatch->setParam('action', $action);

        $result     = $testcase->controller->dispatch($testcase->request);
        $response   = $testcase->controller->getResponse();

        $testcase->assertEquals (200, $response->getStatusCode());
    }
} 
```

?>

...并将其保存到`vendor/Flux/library/ActionTestToolkit`

如果没有 Zend 框架，我可能会使用`require_once`.，但我发现在这个错综复杂的文件网络中找到正确的路径是不可能的。谷歌搜索这个主题似乎暗示我应该用自动加载器做点什么

有人可以告诉我我应该/必须添加什么代码*吗*

*   公共/index.php
*   模块/专辑/测试/AlbumTest/Controller/AlbumControllerTest.php
*   和/或任何其他文件

为了我可以更换线条

```
public function testAddActionCanBeAccessed() 
       { $this->assertActionCanBeAccessed('add'); } 
```

和

```
public function testAddActionCanBeAccessed() 
       { ActionTestToolkit::assertActionCanBeAccessed($this, 'add'); } 
```

这让我整个晚上都发疯了，所以提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:59:35.187

在您的模块中创建测试文件夹并放置 phpunit.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

<phpunit
    bootstrap="./bootstrap.php"
    colors="true"
    backupGlobals="false"
>
    <testsuites>
        <testsuite name="FluxModule Test Suite">
            <directory>./</directory>
        </testsuite>
    </testsuites>

</phpunit> 
```

还有 bootstrap.php 你说你的模块的类在哪里

```
 <?php

chdir(__DIR__);

if (!(@include_once __DIR__ . '/../vendor/autoload.php') && !(@include_once __DIR__ . '/../../../vendor/autoload.php')) {
    throw new RuntimeException('vendor/autoload.php could not be found. Did you run `php composer.phar install`?');
}

$autoloader = new Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));
$autoloader->registerNamespaces(array('Flux' => __DIR__ . '/../src/Flux'));
$autoloader->register(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T11:05:24.063

我认为第一个问题是您是否使用作曲家（[https://getcomposer.org/](https://getcomposer.org/)）？似乎您有一个供应商文件夹似乎表明了这一点，但是您没有供应商/autoload.php ..您在该文件夹中还有什么..？

我发现使用 composer 处理自动加载简化了很多事情，它与 zf2 集成得非常好（如果可能的话，它将使用 composer autoload）......此外，它还包含来自网络的其他代码库，但也同一台机器上的其他 git 存储库真的很容易（所以你可以让你的断言库跨项目可用）..但我离题了......

例如，这是我放入 composer.json 的内容，以便能够从手动创建的“/src”文件夹中自动加载文件（使用“Foo”作为我的供应商名称）：

```
{ /* ... */
    "autoload": {
        "psr-0": {"Foo": "src/" }
    }
} 
```

例如，以文件 'src/Foo/Form/View/Helper/FormElement.php' 为例：我可以在我的测试中将其引用为 '\Foo\Form\View\Helper\FormElement'。请注意，composer 还允许您使用 psr-4，它在某种程度上使文件夹结构扁平化。

另请注意，正如其他帖子所建议的那样，您必须在 Boostrap.php 中包含作曲家自动加载器：

phpunit.xml（在 /tests 文件夹中）：.. bootstrap="./Bootstrap.php" ..

Bootstrap.php（在 /tests 文件夹中）：

```
chdir(dirname(__DIR__));

// Setup autoloading
require 'init_autoloader.php'; 
```

开始使用 composer 可能看起来有点开销，但从长远来看，它极大地简化了事情......

希望这有所帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:10:13.060

只需在 PHPUnit 的引导程序中包含自动加载。

了解 ZF2 如何运行测试

[https://github.com/zendframework/zf2/blob/master/tests/phpunit.xml.dist](https://github.com/zendframework/zf2/blob/master/tests/phpunit.xml.dist)

[https://github.com/zendframework/zf2/blob/master/tests/Bootstrap.php](https://github.com/zendframework/zf2/blob/master/tests/Bootstrap.php)

# layout - 固定宽度（位置：固定）--流体宽度（可滚动）--固定宽度（可滚动）

> ID：13327470
> 
> 赞同：2
> 
> 时间：2012-11-11T00:27:59.230
> 
> 标签：layout, fixed, fluid-layout

好吧，我有这个问题，但是每当我想搜索“fixed-fluid-fixed”时，它会在第一列带回固定宽度，而不是固定位置。

如何获得这样的 3 列布局： [https ://dl.dropbox.com/u/1331627/layout.jpg](https://dl.dropbox.com/u/1331627/layout.jpg)

我所看到的所有东西都有浮动，但这似乎搞砸了右侧的固定位置菜单。

我想让图像自行缩放并具有固定宽度的第三列。第 2 列和第 3 列一起滚动。

难住了。

# javascript - 如果对它进行第二次调用，我如何中止 javascript 函数？

> ID：13327483
> 
> 赞同：0
> 
> 时间：2012-11-11T00:31:32.050
> 
> 标签：javascript, android

如果再次调用 Javascript 函数时它仍在运行，我该如何杀死它？

情况是这样的。我有一个具有搜索功能的 HTML5 Android 应用程序。当用户键入时，它会在 HTML5 数据库中搜索匹配项。搜索框中的每次击键都会触发一个功能以获取建议。但是由于用户的输入速度比数据库引擎在相对较慢的设备（比如我自己的，或者实际上是模拟器）上返回建议的速度更快，因此后续按键会排队，因此建议可能需要一段时间才能与用户输入的内容相匹配.

所以我想做的是找到某种方法来终止之前对 getSuggestions 函数的调用，如果在完成之前再次调用它。

很容易设置一个全局函数，该函数在各个阶段进行测试并在看到它时中止，但这不会阻止数据库引擎中堆积的查询，我猜这可能是发生阻塞的地方。这就是为什么我正在寻找某种方法来杀死整个功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:33:14.677

听起来你想要[underscore.js debounce 方法](http://underscorejs.org/#debounce)

基本上你会像这样使用它：（为简洁起见，使用 jQuery）

```
$('#searchfield').keyup(_.debounce(getSuggestions, 250)); 
```

`getSuggestions`这将仅在事件未触发 250 毫秒时调用该函数。因此，如果您正在打字，在您暂停至少四分之一秒之前，什么都不会发生。

它的工作原理粘贴在下面。它围绕一个函数包装了一堆逻辑并返回一个新函数。函数式编程不是很有趣吗？

```
 // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, result;
    return function() {
      var context = this, args = arguments;
      var later = function() {
        timeout = null;
        if (!immediate) result = func.apply(context, args);
      };
      var callNow = immediate && !timeout;
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
      if (callNow) result = func.apply(context, args);
      return result;
    };
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:38:01.200

由于 JavaScript 是单线程的，因此不可能中断函数的执行。浏览器将简单地“冻结”直到函数返回。事实上，您甚至无法设置全局变量。

因此，您需要做的是将搜索分解成小块（例如，一次搜索 1% 的数据库）。确保每件作品在任何设备上执行的时间不超过 100 毫秒。然后使用 SetTimeout(getSomeMoreSuggestions, 0) 继续调用浏览器事件循环中不同部分的搜索函数。

然后，您可以在每次重新安排下一次执行搜索之前（即在 SetTimeout 之前）检查用户是否对编辑框进行了更改。

# playframework-2.0 - 尝试在 Globals.InitialData 之后添加模型时出现 PersistenceException

> ID：13327485
> 
> 赞同：2
> 
> 时间：2012-11-11T00:31:49.297
> 
> 标签：playframework-2.0, h2, ebean

我正在使用 Play Framework 2.0 (Java)，但是在 Globals 中实现了一个简单的 InitialData 之后，我遇到了一些问题。我正在使用

我有 2 个模型：

*   用户（电子邮件作为 ID）
*   SomeModel（长 id 作为 ID）

SomeModel 有一个字段，如：

```
@ManyToOne
  public User user; 
```

所以在 and 有一个 User 有很多 SomeModels 连接到它。

在我的 InitialData 中，我添加了一个用户来测试一些东西：test@test.com。

因此，如果我尝试向该测试用户添加 SomeModel，我没有问题，即使我尝试添加多个。

当我在 InitialData 中添加 SomeModel（让我们调用 TestModel）时，我认为没有问题，因为一切都在这个 TestModel 中运行。但是刚才，我看到如果我尝试向测试用户添加一个新的 SomeModel ，我会遇到这个问题：

```
[PersistenceException: ERROR executing DML bindLog[] error[Unique index or primary key violation: "PRIMARY_KEY_D ON PUBLIC.SOME_MODEL(ID)"; SQL statement:\n insert into some_model (id, name, description, user_email) values (?,?,?,?) [23505-158]]] 
```

这是我的 InitialData 文件：

```
# Users

users:

    - !!models.User
        email:      test@test.com
        name:       Test test
        password:   test

# SomeModels
somemodels:

    - !!models.FuzzySystem
        id:       1
        name:       test
        description:   test
        user:       !!models.User
                            email: test@test.com 
```

我迷失在这=（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:38:19.623

所以，我刚刚发现 initialData 不应该有 SomeModel 的 ID ......

删除 ID 字段后，一切正常。

这就是我的 initialData 文件的样子：

```
# Users

users:

    - !!models.User
        email:      test@test.com
        name:       Test test
        password:   test

# SomeModels
somemodels:

    - !!models.FuzzySystem
        name:       test
        description:   test
        user:       !!models.User
                            email: test@test.com 
```

# vb.net - 如何从桌面应用程序在移动设备上启动应用程序

> ID：13327486
> 
> 赞同：1
> 
> 时间：2012-11-11T00:31:59.517
> 
> 标签：vb.net, visual-studio-2010, windows-ce, opennetcf

在我的场景中，我将应用程序从桌面应用程序（VB.NET、Win7）复制到移动设备（Windows CE）。这是一个小的设置程序。

将文件复制到移动设备后，是否可以从 dektop 应用程序中启动移动设备上的设置应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:37:56.997

一种方法是使用 RAPI 中的[CeCreateProcess](http://msdn.microsoft.com/en-us/library/aa922104.aspx)函数。它有自己的限制，例如：[等待 CECreateProcess 完成](http://social.msdn.microsoft.com/forums/en-US/windowsmobiledev/thread/945cbabc-9036-4a6a-a5e1-f9904e26ec0d)

# r - 垂直直方图

> ID：13327489
> 
> 赞同：7
> 
> 时间：2012-11-11T00:32:42.830
> 
> 标签：r, quantmod

我想做一个垂直直方图。理想情况下，我应该能够每天在一个地块上放置多个。

如果这可以与 quantmod 实验 chart_Series 或其他一些能够为时间序列绘制条形的库相结合，那就太好了。请参阅随附的屏幕截图。理想情况下，我可以绘制这样的图。

有什么内置的或现有的库可以帮助解决这个问题吗？

![市场概况示例](../Images/c7a353570162305e8015ae669f5cd4d5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T18:52:49.497

大约一年前，我写了一些东西来在基本图形中做垂直直方图。这是一个使用示例。

```
VerticalHist <- function(x, xscale = NULL, xwidth, hist,
                         fillCol = "gray80", lineCol = "gray40") {
    ## x (required) is the x position to draw the histogram
    ## xscale (optional) is the "height" of the tallest bar (horizontally),
    ##   it has sensible default behavior
    ## xwidth (required) is the horizontal spacing between histograms
    ## hist (required) is an object of type "histogram"
    ##    (or a list / df with $breaks and $density)
    ## fillCol and lineCol... exactly what you think.
    binWidth <- hist$breaks[2] - hist$breaks[1]
    if (is.null(xscale)) xscale <- xwidth * 0.90 / max(hist$density)
    n <- length(hist$density)
    x.l <- rep(x, n)
    x.r <- x.l + hist$density * xscale
    y.b <- hist$breaks[1:n]
    y.t <- hist$breaks[2:(n + 1)]

    rect(xleft = x.l, ybottom = y.b, xright = x.r, ytop = y.t,
         col = fillCol, border = lineCol)
}

## Usage example
require(plyr) ## Just needed for the round_any() in this example
n <- 1000
numberOfHists <- 4
data <- data.frame(ReleaseDOY = rnorm(n, 110, 20),
                   bin = as.factor(rep(c(1, 2, 3, 4), n / 4)))
binWidth <- 1
binStarts <- c(1, 2, 3, 4)
binMids <- binStarts + binWidth / 2
axisCol <- "gray80"

## Data handling
DOYrange <- range(data$ReleaseDOY)
DOYrange <- c(round_any(DOYrange[1], 15, floor),
                      round_any(DOYrange[2], 15, ceiling))

## Get the histogram obects
histList <- with(data, tapply(ReleaseDOY, bin, hist, plot = FALSE,
    breaks = seq(DOYrange[1], DOYrange[2], by = 5)))
DOYmean <- with(data, tapply(ReleaseDOY, bin, mean))

## Plotting
par(mar = c(5, 5, 1, 1) + .1)
plot(c(0, 5), DOYrange, type = "n",
     ann = FALSE, axes = FALSE, xaxs = "i", yaxs = "i")

axis(1, cex.axis = 1.2, col = axisCol)
mtext(side = 1, outer = F, line = 3, "Length at tagging (mm)",
      cex = 1.2)
axis(2, cex.axis = 1.2, las = 1, line = -.7, col = "white",
    at = c(75, 107, 138, 169),
    labels = c("March", "April", "May", "June"), tck = 0)
mtext(side = 2, outer = F, line = 3.5, "Date tagged", cex = 1.2)
box(bty = "L", col = axisCol)

## Gridlines
abline(h = c(60, 92, 123, 154, 184), col = "gray80")

biggestDensity <- max(unlist(lapply(histList, function(h){max(h[[4]])})))
xscale <- binWidth * .9 / biggestDensity

## Plot the histograms
for (lengthBin in 1:numberOfHists) {
    VerticalHist(binStarts[lengthBin], xscale = xscale,
                         xwidth = binWidth, histList[[lengthBin]])
    } 
```

![垂直直方图](../Images/22c099b117f4610e215785af6f1d2838.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T16:20:26.733

小提琴情节可能与您想要的足够接近。它们是通过一个轴镜像的密度图，就像箱线图和密度图的混合体。（通过示例比描述更容易理解。:-)）

这是 ggplot2 实现的一个简单（有点难看）示例：

```
library(ggplot2)
library(lubridate)

data(economics) #sample dataset

# calculate year to group by using lubridate's year function
economics$year<-year(economics$date)

# get a subset 
subset<-economics[economics$year>2003&economics$year<2007,]    

ggplot(subset,aes(x=date,y=unemploy))+
    geom_line()+geom_violin(aes(group=year),alpha=0.5) 
```

![时间序列线图上的小提琴图](../Images/476bd3202920f2ef9027d712fac36b59.png)

一个更漂亮的例子是：

```
ggplot(subset,aes(x=date,y=unemploy))+ 
    geom_violin(aes(group=year,colour=year,fill=year),alpha=0.5, 
    kernel="rectangular")+    # passes to stat_density, makes violin rectangular 
    geom_line(size=1.5)+      # make the line (wider than normal)
    xlab("Year")+             # label one axis
    ylab("Unemployment")+     # label the other
    theme_bw()+                     # make white background on plot
    theme(legend.position = "none") # suppress legend 
```

![在此处输入图像描述](../Images/5bacce265b5f71ef32b3329941316e48.png)

要包括范围而不是线或除了线之外，您将使用 geom_linerange 或 geom_pointrange。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T03:10:17.787

如果您使用网格图形，那么您可以在任何您想要的位置创建旋转的视口并绘制到旋转的视口。您只需要一个将使用网格图形绘制到指定视口中的函数，我建议为此使用 ggplot2 或可能的 lattice。

`rect`在基本图形中，您可以编写自己的函数来绘制旋转直方图（修改 plot.histogram 函数或使用或其他工具从头开始编写自己的函数）。然后，您可以使用`subplot`TeachingDemos 包中的功能将绘图放置在较大绘图上的任何位置。

# c# - 如何在循环C#时获取数组中的当前索引

> ID：13327491
> 
> 赞同：2
> 
> 时间：2012-11-11T00:33:00.067
> 
> 标签：c#, c#-4.0, c#-3.0

我有一个数组和一个循环，我想找到当前项目的索引，以便我可以决定是否在列表框中显示该项目，

```
string[] papers = new string[7] { "Software Development", "Data Fundamentals", "Information and Communication", "User Support", "Web Fundamentals", "Network Fundamentals", "Computer Fundamentals" };

for (int i = 0; i < papers.Length; i++)
{
    int n=papers.Length;

    if (n==2)
    {
        continue;
    }
    else
    {
        listView1.Items.Add(papers[i]);
    } 
} 
```

但我无法实现它，请有人帮助我......或者有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T00:34:33.243

该变量`i`是您当前的索引。

```
for (int i = 0; i < papers.Length; i++)
{
   if (i==2)
      continue;
   else
      listView1.Items.Add(papers[i]);
} 
```

# android - Android 当我的应用切换方向 2 次以上时，我得到 nullPointerException

> ID：13327494
> 
> 赞同：0
> 
> 时间：2012-11-11T00:33:37.513
> 
> 标签：android

在我的应用程序中有 1 个活动（活动 A）和 3 个片段（片段 B、片段 C、片段 D）。这个过程是 Activity A -> Frag B -> Frag C -> Frag D。我的应用程序可以做屏幕方向，但是当我在 Frag D 或 Frag C 上并且我做 1 个屏幕方向时改变它的罚款并且应用程序仍然可以工作。当我执行 2+ 屏幕方向更改我的 savedInstanceState 并且我保存在我的 Activity A 中的所有内容都变为 null 并且我得到一个 nullPointerException 时，所以当我单击“返回”转到上一个片段时，应用程序崩溃了。

我无法真正指出为什么会发生这种情况，但希望有人可能知道为什么会发生这种情况，我认为如果 1 个屏幕方向有效，那么为什么第二个屏幕方向会这样做？我从横向还是纵向开始并不重要，但它只是在发生 2+ 方向变化时。我不太确定要在这里输入什么代码，而不会使这很冗长。

编辑。日志猫：

```
11-12 20:44:46.637: I/Activity A(998): onStart
11-12 20:44:46.637: I/Activity A(998): onResume
11-12 20:46:18.947: I/Frag B(998): onCreateView
11-12 20:46:19.157: I/Frag B(998): onStart
11-12 20:46:19.157: I/Frag B(998): onResume
11-12 20:46:23.057: I/Frag B(998): onPause
11-12 20:46:23.067: I/Frag B(998): onStop
11-12 20:46:23.067: I/Frag C(998): onCreateView
11-12 20:46:23.327: I/Frag C(998): onStart
11-12 20:46:23.327: I/Frag C(998): onResume
11-12 20:46:25.507: I/Frag C(998): onPause
11-12 20:46:25.507: I/Frag C(998): onStop
11-12 20:46:25.527: I/Frag D(998): onCreateView
11-12 20:46:29.466: I/Frag D(998): onStart
11-12 20:46:29.466: I/Frag D(998): onResume

//First screen rotation.

11-12 20:46:52.907: I/Frag D(998): onPause
11-12 20:46:52.907: I/Activity A(998): onPause
11-12 20:46:52.907: I/System.out(998): savedInstanceState in Frag C = Bundle[{LibraryChoice=Fighter}]
11-12 20:46:52.907: I/System.out(998): savedInstanceState in Frag D = Bundle[{LibraryChoice=Fighter, LibraryChoiceSelected=FighterSelected}]
11-12 20:46:52.947: I/Frag D(998): onStop
11-12 20:46:52.947: I/Activity A(998): onStop
11-12 20:46:52.957: I/Frag B(998): onDestroy
11-12 20:46:52.957: I/Frag C(998): onDestroy
11-12 20:46:53.037: I/Frag D(998): onDestroy
11-12 20:46:53.037: I/Activity A(998): onDestroy
11-12 20:46:53.667: I/Frag D(998): onCreateView
11-12 20:46:57.127: I/Frag D(998): onStart
11-12 20:46:57.127: I/Activity A(998): onStart
11-12 20:46:57.147: I/Activity A(998): onResume
11-12 20:46:57.147: I/Frag D(998): onResume

//Second screen rotation.

11-12 20:47:05.697: I/Frag D(998): onPause
11-12 20:47:05.697: I/Activity A(998): onPause
11-12 20:47:05.697: I/System.out(998): savedInstanceState in Frag C = Bundle[{LibraryChoice=null}]
11-12 20:47:05.697: I/System.out(998): savedInstanceState in Frag D = Bundle[{LibraryChoice=Fighter, LibraryChoiceSelected=FighterSelected}]
11-12 20:47:05.737: I/Frag D(998): onStop
11-12 20:47:05.737: I/Activity A(998): onStop
11-12 20:47:05.747: I/Frag B(998): onDestroy
11-12 20:47:05.747: I/Frag C(998): onDestroy
11-12 20:47:05.867: I/Frag D(998): onDestroy
11-12 20:47:05.867: I/Activity A(998): onDestroy
11-12 20:47:06.457: I/Frag D(998): onCreateView
11-12 20:47:09.907: I/Frag D(998): onStart
11-12 20:47:09.907: I/Activity A(998): onStart
11-12 20:47:09.917: I/Activity A(998): onResume
11-12 20:47:09.917: I/Frag D(998): onResume

//Back button pressed.

11-12 20:47:19.696: I/Frag D(998): onPause
11-12 20:47:19.696: I/Frag D(998): onStop
11-12 20:47:19.707: I/Frag C(998): onCreateView
11-12 20:47:19.977: D/AndroidRuntime(998): Shutting down VM
11-12 20:47:20.017: E/AndroidRuntime(998): FATAL EXCEPTION: main
11-12 20:47:20.017: E/AndroidRuntime(998): java.lang.NullPointerException
11-12 20:47:20.017: E/AndroidRuntime(998): at j.l.ls11.FragB.onCreateView(FragB.java:99) 
```

有人知道如何让我的 Frag C 不为空吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:55:22.873

我需要做的是让片段以两种方式进行通信。我只是将它作为 B->C->D 并没有 D->C->B。一旦我让他们以这种方式传递信息，它就起作用了。:)

# android - MyFirstApp 安装在模拟器上但无法启动它

> ID：13327499
> 
> 赞同：0
> 
> 时间：2012-11-11T00:34:59.177
> 
> 标签：android, android-emulator, eclipse-adt

我正在阅读 Android 的“构建您的第一个应用程序”教程，但在尝试运行该应用程序时遇到了困难。我使用 Eclipse 创建了应用程序和模拟器（OS X 上的 Juno Build id：20120920-0800，默认安装。今天更新了 Android SDK 等）。

该应用程序似乎已安装在模拟器上。即“主页-> 菜单-> 管理应用程序”列出它，它的应用程序信息看起来不错。（总计=24.00KB，应用程序=24.00KB，USN 存储应用程序=0.00B，...）。

但是，它不会出现在应用程序启动列表中（即带有“API Demos”、“Browser”等的屏幕。

有没有其他方法可以启动它？我必须做些什么才能将其加入应用程序列表吗？任何帮助将不胜感激 - 这让我发疯。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:03:20.573

在您的清单 xml 文件中，您需要确保您有

```
 <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter> 
```

在您的活动定义中。如果您在启动器中没有看到您的应用程序，则表明您没有设置“android.intent.category.LAUNCHER”。

你的清单文件应该有类似的东西（这不是一个完整的清单）

```
 <application android:icon="@drawable/icon" android:label="@string/app_name">
         <activity android:name=".MyActivity"
                    android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
         </activity>
        </application> 
```

您不能只将意图过滤器行放在清单中。如果您双击清单，它将打开。您有 2 种方法来编辑它，原始 XML 或使用基本界面。就我个人而言，我认为您最好使用原始界面。在双击清单时打开的窗口下方查看，您会看到一些选项卡，如清单、应用程序... 最后一个是 AndroidManifest.xml - 这是原始 xml。第一个是基本设置。

不要忘记保存清单文件并进行清理并构建然后运行它。

# c++ - 成员类可以从它的父类继承吗？

> ID：13327502
> 
> 赞同：9
> 
> 时间：2012-11-11T00:35:14.257
> 
> 标签：c++, oop

在考虑一个奇怪问题的“创造性”（即奇怪）解决方案时，一个特殊的想法引发了我的好奇心。这不是我可能会使用的想法，但我仍然想知道根据标准它是否合法。

一个简单的例子是......

```
class base_t
{
  private:
    //  stuff

  public:
    //  more stuff

    class derived_t : public base_t  //  <--- weirdness here
    {
      //  ...
    };      
}; 
```

怪异的一部分——因为`derived_t`继承自`base_t`which contains `derived_t`，所以看起来像是`derived_t`contains 本身。

那么 - 这是一种类似于[奇怪重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)的有效但奇怪和可怕的东西，还是非法的？

**编辑**- 我也许应该提到我想到这个的原因是试图避免一些命名空间污染。拥有一个类作为成员可以避免引入另一个全局类，但是第二个类需要与第一个类共享很多。

如果它只是一对类，那将不是问题，但这是针对代码生成器的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T00:37:56.323

这是合法的，但可能不是您安排代码的方式。基类在使用时必须是完整的，但直到定义的右大括号才完成。所以尝试前向声明嵌套类：

```
class base_t
{
  private:
    //  stuff

  public:
    //  more stuff

    class derived_t;
};

class base_t::derived_t : public base_t
{
  //  ...
}; 
```

# ios - 以核心文本为中心绘制 NSAttributedString

> ID：13327507
> 
> 赞同：3
> 
> 时间：2012-11-11T00:35:40.160
> 
> 标签：ios, cocoa-touch, text, core-text, nsattributedstring

我有一个在矩形中绘制 NSAttributedString 的方法：

```
-(void)drawInRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge  CFAttributedStringRef)self);

    // left column form
    CGMutablePathRef leftColumnPath = CGPathCreateMutable();
    CGPathAddRect(leftColumnPath, NULL, CGRectMake(rect.origin.x, -rect.origin.y, rect.size.width, rect.size.height));

    // left column frame
    CGFloat translateAmount = rect.size.height;
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, translateAmount);
    CGContextScaleCTM(context, 1.0, -1.0);
    CTFrameRef leftFrame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), leftColumnPath, NULL);

    CTFrameDraw(leftFrame, context);

    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, translateAmount);
    CGContextScaleCTM(context, 1.0, -1.0);

    CFRelease(leftFrame);
    CFRelease(framesetter);
    CGPathRelease(leftColumnPath);
} 
```

几个月前，我在教程的帮助下把它放在一起。事实证明，默认情况下，这会绘制左对齐的字符串。我对核心文本不太狡猾，有谁知道我如何用文本对齐中心来绘制这个？

（请不要推荐外部的标签绘图类，我需要使用 Core Text 来做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:06:01.517

将 的 设置`CTTextAlignment`为`CTParagraphStyle`要`kCTCenterTextAlignment`居中的属性字符串的范围。

然后创建`CTFramesetter`，然后绘制。

* * *

示例：[http ://foobarpig.com/iphone/coretext-set-text-font-and-alignment-to-cfattributedstring.html](http://foobarpig.com/iphone/coretext-set-text-font-and-alignment-to-cfattributedstring.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-27T09:56:48.130

对于 Swift 3.0：

```
final private func drawIn(rect: CGRect, attribString: NSAttributedString ){

        guard let context = UIGraphicsGetCurrentContext() else{
            return
        }

        let framesetter = CTFramesetterCreateWithAttributedString(attribString)

        // left column form
        let leftColumnPath = CGMutablePath()
        leftColumnPath.addRect(CGRect(x:rect.origin.x,
                                      y: -rect.origin.y,
                                      width: rect.size.width,
                                      height: rect.size.height)
        )

        // left column frame
        let translateAmount = rect.size.height

        context.saveGState()
        context.textMatrix = CGAffineTransform.identity

        context.translateBy(x: 0, y: translateAmount)
        context.scaleBy(x: 1.0, y: -1.0)
        let leftFrame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), leftColumnPath, nil)

        CTFrameDraw(leftFrame, context)

        context.textMatrix = CGAffineTransform.identity
        context.translateBy(x: 0, y: translateAmount)
        context.scaleBy(x: 1.0, y: -1.0)
    }

    final private func drawStopMessage(){

        let paragraphStyle = NSMutableParagraphStyle()
        paragraphStyle.alignment = .center

        let attributes = [NSParagraphStyleAttributeName :  paragraphStyle,
                          NSFontAttributeName :   UIFont.systemFont(ofSize: 24.0),
                          NSForegroundColorAttributeName : UIColor.blue,
                          ]

        let attrString = NSAttributedString(string: "Stop\nall Dance",
                                       attributes: attributes)

        let rect = CGRect(x: 20, y: 100, width: 300, height: 300)
        drawIn(rect: rect, attribString: attrString)
    } 
```

# cakephp - PHP 允许的内存限制错误发生了很少的内存分配

> ID：13327511
> 
> 赞同：1
> 
> 时间：2012-11-11T00:36:00.270
> 
> 标签：cakephp, php

当我尝试使用 PHP(CakePHP) 应用程序上传文件时，发生了这些错误。

> 致命错误：第 156 行 /home/xsu0653/public_html/administer/app/models/behaviors/sf_upload.php 中允许的 16777216 字节内存大小已用尽（尝试分配 9660 字节）

如您所见，在我的 php.ini 设置中，允许的内存限制设置为 16MB。

此错误消息表明我的应用程序仅尝试分配 9660 字节。我认为 9,660 字节只有 0.009MB。

我不明白为什么在分配这么少的内存时会发生这个错误。而且这个错误不会在任何时候发生，只会发生几次。也很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:38:33.947

那是指它尝试分配但失败的数量。它超出了限制 9,660 字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:11:33.220

PHP 在运行脚本时动态分配内存——它也尝试在运行时释放内存。

> 此错误消息表明我的应用程序仅尝试分配 9660 字节。

您的错误消息中的 9660 字节简单指的是最新的分配 - 把它想象成众所周知的压死骆驼的稻草。您的脚本已经分配了非常接近您配置的限制，然后尝试分配这最后一点，使其超过限制，因此出现此错误。

像 Cake 这样的框架在内存使用方面可能相当低效，这取决于正在使用的模块 - 你会发现他们建议提高限制。

您还可以通过取消设置大型数组或在不再需要它们时清除缓冲区来帮助改进。

# android - 编译时的 Android SDK 版本

> ID：13327514
> 
> 赞同：0
> 
> 时间：2012-11-11T00:36:42.817
> 
> 标签：android, sdk, version, compile-time

类中存储了各种变量`android.os.Build`，您可以检查给定 Android 平台的当前版本。当然，这些仅适用于模拟器或设备，因为 SDK 在编译期间返回 null 或 0

Android SDK 中是否还有其他可用变量表示在通过 Java API 编译期间可用的当前 SDK 版本？

仅供参考，我正在尝试实现此功能：[https ://github.com/johncarl81/transfuse/issues/18](https://github.com/johncarl81/transfuse/issues/18)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:06:19.497

如果要设置最低 SDK 级别，可以在`AndroidManifest.xml`文件中完成。如果您想支持多个 SDK 级别，则必须在运行时执行此操作，因为这意味着您在实际运行应用程序之前不会知道您是在 SDK 8 还是 SDK 15 上运行。如果你想避免 lint 警告，我会使用`@TargetApi(...)`引用的 opatut ......

# objective-c - CCScrollLayer 或其他方式使画廊视图垂直滚动

> ID：13327515
> 
> 赞同：1
> 
> 时间：2012-11-11T00:36:48.707
> 
> 标签：objective-c, cocos2d-iphone, ccscrolllayer

我正在尝试使用 cocos2d 2.0 在我的应用程序中创建一个可滚动的画廊，类似于 ios6 中的集合视图，但这是我尝试弄清楚如何垂直滚动任何内容的第三天。我从 CCScrollLayer 开始，并将其用作水平滚动菜单。我花了一些时间试图找到与 cocos2d 2.0 兼容的版本，因为原始 CCScrollLayer 有一些不推荐使用的方法和未声明的标识符。

每个人都说只需将 x 更改为 y 它将垂直滚动但我无法做到。然后我开始看CCMenuAdvanced，但它对我来说太混乱了，我根本无法让它工作。我只想将 CCMenuItemImage 元素添加到图层中，因为菜单元素不需要额外的触摸检测功能作为代码，我可以为每个元素放置一些代码块并且它已经显示图片。

我还发现了一个修改后的 CCScrollLayer，它可以选择水平和垂直滚动，但我无法让它工作，因为它与 cocos2d 不兼容。比我聪明的人可以对此代码进行正确的更改吗？很抱歉，我找不到原始链接，也不记得作者的名字/昵称。

```
//
// CCScrollLayer.h
//
// Copyright 2010 DK101
// http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
//
// Copyright 2010 Giv Parvaneh.
// http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
//
// Copyright 2011 Stepan Generalov
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#import <Foundation/Foundation.h>
#import "cocos2d.h"

#ifndef __MAC_OS_X_VERSION_MAX_ALLOWED

/*
It is a very clean and elegant subclass of CCLayer that lets you pass-in an array
of layers and it will then create a smooth scroller.
 Complete with the "snapping" effect. You can create screens with anything that can be added to a CCLayer.
 Additions since Giv Parvaneh version:
 1\. Added ability to swipe above targetedTouchDelegates.
 2\. Added touches lengths & screens properties.
 3\. Added factory class method.
 4\. Code cleanup.
 5\. Added current page number indicator (iOS Style Dots).
 Limitations:
 1\. Mac OS X not supported. (Note #ifndef wrappers ;) )
 2\. Standard Touch Delegates will still receive touch events after layer starts sliding.
 */
 @interface CCScrollLayer : CCLayer {

// Holds the current distance of the screen substracting offset.
CGFloat scrollDistance_;

// Holds the current page being displayed.
int currentScreen_;

// A count of the total screens available.
int totalScreens_;

// The x coord of initial point the user starts their swipe.
CGFloat startSwipe_;

// For what distance user must slide finger to start scrolling menu.
CGFloat minimumTouchLengthToSlide_;

// For what distance user must slide finger to change the page.
CGFloat minimumTouchLengthToChangePage_;

// Whenever show or not gray/white dots under scrolling content.
BOOL showPagesIndicator_;

// Internal state of scrollLayer (scrolling or idle).
int state_;

// is horizontal, else is vertical.
BOOL isHorizontal_;

}
@property(readwrite, assign) CGFloat minimumTouchLengthToSlide;
@property(readwrite, assign) CGFloat minimumTouchLengthToChangePage;
@property(readwrite, assign) BOOL showPagesIndicator;
@property(readonly) int totalScreens;
@property(readonly) int currentScreen;
@property(readonly) BOOL isHorizontal;

// Horizontal scrolling
+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) offset;
-(id) initWithLayers:(NSArray *)layers widthOffset: (int) offset;

// Vertical scrolling
+(id) nodeWithLayers:(NSArray *)layers heightOffset: (int) offset;
-(id) initWithLayers:(NSArray *)layers heightOffset: (int) offset;

@end

#endif

//
// CCScrollLayer.m
//
// Copyright 2010 DK101
// http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
//
// Copyright 2010 Giv Parvaneh.
// http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
//
// Copyright 2011 Stepan Generalov
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __MAC_OS_X_VERSION_MAX_ALLOWED

#import "CCScrollLayer.h"
#import "CCGL.h"

enum
{
kCCScrollLayerStateIdle,
kCCScrollLayerStateSliding,
};

@interface CCTouchDispatcher (targetedHandlersGetter)
- (NSMutableArray *) targetedHandlers;

@end

@implementation CCTouchDispatcher (targetedHandlersGetter)

- (NSMutableArray *) targetedHandlers
{
return targetedHandlers;
}

@end

@implementation CCScrollLayer

@synthesize minimumTouchLengthToSlide = minimumTouchLengthToSlide_;
@synthesize minimumTouchLengthToChangePage = minimumTouchLengthToChangePage_;
@synthesize totalScreens = totalScreens_;
@synthesize currentScreen = currentScreen_;
@synthesize showPagesIndicator = showPagesIndicator_;
@synthesize isHorizontal = isHorizontal_;

+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) offset
{
return [[[self alloc] initWithLayers: layers widthOffset:offset] autorelease];
}

-(id) initWithLayers:(NSArray *)layers widthOffset: (int) offset
{
if ( (self = [super init]) )
{
    NSAssert([layers count], @"CCScrollLayer#initWithLayers:widthOffset: you must provide at least one layer!");

    // Enable touches.
    self.isTouchEnabled = YES;

    // Set default minimum touch length to scroll.
    self.minimumTouchLengthToSlide = 30.0f;
    self.minimumTouchLengthToChangePage = 100.0f;

    // Show indicator by default.
    self.showPagesIndicator = YES;

    // Set up the starting variables
    currentScreen_ = 1;

    // offset added to show preview of next/previous screens
    scrollDistance_ = [[CCDirector sharedDirector] winSize].width - offset;

    // Loop through the array and add the screens
    int i = 0;
    for (CCLayer *l in layers)
    {
        l.anchorPoint = ccp(0,0);
        l.position = ccp((i*scrollDistance_),0);
        [self addChild:l];
        i++;
    }

    // Setup a count of the available screens
    totalScreens_ = [layers count];

}
return self;
}

+(id) nodeWithLayers:(NSArray *)layers heightOffset: (int) offset
{
return [[[self alloc] initWithLayers: layers heightOffset:offset] autorelease];
}

-(id) initWithLayers:(NSArray *)layers heightOffset: (int) offset
{
if ( (self = [super init]) )
{
    NSAssert([layers count], @"CCScrollLayer#initWithLayers:heightOffset: you must provide at least one layer!");

    // Enable touches.
    self.isTouchEnabled = YES;

    // Set default minimum touch length to scroll.
    self.minimumTouchLengthToSlide = 30.0f;
    self.minimumTouchLengthToChangePage = 100.0f;

    // Show indicator by default.
    self.showPagesIndicator = YES;

    // Set up the starting variables
    currentScreen_ = 1;

    // offset added to show preview of next/previous screens
    scrollDistance_ = [[CCDirector sharedDirector] winSize].height - offset;

    // Loop through the array and add the screens
    int i = 0;
    for (CCLayer *l in layers)
    {
        l.anchorPoint = ccp(0,0);
        l.position = ccp(0,-(i*scrollDistance_));
        [self addChild:l];
        i++;
    }

    // Setup a count of the available screens
    totalScreens_ = [layers count];

}
return self;
}

#pragma mark CCLayer Methods ReImpl

// Register with more priority than CCMenu's but don't swallow touches
-(void) registerWithTouchDispatcher
{
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:kCCMenuTouchPriority - 1 swallowsTouches:NO];
}

- (void) visit
{
[super visit];//< Will draw after glPopScene.

if (self.showPagesIndicator)
{
    // Prepare Points Array
    CGFloat n = (CGFloat)totalScreens_; //< Total points count in CGFloat.
    CGFloat d = 16.0f; //< Distance between points.
    CGPoint points[totalScreens_];

    if (isHorizontal_ == YES) {
        CGFloat pY = ceilf ( self.contentSize.height / 8.0f ); //< Points y-coord in parent coord sys.
        for (int i=0; i < totalScreens_; ++i)
        {
            CGFloat pX = 0.5f * self.contentSize.width + d * ( (CGFloat)i - 0.5f*(n-1.0f) );
            points[i] = ccp (pX, pY);
        }
    } else {
        CGFloat pX = self.contentSize.width - ceilf ( self.contentSize.width / 8.0f ); //< Points x-coord in parent coord sys.
        for (int i=0; i < totalScreens_; ++i)
        {
            CGFloat pY = 0.5f * self.contentSize.height - d * ( (CGFloat)i - 0.5f*(n-1.0f) );
            points[i] = ccp (pX, pY);
        }
    }

    // Set GL Values
    glEnable(GL_POINT_SMOOTH);
    GLboolean blendWasEnabled = glIsEnabled( GL_BLEND );
    glEnable(GL_BLEND);
    glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );
    glPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );

    // Draw Gray Points
    glColor4ub(0x96,0x96,0x96,0xFF);
    ccDrawPoints( points, totalScreens_ );

    // Draw White Point for Selected Page
    glColor4ub(0xFF,0xFF,0xFF,0xFF);
    ccDrawPoint(points[currentScreen_ - 1]);

    // Restore GL Values
    glPointSize(1.0f);
    glDisable(GL_POINT_SMOOTH);
    if (! blendWasEnabled)
        glDisable(GL_BLEND);
}
}

#pragma mark Pages Control

-(void) moveToPage:(int)page
{
int changeX = 0;
int changeY = 0;

if (isHorizontal_ == YES) {
    changeX = -((page-1)*scrollDistance_);
} else {
    changeY = ((page-1)*scrollDistance_);
}

id changePage = [CCMoveTo actionWithDuration:0.3 position:ccp(changeX,changeY)];
[self runAction:changePage];
currentScreen_ = page;
}

#pragma mark Hackish Stuff

- (void) claimTouch: (UITouch *) aTouch
{
// Enumerate through all targeted handlers.
for ( CCTargetedTouchHandler *handler in [[CCTouchDispatcher sharedDispatcher] targetedHandlers] )
{
    // Only our handler should claim the touch.
    if (handler.delegate == self)
    {
        if (![handler.claimedTouches containsObject: aTouch])
        {
            [handler.claimedTouches addObject: aTouch];
        }
        else
        {
            CCLOGERROR(@"CCScrollLayer#claimTouch: %@ is already claimed!", aTouch);
        }
        return;
    }
}
}

- (void) cancelAndStoleTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
// Throw Cancel message for everybody in TouchDispatcher.
[[CCTouchDispatcher sharedDispatcher] touchesCancelled: [NSSet setWithObject: touch] withEvent:event];

//< after doing this touch is already removed from all targeted handlers

// Squirrel away the touch
[self claimTouch: touch];
}

#pragma mark Touches

 -(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
CGPoint touchPoint = [touch locationInView:[touch view]];
touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

if (isHorizontal_ == YES) {
    startSwipe_ = touchPoint.x;
} else {
    startSwipe_ = touchPoint.y;
}

state_ = kCCScrollLayerStateIdle;
return YES;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
CGPoint touchPoint = [touch locationInView:[touch view]];
touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

int moveDistance = 0;
if (isHorizontal_ == YES) {
    moveDistance = touchPoint.x-startSwipe_;
} else {
    moveDistance = touchPoint.y-startSwipe_;
}

// If finger is dragged for more distance then minimum - start sliding and cancel pressed buttons.
// Of course only if we not already in sliding mode
if ( (state_ != kCCScrollLayerStateSliding)
    && (fabsf(moveDistance) >= self.minimumTouchLengthToSlide) )
{
    state_ = kCCScrollLayerStateSliding;

    // Avoid jerk after state change.
    if (isHorizontal_ == YES) {
        startSwipe_ = touchPoint.x;
    } else {
        startSwipe_ = touchPoint.y;
    }

    [self cancelAndStoleTouch: touch withEvent: event];
}

if (state_ == kCCScrollLayerStateSliding) {
    int pointX = 0;
    int pointY = 0;
    if (isHorizontal_ == YES) {
        pointX = (-(currentScreen_-1)*scrollDistance_)+(touchPoint.x-startSwipe_);
    } else {
        pointY = ((currentScreen_-1)*scrollDistance_)+(touchPoint.y-startSwipe_);
    }
    self.position = ccp(pointX,pointY);
}

}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
CGPoint touchPoint = [touch locationInView:[touch view]];
touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

int offsetLoc = 0;
if (isHorizontal_ == YES) {
    offsetLoc = (touchPoint.x - startSwipe_);
} else {
    offsetLoc = -(touchPoint.y - startSwipe_);
}

if ( offsetLoc < -self.minimumTouchLengthToChangePage && (currentScreen_+1) <= totalScreens_ )
{
    [self moveToPage: currentScreen_+1];
}
else if ( offsetLoc > self.minimumTouchLengthToChangePage && (currentScreen_-1) > 0 )
{
    [self moveToPage: currentScreen_-1];
}
else
{
    [self moveToPage:currentScreen_];
}
}

@end

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:41:00.783

编辑：我终于设法使它与 cocos2d 2.x 一起工作。这是代码，在水平和垂直方向上都可以很好地工作，也许你会需要它。

```
//
// CCScrollLayer.h
//
// Copyright 2010 DK101
// http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
//
// Copyright 2010 Giv Parvaneh.
// http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
//
// Copyright 2011 Stepan Generalov
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
#import <Foundation/Foundation.h>
#import "cocos2d.h"

#ifndef __MAC_OS_X_VERSION_MAX_ALLOWED
@interface CCScrollLayerVerticalHorizontal : CCLayer {

    // Holds the current distance of the screen substracting offset.
    CGFloat scrollDistance_;

    // Holds the current page being displayed.
    int currentScreen_;

    // A count of the total screens available.
    int totalScreens_;

    // The x coord of initial point the user starts their swipe.
    CGFloat startSwipe_;

    // For what distance user must slide finger to start scrolling menu.
    CGFloat minimumTouchLengthToSlide_;

    // For what distance user must slide finger to change the page.
    CGFloat minimumTouchLengthToChangePage_;

    // Whenever show or not gray/white dots under scrolling content.
    BOOL showPagesIndicator_;
    ccColor4B pagesIndicatorSelectedColor_;
    ccColor4B pagesIndicatorNormalColor_;
    // Internal state of scrollLayer (scrolling or idle).
    int state_;

    // is horizontal, else is vertical.
    BOOL isHorizontal_;

}
@property(readwrite, assign) CGFloat minimumTouchLengthToSlide;
@property(readwrite, assign) CGFloat minimumTouchLengthToChangePage;
@property(readwrite, assign) BOOL showPagesIndicator;
@property(readonly) int totalScreens;
@property(readonly) int currentScreen;
@property(readonly) BOOL isHorizontal;

// Horizontal scrolling
+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) offset;
-(id) initWithLayers:(NSArray *)layers widthOffset: (int) offset;

// Vertical scrolling
+(id) nodeWithLayers:(NSArray *)layers heightOffset: (int) offset;
-(id) initWithLayers:(NSArray *)layers heightOffset: (int) offset;

@end

#endif

//
// CCScrollLayer.m
//
// Copyright 2010 DK101
// http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
//
// Copyright 2010 Giv Parvaneh.
// http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
//
// Copyright 2011 Stepan Generalov
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __MAC_OS_X_VERSION_MAX_ALLOWED

#import "CCScrollLayerVerticalHorizontal.h"
#import "CCGL.h"

enum
{
    kCCScrollLayerStateIdle,
    kCCScrollLayerStateSliding,
};

@interface CCTouchDispatcher (targetedHandlersGetter)
- (NSMutableArray *) targetedHandlers;

@end

@implementation CCTouchDispatcher (targetedHandlersGetter)

- (NSMutableArray *) targetedHandlers
{
    return targetedHandlers;
}

@end

@implementation CCScrollLayerVerticalHorizontal

@synthesize minimumTouchLengthToSlide = minimumTouchLengthToSlide_;
@synthesize minimumTouchLengthToChangePage = minimumTouchLengthToChangePage_;
@synthesize totalScreens = totalScreens_;
@synthesize currentScreen = currentScreen_;
@synthesize showPagesIndicator = showPagesIndicator_;
@synthesize isHorizontal = isHorizontal_;

+(id) nodeWithLayers:(NSArray *)layers widthOffset: (int) offset
{
    return [[[self alloc] initWithLayers: layers widthOffset:offset] autorelease];
}

-(id) initWithLayers:(NSArray *)layers widthOffset: (int) offset
{
    if ( (self = [super init]) )
    {
        NSAssert([layers count], @"CCScrollLayer#initWithLayers:widthOffset: you must provide at least one layer!");
        // Horizontal
        isHorizontal_ = YES;
        // Enable touches.
        self.isTouchEnabled = YES;

        // Set default minimum touch length to scroll.
        self.minimumTouchLengthToSlide = 30.0f;
        self.minimumTouchLengthToChangePage = 100.0f;

        // Show indicator by default.
        self.showPagesIndicator = YES;

        // Set up the starting variables
        currentScreen_ = 1;

        // offset added to show preview of next/previous screens
        scrollDistance_ = [[CCDirector sharedDirector] winSize].width - offset;

        // Loop through the array and add the screens
        int i = 0;
        for (CCLayer *l in layers)
        {
            l.anchorPoint = ccp(0,0);
            l.position = ccp((i*scrollDistance_),0);
            [self addChild:l];
            i++;
        }

        // Setup a count of the available screens
        totalScreens_ = [layers count];

    }
    return self;
}

+(id) nodeWithLayers:(NSArray *)layers heightOffset: (int) offset
{
    return [[[self alloc] initWithLayers: layers heightOffset:offset] autorelease];
}

-(id) initWithLayers:(NSArray *)layers heightOffset: (int) offset
{
    if ( (self = [super init]) )
    {
        NSAssert([layers count], @"CCScrollLayer#initWithLayers:heightOffset: you must provide at least one layer!");
        // Horizontal
        isHorizontal_ = NO;
        // Enable touches.
        self.isTouchEnabled = YES;

        // Set default minimum touch length to scroll.
        self.minimumTouchLengthToSlide = 30.0f;
        self.minimumTouchLengthToChangePage = 100.0f;

        // Show indicator by default.
        self.showPagesIndicator = YES;

        // Set up the starting variables
        currentScreen_ = 1;

        // offset added to show preview of next/previous screens
        scrollDistance_ = [[CCDirector sharedDirector] winSize].height - offset;

        // Loop through the array and add the screens
        int i = 0;
        for (CCLayer *l in layers)
        {
            l.anchorPoint = ccp(0,0);
            l.position = ccp(0,-(i*scrollDistance_));
            [self addChild:l];
            i++;
        }

        // Setup a count of the available screens
        totalScreens_ = [layers count];

    }
    return self;
}

#pragma mark CCLayer Methods ReImpl

// Register with more priority than CCMenu's but don't swallow touches
-(void) registerWithTouchDispatcher
{
    [[[CCDirector sharedDirector]touchDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:NO];
}

- (void) visit
{
    [super visit];//< Will draw after glPopScene.

    if (self.showPagesIndicator)
    {
        // Prepare Points Array
        CGFloat n = (CGFloat)totalScreens_; //< Total points count in CGFloat.
        CGFloat d = 16.0f; //< Distance between points.
        CGPoint points[totalScreens_];

        if (isHorizontal_ == YES) {
            CGFloat pY = ceilf ( self.contentSize.height / 8.0f ); //< Points y-coord in parent coord sys.
            for (int i=0; i < totalScreens_; ++i)
            {
                CGFloat pX = 0.5f * self.contentSize.width + d * ( (CGFloat)i - 0.5f*(n-1.0f) );
                points[i] = ccp (pX, pY);
            }
        } else {
            CGFloat pX = self.contentSize.width - ceilf ( self.contentSize.width / 8.0f ); //< Points x-coord in parent coord sys.
            for (int i=0; i < totalScreens_; ++i)
            {
                CGFloat pY = 0.5f * self.contentSize.height - d * ( (CGFloat)i - 0.5f*(n-1.0f) );
                points[i] = ccp (pX, pY);
            }
        }

        // Set GL Values
#if COCOS2D_VERSION >= 0x00020000
        //  ccGLEnable(CC_GL_BLEND); //Guru
        ccPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );
#define DRAW_4B_FUNC ccDrawColor4B

#else
        glEnable(GL_POINT_SMOOTH);
        GLboolean blendWasEnabled = glIsEnabled( GL_BLEND );
        glEnable(GL_BLEND);

        // save the old blending functions
        int blend_src = 0;
        int blend_dst = 0;
        glGetIntegerv( GL_BLEND_SRC, &blend_src );
        glGetIntegerv( GL_BLEND_DST, &blend_dst );
        glPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );

#define DRAW_4B_FUNC glColor4ub

#endif
        glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );

        // Draw Gray Points
        DRAW_4B_FUNC(pagesIndicatorNormalColor_.r,
                     pagesIndicatorNormalColor_.g,
                     pagesIndicatorNormalColor_.b,
                     pagesIndicatorNormalColor_.a);

        ccDrawPoints( points, totalScreens_ );

        // Draw White Point for Selected Page
        DRAW_4B_FUNC(pagesIndicatorSelectedColor_.r,
                     pagesIndicatorSelectedColor_.g,
                     pagesIndicatorSelectedColor_.b,
                     pagesIndicatorSelectedColor_.a);
        ccDrawPoint(points[currentScreen_]);

        // Restore GL Values
#if COCOS2D_VERSION >= 0x00020000
        ccPointSize(1.0f);
#else
        glPointSize(1.0f);
        glDisable(GL_POINT_SMOOTH);
        if (! blendWasEnabled)
            glDisable(GL_BLEND);

        // always restore the blending functions too
        glBlendFunc( blend_src, blend_dst );
#endif

    }
}

#pragma mark Pages Control

-(void) moveToPage:(int)page
{
    int changeX = 0;
    int changeY = 0;

    if (isHorizontal_ == YES) {
        changeX = -((page-1)*scrollDistance_);
    } else {
        changeY = ((page-1)*scrollDistance_);
    }

    id changePage = [CCMoveTo actionWithDuration:0.3 position:ccp(changeX,changeY)];
    [self runAction:changePage];
    currentScreen_ = page;
}

#pragma mark Hackish Stuff

- (void) claimTouch: (UITouch *) aTouch
{
#if COCOS2D_VERSION >= 0x00020000
    CCTouchDispatcher *dispatcher = [[CCDirector sharedDirector] touchDispatcher];
#else
    CCTouchDispatcher *dispatcher = [CCTouchDispatcher sharedDispatcher];
#endif

    // Enumerate through all targeted handlers.
    for ( CCTargetedTouchHandler *handler in [dispatcher targetedHandlers] )
    {
        // Only our handler should claim the touch.
        if (handler.delegate == self)
        {
            if (![handler.claimedTouches containsObject: aTouch])
            {
                [handler.claimedTouches addObject: aTouch];
            }
        }
        else
        {
            // Steal touch from other targeted delegates, if they claimed it.
            if ([handler.claimedTouches containsObject: aTouch])
            {
                if ([handler.delegate respondsToSelector:@selector(ccTouchCancelled:withEvent:)])
                {
                    [handler.delegate ccTouchCancelled: aTouch withEvent: nil];
                }
                [handler.claimedTouches removeObject: aTouch];
            }
        }
    }
}
- (void) cancelAndStoleTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    // Throw Cancel message for everybody in TouchDispatcher.
    [[CCDirector sharedDirector] touchesCancelled: [NSSet setWithObject: touch] withEvent:event];

    //< after doing this touch is already removed from all targeted handlers

    // Squirrel away the touch
    [self claimTouch: touch];
}

#pragma mark Touches

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    if (isHorizontal_ == YES) {
        startSwipe_ = touchPoint.x;
    } else {
        startSwipe_ = touchPoint.y;
    }

    state_ = kCCScrollLayerStateIdle;
    return YES;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    int moveDistance = 0;
    if (isHorizontal_ == YES) {
        moveDistance = touchPoint.x-startSwipe_;
    } else {
        moveDistance = touchPoint.y-startSwipe_;
    }

    // If finger is dragged for more distance then minimum - start sliding and cancel pressed buttons.
    // Of course only if we not already in sliding mode
    if ( (state_ != kCCScrollLayerStateSliding)
        && (fabsf(moveDistance) >= self.minimumTouchLengthToSlide) )
    {
        state_ = kCCScrollLayerStateSliding;

        // Avoid jerk after state change.
        if (isHorizontal_ == YES) {
            startSwipe_ = touchPoint.x;
        } else {
            startSwipe_ = touchPoint.y;
        }

        [self cancelAndStoleTouch: touch withEvent: event];
    }

    if (state_ == kCCScrollLayerStateSliding) {
        int pointX = 0;
        int pointY = 0;
        if (isHorizontal_ == YES) {
            pointX = (-(currentScreen_-1)*scrollDistance_)+(touchPoint.x-startSwipe_);
        } else {
            pointY = ((currentScreen_-1)*scrollDistance_)+(touchPoint.y-startSwipe_);
        }
        self.position = ccp(pointX,pointY);
    }

}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    int offsetLoc = 0;
    if (isHorizontal_ == YES) {
        offsetLoc = (touchPoint.x - startSwipe_);
    } else {
        offsetLoc = -(touchPoint.y - startSwipe_);
    }

    if ( offsetLoc < -self.minimumTouchLengthToChangePage && (currentScreen_+1) <= totalScreens_ )
    {
        [self moveToPage: currentScreen_+1];
    }
    else if ( offsetLoc > self.minimumTouchLengthToChangePage && (currentScreen_-1) > 0 )
    {
        [self moveToPage: currentScreen_-1];
    }
    else
    {
        [self moveToPage:currentScreen_];
    }
}

@end

#endif 
```

# oracle - 无法连接 SQLPlus，但它适用于 SQL Developer

> ID：13327516
> 
> 赞同：2
> 
> 时间：2012-11-11T00:36:50.093
> 
> 标签：oracle, sqlplus

视窗 7、甲骨文 11.2.0.1；以前一直很好用，不知道最近发生了什么。但我无法使用 sqlplus 连接到 SQL plus，并输入用户名和密码。

SQL 开发人员工作正常。以下命令也可以正常工作：

```
sqlplus system/system@//localhost:1521/ORACUSTOM 
```

虽然上面的命令工作正常，但一些脚本不起作用（因为这些脚本试图连接到不同的数据库。所以我需要进行以下工作：

```
$ sqlplus

SQL*Plus: Release 11.2.0.1.0 Production on Sat Nov 10 19:35:34 2012

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Enter user-name: system
Enter password:
ERROR:
ORA-12560: TNS:protocol adapter error

Enter user-name: 
```

如果您能解释为什么一种方法有效而另一种方法无效，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:15:13.417

jdbc 连接字符串

```
sqlplus system/system@//localhost:1521/ORACUSTOM 
```

表示使用服务名“ORACUSTOM”作为服务名。检查 tnsnames.ora 文件以获取正确的 TNS 名称并确保它使用“Oracustom”作为服务名称

在您的情况下，TNS 名称应该类似于

```
orcl =
 (DESCRIPTION =
   (ADDRESS_LIST =
     (ADDRESS = (PROTOCOL = TCP)(Host = localhost)(Port = 1521))
   )
 (CONNECT_DATA =
   (SERVICE_NAME = oracustom)
 )
) 
```

使用 tnsnames.ora 中的此条目，您必须输入`system@orcl`用户名

（PS：[不要以系统登录。坏主意](https://dba.stackexchange.com/a/408/120)。）

# payment-gateway - 支付网关和marchant网关有什么区别？

> ID：13327517
> 
> 赞同：3
> 
> 时间：2012-11-11T00:36:52.387
> 
> 标签：payment-gateway, payment, gateway

支付网关和marchant网关有什么区别？

什么时候应该用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:47:47.120

差别不大，但是如果您按照 Sazzad 所说的方式来考虑大问题：

支付网关 = 贝宝

您将用户重定向到 PayPal 的页面，然后他们处理交易。你可以在你的网站上做，但你需要一个 iframe，所以最终它仍然使用他们的网站来处理交易。像 PayPal 这样的支付网关通常具有更高的百分比率。信用卡公司将钱交给 PayPal，然后 PayPal 将钱交给商家。用户通常会在他们的信用卡账单上看到 PayPal。

商户网关 = Authorize.net

用户将抄送信息放在您的网站上，您通过 API 发送数据，然后发送数据并获得报酬。商户网关通常具有较低的收费率。钱直接从信用卡流向您，而不是像支付网关那样真正使用中间人。用户将在他们的信用卡对帐单上看到您的公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:36:52.387

如果您需要将用户重定向到外部网关页面进行支付，那么它的支付网关。

如果您需要使用存储的信用卡，并且您的客户不会离开您的网站付款，那么它的商家网关。

# node.js - Heroku“npm install jugglingdb mongoose”已经做了

> ID：13327520
> 
> 赞同：1
> 
> 时间：2012-11-11T00:37:10.580
> 
> 标签：node.js, heroku

我正在尝试 Heroku，但我遇到了问题。

我部署了 Node.js 应用程序，但它崩溃了，然后我在本地对其进行了测试，发现这是因为它没有运行命令“npm install jugglingdb mongoose”。

我这样做了，然后它在本地工作，然后我尝试了

```
 git add . 
```

和

```
 git commit -m 'db' 
```

但后来我收到消息：

*没有什么可提交的（工作目录干净）*

然后我想，“好吧，然后我尝试将它提交给 heroku，现在它可以在我的本地计算机上运行”

```
 git push heroku master 
```

但我只是得到

*一切都是最新的*

然后我尝试重新启动它并再次尝试我的应用程序

```
 heroku restart 
```

但是日志又说= npm install jugglingdb mongoose

可能是什么问题呢？我也试过*npm update*并没有更新任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T08:22:58.360

确保您的“node_modules”目录不为空，并且您的模块安装在本地项目中，而不是默认的 NPM 根目录中：

```
npm update --binroot 
```

# javascript - 使用 javascript 调整内容大小时自动更改高度的动画

> ID：13327521
> 
> 赞同：2
> 
> 时间：2012-11-11T00:37:13.467
> 
> 标签：javascript, jquery, html, css

当我添加一些改变内容长度的东西时，我想控制容器的自动高度变化。现在，如果我对内容应用 innerHTML 更改，则高度会相应更改。我想对该高度变化应用过渡。我怎样才能做到这一点？（我也可以使用 jQuery ）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T00:46:26.347

记录改变内容前的高度，改变内容，记录之后的高度，设置高度为前者的高度，动画为后者的高度。动画完成后，再次将高度设置为自动。您可以使用[`height`](http://api.jquery.com/height)和来做到这一点[`animate`](http://api.jquery.com/animate)。

**在 JSFiddle 上试试[。](http://jsfiddle.net/VVBra/)**

```
var texts = [
    "This is just some sample text that's being used to demonstrate animating the height when content changes.",
    "Shorter."
];

var div = $('div').click(changeContent);

function changeContent() {
    var oldHeight = div.height();
    texts.push(div.text());
    div.text(texts.shift());
    var newHeight = div.height();
    div.height(oldHeight);
    div.animate({height: newHeight}, 'fast', function() {
        div.height('auto');
    });
}
```

```
div {
    width: 150px;
    background: lightgray;
    overflow-y: hidden;
}
```

```
<div>This is some example content.</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:49:52.840

```
<div id="containter" style="overflow:hidden">
<div>
 Content.....
</div>
</div>

//add something...
$('#container').animate({height:$('#container').content().outerHeight()}); 
```

或者：

```
 $('#container').animate({height:$('#container').children().first().outerHeight()}); 
```

并在容器内添加附加到 div 时：

```
$('#container').children().first().append(somethingNew); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-09T08:38:18.537

基于[icktoofay 的回答](https://stackoverflow.com/a/13327574/6263942)。

我在更改高度时禁用了按钮并添加了淡入淡出效果。此解决方案对于更新产品过滤器等很有用。

我也检查了`box-sizing`财产。如果是这样，`box-sizing`那么当新内容具有相同的高度时，我会`newHeight`通过[`.outerHeigth()`](https://api.jquery.com/outerHeight/)而不是[`.height()`](https://api.jquery.com/height/)防止高度波动。您可以检查这种情况，例如通过将`random`变量设置为 value `5`。原因是

> `.height()`无论 CSS box-sizing 属性的值如何，都将始终返回内容高度。

[代码笔](https://codepen.io/glebkema/pen/oNNyypa)

```
$('#button').click(function() {
  var $button = $(this),
      buttonOriginalText = $button.html();
  $button.prop('disabled', true).html('Updating...');
  $('#content').animate({
    opacity: 0
  }, 'fast', function() {
    var newHeight,
        $content = $(this),
        oldHeight = $content.height();
    $content.html(getRandomContent());
    newHeight = ('border-box' === $content.css('box-sizing') ? $content.outerHeight() : $content.height());
    $content.height(oldHeight).animate({
      height: newHeight,
      opacity: 1
    }, 'slow', function() {
      $content.height('auto');
      $button.prop('disabled', false).html(buttonOriginalText);
    });
  });
});

function getRandomContent() {
  var random = 1 + Math.round(Math.random() * 11), // 1..12
      paragraph = '<p>Paragraph</p>';
  return paragraph.repeat(random);
}
```

```
* {
  box-sizing: border-box;  /* comment out to test "content-box" */
  font: 16px Helvetica, 'sans-serif';
}

.content {
  counter-reset: content;
  padding: 6px 18px;
}

.content p {
  counter-increment: content;
}

.content p:after {
  content: ' ' counter(content) '.';
}

.content-box {
  border: 2px solid red;
  margin-top: 24px;
  max-width: 220px;
}
```

```
<button id="button" class="button">Update the content</button>
<div class="content-box">
  <div id="content" class="content">Animatie the automatic height when content is resized.</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
```

# c# - indexOf 找到空字符串

> ID：13327522
> 
> 赞同：3
> 
> 时间：2012-11-11T00:37:19.673
> 
> 标签：c#

当 ctrl.Text 碰巧是一个空字符串（值为 0）时，我得到了肯定的结果

这是正确的行为吗？我需要检查一个空字符串吗？

```
"Next|Prev|First|Last|Search".IndexOf(ctrl.Text) > -1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T00:40:55.433

是的，在[msdn](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)中你会发现。

> 如果值为 String.Empty，则返回值为 0。

# html - 如何使页面头部中的站点地图链接通过 W3C 验证器？

> ID：13327527
> 
> 赞同：9
> 
> 时间：2012-11-11T00:38:01.560
> 
> 标签：html, sitemap, w3c-validation, html-head

我正在尝试通过 W3C 验证器传递一个页面。站点地图上的验证失败，我将其包括在内：

```
<link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml" /> 
```

我得到的错误是：

> 元素链接上属性 rel 的错误值站点地图：不是绝对的 IRI。字符串站点地图不是注册的关键字或绝对 URL。

我一直在尝试修复它，但我尝试的任何方法似乎都不起作用，而且这是 Google 和 Html5 Boilerplate 推荐的布局。

我的语法有什么问题吗？似乎是正确的，但为什么它没有通过？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T01:13:13.410

简短的回答是你不能。

HTML 5 定义了您可以使用的值，`rel`而`sitemap`不是验证器识别的值之一。

错误消息确实表明您可以[在 wiki 上](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)注册新的链接类型，但站点地图已经存在，因此您只需等待验证器开发人员更新验证器以反映 wiki 的新状态（假设没有人删除条目）。

（这里的基本问题是让规范使用 wiki 页面作为规范资源是疯狂的，HTML 5 仍然是草案，并且 HTML 5 验证器仍然被认为是实验性的）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-06-24T14:46:31.893

来自未来（2021 年 6 月）。

入口：

```
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"> 
```

现在被**W3 HTML5 Validator接受**

也就是说：

```
rel="sitemap" 
```

现在是一个***有效**的属性 + 值*。

验证以下 HTML 文件：

```
<!DOCTYPE html>
<html lang="en-gb">
<head>
<meta charset="utf-8">
<title>My Rel Sitemap Test</title>
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
</head>

<body>
<h1>My Rel Sitemap Test</h1>
<p>This is my Rel Sitemap Test.</p>
<p>The document passes.</p>
<p>This document is valid HTML5 + ARIA + SVG 2 + MathML 3.0</p>
</body>
</html> 
```

这里：[https ://validator.w3.org/nu/](https://validator.w3.org/nu/)

返回响应：

> *文件检查完成。没有要显示的错误或警告。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T17:59:29.850

如果您只需要 w3c 验证器通过，也许您可​​以检测其用户代理并修改应用程序的输出以使其通过。我认为严格验证更多的是一种营销利益，而不是像这样的小问题。如果其他开发人员使用 w3c 验证器说您的客户的网站充满错误，那就很烦人。

您可以检查 HTTP_USER_AGENT 是否包含“W3C_Validator”并删除非标准代码。

在 CFML 中，我编写了这样的代码，以使我的 Google Authorship 链接仍然能够在 w3c 验证器上进行验证：

```
<cfif cgi.HTTP_USER_AGENT CONTAINS "W3C_Validator">data-</cfif>rel="publisher" 
```

我刚刚在谷歌论坛上发布了一个问题，他们是否可以开始支持 data-rel，或者他们是否可以确认谷歌搜索是否已经支持它。他们提供的结构化数据测试工具我刚才测试的时候并没有解析data-rel。 [http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

希望有人会跟进： [https ://groups.google.com/a/googleproductforums.com/d/msg/webmasters/-/g0RDfpFwmqAJ](https://groups.google.com/a/googleproductforums.com/d/msg/webmasters/-/g0RDfpFwmqAJ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T00:42:17.540

> 字符串站点地图不是注册关键字或绝对 URL

你的问题就在这里：

```
href="../sitemap.xml" 
```

您正在使用相对`URL`来指示您的站点地图在哪里。试着放这样的东西：

```
<link rel="sitemap" type="application/xml" title="Sitemap" href="/myfolder/sitemap.xml" /> 
```

**编辑**

由于机器人首先在您的根目录中爬行，因此最好的方法确实是`sitemap.xml`在您的根目录中使用您的文件：

```
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" /> 
```

或者

```
<link rel="sitemap" type="application/xml" title="Sitemap" href="http://yoursite.com/sitemap.xml" /> <!-- No www --> 
```

还，

确保*您*`link`的标签是您的标签的子`head`标签

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-26T22:16:06.377

尝试这个！

```
<link rel="alternate" type="application/xml" title="Site Map" href="http://yoursite.com/sitemap.xml" /> 
```

RSS 和 ATOM 提要也可以识别 rel 属性替代。我个人将它用于所有 xml 文档。

# html - 正文高度未填充 100% 页面高度

> ID：13327532
> 
> 赞同：35
> 
> 时间：2012-11-11T00:39:24.223
> 
> 标签：html, css

我想不通这个。我有一组简单的 div，带有标题、侧边栏和内容区域。标题是全宽的，侧面和内容向左浮动。

我需要侧边栏（用于背景）填充 100% 的页面高度，但是当我检查 chrome 中的元素时，`<body>`实际上在页面底部之前很久就结束了，这似乎限制了我的侧边栏的高度。

是什么阻止了`<body>`这里填满整个页面？

```
 ​&lt;body>
    <div id="head">
    </div>
<div id="sidebar">
    <div>
        <div id="menu">
            <ul>
                <li><a href="/dashboard.php"><img src="/img/blank.png" alt="home" id="home_ico">Home</a>
                </li>
                <li class="admin"><a><img src="/img/blank.png" alt="home" id="users_ico">Users</a>
                    <ul class="submenu" style="display: none;">
                        <li><a href="/users">Manage users</a></li>
                        <li><a href="/users/add.php">Add a user</a></li>
                    </ul>
                </li>

                <li class=""><a><img src="/img/blank.png" alt="home" id="clients_ico">Clients</a>
                    <ul class="submenu" style="display: none;">
                        <li><a href="/client_orgs">Manage clients</a></li>
                        <li><a href="/client_orgs/add.php" class="admin">Add a client</a></li>
                    </ul>
                </li>

                <li class=""><a><img src="/img/blank.png" alt="home" id="projects_ico">Projects</a>
                    <ul class="submenu" style="display: none;">
                        <li><a href="/projects">Manage projects</a></li>
                        <li><a href="/projects/add.php" class="admin">Create a project</a></li>
                        <li></li>
                        <li><a href="/projects/submitted.php" class="admin client">Submitted projects</a></li>
                        <li><a href="/projects/closed.php" class="admin">Closed projects</a></li>
                    </ul>
                </li>
                <li class=""><a href="/my_account"><img src="/img/blank.png" alt="home" id="account_ico">Account</a>
                </li>
                <li class="active"><a href="/help.php"><img src="/img/blank.png" alt="help" id="help_ico">Help</a>
                </li>
            </ul>

        </div>
    </div>
</div>    
<div id="body" class="full">
  <div id="content">

    <!--start block-->
    <div class="block">
        <h1><img src="/img/blank.png" alt="home" id="help_ico"> Help</h1>
        <p>
        Curabitur blandit tempus porttitor. Cras mattis consectetur purus sit amet fermentum. Cras mattis consectetur purus sit amet fermentum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Maecenas faucibus mollis interdum. Maecenas sed diam eget risus varius blandit sit amet non magna.
        </p>
    </div>  
</div>   
</body> 
```

CSS：

```
* {
    margin:0;
    padding:0;
}
html, body {
    height:100%;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 12px;
    line-height: 160%;
    position: relative;
    background: #000;
}
#sidebar{
    width: 200px;
    background: #000;
    height: 100%;
    padding-top: 30px;
    -webkit-box-shadow: inset -4px 0px 8px 0px rgba(0, 0, 0, 0.5);
        box-shadow: inset -4px 0px 8px 0px rgba(0, 0, 0, 0.5);
     float: left;
}
#body{
    float: left;
    padding: 30px 0 30px 40px;
    width: 75%;
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-12-27T21:20:05.440

看起来你已经`float:left`申请了你的孩子。使用此代码：

```
html, body {
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-08-21T08:19:38.017

请明智地使用这个答案，在很多情况下我无能为力：

```
html, body{min-height:100%;}
body{height:100vh;} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-11T00:48:55.727

尝试添加

```
body {
  min-height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-30T19:22:28.337

如有疑问 - 我发现解决此问题的最佳方法是添加：

```
html { overflow-y:scroll; } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-25T18:56:39.760

不知道这是否会帮助任何人，但我遇到了同样的问题，但只在移动设备上。我发现有一种风格`html { height: 100%; }`导致身体无法伸展整个高度。一旦我删除了 html 标记上的 100% 高度，它就修复了正文，而不是在移动设备上扩展页面的整个高度。我的身体标签上仍然有 100% 的高度。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-11T01:12:58.130

您似乎正在尝试实现跨越容器整个高度的布局 - 这些布局是不可能的。您应该阅读[Faux Columns](http://www.alistapart.com/articles/fauxcolumns/) CSS 技术，这是解决此问题的常见解决方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-11T00:57:53.150

有两个问题：

**首先：**
元素的宽度大于页面宽度的 100%
这就是为什么**div id="body"**卡在侧边栏下方的原因。

尝试将身体的宽度设置为 30%，你应该明白我的意思。

**第二：**
*height:100%*并没有像看起来有解决方法那样真正起作用。
[这是一个很好的解决方案](https://stackoverflow.com/questions/485827/css-100-height-with-padding-margin)

# c# - 自启动和故障异常

> ID：13327533
> 
> 赞同：2
> 
> 时间：2012-11-11T00:39:35.897
> 
> 标签：c#, wcf, wcf-client

处理 WCF 服务可能发生的任何故障的最佳方法是什么？因此，除了服务/WCF 本身中的 try/catch 之外，如果客户端出现故障，例如系统出现故障（即 MSMQ 在集群上出现故障或其他情况）怎么办？这样的事情会导致 WCF 服务主机出现故障。

如何在 x 秒后安全地重新启动服务？我尝试这样做，但即使当我在进入故障状态时在 Abort() 之后创建新的 ServiceHost 时，我总是会收到错误消息，指出通信通道出现故障或已关闭。

您可以推荐什么作为在服务主机应用程序出现故障时重新启动它并在该主机出现故障后成功重新建立该主机的良好解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:46:43.913

尝试将 WCF 服务实现为 Windows 服务。在这种情况下，当服务器重新启动时，您的主机也将重新启动。您应该实现从 ServiceBase 继承的 Windows 服务类，然后重写 OnStart 和 OnStop 方法。

# java - @see 和 @inheritDoc 之间的区别的详细信息

> ID：13327534
> 
> 赞同：105
> 
> 时间：2012-11-11T00:40:08.997
> 
> 标签：java, javadoc, comments

我查看了[JavaDoc 参考](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html)`@see`，虽然我了解（各种链接）和（超类 JavaDoc 注释的导出）之间的基本区别`{@inheritDoc}`，但我需要澄清事情的实际实现方式。

在 Eclipse IDE 中，当我为继承的方法（从接口或 toString() 覆盖等）选择“生成元素注释”时，它会创建以下注释

```
/* (non-Javadoc)
 * @see SomeClass#someMethod()
 */ 
```

如果我需要生成 JavaDoc，我应该保留它，替换`@see`为`{@inheritDoc}`，或将其转换为*真正的*JavaDoc，如下所示：

```
/**
 * {@inheritDoc}
 */ 
```

当我这样做时，我还应该保留 class#method 标志吗？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-11-11T01:01:34.743

首先，您应该删除原始的 eclipse 模板，因为它只是嘈杂的垃圾。要么放入有意义的文档，要么根本不放入任何东西。但是，使用 IDE 模板对显而易见的内容进行无用的重述只会使代码变得混乱。

其次，如果您需要生成 javadoc，那么您*必须*使注释以 . 开头`/**`。否则，它不是 javadoc。

最后，如果您要覆盖，那么您应该使用`@inheritDoc`（假设您想*添加*到原始文档中，正如@seh 在评论中指出的那样，如果您只想复制原始文档，那么您不需要任何东西）。`@see`应该只真正用于引用*其他*相关方法。

# file - 尝试读取整个文件时出现 MalformedInputException

> ID：13327536
> 
> 赞同：8
> 
> 时间：2012-11-11T00:40:30.400
> 
> 标签：file, scala, file-io

我有一个 132 kb 的文件（你不能说它很大），我正在尝试从 Scala REPL 中读取它，但我无法读取超过 2048 个字符，因为它给了我一个`java.nio.charset.MalformedInputException`例外

这些是我采取的步骤：

```
val it = scala.io.Source.fromFile("docs/categorizer/usig_calles.json") // this is ok
it.take(2048).mkString // this is ok too
it.take(1).mkString // BANG!

java.nio.charset.MalformedInputException: Input length = 1
at java.nio.charset.CoderResult.throwException(CoderResult.java:277)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:338)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
at java.io.InputStreamReader.read(InputStreamReader.java:184) 
```

知道有什么问题吗？

--

显然问题是文件不是UTF编码的

我将它保存为 UTF 并且一切正常，我只是在迭代器上发出 mkString 并检索文件的全部内容

奇怪的是，错误只引起了传递前 2048 个字符......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T01:25:39.520

没有该文件无法确定，但有关异常的文档表明它被抛出“当输入字节序列对于给定的字符集不合法，或者输入字符序列不是合法的 16 位 Unicode 序列时”。( [MalformedInputException javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/MalformedInputException.html) )

我怀疑在 2049 处遇到的第一个字符对于您环境中的默认 JVM 字符编码无效。考虑使用重载之一明确说明文件的字符编码`fromFile.`

如果应用程序将是跨平台的，您应该知道 JVM 上的默认字符编码确实因平台而异，因此如果您使用特定编码进行操作，您要么希望在启动应用程序时将其显式设置为命令行参数，或在每次调用时使用适当的重载指定它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-15T13:35:17.477

如果您只想将字节转换为纯拉丁数据：

```
// File:
io.Source.fromFile(file)(io.Codec.ISO8859).mkString

// InputStream:
io.Source.fromInputStream(System.io)(io.Codec.ISO8859).mkString 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T01:42:17.253

任何时候你`take`在同一个迭代器上调用两次，所有的赌注都被取消了。迭代器本质上是必不可少的，将它们与函数式惯用语混合起来充其量是冒险的。您在标准库中遇到的大多数迭代器在这方面往往表现得相当好，但是一旦您使用`take`, or `drop`, or`filter`等​​，您就处于未定义行为领域，原则上任何事情都可以发生。

从[文档](http://www.scala-lang.org/api/current/scala/collection/Iterator.html)：

> 特别重要的是要注意，除非另有说明，否则 *在调用迭代器方法后绝不应使用迭代器*。两个最重要的例外也是唯一的抽象方法：`next` 和`hasNext`...
> 
> `def take(n: Int): Iterator[A]`...
> 
> 重用：调用此方法后，应丢弃调用它的迭代器，只使用返回的迭代器。使用旧迭代器是未定义的，可能会发生变化，并且也可能导致对新迭代器的更改。

因此，可能不值得尝试准确找出这里出了什么问题。

# java - 用于 android 虚拟设备挂起的 Eclipse 调试器？

> ID：13327538
> 
> 赞同：6
> 
> 时间：2012-11-11T00:40:40.023
> 
> 标签：java, android, eclipse, debugging, avd

看到了[类似的问题](https://stackoverflow.com/questions/3759092/android-eclipse-hanging)，但[没有](http://www.infinitezest.com/articles/debugging-an-android-application.aspx)解决我所看到和必须处理的问题：

```
[16:29:11 - com.XX.yy] Attempting to connect debugger to 'com.XX' on port 8852 
```

没有实际设备，只有 Android 模拟器。

在模拟器上正确运行（虽然需要一段时间才能运行）。

但是，尝试调试它只是挂起。

显示上面的消息并在模拟器上显示黑屏...？

非常感谢正确方向的任何一点。

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:51:38.163

正如您所提到的，行正在等待您在程序中给出断点的位置。

调试时，模拟器总是很慢。通过更改 eclipse 文件夹中的 eclipse 配置文件并重新启动来提高 eclipse 速度。

希望对您有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:09:37.150

尝试删除当前的 AVD 并创建一个新的，然后再次运行调试器。解决了我的问题。

# c++ - 重载运算符 '>>' 的使用不明确（操作数类型为 'istream'（又名 'basic_istream ') 和 'MyIncreEx')

> ID：13327539
> 
> 赞同：0
> 
> 时间：2012-11-11T00:40:53.443
> 
> 标签：c++, operator-overloading, ambiguous

这是代码，我似乎没有发现它有什么问题；我需要重载 << 和 >> 运算符，但出现以下错误：

重载运算符“>>”的使用不明确（操作数类型为“istream”（又名“basic_istream”）和“MyIncreEx”）

我看不出它的真正含糊之处：

```
#include<iostream>
using namespace std;

class MyIncreEx;
istream& operator>>(istream& is, MyIncreEx& s);
ostream& operator<<(ostream &os, MyIncreEx& s);
MyIncreEx operator++(MyIncreEx& d, int dummy);
MyIncreEx operator++(MyIncreEx& d);

class MyIncreEx
{
friend istream& operator>>(istream& is, MyIncreEx s);
friend ostream& operator<<(ostream& os, MyIncreEx s);
friend MyIncreEx operator++(MyIncreEx& d, int dummy);   //post-fix ex: x++;
friend MyIncreEx operator++(MyIncreEx& d);  //pre-fix ex: ++x;

public:
MyIncreEx(){num1=0; num2=0; num3=0;};

int num1;
int num2;
int num3;
};

//------------------------------------------------
istream& operator>>(istream& is, MyIncreEx& s)
{
is >> s.num1;
is >> s.num2;
is >> s.num3;
return is;
};

//------------------------------------------------
ostream& operator<<(ostream &os, MyIncreEx& s)
{
os << "(" << s.num1 <<"," <<s.num2 << "," << s.num3 <<")"<< endl;
return os;
};

//------------------------------------------------
MyIncreEx operator++(MyIncreEx& d)              //pre-fix   ex: ++x;
{
d.num1=d.num1+1;
d.num2=d.num2+1;
d.num3=d.num3+1;

return d;
};
//------------------------------------------------

MyIncreEx operator++(MyIncreEx& d, int dummy)   //post-fix ex: x++;
{
d.num1=d.num1+1;
d.num2=d.num2+1;
d.num3=d.num3+1;
return d;
};

//------------------------------------------------
int main()
{
MyIncreEx obj;

cout << "please enter three numbers: ";
cin  >> obj;
cout << "The original value are: ";
cout << obj;
cout << endl;
obj++;
cout << "The new values after obj++ are: ";
cout <<  obj;
cout << endl;
++obj;
cout << "The new values after ++obj are: ";
cout << obj;
cout << endl;

}
//------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:44:30.320

您声明了两个不同版本的输出运算符：

```
istream& operator>>(istream& is, MyIncreEx& s);
ostream& operator<<(ostream &os, MyIncreEx& s);

class MyIncreEx
{
    friend istream& operator>>(istream& is, MyIncreEx s);
    friend ostream& operator<<(ostream& os, MyIncreEx s);
    ...
}; 
```

`friend`运算符具有不同且相互冲突的签名。您可能想将它们声明为

```
 friend istream& operator>>(istream& is, MyIncreEx& s);
    friend ostream& operator<<(ostream& os, MyIncreEx const& s); 
```

（假设您还修复了输出运算符以使用`MyIncreEx const&`而不是`MyIncreEx&`）。

# css - 为什么链接样式适用于所有元素，即使它应该只适用于一个元素

> ID：13327540
> 
> 赞同：0
> 
> 时间：2012-11-11T00:40:54.427
> 
> 标签：css, hyperlink

为什么[此](http://eighttwentydesign.com/portfolio/mobileapps)页面上的链接（以及所有其他但最好演示的链接）在所有页面中共享链接样式。要演示这个点击投资组合然后返回，你会看到链接文本变成白色，即使这应该只用于页面底部的“消息”元素（带圆角的蓝色）？

这是我的 CSS

```
.message {
background-color:#54a0d9;
border:1px solid #54a0d9;
color:#fff;
}

.message h2 {
font-size:22px;
color:#fff;
}

.message a:link, a:visited, a:hover, a:active {
color:#fff; } 
```

并且 HTML 是元素内的普通链接（它不是 message 元素的子元素。

当然这应该只适用于 Message 元素？

我已经对造成这种情况的原因进行了一些研究，但到目前为止还没有……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T00:42:55.007

用逗号分隔选择器意味着完全分开考虑它们。所以在这里：

```
.message a:link, a:visited 
```

意味着将此样式应用于`a:link`具有“消息”类的元素内部的 s 以及`a:visited`s。请注意，后者*不必在类 message 的元素内*。只需`.message`在每个逗号分隔的术语前面放置即可修复它。

# java - LWJGL - 如何有效且高效地追踪光线？

> ID：13327544
> 
> 赞同：2
> 
> 时间：2012-11-11T00:41:17.013
> 
> 标签：java, opengl, 3d, lwjgl

我有原点和方向矢量，但我不知道如何跟随光线并检查碰撞......

[这](http://tinypic.com/view.php?pic=344e25t&s=6)是射线的图片，它会发出大约 6 个方块。

```
Vector3f cam = camera.getPosition();
Vector3f dir = getDirection();

dir.x *= 40;
dir.y *= 40;
dir.z *= 40;

Vector3f dest = new Vector3f(cam.x + dir.x, cam.y + dir.y, cam.z + dir.z);

public Vector3f getDirection()
{
    Vector3f vector = new Vector3f();

    float rotX = camera.yaw;
    float rotY = camera.pitch;

    vector.y = (float) -Math.sin(Math.toRadians(rotY));

    float h = (float) Math.cos(Math.toRadians(rotY));

    vector.x = (float) (h * Math.sin(Math.toRadians(rotX)));
    vector.z = (float) (-h * Math.cos(Math.toRadians(rotX)));

    return vector;
} 
```

我尝试过使用 gluUnProject 并且它工作了一点，但是就像当你选择一个块的面时它不是很精确。

顺便说一句：我正在使用块的显示列表，我只是在该显示列表中渲染块四边形。我得到 60 FPS。我一直在搜索和搜索，但在光线追踪和/或光线拾取方面找不到任何东西......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:22:09.417

你的问题非常不准确。
由于您的场景似乎由网格组成，我建议您查看“3D 数字差分分析仪”：
[http](http://www.cse.chalmers.se/edu/course/_MY_MISSING_COURSE_2012/_courses_2011/TDA361_Computer_Graphics/grid.pdf)
://www.cse.chalmers.se/edu/course/_MY_MISSING_COURSE_2012/_courses_2011/TDA361_Computer_Graphics/grid.pdf 和：
[http://en.wikipedia.org/wiki/Digital_differential_analyzer_%28graphics_algorithm%29](http://en.wikipedia.org/wiki/Digital_differential_analyzer_%28graphics_algorithm%29)

# node.js - node js实现end函数

> ID：13327545
> 
> 赞同：0
> 
> 时间：2012-11-11T00:41:20.743
> 
> 标签：node.js, azure

```
var flag= ""
        if(request.method=='PUT')
        {
            request.on('end', function () 
            {  
                        var query = azure.TableQuery
                         if(!error){
                            for (var index in entities) {
                                    if(entities[index].RowKey==xxx)
                                    {                               
                                    flag=555;
                                    }
                                }
                            if (flag==="555")
                            {
                            response.writeHead(200, 
                            send success                                                                                                
                            }
                            else
                            {
                            console.log("the flag is ");
                            console.log(flag);
                            send failure
                            }
            });
        }

    }).listen(9200); 
```

这是一个伪代码。我想根据 flg 获得 200 OK 发送。但我看到我总是收到 200 OK 数据不存在。

我保留了一些控制台日志，并看到总是：“标志是”首先打印，然后打印 if(entities[index].RowKey==xxx) 中的控制台日志。

我从调试日志中感觉到天蓝色查询需要时间，并且该尖节点正试图执行其余代码

我也想知道我是否遗漏了什么？

# ruby-on-rails - 将 Aloha Editor 集成到 Rails 应用程序中

> ID：13327547
> 
> 赞同：1
> 
> 时间：2012-11-11T00:41:43.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想将一个原型 Rails 应用程序与 Aloha 编辑器一起在工作中进行演示，因为该编辑器会解决我们的内容编辑器在我们网站上当前（基于 Drupal）所见即所得编辑情况时遇到的一些挫败感. （Aloha 与 Drupal 的集成仍处于早期 alpha 阶段，它使我们的网站基本上不可用。）

问题是至少有三个名为 的 github 项目`/aloha.rails/`，目前还不清楚哪个是最好的起点。由于这基本上是臭鼬工程，直到管理层认为它可以解决我们的问题并批准进一步的工作，我不能花很多时间在一个上，只是发现我应该使用不同的。有没有什么是当前*事实上的*标准？

以下是三个项目：

*   [https://github.com/tylergannon/aloha_rails](https://github.com/tylergannon/aloha_rails)
*   [https://github.com/Skalar/aloha-rails](https://github.com/Skalar/aloha-rails)
*   [https://github.com/locomotivecms/aloha-rails](https://github.com/locomotivecms/aloha-rails)

没有提到其中任何一个是另一个的叉子。

# sqlite - sqlite中查询结果的顺序

> ID：13327552
> 
> 赞同：1
> 
> 时间：2012-11-11T00:42:16.807
> 
> 标签：sqlite

这是名为 commonprofit 的表：

```
name    date    turnover
1   2011/12 42359
1   2010/12 32863
1   2009/12 24293
1   2008/12 16436
1   2007/12 15442
2   2011/12 91634
2   2010/12 58410
2   2009/12 50668
2   2008/12 54297
3   2009/12 12352
3   2008/12 12352
3   2007/12 14226

select  name,max(date)  as date, turnover  from commonprofit  group  by name
union 
select  name,min(date) as date,turnover  from commonprofit    group  by name; 
```

结果是

```
name|date|turnover
00001|2007/12|15442
00001|2011/12|42359
00002|2008/12|54297
00002|2011/12|91634
00003|2007/12|14226
00003|2009/12|12352 
```

为什么结果不如下：

```
name|date|turnover
00001|2011/12|42359
00002|2011/12|91634
00003|2009/12|12352
00001|2007/12|15442
00002|2008/12|54297
00003|2007/12|14226 
```

我想知道为什么序列不是我在 sqlite 查询中想要的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:27:57.697

原因是`UNION`删除了在其子查询中重复的记录。为了使查找重复项更容易，SQLite 对结果进行排序。

为避免此步骤，请使用`UNION ALL`代替`UNION`. （这意味着如果 a`name`只有一个`date`，它将出现两次。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T04:43:51.197

如果你想要一个特定的订单，你必须提供一个`order by`条款。例如，

```
select o, name, date, turnover from
(
  select  'x' as o, name, max(date) as date, turnover from commonprofit group  by name
  union 
  select  'n' as o, name, min(date) as date, turnover from commonprofit group  by name
)
order by o desc, name;

x|1|2011/12|42359
x|2|2011/12|91634
x|3|2009/12|12352
n|1|2007/12|15442
n|2|2008/12|54297
n|3|2007/12|14226 
```

# java - 将 Windows 样式的路径转换为 Unix 路径

> ID：13327556
> 
> 赞同：11
> 
> 时间：2012-11-11T00:43:26.853
> 
> 标签：java, path

我想获取一个表示路径的字符串并将其转换为绝对 Unix 风格的路径。该字符串可以是 Windows 或 Unix 样式，因为它是调用的结果，`MainClass.class.getClassLoader().getResource("").getPath()`根据您的系统返回不同的样式路径。

（我正在为我正在编写的游戏这样做，其中一部分为用户提供了一个简单的“bash-ish”外壳，我希望用户能够读取文件。假文件系统作为普通文件存储我项目的子目录中的目录树。这个文件系统将使用 Unix 样式的路径，我希望能够将输入的路径与上述字符串连接起来（通过一些小的编辑将其放入正确的目录），这样我就可以找到文件的内容。）

有什么想法我可以如何去做吗？我已经尝试了很多方法，但我似乎无法让它在我朋友的 Windows 7 系统上正常工作。

目前我只是使用一个简单的东西来检查字符串是否以“C：\”或类似的东西开头，然后用斜杠替换反斜杠，但这不可能是解决这个问题的好方法，而且我敢肯定其他人以前也遇到过不同路径样式的问题。这当然是一个非常临时的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T01:20:59.040

一般来说，我在使用“/”作为分隔符的任何操作系统上都没有遇到过问题。

```
 new File("/a/b/c.txt"); 
```

至少适用于 Unix、Windows 和 iSeries。

如果你想正确的话，有一个常量“File.separator”，它包含操作系统分隔符。

如果要替换字符串中的反斜杠“\”，请记住它是一个特殊的转义字符：

```
String newString = str.replace("\\","/"); 
```

**编辑：**

请记住，String 是不可变的。

```
 str.replace("\\","/"); 
```

不会改变字符串，只返回一个带有替换字符的新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:15:06.993

如果您想要做的只是能够访问具有某个目录的相对名称的文件，您可以使用普通的[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29) API，如下所示：

```
final String baseDir = MainClass.class.getClassLoader().getResource("").getPath();
final String relativeName = "audio/abc.mp3";
final File relativeFile = new File(baseDir, relativeName);
final String canonicalPath = relativeFile.getCanonicalPath(); 
```

它应该适用于 Unix 和 Windows，因为 Windows 接受 Unix 和 Windows 样式的路径（仅根据我自己的经验说）。

# objective-c - 使用 Cocoa 模拟 USB 游戏杆

> ID：13327557
> 
> 赞同：2
> 
> 时间：2012-11-11T00:43:42.493
> 
> 标签：objective-c, macos, cocoa

可以用 Cocoa 模拟 USB 游戏杆吗？在图像中，USB 操纵杆创建了一个`J1_LEFT`密钥。可可有可能吗？

即使这并不简单，如果有解决方案，我将不胜感激。

编辑：我找到[**了 DDHidLib**](http://www.dribin.org/dave/blog/archives/2007/03/19/ddhidlib_10/)。这是一门非常好的课程，但不幸的是它是从 2008 年开始的（但真的很适合我想要的）。如果有人有这个类的一些代码（帮助我模拟 USB 游戏杆），我将不胜感激。
![示例 01](../Images/b9c75dc5178dd819cd86defc6dc201d4.png)

# vim - 如何自动插入 段落后的标签？

> ID：13327558
> 
> 赞同：2
> 
> 时间：2012-11-11T00:43:48.883
> 
> 标签：vim, macros

我经常在 Vim 中编辑文章，我想编写一个宏来在段落的开头和结尾插入 <p> 标签（定义为通过两个或多个换行符与其他文本块分隔的任何文本块）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:10:23.503

这是一个选项：

```
exe "%s#\\n\\n#\r</p>\r\r<p>#|norm D/<\/p\<CR>dd" 
```

如果您进行大量纯文本论文写作，我建议您研究[Markdown](http://johnmacfarlane.net/pandoc/)和[pandoc 。](http://daringfireball.net/projects/markdown/)此外，Tim Pope 的[环绕](https://github.com/tpope/vim-surround).vim 插件允许这种标签环绕。例如，我可以使用[环绕](https://github.com/tpope/vim-surround).vim 插件来用标签包围一个段落。`ysiptp<CR>``<p>`

# xcode - 适用于 Windows 的便携式 Cocoa

> ID：13327559
> 
> 赞同：0
> 
> 时间：2012-11-11T00:43:52.923
> 
> 标签：xcode, windows, cocoa, portability

所以我在 Xcode 中从事一个项目，并且希望在旅行时也能够在我的 PC 工作笔记本电脑上工作。有什么我可以用 USB 运行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:38:42.533

您可以尝试在您的 PC 中安装 Mac OS ！！！我的许多朋友使用 VMWare 9 在他们的基于 Intel 的 PC 中安装了双 Mac OS X Mountain Lion 和 Mac OS X Mountain-Lion，并且运行良好。但是我尝试使用 AMD 处理器时没有成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:47:15.890

您可以使用普通的文本编辑器编辑所有文本文件，例如[Notepad++](http://notepad-plus-plus.org/)。我认为没有任何适用于 Windows 的软件可以编辑您在项目中拥有的所有不同内容，例如`.xib`文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T03:09:07.563

如果你有野心，你可以尝试 gnustep，但在 cigwin 上设置起来非常困难，而且只非常适合 Mac OS X 而不是 iOS。

# android - 在android中加载现有数据库

> ID：13327565
> 
> 赞同：0
> 
> 时间：2012-11-11T00:44:35.117
> 
> 标签：android, database, sqlite

> **可能重复：**
> [如何将现有数据库与 Android 应用程序一起使用](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application)

我正在 Android 中做一个项目，我正在尝试将现有数据库加载到我的应用程序中。我遇到了一个错误。

```
public class DBHelper extends SQLiteOpenHelper{

private static String DB_PATH = "/data/data/com.example.qbox/databases/";
private static String DB_NAME = "frases.db";

private SQLiteDatabase myDatabase;
private final Context _context;

public static final String KEY_ID = "_id";
public final static String KEY_FRASE = "frase";
public final static String KEY_AUTOR = "autor";
public final static String KEY_CATEGORIA = "categoria";
public final static String KEY_FAVORITA = "favorita";

public static final String DATABASE_TABLE = "frases";

private static final String[] cols = new String[] { KEY_ID, KEY_FRASE, KEY_AUTOR, KEY_CATEGORIA, KEY_FAVORITA};

public DBHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this._context = context;
    }        

/**
* create new db and then rewrite records.
* */
public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        // dn exists ... nothing to do
    } else {
      this.getReadableDatabase();
    try {

    copyDataBase();

    } catch (IOException e) {
    throw new Error("Error copiando Base de Datos");
    }
}

}

/**
* Check if db exists
*/
private boolean checkDataBase(){

SQLiteDatabase checkDB = null;

try{

String myPath = DB_PATH + DB_NAME;
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

} catch(SQLiteException e) {

}
if(checkDB != null){

    checkDB.close();

}
return checkDB != null ? true : false;
}

/**
*  Copy Database
 **/
private void copyDataBase() throws IOException{

    InputStream myInput = _context.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while (( length = myInput.read(buffer)) > 0){
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void open() throws SQLException{
    try {
        createDataBase();
    } catch (IOException e) {
        throw new Error("Ha sido imposible crear la Base de Datos");
    }

    String myPath = DB_PATH + DB_NAME;
    myDatabase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if(myDatabase != null)
        myDatabase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

/**
* INSERTAR NUEVA FRASE
* */
public long insertarFrase(Integer id,String frase, String autor, String categoria, String favorita ) {
    ContentValues newValues = new ContentValues();
    newValues.put(KEY_ID, id);
    newValues.put(KEY_FRASE,frase);
    newValues.put(KEY_AUTOR, autor);
    newValues.put(KEY_CATEGORIA, categoria);
    newValues.put(KEY_FAVORITA, favorita);
    return myDatabase.insert(DATABASE_TABLE, null, newValues);
}

/**
* BORRAR FRASE CON _id = _rowIndex
* */
public boolean removerFrase(long _rowIndex) {
    return myDatabase.delete(DATABASE_TABLE, KEY_ID + "=" + _rowIndex, null) > 0;
}

/**
* ACTUALIZAR FRASE _id = _rowIndex
* */
public boolean updateFrase(Integer _rowIndex, String frase, String autor, String categoria, String favorita ) {
    ContentValues newValues = new ContentValues();
    newValues.put(KEY_FRASE,frase);
    newValues.put(KEY_AUTOR, autor);
    newValues.put(KEY_CATEGORIA, categoria);
    newValues.put(KEY_FAVORITA, favorita);
    return myDatabase.update(DATABASE_TABLE, newValues, KEY_ID + "=" + _rowIndex, null) > 0;
}

  public List<Frase> getTodasLasFrases() {
        List<Frase> contacts = new ArrayList<Frase>();

        Cursor cursor = myDatabase.query(DBHelper.DATABASE_TABLE,
            cols, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
          Frase frase = cursorFrase(cursor);
          contacts.add(frase);
          cursor.moveToNext();
        }
        cursor.close();
        return contacts;
      }
  private Frase cursorFrase(Cursor cursor) {
      Frase frase = new Frase();
          frase.setId(cursor.getLong(0));
          frase.setFrase(cursor.getString(1));
          frase.setAutor(cursor.getString(2));
          frase.setCat(cursor.getString(3));
          frase.setFav(cursor.getString(4));
      return frase;
  }
  public Frase getContact(int id) {

        Cursor cursor = myDatabase.query(DBHelper.DATABASE_TABLE, cols, this.KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Frase frase = cursorFrase(cursor);

        return frase;
  } 
```

}

在主班

公共类 Home 扩展 Activity 实现 OnClickListener {

```
ImageButton favBtn,catBtn,infoBtn,shareBtn;

DBHelper db;    

ListView lv;
List<Frase> values;
ArrayAdapter<Frase> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.home);

    favBtn =(ImageButton) findViewById(R.id.favBtn);
    catBtn = (ImageButton) findViewById(R.id.catBtn);
    infoBtn = (ImageButton) findViewById(R.id.infoBtn);
    shareBtn = (ImageButton) findViewById(R.id.shareBtn);

    infoBtn.setOnClickListener(this);
    catBtn.setOnClickListener(this);
    favBtn.setOnClickListener(this);
    shareBtn.setOnClickListener(this);
    prepararFrases();     
}

@Override
public void onClick(View v) {

}

public void prepararFrases(){

    db.open();
      /*
    values = db.getTodasLasFrases();
    adapter = new ArrayAdapter<Frase>(this,
            android.R.layout.simple_list_item_1, values);

    //setListAdapter(adapter);

    for (Frase cn : values) {
        String log = "Id: "+cn.getId()+" ,Frase: " + cn.getFrase()+ " ,Autor: " + cn.getAutor();
        Log.d("Name: ", log);
    }  

    db.close();*/

} 
```

}

错误：

```
11-10 21:45:08.366: E/AndroidRuntime(5535): Uncaught handler: thread main exiting due to uncaught exception
11-10 21:45:08.376: E/AndroidRuntime(5535): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.qbox/com.example.quotebox.Home}: java.lang.NullPointerException
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2503)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2519)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread.access$2200(ActivityThread.java:123)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.os.Looper.loop(Looper.java:123)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread.main(ActivityThread.java:4370)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at java.lang.reflect.Method.invokeNative(Native Method)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at java.lang.reflect.Method.invoke(Method.java:521)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at dalvik.system.NativeStart.main(Native Method)
11-10 21:45:08.376: E/AndroidRuntime(5535): Caused by: java.lang.NullPointerException
11-10 21:45:08.376: E/AndroidRuntime(5535):     at com.example.qbox.Home.prepararFrases(Home.java:74)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at com.example.qbox.Home.onCreate(Home.java:45)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-10 21:45:08.376: E/AndroidRuntime(5535):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2466)
11-10 21:45:08.376: E/AndroidRuntime(5535):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:52:56.857

尝试打开 db 时出现 nullPointerException。您已经声明了它，但您没有创建它的实例。在 onCreate() 方法的主要活动中，创建 DBHelper 类的新实例，然后将上下文作为参数传递给它的构造函数：

```
db = new DBHelper(getBaseContext()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:57:19.250

请在您的帖子中格式化 logcat 跟踪。否则很难阅读。

还请了解如何理解异常堆栈跟踪以及如何调试您的应用程序。它将节省*每个人的时间，包括您在内。

logcat 显示空指针异常在 prepareFrases() 中，特别是第 74 行。

```
Caused by: java.lang.NullPointerException 11-10 21:45:08.376: E/AndroidRuntime(5535): at com.example.qbox.Home.prepararFrases(Home.java:74) 
```

你没有告诉我们第 74 行是什么，但由于它只包含一个可执行语句，它必须是这样的：

```
db.open(); 
```

它为 null 的原因（如果您在调试器中单步执行，您会知道）是您尚未初始化它，例如：

```
db = new DBHelper(this); 
```

# java - 在一个简单易懂的解释中，Java 中的 Runnable 是什么？

> ID：13327571
> 
> 赞同：109
> 
> 时间：2012-11-11T00:45:43.903
> 
> 标签：java, runnable

用外行的话来说，Java 中的“可运行”是什么？我是一名高中AP编程学生，任务是做研究，或者从别人那里寻找“可运行”是什么（我们刚刚进入OOP，还没有接触过线程）。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-11-11T00:50:17.567

Runnable 基本上是一种可以放入线程中的类（Runnable 是一个接口），描述线程应该做什么。

[Runnable 接口](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)需要类来实现方法，`run()`如下所示：

```
public class MyRunnableTask implements Runnable {
     public void run() {
         // do stuff here
     }
} 
```

然后像这样使用它：

```
Thread t = new Thread(new MyRunnableTask());
t.start(); 
```

如果你没有`Runnable`接口，负责在另一个线程中执行你的东西的 Thread 类就不会承诺`run()`在你的类中找到方法，所以你可能会出错。这就是为什么你需要实现接口。

### 高级：匿名类型

请注意，您不需要像往常一样定义一个类，您可以内联完成所有这些：

```
Thread t = new Thread(new Runnable() {
    public void run() {
        // stuff here
    }
});
t.start(); 
```

这与上面类似，只是您不创建另一个命名类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-11T00:50:57.643

`Runnable`是这样定义的接口：

```
interface Runnable {
    public void run();
} 
```

要创建一个使用它的类，只需将类定义为`(public) class MyRunnable implements Runnable {`

它甚至可以在不创建新线程的情况下使用。它基本上是您的基本界面，只有一个可以调用的方法 run。

如果你创建一个新的线程，它的参数是runnable，它会在一个新的线程中调用run方法。

还应该注意 Threads 实现`Runnable`，并且在创建新线程时调用（在新线程中）。默认实现只是调用您在构造函数中提交的任何 Runnable，这就是为什么您可以在`new Thread(someRunnable)`不覆盖 Thread`run`方法的情况下执行此操作。

# javascript - 如何防止 document.forms[0].submit() 提交表单？

> ID：13327572
> 
> 赞同：0
> 
> 时间：2012-11-11T00:45:53.363
> 
> 标签：javascript, jquery, html, forms, post

这基本上是我的形式：

```
<form method="post" action="" onsubmit="checkallfields(); event.preventDefault();">
  <!-- My Stuff -->
</form> 
```

这是我页面上的第一个表单。我有客户端字段验证，显然存储在函数中`checkallfields()`。但问题是，用户可能很调皮，打开控制台并输入`document.forms[0].submit()`，然后表单仍然会提交。

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:47:28.117

你无法阻止它。这就是您需要进行服务器端验证的原因，也是您应该始终进行服务器端验证的原因。客户端不可信，我什至不需要您的网页提交到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:02:33.187

我思考了这个问题，得到了自己的答案。在谷歌浏览器中测试过。

```
var i = document.forms.length;
while (i--) {
  document.forms[i].submit = function () {
    return false;
  }
} 
```

它对你们有用吗？你可以在这里查看：http: [//jsfiddle.net/think123/ZRuYw/](http://jsfiddle.net/think123/ZRuYw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T00:43:51.360

只需将文档上的该功能设置为 false。

```
document.forms[0].submit = function () {
  return false;
} 
```

# php - 将图像大小调整到另一个目录

> ID：13327576
> 
> 赞同：0
> 
> 时间：2012-11-11T00:47:13.270
> 
> 标签：php, image, image-resizing

我的所有图像都有以下内容`/images/500x500/`。`/images/250x250/`我需要将图像大小调整为 250x250 并让它们使用**相同的文件名**进入。

它不会在新目录中创建新图像，而是替换同一目录中的大图像？

```
<?php

$files = glob("*.{png,jpg,jpeg}", GLOB_BRACE);

foreach ($files as $file) 
{
  // get the image size
  $imagesize = getimagesize($file);
  $width_orig = $imagesize[0];
  $height_orig = $imagesize[1];

  $dst_w = 250;

  if($width_orig != $dst_w)
  {

    $dst_h_multiplier = $dst_w / $width_orig;
    $dst_h = $dst_h_multiplier * $height_orig;

    $dst = imagecreatetruecolor($dst_w, $dst_h);
    $image = imagecreatefromjpeg($file);
    imagecopyresampled($dst, $image, 0, 0, 0, 0, $dst_w, $dst_h ,$width_orig, $height_orig);

    imagejpeg($dst, $outputFile, 100);

$outputFile = 
    realpath(
        pathinfo($file, PATHINFO_DIRNAME) 
        . '/../250x250/'
    ) . pathinfo($file, PATHINFO_BASENAME);

  }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:54:38.320

```
$outputFile = 
    realpath(
        pathinfo($file, PATHINFO_DIRNAME) 
        . '/../'
    ) . pathinfo($file, PATHINFO_BASENAME); 
```

首先，您需要路径，您可以使用`realpath()`，以及`pathinfo()`。然后，只需附加 a`..`和文件名。

*   [http://www.php.net/manual/en/function.pathinfo.php](http://www.php.net/manual/en/function.pathinfo.php)
*   [http://php.net/manual/en/function.realpath.php](http://php.net/manual/en/function.realpath.php)

此外，您可能不需要`realpath()`. 我没有测试过。

# java - 将 jar 文件包含到类路径中

> ID：13327580
> 
> 赞同：0
> 
> 时间：2012-11-11T00:47:44.260
> 
> 标签：java, classpath, voice-recognition, cmusphinx

我试图运行 Sphinx 的 HelloWOrd 程序，它需要一个 .jar 文件才能工作。

我试图在类路径中添加一个 jar 文件，但我遇到了一些错误

竞争.util 不存在导入 edu.cmu.sphinx.frontend.util.Microphone；^ home/karen/workspace/hola/src/hola/HelloWorld.java:4: 包 edu.cmu.sphinx.recognizer 不存在导入 edu.cmu.sphinx.recognizer.Recognizer; ^ home/karen/workspace/hola/src/hola/HelloWorld.java:5: 包 edu.cmu.sphinx.result 不存在 import edu.cmu.sphinx.result.Result; ^ home/karen/workspace/hola/src/hola/HelloWorld.java:6: 包 edu.cmu.sphinx.util.props 不存在导入 edu.cmu.sphinx.util.props.ConfigurationManager；^ home/karen/workspace/hola/src/hola/HelloWorld.java:11：找不到符号符号：类 ConfigurationManager 位置：类 hola。HelloWorld 配置管理器厘米；^ home/karen/workspace/hola/src/hola/HelloWorld.java:14：找不到符号符号：类 ConfigurationManager 位置：类 hola.HelloWorld cm = new ConfigurationManager(args[0]); ^ home/karen/workspace/hola/src/hola/HelloWorld.java:16：找不到符号符号：类 ConfigurationManager 位置：类 hola.HelloWorld cm = new ConfigurationManager(HelloWorld.class.getResource("helloworld.config.xml" )); ^ home/karen/workspace/hola/src/hola/HelloWorld.java:19：找不到符号符号：类识别器位置：类hola.HelloWorld识别器识别器=（识别器）cm.lookup（“识别器”）；^ home/karen/workspace/hola/src/hola/HelloWorld.java:19：找不到符号符号：类识别器位置：类hola.HelloWorld识别器识别器=（识别器）cm.lookup（“识别器”）；^ home/karen/workspace/hola/src/hola/HelloWorld.java:23：找不到符号符号：类麦克风位置：类hola.HelloWorld麦克风麦克风=（麦克风）cm.lookup（“麦克风”）；^ home/karen/workspace/hola/src/hola/HelloWorld.java:23：找不到符号符号：类麦克风位置：类hola.HelloWorld麦克风麦克风=（麦克风）cm.lookup（“麦克风”）；^ 家/卡伦/工作区/hola/src/hola/HelloWorld。java：36：找不到符号符号：类结果位置：类hola.HelloWorld结果结果=recogner.recognize（）；^ 12 个错误

我的问题是：我必须添加所有需要我的项目的包还是只添加 jar 文件和主类？

请建议！

这是 HelloWord 程序：

包好啦；

```
import edu.cmu.sphinx.frontend.util.Microphone;
import edu.cmu.sphinx.recognizer.Recognizer;
import edu.cmu.sphinx.result.Result;
import edu.cmu.sphinx.util.props.ConfigurationManager;

public class HelloWorld {
    public static void main(String [] args){
        System.out.println("VIcente y karen");
        ConfigurationManager cm;
        System.out.println("Karen entiende esto");
                if (args.length > 0) {
                    cm = new ConfigurationManager(args[0]);
                } else {
                    cm = new ConfigurationManager(HelloWorld.class.getResource("helloworld.config.xml"));
                }

                Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
                recognizer.allocate();

                // start the microphone or exit if the programm if this is not possible
                Microphone microphone = (Microphone) cm.lookup("microphone");
                if (!microphone.startRecording()) {
                    System.out.println("Cannot start microphone.");
                    recognizer.deallocate();
                    System.exit(1);
                }

                System.out.println("Say: (Good morning | Hello) ( Bhiksha | Evandro | Paul | Philip | Rita | Will )");

                // loop the recognition until the programm exits.
                while (true) {
                    System.out.println("Start speaking. Press Ctrl-C to quit.\n");

                    Result result = recognizer.recognize();

                    if (result != null) {
                        String resultText = result.getBestFinalResultNoFiller();
                        System.out.println("You said: " + resultText + '\n');
                    } else {
                        System.out.println("I can't hear what you said.\n");
                    }
                }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:54:30.883

很可能您没有在程序中导入正确的类或包（包名称是否正确？似乎编译器无法从前几行错误行中识别它们）。

即使您的类路径中有包含类的 JAR 文件，您仍然必须将它们导入您的特定类中，以便编译器知道您需要哪些外部类。

您还必须为内置的 Java 类（`java.util.ArrayList`例如）执行此操作。如果您提供您的程序，我们将能够更好地帮助您。

如果您拥有的 Jar 文件还依赖于其他库，那么也必须提供它们。

使用 zip 程序（例如 winrar）打开您的 JAR 文件并检查您正在导入的包是否存在。您应该会看到一个名为 edu 的文件夹，其中包含更多文件夹 cmu/sphinx/frontend/util，然后是 Microphone.class。同样对于带有文件 Recognizer.class 的 edu.cmu.sphinx.recognizer。

如果您使用的是 IDE（例如 Eclipse、Netbeans 或 IntelliJ IDEA），请确保将 jar 文件添加到项目库列表中。

对于 Eclipse，您必须按照[此处的程序进行操作](http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath?)

# c++ - Windows 上的 wxWidgets + Cygwin

> ID：13327582
> 
> 赞同：0
> 
> 时间：2012-11-11T00:47:46.790
> 
> 标签：c++, cygwin, wxwidgets

我正在尝试在 Windows 上安装 wxWidgets。

我解压缩了 wxWidgets，然后按照本指南进行操作：[http ://wiki.wxwidgets.org/Adding_an_Environment_Variable_under_Windows](http://wiki.wxwidgets.org/Adding_an_Environment_Variable_under_Windows)

我复制了他们的示例 hello world 源代码并尝试使用 g++ 编译它，但它告诉我`wx/wx.h No such file...`

我是 C++ 新手。我做对了吗？我完全按照指南进行。

PS：我用的是cygwin + notepad++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:50:58.820

使用 Cygwin，您需要：

1.  `configure`使用和构建 wxWidgets ，请参阅wxWidgets 安装中`make`的相应部分。`docs/msw/install.txt`
2.  可以选择使用`make install`.
3.  在编译代码时使用`wx-config --cxxflags --libs`，就像在 Unix 下一样（因为 Cygwin*是*Unix）。

PS 如果您是 C++ 新手，您不太可能发现 Cygwin 是最适合新手的环境。

# bash - 为什么这个条件返回“没有这样的文件或目录”

> ID：13327585
> 
> 赞同：0
> 
> 时间：2012-11-11T00:48:18.503
> 
> 标签：bash, conditional

当 dirs 存在时，我的条件可以正常工作，但如果它们不存在，它似乎会同时执行`then`and`else`语句（这是正确的术语吗？）。

**脚本.sh**

```
#!/bin/bash
if [[ $(find path/to/dir/*[^thisdir] -type d -maxdepth 0) ]]
  then
    find path/to/dir/*[^thisdir] -type d -maxdepth 0 -exec mv {} new/location \;
    echo "Huzzah!"
  else
    echo "hey hey hey"
fi 
```

**提示**
第一次调用，目录就在那里；在第二个中，他们已从第一个电话中移出。

```
$ sh script.sh
Huzzah!
$ sh script.sh
find: path/to/dir/*[^thisdir]: No such file or directory
hey hey hey 
```

我怎样才能解决这个问题？

**尝试过的建议**

```
if [[ -d $(path/to/dir/*[^thisdir]) ]]
  then
    find path/to/dir/*[^thisdir] -type d -maxdepth 0 -exec mv {} statamic-1.3-personal/admin/themes \;
    echo "Huzzah!"
  else
    echo "hey hey hey"
fi 
```

结果

```
$ sh script.sh
script.sh: line 1: path/to/dir/one_of_the_dirs_to_be_moved: is a directory
hey hey hey 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:13:17.040

似乎有一些错误：

首先，模式`path/to/dir/*[^thisdir]`在 bash 中的解释方式与`path/to/dir/*[^dihstr]`表示 *all filename 以`d`, `i`, `h`,`s`或结尾的`t` **方式** `r`相同。

如果您在**此**目录 ( `path/to/dir`) 中搜索某些内容，但不在 on 上`path/to/dir/thisdir`，**而不是在第 n 个 subdir 上**，则可以禁止`find`并编写：

**编辑：**我的样本也有错误：`[ -e $var ]`错了。

```
declare -a files=( path/to/dir/!(thisdir) )
if [ -e $files ] ;then
    mv -t newlocation "${files[@]}"
    echo "Huzzah!"
else
    echo "hey hey hey"
fi 
```

如果您需要`find`在 subirs 中搜索，请给我们样品和/或更多描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:03:45.927

您的错误可能发生在`if [[ $(find path/to/dir/*[^thisdir] -type d -maxdepth 0) ]]`然后它会因为找到错误而转到其他地方。

`find`希望其目录参数存在。根据您要执行的操作，您可能应该考虑

```
$(find path/to/dir/ -name "appropriate name pattern" -type d -maxdepth 1) 
```

另外，我会考虑在`if`. 有关文件条件，请参阅[this](http://tldp.org/LDP/abs/html/fto.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:24:37.980

OP 希望将除*thisdir*之外的所有文件移动到新位置。

using 的解决方案`find`是排除`thisdir`using`find`的功能，而不是通过 using`bash`的 shell 扩展：

```
#!/bin/bash
if [[ $(find path/to/directory/* -maxdepth 0 -type d -not -name 'thisdir') ]]
    then
        find path/to/directory/* -maxdepth 0 -type d -not -name 'thisdir' -exec mv {} new/location \;
        echo "Huzzah!"
    else
        echo "hey hey hey"
fi 
```

这已经过测试，可以在`bash`4.2.39 版和 GNU findutils v4.5.10 下运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T01:09:42.080

按照本文的建议，尝试`#!/bin/bash`在第一行添加 a 以确保执行脚本的是 bash：

[为什么 if 和 else 都被执行？](https://stackoverflow.com/questions/12986561/why-is-both-the-if-and-else-executed)

# android - 来自自定义 ListView 上的按钮的对话框

> ID：13327587
> 
> 赞同：0
> 
> 时间：2012-11-11T00:49:03.760
> 
> 标签：android, android-dialog

我有一个 ListView 并通过适配器动态填充它。我的 ListView 的每一行都有一个按钮，我想在单击它时显示一个 DialogBox。但是我不知道如何将上下文传递给我的 AlertDialog，因此它可以显示在我的活动中。我所拥有的是这样的：

```
....//ADAPTER
public View getView(int position, View view, ViewGroup parent) {
   ....
   pay.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            AlertDialog.Builder ad = new AlertDialog.Builder();  
            ad.setMessage("Are you sure?");  
            ad.setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                public void onClick(DialogInterface dialog, int which) {  
                    dialog.dismiss();                      
                }  
            });  
            AlertDialog dialog = ad.create()();
            dialog.show();
        }
    });
 ....
 } 
```

我想我必须在扩展我的 ListView 的活动中添加某种侦听器，但我不知道该怎么做，而且文档太大，找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:04:12.093

您可以在构造函数中将活动上下文传递给适配器，然后在适配器类中使用它：

```
public class MyAdapter {
    Context context;

    public MyAdapter(Context context, ... ) { 
        this.context = context;
    }
} 
```

# c# - 未知的单声道 db4o 文件

> ID：13327588
> 
> 赞同：3
> 
> 时间：2012-11-11T00:49:05.260
> 
> 标签：c#, mono

全新的 MOno/db4o 和 C#。

简单的 db 程序，我得到一个外部堆栈错误“类型初始化异常”，内部堆栈错误表明文件名未知。我的参考资料中有 db4o.dll 文件，我知道这很愚蠢，但我似乎无法在任何地方找到答案，感谢您的帮助，项目将于周一到期！

```
using System; 
using Db4objects.Db4o;

public class Test {

    static string _file = "store.yap";

    public static void Main (string [] args){

        IObjectContainer db = Db4oFactory.OpenFile (_file);
        db.Close();
} 
```

# windows - 在 git bash 中在 Windows 上运行 .sh 文件会出现错误：无法找到 Digest::SHA 或 Digest::SHA::PurePerl

> ID：13327598
> 
> 赞同：1
> 
> 时间：2012-11-11T00:50:18.927
> 
> 标签：windows, git, bash, scala

祝大家有美好的一天！

在我的本地 PC 上尝试从 github 构建一个 scala 分支并在 git bash 中运行 **pull-binary-libs.sh**时，我收到这样的错误：

**无法找到 Digest::SHA 或 Digest::SHA::PurePerl** 下载 943cd5c8802b2a3a64a010efb86ec19bac142e40/lib/ant/ant-contrib .jar 时遇到问题。当您的互联网连接稳定时，请再次尝试 pull-binary-libs

我无法弄清楚发生了什么。我是 git 的新手，这就是为什么我可能遗漏了一些东西。任何帮助将不胜感激。

PS我试图从它安装cygwin到ryn脚本，但我在安装过程中遇到了不断中断它的问题。所以我改用 git bash 。

更新：我尝试使用СPAN安装模块。我什至成功安装了 PurePerl 和 SH1 作为 CPAN 消息报告。在尝试安装 Digest::SHA 时，我收到一些与 nmake 相关的错误。在尝试再次运行脚本时，我得到了上面提到的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:54:53.597

听起来您缺少 Scala 构建系统所需的 Perl 模块。

请参阅[如何安装 CPAN 模块](http://www.cpan.org/modules/INSTALL.html)。

# c# - 是否有 C++ 的 System.Diagnostics.EventLog 等价物？

> ID：13327602
> 
> 赞同：0
> 
> 时间：2012-11-11T00:51:11.887
> 
> 标签：c#, c++, winapi, event-log

我需要从 C++ 代码更改 Windows 事件日志的参数，即通过 C# 中的[System.Diagnostics.EventLog](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)类可用的参数。我需要阅读并稍后可能修改以下属性：

*   [最大千字节](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.maximumkilobytes.aspx)
*   [溢出动作](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.overflowaction.aspx)
*   [最低保留天数](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.minimumretentiondays.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:59:22.550

您可以将[设置写入注册表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363648%28v=vs.85%29.aspx)

最大千字节->MaxSize

OverflowAction&MinimumRetentionDays->Retention

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:40:36.473

您可以通过在注册表中获取和设置值来做到这一点。微软对此有[非常详细的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363648%28v=vs.85%29.aspx)。你会感兴趣`MaxSize`并`Retention`重视。

# entity-framework - 使用 EF 5.x DbContext Fluent Generator 但属性不是虚拟的

> ID：13327607
> 
> 赞同：0
> 
> 时间：2012-11-11T00:52:04.273
> 
> 标签：entity-framework, templates, poco, entity-framework-5

我使用 EF 5.x DbContext Fluent Generator 来生成我的 POCO 类，但我的属性未编码为虚拟。难道你不必为了跟踪发生吗？为什么模板不使用 virtual 作为属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:10:08.790

因为我们发现对于大多数用户来说，使用快照更改跟踪比使用更改跟踪代理更好。更改跟踪代理在某些情况下占有一席之地，但通常它们会增加复杂性而没有任何实际好处。有关更多信息，请参阅[http://blog.oneunicorn.com/2011/11/24/why-are-the-dbcontext-t4-templates-so-different-from-the-ef4-poco-templates/](http://blog.oneunicorn.com/2011/11/24/why-are-the-dbcontext-t4-templates-so-different-from-the-ef4-poco-templates/)和[http:// /blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)

# java - 为什么 putExtra 需要一个键值对而不仅仅是一个值？

> ID：13327609
> 
> 赞同：2
> 
> 时间：2012-11-11T00:52:49.073
> 
> 标签：java, android, android-intent

我正在阅读一些 Android 开发教程，我只是想出了这个一般性问题：

为什么该`intent.putExtra`方法采用键值对而不仅仅是一个值？

如果我想将字符串传递给 new `Intent`，为什么不直接传递`String`? 钥匙有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:56:53.533

您可以向您的对象添加多个对象，`Intent`以便执行以下操作：

```
intent.putExtra("name", "My Name");
intent.putExtra("age", 30); 
```

如果您想取回一些数据，您需要使用密钥指定哪些数据：

```
intent.getStringExtra("name"); // returns "My Name"
intent.getIntExtra("age");     // returns 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:56:37.463

很简单：keys 允许你传递多个 String（或 Integer、Parcalable 等）并将它们分开。

# c# - C# XmlDocument.Item 属性实际上并不存在？

> ID：13327613
> 
> 赞同：1
> 
> 时间：2012-11-11T00:53:01.680
> 
> 标签：c#, xml

根据 MSDN，有一个与 XmlDocument 类关联的“Item”属性：

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

我似乎无法让它工作。

```
XmlDocument doc = new XmlDocument();
doc.LoadXml("<item><name>wrench</name></item>");

string myItem = doc.Item["item/name"].InnerText; 
```

...例如无法编译。如果它确实存在，使用此属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:58:43.653

C# 中的[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)公开为调用`Item`其他语言的参数化属性。

在 C# 中，只需使用索引器语法：

```
var result = someObject["something"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:06:12.370

另一种方法，使用**LINQtoXML**

假设您的 XML 将始终处于该结构中。

```
string thatXml="<item><name>wrench</name></item>";
XElement elm =XElement.Parse(thatXml); 
string thatValue = elm.Element("name").Value; 
```

# python - 如何确保输入键没有被输入密码

> ID：13327615
> 
> 赞同：2
> 
> 时间：2012-11-11T00:53:23.287
> 
> 标签：python, python-2.7

我遇到以下问题，当 python 脚本运行时，用户一直在命令窗口上按“回车键”...以下是在命令窗口上运行的内容，但用户一直按回车键，最终输入密码和脚本失败，我该如何防止这种情况？

```
 Parsing the XML

 Building the build combo table

  **Password: //asks for password but user had multiple enter key presses above which is taken as passoword and fails** 
```

Python代码：-

```
url='http://wiki.com/'+wikiName+'/w/index.php?title='+hId +'_'+rId+'&action=edit'
cookiehand = urllib2.HTTPCookieProcessor()
password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
password_mgr.add_password(user=getpass.getuser(),passwd=getpass.getpass(),uri=authhost,realm=realm)
auth_handler = urllib2.HTTPBasicAuthHandler(password_mgr)
opener = urllib2.build_opener(auth_handler, cookiehand)
urllib2.install_opener(opener)
# make the request
req = urllib2.Request(url=url)
try:
    f = urllib2.urlopen(req)
    txt = f.read()
    f.close()
except urllib2.HTTPError, e:
    txt = ''
    print 'An error occured connecting to the wiki. No wiki page will be generated.'//eventually gets this error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:02:18.767

我认为您应该在阅读密码之前尝试刷新用户输入。

为了做到这一点，看看[这个其他帖子](https://stackoverflow.com/questions/2520893/how-to-flush-the-input-stream-in-python)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:12:51.067

Kosklain 的回答应该让您走上正轨。但是，通过您提出问题的方式，您似乎不知道导致这种行为的过程，所以这里有一些关于正在发生的事情的更多见解：

出现这种情况是因为系统会缓冲（保存在内存中）您的整个输入流，即使您实际上并未请求输入。当（假设）您这样做`raw_input()`时，它所做的只是读取 sys.stdin 直到找到换行符。显然，如果在您最近引入的输入行之前有一个换行符，它就会停在那里。

因此，您的问题的解决方案如下：

```
while there_is_a_new_line():
    line= raw_input() 
```

然而，there_is_a_new_line() 函数有点复杂。现有的解决方案涉及更改终端的属性，并且不是跨平台的。有关详细信息，请参阅 kosklain 的链接。

# assembly - LC3模拟器继续结束？

> ID：13327624
> 
> 赞同：1
> 
> 时间：2012-11-11T00:55:04.607
> 
> 标签：assembly, lc3

我正在使用 McGraw-Hill 的 LC3 模拟器来处理一些 LC3 汇编代码。出于某种原因，无论我如何执行我的代码，它都会继续通过我的 .END 调用并最终更改我的寄存器。我错过了什么吗？

最新代码：

```
.ORIG x3000

BR MAIN

;;value to square
SquareVal .FILL x04

MAIN   
    LD R1, SquareVal 
    AND R0, R0, #0
    ADD R0, R0, R1  
    AND R3, R3, #0
    LD R3, SquareVal
    BR SQUARE_CONT

SQUARE_VAL  
    ADD R0, R0, R1
    BR SQUARE_CONT  

SQUARE_CONT 
    ADD R3, R3, #-1
    BRp SQUARE_VAL
    HALT

.END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:43:28.887

首先确保您的模拟器已加载操作系统代码。`HALT`是一个系统陷阱，所以它需要操作系统。此外，这也意味着操作系统处理程序将更改您的寄存器。如果你不能忍受，你可以在用户模式下做一个无限循环（`STOP: BR STOP`）

`.END`仅表示源文件的结束，它对执行没有影响。

# javascript - jQuery 如何在所有浏览器中工作？

> ID：13327625
> 
> 赞同：-1
> 
> 时间：2012-11-11T00:55:05.073
> 
> 标签：javascript, jquery

我知道 jQuery 是因为 JavaScript 不能在所有浏览器中工作。然而，jQuery 是一个用 JavaScript 构建的库，那么它怎么能在所有浏览器中工作呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:56:39.533

因为 jQuery 是用普通开发人员在没有 jQuery 时被迫使用的相同技巧编写的。它旨在考虑浏览器之间的所有差异并尽可能标准化它们的行为。它没有什么特别或神奇的地方——只是做你本来会做的事情需要付出很多努力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T00:56:58.440

jQuery 只能在浏览器支持 JavaScript 时工作。

jQuery 的目的是不同的浏览器有时会提供不同的 API（例如用于 AJAX/XHR 的东西），jQuery 将其规范化为单个标准 API。这就是 jQuery 的真正好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T00:56:22.967

Javascript 仅适用于具有 javascript 的浏览器。jQuery 只是一个建立在它之上的库，用于提供扩展功能。

# ruby - Ruby 方法将哈希值返回为 {}

> ID：13327628
> 
> 赞同：0
> 
> 时间：2012-11-11T00:55:27.997
> 
> 标签：ruby, hash, return, instantiation

方法中的变量填充`value`在第 014 行。这些更改由第015 行的语句反映，但第016 行认为哈希仍然为空（向右滚动查看返回值之后）。`initialize``LocationList``print``return``=>`

```
def random_point
  x = rand * 2.0 - 1.0
  y = rand * 2.0 - 1.0
  until x**2 + y**2 < 1.0
    x = rand * 2.0 - 1.0
    y = rand * 2.0 - 1.0
  end
  return [x, y]
end

class LocationList < Hash
  def initialize(node_list)
    value = {}
    node_list.each {|node| value[node] = random_point }
    print value
    return value
  end
end

z = ["moo", "goo", "gai", "pan"]

LocationList.new(z)
#=> {"moo"=>[0.17733298257484997, 0.39221824315332987], "goo"=>[-0.907202436634851, 0.3589265999520428], "gai"=>[0.3910479677151635, 0.5624531973759821], "pan"=>[-0.37544369339427974, -0.7603500269538608]}=> {} 
```

在全局函数中执行基本相同的操作会产生预期的返回值：

```
def foo(node_list)
  value = {}
  node_list.each {|node| value[node] = random_point }
  return value
end

foo(z)
#=> {"moo"=>[-0.33410735869573926, -0.4087709899603238], "goo"=>[0.6093966465651919, 0.6349767372996336], "gai"=>[0.718925625951371, -0.6726652512124924], "pan"=>[0.08604969147566277, -0.518636160280254]} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T01:11:28.960

您正在创建一个`value`在`initialize`方法中调用的新 Hash，而不是初始化`self`. 说明这个内联：

```
class LocationList < Hash
  def initialize(node_list)
    # self is already a LocationList, which is a Hash

    value={}
    # value is now a new Hash

    node_list.each {|node| value[node]=random_point}
    # value now has keys set

    return value
    # value is now discarded
    # LocationList.new returns the constructed object; it does not return
    # the result of LocationList#initialize
  end
end 
```

试试这个：

```
class LocationList < Hash
  def initialize(node_list)
    node_list.each {|node| self[node]=random_point}
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T01:11:40.807

请注意，您实际上并不是在调用`initialize`，而是在调用[`new`](http://ruby-doc.org/core-1.9.3/Class.html#method-i-new)，然后调用`initialize`。`new`丢弃 的返回值`initialize`，而总是返回刚刚创建的对象。[这一点在实施中`Class#new`](https://github.com/ruby/ruby/blob/v1_9_3_327/object.c#L1631)可以看得很清楚。

由于您已经在所需的哈希中，因此不要创建另一个哈希 ( `value`)，只需使用您所在的哈希 ( ) 即可`self`！这将您减少`initialize`到：

```
def initialize(node_list)
  node_list.each { |node| self[node] = random_point }
end 
```

# python - 在python中锁定终端大小？

> ID：13327634
> 
> 赞同：3
> 
> 时间：2012-11-11T00:56:30.007
> 
> 标签：python, terminal, locking, size, cmd

我想知道是否有任何 python 代码可以用来锁定我的 CMD 窗口的大小？我正在制作一个小型文字冒险游戏，并希望 t 具有特定的大小。

如果有帮助，我使用的是 Windows 7，但不介意 mac 和 linux 兼容指令。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T05:48:22.587

您可以使用[pyWinGUI](http://pywingui.googlecode.com)模拟带有 comctl.Edit 控件的文本终端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:07:28.480

我不认为这是可能的。如果你想直接控制一个 gui，你应该使用一个 gui 包，例如 tkinter

```
from Tkinter import *
window = Tk()
window.minsize(minw, minh)
window.maxsize(maxw, maxh) 
```

向其中添加一个文本块并将其视为 cmd 窗口。您可以在 Tkinter[文档上阅读更多相关信息](http://www.tkdocs.com/)

# android - 有没有办法增加动作栏下拉列表的宽度

> ID：13327637
> 
> 赞同：3
> 
> 时间：2012-11-11T00:56:39.720
> 
> 标签：android, layout, spinner, android-actionbar

我已经运行了各种场景，但我一直无法找到解决方案。

当设备的方向切换到横向时会出现问题。标签变成了一个微调器。微调器没有使用操作栏中的可用空间，它开始省略项目，并且在视觉上它看起来很荒谬，如您所见：

***新用户不能发布图片，用户最多只能发布两个超链接。你应该事先通知用户***

[http://i.imgur.com/1gW8F.png](http://i.imgur.com/1gW8F.png)

切换到选项卡微调器上的另一个项目：

i.imgur.com/I8PQ5.png

我只能为操作栏下拉列表找到一个内置样式项： android: **actionDropDownStyle**。

但它似乎只控制是否显示下拉或对话框 developer.android.com/reference/android/widget/Spinner.html#attr_android:spinnerMode 即使覆盖样式并添加 layout_width 也没有区别。

也没有像微调器**android:spinnerItemStyle**中那样的下拉项目样式。但是这些项目的样式基于 **android:actionBarTabStyle**和**android:actionBarTabTextStyle**，但是覆盖这些样式并添加 layout_width 没有任何区别。

但是在将选项卡的数量从 3 个减少到 2 个之后，宽度增加了。

[http://i.imgur.com/26iZN.png](http://i.imgur.com/26iZN.png)

但是单击第二个选项卡，使操作栏切换回微调器，但这一次使用了更多的间隔，并且完成没有省略

i.imgur.com/3949m.png

就好像微调器的宽度是由选项卡的数量决定的。这似乎做得不好，这可能是因为他们正在测量是否有空间显示标签栏。当没有空间时，他们不会重新计算可用的宽度，而只是使用他们之前计算的单个标签宽度。

这是在 ICS 上完成的，并且关闭了标题的显示，希望为操作栏微调器增加更多可用宽度。

# php - mailto php字符串中的＆符正在破坏字符串的其余部分

> ID：13327641
> 
> 赞同：0
> 
> 时间：2012-11-11T00:56:47.740
> 
> 标签：php, mailto

我正在`mailto`使用以下代码创建动态链接。

```
<?php echo urlencode(str_replace(" ", "%20",  the_title() )); ?> 
```

问题是当标题包含一个 时`ampersand`，它会`mailto`用空格分隔字符串。

```
the_title(); 
```

输出：**菜单鲑鱼蟹和金枪鱼**

即使我正在查找并替换空格，但空格似乎会破坏字符串。当我查看源代码时，这就是我得到的。

```
mailto:?Subject=Menu%20Salmon%20Crab &#038; Tuna 
```

相同的代码适用于**菜单鲑鱼蟹**

谁能帮我理解为什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T18:38:33.060

中的空格应该没有任何问题`mailto`，请尝试：

```
<?php
    echo urlencode('my string with & sign');
?> 
```

# sql - 即使一个条件为假也能得到一个值

> ID：13327646
> 
> 赞同：0
> 
> 时间：2012-11-11T00:57:18.710
> 
> 标签：sql, where, exists

这是我的实际查询：

```
SELECT temp.id_company AS id_company
     , temp.code_product AS id_product
     , temp.date_product  AS date_p
FROM (
   SELECT *
   FROM companies 
   INNER JOIN products
      ON products.id_company_product = companies.id_company
   WHERE module_key_company = "daL/RqzZcfqc."
   ) AS temp
WHERE temp.code_product = "app_12" 
```

首先我得到`companies.id_company where companies.module_key_company`匹配“dal.....”然后我检查我是否得到匹配`products.code_product = "app_12"`并且`products.id_company = companies.id_company`我在第一次测试后得到。

如果这两个条件都成立，我就会得到我想要的。但如果没有匹配的`products.code_product`.

`module_key`即使错误，我也无法找到仅通过测试才能获得 id_company的`code_product`方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:22:10.180

试试这个：

```
SELECT companies.id_company
     , coalese(products.code_product,'NONE') as id_product
     , products.date_product as date_p
FROM companies 
LEFT OUTER JOIN products
   ON     products.id_company_product = companies.id_company
      and products.code_product = 'app_12'

WHERE companies.module_key_company = 'daL/RqzZcfqc.' 
```

该`id_product`列将包含文本**NONE** ，对于没有任何匹配产品的公司，该`date_p`列将为**空。**此外，您应该使用单引号来提供字符常量，而不是双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:20:20.137

很难说你的表结构是什么，除非你用表名作为列名的后缀。所以这就是我的猜测。试试这个：

```
SELECT C.id_company, P.code_product, P.date_product
  FROM Companies AS C
    LEFT OUTER JOIN Products AS P ON P.id_company_product = C.id_company
  WHERE module_key_company = 'daL/RqzZcfqc.'
    AND (P.code_product = 'app_12' OR P.code_product is NULL) 
```

最好的，乔

# facebook - facebook facepile connect 显示两条不同的消息

> ID：13327650
> 
> 赞同：0
> 
> 时间：2012-11-11T00:57:33.853
> 
> 标签：facebook, api, facepile

我已经通过 XFBML 在两个页面上实现了 facebook facepile。一个是主页，另一个是注册页面。

两个页面上都有相同的代码。（使用包含函数，所以我 100% 使用相同的代码）即使 XFBML 代码也是相同的（使用包含函数）

如果我打开主页，它会显示我

> 成为您的好友中第一个点赞的人。

如果我打开注册页面，它会显示我

> Basit 正在使用 Stackoverflow

有谁知道它为什么这样做？

我一直在尝试任何方法来修复它，但它不起作用.. 也无法在网上找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:21:07.140

不要`data-href="url_of_the_page"`用于`<div class="fb-facepile" data-max-rows="6" data-width="292"></div>`

# jquery - SublimeVideo 无法在 IE8 中加载

> ID：13327654
> 
> 赞同：1
> 
> 时间：2012-11-11T00:58:02.017
> 
> 标签：jquery, html, flash, video

只是一个简单的问题，希望可以快速解决。

我使用 jQuery 和 SublimeVideo (http://baeckerei-glasenapp.de/unternehmen/#videos) 在客户的网站上实现了一个视频切换器（两个视频之间的幻灯片）

出于某种原因，SublimeVideo 似乎不想加载（在 Flash 模式下，呃）。我的意思是，它会尝试加载视频，但我没有收到错误消息。

我是否需要某种 polyfill，或者视频编码是否有问题？还是只是我的代码？

```
$(document).ready(function() {
    sublimevideo.ready(function() {
        $(".videoSelector li a").click(function(ev) {
            sublimevideo.stop();
            $(".videoSelector li a").removeClass('active');
            $(this).addClass('active');
            var selectedVideo = $(this).attr('href');
            var index = $(".videolist li").index($(selectedVideo));
            if (index != -1) {
                var newLeft = '-' + parseInt($(selectedVideo).width() * index) + 'px';
                $(".videolist").animate({
                    left: newLeft
                }, 300);
            }
            ev.preventDefault();
        });
        $(".videoSelector li:first-child a").click();
    });
}); 
```

# python - Python Tkinter：尝试获取小部件大小

> ID：13327659
> 
> 赞同：13
> 
> 时间：2012-11-11T00:59:05.253
> 
> 标签：python, python-3.x, geometry, size, tkinter

我试图通过使用该`winfo_geometry()`函数来找到我的窗口的大小，但它最终返回`1x1+0+0` 我也尝试过`winfo_height, winfo_width`，但我不断得到`1`

### 代码

```
from tkinter import *

root=Tk()

root.geometry('400x600')

print (root.winfo_width())
print (root.winfo_height())
print (root.winfo_geometry())

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-11T01:08:04.813

您正在尝试在渲染窗口之前获取尺寸。

`root.update()`在 s 之前添加 a`print`并显示正确的尺寸。

```
from Tkinter import *

root=Tk()

root.geometry('400x600')

root.update()

print (root.winfo_width())
print (root.winfo_height())
print (root.winfo_geometry())

root.mainloop() 
```

# asp.net - Git 部署成功但没有变化

> ID：13327660
> 
> 赞同：0
> 
> 时间：2012-11-11T00:59:13.767
> 
> 标签：asp.net, git, azure

我发现自己处于这里最奇怪的境地。我已经通过 Git 部署到 Azure 一段时间了，没有任何问题。但是，我只是将一组相当大的更改推送到 Azure 没有错误，但没有任何改变......

试图再次推送得到“一切都是最新的”

因此，我登录到 Azure 管理控制台并查看了部署，果然没有推送。

建议？顺便说一句，我不是 Mac，我知道从 Mac 推送到 Azure 存在问题。

更新：通过删除并重新部署 Azure 实例解决了该问题。对开发人员来说还可以，对产品来说不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:01:56.803

你推到正确的遥控器了吗？听起来您有两个遥控器（您可以使用 进行检查`git remote -v`）并且您正在推动非天蓝色的遥控器。

另一件事可能是分支，您是否在不是的分支上`master`，但 azure 期望部署发生在`master`分支上？

根据您的评论：部署脚本可能尚未运行。您可以创建一个虚拟提交或强制推送`git push -f`以使远程存储库再次接收内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T18:05:40.680

我刚刚遇到了同样的问题，所以我会在这个老问题中发布我的解决方案，以防它对任何人有帮助。

我正在发布到我的 GitHub 存储库，但 Azure 突然不再将其用于部署。

我进入 GitHub 上的存储库，然后进入设置 -> Webhook 和服务，并注意到 Azure Webhook 有一个红色的小图标，表示存在问题。点击它显示 GitHub 收到了来自 Azure 的 401 Unauthorized 响应。

然后我记得 Azure 大约在一周前给我发了一封电子邮件，说我的网站将被移动到一个新的规模单位，我的发布配置文件将会改变。当时我并没有考虑太多，因为我没有使用发布配置文件进行部署，但看起来它也改变了我的部署触发 URL。

我使用新的部署 URL（来自我的 Azure 网站的配置选项卡）更新了 GitHub Webhook，一切都恢复正常了。

# android - android web 浏览器使用什么来播放音频流？MediaPlayer 还是别的什么？

> ID：13327669
> 
> 赞同：5
> 
> 时间：2012-11-11T01:01:41.747
> 
> 标签：android, android-mediaplayer

我有来自特定站点 (m.aveamuzik.com) 的 rtsp 音频流，可在浏览器中播放。当我尝试使用`MediaPlayer`类播放相同的流时，我得到`MEDIA_ERROR_UNKNOWN`（带有 extra= `-2147483648`）。该错误没有得到很好的记录，但稍微谷歌搜索表明它很可能是因为不受支持的媒体格式。

我的问题是，如果`MediaPlayer`类不支持某些格式，那么内置浏览器如何播放呢？另外，如何在我的代码中使用浏览器使用的相同机制，而不是`MediaPlayer`类？

**编辑 1：** @乔

我尝试了以下代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(streamURL));
startActivity(intent); 
```

*MX Player*和*BSPlayer*显示为打开文件的选项，但与`AudioPreviewActivity`. 实际上，这很合理，因为我的 URL 是`rtsp`，但意图过滤器`AudioPreviewActivity`仅适用于`http`和`file`URI`content`的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:56:48.387

**事实**

浏览器设置了额外的功能，可以从页面中剥离视频源并在大多数时间在本机播放器中启动它。此功能未内置在 WebView 中，并且本机播放器非常挑剔需要将什么作为 URI 传递给它才能播放它。

自 Gingerbread 在默认的 android 浏览器中运行以来，它就可以工作。

**可能的解释**

您可能不会`MediaPlayer`像 android 浏览器那样使用它。发布一些代码以提供进一步的帮助。

**进一步帮助**

*   在`MediaPlayer`4.0 之前有很多错误（修复了很多 RTSP 错误）。
*   W3C 描述的 Web 音频 API：[链接](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)
*   以下是 Android 支持的所有媒体格式和协议的详细列表：[链接](http://developer.android.com/guide/appendix/media-formats.html)
*   测试页面：[链接](http://textopia.org/androidsoundformats.html)
*   这篇完整的博文还帮助我了解了 Android 的媒体流：[链接](http://justdevelopment.blogspot.fr/2009/10/video-streaming-with-android-phone.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T22:44:30.713

如果它在浏览器中播放时看起来像[另一个问题的屏幕截图](https://stackoverflow.com/q/11602523/1023092)，那么它应该是音乐应用程序中的[AudioPreview](http://omapzoom.org/?p=platform/packages/apps/Music.git;a=blob;f=src/com/android/music/AudioPreview.java;hb=HEAD) Activity。

您应该能够通过简单地调用与[清单](http://omapzoom.org/?p=platform/packages/apps/Music.git;a=blob;f=AndroidManifest.xml;hb=HEAD#l91)`startActivity()`中的一个 IntentFilter 匹配的 Intent来启动它。

# objective-c - 消除 UITextChecker 中的缩写

> ID：13327670
> 
> 赞同：1
> 
> 时间：2012-11-11T01:01:52.127
> 
> 标签：objective-c, ios, text

我正在尝试创建一个生成随机单词的应用程序，但是我希望在创建缩写词时忽略它们。为此，我随机生成一个字母数组，（用与拼字游戏相同的权重对它们进行加权；P）然后使用 UITextChecker 运行数组检查正确的单词，如下所示：

```
for (int i = 0; i < 14; i++) {
        [word setString:@""];
        for (int j = i; j < 14 ;j++) {
            [word appendString:[letterArray objectAtIndex:j]];

            NSRange misspelledWord = [checkText rangeOfMisspelledWordInString:word range:NSMakeRange(0, word.length) startingAt:0 wrap:NO language:@"en_GB"];

            if (misspelledWord.location == NSNotFound && word.length > 2) {
                NSRange misspelledWordSecondRun = [checkText rangeOfMisspelledWordInString:word range:NSMakeRange(0, word.length) startingAt:0 wrap:NO language:@"en_US"];
                if (misspelledWordSecondRun.location == NSNotFound) {

                     NSLog(@"You generated the word: %@",word);
                }
            }
            else {

            }
        }
    } 
```

唯一的问题是，这让大量的缩写和首字母缩略词通过......有什么办法可以减少这个数字吗？必须有一种语言可以发送 checkText 这是英语词典的免费缩写版本吗？或者以某种方式告诉它将首字母缩略词标记为拼写错误的单词？如您所见，我试图通过使用我们英语而不是英国英语再次过滤单词来减少数量，但这并没有减少允许通过的首字母缩略词的数量：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:06:18.137

使用我不想包含的单词数组来实现这一点，每次生成一个单词时，它都会检查它是否在这个数组中。如果是，则不会将其注册为单词，如果不是，则不会。

# php - PHP Imagick - “-quantize transparent”等效

> ID：13327675
> 
> 赞同：2
> 
> 时间：2012-11-11T01:02:29.427
> 
> 标签：php, imagemagick, imagick

是否有 PHP Imagick 等价物`-quantize transparent`？？？

[-quantize transparent 用法示例](http://www.imagemagick.org/Usage/quantize/#color_trans)注意：在页面内搜索“-quantize transparent”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:02:41.377

PHP 的 Imagick 扩展支持[Quantize ；](http://www.php.net/manual/en/imagick.quantizeimage.php)但是，编写的文档很少。幸运的是，“[颜色量化和透明度](http://www.imagemagick.org/Usage/quantize/#color_trans)”中的示例很简单。

```
convert alpha_gradient.png -quantize transparent \
    +dither  -colors 15   alpha_colors_15qt.png 
```

从这个例子中，我们可以确定所需的 5 个参数`Imagick::quantizeImage()`。

*   颜色数 = 15 ( *-colors 15* )
*   色彩空间 = 透明
*   树深度 = 0（*未定义*）
*   抖动 = 假 ( *+dither* )
*   测量错误 = False

```
<?php

$wand = new Imagick("alpha_gradient.png");
$wand->quantizeImage(15,Imagick::COLORSPACE_TRANSPARENT,0,false,false);
$wand->writeImage("alpha_colors_15qt.png"); 
```

# php - 我想在前往另一个页面时更改 cookie 值？

> ID：13327676
> 
> 赞同：0
> 
> 时间：2012-11-11T01:02:35.413
> 
> 标签：php, redirect, cookies, setcookie

在PHP中，我将设置cookie并给它一个变量值，当用户输入他们的名字时，他们将被带到另一个页面但是当他们到达那个新页面时，我需要将该cookie的值更改为他们输入的名称，有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:05:31.277

您可以简单地将名称传递给`setcookie`，这将覆盖之前存储的任何值。

```
setcookie("name", $name, time() + 60 * 60 * 24); // expires in a day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:22:07.027

例如在第一页（index.php）

```
<?php
//check if the form is submitted
if($_POST['update_name']){
    if(!empty($_POST['name'])){
        //name filed is filled

        //define cookie expire time
        $expire = time()+60*60*24*30; #cookie will expire after a month
        //set the cookie
        setcookie("name", $_POST['name'], $expire);
        //take the user to another page
        header("location: page_two.php");
    }else{
    //form was submitted with empty name field
    //show error message
    echo "Name is required";
    }
}
?>
<form method="POST" action="<?php echo $_SERVER['PHP_SELF'];?>">
<input type="text" name="name" />
<input type="submit" name="update_name" value="Submit" />
</form> 
```

在 page_two.php

```
<?php
echo $_COOKIE["name"];
?> 
```

# shell - 当有管道时，如何用 sudo 处理权限

> ID：13327677
> 
> 赞同：3
> 
> 时间：2012-11-11T01:03:06.520
> 
> 标签：shell, permissions, pipe

如果命令是管道，如何处理权限问题 sudo 以下命令

```
sudo -u liy echo "update moz_cookies set value='f1=40000000&f3=40000&fv=11.2.202' where name='PREF' and host='.youtube.com';"|sqlite3 /user/liy/home/.mozilla/firefox/dd1pkryp.default/cookies.sqlite 
```

导致问题：

```
cannot open directory /user/liy/home/.mozilla/firefox/: Permission denied 
```

如何处理？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:06:50.080

将`sudo`命令放在进行修改的命令上：

```
echo 'some SQL' | sudo sqlite3 /some/database.db 
```

你甚至可以考虑使用heredoc：

```
sudo sqlite3 /some/database.db <<ENDOFSQL
    -- SQL here; you can even use multiple lines!
ENDOFSQL 
```

# actionscript-3 - 1061：通过静态类型 Class 的引用调用可能未定义的方法 hitTestPoint

> ID：13327681
> 
> 赞同：0
> 
> 时间：2012-11-11T01:03:40.033
> 
> 标签：actionscript-3, flash

我试图在我的游戏中进行碰撞检测，而本教程使用的是 hitTestPoint，如果有人可以提供帮助，这是代码的一部分。地面只是一个块电影剪辑，播放器是，播放器：

```
stage.addEventListener(Event.ENTER_FRAME, loop);

function loop(e:Event):void
{
    if (ground.hitTestPoint(borat.x + leftBumpPoint.x,borat.y + leftBumpPoint.y,true))
    {
        trace("leftBumping");
        leftBumping = true;
    }
    else
    {
        leftBumping = false;
    }

    if (ground.hitTestPoint(borat.x + rightBumpPoint.x,borat.y + rightBumpPoint.y,true))
    {
        trace("rightBumping");
        rightBumping = true;
    }
    else
    {
        rightBumping = false;
    }

    if (ground.hitTestPoint(borat.x + upBumpPoint.x,borat.y + upBumpPoint.y,true))
    {
        trace("upBumping");
        upBumping = true;
    }
    else
    {
        upBumping = false;
    }

    if (ground.hitTestPoint(borat.x + downBumpPoint.x,borat.y + downBumpPoint.y,true))
    {
        trace("downBumping");
        downBumping = true;
    }
    else
    {
        downBumping = false;
    }

} 
```

我不断收到这些错误：

```
Scene 1, Layer 'actions', Frame 1, Line 37  1061: Call to a possibly undefined method hitTestPoint through a reference with static type Class.

Scene 1, Layer 'actions', Frame 1, Line 47  1061: Call to a possibly undefined method hitTestPoint through a reference with static type Class.

Scene 1, Layer 'actions', Frame 1, Line 57  1061: Call to a possibly undefined method hitTestPoint through a reference with static type Class.

Scene 1, Layer 'actions', Frame 1, Line 67  1061: Call to a possibly undefined method hitTestPoint through a reference with static type Class. 
```

感谢任何花时间阅读本文的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:22:23.343

什么是地面类型？它必须是 MovieClip 的实例才能工作，您不能在类上调用该方法。

```
//this will work
var ground:MovieClip = new SomeAsset();
ground.hitTestPoint();

//this won't
SomeAsset.hitTestPoint(); 
```

# image - 结合 Wordpress 插件功能

> ID：13327687
> 
> 赞同：1
> 
> 时间：2012-11-11T01:04:57.493
> 
> 标签：image, wordpress

我正在尝试在我的图片说明中添加一些额外的信息。（参见[我网站上的](http://bitsybride.com/test/)示例）我找到了一个插件，它为标题添加了一个额外的字段，并试图对其进行扩充以满足我的需要。

该插件是 Image Credit，它在图片上传器中添加了 2 行 - 一行用于源文本，另一行用于链接。我有另一个名为[Media Tags](http://www.codehooligans.com/projects/wordpress/media-tags/)的插件，可让您将标签应用于图像。在下面的函数中，我使用 $mt_terms 添加了媒体标签。

```
add_filter( 'img_caption_shortcode', 'wp_image_credit_img_caption_shortcode', 10, 3 );
function wp_image_credit_img_caption_shortcode($attr, $content, $html){
global $post;
$content = (object)$content;
$credit = wp_image_credit_get_credit_link(substr($content->id, strpos($content->id, "_") + 1));
$mt_terms = the_mediatags($post->id);

$result = <<<END
<div id="{$content->id}" class="wp-caption {$content->align}" style="width: {$content->width}px">{$html}</span><p class="wp-caption-text"> {$content->caption} <div style="float: right; width: 50%;"><p class="wp-caption-text"></br>$credit</p></div><div style="float: left; width: 50%;"><p style="font-size:12px"></br> tags: $mt_terms </style></p></div></div>
 END;
return $result;
 } 
```

有什么建议吗？

@Filipe 我会走更多这条路：

```
 add_filter( 'img_caption_shortcode', 'wp_image_credit_img_caption_shortcode', 10, 3 );
 function wp_image_credit_img_caption_shortcode($attr, $content, $html){
global $post;
$content = (object)$content;
$credit = wp_image_credit_get_credit_link(substr($content->id, strpos($content->id, "_") + 1));

$mt_terms = 'Tags: ';
$tags = (array)wp_get_object_terms($post->ID, MEDIA_TAGS_TAXONOMY);
if ($tags) {
    foreach($tags as $tag_item)
        $mt_terms = $mt_terms . ',' . $tag_item->name;
        }
else
    $mt_terms = "postID: $post->ID";

$result = <<<END
<div id="{$content->id}" class="wp-caption {$content->align}" style="width:    {$content->width}px">{$html}</span><p class="wp-caption-text"> {$content->caption} <div   style="float: right; width: 50%;"><p class="wp-caption-text"></br>$credit</p></div><div style="float: left; width: 50%;"><p style="font-size:12px"></br> tags: coming soon! $mt_terms </style></p></div></div>
 END;
return $result;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:49:41.807

不确定我是否理解您想要的内容，但向帖子添加信息的最佳方法是使用**自定义字段**，稍后可以使用类似于此的代码阅读：

```
get_post_meta( $post->ID, 'MyCustomField1', TRUE ); 
```

希望这有帮助。

# java - 将 ID 与对象分开

> ID：13327688
> 
> 赞同：1
> 
> 时间：2012-11-11T01:04:59.997
> 
> 标签：java, oop, orm, model

我有一个使用主键存储在数据库中的 Java 对象*用户。*例如：

```
id | login | name | surname
---------------------------
0  | admin | Bob  | Marley
1  | ..... | .... | ...... 
```

我的应用程序的 Java 客户端可以调用 、 和其他 API`addUser`操作`getUserById`。`editUser`每个这样的请求都组成一个 Java 对象，例如：

```
class EditRequest {  
  User newUserProfile; 
} 
```

我在为这些操作定义模型时遇到了问题：我应该对所有操作使用一个`User`具有四个字段`id`、`log`、`name`和的对象，`surname`还是应该将它们分隔为`User`and `UserValue`，其中第二个对象包含除 ID 之外的所有字段。第二个对象不包含 ID 的原因是它旨在用于`addUser`除了 ID 之外的所有字段都从客户端传递的操作，因为 ID 是为服务器端的新用户生成的。这种分离将允许我`UserValue`在客户端上构造一个对象，而不是例如创建一个`User`带有空 ID 字段。第三种解决方法是始终将 User 和 ID 分开，并在必要时使用 Map 将它们绑定在一起。什么是最好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:40:57.190

“标准”方法是每个表（实体）只有一个对象。如果您查看[Java Persistence API](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)方法是如何创建一个对象的。对于尚未持久化到数据库的对象，主键字段为空。

具有表示同一实体的不同对象会造成代码混乱和重复。每次您必须添加一个新字段时，您必须在 2 个位置添加，并且可能会出现不匹配或忘记更新其他位置的风险。

我会认真考虑使用现成的 ORM 包来实现 JPA（例如 Hibernate 或 EclipseLink），而不是自己做事。您只需花费很长时间，并且只实现这些框架提供的开箱即用功能的一小部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:13:04.850

每种方法都有优点和缺点。就个人而言，我会将 id 保留在对象中，因为这对对象总是有用的。如果您查看几乎任何 ORM（例如 hibernate），您几乎总是会看到对象被创建为带有 id 字段的简单 POJO，其中 null 用于尚未分配 id 的新对象。虽然这可能不是完美的解决方案，但我会选择它，因为我相信它的优点最多，缺点最少。

# c# - XMLTextReader 缺少第一个元素

> ID：13327691
> 
> 赞同：1
> 
> 时间：2012-11-11T01:05:40.433
> 
> 标签：c#, xml-parsing

我正在为我的一个客户编写一种配置存储方法，他们要求它采用 XML 格式。除了一个问题之外，我已经设法让它发挥作用；缺少第一个元素。我的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<config>
    <username>test</username> 
    <password>pass</password>
    <autologin>true</autologin>
</config> 
```

我的解析命令是：

```
 void parseConfigFile()
    {
        while (configstr.Read())
        {
            if (configstr.IsStartElement())
            {
                config.Add(configstr.Name,configstr.ReadString());
            }
        }
    } 
```

结果（configstr）是：

```
autologin = true
config = 
password = pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:36:54.200

```
var document = XDocument.Load("file.xml");
var config = document.Root;

var userName = (string)config.Element("username");
var password = (string)config.Element("password");
var autologin = (bool)config.Element("autologin"); 
```

# java - Java - 对数组进行两次排序？

> ID：13327699
> 
> 赞同：0
> 
> 时间：2012-11-11T01:06:24.817
> 
> 标签：java, multidimensional-array

我正在开发一个显示邮政编码和门牌号码的程序。我需要在第一列中按升序对邮政编码进行排序，然后从左到右对门牌号进行排序，使它们保持相同的邮政编码。例如：

看起来像这样：

> > 90153 | 9810 6037 8761 1126 9792 4070
> > 
> > 90361 | 2274 6800 2196 3158 9614 9086

我希望它看起来像这样：

> > 90153 | 1126 4070 6037 8761 9792 9810
> > 
> > 90361 | 2186 2274 3158 6800 9086 9614

我使用以下代码对邮政编码进行排序，但如何对门牌号进行排序？我是否需要添加一个循环来对这段代码的数字进行排序？如果有，在哪里？很抱歉，我无法正确缩进代码。

```
void DoubleArraySort()
{
    int k,m,Hide;

    boolean DidISwap;

    DidISwap = true;

    while (DidISwap)
    {
        DidISwap = false;
        for ( k = 0; k < Row - 1; k++)
        {
            if ( Numbers[k][0] > Numbers[k+1][0] )
            {
                for ( m = 0; m < Col; m++)
                {
                    Hide = Numbers[k ][m];
                    Numbers[k ][m] = Numbers[k+1][m];
                    Numbers[k+1][m] = Hide ;
                    DidISwap = true;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:19:08.000

使用这样的对象`ZipCode`：

```
public class ZipCode{

    private String zipcode;
    private ArrayList<String> adds

    public ZipCode(String zip){
        zipcode = zip;
        adds = new ArrayList<String>();
    }

    public void addAddress(String address){
        adds.add(address);
        Collections.sort(adds);
    }

} 
```

`ZipCodes`保持对它们进行排序的数组：

```
ZipCode[] zips = . . . 
  .
  .
  .
Arrays.sort(zips); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:06:12.073

我/我们可以尝试告诉您如何修复（某种程度）您的代码以执行您想要的操作，但这会适得其反。相反，我将解释做这些事情的“Java 方式”，它（如果你遵循它）将使你更有效率，并使你的代码更易于维护。

1.  遵循 Java 样式约定。特别是标识符约定。方法名称和变量名称**应始终**以小写字符开头。（并尝试使用暗示类/方法/变量含义的类、方法和变量名称。）

2.  学习 Java API 并使用现有的标准库类和方法，而不是重新发明轮子。例如：

    *   `Arrays`和类具有排序数组和集合的`Collections`标准方法。

    *   有实现集合和映射等的集合类型可以处理“无聊”的事情，比如保持元素有序。

3.  如果您有一个复杂的数据结构，请从现有的集合类型和自定义类中构建它。不要尝试将其表示为数字数组。成功的 Java 程序员使用高级设计和实现抽象。你的方法就像试图用手工砖建造一个多层停车场。

* * *

我的建议是获得一本关于面向对象编程（Java 语言）的教科书，并了解设计和编写 Java 程序的正确方法。现在投入精力将使您更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:23:41.877

首先，您是否知道 Java 提供了一种开箱即用的更高效的排序机制？检查[数组](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)类。

其次，你必须非常小心你的方法。您在这里所做的是将一行的所有元素与另一行交换。但是您在每一行中都没有做同样的事情。因此，您需要在当前 while（之前或之后，没有区别）之外有一个单独的嵌套循环，它会检查房屋本身并对其进行排序：

```
 for ( k = 0; k < Row; k++)
   {
     do
     {
       DidISwap = false;

       for ( m = 0; m < Col-1; m++)
       {
         if (Numbers[k][m] > Numbers[k][m+1])
         {
           Hide = Numbers[k][m];
           Numbers[k][m] = Numbers[k][m+1];
           Numbers[k][m+1] = Hide;
           DidISwap = true;
         }
       }
     }
     while (DidISwap);
   } 
```

但是，您的方法非常低效。为什么不将房屋列表放入[SortedSet](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)中，然后创建一个[SortedMap](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)将您的邮政编码映射到您的有序房屋集？一切都会自动排序，效率更高。

您可以将[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)用于您的`SortedMap`实现，并将[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)用于您的`SortedSet`实现。

# grails - intellij 11.1.4 终极 grails 设置

> ID：13327702
> 
> 赞同：0
> 
> 时间：2012-11-11T01:07:09.823
> 
> 标签：grails, intellij-idea

我有 intellij 11.1.4 终极版，我正在尝试创建一个 Grails 项目。创建项目时我无法选择 Grails SDK。我环顾四周，找不到关于如何逐步设置的明确解决方案。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:23:34.860

1.  下载您要使用的[Grails版本](http://grails.org/Download)
2.  将其提取到磁盘上的某个位置
3.  启动 IntelliJ IDEA
4.  *File / Settings / Plugins*，检查是否安装了*Grails*插件
5.  *文件/新建项目/从头开始创建项目*，点击*下一步*
6.  填写表格并确保选择*Select type: Grails Module*，单击*Next*
7.  *在使用库*中选择 Grails 版本 *1.  **如果组合框中没有库**
    2.  点击按钮*创建...*
    3.  选择您提取 Grails SDK 的文件夹（第 1 点和第 2 点）* 
**   点击*完成**

 *如果这对您没有帮助，JetBrains 有[出色的支持](http://www.jetbrains.com/support/support.jsp?pr=IDEA)，我总能得到答案。*

# c - 使用 write() 在 C 中创建一个临时文件

> ID：13327706
> 
> 赞同：1
> 
> 时间：2012-11-11T01:07:28.200
> 
> 标签：c

对于作业，我必须从标准输入中读取，将其保存到文件中，然后在另一个进程中读取文件。但是，我对为什么这段代码不起作用感到困惑：

```
 while((n = read(0,buf,sizeof(buf))) > 0) {
        int tempfile = open("testfile", O_TRUNC | O_CREAT, 0666);
        write ( tempfile , buf , sizeof(buf) );
        close(tempfile);
        process("testfile");
    } 
```

我不应该使用任何 stdio 的东西。

当我查看我创建的文件时，它有 0 个字节，但缓冲区本身有正确的信息....有人可以帮助他们看看我哪里出错了吗？

我可以对文件名使用进程，它可以正确读取它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T01:10:18.430

您已`O_TRUNC | O_CREAT`为打开标志指定，但您未能指定`O_RDWR`or `O_WRONLY`。

您可能还想写入`n`字节，而不是`sizeof(buf)`，因为剩余的`sizeof(buf) - n`字节未初始化。

# java - 具有自定义 Swing 接口的 Netbeans Java CRUD 应用程序

> ID：13327718
> 
> 赞同：0
> 
> 时间：2012-11-11T01:10:20.893
> 
> 标签：java, database, swing, netbeans, derby

我正在尝试使用嵌入式数据库构建 Java 应用程序。它与 CRUD 应用程序非常相似，我深入研究了许多为 oracle 和 netbeans 提供的教程，例如：

[http://platform.netbeans.org/tutorials/nbm-crud.html](http://platform.netbeans.org/tutorials/nbm-crud.html)

[http://netbeans.org/kb/70/java/gui-db.html](http://netbeans.org/kb/70/java/gui-db.html)

但是，这会自动构建一个基于简单操作的默认界面，这不是我想要的。我假装自己定制了所有的界面，当需要时，访问derby嵌入式数据库来执行一些操作。

与此同时，我只有两个 .java 文件。JFrame 包含由设计菜单上添加的元素生成的代码：

```
package interface_aquitex;

import aquitex.Aquitex;
import javax.swing.JOptionPane;

public class design_aquitex extends javax.swing.JFrame {

    /**
     * Creates new form design_aquitex
     */
    public design_aquitex() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jFrame1 = new javax.swing.JFrame();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jTextField2 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        jButton2 = new javax.swing.JButton();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();

        jFrame1.setMinimumSize(new java.awt.Dimension(400, 400));

        jLabel1.setText("Nome:");

        jLabel2.setText("Idade:");

        jTextField1.setName(""); // NOI18N
        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        jTextField1.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                jTextField1PropertyChange(evt);
            }
        });
        jTextField1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField1KeyPressed(evt);
            }
        });

        jButton1.setText("Inserir");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jLabel3.setText("Dados");

        jButton2.setText("Listar");

        javax.swing.GroupLayout jFrame1Layout = new javax.swing.GroupLayout(jFrame1.getContentPane());
        jFrame1.getContentPane().setLayout(jFrame1Layout);
        jFrame1Layout.setHorizontalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jFrame1Layout.createSequentialGroup()
                .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jFrame1Layout.createSequentialGroup()
                        .addGap(26, 26, 26)
                        .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(jLabel2))
                        .addGap(37, 37, 37)
                        .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 56, Short.MAX_VALUE)
                            .addComponent(jTextField2)))
                    .addGroup(jFrame1Layout.createSequentialGroup()
                        .addGap(57, 57, 57)
                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 92, Short.MAX_VALUE)
                .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jButton2)
                    .addComponent(jButton1))
                .addGap(94, 94, 94))
        );
        jFrame1Layout.setVerticalGroup(
            jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jFrame1Layout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addComponent(jButton1)
                .addGap(4, 4, 4)
                .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(88, 88, 88)
                .addGroup(jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2))
                .addContainerGap(79, Short.MAX_VALUE))
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jMenu1.setText("File");

        jMenuItem1.setText("jMenuItem1");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem1);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 279, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>                        
    public String getjTextField1(){
        JOptionPane.showMessageDialog(null,jTextField1.getText());
        return jTextField1.getText();

    }

    public int getjTextField2(){
        int idade;
        idade = Integer.parseInt(jTextField2.getText());
        System.out.println(idade);
        return idade;
    }

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
        jFrame1.setVisible(true);
    }                                          

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        Aquitex a = new Aquitex();
        a.saveRecord();
    }                                        

    private void jTextField1PropertyChange(java.beans.PropertyChangeEvent evt) {                                           
        // TODO add your handling code here:
    }                                          

    private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {                                       
        JOptionPane.showMessageDialog(null,jTextField1.getText());
    }                                      

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(design_aquitex.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(design_aquitex.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(design_aquitex.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(design_aquitex.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new design_aquitex().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JFrame jFrame1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    // End of variables declaration                   
} 
```

和一个由我创建的类：

```
package aquitex;

import interface_aquitex.design_aquitex;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

public class Aquitex extends JFrame{

    private static PreparedStatement stmtSaveNewRecord=null;
    private static Connection dbConnection = null;

    String tabelaExp =
"CREATE table APP.Alunos ("+
   " ID          INTEGER NOT NULL"+
          "      PRIMARY KEY GENERATED ALWAYS AS IDENTITY "+
            "    (START WITH 1, INCREMENT BY 1),"+
    "FIRSTNAME   VARCHAR(30),"+
    "AGE            INT )";

    private void setDBSystemDir() {
        // Decide on the db system directory: <userhome>/.aquitex/
        String userHomeDir = System.getProperty("user.home", ".");
        String systemDir = userHomeDir + "/.aquitex";

        // Set the db system directory.
        System.setProperty("derby.system.home", systemDir);
    }

    private boolean createTables(Connection dbConnection) {
        boolean bCreatedTables = false;
        Statement statement = null;
        try {
            statement = dbConnection.createStatement();
            statement.execute(tabelaExp);
            bCreatedTables = true;
        } catch (SQLException ex) {
            ex.printStackTrace();
        }

        return bCreatedTables;
    }

    public int saveRecord() {

        design_aquitex da = new design_aquitex();

        try {
            stmtSaveNewRecord = dbConnection.prepareStatement(
        "INSERT INTO APP.Alunos " +
        "   (FIRSTNAME, AGE) " +
        "VALUES (?, ?)",
        Statement.RETURN_GENERATED_KEYS);
        } catch (SQLException ex) {
            Logger.getLogger(Aquitex.class.getName()).log(Level.SEVERE, null, ex);
        }

    int id = -1;
    try {
        stmtSaveNewRecord.clearParameters();
        stmtSaveNewRecord.setString(1, da.getjTextField1());
        stmtSaveNewRecord.setInt(2, da.getjTextField2());
        int rowCount = stmtSaveNewRecord.executeUpdate();
        ResultSet results = stmtSaveNewRecord.getGeneratedKeys();
        if (results.next()) {
            id = results.getInt(1);
        }
    } catch(SQLException sqle) {
        sqle.printStackTrace();
    }
    return id;
} 

    public static void main(String[] args) {
        // TODO code application logic here
        String userHomeDir = System.getProperty("user.home", ".");
        String systemDir = userHomeDir + "/.aquitex";

        // Set the db system directory.
        System.setProperty("derby.system.home", systemDir);

        String strUrl = "jdbc:derby:aquitex_db;create=true";

        Properties props = new Properties();
        props.put("user", "adm_aquitex");
        props.put("password", "pass_aquitex");

        try {
            dbConnection = DriverManager.getConnection(strUrl, props);
        } catch (SQLException ex) {
            Logger.getLogger(Aquitex.class.getName()).log(Level.SEVERE, null, ex);
        }

        //Aquitex a = new Aquitex();
        //a.createTables(dbConnection);

        design_aquitex da = new design_aquitex();
        da.setVisible(true);

    }
} 
```

现在，我真正需要的是一些关于如何将接口与数据库分开的说明，我的意思是，在它们之间使用“类”或其他东西，这样它们就不会相互“接触”。

我的另一个问题是关于我在数据库中的表。他们每个人都需要一个 class.java 文件吗？那么本教程中介绍的实体管理器类呢：http: [//platform.netbeans.org/tutorials/nbm-crud.html](http://platform.netbeans.org/tutorials/nbm-crud.html)

我需要使用它吗？我正在使用德比数据库。

抱歉这么长的问题，但我现在有点迷失了如何在应该是具有自定义界面的 java crud 桌面应用程序中制作结构，以及如何制作图层（“swing” "db" 和将它们分开的那个") 相互连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:17:42.453

1) 你的第一个文件（它的名字是什么？）应该有所有的 GUI 东西。

2）您的第二个文件（“Aquitex.java”？）不应该*从*JFrame 扩展，*也不*应该有任何 GUI 内容。

3) 您的主窗体将创建一个“Aquitex”实例。

4) 第一个类中的 UI 事件处理程序将在第二个类中调用公共方法。

# c# - 将字符串对齐到列中

> ID：13327724
> 
> 赞同：1
> 
> 时间：2012-11-11T01:11:39.153
> 
> 标签：c#, string, format

我有一组字符串，用户可以添加或从中减去。我需要一种方法来打印列中的字符串，以便每个字符串的第一个字母对齐。但是，我必须在运行时更改列数。尽管默认值为 4 列，但用户可以选择 1 到 6 之间的任何数字。我不知道如何将未知数量的字符串格式化为未知数量的列。

**示例输入：** it we so be aioutyzc yo bo go an

**四列的示例输出**

带有 2 个字母的“单词”：

我们就是这样

哟波去

带有 1 个字母的“单词”：

艾欧

tyzc

注意：不用担心解析我的代码中已经包含的单词，如果有帮助我可以添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:35:44.547

如果您尝试创建固定宽度的列，则可以在创建行时使用`string.PadLeft(paddingChar, width)`和。`string.PadRight(paddingChar, width)`

[http://msdn.microsoft.com/en-us/library/system.string.padleft.aspx](http://msdn.microsoft.com/en-us/library/system.string.padleft.aspx)

您可以遍历您的单词并在每个单词上调用 .PadXXXX(width) 。它会自动用正确数量的空格填充您的单词，以使您的字符串具有您提供的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:37:42.233

您可以将总行宽除以列数并将每个字符串填充到该长度。您可能还想修剪超长的字符串。这是一个填充比列宽短的字符串并修剪更长的字符串的示例。您可能需要调整较长字符串的行为：

```
 int Columns = 4;
    int LineLength = 80;

    public void WriteGroup(String[] group)
    {
        // determine the column width given the number of columns and the line width
        int columnWidth = LineLength / Columns;

        for (int i = 0; i < group.Length; i++)
        {
            if (i > 0 && i % Columns == 0)
            {   // Finished a complete line; write a new-line to start on the next one
                Console.WriteLine();
            }
            if (group[i].Length > columnWidth)
            {   // This word is too long; truncate it to the column width
                Console.WriteLine(group[i].Substring(0, columnWidth));
            }
            else
            {   // Write out the word with spaces padding it to fill the column width
                Console.Write(group[i].PadRight(columnWidth));
            }
        }
    } 
```

如果您使用此示例代码调用上述方法：

```
var groupOfWords = new String[] { "alphabet", "alegator", "ant", 
    "ardvark", "ark", "all", "amp", "ally", "alley" };
WriteGroup(groupOfWords); 
```

然后你应该得到如下所示的输出：

```
alphabet            alegator            ant                 ardvark
ark                 all                 amp                 ally
alley 
```

# android - 单击列表项时播放声音文件

> ID：13327727
> 
> 赞同：1
> 
> 时间：2012-11-11T01:12:21.447
> 
> 标签：android, android-listview, android-mediaplayer

我想显示用户可以点击以播放相关声音文件的声音列表。我有两个类（AndroidListViewActivity，SingleListItem）我想在单击按钮时播放声音文件。（所选项目）单击时出现错误消息。它不起作用，请帮助我。

AndroidListViewActivity.class（用于列表和选择项）

SingleListItem.class(显示选中项)

按钮单击（在 SingleListItem 布局上，播放选定的声音）

日志信息：

```
11-11 16:18:09.285: E/dalvikvm(17161): VM aborting
11-11 16:18:09.285: A/libc(17161): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

AndroidListViewActivity 类；

```
public class AndroidListViewActivity extends ListActivity {
    int [] sounds;
 MediaPlayer mediaPlayer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
sounds= new int[] {R.raw.sound1,R.raw.sound2,R.raw.sound3,R.raw.sound4,R.raw.sound5};        

    // storing string resources into Array
    String[] sesler = getResources().getStringArray(R.array.sounds);        
    // Binding Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label,   sounds));

    ListView lv = getListView();

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {     

          // selected item 
          String product = ((TextView) view).getText().toString();
          String selectedFromList = getItemAtPosition(position);

            @SuppressWarnings("unused")
            int resId = getResources().getIdentifier(selectedFromList, "raw", getPackageName());

  // Launching new Activity on selecting single List Item
          Intent i = new Intent(getApplicationContext(), SingleListItem.class);
          Intent intent = new Intent(getApplicationContext(), SingleListItem.class);
          // sending data to new activity
          i.putExtra("product", product);
          intent.putExtra("position", position);
          startActivity(i);
          startActivity(intent);            
      }

    private String getItemAtPosition(int position) {
        // TODO Auto-generated method stub
        return null;
    }
    });
}
} 
```

SingleListItem 类；

```
public class SingleListItem extends Activity{

 int [] sounds;
 MediaPlayer mediaPlayer;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sounds= new int[]   {R.raw.sound1,R.raw.sound2,R.raw.sound3,R.raw.sound4,R.raw.sound5};

           this.setContentView(R.layout.single_list_item_view);

    TextView txtProduct = (TextView) findViewById(R.id.product_label);

    Intent i = getIntent();

    Intent intent = getIntent();

    // getting attached intent data
    String product = i.getStringExtra("product");

    int position = intent.getExtras().getInt("position");
    // displaying selected product name
    txtProduct.setText(product);
    mediaPlayer = MediaPlayer.create(this, sesdosya[position]); 
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener(){

     public void onClick(View arg0) {                            
    mediaPlayer.start();   
    //start the progress dialog
     }
    }); 
 }    
} 
```

# wxpython - wxPython 应用程序打开时如何将值加载到该应用程序中？

> ID：13327729
> 
> 赞同：0
> 
> 时间：2012-11-11T01:12:29.957
> 
> 标签：wxpython

我有一个 wxPython 应用程序，其中包含用户 ID、密码和隧道 ID（用于 IPv6 更新程序）之类的文本框。这些值保存在一个 txt 文件中，因此用户在启动应用程序时不必继续输入它们。我设置了一个名为“ReadInformation()”的方法来处理这个问题，但我需要知道在我的应用程序中的何处调用它。

本质上，我想要的是打开窗口，并将值从文件中预填充到文本框中。我试过从各个地方调用 ReadInformation()，但似乎没有任何效果。那么，我是否需要为框架创建“OnLoad”类型的事件，还是应该将调用放在其他地方？

这是我当前代码的链接[http://bpaste.net/show/WjMo9nfHZJQH77Gza4w5/](http://bpaste.net/show/WjMo9nfHZJQH77Gza4w5/)

谢谢，周末愉快。:) 帕特里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:36:27.110

只需在创建控件后和显示框架之前调用您的方法：

```
def __init__(self, parent):
    self._init_ctrls(parent)
    self.readInformation() 
```

创建框架后，`__init__()`执行创建控件并填充信息（在它可见之前）：

```
frame = Frame1(None).Show() 
```

或者，您可以`readInformation()`在创建框架后调用：

```
frame = Frame1(None)
frame.readInformation()
frame.Show() 
```

此外，您可能希望移入`wx.Frame.__init__(...)`框架，`__init__`因为它是基类而不是控件。

# java - 需要扫描一个对象，该对象是另一个类中的数组

> ID：13327734
> 
> 赞同：0
> 
> 时间：2012-11-11T01:14:04.557
> 
> 标签：java, class

我的牌组创建了一组 Card 对象，并成功打印出它已更新。我想创建第三个类来实现该程序：创建一个牌组对象，询问玩家他们想要多少张牌，然后随机分发。在底部的 PlayingTable 类中，我尝试创建一个卡片组实例并对其进行扫描，以使卡片组中的所有信息都在那里。它说我无法扫描甲板对象，因为它不是数组，而且我不太确定从这里去哪里....

这是我的两个类的代码：

公共课卡

{

```
 //Instance properties//
    private String cardNum; 
    private String cardSuit;

    //Instance Methods // 
    //Constructor, create an instance of card
    public Card( String num , String suit ) 
    {
        System.out.println( "Creating a card.");
        cardNum = num ;
        cardSuit = suit;    
    }       
     public void display()
     { 
    System.out.println("This card is a" + " "+ cardNum + cardSuit);
    } 
```

}

公共课甲板

{ // 实例属性//

```
 //Number of cards in a deck
 public static int numCards = 52; 
 private static Card [ ] deck= new Card [numCards];
 private static String [ ] cardValue = { "Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King" } ;
 private static String [ ] cardSuit = { " of Hearts" , " of Spades", " of Clubs", " of Diamonds" };

 //Instance methods and Constructor//
 /*public void Deck ( )
 {

 }*/

 public static void fillDeck ( )
 {

    int eachCard = 0 ;

    for ( int i = 0; i < cardValue.length ; i++ )
    {
     for ( int j = 0 ; j < cardSuit.length ; j++ )
        {

         deck[eachCard++] = new Card ( cardValue [i] , cardSuit [j] );

        }
     } 
 }

public static void getDeck ()
{
    for ( int i = 0; i < numCards ; i++ )
   {
    fillDeck();
    //System.out.println( " This is card" + i + " " + " of the deck" );
    deck[i].display();
    }
}   
public static void main (String [] args ) 
{ 
    getDeck();
} 
```

}

public class PlayingTable { static Deck DealersDeck = new Deck();

```
 public static void main ( String [] args )
    {  

        for ( int i = 0 ; i < 52; i++)
        {
              System.out.println ( dealersDeck[i].getDeck());
        }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:19:48.017

问：我如何显示来自一个班级的信息……[来自]……另一个班级？

答：在“其他类”中提供公共“getter”方法（或者，如果您正在编程#，则为“properties”）。

这是一个关于 C# 属性的好教程：

*   [http://csharp.net-tutorials.com/classes/properties/#.UJ79KlZz2So](http://csharp.net-tutorials.com/classes/properties/#.UJ79KlZz2So)

以及关于 Java“getter/setter”方法的讨论：

*   [http://www.daniweb.com/software-development/java/threads/13283/getset-methods-in-java](http://www.daniweb.com/software-development/java/threads/13283/getset-methods-in-java)

最后，这里讨论一下面向对象的“封装”，这个问题实际上超越了“属性”、“getter/setter 方法”......以及...... *“*在一个类中显示来自另一个类的信息”：

*   [http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:52:04.463

您创建一个数组，该数组将保存初始化为 numCards -1 大小的 Card 对象

```
private static Card [ ] deck = new Card [numCards-1]; 
```

但是你从来没有在里面放任何东西，所以当你打电话时

```
deck[i].display(); 
```

您正在对不存在的东西调用 display 方法，您有一个将填充数组的方法（makeDeck（）），但您从不调用它。

在实体类文件中包含 main() 会很方便，但也可以掩盖代码中的错误。我建议您在单独的课程中进行测试。

# regex - 从正则表达式字符类中排除连字符？

> ID：13327735
> 
> 赞同：0
> 
> 时间：2012-11-11T01:14:08.827
> 
> 标签：regex

为了说明这个微妙的问题，这里有一些 JavaScript 示例，以便您可以直接在浏览器中进行测试：

```
/[2-5]+/.test('2')   // true, as expected.
/[2-5]+/.test('-')   // false, as expected.
/[2-5]+/.test('2-')  // true. WTF?!!! 
```

问题：

1.  这是错误还是功能？
2.  测试字符类时如何排除连字符？

# 更新

这是一个愚蠢的问题。我的错。在再次编码之前需要休息一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:16:01.427

尝试这样的事情。

```
/^[2-5]+$/.test('2-') 
```

这将确保从字符串的前面 (^) 到结尾 ($) 只有数字 2-5。

# java - 不覆盖现有文件需要 Java/Jaxb 帮助

> ID：13327739
> 
> 赞同：2
> 
> 时间：2012-11-11T01:14:42.527
> 
> 标签：java, jaxb

我是 JAXB 的新手，所以请在您的评论中宽容！无论如何，每次运行我想要的程序时，我都面临着现有 xml 文件被覆盖的问题。假设添加到现有的 xml。请帮忙！

CoursesApp.java：

```
package Courses;

import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;

public class CoursesApp {
    public static void main(String[] args) {
        int choice;
        String courseCode = "", professorName = "", groupIndex = "", classType = "";
        Scanner sc = new Scanner(System.in);

        try {

            File file = new File("C:\\Courselist.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Courselist.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            Courselist courselist = (Courselist) jaxbUnmarshaller.unmarshal(file);
            System.out.println(courselist.course.get(0).getclassType());

          } catch (JAXBException e) {
            e.printStackTrace();
          }

        Courselist courselist = new Courselist();
        Course course = new Course();

        do{ 
            System.out.println("(1) Add a student.\n" +
                               "(2) Add a course.\n" +
                               "(3) Exit.\n");
            System.out.print("Enter the number of your choice: ");
            choice = sc.nextInt();
            sc.nextLine();
            switch (choice) {
            case 1: 
                    break;
            case 2:
                System.out.println("Please enter course code:");
                courseCode = sc.nextLine();
                System.out.println("Please enter class type:");
                classType = sc.nextLine();
                System.out.println("Please enter group index:");
                groupIndex = sc.nextLine();
                System.out.println("Please enter professor name:");
                professorName = sc.nextLine();
                course.setcourseCode(courseCode);
                course.setclassType(classType);
                course.setgroupIndex(groupIndex);
                course.setprofessor(professorName);
                courselist.course.add(course);
                try{
                    File file = new File("C:\\Courselist.xml");
                    JAXBContext jaxbContext = JAXBContext.newInstance(Courselist.class);
                    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

                    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

                    jaxbMarshaller.marshal(courselist, file);
                    jaxbMarshaller.marshal(courselist, System.out);

                }catch(JAXBException e)
                {
                    e.printStackTrace();
                }
                    break;
            case 3: //Modify course
                    break;
            default: System.out.println("Please enter a number between 1-3.\n");
                    break;
            }
        } while (choice!=3);
    }
} 
```

课程列表.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<courselist>
    <course>
        <classType>lect</classType>
        <courseCode>2002</courseCode>
        <groupIndex>12</groupIndex>
        <professor>james</professor>
    </course>
</courselist> 
```

如果我添加另一门课程，则添加到以下课程：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<courselist>
    <course>
        <classType>lect</classType>
        <courseCode>2002</courseCode>
        <groupIndex>12</groupIndex>
        <professor>james</professor>
    </course>
    <course>
        <classType>Lab</classType>
        <courseCode>2001</courseCode>
        <groupIndex>1</groupIndex>
        <professor>john</professor>
    </course>
</courselist> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:21:56.917

以为我已经回答了这个，但是答案消失了...

首先不要这样做：

```
 } catch (JAXBException e) {
        e.printStackTrace();
      } 
```

您正在捕获异常，将文本转储到标准输出，然后*继续，就好像什么都没发生一样*。这是IDE添加的无用样板，*不要这样做*。

由于您想根据文件是否已经存在来确定您的行为，因此我建议将块与[File.exists](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#exists%28%29)`if`的使用结合使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T02:41:20.627

```
 import java.io.File;
    import java.io.FileWriter;
    import java.io.IOException;
    import java.util.ArrayList;
    import java.util.Scanner;

    import java.util.logging.Level;
    import java.util.logging.Logger;
    import javax.xml.bind.JAXBContext;
    import javax.xml.bind.JAXBException;
    import javax.xml.bind.Marshaller;
    import javax.xml.bind.Unmarshaller;

    public class CoursesApp {

        int choice;
        String courseCode = "", professorName = "", groupIndex = "", classType = "";
        private boolean exists;
        Courselist courselist = new Courselist();
        Course course = new Course();

        public static void main(String[] args) {
            Scanner sc = new Scanner(System.in);
            Courselist courselist = new Courselist();
            Course course = new Course();
            try {

                File file = new File("C:\\Courselist.xml");
                JAXBContext jaxbContext = JAXBContext.newInstance(Courselist.class);

                Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
                courselist = (Courselist) jaxbUnmarshaller.unmarshal(file);
                System.out.println(courselist);

            } catch (JAXBException e) {
                e.printStackTrace();
            }
            //* OVER HERE *//
            CoursesApp ca = new CoursesApp();
            ca.process(0);
        }

        private void process(int choice) {

            //* PRINT MENU *//
            System.out.println("(1) Add a student.\n"
                    + "(2) Add a course.\n"
                    + "(3) Exit.\n");
            System.out.println("Enter the number of your choice: ");
            Scanner sc = new Scanner(System.in);
            choice = sc.nextInt();
            sc.nextLine();
            switch (choice) {
                case 1:
                    //ADD STUDENTS
                    break;
                case 2:
                    File file = new File("C:\\Course.xml");
                    if (file.exists()) {
                        choice = 4;
                        exists = true;
                    } else {
                        System.out.println("File doesnot exist press 4 to create or 3 to exit: ");
                        choice = sc.nextInt();
                        sc.nextLine();
                    }
                    /*ENTER COURSE DETAILS*/
                    if (choice == 4) {
                        System.out.println("Please enter course code:");
                        courseCode = sc.nextLine();
                        System.out.println("Please enter class type:");
                        classType = sc.nextLine();
                        System.out.println("Please enter group index:");
                        groupIndex = sc.nextLine();
                        System.out.println("Please enter professor name:");
                        professorName = sc.nextLine();
                        course.setcourseCode(courseCode);
                        course.setclassType(classType);
                        course.setgroupIndex(groupIndex);
                        course.setprofessor(professorName);
                        courselist.course.add(course);
                        System.out.println("Are there more records?\n Press 2(yes) or 3(n): ");
                        choice = sc.nextInt();
                        sc.nextLine();
                        if (choice == 3) {
                            /*END OF RECORDS SO GO AHEAD AND UNMARSHAL*/
                            unmarshal(file, courselist);
                        } else {
                            /*ADD MORE COURSE ITEMS*/
                            process(2);
                        }
                    } else {
                        /*FILE NOT EXIST AND USER SELECTED EXIT*/
                        System.exit(0);
                        break;
                    }
                    break;
                case 3:
                    System.exit(0);
                    break;
            }
        }

        private void unmarshal(File file, Courselist courselist) {
            {
                FileWriter fw = null;
                try {
                    JAXBContext jaxbContext =    JAXBContext.newInstance(Courselist.class);
                    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
                    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
                    StringBuffer str = new StringBuffer();
                    /*EXISTING FILE SO APPEND*/
                    if (exists) {
                        fw = new FileWriter(file, true);
                        jaxbMarshaller.marshal(courselist, fw);
                    } 
                    /*CREATE NEW FILE*/
                     else {
                        jaxbMarshaller.marshal(courselist, file);
                    }
                    jaxbMarshaller.marshal(courselist, System.out);
                } catch (IOException ex) {
                    Logger.getLogger(CoursesApp.class.getName()).log(Level.SEVERE, null, ex);
                } catch (JAXBException e) {
                    e.printStackTrace();
                } finally {
                    try {
                        fw.close();
                    } catch (IOException ex) {
                        Logger.getLogger(CoursesApp.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
            process(0);//call and print options
        }
    } 
```

这将解决覆盖问题，但您需要一种方法来防止重复 xml 声明。希望这可以帮助

我基本上采用了提问者发布的代码并将代码片段提取到单独的方法中以便更好地理解。我还添加了检查文件是否存在并附加到文件而不是覆盖内容。

Process() 方法用于用户输入和需要执行的操作。在 unmarshal() 中，用户输入绑定到 xml 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:19:44.817

为此，您需要使用 JAXB 2.x **Binder**抽象。[详细教程](http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html)。

# mysql - MySQL：找出丢失的订单 ID

> ID：13327743
> 
> 赞同：3
> 
> 时间：2012-11-11T01:15:27.853
> 
> 标签：mysql, sql, database

我知道这个问题在 StackOverFlow 中被问了好几次。我已经尝试了其中的几个，但我不走运。

我有一个 MySQL 表，其中有一个字段（`orders_id`），它可能会随机出现在表中（不是按顺序），我需要找出表中缺少哪些 id。

```
 orders_id product_name 数量    
       1007无线鼠标1
       1000 笔记本电脑 1
       1004无线鼠标3
       1020 个人电脑 3
       1003无线鼠标4
       第1025章 4
       1026 iphone 1

```

**预期答案：**

假设`orders_id`从**1000**开始。

```
  订单编号     
       1000
       1001
       1002     
       1005      
       1006    
       1008      
      ……  

```

**我已经在“SqlFiddle”创建了上表，你们可以使用它。**

**[见表：SQLfiddle](http://sqlfiddle.com/#!2/eeab0)**

**我尝试过的 SQL：**

```
declare @id int
declare @maxid int

set @id = 1
select @maxid = max(`orders_id`) from orders

create temporary table IDSeq
(
    id int
)

while @id < @maxid
begin
    insert into IDSeq values(@id)

    set @id = @id + 1
end

select 
    s.id 
from 
    idseq s 
    left join orders t on 
        s.id = t.`orders_id` 
 where t.`orders_id` is null

 drop table IDSeq 
```

我从以下答案中获取了上述 SQL：

[SQL：在表中查找缺失的 ID](https://stackoverflow.com/questions/1389605/sql-find-missing-ids-in-a-table)

**我也尝试过 ANSI SQL：**

```
SELECT a.orders_id+1 AS start, MIN(b.orders_id) - 1 AS end
    FROM orders AS a, orders AS b
    WHERE a.orders_id < b.orders_id
    GROUP BY a.orders_id
    HAVING start < MIN(b.orders_id) 
```

任何人有任何想法？我怎样才能找到丢失的订单 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T01:58:59.963

这是执行此操作的另一种解决方案：

```
CREATE TABLE TEMP 
(n int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9);

SET @maxid = (SELECT MAX(orders_id) FROM orders);

SELECT     s.id 
FROM
(
    SELECT id
    FROM
    (
       SELECT t4.n * 1000 + t3.n * 100 + t2.n * 10 + t1.n + 1 AS id
       FROM         TEMP AS t1
       CROSS JOIN TEMP AS t2
       CROSS JOIN TEMP AS t3
       CROSS JOIN TEMP AS t4
    ) t 
    WHERE id BETWEEN 1000 AND @maxid
) s 
LEFT JOIN orders t ON s.id = t.`orders_id` 
WHERE t.`orders_id` IS NULL; 
```

这应该给你`orders_id`s：

```
ID
1001
1002
1005
1006
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1021
1022
1023
1024 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/fec1a/7)

**请注意：**我创建了一个`TEMP`值从 0 到 9 的表，以便用于生成一个包含从 1 到 10000 的值的锚表，而不是您在发布的查询中使用的 while 循环。您可以根据表中的值控制此表中的值。如果您的值超过 10000 `CROSS JOIN`，则该`TEMP`表再一次。

**更新：**如果`orders_id`是数据类型`varchar`，只需将其转换为`INTEGER`：

```
SELECT     s.id 
FROM
(
    SELECT id
    FROM
    (
       SELECT t4.n * 1000 + t3.n * 100 + t2.n * 10 + t1.n + 1 AS id
       FROM         TEMP AS t1
       CROSS JOIN TEMP AS t2
       CROSS JOIN TEMP AS t3
       CROSS JOIN TEMP AS t4
  ) t WHERE id between 1000 AND @maxid
) s 
LEFT JOIN
(
    SELECT CONVERT(orders_id, UNSIGNED INTEGER) AS orders_id 
    FROM orders
) t ON s.id = t.`orders_id` 
WHERE t.`orders_id` IS NULL; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/a798e/6)

# xcode - Xcode 4：项目不遵守工作区中的 $(inherited) 构建设置？

> ID：13327744
> 
> 赞同：2
> 
> 时间：2012-11-11T01:15:57.227
> 
> 标签：xcode, xcode4, build-process, dependency-management, targets

今天是我忍受 Xcode 4、工作区和项目的日子。

我有一个带有一些开源库（openssl、sqlcipher 和其他几个）[的工作区。](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html)在工作区中有一个“主”[项目](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Projects.html)，它产生一个 EXE 作为目标。开源项目是“主”项目的“子项目”或“子项目”。它看起来类似于下面：

```
Main Project
  +- OpenSSL Project
  +- SqlCipher Project
  ... 
```

在“主”项目中，在“项目”（而不是“目标”）下，我设置了预处理器和警告标志[构建设置](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Build_Settings.html)。例如，调试预处理器宏是“DEBUG=1 SQLITE_DEBUG=1 SQLITE_HAS_CODEC=1”（不带引号）。相反，发布预处理器宏设置为“NDEBUG=1 NS_BLOCK_ASSERTIONS=1 SQLITE_HAS_CODEC=1”。

在主“目标”（不是“项目”）和所有子项目（“项目”和“目标”）中，我确保没有特定于项目的构建设置覆盖（通过突出显示“预处理器宏”并按 COMMAND+DELETE） . 然后我确保该字段设置为“$(inherited)”（不带引号）。

瞧，子项目不尊重“$（继承）”。当我查看 Xcode 发出的命令行时，GCC_PREPROCESSOR_DEFINITIONS 中没有任何内容。例如，SqlCipher 的项目文件不使用从 Main 继承的构建设置进行编译。

我认为这个问题可能类似于[Preprocessor Macros 在 XCode 的项目设置中被忽略，但不是目标设置](https://stackoverflow.com/questions/7189450/preprocessor-macros-ignored-in-xcodes-project-settings-but-not-target-settings)，但我似乎无法得到相同的 [肯定] 结果。

谁能向我解释如何让子项目兑现“$（继承）”？当我尝试通读 Apple 的文档时，我只会对阅读的内容和观察到的行为感到更加困惑。请像在和孩子说话一样解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:22:52.543

这些设置不跨越项目边界。我建议你使用`.xcconfig`文件来配置你的目标（这些可能被多个项目引用）。

* * *

**更新/说明：**使用您的示例设置：主项目的构建设置可能会影响主项目的任何目标，但它们不会跨越到 OpenSSL 项目的目标。

# c++ - 连接四个位板

> ID：13327748
> 
> 赞同：1
> 
> 时间：2012-11-11T01:16:20.170
> 
> 标签：c++, bit-manipulation

在[这篇](https://stackoverflow.com/questions/7044670/how-to-determine-game-end-in-tic-tac-toe/7046415#7046415)文章中，有一个非常有趣的建议，用于使用位板测试连接四胜。

董事会的结构如下：

```
6 14 22 30 38 46 54
5 13 21 29 37 45 53
4 12 20 28 36 44 52
3 11 19 27 35 43 51
2 10 18 26 34 42 50
1  9 17 25 33 41 49
0  8 16 24 32 40 48 
```

他们还推荐了以下算法，用于测试仅使用 8 个班次的胜利：

```
bool haswon(int64_t board)
{
    int64_t y = board & (board >> 7);
    if (y & (y >> 2 * 7)) // check \ diagonal
        return true;
    y = board & (board >> 8);
    if (y & (y >> 2 * 8)) // check horizontal -
        return true;
    y = board & (board >> 9);
    if (y & (y >> 2 * 9)) // check / diagonal
        return true;
    y = board & (board >> 1);
    if (y & (y >> 2))     // check vertical |
        return true;
    return false;
} 
```

我想在我正在编写的类似程序中实现这个算法。但是，要应用我的启发式函数，我需要能够判断给定行中有多少块。我真的一直在努力解决这个算法，但我不知道如何检查是否只有 1、2 或 3 件连续。

现在，我只是遍历每一行，并计算位数，但我确信一定有更好的使用移位的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T02:47:15.687

对于第 0 行，您可以通过以下方式获取件数：

```
int64_t row0 = board & 0x01010101010101LL;
row0 += row0 >> 32;
row0 += row0 >> 16;
row0 += row0 >> 8;
return row0 & 0xff; 
```

其他行也类似（首先按行号移动）。事实上，你可以一次做两行，因为计数总是适合 3 位。

```
int64_t x = board & 0x11111111111111LL;
x += x >> 32;
x += x >> 16;
x += x >> 8;
int row0 = x & 0xf;
int row4 = (x >> 4) & 0xf; 
```

# javascript - 有条件加载的异步资源的 Modernizr.load 和性能（缓存）

> ID：13327757
> 
> 赞同：0
> 
> 时间：2012-11-11T01:18:51.420
> 
> 标签：javascript, performance, asynchronous, modernizr, html5boilerplate

我在这里阅读了大约十几篇文章，[这一篇似乎最接近](https://stackoverflow.com/questions/6468678/jquery-getscript-vs-yepnope-performance)，但对我来说并没有完全清楚。

我正在 HTML5 Boilerplate 上构建，尽管是自定义的 Modernizr 构建。我计划使用 yepnope/modernizr.load 功能进行条件加载。

H5BP 中的 .htaccess 删除了 Etags 并添加了过期标头（我猜 Modernizr.load 需要过期标头）。它还设置了“access plus X”的过期时间

这在充分利用缓存以“加速”浏览体验方面有何作用。是否会在每个页面上加载满足条件的每个资源，还是会跳过缓存的内容？

如果仅更改了其中一个组件（我正在加载的资源之一）而我的 Modernizr 版本没有更改怎么办？

*发布后我意识到这可能更适合网站管理员论坛（问题中没有实际代码......）但我想我不确定是否会有涉及代码的答案，所以现在，我会让它意识到也许它应该被迁移。抱歉，这种级别的编码和配置对我来说是新的。*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:19:00.347

每个资源都是独立缓存的。因此，如果您加载一个名为 的 javascript 文件`foo.js`，该文件将被缓存一年：[https ://github.com/h5bp/html5-boilerplate/blob/master/.htaccess#L245](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess#L245)

如果您将modernizr 脚本更改为新版本，这不会更改缓存结束日期，`foo.js`其将保持不变。

为了破坏缓存，您需要更改文件名（例如：）`foo-v1234123.js`、路径，或者您可以添加查询字符串（`foo.js?v=1`）。如果您进行更改，`foo.js`则只需将此版本号增加一，以强制浏览器重新下载文件并重新缓存它。

如果您正在处理一个简单的网站并且没有大型项目，那么手动执行此操作可能是更简单的解决方案。否则，我建议通过`git`或类似的方式挂钩版本号 - 但为了您的理智，这需要自动化。

希望这有帮助！

# python - 如何使用 Python 显示和关闭图像？

> ID：13327759
> 
> 赞同：9
> 
> 时间：2012-11-11T01:19:13.333
> 
> 标签：python, python-imaging-library

我想用 Python 显示图像并在用户在终端中输入图像的名称后将其关闭。我使用 PIL 来显示图像，这里是代码：

```
im = Image.open("image.jpg")
im.show() 
```

我的应用程序显示此图像，但用户任务是识别图像上的对象并在终端中写入答案。如果输入的答案是正确的，用户应该得到另一个图像。PIL 的问题是我无法关闭图像，并且通过研究，唯一的解决方案是杀死图像查看器的进程，但这并不是真正可靠和优雅。是否有任何其他库用于显示具有 .show() 和 .close() 等方法的图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-10-08T03:06:24.773

聚会有点晚了，但是（作为一个心怀不满的数据科学家，他真的不想为了显示图像而学习 gui 编程）我可能可以代表其他几个希望看到更简单的解决方案的人这个。我通过扩展 Anurag 的解决方案找到了一些解决方法：

制作第二个 python 脚本（我们称之为“imviewer.py”）：

```
from skimage.viewer import ImageViewer
from skimage.io import imread

img = imread('image.png') #path to IMG
view = ImageViewer(img)
view.show() 
```

然后在你的主脚本中按照 Anurag 的建议执行：

```
import subprocess
p = subprocess.Popen('python imviewer.py')
#your code
p.kill() 
```

你可以让主脚本临时保存你想用“imviewer.py”打开的图像，然后用下一个图像等覆盖它。

希望这可以帮助解决这个问题的人！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T02:33:57.733

只需在单独的进程中打开任何图像查看器/编辑器，并在用户回答您的问题后将其终止，例如

```
from PIL import Image
import subprocess

p = subprocess.Popen(["display", "/tmp/test.png"])
raw_input("Give a name for image:")
p.kill() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T02:05:36.947

终端旨在处理线性命令流 - 这意味着它会提出问题，用户回答，然后它可以提出不同的问题。您在这里尝试做的是让终端做两件事，显示图像并同时向用户提问。为此，您可以执行以下两项操作：

**多处理**

您可以启动一个新线程/进程并让 PIL 使用该线程显示图像，同时在第一个线程/进程中向用户提问。然后在用户回答后，您可以关闭其他线程/进程。您可以查看 Python 的`threading`模块（[链接](http://docs.python.org/2/library/threading.html)）以获取有关如何执行此操作的更多信息。

**图形用户界面**

与其在终端中制作用户界面，不如使用您喜欢的任何框架制作一个简单的 GUI 应用程序。我个人喜欢[PyQt4](http://www.riverbankcomputing.com/software/pyqt/intro)。Qt 是非常强大的 GUI 开发工具包，PyQt4 是它的包装器。如果你制作一个 GUI，那么你想做的事情是相当微不足道的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T12:22:54.240

并非所有 GUI 都难以使用。

这是使用 PySimpleGUI 的单行解决方案。通常我不会把它写成一行，但既然它是一次性的，也许不需要添加，那么就可以了。

```
import PySimpleGUI as sg

sg.Window('My window').Layout([[ sg.Image('PySimpleGUI.png') ]]).Read() 
```

[![在此处输入图像描述](../Images/ef9c5218c9bf432f049a2c16c7232810.png)](https://i.stack.imgur.com/FY9G2.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-09T22:00:02.353

可能是矫枉过正，但对我来说，最简单和最强大的解决方案就是使用[matplotlib](http://matplotlib.org/)，因为它可以正确跟踪它创建的数字，例如：

```
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

imgplot = plt.imshow(mpimg.imread('animal.png'))
plt.ion()
plt.show()
animal_name = raw_input("What is the name?: ")
plt.close() 
```

# javascript - 从对象加载外部js，然后在加载后使用相同对象的功能

> ID：13327768
> 
> 赞同：0
> 
> 时间：2012-11-11T01:20:14.100
> 
> 标签：javascript, google-maps, object, callback, dom-events

制作一个必须单行的脚本才能在我们网站的任何地方附加谷歌地图。

有时同时有 10 个地图，所以我需要一个函数来构建一个可以构建地图的对象。问题是当我加载 maps.js 时，即使它不需要它（案例计数 maps = 0）。

所以我开始做这个：

```
document.addEventListener("DOMContentLoaded", function(){ var map = new initmap(0, 'country_tinymap_canvas', {'longitude': {LONG}, 'latitude': {LAT}} ) }, false); 
```

这绑定`domready`到加载我的地​​图。{LONG} 和 {LAT} 是类似聪明的 PHP 变量，想象它们是数字。

还为 Google Maps API 回调做了一个小回调处理程序。

```
window.___gmapsready = function(){
    console.log("o/ - map here!");
    $(window).trigger('gmapsready');
} 
```

当我制作新地图时，它会构造一个`initmap`对象

```
function initmap(type,container,params) {
    var self = this;
    this.container = container;
    this.type = type;
    this.params = params;

    this.makemap = function()
    {
        console.log("doin map.");
        var mapc = document.getElementById(this.container);
        if (mapc != null)
        {
            var map = new google.maps.Map(mapc, window.___gmaps);
            var marker;

            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(this.params.longitude,this.params.latitude),
                image: image,
                draggable: false,
                map: map
            });
            map.setCenter(new google.maps.LatLng(this.params.longitude,this.params.latitude));
        }
        console.log("map done, unset vars etc.");
    }

    this.checkload = function()
    {
        console.log("houston houston got map?");
        if (typeof google === 'object' && typeof google.maps === 'object')
        {
            console.log("thanks bro.");
            self.makemap();
        }
        else
        {
            console.log("nop. but i'm gonna load it.");
            var s = document.createElement("script");
            s.type = "text/javascript";
            s.src  = "http://maps.google.com/maps/api/js?v=3&sensor=true&callback=___gmapsready";
            $("head").append(s); 
            document.addEventListener("gmapsready", self.makemap);
        }
    }
    this.checkload();
} 
```

问题是我无法添加事件`makemap`要调用的函数`gmapsready`。你能帮我看看怎么做吗？

一切都很好，除了`document.addEventListener("gmapsready", self.makemap);`电话。

Aye 也尝试`document.addEventListener("gmapsready", function(event){self.makemap(event)}, false);`了同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:44:48.257

您不能将自定义 jQuery 事件与本机浏览器混合`addEventListener`。试试这个：

`$(window).on('gmapsready',function() { self.makemap();});`

# php - 只是试图显示表格中的一行

> ID：13327769
> 
> 赞同：-2
> 
> 时间：2012-11-11T01:20:18.917
> 
> 标签：php

我收到一条警告消息，告诉我 mysql_fetch_row 需要参数 1 的资源，我给了它一个对象。

```
<?php 
$con = new mysqli("localhost", "root", "abc123", "profile");
if (mysqli_connect_errno()) {
    printf("Connection failed: %s\n", mysqli_connect_error());
    exit();
}
$sql = "SELECT * FROM members WHERE member_id = 1243433";
$res = mysqli_query($con,$sql);
$row = mysql_fetch_row($res); // error here
print_r($row);
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:22:52.143

只需将其更改为`mysqli_fetch_row`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:28:48.513

你给了它一个`mysqli_`函数族的对象，但它是一个`mysql_`函数。

基本阅读表明两者并不相同。

请改用`mysqli_fetch_row`同一组函数中的函数。

# python - Perl vs Python 日志处理性能

> ID：13327771
> 
> 赞同：0
> 
> 时间：2012-11-11T01:20:26.470
> 
> 标签：python, regex, performance, perl, text-processing

我正在开发一个基于 Web 的日志管理系统，该系统将基于 Grails 框架构建，并且我将使用 Python 或 Perl 等文本处理语言之一。我创建了 Python 和 Perl 脚本来加载日志文件并解析每一行以将它们保存到 MySQL 数据库（该文件包含大约 40,000 行，大约 7MB）。**使用 Perl**需要1 分 2 秒，使用 Python 只需**17 秒**. 我原以为 Perl 会比 Python 快，因为 Perl 是最初的文本处理语言（我的怀疑也来自我正在阅读有关 Perl 文本处理性能的不同博客）。我也没想到 Perl 和 Python 之间会有 47 秒的差异。为什么 Perl 比 Python 需要更多时间来处理我的日志文件？是因为我使用了一些错误的 db 模块，还是我的 Perl 代码和正则表达式可以改进？

**注意：**我是一名 Java 和 Groovy 开发人员，我没有使用 Perl 的经验（我使用的是 Strawberry Perl v5.16）。我也用 Java（1 分 5 秒）和 Groovy（1 分 7 秒）进行了这个测试，但是处理日志文件的时间超过 1 分钟，所以这两种语言都已经过时了，现在我想在 Perl 和Python。

**PERL 代码**

```
use DBI;
use DBD::mysql;
# make connection to database
$connection = DBI->connect("dbi:mysql:logs:localhost:3306","root","") || die      "Cannot connect: $DBI::errstr";

# set the value of your SQL query
$query = "insert into logs (line_number, dated, time_stamp, thread, level, logger, user, message)
        values (?, ?, ?, ?, ?, ?, ?, ?) ";

# prepare your statement for connecting to the database
$statement = $connection->prepare($query); 

$runningTime = time;

# open text file
open (LOG,'catalina2.txt') || die "Cannot read logfile!\n";;

while (<LOG>) {
    my ($date, $time, $thread, $level, $logger, $user, $message) = /^(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2},\d{3}) (\[.*\]) (.*) (\S*) (\(.*\)) - (.*)$/;

    $statement->execute(1, $date, $time, $thread, $level, $logger, $user, $message);
}  

# close the open text file
close(LOG);

# close database connection
$connection->disconnect;

$runningTime = time - $runningTime;
printf("\n\nTotal running time: %02d:%02d:%02d\n\n", int($runningTime / 3600),   int(($runningTime % 3600) / 60), int($runningTime % 60));

# exit the script
exit; 
```

**Python代码**

```
import re
import mysql.connector
import time

file = open("D:\catalina2.txt","r")
rexp = re.compile('^(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2},\d{3}) (\[.*\]) (.*) (\S*) (\(.*\)) - (.*)$')
conn = mysql.connector.connect(user='root',host='localhost',database='logs')
cursor = conn.cursor()

tic = time.clock()

increment  = 1
for text in file.readlines():
    match = rexp.match(text)
    increment +=  1
cursor.execute('insert into logs (line_number,dated, time_stamp, thread,level,logger,user,message ) values (%s,%s,%s,%s,%s,%s,%s,%s)', (increment, match.group(1), match.group(2),match.group(3),match.group(4),match.group(5),match.group(6),match.group(7)))

conn.commit()
cursor.close()
conn.close()

toc = time.clock()
print "Total time: %s" % (toc - tic) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T01:25:37.157

这不是一个公平的比较：

你只`cursor.execute`在 Python 中调用一次：

```
for text in file.readlines():
    match = rexp.match(text)
    increment +=  1
cursor.execute('insert into logs (line_number,dated, time_stamp, thread,level,logger,user,message ) values (%s,%s,%s,%s,%s,%s,%s,%s)', (increment, match.group(1), match.group(2),match.group(3),match.group(4),match.group(5),match.group(6),match.group(7))) 
```

但是您`$statement->execute`在 Perl 中多次调用：

```
while (<LOG>) {
    my ($date, $time, $thread, $level, $logger, $user, $message) = /^(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2},\d{3}) (\[.*\]) (.*) (\S*) (\(.*\)) - (.*)$/;

    $statement->execute(1, $date, $time, $thread, $level, $logger, $user, $message);
} 
```

* * *

顺便说一句，对于 Python 版本，`cursor.execute`每行调用一次会很慢。您可以使用以下方法使其更快`cursor.executemany`：

```
sql = 'insert into logs (line_number,dated, time_stamp, thread,level,logger,user,message ) values (%s,%s,%s,%s,%s,%s,%s,%s)'
args = []
for text in file:
    match = rexp.match(text)
    increment +=  1
    args.append([increment] + list(match.groups()))

cursor.executemany(sql, args) 
```

如果日志文件中有太多行，您可能需要将其分解为块：

```
args = []
for text in file:
    match = rexp.match(text)
    increment +=  1
    args.append([increment] + list(match.groups()))
    if increment % 1000 == 0:
        cursor.executemany(sql, args)
        args = []
if args:
    cursor.executemany(sql, args) 
```

（另外，不要使用`file.readlines()`，因为这会创建一个列表（可能很大）。`file`是一个迭代器，一次吐出一行，所以`for text in file`就足够了。）

# php - 按下回车键后自动填充文本字段

> ID：13327773
> 
> 赞同：1
> 
> 时间：2012-11-11T01:20:47.480
> 
> 标签：php, ajax

我有一个有用的教程，如果你输入“id”[或你的 id 的前 1-2 个字母]，表单字段的其余部分将通过从 mysql 数据库中提取数据自动填充。不按 ENTER 键就会发生这种情况！现在，我要做的是，我将输入完整的“id”并按 ENTER 键来填写表单的其余字段！下面的代码需要什么修改？这是我的 index.html 文件：

```
<html> 
    <body> 
        <script language="javascript" type="text/javascript">

        function ajaxFunction(){ 
    var http;  // The variable that makes Ajax possible! 

    try{ 
        // Opera 8.0+, Firefox, Safari 
        http = new XMLHttpRequest(); 
    } catch (e){ 
        // Internet Explorer Browsers 
        try{ 
            http = new ActiveXObject("Msxml2.XMLHTTP"); 
        } catch (e) { 
            try{ 
                http = new ActiveXObject("Microsoft.XMLHTTP"); 
            } catch (e){ 
                // Something went wrong 
                alert("Your browser broke!"); 
                return false; 
            } 
        }
    }

    var url = "getagentids.php?param=";
                var idValue = document.getElementById("agid").value;
                var myRandom = parseInt(Math.random()*99999999);  // cache buster
                http.open("GET", "getagentids.php?param=" + escape(idValue) + "&rand=" + myRandom, true);
                http.onreadystatechange = handleHttpResponse;
                http.send(null);
         function handleHttpResponse() {
                    if (http.readyState == 4) {
                        results = http.responseText.split(",");
                        document.getElementById('agfn').value = results[0];
                        document.getElementById('agsal').value = results[1];
                        document.getElementById('agtel').value = results[2];
                        document.getElementById('agid').value = results[3];
                    }
                } 
    }
</script> 

        <form name="schform">
            <table>
                <tr>
                    <td>Contact ID:</td>
                    <td><input id="agid" type="text"
                               name="contactid" onKeyUp="ajaxFunction()"></td>
                </tr>
                <tr>
                    <td>Tel Number:</td>
                    <td><input id="agtel" type="text"
                               name="contacttel"></td>
                </tr>
                <tr>
                    <td>Name:</td>
                    <td><input id="agfn" type="text"
                               name="contactfullname"></td>
                </tr>
                <tr>
                    <td>Salutation:</td>
                    <td><input id="agsal" type="text"
                               name="contactsalutation"></td>
                </tr>
                <tr>
                    <td><input type="reset" value="Clear"></td>
                    <td></td>
                </tr>
            </table>
        </form>

    </body> 
</html> 
```

这是我的 getagentids.php 文件：

```
<?php

error_reporting(0); // turns off error reporting

$con = mysql_connect("localhost", "root", "");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("contactdetail", $con);

 mysql_select_db("contactdetail");

 $param=$_GET['param']; 

if (strlen($param) > 0) {
    $result = mysql_query("SELECT * FROM contact 
     WHERE contactid LIKE '$param%'");
    if (mysql_num_rows($result) == 1) {
        while ($myrow = mysql_fetch_array($result)) {
            $agentname = $myrow["contactfullname"];
            $agenttel = $myrow["contacttel"];
            $agentsal = $myrow["contactsalutation"];
            $agentid = $myrow["contactid"];
            $textout .= $agentid . ", " . $agentname . ", " . $agenttel . ", " . $agentsal;
        }
    } else {
        $textout = " , , ," . $param;
    }
}
echo $textout;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:35:45.683

首先创建一个javascript函数来检测是否按下了Enter键并`ajaxFunction`在其中调用：

```
function run(e) {
    if (e.keyCode == 13) {
       ajaxFunction();
       return false; //disable the default Enter behavior 
    }
    return true;
} 
```

`onKeyUp="ajaxFunction()"`将联系人 ID 文本输入中的呼叫更改为`onKeyUp="run()"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:58:37.047

您可以更改您的`ajaxFunction`喜欢（只需将代码粘贴到您的顶部`ajaxFunction`）

```
function ajaxFunction(e){
    var e=e || window.event;
    var keycode=e.which || e.keyCode;
    if(keycode!==13 || (e.target||e.srcElement).value=='') return false;
   // rest of your code
}​ 
```

并用这个改变你`onKeyUp`的（参数中的通知`event`）

```
<input id="agid" type="text" name="contactid" onKeyUp="ajaxFunction(event)">​ 
```

[**只是为了一个想法**](http://jsfiddle.net/heera/xnVpe/2/)。

# jquery - jQuery getJSON 可排序回调

> ID：13327779
> 
> 赞同：2
> 
> 时间：2012-11-11T01:21:39.600
> 
> 标签：jquery, coldfusion, jquery-ui-sortable, getjson

我正在通过一个教程来实现一个可排序的列表，但我无法判断 json 是否正在加载。Firebug 和 Firequery 有没有办法查看它是否被调用或者它是否是一个错误的地址？我看不到任何错误。我的 html 和 Coldfusion 一起：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<link rel="stylesheet" href="../css/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

<script type="text/javascript">
$(function() {
$sortable = $("#sortable").sortable({
  update: function(event, ui){
    updateOrder();
  }
}).disableSelection();

function updateOrder(){  
  $.getJSON(
    'remote.cfc?wsdl',
    { 
      method : 'updateOrder', 
      key: '<cfoutput>#session.ajaxkey#</cfoutput>',
      orderedList: $sortable.sortable('toArray').toString(),
      returnformat: 'json', 
      queryformat: 'column',          
    },
    callback
  );
}
});

function callback(json){
if ( json.RESULT )
{
  $('#serverresult').text( "Order updated to: " + json.NEWORDER );
}
else
{
  $('#serverresult').text( "Something went wrong!" );
}
}
</script>
</head>

<body>

<body>
<h1>Menu List</h1>

       <cfquery name="rsSort" datasource="#DataSource#">
SELECT * FROM `test-sort` ORDER by Sort 
</cfquery>

<div class="demo">
<ul id="sortable">
<cfoutput>
<cfloop query="rsSort">
<li id="id_#ID#">#Title# #ID#</li>

</cfloop>
</cfoutput>
</ul>
<div id="serverresult">
</div>
</div>

</body>
</html> 
```

被调用的文件：

```
<cfcomponent output="false" hint="I respond to AJAX requests">

<cffunction name="updateOrder" output="false" access="remote">
<cfargument name="orderedList" required="true" type="string">
<cfargument name="key" required="true" type="string">

<cfset var ndx = "">
<cfset var id = 0>
<cfset var position = 0>
<cfset var updatedids = "">
<cfset var result = {result="false"}>

<!--- do a basic security check --->
<cfif isAllowed( arguments.key )>

  <!--- Prevent race conditions --->
  <cflock name="updateOrder" timeout="60">
    <cftransaction>
      <cfloop list="#arguments.orderedList#" index="ndx">

        <cfset id = Val( ListLast( ndx, "_" ) )>
        <cfset position = position+1>
        <cfset updatedids = ListAppend( updatedids, id )>

        <cfquery datasource="#DataSource#">
          update `test-sort` set
            Sort = <cfqueryparam value="#position#" cfsqltype="cf_sql_integer">
          where 
          id = <cfqueryparam value="#id#" cfsqltype="cf_sql_integer">
        </cfquery>

      </cfloop>

      <!--- delete any items not in the list --->
      <cfquery datasource="#DataSource#">
        delete from `test-sort`
        where id not in ( <cfqueryparam value="#updatedids#"  cfsqltype="cf_sql_integer" list="true"> )
      </cfquery>

    </cftransaction>
  </cflock>

  <cfset result = {result="true", neworder=updatedids, position=position }>

</cfif>

<cfreturn result>
</cffunction>

<cffunction name="isAllowed" output="false" access="private" returntype="boolean">
<cfargument name="key" required="true">
<cfset var result = false>
<!--- check that request is coming from the same browser that created the session --->
<cfif IsDefined( "session.ajaxkey" ) AND ( session.ajaxkey eq arguments.key )>
  <cfset result = true>
</cfif>
<cfreturn result>
</cffunction>

</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:03:37.750

您几乎肯定不希望 ?wsdl 在您的 ajaxing 到的 URL 中。这只会返回您的 CFC 的 WSDL XML。希望 Firebug 会显示出来。您还可以使用[Fiddler](http://fiddler2.com/)调试网络流量（适用于所有浏览器）

您可能还需要在 cffunction 中设置 returnformat="JSON" 以使 CF 将您返回的结构转换为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:26:11.497

使用`?wsdl`对我有用，我认为你的回调中的第一行应该是：

`var JSON=jQuery.parseJSON(json);`

然后在这个函数中使用 JSON 而不是 json。

# vb.net - 使用 PrintDocument 打印 ComboBox 的所有项目

> ID：13327790
> 
> 赞同：0
> 
> 时间：2012-11-11T01:23:04.730
> 
> 标签：vb.net, winforms, visual-studio-2010, printdocument

我正在尝试打印程序中组合框的所有内容，编号。

**ComboBox1 内容：**

```
Yes

No

Maybe

No Opinion 
```

到目前为止，我的 PrintDocument1 代码：

```
Private Sub PrintDocument1_PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
    Dim horizontalPrintPosition As Single
    Dim verticalPrintPosition As Single
    Dim PrintFont As New Font("Arial", 12)
    e.Graphics.DrawString("Info from ComboBox1 would go here", PrintFont, Brushes.Black, horizontalPrintPosition, verticalPrintPosition)
End Sub 
```

例如，所需的输出将是：

```
1\. Yes

2\. No

3\. Maybe

4\. No Opinion 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:40:51.847

您将需要遍历`ComboBox`Items 集合以获取您的值，如下所示。

```
Private Sub PrintDocument1_PrintPage(sender As System.Object, e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
    Dim horizontalPrintPosition As Single
    Dim verticalPrintPosition As Single
    Dim PrintFont As New Font("Arial", 12)

    For x = 0 To ComboBox1.Items.Count - 1
        e.Graphics.DrawString((x + 1).ToString() & ". " & ComboBox1.Items(x).ToString(), PrintFont, Brushes.Black, horizontalPrintPosition, verticalPrintPosition)
        verticalPrintPosition += PrintFont.Height
    Next

End Sub 
```

# websharper - 使用 Websharper 的实时客户端-服务器交互

> ID：13327792
> 
> 赞同：3
> 
> 时间：2012-11-11T01:23:25.497
> 
> 标签：websharper

我只是在学习 Websharper，但在短期内，我有一个要解决的业务问题。我编写了一个服务器和基于 WPF 的客户端，它允许用户使用滑块等控件改变输入并实时从服务器获取反馈（即没有“提交”按钮）。

我想使用 Websharper 将此桌面 GUI 应用程序转换为 Web 应用程序。如何对由用户滑动和滑块触发的服务器进行后台请求响应，并在网页中异步可视化反馈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:21:42.863

我想最明显的方法是简单地为您的服务器端逻辑制作一堆`[<Rpc>]`-decorated 方法，然后在 UI 中的任何更改上简单地调用它们。IIRC，Websharper 透明地处理客户端-服务器转换，即如果您调用服务器方法，必要的代理将触发以获取结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:42:28.663

正如已经指出的那样，您可能会依赖 RPC 方法，但这可能会产生不可接受的延迟。

在 IntelliFactory，我们现在正在开发一个项目，该项目需要服务器和客户端之间的异步双向和低延迟通信。我们最终使用了 WebSocket 协议。我们计划尽快将代码记录并发布到一个可重用的库中，供有类似需求的人使用。

就我们的目的而言，WebSocket 协议的主要优点是它允许在连接的服务器端维护状态。我们的服务器是在 Windows Azure 中运行的工作角色。服务器是在建立 WebSocket 连接时由 Azure 负载均衡器随机选择的，客户端在连接打开时与同一台服务器通信。这允许维护昂贵的初始化服务器上​​的每个连接状态。

WebSocket 协议的缺点是缺乏旧浏览器的支持。一种可移植的低延迟替代方案是 SignalR，它使用某种形式的 HTTP 轮询来模拟旧浏览器上的功能。不幸的是，到目前为止，我们未能使 SignalR 适应我们对 Azure 的要求。这在理论上应该是可能的，但由于 AFAIK SignalR 遵循几乎无状态的设计，因此需要编写一个路由器来重定向消息并“撤消”Azure 负载均衡器的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T08:25:54.280

我不知道 WebSharper 的集成点，但 Rx 有许多很好的概念和功能，用于功能性和反应性事件处理，如节流（需要滑块和异步网络调用）。

[https://github.com/Reactive-Extensions/RxJS](https://github.com/Reactive-Extensions/RxJS) https://github.com/panesofglass/FSharp.Reactive

# cordova - Backbone - Url 的哈希在方向更改时变为空

> ID：13327798
> 
> 赞同：0
> 
> 时间：2012-11-11T01:25:35.270
> 
> 标签：cordova, jquery-mobile, backbone.js, requirejs, orientation-changes

我正在使用 jQuery Mobile、Backbone 和 RequireJS 开发一个 Phonegap 移动应用程序。我配置了 jQM 让 Backbone 管理路由。

每当我更改设备的方向时，似乎整个布局都会再次呈现（第一秒左右，我只能看到纯文本，没有 jQM 视觉增强和分页，当应用程序开始执行时会发生这种情况好）它会转到第一页，即使正在显示另一个页面。有人遇到过同样的问题吗？

编辑：

jQM 没有增强布局，因为它是在正文之前由 RequireJS 异步加载的，但是，为什么在方向更改时会发生这种情况？jQM 已经加载到 DOM 中，我是否误解了 RequireJS 的工作流程？有没有办法在加载正文之前用 RequireJS 加载一些库？如果没有，我最终会同步加载 jQuery、jQM 和 jQM 配置文件。

关于路由的事情，我还没有找到任何东西，假设它与 Backbone 路由器无法正确处理 url 哈希有关。

编辑2：

不知何故，每当我旋转设备时，url 的哈希值就会变为空。这样，应用程序就会转到第一页。在下面找到 jQM 的配置文件的内容：

```
define(['jquery'], function ($) {
  $(document).on("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;

    $.mobile.defaultDialogTransition = "none";
    $.mobile.defaultPageTransition = "slidedown";
  });
}); 
```

# android - 在不刷新的情况下关闭android中的几个但不是所有的活动

> ID：13327805
> 
> 赞同：0
> 
> 时间：2012-11-11T01:26:52.653
> 
> 标签：android

如何在不刷新目标（已经在运行）活动的情况下关闭上面运行的几个活动（但不是全部）？

示例：我有正在运行的活动：1 2 3 4 5，我想从活动 5 以及活动 3 和 4 中关闭。这应该给我活动 2，但我不希望刷新活动 2，因为它是可滚动的列表，我希望它保持与单击它时相同的位置。在这种情况下，我想要一些东西，如果你点击三下后退按钮，它会做同样的工作。

谢谢

# jquery - 从任何输入中禁用 datatpicker 字段，但保留 onClick 事件

> ID：13327806
> 
> 赞同：0
> 
> 时间：2012-11-11T01:27:21.933
> 
> 标签：jquery, asp.net-mvc

我正在使用 jQuery Datapicker 输入日期

```
<div style="display: inline-block;"><input data-val="true" data-val-date="The field Date of Birthday must be a date." data-val-required="The Date of Birthday field is required." id="Individual_DOB" name="Individual.DOB" type="text" value="1/1/0001 12:00:00 AM" /></div> 
```

我需要的是禁用键盘输入到该字段，但要保持 onClick 事件能够显示日历。

有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:34:20.210

对于 jQuery 方法，只需使用：

```
$("#Individual_DOB").keypress(function(){
    return false;
});​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是一个功能[小提琴](http://jsfiddle.net/8Ws57/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T01:34:08.697

asp.net mvc:

```
@Html.TextBoxFor(x => x.Birthday, new { @readonly = "readonly" } ) 
```

.

html输入：

```
<input type="textbox" readonly="readonly" /> 
```

# python - 在 python 中处理大量查询参数

> ID：13327807
> 
> 赞同：2
> 
> 时间：2012-11-11T01:27:55.053
> 
> 标签：python, design-patterns

我们有一个使用大约 50 到 100 个查询参数的 api。当前，处理程序获取所有参数并将它们设置为 Meta 对象中的属性。像这样的东西

```
meta = Meta()
meta.param1 = param.get('param1', 'somedefault')
meta.param2 = param.get('param2', 'someotherdefault') 
```

等等。我的问题是，有没有更好的方法来处理这个问题，而不仅仅是处理程序中的一个冗长的分配列表？我目前的想法是将它分解成一个辅助函数。

```
meta = self.get_meta(param) 
```

还有其他想法吗？

（更新了我的例子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:30:29.150

```
PARAMETERS = [
    'param1',
    'param2',
    # ...
]

meta = Meta()
for name in PARAMETERS:
    setattr(meta, name, param[name]) 
```

根据您的评论...

```
DEFAULTS = {
    'param1': 1,
    'param2': 'something',
}
meta = Meta()
for name, value in DEFAULTS.items():
    setattr(meta, name, param.get(name, value)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:30:16.050

这似乎是您应该使用映射来做的事情。除非您需要过滤参数，否则这听起来是个坏主意。

所以你会有这样的东西：

```
class Meta(IterableUserDict):
    pass

meta = Meta()
meta.update(param) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:55:40.517

扩展所说的内容，包括默认值

```
PARAMETERS = [
    ('param1', "default"),
    ('param2', "default2"),
    # ...
]

meta = Meta()
for name, default in PARAMETERS:
    setattr(meta, name, param.get(name, default)) 
```

# microsoft-metro - 如何在 Windows 应用商店应用程序中包含多个初始屏幕分辨率图像

> ID：13327809
> 
> 赞同：1
> 
> 时间：2012-11-11T01:28:25.350
> 
> 标签：microsoft-metro, winrt-xaml, windows-store-apps

如何在 Windows 应用商店应用程序中包含多种分辨率的初始屏幕图像？我查看了文档，但在提供不同的屏幕分辨率图像时找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:35:37.057

Doh，终于能够找到描述包括多个资源文件的页面。看：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx)
[http://msdn.microsoft.com/en-us/library/windows/apps/hh465262.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465262.aspx)
[http:// msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

长话短说，您需要使用给定的比例工厂命名文件：

...\test.scale-100.jpg
\test.scale-140.jpg
\test.scale-180.jpg

闪屏分辨率为：

100%：620x300
140%：868x420
180%：1116x540

# vba - vba：使用数组中的文本从 selection.find 返回页码

> ID：13327813
> 
> 赞同：6
> 
> 时间：2012-11-11T01:30:03.053
> 
> 标签：vba, ms-word

（注：解决方法见下文。）

我一直在尝试从使用 VBA 的 word 文档中的各种标题所在的页面中检索页码。我当前的代码返回 2 或 3，而不是正确关联的页码，具体取决于我在主 Sub 中使用它的位置和方式。

```
astrHeadings = docSource.GetCrossReferenceItems(wdRefTypeHeading)

For Each hds In astrHeadings
        docSource.Activate
        With Selection.Find
            .Text = Trim$(hds)
            .Forward = True
            MsgBox hds & ":" & Selection.Information(wdActiveEndPageNumber), vbOKOnly
        End With
        Selection.Find.Execute
Next 
```

`docSource`是我设置的一个测试文档，其中 10 个标题超过 3 页。我从`getCrossReferenceItems`稍后在我的代码中使用的方法中检索了标题。

我正在尝试遍历该`getCrossReferenceItems`方法的结果，并在 Find 对象中使用它们，`docSource`并由此确定结果在哪个页面上。然后在我的代码中稍后将在字符串中使用页码。这个字符串加上页码将被添加到在我的主子开头创建的另一个文档中，除此代码段外，其他所有内容都可以处理。

理想情况下，我需要这个段做的是用每个 Find 结果中的相关页码填充第二个数组。

**解决的问题**

谢谢凯文，你在这里提供了很大的帮助，我现在正是从 this 的输出中得到了我需要的东西`Sub`。

docSource 是一个测试文档，我设置了 10 个标题超过 3 页。docOutline 是一个新文档，它将充当目录文档。

我不得不`Sub`在 Word 的内置 TOC 功能上使用它，因为：

1.  我有多个文档要包含，我可以使用该`RD`字段来包含这些但是

2.  我有另一个`Sub`在每个文档 0.0.0 （chapter.section.page 代表）中生成自定义十进制页码，为了使整个文档包有意义，需要将其作为页码包含在 TOC 中。可能还有另一种方法可以做到这一点，但我对 Word 的内置功能一无所知。

这将成为我的页码中包含的功能`Sub`。我目前完成这个小项目的 3/4，最后一个季度应该很简单。

**修订和清理最终代码**

```
Public Sub CreateOutline()
' from http://stackoverflow.com/questions/274814/getting-the-headings-from-a-word-document
    Dim docOutline As Word.Document
    Dim docSource As Word.Document
    Dim rng As Word.Range
    Dim strFootNum() As Integer
    Dim astrHeadings As Variant
    Dim strText As String
    Dim intLevel As Integer
    Dim intItem As Integer
    Dim minLevel As Integer
    Dim tabStops As Variant

    Set docSource = ActiveDocument
    Set docOutline = Documents.Add

    minLevel = 5  'levels above this value won't be copied.

    ' Content returns only the
    ' main body of the document, not
    ' the headers and footer.
    Set rng = docOutline.Content
    astrHeadings = docSource.GetCrossReferenceItems(wdRefTypeHeading)

    docSource.Select
    ReDim strFootNum(0 To UBound(astrHeadings))
    For i = 1 To UBound(astrHeadings)
        With Selection.Find
            .Text = Trim(astrHeadings(i))
            .Wrap = wdFindContinue
        End With

        If Selection.Find.Execute = True Then
            strFootNum(i) = Selection.Information(wdActiveEndPageNumber)
        Else
            MsgBox "No selection found", vbOKOnly
        End If
        Selection.Move
    Next

    docOutline.Select

    With Selection.Paragraphs.tabStops
        '.Add Position:=InchesToPoints(2), Alignment:=wdAlignTabLeft
        .Add Position:=InchesToPoints(6), Alignment:=wdAlignTabRight, Leader:=wdTabLeaderDots
    End With

    For intItem = LBound(astrHeadings) To UBound(astrHeadings)
        ' Get the text and the level.
        ' strText = Trim$(astrHeadings(intItem))
        intLevel = GetLevel(CStr(astrHeadings(intItem)))
        ' Test which heading is selected and indent accordingly
        If intLevel <= minLevel Then
                If intLevel = "1" Then
                    strText = " " & Trim$(astrHeadings(intItem)) & vbTab & "1" & "." & "2" & "." & strFootNum(intItem) & vbCr
                End If
                If intLevel = "2" Then
                    strText = "   " & Trim$(astrHeadings(intItem)) & vbTab & "1" & "." & "2" & "." & strFootNum(intItem) & vbCr
                End If
                If intLevel = "3" Then
                    strText = "      " & Trim$(astrHeadings(intItem)) & vbTab & "1" & "." & "2" & "." & strFootNum(intItem) & vbCr
                End If
                If intLevel = "4" Then
                    strText = "         " & Trim$(astrHeadings(intItem)) & vbTab & "1" & "." & "2" & "." & strFootNum(intItem) & vbCr
                End If
                If intLevel = "5" Then
                    strText = "            " & Trim$(astrHeadings(intItem)) & vbTab & "1" & "." & "2" & "." & strFootNum(intItem) & vbCr
                End If
            ' Add the text to the document.
            rng.InsertAfter strText & vbLf
            docOutline.SelectAllEditableRanges
            ' tab stop to set at 15.24 cm
            'With Selection.Paragraphs.tabStops
            '    .Add Position:=InchesToPoints(6), _
            '    Leader:=wdTabLeaderDots, Alignment:=wdAlignTabRight
            '    .Add Position:=InchesToPoints(2), Alignment:=wdAlignTabCenter
            'End With
            rng.Collapse wdCollapseEnd
        End If
    Next intItem
End Sub

Private Function GetLevel(strItem As String) As Integer
    ' from http://stackoverflow.com/questions/274814/getting-the-headings-from-a-word-document
    ' Return the heading level of a header from the
    ' array returned by Word.

    ' The number of leading spaces indicates the
    ' outline level (2 spaces per level: H1 has
    ' 0 spaces, H2 has 2 spaces, H3 has 4 spaces.

    Dim strTemp As String
    Dim strOriginal As String
    Dim intDiff As Integer

    ' Get rid of all trailing spaces.
    strOriginal = RTrim$(strItem)

    ' Trim leading spaces, and then compare with
    ' the original.
    strTemp = LTrim$(strOriginal)

    ' Subtract to find the number of
    ' leading spaces in the original string.
    intDiff = Len(strOriginal) - Len(strTemp)
    GetLevel = (intDiff / 2) + 1
End Function 
```

此代码现在正在生成（根据我在 test-doc.docx 中找到的标题规范，它应该是什么）：

```
This is heading one                  1.2.1
  This is heading two                1.2.1
    This is heading two.one          1.2.1
    This is heading two.three        1.2.1
This is heading one.two              1.2.2
     This is heading three           1.2.2
        This is heading four         1.2.2
           This is heading five      1.2.2
           This is heading five.one  1.2.3
           This is heading five.two  1.2.3 
```

除此之外，我还通过使用and语句而不是 using解决了`ActiveDocument`切换问题 。`docSource.select``docOutline.Select``.Active`

再次感谢凯文，非常感谢:-)

菲尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T03:15:02.013

它看起来`Selection.Information(wdActiveEndPageNumber)`符合要求，尽管它目前在您的代码的错误点。在执行 find 后放置这一行，如下所示：

```
For Each hds In astrHeadings
    docSource.Activate
    With Selection.Find
        .Text = Trim$(hds)
        .Forward = True
    End With
    Selection.Find.Execute
    MsgBox hds & ":" & Selection.Information(wdActiveEndPageNumber), vbOKOnly
Next 
```

**新问题的补充：**

当您设置 strFooter 值时，您可以`ReDim`在应该使用时调整数组的大小`ReDim Preserve`：

```
ReDim Preserve strFootNum(1 To UBound(astrHeadings)) 
```

但是，除非在有问题`UBound(astrHeadings)`的循环期间发生变化，否则`For`最好将`ReDim`语句拉到循环之外：

```
ReDim strFootNum(0 To UBound(astrHeadings))
For i = 0 To UBound(astrHeadings)
    With Selection.Find
        .Text = Trim(astrHeadings(i))
        .Wrap = wdFindContinue
    End With

    If Selection.Find.Execute = True Then
        strFootNum(i) = Selection.Information(wdActiveEndPageNumber)
    Else
        strFootNum(i) = 0 'Or whatever you want to do if it's not found'
    End If
    Selection.Move  
Next 
```

作为参考，该`ReDim`语句将数组中的所有项目设置回 0，而`ReDim Preserve`在调整数组大小之前保留数组中的所有数据。

还要注意`Selection.Move`和`.Wrap = wdFindContinue`行 - 我认为这些是我之前建议的问题的根源。选择将设置为最后一页，因为除了第一次运行之外，该查找没有包含在任何运行中。

# cakephp-2.0 - 查看错误 CakePHP UploadPack 插件

> ID：13327814
> 
> 赞同：0
> 
> 时间：2012-11-11T01:30:06.657
> 
> 标签：cakephp-2.0

我正在使用 CakePHP 的 UploadPlugin (https://github.com/szajbus/uploadpack)。如文档所述，存储图像很顺利，当尝试使用帮助程序查看图像时问题就出现了：

**致命错误错误：调用非对象上的成员函数 image()**

代码：

```
<?php echo $upload->image($entry['User']['id'], 'User.avatar') ?> 
```

助手已正确加载到控制器中。案例可能有什么问题？谢谢

更新：

我的助手包括如下：

```
public $helpers = array('Form', 'UploadPack.Upload'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:31:59.413

我遇到过同样的问题。我能够通过执行以下操作来修复它：

```
echo $this->upload->image($MODELNAME, 'MODEL.avatar'); 
```

# qt - 如何防止在 QLineEdit 焦点上绘制默认蓝色边框

> ID：13327818
> 
> 赞同：10
> 
> 时间：2012-11-11T01:30:52.057
> 
> 标签：qt, focus, border, qlineedit, qtstylesheets

我正在尝试通过 CSS 实现无边界 QLineEdit。当 QLineEdit 不在焦点时，它工作正常，但在焦点时，默认的蓝色边框总是出现。我正在使用的简单 CSS：

```
QLineEdit, QLineEdit:focus { border: none; } 
```

我已经尝试通过 CSS 使用不同的背景颜色来获得焦点和不聚焦，它可以工作，但我无法在聚焦时移除蓝色边框。只是为了通知，我正在使用Mac。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T03:35:18.077

您可以通过设置摆脱焦点边框：

```
QLineEdit.setAttribute(Qt::WA_MacShowFocusRect, 0) 
```

阅读文档，还有很多其他 Mac 特定设置 [WidgetAttribute-enum](http://qt-project.org/doc/qt-4.8/qt.html#WidgetAttribute-enum)

也有一个类似的问题 [参考这个问题](https://stackoverflow.com/questions/1987546/qt4-stylesheets-and-focus-rect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T08:20:20.703

也许也喜欢这样：

```
ui->treeView->setAttribute(Qt::WA_MacShowFocusRect, 0); 
```

参考：[http ://doc.qt.digia.com/4.6/demos-interview-main-cpp.html](http://doc.qt.digia.com/4.6/demos-interview-main-cpp.html)

# genetic-algorithm - 使用遗传算法求解数独

> ID：13327819
> 
> 赞同：9
> 
> 时间：2012-11-11T01:31:30.370
> 
> 标签：genetic-algorithm, sudoku

我承担了使用遗传算法创建数独求解器的任务。

**初始化**：将给定值存储在每个染色体中，然后随机生成值，使得每一行都是值 1 到 9 的有效排列。

**适合度**：由每行、列和方格中的“不合适”值的数量相加确定。

**健身功能**：典型的轮盘选择

**选择**：随机，但使用轮盘赌轮盘加权。

**Crossover**：从两个父母中随机选择不同的行，创建一个孩子。（我还实现了一个交叉，一次从两个父母中随机选择 3 行 - 以保持良好的迷你网格）。以下是两个示例子项，每个子项来自每个交叉方法：

```
Parent 1 row 1
Parent 2 row 2
Parent 1 row 3
Parent 2 row 4
Parent 1 row 5
Parent 2 row 6
Parent 2 row 7
Parent 1 row 8
Parent 1 row 9

Parent 1 row 1
Parent 1 row 2
Parent 1 row 3
Parent 2 row 4
Parent 2 row 5
Parent 2 row 6
Parent 1 row 7
Parent 1 row 8
Parent 1 row 9 
```

**突变**：最初我只是在两个随机位置交换值，但这实际上使算法变得更糟，因为它在行中引入了重复，这些行是有效的排列。所以我改变了突变（当突变的机会在 25% - 50% 范围内时，这似乎表现最好）随机选择一行，然后随机化该行的顺序（将给定值保留在正确的位置） .

我还尝试了一个突变，它选择一个随机行，然后在该行中选择两个随机（非给定）位置并交换它们，但这也使性能变得更糟。（与两个随机位置的交换不同，我不明白为什么这种突变会使性能变得如此糟糕，但是随机化整行的突变会使性能更好）

我的算法还没有解决任何困难的难题。它经常会接近（在只有 6 到 10 个冲突的范围内），但它永远无法找到解决方案（它可能会找到局部最小值并卡住）。

为了改进算法，我添加了用完全随机的板替换大部分人口（表现最差的染色体）的能力，但这似乎影响很小。

我的方法有哪些弱点？我怎样才能提高性能？

与交叉相比，数独似乎可以从突变中获得更好的性能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T11:13:27.480

我用 GA 解决了一些数独难题，使用这种方法： http: [//fendrich.se/blog/2010/05/05/solving-sudoku-with-genetic-algorithms/](http://fendrich.se/blog/2010/05/05/solving-sudoku-with-genetic-algorithms/)

数独有很多错误的局部最小值，因此保持种群多样性非常重要。不要过于贪婪地收敛。这是许多难题的关键。收敛极慢。

我不喜欢轮盘赌选择。它是一种收敛过快、过于依赖适应度函数的玩具。例如，您可以使用锦标赛选择。

我同意交叉应用很难。您可以将其视为一种大突变，恰好是一个交叉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:38:25.483

我所知道的以编程方式解决 soduko 的最佳策略是使用[布尔可满足性问题](http://en.wikipedia.org/wiki/SAT_solver#Algorithms_for_solving_SAT)

# c++ - Windows 上的模板有哪些问题？有哪些解决方案？

> ID：13327820
> 
> 赞同：0
> 
> 时间：2012-11-11T01:31:57.403
> 
> 标签：c++, windows, templates, dll

我在 Linux 上，并尝试编写跨平台代码。我知道模板很难在 Windows 上正确使用，但我不记得具体细节。

我确实知道一个问题与模板调试和跨 dll 边界的模板有关，但与如何解决它无关——或者是否有可能解决问题。

我相信还有其他问题，但我只发现对它们的模糊引用。

那么：Windows 上的 C++ 模板有哪些问题？除了不使用模板，还有什么解决办法？

* * *

**编辑：**也许问题只出在`STL`, 而不是一般的模板？

两个引用：

> 您无法在 Windows 上跨库边界公开 STL 调用而不会感到头疼。

和

> 封装是必须的，我已经在 dll 边界上使用 stl 容器以及 windows 上的静态库完成了一些项目，没有封装就无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:36:42.573

> 我知道模板很难在 Windows 上正确使用。

我从来没有听说过这样的事情。听起来像毫无根据的[FUD](http://en.wikipedia.org/wiki/Fear,_uncertainty_and_doubt)，我建议你完全忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:46:37.670

这是一个[来自 MS KB](http://support.microsoft.com/default.aspx?scid=KB;EN-US;168958)的问题（**编辑：**这个问题只适用于 MSVC 5 和 6；我无意支持这样一个古老的编译器，所以它与我无关）：

> 一些 STL 类包含嵌套类。这些类无法导出。例如，deque 包含一个嵌套类 deque::iterator。如果你导出 deque，你会得到一个警告，你必须导出 deque::iterator。如果您导出 deque::iterator，您会收到必须导出 deque 的警告。这是由于模板类一旦实例化就不能重新实例化和导出的设计限制造成的。目前唯一可以导出的 STL 容器是 vector。其他容器（即map、set、queue、list、deque）都包含嵌套类，不能导出。

# django - modelform 的多个实例

> ID：13327821
> 
> 赞同：0
> 
> 时间：2012-11-11T01:32:35.690
> 
> 标签：django, view, modelform

我的模板中有一个列表。对于列表中的每个项目，我都有一个包含复选框的 {{ modelform }}。我可以选中该框，它会按应有的方式更新。问题是，当我选中一个项目的复选框并提交时，它会提交所有复选框，因为它们在每个实例中都是相同的。有没有办法为列表中的每个项目设置一个唯一的复选框实例？

当前每个模型表单复选框呈现如下：

```
<input name="is_solution" type="checkbox" class="is_solution" id="is_solution"> 
```

我也尝试过使用

```
test = request.POST.get('checkbox') 
```

和

```
test = request.POST.get('checkbox') 
```

认为使用它我可能能够在我的视图中发布更新。我想我做错了这一切，我迷路了。从本质上讲，我想在一个列表上有一个复选框，就像 stackexchange 上的这里一样，您可以在其中确认答案。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:48:35.590

您必须在视图中使用表单的前缀，例如（每个表单对象都是唯一的）：

```
def foo(request, ...):
    objs = Model.objects.filter(...)
    forms = []
    for i, obj in enumerate(objs):
        form = ModelForm(instance=obj, prefix=str(i))
        forms.append(form)
    ... 
```

这将确保每个表单都有唯一的标识符，因此您将能够提交特定的表单。

您可以像往常一样在模板中呈现表单：

```
<form ...>
{% csrf_token %}
{% for form in forms %}
    {{ form }}
{% endfor %}
</form> 
```

# c++ - 在伪随机数生成中使用整个列表

> ID：13327822
> 
> 赞同：0
> 
> 时间：2012-11-11T01:32:57.820
> 
> 标签：c++, algorithm, list, random

> **可能的重复：**
> [集合的伪随机遍历](https://stackoverflow.com/questions/11765703/psuedo-random-traversal-of-a-set)

我正在尝试编写一种算法，将播放列表中的歌曲按随机顺序排列，所以如果有 10 首歌曲，我需要随机数生成器在重复之前命中 0-9 的每个值。使用算法： ，有没有办法用 a和`x_current = (a * x_prev + c) mod m`的某些值来实现这一点？`c``m`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:35:34.310

尝试使用[`std::random_shuffle`](http://www.cplusplus.com/reference/algorithm/random_shuffle/)

```
 vector<int> playOrder;    

  // set some values:
  for (int i=1; i<10; ++i) playOrder.push_back(i); // 1 2 3 4 5 6 7 8 9

  // Don't forget to seed, or mix will be the same each run
  srand(time(NULL)); 

  // using built-in random generator:
  random_shuffle ( playOrder.begin(), playOrder.end() );

  // An example of how you might use the new random array.
  for(int i=0; i<playOrder.size(); i++)
    player.PlayTrack(playOrder[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:35:06.287

看看[这个问题](https://stackoverflow.com/questions/11765703/psuedo-random-traversal-of-a-set)。此外，对于小型播放列表，只需用歌曲编号随机排列数组就足够了。

# scala - 通过继承更新不可变数据结构

> ID：13327823
> 
> 赞同：2
> 
> 时间：2012-11-11T01:33:06.543
> 
> 标签：scala, immutability, scalaz, subtyping, lenses

我正在制作一个战略游戏，我尝试应用我学到的东西，尝试使用不可变的数据。在我的游戏中我有单位，这些单位可以有不同的特殊功能。例如，某些飞机可以隐藏自己。我搜索的是一种能够做某种事情的方法

```
abstract class Units {
val life:Int
}

trait Hidable { self: Units => 
val hided:Boolean
def hide:Units with Hidable= ....
} 
```

无需复制粘贴：

```
def hide = copy(hided=true) 
```

在每个混合 Hidable 的案例类上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:26:49.610

更新不可变数据结构的一种常用方法是使用[镜头](http://www.haskellforall.com/2012/01/haskell-for-mainstream-programmers_28.html)。有一个[编译器插件](https://github.com/gseitz/Lensed)可以为您的代码生成镜头，尽管它不是很适合生产。它也仅适用于旧的 scalaz。

这是一个[相关的问题](https://stackoverflow.com/questions/3900307/cleaner-way-to-update-nested-structures)。

# ruby-on-rails - Rails：如何实现帖子查看次数？

> ID：13327824
> 
> 赞同：4
> 
> 时间：2012-11-11T01:33:27.043
> 
> 标签：ruby-on-rails, ruby, database, post, views

**有什么问题？：**

我正在创建一个通用博客，并致力于创建基本功能。问题是视图（有多少人看过特定帖子）没有正确显示。

**最新技术：** .

此时我有两个控制器/模型：发布和评论。我将为您提供我的架构，以帮助您更好地了解情况。

```
create_table "comments", :force => true do |t|
t.string   "name"
t.text     "body"
t.integer  "like"
t.integer  "hate"
t.integer  "post_id"
t.datetime "created_at", :null => false
t.datetime "updated_at", :null => false
end

add_index "comments", ["post_id"], :name => "index_comments_on_post_id"

create_table "posts", :force => true do |t|
t.string   "name"
t.text     "content"
t.integer  "view"
t.integer  "like"
t.integer  "hate"
t.datetime "created_at", :null => false
t.datetime "updated_at", :null => false
end 
```

**我所做的：** 在帖子控制器中，每当有人创建帖子时，我尝试通过将其设置为 0 来初始化视图。

```
# POST /posts
# POST /posts.json
def create
@post = Post.new(params[:post])
@view = @post.view
@view = 0

respond_to do |format|
  if @post.save
    format.html { redirect_to posts_path, notice: 'success.' }
    format.json { render json: @post, status: :created, location: @post }
    @view = @post.view
    @view = 0
  else
    format.html { render action: "new" }
    format.json { render json: @post.errors, status: :unprocessable_entity }
  end

end 
```

并且帖子应该能够显示其观看次数。所以在 post 的 show.html.erb 文件中，我也添加了下面的部分。 `<p> <b>views:</b> <%= @post.view %> </p>`

**它是如何工作** 的：根本没有显示视图数量。我检查了数据库，即使每当用户添加帖子时我尝试将其初始化为 0，该列也是空白的。我猜我尝试访问“视图”变量的方式有问题？**通过@view = @post.view**访问它是不是不对 ？

 **我知道我必须考虑一个已经看过帖子的用户是否重新访问，但在我确切知道如何访问视图变量/初始化/增加它之前，我还没有到那里。

*非常感谢您提前提供的帮助！*

*-最大限度*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:40:24.993

*在调用 @post.save之前*将 Post 的 view 属性初始化为零（作为 if 语句的副作用）：

```
@post.view = 0 
```

然后在呈现帖子的控制器操作中，您需要将帖子的视图属性更新 1。如果多个人在数据库读取和写入之间同时访问该页面，这将出现问题，但它至少会让您进入正确的方向。

保存数据库*后将*`@view`此处的值分配给什么也没做。**

# javascript - 如何在从另一帧触发的一帧中捕获 onload 事件

> ID：13327825
> 
> 赞同：1
> 
> 时间：2012-11-11T01:33:46.057
> 
> 标签：javascript

我有一个有两个框架的框架。上框架通过更改其位置属性将文档重新加载到下框架中。我需要在上框架中捕获在下框架中触发的 onload 事件。
此代码不起作用，但也没有产生错误：

```
//this script runs in frames[0]
top.frames[1].location = "test.htm";
top.frames[1].onload = function( ) { alert('Thanks!'); }; 
```

test,htm 加载在下框架中，但没有出现警报。
最简单的方法是什么？
谢谢！

# html - 左浮动表格和居中对齐表格

> ID：13327828
> 
> 赞同：-1
> 
> 时间：2012-11-11T01:34:09.600
> 
> 标签：html, css, css-float, text-align

我有一个浮动到页面左侧的表单。在同一行是一个应该以 text-align 样式居中的表格。为什么它偏离中心？我如何让它保持在中间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:40:11.873

text-align 是将文本和图像居中，如果您需要表格居中添加到父 div：`margin:0px auto;`

例如：

```
table_wrap_div {width:200px; margin: 0px auto;} 
```

# c# - 获取作用在身体上的力

> ID：13327830
> 
> 赞同：1
> 
> 时间：2012-11-11T01:34:28.120
> 
> 标签：c#, xna, farseer

由于我正在构建物理教学平台，因此我需要知道此刻作用在物体上的总力。这样，我可以画出箭头来显示这种合力，让学生了解正在发生的事情。

我挖掘了 Farseer 的源代码，发现了**内部 Vector2 变量*Force***。由于它是内部的，我无法从我的教学平台访问它，因为它们位于不同的组件中。

如果我将修饰符更改为私有，并为其添加一个 getter 函数，会发生什么不好的事情吗？

或者

有没有更好的方法来获得当前作用在物体上的合力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:40:54.413

由于您似乎可以访问源代码，因此公开该变量的最简单方法是将公共 getter 添加到它所在的类中。该类的实例将有权访问内部变量。

**编辑**：（添加代码示例）

这完全是关于访问内部值的代码存在的位置。希望下面的示例将为您说明这一点。假设您有一个包含两个项目的解决方案，一个名为 ExternalAssembly，另一个名为 MyApplication。MyApplication 具有对 ExternalAssembly 的引用以访问其类。

项目：外部装配

```
namespace ExternalAssembly
{
    public class MyClass 
    {
        internal string hiddenString;

        public MyClass() 
        {
            this.hiddenString = "This is my value.";
        }

        public string Exposed
        {
            get { return this.hiddenString; }
        }
    }

    public class MyClass2
    {
        private MyClass classInstance;

        public MyClass2()
        {
            this.classInstance = new MyClass();
        }

        public string Exposed2 
        {
            get { return this.classInstance.hiddenString; }
        }
    }
} 
```

项目：我的应用程序

```
namespace MyApplication
{
    using ExternalAssembly;

    public class CallInternalTest() 
    {
        MyClass classInstance = new MyClass();
        MyClass2 class2Instance = new MyClass2();

        // this will fail since hiddenString is an internal variable
        Console.WriteLine(classInstance.hiddenString);

        // this will succeed since Exposed is a public member
        Console.WriteLine(classInstance.Exposed);

        // this will also succeed since Exposed2 is a public member
        Console.WriteLine(class2Instance.Exposed2);
    }
} 
```

# entity-framework-4.1 - 运行存储过程时超时

> ID：13327832
> 
> 赞同：0
> 
> 时间：2012-11-11T01:34:53.627
> 
> 标签：entity-framework-4.1, timeout, settimeout

我想在 EF 中运行一个存储过程。我首先将过程添加到模型中并设置返回值。生成此代码：

```
public ObjectResult<Report3> SPSelectReport3(global::System.String stringWhereParameter, Nullable<global::System.Int32> pageIndex, Nullable<global::System.Int32> pageSize)
{
    ObjectParameter stringWhereParameterParameter;
    if (stringWhereParameter != null)
    {
        stringWhereParameterParameter = new ObjectParameter("StringWhereParameter", stringWhereParameter);
    }
    else
    {
        stringWhereParameterParameter = new ObjectParameter("StringWhereParameter", typeof(global::System.String));
    }

    ObjectParameter pageIndexParameter;
    if (pageIndex.HasValue)
    {
        pageIndexParameter = new ObjectParameter("PageIndex", pageIndex);
    }
    else
    {
        pageIndexParameter = new ObjectParameter("PageIndex", typeof(global::System.Int32));
    }

    ObjectParameter pageSizeParameter;
    if (pageSize.HasValue)
    {
        pageSizeParameter = new ObjectParameter("PageSize", pageSize);
    }
    else
    {
        pageSizeParameter = new ObjectParameter("PageSize", typeof(global::System.Int32));
    }
    // ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 999999;
    return base.ExecuteFunction<Report3>("SPSelectReport3", stringWhereParameterParameter, pageIndexParameter, pageSizeParameter);
}
/// <summary>
/// No Metadata Documentation available.
/// </summary>
/// <param name="mergeOption"></param>
/// <param name="stringWhereParameter">No Metadata Documentation available.</param>
/// <param name="pageIndex">No Metadata Documentation available.</param>
/// <param name="pageSize">No Metadata Documentation available.</param>
public ObjectResult<Report3> SPSelectReport3(global::System.String stringWhereParameter, Nullable<global::System.Int32> pageIndex, Nullable<global::System.Int32> pageSize, MergeOption mergeOption)
{
    ObjectParameter stringWhereParameterParameter;
    if (stringWhereParameter != null)
    {
        stringWhereParameterParameter = new ObjectParameter("StringWhereParameter", stringWhereParameter);
    }
    else
    {
        stringWhereParameterParameter = new ObjectParameter("StringWhereParameter", typeof(global::System.String));
    }

    ObjectParameter pageIndexParameter;
    if (pageIndex.HasValue)
    {
        pageIndexParameter = new ObjectParameter("PageIndex", pageIndex);
    }
    else
    {
        pageIndexParameter = new ObjectParameter("PageIndex", typeof(global::System.Int32));
    }

    ObjectParameter pageSizeParameter;
    if (pageSize.HasValue)
    {
        pageSizeParameter = new ObjectParameter("PageSize", pageSize);
    }
    else
    {
        pageSizeParameter = new ObjectParameter("PageSize", typeof(global::System.Int32));
    }

    //  ((IObjectContextAdapter)).ObjectContext.CommandTimeout = 180;
    return base.ExecuteFunction<Report3>("SPSelectReport3", mergeOption, stringWhereParameterParameter, pageIndexParameter, pageSizeParameter);
} 
```

但是当我运行代码时，我得到一个超时错误。如何在此代码中设置超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:20:05.693

使用 ObjectContext 的 CommandTimeout 属性

例如

```
using (var db = new MyEFEntities())
{
     string whereClause = "Id = 12345";
     db.CommandTimeout = 180; //in seconds, ideally use a value from your config file e.g. Convert.ToInt32(ConfigurationManager.AppSettings["DbCommandTimeout"]);
     var retval = db.SPSelectReport3(whereClause);
     //do something here with results
} 
```

# jquery - CSS/Jquery 固定页眉 + 更改

> ID：13327837
> 
> 赞同：0
> 
> 时间：2012-11-11T01:35:21.487
> 
> 标签：jquery, css, header, scroll, fixed

我想达到这个[效果](http://www.yoda.ro/)

请注意，当您向下滚动时，标题如何保持固定但也会发生一些变化。我怎样才能做到这一点？

我知道如何使用 CSS 来做到这一点，但想为标题添加更多样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T01:55:35.773

只需查看页面的来源：

```
$(window).scroll(function(){
    if ( $('div.wrapper').width() >= 660 ) {
        if ( $(this).scrollTop() > pos.top+header.height() && header.hasClass('default') ) {
            header.fadeOut('fast', function(){
                $(this).removeClass('default').addClass('scrolling').fadeIn('fast');
            });
        } else if ( $(this).scrollTop() <= pos.top+header.height() && header.hasClass('scrolling') ) {
            header.fadeOut('fast', function(){
                $(this).removeClass('scrolling').addClass('default').fadeIn('fast');
            });
        }
    }
});​ 
```

`.default`有一个滚动监听器，当事件发生时 - 菜单的类在和之间切换`.scrolling`

# java - 使用 GDate 计算日期之间的时间段

> ID：13327845
> 
> 赞同：-5
> 
> 时间：2012-11-11T01:36:19.457
> 
> 标签：java, date, xmlbeans

我是 java 新手，想知道如何按照[JavaDocs](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/GDate.html)`GDate`的规定使用。

*   任何人都可以举一个简单的例子来计算两个日期之间的时间段`GDate`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:49:32.983

> ..我需要在程序开始时导入任何东西吗？

是的，`org.apache.xmlbeans.GDate`

> 如何声明一个对象？

```
GDate gDate = new GDate(/* See JavaDocs for constructors */); 
```

有关构造函数，请参阅[JavaDocs](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/GDate.html#constructor_summary)。

# javascript - 谷歌地图异步加载街景

> ID：13327847
> 
> 赞同：0
> 
> 时间：2012-11-11T01:36:36.393
> 
> 标签：javascript, jquery, google-maps-api-3, asynchronous, bind

标记打开时有什么方法可以获取事件吗？在地图中，我有大约两千个标记，每个标记在信息框中都有自己的街景。街景在google api中有源，所以页面加载太慢（一瞬间加载了2000多张街景图片）。有这样的东西（异步加载）？

```
$(window).bind('eventWhenMarkerWasOpened', function(){
   $('#infowindow').append('<img src="here is path to streetview google api" />');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:00:29.273

信息框有一个 domready-event 应该是扩展信息框内容的好地方：

```
google.maps.event.addListener(infoboxObject, 
                              'domready', 
                               function(){/*do something*/}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:49:42.387

使用 FusionTableLayers 代替普通标记怎么样？FusionTables 使您能够快速加载大量标记，并且您可以使用一些 SQL。

```
var infoWnd, map;
function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(41.850033, -87.6500523),
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

  infoWnd = new google.maps.InfoWindow();

  var layer = new google.maps.FusionTablesLayer({
    query: {
      select: '\'Geocodable address\'',
      from: '1mZ53Z70NsChnBMm-qEYmSDOvLXgrreLTkQUvvg'
    },
    suppressInfoWindows : true
  });
  layer.setMap(map);

  google.maps.event.addListener(layer, "click", onLayerClicked);
}

function onLayerClicked(evt) {
  var imgUrl = "http://maps.googleapis.com/maps/api/streetview?" +
                "size=400x300&" +
                "sensor=false&" +
                "location=" + evt.latLng.toUrlValue();
  infoWnd.setPosition(evt.latLng);
  infoWnd.setContent("<img src='" + imgUrl + "'>");
  infoWnd.open(map);
  return false;
}

google.maps.event.addDomListener(window, "load", initialize); 
```

![在此处输入图像描述](../Images/d8258fb1ab121c8d04834e6a6530eb9f.png)

# r - Acinonyx 中的缩放和点选择

> ID：13327850
> 
> 赞同：0
> 
> 时间：2012-11-11T01:36:44.980
> 
> 标签：r, graphics, interactive

标准 R 图形对于大型数据集的交互式缩放不是特别方便。Qt 已经为新设备做了一些工作，但我还没有看到一个完整的工作示例（如果我错过了什么，请指点）。

这就是我遇到[Acinonyx](http://www.rforge.net/doc/packages/Acinonyx/html/00Index.html)的原因；它已经处于可用阶段，至少在 OSX 上是这样，并承诺快速和交互式显示。

遗憾的是，我找不到执行以下任务的示例：

*   通过鼠标交互放大和缩小

*   显示选定点的坐标

我很确定两者都是可能的/实现的，但目前文档非常薄弱。

**编辑：**在玩耍并浏览 iplot 的文档之后，似乎`command`and`ctrl`键可以满足我的要求。不过，更一般地说，是否有可能使用自定义按钮扩展 Acinonyx 的交互性？将鼠标悬停在绘图窗口的左上角时，会出现取决于绘图类型的按钮。我想为散点图创建一个新的，让用户选择一条曲线并用鼠标垂直移动它。

# css - 无法从外部样式表中设置 TD 元素的样式

> ID：13327853
> 
> 赞同：0
> 
> 时间：2012-11-11T01:37:00.377
> 
> 标签：css

我正在尝试将代码从使用内联 css 移植到使用样式表，因为我几乎是一个完全 css 菜鸟，所以我遇到了麻烦。

我移到外部的大多数东西都运行良好，但我似乎无法让 TD 元素使用样式表中定义的样式。这是一个例子：

```
<td class="text_right">...</td> 
```

```
.text_right {
text-align: right;
} 
```

为什么那行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:46:42.753

这应该可行，但请记住，您的`<td>`元素应该有一些尺寸，否则它将与内容一样宽。

检查[此](http://jsfiddle.net/JGMck/5/)演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:49:35.713

```
<td class="text_right"><a>...</a></td>    

.text_right {
text-align: right;
width: 300px;
} 
```

应该可以，把你的文字放在`<a>`标签里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:48:12.150

尝试使用 !important 。像这样 ;

```
.text_right {
text-align: right !important;
} 
```

如果您仍然看到它未对齐，请通过右键单击检查 css 中的元素覆盖规则（使用 chrome 或 opera）并进行调查

# c# - asp net MVC3提交回发时对象列表为空

> ID：13327861
> 
> 赞同：2
> 
> 时间：2012-11-11T01:38:35.447
> 
> 标签：c#, asp.net-mvc-3, list, null

我在我的项目之一中使用 asp net MVC 3。我使用部分视图进行编码。我想在列表中列出所有客户并将他们的信息作为列表提交。当我尝试在回传中提交我的列表时，它发送我的列表为空。您可以在下面找到我的代码：

我的控制器方法是：

```
[HttpPost]
    public ActionResult ConfirmUsers(ICollection<Career.DomainModel.UserApprovalDto> collection)
    {
        string bas = "";
        //if (collection != null)

        if (ModelState.IsValid)
        {
            bas = "bas";
        }

        return RedirectToAction("Index");
    } 
```

我的部分观点是：

```
@model List<Career.DomainModel.UserApprovalDto>
@using (Html.BeginForm("ConfirmUsers", "ManageUsers", new { area = "" }, FormMethod.Post))
{
    <table>
        <tr>
            <th>
                Name
            </th>
            <th>
                Is Reported
            </th>
        </tr>
        @for (int i = 0; i < Model.Count(); i++)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => Model[i].FirstName)
                </td>
                <td>
                    @Html.CheckBox("IsReported", Model[i].IsReported.HasValue ? Model[i].IsReported.Value : false)
                    @*@Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);*@ @*    @if (Model[i].IsReported != null)
                    {
                        @Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);
                    }
                    else
                    {
                        @Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);
                    }*@
                </td>
                <td>
                </td>
            </tr>
        }
    </table>
    <div>
        <input name="submitUsers" type="submit" value="Save" />
    </div>
} 
```

提前致谢。

凯雷姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:58:05.727

我会使用**编辑器模板**来处理这个问题。让您的 View Model 像这样来表示 CheckBox 项。

```
public class ReportedUserViewModel 
{
  public string FirstName { set;get;}
  public int Id { set;get;}
  public bool IsSelected { set;get;}
} 
```

现在在你的主视图模型中，添加一个属性，它是上述类的集合

```
public class ConfirmUserViewModel
{      
  public List<ReportedUserViewModel> ReportedUsers{ get; set; }      
  //Other Properties also here

  public ConfirmUserViewModel()
  {
    ReportedUsers=new List<ReportedUserViewModel>();       
  }    
} 
```

现在在您的`GET`操作中，您将填充 ViewModel 的值并将其发送到视图。

```
public ActionResult ConfirmUser()
{
    var vm = new ConfirmUserViewModel();

    //The below code is hardcoded for demo. you mat replace with DB data.
    vm.ReportedUsers.Add(new ReportedUserViewModel { Name = "Test1" , Id=1});
    vm.ReportedUsers.Add(new ReportedUserViewModel { Name = "Test2", Id=2 });

    return View(vm);
} 
```

现在让我们创建一个 EditorTemplate。转到并创建一个名为**EditorTemplate**`Views/YourControllerName`的文件夹，并在那里创建一个与 Property Name( )同名的新视图**`ReportedUsers.cshtml`**

 **将此代码添加到新创建的编辑器模板中。

```
@model ReportedUserViewModel 
<p>
  <b>@Model.FirstName </b>   :
  @Html.CheckBoxFor(x => x.IsSelected) <br />
  @Html.HiddenFor(x=>x.Id)
</p> 
```

`EditorFor`现在在您的主视图中，使用Html Helper 方法调用您的编辑器模板。

```
@model ConfirmUserViewModel
@using (Html.BeginForm())
{
    <div>  
      @Html.EditorFor(m=>m.ReportedUsers)         
    </div>    
    <input type="submit" value="Submit" />
} 
```

现在，当您发布表单时，您的模型将拥有Collection，其中 Selected Check 框的属性`ReportedUsers`值为 True 。`IsSelected`

```
[HttpPost]
public ActionResult AddAlert(ConfirmUserViewModel model)
{
   if(ModelState.IsValid)
   {
      //Check for model.ReportedUsers collection and Each items
      //  IsSelected property value.
      //Save and Redirect(PRG pattern)
   }
   return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:49:55.737

使用您编写的代码，MVC 模型绑定器机制不知道如何将这些输入映射到对象列表中。

改用这个小技巧：

`@Html.CheckBox("[" + i + "]." + "IsReported", Model[i].IsReported.Value);`

这将导致输入字段的名称为 [0].IsReported 用于列表中的第一项，[1].IsReported 用于下一项。

那应该行得通。

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T21:29:52.037

我参加聚会有点晚了，但是如果您将其嵌入模型中，只需参考该列表就很容易了-

```
@Html.CheckBoxFor(modelItem => Model.List[i].Selected) 
```

这将为迭代器中的每个项目回发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T17:26:47.910

我上周遇到了同样的问题。

当我从数据库中获取复选框时，我意识到复选框具有三个值（真/假/空），因为我在设计数据库时让复选框值可以为空。我重新设计了数据库，问题就解决了。

您没有发布模型，所以我不确定是否是这种情况。只需查看模型，如果它在 Ischeck 属性上方写入 Nullable，请转到数据库并重新设计。记住 isCheck，isSelected 属性必须只有两个值（真/假）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T17:57:26.820

@Html.CheckBox("[" + i + "]." + "IsReported", Model[i].IsReported.Value); 非常适合我。

确保您的 post 方法包含列表的参数。例如 public ActionResult Index(ConfigViewModel model, List configurationList)

在我的例子中，我有一个包含列表对象的视图模型（模型）。如果您在 post 方法中按原样指定视图模型，那么您将获得列表的空值（这里模型对象为空）。但是，如果您在操作中添加特定的列表参数（configurationList），那么您可以获得控制器中的所有列表值。**

# r - 在 ggplot 中绘制一个简单的时间序列。

> ID：13327862
> 
> 赞同：1
> 
> 时间：2012-11-11T01:38:40.360
> 
> 标签：r, ggplot2

我正在尝试使用`ggplot()`or绘制一个简单的时间序列`qplot()`。横轴是日期，纵轴是数字，简单的折线图就足够了。通常，在使用`ggplot()`. 但是，我坚持这一点：

```
net.t <- structure(c(6, 11, 0, -1, -13), .Names = c("2011-09-01", "2011-12-01", 
"2012-03-01", "2012-06-01", "2012-09-01"))

net.t.m <- melt(net.t,id="var")

#After melting 'net.t', it became a vector or array? how to plot that?

qplot(net.t.m,main="Net Promotion Score")+geom_smooth(se=F, size=1.5)
nps.t+labs(y="NPS",x="Year Quarter")+geom_text(aes(label =value),size = 3, vjust = -1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:41:23.563

你`net.t`只是一个向量，一旦你融化它，你就有一个只有一列的数据框。日期是行的名称，而不是条目的名称。一种解决方案是添加一列日期：

```
net.t.m$date <- as.Date(rownames(net.t.m))
ggplot(net.t.m, aes(x=date, y=value)) + geom_point() +
   geom_smooth(method="loess", se=F, size=1.5) +
   labs(y="NPS",x="Year Quarter") +
   geom_text(aes(label =value),size = 3, vjust = -1) 
```

# ruby-on-rails-3 - 进入关联的集合

> ID：13327863
> 
> 赞同：0
> 
> 时间：2012-11-11T01:38:57.677
> 
> 标签：ruby-on-rails-3

我有一个用户模型、事件模型和资产模型。

一个用户可以有多个事件。一个事件可以有多个资产（图像）

现在我要做的是在页面上显示一个（任何）事件图像。目前我有以下。

控制器

```
@user = current_user  
@events = @user.events 
```

看法

```
<% @events.each do |e| %>
  <li>
  <% if e.assets.nil? %> 
    <%= image_tag("img36.jpg" , :size => "280x230") %>
  <% else %>
  <%=image_tag e.assets.first.path.url %>   
  <% end %>
  <div class="bar">
  <strong class="heading"><%= e.name %></strong>
  <ul class="menu">
    <li><a class="time" title="Time" href="#"><%= e.date %></a></li>
    <li><a class="comments" title="Comments" href="#">53</a></li>
    <li><a class="favourites" title="Favourites" href="#">87</a></li>
    <li><a class="view" title="Views" href="#">242</a></li>
 </ul>
 </div>
 <p><%= e.description %><a href="#">more &raquo;</a></p>
 </li>
<% end %> 
```

“路径”是 assets 表中包含图像路径的字符串字段。我现在收到以下错误。

```
undefined method `path' for nil:NilClass 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:48:54.623

问题是当没有与事件关联的资产时， 的值`e.assets`将是一个空数组，而不是`nil`. 所以发生的事情是`e.assets`通过`nil?`条件，然后你取`e.assets.first`which is `nil`（因为数组是空的），然后你尝试调用`path`显然不起作用的那个。

要解决问题，只需更改：

```
<% if e.assets.nil? %> 
```

到：

```
<% if e.assets.empty? %> 
```

# django - 来自另一个数据库的 Django auth + userena + django_facebook

> ID：13327866
> 
> 赞同：0
> 
> 时间：2012-11-11T01:39:22.363
> 
> 标签：django, django-authentication, django-facebook

我有一个 Django 安装，使用 userena 和 django_facebook 工作得很好。我可以从另一个数据库（一个用于身份验证的数据库，另一个用于其他所有数据库）进行身份验证吗？问题是我正在处理的项目需要在服务器上的不同 Django 安装中进行相同的身份验证，其中一个完整的服务器用于数据库。我应该制作一个处理所有应用程序的数据库路由器还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:51:33.183

身份验证后端是您正在寻找的。Django 文档：[https ://docs.djangoproject.com/en/dev/topics/auth/#other-authentication-sources](https://docs.djangoproject.com/en/dev/topics/auth/#other-authentication-sources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:40:28.487

简单的数据库路由器通过常规的 Django 身份验证和 Userena 身份验证解决了这个问题。我猜这与 Facebook 相同，因为它们被链接在一起。唯一的缺点是管理面板的用户在所有站点中都是相同的。

# ios - 在设备上使用 UIAutomation 录制时，它会挂在 'Starting Capture...' 上。在模拟器上运行良好

> ID：13327885
> 
> 赞同：4
> 
> 时间：2012-11-11T01:42:14.083
> 
> 标签：ios, ios6, xcode4.5, ui-automation, ios-ui-automation

有没有其他人有这个问题？

我是 UIAutomation 的新手。我正在使用 Xcode4.5，试图在运行 ios6 的 iPad 3 上记录命令。当我单击录制按钮时，它只是挂在“开始捕获...”上。我最初在尝试在模拟器上运行时遇到了这个问题，并且能够使用它来解决它。sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer。似乎无法让它在我的设备上运行。是否需要以某种方式设置可访问性设置？我开启了多任务处理。

当我尝试运行脚本时，没有任何反应。没有错误或任何东西。完全被难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:04:16.610

确保应用程序是使用 Development Provisioning Profile 而不是 Ad-hoc 编译的。

# c++ - 服务器没有收到 UDP 数据包，花了几个小时试图找出问题所在

> ID：13327887
> 
> 赞同：0
> 
> 时间：2012-11-11T01:42:23.930
> 
> 标签：c++, network-programming, udp, winsock

所以对于我们的第一个任务，我们使用 TCP 制作了一个基本的 ftp 程序，现在我们必须修改它以使用 UDP，同时将它发送到一个路由器程序（我们无法修改，但有代码可以查看），它将随机丢弃和延迟数据包并使用简单的停止和等待协议进行处理。但这不是问题。

我使用实验室老师（http://www.cs.concordia.ca/~ste_mors/comp445/Assign2tutorial.ppt）的笔记修改了客户端和服务器以使用UDP，而我所做的只是发送一个数据包以及何时发送我在另一端收到它打印一行文本。我按照幻灯片中的说明，在本地主机上运行它（没有其他机器可以测试）并发送，路由器确认它接收并转发数据包，但服务器从不打印文本行。知道 UDP 丢包很多，我做了一个 while(true) 循环，永远发送数据包，服务器仍然什么都不做。

到目前为止的代码如下： 客户端：http: [//pastebin.com/XdbxuJ9R](http://pastebin.com/XdbxuJ9R) 服务器：[http](http://pastebin.com/iN5j2Ku3) : //pastebin.com/iN5j2Ku3 提供给我们的不可修改路由器：http: [//pastebin.com/QwMAc0MW](http://pastebin.com/QwMAc0MW)

对于客户端，我在连接从旧连接开始后留下了所有内容，发送行是 175，在服务器中，我注释掉了运行循环中的所有内容，除了第 181 行的接收部分

我要疯了，试图解决这个问题。我不得不取消计划并毁掉我的一整天，因为我无法让这件事发挥作用。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T07:34:54.130

据我所知，您使用了错误的端口。这是 router.h 定义的内容：

```
// router.h
#define ROUTER_PORT1 7000 //router port number 1
#define ROUTER_PORT2 7001 //router port number 2
#define PEER_PORT1 5000   //port number of peer host 1
#define PEER_PORT2 5001   //port number of peer host 2 
```

这就是您要定义的内容：

```
// client.cpp
#define REQUEST_PORT 0x5000 // hexadecimal, that's port 20480 
```

和

```
// server.cpp
#define REQUEST_PORT 0x5001 // hexadecimal, that's port 20481 
```

我没有检查其余代码，但在更正端口号后服务器似乎收到了一些东西（如删除`0x`前缀）

也许这将有助于说明路由器的工作原理：

```
// the router does (pseudocode):
recvfrom(7000), sendto(PEER2:5001)
recvfrom(7001), sendto(PEER1:5000) 
```

# objective-c - -[CCSprite setPosition:]: 消息发送到释放的实例，现在怎么办？

> ID：13327888
> 
> 赞同：0
> 
> 时间：2012-11-11T01:42:34.790
> 
> 标签：objective-c, cocos2d-iphone, box2d-iphone

我一直遇到一些导致我的游戏崩溃的错误问题。首先它只是给了我一个“BAD_ACCESS”，但是通过启用 Zombie 对象，调试器这样说：

**-[CCSprite setPosition:]：消息发送到释放的实例 xxxx**

当对象 A 和 B 发生碰撞时会发生崩溃，但前提是碰撞发生在对象 B 创建的同一时刻。

A 和 B 都应该在碰撞时被破坏，除了上述情况外，这工作得很好。我正在使用 Box2D 物有所值。

有没有办法以更具体的方式跟踪错误？就像是A还是B给我带来了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:50:55.010

如果您使用的是模拟器，请启用 MallocStackLogging 和 NSDebugEnabled。然后，当您收到此消息时，请记下违规对象的进程 ID 和内存地址。然后在您的终端中，使用`malloc_history <pid> <memory_address>`查看此地址的分配和解除分配的历史记录。它将为您提供每个 alloc 和 dealloc 的堆栈跟踪。最近的alloc 可能是您分配了一些您可能没有保留的地方，或者最近的dealloc 是您不小心将其dealloc 的地方。

以下是 malloc_history 的手册页：

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/malloc_history.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/malloc_history.1.html)

# c++ - 程序终止时 Instruments 不会捕获未删除的对象

> ID：13327897
> 
> 赞同：2
> 
> 时间：2012-11-11T01:46:57.713
> 
> 标签：c++, xcode, memory-leaks, instruments, xcode4.5

为了演示，我创建了这个简单的控制台应用程序：

```
#include <iostream>

class Person {
public:
    int mAge;
};

int main(int argc, const char * argv[])
{
    Person *iPerson = new Person();
    iPerson->mAge = 15;

    std::cout << "Age: " << iPerson->mAge;
    return 0;
} 
```

现在我知道 Valgrind 和 CPP Check 会在此处识别泄漏，但测试 Apple 的仪器时，当我分析此代码时，我看不到任何泄漏。尽管 iPerson 从未被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:20:42.533

我已经解决了：

*   我不得不将快照间隔设置为 1 秒。
*   我必须禁用（设置为无）发布版本的优化（已完成分析）。

然后根据贾斯汀的回复和[这个问题](https://stackoverflow.com/questions/3122617/memory-leak-checking-using-instruments-on-mac)，我不得不像这样修改我的代码：

```
#include <iostream>
#include <unistd.h>

class Person {
public:
    int mAge;
};

void CreateLeaks()
{
    // All three lines will generate a leak.
    Person *iPerson = new Person();
    iPerson = new Person();
    iPerson = new Person();
}

int main(int argc, const char * argv[])
{
    CreateLeaks();

    sleep( 2 );
    return 0;
} 
```

仍然有一些奇怪的事情发生。例如，如果您开始添加`sleep(2)`within `CreateLeaks`，则 Instruments 不会捕获所有泄漏（取决于您放置`sleep`命令的位置。奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:25:37.390

您可以从 Mac 开发人员库中[查看改进泄漏检测的技巧。](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html#//apple_ref/doc/uid/20001883-CJBJFIDD)

[C/C++ 代码的Cppcheck](http://cppcheck.sourceforge.net/)静态分析工具也可能有所帮助。对于您提供的示例，它发现：

```
#>cppcheck  so_code.cpp
Checking so_code.cpp...
[so_code.cpp:15]: (error) Memory leak: iPerson 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:55:54.183

Leaks Instrument 以预定义的频率执行快照。默认情况下，该值为“每 10 秒”。您的程序在 10 秒前完成。因此，泄漏永远不会被收集。因此，您必须在超出范围后暂停执行`iPerson`，以便检测到该泄漏。此外，如果您只是添加一段`sleep`时间，该指针仍然在堆栈或寄存器中被引用，那么它不会是泄漏。

# vb6 - 如何破解 .exe 应用程序？

> ID：13327900
> 
> 赞同：-1
> 
> 时间：2012-11-11T01:47:24.687
> 
> 标签：vb6

我需要基于现有应用程序创建应用程序。但是我们没有该现有应用程序的任何文档或源代码。所以，我想知道该应用程序是如何工作的。为此有什么办法可以破坏 .exe 应用程序? 看起来像是由VB创建的。只是我想看看程序，请告知有什么办法可以打破.exe应用程序并查看程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:04:37.683

你要找的基本上是一个反编译器。根据程序的编译方式，您可以恢复各种部分，但不一定是所有部分。

[此问题](https://stackoverflow.com/questions/414068/is-there-a-vb6-decompiler)的答案中有更多详细信息。

# ifstream - 从多个文件打印行

> ID：13327905
> 
> 赞同：0
> 
> 时间：2012-11-11T01:48:49.223
> 
> 标签：ifstream, getline

我试图打印每个文件的第一行，然后是每个文件的第二行，依此类推。
当 getline = EOF 时，该文件被关闭并且 filesAreOpen 被递减，尽管程序永远循环

```
void PrintLines(ifstream files[], size_t count)
{
    string s;   
    ifstream *end, *start;
    int filesAreOpen = count;

    //continue while filesAreOpen > 0
    while(filesAreOpen)
    {

    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:43:04.467

实际上，如果达到 EOF，您不必关闭文件。这将使您的代码管理起来更加缓慢和痛苦。因为你要检查它是否打开，这涉及到文件名。在这种情况下，文件已经打开，您将从每个文件中读取第一行，而不是从每个文件中读取第二行，依此类推。但是，如果一个文件达到 EOF，那么您当然会错过该文件并继续从其他文件中读取行。直到所有文件都到达 EOF。然后将它们全部关闭。

```
void PrintLines(ifstream files[], size_t count)
{

    int filesAreOpen = count;
    char line[250];

    //continue while filesAreOpen > 0
    while(filesAreOpen)
    {
      for(int i=0; i<count; i++)
      {
        if (!infile[i].eof())       
        {
          infile[i].getline(line,250);
          cout << line;
        }
            else
          filesAreOpen--;
      }
    }
            for(int i=0; i<count; i++)
      files[i].close();
} 
```

# linux - BASH：将字符串中的十六进制表示转换为等效的二进制

> ID：13327907
> 
> 赞同：0
> 
> 时间：2012-11-11T01:49:10.547
> 
> 标签：linux, bash, binary, hex

我想检查二进制文件是否与二进制模式匹配。

为此，我正在使用 clamAV 签名数据库

```
Exploit.HTML.ObjectType:3:*:3c6f626a65637420747970653d222f2f2f2f2f2f2f2f2f2f2f2f 
```

我对此进行编码以检索十六进制签名字符串

```
signature=$(echo "$line" |awk -F':' '{ print $4 }') 
```

此外，我想将十六进制字符串更改为二进制

```
tmp=$(echo -n $signature | sed 's/\([0-9A-F]\{2\}\)/\\\\\\x\1/gI' | xargs print) 
```

最后我想检查我的文件（ *$raw_file_path* ）是否与我的二进制模式匹配（现在在*$tmp*中）

```
test_var=$(cat $raw_file_path | grep -U -P "$tmp") 
```

我不知道为什么它不起作用。

如果你有任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:51:50.323

这个怎么样？

```
line=Exploit.HTML.ObjectType:3:*:3c6f626a65637420747970653d222f2f2f2f2f2f2f2f2f2f2f2f
printf $(sed 's/.*://;s/\(..\)/\\x\1/g' <<< "$line") 
```

产生：

```
<object type="//////////// 
```

您可以将 bin 输出放入变量中：

```
printf -v variable $(sed 's/.*://;s/\(..\)/\\x\1/g' <<< "$line") 
```

现在，请避免无用的使用`cat`！

```
grep -U "$variable" "$raw_file_path" 
```

足够。如果您想测试`grep`（并要求`grep`保持安静）的结果：

```
if grep -qU "$variable" "$raw_file_path"; then
    echo "Pattern found"
else
    echo "Pattern not found"
fi 
```

# google-drive-api - 简单 API 访问状态：突然 INACTIVE

> ID：13327909
> 
> 赞同：1
> 
> 时间：2012-11-11T01:49:28.347
> 
> 标签：google-drive-api

我正在开发具有备份到谷歌驱动器功能的 android 应用程序。我使用了简单的 API 访问密钥，它在几周内就像一个魅力。

但是，从昨天开始，它根本不起作用。（尝试上传新文件时无法列出上传的文件和 403 fobidden 错误）我检查了 Google API 控制台并发现

简单 API 访问状态：非活动

报告不可用，并不断显示弹出消息“发生意外错误。我们正在调查。”

我用谷歌搜索了这条消息，但没有解决方案。（但发现了几个与谷歌云 SQL 相关的问题）我正在考虑在商业级别的 android 应用程序上使用谷歌驱动器，这非常糟糕......我想知道问题是什么以及如何重新激活 api 状态。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:24:19.287

不幸的是，由于 Drive SDK 的安全模型，我们需要确保应用程序是他们所说的那样，简单的访问并不能提供足够的保证。对于商业应用程序，这种安全强度对用户来说非常有用。

对于解决方案，您需要使用[文档中概述的](https://developers.google.com/drive/integrate-android-ui)Google Play 服务。我们目前正在制定一个指南，以便在 Android 上快速入门，并且应该会在下周内提供。

# php - 这个登录系统功能是否需要替换我当前的任何代码，我应该将它放在哪里？

> ID：13327911
> 
> 赞同：0
> 
> 时间：2012-11-11T01:49:35.623
> 
> 标签：php, javascript, session, cookies

目前这是我的登录和注销系统的工作方式：

当用户登录时，它会将他们的详细信息存储在名为 member.php 的脚本中的 $_SESSION 中：

```
if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  } 
```

然后在每个脚本中，它包含下面的代码，其中 sessionlife 持续 12 小时：

```
 <?php

    ini_set('session.gc_maxlifetime',12*60*60);
    ini_set('session.gc_divisor', '1');
    ini_set('session.gc_probability', '1');
    ini_set('session.cookie_lifetime', '0');
    require_once 'init.php'; 

    session_start();

include(member.php)

    ?> 
```

init.php 如下：

```
 <?php
 session_save_path('Session'); 
 ?> 
```

现在在 12 小时后用户下次刷新页面时，由于会话将被销毁，它会进入注销页面：

```
if ((isset($username)) && (isset($userid))){
    session_destroy();
    echo "You have been Logged Out | <a href='./home.php'>Home</a>";
}

else {

    echo "You are Not Logged In";

} 
```

显然，如果用户单击注销页面，那么它会导航到上面的脚本。

但是我发现了一种更好的方法来保持用户的登录状态，并且让他们在他们自己注销之前不注销是使用下面的代码：

```
if (session_exists) continue();
else if (!session_exists AND cookie_exists AND validate_cookie()) {
    login_user_via_cookie();
    continue();
else show_login_page(); 
```

我的问题是，首先我将这段代码放在哪里，我是否用 session_maxlife 和我设置的所有 ini_set 代码替换它？我是否需要替换任何代码，是否需要更改上面找到的代码以使其在我的脚本中工作？（我的注销页面位于名为 Text4.php 的脚本中）

谢谢

**更新：**

teacherlogin.php 页面：

```
<?php
/*
file: login.php
authorized (logged in) users must be redirected to a secure page (member.php) or (secure.php)
unauthorized (guests) users have to see the login form
*/

#include the class file and start it.
require_once('session.class.php');
$session = new Session();

#check user's access
if($session->get("auth")) header("location:member.php");

ini_set('display_errors',1); 
error_reporting(E_ALL);

session_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

// connect to the database
include('member.php');
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

// required variables (make them explciit no need for foreach loop)
$teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
$teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
$loggedIn = false;
$active = true;

if ((isset($username)) && (isset($userid))){
echo "You are already Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a href='./menu.php'>Go to Menu</a> | <a href='./teacherlogout.php'>Logout</a>";
}
else{

if (isset($_POST['submit'])) {

$teacherpassword = md5(md5("g3f".$teacherpassword."rt4"));  

// don't use $mysqli->prepare here
$query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("ss",$teacherusername,$teacherpassword);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

while($stmt->fetch()) {
if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
if ($dbActive == 0) {
$loggedIn = false;
$active = false;
echo "You Must Activate Your Account from Email to Login";
}else {
$loggedIn = true;
$active = true;
$_SESSION['teacherid'] = $dbTeacherId;
$_SESSION['teacherusername'] = $dbTeacherUsername;
}
}
}

if ($loggedIn == true){
$_SESSION['teacherforename'] = $dbTeacherForename;
$_SESSION['teachersurname'] = $dbTeacherSurname;
header( 'Location: menu.php' ) ;
die();
}

if (!$loggedIn && $active && isset($_POST)) {
echo "<span style='color: red'>The Username or Password that you Entered is not Valid. Try Entering it Again</span>";
}

/* close statement */
$stmt->close();

/* close connection */
$mysqli->close();
}
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>Teacher Login</title>
<link rel="stylesheet" type="text/css" href="TeacherLoginStyle.css">
</head>
<body>

<?php
include('noscript.php');
?>

<h1>TEACHER LOGIN</h1>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" id="teachLoginForm">        
<p>Username</p><p><input type="text" name="teacherusername" /></p>      <!-- Enter Teacher Username-->
<p>Password</p><p><input type="password" name="teacherpassword" /></p>  <!-- Enter Teacher Password--> 
<p><input id="loginSubmit" type="submit" value="Login" name="submit" /></p>
</form>

<a href="./forgotpass.php">Forgot Password</a>

</body>

<?php

}

?>
</html> 
```

teacherlogout.php 页面：

```
<?php

require_once('session.class.php');
$session = new Session();

ini_set('display_errors',1); 
error_reporting(E_ALL);

session_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Menu</title>

<link rel="stylesheet" type="text/css" href="menu.css">

</head>

<?php

include('member.php');
include('noscript.php');

?>

<body>

<?php

if($session->get("auth")){
session_destroy();
echo "You have been Logged Out | <a href='./home.php'>Home</a>";
}

else {

echo "You are Not Logged In";

}

?>

</body>
</html> 
```

member.php 页面：

```
<?php

/*
file: secure.php, profile.php, member.php
authorized (logged in) users => log them out and show goodbye msg or send them to login.php
unauthorized (guests) users => redirect them to login.php
*/
require_once('session.class.php');
$session = new Session();

#if user is not logged in, he will be sent to the login.php page
#note the (!) sign before the $session, it means if the $session->get("auth") == false
if(!$session->get("auth")) header("location:teacherlogin.php");

#if user is not logged in, he will be sent to the login.php page
#note the (!) sign before the $session, it means if the $session->get("auth") == false
if(!$session->get("auth")) header("location:teacherlogin.php");

//need to the code below in order to store details of teacher that is logged in (needed for queries in other pages)

if (isset($_SESSION['teacherforename'])) {

$_SESSION['teacherforename'] = $_SESSION['teacherforename'];

}

if (isset($_SESSION['teachersurname'])) {

$_SESSION['teachersurname'] = $_SESSION['teachersurname'];

}

if (isset($_SESSION['teacherid'])) {

$userid = $_SESSION['teacherid'];

}

if (isset($_SESSION['teacherusername'])) {

$username = $_SESSION['teacherusername'];

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:00:48.570

如果需要，这是一个可以使用和编辑的类：

文件**session.class.php**

```
<?php
/*
Simple PHP Session Class:
    a simple class to help managing the Session function in
    php for beginners and it introduces them to OOP where
    they can modify it and add new features and extend its
    functionality (session in database, track users actions,etc)
*/
#Session settings.

#Session cookie lifetime at the user browser. (seconds)
ini_set('session.cookie_lifetime', '0');

#Read the functions reference below before you change these values.
ini_set('session.gc_maxlifetime',7200);# 2 hours.
ini_set('session.gc_probability', '1'); #default PHP value.
ini_set('session.gc_divisor', '100'); #default PHP value.

/*====================================================================

ini_set('session.cookie_lifetime', '0');

    User cookie life time in seconds.
    0 means the cookie wont expire until the user closes the broswer

ini_set('session.gc_maxlifetime',7200); #default: 1440 (24 mins).

    Session Garbage Collection cleaner (GC). 

    7200(seconds) equals to (2 hours): The GC will try to
    clean session data in the server for (users who logged
    out, closed the browser AND users who are inactive for
    more than that time) however the clean function does
    not run directly, read the next block for more explaination.

    PHP manual:
        session.gc_maxlifetime specifies the number of
        seconds after which data will be seen as 'garbage'
        and potentially cleaned up. Garbage collection may
        occur during session start
        (depending on session.gc_probability and session.gc_divisor).

ini_set('session.gc_probability', '1'); #default PHP value (1).
ini_set('session.gc_divisor', '100'); #default PHP value (100).

    Garbage Collection (GC) Settings:
    PHP manual:
        session.gc_divisor coupled with
        session.gc_probability defines the probability
        that the gc (garbage collection) process is started
        on every session initialization. The probability is
        calculated by using gc_probability/gc_divisor
        e.g. 1/100 means there is a 1% chance that the GC
        process starts on each request.
        session.gc_divisor defaults to 100\.  
====================================================================*/

/*
    HOW TO USE:
    - include the session file in all your files and call the session object
    require_once('session.class.php');
    $session = new Session();

    GET SESSION ID:
    - $session->sid;
      @return type (string)
      @example:
      echo $session->sid;

    GENEREATE NEW SESSION ID:
    - $session->re();
      @return type (string)
      #note: returns the value of the new session id.
      @example:
      $sid = $session->sid;
      $new_sid = $session->re();
      echo "My Session ID is: {$sid} but I got a new one now: {$new_sid};

    ASSIGN NEW SESSION VALUE:
    - $session->set($key,$value);
      @return type (void)
      @examples:
        $session->set("name","foo bar");
        $session->set("age",24);
        $session->set("auth",TRUE);

    GET SESSION VALUE:
    - $session->get($key);
      @return type (boolean, int, string, array).
      #note: returns FALSE if the value is not set
      @examples:
      echo $session->get("name");
      if($session->get("auth")) echo "hello authorized user!";

      if(($age = $session->get("age")) > 21)
      echo "your age is {$age}, you can drive!";

    DELETE SESSION VALUE:
    - $session->delete($key);
      @return type (void);
      @example
      $session->delete("age");

    DESTROY SESSION
    - $session->destroy();
      @return type (void);
*/
/*==================================================================*/
class Session{
    public $sid;
    public function __construct() {
        @session_start();
        $this->sid = session_id();
    }
    public function re(){
        @session_regenerate_id();
        $this->sid = session_id();
        return $this->sid;
    }
    public function set($key, $val) {
        $_SESSION[$key] = $val;
        return true;
    }

    public function get($key) {
        if ( isset($_SESSION[$key]) ) {
            return $_SESSION[$key];
        }

        return false;
    }

    public function delete($key) {
        unset($_SESSION[$key]);
    }

    public function destroy() {
        $_SESSION = array();
        session_destroy();
    }
}            
?> 
```

**文件：member.php**

```
<?php
    ini_set('display_errors',1); 
    error_reporting(E_ALL);

    /*
    file: secure.php, profile.php, member.php
    authorized (logged in) users => log them out and show goodbye msg or send them to login.php
    unauthorized (guests) users => redirect them to login.php
    */
    require_once('session.class.php');
    $session = new Session();

    #if user is not logged in, he will be sent to the login.php page
    #note the (!) sign before the $session, it means if the $session->get("auth") == false
    if(!$session->get("auth")) header("location:teacherlogin.php");

    echo "hello, you are logged in";
    echo "<br />";
    echo "username: ".$session->get("teacherusername");
    echo "<br />";
    echo "teacherid: ".$session->get("teacherid");
    echo "<br />";
    echo "active status: ".$session->get("active") ? "Active" : "Not Active";
    echo "<br />";
    echo "<a href='logout.php'>Log out</a>";

?> 
```

**文件：注销.php**

```
<?php
ini_set('display_errors',1); 
error_reporting(E_ALL);

require_once('session.class.php');
$session = new Session();

if($session->get("auth")){
    session_destroy();
    $msg = "You have been Logged Out | <a href='./home.php'>Home</a>";
}else{
    $msg = "You were not logged in, so you cant logout";
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Menu</title>

<link rel="stylesheet" type="text/css" href="menu.css">

</head>

<?php
include('noscript.php');
?>

<body>
    <?= $msg ? $msg : '' ?>
</body>
</html> 
```

**文件：login.php**

```
<?php
/*
file: login.php
authorized (logged in) users must be redirected to a secure page (member.php) or (secure.php)
unauthorized (guests) users have to see the login form
*/

#include the class file and start it.
require_once('session.class.php');
$session = new Session();

#check user's access
if($session->get("auth"))header("location:member.php");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

// connect to the database
@include('connect.php');
/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

// required variables (make them explciit no need for foreach loop)
if (isset($_POST['submit'])) {
    $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
    $teacherpassword = md5(md5("g3f".$_POST['teacherpassword']."rt4"));  

    // don't use $mysqli->prepare here
    $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

    while($stmt->fetch()) {
        if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
            if ($dbActive == 0) {
                $error = "You Must Activate Your Account from Email to Login";
            }else{
                $session->set('auth',TRUE);
                $session->set('active',TRUE);
                $session->set('teacherid',$dbTeacherId);
                $session->set('teacherusername',$dbTeacherUsername);
                header('Location: member.php') ;
            }
        }else{
            //password and username dont match
                $error = "The Username or Password that you Entered is not Valid. Try Entering it Again";
        }
    }

    /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
}
?> 
```

# javascript - HTML 表单问题/控制台日志

> ID：13327915
> 
> 赞同：0
> 
> 时间：2012-11-11T01:51:54.277
> 
> 标签：javascript, html, forms

控制台.log（值）；不记录任何内容，但左侧的数字在我每次单击时都会增加，这表明已进行了 console.log() 调用，只是没有显示我放入的内容。

另外，一个附带的问题是，如果 javascript 在不同的文件中，我该怎么做？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <title>Star Delete</title>
    <!--<script type="text/javascript" src="StarDelete.js"></script>-->
</head>
<body>OKAY DELETE STAR YES ;D!
        <form>
            <input type="text" id="formValueId" name="valueId"/>
            <input type="button" id="theButton"/>
        </form>
    <script type ="text/javascript">
    var button = document.getElementById("theButton"),
    value =  button.form.valueId.value;
    //value = document.getElementById("formValueId").value;
    button.onclick = function() {
            console.log(value);
    }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:04:24.557

[http://jsfiddle.net/3wjRJ/1/](http://jsfiddle.net/3wjRJ/1/)

```
var button = document.getElementById("theButton"),
value =  button.form.valueId.value; 
```

在这里，问题是您在首次加载 javascript 时声明了 value 变量，因此它始终为空白。

# android - 构建一个带有jar依赖的android库项目

> ID：13327917
> 
> 赞同：5
> 
> 时间：2012-11-11T01:52:15.633
> 
> 标签：android, ant, build, air, compilation

几天来我一直在努力解决一个问题，我不知道如何解决这个问题。我正在使用由 android sdk 提供的 Android 工具编译的 Android 库项目。在项目内部，我遵循一个 android 项目的标准结构（我的 jar 文件位于项目的 libs 目录中：

![在此处输入图像描述](../Images/d97f0b20d5128ba2d2036f08552bb7a8.png)

我发现当我使用 Ant 编译项目时：

```
<target name="compile-payment-lib" depends="prepare,init-profile">
    <delete file="../payment-lib/project.properties"/>
    <exec executable="${android.tool}" dir="../payment-lib" failonerror="true">
        <arg value="update"/>
        <arg value="lib-project"/>
        <arg value="-p"/>
        <arg value="${basedir}/../payment-lib"/>
        <arg value="-t"/>
        <arg value="${android.target.version}"/>
    </exec>
    <echo file="../payment-lib/project.properties" message="android.library=true" append="true"/>
    <ant dir="../payment-lib" target="release"/>
</target> 
```

它不包括 jar 文件，因此当我们尝试收集这些类并使用它们时，它会在运行时丢失引用。我正在使用最新版本的 android 工具 rev20 进行编译。

我试图解决这些参考的一些事情：

1.  解压 Jar 文件并将文件放入 bin 目录，然后将这些文件添加到我们的主 jar 文件中
2.  尝试将 jar 编译到 classes.dex 中（不知道如何在构建时使用此文件）
3.  尝试修改项目的类路径以包含库的 jar 文件

如果有人知道我可能做错了什么，请告诉我。

我应该提到的一件事是，这是一个特定项目与另一个项目一起使用，即实际应用程序项目。这个项目特别是一个带有 jar 依赖项的库项目。

另一件事是这是一个 Adob​​e Air 应用程序，在 android 中有一些本机扩展。因此，为了完成我们的任务，我们创建了一个带有主 jar 文件的 ANE，其中包含我们使用这样的 ant 任务的所有引用：

```
<target name="master-jar" depends="prepare">
    <delete dir="target/uber-jar" />
    <mkdir dir="target/uber-jar"/>

    <antcall target="expand-3rdparty-jars" />

    <jar destfile="${basedir}/target/master.jar">
        <fileset dir="../game/gamelobby/bin/classes" includes="**/*"/>
        <fileset dir="../payment-lib/bin/classes" includes="**/*" excludes="**/R*.class" />
        <fileset dir="../crosscell_ad_lib/bin/classes" includes="**/*" excludes="**/R*.class" />
        <fileset dir="src" includes="config/**/*"/>
        <fileset dir="${basedir}/target/uber-jar" includes="**/*"/>
    </jar>
</target> 
```

# android - Android上的Scala，一种服务器客户端架构

> ID：13327922
> 
> 赞同：1
> 
> 时间：2012-11-11T01:53:40.947
> 
> 标签：android, scala, networking, rpc

我正在用 Scala 创建一个游戏，我想知道如何巧妙地完成网络部分。我的游戏是一个战略游戏，由案例类的命令组成。

例如`Move(from:(Int,Int), to:(Int,Int)) extends Order`。

在多人游戏中，android 客户端应该从做出该动作的玩家那里收到一个带有 id 的订单，并发送他自己的动作。我想为每个客户端连接使用中央服务器。所以基本上，客户端应该能够登录服务器，发送足够的信息以在服务器上创建游戏，询问游戏列表，加入新游戏，还可以从服务器接收序列化数据, 和案例类。

我看到这`finagle`是一个不错的选择，我的问题是我在 Android 上使用 finagle 时遇到了一些问题，它只能在请求数据后才能接收数据，所以我必须每隔 x 执行一个“刷新”数据包以保持客户端更新。

# wpf - 带有嵌入式扩展器的自定义 ListViewItem

> ID：13327923
> 
> 赞同：0
> 
> 时间：2012-11-11T01:53:42.120
> 
> 标签：wpf, controltemplate, listviewitem, expander

我正在创建一个简单的文件浏览器，它的显示将模仿 Windows（7）资源管理器“内容”显示模式的显示。我设想了一个 ListView 控件，它的 ItemsSource 将绑定到 FileSystemInfo 对象的集合。每个 ListViewItem 都将显示文件名、上次修改日期/时间等。但是，我还希望它们有一个 Expander，当用户单击它时，它将垂直展开以显示文件的内容。

下面是我使用 Expression Blend 创建的 XAML 代码。这是我希望 ListViewItem 成为的通用模板。但是，扩展器不会导致边框的垂直高度扩展以匹配扩展器的网格内容所需的额外空间（在此示例中，高度为 500 的 ScrollViewer - 显然每个文件可能具有不同的尺寸，具体取决于内容-- 图像、纯文本等）。

那么，我在这里做错了什么？此外，我想知道 ListView 控件是否会通过使其 Item 元素垂直扩展/收缩而正常运行。

这是我希望用于 ListItemView 的 ControlTemplate：

```
<Border BorderBrush="Black" BorderThickness="1" Background="Beige">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.25*"/>
                <ColumnDefinition Width="0.50*"/>
                <ColumnDefinition Width="0.25*"/>
            </Grid.ColumnDefinitions>
            <Image Grid.RowSpan="2"/>
            <TextBlock Grid.Column="1" HorizontalAlignment="Left" TextWrapping="Wrap" Text="FileName" d:LayoutOverrides="Height" VerticalAlignment="Center"/>
            <TextBlock Grid.Column="1" Grid.Row="1" TextWrapping="Wrap" Text="FileType" d:LayoutOverrides="Width, Height" VerticalAlignment="Center"/>
            <TextBlock Grid.Column="2" TextWrapping="Wrap" Text="DateTime Last Modified" VerticalAlignment="Center" d:LayoutOverrides="Width" Grid.RowSpan="2" HorizontalAlignment="Center"/>
            <Expander Header="Expander" d:LayoutOverrides="Width" Grid.ColumnSpan="3" Grid.Row="2">
                <Grid>
                    <ScrollViewer Content="File Contents" Height="500"/>
                </Grid>
            </Expander>
        </Grid>
    </Border> 
```

# c++ - 防止类被释放

> ID：13327926
> 
> 赞同：4
> 
> 时间：2012-11-11T01:54:25.783
> 
> 标签：c++, c++11

我需要传递一个指向类的指针，所以我无法控制一些代码。这段代码完成后会自动释放（）指针，但我稍后需要这个类。我希望我可以创建一个“包装器”类，以防止该类被释放，而不会真正阻止代码访问它，但虚拟调用不起作用。

```
template <class T>
class PointerWrapper:public T
{
public:
    T* p;
    PointerWrapper(T *ptr)
    {
        p=ptr;
    }

    ~PointerWrapper(void)
    {
    }
    T* operator->() const
    {
        return p;
    }
    T& operator*() const
    {
        return *p;
    }
};

void codeIDontControl(Example *ex)
{
     ex->virtualfunction();
     delete ex;
}

void myCode()
{
    Example *ex=new Example();

    codeIDontControl(ex);
    do something with ex //doesn't work because ex has been freed

    codeIDontControl(new PointerWrapper<Example>(ex));
    do something with ex //ex hasn't been freed, but the changes made to it via 
    //    Example::virtualfunction() in codeIDontControl() aren't there anymore
} 
```

基本上，ex->virtualfunction() 调用的是 PointerWrapper 本身中的虚函数，而不是 PointerWrapper->p 中的虚函数。似乎它忽略了 -> 运算符？

现在，如果有不同的方法可以做到这一点，我不需要使用 PointerWrapper 类，但这是我能想到的全部......

我也不能修改示例，但我可以将其子类化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T02:27:23.687

您应该提供 Forwarder 类 - 它将虚拟调用重定向到存储的指针。释放转发器类不会导致释放指针。这种方法**不需要复制**（这可能很昂贵/可能没有实现/甚至没有意义）：

```
struct Forwarder : Example
{
    Example *impl;
    Forwarder(Example *i) : impl(i) {}
    void virtualfunction()
    {
        impl->virtualfunction();
    }
}; 
```

完整代码：

[现场演示](http://ideone.com/Ac3cS5)：

```
#include <iostream>
#include <ostream>

using namespace std;

struct Example
{
    virtual void virtualfunction()=0;
    virtual ~Example() {}
};

struct Implmenetation : Example
{
    bool alive;
    Implmenetation() : alive(true) {}
    void virtualfunction()
    {
        cout << "Implmenetation::virtualfunction alive=" << alive << endl;
    }
    ~Implmenetation()
    {
        alive=false;
        cout << "Implmenetation::~Implmenetation" << endl;
    }
};

struct Forwarder : Example
{
    Example *impl;
    Forwarder(Example *i) : impl(i) {}
    void virtualfunction()
    {
        impl->virtualfunction();
    }
};

void codeIDontControl(Example *ex)
{
     ex->virtualfunction();
     delete ex;
}

void myCode()
{
    Implmenetation impl;

    codeIDontControl(new Forwarder(&impl));
    //do something with ex //doesn't work because ex has been freed
    impl.virtualfunction();
}
int main()
{
    myCode();
} 
```

输出是：

```
Implmenetation::virtualfunction alive=1
Implmenetation::virtualfunction alive=1
Implmenetation::~Implmenetation 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T02:28:13.183

这是糟糕的设计，真的。应该只允许分配器释放内存。像这样的函数是危险的，因为它们带有悬空指针。

这只是我的想法，也许你可以尝试这样的事情？这不是一个安全的想法，但如果有人实施它，我很想知道会发生什么。

```
class Foo
{
  Foo(Foo* copy) : m_copy(copy) {}
  ~Foo() { if(m_copy) { *m_copy = *this; } } // Use copy constructor to create copy on destuction.

  Foo* m_copy;
}

Foo copy(NULL);
Foo* original = new Foo(&copy);
MethodThatDeletes(original);

// Original should be destroyed, and made a copy in the process.
original = NULL;

// Copy should be a copy of the original at it's last know state.
copy; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T02:11:47.727

您正在向 codeIDontControl 提供 Example*。PointerWrapper 上的重载 operator-> 是 PointerWrapper 类型而不是 Example* 类型甚至是 PointerWrapper* 类型（即该类型的值或引用而不是指向该类型的指针）。

由于您需要调用的函数不是由您控制的，因此您需要提供一个完整的包装器类型，作为您希望控制其生命周期的实例的包装器。

# iphone - 在 Corona SDK 中，如果应用程序暂停，如何隐藏组？

> ID：13327930
> 
> 赞同：4
> 
> 时间：2012-11-11T01:55:39.253
> 
> 标签：iphone, coronasdk

我正在构建一个文字游戏，我想在应用程序暂停时隐藏板？

代码看起来不错，但它给出了一个奇怪的行为！！，

当我暂停应用程序时，什么都不会发生，但是当我恢复应用程序时，董事会将隐藏！

```
local onSystem = function( event )
    if event.type == "applicationSuspend" then
       print("suspend")
       board_group.alpha = 0
    end
end
Runtime:addEventListener( "system", onSystem ) 
```

注意：您可能想知道我如何知道应用程序在挂起时的外观？答案是：按两次主页按钮。

例子

SpellTower 处于正常状态

[https://dzwonsemrish7.cloudfront.net/items/430k0c0b0y0b413d0b42/Image%202012.11.12%208:08:24%20AM.png?v=4822f549](https://dzwonsemrish7.cloudfront.net/items/430k0c0b0y0b413d0b42/Image%202012.11.12%208:08:24%20AM.png?v=4822f549)

按两次主页按钮后的 SpellTower

[https://dzwonsemrish7.cloudfront.net/items/280a1y0r2U3W321y1B2z/Image%202012.11.12%208:08:31%20AM.png?v=09c37567](https://dzwonsemrish7.cloudfront.net/items/280a1y0r2U3W321y1B2z/Image%202012.11.12%208:08:31%20AM.png?v=09c37567)

你可以看到他们是如何隐藏字母的，这正是我想要为我的游戏做的，唯一的区别是我使用的是 Corona SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:35:59.730

当您执行 board_group.alpha = 0 时，您只设置了一个变量，结果将仅在屏幕更新后生效。

但是由于应用程序被暂停......它不会更新！因此，更改 applicationSuspend 上的任何图形都不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:09:09.760

我相信原因是因为应用程序不被视为暂停。在正常的目标 c 编程中，这意味着当用户双击主页按钮时调用**applicationWillResignActive 。**因此，您要做的是为此部分添加该代码。

以下是一系列事件： http: [//www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/)

电晕似乎有这些事件：

*   “applicationStart”发生在应用程序启动并执行 main.lua 中的所有代码时。

*   “applicationExit”在用户退出应用程序时发生。

*   “applicationSuspend”发生在设备需要暂停应用程序时，例如在通话期间或手机从不活动状态进入睡眠状态。在模拟器中，这对应于在后台运行的模拟器。在挂起期间，挂起时不会向应用程序发送任何事件（甚至 enterFrame 事件），因此如果您的代码依赖于时间，您应该考虑到挂起应用程序所损失的时间。

*   当应用程序在暂停后恢复时发生“applicationResume”。在电话上，如果应用程序因电话呼叫而暂停，则会发生这种情况。在模拟器上，当模拟器在后台并且现在是前台应用程序时会发生这种情况。

所以我的猜测是你必须在电晕 API 之外实现它。

根据电晕文件，您可以在代表中实现它们：

> 您可以通过 CoronaDelegate 协议的实现来拦截 UIApplicationDelegate 事件。
> 
> 该协议符合 UIApplicationDelegate 协议。如果实现了 Corona 的内部委托，它将调用您协议的方法。
> 
> 请记住以下几点：
> 
> Apple 已弃用的方法将被忽略。在大多数情况下，您的类的版本将在 Corona 的 UIApplicationDelegate 方法的相应版本之后被调用。在一种情况下，您的版本会在之前被调用。在应用程序即将暂停或进入后台的情况下，您的方法将在 Corona 版本之前调用，例如 applicationWillResignActive: 和 applicationDidEnterBackground:。

[http://docs.coronalabs.com/native/enterprise/ios/CoronaDelegate.html](http://docs.coronalabs.com/native/enterprise/ios/CoronaDelegate.html)

但这只是一个猜测。希望能帮助到你！

编辑：

我在想，你可以做的非常简单的事情是在外面捕捉它并呈现一个“暂停”屏幕，然后在应用程序进入前台时隐藏它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T19:14:45.537

因此，如果您不能这样做（目前），另一种选择是在应用程序即将终止时保存应用程序状态，然后在您的 plist 文件中设置 UIApplicationExitsOnSuspend = true 。这将导致应用程序退出而不是暂停，这将避免任何屏幕截图，有效地“隐藏”板等。失败是，应用程序在再次启动时必须读取会话状态......这只是有用的如果您的应用程序可以设计为在不丢失状态的情况下实际退出，并且老实说，有点极端。也就是说，这可能是有效地做你想做的事情的唯一方法。

其他想法是看看是否可以在屏幕上添加一个大的黑色层，即使应用程序正在挂起；也许这会通过本机设置 setNeedsDisplay 以某种方式触发内部屏幕更新。此外，您可以考虑暂时删除所有图层，而不是修改 alpha，看看是否有类似的效果。

# javascript - 基于 json 填充选择元素

> ID：13327933
> 
> 赞同：2
> 
> 时间：2012-11-11T01:55:47.750
> 
> 标签：javascript, json, select

如何填充第二个选择元素？我已经弄清楚如何做第一个。但是，根据选择的“Make”，我怎么能对第二个做同样的事情呢？我试着在迈出一小步的同时说服自己，但我认为这对我来说可能太先进了。

```
var cars = '{"USED":[{"name":"Acura","value":"20001","models":[{"name":"CL","value":"20773"},{"name":"ILX","value":"47843"},{"name":"ILX Hybrid","value":"48964"},{"name":"Integra","value":"21266"},{"name":"Legend","value":"21380"},{"name":"MDX","value":"21422"},{"name":"NSX","value":"21685"},{"name":"RDX","value":"21831"},{"name":"RL","value":"21782"},{"name":"RSX","value":"21784"},{"name":"SLX","value":"21879"},{"name":"TL","value":"22237"},{"name":"TSX","value":"22248"},{"name":"Vigor","value":"22362"},{"name":"ZDX","value":"32888"}]},{"name":"Alfa Romeo","value":"20047","models":[{"name":"164","value":"20325"},{"name":"8c Competizione","value":"34963"},{"name":"Spider","value":"22172"}]}';
var carobj = eval ("(" + cars + ")");
var select = document.getElementsByTagName('select')[0];

//print array elements out
for (var i = 0; i < carobj.USED.length; i++) {
    var d = carobj.USED[i];
    select.options.add(new Option(d.name, i))
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:07:16.320

如果我没看错你的问题，你想用第一个选择中的模型填充第二个选择。请参阅下面的纯 JS 方法（使用 jsfiddle）。如果可能的话，我会建议研究 jQuery，因为我更喜欢 jQuery 解决方案。

[http://jsfiddle.net/m5U8r/1/](http://jsfiddle.net/m5U8r/1/)

```
var carobj;

window.onload = function () {
    var cars = '{"USED":[{"name":"Acura","value":"20001","models":[{"name":"CL","value":"20773"},{"name":"ILX","value":"47843"},{"name":"ILX Hybrid","value":"48964"},{"name":"Integra","value":"21266"},{"name":"Legend","value":"21380"},{"name":"MDX","value":"21422"},{"name":"NSX","value":"21685"},{"name":"RDX","value":"21831"},{"name":"RL","value":"21782"},{"name":"RSX","value":"21784"},{"name":"SLX","value":"21879"},{"name":"TL","value":"22237"},{"name":"TSX","value":"22248"},{"name":"Vigor","value":"22362"},{"name":"ZDX","value":"32888"}]},{"name":"Alfa Romeo","value":"20047","models":[{"name":"164","value":"20325"},{"name":"8c Competizione","value":"34963"},    {"name":"Spider","value":"22172"}]}]}';

    carobj = eval ("(" + cars + ")");
    var makes = document.getElementById('make');

    for (var i = 0; i < carobj.USED.length; i++) {
        var d = carobj.USED[i];
        makes.options.add(new Option(d.name, i));
    }

    makes.onchange = getModels;
    getModels();
}

// add models based on make
function getModels () {
    var makes = document.getElementById('make');
    var make = makes.options[makes.selectedIndex].text;
    for (var i = 0; i < carobj.USED.length; i++) {
        if (carobj.USED[i].name == make) {
            var models = document.getElementById('model');
            models.options.length = 0;
            for (var j= 0; j < carobj.USED[i].models.length; j++) {
                var model = carobj.USED[i].models[j];                
                models.options.add(new Option(model.name, j));
            }
            break;            
        }
    }
} 
```

我还建议研究更安全的 JSON 解析。如果它在任何用户输入上运行，则使用 eval 存在安全风险。您可以查看[JSON.org](http://json.org/)和他们的[json2.js](http://www.json.org/js.html)。或者，如果您想使用 jQuery：[parseJSON](http://api.jquery.com/jQuery.parseJSON/)。下面是 jQuery 版本：

```
jQuery.parseJSON(jsonString); 
```

JSON 解析技巧来自：[Safely turn a JSON string into an object](https://stackoverflow.com/questions/45015/safely-turning-a-json-string-into-an-object)。

# c# - 在 Windows Phone 应用程序中重用情节提要

> ID：13327935
> 
> 赞同：3
> 
> 时间：2012-11-11T01:56:11.657
> 
> 标签：c#, silverlight, storyboard, windows-phone

我`Storyboard`在我的 Windows Phone 应用程序中使用了一个：

```
<Canvas x:Name="myCanvas" Grid.Row="1">
  <Canvas.Resources>
    <Storyboard x:Name="sb">
      <ColorAnimationUsingKeyFrames 
             Storyboard.TargetProperty="(Rectangle.Fill).(SolidColorBrush.Color)"
             AutoReverse="True">
               <EasingColorKeyFrame KeyTime="00:00:0" Value="Black" />
               <EasingColorKeyFrame KeyTime="00:00:0.25" Value="Red" />
      </ColorAnimationUsingKeyFrames>
    </Storyboard>
  </Canvas.Resources>
</Canvas> 
```

我有多个`Rectangle`s 将使用它`Storyboard`，**但它似乎只在第一次工作**。

例如，下面的代码用于显示四个不同`Rectangles`但只显示第一个。代码没有错误，但最后 3`Rectangle`秒没有变红，而且看起来`Storyboard`甚至没有运行。

```
sb.Stop();
sb.SetValue(Storyboard.TargetNameProperty, myRect1.name);
sb.Begin();

sb.Stop();
sb.SetValue(Storyboard.TargetNameProperty, myRect2.name);
sb.Begin();

sb.Stop();
sb.SetValue(Storyboard.TargetNameProperty, myRect3.name);
sb.Begin();

sb.Stop();
sb.SetValue(Storyboard.TargetNameProperty, myRect4.name);
sb.Begin(); 
```

谁能看到我做错了什么，或者知道如何让我`Storyboard`的可重用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:47:15.223

首先，你做错了什么：

故事板执行是异步的。当您调用该`Storyboard.Begin`方法时，情节提要在后台开始，您的代码将继续执行。因此，您`Storyboard.Stop`在启动后立即调用！唯一一个你不会停止的是最后一个，这就是为什么它是唯一一个颜色变化的矩形。

如果你想链接你的动画，你必须订阅`Completed`事件以知道故事板何时结束，然后重新启动它以进行下一个控件。这是一种方法：

```
private Rectangle[] ControlsToAnimate;

private int CurrentIndex;

private void Button_Click(object sender, RoutedEventArgs e)
{
    this.ControlsToAnimate = new[] { this.Rectangle1, this.Rectangle2 };

    this.Storyboard1.Completed += StoryboardCompleted;
    this.AnimateNextControl();
}

private void AnimateNextControl()
{
    if (this.CurrentIndex >= this.ControlsToAnimate.Length)
    {
        this.CurrentIndex = 0;
        return;
    }

    var nextControl = this.ControlsToAnimate[this.CurrentIndex];

    this.CurrentIndex++;

    this.Storyboard1.Stop();
    this.Storyboard1.SetValue(Storyboard.TargetNameProperty, nextControl.Name);
    this.Storyboard1.Begin();
}

private void StoryboardCompleted(object sender, EventArgs e)
{
    this.AnimateNextControl();
} 
```

现在，您将面临两个问题：

1.  将情节提要分配给新控件时，前一个控件的颜色将恢复为其原始值（在情节提要开始之前）。如果您希望它保持其新值，则必须保存它：

    ```
    private void AnimateNextControl()
    {
        if (this.CurrentIndex > 0)
        {
            var brush = (SolidColorBrush)this.ControlsToAnimate[this.CurrentIndex - 1].Fill;
            brush.Color = brush.Color;
        }

        if (this.CurrentIndex >= this.ControlsToAnimate.Length)
        {
            this.CurrentIndex = 0;
            return;
        }

        var nextControl = this.ControlsToAnimate[this.CurrentIndex];

        this.CurrentIndex++;

        this.Storyboard1.Stop();
        this.Storyboard1.SetValue(Storyboard.TargetNameProperty, nextControl.Name);
        this.Storyboard1.Begin();
    } 
    ```

2.  您不能使用单个情节提要同时为两个控件设置动画。如果要同时为所有矩形设置动画，则需要为每个控件使用一个情节提要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:13:06.593

我必须再一次让我的评论成为答案，因为我显然仍然无法发表评论。

您是否尝试同时运行所有这些？我确实相信只有一个 XAML 定义的故事板实例存在，因此您可能无法同时在多个控件上重用它。

如果一切都失败了，你可以创建一个包含你可以重复使用的故事板的矩形的 UserControl。我在上一个问题中提供的代码示例来自使用情节提要翻转的 Tile。由于它是一个用户控件，因此我可以同时翻转尽可能多的瓷砖。

# ninject - 如何在 mvc 站点的类项目部分中初始化 Ninject

> ID：13327940
> 
> 赞同：4
> 
> 时间：2012-11-11T01:58:32.370
> 
> 标签：ninject

我在一个小项目中使用过 Ninject，但现在正在将一个较大的 Web 应用程序转换为 mvc，并且需要有关使用 Ninject 的帮助。在新的解决方案中，我拥有 mvc 站点并将一些功能拆分到单独的类项目中，例如我的 ReportGenerator。

我想在 ReportGenerator 中使用 Ninject 来解决它所具有的依赖关系，但我不希望 MVC 项目了解 ReportGenerator 的内部工作原理。那么我将在哪里创建绑定/内核？

我查看了其他问题，例如：[在 ASP.NET MVC 3 应用程序的类库中引用 Ninject，](https://stackoverflow.com/questions/7924043/referencing-ninject-in-class-library-in-asp-net-mvc-3-application/7924087#7924087)但该答案似乎表明绑定是在我不想要的 MVC 项目中设置的。

有人可以指出如何在一个也将使用 Ninject 的 MVC 项目引用的类中配置/运行 Ninject 的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:54:17.950

您应该在[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中注册并解析所有组件。这与 Ninject 无关，此建议适用于所有 DI 容器。

组合根是应用程序的启动路径，您可以在其中将所有内容连接在一起。您通常会将此组合根放在您的启动项目中；在您的情况下，您的 MVC 项目。

您通常不应该担心这一点，因为您的 MVC 程序集本身依赖于另一个程序集的细节，并不意味着您的 UI 逻辑（例如您的控制器）依赖于这些细节。如您所知，控制器应该只依赖于抽象。不要将您的逻辑架构（层分离）与物理架构（部署期间如何在磁盘上分离代码）混淆。组合根在逻辑上与您的 MVC 最终项目分离，尽管它可以位于同一个程序集中。

组合根通常是运行时首先运行的应用程序的代码路径，它必须了解每个人的一切。在控制台应用程序中，您的启动项目通常会非常非常薄，并且包含的​​内容不多，而仅包含 Composition Root。由于 ASP.NET 应用程序的架构，这通常更难实现，例如，因为启动项目*是*Web 应用程序，它包含需要解析的各种类型（控制器、视图等）。因此，Web 应用程序通常会将 Composition Root 集成到 Web 项目本身中。同样，这不是什么值得担心的事情，因为仅仅是事实并不会使您的代码更紧密地耦合。

但是，当您有一个被多个终端应用程序（例如 WCF Web 服务和 MVC 应用程序）重用的业务层时，情况就不同了。为了防止代码重复，您可以将共享注册移出 MVC 和 WCF 组合根，并将其放置在位于业务层（以及下面的所有层）顶部的特殊“引导程序”程序集中。这可以像拥有一个带有静态方法的静态类一样简单，该静态方法接受现有`Kernel`实例并进行与业务相关的注册（大多数 DI 框架都有这方面的功能，但在大多数情况下它们是无用的，并且是静态公共方法会做得很好）。每个组合根都可以创建自己的`Kernel`实例，进行注册，将实例传递给 BL 引导程序，之后可能会进行更多注册，然后存储内核以供应用程序使用。

但即使有多个终端应用程序，它们仍将包含自己的特定接线（因为每个应用程序都不同），因此有自己的合成根。

# android - johannilsson 如何部署 Pull-To-Refresh ListView

> ID：13327942
> 
> 赞同：1
> 
> 时间：2012-11-11T01:58:43.800
> 
> 标签：android, eclipse, android-listview, pull-to-refresh

我已经在 github [https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)上查看了 johannilsson/android-pulltorefresh 。

其中有 2 个项目，**pulltorefresh**和**pulltorefreshexample**。

**pulltorefresh**`com.markupartist.android.widget.PullToRefreshListView`中的示例引用，我不知道如何链接**pulltorefresh**使用。

 ****现在我在使用图书馆时遇到了问题。

*   逐个文件复制确实有效，但远非方便。

*   我也检查了`README.md`，但它没有涵盖这一点。

*   github上有类似的库项目，它们具有相同的结构，但其中的帮助文件也不包括部署。

我正在使用日食。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:23:54.043

在 Eclipse 中执行 File->New->other（不要使用 File->new->Android application project）并选择“Android Project from existing code”。

单击下一步，然后浏览到具有 pulltorefresh 库的目录 - 如果要将文件复制到工作区，请选中项目列表框下的复选框。然后单击完成按钮。

重复刚才的操作，但这次选择 pulltorefreshexample 目录。

确保这两个项目都是打开的，然后在包资源管理器中选择 pulltorefreshexample，右键单击它并选择属性。在出现的窗口中选择左侧的 Android，然后在最底部有一个“库”部分。单击添加，您应该会看到一个包含所有打开的库项目的列表。选择 pulltorefresh 之一。

清理并构建库，然后清理并构建示例。

那应该对你有用。****

# xcode - 枚举一个 NSDictionary 的一个 NSDictionary；每个 NSDictionary 元素提取某个键

> ID：13327944
> 
> 赞同：0
> 
> 时间：2012-11-11T01:59:00.227
> 
> 标签：xcode, json, parsing

我有一个 JSON 响应：

```
{"result":
         [
            {"id":"1","inviter":"someguy1","invitee":"test","group_id":"1","status":"2"},
            {"id":"2","inviter":"someguy2","invitee":"test","group_id":"1","status":"2"}
         ]
} 
```

我正在尝试通过以下方式打印每个 dict 的所有值：

```
NSDictionary* res = [[json objectForKey:@"result"] objectAtIndex:0];

for(id object in res){
    NSDictionary *currentResult = (NSDictionary *)object;

    for(NSString *value in [currentResult allValues]){
        NSLog(@"value: %@", value);
    }
} 
```

应用程序崩溃：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString allValues]：无法识别的选择器发送到实例 0x96d43b0”

上`for(NSString *value in [currentResult allValues])`线。

有什么想法/建议/诀窍吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:45:22.283

你所拥有的是一个包含s的`NSDictionary`with an 。`NSArray``NSDictionary`

试试这个（未测试）：

```
NSArray *dictArray = [json objectForKey:@"result"];

for(NSDictionary *dict in dictArray){
    NSLog(@"dict = %@", [dict description]);
} 
```

# php - 使用 PHP 连接到 Vertica 数据库

> ID：13327948
> 
> 赞同：2
> 
> 时间：2012-11-11T01:59:44.037
> 
> 标签：php, vertica

有没有办法使用 PHP 连接到 Vertica 数据库——一个类似于 mysql_connect() 的函数？

我最终试图编写一个脚本，从 Vertica 数据库中提取数据并将其存储在 localhost MySQL 数据库中。

如有必要，我愿意使用 Python 来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:01:11.733

PHP ODBC 模块（[经典](http://www.php.net/manual/en/book.uodbc.php)或[PDO](http://www.php.net/manual/en/ref.pdo-odbc.php)）适用于 Vertica 连接。您需要从 My Vertica 门户下载适合您的 Vertica 版本的 ODBC 驱动程序，并将其安装在您的 PHP 服务器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:48:45.800

您还可以使用`Postgres`客户端库连接到 Vertica 实例。

# objective-c - 控制器完成运行后如何从 appdelegate 运行方法？

> ID：13327952
> 
> 赞同：0
> 
> 时间：2012-11-11T02:01:01.587
> 
> 标签：objective-c, nsview, nsdragginginfo

这个想法是我有一个自定义视图，用户可以在其中拖放一个或多个文件，并且控制器能够将文件路径保存到数组中。

用户在界面中放置文件后，如何从 AppDelegate 运行方法？

我有这些文件：

AppDelegate.h：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>
@property (assign) IBOutlet NSScrollView *table;
@property (assign) IBOutlet NSWindow *window;
@end 
```

AppDelegate.m:

```
#import "AppDelegate.h"

    @implementation AppDelegate
    - (void)applicationDidFinishLaunching:(NSNotification *)aNotification
    {
        // Insert code here to initialize your application
    }

    @end 
```

DropView.h：

```
#import <Cocoa/Cocoa.h>

@interface DropView : NSView <NSDraggingDestination>
@property (assign) IBOutlet NSScrollView *table;
@property NSArray *draggedFilePaths;
@end 
```

DropView.m:

```
#import "DropView.h"

@implementation DropView
@synthesize draggedFilePaths;

- (id)initWithFrame:(NSRect)frame
{

    self = [super initWithFrame:frame];
    if (self) {
        [self registerForDraggedTypes:[NSArray arrayWithObject:NSURLPboardType]];
    }

    return self;
}

-(NSDragOperation)draggingEntered:(id<NSDraggingInfo>)sender{
    return NSDragOperationGeneric;
}

-(NSDragOperation)draggingUpdated:(id<NSDraggingInfo>)sender{
    return NSDragOperationCopy;
}
-(BOOL)prepareForDragOperation:(id<NSDraggingInfo>)sender{
    return YES;
}

-(BOOL)performDragOperation:(id<NSDraggingInfo>)sender{
    NSPasteboard* prb;
    prb= [sender draggingPasteboard];
    draggedFilePaths = [prb propertyListForType:NSFilenamesPboardType];
    return YES;
}

- (void)concludeDragOperation:(id<NSDraggingInfo>)sender{
    [self setNeedsDisplay:YES];
    NSLog(@"path %@",draggedFilePaths);
    [self populateTable];
}

- (void)drawRect:(NSRect)dirtyRect
{
}

-(void)populateTable{
    NSLog(@"yes");
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:41:21.067

将 AppDelegate.h 导入 DropView.m，并从 performDragOperation: 方法中调用您要运行的方法。

```
-(BOOL)performDragOperation:(id<NSDraggingInfo>)sender{
    NSPasteboard* prb;
    prb= [sender draggingPasteboard];
    draggedFilePaths = [prb propertyListForType:NSFilenamesPboardType];
    [(AppDelegate *)[[NSApplication sharedApplication]delegate] doWhatever:draggedFilePaths]; 
    return YES;
} 
```

其中 doWhatever: 是在应用程序委托中实现的方法。

# macos - Vim：打开文件后需要按 Enter 才能真正打开

> ID：13327955
> 
> 赞同：0
> 
> 时间：2012-11-11T02:01:13.577
> 
> 标签：macos, vim, terminal

最近，Vim 开始表现得很奇怪。

每当我在终端中使用 Vim 打开文件时，我都会看到通常位于 vim 底部的行：

```
"<filename>" [dos] ###L, ###C 
```

但不是在上面显示缓冲区，而是屏幕是空白的。但是，当我按下`Enter`时，缓冲区会正常显示。

当我打开文件时，我做了什么改变以使 Vim 以这种方式运行，我怎样才能把它改回来？

[这是我的`.vimrc`。](https://gist.github.com/4053482)

* * *

我在 Mac 上，运行 OS X 10.8，使用 Vim 7.3。

# java - 如何摆脱我的 Calc 程序字符串中的空格

> ID：13327960
> 
> 赞同：0
> 
> 时间：2012-11-11T02:02:07.833
> 
> 标签：java, user-interface

我想知道如何计算计算器程序中的空间。现在它被设置为只有在每个值后面都有一个空格时才起作用。如果还有多个空间，我希望它能够工作。我尝试做一些事情（在我执行的操作中，在 '=' 符号测试下），但它并没有真正起作用。所以想知道如何让它考虑多个空格（比如如果在下一个值之前有多个空格，那么它应该认识到是这种情况，并删除额外的空格）。谢谢

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class GUI extends JFrame implements ActionListener
{
JPanel buttonPanel, topPanel, operationPanel;
JTextField display = new JTextField(20);

doMath math = new doMath();
String s = "";
String b= "";
//int counter;

JButton Num1;
JButton Num2;
JButton Num3;
JButton Num4;
JButton Num5;
JButton Num6;
JButton Num7;
JButton Num8;
JButton Num9;
JButton Num0;

JButton Add;
JButton Sub;
JButton Mult;
JButton Div;
JButton Eq;
JButton Clr;
JButton Space;
public GUI()
{
    super("Calculator");
    setSize(400,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout (2,1));

    buttonPanel = new JPanel();        
    buttonPanel.setLayout(new GridLayout(5, 4));
    buttonPanel.add(Num1 = new JButton("1"));
    buttonPanel.add(Num2 = new JButton("2"));
    buttonPanel.add(Num3 = new JButton("3"));
    buttonPanel.add(Num4 = new JButton("4"));
    buttonPanel.add(Num5 = new JButton("5"));
    buttonPanel.add(Num6 = new JButton("6"));
    buttonPanel.add(Num7 = new JButton("7"));
    buttonPanel.add(Num8 = new JButton("8"));
    buttonPanel.add(Num9 = new JButton("9"));
    buttonPanel.add(Num0 = new JButton("0"));        
    buttonPanel.add(Clr = new JButton("C"));
    buttonPanel.add(Eq = new JButton("="));
    buttonPanel.add(Add = new JButton("+"));
    buttonPanel.add(Sub = new JButton("-"));
    buttonPanel.add(Mult = new JButton("*"));
    buttonPanel.add(Div = new JButton("/"));
    buttonPanel.add(Space = new JButton("Space")); 

    Num1.addActionListener(this);
    Num2.addActionListener(this);
    Num3.addActionListener(this);
    Num4.addActionListener(this);
    Num5.addActionListener(this);
    Num6.addActionListener(this);
    Num7.addActionListener(this);
    Num8.addActionListener(this);
    Num9.addActionListener(this);
    Num0.addActionListener(this);
    Clr.addActionListener(this);
    Eq.addActionListener(this);
    Add.addActionListener(this);
    Sub.addActionListener(this);
    Mult.addActionListener(this);
    Div.addActionListener(this);
    Space.addActionListener(this);

    topPanel = new JPanel();         
    topPanel.setLayout(new FlowLayout());
    topPanel.add(display);

    add(mainPanel);

    mainPanel.add(topPanel, BorderLayout.NORTH);
    mainPanel.add(buttonPanel, BorderLayout.SOUTH);

    setVisible(true);

}

public void actionPerformed(ActionEvent e) 
{
    JButton source = (JButton)e.getSource();
    String text = source.getText();
    int counter = 0;

    if (text.equals("=")) 
    {
        doMath math = new doMath();
        for(int i = 0; i <b.length(); i++)
        {

            String c = b.substring(i,(i+1));
            String d = b.substring((i+1),(i+2));
            String temp = "";
            if( c.equals(" ") && c.equals(d))
            {
                temp = b.substring(0,i)+(b.substring(i+1));
                b = temp;
            }
        }           
        int result = math.doMath1(b);

        String answer = ""+result;
        display.setText(answer);                   

    }
    else if(text.equals("Space"))
    {

        counter ++;
        if(counter <2)
        {            
            b+= " ";
            display.setText(b);
        }
        else 
        {
            b+="";
            display.setText(b);
        }
    }

    else if (text.equals("C"))
    {
        b = "";

        display.setText(b);
    }
    else 
    {

        b += (text);

        display.setText(b);

    }
    counter = 0; 

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:12:33.357

此方法需要了解正则表达式。对于每个字符串，只需用一个空格替换多个连续空格的任何实例。换句话说，使用正则表达式，您可以将`"\\s+"`（表示“多个空格”）替换为`" "`，这只是空格字符。

例子：

```
String c = ...
c = c.replaceAll("\\s+", " "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:15:10.360

```
String str = "your     string";
Pattern _pattern = Pattern.compile("\\s+");
Matcher matcher = _pattern.matcher(str);
str = matcher.replaceAll(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T02:09:32.230

不要使用子字符串，而是使用 a`Scanner`作为`String`参数。

或者，您可以在按下“空格”按钮后禁用它，然后在按下其他按钮时将其重新启用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T02:15:55.410

如果 b 不为空，您可以尝试查看前一个字符`charAt`，如果它是空格，则什么也不做。

# asp.net-mvc - 从 _Layout.cshtml 中删除一个部分

> ID：13327978
> 
> 赞同：1
> 
> 时间：2012-11-11T02:06:50.347
> 
> 标签：asp.net-mvc, master-pages, layout-page

在我的主视图（_Layout.cshtml）中，我有一个树形菜单。

我想删除主页（主页）中的树形菜单。
其余的布局应该留在那里，我希望家的主体占据树形菜单的空间。

任何有效的开箱即用选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:42:28.113

一种方法可以是创建一个带有用于显示/排除树形菜单的标志的自定义视图页面。

```
public class CustomViewPage<T> : WebViewPage 
{
    public bool ShowTreeMenu 
    { 
        get 
        {
            return (ViewBag.ExcludeMenu == null || ViewBag.ExcludeMenu == false);
        }         
    }
} 
```

从布局文件中继承自定义类：

```
@inherits CustomViewPage<dynamic> 
```

然后（在布局文件中）仅在以下情况下显示树形菜单：

```
<nav>
@if (ShowTreeMenu)
{ 
    @Html.Partial("_TreeMenu")                            
}
</nav> 
```

并在应排除菜单时从内容页面设置标志：

```
@{
  ViewBag.Title = "Home Page";
  ViewBag.ExcludeMenu = true;
 } 
```

# android - Gson 和安卓

> ID：13327979
> 
> 赞同：1
> 
> 时间：2012-11-11T02:07:03.257
> 
> 标签：android, gson

我不太确定为什么会收到此 NoClassDefFoundError：

java.lang.NoClassDefFoundError: com.google.gson.Gson

我在 Java 构建路径中引用了 gson 2.2 库。并且该课程已很好地导入（不是真的，但自动完成工作。）

我的 targetSdk 是 15 级，minSdk 是 8。

有任何想法吗？

我可能需要旧版本的 gson 吗？我应该发布代码吗？不确定是否有必要，因为 Eclipse 不会记录任何错误并且自动完成功能有效。

谢谢你。

编辑：希望我能为JoxTraex 的评论+1。就是这样。我必须做的是在这个帖子上的答案[。](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)非常感谢乔克斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:23:37.420

这意味着 jar 文件没有与您创建的最终结果 apk 一起编译。

# java - 在eclipse中自动生成实体代理

> ID：13327982
> 
> 赞同：0
> 
> 时间：2012-11-11T02:07:40.593
> 
> 标签：java, eclipse, gwt, jpa

有没有办法从 Eclipse 中的实体自动生成 EntityProxy ？

例如：右键-> 生成代理？？

这样我就不必手动编写我正在使用的所有方法

我正在使用 GWT + JPA

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:08:31.597

如果您想尝试，我为此目的制作了一个 Eclipse 插件： [https ://github.com/nmorel/GenerateGwtRfProxy](https://github.com/nmorel/GenerateGwtRfProxy)

这是非常基本的（不支持继承），但它涵盖了您所要求的内容。

# javascript - 在浏览器中将 Sass 转换为 Css

> ID：13327984
> 
> 赞同：0
> 
> 时间：2012-11-11T02:07:53.247
> 
> 标签：javascript, css, coffeescript, sass

> **可能重复：**
> [是否有 SASS.js？像 LESS.js 之类的东西？](https://stackoverflow.com/questions/4436643/is-there-a-sass-js-something-like-less-js)

我想构建允许编辑代码的原型 html 页面，就像 jsfiddle 或 jsbin 一样。而且我不想在服务器端运行任何转换，因为原型设计意味着快速将某些东西组合在一起，而不依赖于网络：想象一下坐在西伯利亚的公共汽车上在 iPad 上打字，在任何方向都没有网络 100 公里，与周围的野熊。

要将coffeescript 转换为js，可以在浏览器中直接运行coffeescript 编译器，因此我可以编写type="text/coffeescript" 并在部署之前忘记转换。

Sass 是否有类似的工具来支持 type="text/sass" 或者我是否坚持使用 Css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:16:02.883

见这里：[有 SASS.js 吗？像 LESS.js 之类的东西？](https://stackoverflow.com/questions/4436643/is-there-a-sass-js-something-like-less-js)

简而言之，它有一个 CommonJS 模块（专为节点设计），您可以使用它，只需稍作修改，以及 curl.js 或其他脚本加载器之类的东西。

# php - PHP循环不根据div颜色代码打印颜色名称

> ID：13327991
> 
> 赞同：1
> 
> 时间：2012-11-11T02:09:46.440
> 
> 标签：php

我正在尝试根据循环中的颜色代码来回显 div 的颜色名称，但它似乎不起作用。这就是我得到的：

![在此处输入图像描述](../Images/716b6ff5d3915637fd9d6c88cb0024c3.png)

框的颜色应与其中的文本相关。有什么我做错了吗？到目前为止，这是我的代码：

```
$availColour = array("#F00","#FF0","#0D0");

for ($i = 1; $i <= 9; $i++) {
    $Monday = $availColour[array_rand($availColour, 1)];        
    echo '<div class="innerTbl" style="width: 50px; float: left; 
    background-color: '.$Monday.'">';
    if ($Monday = "#F00") {
        echo "Red";
    }
    elseif ($Monday = "#FF0") {
        echo "Green";
    }
    elseif ($Monday = "#0D0") {
        echo "Yellow";
    }
    echo "</div>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T02:15:09.270

原因是你搞混`=`了`==`。

```
if ($Monday = "#F00") { 
```

应该

```
if ($Monday == "#F00") { 
```

为了防止将来发生这种情况，许多人这样做。

```
if ("#F00" == $Monday) { 
```

一开始可能看起来很尴尬，但它可以防止你把它们混淆起来，就好像你把你的陈述打错了一样

```
if ("#F00" = $Monday) { 
```

您的解释器将因致命错误而死，抱怨您无法分配常量，诸如此类 - 这实际上使您的错误更加明显。

顺便说一句，`#FF0`是黄色和`#0D0`绿色，看起来你也交换了文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T02:26:27.347

你混淆了equality`==`和assignment `=`。当测试两个或值的相等性时，你用两个来做`==`（除非你也在测试类型，在这种情况下你会使用`===`）。此外，如果您使用初始数组作为书面颜色名称的查找，您的代码可以简化：

```
$i = 9; 
$c = array( 
    "Red"   => "#F00", 
    "Green" => "#FF0", 
               "#0D0"
);

while ( $i-- ) {
    $hex = $c[ array_rand( $c ) ];
    $str = array_search( $hex, $c ) ?: "Unknown" ;
    echo "<div style='background-color:{$hex}'>{$str}</div>";
} 
```

以上将使用 CSS 中的十六进制值，以及（如果存在）`div`自身中的可读字符串。如果没有提供字符串（例如 的情况`#0D0`）“未知”将被替换。

三元运算符的这种特殊用法需要 PHP 5.3+ 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T02:31:19.240

您正在使用分配`=`而不是比较`==`

所以改变

`if ($Monday = "#F00")`

进入

`if ($Monday == "#F00")`

实现这一目标的更好方法是根本不使用比较。

```
<?php
$availColour = array("#F00"=>"Red","#FF0"=>"Green","#0D0"=>"Yellow");
for ($i = 1; $i <= 9; $i++) {
    #get a random (key from the array);
    $key = array_rand($availColour, 1);       
    echo '<div class="innerTbl" style="width: 50px; float: left; 
    background-color: '.$key.';">';
    #directly print out the value of the selected $key
    echo $availColour[$key];
    echo "</div>";
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T02:17:30.523

检查您的条件 - 您需要使用 == 来测试是否相等。目前，您的条件正在分配值，因此第一个条件将始终评估为真。

试试这个：

```
if ($Monday == "#F00") {
    echo "Red";
}
elseif ($Monday == "#FF0") {
    echo "Green";
}
elseif ($Monday == "#0D0") 
{
    echo "Yellow";
} 
```

# node.js - Node.js 向客户端发送变量

> ID：13327993
> 
> 赞同：0
> 
> 时间：2012-11-11T02:10:15.253
> 
> 标签：node.js, mongodb, mongoose

我有一个小型 Node.js HTTP 服务器，它向 mongo 数据库（使用 mongoose 模块）发出请求。

我想要做的是查询数据库，将其存储在变量（数组）中并将其发送给客户端。

因为理想情况下，当用户单击 html 页面上的某个按钮时，JavaScript 将获取该事件并通过显示基于存储在数据库中的数据的计算来更改网站的外观。

我能想到的唯一方法就是将数据库内容“传输”到客户端浏览器，但如果有人能提供另一种解决方案，那也很好！

所以基本上我的问题是：

*   提供页面时，如何将变量从 Node.js 服务器传递到客户端浏览器？

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:15:54.243

如果您要进行多于几种此类传输，我建议您研究 Socket.IO。

它是一个在 Node.js 服务器和 Web 前端之间提供快速和轻松通信的层，通过在可用时抽象 Web 套接字，并在不可用时回退到其他传输（例如 JSON-P 或 Flash）。基本上，您会拨打`io.emit('something', {yourdata: here})`，并且很容易在另一端收到。所有的序列化都是为你完成的。

[http://socket.io/](http://socket.io/)

试一试他们的演示，看看它是如何工作的。

# c++ - 我的模板类中的函数出现错误 C4430、C2143 和 C2244

> ID：13327994
> 
> 赞同：0
> 
> 时间：2012-11-11T02:10:19.307
> 
> 标签：c++, templates, function-declaration

我正在尝试创建一个采用模板类型并将其添加到列表/数组末尾的函数，但我遇到了一个我似乎找不到解决方法的错误。我是模板新手，所以我不确定这是否是我使用模板或其他东西的问题。

这是我拥有的代码的相对部分：

```
// MyArray.h

// insure that this header file is not included more than once
#pragma once
#ifndef MYARRAY_H_
#define MYARRAY_H_

template <class elemType>
class MyArray
{
private:
  int _size;        // number of elements the current instance is holding
  int _capacity;    // number of elements the current instance can hold
  int _top;         // Location of the top element (-1 means empty)
  elemType * list;  // ptr to the first element in the array

public:
// Ctors
    MyArray(); // default
    MyArray(int capacity); // initialize to capacity
    MyArray( MyArray & original); // copy constructor

// Dtor
    ~MyArray();

// METHODS
// Add
    // Takes an argument of the templated type and
    // adds it to the end of the list/array
    void Add(const elemType & elem);
};

// =============================================================================

/* ... */

// METHODS
// Add
    // Takes an argument of the templated type and
    // adds it to the end of the list/array
    template <class T>
    void MyArray<T>::Add(const elemType & elem)  // error C4430 and C2143
    {
        list[ _size + 1 ] = elem; // Place item on the bottom of the stack
    } // error C2244

#endif 
```

我收到这些错误：

```
Error   1   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int               c:\...\myarray.h    80  1   Testing_Grounds
Error   2   error C2143: syntax error : missing ',' before '&'                                                      c:\...\myarray.h    80  1   Testing_Grounds
Error   3   error C2244: 'MyArray<elemType>::Add' : unable to match function definition to an existing declaration  c:\...\myarray.h    83  1   Testing_Grounds 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:13:33.407

```
template <class T>
 void MyArray<T>::Add(const elemType & elem)  // error C4430 and C2143
 {
   //...
 } 
```

这里是什么`elemType`（在函数参数中）？应该是`T`。或者`T`应该是`elemType`。

```
template <class T>
void MyArray<T>::Add(const T & elem)  //fixed!
{
  //...
} 
```

请注意，类模板成员的定义应该在头文件本身中，而不是在`.cpp`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:14:16.680

在您的标题中，您使用`<class elemType>`和在您使用的 cpp`<class T>`

在您的 cpp 中，更改`<class T>`to `<class elemType>`，`MyArray<T>`to`MyArray<elemType>`一切都会好起来的。

# debugging - ARMv7 Cortex M4 调试

> ID：13327995
> 
> 赞同：0
> 
> 时间：2012-11-11T02:10:27.327
> 
> 标签：debugging, armv7

如何从微控制器上的代码调试指定微控制器上的代码？

处理器是在 Teensy 3.0 上使用的 Freescale Kinetis MK20DX128VLH5。它的架构是 ARMv7 Cortex M4。

**更新**

> ...您是否要编写程序，将其编译为二进制映像，然后通过逐步执行汇编指令、查看变量、设置断点等进行调试？

我想编写一个程序（A），将其编译为二进制映像（并将其加载到 µP），然后再编写一个程序（B），编译（并加载）它，然后使用 A 通过步进调试 B通过汇编指令、查看变量、设置断点等。

我已经可以查看任意内存地址了。我的主要问题是，是否可以从程序 A 触发调试模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:39:08.370

从您的问题中，我无法判断您要做什么。

你想在你的应用程序中构建一些东西来监视应用程序其余部分的行为吗？就像看门狗类型的实现，或者......

...您是否要编写程序，将其编译为二进制映像，然后通过逐步执行汇编指令、查看变量、设置断点等进行调试。如果是这种情况，那么您只能从外部工具 - 其中有很多（IAR、Atollic、Rowley、Keil 等）。

# jquery - Jquery中的模糊事件关闭点击事件

> ID：13327996
> 
> 赞同：1
> 
> 时间：2012-11-11T02:10:29.917
> 
> 标签：jquery, html

我有一个带有文本和提交按钮的简单表单，如下所示

```
<label>Input something </label>
<input type="text" id="TextId" value="Whatever you input,it is wrong" />
 <div id="ErrorDiv"></div>
 <input type="submit" id="SubmitButton""/> 
```

我在文本框中附加了一个焦点事件以在 ErrorDiv 处显示多行消息。
当我单击按钮提交时，文本的 onfocusout 首先执行，它使我的按钮移出其位置并且不会触发 Onclick 事件。
[小提琴链接](http://jsfiddle.net/UgJL8/8/)
任何人都可以向我解释它是如何发生的，我该如何解决它
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:19:22.567

blur 事件在 click 事件之前被触发。发生这种情况是因为释放鼠标按钮后会触发单击事件。完成这项工作的最简单方法是在 mousedown 事件而不是 click 事件上显示警报。

例如，使用这个

```
 $("#SubmitButton").live("mousedown", function() {
        alert("button click!");
    }); 
```

上面的更改在 OS X 上的 chrome 中对我有用，但是您应该知道这方面存在一些[争议](https://stackoverflow.com/questions/6939306/should-blur-or-mousedown-fire-first)。更好的解决方案是重新排列您的元素，以便验证消息不会推出提交按钮。

# spring - 春季无法打开 JPA EntityManager 进行事务处理

> ID：13327998
> 
> 赞同：4
> 
> 时间：2012-11-11T02:11:27.907
> 
> 标签：spring, hibernate, jakarta-ee, jpa, jta

我正在使用 JPA Hibernate 4.1.7 和 Spring 3.1.3 构建一个测试应用程序。

我在 jta 得到一个 NPE 导致 JPA EntityManager 失败，这是堆栈跟踪

```
 DEBUG TestContext - Retrieved ApplicationContext for test class [class cvut.dp.foodtables.service.FoodServiceImplTest] from cache with key [[MergedContextConfiguration@61cc1457 testClass = FoodServiceImplTest, locations = '{classpath:/WEB-INF/context/applicationContext.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']].
DEBUG DefaultListableBeanFactory - Returning cached instance of singleton bean 'txManager'
DEBUG JpaTransactionManager - Creating new transaction with name [testSome]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
DEBUG SessionImpl - Opened session at timestamp: 13525989368
DEBUG TransactionCoordinatorImpl - Skipping JTA sync registration due to auto join checking
DEBUG AbstractEntityManagerImpl - Looking for a JTA transaction to join
WARN  TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener@16f88474] to process 'before' execution of test method [public void cvut.dp.foodtables.service.FoodServiceImplTest.testSome()] for test instance [cvut.dp.foodtables.service.FoodServiceImplTest@3210a146]
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.NullPointerException
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:427)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.startTransaction(TransactionalTestExecutionListener.java:514)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:272)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener.beforeTestMethod(TransactionalTestExecutionListener.java:165)
    at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:358)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:73)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.NullPointerException
    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.getStatus(JtaStatusHelper.java:73)
    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.isActive(JtaStatusHelper.java:115)
    at org.hibernate.engine.transaction.internal.jta.CMTTransaction.join(CMTTransaction.java:149)
    at org.hibernate.ejb.AbstractEntityManagerImpl.joinTransaction(AbstractEntityManagerImpl.java:1220)
    at org.hibernate.ejb.AbstractEntityManagerImpl.postInit(AbstractEntityManagerImpl.java:178)
    at org.hibernate.ejb.EntityManagerImpl.<init>(EntityManagerImpl.java:89)
    at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:179)
    at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:445)
    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:366)
    ... 31 more
DEBUG DirtiesContextTestExecutionListener - After test method: context [[TestContext@5579d6f9 testClass = FoodServiceImplTest, testInstance = cvut.dp.foodtables.service.FoodServiceImplTest@3210a146, testMethod = testSome@FoodServiceImplTest, testException = org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.NullPointerException, mergedContextConfiguration = [MergedContextConfiguration@61cc1457 testClass = FoodServiceImplTest, locations = '{classpath:/WEB-INF/context/applicationContext.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]], class dirties context [false], class mode [null], method dirties context [false].
DEBUG DirtiesContextTestExecutionListener - After test class: context [[TestContext@5579d6f9 testClass = FoodServiceImplTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@61cc1457 testClass = FoodServiceImplTest, locations = '{classpath:/WEB-INF/context/applicationContext.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]], dirtiesContext [false].
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 11.134 sec <<< FAILURE! 
```

我已经用谷歌搜索了这个错误，但仍然找不到任何解决方案。

这是测试：

```
package cvut.dp.foodtables.service;

import static org.junit.Assert.*;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

public class FoodServiceImplTest extends BaseServiceTest
{
    @Autowired
    private FoodService foodService;

    public FoodServiceImplTest()
    {
        super();
    }

    @Test
    public void testSome()
    {        
        Long id = foodService.addFood("test", 15, "test");
        assertEquals(1, foodService.getAllFood().size());
    }
} 
```

哪个延伸

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    "classpath:/WEB-INF/context/applicationContext.xml"})
@TransactionConfiguration(defaultRollback=true, transactionManager="txManager")
@Transactional //extend the transactions to whole tests in order to rollback the tests
public class BaseServiceTest
{
    public BaseServiceTest()
    {
    }
} 
```

我认为错误出现在我的配置中，所以我不会在这里发布所有来源......

这是我的 applicationContext.xml （编辑：更改为 3.1.xds 文件，没有更改）

```
<!--<?xml version="1.0" encoding="UTF-8"?>-->
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:webflow="http://www.springframework.org/schema/webflow-config" 
       xmlns:faces="http://www.springframework.org/schema/faces" 
       xmlns:p="http://www.springframework.org/schema/p" 
       xmlns:context="http://www.springframework.org/schema/context" 
       xmlns:tx="http://www.springframework.org/schema/tx" 
       xmlns:aop="http://www.springframework.org/schema/aop" 

       xsi:schemaLocation=" http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
            http://www.springframework.org/schema/webflow-config 
            http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd 
            http://www.springframework.org/schema/faces 
            http://www.springframework.org/schema/faces/spring-faces-2.0.xsd 
            http://www.springframework.org/schema/context 
            http://www.springframework.org/schema/context/spring-context-2.5.xsd 
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-2.5.xsd" 
       default-autowire="byType"
>

<!-- Enable annotions -->
    <context:annotation-config />
    <context:component-scan base-package="cvut.dp.foodtables"/>
<!-- @Configurable -->
    <context:spring-configured/> 

<!-- Property files -->
    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>/WEB-INF/properties/jdbc.properties</value>
                <value>/WEB-INF/properties/jpa.properties</value>
            </list>
        </property>
    </bean>        
<!-- JDBC data source -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        <property name="initialSize" value="2" />
        <property name="minIdle" value="2" />
    </bean>
<!-- JPA settings --> 
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="${jpa.platform}"/>
                <property name="generateDdl" value="true"/>
                <property name="showSql" value="true"/>

            </bean>
        </property>
        <property name="packagesToScan" value="cvut.dp.foodtables" />
    </bean> 

<!-- Define transaction manager -->
    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

<!-- @Transactional support-->
    <tx:annotation-driven transaction-manager="txManager" /> 

</beans> 
```

我没有persistence.xml

jdbc.properties：

```
jdbc.driverClassName=org.hibernate.dialect.MySQLDialect
jdbc.url=jdbc:mysql://localhost:3306/FoodTables
jdbc.username=root 
```

jpa.properties：

```
jpa.platform=org.hibernate.dialect.MySQLDialect 
```

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">

<!-- SPRING -->
    <context-param>
        <description>Spring config files</description>
        <param-name>contextConfigLocation</param-name>
        <param-value>
                /WEB-INF/context/*.xml
        </param-value>
    </context-param>

    <listener>
        <description>Loads Spring on server start</description>
        <listener-class>
               org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <listener>
        <description>Request -> thread association</description>
        <listener-class>
               org.springframework.web.context.request.RequestContextListener
        </listener-class>
    </listener>  
<!-- SPRING END --> 
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

还有我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>cvut.dp</groupId>
    <artifactId>FoodTables</artifactId>
    <version>1.0</version>
    <packaging>war</packaging>

    <name>FoodTables</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-documentation</artifactId>
            <version>3.6.0.Beta2</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.7.1</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.8.Final</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <groupId>org.hibernate.javax.persistence</groupId>
            <type>jar</type>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>
    </dependencies>

    <build>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
                <filtering>true</filtering>
            </testResource>

            <testResource>
                <directory>src/main/webapp</directory>

                <filtering>true</filtering>

                <includes>
                    <include>**/context/applicationContext*.xml</include>
                    <include>**/properties/*.properties</include>
                </includes>
            </testResource>
        </testResources>  
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

谷歌搜索最多的答案是我应该在persistance.xml 中设置hibernate.transaction.jta.platform 属性，而我没有。这是我的第一个 Java EE 应用程序，我真的不知道我在做什么。但这个错误令人沮丧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T20:58:40.317

我有同样的问题。解决方案是在您的 xml 配置中使用 default-autowire="byName" 而不是 "byType"。如果您有“byType”，Spring 还会自动将 LocalContainerEntityManagerFactoryBean 中的属性“jtaDataSource”与您定义的数据源 bean 自动关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T05:53:18.830

虽然 jens 的答案是正确的并解决了您的问题，但我只想补充一点，您不必为此更改默认自动装配。您也可以在每个 bean 本身上设置它。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
autowire="byName">
... 
```

现在，除了“entityManagerFactory”之外，您的所有 bean 上仍然具有 byType-autowiring

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T03:58:22.683

这不是您的 jdbc.projects 中定义的密码条目。

> <property name="password" value="${jdbc.password}"/>

最好为您的项目创建一个独立的用户/密码，不要在您的生产中使用 root。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T16:21:46.937

尝试添加“META-INF/persistence.xml”：

```
 <persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
    <persistence-unit name="myUnit" transaction-type="RESOURCE_LOCAL">
    </persistence-unit>
    </persistence> 
```

在 org.springframework.orm.jpa.persistenceunit.MutablePersistenceUnitInfo 第 91 行 (PersistenceUnitTransactionType getTransactionType()) 设置断点也可以帮助您确定 spring 认为您有 jta-datasource 或事务类型的原因。