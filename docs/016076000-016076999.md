# StackOverflow 问答 16076000-16076999

# asp.net-mvc-4 - 在 MVC4 中验证数字但不等于 0

> ID：16076003
> 
> 赞同：6
> 
> 时间：2013-04-18T06:31:07.857
> 
> 标签：asp.net-mvc-4

我想在 mvc4 中使用 DataAnnotations 仅用于数字但大于 0 的有效值，请帮助。

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T06:33:36.620

您可以使用以下[`[Range]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)属性：

```
[Range(1, int.MaxValue, ErrorMessage = "The value must be greater than 0")]
public int Value { get; set; } 
```

# canvas - 模糊滤镜如何在 HTML5 Kinetic.Filters.Blur 中工作

> ID：16076008
> 
> 赞同：5
> 
> 时间：2013-04-18T06:31:22.160
> 
> 标签：canvas, html5-canvas, kineticjs

如何在 HTML5 中使用模糊过滤器？我发现这个：

```
Kinetic.Filters.Blur(imageData, config ) 
```

和参数：

```
imageData  {Object}  
config {Object}  
config.radius {Integer} 
```

用一个例子向我解释我如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T10:37:46.320

```
var image = new Kinetic.Image({
      x: 10,
      y: 10,
      image: imageObj,
      filter: Kinetic.Filters.Blur,
      filterRadius: 20
  }); 
```

查看本教程：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-tween-blur-filter-with-kineticjs/)

# jquery - 对 jquery .ajax .done() 函数感到困惑

> ID：16076009
> 
> 赞同：12
> 
> 时间：2013-04-18T06:31:22.283
> 
> 标签：jquery, ajax

我对如何使用 ajax .done() 函数有点困惑。我正在验证一个表单以检查用户是否存在于数据库中，尽管 ajax 将是最好的方法（仍在学习它）。我有一个 php 文件，如果用户存在则返回 true，如果用户不存在则返回 false。我如何将布尔值传递给 done 函数的参数？

```
$(".check").blur(function(){
  var username = $(".check").val();
  $.ajax({
    url: "validateUser.php",
    type: "post",
    data: "username= " + username
  }).done(function(result){
    if (result == true){
      // User exists
    }else{
      // User doesn't exist
    }
  });
}); 
```

我希望这是有道理的。我尽力解释了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:38:12.423

我认为它应该是 result == 'true' 因为结果是一个数据字符串

我刚刚检查过，我是正确的，引号使它起作用

PHP：

```
<?php

if($_POST['username']=='sambob'){echo 'true';}else{echo 'false';}

?> 
```

Javascript

```
username='sambob';

$(".check").blur(function(){
  $.post("validateUser.php", { username: username })
  .done(function(data) {
     if (data == 'true'){
        alert("User exists");
     }else{
        alert("User doesn't exist"); 
     }
  });
}); 
```

json PHP

```
<?php

if($_POST['username']=='sambob'){echo'{"exists":true}';}
                            else{echo'{"exists":false}';}
?> 
```

json Javascript

```
$(".check").blur(function(){
   $.post("validateUser.php", { username : username },
   function(user){
      if (user.exists == true){
         alert("User exists");
      }else{
         alert("User doesn't exist");
      }
   }, "json");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T06:36:07.720

在你的 php 方面，你应该回显一些`json string`，例如我会在下面这样做`validateUser.php`：

```
//Check your database etc.
$user_exists = array('error'=>false,'user'=>true);
echo json_encode($user_exists); 
```

和 jQuery 相比：

```
$.ajax({
    url: "validateUser.php",
    type: "post",
    data: "username= " + username,
    dataType: "json",
  }).done(function(result){
    if (result.error == false){
        //No errors, check user
        if(result.user == true)
            alert("Exists"); //now do some stuff
        else
            alert("User don't exists");
    }else{
      // There is an error
    }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T19:48:34.430

**Success**：它将返回 XHR 成功状态，例如：200
**Done**：一旦 XHR 成功，它将完成并返回返回数据

**试试下面的代码**

```
 $.ajax({
type: "POST",
url: Url,
data: dataParameter,
async: true,
success: function(results, textStatus) {
    debugger;
    console.log("success : " + results);
},
error: function(xhr, status, error)
{
    console.log("error : " + xhr.responseText);                   
}
}).done(function(results) {
    debugger;          
    console.log("done : " + results);           
}); 
```

# php - 在日期范围列表中省略多余的月份和年份

> ID：16076014
> 
> 赞同：6
> 
> 时间：2013-04-18T06:31:41.907
> 
> 标签：php, date, datetime, formatting

我对事件的日期有奇怪的问题，我努力修复它，但无法做到。

我附上了我想如何在页面上显示日期的屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/wpg0v.png)

图片中的第一个事件 Deine Energie in Aktion！是 5 个事件的组合，每个事件都有其开始日期和结束日期。

活动的第一部分是为期 1 天的活动，从 4 月 4 日开始，到 4 月 4 日结束。同样，第二部分是 4 月 7 日，第三部分是 4 月 9 日，第四部分是 4 月 20 日

最后一部分从 5 月 5 日开始，到 5 月 10 日结束。

日期以这种格式存储在数据库中：我正在显示事件最后一部分的日期。活动开始日期：2013-05-05 00:00:00 活动结束日期：2013-05-10 00:00:00

所以我想以图片中显示的格式显示日期。

有多种情况：首先，如果所有日期都在一个月内，那么我们只在末尾显示一次月份名称。其次，如果月份更改，则月份名称将显示在更改月份的日期之后。

我在 while 循环中获取事件日期，那么如何在循环中将当前事件日期与即将到来的事件日期进行比较。

这是我迄今为止用来从数据库中获取日期的代码..

```
 $nid = $row->nid;  
$get_product_id = "SELECT product_id from {uc_product_kits} where nid='$nid'";
$res = db_query($get_product_id);
while ($get_product_id_array_value = db_fetch_array($res)) {
    $prductid = $get_product_id_array_value['product_id'];
    $start_date = db_query("select event_start,event_end from {event} where nid=%d",$prductid);
    $start_date_value = db_fetch_object($start_date);
    $end_value = $start_date_value->event_start;

    $event_end_date = $start_date_value->event_end;
    $TotalStart =  date("d M Y", strtotime($end_value));
    $TotalEnd = date("d M Y", strtotime($event_end_date));
    $onlyMonthStart =  date("M", strtotime($end_value));
    $onlyMonthEnd = date("M", strtotime($event_end_date));
    //$groupMonth = db_query("select event_start,event_end, month  from {event} where nid=%d group by ",$prductid);
    if($TotalStart == $TotalEnd ){
        $startDay = date("d", strtotime($end_value));
        $startMonth = date("M", strtotime($end_value));
        if(in_array($startMonth,$newMonth)) {
            echo $onlstartdate;
        } 
        else {
              $onlstartdate =  date("d", strtotime($end_value));
             echo $onlstartdate;
             $tempStorage[] = $startMonth
        }
        //$newMonth[] = $startMonth;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:30:34.493

最简单的方法是首先将查询中的所有数据收集到例如数组中。

只有这样才能遍历数组。将所有数据放在一起将允许您比较两个连续的日期范围，以确定您需要为每个日期范围打印的详细信息级别。

评论示例：

```
// collect data from SQL query into structure like this:

$events = array(
    array("event_start" => "2013-4-4", "event_end" => "2013-4-4"),
    array("event_start" => "2013-4-7", "event_end" => "2013-4-7"),
    array("event_start" => "2013-4-9", "event_end" => "2013-4-9"),
    array("event_start" => "2013-4-20", "event_end" => "2013-4-20"),
    array("event_start" => "2013-5-5", "event_end" => "2013-5-10"),
    array("event_start" => "2014-1-1", "event_end" => "2014-1-2"),
);

// the actual code for range list generation:

for ($i = 0; $i < count($events); $i++)
{
    // parse start and end of this range
    $this_event = $events[$i];
    $this_start_date = strtotime($this_event["event_start"]);
    $this_end_date = strtotime($this_event["event_end"]);

    // extract months and years
    $this_start_month = date("M", $this_start_date);
    $this_end_month = date("M", $this_end_date);
    $this_start_year = date("Y", $this_start_date);
    $this_end_year = date("Y", $this_end_date);

    $last = ($i == count($events) - 1);
    // parse start and end of next range, if any
    if (!$last)
    {
        $next_event = $events[$i + 1];
        $next_start_date = strtotime($next_event["event_start"]);
        $next_end_date = strtotime($next_event["event_end"]);

        $next_start_month = date("M", $next_start_date);
        $next_end_month = date("M", $next_end_date);
        $next_start_year = date("Y", $next_start_date);
        $next_end_year = date("Y", $next_end_date);
    }

    // ranges with different starting and ending months always go
    // on their own line
    if (($this_start_month != $this_end_month) ||
        ($this_start_year != $this_end_year))
    {
        echo date("j M", $this_start_date);
        // print starting year only if it differs from ending year
        if ($this_start_year != $this_end_year)
        {
            echo " ".date("Y", $this_start_date);
        }
        echo "-".date("j M Y", $this_end_year)." <br/>\n";
    }
    else
    {
        // this is range starting and ending in the same month

        echo date("j", $this_start_date);
        // different starting and ending day
        if ($this_start_date != $this_end_date)
        {
            echo "-".date("j", $this_end_date);
        }

        $newline = false;
        // print month for the last range;
        // and for any range that starts(=ends) in different month
        // than the next range ends
        if ($last ||
            ($this_start_month != $next_end_month))
        {
            echo " ".date("M", $this_start_date);
            $newline = true;
        }

        // print year for the last range;
        // and for any range that starts(=ends) in different year
        // than next range ends
        if ($last ||
            ($this_start_year != $next_end_year) ||
            ($next_start_month != $next_end_month))
        {
            echo " ".date("Y", $this_start_date);
            $newline = true;
        }

        if ($newline)
        {
            echo " <br/>\n";
        }
        else
        {
            // month (and year) will be printed for some future range
            // on the same line
            echo ", ";
        }
    }
} 
```

这输出：

```
4, 7, 9, 20 Apr <br/>
5-10 May 2013 <br/>
1-2 Jan 2014 <br/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:23:58.110

检查是否需要为当前日期项目打印月份的一种可能性实际上是检查***下一个***项目。让我尝试用伪代码来解释：

```
<?php

    $month = 0;  // Initialize $month variable to unset

    // Loop over all your events
    foreach($dates as $date) {

        // Convert $date to a timestamp

        // If the 'month' of the current $timestamp is unequal to $month
        // it means we switch months and we have to print the $month first
        if(date('m', $timestamp) != $month) {

            echo $month;  // Of course format how you want it to be displayed

            // Set $month to the new month
            $month = date('m', $timestamp);
        }

        // Print the rest of the event, like day numbers here

    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:54:07.633

好吧，由于您需要将一个循环的值与另一个循环进行比较，因此您将无法`echo`直接使用。

您需要使用临时变量。因此，使用开始日期的第一个循环，您可以存储`$tmp_day_1`，`$tmp_month_1`然后使用结束日期循环，您可以比较两个月份并检查它们是否不同。然后你可以使用`echo`. 我希望我能表达我的观点：）

# c# - SQLite C# WPF 读取错误

> ID：16076015
> 
> 赞同：2
> 
> 时间：2013-04-18T06:31:41.980
> 
> 标签：c#, sqlite, ado.net

我是 c# 新手，我想阅读 .db 文件，我已在此链接的帮助下将 ADO.NET 2.0 Provider for SQLite 添加到我的项目中：http: [//sourceforge.net/projects/sqlite-dotnet2/](http://sourceforge.net/projects/sqlite-dotnet2/)。但是我在运行时遇到错误，我无法理解这个问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Data;
using System.Diagnostics;
using System.Data.SQLite;

namespace WpfApplication1.Screens
{
    /// <summary>
    /// Interaction logic for FirstScreen.xaml
    /// </summary>
    public partial class FirstScreen : UserControl, ISwitchable
    {

        public FirstScreen()
        {
            InitializeComponent();

            Debug.WriteLine("Send to debug output.");

                        String connString = "Data Source=C:\\projects.db";
            using (SQLiteConnection conn = new SQLiteConnection(connString))
            {
                StringBuilder query = new StringBuilder();
                query.Append("SELECT App ");
                query.Append("FROM Alqueva ");

                using (SQLiteCommand cmd = new SQLiteCommand(query.ToString(), conn))
                {
                    conn.Open();
                    using (SQLiteDataReader dr = cmd.ExecuteReader())
                    {
                        while (dr.Read())
                        {
                           Debug.WriteLine(dr.GetValue(0) + " " + dr.GetValue(1) + " " + dr.GetValue(2));
                        }
                    }
                }
            }
            //Console.ReadLine();

        }

    }
} 
```

错误：

```
System.Windows.Markup.XamlParseException was unhandled
  Message='The invocation of the constructor on type 'WpfApplication1.MainWindow' that matches the specified binding constraints threw an exception.' Line number '3' and line position '9'.
  Source=PresentationFramework
  LineNumber=3
  LinePosition=9
  StackTrace:
       at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadBamlStreamWithSyncInfo(Stream stream, ParserContext pc)
       at System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
       at System.Windows.Application.DoStartup()
       at System.Windows.Application.<.ctor>b__1(Object unused)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at System.Windows.Application.Run()
       at WpfApplication1.App.Main() in C:\Users\User\documents\visual studio 2010\Projects\WpfApplication1\WpfApplication1\obj\x86\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.IO.FileLoadException
       Message=Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.
       Source=WpfApplication1
       StackTrace:
            at WpfApplication1.Screens.FirstScreen..ctor()
            at WpfApplication1.MainWindow..ctor() in C:\Users\User\documents\visual studio 2010\Projects\WpfApplication1\WpfApplication1\MainWindow.xaml.cs:line 17
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:35:57.170

将此添加到您的网络/应用程序配置中：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0"/>
</startup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:36:05.297

您的 Sqlite 连接必须是这样的：

```
Data Source=name.db;Version=3; 
```

[SQLite 的连接字符串](http://www.connectionstrings.com/sqlite)

在 App.config 添加

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0"/>
</startup> 
```

# php - PHP Instagram api在通过身份验证时获取“代码”并刷新

> ID：16076016
> 
> 赞同：0
> 
> 时间：2013-04-18T06:31:45.257
> 
> 标签：php, api, authentication, oauth-2.0, instagram

HI 试图弄清楚身份验证是如何工作的。我的 Instagram 已通过身份验证，然后它会将我重定向到“回调”或“redirect_uri”。当我被重定向时，一切都按预期进行。我得到了一个`?code=54325114`应该的。

但是为什么当我刷新时，就像我不再经过身份验证一样？我无法检索数据。当我回到我的索引 php 时（在身份验证之前），我再次被重定向，然后进行了`code`更改，它再次工作，但是当我刷新时，它不再。

我处理这种情况的正确方法是什么？

谢谢，希望我的场景有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T06:35:47.160

我参加聚会似乎有点晚了，但无论如何。

当您使用 IG API 对用户进行身份验证时，您会收到一个身份验证代码。此代码仅有效一次。当您获得此代码时，您必须请求访问令牌，您可以多次使用该令牌。获取代码后，您应该立即获取访问令牌并将其缓存（作为会话变量或 cookie）。然后，如果用户重新加载页面，您应该检查是否已经缓存了访问令牌，如果有，您不应该尝试重新生成它。

# vb.net - 组和总和列表（vb.net）

> ID：16076019
> 
> 赞同：0
> 
> 时间：2013-04-18T06:31:55.627
> 
> 标签：vb.net, linq, group-by

我有一个对象列表

```
 Class Bundledtellingen
        Property tTimestamp As String
        Property tValue As Double
    End Class 
```

现在我正在尝试按 tTimestamp 和总和 tValue 对这个列表进行分组。通过搜索类似的问题，很明显最好的方法是使用 Linq。我把这个放在一起：

```
 Dim query = bundledlist.GroupBy( _
    Function(telling) telling.tTimestamp, _
    Function(telling) telling.tTimestamp, _
    Function(ts, values) New With _
        {.Key = ts, _
        .Sum = values.Sum()} _
    )

    Using writer As StreamWriter = New StreamWriter("C:\test.txt")
        For Each result In query
            writer.WriteLine(result.Key & " " & result.Sum)
        Next
    End Using 
```

据我所知，通过查看[http://msdn.microsoft.com/en-us/library/bb534493.aspx#Y0](http://msdn.microsoft.com/en-us/library/bb534493.aspx#Y0)上的示例，这应该可以工作，尽管我得到以下异常：“重载解析失败，因为没有可访问的 'Sum' 接受这个数量的参数。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:38:43.243

您在`GroupBy`调用中指定了一个不必要的参数。你的那个：

```
Dim query = bundledlist.GroupBy( _
                Function(telling) telling.tTimestamp, _
                Function(ts, values) New With _
                    {.Key = ts, _
                    .Sum = values.Sum()} _
                ) 
```

第一个是键选择器，第二个是结果选择器。

带有 3 个参数的调用具有附加值选择器，您在其中选择`Function(telling) telling.tTimestamp`了两次 - 一次 for`Key`和一次 for `Value`。这就是你`Sum`没有工作的原因：你尝试了 call `Sum`on `telling.tTimestamp`。

# mysql - 简单的 SELECT mysql 查询很慢（使用 intersect）

> ID：16076021
> 
> 赞同：3
> 
> 时间：2013-04-18T06:31:56.803
> 
> 标签：mysql

过去在生产服务器上运行良好的查询开始变得非常缓慢（在几个小时内）。

就是这个：

`SELECT * FROM news_articles WHERE published = '1' AND news_category_id = '4' ORDER BY date_edited DESC LIMIT 1;`

执行最多需要**20-30 秒**（表有 ~200.000 行）

这是的输出`EXPLAIN`：

```
+----+-------------+---------------+-------------+----------------------------+----------------------------+---------+------+------+--------------------------------------------------------------------------+
| id | select_type | table         | type        | possible_keys              | key                        | key_len | ref  | rows | Extra                                                                    |
+----+-------------+---------------+-------------+----------------------------+----------------------------+---------+------+------+--------------------------------------------------------------------------+
|  1 | SIMPLE      | news_articles | index_merge | news_category_id,published | news_category_id,published | 5,5     | NULL | 8409 | Using intersect(news_category_id,published); Using where; Using filesort |
+----+-------------+---------------+-------------+----------------------------+----------------------------+---------+------+------+--------------------------------------------------------------------------+ 
```

玩弄它，我发现暗示一个特定的索引 ( `date_edited`) 使它更快：

`SELECT * FROM news_articles USE INDEX (date_edited) WHERE published = '1' AND news_category_id = '4' ORDER BY date_edited DESC LIMIT 1;`

这需要**几毫秒来执行**。

`EXPLAIN`这个的输出是：

```
+----+-------------+---------------+-------+---------------+-------------+---------+------+------+-------------+
| id | select_type | table         | type  | possible_keys | key         | key_len | ref  | rows | Extra       |
+----+-------------+---------------+-------+---------------+-------------+---------+------+------+-------------+
|  1 | SIMPLE      | news_articles | index | NULL          | date_edited | 8       | NULL |    1 | Using where |
+----+-------------+---------------+-------+---------------+-------------+---------+------+------+-------------+ 
```

列`news_category_id`,`published`和`date_edited`都被索引。

存储引擎是 InnoDB。

这是表结构：

```
CREATE TABLE `news_articles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` text NOT NULL,
  `subtitle` text NOT NULL,
  `summary` text NOT NULL,
  `keywords` varchar(500) DEFAULT NULL,
  `body` mediumtext NOT NULL,
  `source` varchar(255) DEFAULT NULL,
  `source_visible` int(11) DEFAULT NULL,
  `author_information` enum('none','name','signature') NOT NULL     DEFAULT 'name',
  `date_added` datetime NOT NULL,
  `date_edited` datetime NOT NULL,
  `views` int(11) DEFAULT '0',
  `news_category_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `c_forwarded` int(11) DEFAULT '0',
  `published` int(11) DEFAULT '0',
  `deleted` int(11) DEFAULT '0',
  `permalink` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  KEY `news_category_id` (`news_category_id`),
  KEY `published` (`published`),
  KEY `deleted` (`deleted`),
  KEY `date_edited` (`date_edited`),
  CONSTRAINT `news_articles_ibfk_3` FOREIGN KEY (`news_category_id`) REFERENCES `news_categories` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `news_articles_ibfk_4` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=192588 DEFAULT CHARSET=utf8 
```

我可能会更改我的 Web 应用程序执行的所有查询以提示使用该索引。但这是一项相当大的工作。

是否有某种方法可以调整 MySQL，以便在不实际重写所有查询的情况下提高第一个查询的效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:11:29.777

只是一些提示..

1 - 在我看来，发布的字段和 news_category_id 是整数。如果是这样，请从您的查询中删除单引号。在性能方面，它可以产生巨大的影响；

2 - 另外，我想说您发布的字段没有很多不同的值（可能是 1 - 是和 0 - 否，或类似的东西）。如果我是对的，这根本不是一个好的索引字段。在这种情况下，解析仍然需要遍历所有记录才能找到它要查找的内容；在这种情况下，将 news_category_id 移动到 WHERE 子句中的第一个字段。

3 - “不要忘记最左边的索引”。此确认对您的 SELECT、JOINS、WHERE、ORDER BY 有效。即使表格上列的位置也很重要，请将索引的列放在顶部。只要您知道如何使用索引，它们就是您的朋友。

希望它能以某种方式帮助你..

SELECT * FROM news_articles WHERE published = '1' AND news_category_id = '4' ORDER BY date_edited DESC LIMIT 1;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T14:39:53.853

原来的： `SELECT * FROM news_articles WHERE published = 1 AND news_category_id = 4 ORDER BY date_edited DESC LIMIT 1;`

由于您有**LIMIT 1**，因此您只选择最新的行。**ORDER BY date_edited**告诉 MySQL 进行排序，然后从顶部取出 1 行。这真的很慢，为什么**USE INDEX**会有所帮助。

尝试在**WHERE 子句中匹配****MAX(date_edited)**。这应该让查询规划器自动使用它的索引。

 **选择 MAX(date_entered)： `SELECT * FROM news_articles WHERE published = 1 AND news_category_id = 4 AND date_edited = (select max(date_edited) from news_articles);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T06:59:57.113

请将您的查询更改为：

SELECT * FROM news_articles WHERE published = 1 AND news_category_id = 4 ORDER BY date_edited DESC LIMIT 1;

请注意，我已从查询中提供的“1”和“4”数据中删除引号

传递的数据类型和列结构的差异不允许mysql能够使用这2列上的索引。**

# c++ - 了解一些 C++ 编码实践

> ID：16076022
> 
> 赞同：6
> 
> 时间：2013-04-18T06:32:01.233
> 
> 标签：c++, debugging, gdb

我目前正在尝试了解以下代码（[http://pastebin.com/zTHUrmyx](http://pastebin.com/zTHUrmyx)）的工作原理，我的方法目前是在调试中编译软件并使用 gdb 逐步执行代码。

但是，我遇到了“步骤”并不总是告诉我发生了什么的问题。我特别不清楚的是`EXECUTE {...}`我无法进入。

我如何去了解代码在做什么？

```
 1     /*
   2     Copyright 2008 Brain Research Institute, Melbourne, Australia
   3
   4     Written by J-Donald Tournier, 27/06/08.
   5
   6     This file is part of MRtrix.
   7
   8     MRtrix is free software: you can redistribute it and/or modify
   9     it under the terms of the GNU General Public License as published by
  10     the Free Software Foundation, either version 3 of the License, or
  11     (at your option) any later version.
  12
  13     MRtrix is distributed in the hope that it will be useful,
  14     but WITHOUT ANY WARRANTY; without even the implied warranty of
  15     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16     GNU General Public License for more details.
  17
  18     You should have received a copy of the GNU General Public License
  19     along with MRtrix.  If not, see <http://www.gnu.org/licenses/>.
  20
  21
  22     15-10-2008 J-Donald Tournier <d.tournier@brain.org.au>
  23     * fix -prs option handling
  24     * remove MR::DICOM_DW_gradients_PRS flag
  25
  26     15-10-2008 J-Donald Tournier <d.tournier@brain.org.au>
  27     * add -layout option to manipulate data ordering within the image file
  28
  29     14-02-2010 J-Donald Tournier <d.tournier@brain.org.au>
  30     * fix -coord option so that the "end" keyword can be used
  31
  32
  33 */
  34
  35 #include "app.h"
  36 #include "image/position.h"
  37 #include "image/axis.h"
  38 #include "math/linalg.h"
  39
  40 using namespace std;
  41 using namespace MR;
  42
  43 SET_VERSION_DEFAULT;
  44
  45 DESCRIPTION = {
  46   "perform conversion between different file types and optionally extract a subset of the input image.",
  47   "If used correctly, this program can be a very useful workhorse. In addition to converting images between different formats, it can be used to extract specific studies from a data set, extract a specific region of interest, flip the images, or to scale the intensity of the images.",
  48   NULL
  49 };
  50
  51 ARGUMENTS = {
  52   Argument ("input", "input image", "the input image.").type_image_in (),
  53   Argument ("ouput", "output image", "the output image.").type_image_out (),
  54   Argument::End
  55 };
  56
  57
  58 const gchar* type_choices[] = { "REAL", "IMAG", "MAG", "PHASE", "COMPLEX", NULL };
  59 const gchar* data_type_choices[] = { "FLOAT32", "FLOAT32LE", "FLOAT32BE", "FLOAT64", "FLOAT64LE", "FLOAT64BE",
  60     "INT32", "UINT32", "INT32LE", "UINT32LE", "INT32BE", "UINT32BE",
  61     "INT16", "UINT16", "INT16LE", "UINT16LE", "INT16BE", "UINT16BE",
  62     "CFLOAT32", "CFLOAT32LE", "CFLOAT32BE", "CFLOAT64", "CFLOAT64LE", "CFLOAT64BE",
  63     "INT8", "UINT8", "BIT", NULL };
  64
  65 OPTIONS = {
  66   Option ("coord", "select coordinates", "extract data only at the coordinates specified.", false, true)
  67     .append (Argument ("axis", "axis", "the axis of interest").type_integer (0, INT_MAX, 0))
  68     .append (Argument ("coord", "coordinates", "the coordinates of interest").type_sequence_int()),
  69
  70   Option ("vox", "voxel size", "change the voxel dimensions.")
  71     .append (Argument ("sizes", "new dimensions", "A comma-separated list of values. Only those values specified will be changed. For example: 1,,3.5 will change the voxel size along the x & z axes, and leave the y-axis voxel size unchanged.")
  72         .type_sequence_float ()),
  73
  74   Option ("datatype", "data type", "specify output image data type.")
  75     .append (Argument ("spec", "specifier", "the data type specifier.").type_choice (data_type_choices)),
  76
  77   Option ("scale", "scaling factor", "apply scaling to the intensity values.")
  78     .append (Argument ("factor", "factor", "the factor by which to multiply the intensities.").type_float (NAN, NAN, 1.0)),
  79
  80   Option ("offset", "offset", "apply offset to the intensity values.")
  81     .append (Argument ("bias", "bias", "the value of the offset.").type_float (NAN, NAN, 0.0)),
  82
  83   Option ("zero", "replace NaN by zero", "replace all NaN values with zero."),
  84
  85   Option ("output", "output type", "specify type of output")
  86     .append (Argument ("type", "type", "type of output.")
  87         .type_choice (type_choices)),
  88
  89   Option ("layout", "data layout", "specify the layout of the data in memory. The actual layout produced will depend on whether the output image format can support it.")
  90     .append (Argument ("spec", "specifier", "the data layout specifier.").type_string ()),
  91
  92   Option ("prs", "DW gradient specified as PRS", "assume that the DW gradients are specified in the PRS frame (Siemens DICOM only)."),
  93
  94   Option::End
  95 };
  96
  97
  98
  99 inline bool next (Image::Position& ref, Image::Position& other, const std::vector<int>* pos)
 100 {
 101   int axis = 0;
 102   do {
 103     ref.inc (axis);
 104     if (ref[axis] < ref.dim(axis)) {
 105       other.set (axis, pos[axis][ref[axis]]);
 106       return (true);
 107     }
 108     ref.set (axis, 0);
 109     other.set (axis, pos[axis][0]);
 110     axis++;
 111   } while (axis < ref.ndim());
 112   return (false);
 113 }
 114
 115
 116
 117
 118
 119 EXECUTE {
 120   std::vector<OptBase> opt = get_options (1); // vox
 121   std::vector<float> vox;
 122   if (opt.size())
 123     vox = parse_floats (opt[0][0].get_string());
 124
 125
 126   opt = get_options (3); // scale
 127   float scale = 1.0;
 128   if (opt.size()) scale = opt[0][0].get_float();
 129
 130   opt = get_options (4); // offset
 131   float offset = 0.0;
 132   if (opt.size()) offset = opt[0][0].get_float();
 133
 134   opt = get_options (5); // zero
 135   bool replace_NaN = opt.size();
 136
 137   opt = get_options (6); // output
 138   Image::OutputType output_type = Image::Default;
 139   if (opt.size()) {
 140     switch (opt[0][0].get_int()) {
 141       case 0: output_type = Image::Real; break;
 142       case 1: output_type = Image::Imaginary; break;
 143       case 2: output_type = Image::Magnitude; break;
 144       case 3: output_type = Image::Phase; break;
 145       case 4: output_type = Image::RealImag; break;
 146     }
 147   }
 148
 149
 150
 151
 152   Image::Object &in_obj (*argument[0].get_image());
 153
 154   Image::Header header (in_obj);
 155
 156   if (output_type == 0) {
 157     if (in_obj.is_complex()) output_type = Image::RealImag;
 158     else output_type = Image::Default;
 159   }
 160
 161   if (output_type == Image::RealImag) header.data_type = DataType::CFloat32;
 162   else if (output_type == Image::Phase) header.data_type = DataType::Float32;
 163   else header.data_type.unset_flag (DataType::ComplexNumber);
 164
 165  
 166   opt = get_options (2); // datatype
 167   if (opt.size()) header.data_type.parse (data_type_choices[opt[0][0].get_int()]);
 168
 169   for (guint n = 0; n < vox.size(); n++)
 170     if (isfinite (vox[n])) header.axes.vox[n] = vox[n];
 171
 172   opt = get_options (7); // layout
 173   if (opt.size()) {
 174     std::vector<Image::Axis> ax = parse_axes_specifier (header.axes, opt[0][0].get_string());
 175     if (ax.size() != (guint) header.axes.ndim())
 176       throw Exception (String("specified layout \"") + opt[0][0].get_string() + "\" does not match image dimensions");
 177
 178     for (guint i = 0; i < ax.size(); i++) {
 179       header.axes.axis[i] = ax[i].axis;
 180       header.axes.forward[i] = ax[i].forward;
 181     }
 182   }
 183
 184
 185   opt = get_options (8); // prs
 186   if (opt.size() && header.DW_scheme.rows() && header.DW_scheme.columns()) {
 187     for (guint row = 0; row < header.DW_scheme.rows(); row++) {
 188       double tmp = header.DW_scheme(row, 0);
 189       header.DW_scheme(row, 0) = header.DW_scheme(row, 1);
 190       header.DW_scheme(row, 1) = tmp;
 191       header.DW_scheme(row, 2) = -header.DW_scheme(row, 2);
 192     }
 193   }
 194
 195   std::vector<int> pos[in_obj.ndim()];
 196
 197   opt = get_options (0); // coord
 198   for (guint n = 0; n < opt.size(); n++) {
 199     int axis = opt[n][0].get_int();
 200     if (pos[axis].size()) throw Exception ("\"coord\" option specified twice for axis " + str (axis));
 201     pos[axis] = parse_ints (opt[n][1].get_string(), header.dim(axis)-1);
 202     header.axes.dim[axis] = pos[axis].size();
 203   }
 204
 205   for (int n = 0; n < in_obj.ndim(); n++) {
 206     if (pos[n].empty()) {
 207       pos[n].resize (in_obj.dim(n));
 208       for (guint i = 0; i < pos[n].size(); i++) pos[n][i] = i;
 209     }
 210   }
 211
 212
 213   in_obj.apply_scaling (scale, offset);
 214
 215
 216
 217
 218
 219
 220   Image::Position in (in_obj);
 221   Image::Position out (*argument[1].get_image (header));
 222
 223   for (int n = 0; n < in.ndim(); n++) in.set (n, pos[n][0]);
 224
 225   ProgressBar::init (out.voxel_count(), "copying data...");
 226
 227   do {
 228
 229     float re, im = 0.0;
 230     in.get (output_type, re, im);
 231     if (replace_NaN) if (gsl_isnan (re)) re = 0.0;
 232     out.re (re);
 233
 234     if (output_type == Image::RealImag) {
 235       if (replace_NaN) if (gsl_isnan (im)) im = 0.0;
 236       out.im (im);
 237     }
 238
 239     ProgressBar::inc();
 240   } while (next (out, in, pos));
 241
 242   ProgressBar::done();
 243 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:09:54.830

正如评论中所指出的，`EXECUTE`似乎是一个宏，从上下文中可以看出一个函数头（可能还有更多，例如一些全局变量和函数），所以花括号中的部分是函数体。

要获得 的定义`EXECUTE`，您必须检查标题。

但是，如果您可以在调试期间访问代码的某些部分，则可以在该点插入 a `string`or ，为其提供字符串化版本 ，因此您可以获得预处理器将在代码中的*该位置*发出的任何内容。`char[]``EXECUTE``EXECUTE`

 *```
#define STR(x) #x
#define STRINGIFY(x) STR(x)
char c[] = STRINGIFY(EXECUTE); 
```

这两个宏是一个已知的小宏技巧，可以将任何宏的内容作为字符串文字获取。尝试一下并检查调试器中的 char 数组以获取执行的内容。

我在这里疯狂的猜测：`EXECUTE`是主要功能还是它的替代品，`OPTIONS`并`ARGUMENTS`描述了程序期望的参数以及可以传递给它的命令行选项。这些宏和一些使用的函数和变量（`get_options`, `argument`）是一个小框架的一部分，应该有助于命令行选项的使用、评估和用户信息。*

# java - 如何为@SuiteClasses 自动创建一个列表

> ID：16076038
> 
> 赞同：1
> 
> 时间：2013-04-18T06:32:38.653
> 
> 标签：java, junit4

我需要在 Maven 构建过程中运行我的 JUnit 测试用例的一个子集。为此，我决定使用 JUnit 类别。我创建了两个标记接口：`UnitTest`并将`IntegrationTest`它们分配给我的一堆 JUnit 测试用例。现在我需要为他们创建一个测试套件：

```
package ru.hive.parser;

import org.junit.experimental.categories.Categories;
import org.junit.experimental.categories.Categories.IncludeCategory;
import org.junit.runner.RunWith;
import org.junit.runners.Suite.SuiteClasses;

import ru.hive.test.UnitTest;

@RunWith(Categories.class)
@IncludeCategory(UnitTest.class)
@SuiteClasses({ SomeClass.class })
public class ParserTestSuite {

} 
```

问题是`@SuiteClasses`注释，我需要在其中列出我想在测试套件中加入的所有类，并且我有很多（超过 100 个）这样的类，而且数量还在增长。如果我有办法自动构建类列表，我会很好。我已经在 stackoverflow 上阅读了与我自己类似的所有问题，但没有一个答案符合我的需求，因为我需要使用`@RunWith(Categories.class)`而不是其他测试运行器。任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:01:18.220

Maven 能够使用类别运行器。见这里：[http ://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html](http://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html)

您还可以使用[类路径套件](http://johanneslink.net/projects/cpsuite.jsp)并对其进行修改以使用类别运行器进行在类路径上找到的测试（如果它还没有这样做呢？）。

生成一长串列表`@SuiteClasses`似乎不值得付出努力。

# java - Android蓝牙接收到的串口数据乱码

> ID：16076041
> 
> 赞同：0
> 
> 时间：2013-04-18T06:32:51.830
> 
> 标签：java, android, matlab, bluetooth

我已经通过以下线程来解决我的疑问。但是，目前还不清楚。

[为什么我收到的串行 BT 数据会被截断？](https://stackoverflow.com/questions/10483342/why-does-the-serial-bt-data-i-received-get-chopped-out)

克里斯，这是你建议的一个很好的解决方法。在您提供的解决方案中，附加 '\n' 的解决方案适合我，因为我只是将浮点值从我的 PC（MATLAB）（在转换为字符串后）传输到我的 Android 手机。我正在使用以下代码通过搜索“\n”对数据进行分组，但接收到的数据有时仍会出现乱码。请告诉我我要改变什么。

```
aReader = new InputStreamReader( mmInStream );
mBufferedReader = new BufferedReader( aReader );
aString = mBufferedReader.readLine();
mHandler.obtainMessage(BluetoothActivity.MESSAGE_READ, aString).sendToTarget(); 
```

这是我在处理程序中显示数据的内容：

```
String readMessage = (String) msg.obj;
        try{
            float readM = Float.parseFloat(readMessage);
            text.append("\n" + readM);
        }catch (NumberFormatException e) {
            text.append("\n Number Format Exception!!");
            e.printStackTrace();
        } 
```

这种接待有什么问题？如果您能尽快回答会很好，因为这是我项目的结束部分，并且截止日期即将到来。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:23:08.623

我自己解决了这个问题。我将分隔符从 '\n' 更改为 'N'（因为我的数据中没有任何字符是浮点值）并且我已经实现了令人满意的传输率，数据完整性超过 99%（在我发送的 2000 个样本中）以 MATLAB 每秒 600 个样本的速率，接收器（我的应用程序）只有 10 个样本出现乱码。但是，感谢@Chris Stratton 的想法！

# flot - Flot xaxis 刻度超过指定的数字

> ID：16076046
> 
> 赞同：1
> 
> 时间：2013-04-18T06:33:20.317
> 
> 标签：flot

我是 Flot 的新手，所以我对刻度的理解是 flot 将在图表上绘制的列数。

由于我的标签很长，有 6 个刻度非常适合。但大多数时候，它只是超过了我设定的数字，这就把标签搞砸了。

我认为这与 Flot 的算法有关？有什么办法可以将其修复为 6 列吗？

我如何设置它的简单方法。

```
xaxis: { mode: 'time', timeformat: "%y/%m/%d %H:%M:%S", tick:6 }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:33:18.230

刻度选项是一个指南。Flot 尝试匹配该值，但它的首要任务是选择“round”值，即 5:00 而不是 5:01。

有几种方法可以解决此问题，具体取决于您的数据。有保证的解决方案是手动计算您的六个刻度值，并在“刻度”数组选项中将它们提供给 Flot。除此之外，您可以通过调整 minTickSize 和轴 min/max 来诱使 Flot 生成正确的刻度数。

# ruby-on-rails-3 - Rails：验证两个字段

> ID：16076052
> 
> 赞同：1
> 
> 时间：2013-04-18T06:33:40.280
> 
> 标签：ruby-on-rails-3, validation

一个快速的问题。我有两个字段pick_up 和delivery。我希望用户在提交表单时输入两个字段之一。方法：

```
 validates pick_up or delivery, :presence => :true. 
```

至少应该有一个。

如何编写此验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:26:50.570

验证：pickup_or_delivery

```
def pickup_or_delivery
  if [self.pick_up, self.delivery].compact.blank.size == 0
    errors[:base] << ("Please select one option")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T03:48:11.663

这是一个足够简单的验证，我只做一个单行：

```
validate { errors.add(:base, 'Please select one option') if pick_up.blank? && delivery.blank? } 
```

# python - 如何在python中发送带有附件的电子邮件

> ID：16076056
> 
> 赞同：0
> 
> 时间：2013-04-18T06:34:03.290
> 
> 标签：python, email, attachment

我有一个创建 csv 文件的脚本，我还需要将其作为附件发送到电子邮件中。到目前为止，我还没有找到一个可行的例子来说明如何做到这一点。是否有“标准”代码可以做到这一点？有人可以提供一个很好的例子来说明如何做到这一点吗？任何帮助将非常感激。谢谢。

# elasticsearch - 从 asciifolding 转换中排除某些字符

> ID：16076058
> 
> 赞同：1
> 
> 时间：2013-04-18T06:34:06.443
> 
> 标签：elasticsearch

我已经设置了一个带有 asciifolding 过滤器的分析器。

此过滤器替换字母 ç=>c 和 ñ=>n。我需要将原始 ç 和 ñ 保留在令牌中。

有没有办法在 asciifolding 过滤器中设置异常？如果没有，我可以使用 char_filter 来做 asciifolding 过滤器对重音而不是 ç 和 ñ 的作用，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:20:42.210

我没有在 asciifolding 中找到任何异常配置，所以我设置了一个 char_filter 与我需要的映射并在我的分析器中应用（没有 asciifolding）：

char_filter: { my_map: { type: "mapping", mappings: [ "á" => "a", "à" => "a" .... ] } }

# java - 我可以将 IntelliJ 设置为自动缩进代码体吗？

> ID：16076059
> 
> 赞同：5
> 
> 时间：2013-04-18T06:34:14.193
> 
> 标签：java, intellij-idea, ide, indentation

问题一：IntelliJ可以设置成换行自动缩进代码体吗？

这是我的意思的一个例子：

我有这个方法：

```
 public static void main(String[] args)
        {
            System.out.println("Hi there.");
        } 
```

输入表达式后按回车键，我得到这个：

```
 public static void main(String[] args)
        {
            System.out.println("Hi there.");
        // the new line aligns itself with the braces.
        } 
```

我希望它这样做：

```
 public static void main(String[] args)
        {
            System.out.println("Hi there.");
            // the new line aligns itself with the preceding line
        } 
```

我无法在“设置”下的任何地方找到可以使其成为默认行为的选项。它存在吗？我想念它还是在寻找独角兽？

问题 2：是否可以选择让代码体默认缩进？如果有，在哪里可以找到？

例子：

使用“重新格式化代码...”命令后，我得到以下信息：

```
 public static void main(String[] args)
        {
        System.out.println("Hi there.");
        // the code body is realigned with the braces
        } 
```

是否可以设置 IntelliJ 来执行此操作，如果可以，我在哪里可以找到该选项？：

```
 public static void main(String[] args)
        {
            System.out.println("Hi there.");
            // the code body is indented from the braces
        } 
```

这是我在“设置”选项中似乎找不到的另一件事。

任何帮助都会很棒。谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:42:09.390

您应该使用以下`Next line, each shifted`选项：

![在此处输入图像描述](https://i.stack.imgur.com/OrTrD.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-10T21:45:16.860

**IntelliJ IDEA 15**

文件 > 设置... > 编辑器 > 代码样式 > Java > 包装和大括号 > 大括号放置 > 在方法声明中 >**下一行，每个移动**

[![下一行每个移动](https://i.stack.imgur.com/ywgVN.png)](https://i.stack.imgur.com/ywgVN.png)

# javascript - 有人可以为我解释这段代码吗？window.clientTimeDivergence = (1366265216 * 1000) - (新日期).getTime();

> ID：16076060
> 
> 赞同：0
> 
> 时间：2013-04-18T06:34:18.990
> 
> 标签：javascript

> window.clientTimeDivergence = (1366265216 * 1000) - (新日期).getTime();

我想知道变化的值 1366265216 是什么意思；以及这整个表达的含义。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:38:01.930

在表达式中：

```
1366265216 
```

可能是一个 UNIX 时间值，它是自 1970-01-01T00:00:00Z 以来的秒数，可能是 2013-04-18T06:06:56Z。做就是了：

```
alert(new Date(1366265216*1000)); 
```

看看你当地的时区是什么。

Javascript 日期对象的[时间值](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)使用相同的纪元，但以毫秒为单位。因此，该值乘以 1,000 以将其更改为毫秒。

```
new Date 
```

返回当前时间的 javascript Date 对象。

```
.getTime(); 
```

返回 javascript 日期对象的时间值（即自 1970-01-01T00:00:00Z 以来的毫秒数）。所以结果是两次之间的毫秒差。

它可能用于估计将数据从服务器发送到客户端所需的时间，并假设两端的时钟是同步的（或者至少在可能几秒的可接受容差内同步）。如果两者都连接到互联网并正确配置，则很可能出现这种情况，但不能保证它们是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T00:24:46.187

Grooveshark 前端工程师在这里。看起来您是从我们的源代码中找到的。

该代码正在获取服务器时间和用户时间的差异，然后将其用于站点的所有时间计算。当我们需要在用户的时区或相对于用户的时钟中显示时间值时，这有助于我们稍后。

它本可以用来确定请求花费了多长时间，但 RobG 指出，用户的时钟可能是错误的。该值是在响应结束时计算的，因此如果响应需要一段时间才能到达用户的浏览器，我们的偏移量可能会略有错误，但这种差异并不重要。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T06:43:45.367

`(new Date()).getTime()`在 中给出当前时间`milliseconds`，因此`1366265216`似乎是以**秒**为单位的某个时间，它被转换`milliseconds` 为从 中减去结果`(new Date()).getTime()`。

顺便说一句，你错过`()`了`(new Date).getDate();`

另外，您可以检查`var date = new Date(1366265216)`或`var date = new Date(1366265216*1000)`找出`1366265216`.

# visual-studio - Visual Studio project publishes, but no content

> ID：16076062
> 
> 赞同：1
> 
> 时间：2013-04-18T06:34:22.847
> 
> 标签：visual-studio

Good Day

I want to publish a project in Visual Studio 2012 Ultimate. Now it publishes fine (as a File System to C:\Projects), BUT, when opening the folder it publishes in C:\Projects...There is nothing. It is empty. Why is that?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:42:43.120

我有同样的问题 。只需尝试删除您当前的配置文件并为该项目添加一个新配置文件。

# android - 在 android 和 ios 应用程序中显示图像的最可行方法

> ID：16076069
> 
> 赞同：0
> 
> 时间：2013-04-18T06:34:39.213
> 
> 标签：android, ios

我想在应用程序中显示大约 1000 多个图像。在设备或数据库中存储图像的最有效方式是什么？

我在我的应用程序中使用 sqlite 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:39:22.343

将您的图像存储在服务器上而不是将其下载到设备中，将您的图像作为缓存或简单图像保存到 sdcard 中。在一次成功下载图像时，将其路径存储到您的表中并在您的应用程序中使用。

使用延迟加载概念在应用程序中加载图像。最好将图像存储在 sdcard 中而不是数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:40:35.140

在 android 或 ios 中不要将大图像保存到数据库在 sqlite 或核心数据中，它可能导致数据库不一致，并且像 sqlite 这样的数据库不是为保存大图像而设计的。

在android中使用 [内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal) 或[外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

在 ios 中使用 [iOS 文件系统](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:01:51.497

如果将图像存储在服务器中会更好。但是，如果您无权访问服务器，则将图像路径存储在 SQLite 数据库中并将图像存储在 sdcard 中。这样做总是一种很好的编程习惯。

# python - 年度投资的未来价值

> ID：16076072
> 
> 赞同：0
> 
> 时间：2013-04-18T06:35:05.393
> 
> 标签：python

假设你有一个投资计划，每年年初投资一定的固定金额。计算去年年底的投资总价值。输入将是每年的投资金额、利率和投资年数。

该程序计算固定年度投资的未来价值。输入年投资额：200 输入年利率：.06 输入年数：12 12年的值为：3576.427533818945

我尝试了一些不同的方法，如下所示，但它没有给我 3576.42，它只给了我 400 美元。有任何想法吗？

```
principal = eval(input("Enter the yearly investment: "))
apr = eval(input("Enter the annual interest rate: "))
years = eval(input("Enter the number of years: "))
for i in range(years):
    principal = principal * (1+apr)
print("The value in 12 years is: ", principal) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:46:55.890

如果是年度投资，则应每年添加：

```
yearly = float(input("Enter the yearly investment: "))
apr = float(input("Enter the annual interest rate: "))
years = int(input("Enter the number of years: "))

total = 0
for i in range(years):
    total += yearly
    total *= 1 + apr

print("The value in 12 years is: ", total) 
```

有了你的输入，这个输出

```
('The value in 12 years is: ', 3576.427533818945) 
```

**更新：**从评论中回答您的问题，以澄清发生了什么：

1）你可以使用`int()`for`yearly`并得到相同的答案，如果你总是投资整数货币，这很好。例如，使用浮点数同样有效，但也允许金额`199.99`为 。

2)`+=`并且`*=`是方便的简写：`total += yearly`表示`total = total + yearly`. 它更容易打字，但更重要的是，它更清楚地表达了意思。我是这样读的

```
for i in range(years): # For each year
    total += yearly    # Grow the total by adding the yearly investment to it
    total *= 1 + apr   # Grow the total by multiplying it by (1 + apr) 
```

较长的形式并不那么清楚：

```
for i in range(years):        # For each year
    total = total + yearly    # Add total and yearly and assign that to total
    total = total * (1 + apr) # Multiply total by (1 + apr) and assign that to total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-06T14:39:33.723

它可以解析地完成：

```
"""
pmt = investment per period
r = interest rate per period
n = number of periods
v0 = initial value
"""
fv = lambda pmt, r, n, v0=0: pmt * ((1.0+r)**n-1)/r + v0*(1+r)**n
fv(200, 0.09, 10, 2000)
```

同样，如果您想弄清楚需要投资的金额以便达到某个数字，您可以执行以下操作：

```
pmt = lambda fv, r, n, v0=0: (fv - v0*(1+r)**n) * r/((1.0+r)**n-1) 
pmt(1000000, 0.09, 20, 0)
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:46:05.287

正如评论中所建议的，你不应该`eval()`在这里使用。（有关 eval 的更多信息可以[在 Python 文档](http://docs.python.org/2/library/functions.html#eval)中找到）。-- 相反，更改您的代码以使用`float()`或`int()`在适用的情况下，如下所示。

此外，您的`print()`声明打印出括号和逗号，我希望您不想要。我在下面的代码中清理了它，但如果你想要的是你可以随意放回去。

```
principal = float(input("Enter the yearly investment: "))
apr = float(input("Enter the annual interest rate: "))

# Note that years has to be int() because of range()
years = int(input("Enter the number of years: "))

for i in range(years):
    principal = principal * (1+apr)
print "The value in 12 years is: %f" % principal 
```

# c - What happens to a function's stack when it returns?

> ID：16076074
> 
> 赞同：1
> 
> 时间：2013-04-18T06:35:15.910
> 
> 标签：c, stack

```
#include <stdio.h>

void function()
{
    int stackVar = 10;
    printf("Stack variable = %d\n", stackVar);
}

int main(void)
{
    function();
    return 0;
} 
```

What happens to the stack frame of `function` when it returns?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:36:24.983

这是*未定义*的行为（与实现定义或未指定相反）。这意味着该程序可以随意行为不端，或者不以任何方式取悦。

这在**6.2.4 对象的存储持续时间中有详细说明：**

> 1 对象具有决定其生命周期的存储期限。共有三种存储持续时间：静态、自动和分配。分配的存储在 7.20.3 中描述。
> 
> 2 对象的生命周期是程序执行期间保证为其保留存储的部分。一个对象存在，有一个不变的地址，并在其整个生命周期中保留其最后存储的值。**如果对象在其生命周期之外被引用，则行为未定义。**当指针指向的对象到达其生命周期的末尾时，指针的值变得不确定。
> 
> 3 使用外部或内部链接或存储类说明符 static 声明其标识符的对象具有静态存储持续时间。它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。
> 
> 4**其标识符被声明为没有链接且没有存储类说明符 static 的对象具有自动存储持续时间。**
> 
> 5 对于这种不具有可变长度数组类型的对象，**其生命周期从进入与其关联的块开始，直到该块的执行以任何方式结束。**（进入封闭的块或调用函数会暂停，但不会结束当前块的执行。）如果递归地进入块，则每次都会创建一个新的对象实例。对象的初始值是不确定的。如果为对象指定了初始化，则在执行块时每次到达声明时都会执行它；否则，每次达到声明时，该值变得不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:41:18.507

首先，您已经对问题进行了大幅编辑，因此其他答案（有点不公平）不再相关。不过，要回答当前的问题：

> 返回时函数的堆栈帧会发生什么？

在我看来，您对堆栈的运行方式缺乏总体感觉。所以 - 在这里有点疯狂 - 但会尝试一个可能使它“点击”的类比。您可以将堆栈帧想象成海滩上的波浪。嵌套的函数调用越深，这些函数在参数和局部变量中的数据越多，使用的内存就越多。这就像海浪到达海滩更远的地方。随着作用域的退出，内存被有效地释放——忘记了该内存的用途。海浪也会退去。尽管如此，在程序的整个生命周期中，随着不同的函数序列进入和退出，相同的内存（海滩的水平）被重复使用（在水下）和被遗忘（而不是在水下）。离海滩最远的地方往往被覆盖的频率最低，持续时间也很短，`main()`呆在那里直到程序终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:37:03.147

您正在调用未定义的行为。
当您从函数返回时，堆栈帧被破坏（超出范围），您可能会收到留在函数中的值，但这只是巧合。

有关一些示例，请参阅[Wikipedia ，并](http://en.wikipedia.org/wiki/Undefined_behavior)[在此处](http://phoxis.org/2012/06/11/c-code-question-1-return-local-var-addr/)查看文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:43:53.123

未定义的行为。您正在从函数返回局部变量地址，因为堆栈帧已被破坏（超出范围）。现在，如果内存（地址）没有被覆盖，那么您将获得相同的值，否则您将获得垃圾。

# .net - Deploying with TeamCity

> ID：16076077
> 
> 赞同：0
> 
> 时间：2013-04-18T06:35:27.897
> 
> 标签：.net, desktop-application, setup-deployment, teamcity-7.0

Our team started a solution which consists of 4 projects - a desktop app, 2 web app, a win- and a web-services.

We decided to use TeamCity as a CI server and decided to use it as for building setup packages (nightly builds). Google shows me a lot of articles on how to deploy web application, using .zip packages - but no one upon how to create a msi or setup.

Also no clues on how to do the same for a non-web project - as are desktop apps, web- and win -services.

Have anyone used TeamCity for building and deploying a non-web application?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:04:31.033

免责声明：我不使用 Teamcity 构建 Windows 非 Web 应用程序。主要是 Java Web 或独立应用程序以及 iOS 和 Android 应用程序

在teamcity中，有一个`"Visual Studio (sln)`“构建步骤类型，尝试看看你是否可以利用它。

或者，我将调查是否可以使用 构建 msi 和 setup `MSBuild`，如果可能的话，我可以`MSBuild`在 teamcity 中添加一个类型构建步骤来创建 msi 或 setup。

或者我可以想象自己尝试使用[WiX Toolset](http://wixtoolset.org/)`cmd`创建一个或`powershell`脚本来构建 msi ，并安装在我的 teamcity 构建代理上。`WiX`

然后在 Teamcity 项目设置中，添加调用此构建脚本的构建步骤（类型`Command Line`或）。`Powershell`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:38:22.913

我选择 Dao 方式 - NAnt+TeamCity - NAnt 脚本[从 SVN 进行结帐/更新](http://byatool.com/lessons/using-subversion-with-nant-automated-checkouts-from-config-file/)，构建解决方案，通过编译设置项目来准备设置......

就这样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:54:22.210

我使用 Visual Studio (VS 2012) 构建运行器。我有一个参数 system.OutDir，我指定了一个输出目录。

然后我运行了一个 powershell 脚本，它将 system.OutDir 的内容自动复制到我们的 NAS，并使用包含正确连接字符串的不同 web.config 覆盖构建输出中的 web.config。

非常容易设置 - 您不必处理 web.config 转换。

# java - 通过另一个 java 程序执行具有输入语句的 java 程序

> ID：16076078
> 
> 赞同：0
> 
> 时间：2013-04-18T06:35:29.067
> 
> 标签：java, compiler-construction, web

大家好，我正在尝试制作在线 java 编译器。

作为初始 POC，我能够编译和运行没有输入语句的程序，但如果也有输入语句，我不知道该怎么办。

我正在使用 Runtime.getRuntime().exec 来编译和运行输入 java 程序。

具有我试图运行和执行的输入语句的示例程序是：

```
public class HelloWorld {
public static void main(String[] args) {
    System.out.println("Hello world..................");
    Scanner sc = new Scanner(System.in);
    System.out.println("Enter Name");
    String name = sc.nextLine();
    System.out.println("you entered " + name);
    sc.close();
} 
```

}

问题是当我通过编译和运行它的代码编译和运行上面的程序时，我得到 System.out.println("Enter Name"); 的“输入名称”。在 HelloWorld.java 但之后没有任何反应。

# android - 稀疏数组作为单选 ListView

> ID：16076079
> 
> 赞同：0
> 
> 时间：2013-04-18T06:35:29.217
> 
> 标签：android, listview

我从服务器检索到以下数据：

```
[
  {id: 8, name: "Item1"},
  {id: 14, name: "Item2"},
  {id: 30, name: "Item3", active: true},
  {id: 42, name: "Item4"}
] 
```

我想将该数据放入单选 ListView（在 Dialog 中，使用`setSingleChoiceItems()`），并在用户做出选择后，将项目 ID 发送回服务器。

怎么做？我想出的唯一解决方案是使用一些辅助数组来保持列表项（AFAIK 必须按顺序进行）和项 ID（几乎是随机的）之间的映射。我也尝试使用一些适配器，但不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:18:47.720

制作您自己的自定义 ListView 并覆盖 getView 以在每一行中显示您想要的任何内容。您将需要一个 ViewHolder 类来提取您创建的自定义行列表视图。看看这个：

[单选 ListView 自定义行布局](https://stackoverflow.com/questions/8295026/single-choice-listview-custom-row-layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:19:08.663

这里的例子使用单选列表视图给你：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
     <ListView
        android:id="@+id/listview1"
        android:cacheColorHint="#00000000"
        android:scrollbars="none"
        android:fadingEdge="vertical"
        android:soundEffectsEnabled="true"
        android:dividerHeight="1px"
        android:padding="5dip"
        android:smoothScrollbar="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:layout_marginBottom="10dip"
        android:layout_weight="1"/>

</LinearLayout> 
```

活动：

```
 String[] items = new String[] { "Item1", "Item2", "Item3", "Item4" };
    int[] itemsIds = new int[] { 8, 14, 30, 42 };
    ListView listView = (ListView)findViewById(R.id.listview1);
    listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, android.R.id.text1, items));
    listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            //here send your item id itemsIds[position]
        }
    }); 
```

# c# - 将背景图像导入/设置到 Windows 窗体导致运行缓慢

> ID：16076086
> 
> 赞同：2
> 
> 时间：2013-04-18T06:35:43.813
> 
> 标签：c#, winforms

我将背景图像导入项目中的每个表单现在我的程序运行缓慢？

我怎样才能解决这个问题？

图片的格式是png。

这样做有什么需要考虑的吗？解决问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:43:40.273

在您的表单中，将属性设置`DoubleBuffered`为`true`

> 缓冲图形要求首先将更新的图形数据写入缓冲区。然后将图形缓冲区中的数据快速写入显示的表面内存。显示图形存储器的相对快速切换通常会减少否则可能发生的闪烁。

而不是使用`PNG`质量`JPEG`12 的格式（最终图像质量就像`PNG`格式），您的图像尺寸减小并且您的表单加载速度更快。

# c# - How do I maintain the selected item in GridView DropDownList

> ID：16076087
> 
> 赞同：3
> 
> 时间：2013-04-18T06:35:47.497
> 
> 标签：c#, asp.net, gridview

My problem is I am not able to retain the item in the gridview after the Gridview_RowEditing event.

```
 <asp:TemplateField HeaderStyle-CssClass="gridHeading" HeaderText="Get Alerts By SMS"
                                ItemStyle-CssClass="gridValue" ItemStyle-HorizontalAlign="Center">
         <ItemTemplate>
                 <asp:Label ID="lblAlertBySMSGeofence" runat="server" Text=' <%# (Convert.ToBoolean(Convert.ToInt32(Eval("alertBySMS")))) ? "Yes" : "No" %>'></asp:Label>
         </ItemTemplate>
         <EditItemTemplate>
              <asp:DropDownList ID="ddlAlertBySMSGeofence" runat="server" AppendDataBoundItems="true"
                                        CssClass="gridValue">
                                        <asp:ListItem Text="Yes" Value="1"/>
                                        <asp:ListItem Text="No" Value="0" />
                                    </asp:DropDownList>
                                </EditItemTemplate>
                                <HeaderStyle CssClass="gridHeading" />
                                <ItemStyle CssClass="gridValue" HorizontalAlign="Center" />
 </asp:TemplateField> 
```

**EDIT**

```
 protected void grdGeofence_RowEditing(object sender, GridViewEditEventArgs e)
    {

        GridViewRow row = (GridViewRow)grdGeofence.Rows[e.NewEditIndex];
        grdGeofence.EditIndex = e.NewEditIndex;
        List<COMMONGeofenceAlert> geofenceData = new BLsmsalertdetail().getGeofencealertDetail(Session["sessaccountid"].ToString(), txtdeviceID.Text);
        for (int y = 0; y < geofenceData.Count; y++)
        {
            geofenceData[y].vehicleNumber = ddlVehicleNumber.SelectedItem.Text;
        }
        grdGeofence.DataSource = geofenceData;
        grdGeofence.DataBind();
    }

protected void grdGeofence_RowUpdating(object sender, GridViewUpdateEventArgs e)
 {
    GridViewRow row = (GridViewRow)grdGeofence.Rows[e.RowIndex];

    string id = grdGeofence.DataKeys[e.RowIndex].Value.ToString();

    Label lblVehicle = (Label)row.FindControl("lblVehicleGeofence");
    TextBox mobileNumber = (TextBox)row.FindControl("txtMobileGeofence");
    TextBox EmailID = (TextBox)row.FindControl("txtEmailGeofence");
    DropDownList ddlAlertBySMS = (DropDownList)row.FindControl("ddlAlertBySMSGeofence");
    DropDownList ddlAlertbyEmail = (DropDownList)row.FindControl("ddlAlertByeEmailGeofence");
    DropDownList AlertAtGeofenceEnter = (DropDownList)row.FindControl("ddlAlertGeofenceEnter");
    DropDownList alertAtGeofenceExit = (DropDownList)row.FindControl("ddlAlertGeofenceExit");
    DropDownList ddlAddress = (DropDownList)row.FindControl("ddlGeofenceAddressGrid");
    BLsmsalertdetail detail = new BLsmsalertdetail();

    int i = updateGeofence(id, mobileNumber.Text, EmailID.Text, ddlAlertBySMS.SelectedItem.Value, ddlAlertbyEmail.SelectedItem.Value, AlertAtGeofenceEnter.SelectedItem.Value, alertAtGeofenceExit.SelectedItem.Value, ddlAddress.SelectedItem.Text);
    if (i == 1)
    {
        ScriptManager.RegisterClientScriptBlock(this.Page, typeof(Page), Guid.NewGuid().ToString(), "alert('Success!!')", true);
    }
    else
    {
        ScriptManager.RegisterClientScriptBlock(this.Page, typeof(Page), Guid.NewGuid().ToString(), "alert('Error!! Could not Update the value.')", true);
        }

        grdGeofence.EditIndex = -1;
        List<COMMONGeofenceAlert> geofenceData = new BLsmsalertdetail().getGeofencealertDetail(Session["sessaccountid"].ToString(), txtdeviceID.Text);
        for (int y = 0; y < geofenceData.Count; y++)
        {
            geofenceData[y].vehicleNumber = ddlVehicleNumber.SelectedItem.Text;
        }
        grdGeofence.DataSource = geofenceData;
        grdGeofence.DataBind();
}

protected void grdGeofence_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (grdGeofence.EditIndex == e.Row.RowIndex && e.Row.RowType == DataControlRowType.DataRow)
        {
            DropDownList ddlAddress = (DropDownList)e.Row.Cells[0].FindControl("ddlGeofenceAddressGrid");
            List<COMMONsmsalertdetail> getSmsDispatcherData = new BLsmsalertdetail().getSMSalertDetail(Session["sessaccountid"].ToString());

            for (int i = 0; i < getSmsDispatcherData.Count; i++)
            {
                ddlAddress.Items.Add(new ListItem(getSmsDispatcherData[i].place, getSmsDispatcherData[i].place));
       }
            //ddlAddress.DataSource = getSmsDispatcherData;
            //ddlAddress.DataTextField = "place";
            //ddlAddress.DataValueField = "place";
            //ddlAddress.DataBind();
        }
    } 
```

The database return 0/1 depending upon the situation and I convert it into Yes and No using boolean expressions.

I want to keep the value of `"lblAlertBySMSGeofence"` as the selected text of the dropdownlist `"ddlAlertBySMSGeofence"`

I have seen many solution of many websites including SO. But the method are too lengthy and are also not in context with my situation. I have around 100 dropdownlists and I cannot rewrite the code again and again..

Is there a simpler way to do it.?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:35:36.700

`SelectedValue='<%#Eval("alertBySMS")%>'`为.添加属性`DropDowList` `ddlAlertBySMSGeofence`。检查链接[如何在 GridView EditTemplate 中设置 DropDownList 的 SelectedValue 以](https://stackoverflow.com/questions/3474933/how-to-set-selectedvalue-of-dropdownlist-in-gridview-edittemplate)获取更多详细信息。

```
<EditItemTemplate>
  <asp:DropDownList ID="ddlAlertBySMSGeofence" runat="server"
      AppendDataBoundItems="true" SelectedValue='<%#Eval("alertBySMS")%>'  
      CssClass="gridValue">
         <asp:ListItem Text="Yes" Value="1" />
         <asp:ListItem Text="No" Value="0" />
</asp:DropDownList> 
```

# asp.net-mvc-4 - Bundling and Minification Issue in Chrome but works fine in Mozilla

> ID：16076090
> 
> 赞同：3
> 
> 时间：2013-04-18T06:35:48.727
> 
> 标签：asp.net-mvc-4, bundling-and-minification

I have few JS files which i am trying to Bundle using MVC4, the code is as follows:-

```
public static void RegisterBundles(BundleCollection bundles)
{
    //Global App Items go here.
    bundles.Add(new ScriptBundle("~/Scripts/modernizr")
        .Include("~/Scripts/modernizr-*"));
    bundles.Add(new ScriptBundle("~/bundles/lib")
        .Include(
            "~/Scripts/jquery.js",
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*",
            "~/Scripts/jquery-ui*",
            "~/Scripts/jquery.tablesorter.js"));

    bundles.Add(new StyleBundle("~/content/bootstrap")
        .Include("~/Content/bootstrap.css"));

    var lessBundle = new Bundle("~/content/myApp").Include(
        "~/Content/jqueryMultiSelect.less",                
        "~/Content/scrollbars.css");
    lessBundle.Transforms.Add(new LessTransform());
    lessBundle.Transforms.Add(new CssMinify());
    bundles.Add(lessBundle);

    BundleTable.EnableOptimizations = true;
} 
```

Now, when i see my `console` in Firefox, I can see my Response as Expected. But when same i do it in Chrome, the bundled file is broken.

Broken may be a non-technical term, What i mean by broken is :- ![enter image description here](https://i.stack.imgur.com/zWSxL.png)

The file is incomplete....

Please let me know, if i need to provide more detail.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:22:00.863

它实际上是显示问题。

在 chrome 中，js 文件长度是有限的，所以不能完全显示。

尝试在新选项卡中打开该文件，您将看到全部内容。

在 Firefox 中，它会提示用户在新选项卡中打开以查看完整内容。

# c# - C# cannot take new memory

> ID：16076094
> 
> 赞同：-2
> 
> 时间：2013-04-18T06:35:56.937
> 
> 标签：c#, memory-management, managed-c++

I am working a c# - c++ (manage) mix project and we realize there are memory leaks in our project, so I searched and found out, destructor of c++ part never called so I wrote a piece of code to free memories. Now I can see program growing slower in memory (there are more memory leaks), but the problem is, in c# part program start to crash because of "`out of memory exception`". In operation such as

```
double []k = new double[65536]; 
```

Memory usage of program normally seems 400-500mb but it crashed.
OS : win server 2003
Memory : 4 GB
OS should let program to grow nearly 1200 mb but after I wrote the free memory part it start to crash 400-500mb.
I called this c++ func from the c# part to free memories

```
freeMemories()
{
   if(!mIsAlreadyFreedMemory)
   {
      mIsalreadyFreedMemory = true;
      _aligned_free(pointerA);
      _aligned_free(pointerB);
       ....
    }
} 
```

Why it cannot take new memory, Program can not take the released memory again?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:26:50.207

您应该`IDisposable`为您的对象使用该模式。基本思想是这样的：

```
public class MyObject : IDisposable
{
    // Some unmanaged resource:
    UnmanagedResource unmanaged;

    // Finalizer:
    ~MyObject
    {
        DisposeUnmanaged();
    }

    public void Dispose()
    {
        DisposeManaged();
        DisposeUnmanaged();
        GC.SuppressFinalize(this);
    }

    protected virtual DisposeManaged()
    {
        // Dispose _managed_ resources here.
    }

    protected virtual DisposeUnmanaged()
    {
        // Dispose _unmanaged_ resources here.
        this.unmanaged.FreeMe();
        this.unmanaged = null;
    }
} 
```

然后，您可以`Dispose`在确定不再需要它时立即调用您的对象，并且将释放非托管内存。

```
MyObject obj;
obj.Dispose(); 
```

或者，如果您忘记调用`Dispose`，则当垃圾收集器（通过终结器）收集对象时，将释放非托管资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:42:05.590

我找到了解决我的问题的方法。问题的原因是内存碎片。在我的项目中，在项目的 c++ 部分中有很多大的（0.5 mb *（15-20 分配））对齐的内存分配，所以在分配和释放内存之后，不断地。有足够的内存用于未来的操作，但它被分成小部分。为了防止这种情况，我使用了**内存池模式**。而不是进行大量分配。我分配了一个大池并将其用于所有带有指针的数组。所以在c#部分操作如；
双 []k = 新双 [65536];
操作现在不会引起问题。

# hadoop - Hadoop：FSCK 结果显示缺少副本

> ID：16076102
> 
> 赞同：8
> 
> 时间：2013-04-18T06:36:10.930
> 
> 标签：hadoop, hive, hdfs, hiveql

谁能让我知道如何修复丢失的副本？

==================================================== ===========================

总大小：3447348383 B

总目录：120

文件总数：98

总块（已验证）：133（平均块大小 25919912 B）

最少复制块：133 (100.0 %)

过度复制的块：0 (0.0 %)

复制不足的块：21 (15.789474 %)

错误复制的块：0 (0.0 %)

默认复制因子：3

平均块复制：2.3834586

损坏块：0

缺少副本：147 (46.37224 %)

数据节点数：3

机架数量：1

==================================================== ===========================

根据无限指南，

损坏或丢失的块是最令人担忧的原因，因为这意味着数据已经丢失。默认情况下，fsck 会留下带有损坏或丢失块的文件，但您可以告诉它对它们执行以下操作之一：

• 使用-move 选项将受影响的文件移动到HDFS 中的/lost+found 目录。文件被分成连续的块链，以帮助您尝试进行任何挽救工作。

• 使用-delete 选项删除受影响的文件。文件删除后无法恢复。

我的问题是如何找出受影响的文件？我已经与 Hive 合作以毫无问题地获得所需的输出。它会影响查询处理的性能/速度吗？

问候，

拉吉

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T00:17:14.970

随着时间的推移，丢失的副本应该可以自我修复。但是，如果您想将它们移动到 lost+found，您可以使用：

```
hadoop fsck / -move 
```

或删除它们：

```
hadoop fsck / -delete 
```

如果您只想识别具有复制不足的块的文件，请使用：

```
hadoop fsck / -files -blocks -locations 
```

这将为您提供很多详细信息，包括预期/实际块复制计数的列表。

# clojure - 如何找到符号的完全限定名称空间？

> ID：16076103
> 
> 赞同：4
> 
> 时间：2013-04-18T06:36:13.780
> 
> 标签：clojure, namespaces

如果我有一个名称空间是别名的符号，例如 q/w，我怎样才能找到它的实际名称空间，比如 actual.namespace/w ？

我知道这`resolve`会给我完全限定的 var，但我不知道如何获取 var 的命名空间。

我能做的最好的是：

```
 (defn fqns [s] (str (get (ns-aliases *ns*) (symbol (namespace s))))) 
```

肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:53:53.370

您可以获得符号的命名空间对象，如下所示（如果您希望 ns 的名称作为字符串，则只需在最后调用 str ）：

```
(defn fqns [s] (->> (resolve s) meta :ns)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:25:03.197

符号本身与任何命名空间对象没有直接联系；它的命名空间部分只是一个内部字符串。只有当它被`resolve`d 时，该字符串才被视为要在其中查找 Var 的实际名称空间的名称。（特别是，您可以在`foo/bar`不创建名称空间`foo`或注册`foo`为名称空间别名的情况下创建符号。）因此，您需要自己完成`resolve`或完成它的部分工作。

在第一种情况下，您可以说（在最近的 Clojure 版本中；或者您可以跳过表示属性访问的连字符 -- 而不是`-ns`, 使用`ns`-- 以向后兼容）

```
(.. (resolve s) -ns -name) 
```

这会解析一个 Var 对象，然后从其字段中提取对其命名空间的引用`ns`，最后从其字段中提取命名空间的符号名称`name`。（注意`namespace`and`name`函数不起作用，因为 Vars 和命名空间没有实现`clojure.lang.Named`。）

问题文本中的函数也很好，尽管从命名空间中提取符号名称会更好`(.-name (get ...))`——而不是`toString`通过使用`str`.

您可能还想添加`clojure.lang.Var`和`clojure.lang.Namespace`键入提示以避免在您的调用中产生反射。（如果您希望它们更快，或者如果您需要`*warn-on-reflection*`调整其他性能以提高性能并希望避免此处出现无用的警告。）

如果您希望处理命名空间不存在的可能性（并`nil`在这种情况下返回，与通常的 Clojure 习惯用法保持一致）：

```
(defn fqns
  ([s]
    (fqns (.-name *ns*) s))
  ([ns s]
    (some-> ns
            find-ns
            .-name
            ns-aliases
            (get (symbol (namespace s)))
            .-name))) 
```

`if-let`或者在 Clojure 1.4 和更早的版本中使用一些s。

# java - 内容长度分隔消息正文的过早结束

> ID：16076106
> 
> 赞同：1
> 
> 时间：2013-04-18T06:36:20.737
> 
> 标签：java, selenium, testng

我正在使用`TestNG`带有 java selenium web 驱动程序的框架，但出现以下错误

```
Caused by: org.apache.http.ConnectionClosedException: Premature end of Content-Length delimited message body (expected: 56258; received: 53248 ) 
```

请帮助我解决问题。

我正在使用 firefox`20.0.1`和 selenium jar 文件版本`2.32.0`

# c# - 如何禁用选项卡，以便用户无法更改？

> ID：16076107
> 
> 赞同：5
> 
> 时间：2013-04-18T06:36:22.790
> 
> 标签：c#, winforms, tabs

我想做一个测验，通过问题，请记住，在使用问题 1 时，其他问题被禁用。单击下一步按钮后，它应直接更改为 Q2，禁用 Q1，依此类推。

单击“下一步”按钮后，如何使其禁用上一个选项卡并保持当前选项卡处于启用状态？

![如何保持禁用其他选项卡？](https://i.stack.imgur.com/TsJG5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T13:55:23.260

另一个解决方案（我认为最简单的）：

*   使用全局变量（此处为 currentSelectedTab）

*   使用事件选择

    ```
     // currentSelectedTab is the Only Tab I want enabled.
      TabPage currentSelectedTab = tabWizardControl.TabPages[0];

      private void tabWizardControl_Selecting(object sender, TabControlCancelEventArgs e)
      {
          int selectedTab = tabWizardControl.SelectedIndex;
          //Disable the tab selection
          if (currentSelectedTab != selectedTab)
          {
              //If selected tab is different than the current one, re-select the current tab.
              //This disables the navigation using the tab selection.
              tabWizardControl.SelectTab(currentSelectedTab);
          }
      } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-11T06:18:24.750

如前所述，可以通过索引选择选项卡。

和以前一样，让我们​​禁用所有其他选项卡：

```
foreach(TabPage tab in tabControl.TabPages)
{
    tab.Enabled = false;
}
(tabControl.TabPages[0] as TabPage).Enabled = true; 
```

现在防止导航到任何其他选项卡的方法很简单：

```
private void tabControl_Selecting(object sender, TabControlCancelEventArgs e)
    {
        if (!e.TabPage.Enabled)
        {
            e.Cancel = true;
        }
    } 
```

**唯一的缺点是它们看起来是可选的，这意味着它们不会变灰。如果您还希望外观看起来不可用，则必须自己执行此操作。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T06:45:12.733

可以通过索引访问选项卡，如下所示：

```
tabControl.TabPages[0] 
```

因此，假设您从选项卡 1（索引 = 0）开始，您想禁用所有其他选项卡。

```
// This can be done manually in the designer as well.
foreach(TabPage tab in tabControl.TabPages)
{
    tab.Enabled = false;
}
(tabControl.TabPages[0] as TabPage).Enabled = true; 
```

现在，当您按下 Next 按钮时，您想要禁用当前选项卡，启用下一个选项卡，然后转到下一个选项卡。但请记住检查选项卡是否存在！

```
if(tabControl.TabCount - 1 == tabControl.SelectedIndex)
  return; // No more tabs to show!

tabControl.SelectedTab.Enabled = false;
var nextTab = tabControl.TabPages[tabControl.SelectedIndex+1] as TabPage;
nextTab.Enabled = true;
tabControl.SelectedTab = nextTab; 
```

**免责声明：**这未经测试，但应该是这样的。

您说您收到关于不包含已启用定义的对象的错误 - 我的代码将每个标签页类型转换为 TabPage。但是我还没有测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:20:54.107

我遵循了这种方式：

i) 具有 currentIndex 值的全局变量。

ii) 将 SelectedIndexChanged 事件处理程序添加到 tabControl。

iii) 在 SelectedIndexChanged 处理程序中，将索引设置回 currentIndex。

iv) 在 NextButton Click 事件中更改 currentIndex

这可能有效：

```
 currentIndex = 0; //global initial setting

   tabControl1.SelectedIndexChanged += new EventHandler(tabControl1_SelectedIndexChanged);

   void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
   {
       tabControl1.SelectedIndex = currentIndex;
       return;
   }

   private void nextButton_Click(object sender, EventArgs e)
   {
       currentIndex += 1;

       if (currentIndex >= tabControl1.TabPages.Count)
       {
           currentIndex = 0;
       }

       foreach (TabPage pg in tabControl1.TabPages)
       {
           pg.Enabled = false;
       }

       tabControl1.TabPages[currentIndex].Enabled = true;
       tabControl1.SelectedIndex = currentIndex;
   } 
```

# java - 如何抑制新的短信通知？

> ID：16076110
> 
> 赞同：0
> 
> 时间：2013-04-18T06:36:26.727
> 
> 标签：java, android, notifications, sms, broadcastreceiver

我正在编写自己的短信信使，我需要完全禁止默认股票信使发出的新短信通知。可以肯定的是，我正在拦截传入的 SMS 通知并`Broadcast`通过中止`BroadcastReceiver.abortBroadcast()`，例如：

```
public void onReceive(Context context, Intent intent) {
        Map<String, String> msgs = retrieveMessages(intent);
        for (String address : msgs.keySet()) {
            String msg = msgs.get(address);
            Log.i(TAG, "New sms received=" + msg);
            //saving message in phone
            Message message = Message.createIncomingMessage(address, msg);
            message.setSeen(1); ////mark message seen, so stock messenger couldn't arose notification
            message.setRead(1); //mark message read, so stock messenger couldn't report it as unread
            message.setUnread(true); //mark message unread for our messenger
            message = Me.getMe().getMessageDAO().save(context, message); //saving message 
            SmsReceiver.updateNotification(context, message, true, true); //raise notification from "our" messenger
        }
        //aborting default broadcast, since everything already done and no need to do more
        this.abortBroadcast();
    } 
```

一切都按计划进行。但是，每当我`Me.getMe().getMessageDAO().save(context, message);`在几秒钟内通过股票信使将新短信插入数据库时​​，就会以某种方式收到有关数据库中新消息的通知，并再次发出通知。

问题是：如何抑制这个通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:49:52.587

首先你需要设置`priority`你的接收器[见文档](http://developer.android.com/guide/topics/manifest/intent-filter-element.html#priority)。

其次，`abortBroadCast`在您执行繁重的处理任务（存储到数据库中）之前调用。

或者您可以尝试将此数据库存储在线程中，启动线程并`abortBroadcast()`立即调用。

# android - 将我的ios应用程序移植到android应用程序很难吗？

> ID：16076118
> 
> 赞同：0
> 
> 时间：2013-04-18T06:37:00.560
> 
> 标签：android, ios, transplant

我有一些ios app想要实现部署到android play市场，难不难？我知道如何开发object c程序，但不熟悉android编码。任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:03:30.943

我现实你不能将用目标 c 编写的 ios 应用程序转换为 Android 应用程序。

如果它只使用 html 和 JS，它会更容易，否则最好从[这里](http://developer.android.com/about/start.html)开始使用 java 和 xml for android ，如果你很清楚你的应用程序的逻辑，你可以很容易地实现。

# html - 在 HTML 中插入表单的正确方法是什么，使其字段标签与输入字段的距离相等？

> ID：16076121
> 
> 赞同：1
> 
> 时间：2013-04-18T06:37:04.960
> 
> 标签：html, css, w3c

以前我一直在使用`<table>`标签来构造一个表单，以便我们使用一个很好的格式化表单，以便每个标签和字段彼此在线，如下所示：

```
Email:       [############]
Password:    [############] 
```

但是这里有一个语义问题，表单并不完全是表数据。因此，在表格适合图形的地方，它不在语义级别上。

构建表单的正确方法是什么，使其在数据类型方面图形上也令人愉悦并且语义上正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:49:19.393

这篇[A List Apart 文章](http://alistapart.com/article/prettyaccessibleforms)正是这样做的。

它使用语义正确的标签和 CSS 样式来构建具有稳定边距的无表格表单。简而言之，它使用`label`标签来显示文本，并赋予它们固定的宽度，以使表单域从相同的水平位置开始。

有关具有灵活尺寸的解决方案，请参阅[流体输入元素](https://stackoverflow.com/questions/7120066/fluid-input-elements)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:53:15.683

尝试使用`<fieldset>`然后自定义您的 CSS 以获得更好的外观。

```
<fieldset>
    <legend>Login</legend>
    <label for="email">Email:</label>
    <input type="text" name="email" id="email" />
    <br />
    <label for="password">Password:</label>
    <input type="password" name="password" id="password" />
    <br />
</fieldset> 
```

# android - Android - 如何在低设备内存（内部/外部内存）上处理保存文件

> ID：16076122
> 
> 赞同：5
> 
> 时间：2013-04-18T06:37:08.020
> 
> 标签：android, memory

我们如何处理低设备内存（内部/外部内存）上的文件保存。我知道如果没有足够的空间，操作系统会抛出 IOException，但有什么方法可以优雅地处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:16:55.460

您尝试以下功能来检查内部存储器的可用性。

> ```
> /**
>  * This function find outs the free space for the given path.
>  * 
>  * @return Bytes. Number of free space in bytes.
>  */
> public static long getFreeSpace()
> {
>     try
>     {
>         if (Environment.getExternalStorageDirectory() != null
>                 && Environment.getExternalStorageDirectory().getPath() != null)
>         {
>             StatFs m_stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
>             long m_blockSize = m_stat.getBlockSize();
>             long m_availableBlocks = m_stat.getAvailableBlocks();
>             return (m_availableBlocks * m_blockSize);
>         }
>         else
>         {
>             return 0;
>         }
>     }
>     catch (Exception e)
>     {
>         e.printStackTrace();
>         return 0;
>     }
> } 
> ```

使用上述函数作为 belo ：

> ```
>  int m_fileSizeInKB = m_fileSize / 1024;
>     if (m_fileSize >= getFreeSpace())
>    {
>        //Show the message to user that there is not enough space available in device.
>       }
>       else
>       {
>          //your business logic here.
>       } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:53:15.430

首先找到内部和外部内存空间的可用空间..然后检查您的文件大小小于可用内存（根据您的要求选择内部或外部）然后存储否则消息警报显示...如果您需要格式大小然后使用功能格式大小....

```
public static String getAvailableExternalMemorySize() {
        if (externalMemoryAvailable()) {
            File path = Environment.getExternalStorageDirectory();
            StatFs stat = new StatFs(path.getPath());
            long blockSize = stat.getBlockSize();
            long availableBlocks = stat.getAvailableBlocks();
            return formatSize(availableBlocks * blockSize);
        } else {
            return "ERROR";
        }
    }

public static String getAvailableInternalMemorySize() {
        File path = Environment.getDataDirectory();
        StatFs stat = new StatFs(path.getPath());
        long blockSize = stat.getBlockSize();
        long availableBlocks = stat.getAvailableBlocks();
        return formatSize(availableBlocks * blockSize);
    }

public static String formatSize(long size) {
        String suffix = null;

        if (size >= 1024) {
            suffix = "KB";
            size /= 1024;
            if (size >= 1024) {
                suffix = "MB";
                size /= 1024;
            }
        }

        StringBuilder resultBuffer = new StringBuilder(Long.toString(size));

        int commaOffset = resultBuffer.length() - 3;
        while (commaOffset > 0) {
            resultBuffer.insert(commaOffset, ',');
            commaOffset -= 3;
        }

        if (suffix != null)
            resultBuffer.append(suffix);
        return resultBuffer.toString();
    } 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:54:34.773

```
File path = Environment.getDataDirectory();
StatFs stat = new StatFs(path.getPath());
long blockSize = stat.getBlockSize();
long availableBlocks = stat.getAvailableBlocks();
return Formatter.formatFileSize(this, availableBlocks * blockSize); 
```

# failing-tests - GTEST 链接错误——链接：致命错误 LNK1104：无法打开文件 'gtest_maind.lib;gtestd.lib;

> ID：16076127
> 
> 赞同：1
> 
> 时间：2013-04-18T06:37:13.770
> 
> 标签：failing-tests

嗨，我在尝试设置 GTEST 时遇到以下错误

> GTEST 链接错误——链接：致命错误 LNK1104：无法打开文件 'gtest_maind.lib;gtestd.lib;

尝试清洁，重建 gtest sln 以及

*   使用VS2005。

遵循以下链接中提供的所有说明..但仍然存在错误

*   [如何在 Visual Studio 2005 上设置 Google C++ 测试框架 (gtest)](https://stackoverflow.com/questions/531941/how-to-setup-google-c-testing-framework-gtest-on-visual-studio-2005)
*   [http://www.youtube.com/watch?v=mzSzwQOmMRs](http://www.youtube.com/watch?v=mzSzwQOmMRs)
*   [http://blog.afonseca.org/2010/09/20/gtest_vs_tutorial/](http://blog.afonseca.org/2010/09/20/gtest_vs_tutorial/)

# ios - ios中使用AVPlayer的音频流

> ID：16076128
> 
> 赞同：0
> 
> 时间：2013-04-18T06:37:14.350
> 
> 标签：ios, avplayer

我正在尝试开发一个应该从特定链接流式传输音频的小应用程序。我为此使用 AVPlayer，但我不知道为什么它不起作用。试过谷歌，但那里似乎没有什么相关的。请帮助..谢谢

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSURL *url = [NSURL URLWithString:@"http://108.166.161.206:8826/stream.mp3"];

self->playerItem = [AVPlayerItem playerItemWithURL:url];
self->player = [AVPlayer playerWithPlayerItem:playerItem];
self->player = [AVPlayer playerWithURL:url];
[player play];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T20:15:00.233

不知道为什么你首先用一个 playeritem 初始化你的播放器，然后用一个 NSURL 初始化它。无论如何，这是要走的路：

```
-(void) viewDidLoad{

    player = [[AVPlayer alloc] initWithURL:
             [NSURL URLWithString:@"http://xxx/yourfile.mp3"]];

    [player addObserver:self forKeyPath@"status" options:0 context:nil];
}

- (void) observeValueForKeyPath:(NSString *)keyPath 
                                ofObject:(id)object 
                                change:(NSDictionary  *)change 
                                context:(void *)context {

    if (object == player && [keyPath isEqualToString:@"status"]) {
        if (player.status == AVPlayerStatusReadyToPlay) {
            [player play];
        }
        if (player.status == AVPlayerStatusFailed) {
            NSLog(@"Something went wrong: %@", player.error);
        }
    }
} 
```

[AV Foundation Programming Guide](https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)应该是了解 AVPlayer 工作原理的良好起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T19:23:39.520

这条线不是必需的`self->player = [AVPlayer playerWithURL:url];`

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSURL *url = [NSURL URLWithString:@"http://108.166.161.206:8826/stream.mp3"];

self->playerItem = [AVPlayerItem playerItemWithURL:url];
self->player = [AVPlayer playerWithPlayerItem:playerItem];
[player play];

} 
```

也不要忘记将 NSAllowsArbitraryLoads 键添加到 info.plist

[![在此处输入图像描述](https://i.stack.imgur.com/bKPjj.png)](https://i.stack.imgur.com/bKPjj.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T08:05:58.470

你可以用 AVAudioPlayer 试试这个：

```
NSData *fileData = [NSData dataWithContentsOfURL:
                   [NSURL URLWithString:@"http://108.166.161.206:8826/stream.mp3"]];
NSError *error = nil;
self.player = [[AVAudioPlayer alloc] initWithData:fileData error:&error];
[self.player play]; 
```

# image - 稀疏矩阵图matlab

> ID：16076135
> 
> 赞同：1
> 
> 时间：2013-04-18T06:37:36.473
> 
> 标签：image, matlab, image-processing, matrix, plot

我有一个具有 4 个不同值的 5000 *5000 稀疏矩阵。我想用 4 种不同颜色可视化非零元素，以便我可以识别这些值的比率以及它们之间的关系，我使用**imagesc**但我不能很好地识别不同的值，尤其是比率较小的值。我认为如果我为每个值使用一些符号，它可以工作，但我不知道它在 Matlab 中是如何的。有什么建议吗？Dan 代码的结果如下图所示。

![结果约5000*5000](https://i.stack.imgur.com/PCKl9.jpg)![5000*5000 矩阵的 1000*1000 块的结果](https://i.stack.imgur.com/zJn8c.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:59:08.343

您可以将矩阵改造成一组 [X, Y, F] 坐标（重新使用我从[Resampling Matrix 得到的答案并在一个 Matrix 中恢复](https://stackoverflow.com/questions/16034713/resampling-matrix-and-restoring-in-one-single-matrix/16035264#16035264)）：

假设你的矩阵是`M`

```
[X, Y] = meshgrid(1:size(M,1), 1:size(M,2));
Mf = M(:); %used again later, hence stored
V = [X(:), Y(:), Mf]; 
```

摆脱零元素

```
V(Mf == 0, :) = []; 
```

此时，如果您可以访问统计工具箱，则可以直接`gscatter(V(:,1), V(:,2), V(:,3))`获取正确的绘图，否则如果您没有工具箱，请继续以下操作：

查找 M 中唯一值的列表

```
Vu = unique(V(:,3)); 
```

对于每个这样的值，将点绘制为 xy 散点图，注意保持所有确保每次添加新图时颜色都会发生变化，即循环的每次新迭代

```
hold all;
for g = 1:length(Vu)
    Vg = V(V(:,3)==Vu(g),:)
    plot(Vg(:,1), Vg(:,2), '*');
    a{g}=num2str(Vu(g));
end
legend(a); 
```

示例`M`：

```
M = zeros(1000);
M(200,30) = 7;
M(100, 900) = 10;
M(150, 901) = 13;
M(600, 600) = 13; 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/cIkb6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:37:40.617

现在我可以回答问题的第一部分了。我想你需要做类似的事情

`sum(histc(A, unique(A)),2)`

计算矩阵中唯一值的数量。

`temp = histc(A, unique(A))`“是列直方图计数的矩阵。” `unique(A)`因此，您将获得出现在 A 列中的所有值的计数。

我正在`stat = sum(temp,2)`获取`unique(A)`整个矩阵中所有值的计数。

然后您可以使用@Dan 提出的代码来可视化结果。

```
hold all; 
u=unique(A);
for i = 1:length(stat) 
plot(u(i), stat(i)/max(stat), '*');
end 
```

请澄清你的意思是价值观之间的什么样的关系？

# mysql - 想要使用分组功能在单个查询中从三个表中获取所有数据

> ID：16076136
> 
> 赞同：0
> 
> 时间：2013-04-18T06:37:38.953
> 
> 标签：mysql

我需要什么：我想按菜品类别显示销售额

**我有三个表来解决这个问题：**

```
1.order(dish_id,dish_price,dish_quantity)
2.dish(dish_id,dish_name,dish_cat_id)
3.dish_category(dish_cat_id,dis_cat_name 
```

**我想要的结果是：** 我想显示报告，按菜品类别已售出多少数量，以及总价格，total_quantity

**预期结果：** dish_cat_id、dish_cat_name、total_price、total_quantity_sold

**我试过的：**

```
 SELECT  d.dish_name, 
            d.dish_id,
            SUM(o.price) as total_price,
            SUM(o.dish_quantity) as total_qauntity 
    FROM order as o , dish as d
    WHERE o.dish_id = d.dish_id
    GROUP BY o.dish_id 
```

现在在这里我可以按菜式获得所有菜式及其总价，如何获得**菜式**明智的**菜式**

没错，我不知道会在有关此查询的选定结果上触发另一个查询，以使它们变得明智

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:47:18.923

```
SELECT  c.dis_cat_name , c.dish_cat_id ,
        SUM(o.price) as total_price ,
        SUM(o.dish_quantity) as total_qauntity 

FROM order as o JOIN  dish as d

       ON (o.dish_id = d.dish_id)
       join dish_category c on (d.dish_cat_id=c.dish_cat_id)

GROUP BY d.dish_cat_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:52:09.133

```
SELECT dc.dis_cat_name, 
       SUM(o.price) as total_price, 
       SUM(o.dish_quantity) as total_quantity 
FROM order o 
    INNER JOIN dish d ON o.dish_id = d.dish_id   
    INNER JOIN  dish_category dc ON dc.dish_cat_id = d.dish_cat_id
 GROUP BY dc.dish_cat_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:45:50.387

您必须加入所有 3 张桌子：

```
select d2.dish_cat_id, d2.dish_cat_name, 
       sum(o1.dish_price) total_price ,sum(o1.dish_quantity) total_quantity_sold
from dish d1 join dish_category d2 on (d1.dish_cat_id= d2.dish_cat_id)
             join order o1 on (d1.dish_id = o1.dish_id)
group by d2.dish_cat_id, d2.dish_cat_name 
```

# html - 如何在jquery mobile中删除按钮的默认边框？

> ID：16076143
> 
> 赞同：1
> 
> 时间：2013-04-18T06:38:09.123
> 
> 标签：html, css, jquery-mobile

如何在jquery mobile中删除按钮的默认边框？我将`<a>`标签声明为一个按钮，自定义背景图像如下：

```
<a id="btnLogin" href="../main/mainx.html" data-role="button" data-corner="false"> Login</a>
<a id="btnSignUp" href="../singup/signup.html" data-role="button" data-corner="false"> Sign Up</a> 
```

CSS：

```
a{
    width: 265px;
    height: 38px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 5px;
    border: 0px;
    border-color: transparent;
    display: box;
    text-transform: none;
    text-shadow: none;

}
#loginPage a .ui-btn-inner{
    padding-top: 11px;
}
#loginPage #btnLogin{
    background: transparent url(../../res/img/login_btn.png) no-repeat;
    background-size: 100% 100%;
    color: #FFF;

}
#loginPage #btnLogin:hover{
    background: transparent url(../../res/img/login_btn_over.png) no-repeat;
    background-size: 100% 100%;
}

#loginPage #btnSignUp{
    background: transparent url(../../res/img/signup_btn.png) no-repeat;
    background-size: 100% 100%;
    color: grey;
}

#loginPage #btnSignUp:hover{
    background: transparent url(../../res/img/signup_btn_over.png) no-repeat;
    background-size: 100% 100%;
    color: #fff;
} 
```

该按钮在模糊边框内显示，如下所示：![在此处输入图像描述](https://i.stack.imgur.com/YmtwR.png)

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:44:24.740

我认为您正在寻找[大纲属性](http://www.w3schools.com/cssref/pr_outline.asp)：

```
a {
    outline:0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:13:48.997

要覆盖 jQuery Mobile 中按钮的默认样式，请先对类进行修改，`.ui-btn`然后`!important`对每个属性进行修改。

演示： http: [//fiddle.jshell.net/Palestinian/8TH5d/](http://fiddle.jshell.net/Palestinian/8TH5d/)

```
.ui-btn { border: none !important; } 
```

至于阴影，请将此属性添加`data-shadow="false"`到`<a>`标签中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:44:07.837

更改为使用按钮元素，一切正常。

```
<button id="btnLogin" href="../main/mainx.html" data-role="none" data-corner="false"> Login</button>
<button id="btnSignUp" href="../singup/signup.html" data-role="none" data-corner="false"> Sign Up</button>` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:42:05.850

你能检查按钮的背景图像吗？它可能包含内部边框

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T09:58:31.727

IMO拥有后退按钮的最佳方法是这样做

```
 $(document).on("mobileinit", function () {

        $.mobile.toolbar.prototype.options.addBackBtn = true;
        $.fn.buttonMarkup.defaults.corners = false;
    }); 
```

但是， $.fn.buttonMarkup.defaults.corners = false; 不会删除使用全局选项自动生成的后退按钮的圆角。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-07T12:48:10.003

这个解决方案对我来说很好

```
border: none !important;
box-shadow: none !important;
outline: 0; 
```

# php - 如何将数据从 VirtueMart 1.1.x 迁移到 VirtueMart 2.5.x？

> ID：16076147
> 
> 赞同：1
> 
> 时间：2013-04-18T06:38:12.747
> 
> 标签：php, joomla, virtuemart, data-migration

如何将数据从 VirtueMart 1.1.x 迁移到 VirtueMart 2.5.x ？

我需要将带有数据和数据库的网站从 1 迁移/更新到 2 吗？vm1 到 vm2

那么，怎么能轻松做到呢？

帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:28:59.893

吉涅什。

希望这将帮助您迁移 mercurial。

[http://www.ostraining.com/blog/joomla/virtuemart-11-to-version-2/](http://www.ostraining.com/blog/joomla/virtuemart-11-to-version-2/)

# air - 如何在 Flex 中管理两个 WindowedApplication？

> ID：16076149
> 
> 赞同：0
> 
> 时间：2013-04-18T06:38:27.550
> 
> 标签：air, flex3

案子：

1）有两个.mxml文件（Windowed Application）：一个是登录（活动窗口/启动窗口），另一个是主窗口。

2）主窗口有viewstack

3) 登录成功后，从主窗口调用 log-inHandler。

4) log-inHandler 访问主窗口的viewstack id。

5) 但 viewstack id 显示为空。

问题：

1）如何解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:31:48.427

1.  您不应该使用 2 个窗口应用程序
2.  将您的登录页面设为 MXMLComponent
3.  从您的主应用程序中将登录页面添加为新的 NativeWindow，以便您可以与它进行通信。

# watir-webdriver - Watir-webdriver 与 Firefox

> ID：16076151
> 
> 赞同：0
> 
> 时间：2013-04-18T06:38:48.673
> 
> 标签：watir-webdriver

我正在使用 ruby​​ 和 ruby​​ 的框架 watir-webdriver 和 Firefox v20.0.1 进行 Web 应用程序自动化，当我使用`file_field`函数获取文件时，它会出现以下错误：

> 元素当前不可见，因此可能无法与之交互 (Selenium::WebDriver::Error::ElementNotVisibleError)

以前，我在 Firefox 配置文件为“默认”时运行相同的代码，那时工作正常，现在我将 Firefox 配置文件更改为“新”并收到这些错误。此外，我无法在 v20.0.1 上将 Firefox 配置文件设置为“默认”。

不管是不是正确的方法，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:24:20.370

你有没有尝试过

```
gem update webdriver 
```

从命令行确保您拥有最新的 webdriver 代码？

# perl - perl 如何在打印时识别变量的结尾？

> ID：16076152
> 
> 赞同：4
> 
> 时间：2013-04-18T06:38:56.207
> 
> 标签：perl

perl 如何识别变量的结尾？

例如，这段代码：

```
use warnings;
my $a = 10;
print "Value of a is $a:::"; 
```

输出：

```
Use of uninitialized value $a:: in concatenation (.) or string at tryprint.pl line 6.
Value of a is : 
```

为什么它考虑 $a:: 而不是 $a: 或 $a:::

这有效：

```
print "Value of a is $a\:::"; 
```

印刷：

```
Value of a is 10::: 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T06:48:54.780

`::`用于打印/访问包/符号表中的变量。例如，要访问包 abc 中的标量变量 x，Perl 使用 `$abc::x`where`abc`是符号表的名称并且`x`是变量。同样，当您使用 时`$a:::`，Perl 认为存在一个名称为 ' `a`' 且变量名称为的包`:`，因此出现了这些错误。

请参阅下面的示例：

```
our $a = 10;
{
        my $a=20;
        print "lexical a is $a \n";
        print "Value of a is $main::a";
} 
```

# ios - iOS中的中文字体渲染

> ID：16076169
> 
> 赞同：2
> 
> 时间：2013-04-18T06:40:19.843
> 
> 标签：ios, fonts, cjk, text-rendering

在 UITableViewCell 中渲染中文文本时的结果看起来很糟糕： ![表视图](https://i.stack.imgur.com/sWeki.png)

我认为这是因为后备字体呈现行为：语言环境是英语，但我正在呈现简体中文文本。

我认为这种行为是因为系统 Helvetica 只有文本中某些字符的字形。

有什么办法可以设置后备中文字体，以便它在 Helvetica 中呈现英文文本，但在给定字体中呈现具有所有简体字形的中文文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T01:27:18.647

# java - 双击 FileTreeModel 中的文件

> ID：16076171
> 
> 赞同：0
> 
> 时间：2013-04-18T06:40:28.970
> 
> 标签：java, swing

我对 Java 很满意，但更喜欢使用 API。在谷歌搜索了一段时间后，到目前为止，我的程序运行良好。现在我想要的是，双击树中的任何文件，下面要执行的函数。

有人可以建议我如何添加侦听器来理解双击事件吗？例子真的很有帮助。

```
public boolean getSomeData(String fileName){
  //I will make JDBC call here    
} 
```

我的工作程序如下，

```
/*http://www.chka.de/swing/tree/FileTreeModel.html
*/
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;
import javax.swing.event.TreeModelListener;
import javax.swing.event.TreeModelEvent;
import javax.swing.event.EventListenerList;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;
import java.io.File;
import java.io.Serializable;
import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;

public class FileTreeModel
    implements TreeModel, Serializable, Cloneable
{
    protected EventListenerList listeners;

    private static final Object LEAF = new Serializable() { };

    private Map map;

    private File root;

    public FileTreeModel(File root)
    {
        this.root = root;

        if (!root.isDirectory())
            map.put(root, LEAF);

        this.listeners = new EventListenerList();

        this.map = new HashMap();
    }

    public Object getRoot()
    {
        return root;
    }

    public boolean isLeaf(Object node)
    {
        return map.get(node) == LEAF;
    }

    public int getChildCount(Object node)
    {
        List children = children(node);

        if (children == null)
            return 0;

        return children.size();
    }

    public Object getChild(Object parent, int index)
    {
        return children(parent).get(index);
    }

    public int getIndexOfChild(Object parent, Object child)
    {
        return children(parent).indexOf(child);
    }

    protected List children(Object node)
    {
        File f = (File)node;

        Object value = map.get(f);

        if (value == LEAF)
            return null;

        List children = (List)value;

        if (children == null)
        {
            File[] c = f.listFiles();

            if (c != null)
            {
                children = new ArrayList(c.length);

                for (int len = c.length, i = 0; i < len; i++)
                {
                    children.add(c[i]);
                    if (!c[i].isDirectory())
                        map.put(c[i], LEAF);
                }
            }
            else
                children = new ArrayList(0);

            map.put(f, children);      
        }

        return children;
    }

    public void valueForPathChanged(TreePath path, Object value)
    {
    }

    public void addTreeModelListener(TreeModelListener l)
    {
        listeners.add(TreeModelListener.class, l);
    }

    public void removeTreeModelListener(TreeModelListener l)
    {
        listeners.remove(TreeModelListener.class, l);
    }

    public Object clone()
    {
        try
        {
            FileTreeModel clone = (FileTreeModel)super.clone();

            clone.listeners = new EventListenerList();

            clone.map = new HashMap(map);

            return clone;
        }
        catch (CloneNotSupportedException e)
        {
            throw new InternalError();
        }
    }

    public static void main(String[] args)
    {
        if (args.length != 1)
        {
            System.err.println("Usage: java FileTreeModel path");
            System.exit(1);
        }

        File root = new File(args[0]);

        if (!root.exists())
        {
            System.err.println(root+ ": No such file or directory");
            System.exit(2);
        }

        JTree tree = new JTree(new FileTreeModel(root));

        JFrame f = new JFrame(root.toString());

        f.addWindowListener(new WindowAdapter()
        {
            public void windowClosing(WindowEvent e)
            {
                System.exit(0);
            }
        });

        f.getContentPane().add(new JScrollPane(tree));

        f.pack();
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:47:33.540

我认为您应该添加`MouseListener`并实现该`mousePressed`方法

```
MouseListener ml = new MouseAdapter() {
    public void mousePressed(MouseEvent e) {
        if(e.getClickCount() == 2) {
             getSomeData(...);
        }
    }
};
tree.addMouseListener(ml); 
```

# iphone - 如何通过 FacebookSDK 获取会话登录信息到我的 UIWebView

> ID：16076172
> 
> 赞同：0
> 
> 时间：2013-04-18T06:40:29.487
> 
> 标签：iphone, ios, facebook

使用 FacebookSDK 登录 facebook 后，我想使用 UIWebView 显示页面。首次登录时显示正确。但是我关闭并重新启动应用程序，即使 facebook 会话仍然打开，我也无法登录我的 UIWebView。

当我重新运行该应用程序以获取 Facebook 会话信息时，您对此有何建议？

这是我的代码示例。

```
@interface FBLogin2ViewController ()

@end

@implementation FBLogin2ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        // To-do, show logged in view

        NSString *appID = [FBSession defaultAppID];

        NSLog(@"Session token exists %@", appID);
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)onLogin:(id)sender {

    NSArray *permissions = nil;

    if (![FBSession activeSession]) {
        FBSession *session = [[FBSession alloc] initWithAppID:@"000000000000" permissions:permissions defaultAudience:FBSessionDefaultAudienceEveryone urlSchemeSuffix:@"fb" tokenCacheStrategy:nil];

        [FBSession setActiveSession:session];
    }
    else if( [FBSession activeSession].isOpen )
    {
        [[FBSession activeSession] closeAndClearTokenInformation];
        FBSession.activeSession = nil;
    }

    [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                          [self sessionStateChanged:session state:state error:error];
                                      }];

}

- (IBAction)onLogout:(id)sender {

    [FBSession.activeSession closeAndClearTokenInformation];
    FBSession.activeSession = nil;
}

- (IBAction)onGoWeb:(id)sender {
    NSURL *url = [NSURL URLWithString:@"http://www.facebook.com/xxxxx?fref=xx"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [_webView loadRequest:request];
    _webView.delegate = self;
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {

        }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            // Once the user has logged in, we want them to
            // be looking at the root view.

            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
       [alertView show];
    }
    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:44:02.633

1) 在 didFinishLaunchingWithOptions 方法中调用 openFBSessionIfAvaliable

```
//in appdelegate
     - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
        {
            [self openFBSessionIfAvaliable];
        }

//in appdelegate
    - (BOOL)application:(UIApplication *)application
                openURL:(NSURL *)url
      sourceApplication:(NSString *)sourceApplication
             annotation:(id)annotation {
        // attempt to extract a token from the url
        return [[FBSession activeSession] handleOpenURL:url];
    }
//in appdelegate
    - (void)applicationDidBecomeActive:(UIApplication *)application
    {
        // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
        [[FBSession activeSession] handleDidBecomeActive];
    }

//in appdelegate
    - (void)applicationWillTerminate:(UIApplication *)application
    {
        // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
        [[FBSession activeSession] close];
    }

-(void)openFBSessionIfAvaliable
{
    [FBSession setActiveSession:[FBSession new]];
    if ([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded)
    {
        [self openFBSessionWithAllowLoginUI:NO];
    }
}

- (BOOL)openFBSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"email",nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error)
            {

                [self sessionStateChanged:session
                                    state:state
                                    error:error];
            }];
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state)
    {
        case FBSessionStateOpen:
            if (!error)
            {
                NSString  *_facebookToken = [[FBSession activeSession] accessToken];
                NSString  *_facebookEmail = [user objectForKey:@"email"];
            }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    if (error)
    {
        [FBSession.activeSession closeAndClearTokenInformation];
        /*UIAlertView *alertView = [[UIAlertView alloc]
         initWithTitle:@"Error"
         message:@"Please try Again"
         delegate:nil
         cancelButtonTitle:@"OK"
         otherButtonTitles:nil];
         [alertView show];*/

    }

} 
```

2）在按钮点击“通过facebook登录”调用下面的方法

```
[self openFBSessionWithAllowLoginUI:YES]; 
```

3）现在每次启动应用程序时，它都会检查 Facebook 会话，如果找到则继续进行，否则显示按钮“通过 Facebook 登录”.session

我希望它能解决你的问题。

# python - 部分初始化基类

> ID：16076174
> 
> 赞同：1
> 
> 时间：2013-04-18T06:40:35.557
> 
> 标签：python, inheritance, python-2.6

想不出更好的问题标题。随意编辑。我有一个基类，它被许多类继承（而这些类又可能有更多的子类）。对于每个类，我都有一系列需要执行初始化后的操作。该序列被封装在一个函数中，该函数`runme()`执行一系列对象方法调用

```
class myBase(object): 
    def __init__(self,neg,op,value): 
        self.neg = neg
        self.op = op
        self.value = value
        #Process
        self.runme()

    def runme(self): 
        self.preprocess()
        self.evaluate()
        self.postprocess()

    def preprocess(self): 
        pass

    def evaluate(self): 
        pass

    def postprocess(self): 
        pass 
```

子类必须接受与基类相同的属性（以及任何附加属性）。它们都将覆盖三个函数-`preprocess`和`evaluate``postprocess`

```
class childA(myBase): 
    def __init__(self,neg,op,value,ad1): 
        super(childA,self).__init__(neg,op,value)
        self.ad1 = ad1
        #Must call runme() here again??
        runme()

    def evaluate(): 
        #Something using self.ad1
        blah = self.ad1+self.value 
```

在我看来，它会产生一个问题——首先`childA`调用 base `__init__`，然后调用`runme()`，然后调用`evaluate`. 由于 child over-rides `evaluate`，child 的定义`evaluate`被执行，但由于`self.ad1`还没有*被*实例化，这会抛出一个`AttributeError`

我可以`self.runme()`从 myBase 中删除，问题可能会消失，但我可以进一步`childA`转入`childAA`

```
class childAA(childA): 
    def __init__(self,neg,op,value,ad1): 
        super(childAA,self).__init__(neg,op,value,ad1)
        self.runme() 
```

问题可能会再次出现。我无法`runme()`从 childA中删除，`__init__`因为两者的对象都可以形成（并且需要处理`childA`）`childAA`

目前，作为一种解决方法，我不调用`runme()`，`__init__`而是在初始化后从调用程序中调用它。

```
obja=childA(foo,bar,baz,ad1)
obja.runme() 
```

`super()`一个更简单的替代方法是在 child's 的末尾调用，但这*似乎*`__init__`不正确

 *另一种方法是 - 告诉基类将 runme() 的调用推迟到子类。这可能吗？在 myBase 中说，我愿意

```
def __init__(self,neg,op,value): 
        self.neg = neg
        self.op = op
        self.value = value
        #Process
        if some_condition which checks if this is being called by a derived class:
            self.runme() 
```

如果这些是解决它的最佳方法？或者，这是一个常见问题吗？还有哪些其他建议的解决方案？

**编辑**

发布（并删除）了两个答案，这同意最好的方法似乎是`runme()`在基类中留下电话，然后`super()`在孩子的*末尾调用*`__init__`

```
class myBase(object): 
    def __init__(self,neg,op,value): 
        self.neg = neg
        self.op = op
        self.value = value
        #Process
        self.runme()

class childA(myBase): 
        def __init__(self,neg,op,value,ad1): 
            self.ad1 = ad1
            super(childA,self).__init__(neg,op,value) 
```

如果您需要依赖于现有值的值，

```
class childA(myBase): 
    def __init__(self,neg,op,value,ad1): 
        self.ad1 = ad1
        self.internal_value = self.value  #Not yet initialized!!
        super(childA,self).__init__(neg,op,value) 
```

这段代码可以放在*第一个*`preprocess()`被调用的函数或其他函数中*`runme()`*

 *```
def preprocess(self): 
    self.internal_value = value
    #Rest of the stuff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:30:45.847

如果孩子们`__init__`需要部分初始化的对象才能继续，`super()`那么最后的调用确实不起作用。如果是这种情况，您可以调用`runme`form `__new__`in `myBase`：

```
class myBase(object):
    def __new__(cls, *args, **kwargs):
        obj = super(myBase, cls).__new__(cls)
        obj.__init__(*args, **kwargs)
        obj.runme()

    def __init__(self, a):
        print 'myBase init'
        self.list = ['myBase', a]

    def runme(self):
        print 'myBase:', self.list

class ChildA(myBase):
    def __init__(self, a, b):
        print 'ChildA init'
        super(ChildA, self).__init__(a)
        self.list.extend(['ChildA', b])

    def runme(self):
        print 'ChildA:', self.list

class ChildAA(ChildA):
    def __init__(self, a, b, c):
        print 'ChildAA init'
        super(ChildAA, self).__init__(a, b)
        self.list.extend(['ChildAA', c])

    def runme(self):
        print 'ChildAA:', self.list 
```

`__init__`您可以根据初始化过程的要求在各种函数中订购代码，并且在完成`runme`后将始终调用正确的函数`__init__`：

```
>>> ChildA(1, 2)
ChildA init
myBase init
ChildA: ['myBase', 1, 'ChildA', 2]
>>> ChildAA(1, 2, 3)
ChildAA init
ChildA init
myBase init
ChildAA: ['myBase', 1, 'ChildA', 2, 'ChildAA', 3] 
```**

# wordpress-theming - 第二个wordpress编辑器的输出帖子

> ID：16076176
> 
> 赞同：1
> 
> 时间：2013-04-18T06:40:45.870
> 
> 标签：wordpress-theming

我最近使用 Wordpress 3.3 的新功能在我的所有页面和帖子管理区域中添加了一个新编辑器来执行此操作

```
add_action( 'edit_page_form', 'my_second_editor' );
function my_second_editor() {
    // get and set $content somehow...
    wp_editor( $content, 'mysecondeditor' );
} 
```

我的问题是如何在我的网站/页面上输出我在第二个编辑器中输入的内容？我需要制作一个自定义循环吗？不幸的是，该法典不是很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:06:19.520

你需要`get_post_meta()`，像这样使用它：

```
echo get_post_meta(get_the_id(), 'mysecondeditor'); 
```

阅读更多：[http ://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

要保存在第二个编辑器中输入的数据，您需要在`functions.php`文件中使用以下代码：

```
add_action( 'save_post', 'save_post', 10, 2 );
function save_post( $post_id, $post ) {
  if ( !current_user_can( 'edit_post', $post_id ) )
    return $post_id;

  update_post_meta( $post_id, 'mysecondeditor', stripslashes( $_POST['mysecondeditor'] ) );

} 
```

因此，在那之后，他是您的第二个编辑器的完整代码：

```
wp_editor( get_post_meta(get_the_id(), 'mysecondeditor', true), 'mysecondeditor' ); 
```

以上`true`确保只返回一个变量而不是数组，因此您可以立即使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T23:49:39.090

user2019515I（2013 年 4 月 18 日 12:06）的答案对我有用，我可以添加文本和图库，但是当我使用以下代码显示时：

```
<?php echo get_post_meta(get_the_ID(),'mysecondeditor')['0']; ?> 
```

我得到了画廊代码而不是图像，所以：

```
mytext   [gallery ids="102,62"] 
```

我怎样才能显示文本（mytext）和图像呢？

# android - 恒定且可能不准确的帧速率

> ID：16076180
> 
> 赞同：4
> 
> 时间：2013-04-18T06:41:10.443
> 
> 标签：android, unity3d, game-physics, frame-rate

我正在使用以下代码来计算 Unity3d 4.0 中的帧速率。它应用于 NGUI 标签。

```
void Update () {
        timeleft -= Time.deltaTime;
        accum += Time.timeScale/Time.deltaTime;
        ++frames;

        // Interval ended - update GUI text and start new interval
        if( timeleft <= 0.0 )
        {
            // display two fractional digits (f2 format)
            float fps = accum/frames;
            string format = System.String.Format("{0:F2} FPS",fps);
            FPSLabel.text = format;
                timeleft = updateInterval;
                accum = 0.0F;
                frames = 0;
            }
    } 
```

它以前可以工作，或者至少看起来可以工作。然后我遇到了一些物理问题，所以我将固定时间步长更改为 0.005 ，将最大时间步长更改为 0.017 。是的，我知道它太低了，但我的游戏在这方面运行良好。
现在的问题是上面的 FPS 代码一直返回 58.82。我已经检查了不同的设备（Android）。它就是不动。我认为这可能是正确的，但是当我看到 profiler 时，我可以清楚地看到那里的起伏。很明显，这很可疑。

难道我做错了什么？我从某个地方复制了代码（必须来自脚本 wiki）。有没有其他方法可以知道正确的 FPS？

通过从[这个问题](http://answers.unity3d.com/questions/64331/accurate-frames-per-second-count.html)中获取线索，我在第一个答案中尝试了所有方法。甚至以下代码也返回恒定的 58.82 FPS。它仅发生在android设备中。在编辑器中，我可以看到 fps 差异。

`float fps = 1.0f/Time.deltaTime`;

所以我检查了 Time.deltaTime 的值，它在设备中是 0.017 常量。这怎么可能 ：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:27:27.760

在我看来，fps 计数器是正确的，并且 58.82 的 FPS 是由您的物理时间设置的变化引起的。物理引擎可能无法在可用时间步（0.005，非常低）内完成其计算，这意味着它将继续计算直到达到最大时间步，在您的情况下为 0.017。这意味着所有帧都将占用 0.017 加上您可能拥有的渲染/脚本的任何其他开销。1 / 0.017 正好等于 58.82。

也许您可以通过其他方式解决您在物理方面遇到的任何问题，而不会大幅降低固定时间步长。

# asp.net - 如何在 asp.net 代码隐藏中获取 div tag(runat="server") 值作为 innerhtml 格式？

> ID：16076181
> 
> 赞同：1
> 
> 时间：2013-04-18T06:41:12.047
> 
> 标签：asp.net, css, asp.net-mvc, html

我声明 div 标签如下：

```
<div id="txt" runat="server" clientidmode="Static">
</div> 
```

我使用 txt 作为文本框。我必须将我输入到代码隐藏中的“txt”中的任何内容作为 innerhtml 格式。我尝试了以下代码，但它仅显示 innerhtml 标记。它没有显示价值。

```
objPLEmailTemplate.EmailTemplateBody = txt.InnerText; 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:28:18.700

```
objPLEmailTemplate.EmailTemplateBody = txt.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:42:06.887

通过使用 javascript 使用隐藏字段：

函数 GetDivHTML()
{
     var hdnDiv = document.getElementById('HdnDivContent');
     var content = document.getElementById('txt');
     hdnDiv.value = content.innerHTML;
}

将值存储在隐藏中，然后将隐藏值分配给我的变量。

# c# - 如何使用 c# 在另一个方法中覆盖一个方法

> ID：16076182
> 
> 赞同：4
> 
> 时间：2013-04-18T06:41:13.070
> 
> 标签：c#, inheritance, methods, overriding

我是 C# 的新手，我需要弄清楚如何在不实现继承的情况下覆盖新类方法中的类方法，在 Java 中我可以这样做：

```
Class classA{
  void method1(){
       statements ....
       ....
       classB obj = new classBb(){
            @override
            void someMethod(){ //from ClassB
              statements ....
              ....
            }
       };  
   }
} 
```

我想在**C#**中实现相同的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:46:34.787

你不能在 C# 中做到这一点。但是，如果实现的某些部分是特定于调用站点的，则可以使用*委托*。`void method2()`签名映射到（无`Action`参数/返回值），所以：

```
class classB {
    private readonly Action method2;
    public classB(Action method2) {
        if(method2==null) throw new ArgumentNullException("method2");
        this.method2 = method2;
    }
    public void SomeMethod() {
         ... that uses what was method2()
        method2();
    }
} 
```

然后：

```
classB obj = new classB(() => {
   // statements...
}); 
```

使用替代相同的语法：

```
classB obj = new classB(delegate {
   // statements...
}); 
```

或者：

```
classB obj = new classB(delegate() {
   // statements...
}); 
```

# facebook - Facebook 批量查询帖子

> ID：16076189
> 
> 赞同：1
> 
> 时间：2013-04-18T06:41:35.473
> 
> 标签：facebook, facebook-graph-api

我在批量查询 POST 方法中使用以下查询获取页面发布结果和评论计数。

> 批处理：[{"name":"post-resultset","method":"GET","re​​lative_url":"me/posts?offset=0&limit=2"},{"method":"GET","re​​lative_url ":"fql?q=SELECT post_id, comment_info from stream where post_id IN ({result=post-resultset:$.data.*.id})"}]

我收到错误代码 400 的响应

> {“错误”：{“消息”：“（＃601）解析器错误：位置74处意外'_435851216505244'。”，“类型”：“OAuthException”，“代码”：601 }}

这个查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:17:03.487

这是由于**post-resultset:$.data.*.id**上的 post_id没有被引号包围，例如

"relative_url":"fql?q=SELECT post_id, comment_info from stream where post_id IN (\"1234567_435851216505244\")"

[我认为这是一个 facebook 错误，您应该在https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)上报告该错误

![在此处输入图像描述](https://i.stack.imgur.com/8w56f.png)

# magento - 显示一个链接，然后单击该链接，所有新产品都应该像 Magento 中的类别视图页面一样显示

> ID：16076192
> 
> 赞同：1
> 
> 时间：2013-04-18T06:41:38.897
> 
> 标签：magento, magento-1.7, product

我正在通过 Widget 在主页上显示所有**新产品。**我在主页上显示**3 个新产品。**我想在产品展示下放一个**链接。**通过单击该链接，所有产品都应显示在单独的页面中。我给那个链接的**href什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:58:52.743

尝试从管理员为新产品创建一个 CMS 页面，然后在 href 上提供指向该页面的链接。

# regex - 用于将文件路径转换为包/命名空间的正则表达式

> ID：16076193
> 
> 赞同：2
> 
> 时间：2013-04-18T06:41:42.487
> 
> 标签：regex, sublimetext2, sublimetext, sublimetext3

给定以下文件路径：

```
/Users/Lawrence/MyProject/some/very/interesting/Code.scala 
```

我想使用*单个*正则表达式替换生成以下内容（根可以是常量）：

```
some.very.interesting 
```

这是为了为 Sublime Text 生成一个片段，它可以为我的 scala/java 类自动插入正确的包/命名空间标头:)

Sublime Text 对其正则表达式替换模式（又名“替换”）使用以下语法：

```
{input/regex/replace/flags} 
```

因此，为什么不能采用迭代方法 - 它必须一次性完成！此外，替换*不能*嵌套:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:08:41.993

如果您知道嵌套文件夹的最大数量。您可以在您的正则表达式中指定。

* * *

对于 1 到 3 个嵌套文件夹

正则表达式：`/Users/Lawrence/MyProject/(\w+)/?(\w+)?/?(\w+)?/[^/]+$`

代替：`$1.$2.$3`

* * *

对于 1 到 5 个嵌套文件夹

正则表达式：`/Users/Lawrence/MyProject/(\w+)/?(\w+)?/?(\w+)?/?(\w+)?/?(\w+)?/[^/]+$`

代替：`$1.$2.$3.$4.$5`

* * *

鉴于限制，这是您唯一可以做的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:09:07.910

输入

```
/Users/Lawrence/MyProject/some/very/interesting/Code.scala 
```

正则表达式

```
^/Users/Lawrence/MyProject/[^/]+/[^/]+/[^/]+/Code.scala 
```

或者

```
^/[^/]+/[^/]+/[^/]+/([^/]+)/([^/]+)/([^/]+)/ 
```

代替

```
\1.\2.\3 
```

**更新**

这让你更接近，但不完全是：

正则表达式

```
(^/Users/Lawrence/MyProject/|/Code\.scala$|/) 
```

替代品

```
. 
```

输出将是：

```
.some.very.interesting. 
```

如果在一行中没有多个替换并且没有递归反向引用，这将很困难。

您可能需要进行第二次替换，用空字符串替换类似这样的内容（如果可以的话）：

```
 (^\.|\.$) 
```

# android - Viewpager OffscreenPageLimit 问题

> ID：16076199
> 
> 赞同：1
> 
> 时间：2013-04-18T06:42:13.030
> 
> 标签：android, android-viewpager

我在页面上有多项选择（单选按钮）问题。我正在使用 hashmap 获得用户答案。所以我在下一个问题的开始设置了上一个问题的答案。结果，我开始在开始 2.page 上使用 set hashmap。

但问题是：我认为 viewpager 会同时加载前 2 页；所以开始 2.page 上的“set hashmap”变为 null ；因为1.页面没有加载/或者只是同时加载

我怎样才能摆脱这个问题？

> 1.  页面：列出答案 (1)
> 2.  页面：获取用户选择（1），清除列表（1），设置列表答案（2）
> 3.  页面：获取用户选择（2），清除列表（2），设置列表答案（3）...

也许 setoffscreenpagelimit 0 可能是解决方案，但最小值是 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:13:56.303

[这个较旧的答案](https://stackoverflow.com/questions/10024739/how-to-determine-when-fragment-becomes-visible-in-viewpager)可能会对您有所帮助。基本上你只想知道另一个片段何时可​​见，并从那里更新它。

# ios - UISearchBar Appearance 下拉时仍显示 1px 边框

> ID：16076203
> 
> 赞同：0
> 
> 时间：2013-04-18T06:42:36.813
> 
> 标签：ios, uitableview, ios6, uisearchbar

这是在桌子上下拉时的屏幕截图（将搜索栏从顶部的选项卡上拉开）。

![在此处输入图像描述](https://i.stack.imgur.com/00O2V.png)

我的搜索栏是通过外观 API 自定义的。

即使我设置了背景图像，顶部的 1px 边框仍然存在。它根据搜索栏的“样式”而改变颜色（在这种情况下，我将搜索栏设置为黑色不透明）。

知道如何摆脱它吗？我尝试设置清晰的背景颜色，并尝试更改搜索栏图层上的边框颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:29:46.677

我还没有找到一个干净的方法，但是通过子视图循环我发现了用于创建该行的图像视图。它的帧是 (0, -1, 320, 1)。

要删除它，我测试相等性并删除：

```
for (UIView *view in self.searchDisplayController.searchBar.subviews) {
    if (CGPointEqualToPoint(CGPointMake(0, -1), view.frame.origin) && CGSizeEqualToSize(view.frame.size, CGSizeMake(self.view.frame.size.width, 1))) {
        [view removeFromSuperview];
        self.searchBarLineRemoved = YES;
    }
} 
```

# ruby-on-rails-3 - 转义文本，使其保持可读

> ID：16076211
> 
> 赞同：0
> 
> 时间：2013-04-18T06:43:03.030
> 
> 标签：ruby-on-rails-3, escaping, xss

我有一个看起来像这样的方法

```
def full
 "#{self.first} #{self.second}"
end 
```

问题是我想逃避它，所以在我做的模型中做

```
def full
 ERB::Util.h("#{self.first} #{self.second}")
end 
```

但是如果`first`或`second`有`&`它，它会给我`&amp;`而不是`&` 如果他们有撇号`'`，它会逃避他们并使它不可读..

有没有办法避免 XSS 并使字符串也可读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:57:59.033

我想你可以使用这个`html_escape` [点击这里...](http://api.rubyonrails.org/classes/ERB/Util.html#method-c-html_escape)

# ruby-on-rails - 试图在 Rails 中获取“当前用户”

> ID：16076212
> 
> 赞同：8
> 
> 时间：2013-04-18T06:43:06.880
> 
> 标签：ruby-on-rails

在`/views/layouts`目录中，如何获取当前用户？我正在使用 Devise，但`current_user`由于某种原因在这里不起作用，它将其描述为未知方法。我想做类似的事情：

```
<% if User.role? == "gen_admin" %>
    <li>
    <%= link_to('Admin', users ) %>
    </li>
<% end %> 
```

我确实`role?`在我的用户模型中定义了一个方法，但我仍然得到这个异常：

`undefined method 'role?' for #<Class:0x3fcc1e0>`

那么如何获取当前用户，并在源树的这一层访问其字段呢？谢谢！

这里是角色？方法：

```
# in User
ROLES = %w[gen_admin teacher_admin student]
def role?(base_role)
  ROLES.index(base_role.to_s) <= ROLES.index(role)
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T08:19:01.507

您的代码必须说明用户何时登录以及何时未登录。

如果没有用户登录，`current_user`则将返回 nil （就像您的情况一样，您认为这是 Devise 的错误）。

您的视图代码必须处理这个 - 例如。

```
<% if current_user.present? && current_user.role?('gen_admin') %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:15:24.760

您已将`role?`方法定义为实例方法。这意味着为了使用它，您应该首先从`User`类创建实例，例如：

```
@user=User.new 
```

现在你可以打电话`@user.role?`

如果您想`role?`通过模型可用，`User`那么您应该将其定义为类方法并传入一个对象以进行验证

```
def self.role?(user)

...

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:33:18.713

您需要将视图中的代码更改为使用`current_user`而不是`User`，并`role?`正确调用该方法（否`==`）。如果在未登录用户可以访问的视图中使用它，您需要确认用户首先登录（因此您不要尝试调用`role?`on `nil`，这会引发异常）：

```
<% if current_user && current_user.role?("gen_admin") %>
  <li>
    <%= link_to('Admin', users ) %>
  </li>
<% end %> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T07:17:19.000

您忘记添加`before_filter :authenticate_user!`控制器了吗？这将确保 current_user 在您的视图中可用

# wpf - WPF 在 WindowsXP 上加载图像的性能不佳

> ID：16076214
> 
> 赞同：2
> 
> 时间：2013-04-18T06:43:13.817
> 
> 标签：wpf, performance, bitmapimage

我有一些代码来加载图像缩略图并将它们显示在列表框中。它在Win7上正常工作。在 Windows XP 上，加载几张大图像大约需要 7 到 10 分钟，而在 Windows XP 上需要几秒钟。我怎样才能加快速度？

```
 public static string AddImage(string file)
    {
        string key = "IMG_" + (++_counter).ToString("00000");
        ImageInfo inf = new ImageInfo();
        inf.OriginalPath = file;
        inf.ID = key;
        inf.OriginalPath = file;

        BitmapImage bi = new BitmapImage();
        bi.BeginInit();
        bi.DecodePixelWidth = THUMB_SIZE;
        bi.CacheOption = BitmapCacheOption.OnLoad;
        bi.UriSource = new Uri(file);
        bi.EndInit();
        inf.ThumbBitmap = bi;

        _storedImageInfo.Add(key, inf);

        return key;
    } 
```

ImageInfo 是我自己的类，其中包含对 BitmapImages 和图像路径的引用。我不认为它对加载时间有重大影响。

# php - 如果删除了magento数据库，如何登录到管理员或后端

> ID：16076215
> 
> 赞同：0
> 
> 时间：2013-04-18T06:43:19.527
> 
> 标签：php, mysql, magento, magento-1.7

我正在使用magento，但我错误地删除了整个magento数据库，但是从localhost再次打开magento时，新数据库成功生成。

但现在的问题是我无法登录后端。

我在 admin_user 表中创建了 admin 用户，用户名为 admin 并输入了用 MD5 加密的密码，我还尝试了以下查询

```
UPDATE admin_user SET password=CONCAT(MD5('qXpassword'), ':qX') WHERE username='admin'; 
```

但这也对我没有帮助。

谁能告诉我现在如何登录后端。

“父角色 ID 'G1' 不存在”

以管理员身份登录时显示错误消息

我使用的是 1.7 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:07:38.427

Magento**是**数据库。如果您设法将其删除，则可以从头开始。

删除您的 app/etc/local.xml 文件，删除 Magento 数据库中的所有表，将您的数据库凭据放在一起，然后让 Magento 从头开始​​重新创建完整的数据库表结构。

其他任何事情都意味着您以某种未知状态启动，系统最终变得完全无法使用。

# java - 从前缀到中缀的转换：空指针异常

> ID：16076216
> 
> 赞同：0
> 
> 时间：2013-04-18T06:43:20.097
> 
> 标签：java, nullpointerexception, stack, infix-notation

我正在尝试将表达式从中缀转换为后缀。我已经尝试调试代码，但是在弹出变量时我不断收到空指针异常。我得到错误的输入是：

> (=> (NOT (award)) (badgrade))

我得到错误后的输出是**（不是奖励）**

请告诉我是否需要编辑 Q 以发布更少的代码/添加更多评论/提供更多信息。谢谢！

```
public class toInfix1 {

Stack<String> symbol = new Stack<String>();
Stack<String> variable = new Stack<String>();
Stack<String> operator = new Stack<String>();
static String inputfile = "kb2.txt";
ArrayList<String> infix = new ArrayList<String>();

public void toPrefix1() {
    try {
        File f = new File(inputfile);
        FileReader fr = new FileReader(f);
        BufferedReader bf = new BufferedReader(fr);
        String str;
        String kb = "";

        while ((str = bf.readLine()) != null) {
            Pattern pattern = Pattern.compile("[(]|[)]|<=>|=>|\\w+|^\\s+");
            Matcher m = pattern.matcher(str);
            //int a = 0;
            System.out.println("KB" + kb);
            while (m.find()) {
                String node1 = m.group();
                System.out.println("Node1" + node1);

                //If  (
                if (node1.equals("(")) {
                    symbol.push(node1);

                } else if (node1.equals("OR") || node1.equals("AND")
                        || node1.equals("NOT") || node1.equals("=>")
                        || node1.equals("<=>")) {
                    operator.push(node1);

                    //If )
                } else if (node1.equals(")")) {
                    //Pop symbol (

                    if(!variable.empty()&& !operator.empty() && !symbol.empty()){

                        String symbol1 = "", op = "";
                        if (symbol.peek() != null && !symbol.empty()) {
                            symbol1 = symbol.pop();
                        }
                        //Pop if  operator AND OR => <=> (Binary)
                        if (operator.peek() != null && !operator.empty()) {
                            op = operator.pop();
                            if (op.equals("AND") || op.equals("OR")
                                    || op.equals("=>") || op.equals("<=>")) {
                                String var2 = "";
                                String var1 = "";
                                if (variable.peek() != null && !variable.empty()) {
                                    var1 = variable.pop();
                                }//Error occurs in the following if condition 
                                if (variable.peek() != null && !variable.empty()) {
                                    var2 = variable.pop();
                                }
                                kb = "(" + var1 + op + var2 + ")";
                                variable.push(kb);
                                //Pop if operator NOT   (Unary)
                            } else if (op.equals("NOT")) {
                                String var1 = "";
                                if (variable.peek() != null && !variable.empty()) {
                                    var1 = variable.pop();
                                }
                                kb = "(" + op + var1 + ")";
                                variable.push(kb);
                                //No operator after popping )
                            } 
                        } 
                    }                   
                    //If there are no operators
                }   else {

                    variable.push(node1);
                }
            }
        }   
        fr.close();

    } catch (Exception e) {
        System.err.println("Error thrown" + e.getMessage());
    }
}

public static void main(String[] args) {
    System.out.println("In new file");
    toInfix1 inf1 =  new toInfix1();
    inf1.toPrefix1();
    System.out.println("Completed");
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:51:50.627

我试图访问一个在 variable.peek() 处为空的元素。删除所有窥视条件，将使程序工作。

# c++ - 将对象指针向量传递给类 (C++)

> ID：16076217
> 
> 赞同：1
> 
> 时间：2013-04-18T06:43:22.073
> 
> 标签：c++, class, object, vector, containers

我有一个对象指针向量。

```
std::vector<myObject *> listofObjects; 
```

我想将它们传递给另一个需要访问它们的对象。

当我尝试执行以下操作时：

```
class NeedsObjects 
{
 public:
    NeedsObjects(std::vector<myObject *> &listofObjects)
 private:
    std::vector<myObject *> &listofObjects;
}; 
```

然后在初始化列表中初始化向量我得到以下错误：

```
'myObject' was not declared in this scope
template argument 1 is invalid
template argument 2 is invalid 
```

我究竟做错了什么？我要做的就是将一个向量传递给 NeedsObjects 类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:54:49.790

您使用指向该对象的指针，因此您不必定义完整的对象结构，只需在使用之前在此文件中声明它：

```
class myObject; // pre declaration, no need to know the size of the class
class NeedsObjects 
{
 public:
    NeedsObjects(std::vector<myObject *> &listofObjects)
 private:
    std::vector<myObject *> &listofObjects;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:45:42.720

你不告诉编译器是什么`myObject`，所以它不知道如何创建`std::vector`. 使用`.h`-file 添加引用或`myObject`在此翻译单元中定义。

要么做

```
#include "myObject.h"

class NeedsObjects 
{
 public:
    NeedsObjects(std::vector<myObject *> &listofObjects)
 private:
    std::vector<myObject *> &listofObjects;
}; 
```

如果您已`myObject`在单独的标题中定义

或者

```
class myObject {
//declaration goes here
};

class NeedsObjects 
{
 public:
    NeedsObjects(std::vector<myObject *> &listofObjects)
 private:
    std::vector<myObject *> &listofObjects;
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T06:54:30.477

如我所见，您的代码中没有任何 myOpbject 类型的声明。

你基本上有2个选择：

a) 包含完全声明 myObject 的标头。

```
#include "myObject.h" // ... or something near to this. 
```

b) 让我们认为 myObject 是类。您在此处提供的代码（至少是声明部分）实际上不需要知道 myObject 的大小，因此您只需声明 myObject 是类并在其他地方声明即可。

```
class myObject; 
```

# javascript - 如何一次触发多个 JavaScript 函数

> ID：16076220
> 
> 赞同：3
> 
> 时间：2013-04-18T06:43:39.850
> 
> 标签：javascript

我如何同时触发这四个功能；

```
fireThisNow1();
fireThisNow2();
fireThisNow3();
fireThisNow4(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T06:46:02.317

你的意思是异步是吗？尝试这个：

```
setTimeout(function(){
    fireThisNow1();
}, 0);

setTimeout(function(){
    fireThisNow2();
}, 0);

setTimeout(function(){
    fireThisNow3();
}, 0);

setTimeout(function(){
    fireThisNow4();
}, 0); 
```

相同（如果父对象是窗口）：

```
for(var i = 1; i < 5; i++){
    setTimeout(function(){
        window['fireThisNow' + i]();
    }, 0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:48:13.450

当您想并行执行多个功能（多线程）时，您可以使用[WebWorkers](http://dev.w3.org/html5/workers/)。

# powershell - Wbadmin & powershell - 最新备份版本标识符

> ID：16076227
> 
> 赞同：2
> 
> 时间：2013-04-18T06:44:05.017
> 
> 标签：powershell

我需要在 powershell 脚本中获取最新的备份版本标识符。如果我运行 wbadmin get versions，我会得到一个备份列表，最后一个是我需要的。

有没有办法做一种`select top 1 version identifier from backups order by date`或解析 wbadmin 输出并得到它。

**编辑**

它可能是我正在寻找的 Get-WBBackupSet 的 windows.serverbackup 模块和 versionId，但仍然需要帮助来解析它。

```
VersionId        : 04/17/2013-21:00
BackupTime       : 17/04/2013 22:00:55
BackupTarget     : U:
RecoverableItems : Volumes, SystemState, Applications, Files, BareMetalRecovery
Volume           : {System Reserved, Local disk (C:), Local disk (I:), Local disk (O:)...}
Application      : {"Cluster", "Registry", "Microsoft Hyper-V VSS Writer"}
VssBackupOption  : VssFullBackup
SnapshotId       : 58999c7d-dfbf-4272-a5b9-21361d171486 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:05:19.390

试一试，使用 -Last 而不是 -First 来获取最后一项：

```
Get-WBBackupSet | 
Sort-Object BackupTime | 
Select-Object -First 1 -ExpandProperty VersionId 
```

您还可以使用 -Ascending 开关来调整排序顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T13:46:35.840

编辑：修订版

用于混合环境（撰写本文时为 Windows Server 2008、2008R2、2012、2012R2）：

```
function Get-MyWBSummary
{
<#
    .SYNOPSIS
        Retrieves the history of backup operations on the local or any number of remote computers.

    .DESCRIPTION
        The Get-MyWBSummary cmdlet retrieves the history of backup operations on the local or any number of remote computers with remoting enabled. This information includes backuptime, backuplocation, bersion identifier and recovery information.  
        To use this cmdlet, you must be a member of the Administrators group or Backup Operators group on the local or remote computer, or supply credentials that are.

    .PARAMETER ComputerName
        Retrives backup results on the specified computers. The default is the local computer.
        Type the NetBIOS name, an IP address, or a fully qualified domain name of one or more computers. To specify the local computer ignore the ComputerName parameter.
        This parameter rely on Windows PowerShell remoting, so your computer has to be configured to run remote commands.

    .PARAMETER Credential
        Specifies a user account that has permission to perform this action. The default is the current user. Type a user name, such as "User01", "Domain01\User01", or User@Contoso.com. Or, enter a PSCredential object, such as an object that is returned by the Get-Credential cmdlet. When you type a user name, you are prompted for a password.

    .PARAMETER Last
        Specifies the last (newest/latest) backup versions.

    .EXAMPLE 
        Get-MyWBSummary
        Retrieves all Windows Server backupversions from the local computer

    .EXAMPLE 
        Get-MyWBSummary | Where BackupTime -gt (Get-Date).AddDays(-7)
        Retrieves all Windows Server backupversions from the local computer within the last week    

    .EXAMPLE 
        Get-MyWBSummary -ComputerName $server1, $server2 -Last 1 -Credential $credential -ErrorAction SilentlyContinue -ErrorVariable sessionErrors         
        Retrieves the last (newest) Windows Server Backup backupversion from remote servers $server1 and $server2

    .NOTES
        Written by Anders Præstegaard (@aPowershell).
        Version 1.0 (20-01-2016)
#>  
    [CmdletBinding()]
    [OutputType([PSCustomObject])]
    param
    (
        [string[]]$ComputerName = $env:COMPUTERNAME,
        [System.Management.Automation.PSCredential]$Credential,
        [int]$Last
    )

    begin
    {
        if ($Credential)
        {
            $PSDefaultParameterValues['New-PSSession:Credential'] = $Credential
        }

        $psSession = New-PSSession -ComputerName $ComputerName
    }
    Process
    {

        $scriptBlock = {

            if (-not (Test-Path -Path 'C:\Windows\System32\wbadmin.exe'))
            {
                ## Windows Server Backup not installed
                continue
            }

            $content = WBAdmin.exe GET VERSIONS
            if (-not $content)
            {
                ## no versions found
                continue
            }

            ## Get linenumbers for each entity
            $newJobLines = @($content | Select-String -Pattern 'Backup time: ')

            if ($Using:Last -and $using:Last -lt $newJobLines.Count)
            {
                $newJobLines = $newJobLines[- $using:Last.. -1]
            }

            $newJobLines |
            ForEach-Object{
                ## Location
                $lineNumberLocation = $_.LineNumber
                $backupLocation = $content[$lineNumberLocation] -replace 'Backup location: '

                ## Version Identifier
                $lineNumberVersionIdentifier = $_.LineNumber + 1
                $backupVersionIdentifier = $content[$lineNumberVersionIdentifier] -replace 'Version identifier: '

                ## Backuptime UTC
                # Version identifier string in WBAdmin output represents the UTC datetime formated in 'MM/dd/yyyy-HH:mm'
                $wbAdminDateStringFormat = 'MM\/dd\/yyyy-HH:mm'
                $backupDateTimeFromVersionIdentifier = [DateTime]::ParseExact($backupVersionIdentifier, $wbAdminDateStringFormat, $null)
                $backupDateTimeUtcSpecified = [DateTime]::SpecifyKind($backupDateTimeFromVersionIdentifier, [System.DateTimeKind]::Utc)
                # NB WBAdmin calculates the time statically compared to your timezone (ie +1 hour)
                # If your timezone support "Daylight Saving Time" then WBAdmin calculation is wrong 
                # ~ half of the year (as far as I can perceive)
                $backupDateTimeLocalTime = $backupDateTimeUtcSpecified.ToLocalTime()

                ## Can recover
                $lineNumberCanRecover = $_.LineNumber + 2
                $backupVersionCanRecover = $content[$lineNumberCanRecover] -replace 'Can recover: '

                [PSCustomObject]@{
                    BackupTime = $backupDateTimeLocalTime
                    BackupTimeUtc = $backupDateTimeUtcSpecified
                    BackupLocation = $backupLocation
                    VersionIdentifier = $backupVersionIdentifier
                    CanRecover = $backupVersionCanRecover
                }
            }

        } # Scriptblock

        Invoke-Command -Session $psSession -ScriptBlock $scriptBlock |
        Select-Object -Property * -ExcludeProperty RunspaceId
    }
    end
    {
        if ($psSession)
        {
            Remove-PSSession -Session $psSession
        }
    }
} 
```

# java - 使用 charAt() 更改 char 数组

> ID：16076229
> 
> 赞同：1
> 
> 时间：2013-04-18T06:44:13.237
> 
> 标签：java, arrays, char

我完全不知道为什么`charAt()`在某些情况下有效，但在其他情况下无效。我在学习 Java 时正在做练习，其中一个是取一个字符串，然后以相反的顺序返回它。

我的工作代码：

```
public String reverseString(String tempStr){
    int initialindex = tempStr.length()-1;
    int reverseindex = 0;
    char tmp;
    char[] array = new char[tempStr.length()];

    for(int tempchar : array){
        tmp = tempStr.charAt(initialindex);
        array[reverseindex] = tmp;
        initialindex--;
        reverseindex++;
    }
    String returnstr = new String(array);
    return returnstr;
} 
```

我遇到的问题是使用以下`for`语句打印乱码：

```
for(int tempchar : array){
    array[reverseindex] = tempStr.charAt(initialindex);
    initialindex--;
    reverseindex++;
} 
```

可能有十几种不同的使用`while`循环、标准`for`循环和其他一些丑陋且不起作用的代码版本。为什么我创建一个`char tmp`字段，将被检查的字符放在该字段中，然后使用该字段将数据输入到数组中？

另外，为什么我不能只使用返回字符串`return array.toString();`？

编辑：我正在使用我今天下载的最新 Eclipse，从 netbeans 切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:54:10.333

1.  我将您的代码复制到我的编辑器中，无论使用哪个版本，无论`tmp`有无字段，它都表现良好。您必须使用其他方法犯了其他错误。

2.  Java 不支持漂亮`.toString()`的数组；任何不覆盖`toString`的对象都将生成对象的 hashCode 而不是对象的内容/字段，数组在这里也不例外。虽然对于字符数组似乎是明智的，但对 int 数组的相同操作会产生废话；`Arrays.toString()`查看和之间的区别`String.valueOf(array)`。在这种情况下，您可能想要使用该`String.valueOf`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:01:07.193

```
 public String reverse(String str)
        {
            if(str == null)
            {
               return null;
             }
           byte[] byteArray=  str.getBytes();
           int arrayLastIndex = byteArray.length -1 ;

           for(int i=0 ; i < byteArray.lenght/2: i++)
           {
              byte temp = byteArray[i];
              byteArray[i] = byteArray[arrayLastIndex -i ]
              byteArray[arrayLastIndex - i] = temp;
           }

           return new String(byteArray);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:50:58.447

作为开始的提示：如果要将`char`数组转换为`String`使用数组的`String`构造函数`char`。

更新：我看到您在编辑中已经这样做了。它现在是否按预期工作？

你的循环看起来有点奇怪，因为你从不使用你的循环变量。你可以试试这个：

```
char[] initialArray = initialStr.toCharArray();
char[] array = new char[tempStr.length()];

for(int srcIndex = 0, destIndex = array.length-1; destIndex >= 0; srcIndex++, destIndex--) {
    array[destIndex] = initialArray[srcIndex];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:52:24.760

对象的`array.toString()`返回字符串表示形式。您需要使用 String 的 char[] 构造函数`new String(array)`从 char[] 创建 String。

# asp.net - Visual Studio 2010 - 为 Web 设置项目中的网站配置 SSL

> ID：16076232
> 
> 赞同：1
> 
> 时间：2013-04-18T06:44:46.513
> 
> 标签：asp.net, ssl, web-setup-project

我有一个使用 SSL 的 Web 应用程序（http 处理程序）。我现在想为这个 Web 应用程序创建一个 Web 设置，我想知道是否有可能告诉设置项目该应用程序应该使用 SSL。我想这样做是因为这个处理程序将在客户端机器中使用，我只想应用程序在安装后在 HTTPS 下正确运行（用户不需要转到 IIS 并为该网站配置 SSL）。我在安装项目的文件系统下搜索了一个特定属性，但没有这样的选项。也许我可以使用一些自定义操作来做到这一点？应用程序使用由受信任的根证书颁发机构颁发的证书，并且已安装。

# php - 如何在复选框php数组中将公共元素标记为选中

> ID：16076234
> 
> 赞同：1
> 
> 时间：2013-04-18T06:44:48.080
> 
> 标签：php, arrays

我有两个数组。
第二个数组的元素`$array2`将通过复选框显示。
我希望将两个列表的共同元素标记为已选中，而其余部分未选中。

```
$array1 = array("a", "b");

$array2 = array("a", "b", "c", "d"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:50:34.597

```
$common = array_intersect($array1, $array2);

printf('<input type="checkbox" %s ...>', in_array('a', $common) ? 'checked' : null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:49:44.847

您可以在array2 上使用循环，然后在array1 中搜索，如果存在则标记复选框。例子：

```
foreach ($array2 as $key => $value) {
  if (array_search($value,$array1) !== FALSE) {
    //$array2 element $value found in $array1
    echo "<input type='checkbox' name='$value' checked />";
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:00:17.060

```
foreach ($array2 as $value) {
  echo (array_search($value,$array1) !== FALSE) ? "<input type='checkbox' name='$value' checked /> $value </br>" : "<input type='checkbox' name='$value'  /> $value </br>";
} 
```

# python - 来自 3 个 1D 数组的 python 曲面图

> ID：16076237
> 
> 赞同：2
> 
> 时间：2013-04-18T06:45:16.863
> 
> 标签：python, arrays, numpy, mayavi

我有 3 个一维数组。每个数组由浮点数组成。第一个数组表示 x 轴坐标。第二个y，第三个z。如果将每个数组中的对应点放入有序三元组中，则在 xyz 空间中有一个点。这些数组是从文件中读入的。在这个应用程序中，z 实际上是一个厚度。在这些情况下创建曲面图的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:07:45.393

最简单的方法是通过导入 mlab 在 ipython 中以交互方式启动 mayavi，然后使用它的 surf 函数：

```
import mlab
mlab.surf(x,y,z) 
```

希望这可以帮助。

# c# - 如何在 C# 中使用 FRED Rest 服务

> ID：16076238
> 
> 赞同：1
> 
> 时间：2013-04-18T06:45:31.423
> 
> 标签：c#, rest, hammock

我尝试将[FRED](http://stlab.istc.cnr.it/stlab/FRED)与[Hammock](http://www.ohloh.net/p/hammock)一起使用以使用提供的 REST 服务。不幸的是，我不知道如何使用它。到目前为止我做了什么：

```
string url = "http://wit.istc.cnr.it/stlab-tools/fred/api";
Hammock.RestClient client = new Hammock.RestClient();
client.AddHeader("Accept", "image/png -F text=Miles Davis was an american jazz musician");
//client.AddHeader("Accept", "text=Miles Davis was an american jazz musician");
client.Authority = url;
Hammock.RestRequest req = new Hammock.RestRequest();
req.Path = url;
Hammock.RestResponse response = client.Request(req);
string _result = client.Request(req).Content; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:59:09.253

您正在发出 POST 请求，但您从未指定。

* * *

来自 [juniper.net](http://forums.juniper.net/t5/Junos-Space-Developer/using-Hammock-to-send-REST-requests/td-p/90292)的摘录，用于发出 POST 请求：

```
public void makeQRest() {
    try {
        string auth = "http://wit.istc.cnr.it/stlab-tools/fred/api";
        string body = "text=Miles Davis was an american jazz musician";
        IWebCredentials credentials = new Hammock.Authentication.Basic.BasicAuthCredentials {
            Username = Config.uName,
            Password = Config.pWord
        };

        RestClient client = new RestClient {
            Authority = auth,
        };
        client.AddHeader("content-type", "Accept: image/png");

        RestRequest request = new RestRequest {
            Credentials = credentials,
            Method = WebMethod.Post
        };
        request.AddPostContent(Encoding.UTF8.GetBytes(body));

        RestResponse response = client.Request(request);
        Console.WriteLine("the create Queue status is " + response.StatusCode);
        Console.WriteLine(response.Content);
        Console.ReadLine();
    } catch (Exception e) {
        Console.WriteLine(e.Message);
        Console.ReadLine();
    }
} 
```

该`Method = WebMethod.Post`部分是您的代码中第一个缺少的东西。

# iphone - NSDate 未正确转换

> ID：16076239
> 
> 赞同：1
> 
> 时间：2013-04-18T06:45:33.487
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我正在尝试将日期字符串转换为另一种格式。我正在这样做。

```
NSLog(@"datestring is NOW %@",_dayObject.p_date);
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"YYYY-MM-DD"];
NSDate *date = [dateFormat dateFromString:_dayObject.p_date];
NSLog(@"date transformed %@",date);
[dateFormat setDateFormat:@"EEEE, dd/MM/YYYY"];
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
NSString *dateStr = [dateFormat stringFromDate:date];
NSLog(@"datestring is AFTER %@",dateStr); 
```

但这是我从我的 NSLOG 中得到的

```
2013-04-18 08:43:36.181 mosaqua2[9629:907] datestring is NOW 2013-05-04
2013-04-18 08:43:36.184 mosaqua2[9629:907] date transformed 2013-01-03 23:00:00 +0000
2013-04-18 08:43:36.184 mosaqua2[9629:907] datestring is AFTER donderdag, 03/01/2013 
```

我想要的是

```
Saterday, 04/05/2013 
```

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:49:02.653

使用我的以下自定义方法转换日期格式...

```
-(NSString *)changeDateFormat:(NSString*)stringDate dateFormat:(NSString*)dateFormat getwithFormat:(NSString *)getwithFormat{

    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:dateFormat];

    NSDate *date = [dateFormatter dateFromString:stringDate];

    dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:getwithFormat];

    NSString *convertedString = [dateFormatter stringFromDate:date];
    NSLog(@"Converted String : %@",convertedString);
    return convertedString;
} 
```

并像下面这样使用它......

```
NSString *strSDate = [self changeDateFormat:_dayObject.p_date dateFormat:@"yyyy-MM-dd" getwithFormat:@"EEEE, dd/MM/yyyy"];
NSLog(@"datestring is AFTER %@",strSDate); 
```

请参阅[我的博客](http://parasjoshi3.blogspot.in/)与这篇文章...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:57:27.897

检查这个......

```
NSLog(@"datestring is NOW ==>> %@", _dayObject.p_date);
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd"];
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];

NSDate *date = [dateFormat dateFromString: _dayObject.p_date];
NSLog(@"date transformed ==>> %@",date);
[dateFormat setDateFormat:@"EEEE, dd/MM/yyyy"];
[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
NSString *dateStr = [dateFormat stringFromDate:date];
NSLog(@"datestring is AFTER ==>> %@",dateStr); 
```

*   **输出：~**

    日期字符串现在 ==>> 2013-05-04

    转换日期 ==>> 2013-05-04 00:00:00 +0000

    日期字符串在 ==>> 星期六，2013 年 4 月 5 日之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:49:11.833

检查参数的字符大小写

```
NSLog(@"datestring is NOW %@",_dayObject.p_date);
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"]; //MODIFIED
NSDate *date = [dateFormat dateFromString:_dayObject.p_date];
NSLog(@"date transformed %@",date);
[dateFormat setDateFormat:@"EEEE, dd/MM/yyyy"]; //MODIFIED
NSString *dateStr = [dateFormat stringFromDate:date];
NSLog(@"datestring is AFTER %@",dateStr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:53:28.110

请尝试..这将有助于获得周名

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"eeee"];
 NSCalendar * cal = [NSCalendar currentCalendar];
NSUInteger numWeekdays = [cal maximumRangeOfUnit:NSWeekdayCalendarUnit].length;
 NSDateComponents * comp = [[NSDateComponents alloc] init];
for( NSUInteger day = 1; day <= numWeekdays; day++ ){
[comp setWeekday:day];
[comp setWeek:0];
NSDate * date = [cal dateFromComponents:comp];

NSString * dayName = [dateFormat stringFromDate:date];

NSLog(@"%@", dayName);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T06:59:56.700

你做得很好，除了`setTimeZone`，评论你会得到你的输出。

```
NSLog(@"datestring is NOW %@",_dayObject.p_date);
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"YYYY-MM-DD"];
NSDate *date = [dateFormat dateFromString:_dayObject.p_date];
NSLog(@"date transformed %@",date);
[dateFormat setDateFormat:@"EEEE, dd/MM/YYYY"];
//[dateFormat setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]]; //NOT NEEDED
NSString *dateStr = [dateFormat stringFromDate:date];
NSLog(@"datestring is AFTER %@",dateStr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T07:09:20.647

改变这个：“YYYY”

致：“yyyy”

错误原因，

> 使用 YYYY 是一个常见的错误。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

# cordova - linuxmint上的Phonegap Android App gedit

> ID：16076248
> 
> 赞同：2
> 
> 时间：2013-04-18T06:46:09.800
> 
> 标签：cordova

我想使用[phonegap](http://phonegap.com/)开发 android 应用程序，但我使用的是 linuxmint。我在谷歌上搜索，但找不到任何有用的链接。请任何人给我链接或解决方案，我如何在不使用 java api 的情况下在 gedit 上使用 phonegap 开发应用程序。因为在[phonegap](http://phonegap.com/)网站上，他们使用“cordova-2.6.0.js”或 eclipse 它对我没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:53:47.710

PhoneGap 应用程序只是网络应用程序。如果没有本机代码，您将无法访问[API 。](http://docs.phonegap.com/en/2.6.0/index.html)

好吧，这并不完全正确，有[Ripple](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc)可以让你在 Chrome 中测试你的 PhoneGap 应用程序，但它确实处于 beta 状态。

# android - 仅针对特定参数在 AsyncTask 中显示 ProgressDialog

> ID：16076251
> 
> 赞同：0
> 
> 时间：2013-04-18T06:46:19.347
> 
> 标签：android, android-asynctask

我正在实现一个 AsyncTask，它在 doInBackground 方法中调用 WCF 服务方法。

WCF 方法名称是 doInBackground 方法的参数。

我希望进度对话框仅显示发送到 doInBackground 的特定方法名称。

我的 porgressdialog 设置是在 onPreExecute 方法中设置的。

为特定 doInBackground 参数（wcf 方法名称）显示progressdialog 的任何方式

```
public class WCFHelper extends AsyncTask<Object, Void, String[]>{

private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://url";
final ProgressDialog pd;
public Context ctx;

public WCFHelper(Context _ctx)
{   this.ctx = _ctx;
    pd = new ProgressDialog(_ctx);
}

@Override
protected void onPreExecute() {

    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    pd.setMessage("login...");
    pd.setIndeterminate(true);
    pd.setCancelable(false);
    pd.show();

}

@Override
protected String[] doInBackground(Object... params) {
    String WCFmethod = (String)params[0];
    Map<String,Object> parameterArgs = (Map<String,Object>)params[1];
    Boolean isArr = (Boolean)params[2];

    String [] Fail = {"Fail"};
     String SOAP_ACTION = "http://tempuri.org/IService1/"+WCFmethod;
     String METHOD_NAME = WCFmethod;
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
        for(Map.Entry<String,Object> entry: parameterArgs.entrySet())
               request.addProperty(entry.getKey().toString(), entry.getValue().toString());         

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);

        if(!isArr)
        {
            SoapPrimitive result = (SoapPrimitive)envelope.getResponse();               
            String[] toReturn = new String[1]; 
            toReturn[0] = result.toString();
            return toReturn;
        }
        else{
            envelope.implicitTypes = true ; 
            SoapObject listDataSet = (SoapObject) envelope.bodyIn;         

            int numOfStrings = ((SoapObject)listDataSet.getProperty(0)).getPropertyCount();
            String[] toReturn = new String[numOfStrings];    

            for ( int i = 0 ; i <numOfStrings; i++) {  
                toReturn[i] = ((SoapObject)listDataSet.getProperty(0)).getProperty(i).toString();   
            }  
            return toReturn;
            }
        }
    catch (Exception e) {
        return Fail;
      } 
}

 protected void onPostExecute(String res) {
        // TODO: check this.exception 
        // TODO: do something with the feed     
        if(this.pd.isShowing())
            pd.dismiss();

    } 
```

如您所见，doInBackground 的参数之一是 WCF 方法名称。我希望进度对话框仅显示给特定的 WCF 方法（作为参数接收）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:10:49.840

在实例化 WCHelper 对象期间也发送参数。

在 WCFHelper 类中保留一个变量。

```
public class WCFHelper extends AsyncTask<Object, Void, String[]>{
    int val;
    public WCHelper(int param)   //constructor
    { 
        super();
        val = param;  //now you can use this val in onPreExecute
    }
...
} 
```

Send the same parameter you wanted to send to onPreExecute(). For example,

```
WCHelper task = new WCHelper(param);  // this sends value to constructor
task.execute(param);  //this sends value to doInBackground 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:57:30.800

您可以创建自己的 AsyncTask 自定义构造函数来传输处理进度对话框所需的参数。

```
private class MyTask extends AsyncTask<Void, Void, Void> { 

    public MyTask(boolean showProgress){
     ....
    }

    ....
} 
```

# wix - 将取消标头添加到 HyperlinkTheme.xml 文件

> ID：16076255
> 
> 赞同：1
> 
> 时间：2013-04-18T06:46:36.740
> 
> 标签：wix, wix3.6

有什么方法可以在主题文件中添加取消事件标头，以便我可以配置用户取消事件并显示适当的消息。到目前为止，即使用户取消安装或发生任何其他故障，我也会收到安装失败消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:34:07.357

您可以控制用户单击取消按钮时显示的确认消息框上的文本。为此，请提供自定义`.wxl`文件并更改`ConfirmCancelMessage`字符串。默认值为：

```
<String Id="ConfirmCancelMessage">Are you sure you want to cancel?</String> 
```

（有关示例，请参阅`src\ext\BalExtension\wixstdba\Resources\*.wxl`文件）。

但是，在wixstdba中，当用户在Apply()过程中点击取消按钮时，wixstdba总是会跳转到失败页面。那个或成功页面是今天仅有的两个选项。已经有一些关于扩展故障页面以使其更具可定制性的讨论，但尚未针对该想法进行任何工作。

# verification - 我需要使用网站管理员工具中的“元标记”验证网站的所有权 - 响应 400：错误请求

> ID：16076264
> 
> 赞同：0
> 
> 时间：2013-04-18T06:47:21.163
> 
> 标签：verification, google-search-console, google-data-api

我需要使用网站管理员工具中的“元标记”来验证网站的所有权。我在 Vb.net 中使用 Google Webmaster Tool API。以下是代码逻辑。

```
Dim client As New WebClient
    Try
        Dim query As String
        client.Headers.Add("Authorization: GoogleLogin auth=" + _auth)
        client.Headers.Add("GData-Version: 2")
        client.Headers.Add("Content-Type", "application/atom+xml")
        query = "<atom:entry xmlns:atom=""http://www.w3.org/2005/Atom"" " + _
            "xmlns:wt=""http://schemas.google.com/webmasters/tools/2007""> " + _
            "<atom:id>https://www.google.com/webmasters/tools/feeds/sites/http%3A%2F%2Ftestwebsite2.demos.classicinformatics.com%2F</atom:id> " + _
            "<atom:category scheme='http://schemas.google.com/g/2005#kind' " + _
            "term='http://schemas.google.com/webmasters/tools/2007#site-info'/> " + _
            "<wt:verification-method type=""metatag"" in-use=""true""/> " + _
        "</atom:entry>"

        Dim response = client.UploadString("https://www.google.com/webmasters/tools/feeds/sites/http%3A%2F%2Ftestwebsite2.demos.classicinformatics.com%2F", _
                                           "PUT", query)
Catch ex As WebException

End Try 
```

在上面的代码中，上传 API 字符串后，我收到 400 Bad Request 错误，而如果成功，响应应该是站点提要，每个条目都已更新，并且“已验证”元素设置为“真”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:07:55.067

我一直在研究谷歌网站管理员 api 并使用类似的过程，但坚持使用网站管理员工具 API 添加网站的功能。我正在遵循给定 URL 中解释的过程： [https ://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

我遵循了所有三个步骤。第 1 步：需要通过 AOuth 登录请求并获取授权码作为响应。

第 2 步：我正在获取访问令牌以换取授权码。

第3步：这是我坚持的步骤。
在这里，当我要为下一个请求使用此访问令牌时，它会向我显示未经授权的访问 (401)。

这是我使用网站管理员工具 api 生成添加网站的请求的代码

WebClient 客户端 = 新 WebClient();

```
 var query = "<atom:entry xmlns:atom='http://www.w3.org/2005/Atom'><atom:content src=\"" + address + "\" /></atom:entry>";
            client.Headers.Add("GData-Version", "2");
            client.Headers.Add("Content-Type", "application/atom+xml");
            client.Headers.Add("Authorization", "OAuth " + accessToken);

            var response = client.UploadString("https://www.google.com/webmasters/tools/feeds/sites/", "POST", query);
            //LoadList(); 
```

# ios - 使用从 web 服务接收到的 nsmutabledata 填充 tableview

> ID：16076267
> 
> 赞同：0
> 
> 时间：2013-04-18T06:47:39.287
> 
> 标签：ios, nstableview, nsmutabledata

我想用从 web 服务接收到的 NSMutableData 填充 tableview。我可以获取数据并在多个组件上显示，但无法填充表格视图，因为以下代码不接受 NSMutableData ；

```
AnyNSarray = [NSPropertyListSerialization propertyListWithData: webData options: 0 format:&plf error: &error]; 
//webData is NSMutableData that i populate with webservice data and AnyNSarray is a NSArray to provide tableview at 
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

这是表格视图填充块（以下代码在视图加载时也有效，但在我单击按钮后不会再次触发）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *CellIdentifier = [NSString stringWithFormat:@"cell%i",indexPath.row];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    cell.textLabel.text = [birnsarray objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = @"any details"; 
}
return cell;

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return AnyNSarray.count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:13:54.017

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [birnsarray count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:10:10.097

嘿，在 numberOfRows 函数中，您正在返回 AnyNSarray 计数，因此将您的 cellForRowAtIndexPath 替换为以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *CellIdentifier = [NSString stringWithFormat:@"cell%i",indexPath.row];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    cell.textLabel.text = [AnyNSarray objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = @"any details"; 
}
return cell;

} 
```

# jsf-2 - p:dataExporter 不工作

> ID：16076270
> 
> 赞同：1
> 
> 时间：2013-04-18T06:47:50.853
> 
> 标签：jsf-2, primefaces

我正在尝试使用 primefaces p:dataExporter 编写一个简单的 pdf 导出功能。我的代码如下

我的开发环境是 JSF-2.0、Primefaces-3.4.2、Eclips- JUNO、GlassFish

xhtml页面

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    >
<h:head>
    <title>Pdf Export</title>
</h:head>
<h:body>
<h:form id="myForm" >
    <p:dataTable id="tableId" var="car" value="#{tableBean.carsSmall}">
        <p:column headerText="Model">
            <h:outputText value="#{car.model}" />
        </p:column>

        <p:column headerText="Year">
            <h:outputText value="#{car.year}" />
        </p:column>

    </p:dataTable>

        <h:commandLink ajax="false" >  
            <p:graphicImage library="images" name="pdf.png" width="40" height="40" />  
            <p:dataExporter target="tableId" type="pdf" fileName="car"></p:dataExporter>
        </h:commandLink>

</h:form>
</h:body>
</html> 
```

我的数据表已正确填充，那里没有问题，但是当我单击导出时，没有任何反应。控制台也没有给出任何消息。我在我的 webapp 库中保留了 iTextpdf-5.4.0.jar 和 poi-3.2-FINAL.jar。我还需要在这里做些什么吗？请给我一些想法我错过了什么？

**编辑-1**

我尝试按照下面评论中的建议使用 iTextpdd-2.1.7，但仍然存在相同的问题，我无法导出为 pdf。

当我单击导出时，控制台会给我如下警告消息。此警告消息是否在导出中造成任何问题

```
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context 
/{project name}, because request parameters have already been read, or 
ServletRequest.getReader() has already been called 
```

**编辑-2**

今天我在 RAD-Wehsphere/iText 2.1.7 中尝试了相同的代码，并且 Export 在该环境中运行良好。我能够在 pdf 文件中导出数据表。Eclips-JUNO、GlassFish 环境中一定缺少某些东西。

TIA

# android - 方法在android中调用onBackPress

> ID：16076271
> 
> 赞同：0
> 
> 时间：2013-04-18T06:47:51.213
> 
> 标签：android, android-activity, baseadapter

我正在使用 Android 中的 Base 适配器，我想知道如果我在某些活动中按下 onBackPress，则在 BaseAdapter 类中调用哪个被覆盖的方法。请帮助我，我已经搜索并没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:17:47.957

您可能有列表视图，并且为列表视图设置了自定义适配器。Listview 在您的活动中。

```
class MyActivity extends Activity
{
   @Override
   public void onCreate(Bundle savedInstancestate)
   {
          setContentView(R.layout.main);
          ListView lv= (ListView) findViewById(R.id.listview);
          CustomAdapter cus= new CustomAdapter(MyActivity.this);
          lv.setAdapter(cus);   
   }
 }
 class CustomAdapter extends BaseAdapter
 {
    ....................
 } 
```

**因此，当您按下后退按钮时，当前活动从后退堆栈弹出，被销毁并且后退堆栈中的前一个活动获得焦点。这是默认行为。**

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

**您可以在活动中覆盖 onKeyDown(params)**

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();

}

return super.onKeyDown(keyCode, event);
}

public void onBackPressed() {
   //do something
finish();
return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:04:07.877

onBackPressed 将在您的 Activity 类中激活。它不是 BaseAdapter 类的事件。因此，在 Activity 类中覆盖您的 onBackPressed 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:49:55.107

[在您的活动中覆盖 onBackPressed](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)并相应地将数据更改为适配器，然后调用[notifyDataSetChanged](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T10:18:49.380

您可以通过以下方式将活动传递`reference`给适配器`constructor`：

```
CustomAdapter customAdapter=CustomAdapter(getApplicationContext(),arrayList,HomeActivity.this); 
```

并在您的自定义适配器中

```
public class CustomAdapter extends BaseAdapter {
Context context;
ArrayList<CategoryModel> arrCategoryModel;
AppCompatActivity activity;
public CustomAdapter(Context context, ArrayList<CategoryModel> arrCategoryModel, AppCompatActivity activity)
{
    this.context=context;
    this.arrCategoryModel=arrCategoryModel;
    this.activity=activity;
} } 
```

现在，您可以`activity.onBackPressed();`随时随地拨打电话。

# objective-c - 应用程序图标徽章数量不增加：Xcode

> ID：16076273
> 
> 赞同：18
> 
> 时间：2013-04-18T06:47:56.920
> 
> 标签：objective-c, push-notification, badge

我面临推送通知应用程序徽章编号值更新的问题。

我正在这样做：

```
-(void)application:(UIApplication *)application 
       didReceiveRemoteNotification:(NSDictionary *)userInfo {

       UIApplicationState state = [application applicationState];
       if (state == UIApplicationStateActive) {
          // do stuff when app is active

       }else{
          // do stuff when app is in background
          [UIApplication sharedApplication].applicationIconBadgeNumber = 
          [UIApplication sharedApplication].applicationIconBadgeNumber+1;  
               /* to increment icon badge number */
       }
 } 
```

但是，该图标始终将徽章编号显示为“1”，并且当有更多通知/一个通知接踵而至时，它不会增加。

任何建议都是可观的...

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-18T07:46:10.683

当您收到类似于以下内容的 JSON 通知负载时，操作系统会设置徽章编号：

```
{
    "aps" : {
        "alert" : "New notification!",
        "badge" : 2
    }
} 
```

如您所见，负责在`badge`密钥中设置正确数字的是服务器。您的服务器需要跟踪或计算每个用户的待处理通知数量，并`badge`在将通知发送给 Apple 之前生成该数量。

客户端的职责是在用户看到通知时清除通知标记或减少通知标记。这样做的代码是

```
application.applicationIconBadgeNumber = application.applicationIconBadgeNumber - 1; // Decrement counter 
```

或者

```
application.applicationIconBadgeNumber = 0; // Reset counter assuming the user is able to see all notifications at once. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-10T02:33:33.913

您可以改为创建一个静态变量，并将其分配给 applicationIconBadgeNumber：

```
static int i=1;
[UIApplication sharedApplication].applicationIconBadgeNumber = i++; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-27T16:16:49.010

我有同样的问题并通过创建 int 解决了它。class.h 中的变量

像这样 ：

自定义类.H

```
@property int badge; 
```

* * *

自定义类.M

```
-(id)init{

_badge=0;

self = [super init];
if (self) {

}
return self;} 
```

* * *

```
-(void)reminderCreator:(NSDate*)onTime withText:(NSString*)text{

_badge += 1;

UILocalNotification* localNotification = [[UILocalNotification alloc] init];
localNotification.fireDate = onTime;
localNotification.alertBody = text;
localNotification.soundName=UILocalNotificationDefaultSoundName;

localNotification.applicationIconBadgeNumber=_badge;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; } 
```

所以如果你在某个地方（可能在你的viewController）初始化这个自定义类，然后多次调用reminderCreator方法来设置几个localNotifications，它会为每个通知分配递增的数字。

+1 如果这有帮助:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T07:35:46.120

只有当`-(void)application:didReceiveRemoteNotification:`您的应用在前台运行时才会调用。

如果您希望在您的应用程序未运行时增加徽章，您应该在[推送通知有效负载](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW15)中设置徽章编号。您应该在那里跟踪徽章编号服务器端，因为`badge`推送通知有效负载的属性将用作徽章编号。它**不会**为您增加徽章编号。

由于系统会处理传入的推送通知，因此您的应用不会收到收到的推送通知的通知。只有当您的应用程序在前台运行时才会 `-(void)application:didReceiveRemoteNotification:`被调用。当它不在前台时，无法让您的应用程序响应推送通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T13:04:14.150

是的，尽管它的值增加到 2，但它似乎总是返回 badgeNumber 1。

使用此类代码时：

```
// update badge count
        let currentBadgeCount = UIApplication.shared.applicationIconBadgeNumber
        let badge = (aps["badge"] as? Int) ?? 1
        UIApplication.shared.applicationIconBadgeNumber = currentBadgeCount + badge 
```

所以我认为唯一的解决方案是将其存储在 UserDefaults 中，然后更新 UserDafaults 的值，然后设置它然后更新徽章计数？

这应该有效：

```
static var notificationsCount: Int {
        set {
            let userDefaults = UserDefaults(suiteName: SharedAppData.appGroup)
            userDefaults?.set(newValue, forKey: "notificationsCount")

            UIApplication.shared.applicationIconBadgeNumber = newValue
        }
        get {
            let userDefaults = UserDefaults(suiteName: SharedAppData.appGroup)
            return userDefaults?.integer(forKey: "notificationsCount") ?? 0
        }
    } 
```

接着

`SharedAppData.notificationsCount = 0`// 重置徽章计数

这要增加

```
 // update badge count
        SharedAppData.notificationsCount += 1 
```

# facebook - Facebook 邀请好友对话框 app_non_users 过滤器似乎没有效果

> ID：16076275
> 
> 赞同：8
> 
> 时间：2013-04-18T06:48:07.230
> 
> 标签：facebook, fbdialogs

我正在构建一个位于 facebook 页面选项卡中的 Facebook 应用程序（并且有一个 Canvas URL 挂钩。）我正在尝试实现 app_non_users 过滤器。

当我介绍过滤器时，我看到的是：

*   在 ['all'] 和 ['app_non_users'] 中都会显示每个人（包括已授权应用程序的人）
*   在 ['app_users'] 设置中，没有显示任何人。

我没有在移动设备上运行它，而是以预期的 JSON 形式传递参数（事实证明，Facebook 为不同的值做不同的事情。）

我也没有使用任何其他有冲突的过滤器，甚至没有使用“to”参数。当我检查网络选项卡时，我看到以下参数被传递给 FB：

```
message:Invite Message
title:Select from list of your friends
filters:['app_non_users']
api_key:xxxxxxx
app_id:xxxxxxxx
locale:en_US
sdk:joey
display:async
frictionless:false
redirect_uri:https://xyz.com
__d:1
__user:xxxxxxxx
__a:1
__dyn:798aD5z5CCU-wEbw
__req:9 
```

基于上述结果，在我看来，Facebook 并不仅仅认为应用授权意味着用户是 app_user。那么，究竟是什么造就了用户 app_user 以及作为应用程序开发人员的我如何做出这种改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:40:35.600

从问题中，我认为您在“请求”对话框中单独使用过滤器，而没有任何其他过滤器。如果这是正确的，那么请遵循[此处](https://developers.facebook.com/bugs/243409315785795?browse=search_518232fa27c327932127109)的错误，因为它指向与您遇到的相同问题。

作为替代方案，在修复错误之前，我可能会建议您使用多个过滤器，以便它们都能正常工作。[我在这里](https://apps.facebook.com/fbrelll/saved/b634b57d091743e77522c378b46655f9)对 RELL 进行了同样的尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T00:17:46.813

我使用“exclude_ids”参数和服务器端 PHP 解决了问题。Usng PHP 我已经使用已经进入我的应用程序的当前用户朋友的 id 填充了 exclude_ids（我的数据库中有这些 fb id），因此请求对话框不会向用户显示这些朋友。

# shell - 要安排的 Cronjob

> ID：16076276
> 
> 赞同：-1
> 
> 时间：2013-04-18T06:48:07.400
> 
> 标签：shell, unix, cron, scheduling

我必须在 Unix 中安排一个每隔一个星期一运行的作业，我已经使用 crontab 设置了一个 cronjob

```
00 00 * * 1/2 jobname.sh 
```

它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:51:57.123

对于所有遇到 cron 表达式问题的用户：

有多种工具可以生成或验证您的 cron 表达式。

其中之一是[http://cronmaker.com/](http://cronmaker.com/)，它是在线免费的。

# javascript - 如何设置光标：jquery数据表的手

> ID：16076284
> 
> 赞同：6
> 
> 时间：2013-04-18T06:48:33.083
> 
> 标签：javascript, css, html, datatables

我需要设置光标：用于特定 jquery 数据表行选择的手。我尝试使用此代码但不工作。

```
 $(document).ready(function () {
        $("#table tr").css('cursor', 'hand');
    }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T07:10:50.443

这就是答案，很简单：

```
<table class="display" id="table" style="cursor:pointer" width="100%"> </table> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T06:51:09.303

```
$(document).ready(function () {
    $("#table tr").css('cursor', 'pointer');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:05:39.173

用这个

HTML

```
<div class="teaser">
    <img src="http://lorempixel.com/output/animals-q-c-189-137-4.jpg">
</div> 
```

CSS

```
.teaser {
   border-radius: 100%;
overflow: auto;
display: table-caption;
}
.js
{
   cursor: -webkit-grab;
   cursor: -Moz-grab;

} 
```

查询

```
$(document).ready(function () {
        $(".teaser").addClass("js")
    }); 
```

# java - Java - 静态和动态数组初始化

> ID：16076294
> 
> 赞同：5
> 
> 时间：2013-04-18T06:49:09.503
> 
> 标签：java, arrays, dynamic, static, initialization

在运行时初始化的每个数组都是动态的，而在编译期间初始化的每个数组都是静态的，这是真的吗？

例如：

```
int array[];                 
public main() {      
    array = new int[100];    
} 
```

编译器知道数组有多少元素，所以它可以在编译期间初始化它吗？还是我需要给每个 int 一个值以便它变成静态的？像这样：

```
int array[3] { 1, 2, 3}; 
```

是否可以定义一个数组在 main() 函数之外应该有多少个元素？（不给每个 int 一个值）像这样：

```
int array[100];      
public main() {
} 
```

我正在编写一个小游戏，它必须运行得非常快。我读到动态数组需要更长的时间来处理，所以我想尝试使用静态数组，但我不确定数组何时变为静态或动态。我搜索了许多不同的教程，但我找不到答案。
谢谢阅读。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T08:26:43.413

动态分配和静态分配的区别是模棱两可的（它在某种程度上取决于语言的含义）。在最一般的意义上，静态分配意味着一些大小已经预先确定，可能是在编译时。

在 java 中，任何对象（包括数组）总是在运行时分配。这并不一定意味着它是动态的，它可能仍然是静态的，因为它不能在运行时更改。例子：

```
public class Test1 {
    public final int[] array1 = new int[10];

    public int[] array2 = new int[20];

    public void setArray2Size(int size) {
         array2 = new int[size];
    }
} 
```

array1 的大小为 10，并且不能在运行时更改。请注意*final*关键字。这允许您只分配一次“array1”成员。所以你不能给这个成员分配不同的数组。

现在，array2 不是最终的，因此您可以随时为其分配不同的数组，就像 setArray2Size() 方法一样。如果在初始赋值之后没有赋值，array2 仍然是*静态*的，因为它不能被更改（因为没有代码可以这样做），尽管通过声明更改它是允许的。

数组的具体实例一旦创建就无法调整大小（在 java 中*没有*语言元素可以表示调整数组的大小）。对于初学者来说有点难以掌握，但是像 array2 这样的变量*不是 array*。它是对数组的*引用*。但是，您*可以*将 array2 持有的引用替换为对另一个数组的引用，如 setArray2Size() 方法中的 array2 所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T06:56:08.780

时未分配内存`declaration`。

例如：`int array[100];` ; ——不会`compiles`

仅在`new`遇到运算符时才`memory`分配。

所以

`array = new int[100];` ; 编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T05:08:17.217

是的，数组的大小仅在编译时才知道，但内存分配将在运行时发生。在遇到“新”内存之前，不会将其分配给数组。

# google-maps - 在 j2me 中显示谷歌地图

> ID：16076299
> 
> 赞同：0
> 
> 时间：2013-04-18T06:49:30.740
> 
> 标签：google-maps, java-me

```
String url = "http://maps.google.com/maps/api/staticmap";url
           += "?zoom=13&size=" + width + "x" + height;url
           += "&maptype=roadmap";url
           += "&markers=color:red|label:A|"
           + lat
           + ","
           + lon; url
           += "&sensor=true"; 
```

我的第一次尝试是获取带有我的中心位置和缩放级别的静态地图，它有效，但是当我向 URL 添加标记时，我得到的是相同的图像但没有标记。

我在 Google Map API Doc 中做的完全一样，但我不知道出了什么问题。

有没有其他方法可以在 j2me 应用程序中显示地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:06:04.737

在 Java ME 应用程序中显示地图基本上有两种方法。您向地图服务器发出 HTTP 请求的方法最适合您只需要**一张**地图图像的情况。由于每次地图更新都需要更多的网络流量。如果您需要一系列图像、添加自定义标记或想要动态更新地图，最好使用使用**切片服务器**的专用库，缓存您的地图切片并在其上覆盖对象。[这里](http://www.developer.nokia.com/Community/Wiki/Using_the_RESTful_Map_API_with_Java_ME#Comparision_of_Network_traffic_generated_by_the_RESTful_Map_API_and_Maps_API_for_Java_ME)描述了这背后的原因

我推荐的动态映射库是[HERE Maps API for Java ME](http://www.developer.nokia.com/Resources/Library/HERE_Maps_Java_ME)，正如您可以从名称中看出的那样，该 API 专门设计用于 Java ME 设备。

该 API 目前与诺基亚 Asha SDK 1.0 捆绑在一起，但尽管如此，它实际上是一个单独的独立插件，旨在与所有标准 Java ME 设备配合使用。

[此处](https://stackoverflow.com/questions/17080047/access-google-maps-api-in-nokia-series-40/17098990#17098990)回答的类似 Stack Overflow 问题描述了如何下载它。

在地图上显示标记的代码可以在[开发者指南中找到](http://www.developer.nokia.com/Resources/Library/HERE_Maps_Java_ME/#!user-guide/maps/markers.html)

```
map.setState(new MapDisplayState(new GeoCoordinate(51.477, 0.0, 0), 15));

MapStandardMarker marker = mapFactory.createStandardMarker(
        new GeoCoordinate(51.477, 0.0, 0), 10, "Hi!", 
        MapStandardMarker.BALLOON);
marker.setColor(0xFFFF0000);  // Color is red
map.addMapObject(marker); 
```

作为隶属关系的通知，我应该顺便提一下，我确实为诺基亚工作。

# ios - 如何为 iOS 应用程序构建内部地图导航？

> ID：16076301
> 
> 赞同：5
> 
> 时间：2013-04-18T06:49:37.843
> 
> 标签：ios, navigation, map-directions

我有以下提到的要求：

*   已经有平面图地图图片
*   首先检测地板上的当前位置
*   然后使用平面图地图图像选择目的地位置
*   现在应用程序应该提供该源到目标路径的方向和距离
*   这就像谷歌方向的工作原理，但它的内部地图需要。

例如， - 用户的当前位置是：在他的办公桌前 - 会议室 #11 在哪里 - 因此应用程序应该在地图/平面图图像上提供方向和距离更新。

任何形式的建议/帮助都会很棒。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T19:43:05.170

几点...

您可以创建各种音频文件并将它们作为基于路由的路径点播放。与“在下一个灯右转”相同的原则。

绝对希望将您的准确度设置为：kCLLocationAccuracyBest。但这仍然可能最多只能让您获得大约 +/- 10 米的精度。

使用 MapOverlayView 进行平面图叠加。

如果您在室内，iPhone 会使用手机信号塔或 WIFI 进行定位。这对您来说可能是个问题，因为如果您要绘制多个楼层的地图，只有 GPS 可以为您提供高度读数 - 一楼、二楼等......

我不想对你的想法泼冷水，但我还没有听说有人成功地在 iPhone 上使用标准的东西制作了室内导航应用程序。如果你真的想继续这个项目，你最好的准确度可能是使用室内蓝牙发射器作为导航信标......？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:55:52.710

你想要的是地图中的路径规划，是吗？如果是这样，您可以使用很多算法。您可以根据您的地图和分辨率需求选择块大小，将 de map 划分为该块，并将每个块标记为可导航或不可导航。然后从第一个块向目标块的方向尝试，检查邻居块是否被阻止，然后继续前进，直到到达（或没有，如果它不可达）目标块。

那是一个伪实现，如果我了解您的需求，您可以选择这样做。

（我不知道其他人所说的您的硬件，具有简单的 GPS 和室内导航，假设 15m 分辨率是乐观/悲观信号之间的良好平衡，如果它用于机器人导航，它在 GPS 方面不是一个好的方法，但是算法是）。

# jquery - jQuery datepicker 只工作一次，第二次不显示

> ID：16076304
> 
> 赞同：10
> 
> 时间：2013-04-18T06:49:52.027
> 
> 标签：jquery, jquery-ui, datepicker

ASP.NET MVC3 / jQuery 1.9.1 / jQuery UI 1.10.2

我有一个页面，单击`Ajax.ActionLink`. 在这个对话框中，我有一个输入字段和一个`datepicker`与之关联的字段。当我第一次打开对话框时，我可以单击 datepicker 按钮（或在相关的输入字段内，因此它接收焦点，`showOn`设置为`both`），并且 datepicker 按预期显示。我可以，在模式对话框打开时，尽可能频繁地执行此操作，日期选择器每次都会显示。当我关闭模式对话框（通过附加`$("ui-widget-overlay").click(function(){...});`然后再次打开它时，无论我尝试单击按钮还是进入相关的输入字段，日期选择器都不再起作用。

我尝试调试 jQuery 代码，并且两次运行的代码行都是相同的（即使第二次打开对话框时没有显示日期选择器，也触发了 jQuery 方法）从我可以看到在调试器中。我完全被难住了，[这篇文章](https://stackoverflow.com/questions/2682259/jquery-ui-datepicker-not-displaying)中描述的方法仅有助于在对话框第一次打开时显示日期选择器。[另一个帖子](https://stackoverflow.com/questions/13494926/jquery-datepicker-does-not-show-the-second-time)似乎只与对`showOn`设置如何工作的误解有关。

我还尝试`$("#datepicker").datepicker("destroy");`在关闭对话框时通过破坏日期选择器 - 无济于事。有任何想法吗？

**更新**

在“调用页面”上：

```
$(document).ready(function () {
    $("#popupDialog").dialog(
    {
        autoOpen: false,
        modal: true,
        open: function()
        {
            $("ui-widget-overlay").click(function()
            {
                $("#popupDialog").dialog("close");
            }
        }
    });
});
[...]
@Ajax.ActionLink( "Some text", "Action", "Controller", new AjaxOptions {
    HttpMethod = "GET",
    UpdateTargetId = "popupDialog",
    InsertionMode = InsertionMode.Replace,
    OnSuccess = "openPopup()"
})
[...]
function openPopup()
{
    $("popupDialog").dialog("open");
}
[...]
<div id="popupDialog" style="display: none;"></div> 
```

控制器动作非常简单，如下：

```
public ActionResult Action()
{
    MyActionModel myActionModel = new MyActionModel();
    return PartialView( myActionModel );
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T14:16:59.380

在更多的调试和尝试跟踪 jQuery 事件之后，我测试了 jQuery UI 1.9.2 是否存在问题，但事实并非如此。然后我比较了`datepicker`没有涉及太多实际更改的相关代码行。

长话短说，我上面的问题中描述的问题可以通过将一行代码从 1.10.2 更改回 1.9.2 中的内容来解决：

**1.10.2 引起问题**

```
/* Initialise the date picker */
if (!$.datepicker.initialized) {
    $(document).mousedown($.datepicker._checkExternalClick);
    $.datepicker.initialized = true;
} 
```

**1.9.2。版本，按预期工作**

```
/* Initialise the date picker */
if (!$.datepicker.initialized) {
    $(document).mousedown($.datepicker._checkExternalClick)
        // !!!!!!!!!!
        // The next code line has to be added again so that the date picker
        // shows up when the popup is opened more than once without reloading
        // the "base" page.
        // !!!!!!!!!!
        .find(document.body).append($.datepicker.dpDiv);
    $.datepicker.initialized = true;
} 
```

我仍然不确定为什么会存在这种行为，但它似乎是一个相对罕见的星座。`datepicker`注意：在打开弹出对话框（或请求通过 AJAX）后，我没有“重新初始化” `PartialView`，因此将单个脚本源作为其中的一部分`_Layout.cshtml`就足够了。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-06T15:33:04.447

我有同样的问题，我解决了

```
$("#ui-datepicker-div").remove(); 
```

关闭并销毁弹出窗口后。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-16T13:35:23.427

对我有用的是-

在对话框中，如果我有多个带有 class 的输入`datepicker`，那么

```
$(".datepicker").removeClass('hasDatepicker').datepicker(); 
```

`hasDatepicker`基本上，在再次初始化之前删除类`datepicker`。

我在**jquery.ui.datepicker**的*1.8.18版本上*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T06:58:22.253

> 它通过 Ajax.ActionLink 打开，它通过 UpdateTargetId 属性更新目标 id (div)。返回模式对话框内容的控制器操作查询 Web 服务，然后返回带有填充模型的局部视图。

那么你需要在填充部分视图后**再次**调用 datepciker 函数......在ajax的回调函数中（如果你正在使用它）......

```
 $.ajax({
    success:function(){
        //your stuff
       $("#datepicker").datepicker();
     }
 }); 
```

datepikcker 将无法为动态添加的元素调用函数...因为您的目标 div 在第一次调用 datepicker 时不存在...您需要再次调用 datepicker 函数才能添加目标DIV

**更新**

```
 OnSuccess = "openPopup()"
  .....

 function openPopup(){
   //your codes
    $("#datepicker").datepicker(); //call date picker function to the added element again
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-13T11:06:07.740

我遇到了类似的问题，但发生在我身上的是第二次加载对话框时，数据选择器没有获取值。

问题是我第二次加载对话框，这些会导致问题。解决方案是在关闭对话框后将其删除，例如：

```
 $("#popupDialog").dialog("close");    
  $("#popupDialog").remove(); 
```

我希望这对任何人都有帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-30T07:22:33.813

您可以通过向 div **onclick="focusBlur()"添加一个新函数来做到这一点**

```
<script>
    function focusBlur() {
        $('input').blur();
    }
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-01T15:40:00.093

顺便说一句，我将尝试解释我解决它的方式，因为我认为这种方式更容易。

我不是这方面的专家，所以如果我没有使用正确的术语来解释它，请原谅我。

如果您在同一页面中有 2 个地方要加载日期选择器，则必须复制该功能：

```
$(function() {
    $( "#datepicker" ).datepicker({
      showOn: "button",
      buttonImage: "images/calendar.png",
      buttonImageOnly: true,
      buttonText: "Select date",
      addClass:".ccCFcalV2"
    });    
});       

$(function() {
    $( "#datepicker2" ).datepicker({
      showOn: "button",
      buttonImage: "images/calendar.png",
      buttonImageOnly: true,
      buttonText: "Select date",
      addClass:".ccCFcalV2"
    });
}); 
```

并将类“datepicker2”添加到您要调用日期选择器的第二个位置。它有效，几乎对我来说

希望对某人有所帮助，如果您认为这是一个愚蠢的解决方案，请告诉我，我将其删除

祝你今天过得愉快！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-20T00:34:04.360

我想在模式关闭后重新初始化日期选择器，因为在第一次试用期间选择的用于设置日期的值仍然存在。所以我不知道为什么，但下面的代码对我不起作用。

```
$(selector).datepicker("refresh") 
```

文档中提到的上述行没有帮助！

以下是我尝试过的，即销毁并重新初始化日期选择器对象。

```
$('#addPromoModal').on('hide.bs.modal', function(event) {
$("#startDate").datepicker("destroy");
$("endDate").datepicker("destroy");
initialiseDataPicker(); } 
```

这是我的初始化函数：

```
function initialiseDataPicker(){

 $( "#startDate" ).datepicker({
    defaultDate: "+1w",
    showWeek: true,
    firstDay: 1,
    changeMonth: true,
  //  numberOfMonths: 3,
   onClose: function( selectedDate ) {
     $( "#endDate" ).datepicker( "option", "minDate", selectedDate );
   }
 });
 $( "#endDate" ).datepicker({
     defaultDate: "+1w",
    showWeek: true,
    firstDay: 1,
    changeMonth: true,
  //  numberOfMonths: 3,
   onClose: function( selectedDate ) {
     $( "#startDate" ).datepicker( "option", "maxDate", selectedDate );
   }
 });
 } 
```

希望有帮助！类风湿关节炎

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-02T11:33:27.473

如果您需要在同一视图中显示不止一次日历并且它只显示一次，请尝试以下操作：

```
document.getElementById("div_Validade").onclick = function () { SetZIndex() };

function SetZIndex() {
    document.getElementById("ui-datepicker-div").style.zIndex = "999999";
} 
```

`div_Validade`对应于放置输入的div id，

`ui-datepicker-div`是未显示的基础设施元素。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-22T10:49:13.417

在 ajax 成功方法上初始化 datepicker。

# javascript - 如何单击链接并使游戏在我的页面上的某个区域弹出而不显示直到单击

> ID：16076308
> 
> 赞同：0
> 
> 时间：2013-04-18T06:50:03.740
> 
> 标签：javascript, jquery, css, html

我试图弄清楚如何让我的页面上的链接访问同一页面上某个位置的游戏。我有嵌入的多人游戏>。所以我在同一页面上有多个链接。所以基本上在我点击其中一个链接后，它会在链接旁边的任何区域弹出一个窗口，他们可以播放它。如果有人可以帮助我，我会给你很多需要的信用。我正在使用天线网页设计，我不确定是否需要调用函数，以便将代码放在某个区域。如果您有帮助，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:03:26.470

如果您需要在同一页面中使用

```
 <iframe></iframe> 
```

否则只是做一个链接。它将打开同一个窗口或使用 target="_blank" 它会打开一个选项卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:24:17.833

尝试在链接中发送视频 ID，并在点击事件时从查询字符串中过滤视频 ID

# sql-server - 将多个 CSV 文件从文件夹导入 SQL Server

> ID：16076309
> 
> 赞同：22
> 
> 时间：2013-04-18T06:50:10.317
> 
> 标签：sql-server, csv, import

我有一个名为***“转储”的文件夹。*** 此文件夹包含各种 .CSV 文件。文件夹位置是***'C:\Dump'***

我想将这些文件的内容导入 SQL Server。我想要粗略的代码以及正确的注释，以便我理解它。

我尝试了一些在网上找到的代码。但出于某种奇怪的原因，它们对我来说并没有完全解决。

* * *

我想要的步骤是

**步骤 1：**将文件夹中的所有文件名复制到表中

**第 2 步：**遍历表并使用批量插入从文件中复制数据。

* * *

有人请帮我解决这个问题。提前非常感谢:)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-18T08:56:25.567

```
 --BULK INSERT MULTIPLE FILES From a Folder 

    --a table to loop thru filenames drop table ALLFILENAMES
    CREATE TABLE ALLFILENAMES(WHICHPATH VARCHAR(255),WHICHFILE varchar(255))

    --some variables
    declare @filename varchar(255),
            @path     varchar(255),
            @sql      varchar(8000),
            @cmd      varchar(1000)

    --get the list of files to process:
    SET @path = 'C:\Dump\'
    SET @cmd = 'dir ' + @path + '*.csv /b'
    INSERT INTO  ALLFILENAMES(WHICHFILE)
    EXEC Master..xp_cmdShell @cmd
    UPDATE ALLFILENAMES SET WHICHPATH = @path where WHICHPATH is null

    --cursor loop
    declare c1 cursor for SELECT WHICHPATH,WHICHFILE FROM ALLFILENAMES where WHICHFILE like '%.csv%'
    open c1
    fetch next from c1 into @path,@filename
    While @@fetch_status <> -1
      begin
      --bulk insert won't take a variable name, so make a sql and execute it instead:
       set @sql = 'BULK INSERT Temp FROM ''' + @path + @filename + ''' '
           + '     WITH ( 
                   FIELDTERMINATOR = '','', 
                   ROWTERMINATOR = ''\n'', 
                   FIRSTROW = 2 
                ) '
    print @sql
    exec (@sql)

      fetch next from c1 into @path,@filename
      end
    close c1
    deallocate c1

    --Extras

    --delete from ALLFILENAMES where WHICHFILE is NULL
    --select * from ALLFILENAMES
    --drop table ALLFILENAMES 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-13T17:57:27.983

这将为您提供每个文件的单独表格。

```
--BULK INSERT MULTIPLE FILES From a Folder 
drop table allfilenames
--a table to loop thru filenames drop table ALLFILENAMES
CREATE TABLE ALLFILENAMES(WHICHPATH VARCHAR(255),WHICHFILE varchar(255))

--some variables
declare @filename varchar(255),
        @path     varchar(255),
        @sql      varchar(8000),
        @cmd      varchar(1000)

--get the list of files to process:
SET @path = 'D:\Benihana\backup_csv_benihana_20191128032207_part_1\'
SET @cmd = 'dir ' + @path + '*.csv /b'
INSERT INTO  ALLFILENAMES(WHICHFILE)
EXEC Master..xp_cmdShell @cmd
UPDATE ALLFILENAMES SET WHICHPATH = @path where WHICHPATH is null

delete from ALLFILENAMES where  WHICHFILE is null
--SELECT replace(whichfile,'.csv',''),* FROM dbo.ALLFILENAMES

--cursor loop
declare c1 cursor for SELECT WHICHPATH,WHICHFILE FROM ALLFILENAMES where WHICHFILE like '%.csv%' order by WHICHFILE desc
open c1
fetch next from c1 into @path,@filename
While @@fetch_status <> -1
  begin
  --bulk insert won't take a variable name, so make a sql and execute it instead:
   set @sql = 

   'select * into '+ Replace(@filename, '.csv','')+'
    from openrowset(''MSDASQL''
    ,''Driver={Microsoft Access Text Driver (*.txt, *.csv)}''
    ,''select * from '+@Path+@filename+''')' 

print @sql
exec (@sql)

  fetch next from c1 into @path,@filename
  end
close c1
deallocate c1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:49:50.370

对于第 1 步，也许您可​​以查看：

[http://www.sql-server-performance.com/forum/threads/copying-filenames-to-sql-table.11546/](http://www.sql-server-performance.com/forum/threads/copying-filenames-to-sql-table.11546/)

或者

[如何使用 SQL Server 列出文件夹内的文件](https://stackoverflow.com/questions/11559846/how-to-list-files-inside-a-folder-with-sql-server)

然后第 2 步

[如何在 T-SQL 中为批量插入转换变量？](https://stackoverflow.com/questions/5019041/how-to-cast-variables-in-t-sql-for-bulk-insert)

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T18:25:45.750

您可能需要先启用 xp_cmdshell：

```
sp_configure 'show advanced options', '1'
RECONFIGURE
go 
```

```
sp_configure 'xp_cmdshell', '1' 
RECONFIGURE
go 
```

并且，要启用 ad_hoc，

```
sp_configure 'show advanced options', 1;
RECONFIGURE;
GO 
```

```
sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE;
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-17T04:18:22.470

在 python 中，你可以使用[d6tstack](https://github.com/d6t/d6tstack)这使得这很简单

```
import d6tstack
import glob

c = d6tstack.combine_csv.CombinerCSV(glob.glob('*.csv'))
c.to_mssql_combine('mssql+pymssql://usr:pwd@localhost/db', 'tablename') 
```

请参阅[SQL 示例](https://github.com/d6t/d6tstack/blob/master/examples-sql.ipynb)。它还处理[数据模式更改](https://github.com/d6t/d6tstack/blob/master/examples-csv.ipynb)、创建表并允许您预处理数据。它利用`BULK INSERT`了所以应该同样快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-03T19:35:21.180

此代码将为每个导入的 CSV 文件创建一个新表。最好从 CSV 文件填充空数据库。

```
CREATE TABLE ALLFILENAMES
(
             WHICHPATH VARCHAR(255)
            ,WHICHFILE VARCHAR(255)
)

DECLARE @filename VARCHAR(255),
        @path     VARCHAR(255),
        @sql      VARCHAR(8000),
        @cmd      VARCHAR(1000)

SET @path = 'L:\DATA\SOURCE\CSV\'  --PATH TO YOUR CSV FILES (CHANGE TO YOUR PATH)
SET @cmd = 'dir ' + @path + '*.csv /b'

INSERT INTO ALLFILENAMES(WHICHFILE)
EXEC Master..xp_cmdShell @cmd

UPDATE ALLFILENAMES
  SET WHICHPATH = @path
WHERE WHICHPATH IS NULL

DECLARE c1 CURSOR
FOR SELECT WHICHPATH
          ,WHICHFILE
    FROM ALLFILENAMES
    WHERE WHICHFILE LIKE '%.csv%'

OPEN c1

FETCH NEXT FROM c1 INTO @path,
                        @filename

WHILE @@fetch_status <> -1
BEGIN
    CREATE TABLE #Header
    (
                 HeadString NVARCHAR(MAX)
    )
    DECLARE @Columns NVARCHAR(MAX) = ''
    DECLARE @Query NVARCHAR(MAX) = ''
    DECLARE @QUERY2 NVARCHAR(MAX) = ''
    DECLARE @HeaderQuery NVARCHAR(MAX) = ''

    SELECT @HeaderQuery = @HeaderQuery + 'bulk insert #Header from ''' + @path + @filename + '''  
        with(firstrow=1,lastrow=1)'
    EXEC (@HeaderQuery)

    SELECT @Columns = (SELECT QUOTENAME(value) + ' nvarchar(max)' + ','
                       FROM #Header
                            CROSS APPLY STRING_SPLIT(HeadString,',') FOR xml PATH(''))
    IF ISNULL(@Columns,'') <> ''
    BEGIN
        SET @Columns = LEFT(@Columns,LEN(@Columns) - 1)

        SELECT @Query = @Query + 'CREATE TABLE ' + Replace(@filename,'.csv','') + ' (' + replace(@Columns,'"','') + ')'
        PRINT @Query
        EXEC (@QUERY)
    END

    SELECT @QUERY2 = @QUERY2 + 'bulk insert ' + replace(Replace(@filename,'.csv',''),'.TPS','') + ' from ''' + @path + @filename + '''  
        with(firstrow=2,FORMAT=''csv'',FIELDTERMINATOR='','',ROWTERMINATOR=''\n'')'
    EXEC (@QUERY2)

    DROP TABLE #Header
    FETCH NEXT FROM c1 INTO @path,
                            @filename
END

CLOSE c1

DEALLOCATE c1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-22T18:57:19.810

to expand upon the answer by SarangArd you can replace temp with the following if your file name matches your table name.

```
' + Left(@filename, Len(@filename)-4) + ' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-11T15:19:39.993

要解决第 1 步，也可以使用 xp_dirtree 列出所有文件和文件夹。

请记住，它是一个未记录的函数。必须考虑安全预防措施。故意制作的文件名可能是入侵媒介。

# linux - Bash 脚本 Cron 作业

> ID：16076311
> 
> 赞同：0
> 
> 时间：2013-04-18T06:50:14.640
> 
> 标签：linux, bash, shell, centos

我已经在 Centos 6.4 中安装了适用于 linux 的 PCoIP Teradici PCoIP 解决方案。我想获得 HostCard 的 macAdress，当我运行`pcoip_agent -info`它时，它会使用命令行给出正确的输出。我想做这个 cron 工作，为此我编写了 bash 脚本

```
#!/bin/bash
hostcardMacAddress=$(pcoip_agent --info|grep  -F 'PCoIP Host card MAC:'|awk '{print $5}' > hostcardMacAddress.txt)
cat hostcardMacAddress.txt 
```

之后，我将此脚本设为 cron 作业，但它提供了空的 macAddress。

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:51:39.020

检查拥有该`cron`作业的用户的邮件。将出现一条错误消息，指出问题所在。

以 cron-job 的用户身份登录并在调用作业`mail`时检查邮件。`cron`

# java - Java - 查找类名和该类中的方法还可以找到该方法可用的参数

> ID：16076312
> 
> 赞同：0
> 
> 时间：2013-04-18T06:50:24.027
> 
> 标签：java, dynamic-data, dynamic-programming

我有一个包，我必须在其中找到包中可用的所有类和特定类可用的方法以及方法中可用方法的参数。

喜欢 ：

```
package com.test.dynamic;

public class Test{
Public testMethod(int test, String strArgument){
//some implementation
}
} 
```

在此，如果我给出包名，那么我必须能够获得类名：`Test`以及方法名`testMethod`和参数（`test and strArgument`如果可能的话`types`）。

如何在java中做到这一点。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:57:14.177

反射将为您做所有事情，请参阅此链接 [http://docs.oracle.com/javase/tutorial/reflect/class/index.html](http://docs.oracle.com/javase/tutorial/reflect/class/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:08:43.743

通过 Java 中的反射 API 有很多方法，如 getName()、getInstance()..etc 它会帮助你：[http ://www.roseindia.net/java/reflect/Class.shtml](http://www.roseindia.net/java/reflect/Class.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:20:47.390

offcourse..你应该阅读反射教程。下面的代码可以给你一些指示。**反射是在运行时获取类的信息。**

```
Method[] methods = IsAccountIdAvailable.class.getDeclaredMethods();
    for (int i = 0; i < methods.length; i++) {
      System.out.println("Method Name-"+methods[i].getName());
      System.out.println("Method Parameters-"+methods[i].getGenericParameterTypes());
      System.out.println("Method Return Type-"+methods[i].getGenericReturnType());
    } 
```

# unix - 将多个文件附加到一个文件中

> ID：16076315
> 
> 赞同：0
> 
> 时间：2013-04-18T06:50:32.010
> 
> 标签：unix

`cat`我使用该命令将多个数据文件附加到一个数据文件中。如何将该单个文件值分配到新文件中？

我正在使用命令：

```
cat file1 file2 file3 > Newfile.txt
AnotherFile=`cat Newfile.txt`
sort $AnotherFile | uniq -c 
```

它显示错误，例如无法打开另一个文件如何将此新文件值分配到另一个文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:57:14.927

### 原始问题的原始答案

好吧，最简单的方法可能是`cp`：

```
cat file1 file2 file3 > Newfile.txt
cp Newfile.txt AnotherFile.txt 
```

如果做不到这一点，您可以使用：

```
cat file1 file2 file3 > Newfile.txt
AnotherFile=$(cat Newfile.txt)
echo "$AnotherFile" > AnotherFile.txt 
```

### 修订后问题的修订答案

原来的问题`echo "$AnotherFile"`是第三行；修改后的问题已`sort $AnotherFile | uniq -c`作为第三行。

假设`sort $AnotherFile`不是对通过连接原始文件创建的列表中提到的文件的所有内容进行排序（即，假设`file1`,`file2`和`file3`不只包含文件名列表），那么目标是对找到的行进行排序和计数在源文件中。

整个工作可以在一个命令行中完成：

```
cat file1 file2 file3 | tee Newfile.txt | sort | uniq -c 
```

或者（更常见的是）：

```
cat file1 file2 file3 | tee Newfile.txt | sort | uniq -c | sort -n 
```

它按频率递增的顺序列出了行。

如果您确实想对 , 中列出的文件的内容进行排序，`file1`但只列出每个文件的内容一次，则：`file2``file3`

```
cat file1 file2 file3 | tee Newfile.txt | sort -u | xargs sort | sort | uniq -c 
```

连续三个与排序相关的命令看起来很奇怪，但每个步骤都有理由。`sort -u`确保每个文件名都列出一次。将`xargs sort`标准输入上的文件名列表转换为`sort`命令行上的文件名列表。其输出是生成的每批文件的排序数据`xargs`。`xargs`如果不需要`sort`多次运行的文件很少，那么下面的纯文本`sort`是多余的。但是，如果`xargs`必须运行`sort`不止一次，那么最终排序必须处理这样一个事实，即由 生产的第二批生产的第一行`xargs sort`可能在生产的第一批生产的最后一行之前`xargs sort`。

这成为基于原始文件中数据知识的判断调用。如果文件足够小以至于`xargs`不需要运行多个`sort`命令，请省略最后的`sort`. 启发式方法是“如果源文件的大小总和小于最大命令行参数列表，则不包括额外的排序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:01:43.507

您可能可以一口气做到这一点：

```
# Write to two files at once. Both files have a constantly varying
# content until cat is finished.
cat file1 file2 file3 | tee Newfile.txt> Anotherfile.txt

# Save the output filename, just in case you need it later
filename="Anotherfile.txt"

# This reads the contents of Newfile into a variable called AnotherText
AnotherText=`cat Newfile.txt`

# This is the same as "cat Newfile.txt"
echo "$AnotherText" 

# This saves AnotherText into Anotherfile.txt

echo "$AnotherText" > Anotherfile.txt

# This too, using cp and the saved name above
cp Newfile.txt "$filename" 
```

如果您想一次性创建第二个文件，这是一种常见的模式：

```
# During this process the contents of tmpfile.tmp is constantly changing
{ slow process creating text } > tmpfile.tmp

# Very quickly create a complete Anotherfile.txt
mv tmpfile.tmp Anotherfile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T10:11:16.217

制作文件并在附加模式下重定向。

```
touch Newfile.txt
cat files* >> Newfile.txt 
```

# java - Java - 具有相同参数的多个构造函数

> ID：16076317
> 
> 赞同：5
> 
> 时间：2013-04-18T06:50:37.733
> 
> 标签：java, constructor, arguments

我需要创建多个具有相同参数的构造函数，以便我可以从我的 DAO 类中调用这些构造函数来填充不同的下拉值

```
public static Employee empType(String empCode, String empType) {

    Employee emp = new Employee();
    emp .empCode= empCode;
    emp .empType= empType;
    return emp ;
}

 public static Employee empDept(String deptCode, String deptName) {

    Employee emp = new Employee();
    emp .deptCode= deptCode;
    emp .deptName= deptName;
    return emp ;
} 
```

当我从 DAO 类中引用时，如何引用这些构造函数？

例如

```
private static Employee myList(ResultSet resultSet) throws SQLException {
    return new <what should be here>((resultSet.getString("DB_NAME1")), 
                      (resultSet.getString("DB_NAME2")));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T06:56:05.217

你不能。此外，这些函数不是构造函数。以及你想如何决定调用哪个“构造函数”？？？

您可以合并这两个功能：

```
public static Employee createEmp(String empCode, String empType, String deptName) {
    Employee emp = new Employee();
    emp .empCode= empCode;
    emp .empType= empType;
    emp .deptName= deptName;
    return emp ;
} 
```

并`null`用作不需要的参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T07:00:15.187

您不能创建多个具有相同名称和相同参数的构造函数/方法

你可以做的是改变你的实现，而那些不是构造函数。

您可以遵循 Baraky 所做的，也可以使用它（创建布尔标志或 int 值标志）

```
public Employee empType(String val1, String val2, int type) {

     Employee emp = new Employee();

    if(type == 1){
          emp .empCode= val1;
          emp .empType= val2;
    }else if(type ==2){
          emp.deptCode= val1;
          emp .deptName= val2;
     }
    return emp ;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-11T09:50:01.803

从[文章](http://davin.50webs.com/research/2008/mcwtsa.html)：

> 在 Java 中，您不能有多个具有相同参数的方法（包括构造函数）。要解决此限制，您需要使用具有不同名称的静态方法，将客户端代码用作构造函数。在静态方法`ctorApple`之后 的代码中`ctorBanana`，在`ctorCarrot`内部调用私有构造函数 `Foo()`并充当具有相同参数的多个构造函数的角色。前缀 ctor 旨在提醒客户端这些方法充当构造函数的角色。

```
class Foo
{
   private Foo()
   {
     // ...
   }
   public static Foo ctorApple(/* parameters */)
   {
       Foo f = new Foo();
       // set properties here using parameters
       return f;
   }
   public static Foo ctorBanana(/* parameters */)
   {
       Foo f = new Foo();
       // set properties here using parameters
       return f;
   }
   public static Foo ctorCarrot(/* parameters */)
   {
       Foo f = new Foo();
       // set properties here using parameters
       return f;
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T06:56:23.570

如果你必须有多个构造函数，你可以像这样添加一个虚拟参数。

```
public static Employee empType(String empCode, String empType) {

    Employee emp = new Employee();
    emp .empCode= empCode;
    emp .empType= empType;
    return emp ;
}

 public static Employee empDept(String deptCode, String deptName, bool dummy) {

    Employee emp = new Employee();
    emp .deptCode= deptCode;
    emp .deptName= deptName;
    return emp ;
} 
```

这样做时，性能下降很小（非常非常小），但如果代码更具可读性，那是值得的 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T06:56:31.180

我不认为 java 允许具有相同参数（数据类型）的多个构造函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T06:58:27.390

如果您需要灵活地创建对象，请查看该`Builder`模式。但是，在您的情况下，我不明白为什么仅拥有一个带有所有参数的构造函数就不起作用。只需从结果集中获取所有属性，如果它们为空，则不会设置它们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-14T12:59:50.143

如果您有两个具有相同参数含义但效果不同的相同构造函数，您可以尝试将它们合二为一：

```
public Name(Type parameter, boolean type) {
    if(type) {

    }else {

    }
} 
```

如果您有 2 个以上相同的构造函数，则使用`int type`and `switch`。只是建议。

编辑：`types`在这种情况下，应该定义`enum`为更容易掌握代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-27T17:52:53.520

如果对构造函数使用不同的参数集会改变其行为方式，我建议扩展或使用组合来创建具有新参数集的新类。

这也将遵守 OPEN/CLOSE 原则。

# sql - 使用 SSIS 从 Web 服务到 SQL Server 的 XML

> ID：16076321
> 
> 赞同：1
> 
> 时间：2013-04-18T06:50:51.210
> 
> 标签：sql, sql-server, xml, ssis

我有一个将 XML 输出保存到变量的 Web 服务任务。

现在的问题是变量类型是什么？另外，我怎样才能将 XML 变量传输到 SQL Server 数据库？我似乎无法使数据流工作，XML 源到 ole db 源？我在正确的道路上吗？谢谢

```
 <xs:element name="Table">
        <xs:complexType>
        <xs:sequence>
        <xs:element name="FlightDate" type="xs:dateTime" minOccurs="0"/>
        <xs:element name="FlightNo" type="xs:string" minOccurs="0"/>
        </xs:sequence>
        </xs:complexType>
        </xs:element> 
```

我需要将航班日期和航班号保存到 sql 中的临时表中。它必须有自己的列，例如航班日期和航班号

![在此处输入图像描述](https://i.stack.imgur.com/zmt9c.png)

![在此处输入图像描述](https://i.stack.imgur.com/Z5WjX.png)

![在此处输入图像描述](https://i.stack.imgur.com/MhEm2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:30:56.910

将 XML 源数据访问模式更改为 XML 数据从变量，

然后你可以给“User::FlightInfoXML”变量。

# c# - ANTLR3 减少内存使用

> ID：16076324
> 
> 赞同：0
> 
> 时间：2013-04-18T06:50:54.897
> 
> 标签：c#, java, antlr, antlr3

我在 ANTLR3 中编写了一个解析器。目标是 Java 和 CSharp3。两者都在解析时使用了大量内存。我正在解析的文件大小在 5 到 40 MB 之间。内存使用远不止于此，iirc 正确地显示了 .NET 内存分析器的峰值超过 600MB。语法文件大约有 500 行。我只需要我在语法中注入的代码生成的输出。我不需要内存或 AST 中的所有词法分析器标记。

有什么我可以做的吗？ANTLR4 是否解决了内存使用问题？

# mongodb - mongodb 从 1.8 升级到 2.4

> ID：16076326
> 
> 赞同：1
> 
> 时间：2013-04-18T06:51:06.243
> 
> 标签：mongodb

您好我需要将 mongodb 独立服务器从 1.4.5 升级到 2.4，并将副本集从 1.8.3 升级到 2.4。我有文档要从 2.2 升级到 2.4。但我无法获得将 mongodb 从 1.4 版本升级到 2.4 或从 1.8 到 o2.4 的文档。在其中一个文档中，我发现要从 2.0 升级到 2.4，首先需要升级到 2.2，然后再升级到 2.4。那我需要逐步升级吗？

# windows-8 - 打包 Metro 应用程序后如何动态更改 url？

> ID：16076328
> 
> 赞同：0
> 
> 时间：2013-04-18T06:51:25.777
> 
> 标签：windows-8, microsoft-metro, package, winjs

嗨，我已经为我的 Metro 应用程序创建了一个包。在开发我的应用程序时，我给了一个静态 Url，但是每当我的要求发生变化时，我都需要动态更改 Url。那我该怎么办？谁能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:06:05.023

如果您的要求正在发生变化，那么您可能会发布应用程序的新版本，因此每次 URL 更改并重新发布时手动更新您的应用程序包可能是有意义的。如果您的 URL 不经常更改，这绝对是最简单的解决方案。在这种情况下，您还需要处理弃用旧 URL，或者至少在旧 URL 关闭时优雅地处理，以便尚未升级到最新版本的用户仍然不会有可怕的体验。

如果这不是一个可行的选择，那么从这里开始会变得更加混乱。实际上，更改存储的 URL 的唯一方法是对当前 URL 有某种辅助服务或权限。然后，该应用程序将执行以下操作之一（或组合）：

1.  在发出任何请求*之前*查询当前 URL 的 URL 权限。
2.  尝试向当前存储的 URL 发出请求，如果失败，则向 URL 授权机构查询新 URL 并存储该 URL。

# php - 正则表达式前 2 个字符是字母或数字，但不是两者的组合

> ID：16076329
> 
> 赞同：-4
> 
> 时间：2013-04-18T06:51:28.863
> 
> 标签：php, regex

我需要 PHP 中的正则表达式来验证字符串，例如：“AB345678”或“12345678”。也就是说，八 (8) 个字母字符串包含前 2 个字母为字母或数字，但不是两者的组合，然后是其余 6 个数字字母。我试图自己做，但它不起作用。

这是我的代码：

```
/^[0-9a-zA-Z]{2}[0-9]{6}$/ 
```

我是 Regex 的新手，因此在这里需要帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T06:53:50.137

你可以这样做

```
^([a-zA-Z]{2}|\d{2})\d{6}$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T06:53:00.390

使用`|`（又名交替运算符或管道运算符）说“左侧或右侧”：

`/^([0-9]{2}|[a-zA-Z]{2})[0-9]{6}$/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:38:12.387

为了兼容 unicode：

```
^(?:\pL{2}|\pN{2})\pN{6}$ 
```

用 php：

```
if (preg_match('/^(?:\pL{2}|\pN{2})\pN{6}$/u', $string)) {
    echo "OK";
} 
```

*   `\pL`代表任何字母。
*   `\pN`代表任何数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:59:02.740

```
/^ \d{8} | (?: [a-zA-Z]{2} \d{6} ) $ /x 
```

# c# - NotifyIcon 未显示完整消息

> ID：16076337
> 
> 赞同：0
> 
> 时间：2013-04-18T06:52:04.390
> 
> 标签：c#, winforms, background-process, windows-applications, notifyicon

我正在使用 NotifyIcon 来显示有关我的 C# Windows 应用程序的后台进程结果的一些信息。但有时它不会显示完整的消息。它隐藏了给定消息的某些行。

谁能告诉我这个消息正文有什么限制吗？或者如何强制 NotifyIcon 显示完整的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:11:54.530

NotifyIcon 的文本长度限制为 64 个字符。但是有一个“黑客”可以解决这个问题，请看一下[**这个问题**](https://stackoverflow.com/questions/579665/how-can-i-show-a-systray-tooltip-longer-than-63-chars)的解决方案。希望这可以帮助！

# orchardcms - 果园导航 - 如何使菜单链接不可点击

> ID：16076340
> 
> 赞同：4
> 
> 时间：2013-04-18T06:52:15.887
> 
> 标签：orchardcms, orchardcms-1.6

我有以下菜单导航：

```
home
product
     product 1
     product 2
news
     press releases
about us 
```

上面的每个菜单项都链接到一个内容，“产品”除外。我需要这样做，这样当用户单击“产品”时就不会去任何地方。

我尝试使用“自定义链接”，并在 url 中输入“#”或“javascript:void(0)”，但这不起作用，因为 Orchard 总是在 url 前面加上“/”。

此外，我尝试使用“Html 菜单项”并在 html 正文中输入“产品”，但始终呈现为

```
<li><span class="raw"><p>product</p></span><ul>...</ul></li> 
```

我想要以下任一：

```
<li><a href="#">product</a><ul>....</ul></li> 
```

或者

```
<li>product<ul>....</ul></li> 
```

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:01:21.910

在项目目录`Menu.cshtml`下的文件中，您可以这样做：`Core->Shapes->Views``Orchard.Web`

```
$(document).ready(function () {
    $("#Nav a").click(function(e) {
        e.preventDefault();
    });
}); 
```

以上禁止点击所有菜单链接，所以如果你想阻止点击二级菜单项：

```
$('#Nav li ul li a').click(function(e){
     e.preventDefault();
}); 
```

该`Menu.cshtml`文件是您的导航菜单的视图，因此您可以根据需要定义它的行为。你也可以看看我的[这个答案](https://stackoverflow.com/questions/11938655/customizing-the-orchard-navigation-menu)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:01:22.543

您可以按照 Mohammad 所说的做，但在您的主题中创建一个备用 Menu.cshtml。修改 Orchards 核心代码是不好的做法。

# android - 在 phonegap 中找不到命令

> ID：16076347
> 
> 赞同：1
> 
> 时间：2013-04-18T06:52:38.890
> 
> 标签：android, cordova, command

我按照教程在[http://docs.phonegap.com](http://docs.phonegap.com)的 phonegap 中使用命令来构建、运行……但我不能使用这些命令，除了`Create`命令。`Create`命令是：

```
create ./test1 com.test1 test1
the original command is: $ /path/to/cordova-android/bin/create.bat /path/to/my_new_cordova_project com.example.cordova_project_name CordovaProjectName 
```

成功创建项目后，我运行命令：

```
cd test1/cordova/build
the original command is: $ /path/to/my_new_cordova_project/cordova/build.bat 
```

但它会引发错误：

> 'build' 不是内部或外部命令、可运行程序或批处理文件。

然后我转到我的新项目文件夹，进入文件夹：cordova 以查找 build.bat，但我什么也没看到。你能告诉我如何修复这些东西吗，我想使用命令来构建我的 phonegap 项目。谢谢！

附加信息：使用 phonegap 2.6，android 平台。视窗 7 64 位。我能够运行命令：ant、java、javac 和一些在 android 平台工具中，...

# matlab - 如何找到图像边缘的法线

> ID：16076348
> 
> 赞同：3
> 
> 时间：2013-04-18T06:52:43.780
> 
> 标签：matlab, image-processing, edge-detection

我正在做一些与眼睛图像相关的工作。我对它进行了边缘检测。边缘就像一条曲线而不是连续的。我必须假设它是连续的并找到该曲线的法线。如何使用 MATLAB 找到它的法线？

你可以看到下面的图片。

![边缘图像](https://i.stack.imgur.com/xVQfm.jpg)

我想找到上曲线的法线。我希望我已经足够清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:27:24.173

尽管看起来不直观，但每个像素的边缘方向是对法线的一个很好的估计。这将是最简单的解决方案，因为它不涉及任何曲线拟合。

在 MATLAB 中，您可以使用 Sobel 滤波器找到逐像素的边缘方向：

```
[BW,thresh,gv,gh] = edge(I,'sobel');
edgeDir = atan2(gv, gh); 
```

这为您提供了以弧度为单位的角度的边缘方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:14:21.710

您可能需要考虑对数据进行曲线拟合（基于 MSE 或其他一些标准）。我相信二阶对上曲线有好处，一旦你有了模型，你就可以计算每个点的切线和法线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T03:20:34.427

正如赞福德建议的那样，法线垂直于边缘。您不需要进行曲线拟合，您可以使用反投影来识别曲线的焦点。

从曲线的每个边缘点开始，从曲线沿法线方向画一条线。通过增加线通过的每个像素的值来绘制线。一旦对所有边缘执行此操作，您将希望找到两个像素值比其余像素更高的像素，每条曲线一个像素。然后，您应该知道每个曲线的焦点位置。

# javascript - Rowunselect 没有 ctrl+单击

> ID：16076349
> 
> 赞同：4
> 
> 时间：2013-04-18T06:52:48.500
> 
> 标签：javascript, ajax, jsf, primefaces

是否有可能在不按住控制键的情况下取消选择一行，只需单击它？我的意思是，如果您单击已选择的行，它应该取消选择，而不必按住控制键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:44:26.670

我用 Primefaces 3.4.2 测试过：xhtml 页面：

```
<script type="text/javascript">
                function test(xhr, status, args){
                    if(args.unselecttest % 2 == 1){
                        stest.unselectAllRows();
                    }
                }
            </script>
<p:dataTable widgetVar="stest" selectionMode="single" selection="#{tabview.car}"
<p:ajax event="rowSelect" oncomplete="test(xhr, status, args);" /> 
```

豆：

```
private int count = 0;

    public Car getCar() {
        return car;
    }

    public void setCar(Car car) {
        if (car.equals(this.car)) {
            count++;
            RequestContext reqCtx = RequestContext.getCurrentInstance();
            reqCtx.addCallbackParam("unselecttest", count);
        } else {
            count = 0;
        }
        this.car = car;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-09T17:39:59.687

我得到了解决方案。

我刚刚覆盖了 primefaces.js，实际上，我只是复制了 Primefaces.Datatable 的一部分，然后删除了需要使用 CtrlKey 取消选择行的条件。

这里的例子：

原始 javascript 报价：

```
onRowClick: function (e, d, a) {
    if ($(e.target) .is('td,span:not(.ui-c)')) {
      var g = $(d),
      c = g.hasClass('ui-state-highlight'),
      f = e.metaKey || e.ctrlKey,
      b = e.shiftKey;
      if (c && f) {
        this.unselectRow(g, a)
      } else {
        if (this.isSingleSelection() || (this.isMultipleSelection() && e && !f && !b && this.cfg.rowSelectMode === 'new')) {
          this.unselectAllRows()
        }
        if (this.isMultipleSelection() && e && e.shiftKey) {
          this.selectRowsInRange(g)
        } else {
          this.originRowIndex = g.index();
          this.cursorIndex = null;
          this.selectRow(g, a)
        }
      }
      PrimeFaces.clearSelection()
    }
  }, 
```

您只需将此部分更改为：

```
onRowClick: function (e, d, a) {
    if ($(e.target) .is('td,span:not(.ui-c)')) {
      var g = $(d),
      c = g.hasClass('ui-state-highlight'),

      // I changed it to true
      f = true; 

      b = e.shiftKey;
      if (c && f) {
        this.unselectRow(g, a)
      } else {
        if (this.isSingleSelection() || (this.isMultipleSelection() && e && !f && !b && this.cfg.rowSelectMode === 'new')) {
          this.unselectAllRows()
        }
        if (this.isMultipleSelection() && e && e.shiftKey) {
          this.selectRowsInRange(g)
        } else {
          this.originRowIndex = g.index();
          this.cursorIndex = null;
          this.selectRow(g, a)
        }
      }
      PrimeFaces.clearSelection()
    }
  }, 
```

如果你需要一些帮助，你可以给我发消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T06:56:31.733

使用 jquery 切换功能。

```
$(selector).toggle(); 
```

# html - asp经典并选择具有多个属性的标签

> ID：16076350
> 
> 赞同：2
> 
> 时间：2013-04-18T06:52:50.540
> 
> 标签：html, asp-classic

我正在使用 html 的选择标签并具有多个属性。现在我正在使用 asp classic 从选择标签中获取选定的选项。但收到 500 内部服务器错误。

```
<%
response.write(request("evtCategory").Count)
response.write(request("evtCategory"))
%>

<form id="frmSearch" method="post" >
<select name="evtCategory" multiple>
    <option value="0">--Select Category--</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
    <option value="4">Fourth</option>
    <option value="5">Fifth</option>
</select>

<input type="submit" value="Search" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:39:44.597

我认为经典 ASP 中不存在 Count，它看起来像 ASP.NET 代码。

多个选定的值将作为逗号分隔的字符串返回。

您可以使用 Split 将选定的值作为数组获取。

```
Dim values, i
values = Split(Request.Form("evtCategory"), ",")
For i = 0 To UBound(values)
    Response.Write("Value " & i & " = " & values(i) & "<br />")
Next 
```

# ruby-on-rails - rails中的net-ldap身份验证格式？

> ID：16076353
> 
> 赞同：1
> 
> 时间：2013-04-18T06:52:59.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ldap

```
 def authenticate(username, password)
        require 'net-ldap'
        ldap = Net::LDAP.new
        ldap.host = 'server.local'
        ldap.port = 389
        ldap.base = 'cn=users, dc=server, dc=local'
        ldap.auth username, password
        if ldap.bind
            puts "authentication succeeded"
            else
            puts "authentication failed"
        end 
```

以上是我在我的方法中使用的代码，我不确定为什么我的尝试会失败。我正在尝试对用户进行身份验证。我找不到哪里出错了？它每次都将身份验证失败。为什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:49:31.963

首先查看您使用的计算机是否可以与 LDAP 服务器通信

```
telnet server.local 389 
```

显然，您希望将 server.local 替换为您的实际服务器详细信息。如果您无法以这种方式登录服务器，则端口 389 未打开，您可能需要在 SSL 端口 636 上运行。尝试使用 636 而不是 389 的上一个命令来查看是否是这种情况。

如果您无法通过这些端口中的任何一个远程登录到服务器，那么您要么有防火墙规则阻止您与之交谈，要么是在非标准端口上配置了 LDAP，或者其他严重错误。

工作端口 636 可能意味着您需要运行以下内容。

```
require "net-ldap"
ldap = Net::LDAP.new(
    host: "server.local"
    port: 636
    encryption: :simple_tls
)
ldap.auth username, password 
```

失败所有这些错误消息将非常有用，因此请尝试运行

```
if ldap.bind
    # Yay!
else
    puts ldap.get_operation_result
end 
```

有了一些结果，也许我们可以为您提供更多帮助。

# lua - Lua 表的一个有趣现象

> ID：16076364
> 
> 赞同：8
> 
> 时间：2013-04-18T06:53:37.763
> 
> 标签：lua, lua-table

我是 Lua 的新手，这些天我正在学习 table 的用法。从tutorials我知道Lua对数字索引项和非数字索引项的处理是不同的，所以我自己做了一些测试，今天我发现了一个有趣的现象，我无法解释：

编码

```
t = {1, 2, 3, a='a', b='b'}
print(#t) 
```

得到

```
3 
```

因为`#`操作员只计算数字索引项。然后我测试了以下代码

```
t = {1, 2, 3, a='a', b='b'}
print(#t)

for i = 100,200 do
    t[i] = i
end
print(#t) 
```

我明白了

```
3
3 
```

到目前为止，我认为 Lua 将后来添加的那些不连续项视为非数字索引项。但是，在我稍微更改代码之后

```
t = {1, 2, 3, a='a', b='b'}
print(#t)

for i = 100,300 do
    t[i] = i
end
print(#t) 
```

我明白了

```
3
300 
```

我对这种现象感到困惑，有人知道原因吗？谢谢。

（此现象可在[http://www.lua.org/cgi-bin/demo](http://www.lua.org/cgi-bin/demo)重现）

## 更新：

我试过这段代码

```
t = {1, 2, 3, a='a', b='b'}
print(#t)

for i = 100,300 do
    t[i] = i
    print("add", i, #t)
end

for i = 100,300 do
    t[i] = nil
    print("del", i, #t)
end 
```

我明白了

```
3
add 100 3
add 101 3
add 102 3
...
add 223 3
add 224 3
add 225 3
add 226 226
add 227 227
add 228 228
...
add 298 298
add 299 299
add 300 300
del 100 300
del 101 300
del 102 300
...
del 253 300
del 254 300
del 255 300
del 256 3
del 257 3
del 258 3
...
del 298 3
del 299 3
del 300 3 
```

这个例子表明 Lua 确实在稀疏和密集之间转换了一个表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T06:59:19.780

我还没有查看`#`操作符是如何实现的，但我敢打赌，通过添加额外的 100 个索引，你已经使范围`1-300`变得足够密集，以至于索引`100-300`最终出现在“数组”部分表实现而不是“哈希”部分。

**更新：**

好的，我查看了原始表长度的来源。如果数组部分的最后一项是 nil，它会二进制搜索数组以找到最低的“边界”（非 nil 索引后跟 nil 索引）。如果它不是 nil，它决定边界必须在散列中并搜索它。

因此，对于包含数字索引的表`{1, 2, 3, 100..200}`，我认为它不够密集，并且数组部分仅包含`{1, 2, 3}`. 但是对于包含 的表格`{1, 2, 3, 100..300}`，它可能足够密集，以至于数组部分在该`100..300`部分内的某个位置结束（我认为数组部分始终是 2 的幂，所以它不可能以 结束`300`，但我不是 100% 肯定的） .

**更新 2：**

当一个 lua 表被重新散列时，它会计算整数键的数量。然后它遍历不超过整数键数量两倍的所有 2 的幂，并找到至少 50% 密集的 2 的最大幂（这意味着如果数组部分这么大，至少 50%所有值都不是零）。

因此`{1, 2, 3, 100..200}`，它向上走

```
1: 100% dense; good
2: 100% dense; good
4: 75% dense; bad
8: 37.5% dense; bad
16: 18.75% dense; bad
32: 9.375% dense; bad
64: 4.6875% dense; bad
128: 25% dense; bad
256: 40.625% dense; bad 
```

最好的值是 2，所以它最终的数组大小为 2。因为`2`它不是 nil，所以它在哈希中搜索边界并找到`3`.

添加`201..300`后，最后一步变为

```
256: 62.5% dense; good 
```

这导致数组部分覆盖`1..256`，并且由于`256`非零，它再次搜索散列中的边界并获得 300`。

* * *

最后，Lua 5.2 将“序列”定义为一个表，其中包含从 1 开始且没有孔的唯一整数键。它定义`#`为仅对序列有效。通过这种方式，Lua 可以摆脱您注意到的在整数序列中有孔的表的奇怪行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T07:11:12.680

表 t 的长度仅在表是序列时才定义，也就是说，对于某个整数 n，其正数字键的集合等于 {1..n}。

# tree - 如何在 smarty 中创建无限深度的类别子类别选择框

> ID：16076370
> 
> 赞同：1
> 
> 时间：2013-04-18T06:53:56.973
> 
> 标签：tree, smarty

我正在尝试创建一个包含无限深度类别的选择框，子类别选择框。我有一个包含无限类别子类别深度的数组，如下所示，

```
 Array
                    (
                        [0] => Array
                            (
                                [id] => 6
                                [cata_key] => 32e9c75e38d2a1d77b2b49b2
                                [cata_name] => Road
                                [app_key] => b80e0935b348da61b2a807ff
                                [parentid] => 0
                                [subcategories] => Array
                                    (
                                        [0] => Array
                                            (
                                                [id] => 9
                                                [cata_key] => 780c3eb53264d5c33a26d49f
                                                [cata_name] => Cars
                                                [app_key] => b80e0935b348da61b2a807ff
                                                [parentid] => 6
                                                [subcategories] => Array
                                                    (
                                                        [0] => Array
                                                            (
                                                                [id] => 10
                                                                [cata_key] => 111cd06b1575457f665d460e
                                                                [cata_name] => Hyundai
                                                                [app_key] => b80e0935b348da61b2a807ff
                                                                [parentid] => 9
                                                                [subcategories] => Array
                                                                    (
                                                                    )

                                                            )

                                                        [1] => Array
                                                            (
                                                                [id] => 11
                                                                [cata_key] => 26ca0e1622c11ed2628eaadf
                                                                [cata_name] => Maruthi
                                                                [app_key] => b80e0935b348da61b2a807ff
                                                                [parentid] => 9
                                                                [subcategories] => Array
                                                                    (
                                                                    )

                                                            )

                                                    )

                                            )

                                        [1] => Array
                                            (
                                                [id] => 16
                                                [cata_key] => 49973084640af71ad61e634b
                                                [cata_name] => Bikes
                                                [app_key] => b80e0935b348da61b2a807ff
                                                [parentid] => 6
                                                [subcategories] => Array
                                                    (
                                                    )

                                            )

                                    )

                            )

                        [1] => Array
                            (
                                [id] => 7
                                [cata_key] => 56bae4297efcbf796b230a99
                                [cata_name] => River
                                [app_key] => b80e0935b348da61b2a807ff
                                [parentid] => 0
                                [subcategories] => Array
                                    (
                                        [0] => Array
                                            (
                                                [id] => 12
                                                [cata_key] => 7fc72e49fe67d0b777648f54
                                                [cata_name] => Boat
                                                [app_key] => b80e0935b348da61b2a807ff
                                                [parentid] => 7
                                                [subcategories] => Array
                                                    (
                                                        [0] => Array
                                                            (
                                                                [id] => 14
                                                                [cata_key] => 38c749056a9f583e284e509b
                                                                [cata_name] => 2 Seater
                                                                [app_key] => b80e0935b348da61b2a807ff
                                                                [parentid] => 12
                                                                [subcategories] => Array
                                                                    (
                                                                    )

                                                            )

                                                        [1] => Array
                                                            (
                                                                [id] => 15
                                                                [cata_key] => 6ebfcad4d4e05e84d333b7e5
                                                                [cata_name] => 10 Seater
                                                                [app_key] => b80e0935b348da61b2a807ff
                                                                [parentid] => 12
                                                                [subcategories] => Array
                                                                    (
                                                                    )

                                                            )

                                                    )

                                            )

                                        [1] => Array
                                            (
                                                [id] => 13
                                                [cata_key] => b6125c73f6d7c153f45e133e
                                                [cata_name] => Ship
                                                [app_key] => b80e0935b348da61b2a807ff
                                                [parentid] => 7
                                                [subcategories] => Array
                                                    (
                                                    )

                                            )

                                    )

                            )

                        [2] => Array
                            (
                                [id] => 8
                                [cata_key] => 1c748603f36105b921b54165
                                [cata_name] => Air
                                [app_key] => b80e0935b348da61b2a807ff
                                [parentid] => 0
                                [subcategories] => Array
                                    (
                                    )

                            )

                    ) 
```

我想在 tpl 中创建一个选择框，供访问者选择正确的类别/子类别。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T11:11:06.933

您可以在您的情况下使用 Smarty 3 和[功能](http://www.smarty.net/docs/en/language.function.function.tpl)

PHP：

```
$smarty->assign("you_category_array", **$you_array**); 
```

聪明的：

```
{function name=menu level=0}
  <ul class="level{$level}">
  {foreach $data as $category}
    {if is_array($category.subcategories)}
      <li>{$category.cata_name}
      {menu data=$category.subcategories level=$level+1}</li>
    {else}
      <li>{$category.cata_name}</li>
    {/if}
  {/foreach}
  </ul>
{/function}

{menu data=$you_category_array} 
```

# php - 如何知道可能的 n 个数的集合？

> ID：16076372
> 
> 赞同：-4
> 
> 时间：2013-04-18T06:53:58.287
> 
> 标签：php

我有一组数字`S = [1,2,3,4,5,6];`，我想在其中制作所有可能的配对，但要知道这对不能重复。

我用过这个：-

```
$pairs = array('1','2','3','4','5','6');
$count = count($pairs);
$array = array();
for($i = 0;$i <= $count; $i++){
    for($j = 1; $j < $count; $j++){
        if($i < $j){
            $array[$i][] = $pairs[$i].','.$pairs[$j];
        }
    }
} 
```

我想要这样的东西：-

```
S = [1,2,3,4,5,6];

[1,2],[1,3],[1,4],[1,5],[1,6]
[2,3],[2,4],[2,5],[2,6]
[3,4],[3,5],[3,6]
[4,5],[4,6]
[5,6] 
```

如果有人有更好的建议，请尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:01:48.427

在你的数组上构建一个双嵌套`foreach`循环，构建你的对并检查你是否已经得到它们。

伪代码：

```
pairs = []
foreach(entry in array) {
    foreach(entry2 in array) {
        pair = [entry, entry2]
        if(!alreadyexists(pair in pairs) {
            add(pair to pairs)
        }
    }
}
havefun() 
```

顺便说一句：如果你自己尝试一些东西，你不会受伤，这个问题是相当微不足道的。

# asp.net - 构建数据驱动的 asp.net web 表单应用程序

> ID：16076377
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:20.110
> 
> 标签：asp.net, database, forms, web, data-driven

我需要创建一个使用 VS 数据驱动的 asp.net Web 表单应用程序。该应用程序需要有一个登录屏幕，其中包含客户和员工，以及一个产品页面，他们可以在其中选择产品，然后进入购物车。

员工需要能够更新和编辑产品，并且必须在表格中处理订单。

我发现这以什么顺序非常令人困惑……要按照什么顺序来做，如果有人不介意我应该按照什么顺序来做，请给我一个基本指南，并提供有关如何做的提示？

任何好的资源将不胜感激。

：） 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:11:17.667

也许从经典的[“Contoso”](http://code.msdn.microsoft.com/ASPNET-Web-Forms-6c7197aa)示例作为起点。

# php - 如何向此 zend 项目添加页面

> ID：16076381
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:28.273
> 
> 标签：php, zend-framework

所以我被分配到这个使用 Zend Framework 1.12 的项目。我正在尝试向项目添加一个页面，但我似乎在某处遗漏了一些东西。目录结构与我见过的任何示例 Zend 项目都有点不同（没有引导目录）。

-应用

---控制器

------模块

---------------无页

------------------------ IndexController.php

- -模型

----一堆db文件

---观看次数

----模板（智能 tpl 文件）

---------------无页

------------------------ nopage.tpl

---后端

----路由器.php

这是我的 router.php 代码

```
$controller -> addControllerDirectory(ROOT . 'application/controller/nopage', 'nopage');
$router = $controller -> getRouter();

$nopage = new Zend_Controller_Router_Route_Regex(
'nopage.html',
array('module' => 'nopage', 'controller' => 'index', 'action' => 'index')
);

$router -> addRoute('nopage', $nopage); 
```

这是我的 nopage IndexController.php 的 IndexController 代码

```
<?php

/** Zend_Controller_Action */
Zend_Loader::loadClass('System_Controller_Action');

class Nopage_IndexController extends System_Controller_Action 
{   

public function indexAction() {

            $this -> smarty -> assign('PageBody', 'nopage/404.tpl');
            $this -> smarty -> assign('Title', 'PetIdMe - 404');
            $this -> smarty -> display('layouts/main.tpl');
    } 
} 
```

我得到这个错误：

指定的控制器无效（索引）

我的代码似乎遵循与所有其他路线相同的结构以及所有其他路线所做的一切，我对此进行了搜索和搜索，但无济于事。SO的知识渊博和慷慨的人在这里有什么想法吗？如果您需要更多信息，我很乐意提供。非常感谢您对此的任何见解。

从路由器编辑一些额外的代码

```
$controller -> addControllerDirectory(ROOT . 'application/controllers/lostandfound',      'lostandfound');

$controller -> addControllerDirectory(ROOT . 'application/controllers/search', 'search');

$controller -> addControllerDirectory(ROOT . 'application/controllers/orderstatus', 'orderstatus');

$controller -> addControllerDirectory(ROOT . 'application/controllers/myaccount', 'myaccount');

$controller -> addControllerDirectory(ROOT . 'application/controllers/giftcard', 'giftcard');

$controller -> addControllerDirectory(ROOT . 'application/controller/nopage', 'nopage');

$router = $controller -> getRouter();

$nopage = new Zend_Controller_Router_Route(
'nopage.html',
array('module' => 'nopage', 'controller' => 'index', 'action' => 'index')
);

$router -> addRoute('nopage', $nopage);
//****************** Gift Card ************************************************************

$giftcard = new Zend_Controller_Router_Route_Regex(
'giftcard.html',
array('module' => 'giftcard', 'controller' => 'index', 'action' => 'index')
);
$router -> addRoute('giftcard', $giftcard);

$GiftCardsPages = new Zend_Controller_Router_Route_Regex(
'admin/gift/page/(\d*)',
array('module'=>'admin', 'controller'=>'gift', 'action'=>'index'),
array(1  =>'page')
);
$router -> addRoute('GiftCardsPages', $GiftCardsPages);

//****************** SEARCH ***************************************************************
$topsearchserult = new Zend_Controller_Router_Route_Regex(
'topsearchserult.html',
array('module'=>'search', 'controller'=>'index', 'action'=>'search'),
array(1  =>'page')
);
$router -> addRoute('topsearchserult', $topsearchserult);

//****************** MY ACCOUNT *********************************************************

$myaccount = new Zend_Controller_Router_Route_Regex(
'myaccount.html',
array('module' => 'myaccount', 'controller' => 'index', 'action' => 'index')
);
$router -> addRoute('myaccount', $myaccount); 
```

还有一些来自其他 IndexController 页面：

```
Zend_Loader::loadClass('System_Controller_Action');

class News_IndexController extends System_Controller_Action {

public function init() {
    parent::init();
}

public function viewAction() {
    $new = $this -> News -> getNewById($this->_getParam('new_id'));
    $this->smarty->assign('new', $new);
    $this->smarty->assign('Title', $new['new_title']);
    $this->smarty->assign('PageBody', 'news/show_item.tpl');
    $this->smarty->display('layouts/main.tpl');
}

public function indexAction() {

    $page = $this->_hasParam('page')?((int)$this->_getParam('page')-1):0; 
    $items = $this->News->getNewsForPage($page);

    $this->smarty->assign('items', $items);
    $this->smarty->assign('Title', 'News items');
    $this->smarty->assign('page_num', $page+1);
    $this->smarty->assign('page_count', $this->News->getPagesCount());
    $this->smarty->assign('PageBody', 'news/index.tpl');
    $this->smarty->display('layouts/main.tpl');
} 
```

和另一个

```
Zend_Loader::loadClass('System_Controller_Action');
include_once ROOT . 'application/models/GiftCardsDb.php';
class GiftCard_IndexController extends System_Controller_Action 
{
private $giftcard;
 public function init() {
    $this->giftcard = new GiftCardDb();
    parent::init();
}

public function indexAction() {
    if($this->_hasParam('product_id')){
        $this -> smarty -> assign('giftcard_text', $this -> Content ->     getPageByLink('giftcard.html'));
        $this -> smarty -> assign('giftcard_agreement_text', $this -> Content -> getPageByLink('giftcard_agreement.html'));
        $this -> smarty -> assign('PageBody', 'giftcard/index.tpl');
        $this -> smarty -> assign('product_id', $this->_getParam('product_id'));
        $this -> smarty -> assign('Title', 'Pet Id Me - Gift Card');
        $this -> smarty -> display('layouts/main.tpl');
    } else {
        $this->_redirect("/");
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:15:34.983

你添加 zend 框架额外页面给出了一些步骤

1.zend是MVC模式

2.创建视图文件名和控制器文件名同名

示例：view->save.phtml 控制器：saveAction

3.你包括数据库连接实现控制器（或）调用数据库方法参考以下链接 [http://www.phpeveryday.com/articles/Zend-Framework-Basic-Tutorial-P840.html](http://www.phpeveryday.com/articles/Zend-Framework-Basic-Tutorial-P840.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:35:43.900

我认为解决方案是添加这一行

```
Zend_Loader::loadClass('System_Controller_Action'); 
```

在 IndexController 的开头。IE

```
Zend_Loader::loadClass('System_Controller_Action');

class Nopage_IndexController extends System_Controller_Action 
{ 
```

# air - 在 AIR 中使用谷歌闭包库的经验？

> ID：16076384
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:30.913
> 
> 标签：air, google-closure

我想在 AIR 应用程序中尝试闭包库。将使用 goog.editor、goog.events 和 goog.dom 等对象。

在我正在阅读的一本关于谷歌关闭的旧书中，它说它在某些函数中使用了 eval 。我还没有尝试在 AIR 中使用未编译的代码，但怀疑它不起作用，因为特权代码中不允许使用 eval。计划编译要在 AIR 应用程序中使用的代码。

该应用程序将由一个带有代码的 html 页面组成，该页面使用一些 AIR 特定的东西，例如另存为和复制到剪贴板。它不会有任何 ActionScript 或 swf 文件。

有没有人尝试在 AIR 应用程序中使用闭包库？如果有，有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:03:22.173

Closure 库在其 JSON 解析器、JsonDataSource 和 ModuleLoader 中使用 eval，但除此之外（AFAIK）不在任何标准组件的核心库中使用 eval。只要您避免这些情况，我就不认为这是一个问题，但我不熟悉 AIR 如何限制使用它。

# azure - 是否可以通过删除文件并重新上传来使 azure cdn 无效？

> ID：16076387
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:35.633
> 
> 标签：azure, azure-storage, cdn, azure-cdn

我有 azure 存储并将其用作我的 Web 应用程序的 cdn，现在我想在每次将文件上传到存储帐户时使我的 cdn 内容无效。

我的问题是，当我删除 azure 存储容器中的文件并以相同的名称再次上传时，会导致 cdn 使该文件无效吗？（我知道将文件版本附加到文件名会导致 cdn 使该文件无效，但在这种情况下我需要监控所有旧文件并删除它们现在没有被引用，这是我最后的手段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:06:46.337

Azure 尚不支持清除，但有传言称它正在开发中。从 blob 存储中删除对象不会导致清除，因为该对象仍受 TTL 约束。只有在 TTL 过期后，CDN 才会检查对象是否仍然有效，[然后将其删除](http://msdn.microsoft.com/en-us/library/gg680303.aspx)。

在 Azure CDN 实施清除之前，您需要使用版本控制或[管理内容过期](http://msdn.microsoft.com/en-us/library/gg680306.aspx)。

# ios - 写入 plist 文件（在特定行/项目中）

> ID：16076388
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:39.547
> 
> 标签：ios, xcode, indexing, plist

我有一个`.plist`具有这种结构的文件，

![在此处输入图像描述](https://i.stack.imgur.com/TMC8o.png)

我想添加或替换第 5 项。我正在使用此代码

```
NSError *error ;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Introduction.plist"];

NSMutableArray *data = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSString *comment = str;
[data replaceObjectAtIndex:1 withObject:comment];
[data writeToFile:path atomically:YES];

NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:path]) {
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"Introduction" ofType:@"plist"];
    [fileManager copyItemAtPath:bundle toPath:path error:&error];
} 
```

如果我改变`replaceObjectAtIndex:`它`5`会改变我的 plist 结构，我不希望这样。

如何在特定索引的第 5 行（第 5 项）插入/替换文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:07:25.527

您的结构有一个数组数组。

> [数据替换ObjectAtIndex：1 withObject：comment]；

通过此代码，您将用字符串替换索引 1 处的数组。您是特别需要插入到第 5 个索引还是只需将其添加到现有的子数组中？

```
 NSMutableArray *subArray = [data[sectionIndex] mutableCopy];
if (!subArray) {
    subArray = [NSMutableArray array];
}

if (rowIndex<[subArray count]) {
    [subArray replaceObjectAtIndex:rowIndex withObject:comment];
}else{
    [subArray addObject:comment];
}

[data replaceObjectAtIndex:sectionIndex withObject:subArray];
[data writeToFile:path atomically:NO]; 
```

访问子数组，使其可变并在特定索引处添加或插入。如果您尝试插入，请不要忘记检查索引是否不大于该数组的计数。

# vhdl - VHDL Verilog 整数数组端口

> ID：16076395
> 
> 赞同：0
> 
> 时间：2013-04-18T06:54:54.913
> 
> 标签：vhdl, verilog, fpga, virtex

我正在为 Breakout Game 的 FPGA 实现项目工作。在这个游戏中，我们必须使用球和桨来打破砖块。一些砖块可能会在与球多次接触时破裂。为此，我使用一个整数数组来表示打破特定砖块所需的命中数。例如 (2,0,1,2) 表示一个砖块需要 2 次击打才能被破坏，然后是一个破碎的砖块，然后是一个需要单次击打才能被破坏的砖块等。

此外，我已经用 VHDL 完成了所有编码，但是为了将结果输出到 VGA 屏幕上，我使用的是 Verilog。

在 VHDL 中，我在包中声明了整数数组的类型，如下所示：

```
package mytypes_pkg is
    type int_array is array (0 to 39) of integer;
end mytypes_pkg; 
```

然后在我的球运动控制文件中，我导入了 work.mytypes_pkg.all 然后有：

```
brickout:out int_array; 
```

其中包含游戏中所有砖块的当前状态。这个数组必须传递给我的 Verilog 文件，所有的 VGA 显示生成都必须在该文件中进行。在那里，我试过了

```
input [39:0]    bricki; 
```

但它给了我错误

“'mainc' 的实体和组件上的端口 'brickout' 的不同类型”

我该如何纠正这个错误并做我想做的事？有没有办法告诉 Verilog 砖也是 int_array 类型的？我还需要在 Verilog 中导入 work.mytypes_pkg.all 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T07:01:24.433

在 SystemVerilog 中，您可以使用 typedef 来定义您自己的类型，例如

```
typedef int [N-1:0] mytype; 
```

这样就可以准确地构建您想要的东西。在包中定义您的类型，然后将其导入：

```
import pkg_keccak::mytype;
...
mytype int_table; 
```

# activex - Techart 单点的多箱线图

> ID：16076399
> 
> 赞同：0
> 
> 时间：2013-04-18T06:55:30.897
> 
> 标签：activex, teechart

我们是否可以为单点绘制多个箱线图，类似于我们在条形图中所做的那样，我们在单点有多个条形图。

谢谢阿克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:42:13.357

您可以有多个 BoxSeries，类似于此处的示例： [http ://www.teechart.net/support/viewtopic.php?f=3&t=13048&hilit=boxplot](http://www.teechart.net/support/viewtopic.php?f=3&t=13048&hilit=boxplot)

这是一个 Delphi 示例，但在 ActiveX 中应该没有太大的不同。

* * *

更新：

根据您的评论，我了解您希望在不同的 X 位置放置一些框，并且可能分组。这是一个简单的示例，说明如何使用 Positions 来实现相同的效果：

```
Dim nSeries, groupSize As Integer
Private Sub Form_Load()
  Dim i, aIndex, sIndex, lIndex, tmpX As Integer

  TeeCommander1.ChartLink = TChart1.ChartLink
  'TChart1.Header.Text.Text = TChart1.Version

  TChart1.Aspect.View3D = False
  TChart1.Panel.MarginTop = 7
  TChart1.Header.Visible = False
  TChart1.Axis.Bottom.Ticks.Visible = False
  TChart1.Axis.Bottom.MinorTicks.Visible = False

  nSeries = 8
  groupSize = 2

  aIndex = TChart1.Tools.Add(tcAnnotate)
  TChart1.Tools.Items(aIndex).asAnnotation.Text = "group 1"

  tmpX = 0
  For i = 0 To nSeries - 1
    sIndex = TChart1.AddSeries(scBox)
    TChart1.series(sIndex).FillSampleValues
    TChart1.series(sIndex).asBoxPlot.Position = tmpX

    If (i + 1) Mod groupSize Then
      tmpX = tmpX + 1
    Else
      If i + 1 < nSeries - 1 Then
        lIndex = TChart1.Tools.Add(tcColorLine)
        TChart1.Tools.Items(lIndex).asColorLine.Axis = TChart1.Axis.Bottom
        TChart1.Tools.Items(lIndex).asColorLine.Value = tmpX + 1
        tmpX = tmpX + 2

        aIndex = TChart1.Tools.Add(tcAnnotate)
        TChart1.Tools.Items(aIndex).asAnnotation.Text = "group " + Str$(((i + 1) / groupSize) + 1)
      End If
    End If
  Next i

  TChart1.Environment.InternalRepaint
End Sub

Private Sub TChart1_OnAfterDraw()
  Dim tmpX As Integer
  For i = 0 To TChart1.Tools.Count - 1
    If TChart1.Tools.Items(i).ToolType = tcAnnotate Then
      With TChart1.Tools.Items(i).asAnnotation
        If i = TChart1.Tools.Count - 1 Then
          tmpX = TChart1.GetChartRect.Right
        Else
          tmpX = TChart1.Axis.Bottom.CalcXPosValue(TChart1.Tools.Items(i + 1).asColorLine.Value)
        End If

        If i = 0 Then
          tmpX = TChart1.GetChartRect.Left + (tmpX - TChart1.GetChartRect.Left) / 2
        Else
          tmpX = TChart1.Axis.Bottom.CalcXPosValue(TChart1.Tools.Items(i - 1).asColorLine.Value) + (tmpX - TChart1.Axis.Bottom.CalcXPosValue(TChart1.Tools.Items(i - 1).asColorLine.Value)) / 2
        End If

        .Left = tmpX - .Width / 2
      End With
    End If
  Next i
End Sub

Private Sub TChart1_OnGetAxisLabel(ByVal Axis As Long, ByVal SeriesIndex As Long, ByVal ValueIndex As Long, LabelText As String)
  If Axis = 3 Then
    LabelText = " "
  End If
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/JyEIj.png)

# c# - Avoid from running more than one instance

> ID：16076400
> 
> 赞同：4
> 
> 时间：2013-04-18T06:55:32.917
> 
> 标签：c#, wpf, mutex

I'm trying to set a mutex in order to allow running my application in one instance only. I wrote the next code (like suggested here in other post)

```
 public partial class App : Application
    {

        private static string appGuid = "c0a76b5a-12ab-45c5-b9d9-d693faa6e7b9";

        protected override void OnStartup(StartupEventArgs e)
        {
            using (Mutex mutex = new Mutex(false, "Global\\" + appGuid))
            {

                if (!mutex.WaitOne(0, false))
                {
                    MessageBox.Show("Instance already running");
                    return;
                }

                base.OnStartup(e);

               //run application code
            }
        }

    } 
```

Regretfully this code isn't working. I can launch my application in multiple instances. Is anyone has an idea what is wrong in my code? Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:05:09.470

You are disposing [Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx) just after running first instance of application. Store it in field instead and don't use `using` block:

```
public partial class App : Application
{
    private Mutex _mutex;
    private static string appGuid = "c0a76b5a-12ab-45c5-b9d9-d693faa6e7b9";

    protected override void OnStartup(StartupEventArgs e)
    {
        bool createdNew;
        // thread should own mutex, so pass true
        _mutex = new Mutex(true, "Global\\" + appGuid, out createdNew);
        if (!createdNew)
        {
            _mutex = null;
            MessageBox.Show("Instance already running");
            Application.Current.Shutdown(); // close application!
            return;
        }

        base.OnStartup(e);
        //run application code
    }

    protected override void OnExit(ExitEventArgs e)
    {          
        if(_mutex != null)
            _mutex.ReleaseMutex();
        base.OnExit(e);
    }
} 
```

Output parameter `createdNew` returns `false` if mutex already exist.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:58:54.683

you can check if your proccess is already running:

```
Process[] pname = Process.GetProcessesByName("YourProccessName");
if (pname.Length == 0)
    Application.Exit(); 
```

# prolog - Prolog，规则语句的“或”运算符

> ID：16076401
> 
> 赞同：6
> 
> 时间：2013-04-18T06:55:35.850
> 
> 标签：prolog, operators

我是 prolog 的新手，想就 2 人是否是堂兄弟做一个规则声明。

这是我当前的代码，我在需要`or`运算符的地方添加了“或”：

`cousins(E, F) :- siblings(A, C) or siblings(A, D) or siblings(B, C) or siblings (B, D), parent(A, E), parent(B, E), parent(C, F), parent(D, F).`

我只需要其中一个`siblings()`通过，但都`parent()`必须通过。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T14:47:32.697

在 Prolog 中，“或”运算符是`;`. 或者它可以通过为谓词设置不同的子句来实现。

让我们看看如果您的*第一个*替代方案成立会发生什么：

```
cousins(          E, F):- 
  siblings(A, C), 
  parent(  A,     E), 
  parent(  B,     E), 
  parent(     C,     F), 
  parent(     D,     F). 
```

***或者***，如果第二个成立会发生什么？

```
cousins(          E, F) :- 
  siblings(A, D), 
  parent(  A,     E), 
  parent(  B,     E), 
  parent(     C,     F), 
  parent(     D,     F). 
```

第 3 和第 4 类似：

```
cousins(E, F) :- siblings(B, C), 
  parent(A, E), parent(B, E), parent(C, F), parent(D, F).

cousins(E, F) :- siblings (B, D), 
  parent(A, E), parent(B, E), parent(C, F), parent(D, F). 
```

现在你有了四个子句表达的“或”条件。

但是您一定遗漏了许多重要的细节。你可能想要有两对父母，所以你需要添加不等式：`parent(A, E), parent(B, E), A \= B`等等。但是，新的第二个子句只是第一个子句的副本，直到一些变量重命名；第 3 条和第 4 条相同。每对只留下一个就足够了。

但是为什么你需要知道一个人的父母呢？你没有，真的。如果是母亲还是父亲，这有什么关系？它没有。因此，最后，只需一个子句就足够了：

```
cousins(            E, F):- 
    siblings(A, C), 
    parent  (A,     E), 
    parent(     C,     F). 
```

你仍然需要检查一些*退化*的情况，所以你永远不会最终宣布一个人是他们自己的表亲。

# java - 如何在 MySQL 数据库中保持活动的远程连接？

> ID：16076414
> 
> 赞同：0
> 
> 时间：2013-04-18T06:56:26.743
> 
> 标签：java, mysql, jdbc

我有一个 java 应用程序，它可以远程访问在线 MySQL 数据库，它工作正常。

唯一的问题是，几分钟后，与服务器的连接被关闭了，还有什么办法让连接保持活动状态吗？这样我就不必为了执行任务而实例化另一个连接。

任何想法和投入将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:01:01.743

您需要自动重新连接，尝试编辑您的 JDBC URL：

> jdbc:mysql://[主机]:[端口]/[数据库]? **自动重新连接=真**

请参阅连接器参考： [http ://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T07:14:51.087

正如其他答案所指出的，您可以使用`autoReconnect`连接上的选项来解决眼前的问题。

但是，如果您不使用数据库连接池，我*强烈*建议您切换到一个。

它们有许多优点：

*   他们为您检查您的连接 - 这涉及超时、网络问题等
*   他们控制连接数
*   您可以在完成每一项工作后简单地“关闭”连接，然后在需要时“重新打开”连接。

如果您自己管理连接，您几乎肯定会最终编写某种形式的连接池——以及为什么要重新发明轮子。

当您实施连接检查以使它们不会过时时，某种连接持有者使您无需每次都重新打开它们，某种异常处理代码您已经准备就绪编写大量已经编写并经过彻底测试的代码。

我使用过[dbcp](http://commons.apache.org/proper/commons-dbcp/)和[boneCP](http://jolbox.com/)，它们都非常易于使用和配置，可以为您节省数小时处理 JDBC 连接问题的挫败感。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-11T22:16:38.677

```
jdbc:mysql://[host]:[port]/[database]?autoReconnect=true&user=root&password=passwordIchose 
```

# javascript - django dropdownlist onchange 提交

> ID：16076420
> 
> 赞同：8
> 
> 时间：2013-04-18T06:56:47.573
> 
> 标签：javascript, python, html, django, html-select

我正在向用户显示此表单的下拉列表：

```
class CronForm(forms.Form):
    days = forms.ModelChoiceField(queryset=Day.objects.all().order_by('day'))

class Day(models.Model):
    day = models.CharField(max_length=200, default='')
    month = models.CharField(max_length=200, default='')
    def __unicode__(self):
        return self.day 
```

它以这种方式显示在模板中：

```
<form method="post" onchange=change()>
    {{ days }}
</form> 
```

我想要的是当用户从下拉列表中选择一个选项时提交此表单。例如，用户可以被重定向到一个新的 url，程序内部会捕获 POST 数据。但是我发现的所有东西都与`<select>`标签有关，比如在选择元素的变化上调用一个 javascript 函数。但是由于选择元素在 ModelChoiceField 表单中，我不知道该怎么做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T07:05:01.083

按照此[链接解决](http://djangosteps.wordpress.com/2012/01/12/filtered-menus-in-django/)

```
days = forms.ModelChoiceField(queryset=Day.objects.all().order_by('alias'), widget=forms.Select(attrs={"onChange":'refresh()'})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:04:25.797

[使用firebug](http://getfirebug.com)查找`id`下拉列表的。它应该与您使用的名称一样。然后将 jQuery事件绑定到它。`id_days``days``change`

```
$(function(){
    $('#id_days').change(function(){
        $('#id_of_form').submit();
    });
}); 
```

# c++ - nvcc 在调试模式下编译失败：需要单个文件

> ID：16076429
> 
> 赞同：0
> 
> 时间：2013-04-18T06:57:36.223
> 
> 标签：c++, cuda, vc10

我在尝试使用 nvcc for cuda 编译我的程序时遇到问题。我使用 Visual Studio 2012 和 cuda 5.0。

当我以发布模式启动构建时，一切正常。

在调试模式下，我在第一个 .cu 文件的编译时收到以下错误消息：

> nvcc：致命错误：指定输出文件时，非链接阶段需要单个输入文件

对于发布模式，我的命令行是：

> C:\Users\Ernest\Documents\Matlab\icem\icem_cpp\cudaicem>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_13,code= \"sm_13,compute_13\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" --keep-dir "x64\Release" -maxrregcount= 0 --ptxas-options=-v --machine 64 --compile -D_WINDLL -D_MBCS -Xcompiler "/EHsc /W3 /nologo /O2 /Zi /MD " -o "x64\Release\Icem.cu.obj" " C:\Users\Ernest\Documents\Matlab\icem\icem_cpp\cudaicem\Icem.cu"

对于调试模式：

> C:\Users\Ernest\Documents\Matlab\icem\icem_cpp\cudaicem>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_13,code= \"sm_13,compute_13\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -G --keep-dir "x64\Debug" - maxrregcount=0 --machine 64 --compile -g -D_ *CUDACC_1* -D_WINDLL -D_MBCS -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd " -o "x64\Debug\Icem.cu. obj" "C:\Users\Ernest\Documents\Matlab\icem\icem_cpp\cudaicem\Icem.cu"

你觉得第二个有什么问题吗？我没有看到多个输入文件！知道我可以测试什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:11:55.660

The answer was in the preprocessor options. `-D_CUDACC_ 1` was the problem.

# c# - 单个连接（SqlConnection）上的多个查询是否阻塞？

> ID：16076431
> 
> 赞同：0
> 
> 时间：2013-04-18T06:57:45.030
> 
> 标签：c#, sql-server

我在下面有一个示例数据访问方法设计，它递归调用：

```
public static void DeleteRecord(SqlConnection connection, string childIds, string parentSheetname)
{
    using (var adapter = new SqlDataAdapter("...", connection))
    {
        //fill a datatable
        string newIds = "...";
        string newParentName = "...";

        const string query = "DELETE FROM table " + 
                             "WHERE ids in (@ids) AND parent = @parent";
        //Here's where recursion takes place
        DeleteRecord(connection, newIds, newParentName);

        using (var command = new SqlCommand(query, connection))
        {
            var parameters = new[] { 
                new SqlParameter(...), new SqlParameter(...)
            }
            command.Parameters.AddRange(parameters);
            command.ExecuteNonQuery(); 
        }

} 
```

**我的问题是：**

1.  （作为一种好习惯）可以将连接作为参数传递吗？

2.  是否可以将`DeleteRecord`方法放在a上，[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)所以每次我调用它时，命令执行查询都没有等待时间。（当然有`Task.WaitAll(tasks)`地方）

3.  在场景 2 中，连接是否会阻止通过服务器发送的多个查询？如果 SQLServer 执行繁重的查询，我已经体验过它会暂停一些查询。（默认情况下启用连接池，所以我想知道这是否也是第 3 项的情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:49:28.840

您不能在一个连接上同时执行多个语句。如果要执行多个语句，则需要使用多个连接。但是，在您的情况下，这将是一个坏主意。您需要将删除包装在事务中以保持数据库一致性。删除单独连接上的项目无法实现事务一致性。

你应该在集合中思考，而不是项目。一次性传递所有要删除的项目。有关如何实现此目的的详细信息，请[参见表值参数。](http://msdn.microsoft.com/en-us/library/bb675163.aspx)使用连接整个参数集的单个 DELETE 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:46:32.547

**（作为答案，因为我没有得到添加评论选项）** -@MarcinJuraszek：+5 给他。默认池大小为 100（最大）。因此它将暂停后续请求。为了克服这个问题，最好的做法是在必要时关闭每个打开的连接。

- 什么时候不使用？只是意味着在代码末尾关闭连接。无论您的代码执行多少时间，它都会在到达指定代码时关闭连接 connection.close();

# c++ - C ++访问向量的值 那是在课堂上

> ID：16076435
> 
> 赞同：3
> 
> 时间：2013-04-18T06:57:57.500
> 
> 标签：c++, windows, class, vector

我有以下课程：

```
class clsUnitArrayIndexToUnitID : public CBaseStructure
{
    private:
        std::vector<int> m_content;
        long m_size;
    protected:
        void ProcessTxtLine(string line);
    public:
        clsUnitArrayIndexToUnitID();
        std::vector<int>* Content;
        long Size();
}; 
```

我想从类外部访问值，例如：

```
int iUnitID = m_MyClass.Content()[12]; 
```

但是，C++ 告诉我需要使用指向函数类型。我不确定这到底是什么意思。

另外，如果有人发现我的代码有任何缺陷，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:01:50.740

将其更改为功能（`const`根据您的需要调整）

```
 public:
     const std::vector<int>& Content() const { return m_content; } 
```

并按照您的描述使用，或以任何一种方式取消引用指针（不安全？）：

```
m_MyClass.Content->at(12); 
(*m_MyClass.Content).at(12);
(*m_MyClass.Content)[12]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T07:02:04.990

您可以为类提供索引访问运算符，而不是暴露向量：

```
class clsUnitArrayIndexToUnitID : public CBaseStructure
{
 public:
  int& operator[](unsigned int i) {return m_content[i];}
  const int& operator[](unsigned int i) const {return m_content[i];}
....
}; 
```

然后

```
int iUnitID = m_MyClass[12]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T07:09:16.850

要回答您的具体问题，您应该这样做：

```
(*m_MyClass.Content)[12] 
```

或这个：

```
m_MyClass.Content->at(12); //note that the semantics is slightly different - at() checks boundaries, [] does not 
```

但是，您真正应该做的事情可能是重新考虑您的设计。为什么你的类有一个指向容器的指针类型的公共数据成员？如果这总是指向`m_content`，您不妨`m_content`公开并省去麻烦。

私有数据成员背后的一般想法是提供基于语义的访问，以便您的函数可以按照其语义要求发布诸如“插入向量”、“从向量中获取元素”等函数。或者，例如，您可以提供一个只读访问器函数返回`const std::vector<int>&`，并将修改访问权留给特殊的成员函数。

如果你提供一个包装器来提供直接的非常量访问，那么它几乎不是一个包装器（它总是必须由某些东西直接支持）。

当然，上面的讨论适用于 if`Content`实际上是一个指向的指针，`m_content`而不仅仅是指向不同向量的指针。但在这种情况下，我认为课程会更加混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T07:01:34.083

更改定义如下：

```
 const std::vector<int>* Content() const {
      return &m_content;
 } 
```

第一个 const 关键字并不是真正需要的，但第二个表示该方法不应该也不应该修改实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:09:19.443

您可以返回引用而不是指针：

```
std::vector<int> m_content(UNITS_MAX_SIZE);

const std::vector<int> &clsUnitsUnitIDToArrayIndex::Content() const
{
    return m_content;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T07:06:25.680

按照 juanchopanza 的建议，提供一个包装方法来检索内容或重载 operator[]。

```
class clsUnitArrayIndexToUnitID : public CBaseStructure
{
    private:
        std::vector<int> m_content;
        long m_size;
    protected:
        void ProcessTxtLine(string line);
    public:
        clsUnitArrayIndexToUnitID();
        //std::vector<int>* Content;

        int GetContent(int index) { 
        int retValue = INVALID_CONTENT
        if(index >=0 && index<m_content.size())
          retValue = m_content[index];
        return retValue;
       }        

       long Size();
}; 
```

并将其用作

```
int iUnitID = m_MyClass.GetContent(12); 
```

# java - Tomcat 数据源配置连接超时和 Max Active to Idle 连接比率

> ID：16076441
> 
> 赞同：1
> 
> 时间：2013-04-18T06:58:37.697
> 
> 标签：java, database, tomcat, jdbc

我有一个在四台服务器上负载平衡的 Web 应用程序。这三台服务器连接到公共数据库，最大连接数设置为 600。

我在tomcat中的当前数据库池配置如下：

```
<Resource name="jdbc/AppDB"
                          auth="Container"
                          type="javax.sql.DataSource"
                          maxActive="100"
                          maxIdle="30"
                          maxWait="10000"
                          removeAbandoned ="true"
                          removeAbandonedTimeout="300"
                          testOnBorrow="true"
                          validationQuery="select 1"
                          logAbandoned ="true"
                          username="username"
                          password="password"
                          driverClassName="com.mysql.jdbc.Driver"
                          url="dbconnectionurl"
                 /> 
```

但是这个配置给出了异常：`Connection Timeout : Waiting for Idle Object.`

我已经监控了数据库服务器，我的有效连接利用率只有 350。

如果我向后计算，我总共使用了 400 个连接。这使我可以从 DB 获得 200 个额外的数据库连接。

因此，我无法理解为什么会出现这个异常。

有人可以提出更好的配置吗？`maxActive`和的理想比例应该是`maxIdle`多少？

更新：

我找到了一个相关链接： [Tomcat JDBC pool 中没有足够的空闲连接](https://stackoverflow.com/questions/15735429/there-are-not-enough-idle-connections-in-tomcat-jdbc-pool?rq=1)

但我不能冒险将 maxIdle 或 MaxActive 设置为 -1(INFINITE)，因为我有多个实例正在运行，它可能会导致连接分布不均匀。这可能会导致一个实例运行良好，而其他实例可能由于缺少连接而失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:54:20.837

首先，`maxIdle`与您的问题没有任何关系，因为这仅定义了池中保留了多少未主动使用的连接 - 多余的连接将被丢弃。为了说明这一点：假设在*t1*有 80 个连接正在使用中；在*t2*只有 30 个连接仍在使用中，这意味着 50 个连接被放回池中。现在`maxIdle`设置为 30 会导致池关闭 50 个空闲连接中的 20 个。
现在，如果在*t3*再次使用 50 个连接，“空闲池”将仅包含 10 个连接。空闲池中的连接数没有主动增加！

为了清楚起见：`maxActive`是池提供的最大连接数。`maxIdle`不会在此之上添加另一组连接；它只是为基本负载保留多个连接、加快连接使用的一种手段（如果`maxIdle`为 0，则返回到池的每个连接都将被关闭，从而阻碍了连接池的想法）。

为您的案例建议一个合适的比率有点困难，因为它取决于您的应用程序必须面对的负载曲线。但是对于您面临的问题（池不返回空闲，即“免费”连接），您是否将其设置为 无关紧要`-1`，因为池只是用尽了。

因此，要解决您的问题，您要么需要增加，要么需要`maxActive`找到更有效地使用连接的方法。

# wpf - 将集合绑定到 ItemsSource 时如何过滤集合？

> ID：16076453
> 
> 赞同：9
> 
> 时间：2013-04-18T06:59:16.487
> 
> 标签：wpf, mvvm, count, treeview

我创建了一个树视图，它对我硬盘上的目录和文件进行建模。每个 treeviewItem 都有一个复选框，绑定到 isSelected 属性。我想要实现的是为每个父节点显示总文件数上的选定文件数（总共选择 12 个文件中的 10 / 12 10 个文件）。

有没有办法与 where property is ...进行绑定？

```
<ContentPresenter Content="{Binding MyItems.Count where MyItems.IsSelected, Mode=OneTime}"
                  Margin="2,0" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T07:22:31.543

没有办法直接过滤绑定中的集合。但是，WPF 允许使用`CollectionViewSource`.

一种方法是在您的过滤器`CollectionViewSource`的资源中定义 a通过绑定到 this 的 Count 属性来获取通过过滤器的元素的数量。不过，您必须在代码隐藏中定义您的过滤器。看起来像这样：`ItemTemplate``ItemsSource``CollectionViewSource`

```
<TreeView x:Name="Tree" ItemsSource="{Binding Items}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding ChildItems}">
            <HierarchicalDataTemplate.Resources>
                <CollectionViewSource x:Key="FilteredItems" 
                                        Source="{Binding ChildItems}"
                                        Filter="FilteredItems_OnFilter" />
            </HierarchicalDataTemplate.Resources>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{} {0} of {1} selected">
                        <Binding Path="Count" Source="{StaticResource FilteredItems}" />
                        <Binding Path="ItemsSource.Count" ElementName="Tree" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

在代码隐藏中：

```
private void FilteredItems_OnFilter(object sender, FilterEventArgs e)
{
    var item = sender as Item;
    e.Accepted = item.IsSelected;
} 
```

我还没有测试过它，但它应该可以正常工作。但是，您永远不会知道 WPF...

* * *

## 回答 #2

> 赞同：-13
> 
> 时间：2013-04-18T08:00:31.997

我个人使用以下框架 [http://logofx.codeplex.com/](http://logofx.codeplex.com/) 似乎满足您的所有要求（使用 LogoFX.Mini，因为它似乎足以满足您的目的）。使用 WrappingCollection.WithSelection 作为您的 ItemsSource 使用 SelectionCount 作为您要显示的值。如果您决定不使用该框架，那么您应该通过专用行为订阅选择更改事件，创建专用依赖属性并在每次选择更改时更新它。

最后一件事：**绝对避免使用代码隐藏**。它打破了整个 MVVM 原则。

# c# - 超链接中的导航网址不重定向我的页面？

> ID：16076454
> 
> 赞同：2
> 
> 时间：2013-04-18T06:59:18.833
> 
> 标签：c#, asp.net

我有一个`HyperLink`使用`NavigateUrl`Attribute 并正确提供 URL 的地方，但此链接不会重定向目标页面。你能帮忙吗，但是当我使用后面的代码重定向 URL 时，它可以正常工作。我还提到了我在 Code behind 中使用的代码，但我不想把我的代码放在 code behind 上。你能帮我这里有什么问题吗？

```
 <asp:HyperLink ID="hlnkAddUser" runat="server" onclick="return GB_show('Add Hiring Manager', this.href, 500, 650)"
            ImageUrl="~/Images/Resources/thumb/add.png" ToolTip="Add Hiring Manager" Text="Add Hiring Manager"></asp:HyperLink>
        **<%--NavigateUrl='<%# "~/Recruiter/AddUser.aspx?UserId=0" + "&ProfileId=" + hdnClientId.Value  + "&UserTypeId=8"  %>'--%>**

        string hlnkAddUserurl = string.Format("~/Recruiter/AddUser.aspx?UserId=0" + "ProfileId=" + hdnClientId.Value + "UserTypeId=8");
        hlnkAddUser.NavigateUrl = hlnkAddUserurl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:16:36.170

如果您的 onclick 函数将返回“false”，则默认浏览器操作（重定向到 href 属性中提供的页面）将不会发生。

确保 GB_Show 不返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:50:50.697

您正在尝试使用数据绑定服务器标记，例如`<%# #>`,`<%: %:>`并且`<%= %>`如果它们位于数据绑定控件（例如 、 和 等）内，这些标记将`GridView`足够`Repeater`好用`FormView`。

我建议您仅使用服务器端代码，因为即使您将代码放在上面，`.aspx`或者`.aspx.cs`它当然会在服务器端执行并向客户端（即用户或浏览器）发送响应。

因此，在这种情况下，执行以下代码并没有错。

```
string hlnkAddUserurl = string.Format("~/Recruiter/AddUser.aspx?UserId={0}&ProfileId={1}&UserTypeId={2}", 0, hdnClientId.Value, 8);
hlnkAddUser.NavigateUrl = hlnkAddUserurl; 
```

*注意：`string.Format`代码中显示的更正用法和查询字符串更正添加`&`在键值对之间*

**参考链接**

1.  [SO - 内联动态设置超链接控件的 navigateurl 属性](https://stackoverflow.com/a/3594162/468718)
2.  [SO - Asp.net HyperLink 动态创建 NavigateUrl 路径](https://stackoverflow.com/a/11935383/468718)
3.  [MSDN - 字符串格式](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

# sql - SQL Server：PDO `IN` 语句语法

> ID：16076457
> 
> 赞同：1
> 
> 时间：2013-04-18T06:59:25.407
> 
> 标签：sql, sql-server-2008, pdo

如何使用 PDO 编写以下请求？

```
$query = "SELECT test FROM table WHERE cond IN(1,2,3)"; 
```

我试过这个，但它不工作：

```
$query = "SELECT test FROM table WHERE cond IN(?)";
$params = array($condArray); 
$result = sqlsrv_query($connConfig, $query, $params) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:21:18.713

@您的常识评论可以解决问题。

[参考 - 有关 PDO 的常见问题](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15991146)

```
$ids = array(1,2,3);
$in  = str_repeat('?,', count($arr) - 1) . '?';
$sql = "SELECT * FROM table WHERE column IN ($in)";
$stm = $db->prepare($sql);
$stm->execute($ids);
$data = $stm->fetchAll(); 
```

# php - Can't access existing php cookie

> ID：16076466
> 
> 赞同：4
> 
> 时间：2013-04-18T07:00:29.040
> 
> 标签：php

I'm developing a website on my localhost which uses cookies. I have a function that generates a random, 25 character string which will be stored in a database and set as a referential cookie on the user's browser.

I've searched the internet and this site, but wasn't able to find a solution for my problem.

Below an overview of the related code

```
 function generateRandomString($length){
    $string = "";
    $possible = "012346789abcdefghijklmnopqrstuvwABCDEFGHIJKLMNOPQRSTUVW";
    $maxlength = strlen($possible);
    if($length > $maxlength){
        $length = $maxlength;
    }
    $i = 0; 
    while($i < $length){ 
        $char = substr($possible, mt_rand(0, $maxlength-1), 1);
        if(!strstr($string, $char)){ 
            $string .= $char;
            $i++;
        }
    }
    return $string;
}

$uCookie = generateRandomString(25);

setcookie('uHash', $uCookie, time()+60*60*24*30);

$stmt = $dbh->prepare('
    UPDATE User 
    SET u_UserCookie = :cookie 
    WHERE u_UserId = :id
'); 

$stmt->execute(array(
    ':cookie' => $uCookie,
    ':id' => $user_id
)); 
```

Now when i try `echo($_COOKIE['uHash']);` i get an empty string.

The strange part is that when i check my chrome preferences, the cookie does exists

```
Name:    uHash
Content:    134uHnEPrCmBNGqeAjhRSUiJL
Domain: localhost
Path:   /~path/to/login
Send for:   Any kind of connection
Accessible to script:   Yes
Created:    Wednesday, April 17, 2013 4:21:27 PM
Expires:    Friday, May 17, 2013 4:21:27 PM
```

The string '134uHnEPrCmBNGqeAjhRSUiJL' can also be found in the database, so that works

Am i missing some basic info about cookies (on a localhost)?

**SOLVED**

The problem is, according to php.net

> 'that domain names must contain at least two dots (.), hence 'localhost' is invalid and the browser will refuse to set the cookie'

So i solved it by doing this

```
 $domain = ($_SERVER['HTTP_HOST'] != 'localhost') ? $_SERVER['HTTP_HOST'] : false;
setcookie('uHash', $uCookie, time()+60*60*24*30, '/', $domain, false);
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:05:01.640

See this issue: [Cookies on localhost with explicit domain](https://stackoverflow.com/questions/1134290/cookies-on-localhost-with-explicit-domain)

Domain names in a cookie must contain two dots. Localhost therefor is invalid.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:05:30.297

Be sure that you're trying to access the cookie in the right path/domain :

```
 setcookie ('uHash', $uCookie, time()+60*60*24*30, /path/of/the/website, false); 
```

You need to redirect to having the headers sending your cookie before you can catch it.

See [setcookie doc](http://php.net/manual/en/function.setcookie.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:08:35.040

We don't have all the relevant code but I guess it looks like this:

```
setcookie('uHash', $uCookie, time()+60*60*24*30);
echo $_COOKIE['uHash']; 
```

From [the manual](http://es2.php.net/setcookie):

> Once the cookies have been set, they can be accessed on the **next** page load with the $_COOKIE or $HTTP_COOKIE_VARS arrays.

If you absolutely need it on the same page, you can probably do this:

```
setcookie('uHash', $uCookie, time()+60*60*24*30);
$_COOKIE['uHash'] = $uCookie;
echo $_COOKIE['uHash']; 
```

# c++ - C++11 默认构造函数中的引用初始化

> ID：16076468
> 
> 赞同：5
> 
> 时间：2013-04-18T07:00:36.277
> 
> 标签：c++, c++11

```
struct X {};

struct Y { 
    Y() = default;
    X& x;
}; 
```

在 C++11 中运行良好。我想知道 Y::x 是如何在幕后实际初始化的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T07:24:07.397

即使您明确指出`Y()`应该默认，编译器也有义务在某些条件下删除默认构造函数（强调添加）：

> 8.4.2/4 显式默认函数
> 
> 显式默认函数和隐式声明函数统称为默认函数，实现应为它们提供隐式定义（12.1 12.4、12.8），**这可能意味着将它们定义为已删除**

和

> 12.1/5 构造函数：
> 
> ...
> 
> ...类 X 的默认默认构造函数在以下情况下定义为已删除：
> 
> *   任何没有大括号或等号初始化器的非静态数据成员都是引用类型

但定义一个已删除的函数或构造函数并不是错误，除非您实际尝试使用它：

> 8.4.3/2 删除的定义
> 
> 隐式或显式引用已删除函数（而不是声明它）的程序是格式错误的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-18T07:03:58.923

它不能在任何主要编译器中编译。它将编译，直到创建类型的对象`Y`。

如果您创建类型的对象`Y`，则 clang 的输出将是

```
error: call to implicitly-deleted default constructor of 'Y'
note: explicitly defaulted function was implicitly deleted here
    Y() = default;
note: default constructor of 'Y' is implicitly deleted because field
'x' of reference type 'X &' would not be initialized
    X& x; 
```

当您声明`user-defined`构造函数时，它只是一个空函数，会出现错误，而不会创建对象。

迈克尔·伯尔是对的。隐式默认的构造函数工作得很好。正如我所见，这里的诊断没有问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-18T07:05:01.023

如果您不制作 Y 对象，它会“工作”。一旦你做了一个，你会得到一个错误：

(GCC 4.8.0)

> 错误：“结构 Y”中未初始化的引用成员

# android - 自定义对话框和活动之间有什么区别，因为对话框的意思是“Theme.Dialog”？

> ID：16076470
> 
> 赞同：1
> 
> 时间：2013-04-18T07:00:41.850
> 
> 标签：android, android-listview, android-activity

在这里我的问题是自定义对话框和活动之间的真正区别是什么，我将其主题设置为对话框并作为对话框打开，我已经使用了这两个，我理解的一些小的区别如下

1.  编码保留在活动中的其他文件和自定义对话框中的同一文件中（如果我们还没有为对话框创建新的类文件），
2.  活动保持在活动堆栈中，而对话框则不。

还有其他区别吗？所以我们需要自定义对话来代替活动作为对话，反之亦然，

我当前的问题是，当我单击 listitem 并打开新活动（如此处的对话框）时，当我按下返回按钮并再次单击项目时，它“意外停止”，并且无法理解错误，我的错误如下

```
04-18 12:21:18.945：E/AndroidRuntime（915）：致命异常：主要
04-18 12:21:18.945: E/AndroidRuntime(915): java.lang.IllegalStateException: 适配器的内容已更改，但 ListView 未收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在 ListView(2131230777, class android.widget.ListView) 和 Adapter(class com.logicbridge.lazyloader.MyOrdersLazyAdapter)]
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.widget.ListView.layoutChildren(ListView.java:1538)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.widget.AbsListView$CheckForTap.run(AbsListView.java:2728)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.os.Handler.handleCallback(Handler.java:605)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.os.Handler.dispatchMessage(Handler.java:92)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.os.Looper.loop(Looper.java:137)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 java.lang.reflect.Method.invokeNative(Native Method)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 java.lang.reflect.Method.invoke(Method.java:511)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-18 12:21:18.945: E/AndroidRuntime(915): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-18 12:21:18.945: E/AndroidRuntime(915): at dalvik.system.NativeStart.main(Native Method)

```

我的代码用于列表视图

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_order_list);
        initControls();
        loadList();
    }

    private void initControls() {
        progress = new ProgressDialog(this);
        progress.setMessage("Loading...");
        list = (ListView) findViewById(R.id.my_order_List);

    }

    private void loadList() {
        StaticItems.myorderadapter = new MyOrdersLazyAdapter(MyOrders.this,
                StaticItems.myOrderListArr);
        list.setAdapter(StaticItems.myorderadapter);
        list.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                // Starts new activity after some process
                ArrayList<String> str = new ArrayList<String>();
                str.add("loadOrdersDetail");
                str.add("2");
                new MyTask(str).execute();
                return false;
            }
        });
    } 
```

发生这种情况是因为我使用了新活动而不是对话框吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T14:57:36.320

`Dialog`并且`Activity`是完全不同的东西。例如，服务或广播接收器可以启动`Activity`，但不能启动`Dialog`。通常，a`Dialog`属于 an`Activity`并且`Activity`控制着 the 的生命周期`Dialog`（即：何时创建、显示、关闭等）。*注意：您可以拥有`Dialog`不属于的 a `Activity`，但这是一种特殊情况。*

有时您想向用户展示一些看起来像 a 的东西`Dialog`，但您需要为此使用 an `Activity`。一个很好的例子是`Notification`. 有时，当用户`Notification`从通知栏中选择一个时，您想向他显示一个`Dialog`. 但是你不能`Dialog`从 a 开始 a `Notification`。相反，您使用`Activity`使用`Theme.Dialog`. 的`Activity`行为类似于 a `Activity`，但对用户**来说它看起来像 a`Dialog`**（即：它不占用整个屏幕，它具有透明背景，因此用户可以看到它`Activity`下面的内容，等等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:38:19.737

当适配器的数据列表在后台线程中更改并要求更新导致此崩溃的列表视图时，会发生异常。

您能否在 MyTask AsyncTask 中发布您想要做什么，这可能有助于确定崩溃的原因。？

# c# - 读取682个txt文件后内存不足

> ID：16076471
> 
> 赞同：0
> 
> 时间：2013-04-18T07:00:53.953
> 
> 标签：c#, streamreader

我想用这段代码读取一个文件，但是在 682 次之后我得到了这个错误：

> 引发了“System.OutOfMemoryException”类型的异常。

```
System.IO.StreamReader file = new System.IO.StreamReader(scanpad[lusteller]); 
```

scanpad 是一个带有文件路径的数组，而 lusteller 是它的计数器。Scanpad 存在 11207 个文件。

我也看过 682 处有一个文件

任何人的解决方案？

这是我的代码的完整版本

```
 using (StreamReader file = new System.IO.StreamReader(scanpad[lusteller]))
        {
            //do stuff

            lengte = bestandsnaam.Length;
            lengte = lengte - 13;
            controller = bestandsnaam.Remove(lengte, 13);           // controllertype uit naam halen
            do
            {
                rij = file.ReadLine();
                if (rij != null)              //error op volgende lijn vermijden
                {
                    if (rij.StartsWith("0") || rij.StartsWith("1") || rij.StartsWith("2") || rij.StartsWith("3"))
                    {
                        rijcheck = true;
                    }

                    teller = teller + 1;
                    if (teller > 10)
                    {
                        if (rijcheck == true)           // rij is datumlijn
                        {
                            string[] split = rij.Split(' ');
                            foutinformatie[0, index] = type;                     //type ophalen
                            foutinformatie[3, index] = controller;              //controllernaam ophalen
                            foutinformatie[1, index] = split[0];                //datum ophalen
                            foutinformatie[2, index] = split[1];                //tijd ophalen 
                            foutinformatie[4, index] = split[2];                //foutcode ophalen
                            foutinformatie[5, index] = split[5];                //foutteller ophalen 
                            if (controller.StartsWith("MPU") == true)
                            {
                                lusarraygraad = 5;
                                while (lusarraygraad < 360)
                                {

                                    if (graadmpu[0, lusarraygraad] == split[2])
                                    {
                                        try
                                        {
                                            graad = graadmpu[1, lusarraygraad];
                                            foutinformatie[7, index] = graad;
                                        }
                                        catch
                                        {
                                        }
                                        lusarraygraad = lusarraygraad + 499;
                                        graadgevonden = true;
                                    }
                                    lusarraygraad = lusarraygraad + 1;
                                }
                                foutinformatie[7, index] = graad;
                                if (graadgevonden == false)
                                {
                                    foutinformatie[7, index] = "";
                                }
                                graadgevonden = false;
                            }

                            //////////////////////////////////////////////////////////////////////////
                            if (controller.StartsWith("AAUX") == true)
                            {
                                lusarraygraad = 4;
                                while (lusarraygraad < 30)
                                {

                                    if (graadaaux[0, lusarraygraad] == split[2])
                                    {
                                        try
                                        {
                                            graad = graadaaux[1, lusarraygraad].ToString();
                                            foutinformatie[7, index] = graad;
                                        }
                                        catch
                                        {
                                        }
                                        lusarraygraad = lusarraygraad + 499;
                                        graadgevonden = true;
                                    }
                                    lusarraygraad = lusarraygraad + 1;
                                }
                                foutinformatie[7, index] = graad;
                                if (graadgevonden == false)
                                {
                                    foutinformatie[7, index] = "";
                                }
                                graadgevonden = false;
                            }
                            if (controller.StartsWith("ACTRL") == true)
                            {
                                lusarraygraad = 6;
                                while (lusarraygraad < 85)
                                {

                                    if (graadactrl[0, lusarraygraad] == split[2])
                                    {
                                        try
                                        {
                                            graad = graadactrl[1, lusarraygraad].ToString();
                                            foutinformatie[7, index] = graad;
                                        }
                                        catch
                                        {
                                        }
                                        lusarraygraad = lusarraygraad + 499;
                                        graadgevonden = true;
                                    }
                                    lusarraygraad = lusarraygraad + 1;
                                }
                                foutinformatie[7, index] = graad;
                                if (graadgevonden == false)
                                {
                                    foutinformatie[7, index] = "";
                                }
                                graadgevonden = false;
                            }

                            try
                            {
                                telleromschrijving = 6;
                                informatie = "";
                                while (split[telleromschrijving] != " ")
                                {
                                    informatie = informatie + " " + split[telleromschrijving];
                                    telleromschrijving = telleromschrijving + 1;
                                }
                            }
                            catch
                            {
                                foutinformatie[6, index] = informatie;                //foutteller ophalen 
                            }
                            rijcheck = false;
                            rij = file.ReadLine();
                            while (varcheck < 40)
                            {
                                // rij met eerste variable

                                if (rij != "")
                                {
                                    variable[indexlokaal, varteller] = rij;
                                    foutinformatie[varteller + 8, index] = variable[indexlokaal, varteller] = rij;
                                    varteller = varteller + 1;
                                    rij = file.ReadLine();
                                }
                                else
                                {
                                    foutinformatie[varteller + 8, index] = " ";

                                    varteller = varteller + 1;
                                }
                                varcheck = varcheck + 1;
                            }
                            varcheck = 0;
                            varteller = 0;
                            indexlokaal = indexlokaal + 1;
                            index = index + 1;
                        }
                    }
                }
            }
            while (rij != null);
            file.Close();
            file.Dispose();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:05:28.000

我想 682 只是一个你碰巧内存不足的数字，而不是一个特殊的数字。您应该将您的流式阅读器封装到

```
using(StreamReader file = new System.IO.StreamReader(scanpad[lusteller]))
{
//do stuff
} 
```

这样，您的流式阅读器在使用后被丢弃，清除内存

**编辑更新**

在您的流媒体阅读器中，您还拥有

```
 rij = file.ReadLine();
                        while (varcheck < 40)
                        {
                            // rij met eerste variable

                            if (rij != "")
                            {
                                variable[indexlokaal, varteller] = rij;
                                foutinformatie[varteller + 8, index] = variable[indexlokaal, varteller] = rij;
                                varteller = varteller + 1;
                                rij = file.ReadLine();
                            } 
```

但您没有检查是否`ReadLine`再次返回 null，查看 [http://msdn.microsoft.com/en-GB/library/system.io.streamreader.readline.aspx](http://msdn.microsoft.com/en-GB/library/system.io.streamreader.readline.aspx)

这也可能导致内存不足异常，因为您的流已达到 null 并且您继续前进

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:12:26.433

这完全取决于您对 StreamReader 所做的工作。

首先，您需要处理它，但我认为这不是问题，因为 GC 会在内存不足之前收集它（除非您还持有对它的引用）。

如果您使用诸如“ReadToEnd”之类的东西并且文件的内容很大，那么您会在创建的字符串中遇到大对象堆（如果您通过创建子字符串来操作它们，它可能会变得更糟）。一段时间后，堆变得碎片化，因此您的内存不足，因为它无法为您的请求找到足够大的内存块。

好吧，这是我的猜测，您的代码中几乎没有信息，祝您好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:04:59.770

尝试使用`Using`:(读取后处理内存)

```
using(System.IO.StreamReader file = new System.IO.StreamReader(scanpad[lusteller]))
        {

        } 
```

# android - 需要 Android 中“应用程序包装”的可能选项

> ID：16076474
> 
> 赞同：0
> 
> 时间：2013-04-18T07:00:55.657
> 
> 标签：android

我想了解 Android 中可用的“应用程序包装”选项。我的要求是控制 2-3 个 apk，它们将被打包在一起。这些 apk 将相互通信以进行数据共享，但不会与第三方应用程序通信。

Android 中用于包装 apk 的任何选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T13:44:13.073

您需要使用 apktool/dex2jar 反编译应用程序，然后使用 AOP 注入代码。然后，您需要重新编译应用程序并对其进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:36:51.930

[使用](http://developer.android.com/tools/publishing/app-signing.html)相同的证书对它们进行签名（不需要 JAR 或库引用，除非您的应用程序已经采用这种方式构建）：

> **应用程序模块化**——Android 系统允许由相同证书签名的应用程序在同一进程中运行，如果应用程序请求，则系统将它们视为单个应用程序。通过这种方式，您可以将应用程序部署在模块中，并且用户可以根据需要独立更新每个模块。

然后使用您`android:exported=false`在清单中标记的 ContentProvider 以确保外部应用程序无权访问它。

# alembic - alembic/env.py target_metadata = metadata "没有模块名称 al_test.models"

> ID：16076480
> 
> 赞同：9
> 
> 时间：2013-04-18T07:01:19.620
> 
> 标签：alembic

当我使用 alembic 来控制我的项目数据库的版本时，env.py 中的部分代码如下：

```
# add your model's MetaData object here
# for 'autogenerate' support
# from myapp import mymodel
# target_metadata = mymodel.Base.metadata
from al_test.models import metadata

target_metadata = metadata 
```

当我运行 'alembic revision --autogenerate -m "Added user table"' 时，我收到一个错误：文件 "alembic/env.py"，第 18 行，从 al_test.models 导入元数据 ImportError：没有名为 al_test.models 的模块

那么如何解决这个问题呢？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-29T18:27:37.447

这可能有点晚了，您可能已经发现了问题，但我猜问题是您的 alembic/ 目录不是系统路径的一部分。即您需要执行以下操作：

```
import sys
sys.path.append(path/to/al_test)

from al_test.models import metadata 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-06T17:16:53.410

像这样更新您的 env.py，将当前工作目录添加到 Python 在搜索模块时使用的 sys.path：

```
import os
import sys
sys.path.append(os.getcwd())

from al_test.models import metadata
target_metadata = metadata
....
.... 
```

# kendo-ui - 为什么使用公共数据源时分页不适用于网格

> ID：16076484
> 
> 赞同：1
> 
> 时间：2013-04-18T07:01:35.583
> 
> 标签：kendo-ui, kendo-grid

我参考了剑道文章并做了护目镜，但我找不到任何解决方案。第1步：

当我们使用公共数据源并将整个数据绑定到带有分页的图表和网格时，是否有可能在页面加载时发生这种情况。

第2步：

稍后根据应用于网格的过滤条件，图表中的数据应该改变。

任何帮助或建议我是否可能..

```
var common = new kendo.data.DataSource({
    type     : "odata",
    transport: {
        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema   : {
        model: {
            fields: {
                OrderDate: { type: "date" }
            }
        }
    }

});
common.read();

var grid = $("#grid").kendoGrid({
    dataSource: common,
     pageSize : 10,
    pageable  : {

        refresh  : true,
        pageSizes: [10, 20]
    },
    filterable:true,
    columns   : [
        {
            field     : "OrderID",
            filterable: false
        },
        "Freight",
        {
            field : "OrderDate",
            title : "Order Date",
            width : 100,
            format: "{0:MM/dd/yyyy}",
            filterable: true
        },
        {
            field: "ShipName",
            title: "Ship Name",
            width: 200,
            filterable: true
        },
        {
            field: "ShipCity",
            title: "Ship City",
            filterable: true
        }
    ]

}).data("kendoGrid");
$("#chart").kendoChart({
    dataSource  : common,
    autoBind    : false,
    categoryAxis: {
        field: "OrderID"
    },
    legend      : {
        position: "right", visible: true
    },

    seriesDefaults: { type: "area" },
    series        : [
        { field: "OrderDate", name: "OrderDate" },
        { field: "Freight", name: "Freight" },
        { field: "ShipVia", name: "ShipVia" }
    ],
    valueAxis     : [
        {
            name   : "OrderID",
            max    : 5.0,
            min    : 0,
            labels : {
                format: "{0}"
            },
            tooltip: { visible: true }
        }
    ]
}); 
```

这是到目前为止我已经测试过的小提琴：http: [//jsfiddle.net/D3rSk/189/](http://jsfiddle.net/D3rSk/189/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:19:28.927

网格没有 pageSize 选项。您需要在数据源配置中设置页面大小：

```
var common = new kendo.data.DataSource({
    pageSize : 10,  
    type     : "odata",
    transport: {
        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema   : {
        model: {
            fields: {
                OrderDate: { type: "date" }
            }
        }
    }

}); 
```

这是更新的 jsFiddle：http: [//jsfiddle.net/D3rSk/192/](http://jsfiddle.net/D3rSk/192/)

# java - Servlet-Servlet-Jsp 重定向

> ID：16076486
> 
> 赞同：0
> 
> 时间：2013-04-18T07:01:43.550
> 
> 标签：java, jsp

我正在用 JAVA 开发一个应用程序，其中一个 servlet 从 JSP 页面获取输入。在 db 中插入值后，它将重定向到另一个 servlet。然后第二个 servlet 将调度一个带有 ArrayList 的 JSP 页面。但是我不能从第二个 servlet 重定向到 JSP 页面。ArrayList 将转到 JSP 页面，但该页面没有显示任何内容。我正在使用 NetBeans 6.8。如果有人能解决这个问题，我将不胜感激。

**第一个 Servlet 的代码：**

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/Servlet1?id="+id);
dispatcher.forward(request, response); 
```

**第二个 Servlet 的代码：**

```
request.setAttribute("list",list);
String url="test2.jsp";
RequestDispatcher v=request.getRequestDispatcher(""+url+"");
v.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T19:05:29.273

首先，如果您使用任何重定向机制，它不应该在 RequestScope 中。它必须在会话或上下文范围内（根据您的要求）。因此，第二个 Servlet 的结果代码可能如下所示

```
request.getSession().setAttribute("list",list);
String url="/test2.jsp";
RequestDispatcher v=request.getRequestDispatcher(""+url+"");
v.forward(request, response); 
```

试试这个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T09:56:11.107

桑卡，

您可以将这些对象添加到会话对象中。您可以在任何 jsp 和 servlet 中使用该会话 obj。

假设您有一个包含一些数据对象的 arrayList Obj。并且您正在尝试将您的 servlet 重定向到 jsp 或 servlet 到 servlet。例如：-

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/Servlet1?id="+id);
dispatcher.forward(request, response);
request.setAttribute("list",list); // **Insted of using request object use session implicit object**.
String url="test2.jsp";
RequestDispatcher v=request.getRequestDispatcher(""+url+"");
v.forward(request, response); 
```

请参考下面的代码来解决您的问题。

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/Servlet1?id="+id);
dispatcher.forward(request, response);
**session.setAttribute("list",list);** 
String url="test2.jsp";
RequestDispatcher v=request.getRequestDispatcher(""+url+"");
v.forward(request, response); 
```

并通过使用获取此列表对象

**列表数据列表 = session.getAttribute("list");**

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:13:25.453

在第二个 servlet 上试试这个 ..

```
request.setAttribute("list",list);
String url="test2.jsp";
RequestDispatcher v=request.getRequestDispatcher(url);
v.forward(request, response); 
```

在jsp页面...

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
<title></title>
</head>
<body>
<c:forEach items="${list}" var="item">
        ${item}<br>
</c:forEach>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T18:40:13.093

```
public class MySqlConnection {

    Connection c;

    public Connection getConnection() throws ClassNotFoundException, SQLException {
        String driver = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/";
        String dbName = "ignite292";
        String user = "root";
        String password = "root";
        Class.forName(driver); // You don't need to call it EVERYTIME btw. Once during application's startup is more than enough.
        c = (Connection) DriverManager.getConnection(url + dbName, user, password);
        return c;
    }

    public void closeConnection() {
        try {
            if (!c.isClosed()) {
                c.close();
            }
        } catch (Exception e) {
        }
    }
} 
```

# silverlight - 如何在 Radwindow 弹出后使 Aspx 页面的 Div 可见

> ID：16076491
> 
> 赞同：1
> 
> 时间：2013-04-18T07:01:51.977
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-5.0

如何使 Aspx 页面的 Div 可见，在弹出 Radwindow 后.. 使其看起来像灯箱。

我在 aspx 页面中嵌入了银光组件。在 silverlight 组件中有缩略图大小的图像。时，我单击 radwindow 以原始图像和大尺寸打开的缩略图。弹出后，只有 silverlight 组件下方的区域变为灰色。

我需要整个窗口应该有加里背景颜色，所以它看起来像灯箱。

所以，我需要在 rad Window 弹出后调用 Div 。

请访问：我已共享 2 个文件。 [https://docs.google.com/file/d/0B5yo_3I2aEWcbWFGb3FKWURZLVU/edit?usp=sharing](https://docs.google.com/file/d/0B5yo_3I2aEWcbWFGb3FKWURZLVU/edit?usp=sharing) [https://docs.google.com/file/d/0B5yo_3I2aEWcZThfcUxUb3JUTHM/edit?usp=sharing](https://docs.google.com/file/d/0B5yo_3I2aEWcZThfcUxUb3JUTHM/edit?usp=sharing)

# java - MyThread 类的更好技术

> ID：16076492
> 
> 赞同：2
> 
> 时间：2013-04-18T07:01:55.443
> 
> 标签：java, multithreading

更好的帖子：[“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread)

我可以通过两种方式创建自己的线程类 MyThread，

```
class MyThread extends Thread
or
class MyThread implements Runnable 
```

哪种技术更好，为什么？

在实现 Runnable 的情况下，我必须从 MyThread 对象创建 Thread 对象，例如

```
MyThread mt = new MyThread();
Thread t = new Thread(mt); 
```

那么实现可运行接口技术的优势是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:05:09.267

虽然创建一个实现 Runnable 接口的线程更好。因为你可以从其他类扩展你的新类，否则你不能扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:17:25.407

如果您想保留对线程工作的一些控制，例如调用`interrup()`. 一般来说，`Thread`当类是某种 Manger 或 Worker 时，我会说扩展 a 是可以的。

在其他情况下，尤其是**当一个类代表一些要完成的工作时（`Job`, `Future`），最好实现 runnable**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:31:55.430

> 在实现 Runnable 的情况下，我必须从 MyThread 对象创建 Thread 对象，例如

```
MyThread mt = new MyThread();
Thread t = new Thread(mt); 
```

**不必要**

你可以这样做...

```
Thread t = new Thread(new Runnable () { public void run() { /* do stuff */ }}); 
```

...不需要 MyThread 类。

# sorting - 字符串中间数字的人为或自然排序？

> ID：16076493
> 
> 赞同：2
> 
> 时间：2013-04-18T07:01:57.403
> 
> 标签：sorting

我知道自然排序（或人工排序？）在对带有数字的字符串序列进行排序方面非常好。最近，我将它应用于生成（渲染）的图像序列。结果如下所示：

*   ooxx_1.jpg
*   ooxx_2.jpg
*   ...
*   ooxx_11.jpg
*   ...

如果数字后面有后缀字符怎么办？排序结果是这样的：

*   ooxx_1.jpg
*   ooxx_1_depth.jpg
*   ooxx_2.jpg
*   ooxx_2_depth.jpg
*   ...

虽然我正在寻找以下排序结果：

*   ooxx_1.jpg
*   ooxx_2.jpg
*   ...
*   ooxx_1_depth.jpg
*   ooxx_2_depth.jpg
*   ...

任何想法？

# twitter - Twitter 身份验证凭据

> ID：16076496
> 
> 赞同：4
> 
> 时间：2013-04-18T07:02:16.607
> 
> 标签：twitter, social-networking, twitter-oauth, twitter4j

我是社交网络分析和推特 API 的新手。我想收集有关特定主题的推文。所以我编写了以下代码

```
package com;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.List;

import twitter4j.Query;
import twitter4j.QueryResult;
import twitter4j.Status;
import twitter4j.Tweet;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;

public class TwitterSearchAdvance {
    public static void main(String[] vishal) throws TwitterException,
            IOException {
        // List<Tweet> Data = new ArrayList<Tweet>();
        StringBuffer stringbuffer = new StringBuffer();
        Twitter twitter = new TwitterFactory().getInstance();

        for (int page = 0; page <= 4; page++) {
            Query query = new Query("Airtel");
            // query.setRpp(100); // 100 results per page

            QueryResult qr = twitter.search(query);
            List<Status> qrTweets = qr.getTweets();
            System.out.println("-------------------" + qrTweets.size());
            // break out if there are no more tweets

            for (Status t : qrTweets) {
                System.out.println(t.getCreatedAt() + ": " + t.getText());

                stringbuffer.append(t);
                stringbuffer.append("\n");
                BufferedWriter bw = new BufferedWriter(new FileWriter(new File(
                        "/home/vishal/FirstDocu.txt"), true));
                bw.write(stringbuffer.toString());
                bw.newLine();
                // bw.write(t.getCreatedAt() + ": " + t.getText());
                bw.close();

            }
        }
    }
} 
```

但是当我运行以下程序时，以下错误开始出现

```
Exception in thread "main" java.lang.IllegalStateException: Authentication credentials are missing. See http://twitter4j.org/configuration.html for the detail.
    at twitter4j.TwitterBaseImpl.ensureAuthorizationEnabled(TwitterBaseImpl.java:200)
    at twitter4j.TwitterImpl.get(TwitterImpl.java:1833)
    at twitter4j.TwitterImpl.search(TwitterImpl.java:282)
    at com.TwitterSearchAdvance.main(TwitterSearchAdvance.java:28) 
```

我需要在我的程序中在哪里提供凭据

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:39:10.920

看看这里的选项[http://twitter4j.org/en/configuration.html](http://twitter4j.org/en/configuration.html)

有多种方法可以为您的程序提供凭据：

1.  属性文件
2.  配置生成器类
3.  系统属性
4.  环境变量

所有详细信息和说明都可以在链接中找到

# java - 如何将动态附加值传递到 servlet

> ID：16076497
> 
> 赞同：1
> 
> 时间：2013-04-18T07:02:16.820
> 
> 标签：java, jsp

我想得到这个值

> 名称="产品' + 计数器 + '"

它是一个动态值，当我单击添加时它将创建另一行，任何人都可以告诉我如何获取此动态值以及我应该如何传递给 servlet 以及如何进入 servlet。我正在使用表单提交：JSP 和 JAVA env。

```
$("#addrow").on("click", function () {
        counter++;

        var newRow = $("<tr>");
        var cols = "";
        cols += '<td><input type="text" name="product' + counter + '"/></td>';
        cols += '<td><input type="text" name="price' + counter + '"/></td>';
        cols += '<td><input type="text" name="qty' + counter + '"/></td>';
        cols += '<td><input type="text" name="linetotal' + counter + '" readonly="readonly"/></td>';
        cols += '<td><a class="deleteRow"> x </a></td>';
        newRow.append(cols);
        alert(cols);
        $("table.order-list").append(newRow);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:19:26.937

无需添加计数器，像这样更改您的代码。

```
$("#addrow").on("click", function () {
        counter++;

        var newRow = $("<tr>");
        var cols = "";
        cols += '<td><input type="text" name="product"/></td>';
        cols += '<td><input type="text" name="price"/></td>';
        cols += '<td><input type="text" name="qty"/></td>';
        cols += '<td><input type="text" name="linetotal" readonly="readonly"/></td>';
        cols += '<td><a class="deleteRow"> x </a></td>';
        newRow.append(cols);
        alert(cols);
        $("table.order-list").append(newRow);
    }); 
```

并在`servlet`获取与每个链接`array`的所有`values`链接，`input box`如下面的代码。

```
String[] products = request.getParameterValues("product");
String[] prices= request.getParameterValues("price");
String[] qtys= request.getParameterValues("qty");
String[] linetotals = request.getParameterValues("linetotal"); 
```

**编辑**添加了完整的代码

```
<html>
<head>
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>

</head>
<body>
<form id="validationform" name="validationform" method="get" action="BG_Form">

<table class="order-list" style="margin-left: 228px;">
    <thead>
        <tr><td>Product</td><td>Price</td><td>Qty</td><td>Total</td></tr>
    </thead>

    <tbody>
        <tr>
            <td><input type="text" name="product"></td>
            <td><input type="text" name="price">
            </td><td><input type="text" name="qty"></td>
            <td><input type="text" readonly="readonly" name="linetotal"></td>
            <td><a class="deleteRow"> x </a></td>
        </tr>
    </tbody>

    <tfoot>
        <tr>
            <td style="text-align: center;" colspan="5">
                <input type="button" value="Add Product" name="addrow" id="addrow">

            </td>
        </tr>

        <tr>
            <td colspan="5">
                Grand Total: Rs<span id="grandtotal"></span>
            </td>
        </tr>
        <tr>
        <td>
        In Words <span id="inworDs" ></span>

        </tr>
        <tr>
                <td>
                <input type="submit"/>

        </tr>
    </tfoot>
</table>

<form>

<script>
    $("#addrow").click(function(){
      var newRow = $("<tr>");
              var cols = "";
              cols += '<td><input type="text" name="product"/></td>';
              cols += '<td><input type="text" name="price"/></td>';
              cols += '<td><input type="text" name="qty"/></td>';
              cols += '<td><input type="text" name="linetotal" readonly="readonly"/></td>';
              cols += '<td><a class="deleteRow"> x </a></td>';
              newRow.append(cols);
        $("table.order-list").append(newRow);
    });

</script>
</body>
</html> 
```

# java - 如何使用 NetBeans 备份和恢复 MySQL 数据库？

> ID：16076499
> 
> 赞同：0
> 
> 时间：2013-04-18T07:02:28.597
> 
> 标签：java, mysql, database, netbeans, user-interface

我正在使用 NetBeans 开发软件，并且使用 MySQL 作为我的数据库服务器。我打算使用两个按钮，分别是“备份数据库”和“恢复数据库”到各自的功能。如何完成这些功能？对于这两个功能，如果文件选择器窗口也用于这些功能，那就太棒了。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:06:06.723

如何创建转储并保存它？然后在要恢复时运行它？

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

编辑：

好吧，既然你说你真的不知道如何实现这一点，那就更具体了。

mysqldumpl 必须从命令行运行，请阅读此链接：

[http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)

您的代码应如下所示：

```
String yourCommand = "mysqldump -h localhost -u [user] -p[database password] -c --add-drop-table --add-locks --all --quick --lock-tables [name of the database] > sqldump.sql";
Runtime.getRuntime().exec(yourCommand); 
```

之后，您应该已经成功保存了包含数据库所有数据的文件

字符串的最后一部分`"sqldump.sql"`是文件的名称，您可以使用文件选择器设置自己的名称，并将该名称替换为用户的名称，谷歌会帮助您。

好吧，首先完成它在您运行时发布您的代码，然后我们可以解决数据库的恢复问题

# workflow - 具有设计器工作流程的自定义内容类型

> ID：16076501
> 
> 赞同：1
> 
> 时间：2013-04-18T07:02:33.290
> 
> 标签：workflow, designer

我正在开发一个具有 3 个批准的设计师工作流程，这是我的流程。请求者将通过 Asp.net 表单提交他的请求。请求将首先获得 1 个 Approvar 的批准。如果他批准了，那就去 2，直到全部批准。

我的要求是当请求获得批准时，approvar 将看到请求的详细信息并可以更改请求（仅特定的批准），他会看到其他批准评论，因此，对于这类要求，我将创建自定义内容类型，其中我将根据批准响应显示请求数据以及任务更新。

我的理解正确吗？如果您有任何链接或解决方案/示例，请与我分享。

# php - 排列我的查询的结果集，有问题

> ID：16076508
> 
> 赞同：1
> 
> 时间：2013-04-18T07:02:51.103
> 
> 标签：php, mysql

我有 4 张桌子：

1.  人
2.  工作
3.  标题
4.  部门

人员表

```
id | title_id | person | phone | email | dept_id | job_id
---+----------+--------+-------+-------+---------+-------
1  |        1 | some1  | 12345 | s@a.c |       2 |      3
... 
```

其他表结构如下

```
id | ******** 
---+--------- 
```

假设表title有5条记录，表departments有5条记录，表jobs有5条job记录。

假设由 $search string = 6 in table persons 定义的合适记录；

当我执行下面的查询时，结果集有 `5 x 5 x 5 x 6 = 750`记录，其中大部分是重复的。结果看起来像做排列。

```
$query = sprintf(
                  "SELECT * 
                   FROM 
                         persons p, titles t, departments d, jobs j 
                   WHERE 
                         p.person LIKE %s OR 
                         p.phone LIKE %s OR 
                         p.email LIKE %s AND 
                         p.id=t.id AND 
                         p.id=j.id AND 
                         p.id=d.id", 
                   $search, $search, $search
                  ); 
```

然后我尝试将条件更改如下：

```
$query = sprintf(
                  "SELECT * 
                   FROM 
                         persons p, titles t, departments d, jobs j 
                   WHERE 
                         p.person LIKE %s OR 
                         p.phone LIKE %s OR 
                         p.email LIKE %s AND 
                         p.title_id=t.id AND 
                         p.job_id=j.id AND 
                         p.dept_id=d.id", 
                   $search, $search, $search
                  ); 
```

这将返回相同的结果。我只想立即在结果集中获取标题本身而不是 title_id、工作本身而不是 job_id 和部门名称而不是 dept_id。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:18:59.273

尝试使用`join`：

```
$query = sprintf(
                  "SELECT * 
                   FROM 
                         persons p join titles t on p.title_id=t.id join departments d on  p.dept_id=d.id join jobs j on p.job_id=j.id
                   WHERE 
                         p.person LIKE %s OR 
                         p.phone LIKE %s OR 
                         p.email LIKE %s
                   ", 
                   $search, $search, $search
                  ); 
```

**[演示](http://sqlfiddle.com/#!2/b296f/1)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T07:10:31.620

将 SELECT * FROM 替换为 SELECT distinct * FROM

# java - 线程“主”java.rmi.ConnectException 中的异常：连接拒绝主机：192.168.1.55；嵌套异常是：

> ID：16076509
> 
> 赞同：2
> 
> 时间：2013-04-18T07:03:09.597
> 
> 标签：java, exception

我在我的系统中运行这段代码，我不想写本地地址（本地主机）或远程地址（IP 地址）......

```
ref= (RMISIntf)Naming.lookup("rmi://"+"192.168.0.15"+"/RMIServer"); 
```

我也尝试了这段代码，直到我没有回应

```
 ref= (RMISIntf)Naming.lookup("rmi://"+"localhost"+":"+8033+"/RMIServer");
 //MyRemoteObject ro = (MyRemoteObject) Naming.lookup("//" + "localhost" + ":" + port + "/" + name);
    //ref=Naming.rebind("rmi://localhost:8080/RmiServer",RMISIntf); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:15:26.463

最好先使用 localhost 进行测试，因为它很容易，并且不需要像使用远程连接（即外部地址）那样设置规则。

[Java RMI 常见问题解答](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html#domain)说，

> 适当的解决方法是在启动服务器时设置系统属性 java.rmi.server.hostname。该属性的值应该是服务器的外部可访问的主机名（或 IP 地址）——在 Naming.lookup 中指定为主机部分时任何工作都足够好。

也只需在[此处](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi/javarmiproperties.html)查看远程方法调用的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:09:50.727

您应该能够使用两者中的任何一个使其工作，但请记住，要使其与外部地址一起工作，您可能需要在防火墙上创建一些规则并在调制解调器上进行转发。

# c# - 与 UI 对话的线程？

> ID：16076510
> 
> 赞同：2
> 
> 时间：2013-04-18T07:03:16.157
> 
> 标签：c#, multithreading, winforms, user-interface

我有这个代码：

```
private void buttonStart_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew(() => GeneraListaCartelle())
        .ContinueWith(t => GeneraListaCartelleCompletata()
        , CancellationToken.None
        , TaskContinuationOptions.None
        , TaskScheduler.FromCurrentSynchronizationContext());
}

private void GeneraListaCartelle()
{
    try
    {
        ... some operation ....
    }
    catch (Exception err)
    {
        txtErrors.AppendText(err.Message);
    }
}

GeneraListaCartelleCompletata()
{
    ... process finished...
} 
```

并且`txtErrors`在“主”线程（UI）中。当我发现错误时，异步线程无法写入 UI 控件，我得到一个`invalid cross-thread exception`.

我可以在线程内与 UI 对话吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:10:42.877

如果您使用的是 WinForms，则需要在 UI 线程上调用您的方法，例如

```
catch (Exception err)
{
    if(this.InvokeRequired){
        Action<Exception> act = ((ex) => {
            txtErrors.AppendText(ex.Message);
        }); 
        this.Invoke(act, new object[] { err });
    }
    else{
        txtErrors.AppendText(err.Message);
    }
} 
```

如果您使用的是 WPF，则需要

```
catch (Exception err)
{
    if(this.Dispatcher.CheckAccess()){
       txtErrors.AppendText(err.Message);
    }
    else {
           Action<Exception> act = ((ex) => {
            txtErrors.AppendText(ex.Message);
           }); 
        this.Dispatcher.Invoke(act, new object[] { err });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T07:10:21.010

如果您的目标是 WinForm 应用程序，那么：

```
try
    {
        ... some operation ....
    }
catch (Exception err)
    {
       if (txtErrors.InvokeRequired)
        {
            txtErrors.BeginInvoke(new MethodInvoker(
                delegate { txtErrors.AppendText(err.Message); })
                );
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T07:12:52.250

[msdn](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)有一个例子：

```
// This delegate enables asynchronous calls for setting
// the text property on a TextBox control.
delegate void SetTextCallback(string text);

// This method demonstrates a pattern for making thread-safe
// calls on a Windows Forms control. 
//
// If the calling thread is different from the thread that
// created the TextBox control, this method creates a
// SetTextCallback and calls itself asynchronously using the
// Invoke method.
//
// If the calling thread is the same as the thread that created
// the TextBox control, the Text property is set directly.
private void SetText(string text)
{
    // InvokeRequired required compares the thread ID of the
    // calling thread to the thread ID of the creating thread.
    // If these threads are different, it returns true.
    if (this.textBox1.InvokeRequired)
    {
        SetTextCallback d = new SetTextCallback(SetText);
        this.Invoke(d, new object[] { text });
    }
    else
    {
        this.textBox1.Text = text;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T07:14:23.950

在调用的 form_load 事件处理程序中将 CheckForIllegalCrossThreadCalls 设置为 false

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T07:22:33.897

把它从一个旧项目中拉出来，我不得不处理从另一个线程更新 UI。也应该为你工作。

```
delegate void addtoValProg();
addtoValProg myDelegate;

myDelegate = new addtoValProg(invokeControl);

private void GeneraListaCartelle()
{
    try
    {
        //... some operation ....
    }
    catch (Exception err)
    {
        invokeControl();
    }
}

private void invokeControl()
{
    if (this.InvokeRequired)
    {
        this.Invoke(this.myDelegate);
    }
    else
    {
        txtErrors.AppendText(err.Message);
        txtErrors.Update();
    }
} 
```

# javascript - 页面导航的 if 条件问题

> ID：16076511
> 
> 赞同：0
> 
> 时间：2013-04-18T07:03:19.410
> 
> 标签：javascript, jquery, html

```
$( 'li' ).on( 'click', function( event ) {
            console.log("inside music player");
            var projIndex = $(this).index();
            selectedMedia=$(this).text();
            console.log("------"+projIndex);
            console.log("------"+selectedMedia);
            var extension = selectedMedia.substr( (selectedMedia.lastIndexOf('.') +1) );
            console.log("extension-----"+extension);
            if(extension=="mp3" || extension=="wav")
                {
                var musicLink="#musicPlay_page";
                var selectedLink = document.getElementById('mediaLink'); 
                selectedLink.href=musicLink;
                $('#musicPlay_page').add(playMusicList(selectedMedia));
                }                         
            else if(extension=="mp4")
                {
                var videoLink="#videoPlay_page";
                var selectedLink = document.getElementById('mediaLink'); 
                selectedLink.href=videoLink;
                $('#videoPlay_page').add(playVideoList(selectedMedia));
            }

        }); 
```

在上面的代码中，我需要根据我选择的媒体类型（mp3 或 mp4）导航到两个不同的页面。如果它是 mp3，那么它应该导航到 musicPlay 页面，如果它是 mp4，它应该导航到 videoPlay 页面。当我单击列表中的第一个文件时，它运行良好，即它导航到其他页面，但是当我单击列表的第一个元素以外的其他页面时它不会导航到其他页面，而是在当前页面本身播放文件，请解决这个问题。

```
function onsuccess(files) {
        $('#media_list').remove();

        var d='<div id="media_list">';
        d += '<ul data-role="listview" style="list-style: none outside none;padding: 0;">'
            +'<div style="font-weight:bold;color:black;">';
        for(var i = 0; i < files.length; i++) {
            console.log("File Name is " + files[i].name); // displays file name

            if(files[i].isDirectory == false){      
                d+='<li style="vertical-align: top;">'
                    +'<a href="" id="mediaLink">'
                    +'<img src="/images/musicPlay_logo.jpg" id="musicPlay"/>'
                    +files[i].name
                    +'</a><hr color="black" size =1 width=500></li>';

            }
        }
        d+= '</div>';
        d+= '</ul>';
        d+= '</div>';
        $("#media_content").append(d); 
```

}

这是我用来显示显示媒体文件列表的 html 内容的功能，您可以在“a”标签中看到我将 href 留空，以便在点击时进入点击功能，具体取决于我点击的文件格式转到 if 条件和页面应该打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T21:46:42.997

这个问题真的很简单。您使用的是 ID 而不是类。ID 是唯一的，并且不超过 1 个元素应该具有相同的 id。在这里，您多次使用`mediaLink`and id，而 JavaScript 只找到第一个匹配项，因为根据定义，不应该有更多匹配项。`musicPlay`将 id 更改为类，它们是可重用的标识符，如下所示：

```
d+='<li style="vertical-align: top;">'
    +'<a href="" class="mediaLink">'
    +'<img src="/images/musicPlay_logo.jpg" class="musicPlay"/>'
    +files[i].name
    +'</a><hr color="black" size =1 width=500></li>'; 
```

或者添加一些唯一的 ID 使其不会重复，例如循环计数器 ( `i`)，如下所示：

```
d+='<li style="vertical-align: top;">'
    +'<a href="" id="mediaLink-'+i+'">'
    +'<img src="/images/musicPlay_logo.jpg" id="musicPlay-'+i+'"/>'
    +files[i].name
    +'</a><hr color="black" size =1 width=500></li>'; 
```

然后更改您的点击处理程序以使用类/ID。如果没有相关的 HTML 代码，我只能这么说。如果您可以提供 HTML 代码，我可能会帮助您进一步更改处理程序的代码。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-18T07:26:10.577

而不是 if(extension=="mp3" || extension=="wav")

试试 if(extension.equals("mp3") || extension.equals("wav"))

# pentaho - 带有停靠在 x 轴下方的数据表的折线图

> ID：16076514
> 
> 赞同：0
> 
> 时间：2013-04-18T07:03:27.067
> 
> 标签：pentaho, dashboard, dashboard-designer

如何制作带有停靠在仪表板中 x 轴下方的数据表的 A 折线图，如下所示。

[http://www.advsofteng.com/gallery_line.html](http://www.advsofteng.com/gallery_line.html)

图表名称是 Product Line Global Revenue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:42:39.867

您是在 EE 版本还是 CE 中使用仪表板设计器？即CDE？

在 CDE 中应该很简单。只需创建一个数据源，然后使用几个面板创建一个布局。然后为表格添加表格组件，为折线图添加图表组件。

报告方法相同 - 没有单独的组件允许您同时执行这两项操作，因此只需使用相同的数据集并创建图表，然后创建表格。

如果您还没有使用 CDE / Ctools，那么我建议您看一下，通过市场或通过 ctools-installer.sh 安装

# php - 错误：[1] 0：{消息：“未定义的偏移量：1}

> ID：16076516
> 
> 赞同：-3
> 
> 时间：2013-04-18T07:03:31.247
> 
> 标签：php

我收到一个 php 错误`errors: [1] 0: { message: "Undefined offset: 1 (Error Number: 8), (File: /Users/akashpatel/Documents/iOS development/RideShare/RideShareAPI/src/frapi/library/Frapi/Controller/Api.php at line 299)" name: "PHP Notice error" at: "" }`。

下面是代码。

```
if (isset($_SERVER['HTTP_LOGIN'])) 
    {
        list($userId, $apiKey) = explode(':',  base64_decode($_SERVER['HTTP_LOGIN']));

        $this->setUserId($userId);
        $this->setApiKey($apiKey);

        //check against DB
        $sql = "SELECT * from user WHERE id=:userId AND apiKey=:apiKey";

        $stmt = $db->prepare($sql);

        $stmt->bindParam(':userId', $this->getUserId());
        $stmt->bindParam(':apiKey', $this->getApiKey());                        

        try 
        {
            $stmt->execute();
            $user = $stmt->fetchObject();
        }
        catch(PDOException $err)
        {
            echo $err->getMessage();
        }

        if ($user == null)
            throw new Frapi_Error('STATUS_FORBIDDEN');
    }
    else
    {
        $this->userName = false;
        $this->apiKey = false;

        throw new Frapi_Error(
            Frapi_Error::ERROR_INVALID_ACTION_REQUEST_NAME,
            Frapi_Error::ERROR_INVALID_ACTION_REQUEST_MSG,
            Frapi_Error::ERROR_INVALID_ACTION_REQUEST_NO,
            Frapi_Error::ERROR_INVALID_ACTION_REQUEST_HTTP_MSG
        );
    } 
```

提前致谢。

***编辑：*** 对不起大家。我传递了不正确的值。现在我使用正确的一个，但得到错误`ERROR_INVALID_ACTION_REQUEST`。可能是因为它去了别的地方。但不明白可能是什么原因。我编辑了代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:07:00.233

这意味着字符串没有`explode`分成两部分，并且结果数组没有偏移量`1`。除非您 2000% 确定要分配的数组中有那么多索引，否则您不应该`list()`-assign 变量。在这种情况下，它是你无法控制的，所以你最好先检查一下。

# android - 如何解决 infater 布局中的列表视图？

> ID：16076520
> 
> 赞同：1
> 
> 时间：2013-04-18T07:03:41.437
> 
> 标签：android, listview, layout-inflater

我是安卓新手。。

我正面临 listview 的标题问题..

如何实现列表视图的标题？帮我..

我试试这样。。

> ```
>  LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>       viewList = Nexttopic.this.getLayoutInflater().inflate(R.layout.activity_nexttopic, null);
>       dialogMarketList = new Dialog(Nexttopic.this);
>       dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
>       dialogMarketList.setTitle("TOPICS");
>       dialogMarketList.setContentView(viewList);
>       dialogMarketList.show();     
>       lvForDialog = (ListView) viewList.findViewById(R.id.List_view);
>       lvForDialog.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
>       ArrayAdapter<String> adapter = (new ArrayAdapter<String>(Nexttopic.this, R.layout.row_topic, R.id.child_row,tnamelist));
>       lvForDialog.setAdapter(adapter); 
> ```

它不工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:10:59.730

只需删除这个：

```
dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 编辑答案：

![在此处输入图像描述](https://i.stack.imgur.com/W3huM.png)

使用这种方式：

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        viewList = getLayoutInflater().inflate(R.layout.activity_main_, null);
        dialogMarketList = new Dialog(MainActivity.this);
        dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialogMarketList.setTitle("TOPICS");
        dialogMarketList.setContentView(viewList);
        dialogMarketList.show();
        ListView lvForDialog = (ListView) viewList.findViewById(R.id.listView1);

        header = inflater.inflate(R.layout.header, null);

        lvForDialog.addHeaderView(header);
        lvForDialog.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
        ArrayAdapter<String> adapter = (new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_list_item_1, a));
        lvForDialog.setAdapter(adapter); 
```

header.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="my title"
        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

**第二次编辑：**

## 滚动使用下面的代码时避免标题上升。

```
AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setTitle("my Title");
        builder.setIcon(getResources().getDrawable(R.drawable.ic_launcher));

        builder.setAdapter(new ArrayAdapter<String>(MainActivity.this,
                R.layout.row, R.id.child_row, items),
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub

                    }
                });

        builder.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:11:28.260

代码中的以下命令会禁用对话框中的标题：

```
dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

如果删除它，您应该会看到带有标题的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:12:50.767

您可能想向列表视图添加标题吗？

看看添加这个答案 [https://stackoverflow.com/a/10730786/1293704](https://stackoverflow.com/a/10730786/1293704)

可以找到许多教程如何添加标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:13:44.393

尝试添加`headerView`你的`listView`，你需要在打电话之前做`setAdapter()`

什么[文档](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)说/

```
public void addHeaderView (View v) 
```

*添加固定视图以显示在列表顶部。如果 addHeaderView 被多次调用，视图将按照添加的顺序出现。如果需要，使用此调用添加的视图可以成为焦点。注意：在调用 setAdapter 之前调用它。这样 ListView 就可以将提供的光标与一个也将考虑页眉和页脚视图的光标包装起来。

# java - Java 和 Eclipse IDE 中的 UTF-8 和字符

> ID：16076521
> 
> 赞同：1
> 
> 时间：2013-04-18T07:03:58.493
> 
> 标签：java, eclipse, utf-8, ascii

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:16:22.280

*   第一张印刷品：

    请参阅[public byte[] getBytes(Charset charset)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)：

    > 使用给定的字符集将此字符串编码为字节序列，并将结果存储到新的字节数组中。

*   第二个打印：

    参见[public String(byte[] bytes, Charset charset)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.nio.charset.Charset%29)：

    > 通过使用指定的字符集解码指定的字节数组来构造一个新的字符串。

*   第三印：

    请参阅[此链接](http://www.codetable.net/decimal/2309)：

    您正在打印它的*十进制代码*，即 2309。

上面提供的链接应该可以帮助您了解在每种情况下获得的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:11:21.177

理想情况下，您需要在任何 IDE 中的 Java 中键入字母关联的 unicode 数字“\uNNNN”。

对于单个字符，直接方法将是：

```
 char c = '\uNNNN';
System.out.println((int) c); 
```

更新：梵文的 Unicode 范围列表[http://www.unicode.org/charts/PDF/U0900.pdf](http://www.unicode.org/charts/PDF/U0900.pdf) 要在记事本/IDE 等中输入印地语，请搜索将键盘键映射到特定印地语字母和相关语法的软件标点符号。

# android - Android BitmapFactory decodeStream()

> ID：16076524
> 
> 赞同：0
> 
> 时间：2013-04-18T07:04:03.627
> 
> 标签：android, decode, bitmapfactory, sample-size

我有一个问题，我似乎无处可寻。这行代码是否：

```
final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;

    BitmapFactory.decodeStream(is, null, options); 
```

实际上意味着，正在下载该文件？Android 文档是这样说的：

> 使用 inJustDecodeBounds=true 解码以检查尺寸

**并且** ：

```
options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    BitmapFactory.decodeStream(is, null, options); 
```

意味着它实际上会下载更小的文件（**不下载为原始大小，然后复制到更小的位图**）。

清晰的例子：我有一些指向许多 2000 x 1500 图像的 url。通过解码这些文件并将它们加载到位图，如果我只需要 (200 x 150) 的缩略图，我是否需要有足够的内存来以全分辨率 (2000 x 1500) 下载文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T14:04:06.567

我知道另一个答案已经被接受为正确的答案，但为了清楚起见......

这一行`options.inJustDecodeBounds = true;`意味着调用`BitmapFactory.decodeStream(is, null, options);`不会获得位图信息，但会获得边界信息和 MimeType。

然后，您可以使用这些返回值和，通过将样本大小设置为由所需输出尺寸确定的给定比率`outWidth`，来获取位图数据的“重新采样”版本。`outHeight``outMimeType``options.inJustDecodeBounds = false;``options. inSampleSize = [int]`

有关更多信息，请参阅此信息丰富的页面：[有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html "有效加载大型位图")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:23:03.503

确实看起来文件正在被下载，效率部分来自内存中加载的位图是较小的位图（使用 inSampleSize 选项解码的位图）。

# bash - 将文件的输出重定向到写入命令

> ID：16076525
> 
> 赞同：0
> 
> 时间：2013-04-18T07:04:04.610
> 
> 标签：bash, unix, redirectstandardoutput

我正在尝试将文件的标准输出重定向到`write`命令并在其他用户的终端中显示文件的内容（颜色更改）。

要显示输出的文件的内容是（文件名是menu_sys.sh）

`echo -e "\t\t\033[4;41m Welcome to Internal Messaging System \033[0;0m"`

当我使用代码时`$ sh menu_sys.sh | write 680613` ，输​​出是`^[[4;41m Welcome to Internal Messaging System^[[0;0m`

尝试使用标准输出重定向，`&1>`但这也不起作用

但我需要输出处于格式化状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:06:13.810

如果 write 命令允许将任意控制字​​符发送到另一个用户的终端，那将是一个严重的安全问题。事实上，它净化了要发送的消息的内容，以使控制字符无害。这就是为什么您在其他用户的终端上将 ESC 控制字符视为两个 ASCII 字符“^”和“[”。

顺便说一句：正如[Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)提到的，“文件的标准输出”没有任何意义。实际上，您似乎正在做的是将命令的标准输出 ( `echo`) 发送到`write`命令，而不是“文件的标准输出”。或者，如果您打算将文件的*内容*发送给其他用户（使用类似的命令`write 680613 < somefile`），那也可以。

# paypal - Receiving Response CSCMATCH=Y while entering 1-digit CSC for Test Credit Card Transaction in PayPal Payflow link

> ID：16076529
> 
> 赞同：0
> 
> 时间：2013-04-18T07:04:21.093
> 
> 标签：paypal, payflowlink

In Setup of PayPal Manager,
I have set up in security options column,
CSC = Full
I have entered 1-digit CSC number
I am receiving CSCMATCH=Y for Test Credit Transaction in PayPal Payflow link

But,I think , transaction should be failed while entering 1-digit CSC number. CSC number should be 3-digit or 4-digit number
Can you please explain me how to test,whether the CSC verification works fine or not?
Please guide me.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:45:00.060

测试时，不检查输入时 CSC 是 3 位还是 4 位。它只是传递给模拟器。例如，您输入的“9”值被识别为“009”。但是，一旦您上线，例如 9 的值将作为失败返回，因为它实际上将其传递给处理器和发卡银行。

如果要触发 CSC 故障，可以输入“999”作为值。开发人员指南中列出了您可以输入以触发特定 CSC 匹配的值。

# php - 使用 Zend Gdata Youtube API 获取视频上传日期

> ID：16076531
> 
> 赞同：1
> 
> 时间：2013-04-18T07:04:24.063
> 
> 标签：php, youtube, youtube-api, zend-gdata

我正在尝试获取特定用户的视频列表，其中包含视频的所有详细信息（标题、描述、日期、标签......）我可以获得几乎所有我需要的东西，但无法弄清楚如何获取上传日期。我尝试使用 getVideoRecorded() 和 getRecorded()，但都没有返回任何内容。

我似乎在 Google 上找不到与此相关的任何内容，我能找到的只是类引用，它们告诉我必须使用 getVideoRecorded 或 getRecorded，但仅此而已。

难道我做错了什么？我怎样才能得到上传日期？

当前代码：

```
$authenticationURL= 'https://www.google.com/accounts/ClientLogin';
$httpClient = 
  Zend_Gdata_ClientLogin::getHttpClient(
              $username = $yt_username,
              $password = $yt_password,
              $service = 'youtube',
              $client = null,
              $source = '', // a short string identifying your application
              $loginToken = null,
              $loginCaptcha = null,
              $authenticationURL);
$yt = new Zend_Gdata_YouTube($httpClient);
$feed = $yt->getUserUploads($yt_username);
foreach($feed as $item)
                {
                    echo "<div>";
                    echo "<h4>title: " . $item->getVideoTitle() . "</h4>";
                    echo "<p>id: " . $item->getVideoId() . " | ";
                    echo "upload date: " . $item->getVideoRecorded() . "</p>";
                    echo "<p>description: " . $item->getVideoDescription() . "</p>";
                    echo "<p>tags: " . implode(", ", $item->getVideoTags()) . "</p>";
                    echo "</div>";
                    echo "<hr>";
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:21:58.723

您可以尝试从以下 xml 中提取 <published> 或 <updated> 标签：

```
http://gdata.youtube.com/feeds/api/videos/{$videoId} 
```

# cron - Quartz Document and Wiki - Contradict on Cron Expression for Day of Month field

> ID：16076533
> 
> 赞同：3
> 
> 时间：2013-04-18T07:04:26.853
> 
> 标签：cron, quartz-scheduler, cronexpression

## Here in wiki

[http://en.wikipedia.org/wiki/CRON_expression#CRON_expression](http://en.wikipedia.org/wiki/CRON_expression#CRON_expression)

**under subheading "Predefined scheduling definitions"**

Its mentioned that "day of week (0 - 7) (0 or 7 are Sunday, or use names)"

its referring 0 or 7 as Sunday

**and under subheading "CRON expression"**

its referring "the last Friday" ("5L") of a given month. In the day-of-month field,

## but the Quartz Documentation

here [http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)

Contradicts things its saying

"Day of week 1-7 or SUN-SAT" (its not from 0-7 as mentioned in wiki)

**and in the Special Characters subheading**

its referring "6L" means "the last friday of the month" (In wiki its 5L)

So my question is

1.  Which one is correct ?
2.  Are both of these are correct in their own context ? (meaning quartz for only quartz and in wiki for unix based os)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:56:46.017

是的，两者都是正确的。维基百科文章提到了在 Unix 及其衍生产品中实现的 cron。

Quartz 调度器有它自己的“类似 cron”的实现，但并不完全兼容。

我会在您的表达式中使用星期几的名称以避免任何混淆。

# ruby-on-rails-3.2 - 选中自动运行的 WebConnector，将重复发票插入带有 Rails 3.2.9 的 QuickBooks

> ID：16076538
> 
> 赞同：0
> 
> 时间：2013-04-18T07:04:54.610
> 
> 标签：ruby-on-rails-3.2, quickbooks, autorun, duplicates

我正在使用 Web 连接器将发票添加到 QuickBooks v13。如果发票尚未添加到 QuickBooks，我还添加了您提供的添加发票的逻辑。

当我设置了 Web 连接器的 AutoRun 选项时，它会自动调用 API。如果我只有一张发票要添加，那么第一次运行它就可以正常工作。但是对于 webconnector 的第二次调用，QuickBooks 中发票的搜索结果会发送 statusCode="0" 的记录，这意味着它已经存在，但它仍然再次将相同的发票添加到 QuickBooks。我无法多次限制添加同一张发票

以下是将发票插入 QuickBooks 的 Rails 代码。我在 Rails 应用程序中使用 qbwc gem 发送 QBXML 请求并解析响应

```
def api

  if request.get?

    render :nothing => true

    return

  end

  if params["Envelope"]["Body"].keys.first =="authenticate"

    add_invoice #add invoice method will be called to search/add invoice

  end

  req = request

  Rails.logger.info "=== #{ params["Envelope"]["Body"].keys.first}  ==="

  res = QBWC::SoapWrapper.route_request(req)

  Rails.logger.info render :xml => res, :content_type => 'text/xml'

end 
```

#Action 搜索/添加发票

```
def add_invoice

  #searching the invoice from QuickBooks

  QBWC.add_job('search_invoice') do

   '<QBXML>

      <QBXMLMsgsRq onError="continueOnError">

        <InvoiceQueryRq requestID="1">

          <RefNumber>58869</RefNumber>

        </InvoiceQueryRq>

      </QBXMLMsgsRq>

    </QBXML>'

  end

  #response of the search result

  QBWC.jobs['search_invoice'].set_response_proc do |r|

    if r["xml_attributes"]["statusCode"] == "500" || r["xml_attributes"]["statusCode"] == "1"

      #Add the invoice

      QBWC.add_job('add_invoice') do

        '<QBXML>

       <QBXMLMsgsRq onError="continueOnError">

       <InvoiceAddRq requestID="58869">

       <InvoiceAdd>

       <CustomerRef>

       <ListID>8000000D-1365397507</ListID>

       <FullName>john.doe@test.com</FullName>

       </CustomerRef>

       <TxnDate>2013-04-08</TxnDate>

       <RefNumber>58869</RefNumber>

       <BillAddress>

         <Addr1>N Dallas Parkway</Addr1>

         <City>Addison</City>

         <State>TX</State>

         <PostalCode>75001</PostalCode>

         <Country>United States</Country>

       </BillAddress>    

           <ShipAddress>

         <Addr1>N Dallas Parkway</Addr1>

         <City>Addison</City>

         <State>TX</State>

         <PostalCode>75001</PostalCode>

         <Country>United States</Country>

       </ShipAddress>

         <IsPending>true</IsPending>

         <PONumber>Test QB</PONumber>

         <TermsRef>

                  <FullName>VISA</FullName>

                </TermsRef>

         <ShipDate>2013-04-15</ShipDate>

         <InvoiceLineAdd>

         <ItemRef>

         <FullName>test Invoice</FullName>

         </ItemRef>

         <Desc>test Description</Desc>

         <Quantity>1</Quantity>

         <Rate>1000</Rate>

         </InvoiceLineAdd>

       </InvoiceAdd>

       </InvoiceAddRq>

       </QBXMLMsgsRq>

        </QBXML>'

      end

    end

  end  

end 
```

我已将 Web 连接器的 AutoRun 选项设置为 5 分钟，这样它就会以 5 分钟的间隔自动运行并调用 API。

假设带有 RefNumber#58869 的发票是新的，并且不在 QuickBooks 中。

当 WebConnector 调用 API 时，搜索带有 RefNumber#58869 的发票的 QBXML 请求将被发送到 QuickBooks。它给出了以下响应

```
<?xml version=\"1.0\" ?>\n<QBXML>\n<QBXMLMsgsRs>\n<InvoiceQueryRs requestID=\"1\" statusCode=\"500\" statusSeverity=\"Warn\" statusMessage=\"The query request has not been fully completed. There was a required element ("58869" that could not be found in QuickBooks.\" />\n</QBXMLMsgsRs>\n</QBXML>\n" 
```

然后发票成功添加到 QuickBooks

当 webconnector 将在 5 分钟间隔后调用 api 时，将向 QuickBooks 发送 QBXML 请求以搜索带有 RefNumber#58869 的发票。它给出了以下响应

```
<?xml version=\"1.0\" ?>\n<QBXML>\n<QBXMLMsgsRs>\n<InvoiceQueryRs requestID=\"1\" statusCode=\"0\" statusSeverity=\"Info\" statusMessage=\"Status OK\">\n<InvoiceRet>\n<TxnID>15F-1365397789</TxnID>\n<TimeCreated>2013-04-08T10:39:49+05:30</TimeCreated>\n<TimeModified>2013-04-08T10:39:49+05:30</TimeModified>\n<EditSequence>1365397789</EditSequence>\n<TxnNumber>62</TxnNumber>\n<CustomerRef>\n<ListID>8000000D-1365397507</ListID>\n<FullName>john.doe@test.com</FullName>\n</CustomerRef>\n<ARAccountRef>\n<ListID>8000001E-1364292331</ListID>\n<FullName>John Doe</FullName>\n</ARAccountRef>\n<TemplateRef>\n<ListID>80000001-1364291996</ListID>\n<FullName>Intuit Product Invoice</FullName>\n</TemplateRef>\n<TxnDate>2013-04-08</TxnDate>\n<RefNumber>58869</RefNumber>\n<BillAddress>\n<Addr1>16001 N Dallas Parkway</Addr1>\n<City>Addison</City>\n<State>TX</State>\n<PostalCode>75001</PostalCode>\n<Country>USA</Country>\n</BillAddress>\n<BillAddressBlock>\n<Addr1>16001 N Dallas Parkway</Addr1>\n<Addr2>Addison, TX 75001</Addr2>\n<Addr3>United States</Addr3>\n</BillAddressBlock>\n<ShipAddress>\n<Addr1>16001 N Dallas Parkway</Addr1>\n<City>Addison</City>\n<State>TX</State>\n<PostalCode>75001</PostalCode>\n<Country>USA</Country>\n</ShipAddress>\n<ShipAddressBlock>\n<Addr1>16001 N Dallas Parkway</Addr1>\n<Addr2>Addison, TX 75001</Addr2>\n<Addr3>United States</Addr3>\n</ShipAddressBlock>\n<IsPending>true</IsPending>\n<IsFinanceCharge>false</IsFinanceCharge>\n<PONumber>United Way</PONumber>\n<TermsRef>\n<ListID>8000000C-1364361757</ListID>\n<FullName>Visa</FullName>\n</TermsRef>\n<DueDate>2013-04-08</DueDate>\n<ShipDate>2013-04-15</ShipDate>\n<Subtotal>67.24</Subtotal>\n<ItemSalesTaxRef>\n<ListID>80000012-1364967363</ListID>\n<FullName>Sales Tax</FullName>\n</ItemSalesTaxRef>\n<SalesTaxPercentage>0.00</SalesTaxPercentage>\n<SalesTaxTotal>0.00</SalesTaxTotal>\n<AppliedAmount>0.00</AppliedAmount>\n<BalanceRemaining>67.24</BalanceRemaining>\n<IsPaid>false</IsPaid>\n<IsToBePrinted>true</IsToBePrinted>\n<IsToBeEmailed>false</IsToBeEmailed>\n<CustomerSalesTaxCodeRef>\n<ListID>80000001-1364291997</ListID>\n<FullName>Tax</FullName>\n</CustomerSalesTaxCodeRef>\n</InvoiceQueryRs>\n</QBXMLMsgsRs>\n</QBXML>\n 
```

这里的“statusCode”为“0”表示响应表明发票已经存在于 QuickBooks 中。

但仍将相同的发票再次添加到 QuickBooks。而且我找不到任何解决方案来限制多次添加同一张发票。

我跟踪了“statusCode”，发现 QuickBooks 正在发送正确的状态码。我还在订单表中维护一个标志，以跟踪是否已为该订单添加到 QuickBooks 的发票。我认为我的问题出在 WebConnector 上。当 WebConnector 的 AutoRun 选项处于活动状态时，如果没有订单要添加到 QuickBooks，它会一次又一次地添加最后一个订单的发票。

# jquery - jquery幻灯片+幻灯片类型中的快速加载

> ID：16076540
> 
> 赞同：0
> 
> 时间：2013-04-18T07:04:58.780
> 
> 标签：jquery, slideshow

我不是专业人士，`jquery`但我正在制作的网站上学习，并且我正在尝试对其进行编辑以仅用于学习目的。以下是网站链接。

www.egypt-online.co

我有一些问题，我希望我能得到答案。

1.  投资组合幻灯片的名称是什么？
2.  当我按下箭头以显示下一张图像时，我想更改效果

[http://bit.ly/Z56izf](http://bit.ly/Z56izf)

3-如何使图像加载速度快，因为当我按下任何类别时，加载图像需要一些时间，所以我问是否有什么可以让它加载得更快

4-我想在投资组合中添加一些底部，这样看起来像这样

[http://bit.ly/ZzazHx](http://bit.ly/ZzazHx)

我只是想知道这些事情的运作方式或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:14:30.540

1.你正在使用 jQuery Cycle 插件

2.如果你想改变效果，你可以去[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/) 并像演示一样改变'fx'属性

[http://bit.ly/12oMQOt](http://bit.ly/12oMQOt)

3.因为你的图像很大。你应该优化你的图像以快速加载

4 ...

# javascript - 快递，猫鼬将参数从 1 app.get 传递到另一个

> ID：16076559
> 
> 赞同：0
> 
> 时间：2013-04-18T07:05:49.550
> 
> 标签：javascript, express

我的问题是在运行第二个 app.get 之前我无法弄清楚如何获取“name”参数。第一个（app.get /）让我在集合之间进行选择，我将“name”参数传递给第二个应用程序获取，然后我可以在第二个应用程序.get 中使用 req.params.name 获取...

问题是我在第二个 app.get 之前需要那个参数，因为我需要定义一个模式并“编译”一个模型，这只能完成一次。当我单击一次时可以工作，但是当我再次单击时出现“无法覆盖模型，已编译”错误。每次我加载第二个 app.get 时，我通过打开一个新连接绕过了这个问题（我知道不好）。

因此，如果有人知道如何获取该“名称”参数（在实际的第二个 app.get 启动之前，我作为 req.param 传递给第二个 app.get 的东西，将不胜感激）

我的代码：（2天前开始学习节点，除了express和mongoose，更不用说javascript sp对我来说很容易：p）

```
var express = require('express')
,routes = require('./routes')
,user = require('./routes/user')
,http = require('http')
,path = require('path')
,mongoose = require("mongoose");

var app = express();

// all environments
app.set('port', process.env.PORT || 3005);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));

// development only
if ('development' == app.get('env')) {
  app.use(express.errorHandler());
}

conn = mongoose.createConnection("mongodb://10.42.1.31/dominik");

app.get ("/", function(req, res) {
    conn.db.collectionNames(function (err, docs) {
      res.render("collections", {names:docs});
  });
});

app.get("/collections/:name", function (req,res) {
 conn = mongoose.createConnection("mongodb://10.42.1.31/dominik");
  var collName = req.params.name;
  collName = collName.charAt(0).toUpperCase()+collName.slice(1);
  collName = collName.substring(0, collName.length-1);
  var schema = new mongoose.Schema({});
  var myModel= conn.model(collName, schema);

 myModel.find({},function(err, docs) {
   res.json("documents",docs);
  });
});

http.createServer(app).listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
}); 
```

# java - java.lang.NumberFormatException: For input string: "9813023219"

> ID：16076560
> 
> 赞同：0
> 
> 时间：2013-04-18T07:05:53.133
> 
> 标签：java, string, processing

I'm using serial event to pass rfid tags read from arduino to processing. In the serial event I am parsing and converting the variable to an integer. This working for the most part, only one rfid card keeps throwing an error.

```
void serialEvent(Serial thisPort)
{
  String inString = thisPort.readString();
  if(inString != null)
  {
    Serial connect1 = (Serial) connections.get(0);
      if(thisPort == connect1 )
      {
        Chair chair = (Chair) chairs.get(0);
        if(inString.contains("UID Value:"))
        {
          int p2 = inString.indexOf(":");
          String pString = inString.substring(p2+1); 
          String pString2 = pString.substring (0,10);
          //println(pString2);
          pString2.trim();

          println("String length: " + pString2.length());

          chair.setRFID(pString2);
          println(pString2);
        }

      }
  }
}

void setRFID(String r)
  {  
     try{
       this.rfid = Integer.parseInt(r);
     }
     catch (Exception e) {
      e.printStackTrace();
     }

     //set position of person to chair
     for (Person person : people)  
     { 

        //println(this.rfid != chair.rfid);
        //println(this.rfid + "," +  "person: " + person.ID + "," + person.RFID);
        if(this.rfid == person.RFID)
        {
          person.setPos(this.pos);
          this.personID = person.ID;
        }
     }
  } 
```

The try-catch is not working, and this line is causing the problem this.rfid = Integer.parseInt(r);. I thought it might be a malformed string but the strings seems ok. Here the results of checking string consistency: String length: 10 1811524219 String length: 10 1942302231 String length: 10 1010368230 String length: 10 9813023219

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:09:01.927

`9813023219` is an invalid `Integer` as it is greater than [`Integer.MAX_VALUE`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE), which is `2147483647`. Use [`Long`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html) instead, who's [`MAX_VALUE`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#MAX_VALUE) is `9223372036854775807`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:09:13.343

You have exceeded the maximum value for an integer. I suggest using a `long` instead.

Check for this by displaying `Integer.MAX_VALUE` - no int can exceed this value.

`java.long.NumberFormatException` is thrown when a given string does not match the expected layout.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:08:31.937

The number `9813023219` is out of range for `int` data type, try changing your data type to `long` and it should work.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T07:11:27.633

9813023219 is Invalid Integer, You can use Long for your requirement. If RFID is not exceeding Long.MAX_VALUE.

# knockout.js - 无法解析 Knockout.js 中的绑定

> ID：16076562
> 
> 赞同：0
> 
> 时间：2013-04-18T07:06:00.017
> 
> 标签：knockout.js

面对常见的“绑定问题”。下面是视图模型

```
 function DetailListViewModel() {

    this.details = new Details();
    this.productdetails = ko.observableArray([]);

    this.show = function (item) {
        $.getJSON("Products.json", {}, function (data) {
            this.productdetails.push(this.details.init(data));
        });
    };
    }

    function Details() {
    this.author = ko.observable();
    this.text = ko.observable();
    this.init = function (temp) {
        return {
            author: temp.Author,
            text: temp.Text
        };
    };
    }

    var TaskListViewModel = {    
    tasks: ko.observableArray([]),
    addTask: function () {
    self.tasks.push(new Task({ BomID: this.BomID() }, { CreatedBy: this.CreatedBy() }));
    },
    ShowProductInfo: function (item) {       
        DetailListViewModel.show(item);
    }
    };

    $(function () {    
    $.getJSON("Tasks.json", function (allData)       {
            TaskListViewModel.tasks.push(toKoObserable($.parseJSON(allData.GetDataResult).RESULT.DOCUMENT));
        ko.applyBindings(TaskListViewModel);
        var DetailListViewModel = new DetailListViewModel();
        ko.applyBindings(DetailListViewModel);
    });

    function toKoObserable(blog) {
        return {
            BomID: ko.observable(blog[0].BOMID),
            CreatedBy: ko.observable(blog[0].CreatedBy)
        };
    }
}); 
```

我收到此错误

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: author is not defined;
Bindings value: text:author 
```

我的 HTML 是：

```
<h3  data-bind="text:author">/h3> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:10:01.910

我很确定，如果您更改细节实现，一切都应该按您的预期工作。我不确定为什么您的详细信息列表包含一个详细信息实例，然后您创建了一个可观察的详细信息数组重用该对象。从设计的角度来看，这似乎并不正确。此外，您的 init 不会返回可观察的值。尝试更改为以下内容：

```
function Details(author, text) {
    this.author = ko.observable(author);
    this.text = ko.observable(text);
} 
```

然后，当您填充详细信息列表时，您将执行以下操作：

```
function DetailListViewModel() {
    this.productdetails = ko.observableArray([]);

    this.show = function (item) {
        $.getJSON("Products.json", {}, function (data) {
            this.productdetails.push(new Details(data.Author, data.Text));
        });
    };
} 
```

# eclipse - Eclipse 定期重置设置

> ID：16076566
> 
> 赞同：0
> 
> 时间：2013-04-18T07:06:12.770
> 
> 标签：eclipse

Eclipse Juno 会定期重置其所有设置 (.metadata)。它从一个清晰的桌面开始，就好像它是最近安装的一样。所以我需要一两周恢复一次.metadata。

为什么会这样？这是一个已知的 Eclipse 问题吗？

更新

每次我关闭第二个显示器时都会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:49:59.680

不要将 .metadata 本身置于版本控制之下。仅将工作区的内容（即项目）置于版本控制之下。通过在结帐期间操作 .metadata 目录，您实际上是在自己破坏工作空间。

元数据目录*不能*被设计共享，这会导致麻烦。请参阅[在 Git/Mercurial 中我可以安全地忽略哪些 Eclipse 项目 .metadata？](https://stackoverflow.com/questions/4278601/what-of-eclipse-project-metadata-can-i-safely-ignore-in-git-mercurial)或者[哪些 Eclipse 文件属于版本控制？](https://stackoverflow.com/questions/337304/which-eclipse-files-belong-under-version-control)有关此的更多指示。

# html - Jquery .append() & Html.Helper

> ID：16076569
> 
> 赞同：4
> 
> 时间：2013-04-18T07:06:20.343
> 
> 标签：html, asp.net-mvc, jquery, append

有没有办法将 html.helper 放在 .append() 函数中。

```
success: function (html) { $("#Resultaatsgebied").append(' <li>@Html.TextBoxFor(item => Model.RG1)<ul id="Concretisering" class="subList"><li>@Html.TextBoxFor(item => Model.RG1sub1)</li></ul>@Html.ActionLink("+", "index", null, new { id = "addConcretisering" })</li>'); } 
```

这有效，但只是作为字符串，而不是作为控件

**编辑：**

这现在有效，但生成的 actionlink 没有。在我看来，我有相同的 actionlink 默认值，并且它在那里工作。但是对于生成的，我认为他只是不执行 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:02:48.047

如果您的代码在剃刀视图中，您可以将剃刀代码放在括号中，如下所示：

```
success: function (html) { 
    $("#Resultaatsgebied").append(' <li>@(Html.TextBoxFor(item => Model.RG1))<ul id="Concretisering" class="subList"><li>@(Html.TextBoxFor(item => Model.RG1sub1))</li></ul>@(Html.ActionLink("+", "index", null, new { id = "addConcretisering" }))</li>'); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-25T13:45:01.560

在 MVC 5 razor 或最新版本中，此配额 -->**`'`**不再起作用。因此，使用**（`）**标记来完成你的工作

```
success: function (html) {     
   $("#Resultaatsgebied").append(` 
      <li>@Html.TextBoxFor(item => Model.RG1)    
           <ul id="Concretisering" class="subList">     
                <li>@Html.TextBoxFor(item => Model.RG1sub1)</li>   
           </ul>      
           @Html.ActionLink("+", "index", null, new { id = "addConcretisering" })    
      </li>
  `);    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:10:25.097

我认为你不能用纯 Javascript 做到这一点。为什么不将 AJAX 返回的数据设置为 HTML，你可以为任何你想要的 div 设置它。例如在你的情况下：

```
$("#Resultaatsgebied").html(html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:30:06.960

可能是这样更好的串联（*不确定，但您可以尝试*）：

```
success: function (html) { 
    $("#Resultaatsgebied").append(
          '<li>' + @Html.TextBoxFor(item => Model.RG1) + 
          '<ul id="Concretisering" class="subList"><li>' + 
             @Html.TextBoxFor(item => Model.RG1sub1) + 
          '</li></ul>' + 
             @Html.ActionLink("+", "index", null, new { id = "addConcretisering" }) + 
          '</li>'); 
} 
```

# sql-server - Microsoft SQL Server SELECT 语句

> ID：16076572
> 
> 赞同：0
> 
> 时间：2013-04-18T07:06:43.107
> 
> 标签：sql-server, vb.net, select

我需要帮助`ReceiptNO`从数据库表中检索列并将其保存到`TextBox`or`Label`以供参考。

代码：

```
Dim da2 As New SqlDataAdapter
da2.SelectCommand = New SqlCommand("SELECT RecepitNO FROM Receipt WHERE (PaidFor=@PaidFor AND RegNO=@RegNO)")
da2.SelectCommand.Parameters.Add("@paidFor", SqlDbType.VarChar).Value = cbMonth.Text
da2.SelectCommand.Parameters.Add("@RegNO", SqlDbType.Int).Value = lblRegNO.Text

cn.Open()
da2.Update(ds.Tables("Receipt"))
'da2.SelectCommand.ExecuteNonQuery()
da2.SelectCommand.ExecuteReader()
cn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:41:49.980

您需要使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)，然后启动循环以读取返回的值
此示例将在 ReceiptNO 是文本字段的情况下工作

```
cn.Open()
Dim reader = da2.SelectCommand.ExecuteReader()
while reader.Read()
    textBox1.Text = reader("ReceiptNO").ToString()
End While 
```

或者，如果您确定查询返回零或仅返回一条记录，并且您只对 ReceiptNO 字段感兴趣，那么您可以使用 ExecuteScalar

```
Dim cmd = New SqlCommand("SELECT RecepitNO FROM Receipt WHERE (PaidFor=@PaidFor AND RegNO=@RegNO)")
cmd.Connection = cn
cmd.Parameters.Add("@paidFor", SqlDbType.VarChar).Value = cbMonth.Text
cmd.Parameters.Add("@RegNO", SqlDbType.Int).Value = lblRegNO.Text
cn.Open()
Dim result = cmd.ExecuteScalar()
if result IsNot Nothing Then
    textBox1.Text = result.ToString()
End If 
```

[这里是 ExecuteScalar 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# bash - Expand a variable inside `` command

> ID：16076577
> 
> 赞同：0
> 
> 时间：2013-04-18T07:07:00.763
> 
> 标签：bash

I could not find the exact reference to what I'm doing...

I have the following script that does not expand the variable inside the command:

```
#!/bin/bash

name="my name"
`convert -pointsize 250 -font /usr/share/fonts/truetype/msttcorefonts/impact.ttf -fill black -draw 'text 330,900 "$name"' tag.jpg name_my.jpg` 
```

This results in an image that has the text $name instead of the content of name.

I actually need to read lines from a file and rund the command on each name so my real script is(has the same problem):

```
arr=(`cat names.txt`)
for (( i=0; i<${len}; i+=2 ));
do
        `convert -pointsize 250 -font /usr/share/fonts/truetype/msttcorefonts/impact.ttf -fill black -draw 'text 330,900 "$(${arr[i]} ${arr[i+1]})"' tag.jpg name_${arr[i]}.jpg`
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:17:06.483

您的问题是单引号 ( `''`) 而不是反引号。因为`$name`在它们里面，所以它不会被扩展。相反，您应该使用双引号，并且可以像这样转义内部引号：

```
`convert -pointsize 250 -font /usr/share/fonts/truetype/msttcorefonts/impact.ttf -fill black -draw "text 330,900 \"$name\"" tag.jpg name_my.jpg` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:21:38.080

你有一个逃避问题。要么使用带有反斜杠的正确转义，要么确保 $args 没有被单引号“保护”。例如

```
name="bla"
# using escape character \
value1="foo \"${name}\""
# putting single-quotes inside double-quotes
value2="foo '"${name}"'" 
```

为了更好地了解发生了什么，请尝试将问题分解为多个较小的问题。例如，在转换中使用之前创建带有所有扩展的“draw”命令

```
name="my name"
draw="text 330, 900 '"${name}"'"
convert -pointsize 250 -fill black -draw "${draw}" tag.jpg name_my.jpg 
```

# c++ - 在 rgb 图像 opencv 上应用二进制阈值滤波器

> ID：16076579
> 
> 赞同：0
> 
> 时间：2013-04-18T07:07:04.260
> 
> 标签：c++, opencv

我有一个通过阈值处理获得的二进制 Mat 。我需要在 rgb Mat 上应用这个二进制 Mat。opencv 中是否有在 rgb 图像上应用二进制掩码的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:22:34.217

只需使用[bitwise_and](http://opencv.willowgarage.com/documentation/cpp/operations_on_arrays.html#bitwise-and "按位和")函数：

```
Mat dest;
bitwise_and(rgbMat, binaryMat, dest); 
```

它应该可以工作，但如果没有，只需使用[cvtColor](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor "cvtColor")函数转换`binaryMat`为 BGR：

```
cvtColor(binaryMat, binaryMat, CV_GRAY2BGR); //but this before bitwise_and function 
```

# ruby - Ruby implementation for ROC curve

> ID：16076582
> 
> 赞同：1
> 
> 时间：2013-04-18T07:07:23.120
> 
> 标签：ruby, algorithm, roc

I'm currently try to implement the calculation of a ROC curve in ruby. I tried to transform the pseudocode from [http://people.inf.elte.hu/kiss/13dwhdm/roc.pdf](http://people.inf.elte.hu/kiss/13dwhdm/roc.pdf) (see 6th site, chapter 5, Algorithm 1 "Efficient Method for generating ROC points") into Ruby code.

I worked out a simple example, but I'm always getting values over `1.0` for recall. I think I misunderstood something, or made a mistake at programming. Here is what I gor so far:

```
# results from a classifier
# index 0: users voting
# index 1: estimate from the system
results = [[5.0,4.8],[4.6,4.2],[4.3,2.2],[3.1,4.9],[1.3,2.6],[3.9,4.3],[1.9,2.4],[2.6,2.3]]
# over a score of 2.5 an item is a positive one
threshold = 2.5
# sort by index 1, the estimate
l_sorted = results.sort { |a,b| b[1] <=> a[1] }

# count the real positives and negatives
positives, negatives = 0, 0
positives, negatives = 0, 0
l_sorted.each do |item|
  if item[0] >= threshold
    positives += 1
  else
    negatives += 1
  end
end

fp, tp = 0, 0
# the array that holds the points
r = []
f_prev = -Float::INFINITY

# iterate over all items
l_sorted.each do |item|
  # if the score of the former iteration is different,
  # add another point to r
  if item[1]!=f_prev
    r.push [fp/negatives.to_f,tp/positives.to_f]
    f_prev = item[1]
  end
  # if the current item is a real positive
  # (user likes the item indeed, and estimater was also correct)
  # add a true positive, otherwise, add a false positve
  if item[0] >= threshold && item[1] >= threshold
    tp += 1
  else
    fp += 1
  end
end

# push the last point (1,1) to the array
r.push [fp/negatives.to_f,tp/positives.to_f]

r.each do |point|
  puts "(#{point[0].round(3)},#{point[1].round(3)})"
end 
```

Based on a `results` array of arrays, the code tries to calculate the points. I'm not sure what the `f_prev` is all about. Is in the `f_prev` the score of the classifier stored, or only if it's `true` or `false`?

It would be awesome, if someone could have a quick look at my code, and help me find my mistake. thx!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:14:04.767

我的第二个答案是分析您的代码，并指出我认为您在哪里犯了一些错误或感到困惑。我假设您想要重现与链接 PDF 的第 864 页上看到的图表相似的图表。

类似 p864 上的 ROC 图是一个图表，显示了您的预测模型中假阳性率和真阳性率之间的可用折衷。要查看所有可能的折衷方案，您需要访问阈值会产生影响的所有数据点，并绘制它们的误报率与真报率。

您的第一个困惑似乎是您有一个“用户投票”浮动分数，而不是一个真/假类别。PDF 中的示例已确定用于绘制 ROC 的 p/n 案例。

```
# results from a classifier
# index 0: users voting
# index 1: estimate from the system
results = [[5.0,4.8],[4.6,4.2],[4.3,2.2],[3.1,4.9],[1.3,2.6],[3.9,4.3],[1.9,2.4],[2.6,2.3]] 
```

所以我认为你最好有

```
results = [[true,4.8],[true,4.2],[true,2.2],[true,4.9],[false,2.6],[true,4.3],[false,2.4],[true,2.3]] 
```

*在*开始绘制 ROC 之前。内联进行此转换会很好，但您需要将如何生成测试数据的问题与 ROC 图分开 - 例如，您的用户分数和机器估计分数在同一尺度上的事实是无关紧要的。

这导致了`threshold`变量。您可以使用 eg`2.5`来转换您的用户数据，但这与您的 ROC 图无关。事实上，要获得完整的 ROC 图，您需要测试多个阈值值，以了解它们如何影响真假阳性率。

```
# over a score of 2.5 an item is a positive one
threshold = 2.5 
```

* * *

这会将值按相反的顺序排序，得分最高的项目在前。你可以做任何一种方式，但对我来说，这意味着你想从一个高阈值开始（你所有的分数都预测`false`），并且在`[0.0,0.0]`图表上的位置

```
# sort by index 1, the estimate
l_sorted = results.sort { |a,b| b[1] <=> a[1] } 
```

下面的代码看起来足够准确，但实际上它只是将测试的正数和负数相加，所以不应该混淆阈值的概念：

```
# count the real positives and negatives
positives, negatives = 0, 0
positives, negatives = 0, 0
l_sorted.each do |item|
  if item[0] >= threshold
    positives += 1
  else
    negatives += 1
  end
end 
```

一种更好的 Ruby 放置相同逻辑的方式，假设您将用户分数替换为其他地方的真/假值可能是

```
positives = l_sorted.select { |item| item[0] }.count
negatives = l_sorted.count - positives 
```

* * *

这看起来不错，你确实从 [0.0,0.0] 开始

```
fp, tp = 0, 0
# the array that holds the points
r = [] 
```

* * *

但是，这看起来像起始阈值

```
f_prev = -Float::INFINITY 
```

所以在我看来，逻辑上是积极`Float::Infinity`的，这样你所有的预测都是最初的`false`（因此在逻辑上必须是，`fp`因为根本不允许）。不过没关系，因为您不使用该值。`tp``0``p`

* * *

在循环内部，代码正在跟踪如果阈值设置为刚好高于当前项目，则总误报和真阳性将是多少。当您将这个标准降低到具有相同分数的项目组时，它们将预测正值（无需测试这个与`threshold`变量，这会让您感到困惑）。您所要做的就是将这些正值分类`tp`或`fp`计数。检查与对比`f_prev`只是帮助对相似的项目进行分组，如果 3 个预测具有相同的分数，则仅绘制一个点。

```
# iterate over all items
l_sorted.each do |item|
  if item[1]!=f_prev
    # Plot a point, assuming all predictions with a score equal or lower than current
    # item are thresholded out as negative.
    r.push [fp/negatives.to_f,tp/positives.to_f]
    f_prev = item[1]
  end
  # Assume the current prediction is now positive, and calculate how that affects the curve
  # if the current test item is a real positive
  # add to true positives, otherwise, it has become a false positve
  if item[0]
    tp += 1
  else
    fp += 1
  end
end

# push the last point (1,1) to the array
r.push [fp/negatives.to_f,tp/positives.to_f] 
```

除了更改测试，我还删除了一个不准确的评论（“估计器也是正确的”）——我们没有在这段代码中判断估计器对于单个值是否“正确”，我们只是看到它有多好分数`fp`与`tp`特定截止点的对比。排序列表上的单遍过程依赖于这样一个事实，即这将是从最后绘制的点开始的一个小的增量变化，基于对`fp`和`tp`计数的变化。

现在应该从`[0.0,0.0]`到`[1.0,1.0]`

```
r.each do |point|
  puts "(#{point[0].round(3)},#{point[1].round(3)})"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:39:26.970

这个答案是不正确的，因为它从 OP 评论中假设该算法需要对误报和真正分配进行*逐项评估。*实际上，变量`tp`和`fp`正在跟踪整个数据集的总数，并且只是在假设循环中的当前预测变为正数的情况下进行调整。请参阅我的另一个答案。

* * *

在此代码块中：

```
 if item[0] >= threshold && item[1] >= threshold
    tp += 1
  else
    fp += 1
  end 
```

您似乎将“真阳性”以外的任何东西都算作“假阳性”。

这是不正确的，您忽略了结果是真或假阴性分类的可能性。尝试这个：

```
 if item[0] >= threshold && item[1] >= threshold
    tp += 1
  elsif item[0] < threshold && item[1] >= threshold
    fp += 1
  end 
```

或者，稍微干一点

```
 if item[1] >= threshold
    if item[0] >= threshold
      tp += 1
    else
      fp += 1
    end
  end 
```

# python - 我可以继承 twisted.web.http.Request.requestReceived 吗？

> ID：16076584
> 
> 赞同：1
> 
> 时间：2013-04-18T07:07:35.317
> 
> 标签：python, twisted, nimbus, cumulus

我可以继承 twisted.web.http.Request.requestReceived 吗？

在评论中，表示“此方法不适用于用户”。

我继承了 rawDataReceived ，它是这样的：

```
def rawDataReceived(self, data):
    self.resetTimeout()
    if len(data) < self.length:
        self.requests[-1].content.send(data)
        self.length = self.length - len(data)
    else:
        self.requests[-1].content.send(data[:self.length])
        self._finishRequestBody(data[self.length:]) 
```

将`self.requests[-1].content.send(data)`在另一个 http 连接中发送数据。事实上，我在这里使用 httplib。

一切顺利，但它在 allContentReceived 的最后一步不起作用。它是 req.requestReceived(command, path, version)。

那么我可以继承这个方法requestReceived吗？或者哪里出错了？

我的代码在这里。如果你想帮助我，你可以下载它。

[http://pan.baidu.com/share/link?shareid=569597&uk=926264233](http://pan.baidu.com/share/link?shareid=569597&uk=926264233)

# asp.net-mvc-3 - 如何在 MVC3 中建立异步进程？

> ID：16076586
> 
> 赞同：0
> 
> 时间：2013-04-18T07:07:39.793
> 
> 标签：asp.net-mvc-3, entity-framework, jquery

我正在使用 MVC3 和实体框架。

在我的项目中，我有一个视图和一个控制器。从我的角度来看，我正在将 1000 条记录从 excel 导入数据库，并且效果很好。

我的要求是，在向数据库插入大行数据时，我需要指出
导入行的状态和加载完成的百分比，并且需要添加后台进程（线程）..如何实现这一点？需要帮助。

查看代码：

```
@using (Html.BeginForm("FImport", "Import", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    //Here i'm Inserting 1000 of records using table
    <input type="submit" value="Start Import" /></td>
} 
```

控制器代码：

```
[HttpPost]
public ActionResult FImport(FormCollection collection)
{
} 
```

怎么做？

# sql - syntax error in Data Explorer

> ID：16076593
> 
> 赞同：0
> 
> 时间：2013-04-18T07:08:14.733
> 
> 标签：sql, syntax-error, dataexplorer

[The Stack Exchange Data Explorer](https://data.stackexchange.com/) allows SQL queries against a Stack Exchange database. I tried this one —</p>

```
select
  month(CreationDate) month,
  year(CreationDate) year,
  sum(lower(left(Title,2))='wh')/count(*) wh,
  (select sum(Score)/count(*)
   from Posts u
   where month(CreationDate)=month(t.CreationDate)
     and year(CreationDate)=year(t.CreationDate)
     and lower(left(Title,2))='wh'
     and PostTypeId=1 -- question
  ) wh_score,
  sum(Score)/count(*) score,
  (select sum(AnswerCount)/count(*)
   from Posts u
   where month(CreationDate)=month(t.CreationDate)
     and year(CreationDate)=year(t.CreationDate)
     and lower(left(Title,2))='wh'
     and PostTypeId=1 -- question
  ) wh_answers,
  sum(AnswerCount)/count(*) answers
from Posts t
where PostTypeId=1 -- question
group by month,year; 
```

— but the site told me

> Incorrect syntax near ')'. Incorrect syntax near 'wh_score'. Incorrect syntax near 'wh_answers'.

and I cannot figure out why. Can anyone help, please?

* * *

Things I've tried, to no avail:

*   `datepart(month,CreationDate)` instead of `month(CreationDate)` (and likewise for `year`)
*   explicit `as` for aliases (then the latter two of the three errors complained about 'at' rather than about the aliases)
*   aliases that aren't built-in function names
*   `left(Title,2)` instead of `lower(left(Title,2))`
*   putting parentheses around the first two, and around the last two, of the four things joined by `and`s
*   explicit `u.` for column names in the subqueries

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:19:16.587

1.  您不能按别名分组，您需要指定计算列
2.  这是不允许的：`sum(lower(left(Title,2))='wh')`。您必须将其转换为`CASE WHEN`运算符。

这是一个更正的查询（给出超时）：

```
select
    month(CreationDate) month
  , year(CreationDate) year
  , sum(case when lower(left(Title,2))='wh' then 1 else 0 end)/count(*) wh
  , (select sum(Score)/count(*)
   from Posts u
   where month(CreationDate)=month(t.CreationDate)
     and year(CreationDate)=year(t.CreationDate)
     and lower(left(Title,2))='wh'
     and PostTypeId=1 -- question
  ) wh_score,
  sum(Score)/count(*) score,
  (select sum(AnswerCount)/count(*)
   from Posts u
   where month(CreationDate)=month(t.CreationDate)
     and year(CreationDate)=year(t.CreationDate)
     and lower(left(Title,2))='wh'
     and PostTypeId=1 -- question
  ) wh_answers,
  sum(AnswerCount)/count(*) answers
from Posts t
where PostTypeId=1 -- question
group by month(CreationDate), year(CreationDate); 
```

你想用这个查询做什么？

# android-webview - Android 启用 WebView 触摸声音

> ID：16076595
> 
> 赞同：0
> 
> 时间：2013-04-18T07:08:16.437
> 
> 标签：android-webview

我需要在 Web 视图事件点击时播放触摸声音，我启用了触摸声音并在低于 4.1 的 android 版本上进行了尝试，它工作正常，从我的 Web 视图中，我单击它发出的单选按钮以听到点击声音，但在 4.1 和当我点击单选按钮或按钮点击时，它上面不会发出点击声。我希望它在 4.1 及更高版本的 sdk Web 视图本身中被禁用。让我有任何可能的解决方案来解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:10:40.510

我相信这是不可能的，因为 WebView 中的事件不会传递给 Android 系统，您可能有机会通过将这些声音嵌入到您在 WebView 中呈现的网页中来创建这样的行为。

# dart - Can not run unit test: No constructor 'Future.value' declared in class 'Future'

> ID：16076596
> 
> 赞同：1
> 
> 时间：2013-04-18T07:08:20.333
> 
> 标签：dart

I have a new dart project but I fail to add unit tests.

But I am new to DART so perhaps I am punished as all rookies should ... or should they!?

**Error when running unit tests**

```
Error: Exception: No constructor 'Future.value' declared in class 'Future'.

NoSuchMethodError : method not found: 'Future.value'
Receiver: Type: class 'Future'
Arguments: []
Stack Trace: #0      _defer (http://127.0.0.1:3030/Users/gunnar/git/chessbuddy/src/main/webapp/dart/chessmodel/test/packages/unittest/unittest.dart:671:20)
#1      _ensureInitialized (http://127.0.0.1:3030/Users/gunnar/git/chessbuddy/src/main/webapp/dart/chessmodel/test/packages/unittest/unittest.dart:830:11)
#2      ensureInitialized (http://127.0.0.1:3030/Users/gunnar/git/chessbuddy/src/main/webapp/dart/chessmodel/test/packages/unittest/unittest.dart:809:21)
#3      group (http://127.0.0.1:3030/Users/gunnar/git/chessbuddy/src/main/webapp/dart/chessmodel/test/packages/unittest/unittest.dart:585:20)
#4      main (http://127.0.0.1:3030/Users/gunnar/git/chessbuddy/src/main/webapp/dart/chessmodel/test/test_runner.dart:9:8)
FAIL 
```

**pub info**

```
€ pub --version
Pub 0.4.7+1.r21548
€ pub cache list
{"packages":
    {"browser":{"version":"0.4.7+1","location":"/Users/gunnar/.pub-cache/hosted/pub.dartlang.org/browser-0.4.7+1"},
     "meta":{"version":"0.4.7+1","location":"/Users/gunnar/.pub-cache/hosted/pub.dartlang.org/meta-0.4.7+1"},
     "stagexl":{"version":"0.7.4","location":"/Users/gunnar/.pub-cache/hosted/pub.dartlang.org/stagexl-0.7.4"},
     "unittest":{"version":"0.4.7+1","location":"/Users/gunnar/.pub-cache/hosted/pub.dartlang.org/unittest-0.4.7+1"}}} 
```

**Eclipse plugin**

```
Dart Editor for Eclipse 0.4.7.r21548    com.google.dart.eclipse.feature.feature.group   dartlang.org 
```

**test_runner.dart**

```
import 'package:unittest/unittest.dart';
import 'package:unittest/html_enhanced_config.dart';

import 'ChessColor_test.dart' as color_test;

void main() {
  useHtmlEnhancedConfiguration();

  group('Enum tests', color_test.main);
} 
```

**ChessColor_test.dart**

```
library color_test;

import 'package:unittest/unittest.dart';

void main() {
  test('isWhite', () =>
    expect(true, WHITE.isWhite())
  );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:03:36.003

有几件事可以尝试：

*   看看 dart-sdk/lib/async/future.dart。你看到 Future.value 工厂构造函数了吗？如果不是，那么您的 SDK 不是正确的版本。我会从命令行和编辑器中检查这一点。

*   如果您确实在 SDK 中看到它，请尝试退出并重新启动编辑器。我在这里推测，但是当我们在内部看到这个时，它表现得好像有一个过期的异步库的缓存副本，并且重新启动使问题解决了。

# cocoa - Mac OSX - 核心动画 - 如何动画跟随我的光标的东西？

> ID：16076602
> 
> 赞同：0
> 
> 时间：2013-04-18T07:08:37.673
> 
> 标签：cocoa, core-animation

到目前为止，我只看到 Core Animation 的代码看起来像这样，其中设置动画位置的参数是在开始时设置的。

```
- (void) startTopLeftImageViewAnimation{
/* Start from top left corner */ 
[self.xcodeImageView1 setFrame:CGRectMake(0.0f,0.0f, 100.0f, 100.0f)];
[self.xcodeImageView1 setAlpha:1.0f];
[UIView beginAnimations:@"xcodeImageView1Animation" context:(__bridge void *)self.xcodeImageView1];
/* 3 seconds animation */
[UIView setAnimationDuration:3.0f];
/* Receive animation delegates */ [UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector: @selector(imageViewDidStop:finished:context:)];
/* End at the bottom right corner */ [self.xcodeImageView1 setFrame:CGRectMake(220.0f,
350.0f, 100.0f,
[self.xcodeImageView1 setAlpha:0.0f];
[UIView commitAnimations]; 
} 
```

但是，我想制作一个图形跟随鼠标光标的动画。这意味着动画不断接收我的鼠标指针 xy 值。

有没有更好的选择来做这样的“手动”动画，并在我移动鼠标位置时调用 drawRect？我可以为此使用核心动画吗？

```
- (void)drawRect:(NSRect)rect
{
    // Drawing code here.
    [[NSColor whiteColor] set];
    NSRectFill( rect );

    [self drawCircleAtPoint:_circlePt];
}

- (void) drawCircleAtPoint:(CGPoint) point {

    NSBezierPath* thePath = [NSBezierPath bezierPath];
    NSRect nrect = NSMakeRect(point.x, point.y, 50, 50);
    [thePath appendBezierPathWithOvalInRect:nrect];
    [[NSColor blackColor] set];
    [thePath stroke];
} 
```

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:17:43.630

首先，您需要鼠标光标指向的点。您必须为此实施的方法是

```
- (void)mouseMoved:(NSEvent *)theEvent 
```

`NSEvent`有一个方法叫做

```
- (NSPoint)locationInWindow 
```

正如您可能猜到的那样，它为您提供了光标在窗口中的位置。

现在您必须在您的视图中找到该位置。这是通过`NSView`方法完成的

```
- (NSPoint)convertPoint:(NSPoint)aPoint fromView:(NSView *)aView 
```

点来自哪里，`locationInWindow`视图是您要在其中执行动画的视图

例如

```
CGPoint mousePoint = [[[self window] contentView] convertPoint:[theEvent locationInWindow] fromView:self]; 
```

然后您可以通过视图框架设置位置，也可以使用视图层的位置属性。

# c - 父母和孩子通过信号故障同步

> ID：16076606
> 
> 赞同：0
> 
> 时间：2013-04-18T07:08:47.097
> 
> 标签：c, linux, synchronization, signals

所以，我的任务是以这种方式同步父母和他的 2 个孩子：一个孩子向父母发送 SIGUSR2 信号，然后阻止等待的父母消息。同步是由全局标志实现的，因此父等待任何一个 flag_ch 变为 1（当子发送 SIGUSR2 时发生），然后向该子发送信号 SIGUSR1，子恢复（导致全局 flag_p 变为 1）

问题是父母只收到一个孩子的信号，然后阻塞等待第二个孩子的信号，但他们没有出现。任何想法？..

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <sys/signalfd.h>
#define LPC 10
pid_t ch[2];

sig_atomic_t flag_ch[2] = {0, 0};
sig_atomic_t flag_p = 0;

int get_ind(pid_t ch_pid) {
    int i;
    for (i = 0; i < 2; ++i) {
        if (ch_pid == ch[i])
            return i;
    }
    return -1;
}

void usr_handler(int signo, siginfo_t* si, void* unused) {
    int ch_index;
    switch(signo) {
        case SIGUSR2:
            ch_index = get_ind(si->si_pid);
            if (ch_index >= 0)
                flag_ch[ch_index] = 1;
            else
                fprintf(stderr, "signal handled not from child pid %d\n", si->si_pid);
            break;
        case SIGUSR1:
            flag_p = 1;
            break;
    }
}

void set_usr_handler(void) {
    struct sigaction sa;
    sa.sa_sigaction = usr_handler;
    sa.sa_flags = SA_SIGINFO;
    sa.sa_restorer = NULL;

    sigemptyset(&sa.sa_mask);

    if (0 != sigaction(SIGUSR1, &sa, NULL))
        abort_prg("signal [SIGUSR1] error");

    if (0 != sigaction(SIGUSR2, &sa, NULL))
        abort_prg("signal [SIGUSR2] error");
}

void child_proc(void) {
    int i;
    for (i = 0; i < LPC; ++i) {
        if (0 != kill(getppid(), SIGUSR2))
            exit(1);
        while (0 == flag_p) { };
            flag_p = 0;
    }
}

int wait_child(void) {
    while (0 == flag_ch[0] && 0 == flag_ch[1]) { };
    if (1 == flag_ch[0]) {
        flag_ch[0] = 0;
        return ch[0];
    }
    flag_ch[1] = 0;
    return ch[1];
}

void parent_proc(void) {
    int i;
    pid_t ch_pid;
    for (i = 0; i < LPC * 2; ++i) {
        ch_pid = wait_child();
        printf("Parent: Received from pid [%d]\n", ch_pid);
        if (0 != kill(ch_pid, SIGUSR1))
            exit(1);
    }
}

int main(int argc, char* argv[]) {
    set_usr_handler();
    int i;
    for (i = 0; i < 2; ++i) {
        pid_t child = fork();
        if (0 > child)
            exit(1);
        if (0 == child) {
            child_proc();
            return 0;
        }
        ch[i] = child;
    }   
    parent_proc();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:08:30.640

我的猜测是`volatile`一些全局变量声明中缺少它。例如，`flag_p`不是`volatile`意味着循环

```
while (flag_p == 0) { } 
```

可以永远运行：GCC 可能编译它只将全局变量加载到一个寄存器中，然后循环直到这个寄存器非零（这永远不会发生）。

一个保守的近似是，您应该`volatile`在信号处理程序中读取或写入所有可变变量。

**编辑：**我能想到的另一个问题来源是信号不是累积的：父进程没有挂起的 SIGUSR2，或者它有一个。据我所知，如果两个子进程同时将其发送到父进程，则可能只会传递一个。

**编辑：**我认为一个“更好”的解决方案（更灵活，更便携）将遵循以下原则：根本不使用信号，而是使用管道。您在父母和每个孩子之间制作一个管道，孩子们在完成后通过管道发送一个字符“X”。父母等待 select(); 或者如果它只是想等到两个孩子都准备好，它可以从一个管道读取“X”字符，然后从另一个管道读取，在两种情况下都阻塞（顺序无关紧要）。

# javascript - 在ajax成功设置变量并在ajax之外的jquery中使用该变量

> ID：16076607
> 
> 赞同：0
> 
> 时间：2013-04-18T07:08:47.630
> 
> 标签：javascript, jquery, ajax

目的是在成功执行 ajax 后将 html 隐藏输入字段值设置（更改）为 0。

起初决定 ajax 成功定义变量，然后决定在 ajax 外部使用。

但是请阅读（[JQuery - 如何在该 ajax 调用之外使用 ajax 调用的返回值](https://stackoverflow.com/questions/9973681/jquery-how-to-use-the-return-value-of-an-ajax-call-outside-that-ajax-call)）这是不可能的。

需要找到一些解决方案。

下面是代码

阿贾克斯（例如）

```
<script language="JavaScript" type="text/javascript">
function ajax_post(){
if (window.XMLHttpRequest)
{
var hr = new XMLHttpRequest();
}
else
{
var hr = new ActiveXObject("Microsoft.XMLHTTP");
}
var url = "_autosave.php";
var sabt = document.getElementById("date_day1").value;
var prao = document.getElementById("amount1").value;
var vars = "date_day1="+sabt+"&amount1="+prao;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
if(hr.readyState == 4 && hr.status == 200) {
var return_data = hr.responseText;
document.getElementById("status").innerHTML = return_data; 
```

在这里，我决定定义变量以在 ajax 之外使用它。正如所读，这不起作用，因为脚本在设置 ajax 变量之前运行了变量并到达了 ajax 变量之外。

```
var ajax_post_success = 1; 
```

剩余部分代码

```
}
}
hr.send(vars); // Actually execute the request
document.getElementById("status").innerHTML = "processing...";
}
</script> 
```

然后后者（如果 ajax 成功将值设置为 0）

```
<input type="hidden" name="is_row_changed1" id="is_row_changed1" value="" >
<script>
$(document).ready(function() {
if(ajax_post_success == 1) {
document.getElementById('is_row_changed1').value = 0;
}
});
</script> 
```

这一切的目的如下。

我计划使用每行有 10 行和 19 个输入字段的表格。

如果用户在任何字段中输入内容，隐藏输入字段的值将更改为 1（这没关系）。

然后使用 ajax 插入/更新用户输入。

成功插入/更新后，将隐藏字段值设置为 0。

在每个 php 插入/更新执行检查隐藏字段值是否为 1。如果值为 1，则插入/更新该行。如果值为 0，则对该行不执行任何操作。仅插入/更新隐藏字段值为 1 的行。

这就是问题的目的。

什么是解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:35:06.417

我认为你不需要那个变量，你可以在ajax方法的回调中将隐藏字段的值更改`is_row_changed1`为零`onreadystatechange`

```
hr.onreadystatechange = function() {
    if (hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("status").innerHTML = return_data;
        document.getElementById('is_row_changed1').value = 0;
    }
} 
```

我建议使用 jQuery ajax 之类的

```
function ajax_post() {
    var sabt = $('#date_day1').val();
    var prao = $('#amount1').val();
    $.ajax({
        url : "_autosave.php",
        data : {
            date_day1 : sabt,
            amount1 : prao
        }
    }).done(function(html) {
        $('#status').html(html);
        $('#is_row_changed1').val(0);
    });
} 
```

# c# - How to set a name to the TITLE of a newly opened tab from the @Html.ActionLink cshtml page

> ID：16076608
> 
> 赞同：2
> 
> 时间：2013-04-18T07:08:53.170
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

My current code in `Index.cshtml` page:

```
@Html.ActionLinks(@Html.ActionLink(objList.Name, "Name", "ControllerName", new {Id=objList.Id}, new {target = "_blank"})) 
```

The above code makes me to open a page(`Name.cshtml`) in a new tab after clicking a link in the `Index` page. But my goal is to assign a name(`objList.Name`) as a `Title` for the new tab. So, I added the Title attribute in the following code but it is not working as expected.

```
 @Html.ActionLinks(@Html.ActionLink(objList.Name, "Name", "ControllerName", new {Id=objList.Id}, new {target = "_blank", title = objList.Name})) 
```

How to acheive this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:19:37.887

您必须将 objList.Name 作为参数传递给“Name”操作，在此操作中，您可以将名称包含在 Viewbag 中：

```
ViewBag.MyTitle = nameParameter; 
```

在“名称”视图中：

```
<title>@ViewBag.MyTitle</title> 
```

如果您使用的是布局页面，则只需将其放在“名称”操作中：

```
ViewBag.Title = nameParameter; 
```

因为在你的布局视图中你可能有这个：

```
<title>@ViewBag.Title</title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:40:33.883

只需将其添加`Name`到 中`RouteValueDictionary`，将其添加到您的`ActionResult`然后设置`ViewBag.Title`。

首先，将您的更改`ActionLink`为：

```
Html.ActionLinks(@Html.ActionLink(objList.Name, "Name", "ControllerName", new {Id=objList.Id, Name=objList.Name}, new {target = "_blank"})) 
```

然后创建一个模型（如果 Name 表上没有模型），例如：

```
public class MyModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后将您的更改`Name` `ActionResult`为：

```
 public ActionResult Name(int Id, string Name)
    {
        MyModel model = new MyModel 
        {
            Id = Id,
            Name = Name
        };

        return View(model);
    } 
```

然后将模型添加到您的`Name`视图中：

```
@model MyModel 
```

然后`ViewBag.Title`在`Name`视图中设置：

```
ViewBag.Title = Model.Name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:15:10.010

我认为，您代码中的“标题”是在链接上添加鼠标悬停标题。

要在选项卡中添加标题，请使用 carlos 的解决方案（将标题标签和 viewbag 属性放在您的视图页面中）。

# android - 如何将小部件 Expandable ListView 扩展到 10 层？

> ID：16076618
> 
> 赞同：0
> 
> 时间：2013-04-18T07:09:16.473
> 
> 标签：android, expandablelistview, expandable

我正在开发一个可扩展的 ListView 最多 10 层。

我用下面的代码到第二层只能往前走。

我使用了以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.           
                new String[] { "Group Item" ,"level"},  // the key of group item.
                new int[] { R.id.row_name ,R.id.row_name2}, // ID of each group item.-Data under the key goes into this TextView.                   
                createChildList(),              // childData describes second-level entries.
                R.layout.child_row,             // Layout for sub-level entries(second level).
                new String[] {"Sub Item","level"},      // Keys in childData maps to display.
                new int[] { R.id.grp_child,R.id.grp_child2}     // Data under the keys above go into these TextViews.
            );

        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }

}

/* Creating the Hashmap for the row */
@SuppressWarnings("unchecked")
private List createGroupList() {
      ArrayList result = new ArrayList();
      for( int i = 0 ; i < 15 ; ++i ) { // 15 groups........
        HashMap m = new HashMap();
        m.put( "Group Item","شماره گروه " + i ); // the key and it's value.
        m.put( "level","لایه اول " );

        result.add( m );
      }
      return (List)result;
}

/* creatin the HashMap for the children */
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 15 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList(); 
      for( int n = 0 ; n < 3 ; n++ ) {
        HashMap child = new HashMap();          
        child.put( "Sub Item", "شماره زیر گروه " + n );
        child.put( "level", "لایه دوم ");
        secList.add( child );
      }
     result.add( secList );
    }        
    return result;
}
public void  onContentChanged  () {
    System.out.println("onContentChanged");
    super.onContentChanged();         
}
/* This function is called on each child click */
public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
    return true;
}

/* This function is called on expansion of the group */
public void  onGroupExpand  (int groupPosition) {
    try{
         System.out.println("Group exapanding Listener => groupPosition = " + groupPosition);
    }catch(Exception e){
        System.out.println(" groupPosition Errrr +++ " + e.getMessage());
    }
} 
```

请在这种情况下想到任何解决方案给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:44:25.850

同时

输出我的程序下面的图像是：

![在此处输入图像描述](https://i.stack.imgur.com/VusZb.png)

# asp.net - 通过 iis 7 浏览时缺少 Crystalreports 工具栏

> ID：16076622
> 
> 赞同：1
> 
> 时间：2013-04-18T07:09:21.037
> 
> 标签：asp.net, visual-studio-2008, firefox, crystal-reports

我在 asp.net 和 vs 2008 中设计了一个网页。

在这个 Web 应用程序中，我有一个从中弹出水晶报告窗口。当我通过 Visual Studio 2008 运行该应用程序并在任何浏览器中浏览它时，它工作正常。但是，当我通过 iis 7 在本地计算机上部署应用程序时，水晶报表的工具栏仅在 Firefox 中丢失，但在 Internet Explorer 和 Chrome 中完美运行。

谁能告诉我必须做些什么改变我从昨天开始用谷歌搜索但没有找到灵魂。
请帮帮我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:35:39.547

C:\inetpub\wwwroot\aspnet_client\system_web\2_0_50727 在这个路径下复制文件夹

CrystalReportWebFormViewer4 并将其放置在

C:\Windows\Microsoft.NET\Framework\v2.0.50727\ASP.NETClientFiles 然后工具栏就会出现。

# sitecore - 在多个站点中使用一个项目作为数据存储库

> ID：16076626
> 
> 赞同：0
> 
> 时间：2013-04-18T07:09:38.273
> 
> 标签：sitecore

我有这个内容树：

```
SiteA
    - Home
    - Articles

SiteB
    - Home
    - News

Repository
    - article1
    - article2
    - article3
    - ...
    - article1000 
```

有没有办法可以从`Repository`Item 中提取任何文章并在 Item 上动态显示`SiteA/Article`？我也会这样做`SiteB/News`。

附加问题：是否可以从父项存储库继承每篇文章的布局？这些文章将通过迁移添加（我将在接下来的工作中）一旦迁移了项目，重新分配布局将花费太多时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:02:23.317

就在这里。根据您的要求，您可以做一些不同的事情。
例如，您可以`MultilistField`在 SiteA/Article 项目上添加一个，它使您能够从 Repository 项目中选择文章。通过将 MultilistField 的 Datasource 字段设置为 /sitecore/content/Repository，您将能够选择任何或全部。
但是，这可能不是您想要的，因为您可能有数千篇文章查看您的文章名称。

另一种选择是创建一个子布局/渲染，从 Repository 项中读取最新的 X 文章。使用简单的 for 循环，您可以执行以下操作：

```
var list = new List<Item>();
var repoItem = Sitecore.Context.Database.GetItem("/sitecore/content/Repository");
for (int i = 0; i < 5; i++)
{
    list.Add(repoItem[i]);
} 
```

您可以将其设置为 a`DataSource`到`asp:Repeater`. 当然，您可以通过许多不同的方式来实现（通过一些 lambda 表达式选择子项的数量，如果您还想使用关键字等，请使用 Lucene 来获取项）。
您还可以在 Sitecore 中的某处定义项目的数量，因此 SiteB/News 和 SiteA/Article 的数量可能不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:14:35.020

看着您的问题，我可以想象您最终会选择一个选项，例如引入通配符项目以在这些不同位置显示来自您的存储库的数据。Marketplace.sitecore.net 上有一个有趣的模块，在决定你想做什么之前也可以看看。

阅读您的最后一行：我可以从 Repository/Item中提取**任何文章并****动态**显示它我强烈建议您使用通配符解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:15:36.917

另一种选择是使用 Sitecore 克隆（来自 Sitecore 6.4）或代理（早于 Sitecore 6.4）。

克隆：[http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Sitecore-CMS-6-4-Cloning.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Sitecore-CMS-6-4-Cloning.aspx)

代理： [http](http://sdn.sitecore.net/Articles/Administration/Using%20Proxy%20Items%20in%205,-d-,3.aspx) ://sdn.sitecore.net/Articles/Administration/Using%20Proxy%20Items%20in%205,-d-,3.aspx 注意事项：打开代理并使用它们会影响性能。我认为它的工作原理是这样的： - 每次它必须获取项目/子项时，它都会在代理表中查看是否应该添加任何其他项目 - 代理越多，每个“站点核心”的“开销”就越多查询”必须查看所有代理项以查看是否有任何其他项应包含在结果中

虽然这会复制您选择克隆或代理的所有项目，但可能不是您想要做的。

# .net - Strange CLR error while handling Nullable types in Oxygene .net

> ID：16076627
> 
> 赞同：1
> 
> 时间：2013-04-18T07:09:39.223
> 
> 标签：.net, nullable, oxygene

I'm writing a program in Oxygene .net There seems to be a problem with how I am handling nullable types

```
 namespace RULER;

interface

uses
  System,
  System.Drawing,
  System.Collections,
  System.Collections.Generic,
  System.Windows.Forms,
  System.ComponentModel;

type
  /// <summary>
  /// Summary description for Settings.
  /// </summary>
  Settings = public partial class(System.Windows.Forms.Form)
  private
      method Settings_Shown(sender: System.Object; e: System.EventArgs);
      method GetLowerBound : System.Nullable<Double>;
      method SetLowerBound(lowerbound:System.Nullable<Double>);
      method Settings_Load(sender: System.Object; e: System.EventArgs);
      method btnOK_Click(sender: System.Object; e: System.EventArgs);
  protected
      method Dispose(aDisposing: Boolean); override;
  public
      property LowerBound : System.Nullable<Double> read GetLowerBound write SetLowerBound;
    constructor;
  end;

implementation

{$REGION Construction and Disposition}
constructor Settings;
begin
  //
  // Required for Windows Form Designer support
  //
  InitializeComponent();

  //
  // TODO: Add any constructor code after InitializeComponent call
  //
end;

method Settings.Dispose(aDisposing: Boolean);
begin
  if aDisposing then begin
    if assigned(components) then
      components.Dispose();

    //
    // TODO: Add custom disposition code here
    //
  end;
  inherited Dispose(aDisposing);
end;
{$ENDREGION}

method Settings.Settings_Shown(sender: System.Object; e: System.EventArgs);
begin
    LowerBound := System.Nullable<Double>(Controller.configuration.LowerBound);
end;

method Settings.GetLowerBound : System.Nullable<Double>;
begin
    var bound : Double;
    if Double.TryParse(txtLowerBound.Text, out bound) then
    begin
        Result := bound;
    end else
    begin
        Result := System.Nullable<Double>(nil);
    end;
end;

method Settings.SetLowerBound(lowerbound:System.Nullable<Double>);
begin
    if lowerbound.HasValue then
    begin
        txtLowerBound.Text := lowerbound.Value.ToString;
    end else
    begin
        txtLowerBound.Text := '';
    end;
end;

method Settings.Settings_Load(sender: System.Object; e: System.EventArgs);
begin

end;

method Settings.btnOK_Click(sender: System.Object; e: System.EventArgs);
begin
    var LB : System.Nullable<Double> := Self.GetLowerBound;

    if LB.HasValue then
    begin
        Controller.configuration.LowerBound := LB.Value;
    end;
end;

end. 
```

When I click the button firing the btnOK_Click event I get a strange error message

> The runtime has encountered a fatal error. The address of the error was at 0x691886da, on thread 0x770\. The error code is 0xc0000005\. This error may be a bug in the CLR or in the unsafe or non-verifiable portions of user code. Common sources of this bug include user marshaling errors for COM-interop or PInvoke, which may corrupt the stack.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:59:55.687

这看起来是编译器错误。我已经转发了 RemObjects 的信息，以便在此提交错误并修复它。与此同时，您可能会尝试[更新版本](http://downloads.remobjects.com)（或者可能是[beta 版](http://beta.remobjects.com/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:59:46.763

fwiw，我建议使用 Oxygene 内置的“可空”语言功能，因为它比 System.Nullable 更加透明和直观。例如：

```
method Settings.GetLowerBound : nullable Double;
begin
    var bound : Double;
    if Double.TryParse(txtLowerBound.Text, out bound) then
    begin
        Result := bound;
    end else
    begin
        Result := nil;
    end;
end; 
```

无论如何，得到“运行时遇到致命错误”。表示编译器错误。我将使用您的测试用例在我们这边记录一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:15:01.947

我相信解决方案是更换

```
Result := System.Nullable<Double>(nil); 
```

和

```
Result := new System.Nullable<Double>; 
```

# delphi - Delphi Firemonkey 2 .color property

> ID：16076628
> 
> 赞同：1
> 
> 时间：2013-04-18T07:09:40.513
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

I don't know if it is just me missing something, but I am quite frustrated by this issue.
When I try to set the `.color` property there are no values available such as `claBlue`.

For example:

```
 Canvas.Stroke.Color := claBue. 
```

Am I missing a reference? I have included `FMX.Types`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:05:30.063

包含到使用单元 System.UIConsts 中，您将获得所有可用的颜色名称。

```
uses System.UIConsts; 
```

# jquery - Marker not centering in iframe for google map

> ID：16076633
> 
> 赞同：6
> 
> 时间：2013-04-18T07:09:52.593
> 
> 标签：jquery, google-maps, iframe

I have bit strange requirement of open google map in iframe. i have address that i use to pass and convert that into google map. but the trouble is the size of my iframe is 200*200 so the marker is not getting centered. and the other problem is the marker infowindow also gets poppedup after few seconds that makes my marker out of the frame boundry.and marker moves from the centere. my code is like this.

```
$(document).ready(function(){
  $("#map_address").each(function(){   
    var embed ='<iframe class="map_google" width="200" scrolling="no" height="200" frameborder="0" src="https:/maps.google.com/maps?&q=Ahmedabad&output=embed" marginwidth="0" marginheight="0">';
    $(this).html(embed);
  });
}); 
```

i want to close the marker info window and make the marker cenetered. any help will be appreciated.

this was created by the use of the [http://jsbin.com/welcome/68407/edit](http://jsbin.com/welcome/68407/edit)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T12:08:51.377

`iwloc`向 iframe-URL添加不带值的-parameter：http: [//jsbin.com/emoyup/1/edit](http://jsbin.com/emoyup/1/edit)

URL 参数说明：[http ://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

# django - Making Django Application localhost/appname Browsable through localhost

> ID：16076637
> 
> 赞同：1
> 
> 时间：2013-04-18T07:10:04.947
> 
> 标签：django, apache

My django application running on port 80 apache server and django, which I can browse by typing hxxp://localhost/myapp but i want it to directly browse by using hxxp://localhost. Where should i configure it to browse directly using localhost instead of typing localhost/myapp

xx=tt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:17:52.877

从您的项目文件夹中尝试：

```
python manage.py runserver 
```

它启动了一个在 8000 端口上运行的非常简单的网络服务器，因此您可以看到您的网站正在访问

```
http://localhost:8000 
```

要了解更多详细信息，请参阅[django-admin.py 和 manage.py](https://docs.djangoproject.com/en/dev/ref/django-admin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:54:56.883

您的应用程序的所有 url 可能都在您的主 urls.py 或应用程序 urls.py 文件中。

只需从以下位置编辑主 urls.py 文件：

```
urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^myapp/', include('myapp.urls')),
) 
```

至

```
urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^', include('myapp.urls')),
) 
```

您将必须处理 myapp urls.py 中的所有 url 然后...

艾伦

# iphone - UILocalNotification is not getting cancelled

> ID：16076639
> 
> 赞同：1
> 
> 时间：2013-04-18T07:10:08.540
> 
> 标签：iphone, ios, objective-c, uilocalnotification

I am trying to cancel a already scheduled notification , notification is getting called but when i try to cancel a notification its not getting cancelled .

NSArray notification contains some random values when there is only one scheduled notification. can anyone help me . I am want to cancel the notification for a particular bookID.

***UPDATE*** :

```
 -(UILocalNotification *)scheduleNotification :(int)remedyID
        {
           NSString *descriptionBody;

           NSInteger frequency;

          UILocalNotification *notif = [[UILocalNotification alloc] init];

            NSLog(@"%d",remedyID);

            descriptionBody =[[self remedyDetailsForRemedyID:remedyID] objectForKey:@"RemedyTxtDic"];
            frequency = [[[self remedyDetailsForRemedyID:remedyID] objectForKey:@"RemedyFrequency"]intValue];

            NSArray *notificationFireDates = [self fireDatesForFrequency:frequency];

            for (NSDate *fireDate in notificationFireDates)
            {
                    notif.timeZone = [NSTimeZone defaultTimeZone];

                    notif.repeatInterval = NSDayCalendarUnit;
                    notif.alertBody = [NSString stringWithString:descriptionBody];
                    notif.alertAction = @"Show me";
                    notif.soundName = UILocalNotificationDefaultSoundName;

                    notif.applicationIconBadgeNumber = 1;

                    notif.fireDate = fireDate;

                    NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:notif.alertBody,                                         @"kRemindMeNotificationDataKey",  [NSNumber numberWithInt:remedyID],kRemindMeNotificationRemedyIDKey,
                                              nil];

                    notif.userInfo = userDict;

                    [[UIApplication sharedApplication] scheduleLocalNotification:notif];
                }

                return notif;

    }

- (void)cancelNotification:(int)bookID
{
    int notificationBook=0;

        NSArray *notifications = [[UIApplication sharedApplication] scheduledLocalNotifications];

    for (UILocalNotification *notification in notifications)
    {
        int notifBookId = [[notification.userInfo objectForKey:kRemindMeNotificationBookIDKey] intValue];

        for (int i=0; i<[bookArray count]; i++)
        {
            notificationBook =[[[remedyArray objectAtIndex:i] objectForKey:@"BookID"] intValue];
        }

        NSLog(@"%d",[[notification.userInfo objectForKey:kRemindMeNotificationBookIDKey]intValue]);

        NSLog(@"%d",notifBookId);

        if (bookId == notifBookId)
        {
            [[UIApplication sharedApplication] cancelLocalNotification:notification];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:21:15.477

> 当只有一个计划通知时，NSArray 通知包含一些随机值。

这可能是由于该应用程序的某些先前计划的通知已经存在。一旦尝试取消应用程序的所有通知再次启动

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

**你的主要问题**

```
- (void)cancelNotification:(int)remedyId
{
NSArray *notifications = [[UIApplication sharedApplication] scheduledLocalNotifications];
NSLog(@"Cancelling... Before %d",[[[UIApplication sharedApplication]scheduledLocalNotifications]count]);

  for (UILocalNotification *notification in notifications)
  {

  int notifRemedyId = [[notification.userInfo objectForKey:@"kRemindMeNotificationRemedyIDKey"]intValue];  // I change the key value

    NSLog(@"remedyID  : %d",remedyId);
    NSLog(@"notifyId : %d",notifRemedyId);
    if (remedyId == notifRemedyId) {
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
      }
   }

NSLog(@"Cancelling... After %d",[[[UIApplication sharedApplication]scheduledLocalNotifications]count]);

 } 
```

你给的钥匙错了。我认为那是你的问题。我又发现了一件事，您将每个通知安排两次，我不知道为什么。检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:39:24.790

您应该将检查移到循环内部

```
for (int i=0; i<[bookArray count]; i++)
{
    int bookId =[[[remedyArray objectAtIndex:i] objectForKey:@"BookID"]    intValue];

    if (bookId == notifBookId)
    {
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
    }
} 
```

# node.js - How do I install mailparser module via npm on Windows 7 x64?

> ID：16076641
> 
> 赞同：0
> 
> 时间：2013-04-18T07:10:13.387
> 
> 标签：node.js

Apologies if there is something obvious I'm missing, I've actually never encountered this error before using npm:

```
C:\work\spark3>npm install mailparser
npm http GET https://registry.npmjs.org/mailparser
npm http 304 https://registry.npmjs.org/mailparser
npm http GET https://registry.npmjs.org/encoding
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/mimelib
npm http GET https://registry.npmjs.org/iconv
npm http 304 https://registry.npmjs.org/mime
npm http 304 https://registry.npmjs.org/mimelib
npm http 304 https://registry.npmjs.org/encoding
npm http 304 https://registry.npmjs.org/iconv
npm http GET https://registry.npmjs.org/iconv-lite/0.2.7
npm http GET https://registry.npmjs.org/addressparser
npm http 304 https://registry.npmjs.org/iconv-lite/0.2.7
npm http 304 https://registry.npmjs.org/addressparser

> iconv@2.0.4 install C:\work\spark3\node_modules\mailparser\node_modules\iconv
> node-gyp rebuild

C:\work\spark3\node_modules\mailparser\node_modules\iconv>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
gyp ERR! configure error
gyp ERR! stack Error: spawn ENOENT
gyp ERR! stack     at errnoException (child_process.js:975:11)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:766:34)
gyp ERR! System Windows_NT 6.1.7600
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\work\spark3\node_modules\mailparser\node_modules\iconv
gyp ERR! node -v v0.10.4
gyp ERR! node-gyp -v v0.9.5
gyp ERR! not ok
npm WARN optional dep failed, continuing iconv@2.0.4
mailparser@0.3.4 node_modules\mailparser
├── mime@1.2.9
├── mimelib@0.2.12 (addressparser@0.1.3)
└── encoding@0.1.6 (iconv-lite@0.2.7)

```

I have tried the following on my Windows machine after scouring the web:

*   Reinstalling Node.js
*   Reinstalling Python 2.7
*   Ensuring the path for Python is set
*   Updating npm
*   Installing Visual C++ Express 2010
*   Installing node-gyp globally

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:00:36.580

问题实际上出在 iconv 模块上，[根据其 GitHub 页面](https://github.com/bnoordhuis/node-iconv)，该模块“可能适用于 Windows，也可能不适用于 Windows”。

由于 mailparser 将其声明为[可选依赖](https://github.com/andris9/mailparser/blob/master/package.json#L31)项，因此请尝试下载 mailparser 源并将 iconv`package.json`作为依赖项从中删除。

# joomla - 为什么 Joomla 不会在首页呈现我的 PHP/Javascript 标签？

> ID：16076646
> 
> 赞同：-1
> 
> 时间：2013-04-18T07:10:23.007
> 
> 标签：joomla

这是我第一个使用 Joomla 进行网站开发的项目。我正在尝试进行仪表板实现。我的问题是，每当我使用源标签在文章中编辑我的脚本时，这些更改都不会立即反映在我的网站上。我什至尝试重新启动我的 Wamp 服务器，但徒劳无功。我应该遵循的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:24:33.710

根据您的 Joomla 版本，有不同的选项可以检查以抑制像`<script>`前端那样的标签剥离或过滤。这里有一些提示：

首先，根据您选择的编辑器，您的标签可以在客户端被过滤掉。如果您使用标准 TinyMCE，例如转到 Extensions-Plugins-TinyMCE，您将在其中找到可能包含的禁止元素列表`script`。但是请务必确定您所做的事情，始终检查应该允许谁在文章中输入脚本标签，如果像您这样的其他人作为管理员有权使用它们，这几乎总是一个主要的安全风险。因此，另一种选择可能是将您的管理员/作者帐户的编辑器设置为纯文本，而保留 TinyMCE 不变。

另一个过滤是由 joomla 本身在服务器端完成的，可以在“全局配置”->“文本过滤器”中控制。标准安装后，所有组都将使用默认黑名单过滤，其中包括删除脚本标签。在这里，您可以为超级用户组定义“无过滤”，例如

同样，所有这一切都取决于您的 Joomla 版本（我的示例指的是 2.5）并且是解决问题的提示，但不知道您的安全概念。

# javascript - Save a file to filesystem with chrome packaged app

> ID：16076648
> 
> 赞同：1
> 
> 时间：2013-04-18T07:10:27.650
> 
> 标签：javascript, google-chrome, google-chrome-app

I have a variable full of css attributes that I would like to use to create a CSS file and save it to the apps file directory. How would I go about this in a chrome packaged app?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:59:57.830

你不会喜欢这个答案的。你不能这样做，如果你想出了办法做到这一点，这将被视为 Chrome 团队将关闭的安全漏洞。

打包应用程序的部分设计目标是使整个应用程序在上传到网上商店时可进行静态分析。这意味着当用户决定是否从商店安装应用程序时，该决定是基于代码的实际作用（它包含这些脚本、这个 CSS 和这些图像，并且它要求这些权限）而不是而不是您是否信任开发人员或网站。www.example.com 今天可能看起来值得信赖，但明天它可能会被卖给新的所有者，或者被盗用。所以决定“我信任 example.com 吗？” 很难。打包的应用程序使该决定更容易；在大多数情况下，您信任的“东西”就在您面前，在您刚刚下载的 CRX 中。

如果您理解了这个设计目标，那么您就会理解为什么打包应用程序的设计不允许自我修改代码（这是您想要做的事情的通用术语）。如果您的代码可以生成代码，那么静态分析很难确定应用程序可以做什么（有意或通过错误）。同样，内容安全策略对打包的应用程序相当严格，不能设置为限制较少的策略，这就是 eval() 在脚本中不起作用的原因。

您的 JavaScript 无法设置 DOM 元素的样式属性是否有原因？这应该为您提供所需的灵活性，而不会违反平台安全模型的边界。

编辑：刚刚看到[你的另一个问题](https://stackoverflow.com/questions/16070936/saving-a-file-from-a-chrome-packaged-app)，这似乎与这个问题非常相似。您正在构建 CSS 编辑器吗？或者您是否正在尝试修改您自己的应用程序的 CSS？我上面的回答假设了第二种情况。如果我误解了您的问题，请澄清一下，我会尝试改进答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T17:06:10.730

虽然@sowbug 的回答在*技术上*是正确的，因为您无法修改应用程序*打包*的内容，但 OP 仍然可以实现基本相同的功能。

保存CSS：

```
var someCSSCode = 'a { color:#de0 }';
webkitRequestFileSystem(PERSISTENT, 1024*1024, function(fileSystem) {
    fileSystem.root.getFile('my.css', {create:true}, function(file) {
        file.createWriter(function(writer) {
            this.onwriteend = function() {
                this.onwriteend = null;
                this.truncate(this.position); //in case a longer file was already here
            };
            writer.write(new Blob([someCSSCode], {type:'text/plain'}));
        });
    });
}); 
```

加载CSS：

```
webkitRequestFileSystem(PERSISTENT, 0, function(fileSystem) {
    fileSystem.root.getFile('my.css', {}, function(file) {
        var elem = document.createElement('link');
        elem.rel  = 'stylesheet';
        elem.type = 'text/css';
        elem.href = file.toURL();
        document.head.appendChild(elem); //or document.body
    });
}); 
```

请注意，此代码不包含任何错误处理。

# sql - Optimize Hibernate HQL SELECT with IN clause

> ID：16076654
> 
> 赞同：0
> 
> 时间：2013-04-18T07:10:48.323
> 
> 标签：sql, hibernate, hql

Please how can I optimize this query?

```
FROM OrderEntity WHERE id IN (SELECT DISTINCT orderId FROM ProductEntity 
  WHERE code = :myCode OR extCode = :myCode) 
```

This query is too slow for the tables which has around million rows

Order 1 ... * Product

Thank you for help

**EDIT**

In pure sql I would use this query which is fast, but I don't know how to form it in HQL:

```
SELECT * FROM order o, (SELECT DISTINCT order_id FROM product WHERE code = 'ABC' 
   OR ext_code = 'ABC') p WHERE o.id = p.order_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:04:45.627

我猜 ProductEntity 可以与 OrderEntity (Foreign key order_id) 的关联进行映射。

如果为真，请尝试对其进行映射并测试此查询（内连接可能更快）：

```
SELECT o 
FROM
ProductEntity p 
INNER JOIN p.orderEntity o 
WHERE p.code = :myCode OR p.extCode = :myCode 
```

# java - Android：线程以未捕获的异常退出

> ID：16076657
> 
> 赞同：2
> 
> 时间：2013-04-18T07:10:54.447
> 
> 标签：java, android

我有问题，我找不到解决方案。当我通过蓝牙连接接收数据时，我的程序突然崩溃。我在单独的线程中接收数据，每个接收到的字节都保存在队列中。我还有一个 TimerTask，它每 1 毫秒调用一次从队列中读取数据的方法，并在 UI 中刷新 TextBox。我的程序运行了一段时间，然后突然崩溃。请帮忙。以下是主要的代码片段。

```
public class MainActivity extends Activity
{       
    TextView myLabel1;
    volatile boolean stopWorker = false;

    public Queue<Byte> receiverQueue = new LinkedList<Byte>();
    protected byte[] receiverArray;
    private boolean newDataRead = false;

    //timer
    TimerTask mTimerTask;
    Timer timer = new Timer();  
    final Handler timerHandler = new Handler();
}

@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

myLabel1 = (TextView)findViewById(R.id.textView1);
//start with timer ticking after 1 sec, and give timer tick every 1ms

onTimerTick();
timer.schedule(mTimerTask, 1000, 1); 
}

//method for reading data from receiverQueue
protected void readDataFromReceiverBuffer() {
    //if receiverQueue is not empty, read data
    if(receiverQueue.isEmpty() == false) {
        //declaration of byte array receiverField size of receiverQueue
        receiverArray = new byte[receiverQueue.size()];
        //read bytes from queue until is empty
            for (int i = 0; receiverQueue.isEmpty() == false; i++) {
                //retrieves and removes the head of this queue, or returns null 
            receiverArray[i] = receiverQueue.poll();
            }
        //variable newData is set to true, when we read new data from queue
        newDataRead = true;
    }
}       

Thread dataReceiveThread = new Thread(new Runnable() {
    //received byte
    int receivedData;
    public void run() {
        while(!Thread.currentThread().isInterrupted() && !stopWorker) {

            try { 
                //read one byte from InputStream
                receivedData = mmInStream.read();
                //inserts received byte into this queue if it is possible 
                if(receivedData != -1)
                    receiverQueue.offer((byte)receivedData);
            }
            catch (IOException ex) {
                stopWorker = true;
            }           
            //Log.i(String.valueOf(receivedData), "valueOfReceivedData");
        }           
    }       
}); 

public void onTimerTick() {
mTimerTask = new TimerTask() {
    String temp;
    //this method is called 
        public void run() {
            //call method for read data from queue
            readDataFromReceiverBuffer();
            timerHandler.post(new Runnable() {
                public void run() {
                    //when new data has arrived, we update UI 
                if(newDataRead == true) {
                    //convert byte array to string
                    temp = new String(receiverArray, 0, receiverArray.length);
                     myLabel1.setText(temp);
                     newDataRead = false;
                }                               
                    }
                }); 
      }};    
} 
```

日志猫：

```
W/dalvikvm(12358): threadid=11: thread exiting with uncaught exception (group=0x40ab1210)
E/AndroidRuntime(12358): FATAL EXCEPTION: Timer-0
E/AndroidRuntime(12358): java.lang.ArrayIndexOutOfBoundsException: length=21; index=21
E/AndroidRuntime(12358):    at com.example.colibri2bb.MainActivity.readDataFromReceiverBuffer(MainActivity.java:195)
E/AndroidRuntime(12358):    at com.example.colibri2bb.MainActivity.readDataFromReceiverBuffer(MainActivity.java:195)
E/AndroidRuntime(12358):    at com.example.colibri2bb.MainActivity$3.run(MainActivity.java:230)
E/AndroidRuntime(12358):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

日志猫：

```
W/dalvikvm(17344): threadid=12: thread exiting with uncaught exception (group=0x40ab1210)
E/AndroidRuntime(17344): FATAL EXCEPTION: Timer-1
E/AndroidRuntime(17344): java.util.NoSuchElementException
E/AndroidRuntime(17344): atjava.util.LinkedList.removeFirstImpl(LinkedList.java:689)
E/AndroidRuntime(17344): at java.util.LinkedList.removeFirst(LinkedList.java:676)
E/AndroidRuntime(17344): at java.util.LinkedList.poll(LinkedList.java:895)
E/AndroidRuntime(17344):atcom.example.colibri2bb.MainActivity.readDataFromReceiverBuffer(MainActivity.java:196)
E/AndroidRuntime(17344): atcom.example.colibri2bb.MainActivity$3.run(MainActivity.java:231)
E/AndroidRuntime(17344): at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:22:50.297

这可能是因为抛出的异常类型不是 IOException。捕获所有异常并查看 - 将 IOException 更改为 Exception。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:43:40.560

你的问题在这里：`java.lang.ArrayIndexOutOfBoundsException: length=21; index=21 MainActivity.readDataFromReceiverBuffer`。`receiverArray[21]` 当您的数组仅包含 21 个元素时，您尝试分配值！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:14:00.593

当您从中读取数据时，是否有其他线程正在修改receiverQueue 并添加数据？尝试改用这个 for 循环。它应该确保你不会越界。

```
int queueSize = receiverQueue.size();
receiverArray = new byte[queueSize ];
for (int i = 0; i<queueSize; i++) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:11:31.143

您的receiverArray 使用队列的大小进行初始化，但是当您读取队列时队列会扩展，最终得到的数据比您预期的要多。

您必须确保您没有阅读太多，很可能是通过根据大小测试索引（额外的数据将在下一次执行时读取`readDataFromReceiverBuffer`）

您还可以分配一个更大的数组（但测试仍然是强制性的）

您的第二个问题可能是您的任务太长，因此对队列有一些重叠和并发访问。（基本上，2个实例测试队列是否为空，都尝试从中读取，但只有一个元素）

我会使用一个带有循环的线程，循环执行的时间测量，以及延迟到下一次需要执行的睡眠，而不是计时器。这将确保对读取队列的单一访问。

# linux - 编译 libgcc xgcc 错误

> ID：16076660
> 
> 赞同：12
> 
> 时间：2013-04-18T07:11:06.650
> 
> 标签：linux, gcc, makefile, libgcc

我正在尝试安装交叉编译器，[本教程](http://wiki.osdev.org/GCC_Cross-Compiler)，当我想制作 libgcc 时，我只是放入`make all-target-libgcc` 了我的终端。这会引发错误

```
checking whether ln -s works... yes
checking for i586-elf-gcc...  /usr/src/build-gcc/./gcc/xgcc -B/usr/src/build-gcc/./gcc/         -B/usr/local/cross/i586-elf/bin/ -B/usr/local/cross/i586-elf/lib/ -isystem /usr/local/cross/i586-elf/include -isystem /usr/local/cross/i586-elf/sys-include   
checking for suffix of object files... configure: error: in `/usr/src/build-gcc/i586-elf/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make: *** [configure-target-libgcc] Error 1 
```

在 config.log 我发现

```
Target: i586-elf
Configured with: ../gcc-4.8.0/configure --target=i586-elf --prefix=/usr/local/cross --        disable-nls --enable-languages=c,c++ --without-headers : (reconfigured) ../gcc-4.8.0/configure --target=i586-elf --prefix=/usr/local/cross --disable-nls --enable-languages=c,c++ --without-headers : (reconfigured) ../gcc-4.8.0/configure --target=i586-elf --prefix=/usr/local/cross --disable-nls --enable-languages=c,c++ --without-headers
Thread model: single
gcc version 4.8.0 (GCC) 
configure:3358: $? = 0
configure:3347:  /usr/src/build-gcc/./gcc/xgcc -B/usr/src/build-gcc/./gcc/ -    B/usr/local/cross/i586-elf/bin/ -B/usr/local/cross/i586-elf/lib/ -isystem /usr/local/cross/i586-elf/include -isystem /usr/local/cross/i586-elf/sys-include    -V >&5
xgcc: error: unrecognized command line option '-V'
xgcc: fatal error: no input files 
```

事实上xgcc 没有'-V' 选项。我正在寻找如何编译 libgcc 的方法。

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-07T21:09:40.657

这就是问题所在：在您尝试`libgcc`按照您描述的方式构建之前，您构建了一个极端的准系统交叉编译器。现在，configure 脚本运行的部分标准测试是测试编译器，看它是否会在正常条件下生成一个工作的可执行文件。你的基本编译器不能。幸运的是，对于`libgcc`，您不需要生成可执行文件，只需生成静态库即可`libgcc.a`。问题是愚蠢的 GNU生成的`autoconf`脚本没有意识到这一点。

我遇到了同样的问题并设计了一个非常丑陋的解决方法。您需要在 gcc 源目录中注释掉 libgcc/configure 文件的一部分。这是我为我的版本注释掉的部分；做与你类似的事情：

在第 3484 行：

```
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
$as_echo "$ac_file" >&6; }
# BEGIN PHILLIP EDIT
# if test -z "$ac_file"; then :
  # $as_echo "$as_me: failed program was:" >&5
# sed 's/^/| /' conftest.$ac_ext >&5

# { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
# $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
# { as_fn_set_status 77
# as_fn_error "C compiler cannot create executables
# See \`config.log' for more details." "$LINENO" 5; }; }
# fi
ac_file='a.out'
# END PHILLIP EDIT
ac_exeext=$ac_cv_exeext 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-04-17T21:07:48.333

我在尝试自行构建 libstdc++ 时遇到了类似的问题。配置选项`--enable-offload-target=x86_64-pc-linux-gnu`解决了这个问题并`--disable-bootstrap`节省了相当多的编译时间。添加前一个标志后，`make all-target-libstdc++-v3`停止抱怨 xgcc 并且编译器无法创建可执行文件。不需要上述补丁，希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-15T03:09:52.550

注释掉`libgcc/configure`文件中的以下部分为我解决了这个问题。查看[https://stackoverflow.com/a/26245344/8138184](https://stackoverflow.com/a/26245344/8138184)以获取有关配置文件的更多上下文。

```
# for ac_option in --version -v -V -qversion; do
#   { { ac_try="$ac_compiler $ac_option >&5"
# case "(($ac_try" in
#   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
#   *) ac_try_echo=$ac_try;;
# esac
# eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
# $as_echo "$ac_try_echo"; } >&5
#   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
#   ac_status=$?
#   if test -s conftest.err; then
#     sed '10a\
# ... rest of stderr output deleted ...
#          10q' conftest.err >conftest.er1
#     cat conftest.er1 >&5
#     rm -f conftest.er1 conftest.err
#   fi
#   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
#   test $ac_status = 0; }
# done 
```

# assembly - 如何在汇编中反转和修改我的字符串？

> ID：16076667
> 
> 赞同：0
> 
> 时间：2013-04-18T07:11:23.367
> 
> 标签：assembly, masm, irvine32

我有一个项目，我想输入一个数字并说我输入 3，它会给你一个输出，

```
ZYX**XYZ

ZY****YZ

Z******Z 
```

一个5会给你

```
ZYXWV**VWXYZ

ZYXW****WXYZ

ZYX******XYZ

ZY********YZ

Z**********Z 
```

在我的项目中，我认为我的导师不会允许我使用数组，或者至少现在不允许，但这是我的想法。

我正在考虑为数字制作一个字符串，所以假设我得到一个 3。我会产生 ZYX* 并简单地将其反转以获得三角形的另一半。唯一的问题是，我不知道如何将字母一次一个地更改为星星。我正在考虑使用循环来做到这一点，但不知道该怎么做。我只知道下一个字符串是 ZY** 然后简单地反转它。

不要误会我的意思，我并不是要你们所有人为我做这件事，但也许给我一些关于如何处理它的指示或提示。谢谢你。

到目前为止，多亏了大家，我才能够想出这个。

```
TITLE MASM Template                     (main.asm)

; Description:
; 
; Revision date:

INCLUDE Irvine32.inc

.data
x       DWORD   ?
msg     BYTE    "Please input a number: " ,0dh,0ah,0

.code
;crlf
main PROC
    call    Clrscr

    MOV     edx, OFFSET msg         ; Moves message to input number into register
    call    WriteString         ; Displays message on screen to prompt user to input number
    call    readInt             ; Take the number that the user inputs
    MOV     x,eax                   ; Store it into x
    MOV     ecx, eax                ; For the loop counter  
    MOV     al, 'Z'                 ; Move Z to the register

L2:
    MOV     al, 'Z'             ; Resets al to z for loop

L1:                         ; Start of the loop with label L1
    call    WriteChar           ; To write the letters
    ;call crlf              ; To put in 'enter'
    SUB     al, 1               ; To Move the next char going downward
    LOOP    L1

    MOV     al, ' '
    call    WriteChar
    MOV     ecx, x                  ; Resets ecx for outside loop
    SUB     x, 1                    ; Decrements x for counter

    call    crlf                    ; To be tidy    
    LOOP    L2

    exit
main ENDP
END main 
```

现在我只需要另一边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:06:01.340

欢迎来到最黑暗的黑色计算机艺术 - 汇编程序！

让我们从汇编程序员的角度来看这个问题。

你有一个数字，比如说 BL（因为这是一个很好的汇编名称），你想要做的是产生 BL 输出行。假设 BL=5

现在，CX 作为一个计数器寄存器确实很好，所以如果我们将 BL 复制到 CL 并通过与自身进行异或来清除 CH，我们也有 CX=#lines。

在反转之前我们必须打印的字符数很方便地比这个多一个，所以我们可以增加 CX - 这是一个重要的数字，所以把它保存在 BP 中

每一行由字母'Z' 到('Z' - BH + 1) 和一个星号组成，然后是相反的，然后是一个新行。并且每一行，您将打印的字母数量减少一个，并在星号的数量上增加一个。

要生产一条生产线，我们会

*   加载一个寄存器 - 比如说，DL，带有'Z'（DL，因为它作为'printme'例程的输出很方便）
*   将其复制到另一个寄存器，比如 BH（寄存器到寄存器的移动比立即加载更快更小）
*   从 BH 中减去 BL，得到一个神奇的值，'Z' - 5 = 'U' - 有铃声吗？

我们想打印一个字母的计数，所以如果我们将 BP 复制到 CX 中，那应该很有用。
这是我们想做 CX 次的事情：

*   写出 DL 中的角色 - 稍作改动。
*   通过 DECREMENTING 更改 DL 中的字符

然后我们需要输出另一个 BP 字节，所以再次将 BP 复制到 CX
这是我们想做 CX 次的事情：

*   写出 DL 中的角色 - 稍作改动。
*   通过 INCREMENTING 更改 DL 中的字符

然后发送 CR 和 LF

那么 - 有什么转折点？

好吧，如果 DL 中的字符小于或等于 BH 中的字符，我们想要替换一个星号，所以

*   将 DX 保存在堆栈中
*   如果 DL<=BH，则使用 ASTERISK 加载 DL
*   输出DL
*   从堆栈中弹出 DX，在我们替换星号之前恢复它的值。

完成那一行 - 减少 BL 中的行数；如果结果非零，则产生另一行

*   如果它是零，我们都完成了。

请注意，通过减少 BL 中的行数，在生产线例程开始时从 DL 中减去的数字会减少，因此“更改为 aster”的值变为“V”、“W”...

现在让我们彻底变态。

您会注意到，两个 write-CX-characters 例程之间的唯一区别是一个 DECREMENTS 和另一个 INCREMENTS DL ...

让我们在开始之前将 SI 设置为 0FFFFH 并将 DI 设置为 1，只是为了笑。

现在 - DH 整场比赛都坐在替补席上。

假设我们编写了打印 CX 字符的例程，以便将 SI 添加到 DX。这将给我们第一次在循环中需要的减量。

*   当循环结束时，假设我们交换 DI 和 SI。
*   下次循环运行时，它将增加 DX，然后再次交换 SI 和 DI。

有用吧？

哦，当我们在扭曲时，我们可以通过使用它来存储 DL 而不是推动 DX 并将其弹出来让 DH 参与进来。将DL移动到DH，测试替换aster，写出并从DH恢复DL。

所以 - 这个例程的重点是它不依赖于存储中的字符串......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:37:48.700

我写了一篇关于如何创建[字符金字塔的](http://www.dreamincode.net/forums/topic/302352-nasmwindows-lets-create-a-pyramid-of-characters/)教程。它使用 NASM 和 Windows API 而不是 Irvine，但本教程应该可以帮助您了解后勤问题。

# c# - 从 C# 中按下的表单 2 按钮添加表单 1 中的列表框项目

> ID：16076668
> 
> 赞同：0
> 
> 时间：2013-04-18T07:11:26.093
> 
> 标签：c#, .net

我有一个表单 (form1)，它有一个 ListBox 和一个按钮。单击该按钮时，它会打开另一个表单 (form2)。在这个表单中，我有一个 TexBox 和一个按钮。单击此按钮时，我在此文本框中输入的任何内容都必须进入 form1 中的列表框。请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:20:21.720

第 1 步：将**Listbox的****Modifiers**属性设置为**Public**

 ****第2步：在Form1的按钮点击中，放

```
 Form2 fm2 = new Form2(this);
        fm2.ShowDialog(); 
```

第 3 步：在 Form2 中，将以下声明放在顶层

```
 private Form1 _fm1;

    Also add a constructor :

    public Form2(Form1 fm1)
    {
        _fm1 = fm1;
        InitializeComponent();
    } 
```

**第 4 步：在Form2**的按钮单击中，输入以下行：

```
 _fm1.ListBox1.Items.Add(Textbox1.Text);
  this.Close(); //close the Form2 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:16:04.297

制作 form1 的静态实例`public static Form1 _Form1;`，然后您可以从其他表单访问它而无需制作实例：

我写一个例子：

## Form1.cs

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            _Form1 = this;
        }
        public static Form1 _Form1;
        public void AddItem(object value)
        {
            listBox1.Items.Add(value);
        }
        private void button1_Click(object sender, EventArgs e)
        {
           Form2 _Form2 = new Form2();
          _Form2.Show();
        }
    } 
```

## Form2.cs

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form1._Form1.AddItem("your item");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:21:52.800

当您打开第二个表单时，传递对当前表单的引用：

```
var form2 = new Form2(this);
form2.Show(); 
```

在 form2 的构造函数中保存引用并在点击处理程序中使用引用

```
class Form2
{
    private Form1 _form1;
    public Form2()
    {
        // ...
    }

    public Form2(Form1 form1):this()
    {
        _form1 = form1;
    }

    void Button_Click(object sender, EventArgs e)
    {
        if(_form1 != null)
        {
            _form1.AddValue(textBox1.Text);
        }
    }
} 
```

最好定义一个包含方法“AddValue”的接口，而不是使用 Form1 类型，而是使用接口：

```
interface IAddValues
{
    void AddValue(string value);
}

class Form1: IAddValues
{
    // ...

    public void AddValue(string value)
    {
         // ...
    }
}

    // somewhere in form1:
    var form2 = new Form2(this as IAddValues);
    form2.Show(); 
```

在 form2 的构造函数中保存引用并在点击处理程序中使用引用

```
class Form2
{
    private IAddValues _valueAdder;
    public Form2()
    {
        // ...
    }

    public Form2(IAddValues valueAdder):this()
    {
        _valueAdder = valueAdder;
    }

    void Button_Click(object sender, EventArgs e)
    {
        if(_valueAdder != null)
        {
            _valueAdder.AddValue(textBox1.Text);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:20:01.940

将 Form1 设为 Form 2 的 Owner，然后就可以从 Form2 访问 Form1：

**表格1：**

```
private void Form1Button_Clicked(object sender, EventArgs e)
{
    Form2 f2 = new Form2();
f2.Owner = this;
f2.Show();
}

public void AddListItem(object text)
{
    YourListBox.Items.Add(text);
} 
```

**表格2：**

```
private void Form2Button_Clicked(object sender, EventArgs e)
{
Form1 f1 = (Form1)Owner;
f1.AddListItem(YourTextBox.Text;);
Close();
} 
```****

# flash - 如何为 adobe air 项目创建 exe 文件？

> ID：16076673
> 
> 赞同：2
> 
> 时间：2013-04-18T07:11:35.990
> 
> 标签：flash, air, flex4, installation, flash-builder

我在 flash builder 4.5 中创建了一个 adobe AIR 项目。我创建了它的本机可执行文件，但是当我双击它时，它首先安装然后我能够运行它。我的问题是：

*   我可以创建一个在使用前不需要安装的可执行文件吗？
*   或者我可以通过其他方式做到这一点吗？

与在 MFC 中一样，当我们构建项目时，它会创建一个不需要安装的可执行文件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:19:10.153

我过去为达到相同的结果所做的是使用 c#。首先，我将创建一个空白文档，而不是将库的“adobes”加载到项目中，从那里您可以将所有内容打包在一起，它将使用安装程序创建一个与任何其他 Windows exe 相同的 exe，您可以使用 c# 安装程序盒。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T15:00:32.627

如果目标系统没有安装 Adob​​e AIR 运行时，它将有一个缺点，那么您的 exe 文件将无法运行。

# ios - 如何在可可 webview xcode 中获取 div id

> ID：16076675
> 
> 赞同：0
> 
> 时间：2013-04-18T07:11:41.797
> 
> 标签：ios, objective-c

有人告诉我如何从脚本 webview 中获取 div id 我使用了这段代码，但这不起作用

```
NSString *strTitle1=[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('div_indicator').innerHTML;"];
NSLog(@"strtil:%@",strTitle1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:55:36.540

试试这个代码[Objective-C-HMTL-Parser](https://github.com/zootreeves/Objective-C-HMTL-Parser) 和这个[hpple](https://github.com/topfunky/hpple)

你有这个教程[How to parse html on iOS](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

# c++ - 具有 icu/unicode 支持的 Boost.Regex

> ID：16076678
> 
> 赞同：5
> 
> 时间：2013-04-18T07:11:52.087
> 
> 标签：c++, boost, unicode, icu, gcc-warning

如何使用 icu/unicode 支持构建 Boost.Regex？我的编译器是 GCC，IDE 是 Eclipse C++。如何使用 Eclipse 配置二进制文件？我试图做到这一点“bjam --sHAVE_ICU=1 toolset=gcc”。但它没有用。当我检查是否使用“bjam -has_icu”启用了 icu 支持时，我仍然得到“有 icu 构建：否”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T16:29:03.847

`-sICU_PATH=<icuRoot>`我使用和构建针对 ICU 的 Boost `-sICU_LINK="-L<icuLibDir>"`。

我已经看到 Boost 也无法正确检测 ICU，并且需要修补文件 has_icu_test.cpp（只需从它的 main() 函数返回 0）。如果您知道其他所有设置都正确，这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-29T11:26:02.977

通过在执行 b2 时将包含 ICU 目录的包含路径直接添加到 cflags 解决了该问题。例如：

```
./b2 --with-regex
cflags="-O0 -I\"$ICU_PATH/include\" 
```

您可能还需要添加 ICU 库的路径以及到链接器的库的完整路径。像这样的东西：

```
export ICU_LINK="-L\"$ICU_PATH/lib\" -l\"$ICU_PATH/lib/libicudata.a\" -l\"$ICU_PATH/lib/libicui18n.a\" -l\"$ICU_PATH/lib/libicuuc.a\""
./b2 --with-regex
cflags="-O0 -I\"$ICU_PATH/include\"
-sICU_LINK=$ICU_LINK \ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T19:10:33.370

## 巨兽和巨兽

在某些 unix 上，这对我有用：

`./b2 link=static,shared -sICU_PATH=/usr/local install`

在所述系统中，ICU 标头安装在`/usr/local/include`ICU 库中`/usr/local/lib`

为了测试您是否安装了 ICU 头文件（例如在 中`/usr/local/include`），请查看该目录是否`/usr/local/include/unicode/`存在并且其中是否包含大量头文件（例如`symtable.h`）

**请注意**，当我遵循当时网络的一般建议并传递`-sICU_LINK='-L/usr/local/lib'`给 boost's`b2`时，ICU 检测（版本 1.62 和 1.63）失败。

在上一个答案中，用户“NuSkooler”提到修补 boost 文件`has_icu_test.cpp`以简单地`return 0;`使测试短路，boost 认为一切都是 ICU 的 genkhi 并继续进行。

**但是**，请确保您还从该文件中**删除**了所有与 ICU 相关的函数调用和头文件，因为通常情况下`has_icu_test.cpp`首先无法编译或链接，因为 boost 内部无法找到 ICU 库或头文件。

有了所有这些，我可以确认 Aegisub's`configure`现在通过了 ICU 测试。

（所有这些都是因为约翰赫特不幸去世了，我试图把字幕放在一个片段中`Heaven's Gate`送给朋友）

湾。

# wpf - WPF 排队和重播关键事件

> ID：16076681
> 
> 赞同：11
> 
> 时间：2013-04-18T07:11:59.563
> 
> 标签：wpf, keyboard

我正在尝试提高 WPF 业务应用程序的响应能力，以便当用户在“介于”屏幕之间等待服务器响应后出现新屏幕时，他们仍然可以输入数据。我可以对事件进行排队（在后台面板上使用 PreviewKeyDown 事件处理程序），但是一旦加载，我就很难将我出列的事件扔回新面板。特别是新面板上的 TextBoxes 没有拾取文本。我尝试引发相同的事件（捕获它们时将 Handled 设置为 true，再次引发它们时将 Handled 设置为 false）创建新的 KeyDown 事件、新的 PreviewKeyDown 事件、执行 ProcessInput、在面板上执行 RaiseEvent、将焦点设置在右侧TextBox 和在 TextBox 上做 RaiseEvent，很多事情。

看起来应该*很简单*，但我想不通。

这是我尝试过的一些事情。考虑一个名为 EventQ 的 KeyEventArgs 队列：

这是不起作用的一件事：

```
 while (EventQ.Count > 0)
        {
            KeyEventArgs kea = EventQ.Dequeue();
            tbOne.Focus(); // tbOne is a text box
            kea.Handled = false;
            this.RaiseEvent(kea);
        } 
```

这是另一个：

```
 while (EventQ.Count > 0)
        {
            KeyEventArgs kea = EventQ.Dequeue();
            tbOne.Focus(); // tbOne is a text box
            var key = kea.Key;                    // Key to send
            var routedEvent = Keyboard.PreviewKeyDownEvent; // Event to send
            KeyEventArgs keanew = new KeyEventArgs(
                Keyboard.PrimaryDevice,
                PresentationSource.FromVisual(this),
                0,
                key) { RoutedEvent = routedEvent, Handled = false };

            InputManager.Current.ProcessInput(keanew);
        } 
```

还有一个：

```
 while (EventQ.Count > 0)
        {
            KeyEventArgs kea = EventQ.Dequeue();
            tbOne.Focus(); // tbOne is a text box
            var key = kea.Key;                    // Key to send
            var routedEvent = Keyboard.PreviewKeyDownEvent; // Event to send
            this.RaiseEvent(
              new KeyEventArgs(
                Keyboard.PrimaryDevice,
                PresentationSource.FromVisual(this),
                0,
                key) { RoutedEvent = routedEvent, Handled = false }
            );
        } 
```

我注意到的一件奇怪的事情是，当使用 InputManager 方法 (#2) 时，确实会出现空格。但是普通的文本键没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-27T17:41:31.910

当我做一些研究时，同样的资源出现在我身上，所以我认为你在回答中所做的事情是非常有效的。

我看了看，发现了另一种方法，使用 Win32 API。我不得不引入一些线程和小的延迟，因为由于某种原因，关键事件没有按正确的顺序重播。总的来说，我认为这个解决方案更简单，而且我还想出了如何包含修饰键（通过使用 Get/SetKeyboardState 函数）。大写字母正在工作，键盘快捷键也应如此。

启动演示应用程序，按 键`1 space 2 space 3 tab 4 space 5 space 6`，然后单击按钮会产生以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/LA5Rf.png)

xml:

```
<UserControl x:Class="WpfApplication1.KeyEventQueueDemo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300" >

    <StackPanel>
        <TextBox x:Name="tbOne" Margin="5,2" />
        <TextBox x:Name="tbTwo" Margin="5,2" />
        <Button x:Name="btn" Content="Replay key events" Margin="5,2" />
    </StackPanel>
</UserControl> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Interop;

namespace WpfApplication1
{
    /// <summary>
    /// Structure that defines key input with modifier keys
    /// </summary>
    public struct KeyAndState
    {
        public int Key;
        public byte[] KeyboardState;

        public KeyAndState(int key, byte[] state)
        {
            Key = key;
            KeyboardState = state;
        }
    }

    /// <summary>
    /// Demo to illustrate storing keyboard input and playing it back at a later stage
    /// </summary>
    public partial class KeyEventQueueDemo : UserControl
    {
        private const int WM_KEYDOWN = 0x0100;

        [DllImport("user32.dll")]
        static extern bool PostMessage(IntPtr hWnd, UInt32 Msg, int wParam, int lParam);

        [DllImport("user32.dll")]
        static extern bool GetKeyboardState(byte[] lpKeyState);

        [DllImport("user32.dll")]
        static extern bool SetKeyboardState(byte[] lpKeyState);

        private IntPtr _handle;
        private bool _isMonitoring = true;

        private Queue<KeyAndState> _eventQ = new Queue<KeyAndState>();

        public KeyEventQueueDemo()
        {
            InitializeComponent();

            this.Focusable = true;
            this.Loaded += KeyEventQueueDemo_Loaded;
            this.PreviewKeyDown += KeyEventQueueDemo_PreviewKeyDown;
            this.btn.Click += (s, e) => ReplayKeyEvents();
        }

        void KeyEventQueueDemo_Loaded(object sender, RoutedEventArgs e)
        {
            this.Focus(); // necessary to detect previewkeydown event
            SetFocusable(false); // for demo purpose only, so controls do not get focus at tab key

            // getting window handle
            HwndSource source = (HwndSource)HwndSource.FromVisual(this);
            _handle = source.Handle;
        }

        /// <summary>
        /// Get key and keyboard state (modifier keys), store them in a queue
        /// </summary>
        void KeyEventQueueDemo_PreviewKeyDown(object sender, KeyEventArgs e)
        {
            if (_isMonitoring)
            {
                int key = KeyInterop.VirtualKeyFromKey(e.Key);
                byte[] state = new byte[256];
                GetKeyboardState(state); 
                _eventQ.Enqueue(new KeyAndState(key, state));
            }
        }

        /// <summary>
        /// Replay key events from queue
        /// </summary>
        private void ReplayKeyEvents()
        {
            _isMonitoring = false; // no longer add to queue
            SetFocusable(true); // allow controls to take focus now (demo purpose only)

            MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); // set focus to first control

            // thread the dequeueing, because the sequence of inputs is not preserved 
            // unless a small delay between them is introduced. Normally the effect this
            // produces should be very acceptable for an UI.
            Task.Run(() =>
            {
                while (_eventQ.Count > 0)
                {
                    KeyAndState keyAndState = _eventQ.Dequeue();

                    Application.Current.Dispatcher.BeginInvoke((Action)(() =>
                    {
                        SetKeyboardState(keyAndState.KeyboardState); // set stored keyboard state
                        PostMessage(_handle, WM_KEYDOWN, keyAndState.Key, 0);
                    }));

                    System.Threading.Thread.Sleep(5); // might need adjustment
                }
            });
        }

        /// <summary>
        /// Prevent controls from getting focus and taking the input until requested
        /// </summary>
        private void SetFocusable(bool isFocusable)
        {
            tbOne.Focusable = isFocusable;
            tbTwo.Focusable = isFocusable;
            btn.Focusable = isFocusable;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T19:29:50.633

入队系统是我自己想做的事情，作为我项目的一部分，它允许多线程 UI 正常运行（一个线程将事件路由到另一个线程）。只有一个小问题，即 WPF 没有公共 API 来注入 INPUT 事件。这是几周前与我交谈过的一位微软员工的副本/粘贴：

“WPF 没有公开用于以正确方式注入输入事件的公共方法。公共 API 不支持这种情况。您可能需要进行大量反射和其他黑客攻击。例如，WPF 将某些输入视为“受信任”，因为它知道它来自消息泵。如果您只是引发输入事件，则该事件将不受信任。”

我认为你需要重新考虑你的策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T08:44:55.553

感谢大家的支持，但我还没有真正从 SO 社区找到解决方案，所以我要自己回答这个问题，因为这是我似乎最接近解决方案的地方。Erti-Chris 所说的“黑客”似乎是我们所剩下的。我有一些运气分解了这个问题，所以我没有感觉我正在编写一个全新的键盘处理程序。我遵循的方法是将事件分解为 InputManager 处理和 TextComposition 的组合。投掷 KeyEventArgs（原始的或我自己创建的）似乎没有在 PreviewKeyDown 处理程序上注册。

部分困难来自 Erti-Chris 帖子中的信息，另一部分似乎与 TextBoxes 试图对某些键（如箭头键）做出与字母“A”等普通键不同的反应有关。

为了继续前进，我发现这篇文章中的信息很有用：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b657618e-7fc6-4e6b-9b62-1ffca25d186b](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b657618e-7fc6-4e6b-9b62-1ffca25d186b)

这是我从现在开始得到一些积极结果的解决方案：

```
 Keyboard.Focus(tbOne); // the first element on the Panel to get the focus
    while (EventQ.Count > 0) 
    {
        KeyEventArgs kea = EventQ.Dequeue();
        kea.Handled = false;
        var routedEvent = KeyDownEvent; 

        KeyEventArgs keanew = new KeyEventArgs(
                     Keyboard.PrimaryDevice,
                     PresentationSource.FromVisual(tbOne),
                     kea.Timestamp,
                     kea.Key) { RoutedEvent = routedEvent, Handled = false };
        keanew.Source = tbOne;

        bool itWorked = InputManager.Current.ProcessInput(keanew);
        if (itWorked)
        {
            continue;
            // at this point spaces, backspaces, tabs, arrow keys, deletes are handled
        }
        else
        {
            String keyChar = kea.Key.ToString();
            if (keyChar.Length > 1)
            {
                // handle special keys; letters are one length
                if (keyChar == "OemPeriod") keyChar = ".";
                if (keyChar == "OemComma") keyChar = ",";
            }
            TextCompositionManager.StartComposition(new TextComposition(InputManager.Current, Keyboard.FocusedElement, keyChar));
        }
    } 
```

如果有人可以向我展示更好的方法，我很高兴将您的贡献标记为答案，但现在这就是我正在使用的。

# excel - 如何在excel VBA中只保留每对的最后一个值？

> ID：16076682
> 
> 赞同：4
> 
> 时间：2013-04-18T07:12:01.217
> 
> 标签：excel, vba

```
Contract No Price
D/019/09    17.85
D/019/09    17.85
D/019/09    17.85
D/019/09    17.85
D/023/09    17.85
D/023/09    17.85
D/026/09    0
D/026/09    0
D/038/11    20.6
D/038/11    20.6
D/038/11    20.6 
```

以上是一个示例数据系列......我想只保留每个唯一合同编号的最后一次出现。在上面的示例中，我只想保留 D/023/09 17.85、D/026/09 0 和 D/038/11 20.6。所以应该只有 3 个唯一值。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:33:09.553

除了我的评论之外，还有另一种方式，它**不需要对您的数据进行排序**。参见示例`D/019/09`

```
=IF(COUNTIF($A2:$A$13,A2)>1,0,B2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/o7O5j.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:23:22.367

这里不需要 vba ... 添加列 C 并将其命名为“检查”。在单元格 C2 中插入以下公式：

```
=if(A2<>A3,1,0) 
```

比复制该公式直到您的数据范围结束。接下来在 C 列中为 0 应用过滤器。删除所有行就可以了。

您之前的工作表：

![在此处输入图像描述](https://i.stack.imgur.com/znce1.jpg)

您的工作表之后：

![在此处输入图像描述](https://i.stack.imgur.com/PTOC3.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:25:59.203

试试下面的代码。使用 VBA

![在此处输入图像描述](https://i.stack.imgur.com/BktIl.png)

```
Sub sample()

    Dim lastRow As Long, j As Long
    lastRow = Range("A65000").End(xlUp).Row

    j = 1
    For i = lastRow To 2 Step -1
        If Cells(i, 1).Value <> Cells(i + 1, 1) Then
            Cells(i, 1).Copy Cells(j, 3)
            Cells(i, 1).Offset(0, 1).Copy Cells(j, 4)
            j = j + 1
        End If
    Next
End Sub 
```

# c# - 绑定转发器后使用Sql数据

> ID：16076683
> 
> 赞同：1
> 
> 时间：2013-04-18T07:12:02.000
> 
> 标签：c#, sql

在将我的查询绑定到转发器后，我希望使用数据库中的一些数据。但我不确定我应该如何做到这一点。这是我的代码：

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString());
SqlCommand cmd = new SqlCommand("SELECT * FROM kontakt", conn);

conn.Open();
SqlDataReader reader = cmd.ExecuteReader();
Repeater_Beskeder.DataSource = reader;
Repeater_Beskeder.DataBind();

    foreach (RepeaterItem row in Repeater_Beskeder.Items)
    {
        if (reader.Read())
        {
            Panel Vis_Panel = (Panel)row.FindControl("Panel_Vis_Besked");
            if (Request.QueryString["id"].ToString() == reader["id"])
            {
                Vis_Panel.Visible = true;
            }
        }
    }
conn.Close(); 
```

我的阅读器无法工作，因为它已经绑定到我的中继器上，所以我很迷茫。我希望你们中的一些人对这个问题有另一种解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:54:47.313

ItemDataBound 事件 在Repeater 控件中的项目被数据绑定之后但在页面上呈现之前发生。

```
 void Repeater_Beskeder_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

      // This event is raised for the header, the footer, separators, and items.

      // Execute the following logic for Items and Alternating Items.
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
         Panel Vis_Panel = (Panel)row.FindControl("Panel_Vis_Besked");
        if (Request.QueryString["id"].ToString() == reader["id"])
        {
            Vis_Panel.Visible = true;
        }
      }
   } 
```

# java - 分配本机缓冲区并在 JAVA 中使用？

> ID：16076686
> 
> 赞同：0
> 
> 时间：2013-04-18T07:12:22.797
> 
> 标签：java, android, c++, android-ndk, java-native-interface

我有位图，我应该在 c++ 和 Java 方面进行操作。因此，根据[这篇](https://stackoverflow.com/questions/5060307/bytebuffer-not-releasing-memory)文章，我在 C++ 中分配了缓冲区并将引用传递给 Java。[在 Java 中，我使用copyPixelsToBuffer](http://developer.android.com/reference/android/graphics/Bitmap.html#copyPixelsToBuffer%28java.nio.Buffer%29)方法从位图填充缓冲区。当我尝试从该缓冲区创建位图（没有任何操作）时，[decodeByteArray](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int,%20android.graphics.BitmapFactory.Options%29)返回 null。而且我不明白我的错误是什么。在我使用的代码下方。

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPreferredConfig = Bitmap.Config.ARGB_8888;
    mCurrentBitmap = BitmapFactory.decodeFile(hardCodedPath, options);

    // 4- bytes count per pixel
    bytesCount = mCurrentBitmap.getWidth() * mCurrentBitmap.getHeight() * 4;

    pixels = (ByteBuffer) allocNativeBuffer(bytesCount);
    pixels.order(ByteOrder.nativeOrder());

    mCurrentBitmap.copyPixelsToBuffer(pixels);
    pixels.flip();
    pixels.order(ByteOrder.BIG_ENDIAN);
    byte[] bitmapdata = new byte[pixels.remaining()];

    pixels.get(bitmapdata);

    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inDither = true;
    opt.inPreferredConfig = Bitmap.Config.ARGB_8888;

    Bitmap bitmap = BitmapFactory.decodeByteArray(bitmapdata, 0, bitmapdata.length, opt); 
```

任何意见和建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:12:11.153

这是我的做法。

`ByteBuffer mPixels = ByteBuffer.allocateDirect( saveWidth*saveHeight*4).order(ByteOrder.nativeOrder()); GLES20.glReadPixels(0, 0, mWidth, mHeight, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, mPixels);`

 ````
resultBitmap = Bitmap.createBitmap(mWidth, mHeight, Config.ARGB_8888);
 resultBitmap.copyPixelsFromBuffer(mPixels); 
````

# php - PHP Jquery onchange 事件

> ID：16076687
> 
> 赞同：1
> 
> 时间：2013-04-18T07:12:25.667
> 
> 标签：php, jquery, onchange

我在表单中有一个带有过滤器的选择框，如何使用 jquery 替换`onchange`事件以避免整个页面刷新？我希望某些 div 块能够在选择某些选项时重新加载回调数据。

```
<form name="form_filter" action="<?php echo $_SERVER['PHP_SELF'].'?'.$_SERVER['QUERY_STRING'].'#network-programs' ?>" method="post" enctype="multipart/form-data">
Genre:
<select name="filterGenre" id="filterGenre" onchange="this.form.submit()"  >
<option value="all" selected="selected">All</option>
<?php
$query1 = "SELECT * FROM video WHERE vcat_id IN(SELECT category_id FROM categories WHERE video_id IN(SELECT vid FROM `video` WHERE vuser_id='8') AND main_cat=1)";
$result = mysql_query($query1);

while($row = mysql_fetch_assoc($result)) {
    $vcat_id = stripslashes($row['vcat_id']);
    $vcat_name = stripslashes($row['vcat_name']);

    echo "<option value='".$vcat_id."'"; 
    if($vcat_id == $_POST['filterGenre']){echo ' selected ';}
    echo ">".$vcat_name."</option>";
}
?>
</select>

</form> 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:19:33.340

```
$(document).ready(function(){

$('#filterGenre').change(function(){

$.ajax({
      url   : your form action,
      data  : $('#your form id').serialize(),
      type : 'POST',
      success : function(data){
                      $('#yourdiv').html(data);
                  }

  })

})

}) 
```

从选择中删除 onchange

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:16:39.907

您可以将 AJAX 与 jquery 一起使用。

[w3schools](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_load)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:26:00.520

你可能会写这样的东西：

```
<form id='form' ...
   <select name="filterGenre" id="filterGenre" onchange="send_it()" ...
   ...

<script>
   function send_it(){
                      $.ajax({
                         type: 'GET',
                         url: 'http://www.site.com/page.php',
                         data: $('#form').serialize(),
                         success: function(){
                            alert('done!');
                         }
                      });
   }
</script> 
```

# node.js - 关于安全的 expressjs req 和 res 对象参数

> ID：16076693
> 
> 赞同：0
> 
> 时间：2013-04-18T07:12:53.357
> 
> 标签：node.js, express

我用express写了一个应用程序，我想在全局中实现一个变量current_user，以确保用户是否登录。所以，我添加了一个中间件

```
app.use(require('./controller/user').auth_user); 
```

在 user.js 中，我定义了一个名为 auth_user 的方法，使用 res.locals 设置一个全局本地 current_user。并设置 req.session.user=user。

```
exports.auth_user = function(req, res, next) {
  if (req.session.user) {
    res.locals('current_user', req.session.user);
    return next();
  } else {
  var cookie = req.cookies['user_cookie'];
  if (!cookie){
    res.locals('current_user', "");
    return next();
  };
  var auth_token = decrypt(cookie, 'user_session');
  var auth = auth_token.split('\t');
  var user_email=auth[3].toLowerCase();
  User.findOne({'email': user_email},function(err, result) {
    if(err) return next(err);
    if (result) {
      req.session.user = result;
      res.locals('current_user', req.session.user);
      return next();
    }else{
      return next();
    }
  });
  }
}; 
```

所以，我给req放了一个user对象，调试的时候发现可以从req获取user.hashed_pa​​ssword。我觉得不安全。浏览器端的用户可以获取此信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:18:54.183

只要您不将信息暴露在其他任何地方，这是安全的。至少从浏览器无法访问`req`对象的角度来看。

`req`无论如何，另一个问题是如果您只需要它的某些特定部分，将完整的用户对象附加到对象是否是最好的主意。为什么不附加一个不包含散列的对象的精简版本？

那么不管浏览器是否能够访问它，你的问题无论如何都消失了。

# javascript - 如果找不到 javascript，则终止代码

> ID：16076695
> 
> 赞同：1
> 
> 时间：2013-04-18T07:13:02.230
> 
> 标签：javascript, noscript

如果浏览器中没有启用 javascript，我试图显示一条消息，然后我不想继续加载页面。我使用 php 所以我做了

```
<?php exit;?> 
```

在 noscipt 中，但尽管浏览器启用了 javascript，但 php 代码退出工作......我使用的代码是这样的：

```
<noscript>
        <div style="text-align:center; margin-top:15px; color:#f00; margin-bottom:10px;text-decoration: blink;">
            <h1>
                Please enable javascript<br style="margin-bottom: 5px;"/>
                <h3>Else the system will not work correctly.</h3>
            </h1>
        </div>
        <div align="center">
            <div class="title" style="font:bold 18px arial">Enabling Javascript</div>
            For: <strong>FireFox</strong>
            Go To:<strong>Options > Content</strong><br/> and Check the Enable Javascript.
            <br/>OR<br/>
            Refer this link to enable javascript according to your browser<br/>
            <a href="http://www.enable-javascript.com/">http://www.enable-javascript.com/</a>
            <?php exit;?>
        </div>
    </noscript> 
```

如果未启用javascript，我应该不继续进行什么，如果启用了js，我应该继续......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:23:59.963

[noscript](http://www.w3schools.com/TAGS/tag_noscript.asp)块在禁用 javascript 时执行，用于显示替代内容。

```
<noscript>
    <b>You don't have javascript enabled.</b>
</noscript> 
```

或者，如果禁用了 javascript，您可以将用户重定向到另一个页面。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <noscript>
            <meta http-equiv="refresh" content="0; /?javascript=no">
        </noscript>
        <meta charset="UTF-8"/>
        <title></title>
    </head>
</html> 
```

在您的 php 代码中，您可以检查

```
if(isset($_GET['javascript']) && $_GET['javascript'] == 'no')
{
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:15:43.403

使用`<noscript>`标签 -

```
<noscript>Your browser does not support JavaScript!</noscript> 
```

你也可以试试这个

```
if(isset($_GET['nojs']) && !isset($_SESSION['no_script']))
{
    $_SESSION['no_script'] = true; //Or cookie
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:15:49.810

您可以使用重定向，因此您可以将用户发送到一个页面，其中包含一条消息，例如如果禁用 JAVASCRIPT，您将无法访问该站点。

```
 <noscript>
 <meta http-equiv="refresh" content="0; url=http://www.yourdomain.com/nojsmessage.php" />
  </noscript> 
```

# android - 为什么不为 android:configChanges="locale" 调用 onConfigurationchanged？

> ID：16076698
> 
> 赞同：1
> 
> 时间：2013-04-18T07:13:09.313
> 
> 标签：android, android-manifest, local

当语言发生变化时，我想做点什么。所以我在 Manifest.xml 中的属性 andorid:configCahnges 语言环境中放置了活动：

```
 <activity
        android:name=".MainActivity"
        android:configChanges="orientation|keyboardHidden|screenSize|locale"
        android:hardwareAccelerated="true"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.DeviceDefault.NoActionBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>           
        </intent-filter>
    </activity> 
```

但是当我运行我的应用程序并转到设置和更改语言时，方法 onConfigurationchanged 不会在 MainAcitvity 中调用。为什么？android的文档说它应该。我为 API 16 开发。

我发现如果我添加到`android:configChanges`layoutDirection 并设置`android:minSdkVersion="17"`该方法被调用。（我在 4.2.2 上运行应用程序）

但现在我无法将文本刷新为新语言。我试着打电话：

```
 getResources().updateConfiguration(newConfig, getResources().getDisplayMetrics()); 
```

在 onConfigurationChanged 但没有成功。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T08:54:37.863

```
 android:configChanges="locale|layoutDirection" 
```

工作于 4.4

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-25T15:59:41.747

**您必须定义 android:configChanges="layoutDirection|locale" 才能调用 onConfigurationChanged()。**

# java - 创建测试数据：域构建器

> ID：16076699
> 
> 赞同：1
> 
> 时间：2013-04-18T07:13:10.470
> 
> 标签：java, hibernate, testing, tdd, test-data

我想使用底层内存数据库为我的测试创建测试数据。常见的方法是创建一些**test_data.sql**文件并使用插入创建测试对象。然后在java测试中引用这些对象。

[我在《Growing Object-Oriented Software, Guided by Tests](https://rads.stackoverflow.com/amzn/click/com/0321503627) 》中读到，测试不需要深入细节。例如，如果测试想要现有用户具有新状态，那么他不需要创建用户并填写所有字段。但他应该只告诉他，他希望用户具有 NEW 状态，并且所有其他字段都应该填充默认值。

所以我想要辅助方法，比如这个：

```
User user = user(UserStatus.NEW); // inserts user in database
// ... use persistent user instance in test 
```

但是我的数据库模式有很多表，我来到以下代码：

```
Domain domain = new DomainBuilder().user(UserStatus.NEW).agreement().account().account().build(); 
```

域类：

```
public class Domain {
    private User user;
    private Agreement agreement;
    private Account account;
    // getters/setters
} 
```

此代码创建用户、协议（与 FK 到用户）、两个帐户（与 FK 到协议）并返回包含这些实体的域对象。

因此，使用此代码，我基本上可以在一行中为特定测试设置测试数据。

这种测试数据生成方法与 SQL 相比具有以下优点：

*   我不坚持所有表列，如果添加/删除了某些列/约束，那么我不需要在测试中更改测试数据生成。

*   更简洁的方式是 SQL：我可以在一行中设置测试数据，而 SQL 方法需要为每个对象编写 INSERT。

*   它花费的时间更少。是的，首先你开始使用这种方法，你必须花一些时间来实现这样的域构建器，但是一旦你完成了，你就会节省很多时间。

*   集中对象创建。如果您的数据库模式发生了变化，那么您只需在一处更改对象创建逻辑。

*   你不需要坚持使用像 USER_WITH_NEW_STATUS_ID 这样的 java 常量。

**我的问题是：**

是否有人也采用这种方法以及您为此使用哪些库/工具/约定？

**更新：** 我在几种测试类型中使用这种方法：

*   存储库测试（例如存储库正确过滤对象，或者它以正确的顺序返回对象列表）。

*   业务逻辑+数据库集成测试（单元测试很好，但有时我需要100%确定我的业务逻辑和存储库逻辑是一致的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:43:02.163

你检查过 DBUnit 吗？

[http://www.dbunit.org/](http://www.dbunit.org/)

它是针对数据库驱动项目的 JUnit 扩展，除其他外，它使您的数据库在测试运行之间进入已知状态。

数据集是一个简单的 XML 文件。

# dojox.grid.datagrid - 编辑单元格时 Dojo 数据网格行颜色发生变化

> ID：16076701
> 
> 赞同：0
> 
> 时间：2013-04-18T07:13:19.940
> 
> 标签：dojox.grid.datagrid

每当我进行编辑时，我都需要更改 dojo 数据网格中行的颜色。我试过`dojo.connect`了，但是当我将鼠标悬停在其他单元格上时，它会第一次工作，它会自动改变其他行的颜色。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T03:23:19.130

您需要执行以下操作

1）CSS变化

```
.yellowishRow .dojoxGridCell {
    background-color: #F3F781;
} 
```

在你的 javascript

```
dojo.connect(dijit.byId("grid"),"onStyleRow",this,function(row){
        var item = dijit.byId("grid").getItem(row.index);
        if (item) {
            var type = store.getValue(item, editMode, null);
                if (type == "1") {
                    row.customClasses += ' regStartedRow';
            }
        dijit.byId("grid").focus.styleRow(row);
        dijit.byId("grid").edit.styleRow(row);

    }); 
```

# oauth - 单个应用程序的多个 OAuth2 访问令牌？

> ID：16076706
> 
> 赞同：5
> 
> 时间：2013-04-18T07:13:40.097
> 
> 标签：oauth, oauth-2.0, google-oauth

也许有人可以澄清我，因为我没有发现在文档中清楚地写...

我确实有一个应用程序，它在多台机器上运行。使用 OAuth2，我必须获得访问令牌才能使用 Google API。我是否需要在我的所有主机上使用**单个**访问令牌并注意它会在它们之间同步（这会增加复杂性级别，因为一旦令牌过期 - 它必须刷新并再次分布在所有主机上），或者有可能每个主机都可以获得自己的令牌并在本地缓存它吗？

我不确定第二个选项是否安全（尽管它更容易实现），因为文档写道，令牌一旦刷新就会变得无效。是否会发生，当一个主机创建其“自己的”令牌时，所有其他令牌（来自其他主机）会自动失效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:40:11.913

我假设您的应用程序是部署在集群中的 Web 应用程序，对吗？

是否有会话状态分布在集群上？如果是这样，请将访问令牌添加到会话中。

从理论上讲，您可以拥有多个访问令牌，但不要依赖于此。您可能会遇到速率限制，但如果只是偶尔一台机器获得多个访问令牌，这不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:36:08.903

由于它是一个应用程序，因此一个访问令牌是首选方法。如果您有多个访问令牌，那么您需要将每台机器视为一个单独的应用程序，最终用户需要单独授权每台机器。

为了避免级联刷新（机器一得到过期响应并进行刷新，然后机器二在机器一获取新的访问令牌之前做同样的事情），无论你在哪里存储令牌，你都需要一些同步逻辑。数据存储中的一个简单状态标志（使用现有令牌，获取新令牌）可以帮助同步。

# r - 使用 R 中的 WinBUGS 时出错

> ID：16076709
> 
> 赞同：2
> 
> 时间：2013-04-18T07:13:45.230
> 
> 标签：r, winbugs, mcmc, r2winbugs

代码如下：

```
require(BRugs)
require(R2WinBUGS)
model<-function(){
  for(i in 1:N){
  y[i] ~ dnorm(x[i], sigma.y)
  }
  x[1] ~ dnorm(theta[1], sigma.y)
  theta[1] <- 0
  for(j in 2:N){
    x[j] ~ dnorm(theta[j], sigma.x)
    theta[j] <- b*x[j-1] # this row wrong, 
# it would be right when I set theta[j] <- 1*x[j-1]
  }
  a ~ dunif(0, 1)
  b ~ dunif(-1, 1)
  sigma.y ~ dgamma(0.1, 0.1)
  sigma.x ~ dgamma(0.1, 0.1)
}
data <- list( N <- 100, y <- rnorm(100))
data=list(N=100,y=rnorm(100))

inits=function(){
  list(sigma.x = rgamma(1,0.1,0.1), sigma.y = rgamma(1, 0.1, 0.1), a = dnorm(1, 0, 1), b = dnorm(1, -1, 1))
}
parameters=c("a", "b", "x")

write.model(model, con = "model.bug")
modelCheck("model.bug")
# model is syntactically correct
ret.sim <- bugs(data, inits, parameters, "model.bug",
                n.chains = 1, n.iter = 1000,
                program= "winbugs",
                working.directory = NULL,
                debug = T) 
```

我不知道为什么，当我替换为时程序会正确`theta[j] <- b*x[j-1]`，`theta[j] <- 1*x[j-1]`但我已经定义了`b ~ dunif(-1, 1)`. 确实，我需要`theta[j] <- a - b*x[j-1]`在最终模型中进行设置，当我尝试添加`a`并`b`进入它时结果是错误的。有谁发现问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:23:54.827

问题在于您对 b（很可能是 a）的先验。我不知道您的数据，但您当前的先验范围可能不包括 a 和 b 的真实值。我认为如果您使用连续分布：

```
a ~ dnorm(0,1)
b ~ dnorm(0,1) 
```

你的问题可能会解决吗？

nb 如果您尝试为 WinBUGS 创建 AR(1) 模型，您可能需要查看[tsbugs](http://cran.r-project.org/web/packages/tsbugs/index.html)包。

# javascript - LESS — 数据 uri 画家 mixin

> ID：16076713
> 
> 赞同：2
> 
> 时间：2013-04-18T07:14:03.010
> 
> 标签：javascript, node.js, css, less, data-uri

我正在尝试实现 mixin 自定义文本下划线，例如[CSS3 文本装饰属性的](https://developer.mozilla.org/en-US/docs/CSS/text-decoration-line)polyfill ：线条、样式、颜色，浏览器尚不支持。

我的想法是在画布中绘制正确的线条，然后将其转换为 data-uri 并将其用作目标元素的背景。问题是使用 node.js 编译 LESS 时，环境中没有画布。从技术上讲，我可以使用[node-canvas](https://github.com/LearnBoost/node-canvas)来执行此任务，但我不想为 node 建立任何依赖关系只是为了编译 LESS。

有没有一种好的和简单的替代方法来以某种方式绘制微图像并基于此形成 data-uri，而不使用外部库或依赖项？

已解决：PNG 数据生成器代码和[此处](https://github.com/dfcreative/data-uri-generator)的一些演示。它`.png`是生成索引颜色 png 的 mixin，接受字节流（字符串）作为数据，其中 00 - 透明颜色，01 - 传递颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T22:15:11.853

我不完全确定你想如何实现 mixin（你想用 mixin 做什么），但也许其中一些会有所帮助。

*   **首先：您可以在**[LESS](http://lesscss.org/#-javascript-evaluation)的 javascript 实现中使用 javascript 插值，使用反引号。

*   **第二：** LESS中也有一些画微图的解决方案……我最近才看到这篇博文：http: [//micheljansen.org/blog/entry/1238](http://micheljansen.org/blog/entry/1238)

这里的想法是有一个简单的 gif 背景，只需更改颜色（使用一些嵌入的 javascript 将 rgb 转换为 64 位基础）。例如，要`wavy`像在 css 中使用的那样做线条效果，`text-decoration-style:wavy;`您可以使用以下 LESS 代码：

```
.wavyrgb(@r,@g,@b) {
    @key: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    @b64: `function(r,g,b){var key=@{key};return key.charAt(((0&3)<<4)|(r>>4))+key.charAt(((r&15)<<2)|(g>>6))+key.charAt(g&63)+key.charAt(b>>2)+key.charAt(((b&3)<<4)|(255>>4))}(@{r},@{g},@{b})`;
    background-image: ~"url(data:image/gif;base64,R0lGODlhBgADAIAAA@{b64}///yH5BAEAAAEALAAAAAAGAAMAAAIHTAB2lqlQAAA7)";
} 
```

然后将背景图片放在底部，例如：

```
.underwave {
    text-decoration:none;
    .wavyrgb(255,0,0); //red line
    background-repeat:repeat-x;
    background-position:bottom;
} 
```

输出**CSS：**

```
.underwave {
  text-decoration: none;
  background-image: url(data:image/gif;base64,R0lGODlhBgADAIAAAP8AAP///yH5BAEAAAEALAAAAAAGAAMAAAIHTAB2lqlQAAA7);
  background-repeat: repeat-x;
  background-position: bottom;
} 
```

* * *

**现在剩下的只是一些 css 提示来完成该方法：**

通过这种方式定位`background-image`到顶部或底部，您可以获得上划线或下划线效果。使用 .放置在文本的后面`text-decoration-line`。如果你想把这一行放在文本的前面，就像在 option 中一样`line-through`，你需要`:afetr`在你的 CSS 中使用伪类：

```
.throughwave {
  text-decoration: none;
  position:relative;
}
.throughwave:after {
  background-image: url(data:image/gif;base64,R0lGODlhBgADAIAAAP8AAP///yH5BAEAAAEALAAAAAAGAAMAAAIHTAB2lqlQAAA7);
  background-repeat: repeat-x;
  background-position: center;
} 
```

也有关于添加闪烁效果的讨论……例如这里的 CSS 动画：

*   [如何让图像闪烁？](https://stackoverflow.com/questions/12115247/how-do-you-make-an-image-blink/12115388#12115388)
*   [CSS3 动画：闪烁的覆盖框](https://stackoverflow.com/questions/6390639/css3-animation-blinking-overlay-box)

或者您可以使用 jQuery 来使元素闪烁。

例如，您可以通过使用多个背景图像并将一张放在顶部、一张放在底部来实现效果的组合。

[在这里，我整理了一个关于 jsfiddle](http://jsfiddle.net/KVzmE/)的快速演示。

* * *

## 编辑：纯 LESS 混合（无 JS）：

> 我编写了一个新的 mixin 来仅使用 LESS 计算**base64**颜色，因此它适用于所有 LESS 实现。

这是一个 LESS **1.4.0**解决方案：

```
.b64(@r,@g,@b) {
    @test: "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V" "W" "X" "Y" "Z" "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z" 0 1 2 3 4 5 6 7 8 9 "+" "/" "=";
    @bit1: extract(@test, (floor(@r/16) + 1)); @bit2: extract(@test, (mod(@r,16)*4 + floor(@g/64) + 1)); @bit3: extract(@test, (mod(@g,64) + 1)); @bit4: extract(@test, (floor(@b/4) + 1)); @bit5: extract(@test, (mod(@b,4)*16 + 16));
    b64-color: ~"@{bit1}@{bit2}@{bit3}@{bit4}@{bit5}";
} 
```

这应该适用于所有 LESS 版本 >= **1.1.6**：

```
.b64(@r,@g,@b) {
    @1:"A"; @2:"B"; @3:"C"; @4:"D"; @5:"E"; @6:"F"; @7:"G"; @8:"H"; @9:"I"; @10:"J";    @11:"K";    @12:"L";    @13:"M";    @14:"N";    @15:"O";    @16:"P";    @17:"Q";    @18:"R";    @19:"S";    @20:"T";    @21:"U";    @22:"V";    @23:"W";    @24:"X";    @25:"Y";    @26:"Z";    @27:"a";    @28:"b";    @29:"c";    @30:"d";    @31:"e";    @32:"f";    @33:"g";    @34:"h";    @35:"i";    @36:"j";    @37:"k";    @38:"l";    @39:"m";    @40:"n";    @41:"o";    @42:"p";    @43:"q";    @44:"r";    @45:"s";    @46:"t";    @47:"u";    @48:"v";    @49:"w";    @50:"x";    @51:"y";    @52:"z";    @53:0;  @54:1;  @55:2;  @56:3;  @57:4;  @58:5;  @59:6;  @60:7;  @61:8;  @62:9;  @63:"+";    @64:"/";    @65:"=";
    @modR16: @r - floor(@r/16)*16; @modG64: @g - floor(@g/64)*64; @modB4: @b - floor(@b/4)*4;
    @pos1: (floor(@r/16) + 1); @pos2: (@modR16*4 + floor(@g/64) + 1); @pos3: (@modG64 + 1); @pos4: (floor(@b/4) + 1); @pos5: (@modB4*16 + 16);
    @bit1: @@pos1; @bit2: @@pos2; @bit3: @@pos3; @bit4: @@pos4; @bit5: @@pos5;
    b64-color: ~"@{bit1}@{bit2}@{bit3}@{bit4}@{bit5}";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T12:35:05.840

data-uri 函数现在是内置的：

[http://lesscss.org/functions/#misc-functions-data-uri](http://lesscss.org/functions/#misc-functions-data-uri)

# java - 引用Java中的变量？

> ID：16076715
> 
> 赞同：-3
> 
> 时间：2013-04-18T07:14:19.960
> 
> 标签：java, multidimensional-array

我有一个名为的 3D 数组`eM`：

```
double[][][] eM = new double[4][4][4]; 
```

我还有一个帮助方法将 an 转换`int`为 a `char`：

```
public static char intToChar(int i) {
    switch (i) {
    case 0:
        return 'A';
    case 1:
        return 'B';
    case 2:
        return 'C';
    default:
        return 'D';
    }
} 
```

我有四个整数变量：

```
int A = 108;
int B = 299;
int C = 302;
int D = 411; 
```

现在，这是棘手的部分。我想遍历 3D 数组 eM 的每个索引并将其索引值相乘。所以 `[0][0][0] = 1*1*1 = 1; [0][0][1] = 1*1*2 = 2; ...; [3][3][3] = 4*4*4 = 64`。

```
for (int i=0; i<4; i++){
    for (int j=0; j<4; j++){
        for (int k=0; k<4; k++){
            char I = intToChar(i);
            char J = intToChar(j);
            char K = intToChar(k);
            // Not sure what to do here
        }
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:16:23.140

您需要能够通过索引引用 A...D，因此您需要在数组中对它们进行索引：

```
int[] d = {A, B, C, D}; 
```

在 for 循环之前。然后你的 for 循环很简单：

```
eM[i][j][k] = d[i]*d[j]*d[k]; 
```

这会将 at`(i,j,k)`的每个值设置为相应的 A...D 被乘数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:17:24.953

所以要获取索引对应的char对应的整数值。我认为您可以删除 intToChar 步骤并直接获取所需索引的整数值。

```
public static int getIntValue(int i) {
    switch (i) {
    case 0:
        return 108;
    case 1:
        return 299;
    case 2:
        return 302;
    default:
        return 411;
    }
}

for (int i=0; i<4; i++){
        for (int j=0; j<4; j++){
            for (int k=0; k<4; k++){
                eM[i][j][k]= getIntValue(i) * getIntValue(j) * getIntValue(k);

            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:19:39.407

你需要这样做：

```
char I = intToChar(i);
char J = intToChar(j);
char K = intToChar(k);
eM[i][j][k] =  I*J*K; 
```

除此之外，您还应该为任何大小的 3D 数组推广 for 循环。

```
for (int i=0; i<eM.length; i++){
        for (int j=0; j<eM[i].length; j++){
            for (int k=0; k<eM[i][j].length; k++){
                //here goes the logic
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:31:32.740

最终版本，使用 -ea vm 选项运行以显示断言有效

```
 import java.util.HashMap;

public class mult {

    /**
     * @param args
     */
    public static char intToChar(int i) {
        switch (i) {
        case 0:
            return 'A';
        case 1:
            return 'B';
        case 2:
            return 'C';
        default:
            return 'D';
        }
    }
    public static void main(String[] args) {
        HashMap<Character, Integer> lookup = new HashMap<Character, Integer>();
        lookup.put('A', 108);
        lookup.put('B', 299);
        lookup.put('C', 302);
        lookup.put('D', 411);
        // TODO Auto-generated method stub
        Integer[][][] eM=new Integer[4][4][4];
        for (int i=0; i<4; i++){
            for (int j=0; j<4; j++){
                for (int k=0; k<4; k++){
                  eM[i][j][k] = (lookup.get(intToChar(i))) * 
                          (lookup.get(intToChar(j))) *
                          (lookup.get(intToChar(k)));
                }
            }

    }

assert(eM[0][0][0] == 108*108*108);
assert(eM[0][0][1] == 108*108*299);
assert(eM[3][3][3] == 411*411*411);
}
} 
```

# javascript - IE - 如果 iframe src 设置为错误 URL，则整个页面重定向

> ID：16076720
> 
> 赞同：1
> 
> 时间：2013-04-18T07:14:38.390
> 
> 标签：javascript, internet-explorer, iframe

下面的代码显示了问题。它创建了一个简单的 iframe。

在 IE 以外的浏览器上，如果 url 设置为 http:[4 slashes] test.com 而不是 http:[two slashes] test.com，iframe 将显示错误。在 IE 上，父页面重定向到错误页面。

我在其他人网站的小部件中使用 iframe，如果出现错误，这可能会造成很大的损失。我的问题是如何避免它，所以如果 SRC url 错误，错误将保留在 iframe 中并且不会导致整个页面重定向。

要检查，您可以将代码复制到 jsfiddle.net 并运行。

```
popup = window.document.createElement('div');
popup_html="<div style='width:300px;height:300px; ' >";
popup_html+=" <iframe src='http:////www.test.com' width='300' height='300' frameborder='0' ></iframe>";
popup_html+=" </div>";
popup.innerHTML=popup_html;
//cbar_popup.style.visibility='visible';
window.document.body.appendChild(popup); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:59:02.220

您可以尝试这样的方法来清理 url，并且仅在 url 有效时才尝试弹出内容：

```
var url = 'http:////stackoverflow.com/questions/16076720/ie-entire-page-redirects-if-iframe-src-is-set-with-bad-url';
var result = /^(?:(?:http[s]?:\/{2,4})?(?:www\.)?)?([\w-_]+)\.([\w\.]+)([\/\?\w-_\=\"]*)/.exec(url);

if(result){
    url = 'http://'+result[1]+'.'+result[2]+result[3];
    console.log(url);
    // do the popup stuff here with cleaned up url
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:36:02.170

为了防止重定向，你可以试试这个。

```
popup = window.document.createElement('div');
popup_html="<div style='width:300px;height:300px; ' >";
popup_html+=" <iframe id='myframe' src='' width='300' height='300' frameborder='0' ></iframe>";
popup_html+=" </div>";
popup.innerHTML=popup_html;
//cbar_popup.style.visibility='visible';
window.document.body.appendChild(popup);
document.getElementById('myframe').src="http:////www.test.com"; 
```

我不知道它发生的真正原因。我正在分析ieframe.dll调用的js。如果我发现任何与此有关的信息，我将更新我的答案。

# ios - iOS 应用程序的 http 请求的最佳库？

> ID：16076729
> 
> 赞同：2
> 
> 时间：2013-04-18T07:15:08.487
> 
> 标签：ios, httprequest, asihttprequest

在我的 iPhone 应用程序中，我使用 ASIHTTPRequest API 来发出基于 cURL 的 http 请求。我听说这个 API 没有得到维护，有时它会导致应用程序崩溃。我需要使用其他一些 API，我可以在其中向我的 RESTful API 发出 cURL 请求，该 API 将 JSON 作为响应。

任何人都可以建议我在我的生产应用程序中使用 ASIHTTPRequest 的最佳替代方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:31:03.940

ASIHTTPRequest 的一个非常好的替代方案是 AFNetworking。关于如何将 AFNetworking 集成到您的代码中有很好的教程，您可以在下面找到一个。 [http://www.raywenderlich.com/30445/afnetworking-crash-course](http://www.raywenderlich.com/30445/afnetworking-crash-course)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:09:58.050

您可以使用[RestKit](http://restkit.org/)，它是一个强大的库，使您能够从 web 服务获取您的数据，您可以缓存它并将其存储在本地 DB 并将您的 json 映射到要直接使用的对象中......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T18:01:46.677

试试这个，它确实简化了 HTTP 请求，还附带了方便的测试助手

[https://github.com/BadChoice/RVHttp](https://github.com/BadChoice/RVHttp)

# perl - 如何从perl获取单个数组元素

> ID：16076738
> 
> 赞同：0
> 
> 时间：2013-04-18T07:15:51.267
> 
> 标签：perl

以下是输出`Dumper($resultSet);`

```
$VAR1 = bless( {
                 'rows' => [
                             bless( {
                                      'columns' => [
                                                     bless( {
                                                              'columnName' => 'TABLESCHEMANAME',
                                                              'columnValue' => 'FROM_PERL'
                                                            }, 'abc::TColumn' )
                                                   ]
                                    }, 'abc::TRow' )
                           ]
               }, 'abc::TResultSet' ); 
```

我如何迭代`columns`数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:27:26.970

您要访问的数据被封装在一个类型为 的对象中`abc::TResultSet`。这个类应该有一个 API 来允许访问它的成员。规避封装通常不是一个好主意，即使您可以很容易地做到这一点。

* * *

如果您不处理对象而只是嵌套数据结构，则可以检索所需的 arrayref，并取消引用它以循环它：

```
for my $row (@{ $VAR1->{rows} }) {
  for my $cell (@{ $row->{columns} }) {
    my ($name, $value) = @{$cell}{qw/columnName columnValue/}; # a hash slice
    ...;
  }
} 
```

# c# - 如何使用 Asp.net 3.5 和 c# 3.0 创建动态多语言 Web 应用程序

> ID：16076739
> 
> 赞同：0
> 
> 时间：2013-04-18T07:15:57.327
> 
> 标签：c#, asp.net, multilingual

我有一个英文的网络应用程序。我的客户想要阿拉伯语。我在数据库方面有很多工作。当我搜索多语言解决方案时，我发现我们已经创建了一个资源文件，我们在其中定义了所有文本的键/值。但是想要一种方法，让我的所有数据库自动转换成阿拉伯语，反之亦然。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:37:23.673

我强烈建议不要对网站使用自动翻译。要么使用真正的人工翻译服务，要么只使用谷歌翻译小部件。由于低质量和索引垃圾邮件，谷歌会降低自动翻译网站的排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:35:38.197

显然，没有内置的方法可以将任意文本从一种语言翻译成另一种语言。我建议使用像[Google Translate](https://developers.google.com/translate/v2/getting_started)这样的 API （请记住，这是一项付费服务​​）。

也许您可以使用它来定义和实现一个`ITranslationService`，然后将其注入您的数据访问服务，允许您根据当前的文化自动尝试翻译从数据库返回到您的任何数据。

# json - 如何将 Kendo 网格绑定到动态数据表

> ID：16076741
> 
> 赞同：1
> 
> 时间：2013-04-18T07:16:05.853
> 
> 标签：json, datatable, kendo-ui, kendo-grid

我正在使用 Kendo+razor，我想创建一个没有任何特定数据模型的 Kendo 网格（在我的情况下，我必须显示用户输入的 SQL 查询的结果，因此结果可以有任何数字/列类型）。为了使其通用，我尝试将网格绑定到 System.data.DataTable 和一个 ajax 调用来填充该网格。第一次加载时它工作正常，但是当我重新填充相同的网格时，它不会更新其列名。

场景：
Ajax 调用是在单击按钮以使用查询结果填充网格时进行的。在第一次 ajax 调用时，结果是一个带有属性 id、name 和 description 的 JSON。网格显示正确的数据，上面提到的 3 列和 4 行。
在第二个 ajax 调用中，响应 JSON 包含属性 UserName、UserType、Address、PhoneNumber，这一次网格不更新其模型绑定，列保持前三列 id、name 和 description，但行数更新为没有其中的数据（因为返回的 JSON 中不存在列）

我想将列重新绑定到每次都可能不同的返回 JSON 属性。

这是我的 HTML 代码：

```
@model System.Data.DataTable
<div>
@(Html.Kendo().Grid(Model)
.Name("ResultsGrid") 
.TableHtmlAttributes(new { Class = "kendoGrid" })
)
</div> 
```

和按钮点击代码上的Javascript：

```
function execute() {
 $.ajax({
 url: "something something",
 type: "GET",
 contentType: "application/json;charset=utf-8",
 data: "",
 dataType: "json",
 success: function (data) {
        $("#ResultsGrid").kendoGrid({
              scrollable: false,
              pageable: true,
              sortable: true,
              resizable: true,
              dataSource: {
                        data: data,
                        pageSize: 5
                    }
                });
 }
} 
```

如何刷新网格以将列绑定到新的 JSON 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:16:17.287

您首先需要销毁旧网格，然后创建一个新网格：

```
success: function(data) {
    // get reference to the grid instance
    var grid = $("#ResultsGrid").data("kendoGrid");
    // destroy it
    grid.destroy();
    $("#ResultsGrid")
        .empty() // clear the old HTML
        .kendoGrid( {
           dataSource: {
              data: data,
              pageSize: 5
           }
        });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T07:02:02.953

```
success: function(data) {
// get reference to the grid instance
var grid = $("#ResultsGrid").data("kendoGrid");
// destroy it
grid.destroy();
$("#ResultsGrid")
    .empty() // clear the old HTML
    .kendoGrid( {
       dataSource: {
          data: data,
          pageSize: 5
       }
    });

} 
```

# jsp - Mozilla iframe 滚动

> ID：16076742
> 
> 赞同：0
> 
> 时间：2013-04-18T07:16:10.403
> 
> 标签：jsp, iframe, cross-browser, mozilla

我有一个`iframe`，当网页在滚动中调用时，它不工作`Mozilla Firefox`。

它在`Internet Explorer`和中运行良好`Google Chrome`。

```
<iframe name="contentFrame" id="contentFrame" SRC="<c:out value='${CONTENT_FRAME_URL}'/>" margin width=0 marginheight=0 

 vspace=0 hspace=0 scrolling=no WIDTH=780 height="350" frameborder="0" allowtransparency="true"
        style="position:absolute;overflow:hidden;border:none;">
</iframe> 
```

为什么 Mozilla firefox 不支持这个？

crom 将此解释为

```
<iframe name="contentFrame" id="contentFrame" src="empty.jsp" marginwidth="0" marginheight="0" scrolling="no" width="780" height="180%" frameborder="0" allowtransparency="true" style="position: absolute; overflow: hidden; border: none; height: 1003px;">

                    </iframe> 
```

atomatic 在样式中添加一些高度以调整滚动条的大小。但 mozzila 无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:18:43.447

尝试使用`overflow: auto;`我想知道为什么这适用于 IE 和 chrome

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:31:55.860

尝试将 px 放在宽度和高度值之后

像这样：width="780px"

# c - 使用指针和数组调试程序

> ID：16076743
> 
> 赞同：0
> 
> 时间：2013-04-18T07:16:15.670
> 
> 标签：c

请帮助解决这个问题，我在这里遇到的错误是'{'附近的语法，因为我在 DAC_table 附近声明了 unsigned char 我得到了一个错误，所以在错误的函数之外定义......我没有发布我的完整代码在这里...在这部分代码中我遇到了问题..

```
unsigned char DAC_table[16];     
unsigned char *ptr2tbl; 
void fnSelectVoltage(void)
{
    line_display(1, "Volt Sel");
    sprintf(line_buf," %d V",(unsigned int)*ptr2tbl);       
    line_display(2, line_buf);

    DAC_table[16] = ( 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
                      0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F);
    *ptr2tbl = &DAC_table;  
    while (START_KEY)
    {
        if (!UP_KEY)
        {   
            wait_for_any_key_counter_0 = 0;
            for (i = 0; i<15; i++)      
            {
                P2 = *ptr2tbl++;            
                //  delay_ms(1000);         
            }
        }
        else if(!DOWN_KEY)
        {
            wait_for_any_key_counter_0 = 0;
            for (i = 0; i<15; i++)      
            {
                P2 = *ptr2tbl++;                
                // delay_ms(1000);              
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:20:33.433

```
unsigned char DAC_table[16];// u hv created a global array here 
```

要为其赋值，

```
 DAC_table[0] = 0x00;
    DAC_table[1] = 0x01; and so on. 
```

或者甚至更好

```
unsigned char DAC_table[16] = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F}; at the line of declaration. 
```

除了声明行之外，您不能在文件范围内为变量赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:37:54.950

简要查看您的代码后，我可以说：

*   ptr2tbl 在第一次被调用时在没有初始化的情况下使用 -> `sprintf(line_buf," %d V",(unsigned int)*ptr2tbl)`。
*   `*ptr2tbl = &DAC_table;`是不正确的。你可能想要这样的东西：ptr2tbl = DAC_table 一旦两者都是指针。请记住， *ptr2tbl 将访问它所指向的元素，此时，在您的代码中，它不指向任何地方
*   P2 未声明（P2 是全局变量吗？）
*   而且，如前所述，您不能以这种方式初始化 DAC_table （使用括号是错误的）。

# javascript - 从 javascript 中的 window.open() 调用时未调用操作方法

> ID：16076747
> 
> 赞同：-1
> 
> 时间：2013-04-18T07:16:25.890
> 
> 标签：javascript, jsp, struts2

我正在尝试打开一个新窗口并在 struts 2 的过程中调用一个动作。

问题是jsp打开了，但是直到我按下刷新或从新的jsp开始，才会调用动作。

我希望执行该操作，然后重定向到相应的 jsp，但现在它重定向到与第一个映射结果对应的 jsp。

**来自 javascript 的动作调用：**

```
function displayGraph(graphName)
        {   alert("displayGraph");
            var url = 'drawCMGraph?data=' + encodeURIComponent(graphName);
            alert(url);
            window.open(url, "_blank",
            "directories=no, status=no,width=550, height=200,top=0,left=0");
        } 
```

**struts.xml 中的动作映射**

```
<action name="drawCMGraph" class="com.casealerts.action.HomeAction" method="Drawgraph">
<result name="success">/casealerts/test.jsp</result>
<result name="error">/casealerts/Error.jsp</result>
        </action> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>Comp</display-name>
    <filter>  
        <filter-name>struts2</filter-name>  
     <filter-class>
            org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>  <!--This listener handles caching of data when the server context is loaded.-->
        <listener-class>CompListener</listener-class>
    </listener>
    <welcome-file-list>
        <welcome-file>/casealerts/Login.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**行动**

```
package com.casealerts.action;

import java.util.ArrayList;
import java.util.List;
import java.util.Vector;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import org.apache.log4j.Logger;
import org.apache.struts2.interceptor.ServletRequestAware;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;
import com.opensymphony.xwork2.Preparable;
import com.casealerts.businessdelegate.HomePageCMDelegate;
import com.casealerts.formbean.HomeForm;

public class HomeAction extends ActionSupport implements ModelDriven<HomeForm>,Preparable,ServletRequestAware
{

    /**
     * 
     */
    private static final long serialVersionUID = 272240572969090988L;
    Logger log=new Log4jHelper().getLogger(getClass());
    HomeDelegate hpd=null;
    private HttpServletRequest request;
    HomeForm form=null;
    private HttpSession session=null;

    @Override
    public void setServletRequest(HttpServletRequest request) {
        // TODO Auto-generated method stub
        this.request=request;

    }

    @Override
    public void prepare() throws Exception {
        // TODO Auto-generated method stub
        form=new HomeForm();

    }

    @Override
    public HomeForm getModel() {
        // TODO Auto-generated method stub
        return form;
    }

    public String Drawgraph()
    {
        session=request.getSession(true);
        hpd=new HomeDelegate(form,session);

        String result=hpd.getGraphData("alert", 1);

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:03:40.180

```
var url = 'drawCMGraph?data=' + encodeURIComponent(graphName);
            alert(url); 
```

尝试将其更改为

```
var url = 'drawCMGraph.action?data=' + encodeURIComponent(graphName);
            alert(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:41:42.790

我找到了解决问题的方法。看来我们需要为动作类的 URL 中发送的数据创建一个变量以及 getter 和 setter。这适用于 IE，但它不适用于 Eclipse 浏览器

# c# - 从 pdf 中识别 rgb 和 cmyk 颜色

> ID：16076748
> 
> 赞同：1
> 
> 时间：2013-04-18T07:16:33.823
> 
> 标签：c#, pdfbox

我有一个包含不同颜色文本和背景颜色的 PDF。如何识别 CMYK 或 RGB 格式的 PDF 中使用了哪些颜色？

```
StringBuilder sb_Sourcepdf = new StringBuilder();
PdfReader reader_FirstPdf = new PdfReader(pdf_of_FirstFile);

Document document = new Document();

PDFParser parser = new PDFParser(new FileInputStream(pdf_of_FirstFile));
parser.parse();
PDDocument docum = parser.getPDDocument();

PDFStreamEngine engine = new PDFStreamEngine();

PDPage page = (PDPage)docum.getDocumentCatalog().getAllPages().get(0);

engine.processStream(page, page.findResources(), page.getContents().getStream());
PDGraphicsState graphicState = engine.getGraphicsState();
string colorname = graphicState.getStrokingColor().getColorSpace().getName();
graphicState.getTextState().getFont();
int r = graphicState.getNonStrokingColor().getJavaColor().getRed();
int g = graphicState.getNonStrokingColor().getJavaColor().getGreen();
int b = graphicState.getNonStrokingColor().getJavaColor().getBlue();
int rgb = graphicState.getNonStrokingColor().getJavaColor().getRGB();
float[] cosp = graphicState.getNonStrokingColor().getColorSpaceValue();
PDColorSpace pd = graphicState.getNonStrokingColor().getColorSpace();

string re = graphicState.getStrokingColor().toString();
int rgbcolor = graphicState.getStrokingColor().getJavaColor().getRGB();

float[] components = { java.awt.Color.black.getRed(), java.awt.Color.black.getGreen(), java.awt.Color.black.getBlue() };

float[] colorSpaceValues = graphicState.getStrokingColor().getColorSpaceValue();

foreach (float c in colorSpaceValues)
{
    Debug.WriteLine(c * 255.00);
} 
```

我使用了 pdfbox，但我得到的值为 0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T06:21:39.647

```
 PdfReader reader_FirstPdf = new PdfReader(pdf_of_FirstFile);

            for (int i = 1; i <= reader_FirstPdf.NumberOfPages; i++)
            {
 TextWithFont_SourcePdf Sourcepdf = new TextWithFont_SourcePdf();
}
                text_First_File = iTextSharp.text.pdf.parser.PdfTextExtractor.GetTextFromPage(reader_FirstPdf, i, Sourcepdf);

            public void RenderText(iTextSharp.text.pdf.parser.TextRenderInfo renderInfo)
            {
 int r = renderInfo.GetColorNonStroke().R;
                  int g = renderInfo.GetColorNonStroke().G;
                   int b = renderInfo.GetColorNonStroke().B;

} 
```

# xml - 如何在 XML 中使用特殊字符

> ID：16076752
> 
> 赞同：0
> 
> 时间：2013-04-18T07:16:43.860
> 
> 标签：xml, xml-parsing, special-characters

我在我的 SSRS 报告中用 XML 编写查询。我可以毫无问题地使用“& lt;”（小于）但不能使用“& le;” CData 在我的查询中也不起作用，它完全被 ifnored（小于等于）。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:41:25.680

你希望这`&le;`指的是什么角色？

（也许是“<=”？或者也许是“≤”？）

您可以定义扩展`&le;`为所需字符的实体，也可以直接在文件中输入所需字符，以代替实体引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:22:57.490

尝试使用转义序列小于等于如下

```
&lt;= 
```

# extjs - EXTJS - 用于内部脚本的 Ext.require 和 onReady()

> ID：16076755
> 
> 赞同：1
> 
> 时间：2013-04-18T07:17:00.657
> 
> 标签：extjs, onready

我有一个从主 html 文件加载的 app.js 文件。现在这个 app.js 文件在单击其中定义的链接时，使用 Ext.require() 动态加载第二个 js 文件。加载正常，因为我已经定义了 Ext.Loader.setPath() 等，第二个脚本包含诸如 Ext.require() 之类的行来导入一些 ui 库，然后是 onReady()，我的问题是永远不会触发 onReady，我不能将小部件渲染代码放在 onReady() 之外。onReady 仅适用于脚本的同步加载吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:22:03.893

onReady 只会为您的应用程序触发一次。

如果您查看文档，您会看到 Ext.require() 可以采用回调函数：

```
Ext.require('My.foo.Bar', function() {
    console.log('do something');
}); 
```

[http://docs.sencha.com/extjs/4.2.0/#!/api/Ext-method-require](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext-method-require)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:30:45.993

正如 Evan 所说，Ext.onReady 只会在第一次加载 HTML 页面时触发。

如果您使用 ExtJS 4，那么从 app.js 加载脚本通常会落入 MVC 模式。

这实际上意味着您的控制器是从您的 app.js 初始化的，然后这些控制器负责处理您通常放在 onReady() 中以将函数绑定到事件的代码。“视图”的概念是您放置小部件代码的地方。

例如

**应用程序.js**

```
Ext.application({
name: 'MyApp',
appFolder: '/MyApp/Scripts',
autoCreateViewport: true,
requires: [
    //data
    'ALES.controller.MyController',
]
}); 
```

**MyController.js**

```
Ext.define('ALES.controller.MyController', {
extend: 'Ext.app.Controller',

id: 'MyController',
views: [
    'MyView'
],
stores: [
    'MyStore'
],
init: function () {
    this.control(
        {
            'panel > button': { click: this.myClickHandler }
        });

}); 
```

**MyView.js**

```
Ext.define('MyApp.view.MyView', {
extend: 'Ext.form.Panel',

id: 'MyView',

requires: [
    'Ext.grid.plugin.CellEditing' //or other Ext stuff you want to include
],

constructor: function (config) {
    this.initConfig(config);
    return this.callParent(arguments);
},

initComponent: function () {

    Ext.apply(this, {
        items: this.createControls()
    });

    this.callParent();

},

createControls: function() {
    return [{
        xtype: 'panel',
        items: [{
            xtype: 'button'                
        }]

    }
    ];
}
}); 
```

这些是 sencha 网站上的一些不错的指南，我建议您通读以更深入地了解：

[http://docs.sencha.com/extjs/4.1.3/#!/guide/application_architecture](http://docs.sencha.com/extjs/4.1.3/#!/guide/application_architecture)

# android - Android AVD Manager 改变密度

> ID：16076757
> 
> 赞同：1
> 
> 时间：2013-04-18T07:17:01.170
> 
> 标签：android, avd

我已经安装了新的android sdk，我的问题是如何改变密度（例如265）？

[![截图1](https://i.stack.imgur.com/vBRdR.png)](https://i.stack.imgur.com/vBRdR.png)

在密度菜单中没有自定义值。

[![截图2](https://i.stack.imgur.com/K1rz3.png)](https://i.stack.imgur.com/K1rz3.png)

# java - 尽管我有表，但表不存在错误

> ID：16076760
> 
> 赞同：0
> 
> 时间：2013-04-18T07:17:15.863
> 
> 标签：java, jpa, eclipselink, entitymanager

当我使用实体管理器提交时，出现以下错误：实体标题存在并且没有任何错误可能是此错误的原因

表/视图“S1_MANAGER”不存在。

当我确实提交时发生。

```
entityManager.getTransaction().commit();

@Entity
@Table(name = "S1_MANAGER")
public class manager 
{
    @Id 
    @Column(name = "title_id", length = 128)    
    private String Id; 
```

顺便说一句，该表也存在于持久性 xml 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:35:51.320

确保数据库中存在您要连接的用户/模式的表。

要自动创建表格供您查看，

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL](http://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL)

# iphone - UITextView 中的 ASCII 文本不是对称的，因为它保存在 SQLite 中

> ID：16076765
> 
> 赞同：0
> 
> 时间：2013-04-18T07:17:27.487
> 
> 标签：iphone, ios, ios6, sqlite, uitextview

我在 SQLIte 数据库中保存了 ASCII 字符，当我在控制台中打印时，它是这样对称的： ![在此处输入图像描述](https://i.stack.imgur.com/pTe3x.png)

但是当我试图在 UITextView 上打印时，我得到了这个结果： ![在此处输入图像描述](https://i.stack.imgur.com/YsMuD.png)

UITextView 的 Text 是 Attributed 我什至尝试保持简单...但结果相同...我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:26:17.767

得到了解决方案...只是将字体更改为 courier ...它应该具有等宽字体 ... [http://en.wikipedia.org/wiki/Monospaced_font](http://en.wikipedia.org/wiki/Monospaced_font)并减小字体大小以适应文本视图。

# android - Titanium Studio 使用 Vmware 或 VirtualBox Android 4.0.3 虚拟机

> ID：16076774
> 
> 赞同：0
> 
> 时间：2013-04-18T07:18:18.800
> 
> 标签：android, android-emulator, titanium, appcelerator

我正在使用**Windows 7**。我安装了**Titanium Studio**并对其进行了更新。然后我加载**Android SDK**和**JAVA JDK 6**。Android API 包含几乎所有的包。安装完成后，我在**Windows 系统环境设置中设置了****JAVA_HOME**和**android_sdk**参数。

 **之后，我安装了 android 虚拟机（vmware 也是 virtualbox）。我找到了android eth0的ip并通过windows命令行连接到android虚拟机，如下所示

```
M:\SDKs\Android\platform-tools>adb kill-server

M:\SDKs\Android\platform-tools>adb connect 192.168.230.128
connected to 192.168.230.128:5555

M:\SDKs\Android\platform-tools>adb devices
List of devices attached
192.168.230.128:5555    device 
```

连接到虚拟 android 后，我在 Titanium Studio 上创建了一个示例。当我从Titanium Studio 的**运行菜单中选择****Android 设备**以在 android 虚拟机上编译我的示例应用程序时，我收到如下错误

 **```
[ERROR] Invalid --target value 'devıce' 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T17:11:24.473

这是 TITANIUM SDK 中的 unicode 翻译问题。

[请看这张错误票。](https://jira.appcelerator.org/browse/TISTUD-4701)

解决问题，改变操作系统的语言。例如，英语 (en)。这是 MAC 上的一种简单方法。但是对于WINDOWS来说并不容易。****

# python - Python 转义序列 \N{name} 未按定义工作

> ID：16076775
> 
> 赞同：6
> 
> 时间：2013-04-18T07:18:23.533
> 
> 标签：python, unicode, python-2.7, unicode-string, python-unicode

我正在尝试打印给定名称的 unicode 字符，如下所示：

```
# -*- coding: utf-8 -*-
print "\N{SOLIDUS}"
print "\N{BLACK SPADE SUIT}" 
```

然而，我得到的输出并不是很令人鼓舞。

转义序列按原样打印。

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:21:10) [MSC v.1500 32 bit (Intel)] on
Type "help", "copyright", "credits" or "license" for more information.
>>> # -*- coding: utf-8 -*-
... print "\N{SOLIDUS}"
\N{SOLIDUS}
>>> print "\N{BLACK SPADE SUIT}"
\N{BLACK SPADE SUIT}
>>> 
```

然而，我可以看到[另一个提问者](https://stackoverflow.com/questions/13106175/how-to-find-out-number-name-of-unicode-character-in-python%20another%20asker)已经能够成功地做到这一点。

怎么了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T07:19:47.447

[这些序列仅适用于 unicode 字符串](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)，这是 Python 3 唯一的字符串类型。因此，在 Python 2 中，您需要在字符串文字前加上`u`.

```
>>> print "\N{SOLIDUS} \N{BLACK SPADE SUIT}"
\N{SOLIDUS} \N{BLACK SPADE SUIT}
>>> print u"\N{SOLIDUS} \N{BLACK SPADE SUIT}"
/ ♠ 
```

文档中的相关行：

> `\N{name}`Unicode 数据库中名为 name 的字符（仅限 Unicode）

# php - php无法比较两个完全相同的字符串

> ID：16076776
> 
> 赞同：0
> 
> 时间：2013-04-18T07:18:23.993
> 
> 标签：php, string

我已经关注了一段代码

```
$path = $resource['path'];
if (strpos($path, base_url()) == 0) {
    $path = FCPATH. substr($path, strlen(base_url()));
}
echo '<pre>';
$x = '/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js';
var_dump($path);
var_dump($x==$path);
var_dump('/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js' == $path);
echo '</pre>'; 
```

我确定 $path 由`/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js`

这就是我得到的：

```
string(82) "/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js"
bool(false)
bool(false) 
```

似乎比较根本失败了。这里有什么问题？PHP错误还是我的错误？

**编辑：** 我也很高兴向您展示这段代码的结果：

```
echo '<pre>';
$x = '/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js';
var_dump($path);
var_dump($x);
var_dump($x==$x);
var_dump($x==$path);
var_dump('/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js' == $path);
echo '</pre>'; 
```

结果是：

```
string(82) "/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js"
string(72) "/home/gofrendi/public_html/No-CMS/themes/ubuntu/assets/default/script.js"
bool(true)
bool(false)
bool(false) 
```

**再次编辑：**`{{ used_theme }}`已解决，我为更改为当前使用的主题 的模板系统做了一些 str_replace 。使用的主题是 'ubuntu'，它有 6 个字符长度，而 {{ used_theme }} 有 10 个字符长度。str_replace 在代码执行后执行。这也改变了 var_dump 结果，从而产生了这种意想不到的行为。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:25:59.163

你的 $path 有一些不同，因为它显示 string(82) 字符，而 $x 有 string(72) 你必须是一些 html 字符问题。尝试修剪它，然后进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:27:45.260

如您所见，两者之间存在一些差异`strings`，`length "82"`并且`other is of "72"` 字符串中可能存在一些不可见（非打印）字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:40:07.127

字符编码问题可能，如果您启用了 mbstring 扩展，请尝试此操作并相应地转换编码

```
echo mb_detect_encoding($x);
echo mb_detect_encoding($path); 
```

# algorithm - Prolog迷宫求解算法

> ID：16076778
> 
> 赞同：3
> 
> 时间：2013-04-18T07:18:33.350
> 
> 标签：algorithm, recursion, prolog, maze

我想在 Prolog 中实现一个迷宫求解算法。因此，我搜索了一些迷宫求解算法，发现以下内容：[http ://www.cs.bu.edu/teaching/alg/maze/](http://www.cs.bu.edu/teaching/alg/maze/)

查找路径（x，y）：

```
if (x,y outside maze) return false
if (x,y is goal) return true
if (x,y not open) return false
mark x,y as part of solution path
if (FIND-PATH(North of x,y) == true) return true
if (FIND-PATH(East of x,y) == true) return true
if (FIND-PATH(South of x,y) == true) return true
if (FIND-PATH(West of x,y) == true) return true
unmark x,y as part of solution path
return false 
```

我已经在 prolog 中构建了一个矩阵，它代表一个迷宫，其中 0 是开放的，1 是墙，例如（起始位置是 (2|1)，目标位于 (4|1)）：

```
11111
10001
10101 
```

此外，我还定义了一个名为 的子句`mazeDataAt(Coord_X, Coord_Y, MazeData, Result)`，它为我提供了某个位置上的矩阵值。

至今。但是现在我在 prolog 中实现该算法时遇到了问题。我已经尝试过“肮脏的方式”（通过使用嵌套的 if 语句一一翻译），但是这增加了复杂性，我认为这不是你在 prolog 中做的方式。

所以我尝试了这个：

```
isNotGoal(X, Y) :- 
    X = 19, Y = 2.

notOpen(X, Y, MazeData) :-
    mazeDataAt(X, Y, MazeData, 1). 

findPath(X, Y, MazeData) :- 
    isNotGoal(X, Y),
    notOpen(X, Y, MazeData),
    increase(Y, Y_New),
    findPath(X, Y_New, MazeData),
    increase(X, X_New),
    findPath(X_New, Y, MazeData),
    decrease(Y, Y_New),
    findPath(X, Y_New, MazeData),
    decrease(X, X_New),
    findPath(X, Y_New, MazeData). 
```

但这种尝试并没有像预期的那样奏效。

实际上，这是上述算法的正确序言实现吗？我怎样才能看到这种方法是否真的找到了一条穿过迷宫的路？因此，我如何记录路径或获取解决方案路径（通过在上面的算法中标记/取消标记路径来完成什么）？

非常感谢您的帮助！

### //更新

感谢您的回答！我采用了更类似于 prolog 的解决方案（请参阅[此处](https://stackoverflow.com/questions/8672046/not-member-rule-in-prolog-doesnt-work-as-expected)）来解决我的问题。所以我现在有：

```
d([2,1], [2,2]).
d([2,2], [1,2]).
d([2,2], [2,3]).

go(From, To, Path) :-
go(From, To, [], Path).

go(P, P, T, T).
go(P1, P2, T, NT) :-
    (d(P1, P3) ; d(P3, P2)),
    \+ member(P3, T),
    go(P3, P2, [P3|T], NT). 
```

到目前为止，这行得通。而且我想我理解为什么序言方式要好得多。但现在我还有一个小问题。

我希望我的知识库是“动态的”。我无法为迷宫中的每个航路点定义所有边缘。因此我写了一个子句，命名`is_adjacent([X1, Y1], [X2, Y2])`为当`[X1, Y1]`是的邻居时为真`[X2, Y2]`。

我还有一个列表`Waypoints = [[2, 1], [2, 2]| ...]`，其中包含我的迷宫中所有可能的航点。

现在的问题是：我如何使用它来使我的知识库“动态”？这样我就可以在`go`子句中使用它来查找路径？

谢谢你的帮助！

### //更新2

好的，现在我将所有航点作为事实：

```
w(2, 1).
w(2, 2).
... 
```

我从鲍里斯那里得到了他的答案之一：

```
d(X0, Y0, X , Y) :-
    w(X0, Y0),
    next_w(X0, Y0, X, Y),
    w(X, Y).

next_w(X0, Y0, X0, Y) :- Y is Y0 + 1.
next_w(X0, Y0, X0, Y) :- Y is Y0 - 1.
next_w(X0, Y0, X, Y0) :- X is X0 + 1.
next_w(X0, Y0, X, Y0) :- X is X0 - 1. 
```

之后，我更新了`go`条款，使其适合：

```
go(X1, Y1, X2, Y2, Path) :-
go(X1, Y1, X2, Y2, [], Path).

go(X, Y, X, Y, T, T).
go(X1, Y1, X2, Y2, T, NT) :-
   (d(X1, Y1, X3, Y3) ; d(X3, Y3, X1, Y1)),
\+ member([X3, Y3], T),
go(X3, Y3, X2, Y2, [[X3, Y3]|T], NT). 
```

但是如果我尝试询问`go(2, 1, 19, 2, R)`prolog 进入一个无限循环。如果我尝试一些更简单`go(2, 1, 3, 8, R)`的方法，比如它的工作原理，我会在`R`.

我究竟做错了什么？我忘记了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:55:24.410

[（此答案使用与此](https://stackoverflow.com/questions/8672046/not-member-rule-in-prolog-doesnt-work-as-expected)答案相同的寻路算法）

**编辑 2**

实际上，如果您的输入只是矩形矩阵的哪些单元不是墙，您需要以某种方式将其转换为“您可以从 A 到 B”的规则。如果您的航路点是：

```
w(2,1).
w(2,2). 
```

等等，然后你可以将你最初指向的算法翻译成这样的 Prolog 规则：

```
% it is possible to move from (X0,Y0) to (X,Y)
d(X0,Y0,X,Y) :-
    w(X0,X0), % you can skip this check if you know for sure
              % that your starting point is a valid waypoint
              % or if you want to be able to start from inside
              % a wall :)
    next_w(X0,Y0,X,Y),
    w(X,Y).
% neighboring waypoints
next_w(X0,Y0,X0,Y) :- Y is Y0+1\. % go up I guess
next_w(X0,Y0,X0,Y) :- Y is Y0-1\. % go down
next_w(X0,Y0,X,Y0) :- X is X0+1\. % go left
next_w(X0,Y0,X,Y0) :- X is X0-1\. % go right 
```

注意两点：

1.  我正在使用 4-argument 规则来处理从正方形的可能移动（所以相应地调整）
2.  魔术发生在`next_w`. 当`d`被调用时，它`next_w`会生成四个可能的相邻方格（假设你只能上/下/左/右），然后检查这个方格是否确实是一个航路点。您不再需要同时检查两种方式。

**另一个编辑：完整代码**

```
w(0,0).
w(0,1). w(1,1). w(2,1). w(3,1). w(4,1). w(5,1).
        w(1,2).         w(3,2).         w(5,2).
        w(1,3).         w(3,3).         w(5,3).
w(0,4). w(1,4). w(2,4).         w(4,4). w(5,4).
                w(2,5). w(3,5). w(4,5).

d(X0,Y0,X,Y) :- next_w(X0,Y0,X,Y), w(X,Y).
next_w(X0,Y0,X0,Y) :- Y is Y0+1.
next_w(X0,Y0,X,Y0) :- X is X0+1.
next_w(X0,Y0,X0,Y) :- Y is Y0-1.
next_w(X0,Y0,X,Y0) :- X is X0-1.

go(X,Y,X,Y,Path,Path).
go(X0,Y0,X,Y,SoFar,Path) :-
    d(X0,Y0,X1,Y1),
    \+ memberchk( w(X1,Y1), SoFar ),
    go(X1,Y1,X,Y,[w(X1,Y1)|SoFar],Path). 
```

你可以调用它

```
? go(0,0,5,4,[],Path). 
```

你应该得到两种可能的解决方案。

换句话说，我认为你的问题是分号；不再需要，因为您明确创建了所有可能的移动。

# android - 检测当前正在运行的应用程序。安卓

> ID：16076791
> 
> 赞同：2
> 
> 时间：2013-04-18T07:19:20.120
> 
> 标签：android, android-service

我正在使用以下代码来检测当前正在运行的 app 。但是当我运行任何新应用程序时。我没有得到它的包名，它正在烤“com.hedy.launcher”。代码有什么问题？

```
 @Override
          public int onStartCommand(Intent intent,int flags, int startId) {
                // TODO Auto-generated method stub
                super.onStartCommand(intent, flags,startId);
                Toast.makeText(this, "Service running", Toast.LENGTH_SHORT).show();

                handler = new Handler(){

                    @Override
                    public void handleMessage(Message msg) 
                    {
                        // TODO Auto-generated method stub
                        super.handleMessage(msg);
                       // count=count+1;
                       // Toast.makeText(MyService.this, ""+count, Toast.LENGTH_SHORT).show();
                        ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(Activity.ACTIVITY_SERVICE);
                        String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
                        Toast.makeText(MyService.this, ""+packageName, Toast.LENGTH_SHORT).show();
                    }

                };

                new Thread(new Runnable(){
                    public void run() {
                    // TODO Auto-generated method stub
                    while(true)
                    {
                       try {
                        Thread.sleep(1000);
                        handler.sendEmptyMessage(0);

                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 

                    }

                                    }
                }).start();
                return 0;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:02:41.623

```
String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName(); 
```

这是您提取包名称的行。尝试增加 maxNum 参数（您已设置为 1）。

am.getRunningTasks(maxNum) 将返回一个数组列表。检查arraylist的所有内容，看看你是否在其中任何一个中获得了你需要的项目

# wolfram-mathematica - 使用表中的一列作为 x 值，其他列作为 y 值进行绘图

> ID：16076801
> 
> 赞同：1
> 
> 时间：2013-04-18T07:19:41.930
> 
> 标签：wolfram-mathematica

我有一个矩阵，第一列是时间，第二列是 A 的位置，第三列是 B 的位置，等等。我想将 A、B、...的位置绘制为函数当时，在同一张图中。Mathematica 中是否有比逐列绘制图表然后通过“显示”组合它们更有效的方法？

另外，我希望这些图的颜色自动选择为彼此不同；为了让这种自动化有用，同时会自动生成一个图例。如何在 Mathematica 中做到这一点？

谢谢！

[更新]：克里斯的方法非常有效。但是默认的图例使用了颜色有点难以分辨的小点；此外，似乎只有 4 种颜色；在我的情况下，大约有 20 个 y 值，这使得图例实际上毫无用处。是否还有其他更大、颜色更多的符号（例如，一些灰度或连续变化的颜色）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:26:20.860

```
a = {{{2001, 1, 1}, 2, 3, 4},
     {{2002, 1, 1}, 3, 4, 5},
     {{2003, 1, 1}, 4, 5, 6},
     {{2004, 1, 1}, 5, 6, 7},
     {{2005, 1, 1}, 6, 7, 8}};

DateListPlot[MapThread[Transpose[{#1, #2}] &,
  {Table[First /@ a, {Length@Rest@Last@a}], Transpose[Rest /@ a]}],
 Joined -> True, PlotLegends -> {"A", "B", "C"}] 
```

![在此处输入图像描述](https://i.stack.imgur.com/gwQjT.png)

# c# - Linq 不同 & 最大值

> ID：16076805
> 
> 赞同：13
> 
> 时间：2013-04-18T07:19:53.427
> 
> 标签：c#, linq, linq-to-sql

我必须查询这张表：

```
symbol    time
------    ----------
aaa       2013-04-18 09:10:28.000    
bbb       2013-04-18 09:10:27.000    
aaa       2013-04-18 09:10:27.000    
bbb       2013-04-18 09:10:26.000 
```

**对于具有最大时间**值的所有不同符号，我需要**一行。**我如何编写我的 linq 查询？

 **提前致谢，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T07:22:50.593

*按符号*对行进行分组，然后从每个组项中选择最大*时间*（*Table*是上下文中的数据库表名）：

```
from r in Table
group r by r.symbol into g
select g.OrderByDescending(x => x.time).First() 
```

与方法语法相同：

```
Table.GroupBy(r => r.symbol)
     .Select(g => g.OrderByDescending(x => x.time).First()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T07:24:43.530

试试这个

```
var q = MyTable.GroupBy(x => x.symbol )
               .Select(g => g.OrderByDescending(i => i.time).First()); 
```

或像这样使用 max

```
 var data = from r in MyTable
                   group r by r.symbol into g
                   select new { name= g.Key, data= g.Max(a=>a.time) }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T07:50:30.407

我实际上会使用。

```
void Main()
{
    var set = new [] {
        new Foo{A = "aaa", B = 1},
        new Foo{A = "bbb", B = 2},
        new Foo{A = "aaa", B = 3},
        new Foo{A = "bbb", B = 4},
    };

    var result = from x in set
                group x.B by x.A into g
                select new {id = g.Key, biggest = g.Max()};

    Console.WriteLine(result);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:16:03.693

你可以在 Linq 中使用 lambda 表达式 -

```
var result= (from li in List.Distinct().OrderByDescending(x => x.time)
                       select li).FirstOrDefault(); 
```**

# html - 在 JwPlayer 中播放 RTMPT 流中的视频

> ID：16076807
> 
> 赞同：1
> 
> 时间：2013-04-18T07:20:10.527
> 
> 标签：html, streaming, video-streaming, jwplayer, rtmp

我正在使用 JwPlayer 从 Red 5 Media Server 播放视频。

我们如何播放通过`RTMPT`协议流式传输的视频？

谢谢，

# ios - 工厂类 - 停止初始化

> ID：16076812
> 
> 赞同：1
> 
> 时间：2013-04-18T07:20:26.397
> 
> 标签：ios, objective-c, factory-pattern

我想创建一个工厂类来为我（特定类）创建对象。

Factory 类将只有类方法。有没有办法阻止 alloc init 在课堂上被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:43:06.250

是的，你可以，在你的界面定义 init 为

```
- (id) init __unavailable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:25:20.383

你可以`self`在 alloc 和 init 中返回。`self`在这种情况下表示类对象，因此在该对象上调用方法将导致调用类方法

```
+ (id)alloc {
    return (id)self;
}

+ (id)init {
    return self;
} 
```

# android - 在 Android 中创建聊天室会出现错误：“item-not-found(404)

> ID：16076815
> 
> 赞同：2
> 
> 时间：2013-04-18T07:20:35.757
> 
> 标签：android, xmpp, asmack, multiuserchat

我正在使用 ASMACK 开发一个聊天应用程序。我能够连接并发送私人聊天消息。但是，当尝试创建聊天室时，我收到错误：

```
 item-not-found(404) 
```

这是我正在使用的代码：

```
 setConnection(connection);
           if(connection != null)
           {
               try
        {
                // SmackAndroid.init(this);  
              MultiUserChat muc=new MultiUserChat(connection,"chat1@groupchat.google.com");
              muc.create("greatandroid");
              Log.d("Chat Room Created","Successfully Created Chat Room");
              Form form = muc.getConfigurationForm();
              Form submitForm = form.createAnswerForm();
              for (Iterator fields = form.getFields();fields.hasNext();){
                FormField field = (FormField) fields.next();
                  if(!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable()!= null){
                      submitForm.setDefaultAnswer(field.getVariable());
                      submitForm.setAnswer("muc#roomconfig_publicroom", true);
                      muc.sendConfigurationForm(submitForm);
                      Log.d("Config Form Created","Successfully Configured Chat Form");
                  }
              }     

                }
                catch(Exception ex)
                {Log.d("Error Creating Chat Room",ex.getMessage().toString());}} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T13:59:33.270

使用此代码

```
// Get the the room's configuration form
            Form form = muc.getConfigurationForm();
            // Create a new form to submit
            // based on the original form
            Form submitForm = form.createAnswerForm();
            // Add default answers to the form
            // to submit
            for (Iterator fields = form.getFields(); fields.hasNext();) {
                FormField field = (FormField) fields.next();
                if (!FormField.TYPE_HIDDEN.equals(field.getType())
                        && field.getVariable() != null) {
                    // Sets the default value as
                    // the answer
                    //

                    submitForm.setDefaultAnswer(field.getVariable());
                }
            }

            submitForm.setAnswer("muc#roomconfig_roomdesc", GroupName);
            submitForm.setAnswer("muc#roomconfig_publicroom", false); //
            submitForm.setAnswer("muc#roomconfig_persistentroom", true);
            //
            submitForm.setAnswer("muc#roomconfig_membersonly", false);
            //
            submitForm.setAnswer("muc#roomconfig_allowinvites", true);
            // JID
            // submitForm.setAnswer("muc#roomconfig_whois", "anyone");
            //
            submitForm.setAnswer("muc#roomconfig_enablelogging", true);
            //
            // submitForm.setAnswer("x-muc#roomconfig_reservednick", true);
            //
            // submitForm.setAnswer("x-muc#roomconfig_canchangenick",
            // false);
            //
            // submitForm.setAnswer("x-muc#roomconfig_registration", false);
            // Send the completed form (with default values) to the
            // server to configure the room
            muc.sendConfigurationForm(submitForm); 
```

# ruby-on-rails - 带有 ActiveRecord 的 rails 3 中的 inverse_of 有什么限制

> ID：16076823
> 
> 赞同：7
> 
> 时间：2013-04-18T07:21:15.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我一直在阅读有关 inverse_of 的内容，而我在网上看到的所有内容似乎都不一致并且让我感到困惑。如果你看[这里](http://guides.rubyonrails.org/association_basics.html#bi-directional-associations)，你可以看到

> inverse_of 支持有一些限制：
> 
> *   它们不适用于 :through 关联。
> *   它们不适用于 :polymorphic 关联。
> *   它们不适用于 :as 关联。
> *   对于belongs_to 关联，忽略has_many 反向关联。

但就在此之上，他们举了这个例子

```
class Customer < ActiveRecord::Base
   has_many :orders, :inverse_of => :customer
end

class Order < ActiveRecord::Base
   belongs_to :customer, :inverse_of => :orders
end 
```

我认为他们说第一个 inverse_of 什么都不做，但如果是这样，他们为什么要这样做？

另外，即使上面的东西说 inverse_of 不能通过关联工作，[这个页面](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods)说

> 如果您在连接模型上使用belongs_to，最好在belongs_to 上设置:inverse_of > 选项，这意味着以下示例在>tags 是has_many :through 关联的情况下可以正常工作）：

并给出这个例子

```
@post = Post.first
@tag = @post.tags.build :name => "ruby"
@tag.save 
```

> 最后一行应该保存直通记录（Taggable）。这仅在设置 >:inverse_of 时才有效：

```
class Taggable < ActiveRecord::Base
  belongs_to :post
belongs_to :tag, :inverse_of => :taggings
end 
```

对我来说，所有这些似乎都不一致且非常混乱。但总的来说，我认为对每个关系都说 inverse_of 并没有什么坏处。那是问题吗？我看到很多人在 SO 上问这个问题，但没有看到任何人给出明确的“是”或“否”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T08:21:03.483

始终指定它并没有什么害处，它将允许 rails 优化对象的加载，因此您可以在两个方向上上下活动记录模型关系链，而不会出现奇怪的错误，即更改一个对象上的值不会改变它的引用.

将它设置在不起作用的地方的唯一问题是您之前所说的某些类型，如果它们静默失败，如果您在更改某些内容后在方法链中走错路，您将得到前面提到的错误

这是来自 rails API

```
d = Dungeon.first
t = d.traps.first
d.level == t.dungeon.level # => true
d.level = 10
d.level == t.dungeon.level # => false 
```

上例中的 Dungeon 实例 d 和 t.dungeon 引用数据库中的相同对象数据，但实际上是该数据的不同内存副本。在关联上指定 :inverse_of 选项可以告诉 Active Record 反向关系，它会优化对象加载。

# java - 使用 google drive api 让孩子没有垃圾

> ID：16076826
> 
> 赞同：12
> 
> 时间：2013-04-18T07:21:17.530
> 
> 标签：java, google-drive-api

如何在垃圾箱中没有删除文件的情况下获取文件夹的子文件，我的代码如下：

```
 Children children = service.children();
 Drive.Children.List request = children.list("root");
  do
  {
    try
       {
          ChildList cList = request.execute();
          for (ChildReference cr : cList.getItems())
           {
              File file = service.files().get(cr.getId())   .execute();
              System.out.println(file.getTitle() + "--"+ file.getMimeType());
           }
        request.setPageToken(cList.getNextPageToken());
       }
   catch (IOException e)
      {
          System.out.println("An error occurred: " + e);
          request.setPageToken(null);
      }
 } while (request.getPageToken() != null && request.getPageToken().length() > 0); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-18T14:17:59.760

列出时使用`trashed = false`查询：

```
drive.files().list().setQ("trashed = false").execute(); 
```

更多查询选项在[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-04T06:41:32.360

如果您有***多个条件***的查询，例如您想获取 ROOT 的文件和文件夹，并且不想获取已删除的文件。然后下面的查询将有助于“父母中的'root'和trashed = false”

```
 request.setQ("'root' in parents and trashed=false").execute(); 
```

# jsf - 如何在 p:datatable 中显示垂直和水平标题？

> ID：16076833
> 
> 赞同：2
> 
> 时间：2013-04-18T07:21:36.637
> 
> 标签：jsf, jsf-2, primefaces, datatable

我正在尝试使用 JSF 2.1.7 和 Primefaces 3.3.1 显示一个具有垂直和水平标题的表格。

这基本上是我想做的：

```
<table>
    <thead>
        <tr>
            <th></th>
            <th>Hor 1</th>
            <th>Hor 2</th>
        </tr>
    </thead>
    <tbody> 
        <tr>
            <th>vert 1</th>
            <td>row 1, cell 1</td>
            <td>row 1, cell 2</td>
        </tr>
        <tr>
            <th>vert 2</th>
            <td>row 2, cell 1</td>
            <td>row 2, cell 2</td>
        </tr>
    </tbody>
</table> 
```

这是我设法达到的最好成绩：

```
<p:dataTable value="#{ctrl.values}" var="val">
    <p:column styleClass="ui-state-default">
        <h:outputText value="Vertical header" />
    </p:column>
    <p:column headerText="Horizontal header">
        <h:outputText value="#{val.anything}"/>
    </p:column>
</p:dataTable> 
```

ui 类将我的单元格设置为标题，这对我来说已经足够了（没有行选择或过滤）。但是我还有一个问题：在这个例子中应该替换“垂直标题”的标题文本来自通过 EL 访问的资源包。如何定义每行显示哪些值？

有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:47:45.083

在 JSF 中，有一种向数据表和列添加页眉（和页脚）的“标准”方式。这适用于标准和 PrimeFaces 组件。您必须将名称为`header`（或`footer`）的构面添加到`p:dataTable`或`p:column`- 取决于您是否希望为表本身或列添加页眉（或页脚）。

使用 PrimeFaces，列更简单。只需添加属性`headerText`（或`footerText`在`p:column`.

请参见以下示例：

```
<p:dataTable var="person" value="#{bean.persons}">  
  <f:facet name="header">  
    Persons  
  </f:facet>  
  <p:column>  
    <f:facet name="header">  
      Name
    </f:facet>  
    <h:outputText value="#{person.name}"/>
  </p:column>
  <p:column headerText="Email">  
    <h:outputText value="#{person.email}"/>
  </p:column>
</p:dataTable> 
```

但是，我不知道是否可以为行添加“标题”。

有关详细信息，请参阅[PrimeFaces 展示](http://www.primefaces.org/showcase/)或[PrimeFaces 3.3 用户指南](http://primefaces.googlecode.com/files/primefaces_users_guide_3_3.pdf)。

如果您需要每行中来自资源包的不同文本，我会在 Java 代码中加载文本并将它们添加到数据表中显示的对象中。只需创建一个新类，该类扩展/代理/代理您要显示的原始类并添加一个属性`headerLabel`（来自资源包的值）。然后你可以做这样的事情：

```
<p:dataTable var="person" value="#{bean.personsWithLabels}">  
  <p:column>  
    <h:outputText value="#{person.headerLabel}"/>
  </p:column>
  ...
</p:dataTable> 
```

# c++ - 在 CEF 中管理 cookie

> ID：16076836
> 
> 赞同：1
> 
> 时间：2013-04-18T07:21:51.877
> 
> 标签：c++, cookies, chromium-embedded

我在 Visual C++ 中使用 CEF（Chromium Embedded Framework）。可以管理 cookie 吗？

我应该想保存（通过 cookie）用户的信息。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:38:00.963

CefCookieManager 还不够？[http://magpcss.org/ceforum/apidocs3/projects/（默认）/CefCookieManager.html](http://magpcss.org/ceforum/apidocs3/projects/(default)/CefCookieManager.html)

# c# - 如何从 gethashcode 生成的 int 中获取原始字符串

> ID：16076841
> 
> 赞同：3
> 
> 时间：2013-04-18T07:22:20.877
> 
> 标签：c#, gethashcode

我已经生成了一个哈希码

```
string textBoxVal="Naresh";
int code =textBoxVal.GetHashCode();
textBox2.Text=code.ToString(); 
```

它生成了一个整数值 -1078339947；

现在我想用这个（-1078339947）哈希码获得原始名称 Naresh。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:26:19.290

出于所有实际目的，您不能：哈希码比字符串少得多，因此有多个原始值可以提供相同的哈希码。

实际上，散列是一种单向操作。如果有人提到可逆散列，这不是真正的散列（因为[根据定义](http://en.wikipedia.org/wiki/Hash_function)，散列将输入集减少为较少数量的输出值之一）。与您描述的最接近的操作可能是加密函数 - 这将允许您反转操作 - 但这不太可能生成与您问题中的 10 位输出一样小的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T07:27:58.653

你就是不能那样做！哈希码不包含将其转换回字符串的所有必要信息。

甚至不能保证`GetHashCode()`在不同的环境中会返回相同的东西。

查看*[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)*的博客文章[`Guidelines and rules for GetHashCode`](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)

# java - 在 RCP .exe 应用程序上运行带有加载时编织的 AspectJ。如何？

> ID：16076843
> 
> 赞同：0
> 
> 时间：2013-04-18T07:22:23.393
> 
> 标签：java, eclipse-rcp, aspectj

我迫切需要运行一些 AspectJ 代码（在加载时编织它），但正在考虑的应用程序正在部署为 RCP 可执行文件。是否可以针对此 RCP 应用程序运行 AspectJ？如果没有，是否有任何明智的方法来规避这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:23:07.987

Instead of deleting the question, I'll just answer here as I believe it will be useful to someone in the future.

It is possible to do so. You'll just have to run your RCP application, open `jvisualvm` and get the jvm arguments, java arguments, as well as the main class. With all that, we're set to launch the RCP application through the `java` command the standard way.

# objective-c - 当前位置代码在 iOS 5 中无法使用，但在 iOS 6 中可以正常使用

> ID：16076845
> 
> 赞同：0
> 
> 时间：2013-04-18T07:22:29.520
> 
> 标签：objective-c, ios5, xcode4.5

**我已经下载了一个在iOS 5**和**iOS 6**中运行良好的当前位置示例项目。当我将相同的文件复制到另一个项目时，它在**iOS 5**中停止工作，但在**iOS 6**中工作正常。我收到错误

```
didFailWithError: Error Domain=kCLErrorDomain Code=1 "The operation couldn’t be completed. (kCLErrorDomain error 1.) 
```

我的代码是：

**。H**

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
@interface ViewController : UIViewController<CLLocationManagerDelegate>
{
    CLLocationManager *locationManager;
    CLGeocoder *geocoder;
    CLPlacemark *placemark;
}
@property (weak, nonatomic) IBOutlet UILabel *lblLat;
@property (weak, nonatomic) IBOutlet UILabel *lblLong;
@property (weak, nonatomic) IBOutlet UILabel *lblAddress;

@end 
```

**.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    locationManager = [[CLLocationManager alloc] init];
    geocoder = [[CLGeocoder alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    [locationManager startUpdatingLocation];

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError: %@", error);
    UIAlertView *errorAlert = [[UIAlertView alloc]
                               initWithTitle:@"Error" message:@"Failed to Get Your Location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation

{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    if (currentLocation != nil)
    {
        lblLong.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
        lblLat.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
    }

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0)
        {
            placemark = [placemarks lastObject];
            lblAddress.text = [NSString stringWithFormat:@"%@ %@\n%@ %@\n%@\n%@",
                                 placemark.subThoroughfare, placemark.thoroughfare,
                                 placemark.postalCode, placemark.locality,
                                 placemark.administrativeArea,
                                 placemark.country];
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

} 
```

谁能告诉问题出在哪里？我正在使用 Xcode 4.5 并且 iOS 部署目标是**iOS 5**。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T14:28:13.520

我不确定为什么它在 iOS6 中工作，因为以下委托方法已被弃用。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

您可以尝试将其替换为：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

同样根据文档`kCLErrorDomain Code=1`意味着： `kCLErrorLocationUnknown`

您是否正在通过 XCode 模拟您的位置？

# php - PHP：在foreach中获取所有数组

> ID：16076850
> 
> 赞同：0
> 
> 时间：2013-04-18T07:22:36.340
> 
> 标签：php, arrays, foreach

嗨，没有那么多经验的 php，所以需要帮助。

我正在尝试从数组中获取列表，但它只给了我第一个数组项而不是全部

这是我的代码

**我从我的数据库查询中得到这个**

```
Array ( [item] => hot, categories, activity ) 
```

下面是我的 foreach 循环

```
$sorted = $order;
echo '<pre>';
print_r($sorted);
echo '</pre>';

$temp_nav = array(); 
foreach ($sorted as $key) { 
    if(isset($navigation[$key])) 
        $temp_nav[$key] = $navigation[$key]; 
} 
$navigation = $temp_nav; 
echo '<pre>';
print_r($navigation);
echo '</pre>'; 
```

**$order print_r 结果在这里**

```
Array
(
    [0] => hot
    [1] => categories
    [2] => activity
) 
```

**现在我得到的结果`print_r($sorted);`如下**

```
Array
(
    [0] => hot
    [1] => categories
    [2] => activity
) 
```

但是当我检查 foreach 循环时，它只输出如下的第一个项目

**下面是 $navigation 的结果**

```
Array
(
    [hot] = Array
        (
            [url] => ./url
            [lable] => Hot Items
        )
) 
```

但我只想要像下面这样的值

```
array(
    'hot',
    'categories',
    'activity'
) 
```

那么我该如何编写代码，以便它为我**提供所有项目**的结果，而不仅仅是第一个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:37:36.783

如果我假设这是您想要实现的目标..

```
$order= array("hot","categories","activity");
$navigation= array(
         "hot" => array("url"=> "some url", "label" => "some label"),
         "categories" => array("url"=> "some url", "label" => "some label")
   );

  $navigation_keys = array_keys($navigation);
  $array_final = array_intersect($order, $navigation_keys);

  print_r($array_final); 
```

这将打印：

```
Array ( [0] => hot [1] => categories ) 
```

解释：如果您想检查您的导航数组中的键是否存在于您的订单数组中，您可以使用 array_keys 创建一个新的键数组，而不是 intersect 只会创建一个存在于您的订单数组中的键数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:32:34.043

你正在过滤

```
if(isset($navigation[$key])) 
```

并且很明显`$navigation`只有列表中的“热”键`{'hot','categories','activity'}`

如果我的假设是错误的，请向我们提供输出`print_r($navigation)`

# eclipse - 在 Eclipse / PyDev 中使用 msvcrt.getch()

> ID：16076853
> 
> 赞同：7
> 
> 时间：2013-04-18T07:22:38.987
> 
> 标签：eclipse, pydev, msvcrt

我想`msvcrt.getch()`在 Eclipse 中使用 PyDev 来读取符号字符，但我发现它不起作用（但它在 Windows 控制台中工作）。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T07:49:07.473

也许`sys.stdin.read`在 PyDev 中运行时使用？就像`sys.stdin.read(1)`从输入中读取 1 行...用于 Windows 控制台和 PyDev 根据操作系统和运行变体（使用`sys.stdin.isatty`）进行相同的选择。例如下一个代码读取限时用户输入。但是当在 Windows 控制台中运行时，如果程序的标准输入与另一个程序的标准输出一起通过管道输入，则`sys.stdin.isatty`返回`False`并输入读取`sys.stdin.read`，而不是`msvcrt.getch`：

```
import sys, time
import platform
if platform.system() == "Windows":
    import msvcrt
else:
    from select import select

def input_with_timeout_sane(prompt, timeout, default):
    """Read an input from the user or timeout"""
    print prompt,
    sys.stdout.flush()
    rlist, _, _ = select([sys.stdin], [], [], timeout)
    if rlist:
        s = sys.stdin.readline().replace('\n','')
    else:
        s = default
        print s
    return s
def input_with_timeout_windows(prompt, timeout, default): 
    start_time = time.time()
    print prompt,
    sys.stdout.flush()
    input = ''
    read_f=msvcrt.getche
    input_check=msvcrt.kbhit
    if not sys.stdin.isatty( ):
        read_f=lambda:sys.stdin.read(1)
        input_check=lambda:True
    while True:
        if input_check():
            chr_or_str = read_f()
            try:
                if ord(chr_or_str) == 13: # enter_key
                    break
                elif ord(chr_or_str) >= 32: #space_char
                    input += chr_or_str
            except:
                input=chr_or_str
                break #read line,not char...        
        if len(input) == 0 and (time.time() - start_time) > timeout:
            break
    if len(input) > 0:
        return input
    else:
        return default

def input_with_timeout(prompt, timeout, default=''):
    if platform.system() == "Windows":
        return input_with_timeout_windows(prompt, timeout, default)
    else:
        return input_with_timeout_sane(prompt, timeout, default)

print "\nAnswer is:"+input_with_timeout("test?",10,"no input entered") 
```

# jquery - 输入类型的 Jquery onchange 不起作用？

> ID：16076854
> 
> 赞同：-2
> 
> 时间：2013-04-18T07:22:39.780
> 
> 标签：jquery

我有一个关于 onchange 和 onblur 的问题，因为我从互联网上了解到，当焦点丢失时会调用 onblur，而当改变值时会调用 onchange。

对于我的 html 输入类型，我使用的是按需要工作的 onblur，但后来我意识到只有在输入框值确实发生变化时才应该调用 ajax 请求。所以我把它改成了 onchange 函数，但它的工作原理和 onBlur 一样，是什么原因可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:24:37.683

`onchange`对元素进行模糊处理，`HTML` `input`但前提是值已更改。`onblur`每次输入元素失去焦点时调用。

# javascript - Gps追踪谷歌地图

> ID：16076857
> 
> 赞同：0
> 
> 时间：2013-04-18T07:22:44.537
> 
> 标签：javascript, html, cordova, google-api

我正在开发一个需要跟踪服务的应用程序。如果用户自上次存储位置以来已经行进 x 米，则应用程序会将坐标存储到数据库中。

我正在使用 phonegaps 地理定位服务来获取位置等。

问题是 gps 不精确，如果我坐在椅子上检查位置，是否会时不时地相差几米，导致轨道混乱。

有人对此有解决方案吗？-我正在考虑一种检查加速度的算法，并在加速度增加很多/突然增加时阻止设备存储位置。

这会是一个好方法吗，或者以前有人遇到过类似的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:15:05.963

如果有人仍然感兴趣，请找到答案。

Android 设备时不时地“跳”到天线附近（至少是我们尝试过的那些），并且当它们这样做时 position.coords.speed 设置为 null。如果 speed == null.. =)，我们需要做的就是防止存储位置

# javascript - 构建按顺序加载并接受变量的脚本标签

> ID：16076860
> 
> 赞同：0
> 
> 时间：2013-04-18T07:22:52.740
> 
> 标签：javascript, jquery

在下面的代码中，而不是使用

```
<script src="" ></script 
```

我正在构建脚本。这将使我能够插入客户端和计算名称 - 即将变量添加到我正在调用的 src 中。这会导致 js 错误，因为脚本没有按正确的时间/顺序加载。

这是代码

```
<script type="text/javascript">

var client = 'test';
var calc = 'loanCalculator';

var insertScript = function(src){
   var element= document.getElementsByTagName('head')[0];
   var script= document.createElement('script');
   script.type= 'text/javascript';
   script.src= src;
   element.appendChild(script);
}

var insertScriptContent = function(code){
  var element= document.getElementsByTagName('body')[0];
  var script= document.createElement('script');
  script.type= 'text/javascript';
  script.innerHTML  = code;
   element.appendChild(script);
}

    insertScript('http://test.com.au/clients/' + client +'/web/'+calc+'/calculator-lib.js');
    insertScript('http://test.com.au/api/configeditor/213?callback=setupConfig');
    insertScript('http://test.com.au/clients/' + client +'/web/javascripts/c-app.js');

        insertScriptContent('var __loancalculator = null; var calculator = null; var loadTool = function(){ __loancalculator = abcd("abcd.loancalculator"); var container = $(".loan-calculator-app"); container.empty(); calculator = new __loancalculator.LoanCalculatorApp(container); calculator.init(); };');
</script>
<script type="text/javascript">

$(document).ready(function(){
    loadTool();
});
</script> 
```

有没有办法加载顶级库，然后在加载这些库时文档 .ready 实际运行？还是有更好的方法来添加这些变量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:38:44.483

脚本只能在页面渲染开始时加载。因此，当您的页面已加载时，无法加载它们。您可以在头部正常定义它们，然后按特定顺序调用它们。

# java - weblogic ssl 通信有可能接受所有证书吗？

> ID：16076864
> 
> 赞同：2
> 
> 时间：2013-04-18T07:23:16.913
> 
> 标签：java, ssl, weblogic, ssl-certificate, keystore

我想实现一个客户端应用程序来获取 weblogic 服务器的一些信息。通信必须是安全的，因为 weblogic 服务器是安全配置的。

现在我可以建立 ssl 通信了。使用以下设置：

```
System.setProperty("weblogic.security.TrustKeyStore", "CustomTrust");
System.setProperty("weblogic.security.CustomTrustKeyStoreFileName", tmpTruststore.getAbsolutePath());
System.setProperty("weblogic.security.CustomTrustKeyStorePassPhrase", "somePW");
System.setProperty("weblogic.security.CustomTrustKeyStoreType",  "JKS"); 
```

weblogic ssl 通信有可能接受所有证书吗？这将使应用程序在处理中更加方便。我想到了一个类似于覆盖 X509TrustManager 的解决方案。如果是这样，有人可以给我一个例子吗？否则你能告诉我原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:38:06.940

不，这是不可能的。在一个接受所有数据的两个实体之间建立 SSL 连接违背了建立安全连接的目的。为方便起见使用非 SSL 端口或为安全配置信任库。不能两者兼得。对不起。

# c++ - 如何为子类定义通用模板创建函数

> ID：16076866
> 
> 赞同：1
> 
> 时间：2013-04-18T07:23:27.383
> 
> 标签：c++, templates, subclass, mixins, crtp

我正在开发 cocos2dx 游戏，我需要为每个子类/场景定义一些东西（宏），例如 CREATECOCOS2DSCENE(CustomSceneNameScreen);` 具有以下定义

```
 #define CREATECOCOS2DSCENE(T)\
 \
 static cocos2d::CCScene  * scene()\
 {cocos2d::CCScene * scene = new cocos2d::CCScene; scene->init(); T * layer =  new T;       layer->init();scene->addChild(layer); layer->release(); scene->autorelease(); return scene;} 
```

*如何避免在每个屏幕上指定宏？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:35:59.983

不要为此使用宏，使用内联模板函数：

```
template <typename T>
inline static cocos2d::CCScene* scene()
{
    cocos2d::CCScene* scene = new cocos2d::CCScene; 
    scene->init(); 
    T * layer =  new T;       
    layer->init();
    scene->addChild(layer); 
    layer->release(); 
    scene->autorelease(); 
    return scene;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:35:05.380

您可以定义一个类模板，该模板在`T`您最终将要使用的子类上进行参数化，并且包含一个公共静态函数`create()`，该函数与您的宏当前定义的完全相同

```
template<typename T>
struct Cocos2DSceneCreate
:
    // each subclass of Cocos2DSceneCreate is automatically a subclass of cocos2d::CCScene
    public cocos2d::CCScene
{
    // exact same content as your macro
    static cocos2d::CCScene* scene() 
    {
        cocos2d::CCScene * scene = new cocos2d::CCScene; 
        scene->init(); 
        T * layer =  new T;       
        layer->init();
        scene->addChild(layer); 
        layer->release(); 
        scene->autorelease(); 
        return scene;
    }
}; 
```

然后你使用**[奇怪的重复模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)**(CRTP) 来**混合**所需的行为，方法是使用先前定义的模板派生每个子类，并将其**自身**作为参数（这就是“重复”这个词的来源）

```
class SomeNewSubClass
:
    public Cocos2DSceneCreate<SomeNewSubClass>
{
    // other stuff
}; 
```

请注意，`SomeNewSubClass`它实际上是一个子类，`cocos2d::CCScene`因为您`Cocos2DSceneCreate`本身已经是一个子类。

另请注意，这个类模板解决方案比@Yuushi 的函数模板解决方案要复杂一些。额外的好处是，如果你有一个类模板比你有一个函数模板更容易为特定类型专门创建场景。如果您不需要专业化，请使用他的解决方案。

# html - 以更高分辨率保存 html5 画布图像

> ID：16076868
> 
> 赞同：2
> 
> 时间：2013-04-18T07:23:39.167
> 
> 标签：html, canvas, kineticjs

我正在创建一个允许用户使用 HTML5 和 canvas 元素创建场景的站点。

我打算用`KinecticJS`这个，它看起来很棒。但我有一个问题，我真的很挣扎。

由于我希望能够为用户提供更高质量的打印场景版本，因此我不能只给他们 800x600 像素的画布数据，因为打印时它会变得非常模糊。

我看到一些论坛建议简单地“扩大”你的`canvas`输出然后保存输出，但我担心这样做的性能成本。虽然这可能是我唯一的希望。

由于 KinecticJS 使用图形层次结构来渲染场景，我认为可以使用 KineticJS 创建场景，然后重新渲染（而不是缩放）相同的场景，只是这次放大位置等......场景中的物体。

以前有没有人做过这样的事情？到目前为止，我仍处于研究阶段。

请注意，显然我知道 SVG，但我需要更大的浏览器支持，并且 IE 在 IE9 之前使用 VML，我严重怀疑我能否将 SVG/VML 场景转换为 PNG 并保持浏览器支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:08:26.207

您可以为单个“捕获帧”放大画布。

您有一个绘图功能或一个渲染功能。给它一个论点，如果该论点是正确的，请参考更大的背景。

```
var canvas, context; //you already have these
var newCanvas, newContext; //I'm making these
var scaleFactor = 2; //How much we scale?
var ctx; //Identify's which context to draw to....

function render(screenShot){
    ctx = context;
    if(screenShot){
        if(!newCanvas){
            newCanvas = document.createCanvas();
            newContext = newCanvas.getContext('2d');
        }
        newCanvas.width = canvas.width * scaleFactor;
        newCanvas.height = canvas.height * scaleFactor;

        ctx = newContext;
        newContext.scale(scaleFactor, scaleFactor); //Now all your previous drawing will autoscale
    }

    /*   all your old draw code goes here, 
    change all your context calls to ctx */

    if(screenShot){
        YourNewHighResSuperCoolSnapShotData = newCanvas.toDataURL("image/png");
    }
} 
```

你可能想看看 toDataURL 是如何工作的，以及它会给你什么。

这不会造成任何损失，因为您只需要在需要高质量的时候调用 render(true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T05:23:25.330

我对此有另一个答案：

```
function makeBig(firstStage) {
    newStage.setScale(2);
    newStage.add(firstStage.getChildren()[0].clone());
} 
```

这对我有用，一旦你知道怎么做就很容易了:)

# javascript - 如何将文件名传递给 wiston 记录器构造函数？

> ID：16076870
> 
> 赞同：0
> 
> 时间：2013-04-18T07:23:50.333
> 
> 标签：javascript, winston

**日志.js**：

```
var winston = require('winston');

var logger = new (winston.Logger)({
  transports: [
    new (winston.transports.Console)({ json: false, timestamp: true }),
    new winston.transports.File({ filename: **Get from outside**, json: false })
  ],
});

module.exports = logger; 
```

**a.js**，想要记录到它自己的日志文件

```
var logger = require('./log')('log_to_this_file'); <=== How can I pass a filename in?

logger.info('log to file'); 
```

**b.js**，也想记录到自己的日志文件

```
var logger = require('./log')('log_to_another_file'); <=== How can I pass a filename in?

logger.info('log to file'); 
```

我不知道如何编写 log.js 从外部获取文件名。

我怎么能这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:28:06.697

你不能在 b.js 中添加一个新的记录器吗？

```
 var winston = require('winston');

  //
  // Configure the logger for `category1`
  //
  winston.loggers.add('category1', {
    console: {
      level: 'silly',
      colorize: 'true',
      label: 'category one'
    },
    file: {
      filename: '/path/to/some/file'
    }
  }); 
```

# c# - MS Word 2010 不显示图像

> ID：16076871
> 
> 赞同：3
> 
> 时间：2013-04-18T07:23:52.303
> 
> 标签：c#, asp.net, ms-word

我在 .net Web 应用程序中生成一个 .docx 文件，并将其作为下载 URL 提供给同一页面上的用户。问题是，同一个下载的word文档在某些系统上显示图像而在某些系统上无法显示（图像是指外部链接）。我比较了两个系统上与 word 相关的所有设置，但没有发现任何差异。请就可能导致这种情况的原因给我一些意见。我检查的所有系统都有 Windows 7 和 MS word 2010。

我提到的几乎所有链接都建议我取消选中“显示图片占位符”选项。但就我而言，它已经被禁用了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T07:56:20.430

请检查所有系统的服务包。

# apache - Openfire + Candychat 500 内部错误

> ID：16076874
> 
> 赞同：0
> 
> 时间：2013-04-18T07:24:03.787
> 
> 标签：apache, xmpp, openfire, basichttpbinding

嗨，我对这个 xmpp 协议非常陌生，并尝试使用 Openfire 和 candychat 构建一个简单的基于 Web 的聊天应用程序。

目前我正在使用 XAMPP (C:\xampp) 运行我的网络服务器。我已经在 C:\Openfire 安装了 openfire。

我已经通过 github 分叉了 Candychat 并将其放在我的 xampp/htdocs 中。

我的 .htaccess 文件如下所示：

```
AddDefaultCharset UTF-8
Options +MultiViews
RewriteEngine On
RewriteRule http-bind/ http://localhost:7070/http-bind/ [P] 
```

虽然我的 index.html（在 Candychat 的示例文件夹下）看起来像这样（我省略了大部分代码）：

```
<script type="text/javascript">
    $(document).ready(function() {
        Candy.init('http-bind/', {
            core: { debug: true },
            view: { resources: 'res/' }
        });

        Candy.Core.connect();
    });
</script> 
```

当我尝试通过 apache（通过网络浏览器）访问它时，一切正常，我得到了正确的登录屏幕。但是，当我输入用户名 + 密码时，萤火虫检测到有 500 错误（“NetworkError：500 服务器错误”）。

回顾我的 OpenFire 管理页面（特别是事件日志），这就是我得到的：

```
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
at org.eclipse.jetty.server.Server.handle(Server.java:349)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:801)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
at java.lang.Thread.run(Unknown Source)
2013.04.18 14:03:46 org.jivesoftware.openfire.http.HttpBindServlet - Error sending packet to client.
org.jivesoftware.openfire.http.HttpConnectionClosedException: The http connection is no longer available to deliver content
at org.jivesoftware.openfire.http.HttpConnection.deliverBody(HttpConnection.java:117)
at org.jivesoftware.openfire.http.HttpSession.addConnection(HttpSession.java:785)
at org.jivesoftware.openfire.http.HttpSession.createConnection(HttpSession.java:720)
at org.jivesoftware.openfire.http.HttpSessionManager.forwardRequest(HttpSessionManager.java:316)
at org.jivesoftware.openfire.http.HttpBindServlet.handleSessionRequest(HttpBindServlet.java:254)
at org.jivesoftware.openfire.http.HttpBindServlet.parseDocument(HttpBindServlet.java:176)
at org.jivesoftware.openfire.http.HttpBindServlet.doPost(HttpBindServlet.java:145)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:547)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:480)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:941)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
at org.eclipse.jetty.server.Server.handle(Server.java:349)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:801)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:51)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
at java.lang.Thread.run(Unknown Source) 
```

我不确定这里会发生什么，任何人都可以帮助我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:24:10.087

@Ben Companjen

感谢您的提示，

我已经解决了这个问题。似乎是我的防病毒软件导致了这个问题。我所做的是

1.  确保 HTTP 绑定配置指向正确的端口
2.  确保我的 AV 没有干扰所述端口。
3.  每次通过管理面板进行更改时重新启动 OpenFire。

干杯

# smalltalk - 海滨还在积极开发？

> ID：16076876
> 
> 赞同：3
> 
> 时间：2013-04-18T07:24:04.717
> 
> 标签：smalltalk, seaside

只是一个快速的问题。自从上一个大版本seaside 2010年问世以来，是否还在积极开发中？目前似乎没有太多的事情发生。伊利亚特也似乎死了。

谢谢，亨里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:29:52.130

Seaside 是一个非常稳定和可扩展的框架。尽管在过去几年中没有应用任何重大更改，但我们正在使用它创建高度动态的 Web 应用程序，而不受 Seaside 本身的限制。

[3.1 版本](http://code.google.com/p/seaside/wiki/Seaside310Changelog)即将发布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T07:55:15.727

是的，Seaside 仍在积极开发中。目前，Seaside 3.1 正在制作中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T08:19:16.783

伊利亚特似乎有点死了，但事实并非如此；）

事情是它背后有一个**非常**小的社区，但是如果你检查存储库，你会看到有最近的提交。

我猜今年很快就会有一个新版本。

*   SmalltalkHub 存储库： [http ://smalltalkhub.com/#!/~Objectfusion/Iliad/](http://smalltalkhub.com/#!/~Objectfusion/Iliad/)

*   Squeaksource 存储库：[http ://www.squeaksource.com/IliadDev.html](http://www.squeaksource.com/IliadDev.html)

自 2010 年以来，我一直将它用于我编写的所有 Web 应用程序，尽管入口路径可能有点陡峭（没有太多文档，没有太多可查看的实际代码，小型社区等）我会说它的易用性和简单性在中期确实得到了回报。

# mysql - 绝对位置的排序结果

> ID：16076880
> 
> 赞同：0
> 
> 时间：2013-04-18T07:24:08.380
> 
> 标签：mysql

[http://sqlfiddle.com/#!2/1840d/1](http://sqlfiddle.com/#!2/1840d/1)

我有一个 id 和位置表，是否可以在指定位置设置行？

要得到

```
ID  PLACE
5   (null)
3   2
4   (null)
6   4
2   (null)
1   (null) 
```

代替

```
ID  PLACE
6   4
5   (null)
4   (null)
3   2
2   (null)
1   (null) 
```

对于此数据，这意味着将 place = 2 的行作为结果中的第二行，将 place = 4 的行作为结果中的第四行，而其他行以原始顺序覆盖它们。

回答

```
select * from records 
order by FIELD(ID, 5,3,4,6,2,1) 
```

很好很有趣，但是错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:49:09.527

```
SELECT CASE WHEN NULLID IS NULL 
       THEN ID
       ELSE NULLID
       END AS ID, 
       toFillTable.place
FROM 
(
    SELECT CASE WHEN id IS NULL 
           THEN @placeHolder := @placeHolder + 1 
           ELSE null 
           END as placeHolder
         , r.*
    FROM
    (
        SELECT @row := @row + 1 as row
        FROM records t1, (SELECT @row := 0) t2
    ) s
        INNER JOIN (SELECT @placeHolder := 0) t12
        LEFT OUTER JOIN records r
            ON s.row = r.place
    order by row
) toFillTable
    LEFT OUTER JOIN
    (
          SELECT @row1 := @row1 + 1 as nullRowPlace, t1.id as nullId
          FROM records t1, (SELECT @row1 := 0) t2
          where place is null
          order by t1.id desc
    ) nullPlaceTable ON toFillTable.placeHolder = nullPlaceTable.nullRowPlace 
```

第一个查询输出结果：

```
toFillTable

placeHolder    Id    Place
    1        (null)  (null)
  (null)       3       2
    2        (null)  (null)
  (null)       6       4
    3        (null)  (null)
    4        (null)  (null) 
```

当在右行给出位置时，它会给出 ID，并在位置为空的行上给出一个名为 PlaceHolder 的计数器。

第二个查询：

```
nullPlaceTable 

NullPlaceholder    IDNull
     1                5
     2                4
     3                2
     4                1 
```

当 place 为空时，它给出行的排名。

两者的结合给出了预期！

[小提琴。](http://sqlfiddle.com/#!2/1840d/85/0)

参考：

*   [在 MySQL 中生成一个整数序列](https://stackoverflow.com/questions/304461/generate-an-integer-sequence-in-mysql)

# ckeditor - CkFinder 插件 Imageresize 插件质量

> ID：16076881
> 
> 赞同：0
> 
> 时间：2013-04-18T07:24:10.527
> 
> 标签：ckeditor, ckfinder

我正在尝试 ckFinder 和 imageresize 插件；它可以工作，但是在调整图像大小时，调整后图像的质量很糟糕，我找不到配置图像输出质量的参数。

我试过 Images.Quality = 100; （.net 集成）但没有运气。

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:47:54.940

基于一些更好的组件实现你的oun......

您可以尝试使用没有插件的简单缩略图选项：

```
Thumbnails.MaxWidth = 100;
Thumbnails.MaxHeight = 100;
Thumbnails.Quality = 80; 
```

关于Images.Quality，我认为它仅在图像大于Images.MaxWidth Images.MaxHeight（默认1600x1200）时使用它......

旧的ckfinder和一些插件是开源的，你可以查看并自己编写；

# javascript - js滑动菜单求助——中间动画延迟？

> ID：16076883
> 
> 赞同：3
> 
> 时间：2013-04-18T07:24:12.243
> 
> 标签：javascript, jquery, css

我正在寻找具有某种特定功能的菜单。我对 javascript 和 jquery 比较陌生，所以我不知道从哪里开始。这是我想要它做的事情：

![js问题](https://i.stack.imgur.com/SKI6z.png)

将鼠标悬停在链接 4 和 5 上也会继续使它们保持在动画结束状态。

有什么建议么？我尝试使用 CSS3 动画来执行此操作，但在用户停止将鼠标悬停在链接 3 上并滑回之前，我无法让它暂停。我还遇到了链接 3 和链接 4 之间的间隙导致悬停停止的问题。Javascript 似乎是更好的选择。

[我的css3动画的jsfiddle](http://jsfiddle.net/fMGva/)

这是其中包含我的 css3 动画的相关代码：

```
 -webkit-transition: all .2s ease 0s;
 -moz-transition: all .2s ease 0s;
 -o-transition: all .2s ease 0s;
 -ms-transition: all .2s ease 0s;
 transition: all .2s ease 0s; 
```

编辑：我已经用我当前的 CSS3 动画的 jsfiddle 更新了它（它在 jsfiddle 的实时预览中看起来有点不同于在我的网站上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:37:44.233

顶部菜单的第三个“li”的宽度已扩展，因此当您将光标移至“extralinks”菜单时，后者不会滑出视图。

纯 CSS 解决方案：[Jsfiddle Link](http://jsfiddle.net/bJ7Zm/4/)

**CSS**：

```
* {
    padding:0;
    margin:0;
}
.links {
    width:100%;
}

.links > menu {
    left: 0%;
    text-align:center;
    position: fixed;
    z-index: 4;
}

.links menu li  {
    whitespace: nowrap;
    display: inline-block;
    margin-right: 30px;
    position: relative;
    padding: 0;
    height: 40px;
    top: 24px;
    z-index: 4;
    float:left;
}

.links a, a:visited {
    font-family: RobotoLight;
    text-decoration: none;
    text-transformation: none;
    weight: normal;
    font-size: 18px;
    color: #000000;
    z-index: 4;
    float:left;
    height: 100%;
}

.links a:hover {
    font-family: RobotoLight;
    text-decoration: none;
    text-transformation: none;
    weight: normal;
    font-size: 18px;
    color: #33b5e5;
    z-index: 4;
}

.l3 .extralinks {
    white-space: nowrap;
    position: fixed;
    top: 0px;
    left:100%;
    padding: 0 0 0 10px;
    text-align:center;
    height: 40px;
    width: 300px;
    z-index: 4;
    display: inline-block;
    -webkit-transition: all .2s ease 0s;
    -moz-transition: all .2s ease 0s;
    -o-transition: all .2s ease 0s;
    -ms-transition: all .2s ease 0s;
    transition: all .2s ease 0s;
    z-index: 4;
}
.l3:hover .extralinks {
    left: 50%;    
}
.l3:hover .extralinks li {
}

.links li:nth-child(3) {
    width:200px;
    margin-right:0px;
}

.links li:nth-child(3):hover > a {
    font-family: RobotoLight;
    text-decoration: none;
    text-transformation: none;
    weight: normal;
    font-size: 18px;
    color: #33b5e5;
    z-index: 4;                
    border-bottom: 3px solid #33b5e5;
}

.links li:hover > a, li:active > a {
    border-bottom: 3px solid #33b5e5;
} 
```

**HTML**：

```
<div class="links">
    <menu>
        <li>
            <a href="#">Link 1</a>
        </li>
        <li>
            <a href="#">Link 2</a>
        </li>
        <li class="l3">
            <a href="#">Link 3</a>
            <menu class="extralinks">
                <li>
                    <a href="#">Link 4</a>
                </li>
                <li>
                    <a href="#">Link 5</a>
                </li>
            </menu>
        </li>
    </menu>
</div> 
```

# java - mysql和java中的时区差异

> ID：16076885
> 
> 赞同：7
> 
> 时间：2013-04-18T07:24:15.090
> 
> 标签：java, mysql, timezone, convert-tz

我在 mysql 中有一个查询，它比较像这样的 2 个日期

```
convert_tz(updatedDate,'+05:30','-05:00') < ? 
```

convert 函数以美国时间返回列 createddate 的值。当我在 mysql 查询浏览器中运行此查询时

```
convert_tz(updatedDate,'+05:30','-05:00') < '2013-04-14 09:30:00' 
```

例如，它给了我正确的值

```
product    count
-------    ------
    A        123
    B        7 
```

现在，我正在使用这样的 PreparedStatement 在 java 中设置它

```
pst.setTimestamp(1, new java.sql.Timestamp(end.getTimeInMillis()));

                rs=pst.executeQuery();
                System.out.println("=====new Open Tickets Query executed=====");
                System.out.println(pst); 
```

最后一行打印整个查询，设置的值为

```
convert_tz(updatedDate,'+05:30','-05:00') < '2013-04-14 09:30:00' 
```

但它给了我这样不同的价值观

```
product    count
-------    ------
    A        155
    B        19 
```

所以，我怀疑是时区问题我将代码更改为

```
end.setTimeZone(TimeZone.getTimeZone("America/New York"));
pst.setTimestamp(1, new java.sql.Timestamp(end.getTimeInMillis()));

                rs=pst.executeQuery();
                System.out.println("=====new Open Tickets Query executed=====");
                System.out.println(pst); 
```

但它仍然给出相同的错误结果。

**更多信息：我如何设置日历结束变量**

我有一个 Web 应用程序，它给了我日期字符串“2013-04-14 09:30:00”

```
 DateFormat df1=new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
                Calendar end=Calendar.getInstance();
                end.setTime(df1.parse(endString));
                end.set(Calendar.HOUR, 9);
                end.set(Calendar.MINUTE, 30);
                end.set(Calendar.SECOND, 0); 
```

另外，对于我尝试使用 java.util.Date 对象的实验，它给了我正确的结果，下面是代码

```
SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
end.setTime(sdf.parse("2012-10-01 00:00:00"));
pst.setTimestamp(1, new java.sql.Timestamp(end.getTime())); 
```

**更新：-** 如果我使用不推荐使用的方法，答案是正确的

```
 pst.setTimestamp(1, new java.sql.Timestamp(octDate.get(Calendar.YEAR)-1900,octDate.get(Calendar.MONTH),octDate.get(Calendar.DATE),octDate.get(Calendar.HOUR),octDate.get(Calendar.MINUTE),octDate.get(Calendar.SECOND),0));
pst.setTimestamp(2, new java.sql.Timestamp(end.get(Calendar.YEAR)-1900,end.get(Calendar.MONTH),end.get(Calendar.DATE),end.get(Calendar.HOUR),end.get(Calendar.MINUTE),end.get(Calendar.SECOND),0)); 
```

**更新2： -** 在第一个答案的建议之后，我这样做了

1）`SELECT NOW()`在mysql中执行并返回`'2013-04-22 11:56:08'`

2) 执行

```
System.out.println(new Date(System.currentTimeMillis())); 
```

输出 ：`Mon Apr 22 11:56:25 IST 2013`

意味着两个系统具有相同的时区

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T23:12:25.473

背景：即使是杰出的程序员也有一个令人惊讶的普遍且严重的误解，即存储时间戳（在您的数据库中，日期、日历、时间戳等）以某种方式具有时区信息。**他们不。** 时间戳（无论如何，直到 Java 8）存储为自 1970 年 1 月 1 日 UTC 午夜以来的毫秒数。句末。设置时区唯一要做的就是向计算机提供足够的信息，以将该时间戳转换为人类可读的格式，反之亦然。

答：当您怀疑这是时区问题时，**您是对的**。但是您用来验证这一点的代码也有问题：

```
end.setTimeZone(TimeZone.getTimeZone("America/New York"));
pst.setTimestamp(1, new java.sql.Timestamp(end.getTimeInMillis())); 
```

该`setTimeZone`语句对存储在 中的时间**没有影响**`end`，因为时间已经设置好了。只有在您之后存储时间，并且只有当您使用 Calendar 的一种方法将时间从人类可读格式（而不是 ）转换时，它才会产生效果`setTimeInMillis`。

当您使用`getTimeInMillis`将时间戳传递给准备好的语句时，您将直接检索时间戳。由于您没有将其转换为人类格式，因此时区信息再次被忽略。

当你尝试

```
SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
end.setTime(sdf.parse("2012-10-01 00:00:00"));
pst.setTimestamp(1, new java.sql.Timestamp(end.getTime())); 
```

和

```
pst.setTimestamp(1, new java.sql.Timestamp(octDate.get(Calendar.YEAR)-1900,octDate.get(Calendar.MONTH),octDate.get(Calendar.DATE),octDate.get(Calendar.HOUR),octDate.get(Calendar.MINUTE),octDate.get(Calendar.SECOND),0));
pst.setTimestamp(2, new java.sql.Timestamp(end.get(Calendar.YEAR)-1900,end.get(Calendar.MONTH),end.get(Calendar.DATE),end.get(Calendar.HOUR),end.get(Calendar.MINUTE),end.get(Calendar.SECOND),0)); 
```

事情**似乎**有效，因为您现在正在使用与人类可读格式进行转换的方法，因此使用了指定的时区信息。然而，这只是掩盖了真正的问题。真正的问题是，当您从`endString`. 也就是说，表示的时区与解析日期时`endString`设置的时区不匹配。`df1`

简短答案：在此行之前：

```
end.setTime(df1.parse(endString)); 
```

你需要：

*   找出`endString`表示时间的时区。
*   设置`df1`而**不是** `end`同一时区。因为`df1`是将日期从人类格式转换的东西，所以使用的是时区信息。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T05:17:13.467

`TimeZone.getDefault().getID()`从您的和 MySQL 默认时区返回哪个值？

顺便说一句，您可以尝试使用像这样的实用程序来跨时区转换日期时间：

```
public Calendar convertDateToServerTimeZone(Date dateTime, String timeZone) {
    Calendar userDefinedTime = Calendar.getInstance();
    userDefinedTime.setTime(dateTime);
    if(!TimeZone.getDefault().getID().equalsIgnoreCase(timeZone)) {
    System.out.println        ("original defined time: " + userDefinedTime.getTime().toString() + " on tz:" + timeZone);
    Calendar quartzStartDate = new GregorianCalendar(TimeZone.getTimeZone(timeZone));
    quartzStartDate.set(Calendar.YEAR, userDefinedTime.get(Calendar.YEAR));
    quartzStartDate.set(Calendar.MONTH, userDefinedTime.get(Calendar.MONTH));
    quartzStartDate.set(Calendar.DAY_OF_MONTH, userDefinedTime.get(Calendar.DAY_OF_MONTH));
    quartzStartDate.set(Calendar.HOUR_OF_DAY, userDefinedTime.get(Calendar.HOUR_OF_DAY));
    quartzStartDate.set(Calendar.MINUTE, userDefinedTime.get(Calendar.MINUTE));
    quartzStartDate.set(Calendar.SECOND, userDefinedTime.get(Calendar.SECOND));
    quartzStartDate.set(Calendar.MILLISECOND, userDefinedTime.get(Calendar.MILLISECOND));
    System.out.println("adapted time for " + TimeZone.getDefault().getID() + ": " + quartzStartDate.getTime().toString());
    return quartzStartDate;
    } else {
    return userDefinedTime;
    }
} 
```

我在这里使用过这个功能：[Java Quartz-Scheduler across TimeZone](https://stackoverflow.com/questions/14273917/java-quartz-scheduler-across-timezone)

希望他的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:25:43.837

如果没有看到第二个查询而不是第一个查询匹配的值，很难绝对确定。但要记住的一件事是，时区与偏移量不同。[请阅读TimeZone 标签 wiki](https://stackoverflow.com/tags/timezone/info)的“TimeZone != Offset”部分。

例如，您说您正在转换到`America/New_York`时区。该时区有时位于 UTC-05:00（东部标准时间），有时位于 UTC-04:00（东部夏令时间）。由于在夏令时有效的 -4 偏移量，您的某些数据完全有可能被拾取。

当您硬编码到 -5 偏移量时，您没有考虑任何时区规则。这可以解释这种差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T14:42:02.330

时区信息不适用于日期/时间，除非您在连接 URL 中设置***useTimeZone=true***。您也可以使用***getTimestamp()***方法，它将日历作为参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-27T17:20:02.477

**试试这个。**

按照您现在设置的方式设置时间戳参数

```
pst.setTimestamp(1, new java.sql.Timestamp(end.getTimeInMillis())); 
```

.

在数据库调用期间，JDBC 驱动程序可能已经将输入日期/时间值转换为 GMT。因此，数据库正在处理的日期值不必考虑输入日期的时区，这可能因客户端而异。

而不是将**from_tz**设置为 '+05:30'

```
convert_tz(updatedDate,'+05:30','-05:00') 
```

将**from_tz**设置为 '00:00'

```
convert_tz(updatedDate,'00:00','-05:00') 
```

# android - Android Maps API v2 - 事件 onClick 我的位置光标

> ID：16076889
> 
> 赞同：1
> 
> 时间：2013-04-18T07:24:20.727
> 
> 标签：android, location, google-maps-api-2

我有一个使用 Maps API v2 的应用程序，我使用该方法`map.setMyLocationEnabled(true);`显示用户位置。它在经典的谷歌地图应用程序中运行良好，位置光标周围有蓝色半径，但我想在点击位置光标时实现一些东西，以在 Toast 或弹出窗口中显示准确性。我在 Maps API v2 参考和 StackOverflow 中都没有找到任何关于此的内容......

我唯一知道的是，我可以通过`map.setOnMyLocationChangeListener()`和`location.getAccuracy();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:31:03.063

也许你应该在你自己的位置上放置一个自定义标记，使用相同的 imageResource 作为默认的自己位置标记和一个自己的 onClickListener，这样它看起来就和内置的一样，只是不要忘记跟踪用户的位置，并在每个位置更改事件处更新标记。

# python - 这个运算符在 django `reduce(operator.and_, query_list)` 中是什么意思

> ID：16076894
> 
> 赞同：14
> 
> 时间：2013-04-18T07:24:40.090
> 
> 标签：python, django, django-queryset

我正在阅读这个问题

[使用 args 和 kwargs 动态构建 Django 过滤器查询](https://stackoverflow.com/questions/8510057/constructing-django-filter-queries-dynamically-with-args-and-kwargs?rq=1)

我不知道这个操作员做了什么

`filter(reduce(operator.or_, argument_list))`

或这个

`filter(reduce(operator.and_, query_list))`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T07:34:50.623

`filter`是django模型管理器的常规方法，所以没什么好解释的。

`reduce`是一个类似于下面代码的内置函数：

```
def reduce(func, items):
    result = items.pop()
    for item in items:
        result = func(result, item)

    return result 
```

`func`用户定义的函数在哪里。

`operator.or_`是一个包装`or`操作符的python标准库函数。它类似于此代码：

```
def or_(a, b):
    return a | b 
```

例如：

```
reduce(operator.or_, [False, False, True]) 
```

将返回`True`。

在您的示例上下文中，`or`and`and`运算符被重载，因此它应该返回一个新查询，该查询由所有由`or`or`and`运算符连接的较小部分组合而成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T07:59:11.393

[Python 文档](http://docs.python.org/2/library/functions.html#reduce)描述`reduce`为：

> 将两个参数的函数从左到右累积应用到iterable的项上，以将iterable减少为单个值

因此，它允许我们通过一个简单的函数调用在一组数据上轻松快速地多次执行单个函数（需要两个参数，即添加 a 到 b）。

`QuerySet`在这个 Django 问题的情况下，我们希望通过获取单个查询 ( `Q`) 对象的列表并累积对它们执行`AND`或操作来构造单个对象`OR`以获得单个查询

例如，对于`[Q(1), Q(2), Q(3)]`我们想要首先`OR` `Q(1)`使用的查询`Q(2)`，然后`OR`使用该操作的结果`Q3`来给我们最终查询

我们习惯于看到 Python 中的操作（例如加法或减法）写成类似`A + B`（或在 or'ing 的情况下：），`A | B`但 Python 也提供了执行这些操作的函数（即`or(a, b)`，`and(a, b)`它会做同样的事情）。这些在诸如此类的情况下很有用，因为它们可以用作其他方法的参数。这些功能，如“加”、“减”等都在`operator`模块中。

因此，使用该`operators`模块，我们看到它`reduce(operator.and_, query_list)`正在获取列表中的每个`Q`对象，并将其与列表中先前对象的持​​续结果“和”。

# ruby-on-rails - 如何处理 ROR 项目中的超时

> ID：16076897
> 
> 赞同：0
> 
> 时间：2013-04-18T07:24:47.167
> 
> 标签：ruby-on-rails, ruby, timeout

我正在为一个带有 ruby​​ on rails 的项目工作。有一页包含项目列表，您可以选择其中多个并一次更改其信息。但是当数据太大并且您一次选择太多项目来处理时。它会运行几分钟，然后页面会显示错误消息，这是由服务器超时引起的......我怎样才能让它运行十分钟但不超时并返回错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:30:28.140

最好的用户友好解决方案是使用一些后台任务......

比如delayed_job，例如：

```
def my_action
  do_some_stuff
end
handle_asynchronously :my_action, :priority => 1 
```

然后，您的操作将异步完成，您的服务器将继续正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:31:24.067

没有一种方法可以做到这一点。

首先，你可以查看你的日志来检查长的sql查询，如果你看到一些很长的，你可以尝试优化它们。

您还可以使用 rails-footnotes 之类的 gem 来查看开发环境中每个页面底部的 sql 查询。

如果您正在执行一些昂贵的任务，请尝试使用 resque 或 delay_jobs 等工具在后台处理它们。

# arrays - 将多维数组转换为因子数据框

> ID：16076899
> 
> 赞同：2
> 
> 时间：2013-04-18T07:24:57.970
> 
> 标签：arrays, r, dataframe, transform

我有一个 tapply 函数的结果，它创建一个数组（带有模块名称、动物名称（行）和测试天数（列）），如下所示

```
,, module1
     [,D1] [,D2] [,D3] [,D4]
[A1,]    1    3    2    1
[A2,]    2    1    3    2

,, module3
     [,D1] [,D2] [,D3] [,D4]
[A1,]    1    3    2    1
[A2,]    2    1    3    2

,, module3
     [,D1] [,D2] [,D3] [,D4]
[A1,]    1    3    2    1
[A2,]    2    1    3    2 
```

我想将其转换为一个数据框，其中模块名称和维度名称是数据框中的因素，例如：

```
Module1  D1  A1  1
Module1  D1  A2  2 
Module1  
..
Module3  D4  A1  1
Module3  D4  A2  2
etc 
```

然后我可以将其用于 ggplot 和其他功能。是否有一个打包/功能可以让我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:32:56.923

`plyr`这是使用and的一种方法`reshape2`：

```
adply(a, 3, function(x) melt(cbind(names=rownames(x), as.data.frame(x))))
#         X1 names variable value
# 1  module1    A1       D1     1
# 2  module1    A2       D1     2
# 3  module1    A1       D2     3
# 4  module1    A2       D2     1
# 5  module1    A1       D3     2
# 6  module1    A2       D3     3
# 7  module1    A1       D4     1
# 8  module1    A2       D4     2
# 9  module2    A1       D1     1
# 10 module2    A2       D1     2
# 11 module2    A1       D2     3
# 12 module2    A2       D2     1
# 13 module2    A1       D3     2
# 14 module2    A2       D3     3
# 15 module2    A1       D4     1
# 16 module2    A2       D4     2
# 17 module3    A1       D1     1
# 18 module3    A2       D1     2
# 19 module3    A1       D2     3
# 20 module3    A2       D2     1
# 21 module3    A1       D3     2
# 22 module3    A2       D3     3
# 23 module3    A1       D4     1
# 24 module3    A2       D4     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T12:59:17.377

使用`as.data.frame.table`. 它的老板：

```
a0 <- array(1:3, dim = c(2,4,3), 
            dimnames = list(paste0("A", 1:2), paste0("D", 1:4), paste0("module", 1:3)))
a0
# , , module1

#    D1 D2 D3 D4
# A1  1  3  2  1
# A2  2  1  3  2

# , , module2

#    D1 D2 D3 D4
# A1  3  2  1  3
# A2  1  3  2  1

# , , module3

#    D1 D2 D3 D4
# A1  2  1  3  2
# A2  3  2  1  3

df0 <- as.data.frame.table(a0)
head(df0)
#   Var1 Var2    Var3 Freq
# 1   A1   D1 module1    1
# 2   A2   D1 module1    2
# 3   A1   D2 module1    3
# 4   A2   D2 module1    1
# 5   A1   D3 module1    2
# 6   A2   D3 module1    3 
```

# c# - 如何将 Json 类型对象的返回值分配给 TextBox 但我收到错误

> ID：16076907
> 
> 赞同：0
> 
> 时间：2013-04-18T07:25:30.043
> 
> 标签：c#, jquery, asp.net

我正在使用 ajax 调用一个 jquery 函数，它将返回指定 id 的基本名称、名称、地址、电子邮件。当我要将这些值分配给 TextBox 时，它会返回 json 类型对象，但出现错误。所以请帮助我。

```
<script type="text/javascript">
  function BindGridView(id) {
  debugger;

        var params = "{ID:'" + id + "'}";
     $.ajax({
          type: "POST",
          url: "InsertoninGridViewusingJQuery.aspx/GetRecords",
          data: params,
          contentType: "application/json",
          dataType: "text",
          success: function (data) {
          alert(data.d.length);
         for (var i = 0; i < data.d.length; i++) {
         debugger;

                $("#<%=txtFname.ClientID%>").val(data[i].FName);
                $("#<%=txtLname.ClientID%>").val(UserDetails.LName);
                $("#<%=txtAddress.ClientID%>").val(UserDetails.Address);
                $("#<%=txtEmail.ClientID%>").val(UserDetails.Email);

                 debugger;
             }
           }
          });
      }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:30:49.980

你`dataType`是文本，你的回应是 json

尝试这个

```
 dataType: "json", 
```

我认为你的成功功能应该是

```
 success: function (data) {
      alert(data.d.length);

            $("#<%=txtFname.ClientID%>").val(data.FName);
            $("#<%=txtLname.ClientID%>").val(data.LName);
            $("#<%=txtAddress.ClientID%>").val(data.Address);
            $("#<%=txtEmail.ClientID%>").val(data.Email);

             debugger;
         }
       } 
```

# java - 如何从文件系统中的相对路径中找到绝对路径

> ID：16076911
> 
> 赞同：0
> 
> 时间：2013-04-18T07:25:34.787
> 
> 标签：java, file

TestA 项目中的 Java 类 ReadFile1。以及项目TestB中的另一个类TestRead。我想在 TestRead 类中阅读该类 ReadFile1 。我有唯一的相对路径，那我怎么读。

例子

我的课程存在于 D:\EIX-New-Source\source\message-kernel\src\main\java\com\eix\transform\parser\MessageTransformer.java

message-kernel 是源文件夹中的项目。

我正在 D:\EIX-New-Source\source\msg-Test\src\com\coreJava\rnd\RelativePath.java 中进行测试

当我运行这个程序时，我得到的结果是 D:\EIX-New-Source\source\message-kernel\target\classes

但我期望结果应该是 D:\EIX-New-Source\source\message-kernel\src\main\java\com\eix\transform\parser\MessageTransformer.java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:37:04.570

尝试以下方法获取类文件的绝对路径，然后您可以从相对文件路径附加剩余路径以获取文件的实际绝对路径。

```
String getAbsolutePath(){
java.security.ProtectionDomain pd =
YourClassName.class.getProtectionDomain();
if ( pd == null ) return null;
java.security.CodeSource cs = pd.getCodeSource();
if ( cs == null ) return null;
java.net.URL url = cs.getLocation();
if ( url == null ) return null;
java.io.File f = new File( url.getFile() );
if (f == null) return null;

return f.getAbsolutePath();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:39:54.767

首先，Java 保存与当前工作目录相关的任何文件。如果您给出包声明，那么它将在当前目录中相应地创建文件夹。
如果您总是希望文件相对于 Java 文件的位置而不是当前工作目录保存，则需要找到该目录并假装它获得绝对路径。

工作目录是你运行程序的地方，即你调用java TestClass的地方，所以当你想写相对于正在执行的类的文件时，你必须知道当前目录并从那里附加相对路径，例如

```
public class TestClass {
  public void printFullPath() {
        String fullPath = String.format("%s/%s", System.getProperty("user.dir"),   this.getClass().getPackage().getName().replace(".", "/"));
        System.out.println(fullPath);
    }

} 
```

有关更多详细信息，请访问 [如何使用相对路径而不是绝对路径？](https://stackoverflow.com/questions/4210239/how-to-use-relative-path-instead-of-absolute-path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:31:55.383

您没有提及阅读文件后要做什么。您可以通过创建输入流来读取文件。输入流也适用于相对路径。

```
FileInputStream inputStream = new FileInputStream(new File("../../com/eix/cromics/tdlr/ReadFile1")); 
```

如果要将其用作 java api，则需要定义项目 TestB 对 TestA 的依赖关系。

# iphone - 如何从 NSMutableDictionary 中删除字典数组？

> ID：16076913
> 
> 赞同：0
> 
> 时间：2013-04-18T07:25:44.543
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有数组字典（里面还有数组和字典）。

我`UITableViewCellEditingStyleDelete`在我的 UITableView 中添加了，所以我想从字典中删除特定的字典数组。

数据的控制台视图：

```
{
        A =     (
                   {
                    address = "Talala (gir)";
                    "main_id" = 1;
                    mobile = 8878876884;
                    name = "Amit Patel";
                   },
                   {
                    address = "Junagdh";
                    "main_id" = 5;
                    mobile = 4894679865;
                    name = "Arjun Patel";
                   }
                );
            J = (
                    {
                    address = "Taveli";
                    "main_id" = 6;
                    mobile = 87886356085878;
                    name = "Jasmin Patel";
                    },
                    {
                    address = "Gujarat";
                    "main_id" = 4;
                    mobile = 6636633368;
                    name = "Jatin ";
                   }
               );
            R =     (
                        {
                    address = "Mumbai";
                    "main_id" = 2;
                    mobile = 999686322;
                    name = "Rajan Patel";
                }
            );
            S =     (
                        {
                    address = "Rajkot";
                    "main_id" = 3;
                    mobile = 8866086549;
                    name = "Sumit Patel";
                }
            );
        } 
```

我想删除例如：数组的索引来自带有键**A**`1`的字典

 **我必须尝试使用​​以下代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {

        NSDictionary *dic = [[self.finalPDic objectForKey:[self.listOfHeader objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

        NSLog(@"%@",dic);

        [self.finalPDic removeObjectForKey:dic];

        NSLog(@"%@",self.finalPDic);

        [self.tblView reloadData];
    }
    if (editingStyle == UITableViewCellEditingStyleInsert)
    {
    }
} 
```

但我无法从 main 中删除任何记录`NSMutableDictionary`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:46:25.423

尝试这个

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        NSString *key = self.listOfHeader[indexPath.section];

        NSMutableArray *users = [self.finalPDic[key] mutableCopy];

        [users removeObjectAtIndex:indexPath.row];
        if (users){
          self.finalDic[key] = users;
        }else{
        [self.finalDic removeObjectForKey:key];
        }
        [self.tblView reloadRowsAtIndexPaths:@[indexPath]
                                withRowAnimation:UITableViewRowAnimationAutomatic];
    }
    if (editingStyle == UITableViewCellEditingStyleInsert){
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:34:00.640

首先确保数据结构的每个组件都是可变的（即基本字典、内部数组，不是强制性的，但数组内部的字典也是如此）。

然后最后`commitEditingStyle`用这个替换你的方法。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath  {
    if (editingStyle == UITableViewCellEditingStyleDelete) {            
        [[self.finalPDic objectForKey:[self.listOfHeader objectAtIndex:indexPath.section]] removeObjectAtIndex:indexPath.row];
        [tableView reloadData];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:38:44.327

```
NSMutableArray * dictArray = [self.finalPDic objectForKey:indexPath.section];  
[dictArray removeObjectAtIndex:indexPath.row]; 
```

这假设 finalPDict 带有您在问题中显示 NSLog 输出的那个。indexPath.section 可能评估为“A”，indexPath.row 可能评估为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:43:20.950

当您使用字典的字典和字典数组的值时，何时以及如何从主字典中删除单个（或多个）值可能会变得非常混乱。诀窍是查看每个对象与主字典分离，并将该值作为新数组或字典威胁。

以下是您应该做的： 为方便起见，我假设您的字典看起来像您在问题中给出的示例。

```
NSDictionary *maindict = //get your maindict here

NSArray *arr = [maindict valueForKey:someKey]; //in your example the values of your maindict is always an array.

//the array is filled with more dictionaries, apparantly objects that seem like contact details
//if you want to find a single item that is in this array you should loop over the array here.

for(NSDictionary *dict in arr)
{
    if(/*retrieve a value from the dict that you want to compare with a preset value before this function*/)
    {
        //remove the dict from the array here (or save it for after the loop so that you wont get the error that you try to mutate the array while running it)
    }

}

//now that the dict/record/contact is deleted from your array you should set it back at the same place in the maindict.
[maindict setValue:arr /*this arr is the arr with the removed record*/ forKey:someKey]; //someKey is the same key as you used earlier

//you are finished now! the maindict is updated with the removed value. the only thing left is updating your tableview so that the record is also removed visibly
[yourtableview reloadData]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T08:14:43.897

按照步骤。取一个 MutableArray 并从字典中复制整个数组。

```
NSMutableArray *tempArray = [NSMutableArray arrayWithArray:[self.finalPDic objectForKey:  [self.listOfHeader objectAtIndex:indexPath.section]]]; 
```

现在从键的字典中删除整个对象（将键存储在某处`NSString *key = [self.listOfHeader objectAtIndex:indexPath.section]`）

```
 [self.finalPDic  removeObjectForKey:[self.listOfHeader objectAtIndex:indexPath.section]]; 
```

从 tempArray 根据 indexPath.row 删除你想要的字典

```
 [tempArray removeObjectAtIndex:objectAtIndex:indexPath.row]; 
```

使用保存的键将 tempArray 添加到 mainDict

```
 [self.finalPDic  setObject:tempArray forKey:key];//ie saved key. 
```

希望这会有所帮助，我试过了。**

# camera - 为什么当camare靠近时粒子会向后移动？

> ID：16076923
> 
> 赞同：1
> 
> 时间：2013-04-18T07:26:13.563
> 
> 标签：camera, three.js, particle-system

我有一个粒子系统（THREE.JS），当相机靠近它们时，大小设置为 40，它们会向后移动直到它们消失，这是正常的，我该如何改变它？我希望他们保持静止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:33:45.697

在这种情况下，这是因为`TrackballControls`使相机始终注视着中心。因此，如果您放大太多，您最终会将相机放在中心后面，但仍会看着中心。

# mysql - 使用 max 函数，分组和加入

> ID：16076931
> 
> 赞同：1
> 
> 时间：2013-04-18T07:26:41.327
> 
> 标签：mysql, sql

我有 3 张桌子：

```
CREATE TABLE IF NOT EXISTS `disksinfo` (
  `idx` int(10) NOT NULL AUTO_INCREMENT,
  `hostinfo_idx` int(10) DEFAULT NULL,
  `id` char(30) DEFAULT NULL,
  `name` char(30) DEFAULT NULL,
  `size` bigint(20) DEFAULT NULL,
  `freespace` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`idx`)
)

CREATE TABLE IF NOT EXISTS `hostinfo` (
  `idx` int(10) NOT NULL AUTO_INCREMENT,
  `host_idx` int(11) DEFAULT NULL,
  `probetime` datetime DEFAULT NULL,
  `processor_load` tinyint(4) DEFAULT NULL,
  `memory_total` bigint(20) DEFAULT NULL,
  `memory_free` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`idx`)
)

CREATE TABLE IF NOT EXISTS `hosts` (
  `idx` int(10) NOT NULL AUTO_INCREMENT,
  `name` char(30) DEFAULT '0',
  PRIMARY KEY (`idx`)
) 
```

基本上，hosts 只是在 hostinfo 表中使用的固定主机名列表（hostinfo.host_idx = hosts.idx） hostinfo 是一个表，每隔几分钟就会用来自所有主机的数据填充一次，此外，对于每个 hostinfo 行，至少有一个 diskinfo 行被建造。每个磁盘信息行包含至少一个磁盘的信息（因此，对于某些主机，磁盘信息有 3-4 行）。磁盘信息.hostinfo_idx = 主机信息.idx。hostinfo.probetime 只是创建数据快照的时间。

我现在要执行的是为每个特定的不同主机（hostinfo.host_idx）选择最后一个主机信息（.probetime），同时加入有关磁盘（diskinfo 表）和主机名（主机表）的信息

我带来了这个：

```
SELECT hinfo.idx,
       hinfo.host_idx,
       hinfo.processor_load,
       hinfo.memory_total,
       hinfo.memory_free,
       hnames.idx,
       hnames.name,
       disks.hostinfo_idx,
       disks.id,
       disks.name,
       disks.size,
       disks.freespace,
       Max(hinfo.probetime)
FROM   systeminfo.hostinfo AS hinfo
       INNER JOIN systeminfo.hosts AS hnames
               ON hnames.idx = hinfo.host_idx
       INNER JOIN systeminfo.disksinfo AS disks
               ON disks.hostinfo_idx = hinfo.idx
GROUP  BY disks.id,
          hnames.name
ORDER  BY hnames.name,
          disks.id 
```

它似乎工作！但是，它是 100% 正确的吗？是最优的吗？感谢您的提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:18:43.213

这不是100％正确，不。

假设你有这张表：

```
x   |   y   |   z
-----------------
a       b       1
a       c       2
d       e       1
d       f       2 
```

现在，当您仅按 x 分组时，行正在折叠，MySQL 从折叠的行中随机选择一行。所以你可能会得到

```
x   |   y   |   z
-----------------
a       b       2
d       e       2 
```

或这个

```
x   |   y   |   z
-----------------
a       c       2
d       f       2 
```

还是另一种组合，这个没有确定。每次触发查询时，您可能会得到不同的结果。由于该功能， `2`in 列`z`始终存在，`MAX()`但您不一定会获得相应的行。

其他 RDBMS 实际上也会这样做，但大多数默认情况下都禁止这样做（在 MySQL 中也可以禁止）。你有两种可能来解决这个问题（实际上还有更多，但我会限制为两种）。

您可以将`SELECT`子句中所有未在聚合函数中使用的列`SUM()`或`MAX()`其他任何内容也放入`GROUP BY`子句中，如下所示：

```
SELECT hinfo.idx,
       hinfo.host_idx,
       hinfo.processor_load,
       hinfo.memory_total,
       hinfo.memory_free,
       hnames.idx,
       hnames.name,
       disks.hostinfo_idx,
       disks.id,
       disks.name,
       disks.size,
       disks.freespace,
       Max(hinfo.probetime)
FROM   systeminfo.hostinfo AS hinfo
       INNER JOIN systeminfo.hosts AS hnames
               ON hnames.idx = hinfo.host_idx
       INNER JOIN systeminfo.disksinfo AS disks
               ON disks.hostinfo_idx = hinfo.idx
GROUP  BY 
       hinfo.idx,
       hinfo.host_idx,
       hinfo.processor_load,
       hinfo.memory_total,
       hinfo.memory_free,
       hnames.idx,
       hnames.name,
       disks.hostinfo_idx,
       disks.id,
       disks.name,
       disks.size,
       disks.freespace
ORDER  BY hnames.name,
          disks.id 
```

**请注意，此查询可能会给您带来不同的结果！**我只是关注这个问题，你可能会在你认为包含`MAX(hinfo.probetime)`.

或者你像这样解决它（这会让你得到你想要的）：

```
SELECT hinfo.idx,
       hinfo.host_idx,
       hinfo.processor_load,
       hinfo.memory_total,
       hinfo.memory_free,
       hnames.idx,
       hnames.name,
       disks.hostinfo_idx,
       disks.id,
       disks.name,
       disks.size,
       disks.freespace,
       hinfo.probetime
FROM   systeminfo.hostinfo AS hinfo
       INNER JOIN systeminfo.hosts AS hnames
               ON hnames.idx = hinfo.host_idx
       INNER JOIN systeminfo.disksinfo AS disks
               ON disks.hostinfo_idx = hinfo.idx
WHERE  hinfo.probetime = (SELECT MAX(probetime) FROM systeminfo.hostinfo AS hi
                                                INNER JOIN systeminfo.hosts AS hn
                                                ON hnames.idx = hinfo.host_idx
                                                INNER JOIN systeminfo.disksinfo AS d
                                                ON disks.hostinfo_idx = hinfo.idx
                          WHERE d.id = disks.id AND hn.name = hnames.name)
GROUP  BY disks.id,
          hnames.name
ORDER  BY hnames.name,
          disks.id 
```

手册中还有一个很好的例子：[The Rows Hold the Group-wise Maximum of a certain Column](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)

# java - WebSphere 中的 JMS、MQ 异常

> ID：16076932
> 
> 赞同：0
> 
> 时间：2013-04-18T07:26:45.780
> 
> 标签：java, jms, websphere, ejb-3.1

当我尝试通过 MDB 从 WebSphere MQ 读取消息时，我遇到了这个异常，谁能指导我。当我在我的 WebSphere 上部署 EAR 文件时，它可以完美地工作，但是我在不同的 WebSphere 上遇到了异常。我是否在配置中遗漏了某些内容，为什么会发生此异常？

```
javax.ejb.EJBException: Injection failure; nested exception is: java.lang.IllegalArgumentException: Can not set javax.jms.ConnectionFactory field com.ultramatics.hawkeye.mdb.listener.HawkeyeMdbListener.replyCF to com.ibm.mq.jms.MQQueue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:37:49.317

您显然正在尝试使用 MQQueue 对象（两种不同类型）分配 ConnectionFactory 字段。

我猜你是从 JNDI 或类似工具中获取它们的，并且配置中可能存在一些命名混乱？

# ios - 查询不工作？

> ID：16076936
> 
> 赞同：0
> 
> 时间：2013-04-18T07:26:54.960
> 
> 标签：ios, ipad, sqlite

在我的应用程序中，我使用 sqlite 作为后备存储。为了我的使用，我为 Surgeon 和 Schedule 创建了两个表，其中外科医生的列 Name(VARCHAR)、id(int) 和 Schedule 具有 id(int)、Surgeon(int)、Values( VARCHAR）。

Schedule 表中的 Surgeon 列指向 Surgeon 表中的 id 列。我使用以下查询从日程表中为 id=1 的外科医生选择值

```
SELECT Schedule.Values,Name from Schedule,Surgeon where Schedule.Surgeon==Surgeon.id and Surgeon.id=2 
```

但我得到如下错误

```
SQLiteManager: Likely SQL syntax error: SELECT Schedule.Values,Name from Schedule,Surgeon where Schedule.Surgeon==Surgeon.id and Surgeon.id=2 [ near "Values": syntax error ] 
```

我不知道哪里出错了，我以前没有使用过数据库，如果问题很基本，请原谅我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:28:00.967

您已将其中的一列命名为将`Schedule`  其`values`更改为不是 sqlite 的关键字的其他内容。您不应该使用键字符串来命名列首先您必须查看 sqlite 中的键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:32:17.747

如果你想取名字，那么试试 Surgeon.Name

# xml - 使用 xml magento 将链接添加到顶部菜单

> ID：16076937
> 
> 赞同：0
> 
> 时间：2013-04-18T07:26:58.727
> 
> 标签：xml, magento-1.7

我尝试使用 xml 将我的自定义链接添加到顶部菜单，但它不起作用。我以前使用过这段代码并且工作正常，但现在我坚持使用它。我的 xml 代码是：

```
<default>
          <reference name="top.links">           
            <block type="articles/links" name="articles"/>
           <action method="addLinkBlock" ><blockName>articles</blockName></action>
        </reference> 
                <reference name="footer_links">
                     <block type="articles/links" name="articles"/>
            <action method="addLinkBlock"><blockName>articles</blockName></action>
                </reference>

    </default> 
```

我的块代码是：

```
class My_Articles_Block_Links extends Mage_Core_Block_Template
{
    protected function _toHtml()
    {
        $html ='';      

        if(Mage::helper('articles')->getArticlesEnable()){

        if(in_array(Mage::app()->getStore()->getStoreId(),Mage::helper('articles')->getscopeid())){

                $html.= '<li><a  href="'.Mage::helper('articles')->getUrl().'">Articles</a></li>';    
                return $html;
            }
        }

        return $html;
    }

}. 
```

块代码很好并且经过测试。xml 代码仅存在问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:21:55.760

由于您有操作标签，它会检查来自的功能`addActionLayoutHandles()`

所以，而不是`_toHtml()` 简单地添加一个函数

`function addLinkBlock(){ $parentBlock = $this->getParentBlock(); $parentBlock->addLink('whatever link you want to add'); }`

# regex - 如何使用正则表达式删除垃圾字符？

> ID：16076943
> 
> 赞同：0
> 
> 时间：2013-04-18T07:27:21.743
> 
> 标签：regex

我有一个 Web 应用程序，它读取网页内容并使用 NLP 算法解析句子。我一直在使用正则表达式将内容拆分为单个句子，然后解析它们。

我想`Â`从我的句子中删除类似的字符。我想，这些字符是因为 HTML 编码。

我显然不能使用正则表达式`[^\w\d]+`或它的变体，因为我需要完整的标点符号。当然，我可以为每个标点符号添加单独的例外，`[^\w\d\.,:]+`等等，但如果有更简单的方法可以做到这一点，我希望它，比如可能知道它是一个......有趣的角色的角色类？

任何帮助都感激不尽。谢谢。

编辑：该应用程序是用 PHP 构建的，我使用简单`file_get_contents()`的方法从站点获取 HTML 数据并读取`<p>`标签内的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:25:26.137

@TheGreatCO 在评论中提到了这一点，但您可以创建一个“特殊”字符的字符类。您可以使用十六进制代码值在字符类中创建范围。所以对于任何超过 ASCII 127 的特殊字符都是这样。

```
[\x80-\xFE] 
```

那将匹配除您最基本的角色之外的任何内容。作为参考，[这里是 ASCII 字符表及其十六进制代码的列表](http://www.asciitable.com/)。

[本页讨论了在正则表达式中引用特殊字符的不同方式。](http://www.regular-expressions.info/nonprint.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-24T09:22:24.617

我发现这个正则表达式有助于使用 atom 识别文件中的垃圾字符

[^(\x20-\x7F\p{Sc})]

# matlab - 从两个角点生成矩形坐标的巧妙方法？

> ID：16076945
> 
> 赞同：0
> 
> 时间：2013-04-18T07:27:33.823
> 
> 标签：matlab, geometry

我正在从四个坐标在 Matlab 中绘制一个框。有没有比明确写出更简洁的方法来生成这些向量？

```
plot( ...
    [x_min x_max; x_min x_max; x_min x_min; x_max x_max], ...
    [y_min y_min; y_max y_max; y_min y_max; y_min y_max], ...
    '-r' ); 
```

在我的例子中，变量被称为`lat_min`and `ax_min`，这意味着上面的行不适合 80 个字符。我真的很喜欢，因为我要打印代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:57:37.257

如何使用[`rectangle`](http://www.mathworks.com/help/matlab/ref/rectangle.html)：

```
pos = [ax_min, lat_min, ax_max - ax_min, lat_max - lat_min];
rectangle('Position', pos, 'EdgeColor', 'r') 
```

# smtp - 如何在我的系统中配置我自己的 SMTP 服务器？

> ID：16076946
> 
> 赞同：7
> 
> 时间：2013-04-18T07:27:38.713
> 
> 标签：smtp

我可以在我的系统中配置我自己的 SMTP 服务器。我的系统中也有互联网连接。我的任务是创建自己的 SMTP 服务器，并且我已经在客户端（如雷鸟等）中配置了这些 SMTP 详细信息，它是否应该能够向在 gmail、yahoo 等中拥有帐户的用户发送邮件。例如，如果我创建一个域名www.mycompany.com 在我的 SMTP 中，如果我将用户名创建为 john，我需要能够将邮件从 john@mycompany.com 发送给任何 gmail、yahoo 用户。我也需要接收电子邮件，反之亦然。程序是什么？

# php - MYSQL - 选择历史最高分

> ID：16076949
> 
> 赞同：1
> 
> 时间：2013-04-18T07:27:43.347
> 
> 标签：php, mysql, group-by, max

假设我们有一个如下表

```
 id   |   name   |  userid  |  score  |      datestamp      |
   ------------------------------------------------------------
    1   |   john   |    1     |   44    |  2013-06-10 14:25:55 
    2   |   mary   |    2     |   59    |  2013-06-10 09:25:51 
    3   |   john   |    1     |   38    |  2013-06-10 21:25:15 
    4   |   elvis  |    3     |   19    |  2013-06-10 07:25:18
    5   |   john   |    1     |   100   |  2013-06-14 07:25:18 
```

我想选择每个用户的历史最高分。

例如，如果玩家 john 在 2013 年 6 月 10 日打了 10 轮，那一天他的总分是 430。而在2013-06-14，他打了16轮，当天总分1220。我想为其他玩家显示用户 john 的最佳分数，依此类推。在上面的示例中，john 的最佳成绩是 2013-06-14，得分为 1220。

详细示例：如果用户 John 在 2013 年 6 月 10 日打了 3 局。第一轮44杆，第二轮38杆，第三轮55杆，当天总成绩137，第二天2013-06-11打了5轮，总成绩220。例如，他迄今为止的最佳总分是 220。所以它应该将每天的所有分数组合成一个总分。然后将此总数与其他天总数进行比较，并显示该用户的最高总数

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:58:50.487

这应该可以解决问题：

```
SELECT userId, name, MAX(score) as highScore
FROM (
    SELECT userID, name, SUM(score) as score, date(datestamp) as scoreDate
    FROM TableName
    GROUP BY userID, scoreDate
  ) dailyScores
GROUP BY userId 
```

内部查询获取每个用户在每个日期的总分（时间戳转换为日期以删除时间信息），外部查询然后获取每个用户每个日期的最高总分。

我冒昧地基于 J W 的小提琴，并在您的示例数据中添加了另一行，因此功能很明显，请在此处尝试： [http ://www.sqlfiddle.com/#!2/f6bea/3](http://www.sqlfiddle.com/#!2/f6bea/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:29:50.860

```
SELECT  a.*
FROM    Tablename a
        INNER JOIN
        (
            SELECT  userID, MAX(score) max_Score
            FROM    TableName
            GROUP   BY userID
        ) b ON a.userID = b.userID AND
                a.score = b.max_Score 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6a7d2/2)

为了更快地搜索，您需要在`(userid, score)`. 以下是如何实现它：

```
ALTER TABLE TableName ADD INDEX (userid, score) 
```

# search - jqGrid filtertoolbar在网格调整大小后没有触发

> ID：16076951
> 
> 赞同：0
> 
> 时间：2013-04-18T07:27:56.230
> 
> 标签：search, jqgrid, filter, height

我将子网格的行号固定为 10，但如果记录小于 10，我想将高度子网格调整为“自动”或“100%”。

所以这是我的这个子网格的代码：

```
//  SUBGRID FOURTH LEVEL
var subgrid_table_id = subgrid_id+"_d",
    pager_id = "p_"+subgrid_table_id; 
$("#"+subgrid_id).append("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
$("#"+subgrid_table_id).jqGrid({ 
    url:"sg31b.php?id="+row_id+"&clt="+clt, 
    datatype: "json", 
    idPrefix:"sgd_",
    colNames: ['Id','Article','Désignation','Marque','Equivalence'],
    colModel: [ 
        {name:'e.id',index:'e.id',hidden:true}, 
        {name:'a.code',index:'a.code', width:100}, 
        {name:'a.descr',index:'a.descr', width:450}, 
        {name:'k.code',index:'k.code', width:80}, 
        {name:'e.equiv',index:'e.equiv',width:100}
    ], 
    pager: pager_id, 
    sortname: 'a.code', 
    hiddengrid:true,
    scroll:true,
    height:230,
    rowNum:10,
    autowidth:true,
    caption:'4 - EQUIVALENCE ARTICLES',
    gridComplete:function(){
        sortDataCol(this);
        if($("#"+subgrid_id+"_d").jqGrid('getGridParam','records') < $("#"+subgrid_id+"_d").jqGrid('getGridParam','rowNum')){
            $("#"+subgrid_id+"_d").jqGrid('setGridHeight','100%');
        }else{
            $("#"+subgrid_id+"_d").jqGrid('setGridParam',[{npage:1}]).jqGrid('setGridHeight',230);
        }
    }
}); 
$("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{search:false,add:false,edit:false,del:false});
$("#"+subgrid_table_id).jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
fullInputCss(); 
```

以及少于 10 个过滤行的结果快照： ![在此处输入图像描述](https://i.stack.imgur.com/ffqGO.png)

现在，如果我在搜索字段中按 Backspace 以获得更多行，似乎搜索不会触发，因为 Firebug 没有显示任何请求跟踪： ![在此处输入图像描述](https://i.stack.imgur.com/3Ivf2.png)

如果我在 gridcomplete 中删除添加的“setGridHeight”行，一切正常！我认为我在编码和理解 jqGrid 的运行方式方面又犯了一次错误。请问有人可以给我一些解决这个问题的方法吗？提前谢谢了。祝你今天过得愉快。继和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:38:54.493

我想问题的根源可能是您页面上的**id 重复。**刚才我在另一个你的问题上写[了答案，我详细描述了这个问题。](https://stackoverflow.com/a/16077909/315935)

jqGrid（4.4.5 版）的当前实现在基于以下规则的过滤器工具栏的输入字段的`filterToolbar`构造代码中存在问题：`id`

id="gs_" + cm.name

（见代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.custom.js#L418)）。这意味着该列的输入字段的 id`a.code`将`gs_a.code` **适用于您使用的每个子网格**。所以你可以有 id 重复。

所以我建议你重新设计代码中的命名概念。您可以使用例如

```
name: row_id + "a_code", index: "a.code" 
```

在网格排序期间仍会发送值 like 的方式`"a.code"`，但您将没有 id 重复项。在某些情况下（您是否使用`repeatitems: false`in `jsonReader`）您可能需要使用附加`jsonmap`属性，但在当前代码中不需要它。

# c - 加快从 c 中读取文本文件的可能替代方法？

> ID：16076952
> 
> 赞同：1
> 
> 时间：2013-04-18T07:27:56.613
> 
> 标签：c, file-io, io

我正在开发一个机器学习应用程序，我的特征存储在巨大的文本文件中。目前我实现数据输入读取的方式，这是一种缓慢实用的方式。基本上，文本文件的每一行都代表一个稀疏格式的特征向量。例如，以下示例包含三个`index:value`时尚特征。

```
1:0.34 2:0.67 6:0.99 12:2.1 28:2.1
2:0.12 22:0.27 26:9.8 69:1.8
3:0.24 4:67.0 7:1.9 13:8.1 18:1.7 32:3.4 
```

以下是我现在的阅读方式。由于我事先不知道特征字符串的长度，所以我只是读取了一个适当大的长度，它限制了每个字符串的长度。有一次，我从文件中读取了该行，我只是使用该`strtok_r`函数将字符串拆分为键值对，然后进一步处理它以存储为稀疏数组。任何关于如何加快速度的想法都受到高度赞赏。

```
FILE *fp = fopen(feature_file, "r");

int fvec_length = 0;
char line[1000000];
size_t ln;
char *pair, *single, *brkt, *brkb;

SVECTOR **fvecs = (SVECTOR **)malloc(n_fvecs*sizeof(SVECTOR *));
if(!fvecs) die("Memory Error.");

int j = 0;

while( fgets(line,1000000,fp) ) {
    ln = strlen(line) - 1;
    if (line[ln] == '\n')
        line[ln] = '\0';

    fvec_length = 0;
    for(pair = strtok_r(line, " ", &brkt); pair; pair = strtok_r(NULL, " ", &brkt)){
        fvec_length++;
        words = (WORD *) realloc(words, fvec_length*sizeof(WORD));
        if(!words) die("Memory error.");
        j = 0;
        for (single = strtok_r(pair, ":", &brkb); single; single = strtok_r(NULL, ":", &brkb)){
            if(j == 0){
                words[fvec_length-1].wnum = atoi(single);
            }
            else{
                words[fvec_length-1].weight = atof(single); 
            }
            j++;
        }
    }   
    fvec_length++; 
    words = (WORD *) realloc(words, fvec_length*sizeof(WORD));
    if(!words) die("Memory error.");
    words[fvec_length-1].wnum = 0;
    words[fvec_length-1].weight = 0.0;

    fvecs[i] = create_svector(words,"",1);
    free(words);
    words = NULL;
}
fclose(fp);
return fvecs; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:43:53.723

1.  您绝对应该减少内存分配的数量。经典的方法是在每次分配时将向量加倍，以便获得对数的分配调用次数，而不是线性的。

2.  由于您的行模式似乎是恒定的，因此无需手动对其进行标记，`sscanf()`在每个加载的行上使用一个来直接扫描该行的单词。

3.  您的行缓冲区似乎非常大，这可能会导致堆栈爆炸，使缓存局部性变差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:00:58.670

可能当您调用 realloc 时，您正在执行系统调用。系统调用是一项昂贵的操作，涉及上下文交换和从用户空间到内核空间的切换，反之亦然。

似乎您正在为您获得的每一对令牌进行 realloc 调用。这是很多电话。您不关心之前将 1MByte 分配给文件指向的缓冲区。为什么你对 word 指向的缓冲区如此保守？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:18:45.903

我发现在 Linux（Fedora）上 realloc() 非常有效，并且不会减慢速度，尤其是。在 Windows 上，由于内存的结构，它可能是灾难性的。

我对“长度未知的行”问题的解决方案是编写一个函数，该函数多次调用 fgets()，将结果连接起来，直到检测到换行符。该函数接受 &maxlinelength 作为参数，如果任何对 fgets() 的调用会导致连接的字符串超过 maxlinelength，则调整 maxlinelength。这样，新内存只会在找到最长的行之前重新分配。同样，如果 maxlinelength 已调整，您只需要为 WORD 重新分配（）

# java - 针对多个浏览器运行 selenium webdriver 测试用例

> ID：16076971
> 
> 赞同：8
> 
> 时间：2013-04-18T07:29:15.993
> 
> 标签：java, eclipse, ant, selenium-webdriver, junit4

我是硒测试的新手。我想`selenium test cases`在针对 Internet Explorer、Firefox、Opera 和 chrome 的多个浏览器上运行。我必须遵循什么方法。你们能建议我哪个是最好的过程吗？

selenium web 驱动是否支持多种浏览器？？？

我们已经编写了登录脚本。它分别在 Firefox、chrome 和 Internet Explorer 上运行成功。但我想按顺序为这些多个浏览器运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:42:59.107

web驱动当然支持多种浏览器，也有支持手机的

[铬驱动程序](https://code.google.com/p/selenium/wiki/ChromeDriver)

[IE潜水员](https://code.google.com/p/selenium/wiki/InternetExplorerDriver)

[火狐驱动](https://code.google.com/p/selenium/wiki/FirefoxDriver)

[OperaDriver](https://code.google.com/p/selenium/wiki/OperaDriver)

[安卓驱动](https://code.google.com/p/selenium/wiki/AndroidDriver)

这是在多个浏览器中运行相同测试的示例。

```
package ma.glasnost.test;

import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
        .........
DesiredCapabilities[] browserList = {DesiredCapabilities.chrome(),DesiredCapabilities.firefox(),DesiredCapabilities.internetExplorer(), DesiredCapabilities.opera()};
for (DesiredCapabilities browser : browserList)
{
    try {
        System.out.println("Testing in Browser: "+browser.getBrowserName());
        driver = new RemoteWebDriver(new URL("http://127.0.0.1:8080/..."), browser); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:19:27.910

```
import org.junit.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class Sample {
    private WebDriver _driver;

    @Test
    public void IEconfiguration() throws Exception {
        System.setProperty("webdriver.ie.driver",
        "D:/Softwares/Selenium softwares/drivers/IEDriverServer.exe");
        _driver = new InternetExplorerDriver();
        login();
    }

    @Test
    public void FFconfiguration() throws Exception {
        _driver = new FirefoxDriver();
        login();
    }

    @Test
    public void CRconfiguration() throws Exception {
        System.setProperty("webdriver.chrome.driver",
                "D:/Softwares/Selenium softwares/drivers/chromedriver.exe");
        _driver = new ChromeDriver();
        //_driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS);
        login();
    }

    public void login() throws Exception {
        _driver.get("http://www.google.com");
    }       
} 
```

在此之前，我们必须安装 chrome 和 Internet Explorer 驱动程序 .exe 文件并运行它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-05T20:30:47.537

您可以使用[WebDriver Extensions](https://github.com/webdriverextensions/webdriverextensions)框架的 JUnitRunner

这是“Hello World”的示例测试谷歌搜索

```
@RunWith(WebDriverRunner.class)
@Firefox
@Chrome
@InternetExplorer
public class WebDriverExtensionsExampleTest {

    // Model
    @FindBy(name = "q")
    WebElement queryInput;
    @FindBy(name = "btnG")
    WebElement searchButton;
    @FindBy(id = "search")
    WebElement searchResult;

    @Test
    public void searchGoogleForHelloWorldTest() {
        open("http://www.google.com");
        assertCurrentUrlContains("google");

        type("Hello World", queryInput);
        click(searchButton);

        waitFor(3, SECONDS);
        assertTextContains("Hello World", searchResult);
    }
} 
```

只需确保在您的 maven pom.xml 依赖项中添加[WebDriver Extensions框架](https://github.com/webdriverextensions/webdriverextensions)

```
<dependency>
    <groupId>com.github.webdriverextensions</groupId>
    <artifactId>webdriverextensions</artifactId>
    <version>1.2.1</version>
</dependency> 
```

可以使用提供的 Maven 插件下载驱动程序。只需添加

```
<plugin>
    <groupId>com.github.webdriverextensions</groupId>
    <artifactId>webdriverextensions-maven-plugin</artifactId>
    <version>1.0.1</version>
    <executions>
        <execution>
            <goals>
                <goal>install-drivers</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <drivers>
            <driver>
                <name>internetexplorerdriver</name>
                <version>2.44</version>
            </driver>
            <driver>
                <name>chromedriver</name>
                <version>2.12</version>
            </driver>
        </drivers>
    </configuration>
</plugin> 
```

到你的 pom.xml。或者，如果您更喜欢手动下载它们，只需使用

```
@DriverPaths(chrome="path/to/chromedriver", internetExplorer ="path/to/internetexplorerdriver") 
```

指向驱动程序的注释。

请注意，上面的示例使用 WebDriver Extensions [Bot 类](https://github.com/webdriverextensions/webdriverextensions#make-your-test-readable-as-instructions-with-the-bot-pattern)中的静态方法来使测试更具可读性。但是，您并不依赖于使用它们。上面用纯 Selenium WebDriver 重写的测试看起来像这样

```
 @Test
    public void searchGoogleForHelloWorldTest() throws InterruptedException {
        WebDriver driver = WebDriverExtensionsContext.getDriver();

        driver.get("http://www.google.com");
        assert driver.getCurrentUrl().contains("google");

        queryInput.sendKeys("Hello World");
        searchButton.click();

        SECONDS.sleep(3);
        assert searchResult.getText().contains("Hello World");
    } 
```

# javascript - 如何使用jQuery将div设置为另一个div的高度

> ID：16076984
> 
> 赞同：0
> 
> 时间：2013-04-18T07:30:30.890
> 
> 标签：javascript, jquery, jquery-animate

我有一个名为`.A`coded 的 div，因为`height:auto`它具有基于其中包含的文本呈现的高度。我在页面上有另一个 div `.B`，我需要根据第一个 div 的高度使用 jQuery 向下动画，`.A`.

我尝试使用以下 jQuery 函数，但运气不佳。这个想法是让 jQuery 确定高度`.B`然后应用填充到`.B`，但是它没有抓住正确的高度。我也尝试过使用`'marginTop'`

```
jQuery('div.A').animate({'paddingTop': jQuery('div.B').height()},500); 
```

绝望的求助！会用赞成票和慷慨的赞美来支付。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:35:49.670

我认为你需要`.outerHeight(true)`：

```
jQuery('div.A').animate({ paddingTop : jQuery('div.B').outerHeight(true)},500); 
```

### [`.outerHeight()`](http://api.jquery.com/outerHeight/)来自文档的描述

获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。

**笔记：**

> .outerHeight() 计算中始终包含顶部和底部填充和边框；如果 includeMargin 参数设置为 true，则还包括边距（顶部和底部）。

# java - ListView 行按钮：如何创建将 View.OnClickListener 连接到 ListView 每一行上的按钮的自定义适配器？

> ID：16076985
> 
> 赞同：2
> 
> 时间：2013-04-18T07:30:32.390
> 
> 标签：java, android, listview, button, onclick

我希望我的 ListView 包含按钮，但是设置按钮的 xml 属性 onClick="myFunction" 然后在活动中放置一个 public void myFunction(android.view.View view) 方法会导致 NoSuchMethodException （堆栈跟踪为空）被抛出，虽然 onclick 监听器在那里，但它不会触发 myFunction(...) 并导致活动关闭。

如何创建将 View.OnClickListener 连接到 ListView 每一行上的按钮的自定义适配器？

我的 ListView 创建如下...

[activity.java 内容..]

```
public void myFunction(android.view.View view)
{
    //Do stuff
} 
```

[activity.xml 内容..]

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools" xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" tools:context=".FrmCustomerDetails" >
    <ListView android:id="@+id/LstCustomerDetailsList" android:layout_width="fill_parent" android:layout_height="0dip" android:layout_weight="1" android:clickable="true" android:clipChildren="true" android:divider="@null" android:dividerHeight="0dp" android:fastScrollEnabled="true" android:footerDividersEnabled="false" android:headerDividersEnabled="false" android:requiresFadingEdge="vertical" android:smoothScrollbar="true" />
</LinearLayout> 
```

[activity_row_item.xml 内容..]

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/Llt" android:layout_width="match_parent" android:layout_height="match_parent" >
    <Button android:id="@+id/Btn" android:text="Click me" android:onClick="myFunction" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T08:17:51.550

> 以下是如何创建自定义适配器，将 View.OnClickListener 连接到 ListView，每行有一个按钮......

**1.为典型行创建布局**

在这种情况下，该行由三个视图组件组成：

*   名称（编辑文本）
*   值 (EditText:inputType="numberDecimal")
*   删除（按钮）

**xml**

pay_list_item.xml 布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/pay_name"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:hint="Name" />

    <EditText
        android:id="@+id/pay_value"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:inputType="numberDecimal"
        android:text="0.0" />

    <Button
        android:id="@+id/pay_removePay"
        android:layout_width="100dp"
        android:layout_height="fill_parent"
        android:text="Remove Pay"
        android:onClick="removePayOnClickHandler" />

</LinearLayout> 
```

*注意：按钮在 xml 布局文件中定义了 onClick 处理程序，因为我们希望将其操作引用到特定的列表项。*

这样做意味着处理程序将在 Activity 文件中实现，并且每个按钮都将知道它属于哪个列表项。

**2.创建列表项适配器**

这是作为 pay_list_item.xml 控制器的 java 类。

它保留所有视图的引用，并将这些引用放在标签中，扩展 ArrayAdapter 接口。

适配器：

```
public class PayListAdapter extends ArrayAdapter<Payment> {

    private List<Payment> items;
    private int layoutResourceId;
    private Context context;

    public PayListAdapter(Context context, int layoutResourceId, List<Payment> items) {
        super(context, layoutResourceId, items);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        PaymentHolder holder = null;

        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new PaymentHolder();
        holder.Payment = items.get(position);
        holder.removePaymentButton = (ImageButton)row.findViewById(R.id.pay_removePay);
        holder.removePaymentButton.setTag(holder.Payment);

        holder.name = (TextView)row.findViewById(R.id.pay_name);
        holder.value = (TextView)row.findViewById(R.id.pay_value);

        row.setTag(holder);

        setupItem(holder);
        return row;
    }

    private void setupItem(PaymentHolder holder) {
        holder.name.setText(holder.Payment.getName());
        holder.value.setText(String.valueOf(holder.Payment.getValue()));
    }

    public static class PaymentHolder {
        Payment Payment;
        TextView name;
        TextView value;
        ImageButton removePaymentButton;
    }
} 
```

在这里，我们列出了 Payment 类项目。

这里有三个最重要的元素：

*   PayListAdapter 构造函数：设置一些私有字段并调用超类构造函数。它还获取付款对象列表。它的实施是强制性的。
*   PaymentHolder：静态类，包含对我必须在此列表项中设置的所有视图的引用。我还将引用此特定项目的 Payment 对象保留在列表中。我将它设置为 ImageButton 的标签，这将帮助我在列表中找到用户想要删除的付款项目
*   重写的 getView 方法：由超类调用。它的目标是返回单个 List 行。我们创建它的字段并设置它们的值并将它们存储在静态容器中。然后将持有人放在行的标签元素中。请注意，存在性能问题，因为每次显示时都会重新创建该行。我曾经在持有者中添加一些标志，如 isCreated，并在创建行后将其设置为 true。那么您可以添加 if 语句并读取标签的持有者，而不是从头开始创建它。

Payment.java 目前非常简单，它看起来有点像 BasicNameValuePair：

```
public class Payment implements Serializable {
    private String name = "";
    private double value = 0;

    public Payment(String name, double value) {
        this.setName(name);
        this.setValue(value);
    }
...
} 
```

每个未显示的私有字段都有额外的获取和设置。

**3.在activity布局xml文件中添加ListView**

以最简单的形式，将这个视图添加到活动布局中就足够了：

```
<ListView 
    android:id="@+id/EnterPays_PaysList"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</ListView> 
```

**4\. 在 Activity Java 代码中设置此列表视图的适配器**

为了在 ListView 中显示项目，您需要设置它的适配器并将其映射到其他一些支付对象的 ArrayList（因为我在这里扩展了一个 Array 适配器）。下面是负责将适配器绑定到 editPersonData.getPayments() ArrayList 的代码：

```
PayListAdapter adapter = new PayListAdapter(AddNewPerson.this, R.layout.pay_list_item, editPersonData.getPayments());
ListView PaysListView = (ListView)findViewById(R.id.EnterPays_PaysList);
PaysListView.setAdapter(adapter); 
```

**5\. 向 ListView（及其适配器）添加/删除项目**

Adapter 的处理方式与任何其他 ArrayList 一样，因此向其添加新元素非常简单：

```
Payment testPayment = new Payment("Test", 13);
adapter.add(testPayment);
adapter.remove(testPayment); 
```

**6.处理Remove Payment按钮点击事件**

在显示 ListView 的活动代码中，添加将处理删除按钮单击操作的公共方法。方法名称必须与 pay_list_item.xml 中的名称完全相同：

```
android:onClick="removePayOnClickHandler"
The method body is as follows:

public void removePayOnClickHandler(View v) {
    Payment itemToRemove = (Payment)v.getTag();
    adapter.remove(itemToRemove);
} 
```

Payment 对象存储在 ImageButton 的 Tag 元素中。现在从 Tag 中读取它就足够了，并从适配器中删除该项目。

**7.合并删除确认对话框窗口**

可能您还需要通过在确认对话框中向他询问其他问题来确保用户故意按下删除按钮。

**对话**

a) 创建对话框的 id 常量

这只是对话框的 ID。它在当前活动处理的任何其他对话框窗口中应该是唯一的。我是这样设置的：

```
protected static final int DIALOG_REMOVE_CALC = 1;
protected static final int DIALOG_REMOVE_PERSON = 2; 
```

b) 构建对话框

我使用这种方法来构建对话窗口：

```
private Dialog createDialogRemoveConfirm(final int dialogRemove) {
    return new AlertDialog.Builder(getApplicationContext())
    .setIcon(R.drawable.trashbin_icon)
    .setTitle(R.string.calculation_dialog_remove_text)
    .setPositiveButton(R.string.calculation_dialog_button_ok, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            handleRemoveConfirm(dialogRemove);
        }
    })
    .setNegativeButton(R.string.calculation_dialog_button_cancel, null)
    .create();
} 
```

这里使用了 AlertDialog 构建器模式。我不处理 NegativeButton 点击​​动作——默认情况下对话框只是被隐藏。如果单击对话框的确认按钮，则会调用我的 handleRemoveConfirm 回调并根据对话框的 ID 执行操作：

```
protected void handleRemoveConfirm(int dialogType) {
    if(dialogType == DIALOG_REMOVE_PERSON){
        calc.removePerson();
    }else if(dialogType == DIALOG_REMOVE_CALC){
        removeCalc();
    }
} 
```

c) 显示对话框

单击删除按钮后，我会显示对话框。showDialog(int) 是 Android 的 Activity 方法：

```
OnClickListener removeCalcButtonClickListener = new OnClickListener() {
    public void onClick(View v) {
        showDialog(DIALOG_REMOVE_CALC);
    }
}; 
```

showDialog(int) 方法调用 onCreateDialog（也在 Activity 的类中定义）。覆盖它并告诉您的应用程序在请求 showDialog 时该怎么做：

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_REMOVE_CALC:
        return createDialogRemoveConfirm(DIALOG_REMOVE_CALC);
    case DIALOG_REMOVE_PERSON:
        return createDialogRemoveConfirm(DIALOG_REMOVE_PERSON);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:32:52.727

看看我就这个问题写的这篇博文：

[创建自定义 ArrayAdapter](https://blog-emildesign.rhcloud.com/?p=495)

有一些注释解释了我在适配器中所做的每一个动作。这是简短的解释：

因此，例如，让我们在您要放置 a 的地方取一行，`CheckBox`而`ImageView` 所有`TextView`这些都是可点击的。这意味着您可以单击它自己的行以转到另一个`Actvity`以获取有关该行的更多详细信息，检查其检查`k`框或按`ImageView`执行另一个操作。

所以你应该做的是：

**1.**首先为您的行创建一个`XML layout`文件：`ListView`

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
<CheckBox
    android:id="@+id/cbCheckListItem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp" />
<TextView
    android:id="@+id/tvItemTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="item string" />
<ImageView
    android:id="@+id/iStatus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:contentDescription="@drawable/ic_launcher"
    android:src="@drawable/ic_launcher" /> 
  </LinearLayout> 
```

**2.**第二个在你的java代码中定义a `ViewHolder`，a`ViewHolder` 旨在保存行视图，这样操作更快：

```
static class ViewHolder 
{
TextView title;
CheckBox checked;
ImageView changeRowStatus;
} 
```

**3.**现在我们必须定义`CustomArrayAdapter`，使用数组适配器，我们可以根据该行的内容或其位置精确地定义每行所需的输出。我们可以通过重写 getView 方法来做到这一点：

```
private class CustomArrayAdapter extends ArrayAdapter<RowData>
{   
private ArrayList<RowData> list;

//this custom adapter receives an ArrayList of RowData objects.
//RowData is my class that represents the data for a single row and could be anything.
public CustomArrayAdapter(Context context, int textViewResourceId, ArrayList<RowData> rowDataList) 
{
    //populate the local list with data.
    super(context, textViewResourceId, rowDataList);
    this.list = new ArrayList<RowData>();
    this.list.addAll(rowDataList);
}

public View getView(final int position, View convertView, ViewGroup parent)
{
    //creating the ViewHolder we defined earlier.
    ViewHolder holder = new ViewHolder();) 

    //creating LayoutInflator for inflating the row layout.
    LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //inflating the row layout we defined earlier.
    convertView = inflator.inflate(R.layout.row_item_layout, null);

    //setting the views into the ViewHolder.
    holder.title = (TextView) convertView.findViewById(R.id.tvItemTitle);
    holder.changeRowStatus = (ImageView) convertView.findViewById(R.id.iStatus);
    holder.changeRowStatus.setTag(position);

    //define an onClickListener for the ImageView.
    holder.changeRowStatus.setOnClickListener(new OnClickListener() 
    {           
        @Override
        public void onClick(View v) 
        {
            Toast.makeText(activity, "Image from row " + position + " was pressed", Toast.LENGTH_LONG).show();
        }
    });
    holder.checked = (CheckBox) convertView.findViewById(R.id.cbCheckListItem);
    holder.checked.setTag(position);

    //define an onClickListener for the CheckBox.
    holder.checked.setOnClickListener(new OnClickListener() 
    {       
        @Override
        public void onClick(View v)
        {
            //assign check-box state to the corresponding object in list.    
            CheckBox checkbox = (CheckBox) v;
            rowDataList.get(position).setChecked(checkbox.isChecked());
            Toast.makeText(activity, "CheckBox from row " + position + " was checked", Toast.LENGTH_LONG).show();    
        }
    });

    //setting data into the the ViewHolder.
    holder.title.setText(RowData.getName());
    holder.checked.setChecked(RowData.isChecked());

    //return the row view.
    return convertView;
}
} 
```

**4.**现在你需要设置这个适配器，作为你的适配器`ListView`。这`ListView`可以在 java 中创建或使用 XML 文件创建，在这种情况下，我使用的是在 XML 文件中使用“列表”ID 定义的列表：

```
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_layout); 
ListView list = (ListView)findViewById(R.id.list);
CustomArrayAdapter dataAdapter = new CustomArrayAdapter(this, R.id.tvItemTitle, rowDataList);
list.setAdapter(dataAdapter);
} 
```

**5.**最后，如果我们希望能够按下它自己的行，而不仅仅是其中的某个视图，我们应该将 an 分配`onItemClickListener`给`ListView`：

```
list.setOnItemClickListener(new OnItemClickListener() 
{
public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
{
    Toast.makeText(activity, "row " + position + " was pressed", Toast.LENGTH_LONG).show();
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:34:45.550

首先，不推荐使用 onClick="function" 在 xml 中添加侦听器的方式。您需要一个 ViewHolder 类来将 xml 中的按钮链接到您的 java 代码。然后你可以为此实现 onClickListener 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:47:32.183

在 CustomAdapter 的 getView() 实现中，您可以尝试如下所示。

```
 public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.xxxxx, null);
            holder = new ViewHolder();
            holder.invite = (Button) convertView.findViewById(R.id.button);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        final int pos = position;
        holder.button.setOnClickListener(new View.OnClickListener() {
                @Override
        public void onClick(View v) {
            handleClick(pos);   
            }
        });
 }

    class ViewHolder {
        Button button;
    } 
```

# mysql - 以更快的方式从表中删除重复的行

> ID：16076988
> 
> 赞同：0
> 
> 时间：2013-04-18T07:30:39.353
> 
> 标签：mysql

从大表（500000+ 行）中删除重复行的最佳方法是什么。
我有一个运行良好的代码，但速度不够快。
这是一个代码。

```
DELETE foo
FROM foo
  INNER JOIN (SELECT
        link,
        MIN(id) AS MinId
          FROM foo
          GROUP BY link) b
    ON foo.link = b.link
      AND foo.id != b.MinId 
```

请告诉我比这段代码更快的任何其他方式。
谢谢.......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:35:57.130

我会试试这个：

```
DELETE foo1
FROM foo foo1 INNER JOIN foo foo2
     ON foo1.link = foo2.link AND foo1.id>foo2.id 
```

这将只保留具有最小 id 的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:47:33.203

从 [table] 中删除 rowid 不在（从 [table] group by [primary key columns] 中选择 min(rowid)）

它将有助于从基于 rowid 的表中删除重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:46:47.807

快捷方式：添加约束

```
ALTER IGNORE TABLE `foo` ADD UNIQUE `link` (`link`);
DROP INDEX `link` ON `foo`; -- to restore table state 
```

但我认为更好地创建有约束的新表

```
CREATE  TABLE `temp` LIKE `foo`;
ALTER IGNORE TABLE `temp` ADD UNIQUE `link` (`link`);
INSERT IGNORE INTO `temp` SELECT * FROM `foo`;
RENAME TABLE `foo` TO `old_foo`, `temp` TO `foo`;
DROP TABLE `old_foo`;
DROP INDEX `link` ON `foo`; -- to restore table state 
```

没有测试它。

PS别忘了锁表

PPS 表无法锁定。无论如何，您必须在操作之前停止写入该表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:42:23.557

询问：

```
DELETE f
FROM foo f
WHERE (SELECT MIN(f1.id) 
       FROM (SELECT * FROM foo) f1
       WHERE f1.link = f.link) != f.id 
```

查询删除 id=50 到 id=100 之间的重复记录：

```
DELETE f
FROM foo f
WHERE (SELECT MIN(f1.id) 
       FROM (SELECT * FROM foo) f1
       WHERE f1.link = f.link) != f.id
AND f.id >= 50
AND f.id <= 100 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:36:59.997

尝试这个

```
DELETE foo
FROM foo
  INNER JOIN (SELECT
                link,
                MIN(id) AS MinId
          FROM foo
          GROUP BY link) b
    ON foo.link = b.link
WHERE foo.id <> b.MinId 
```

# javascript - Javascript 错误：$ 不是函数

> ID：16076995
> 
> 赞同：0
> 
> 时间：2013-04-18T07:30:56.917
> 
> 标签：javascript, javascript-events

我在这里面临一个奇怪的问题：

在萤火虫我看到这个错误：

$ 不是函数

```
_handleEvent() in pro.js 
 e = load
 var handlers = this.events[e.type], el = $(this); 
```

完整功能定义如下：

```
_handleEvent : function(e) {
 var returnValue = true;
 e = e || Event._fixEvent(window.event);
var handlers = this.events[e.type], el = $(this);
for (var i in handlers) {
    el.$$handleEvent = handlers[i];
    if (el.$$handleEvent(e) === false) returnValue = false;
}
return returnValue;
} 
```

你们能帮我看看这里为什么会出现这个错误。我猜它与jquery无关。

***注意：***它给出了错误：$(this) 不是 IE 中的函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:53:57.587

我认为您要么没有正确加载 jQuery，要么在包含 jQuery*之前执行了此代码。*或者您可能正在使用 jQuery 的*noConflict*模式[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)，在这种情况下您需要替换`$()`为`jQuery()`.

此外，请确保在加载文档时执行此代码，或者更好的是，在加载 jQuery 时执行此代码：

```
$(document).ready(function() {
  // your code goes here
}); 
```

# c# - 我的方法中的泛型和类型值显示错误

> ID：16076999
> 
> 赞同：0
> 
> 时间：2013-04-18T07:31:06.997
> 
> 标签：c#, .net, entity-framework, generics, casting

我正在尝试编写一个通用方法，下面的代码给出了错误。

> 无法将类型“ `T2`”转换为“ `T1`”
> 
> ' `T1`' 不包含 'Action' 的定义，并且找不到接受类型 ' `T1`' 的第一个参数的扩展方法 'Action'（您是否缺少 using 指令或程序集引用？）

```
private List<T2> FillChildControlOnSave<T1, T2>(
        ref T1 objEntity, ref List<T1> _entityParent, ref List<T2> _entityDetail)
{
    foreach (T2 c in _entityDetail)
    {
        if (c.Action == XERP.Entity.ActionMode.Add)            
            objEntity.PlnBOMDetails.Add(c);

        var tmp = objEntity.PlnBOMDetails
                     .Where(p => p.BOMDetailRecordID == c.BOMDetailRecordID && 
                                 p.BOMID == c.BOMID && 
                                 p.IsDeleted == false)
                     .FirstOrDefault();

        if (tmp != null)
           if (c.Action == Entity.ActionMode.Delete)            
               objController.Context.PlnBOMDetails.DeleteObject(tmp);            
    }

    return _entityDetail;

} 
```

如果我用then 替换上面的语法就可以了`T1`。如何解决这个泛型方法问题？`T2``PlnBOMMaster,PlnBOMDetail`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:33:06.680

如果你想限制某些`T1`类`T2`或接口，你需要使用[泛型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)，像这样：

```
private List<T2> FillChildControlOnSave<T1, T2>(ref T1 objEntity, 
                                                ref List<T1> _entityParent, 
                                                ref List<T2> _entityDetail)
    where T1 : PinBOMMaster
    where T2 : PinBOMDetail
{
    ...
} 
```

当然`PinBOMMaster`也`PinBOMDetail`可以换成合适的接口，比如这样：

```
public interface IMaster<TDetail>
    where TDetail : IDetail
{
    List<TDetail> Details { get; }
}

public interface IDetail
{
    int RecordID { get; }
    int BOMID { get; }
    bool isDeleted { get; }
    Entity.ActionMode Action { get; set; }
}

public class PinBOMMaster : IMaster<PinBOMDetail>
{
    ...
}

public class PinBOMDetail : IDetail
{
    ...
}

private List<T2> FillChildControlOnSave<T1, T2>(ref T1 objEntity, 
                                                ref List<T1> _entityParent, 
                                                ref List<T2> _entityDetail)
    where T1 : IMaster<T2>
    where T2 : IDetail
{
    ...
} 
```

*注意：*如果您的实体是由代码生成工具创建的，则必须使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)来应用接口实现。

当然，您可能无法使用`objController.Context.PlnBOMDetails.Add(c)`. 您必须用通用代码替换它，如下所示：

```
// for DbContext
objController.Context.Set<T2>().Add(c);

// for ObjectContext
objController.Context.CreateObjectSet<T2>().AddObject(c); 
```

当然，您也可以编写自己的方法来执行此操作。例如，`IDetail`/`IMaster`接口可以有一个`AddToContext(...)`方法，该方法获取上下文并将其自身插入到适当的集合中。然后在`FillChildControlOnSave`你只需调用`c.AddToContext(objConctroller.Context);`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:34:26.047

如果你想在实例上调用成员，`T1`那么`T2`你必须告诉编译器一些关于这些类型的信息：

```
private T2 Bar<T1,T2>(T1 actionable) where T1 : IActionable, T2 : IActionResult
{
    T2 result = actionable.Action();
    return result;
} 
```

您可以在方法的参数之后指定`T1`和`T2`使用关键字的约束。`where`

您还可以指定以下内容：

```
where T : new()  // has a default constructor
where T : struct // is a value type
where T : class  // is a reference type 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:35:41.193

您正在循环`T2`使用此行的列表：

```
foreach (T2 c in _entityDetail) 
```

然后您正在访问此行中的`Detail`属性`c`：

```
if (c.Action == XERP.Entity.ActionMode.Add) 
```

编译器如何知道该类型`T2`包含这样的属性？

您需要将泛型约束为一种像这样的接口：

```
interface IPlnBOMDetail { XERP.Entity.ActionMode Action {get;}}
class PlnBOMDetail : IPlnBOMDetail {}

private List<T2> FillChildControlOnSave<T1, T2>(ref T1 objEntity, ref List<T1> _entityParent, ref List<T2> _entityDetail)
    where T2 : IPlnBOMDetail 
```

其余所有代码都相同。

附注：使用`ref`参数是一种代码气味。
我建议您阅读此主题：[在 C# 中何时使用 ref 以及何时不需要](https://stackoverflow.com/questions/635915/when-to-use-ref-and-when-it-is-not-necessary-in-c-sharp)。
TL;DR : [Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)说

> 你几乎不需要使用 ref/out