# StackOverflow 问答 13457000-13457999

# c# - 将格式应用于 DataTable 中的列

> ID：13457005
> 
> 赞同：1
> 
> 时间：2012-11-19T15:33:17.900
> 
> 标签：c#, data-binding, datatable

我有一个带有 DateTime 类型列的 .NET DataTable。我想使用“y”格式说明符将日期格式化为月、年。我宁愿不必遍历所有更改值的行/列。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:36:49.467

`DataTable`只存储值。它不提供格式。`DateTime`在将其放入之前进行格式化`DataTable`（因此将其存储为字符串），或者对您`DataTable`绑定的控件进行格式化（例如`DataGridView`，具有`Format`单元格样式的属性）。

# java - 序列化期间的杰克逊异常

> ID：13457006
> 
> 赞同：0
> 
> 时间：2012-11-19T15:33:19.817
> 
> 标签：java, json, spring, hibernate, jackson

我遇到了这个问题，这有点接近[这个问题](https://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object)，但是当我完成所有步骤后，我仍然有这样一个例外：

> org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer 也没有发现创建 BeanSerializer 的属性（为避免异常，禁用 SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS））（通过引用链: java.util.ArrayList[0]->com.myPackage.SomeEntity["mainEntity"]->com.myPackage.MainEntity["subentity1"]->com.myPackage.Subentity1_$$_javassist_8["handler"])

这是我的实体的代码：

```
@JsonAutoDetect
public class MainEntity {

    private Subentity1 subentity1;

    private Subentity2 subentity2;

    @JsonProperty
    public Subentity1 getSubentity1() {
        return subentity1;
    }

    public void setSubentity1(Subentity1 subentity1) {
        this.subentity1 = subentity1;
    }

    @JsonProperty
    public Subentity2 getSubentity2() {
        return subentity2;
    }

    public void setSubentity2(Subentity2 subentity2) {
        this.subentity2 = subentity2;
    }
}

@Entity
@Table(name = "subentity1")
@JsonAutoDetect
public class Subentity1 {

    @Id
    @Column(name = "subentity1_id")
    @GeneratedValue
    private Long id;

    @Column(name = "name", length = 100)
    private String name;

    @JsonIgnore
    @OneToMany(mappedBy = "subentity1")
    private List<Subentity2> subentities2;

     @JsonProperty
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @JsonProperty
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
    //here I didin't add @JsonProperty, cause it leads to cycling during serialization
    public List<Subentity2> getSubentity2s() {
        return subentity2s;
    }

    public void setSubentity2s(List<Subentity2> subentity2s) {
        this.subentity2s = subentity2s;
    }

}

@Entity
@Table(name = "subentity2")
@JsonAutoDetect
public class Subentity2 {
    @Id
    @Column(name = "subentity2_id")
    @GeneratedValue
    private Long id;

    @Column(name = "name", length = 50)
    private String name;

    @ManyToOne
    @JoinColumn(name = "subentity1_id")
    private Subentity1 subentity1;

    @JsonProperty
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @JsonProperty
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @JsonProperty
    public Subentity1 getSubentity1() {
        return subentity1;
    }

    public void setSubentity1(Subentity1 subentity1) {
        this.subentity1 = subentity1;
    } 
```

这是我的转换方法的代码：

```
 private String toJSON(Object model) {
        ObjectMapper mapper = new ObjectMapper();
        String result = "";
        try {
            result = mapper.writeValueAsString(model);
        } catch (JsonGenerationException e) {
            LOG.error(e.getMessage(), e);
        } catch (JsonMappingException e) {
            LOG.error(e.getMessage(), e);
        } catch (IOException e) {
            LOG.error(e.getMessage(), e);
        }
        return result;
    } 
```

我将非常感谢任何帮助、建议或代码:)

UPD

另外，我忘了从我的控制器中添加一段代码：

```
String result = "";
        List<SomeEntity> entities = someEntityService.getAll();
        Hibernate.initialize(entities);
        for (SomeEntity someEntity : entities) {
            Hibernate.initialize(someEntity.mainEntity());
            Hibernate.initialize(someEntity.mainEntity().subentity1());
            Hibernate.initialize(someEntity.mainEntity().subentity2());
        }
        result = this.toJSON(entities); 
```

我不能忽略任何字段，因为我需要它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:44:56.780

基本上，您的一些字段被包装到惰性休眠代理中。在序列化您的对象之前调用`Hibernate.initialize(model)`，它将加载您的惰性集合和引用。

但我不会混合使用数据库和视图模型，这是一种不好的做法。为您的 RESTful 模型创建一组类，并在序列化之前将数据库实体转换为它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:24:27.590

我创建了一个带有平面字段（字符串、布尔值、双精度等）的 Bean，它们在我的类中，并为转换创建了方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T15:16:26.643

如果您使用延迟加载，请添加此

```
@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"}) 
```

# stored-procedures - 返回字段的存储过程，除非代码通过 datatableadapter 使用它

> ID：13457010
> 
> 赞同：0
> 
> 时间：2012-11-19T15:33:35.540
> 
> 标签：stored-procedures, datatable, is-empty

我遇到了将存储过程结果（ Table ）检索到数据表中的问题，

当我尝试从 sql server 运行我的过程时，它正在工作，就像从数据集中测试它一样（我使用了一个调用我的存储过程的 datatableadapter。

但是当我尝试通过代码获取我的存储过程时，它返回一个空的数据表。

这是我的查询的样子（它包含很多字段，所以我试图恢复所有，

CREATE TABLE #TemporaryTable(Code_Suivi smallint IDENTITY(1,1), DATECREATION date, NOMPROJET varchar(20), ProducedHours decimal(10,1), Accumulation)

插入#TemporaryTable（DATECREATION、NOMPROJET、ProducedHours）

SELECT 查询——它将插入我选择的#TemporaryTable

为避免出现空白，我必须不使用 insert into ... 这对我来说是不可能的，之前有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:52:44.630

我使用了另一种方法来使其工作，避免使用数据表适配器，并使用 sqldatasource 调用选择查询

# html - 如何将列表转换为下一个和上一个的列表

> ID：13457016
> 
> 赞同：0
> 
> 时间：2012-11-19T15:34:03.627
> 
> 标签：html, html-lists

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:52:11.713

这允许您设置一个简单的下一个/上一个锚跳转：

```
 <a href="#" onclick="move(-1)">prev</a> <a href="#" onclick="move(1)">next</a> 
```

JS：

```
var positions = "abcdefghijk";
var curpos = 0
function move(dir) {
    (event.preventDefault) ? event.preventDefault() : event.returnValue = false;  
    curpos = curpos + dir;
    if(curpos<0) {
        curpos = 0;
    }
    if(curpos>positions.length-1) {
        curpos = positions.length-1;
    }
    window.location.hash == '#'+positions[curpos]; 
} 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​。

# sql-server - 连接子句上的 Len 函数

> ID：13457022
> 
> 赞同：0
> 
> 时间：2012-11-19T15:34:38.007
> 
> 标签：sql-server

```
Join db_abc
On a.userid = b.userid 
```

我想在 b 中的所有用户 ID 上加入所有用户 ID，长度为 4。如何在 b.userid 上指定 Len 函数，其中用户 ID 长度仅为 4 个字符？这是在 SQL 服务器中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:37:34.330

```
SELECT *
FROM a
INNER JOIN b ON a.userid = b.userid AND LEN(b.userid) = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:37:46.517

```
...
JOIN db_abc b
    ON a.userid = b.userid
        AND LEN(b.userid) = 4
... 
```

# apache - 站点关闭，但 SSH 和 FTP 工作正常

> ID：13457023
> 
> 赞同：0
> 
> 时间：2012-11-19T15:34:43.460
> 
> 标签：apache

自上次工作以来（昨晚）没有改变任何东西。可以通过 Putty 和 FileZille 进行连接，但我的 /www/ 文件都不能在 Web 浏览器中运行（问题加载页面）。IP也很好。

我尝试使用域名和 IP 访问网站。

我已经重新启动了 apache2 以及实际的服务器，但运气不好。

# python - 如何检查字符串中的字符是否按字母顺序排列

> ID：13457025
> 
> 赞同：0
> 
> 时间：2012-11-19T15:34:50.173
> 
> 标签：python, string

我一直在尝试这些代码，但有问题。我只是想知道第一个字符串是否按字母顺序排列。

```
def alp(s1):
    s2=sorted(s1)
    if s2 is s1:
        return True
    else:
        return False 
```

这总是打印 False，当我说打印 s1 或 s2 时，它说“NameError：名称's1'未定义”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:37:11.567

`is`是比较对象 ID 的身份测试，`==`是平等测试：

```
In [1]: s1 = "Hello World"
In [2]: s2 = "Hello World"

In [3]: s1 == s2
Out[3]: True

In [4]: s1 is s2
Out[4]: False 
```

另请注意，它`sorted`返回一个列表，因此将其更改为：

```
if ''.join(s2) == s1: 
```

或者

```
if ''.join(sorted(s2)) == s1: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:42:16.153

我会使用它`iter`来很好地获取前一个元素：

```
def is_ordered(ss):
   ss_iterable = iter(ss)
   try:
       current_item = next(ss_iterable)
   except StopIteration:
       #replace next line to handle the empty string case as desired.
       #This is how *I* would do it, but others would prefer `return True`
       #as indicated in the comments :)
       #I suppose the question is "Is an empty sequence ordered or not?"
       raise ValueError("Undefined result.  Cannot accept empty iterable")

   for next_item in ss_iterable:
       if next_item < current_item:
           return False
       current_item = next_item
   return True 
```

这个答案在绝对最坏的情况下具有复杂性 O(n)，而不是依赖于`sort`O(nlogn) 的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T15:43:35.063

您可以看到[这个答案](https://stackoverflow.com/a/3755251/451980)并使用适用于任何序列的东西：

```
all(s1[i] <= s1[i+1] for i in xrange(len(s1) - 1)) 
```

例子：

```
>>> def alp(s1):
...     return all(s1[i] <= s1[i+1] for i in xrange(len(s1) - 1))
...
>>> alp("test")
False
>>> alp("abcd")
True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T15:38:30.710

确保您将字符串与字符串进行比较：

```
In [8]: s = 'abcdef'

In [9]: s == ''.join(sorted(s))
Out[9]: True

In [10]: s2 = 'zxyw'

In [11]: s2 == ''.join(sorted(s2))
Out[11]: False 
```

如果`s1`or`s2`是一个字符串，`sorted`将返回一个列表，然后您将一个字符串与一个列表进行比较。为了进行您想要的比较， using`''.join()`将获取列表并将所有元素连接在一起，本质上创建一个表示已排序元素的字符串。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T15:39:03.003

使用这样的东西：

`sorted()`返回一个列表，并且您正在尝试将列表与字符串进行比较，因此首先将该列表更改为字符串：

```
In [21]: "abcd"=="".join(sorted("abcd"))
Out[21]: True

In [22]: "qwerty"=="".join(sorted("qwerty"))
Out[22]: False

#comparsion of list and a string is False
In [25]: "abcd"==sorted("abcd")
Out[25]: False 
```

# mysql - Yii 多对多对多？

> ID：13457030
> 
> 赞同：0
> 
> 时间：2012-11-19T15:35:33.977
> 
> 标签：mysql, database, yii, many-to-many, has-many-through

假设我有 3 个主表： `category`, `tag`,`url`

`category`并`tag`有一个 MANY_MANY 关系。

`tag`并`url`有一个 MANY_MANY 关系。

我想从中`category`检索所有链接的`url`.

最简单、最有效的方法是什么？

我可以声明一种 MANY_MANY_MANY 关系吗？或者这在标准上可行吗？还是我必须用纯 SQL 来做？

我喜欢 Criteria 的想法，因为我稍后将传递它的“偏移”和“限制”参数以用于分页目的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:15:57.647

我认为最好的方法是创建一些中间表来保存多：多信息，例如；

```
CREATE TABLE `categories_tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_categories` int(11) NOT NULL,
  `id_tags` int(11) NOT NULL,
  PRIMARY KEY (`id`)
);
ALTER TABLE `categories_tags`
  ADD CONSTRAINT `categories_tags_ibfk_1` FOREIGN KEY (`id_categories`) REFERENCES `categories` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `categories_tags_ibfk_2` FOREIGN KEY (`id_tags`) REFERENCES `tags` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

和...

```
CREATE TABLE `tags_urls` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_tags` int(11) NOT NULL,
  `id_urls` int(11) NOT NULL,
  PRIMARY KEY (`id`)
);
ALTER TABLE `tags_urls`
  ADD CONSTRAINT `tags_urls_ibfk_1` FOREIGN KEY (`id_tags`) REFERENCES `tags` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `tags_urls_ibfk_2` FOREIGN KEY (`id_urls`) REFERENCES `urls` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

您可以在这些表之间的关系中使用[through 。](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)

在您的类别模型中：

```
public function relations()
{
    return array(
        'categoryTags' => array(self::_MANY, 'CategoriesTags', 'id_categories'),
        'tags' => array(self::HAS_MANY, 'Tag', 'id_tags', 'through'=>'categoryTags'),
        'tagsUrls' => array(self::HAS_MANY, 'TagUrl', 'id_tags', 'through'=>'tags'),
        'urls' => array(self::HAS_MANY, 'Url', 'id_url', 'through'=>'tagsUrls'),
    );
} 
```

要调用给定类别的所有网址，您应该能够：

```
$model = Category::model()->findByPk($categoryId);

$model->urls; // will be an array of url models that belong to the category. 
```

[**编辑**] 在重新阅读问题后添加了上面的编辑，我没有测试过，您可能需要对代码进行一些（或许多）编辑，但原则上应该有效。可能有一种更快的方法来获取“通过”关系数据，但我之前实际上并没有在两个多：多关系中使用 through，所以不需要自己尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:58:33.237

我可能发现了一个窍门：VIEWS

我创建了以下视图：

```
CREATE VIEW category_url AS
(SELECT DISTINCT category.id AS category_id, url.id AS url_id 
FROM category
LEFT JOIN category_tag ON category_tag.category_id=category.id
LEFT JOIN url_tag ON url_tag.tag_id = category_tag.tag_id
LEFT JOIN url ON url.id = url_tag.url_id) 
```

我在类别中添加了以下关系：

```
self::MANY_MANY, 'Url', 'category_url(category_id, url_id)' 
```

我还没有进行广泛的测试。欢迎评论。

# java - Eclipse 插件开发：无法解决依赖关系

> ID：13457031
> 
> 赞同：0
> 
> 时间：2012-11-19T15:35:32.557
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-plugin

基于这个[简单的教程](http://stacktrace.be/blog/2009/11/09/eclipse-plugin-development-show-custom-mylyn-notification-dialog/)，我正在尝试显示弹出通知，作为 org.eclipse.mylyn.commons.ui 依赖项的一部分。因此，我已将此依赖项添加到我的 plugin.xml 中，如下所示：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Roll and Scroll Recorder
Bundle-SymbolicName: ATF_Recorder_Plugin;singleton:=true
Bundle-Version: 0.0.502
Bundle-Activator: com.jcraft.eclipse.jcterm.JCTermPlugin
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 com.jcraft.jsch;bundle-version="0.1.31",
 org.eclipse.core.resources;bundle-version="3.7.101",
 org.eclipse.jsch.core;bundle-version="1.1.300",
 com.jcraft.eclipse.jsch.core,
 org.eclipse.mylyn.commons.ui;bundle-version="3.6.1"
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-Vendor: OSEHRA 
```

此外，我在我的 Feature 项目中单击了计算依赖项，现在将其更新到我的 feature.xml 文件中：

```
<requires>
  <import plugin="org.eclipse.ui"/>
  <import plugin="org.eclipse.core.runtime"/>
  <import plugin="com.jcraft.jsch" version="0.1.31" match="greaterOrEqual"/>
  <import plugin="org.eclipse.core.resources" version="3.7.101" match="greaterOrEqual"/>
  <import plugin="org.eclipse.jsch.core" version="1.1.300" match="greaterOrEqual"/>
  <import plugin="com.jcraft.eclipse.jsch.core"/>
  <import plugin="org.eclipse.mylyn.commons.ui" version="3.6.1" match="greaterOrEqual"/>
</requires> 
```

但是，当我安装我的自定义插件并显示它的视图时，依赖项永远不会被解决：

```
java.lang.ClassNotFoundException: org.eclipse.mylyn.internal.provisional.commons.ui.AbstractNotificationPopup
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.jcraft.eclipse.jcterm.JCTermView.createPartControl(JCTermView.java:189)
at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:375)
at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:229)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.Perspective.showView(Perspective.java:2245)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:50:51.597

这个问题的教训是

`Don't ever use non-API classes, unless you don't care if your plug-in breaks in future versions`.

如果你绝对需要向后兼容，我猜你必须构建你的插件两次。

但由于

*   您的目标是 Indigo (3.7)
*   在临时包成为 API 的情况下，该错误是[错误 360301](https://bugs.eclipse.org/bugs/show_bug.cgi?id=360301)
*   此错误修复已包含在 Mylyn 3.7 中

您可能最需要`org.eclipse.mylyn.commons.ui`3.7 版及更高版本。

由于您使用 Eclipse 3.6 进行开发，因此您必须设置一个包含 3.7 安装的目标平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:53:31.610

您确定您正在针对您构建的同一版本的 mylyn 运行插件吗？在较新版本的 mylyn（例如 3.8.0）中，该类已移至 package `org.eclipse.mylyn.commons.ui.dialog`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:21:25.913

问题：即使使用的是“相同”的 Indigo SR 2 版本的 Eclipse，它们也不相同。其中一些有 3.6 版本，`org.eclipse.mylyn.commons.ui`另一些有 3.8（应该只在 Juno 中......）。

# gwt - 无法设置 Sencha GXT 窗口大小

> ID：13457033
> 
> 赞同：0
> 
> 时间：2012-11-19T15:35:42.243
> 
> 标签：gwt, window, gxt

我正在使用 Sencha GXT 桌面应用程序示例。尝试了以下所有方法来更改窗口大小。但是当我打开窗口时，大小不是我设置的。

```
window.setWidth(500);
window.setHeight(400);
window.setBodyStyle("width:500px;height:400px;background-color:red;");
window.setPixelSize(500, 400);
window.getElement().setSize(500, 400, true);
window.setMinHeight(400);
window.setMinWidth(500);
window.forceLayout(); 
```

版本为 gxt-3.0.1-GPL

# browser - 现在网站图标不那么受欢迎了吗？

> ID：13457034
> 
> 赞同：0
> 
> 时间：2012-11-19T15:35:43.443
> 
> 标签：browser, favicon

在试图弄清楚为什么我的 favicon 没有在各种浏览器（Safari 除外）中显示，而是被灰色地球取代后，我发现了以下讨论：

[http://support.mozilla.org/en-US/questions/923022](http://support.mozilla.org/en-US/questions/923022)

现在，对于不提供身份信息的网站或与网站的连接未加密时，这似乎是正常的。即使是主要网站也不显示网站图标。

这是我的问题，还是我们没有像以前那样在 URL 地址栏中看到网站图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T23:37:50.877

我相信今天的网站图标比过去更受欢迎。

我相信您遇到的部分问题是网站图标的显示方式。并不是它们不那么受欢迎，而是它们的位置或显示方式可能已经改变。

以下是它们显示位置的概要。

> **地址栏：** Firefox v1 - 12、IE 7+、Opera v7 - 12 和 Safari
> 
> **地址栏下拉列表：** Firefox
> 
> **链接栏：** Firefox、Chrome、IE 5+、Opera 7+
> 
> **书签：** Firefox、Chrome、IE 7+、Opera 7+、Safari
> 
> **标签：** Firefox、Chrome、IE 7+、Opera 7+
> 
> **拖到桌面：** Firefox、Chrome、IE 5+、Opera 7+

（[来自维基百科的列表](http://en.wikipedia.org/wiki/Favicon#Use_of_favicon)）

您还必须考虑到，由于移动设备，网站图标现在发挥着更大的作用。当有人将网站添加为书签或将其固定到他们的屏幕上时，它将使用网站图标。我发现为移动设备设置网站图标非常棒，因为它显示了一个徽标或图标，而不是看到页面塞满了屏幕上的一个小图标。

底线：Favicon 不会去任何地方，我强烈建议为台式机和移动设备[编写它们。](https://stackoverflow.com/a/23851464/825757)

# c - pthread 唤醒时执行

> ID：13457035
> 
> 赞同：4
> 
> 时间：2012-11-19T15:35:45.270
> 
> 标签：c, linux, pthreads, scheduling

如何让我的 pthread 每次被内核重新调度时执行一个函数？

我需要确定我的线程被安排在哪个物理 CPU/插槽（不是逻辑核心）上，并且不能一直这样做。

只有在线程实际被重新调度时，唤醒例程才能以某种方式对 TLS 进行必要的更新？

至于我为什么需要这个：我的代码每线程每 70ns 执行一次 AMO appx，如果地址没有缓存在另一个套接字上，这很好，由于频繁的缓存失效，在两个套接字上部署相同的代码会产生 15 倍的性能影响。我打算专门为此分配内存，它只在运行相同 L3 缓存的线程之间共享。所以我需要确定我在哪个套接字上运行并寻址正确的内存块。我显然可以调用`sched_getcpu`它并将其与 中的物理 CPU ID 进行比较`/proc/cpuinfo`，但这是一个相当大的开销。不过，我负担不起为每个线程分配线程专用内存，这太昂贵了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:08:54.523

根据我在*[Linux Kernel Development, Third Edition](http://books.google.gr/books?id=3MWRMYRwulIC&dq=linux+kernel+development&hl=en&sa=X&ei=Q5rDUJvME-WA4gSYpIDAAg&redir_esc=y)*中读到的内容，内核没有为您提供所需的服务或接口。使用*pthread_setaffinity*（如上面*@osgx*所建议的那样，或者，在最近的 linux 内核实现中，*[pthread_setaffinity_np](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setaffinity_np.3.html)*）或在开始时为每个 cpu 套接字缓存一个 TLS 密钥（如上面*@caf*所建议的那样）可能是在这个方向上使用的最佳方法.

# actionscript-3 - actionscript 3.0 类型错误

> ID：13457037
> 
> 赞同：1
> 
> 时间：2012-11-19T15:35:53.373
> 
> 标签：actionscript-3, reference, timeline, typeerror

我收到这个烦人的错误，我无法弄清楚问题可能是什么......

`TypeError: Error #1009: Cannot access a property or method of a null object reference. at simplifyVirSys_fla::copyRightAthenaAcademy_1/initiateApp()`

我的主要时间线有两个框架：frame1-介绍和 frame2-应用程序本身

介绍是一个电影剪辑。介绍 mc 的最后一帧的代码如下所示：

```
addEventListener(Event.ENTER_FRAME, initiateApp);

function initiateApp(e:Event){
    MovieClip(root).gotoAndStop(2);
} 
```

所以在播放完介绍之后，它应该跳到主时间线的第 2 帧。这就是输出窗口因 #1009 错误而疯狂的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:00:45.873

您可以尝试验证根。

```
addEventListener(Event.ENTER_FRAME, initiateApp);

function initiateApp(e:Event){
    if (root)
        MovieClip(root).gotoAndStop(2);
} 
```

我不明白您为什么要尝试使用 EnterFrame 事件进入第 2 帧。您只需在动画的最后一帧中放置一个`stage.gotoAndStop(2)`或`MovieClip(root).gotoAndStop(2)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:24:50.983

试试这个：

```
addEventListener(Event.ADDED_TO_STAGE, this.ready);

function ready(e:Event) {
    removeEventListener(Event.ADDED_TO_STAGE, ready);
    addEventListener(Event.ENTER_FRAME, initiateApp);
}

function initiateApp(e:Event){ 
        MovieClip(root).gotoAndStop(2);
} 
```

# c++ - 如何从 C++ 中的 SendMessage() 接收信息

> ID：13457040
> 
> 赞同：0
> 
> 时间：2012-11-19T15:35:56.003
> 
> 标签：c++, windows, winapi

我知道如何将[消息发送到另一个进程](https://stackoverflow.com/questions/13455475/how-to-send-a-byte-array-to-another-process-in-c)。现在我试图了解如何在我的其他进程中接收消息。我知道如何从 de COPYDATASTRUCTURE 中提取我的项目，但是在我的其他进程上调用的方法是什么。我发现了很多关于如何读取接收到的数据的东西，但从来没有发现如何实现它。所以基本上，当应用程序接收到来自 SendMessage() 的消息时，会调用什么函数/事件？您必须在这里知道我对这两个过程都有完全控制权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:40:02.187

来自另一个进程的发送消息与从同一进程接收的任何发送消息完全相同：具体而言，消息发送到的窗口的窗口过程被调用，并使用消息作为参数，就像您将收到 WM_PAINT 或任何其他 op-sys信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:51:27.030

考虑阅读这篇博客文章，其中包含示例代码：

[使用 WM_COPYDATA 来编组消息参数，因为窗口管理器不知道如何](http://blogs.msdn.com/b/oldnewthing/archive/2012/10/19/10360980.aspx)

（您只需`WM_COPYDATA`在接收器中处理`WndProc`。）

# templates - Windows 8 JS 和 html5 应用程序 - 模板中的 foreach

> ID：13457043
> 
> 赞同：0
> 
> 时间：2012-11-19T15:36:06.450
> 
> 标签：templates, windows-8, microsoft-metro, winjs

如何`WinJS.Binding.Template`在我的`WinJS.UI.ListView`控制范围内循环遍历项目？

我的数据：

```
{ category: 'Sports', 
  items: [
    { title: 'soccer'}, { title: 'tennis'}
  ] 
} 
```

我**想**在我的模板中做什么：

```
<div id="myTmpl" data-win-control="WinJS.Binding.Template" style="display:none">
  <h1 data-win-bind="innerText: category"></h1>
  <div data-win-REPEATER="each: items">
    <span data-win-bind="innerText: title"></span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:07:10.393

因为你想嵌套项目的细节，我建议你看看我对另一个问题的回答，这个问题非常相似：

[WinJS ListView 和模板绑定](https://stackoverflow.com/questions/13337489/winjs-listview-and-template-binding/13337787#13337787)

这包含所有基本细节。

也就是说，你没有理由不能在这里集成 JQuerys 模板——你只需要找到一种方法让它们与 WinJS 模板/控制合同一起工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T18:01:23.433

你检查过吗

[http://code.msdn.microsoft.com/windowsapps/ListView-basic-usage-sample-fcc451db](http://code.msdn.microsoft.com/windowsapps/ListView-basic-usage-sample-fcc451db)

通常循环是自动的（它将根据数据源信息进行）

```
<div id="listView" 
        class="win-selectionstylefilled"
        data-win-control="WinJS.UI.ListView" 
        data-win-options="{ 
            itemDataSource: myData.dataSource, 
            itemTemplate: myTmpl, 
            selectionMode: 'none', 
            tapBehavior: 'none', 
            swipeBehavior: 'none', 
            layout: { type: WinJS.UI.GridLayout } 
        }"
    ></div> 
```

# jquery - ssn 的验证清洁器正则表达式

> ID：13457045
> 
> 赞同：1
> 
> 时间：2012-11-19T15:36:13.737
> 
> 标签：jquery, jquery-validate

我编写了一个 jquery 验证类，以使所有 ssn 的所有数字都无效，除了对我们有效的实心零。但是我觉得正则表达式很乱。我想知道是否有人知道写这个的“更干净的方式”。

```
jQuery.validator.addMethod("ssnFABSValidation", function(ssn) {
    ssn = ssn.replace(/\s+/g, "");
    ssn = ssn.replace(/[_]+/g, "");
   if (ssn.match(/^([1-9])\1\1[-]\1\1[-]\1\1\1\1/)||(ssn.length<11)){
        return false
    }
    return true;
}, "Please specify a valid SSN or use 000-00-0000 for unknown SSN"); 
```

# php - 模式匹配统一的句子结构

> ID：13457046
> 
> 赞同：2
> 
> 时间：2012-11-19T15:36:16.103
> 
> 标签：php, regex, sentence

我有一个结构统一的句子，我想使用正则表达式从句子中挑选出某些单词。例如句子结构如下：

```
["Take the"] + [train] + ["bound train to"] + [stop] 
```

其中引号中的单词是硬编码的，而没有引号的单词是可变的。例如，基于该句子结构，以下句子适用：

```
- Take the L bound train to 1st street.
- Take the 1 bound train to neverland. 
```

我需要帮助想出一个与此匹配的正则表达式模式，并允许我解析出 [train] 和 [stop]。我的正则表达式 kunfu 很弱，我需要一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:43:20.213

非常简单的正则表达式：`'^Take the (.*) bound train to (.*)\.$'`存储`[train]`在第一个捕获组和`[stop]`第二个捕获组中。

```
^               # Match the start of the string
Take the        # Match the literal string
(.*)            # Capture the [train]
bound train to  # Match the literal string
(.*)            # Capture the [stop]
\.              # Match the fullstop 
$               # Match the end of string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:44:23.573

```
preg_match("/^Take\sthe\s([\d\w]+)\sbound\strain\sto\s([\w\d]+)$/", $string, $hits); 
```

像这样的东西应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:09:26.923

根据我的理解，您似乎想做某种模板，这需要重新修改您的句子结构和格式。

我看到以下内容：

```
Take the %start% bound train to %stop% 
```

这很容易用您需要的特定单词替换。

```
/%stop%/Union Station
/%stop%/East Station 
```

我知道这解决了您的问题，但它会比捕获所有将来会/可能变得难以维护的正则表达式提供更好的解决方案。

# asp.net - WebForms 404 中的 ASP.NET Web API

> ID：13457051
> 
> 赞同：3
> 
> 时间：2012-11-19T15:36:29.373
> 
> 标签：asp.net, asp.net-web-api, webforms

我有一个名为“UploadsController”的控制器。我有一个像这样的 GET 操作：

```
public string GetUpload([FromUri]string action)
{
    return "hey " + action;
} 
```

如果我在浏览器中导航到以下 API URL，我会得到一个成功的响应。

```
http://localhost:52841/MySite/api/uploads?action=testaction 
```

但是，当我尝试从 WebForms 应用程序中的代码隐藏调用 API 时，我收到 404 响应。

这是我的 Global.aspx 文件中的内容（尽管我相信第一个应该这样做）：

```
 RouteTable.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = System.Web.Http.RouteParameter.Optional }
    );
    RouteTable.Routes.MapHttpRoute(
           name: "Default2Api",
           routeTemplate: "api/{controller}/{action}",
           defaults: new { controller = "Uploads", action = "GetUpload" }); 
```

这是我调用 API 的方式：

```
 // Send a request asynchronously continue when complete 
    client.GetAsync("http://localhost:52841/MySite/api/uploads?action=testaction").ContinueWith(
        (requestTask) =>
        {
            // Get HTTP response from completed task. 
            HttpResponseMessage response = requestTask.Result;

            // Check that response was successful or throw exception 
            response.EnsureSuccessStatusCode();

            // Read response asynchronously as JsonValue
            response.Content.ReadAsAsync<string>().ContinueWith(
                        (readTask) =>
                        {
                            var result = readTask.Result;
                            //Do something with the result                   
                        });
        }); 
```

我以为我以前做过这个（使用 RC 版本，现在使用 RTM），但我似乎无法得到这个。

附带说明一下，由于某种原因，请求没有显示在提琴手中，当您尝试调试这些东西时，这有点烦人。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:54:16.033

1.  尝试将您的查询字符串参数命名为其他名称（现在它是“action”）。我认为这是造成问题的原因之一。由于 MVC 是基于约定的，这可能会导致问题。
2.  同样在您的路由声明中，尝试添加查询字符串参数（让我称之为**custAction**）。
3.  并在默认路由之前声明自定义路由。

代码示例：

```
RouteTable.Routes.MapHttpRoute(
name: "Default2Api",
       routeTemplate: "api/{controller}/{action}",
       defaults: new { controller = "Uploads", action = "GetUpload", custAction = RouteParameter.Optional}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:37:56.570

是的，我遇到了同样的问题，很可能您的问题是 webapi 默认情况下不允许跨域调用，或者至少这是我所知道的。

你需要为你的 web api 代码添加一个 CORS 支持，按照这个人展示的链接如何将 CORS 添加到你的 webapi

[http://code.msdn.microsoft.com/CORS-support-in-ASPNET-Web-01e9980a](http://code.msdn.microsoft.com/CORS-support-in-ASPNET-Web-01e9980a)

祝你好运。

# asp.net - 在 Visual Studio 中添加 Web 引用以获得宁静的 Web 服务

> ID：13457053
> 
> 赞同：1
> 
> 时间：2012-11-19T15:36:32.407
> 
> 标签：asp.net, visual-studio-2010, web-services

我正在尝试添加对 RESTful 服务的 Web 引用，这是一个示例 URL：

[http://dailymed.nlm.nih.gov/dailymed/services/v1/ndc/0409-3613-01/spls.xml](http://dailymed.nlm.nih.gov/dailymed/services/v1/ndc/0409-3613-01/spls.xml)

并且我收到以下错误（我猜是因为我无法访问 WSDL 或 DISCO，它们未在 API 帮助页面上列出）：

网址为[http://dailymed.nlm.nih.gov/dailymed/services/v1/ndc/0409-3613-01/spls.xml](http://dailymed.nlm.nih.gov/dailymed/services/v1/ndc/0409-3613-01/spls.xml)的文档未被识别为已知文档类型。来自每种已知类型的错误消息可能会帮助您解决问题： - 来自“XML Schema”的报告是“W3C XML Schema 的根元素应该是

我无法访问此网络服务，它由国家医学图书馆运营。关于如何在 VS 中添加引用有什么想法吗？我必须手动访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:22:58.180

没有标准的元数据格式来描述 REST 服务。没有什么类似于 WSDL。因此，“添加服务引用”或“添加 Web 引用”将不起作用。

您必须查看服务的文档，或者可能查看示例代码，并构建您自己的访问层。

# c# - 如何查看 word 是否已转换/修复文档

> ID：13457054
> 
> 赞同：0
> 
> 时间：2012-11-19T15:36:38.233
> 
> 标签：c#, ms-word, ole

我有一种方法可以查看文件是否由于文件损坏或格式错误而被转换。

我所做的是从 MS word 支持的文档中自动将文档转换为 tiff。我所做的是将bmp文件更改为doc文件，然后Word将其打开并将其发送打印，它变成了106页的tiff。

有没有办法在 word 中看到该文件已被转换，或者有没有一种技术。

我现在的代码。

```
 Document Doc;
        Application word = new Application();
        try
        {

            word.DisplayAlerts = WdAlertLevel.wdAlertsNone;

            Doc = word.Documents.Open(LocationAndFile, PasswordDocument: "BSpw", ReadOnly: true);

            word.ActivePrinter = "TIFF Image Printer 10.0";
            Doc.PrintOut(); //printout untested for now
            Doc.Close(false);

        }
        catch (System.Runtime.InteropServices.COMException ex)
        {

            word.Quit();
            releaseObject(word);
            return new ReturnInfo(LocationAndFile, true, ex.ErrorCode);
        }

        word.Quit();
        releaseObject(Doc);
        releaseObject(word); 
```

try catch 用于停止密码文档，我希望它会捕获损坏的文件，但它只是尝试转换它们。它是否打印已转换的页面并不重要，但我想知道它，以便我可以在之后列出文件以确保它看起来正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:45:21.870

根据[Word 对象模型页面](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.office.interop.word.document_members.aspx)，*没有*成员验证文档是否已修复。

所以，不，这是不可能的。

# c# - 查询嵌套列表

> ID：13457055
> 
> 赞同：1
> 
> 时间：2012-11-19T15:36:42.670
> 
> 标签：c#, linq

我有两节课：

```
public GeneralClassName 
{
    public GeneralClassName ()
    {
        SpecificList = new List<OtherClass>();
    }
    public string StringValue;
    public string OtherStringValue;
    public List<OtherClass> SpecificList;
} 
```

和

```
public OtherClass
{
    public string Name;
    public string Number;
} 
```

在 JSON 反序列化之后，我得到了一个不错`List<GeneralClassName>`的结果，我想要的结果是一个`Dictionary<string, int>`，它的值是里面的变量“数字”的总和`List<OtherClass>`，`List<GeneralClassName>`而键是变量名称。

换句话说，我想按名称对数字分组求和。

现在，我唯一想到的是嵌套的 foreach，类似这样：

```
Dictionary<string, int> resultDictionary = new Dictionary<string, int>();
foreach(List<OtherClass> listOtherClass in bigListGeneralClass.Select(x => x.SpecificList))
{
    foreach(OtherClass otherClass in listOtherClass)
    {
        int value = 0;
        if(resultDictionary.ContainsKey(otherClass.Name))
        {
            resultDictionary[otherClass.Name] += otherClass.Number;
        }
        else
        {
            resultDictionary.Add(otherClass.Name, otherClass.Number);
        }
    }
} 
```

虽然这个解决方案似乎运作良好，但我一点也不喜欢它。有没有更干净的方法来找到这个结果？也许通过一个不错的 LINQ 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:43:23.503

由于您不使用可用于展平列表的任何`GeneralClassName`信息`SelectMany`。这个平面的`OtherClass`实例列表是按`Name`属性分组的。最后，组列表被转换为字典，组的键（也称为`Name`属性）是新属性的键，值是`Number`该组中所有值的总和：

```
var result = bigListGeneralClass.SelectMany(x => x.SpecificList)
                                .GroupBy(x => x.Name)
                                .ToDictionary(x => x.Key,
                                              x => x.Sum(y => y.Number)); 
```

这段代码假定它`OtherClass.Number`实际上是一个`int`not a `string`。此假设也用于您的示例代码中的循环。
如果此假设不正确，请更改`y.Number`为`int.Parse(CultureInfo.InvariantCulture, y.Number)`。
注意：如果无法解析任何数字，这将引发异常，因此您可能需要事先确保所有数字都包含有效数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:04:04.797

试试这个：

```
Dictionary<string, int> result =
            bigListGeneralClass.SpecificList.GroupBy(sl => sl.Name)
                                .ToDictionary(group => group.Key, group => group.Sum(x => Int32.Parse(x.Number))); 
```

# jquery - 在动态元素上使用 jQuery ":visible" 选择器

> ID：13457061
> 
> 赞同：1
> 
> 时间：2012-11-19T15:37:00.960
> 
> 标签：jquery

我试图通过检查它打开/关闭的元素是否可见或不使用“：可见”选择器来切换链接控件的不透明度。我有以下标记：-

```
<div class='btns'></div>
<p class='text'>Hello world</p> 
```

使用这个 jQuery：-

```
var text = $('.text');
text.hide();
var btn = $('<a>', {
    'href': '#',
    'text': 'click me',
    'click': function(e){
        e.preventDefault();
        text.slideToggle();
        var opacity = text.is(':visible').length ? 1 : .5;
        $('.btns').animate({
            'opacity': opacity
        });
    }
});

$('.btns').append(btn); 
```

第一次单击链接时，链接正确地淡化为半不透明度，但随后单击时不透明度不会改变。您可以在[jsFiddle](http://jsfiddle.net/agkF7/)上看到这一点。

为什么 ":visible" 选择器在进一步点击时会失败？有更好的方法吗？

如果这里已经回答了这个问题，我深表歉意，但我无法找到我的特定问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:56:32.630

我认为你必须改变：

```
var opacity = text.is(':visible').length ? 1 : .5; 
```

到

```
var opacity = $('.btns').css('opacity')==0.5 ? 1 : 0.5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:55:37.893

如果你真的想测试文本的属性，你可以这样做：

```
var opacity = text.css('display') == 'none' ? .5 : 1;
text.slideToggle(); 
```

请务必在开始制作动画**之前**进行测试，因为在制作动画时显示永远不会是“无”。

为了更好地了解要测试的属性，我建议您（如果您使用 chrome）右键单击动画文本，检查元素，然后仔细观察激活切换时哪些样式参数正在实时更改。

# xml - 我需要对文档进行可视化建模，然后生成一些 POCO、EF 设计器或类图？

> ID：13457062
> 
> 赞同：0
> 
> 时间：2012-11-19T15:37:01.530
> 
> 标签：xml, asp.net-mvc-3, entity-framework-4

我需要建模一个我将作为 XML 持久化的文档。在第一个实例中，我将创建一些 POCO 类用作视图模型。我知道我可以通过 EF Designer/T4 生成它们。但是我想知道这是否是正确的路线，因为我实际上想要做的是对文档及其内容进行建模，然后将其映射到 XML 文档，并在需要时最终映射到模式。

我想使用 POCO VM 来提供强类型视图并启用数据注释以进行验证等。然后我可以将数据序列化回 XML。

那么，建模和生成这些 POCO 的最佳方法是什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:36:04.170

我认为 EF Designer 在这里不会有用。绘制所有框并添加所有属性然后手动编码将是更多的工作。为什么要生成类而不是手动编码？它似乎增加了一层复杂性并且可能没有任何好处......您可以尝试使用 xsd.exe 但它将生成的代码将被大量归因（因此没有 POCO）。

# javascript - 设置 document.title 在 Dynamics CRM 2011 JScript 中不起作用

> ID：13457064
> 
> 赞同：2
> 
> 时间：2012-11-19T15:37:09.403
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011

我在 MS Dynamics CRM 2011 表单上的 OnLoad 事件中运行一段 JScript 代码，并希望通过脚本设置文档标题（即在此页面的 IE 窗口/选项卡中显示的内容）。

我打了以下电话：

```
document.title = newtext; 
```

但这不起作用。当我使用 F12 检查发生的情况时，我看到预先存在的 document.title 值为“Holding:”。但是，我浏览器中实际选项卡的 document.title 是“Holding: - Microsoft Dynamics CRM”

我认为问题可能是我正在使用子表单（或者可能是 iFrame？），而不是在用户导航到的实际文档中工作。有什么办法可以设置父文档的标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:44:17.873

不确定这是否适合您，但这是我们的 setDisplayName 函数，它更新标题和 CRM Div 显示名称：

```
/*
Updates the display name of the entity, both in the name div, and the Page Title
*/
setDisplayName: function (name) {        
    // Updates the Document Title
    var title = parent.document.title;
    var start = title.indexOf(':') + 2;
    var end = title.lastIndexOf('-') - 1;    
    parent.document.title = title.substring(0, start) + name + title.substring(end);

    // Sets the div Name
    document.getElementById("form_title_div").childNodes[2].childNodes[0].innerText = name;
} 
```

# ruby - Rails 中的邪恶宝石，link_to previous_wizard_path 但想在两者之间保存对象

> ID：13457065
> 
> 赞同：0
> 
> 时间：2012-11-19T15:37:11.133
> 
> 标签：ruby, ruby-on-rails-3, gem, wizard

我实现了 wicked gem，效果很好。使用 rails cast 可以使用 link_tos 在各个步骤的各个部分之间进行。这很棒，但是当您单击每个页面底部的“保存文档”时，它显然不会像 submit_tag 那样执行...我希望使用该表单中的数据调用控制器中的更新方法，但是我不确定如何使用标准的 link_to 和 previous_wizard_path 和 next_wizard_path 助手来执行此操作，因为它们不会调用更新，而是显示它似乎。

所以不确定，如果必须从每个表单步骤之间保存数据，那么在步骤之间导航的 link_to 是否不是首选方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:13:15.777

好吧，通常，您为每个向导步骤使用带有提交按钮的表单 - 就像在 railscast 中一样。link_to 的使用仅作为跳过步骤的一种方式。

# excel - 突出显示内部没有特定字符（小写 az）的任何单元格

> ID：13457069
> 
> 赞同：5
> 
> 时间：2012-11-19T15:37:19.570
> 
> 标签：excel, vba, excel-formula

我有一些乱码（或者，不是乱码，而是非英文字符，例如带有斯堪的纳维亚口音的 A 等），我需要从大约 80,000 个条目中找出它们。

我可以编写一个公式来拾取和标记任何包含以下内容**的单元格吗？**

> abcdefghijklmnopqrstuvwxyz?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:40:17.813

以下对我有用：

```
Option Explicit
Sub NonAscii()
    Dim UsedCells   As Range, _
        TestCell    As Range, _
        Position    As Long, _
        StrLen      As Long, _
        CharCode    As Long

    Set UsedCells = ActiveSheet.Range("A1:A4271").CurrentRegion
    For Each TestCell In UsedCells
        StrLen = Len(TestCell.Value)
        For Position = 1 To StrLen
            CharCode = Asc(Mid(TestCell, Position, 1))
            If CharCode < 97 Or CharCode > 122 Then
                TestCell.Interior.ColorIndex = 36
                Exit For
            End If
        Next Position
    Next TestCell
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:07:44.280

我对此的微小解决方案是使用 RegExp：

```
Public Function demo(ByRef rngTarget As Range) As Boolean
  Dim objRE As Object
  Set objRE = CreateObject("vbscript.regexp")
  With objRE
    .Pattern = "[^a-z]"
    .Global = True

    'test will resolve true on any character other than a-z
    demo = .Test(rngTarget.Value)
  End With
  Set objRE = nothing
End Function 
```

将此代码放入模块中，然后将其用作要测试的单元格的条件格式的公式。

公式看起来很简单：`=demo(A1)`

如果您需要更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic6)

您当然可以使用 VBA 来测试所有使用过的单元格：

```
'This code needs to be placed as a worksheet macro, 
'or a worksheet needs to be specified for UsedRange
Public Sub TestAll()
  Dim rngCell as Range

  For Each rngCell In UsedRange.Cells
    if demo(rngCell) then
       rngCell.interior.color = RGB(125,125,125)
    end if
  Next rngCell
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T23:36:27.280

您可以使用`Conditional Formatting`它来原位突出显示单元格，而无需使用单独的公式测试每个单元格或`VBA`

此公式验证中的每个字符`A1`都是小写的 az

`SUMPRODUCT(--((CODE(MID(A1,ROW(INDIRECT("1:"&LEN(A1))),1))>=97)),--(CODE(MID(A1,ROW(INDIRECT("1:"&LEN(A1))),1))<=122))<>LEN(A1)`

![在此处输入图像描述](../Images/5109d3245a121d4360af9e8f94fa52a6.png)

# web-services - 标准-服务器到服务器-和-浏览器到服务器-身份验证方法

> ID：13457070
> 
> 赞同：1
> 
> 时间：2012-11-19T15:37:25.627
> 
> 标签：web-services, rest, authentication, web-applications, resources

我有一些资源的服务器；到目前为止，所有这些资源都是由人类用户通过浏览器请求的，并且使用用户名/密码方法进行身份验证，该方法生成带有令牌的 cookie（以使会话打开一段时间）。

现在系统要求其他服务器向该资源服务器发出 GET 请求，但它们必须进行身份验证才能获取它们。我们一直在使用授权 IP 列表，但是有两种身份验证方法会使代码更加复杂。

我的问题是：

*   是否有任何标准方法或模式可以使用相同的代码对人类用户和服务器进行身份验证？

*   如果没有，我现在使用的方法是正确的，还是有更好/更标准的方法来完成我需要的？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:42:13.533

我之前在我的 Web 服务中使用了[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)和 cookie 的组合。在基本身份验证中，您传递在 HTTP 标头中编码的用户名/密码，它看起来像这样。

```
Authorization: Basic QWxhZGluOnNlc2FtIG9wZW4= 
```

单词“Basic”后面的字符串是用冒号分隔的编码用户名和密码。REST API 可以从 HTTP 标头中获取此信息并执行身份验证和授权。如果身份验证失败，我会返回 HTTP Unauthorized 错误，如果他们已通过身份验证但未经授权，我会返回 HTTP Forbidden 错误，以区分身份验证失败与授权失败。如果它是 Web 客户端并且此人已通过身份验证，那么我会在 HTTP 标头中通过请求传递以下内容。

```
Authorization: Cookie 
```

这告诉 Web 服务从 HTTP 请求中获取 cookie 并将其用于授权，而不是重新进行身份验证过程。

这将允许非 Web 浏览器的客户端使用相同的技术。客户端始终可以对每个请求使用基本身份验证，或者他们可以对初始请求使用基本身份验证，然后维护 cookie。此技术也适用于您没有单独登录页面的[单页应用程序 (SPA) 。](http://en.wikipedia.org/wiki/Single-page_application)

注意：对用户名和密码进行编码安全性不够；您仍然想使用 HTTPS/SSL 来保护通信通道。

# animated-gif - gif 中的生命游戏

> ID：13457071
> 
> 赞同：4
> 
> 时间：2012-11-19T15:37:27.153
> 
> 标签：animated-gif, conways-game-of-life

过几天我有话要说。我必须提到细胞原子。我想在幻灯片中展示一个小 gif，其中显示了元胞自动机的进化，所以我的问题是：如何将用 golly game of life 创建的模式和进化转换为动画 gif？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-20T21:03:44.850

ubuntu 上的 Golly 2.3 附带了一个很好的 Perl 脚本，特别是用于制作 gif。您可以通过点击左侧面板上的显示/隐藏脚本按钮来访问脚本。该脚本称为“giffer”，您只需进行选择、启动脚本，然后填写请求的参数即可使用它。

砰！天才。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T15:44:43.270

您可以对动画进行多张截图，然后将其作为序列导入 After Effects，然后导出为动画 gif。

# go - Go 如何在 G-WAN 上运行？

> ID：13457086
> 
> 赞同：2
> 
> 时间：2012-11-19T15:37:57.560
> 
> 标签：go, g-wan

我读到[G-WAN 支持 Go](http://gwan.ch/en_timeline.html)。据我所知，Go 只能生成静态链接的可执行文件。那么 Go 如何通过 CGI/FastCGI 在 G-WAN 上工作？还是简单地使用标准输入上的原始请求调用可执行文件？

我希望能够对 Go 进行编程并利用 G-WAN 的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:14:32.663

GO 有自己的*运行时*，它使用*分段堆栈*并引入了*goroutines*，因此 C 程序不能（轻松）嵌入 GO，就像可以从 C 中使用 C++、C-Sharp、Java 那样。这是可能的，但有很多陷阱会必须解决。

因此，对于 GO，G-WAN 已使用`CGI`，如果您有许多 CPU 内核（今天使用 6-CPU 内核上的新版 GO[重新测试），它会非常有效。](http://gwan.com/benchmark/babel.html)

已经采取了其他预防措施来防止长 GO servlet 在构建 GO 回复时阻止 G-WAN 处理其他请求，但其余的非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:00:53.457

3.10 版将支持 GO 检查此链接。

[G-WAN 支持的语言](http://gwan.ch/faq#language)

但是 3.10 还没有发布。检查 Google Go 部分以获取所需的库，也许您会对它的支持方式有更好的了解。

# javascript - 无序列表中对应产品的悬停状态

> ID：13457089
> 
> 赞同：0
> 
> 时间：2012-11-19T15:38:08.133
> 
> 标签：javascript, jquery, html, css, onmouseover

我在无序列表和单独的列表项中工作。该菜单由顶部列表项中的产品图像和下面列表项中的相应产品名称组成。我在底部列表项（产品名称）上有一个悬停状态。当悬停在顶部列表项（产品图像）上时，我希望使相同的悬停状态处于活动状态。因此，当我将鼠标悬停在 /images/foo.png 上时，单独列表项中下面的链接将变为 #ffffff。下面是我正在使用的代码。这是一个非常大的菜单的一个小样本。

```
<ul>
<li><a href="/products/">SPOUTS</a>
    <ul>
        <li class="menuheader"><a href="/products/spouts/index/">SPOUTS</a></li>
            <li>
                <a href="/products/spouts/foo/"><img src="/images/foo.png" style="margin:20px 0px 0px 20px;float:left;" /></a>
                <a href="/products/spouts/bar/"><img src="/images/bar.png" style="margin:20px 20px 0px 5px;float:left;" /></a>
                </li>
            <li style="margin-top:10px;">
                <a href="/products/spouts/foo/" style="float:left;margin-left:50px;">FOO</a> 
                <a href="/products/spouts/bar/" style="float:left;margin-left:60px;">BAR</a>
                </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:45:14.637

这可以通过 jQuery 来实现。像这样的东西：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
     $(".YOUR_IMAGE").mouseenter(function (event) {
          $(".YOUR_LINK").addClass('hoverState');
     });

     $(".YOUR_IMAGE").mouseleave(function (event) {
          $(".YOUR_LINK").removeClass('hoverState');
     });
});
</script> 
```

# php - ZF + Doctrine - 自己的模型文件夹本地化

> ID：13457096
> 
> 赞同：1
> 
> 时间：2012-11-19T15:38:28.757
> 
> 标签：php, doctrine-orm, zend-framework2

我开始开发新的应用程序，这是我第一个用 ZF2 编写的应用程序。我有一些使用 ZF1 和 Doctrine1 进行应用程序的经验，但现在我想使用 ZF2 和 Doctrine2 进行应用程序。默认实体文件夹位于模块目录中。我想要一个模型文件夹，它在整个应用程序中共享。所以我准备了这样的应用程序结构：

```
config
models
 generated
module
 Administration
 Application
public
vendor 
```

我设计了数据库（MySQL）并将其导入 XML 表单，使用 Doctrine CLI。我还生成了模型。但现在我遇到了问题 - 如何在我的模块中使用它？我准备了一些代码：

```
protected $em;

public function setEntityManager(EntityManager $em)
{
    $this->em = $em;
}

public function getEntityManager()
{
    if (null === $this->em) {
        $this->em = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
    }
    return $this->em;
}

public function indexAction()
{
    return new ViewModel(array(
        'carriers' => $this->getEntityManager()->getRepository('Carrier')->findAll()
    ));
} 
```

而且我有一个错误“找不到类运营商”。这是路径的问题，但我是 ZF2 的新手，我不知道如何配置它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:48:06.137

您在配置中定义 Doctrine 2 实体的路径。现在我假设你有一个类似于这个的配置：

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
) 
```

基本上你要做的是正确映射路径。您可以在其中`orm_defaults`单独定义每个模块的驱动程序，或者只使用全局驱动程序。

在`__NAMESPACE__ . '_driver'`您内部定义具有给定名称的驱动程序，并定义实体的确切存储位置。在您的情况下，这可能类似于

```
'paths' => array(__DIR__ . '/../src/Administration/Entity') 
```

或者无论您的模块被命名为您的实体存储位置。在这种情况下`Administration`

此外，始终分配完全限定的存储库名称，如下所示：

```
->getRepository('NAMESPACE\Entity\Carrier') 
```

# php - 添加分页是 WordPress 上的自定义档案页面（论文主题）

> ID：13457098
> 
> 赞同：2
> 
> 时间：2012-11-19T15:38:31.313
> 
> 标签：php, wordpress, pagination, wordpress-thesis-theme

我在页面上使用以下 php 代码来显示来自单个类别的每页 10 个帖子。

```
function my_page_of_posts5() {
    if (is_page('10')) {
        $custom_loop = new WP_Query('posts_per_page=10&cat=9');
        echo '<div class="my-archives"><ul class="archive-list">';
        if ( $custom_loop->have_posts() ) : 
            while ( $custom_loop->have_posts() ) : $custom_loop->the_post();
                echo '<li><a class="archive-link" href="' 
                    . get_permalink() . '">' 
                    . get_the_title() 
                    . '</a> <span class="my-comment-count">( ';
                comments_number('0', '1', '%');
                echo ' )</span></li>';
                the_excerpt();
            endwhile;
            wp_reset_query();
        endif;
        echo '</ul></div>';
    }
}
add_action('thesis_hook_after_content','my_page_of_posts5'); 
```

我正在使用论文 WordPress 主题框架。

我想在页面上的这些帖子之后显示分页。

我应该放什么代码来显示分页？

我试过使用 WP-Paginate 插件并将 wp-paginate(); 页面上的功能，但它不能正常工作。

需要另一种方法来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:49:56.743

在不了解更多有关您尝试使用时查询的确切行为的信息的情况下`wp_paginate`，我可以建议的最好的方法是添加`'paged=' . get_query_var( 'paged' )`到您的`WP_Query`参数中，commeça：

```
$custom_loop = new WP_Query('posts_per_page=10&cat=9&paged=' . get_query_var( 'paged' )); 
```

添加后， wp_paginate 可能对您有用。

试一试！

**更新**

好的，从头开始：

1.  声明并获取`paged`查询变量
2.  将其用作查询中的参数
3.  打电话`posts_nav_link`获得必要的导航

你的整个片段应该像这样工作：

```
function my_page_of_posts5() {
    if (is_page('10')) {
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; // what page? if none, one
        $custom_loop = new WP_Query('posts_per_page=10&cat=9&paged=' . $paged);
        echo '<div class="my-archives"><ul class="archive-list">';
        if ( $custom_loop->have_posts() ) : while ( $custom_loop->have_posts() ) : $custom_loop->the_post();
            echo '<li><a class="archive-link" href="' . get_permalink() . '">' . get_the_title() . '</a> <span class="my-comment-count">( ';
            comments_number('0', '1', '%');
            echo ' )</span></li>';
            the_excerpt();
            endwhile;
            wp_reset_query();
        endif;
    echo '</ul></div>';
    posts_nav_link(); // your next and previous links
    }
}
add_action('thesis_hook_after_content','my_page_of_posts5'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:27:55.983

尝试使用此代码，将其替换为您现在拥有的代码。
它添加了我一直使用的分页功能，不需要额外的插件。易于定制。

```
<?php
function my_page_of_posts5() {
    if (is_page('10')) {
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; // what page? if none, one
        $custom_loop = new WP_Query('posts_per_page=10&cat=9&paged=' . $paged);
        echo '<div class="my-archives"><ul class="archive-list">';
        if ( $custom_loop->have_posts() ) : while ( $custom_loop->have_posts() ) : $custom_loop->the_post();
            echo '<li><a class="archive-link" href="' . get_permalink() . '">' . get_the_title() . '</a> <span class="my-comment-count">( ';
            comments_number('0', '1', '%');
            echo ' )</span></li>';
            the_excerpt();
            endwhile;
            wp_reset_query();
        endif;
    echo '</ul></div>';
    theme_pagination();
    }
}
add_action('thesis_hook_after_content','my_page_of_posts5');

// based on http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin
function theme_pagination($pages = '', $range = 2) {
    $showitems = ($range * 2)+1;

    global $paged;
    if(empty($paged)) $paged = 1;

    if($pages == '') {
        global $wp_query;
        $pages = $wp_query->max_num_pages;
        if(!$pages) {
            $pages = 1;
        }
    }

    if(1 != $pages) {
        echo '<div class="pagination">';
        //if($paged > 1 && $showitems < $pages)
            echo '<a href="'.get_pagenum_link($paged - 1).'" class="previous" >';
            echo _x('previous', 'paginate', THEME_L10n);
            echo '<span>previouw-arrow</span></a>';

        for ($i=1; $i <= $pages; $i++) {
            if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems )) {
                if ($paged == $i){
                    echo '<span class="current number">'.$i.'</span>';
                } else {
                    echo '<a href="'.get_pagenum_link($i).'" class="inactive number" >'.$i.'</a>';
                }
            }
        }

        //if ($paged < $pages && $showitems < $pages)
        echo '<a href="'.get_pagenum_link($paged + 1).'" class="next" ><span>next-arrow</span>';
        echo _x('next', 'paginate', THEME_L10n);
        echo '</a>';
        echo "</div>\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T09:41:36.033

您可以尝试在示例中的代码末尾添加此分页代码：

```
//Set Blog Reading Settings to 10!
global $wp_query;
$big = 999999999; // need an unlikely integer
echo paginate_links( array( 'base'    => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
                            'format'  => '?paged=%#%',
                            'current' => max( 1, get_query_var( 'paged' ) ),
                            'total'   => $wp_query->max_num_pages,
                            'end_size'=> 1,
                            'mid_size'=> 5 ) ); 
```

该代码适用于普通免费主题的存档和类别页面，但您使用的不是免费的，也不是开源的，因此很难预测结果。

我认为应该删除帖子数量：

```
WP_Query('posts_per_page=10&cat=9')
// Just leave it like this:
WP_Query('cat=9') 
```

原因是 WP 中每页的帖子数是在阅读设置中配置的。在查询中放置一个数量可能会阻止分页。不用说，分页必须有10多个帖子才能工作。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:14:23.647

**有两种可能的解决方案：**

（一世）。***解决方案#1：***

我希望你会认为[wp-pagenavi](http://wordpress.org/extend/plugins/wp-pagenavi/)是这里最好的解决方案。而且很容易将其集成到论文主题中。作为论文主题用户，您已经在使用论文[openhook](http://wordpress.org/extend/plugins/thesis-openhook/)插件。

现在只需按照步骤在论文主题中添加**pagenavi 。**

*   打开**外观**>**论文 Openhook**。
*   **在内容之后**查找。
*   只需将代码粘贴到框中。`<?php cr_pagenavi(); ?>`
*   勾选**Execute PHP on this hook**并点击保存。

(二)。***解决方案#2：***

**1.**首先我安装了一个插件，它是[简单分页](http://wordpress.org/extend/plugins/simple-pagination/)（它的字面意思是简单易用）。如果您正在使用论文，请将此代码复制并粘贴到 thesis_hook_after_content 中并点击保存。

```
<div class="pagination">
<?php wp_simple_pagination(); ?>
</div> 
```

**2.**转到您的 custom_functions.php 并粘贴此代码以删除上一篇和下一篇文章

```
function no_home_post_nav() {
if (is_home())
  remove_action('thesis_hook_after_content', 'thesis_post_navigation');
}
add_action('thesis_hook_before_content','no_home_post_nav'); 
```

**3.**在您的主页上查看您的新分页并将其自定义为您想要的任何样式。

# jquery - jQuery 全局变量

> ID：13457099
> 
> 赞同：2
> 
> 时间：2012-11-19T15:38:33.140
> 
> 标签：jquery, var

我希望页脚位于初始位置的窗口下方以及调整窗口大小时。我需要在函数内部和外部声明 var 以使其工作。可以吗，或者有更好的方法吗？

```
$(function(){

    // initial position:    
    var docHeight = $(window).height();
    $('#footer').css('margin-top', docHeight + 'px');

    // position when I resize the window:
    $(window).resize(function() { 
    var docHeight = $(window).height();
        $('#footer').css('margin-top', docHeight + 'px');
    });

}) 
```

我这里有代码可以玩：http: [//jsfiddle.net/dWpp5/](http://jsfiddle.net/dWpp5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:00:27.453

JavaScript 具有“函数范围”。所以就像你说的，如果你用“var”关键字定义一个变量，它就会成为它内部的任何功能块的本地变量。该功能之外的任何东西都看不到它。

但是，如果您不使用“var”来定义变量或使用“var”但在函数之外 - 它是任何函数或表达式都可以访问的全局变量。

函数作用域的一个很酷的地方是，虽然在该函数之外注意可以看到变量 - 在父函数内部执行或定义的任何函数都可以。

漏洞很深 - 如果您在函数中使用变量，并且函数没有看到它在自身内部定义，它会转到其父级以查看它是否在那里定义。如果它没有找到定义 - 它会转到其父级的父级 - 依此类推，直到到达全局范围 - 如果在全局范围内找不到定义，则在全局范围内声明变量.

[这是一篇关于范围界定的 Smashing Magazine 文章。](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:49:59.403

这同样有效：

```
$(function(){

    // initial position:    
    // this is a variable local to the doc ready function
    var docHeight = $(window).height();
    $('#footer').css('margin-top', docHeight + 'px');

    // position when I resize the window:
    $(window).resize(function() { 
        // since this function is contained within the outer function, 
        // the docHeight local from the outer scope is accessible here.
        $('#footer').css('margin-top', docHeight + 'px');
    });
})

// Here, however, docHeight is NOT accessible. 
```

# c++ - TCP数据包通常会重新排序吗？

> ID：13457100
> 
> 赞同：3
> 
> 时间：2012-11-19T15:38:34.200
> 
> 标签：c++, tcp, boost-asio, packet-sniffers, packets

我正在重新实现一个旧的网络层库，但这次使用的是 boost asio。我们的软件是与第 3 方软件进行 tcpip 对话。有几条消息在双方都表现得很好，但有一种情况我误解了：

第 3 方一个接一个地发送两条消息（消息 A 和 B）（真正的短时间），但我在 tcp-packet 1 中只收到消息 A 的一部分，消息 A 的结尾和整个消息 B 在 tcp-数据包2。（我用wireshark嗅探）。

我没有想到这种情况，我想知道它是否与 tcp 通用，以及我的层是否应该适应这种情况 - 或者我应该告诉第 3 方检查他们在他们这边做了什么，以便我收到两者不同数据包中的消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:42:09.513

是的，这很常见。TCP/IP 是一种流式传输协议，您的“逻辑”数据包可能会拆分为许多“物理”数据包，因此客户端负责组装更高级别的数据包。此外，TCP/IP 保证正确排序，因此您不必担心组装乱序数据包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:43:16.570

数据包可能会被分段并无序到达。接收它们的 TCP 堆栈应在将数据作为传入流呈现给应用层之前对它们进行缓冲和重新排序。

> 我的问题是消息 B，我看不到，因为它在同一数据包中的消息一结束之后。

您不能依赖与“数据包”一对一映射的“消息”：对于应用程序，TCP（不是 UDP）看起来像一个“流”协议。

通过 TCP 发送的应用程序需要另一种方式来分隔消息。有时这是通过标记每条消息的结尾来完成的。例如[SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#SMTP_transport_example)将消息结束标记如下：

> 邮件消息正文的传输由 DATA 命令启动，然后逐行逐字传输，并以数据结束序列终止。该序列由一个换行符 ()、一个句号（句点）和另一个换行符组成。由于消息正文可以包含仅包含句点的行作为文本的一部分，因此客户端每次以句点开头的行发送两个句点；相应地，服务器将一行开头的两个句点的每个序列替换为一个句点。这种转义方法称为点填充。

或者，协议可能会在每条消息的开头指定一个前缀，这将指示消息长度（以字节为单位）。

如果您正在编写 TCP 堆栈，那么您将可以访问[TCP 消息头](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure)：“数据偏移量”字段告诉您每条消息的长度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T20:37:02.180

您的问题与 TCP 完全无关。您的问题是您希望 asio 为您进行消息解析。它没有，你必须实施它。

*   如果您的消息大小都相同，请针对该大小执行异步读取。
*   如果它们的长度不同，请针对您的标头大小进行异步读取，分析标头并根据标头对消息的其余部分进行异步读取。
*   if your messages are of variable length and the size is unknown but there is a defined end character or sequence then you have to save the remaining bytes behind that end sequence and append the next read to that remainder.

# c++ - 链接 mysql_library_end()

> ID：13457102
> 
> 赞同：1
> 
> 时间：2012-11-19T15:38:41.360
> 
> 标签：c++, mysql

我一直在尝试解决我的 C++ 应用程序中的严重内存泄漏问题。我已将其范围缩小到 MySQL 连接的创建，并且 mysqlpp 文档（加上大量谷歌搜索）表明我需要调用 mysql_library_end() 来告诉 C API 自行清理。

当我尝试使用此函数时，Visual Studio 会为“mysql_library_end()”引发链接错误。很公平，我没有告诉它在哪里看。

当我包含头文件 mysql.h 并重新构建时，Visual Studio 会为“ **mysql_server_end()** ”抛出一个链接错误。我检查了 mysql.h （在我的构建环境中），我想使用的函数的唯一引用（ mysql_library_end() ）是：

```
#define mysql_library_end mysql_server_end 
```

文件中有 mysql_server_end() 的函数声明，但 Visual Studio 似乎看不到它。我只是被这个链接器错误困住了，我不知道它为什么会发生。

任何人都可以帮忙吗？

干杯，亚当。

**编辑**

我正在使用 Visual Studio 2005。来自 IDE 的错误消息是：

错误 6 错误 LNK2019：未解析的外部符号 _mysql_server_end@0 在函数“public: __thiscall CConnectionParams::~CConnectionParams(void)”(??1CConnectionParams@@QAE@XZ) CConnectionParams.obj 中引用

其中 CConnectionParams 是调用 mysql_library_end() 的 .cpp 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:42:07.843

找到了解决方案。仅靠自己的头文件是不够的，需要链接整个库。有两个库可用于连接 MySQL C API：libmysql.lib 和 mysqlclient.lib。一种是静态的，一种是动态的。对我有用的是 libmysql.lib。请注意，因此我不需要#include mysql.h。

要在 Visual Studio 中链接此库，您只需将其作为项目依赖项的一部分包含在内。我将它从它的目录 mysql install 拖到解决方案树中，但这不是一个非常优雅的方法，因为它仅适用于 VS 而不适用于其他构建环境。

# ant - 如何在 Ant 中获取环境变量 ProgramFiles(x86)

> ID：13457105
> 
> 赞同：6
> 
> 时间：2012-11-19T15:38:44.007
> 
> 标签：ant, environment-variables, program-files

我可以`%ProgramFiles%`通过`${env.PROGRAMFILES}`. 但我不知道如何获得`%ProgramFiles(x86)%`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:35:19.953

使用`${env.ProgramFiles(x86)}`. 该变量以与 env.PROGRAMFILES 不一致的方式区分大小写。

```
[echo] env.ProgramFiles(x86) == C:\Program Files (x86)
[echo] env.PROGRAMFILES(x86) == ${env.PROGRAMFILES(x86)}
[echo] env.ProgramFiles      == ${env.ProgramFiles}
[echo] env.PROGRAMFILES      == C:\Program Files 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:52:52.133

你试过`${env.PROGRAMFILES(x86)}`吗？（查看[如何获取程序文件 x86 环境变量？](https://stackoverflow.com/questions/9594066/how-to-get-program-files-x86-env-variable)）

抱歉，我没有一台 Windows 机器来测试这个。

如果这不起作用，我建议在您的构建中添加以下属性任务：

```
<property environment="env"/> 
```

并在调试模式下运行 ANT 以查看设置的值：

```
 ant -d 
```

# android - 横向模式没有被调用并改变方向

> ID：13457107
> 
> 赞同：0
> 
> 时间：2012-11-19T15:38:46.037
> 
> 标签：android, android-layout

我创建了一个活动，它有两个布局定义一个 in`layout-port`和另一个 in `layout-land`。到目前为止，它们工作正常。

但问题是我不希望`onCreate`在方向改变时再次调用它。所以为了防止我 `android:configChanges="orientation"`在 Manifest 文件中指定了属性并在活动中使用以下代码

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);

    } 
```

现在，当我在真实设备上运行应用程序并更改方向时，我可以看到 android 仅使用纵向布局，即使我倾斜设备而不更改活动状态。

所以基本上`onCreate`没有得到我想要的调用，但是当设备倾斜时设备没有使用横向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:52:28.993

将 android:configChanges="orientation|screenSize" 添加到清单中的活动。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.orientationchange"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"            
            android:configChanges="orientation|screenSize">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>

import android.os.Bundle;
import android.app.Activity;
import android.content.res.Configuration;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        // Checks the orientation of the screen
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
            Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

# lotus-notes - 如何创建 Lotus 表单以输入数据并显示相同的信息（Lotus Designer）

> ID：13457114
> 
> 赞同：1
> 
> 时间：2012-11-19T15:39:41.030
> 
> 标签：lotus-notes, lotus-domino, lotus, lotusscript

对 Lotus 设计师来说非常新。

我正在尝试创建一个简单的表单，其中包含一个随时间更新的附加信息。我希望管理员用户能够在与查看信息的用户相同的表单界面上更新此信息。

看来我真的不明白如何让表单显示以前输入的信息。

我对数据库进行了 Ctrl+shift 视图并查看了所有以前的条目，但我似乎无法让表单显示这些信息以及允许我附加到它们。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:39:00.487

表单用于创建新文档或编辑现有文档。由于您说您可以看到以前的条目，因此您必须为每个条目创建一个新文档。

如果您想查看和修改现有文档的内容，您必须导航到该文档并打开它进行编辑。

如果您希望用户在创建新文档时查看所有先前文档的列表，您可以将嵌入视图添加到表单并使用它来显示先前文档中的数据。

如果您希望所有信息都在一个文档中，那么您需要停止创建新文档，只需选择现有文档，打开它进行编辑，进行更改，然后重新保存文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:50:28.753

查看在线 Domino Designer 帮助 - 例如有关设计表单的部分：http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/ H_ABOUT__FORMS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_ABOUT__FORMS.html)

# cookies - Nginx - 反向代理 - cookie

> ID：13457120
> 
> 赞同：1
> 
> 时间：2012-11-19T15:39:55.350
> 
> 标签：cookies, proxy, nginx

我愿意使用 Nginx 作为反向代理和负载均衡器。

我有 2 台服务器，有 2 个不同版本的应用程序。IE 如果用户在他的计算机上有 V1，他必须去服务器 1。如果他有 V2，服务器 2。

我使用一些 $_GET 参数将用户重定向到具有此代码的相应服务器（如果不是 V1，那么它是 V2）：

```
if ($args ~* V=1) {
    proxy_pass http://server1;
    break;
}
proxy_pass http://server2; 
```

这很好用。但是我遇到了一些 AMF 请求的问题（需要 Flash）：我无法设置 $_GET 参数或标头。所以我尝试使用 cookie，但似乎没有任何效果。

```
if ($http_cookie ~ 'V=1') {
    proxy_pass http://server1;
    break;
}
if ($cookie_VER ~ 'V=1'){
    proxy_pass http://server1;
    break;
} 
```

我不能使用 HttpMapModule 因为我还需要使用 $_GET 参数进行重定向...

有什么办法可以做我想做的事，还是我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T20:16:42.653

实际上，如果我对您的理解正确，您的第二个示例应该可以工作，但那里有一个小错误。如果您可以为应用程序 1 设置一个名为 V1 的 cookie，并为应用程序 2 设置另一个 cookie 为 V2，那么您可以使用该代码，如下所示：

```
if ($http_cookie ~* 'V1') {
    proxy_pass http://server1;
    break;
}
if ($http_cookie ~* 'V2'){
    proxy_pass http://server2;
    break;
} 
```

[请查看我关于反向代理设置](https://www.cevapsepeti.com/yazilar/how-to-setup-nginx-as-reverse-proxy-for-wordpress/)的 virtual.conf 配置指令的文章底部。

# php - 克隆对象在使用 PHP 脚本创建的 jquery 代码的页面上无法正常工作

> ID：13457121
> 
> 赞同：-2
> 
> 时间：2012-11-19T15:39:53.397
> 
> 标签：php, jquery

```
<li style="padding: 5px; width: 150px; overflow: hidden; float: left; height: 202px;">
    <div class="title"> <a href="/index.php?option=com_virtuemart&amp;view=productdetails&amp;virtuemart_product_id=68&amp;virtuemart_category_id=7">Castle Bounce House</a> </div>
    <div class="image"> <a href="/index.php?option=com_virtuemart&amp;view=productdetails&amp;virtuemart_product_id=68&amp;virtuemart_category_id=7"> <img height="100" width="130" border="0" src="http://newsite.domain.com/images/stories/virtuemart/product/resized/castle_themed_bo_4f844059227b89_90x90.jpg"></a> </div>
    $949.00
    <div class="addtocart">
        <div class="addtocart-area">
            <form action="index.php?option=com_virtuemart&amp;view=cart" class="product" method="post">
                <div class="addtocart-bar">
                    <label class="quantity_box" for="quantity68"> </label>
                    <span class="quantity-box">
                    <input type="text" value="1" name="quantity[]" class="quantity-input">
                    --&gt; </span> <span class="quantity-controls"> 
                    <!--<input type="button" class="quantity-controls quantity-plus" />
        <input type="button" class="quantity-controls quantity-minus" />--> 
                    </span> <span class="addtocart-button">
                    <input type="submit" value=" " class="addtocart-button" name="addtocart">
                    </span>
                    <div class="clear"></div>
                </div>
                <input type="hidden" value="Castle Bounce House" class="pname">
                <input type="hidden" value="com_virtuemart" name="option">
                <input type="hidden" value="cart" name="view">
                <noscript>
                &lt;input type="hidden" name="task" value="add" /&gt;
                </noscript>
                <input type="hidden" value="68" name="virtuemart_product_id[]">
                <input type="hidden" value="7" name="virtuemart_category_id[]">
            </form>
            <div class="clear"></div>
        </div>
    </div>
</li> 
```

我有这个'li'标签并且它正在正确克隆我已经匹配了每一行但是它们是原始对象和克隆对象中的提交按钮，当我通过原始对象提交我的页面时它工作正常。但是当我通过提交我的页面时克隆然后他们的功能不能正常工作谁能告诉我在jquery中克隆有什么问题。

这是我的克隆对象：

```
<li style="padding: 5px; width: 150px; overflow: hidden; float: left; height: 202px;">
    <div class="title"> <a href="/index.php?option=com_virtuemart&amp;view=productdetails&amp;virtuemart_product_id=68&amp;virtuemart_category_id=7">Castle Bounce House</a> </div>
    <div class="image"> <a href="/index.php?option=com_virtuemart&amp;view=productdetails&amp;virtuemart_product_id=68&amp;virtuemart_category_id=7"> <img height="100" width="130" border="0" src="http://newsite.domain.com/images/stories/virtuemart/product/resized/castle_themed_bo_4f844059227b89_90x90.jpg"></a> </div>
    $949.00
    <div class="addtocart">
        <div class="addtocart-area">
            <form action="index.php?option=com_virtuemart&amp;view=cart" class="product" method="post">
                <div class="addtocart-bar">
                    <label class="quantity_box" for="quantity68"> </label>
                    <span class="quantity-box">
                    <input type="text" value="1" name="quantity[]" class="quantity-input">
                    --&gt; </span> <span class="quantity-controls"> 
                    <!--<input type="button" class="quantity-controls quantity-plus" />
            <input type="button" class="quantity-controls quantity-minus" />--> 
                    </span> <span class="addtocart-button">
                    <input type="submit" value=" " class="addtocart-button" name="addtocart">
                    </span>
                    <div class="clear"></div>
                </div>
                <input type="hidden" value="Castle Bounce House" class="pname">
                <input type="hidden" value="com_virtuemart" name="option">
                <input type="hidden" value="cart" name="view">
                <noscript>
                &lt;input type="hidden" name="task" value="add" /&gt;
                </noscript>
                <input type="hidden" value="68" name="virtuemart_product_id[]">
                <input type="hidden" value="7" name="virtuemart_category_id[]">
            </form>
            <div class="clear"></div>
        </div>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:45:39.303

请记住，使用[`.clone(true)`](http://api.jquery.com/clone/)（参见“真实”？）HTML 代码**和**所有事件都被克隆。还要确保复制区域中没有 HTML id，因为只会找到最后一次出现的多个相同 id。

我对克隆的 HTML 字符串进行了一次硬搜索和替换以替换 id，然后将其插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:48:04.010

我有问题

```
$elem.clone().function1().function2().bla().bla(); 
```

尝试

```
var $elemToClone = $elem.clone(); 
```

和

```
$elemToClone.function1().function2().bla().bla(); 
```

后。

也分享js代码。

# objective-c - 全局字符串函数

> ID：13457123
> 
> 赞同：0
> 
> 时间：2012-11-19T15:40:01.067
> 
> 标签：objective-c, nsstring

我对 Obj-c 很陌生，我正在尝试弄清楚如何使用全局函数。我正在做一个小项目，我在其中与 PHP API 交谈，这设置了一个会话 cookie，我发现了如何获取 cookie 数据，现在我想通过制作一个 NSString 函数来使其更有效最新的cookie值...我很困惑...

我创建了一个 Globals 对象类，“Globals.h”和“Globals.m”。

我如何声明一个函数，然后从另一个文件访问它？

我现在拥有的，Globals.h

```
#import <Foundation/Foundation.h>
@interface Globals : NSObject

-(NSString*)GlobalString;

@end 
```

和 Globals.m：

```
#import "Globals.h"
@implementation Globals
-(NSString *)Globalstring
{
    return @"This is a global string!";
}
@end 
```

我知道我必须在要使用它的文件中#import Globals.h，但我看不到这个 NSString 函数。帮助？像我这样的初学者的提示和教程的好链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:44:16.790

在方法名称之前使用`-`使其成为实例方法。您可能需要一个类/静态方法，以便可以直接调用它`NSString`。使用 a`+`代替：

```
+(NSString*)GlobalString; 
```

并使用它：

```
NSString *foobar = [NSString GlobalString]; 
```

另请注意，Objective-C 方法通常`camelCase`不是`CapsCase`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:45:48.260

您需要声明一个 Globals 的实例，然后调用 GlobalString：

您可以将 GlobalString 设为类方法`+ (NSString *)GlobalString`或在 .c 文件中声明 C 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:48:09.947

您可以创建一个包含所有全局变量的全局对象。如果您这样做，请查看单例模式。通过这样做，如果您将 globalString`someString = [Globals globalString];`设计为类方法而不是实例方法，则可以获取它。

但是，您可以将应用程序委托用作全局字符的值和函数的容器。您始终可以通过以下方式访问您的委托

```
MyAppDelegate *myDelegate = (MyAppDelegate) [[UIApplication sharedApplication] delegate]; 
```

然后访问您的全局函数 - 现在是 MyAppDelegate 的一个方法：

```
returnValue = [myDelegate myGlobalFunction:theParameter]; 
```

# java - 如何从存储在数组列表中的对象中提取字段？

> ID：13457127
> 
> 赞同：1
> 
> 时间：2012-11-19T15:40:13.247
> 
> 标签：java, arraylist, setter, getter

我可以得到一些我可以挑选并研究它们如何工作的工作代码示例吗？具体来说，我需要弄清楚如何从列表中的 x 编号对象中获取地址字段？如何从列表中删除第 x 个对象？如何将对象 x 的价格字段设置为新值？

我了解***houseList.add***如何将数据放入附加到列表末尾的新对象中，但我不了解它的反面以及如何定位特定对象并对其进行操作。请展示一个有效的多类示例。谢谢！

创建 House 对象的类，它包含以下信息；

```
public House(int address, String street, double price, int rooms) {
    this.address = address;
    this.street = street;
    this.price = price;
    this.rooms = rooms;
} 
```

它有以下方法......

```
public void SetAddress (int address){
    setAddress(address);
}

private void setAddress (int address){
    this.address = address;
}

public int GetAddress (int address){
    address = getAddress(address);
    return address;
}

private int getAddress (int address){
    return address;
}

@Override
public String toString() {
    return address + " " + street + " " + price + " " + rooms;
} 
```

ETC...

在另一个类中，我声明了一个名为 houseList 的 House 对象列表，它是一个 ArrayList。

```
List<House> houseList;
houseList = new ArrayList(); 
```

并可以用数据填充它，

```
houseList.add(new House(this.address, this.street, this.price, this.rooms)); 
```

并遍历它...

```
 public void showHouses() {
    Iterator<House> itr = houseList.iterator();
    while (itr.hasNext()) {
        System.out.println(itr.next().toString());
    }
} 
```

到目前为止，我上面列出的 House 方法都没有发挥作用，除了已被覆盖的 toString 方法。我无法弄清楚的是如何为列表的第 x 个元素提取 this.street 或 this.price 。我可以使用 houseList.add(new House(this.address, this.street, this.price, this.rooms)); 将数据放入列表中
我可以看到我的数据在迭代时按预期存储。我有这些 setter 和 getter，但我不明白如何使用它们将这些项目拉出或放入。由于我使用了 houseList.add，我认为 add 的反面是 get，但没有找出正确的语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:42:17.020

`itr.next()`从列表中返回下一个可用的 House 对象。您需要调用该房屋对象的方法。

例子：

```
 while (itr.hasNext()) {

        House hs = itr.next();
        System.out.println(hs.getAddress(input));
        System.out.println(hs.toString());
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:50:04.703

**固定吸气剂**

首先，处理 getter/setter。以下吸气剂：

```
private int getAddress (int address){
    return address;
} 
```

应固定为如下所示：

```
private int getAddress() {
    return address;
} 
```

在您的代码中，您的`getAddress(int address)`方法有一个 int 参数，并直接返回该参数。它甚至不查看存储地址值的字段。

**遍历列表**

你可以重写这个：

```
public void showHouses() {
    Iterator<House> itr = houseList.iterator();
    while (itr.hasNext()) {
        System.out.println(itr.next().toString());
    }
} 
```

以更紧凑的方式，使用 Java-5 样式`for`循环，如下所示：

```
public void showHouses() {
    for (House house : houseList) {
        System.out.println(house);
        // or, say: System.out.println(house.getAddress());
    }
} 
```

或者像这样，如果你真的想使用迭代器：

```
public void showHouses() {
    Iterator<House> itr = houseList.iterator();
    while (itr.hasNext()) {
        House house = itr.next();
        System.out.println(house);
        // or, say: System.out.println(house.getAddress());
    }
} 
```

请注意，在上面的示例中，您通常需要小心`next()`每次迭代只调用一次。那就是：分配`itr.next()`给一个局部变量，并使用它，而不是`itr.next()`每次迭代多次调用。

第一种方式的优点是比较短；很明显，您所做的只是遍历集合，而不是以任何方式修改它（尽管您仍然可以修改它的值）。

第二种方式的优点是您可以`itr.remove()`在遍历（迭代）集合时调用以从集合中删除元素。

**第x家**

如果你需要第 x 家，你可以写：

```
int x = ...;
House h = houseList.get(x);
System.out.println(h);
// or: System.out.println(h.getAddress()); 
```

.

**编辑：**

这是您有时会在遍历列表的代码中看到的另一种模式：

```
for (Iterator<House> it = houseList.iterator(); it.hasNext();) {
    House house = it.next();
    // Blah, blah..
} 
```

这与上面基于迭代器的遍历具有相同的优点。但是，此版本将迭代器变量 ( ) 的范围限制为`it`循环体。在上面的版本中，迭代器变量的作用域是整个方法体。因此，更容易看出您从不在循环之外使用迭代器。

当您想在一个方法（或其他块）中执行多个基于迭代器的遍历时，将范围限制在循环体中也很有用。它还允许您为第二个循环重复使用相同的变量名（即使第二个循环迭代不同类型的集合）。

# spring - 如何使用@Autowired 测试服务类

> ID：13457128
> 
> 赞同：0
> 
> 时间：2012-11-19T15:40:14.663
> 
> 标签：spring, spring-mvc, junit, spring-test-mvc

我有一个服务类`MyService`，它被定义并在控制器中使用，如下所示：

```
public interface MyService {
  public String someMethod() 
}

@Service("myService")
public class MyServiceImpl implements MyService {
  public String someMethod() {
    return "something";
  }
}

@Controller 
public class MyController {
  @Autowired
  public MyService myService;

  @RequestMapping(value="/someurl", method=RequestMethod.GET)
  public String blah () {
    return myService.getsomeMethod();
  }
} 
```

我想为该方法编写一个测试用例`someMethod`，但是，以下方法不起作用。如何在实现类中连接？

```
public class MyServiceImplTest {
 @Autowired
 private MyService myService;

 @Test
 public void testSomeMethod() {
   assertEquals("something", myService.someMethod());
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:44:42.043

```
public class MyServiceImplTest {
    private MyService myService = new MyServiceImpl();

    @Test
    public void testSomeMethod() {
        assertEquals("something", myService.someMethod());
    }
} 
```

为什么要在测试中注入 bean 而不是自己创建实例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:55:46.707

试试这个：

```
@RunWith(SpringJUnit4ClassRunner.class)
 // specifies the Spring configuration to load for this test fixture
@ContextConfiguration("yourapplication-config.xml") 
```

另请参阅[Spring.IO 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#testcontext-support-classes)了解更多详细信息。

# jquery - jquery :contains() 匹配限制？

> ID：13457129
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:40:15.460
> 
> 标签：jquery, text, find, contains

```
$("div:contains(' 1434')").parent().addClass('date'); 
```

类被添加到所有 div。我知道，class/id 会有所帮助，但 html 是标签汤，我对此无能为力。有没有办法将匹配限制为**直接包含文本的元素**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:52:07.450

您可以使用`has`来获取父元素，并`not`获取最里面的元素：

```
var d = $('div:contains(" 1434")');
var p = d.has(d);
d.not(p).parent().addClass('border'); 
```

演示：http: [//jsfiddle.net/Guffa/JFHjG/](http://jsfiddle.net/Guffa/JFHjG/)

# sql-server - SQL Server CTE 隐式列数据类型问题

> ID：13457130
> 
> 赞同：4
> 
> 时间：2012-11-19T15:40:19.360
> 
> 标签：sql-server, common-table-expression

我在使用 SQL Server 公用表表达式 (CTE) 时遇到了一个非常奇怪的错误。

我认为通过给出代码示例来解释我的问题是最容易的。

```
CREATE TABLE #Test1 (TestCol varchar(3));

INSERT INTO #Test1 VALUES ('012')
INSERT INTO #Test1 VALUES ('ABC')

--This simple shows the Cast works as expected, and only on rows where the TestCol value is numeric
SELECT TestCol, CAST(TestCol as int) as IntCast 
FROM #Test1 
WHERE ISNUMERIC(TestCol) = 1;

--Here I create a cte using the same SQL as show above.
with cte as (
    SELECT 
       TestCol, CAST(TestCol as int) as IntCast 
    FROM #Test1 
    WHERE ISNUMERIC(TestCol) = 1
)

/*
I have two examples below. The first can be executed to check for the existence of our 'ABC' value.  It doesn't show up, which is expected. 
The Second example, simple checks to see if our IntCast column is greater than 10\.  This throws an exception
*/

--SELECT * FROM cte
SELECT * FROM cte WHERE IntCast > 10

DROP TABLE #Test1 
```

这里的例外是

> *将 varchar 值“ABC”转换为数据类型 int 时转换失败*

我很好奇这是在哪里发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:04:26.287

```
with cte as (
    SELECT TestCol, Case when ISNUMERIC(TestCol) = 1 then CAST(TestCol as int) else NULL end as IntCast FROM #Test1  
) 
```

# search - Sharepoint 搜索结果范围

> ID：13457134
> 
> 赞同：4
> 
> 时间：2012-11-19T15:40:35.473
> 
> 标签：search, sharepoint-2010, scope

目前我在我们的 Sharepoint 2010 服务器上设置了搜索。搜索在第一次尝试时工作正常，但是在一次搜索（也称为结果页面）之后，范围默认为“此站点：搜索”。

我想修改此页面上的范围选项，但我似乎找不到在哪里这样做？

我希望在我的结果页面和原始搜索页面上显示相同的范围。总之，问题是搜索被设置为一个单独的站点，当显示结果页面时，唯一的范围选项是这个站点，它基本上没有内容。所以一个额外的好处是从页面中删除这个站点选项。

现在无论如何，搜索必须作为一个单独的站点。提前致谢。

**更新** 为了在结果页面中允许其他范围，您必须转到站点设置（以管理员身份）> 搜索设置 > 网站集搜索中心并启用自定义范围

我仍然需要知道如何默认所有站点或隐藏此站点搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T06:34:38.677

我也有类似的问题，为了解决去站点设置->搜索范围，然后单击显示组->下拉搜索

单击下拉搜索，打开一个表单，您可以在其中定义搜索范围，并在底部设置 defuat 搜索范围。希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:04:18.427

以下是我必须采取的步骤：

1.  我必须设置特定的搜索页面并编辑 Web 部件设置，以确保它们不“使用站点下拉模式”或“使用站点级别默认值”。
2.  将该 Web 部件的下拉模式设置为“显示，不包括上下文范围，默认为 's' URL 参数”。
3.  在杂项部分中，将目标搜索结果页面 url 设置为我的搜索中心的结果页面。就我而言，IE (/Search/Pages/results.aspx)。
4.  使用与上述步骤 2 相同的下拉模式将搜索框添加到结果页面。我建议导航到您的空结果页面，然后站点操作 > 编辑。正常添加 Web 部件。
5.  确保您已通过转到 (/_layouts/enhancedSearch.aspx ) 并将 url 设置为您的搜索中心 (/Search/Pages) 来完成上述步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:25:49.117

我在使用基本搜索站点模板时遇到了同样的问题，但在使用企业搜索站点模板时却没有，它允许我在搜索和结果页面上编辑 Web 部件以显示范围下拉列表。

要从范围列表中删除“此站点”，请编辑两个搜索框 Web 部件并选择“显示，不包括上下文范围”。

此外，您需要在网站集上启用发布基础结构功能，然后才能使用企业搜索网站模板创建搜索网站。

我还将搜索站点上的母版页更改为 minimum.master 以改进布局。

# android - 如果 Parse 云数据服务失败会怎样？

> ID：13457136
> 
> 赞同：8
> 
> 时间：2012-11-19T15:40:37.823
> 
> 标签：android, iphone, ios, rest, parse-platform

我正在考虑为我的 iOS/Android 移动应用程序使用[Parse云数据服务。](http://www.parse.com)

从我从[文档](https://www.parse.com/docs/ios_guide)中可以看出，我的应用程序将与 Parse SDK 高度耦合，而 Parse SDK 又使用 Parse [REST API](https://www.parse.com/docs/rest)（我假设）。

如果 Parse 已关闭或我不再想使用 Parse，可以采取哪些措施将应用程序重定向到另一个服务？

理想情况下，我想告诉 Parse SDK 使用我自己的域并将其重定向到 Parse 服务器（如何？）。如果 Parse 失败，我可以将我的 DNS 更改到其他地方并尝试复制 Parse REST API（如何？）。现在这可能吗？有没有更好的方法来为这种情况做准备？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-25T20:43:59.123

parse.com 现在似乎已关闭，我只是在网上随机搜索并找到了这篇文章。由于停电，我现在无法处理我的项目，我将为这个主题投入 2 美分。

首先，如果我的底层服务提供商出现故障，我绝对不高兴，无论是 parse.com、AWS、rackspace 还是其他什么。然而，这正是我们签署的折衷方案，作为回报，我们享受了开发的便利性，并将我们的开发周期从 1 年缩短到了几个月左右。

对于处于早期阶段的初创公司来说，花费太多时间和精力专注于在给定时间点不是最重要的问题是很危险的。就个人而言，只要我负担不起时间和资源来构建和维护我自己的数据库集群，我就不会担心 parse.com 会宕机。显然，这是假设 parse.com 在大多数情况下仍然会上升，比如 99.9% :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T21:57:40.163

Parse 支持和销售团队就此事与我取得了联系。不幸的是，他们选择不进行公开讨论，所以我将解释他们告诉我的内容。

*   目前无法更改 SDK 的服务器 url。他们不确定这是否是他们想要的功能。（需要注意的是，服务器 url 暴露在[JavaScript SDK](http://www.parsecdn.com/js/parse-1.1.11.min.js)中，可以轻松更改；搜索`api.parse.com`。）
*   使用[Cloud Code](https://parse.com/docs/cloud_code_guide)，您可以在 Parse 之上构建自己的服务器 API。Parse SDK 有一个[`PFCloud`](https://parse.com/docs/ios/api/Classes/PFCloud.html)可用于与 Cloud Code 对话的工具，但我在文档中找不到任何使用示例。这与 toadzki 的[回答](https://stackoverflow.com/a/13463533/143378)类似，但实现起来应该更简单。
*   他们还提供 Parse 的自定义服务器安装。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T10:33:46.723

采取相反的观点...

您的应用程序和公司有多大？如果你是一个孤独的游侠或一个正在开发中小型应用程序的小团体，答案很可能是“不要打扰”。是的，理论上您可以设置一个系统，以便您的应用程序（或某处的某些基础设施）重定向到不同的云服务，但是要做到这一点并且做得好，所花费的时间和精力是非常重要的。考虑一下，即使您认为您已经实现了这样的系统，您也必须测试它是否有效。这不是一个简单的任务。

镜像 Parse API 然后转发听起来很简单，但魔鬼在细节中。特别是对于这样的事情。

此外，添加您自己的转发服务器会增加一个故障点，这几乎肯定会成为链中最薄弱的环节。简而言之，不要打扰！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T07:33:12.807

作为 toadzky 解决方案的替代解决方案，您可以为设备上的所有解析方法创建一个接口，以便您可以轻松地`Parse sdk`使用自己的自定义实现切换。简而言之，为所有解析调用制作包装器。

也就是说，解析非常可靠，并且许多功能也可以在离线模式下工作。此外，您将获得可以以任何您认为合适的方式处理的错误响应。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T22:33:20.850

如果您想通过自己的服务器路由请求，请执行此操作。让您的服务器运行 Parse SDK，而不是设备。通过您自己的自定义 API 发出请求并重新打包请求并将其转发给 Parse。这样，如果您决定更改云提供商，您的应用程序仍然可以在没有更新的情况下运行。

# biztalk - BizTalk Map，防止循环循环

> ID：13457137
> 
> 赞同：0
> 
> 时间：2012-11-19T15:40:49.047
> 
> 标签：biztalk

在以下地图的源 XSD 中，InvTransTable 和 ToWarehouse 元素是无界的。

在每种情况下，我只想为第一次迭代映射值。我的问题是，映射生成的 XSLT 包含两个循环，如下所示：

```
<ns0:Record>
        <xsl:for-each select="s1:InvTransTable">
          <xsl:variable name="var:v4" select="position()" />
          <xsl:for-each select="s1:ToWarehouse">
            <xsl:variable name="var:v5" select="position()" />
            <xsl:variable name="var:v6" select="userCSharp:LogicalEq(string($var:v5) , &quot;1&quot;)" />
            <xsl:variable name="var:v7" select="userCSharp:LogicalEq(string($var:v4) , &quot;1&quot;)" />
            <xsl:variable name="var:v8" select="userCSharp:LogicalAnd(string($var:v6) , string($var:v7))" />
            <xsl:variable name="var:v12" select="userCSharp:StringUpperCase(&quot;B&quot;)" />
            <xsl:variable name="var:v13" select="userCSharp:StringUpperCase(&quot;M&quot;)" />
            <xsl:variable name="var:v14" select="userCSharp:StringUpperCase(&quot;4&quot;)" />
            <ns0:Header>
              <xsl:if test="string($var:v8)='true'">
                <xsl:variable name="var:v9" select="s1:EXDRefCustAccount/text()" />
                <ns0:AccountNo>
                  <xsl:value-of select="$var:v9" />
                </ns0:AccountNo>
              </xsl:if>
              <xsl:if test="string($var:v7)='true'">
                <xsl:variable name="var:v10" select="../s1:ShipDate/text()" />
                <ns0:DateExpected>
                  <xsl:value-of select="$var:v10" />
                </ns0:DateExpected>
              </xsl:if> 
```

这导致创建的 XML 包含多个标题元素，这不是我想要的！

我试图通过使用迭代（检查值 1）和条件 functoid 来防止这种情况发生，但这并没有奏效。谁能告诉我如何在不使用脚本函数或用 XSLT 替换地图的情况下实现所需的功能？

![在此处输入图像描述](../Images/1e3267897af8e11f8f8451e83f32b8e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:30:58.583

如果您知道只需要映射每个实例的第一个实例，请使用索引为 1 的 Index functoid，而不是 Iteration functoid。

# javascript - 确定（有意的）滑动方向

> ID：13457142
> 
> 赞同：0
> 
> 时间：2012-11-19T15:41:07.610
> 
> 标签：javascript, ios, mobile, responsive-design

我正在尝试确定用户使用移动设备在屏幕上滑动的方向。我看到每个人都在做传统的“起始位置 - 距离”，反之亦然。虽然我想知道故意的方向；IE。用户在中途改变方向。我发现的唯一正确的实现是[here](https://stackoverflow.com/questions/12930896/detect-swipe-direction-with-swipeview) & [here](http://tympanus.net/Development/FlipboardPageLayout/)。

滑动视图很好，但有点笨拙，cubiq 想让你使用他的页面系统。另一个演示也很好，但我可以说它只是使用一连串的 if else 来确定方向。那么有没有人知道一种可以轻量级的创造性方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:51:40.533

您需要一个保存指针最后位置值的变量。您需要第二个变量来保存滑动的方向。在 mousemove 上，从新位置和旧位置评估方向，更改滑动方向变量中的值，然后存储新位置。

# java - 按钮、JTextFields 和 JComboBox 是不可点击的

> ID：13457147
> 
> 赞同：0
> 
> 时间：2012-11-19T15:41:27.810
> 
> 标签：java, swing, jbutton, jtextfield

该程序由一个选项卡式视图组成，在前两个和 2 s 和第三个中带有几个`JTextField`s 和s。这些按钮在前两个选项卡中工作正常，但在第三个选项卡上它是不可点击的。我尝试将按钮更改为类似或的其他按钮，但这些按钮也是不可编辑且不可点击的。将and函数设置为 true 似乎不起作用。我不知道是怎么回事。`JButton``JTable``JButton``JComboBox``JTextField``setEnabled()``setEditable()`

我所做的唯一与正常情况不同的是，当我单击表格中的单元格时，这段代码会强制重新绘制选项卡。但即使这还没有被调用，我仍然不能

```
ContentIWantToRepaint.this.paintImmediately(ContentIWantToRepaint.this.getVisibleRect()); 
```

关于布局的一些其他信息：选项卡的内容保存在一个`JPanel`带有`GridBagLayout`

*   `JTextField`
*   表头
*   表格内容
*   `JTextField`
*   表头
*   表格内容
*   按钮

有什么建议么？

checkOutPanel.java

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.ScrollPaneConstants;
import javax.swing.table.DefaultTableModel;

public class checkOutPanel extends JPanel {
    private JTable userTable;
    private JTable bookTable;
    private JScrollPane scrollUserTable, scrollBookTable;
    private JLabel userLabel, bookLabel;
    private DefaultTableModel userTableModel = new DefaultTableModel(){
        public boolean isCellEditable(int row, int column){return false;}
    };
    private DefaultTableModel bookTableModel = new DefaultTableModel(){
        public boolean isCellEditable(int row, int column){return false;}
    };
    private int selectedUser, selectedBook;
    private JComboBox date_month, date_day, date_year;

    public checkOutPanel(){

        JPanel mainGrid = new JPanel();//panel that will hold all stuff in tab
        JPanel buttonPanel = new JPanel();//panel for holding buttons

        mainGrid.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        c.gridx=0; c.gridy=0; //first row first column
        c.anchor = GridBagConstraints.WEST;//align left
        c.fill = GridBagConstraints.HORIZONTAL;

        //1 row, 2 columns, 15 horizontal padding, 0 vertical padding
        //buttonPanel.setLayout(new GridLayout(1,2,15,0));

        //labels to describe what the user has to do
        userLabel = new JLabel("User :");
        bookLabel = new JLabel("Book :");
        JLabel dateLabel = new JLabel("Date :");
        JPanel datePanel = new JPanel();

        bookTable = new JTable(bookTableModel);
        bookTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        userTable = new JTable(userTableModel);
        userTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        Dimension d = new Dimension(500, 120);

        scrollBookTable = new JScrollPane(bookTable); 
        scrollBookTable.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS); 
        scrollBookTable.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS); 
        scrollBookTable.setMaximumSize(d);
        scrollBookTable.setMinimumSize(d);
        scrollBookTable.setPreferredSize(d);

        scrollUserTable = new JScrollPane(userTable); 
        scrollUserTable.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS); 
        scrollUserTable.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS); 
        scrollUserTable.setMaximumSize(d);
        scrollUserTable.setMinimumSize(d);
        scrollUserTable.setPreferredSize(d);

        updateTables();

        //String[] month = {"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"};       

        //Vector<Integer> days = new Vector<Integer>();
        //for (int i=1 ; i<=31 ; i++) { days.add(i); }

        //Vector<Integer> years = new Vector<Integer>();
        //for (int i=2012 ; i>=1900 ; i--) { years.add(i); }

        //date_month = new JComboBox(days);
        JButton testButton = new JButton("WORK!!!!!!!");
        //date_day = new JTextField(6);
        //date_year = new JTextField(6);

        //datePanel.add(dateLabel);
        //datePanel.add(date_month);
        //datePanel.add(date_day);
        //datePanel.add(date_year);

        mainGrid.add(userLabel, c);                     c.gridy++;
        mainGrid.add(userTable.getTableHeader(), c);    c.gridy++;
        mainGrid.add(scrollUserTable, c);               c.gridy++;
        c.insets = new Insets(15, 0, 0, 0);//put some padding between users and books
        mainGrid.add(bookLabel, c);                     c.gridy++;
        c.insets= new Insets(0,0,0,0);//back to no padding
        mainGrid.add(bookTable.getTableHeader(), c);    c.gridy++;
        mainGrid.add(scrollBookTable, c);               c.gridy++;
        c.insets = new Insets(15, 0, 0, 0);//put some padding between books and date

        mainGrid.add(testButton, c);                        c.gridy++;

        this.add(mainGrid);//add contents to tab

        userTable.addMouseListener(new mouseListener());
        bookTable.addMouseListener(new mouseListener());

    }

    public class mouseListener implements MouseListener{
        @Override
        public void mouseClicked(MouseEvent e) {}
        @Override
        public void mouseEntered(MouseEvent e) {}
        @Override
        public void mouseExited(MouseEvent e) {}
        @Override
        public void mousePressed(MouseEvent e) {}
        @Override
        public void mouseReleased(MouseEvent e) {
            if(e.getSource()==userTable){
                selectedUser=userTable.getSelectedRow();
                userLabel.setText("User :  "+ (selectedUser!=-1 ? selectedUser : ""));

                //don't know why i should need to use this, but it makes it work
                checkOutPanel.this.paintImmediately(checkOutPanel.this.getVisibleRect());

            }else if(e.getSource()==bookTable){
                selectedBook = bookTable.getSelectedRow();
                System.out.println("Date Month : "+date_month.getSelectedItem().toString());
                bookLabel.setText("Book :  "+ (selectedBook!=-1 ? selectedBook : ""));

                //don't know why i should need to use this, but it makes it work
                checkOutPanel.this.paintImmediately(checkOutPanel.this.getVisibleRect());

            }
        }
    }

    private void updateTables(){
        bookTableModel.setDataVector(fillBookData(SystemStart.getDbName()), fillBookColNames());
        userTableModel.setDataVector(fillUserData(SystemStart.getDbName()), fillUserColNames());
    }

    private Vector<String> fillUserColNames(){
        Vector<String> colNames = new Vector<String>();
        colNames.add("ID");
        colNames.add("First");
        colNames.add("Last");
        colNames.add("Phone");
        colNames.add("Email");
        colNames.add("Address");
        colNames.add("City");
        colNames.add("State");
        colNames.add("Zip");        
        return colNames;
    }
    private Vector<String> fillBookColNames(){
        Vector<String> colNames = new Vector<String>();
        colNames.add("Title");
        colNames.add("Format");
        colNames.add("Author");
        colNames.add("ISBN");
        colNames.add("Year Pub.");
        colNames.add("Publisher");
        colNames.add("Call #");
        colNames.add("Copy #");     
        return colNames;    
    }
    private Vector<Vector<String>> fillUserData(String dbName){
        Vector<Vector<String>> v = new Vector<Vector<String>>();
        Vector<String> u;
        for (int i=0; i<10; i++){
            u = new Vector<String>(9);
            u.add(""+i);
            u.add("First");
            u.add("Last");
            u.add("Phone");
            u.add("Email");
            u.add("Address");
            u.add("City");
            u.add("State");
            u.add("Zip");
            v.add(u);
        }
        return v;
    }

    private Vector<Vector<String>> fillBookData(String dbName) {
        Vector<Vector<String>> v = new Vector<Vector<String>>();
        Vector<String> b;
        for (int i=0; i<10; i++){//only include books that arent check out
            b = new Vector<String>(8);
            b.add("Title "+i);
            b.add("Format");
            b.add("Author");
            b.add("ISBN");
            b.add("Year Pub.");
            b.add("Publisher");
            b.add("Call #");
            b.add("Copy #");
            v.add(b);
        }
        return v;
    }
} 
```

使用此文件查看它是如何工作的：

```
import javax.swing.JFrame;

public class SystemStart{
    private static String dbName = "dbnamehere.db";

    public static void main(String[] args) {

        //new TabbedFrame("Libary System");
        JFrame jf = new JFrame("WORK!");
        jf.add(new checkOutPanel());
        jf.pack();
        jf.setVisible(true);
            jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static String getDbName(){return dbName;}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:47:42.817

您正在向面板添加标签，然后是表格的标题，然后是包含表格的滚动窗格（...和表格标题）。删除要添加到`mainGrid`表头的两行（您应该只添加滚动窗格）：

```
 mainGrid.add(userTable.getTableHeader(), c);    c.gridy++;
    mainGrid.add(bookTable.getTableHeader(), c);    c.gridy++; 
```

您的按钮现在可以工作了。

# tridion - 将 Tridion 事件从 TOM 升级到 TOM.NET

> ID：13457155
> 
> 赞同：3
> 
> 时间：2012-11-19T15:41:42.287
> 
> 标签：tridion

对于 TOM.NET 中的哪些类替换 Tridion 的旧 COM API 中的功能，是否有任何指导或文档？

我无法找到与 TDSE 对应的入口点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:30:56.947

与旧的 TDSE 最接近的类是`Session`该类，它公开了大多数（如果不是全部）“系统级”方法和属性（如 current `User`、`WorkflowManager`等）。

在事件系统中，您将获得一个会话作为主题的一部分——所有派生自`IdentifiableObject`公开`Session`属性的类——并且该会话将以导致事件被触发的用户身份运行。在 TOM/COM 时代，情况并非总是如此，而且您经常不得不调用`.Impersonate`代码来充当当前用户。使用 TOM.NET，这不再需要，只要您使用正确的会话。

祝您升级顺利，新的事件系统引擎与旧引擎截然不同，真的没有回头路了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:52:20.583

TDSE 对象在 TOM.NET 中并不真正存在。您拥有的最接近的对象是 Session 类，尽管您可能不需要它，因为您将收到目标对象作为处理程序的主题参数。尝试阅读 Bart 的这篇文章：

[https://sdltridionworld.com/articles/sdltridion2011/sdltridion2011eventsystem.aspx](https://sdltridionworld.com/articles/sdltridion2011/sdltridion2011eventsystem.aspx)

这篇文章很好地概述了事件处理程序的设置，以及一个矩阵文档的链接，将旧的基于 COM 驱动的基于 TOM 的事件系统映射到新的基于 TOM.NET 的事件处理程序的新方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:53:21.657

看看 Rob Curlette 关于执行升级到 2011 的帖子。它讨论了事件系统的升级： [http ://www.curlette.com/?p=90](http://www.curlette.com/?p=90)

Bart 还提供了一个将旧事件映射到新事件的表格： [http ://sdltridionworld.com/images/event_matrix_tcm89-18738.pdf](http://sdltridionworld.com/images/event_matrix_tcm89-18738.pdf)

希望这可以帮助您入门！

# iphone - iOS 触控图

> ID：13457156
> 
> 赞同：1
> 
> 时间：2012-11-19T15:41:44.483
> 
> 标签：iphone, objective-c, ios, graph

通过搜索，我发现了许多库来为 iPhone 创建一些图表。只想问是否有人曾经使用过最终用户可以触摸图形并对其进行编辑的库。例如，触摸条形图并使条形更高或更短并取回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:54:57.353

您应该能够使用[core plot](http://code.google.com/p/core-plot/)完成此操作。内置的触摸跟踪可以告诉您用户触摸的位置，从那里您只需更改该条的高度并重新加载图表。

# maps - 是否有关于如何使用来自 noaa.gov 的天气覆盖的文档？

> ID：13457159
> 
> 赞同：2
> 
> 时间：2012-11-19T15:41:50.063
> 
> 标签：maps, overlay, weather

我正在尝试在我的地图中添加天气叠加层，Noaa.gov 上的平铺图像是我想要的，但我找不到任何关于如何构建 url 以消耗和安排给定 lon/lat 的叠加层平铺的文档。下面是返回单个图块的示例 url。

[http://radarcache.srh.noaa.gov/tc/tc.py/1.0.0/ridge::NAT-N0Q-201211191510/8/62/97.png](http://radarcache.srh.noaa.gov/tc/tc.py/1.0.0/ridge::NAT-N0Q-201211191510/8/62/97.png)

**更新：** 我正在开发的网络服务为给定的经度/纬度尺寸和缩放级别生成截面航空图表/地图。我在生成的底图上渲染的叠加层之一是天气（雷达反射 ..），基于我拥有的信息（经度/纬度、尺寸和缩放级别）我想在我的底图上渲染天气叠加层. 我面临的挑战是如何使用 lon/lat 获得天气叠加层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T20:33:23.717

经过大量研究后，我发现 NOAA Tile System 使用[这种](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)Tile 排列，基于此，我能够获得给定（经度/纬度/缩放）的 PNG 图像叠加，如下所示

[http://ridgewms.srh.noaa.gov/tc/tc.py/1.0.0/ridge::NAT-N0Q-](http://ridgewms.srh.noaa.gov/tc/tc.py/1.0.0/ridge::NAT-N0Q-) {0:yyyyMMddHHmm}/{1}/{2}/{3}.png

在哪里

*   {0:yyyyMMddHHmm} = 以 5 分钟为增量的日期时间
*   {1} 缩放级别
*   {2} X 或平铺列
*   {3} Y 或平铺行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:23:44.870

如果没有更多关于你试图融入的信息，这就是我所知道的。如果您想创建自定义 KML 文件，[此页面](http://wdssii.nssl.noaa.gov/?r=products)将为您完成。有关其他图层的更多信息，请查看[此页面](http://nowcoast.noaa.gov/help/mapservices.shtml?name=mapservices)。

如果您提供有关您的环境的更多信息，我们可能会提供更多细节方面的帮助。

编辑：

对于透明的 GIF，请参阅此页面 [http://forecast.weather.gov/jetstream/doppler/ridge_download.htm](http://forecast.weather.gov/jetstream/doppler/ridge_download.htm)

这里有很多关于下载实际数据的信息[http://www.ncdc.noaa.gov/oa/radar/radardata.html](http://www.ncdc.noaa.gov/oa/radar/radardata.html)

# android - 读取图像文件

> ID：13457162
> 
> 赞同：2
> 
> 时间：2012-11-19T15:41:59.187
> 
> 标签：android, image

> **可能重复：**
> [使用 ContentProviderClient 与 ContentResolver 访问内容提供者](https://stackoverflow.com/questions/5084896/using-contentproviderclient-vs-contentresolver-to-access-content-provider)

我正在尝试读取图像文件，但是在调用我的活动时，我从查看器应用程序中获取了此参数：

```
content://media/external/images/media/5820 
```

我尝试使用`File`对象读取它，但路径无效。获取文件内容的正确方法是`byte[]`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:43:45.033

使用下面的代码打开uri

```
ContentResolver cr = mContext.getContentResolver();
InputStream is = cr.openInputStream("content://media/external/images/media/5820"); 
```

# matlab - 转换后的图像应始终可见

> ID：13457163
> 
> 赞同：1
> 
> 时间：2012-11-19T15:41:58.250
> 
> 标签：matlab, transformation, interpolation, affinetransform

我正在尝试使用双线性插值来转换图像，我的输入图像是`I`，我有我的仿射矩阵`[A]`，这将给我转换`I'`后的图像，根据双线性插值我取仿射矩阵的逆`inv([A])`并将其应用于每个点输出图像的大小（在初始级别全为零），因为我们不能保证输出图像大小可以是任何大小，所以首先我找到了边界，这样我就可以得到输出图像的大小，

现在我有输入图像、仿射矩阵和输出图像，它们至少具有可以轻松保存变换图像的大小，**但是** 如果我应用向后向后的翘曲方法，据此我必须遍历输出图像的每个像素（现在为零），我希望我的转换图像位于中心，所以我的转换图像应该始终可见，知道我该怎么做吗？

注意我不想使用 matlab 的内置函数。

**编辑** ![在此处输入图像描述](../Images/761a5e52fde8b9cd8726ff6be6a8eedf.png)

如果我转换了我的`A`图像，我得到了 B，但是你看到图像的一角被裁剪了，我希望这些也能显示出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:38:24.183

将矩形从直立位置旋转到对角位置时，最高点和最低点之间的垂直距离会增加。

现在您可以采取两种方法：

*   将新画面置于更大的环境中

或者

*   重新缩放旋转的图片以使其适合原始大小的环境。

# python - 从 shell 脚本到 python 的 image magick 命令兼容性

> ID：13457166
> 
> 赞同：0
> 
> 时间：2012-11-19T15:42:08.257
> 
> 标签：python, imagemagick, imagemagick-convert

我最初在 linux 环境中编写了所有用于在 shell 脚本中执行的图像魔术命令。但是现在由于要添加一些功能，我必须通过 python 来实现它。相同的命令是否兼容？如果不是，我该怎么做？

```
#!/bin/sh
for f in `ls *.png`
do
 montage -geometry +0+0 -background skyblue -font /usr/share/fonts/dejavu- lgc/DejaVuLGCSansCondensed-Oblique.ttf -label "$f" $f ./label_added/$f
done 
```

还有以下命令：

```
convert n255_n2.tif -gravity West -splice 0x18 -annotate +0+2 "x parameter" n255_n3.tif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:00:37.100

出色地。基本上在这个线程[这个线程](https://stackoverflow.com/questions/12204287/using-imagemagicks-convert-utility-as-a-python-subprocess)中有类似的解决方案。您需要在单独的进程中启动 imagemagick。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:01:35.270

尝试这个：

```
import glob
import subprocess

for f in glob.glob('*.png'):
    subprocess.call(['montage', '-geometry', '+0+0', 
                     '-background', 'skyblue',
                     '-font',
                     '/usr/share/fonts/dejavu-lgc/DejaVuLGCSansCondensed-Oblique.ttf',
                     '-label',
                     '"%s"' % f,  f, './label_added/%s' % f]) 
```

# url-rewriting - 在重定向中用域名替换 ip 地址

> ID：13457172
> 
> 赞同：2
> 
> 时间：2012-11-19T15:42:13.477
> 
> 标签：url-rewriting, iis-7.5, ip-address, domain-name

我有一个带有 IIS 7.5 的 Windows Server 2008 R2 虚拟机，它托管一个 ASP.NET MVC4 网站。WinServer 有一个公共 IP 地址。我还购买了一个域名。域名托管公司将请求转发到我的服务器。
例如，当客户键入 www.mycompany.com 时，请求被重定向到 217.151.XXX.XXX，这是我服务器的公共 IP 地址。

当客户被重定向到我的服务器时，一切正常。他在网络浏览器中看到了一个主页，并且在浏览器的地址栏中显示了地址 www.mycompany.com。但是，当他浏览网站的不同页面并被重定向时，浏览器的地址栏显示 217.151.xxx.xxx/order/detail 而不是 www.mycompany.com/order/detail。

我厌倦了将 217.151.xxx.xxx/order/detail 重写为 www.mycompany.com/order/detail 的 IIS url rewrite 但这会导致浏览器冻结，等待响应。我的猜测是，当 IIS 将 url 重写为 www.mycompany.com/order/detail 时，它会将请求发送回域名托管公司。该公司解释该请求并将其重定向回 217.151.xxx.xxx，这会导致无限循环。

如何让域名始终显示在浏览器的栏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:29:29.757

当我们用 IP 映射域时的一个非常普遍的问题

看一下这个。 [http://help.lockergnome.com/windows2/Domain-static-IP-mapping--ftopict485575.html](http://help.lockergnome.com/windows2/Domain-static-IP-mapping--ftopict485575.html)

# perl - [Perl][net::ssh2] 执行远程命令时如何保持 ssh 连接

> ID：13457178
> 
> 赞同：4
> 
> 时间：2012-11-19T15:42:23.647
> 
> 标签：perl

我正在使用 net::ssh2 编写一个 perl 脚本来建立与远程服务器的 SSH 连接。（我在窗户上工作）

我选择 Net::SSH2 是因为我必须在同一个脚本中建立一些 SFTP 连接。

目前，我的 sftp 连接运行良好。问题是当我尝试执行“长时间”命令时。我的意思是执行可能需要 30 秒以上的命令。

```
 $ssh2 = Net::SSH2->new();
    $ssh2->connect('HOST') or die;
    if($ssh2->auth(username=>'USER', password=>'PSWD'))
    {
        $sftp = Net::SFTP::Foreign->new(ssh2=>$ssh2, backend=>'Net_SSH2');
        $sftp->put('local_path', 'remote_path');
        $channel=$ssh2->channel();
    ##
        $channel->shell('BCP_COMMAND_OR_OTHER_PERL_SCRIPT');
    # OR (I tried both, both failed :( )
        $channel->exec('BCP_COMMAND_OR_OTHER_PERL_SCRIPT');
    ##
        $channel->wait_closed();
        $channel->close();
        print "End of command";
        $sftp_disconnect();
    }
    $ssh2->disconnect(); 
```

当我执行此脚本时，连接成功，文件已正确发送，但未（完全）执行。我的意思是，我认为命令已发送执行但立即终止或根本不发送，我不确定。

我想要的是脚本等到命令完全完成后再断开所有连接（只是因为有时，我需要获取命令执行的结果）

有谁知道如何解决这个问题？:( cpan 文档对此不是很明确

谢谢！

PS：我愿意接受任何评论或建议:)

编辑：经过一些测试，我可以说命令已发送但被中断。我的测试是在远程服务器上启动另一个 perl 脚本。该脚本写入一个平面文件。在这个测试中，脚本被启动，文件被填了一半。我的意思是，文件被残忍地停在中间。

另一方面，当我在“$channel->exec()”之后执行“sleep(10)”时，脚本成功结束。问题是，我不能写“sleep(10)”（我不知道它需要 9 秒还是 11 秒（或者更多，你明白我的意思）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:58:48.190

您可以尝试使用[Net::SSH::Any](https://metacpan.org/release/SALVA/Net-SSH-Any-0.03)代替。

它提供了更高级别和更易于使用的 API，可以使用 Net::SSH2 或 Net::OpenSSH 来处理 SSH 连接。

例如：

```
use Net::SSH::Any;

my $ssh = Net::SSH::Any->new($host, user => $user, password => $password);
$ssh->error and die $ssh->error;

my $sftp = $ssh->sftp;
$sftp->put('local_path', 'remote_path');

my $output = $ssh->capture($cmd);
print "command $cmd output:\n$output\n\n";

$sftp->put('local_path1', 'remote_path1');

# no need to explicitly disconnect, connections will be closed when
# both $sftp and $ssh go out of scope. 
```

请注意，我刚刚上传到 CPAN 的 0.03 版中添加了 SFTP 支持（通过 Net::SFTP::Foreign）。

# facebook - 在用户时间轴中发布 SWF

> ID：13457182
> 
> 赞同：1
> 
> 时间：2012-11-19T15:42:34.217
> 
> 标签：facebook, api, iframe, flash

我的 iframe facebook 应用程序有问题，是一个音乐应用程序，用户可以在音乐播放器中发布音乐，然后问题是当用户将 SWF 共享到时间线墙时，播放器不会出现，它只显示音乐文件的 URL。

我在白名单应用配置中添加了服务器 IP 列表，我该如何解决？:(

这里的代码：

```
try {
    $actions  = json_encode(array(array('text'=>facebook_app_post_ok_in_my_profile, 'href'=>'http://apps.facebook.com/fbapp/post_check.php?  where=me&song='.$selected_value.'')));
    $param  =   array(
    'method'        =>  'stream.publish',
    'callback'      =>  '',
    'name'      =>  facebook_app_post_ok_feed_name,
    'href'      =>  'http://www.site.com',
    'description'      =>  facebook_app_post_ok_description,
    'message'       =>  $message_feed,
    'attachment'    =>  '{"media": [{
    "type": "mp3",
    "src":   "'.$real_source.'",
    "title": "'.$song_title.'",
    "artist": "'.$song_artist.'",
    "album": "'.$song_album.'"
    }]}
    ','action_links'  =>  $actions,
    'target_id'     =>  $user_id,
    'privacy'       =>  ''
    );
    $facebook->api($param);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:27:03.463

您需要按照[本教程](https://developers.facebook.com/docs/feed-gaming/)中的说明进行操作。我知道它被称为 Feed Gaming，这与您想要实现的目标无关，但基本前提是相同的。您想要一个`swf`用户可以在他们的新闻提要中打开的交互。

一旦您在最终 URL 上放置了 OG 标记，FB 就会选择所有这些并呈现`swf`.

# email - 如何将我的域指向 Web 和电子邮件的单独主机

> ID：13457187
> 
> 赞同：0
> 
> 时间：2012-11-19T15:42:53.140
> 
> 标签：email, web, hosting, nameservers

我想了解如何保持我的电子邮件托管和域注册并使用 123 reg（我当前的网站主机）托管，但将我的域指向另一个我想将我的网站移动到的主机？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:47:29.940

将 DNS 记录编辑为 1\. 保留 MX 记录和裸域`A`记录（`domain.tld`仅） - 保持原样 2.为网站子域创建`A`或`CNAME`记录（ ）。`www.domain.tld``www`

您也可以将裸域指向另一个提供商，但使用某些 DNS 编辑界面可能会有点棘手。

# java - ArrayList 反射

> ID：13457194
> 
> 赞同：1
> 
> 时间：2012-11-19T15:43:15.170
> 
> 标签：java, reflection, arraylist

> **可能重复：**
> [如何找出每个对象在 ArrayList<Object> 中的类型？](https://stackoverflow.com/questions/106336/how-do-i-find-out-what-type-each-object-is-in-a-arraylistobject)
> [了解Java中的泛型类型](https://stackoverflow.com/questions/1886677/knowing-type-of-generic-in-java)

如何使用 Java 中的反射`Foo`从我的类型中检索类型？`ArrayList`

```
ArrayList<Foo> myList = new ArrayList<Foo>(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T16:00:28.037

您无法从值中获取此类型，但可以从字段信息中获取。

```
public class Main {
    interface Foo { }
    class A {
        List<Foo> myList = new ArrayList<Foo>();
    }
    public static void main(String... args) throws NoSuchFieldException {
        ParameterizedType myListType = ((ParameterizedType) 
                                A.class.getDeclaredField("myList").getGenericType());
        System.out.println(myListType.getActualTypeArguments()[0]);
    }
} 
```

印刷

```
interface Main$Foo 
```

可以检查字段、方法参数、返回类型和扩展类/接口，但不能检查局部变量或值

这些产生相同的结果。

```
List<Foo> myList = new ArrayList();
List<Foo> myList = (List) new ArrayList<String>(); 
```

您无法获得泛型类型

```
List myList = new ArrayList<Foo>(); 
```

# java - 你能用 Apache Thrift 代替 JNI 吗？

> ID：13457197
> 
> 赞同：6
> 
> 时间：2012-11-19T15:43:22.083
> 
> 标签：java, c++, java-native-interface, thrift

我刚刚遇到 Thrift，最近开始使用 JNI。

据我了解，Thrift 为您提供了定义不同语言之间接口的工具（如果我错了，请纠正我）。根据我的经验，JNI 在 Java 和 C++ 之间似乎做了类似的工作。

我想知道我是否可以使用 Thrift 来完成我目前在 JNI 中所做的任务。如果是，我应该在哪些任务上使用 Thrift，什么时候应该使用 JNI？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:48:18.727

当您在不同进程之间进行通信时，您应该使用 thrift 或类似的 RPC 库。在同一进程中传递 Java 和 C 之间的方法调用时，可以使用 JNI。使用 thrift 的成本大约比使用 JNI 高 10 到 100 倍，这取决于你在做什么，这就是为什么你只在不能使用 JNI 时才使用它的原因。

# c# - 如何通过List进行foreach循环 ?

> ID：13457201
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:43:35.150
> 
> 标签：c#, asp.net, sql-server, tsql, foreach

> **可能重复：**
> [将 List<contacts> 插入表](https://stackoverflow.com/questions/13422702/insert-listcontacts-to-table)

我`List<Contacts>`想遍历该列表以使用存储过程添加到数据库中。但我的`foreach`循环只会在列表中插入第一个联系人。如何让它调用存储过程来插入所有联系人？

```
private static bool Insert_company_contacts(int companyID, List<Contacts> contacts)
{
    // get a configured DbCommand object
    DbCommand comm = GenericDataAccess.CreateCommand();

    // Set the stored procedure name 
    comm.CommandText = "AddContacts";

    // Company Info
    foreach (var c in contacts)
    {
        // create new parameter @LabelContactTypeID
        DbParameter param = comm.CreateParameter();
        param.ParameterName = "@CompanyID";
        param.Value = companyID;
        param.DbType = DbType.Int32;
        comm.Parameters.Add(param);

        // create new parameter @LabelContactTypeID
        param = comm.CreateParameter();
        param.ParameterName = "@LabelContactTypeID";
        param.Value = c.LabelContactTypeID;
        param.DbType = DbType.Int32;
        comm.Parameters.Add(param);

        // create new parameter @ContactDetails
        param = comm.CreateParameter();
        param.ParameterName = "@ContactDetails";
        param.Value = c.ContactDetail;
        param.DbType = DbType.StringFixedLength;
        comm.Parameters.Add(param);

        // create new parameter @Status
        param = comm.CreateParameter();
        param.ParameterName = "@Status";
        param.Value = c.Status;
        param.DbType = DbType.Boolean;
        comm.Parameters.Add(param);

        // create new parameter @Notes
        param = comm.CreateParameter();
        param.ParameterName = "@Notes";
        param.Value = c.Notes;
        param.DbType = DbType.StringFixedLength;
        comm.Parameters.Add(param);

        try
        {
            if (GenericDataAccess.ExecuteNonQuery(comm) == -1)  
                return false;
        }
        catch
        {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:47:55.987

您正在`DbCommand`循环前面创建一个单，并在循环内添加参数。因此，在第二次迭代中，您将一组全新的参数添加到您的命令中。

只需将参数的创建移到循环之外，如下所示：

```
DbCommand comm = GenericDataAccess.CreateCommand();
//Set the store Proc name 
comm.CommandText = "AddContacts";

DbParameter paramDetails = comm.CreateParameter();
comm.Parameters.Add(paramDetails);
// add other parameters ...

foreach (var c in contacts)
{
    // in the loop, just update parameter values and execute the command
    paramDetails.Value = c.ContactDetail;
    GenericDataAccess.ExecuteNonQuery(comm)
} 
```

此外，在捕获异常时，您不应忽略异常详细信息。如果您不处理异常，最好不要捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:47:40.473

你为什么要退货？当 C# 遇到 RETURN 时，它会退出函数，停止迭代。

使用另一种方式来了解会发生什么。就个人而言，我使用修改后的行号，

# git - 如何在 git 补丁中添加 Signed-off-by 字段

> ID：13457203
> 
> 赞同：36
> 
> 时间：2012-11-19T15:43:42.910
> 
> 标签：git

我正在生成一个 git 补丁。然后我想把它发送给项目维护者。

`signed-off-by`我想在 git 补丁中标记我的姓名和电子邮件地址

怎么做 ？为了让项目维护者获得`signed-off-by`包含我的姓名和电子邮件地址的字段。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-19T15:53:52.403

提交时，只需使用：

```
git commit -s 
```

或者

```
git commit --signoff 
```

或者您可以在提交消息的末尾写下，在提交正文中由空行分隔的一行上：

```
Signed-off-by: Your Name <your.email@example.com> 
```

如果您已经有提交，请使用`git commit -s --amend`添加上述签核行。

或者，如果您打算将其作为补丁或补丁系列发送，您可以使用`git format-patch -s`或`--signoff`将签核添加到补丁本身，而无需修改提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-22T13:30:18.127

用于`git commit -s --amend`修改最后一次提交或用于`git commit -s`当前正在进行的提交。它将`Signed-off-by: YourGitConfigName <YourGitConfigEmail>`在提交消息的末尾添加广告。

# php - Symfony 2 - 匿名页面有空的“security.context”令牌？

> ID：13457205
> 
> 赞同：2
> 
> 时间：2012-11-19T15:43:44.047
> 
> 标签：php, symfony

当我在控制器中执行此操作时：

```
$token = $this->get('security.context')->getToken(); 
```

如果控制器位于不受保护的 URL 下，则令牌为 null：

```
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_ADMIN }
    - { path: ^/public, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

在我的例子中，控制器动作是在`/public`. 如果代码在`/`受保护的页面下运行，则令牌存在。

我想要这个的原因是因为我想在用户登录的情况下包含其他信息，并且我想检查这个“令牌”是否存在。

有没有更好的方法来检查用户是否已经登录——在受保护和不受保护的区域都可以使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:38:49.800

您可以通过检查用户是否经过完全身份验证来检查用户是否经过身份验证，即他们对`isGranted`功能是非匿名的。

```
use Symfony\Component\Security\Core\Exception\AccessDeniedException

public function editAction()
{
    if (false === $this->get('security.context')->isGranted(
        'IS_AUTHENTICATED_FULLY'
       )) {
        throw new AccessDeniedException();
    }
    // ...
} 
```

请参阅[此处](http://symfony.com/doc/2.0/cookbook/security/remember_me.html#forcing-the-user-to-re-authenticate-before-accessing-certain-resources)了解更多信息。

# html - 为什么我的第二 标签的格式与我的第一个不同？

> ID：13457207
> 
> 赞同：0
> 
> 时间：2012-11-19T15:43:49.220
> 
> 标签：html, css, formatting

使用此 HTML 代码：

*   [http://pastebin.com/ch1FPm8M](http://pastebin.com/ch1FPm8M)

一切正常，除了 2 个不同的段落`<p>`格式不同，第二个`<p>`基本上与第一个不同，我的问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:48:06.830

你的第一个`<H3>`是未封闭的。关闭它，你很好。

另外...为什么`<BIG>`标题中包含两个标签？这似乎不是一个好习惯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:48:24.110

您没有`<h3>`在第一段之前关闭标题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:48:27.157

您使用的第一个`<h3>`标签是未封闭的（第 18 行）。

# excel - 使用vba的立方根

> ID：13457212
> 
> 赞同：0
> 
> 时间：2012-11-19T15:43:54.487
> 
> 标签：excel, function, vba

我正在寻找在 Excel 中查找立方根的解决方案。我在这个网站上找到了下面的代码。

[http://www.mrexcel.com/forum/excel-questions/88804-solving-equations-excel.html](http://www.mrexcel.com/forum/excel-questions/88804-solving-equations-excel.html)

不幸的是，它对我不起作用 - 我得到了#VALUE！当我运行它并且因为我只学习 VBA 时，我没有运气调试它。

```
Sub QUBIC(P As Double, Q As Double, R As Double, ROOT() As Double)

' Q U B I C - Solves a cubic equation of the form:
' y^3 + Py^2 + Qy + R = 0 for real roots.
' Inputs:
' P,Q,R Coefficients of polynomial.

' Outputs:
' ROOT 3-vector containing only real roots.
' NROOTS The number of roots found. The real roots
' found will be in the first elements of ROOT.

' Method: Closed form employing trigonometric and Cardan
' methods as appropriate.

' Note: To translate and equation of the form:
' O'y^3 + P'y^2 + Q'y + R' = 0 into the form above,
' simply divide thru by O', i.e. P = P'/O', Q = Q'/O',
' etc.

Dim Z(3) As Double
Dim p2 As Double
Dim RMS As Double
Dim A As Double
Dim B As Double
Dim nRoots As Integer
Dim DISCR As Double
Dim t1 As Double
Dim t2 As Double
Dim RATIO As Double
Dim SUM As Double
Dim DIF As Double
Dim AD3 As Double
Dim E0 As Double
Dim CPhi As Double
Dim PhiD3 As Double
Dim PD3 As Double

Const DEG120 = 2.09439510239319
Const Tolerance = 0.00001
Const Tol2 = 1E-20

' ... Translate equation into the form Z^3 + aZ + b = 0

p2 = P ^ 2
A = Q - p2 / 3
B = P * (2 * p2 - 9 * Q) / 27 + R

RMS = Sqr(A ^ 2 + B ^ 2)
If RMS < Tol2 Then
' ... Three equal roots
nRoots = 3
ReDim ROOT(0 To nRoots)
For i = 1 To 3
ROOT(i) = -P / 3
Next i
Exit Sub
End If

DISCR = (A / 3) ^ 3 + (B / 2) ^ 2

If DISCR > 0 Then

t1 = -B / 2
t2 = Sqr(DISCR)
If t1 = 0 Then
RATIO = 1
Else
RATIO = t2 / t1
End If

If Abs(RATIO) < Tolerance Then
' ... Three real roots, two (2 and 3) equal.
nRoots = 3
Z(1) = 2 * QBRT(t1)
Z(2) = QBRT(-t1)
Z(3) = Z(2)
Else
' ... One real root, two complex. Solve using Cardan formula.
nRoots = 1
SUM = t1 + t2
DIF = t1 - t2
Z(1) = QBRT(SUM) + QBRT(DIF)
End If

Else

' ... Three real unequal roots. Solve using trigonometric method.
nRoots = 3
AD3 = A / 3#
E0 = 2# * Sqr(-AD3)
CPhi = -B / (2# * Sqr(-AD3 ^ 3))
PhiD3 = Acos(CPhi) / 3#
Z(1) = E0 * Cos(PhiD3)
Z(2) = E0 * Cos(PhiD3 + DEG120)
Z(3) = E0 * Cos(PhiD3 - DEG120)

End If

' ... Now translate back to roots of original equation
PD3 = P / 3

ReDim ROOT(0 To nRoots)

For i = 1 To nRoots
ROOT(i) = Z(i) - PD3
Next i

End Sub

Function QBRT(X As Double) As Double

' Signed cube root function. Used by Qubic procedure.

QBRT = Abs(X) ^ (1 / 3) * Sgn(X)

End Function 
```

谁能指导我如何修复它，以便我可以运行它。谢谢。

编辑：这就是我在 Excel 中运行它的方式（我将 Qubic 更改为函数而不是子）单元格 A1:A3 分别包含 p、q、r 单元格 B1:B3 包含 Roots() 单元格 C1:C3 包含数组Qubic的输出

A1:1 A2:1 A3:1

B1:0.1 B2:0.1 B3:0.1

C1: C2: C3: {=QUBIC(A1,A2,A3,B1:B3)}

添加：现在它可以与@assylias 的修复程序一起使用，我正在尝试从另一张表中进行以下操作：

```
Function ParamAlpha(p,q,r) as Double
Dim p as Double
Dim q as Double 
Dim r as Double
p=-5
q=-2
r=24
    Dim Alpha as Double
    Dim AlphaVector() as Double
    AlphaVector=QubicFunction(p,q,r)
    Alpha=FindMinPositiveValue(AlphaVector)
End Function

Function FindMinPositiveValue(AlphaVector) As Double
Dim N As Integer, i As Integer
N = AlphaVector.Cells.Count
Dim Alpha() As Double
ReDim Alpha(N) As Double
For i = 1 To N
    If AlphaVector(i) > 0 Then
        Alpha(i) = AlphaVector(i)
    Else
        Alpha(i) = 100000000000#
    End If
Next i
FindMinPositiveValue = Application.Min(Alpha)
End Function 
```

在 Excel 中，我调用 =ParamAlpha(-5,-2,24) 并返回`#VALUE!`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:21:53.863

如果添加以下过程，它将在消息框中显示结果。然后，您可以根据需要对其进行修改以执行其他操作：

```
Public Sub test()

  Dim p As Double
  Dim q As Double
  Dim r As Double
  Dim roots() As Double

  p = 1
  q = 1
  r = 1

  QUBIC p, q, r, roots

  Dim i As Long
  Dim result As String

  result = "("
  For i = LBound(roots, 1) To UBound(roots, 1)
    result = result & roots(i) & ","
  Next i

  result = Left(result, Len(result) - 1) & ")"

  MsgBox "Roots of y^3 + " & p & ".y^2 + " & r & ".y + " & r & " = 0 has the following roots: " & result

End Sub 
```

或者，如果您希望直接在电子表格中以公式数组的形式获得结果，您可以在同一模块中添加以下函数：

```
Public Function QubicFunction(p As Double, q As Double, r As Double) As Double()

  Dim roots() As Double
  QUBIC p, q, r, roots
  QubicFunction = roots

End Function 
```

然后通过选择几个单元格（水平方向，例如 A1:B1）从 Excel 中调用它，然后按 CTRL+SHIFT+ENTER：

```
=QubicFunction(1, 1, 1) 
```

# excel - 与众不同的 SUMIF

> ID：13457214
> 
> 赞同：0
> 
> 时间：2012-11-19T15:44:05.937
> 
> 标签：excel, function

我正在尝试完成一些在我看来似乎很容易但我无法将其写成公式的事情。

本质上，我想做一个 SUMIF，但是我很困惑。

我有一个表，我想沿着 1 行查找一个值，并且它存在的地方我想对一​​个范围求和，这个范围与行中的单元格相邻，

例如，如果值存在于 A1、SUM A5:A15 中，如果相同的值也存在于 B1、SUM B5:B15 中并将两者相加，等等 - 我如何一次完成此操作？我想查看超过 70 个值的行，其中有 12 个可能的变量，

这可能是不可能的，但我有一种预感，它相对简单^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:56:50.163

您可以使用此[数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)- 输入`Ctrl+Shift+Enter`：

```
=SUM(IF(A1:D1="my value"; A2:D15)) 
```

*（如果那是您在区域和语言高级设置中的列表分隔符，请使用`,`它）`;`*

# objective-c - 如何显示来自 RSS 提要的图像

> ID：13457215
> 
> 赞同：2
> 
> 时间：2012-11-19T15:44:09.063
> 
> 标签：objective-c, ios, nsdictionary, nsxmlparser

我正在尝试构建一个显示来自[http://news.yahoo.com/rss/](http://news.yahoo.com/rss/)的最新 RSS 提要的应用程序 我能够使用 NSXMLParserDelegate 解析 xml，我能够显示日期和时间以及特定提要的标题，但我还想为每个提要显示图像，我知道如何解析主要元素，但我不知道如何传递以 url 作为其键的子元素的属性...例如，上述提要包括以下内容：

```
<item>
  <title>fooo</title>
  <description ahref="some link" image src="http://l1.yimg.com/bt/api/res/1.2/Wo3_apH.kz7DMvOj7MDtRQ--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/ap_webfeeds/20c464ff99815420210f6a706700a792.jpg"
     </description> 
```

我需要表格视图中来自 IMG SRC 的图像以及该特定提要的标题和日期。我很困惑如何解析 IMG SRC 属性并将其添加到我的 tableview 并改变大小，这样它就不会破坏我的标题和日期。

到目前为止我做了什么：

### viewDidAppear

```
-(void)viewDidAppear:(BOOL)animated
 {
     if ([stories count] == 0) 
     {
         NSString * path = @"http://news.yahoo.com/rss/";
         [self parseXMLFileAtURL:path];
     }
     cellSize = CGSizeMake([newsTable bounds].size.width, 80);
 } 
```

### -(void)parseXMLFileAtURL:(NSString *)URL

```
- (void)parseXMLFileAtURL:(NSString *)URL
{
    stories = [[NSMutableArray alloc] init];

    //you must then convert the path to a proper NSURL or it won't work
    NSURL *xmlURL = [NSURL URLWithString:URL];

    // here, for some reason you have to use NSClassFromString when trying to alloc NSXMLParser, otherwise you will get an object not found error
    // this may be necessary only for the toolchain
    rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    // Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
    [rssParser setDelegate:self];

    // Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
    [rssParser setShouldProcessNamespaces:NO];
    [rssParser setShouldReportNamespacePrefixes:NO];
    [rssParser setShouldResolveExternalEntities:NO];
    [rssParser parse];
} 
```

### 开始元素

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    //NSLog(@"found this element: %@", elementName);
    currentElement = [elementName copy];

    if ([elementName isEqualToString:@"item"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentDate = [[NSMutableString alloc] init];
        currentSummary = [[NSMutableString alloc] init];
        currentLink = [[NSMutableString alloc] init];
    }
} 
```

### 发现字符

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"link"]) {
        [currentLink appendString:string];
    } else if ([currentElement isEqualToString:@"description"]) {
        [currentSummary appendString:string];
    } else if ([currentElement isEqualToString:@"pubDate"]) {
        [currentDate appendString:string];
    }
} 
```

### didEnd 元素

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    //NSLog(@"ended element: %@", elementName);
    if ([elementName isEqualToString:@"item"]) {
        // save values to an item, then store that item into the array...
        [item setObject:currentTitle forKey:@"title"];
        [item setObject:currentLink forKey:@"link"];
        [item setObject:currentSummary forKey:@"summary"];
        [item setObject:currentDate forKey:@"pubDate"];
    }
} 
```

### didEndDocument

```
- (void)parserDidEndDocument:(NSXMLParser *)parser 
{
    [newsTable reloadData];
} 
```

### numberOfRows 和 cellForRowAtIndexPath

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [stories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier] autorelease];
    }

    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    cell.textLabel.text=[[stories objectAtIndex: storyIndex] objectForKey: @"title"];
    cell.detailTextLabel.text=[[stories objectAtIndex:storyIndex] objectForKey:@"pubDate"];

    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:12];
    cell.textLabel.numberOfLines = 0;
    cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;

    return cell;
} 
```

如何获得单元格右侧的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:59:37.813

在回答标题中的问题时，要加载图像，您使用`NSXMLParser`对象解析字符串 URL 的 RSS 提要，当您想将该图像呈现给用户时，您使用该 URL 将图像检索到`NSData`，为此创建一个`UIImage`，然后相应地设置 的`image`属性`UIImageView`。请参阅`cellForRowAtIndexPath`下面的清单。

[就实施的细节而言，我已经根据您正在阅读来自http://news.yahoo.com/rss/](http://news.yahoo.com/rss/)的提要的事实对这个答案进行了重大修改，该提要的格式与您在示例 XML 列表中显示。格式实际上似乎是：

```
<item>
  <title>Palestinian death toll ...</title>
  <description>this contains the html version of the story description</description>
  <link>http://news.yahoo.com/palestinian-death-toll-...</link>
  <pubDate>Mon, 19 Nov 2012 11:20:15 -0500</pubDate>
  <source url="http://www.reuters.com/">Reuters</source>
  <guid isPermaLink="false">palestinian-death-toll-...</guid>
  <media:content url="http://the.url.for.image/images/palestinian.JPG" type="image/jpeg" width="130" height="86"></media:content>
  <media:text type="html">another html version of the text</media:text>
  <media:credit role="publishing company"></media:credit>
</item> 
```

其中一些只是标准的 XML 标签`title`,`description`等，您可以在其中获取打开和关闭标签之间的值（您可以使用`NSXMLParserDelegate`method `parser:foundCharacters:`）。但是图片的URL其实是`url`在标签本身的属性里面`media:content`，在这种情况下，你必须使用`NSXMLParserDelegate`方法`didStartElement`并查询`attributes`参数。

因此，鉴于此，我上传了一个[示例 Yahoo News 阅读器](https://github.com/robertmryan/Simple-XML-Parser)，它演示了解析 Yahoo RSS 提要的过程。请注意，这是一个相当原始的实现，但希望这可以为您提供基本概念。

# sql - 如果存在更新或插入 sqlite3

> ID：13457221
> 
> 赞同：2
> 
> 时间：2012-11-19T15:44:26.037
> 
> 标签：sql, database, sqlite

我想实现这个：

```
If exist
 update
Else 
 insert 
```

看来我要触摸数据库两次。有没有更短的方法可以在 sqlite3 中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:44:19.887

如果您对关键字段有唯一约束，则可以使用该[`INSERT OR REPLACE`命令](http://www.sqlite.org/lang_insert.html)在新记录创建重复时自动删除旧记录。

但是，这并没有给您带来性能优势：必须*始终*对记录进行*一些*检查；无论您是在执行显式`SELECT`还是使用 SQLite 的内置重复检测，都没有太大区别。

# django - 如何指定tastepie总是返回json数据

> ID：13457222
> 
> 赞同：1
> 
> 时间：2012-11-19T15:44:27.403
> 
> 标签：django, tastypie

我的资源代码是

```
class MessageResource(ModelResource):
    class Meta:
        queryset = Message.objects.all()
        resource_name = "message"
        always_return_data = True
        authentication = ApiKeyAuthentication()
        authorization = Authorization()
    def determine_format(self, request):
        return "application/json" 
```

如果我得到没有任何身份验证信息的消息资源，则响应为

```
401 UNAUTHORIZED
"Content-Type" = "text/html; charset=utf-8";
Date = "Mon, 19 Nov 2012 15:36:28 GMT";
Server = "WSGIServer/0.1 Python/2.7.2"; 
```

而不是 html，我想获得 JSON 响应。实际上，我想知道在任何情况下如何指定tastepie 只发回JSON 响应？

我想得到像这样的 JSON 响应

`{ "code": "401", "message": "Unauthorized" }`

有没有办法实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:21:18.053

这是有效的 HTTP 响应。没有任何地方指定 JSON 401 响应，也没有必要让 sweetpie 提供任何默认响应。

如果您有这样的需求，只需使用适当的中间件包装您的 API。

**更新：如何设置中间件**

首先，通读[中间件文档](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)。

然后，我认为您需要`process_response`在新的中间件类上实现方法，并根据其[状态代码](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse.status_code)对响应做任何您需要做的事情。

不要忘记将中间件类添加到`settings.MIDDLEWARE_CLASSES`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T16:18:39.520

或者你可以简单地在你的`settings`文件中做`TASTYPIE_DEFAULT_FORMATS = ['json']`.

# node.js - node-postgres：无法从 postgres CLI 发出 NOTIFY 作业

> ID：13457223
> 
> 赞同：5
> 
> 时间：2012-11-19T15:44:26.697
> 
> 标签：node.js, postgresql

我有一些在 PHP 中可以正常工作的代码。从 postgres CLI 我发出一个

```
NOTIFY job; 
```

Postgres 正确发出通知（我可以在 PHP 客户端中看到它），但无法在节点中读取它。

JS：

```
var pg = require('pg');
var conString = "your postgres information";
var client = new pg.Client(conString);

client.connect();
client.query('LISTEN job');
client.on('notification', function(msg) {
    console.log('data');
}); 
```

我宁愿保持简单。[像这样](https://stackoverflow.com/questions/8262375/listen-query-timeout-with-node-postgres)在 postgres 中创建程序的唯一方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:41:25.667

好的，问题出在 conString 参数中。

```
var conString = "tcp://user:pass@localhost/db"; 
```

检查您是否使用正确的数据库来访问通知消息很重要。

# php - 在控制器操作中有条件地设置 Yii viewPath

> ID：13457224
> 
> 赞同：1
> 
> 时间：2012-11-19T15:44:38.627
> 
> 标签：php, yii

我需要根据控制器操作中的某些条件动态设置 viewPath。我通过在您的控制器中放置一个名为 getViewPath() 的方法来了解一种方法，如下所示：

```
public function getViewPath() {
  $controllername = $this->getId();
  $newPath = "application.views.extra";
  $newPath = YiiBase::getPathOfAlias($newPath);
    return $newPath;
} 
```

但正如我之前所说，我需要根据条件设置 viewPath。像这样：

```
public function actionView($section) {
   switch ($section) {
     case 'yoga':
       $viewpath = 'yoga';
     break;

      case 'cycling':
        $viewpath = 'cycling';
      break;
   }

    // Now this should render from either:
    1\.  protected/views/yoga/  
    2\.  protected/views/cycling/
     $this->render('view');
} 
```

控制器类有 getViewPath() 但没有 setViewPath() 并且 viewPath 属性也是只读的。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:47:31.217

`//`在渲染路径中使用默认为`protected/views/`，因此您可以执行以下操作：

```
public function actionView($section) {
   switch ($section) {
     case 'yoga':
       $viewpath = '//yoga/';
     break;

      case 'cycling':
        $viewpath = '//cycling/';
      break;
   }

    // Now this should render from either:
    //1\.  protected/views/yoga/  
    //2\.  protected/views/cycling/
     $this->render($viewpath.'view');
} 
```

# c++ - 如何将 $(SRCROOT) 放入字符串中？

> ID：13457225
> 
> 赞同：1
> 
> 时间：2012-11-19T15:44:36.693
> 
> 标签：c++, xcode4, environment-variables

或者有没有其他方法可以将项目目录转换为字符串？我试过这个

```
const char* filepath = std::getenv("SRCROOT"); 
```

但是文件路径显示为空，但它适用于其他环境变量。SRCROOT 是否有某种代码内别名？我不能只使用“../”，我需要字符串中的完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-19T12:15:36.400

我发现的最佳选择是`Other C Flags`根据 ${SRCROOT} 环境变量在您的项目属性下定义宏。就是这样 ：

[![在此处输入图像描述](../Images/33835b2ee4abd89648f4563b8e3d2869.png)](https://i.stack.imgur.com/BcsB8.png)

您可以`SRCROOT`将 C/C++ 代码上的 用作常量字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:08:57.500

至于*项目的*目录，请检查您的 IDE 文档中的环境变量。它可能有一个翻译，将使用*项目*目录创建一个宏。

*可执行文件的*目录通常可以从*传递*给`main`函数的第一个参数中获得。

否则项目目录，尤其是目录结构，是平台相关的。一些平台，比如嵌入式系统，没有目录，只有内存。有关详细信息，请咨询您的操作系统。

作为替代方案，您可以让*构建系统*`define`在命令行上将项目名称作为 a 传递。其他想法是创建环境变量或配置文件；一切都应该由*构建系统*完成。

# javascript - 提交前验证字段

> ID：13457229
> 
> 赞同：0
> 
> 时间：2012-11-19T15:44:44.260
> 
> 标签：javascript

我有一个文本字段和一个按钮。

我想验证该字段，如果验证失败，**则按钮不应“提交”。**

这是我的按钮：

```
<input type="submit"  onsubmit="return validate()" 
```

这是我的验证功能：

```
function validate()
{
    var number = document.getElementById("temp");
    alert (number.value);

    if ( /^[0-9]{12}$/.test(number.value) ) 
    { 
        alert(number);
        return true;
    }
    alert ("מספר הפנייה חייב להיות בן 12 ספרות");
    return false; 
} 
```

但它不起作用，提交以任何方式发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:47:32.817

该`onsubmit`事件应附加到`form`对象，而不是提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:50:28.767

它应该是这样的：

```
<form id = "myform" onsubmit="return validate()" action = "mypage.php">

<input type="submit">

</form> 
```

这应该工作...

# java - 即使重新调整大小，如何获得屏幕的精确中间

> ID：13457237
> 
> 赞同：2
> 
> 时间：2012-11-19T15:45:16.443
> 
> 标签：java, swing

好的，这种问题有两个部分。

1.  当我制作 a`JFrame`并在其上绘制一些东西时，即使我将宽度设为 400，并使其在一个项目击中它时（当然，允许一个项目宽度）它反弹回来。但由于某种原因，它总是离屏幕大约 10 个像素。有没有办法解决它，还是我只需要通过加/减数字来补偿？

2.  我怎样才能得到精确的屏幕中心。因此，如果我将`JFrame`默认设置为 200*200 像素，那么中心将为 100*100。（考虑到问题 1 中的问题）但是如果有人调整屏幕大小（是的，我希望他们能够重新调整屏幕大小），那么该点仍然是中心。因此，如果他们将其设为全屏并且屏幕尺寸为 1200*900，则中心将为 600*450。

我希望这足够清楚

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T19:40:58.247

从您所说的声音来看，我认为您误解了普通（装饰）框架的尺寸。

A`JFrame`由一个窗口/框架（通常用边框装饰）、一个`JRootPane`包含`JLayeredPane`内容窗格的a`JMenuBar`和玻璃窗格组成。

![在此处输入图像描述](../Images/67ac59771447d0686d03e1dd5b08f5a8.png)

这是您永远不应覆盖顶级容器`paint`方法的原因之一，因为您实际上不会在内容/视图区域内进行绘画。

因此，帧的实际“可绘制”区域是它的`width - border.width`x`height - border.height`

![在此处输入图像描述](../Images/86a3a40b7d22c29d5460c32af8263089.png)

红线表示框架，蓝线表示内容窗格。

这就提出了一个非常重要的问题，框架的中心在哪里？从框架的角度来看，它是 100x100，但从内容窗格的角度来看，它是 92x81。取决于您想要什么，将取决于您将使用哪个值。对于定位框架，您将需要使用框架中心点，对于绘画，您将需要使用内容窗格。

现在，在屏幕上将框架居中的最简单方法就是调用[`Window#setLocationRelativeTo(null)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)其他方法，我建议您使用 Timr 的解决方案；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:03:55.723

这就是我用来`JFrame`在屏幕上居中的方法，它只是检索显示器的高度和宽度，然后将你的框架居中

```
public static void moveToCenterScreen(JFrame frame) {
    Toolkit kit = frame.getToolkit();       
    GraphicsDevice[] gs = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();
    Insets in = kit.getScreenInsets(gs[0].getDefaultConfiguration());
    Dimension d = kit.getScreenSize();

    int max_width = (d.width - in.left - in.right);
    int max_height = (d.height - in.top - in.bottom);   

    frame.setLocation((int) (max_width - frame.getWidth()) / 2, (int) (max_height - frame.getHeight() ) / 2);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T15:55:11.610

你可以使用一些简单的东西

```
int ___ = (Jframe.getWidth())/2
int ___ = (Jframe.getHeight())/2 
```

空白将是您希望位于中心点的值。

至于另一个问题，你可能有一些填充或移动项目的东西。不确定没有看到它的代码。

# sql - sql基本查询

> ID：13457240
> 
> 赞同：3
> 
> 时间：2012-11-19T15:45:45.793
> 
> 标签：sql

我是 sql 新手，正在玩我找到的一些示例数据库。我有一张名为 student 的表，如下所示

```
id    name    expenditure      item
 1     dan      45              social
 1     dan      60              books
 2     sarah    32              food
 3     matt     64              food
 3     matt     71              social 
```

我试图找到那些在食物和社交上都花钱但在社交上比食物上花更多钱的学生。

我试过了：

```
Select name
from student
where  item = 'social' and item = 'food' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:48:31.457

没有单独的数据行具有`item = 'social'`AND `item = 'food'`。由于该`WHERE`子句一次适用于一行数据，因此您不能这样做。

您需要做的是按学生将所有记录分组在一起，然后检查该组中数据的一些特征。

```
SELECT
  id,
  name
FROM
  student
GROUP BY
  id,
  name
HAVING
      SUM(CASE WHEN item = 'social' THEN 1 ELSE 0 END) > 0
  AND SUM(CASE WHEN item = 'food'   THEN 1 ELSE 0 END) > 0 
```

这给了所有有*一些*记录`'social'`和*一些*记录的学生`'food'`。

然后，您可以添加以下内容以仅获取那些花费更多的`'social'`人`'food'`。

```
AND SUM(CASE WHEN item = 'social' THEN expenditure ELSE 0 END)
    >
    SUM(CASE WHEN item = 'food'   THEN expenditure ELSE 0 END) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:49:30.347

`where  item = 'social' and item = 'food'`  行不通，因为单行永远不可能两者兼而有之。比较同一表中的两行时，最简单的方法是进行自联接

```
SELECT
   s1.Name
FROM student s1
     INNER JOIN student s2
      ON s1.id = s2.id
WHERE
    s1.item = 'social' and s2.item = 'food' 
    and 
    s1.expenditure  > s2.expenditure 
```

笔记：

1.  如果您有多行相同类型的支出，您将需要使用[Dem 的方法](https://stackoverflow.com/a/13457293/119477)来对不同类型进行求和，然后进行比较

2.  如果你想包括没有在食物上花钱的人，你必须使用 LEFT JOIN。您还将对“食物”的测试移动到 ON 子句中，否则它将像内部连接一样。

    ```
     LEFT JOIN student s2
      ON s1.id = s2.id
        and s2.item = 'food' 
    ```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/e8186/1)

# python - 从调试器访问 IPython 功能

> ID：13457243
> 
> 赞同：0
> 
> 时间：2012-11-19T15:45:55.883
> 
> 标签：python, emacs, ipython

我注意到`ipython`调试器不提供某些功能。例如，变量内省的`?`and`??`操作数不起作用：

例如

```
ipython> run my_script.py
ipython> %debug
ipdb> foo?
*** SyntaxError: invalid syntax(<stdin>, line1) 
```

有没有办法将全部`ipython`功能带入调试器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:52:05.713

`ipython`运行 Python 调试器`pdb`进行调试，因此您仅限于`pdb`(type `h`for a list) 提供的命令以及标准 Python 语法（您可以替换`foo?`为`help(foo)`）。

如果您想在代码中的任意位置启动 IPython shell，您可以尝试[Embedding IPython](http://ipython.org/ipython-doc/dev/interactive/reference.html#embedding-ipython)。

# c++ - 私人与公共 typedef

> ID：13457246
> 
> 赞同：1
> 
> 时间：2012-11-19T15:46:19.050
> 
> 标签：c++, class, typedef, private, public

我有以下代码：

```
//MyClass.h
class MyClass {
      typedef std::map<std::string, int> OpMap;
      static const OpMap::value_type opMap[OP_COUNT];

    public:
     //methods
};

//MyClass.cpp
const MyClass ::OpMap::value_type opMap[DDG::OP_COUNT] = {
    MyClass ::OpMap::value_type("hello", 42),
         MyClass ::OpMap::value_type("world", 88),
}; 
```

上述代码编译失败。仅当我将 typdef 公开时才可以。你能解释一下为什么`typedef`在这种情况下应该公开吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:49:34.213

线

```
const DDG::OpMap::value_type opMap[DDG::OP_COUNT] = { 
```

应该

```
const DDG::OpMap::value_type MyClass::opMap[DDG::OP_COUNT] = { 
```

# asp.net-mvc - Web.config urlMappings - 适用于本地页面，不适用于远程页面

> ID：13457247
> 
> 赞同：0
> 
> 时间：2012-11-19T15:46:22.787
> 
> 标签：asp.net-mvc, redirect, web-config, iis-7.5

我有一个在 IIS 7.5 上运行的 MVC4/.Net 4 网站。在我的 web.config 文件中，我的块中有以下内容：

```
<urlMappings enabled="true">
 <add url="~/2013calendar" mappedUrl="~/CustomerService/RequestPocketCalendar" />
 <add url="~/teachers" mappedUrl="http://www.somexternalsite.com/teachers/" />
</urlMappings> 
```

本地重定向都很好，但是任何从站点重定向的东西，例如上面示例中的 /teachers 链接返回“http://www.somexternalsite.com/teachers”都不是有效的虚拟路径。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:46:11.223

如果我没记错的话，mappedUrl 字段是相对于应用程序根目录的路径。因此，“http://www.somexternalsite.com/teachers/”是无效的。

如果您想将其配置为重定向，我只需在您的根控制器中创建一个“教师”操作，然后使用以下内容：

```
return Redirect("http://www.somexternalsite.com/teachers"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:35:57.170

好吧，我最终创建了一个页面来处理外部重定向，如下所示：

重定向.aspx

```
<%@ Page Language="C#" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">
void Page_Load(object sender, EventArgs e)
{
    var page = Request.QueryString["page"];
    Response.Redirect("http://"+page);
}
</script> 
```

因此，在我的 web.config 中，我有如下引用的外部文件：

```
<add url="~/teachers" mappedUrl="~/redirect.aspx?page=www.somexternalsite.com/teachers/" /> 
```

效果很好！

# c++ - C++ 从字符串中获取小时和分钟

> ID：13457250
> 
> 赞同：4
> 
> 时间：2012-11-19T15:46:24.830
> 
> 标签：c++, scanf

我正在为学校编写 C++ 代码，我只能使用 std 库，所以没有提升。我需要解析像“14:30”这样的字符串并将其解析为：

```
unsigned char hour;
unsigned char min; 
```

我们将字符串作为 c++ 字符串，因此没有直接指针。我尝试了此代码的所有变体：

```
sscanf(hour.c_str(), "%hhd[:]%hhd", &hours, &mins); 
```

但我不断收到错误的数据。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:06:41.513

正如其他人所提到的，您必须使用`%d`指定的格式（或`%u`）。至于替代方法，我不喜欢“因为 C++ 具有必须使用的特性 XX”，并且经常求助于 C 级函数。虽然我从不使用`scanf()`类似的东西，因为它有自己的问题。话虽如此，这就是我将如何使用`strtol()`错误检查来解析您的字符串：

```
#include <cstdio>
#include <cstdlib>

int main()
{
    unsigned char hour;
    unsigned char min;

    const char data[] = "12:30";
    char *ep;

    hour = (unsigned char)strtol(data, &ep, 10);
    if (!ep || *ep != ':') {
        fprintf(stderr, "cannot parse hour: '%s' - wrong format\n", data);
        return EXIT_FAILURE;
    }

    min = (unsigned char)strtol(ep+1, &ep, 10);
    if (!ep || *ep != '\0') {
        fprintf(stderr, "cannot parse minutes: '%s' - wrong format\n", data);
        return EXIT_FAILURE;
    }

    printf("Hours: %u, Minutes: %u\n", hour, min);
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:08:27.217

当然，您的问题是您正在使用`sscanf`. 并且您正在使用一些非常特殊的类型来表示小时和分钟，而不是`int`. 由于您正在解析一个正好包含 5 个字符的字符串，因此最简单的解决方案就是确保所有字符在该位置都是合法的，使用`isdigit`字符 0、1、3 和 4，并与`':'`字符 2 进行比较。一旦你已经做到了，`std::istringstream`从字符串创建 an 并输入到 an `int`， a `char`（之后您将忽略）和 second是微不足道的`int`。如果您想在输入中更加灵活，例如`"9:45"`也允许类似的内容，您可以跳过初始检查，只需输入`int`,`char`和`int`，然后检查`char`包含`':'` （并且两者`int`都在范围内）。

至于你`sscanf`失败的原因：你要求它匹配类似的东西`"12[:]34"`，这*不是*你给它的东西。我不确定您是否正在尝试使用`"%hhd:%hhd"`，或者由于某种原因您确实想要一个字符类，在这种情况下，您必须将其`[`用作转换说明符，然后忽略输入：`"%hhd%*[:]%hhd"`。（这将允许接受多个字符作为分隔符，但除此之外，我看不到优势。此外，至少从技术上讲，不支持使用`%d`然后传递`unsigned`整数类型的地址，`%hhd` *必须*是`signed char`. 在实践中，但是，对于小于 128 的非负输入值，我认为您永远不会遇到任何问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:02:00.437

正如 izomorphius 所提到的`sscanf`，变体不是 C++，它们是 C。C++ 的方式是使用流。以下作品（它不是非常灵活，但应该给你一个想法）

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main(int argc, char* argv[])
{
    string str = "14:30";

    stringstream sstrm;

    int hour,min;

    sstrm << str;

    sstrm >> hour;
    sstrm.get(); // get colon
    sstrm >> min;

    cout << hour << endl;
    cout << min << endl;

    return 0;
} 
```

您还可以使用[`getline`](http://www.cplusplus.com/reference/iostream/istream/getline/)将所有内容都放在冒号上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T16:07:02.277

我会这样做

```
unsigned tmp_hour, tmp_mins;
unsigned char hour, mins;

sscanf(hour.c_str(), "%u:%u", &tmp_hours, &tmp_mins);
hour = tmp_hours;
mins = tmp_mins; 
```

减少晦涩的`scanf`选项。我也会添加一些错误检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:57:28.060

我的理解是`h`in`%hhd`不是有效的格式说明符。十进制整数的正确说明符是`%d`.

正如 R.Martinho Fernandes 在他的评论中所说，`%d:%d`将匹配由冒号 (':') 分隔的两个数字。

你想要一些不同的东西吗？

您始终可以阅读整个文本字符串并以任何您想要的方式对其进行解析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T16:05:14.100

`sscanf`with`%hhd:%hhd`似乎工作得很好：

```
std::string time("14:30");
unsigned char hour, min;
sscanf(time.c_str(), "%hhd:%hhd", &hour, &min); 
```

请注意，`hh`长度修饰符只是允许将值存储在无符号字符中。

但是，`sscanf`它来自 C 标准库，并且有更好的 C++ 方法来执行此操作。执行此操作的 C++11 方法是使用`stoi`：

```
std::string time("14:30");
unsigned char hour = std::stoi(time);
unsigned char min = std::stoi(time.substr(3)); 
```

在 C++03 中，我们可以使用`stringstream`，但如果你真的想要它在 a 中会有点痛苦`char`：

```
std::stringstream stream("14:30");
unsigned int hour, min;
stream >> hour;
stream.ignore();
stream >> min; 
```

# angularjs - AngularJS $compile 抛出异常

> ID：13457253
> 
> 赞同：1
> 
> 时间：2012-11-19T15:46:38.617
> 
> 标签：angularjs

为什么这会引发异常？

```
var item = {ID: 2, Name: "Andrej" };
var html = "<div>{{ID}} - {{Name}}</div>";
$compile(html)(item); // THIS THROWS EXCEPTION 
```

例外是（第 764 行）

```
TypeError: jqLite("<div>").append(element).html().match(/^(<[^>]+>)/) is null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:57:42.820

如果您只想使用角度插值器将值替换为对象，请使用`$interpolate`.

`$compile`用于创建有角度的元素，并且需要一个范围。

```
var item = {ID: 2, Name: "Andrej" };
var html = "<div>{{ID}} - {{Name}}</div>";
console.log($interpolate(html)(item)); // --> <div>2 - Andrej</div> 
```

# tfs - Windows Server 2008 上的 TFS2012 配置错误

> ID：13457254
> 
> 赞同：0
> 
> 时间：2012-11-19T15:46:42.663
> 
> 标签：tfs, windows-server-2008

我正在尝试在计算机上安装 Team Foundation Server 2012，但遇到了兼容性错误。.exe 是 - Visual Studio Team Foundation Server 2012（x86 和 x64） - Web 安装程序（英文），取自 msdn 网站。以下是服务器属性和错误消息。任何想法是什么导致了这个问题，是服务器的问题还是我需要旧版本的 TFS？

![在此处输入图像描述](../Images/ff9a57c900bc8d89a9c7b3dd0d235c2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:11:09.057

听起来安装程序已损坏。

[http://social.msdn.microsoft.com/Forums/en-US/tfssetup/thread/521b8639-399c-4e9c-bb69-5b97289ead8b/](http://social.msdn.microsoft.com/Forums/en-US/tfssetup/thread/521b8639-399c-4e9c-bb69-5b97289ead8b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:39:02.377

我相信问题出在 .exe 文件上。在某些时候它变得腐败。我能够使用不同的 .exe（相同的 tfs2012 网络安装程序）并且运行良好。

# .net - 转换为枚举

> ID：13457256
> 
> 赞同：8
> 
> 时间：2012-11-19T15:46:44.487
> 
> 标签：.net, entity-framework, enums, entity-framework-5

我刚刚获得 Visual-Studio 2012 Professional 并且正在使用 Entity-Framework (5.0) 设计器。我一直在尝试将属性转换为枚举，根据[此 Microsoft 视频](http://msdn.microsoft.com/en-us/data/jj248772.aspx)，我右键单击该属性并`Convert to Enum`在 (2:06) 处选择 - 在我的上下文菜单中没有转换选项。

在这里，我试图将角色转换为枚举。我已将角色设置为 Int32。

![在此处输入图像描述](../Images/22e06e2123e6a6562ac161afd6057290.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:21:55.397

密切关注帖子中的视频，我打开了`Model Browser`手动添加枚举。完成后，将角色设置为我创建的枚举。为了测试我现在是否可以`Convert To Enum`使用该属性，我将类型更改回 Int32，然后右键单击该属性，然后低，我在上下文菜单中看到了该`Convert To Enum`选项！

因此，如果您遇到问题，这些是我用来启用该`Convert To Enum`选项的步骤。在我看来，这是一个 hack，因为现在我无法用新的解决方案和项目重现这种行为。显然，一旦第一次打开模型浏览器（或下面的完整步骤），它现在就会显示该`Convert To Enum`选项。

-1。使用快速启动搜索窗口，我输入`Model Browser`并打开它。

![模型浏览器搜索](../Images/2038d21702d364cb69294437a9679c4d.png)

-2。`Add New Enum Type...`在模型浏览器中右键单击`Enum Types`您的数据模型进行选择。

![在此处输入图像描述](../Images/29ec4004b33d417396cd9bd1d4b740de.png)

-3。将您的属性设置为枚举，滚动到组合框中列出的类型的底部并选择枚举。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T09:56:11.270

我也有这个问题！！我将实体框架从 4 更改为 4.5 并解决了问题！;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-21T17:26:16.093

当我遇到同样的问题时，解决方案是将 Target Framework 设置为“.NET Framework 4.5”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:10:11.457

在您尝试将其转换为枚举属性之前，该属性的类型是什么？仅当属性的类型是可以是枚举基础类型的类型之一 - Edm.Byte、Edm.SByte、Edm.Int16、Edm.Int32 或 Edm.Int64 时，转换为枚举选项才可用。如果属性类型不是这些类型之一，则无法直接将其转换为枚举，因为设计者不知道底层类型应该是什么，以及它是否可以与您的数据库一起使用更重要的是什么。

# asp.net - 如何在另一个 DropdownList SelectIndexChange 事件上更改标签文本，但它们共享相同的 SQLDataSource

> ID：13457261
> 
> 赞同：1
> 
> 时间：2012-11-19T15:46:59.390
> 
> 标签：asp.net, controls, html-select

我有一个由 3 列组成的**SQLDataSource ：**

1.  A - 数值，数值
2.  B - 名称，文本
3.  C - 注释，大文本

还有一个 DropdownList 控件及其

```
DataValueField of A column - to be stored in the database after form submission
DataTextField of B column - display purpose for the DropdownList Control 
```

现在我要做的是：

在此 DropdownList 控件的选择更改后，我想将另一个标签的文本更改为相应的

```
C column - so that the more detailed comments or explanations will be given upon user's selection of the item 
```

我该怎么做呢？

* * *

谢谢@Nate 的编辑:)

# django - 为什么 django 不单独处理静态文件，没有 apache？

> ID：13457263
> 
> 赞同：0
> 
> 时间：2012-11-19T15:47:01.013
> 
> 标签：django, apache, django-staticfiles

在开发时，django 可以通过更改来处理静态文件`settings.py`，我想处理这些静态文件不会花费太多资源。

但是当使用 将项目应用到生产环境`mod_wsgi`时，推荐的处理静态文件的方法是使用 apache 的配置文件来处理，甚至无法在 django 中处理静态文件。

那么为什么 django 不处理静态文件，至少给用户一个简单的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:52:32.150

从性能的角度来看，您真的不希望 Django 提供静态文件。没有理由向 Django 实例发送请求，然后让 Python 返回文件，因为 Web 服务器自己执行此操作的速度要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:51:56.157

Django 并不打算在生产中提供静态文件。

提供静态文件的 Django 代码是用于开发的，它并不意味着高性能甚至安全。

HTTP 服务器的主要用途是为静态文件提供服务，因此需要高性能和安全。Django 没有充分的理由干扰 HTTP 服务器和文件系统。

系统管理员需要配置安全且高性能的 HTTP 服务器。如果系统管理员不能做到这一点，这不是 Django 的错。

通过这样做，Django 遵守了几个 Unix 原则：

*   简单法则：为简单而设计；只在必须的地方增加复杂性。
*   简约法则：只有在证明没有其他方法可以做的时候才编写一个大程序。
*   模块化规则：编写由干净接口连接的简单部分。
*   分离规则：政策与机制分离；与引擎分离的接口。
*   清晰法则：清晰胜于聪明。

ETC ...

Django 的 staticfiles 系统很棒，事实上很多人在它被包含到 django**之前**就已经在使用它了（参见 django-staticfiles 应用程序）。我相信任何愿意付出很少努力的人都可以完全理解它并发现它也很棒。我记得理解 django-staticfiles 对我来说有点困难，但那不过是一个爱情故事。

除了 url、模板、视图和模型之外，应用程序还可以通过创建一个“静态”子目录来嵌入静态文件。

如果你不明白 django 如何帮助你很好地处理静态文件，你可以试试这篇文章[surviving django staticfiles](http://blog.yourlabs.org/post/30382323418/surviving-django-contrib-staticfiles-or-how-to-manage)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:00:44.250

您可以使用它轻松地在生产中使用它

`python manage.py runserver 0.0.0.0:80`

并且该网站将像在开发中一样工作。再次，不建议这样做..但有效

在现实世界的情况下，出于多种原因，您更喜欢其他一些 Web 服务器来提供静态文件（在其他答案中提到）

# sql - 如何使用 LIMIT 使用聚合函数？

> ID：13457268
> 
> 赞同：7
> 
> 时间：2012-11-19T15:47:24.247
> 
> 标签：sql

有可能获得前 10 名的结果吗`SUM`？`AVG`我有几千个值的列表。我想知道前 10 个值的平均值。我试过这个：

```
SELECT AVG(some_val)
FROM table
ORDER BY some_val DESC
LIMIT 10; 
```

但这给了我表格中整个值列表的平均值，而不仅仅是前 10 个值。

我正在使用 MySQL。我想把它写成一个 SQL 语句。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:51:24.123

您需要先选择前 10 行*，*然后对它们进行平均。

```
SELECT AVG(some_val)
  FROM (SELECT * FROM table ORDER BY some_val DESC LIMIT 10) t; 
```

否则，您将选择所有行的平均值，然后返回最多 10 个结果（因为 LIMIT 最后应用）。正如您可能发现的那样，您只能返回一行（平均值），并且 LIMIT 没有效果。

# javascript - JS 正则表达式格式和列表验证

> ID：13457272
> 
> 赞同：0
> 
> 时间：2012-11-19T15:47:34.390
> 
> 标签：javascript, regex

我必须验证输入只是数字，并且它的值没有被“列入黑名单”。我做的表达如下：

```
(?=[0-9]{3})(?=(?!^(111)|^(222)|^(333)|^(123)|^(321)\b)\b\w+) 
```

我已经在正则表达式验证器上对其进行了测试，并且效果很好！

但是由于框架限制，我的正则表达式被附加的 ^...& 分隔符包围，使其与任何输入匹配。

我试图想出一个新的正则表达式，它在被分隔符包围时可以工作，但我很难弄清楚。

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:03:22.083

怎么用

```
 ^(?!111|222|333|123|321)(\d{3,})$
//  ^                                 if this is added by the framework omit
//   ^^^^^^^^^^^^^^^^^^^^^^^          the first 3 numbers must not match any of these groups
//                           ^^       digit
//                              ^^^^  at least 3 times
//                                  ^ followed by end of string. Again if added by framework omit 
```

# java - 找不到类型的验证器：java.lang.Short

> ID：13457276
> 
> 赞同：4
> 
> 时间：2012-11-19T15:47:46.807
> 
> 标签：java, hibernate, jaxb, hibernate-validator

我有一个 JAXB 生成的类，其中包含以下内容：

```
@Pattern(regexp = "[0-9]", message = "Message details here")
protected Short msgVal; 
```

当我运行 JUnit 测试以通过 Hibernate 验证该类的实例时，我得到：

`javax.validation.UnexpectedTypeException: No validator could be found for type: java.lang.Short`.

如果我注释掉`@Pattern`约束，JUnitTest 运行良好。

是否可以`@Pattern`对 Short 值进行限制？如果是这样，我错过了什么？

问候，下午。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:55:58.400

@Pattern 用于字符串，您不能将其应用于 Short。相反，您可以使用@Max 和/或@Min。@Digits 可能会更好。

```
@Digits(integer=1, fraction=0)
protected Short msgVal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:58:50.397

no `@Pattern` annotation just takes arguments as String. You can use `@Digits(message="message here", integer=32767, fraction = 0)`

# jquery - 使用 Jquery 查找按类单击的下一个要链接的元素

> ID：13457279
> 
> 赞同：0
> 
> 时间：2012-11-19T15:47:55.447
> 
> 标签：jquery

我有一些看起来像这样的 HTML 标记：

```
 <tr>
    <td>
        <a href="javascript:void(0)" class="slideNextSlidable">Click Here</a>
    </td>
</tr>
<tr class="slidable">
    <td>
    <p>Hide me</p>
    </td>
</tr> 
```

还有我的 javascript / jquery：

```
$(function() {
    $('.slideNextSlidable').click(function() {
        $(this).parent().next('.slidable').hide();
    });
});​ 
```

然而，这似乎并没有得到`.slidable` `tr`

我正在尝试隐藏单击的链接`.slidable`旁边（或最接近）的行。`.slideNextSlidable`

这嵌套在 foreach 循环中（有很多这样的行）

见小提琴：http: [//jsfiddle.net/alexjamesbrown/Zx5sR/](http://jsfiddle.net/alexjamesbrown/Zx5sR/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:50:10.723

好像您正在寻找[$.closest()](http://api.jquery.com/closest/)。来自 jQuery API 文档：

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

然后简单地说：

```
$('.slideNextSlidable').click(function() {
    $(this).closest('tr').next('.slidable').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:49:48.473

尝试`.closest()`

```
$('.slideNextSlidable').click(function() {
    $(this).closest('tr').next('.slidable').hide();
}); 
```

[**演示**](http://jsfiddle.net/Zx5sR/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:51:02.183

```
$(function() {
    $('.slideNextSlidable').click(function() {
        $(this).parent().parent().next('.slidable').hide();
    });
}); 
```

第一个父母是`td`​，它的父母是`tr`！

# c# - 自动选择和创建类对象

> ID：13457284
> 
> 赞同：2
> 
> 时间：2012-11-19T15:48:07.627
> 
> 标签：c#, java, oop, object

假设我们有一个盒子类：

```
class Box
{
    private int width;
    private int height;

    //Box Constructor
    public Box( int height )
    {
        this.height = height;
        width = 450;
    }

} 
```

以及我们主要的一系列 Box 对象：

```
Box Box1 = new Box(147);
Box Box2 = new Box(178);
Box Box3 = new Box(784); 
```

有没有办法使用“for”循环来遍历这些对象？另外，您将如何让计算机为我们创建类对象？例如。使用以下方法创建 10 个对象：

```
for( int i=0; i>10; i++)
{
    //method
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:49:58.333

使用集合（或数组，但通常应首选集合）：

```
List<Box> boxes = new ArrayList<Box>(10);
for (int i = 0; i < 10; i++) {
    boxes.add(new Box(i));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:49:05.113

您可以将所有这些对象添加到数组（或）数组列表并循环它。

例子：

```
List<Box> boxList = new ArrayList<Box>();
boxList.add(box1);
boxList.add(box2);
boxList.add(box3);

for( int i=0; i < boxList.size(); i++)
{
    //method
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:50:30.577

我想你的意思是

```
for(int i=0; i<10; i++) 
```

在Java中你会做

```
Box[] boxes = new Box[10];
for(int i=0; i<10; i++) boxes[i] = new Box(i); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T15:51:24.140

您需要将对象组合在一个列表或数组中。然后，您可以遍历数组以创建对象和/或使用它们。

```
Box[] boxes = new Box[10];
for (int i = 0; i < 10; i++)
{
    boxes[i] = new Box(100);  // Create a new box object
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T15:50:48.750

为了遍历先前创建的对象，对象必须在某种集合中。可以使用 for 循环创建对象

```
for( int i=0; i<10; i++)
{
    new Box(i);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T16:57:43.900

如果您希望避免 ArrayList 的内存和处理开销，而是使用普通数组。

**非迭代创建**

假设我们知道项目的数量。

```
Box[] boxes = {
  new Box(1),
  new Box(2),
  new Box(3)
}; 
```

**迭代创建**

```
Box[] boxes = new Box[numBoxes];
for (int i=0; i<numBoxes; i++){
  boxes[i] = new Box(i);
} 
```

**迭代访问**

```
for (Box b : boxes){
  doWhatever(b);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T16:08:25.200

您需要一个用于创建对象的引用容器并将它们添加到其中。如果您需要不同的构造函数参数（如在您的示例中），您将需要一个容器：

```
Integer[] boxSpecifications = new Integer[] { 10, 187, 781, 321 };
List<Box> boxes = new ArrayList<Box>();

for (int i = 0; i < boxSpecifications.length; i++) {
  boxes.add( new Box( boxSpecifications[ i ] ) ) ;
} 
```

# facebook - 服务器 IP 地址更改中断 Facebook 登录？

> ID：13457286
> 
> 赞同：1
> 
> 时间：2012-11-19T15:48:16.120
> 
> 标签：facebook, login, ip

今天早上，我们更改了其中一台服务器的 IP 地址（包括 DNS 条目），经过测试，我们发现我们其中一个站点的 Facebook 登录不再起作用。

该站点的沙盒版本在不同的服务器上运行，仍按预期运行。

此 IP 更改可以与问题相关联吗？我只在 Facebook 开发者网站上看到域名属性。

单击 Facebook 登录按钮时显示错误：

![单击 Facebook 登录按钮时显示错误](../Images/5574c1212bb7a3261f0cffb2068b5fb6.png)

# wpf - 事件未触发（WPF 控制和 MVVMLight）

> ID：13457287
> 
> 赞同：1
> 
> 时间：2012-11-19T15:48:15.663
> 
> 标签：wpf, mvvm-light, routed-events

我有一个带有 LowerValueChangedEvent 事件的滑块：

```
 public static readonly RoutedEvent LowerValueChangedEvent = EventManager.RegisterRoutedEvent("LowerValueChanged", RoutingStrategy.Bubble, typeof(RoutedPropertyChangedEventHandler<DateTime>), typeof(DateRangeSlider));
    public event RoutedPropertyChangedEventHandler<DateTime> LowerValueChanged
    {
        add { AddHandler(LowerValueChangedEvent, value); }
        remove { RemoveHandler(LowerValueChangedEvent, value); }
    } 
```

该事件永远不会被触发。

是注册错误吗？我在 AddHandler 行中设置了一个断点，但它永远不会被击中。

我正在使用 MVVMLight。

我不明白错误在哪里。谢谢

# ajax - 如何寻址循环命名容器内的组件

> ID：13457295
> 
> 赞同：2
> 
> 时间：2012-11-19T15:48:35.597
> 
> 标签：ajax, jsf, uirepeat, clientid

我有以下结构（省略内容和属性）：

```
<ui:repeat id="outerlist">
    <my:compositeComponent id="myCC">
        <h:panelgroup id="container">
            Some content here (outputText, etc.)
            <ui:repeat id="innerlist">
               <h:commandButton>
                   <f:ajax render=":#{cc.clientId}:container" />

<!-- all closing tags accordingly --> 
```

由于容器内的内容取决于内部列表按钮的操作，因此我需要对其进行更新。当没有 external 时，上面显示的方法有效`ui:repeat`。但是，`component not found`当有一个错误时，它会失败并出现错误。

这似乎是由于`cc.clientId`then 本身包含外部的行索引`ui:repeat`，例如`outerlist:0:myCC:container`。正如[对此答案的评论](https://stackoverflow.com/a/9701024/840977)所示，此索引 ID 在视图树的服务器端表示中不可用。而是“行索引仅存在于客户端”。我必须承认我不太了解这个索引是如何完成的，以及服务器端有什么可用的。

所以我的问题是：JSF 如何做这个索引，它（在服务器上）如何在 a 中分离不同的“实例”，`ui:repeat`并且有没有解决我想要用上面的代码实现的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:05:38.683

中指定的客户端 ID`<f:ajax>`必须在JSF 的服务器端*都可用*

```
facesContext.getViewRoot().findComponent(clientId); 
```

*（以便可以找到它以便为 ajax 响应呈现其新的 HTML 表示）*

**并**在客户端由 JavaScript 的

```
document.getElementById(clientId); 
```

*（这样一旦带有新 HTML 内容的 ajax 响应到达，它就可以由 JS 更新/替换）*

由于`<ui:repeat>`仅在视图渲染期间运行，具有行索引的客户端 ID 不代表服务器端的有效组件（来自 的“找不到组件...”错误`findComponent()`），但它确实代表客户端的有效 HTML 元素. 基本上，您需要没有服务器端行索引的客户端 ID 和客户端有行索引的客户端 ID。但这只是行不通的，`<ui:repeat>`因为它（不幸地）不可能通过单独选择特定迭代的组件树状态`findComponent()`。

当使用 JSTL`<c:forEach>`并在视图构建期间运行时动态分配组件 ID 时，它应该可以正常工作，并且实际上还会在视图树中生成多个完全值得的 JSF 组件，而不是仅在渲染期间重复使用一个多次。

```
<c:forEach varStatus="loop">
    <my:compositeComponent id="myCC">
        <h:panelGroup id="container_#{loop.index}">
            Some content here (outputText, etc.)
            <ui:repeat id="innerlist_#{loop.index}">
               <h:commandButton>
                   <f:ajax render=":#{cc.clientId}:container_#{loop.index}" /> 
```

然而，这有其自身的含义，尤其是在与复合组件一起使用时以及在嵌套循环中使用时。您的代码不够完整，无法就此提供见解和建议。例如，当这段代码被放置在一个复合组件中时，它会中断，该组件本身也在渲染时间循环中被多次重用。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense/3343681#3343681)
*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:23:20.807

作为更新：在这种特殊情况下， using`c:foreach`不是一个选项，因为两个列表都需要是动态的（尽管这条路线在其他一些情况下为我节省了很多麻烦）相反，我向复合组件添加了一个属性以传递一个可选“更新范围”像这样：

```
<cc:attribute name="updateScope" required="false" type="java.lang.String"  
              default=":#{cc.clientId}:container" /> 
```

通过设置默认值，我不需要在非循环上下文中更改组件的任何使用。但是，如果我想在 a 中使用它，`ui:repeat`我可以将一个 ID 传递给足够宽以包含外循环的属性。通常，这将`h:panelGroup id="wrapper"`是`ui:repeat`.

显然，这有一些缺点：它会更新循环的*所有*孩子，这可能会导致大量不必要的内容被重新渲染。这样做的一个令人讨厌的副作用是这些同级的错误消息和本地值被重置。在我们的一个页面中，它还导致所有展开的面板重置为关闭状态。

但是，如果这些问题不重要（例如：我的原始示例引用了一个没有输入字段或面板，但只有反馈文本和操作的组件），则附加属性可以是解决所描述的问题的简单方法问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T12:48:13.240

我只是像这样自己解决了这个问题：

```
update=":#{cc.clientId.replaceAll(':[0-9]+:', ':')}" 
```

# objective-c - 在 Xcode Storyboard 中使用 Unwind Segue 关闭 Popover

> ID：13457296
> 
> 赞同：4
> 
> 时间：2012-11-19T15:48:37.800
> 
> 标签：objective-c, ios, uipopovercontroller, xcode4.5, uistoryboardsegue

我正在使用 Xcode 4.5 和新的 iOS 6 功能来解除 segues。我在弹出框内展示了一个导航视图控制器，它以编程方式从条形按钮项中展示：

```
- (IBAction)configChartTapped:(id)sender
{
    if (self.popover.isPopoverVisible) {

        [self.popover dismissPopoverAnimated:YES];

    } else {
        UINavigationController *chartConfigNavigationController = [self.storyboard instantiateViewControllerWithIdentifier:@"GrowthChartNavigationController"];

        ConfigChartTypeViewController *configChartTypeViewController = (ConfigChartTypeViewController*) chartConfigNavigationController.topViewController;

        self.popover = [[UIPopoverController alloc]initWithContentViewController:chartConfigNavigationController];
        self.popover.popoverContentSize = CGSizeMake(320, 500);
        self.popover.delegate = self;

        [self.popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
} 
```

在这个方法旁边，我定义了一个目标来展开 segue（即解除弹出窗口）......

```
- (IBAction)cancelConfig:(UIStoryboardSegue *)segue
{
    //
} 
```

...并将其连接到导航视图控制器导航栏中的取消按钮。

将取消栏按钮连接到 cancelConfig 按钮在 Xcode 中工作正常。

但是，在运行代码时，尽管 Xcode 4.5 应该支持在展开 segues 时关闭弹出框（根据发布文档），但在单击“取消”按钮时没有任何反应。

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T22:27:33.150

展开 segue 使用运行时搜索，首先要求父视图控制器遍历通过 segue 呈现的视图控制器链，直到找到正确的展开方法。但是这里没有链，因为 popover 是通过编程而不是 popover segue 创建的。

由于没有返回父视图控制器的 segue 链接，因此不会发生回调。Unwind segues 是委托的一种抽象形式，因此这类似于忘记设置委托而不接收任何回调。

解决方案是在 Interface Builder 中使用 segue 创建弹出框，而不是使用该`configChartTapped:`方法以编程方式创建它。

**脚步：**

*首先，从呈现*视图控制器中的条形按钮项控制拖动到*呈现*的视图控制器并选择弹出框segue：

![在此处输入图像描述](../Images/dab95cba2c450ffdd4f1b04db61e8a99.png)

在*呈现*视图控制器中，实现`prepareForSegue:`获取对弹出框控制器的引用：

```
- (void)prepareForSegue:(UIStoryboardPopoverSegue *)segue
                 sender:(id)sender {
    self.popover = segue.popoverController;
} 
```

然后实施`shouldPerformSegueWithIdentifier:`以恢复类似于以下的显示/隐藏行为`configChartTapped:`：

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender {
    if (self.popover.isPopoverVisible) {
        [self.popover dismissPopoverAnimated:YES];
        return NO;
    } else {
        return YES;
    }
} 
```

最后，在 Interface Builder 中，为*呈现*的视图控制器设置正确的弹出框内容大小：

![在此处输入图像描述](../Images/1cb0cd75ead55c7c49497d6c0f49d947.png)

这将允许您`cancelConfig:`在点击弹出窗口中的取消按钮时放松，并在点击显示它的按钮时显示/隐藏弹出窗口。

# android - 如何每分钟更新android中的xml列表

> ID：13457297
> 
> 赞同：2
> 
> 时间：2012-11-19T15:48:40.537
> 
> 标签：android, listview

我目前正在开发一个生成列表的 android 应用程序。此列表是从创建 xml 文件的 php 站点生成的。这一切都很好，我得到了结果。但是当更新 php 站点时，我的 android 应用程序中的结果当然不会更新。有人可以解释一下我如何让我的 android 应用程序每分钟自动更新列表。

我已经查看了警报管理器，但我没有成功自动刷新我的列表。

请帮忙...

这是我现在用来生成列表的代码：

* * *

```
package com.pxr.tutorial.xmltest;

import java.util.ArrayList;
import java.util.HashMap;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import android.app.ListActivity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class Main extends ListActivity {

    private ServiceCount count;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        count = new ServiceCount((long) (1 * 60 * 1000), 1000); // 1 minute
        count.start();

        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        String xml = XMLfunctions.getXML();
        Document doc = XMLfunctions.XMLfromString(xml);
        int numResults = XMLfunctions.numResults(doc);

        if ((numResults <= 0)) {
            Toast.makeText(Main.this, "Geen resultaten gevonden",
                    Toast.LENGTH_LONG).show();
            finish();
        }

        NodeList nodes = doc.getElementsByTagName("result");

        for (int i = 0; i < nodes.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nodes.item(i);
            map.put("id", XMLfunctions.getValue(e, "id"));
            map.put("beschrijving", XMLfunctions.getValue(e, "beschrijving"));
            map.put("type",  XMLfunctions.getValue(e, "type"));
            map.put("datum", XMLfunctions.getValue(e, "datum"));
            mylist.add(map);
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.main,
                new String[] { "beschrijving", "type", "datum" }, new int[] {
                        R.id.item_title, R.id.item_subtitle,
                        R.id.item_subtitle1 });

        setListAdapter(adapter);
        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv
                        .getItemAtPosition(position);
                Toast.makeText(Main.this,
                        "ID '" + o.get("id") + "' was clicked.",
                        Toast.LENGTH_LONG).show();
            }
        });
    }

    private class ServiceCount extends CountDownTimer
    {
        public ServiceCount(long millisInFuture, long countDownInterval)
        {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish()
        {
            count = new ServiceCount((long) (1 * 60 * 1000), 1000); count.start(); //start timer another time
            mylist.clear();
            adapter.notifyDataSetChanged();
        }

        @Override
        public void onTick(long millisUntilFinished)
        {
            Log.d("timer", "" + millisUntilFinished / 1000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:01:39.060

您不应该每分钟都轮询您的服务器。这样的问题有一个解决方案：[GCM](http://developer.android.com/guide/google/gcm/index.html)。

如果您在服务器上实现它，它会告诉所有设备与您的应用程序，数据已更新，然后您可以轮询您的服务器。或者，如果要下载的数据不多，甚至可以使用 GCM 推送您的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:56:37.343

为此，我使用了 Timer 和[Service](http://developer.android.com/reference/android/app/Service.html)。

```
public class ServiceCount extends CountDownTimer
{
    public ServiceCount(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish()
    {
        // update data
    }

    @Override
    public void onTick(long millisUntilFinished)
    {
        Log.d("timer", "" + millisUntilFinished / 1000);
    }
}

ServiceCount count = new ServiceCount((long) (1 * 60 * 1000), 1000); // 1 minute
count.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:52:46.667

您可以设置一个计时器： http: [//developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)并在工作完成后再次设置它。我也会为此使用服务。但：

*   当设备处于待机状态时，这将不起作用，因为网络已关闭。
*   如果您强制设备唤醒，它将耗尽电池。

您确定需要每分钟重复一次连接吗？

我敢打赌，如果您允许用户手动更新数据，每 5-10 分钟刷新一次数据就可以了，就像谷歌邮件一样。

# meteor - 在 Meteor 中，我如何访问请求对象？

> ID：13457298
> 
> 赞同：4
> 
> 时间：2012-11-19T15:48:44.840
> 
> 标签：meteor

我在 Windows 上使用 Meteor 0.5.0。到目前为止，我在启动和运行我的应用程序时没有遇到很多问题。我的应用程序将接受来自外部站点的请求，他们将通过查询字符串发送所需的信息。

我看了看：[如何在 Meteor 中访问请求参数？](https://stackoverflow.com/questions/11799079/how-do-i-access-request-parameters-in-meteor)，但是当我将“foo”更改为根时，它只是加载到空白屏幕。我仍然需要正常加载页面。

如何访问流星中的请求对象？我想看看 server_variables 以及查询字符串。

提前感谢您提供的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:21:38.103

另一篇文章中的示例很好，但需要多 1 个命令，并且需要删除 2 个命令才能使其按您喜欢的方式工作。

```
SomeCollection = new Collection("...")
fibers = __meteor_bootstrap__.require("fibers");
connect = __meteor_bootstrap__.require('connect')
app = __meteor_bootstrap__.app

router = connect.middleware.router (route) ->
  route.get '/', (req, res,next) ->
    Fiber () ->
      SomeCollection.insert(...)
    .run()
    next()
app.use(router) 
```

这应该可以解决您的问题。

# javascript - JQuery / JS 变量以提醒文本

> ID：13457300
> 
> 赞同：0
> 
> 时间：2012-11-19T15:48:50.603
> 
> 标签：javascript, jquery

我有这个代码：

```
$('#output').html("<strong>id:</strong>"+id); 
```

然后

```
<div id="output">this element will be accessed by jquery and this text replaced</div> 
```

以上工作正常，但我需要的是输出进入警报所以....

```
<a href="#" onclick="alert('OUTPUT GOES HERE')">Alert Me</a>  <- See here 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:51:17.743

给锚点某种`id`可用于查找的类型或属性：

```
<a href="#" id="alertOutput">Alert Me</a> 
```

然后绑定到它的点击事件来提醒元素的文本内容`#output`：

```
$("#alertOutput").on("click", function(e){
    e.preventDefault();
    alert( $("#output").text() );
}); 
```

该`e.preventDefault()`部分将防止在单击锚点时页面跳回文档顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:51:52.647

不确定我是否完全理解您的要求，绑定点击事件而不是`onclick`属性。

HTML：

```
<a href="#" id="alertAnchor">Alert Me</a> 
```

JavaScript：

```
$('#alertAnchor').on('click', function(e) {
    e.preventDefault();
    alert($('#output').text());
}); 
```

希望这会有所帮助，如果你澄清你在找什么我可以编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:56:48.607

或者如果你很懒，想要快速修复：

```
<a href="#" onclick="e.preventDefault(); alert($('#output').html())">Alert Me</a>  <- See here 
```

# python - 安装 Kojoney（SSH 蜜罐）时 Conch 出错

> ID：13457303
> 
> 赞同：0
> 
> 时间：2012-11-19T15:48:57.967
> 
> 标签：python, ssh, centos, honeypot

我正在尝试在 Centos 6.3 上设置 kojoney，一个 ssh 蜜罐，但是我在成功完成安装时遇到了问题。作为参考，我一直在使用两个教程：

[http://www.howtoforge.com/how-to-set-up-kojoney-ssh-honeypot-on-centos-5.5](http://www.howtoforge.com/how-to-set-up-kojoney-ssh-honeypot-on-centos-5.5) http://bruteforce.gr/kojoney-ssh-honeypot-installation-centos-and-configuration .html

我正在尝试安装和不安装来自伊朗蜜罐项目的其他库，但我遇到了同样的问题。开始安装后，开始安装 Conch 库时出现错误。它吐出很多无符号字符错误，但以：

```
IOError: [Errno 2] No such file or directory: 'twisted/conch/_version.py' 
```

我已经下载了最新版本的 Conch，并将其放在库目录中，但我遇到了同样的错误。如果有人对 kojoney 有任何经验，我会喜欢任何可以帮助我的意见。另外，如果那里有更简单/更好的 ssh 蜜罐，请告诉我，我对此没有太多经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:03:53.657

找到了解决问题的方法，从 Ubuntu 论坛上的帖子中找到。

[http://ubuntuforums.org/showthread.php?t=920590](http://ubuntuforums.org/showthread.php?t=920590)

本质上，我只是下载了新版本的 Conch，将其解压缩，将目录名称更改为与 Kojoney 捆绑的旧版本，然后重新压缩并安装。

但是，还有另一个失败之处在于它不知道 man 目录的路径。我刚刚输入 /usr/share/man/man1 并且安装成功了。如果其他人有类似的问题，并找到了不同的解决方法，请在此处发表评论。

# python - mysql查询在mysql-python中得到不同的结果

> ID：13457308
> 
> 赞同：0
> 
> 时间：2012-11-19T15:49:23.387
> 
> 标签：python, mysql, mysql-python

我从两个不同的界面得到了不同的结果，我理解为相同的查询。第一个是 mysql shell：

```
mysql> select * from table where sub_date > '2012-11-08' order by sub_date asc limit 1\G
*************************** 1\. row ***************************
                 id: **176041922** 
```

第二个是我放在一起的一个小函数来测试一个查询，该查询将根据日期时间字段“sub_date”提取一定数量的记录：

```
>>> r_query('>', '2012-11-08', '1')
((**18393664L**, 3, .....) 
```

这是python模块：

```
import MySQLdb
myuser = MySQLdb.connect(host='localhost', user='myuser', passwd='mypass', db='mydatabase')
cur = myuser.cursor()

def r_query(oper, date, limit):
    cur.execute("""select * from table where sub_date %s %s order by sub_date asc limit %s""" % (oper, date, limit)) 
    result = cur.fetchall()
    print result 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:56:39.213

我对python几乎一无所知。但我很确定您需要在日期参数周围加上额外的引号，以便在查询字符串中引用它。可能更像：

```
cur.execute("""select * from table where sub_date %s '%s' order by sub_date asc limit %s""" % (oper, date, limit)) 
```

（注意第二个 %s 周围的额外引号）。

# c# - 优化 sql server 2008 上的插入查询

> ID：13457310
> 
> 赞同：0
> 
> 时间：2012-11-19T15:49:29.957
> 
> 标签：c#, sql-server-2008

我最近构建了一个应用程序来测试将 100000 行写入文本文件和 100000 插入数据库之间的速度差异

这是代码的核心

```
 private void RunTestBtn_Click(object sender, RoutedEventArgs e)
    {
        Stopwatch FFtimer = new Stopwatch();
        FFtimer.Start();
        RunFFTest();
        FFtimer.Stop();
        TimeSpan FFts = FFtimer.Elapsed;
        string FFelapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
        FFts.Hours, FFts.Minutes, FFts.Seconds,
        FFts.Milliseconds / 10);
        FFLabel.Content = "Flat File: " + FFelapsedTime;

        Stopwatch Datatimer = new Stopwatch();
        Datatimer.Start();
        DataFFTest();
        Datatimer.Stop();
        TimeSpan Datats = Datatimer.Elapsed;
        string DataelapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
        Datats.Hours, Datats.Minutes, Datats.Seconds,
        Datats.Milliseconds / 10);
        DBLabel.Content = "Database: " + DataelapsedTime;

    }
    void RunFFTest()
    {
        using(StreamWriter writer = new StreamWriter(@"F:\test\FFtest.txt"))
        {
            for(int i = 0; i< 100000; i++)
            {
            writer.WriteLine("test");
            }

        }
    }

    void DataFFTest()
    {
        using (SqlConnection conn = new SqlConnection("Data Source=EMMY;Initial Catalog=MyDB;User Id=SqlServiceUser;Password=MyPassword;"))
        {
            conn.Open();
            for (int i = 0; i < 100000; i++)
            {
                using (SqlCommand cmd = conn.CreateCommand())
                {
                    cmd.CommandText = "INSERT INTO TestTable VALUES ('Test')";
                    cmd.ExecuteNonQuery();
                }
            }
        }

    } 
```

最终结果是，Flat 文件写入耗时 1 毫秒，而 sql 插入耗时 9 分 41 秒。我知道数据库需要更长的时间，但是有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:54:31.233

可能的选择...

1.  使用事务（每个事务执行多次插入）

2.  使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/7ek5da1a%28v=vs.100%29.aspx) API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:54:09.170

是的，将其作为一个单独的插入语句来执行，而不是多个。

```
INSERT INTO TestTable VALUES ('Test'), ('Test'), ('Test') ...."; 
```

# sql - SQL - 获取 XML 标记名称和值

> ID：13457314
> 
> 赞同：0
> 
> 时间：2012-11-19T15:49:37.603
> 
> 标签：sql, sql-server

我有一张临时表。**该表的列数和列名可以不同。因为该临时表是从另一个查询生成的**。意味着它可以是 3-15 。我使用以下命令从临时表中获取 XML：

```
DECLARE @XML XML 
SET @XML= (SELECT * FROM ##temp FOR XML PATH('')) 
```

示例输出：`<Name>abc</Name><ID>3</ID><Address>100/8 NY</Address>`

现在我想将标签名称及其对应的值放入@variable，比如@StoreData。

Say`select @StoreDate`将打印以下预期输出预期输出：

名称='abc' 和 ID='3' 和地址='100/8 NY'

我怎么得到它。提前致谢。注意：我使用的是 MS SQL 2005 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:09:54.510

这将满足您的要求...

```
;with cte as
(
    select 
        xr.value('fn:local-name(.)','varchar(50)') name, 
        xr.value('.','varchar(20)') val
    from @xml.nodes('//.') xq(xr)
    where xr.value('fn:local-name(.)','varchar(50)')<>''
)
    select STUFF(
        (select ' and ' + name + '='''+val+'''' from cte for xml path('')),1,4,'') 
```

但是，如果您尝试构建 sql 过滤器字符串，我建议使用`sp_executesql`with 参数而不是构建 SQL 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:27:45.463

试试这个; 这是工作的[小提琴](http://sqlfiddle.com/#!3/d41d8/6383)

**你的变量：**

```
DECLARE @XX XML = '<Name>abc</Name><ID>3</ID><Address>100/8 NY</Address>' 
```

**询问：**

```
SELECT 'Name = ''' + x.value('Name[1]','VARCHAR(100)') + ''' and ' +
       'ID = ''' + x.value('ID[1]','VARCHAR(100)') + ''' and ' + 
       'Address = ''' + x.value('Address[1]','VARCHAR(100)') + ''''
FROM @XX.nodes('/') MyXml(x) 
```

**输出：**

```
Name = 'abc' and ID = '3' and Address = '100/8 NY' 
```

# c# - 验证 ListBoxItem 而不是 ListBox

> ID：13457318
> 
> 赞同：1
> 
> 时间：2012-11-19T15:49:53.617
> 
> 标签：c#, wpf, validation, listbox

我有一个 ListBox 绑定到实现 IDataErrorInfo 的对象列表。我已将 ListBox 上的 ValidatesOnDataErrors 属性设置为 True。如果我选择了一个无效的项目，我的 ListBox 周围会出现一个红色边框。如何修改我的 ItemContainerStyle 以使红色边框出现在所选项目而不是实际的 ListBox 周围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:33:13.933

您可以直接在 ListBox 的 ItemTemplate 中设置 ValidatesOnDataErrors，在将绑定项的属性绑定到显示它的控件的 Binding 上。这应该使红色边框出现在相关控件周围。如果除此之外，边框仍然显示在整个 ListBox 上，您可以在 ListBox 上设置 Validation.ErrorTemplate="{x:Null}"。

如果您不希望边框围绕 ItemTemplate 中的一个控件显示，而是围绕整个 Item，您可以尝试设置 Listboxes ItemBindingGroup。

# xml - Bash：将 XML 块解析为数组

> ID：13457319
> 
> 赞同：2
> 
> 时间：2012-11-19T15:49:57.113
> 
> 标签：xml, arrays, bash, parsing

我有一个类似 xml 的文本文件，我想将其解析为一个数组。输入文件看起来像这样

```
<AA>
  <BB>content 1</BB>
</AA>
<AA>
  <BB>content 2</BB>
</AA> 
```

我希望输出类似于（意味着每个数组元素一个完整的 AA 块）：

```
ARRAY[0]=<AA><BB>content 1</BB></AA>
ARRAY[1]=<AA><BB>content 2</BB></AA> 
```

我试过了

```
ARRAY=(`cat input.txt | grep -A 3 \<AA\>`) 
```

但这只会为每个数组元素返回一行。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:07:17.323

XML 和 shell 脚本不能很好地混合。如果可以，请考虑使用不同的文件格式或不同的脚本语言。

```
(
    IFS=$'\n'
    ARRAY=($(grep -A 3 '<AA>' test.xml | awk '{printf "%s",$0} $0~"</AA>" {print}'))

    for MATCH in "${ARRAY[@]}"; do
        echo "$MATCH"
    done
) 
```

解释：

1.  将 IFS 设置为`\n`控制数组元素的拆分方式。我们不希望它们在空格或制表符上分开，只是换行。
2.  `ARRAY=($(COMMAND))`捕获 COMMAND 的输出并将每一行作为一个数组元素（因为我们将 IFS 设置为`\n`）。
3.  `{printf "%s",$0}`打印没有尾随换行符的每一行。
4.  `$0~"</AA>" {print}`每当我们看到结束标签时打印一个换行符`</AA>`。
5.  整个事情都在括号中以限制`$IFS`更改的范围。我们不希望这种改变是永久性的；最好将其限制为子外壳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:22:17.217

If your XML was [well-formed](http://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling), the following example demonstrates how it could be properly parsed using [xpath](http://en.wikipedia.org/wiki/XPath):

```
#!/bin/bash

XML="
<doc>
<AA>
  <BB>content 1</BB>
</AA>
<AA>
  <BB>content 2</BB>
</AA>
</doc>
"

CONTENT1=`echo $XML | xmllint --xpath "string((/doc/AA/BB)[1])" -`
CONTENT2=`echo $XML | xmllint --xpath "string((/doc/AA/BB)[2])" -`

echo $CONTENT1
echo $CONTENT2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:09:34.690

```
sed '/^<AA>$/,/^<[/]AA>$/{H;/<[/]AA>/{s:.*::g;x;s:\n::g;s:[ ]*<B:<B:g;b};d}' FILE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T07:17:58.270

假设`<AA>`和`</AA>`是固定名称，这是一个纯 bash 解决方案

```
#!/bin/bash
declare -a ARRAY
while read -r line; do
    [ "$line" =~ ^\<BB\>$ ] && ARRAY+=("<AA>$line</AA>")
done < file.xml 
```

# c# - 如何在 Windows 应用程序运行时更改文本框的 FontFamily（代码隐藏）

> ID：13457330
> 
> 赞同：1
> 
> 时间：2012-11-19T15:50:28.860
> 
> 标签：c#, readonly, windows-applications, font-family

如何在 Windows 应用程序运行时（代码隐藏）中更改 TextBox 的 FontFamily？
为什么下面的代码有错误：

```
txtSubjectIn_Spammer_Send.Font.FontFamily = new FontFamily("Arial"); 
```

它的错误是：

> 无法将属性或索引器“System.Drawing.Font.FontFamily”分配给 - 它是只读的

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:53:34.247

```
Font oldFont = txtSubjectIn_Spammer_Send.Font;
txtSubjectIn_Spammer_Send.Font = new Font("Arial", oldFont.Size, oldFont.Style); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:53:24.813

您不能更改`FontFamily`派生自 的`Font`，但*可以*更改`Font`，如下所示：

```
txtSubjectIn_Spammer_Send.Font = new Font("Arial", 10, FontStyle.Bold); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-18T12:15:37.483

我相信这会奏效，你实际上非常接近：

```
txtSubjectIn_Spammer_Send.FontFamily = new FontFamily("Arial"); 
```

# python - Python Pandas：是什么导致不同列选择方法的速度变慢？

> ID：13457335
> 
> 赞同：1
> 
> 时间：2012-11-19T15:50:40.753
> 
> 标签：python, benchmarking, pandas, apply

在看到[这个](https://stackoverflow.com/questions/8916302/selecting-across-multiple-columns-with-python-pandas)关于在 Pandas 中复制 SQL select-statement-like 行为的问题后，我添加了[这个答案](https://stackoverflow.com/a/13419324/567620)，显示了两种可以缩短该问题[已接受答案](https://stackoverflow.com/a/8916746/567620)中给出的冗长语法的方法。

在玩过它们之后，我的两种较短的语法方法明显变慢了，我希望有人能解释为什么

您可以假设下面使用的任何函数都来自 Pandas、IPython，或者来自[上面链接的问答](https://stackoverflow.com/questions/8916302/selecting-across-multiple-columns-with-python-pandas)。

```
import pandas
import numpy as np
N = 100000
df = pandas.DataFrame(np.round(np.random.rand(N,5)*10))

def pandas_select(dataframe, select_dict):
    inds = dataframe.apply(lambda x: reduce(lambda v1,v2: v1 and v2,
                           [elem[0](x[key], elem[1])
                           for key,elem in select_dict.iteritems()]), axis=1)
    return dataframe[inds]

%timeit _ = df[(df[1]==3) & (df[2]==2) & (df[4]==5)]
%timeit _ = df[df.apply(lambda x: (x[1]==3) & (x[2]==2) & (x[4]==5), axis=1)]

import operator
select_dict = {1:(operator.eq,3), 2:(operator.eq,2), 4:(operator.eq,5)}
%timeit _ = pandas_select(df, select_dict) 
```

我得到的输出是：

```
In [6]: %timeit _ = df[(df[1]==3) & (df[2]==2) & (df[4]==5)]
100 loops, best of 3: 4.91 ms per loop

In [7]: %timeit _ = df[df.apply(lambda x: (x[1]==3) & (x[2]==2) & (x[4]==5), axis=1)]
1 loops, best of 3: 1.23 s per loop

In [10]: %timeit _ = pandas_select(df, select_dict)
1 loops, best of 3: 1.6 s per loop 
```

我可以购买 , 函数的用户`reduce`，`operator`以及我的函数的函数开销`pandas_select`可能会减慢它。但这似乎太过分了。在我的函数内部，我使用相同的语法，`df[key] logical_op value`，但它要慢得多。

我也很困惑为什么这个`apply`版本`axis=1`要慢得多。从字面上看，它应该只是语法的缩写，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:01:45.937

当您编写时`df[df.apply(lambda x: (x[1]==3) & (x[2]==2) & (x[4]==5), axis=1)]`，您正在为数据框中的 100000 行中的每一行调用您的 lambda。这会产生大量开销，因为必须为每一行执行 Python 方法调用。

当您编写`df[(df[1]==3) & (df[2]==2) & (df[4]==5)]`时，没有开销；相反，该操作在单个操作中应用于每一列，并且循环在具有矢量化潜力的本机代码中执行（例如 SSE）。

这不是 Pandas 独有的。一般来说，如果您将数组和矩阵作为整体处理，而不是在单个项目上调用 Python 函数或内部循环，那么任何 numpy 操作都会快得多。

# mysql - 删除 MySQL 表中的行

> ID：13457343
> 
> 赞同：0
> 
> 时间：2012-11-19T15:51:11.160
> 
> 标签：mysql

我有两个表，mailbox_conversation 和mailbox_message。两个表都有一个共同的列，conversation_id。mailbox_conversation 表还有其他名为 is_system 和主题的列。

如果满足以下条件，我想删除 mailbox_message 表中的特定对话 ID：

*   is_system =是
*   主题不喜欢 %Gift from%

这是我写的代码：

```
$result42 = mysql_query("select * from ".TABLE_PREFIX."mailbox_message
         using ".TABLE_PREFIX."mailbox_conversation, ".TABLE_PREFIX."mailbox_message
          where ".TABLE_PREFIX."mailbox_conversation.conversation_id = ".TABLE_PREFIX."mailbox_message.conversation_id
        and ".TABLE_PREFIX."mailbox_conversation.subject NOT LIKE '%Gift from%'
         and ".TABLE_PREFIX."mailbox_conversation.is_system = 'yes' ");

$num42=mysql_numrows($result42);   **<<-- Line 73** 
```

出于测试目的，我做了一个 select 语句并希望输出行数 $num42

这是我收到的错误：

```
Warning: mysql_numrows(): supplied argument is not a valid MySQL result resource in
/home/mayhem/public_html/videochat/admin/erasesysmess.php on line 73 
```

怎么了？

# android - 如何设置 ArrayList > 在 ArrayAdapter 中

> ID：13457352
> 
> 赞同：0
> 
> 时间：2012-11-19T15:51:37.137
> 
> 标签：android, android-listview

我们可以将`ArrayList`包含设置`HashMap`为`ArrayAdapter`吗？

我在用着：

```
ArrayList<HashMap<String,String>> items = new ArrayList<HashMap<String,String>>();
ArrayAdapter<ArrayList<HashMap<String, String>>> ad = new ArrayAdapter<ArrayList<HashMap<String,String>>>(this, android.R.layout.simple_list_item_1,items); 
```

但这给了我一个错误说：

> 构造函数 ArrayAdapter>>(searchname, int, ArrayList>) 未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:26:56.803

`ArrayAdapter`想知道列表中项目*的*类型，而不是列表本身的类型。拆下外壳`ArrayList<>`，它应该可以工作。

```
ArrayList<HashMap<String,String>> items =
        new ArrayList<HashMap<String,String>>();

ArrayAdapter<HashMap<String, String>> ad =
        new ArrayAdapter<HashMap<String,String>>(this,
            android.R.layout.simple_list_item_1,items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T15:51:29.550

看看这个链接[Android Array Adapter with ArrayList and ListView not updated when the arraylist is changed](https://stackoverflow.com/questions/13274952/android-array-adapter-with-arraylist-and-listview-not-updating-when-the-arraylis)。

基本上你需要通过 add 方法将你的 ArrayList 添加到 ArrayAdapter 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T10:42:04.937

您可以将类型转换`HashMap<String,String>>`为类。例如，如果 hashmap 的键是国家，值是语言，你可以用这两个变量（国家，语言）创建一个名为“国家”的类。然后 AdapterClass 必须扩展`ArrayAdapter<Country>`，在 getView 方法中您可以访问每个 Country 的两个变量。

# fedora - fedora 的 libfuse2 和 libfuse-dev 库是什么？

> ID：13457360
> 
> 赞同：7
> 
> 时间：2012-11-19T15:52:01.503
> 
> 标签：fedora, fuse

我正在做一个项目，我必须使用 FUSE。我必须安装 libfuse2 和 libfuse-dev（用于 ubuntu），但我没有为 fedora 创建这个库，你能告诉我什么是 fedora 的等效库吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T16:15:42.457

嗯，不确定这是否可行。但我相信 Fedora 使用的是 Yum 包系统而不是 Apt。但我找到了这个[链接](http://forums.fedoraforum.org/showthread.php?t=112090)

根据论坛帖子，在你最喜欢的 shell 上试​​试这个：

```
 yum install fuse fuse-devel 
```

PS我没有测试过这个，因为我不在Fedora机器前。

# ios - 使用 ALAssetRepresentation 在 ios 中保留 EXIF + 旋转图像

> ID：13457363
> 
> 赞同：1
> 
> 时间：2012-11-19T15:52:06.827
> 
> 标签：ios, xcode, rotation, uiimage, exif

嗨，我在从 CameraRoll 上传照片、保留 EXIF 并同时旋转图像时遇到问题，因此向上和向下是向下...

到目前为止，我已经成功地上传了完整的 EXIF 图像，但随后我会失去方向，并且在网络上图像有时会放下。我也可以在应用程序中旋转图像，使其成为 UIImage 并使用在堆栈流中找到的示例代码，但随后我将丢失 EXIF。

为了从带有 EXIF 的 Photoalbum 获取图像，我使用这个：` ALAssetRepresentation *assetRepresentation = [asset defaultRepresentation];

```
ALAssetRepresentation *rep = [asset defaultRepresentation];
Byte *buffer = (Byte*)malloc(rep.size);
NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];` 
```

如果我将图像保留为 NSdata，则 EXIF 是完整的。如果我让它 UIImage EXIF 丢失。有谁知道如何做到这一点？

/knut

# xaml - AppBar在动画期间不透明

> ID：13457364
> 
> 赞同：0
> 
> 时间：2012-11-19T15:52:09.927
> 
> 标签：xaml, windows-runtime, winrt-xaml

我将 AppBar 的不透明度更改为半透明。问题是当条从底部向上滑动时（在动画期间） - 它不是透明的，并且仅在半秒或类似的时间后才变得透明。

这是正常行为吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T23:42:41.683

在 Windows 8.1 中，以下代码适用于我：

```
<Page.TopAppBar>
        <AppBar  x:Name="homeMenuTop">
            <AppBar.Background>
                <SolidColorBrush Opacity="0.5"
                                 Color="Black" />
            </AppBar.Background>
 </AppBar>
</Page.TopAppBar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:20:54.593

你可能想在 Blend 中编辑 appbar 过渡来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:28:05.013

这是正常行为。发生的情况是 AppBar 元素应用了一系列转换，以使其具有弹出效果。因此，在动画完成之前不会应用您设置的属性。有几种方法可以修改这个...

1 - 为 AppBar 创建一个模板，定义您希望在整个转换过程中修改的属性。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a6c7f640-61c4-49c1-8e1a-3a2a07d3ddd1/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a6c7f640-61c4-49c1-8e1a-3a2a07d3ddd1/)

2 - 从代码访问转换本身以在转换代码中修改您希望更改的属性

3- 在 XAML 中创建一个转换集合，如下所述：

[http://www.scottlogic.co.uk/blog/colin/2011/10/winrt-transitions-creating-fast-and-fluid-metro-uis/](http://www.scottlogic.co.uk/blog/colin/2011/10/winrt-transitions-creating-fast-and-fluid-metro-uis/)

# grails - Grails：如何将整个模型从一个控制器转发到另一个控制器？

> ID：13457366
> 
> 赞同：11
> 
> 时间：2012-11-19T15:52:11.387
> 
> 标签：grails, model, controller, forward, chain

如何在不使用重定向的情况下将整个模型从一个控制器传递到另一个控制器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T15:52:11.387

我为此挣扎了很长时间，所以决定回答我自己的问题...

用这种方法是很有可能的`forward`。与该`chain`方法不同，[文档](http://grails.org/doc/latest/ref/Controllers/forward.html)没有提及该`model`属性，但 [至少在 grails 2.1.1 中] 它实际上是受支持的。

**在控制器一中：**

```
 def model = [
        firstname:           params.firstname, 
        lastname:            params.lastname
    ]

    forward(controller:"controllerName",action:"index", model:model) 
```

**在控制器二中：**

```
 render (view: "/page.gsp") 
```

**在页面.gsp**

```
 Welcome ${firstname} ${lastname},
    ... 
```

就那么简单...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T14:53:27.020

如果您想传递整个对象（其中包含它们自己的方法），请参阅我关于[在 grails 中的控制器操作之间传递对象的最佳方式的答案](https://stackoverflow.com/questions/9751211/best-way-to-pass-objects-between-controller-actions-in-grails/39642192#39642192)

关键是1）在源动作中使用“链动作”，2）在目标动作中使用chainModel

# ruby-on-rails - 配置 Rails 邮件程序

> ID：13457368
> 
> 赞同：0
> 
> 时间：2012-11-19T15:52:17.697
> 
> 标签：ruby-on-rails, ruby, email

我不知道电子邮件是如何工作的，我想要的是通知电子邮件，像大多数论坛或网页一样发送某种电子邮件进行验证。

我有以下邮件类

```
class UserMailer < ActionMailer::Base
  default from: "myemail@gmail.com"

  def verification_email(user)
    @user = user
    mail( :to => user.email, :subject => "Notification")
  end
end 
```

然后我执行`UserMailer.verification_email( user).deliver`发送电子邮件问题是我没有收到任何电子邮件，`user.email`并且`myemail@gmail`我的代码具有所有正确的值，但是我想我必须配置一些东西才能从我的 gmail 帐户使用 rails 发送电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:56:19.860

[http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html) - 请参阅第 5 节，Action Mailer 配置。这将向您展示如何设置 ActionMailer 以使用 Gmail 作为您的邮件服务器。这应该让你启动并运行。

# c# - 如何从 C# 调用具有 char[] 作为 OUT 参数的非托管函数？

> ID：13457375
> 
> 赞同：7
> 
> 时间：2012-11-19T15:52:44.440
> 
> 标签：c#, .net, c, pinvoke, marshalling

比如说，我有一个暴露在 DLL 上的函数原型：

```
int CALLBACK worker (char* a_inBuf, int a_InLen,
                     char** a_pOutBuf, int* a_pOutLen,
                     char** a_pErrBuf, int* a_pErrLen) 
```

我确信从我的 C# 代码中调用该 DLL 函数非常容易，但它不适用于以下代码：

```
[DllImport("mydll.dll")]  
     public static extern int worker(
         [In, MarshalAs(UnmanagedType.LPArray)] byte[] inBuf,  
         int inputLen,  
         [Out, MarshalAs(UnmanagedType.LPArray)] byte[] outBuf,  
         out int outputLen,  
         [Out, MarshalAs(UnmanagedType.LPArray)] byte[] errBuf,  
         out int errorLen);

... 

int outputXmlLength = 0;
int errorXmlLength  = 0;

byte[]  outputXml = null;
byte[]  errorXml  = null;
worker(input, input.Length, output, out outputLength, error, out errorLength); 
```

当我要为我的非托管库获取内存时，我遇到了访问冲突（因此取消引用传递的指针）`output`：`error`

```
*a_ppBuffer = (char*) malloc(size*sizeof(char)); 
```

1.  如何`DLLIMPORT`在我的 C# 代码中为此函数编写语句？

2.  我如何实际调用该函数以便可以访问`a_pOutBuf`而`a_pErrBuf`不是`null`从内部访问`worker`（即使用真正的双指针）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:33:35.687

您当前的定义将不起作用。该`worker`函数在函数内部分配内存并写入该内存。

[P/Invoke 层](http://msdn.microsoft.com/en-us/library/fzhhdwae.aspx)不支持编组以这种方式分配的C 样式数组，因为它无法知道调用返回时数组的大小（与 a 不同[`SAFEARRAY`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482%28v=vs.85%29.aspx)）。

这也是为什么从 API 函数返回指向数组的指针通常不是一个好主意，并且 Windows API 的编写方式是内存分配由*调用者*处理。

也就是说，您想将 P/Invoke 声明更改为`worker`：

```
[DllImport("mydll.dll")]  
public static extern int worker(
    [In, MarshalAs(UnmanagedType.LPArray)] byte[] inBuf,  
    int inputLen,  
    ref IntPtr outBuf, 
    ref int outputLen,  
    ref IntPtr errBuf, 
    ref int errorLen
); 
```

在这样做时，您表明您将手动编组数组（将为您设置`outBuf`and`errBuf`参数）；您正在传递对指针的引用（双间接，即您的`char**`），然后必须使用其他指标从它们中读取以进行边界检查（在本例中为`outputLen`and`errorLen`参数）。

您将在返回时从指针中编组数据，如下所示：

```
int outputXmlLength = 0;
int errorXmlLength  = 0;

IntPtr output = IntPtr.Zero;
IntPtr error = IntPtr.Zero;

worker(
    input, 
    input.Length, 
    ref output, 
    ref outputLength, 
    ref error, 
    ref errorLength
);

// Get the strings.
string outputString = Marshal.PtrToStringAnsi(
    output, 
    outputLength
);
string errorString = Marshal.PtrToStringAnsi(
    error, 
    errorLength
); 
```

也就是说，你还有另一个问题。因为内存是在函数内部分配的，所以你必须释放内存。由于您`malloc`用于分配内存，因此您需要将两个`IntPtr`实例传递回非托管代码才能`free`调用它们。

如果您在非托管代码中使用[`LocalAlloc`](http://msdn.microsoft.com/en-us/library/aa366723.aspx)or分配内存，[`CoTaskMemAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms692727%28v=vs.85%29.aspx)那么您可以分别在[类](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)[`FreeHGlobal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.freehglobal.aspx)上使用or方法来释放托管端的内存。[`FreeCoTaskMem`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.freecotaskmem.aspx)[`Marshal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)

# php - Wordpress：在前端显示作者的草稿和待审核的帖子

> ID：13457380
> 
> 赞同：1
> 
> 时间：2012-11-19T15:53:01.203
> 
> 标签：php, wordpress, content-management-system

我需要一种方法让用户查看他发布的帖子的草稿和待审核。无需访问仪表板 - 这意味着从前端。

我希望每个人都在不同的页面中。

我在自定义模板中尝试了此功能，但不幸的是它不起作用。

```
<?php query_posts('&post_type=post&post_status=draft'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:32:49.173

在您的情况下，您需要`query_posts()`使用数组作为参数进行调用。尝试这个：

```
<?php
$args= array(
    'post_type' => 'post',
    'post_status' => 'draft'
);
query_posts($args);
?> 
```

将其插入页面模板*中循环*开始之前。

来源：[WordPress › 支持 > 操作方法和故障排除](http://wordpress.org/support/topic/display-list-of-drafts-to-subscribers#post-1373098)。

# php - Symfony2：“致命错误：类服务...”尝试在 config.yml (TCPD) 中包含一个类作为服务

> ID：13457381
> 
> 赞同：5
> 
> 时间：2012-11-19T15:53:01.133
> 
> 标签：php, symfony, fatal-error

我正在尝试在带有服务容器的 Symfony2 (2.1.4-DEV) 中包含类 TCPDF 的扩展。为此，我编辑`symfony/app/config/config.yml`了：

```
services:
  extend_pdf:
    class: Acme\VSBundle\extend_pdf 
```

在文件中`symfony/src/Acme/VSBundle/extend_pdf.php`，我有一个虚拟类，例如：

```
<?php
namespace Acme\VSBundle;

// extend TCPF with custom functions
class extend_pdf extends TCPDF {

}

?> 
```

我在控制器中加载，例如：

```
function testAction() {
    $extendpdf = $this->get('extend_pdf');
    return new Response('success');
} 
```

这给了我休闲错误：

> 致命错误：在第 417 行调用堆栈的 /home/user/public_html/Acme/Symfony/app/cache/dev/appDevDebugProjectContainer.php 中找不到类“Acme\VSBundle\extend_pdf”：...

缓存是空的，我不知道为什么找不到我的班级。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:48:19.240

您的命名空间名称不正确：ModurexCRM\VSBundle，请更正命名空间名称。

# java - 在Java中实现“计时器”的正确方法？

> ID：13457382
> 
> 赞同：4
> 
> 时间：2012-11-19T15:53:04.967
> 
> 标签：java, timer

我需要对 Java 代码进行一些定期检查。有些事情在单独的线程中执行，我需要每 5 秒检查一次，然后每 10 分钟检查一次，等等。

我应该如何在 Java 中实现这些“计时器”？我应该循环然后让线程休眠一段时间吗？

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:53:55.590

您应该使用[`ScheduledThreadPoolExecutor`class](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)，它正是这样做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:54:09.047

您可能需要考虑使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)实现 ScheduledThreadPoolExecutorService

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)：

> 一个 ThreadPoolExecutor，可以额外安排命令在给定延迟后运行，或定期执行。当需要多个工作线程时，或者需要额外的灵活性或 ThreadPoolExecutor（此类扩展）的功能时，此类比 Timer 更可取

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T15:56:03.850

有很多方法可以做到这一点，我会使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)

```
ScheduledExecutorService scheduler = ...

final ScheduledFuture<?> fiveSecHandle =
   scheduler.scheduleAtFixedRate(task5, 5, 5, SECONDS);
final ScheduledFuture<?> beeperHandle =
   scheduler.scheduleAtFixedRate(task10, 10, 10, SECONDS);

 scheduler.schedule(new Runnable() {
   public void run() { beeperHandle.cancel(true); }
 }, 60 * 60, SECONDS); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T16:14:53.977

计时器通常由 GUI 框架提供，因为大多数 GUI 框架要求所有绘图命令和 GUI 修改仅在主线程上发出。其他具有类似要求的类似框架（即某些任务仅在某些条件下完成）也将提供与框架施加的限制兼容的计时器实现。尽可能使用您需要兼容的框架提供的计时器。

否则如果你想自己实现，至少有两种常见的方法来实现定时器，一种是使用休眠到下一个事件的线程，另一种在GUI框架中更常见的是使用事件循环。对于间隔精度并不重要的长时间运行的任务，另一种常见的方法是使用 cron（Unix 和类 Unix 系统）或计划任务（Windows）或警报意图（Android）。

> 这样做的正确方法是什么？

忽略其他人所说的具体方法，正确的时间方法取决于您要做什么。无论您想要短间隔还是长间隔，您是否需要非常精确的计时，或者您是否可以接受稍晚和/或提前的事件，您是否需要关心节省电池/CPU，您是否需要固定的开始间隔或固定的结束 - to-start 间隔，任务是否快速完成或者是否需要一些时间才能完成，是否要允许另一个任务在前一个任务开始之前启动，是否需要持久性（即是否希望能够继续系统重新启动或进程终止后的计时器）。所有这些都会影响使用的最佳计时器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T18:15:46.023

如果您的应用程序很大并且您还使用负载平衡服务器，您可以尝试使用 Quartz 调度程序进行时间管理活动。

# java - 检查 Android Java 中是否存在布局

> ID：13457390
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:53:30.553
> 
> 标签：java, android

我有布局的字符串名称：

```
String l_name = "fragment_item_detail"; 
```

我想检查此布局是否存在（检查 isset R.layout.fragment_item_detail 是否存在）并获取此 int id。怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:03:25.297

您可以使用以下示例代码执行此操作（如果您在 Activity 中）：

```
boolean layoutExists = getResources().getIdentifier(l_name, "layout", getPackageName()) != 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:04:46.303

尝试这个：

```
int layoutId = 0;

try {
   Class res = R.layout.class;
   Field field = res.getField( l_name );
   layoutId = field.getInt(null);
}
catch (Exception e) {
   e.printStackTrace();
} 
```

# c# - 单元测试 HFT 股票价格 - 由于价格波动，断言不断失败

> ID：13457391
> 
> 赞同：0
> 
> 时间：2012-11-19T15:53:33.077
> 
> 标签：c#, unit-testing, mstest, assert

对于检索实时股票价格的应用程序，我发现我的单元测试断言返回假阴性，这是由于两个调用之间的价格波动填充了持有`expected`和`actual`测试值的变量。

虽然这是意料之中的，但我很想听听关于如何解决这个问题的不同方法。我最初的想法是允许波动幅度（检索到的股票价格之间的差异约为 2%）

***这是向 Yahoo 发出 Web 请求以检索股票价格的代码。***

* * *

```
 public string makeWebRequest(string stockSymbol, string dataRequestID)
    {
        string request = webClient.DownloadString("http://finance.yahoo.com/d/quotes.csv?s=" + stockSymbol + 
                                                  "&f=" + dataRequestID).Replace("\r\n", "").Replace("\"", "");

        if (request.Equals("N/A") || request.Equals("0"))
            return "0.00";

        return request;
    }

    public string getPrice(string stockSymbol)
    {
        return makeWebRequest(stockSymbol, "l1");
    } 
```

**这是对股票价格发出“硬编码”（已知是成功的）Web 请求并将结果分配给`expected`变量的单元测试。然后，执行另一个调用，以便仅使用应用程序 object.function 检索价格，然后将其分配给`actual`变量。**

***调用之间的增量为 300 毫秒***

* * *

```
 [TestMethod]
    public void getPrice()
    {
        string expected = request.DownloadString("http://finance.yahoo.com/d/quotes.csv?s=" + testSymbol + "&f=l1").Replace("\r\n", "").Replace("\"", "");
        string actual = yahoo.getPrice(testSymbol);

        Assert.AreEqual(expected, actual);
    } 
```

* * *

有什么建议么？还是我应该学会忍受它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T16:09:00.163

保存您对服务器的调用接收到的内容，然后编写单元测试来验证您是否可以解析该字符串。您还可以编写一个测试来验证您是否尝试为指定的符号点击正确的 url。那些将是单元测试。你的是集成测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:12:32.990

您可以尝试模拟 DownloadString 方法并返回一些已知值（来自文件或测试中的硬编码变量）。现在，您不仅要测试代码，还要测试互联网连接、雅虎网站等。

# javascript - 滚动页面会导致按钮出现问题

> ID：13457393
> 
> 赞同：-4
> 
> 时间：2012-11-19T15:53:41.297
> 
> 标签：javascript, html, button, scroll

我刚刚完成了一个网站，一切正常（我的想法）直到我发现一个无法修复的巨大 BUG：

我有一个导航栏（png 文件）并在其上添加了按钮（简单的 DIV 元素），当第一次打开页面时，一切都很好，但是如果您稍微滚动页面，按钮就无法正常工作。

请检查此链接：（向下滚动页面，您会注意到该按钮不再交互）

[http://www.genius-solutions.net/GSIS/index.html](http://www.genius-solutions.net/GSIS/index.html)

但是，如果您将光标移到按钮上方一点，您会发现它们：

(HTML - JavaScript)

这里是 CSS 部分：

```
#btn {position:absolute;left:0px;top:0px;z-index:4;}
#btn1 {position:absolute;left:80px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0.0;cursor:pointer;}
#btn2 {position:absolute;left:230px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0.0;cursor:pointer;}
#btn3 {position:absolute;left:380px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0;cursor:pointer;}
#btn4 {position:absolute;left:530px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0;cursor:pointer;}
#btn5 {position:absolute;left:680px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0;cursor:pointer;}
#btn6 {position:absolute;left:830px;top:280px;width:140px;height:35px;background:#DDE6E3;opacity:0;cursor:pointer;}

#html, body {
    background:#002a4c;
    overflow:scroll;
    width:1024px;
    height:768px;
    margin: 20px auto; /* center */ padding: 20px;

} 
```

这里是 HTML 部分：

```
 <body >
    <div id = 'applet' home='579' services='1437' solutions='1192' partners='100' aboutus='654' contacts='216'>

       <div id='applet_t'>

            <div id='btn'>
                <div id='btn1'></div>
                <div id='btn2'></div>
                <div id='btn3'></div>
                <div id='btn4'></div>
                <div id='btn5'></div>
                <div id='btn6'></div>
            </div>

    </div>
        <div id='inf'></div>

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:35:34.277

您的问题在于 IMO 对`absolute`元素定位的使用不当。滚动页面后，实际“命中”占位符的位置会随页面移动，但不会随背景移动。

测试用例：尝试将您的页面向上移动一点，您将能够“单击”实际按钮上方。

除非您有充分的理由使用绝对定位元素，否则您`static`的大多数元素都使用 == 默认定位。

# varnish - varnishlog 命令在 ubuntu 中不起作用

> ID：13457397
> 
> 赞同：1
> 
> 时间：2012-11-19T15:53:58.673
> 
> 标签：varnish

谁能帮助我？我在 VMware 中使用 ubuntu 12。并且此命令 varnishlog 不起作用。当我输入“varnishlog”时，系统会无限期地挂在那里。'varnish' 命令看起来不错，配置文件是默认的。我也尝试在 varnishlog 之前使用 sudo，仍然无法正常工作。

# gis - 基于热图的等高线提取

> ID：13457405
> 
> 赞同：1
> 
> 时间：2012-11-19T15:54:30.080
> 
> 标签：gis, qgis, mapbox

我一直在玩 Mapbox 的关于[将热图转换为等高线](http://mapbox.com/blog/contour-lines-density-mapping/)的博客文章，但我一直停留在这个过程的提取部分。

我使用 CSV 插件创建了一个点矢量图层，然后创建了一个基于该点的热图栅格层，但之后我似乎无法看到基于该栅格层的等高线。当我查看属性并选择分类时，它似乎没有列出任何符号。

我猜这可能是某种类型错误，因为我必须根据地图单位而不是米创建栅格图层，但我不知道如何纠正它。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:47:54.777

对。假期周末后，我想通了。

这基本上是 CRS 的类型错误。虽然没有明确说明，但我与 MapBox 取得了联系，发现他们在谷歌墨卡托工作。当您最终必须将 .shp 文件导入 MapBox/Tile Mill 时，它也是一个完全可以接受的 CRS。

# c# - 为什么 GetIsNetworkAvailable() 总是返回 true？

> ID：13457407
> 
> 赞同：14
> 
> 时间：2012-11-19T15:54:35.903
> 
> 标签：c#, windows, networking

我有这个方法：

```
public static void testConnection()
    {
        if (System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
        {
            System.Windows.MessageBox.Show("This computer is connected to the internet");
        }
        else
        {
            System.Windows.MessageBox.Show("This computer is not connected to the internet");
        }
    } 
```

我想它会告诉我连接是否可用，但即使我确定没有连接，它也总是返回 true（并打印第一条消息）。我做错了什么？

PS：我还在学习C#。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-17T11:30:22.787

我认为这种方法更合适：

```
 public static bool getIsInternetAccessAvailable()
    {
        switch(NetworkInformation.GetInternetConnectionProfile().GetNetworkConnectivityLevel())
        {
            case NetworkConnectivityLevel.InternetAccess:
                return true;
            default:
                return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-19T16:04:22.037

如果我错了，请纠正我，但据我所知，您使用的方法是检查*网络*连接，而不一定是*互联网*连接。我假设如果您在任何类型的网络上，无论互联网是否可用，这都会返回 true？看到[这个](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable.aspx)。

我注意到检查互联网连接的一种方法如下：

```
private bool IsInternetAvailable()
{
    try
    {
        Dns.GetHostEntry("www.google.com"); //using System.Net;
        return true;
    } catch (SocketException ex) {
        return false;
    }
} 
```

上面的代码可以在下面[的帖子](http://www.zubair.info/blog/2008/10/29/vbnet-how-to-check-if-you-are-connected-to-internet-using-vb-2005.html)中找到（在 VB.Net 中通过阅读来自 Joacim Andersson [MVP] 的评论） 。

*注意：最新的编辑是由[AceInfinity](https://stackoverflow.com/users/1923282/aceinfinity)提出的，但在社区审核中被拒绝。我的声誉太低，无法覆盖这一点，所以我自己做出了改变。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:59:41.393

来自[msdn](http://msdn.microsoft.com/ru-ru/library/system.net.networkinformation.networkinterface.getisnetworkavailable%28v=vs.95%29.aspx)：

> 在很多情况下，设备或计算机未连接到有用的网络，但仍被认为可用，GetIsNetworkAvailable 将返回 true。

这些示例之一可能是您的情况：

> 例如，如果运行应用程序的设备连接到需要代理的无线网络，但未设置代理，则 GetIsNetworkAvailable 将返回 true。GetIsNetworkAvailable 何时返回 true 的另一个示例是，如果应用程序正在连接到集线器或路由器的计算机上运行，​​而该集线器或路由器已失去上游连接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-20T12:38:50.980

请注意，我们使用的是`Windows.Networking.Connectivity.NetworkInformation`而不是`System.Net.NetworkInformation`命名空间。

```
public bool checkInternetAccess()
{
    var connectivityLevel = Windows.Networking.Connectivity.NetworkInformation
                           .GetInternetConnectionProfile().GetNetworkConnectivityLevel();

    return connectivityLevel == NetworkConnectivityLevel.InternetAccess;
} 
```

基本上是ventura8所说的。我会评论他的解决方案，提到命名空间，但我缺乏足够的声誉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T16:02:18.743

来自 MSDN（重点是我的）：

> **如果任何网络接口**被标记为“up”并且不是环回或隧道接口，则认为网络连接可用。

如果“连接”是指 Internet 连接，那么您应该`DllImport`使用[InternetCheckConnection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384346%28v=vs.85%29.aspx)或`InternetQueryOption`.

相反，如果您只需要知道计算机是否连接到任何*有用*的 LAN，那么您可以做的最好的事情是自己迭代网络连接并过滤（使用NetworkInterfaceType 和[）](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.networkinterfacetype.aspx)您也不感兴趣的内容。`IsReceiveOnly``OperationalStatus`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T16:05:03.710

> 我想它会告诉我连接是否可用，但即使我确定没有连接，它也总是返回 true（并打印第一条消息）。

您对“连接”的含义与手册有不同的看法。就操作系统而言，当您的 NIC 有一条修补的以太网电缆连接时，或者当您的无线网卡连接到无线接入点，或者任何连接处于活动状态时，您就有了连接。

该手册还解释了这一点：

> [**NetworkInterface.GetIsNetworkAvailable**](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable(v=vs.100).aspx)：
> 
> 指示是否**有任何**网络连接可用。

如果您想检测 Internet 连接，请查看[WinINet API](http://msdn.microsoft.com/en-us/library/aa385483(v=vs.85).aspx)[`InternetGetConnectedState()`](http://msdn.microsoft.com/en-us/library/aa384702%28VS.85%29.aspx)中的（或[`InternetCheckConnection()`](http://msdn.microsoft.com/en-us/library/aa384346(v=vs.85).aspx)检查特定主机的可访问性）方法。

# c# - 输入数字或 Q 退出

> ID：13457411
> 
> 赞同：3
> 
> 时间：2012-11-19T15:54:53.577
> 
> 标签：c#

大家好，我在完成已设置的任务时遇到了一些问题

任务的第一部分是输出具有以下规则的价格表：

最多 50 个的价格为每个 5 英镑。51 到 80 之间的价格为 4 英镑，而 81 到 100 之间的价格最低为 2.50 英镑。使用循环结构和选择语句（if.. 等），您的程序应输出 10 到 100 的倍数的小部件价格图表。

我已经这样做了，但是在输出表格以输入许多小部件后，任务的第二部分让我很难过。然后，您应该计算成本并输出价值。如果用户输入“q”或“Q”，程序应该终止。

这是完整的代码

```
using System;
namespace w5Task3
{
class Program
    { public static void Main ( string[] args )
            {

            double PriceEach1 = 5;
            double PriceEach2 = 4;
            double PriceEach3 = 2.50;
            double Quantity = 10;
            int UserOrder=0;

            Console.WriteLine("\n\nBelow is the price chart:\n\n");
            Console.WriteLine("WidgetQuantity\t\t\tPrice\n");
            while (Quantity <=100)

                {   

                    double Price1 = PriceEach1*Quantity;
                    double Price2 = PriceEach2*Quantity;
                    double Price3 = PriceEach3*Quantity;

                        if (Quantity <=50)      
                    {
                        Console.WriteLine("\t{0}\t\t\t{1:C}", Quantity, Price1);
                    }

                        if(Quantity >=51 && Quantity <=80)      
                    {
                        Console.WriteLine("\t{0}\t\t\t{1:C}", Quantity, Price2);
                    }

                        if (Quantity >80 && Quantity <=100)
                    {
                        Console.WriteLine ("\t{0}\t\t\t{1:C}",Quantity, Price3);                        
                    }
                Quantity +=10;
                }

            while (UserOrder >=0)
                {
                    try
                        {
                        Console.WriteLine("Enter the amount of widgets you would like to purchase or press q to quit");
                        string temp = Console.ReadLine();
                        if (temp =="q") break;
                        if (temp =="Q") break;

                        int.TryParse(temp, out UserOrder);

                        double UserPrice;

                        if (UserOrder <=50)
                            {
                                UserPrice = UserOrder*5;
                                Console.WriteLine("The price is {0:C}",UserPrice);
                            }

                        if (UserOrder >=51 && UserOrder <=80)
                            {
                                UserPrice = UserOrder*4;
                                Console.WriteLine("The price is {0:C}",UserPrice");
                            }

                        if (UserOrder >80)
                            {
                                UserPrice = UserOrder*2.5;
                                Console.WriteLine("The price is {0:C}",UserPrice");
                            }

                        }
                            catch(Exception)
                                {
                                    Console.WriteLine("You have entered an incorrect value. Please enter a number or press q to quit");
                                }
                }

            }
    } 
```

我遇到问题的部分是：

```
 while (UserOrder >=0)
                {
                    try
                        {
                        Console.WriteLine("Enter the amount of widgets you would like to purchase or press q to quit");
                        string temp = Console.ReadLine();
                        if (temp =="q") break;
                        if (temp =="Q") break;

                        int.TryParse(temp, out UserOrder);

                        double UserPrice;

                        if (UserOrder <=50)
                            {
                                UserPrice = UserOrder*5;
                                Console.WriteLine("The price is {0:C}",UserPrice);
                            }

                        if (UserOrder >=51 && UserOrder <=80)
                            {
                                UserPrice = UserOrder*4;
                                Console.WriteLine("The price is {0:C}",UserPrice");
                            }

                        if (UserOrder >80)
                            {
                                UserPrice = UserOrder*2.5;
                                Console.WriteLine("The price is {0:C}",UserPrice");
                            }

                        }
                            catch(Exception)
                                {
                                    Console.WriteLine("You have entered an incorrect value. Please enter a number or press q to quit");
                                }
                }
} 
```

我可以让程序退出或执行一个 UserPrice，但我需要让它根据订购的数量更改价格。

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:04:47.580

第 67 行和第 73 行的常量表达式中有换行符！

修复这些，一切运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:09:26.943

我认为您的问题是第 64 行和第 70 行 UserPrice 之后的报价。

```
Console.WriteLine("The price is {0:C}",UserPrice"); 
```

去掉它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:01:53.073

最简单的方法是`UserOrder`在计算该部分订单的价格后进行调整。你可以朝任何一个方向走，但它基本上看起来像：

```
if (HasThisQuantityRange)
{
   Total += ThisAmount * (Lower of: ThisQuantity or UserOrder);
   UserOrder -= (Lower of: ThisQuantity or UserOrder);
}

if (UserOrder > 0 && HasAdjustedQuantityRange)
{
   Total += ThisAmount * (Lower of: ThisQuantity or UserOrder);
   UserOrder -= (Lower of: ThisQuantity or UserOrder);
} 
```

等等。

显然，这都是伪代码，您需要自己实现它，但这有望让您找到正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:07:22.403

我无法理解您遇到的问题到底是什么。您是在努力为订单进行正确的计算，还是 Quit 行为没有按照您期望的方式运行。

一般来说，我认为在你的 while 循环条件中使用像这样的瞬态变量是不好的形式。当我希望控制台应用程序重复时，我通常会设置一个专门用于循环条件的变量，如下所示：

```
bool isRunning = true;
while (isRunning)
{
     .... 
```

然后当你检查你的输入

```
if (temp.ToUpper() == "Q")
{
     isRunning = false;
     break;
} 
```

# syntax - 应为 UNIT，但已找到 PROGRAM

> ID：13457412
> 
> 赞同：0
> 
> 时间：2012-11-19T15:54:58.313
> 
> 标签：syntax, syntax-error, pascal

```
program MouseInput;
Uses WinCrt,Mouse, sysutils,Graph;
Var
   GraphicsDriver, GraphicsMode,
   ErrCode : smallint;
   x, y: word;

Begin
x:=GetMouseX;
Y:=GetMouseY;

     Writeln('Initialising Graphics, please wait...');
     GraphicsDriver := Detect;
InitGraph(GraphicsDriver, GraphicsMode,'');
 x := GetmouseX();
 y := GetmouseY();
     OuttextXY(0,0,inttostr(x));
     readln();
end. 
```

我有这个代码，但是出现了这个语法错误：1 / 1 mouse.pas 致命：语法错误，预期为单位，但找到了程序，但这是一个程序而不是一个单元？

如果我将鼠标更改为 WinMouse，它会消失，但会抛出其他错误，提示找不到标识符 GETMOUSEX 和 GETMOUSEY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:42:58.420

如果您查看文件夹units/rtl，您会发现单元文件“mouse.o”和“mouse.ppu”。我认为文件名之间存在冲突，因为编译器期望另一个单元文件来更新这些。通过将文件名更改为“mousetest.pas”，编译器一切正常。

# joomla2.5 - 在创建新用户时向 joomla 添加 Dropbox 选项

> ID：13457414
> 
> 赞同：0
> 
> 时间：2012-11-19T15:55:10.623
> 
> 标签：joomla2.5, dropbox, dropbox-php

我正在使用[这个插件](http://www.individual-it.net/component/option,com_dropbox/Itemid,58/view,dropbox/)来允许将 dropbox 集成到 joomla 中。当用户登录 te 系统时，在您的保管箱帐户中创建一个文件夹，一切正常。

我需要的是将此选项添加到用户创建页面。我试图在控制器 com_users/controllers/user.php 中编辑保存功能

```
JModel::addIncludePath (JPATH_ROOT . DS . 'components' . DS . 'com_dropbox' . DS . 'models');

$dropbox =& JModel::getInstance('dropbox', 'dropboxModel'); 
```

我需要在这里将值传递给模型：

```
/**
     * Creates a new folder
     *
     * This method returns the information from the newly created directory
     *
     * @param string $path
     * @return stdclass
     */
    public function createFolder($path="") {

        $path= &Jfolder::makeSafe($path);

        if (trim($path)=="")
        {
            //OK lets try to create the chroot
//              $path=$this->dropbox->chroot;
        }

        $result = $this->auth->fetch('fileops/create_folder', array('path' => $this->dropbox->folder . '/' . $path, 'root' => $this->root),'POST');
        return json_decode($result);

    } 
```

各种尝试都没有结果......

请帮助我，谢谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:04:12.477

您必须包含模型文件并使用类名调用函数

在插件中添加以下行：

```
jimport( 'joomla.filesystem.folder' );
require_once JPATH_ROOT . '/components/com_dropbox/models/filename.php';

dropboxModelfilename::functionname(); 
```

# c++ - 执行文件 I/O 时出现异常的意外结果

> ID：13457416
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:55:13.083
> 
> 标签：c++, file, exception, file-io, exception-handling

我有一个带有一些文件 I/O 的小代码

```
bool loadConfigFile(std::string configFileName)
{
    std::ifstream configFile;
    try
    {
        configFile.open(configFileName, std::ifstream::in);
        if(true != configFile.good())
        {
            throw std::exception("Problem with config file");
        }
    } catch (std::exception &e)
    {
        fprintf(stderr, "There was an error while opening the file: %s\n %s\n" , configFileName, e.what());
        configFile.close();
    }

    configFile.close();
    return true;
} 
```

每次我在没有提供作为参数的文件的情况下启动程序时，我都会在输出（随机字符）或运行时出现意外错误时得到一些垃圾。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:58:12.697

`"%s"`期望一个以 null 结尾的`char`数组作为其输入，但代码正在传递`configFileName`，即`std::string`. 使用`std::string::.c_str()`或`std::cerr`改用：

```
std::cerr << "There was an error while opening the file: "
          << configFileName << '\n'
          << e.what()       << '\n'; 
```

请注意，`ifstream`构造函数有一个变体，它接受要打开的文件名，如果流是打开的，析构函数将关闭流，因此可以省略显式调用`open()`and `close()`：

```
try
{
    std::ifstream configFile(configFileName);
    if (!configFile.is_open())
    {
        throw std::exception("Failed to open '" + configFileName + "'");
    }
}
catch (const std::exception& e)
{
    // Handle exception.
    std::cerr << e.what() << '\n';
    return false;
} 
```

# ruby-on-rails-3 - 如何在不使用javascript的情况下在rails标签中显示动态内容

> ID：13457417
> 
> 赞同：1
> 
> 时间：2012-11-19T15:55:22.433
> 
> 标签：ruby-on-rails-3, views

我找不到如何在 Rails 中显示动态标签，我尝试使用该`:value => show_name`属性但它不起作用，它只显示`Show name`. 这是查看代码

```
<p>
   <div class="control-group">
           <%= f.label :show_name, :value => :show_name, :class => 'control-label' %> 
           <%= #this next line fails with undefined method `show_name' for #<ActionView::Helpers::FormBuiler>
              #f.label f.send :show_name, :class => 'control-label'
           %> 
       <div class="controls">
           <%= f.text_field :variable_value, :class => 'text_field' %> 
           <%= f.hidden_field :variable_id, :class => 'text_field' %> 
       <%= f.hidden_field :show_name, :class => 'text_field' %> 
       </div>
   </div>
<p> 
```

如果需要，这里是我模型中的 show_name 定义。

```
 def show_name
    Variable.find_by_id(self.variable_id).name
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:04:28.763

好的，所以我最终找到了一个非常好的解决方案`DRY`，感谢[这篇文章](https://stackoverflow.com/questions/2392837/fields-for-dynamic-label/11982752#comment18404465_11982752)。我唯一要做的就是解释一下要做什么：

首先，我们将假设我们有嵌套表单的最复杂的情​​况，因此我们在方法`fields_for`内部使用`form_for`：

```
 <!-- f represents the form from `form_for` -->
  <%= f.fields_for :nested_model do |builder| %>
    <p>
      <div class="control-group">

         <!-- here we are just calling a helper method to get things DRY -->

         <%= builder.label return_value_of_symbol(builder,:show_name), :class => 'control-label' %> 
         <div class="controls">
            <%= builder.text_field :variable_value, :class => 'text_field' %> 
            <%= builder.hidden_field :variable_id, :class => 'text_field' %> 
         </div>
      </div>
    </p>
  <% end %> 
```

请注意，我们在帮助程序的参数中包含了构建器对象（在 fields_for 调用中指定）。

在我们的助手中，我们定义了`return_value_of_symbol`函数

```
 def return_value_of_symbol(obj,sym)
    # And here is the magic, we need to call the object method of fields_for
    # to obtain the reference of the object we are building for, then call the
    # send function so we send a message with the actual value of the symbol 
    # and so we return that message to our view.  
    obj.object.send(sym)
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:11:32.523

使用`label_tag`，将 show_name 放在控制器上的实例变量上，然后像这样使用：

```
<%= label_tag @show_name, nil, :class => 'control-label' %> 
```

编辑：

在您的 上`application_helper.rb`，创建一个与此类似的辅助方法：

```
def show_name(name)
  content_tag(:label, name, :class => 'control-label')
end 
```

然后你可以`show_name(name)`像这样在你的视图上使用：

```
<%= show_name(@name) %> 
```

只需记住填充`@name variable`.

# shell - 带有空格的scala进程无法正常工作

> ID：13457421
> 
> 赞同：2
> 
> 时间：2012-11-19T15:55:52.070
> 
> 标签：shell, scala, process, pipe, spaces

我有一个如下所示的 scala 进程命令来使用 linux bash egrep 命令。但是在终端和我的 scala 生成的文件中的搜索结果是不一样的。Scala 结果包含具有“新”和“异常”的所有内容，而我希望输出仅包含具有“新异常”的行。我在这里错过了什么吗？请帮忙

```
 if (("egrep -r -I -n -E \"*new Exception*\" /mysource/" #| 
            "grep -v .svn").! == 0) {
        out.println(("egrep -r -I -n -E \"*new Exception*\" /mysource/" #| 
            "grep -v .svn").!!)
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:32:22.340

[文档](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.sys.process.package)说（在“运行什么以及如何运行”下）：`Implicitly, each process is created either out of a String, with arguments separated by spaces -- no escaping of spaces is possible -- or out of a scala.collection.Seq, where the first element represents the command name, and the remaining elements are arguments to it. In this latter case, arguments may contain spaces`

因此，显然，如果您需要向命令行传递一个带有空格的单个参数，例如`new Exception`，您需要从 a`Seq`而不是单个`String`.

# objective-c - 这是对 NSNotificationCenter 的有效使用吗

> ID：13457423
> 
> 赞同：1
> 
> 时间：2012-11-19T15:55:54.290
> 
> 标签：objective-c, ios, ios5

我来自 .NET Web 应用程序背景，刚刚开始 iOS 开发。我的应用程序的初始设计侧重于 NSNotificationCenter。我对此相当满意，直到我看到各种帖子解释如何到达 NSNotificationCentre 是一个常见的新手错误。

这是我要解决的问题的简化版本：

我的应用程序试图显示使用 Web 服务调用填充的消息列表，想想 Facebook 消息传递。

首次加载应用程序时，它会从服务器拉取一组消息并将它们显示在一个表格中给用户。用户可以添加新消息（通过 API 发回），应用程序可以接收有关添加到提要的新消息的推送通知。

消息永远不会保存到磁盘上，所以我只是使用 POCO 作为模型来保持简单。

我有一个 MessageFeedController 负责填充消息提要视图（在故事板中）。我还有一个消息提要模型，它存储当前检索到的值并具有各种方法：

*   (void) loadFromServer;
*   (void) createMessage: (DCMMessage*) 消息；
*   (void) addMessage: (DCMMessage*) 消息；
*   (NSArray*) 消息；
*   (int) 未读消息；

我目前的实现是这样的：

用例 1：初始负载

1.  当视图首次出现时，会调用“loadFromServer”方法。这会填充消息集合并引发 NSNotificationCenter 事件。
2.  控制器观察到这个事件，并在收到它时填充表格视图

用例 2：新消息

1.  当用户单击“添加”按钮时，会出现一个新视图，他们输入他们的消息，点击发送，然后视图被关闭。
2.  这会调用模型上的 createMessage 方法，该方法调用 API
3.  一旦我们得到响应，模型就会引发 NSNotificationCenter 事件
4.  MessageFeedController 再次侦听此事件并重新填充表

用例 3：推送消息

1.  应用程序打开时收到推送通知，其中包含新消息详细信息
2.  AppDelegate（或其他类）将调用模型上的 addMessage 方法，将其添加到集合中
3.  再一次，假设 MessageFeed 视图是打开的，它会重新填充

在所有三种情况下，MessageFeed 视图都会更新。除此之外，BadgeManager 还监听这些事件，这些事件负责设置应用程序图标徽章和标签栏徽章，在这两种情况下，徽章编号都与未读消息的数量有关。

另一个视图也可能打开并正在侦听这些事件，该视图包含消息摘要，因此需要知道集合何时更改。

是的，感谢您的支持，我的问题是：这似乎是对 NSNotificationCentre 的有效使用，还是我滥用了它？

我担心的一个问题是，如果消息集合在重新填充消息表的过程中发生变化，我不能 100% 确定会发生什么。我唯一能看到这种情况发生的情况是收到关于新消息的推送通知。在这种情况下，表格的人口是否必须在对 NSNotification 采取行动之前完成？

谢谢你的帮助

担。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:04:40.780

换句话说，只要消息列表更新，您就会发布通知。这是对 NSNotificationCenter 的完全有效的使用。

另一种选择是使用[Key-Value Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。

您的控制器（和其他任何人）可以注册为“消息”属性的观察者，并且会在该属性更改时收到通知。在模型方面，您可以免费获得 KVO；只需调用一个名为的方法`setMessages:`将触发 KVO 更改通知。您还可以手动触发通知，如果需要，KVO 通知可以包括已添加、删除或更改的数组索引。

KVO 是执行此类更改通知的标准化方式。[在使用Cocoa Data Binding](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/WhatAreBindings.html)实现 OS X 应用程序时，这一点尤为重要。

NSNotificationCenter 更加灵活，您可以将任何附加信息与每个通知捆绑在一起。

确保您的消息列表仅在主线程上更新，并且消息列表在没有发布相应的更改通知的情况下永远不会被修改，这一点很重要。您的控制器还应该注意忽略这些通知，只要它不是最顶层的视图控制器或不在屏幕上。在 中注册更改通知`viewWillAppear:`并在中取消注册的情况并不少见`viewWillDisappear:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:07:18.357

在我看来，使用委托协议模式将更适合这种情况。考虑您的“api 层”需要在应用程序中的多个视图控制器中使用的场景。如果要向其他开发人员介绍您的代码，他们将不得不四处寻找通知中心订阅，而不是仅仅遵循类似协议的干净“接口”。

话虽如此，您的代码可以正常工作，这是对通知中心的有效使用。使用基于协议的方法只是我个人对“更清洁”代码的偏好。看看 iOS SDK 本身，你会看到 Apple 自己使用协议和使用通知的场景。我觉得理解和使用协议比必须四处挖掘并确定我必须听什么通知要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:17:32.453

`NSNotifications`接收者代码在发布后立即同步运行，因此重新填充期间的新消息将加入该执行队列的后面。总的来说，这对我来说似乎是有效的，并且它在视图控制器和模型之间保持了合理的分离程度。

Depending on the number of classes that are likely to want to listen for the same information arriving, you may want to use a delegate pattern, maybe keeping an dictionary of delegate objects, but I personally don't feel as though this scales so well, and you also have to take care of nil-ing out delegates if a page is dealloced to avoid crashes. To sum up, your approach seems good to me.

# c# - 动态生成一个从其他两个数据表中选择行的数据表

> ID：13457444
> 
> 赞同：0
> 
> 时间：2012-11-19T15:56:57.327
> 
> 标签：c#, sql, winforms

我有一个 SQL 表，它存储向客户收取的不同费率。该表还包括一个“默认”费率列表，如果客户没有特定的费率，则使用这些费率。我需要的是，一旦用户从组合框中选择了一个客户，为该客户创建一个费率表，由默认值或特定于该客户的费率或两者的组合组成，如下所示：

```
Client     Type of Work     Rate
ABC Ltd       Type A        100
XYZ & Co      Type B        150
Default       Type A        125
Default       Type B        175 
```

因此返回的费率如下所示：

```
ABC Ltd       Type A        100
              Type B        175   (default)
XYZ & Co      Type A        125   (default)
              Type B        150
Anyone else   Type A        125   (default)
              Type B        175   (default) 
```

数据库中的信息结构如下

```
Table for clients
Table for Types of Work
Table for Rates   (foreign keys linking to clients and types of work) 
```

谁能解释如何最好地使用 SQL 语句、winforms 应用程序中的 C# 例程或两者的组合来获得上述结果。

PS。我很抱歉，但我不确定如何在本网站的表格中设置我的数据。

到目前为止我已经尝试过什么

```
public static DataTable TableOfRates(string pIPName = "Default")
    {
        try
        {
            string sqlText1 = "SELECT RateID, IPName, RateName, Rate, DateFrom, DateTo, Active, " +
                              "(RateName + ': £' + CONVERT(VARCHAR, Rate) + CONVERT(VARCHAR, " +
                              "(CASE WHEN Active = '1' THEN ' (Active)' ELSE ' (Inactive)' END))) AS ListRate " +
                              "FROM tblRates WHERE IPName IS NULL AND Active = 'true';";
            aSqlQuery cQ1 = new aSqlQuery(sqlText1, "table");
            DataTable defaultRates = cQ1.TableResult;

            string sqlText2 = "SELECT RateID, IPName, RateName, Rate, DateFrom, DateTo, Active, " +
                              "(RateName + ': £' + CONVERT(VARCHAR, Rate) + CONVERT(VARCHAR, " +
                              "(CASE WHEN Active = '1' THEN ' (Active)' ELSE ' (Inactive)' END))) AS ListRate " +
                              "FROM tblRates WHERE IPName = '" + pIPName + "' " +
                              "AND Active = 'true';";
            aSqlQuery cQ2 = new aSqlQuery(sqlText2, "table");
            DataTable clientRates = cQ2.TableResult;

            foreach(DataRow defaultRow in defaultRates.Rows)
            {
                string defaultType = defaultRow["RateName"].ToString();
                foreach (DataRow clientRow in clientRates.Rows)
                {
                    string clientType = clientRow["RateName"].ToString();
                    if (defaultType == clientType)
                    {
                        clientRates.Rows.Add(defaultRow.ItemArray);
                    }
                }
            }

            return clientRates;
        }
        catch (Exception eX)
        {
            throw new Exception("cRate: Error compiling Table Of Rates (mode = '" + pIPName + "')" + Environment.NewLine + eX.Message);
        }
    } 
```

但是，无论我使用 Add Row、Import Row 还是 Add Item Array，都会出现错误。它似乎不喜欢使用来自多个表的数据行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:43:36.840

如果你真的需要加载一个 DataTable：

```
CREATE TABLE 
     #MyTempTable (myColumn1 DataType, myColumn2 DataType, myColumn3 DataType) 
INSERT INTO 
     #MyTempTable(myColumn1, myColumn2, myColumn3)
SELECT 
     f.Bar1, o.Bar2, o.Bar3 FROM FooTable AS f 
INNER JOIN 
     TableFoo o ON f.Bar1 = o.Bar1 
```

通过一些调整，此脚本将创建一个临时表，只要您的连接保持活动状态并包含您需要的其他表中的数据，该表就会持续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:10:50.070

You must have a table that lists clients and jobs - with that in mind you might be doing something like the following

```
SELECT
  CASE R1.RATE WHEN NULL THEN R2.RATE else r1.rate AS RATE END
FROM
  CLIENTJOBS C LEFT JOIN RATES R1 ON
    R1.CLIENT = C.CLIENT AND R1.WORKTYPE = C.WORKTYPE
  JOIN RATES R2 ON
    R2.WORKTYPE = C.WORKTYPE AND R2.CLIENT = 'DEFAULT' 
```

bear in mind this is untested guess-code, but hopefully points you in the right direction

# c# - 在另一个类中重试按钮访问方法

> ID：13457448
> 
> 赞同：1
> 
> 时间：2012-11-19T15:57:02.893
> 
> 标签：c#, wpf, button, window

我在一个窗口中有一个按钮，它基本上通过一些代码重新运行（重试按钮）

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();
    }

    private void btnRetry_Click(object sender, RoutedEventArgs e)
    {
        //TODO retry function
        //MainWindow.Connect();
    }

    private void btnCancel_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }
} 
```

我基本上想在我的主窗口类中使用连接方法。但是，除非它是公共静态的，否则我不能这样做。但是，如果我确实将 Connect() 更改为公共静态，则其中的所有控件都必须是静态的。我正在尽量减少我拥有的静态控件的数量；有人可以帮忙重试方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:58:40.980

首先，您确实需要将方法公开（或内部），以便`Window1`可以使用该方法。但是，不要让它成为静态的。

`MainWindow`相反，在构造函数中接受一个 的实例`Window1`，并将其存储起来，以便`Connect()`稍后调用它的方法。

例如：

```
public partial class Window1 : Window
{
    private MainWindow mainWindow;

    public Window1(MainWindow mainWindow)
    {
        if (mainWindow == null) {
            throw new ArgumentNullException("mainWindow");
        }

        this.mainWindow = mainWindow;

        InitializeComponent();
    }

    private void btnRetry_Click(object sender, RoutedEventArgs e)
    {
        mainWindow.Connect();
    }

    // ...
} 
```

然后，如果从内部构造实例，请将构造`MainWindow`函数调用从 更改`new Window1()`为`new Window1(this)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:31:30.657

另一种解决方案是使`Window1.btnRetry`父表单可见

```
public MainWindow : Window
{
      private void ShowWindow1()
      {
          var window1 = new Window1();
          window1.btnRetry.Click += OnRetryClicked;
          window1.ShowDialog();
      }

      private void OnRetryClicked(object sender, EventArgs e)
      {
         // will be called when window1.btnRetry is clicked.
         // retry the connection.
         Connect();
      }
} 
```

# javascript - 这种随机分布的指数失真的线性等价物是多少？

> ID：13457450
> 
> 赞同：3
> 
> 时间：2012-11-19T15:57:10.307
> 
> 标签：javascript, random, distribution, number-theory

我今天早些时候[得到了这个](https://stackoverflow.com/a/13451302/1597180)答案，关于如何将随机数种子扭曲到范围的一个边界：

```
var random = Math.pow(Math.random(), 2); 
```

但这显然会沿着指数曲线扭曲它。我怎样才能使它成为线性的？

另外，有点相关：我刚刚创建了这个简单的脚本来可视化不同类型的分布。这可能对这个问题有帮助：http: [//jsfiddle.net/RTbrL/](http://jsfiddle.net/RTbrL/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:27:16.223

听起来您在描述单边[三角形分布](http://en.wikipedia.org/wiki/Triangular_distribution#Generating_Triangular-distributed_random_variates)。

如果是这样，请尝试

```
var random = 1.0 - Math.sqrt(Math.random()); 
```

或者

```
var random = Math.abs(Math.random() - Math.random()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:01:30.863

像这样？

```
var rand = Math.ceil( Math.random() * 5 ) % 5; 
```

`rand`从 0 到 4。

[Javascript 中的 % 是模数](http://en.wikipedia.org/wiki/Modular_arithmetic)

# file-io - 媒体视图如何在 cakephp 中工作？

> ID：13457451
> 
> 赞同：1
> 
> 时间：2012-11-19T15:57:10.407
> 
> 标签：file-io, cakephp-2.1

我已经安排在我的应用程序相对地址上进行文件上传：webroot/files

现在我需要强制下载上传的文件。[经过一些谷歌搜索并尝试了这篇文章](https://stackoverflow.com/questions/233643/linking-to-a-file-e-g-pdf-within-a-cakephp-view)中的大多数建议后，我发现了正确的方法是使用 cakephps[媒体视图](http://book.cakephp.org/2.0/en/views/media-view.html)

**是）我有的：**

1.  带有记录表的主站点。**模型->**记录；**表**-> 记录；
2.  这些记录有一个主键record_id。
3.  在我的数据库中，我有一个**Table** -> files；**模型**-> 文件；
4.  这些文件有一个外键 record_id 和一个字段 'url' 及其位置的相对路径。
5.  使用文件创建记录后，文件正确上传到文件夹，其相对地址为例如 webroot/files/record_name/file，并且数据库中的表已正确更新。

**我想做的事：**

1.  双击一个表格行后，打开一个模式对话框，其中包含有关记录的信息。（完毕）
2.  在此模式对话框中，我想显示将强制下载这些文件的链接。

**我尝试了很多变体：**

```
//the retrieving of data after debug looks fine//
$this->loadModel('File');
$files = $this->File->find('list', array(
    'conditions'=>array('File.record_id'=>$record_id),
    'fields' => array('File.Name', 'File.Url');
))

//actual display of url
foreach($files as $file_name => $file_url) {
    echo $this->Html->link($file_name, $file_url);
} 
```

生成的链接看起来与[James Revilini 呈现的完全一样](https://stackoverflow.com/a/3513309/1315125)

**这是我的实际问题**

由于该问题尚未完全解决，我认为这不仅对我有帮助，而且对任何正在寻找该问题的快速解决方案的人都可以快速演示[媒体视图的](http://book.cakephp.org/2.0/en/views/media-view.html)工作原理。制作动态下载功能后，我不知道该移到哪里：

```
 public function download($name, $path) {
    $this->viewClass = 'Media';
    $params = array(
        'id'        => $name,
        'name'      => $name,
        'download'  => true,
        'path'      => $path
        );
        $this->set($params);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:51:16.153

将资源的模式对话框中的链接指向`download()`函数。

将 传递`Record.id`给该函数。在其中找到文件并自动渲染它。

它应该工作。

# jquery - 从 .each 调用的函数中删除标签

> ID：13457452
> 
> 赞同：3
> 
> 时间：2012-11-19T15:57:14.593
> 
> 标签：jquery

`.each`在我想删除标签的函数内`a`/。这是一个无效的示例：

```
$('div.link').has('div.entry:has(p.title:has(a[href^="http://i.imgur.com/"]))').each(function (i) {
    $(this).css('border', '5px solid');
    $(this).remove('a'); // Does NOT work! Nothing happens...
    console.log($(this));
}) 
```

点击下面的图片查看完整尺寸。标记线纯属巧合，没有任何意义。要测试内容，请访问[http://reddit.com](http://reddit.com)并使用 Firebug（已加载 jQuery）： [![包含部分 Reddits DOM 的 Firebug 屏幕截图](../Images/cb2732980e1e12da87da49d599c51735.png)](https://i.stack.imgur.com/FDD65.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:58:33.273

您需要找到它，然后将其删除：

```
$(this).find('a').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:59:05.303

提供`this`作为上下文：

```
$("a", this).remove(); 
```

该`$`函数的第二个参数通常是`context`您的选择器的参数，表示您希望找到与您的选择器匹配的区域。在这种特殊情况下，我们说我们想`a`在`this`.

jQuery 会在内部将其转换为 find 调用：

```
$(this).find("a").remove(); 
```

因此，如果您不介意稍微冗长的解决方案（几个字符，没什么大不了的），您可以通过删除中间人语法并`.find`直接使用来获得非常微不足道的性能提升。

# c# - UniversalSortableDateTimePattern 和 SortableDateTimePattern 之间的区别

> ID：13457458
> 
> 赞同：9
> 
> 时间：2012-11-19T15:57:36.453
> 
> 标签：c#

我看到有两种类型的可排序日期时间模式我可以格式化我的字符串......

1.  SortableDateTimePattern 输出一个在日期和时间中间有一个 T 的值
2.  UniversalSortableDateTimePattern 在时间之后输出一个最后带有 Z 的值

在进程间通信（例如 JSON、XML 或表格数据中的数据交换）方面，每种方法的含义是什么。

两者中的任何一个是否有机会自动调整为UTC？（乍一看好像不是）

我已经阅读了 MSDN 上关于这两个方面的低水平文档，遗憾的是他们对这个问题没有提供任何见解......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:12:29.770

`UniversalSortableDateTimePattern`使用 UTC。这就是最后的[Z的](https://en.wikipedia.org/wiki/ISO_8601#Coordinated_Universal_Time_(UTC))用途。

试试这个简单的示例：

```
string s = DateTime.Now.ToString(CultureInfo.CurrentCulture.DateTimeFormat.SortableDateTimePattern);
DateTime d = DateTime.Parse(s);

Console.WriteLine(s);
Console.WriteLine(d);

Console.WriteLine();

s = DateTime.Now.ToString(CultureInfo.CurrentCulture.DateTimeFormat.UniversalSortableDateTimePattern);
d = DateTime.Parse(s);

Console.WriteLine(s);
Console.WriteLine(d); 
```

只要您的时区不是 UTC+0，您就会注意到第二个区块的时间不同。

我对此的阅读将是`UniversalSortableDateTimePattern`跨时区使用时更喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:50:54.543

SortableDateTimePattern 取决于文化，不包括时区偏移信息。UniversalSortableDateTimePattern 与文化无关，在任何计算机、任何地方都相同，并且包括时区偏移。偏移量来自 UTC，因此从时间中适当添加或减去它将为您提供 UTC 时间。如果您将使用多个时区和/或国籍，通常最好使用 UniversalSortableDateTimePattern。

但是，如果您总是希望您的时间是 UTC，则在转换为字符串之前使用适当的 DateTime 属性或方法要简单得多，即[DateTime.UtcNow](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow%28v=vs.100%29.aspx)属性以 UTC 或现有 DateTime 获取当前日期和时间，[DateTime.ToUniversalTime 方法](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime%28v=vs.100%29.aspx)。

# java - maven找不到包和符号

> ID：13457459
> 
> 赞同：6
> 
> 时间：2012-11-19T15:57:42.363
> 
> 标签：java, maven

我有一个带有这些类的应用程序：（类的一部分）：

```
@SessionScoped
@Named
public class UserSessionBean implements Serializable {

    @javax.ws.rs.core.Context private HttpServletRequest httpRequest; 
```

在 mvn 编译期间，我有这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project highway-web: Compilation failure: Compilation failure:
[ERROR] /home/kelevra/java/git/ttkHighway/highway-web/src/main/java/com/kmware/ttk/highway/beans/session/UserSessionBean.java:[28,25] package javax.servlet.http does not exist
[ERROR] 
[ERROR] /home/kelevra/java/git/ttkHighway/highway-web/src/main/java/com/kmware/ttk/highway/beans/session/UserSessionBean.java:[40,38] cannot find symbol
[ERROR] symbol  : class HttpServletRequest
[ERROR] location: class com.kmware.ttk.highway.beans.session.UserSessionBean
[ERROR] -> [Help 1] 
```

在IDEA中制作时没有这样的问题。它可能是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T16:11:11.673

Java 文件 UserSessionBean 找不到类 HttpServletRequest。

您应该检查 pom 文件中声明的依赖项。确保包括

```
 <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
  </dependency> 
```

您能否尝试 mvn clean install 并查看它是否产生相同的错误。

PS您是从控制台还是从 IDE 运行项目。

# jquery - 如何摆脱 jQuery 中的 sizset 和 sizcache 属性？

> ID：13457460
> 
> 赞同：5
> 
> 时间：2012-11-19T15:57:46.003
> 
> 标签：jquery, wysiwyg, html, sizzle

我已经知道[sizcache 和 sizset 属性是什么](https://stackoverflow.com/questions/3782709/what-purpose-do-sizcache-and-sizset-serve-in-jquery)，但我担心的是它们在我们的 Web 应用程序中的乘法。我解释说：我们使用 jQuery 开发了一个“自制”的 WYSIWYG html 编辑器，当我们的用户保存结果 HTML 时，我们用`.html()`(或`innerHTML`) 检索它，然后将其保存在数据库中。然后我们的用户可以编辑它，并再次保存在数据库中。当使用非 IE 浏览器时，一切都很好，但是在 IE 中，jQuery 添加了那些（ahemm nasty）**sizset**和**sizcache**属性，它们最终出现在生成的 HTML 中。当从数据库重新加载 HTML 并再次保存时，会添加越来越多的 sizset 和 sizcache。

对我来说理想的解决方案是这些属性永远不会出现在数据库中。如果首先有来自 jQuery 的解决方案，我不确定是否要解析 HTML 服务器端以删除它们。有人遇到过这个问题吗？

这是我们所拥有的示例：

**HTML：**

```
<div id="source">
  <div sizset="37" sizcache09734513102453994="3" sizcache07081295255533577="350" sizcache0714455993494169="6324"></div>
  ... more html going on
</div> 
```

**Javascript：**

```
var source = $('#source').html(); 
```

变量“源”最终包含 sizset 和 sizcache 属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:03:34.453

使用以下命令检索整个字符串后，对整个字符串[使用正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)`.html()`：

```
var re = /\s*(sizset|sizcache)\d*="[^"]*"/gi;
source = source.replace(re,''); 
```

[http://jsfiddle.net/mblase75/fMdVc/](http://jsfiddle.net/mblase75/fMdVc/)

或者，jQuery 有一个[`.removeAttr()`](http://api.jquery.com/removeAttr/)方法，但您必须将其应用于特定标签：

```
jQobj.removeAttr('sizset').removeAttr('sizcache'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T11:02:54.127

我最近将一个网站移到了运行**IIS 6**的新服务器上。一下子，网页的Header块插入了一个meta标签`<META content="IE=7.0000" http-equiv="X-UA-Compatible">`，在IE浏览器下到处都是**sizset**和**sizcache**属性。然后我查看了 IIS 6 设置，发现那里有一个用于**模拟 IE7**的自定义 http 标头设置，它强制其进入客户端（IE）。删除该设置后，我的 IE10 浏览器一切恢复正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:13:32.967

[我写了几个小函数来解决这个问题](https://gist.github.com/barneycarroll/1995017)。一个是一个简单的函数，它接受一个 HTML 字符串并删除杂物（*shizzle*）。第二个是从选择中删除所述元素的 jQuery 方法 -*这将破坏 IE6 和 7 中该选择的某些 jQuery 选择器*- 带有一个可选的布尔参数也可以从所有子节点中删除。

*`nodeIndex`请注意接受的答案中未涵盖的额外属性。*

```
var fizzleSizzle = function(x){
    return x.replace(/(nodeIndex|sizcache|sizset)[\w\d]*(="[^"]*")*/gi,'');
};

(function($){
    if(!$) return;

    // Strip the shizzle from the DOM; pass a truthy argument to do the same for all children
    $.fn.fizzleShizzle = function(deep){
        var $el = deep ? this.add(this.find('*')) || this;

        // Iterate through the selection
        $el.each(function(){
            var 
                el  = this, 
                ats = el.attributes;

            // Iterate through attributes
            $.each(ats,function(i,x){
                // Is it one of these?
                if(/^nodeIndex|^sizcache|^sizset/.test(x))
                    // Fizzle it
                    el.removeAttribute(x);
            });
        });

        return this;
    };
}(jQuery)); 
```

# asp.net - .NET 按钮事件停止触发

> ID：13457461
> 
> 赞同：0
> 
> 时间：2012-11-19T15:57:49.343
> 
> 标签：asp.net, button, click

我有一个查询 Lucene 索引并显示结果的页面。结果的查询和显示发生在页面加载时。该按钮仅重定向到具有适当查询的新页面。但由于某种原因，此 buttonclick 事件已停止触发。我没有更改属性或函数背后的代码中的任何明显内容。我试图将其更改为常规按钮以使其正常工作，但这也不起作用。

当我单击按钮时，它似乎确实在回发消息，但是当我在其上放置断点时，调试器永远不会触发单击事件的函数。

这是未触发的代码：

```
<asp:Button ID="btnSubmit" runat="server" CssClass="button red submit" OnClick="btnSubmit_Click"></asp:Button> 
```

后面的代码：

```
protected void btnSubmit_Click(object sender, EventArgs e) 
{
    Response.Redirect("/search.aspx?query=" + query);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:48:49.370

没有足够的信息来解决问题，但尝试删除 CssClass，尝试创建新的空页面并使用相同的代码放置按钮。不要浪费你的时间。

# android - 在 Android 中附加操作栏项目

> ID：13457462
> 
> 赞同：0
> 
> 时间：2012-11-19T15:57:54.970
> 
> 标签：android, android-actionbar

我希望能够从我的片段中附加操作栏项目。

例如，在横向模式下，我有一个项目列表，如果单击，则会出现有关该项目的信息页面。

可以通过单击操作栏中的下拉列表选择列表类别来更改列表。

单击列表项后，将填充详细信息片段。然后，我希望将 3 个选项卡附加到操作栏中，以便用户可以选择显示该项目的详细信息页面，即：“详细信息（默认）”；“地图”；和“特点”。

在我的片段中，我可以设置 setHasOptionsMenu(true)，然后使用 onCreateOptionsMenu 调用添加新选项卡。但是，这会删除我仍然希望显示的下拉列表。

一个人如何简单地附加 ActionBar Items..？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:11:34.057

我只是`onCreateOptionsMenu`从我的活动中调用片段`onCreateOptionsMenu`。您可以添加一个 if 语句来决定调用片段的版本或默认调用片段的版本`onCreateOptionsMenu`，然后将 if 语句放在那里来决定添加什么。然后，每当需要更改时，只需调用`invalidateOptionsMenu`.

您可能必须删除`setHasOptionsMenu`呼叫。

活动：

```
public boolean onCreateOptionsMenu(Menu m)
{
    // insert activity options
    if (needFragmentOptions) {
       fragment.onCreateOptionsMenu(m);
    }
    return true;
} 
```

分段：

```
public boolean onCreateOptionsMenu(Menu m)
{
   // insert fragment options
   return true;
} 
```

# xml - XSL 排序，但仅当某个属性为假时

> ID：13457464
> 
> 赞同：1
> 
> 时间：2012-11-19T15:57:55.297
> 
> 标签：xml, xslt, sorting

我目前正在对一个 Magento 生成的 XML 文件进行排序，如下所示：

```
<products>
  <product>
    <productnaam>Example item 1</productnaam>
    <populariteit>27845</populariteit>
    <imagelink>http://www.example.com/image1.jpg</imagelink>
  </product>
  <product>
    <productnaam>Example item 2</productnaam>
    <populariteit>12687</populariteit>
    <imagelink>http://www.example.com/image1.jpg</imagelink>
  </product>
  <product>
    <productnaam>Example item 3</productnaam>
    <populariteit>32574</populariteit>
    <imagelink>http://www.example.com/media/catalog/productno_selection</imagelink>
  </product>
<products> 
```

使用以下 XSL 块：

```
<xsl:template match="/">
  <xsl:apply-templates select="/products/product">
    <xsl:sort select="populariteit" order="ascending" data-type="number"/>  
  </xsl:apply-templates>
</xsl:template> 
```

它按受欢迎程度（我的 XML 中的“populariteit”）对项目进行排序，并使用以下代码块从列表中取出第一个项目，因此它将显示最受欢迎的项目。

```
<xsl:template match="product">
  <xsl:if test="position()=1">
    <xsl:value-of select="productnaam"/>
    <img>
      <xsl:attribute name="src">
        <xsl:value-of select='imagelink'/>
      </xsl:attribute>
    </img>
  </xsl:if>
</xsl:template> 
```

然而，问题是有时没有有效的图片，在这种情况下，-`<imagelink>`属性*总是*：

```
<imagelink>http://www.example.com/media/catalog/productno_selection</imagelink> 
```

我想要的是对列表进行排序，就像我现在做的那样，但它应该跳过所有`<imagelink>`等于上面显示的项目。

我试过这样的事情：

```
<xsl:sort select="populariteit" order="ascending" data-type="number" test="not(imagelink = 'http://www.fietspunt.nl/media/catalog/productno_selection')"> 
```

但这似乎不起作用。

在上面的例子中，'Example item 3' 是最受欢迎的，但是，由于它有一个错误的`<imagelink>`- 属性，'Example item 1' 是需要显示的。

我需要对我的排序代码块进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:06:19.167

采用：

```
 <xsl:apply-templates select=
    "/products/product
      [not(imagelink 
          = 
          'http://www.fietspunt.nl/media/catalog/productno_selection'
           )
      ]">
    <xsl:sort select="populariteit" order="ascending" data-type="number"/>  
  </xsl:apply-templates> 
```

# r - reshape2: dcast tall into wide without aggregating

> ID：13457466
> 
> 赞同：3
> 
> 时间：2012-11-19T15:57:59.803
> 
> 标签：r, reshape2

Consider

```
ext <- data.frame(cond = rep(c('a', 'b'), each = 2), dat = runif(4) ) 
```

I want

```
exw <- unstack(ext, dat ~ cond) 
```

But I would like to do it with `dcast()` in `reshape2` (for pedagogical purposes). Is this possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:13:19.517

你必须告诉`dcast`有一个识别行ID：

例如：

```
dcast(ext, 1:2~cond)
  1:2         a         b
1   1 0.5706567 0.4360110
2   2 0.0305229 0.7032459 
```

而且，更一般地说：

```
ext$id <- sequence(rle(as.character(ext$cond))$lengths)
dcast(ext, id~cond, value.var="dat")

  id         a         b
1  1 0.5706567 0.4360110
2  2 0.0305229 0.7032459 
```

# extjs - 为什么我的 ExtJS 商店协会不起作用

> ID：13457470
> 
> 赞同：10
> 
> 时间：2012-11-19T15:58:19.883
> 
> 标签：extjs, associations

我有问题。我想使用漂亮的 ExtJS 关联，但它们不能正常工作。

问题：

*   模型中没有显示关联
*   加载后没有数据显示

有哪些注意事项？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T16:07:16.430

我最近在 ExtJS 关联方面经历了一段非常痛苦的学习曲线，并且遇到了一些有用的文章，以及我自己的问题。这是为那些遇到同样痛苦的人提供的摘要。

**ExtJS 中 HasMany 关联的规则**

*   始终将您的代理放在您的模型中，而不是您的商店中，除非您有充分的理由不 [1]
*   如果在 hasMany 关系中使用它们，则始终需要您的子模型。[2]
*   如果您想随意加载孩子，请始终使用 foreignKey
*   如果您在与父级相同的响应中返回子级，请始终使用 associationKey
*   如果您愿意，可以同时使用 foreignKey 和 associationKey
*   始终命名您的 hasMany 关系
*   始终在您的 hasMany 关系中使用完全限定的模型名称
*   考虑给读者根一个有意义的名字（除了“数据”）
*   子模型不需要为 hasMany 工作的 belongsTo 关系

[1] store 将继承其模型的代理，您可以随时覆盖它
[2] 为方便起见，并避免潜在的循环引用，您可以在 app.js 中使用它们

[http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html](http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html)

**ExtJS 中 HasOne 和 BelongsTo 关联的规则**

*   将代理放入模型中，除非您有充分的理由不这样做
*   始终使用完全限定的型号名称
*   始终设置 getterName
*   始终设置 setterName
*   如果在与此对象相同的响应中返回外来对象，则始终设置关联键
*   总是设置foreignKey，如果你想随意加载外物
*   考虑将 instanceName 更改为更短的名称
*   根据是否加载了外来对象，getter 的行为会有所不同。如果已加载，则返回外来对象。否则，你需要传入一个回调来获取它。
*   如果您打算覆盖此关联，则应设置 name 属性。
*   你不需要为 hasMany 工作的 belongsTo 关系
*   如果父模型的 id 字段不是“id”，则设置 primaryKey 属性
*   有时您需要对 belongsTo 关联使用 uses 或 requires 。不过要注意循环引用。
*   调用 setter() 函数似乎没有设置实例。如果调用 setter()，则设置 object.belongsToInstance = obj。

[http://extjs-tutorials.blogspot.com/2012/05/extjs-belongsto-association-rules.html](http://extjs-tutorials.blogspot.com/2012/05/extjs-belongsto-association-rules.html)

**杂项**

*   如果您将数据应用到网格，请确保使用新存储在网格上调用 reconfigure()
*   您的“foreignKey”属性*将*作为本地过滤器应用于 ExtJS 存储；如果您看到数据通过网络加载，但未显示在网格中，请确保您的模型将 foreignKey 值定义为字段，否则本地过滤器将排除数据安静。要测试是否是这种情况，请连接到商店的“加载”事件并调用 store.clearFilters()，然后查看您的数据是否显示

# android - Disable overscroll on 2.3.5? Or change colour?

> ID：13457472
> 
> 赞同：0
> 
> 时间：2012-11-19T15:58:23.147
> 
> 标签：android

So apparently overScroll options don't actually exist in 2.3.5-2.3.7 because of some silly reasons.

```
.setOverScrollMode(ListView.OVER_SCROLL_NEVER) 
```

Does a fine job at disabling it, but it breaks my listview in the sense that it no longer enables flinging at all.

Is there a library or some overriding I can do to change the colour of the overscroll or perhaps even disable it properly?

Setting the overscroll mode to never in the XML does not work either..

The issue does not occur on 4.1, 2.3.3, 4.2, 3.x, or 4.01

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:11:13.863

Hi try to add android:scrollbars="none",

```
 <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

    </ListView> 
```

# android - html 文本输入损坏 - Nexus-S 4G / Android 4

> ID：13457474
> 
> 赞同：1
> 
> 时间：2012-11-19T15:58:28.910
> 
> 标签：android, html, input, nexus-s

在一个特定情况下，我遇到了一个奇怪的问题，想知道是否有人看到过类似的情况或有任何想法。

```
<form action="myurl" method="post" id="login">
    <label for="userId" class="text-large">Username</label>
    <input id="userId" type="text" maxlength="15" required="1" />
    <label for="accessCode" class="text-large">Access Code</label>
    <input id="accessCode" type="password" maxlength="4" required="1" />
</form> 
```

起初我以为是`maxlength`，因为一旦达到最大长度，它就不允许我修改该字段。但是，它不再让我完全输入，也不再注册我在该字段中输入的任何内容。键盘仍会弹出，并且键盘上方的 intelitype/autocomplete 会记录键入，但输入中没有显示任何内容。

我认为css中没有发生任何花哨的事情，没有奇怪的隐藏或任何东西，只是一个带边框的输入字段。

我尝试禁用我们的 javascript 验证，没有任何变化。

我尝试从所有字段中删除 maxlength 属性，没有变化。

它似乎特定于这一设备类型。使用 Galaxy SII/SIII 或任何其他 android OS 手机进行测试没有此结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:17:59.067

终于找到了！

[http://code.google.com/p/android/issues/detail?id=35264](http://code.google.com/p/android/issues/detail?id=35264)

这是一个已知的问题。唯一的解决方法是创建一个 javascript 验证器，从字段中删除所有 maxlength 属性。

# ruby-on-rails - Implementing version history with a closure table schema

> ID：13457479
> 
> 赞同：4
> 
> 时间：2012-11-19T15:58:35.707
> 
> 标签：ruby-on-rails, tree, versioning, transitive-closure-table

I have a custom CMS implementation that stores content nodes in two tables as described in the "closure table" section at [http://www.slideshare.net/billkarwin/models-for-hierarchical-data](http://www.slideshare.net/billkarwin/models-for-hierarchical-data) and using this gem [https://github.com/mceachen/closure_tree](https://github.com/mceachen/closure_tree) under Ruby on Rails 3 and MySQL.

The time has come for me to implement a version history where any change in the content tree (editing, inserting, moving, deleting nodes, etc.) would create a new version of the root node (a publication). And users would be able to look at older versions and revert back to them. The revert action would create a newer version which is a copy of the reverted one.

Is there a well known way to achieve this? or does anyone have an idea or example implementation for this sort of thing?

Any input will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:08:14.830

[状态机](http://railscasts.com/episodes/392-a-tour-of-state-machines)？我很好奇是否有更多的想法。我确信有一个绝妙的解决方案，但它超出了 Rails 的范围。这是文件管理系统。我推荐的第一个是 Alfresco 。

# c - error in ubuntu work in codeblocks?

> ID：13457484
> 
> 赞同：1
> 
> 时间：2012-11-19T15:58:45.970
> 
> 标签：c, ubuntu, codeblocks

I want to know why while compiling my code in ubuntu this message appears

```
 $*** glibc detected *** ./a.out: malloc(): memory corruption: 0x00000000024dd190 *** 
```

but the same code works without any error in code::blocks and gives me the right results ?? I need your help to fix this error .

I've tried to update the compiler but that doesn't work?!

Update:

the error appears when executing this statement:

```
 $first_array = (unsigned long*)malloc(sizeof(unsigned long*)); 
```

I don't see that there's any error in it, Yes??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:57:30.257

您在内存中定义的大小等于指针的大小，而不是无符号长整数，您应该使用：

```
first_array = (unsigned long*)malloc(sizeof(unsigned long)); 
```

如果您在 32 位系统上，您的第一个代码将在内存中分配 4 个字节，然后您使用指向 8 字节数据结构的指针指向它。您需要分配变量的大小，而不是指针的大小。

# c++ - 这段代码在 C++ 中究竟是如何工作的

> ID：13457486
> 
> 赞同：2
> 
> 时间：2012-11-19T15:58:56.617
> 
> 标签：c++, pointers

例如这段代码：

```
#include <iostream>
using namespace std;

void foo(int* x){ cout << "X = " << *x << endl;}

int main()
{
    int value = 5;
    int *p = &value;
    foo(p);
    foo(&value);
    return 0;
} 
```

在函数的第一次调用中，`foo`实际上在函数内创建了指针 p (x) 的副本，并在函数结束后立即删除，对吗？在第二次调用`foo`变量值的地址时，使用该地址创建一个指针 x，并在函数结束时立即删除，对吗？就堆栈内存消耗而言，这些调用中哪个更便宜？还是两者都是一样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:01:43.317

它们几乎相同。唯一的区别是您`p`在 in 的调用堆栈上有一个指针对象`main`，但是如果您要担心这一点，那么您就会遇到问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:04:10.403

他们都很相似。第一个看起来更昂贵，因为您创建了两次指针，一次作为局部变量（内部`main`），再次作为函数参数（传递给`foo`），但是编译器的“优化”阶段可能会将第一个变成第二个（假设您唯一要做的`p`就是传递它，并且您稍后不会重用它`main`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:02:56.720

在第一次调用中，您传递了一个包含*地址*的变量`value`。

在第二个中，您直接传递*地址*。`value`

请注意，赋值运算符表示两者`p`和`&value`是相同的，因此您应该能够将任何一个传递给您已经证明的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:03:03.983

指针具有可以像其他所有内容一样复制的值。它们具有价值语义。

```
void foo(int* t); 
```

按值获取指针。它将创建指针参数的副本并在其主体中使用它。

```
int value = 23;
int *p = &value; // &value takes the address of value and use it to copy initialize p
foo(p); // copy the value of the pointer inside foo
foo(&value); // do the same but don't create a temporary 
```

# credentials - WebClient with credentials still not downloading file

> ID：13457487
> 
> 赞同：3
> 
> 时间：2012-11-19T15:58:57.397
> 
> 标签：credentials, webclient

I am trying to download files from a website with username/password. You need to pay for a registered account in order to download files - which we have done. I am attempting to pass in the username/password and download a file as follows:

```
if (docUrl != null)
            {
                if (!string.IsNullOrEmpty(username) && !string.IsNullOrEmpty(password))
                    this.WebClientInstance.Credentials = new NetworkCredential(username, password);

                fileData = this.WebClientInstance.DownloadData(docUrl);
                this.WebClientInstance.Dispose();
                isDataDownloaded = true;
            } 
```

WebClientInstance is a System.Net.WebClient. I debugged and verified that it is hitting the line to set credentials. Instead of downloading the PDF, I end up with an HTML page that prompts me to log in to get access to the file. I have verified that the username/password is correct. I use the same credentials to scrape the website with WatiN.

Is there something else that I'm supposed to be doing here?

**UPDATE**

Okay, I've done some sniffing around and found some useful info on this issue. I still haven't gotten it to work, but I think I'm closer. First, you need to create a cookie aware WebClient that extends the WebClient class, as follows:

```
public class CookiesAwareWebClient : WebClient
{
    public CookieContainer CookieContainer { get; private set; }

    public CookiesAwareWebClient()
    {
        this.CookieContainer = new CookieContainer();
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var webRequest = base.GetWebRequest(address);

        if (webRequest is HttpWebRequest)
            (webRequest as HttpWebRequest).CookieContainer = this.CookieContainer;

        return webRequest;
    }
} 
```

Next is to use the WebClient.UploadValues() method to upload the login info to the target website. The full process of authenticating and downloading the target resource is as follows:

```
using (var webClient = new CookiesAwareWebClient())
                    {
                        var postData = new NameValueCollection()
                        {
                            { "userId", username },
                            { "password", password }
                        };

                        webClient.UploadValues(docUrl, postData);

                        fileData = webClient.DownloadData(docUrl);
                    } 
```

I was wrong about the site using forms auth. It is a JSP website and uses a JSESSIONID. I have verified that I am getting a cookie back with what appears to be a valid 32-byte JSESSIONID value.

However, when I call WebClient.DownloadData() it is still only returning the redirected login page. I've tried to fix this by setting the AllowAutoRedirect property on the HttpWebRequest to false, but then it returns 0 bytes.

Is there something else that I need to do so it won't redirect and will take me to the resource once I have authenticated?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T16:59:54.527

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 解决了。所以问题出在我的耳朵之间。我将安全资源的 URL 传递给 .UploadValues() 方法，知道它会重定向到登录页面。但是，我真的需要从登录表单（提交时）传递 URL，而不是登录页面本身。一旦我这样做了，它就可以正常工作。我想我现在要去食品服务行业找份工作了。
> 
> **链接**
> 
> 在 SO 上已经发布了一些问题来解决这个问题。一开始我只是不知道我在寻找什么，所以我没有看到那些......这里有一些很好的资源，我在处理这个问题时遇到了：
> 
> [如何在asp.net中的两个Url之间维护cookie](https://stackoverflow.com/questions/6502581/how-to-maintaine-cookies-in-between-two-urls-in-asp-net)
> 
> [尝试使用 HttpWebRequest 获取身份验证 cookie](https://stackoverflow.com/questions/11762301/trying-to-get-authentication-cookies-using-httpwebrequest)

# php - php store uploaded path to table and display

> ID：13457489
> 
> 赞同：1
> 
> 时间：2012-11-19T15:59:03.430
> 
> 标签：php, mysql, database, image, file-upload

i am new in php... i had created a simple php file upload script given below...

form.php

```
<form action="uploader.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<input type="submit" name="submit" value="Submit" />
</form> 
```

uploader.php

```
<?php
move_uploaded_file($_FILES["file"]["tmp_name"],
"upload/" . $_FILES["file"]["name"]);
echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
?> 
```

my question is i had created a mysql database `account` and a table `student` with 4 field `id, name, age, image` i want store my uploaded image path to these table, and display this image my web page where i want... have any simple solutions.? with example... sorry im just new in mysql

thanks....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:07:16.513

我假设您的数据库中已经有学生并更改了他们的个人资料图片

用户必须登录才能上传图片，因此您将使用类似 $_SESSION['studentid'] 的内容

```
<?php
$path = "upload/" . $_FILES["file"]["name"];
move_uploaded_file($_FILES["file"]["tmp_name"],$path);

$sql = "UPDATE students SET image = '".$path."' WHERE id = ".$_SESSION['studentid'];
mysql_query($sql) OR die(mysql_error());

?> 
```

稍后，如果您想显示用户图像，请使用此查询

```
<?php

$sql = "SELECT image FROM students WHERE id = ".$_SESSION['studentid'];
$result = mysql_query($sql) OR die(mysql_error());
$row = mysql_fetch_assoc($result);

echo $row['image'];
?> 
```

# ruby - Updated ruby, then gemsets via rvm upgrade, but .rvmrc files?

> ID：13457492
> 
> 赞同：2
> 
> 时间：2012-11-19T15:59:15.520
> 
> 标签：ruby, rvm

I'm not sure if my workflow is off, or if I'm using rvm gemsets entirely wrong, but here's how I upgraded to the latest patch level in Ruby today [327].

Updated ruby via rvm install. Ran rvm upgrade and upgraded everything Selected yes, when asked during rvm upgrade to delete old ruby.

So, then I noticed that my .rvmrc files in my apps were trying to load the old gemset that now doesn't exist. I manually updated each .rvmrc file with the new gemset from the rvm upgrade.

All is well, but my questions:

1.  Should I have kept my prior version of ruby installed just in case?
2.  Is manually updating each .rvmrc the right thing to do?
3.  Should I be creating gemsets for each app, or should I really just use gemsets to manage ruby versions for different required environments?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:15:07.050

1-补丁并没有真正改变太多可能会意外破坏您的代码的东西。只保留主要版本。（1.8.7、1.9.2、1.9.3 等）

2-这种方式是最快和最简单的方式。它完美无瑕，真的没有任何问题。

3- 宝石有利于组织目的。我真的很喜欢每个项目，但我想我有点控制狂，所以我相信这是个人品味。

# php - timediff not working with date_format in mysql

> ID：13457496
> 
> 赞同：1
> 
> 时间：2012-11-19T15:59:25.600
> 
> 标签：php, mysql, time, mysqli

I've made a query that calculates the `total_time1` from 2 other fields called `time_in` and `time_out` using `timediff(time_out, time_in) AS total_time1`.

Now, I want to convert that time into a better format instead of the usual `hh:mm:ss` so in the same query I did `DATE_FORMAT(total_time1, '%l:%i') AS total_time2`, but for some reason it doesn't work whenever I input a new time in and out.

This is the query:

```
$sql="SELECT 
        DATE_FORMAT(time_in, '%l:%i %p') AS time_in,
        DATE_FORMAT(time_out, '%l:%i %p') AS time_out,
        timediff(time_out, time_in) AS total_time1,
        DATE_FORMAT(total_time1, '%l:%i') AS total_time2,
      FROM $table";

$result = $mysqli->query($sql);

while($row = $result->fetch_array()){
    <td><?php echo $row['time_in']; ?></td>
    <td><?php echo $row['time_out']; ?></td>
    <td><?php echo $row['total_time1']; ?></td>
    <td><?php echo $row['total_time2']; ?></td>
} 
```

I'm displaying everything (including time in, out, totaltime1 and totaltime2) on a large table on it's own page. `total_time1` works like I said, but `total_time2` displays nothing. No errors or anything. What am I doing wrong here.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:01:00.323

您不能使用在同一查询中创建的别名

你必须像这样再写一次

```
$sql="SELECT 
        DATE_FORMAT(time_in, '%l:%i %p') AS time_in,
        DATE_FORMAT(time_out, '%l:%i %p') AS time_out,
        timediff(time_out, time_in) AS total_time1,
        DATE_FORMAT(timediff(time_out, time_in), '%l:%i') AS total_time2
      FROM $table"; 
```

另外，如果你想格式化时间，

你不应该使用`DATE_FORMAT`，而是`TIME_FORMAT`

像这样

```
$sql="SELECT 
            TIME_FORMAT(time_in, '%l:%i %p') AS time_in,
            TIME_FORMAT(time_out, '%l:%i %p') AS time_out,
            timediff(time_out, time_in) AS total_time1,
            TIME_FORMAT(timediff(time_out, time_in), '%l:%i') AS total_time2
          FROM $table"; 
```

[这是](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)有关 MySQL 中所有日期和时间函数的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:02:16.187

您不能自行引用该列。你还有一个额外的逗号，我认为这是一个错字。

你需要这样的东西：

```
$sql="SELECT time_in, time_out, total_time1, DATE_FORMAT(total_time1, '%l:%i') AS total_time2
FROM (SELECT 
        DATE_FORMAT(time_in, '%l:%i %p') AS time_in,
        DATE_FORMAT(time_out, '%l:%i %p') AS time_out,
        timediff(time_out, time_in) AS total_time1
      FROM $table) a"; 
```

# delphi - 如何强制密码编辑器的“Caps Lock is On”气球？

> ID：13457500
> 
> 赞同：4
> 
> 时间：2012-11-19T15:59:45.537
> 
> 标签：delphi, passwords, editor, delphi-xe, balloon

我有一个`TEdit`设置`PasswordChar`为，如果模式`*`打开，我希望标准的“Caps Lock is On”气球出现。`Caps Lock`该标准气球仅在编辑器获得焦点或`Caps Lock`打开模式时出现，而焦点位于该编辑器中。

我的密码编辑器是应用程序的第一个集中控件。因此，当应用程序以*先前*`Caps Lock`打开的模式启动时，我看不到任何气球，直到我的密码编辑器失去焦点然后再次聚焦。用户有机会在一半的用例中看不到那个气球！

 *我可以在应用程序启动时强制这个“Caps Lock is On”气球而不切换焦点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:30:20.613

解决方案是调用`WM_KILLFOCUS`and `WM_SETFOCUS`，这将强制编辑器显示“Caps Lock is On”气球：

```
 if GetKeyState(VK_CAPITAL) and 1 <> 0 then
  begin
    if edtPassword.Focused then
    begin
      PostMessage(edtPassword.Handle, WM_KILLFOCUS, 0, 0);
      PostMessage(edtPassword.Handle, WM_SETFOCUS, 0, 0);
    end;
  end; 
```*

# java - Library and examples of parsing multipart/form-data from inputstream

> ID：13457503
> 
> 赞同：10
> 
> 时间：2012-11-19T16:00:09.567
> 
> 标签：java, http, parsing, multipartform-data, multipartentity

The response to one kind of HTTP request I send is a multipart/form-data looks something like:

```
--------boundary123
Content-Disposition: form-data; name="json"
Content-Type: application/json

{"some":"json"}
--------boundary123
Content-Disposition: form-data; name="bin"
Content-Type: application/octet-stream

<file data>

--------boundary123 
```

I've been using apache to send and receive the HTTP requests, but I can't seem to find an easy way to use it to parse the above for easy access of the form fields.

I would prefer not to reinvent the wheel, so I'm looking for a library that allows me to do something similar to:

```
MultipartEntity multipart = new MultipartEntity(inputStream);
InputStream bin = multipart.get("bin"); 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T09:14:44.650

使用不推荐使用的构造函数的示例代码：

```
import java.io.ByteArrayInputStream;

import org.apache.commons.fileupload.MultipartStream;

public class MultipartTest {

    // Lines should end with CRLF
    public static final String MULTIPART_BODY =
            "Content-Type: multipart/form-data; boundary=--AaB03x\r\n"
            + "\r\n"
            + "----AaB03x\r\n"
            + "Content-Disposition: form-data; name=\"submit-name\"\r\n"
            + "\r\n"
            + "Larry\r\n"
            + "----AaB03x\r\n"
            + "Content-Disposition: form-data; name=\"files\"; filename=\"file1.txt\"\r\n"
            + "Content-Type: text/plain\r\n"
            + "\r\n"
            + "HELLO WORLD!\r\n"
            + "----AaB03x--\r\n";

    public static void main(String[] args) throws Exception {

        byte[] boundary = "--AaB03x".getBytes();

        ByteArrayInputStream content = new ByteArrayInputStream(MULTIPART_BODY.getBytes());

        @SuppressWarnings("deprecation")
        MultipartStream multipartStream =
                new MultipartStream(content, boundary);

        boolean nextPart = multipartStream.skipPreamble();
        while (nextPart) {
            String header = multipartStream.readHeaders();
            System.out.println("");
            System.out.println("Headers:");
            System.out.println(header);
            System.out.println("Body:");
            multipartStream.readBodyData(System.out);
            System.out.println("");
            nextPart = multipartStream.readBoundary();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-28T15:47:46.443

我想要一个可以在 Azure 函数中运行的解决方案，所有内容都在内存中，并且不依赖于 servlet 或门户 API。于是我写了一篇：

```
package my.package;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.nio.charset.StandardCharsets;
import java.util.List;
import java.util.Map;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileItemHeaders;
import org.apache.commons.fileupload.FileUpload;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.ParameterParser;
import org.apache.commons.fileupload.UploadContext;

public class MultipartParser {
  private static class SimpleContext implements UploadContext {
    private final byte[] request;
    private final String contentType;

    private SimpleContext(byte[] requestBody, String contentTypeHeader) {
        this.request = requestBody;
        this.contentType = contentTypeHeader;
    }

    @Override
    public long contentLength() {
        return request.length;
    }

    @Override
    public String getCharacterEncoding() {
        // The 'Content-Type' header may look like:
        // multipart/form-data; charset=UTF-8; boundary="xxxx"
        // in which case we can extract the charset, otherwise,
        // just default to UTF-8.
        ParameterParser parser = new ParameterParser();
        parser.setLowerCaseNames(true);
        String charset = parser.parse(contentType, ';').get("charset");
        return charset != null ? charset : "UTF-8";
    }

    @Override
    public int getContentLength() {
        return request.length;
    }

    @Override
    public String getContentType() {
        return contentType;
    }

    @Override
    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(request);
    }
  }

  /**
   * A form field which stores the field or file data completely in
   * memory. Will be limited by the maximum size of
   * a byte array (about 2GB).
   */
  private static class MemoryFileItem implements FileItem {
    private String fieldName;
    private String fileName;
    private String contentType;
    private boolean isFormField;
    private FileItemHeaders headers;
    private final ByteArrayOutputStream os = new ByteArrayOutputStream();

    public MemoryFileItem(String fieldName, String contentType, boolean isFormField, String fileName) {
        this.fieldName = fieldName;
        this.contentType = contentType;
        this.isFormField = isFormField;
        this.fileName = fileName;
    }

    @Override
    public void delete() {
    }

    /**
     * Not cached, so only call once.
     */
    @Override
    public byte[] get() {
        return os.toByteArray();
    }

    @Override
    public String getContentType() {
        return contentType;
    }

    @Override
    public String getFieldName() {
        return fieldName;
    }

    @Override
    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(get());
    }

    @Override
    public String getName() {
        return fileName;
    }

    @Override
    public OutputStream getOutputStream() throws IOException {
        return os;
    }

    @Override
    public long getSize() {
        return os.size();
    }

    @Override
    public String getString() {
        return new String(get(), StandardCharsets.UTF_8);
    }

    @Override
    public String getString(String encoding) throws UnsupportedEncodingException {
        return new String(get(), encoding);
    }

    @Override
    public boolean isFormField() {
        return isFormField;
    }

    @Override
    public boolean isInMemory() {
        return true;
    }

    @Override
    public void setFieldName(String name) {
        fieldName = name;
    }

    @Override
    public void setFormField(boolean state) {
        isFormField = state;
    }

    @Override
    public void write(File file) throws Exception {
    }

    @Override
    public FileItemHeaders getHeaders() {
        return headers;
    }

    @Override
    public void setHeaders(FileItemHeaders headers) {
        this.headers = headers;
    }
  }

  private static class MemoryFileItemFactory implements FileItemFactory {
    @Override
    public FileItem createItem(String fieldName, String contentType, boolean isFormField, String fileName) {
        return new MemoryFileItem(fieldName, contentType, isFormField, fileName);
    }
  }

  /**
   * Assumes the request body really is multipart/form-data.
   * Given the binary request body and the Content-Type header value,
   * attempts to parse fields into a map from field name to list
   * of FileItem objects.
   * 
   * Everything is stored in memory and an individual item will only be limited
   * by the maximum size of a byte array (about 2GB). It is recommended that the
   * user sets a limit on maximum upload request size. Doing this will obviously
   * differ by environment.
   *
   * Example:
   *   <code>
   *   var fields = MultipartParser.parseRequest(requestBody, contentTypeHeader);
   *   String firstName = fields.get("firstname").get(0).getString();
   *   byte[] profilePic = fields.get("picture").get(0).get();
   *   </code>
   *
   * @param requestBody The binary request body
   * @param contentTypeHeader The string value of the Content-Type header.
   * @return a map, with each entry having one or more values for that named field.
   * @throws FileUploadException
   */
  public static Map<String, List<FileItem>> parseRequest(byte[] requestBody, String contentTypeHeader)
        throws FileUploadException {
    FileUpload fileUpload = new FileUpload(new MemoryFileItemFactory());
    return fileUpload.parseParameterMap(new SimpleContext(requestBody, contentTypeHeader));
  }
} 
```

以及与 Azure 函数一起使用的示例：

```
public class Function {
  @FunctionName("doSomethingWithBinaryFile")
  public HttpResponseMessage run(
        @HttpTrigger(
            name = "req",
            methods = {HttpMethod.POST},
            authLevel = AuthorizationLevel.ANONYMOUS)
            HttpRequestMessage<byte[]> request,
        final ExecutionContext context) throws IOException, FileUploadException {
    Logger logger = context.getLogger();
    byte[] body = request.getBody();
    String contentTypeHeader = request.getHeaders().get("content-type");
    byte[] fileBytes = MultipartParser.parseRequest(body, contentTypeHeader).get("file").get(0).get();

    return request.createResponseBuilder(HttpStatus.OK).body(
        transformBytesForExample(fileBytes)).build();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T14:00:53.447

不使用过时方法的示例代码。

```
import com.google.common.net.MediaType;
import org.apache.commons.fileupload.RequestContext;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.charset.Charset;

public class SimpleRequestContext implements RequestContext {
    private final Charset charset;
    private final MediaType contentType;
    private final byte[] content;

    public SimpleRequestContext(Charset charset, MediaType contentType, byte[] content) {
        this.charset = charset;
        this.contentType = contentType;
        this.content = content;
    }

    public String getCharacterEncoding() {
        return charset.displayName();
    }

    public String getContentType() {
        return contentType.toString();
    }

    @Deprecated
    public int getContentLength() {
        return content.length;
    }

    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(content);
    }
}

{
  ...
  Charset encoding = UTF_8;
  RequestContext requestContext = new SimpleRequestContext(encoding, contentType, body.getBytes());
  FileUploadBase fileUploadBase = new PortletFileUpload();
  FileItemFactory fileItemFactory = new DiskFileItemFactory();
  fileUploadBase.setFileItemFactory(fileItemFactory);
  fileUploadBase.setHeaderEncoding(encoding.displayName());
  List<FileItem> fileItems = fileUploadBase.parseRequest(requestContext);
  ...
} 
```

# compiler-errors - 在 Flash CS4 中使用数组的问题

> ID：13457505
> 
> 赞同：0
> 
> 时间：2012-11-19T16:00:10.413
> 
> 标签：compiler-errors, flash-cs4

我正在尝试了解数组的工作原理，并且遇到了一个我正在解决的问题。任何帮助将不胜感激。

我不断收到以下三个错误：

1176：具有静态类型 flash.events:MouseEvent 的值与可能不相关的 int 类型的值之间的比较。

1067：将具有静态类型 flash.events:MouseEvent 的值隐式强制转换为不相关的类型 Number。

1176：具有静态类型 flash.events:MouseEvent 的值与可能不相关的 int 类型的值之间的比较。

```
var P1Numbers:Array = new Array();
var e:int=0;

function P1LowestScore(e:MouseEvent){
var P1Lowest:Number=P1Numbers[0];

for(e==1; e<P1Numbers.length; e++){
    if(P1Numbers[e]>P1Lowest){
        P1Lowest=P1Numbers[e];
    }else{
        lblPlayer1Lowest.text="ERROR!";
    }
}
lblPlayer1Lowest.text="Your lowest score is "+P1Lowest+"."; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:19:43.727

好吧，您的问题是您首先将变量*e*定义为 int，但您的函数 P1LowestScore 还有一个 MouseEvent 类型的参数变量*e*。此变量会隐藏函数中的 int e 实例变量。因此，您将 MouseEvent 与 P1Numbers 数组的长度进行比较，该数组是一个 int。

我看到的另一个问题是你的 for 循环。您使用的是布尔表达式 (e==1) 而不是赋值表达式 (e=1)。

我不确定 P1LowestScore 如果在您的代码中调用如何，但我猜它是通过鼠标侦听器？

无论如何，只需将您的 int e 变量更改为其他名称（基本上是任何名称），您的错误就会消失。实际上，您最好在 for 循环声明中声明变量，因为您不在循环外使用它。像这样：

```
for(i:int = 1; i<P1Numbers.length; i++){
    //your code
} 
```

# asp.net-mvc-4 - 使用基于声明的授权

> ID：13457506
> 
> 赞同：37
> 
> 时间：2012-11-19T16:00:11.367
> 
> 标签：asp.net-mvc-4, authorization, asp.net-4.5

新的 ASP.NET 4.5 代码已将 ASP.NET RoleProvider “重新设置为” ClaimsProvider。

我想弄清楚的是，“基于声明”的授权示例是什么样的（最好在 MVC4 中）？我的 Authorize 属性如何与此功能交互或不交互？WebSecurity 和 Roles API 没有改变；没有“DoesUserHaveClaim()”签名。同样，也不清楚 Authorize 属性如何与声明交互。

这个“声明授权”功能主要用于 OAuth 吗？如果是这样，如何将索赔转发给我的申请？一块饼干？或者这个声明提供者的功能是为了更广泛的用途？

简而言之，使用 ClaimsPrincipal 的故事是什么？

我所见过的最接近某种有意义的事情就是[这个讨论](https://stackoverflow.com/questions/5997848/adding-claims-based-authorization-to-mvc-3)。但我怀疑这已经过时了 - 它应该与 MVC4 互联网项目模板生成的内容进行比较。即便如此，它仍然没有建议如何在设置中使用 Authorize 属性。

### 更新

我从以下来源找到了我的问题的答案：

1.  [ClaimsPrincipal 的备注部分](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.aspx)解释说，WebSecurity、Roles 和 AuthorizeAttribute API 实际上归结为必要时的声明检查。
2.  [这里有一个基于声明的 MVC4 示例](http://msdn.microsoft.com/en-us/library/hh545413.aspx)（以及其他示例）。
3.  此处显示了基本的[SAML 故事](http://en.wikipedia.org/wiki/Saml#The_SAML_Use_Case)。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T19:45:33.790

基于声明的安全性有助于将您的安全模型与应用程序域分离。声明可以是您想要附加到用户身份的任何内容，例如电子邮件、电话号码或指示用户是否为超级用户的标志。这为您提供了设置授权过程的最大灵活性。从历史上看，在 ASP.NET 应用程序中，您必须确定要允许的角色并在对应用程序进行编程时应用它们。然后检查用户是否具有授权他们的角色。这将您的安全模型与您的应用程序混合在一起。在基于索赔的情况下，您拥有更大的灵活性，并且更典型的是设置一个授权方案，该方案将资源（例如：订单管理系统中的订单）和操作（例如：读、写、执行）作为输入参数授权流程，有效地将安全性与您的应用程序分离。看[ClaimsPrincipalPermissionAttribute](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsprincipalpermissionattribute.aspx)以获取此技术的示例。

OAuth 需要基于声明的安全性，但它也适用于其他授权方案。您在应用程序中使用的自定义声明可从[ClaimsPrincipal.Current](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current.aspx)访问。也有一些技术可以将此信息存储在 cookie 中，尽管 ASP.NET 安全管道默认情况下不这样做。

您引用的讨论是针对 Windows Identity Foundation (WIF)，它现在是 4.5 中 .NET 的一部分，这就是为什么基于声明的身份是一等公民的原因。所有 Principal 类型都继承自 ClaimsPrincipal。要全面了解基于声明的安全性，请查看此免费电子书“[基于声明的身份和访问控制指南（第 2 版）](http://msdn.microsoft.com/en-us/library/ff423674.aspx) ”。该领域的真正专家是 Dominick Baier，[他的博客](http://leastprivilege.com/2012/11/09/identity-access-control-in-asp-net-4-5/)充满了有关该主题的有用信息。他还有一个很棒的 Pluralsight 在线培训课程，名为“ [ASP.NET 4.5 中的身份和访问控制](http://www.pluralsight.com/courses/iac-aspnet)”。

# php - 错误：无法加载动态库 'C:\PHP\ext\php_sqlsrv.dll

> ID：13457508
> 
> 赞同：0
> 
> 时间：2012-11-19T16:00:20.793
> 
> 标签：php, html, sql-server, iis

我已经尝试了到目前为止我能找到的关于 .dll 错误的所有选项，但它无法解决我的问题。

请有没有人知道如何让 php 加载这些动态库。我正在使用 php 5.3.18、IIS 7 和 SQL ServerExpress 数据库，每次运行 phh.info 时，我都会收到很多这样的错误日志。我还注意到我的 php 文件夹中的“ext”子文件夹中没有列出这些 .dll 文件。请让别人帮忙，这样我就可以继续前进。我会感谢这里的每一个贡献

> [19-Nov-2012 08:44:14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_msql.dll' - 找不到指定的模块。在第 0 行的未知 [19-Nov-2012 08:44:14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_pdo_sqlsrv.dll' - 指定的模块不能成立。在第 0 行的未知 [19-Nov-2012 08:44:14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_pdo.dll' - 指定的模块不能成立。在第 0 行的未知 [19-Nov-2012 08:44:14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_sqlsrv.dll' - 指定的模块不能成立。在第 0 行的未知 [2012 年 11 月 19 日 08:44：14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_dblib.dll' - 找不到指定的模块。在第 0 行的未知 [19-Nov-2012 08:44:14 America/Denver] PHP 警告：PHP 启动：无法加载动态库 'C:\PHP\ext\php_curl.dll' - 指定的过程不能成立。

我想知道这是否可能是我的下拉列表无法从数据库中填充的原因这里有趣的是我的连接脚本工作正常但下拉列表没有填充并且我没有收到任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T16:38:39.877

我收到了同样的错误。我从 www.dependencywalker.com 下载了一个 Dependency Walker 程序，发现 php_pdo_sqlsrv.dll 找不到 php5.dll，因为我的系统路径中没有我的 php 文件。我将 php 安装添加到我的路径中，警告消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:09:38.753

如果该文件夹中没有这些文件，则需要将它们放在那里。搜索您的驱动器以定位它们是否位于不同的位置。

# c# - 如何从配置文件中获取服务器名称和数据库

> ID：13457509
> 
> 赞同：0
> 
> 时间：2012-11-19T16:00:23.720
> 
> 标签：c#, .net, ado.net

我的配置文件中有一个连接字符串，我在我的代码中使用它，如下所示 -

```
SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCentralW2"].ConnectionString); 
```

我需要从中获取服务器名称和数据库，并将其作为参数传递给我的存储过程。

我试图得到它如下，但它失败了。

```
SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCentralW2"].ConnectionString);
SqlConnectionStringBuilder conbuilder = new SqlConnectionStringBuilder();
conbuilder.ConnectionString = sqlconn.ToString();
string server = conbuilder.DataSource;
string database = conbuilder.InitialCatalog; 
```

请帮我从我的配置文件中获取数据库和服务器名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:04:29.377

您没有正确分配连接字符串属性，请尝试：

```
builder.ConnectionString = ConfigurationManager.ConnectionStrings["DBCentralW2"].ConnectionString; 
```

`SqlConnectionStringBuilder`或者使用连接字符串初始化你的类，例如

```
var conBuilder = new SqlConnectionStringBuilder(ConfigurationManager.ConnectionStrings["DBCentralW2"].ConnectionString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:03:20.520

尝试以下：

```
 System.Data.SqlClient.SqlConnectionStringBuilder builder = new System.Data.SqlClient.SqlConnectionStringBuilder();    
        builder.ConnectionString = sqlconn.ConnectionString;
        string server = builder.DataSource;
        string database = builder.InitialCatalog; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:04:23.227

我建议您将连接字符串存储在 web.config 中，而不是按原样使用，而不是构建它

在 web.config 中

```
<add name="connStr" connectionString="Data Source=.\SQLEXPRESS; Initial Catalog=dbtest; Integrated Security=SSPI" /> 
```

在cs文件中

```
string connectionString = ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
        SqlConnection con = new SqlConnection(connectionString);

        con.Open(); 
```

# charts - Itemscontrol 中的 WPFToolkit 图表

> ID：13457519
> 
> 赞同：2
> 
> 时间：2012-11-19T16:00:54.170
> 
> 标签：charts, wpftoolkit, itemscontrol, lineseries

好的，这就是我想要做的。我需要在单个图表控件中使用多个列表图表。使用 Sheog 在这篇文章中的回答没有任何问题：

[https://stackoverflow.com/a/10604545/1836291](https://stackoverflow.com/a/10604545/1836291)

问题是直到运行时我才知道需要多少图表。所以我的想法是将其放入项目控件并将数据模板设置为 LineSeries，如下所示：

```
 <ItemsControl x:Name="pieChart">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <chartingToolkit:Chart DataContext="{Binding}"  Title="Pie Series Demo" Margin="0" Background="#FF48474B" Height="400"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <chartingToolkit:LineSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}" IsSelectionEnabled="True" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl> 
```

还有我的数据：

```
 List<KeyValuePair<string, int>> valueList = new List<KeyValuePair<string, int>>();
        valueList.Add(new KeyValuePair<string, int>("Developer", 60));
        valueList.Add(new KeyValuePair<string, int>("Misc", 20));
        valueList.Add(new KeyValuePair<string, int>("Tester", 50));
        valueList.Add(new KeyValuePair<string, int>("QA", 30));
        valueList.Add(new KeyValuePair<string, int>("Project Manager", 40));

        List<KeyValuePair<string, int>> valueList2 = new List<KeyValuePair<string, int>>();
        valueList2.Add(new KeyValuePair<string, int>("Developer", 40));
        valueList2.Add(new KeyValuePair<string, int>("Misc", 40));
        valueList2.Add(new KeyValuePair<string, int>("Tester", 40));
        valueList2.Add(new KeyValuePair<string, int>("QA", 40));
        valueList2.Add(new KeyValuePair<string, int>("Project Manager", 20));

        var dataSourceList = new List<List<KeyValuePair<string, int>>>();
        dataSourceList.Add(valueList);
        dataSourceList.Add(valueList2);

        pieChart.DataContext = dataSourceList; 
```

我的感觉是问题出在我的数据绑定的某个地方，但是我对此知之甚少，无法对其进行故障排除。

好吧，我发现了这个：

[以编程方式创建 ColumnSeries WPF 工具包图表](https://stackoverflow.com/questions/3926036/programmatically-create-a-columnseries-wpf-toolkit-charts)

它实际上工作得很好，但是我仍然想知道如何在 XAML 中做到这一点。

谢谢，

# javascript - express.js 链接到一个唯一的 URL

> ID：13457520
> 
> 赞同：0
> 
> 时间：2012-11-19T16:00:55.130
> 
> 标签：javascript, node.js, url, express

我有一个问题，也许听起来很愚蠢，但我还没有找到任何真正的解决方案。我正在玩 express.js，我在客户端 html 中有一个链接列表，所有链接都链接到服务器中指定的 url `app.get('/myURL', function(req, res){...})`，现在的问题是我希望每个链接都链接到这个 URL，但 URL 是唯一的对于每个链接，因此列表中的链接不共享相同的 URL。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:22:58.870

您可能希望有一个带有参数的路由，如下所示：

```
app.get('/myURL/:parameter', user.load, function(request, result){
    // ... 
}) 
```

那样的话，`/myURL/something`两人`/myURL/something_else`都会走那条路。然后你可以看到`parameter`他们使用变量 request.params.parameter

* * *

请参阅 expressjs 文档：[http ://expressjs.com/api.html#app.VERB](http://expressjs.com/api.html#app.VERB)

# javascript - 在网络工作者内部，如何从字符串中查找 html 属性？

> ID：13457523
> 
> 赞同：3
> 
> 时间：2012-11-19T16:00:59.727
> 
> 标签：javascript, dom, web-worker

在网络工作者内部，我有一个 html 字符串，例如：

```
"<div id='foo'>  <img src='bar'></img>  <ul id='baz'></ul>  </div>" 
```

是否可以导入任何库以轻松访问不同标签的 id 和 src 属性？正则表达式是工人内部的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:25:57.743

有两种方法可以有效地解决这个问题：

## 正则表达式

由于存在误报的风险，您可以使用以下方法：

```
var pattern = /<img [^>]*?src=(["'])((?:[^"']+|(?!\1)["'])*)(\1)/i;
var match = string.match(pattern);
var src = match ? match[2] : ''; 
```

## 内置解析器和消息传递

如果获得正确的 HTML 是一项关键要求，只需让浏览器解析 HTML，将字符串传递给调用者。这是一个完整的例子：

呼叫者：

```
var worker = new Worker('worker.js');
worker.addEventListener('message', function(e) {
    if (!e.data) return;
    if (e.data.method === 'getsrc') {
        // Unlike document.createElement, etc, the following method does not 
        //  load the image when the HTML is parsed
        var doc = document.implementation.createHTMLDocument('');
        doc.body.innerHTML = e.data.data;
        var images = doc.getElementsByTagName('img');
        var result = [];
        for (var i=0; i<images.length; i++) {
            result.push(images[i].getAttribute('src'));
        }
        worker.postMessage({
            messageID: e.data.messageID,
            result: result
        });
    } else if (e.data.method === 'debug') {
        console.log(e.data.data);
    }
}); 
```

worker.js

```
// A simple generic messaging API
var callbacks = {};
var lastMessageID = 0;
addEventListener('message', function(e) {
   if (callbacks[e.data.messageID]) {
       callbacks[e.data.messageID](e.data.result);
   }
});
function sendRequest(method, data, callback) {
    var messageID = ++lastMessageID;
    if (callback) callbacks[messageID] = callback;
    postMessage({
        method: method,
        data: data,
        messageID: messageID
    });
}

// Example:
sendRequest('getsrc',
    '<img src="foo.png">' + 
    "<img src='bar.png'>" + 
    '<textarea><img src="should.not.be.visible"></textarea>',
    function(result) {
        sendRequest('debug', 'Received: ' + result.join(', '));
    }
); 
```

# c# - 如何为 wpf 应用程序加密文件夹和文件

> ID：13457526
> 
> 赞同：0
> 
> 时间：2012-11-19T16:01:06.327
> 
> 标签：c#, image, xaml, encryption, directory

我正在开发一个负责显示图片库的 WPF 项目。图片存储在文件夹中。我想知道是否有办法加密文件夹和图片以保护文件（用户不应该看到文件），但我想保留通过代码浏览这些文件夹以构建我的库的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:06:43.557

我能想到的最好方法是将文件和文件夹存储在带有密码的 Zip 存档中。Windows 原生支持 Zip 文件。有很多支持 zip 文件的选项，包括[框架选项](https://stackoverflow.com/questions/4023350)和[外部库](http://www.icsharpcode.net/opensource/sharpziplib/)。

请注意，这并不能真正保护文件免受用户篡改；它只是将它们隐藏在不经意的观察者面前。此外，可能会有速度惩罚；您应该使用尽可能快的压缩选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:13:48.987

您可以使用 Zip 存档和另一种方式：您可以将另一个项目项目（库）添加到您的主解决方案中，将您的图像文件夹添加到您的应用程序中并将它们的`build action`属性设置为`resource`，这样，您的图像将存储在一个 Dll 中并且可以访问他们来自 Dll.i 在点击此链接之前尝试过：

[在 dll 中获取文件夹地址](https://stackoverflow.com/questions/13319576/get-folder-address-in-dll)

# c++ - C ++模板（通用编程）与多态性？

> ID：13457530
> 
> 赞同：8
> 
> 时间：2012-11-19T16:01:40.650
> 
> 标签：c++, oop, templates

我想通过说它与范式相关并且我只是想澄清一些概念来开始这个问题。所以我已经用 Python 编程大约 2 年了，我的脚趾浸入 Java 但不是太多，我想深入研究 C++。我以前使用过它，但没有用于涉及大量设计的大型项目。

当我第一次开始探索它时，我相信它处理 OOP 的方式类似于 Java，其中一切都必须实现一个接口。然后我遇到了**模板**的概念，我立即认为这是一种解决方法，可以为没有实现它的基元（ *ints*，*floats ）提供多态行为（基本上是 Python 通过鸭子类型和没有正式接口所做的）。*但我很快发现模板被用来为非原始类型提供相同的行为。

所以我的问题是：有什么理由在模板上使用经典的多态性，C++ 社区对此的一般方法是什么？

**编辑**刚刚发现[这](https://stackoverflow.com/questions/1213366/can-template-polymorphism-be-used-in-place-of-oo-polymorphism?rq=1)几乎回答了这个问题（*静态多态性*真的需要让我的头脑围绕这个术语）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:28:48.480

冒着进行全面概括的风险，模板的使用大多类似于 Java 中的泛型——它们允许您构建可用于许多不同数据类型的类或函数。以`std::list`标准模板库的一部分为例。您可以用 制作一个整数链表`std::list<int>`，或者用 制作一个对象列表`std::list<MyClass>`。另一个例子是`std::thread`，它使用模板来获取一个函数（或 lambda 或 functor）及其参数以在另一个线程中运行。

至于函数`f(SomeInterface x)`和函数模板之间的选择`f(T x)`，它确实取决于上下文并且有些主观。需要考虑的一些事项是：

*   函数模板和类模板在编译时解析，因此您可以获得更好的性能。然而，

*   C++ 编译器历来会为模板错误生成难以辨认的垃圾。Clang 已经做了一些工作来改进这一点，并且其他编译器正在变得更好以匹配 Clang。情况正在好转，但仍然很丑陋。

*   不要害怕将传统的多态性与接口和实现类一起使用。虽然在某些情况下使用模板而不是多态（参见使用模板的 C++与使用接口`std::thread`的 Java ），但多态在 C++ 库和项目中仍然非常普遍。`Thread``Runnable`

简而言之，请随意考虑使用模板，但不要将它们视为多态性的替代品。看看一个流行的 C++ 库，你一定会发现很多多态性。以流行的 C++ 图形引擎 OGRE 为例。如果您查看它的[类列表](http://www.ogre3d.org/docs/api/1.9/namespace_ogre.html)，您会发现许多接口（例如`WindowEventListener`和`FrameListener`），用户可以从中派生一个类以便与库进行交互。

# c# - C# OleDbException 未处理：没有为一个或多个必需参数提供值

> ID：13457536
> 
> 赞同：1
> 
> 时间：2012-11-19T16:02:00.773
> 
> 标签：c#, dataset, sql-update, dataadapter, sql-insert

所以我正在尝试使用 DataAdapter 和 Datasets 将联系人添加到我的数据库中。但是当我尝试添加数据时，我总是遇到同样的错误（见标题）

此外，当我更新我的数据时，它不会给出任何错误，但它也不会更新任何东西。

添加用户代码

```
public void AddUser(Contact contact) {
  command.Connection = getConnection();
  command.CommandText = "INSERT INTO tblContact VALUES(Id = @contactid, LastName = @lastname, FirstName = @firstname, Address = @address"
    + "PostCode = @postcode, City = @city, Gender = @gender, Blocked = @blocked)";

  command.Parameters.AddWithValue("@contactid", contact.AccountId);
  command.Parameters.AddWithValue("@lastname", contact.LastName);
  command.Parameters.AddWithValue("@firstname", contact.FirstName);
  command.Parameters.AddWithValue("@address", contact.Address);
  command.Parameters.AddWithValue("@postcode", contact.PostCode);
  command.Parameters.AddWithValue("@city", contact.City);
  bool gender = (contact.Gender == Gender.Male ? true : false);
  command.Parameters.AddWithValue("@gender", gender);
  command.Parameters.AddWithValue("@blocked", contact.Blocked);
  try {
    adapter.InsertCommand = command;
    adapter.Update(dsCon, "tblContact");
    adapter.Fill(dsCon, "tblContact");
  }
  catch (Exception e) {
    String code = e.Message;
  }

} 
```

用于更新用户的代码

```
 public void ModifyUser(Contact contact) 
 {
  command.Connection = getConnection();
  command.CommandText = "UPDATE tblContact SET LastName = @lastname, FirstName = @firstname, Address = @address" 
    + "PostCode = @postcode, City = @city, Gender = @gender, Blocked = @blocked " 
    + "WHERE Id = @contactid";

  command.Parameters.AddWithValue("@contactid", contact.AccountId);
  command.Parameters.AddWithValue("@lastname", contact.LastName);
  command.Parameters.AddWithValue("@firstname", contact.FirstName);
  command.Parameters.AddWithValue("@address", contact.Address);
  command.Parameters.AddWithValue("@postcode", contact.PostCode);
  command.Parameters.AddWithValue("@city", contact.City);
  command.Parameters.AddWithValue("@gender", contact.Gender);
  command.Parameters.AddWithValue("@blocked", contact.Blocked);

  adapter.UpdateCommand = command;
  adapter.Update(dsCon, "tblContact");
  adapter.Fill(dsCon, "tblContact");
} 
```

我的表单中启动这些过程的代码

```
private void btnSave_Click(object sender, EventArgs e) {
  Contact currentContact = new Contact();
  currentContact.AccountId = Int32.Parse(lblID.Text);
  currentContact.LastName = txtLastName.Text;
  currentContact.FirstName = txtName.Text;
  currentContact.Address = txtStreet.Text;
  currentContact.PostCode = Int32.Parse(txtPostalCode.Text);
  currentContact.City = txtCity.Text;
  currentContact.Gender = (rdbMale.Checked == true ? Gender.Male : Gender.Female);
  currentContact.Blocked = chkBlocked.Checked;
  currentContact.Address = txtStreet.Text;
  if(isNewContact){
    currentContact.AccountId = (manager.GetContacts().Last().AccountId + 1);
    manager.GetOleDbManager().AddUser(currentContact);
  } else {
        manager.GetOleDbManager().ModifyUser(currentContact);
  }
  currentContact.Categories = new List<Category>();
  foreach (Object c in lstCategories.SelectedItems) {
    currentContact.Categories.Add((Category)c);
  }

  isNewContact = false;

} 
```

如果您能提供帮助，那就太好了，这是我正在使用的数据库的屏幕截图 [http://i50.tinypic.com/2s93klk.png](http://i50.tinypic.com/2s93klk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:06:37.083

您的插入命令不是有效的 sql INSERT 语句。

```
command.CommandText = "INSERT INTO tblContact VALUES(@contactid, @lastname, @firstname,"+ 
                      "@address,@postcode, @city, @gender, @blocked)"; 
```

更新逗号文本缺少逗号

```
command.CommandText = "UPDATE tblContact SET LastName = @lastname, FirstName = @firstname," +  
                      "Address = @address, PostCode = @postcode, City = @city, " + 
                      "Gender = @gender, Blocked = @blocked WHERE Id = @contactid"; 
```

但是，该命令也会失败，因为某些 OleDb 提供程序（如 Microsoft.ACE.OleDb.xx）要求 ParameterCollection 具有参数在 sql 文本中出现的确切顺序。（不支持命名参数）。您的更新语句包含 @contactid 作为最后一个参数，而您将其添加为第一个参数。您可以尝试更改 AddWithValue 序列，添加 @contactid 作为最后一个参数。

# php - Zend 框架 URL 重写为 SEO

> ID：13457538
> 
> 赞同：1
> 
> 时间：2012-11-19T16:02:05.313
> 
> 标签：php, zend-framework, url-rewriting, seo, url-routing

我是 Zend 的新手，所以请帮我解决这个问题，因为我已经搜索了很多并尝试了很多，我真的做到了。

这是一个非常古老的问题：

这是我当前的网址：

```
www.sample.com/blog/detail/index/id/5 
```

通缉：

```
www.sample.com/url-rewrite-tips 
```

好吧，我把下面的代码放在 bootstrap.php

```
$router = Zend_Controller_Front::getInstance()->getRouter();
$route = new Zend_Controller_Router_Route(
                'url-rewrite-tips',
                array(
                     'module'     => 'blog',
                     'controller' => 'detail',
                     'action'     => 'index',
                     'id'         => '5'
                )
);
$router->addRoute('url-rewrite-tips', $route); 
```

它正在工作，但它也是一个硬代码。我试图在 bootstrap.php 中获取参数，但失败了。

现在，我有 100 多个 id。但是，我尝试将它放在 index.pthml 中的 foreach(){} 中，然后它失败了。我为每篇文章都重写了数据库中的名称，我该怎么做？

最好不要使用配置或 .htaccess

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:11:03.010

我总是做的是`routes.ini`在引导程序中添加执行：

```
protected function _initRoutes()
{
    $this->bootstrap('FrontController');
    $front = $this->getResource('FrontController');
    $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini', 'production');
    $router = $front->getRouter();
    $router->addConfig($config, 'routes');
} 
```

然后在`routes.ini`：

```
[production]

routes.content.route = "/s/:permalink"
routes.content.defaults.controller = "content"
routes.content.defaults.action = "show"
routes.content.reqs.permalink = "[a-z0-9-]+" 
```

因此，现在当有人访问`http://mydomain.com/s/some-nice-permalink`路由时，会转到`ContentController` `ShowAction()`方法，该方法将永久链接作为参数并在数据库中找到它。

当然，您还必须编写在数据库中创建唯一永久链接的方法。

# xml - 分解 XML 结构，其中根下的每个子项都是具有不同名称的集合

> ID：13457543
> 
> 赞同：0
> 
> 时间：2012-11-19T16:02:20.327
> 
> 标签：xml, sql-server-2008, tsql

有没有办法在不使用多个 CROSS-APPLY 语句的情况下解析（在 T-SQL 脚本中）以下 XML？您可以注意到 Root 的孩子有不同的名字（它们完全不同——不仅在最后一位数字索引上不同）。

我想把这个 XML 分解成一个表，其中每个 MeasuredParamName* 都是一列，每个值代表一行。每个 MeasuredParamName 元素将具有相同数量的子元素。

IE。（MeasuredParamName1、MeasuredParamName2、MeasuredParamName3、MeasuredParamName4）

对这个解决方案使用交叉应用是否有性能问题？XML 的不同结构会更合适吗？

前任：

```
<Data>
<MeasuredParamName1>
    <Value>1</Value>
    <Value>2</Value>
</MeasuredParamName1>
<MeasuredParamName2>
    <Value>3</Value>
    <Value>4</Value>
</MeasuredParamName2>
<MeasuredParamName3>
    <Value>0.5</Value>
    <Value>0.10</Value>
</MeasuredParamName3>
<MeasuredParamName4>
    <Value>20</Value>
    <Value>30</Value>
</MeasuredParamName4>   
   </Data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:33:27.253

试试这个。

```
select  
    MeasuredParamName1,MeasuredParamName2,MeasuredParamName3,MeasuredParamName4
from
(
    select  
        x.n.value('local-name(..)', 'varchar(50)') mpname,
        x.n.value('.','varchar(20)') value,
        row_number() over (partition by x.n.value('local-name(..)', 'varchar(50)') order by x.n) as rn  
    from
        @xml.nodes('/Data//Value') x(n)
) v
pivot
(max(value) for mpname in (MeasuredParamName1,MeasuredParamName2,MeasuredParamName3,MeasuredParamName4)) p 
```

如果我正在设计 XML，我会将“行”值放在列中。例如

```
<Data>
   <Value>
       <MeasuredParam1>5</MeasuredParam1>
       <MeasuredParam2>6</MeasuredParam2>
       <MeasuredParam3>7</MeasuredParam3>
       <MeasuredParam4>8</MeasuredParam4>
   </Value>
   <Value>
       <MeasuredParam1>11</MeasuredParam1>
       <MeasuredParam2>12</MeasuredParam2>
       <MeasuredParam3>13</MeasuredParam3>
       <MeasuredParam4>14</MeasuredParam4>
   </Value>
</Data> 
```

# javascript - 无论使用JS的正文样式（位置，边距）如何，如何将html元素放置在某些绝对坐标中？

> ID：13457546
> 
> 赞同：0
> 
> 时间：2012-11-19T16:02:25.250
> 
> 标签：javascript, html, css-position

我正在尝试将一个元素放置在距视口顶部边框一定数量的像素处的网站中。问题是尽管使用了绝对定位，定位仍然取决于体型。例如，如果 body 具有相对定位和 margin top 值，那么我的绝对定位元素的位置将增加 body margin top 值。那么，我怎样才能让它独立于体型呢？

注意：我不能使用任何框架，只能使用普通的 JS。

更新：我希望位置受到滚动的影响，因此“固定”定位不是一种选择。我也希望它是跨浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:11:32.973

您只需设置`position`为`fixed`.

```
var div = document.createElement("div");
div.style.position = "fixed";
div.style.top = "0";
div.style.left = "0";
div.appendChild(document.createTextNode("Some Text"));
document.getElementsByTagName("body")[0].appendChild(div); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:10:08.313

It's quite simple, however it won't work in IE7\. You can use `position:fixed` to position an element in relation to the viewport(browser edges), regardless of what margins, padding or whatever else parent elements have.

To do this with javascript:

```
var container = document.getElementById('container');// This is your container. Replace accordingly.
var elementToInsert = document.createElement("div");// Create a new element.
elementToInsert.style.position ='fixed';// It will now position in relation to the viewport, regardless of where it is nested, etc.
elementToInsert.style.top = '100px';// Always add pixels, won't work otherwise.
elementToInsert.style.left = '300px';// Always add pixels, won't work otherwise.
elementToInsert.style.width = '500px';// Always add pixels, won't work otherwise.
elementToInsert.style.height = '500px';// Always add pixels, won't work otherwise.
container.appendChild(elementToInsert);// Append the new div to the container. 
```

**Also, you don't really need JS for this. Plain old HTML + CSS will do the trick just as well.** Read more about CSS `position:fixed;` [HERE](http://davidwalsh.name/css-fixed-position)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:21:09.497

Web 开发人员用来消除浏览器之间差异的一个技巧是使用 css 文件来重置诸如正文边距之类的属性。

此处示例：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

这假设它不是您的 CSS 向正文添加边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:24:17.963

糟糕——无论如何我都是在 jQuery 中完成的——我将把它留作将来参考。希望downvoters也可以离开它

这适用于 Chrome、Fx、IE8、IE9

[演示](http://jsfiddle.net/mplungjan/63AdW/)

```
$(function() {
  $("img").on("click",function() { 
    $(this).offset({top:0,left:0}); 
  });
}); 
```

​这意味着你可以做

```
$(function() {
  $("#myimg").offset({top:0,left:0}); 
}); 
```

# android - 如何使用项目滚动列表视图背景

> ID：13457547
> 
> 赞同：4
> 
> 时间：2012-11-19T16:02:25.633
> 
> 标签：android, background, android-listview, android-listfragment

我将图像设置为 Listview 背景，如果我想用项目滚动它，我该怎么办？

例如：1 是背景，如果我向下滚动 Listview，它将从

```
 1          
-----1-----1--------
   1         1
-1-------------1---- 
```

到

```
--------1----------
      1    1
---1----------1----
 1              1 
```

也许我可以扩展 listview 并覆盖 dispatchDraw，但如果我使用 listFragment，我能做什么？有人帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:46:33.150

在您的活动的 XML 文件中定义这样的列表视图::

（根据您的要求在此 xml 文件中定义属性）

```
<com.example.MyCustomListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

创建一个名为 MyCustomListView 的类 ::

```
 public class MyCustomListView extends ListView
    {

       private Bitmap background;

    public MyCustomListView(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        background = BitmapFactory.decodeResource(getResources(), R.drawable.yourImageName);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) 
    {
        int count = getChildCount();
        int top = count > 0 ? getChildAt(0).getTop() : 0;
        int backgroundWidth = background.getWidth();
        int backgroundHeight = background.getHeight();
        int width = getWidth();
        int height = getHeight();

        for (int y = top; y < height; y += backgroundHeight)
        {
            for (int x = 0; x < width; x += backgroundWidth)
            {
                canvas.drawBitmap(background, x, y, null);
            }
        }
        super.dispatchDraw(canvas);
    }
 } 
```

希望这能解决你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-11T12:08:10.680

AndroidLearner 的代码运行良好，除了一个错误，请参阅我对 AndroidLearner 答案的评论。我编写了他的代码的 Kotlin 版本来修复错误，并且还适用于在 xml 中定义的任何背景，如下所示：

```
<ListViewWithScrollingBackground
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/some_background"/> 
```

这是代码：

```
import android.content.Context
import android.graphics.Canvas
import android.util.AttributeSet
import android.widget.ListView

class ListViewWithScrollingBackground(context: Context, attrs: AttributeSet)
: ListView(context, attrs) {

  private val background by lazy { getBackground().toBitmap() }

  override fun dispatchDraw(canvas: Canvas) {
    var y = if (childCount > 0) getChildAt(0).top.toFloat() - paddingTop else 0f
    while (y < height) {
      var x = 0f
      while (x < width) {
        canvas.drawBitmap(background, x, y, null)
        x += background.width
      }
      y += background.height
    }
    super.dispatchDraw(canvas)
  }

  private fun Drawable.toBitmap(): Bitmap = 
    if (this is BitmapDrawable && bitmap != null) bitmap else {
    val hasIntrinsicSize = intrinsicWidth <= 0 || intrinsicHeight <= 0
    val bitmap = Bitmap.createBitmap(if (hasIntrinsicSize) intrinsicWidth else 1,
      if (hasIntrinsicSize) intrinsicHeight else 1, Bitmap.Config.ARGB_8888)
    val canvas = Canvas(bitmap)
    setBounds(0, 0, canvas.width, canvas.height)
    draw(canvas)
    bitmap
  }

} 
```

For the conversion of the `Drawable` to a `Bitmap` I used [this](https://stackoverflow.com/a/10600736/4274651) post.

# icons - JAVAFX 2.0 如何将滑块中的滑块图标更改为图像？

> ID：13457549
> 
> 赞同：7
> 
> 时间：2012-11-19T16:02:30.340
> 
> 标签：icons, slider, javafx

我想将图标更改为我的图像，我查看了 CSS 参考指南，但似乎找不到任何相关内容。甚至可能吗？不管它是使用 CSS 还是从主要 JavaFX 脚本声明。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:57:19.323

查看如何在此[AudioPlayer](http://fxexperience.com/2012/01/fun-javafx-2-0-audio-player/)中呈现自定义滑块的示例代码和图像。

如果您只想要反馈而不是交互式控件，JFXtras 库也有许多仪表[。](http://jfxtras.org/)

这是使用不变量的答案指出的选择器的一些示例 css。请注意，我需要在图像尺寸的一半处添加 -fx-padding 规范，以便显示整个图像。

```
/** slider.css
place in same directory as SliderCss.java
ensure build system copies the css file to the build output path */

.slider .thumb {
    -fx-background-image :url("http://icons.iconarchive.com/icons/double-j-design/diagram-free/128/piggy-bank-icon.png");   
    -fx-padding: 64;
}
/* Icon license: creative commons with attribution: http://www.doublejdesign.co.uk/products-page/icons/diagram */ 
```

示例应用程序：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class SliderCss extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws Exception {
    VBox layout = new VBox();
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10px;");
    layout.getChildren().setAll(new Slider());
    layout.getStylesheets().add(getClass().getResource("slider.css").toExternalForm());
    stage.setScene(new Scene(layout));

    stage.show();
  }
} 
```

示例程序输出：

![小猪](../Images/9653b309e730d8701b545edb2358c0a7.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T19:00:29.733

![在此处输入图像描述](../Images/fa363677b18757dee9ce6ab5aac0a037.png)

您可以使用 css 更改滑块的拇指

```
.slider .thumb{
 -fx-background-image :url("your image");   
 ...// more customization       
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-06T06:42:37.003

我知道这是一个老问题，但我认为我对这个解决方案有贡献。

如果我们想使用一个独特的滑块，或者我们想修改所有滑块的外观，前面的解决方案就绰绰有余了。但是，如果我们只需要修改一个滑块的外观，我们需要另一种方法。

我们要做的是想象我们已经将基础样式应用于 main `scene`。但是我们不想添加另一个`css`文件只是为了修改滑块的行为。所以问题是：**我们如何使用我们的基础`css`文件修改滑块样式？**

解决方法很简单`setId()`，所有控件都有这个属性。现在让我们看看主类：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Slider;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

/**
 * Created by teocci.
 *
 * @author teocci@yandex.com on 2018-Jul-06
 */
public class CustomSliderThumb extends Application
{
    public static void main(String[] args) { launch(args); }

    @Override
    public void start(Stage stage) throws Exception
    {
        Slider slider = new Slider();
        slider.setId("custom-slider");

        VBox layout = new VBox();
        layout.setId("base-layout");
        layout.getChildren().setAll(slider);

        Scene scene = new Scene(layout);
        scene.getStylesheets().add("css/style.css");

        stage.setScene(scene);
        stage.show();
    }
} 
```

在此示例中，我们创建了 a`slider`并将其 id 设置为`"custom-slider"`。然后我们将此滑块添加到 VBox 布局中，最后，我们将布局添加到具有`style.css`

现在让我们检查一下`style.css`以及如何使用 id 选择器来应用自定义样式。请记住指定图像`-fx-pref-height`的`-fx-pref-width`尺寸，或者是否是`-fx-padding`图像侧面尺寸一半的正方形，以显示整个图像。

```
#custom-slider .thumb {
    -fx-background-image :url("https://i.imgur.com/SwDjIg7.png");
    -fx-background-color: transparent;

    -fx-padding: 24;

    /*-fx-pref-height: 48;*/
    /*-fx-pref-width: 48;*/
}

#custom-slider .track {
    -fx-background-color: #2F2F2F;
}

#base-layout {
    -fx-background-color: lightgray;
    -fx-padding: 10px;
} 
```

示例程序输出：

![滑块](../Images/1c7f76a58c6e253d54a89ffe80580deb.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T06:39:35.663

如果您想删除拇指背景颜色并且只有图像（半透明的，如圆形按钮），那么您还应该 -fx-background-color:transparent; 除非你有背景

```
.slider .thumb {
    -fx-background-image :url("sider-round-thumb-image.png"); 
    -fx-padding: 16; /* My thumb image is 33x33 pixels,so padding is half */
    -fx-pref-height: 28;
    -fx-pref-width: 28;

    -fx-background-color:transparent;
} 
```

# java - java web应用程序的驱动程序放在哪里

> ID：13457551
> 
> 赞同：1
> 
> 时间：2012-11-19T16:02:31.807
> 
> 标签：java, jdbc, web, jersey

我正在使用 jersey 在 java 上构建一个项目。

在程序中我需要连接到数据库 MySql。我有下载驱动程序（* .jar 文件），并将它放到 WEB-INF/lib 目录（到其他球衣库），我也将它添加到构建路径中。如果我正在创建war文件并将其上传到tomcat服务器，那么一切都很好。但是，如果我尝试使用“在服务器上运行”从 Eclipse 运行它，则应用程序找不到该驱动程序。如果我正在使用 main 方法创建一个小类来测试该驱动程序，并将该类作为应用程序运行，那么一切正常。

所以我应该把那个库放在哪里，这样我的应用程序可以在我用 eclipse 运行它时看到它。

PS你也可以推荐我一些关于如何最好地用球衣组织项目的文章。因为我不知道该怎么办。当我有一些大的和平页面写在 html 上做。我应该将其内容复制到 java 文件并返回，还是应该上传该文件并在我的班级中阅读它，或者可能存在其他一些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:13:42.333

使用[Maven](http://maven.apache.org)处理依赖关系。对于 servlet/HTML 映射，请使用 MVC 框架，例如[Spring](http://www.springsource.org/)或[Struts](https://struts.apache.org/)。

# ios - Paypal MECL iOS - 直接显示“用卡付款”视图

> ID：13457553
> 
> 赞同：2
> 
> 时间：2012-11-19T16:02:38.107
> 
> 标签：ios, paypal

我正在使用 Paypal MECL 库在我的应用程序中处理付款。在显示所有可用付款方式的屏幕上，我使用 Paypal 库中的“使用 Paypal 付款”按钮。这会将用户引导至加载贝宝网站的 UIWebView。在这个网站的最底部，有一个链接叫做“用卡付款”，它会加载另一个网站，用户也可以在该网站上用信用卡付款。

我想知道是否可以直接使用“用卡支付”网站初始化 UIWebView。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:51:13.650

在 SetExpressCheckout 调用中，您应该能够传入变量 SOLUTIONTYPE=SOLE，这应该使使用卡付款成为默认设置。

默认情况下，SOLUTIONTYPE 将是 MARK，这将显示 PayPal。因此，只需将其设置为 SOLE 就可以了。

# c# - 尝试 SaveChanges 实体框架 5

> ID：13457558
> 
> 赞同：1
> 
> 时间：2012-11-19T16:02:52.263
> 
> 标签：c#, entity-framework-5

我正在使用代码优先。

执行

```
 try
        {
            _context.SaveChanges();
        }
        catch (EntityException e)
        {

        } 
```

一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

```
 this.Property(t => t.Senha)
            .HasMaxLength(15); 
```

我强制输入大于 15 个字符的密码，catch 永远不会执行，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:12:24.117

该错误发生在验证实体时导致[DbEntityValidationException](http://msdn.microsoft.com/en-us/library/system.data.entity.validation.dbentityvalidationexception%28v=vs.103%29.aspx)。

所以试试

```
catch (DbEntityValidationException e)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:10:08.407

也许您正在捕获不正确的异常。试试这个 ：

```
 try
    {
        _context.SaveChanges();
    }
    catch (DbEntityValidationException e)
    {

    } 
```

# jquery - 在一行列中找不到确切的 TD 值

> ID：13457561
> 
> 赞同：0
> 
> 时间：2012-11-19T16:02:59.520
> 
> 标签：jquery

我有两个包含文本 SUM 的描述，但一个是粗体（**SUM**和一个不是（SUM））。我想获得 td:eq(5) 的描述，其中包含不带 b-tag 的 SUM。

HTML 是动态生成的，所以我不能放置任何 ID、类等。

这是我的代码（它在两个总和字段上都给了我绿色背景）：

```
$('#someTable tr').each(function () {
    var tr = $('#someId').closest('tr');
    var tdSum = $(tr).find('td:contains("SUM")');

    $(tdSum).closest('tr').find('td:eq(5)').css('background-color', 'green');
}); 
```

我希望你明白我想要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:09:30.117

首先，`tr`已经作为当前循环项目可用。要选择`td`包含文本`SUM`但不包含`b`标签的内容，请按照指示使用下面的选择器。然后应用格式：

```
$('#someTable tr').each(function () {            
    var tr = $(this);
    var tdSum = $(tr).find('td:contains("SUM"):not(:has(b))').css('background-color', 'green');         
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:09:57.957

如果你这样做`each()`，应该推荐使用`$(this)`.

```
$('#someTable tr').each(function () {            
        if($(this).find('td:contains("SUM")').length > 0){            
            $(this).find('td:eq(5)').css('background-color', 'green');
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:17:51.183

尝试使用 .not() 并且必须用 ab 标签过滤掉 td

```
.not(':has("b")') 
```

或 filter 函数来过滤掉元素

```
$(tr).find('td:contains("SUM")').filter(function(){
     return $('b',this).length == 0;
}); 
```

# r - 如何确定ggplot2对象每一层的geom类型？

> ID：13457562
> 
> 赞同：9
> 
> 时间：2012-11-19T16:03:01.270
> 
> 标签：r, ggplot2, layer, proto, ggproto

作为从我已经创建的绘图中删除特定几何图形的一部分（[此处](https://stackoverflow.com/questions/13407236/remove-a-layer-from-a-ggplot2-chart)链接），我想动态确定 ggplot2 对象的每一层的几何图形类型。

假设我不知道添加图层的顺序，有没有办法动态查找具有特定几何图形的图层？如果我像下面那样打印出图层，我可以看到这些图层存储在一个列表中，但我似乎无法访问 geom 类型。

```
library(ggplot2)
dat <- data.frame(x=1:3, y=1:3, ymin=0:2, ymax=2:4)
p <- ggplot(dat, aes(x=x, y=y)) + geom_ribbon(aes(ymin=ymin, ymax=ymax), alpha=0.3) + geom_line()
p$layers

[[1]]
mapping: ymin = ymin, ymax = ymax 
geom_ribbon: na.rm = FALSE, alpha = 0.3 
stat_identity:  
position_identity: (width = NULL, height = NULL)

[[2]]
geom_line:  
stat_identity:  
position_identity: (width = NULL, height = NULL) 
```

我不熟悉 proto 对象，而且我从 proto[文档](http://cran.r-project.org/web/packages/proto/vignettes/proto.pdf)中尝试过的东西似乎不起作用（例如`p$layers[[1]]$str()`）。

* * *

感谢下面的答案，我能够想出一个动态删除图层的函数：

```
remove_geom <- function(ggplot2_object, geom_type) {
  layers <- lapply(ggplot2_object$layers, function(x) if(x$geom$objname == geom_type) NULL else x)
  layers <- layers[!sapply(layers, is.null)]

  ggplot2_object$layers <- layers
  ggplot2_object
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-05-15T14:53:41.637

**ggplot 2.2更新：** 如果你想要的是一个命名geom类型的字符串，你可以使用：

```
sapply(p$layers, function(x) class(x$geom)[1]) 
```

它为每一层的 geom 对象产生第一个类名。在 OP 的示例中：

```
[1] "GeomRibbon" "GeomLine" 
```

上面答案中的代码不再给出 2.2 版显示的结果 接受的答案产生两个 NULL 值，另一个答案产生完整的`ggproto`对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:11:28.223

**Edit: This answer is no longer current. It worked when the question was asked and presumably for quite some time after but for an answer that works with ggplot2 >= 2.2.0 see [https://stackoverflow.com/a/43982598/1003565](https://stackoverflow.com/a/43982598/1003565)**

* * *

If we're just looking to get the geom name for each item this appears to be in the $geom$objname part of each layer.

```
p$layers[[1]]$geom$objname
#[1] "ribbon"
lapply(p$layers, function(x){x$geom$objname})
#[[1]]
#[1] "ribbon"
#
#[[2]]
#[1] "line" 
```

As an added note - the reason you couldn't use the `p$layers[[1]]$str()` syntax is (probably) because you didn't explicitly load the proto package. ggplot2 uses it internally but it imports it instead of using Depends. Notice the difference:

```
> library(ggplot2)
> dat <- data.frame(x=1:3, y=1:3, ymin=0:2, ymax=2:4)
> p <- ggplot(dat, aes(x=x, y=y)) + geom_ribbon(aes(ymin=ymin, ymax=ymax), alpha=0.3) + geom_line()
> p$layers
[[1]]
mapping: ymin = ymin, ymax = ymax 
geom_ribbon: na.rm = FALSE, alpha = 0.3 
stat_identity:  
position_identity: (width = NULL, height = NULL)

[[2]]
geom_line:  
stat_identity:  
position_identity: (width = NULL, height = NULL)

> p$layers[[1]]$str()
Error: attempt to apply non-function
> library(proto)
> p$layers[[1]]$str()
proto object 
 $ geom_params:List of 2 
 $ mapping    :List of 2 
 $ stat_params: Named list() 
 $ stat       :proto object  
  ..parent: proto object  
 .. .. parent: proto object  
 $ inherit.aes: logi TRUE 
 $ geom       :proto object  
  ..parent: proto object  
 .. .. parent: proto object  
 $ position   :proto object  
  ..parent: proto object  
 .. .. parent: proto object  
 .. .. .. parent: proto object  
 $ subset     : NULL 
 $ data       : list() 
  ..- attr(*, "class")= chr "waiver" 
 $ show_guide : logi NA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T16:17:21.837

这是查看原型对象的一种方式。据我了解，它们是环境，因此 using`ls`为您提供了名称（显然，即使是从作为绘图对象的父环境中提取的项目，`p`.）：

```
 ls(p$layers[[1]])
# [1] "data"        "geom"        "geom_params" "inherit.aes" "mapping"    
# [6] "position"    "show_guide"  "stat"        "stat_params" "subset" 

 p$layers[[1]][["geom"]]
#geom_ribbon: 

 sapply( p$layers, "[[", "geom")
#---------------
[[1]]
geom_ribbon: 

[[2]]
geom_line: 
```

@Dason 指出您可能因此需要一个字符向量，因此再次使用 sapply 和 "[[" 应该可以满足这种可能的需求：

```
 sapply( sapply( p$layers, "[[", "geom"), "[[", 'objname')
#[1] "ribbon" "line" 
```

ggproto 设计中的更改包括使名称位于 - 属性内部更深的一层`class`：

```
 lapply( sapply( p$layers, "[[", "geom"), function(x) attributes(x) )
#----------------
[[1]]
[[1]]$class
[1] "GeomRibbon" "Geom"       "ggproto"   

[[2]]
[[2]]$class
[1] "GeomLine" "GeomPath" "Geom"     "ggproto" 

sapply( sapply( p$layers, "[[", "geom"), function(x) class(x)[[1]][1] )
[1] "GeomRibbon" "GeomLine" 
```

# objective-c - 如何在 NSSlider 上为旋钮左侧的部分着色

> ID：13457565
> 
> 赞同：1
> 
> 时间：2012-11-19T16:03:15.793
> 
> 标签：objective-c, macos, nsslider

在我的项目中，NSSlider 控制 AVPlayer 的音量。我想为旋钮左侧的 NSSlider 部分着色。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:45:13.173

你应该使用`NSProgressIndicator`它。

作为替代方案，您可以使用自定义 NSSliderCell 并覆盖`- (BOOL)_usesCustomTrackImage`以返回`YES`并覆盖`- (void)drawBarInside:(NSRect)cellFrame flipped:(BOOL)flipped`以绘制自定义条。在那里，您可以使用 [NSCell doubleValue] 来获取滑块的当前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T07:37:45.667

您应该继承 NSSliderCell 并编写如下内容：

```
@interface CustomSliderCell : NSSliderCell {
    NSRect _barRect;
    NSRect _currentKnobRect;
}
//    You should set image for the barFill
//    (or not if you want to use the default background)
//    And image for the bar before the knob image
    @property (strong, nonatomic) NSImage *barFillImage;
    @property (strong, nonatomic) NSImage *barFillBeforeKnobImage;

//    Slider also has the ages so you should set
//    the different images for the left and the right one:
    @property (strong, nonatomic) NSImage *barLeftAgeImage;
    @property (strong, nonatomic) NSImage *barRightAgeImage;
@end 
```

和实施：

```
- (void)drawKnob:(NSRect)knobRect {
    [super drawKnob:knobRect];
    _currentKnobRect = knobRect;
}

-(void)drawBarInside:(NSRect)cellFrame flipped:(BOOL)flipped {
    _barRect = cellFrame; 
    NSRect beforeKnobRect = [self createBeforeKnobRect];
    NSRect afterKnobRect = [self createAfterKnobRect];

//    Draw bar before the knob
    NSDrawThreePartImage(beforeKnobRect, _barLeftAgeImage, _barFillBeforeKnobImage, _barFillBeforeKnobImage,
            NO, NSCompositeSourceOver, 1.0, flipped);

//    If you want to draw the default background 
//    add the following line at the at the beginning of the method:
//    [super drawBarInside:cellFrame flipped:flipped];
//    And comment the next line:
    NSDrawThreePartImage(afterKnobRect, _barFillImage, _barFillImage, _barRightAgeImage,
            NO, NSCompositeSourceOver, 1.0, flipped);
}

- (NSRect)createBeforeKnobRect {
    NSRect beforeKnobRect = _barRect;

    beforeKnobRect.size.width = _currentKnobRect.origin.x + _knobImage.size.width / 2;
    beforeKnobRect.size.height = _barFillBeforeKnobImage.size.height;
    beforeKnobRect.origin.y = beforeKnobRect.size.height / 2;

    return beforeKnobRect;
}

- (NSRect)createAfterKnobRect {
    NSRect afterKnobRect = _currentKnobRect;

    afterKnobRect.origin.x += _knobImage.size.width / 2;
    afterKnobRect.size.width = _barRect.size.width - afterKnobRect.origin.x;
    afterKnobRect.size.height = _barFillImage.size.height;
    afterKnobRect.origin.y = afterKnobRect.size.height / 2;

    return afterKnobRect;
} 
```

我创建了[LADSLider](https://github.com/Doshipak/LADSlider)，它可以帮助您真正简单快速地创建您想要的东西。

# mysql - 为邮政编码构建数据库表

> ID：13457572
> 
> 赞同：1
> 
> 时间：2012-11-19T16:03:33.780
> 
> 标签：mysql, database-design

我正在尝试构建一个包含邮政编码数据的数据库表（稍后在我的应用程序中引用）。

我从[http://www.populardata.com/zipcode_database.html](http://www.populardata.com/zipcode_database.html)`.csv`获取文件，其中包含以下数据：

*   压缩
*   纬度
*   经度
*   城市
*   状态
*   县
*   zip_class

到目前为止，我尝试的是：

```
CREATE TABLE `finder_zip_codes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `zip` mediumint(128) DEFAULT '0',
  `latitude` varchar(128) DEFAULT NULL,
  `longitude` varchar(128) DEFAULT NULL,
  `city` varchar(128) DEFAULT NULL,
  `state` varchar(128) DEFAULT NULL,
  `county` varchar(128) DEFAULT NULL,
  `zip_class` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

但是由于我对 MySQL 比较陌生，因此最佳实践等已经悄悄出现在我身上。例如，该`zip`表似乎去掉了邮政编码的开头。我调查了`ZEROFILL`但我不认为这是我想要的，我基本上想`zip`用作一个 int 字段，但它不会自动更正其中的数据（或截断它）。

任何帮助将不胜感激 - 我一直在尝试一些文档网站，这是我迄今为止提出的 - 所以任何额外的提示都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:07:01.810

您可能**不想**将邮政编码存储为整数字段，因为它不是真正的整数。它看起来像一个，但对其执行整数运算是没有意义的（例如，你永远不会这样做`12034 + 32523`——这将是荒谬的）。

最好将它存储为一个`char(5)`字段，因为它确实是这样的 - 一个 5 个字符的字符串，恰好被限制为仅包含数字。

**编辑**

`Latitude`并且`Longitude`可以存储为数字数据类型（可能是小数或双精度），因为它们实际上*是*数字:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:09:26.423

整数的存储方式与数字相同。最有可能的是，它不是“剥离”——您用来查看表格的界面正在删除前导零以使其对人类友好。

同样，当您在屏幕或报告上生成它时，您也应该用零填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T17:17:23.703

我们经常收到这个问题，因为我们出售邮政编码数据。默认情况下，Microsoft 产品会去掉前导零，波多黎各、新英格兰和新泽西州邮政编码的部分地区有一个或多个前导零。我见过的最好的 SQL 方法是使用：RIGHT(100000 + zip, 5)。

这也适用于墨西哥邮政编码和您想要前导零的任何整数。您只需更改逗号后的零数和整数表达式。例如，如果您需要一个 6 位数的支票号码字段以具有前导零，您将拥有： RIGHT(1000000 + check_num, 6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T19:13:45.207

看来您正在限制美国的邮政编码。您可能还想考虑外国邮政编码。在这种情况下，您需要重新构建数据库架构以包含国家/地区。这将需要多个表（规范化）在表之间具有外键关联。示例：country_id 和 state_id。

此外，不同国家/地区的邮政编码格式似乎有所不同。参考：[http](http://en.wikipedia.org/wiki/List_of_postal_codes) ://en.wikipedia.org/wiki/List_of_postal_codes 。

我建议您为表名提供一个更有意义的名称，而不是 finder_zip_codes。我们通常不使用复数形式的表名（去掉结尾的 's'）。另外，表名应该是名词，“finder”表示动词。更好的名称是 usa_zip_code。

此外，主键通常是表的名称，后跟“id”。示例：usa_zip_code_id。这样，当您在另一个表中有 usa_zip_code_id 作为外键时，您会立即知道它指的是哪个表。最后，考虑哪些列不应该为空，和/或唯一。

# .net - 在 .NET 中获取 TEXTMETRIC.tmAveCharWidth

> ID：13457573
> 
> 赞同：1
> 
> 时间：2012-11-19T16:03:32.930
> 
> 标签：.net, winforms, fonts

我正在编写一个 WinForms 用户控件。我的计划是允许调用者修改控件的字体，但强制字体始终是固定宽度的字体。

然后我需要在控件中水平放置一个插入符号。当我在 C++ 中执行此操作时，我使用了`GetTextMetrics()`和`TEXTMETRIC.tmAveCharWidth`. 但是在这个周末花了很多时间之后，我无法在 C#/WinForms 中复制它。

我知道有一种方法可以声明它，所以我可以`GetTextMetrics()`直接调用。但我希望有一种 .NET 方式来做到这一点。（如果没有，是否有人有正确的语法在 .NET 中声明此 API 函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:40:16.290

这适用于 Windows 窗体：

```
 TextMetrics metrics;
 var renderer = new VisualStyleRenderer(VisualStyleElement.Window.Dialog.Normal);

 using (var context = this.CreateGraphics() as IDeviceContext)
 {
     var metrics = renderer.GetTextMetrics(context);
 }

 var averageWidth = metrics.AverageCharWidth; 
```

# data-mining - 决策树 vs 朴素贝叶斯 vs Apriori 算法和多元回归模型

> ID：13457574
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:03:33.337
> 
> 标签：data-mining, decision-tree, apriori

这些算法有什么区别？决策树 - 朴素贝叶斯 - Apriori 算法 - 多元回归模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:43:57.190

诸如朴素贝叶斯和决策树之类的算法适用于具有分类列的标记数据。例如，如果您想将天气状态和星期几与火车的准点性联系起来，那么它应该被标记为数据。因为您有很多天气和星期几的组合，并且您有一个包含迟到/未迟到的值的类列。

另一方面，Apriori 算法适用于没有类列的未标记数据。例如，如果客户购买 A 和 B，那么他很可能会购买 C。这里没有类别列。任何项目都可以进入决策。该算法用于寻找关联规则，主要是从数据集中寻找频繁项集，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:41:31.657

抱歉，这是一个非常糟糕的问题。所以你只能得到一个糟糕的答案，对不起。

您正在投入一些随机算法，并要求我们解释其中的区别。

但它们是如此不同，很难找到一个起点。

APRIORI 和决策树解决**完全不同的问题**。所以它们与**Apples 和 Bananas**差不多。两者恰好都是水果，但它们是不同的。

请做更多的研究，至少阅读维基百科关于该主题的内容（或一本书。你知道，有一些非常好的机器学习书籍）并查看常见问题解答。

# c# - 动态执行委托

> ID：13457577
> 
> 赞同：5
> 
> 时间：2012-11-19T16:03:35.413
> 
> 标签：c#, dynamic, reflection, delegates

我有一个基本上是消息处理程序的类，它接受请求，找到该消息类型的处理器，创建适当的响应并返回它。为此，我创建了一个委托如下`public delegate Rs ProcessRequest<Rq,Rs>(Rq request);`，然后在我的类中，创建了许多受支持的消息及其处理方法。问题是应该找出使用哪种处理方法的主要处理方法找不到使用 GetMethod() 方法的方法。

这是整个代码，如果您能告诉我如何动态选择适当的方法然后执行它，那就是我正在寻找的。

```
public delegate Rs ProcessRequest<in Rq, out Rs>(Rq request) where Rq : API.Request where Rs : API.Response;

public class WebSocketServer
{
    private WebSocketMessageHandler messageHander;

    // Incoming message handlers
    public ProcessRequest<InitUDPConnectionRq, InitUDPConnectionRs> ProcessInitUDPConnection;
    public ProcessRequest<ListenHandshakeRq, ListenHandshakeRs> ProcessListenHandshake;
    public ProcessRequest<PresenceChangeRq, PresenceChangeRs> ProcessPresenceChange;
    public ProcessRequest<ChatMessageRq, ChatMessageRs> ProcessChatMessage;
    public ProcessRequest<RDPRequestResponseRq, RDPRequestResponseRs> ProcessRDPRequestResponse;
    public ProcessRequest<RDPIncomingRequestRq, RDPIncomingRequestRs> ProcessRDPIncomingRequest;

    public WebSocketServer(WebSocketMessageHandler handler)
    {
        this.messageHander = handler;
    }

    public void processRequest(API.Request request)
    {
        String resquestType = request.GetType().Name;
        String processorName = resquestType.Substring(0, resquestType.Length - 2);
        API.Response response = null;
        // Do we have a process method for this processor
        MethodInfo methodInfo = this.GetType().GetMethod("Process" + processorName);
        if (methodInfo != null)
        {
             // Execute the method via Invoke...., but code never gets here
        }
        else
        {
            logger.Warn("Failed to find a processor for " + processorName);
            response = new ErrorRs(request.id, "Failed to find a processor for " + processorName);
        }
        sendResponse(response, request);
    }
} 
```

现在我将这些字段分配给方法，我只是不能动态地执行它们。

```
// Link into the hooks so we can receive requests
_appContext.ConnectionManager.Connection.webSocketServer.ProcessInitUDPConnection = ProcessInitUDPConnection;
_appContext.ConnectionManager.Connection.webSocketServer.ProcessListenHandshake = ProcessListenHandshake;
_appContext.ConnectionManager.Connection.webSocketServer.ProcessPresenceChange = ProcessPresenceChange;
_appContext.ConnectionManager.Connection.webSocketServer.ProcessChatMessage = ProcessChatMessage;

// 1 method as an example
private PresenceChangeRs ProcessPresenceChange(PresenceChangeRq request)
{
    _appContext.RosterManager.presenceChange(request.user, request.presence);
    return new PresenceChangeRs();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:02:47.510

这是一些`Dictionary`使用示例代码。对我来说，自定义类型太多了，无法确保它完全编译并经过测试，但应该能让你走上正确的轨道。

```
public class WebSocketServer
{
    private WebSocketMessageHandler messageHander;

    // Incoming message handlers
    private Dictionary<string, System.Delegate> ProcessHandlers = new Dictionary<string, System.Delegate>();

    public void RegisterProcessHandler(string name, System.Delegate handler)
    {
        ProcessHandlers.Add(name, handler);
    }

    public void processRequest(API.Request request)
    {
        String resquestType = request.GetType().Name;
        String processorName = resquestType.Substring(0, resquestType.Length - 2);
        API.Response response = null;

        string processorName = "Process" + processorName;

        if (ProcessHandlers.ContainsKey(processorName))
        {
            System.Delegate myDelegate = ProcessHandlers[processorName]; 
            response = (API.Response)myDelegate.DynamicInvoke(request);
        }
        else
        {
            logger.Warn("Failed to find a processor for " + processorName);
            response = new ErrorRs(request.id, "Failed to find a processor for " + processorName);
        }

        sendResponse(response, request);
    }
} 
```

登记：

```
var webSocketServer = _appContext.ConnectionManager.Connection.webSocketServer;
webSocketServer.RegisterProcessHandler("InitUDPConnection", ProcessInitUDPConnection);
webSocketServer.RegisterProcessHandler("ListenHandshake", ProcessListenHandshake); 
```

# c++ - 如何使 Windows 计时器在后台线程中运行

> ID：13457578
> 
> 赞同：4
> 
> 时间：2012-11-19T16:03:37.227
> 
> 标签：c++, windows

问题：如何在后台设置计时器？那就是创建计时器线程的线程在时钟滴答作响时仍然可以做其他事情。

尝试：-使用 _beginthreadex() --> 似乎有竞争条件

```
class Timer{
 ...
 static unsigned __stdcall tick(void *param){
    while(1){
        Timer::timer++;
        Sleep(Timer::timer*1000);
    }
    return 1;
}
}

.....
HANDLE time_thread = (HANDLE) _beginthreadex(0, 0, &Timer::tick,0,0,NULL);
...
//test for 20 seconds
//want to do something while the clock is not 20 seconds
//the mainthread here still has to receive input
//What is the proper way to do it?

while (Timer::getTime() != 20){
   cout << Timer::getTime()
}

CloseHandle(time_thread);
... 
```

注意：我使用的是 Visual Studio 2008，而不是 11，所以我没有 C++11 支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:19:38.620

我不确定你在这里有什么问题。您已经创建了一个永久更新成员变量的线程，`timer`并且您的主要用途是一个紧密/快速的循环，该循环（大概）打印该时间直到它达到 20。它没有做什么？从技术上讲，存在增加该值与在另一个线程中检查它的竞争条件，但就本示例而言，它应该没问题......

**编辑：** 尝试使用完全输入控制的非阻塞输入：

```
HANDLE hStdIn = GetStdHandle( STD_INPUT_HANDLE );
while ( true ) {
    if ( WAIT_OBJECT_0 == WaitForSingleObject( hStdIn, 1000 ) ) {
        // read input
        INPUT_RECORD inputRecord;
        DWORD events;
        if ( ReadConsoleInput( hStdIn, &inputRecord, 1, &events ) ) {
            if ( inputRecord.EventType == KEY_EVENT ) {
                printf( "got char %c %s\n",
                    inputRecord.Event.KeyEvent.uChar.AsciiChar,
                    inputRecord.Event.KeyEvent.bKeyDown ? "down" : "up" );
            }
        }
    }
    printf( "update clock\n" );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:08:09.063

恐怕你误解了系统定时器是如何工作的以及如何使用它们——重点是它们会*自动*在后台运行，所以你不必自己进行线程管理。

这一般都有 Windows 计时器的示例和解释，如果您尝试推出自己的`Timer`课程，则可以使用它：[Timers Tutorial](http://www.codeproject.com/Articles/1236/Timers-Tutorial)

这是`Timer`Windows.NET自带的类，底部有代码示例：[Timer Class](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

**编辑添加：**

这是适用于非 MFC 应用程序的 Win32 计时器示例版本（来自 turorial 页面）：

```
int nTimerID;

void Begin(HWND hWindow_who_gets_the_tick)
{
    // create the timer to alert your window:
    nTimerID = SetTimer(hWindow_who_gets_the_tick, uElapse, NULL);
}

void Stop()
{
    // destroy the timer
    KillTimer(nTimerID);
} 
```

有关详细信息，请参阅[MSDN：定时器功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468913%28v=vs.85%29.aspx)。

然后在您的窗口过程中，您会收到`WM_TIMER`消息并根据需要进行响应。

或者，计时器可以调用用户定义的过程。有关详细信息，请参阅[SetTimer 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644907%28v=vs.85%29.aspx)。

# c# - Windows Phone 8 的 C# 游戏开发？

> ID：13457580
> 
> 赞同：5
> 
> 时间：2012-11-19T16:03:47.980
> 
> 标签：c#, windows-phone-8

我有兴趣尝试我在游戏开发方面的技能。我是一个相当优秀的 C# 开发人员。但我目前的技能是应用程序开发（WPF、WCF 和实体框架）。

我试图弄清楚如何为 Windows Phone 8 制作图形游戏。但我看到的所有示例（用于游戏）都使用 C++。

8 多年前，我是一名 C++ 游戏开发人员，但我已经忘记了大部分技能（我怀疑它们现在是否有用）。

我不是在寻找 3D 渲染。只是一个不错的 2D（塔防）游戏。

如果可能的话，我宁愿用 C# 编写代码。**可以使用 C# 进行游戏开发吗？**

如果是这样，将不胜感激关于从哪里开始的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T04:36:27.223

这是我能够找到的：

有一个名为 SharpDX 的库，允许您从 C# 调用 DirectX。看起来还不错。

但是，Windows Phone 制造商不包括对 Direct2D 的支持。所以除非你打算制作一个完全 3D 的应用程序，否则你运气不好（让我告诉你，这是很多工作！）。

所以，如果你只是想做一个漂亮的 2D 应用程序，这些是你的选择：

1.  使用 Xaml 和 C# 编写游戏（性能问题？）
2.  使用 C#、SharpDX 和 3d 编写您的游戏（但只在一个平面上绘制）（2d 的工作量很大）。
3.  使用 codeplex 上的 DirectX Take Kit。它允许您使用垂死的 XNA 框架的 API 进行开发（这是一个 C++ 选项）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:09:52.400

Windows Phone 8 中添加了对 C++ 的支持。在 Windows Phone 7 上，只能使用 Silverlight 或 XNA 开发应用程序。它并没有阻止开发者发布数千款游戏，包括《植物大战僵尸》或《愤怒的小鸟》等主流游戏。因此，我相信可以肯定地得出结论，在 C# 中确实可以进行游戏开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:06:50.580

根据[https://dev.windowsphone.com/en-us，Windows](https://dev.windowsphone.com/en-us) 8 sdk 现在可用。根据他们的示例，大多数实际上是使用 C# 完成的。您也可以在那里找到一些 XNA 游戏示例。

# c# - Access 2007 数据库未更新

> ID：13457585
> 
> 赞同：2
> 
> 时间：2012-11-19T16:04:01.377
> 
> 标签：c#, ms-access-2007, updating

我正在开发一个使用 Access 数据库的 .Net 桌面应用程序。我正在使用联系人表单并尝试更改类别字段，该字段在组合框中有多个选择值。我试图设置的值在选项列表中，但它没有做任何事情。这是我的代码。请说明发生了什么。该代码似乎适用于 DELETE 命令。

```
 string list = string.Join(", ", f);

        string ConnStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + txtDB.Text + "";

        string ComStr = "UPDATE Contacts SET Category = ? where [E-mail Address] in (?)";
        using (OleDbConnection con = new OleDbConnection(ConnStr))
        {
            con.Open();
            using (OleDbCommand com = new OleDbCommand(ComStr, con))
            {
                com.Parameters.AddWithValue("List", list);
                com.Parameters.AddWithValue("Category", "Не получава мейли");
                com.ExecuteNonQuery();
            }
            con.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:51:01.757

我找到了答案。列表中的每个项目都必须在......好吧我不知道这个词，但这是我的工作代码：

```
 string list = string.Join("', '", f);
    string l = "'" + list + "'";

    string ConnStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + txtDB.Text + "";

    string ComStr = "UPDATE Contacts SET Category = @Category where [E-mail Address] in (" + l + ")";
    using (OleDbConnection con = new OleDbConnection(ConnStr))
    {
        con.Open();
        using (OleDbCommand com = new OleDbCommand(ComStr, con))
        {

            com.Parameters.AddWithValue("Category", "Не получава мейли");
            com.ExecuteNonQuery();
        }
        con.Close();
    } 
```

感谢您的提示和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:23:47.120

我认为这应该可行：-

```
string ComStr = "UPDATE Contacts SET Category = @Category where [E-mail Address] in @List";
            using (OleDbConnection con = new OleDbConnection(ConnStr))
            {
                con.Open();
                using (OleDbCommand com = new OleDbCommand(ComStr, con))
                {

                    com.Parameters.AddWithValue("@Category", "Не получава мейли");
                    com.Parameters.AddWithValue("@List", list);
                    com.ExecuteNonQuery();
                }
                con.Close();
            } 
```

# iphone - 相对于彼此的按钮定位

> ID：13457597
> 
> 赞同：0
> 
> 时间：2012-11-19T16:04:45.723
> 
> 标签：iphone, objective-c, ios, ios6, storyboard

我有 2 个按钮需要相对放置：

![在此处输入图像描述](../Images/7d5479ad2789acadcad97d630cf41c23.png)

按钮的内容和宽度各不相同，所以我不能在故事板中将它们彼此相邻放置。我可以在情节提要中使用尾随或前导空格并将关系设为另一个按钮而不是超级视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:35:37.810

在 IB 中很容易做到——只需选择两个按钮并从窗口右下角的约束按钮（看起来像 H 的那个）中添加“水平间距”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:38:55.233

我很好奇你为什么在故事板上这样做。如果你需要 Xib 的这个自定义，也许你想创建一个单独的“测试”项目来计算视图。从软件工程的角度来看，我强烈建议这样做，但我再次建议不要从我的学生开始任何生产级项目的故事板，它对某些东西有好处，但作为个人开发人员，它有很多下降，而且呈指数级下降属于团队开发工具。好吧，结束我自以为是的咆哮。

如果我理解正确，我可以想到三种方法来解决您的问题。问题：

*   我有一个视图，最低层是滚动视图，上面有两个子视图，它们是 UIButtons。
*   按钮的大小会因内容而异（假设文本/字体更改，以及可能的图片？）。
*   我希望按钮以一致的方式彼此相邻出现，即使它们的大小会有所不同。
*   我想支持多个方向和可能的多个成语。

解决方案建议： 1.由于问题的复杂性，我的第一个建议可能看起来不那么有趣。以编程方式计算视图，使用相对几何数学可以解决所有问题，这可能看起来令人生畏，但它确实是我认为通过创建自定义视图控制器的最干净和最简单的方法，随着信息更新控制器将管理视图为了适当地显示，这样做的好处是，如果您真的擅长相对几何，您的代码将可以跨习语工作。

1.  用弹簧和支柱解决它，然后以你能想到的各种方式对其进行测试，但这不如基于几何的方法的数学证明那么好。为什么您可能会问，因为更高级别的解决方案并不能保证您可以控制。但是在设置时强调相对调整大小和定位。

2.  这是不必要的浪费，并且会大大降低性能，但是我已经由计算机科学专业的大四学生上交了。（可怜的家伙从来没有得到超过 2/15 的主观分数）

为几乎所有情况创建一个视图，并在它们之间进行过于复杂的控制器切换。这方面的性能成本是巨大的，并且很有可能有人找到一种不一致的屏幕的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:30:33.110

您只能在课堂上使用它，只是一个建议

在.h

```
UIButton *firstButton;
UIButton *secondButton; 
```

米

对于第一个按钮：

```
firstButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
firstButton.frame = CGRectMake(100, 100, 150, 60);//this can be changed at run time
[firstButton setTitle:@"TAP1" forState:UIControlStateNormal];
[firstButton addTarget:self action:@selector(someMethod1)
 forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:firstButton]; 
```

对于第二个按钮：

```
 secondButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
      secondButton.frame = CGRectMake(firstButton.frame.origin.x+10,    
       firstButton.frame.origin.y+10 , firstButton.frame.size.width,  
       firstButton.frame.size.height);

  [secondButton setTitle:@"TAP2" forState:UIControlStateNormal];
  [secondButton addTarget:self action:@selector(someMethod2)
  forControlEvents:UIControlEventTouchUpInside];
  [self.view addSubview:secondButton]; 
```

除上述10外，您可以根据需要放置自己的填充值；每次你的 firstButton 宽度改变时，只需运行

```
 secondButton.frame = CGRectMake(firstButton.frame.origin.x+10,    
       firstButton.frame.origin.y+10 , firstButton.frame.size.width,  
       firstButton.frame.size.height); 
```

两者都会对齐。我想这有帮助

# web2py - 检索正在使用智能网格查看/编辑的当前记录的记录 ID

> ID：13457602
> 
> 赞同：0
> 
> 时间：2012-11-19T16:04:59.683
> 
> 标签：web2py

我正在使用 SQLFORM.smartgrid 作为我正在构建的应用程序的基础，因为它几乎完全符合要求。

我正在自定义 smartgrid 生成的视图，并想在我正在查看的记录上方添加一些仪表板。仪表板将包含与我正在查看的表相关的其他表中的记录数据。

如何检索智能网格中正在查看的当前记录的 ID？我尝试使用 request.args 从 url 中提取 id，但 args 作为列表返回，并且 id 并不总是具有相同的索引。检查列表中的整数似乎有点混乱和危险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:27:41.697

经过大量的戳戳和一些关于 usenet 的问题后，事实证明记录 id 始终是 url 中的最后一个 arg，因此您可以使用 request.args[-1]

# algorithm - 如果在圆圈内，则选择点的子集

> ID：13457607
> 
> 赞同：1
> 
> 时间：2012-11-19T16:05:19.580
> 
> 标签：algorithm

想象一下像10M订单这样的很多点。

现在我在给定的空间中随机画一个圆圈。

这个圆现在将根据中心和半径包围一些点。

现在，我想选择这个圆圈内的所有点。

蛮力方法非常低效。

有没有更好的方法来解决这个问题。

PS-我正在用python编码。

谢谢

编辑：蛮力方法：

从空间中选择一个点，计算到中心的距离，如果它小于半径，那么它在里面，否则在外面。

蛮力是，我必须遍历所有点，这是有问题的，因为在下一次迭代中，我将再次随机选择一个点并重复上述步骤。所以这就像 O(n^2)..我能做得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:35:48.467

在一些空间划分结构中预先安排点。

例如，四叉树。遍历树。由于每个节点对应于平面上的一个正方形，您可以快速检查该正方形是否与您的圆相交（在圆内至少有一个角或圆完全在正方形内）。如果确实相交，则继续向下遍历该节点，如果不相交，则跳过其所有子节点，从而可能消除对该正方形中点的大量单独检查。

# connection-string - oledb 的网络连接字符串

> ID：13457608
> 
> 赞同：0
> 
> 时间：2012-11-19T16:05:21.370
> 
> 标签：connection-string, oledbconnection

以下connectionStrings可能有什么问题

```
string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=\\otherPCName\SmoeSharedFolder\test.mdb;"; 
```

或者

```
string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=\\192.168.14\SmoeSharedFolder\test.mdb;"; 
```

*当我访问该 PC otherCP*上的数据库时，以下连接字符串没有问题

 *```
string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=D:\SmoeSharedFolder\test.mdb;"; 
```

我也可以使用此路径从其他 PC 打开文本文件。这告诉路径应该是有效的

```
\\otherPCName\SmoeSharedFolder\hi.txt 
```

我已经看到了网络的连接字符串，所以我认为它们应该可以工作，但是如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:58:41.450

```
string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=\\otherPCName\SmoeSharedFolder\test.mdb;";

string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=\\192.168.1.14\SmoeSharedFolder\test.mdb;"; 
```

这两个字符串对于从网络 PC 访问数据库都是有效的。如果您的数据库文件存在于**您有权**访问的文件夹中=> 存在于共享文件夹中。 仅当您也具有写入权限时，您**才能写入（更新/插入） 。**

我得到了错误`specified file cannot be opened`。`otherPCName`因为我在使用和 IP方面都有问题`192.168.14`。（对于其他pcname，我使用的是sampc，但它是sam-pc）。*

# dns - 无法查看我使用 S3 和 Route 53 托管的静态网站

> ID：13457609
> 
> 赞同：2
> 
> 时间：2012-11-19T16:05:22.867
> 
> 标签：dns, amazon-s3, amazon-route53

我正在尝试使用 S3 和 Route 53 为 DNS 设置静态站点。我以前从未使用过 AWS，而且我对 DNS 记录的了解很基础。

这是我所做的：

1.  我拥有域名 metrosndbx.info
2.  我在 Route 53 中为此域创建了一个托管区域
3.  我已将我的域的名称服务器更改为 Route 53 提供的名称服务器（我在 48 多小时前这样做了）
4.  我已将 CNAME 记录添加到指向 S3 存储桶的托管区域：www.metrosndbx.info CNAME [http://www.metrosndbx.info.s3-website-us-east-1.amazonaws.com/](http://www.metrosndbx.info.s3-website-us-east-1.amazonaws.com/)
5.  我的 S3 存储桶名为 www.metrosndbx.info 并设置为一个网站，其存储桶策略根据 Amazon 网站上的常见问题解答授予公共权限。

然而，我的浏览器无法解析 www.metrosndbx.info。虽然我可以解决存储桶的端点：[http ://www.metrosndbx.info.s3-website-us-east-1.amazonaws.com/](http://www.metrosndbx.info.s3-website-us-east-1.amazonaws.com/)

为什么我的 CNAME 似乎不起作用的任何想法。我对此的了解非常有限，但看这里 (http://mxtoolbox.com/SuperTool.aspx?action=a%3awww.metrosndbx.info) 似乎返回了一条对我来说看起来正确的 CNAME 记录。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:10:12.077

您的 CNAME 不应包含协议。它应该是“www.metrosndbx.info.s3-website-us-east-1.amazonaws.com”而不是“http://www.metrosndbx.info.s3-website-us-east-1.amazonaws.com” /”。

# xslt-1.0 - XSL：检查元素中是否存在项目 - 更清洁的解决方案？

> ID：13457610
> 
> 赞同：1
> 
> 时间：2012-11-19T16:05:35.783
> 
> 标签：xslt-1.0

是否有可能为以下问题提供更好的解决方案：

**输入xml**

```
<product>

<text>
<languageId>en-us</languageId>
<description>some text en us</description>
</text>

<text>
<languageId>en-gb</languageId>
<description>some text en gb</description>
</text>

<text>
<languageId>en-us</languageId>
</text>

<product> 
```

**输出xml**

```
<specifications>some text en us</specifications> 
```

因此，如果存在 languageId = en-us 的描述并且存在文本，则该文本将放置在输出 xml 中，否则元素接收属性值 xsi:nil=true

xslt 版本必须是 1.0

**XSLT**

```
 <ns0:specifications>

          <!-- First loop, check if en-us is present, if so, check if there is a text! -->
          <!-- If the 2 requirements are met, then this Txt element is used -->
          <xsl:for-each select="s0:text">
            <xsl:if test="translate(s0:LanguageId/text(),$smallcase,$uppercase)=translate('en-us',$smallcase,$uppercase)">
              <xsl:if test="s0:Txt!=''">
                <xsl:value-of select="s0:Txt/text()" />
              </xsl:if>
            </xsl:if>
          </xsl:for-each>

        <!-- Second loop, checks are the same. This loop is needed because xsl variables are immutable. If there is a better solution, just change the code!! -->
        <!-- If the 2 requirements are met, then the variable is marked as true, else it's empty -->
        <xsl:variable name="isEnUsPresent">
          <xsl:for-each select="s0:text">
            <xsl:if test="translate(s0:LanguageId/text(),$smallcase,$uppercase)=translate('en-us',$smallcase,$uppercase)">
              <xsl:if test="s0:Txt!=''">
                <xsl:value-of select="1" />
              </xsl:if>
            </xsl:if>
          </xsl:for-each>
        </xsl:variable>

        <!-- if the variable is empty, set the attribute value xsi:nil=true like below -->
        <xsl:choose>
          <xsl:when test="$isEnUsPresent=''">
            <xsl:attribute name="xsi:nil">
              <xsl:value-of select="'true'" />
            </xsl:attribute>
          </xsl:when>
        </xsl:choose>

</ns0:specifications> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:06:03.543

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 exclude-result-prefixes="xsi">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <specifications>
      <xsl:apply-templates select="*"/>
     </specifications>
 </xsl:template>    

 <xsl:template match="text[languageId='en-us']/description">
  <xsl:value-of select="."/>
 </xsl:template>

 <xsl:template match="/*[not(text[languageId='en-us']/description)]">
  <xsl:attribute name="xsi:nil">true</xsl:attribute>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<product>
    <text>
        <languageId>en-us</languageId>
        <description>some text en us</description>
    </text>
    <text>
        <languageId>en-gb</languageId>
        <description>some text en gb</description>
    </text>
    <text>
        <languageId>en-us</languageId>
    </text>
</product> 
```

**产生了想要的正确结果：**

```
<specifications>some text en us</specifications> 
```

**当对这个 XML 文档应用相同的转换时**：

```
<product>
    <text>
        <languageId>en-us-XXX</languageId>
        <description>some text en us</description>
    </text>
    <text>
        <languageId>en-gb</languageId>
        <description>some text en gb</description>
    </text>
    <text>
        <languageId>en-us</languageId>
    </text>
</product> 
```

**再次产生所需的正确结果：**

```
<specifications xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/> 
```

# asp.net - asp.net 最佳上传方式

> ID：13457612
> 
> 赞同：0
> 
> 时间：2012-11-19T16:05:42.210
> 
> 标签：asp.net

我的表中有以下字段

```
Name        NameId  City 
-----       ------  -------
John Smith  jsmith  Brooklyn 
```

除了让用户能够输入名称 NameId、City 之外，我需要做的是让用户能够上传文件，其中将存储在磁盘上的文件的名称将与NameId 字段。例如，文件的名称将是**jsmith.jpg**。

所以我需要做的是创建一个表单，用户在其中输入名称、NameId、City。我还需要一个文件上传器来上传图像文件。一旦他们提交，我会在 db 表中插入这条记录并将文件保存到 images 文件夹中，其中图像文件的名称将与 nameid 相同。

至于用户使用什么类型的控件来输入名称、名称 ID、城市和上传图片，我正在考虑只创建一个表单，然后为名称、名称 ID、城市和一个文本框控件进行控制。图片上传控件用于图片上传。有没有更好的方法来使用另一个控件，例如 DataView 控件等？

此外，当用户想要编辑记录时 - 姓名、姓名 ID、城市和相关图像 - 最好的方法是什么。我正在考虑在每条记录旁边有一个编辑按钮，然后是一个模式窗口，允许用户编辑信息（例如名称等和图像）。我熟悉 GridView 内联编辑，但不确定用户将如何编辑图像，因为我们没有存储该信息的文件，而只是查看 NameId 以便为其提供相同的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:20:48.693

我想您的要求可以通过以下示例来满足：

[http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/TwoWayBinding.aspx](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/TwoWayBinding.aspx)

这也是一个很好的例子：

[http://blogs.msdn.com/b/robburke/archive/2006/10/05/asp.net-2.0-quick-tip_3a00_-add-a-hyperlink-to-an-image-in-a-gridview-列.aspx](http://blogs.msdn.com/b/robburke/archive/2006/10/05/asp.net-2.0-quick-tip_3a00_-add-a-hyperlink-to-an-image-in-a-gridview-column.aspx)

# ruby - 根据另一个哈希中的值替换哈希值

> ID：13457613
> 
> 赞同：3
> 
> 时间：2012-11-19T16:05:42.583
> 
> 标签：ruby, hash

给定两个散列，我试图将第一个散列中的一个值替换为第二个散列也具有的键。具体来说，我有这两个哈希：

```
data = {
  "study"       => "Lucid Study",
  "name"        => "Lucid Plan",
  "studyWillBe" => "Combination"
}

conditions = { "study" => "((current))" } 
```

我想更新`data`它的`"study"`密钥，因为`conditions`有那个密钥。我想`data`这样结束：

```
data = {
  "study"       => "((current))",
  "name"        => "Lucid Plan",
  "studyWillBe" => "Combination"
} 
```

我做到了这一点：

```
data = Hash[data.map {|k, v| [conditions[k] || k, v] }] 
```

但这并不完全奏效。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:09:42.367

你可以这样做

`data.each {|k, v| data[k] = conditions[k] if conditions[k]}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:16:46.617

它称为[合并](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)。

```
data = {"study"=>"Lucid Study", "name"=>"Lucid Plan", "studyWillBe"=>"Combination"}
conditions = {"study"=>"((current))"}

data.merge(conditions)
#{"study"=>"((current))", "name"=>"Lucid Plan", "studyWillBe"=>"Combination"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:40:03.810

方法 merge 可以占用一个块，您可以在其中进行一些特定操作，而不仅仅是分配新值

```
data.merge(conditions) do |key, oldvalue, newvalue|
  newvalue
end    
=> {"study"=>"((current))", "name"=>"Lucid Plan", "studyWillBe"=>"Combination"} 
```

# datetime - 带有日期时间和其他数据的 Highcharts（工具提示文本）

> ID：13457615
> 
> 赞同：1
> 
> 时间：2012-11-19T16:05:50.790
> 
> 标签：datetime, tooltip, highcharts

我找到了如何使用附加数据添加工具提示的信息。我找到了如何在 x 轴上用日期格式绘制一条线的信息。唯一的问题我需要结合这个。

[将附加数据设置为 highcharts 系列](https://stackoverflow.com/questions/8514457/set-additional-data-to-highcharts-series)

```
data: [ { y : 3, myData : 'firstPoint' },
        { y : 7, myData : 'secondPoint' }, 
```

[http://api.highcharts.com/highcharts#series](http://api.highcharts.com/highcharts#series)

我试过这个：

```
data: [[Date.UTC(2012, 9, 29) , 45, 'my note' ],[Date.UTC(2012, 9, 29) , 54, 'boe' ] 
```

但不幸的是没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:32:34.693

您的自定义数据需要是一个`Object`而不是`array`
您使用的是一个数组

```
data: [[Date.UTC(2012, 9, 29) , 45, 'my note' ],[Date.UTC(2012, 9, 29) , 54, 'boe' ]] 
```

改为使用对象

```
data:[{
 x: Date.UTC(2012, 9, 29) , 
 y: 45, 
 myData: 'my note' 
},
{
 x: Date.UTC(2012, 9, 29) , 
 y: 54, 
 myData: 'boe' 
}] 
```

# c - 在C中打印字符串中的所有字符

> ID：13457616
> 
> 赞同：2
> 
> 时间：2012-11-19T16:05:58.213
> 
> 标签：c

我有一个非常简单的程序来打印字符串中的字符，但由于某种原因它不起作用：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void * print_chars(char *process_string) {
    int i;
    int string_len;

    string_len = strlen(process_string);

    printf("String is %s, and its length is %d", process_string, string_len);

    for(i = 0; i < string_len; i++) {
        printf(process_string[i]);
    }

    printf("\n");
}

int main(void) {
    char *process_string;

    process_string = "This is the parent process.";

    print_chars(process_string);

    return 0;
} 
```

当我在 Netbeans 中运行它时，我得到以下信息：

```
RUN FAILED (exit value 1, total time: 98ms) 
```

如果我删除线

```
printf(process_string[i]); 
```

程序运行但没有任何东西打印到控制台（显然）。

有什么想法我在这里想念的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T16:09:49.210

您需要在行中的格式

```
printf(process_string[i]); 
```

IE

```
printf("%c", process_string[i]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:12:55.443

有几个问题。

一是您没有看到来自`printf("String is %s, and its length is %d", ...)`. 这是因为标准输出默认是行缓冲的，并且您不包括换行符，因此它实际上永远不会确定有一行可以打印。如果您更改格式字符串以添加一个`\n`，您将看到此命令的输出。

第二个是您将 a 传递给`char`的第一个参数`printf()`，它需要 a `char *`。这会导致它崩溃，因为它试图将该字符解释为指针。你想通过类似的东西`printf(process_string)`。但是，将变量字符串直接传递给 ; 的第一个参数通常是个坏主意`printf()`。相反，您应该传递一个包含 的格式字符串`%s`，并将该字符串作为相应的参数传入：`printf("%s\n", process_string)`. 或者，如果您想逐个字符地打印它`printf("%c", process_string[i])`，后跟 a`printf("\n")`以刷新缓冲区并实际查看输出。或者，如果您逐个字符地进行操作，`putchar(process_string[i])`将比`printf()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:10:45.640

`printf()` expects, as first parameter, a *pointer to char*. What you are passing is a *char*, not a pointer to one.

Anyway, `printf()` is not the function to use here. Try `putc()`...

# windows - windows DLL问题

> ID：13457619
> 
> 赞同：2
> 
> 时间：2012-11-19T16:06:02.030
> 
> 标签：windows, vba, dll

我在使用 C DLL 的 Excel VBA 应用程序时遇到问题。DLL 始终存储在电子表格上方的目录中，它的方法是从 VBA 中调用的；

```
#If Win64 Then
   Public Declare PtrSafe Function <function name> Lib "..\<dllname>" () As Long
#else
   Declare Function <function name> Lib "..\<dllname>" () As Long
#end if 
```

您可以将这两个文件及其目录结构包装在一个 zip 文件中，在 Windows 安装（不同版本和 32 位或 64 位）周围移动它，它可以正常工作，除了一台计算机，我们不知道为什么。我们得到的只是程序无法从调用 dll 方法的 VBA 方法中找到位于 ..\ 的 dll 的错误。安装 MFC100.dll 解决了之前的运行时错误 53 问题，这让我们到达了我们现在的位置。

如果您对如何解决这个问题有任何建议，或者对尝试什么有任何想法，我将非常感激，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:54:07.480

如果实际上问题是缺少 DLL 的依赖项之一，VBA 会倾向于抱怨它“找不到”DLL。我怀疑这就是问题所在。尝试（重新）安装[Visual C++ 库](https://www.microsoft.com/en-au/download/details.aspx?id=5555)。[或者，在Dependency Walker](http://www.dependencywalker.com/) （或类似工具）中打开有问题的 DLL以找出它想要的确切内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:41:34.930

在下载依赖项walker 时，下载[ProcMon](http://technet.microsoft.com/en-au/sysinternals/bb896645.aspx)以查看您的 VBA 应用程序在运行时实际查看的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:33:32.383

问题是我们没有安装 64 位版本的 VS C++ 可再发行组件，只有 32 位版本。安装后，一切正常。

# templates - Team Explorer 2012 中的“团队成员”面板在哪里

> ID：13457621
> 
> 赞同：1
> 
> 时间：2012-11-19T16:06:12.257
> 
> 标签：templates, tfs, workspace

我安装了团队资源管理器 2012 和 TFS Power Tools 2012，因为我需要工作区模板功能。但是在启动团队资源管理器并连接到我们的 TFS 2012 后，我找不到可以设置这些工作区模板的“团队成员”菜单。我错过了什么吗？这个菜单在别处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:21:54.093

团队成员中心是[电动工具](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)的一部分。

# iphone - Facebook iOS SDK 注销

> ID：13457625
> 
> 赞同：6
> 
> 时间：2012-11-19T16:06:21.413
> 
> 标签：iphone, objective-c, ios, facebook-ios-sdk

我正在使用官方和更新的[Facebook iOS SDK](https://developers.facebook.com/ios/)。
我们正在使用内部分发配置文件在实体店内使用的 iPad 上开发应用程序。客户可以在 iPad 上登录他们的 Facebook 帐户，该帐户可公开用于改善他们的购物体验。

我遇到的问题是，当用户登录他们的 Facebook 帐户时，下一个用户（客户）仍将使用以前用户的凭据（`You have already authorized xxx, Press "Okay" to continue`）登录。这当然不行。

有没有办法实际注销（注销、清除凭据或其他）前一个（或当前）用户，以便下一个用户可以填写自己的用户名和密码。

不幸的是`[[FBSession activeSession] closeAndClearTokenInformation]`，并没有完全做到这一点。

到目前为止，这是代码的一部分：

```
 // .... 
 [[FBSession activeSession] closeAndClearTokenInformation];
 [FBSession.activeSession openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
      // More code ...

  }];
// ... 
```

PS。[cookie“解决方法”对我不起作用](https://stackoverflow.com/questions/4735905/how-to-implement-logout-functionality-for-facebook-graph-api)（显然）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T21:48:34.760

从您的上下文来看，我假设您的设备没有安装 Facebook 应用程序，您也不希望使用 iOS 6 系统身份验证，这将保留默认登录行为以使用 Safari。如果您要清除 Safari cookie，那应该可以，但为了在您的场景中获得更流畅的体验，您应该使用该`FBSession openWithBehavior:completionHandler:`方法并指定一个行为，`FBSessionLoginBehaviorForcingWebview`以便它使用内联 webview 对话框进行身份验证。

有关示例，请参阅 Facebook iOS SDK 中的 SwitchUserSample，因为该示例演示了一个可以在多个帐户之间切换的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T10:47:25.657

试试这个代码。我想它会对你有所帮助。

```
FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init];
[login logOut]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T11:10:34.680

如果您使用的是 facebook sdk 4.1.0，只需调用以下方法

```
if ([FBSDKAccessToken currentAccessToken]) {
     [FBSDKAccessToken setCurrentAccessToken:nil];
     [FBSDKProfile setCurrentProfile:nil]; 
} 
```

# c# - Linq2Sql：随机双插入错误 - 一个真正的装腔作势

> ID：13457626
> 
> 赞同：1
> 
> 时间：2012-11-19T16:06:26.503
> 
> 标签：c#, linq-to-sql, .net-4.0

好的，所以你认为你是一个*真正的*调试器？试试这个：

我有一个 Linq2Sql 项目，突然我们发现偶尔，看似随机，我们会得到同一行的双插入。

我已经继承`DataContext`和覆盖了`SubmitChanges`. 在里面，我在调用`GetChangeSet()`之前和之后都调用了`base.SubmitChanges()`，并使用文本文件记录器来记录`Inserts`集合中的对象。另外，我保留对插入对象的引用足够长的时间来记录它们的自动编号 ID。

当双插入发生时，我在数据库中看到，不是每行都插入到`MyTableA`and`MyTableB`中，而是每行有两行。SQL Profiler 显示四个插入语句，一个接一个地快速连续：

```
insert into MyTableA(...
insert into MyTableB(...
insert into MyTableA(...
insert into MyTableB(... 
```

我检查了调试日志，集合中只有两个对象`Inserts`：**一个**和**一个**。在调用 之后，变更集是空的（应该是）。并且自动编号 ID 显示新插入行的**较大**值。`MyClassA`**`MyClassB``base.SubmitChanges()`**

 ****另一条有用的信息：在调试模式下单步执行时**永远不会**发生错误；仅当您在没有断点的情况下运行时。这让我怀疑这与执行速度有关。

我们已经使用同一`DataContext`个子类一年多了，而且我们以前从未在我们的产品中看到过这种行为。它只发生在`MyClassA`and`MyClassB`上。

总结一下：

1.  从调试日志来看，一切看起来都正常。
2.  在 SQL Profiler 上，您可以看到正在发生双插入。
3.  这种行为经常发生，但出乎意料，只发生在提到的两个类中，除了在调试模式下单步执行代码时它从不发生。

**编辑 - 新信息：** 在我的`DataContext`子类中，我有以下代码：

```
try {
  base.SubmitChanges(ConflictMode.ContinueOnConflict);
} catch (ChangeConflictException) {
  // Automerge database values for members that client has not modified.
  foreach (ObjectChangeConflict occ in ChangeConflicts) {
    occ.Resolve(RefreshMode.KeepChanges);
  }
}
// Submit succeeds on second try.
base.SubmitChanges(ConflictMode.FailOnFirstConflict); 
```

`MyTableA`并且`MyTableB`两者都有一个强制性的外键`OtherTableID`引用`OtherTable`。双重插入发生在`ChangeConflictException`公共父表更新期间发生的情况下`OtherTable`。

我们闻到气味了，现在...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:17:39.977

当我之前遇到过这样的问题时，通常是由于多个线程同时执行相同的代码。

您是否尝试过使用**lock{}**命令来确保插入仅由单个线程使用？ [MSDN 锁](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:09:26.983

看起来这是Linq2Sql中的一个**BUG ！**这是一个可重复的实验：

```
using (var db1 = new MyDataContext()) {
  var obj1 = db1.MyObjects.Single(x => x.ID == 1);
  obj1.Field1 = 123;
  obj1.RelatedThingies.Add(new RelatedThingy {
                           Field1 = 456,
                           Field2 = "def",
                           });
  using (var db2 = new MyDataContext()) {
    var obj2 = db2.MyObjects.Single(x => x.ID == 1);
    obj2.Field2 = "abc";
    db2.SubmitChanges();
  }
  try {
    db1.SubmitChanges(ConflictMode.ContinueOnConflict);
  } catch (ChangeConflictException) {
    foreach (ObjectChangeConflict occ in ChangeConflicts) {
      occ.Resolve(RefreshMode.KeepChanges);
    }
  }
  base.SubmitChanges(ConflictMode.FailOnFirstConflict);
} 
```

结果：`MyObject`ID = 1 的记录得到更新，Field1 值为 123，Field2 值为“abc”。并且有**两条**新的相同记录插入到 RelatedThingy，MyObjectID = 1、Field1 = 456 和 Field2 = "def"。

解释一下**！**

**更新：**在 Microsoft Connect 上登录后，MS 的好人要求我整理一个小演示项目，突出显示该错误。你不知道吗 - 我无法复制它。它似乎与我项目的一些奇怪的特质有关。没有时间进一步调查，我找到了一个解决方法，无论如何......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T17:18:28.787

FWIW，我们最近发现我们的重试逻辑存在这个问题`SubmitChanges`。我们正在做一个`InsertAllOnSubmit`. 当 a`ChangeConflictException`发生时，我们会`Resolve(RefreshMode.KeepChanges,true)`在 each 上使用 a 重试`ObjectChangeConflict`。

我们以不同的方式重新完成工作（重试逻辑以重新执行整个事务），这似乎解决了问题。****

# php - 仅从链接中获取文本

> ID：13457631
> 
> 赞同：0
> 
> 时间：2012-11-19T16:06:46.810
> 
> 标签：php, explode

我有这个方法：

```
$message->from_address 
```

在浏览器上显示时，显示为

```
<a href="some text">asdasd</a> 
```

我只需要文本`asdasd`。我将如何将其分开，以便将 `<a href="some text">`and`</a>`部分分开。

我想要这样，因为为了存储在一个变量中以便以后重用。我尝试通过将其`>`作为分隔符来分解它，但它只显示全文。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:08:46.687

```
<?php

$str = '<a href="some text">asdasd</a>';

echo strip_tags($str); 
```

# c# - AjaxUploadControl 不会触发 onuploadcomplete 方法

> ID：13457639
> 
> 赞同：2
> 
> 时间：2012-11-19T16:07:09.110
> 
> 标签：c#, asp.net, ajax, file-upload, ajaxcontroltoolkit

我正在尝试在我的网站上实现 AjaxUploadControl 功能，但它不会触发 OnUploadComplete 方法。相反，它只是说文件已上传 100%，但文件不在指定的文件夹中。我在 OnUploadComplete 方法中设置了断点，并且能够确定永远不会到达此方法。当“取消”按钮显示时，它似乎跳入了无限循环，但一旦尝试上传文件，屏幕上的任何按钮都不可点击。

.aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="AjaxTest.aspx.cs" Inherits="AjaxTest" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </ajaxToolkit:ToolkitScriptManager>
    <div>
            <ajaxToolkit:AjaxFileUpload ID="ajaxUpload1" runat="server" OnUploadComplete="ajaxUpload1_OnUploadComplete" />
    </div>
    </form>
</body>
</html> 
```

代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class AjaxTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void ajaxUpload1_OnUploadComplete(object sender,   AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        string filePath = "~/SiteImages/" + e.FileName;
        ajaxUpload1.SaveAs(MapPath(filePath));
    }
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:15:14.757

属性是`OnClientUploadComplete`，不是`OnUploadComplete`。

参考[这个](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)。

> 活动
> 
> UploadedComplete - 文件上传成功时在服务器上引发。在这种情况下，AjaxFileUploadEventArgs 的一个实例被传递到包含文件名、大小和内容类型的参数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:15:26.963

~~如果您没有设置正确的 enctype 和方法 UploadedComplete 将永远不会触发。~~ ~~尝试将**enctype="multipart/form-data"**添加到您的表单标签中。~~ ![在此处输入图像描述](../Images/71af51e3b2a09bac98de518cca2c5870.png) **例如**

~~`<form id="form1" runat="server" enctype="multipart/form-data" method="post">`~~

**后面的代码：**

```
protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    string filePath = "~/SiteImages/";
    AjaxFileUpload1.SaveAs(MapPath(filePath + System.IO.Path.GetFileName(e.FileName)));
} 
```

**内联代码：**

```
<form id="form1" runat="server" enctype="multipart/form-data" method="post">
      <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server" 
            onuploadcomplete="AjaxFileUpload1_UploadComplete" />   
    </div>
    </form> 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T15:45:11.543

您遇到的实际问题是您的 web.config 中需要一个 HTTP 处理程序

```
<httpHandlers>
    <add verb="*" path="AjaxFileUploadHandler.axd"
      type="AjaxControlToolkit.AjaxFileUploadHandler, 
      AjaxControlToolkit"/>
</httpHandlers> 
```

我遇到了同样的问题（上传时出现红色错误，.cs 文件中的事件根本没有触发），现在通过将其添加到我的 web.config 来解决

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T22:19:54.813

我发现了我遇到的问题。我试图在网站而不是网络应用程序中实现该功能。我创建了一个测试网络应用程序平台，它运行完美。我是 AJAX 的初学者，并没有意识到这会导致问题，但是，有没有人知道让这个功能在网站上工作的解决方案。恐怕此时有太多内容无法轻松移植到 Web 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-20T08:06:01.830

请遵循以下规则 (.NET 4.0) 或 (.NET 4.5 框架) 确保在您的项目中使用了以下步骤

1.  HTML 页面（必须是这样的）

    ```
    <body>
    <form id="form1" runat="server" enctype="multipart/form-data" method="post">
    <div>
        <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></ajaxToolkit:ToolkitScriptManager>
        <ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload1" runat="server" OnUploadComplete="AjaxFileUpload1_UploadComplete" ClientIDMode="Static" ContextKeys="dd" MaximumNumberOfFiles="4" />
    </div>
    </form> 
    ```

2.  重要的 WEB.Config 应该是（具有以下**.net 4.5 的**标签）

    `<system.webServer> <handlers> <add name="aa" verb="*" path="AjaxFileUploadHandler.axd" type="AjaxControlToolkit.AjaxFileUploadHandler, AjaxControlToolkit" /> </handlers> </system.webServer>`

3.  重要的 WEB.Config 应该是（具有**小于 4 或 4.5**的以下标签）

`<httpHandlers> <add verb="*" path="AjaxFileUploadHandler.axd" type="AjaxControlToolkit.AjaxFileUploadHandler, AjaxControlToolkit"/> </httpHandlers>`

# eclipse - 使用 Drip 和逆时针（Eclipse 中的 Clojure）

> ID：13457645
> 
> 赞同：2
> 
> 时间：2012-11-19T16:07:18.307
> 
> 标签：eclipse, clojure, counterclockwise

是否可以将[Drip](https://github.com/flatland/drip) for [Clojure](https://github.com/flatland/drip/wiki/Clojure)与 Eclipse/ [CounterClockwise](http://code.google.com/p/counterclockwise/)一起使用，假设可以，您将如何设置它？

# php - 为什么多对多关系是空的？

> ID：13457652
> 
> 赞同：2
> 
> 时间：2012-11-19T16:07:30.757
> 
> 标签：php, mysql, doctrine-orm, many-to-many, symfony-2.1

我正在使用 Doctrine 2 在 Symfony 2.1.3 上构建一个带有用户身份验证部分的网站。每个用户都可以是“用户组”的成员，每个用户组可以包含许多用户。

所以这是一个多对多的关系。

我按照安全教程对我的用户进行身份验证，并且效果很好。 [http://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html)

密码被编码；数据库关系工作正常。

我有一个服务，它处理“LoginSuccess”事件，并将用户添加到会话中。我认为它工作正常，因为我在我的父前端控制器中找到了我的用户属性。

```
public function onAuthenticationSuccess(Request $request, TokenInterface $token)
{
    $session = $request->getSession();

    $session->set('_user', $token->getUser());

    if ($session->has('referer')) {
        if (($session->get('referer') !== null) && ($session->get('referer') !== '')) {
            $response = new RedirectResponse($session->get('referer'));
        } else {
            $response = new RedirectResponse($request->getBaseUrl() . '/');
        }
    } else {
        // if no referer then go to homepage
        $response = new RedirectResponse($request->getBaseUrl() . '/');
    }

    return $response;
} 
```

但是现在，我想获取经过身份验证的当前用户的组，它给了我一个空数组......

```
// Somewhere in a controller action.
$session = $this->getRequest()->getSession();
$current_user = $session->get('_user');
echo '<pre>';
exit(var_dump($current_user));
object(Me\MyProject\CoreBundle\Entity\User)#38 (16) {
    [...]
    ["groups":"Me\MyProject\CoreBundle\Entity\User":private] => object(Doctrine\ORM\PersistentCollection)#34 (9) {
        ["snapshot":"Doctrine\ORM\PersistentCollection":private] => array(0) {

        }
        ["owner":"Doctrine\ORM\PersistentCollection":private] => NULL
        ["association":"Doctrine\ORM\PersistentCollection":private] => NULL
        ["em":"Doctrine\ORM\PersistentCollection":private] => NULL
        ["backRefFieldName":"Doctrine\ORM\PersistentCollection":private] => NULL
        ["typeClass":"Doctrine\ORM\PersistentCollection":private] => NULL
        ["isDirty":"Doctrine\ORM\PersistentCollection":private] => bool(false)
        ["initialized":"Doctrine\ORM\PersistentCollection":private] => bool(false)
        ["coll":"Doctrine\ORM\PersistentCollection":private] => object(Doctrine\Common\Collections\ArrayCollection)#33 (1) {
            ["_elements":"Doctrine\Common\Collections\ArrayCollection":private] => array(0) {

            }
        }
    }
} 
```

我希望用户根据他的组访问一些功能......所以不让这些组对我来说真的很糟糕。任何想法 ？

我的 yml 模型配置文件：

```
Me\MyProject\CoreBundle\Entity\User:
type: entity
repositoryClass: FSB\Intranet\CoreBundle\Repository\UserRepository
table: users
fields:
    id:
        id: true
        type: integer
        unsigned: false
        nullable: false
        generator:
            strategy: IDENTITY
[...]
manyToMany:
    groups:
        targetEntity: Usergroup
        inversedBy: users
        joinTable:
            name: usergroups_for_user
            joinColumns:
                user_id:
                    referencedColumnName: id
            inverseJoinColumns:
                usergroup_id:
                    referencedColumnName: id
lifecycleCallbacks: {  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:21:38.607

Doctrine 仅在您调用函数 getGroups 时加载 ArrayCollection _elements，因为默认情况下，EAGER 模式处于非活动状态。getGroups() 函数的结果是什么？

模式 EAGER (Example : `@ManyToOne(targetEntity="\My\Model\User\User", fetch="EAGER")`) 强制教条 2 加载所有数据。

# c++ - C++11 iterator interface

> ID：13457653
> 
> 赞同：1
> 
> 时间：2012-11-19T16:07:32.663
> 
> 标签：c++, generics, c++11, iterator

Is it possible to create in `C++11` a function, which will accept any `iterator` as input argument in particular stl containers like `vector` or `list`?

I want to write something like

```
void f(iterator<int> i){
   for (auto el : i)
      cout << el;
}
int main(){
   vector<int> v;
   list<int> l;
   ...
   f(v);
   f(l);
} 
```

Is it possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:17:48.093

If you want your function to accept an iterator, then you cannot use the `for (auto i: cont)` syntax. Indeed, this new range-based for syntax wants the container, not an iterator.

Then, your can easily make your function a function template, passing the container.

```
template <class CONT>
void f(CONT &cont){
    for (auto el : cont)
        cout << el;
} 
```

If you want to keep passing iterators, then you'll have to go the template way too, but you have to pass two iterators as arguments. One for the first, another for the last (just like the `algorithm` does).

```
template <class IT>
void f(IT first, IT last) {
    for ( ; first!=last ; ++first)
        cout << first;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:09:57.873

No. You can write a function template that accepts any iterator as parameter, but not a function.

If you had a class that did type erasure for iterators then you could take that as a parameter. Here's [an article and code for iterator type erasure](http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/any_iterator.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:09:52.597

There is a boost::any_iterator somewhere. But the Standard does not provide one.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T18:22:04.010

If you are looking for a way to *return* a mostly unspecified iterator type (e.g. because the function signature in a base class can't fix the exact type of the iterator yet), you could have a look at [C++: "Iterable<T>" interface](https://stackoverflow.com/q/67335987/3907364)

# groovy - 在groovy中评估闭包内的字符串

> ID：13457657
> 
> 赞同：0
> 
> 时间：2012-11-19T16:07:46.597
> 
> 标签：groovy, closures, eval

```
sql.eachRow( query ) { columns ->
    println columns.firstname      //executes well
    Eval.me( "columns.firstname" ) //No such property: columns
} 
```

如何评估包含闭包变量的字符串`columns`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:12:43.663

您可以使用[3 参数](http://groovy.codehaus.org/api/groovy/util/Eval.html#me%28java.lang.String,%20java.lang.Object,%20java.lang.String%29)形式`Eval.me`：

```
Eval.me( 'columns', columns, 'columns.firstname' ) 
```

# jsf-2 - ViewExpiredException - 为什么不同的行为？

> ID：13457666
> 
> 赞同：1
> 
> 时间：2012-11-19T16:08:24.090
> 
> 标签：jsf-2, viewexpiredexception

我有一个 JSF 2 应用程序并配置了以下内容`web.xml`：

```
<error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/error.html</location>
</error-page> 
```

`@SessionScoped`出于测试目的，我在一个带有注释的 init 方法中的类中有以下代码，`@PostConstruct`以便让会话快速过期：

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
HttpSession session = (HttpSession) ec.getSession(false);
session.setMaxInactiveInterval(5); 
```

现在，当我有一个`h:commandButton`with`outcome = "somepage.jsf"`然后在 5s 之后单击将重定向到错误页面。

当我改为调用一些 bean 操作或使用属性将页面名称放在同一个按钮上时`action`，我会`ViewExpiredException`在服务器日志中看到 ，但不会发生重定向。

为什么呢？以及在会话过期后发生的任何操作，通常如何重定向到另一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:46:08.670

行为不同，因为发送了异步 (ajax) 请求。Ajax 请求需要特殊的 XML 响应。ajax 请求的异常需要由`jsf.ajax.addOnError`JavaScript 中的处理程序或自定义的[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html).

默认情况下，他们在客户端没有单一形式的有用反馈。只有在项目阶段设置为的 Mojarra 中，`Development`您才会看到带有异常消息的纯 JavaScript 警报消息。但就是这样。阶段没有单一形式的反馈`Production`。

使用自定义`ExceptionHandler`，您将能够模拟与同步请求中完全相同的反馈形式。您可以解析`web.xml`以找到正确的错误页面位置，`UIViewRoot`围绕它创建一个新的并强制 JSF 将 ajax 渲染设置为`@all`. 因为这毕竟是相当多的工作，所以 JSF 实用程序库[OmniFaces](http://omnifaces.org)以[`FullAjaxExceptionHandler`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.html). [您可以在此处](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)找到展示页面。

# sharepoint-2010 - 使用区域设置控制 SharePoint 2010 中的法语加拿大人？

> ID：13457668
> 
> 赞同：2
> 
> 时间：2012-11-19T16:08:31.630
> 
> 标签：sharepoint-2010, localization, culture, regional-settings

是否可以覆盖 a`Literal`或`Localize`控件确定应使用哪种语言进行本地化的方式？

我们目前需要在源自同一基础的两种不同 SharePoint 变体中支持 fr-FR 和 fr-CA。遗憾的是，没有适用于 MOSS2010 的 fr-CA 语言包，因此我们无法在变体设置中设置此语言。我们正在考虑从区域设置中获得正确的文化（`CurrentCulture`），但目前我不知道这是否可行，也不知道如何实现。

请记住：我们需要将此处理限制为我们各自 Web 部件中的控件，因此设置当前页面的文化不是解决方案。

提前问候和感谢，鲍里斯

# jquery - 隐藏超过外部 div 高度的内部 div

> ID：13457675
> 
> 赞同：1
> 
> 时间：2012-11-19T16:09:01.343
> 
> 标签：jquery, css

![插图](../Images/8b209c2f452a07331b91f5b13b0f7395.png)

应该隐藏整个元素。外部 div 上不应该有滚动条。这可以仅通过 CSS 实现还是需要 jQuery？如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:16:21.017

总体思路如下：

```
$("div div").filter(function() {
    var $this = $(this),
        pTop = $this.parent().offset().top,    // parent position
                                               // (no need if parent has
                                               //  "position: relative")

        pHeight = $this.parent().height(),     // parent inner height

        eTop = $this.offset().top,             // block position
                                               // (can be replaced with
                                               //  "$this.position().top"
                                               //  if parent has
                                               //  "position: relative")

        eHeight = $this.outerHeight(true);     // block outer height

    return (eTop + eHeight) > (pTop + pHeight);
}).hide(); 
```

（理论上这*应该*有效。）

* * *

另一种方法：

```
var sumHeight = 0;
$("div div").filter(function() {
    var $this = $(this),
        pHeight = $this.parent().height();      // parent inner height

    sumHeight += $this.outerHeight(true);       // + block outer height

    return sumHeight > pHeight;
}).hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:16:51.233

这根本没有经过测试，很可能需要进行调整，但是为了让您大致了解如何使用 jQuery 来做到这一点：

```
var container = $('#container');
var element = $('#element');

if ((element.position().top + element.position.height()) > container.height()) {
    element.hide();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:09:59.233

将`overflow:hidden;`属性添加到外部 div。

# android - android从xml文件中删除前缀命名空间

> ID：13457677
> 
> 赞同：1
> 
> 时间：2012-11-19T16:09:02.157
> 
> 标签：android, xml, namespaces

我正在 android 中解析 xml，我想删除所有元素上的命名空间前缀。例如在下面的 xml 中，我想删除前缀“ns4”

```
<ns4:profiles >
    <ns4:list-users>
        <ns4:user>

        </ns4:user>
        <ns4:user>

        </ns4:user>
    </ns4:list-users>
</ns4:profiles> 
```

如何删除前缀？

# html - 带有非拉丁字符显示名称的 Mailto 链接在 Chrome 浏览器中无法正常工作

> ID：13457679
> 
> 赞同：2
> 
> 时间：2012-11-19T16:09:12.310
> 
> 标签：html, email, google-chrome, encoding, mailto

我在 Chrome 浏览器中遇到以下问题：当我有一个带有非拉丁字符显示名称和电子邮件地址的 mailto 链接时，右键->复制电子邮件地址->粘贴到任何地方都无法正常工作。显示名称已损坏/带有转义字符/。

例如：

`<a href="mailto:нова категория <7580397996@gmail.com>?Subject=[Enter your subject title here]&body=[Enter your content email here]">нова категория</a>`

如果您在 Chrome 中尝试此操作，复制电子邮件地址将无法正常工作。有谁知道我该如何解决这个问题，或者这个问题是 Chrome 中的错误？

请提前帮助和感谢。

# javascript - 如何防止mailto事件在浏览器中打开新标签

> ID：13457684
> 
> 赞同：32
> 
> 时间：2012-11-19T16:09:33.107
> 
> 标签：javascript, mailto

我正在使用`mailto:`填充的 JavaScript 在整个 Web 应用程序中发送信息，但每次用户按下*发送*按钮时，它都会在打开邮件应用程序（Outlook、Gmail 等）之前在浏览器中打开一个新选项卡。

有什么办法可以防止空白标签打开？

* * *

编辑：以下所有主要浏览器都会遇到此问题：Internet Explorer、Firefox 和 Google Chrome。

我`window.open()`用来发送电子邮件，是否有任何已知的替代方案？

这是我发送电子邮件的方式：

```
var mailto_link = 'mailto:'+email+'?subject='+subject+'&body='+body_message;
var win = window.open(mailto_link,'emailWindow'); 
```

我不想使用`window.location.href`，因为我在用户发送电子邮件后显示一条消息。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T16:26:14.547

感谢您的编辑。确实有另一种选择：

```
window.location.href = "mailto:mail@domain.tld";
alert("Thank you!"); 
```

> 我不想使用 window.location.href 因为我在用户发送电子邮件后显示一条消息。

我没有真正得到这个。`mailto:`使用时您不会离开网站`window.location.href`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-22T15:29:57.913

AmShaegar的*window.location.href*解决方案效果很好，但它在我一直在开发的复杂应用程序中造成了副作用。

我终于想出了这个可能会感兴趣的解决方案：

```
$('<iframe src="mailto:mail@domain.tld">').appendTo('body').css("display", "none"); 
```

看到这个 plunker：[http ://plnkr.co/edit/J0LvQU?p=preview](http://plnkr.co/edit/J0LvQU?p=preview)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T16:21:32.540

空白选项卡由 打开`window.open()`。你不需要那个。

mailto 链接的语法应该类似于

```
<a href="mailto:your@email.address?subject=Comments about the color blue">Contact Us</a> 
```

有关详细信息，请参阅[http://www.addressmunger.com/mailto_syntax_tutorial/ 。](http://www.addressmunger.com/mailto_syntax_tutorial/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-03T22:38:27.853

稍等片刻后关闭窗口：

```
var mailto_link = 'mailto:'+email+'?subject='+subject+'&body='+body_message;
var win = window.open(mailto_link,'emailWindow');
setTimeout(function() { win.close() }, 500); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-01T15:16:20.747

尝试命名窗口 (myWindow) 并添加 close() 命令：

```
<script>
    myWindow=window.open("mailto:emailaddress@example.com");
    myWindow.close();
</script>'; 
```

这应该会关闭额外的浏览器窗口并保持电子邮件应用程序打开。至少它对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T16:15:23.273

不，这完全取决于您的浏览器如何处理新标签。我花了几个小时寻找解决方法，解决方案，任何东西......

firefox：选项 -> 选项卡

safari: 偏好 -> 选项卡

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-23T16:04:49.397

作为记录：

使用 target 属性创建一个锚标记，如下所示：

```
<div>
    <a target="_self" href="mailto:mail1@domain1.com;%20mail2@domain2.com?subject=Mail%20sending&body=etc...">
        Send Mail
    </a>
</div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-24T06:31:58.083

```
<a className="prom-links-anchor" tabIndex="0" aria-label="Email" href={ "mailto:" + eid + "@yahoo.com"}   
   role="link" nocm="true" title={ "Email"} rel="email" data-cs={contentSource} data={resultPosition + 1} 
   onMouseDown={this.handleMouseDown.bind(this)} onKeyDown={this.handleKeyPressEvent.bind(this)} 
   onContextMenu={e=> e.preventDefault()}
  >
  <div className="icon-email" title="Email" href={"mailto:" + eid + "@yahoo.com"} rel="email" 
       data-cs={contentSource} data={resultPosition + 1} />
  <div className="icon-label-email" aria-hidden="true" href={"mailto:" + eid + "@yahoo.com"} 
       title={"Email"} rel="hc-email" data-cs={contentSource} data={resultPosition + 1}
    >Email</div>
</a> 
```

# php - PHP：在输出中查找具有相对路径的图像和链接并将它们转换为绝对路径

> ID：13457693
> 
> 赞同：9
> 
> 时间：2012-11-19T16:09:46.813
> 
> 标签：php, image, relative-path, src, absolute-path

有很多关于在 PHP 中将相对路径转换为绝对路径的帖子。我正在寻找这些帖子之外的特定实现（希望如此）。有人可以帮我完成这个具体的实现吗？

我有一个包含各种 HTML 的 PHP 变量，包括`href`s 和`img`s 包含相对 url。大多数（例如）`/en/discover`或`/img/icons/facebook.png`

我想以这样的方式处理这个 PHP 变量，我`href`的 s 和`img`s 的值将被转换`http://mydomain.com/en/discover`为`http://mydomain.com/img/icons/facebook.png`

我相信下面的问题涵盖了`href`s 的解决方案。我们如何将其扩展为也考虑`img`s？

*   [将相对 URL 更改为绝对 URL](https://stackoverflow.com/questions/3342785/change-a-relative-url-to-absolute-url)

正则表达式是否有序？或者既然我们要处理大量的输出，我们应该使用 DOMDocument 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T14:04:02.967

经过一些进一步的研究，我偶然发现了 Gerd Riesselmann 的这篇关于如何解决`base href`RSS 提要解决方案缺失的文章。**他的片段实际上解决了我的问题！**

[http://www.gerd-riesselmann.net/archives/2005/11/rss-doesnt-know-a-base-url](http://www.gerd-riesselmann.net/archives/2005/11/rss-doesnt-know-a-base-url)

```
<?php
function relToAbs($text, $base)
{
  if (empty($base))
    return $text;
  // base url needs trailing /
  if (substr($base, -1, 1) != "/")
    $base .= "/";
  // Replace links
  $pattern = "/<a([^>]*) " .
             "href=\"[^http|ftp|https|mailto]([^\"]*)\"/";
  $replace = "<a\${1} href=\"" . $base . "\${2}\"";
  $text = preg_replace($pattern, $replace, $text);
  // Replace images
  $pattern = "/<img([^>]*) " . 
             "src=\"[^http|ftp|https]([^\"]*)\"/";
  $replace = "<img\${1} src=\"" . $base . "\${2}\"";
  $text = preg_replace($pattern, $replace, $text);
  // Done
  return $text;
}
?> 
```

谢谢格德！并感谢 shadyyx 为我指明方向`base href`！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-22T20:53:37.163

优秀的解决方案。但是，模式中有一个小错字。如上所述，它会截断 href 或 src 的第一个字符。以下是按预期工作的模式：

```
// Replace links
$pattern = "/<a([^>]*) " .
         "href=\"([^http|ftp|https|mailto][^\"]*)\"/"; 
```

和

```
// Replace images
$pattern = "/<img([^>]*) " . 
         "src=\"([^http|ftp|https][^\"]*)\"/"; 
```

第二个替换引用的左括号被移动。这会将不匹配 http|ftp|https 的 href 或 src 的第一个字符带入替换引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-29T06:49:34.737

我发现当 href src 和 base url 开始变得更加复杂时，接受的答案解决方案对我不起作用。

例如：

基本网址：

```
http://www.journalofadvertisingresearch.com/ArticleCenter/default.asp?ID=86411&Type=Article
```

参考资料来源：

```
/ArticleCenter/LeftMenu.asp?Type=文章&FN=&ID=86411&Vol=&No=&Year=&Any=
```

错误返回：

```
/ArticleCenter/LeftMenu.asp?Type=文章&FN=&ID=86411&Vol=&No=&Year=&Any=
```

我发现下面的函数正确返回了 url。我从这里的评论中得到了这个：来自 Isaac Z. Schlueter的[http://php.net/manual/en/function.realpath.php 。](http://php.net/manual/en/function.realpath.php)

这正确返回：

```
http://www.journalofadvertisingresearch.com/ArticleCenter/LeftMenu.asp?Type=Article&FN=&ID=86411&Vol=&No=&Year=&Any=
```

```
function resolve_href ($base, $href) { 

// href="" ==> current url. 
if (!$href) { 
    return $base; 
} 

// href="http://..." ==> href isn't relative 
$rel_parsed = parse_url($href); 
if (array_key_exists('scheme', $rel_parsed)) { 
    return $href; 
} 

// add an extra character so that, if it ends in a /, we don't lose the last piece. 
$base_parsed = parse_url("$base "); 
// if it's just server.com and no path, then put a / there. 
if (!array_key_exists('path', $base_parsed)) { 
    $base_parsed = parse_url("$base/ "); 
} 

// href="/ ==> throw away current path. 
if ($href{0} === "/") { 
    $path = $href; 
} else { 
    $path = dirname($base_parsed['path']) . "/$href"; 
} 

// bla/./bloo ==> bla/bloo 
$path = preg_replace('~/\./~', '/', $path); 

// resolve /../ 
// loop through all the parts, popping whenever there's a .., pushing otherwise. 
    $parts = array(); 
    foreach ( 
        explode('/', preg_replace('~/+~', '/', $path)) as $part 
    ) if ($part === "..") { 
        array_pop($parts); 
    } elseif ($part!="") { 
        $parts[] = $part; 
    } 

return ( 
    (array_key_exists('scheme', $base_parsed)) ? 
        $base_parsed['scheme'] . '://' . $base_parsed['host'] : "" 
) . "/" . implode("/", $parts); 
} 
```

# php - 用类内的函数初始化类变量

> ID：13457703
> 
> 赞同：0
> 
> 时间：2012-11-19T16:09:58.130
> 
> 标签：php, class

我有这样的课：

```
class Example{
    private $a;
    private $b;

    function Example($user){
        $this->a = $user;
        $this->b = getsting();    //here is my problem
    }

    function getstring(){
        return "string".$this->a; //here I have a class variable
    }
} 
```

如何返回值`$b`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:12:02.607

```
class Example
{
  private $a;
  private $b;

  function Example($user)
  {
    $this->userid=$user;
    $this->b=$this->getstring();    //use $this-> before the method name
  }

  function getstring()
  {
    return "string";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:12:52.230

在类内部，你需要使用`$this->`来引用其他函数。

```
$this->b = $this->getstring(); 
```

PS 是`getstring`，不是`getsting`。

# android - Blurry SVG images in chrome for Android

> ID：13457707
> 
> 赞同：22
> 
> 时间：2012-11-19T16:10:09.153
> 
> 标签：android, css, google-chrome, svg

* * *

To escape the hell of different pixel densities in mobile phones, I use SVG-files as background images in my css.

Chrome for android seems to render inline-svg just fine, but fails if the svg

*   is used in css with `background-image` and a normal url
*   is used in css with `background-image` and a data uri
*   is used with an `image` element

The stock browser of android 4 works just fine. (and all other mobile phones I tried, too)

You can visit [this fiddle](http://jsfiddle.net/rc8Hh/1/) and check it out. Zoom in to see the difference.

Anyone knows why chrome uses some pre-rendered bitmaps here?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T06:46:08.383

正如其他答案在这个问题和其他类似问题中指出的那样，SVG 的渲染在 chrome 和本机 android 网络浏览器中存在问题。这是一个已知的 chrome / native 浏览器问题。

在看了几天的许多解决方案之后，我偶然发现了这个解决方法。诀窍是在 SVG 文件中嵌入文本，这可以是单个透明字符。

例如，将这个（或类似的）添加到您的 SVG 文件中。

```
<text transform="matrix(1 0 0 1 7.1079 13.5215)" opacity="0" font-family="'MyriadPro-Regular'" font-size="12">a</text> 
```

在不调查实际的 chrome 源或进程的情况下，我只能假设通过嵌入文本，它会强制 SVG 在放大时针对高 dpi 设备进行重新渲染。

无论背景图像元素如何使用、旋转、固定位置等，这个解决方案（在我已经能够在 Android/Chrome 上测试的浏览器上）都可以工作。甚至在缩放下似乎很清晰。

享受！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T15:54:01.647

这是一个已知问题[https://code.google.com/p/chromium/issues/detail?id=161982](https://code.google.com/p/chromium/issues/detail?id=161982)

当 SVG 被渲染为图像（或背景图像）时，它最初被渲染为 CSS 像素密度，使其在 1 CSS 像素！= 1 设备像素的设备上变得模糊，其中包括大多数高端 Android 手机。

该问题已在 Chrome 25（撰写本文时的当前版本）中修复，但是当您放大视口时，图像再次变得模糊。

此问题已在 Chrome 26（当前为 Chrome Beta，可在 Play 商店中获得）中修复，SVG 图像和背景仍然清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-15T16:49:35.837

对我来说，我花了很长时间才发现的解决方案是我的元素 css：

```
border-radius: 4px; 
```

这解决了我的问题，但是我无法在我一直在工作的网站上重新创建它，但这是我试图在移动设备上重新创建问题的小提琴：

[http://jsfiddle.net/rc8Hh/31/](http://jsfiddle.net/rc8Hh/31/)

祝你好运，我的建议是检查是否存在可能影响元素绘制的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:30:55.263

如果您要插入 SVG 文件，该文件将（取决于主机，例如 Wikipedia）预渲染。因此，在加载时，图像将呈现给定的大小。内联 SVG（直接编码到页面）将在页面重新调整大小时重新调整大小。但是，我不确定移动浏览器，因为它们不会调整页面中元素的大小，它们只是“缩放”

所以基本上你正在做的是将 SVG 绘制到画布上（双关语！）然后缩放画布。内联有直接的 SVG ......所以更好......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-27T16:21:18.740

就我而言，我发现罪魁祸首是过滤器属性

```
<g filter="url(#filter0_d)"> 
```

通过删除 filter 属性，SVG 被渲染为矢量而不是位图。

```
<g> 
```

为了更好地衡量，我也删除了`<filter>`标签

```
<filter id="filter0_d" x="-261" y="50" width="1490" height="950" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
<feOffset/>
<feGaussianBlur stdDeviation="12.5"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
</filter> 
```

# html - 在 HTML 中的表格单元格内添加图像

> ID：13457710
> 
> 赞同：42
> 
> 时间：2012-11-19T16:10:17.237
> 
> 标签：html

我很抱歉，但我无法做这个简单的事情。我无法在表格单元格中添加图像。以下是我编写的代码：-

```
 <html>
   <head>CAR APPLICATION</head>
   <body>

    <table border = 5 bordercolor = red align = center>
    <th colspan = 14>ABCD</th>
    <tr>
        <th colspan = 4>Name</th>
        <th colspan = 4>Origin</th>
        <th colspan = 4>Photo</th>
    </tr>
    <tr>
        <td colspan = 4>Bugatti Veyron Super Sport</th>
        <td colspan = 4>Molsheim, Alsace, France</th>
        <td colspan = 4><img src="C:\Pics\H.gif" alt="" border=3 height=100 width=100></img></td>
    </tr>
    <tr>
        <td colspan = 4>SSC Ultimate Aero TT  TopSpeed</td>
        <td colspan = 4>United States</td>
        <td colspan = 4 border=3 height=100 width=100>Photo1</td>
    </tr>
    <tr>
        <td colspan = 4>Koenigsegg CCX</td>
        <td colspan = 4>Ängelholm, Sweden</td>
        <td colspan = 4 border=4 height=100 width=300>Photo1</td>
    </tr>
    <tr>
        <td colspan = 4>Saleen S7</td>
        <td colspan = 4>Irvine, California, United States</td>
        <td colspan = 4 border=3 height=100 width=100>Photo1</td>
    </tr>
    <tr>
        <td colspan = 4> McLaren F1</td>
        <td colspan = 4>Surrey, England</td>
        <td colspan = 4 border=3 height=100 width=100>Photo1</td>
    </tr>
    <tr>
        <td colspan = 4>Ferrari Enzo</td>
        <td colspan = 4>Maranello, Italy</td>
        <td colspan = 4 border=3 height=100 width=100>Photo1</td>
    </tr>
    <tr>
        <td colspan = 4> Pagani Zonda F Clubsport</td>
        <td colspan = 4>Modena, Italy</td>
        <td colspan = 4 border=3 height=100 width=100>Photo1</td>
    </tr>
</table>
 </body>
<html> 
```

我做错了什么？这是我的输出屏幕：-

![在此处输入图像描述](../Images/94fd6783efe8510c561f23a184d5b8ff.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T08:18:40.013

这对我有用：-

```
 <!DOCTYPE html> 
  <html>
  <head>
<title>CAR APPLICATION</title>
 </head>
 <body>
<center>
    <h1>CAR APPLICATION</h1>
</center>

<table border="5" bordercolor="red" align="center">
    <tr>
        <th colspan="3">ABCD</th> 
    </tr>
    <tr>
        <th>Name</th>
        <th>Origin</th>
        <th>Photo</th>
    </tr>
    <tr>
        <td>Bugatti Veyron Super Sport</th>
        <td>Molsheim, Alsace, France</th>
                <!-- considering it is on the same folder that .html file -->
        <td><img src=".\A.jpeg" alt="" border=3 height=100 width=300></img></th>
    </tr>
    <tr>
        <td>SSC Ultimate Aero TT  TopSpeed</th>
        <td>United States</th>
        <td border=3 height=100 width=100>Photo1</th>
    </tr>
    <tr>
        <td>Koenigsegg CCX</th>
        <td>Ängelholm, Sweden</th>
        <td border=4 height=100 width=300>Photo1</th>
    </tr>
    <tr>
        <td>Saleen S7</th>
        <td>Irvine, California, United States</th>
        <td border=3 height=100 width=100>Photo1</th>
    </tr>
    <tr>
        <td> McLaren F1</th>
        <td>Surrey, England</th>
        <td border=3 height=100 width=100>Photo1</th>
    </tr>
    <tr>
        <td>Ferrari Enzo</th>
        <td>Maranello, Italy</th>
        <td border=3 height=100 width=100>Photo1</th>
    </tr>
    <tr>
        <td> Pagani Zonda F Clubsport</th>
        <td>Modena, Italy</th>
        <td border=3 height=100 width=100>Photo1</th>
    </tr>
</table>
  </body>
  <html> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-19T16:20:31.450

您的`HTML`.

首先，图片的 URL 需要指向公共 Internet 上的地址。查看您页面的用户将没有您的硬盘，因此无法指向本地硬盘上的文件。替换`C:\Pics`为图像的实际 URL，而不是开发机器文件系统上的路径。如果您想绝对确定，请使用不同的计算机并将 img 标签的 src 属性值粘贴到浏览器的地址栏。如果它在那里工作，那么你很好。不要认为路径可以是相对的并且仍然有效，但是它需要相对于它所嵌入的网页的公共 URL。

第二，`<title>`标签。如果你需要在浏览器上有一个标题，你需要添加这个标签，并且你不能格式化它。

第三个错误，如果关于`<th>`标签，你必须在标签内添加这个标题`<tr>`，因为`<th>`需要一行（创建者`<tr>`）。

另一件事是，你不需要你所做的所有 colspan。

我尝试根据需要做一个有效的 html。看一看：

```
<!DOCTYPE html> 
<html>
<head>
    <title>CAR APPLICATION</title>
</head>
<body>
    <center>
        <h1>CAR APPLICATION</h1>
    </center>

    <table border="5" bordercolor="red" align="center">
        <tr>
            <th colspan="3">SONAKSHI RAINA 10B ROLL No:-32</th> 
        </tr>
        <tr>
            <th>Name</th>
            <th>Origin</th>
            <th>Photo</th>
        </tr>
        <tr>
            <td>Bugatti Veyron Super Sport</td>
            <td>Molsheim, Alsace, France</td>
                    <!-- considering it is on the same folder that .html file -->
            <td><img src="H.gif" alt="" border=3 height=100 width=100></img></td>
        </tr>
        <tr>
            <td>SSC Ultimate Aero TT  TopSpeed</td>
            <td>United States</td>
            <td border=3 height=100 width=100>Photo1</td>
        </tr>
        <tr>
            <td>Koenigsegg CCX</td>
            <td>Ängelholm, Sweden</td>
            <td border=4 height=100 width=300>Photo1</td>
        </tr>
        <tr>
            <td>Saleen S7</td>
            <td>Irvine, California, United States</td>
            <td border=3 height=100 width=100>Photo1</td>
        </tr>
        <tr>
            <td> McLaren F1</td>
            <td>Surrey, England</td>
            <td border=3 height=100 width=100>Photo1</td>
        </tr>
        <tr>
            <td>Ferrari Enzo</td>
            <td>Maranello, Italy</td>
            <td border=3 height=100 width=100>Photo1</td>
        </tr>
        <tr>
            <td> Pagani Zonda F Clubsport</td>
            <td>Modena, Italy</td>
            <td border=3 height=100 width=100>Photo1</td>
        </tr>
    </table>
</body>
<html> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-19T16:16:13.077

你有一个 TH 漂浮在你的桌子顶部，它不在 TR 内。修复它。

关于您的图像问题，您绝对是从计算机硬盘驱动器中引用图像。不要那样做。

您还有一个不应该存在的结束标签。

它应该是：

```
<img src="h.gif" alt="" border="3" height="100" width="100" /> 
```

还有这个：

```
<table border = 5 bordercolor = red align = center> 
```

你的colspans也搞砸了。您似乎只有三列，但代码中的 colspans 为 14 和 4。

应该：

```
<table border="5" bordercolor="red" align="center"> 
```

你也没有声明 DOCTYPE。您至少应该添加：

```
<!DOCTYPE html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T16:17:58.663

灵魂看起来像：

```
<td colspan ='4'><img src="\Pics\H.gif" alt="" border='3' height='100' width='100' /></td> 
```

.

`<td>`需要关闭的`</td>` `<img />`是（在大多数情况下）一个空标签。结束标签被替换为`/>`... 就像 br 的

```
<br/> 
```

您的 html 结构很简单（抱歉），但这可能会变成非常糟糕的跨浏览器兼容性。此外，用引号封装属性的值，并避免在标签中使用大写字母。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T17:33:09.323

您已将图像引用为计算机上的路径（C:\etc\etc）......它位于那里吗？你没有回答别人问的问题。我已经获取了您的代码，将其放在dreamweaver 中，它与图像分开工作，因为我没有存储它。

检查位置，然后让我们知道。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-29T02:47:11.163

尝试使用“/”而不是“\”作为图像的路径。这里的一些评论似乎来自不了解我们中的一些人的人，他们只是在学习 Web 开发，在许多情况下最好在本地完成。所以不要使用 src=C:\Pics\H.gif 使用 src="C:/Pics/H.gif" 作为绝对路径，或者如果你的图片是 src="Pics/H.gif" 作为相对路径在您的 html 页面位置的子目录中）。另请注意，用引号将路径括起来是一种很好的做法。否则，您将遇到包含空格和其他奇数字符的路径问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-12T14:42:22.420

或者...您可以将图像放在锚标记中。因为我有同样的问题，它解决了它没有问题。许多人在发布他们的网站和照片之前使用本地路径。只要确保您在最后的编辑阶段返回并修复它。

# apache - apache mod_rewrite and number of query parameter

> ID：13457711
> 
> 赞同：0
> 
> 时间：2012-11-19T16:10:18.413
> 
> 标签：apache, mod-rewrite, friendly-url

Here I have an original url:

> /index.php?controller=controller_name&action=action_name&param1=val1&param2=val2

I need a rule that will transform it to:

> /controller_name/action_name/param1/val1/param2/val2/

The issue is I don't know how many *param* out there, *param* may have any name, for example a real case:

> /member/filter/location/us/gender/male/age/20

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:14:12.210

```
RewriteEngine On
# match query string in the form
#  controller=controller_name&action=action_name&param1=val1&param2=val2
# and rewrite it to /controller_name/action_name/?param1=val1&param2=val2
RewriteCond %{QUERY_STRING} ^controller=([^&]+)&action=([^&]+)&?(.*)$
RewriteRule .* /%1/%2?%3

# parse the query string from result of rules above
# and create "directories" from key, value pairs
RewriteCond %{QUERY_STRING} !=""
RewriteCond %{QUERY_STRING} ^&?([^=]+)=([^&]+)&?(.*)$
RewriteRule ^(.*)$ $1/%1/%2?%3 
```

# python - how to unpack a tuple that MAY contain a list

> ID：13457713
> 
> 赞同：0
> 
> 时间：2012-11-19T16:10:25.647
> 
> 标签：python, sqlite, list, tuples

I'm having an issue when trying to pass a sqlite query to another function.

The issue is that the sqlite query MAY contains a list and therefore I cannot use `*args` as it unpacks the tuple but then ignores the list, example query I'm attempting to pass to the function:

```
'SELECT postname FROM history WHERE postname = ? COLLATE NOCASE', [u'Test'] 
```

So in this case I could use `args` as opposed to `*args` in the destination function, however I may have a sqlite query that doesn't contain a list and therefore I can't always do this e.g.

```
'SELECT * FROM history' 
```

so I guess my question in a nutshell is how can I successfully pass a sqlite query to another function whether it contains a list or not, using args?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:13:19.887

你可以`try`吗`except`？

```
try:
   func(*args)
except TypeError:
   func(args) 
```

当然，这也会`TypeError`在你的函数中捕获 s 。因此，您*可能*希望创建另一个实际处理解包的函数，并确保为您提供一个可解包的对象作为回报。这也不适用于字符串，因为它们也会解包（见评论）。

这是一个确保可以解包对象的函数。

```
def unpackable(obj):
    if hasattr(obj,'__iter__'):
       return obj
    else:
       return (obj,)

func(*unpackable(args)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:31:41.687

我认为这里最好的答案是尝试并确保您始终放入可迭代的内容，而不是尝试处理拥有单个项目的奇怪情况。

如果你`('SELECT postname FROM history WHERE postname = ? COLLATE NOCASE', [u'Test'])`在一个地方，传递一个长度为 1 的元组更有意义 -`('SELECT * FROM history', )`而不是字符串。

您还没有说字符串的来源，因此您可能根本无法更改数据的方式，但如果可以，元组是从代码中删除边缘情况的更好选择。

如果你真的不能这样做，那么你想要的是解压缩任何非字符串迭代，检查可以按照[这个问题](https://stackoverflow.com/questions/1055360/how-to-tell-a-variable-is-iterable-but-not-a-string)所示完成。

# jquery - Using multiples datepickers

> ID：13457716
> 
> 赞同：2
> 
> 时间：2012-11-19T16:10:36.597
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

I want to use multiple datepickers in the same form and need altFields as well as certain logics for each of these datepickers. The datepickers are named dynamically such as `date_1`, `date_2` etc. whereas the altFields are named `date_1_alt`, `date_2_alt`.

I don´t want to setup multiple definitions `foreach datepicker`, but just use one single definition by selector `[id^='date_']` or i.e. by class `.date`

```
$("[id^='date_']").datepicker({
  dateFormat: "dd MM yy",
  altFormat:  "yy-mm-dd",
  altField: $(this).attr('id')+"_alt"
}); 
```

The problem is the dynamic definition of the altField (the code given does not work). I have tried many different ways but couldn't find the right way to define a dynamic assignment that would automatically create the corresponding altFields (such `date_1` -> `date_1_alt` etc.)

Does anyone know the right way to get this done? The same issue is relevant to further logic, such as defining the `onSelect` functions etc.

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:33:56.293

您可以手动迭代每个匹配元素并以这种方式应用 datepicker：

```
$("[id^='date_']").each(function () {
    var $this = $(this);

    $this.datepicker({
        dateFormat: "dd MM yy",
        altFormat:  "yy-mm-dd",
        altField: $this.attr('id')+"_alt"
    });
}); 
```

# java - 我可以将我的 java 库放在哪里，以便在使用 javac 时它们始终位于类路径中？

> ID：13457717
> 
> 赞同：3
> 
> 时间：2012-11-19T16:10:38.190
> 
> 标签：java, jar, classpath, libraries

我正在使用mac，我想知道是否有一个目录可以放置我经常使用的所有java库，这样我就可以编译/运行使用它们的代码，而无需每次都显式设置类路径? 我想做一些类似于包管理器在 python 中所做的事情，但似乎没有任何用于 java 的包管理器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:19:51.780

我强烈建议您避免这样做。虽然这对您个人来说可能很方便，但从可重复性的角度来看，这很糟糕。如果您的代码有问题并想将您的项目发送给其他人查看，他们不应该重现您的整个环境来编译它。

对于 Java 中的包管理，请查看[Maven](http://maven.apache.org/)项目。这将允许您描述您的项目依赖项并让该工具自动下载适当的 JAR 并将它们添加到您的项目的类路径中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:13:17.347

您可以将它们放在您喜欢的任何位置，并设置[环境`CLASSPATH`变量](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)以使其包含该路径。`javac`使用环境变量，因此您不必每次都指定它。

当您使用 Mac 时，我将向您指出[这个 SO 问题及其](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)有关如何设置环境变量的答案。要在您的 中包含多个目录，请`CLASSPATH`使用标准路径分隔符（我相信`:`在 Mac OS X 上）将它们分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:20:04.323

两种选择：

1 -`CLASSPATH`在你的 ~/.profile 文件中设置一个。然后每次你打开一个终端，它就会在那里。

2 - 您还可以将 JAR 文件放入 JDK 的 lib/ext 目录中。有关详细信息，请参阅[本文](http://developer.apple.com/library/mac/#qa/qa1170/_index.html)，但请注意 Apple 建议您不要这样做。

# java - Run Java EE Application client

> ID：13457722
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:11:04.800
> 
> 标签：java, jakarta-ee, ejb, glassfish-3

How to run a Java EE desktop application client outside Netbeans?

If I double click `jar`, it says "java exception". All (client, `ejb` and `web`) modules are deployed, and `glassfish` and desktop client `jar` are on same machine (Windows).

I've follwed this tut [http://docs.oracle.com/javaee/1.2.1/devguide/html/Client3.html](http://docs.oracle.com/javaee/1.2.1/devguide/html/Client3.html)

and when I run `runclient -client ConverterApp.ear -name MyConverterClient` in `cmd` it says runclient unknown command.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:17:19.747

Java应用程序可以使用Java虚拟机执行如下：

`java -cp yourjar.jar`你的主类`

如果您的主类属于包，您应该编写如下内容：

`java -cp yourjar.jar`com.mycompany.YourMainClass`

我希望这会有所帮助，尽管我并不真正理解“Java EE 桌面应用程序客户端”是什么意思。我希望这是一种连接到 Java EE 后端的 Java 应用程序。

# mysql - 设计：在redis中存储id，在mysql中存储数据内容

> ID：13457723
> 
> 赞同：0
> 
> 时间：2012-11-19T16:11:09.390
> 
> 标签：mysql, schema, redis

我正在使用 redis 数据类型根据指定对象的 id 进行一些数据聚合。要获取对象的信息，每次都必须在 mysql 数据库上进行选择查询。由于数据最初存储在mysql数据库中。我想知道这是否会损害性能，这是一个正确的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T22:02:43.847

因为 redis 是内存数据库，所以您可以将其用作缓存，如您所述。

你会从 mysql 而不是 redis 获得更多的性能“伤害”。我们正在使用 redis 来存储具有存储在 MongoDB 中的文档 ID 的集合。我们跟踪最近的文档，更多的投票等，redis 非常适合这一点。

使用批处理操作，一个好的模式和redis很棒。

# php - Php array value check in html upload form

> ID：13457724
> 
> 赞同：0
> 
> 时间：2012-11-19T16:11:10.620
> 
> 标签：php

I can check a simple variable if it's empty or not. But how do i check the array value which is come from Html Upload Form. Like: **name=images[];**

Simple variable check:

```
if(empty($somevalue))
  $err[] = "your variable is empty"; 
```

But how do i check if it's something like this:

```
<input name="images[]" type="file"/> 
```

**Update Code:**

```
<?php
if(isset($_POST['Submit']) && $_POST['Submit'] == "Save & Continue")
{
$number_of_file_fields = 0;
$number_of_uploaded_files = 0;
$number_of_moved_files = 0;
$uploaded_files = array();
$upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory

$img[] = $_FILES['images']['name']; 
$img = array();
$err = array();

if(isset($img))
{
    if(empty($img)) 
        $err[] = "Your property picture require";           
}

if(!empty($err))
{
    foreach($err as $er)
    {
        echo $er;
    }   
}
else
{
    echo "done";    
}

}

?>
<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data"   
name="mutiple_file_upload_form" id="mutiple_file_upload_form">
<table width="1020" border="0" cellspacing="7" cellpadding="0">   
 <tr>
 <td valign="top" width="250">
     Upload your property pictures
     </td>
     <td>
      <div id="file_container">
        <input name="images[]" type="file" class="tr2"  />
        <br />
      </div>
      <a href="javascript:void(0);" onClick="add_file_field();">Add another</a><br />
      <input type="submit" value="Save & Continue" name="Submit" class="submit" />
      </td>
 </tr> 
 </table>
</form> 
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:13:02.883

您仍然可以`empty()`在阵列上使用。

从[文档](http://php.net/manual/en/function.empty.php)：

> 以下内容被认为是空的：
> 
> ...
> array() （一个空数组）
> ...

但是，您应该注意，这`empty()`将返回一个包含*空*元素`false`的数组。看看你是否需要考虑这个。*[`array_filter()`](http://php.net/manual/en/function.array-filter.php)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:14:44.157

您只需忽略 PHP 端的方形背衬

`if empty($_POST['images'])`*

# visual-studio-2008 - SSRS 图表和日期

> ID：13457732
> 
> 赞同：4
> 
> 时间：2012-11-19T16:11:34.210
> 
> 标签：visual-studio-2008, date, reporting-services, charts

我有一个包含日期和数字的数据集。日期相隔大约一周，但这不能保证。我试图将日期显示为条形图的水平轴标签，但它一直以间隔格式显示日期。我正在使用 Visual Studio 2008。我希望它超级简单。我想要一个均匀分布的条形图，它有一个带有我的日期和相应值的横轴标签。如果日期相隔 2 到 3 周，我仍然希望这些条彼此相邻，没有任何间距。

我尝试使用 Cstr() 将日期转换为字符串，以使其将日期处理为任意值。我试过玩间隔设置。

我打算发布我正在使用的内容的屏幕截图，但我还不允许，所以我将尝试描述它们。

一张图片是我正在寻找的格式。

水平轴标签中有日期，每个日期上方都有一个相应的条，其中包含相关的值。每个条均间隔均匀。

另一个图像是我目前得到的。日期标签间隔均匀，但条形与日期不对齐。一些条形比其他条形更靠近，条形比数据标签多。

提前感谢您的任何建议。

-note 使用的数据集是不同的来源。上图 19 显示 100% 和底部 60% 的事实是由于其中一个来自生产数据和另一个开发环境。

用于底部的数据集（我正在处理的报告）是

开始日期------web_percent

2012-11-19------0.6
2012-11-12-----0.822222222222222
2012-11-05------0.96
2012-10-29------0.9364
2012- 10-22----- 0.902
2012-10-15-----0.889
2012-10-08-----0.86888
2012-10-01-----0.85
2012-09- 24--------0.821
2012-09-17--------0.83673469
2012-09-12--------0.90384615384615
2012-09-04-----0.9038461538

（我现在已经附上了图片，我已经做了 10 个代表）

![在此处输入图像描述](../Images/d60b3b1fb3cbe9f52b78110286283a2d.png)

# c++ - 无法从 sqlite3_column_text16(stmt,1) 转换为字符串

> ID：13457740
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:11:57.173
> 
> 标签：c++, parsing, sqlite

我在 xcode 中收到错误说：

```
No viable overload '=' 
```

我正在尝试遍历一些代码，但它不起作用。

下面是代码：

```
string query;
query = "select name from A;";
sqlite3_stmt *sqlstmt;
if(SQLITE_OK != sqlite3_prepare16_v2(db, query.c_str(),0, &sqlstmt,0)){
   sqlite3_close(db);
   return -1;
}
while(sqlite3_step(sqlstmt) == SQLITE_ROW){
  string name;
  name = sqlite3_column_text16(sqlstmt, 1);  //<--errors
  cout << name << endl;
} 
```

编辑：我添加了查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:16:58.377

`sqlite3_column_text16()`返回 a `void const *`，而不是字符串。试试这个：

```
string name(static_cast<char const *>(sqlite3_column_text16(sqlstmt, 1))); 
```

请注意，*16 系列函数使用 UTF-16，因此这不太可能适用于标准字符串；您必须使用宽字符串或非 16 变体：

```
string name(static_cast<char const *>(sqlite3_column_text(sqlstmt, 1))); 
```

# javascript - 将日期对象与困难字符串进行比较

> ID：13457743
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:12:17.350
> 
> 标签：javascript, jquery, sharepoint, spservices

问题是我有一个返回的值

```
$(this).attr("ows_Modified"); //(Sharepoint and SPService thing) 
```

该值似乎是字符串`'Fri Oct 19 2012 13:35:45 GMT+0200'`，需要将其与具有如下值格式的日期对象进行比较：

```
var myDate = new Date();
myDate.setDate(myDate.getDate()-31);
//2012-10-19 12:14:13 
```

并检查一个更新。请问有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:14:09.127

```
var isBigger = new Date($(this).attr("ows_Modified")) > new Date().getDate()-31; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:15:11.620

[用Date.js](http://www.datejs.com/)解析两个日期，它会理解这两种格式，然后你可以比较它们。

导入库后，您可以使用

```
date1 = Date.parse(Fri Oct 19 2012 13:35:45 GMT+0200);
date2 = Date.parse(2012-10-19 12:14:13); // or whatever date
isGreater = date1.isAfter(date2); 
```

正如 gdoron 所说，您*不需要*date.js，但它可能值得一看，尤其是当您可能管理看起来很奇怪的日期格式或进行棘手的操作时。

# php - SQL 查询，使用 MAX 函数或等效函数

> ID：13457744
> 
> 赞同：0
> 
> 时间：2012-11-19T16:12:17.417
> 
> 标签：php, sql

这是我的问题，我有这个请求（它有效），但我想用`TO_DAYS(notification.created_at)`用户的最新操作替换。

我尝试使用`TO_DAYS(MAX(notification.created_at))`但它返回`"#1111 - Invalid use of group function"`.

```
SELECT user.email, notification.type, max(notification.created_at) AS date 
    FROM user, notification 
    WHERE (user.id = notification.user_id) AND (TO_DAYS(NOW()) - TO_DAYS(notification.created_at) >= 30)
    GROUP BY user.id 
    ORDER BY `date` DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:29:31.817

首先，我不明白为什么不在`LEFT JOIN`您的查询中使用...其次，将减法本身转换为天数就足够了...第三，该条件 from`WHERE`应该进入`HAVING`...第四，我想`date`in`SELECT`也应该被逃脱......它可能是：

```
SELECT u.email, n.type, max(n.created_at) AS `date`
FROM user u
LEFT JOIN notification n ON u.id = n.user_id
GROUP BY user.id 
HAVING TO_DAYS(NOW() - MAX(n.created_at)) >= 30
ORDER BY `date` DESC 
```

试试这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:44:38.450

使用 MAX 之类的聚合函数时，必须使用 HAVING 而不是 WHERE，可以在同一命令上同时使用两者，但是 HAVING 总是在 WHERE 和 GROUP BY 之后。

欲了解更多信息：[http ://www.w3schools.com/sql/sql_having.asp](http://www.w3schools.com/sql/sql_having.asp)

# php - 如何在 CodeIgniter 中访问 $_GET 参数？

> ID：13457748
> 
> 赞同：1
> 
> 时间：2012-11-19T16:12:40.763
> 
> 标签：php, codeigniter, get

我使用 codeigniter 生成 JSON。这是我目前的结构：

模型文章：

```
<?php
class Articles_model extends CI_Model {

 public function __construct()
     {
  $this->load->database();
 }

 public function get_articles()
{
  $this->db->order_by("HdOrder", "asc");
  $query = $this->db->get('articles');

  return $query->result_array();

}
} 
```

控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Json extends CI_Controller {

 public function __construct()
 {
  parent::__construct();
  $this->load->model('articles_model');
 }

 public function index()
{
 $data['articles'] = $this->articles_model->get_articles();

 $this->load->view('json', $data);

}
} 
```

而我的观点：

```
<?php header('Access-Control-Allow-Origin: *'); ?>

<?php
echo '{"articles":'.json_encode($articles).'}';
?> 
```

现在我需要将两个 get 参数传递给这个 json，以便我可以在页面中返回它。[我已经在php中完成了它](https://stackoverflow.com/questions/13426129/infinite-scroll-loading-all-items-at-once/13426329#13426329)并且它有效。下面是没有 CI 的 php 代码：

```
<?php
$link = mysql_pconnect("localhost", "user", "pass") or die("Could not connect");
mysql_select_db("dbase") or die("Could not select database");

//GET page/count
$count=10;$offset=0;
if (isset($_GET['count'])) $count=$_GET['count']*1;
if (isset($_GET['page']))  $offset=$_GET['page']*$count*1;

$arr = array();

$rs = mysql_query("SELECT * FROM bannersright 
                   ORDER BY HdOrder 
                   LIMIT $offset,$count"); #<-HERE

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}

echo '{"bannersright":'.json_encode($arr).'}';

?> 
```

现在如何在我的 CodeIgniter 结构中执行此操作？我应该如何从我的视图控制器模型中传递我的 $offset 和 $count 变量以将它们设置为 mysql 查询的限制值？实际上我找到了一个[关于如何将变量传递给控制器​​的教程](http://www.phpeveryday.com/articles/CodeIgniter-Getting-Parameters-From-GET-P151.html)但是我仍然不确定如何将相同的值传递给模型，然后将查询返回到同一个控制器。而且我不太确定这是否是解决问题的正确方法。

我想尽可能简单地解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:19:22.200

你只需要传递这样的参数............

```
public function controller_name($param1, $param2) {

      $result = $this->model->get_result($param1, $param2);

      $data = array();
      $data['result'] = $result;
      $this->load->view('view_file_name', $data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:49:28.483

否则你可以使用

```
 // if your url come like controller/someview/1/2
    $this->uri->segment(3) // will get 1
    $this->uri->segment(4) // will get 2 

```

# android - 带有文本视图和一个按钮的列表视图

> ID：13457750
> 
> 赞同：0
> 
> 时间：2012-11-19T16:12:43.913
> 
> 标签：android, button, android-listview

我有一个`Listview`，每一行都有一个`Button`。如果我按`Button`我想`Toast`显示一个。

我已经知道如何设置`onItemClickListener`我的，`List`但我不知道如何对`Button`一行中的单个做出反应。到目前为止，这是我的代码，如果我不需要大量更改它会很棒:)

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    if(arg2 == 0){                                  
        Context context = getApplicationContext();
        String text = "Toast";
        Toast meinToast = Toast.makeText( context, text, Toast.LENGTH_SHORT);
        meinToast.show();                               
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:48:23.250

在您的适配器中试试这个：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    YourWrapper wrapper = null;

    if (row == null)
    {
        row = inflater.inflate(R.layout.layout, parent, false);
        wrapper = new YourWrapper (row);
        row.setTag(wrapper);
    }
    else
        wrapper = (YourWrapper) row.getTag();

    wrapper.getButton().setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // What you want
        }
    });

    return row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:22:05.120

这是一个很好的教程，如何将 ListView 与自定义适配器一起使用，

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

所以你可以在自定义适配器类中使用这样的功能：

```
public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        final Button button = (Button) vi.findViewById(R.id.button_id);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
            }
        });
        return vi;
    } 
```

如果您添加更多逻辑，您可以为列表中的每个显示按钮创建自定义事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:16:40.977

每个按钮都需要一个`OnClickListener`。

请阅读此内容，然后您将能够创建 OnClickListener 并将它们附加到按钮或其他对象。 [http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

如果您不想实现`OnclickListener()`尝试编写时出现问题`View.OnClickListener.`，单击按钮时发生的操作会转到`OnClick(){//foo}`（将自动生成）。

然后只需使用设置 onclicklistener`button.setOnclickListener(yourOnclickListener);`

编辑

```
Button mButton = ...

 mButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                //foo
            }
        }); 
```

# python - 在 Python 脚本中调用 MATLAB .m 文件和函数

> ID：13457751
> 
> 赞同：8
> 
> 时间：2012-11-19T16:12:45.390
> 
> 标签：python, matlab, interface, call, mlabwrap

我有一个python脚本平台，我想在里面调用matlab函数。我发现了几个线程来解决这个问题，其中两个

[如何从 Python 与 MATLAB 交互？](https://stackoverflow.com/questions/2255942/how-do-i-interact-with-matlab-from-python)

[从 Python 运行 m 文件](https://stackoverflow.com/questions/9675386/running-m-files-from-python?rq=1)

但是，线程要么不是最近的，要么不是很详细。

1.  mlabwrap 可靠吗？
2.  作为在 python 脚本中调用 matlab 函数/.m 文件的解决方案，您会提倡什么？
3.  使用 python 中的 win32com 调用 matlab 会话 --> 这是个好主意吗？您能否指出有关此主题的更多文档或示例？

看起来指向 sourceForge 的链接不是最新的，最后一次更新是 2010 年，

[http://sourceforge.net/projects/mlabwrap/](http://sourceforge.net/projects/mlabwrap/)

4.  你能暗示一些最新版本吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T18:58:26.093

我仍然会推荐 mlabwrap 作为解决方案。我在 Linux 和 Windows 上定期（每周？）使用 mlabwrap，跨越几个不同版本的 Python 和几个不同版本的 Matlab。要回答您的具体问题：

1.  mlabwrap 将可靠地跨平台、Python 和 Matlab 版本执行。然而，它确实有限制，并且当超过这些限制时它会可靠地失败。通常，这些都可以解决。
2.  有关通过 mlabwrap 调用 Matlab 函数与 Matlab 脚本的更多信息，[请](https://stackoverflow.com/questions/13311415/run-a-matlab-script-from-python-pass-args/13316939#13316939)参阅我的答案。该答案还描述了如何解决 mlabwrap 的主要限制之一，即并非所有 Matlab 对象都可以直接转换为 Python 对象。
3.  我对使用 win32com 调用 Matlab 一无所知。

我以我将称之为“Python-primary”风格的方式使用了 mlabwrap，其中大部分编程使用 Python，使用 Matlab 作为特定数学函数的库，这些函数在 scipy/numpy 和“Matlab”中不可用-primary'风格，大部分编程都是在Matlab中，最终的结果被导入到Python中用于一些外部过程。

对于 Python-primary，要记住的是，并非所有的 Matlab 函数都会返回 Python 可读的数据。mlabwrap`MLabObjectProxy`将从这些函数返回一个对象。当您使用 Matlab 函数创建传递给其他 Matlab 函数以实际处理数据的对象时，通常会发生这些情况。例如，您可以使用数字信号处理工具箱创建一个 Welch 频谱对象，然后您可以使用它来获取数据的功率谱。理论上，您可以将这些 MLabObjectProxies 传递给需要它们的 Matlab 函数。根据我的经验，您来回传递这些内容越多，您就越有可能在 mlabwrap 中找到错误。您可以做的是编写一个简单的 Matlab 包装函数，获取对象、处理数据，然后将适当的输出作为数组返回。

您还可以通过使用 mlabwrap 中的低级命令来解决 MLabObjectProxies 的问题。例如，如果我有一个`matlab_struct`带有 field 的结构数组`matlab_struct.label`，并且我只想要 Python 端的标签，我可以执行以下操作：

```
# place matlab_struct into the Matlab workspace 
mlab._set('matlab_struct', matlab_struct) 
# convert the labels into a cell array
matlab_struct_labels = mlab.eval('{matlab_struct.labels}') 
```

可用的主要低级命令是`mlab._set('variable_name', variable)`、`mlab.eval('command string')`和`mlab.get('variable_name')`。

如果我在 Matlab 中进行大量繁重的处理，比如在其他地方没有的工具箱或插件中，我将编写我称之为“Matlab-primary”的代码，在那里我尽量避免将数据传回来回通过 mlabwrap，而不是通过调用 .m 脚本来操作 Matlab 工作区中的变量，将结果输出保存到数据文件中，然后将其导入我的 Python 代码中。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-18T17:13:12.690

# mlabwrapper

是 python <-> MATLAB 桥接的绝佳解决方案。如果某些事情对您不起作用，只需报告 SO 上的具体问题 :)

您必须注意 mlabwrapper 作为项目已经存在了很长一段时间。[http://mlabwrap.sourceforge.net/](http://mlabwrap.sourceforge.net/)

我最近遇到了 mlabwrap.cpp 的问题，为此我找到了以下 github fork

> 相关 有一个 mlabwrap v1.1-pre ( [http://mlabwrap.sourceforge.net/](http://mlabwrap.sourceforge.net/) ) 的副本，如下所述修补：http: [//sourceforge.net/mailarchive/message.php ?msg_id=27312822](http://sourceforge.net/mailarchive/message.php?msg_id=27312822)
> 
> 带有修复错误的补丁：
> 
> mlabraw.cpp:225: *error* : invalid conversion from 'const mwSize*' to 'const int*' 另请注意，在 Ubuntu 中，您需要 sudo apt-get install csh
> 
> 有关详细信息，请参阅[http://github.com/aweinstein/mlabwrap](http://github.com/aweinstein/mlabwrap)

## 实验室

花了更多时间后，我做了一个 github 镜像来更新、修复和维护包装器[https://github.com/ewiger/mlab](https://github.com/ewiger/mlab) （欢迎补丁和拉取请求！）

可以pip安装，即

```
pip install mlab 
```

我现在已经排除了 cpp 实现。在当前的方式下，它的工作方式如下：

对于 Linux/Mac 库创建与 MATLAB 实例的管道连接。剩下的就是序列化（@brentlance 部分指出），这是使用 numpy 完成的。

对于 Windows 库使用 DCOM 进行通信。（但我仍然要使用注册表修复版本查找）。

## 何时使用 mlab？

我建议在 MATLAB 中调用非常高级的用户函数（主要返回逻辑结果或非常标准的内置类型作为矩阵），以尽量减少与 MATLAB 的任何通信。这种方法非常适合遗留代码，但可能需要编写一些包装接口来简化函数声明。

总的来说，代码有点繁琐，是很多人拼凑而成的。核心部分（现在是**matlabpipe**和**matlabcom**）似乎做得很好。最终，除非您愿意花时间测试、错误报告、错误修复和功能请求所有用例，否则我不会推荐将*mlab*用于全面的生产应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-20T13:59:03.347

要回答您的问题：

1.  我们使用了 mlabwrap，它很可靠。唯一的困难是编译它。我们有一些问题。但是，一旦编译它，它就会运行良好。
2.  我会推荐[matlab_wrapper](https://github.com/mrkrd/matlab_wrapper)，因为它更容易安装（纯 Python，无需编译），支持各种数据结构（数字、逻辑、结构、单元数组）并在 GNU/Linux、Windows、OSX 上运行。
3.  使用 win32com 与 MATLAB 通信应该可以工作，但它是相当低级的且不可移植。

免责声明：我是 matlab_wrapper 的作者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-09T21:48:47.553

从 MATLAB R2014b 开始，现在有一个用于 Python 的 MATLAB API。有关详细信息，请参阅 MATLAB[文档](https://www.mathworks.com/help/matlab/matlab-engine-for-python.html)。然而，它需要启动 MATLAB 引擎，这可能需要一些时间。

# filter - 带有复选框的活动管理员“AND”过滤器

> ID：13457757
> 
> 赞同：0
> 
> 时间：2012-11-19T16:13:00.347
> 
> 标签：filter, activeadmin, meta-search

我的`Parent`资源中有简单的活动管理过滤器：

```
filter :child_id, :as => :check_boxes, :collection => proc { Child.all }
filter :child_id_not, :as => :check_boxes, :collection => proc { Child.all } 
```

我想获取与子资源（has_and_belongs_to_many）关联或不关联的所有父资源。效果不错，但是当我在第一个过滤器活动管理员中选择例如两个孩子时，将返回与第一个或第二个相关联的所有父资源。我需要两个（：child_id和：child_id_not）的“AND”运算符。

任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:37:14.117

您将不得不推出自己的范围。ActiveAdmin 使用 meta_search 作为其过滤器 (https://github.com/ernie/meta_search)。

在您的管理文件中：

```
filter :child_id_all,
  :as => :check_boxes,
  :collection => proc { Child.all }

filter :child_id_all_not,
  :as => :check_boxes,
  :collection => proc { Child.all } 
```

在您的父模型中：

```
scope :child_id_all_in, -> ids {
  ids.reduce(scoped) do |scope, id|
    subquery = Parent.select('`parents`.`id`').
      joins(:childs).
      where('`childs`.`id` = ?', id)
    scope.where("`parents`.`id` IN (#{subquery.to_sql})")
  end
}
scope :child_id_all_not_in, -> ids {
  ids.reduce(scoped) do |scope, id|
    subquery = Parent.select('`parents`.`id`').
      joins(:childs).
      where('`childs`.`id` = ?', id)
    scope.where("`parents`.`id` NOT IN (#{subquery.to_sql})")
  end
}
search_methods :child_id_all_in
search_methods :child_id_all_not_in 
```

# c - 将配置参数从 apache.conf 传递到自定义 apache C 模块？

> ID：13457765
> 
> 赞同：3
> 
> 时间：2012-11-19T16:13:23.810
> 
> 标签：c, apache

Apache httpd 框架中是否有任何机制允许我将自定义参数从 Apache 配置文件传递到自定义 Apache 模块（使用 C API 编写）？我真的只需要键/值对。

类似于 conf 文件中的内容：

```
ConfigParameter foo bar 
```

然后在代码中：

```
string foo = GetApacheConfigParameter("foo"); // = "bar" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:42:45.617

不; 不直接。一个肮脏的黑客将是

```
SetEnv foo bar 
```

在配置文件中 - 和一个

```
char * bar = getenv("foo"); 
```

在你的模块中。除此之外的任何事情都需要在每个目录、服务器等上使用适当的结构。通常该结构将包含许多特定的东西。在你的情况下，它只是一张桌子。

所以有点干净的方法是简单地使用一张桌子——然后把它留在那：

```
 static const command_rec xxx_cmds[] = {
    AP_INIT_TAKE2("ConfigParameter", add_configparam, NULL, RSRC_CONF,
              "Arbitrary key value pair"),
   {NULL}
};

 static void * create_dir_config(apr_pool_t *p, char *dirspec ) {
    return ap_table_palloc(p);
 }

 static const char *add_configparam(cmd_parms *cmd, void *mconfig,   
                               char *key, char *val) 
 {
    ap_table_t *pairs = (ap_table_rec *) mconfig;
    ap_table_set(pairs, key, val);
    return NULL;
 }

 AP_DECLARE_MODULE(xxxx_module) =
 {
   STANDARD20_MODULE_STUFF,
   xxx_create_dir_config,    /* per-directory config creator */
   ...
   xxx_cmds,                 /* command table */ 
```

然后，在任何你想使用它的地方：

```
apr_table_t * pairs =  (apr_table_p *) ap_get_module_config(r->request_config, &xxxx_module); 
```

或者

```
 apr_table_t * pairs =  ap_get_module_config(s->module_config, &xxxx_module); 
```

取决于我们在哪里使用 - 然后使用：

```
char * bar = apr_table_get(pairs,"foo"); 
```

或类似的。请参阅 mod_example_hooks 和各种 our_* 调用以获取指针。上面的示例省略了服务器级别的配置和配置的合并。如果需要，请添加它们 - 对表有相应的合并调用。mod_alias.c 等 有很好的例子。

# excel - 在单元格内循环并写入新文件的 Excel 宏

> ID：13457766
> 
> 赞同：1
> 
> 时间：2012-11-19T16:13:33.280
> 
> 标签：excel, vba

在将 Excel 电子表格导入 MySql 链接表之前，我需要一个宏来从 Excel 电子表格中获取一些数据。

有一列慈善机构名称和一列以逗号分隔的 id 列表（这些代表慈善机构类型）例如

```
Column A
CharityName1   
CharityName2
CharityName3
CharityName4

Column B
100, 101,104
 (empty)
104
100,105 
```

我想这样写一个新的csv文件如下

```
1,100
1,101
1,104
3,104
4,100
4,105 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:02:26.787

此代码将快速创建 `c:\temp\dump.csv`具有此格式的 csv 文件

*[更新以处理您的格式我注意到您可能丢失了数据，因为 Excel 已将科学记数法应用于您的字段。现在我添加了一个丑陋的解决方法来填充 0。B2 应该是一个 30 位的字段吗？]*

![在此处输入图像描述](../Images/8a93da7c4b6e90ec4ecfb7e71960e209.png)

```
Sub GetEm()
Dim x()
Dim lngCnt As Long
Dim lngCnt2 As Long
Dim lngE As Long
Dim objFSO As Object
Dim objTF As Object
Dim vArr
Dim vArrElem

Set objFSO = CreateObject("scripting.filesystemobject")
Set objTF = objFSO.createtextfile("c:\temp\dump.csv", 2)

x = Application.Transpose(Range("B1", Cells(Rows.Count, "B").End(xlUp)))
For lngCnt = 1 To UBound(x)
    lngE = InStr(x(lngCnt), "E")
    If lngE > 0 Then
        x(lngCnt) = CStr(Replace(Replace(x(lngCnt), ".", vbNullString), "E+", vbNullString) & Application.Rept("0", Right$(x(lngCnt), 2) - lngE + 1))
    End If
    If Len(x(lngCnt)) > 0 Then
        If Len(x(lngCnt)) Mod 3 = 0 Then
            For lngCnt2 = 1 To Len(x(lngCnt)) Step 3
                objTF.writeline lngCnt & ",'" & Mid$(x(lngCnt), lngCnt2, 3)
            Next
        End If
    End If
Next
objTF.Close

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:25:57.423

我将遍历第二列并将每个单元格中的值放入一个数组中，我们称之为 mainArray。（这会迭代行和列，请注意：[How to iterate through a variable-column-length range in Excel using VBA](https://stackoverflow.com/questions/9844044/how-to-iterate-through-a-variable-column-length-range-in-excel-using-vba)）

然后我会解析直到分隔符'，'并将它们存储在一个名为 cellArray 的数组中，第一个值作为它们从中获取的编号单元格。然后，用新的 cellArray 替换 mainArray 中的原始单元格值。（[字符串操作：拆分这个由 - 字符分隔的字符串？](https://stackoverflow.com/questions/12955640/string-manipulation-split-this-string-delimited-by-a-character)）

因此单元格 B1 将变为 cellArray = { 1, 100, 101, 104 } 这将是 mainArray 中的第一个值。为使用范围的 B 列中的每个单元格执行此操作。

然后我会创建一个新的 csv（[如何从 VBA 创建一个单独的 CSV 文件？](https://stackoverflow.com/questions/8419828/how-to-create-a-separate-csv-file-from-vba)），然后将数据输入其中。

要输入数据，我将遍历每个保存的数组并存储为 CellValue = array[0] + ", " + array[i]

最后，我将保存我的新 CSV 文件。

# c# - WatiN SelectList element select by index

> ID：13457771
> 
> 赞同：0
> 
> 时间：2012-11-19T16:13:49.387
> 
> 标签：c#, watin, selectlist

Ho do I select the first item in a SelectList in WatiN? Below you can see how I have my selectlist declared and below that is how I'm attempting to call the select. I don't see any options for index. Will I need to get a string collection of selected items and select by the [1] string or is there a simpler way to do this?

Page Class:

```
[FindBy(Id = "VariationRelationshipId")]
public SelectList VariationRelationship { get; set; } 
```

Test Class:

```
//need to select 1st item in list
Browser.Page<MyPage>().VariationRelationship........ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:39:41.047

您需要针对浏览器的实例而不是`Watin.Core.Browser`类调用

测试代码。

```
IE myBrowser = new IE(true);
myBrowser.GoTo("http://www.tizag.com/htmlT/htmlselect.php");           
myBrowser.Page<DropDownSample>().States.WaitUntilExists();
myBrowser.Page<DropDownSample>().States.Options[2].Select();  //<-- not Browser.Page.... 
```

班级

```
public class DropDownSample : Page
    {
        [FindBy(Name = "selectionField")]
        public SelectList States { get; set; }
    } 
```

上面在 Watin2.1、IE9、Win7 上进行了检查 - 运行得像个冠军。在页面上的第一个选择列表中选择“conneticut”。

# ajax - CORS $.ajax session cookies (access-control-allow-credentials & withCredentials=true)

> ID：13457772
> 
> 赞同：8
> 
> 时间：2012-11-19T16:13:52.717
> 
> 标签：ajax, cookies, cors

I realize this question has been asked a dozen or more times and each response given indicates I am doing it right but perhaps I am missing something.

AJAX serves up CORS request like so...

```
$.ajax({
url: 'someotherdomain.com',
type: 'post',
data: {key: 'value'},
dataType: 'json',
async: false,
crossDomain: true,
beforeSend: function(xhr){
    xhr.withCredentials = true;
},
success: function(x, status, xhr){

},
error: function(xhr, status, error){

}
}); 
```

PHP serves up CORS requests like so...

```
header('Access-Control-Max-Age: 1728000');
header('Access-Control-Allow-Origin: http://someotherdomain.com');
header('Access-Control-Allow-Methods: POST');
header('Access-Control-Allow-Headers: Content-MD5, X-Alt-Referer');
header('Access-Control-Allow-Credentials: true');
header("Content-Type: application/json; charset=utf-8"); 
```

According to all documentation as long as the 'Access-Control-Allow-Credentials' server side header, and the 'withCredentials=true' client side header is set session cookie handling between the domains should be transparent. Am I missing something?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:46:47.977

```
async: false 
```

阻止会话cookie在每个请求上被发送回服务器。以下修复了它。

```
async: true 
```

尽管这确实允许在进行跨源请求共享调用时由浏览器设置会话 cookie，但我现在遇到以下情况的问题：

服务器 A 向客户端发送响应 客户端使用 CORS 向服务器 B 发出请求

```
XMLHttpRequest -> PHP -> Session handler -> MySQL -> Stored Procedure 
```

由于 MUTEX 锁定 PHP 会话管理中的异步特性，显然，要求可能会强制使用不同的标头选项（例如 XCookie 或类似的东西）手动设置 cookie，以保持服务器会话和客户端请求同步。

这种特殊的解决方法并不适合我，因为我相信它会为会话劫持和会话重放攻击向量开辟一条轻松的通道。

使用 SSL/TLS 包装的连接可能有助于防止上述情况，但就为客户端独立提供安全措施而言，我认为这还不够。

有人对此有任何想法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:34:46.413

在上面的示例中，您将 Access-Control-Allow-Origin 标头设置为“http://someotherdomain.com”，这与您从 JQuery 请求的 url 相同。Access-Control-Allow-Origin 标头应该是请求来自的域的值。作为一个快速测试，尝试将此标头的值设置为“*”（不带引号）并查看它是否有效（“*”表示允许所有域）。

# spring - How to refresh iBatis Cache with database operations

> ID：13457774
> 
> 赞同：1
> 
> 时间：2012-11-19T16:13:55.053
> 
> 标签：spring, caching, ibatis

We have an Java EE web application using iBatis for ORM. One of the dropdown (select box) shows a master data which is refreshed on a daily basis (say 4.00 AM) via cron jobs loading flat file into oracle database table.

Since the dropdown/select-box has to list ~1000 records and it was static data for 24 hrs, we used the CacheModel feature in iBatis. The select query was made to use a CacheModel with settings "ReadOnly=true & Serialized=true flushInterval=24 hours", so that a single cache will be shared across all users.

There will no insert/update/delete operations happening from the application to modify this master data

**Question**:

If the external job loading data to this oracle table fails and if the iBatis cache is flushed for the day before we manually load the data in the table, how can i get the iBatis cache flushed again inbetween of the day when i rerun a failed cron job ?

**Please note that, there will not be any Insert/Update/Delete operations from the application**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:49:33.043

您可以以编程方式刷新缓存。

有2种方法

```
void flushDataCache() 
Flushes all data caches. 
```

和

```
void flushDataCache(java.lang.String cacheId) 
Flushes the data cache that matches the cache model ID provided. 
```

在`SqlMapClient`界面中。

[http://ibatis.apache.org/docs/java/user/com/ibatis/sqlmap/client/SqlMapClient.html](http://ibatis.apache.org/docs/java/user/com/ibatis/sqlmap/client/SqlMapClient.html)

# python - Splitting a string into a list (but not separating adjacent numbers) in Python

> ID：13457776
> 
> 赞同：4
> 
> 时间：2012-11-19T16:14:15.220
> 
> 标签：python, string, list

For example, I have:

```
string = "123ab4 5" 
```

I want to be able to get the following list:

```
["123","ab","4","5"] 
```

rather than list(string) giving me:

```
["1","2","3","a","b","4"," ","5"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:18:46.420

查找一个或多个相邻数字 ( `\d+`)，或者如果查找失败，则查找非数字、非空格字符 ( `[^\d\s]+`)。

```
>>> string = '123ab4 5'
>>> import re
>>> re.findall('\d+|[^\d\s]+', string)
['123', 'ab', '4', '5'] 
```

如果您不想将字母连接在一起，请尝试以下操作：

```
>>> re.findall('\d+|\S', string)
['123', 'a', 'b', '4', '5'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:24:03.003

其他解决方案肯定更容易。如果你想要一些不那么简单的东西，你可以尝试这样的事情：

```
>>> import string
>>> from itertools import groupby
>>> s = "123ab4 5"
>>> result = [''.join(list(v)) for _, v in groupby(s, key=lambda x: x.isdigit())]
>>> result = [x for x in result if x not in string.whitespace]
>>> result
['123', 'ab', '4', '5'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:25:01.910

你可以这样做：

```
>>> [el for el in re.split('(\d+)', string) if el.strip()]
['123', 'ab', '4', '5'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:22:59.557

你可以在这里做一些事情，你可以

**1\. 迭代列表并随时制作数字组，将它们附加到您的结果列表中。**

不是一个很好的解决方案。

**2.使用正则表达式。**

实施2：

```
>>> import re
>>> s = "123ab4 5"
>>> re.findall('\d+|[^\d]', s)
['123', 'a', 'b', '4', ' ', '5'] 
```

您想抓取至少有 1 个数字`\d+`或任何其他字符的任何组。

**编辑**

约翰首先让我找到了正确的[解决方案](https://stackoverflow.com/a/13457869/1561176)。这是一个绝妙的[解决方案](https://stackoverflow.com/a/13457869/1561176)。

不过，我将把它留在这里，因为其他人可能会误解这个问题并寻找我认为写的内容的答案。我的印象是 OP 只想捕获一组数字，而让其他一切都保持独立。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T16:25:23.047

这将给出您想要的拆分：

```
re.findall(r'\d+|[a-zA-Z]+', "123ab4 5")

['123', 'ab', '4', '5'] 
```

# c# - How to calculate all possible results of a N-sized yes/no test?

> ID：13457778
> 
> 赞同：-3
> 
> 时间：2012-11-19T16:14:18.183
> 
> 标签：c#, math

I'm trying to calculate the possible results of a test with 70 questions. They're all bools. How to do that and how many calculations they have to be done.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:19:59.033

好吧，如果您需要运行 70 个真/假值的每个组合，那大约是 2^70 = 1.18e21 = 1.18 六分之一的组合。如果每个时钟周期可以做一个，那么一台 3 GHz 的 4 核机器将需要 3000 年才能计算所有解决方案。如果您将每个结果打印在 0.1 毫米厚的纸上，每页 50 行，那么纸叠将超过一万亿英里高（您可能会想到一个事实，一英里高的纸叠有超过 1600 万张纸，重 72 吨，需要 1000 多棵树来制作）。

我会重新考虑分析这个问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:19:10.077

如果你的意思是你想得到真实的布尔值，假设它们存储在一个数组中，循环遍历它们。

```
int score = 0;
for(int c = 0; c < boolArray.Length; c++)
{
    if(boolArray[c])
    {
        score++;
    }
}
// (Now you have the score) 
```

我不确定这个确切的代码是否会起作用，因为我对 c# 不是很熟悉，但你应该明白这一点。

如果你的意思是你想要测试可以给你的所有可能性，它是 2 ^ 70（2 因为一个布尔值只包含两个值，70 因为有 70 个布尔值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:20:59.737

嗯，每个结果都可以是真或假，所以总共有 2^70 个结果。（非常多！）

如果您真的想枚举所有结果，可以执行以下操作：

```
IEnumerable<IEnumerable<bool>> EnumerateResults()
{
    var curr = new List<bool>();
    for (var idx = 0; idx < 3; idx++) curr.Add(false);
    while (!curr.All(v => v))
    {
        var idx = 0;
        // add one with carry
        while (curr[idx]) // no index OOB, because of while condition
        {
            curr[idx] = false;
            idx++;
        }
        curr[idx] = true;
        yield return new List<bool>(curr); // clone
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:22:43.143

答案很简单。您正在处理一个 N 大小的二进制数。例如，一个 4 个问题的测试，有 16 种可能性

0000 0001 0010 0011

0100 0101 0110 0111

1000 1001 1010 1011

1100 1101 1110 1111

对于 N，它只是 2^N

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T16:17:43.170

您可能希望循环或递归地执行此操作。

考虑到可能测试的数量，必须进行 2 **70^(次计算。)**

或者，如果您不关心个别路径，则 可能只有**70个。**

# iphone - Restkit + Coredata - NSFetchedResultsControllerDelegate 回调不会单独为更新操作触发

> ID：13457779
> 
> 赞同：0
> 
> 时间：2012-11-19T16:14:20.647
> 
> 标签：iphone, ios, cocoa-touch, core-data, restkit

我这里有一个奇怪的问题。我没有在我的 NSManagedObject 上获得“更新”操作的回调，但是在该实体类型的集合中插入或删除的任何对象都会触发委托回调。

在我进一步处理问题之前，我想告知我的设置：

*   NSFetchedResultsController 配置正确。确保正在外部修改的属性不是本 Apple 文档所要求的 fetchedResultsController 的任何排序键：

    > 当对象的状态发生更改时会报告更新，但更改的属性不是排序键的一部分。

*   只有一个托管对象上下文发生了这些修改。

*   由于插入和删除操作正在报告给代表，我认为更新操作有些可疑

我在 RKLogs 的帮助下深入研究了 Restkit 代码，以查看映射发生的确切位置以及 coredata 对象正在更新的位置，以找出未获得更新委托回调的原因。

在类`RKManagedObjectMappingOperation`-performMapping 方法中，Blake Watters 先生记录了更新时未触发 MOC 回调的原因：

```
- (BOOL)performMapping:(NSError **)error
{
    BOOL success = [super performMapping:error];
    if ([self.objectMapping isKindOfClass:[RKManagedObjectMapping class]]) {
        /**
         NOTE: Processing the pending changes here ensures that the managed object context generates observable
         callbacks that are important for maintaining any sort of cache that is consistent within a single
         object mapping operation. As the MOC is only saved when the aggregate operation is processed, we must
         manually invoke processPendingChanges to prevent recreating objects with the same primary key.
         See https://github.com/RestKit/RestKit/issues/661
         */
        [self connectRelationships];
    }
    return success;
} 
```

但我无法为自己的一生弄清楚如何解决这个问题？因为这是故意的？

有没有人遇到过同样的问题？我如何解决它？

谢谢，拉吉帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:44:33.883

我有 1 个错误，还有 1 个错误（无知），我不知道，因此我遇到了这个问题：

**错误：**
尽管论坛上进行了很多讨论，但我错误地陈述了我列出的第二项：

*   > 只有一个托管对象上下文
    > 发生了这些修改。

我错误地登录并发现我处于相同的上下文中！我太傻了！

**无知：**
我对 RK 代码进行了一些挖掘，认为那里发生了一些可疑的事情，检查了 Blake Watters 的评论和他的提交 4b394f8c1e1f 以查看现在删除的早期代码（调用 -processPendingChanges）是否导致任何问题而不是让代表了解更新。

发现这确实在一个单独的线程上，是的，它有自己的 MOC，我错过了。接下来要做的事情很简单，我实现了[将 MOC 的更改从不同线程合并到主 MOC](https://stackoverflow.com/questions/10403538/iphone-ios-how-to-merge-core-data-nsmanagedobjectcontext)的机制。但这也不起作用！

原因是我正处于应用程序开发的初始阶段。我只是使用 RestKit 将 json 响应与 coredata 对象映射，我无处使用它！我只是在 GDB 中记录 coredata 对象，它们始终处于**故障状态**！我依靠`-objectLoader`回调和`NSNotification object`看到确实有**更新**可用的。在测试的某个时刻，我碰巧记录了托管对象的一个​​属性，该属性在通知回调中发生了更改，然后才合并回主 MOC。这会使托管对象出错并加载托管对象的所有属性。现在，当辅助线程 MOC 更改与主线程 MOC 合并时，我的 NSFetchedResultsControllerDelegate 回调开始触发。

# image - 存储数百万张图像

> ID：13457784
> 
> 赞同：7
> 
> 时间：2012-11-19T16:14:39.757
> 
> 标签：image, mongodb, filesystems, cassandra, storage

我需要为数亿张图像准备一个存储空间（现在我有 7000 万张，而且这个数字还在增长）。每个图像有大约。20KB。当然，我可以将它们存储在文件系统中，但我害怕 inode 的数量。我已经测试过 MongoDB 和 Cassandra。它们都有缺点（我的硬盘资源有限）：

*   MongoDB - 磁盘空间消耗是原始数据大小的 3 倍
*   Cassandra - 磁盘空间消耗与原始数据的大小相似，但 Cassandra 需要大量可用空间来进行压缩过程

任何人都可以为此类问题提出适当的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:52:12.397

在我的生活中，我使用 S3（包括 Rackspace 云文件）和 MongoDB 完成了视频分发。

大多数人会毫不犹豫地选择 S3，但我发现两者都有其缺点。最大的问题之一是 S3 不是 CDN，它实际上是特定区域内的冗余存储，不会复制到其他 S3 区域，这意味着您需要在 S3 之上使用 cloudfront 之类的东西来 ping 您的图像如果您要在您的网站上获得严重的负载，请使用某种缓存。

S3 还具有其他功能，使其不像 CDN 那样多，而更像是一个存储仓库。话虽如此，对于不常访问的文件，S3 的速度非常快。

这种双层当然会产生复杂性，例如维护。不仅如此，CDN 还可以在 TTL 上工作，即使现在许多 CDN 都具有边缘清除能力，但它们仍然不是 100% 确保您的文件不可访问的方法。

因此，由于设置和访问（也应该删除的文件的可能访问），这可能很快就会变得非常昂贵。

这就是 MongoDB*可以*取胜的地方。根据您的情况，MongoDB 在这里实际上可能更便宜，因为您可以在 AWS 上使用一大堆微型实例来实际保存您的信息，为这些实例添加现场实例预留（非常便宜）以及您所需要的一切是单台机器上的大磁盘。

天哪，你甚至可以使用 S3 来存储图像，然后使用 MongoDB 作为云端的替代品。

当您想将图像 ping 到不同的区域时，您只需在该目标区域中创建几个 Spot 实例并让 MongoDB 复制它的数据。您也可以对复制做一些很酷的事情，以确保只将来自该区域的经常访问的文件放置在该区域中。

所以我不会抛弃 MongoDB（甚至是 Cassandra），而是会在两者之间进行经济状况测试。

### 编辑

作为关于 S3 定价的附加说明，如果您将文件存储在 RR（减少冗余）中，那么价格减半（大约），这使得 S3 非常便宜，但是，您仍然存在 S3 不是 CDN 的问题。

### 进一步编辑

因为我真的只是从@cirrus 的回答中继续，我实际上会重新评估你的问题，上面有点回答。

例如，Youtube 实际上将他们所有的图像存储在单个计算机上，然后分发，因此他们可以轻松地管理 200m 的缩略图和......嗯......每天从文件系统轻松获得很多视图。所以我认为你对文件系统的担心被高估了。

至于哪个数据库更好...我不知道，这取决于您的测试。

我的意思是你的问题的答案取决于你的场景和你的预算以及你的硬件和你的资源，即如果你有 AWS 服务器，这将是一个与专用内部服务器完全不同的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:39:15.627

为什么不将它们放在 Amazon 的 S3 或 Azure Blob 存储中？它们更合适，您不会遇到空间或内存问题，也不必管理部署。

# jquery - 未捕获的类型错误：无法调用未定义的方法“setDrawingMode”

> ID：13457790
> 
> 赞同：1
> 
> 时间：2012-11-19T16:14:58.700
> 
> 标签：jquery, api, google-maps

我正在使用谷歌地图绘图管理器来编写一个控件类。但是这条线发生了javascript错误。

```
// Switch back to non-drawing mode after drawing a shape.
this.drawingManager.setDrawingMode(null); 
```

> 未捕获的类型错误：无法调用未定义的方法“setDrawingMode”

有人可以帮我解决这个错误吗？非常感谢！

```
function DrawingManagerCtrl() {
    this.drawingManager = new google.maps.drawing.DrawingManager({
        // drawingMode: google.maps.drawing.OverlayType.MARKER,
        drawingControlOptions : {
            position : google.maps.ControlPosition.TOP_CENTER,
            drawingModes : [ google.maps.drawing.OverlayType.RECTANGLE ]
        },
    });

    google.maps.event.addListener(this.drawingManager, 'overlaycomplete', function(e) {
        // Switch back to non-drawing mode after drawing a shape.
        this.drawingManager.setDrawingMode(null);
    });
};

DrawingManagerCtrl.prototype = {
    drawingManager : null,
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:18:28.550

我不知道那个特定`this`的 API，但我怀疑事件处理函数内部与`this`外部不同，因此您需要使用创建闭包的事实：

```
function DrawingManagerCtrl() {
    var self = this; // <==== Create a variable for the closure to close over
    this.drawingManager = new google.maps.drawing.DrawingManager({
        // drawingMode: google.maps.drawing.OverlayType.MARKER,
        drawingControlOptions : {
            position : google.maps.ControlPosition.TOP_CENTER,
            drawingModes : [ google.maps.drawing.OverlayType.RECTANGLE ]
        },
    });

    google.maps.event.addListener(this.drawingManager, 'overlaycomplete', function(e) {
        // Switch back to non-drawing mode after drawing a shape.
        self.drawingManager.setDrawingMode(null);
        // ^ Use it
    });
}; 
```

`this`在 JavaScript 中，取决于函数的调用方式，而不是函数的定义位置。所以除非谷歌地图的东西让你指定它应该`this`在事件回调中使用什么，`this`否则不会引用你的对象。通过使用闭包，您可以改用变量（`self`上面的 , ）。

进一步阅读（在我贫血的小博客上）：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)
*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T08:08:12.333

您在 google map api 中附加库时可能犯了错误。

请确保您已将几何库添加到脚本文件中

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places,geometry,drawing"></script> 
```

# ruby-on-rails - Rails：跨数据库范围

> ID：13457798
> 
> 赞同：0
> 
> 时间：2012-11-19T16:15:20.423
> 
> 标签：ruby-on-rails, scope, named-scope

我有三个模型，警报，站点，网络。它们通过 belongs_to 关系连接，但它们存在于不同的数据库中

```
class Alarm < ActiveRecord::Base
   establish_connection :remote
   belongs_to :site, primary_key: :mac_address, foreign_key: :mac_address
end

class Site < ActiveRecord::Base
   establish_connection :remote
   belongs_to :network
end

class Network < ActiveRecord::Base
   establish_connection :local
end 
```

我希望选择属于特定网络的所有警报。我可以在如下范围内使用原始 sql 执行此操作：

```
scope :network_alarms, lambda { |net|
    #need to ensure we are interrogating the right databases - network and site are local, alarm is remote
    remote=Alarm.connection.current_database
    local=Network.connection.current_database
    Alarm.find_by_sql("SELECT network.* FROM #{local}.network  INNER JOIN #{local}.site ON network.id = site.network_id  INNER JOIN #{remote}.alarm on #{remote}.alarm.mac_address = site.mac_address WHERE site.network_id=#{net.id}")
  } 
```

这很好用。但是，这个范围返回一个数组，所以我不能链接它（例如，使用`with_paginate's #page`方法）。所以

有没有更智能的方式来做这个加入。例如，我尝试过使用`join`and`where`语句（这是我尝试过的众多变体之一）：

```
scope :network_alarms, lambda { |net| joins(:site).where("alarm.mac_address = site.mac_address").where('site.network_id=?', net) } 
```

但问题似乎是rails`#join`假设两个表都在同一个数据库中，而不检查每个表正在使用的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:49:47.460

所以当你知道如何时，答案很简单......

ActiveRecord::Base 有一个`table_name_prefix`方法，只要在查询中使用它，就会在表名上添加一个特定的前缀。如果重新定义这个方法在表名前面加上数据库名，生成的SQL会被强制使用正确的数据库

因此，在我最初的问题中，我们将以下方法定义添加到表警报、站点和网络（以及其他任何需要的地方）中

```
def self.table_name_prefix
   self.connection.current_database+'.'
end 
```

然后我们可以使用范围轻松构建连接

```
scope :network_alarms, lambda { |net| joins(:site => :network).where('site.network_id=?', net) } 
```

感谢[srosenhammer](https://stackoverflow.com/users/1060020/srosenhamer)的原始答案（这里：[Rails 3 - Multiple database with joins condition](https://stackoverflow.com/questions/7968221/rails-3-multiple-database-with-joins-condition/13460908#13460908)）

史蒂夫

# liferay - 基本表单 portlet jsr 286 v liferay 6.0

> ID：13457799
> 
> 赞同：1
> 
> 时间：2012-11-19T16:15:20.507
> 
> 标签：liferay, portlet, jsr286

如何从表单中检索数据并通过 JDBC 将其发送到 MySQL 数据库？

这是我的程序：

主类：

```
public class Dati extends MVCPortlet {

    public static Connection con() {
        Connection conn = null;
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
        } catch (Exception ex) {
            System.out.println("Errore");
        }

        // APRI CONNESSIONE

        try {
            conn = DriverManager.getConnection("jdbc:mysql://localhost/db_alex","root","25071984");
            System.out.println("Connessione effettuata");
            return conn;
        } catch (SQLException ex) {
            System.out.println("SQlException: " + ex.getMessage());
            System.out.println("SQLState: " + ex.getSQLState());
            System.out.println("VendorError: " + ex.getErrorCode());
            return null;
        }
    }

    public void Invio (ActionRequest actionRequest, ActionResponse actionResponse) 
    throws PortletException, IOException {
        String username = actionRequest.getParameter("username");
        String password = actionRequest.getParameter("password");

        Connection conn = null;

        try {

        Statement st = conn.createStatement();
        st.executeUpdate("INSERT INTO contacts (username,password) values ('"+username+"','"+password+"')");
        System.out.println("Inserimento avvenuto con successo");
        } catch (Exception e) {
            System.out.println("Inserimento non avvenuto");
        }
    }
} 
```

视图.jsp

```
<%
/**
 * Copyright (c) 2000-2011 Liferay, Inc. All rights reserved.
 *
 * This library is free software; you can redistribute it and/or modify it under
 * the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation; either version 2.1 of the License, or (at your option)
 * any later version.
 *
 * This library is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 */
%>

<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

<portlet:actionURL name="Invio" var="Invio"/>

<form method="post" action="actionURL/>">

    <input type="text" name="username">
    <input type="password" name="password">
    <input type="submit" value="Invia!">    

</form> 
```

我不知道我的错在哪里。我正在阅读[Portlet 暂时不可用](https://stackoverflow.com/questions/9648084/portlet-is-temporarily-unavailable)并应用该规则，但 Liferay 说我错了。

哪个是正确的存储程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:36:54.347

您在 view.jsp 中将 actionURL Invio 定义为 java 对象，但您错误地引用了它。您应该在 <%= %> 标记中引用它。实际上你的表单标签应该是这样的：

```
<form method="post" action='<%=Invio%>'>

<input type="text" name="username">
<input type="password" name="password">
<input type="submit" value="Invia!"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T17:47:16.847

请检查表单标签的 action 属性值。

您可以通过多种方式使用。

```
1\.  <form method="post" action="<portlet:actionURL/>">
       <input type="text" name="username">
       <input type="password" name="password">
       <input type="submit" value="Invia!">    
   </form> 
```

**2.**

```
 <form method="post" action="${Invio}">
       <input type="text" name="username">
       <input type="password" name="password">
       <input type="submit" value="Invia!">    
    </form> 
```

**3.**

```
 <form method="post" action="<%=Invio%>">
       <input type="text" name="username">
       <input type="password" name="password">
       <input type="submit" value="Invia!">    
    </form> 
```

*第三个我不喜欢。*

选择是你的......

# database - 如何在 Toad for Oracle 中定义主外键？

> ID：13457801
> 
> 赞同：3
> 
> 时间：2012-11-19T16:15:20.893
> 
> 标签：database, oracle11g, ddl

如何在 Toad for Oracle 中定义主外键 (PFK)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:20:16.857

设置表后，您必须在约束下添加外键。 [约束图片的链接](http://i.stack.imgur.com/Bmdpu.png)

# svg - 避免未像素对齐的平铺 SVG 矩形之间的线条

> ID：13457803
> 
> 赞同：3
> 
> 时间：2012-11-19T16:15:27.207
> 
> 标签：svg, rendering

我在[这个问题](https://stackoverflow.com/questions/13049336/avoid-line-between-tiled-svg-shapes)`rect`中有几个附近的 s ，但未与像素对齐。我无法更改元素位置。[例如](http://tinkerbin.com/73t2Oz33)：

```
<svg width="326.01071" height="255.5332" xmlns="http://www.w3.org/2000/svg"
   viewBox="18 18 41 41"
>
    <rect x="21" y="21" width="51" height="3" fill="black" class="crisp" />
    <rect x="21" y="24" width="30" height="3" fill="black" class="crisp" />
    <rect x="21" y="41" width="51" height="3" fill="black" />
    <rect x="21" y="44" width="30" height="3" fill="black" />
</svg>​ 
```

我在矩形之间有一条细线。`shape-rendering="crispEdges"`没有帮助。

添加一点重叠会有所帮助，但会导致两个抗锯齿边缘连接的垂直关节上出现明显的尖峰，因为两个重叠的矩形都参与了颜色混合。

有什么我可以做的吗？

*好吧，矩形是相同的颜色，所以我可以引入一些智能算法来将相邻的矩形连接成一个形状。这是一种干净但艰难的方式。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T10:11:33.290

好的，我会在最后回答。

在 -s 周围添加`g`标签`rect`消除了这一行——除了 Internet Explorer。

# python - 从 hdf5 检索具有稀疏数据的大帧 - “NoneType”对象不是可迭代错误

> ID：13457806
> 
> 赞同：2
> 
> 时间：2012-11-19T16:15:37.827
> 
> 标签：python, pandas

一段时间以来，我一直在我的脚本中使用 pandas，尤其是以一种易于访问的方式存储大型数据集。几天前我偶然发现了这个问题，到目前为止还没有解决它。

问题是，在我将一个巨大的数据框存储到 hdf5 文件中后，当我稍后将其加载回来时，它有时有一个或多个列（仅来自对象类型列）完全无法访问并返回“NoneType 对象不可迭代”错误。

当我使用内存中的帧时，没有问题，即使数据集比下面的示例大一些。值得一提的是，该框架包含多个日期时间列或多个[VMS 时间戳](http://labs.hoffmanlabs.com/node/735)，以及字符串、字符和整数列。所有非对象列都可以并且确实有缺失值。

起初我以为我将“NA”值保存在“对象类型”列之一中。然后我尝试更新到最新的熊猫版本（0.9.1）。到目前为止没有任何效果。

我已经能够使用以下代码重现该错误：

```
import pandas as pd
import numpy as np
import datetime

# Get VMS timestamps for today
time_now = datetime.datetime.today()
start_vms = datetime.datetime(1858, 11, 17)
t_delta = (time_now - start_vms)
vms_time = t_delta.total_seconds() * 10000000

# Generate Test Frame (dense)
test_records = []
vms_time1 = vms_time
vms_time2 = vms_time
for i in range(2000000):
    vms_time1 += 15 * np.random.randn()
    vms_time2 += 25 * np.random.randn()
    vms_time_diff = vms_time2 - vms_time1
    string1 = 'XXXXXXXXXX'
    string2 = 'XXXXXXXXXX'
    string3 = 'XXXXX'
    string4 = 'XXXXX'
    char1 = 'A'
    char2 = 'B'
    char3 = 'C'
    char4 = 'D'
    number1 = np.random.randint(1,10)
    number2 = np.random.randint(1,100)
    number3 = np.random.randint(1,1000)
    test_records.append((char1, string1, vms_time1, number1, char2, string2, vms_time2, number2, char3, string3, vms_time_diff, number3, char4, string4))

df = pd.DataFrame(test_records, columns = ["column_1", "column_2", "column_3", "column_4", "column_5", "column_6", "column_7", "column_8", "column_9", "column_10", "column_11", "column_12", "column_13", "column_14"])

# Generate Test Frame (sparse)
test_records = []
vms_time1 = vms_time
vms_time2 = vms_time
count = 0
for i in range(2000000):
    if (count%23 == 0):
        vms_time1 += 15 * np.random.randn()
        string1 = 'XXXXXXXXXX'
        string2 = ' '
        string3 = 'XXXXX'
        string4 = 'XXXXX'
        char1 = 'A'
        char2 = 'B'
        char3 = 'C'
        char4 = 'D'
        number1 = None
        number2 = np.random.randint(1,100)
        number3 = np.random.randint(1,1000)
        test_records.append((char1, string1, vms_time1, number1, char2, None, None, number2, char3, string3, None, number3, None, string4))
    else:
        vms_time1 += 15 * np.random.randn()
        vms_time2 += 25 * np.random.randn()
        vms_time_diff = vms_time2 - vms_time1
        string1 = 'XXXXXXXXXX'
        string2 = 'XXXXXXXXXX'
        string3 = 'XXXXX'
        string4 = 'XXXXX'
        char1 = 'A'
        char2 = 'B'
        char3 = 'C'
        char4 = 'D'
        number1 = np.random.randint(1,10)
        number2 = np.random.randint(1,100)
        number3 = np.random.randint(1,1000)
        test_records.append((char1, string1, vms_time1, number1, char2, string2, vms_time2, number2, char3, string3, vms_time_diff, number3, char4, string4))
    count += 1

df1 = pd.DataFrame(test_records, columns = ["column_1", "column_2", "column_3", "column_4", "column_5", "column_6", "column_7", "column_8", "column_9", "column_10", "column_11", "column_12", "column_13", "column_14"])

store_loc = "Some Location for the file"
h5_store = pd.HDFStore(store_loc )
h5_store['df1'] = df
h5_store['df2'] = df1
h5_store.close() 
```

当我现在尝试从该商店加载时，“df1”表现正常，但“df2”产生以下错误：

```
TypeError: 'NoneType' object is not iterable 
```

# python - 如何与机械化同时提出请求？

> ID：13457815
> 
> 赞同：1
> 
> 时间：2012-11-19T16:16:21.197
> 
> 标签：python, multithreading, python-2.7, mechanize, mechanize-python

是否可以一次使用 mechanize 运行多个请求？我知道线程，但线程的问题是，机械化处理线程后线程而不是同时处理所有线程......

这是我想做的事情：我想在页面上填写表格，提交，获取结果页面，返回（br.back（））到最后一页的表格，填写不同的详细信息，提交它，获取结果页面等等等等......由于这个解决方案需要很长时间，我正在考虑同时做更多的请求，有没有办法？真的很期待你的回答。非常感谢！

# c++ - 这是利用基于范围的 for 循环的合理方法吗？

> ID：13457824
> 
> 赞同：4
> 
> 时间：2012-11-19T16:16:51.953
> 
> 标签：c++, c++11

我最近想知道 c++11 中基于范围的 for 循环的要求是什么，因为我只见过预期用法的示例：

```
for (auto person : people)
{
  cout << person.name << endl;
} 
```

但是鉴于容器只需要具有开始和结束方法，而根本不需要包含任何内容，那么以下内容是否会被视为“不好的做法”？如果不出意外，如果有人在面试中要求您提供斐波那契数列，这是一个新鲜的答案！

```
#include <string>
#include <iostream>
#include <Windows.h>

using namespace std;

struct FibItr
{
    FibItr(int cur = 1, int prev = 0) : mCur(cur), mPrev(prev) {}
    FibItr & operator++()
    {
        mCur += mPrev;
        mPrev = mCur - mPrev;
        return *this;
    }

    int operator*(){ return mCur; }

    bool operator!=(const FibItr & _rhs)
    {
        return mCur != _rhs.mCur || mPrev != _rhs.mPrev;
    }   

    unsigned int mCur, mPrev;
};

struct Fib
{
    FibItr begin() { return FibItr(); }
    FibItr end() { return FibItr(0, 0); }
};

int main( int argc, char* argv[] ) 
{   
    for (auto num : Fib())
    {
        cout << num << endl;
        Sleep(500);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:21:44.837

问题不是真正的问题，`auto for-loop`而是实现更奇怪的迭代器是否合理。虽然有一些极端情况，但您可以为将某些操作实现为迭代器（memoized fibonacci 就是一个很好的例子）提出一个完美的好论据。

有整个库致力于将迭代器转换为更多内容，因此其他一些人也认为这是一个好主意。

顺便说一句：实现迭代器是一项棘手的工作，这就是为什么要小心使用此类方法的原因。[Boost.Iterator](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/index.html)是一组很好的助手，可以让这更容易。

# android - 当系统即将关闭 CPU 时广播

> ID：13457826
> 
> 赞同：0
> 
> 时间：2012-11-19T16:16:57.543
> 
> 标签：android

当系统即将进入睡眠状态以保护 Android 电池时，是否有可能收到通知？

例如有：

[意图.ACTION_SCREEN_OFF](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_OFF)

但是，当系统即将使 CPU 进入睡眠状态时，有没有办法设置回调？

# c# - 在“未设置对象”错误之前捕获不存在的 XML 节点

> ID：13457831
> 
> 赞同：4
> 
> 时间：2012-11-19T16:17:02.277
> 
> 标签：c#, .net, linq, xml-parsing, linq-to-xml

我有类似于下面的 XML 的东西。我在 C# 中使用 Linq 解析它，它运行良好，直到我们得到一个没有`type`.

```
<productList>
    <product>
        <type>
            <colour>red</colour>
        </type>
        <name>First</name>
    </product>
    <product>
        <name>Second</name>
    </product>
</productList> 
```

我正在尝试访问`colour`下的元素`type`，但是当代码到达`product`没有该`type`元素的 a 时，我收到“对象引用未设置为对象的实例”错误。

这是我目前用来访问它的代码。我试图解决这个问题的尝试让事情变得有点复杂。

```
productColour = products.Element("type").Descendants().FirstOrDefault() == null ? string.Empty : products.Element("type").Descendants().FirstOrDefault().Value, 
```

我知道`colour`元素总是第一个在下面`type`，所以我可以使用`.FirstOrDefault()`，但使用这段代码我仍然得到同样的错误。

谁能指出我正确的方向？我也尝试过强制转换为字符串，并且还有：`?? " "`最后，到目前为止都无济于事。

**编辑：**感谢@anthony-pegram，看起来问题是我总是试图抓住后代，即使父元素不存在。所以看起来我需要在抓住孩子之前检查父元素 - 谁能指出我的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:26:09.547

[Elements()](http://msdn.microsoft.com/en-us/library/bb348975.aspx)将返回一个 IEnumerable。如果该元素不存在，则 IEnumerable 将只是空的，并且在其上再次调用 Elements 不会产生空引用异常。下面的代码应该从 product\type 元素下提取颜色，而不会引发空引用异常。如果颜色或类型不存在，它将返回 null。

```
(string)product.Elements("type").Elements("colour").FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:20:53.080

我会在这里使用 XPath

```
var xDoc = XDocument.Parse(xml);
var colour = xDoc.XPathSelectElement("//product/type/colour");
if(colour!=null)
{
    var val = colour.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:36:35.520

你有没有想过用一个属性来代替？

```
<productList>
    <product type="color-red">
        <name>First</name>
    </product>
    <product type="none">
        <name>Second</name>
    </product>
</productList> 
```

没有机会返回 null 变量，因为 type 属性可以具有默认字符串值。我也认为这更整洁，但这是个人喜好。

你也可以做之`<product color="red" />`类的。

# silverlight - RestSharp 不适用于 WP7 测试

> ID：13457833
> 
> 赞同：0
> 
> 时间：2012-11-19T16:17:09.440
> 
> 标签：silverlight, windows-phone-7, nunit, restsharp

我正在尝试使用以下代码启动 WP7 测试：

```
var client = new RestClient("http://google.com");
var request = new RestRequest(Method.GET);
client.ExecuteAsync(request, response => Debug.WriteLine(response.StatusCode); 
```

此代码写入 HttpStatusCode=0 并引发错误：

> 'System.Net.WebRequest' 的类型初始化程序引发了异常。System.TypeInitializationException

如何解决？

**更新#1**

例如，此代码在 Windows 类库中运行良好，但在 Silverlight 和 WP7 项目中不起作用：

```
var client = new RestClient("http://carma.org/api/1.1/searchPlants");
var request = new RestRequest();
request.AddParameter("location", 4338);
request.AddParameter("limit", 10);
request.AddParameter("color", "red");
request.AddParameter("format", "xml");
var plants = client.ExecuteAsync(
request, response => Assert.AreEqual(HttpStatusCode.OK, response.StatusCode)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:58:47.010

我知道 nunit 可以在 windows phone 7 上抛出奇怪的异常，确保你有 silverlight 版本，这可能会解决你的问题。此处提供更多详细信息 => [NUnit with Windows Phone 7](https://stackoverflow.com/questions/3605942/nunit-with-windows-phone-7)

# wpf - 更改 wpf 中 ObservableCollection 元素的前景色 - C#

> ID：13457834
> 
> 赞同：1
> 
> 时间：2012-11-19T16:17:11.037
> 
> 标签：wpf, c#-4.0

我有以下 rangeobservablecollection：

```
private readonly RangeObservableCollection<coll> _coll; 
```

其中 coll 是我要添加到此集合中的一堆复选框。我想更改特定添加复选框的前景色，如下所示：

```
_coll.Add( info ); 
```

有没有办法改变它的颜色？

XAML 代码：

```
<StackPanel Orientation="Horizontal">
                <CheckBox Margin="0,0,3,0" Foreground="{Binding Foreground"}">
                    <CheckBox.IsChecked>
                        <Binding Path="IsSelected"
                                 Mode="TwoWay">
                            <Binding.RelativeSource>
                                <RelativeSource Mode="Parent" />
                            </Binding.RelativeSource>
                        </Binding>
                    </CheckBox.IsChecked>
                </CheckBox>
                <ContentPresenter />
            </StackPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:28:27.530

您可以在 ui 对象上使用模板，将前景色绑定到 coll 类的 SolidColorBrush 属性。

```
<ListBox ItemsSource="{Binding items}">
    <ListBox.ItemTemplate>
      <DataTemplate>
        <StackPanel Orientation="Horizontal">
          <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" />
          <TextBlock Foreground="{Binding Foreground}" Content="{Binding Description}" />
        </StackPanel>
      </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

您的类定义将如下所示：

```
public class coll
{
    public IsChecked { get; set; }
    public string Description { get; set; }
    public SolidColorBrush Foreground { get; set; }
} 
```

然后你可以改变前景：

```
info.Foreground = new SolidColorBrush(Colors.Red);
_coll.Add( info ); 
```

您可以在这里使用很多变体来实现相同的效果：转换器、INPC...

# lucene.net - 具有 Lucene.Net 和 Azure 辅助角色的 AzureDirectory

> ID：13457836
> 
> 赞同：3
> 
> 时间：2012-11-19T16:17:19.147
> 
> 标签：lucene.net, azure-storage, azure-worker-roles

我正在尝试使用 Azure Blob 存储中的 AzureDirectory 实现 Lucene.Net 索引。

索引过程从 Azure 辅助角色运行。

在本地 azure 模拟器中，我可以将大约 300 万条记录处理到索引中，搜索速度非常快。

现在我正在尝试将其添加到实时 Azure 中，并且辅助角色开始正常处理。

我遇到的问题是，在大约 500,000 条记录之后，工作者角色倒下并重新启动。

我有异常处理，并且在整个代码、异常处理程序和 OnStop 事件中都使用带有跟踪语句的诊断。来自主代码的跟踪语句很好地出现在诊断表中，并为我提供了正在处理的记录的日志，但来自异常处理和 OnStop 的跟踪语句从未出现。

有很多代码要发布，所以我想我首先要问是否有人知道 AzureDirectory 对这种类型的 Lucene.Net 索引有任何限制？

**编辑：** 我终于设法通过移动一些代码来获得异常。索引磁盘空间不足，我得到以下异常。将尝试增加空间并将返回结果。

> 磁盘空间不足。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
> 在 System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count) 在 Lucene.Net.Store.SimpleFSDirectory.SimpleFSIndexOutput.FlushBuffer(Byte[ ] b, Int32 offset, Int32 size) at Lucene.Net.Store.BufferedIndexOutput.WriteBytes(Byte[] b, Int32 offset, Int32 length) at Lucene.Net.Store.BufferedIndexOutput.Flush() at Lucene.Net.Store。 RAMOutputStream.WriteTo(IndexOutput out_Renamed)
> 在 Lucene.Net.Index.StoredFieldsWriter.FinishDocument(PerDoc perDoc)
> 在 Lucene.Net.Index.DocumentsWriter.FinishDocument(DocumentsWriterThreadState perThread, DocWriter docWriter) 在 Lucene.Net.Index.DocumentsWriter.WaitQueue.Add(DocWriter doc) 在 Lucene.Net.Index.DocumentsWriter.WaitQueue.WriteDocument(DocWriter doc) 在Lucene.Net.Index.IndexWriter.AddDocument（文档文档，分析器分析器）上的 Lucene.Net.Index.DocumentsWriter.UpdateDocument（文档文档，分析器分析器，术语 delTerm）

**最终更新** 现在我的索引器在大约 5 分钟内索引了 330 万行数据。

我已经回到基于 RAM 的存储并稍微减少了被索引的数据，我的文档中有 3 个字段，现在减少到 2 个。

从 azure webrole 中搜索索引也非常快。

我已经听取了每个人的意见，并将在下个月左右对此进行监控。我很想看看它在负载下的表现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:53:42.637

我之前发过这个。。。但是。。。

它不适用于生产环境......这是我为什么不适用以及您可以做什么的答案：[如何在 Azure webrole 上实现 Lucene .Net 搜索](https://stackoverflow.com/questions/13222479/how-to-implement-lucene-net-search-on-azure-webrole/13223048#13223048)

我应该补充一点，运行您自己的 Azure VM 具有优势，因为您可以对磁盘进行条带化以获得额外的 I/O 性能（在 RAM 外部进行索引和搜索时很重要）。

这是另一个可能有帮助的答案，但我不同意这种方法：[https ://azuredirectory.codeplex.com/discussions/402913](https://azuredirectory.codeplex.com/discussions/402913)

编辑：我应该澄清一下，当我说“工作”时，我的意思是在生产环境中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:23:32.563

[我在这里](http://linqtolucene.codeplex.com/SourceControl/changeset/view/96133#1753982)实现了我的 AzureDirectory 版本

也许它会对您有所帮助，您最终总会用 RAMDirectory 耗尽 RAM - 这只是文档数量的问题。

# javascript - 使用 jQuery 从输入中获取第 2 轮小数语法

> ID：13457841
> 
> 赞同：1
> 
> 时间：2012-11-19T16:17:30.493
> 
> 标签：javascript, jquery

我有一个从公斤到磅的简单转换表。

**html**

```
<input type="text" id="kg" name="kg">
<input type="text" id="lbs" name="lbs"> 
```

我进行了设置，以便在您使用此代码输入 kg 框时更新 lbs 框。

**jQuery**

```
$("#kg").keyup(function(){
    $('#lbs').val($('#kg').val()*2.20462);
}); 
```

如何将 lbs 值舍入到小数点后 2 位？我确信这是相当简单的事情，但我在网上找到的所有示例都是针对数字是否存储在变量中的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:18:50.900

使用[toFixed](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

```
var string = yourNumber.toFixed(2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:19:07.217

使用[`toFixed`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)：

```
$('#lbs').val(($('#kg').val()*2.20462).toFixed(2)); 
```

* * *

```
number.toFixed( [digits] ) 
```

> **范围**
> 
> **小数点**后出现的位数；这可以是 0 到 20 之间的值，包括 0 和 20，并且实现可以选择支持更大范围的值。如果省略此参数，则将其视为 0。
> 
> **退货**
> 
> 数字的字符串表示形式，不使用指数表示法，并且在小数点后具有精确的数字。必要时对数字进行四舍五入，必要时用零填充小数部分，使其具有指定的长度。如果 number 大于 1e+21，此方法只需调用 Number.toString() 并以指数表示法返回一个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:19:44.150

这也是

```
(10.8).toFixed(2); // 10.80

var num = 2.4;
alert(num.toFixed(2)); // 2.40 
```

[在 JavaScript 中格式化正好有两位小数的数字](https://stackoverflow.com/questions/1726630/javascript-formatting-number-with-exactly-two-decimals)

# linux - EC2 存储空间不足，可以删除哪些日志等？

> ID：13457842
> 
> 赞同：4
> 
> 时间：2012-11-19T16:17:34.047
> 
> 标签：linux, amazon-ec2, storage

我在使用几乎所有 8GB 存储空间的 EC2 时遇到问题。我会定期从服务器中删除日志文件以及由 cronjobs 在用户文件夹中创建的文件（我可以将其关闭吗？），但过去删除所有文件后空间总是更少。所以 EC2 在其他地方创建文件，但我不知道在哪里。

有人知道我在哪里可以查找由 Amazon Linux AMI 或 apache 自动创建的未使用文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:22:17.567

看看`/var/log`，对于 Apache，他们可能会在`/var/log/httpd`. 我还建议您查看[logrotate](http://iain.cx/src/logrotate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-04T09:22:30.313

您可以使用此命令从您的 ec2 Ubuntu 实例中清除所有日志文件

`sudo rm -rf /opt/bitnami/apache2/logs/`

# c# - 将Excel公式转换为c#（年金）

> ID：13457843
> 
> 赞同：2
> 
> 时间：2012-11-19T16:17:38.437
> 
> 标签：c#

我有一个 excel 公式，我试图将其“翻译”成 c# 代码。

它用于计算一段时间内的“年金率”（例如 20 年）。

```
=(((1+E26/100)^D28*((1+E26/100)-1))/((1+E26/100)^D28-1))*100 
```

*D28 = 20*（年）

*E26 = 5,00*（百分比）

***^**代表 Excel 中的指数*

由于这些数字，我预计每年 8.02%。

我尝试了几种使用 Math.Pow 的方法，但没有成功。

这是我的第一种方法，它以某种方式给了我 5 的结果。

```
double usagePanels = 20.0
double rate = 5.0
annPanels = (Math.Pow((1 + rate / 100), usagePanels) *
           ((1 + rate / 100) - 1) /
           Math.Pow(1+rate/100, (usagePanels-1))) * 100; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:24:20.383

这应该可以解决问题：

```
double rate = 5;
double years = 20;
double annunity = Math.Pow(1 + rate / 100, years) * (rate / 100) / Math.Pow(1 + rate / 100, years - 1) * 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:46:49.243

尝试：

```
double usagePanels = 20.0
double rate = 5.0
double annPanels = (Math.Pow((1 + rate / 100), usagePanels) *
         (rate / 100.0)) /
         Math.Pow(1+rate/100, usagePanels)-1)) * 100; 
```

你有右括号，在`usagePanels`和之间`-1`，错误......

（我通过在 Excel 和 C# 中拆分公式并比较每个部分来发现这一点。）

编辑：将 Excel 与 C# 进行比较的另一个方便的技巧是为 Excel 中的单元格命名（通过命名范围功能），这样可以使 Excel 公式看起来更接近变量名......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T16:58:41.537

为了清楚起见，工作结果是

```
double usagePanels = 20.0
double rate = 5.0
annPanels = (Math.Pow((1 + rate / 100), usagePanels) *
       ((1 + rate / 100) - 1) /
       (Math.Pow(1+rate/100, (usagePanels))-1)) * 100; 
```

感谢 Jason Allen 和 Grhm，他们基本上想通了并给出了很好的建议。

# php - 需要 404 而不是警告：未知：无法打开流：权限在具有 XX0 权限的页面上的第 0 行上的未知中被拒绝

> ID：13457845
> 
> 赞同：1
> 
> 时间：2012-11-19T16:17:39.130
> 
> 标签：php, apache, configuration, permissions, http-status-code-404

在 Mac Web 服务器上使用 PHP 版本 5.3.15 和 Apache 2。

不久前（已经好几年了）我有这个工作正常，我不知道发生了什么变化，所以我想知道是否有人有解决方案。

我想要发生的是，当浏览器从我们的服务器调用每个人插槽中具有“0”权限的文件（即 770、640 等）时，用户会收到 404 或找不到页面。现在，如果打开每个人都为 0 的文件，浏览器中会显示以下内容：

**警告：未知：无法打开流：第 0 行未知中的权限被拒绝致命错误：未知：无法打开所需的“/*站点路径*/www/membership/donate_vehicle.php”（include_path='.:'）在线未知0**

示例：[http ://wfsu.org/membership/donate_vehicle.php](http://wfsu.org/membership/donate_vehicle.php)

有谁知道如何在那里制作404页面？它必须是配置或其他东西，因为就像我说的那样，在我们的旧服务器上就是这种方式，这是一台运行旧版本 PHP 和 Apache 的旧 Mac 服务器，只是不确定是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:45:35.820

```
$myfile = '/path/to/file.php';

if( file_exists($myfile) && is_readable($myfile) ) {
    require($myfile);
} else {
    // do 404 stuff
} 
```

# drupal-7 - 显示节点类型

> ID：13457854
> 
> 赞同：0
> 
> 时间：2012-11-19T16:18:04.437
> 
> 标签：drupal-7

> 我的 drupal 7 站点中有一些自定义页面。我需要在每个页面中显示内容类型的名称。我应该使用什么函数来显示内容类型的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:44:25.953

您可以从主题中的 node.tpl.php 打印出内容类型。$node 对象被传递给 node.tpl.php 文件，你只需要回显出`<?php echo $node->type; ?>`你想要它显示的位置。

# forms - 填写浏览器表单的脚本

> ID：13457855
> 
> 赞同：6
> 
> 时间：2012-11-19T16:18:05.500
> 
> 标签：forms, batch-file, fill

我有一点业务问题，我需要编写一个脚本来填写（而不是发送）浏览器表单（只有简单的文本字段、复选框和下拉框）。

我需要使用不同数据启动具有相同表单的多个窗口以加快表单填写

1.  我需要使用什么样的脚本/编程来满足这些需求（批处理、JS ..）？
2.  我只了解 java 和基本的 html、c、c++ ......所以如果我能获得基本教程，我将不胜感激。

我对如何实现这一点有一些想法——通过页面上各个字段的 ID，我可以访问这些字段来编辑它们的值，所以我只需要特定于语言的教程/建议。

如果可能，批处理会更好，因为我需要通过 java swing 程序执行脚本。

PS：如果这有任何相关性，只有浏览器可以接受的是 IE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:24:30.053

不要认为它可能通过批处理，

我认为最简单的方法是完成这项任务的 javaScript。（chill js 很简单）

您可以编写一个简单的 javaScript 来填写表格 您应该会发现[如何通过 javaScript 填写表格](https://stackoverflow.com/questions/4683331/how-to-fill-in-form-field-and-submit-using-javascript)很有帮助

然后您可以使用`ScriptEngineManager`从您的 java 代码执行 javaScript。

本教程应该会有所帮助：[从 java 执行 javascript](http://metoojava.wordpress.com/2010/06/20/execute-javascript-from-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:59:44.433

您不能使用批处理文件填充 HTML 字段。最简单的方法是在 Mozilla Firefox中使用 Javascript 和[Greasemonkey 。](https://addons.mozilla.org/de/firefox/addon/greasemonkey/)[您可以在此处](http://wiki.greasespot.net/Tutorials)找到教程。

将数据发送到 WebServer 的另一种方法是在 C/C++/Java 套接字和 HTML 协议中使用。

# java - Apache公共集合的奇怪问题

> ID：13457859
> 
> 赞同：5
> 
> 时间：2012-11-19T16:18:16.107
> 
> 标签：java, eclipse, apache-commons

我不确定这个问题的原因是什么，但我从早上开始就面临这个问题，似乎我做错了什么或者我的 Eclipse IDE 做错了什么

我已经包含了 Apache commom 集合是我使用 maven 的项目，如下所示

```
<dependency>
   <groupId>commons-collections</groupId>
   <artifactId>commons-collections</artifactId>
   <version>3.2.1</version>
</dependency> 
```

正确包含依赖关系，但是当我尝试使用以下收集工具时

```
MapUtils.isEmpty(java.util.Map map) 
or
MapUtils.isNotEmpty(java.util.Map map) 
```

它们没有显示在编辑器中，我可以在 MapUtil 下看到的唯一方法是

```
invertMap(java.util.Map map) 
```

我检查 Eclipse 中的导入语句及其

```
import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.collections.MapUtils; 
```

不知道哪里出了问题，因为我已经多次使用上述实用方法，有没有人有任何线索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:20:50.590

您确定您使用的是 3.2.1 吗？检查导入的来源。您可能有一些冲突，因为您的一个库正在导入另一个版本的 apache.commons。

尝试导入“org.apache.commons.collections.MapUtils”，看看是否还有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:28:43.083

您的导入是正确的。CollectionUtils ( [http://commons.apache.org/collections/apidocs/index.html?org/apache/commons/collections/CollectionUtils.html](http://commons.apache.org/collections/apidocs/index.html?org/apache/commons/collections/CollectionUtils.html) ) 有方法

```
CollectionUtils.isEmpty(java.util.Map map) 
CollectionUtils.isNotEmpty(java.util.Map map) 
```

您只是在寻找错误的类 MapUtils。

# php - 让 OpenX（广告软件）republish.php 工作

> ID：13457860
> 
> 赞同：0
> 
> 时间：2012-11-19T16:18:18.363
> 
> 标签：php, openx

我正在尝试运行 republish.php（OpenX 的一部分）来重新处理一些统计数据。当我这样做时，我收到以下错误：

C:\apache\htdocs\scripts\maintenance\tools>C:\php\php.exe -f republish.php 'ads. ourdomain.ca''2012-11-09 01:00:00'''2012-11-12 14:00:00'

传递到 republish.php 脚本的结束日期不是有效的操作间隔结束日期。请以 '%Y-%M-%d %H:%m:%s' 格式输入结束日期。

republish.php 脚本将不会运行。

我已经查看了 PHP 日期/时间函数，我认为我的日期/时间格式正确，所以我不明白为什么脚本拒绝运行。其他人有任何建议或经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:23:16.320

我弄清楚了这个问题。结束日期必须是 2012-11-12 14:59:59 （基本上是小时结束而不是下一小时的开始）

# php - 如何将表单数据发送到外部数据库并进行处理？

> ID：13457861
> 
> 赞同：-2
> 
> 时间：2012-11-19T16:18:20.993
> 
> 标签：php, mysql

在一个站点中`www.example.com`，我有一个表格。它被处理并存储在其数据库中。

是否可以将此表单数据也发送到另一个站点（`www.client-site.com`）？它位于不同的服务器上。这个**客户站点**应该接收数据并将其存储在自己的数据库中。

我不确定术语以及我应该一直在寻找什么。
在 SO 中测试了不同的搜索查询，这是最相似的：
[`[php] [mysql] +form +"$_post" +external`](https://stackoverflow.com/search?q=%5Bphp%5D+%5Bmysql%5D+%2Bform+%2B%22%24_post%22+%2Bexternal&submit=search)

我想用 PHP 开发这个，数据库运行 MySQL，在这个数据事务中，安全性当然很重要。

并希望这不是[SOAP](http://en.wikipedia.org/wiki/SOAP)问题... ;)

**理由**：

*   `www.example.com`运行我的一个客户的迷你网站
*   `www.client-site.com`是客户端主站点
*   作为一家大公司，他们无法向我提供其主站点数据库的凭据
*   我必须提出一个替代解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:22:42.877

如果您在 www.example.com 上托管了这样的表单：

```
<form method="post" action="http://www.client-site.com/handler.php">
    ... 
```

然后页面`http://www.client-site.com/handler.php`将能够访问帖子变量。

这就是为什么在您自己的 PHP 应用程序中验证您的帖子数据很重要的原因，因为您永远无法确定数据来自哪里，因此无法信任它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:23:10.823

您将需要在站点 b 上拥有类似 web 服务（这是您正在寻找的词）之类的东西，您可以从站点 a 中的代码中使用它。

SOAP 是创建 Web 服务的一种可能性，但还有许多其他可能性。一个显示在stackoverflow的[这个答案中。](https://stackoverflow.com/questions/4684075/how-to-build-a-restful-api)

永远不要尝试使用表单和 cURL 之类的东西来归档它！

此外，您应该在端点（站点 b）上寻找适当的授权，并确保使用 ssl，因为安全性对您很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T17:34:43.593

我能想到一个非常丑陋的解决方案来解决问题:)

```
 <script language="JavaScript">
function submitForm(theform) {
theform.action = "SITE ONE";
theform.target="myframe1";
theform.submit();

theform.target="";
theform.action = "SITE2";
theform.submit();

}
</script>

<html>
<body>
<form action="" onSubmit="submitForm(this); return false;">
<input type="text" name="userName" value="" />
<input type="Submit" />
</form>
<IFRAME name="myframe1" src="about:blank" width="0"
height="0"></IFRAME>
</body>
</html> 
```

这不是那么传统，但会成功！看看这个 ：）

# python - 是否有一个 Python 模块可以在没有网格的情况下对数据进行轮廓分析

> ID：13457862
> 
> 赞同：1
> 
> 时间：2012-11-19T16:18:23.397
> 
> 标签：python, plot

我试图在不首先对数据进行网格化的情况下对一组不规则间隔的数据（在本例中为 2D 轮廓）进行轮廓化。数据是从模型输出的，我希望轮廓完全符合基础数据。是否有具有此功能的 Python 模块，可能使用 Delaunay 三角测量？理想情况下，我可以将轮廓导出为 shapefile，但可能可以使用 matplotlib 图或类似图。如果我无法在 Python 中弄清楚，也可以使用其他开源方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:28:14.150

看一看 @

匀称[https://github.com/sgillies/shapely](https://github.com/sgillies/shapely) 和

scipy Delaunay¶ [http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.Delaunay.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.Delaunay.html)

# android - 操作栏 Sherlock 列表导航文本颜色

> ID：13457863
> 
> 赞同：1
> 
> 时间：2012-11-19T16:18:25.097
> 
> 标签：android, actionbarsherlock

使用 Action Bar Sherlock 时，有什么方法可以更改 ActionBar 列表导航的文本颜色？我发现了几篇关于更改标题颜色的帖子，但如果之前有人问过，这没什么好抱歉的。

在常规操作栏上工作正常，但在设备上预蜂窝时，文本是黑底黑字，这使得它不可读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:19:59.387

我知道您想更改文本颜色。我假设这是因为黑色/黑色文本或黑色文本上的深灰色文本。

如果是这样，我找到了一个修复预蜂窝设备的解决方案，这些设备存在区分深色文本上的深色的问题

当您声明 SpinnerAdapter 使用： R.layout.sherlock_spinner_item 或 R.layout.sherlock_spinner_dropdown_item

这对我修复蜂窝前设备以及与蜂窝后设备相同的主题很有用。

```
SpinnerAdapter adapter = ArrayAdapter.createFromResource(this, R.array.navigationArray, R.layout.sherlock_spinner_dropdown_item);
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
getSupportActionBar().setListNavigationCallbacks(adapter, this); 
```

来源：[https ://github.com/JakeWharton/ActionBarSherlock/issues/268](https://github.com/JakeWharton/ActionBarSherlock/issues/268)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:51:26.057

You need create your own example custom_spinner_item

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee" /> 
```

and then the dropdown resource custom_spinner_dropdown_item

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?attr/dropdownListPreferredItemHeight"
    android:ellipsize="marquee" /> 
```

you need change the sytle for you own or take the action bar sherlock and modify. an then in your adapter use:

```
 Context context = getSupportActionBar().getThemedContext();
        ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, custom_spinner_item);
        list.setDropDownViewResource(R.layout.custom_spinner_dropdown_item); 
```

with this you are done ;) this should be used on pre honeycomb:

```
 Context context = getSupportActionBar().getThemedContext();
        ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, R.layout.sherlock_spinner_item);
        list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:30:28.177

```
//in arrays.xml
    <string-array name="solidsFoodSelectionType">
        <item>recent</item>
        <item>all</item>
    </string-array>

//in your class
Context context = getSupportActionBar().getThemedContext();
        String[] typeOfselectionSelected = getResources().getStringArray(R.array.solidsFoodSelectionType);
        typeOfselectionSelectedAdapter = new ArrayAdapter<String>(context,android.R.layout.simple_spinner_dropdown_item,typeOfselectionSelected);
        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        getSupportActionBar().setListNavigationCallbacks(typeOfselectionSelectedAdapter, this); 
```

# xcode - 权利与配置文件不匹配是什么意思？

> ID：13457866
> 
> 赞同：2
> 
> 时间：2012-11-19T16:18:40.463
> 
> 标签：xcode, macos, code-signing, xcode4.5

我正在尝试通过 Xcode 归档过程将 MacApp Store 应用程序提交到 iTunesConnect。但无论出于何种原因，我无法弄清楚，我仍然收到此消息。

> 无效的代码签名权利。您的应用程序包签名中的权利与配置文件中包含的权利不匹配。该捆绑包包含一个未包含在配置文件中的密钥：“MyApp.app/Contents/MacOS/MyApp”中的“com.apple.application-identifier”。

我已经在 stackoverflow 上阅读了所有可能相关的问题，但没有成功。这让我疯狂了几个小时！

谢谢！

# c++ - 在堆栈 C++ 上创建的对象中的无效数据

> ID：13457871
> 
> 赞同：1
> 
> 时间：2012-11-19T16:18:48.337
> 
> 标签：c++, oop, pointers, heap-memory, stack-memory

对于这个问题，我真的找不到更好的标题。

我有三个类`CheckBox`：`Button`和`Background`。

```
class CheckBox : public Component
{
private:
    Button m_button;
public:
    CheckBox(const Point &pos, int width, int height, std::string text);
    CheckBox();
};

CheckBox::CheckBox(const Point &pos, int width, int height, string text) : 
    Component(pos, width, height),
    m_button(Button(Point(width-height,0), new Background("button_bg_sample.png", true), new Background("button_bg_onclick_sample.png", true), height, height, 10, "")),
{

}

class Button : public Component
{
private:
    std::string m_text;
    Background* m_pBackground;
    Background* m_pBackgroundOnClick;
    int m_fontSize;
public:
    Button(const Point& pos, Background* pBg, Background* pBgOnClick, int width, int height, int fontSize, std::string title);
    ~Button();

};

Button::Button(const Point& pos, Background* pBg, Background* pBgOnClick, int width, int height, int fontSize, string title) : 
    Component(pos, width, height), 
    m_pBackground(pBg),
    m_pBackgroundOnClick(pBgOnClick),
    m_fontSize(fontSize),
    m_text(title)
{
}

class Background
{
private:
    std::string m_pFileName;
    bool m_bTiling;
    std::vector<unsigned char> m_pImageData;
    unsigned int m_width;
    unsigned int m_height;
    GLuint m_texture; 

    bool load(const std::string& pFileName);
public:
    Background(const std::string& pFileName, bool bTiling);
    ~Background();

    bool draw(const Point &pos, unsigned int width, unsigned int height);
    bool draw(const Point &pos);
};

Background::Background(const string& pFileName, bool bTiling) : 
    m_bTiling(bTiling), 
    m_pFileName(pFileName)
{
    load(pFileName);
} 
```

如您所见，`CheckBox`类包括`Button m_button`和`Button`类包括`Background* m_pBg`。在`Background`构造函数中，我加载图像数据并将其存储在 中`std::vector`，这并不重要 - 我知道它正在工作，因为它已经被检查过。

当我创建`CheckBox`对象时，其中的数据`m_button`已损坏。当我尝试在调试模式下检查图像数据中的内容时，我得到的信息是它是空的，并且该背景的文件名是`"Error reading characters in string"`. 虽然当我在调试模式下逐步看到代码时，我已经看到数据已在构造函数中正确加载，但不知何故，当创建对象时，数据已经损坏。

当我将类中的`m_button`字段更改`CheckBox`为在堆上创建时（指针`Button`，使用`new`运算符创建的对象），一切似乎都工作得很好。数据正在正确加载并保持这种状态。

谁能解释一下这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:21:47.847

问题是你没有遵守[三的规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

班级`Button`自己管理记忆，因此当您创建副本或分配作业时，您可能会遇到麻烦。我没有深入研究代码，所以不能确定这是根源（尽管如此，这是一个问题），但我很确定它是。

如果您使用智能指针而不是原始指针来管理资源，这一切都可以避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:14:44.513

您在构造函数`Button`的初始化列表中的堆栈上创建`CheckBox`的内容被复制到`m_button`字段：

```
m_button = Button(); 
```

默认 =operator 正在做的是将新创建`Button`的对象中的每个字段复制到`m_button`：

```
m_button.height = b.height // Let's assume, that 'b' is the name of this new Button
m_button.width = b.width
m_button.name = b.name
... 
```

现在，如果您有一个指向`p1`某个对象的指针并且您有另一个指针`p2`并分配给`p1`会发生`p2`什么？

```
int* p1 = new int(5);
int* p2 = p1; 
```

两个指针现在都指向同一个对象！同样的事情也发生在你的`Background*`. 您有两个`Button`s 指向`Background`内存中某处的同一个对象。但是您`Button`在初始化列表中创建的第二个正在被破坏，因为它超出了范围，并且可能（因为我没有看到您的`Button`类的析构函数）正在发生什么，您正在破坏析构函数`Background`中的对象`Button`。这就是为什么当您在调试模式下跟踪代码时，您会看到正确创建`Background`的，但后来它被`Button`对象破坏了。

# java - 日志输入流

> ID：13457874
> 
> 赞同：1
> 
> 时间：2012-11-19T16:18:58.253
> 
> 标签：java, logging, inputstream

你知道任何记录 InputStream 的巧妙解决方案，可以通过文件。来自 Process 的 InputStream 永远不会结束并不时生成一些流。谢谢巴特克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:43:37.750

对于你的情况是最合适的`log4j`。

但是您可以重定向`System.err`并`System.out`进入控制台或其他smth，它将在特定流中写入所有错误。

**更新：**

```
# Root logger option log4j.rootLogger=INFO, file, stdout  
# Direct log messages to a log file log4j.appender.file=org.apache.log4j.RollingFileAppender log4j.appender.file.File=C:\\loging.log log4j.appender.file.MaxFileSize=1MB log4j.appender.file.MaxBackupIndex=1 log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L
- %m%n  
# Direct log messages to stdout log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.Target=System.out log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:39:48.097

如果您想透明地记录永无止境的流-我相信您需要一个 Tee 过滤器-请参阅此[问题](https://stackoverflow.com/questions/6043634/is-there-a-simple-tee-filter-for-java-streams)中的答案。例如，您可以使用 Commons IO。

# visual-studio - 如何指定 VisualStudio 2012 项目依赖于另一个的两个配置？

> ID：13457875
> 
> 赞同：0
> 
> 时间：2012-11-19T16:19:02.720
> 
> 标签：visual-studio, msbuild, wix, visual-studio-2012, burn

我有一个 VisualStudio 2012 解决方案，由一堆 C++ 项目组成，每个项目都有一个*调试*/*发布*配置和*x64* / *Win32*平台。所以我最终得到了四个可执行文件：

*   调试-Win32.exe
*   调试-x64.exe
*   发布-Win32.exe
*   发布-x64.exe

其中，我使用 WiX 项目从 * *Release*配置输出创建安装程序：

*   发布-Win32.exe -> 安装程序-Win32.msi
*   发布-x64-exe -> 安装程序-x64.msi

然后，我有一个 WiX 刻录引导程序项目，将它们链接到单个引导程序可执行文件中。引导程序选择正确的 MSI 为平台运行。

我的问题是引导程序项目依赖于安装程序项目的*Win32*和*x64*目标平台。

现在，我需要在构建引导程序之前手动触发这些平台配置的构建。有没有办法（通过手动编辑 msbuild 脚本）在两个目标平台配置上创建构建依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:50:38.270

在 MSBUILD 文件 (TFSBuild.proj) 中添加要构建的两种风格，这将解决问题。

```
<ConfigurationToBuild Include="Release|Win32">
  <FlavorToBuild>Release</FlavorToBuild>
  <PlatformToBuild>Win32</PlatformToBuild>
</ConfigurationToBuild>
<ConfigurationToBuild Include="Release|x64">
  <FlavorToBuild>Release</FlavorToBuild>
  <PlatformToBuild>x64</PlatformToBuild>
</ConfigurationToBuild> 
```

这将确保您的应用程序将基于两种风格构建，并且输出（MSI 或 exe）应该存在于适当的文件夹中。您的刻录包可以从文件夹中获取。

# iphone - 带有图像和标题的 UISegmentedControl

> ID：13457876
> 
> 赞同：7
> 
> 时间：2012-11-19T16:19:05.883
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uisegmentedcontrol

我正在使用一个`UISegmentedControl`内部`UIToolBar`按钮。我不能使用 normal `UIButtonBarItem`，因为我需要设置`tintColor`并支持 iOS 4.3。所以我使用以下代码：

```
UISegmentedControl* searchButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"", nil]];
[searchButton setImage:[UIImage imageNamed:@"search_picto"] forSegmentAtIndex:0];
searchButton.momentary = YES;
searchButton.segmentedControlStyle = UISegmentedControlStyleBar;
searchButton.tintColor = [UIColor colorWithRed:0.27 green:0.60 blue:0.20 alpha:1.00];
[searchButton addTarget:self action:@selector(actionSearch:) forControlEvents:UIControlEventValueChanged]; 
```

这很好用，但是有没有办法在我的图像旁边有一个文本/标题？方法 setTitle: 删除图像。一定有别的办法...

谢谢你的帮助。

--

编辑：我决定将文本直接添加到`UIImageView`这样的：

```
NSString* label = @"My Label";
UIImage* image = [self addText:label toImage:[UIImage imageNamed:@"icon"]];
[_segmentedControl insertSegmentWithImage:image atIndex:0 animated:NO];
[_segmentedControl setWidth:image.size.width + 10]; // add some margin on the right

- (UIImage *)addText:(NSString *)text toImage:(UIImage *)image {
    UIFont* font = [UIFont boldSystemFontOfSize: 12];
    CGSize expectedSize = [text sizeWithFont:font];

    [self retinaAwareUIGraphicsBeginImageContext:CGSizeMake(image.size.width + expectedSize.width + 10, image.size.height)];
    [image drawAtPoint: CGPointZero];
    [[UIColor whiteColor] set];
    [text drawAtPoint: CGPointMake(30, 2) withFont:font];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

- (void)retinaAwareUIGraphicsBeginImageContext:(CGSize) size {
    CGFloat scale = -1.0;
    if (scale<0.0) {
        UIScreen *screen = [UIScreen mainScreen];
        if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 4.0) {
            scale = [screen scale];
        }
        else {
            scale = 0.0;
        }
    }
    if (scale>0.0) {
        UIGraphicsBeginImageContextWithOptions(size, NO, scale);
    }
    else {
        UIGraphicsBeginImageContext(size);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-26T06:51:24.430

你能行的：

为 UIImage 添加类别：

*在 UIImage+UISegmentIconAndText.h*

```
@interface UIImage (UISegmentIconAndText)

+ (id) imageFromImage:(UIImage*)image string:(NSString*)string color:(UIColor*)color;
+ (id) imageFromImage:(UIImage*)image string:(NSString*)string color:(UIColor*)color position:(NSString*)position;

@end 
```

在*UIImage+UISegmentIconAndText.m*

```
#import "UIImage+UISegmentIconAndText.h"

@implementation UIImage (UISegmentIconAndText)
+ (id) imageFromImage:(UIImage*)image string:(NSString*)string color:(UIColor*)color
{
    UIFont *font = [UIFont systemFontOfSize:16.0];
    CGSize expectedTextSize = [string sizeWithAttributes:@{NSFontAttributeName: font}];
    int width = expectedTextSize.width + image.size.width + 5;
    int height = MAX(expectedTextSize.height, image.size.width);
    CGSize size = CGSizeMake((float)width, (float)height);
    UIGraphicsBeginImageContextWithOptions(size, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, color.CGColor);
    int fontTopPosition = (height - expectedTextSize.height) / 2;
    CGPoint textPoint = CGPointMake(image.size.width + 5, fontTopPosition);

    [string drawAtPoint:textPoint withAttributes:@{NSFontAttributeName: font}];
    // Images upside down so flip them
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, size.height);
    CGContextConcatCTM(context, flipVertical);
    CGContextDrawImage(context, (CGRect){ {0, (height - image.size.height) / 2}, {image.size.width, image.size.height} }, [image CGImage]);
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
}
@end 
```

在您的代码中实现段：

```
UIImage *imageWithText = [UIImage imageFromImage:[UIImage imageNamed:@"images/jobaids_tab_icon"] string:@"Hello", nil) color:[UIColor whiteColor]];

[_segmentedController setImage:imageWithText forSegmentAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-05T06:59:28.967

**斯威夫特 4**

```
extension UIImage {

class func textEmbededImage(image: UIImage, string: String, color:UIColor, imageAlignment: Int = 0, segFont: UIFont? = nil) -> UIImage {
    let font = segFont ?? UIFont.systemFont(ofSize: 16.0)
    let expectedTextSize: CGSize = (string as NSString).size(withAttributes: [NSAttributedStringKey.font: font])
    let width: CGFloat = expectedTextSize.width + image.size.width + 5.0
    let height: CGFloat = max(expectedTextSize.height, image.size.width)
    let size: CGSize = CGSize(width: width, height: height)
    UIGraphicsBeginImageContextWithOptions(size, false, 0)
    let context: CGContext = UIGraphicsGetCurrentContext()!
    context.setFillColor(color.cgColor)
    let fontTopPosition: CGFloat = (height - expectedTextSize.height) / 2.0
    let textOrigin: CGFloat = (imageAlignment == 0) ? image.size.width + 5 : 0
    let textPoint: CGPoint = CGPoint.init(x: textOrigin, y: fontTopPosition)
    string.draw(at: textPoint, withAttributes: [NSAttributedStringKey.font: font])
    let flipVertical: CGAffineTransform = CGAffineTransform(a: 1, b: 0, c: 0, d: -1, tx: 0, ty: size.height)
    context.concatenate(flipVertical)
    let alignment: CGFloat =  (imageAlignment == 0) ? 0.0 : expectedTextSize.width + 5.0
    context.draw(image.cgImage!, in: CGRect.init(x: alignment, y: ((height - image.size.height) / 2.0), width: image.size.width, height: image.size.height))
    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return newImage!
}
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-08T12:13:11.703

**斯威夫特 5**

对于我们这些喜欢尽可能使用现代 API 的人：

```
extension UIImage {
    static func textEmbeded(image: UIImage,
                           string: String,
                isImageBeforeText: Bool,
                          segFont: UIFont? = nil) -> UIImage {
        let font = segFont ?? UIFont.systemFont(ofSize: 16)
        let expectedTextSize = (string as NSString).size(withAttributes: [.font: font])
        let width = expectedTextSize.width + image.size.width + 5
        let height = max(expectedTextSize.height, image.size.width)
        let size = CGSize(width: width, height: height)

        let renderer = UIGraphicsImageRenderer(size: size)
        return renderer.image { context in
            let fontTopPosition: CGFloat = (height - expectedTextSize.height) / 2
            let textOrigin: CGFloat = isImageBeforeText
                ? image.size.width + 5
                : 0
            let textPoint: CGPoint = CGPoint.init(x: textOrigin, y: fontTopPosition)
            string.draw(at: textPoint, withAttributes: [.font: font])
            let alignment: CGFloat = isImageBeforeText
                ? 0
                : expectedTextSize.width + 5
            let rect = CGRect(x: alignment,
                              y: (height - image.size.height) / 2,
                          width: image.size.width,
                         height: image.size.height)
            image.draw(in: rect)
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-16T03:50:35.200

对于斯威夫特。

**segFont**是嵌入文本的字体。

**imageAlignment**是出现在文本左侧或右侧的图像的对齐方式。

将**imageAlignment**设置为**0**用于左对齐（图像将出现在文本的左侧）和**1**用于右对齐（图像将出现在文本的右侧）

```
class func textEmbededImage(image: UIImage, string: String, color:UIColor, imageAlignment: Int = 0, segFont: UIFont? = nil) -> UIImage {

let font = segFont ?? UIFont.systemFontOfSize(16.0)

let expectedTextSize: CGSize = (string as NSString).sizeWithAttributes([NSFontAttributeName: font])

let width: CGFloat = expectedTextSize.width + image.size.width + 5.0

let height: CGFloat = max(expectedTextSize.height, image.size.width)

let size: CGSize = CGSizeMake(width, height)

UIGraphicsBeginImageContextWithOptions(size, false, 0)

let context: CGContextRef = UIGraphicsGetCurrentContext()!

CGContextSetFillColorWithColor(context, color.CGColor)

let fontTopPosition: CGFloat = (height - expectedTextSize.height) / 2.0

let textOrigin: CGFloat = (imageAlignment == 0) ? image.size.width + 5 : 0
let textPoint: CGPoint = CGPointMake(textOrigin, fontTopPosition)

string.drawAtPoint(textPoint, withAttributes: [NSFontAttributeName: font])
let flipVertical: CGAffineTransform = CGAffineTransformMake(1, 0, 0, -1, 0, size.height)
CGContextConcatCTM(context, flipVertical)

let alignment: CGFloat =  (imageAlignment == 0) ? 0.0 : expectedTextSize.width + 5.0
CGContextDrawImage(context, CGRectMake(alignment, ((height - image.size.height) / 2.0), image.size.width, image.size.height), image.CGImage)
let newImage = UIGraphicsGetImageFromCurrentImageContext()
UIGraphicsEndImageContext()

return newImage
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T20:15:33.773

**斯威夫特 3**

```
extension UIImage{

class func textEmbededImage(image: UIImage, string: String, color:UIColor, imageAlignment: Int = 0, segFont: UIFont? = nil) -> UIImage {
    let font = segFont ?? UIFont.systemFont(ofSize: 16.0)
    let expectedTextSize: CGSize = (string as NSString).size(attributes: [NSFontAttributeName: font])
    let width: CGFloat = expectedTextSize.width + image.size.width + 5.0
    let height: CGFloat = max(expectedTextSize.height, image.size.width)
    let size: CGSize = CGSize(width: width, height: height)
    UIGraphicsBeginImageContextWithOptions(size, false, 0)
    let context: CGContext = UIGraphicsGetCurrentContext()!
    context.setFillColor(color.cgColor)
    let fontTopPosition: CGFloat = (height - expectedTextSize.height) / 2.0
    let textOrigin: CGFloat = (imageAlignment == 0) ? image.size.width + 5 : 0
    let textPoint: CGPoint = CGPoint.init(x: textOrigin, y: fontTopPosition)        
    string.draw(at: textPoint, withAttributes: [NSFontAttributeName: font])
    let flipVertical: CGAffineTransform = CGAffineTransform(a: 1, b: 0, c: 0, d: -1, tx: 0, ty: size.height)
    context.concatenate(flipVertical)
    let alignment: CGFloat =  (imageAlignment == 0) ? 0.0 : expectedTextSize.width + 5.0
    context.draw(image.cgImage!, in: CGRect.init(x: alignment, y: ((height - image.size.height) / 2.0), width: image.size.width, height: image.size.height))
    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    return newImage!
}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-04T13:44:28.003

斯威夫特 5

我需要在右上角添加一个图像，所以我添加了 imageOffset。

```
extension UIImage {
  static func textEmbeded(image: UIImage, string: String, titleColor: UIColor, imageBeforeText: Bool, imageOffset: CGPoint, segFont: UIFont? = nil) -> UIImage {
    let font = segFont ?? UIFont.systemFont(ofSize: 16)
    let expectedTextSize = (string as NSString).size(withAttributes: [.font: font])
    let width = expectedTextSize.width + image.size.width +
                max(0, imageBeforeText ? imageOffset.x * -1 : imageOffset.x)
    let height = max(expectedTextSize.height, (image.size.height / 2 + abs(imageOffset.y)) * 2)
    let size = CGSize(width: width, height: height)

    let renderer = UIGraphicsImageRenderer(size: size)
    return renderer.image { context in
      let textTopPosition: CGFloat = (height - expectedTextSize.height) / 2
      let textLeftPosition: CGFloat = imageBeforeText ? image.size.width - imageOffset.x : 0
      let textPoint: CGPoint = CGPoint.init(x: textLeftPosition, y: textTopPosition)
      string.draw(at: textPoint, withAttributes: [.font: font, .foregroundColor: titleColor])

      let imageLeftPosition: CGFloat = imageBeforeText ? 0 : expectedTextSize.width + imageOffset.x
      let imageTopPosition: CGFloat = (height - image.size.height) / 2 + imageOffset.y
      let imageRect = CGRect(x: imageLeftPosition,
                             y: imageTopPosition,
                         width: image.size.width,
                        height: image.size.height)
      image.draw(in: imageRect)
    }.withRenderingMode(.alwaysOriginal)
  }
} 
```

*   图像重叠文本未实现
*   当 imageBeforeText 为真时，减去 x 偏移量意味着图像和文本之间的空间更大。
*   与 RenderingMode(.alwaysOriginal) 一起使用以获取文本和图像的不同颜色

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-11-19T18:58:27.870

试试这个：

```
UISegmentedControl* searchButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"", nil]];
[searchButton insertSegmentWithImage:[UIImage imageNamed:@"up_button.png"] atIndex:0 animated:YES];
[searchButton insertSegmentWithImage:[UIImage imageNamed:@"down_button.png"] atIndex:1 animated:YES];
searchButton.segmentedControlStyle = UISegmentedControlStyleBar;
searchButton.tintColor = [UIColor colorWithRed:0.27 green:0.60 blue:0.20 alpha:1.00];
[searchButton setMomentary:YES]; 
```

# gwt - GWT Google Charts - x 值以分钟为单位 - 如何将 x 轴标签格式化为小时？

> ID：13457880
> 
> 赞同：1
> 
> 时间：2012-11-19T16:19:17.443
> 
> 标签：gwt, google-visualization

我正在尝试绘制一个图表，其中 x 值表示持续时间内的分钟数。

我想显示*小时数*作为标签，当我悬停图表（显示工具提示）时，我不想看到一些代表小时（1.5）的十进制值，而是一个格式良好的时间（ 1h 30m) 或分钟数 (90m)。

我一直在阅读有关 DataTable 中的注释列的信息，但在我看来，GWT 包装器尚不支持这一点。

不过，我不知道这是否可能实现，但如果可以，请告诉我如何！

示例代码：

```
DataTable dataTable = DataTable.create();
dataTable.addColumn(ColumnType.NUMBER, "Time");
dataTable.addColumn(ColumnType.NUMBER, "Value");
dataTable.addRow();
dataTable.setValue(0, 0, 0);
dataTable.setValue(0, 1, 100);
dataTable.addRow();
dataTable.setValue(1, 0, 45);
dataTable.setValue(1, 1, 1000);
dataTable.addRow();
dataTable.setValue(2, 0, 90);
dataTable.setValue(2, 1, 5000);

Options options = LineChart.createOptions();
AxisOptions hAxisOptions = AxisOptions.create();
hAxisOptions.set("format", "#min");
options.setHAxisOptions(hAxisOptions);

options.setInterpolateNulls(true);
options.setCurveType("function");

container.clear();
container.add(new LineChart(dataTable, options)); 
```

![带有注释的示例图](../Images/e62bcbfda9e92f055abdb0ac10d36c6a.png)

# ruby-on-rails - 多个硬盘驱动器上的导轨？

> ID：13457882
> 
> 赞同：0
> 
> 时间：2012-11-19T16:19:32.450
> 
> 标签：ruby-on-rails

有没有办法将 Rails 配置为跨多个硬盘驱动器工作？我的 F: 驱动器上安装了 Ruby 和 Rails，但我的项目存储在 G: 驱动器上。因此，当我尝试打开我正在开发的网站时，我收到以下错误：

```
different prefix: "F:/" and "G:/" 
```

关于其中一个样式表。有什么办法可以解决这个问题，还是我需要将所有内容存储在同一个驱动器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:27:56.117

如果您使用的是 Windows 7 或 Vista，则可以使用该`mklink`命令创建从一个目录到另一个目录的符号链接，即使它们位于不同的硬盘驱动器上。

# javascript - 将代码拆分为函数

> ID：13457886
> 
> 赞同：0
> 
> 时间：2012-11-19T16:19:38.360
> 
> 标签：javascript, jquery, oop, function

由于性能和其他问题，我想将我的代码拆分为单独的函数，就像以前它只是一个大的“.ready”函数一样。

我是 javaScript/jquery 的新手，但我想我自己会试一试。我已经完全按照我认为的方式完成了，但是我的控制台告诉我事情是未定义的，所以我猜我的事情超出了范围。我已经更详细地阅读了它，但仍然没有得到任何地方。

我的代码目前工作正常，但我想养成干净编码的习惯。有人可以指出我哪里出错了，所以我可以继续自己吗？

这是我到目前为止的一个例子

```
//Global variables
var randomWord = [];
var listOfWords = [];
var populationNumber = [];
var attemptNumber = [];
var completionNumber = [];
var gridSize = [];

generateGrid();

startMusic();

randomizeReward();

//Click event to start the game
$(".start-btn-wrapper").click(function () {
    startplay();
});
//Click event to restart the game
$(".restart-btn").click(function () {
    restartplay();
}); 
```

谢谢

小提琴：http: [//jsfiddle.net/QYaGP/](http://jsfiddle.net/QYaGP/)

摆弄 HTML：http: [//jsfiddle.net/QYaGP/1/](http://jsfiddle.net/QYaGP/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:51:04.403

如果您担心性能，我会考虑使用 AngularJS 之类的框架。您可以注入模块化代码。更好的是，使用 MVC，您的视图将绑定到您的模型，因此通过更改模型，视图会自动更新。

另外，停止使用类选择器。使用 ID 选择器。他们要快得多。您还想预加载选择器（即使使用类选择器）。这样你只搜索 DOM 一次：

```
var ele = $('#elementId');

$(ele).doSomething(); 
```

这样，您就有了对 DOM 元素的引用。您可以使用数据结构将所有引用存储在全局范围之外：

```
var elementReferences = {}; //declaration
elementReferences.mainPage = {}; //use
elementReferences.mainPage.root = $('#mainPage'); //load the root div of a page segment
elementReferences.mainPage.title =   $(elementReferences.mainPage.root).children('#title'); //load the title 

elementReference.mainPage.form = $(elementReferences.mainPage.root).children('#form'); //load the form 
```

现在你可以这样做：

```
$(elementReference.mainPage.form).whatever(); 
```

它不必在 DOM 中搜索元素。这对于较大的应用程序特别有用。

如果您在 document.ready 中放置一个函数，按照您的小提琴，您只能在 document.ready 调用范围内访问该函数。您真的希望能够在所需的范围内根据需要动态加载/卸载函数，这就是 angularjs 发挥作用的地方。

在大多数情况下，您还希望从全局范围中删除您的函数和变量，并将它们放入按它们的依赖项和使用排序的容器中。这是面向对象编程 101。与其将一堆数组放在全局范围内，否则它们可能会被其他开发人员错误地覆盖，而是希望将它们放在一个容器中：

```
var arrays = {}; //create the object

arrays.whatever1 = [];
arrays.whatever2 = []; 
```

显然，您可能需要一个比“数组”更具描述性的名称。函数的工作方式相同：

```
var ajax = {}; //ajax object
var ajax.get = function(){
};
var ajax.post = function(){
};
var ajax.delete = function(){
}; 
```

这通常会促进更简洁的代码，这些代码更可重用且更易于维护。您希望在实际开始开发之前花费大量时间编写一个完整记录整体架构的规范。如果你能帮上忙，千万不要急于求成。花时间彻底研究和规划大局以及一切如何组合在一起，而不是试图随心所欲地解决它。当你这样做时，你花更少的时间重新发明轮子。

它是由 google 开发的，所以它应该已经存在了一段时间。我不确定您是否是负责系统架构的人，但如果性能/可重用性是您公司的一个问题，那么绝对值得一看。我非常乐意向您介绍我在软件架构和工程方面所知道的大部分内容。如果你有兴趣，就给我留言。总是乐于助人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:32:13.307

您需要开始将一些信息传递到您定义的函数中。如果您的函数都没有参数，那么您将不得不使用全局定义的变量、对 jquery 选择的硬编码引用等才能完成任何事情。

举个例子，你有一个功能

```
function replaySound() {
    $("#hintSound").attr('src', listOfWords[randomWord].hintSound);
    hintSound.play();
} 
```

这实际上是`listOfWords[randomWord]`通过 element播放详细的声音`#hintSound`。您可以通过以下方式做到这一点：

```
function playSound(selector, wordlistEntry) {
    $(selector).attr('src', wordlistEntry.hintSound);
    $(selector)[0].play();
} 
```

然后你会打电话而不是`replaySound()`打电话：

```
playSound('#hintSound', listOfWords[randomWord]); 
```

这样，您想要的*行为*被包含在函数中，但是*细节*，即您需要的数据，是通过参数传入的。这允许您重用该功能以使用任何选择器播放任何声音，而不仅仅是`#hintSound`.

当您这样做时，您会发现您需要开始选择函数将在调用它的代码中执行的操作，而不是在函数中。这很好，因为您尝试实现的上下文存在于调用代码中，而不是函数中。这被称为“关注点分离”；您尝试将给定事物的逻辑限制在一个区域，而不是将其分散在许多功能中。但是您仍然希望函数允许您封装行为。这使您可以干净而轻松地更改行为，而不必在每次逻辑的某些部分更改时都重写所有内容。

结果应该是你发现几个函数实际上做了同样的事情，但细节不同，所以你可以只使用一个函数并重用它。这就是不要重复自己的原则，这也很重要。

# php - 无法连接到 Google 日历 PHP/API

> ID：13457892
> 
> 赞同：3
> 
> 时间：2012-11-19T16:20:02.780
> 
> 标签：php, calendar

祝大家有美好的一天:)

因此，我使用以下代码将事件插入到我的 Google 日历中。这一切都在上周奏效。这周，我造了一台新电脑，更新了所有的 PHP、MySQL 和 Apache。我现在收到错误“无法连接到日历”，您可以在此代码示例末尾看到一条自定义错误消息。脚本的其余部分处理数据处理和插入。

我已经通过在线示例检查了代码，并且它匹配。用户名和密码正确，我可以通过各种浏览器登录。谁能帮我恢复并运行它并允许我连接到日历？

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Calendar');

$user = 'valid@email.address.com';
$pass = '<removed>';
$service = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;

$calendar_user = "valid%40email.address.com"; // Also tried with @
//$calendar_visibility = "private-<removed>";

try {
    $client = Zend_Gdata_ClientLogin::getHttpClient($user,$pass,$service);          
    }
catch(Exception $e) {
    // prevent Google username and password from being displayed 
            // if a problem occurs
    echo "Could not connect to calendar.";
    die();
    } 
```

以供参考。这是一个干净的 Windows 7 安装，现在运行最新（2012 年 11 月）版本的 WAMP。我能够运行成功连接到远程数据库的本地 PHP 脚本。并且文件“Zend/Loader.php”以正确的路径存在。

非常感谢任何帮助。TIA

- - - 更新 - -

关闭自定义错误消息并得到这个：

```
 Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with message ' in C:\Program Files (x86)\wamp\www\www.domain.com\subdir\Zend\Gdata\App.php on line 709 
```

在最新的 WAMP 上运行。我启用了 SSL 模块，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:00:15.780

*解决了*

为了其他发现此内容的人的利益...

SSL 在 PHPinfo() 和 WAMP 仪表板中显示为未注释且完全受支持。但是，似乎需要明确告知 WAMP 已启用。在确保您实际安装了支持 SSL 的 WAMP/PHP 之后...

点击 WAMP 托盘 - PHP - 扩展 - [tick/enable] php_openssl.dll

重新启动 WAMP。

现在一切都像过去一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:42:10.943

只是猜测，但启用了 php_curl 吗？

我没有尝试，但我知道在 Windows 上使用一些 PHP dll（例如 php_curl.dll）几乎没有问题。如果可以的话，您可以尝试“真实”环境（LAMP）。

# typo3 - tt_news 标记“NEWS_CATEGORY”给我父类别和所有子类别

> ID：13457894
> 
> 赞同：0
> 
> 时间：2012-11-19T16:20:22.290
> 
> 标签：typo3, marker, tt-news

我有以下新闻类别结构

新闻
|-类别 1
|-类别 2
类 |-第 3 类

我最近进行了 TYPO3 更新，现在我体验到标记`NEWS_CATEGORY`是按以下方式打印的

`News, Category 1, Category 2, Category 3`

新闻文章本身被分配到类别新闻。如何将此输出限制为分配的类别（在本例中为新闻）？我不知道是 TYPO3 更新（包括 tt_news 更新）还是我的设置中的配置问题。

如果我使用`NEWS_CATEGORY_ROOTLINE`，那么我会得到类似`News > Category 2`. 如何仅输出所选类别的名称？该问题似乎仅在选择父类别时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:32:00.570

当您更新 tt_news 时，强烈建议您也使用内置更新。tt_news 最近也更新了表结构，所以你真的需要遵循 tt-news 更新指令。这也使它与旧的 tt-news 不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:01:13.747

`displaySubCategories = 0`似乎可以解决问题。

# php - 显示和排序多维数组

> ID：13457899
> 
> 赞同：-2
> 
> 时间：2012-11-19T16:20:50.597
> 
> 标签：php, arrays, multidimensional-array

我有一个数组。我需要在数据库中检查项目 ID 并获取制造商。之后，我需要将每个项目写入一个 HTML 表，在该表中为数组中的所有制造商创建表。示例 这 3 个数组中的项目由两个独立的制造商制造。现在我需要代码帮助来为每个制造商动态创建表并在表中添加相应的项目

```
[0] => Array
    (
        [0] => 3 //item id
        [1] => 1 //quantity
        [2] =>  efg //some text
        [3] => 50 //price
    )
[1] => Array
    (
        [0] => 1
        [1] => 1
        [2] =>  bla bla bla
        [3] => 10
    ) 
```

[2] => 数组（[0] => 5 [1] => 1 [2] => abe [3] => 15）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:26:46.427

1.  在 SQL 查询中对数据进行排序。[最好的]
2.  [`usort()`](http://ca3.php.net/manual/en/function.usort.php), [`uasort()`](http://ca3.php.net/manual/en/function.uasort.php), [`uksort()`](http://ca3.php.net/manual/en/function.uksort.php).

# ios - 在这种方法中去掉小数

> ID：13457908
> 
> 赞同：0
> 
> 时间：2012-11-19T16:21:02.243
> 
> 标签：ios, xcode, nsstring

我有一个声明显示 50.02%

如何去掉小数并显示 50%？

抱歉，这对 xcode 来说太基础了，很新。

先感谢您。

```
 -(void)updatePercent{

percent.text = [NSString stringWithFormat:@"%.2f%@", 100.0f, @"%"]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:22:10.163

用这个：

```
percent.text = [NSString stringWithFormat:@"%.0f%%", 100.0f]; 
```

还要注意`%%`打印单个`%`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:51:18.427

打印浮点数时，您可以通过使用格式语句中的`%`和之间的数字来控制打印出多少小数位。`f``%f`

小数点右边的数字表示应该打印多少个小数位。小数点左边的数字至少说明应该打印多少位（包括小数点和所有数字）。如果左侧的数字以零为前缀，则生成的字符串将在左侧附加零。

```
float myNum = 32.142;

// without declaring total digits
[NSString stringWithFormat:@"%.0f"]  // 32
[NSString stringWithFormat:@"%.2f"]  // 32.14
[NSString stringWithFormat:@"%.5f"]  // 32.14200

// put a zero in front of the left digit
[NSString stringWithFormat:@"%010.0f"] // 0000000032
[NSString stringWithFormat:@"%010.2%"] // 0000032.14

// without the zero prefix (leading whitespace)
[NSString stringWithFormat:@"%10.2f"]  //      32.14 
```

# excel - VBA 使用单元格引用激活单元格

> ID：13457909
> 
> 赞同：1
> 
> 时间：2012-11-19T16:21:04.480
> 
> 标签：excel, vba

所以我有一个非常简单的代码行应该激活另一个工作表上的一个单元格，但在同一个工作簿中，但我不知道为什么它不起作用：

```
Sheets("me").Range(Cells(rownum, colnum)).Activate 
```

它给出“应用程序或对象定义”错误。`rownum`和`colnum`是定义的变量，当它们在调试模式下悬停时，它们显示整数值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:25:05.603

您需要先激活工作表，然后再激活其上的单元格。

试试这个：

```
Public Sub test()
  With Sheets("me")
   .Activate
   .Cells(rownum, colnum).Activate
  End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:46:27.173

来自 Excel 2003 帮助：
激活单个单元格，**该单元格必须在当前选定内容内**。要选择一系列单元格，请使用 Select 方法。

* * *

顺便说一句，您真的需要激活或选择该范围吗？在我看到的 90% 的代码中，这些`.Select`都是完全没有必要的！

# git - git svn 导入带有尾随空格的分支

> ID：13457910
> 
> 赞同：1
> 
> 时间：2012-11-19T16:21:07.833
> 
> 标签：git, svn

我正在使用`git svn`. 我在 Windows Server 2008 R2 上使用 Git-1.8.0-preview20121022。

导入已经运行了一段时间，并且顺利获取了前 4000 个修订版本。但是，它现在似乎遇到了一个带有尾随空格的分支名称，并且它已经倒下。

```
$ git svn fetch
Found possible branch point: https://10.10.10.2/svn/project/trunk => https://10.10.10.2/svn/project/branches/Release%2020110929%20, 3976
Found branch parent: (refs/remotes/Release 20110929 ) 691fb7f7d11cbb1afe35106f60a1d117ba415f4c
fatal: Unable to create 'd:/GitMigration/project/.git/svn/refs/remotes/Release 20110929 /index.lock': No such file or directory
read-tree 691fb7f7d11cbb1afe35106f60a1d117ba415f4c: command returned error: 128 
```

该分支不再存在，因此我无法以正常方式更改名称。该目录存在名称中没有尾随空格，但我找不到重命名它以保留空间的方法。

对此我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T05:45:25.443

问题的根本原因 - GIT 创建了一个带有尾随空格的目录，但实际上它的名称被截断了。例如，Windows mkdir 喜欢这样做。GIT 没有预料到这一点，并继续使用带空格的名称并且无法找到目录。

可以手动修复。使用 FAR、GnuWin 或任何其他可以创建带有尾随空格的目录的工具。然后将“d:/GitMigration/project/.git/svn/refs/remotes/Release 20110929”重命名为“d:/GitMigration/project/.git/svn/refs/remotes/Release 20110929”。如您所见，这是 GIT 期望找到的目录。

然后`git svn fetch`再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:56:11.987

最后我放弃了在 Windows 中导入它。我敢肯定，那里有一些 hacky 解决方案，但是在 Linux 中执行此操作然后将其从那里拉到 Windows 要容易得多。只要分支不是最新的，这应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T09:36:31.210

有一个手动解决此问题的方法。尝试手动创建 DIR。为避免修剪白色尾随空格，您可以在 cmd 命令中添加“\?\ at the beginning of the path”。例如

```
mkdir "\\?\d:\GitMigration\project\.git\svn\refs\remotes\Release 20110929 " 
```

# php - 跨多域框架的会话数据隔离

> ID：13457913
> 
> 赞同：0
> 
> 时间：2012-11-19T16:21:13.310
> 
> 标签：php, session, iframe, cookies, http-post

站点 A`www.cheese.com`正在尝试将站点 B 嵌入到`www.apple.com`iframe 中。

站点 A 和站点 B 都使用它们的 $_SESSION 变量数组。两者都调用`session_start()`.

只有在 http post 请求的正文中传递了一组正确的键值对（用户名和密码），才能访问站点 B。

当我尝试这个场景时出现问题。我相信这与站点 A 的会话与站点 B 的会话混合有关。

无论如何，在 http 发布期间和之后，是否可以将两个站点的会话相互隔离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:35:04.003

是的！使用 .将会话数据存储在不同的文件夹中`session_save_path`。这会将会话数据保存到服务器上的任意文件夹中。但是，这并不能解决您的全部问题——通过“出现问题”，您将什么称为问题？

（评论答案，我将编辑我的答案以提供进一步的指导）

# django - 从模型 django 解析 json

> ID：13457914
> 
> 赞同：0
> 
> 时间：2012-11-19T16:21:14.053
> 
> 标签：django, json, model

我发现 python 有一些奇怪的行为，但我不明白为什么。

这就是我创建项目和列表的方式：

```
def createItemJson(self,id,url):
    ret={}
    ret['id']=id
    ret['url']=url
    return ret

def createListJson(self,i):
    ret_l = []
    for i in range(0,i,1):
        ret_l.append(self.createItemJson(i, i))
    return ret_l 
```

这是 3 个元素列表的输出：

```
[{'url': 0, 'id': 0}, {'url': 1, 'id': 1}, {'url': 2, 'id': 2}] 
```

如果我使用这个字符串并在 shell A 中执行：

```
for v in data 
```

我可以打印 3 个对象。NB`len(data)`是3。

现在我将这些数据作为文本字段存储在数据库中（正确吗？）。当我检索对象时，我得到`len`的值为**63**。

基本上 Django 将其视为一个字符串。我能做些什么？我试图做 json.load 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:32:13.137

您显示的示例中没有 JSON。你有一本 Python 字典。如果您随后“将其存储在文本字段中”（请注意，准确显示您的操作方式会很有帮助），您可能只是将其作为字符串转储到该字段中。它仍然不是 JSON，它现在是 Python dict 的字符串表示形式，这并不完全相同。`json.load`将“不起作用”（再一次，确切的错误消息会有所帮助），因为它不是 JSON。

您可以`json.dumps(my_dict)`在将其存储到数据库之前以及`json.loads()`在退出时尝试使用。或者，使用您可能在 Google 快速搜索中找到的众多 JSONField 实现之一。

# c# - for循环中的随机迭代

> ID：13457917
> 
> 赞同：7
> 
> 时间：2012-11-19T16:21:23.230
> 
> 标签：c#, random, for-loop

我想创建一个 for 循环，以随机顺序遍历数字 0-8。请注意，每个号码只能访问一次。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T16:28:19.940

```
Random r = new Random();
foreach (int i in Enumerable.Range(0, 9).OrderBy(x => r.Next()))
{
    Console.WriteLine(i);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T16:22:57.090

1.  生成索引 0 到 8 的数组
2.  随机排列数组
3.  使用该位置的索引遍历数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:29:38.367

一种可能：

```
var numbers = Enumerable.Range(0, 9).ToList();
var rnd =  new Random();
for (; numbers.Count != 0; )
{
    var currentNumber = numbers[rnd.Next(0, numbers.Count)];

    Console.WriteLine(currentNumber);

    numbers.Remove(currentNumber); // remove current random number from list
} 
```

`Enumerable.Range(0, 9).ToList()`创建一个包含从 0 到 8 的数字的列表。然后在循环中，我们从列表中选择一个随机数，并在循环结束时将其从列表中删除，以便下一个循环不能再次选择它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:31:58.347

从网络搜索中找到了这个——Fisher-Yates shuffle，用 Perl 实现。

这将生成任何输入数组的无偏随机化。

```
sub fisher_yates_shuffle {
    my $array = shift;
    my $i;
    for ($i = @$array; --$i; ) {
        my $j = int rand ($i+1);
        next if $i == $j;
        @$array[$i,$j] = @$array[$j,$i];
    }
} 
```

欲了解更多信息：

[http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

我找到的原件来自：

[http://perl.livejournal.com/101830.html](http://perl.livejournal.com/101830.html)

# c++ - Ncurses 窗口不显示任何内容

> ID：13457918
> 
> 赞同：5
> 
> 时间：2012-11-19T16:21:27.373
> 
> 标签：c++, linux, ncurses

我正在使用 ncurses 库来编写控制台应用程序。我有一个假设写入窗口缓冲区然后刷新窗口的函数。然后在我的测试函数中，我调用窗口函数并发生了一些事情，因为程序移动到下一行（getch()，它只是等待我的一个字符），但没有显示任何内容。

这是我的功能：

```
void UI::drawAudience(int audience1, int audience2)
{

    string bar1 = "", bar2 = "";

    for (int i; i < BAR_SIZE; i++)
    {

        bar1 += (i <= audience1) ? ' ' : '+';

        if (i <= audience2)
            bar2 += '+';
    }

    string audienceName = "Audience Name";

    //mvwprintw(audience, 0, 11 - audienceName.size() / 2, "%s", audienceName.c_str());
    //mvwprintw(audience, 1, 0, "%s|%s", bar1.c_str(), bar2.c_str());
    wprintw(audience, "Test");

    wrefresh(audience);
} 
```

这是我的测试代码：

```
#include "Tests.h"
#include <string>

using namespace std;

void test()
{
    int y = 1;

    UI testUI;

    initscr();
    cbreak();

    WINDOW* windowTest = newwin(1, 23, 3, 0);

    wprintw(windowTest, "This is a new window");
    wrefresh(windowTest);

    getch();

    clear();

    delwin(windowTest);

    testUI.drawAudience(4,5);

    getch();

    endwin();

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-18T01:55:24.907

**编辑：**你问题的原因是`getch()`线路。通过调用 getch() 您的程序将 stdscr 重新置于顶部。一种解决方案是`wgetch()`按照 ( [https://stackoverflow.com/a/3808913/2372604](https://stackoverflow.com/a/3808913/2372604) ) 中的说明使用。

我找到的另一个解决方案如下，不幸的是，这可能无法正常工作，具体取决于您对 UI 类的实现。尝试以下代码，将两`refresh()`行都注释掉，然后尝试在其中一个（或两个）行未注释的情况下再次运行。如果您在刷新窗口之前不刷新屏幕，您将永远无法看到您的窗口。

```
#include <ncurses.h>

int main(int argc, char** argv)
{
    initscr();
    cbreak();
    refresh();      // Important to refresh screen before refresh window

    WINDOW* windowTest = newwin(1, 23, 3, 0);
    wprintw(windowTest, "Hello World");

    //refresh();      // Refresh here works as well
    wrefresh(windowTest);

    getch();

    delwin(windowTest);
    endwin();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-18T18:54:19.453

正如@ilent2 在创建每个窗口后提到的， **stdscr**需要更新以包含您的新窗口。但是可以实现相同的效果`wnoutrefresh(stdscr)` *，将命名窗口复制到虚拟屏幕*中并且不调用`doupdate()` *哪个执行实际输出*`doupdate()`，一旦你完成了你的窗口，你就可以调用自己；*得益于更少的 CPU 时间*

**但更好的解决方案：使用面板**

```
#include <curses.h>
#include <panel.h>

int main()
{
    initscr();

    // use default width and height
    WINDOW* p = newwin(0, 0, LINES/2, COLS/2);
    // create a panel of a newly created window 
    // managing windows is easy now
    PANEL* p_panel = new_panel(p);
    waddstr(p, "that's what i'm talking about!");

    update_panels(); // update windows once and for all

    doupdate(); // the actual updating (calculate changes with the curscr)

    endwin();
} 
```

如您所见，面板可以提供很大帮助。单独管理每个窗口既繁琐又容易出错。所以很明显你可以做几个窗口：

```
WINDOW* win = newwin(height, width, beginy, beginx); // variables defined somewhere
WINDOW* win2 = newwin(height, width, beginy+5, beginx+10);

PANEL* p1 = new_panel(win);
PANEL* P2 = new_panel(win2);

// changing my windows without worrying about updating in the correct order (because they're overlapping)

update_panels();

doupdate(); 
```

# c++ - 使用 .push_back 将新创建的项目添加到库存

> ID：13457920
> 
> 赞同：2
> 
> 时间：2012-11-19T16:21:30.930
> 
> 标签：c++, class, function, vector

全部！我正在创建一个库存类。到目前为止，这是我所拥有的实现文件：

```
//aItem .cpp implementation file

#include "stdafx.h"
#include "aitem.h"
#include <iostream>
#include <string>
#include <vector>
using namespace std;

//setting this up default
aItem::aItem()
{
    vector<aItem> inventory;
    mitemName = "Default Name";
    mitemType = "Default Type";
    mdamage  = 9001;
}

void aItem::ItemList()
{
    for( vector<aItem>::size_type index = 0; index < inventory.size(); index++ ) 
        {
            //Makes a numerical list.
            cout << "Item " << index + 1 << ": " <<  inventory[index].mitemName << endl;
            index+= 1;
        }
}

void aItem::ItemAdd(string itemName, string itemType, int damage)
{
    mitemName = itemName;
    mitemType = itemType;
    mdamage = damage;

    inventory.push_back 
```

ItemAdd() 中间的突然切割是我的问题。如果我没有从我知道名称的列表中提取它，我如何将新创建的项目添加到我的库存向量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:28:43.083

首先，您应该使用 m_name 而不是 mitemName，它更容易阅读，并且使用更广泛。

现在对于您的实际问题，您有一个名为 aItem 的库存，它包含 aItems 的向量...这是您的问题，为项目创建一个类，为库存创建一个类（如果您需要的话）。他们不能在同一个班级。

所以在这里我创建了我的物品类（我会称之为物品，如果你愿意，你可以叫你的aItem），它只控制物品的名称、类型和损坏。

```
#ifndef ITEM_H
#define ITEM_H

#include <string>

class Item {
    public:
        Item();
        virtual ~Item();
        virtual void setName(std::string name);
        virtual std::string getName();
        virtual void setType(std::string type); // consider enum for types here
        virtual std::string getType();
        virtual void setDamage(int damage);
        virtual int getDamage();

    private:
        std::string m_name;
        std::string m_type;
        int m_damage;
};

#endif // ITEM_H 
```

我想你可以`.cpp`自己编写代码，那就是头文件。

这是 my `Inventory.h`，您可以再次重命名以符合您的喜好。

```
#ifndef INVENTORY_H
#define INVENTORY_H

#include "item.h"
#include <vector>

class Inventory {
    public:
        Inventory();
        virtual ~Inventory();
        virtual void addItem(Item* item);
        virtual void removeItem(int index); // You could implement removeItem(Item* item); too

    private:
        std::vector<Item*> m_items;
};

#endif // INVENTORY_H 
```

现在，如果您还需要任何其他方法，您可以自由地为这些类中的任何一个实现任何方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:37:06.050

如果您的库存不需要像其他人建议的那样成为自己的类别，则可以在需要时通过引用将其传递给项目类别。这可能不是最好的方法，但您不必编写另一个类。

例如。

```
int main(){
    aItem sword("wooden","sword", 5);
    aItem axe("stone", "axe", 15);
    std::vector<aItem> inventory;
    sword.addTo(inventory);
    axe.addTo(inventory);
    ... 
```

在 aItem.cpp 中：

```
void aItem::add(std::vector<aItem> &inventory){
    inventory.push_back(*this);
} 
```

或者，如果您想处理内存问题而不是范围问题，则可以使用指针：

```
int main(){
    aItem* sword = new aItem("wooden","sword", 5);
    aItem* axe = new aItem("stone", "axe", 15);
    std::vector<aItem*> inventory;
    sword->addTo(inventory);
    axe->addTo(inventory);
    ... 
```

在 aItem.cpp 中：

```
void aItem::add(std::vector<aItem*> &inventory){
    inventory.push_back(this);
} 
```

但同样，在几乎所有情况下，正确处理范围或内存管理的清单类都会比这更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:25:07.093

所以你有一个名为 aItem 的类，它应该是一个“项目”并且还存储库存？听起来您需要另一个类来维护包含项目向量的库存。

其次，您现在有一个堆栈变量作为您的库存。一旦您的构造函数超出范围，它就消失了。

最后，您将需要创建一个临时“项目”以添加到库存中。这就是被推回的原因；）

# excel - Open xml sdk 与 interops for excel 以实现客户端自动化

> ID：13457929
> 
> 赞同：0
> 
> 时间：2012-11-19T16:21:50.313
> 
> 标签：excel, openxml

我想自动化一个 excel 报告客户端，我试图决定使用哪种技术，这将是 Visual Studio 2010 和 C#。相当直接的报告，将值从 sql 转储到 excel。

我知道 OpenXml（服务器端）和互操作（客户端），我想将 Openxml 用于自动化客户端，但我想知道这是否是一种公认​​的做法。意味着在客户端打开自动excel。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:39:30.700

我的选择是**Open XML sdk**。

**PIA 或 Interops**有很多管理权限要求，如 DCOM 权限等，因此部署和配置步骤相对复杂。PIA 的好处是它更容易编码，比开放 XML 稍微快一些并且功能丰富。例如，使用 PIA 可以很容易地将办公文档转换为其他格式。

**Open XML sdk**不需要任何配置或单独安装。只需要复制它的库。除了 I/O 之外，它不需要明确的权限（可以在强化系统中平稳运行）。但是，它的功能是有限的。Open xml 对于报告生成等非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:28:08.003

Open XML 仅适用于从 excel 文件中读取和写入数据。如果这是您的功能，您可以轻松使用 Open XMl，因为它经过高度优化。否则，如果您想生成报告、数据透视表...您应该使用互操作

# hadoop - 在 Hadoop 中写入 HDFS 中的文件

> ID：13457934
> 
> 赞同：6
> 
> 时间：2012-11-19T16:21:58.247
> 
> 标签：hadoop, hdfs, word-count

我一直在寻找一个磁盘密集型 Hadoop 应用程序来测试 Hadoop 中的 I/O 活动，但我找不到任何这样的应用程序可以保持磁盘利用率高于 50% 或一些实际上使磁盘繁忙的应用程序。我尝试了 randomwriter，但令人惊讶的是它并不是磁盘 I/O 密集型的。

所以，我写了一个小程序来在 Mapper 中创建一个文件并在其中写入一些文本。此应用程序运行良好，但仅在主节点中使用率很高，主节点也是名称节点、作业跟踪器和从属节点之一。在其他任务跟踪器中，磁盘利用率为零或可以忽略不计。我无法理解为什么任务跟踪器中的磁盘 I/O 如此之低。如果我做错了什么，有人可以将我推向正确的方向吗？提前致谢。

这是我在 WordCount.java 文件中编写的示例代码段，用于创建 UTF 字符串并将其写入文件 -

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(conf);
Path outFile;
while (itr.hasMoreTokens()) {
    word.set(itr.nextToken());
    context.write(word, one);
    outFile = new Path("./dummy"+ context.getTaskAttemptID());
    FSDataOutputStream out = fs.create(outFile);

    out.writeUTF("helloworld");
    out.close();
    fs.delete(outFile);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:29:37.643

我认为任何在每一行中为每个单元格创建 java 对象，并在将 java 对象保存到磁盘之前运行任何序列化的机制都很少有机会利用 IO。
以我的经验，序列化的工作速度为每秒几 MB 或更高一点，但不是每秒 100 MB。
因此，您在输出路径上避免 hadoop 层的做法是非常正确的。现在让我们考虑写入 HDFS 是如何工作的。数据通过本地数据节点写入本地磁盘，然后同步到网络中的其他节点，具体取决于您的复制因子。在这种情况下，您不能将更多数据写入 HDFS，然后您的网络带宽。如果您的集群相对较小，那么物有所值。对于 3 节点集群和三重复制，您会将所有数据路径到所有节点，因此整个集群 HDFS 写入带宽约为 1 GBit - 如果您有这样的网络。
所以，我建议：
a）将复制因子减少到 1，从而停止被网络绑定。
b) 在一次调用 mapper 中写入更大的数据块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:18:54.047

好的。我之前不检查肯定是真的很愚蠢。实际的问题是我所有的数据节点都没有真正运行。我重新格式化了名称节点，一切都恢复原状，我得到了 15-20% 的利用率，这对 WC 来说还不错。我将为 TestDFSIO 运行它，看看我是否可以更多地利用磁盘。

# objective-c - 接收器类型“X”例如消息是前向声明 CGPOINT、IOS

> ID：13457937
> 
> 赞同：2
> 
> 时间：2012-11-19T16:22:10.297
> 
> 标签：objective-c, ios, cocos2d-iphone, automatic-ref-counting

我已经看到相同错误的类似问题。在将代码重构为 Arc 后，我得到 **Receiver type 'CGPointObject' 例如消息是前向声明**错误。并且建议将@class 方法移动到.h 文件和#import .h 声明文件中，并明智地使用{。

我做了所有的建议，但我仍然得到错误。

CCParallaxNode-Extras.h

```
#import "cocos2d.h"

@class CGPointObject;

@interface CCParallaxNode (Extras)

-(void) incrementOffset:(CGPoint)offset forChild:(CCNode*)node;

@end 
```

CCParallaxNode-Extras.m

```
 #import "CCParallaxNode-Extras.h"
    #import "CCParallaxNode.h"

    @implementation CCParallaxNode(Extras)

    -(void) incrementOffset:(CGPoint)offset forChild:(CCNode*)node 
    {

        for( unsigned int i=0;i < parallaxArray_->num;i++) {
            CGPointObject *point = parallaxArray_->arr[i];
            if( [[point child] isEqual:node] ) {
                [point setOffset:ccpAdd([point offset], offset)];
                break;
            }
        }
    }

@end 
```

类定义：CCParallaxNode.m

```
#import "CCParallaxNode.h"
#import "Support/CGPointExtension.h"
#import "Support/ccCArray.h"

@interface CGPointObject : NSObject
{
    CGPoint ratio_;
    CGPoint offset_;
    CCNode *child_; // weak ref
}
@property (nonatomic,readwrite) CGPoint ratio;
@property (nonatomic,readwrite) CGPoint offset;
@property (nonatomic,readwrite,assign) CCNode *child;
+(id) pointWithCGPoint:(CGPoint)point offset:(CGPoint)offset;
-(id) initWithCGPoint:(CGPoint)point offset:(CGPoint)offset;
@end
@implementation CGPointObject
@synthesize ratio = ratio_;
@synthesize offset = offset_;
@synthesize child=child_;

+(id) pointWithCGPoint:(CGPoint)ratio offset:(CGPoint)offset
{
    return [[[self alloc] initWithCGPoint:ratio offset:offset] autorelease];
}
-(id) initWithCGPoint:(CGPoint)ratio offset:(CGPoint)offset
{
    if( (self=[super init])) {
        ratio_ = ratio;
        offset_ = offset;
    }
    return self;
}
@end 
```

我该如何解决上述问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T16:41:01.640

你应该像你应该的那样包含`#import "CCParallaxNode.h"`，`CCParallaxNode-Extras.m`但根据`CCParallaxNode.m`你定义的`@interface`和`@implementation`. 您需要将该`@interface`部分移出`CCParallaxNode.m`和移入头文件。

CCParallaxNode.h

```
//Add necessary includes ...

@interface CGPointObject : NSObject
{
    CGPoint ratio_;
    CGPoint offset_;
    CCNode *child_; // weak ref
}
@property (nonatomic,readwrite) CGPoint ratio;
@property (nonatomic,readwrite) CGPoint offset;
@property (nonatomic,readwrite,assign) CCNode *child;
+(id) pointWithCGPoint:(CGPoint)point offset:(CGPoint)offset;
-(id) initWithCGPoint:(CGPoint)point offset:(CGPoint)offset;
@end 
```

# jquery - 用于 mm/dd/YYYY 格式的 JDPicker 正则表达式

> ID：13457941
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:22:20.580
> 
> 标签：jquery, regex, datepicker

我正在使用这个脚本： http: [//jdpicker.paulds.fr/](http://jdpicker.paulds.fr/?p=doc) ?p= doc 这是一个很棒的日期选择器，但当然，这家伙没有添加“mm/dd/YYYY”作为格式之一。

他声称“您可以通过编辑位于第 71 行和第 109 行之间的开关来修改或添加一些新选项。您只需要使用一些正则表达式和一些脑细胞！” - 好吧，我不是最擅长正则表达式的，我无法让它正常工作。

我的代码：

```
case "mm/dd/YYYY": 
this.reg = new RegExp(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/); 
this.date_decode = "new Date(parseInt(matches[2]-1), matches[3], matches[1]);"; 
this.date_encode = 'this.strpad(date.getMonth()+1) + "/" + this.strpad(date.getDate()) + "/" + date.getFullYear();';
this.date_encode_s = 'this.strpad(date.getMonth()+1) + "/" + this.strpad(date.getDate())';
break; 
```

这是一个有效的 YYYY/mm/dd 格式示例：

```
case "YYYY/mm/dd": 
default: 
this.reg = new RegExp(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/); 
this.date_decode = "new Date(matches[1], parseInt(matches[2]-1), matches[3]);"; 
this.date_encode = 'date.getFullYear() + "/" + this.strpad(date.getMonth()+1) + "/" + this.strpad(date.getDate());'; 
this.date_encode_s = 'this.strpad(date.getMonth()+1) + "/" + this.strpad(date.getDate());'; 
break; 
```

即使在此之后建模，我也无法让它工作。它正确格式化日期，但由于某种原因最终将日历更改为 2038 年。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:34:35.330

我认为您需要更改此行：

```
this.date_decode = "new Date(parseInt(matches[2]-1), matches[3], matches[1]);"; 
```

对此：

```
this.date_decode = "new Date(matches[3], parseInt(matches[1]-1), matches[2]);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:42:21.800

除此之外`02/29`，一年中的所有日期`2000`都可以使用正则表达式模式进行验证

```
(?:02\/(?:(?!00)[01]\d|2[0-8])|(?:0[469]|11)\/(?:(?!00)[0-2]\d|30)|(?:0[13578]|10|12)\/(?:(?!00)[0-2]\d|3[01]))\/2\d{3} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:45:40.460

为了看起来像一个真正的程序员，把你的正则表达式改成这个

```
this.reg = new RegExp(@"^\d{4}/(\d|1[0-2])/(\d|(1[\d])|(2[\d])|3[0-1])$"); 
```

# javascript - 如何比较字符串中的值

> ID：13457943
> 
> 赞同：0
> 
> 时间：2012-11-19T16:22:27.987
> 
> 标签：javascript, jquery

我想在某些条件下比较 2 个值。

如果 `$(".value1").text()`和`$(".value2").text()`以 开头`"v"`，则检查`$(".value1").length`（在本例中为 0.1））的数量是否 < `$(".value1").length`（在本例中为 0.4）

```
<div class="value1">v0.1</div>
<div class="value2">v0.4</div> 
```

首先，我想检查 div 的值是否以 开头`"v"`，然后我想比较 . 之后的值`"v"`。

我将如何做到这一点以及语法如何？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T16:25:35.257

我建议`String`您阅读 JavaScript 中可用的各种方法。

在这种情况下，您希望[`charAt`](http://ecma-international.org/ecma-262/5.1/#sec-15.5.4.4)（找出第 0 个字符是否为“v”）和[`substring`](http://ecma-international.org/ecma-262/5.1/#sec-15.5.4.15)（或[`substr`](http://ecma-international.org/ecma-262/5.1/#sec-B.2.3)）仅获取`v`. 然后你会想把[`parseFloat`](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.3)它变成一个数字。或者，正如[糟糕的语法所指出的那样](https://stackoverflow.com/a/13458063/157247)，您*可以*使用正则表达式（尽管如果您这样做，我不会完全按照他/她所做的，但我会更进一步），但这可能比必要的更复杂.

上面的链接是规范的，但这可能很难。有很多书籍和网站可用于学习 JavaScript 的基础知识。[Mozilla 的 MDN](https://developer.mozilla.org/en-US/docs/JavaScript)是一个不错的参考网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:35:05.927

这是一个如何从元素中获取字符串数据、将其转换为整数并进行比较的示例。[http://jsfiddle.net/svcH9/1/](http://jsfiddle.net/svcH9/1/)

```
$(document).ready(function () {
    // get elements
    var v1 = $('.value1').text(),
        v2 = $('.value2').text();
    // check requirements
    if (isVersionString(v1) === true && isVersionString(v2) === true) {
        // replace the v and cast to float
        v1 = getVersion(v1);
        v2 = getVersion(v2);

        // test
        $('body').append(v1).append(v2);

        // simple compare
        if (v1 < v2) {
            alert('Value two is greater than value one');
        }
    }
});

function isVersionString(value) {
    return /^v[0-9\.]{0,}$/.test(value);            
}

function getVersion(value) {
    return parseFloat(value.replace('v', ''), 10);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:33:56.273

```
 var value1 = $('.value1').text();
  var value2 = $('.value2').text();

  if (value1.indexOf('v') == 0 && value2.indexOf('v') == 0) {
    var version1 = parseFloat(value1.substring(1), 10);
    var version2 = parseFloat(value2.substring(1), 10);
    if (version1 > version2) {
      document.write(value1 + ' > ' + value2);
    }
    else if (version1 < version2) {
      document.write(value1 + ' < ' + value2);
    }
    else {
      document.write(value1 + ' == ' + value2);
    }
  } 
```

一个工作示例：http: [//jsfiddle.net/Kncf4/](http://jsfiddle.net/Kncf4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:28:54.220

正则表达式解决方案：

```
var val1 = $.trim($(".value1").text());
var val2 = $.trim($(".value2").text());
var hasV = (/^v/.test(val1) && /^v/.test(val2));

if (hasV) {

    var num1 = parseFloat(val1.replace(/v/, ''));
    var num2 = parseFloat(val2.replace(/v/, ''));

    if (num1 < num2) {
        alert('yes');
    }
} 
```

# php - 在oop php中循环查询

> ID：13457944
> 
> 赞同：0
> 
> 时间：2012-11-19T16:22:30.803
> 
> 标签：php

所以在我的项目中，我需要从给出 2 行的查询中检索一些数据（我在 php 我的管理员中测试了查询）

但我正在使用面向对象的编程，我的方法如下所示：

```
function __construct($pid){

    Sys::database_connect();

    $prod_data = mysql_query("SELECT Produto.produto_id, Produto.nome, Produto.descricao, Produto.pvp, Produto.iva_id, Produto.fornecedor_id, Produto.views, Categoria.nome AS categoria, Imagem.file FROM Produto, Categoria, Imagem WHERE Produto.produto_id = '$pid' AND Produto.categoria_id=Categoria.categoria_id AND Imagem.Produto_produto_id = Produto.produto_id ORDER by Produto.produto_id") or die(mysql_error());

    $array_data = mysql_fetch_array($prod_data);

    $this->produto_id = $array_data['produto_id'];
    $this->nome = $array_data['nome'];
    $this->descricao = $array_data['descricao'];
    $this->pvp = $array_data['pvp'];
    $this->categoria = $array_data['categoria'];

            //this is the picture name (the first one will be the main pic of the product)
    $this->file = $array_data['file'];

    $pre_img_galery = array();
    $max_pics=count($array_data);
    for ($pci_for=0; $pci_for < $max_pics; $pci_for++) { 
        //array_push($pre_img_galery, $array_data['file'][$pci_for]);
        echo $this->$array_data['file'].'<br>';
    }
    $this->img_galery = $pre_img_galery;

} 
```

数据库有 2 张图片，导致图片字段中有 2 行具有不同的值...

我的 for 循环只是回显第一个文件名字符的字符...

如何将图片文件名定义为数组（img_galery）？

我的解决方法：

```
function __construct($pid){

    Sys::database_connect();

    $prod_data = mysql_query("SELECT Produto.produto_id, Produto.nome, Produto.descricao, Produto.pvp, Produto.iva_id, Produto.fornecedor_id, Produto.views, Categoria.nome AS categoria, Imagem.file FROM Produto, Categoria, Imagem WHERE Produto.produto_id = '$pid' AND Produto.categoria_id=Categoria.categoria_id AND Imagem.Produto_produto_id = Produto.produto_id ORDER by Produto.produto_id") or die(mysql_error());

    /*while($row = mysql_fetch_array($prod_data)) {
        echo $prod_data['file'].'<br>';
    }*/

    while ($row =  mysql_fetch_array($prod_data)){

    echo $this->produto_id = $row['produto_id'];
    echo $this->nome = $row['nome'];
    echo $this->descricao = $row['descricao'];
    echo $this->pvp = $row['pvp'];
    echo $this->categoria = $row['categoria'];
    //echo $this->online = $array_data['online'];
    echo $this->file = $row['file'];

    $pre_img_galery = array();

    array_push($this->img_galery, $row['file']); 
    echo '<br><br><br>';
    print_r($this->img_galery);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:29:10.460

这是需要做的，你需要遍历结果集，

```
 $prod_data = mysql_query("SELECT Produto.produto_id, Produto.nome, Produto.descricao, Produto.pvp, Produto.iva_id, Produto.fornecedor_id, Produto.views, Categoria.nome AS categoria, Imagem.file FROM Produto, Categoria, Imagem WHERE Produto.produto_id = '$pid' AND Produto.categoria_id=Categoria.categoria_id AND Imagem.Produto_produto_id = Produto.produto_id ORDER by Produto.produto_id") or die(mysql_error());

while($row =  mysql_fetch_array($prod_data) { 
  $pre_img_galery[]['produto_id'] = $row['produto_id'];
   ... //and so on for other indexes per row.
} 
```

**注意：**不推荐使用 Mysql_* 扩展。最好使用 Mysqli_* 或 PDO 扩展。[在使用 PHP 时](https://stackoverflow.com/questions/548986/mysql-vs-mysqli-in-php)查看这个问题MySQL vs MySQLi 并[在此处](http://www.php.net/manual/en/mysqli.installation.php)找到 Mysqli_* 的安装说明。

# visual-studio-2012 - 如何显示来自 Visual Studio 扩展的等待弹出窗口？

> ID：13457948
> 
> 赞同：5
> 
> 时间：2012-11-19T16:22:46.877
> 
> 标签：visual-studio-2012, visual-studio-sdk

我正在编写一个扩展，它有时会在后台运行相当长的批处理作业，并且需要向用户提供一个合理的指示，表明它确实在工作。

如果可能，最好使用 VS2012 已经使用的加载弹出窗口/ialog，例如“准备解决方案”对话框。有谁知道如何从扩展创建该弹出窗口的实例？

如果没有，有什么好的选择吗？能够显示状态字符串和进度条会更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-14T15:33:50.040

我一直在寻找一种自己显示进度对话框的方法，最后偶然发现了一个名为的类[`CommonMessagePump`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.commonmessagepump%28v=vs.120%29.aspx)，它提供了与 Visual Studio 中在操作需要很长时间才能完成时显示的相同等待对话框。

使用起来有点麻烦，但似乎效果很好。它在您的操作花费两秒钟左右的时间后才会显示，并且它还提供取消支持。

假设您有一个名为的类`Item`，并且它包含一个名为的属性`Name`，并且您想要处理这些项目的列表，可以通过以下方式完成：

```
void MyLengthyOperation(IList<Item> items)
{
   CommonMessagePump msgPump = new CommonMessagePump();
   msgPump.AllowCancel = true;
   msgPump.EnableRealProgress = true;
   msgPump.WaitTitle = "Doing stuff..."
   msgPump.WaitText = "Please wait while doing stuff.";

   CancellationTokenSource cts = new CancellationTokenSource();
   Task task = Task.Run(() =>
        {
           for (int i = 0; i < items.Count; i++)
           {
              cts.Token.ThrowIfCancellationRequested();
              msgPump.CurrentStep = i + 1;
              msgPump.ProgressText = String.Format("Processing Item {0}/{1}: {2}", i + 1, msgPump.TotalSteps, items[i].Name);
              // Do lengthy stuff on item...
           }
        }, cts.Token);

   var exitCode = msgPump.ModalWaitForHandles(((IAsyncResult)task).AsyncWaitHandle);

   if (exitCode == CommonMessagePumpExitCode.UserCanceled || exitCode == CommonMessagePumpExitCode.ApplicationExit)
   {
      cts.Cancel();
      msgPump = new CommonMessagePump();
      msgPump.AllowCancel = false;
      msgPump.EnableRealProgress = false;            
      // Wait for the async operation to actually cancel.
      msgPump.ModalWaitForHandles(((IAsyncResult)task).AsyncWaitHandle);
   }

   if (!task.IsCanceled)
   {
      try
      {
         task.Wait();
      }
      catch (AggregateException aex)
      {
         MessageBox.Show(aex.InnerException.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
      }
      catch (Exception ex)
      {
         MessageBox.Show(ex.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
      }
   }
} 
```

# c++ - “单一任务”与“不提前返回”

> ID：13457949
> 
> 赞同：2
> 
> 时间：2012-11-19T16:22:47.730
> 
> 标签：c++, coding-style, return, constants

我有一个很难理解的算法，所以我以对`const`变量的单一赋值的形式把它写下来，中间有很多评论解释我为什么这样做。每当算法拒绝解决方案时，`return`就会引出一条语句。

另一方面，客户要求该方法没有“早期”返回语句，这是一个有点矛盾的目标，因为`const`在这种情况下我可以使用我的变量的唯一方法是大量嵌套`if`块。

是否有一个优雅的解决方案可以让我两全其美——如果变量在范围内并且仍然是一个有点扁平的层次结构，那么这些变量是有效的？

*编辑：*客户也对例外不满意，并且`goto`. 这是一条热门路径，实施决策树来确定解决方案生成器提出的解决方案是否既可接受又优于先前的解决方案。

嵌套 if 的作用域看起来像

```
if(fulfills_condition_1(sol)) {
    double const some_quality = quality_function_1(sol);
    double const normalized_quality = normalize_quality_1(some_quality);
    if(fulfills_condition_2(normalized_quality) {
    {
        double const another_quality = ...
    }
} 
```

我目前的方法看起来像

```
if(!fulfills_condition_1(sol))
    return;
double const some_quality = quality_function_1(sol);
double const normalized_quality = normalize_quality_1(some_quality);
if(!fulfills_condition_2(normalized_quality) {
    return;

...

update_current_solution(sol); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T16:26:20.563

> 另一方面，客户要求该方法没有“早期”返回语句

这个要求并没有使 C++ 世界中的代码变得更好，只要使用析构函数进行清理，就像在 C++ 中通常应该那样。

它仅对 C 代码有用，以避免在具有多个返回的函数中清理重复。这正是用于 Linux 内核的风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:41:09.237

不确定这是否属于“规避客户要求”类别，但您可以使用 do/while 循环来打破您只想运行一次的代码块。

```
int foo()
{
    int value = 0;
    do
    {           
       if ( condition1 ) { ... }
       else { break; }
       if ( condition2 ) { ... }
       else { break; }
    } while ( false )  // the do/while loop is only run through once.

    // do whatever clean up etc is needed.

    return value;      
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:32:24.007

一种方法是将算法重构为几个函数，以便将因返回而遗漏的代码放入一个新函数中，并反转测试。（但无一例外，我怀疑这不如您的原始代码优雅）

如此原始

```
T algorithm_fn() {
  T result;
  ...
  if (x) {
    return result;
  }
  //do more
} 
```

变成

```
T new_func( // the const parameters ) {
    //do more
}

T algorithm_fn() {
  T result;
  ...
  if (!x) {
     result = new_func( // the const parameters );
  }
  return result;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T16:25:17.457

我想说这是唯一可以接受 goto 的结构之一。不是返回，而是将返回值分配给变量，而不是使用 return 语句转到方法的末尾。

# android - Android：复选框已选中并已禁用

> ID：13457958
> 
> 赞同：-1
> 
> 时间：2012-11-19T16:23:14.220
> 
> 标签：android, android-ui, android-checkbox

我想在 4 个复选框中只选择一个复选框。我的意思是，如果选择了一个复选框，则应禁用其他复选框。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:44:05.470

如果您使用泛型`onClick`，那么您可能会在您的应用程序中遇到其他元素单击处理程序的未来问题。我会在你的 xml 文件中添加`android:onClick="onCheckboxClicked"`每个。`CheckBox`然后添加我在下面显示的方法，自定义为您的 id 等。

```
<CheckBox android:id="@+id/chkBx1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Option 1"
        android:onClick="onCheckboxClicked"/>
<CheckBox android:id="@+id/chkBx2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Option 2"
        android:onClick="onCheckboxClicked"/>
<CheckBox android:id="@+id/chkBx3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Option 3"
        android:onClick="onCheckboxClicked"/> 
```

主要活动：

```
public void onCheckboxClicked(View v) {
    CheckBox chk1 = (CheckBox)findViewById(R.id.chkBx1);
    CheckBox chk2 = (CheckBox)findViewById(R.id.chkBx2);
    CheckBox chk3 = (CheckBox)findViewById(R.id.chkBx3);

    switch (v.getId()) {
    case R.id.chkBx1:
        if (chk1.isChecked()) {
            chk2.setEnabled(false);
            chk3.setEnabled(false);
        } else {
            chk1.setEnabled(true);
            chk2.setEnabled(true);
            chk3.setEnabled(true);
        }
        break;

    case R.id.chkBx2:
        if (chk2.isChecked()) {
            chk1.setEnabled(false);
            chk3.setEnabled(false);
        } else {
            chk1.setEnabled(true);
            chk2.setEnabled(true);
            chk3.setEnabled(true);
        }
        break;

    case R.id.chkBx3:
        if (chk3.isChecked()) {
            chk1.setEnabled(false);
            chk2.setEnabled(false);
        } else {
            chk1.setEnabled(true);
            chk2.setEnabled(true);
            chk3.setEnabled(true);
        }
        break;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T09:36:06.857

您可以使用单选按钮并通过更改按钮属性使它们看起来像复选框

```
 <RadioButton android:id="@+id/chkBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    andriod:button="@drawable/youcheckboximage"
    /> 
```

# windows - 检查网络驱动器是否正常工作

> ID：13457963
> 
> 赞同：0
> 
> 时间：2012-11-19T16:23:34.897
> 
> 标签：windows, vbscript

我已经有一个 vbs 脚本来检查它是否映射到服务器中的网络驱动器：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set colDrives = objFSO.Drives

For Each objDrive in colDrives
    If CBool(objDrive.DriveType = 3) Then ' Network disk
           If (objFSO.DriveExists(objDrive.DriveLetter) = True) Then
              Wscript.Echo "Network Drive Mapped : " & objDrive.DriveLetter
           End If
    End If
Next 
```

问题是它没有说明该网络驱动器是否仍然存在。例如，在一台服务器中有 3 个网络驱动器：

![在此处输入图像描述](../Images/114c32b8a5c42eaff2cfc222069a2e21.png)

但是其中一个（驱动器 Y:) 已失去连接。

![在此处输入图像描述](../Images/9f60b861a972b5a2473db462367daba4.png)

我试图找出什么 vbs 命令可以给出这个结果，但我还没有找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:14:50.137

尝试使用 Drive 对象“IsReady”方法。如果为 TRUE，则驱动器可用。

# c# - 单击 MP3 文件时打开媒体播放器

> ID：13457964
> 
> 赞同：0
> 
> 时间：2012-11-19T16:23:42.723
> 
> 标签：c#, media-player, media, autoplay

如何开发一个在打开 MP3 文件时打开并播放歌曲的媒体播放器。就像在我们的操作系统中单击 MP3 文件时一样，Windows 媒体播放器会打开并播放歌曲。

在我的应用程序中如何处理此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:39:04.810

To open your app when double clicking on a mp3: use the registry or "Right click mp3, open with, and select your application"

To play the MP3 in your app: You will get the filepath as the first parameter of your 'main' function.

```
class Program
{
    static void Main(string[] args)
    {
       if (args != null)
       {
         String filePath = args[0];
         SomeForm frm = new SomeForm(filePath );
       }
    }
} 
```

# sql-server - T-SQL 变量可以代表一整行吗？

> ID：13457969
> 
> 赞同：0
> 
> 时间：2012-11-19T16:23:54.957
> 
> 标签：sql-server, tsql, sql-server-2008-r2, cursor

我正在为 SQL Server 2008 R2 编写代码。我有两个包含几十个表的数据库。

一个数据库中的每个表都包含另一个数据库中同名的表。

具有相同名称的表具有相同的格式（字段和数据类型）。两个表的内容相似但不相同。我需要根据对另一个所做的更改来更新一个，但仅在某些情况下。我想我想为此使用光标，但我找不到一个很好的例子。

到目前为止，MSDN 示例一次将一个字段读入一个变量。我*确实*需要能够读取/修改每个表中相同的两列，但我必须相信，与为每个表的每一列声明变量相比，有些东西不那么乏味。

我希望*能够*获取整行，检查几列，然后决定是否要在更改两列后将整行写入另一个表 - 但我是否必须为每个字段声明变量我想获取/写入？没有办法只获取整行并写入整行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:29:26.967

您可以创建一个临时表并在其中插入行，但我认为该`MERGE`命令非常可配置且快速，在这里应该对您有所帮助。 [http://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:51:23.373

你可以

```
select a.* 
```

但不能

```
set a.* = b.* 
```

你不需要光标。设置操作应该更好地做到这一点。
但是语法很乏味。
您可以使用 .NET 来构建语法吗？

```
update a 
set a.col1 = b.col1, a.col2 == b.col12, a.col3 = b.col3 
from table as a
join table as b 
  on a.ID is b.ID 
where a.col1 <> b.col1 or a.col12 <> b.col2 
```

# mysql - MySQL：只有在任何行的情况下

> ID：13457973
> 
> 赞同：0
> 
> 时间：2012-11-19T16:24:06.760
> 
> 标签：mysql

```
 ->and_where_open()
                    ->and_where('orders.status', '=', 'delivered')->or_where('orders.status', '=', 'new')
                ->and_where_close() 
```

这就是我得到的：

```
SELECT deals.*, SUM(orders.total_count) AS revenue, SUM(orders.quantity) AS qty
                FROM deals
                LEFT JOIN users ON (users.id = deals.partner_id)
                LEFT JOIN orders ON (orders.deal_id = deals.id)
                WHERE (orders.status = 'delivered' OR orders.status = 'new')
                AND (title LIKE '%cake%'
                        OR title LIKE '%cake%'
                        OR description LIKE '%cake%'
                        )
                AND deals.seller_id = 123
                GROUP BY deals.ID
                ORDER BY ID DESC
                LIMIT 10 
```

如果有任何订单并且它们的状态为已交付或新的，则此方法效果很好。

我希望此查询显示所有交易，也包括那些没有订单的交易。

所以：如果这个 deal_id 存在订单，那么它应该执行 SUM() 并检查 orders.status 是已交付还是新的，否则它应该现在并且仍然获取交易。相反，这个查询排除了交易行，我反而想抓住它。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:32:26.100

您使用`LEFT JOIN`了而不是`INNER JOIN`，如果没有订单，它也会为您提供记录。但是，因为您在`WHERE`子句中也使用了 orders 表，所以您毕竟有效地构建了一个 INNER JOIN。

您也可以通过将条件移动到联接来更改它，或者向 where 子句添加一个附加项，该子句也允许记录 where `orders.orderid`（或类似的强制字段）`is null`。

演示第一个：

```
SELECT deals.*, SUM(orders.total_count) AS revenue, SUM(orders.quantity) AS qty
            FROM deals
            LEFT JOIN users ON (users.id = deals.partner_id)
            LEFT JOIN orders ON (orders.deal_id = deals.id) AND
             (orders.status = 'delivered' OR orders.status = 'new')
            WHERE
               (title LIKE '%cake%'
                OR title LIKE '%cake%'
                OR description LIKE '%cake%'
               )
            AND deals.seller_id = 123
            GROUP BY deals.ID
            ORDER BY ID DESC
            LIMIT 10 
```

演示第二个：

```
SELECT deals.*, SUM(orders.total_count) AS revenue, SUM(orders.quantity) AS qty
            FROM deals
            LEFT JOIN users ON (users.id = deals.partner_id)
            LEFT JOIN orders ON (orders.deal_id = deals.id)
            WHERE (
               orders.ID is null 
               or orders.status = 'delivered' 
               OR orders.status = 'new')
            AND (title LIKE '%cake%'
                    OR title LIKE '%cake%'
                    OR description LIKE '%cake%'
                    )
            AND deals.seller_id = 123
            GROUP BY deals.ID
            ORDER BY ID DESC
            LIMIT 10 
```

我不知道您使用哪种 ORM，但我认为第二种使用 ORM 通常更容易实现。

顺便说一句，您按 订购`ID`，但不使用别名。我不清楚（不是 MySQL）那是 users.ID、orders.ID 还是 deal.ID。

# jsf-2 - 会话过期时 RenderResponsePhase 上的 JSF2.0 NPE（viewRoot 为空）

> ID：13457974
> 
> 赞同：0
> 
> 时间：2012-11-19T16:24:08.967
> 
> 标签：jsf-2, nullpointerexception, viewexpiredexception

我的应用程序使用 JSF 2.0.6 和 RichFaces 4.1.0。我实现了一个 ExceptionHandler，它通常在弹出窗口中显示所有异常，并且工作正常。

但是当我使用此上下文参数禁用部分状态保存时出现问题：

```
<context-param>
  <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
  <param-value>false</param-value>
</context-param> 
```

或者这个：

```
<context-param>
  <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
  <param-value>/index.xhtml</param-value>
</context-param> 
```

当会话过期时，我在应用程序中执行的任何操作都会引发 NullPointerException ：

> com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:96) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl. java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:509)

我查看了 RenderResponsePhase.java:96 它对应于：

```
 ViewDeclarationLanguage vdl =
          vh.getViewDeclarationLanguage(facesContext,
                                            facesContext.getViewRoot().getViewId()); 
```

事实上， viewRoot 是 null ！

当启用部分状态保存或会话未过期时，这永远不会发生。

由于某些原因，我需要激活完整状态保存选项，但我不知道如何在会话过期时正确处理错误。我想这是一个 JSF 错误，我想在我的网络应用程序上修复它。

附加信息：服务器：Tomcat 6.0.18

# c# - DataGridview 在同一列中具有多个信息

> ID：13457981
> 
> 赞同：3
> 
> 时间：2012-11-19T16:24:25.610
> 
> 标签：c#, combobox, datagridviewcolumn

我有数据库查询结果，它绑定到 DataGridView 控件。结果就像在 c# 中一样。

```
 Column id(hidden in display)    Description        amount.**
           1                          abc             9/8/7/6/5/4/3/2  (depend on query) non selectable option
           2                          cdesd           1 or 0 (Check box would be great)
           3                          dekskd          1 or 0 (Check box would be great)
           4                          gkekskd         0/1/2/3/4  combo-box with selection option 
```

我搜索了很多文章。我找不到它。如果有人在这方面帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:00:15.973

我会加入 CellFormatting 事件。您可以为该特定单元格进行自定义格式设置。

[MSDN DataGridView.CellFormatting 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)

# c++ - 描述为什么在 C++ 中不允许将基类指针转换为派生类指针

> ID：13457982
> 
> 赞同：0
> 
> 时间：2012-11-19T16:24:26.770
> 
> 标签：c++, inheritance

我对为什么不允许这样做有一个模糊的想法，但我正在寻找更具体的东西。我假设它与基类中的所有方法可能不一定是虚拟的事实有关。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:30:27.913

很难描述为什么不允许这样做，因为事实上它几乎是允许的。

```
#include <cstdio>

struct Base {
    int b;
    explicit Base(int b) : b(b) {}
};

struct Derived : Base {
    int d;
    explicit Derived(int d) : Base(d), d(d+1) {}
};

int main()
{
    Derived d(10);
    Base *b = &d;
    Derived *d2 = static_cast<Derived *>(b);

    printf("%d, %d\n", b->b, d2->d);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:32:47.160

您的派生类可能会定义新的方法和属性，这些在您的基类中是未知的。Java&Co 在这种情况下会抛出异常。

在 C++ 中，您可以（但很少应该）通过静态转换将指向基类的指针显式转换为派生类。如果原始指针指向基类或另一个派生类的对象，会发生什么是未定义的。

请参阅 Vlad Lazarenko 的 awnser 以了解如何执行此操作的示例。

# sugarcrm - SugarCRM CE 6.5 中带有自定义字段的电子邮件通知

> ID：13457983
> 
> 赞同：0
> 
> 时间：2012-11-19T16:24:29.020
> 
> 标签：sugarcrm

我在 CRM 的错误模块中有一些自定义字段。每当用户创建任何购买时，它都会向 assign_user 发送邮件，其中包含一些字段，例如 down。

```
mick has assigned a Bug to  Store 51.

Bug Number: 
Subject: Test
Type: 
Priority: High
Status: In Process
Resolution: 
Release: 
Description: testing
Work Log: testing 
```

在这里我不需要一些字段并且想添加一些自定义字段如何可能。？有任何用于修改的 PHP 文件或来自管理员设置的内容。

任何帮助将不胜感激。

谢谢你..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:52:22.447

按照此处 en_us.notify_template.html 部分下的说明进行操作：http: [//developers.sugarcrm.com/wordpress/2011/05/10/howto-customize-the-assignment-notifications-for-a-custom-module/](http://developers.sugarcrm.com/wordpress/2011/05/10/howto-customize-the-assignment-notifications-for-a-custom-module/)

# php - FileMake Pro 脚本触发器可以调用外部 PHP 脚本吗？

> ID：13457984
> 
> 赞同：1
> 
> 时间：2012-11-19T16:24:40.383
> 
> 标签：php, mysql, filemaker

我正在为我的客户工作，该客户有一个 PHP 应用程序，该应用程序在创建帐户并为服务支付押金后同步到 FileMaker Pro，但是现在他们需要在更新特定字段时更新 PHP 应用程序的 MySQL 中的一个字段在 FileMaker 中。不幸的是，由于 FileMaker 文档的模糊性，我无法确定是否可以像我希望的那样使用脚本触发器调用外部脚本。

任何信息将是有益的，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:13:31.693

您可以使用 FileMaker 中的脚本触发器与“打开 URL”脚本步骤相结合，在您的 Web 服务器上点击 PHP 脚本。

这有几个问题：

如果该字段在带有触发器的布局之外更改，则脚本不会触发。

用户将需要在获取 URL 时等待，或者尝试超时。为确保脚本完成，您可以使用 onObjectValidate 脚本触发器，如果​​未成功获取 URL，则返回 false。

# spring-mvc - 如何使用 Builder Pattern 和 @JsonDeserialize 使用 Spring RestTemplate 反序列化响应 json

> ID：13457985
> 
> 赞同：1
> 
> 时间：2012-11-19T16:24:42.753
> 
> 标签：spring-mvc, jackson, resttemplate

如何配置 RESTTemplate 以使用 Jackson 的 @JsonDeserialize 反序列化响应 Json？

我的域类基于 Builder Pattern 和 jackson 的 @JsonDeserialize marshall 和 unmarshall 在单元测试中很好。但是，当与 Spring 的 RESTTemplate (Spring 3.1) 结合使用时，它会失败。

领域类：

```
@JsonDeserialize(builder = Policy.Builder.class)
public final class Policy 实现 Comparable, Serializable {

    // 不可变属性

    私人政策（建造者建造者）{
        ...
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    公共静态类生成器{

        /// 使用XXX方法

        公共政策构建（）{
            返回新政策（本）；
        }
    }
}

```

单元测试中的 Spring RESTTemplate 代码：

```
策略策略 = new Policy.Builder().withXXX()...build();
restTemplate.postForObject("http://localhost:8080/policies/policy.json", policy, String.class);

```

RestTemplate#doExecute() 中的错误 - 第 436 行：

```
org.springframework.web.client.HttpServerErrorException：500 无法实例化 bean    
类 [xxx.domain.Policy]：未找到默认构造函数；嵌套异常是
java.lang.NoSuchMethodException: xxx.domain.Policy.()

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:00:12.087

如果已经定义了构造函数，则需要包含默认构造函数。

# php - 使用 symfony2 包含文件

> ID：13457987
> 
> 赞同：4
> 
> 时间：2012-11-19T16:24:51.233
> 
> 标签：php, symfony, google-drive-api

我正在使用 google drive api 在 symfony2 中打包。我在 Utils 文件夹中有一个类：Authentication，它与来自 google 的文件（我放在完全相同的文件夹中）进行交互，我想将这些文件包含在我的 Authentication.php 中。

我包括这样的：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
require_once 'google-api-php-client/src/contrib/Google_Oauth2Service.php'; 
```

但我得到这个错误：

> **致命错误：：** `main()`无法打开所需的“google-api-php-client\src\Google_Client.php”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T16:45:17.723

当你构建一个 Bundle 时，你应该使用框架函数并使用集成的自动加载器。

**不要与框架抗争**

在您的情况下，我希望您的 Bundle 中有一个**Service**文件夹。然后你可以把你的谷歌类放在那个文件夹中，并在正确的命名空间中构建一个代理类并抽象你的谷歌代码。

在 Service 类中，您可以使用 require 导入您的库，也可以通过 composer 加载源代码。我们在这里使用最简单的方法。

```
<?php    
namespace MySF2Bundle\Service;

require_once __DIR__.'/google-api-php-client/src/Google_Client.php'
...

class GoogleAPIWrapper {
    public function getGoogleDriveConnection() {
       /**
        * Implement the Google drive functions
        */
    }
} 
```

然后，您可以在导入命名空间时在 Bundle 中使用它：

```
use MySF2Bundle\Service\GoogleAPIWrapper; 
```

使用此方法，您可以从 Bundle Code 中抽象出 Google API，并且可以使用更好的结构。您可能会在命名空间方面遇到一些麻烦。但是你可以测试一下。

否则，您可以查看 Github 上的其他捆绑包如何实现外部库。

**这是另一种方式：**

[http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2) [添加外部库到 Symfony2 项目](https://stackoverflow.com/questions/8789616/add-external-libraries-to-symfony2-project)

所以你可以实现完整的lib并在symfony2自动加载器中加载库

```
$loader->registerPrefixes(array(
    'Google' => __DIR__.'/../vendor/Google/Drive/',
)); 
```

因此，您会看到实现外部库的一些可能性。

# c# - 如何创建完全相同的页眉和页脚导航面板 (ASP.NET)

> ID：13457988
> 
> 赞同：0
> 
> 时间：2012-11-19T16:24:53.107
> 
> 标签：c#, asp.net, navigation

我目前有一个在线导航面板（ASP.NET），它有一些常用按钮（下一步、返回、重置、提交等）。我还编写了一些逻辑（C# 中的服务器端）来处理更改当前可见的面板等。

我希望导航面板出现在页面的顶部和底部，而不必为这些按钮编写额外的逻辑，就好像我想更改功能一样，我必须在两个地方而不是一个地方更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:27:14.497

我会编写一个 ASP.NET [Web 用户控件](http://msdn.microsoft.com/en-us/library/fb3w5b53%28v=vs.100%29.aspx)，它允许您将该功能封装在一个可重用的控件中，您可以在页面上放置一次或多次。这听起来可以满足您的需求，并允许您不仅在单个表单中的多个位置使用该控件，而且如果您发现将来需要这样做，还可以跨多个 Web 表单使用该控件。

# jsf-2 - 当嵌套在 ui:repeat 中时，具有自定义支持组件的复合组件会奇怪地中断

> ID：13457989
> 
> 赞同：3
> 
> 时间：2012-11-19T16:24:57.430
> 
> 标签：jsf-2, composite-component

简而言之，我的问题是我有一个指定了 componentType 的复合组件。当我在页面上单独使用复合组件时，它工作正常。当我将它嵌套在另一个复合组件中时（也在 ui:repeat 中），我得到一个异常，试图找到我在 UINamingContainer 内的 componentType 类上定义的属性——这是错误的类。我发现我可以通过替换来解决这个问题`cc.whatever`，`component.parent.parent.parent.whatever`但我发现这有点严重。我假设我正在做一些让 JSF 感到困惑的愚蠢事情，但我不确定它是什么或者我应该做些什么不同的事情。

现在，在令人难以忍受的细节中，我有以下复合组件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<ui:component xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:cc="http://java.sun.com/jsf/composite"
              xmlns:ice="http://www.icesoft.com/icefaces/component"
              xmlns:f="http://java.sun.com/jsf/core">
  <cc:interface componentType="edu.nrao.sss.tools.resrccat.ui.support.LinearVelocityUIComponent">
    <cc:attribute name             = "value"
                  class            = "edu.nrao.sss.measure.LinearVelocity"
                  required         = "true"
                  shortDescription = "The LinearVelocity value to show or edit."/>

    <cc:attribute name             = "separate-units"
                  type             = "boolean"
                  default          = "true"
                  shortDescription = "If true, provide a drop-box to edit the units separately from the value."/>
  </cc:interface>
  <cc:implementation>
    <ice:inputText id="velocity" value="#{cc.attrs.value}" rendered="#{not cc.attrs['separate-units']}"/>

    <ui:fragment rendered="#{cc.attrs['separate-units']}">
      <ice:inputText id="velocityDecimal" value="#{cc.velocityDecimal}"/>
      <ice:selectOneMenu id="velocityUnits" value="#{cc.velocityUnits}">
        <f:selectItems value="#{siFactory.linearVelocityUnits}"/>
      </ice:selectOneMenu>
    </ui:fragment>
  </cc:implementation>
</ui:component> 
```

支持组件是这样的：

```
@FacesComponent("edu.nrao.sss.tools.resrccat.ui.support.LinearVelocityUIComponent")
public class LinearVelocityUIComponent extends UIInput implements NamingContainer {

  @Override public String getFamily() {
    return UINamingContainer.COMPONENT_FAMILY;
  }

  public LinearVelocity getVelocity() {
    return (LinearVelocity) getValueExpression("value").getValue(FacesContext.getCurrentInstance().getELContext());
  }

  public void setVelocity(LinearVelocity newVelocity) {
    getValueExpression("value").setValue(FacesContext.getCurrentInstance().getELContext(), newVelocity);
  }

  public BigDecimal getVelocityDecimal() {
    return getVelocity().getValue();
  }

  public LinearVelocityUnits getVelocityUnits() {
    return getVelocity().getUnits();
  }

  public void setVelocityDecimal(BigDecimal newVelocity) {
    setVelocity(new LinearVelocity(newVelocity, getVelocityUnits()));
  }

  public void setVelocityUnits(LinearVelocityUnits units) {
    setVelocity(new LinearVelocity(getVelocityDecimal(), units));
  }
} 
```

当我在页面上单独使用这个组件时，一切都很好：

```
<p>Your linear velocity is <rct:linear-velocity value="#{test.velocity}"/></p> 
```

当我将它嵌套在另一个像这样的复合组件中时：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:rct="http://java.sun.com/jsf/composite/components/rct">
  <cc:interface>
    <cc:attribute name="specs"        required="true"/>
    <cc:attribute name="type"         default="line"/>
  </cc:interface>
  <cc:implementation>
    <table class="iceDatTbl">
      <thead>
        <tr>
          ...
          <th class="iceDatTblColHdr2">Minimum<br/>Span</th> 
          ...
        </tr>
      </thead>
      <tbody>
        <ui:repeat var="spec" value="#{cc.attrs.specs}" varStatus="stat">
          <tr class="#{stat.even ? 'iceDatTblRow1' : 'iceDatTblRow2'}">
            ...
            <td class="iceDatTblCol2">
              Req: <rct:linear-velocity value="#{spec.minimumSpan}"/><br/>
              Sug: #{spec.suggestedMinimumSpan}
            </td>
            ...
          </tr>
        </ui:repeat>
      </tbody>
    </table>
  </cc:implementation>
</ui:component> 
```

我得到这个例外：

```
Nov 19, 2012 4:10:37 PM org.icefaces.impl.application.ExtendedExceptionHandler handle
WARNING: queued exception
javax.el.PropertyNotFoundException: /resources/components/rct/linear-velocity.xhtml @20,113 value="#{cc.velocityDecimal}": Property 'velocityDecimal' not found on type javax.faces.component.UINamingContainer
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.facelets.component.UIRepeat$SavedState.populate(UIRepeat.java:823)
    at com.sun.faces.facelets.component.UIRepeat.saveChildState(UIRepeat.java:369)
    at com.sun.faces.facelets.component.UIRepeat.saveChildState(UIRepeat.java:375)
    at com.sun.faces.facelets.component.UIRepeat.saveChildState(UIRepeat.java:375)
    at com.sun.faces.facelets.component.UIRepeat.saveChildState(UIRepeat.java:355)
    at com.sun.faces.facelets.component.UIRepeat.setIndex(UIRepeat.java:440)
    at com.sun.faces.facelets.component.UIRepeat.visitTree(UIRepeat.java:613)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UINamingContainer.visitTree(UINamingContainer.java:163)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at org.icefaces.impl.component.UISeriesBase.visitRows(UISeriesBase.java:1174)
    at org.icefaces.impl.component.UISeriesBase.visitTree(UISeriesBase.java:1065)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at org.icefaces.impl.event.RestoreResourceDependencies.processEvent(RestoreResourceDependencies.java:24)
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
    at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2144)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:302)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:246)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:812)
    at javax.faces.component.UIViewRoot.encodeBegin(UIViewRoot.java:962)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at edu.nrao.sss.webapp.LookupUserFilter.doFilter(LookupUserFilter.java:57)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:111)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我可以做的使它能够工作的替换是这样的：

```
<ui:fragment rendered="#{cc.attrs['separate-units']}">
  <ice:inputText id="velocityDecimal" value="#{component.parent.parent.parent.velocityDecimal}"/>
  <ice:selectOneMenu id="velocityUnits" value="#{component.parent.parent.parent.velocityUnits}">
    <f:selectItems value="#{siFactory.linearVelocityUnits}"/>
  </ice:selectOneMenu>
</ui:fragment> 
```

几个月后，每当我试图通过这样的 hack 让 JSF 工作时，这感觉真的是错误的，而且从历史上看，它毁了我的生活。我将不胜感激任何帮助！我喜欢 JSF，而且我非常喜欢使用复合组件来构建事物，但我确实需要能够嵌套复合组件。

**编辑**：我发现在 Glassfish 中，组件根本不会单独渲染。它会产生相同的错误（UINamingContainer 没有此属性 LinearVelocityUIComponent 有）嵌套在另一个组件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:47:57.237

我能够在 Tomcat 7.0.30 上使用 Mojarra 2.1.14 重现您的问题（并使用`<h:xxx>`这些 ICEfaces 组件的标准 JSF 等效项）。这归咎于嵌套`<ui:repeat>`在 Mojarra 中的破坏状态保存机制。老实说，我不确定 Mojarra 关于[“嵌套 ui:repeat”](http://java.net/jira/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20JAVASERVERFACES%20AND%20%28summary%20~%20%22%2bui%3arepeat%20%2bnested%22%20OR%20description%20~%20%22%2bui%3arepeat%20%2bnested%22%20OR%20comment%20~%20%22%2bui%3arepeat%20%2bnested%22%29)的错误报告中的哪一个涵盖了您的特定问题，报告太多，而您的特定报告对我来说是新的。

在 MyFaces 2.1.9 中，完全相同的代码对我来说很好用。当我至少将外部替换为 or 时，它也可以`<ui:repeat>`正常`<h:dataTable>`工作`<p:dataList>`。

因此，您有 2 个选项来解决此问题：

1.  `<ui:repeat>`用一个完全有价值的实现替换（至少是外部的）`UIData`，例如`<h:dataTable>`or`<p:dataList>`或任何我无法从头顶分辨出来的 ICEfaces 等效项。这可能不会生成您想要的 HTML，但它可以工作并且使用 CSS 您可以做很多事情。

2.  用 MyFaces 替换 Mojarra。不要忘记彻底（单元）测试您的整个 web 应用程序。MyFaces 也有自己的一套怪癖和错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-16T14:04:57.900

如果它对任何人有帮助，我解决了一个类似的问题，我将一个复合组件 (cc) 嵌套在另一个复合组件中。一个实例没问题，一个页面中的两个实例有问题，试图找到属于嵌套 cc 但在主机 cc 中寻找它们的类字段。问题是我为两个 ccs 使用了相同的名称变量。所以，EL 表达式“cc.attrs.bean”让 JSF 难以处理......我通过在 CC 之间保留不同的参数名称来解决它。我花了一段时间才发现这一点。

# sharepoint - 工作流仅在事件接收器 ItemUpdated 完成后开始

> ID：13457997
> 
> 赞同：0
> 
> 时间：2012-11-19T16:25:18.697
> 
> 标签：sharepoint, workflow, sharepoint-workflow, eventreceiver

在工作流程中，我需要发送带有我在事件接收器 ItemUpdated 方法中更新的字段的电子邮件，
但有时工作流程首先完成并发送空电子邮件，有时它工作正常。如何确保**仅**在此项 ItemUpdated 方法完成后才开始工作流？

```
 public override void ItemUpdated(SPItemEventProperties properties)
        {
            base.ItemUpdated(properties);
            this.EventFiringEnabled = false;
            ListsEventReceiverHandlers.ItemUpdated(properties);
            this.EventFiringEnabled = true;
        } 
```

那是我的事件接收器。在 ListsEventReceiverHandlers.ItemUpdated(properties); 我更改了一些字段并希望将更改发送为工作流程<以**并行方式开始**

# java - 在Java中覆盖域类的equal()和hashCode()方法

> ID：13457998
> 
> 赞同：0
> 
> 时间：2012-11-19T16:25:17.190
> 
> 标签：java, hibernate, jakarta-ee, hashcode

我有一个名为的域类`Subscriber`，它的定义是这样的：

```
public class Subscriber {
   private long id;
   private String email;
   private String subscriberName;
   private Topic subscribingTopic;

   //other attributes and getters setters.
}

public class Topic{
   private long id;
   private String topicName; //unique
} 
```

我的问题是我需要重写此订阅者类的 equal() 和 hashCode() 方法。覆盖 equal() 有点容易（只是比较基本属性，在这种情况下有三个）。但是我在覆盖 hashCode() 方法时遇到了问题。在管理我的域的同时，我如何编写我可以信任的 hashCode() 以供 hibernate 安全使用。我可以相信 IDE 生成的吗？

任何帮助将不胜感激，并提前感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:29:37.573

如果您使用的是 Java 7，则可以使用[`Objects.hash()`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash%28java.lang.Object...%29)：

```
return Objects.hash(email, subscriberName, subscribingTopic); 
```

如果您使用的是 Java 6，则可以使用 Guava 的[`Objects.hashCode()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Objects.html#hashCode%28java.lang.Object...%29)方法（与上述相同）。

如果您使用的是 Java 5，则可以使用 Apache commons-lang[`HashCodeBuilder`](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)类来帮助您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T16:28:35.053

您可以使用 Eclipse 之类的 IDE`hashCode`为您生成方法。一种示例`hashCode`方法如下：

```
 @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((email == null) ? 0 : email.hashCode());
        result = prime * result + (int) (id ^ (id >>> 32));
        result = prime
                * result
                + ((subscriberName == null) ? 0 : subscriberName.hashCode());
        result = prime
                * result
                + ((subscribingTopic == null) ? 0 : subscribingTopic
                        .hashCode());
        return result;
    } 
```

您还需要在类中创建类似的`hashCode`方法`Topic`。

每个`Object#hashCode`API：

> hashCode 的一般合约是：
> 
> 每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
> 
> *   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
> *   如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

它的一般做法是使用素数 31 并结合 a*31^(x)+b*31^(x-1)+..c 中的属性值来实现对象的唯一编号。在这个过程中，可以使用`hashCode`下划线对象的方法。上述方法也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T16:28:27.250

> 如何使用指定的三个属性编写返回唯一哈希值的 hashCode()？

它不必是唯一的，只要足以区分不相等的值即可。

一种常见的方法是使用组件哈希码，并将它们组合起来`((h1*31)+h2)*31+h3`，依此类推。

这是您的操作方法：首先，`hashCode`为定义`Topic`，如下所示：

```
int hashCode() {
    return topicName.hashCode()*31 + (int)id;
} 
```

您还需要覆盖`Topic`'s `equals`！

然后为 定义哈希码`Subscriber`，如下所示：

```
int hashCode() {
    return id.hashCode()*31*31*31
         + email.hashCode()*31*31
         + subscriberName.hashCode()*31
         + subscribingTopic.hashCode();
} 
```

上面的代码假定构造函数将 的所有组件初始化`Subscriber`为非空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T16:27:15.027

`hashCode()`不需要是唯一的。唯一的问题是它必须为`obj1`and返回相同的哈希码`obj2`，如果`obj1.equals(obj2)`。例如，您可以返回`email.hashCode()`。

完美的哈希函数不存在——不可能为每对不同的元素返回不同的哈希码。Java`equals`用于进一步区分（如果哈希码相同）。

# xml - XMLWriter 上的格式总是写在同一行

> ID：13457999
> 
> 赞同：0
> 
> 时间：2012-11-19T16:25:21.893
> 
> 标签：xml, vb.net, xml-formatting

我有一个子程序，我试图用它来输出一些 XML，但是无论我做什么，输出文件都会将所有内容都写在同一行：这是我的代码，你能告诉我我可能出错的地方吗？

```
 Private Sub CreateActionFile()

        Dim lobjDirectory As New DirectoryInfo(mstrFolderName)
        Dim lobjFiles As New List(Of FileInfo)
        lobjFiles.AddRange(lobjDirectory.GetFiles("*.xml"))
        Dim lobjWriter As XmlWriter = XmlWriter.Create(mstrFolderName & "\" & txtActionName.Text & ".xml")

        Dim lobjSettings As New XmlWriterSettings()

        lobjSettings.Indent = True
        lobjSettings.NewLineOnAttributes = True

        Dim lstrStartFileNumber As Integer = CInt(txtFrom.Text)
        Dim lstrEndFileNumber As Integer = CInt(txtTo.Text)

        lobjWriter.WriteStartElement("Action")
        lobjWriter.WriteAttributeString("ID", Me.txtID.Text)
        lobjWriter.WriteAttributeString("Name", Me.txtActionName.Text)
        lobjWriter.WriteAttributeString("Type", "XML")
        lobjWriter.WriteStartElement("xml")
        While lstrEndFileNumber > lstrStartFileNumber
            For Each lobjFile As FileInfo In lobjFiles
                If lobjFile.Name.StartsWith(lstrStartFileNumber.ToString) Then
                    Dim lobjXmlDom As New XmlDocument
                    lobjXmlDom.Load(lobjFile.FullName)
                    lobjXmlDom.WriteContentTo(lobjWriter)
                    lstrStartFileNumber = lstrStartFileNumber + 1
                Else
                    'Nothing - move on
                End If
            Next
        End While
        lobjWriter.WriteEndElement()
        lobjWriter.WriteEndElement()
        lobjWriter.WriteEndDocument()

        lobjWriter.Close()

    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:30:16.353

您正在*创建*设置，但没有将它们传递给任何东西：

```
Dim lobjSettings As New XmlWriterSettings()
lobjSettings.Indent = True
lobjSettings.NewLineOnAttributes = True 
```

您应该在*创建*时使用它们`XmlWriter`：

```
Dim filename = Path.Combine(mstrFolderName, txtActionName.Text & ".xml")
Dim lobjWriter = XmlWriter.Create(filename, lobjSettings) 
```

（我已经将文件名从编写器创建中分离出来只是为了格式化，但请注意使用`Path.Combine`。）