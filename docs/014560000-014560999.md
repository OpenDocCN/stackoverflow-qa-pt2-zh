# StackOverflow 问答 14560000-14560999

# javascript - 在 Firefox 中使用 javascript 从剪贴板数据复制

> ID：14560004
> 
> 赞同：2
> 
> 时间：2013-01-28T10:29:45.887
> 
> 标签：javascript, clipboarddata

我想使用剪贴板数据，以便我可以以某种 html 格式复制和显示复制的数据。使用“window.clipboardData”我可以为 Internet Explorer 执行此操作，使用“event.clipboard”我可以以某种方式为 Chrome 和 Safari 解决这个问题。我仍然无法找到 Firefox 的修复程序。任何帮助或建议将不胜感激。

我不想使用任何插件或 Flash 对象。然而，jQuery 中的解决方案同样可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:09:06.970

由于可以理解的安全原因，Firefox 不允许访问剪贴板。

# jquery - 在使用 dateAxisRenderer 的 jqPlot 上调用 replot

> ID：14560005
> 
> 赞同：0
> 
> 时间：2013-01-28T10:29:47.577
> 
> 标签：jquery, jqplot

我正在使用 jqplot 和 dateAxisRenderer 在 x 轴上显示带有日期标签的折线图。但是，我需要使用新数据定期更新该图。调用 replot 时，绘图不会改变，如下例所示。有什么建议么？

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
         <script type="text/javascript" src="../jquery/ui/1.9.2/custom/js/jquery-1.8.3.js"></script>

        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/jquery.jqplot.js"></script> 
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.dateAxisRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.canvasTextRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.canvasAxisTickRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.AxisLabelRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.categoryAxisRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.barRenderer.js"></script>
        <script type="text/javascript" src="../jquery/plugins/jqplot/dist/plugins/jqplot.enhancedLegendRenderer.js"></script>

        <link rel="stylesheet" type="text/css" href="../jquery/plugins/jqplot/dist/jquery.jqplot.css" />
    </head>

    <body>
        <div id="chartdiv" style="height:400px;width:800px;"></div>

        <script type="text/javascript">
            $(document).ready(function(){
                var line1 = [
                    [new $.jsDate("2013-01-28 1:10PM"), 1.0],
                    [new $.jsDate("2013-01-28 1:11PM"), 2.0],
                    [new $.jsDate("2013-01-28 1:12PM"), 4.0],
                    [new $.jsDate("2013-01-28 1:13PM"), 8.0],
                    [new $.jsDate("2013-01-28 1:14PM"), 16.0],
                    [new $.jsDate("2013-01-28 1:15PM"), 32.0]
                ];
                var plot2 = $.jqplot('chartdiv', [line1] ,{
                    series:[{lineWidth:4, showMarker:false, renderer:$.jqplot.LineRenderer}],
                    axesDefaults: {
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer
                    },
                    axes:{
                        xaxis:{
                            renderer:$.jqplot.CategoryAxisRenderer,
                                tickOptions:{
                                    formatString:'%F %X',
                                    angle: -30
                                }
                        },
                    }
                });

                alert("wait");
                line1 = [
                    [new $.jsDate("2013-01-28 1:10PM"), 32.0],
                    [new $.jsDate("2013-01-28 1:11PM"), 16.0],
                    [new $.jsDate("2013-01-28 1:12PM"), 8.0],
                    [new $.jsDate("2013-01-28 1:13PM"), 4.0],
                    [new $.jsDate("2013-01-28 1:14PM"), 2.0],
                    [new $.jsDate("2013-01-28 1:15PM"), 1.0]
                ];
                plot2.data = [line1];
                plot2.replot({resetAxes:true});
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:11:14.453

我最近对 ​​jqplot 做了一些工作，发现数据处理中的不一致有点令人沮丧。

给定您的示例`plot2`：对于条形图，您必须先看一下然后`plot2.series[i].data`再看它（参考：[http](http://www.jqplot.com/deploy/dist/examples/selectorSyntax.html) ://www.jqplot.com/deploy/dist/examples/selectorSyntax.html ）`plot2.data``replot()`

例如对于您的代码

```
 ...
            plot2.series[0].data = [line1];
            plot2.replot({resetAxes:true});
            ... 
```

我试图抽象出不同图表类型的细微差别，但在此之前，我一直在通过将其存储`data`在父对象上、破坏绘图然后使用`$.jqplot(e, data,options)`

# python - NGINX、uWSGI 和 Flask 未运行子进程

> ID：14560010
> 
> 赞同：1
> 
> 时间：2013-01-28T10:29:59.173
> 
> 标签：python, nginx, flask, uwsgi

我的 NGINX 配置：

```
server {
  server_name 127.0.0.1;
  listen 4450;
  location ~* ^/.*$ {
  include uwsgi_params;
    uwsgi_pass unix:/tmp/esrvadmin.sock;
  }
} 
```

uWSGI 启动：

```
uwsgi --uid root -s /tmp/esrvadmin.sock --chown-socket nobody:root \
  --file /var/www/sitios/manten/srv.py \
  --processes 2 --callable app --pidfile /var/run/edesarrollos/esrvadmin.pid 
```

带有烧瓶代码的 Python：

```
import os, subprocess
from flask import Flask, abort, request
app = Flask(__name__)

DETO_DIR = '/var/www/sitios/manten/detos'

@app.route('/detonate')
def index():
  #return str(subprocess.check_output(['ls','-l']))
  token = request.args.get('token','')
  if token != '':
     # Si no existe el directorio de detonatores, se crea
     if not os.path.exists(DETO_DIR):
       os.mkdir(DETO_DIR)
     if os.path.isfile(DETO_DIR+"/"+token):
       try:
         os.system(open(DETO_DIR+"/"+token).read())
       except Exception as ex:
         return str(ex)
       return "Reiniciado Correctamente"
     else:
       abort(404) 
  else:
    abort(404)

if __name__ == "__main__":
    app.run(debug=True,host='0.0.0.0') 
```

在**主**模式下，我可以在 os.system("something args") 中运行任何东西并接收它的 HTTP 响应，即使使用“服务启动”并且它正确完成。我也尝试了子进程功能，但没有运气。

但是当我从 NGINX-uWSGI 运行时，我得到一个永远等待的 http 请求，当然永远不会响应，但它完成了工作（启动服务）。

我发现日志中最好的错误描述：

```
2013/01/28 03:38:24 [error] 3978#0: *3 upstream timed out (110: Connection timed out) 
while reading response header from upstream, client: 
127.0.0.1, server: 127.0.0.1, request: "GET
/detonate?token=start-    
a81260812b643d8672ccf9570033109f200595779e0a352e630a75760328e2d375025ef349e
3d599f368092abb63511f-23611e81194b04d5d0a6d0f02baf7fb9
HTTP/1.1", upstream: "uwsgi://unix:/tmp/esrvadmin.sock:", host: "127.0.0.1:4450" 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:35:47.483

在这里阅读：[http](http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html) ://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html（--close-on-exec 部分），请不要以 root 身份运行 uWSGI！

# postgresql - 创建/删除触发器时会影响哪些 PG_CATALOG 表？

> ID：14560011
> 
> 赞同：0
> 
> 时间：2013-01-28T10:30:10.127
> 
> 标签：postgresql, triggers

我有一种情况，一个好心的人直接从 pg_catalog 模式中的 pg_trigger 表中删除了许多触发器。这显然不是数据库存储有关触发器信息的唯一表，因为他现在遇到错误。有谁知道我需要修改以整理的表格列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:58:29.557

我还没有在源代码树中找到代码，但这就是我可以马上说的。

*   pg_trigger
*   pg_depend
*   pg_constraining（在某些情况下）

这就是我能马上达到的程度。

# twitter-bootstrap - Twitter Bootstrap 移动组件 - 最佳实践

> ID：14560016
> 
> 赞同：3
> 
> 时间：2013-01-28T10:30:27.310
> 
> 标签：twitter-bootstrap, responsive-design

使用 Twitter Bootstrap 构建响应式网站时，可以使用出色的 JavaScript 组件，例如选项卡或折叠（手风琴）。但是，特定组件的选择不一定适用于所有设备。

就我而言，在桌面版本中，我使用了[tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)。但是在智能手机版本中，标签变得无法使用，因为一旦一个标签包含三个或更多标签，由于屏幕尺寸小，它们就不能排成一行。相反，对于移动版本，[折叠](http://twitter.github.com/bootstrap/javascript.html#collapse)将是一个不错的选择。

我的问题旨在阐明执行此类更改的最佳实践。我可以想象两种解决方法，但都相当难看，我想知道是否有更清洁的解决方案：

1.  创建一个使用 CSS 类*visible-desktop的选项卡式内容和一个使用 CSS 类**visible-phone*的折叠内容。这样做的缺点是实际的选项卡内容必须交付两次，如果它包含用户生成的 HTML 代码（如我的例子），一旦用户输入带有 id 的 HTML 元素，就会导致 W3C 无效代码（因为这个 id 会在页面上出现两次）。

2.  通过 JavaScript 从选项卡更改为折叠。这不是一个令人满意的解决方案，因为 a) 它需要执行 javascript，并且 b) 有很多代码需要更改（请参阅文档中的标记差异）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:57:50.647

我的方法是将我的主列表菜单变成手机显示的下拉菜单。 [CSS-Tricks.com 将菜单转换为下拉菜单](http://css-tricks.com/convert-menu-to-dropdown)

我基于上面的代码生成了我的生产代码，并对其进行了大量修改，以充当大型显示器的滑块面板和手机的下拉列表。

为什么要考虑手机的下拉列表？在手机显示屏上，下拉菜单列表将激活手机的原生滚动 UI，其外观和性能与原生手机应用程序非常相似。使用下拉列表还可以减少设计中的许多高度承诺。

当下拉菜单被激活时，用户将被自动带到所选择的项目链接。

我在这里的例子： [使用自动重定向下拉菜单](http://jsfiddle.net/9KPPf/)

```
 $(document).ready(function() {
    var sNavFirsLI2 = $(this).find("#gbl_sNav ul").children(":first-child");        
    sNavFirsLI2.each(function(){
               console.log('Outside: '+$(this).html());
    });
});var currentSnav;  sNavAccordion = new Boolean(false);  currentSnav = $("#gbl_sNav").html();

$("#removeAccordion").click(function() {
    if(sNavAccordion == true){
        var tempContents;
            $('#gbl_sNav ul').show();
            $('#gbl_sNav select').remove();
            //set Snav back to false
            sNavAccordion = false;  
    }else{
        alert('Nothing to remove');
    }
});

    $("#enableAccordion").click(function() {        
        if(sNavAccordion == false){
            $("<select />").appendTo("#gbl_sNav");
            $("<option />", {
               "selected": "selected",
               "value"   : "",
               "text"    : "Go to..."
            }).appendTo("#gbl_sNav select");
            $("#gbl_sNav a").each(function() {
             var myli = $(this);
             $("<option />", {
                 "value"   : myli.attr("href"),
                 "text"    : myli.text()
             }).appendTo("#gbl_sNav select");
            });     
        $('#gbl_sNav ul').hide();

            sNavAccordion = true;               
        }else{
            return false;
        }
    }); 
```

# php - “Javascript”可以解密由 PHP 加密的数据吗？

> ID：14560017
> 
> 赞同：3
> 
> 时间：2013-01-28T10:30:30.567
> 
> 标签：php, javascript, json, encryption

当我*通常*从 PHP 返回 Ajax/JSON 时，Javascript 会获取它并将其存储在一个变量中，例如：`var myJSON = ajaxReturnedJSON;`然后 Javascript 读取它。

我很想知道php是否加密了json：

```
echo json_encode($encrypted_data); //using some key like: "abc123" 
```

*   那么，可以`Javascript`使用相同的密钥解密它吗？
*   `encrypt/decrypt`php和js有什么通用的方法吗？

***注意***：我知道`key`在 JS 端可以看到，但我也可以`hex`对整个字符使用 JS Obfucators，整个 JS`file`。所以它或多或少会保护，而不是平淡无奇。

*欢迎任何想法和讨论。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:41:57.253

当然。加密和解密算法只是可以在几乎任何编程语言中执行的数学运算。Javascript 作为一种编程语言，您可以在其中实现您需要的任何解密算法。

如果这个 Javascript 在浏览器中运行，这通常是毫无意义的。加密用于向某人隐藏信息。在服务器-客户端场景中，存在三方：Web 服务器、浏览器/用户、第三方。现在：

*   你不需要隐藏来自网络服务器的信息，因为那是你。
*   您不能向浏览器/用户隐藏信息，因为这有什么意义？如果您需要隐藏它，请不要首先输出信息。如果浏览器/Javascript可以解密信息，那么用户也可以，所以它不会被隐藏。
*   传输加密可能会隐藏第三方（中间人等）窥探的信息，但为此已经有一个更好的解决方案：SSL/TLS。此外，如果您将解密数据所需的所有信息发送到客户端，第三方也可以拦截此信息并像客户端一样解密数据。

# wpf - 扩展 WPF Toolkit 图表中的 LineSeries 以提供数据标签

> ID：14560021
> 
> 赞同：2
> 
> 时间：2013-01-28T10:30:36.140
> 
> 标签：wpf, wpf-controls, data-visualization, wpftoolkit

我复制了一个我发现的实现，它在 WPF Toolkit DataVisualization 的折线图上提供数据标签，并对其进行了一些更改。它显示数据点旁边的绘图值。图表会时不时地用不同的数据重新绘制自己，并且在发生这种情况时不会删除数据标签。

我覆盖`RemoveDataPoint`了基类中的方法以尝试从中删除，`TextBlock`但这`Canvas`会抛出一个`InvalidOperationException`（枚举器无效，因为集合已更改）。我了解为什么会发生异常，但是如何`TextBlocks`从`Canvas`相应的删除时`DataPoint`删除？这是我到目前为止所拥有的：

```
public class DataTagLineSeries : LineSeries
{
    private Canvas _labelsCanvas;

    private readonly Dictionary<DataPoint, TextBlock> _currentLabels = new Dictionary<DataPoint, TextBlock>();

    public bool DisplayLabels { get; set; }
    public string LabelBindingPath { get; set; }
    public Style LabelStyle { get; set; }
    public Point LabelOffset { get; set; }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        _labelsCanvas = (Canvas)GetTemplateChild("PlotArea");

        Clip = null;
    }

    protected override void UpdateDataPoint(DataPoint dataPoint)
    {
        base.UpdateDataPoint(dataPoint);

        if (DisplayLabels && dataPoint.Visibility == Visibility.Visible)
            Dispatcher.BeginInvoke(DispatcherPriority.Normal, (Action)(() => CreateLabel(dataPoint)));
    }

    protected override void RemoveDataPoint(DataPoint dataPoint)
    {
        base.RemoveDataPoint(dataPoint);

        if (_currentLabels.ContainsKey(dataPoint))
        {
            _labelsCanvas.Children.Remove(_currentLabels[dataPoint]);
            _currentLabels.Remove(dataPoint);
        }
    }

    private void CreateLabel(DataPoint dataPoint)
    {
        TextBlock label;

        if (_currentLabels.ContainsKey(dataPoint))
        {
            label = _currentLabels[dataPoint];
        }
        else
        {
            label = new TextBlock();

            _labelsCanvas.Children.Add(label);

            _currentLabels.Add(dataPoint, label);

            label.Style = LabelStyle;

            var binding = LabelBindingPath != null
                                    ? new Binding(LabelBindingPath) { Source = dataPoint.DataContext }
                                    : new Binding("DependentValue") { Source = dataPoint };

            BindingOperations.SetBinding(label, TextBlock.TextProperty, binding);
        }

        var coordinateY = Canvas.GetTop(dataPoint) + LabelOffset.Y;
        var coordinateX = Canvas.GetLeft(dataPoint) + LabelOffset.X;

        Canvas.SetTop(label, coordinateY);
        Canvas.SetLeft(label, coordinateX);
    }
} 
```

# log4j - 如何检查 LOG4J 文件附加程序是否已关闭？

> ID：14560024
> 
> 赞同：0
> 
> 时间：2013-01-28T10:30:40.083
> 
> 标签：log4j, fileappender

如何检查 LOG4J 文件附加程序是否已关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:00:16.653

您可以检查特定附加程序上[*关闭*](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html#closed)的属性。由于*closed*是一个受保护的字段，您可能需要在使用 java 反射访问之前将其设置为可见。

# javascript - 花式框未正确显示并通过覆盖单击关闭

> ID：14560025
> 
> 赞同：0
> 
> 时间：2013-01-28T10:30:41.473
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我在我的应用程序中使用了 fancybox ( [http://fancyapps.com](http://fancyapps.com) )。我有一个这样定义的 div：

```
 <div id="dialog-user-login" title="User Login" style="display: none" class="popup-dv">
            <div id="myDivID7">
                <div class="up-content">
                    Your Contents SHow HERE
                    <input id="txtUserName" name="txtUserName" class="normal" type="text" /><br />
                    <input id="txtpassword" name="txtUserName" class="normal" type="password" /><br />
                </div>
                <div class="social-icons">
                    <img src="wp-content/themes/touch/images/twit-icon.png" width="65" height="22">
                    <img src="wp-content/themes/touch/images/face-icon.png" width="65" height="22">
                </div>
            </div>
        </div> 
```

我已经包含了这些文件：

```
<script src="../../Content/FancyBox/jquery-1.9.0.min.js" type="text/javascript"></script>
    <link href="../../Content/FancyBox/jquery.fancybox.css" rel="stylesheet" type="text/css" />
    <script src="../../Content/FancyBox/jquery.fancybox.js" type="text/javascript"></script> 
```

并使用此代码

```
 $(document).ready(function () {

            $("a#fancyBoxLink1").click();

}); 
```

1）它显示了fancybox，但是当我单击叠加时，它会关闭。2）。如果我使用以下代码，它不起作用：

```
 $("a#fancyBoxLink1").fancybox({
            'href': '#myDivID1',
            'titleShow': false,
            'transitionIn': 'elastic',
            'transitionOut': 'elastic'
        }); 
```

使用这个 html：

```
<a href="#myDivID1" class="mrgn-ao" id="fancyBoxLink1">
        <div id="dialog-user-login" title="User Login" style="display: none" class="popup-dv">
            <div id="myDivID7">
                <div class="up-content">
                    Your Contenssssssssssssssssssssssssssssssssssssssssssssssssssst SHow HERE
                    <input id="txtUserName" name="txtUserName" class="normal" type="text" /><br />
                    <input id="txtpassword" name="txtUserName" class="normal" type="password" /><br />
                </div>
                <div class="social-icons">
                    <img src="wp-content/themes/touch/images/twit-icon.png" width="65" height="22">
                    <img src="wp-content/themes/touch/images/face-icon.png" width="65" height="22">
                </div>
            </div>
        </div>
        </a> 
```

请建议我的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:26:48.027

您需要在`<head>`代码中添加：

```
<script>
$(document).ready(function() {
$("#fancyBoxLink1").fancybox({
'titleShow': false,
'transitionIn': 'elastic',
'transitionOut': 'elastic'
});
});
</script> 
```

在`<body>`代码上：

```
<a href="#dialog-user-login" class="mrgn-ao" id="fancyBoxLink1">
<div id="dialog-user-login" title="User Login" style="display: none;width:500px;" class="popup-dv">
<div id="myDivID7">
<div class="up-content">
Your Contenssssssssssssssssssssssssssssssssssssssssssssssssssst SHow HERE
<input id="txtUserName" name="txtUserName" class="normal" type="text" /><br />
<input id="txtpassword" name="txtUserName" class="normal" type="password" /><br />
</div>
<div class="social-icons">
<img src="wp-content/themes/touch/images/twit-icon.png" width="65" height="22">
<img src="wp-content/themes/touch/images/face-icon.png" width="65" height="22">
</div>
</div>
</div>
</a> 
```

href - 这是 pop-up-div 的链接

# llvm - Value* 到 Instruction*/LoadInst* 转换

> ID：14560027
> 
> 赞同：0
> 
> 时间：2013-01-28T10:30:41.523
> 
> 标签：llvm

您能否告诉我是否可以在 LLVM 中将 a`Value*`转换为`Instruction*/LoadInst*`if 例如`isa<LoadInst>(MyValue)`是真的？在我的特定代码中：

```
Value* V1 = icmpInstrArray[i]->getOperand(0);
Value* V2 = icmpInstrArray[i]->getOperand(1);
if (isa<LoadInst>(V1) || isa<LoadInst>(V2)){
...
if(isa<LoadInst>(icmpInstrArray[i]->getOperand(0)))
    LoadInst *LD100 = cast<LoadInst>(icmpInstrArray[i]->getOperand(0));
        Value *C100 = LD100->getPointerOperand(); //HERE COMPILATION ERROR 
```

此外，我只需要制作`C100->getName()`，我就会得到加载的变量。

编译错误是：`error: ‘LD100’ was not declared in this scope.`

我不认为我可以像那样使用演员表。你能告诉我一种从与我的 ICMP 指令对应的 Load 指令中获取加载变量的方法吗？或者更好的方法是如何从中提取 Load 指令`icmpInstrArray[i]->getOperand(0)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:39:40.207

您缺少 if 语句周围的大括号。您的代码当前等于：

```
if(isa<LoadInst>(icmpInstrArray[i]->getOperand(0))) {
    LoadInst *LD100 = cast<LoadInst>(icmpInstrArray[i]->getOperand(0));
}
Value *C100 = LD100->getPointerOperand(); //HERE COMPILATION ERROR 
```

`LD100`未在 if 语句范围之外定义。这会起作用：

```
if(isa<LoadInst>(icmpInstrArray[i]->getOperand(0))) {
    LoadInst *LD100 = cast<LoadInst>(icmpInstrArray[i]->getOperand(0));
    Value *C100 = LD100->getPointerOperand(); //HERE COMPILATION ERROR
} 
```

# image - codeigniter上传图片代码url错误

> ID：14560028
> 
> 赞同：0
> 
> 时间：2013-01-28T10:30:43.957
> 
> 标签：image, codeigniter, upload, codeigniter-2

这是关于第 9 天的 codeigniter 图像上传和图像处理

[http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-file-uploading-and-image-manipulation/](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-file-uploading-and-image-manipulation/)

我认为此代码与最新的 CI 不兼容。

我收到一个错误

“在此服务器上找不到请求的 URL /codeigniter/gallery。”

我的 htaccess 设置为删除 index.php 我已将我的基本 url 设置为 localhost/codeigniter

模型

```
<?php
class Gallery_model extends CI_Model {

var $gallery_path;
var $gallery_path_url;

function Gallery_model() {
    parent::__construct();

    $this->gallery_path = realpath(APPPATH . '../images');
    $this->gallery_path_url = base_url().'images';
}

function do_upload() {

    $config = array(
        'allowed_types' => 'jpg|jpeg|gif|png',
        'upload_path' => $this->gallery_path,
        'max_size' => 2000
    );

    $this->load->library('upload', $config);
    $this->upload->do_upload();
    $image_data = $this->upload->data();

    $config = array(
        'source_image' => $image_data['full_path'],
        'new_image' => $this->gallery_path . '/thumbs',
        'maintain_ration' => true,
        'width' => 150,
        'height' => 100
    );

    $this->load->library('image_lib', $config);
    $this->image_lib->resize();

}

function get_images() {

    $files = scandir($this->gallery_path);
    $files = array_diff($files, array('.', '..', 'thumbs'));

    $images = array();

    foreach ($files as $file) {
        $images []= array (
            'url' => $this->gallery_path_url . $file,
            'thumb_url' => $this->gallery_path_url . 'thumbs/' . $file
        );
    }

    return $images;
}

} 
```

控制器

```
<?php
class Gallery extends CI_Controller {

function index() {

    $this->load->model('Gallery_model');

    if ($this->input->post('upload')) {
        $this->Gallery_model->do_upload();
    }

    $data['images'] = $this->Gallery_model->get_images();

    $this->load->view('gallery', $data);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:20:57.283

你试过绝对网址吗？

进行测试，而不是`base_url()`使用整个路径`"http://mywebsite.com/path/to/gallery"`

如果它与绝对 url 一起使用，则意味着您正在使用 wearg url 路径，然后您可以修复它

# c++ - 复制目录的所有内容并创建一个 zip 文件

> ID：14560031
> 
> 赞同：1
> 
> 时间：2013-01-28T10:30:46.370
> 
> 标签：c++, wxwidgets

我一直在尝试使用 wxwidgets(C++) 编写一个小型应用程序，它复制应用程序临时目录的所有内容并压缩该目录的所有内容。但是，我无法完全复制临时区域的内容。这是我的代码

```
 wxString result;
 result = wxFileName::GetTempDir(); //Gets the temp area.

 wxFileName dir(result, wxEmptyString);
 dir.AppendDir(_T("Application"));
 bool a = dir.DirExists();
 wxFFileOutputStream out(_T("test.zip"));
 wxZipOutputStream zip(out);
 wxString sep(wxFileName::GetPathSeparator());

 zip.PutNextEntry(_T("entry1.txt"));
 wxString temp = dir.GetLongPath();
 zip.PutNextDirEntry(temp); 
```

我能够创建 test.zip 并写入 entry1.txt 以及临时目录（没有它的内容）。但是，我似乎不明白如何复制子目录和目录中的文件。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:44:43.830

使用[wxDir](http://docs.wxwidgets.org/trunk/classwx_dir.html)枚举给定目录的文件和子目录。使用[wxDirTraverser](http://docs.wxwidgets.org/trunk/classwx_dir_traverser.html)或`wxDir::GetAllFiles()`递归地做同样的事情。

# mysql - 在mysql中的父记录之后选择具有子值的记录

> ID：14560032
> 
> 赞同：1
> 
> 时间：2013-01-28T10:30:46.337
> 
> 标签：mysql, sorting, select, parent-child

我的表中有这些记录：

```
id   |   title     |  sub
-----+-------------+------
1    | Parent 1    | 0
2    | Parent 2    | 0
3    | Sub 1-1     | 1
4    | Parent 3    | 0
5    | Sub 1-2     | 1
6    | Sub 2-1     | 2
7    | Parent 4    | 0 
```

现在我想用这样的一个查询从我的表中选择这些记录：

```
id   |   title     |  sub
-----+-------------+------
1    | Parent 1    | 0
3    | Sub 1-1     | 1
5    | Sub 1-2     | 1
2    | Parent 2    | 0
6    | Sub 2-1     | 2
4    | Parent 3    | 0
7    | Parent 4    | 0 
```

我想按父母和孩子对我的记录进行排序。

如何在 mySQL 中执行此操作？

**更新：**

我使用这个查询：

```
SELECT a.*, 
       CASE WHEN SUB = 0 THEN ID ELSE SUB END expression
  FROM category a
 ORDER BY CASE WHEN SUB = 0 THEN ID ELSE SUB END, ID 
```

我的数据是：

```
id  | title     | sub 
----+---------------+-------
1   | Parent 1  | 0
2   | Parent 2  | 0
3   | Sub 1-1   | 7
4   | Parent 3  | 0
5   | Sub 1-2   | 4
6   | Sub 2-1   | 2
7   | Parent 4  | 0 
```

结果是：

```
id  | title     | sub   | expression
----+-----------+-------+-----------
1   | Parent 1  | 0     | 1
2   | Parent 2  | 0     | 2
6   | Sub 2-1   | 2     | 2
4   | Parent 3  | 0     | 4
5   | Sub 1-2   | 4     | 4
3   | Sub 1-1   | 7     | 7
7   | Parent 4  | 0     | 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:17:01.940

如果不超过 1 个级别，您可以`CASE`在 order by 子句中使用以下表达式：

```
SELECT a.*, 
       CASE WHEN SUB = 0 THEN ID ELSE SUB END expression
  FROM test a
 ORDER BY CASE WHEN SUB = 0 THEN ID ELSE SUB END, SUB, TITLE 
```

使用该表达式，它将始终按 parentId 排序，即`SUB`填充时的列或非`ID`子列时的列。

结果：

```
ID  TITLE        SUB   EXPRESSION
1   Parent 1       0          1
3   Sub 1-1        1          1
5   Sub 1-2        1          1
2   Parent 2       0          2
6   Sub 2-1        2          2
4   Parent 3       0          4
7   Parent 4       0          7 
```

如果任何子项可能是另一条记录的父项（例如 Sub 1-2-1），它仍然会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:59:51.317

尝试这个

```
 SELECT * ,replace(replace(title,'Parent',''),'Sub','') as nums  
   FROM Table1
    order by nums 
```

[**SQLFIDDLE 演示在这里**](http://sqlfiddle.com/#!2/f960c/24)

会导致

```
 ID   TITLE      SUB   NUMS
   1    Parent 1    0     1
   3    Sub 1-1     1     1-1
   5    Sub 1-2     1     1-2
   2    Parent 2    0     2
   6    Sub 2-1     2     2-1
   4    Parent 3    0     3
   7    Parent 4    0     4 
```

编辑。

由于您对问题的不同结果希望。尝试这个

```
SELECT * ,replace(title,'Item','') as nums  
FROM category
order by nums 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/3fbcc/1)

**Obs：**确保`Item`与数字分开。

# javascript - jpages 插件在 AJAX 调用后应用

> ID：14560033
> 
> 赞同：1
> 
> 时间：2013-01-28T10:30:52.390
> 
> 标签：javascript, jquery, ajax, pagination

我目前正在做这个项目。这是查看结果的链接。

[Tigermom2/学校搜索/](http://dev.jumpcatch.com/tigermom2/school-search/)

我已经使用[jPages](http://luis-almeida.github.com/jPages/)插件应用了分页。分页与排序一起第一次正常工作。但是当您更改左侧的过滤器时，分页有效，但排序会产生波动。

jPages 插件在 AJAX 加载之前被激活。我们需要停用插件并在加载 AJAX 页面内容后重新激活它。如何停用和重新激活 jPages 插件？

页面 AJAX 内容加载后如何启动插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:39:28.507

在成功或完成 ajax 调用后重新启动 jPages 插件。

```
$.ajax({
      url: 'your ajax page url',
      type: 'Either POST or GET',
      data: 'Data to be sent to ajax page',
      success: function(){
               $("div.holder").jPages({
                  containerID: "pageContainer",
                  perPage : 5
               });
             }
}); 
```

或者

```
$.ajax({
      url: 'your ajax page url',
      type: 'Either POST or GET',
      data: 'Data to be sent to ajax page',

}).done(function(){
   $("div.holder").jPages({
                  containerID: "pageContainer",
                  perPage : 5
               });
}); 
```

# c# - 小型程序的框架

> ID：14560034
> 
> 赞同：1
> 
> 时间：2013-01-28T10:30:53.637
> 
> 标签：c#, .net, mvvm, frameworks, inversion-of-control

在我的工作中，我全权负责开发小型工具来为我们的客户解决问题。大多数程序通常需要一年多或少于一年的时间来开发。但有时它只是我在一个月内开发的一个小工具。

今天，我使用以下框架进行开发：

*   [MVVM 灯](http://mvvmlight.codeplex.com/)
*   [忍者](http://www.ninject.org/)
*   [单元](http://www.nunit.org/)
*   [起订量](http://code.google.com/p/moq/)

我对此感到很自在，但总有可能让事情变得更好。有时我什至觉得自己能做的有点有限。几年前我决定使用这些工具，我想从那时起它发生了很多。今天有什么相关的？我可以安全地继续与他们合作，还是应该考虑更换任何框架？或者也许用任何额外的框架扩展我的工具箱？

特别是当我开发小型应用程序时，框架有时会妨碍我，它变得不必要地繁琐。您对我如何更轻松地开发仍然灵活的小程序有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:09:01.757

我会将此添加为评论，但我没有代表，但是：我发现对于简单快速的小型轻量工具来说，构建我自己的 MVVM 实现更容易。要获得正确的 MVVM 结构，您实际上只需要几件事即可开始，基础 viewModel 的良好实现和导航页面的好方法。这些框架通常会这样做并在顶部添加更多内容。如果您不需要额外的功能，它可能会妨碍您。自己构建可以让您根据自己的需求量身定制，并且可以在需要时快速重复使用它们。

# android - Robolectric：在 HttpResponse 中测试 Cookie

> ID：14560037
> 
> 赞同：1
> 
> 时间：2013-01-28T10:31:00.430
> 
> 标签：android, robolectric, android-testing

我正在使用[Robolectric](http://pivotal.github.com/robolectric/)来测试我的 Android 应用程序。我正在尝试编写一个测试来验证我的 Android 应用程序是否正确接收来自 HttpResponse 的 cookie。我尝试了几个选项，但无法让它工作。

这是我在测试中尝试的：

```
BasicHeader responseHeader = new BasicHeader("Set-Cookie", "cookiename=value");
String responseBody = "OK"
int responseCode = 200;
HttpResponse httpResponse = new TestHttpResponse(responseCode, responseBody, responseHeader);
Robolectric.addPendingHttpResponse(httpResponse); 
```

这就是我的 Android 应用程序代码的样子：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(urlString);
// omitted: add username & password to request as urlencoded parameters
HttpResponse response = client.execute(httpPost);
// ...
List<Cookie> cookies = client.getCookieStore().getCookies(); 
```

其他测试运行良好，所以我让 Robolectric 工作。但是 cookie 列表始终是空的，尽管当我将应用程序与（应用程序引擎）后端一起使用时，它工作正常。但是，我可以在测试中从 HttpPost 获取 urlencoded 用户名和密码，因此请求确实得到了处理，只是没有任何 cookie。

有没有人尝试过类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T11:21:37.527

放置您的 Robolectric.addPendingHttpResponse(httpResponse); 调用android的连接方法之前的行。

它可能工作...

# pyrocms - 如何使用页面为 PyroStream Data 创建 PyroCMS 视图或布局？

> ID：14560040
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:13.490
> 
> 标签：pyrocms

我在 PyroCMS 中创建了两个流。**我想**通过 URL（显然）显示此数据，**而不将其与 CMS 中的页面**（客户端可以编辑）相关联。

有没有办法通过 system/cms/config/routes.php 做到这一点，或者这需要一个独立的模块或小部件来实现这一点？

我是 PyroCMS 的新手，所以可能会离开这里。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:45:04.053

如果你想从一个 URL 输出数据，那么它需要是一个页面，或者一个模块控制器。

模块控制器会很棘手，因此将其制成一个页面，只是不要让您的客户端使用权限编辑页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:57:33.880

好吧，也许模块正是您需要的东西。如果我理解正确，您只想有一个没有布局的空页面以及通过模块、小部件、插件等生成的一些结果。我建议只创建一个模块并设置布局属于它的方法。：

```
if (!defined('BASEPATH'))
  exit('No direct script access allowed');

class StreamDisplay extends Public_Controller {

  public function index() {
    $this->template->set_layout(FALSE);

    echo 'Some awesome streamdata from Pyro streams';
    //Or load a view just to be clean:
    $this->template->title('Stream')->build('index');
  }

} 
```

# qt - 如何在 Windows 上运行基于 Qt 的程序

> ID：14560041
> 
> 赞同：1
> 
> 时间：2013-01-28T10:31:14.103
> 
> 标签：qt, mingw

最近，我使用 Qt Creator 编写了一个程序。当我使用 IDE 执行它时它运行良好，但是当我想单独运行 .exe 文件时，会出现警告，表明计算机中缺少 mingw10.dll、QtCore4.dll 等文件。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:34:09.323

看看那个：

[https://stackoverflow.com/a/621337/1758762](https://stackoverflow.com/a/621337/1758762)

如果您已经构建了程序的“发布”版本，请将其和以下 DLL 从 qt\bin 复制到一个目录：

QtCore4.dll、QtGui4.dll 和 mingwm10.dll（如果您使用 gcc 和 minGW 编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:39:15.397

您从以下位置复制这些 dll：MinGW_install\bin 和 qt_install_path\bin 与您的应用程序位于同一文件夹中。

一个很酷的工具可以用来查看需要什么是[DependencyWalker](http://www.dependencywalker.com/)

而且您还可以在[Qt 文档](http://qt-project.org/doc/qt-4.8/deployment-windows.html)中阅读更多内容- 他们在那里也提供了静态构建，您创建了一个不需要 Qt dll 的大 exe - 但请注意您必须自己构建 Qt 并且 LGPL 对此有一些限制（所以我猜您可以忽略静态构建部分并阅读那里的插件部署）

# django - 编辑时不显示 Django 对象

> ID：14560044
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:26.523
> 
> 标签：django

我正在尝试通过表单编辑现有对象，但没有用当前值填充所有内容。这个对象确实有一个值，但是当我去编辑时，所有字段中都没有显示任何内容，只显示空白字段。

这是模型：

```
class Flow (models.Model):
    title = models.CharField("Title", max_length=200)
    slug = models.SlugField(unique=True)
    description = models.TextField("Description")
    url = models.URLField("URL")
    tags = TaggableManager()
    flow_date = models.DateTimeField(auto_now_add=True, blank=True, null=True)
    author = models.ForeignKey('auth.User', null=True)

    def __unicode__(self):
        return self.title

    @permalink
    def get_absolute_url(self):
        return ('flow.views.details', (), {'slug':self.slug})

    def save(self, *args, **kwargs):
        if not self.slug:
            self.slug = slugify(self.title)
        return super(Flow, self).save(*args, **kwargs)

    class Meta:
        verbose_name = 'Flow' 
```

这是视图

```
class FlowForm(forms.ModelForm):
    class Meta:
        model = Flow
        exclude = ['flow_date', 'slug']

@login_required
def edit(request, flow_id = None):
    flow = None
    if flow_id is not None:
        flow = get_object_or_404(Flow, pk=flow_id)

    if request.method == 'POST':
        form = FlowForm(request.POST, instance=flow)
        if form.is_valid():
            tags = form.cleaned_data['tags']
            newflow = form.save(commit=False)
            newflow.save()
            for tags in tags:
                newflow.tags.add(tags)
            return HttpResponseRedirect(newflow.get_absolute_url())
    else:
        form = FlowForm(request.POST, instance=flow)
    return render_to_response('flow/flow_edit.html', {'form':form, 'flow':flow,}, context_instance=RequestContext(request)) 
```

提前致谢。

**更新**

谢谢丹尼尔。

现在我想删除包括他们的 django-taggit 对象的对象。它适用于以下定义，但标签仍显示在基于 django-taggit-templatetags 的标签云列表中。

```
@login_required
def delete(request, flow_id):
    flow = Flow.objects.get(pk=flow_id)
    flow.delete()
    return render_to_response('flow/flow_delete.html', {'flow':flow,}, context_instance=RequestContext(request)) 
```

如何从表单/数据库中删除选定的 django-taggit 的对象/计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:55:26.820

当请求不是 POST 时，您将`request.POST`作为数据参数传递给 else 子句中的表单实例化，因此这是一个空字典。即使它是空的，它仍然会覆盖实例中的所有字段，因为实例值仅用作默认值，并且在将任何内容作为数据传递时不会显示。将该行更改为：

```
form = FlowForm(instance=flow) 
```

# ruby-on-rails - Rails：没有路线匹配错误 - 由于限制？

> ID：14560046
> 
> 赞同：1
> 
> 时间：2013-01-28T10:31:32.030
> 
> 标签：ruby-on-rails, routes, ruby-on-rails-3.2, constraints

我收到错误：

```
ActionController::RoutingError at /websites
No route matches {:controller=>"searches", :action=>"domain_results"} 
```

尝试使用以下链接助手时：

```
<%= link_to website.domain, domain_results_path(website.domain) %> 
```

我在搜索控制器中定义了 domain_results 并设置了以下路由：

```
get 'search/:domain/domain' => 'searches#domain_results', as: :domain_results, constraints: { domain: /.*/ } 
```

耙路线：

```
domain_results GET    /search/:domain/domain(.:format)    searches#domain_results {:domain=>/.*/} 
```

如果我使用以下它可以工作：

```
<%= link_to website.domain, "/search/#{website.domain}/domain" %>

get 'search/:project/project' => 'searches#project_results', as: :project_results
<%= link_to website.domain, project_results_path(rental.project) %> 
```

这是由于我使用的约束吗？当我将诸如“google.com.au”之类的字符串传递到路径中时，我不得不使用这些约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:35:57.753

您需要执行以下操作：

```
domain_results_path(:domain => website.domain) 
```

# php - curl中的特殊字符？

> ID：14560048
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:52.507
> 
> 标签：php, curl

我正在从 POST 接收数据，现在我想使用 curl 转发这些数据。

问题是我的代码没有发布像 ÅÄÖ 这样的特殊字符。它们包含在 $postdata 中，但是当我查看接收服务器时，缺少特殊字符。

有没有更好的方法来为 cUrl 准备数据？像预建功能之类的东西？如何包含 ÅÄÖ:s？

这是代码：

```
foreach ($_POST as $var => $value) {

    if ($var != "ignore") {
    $postdata=$postdata . urlencode(str_replace("_", "." , $var)) . "=" . $value . "&";
    }
}
//remove the extra comma
$postdata=substr($postdata,0,-1);

//Submit the form fields
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL,$googleformURL);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt ($ch, CURLOPT_POST, 1);
$data = curl_exec ($ch);
curl_close($ch); 
```

# javascript - 什么时候出现输出差异？

> ID：14560049
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:53.823
> 
> 标签：javascript

我是 JavaScript 环境的新手。我已阅读该`<script> </script>`标签可以放置在文档的`<head> </head>`或`<body></body>`标签中。但是当我在输出`<script>`下放置标签时`<head></head>`是不同的。请查看代码：-

```
<!DOCTYPE html>
<html>
<head>
<script>
function myFunction(a,b)
{
return a*b;
}

document.getElementById("demo").innerHTML=myFunction(4,3);
</script>
</head>
<body>

<p>This example calls a function which perfoms a calculation, and returns the result:</p>

<p id="demo"></p>

</body>
</html> 
```

> 输出：- 此示例调用执行计算并返回结果的函数：

而如果`<script></script>`放在下面，`<body></body>`那么我会得到不同的输出。请找到代码和以下输出：-

```
<!DOCTYPE html>
<html>
<body>

<p>This example calls a function which perfoms a calculation, and returns the result:</p>

<p id="demo"></p>

<script>
function myFunction(a,b)
{
return a*b;
}

document.getElementById("demo").innerHTML=myFunction(4,3);
</script>

</body>
</html> 
```

> 输出：-
> 
> > 此示例调用执行计算的函数并返回结果：
> > 
> > 12

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:36:29.930

当以下代码行运行时，它会在 DOM 中搜索具有给定 ID 的元素：

```
document.getElementById("demo").innerHTML=myFunction(4,3); 
```

当该代码位于 中时`head`，该元素将不存在，因此该代码将失败。当代码在`body`（有问题的元素*之后*）时，它显然确实存在并且可以找到。

如果要将其保留在`head`. 但是“最佳实践”说将脚本放在`body`.

在您的情况下，这是您会看到的效果，具体取决于脚本的位置：

```
<html>
    <head>
        <!-- Script here fails -->
    </head>
    <body>
        <!--- Script here fails --->
        <p>This example calls a function...</p>
        <!-- Script here fails -->
        <p id="demo"></p>
        <!-- Script here works! --->
    </body>
</html> 
```

但是请注意，您的函数声明可以去任何地方，因为它在被调用之前不做任何事情。调用是元素存在于 DOM 后唯一必须运行的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:40:31.327

调用元素演示时尚未加载，`document.getElementById("demo").innerHTML=myFunction(4,3);`因为它位于其声明之上。

您可以使其正常运行，将 tha 调用包装`onload`在主体中的 -event 中，如下所示：

```
<body onload="document.getElementById('demo').innerHTML=myFunction(4,3);"> 
```

而函数声明保留在`head`. 这样，一旦页面完全加载，就会调用该函数。这里不是最好的风格（因为长调用，它可以包装在一个单独的函数中，使代码更具可读性），但我想你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:48:23.497

只要记住 3 个简单的逻辑调用 Javascript，

> 1) 在标签中调用 javascript`<head> ... </head>`用于初始化/将另一个库导入到当前页面。
> 
> 2）标签之间调用javascript`<body> ... </body>`是为了操作DOM元素。因为代码在页面内容被加载时执行。

对于最佳实践，DOM 事件编码在页面底部。

> 3) 最好的解决方案是“在其他 .JS 文件中声明 JAVASCRIPT 代码并在任何地方将它们调用到您的 HTML 文件中。使用 `<SCRIPT SRC="path" ></SCRIPT>`代码。它可以正常工作。

# jquery - 用 DIV 标签包装表格？

> ID：14560050
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:57.363
> 
> 标签：jquery, html, css, jquery-ui

我的 html 页面中有一个表格，默认情况下不显示在我的页面上...但是当用户单击页面中的某些内容时，它会出现

我想用 div 容器包装表格，我使用以下方法来做到这一点：

```
jQuery(document).ready(function($) {

$('table').wrap('<div id="table" />');      

}); 
```

但是当它出现时它仍然没有包裹表格..它认为我使用dom准备好的问题，当它出现在我的页面上时如何让div包裹表格

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:38:16.557

试试这样：

```
jQuery(document).ready(function($) {
    if($('table').length){
       $('table').wrap('<div id="table" />');      
    }else{
       alert('No tables found on the page.');
    }
}); 
```

您也可以使用`.load()`处理程序执行此操作：

```
 jQuery(document).load(function($) {
    if($('table').length){
       $('table').wrap('<div id="table" />');      
    }else{
       alert('No tables found on the page.');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:35:48.823

在点击事件中使用它..

> 当用户点击某物时

在创建表之后而不是在`document.ready`. 由于何时`document.ready`被调用，它将无法找到动态添加的`<table>`..

例子..

```
$('#something').click(function()){
   //your codes crete table
   $('table').wrap('<div id="table" />'); 
} 
```

# python - GAE Python：在内存缓存中使用过滤器和游标

> ID：14560051
> 
> 赞同：0
> 
> 时间：2013-01-28T10:31:59.860
> 
> 标签：python, google-app-engine, google-cloud-datastore

假设您有一个包含 5 个类别的帖子列表。做memcache的时候，应该怎么过滤掉类别呢？

```
class Post(db.Model):
    title = db.StringProperty(required=True)
    category = db.StringProperty()
    desc = db.StringProperty() 
```

当您进行缓存时：

```
key = "allpost"
post = Post.all().order('-created')
memcache.set(key, post) 
```

我在缓存对象上尝试了使用过滤器。显然它不起作用。

> cached_post.filter("category","one")

有什么功能可以做到吗？还是您只需要在缓存所有帖子之前先过滤所有类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:40:38.623

您可以将命名的东西放在内存缓存中，然后通过它们的键将它们作为一个整体取出。在我看来，好像您将一个不完整的查询或模型放入 memcache，而不是*您*可以过滤的查询**结果。**

 *看看 NDB，大部分内存缓存都是为您完成的（但不是用于查询）。

因此，您可以过滤从 memcache 获得的数据，但没有命令可以进行 in-memcache 过滤。

看看可用的功能：[https ://developers.google.com/appengine/docs/python/memcache/functions](https://developers.google.com/appengine/docs/python/memcache/functions)*

# php - Zend Captcha 的配置数组有什么问题？

> ID：14560063
> 
> 赞同：0
> 
> 时间：2013-01-28T10:32:47.850
> 
> 标签：php, zend-framework, captcha

我正在使用 Zend_Form_Element_Captcha 创建验证码图像，如下所示：-

```
$captcha = new Zend_Form_Element_Captcha(
                   'captcha',
                    array(
                        'label' => 'Please write the characters you see in the image:',
                        'captcha' => array(
                                         'captcha' => 'Image',
                                         'wordLen' => 6,
                                         'timeout' => 900,
                                          'font' => '/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf',

                                     )
                        )
    );

$form = new Zend_Form();

$form->addElement($captcha); 
```

这是在创建验证码图像，但方式不正确。**字母根本不可读。** 这就是我得到的...

![在此处输入图像描述](../Images/d62924689fa163b7a86485ff4cef2558.png)

![在此处输入图像描述](../Images/12af141c8f6c698fdbfd6c70485a23fc.png)

我也试图改变字体，但最终还是一样。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T11:58:36.070

我已经在本地环境中尝试过您的代码。如果您使用的是 Windows，请使用以下代码。我使用字体的绝对路径。

```
$captcha = new Zend_Form_Element_Captcha(
                        'captcha',
                        array(
                            'label' => 'Please write the characters you see in the image:',
                            'captcha' => array(
                                'captcha' => 'Image',
                                'wordLen' => 6,
                                'timeout' => 900,
                                'font' => 'C:/Windows/Fonts/Arial.ttf',
                                'imgDir' => APPLICATION_PATH . '/../public/captcha/',
                                'imgUrl' => '/captcha/'
                            )
                        )
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:35:45.077

试试这个

```
$captcha = new Zend_Form_Element_Captcha(
   'captcha',
    array(
        'label' => 'Please write the characters you see in the image:',
        'captcha' => array(
             'captcha' => 'Image',
             'wordLen' => 6,
             'timeout' => 900,
             'dotNoiseLevel' => 20,
             'lineNoiseLevel' => 3,
             'fontSize' => 25,
             'font' => '/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf',

         )
        )
); 
```

# ios - 来自 iPad 上 Adob e Air 应用程序的 HTTPS

> ID：14560064
> 
> 赞同：1
> 
> 时间：2013-01-28T10:32:48.823
> 
> 标签：ios, ipad, air, https, adobe

我正在为 iPad（ios 6.0.1）开发 Adob​​e Air 应用程序，它将根据其证书对用户进行身份验证。

我在 IPad 中信任客户端证书，我在 IPad 中信任服务器证书，当我在 Safari 中打开服务器的 URL 地址时，基于证书的身份验证成功...当我尝试使用 HTTPService 甚至 StageWebView 进行相同操作时不工作！

当我调用 stageWebView.loadUrl(HTTPS_URL_OF_THE_SERVER_WHICH_WORKS_IN_SAFARI) 时出现错误 - “服务器不接受证书。errorID=3228”

在服务器日志中有 javax.net.ssl.SSLHandShakeException: null cert chain。

我正在使用带有 iOS 6.0.1 的 iPad 2。

西蒙：您能否更具体地说明您的解决方案？

您必须在应用程序的每次新启动时接受证书。

在 Ipad 上，应用程序没有要求我接受任何证书（是配置问题吗？？）您第一次调用（通过 stageWebView）将不起作用。因为这会调用对话框并且您无法调度对话框输入。因此，您必须自己处理在该对话框之后发出 HTTPS 请求。

即使在 Safari 中，我也没有看到任何选择证书的对话框。

# php - 我遇到的“foreach”问题

> ID：14560067
> 
> 赞同：-2
> 
> 时间：2013-01-28T10:33:06.037
> 
> 标签：php

我很难弄清楚这一点，我有一个重复的“$order_id”问题，如果“$order_id”不等于订购的“$quantity”，我不希望显示订单.

所以让我们说这是顺序：

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 1
1901 - 1200 - 1
1902 - 1200 - 1
1903 - 1200 - 1 
```

这应该只是 foreach 1 次。

但如果它看起来像这样：

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 4
1901 - 1200 - 4
1902 - 1200 - 4
1903 - 1200 - 4 
```

这应该显示出来......这可能只是我的心情，但我似乎无法弄清楚......

多谢你们！;)

- - 回复 - - -

嘿，

刚刚更新了我的问题，它更多的是“数量”而不是“数量”。

因此，举个例子，如果我会回显这个，并且数量是“1”，但 order_id 有一个重复的“4”次条目，应该只显示“1”次，它应该只显示相同的 order_id，“数量” xx次...

不知道我该如何进一步解释？...不要介意确切的代码，因为这只是一个示例，试图阐明我所追求的...

```
<?php 
foreach($coupon_details as $coupon_detail)
            {

            echo = '<td>';

        echo = 'order_id:' . $order_detail=get_single_row("orders",array("id"=>$coupon_detail->order_id)) . ;

        echo = '</td><td>';

        echo = 'quanitity:' . $order_detail=get_single_row("orders",array("id"=>$coupon_detail->quantity)) . ;

        echo = '</td><td>';

        }
    ?> 
```

此示例将是 MySQL 表数据...

所以让我们说这是顺序：

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 1
1901 - 1200 - 1
1902 - 1200 - 1
1903 - 1200 - 1 
```

这应该只是 foreach 1 次。

但如果它看起来像这样：

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 4
1901 - 1200 - 4
1902 - 1200 - 4
1903 - 1200 - 4 
```

---- 回复 2 -----

被要求在视图文件中提供预期的输出。（不是数据库）

这是在数据库中

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 1
1901 - 1200 - 1
1902 - 1200 - 1
1903 - 1200 - 1 
```

这就是我希望它从 DB 中回显 FOREACH 的方式

```
ID - ORDER_ID - QUANTITY
1900 - 1200 - 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:25:28.173

试试下面的代码，我对你的代码做了一些改变。

```
<?php

$coupon_details = mysql_query("select * from order GROUP BY ORDER_ID AND QUANTITY");

echo "<table><tr>";
echo "<td>ID</td>";
echo "<td>ORDER_ID</td>";
echo "<td>QUANTITY</td>";
echo "</tr>";

while($row = mysql_fetch_array($coupon_details))
{
    echo "<tr>";
    echo '<td>'.$row['id'].'</td>';
    echo '<td>'.$row['ORDER_ID'].'</td>';
    echo '<td>'.$row['QUANTITY'].'</td>';
    echo "</tr>";
}
echo "</table>";
?> 
```

它应该工作。

# c# - 同时发送磁贴和吐司通知？

> ID：14560068
> 
> 赞同：1
> 
> 时间：2013-01-28T10:33:06.740
> 
> 标签：c#, push-notification, windows-phone-8, mpns

我有这个通过 MSDN 教程创建的桌面应用程序（我找不到链接，否则我会链接它）。它做了什么，它允许您输入连接到 WIndows Phone Emulator 所需的频道 URL，并通过该应用程序您可以发送实时磁贴更新，：这是模拟器（侦听器）和发送服务的代码数据。：

MainApp - 仿真器：

```
public MainPage()
    {

        HttpNotificationChannel pushChannel;
        string channelName = "TileSampleChannel";
        InitializeComponent();

        pushChannel = HttpNotificationChannel.Find(channelName);

        if (pushChannel == null)
        {
            pushChannel = new HttpNotificationChannel(channelName);

            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            pushChannel.Open();
            pushChannel.BindToShellTile();

        }
        else
        {
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
            MessageBox.Show(String.Format("Channel Uri is {0}",
                pushChannel.ChannelUri.ToString()));

        }
    }

    void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
    {

        Dispatcher.BeginInvoke(() =>
        {
            System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());

            //MessageBox.Show(String.Format("Channel Uri is {0}",
            //    e.ChannelUri.ToString()));

        });
    }

    void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
            MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}",
                e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData))
                );
    }

} 
```

* * *

## 这里是服务：

* * *

```
protected void ButtonSendTile_Click(object sender, EventArgs e)
    {

        try
        {
            string NotifyURI = TextBoxUri.Text.ToString();

            HttpWebRequest sendNotificationRequest = (HttpWebRequest)WebRequest.Create(NotifyURI);

            sendNotificationRequest.Method = "POST";

            //Create the toast message

            string notificationData = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" +
            "<wp:Toast>" +
            "<wp:Text1>WP8 TOAST</wp:Text1>" +
            "<wp:Text2>" + TextBoxBackContent.Text + "</wp:Text2>" +
            "</wp:Toast>" +
            "</wp:Notification>";

            // Create the tile message.
            string tileMessage = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" +
                "<wp:Tile>" +
                  "<wp:BackgroundImage>" + TextBoxBackgroundImage.Text + "</wp:BackgroundImage>" +
                  "<wp:Count>" + TextBoxCount.Text + "</wp:Count>" +
                  "<wp:Title>" + TextBoxTitle.Text + "</wp:Title>" +
                  "<wp:BackBackgroundImage>" + TextBoxBackBackgroundImage.Text + "</wp:BackBackgroundImage>" +
                  "<wp:BackTitle>" + TextBoxBackTitle.Text + "</wp:BackTitle>" +
                  "<wp:BackContent>" + TextBoxBackContent.Text + "</wp:BackContent>" +
               "</wp:Tile> " +
            "</wp:Notification>";

            byte[] notificationMessage = Encoding.Default.GetBytes(tileMessage);

            sendNotificationRequest.ContentLength = notificationMessage.Length;
            sendNotificationRequest.ContentType = "text/xml";
            sendNotificationRequest.Headers.Add("X-WindowsPhone-Target", "token");
            sendNotificationRequest.Headers.Add("X-NotificationClass", "1");

            using (Stream requestStream = sendNotificationRequest.GetRequestStream())
            {
                requestStream.Write(notificationMessage, 0, notificationMessage.Length);
            }

            HttpWebResponse response = (HttpWebResponse)sendNotificationRequest.GetResponse();
            string notificationStatus = response.Headers["X-NotificationStatus"];
            string notificationChannelStatus = response.Headers["X-SubscriptionStatus"];
            string deviceConnectionStatus = response.Headers["X-DeviceConnectionStatus"];

            TextBoxResponse.Text = notificationStatus + " | " + deviceConnectionStatus + " | " + notificationChannelStatus;
        }
        catch (Exception ex)
        {
            TextBoxResponse.Text = "Exception caught sending update: " + ex.ToString();
        }

    } 
```

现在你可以看到有一部分代码说“//创建吐司消息”，

我如何让 toast 与磁贴更新一起发送？这样当 toast 消息通过时，磁贴也会更新为我在页面中键入的相同信息。

目前只有瓷砖得到更新。

这是主页的图片。

![主页](../Images/5bfb03ffe27b6889a5640ca3e0bdc57a.png)

我对这篇长篇文章感到非常抱歉，但我想提供尽可能多的信息。

使用 - Visual Studio 2012/Windows Phone 8/C#/Silverlight

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:37:01.357

是[这个](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202970%28v=vs.105%29.aspx)吗？

将您的 xml 有效负载合二为一

```
string notificationData = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
        "<wp:Notification xmlns:wp=\"WPNotification\">" +
        "<wp:Toast>" +
        "<wp:Text1>WP8 TOAST</wp:Text1>" +
        "<wp:Text2>" + TextBoxBackContent.Text + "</wp:Text2>" +
        "</wp:Toast>" +
        "<wp:Notification xmlns:wp=\"WPNotification\">" +
            "<wp:Tile>" +
              "<wp:BackgroundImage>" + TextBoxBackgroundImage.Text + "</wp:BackgroundImage>" +
              "<wp:Count>" + TextBoxCount.Text + "</wp:Count>" +
              "<wp:Title>" + TextBoxTitle.Text + "</wp:Title>" +
              "<wp:BackBackgroundImage>" + TextBoxBackBackgroundImage.Text + "</wp:BackBackgroundImage>" +
              "<wp:BackTitle>" + TextBoxBackTitle.Text + "</wp:BackTitle>" +
              "<wp:BackContent>" + TextBoxBackContent.Text + "</wp:BackContent>" +
           "</wp:Tile> " +
        "</wp:Notification>"; 
```

当您的应用程序打开时，您不会看到 toast 通知。侦听[PushNotificationReceived](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.pushnotifications.pushnotificationchannel.pushnotificationreceived.aspx)事件以在应用程序运行时拦截推送通知。

# facebook - Facebook 点赞和发送按钮未拾取缩略图

> ID：14560069
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:08.520
> 
> 标签：facebook, button

我在网页上添加了一个类似 facebook 的按钮，一切正常，除了它没有拾取缩略图或任何图像——它只将文本发布到 fb 页面，并带有空白而不是图片。图像的元标记如下所示：

```
<meta property="og:image" content="http://www.daisyworld.co.za/Birth_of_Modernity/einstein3.jpg" /> 
```

& 该页面的 URL 是[http://www.daisyworld.co.za/Birth_of_Modernity.htm](http://www.daisyworld.co.za/Birth_of_Modernity.htm) "

我已经尝试了其他一些页面的过程，结果是相同的。我想知道这是否与我的编码有关——我不使用编辑器，而是手工编写代码——非常基本的 HTML 和 CSS。文档类型如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
```

" [http://www.w3.org/TR/html4/loose.dtd](http://www.w3.org/TR/html4/loose.dtd) ">

我已经尝试了所有方法并到处寻找可能的解释并像缩略图一样空白。

如果有人能提出答案，我将不胜感激。谢谢！

# android - 为什么应用程序无法从服务器获取 http 响应？它适用于妻子但不适用于3G？

> ID：14560070
> 
> 赞同：2
> 
> 时间：2013-01-28T10:33:08.610
> 
> 标签：android, android-widget, http-post, http-proxy

我正在尝试编写一个应用程序来发布传入的电话号码并获得响应并通过使用 toast 到屏幕来显示结果。它适用于模拟器和手机中的妻子，但不适用于 3G。通话结束时，toast 显示结果。我已经将 APN 更改为 Internet，但它不起作用。有没有办法用3G做到这一点？

## 广播接收器

```
if(TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {

            incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER); 

            if   (!client.contactExists(context, incomingNumber)){

            try {

             String response=client.login5(incomingNumber,hash);
            JSONObject jObject = new JSONObject(response);
        resusername = jObject.getString("name");
         reshash = jObject.getString("hash");

         Toast a=  Toast.makeText(context,"\n"+"Telefon Numarası:" + incomingNumber+"\n"+"Adına Kayıtlı Kişi:" +  resusername+"\n", Toast.LENGTH_LONG);
         a.setGravity(Gravity.TOP|Gravity.CENTER, 0, 0);
         a.show();

        //   msg += "My phone number:" +  client.getMy10DigitPhoneNumber()+"\n";            

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      /*  if(reshash==hash && frame.konrolnum(incomingNumber)!=true) {
        msg+="User name is: "+resusername;
        frame.createContact(resusername, incomingNumber);}*/

        } } 
```

## 客户端

```
public String login5(String tlf,String hash) {      
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 

    InputStream is = null;
     String result = "";
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

     try 
     { 

           HttpClient httpclient = new DefaultHttpClient();
           HttpProtocolParams.setUseExpectContinue(httpclient.getParams(), false);
           HttpPost httppost = new HttpPost("http://www.whois118.com/broadcast.php");
           nameValuePairs.add(new BasicNameValuePair("telefon",tlf));
           nameValuePairs.add(new BasicNameValuePair("hash", hash));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           HttpResponse response = httpclient.execute(httppost);
           HttpEntity entity = response.getEntity();

           is = entity.getContent();

      }

      catch (Exception e)
      {
       Log.e("log_tag", "Error in http connection " + e.toString());
      }
  // convert response to string
      try 
      {
           BufferedReader reader = new BufferedReader(new InputStreamReader( is, "UTF-8"), 8);
           StringBuilder sb = new StringBuilder();
           String line = null;

       while ((line = reader.readLine()) != null) 
       {
           sb.append(line + "\n");
       }

        is.close();
        result = sb.toString();

       Log.v("log","Result :"+result);
  } 
  catch (Exception e)
  {
   Log.v("log", "Error converting result " + e.toString());
  }
    return result;
} 
```

# javascript - 在javascript中关闭第二个新窗口

> ID：14560073
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:12.713
> 
> 标签：javascript, window

我的脚本有问题，当用户单击提交时，我正在使用 this.target 打开一个 jquery 窗口。然而，这带来了第二个新窗口。

有没有办法让新窗口打开，如果那个窗口打开就立即关闭它，因为我根本不希望这个窗口打开。

这是我尝试过的：

```
<script>
    $(document).ready(function() {
    $('#myform').submit(function() {
        Shadowbox.open({
        content:    '<iframe src="loginin.php" width="500" height="300" scrolling="no" style="overflow:hidden; border:none;"></iframe>',
        player:     "html",
        height:     300,
        width:      500
    });

        this.target = 'shadowbox' 

        if(window.target){
  self.opener = self;
  window.close();
 }

    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:13:53.770

如果您不想打开第二个窗口，为什么要在您的函数中打开它？只需将其从 sumbit 函数中删除：

```
$('#myform').submit(function() {/*here code*/}); 
```

如果你想隐藏第二个窗口 Shadowbox 有方法 close() 在弹出窗口中关闭当前视图，只需使用它`Shadowbox.close()`。

# mysql - MySQL 查询返回不正确的结果

> ID：14560082
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:27.283
> 
> 标签：mysql

我从这里得到了一些关于我需要的 SQL 查询的建议，但现在看来，如果遇到没有分配属性的产品，它会返回不正确的结果。我将在下面列出查询，以及相关数据库表/数据的示例（数据已清理以删除客户信息）。

询问：

```
SELECT * 
FROM orders_products_attributes oa
INNER JOIN orders_products op ON oa.orders_id = op.orders_id
WHERE (
products_options_id
IN ( 1, 2 ) 
AND oa.orders_id
IN (
SELECT DISTINCT o.orders_id
FROM orders o
WHERE o.ExportedToTradebox =  0
AND o.orders_id >  22000)) 
```

D B：

```
CREATE TABLE `orders` (
`orders_id` int(11) NOT NULL AUTO_INCREMENT,
`customers_id` int(11) NOT NULL DEFAULT '0',
`customers_name` varchar(64) NOT NULL DEFAULT '',
`customers_company` varchar(64) DEFAULT NULL,
`customers_street_address` varchar(64) NOT NULL DEFAULT '',
`customers_suburb` varchar(32) DEFAULT NULL,
`customers_city` varchar(32) NOT NULL DEFAULT '',
`customers_postcode` varchar(10) NOT NULL DEFAULT '',
`customers_state` varchar(32) DEFAULT NULL,
`customers_country` varchar(32) NOT NULL DEFAULT '',
`customers_telephone` varchar(32) NOT NULL DEFAULT '',
`customers_email_address` varchar(96) NOT NULL DEFAULT '',
`customers_address_format_id` int(5) NOT NULL DEFAULT '0',
`delivery_name` varchar(64) NOT NULL DEFAULT '',
`delivery_company` varchar(64) DEFAULT NULL,
`delivery_street_address` varchar(64) NOT NULL DEFAULT '',
`delivery_suburb` varchar(32) DEFAULT NULL,
`delivery_city` varchar(32) NOT NULL DEFAULT '',
`delivery_postcode` varchar(10) NOT NULL DEFAULT '',
`delivery_state` varchar(32) DEFAULT NULL,
`delivery_country` varchar(32) NOT NULL DEFAULT '',
`delivery_address_format_id` int(5) NOT NULL DEFAULT '0',
`billing_name` varchar(64) NOT NULL DEFAULT '',
`billing_company` varchar(64) DEFAULT NULL,
`billing_street_address` varchar(64) NOT NULL DEFAULT '',
`billing_suburb` varchar(32) DEFAULT NULL,
`billing_city` varchar(32) NOT NULL DEFAULT '',
`billing_postcode` varchar(10) NOT NULL DEFAULT '',
`billing_state` varchar(32) DEFAULT NULL,
`billing_country` varchar(32) NOT NULL DEFAULT '',
`billing_address_format_id` int(5) NOT NULL DEFAULT '0',
`payment_method` varchar(128) NOT NULL DEFAULT '',
`payment_module_code` varchar(32) NOT NULL DEFAULT '',
`shipping_method` varchar(128) NOT NULL DEFAULT '',
`shipping_module_code` varchar(32) NOT NULL DEFAULT '',
`coupon_code` varchar(32) NOT NULL DEFAULT '',
`cc_type` varchar(20) DEFAULT NULL, 
`cc_owner` varchar(64) DEFAULT NULL,
`cc_number` varchar(32) DEFAULT NULL,
`cc_expires` varchar(4) DEFAULT NULL,
`cc_cvv` blob,
`last_modified` datetime DEFAULT NULL,
`date_purchased` datetime DEFAULT NULL,
`orders_status` int(5) NOT NULL DEFAULT '0',
`orders_date_finished` datetime DEFAULT NULL,
`currency` char(3) DEFAULT NULL,
`currency_value` decimal(14,6) DEFAULT NULL,
`order_total` decimal(14,2) DEFAULT NULL,
`order_tax` decimal(14,2) DEFAULT NULL,
`paypal_ipn_id` int(11) NOT NULL DEFAULT '0',
`ip_address` varchar(96) NOT NULL DEFAULT '',
`ExportedToTradebox` int(1) NOT NULL DEFAULT '0',
PRIMARY KEY (`orders_id`),
KEY `idx_status_orders_cust_zen` (`orders_status`,`orders_id`,`customers_id`),
KEY `idx_date_purchased_zen` (`date_purchased`),
KEY `idx_cust_id_orders_id_zen` (`customers_id`,`orders_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=23161  

INSERT INTO `orders` VALUES (23110, 5801, 'Customer One', '', 'Any BUilding', '', 'Any       Town', 'AN0 1TH', 'Lancashire', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer One', '', 'Any Building', 'Any Street', 'Any Town', 'AN0 1TH', 'Lancashire', 'United Kingdom (Mainland)', 6, 'Customer One', '', 'Any Building', 'Any Street', 'Any Town', 'AN0 1TH', 'Lancashire', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'Visa', 'Customer One', 'XXXXXXXXXX', '0515', NULL, NULL, '2013-01-10 09:57:51', 1, NULL, 'GBP', 1.000000, 16.14, 2.69, 0, '88.96.93.217 - 88.96.93.217', 1);
INSERT INTO `orders` VALUES (23111, 11361, 'Customer Two', '', 'Any Street', '', 'Any Town', 'AN0 1TH', 'Cumbria', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer Two', '', 'Any Street', '', 'Any Town', 'AN0 1TH', 'Cumbria', 'United Kingdom (Mainland)', 6, 'Customer Two', '', 'Any Street', '', 'Any Town', 'AN0 1TH', 'Cumbria', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'MasterCard', 'Customer Two', 'XXXXXXXXXX', '0713', NULL, NULL, '2013-01-10 18:29:23', 1, NULL, 'GBP', 1.000000, 25.50, 4.25, 0, '86.179.13.89 - 86.179.13.89', 0);
INSERT INTO `orders` VALUES (23112, 23787, 'Customer Three', '', 'Any Street', 'Any Town', 'SWANSEA', 'AN0 1TH', 'Swansea', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer Three', '', 'Any Street', '', 'Any Town', 'AN0 1TH', 'Kent', 'United Kingdom (Mainland)', 6, 'Customer Three', '', 'Any Street', 'Any Town', 'SWANSEA', 'AN0 1TH', 'Swansea', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'MasterCard', 'Customer Three', 'XXXXXXXXXX', '0314', NULL, NULL, '2013-01-10 20:27:12', 1, NULL, 'GBP', 1.000000, 15.48, 2.58, 0, '176.24.1.143 - 176.24.1.143', 1);
INSERT INTO `orders` VALUES (23113, 23788, 'Customer Four, '', 'Any Street', 'Any Town', 'Reading', 'AN0 1TH', 'Berkshire', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer Four', '', 'Any Building', 'Any Street', 'Any Town', 'AN0 1TH', 'Berkshire', 'United Kingdom (Mainland)', 6, 'Customer Four', '', 'Any Street', 'Any Town', 'Reading', 'AN0 1TH', 'Berkshire', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'Visa Debit', 'Customer Four', 'XXXXXXXXXX', '0315', NULL, NULL, '2013-01-10 22:52:17', 1, NULL, 'GBP', 1.000000, 19.74, 3.29, 0, '80.7.137.154 - 80.7.137.154', 1);
INSERT INTO `orders` VALUES (23114, 15693, 'Customer Five', '', 'Any Street', 'Any Town', 'Londonderry', 'AN0 1TH', 'Londonderry', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer Five', '', 'Any Street', 'Any Town', 'Londonderry', 'AN0 1TH', 'Londonderry', 'United Kingdom (Mainland)', 6, 'Customer Five', '', 'Any Street', 'Any Town', 'Londonderry', 'AN0 1TH', 'Londonderry', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'Visa', 'Customer Five', 'XXXXXXXXXX', '0715', NULL, NULL, '2013-01-11 08:53:07', 1, NULL, 'GBP', 1.000000, 19.38, 3.23, 0, '92.17.232.252 - 92.17.232.252', 1);
INSERT INTO `orders` VALUES (23115, 23790, 'Customer Six', '', 'Any Street', 'Any Town', 'Huddersfield', 'AN0 1TH', 'West Yorkshire', 'United Kingdom (Mainland)', '01234567890', 'email@customer.com', 6, 'Customer Six', '', 'Any Street', 'Any Town', 'Huddersfield', 'AN0 1TH', 'West Yorkshire', 'United Kingdom (Mainland)', 6, 'Customer Six', '', 'Any Street', 'Any Town', 'Huddersfield', 'AN0 1TH', 'West Yorkshire', 'United Kingdom (Mainland)', 6, 'Credit/Debit Card (Secured by Sage Pay)', 'ceon_sage_pay_direct', 'Table Rate (Best Way)', 'table', '', 'Visa Debit', 'Customer Six', 'XXXXXXXXXX', '1214', NULL, NULL, '2013-01-11 12:50:34', 1, NULL, 'GBP', 1.000000, 428.40, 119.00, 0, '109.237.17.198 - 109.237.17.198', 1);

CREATE TABLE `orders_products` (
`orders_products_id` int(11) NOT NULL AUTO_INCREMENT,
`orders_id` int(11) NOT NULL DEFAULT '0',
`products_id` int(11) NOT NULL DEFAULT '0',
`products_model` varchar(32) DEFAULT NULL,
`products_name` varchar(64) NOT NULL DEFAULT '',
`products_price` decimal(15,4) NOT NULL DEFAULT '0.0000',
`final_price` decimal(15,4) NOT NULL DEFAULT '0.0000',
`products_tax` decimal(7,4) NOT NULL DEFAULT '0.0000',
`products_quantity` float NOT NULL DEFAULT '0',
`onetime_charges` decimal(15,4) NOT NULL DEFAULT '0.0000',
`products_priced_by_attribute` tinyint(1) NOT NULL DEFAULT '0',
`product_is_free` tinyint(1) NOT NULL DEFAULT '0',
`products_discount_type` tinyint(1) NOT NULL DEFAULT '0',
`products_discount_type_from` tinyint(1) NOT NULL DEFAULT '0',
`products_prid` tinytext NOT NULL,
PRIMARY KEY (`orders_products_id`),
KEY `idx_orders_id_prod_id_zen` (`orders_id`,`products_id`),
KEY `idx_prod_id_orders_id_zen` (`products_id`,`orders_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=35040 ;

INSERT INTO `orders_products` VALUES (34978, 23110, 31, '', 'A4 Teacher''s Planner', 10.5000, 10.5000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '31:9964928c32c2a3849188981afa12a093');
INSERT INTO `orders_products` VALUES (34979, 23111, 46, '', 'Custom Built A5 Teacher''s Planner', 9.6000, 13.9000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '46:ba39091f0bf22bf2e10c81adc942e4e1');
INSERT INTO `orders_products` VALUES (34980, 23111, 23, '', 'Notes Book (NB)', 3.5000, 3.5000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '23:eb5397bb218cc175011cd7789237bd50');
INSERT INTO `orders_products` VALUES (34981, 23111, 21, '', 'Wall Chart 2013-2014 (CH34)', 0.9000, 0.9000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '21');
INSERT INTO `orders_products` VALUES (34982, 23112, 46, '', 'Custom Built A5 Teacher''s Planner', 9.6000, 9.9500, 20.0000, 1, 0.0000, 0, 0, 0, 0, '46:f9cc81aecfe9f185caeaaefa16d74bb3');
INSERT INTO `orders_products` VALUES (34983, 23113, 49, '', 'Custom Built Primary Teacher''s Planner', 12.5000, 13.5000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '49:265721a8b48ba787e0109dae30acb7b4');
INSERT INTO `orders_products` VALUES (34984, 23114, 30, '', 'Custom Built A4 Teacher''s Planner', 12.5000, 13.2000, 20.0000, 1, 0.0000, 0, 0, 0, 0, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff');
INSERT INTO `orders_products` VALUES (34985, 23115, 22, '', 'Visitors Book (VB)', 5.9500, 5.9500, 20.0000, 100, 0.0000, 0, 0, 0, 0, '22:a2bedb3944abb52dd530db1c8e05b3b9');

CREATE TABLE `orders_products_attributes` (
`orders_products_attributes_id` int(11) NOT NULL AUTO_INCREMENT,
`orders_id` int(11) NOT NULL DEFAULT '0',
`orders_products_id` int(11) NOT NULL DEFAULT '0',
`products_options` varchar(32) NOT NULL DEFAULT '',
`products_options_values` text NOT NULL,
`options_values_price` decimal(15,4) NOT NULL DEFAULT '0.0000',
`price_prefix` char(1) NOT NULL DEFAULT '',
`product_attribute_is_free` tinyint(1) NOT NULL DEFAULT '0',
`products_attributes_weight` float NOT NULL DEFAULT '0',
`products_attributes_weight_prefix` char(1) NOT NULL DEFAULT '',
`attributes_discounted` tinyint(1) NOT NULL DEFAULT '1',
`attributes_price_base_included` tinyint(1) NOT NULL DEFAULT '1',
`attributes_price_onetime` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_factor` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_factor_offset` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_factor_onetime` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_factor_onetime_offset` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_qty_prices` text,
`attributes_qty_prices_onetime` text,
`attributes_price_words` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_words_free` int(4) NOT NULL DEFAULT '0',
`attributes_price_letters` decimal(15,4) NOT NULL DEFAULT '0.0000',
`attributes_price_letters_free` int(4) NOT NULL DEFAULT '0',
`products_options_id` int(11) NOT NULL DEFAULT '0',
`products_options_values_id` int(11) NOT NULL DEFAULT '0',
`products_prid` tinytext NOT NULL,
`tradebox_attributes_list` text NOT NULL,
`tradebox_options_price_list` decimal(15,4) NOT NULL DEFAULT '0.0000',
PRIMARY KEY (`orders_products_attributes_id`),
KEY `idx_orders_id_prod_id_zen` (`orders_id`,`orders_products_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=77370 ;

INSERT INTO `orders_products_attributes` VALUES (77193, 23110, 34978, 'Lesson format', '9 period day (TP9)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 5, 57, '31:9964928c32c2a3849188981afa12a093', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77194, 23110, 34978, 'Cover', 'Navy (blue wire)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 74, '31:9964928c32c2a3849188981afa12a093', '9 period day (TP9), Navy (blue wire)', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77195, 23111, 34979, 'Lesson format', '5 period day (TP5)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 5, 54, '46:ba39091f0bf22bf2e10c81adc942e4e1', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77196, 23111, 34979, 'Cover', 'Navy', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 2, '46:ba39091f0bf22bf2e10c81adc942e4e1', 'Navy', 1.0000);
INSERT INTO `orders_products_attributes` VALUES (77197, 23111, 34979, 'Wire', 'Fluorescent Yellow (f)', 0.0000, '', 1, 0, '', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 4, 51, '46:ba39091f0bf22bf2e10c81adc942e4e1', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77198, 23111, 34979, 'Ribbon', 'Fuschia (7)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 3, 19, '46:ba39091f0bf22bf2e10c81adc942e4e1', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77199, 23111, 34979, 'Initials (Max 4)', 'DBI', 3.3000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 2, 0, '46:ba39091f0bf22bf2e10c81adc942e4e1', 'DBI', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77200, 23111, 34979, 'Plastic pockets', '2 at front, 2 at back', 1.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 6, 87, '46:ba39091f0bf22bf2e10c81adc942e4e1', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77201, 23111, 34980, 'Cover', 'Navy', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 2, '23:eb5397bb218cc175011cd7789237bd50', 'Navy', 1.0000);
INSERT INTO `orders_products_attributes` VALUES (77202, 23112, 34982, 'Lesson format', '6 period day (TP6)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 5, 55, '46:f9cc81aecfe9f185caeaaefa16d74bb3', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77203, 23112, 34982, 'Cover', 'Yellow', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 10, '46:f9cc81aecfe9f185caeaaefa16d74bb3', '6 period day (TP6), Yellow, 2 at back', 0.3500);
INSERT INTO `orders_products_attributes` VALUES (77204, 23112, 34982, 'Wire', 'Silver (i)', 0.0000, '', 1, 0, '', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 4, 50, '46:f9cc81aecfe9f185caeaaefa16d74bb3', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77205, 23112, 34982, 'Ribbon', 'Black (5)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 3, 17, '46:f9cc81aecfe9f185caeaaefa16d74bb3', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77206, 23112, 34982, 'Plastic pockets', '2 at back', 0.3500, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 6, 85, '46:f9cc81aecfe9f185caeaaefa16d74bb3', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77207, 23113, 34983, 'Lesson format', '3 period (2 morning, 1 afternoon)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 5, 59, '49:265721a8b48ba787e0109dae30acb7b4', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77208, 23113, 34983, 'Cover', 'Pink', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 8, '49:265721a8b48ba787e0109dae30acb7b4', '3 period (2 morning, 1 afternoon), Pink, 2 at front, 2 at back', 1.0000);
INSERT INTO `orders_products_attributes` VALUES (77209, 23113, 34983, 'Wire', 'Blue (c)', 0.0000, '', 1, 0, '', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 4, 47, '49:265721a8b48ba787e0109dae30acb7b4', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77210, 23113, 34983, 'Ribbon', 'Dorothy (34)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 3, 81, '49:265721a8b48ba787e0109dae30acb7b4', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77211, 23113, 34983, 'Plastic pockets', '2 at front, 2 at back', 1.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 6, 87, '49:265721a8b48ba787e0109dae30acb7b4', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77212, 23114, 34984, 'Lesson format', '8 period day (TP8)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 5, 56, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77213, 23114, 34984, 'Cover', 'Purple', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 7, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff', '8 period day (TP8), Purple, 1 at front, 2 at back', 0.7000);
INSERT INTO `orders_products_attributes` VALUES (77214, 23114, 34984, 'Wire', 'Metallic Red (g)', 0.0000, '', 1, 0, '', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 4, 52, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77215, 23114, 34984, 'Ribbon', 'Gold Lamé (17)', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 3, 29, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77216, 23114, 34984, 'Plastic pockets', '1 at front, 2 at back', 0.7000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 6, 86, '30:b0018c6b89bd8efbbfa3dcd3a5c4a2ff', '', 0.0000);
INSERT INTO `orders_products_attributes` VALUES (77217, 23115, 34985, 'Cover', 'Burgundy', 0.0000, '+', 1, 0, '+', 1, 1, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, '', '', 0.0000, 0, 0.0000, 0, 1, 1, '22:a2bedb3944abb52dd530db1c8e05b3b9', 'Burgundy', 0.0000); 
```

原来的查询曾经是：

```
SELECT * 
FROM orders_products 
WHERE orders_id 
IN
(
    SELECT DISTINCT orders_id 
    FROM orders 
    WHERE ExportedToTradebox='0' and orders_id >'0'
) 
```

订单号 23111 是问题所在。订购的挂图没有属性，但是当查询数据库时，它会应用为订单中的其他项目列出的属性。

相关数据的架构可在[http://sqlfiddle.com/#!2/f0003](http://sqlfiddle.com/#!2/f0003)中找到， 我只在其中包含了订单号 23111 的数据。

查询将结果传递给 xml 文件。结果如下所示：

1 定制 A5 教师规划器|海军 13.90 2.95
1 定制 A5 教师规划器|DBI 3.30 0.00
1 定制 A5 教师规划器|海军 13.90 2.95
1 记事本(NB)|海军 3.50 0.00
1 记事本(NB)|DBI 3.50 0.00
1 记事本(NB)|海军 3.50 0.00
1 挂图 2013-2014|海军 0.90 0.00
1 挂图 2013-2014|DBI 0.90 0.00
1 挂图 2013-2014|海军 0.90 0.00

应该是：

1 定制 A5 教师规划器|海军 13.90 2.95
1 定制 A5 教师规划器|DBI 3.30 0.00
1 笔记本(NB)|海军 3.50 0.00 1 挂图
2013-2014 0.90 0.00

提前感谢您对此的任何帮助。

DRapp 提供了一个几乎可行的解决方案，然而，尽管查询返回正确的结果，但在使用中它会产生问题，即从结果中调用 orders_id 不会为没有属性的产品提供订单 ID。这很可能是由表的连接方式引起的。如果产品没有属性，则它不会在 orders_products_attributes 表中，因此这些产品的订单 ID 返回 NULL，这意味着它们不会被后面的代码处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:10:06.593

我会稍微调整一下。首先，从您想要包含的所有可能订单的预查询开始。确保您有一个索引来帮助优化。我会在（ExportedToTradeBox，Orders_ID）上有索引。

所以，现在我有一个“OnlyThese”的预查询结果集。现在，加入产品，因为所有订单都有产品，但所有产品都不需要属性选项。

然后，对订单产品属性表执行 LEFT-JOIN，但仅在连接它们的键上（确保正确的订单和产品）。所以现在，您可以查询所有符合条件的订单，并加入最终的产品属性表，无论是否有属性。

最后，将 WHERE 子句应用为 NULL 或作为您期望的类型之一。这样，它会查看每个项目并询问。如果没有选项，则允许它...但是，如果它确实具有属性，我只想要具有 1 或 2 选项的那些（通过 IN (1,2) 子句）。

```
SELECT 
      *  (actual column list you want) 
   FROM 
      ( SELECT DISTINCT o.orders_id
           FROM orders o
           WHERE o.ExportedToTradebox =  0
           AND o.orders_id >  22000) OnlyThese
         JOIN orders_products op 
            ON OnlyThese.orders_id = op.orders_id
            LEFT JOIN orders_products_attributes oa
               ON op.Orders_ID = oa.Orders_ID
               AND op.orders_products_id = oa.orders_products_id
   WHERE
         oa.products_options_id IS NULL
      OR oa.products_options_id IN ( 1, 2 ) 
```

# android - 列表视图页脚不显示

> ID：14560084
> 
> 赞同：22
> 
> 时间：2013-01-28T10:33:29.497
> 
> 标签：android, android-listview, android-fragments

我创建了一个带有延迟加载的动态列表视图。我正在尝试向列表视图显示页脚，以便当用户滚动到列表视图的底部时，它将显示“正在加载更多项目”（作为页脚）并且它将加载更多项目。我已经实现了延迟加载。我已经设置了页脚，但它没有显示在列表视图上。请帮帮我。

包含列表视图的 Tabfragment 类：

```
package com.example.abe;

import java.util.ArrayList;

import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Tab1Fragment extends ListFragment {
    ListView lv;
    Activity act = this.getActivity();
    Context ct = this.getActivity();
    XMLGettersSetters data;
    boolean loadingMore = false;
    String abc[] = new String[50];
    static int count = 0;
    final int itemsPerPage = 10;
    static ArrayList<String> myListItems = new ArrayList<String>();
    ArrayList<String> myListItems2;
    ArrayAdapter<String> adapter;
    ArrayAdapter<String> adapter1;

    static int size = 0;
    int position = 0;
    int top = 0;
    static String android_array1[];
    ArrayList<String> myListItems3;

    TabsFragmentActivity t = new TabsFragmentActivity();
    String parsed[] = new String[MainActivity.Sarray1.length];

    @SuppressWarnings("unused")
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        adapter = new ArrayAdapter<String>(getActivity().getBaseContext(),
                android.R.layout.simple_list_item_1, t.myarray);
        ;
        View root = inflater.inflate(R.layout.tab_frag1_layout, container,
                false);
        lv = (ListView) root.findViewById(android.R.id.list);
        lv.setAdapter(adapter);
        getActivity().setTitle("ABE ST count: " + t.stcount + " items");
        parsed = MainActivity.Sarray1;
        for (int j = 0; j < parsed.length; j++) {
            System.out.println("sax" + parsed[j].toString());
        }

        return root;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        View footerView = ((LayoutInflater) this.getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
        lv.addFooterView(footerView);

        getListView().setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                System.out.println(abc.length);
                System.out.println(count);
                System.out.println("First" + firstVisibleItem);
                System.out.println("Vis" + visibleItemCount);
                position = firstVisibleItem;
                View v = lv.getChildAt(0);
                top = (v == null) ? 0 : v.getTop();
                int lastInScreen = firstVisibleItem + visibleItemCount;
                System.out.println("Last" + lastInScreen);
                System.out.println("Total" + totalItemCount);
                if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                    if (count < size) {
                        try {
                            Thread thread = new Thread(null, loadMoreListItems);
                            thread.start();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }

                    else if (count != 0) {
                        Toast.makeText(getActivity().getApplicationContext(),
                                "Complete Data", Toast.LENGTH_LONG).show();
                        int lvcnt = lv.getCount();
                        System.out.println("Adapter Count " + " " + lvcnt);
                        System.out.println("Abe adapter count" + " "
                                + adapter.getCount());
                    }
                }
            }
        });
        if (t.check1 == 0) {
            try {
                Thread thread = new Thread(null, loadMoreListItems);
                thread.start();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    private Runnable loadMoreListItems = new Runnable() {
        @Override
        public void run() {
            loadingMore = true;
            t.myarray1 = new ArrayList<String>();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
            size = parsed.length;
            for (int i = 0; i < itemsPerPage; i++) {
                if (count < size) {
                    t.myarray1.add(parsed[count].toString());

                    count = count + 1;
                    System.out.println("Count in run " + " " + count);
                } else {
                    break;
                }
            }
            Log.i("a", "b");
            try {
                getActivity().runOnUiThread(returnRes);
            } catch (Exception e) {
                e.printStackTrace();
            }
            Log.i("a", "b");
        }
    };
    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {
            if (t.myarray1 != null && t.myarray1.size() > 0) {
                for (int j = 0; j < t.myarray1.size(); j++) {
                    adapter.add(t.myarray1.get(j));

                    // adapter1.add(myListItems3.get(j));

                }
            }
            // setListAdapter(adapter);
            Log.i("a", "b");
            adapter.notifyDataSetChanged();
            // lv.setSelection(position);
            lv.setSelectionFromTop(position, top);
            Log.i("a", "b");
            getActivity().setTitle(
                    "ABE ST count: " + String.valueOf(adapter.getCount())
                            + " items");
            t.stcount = adapter.getCount();
            loadingMore = false;
            t.check1 = 1;

        }
    };
} 
```

Listfooter xml（使用的 int tabfragment 类）：页脚的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:paddingTop="7dip"
android:paddingBottom="7dip"
android:orientation="horizontal"
android:gravity="center">

<LinearLayout 
    android:id="@+id/footer_layout" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center"
    android:layout_gravity="center">

<TextView
    android:id="@+id/footer_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dip"
    android:text="Loading"
    android:textSize="14sp"
    android:textStyle="bold" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-28T10:37:34.850

实际上，您必须在设置 Adapter 之前将 FooterView 添加到 List .. 如下所示..

```
View root = inflater.inflate(R.layout.tab_frag1_layout, container,
                false);
lv = (ListView) root.findViewById(android.R.id.list);
View footerView = ((LayoutInflater) this.getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
lv.addFooterView(footerView);
lv.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-01T00:44:30.530

除了接受的答案之外，我想指出一些 Android 版本希望在设置适配器之前添加页脚，而某些版本似乎并不重要。

我在我自己的应用程序中看到，在版本`4.4.4`中，您调用的顺序无关紧要，`addFooterView`而在版本中，除非您**之前**`4.2.2`调用，否则页脚不会显示。添加页眉应始终在调用之前进行，但添加页脚似乎不那么严格，但知道不同的版本需要不同的设置很有用。所以最好在调用之前设置标题以避免任何奇怪的行为。`addFooterView` **`setAdapter``setAdapter``setAdapter`**

# c++ - 使用 C++ 实现存储任何类型的哈希

> ID：14560086
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:38.703
> 
> 标签：c++, qt

在我正在开发的一个库中，我有一个类，我想要一个存储任何类型数据的哈希。这是因为使用此库的算法可能希望将特定数据存储在该类的对象中。

该类称为“ObjectOfInterest”，其中我使用 QT 定义了哈希：

```
QHash<QString, void*> properties; 
```

然后我实现了这个函数来存储信息：

```
bool ObjectOfInterest::hasProperty(QString prop) const
{
    return properties.contains(prop);
}

template <class T> const T& ObjectOfInterest::getProperty(const QString prop) const
{
    return *(T *)properties.value(prop);
}

template <class T> void ObjectOfInterest::setProperty(const QString prop, T value)
{
    if (hasProperty(prop)) deletePropertyValue<T>(prop);
    properties.insert(prop, new T(value));
}

//private
template <class T> void ObjectOfInterest::deletePropertyValue(const QString prop)
{
    delete (T *)properties.value(prop);
} 
```

现在的问题是，当删除“ObjectOfInterest”的对象时，如何删除存储在属性哈希中的所有值？现在我有

```
ObjectOfInterest::~ObjectOfInterest()
{
    //delete other stuff...

    QHash<QString, void*>::iterator i;
    for (i = properties.begin(); i != properties.end(); ++i)
    {
        delete i.value();
    }
} 
```

但这不是解决方案，因为我没有调用析构函数。任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:40:40.060

因此，`void*`我不会使用 a ，而是创建一个包装类，它可以在其中包含一些其他对象，或者从同一个基类中获取所有“感兴趣的对象内容”。你更喜欢哪一个将取决于你。

我建议这样做的原因是，当您开始使用数据时，您会希望它是可识别的，并且通过提供相关接口来执行此操作的对象类型来帮助自己似乎很愚蠢。

换句话说，如果你存储一些东西，你想给它“贴上标签”，这样你就知道它是什么了。就像您在车库、阁楼或任何您存放暂时不需要但想保留以备将来使用的东西的地方一样。例如，你有一个盒子，上面写着“旧鞋”或“冬装”、“婴儿服”、“书”等[除非你像我一样，而且你只有一堆类似的盒子，不知道是什么在哪一个 - 但那是因为我的存储不是作为软件完成的]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:30:44.040

最后解决方案是使用 boost::any

```
//ObjectOfInterest.h
public:
    ...
    bool    hasProperty(const string & prop) const;
    void    emplaceProperty(const string & prop, boost::any value);
    void    setProperty(const string & prop, boost::any value);
    template <class T> const T property(const string & prop) const
    {
    return any_cast<T>(properties.at(prop));
    }
...
private:
    ...
    boost::unordered::unordered_map<string, boost::any> properties; 
```

* * *

```
//ObjectOfInterest.cpp
...
bool ObjectOfInterest::hasProperty(const string & prop) const
{
    return properties.find(prop)!=properties.end();
}

void ObjectOfInterest::emplaceProperty(const string & prop, any value)
{
    properties.emplace(prop, value);
}

void ObjectOfInterest::setProperty(const string & prop, any value)
{
    properties[prop] = value;
} 
```

# sql - 如何从日志表 sysssislog 中获取有意义的行受影响计数？

> ID：14560087
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:39.690
> 
> 标签：sql, ssis

我正在尝试从 SSIS 日志中获取输出到 SQL Server 表中，该表将显示已提交的行号。

我从这个查询中得到的图片示例

```
SELECT id,
       message
FROM sysssislog
WHERE SOURCE = 'client import package'
  AND message LIKE '%rows%' 
```

![在此处输入图像描述](../Images/ec47f08f3bd361cae08895ff71b43a7e.png)

似乎输出并不遥远，但我无法真正检查，因为`OLE DB destination`我到底该在哪里更改此设置？

我的输出最好是这样的：组件“数据传输报价写了 7752 行”数据传输是我的一项任务的名称......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:46:22.877

您需要更改`OLE DB Destination`每个`Data Flow Task`.

这是一个非常简单的包，可以将文本文件导入 SQL Server 表。平面文件如下所示。

![平面文件](../Images/59e76a08377970961864606f25277f23.png)

SSIS 包内的数据流任务配置如下所示。它读取文件并将文件输出传递到两个不同的 OLE DB 目标。注意：您会注意到每个 OLE DB 目标都被赋予了适当的名称，例如**`All records`**和**`Only 123`**。这就是日志表中显示的内容`sysssislog`。在 SSIS 包上启用了日志记录。

![数据流任务](../Images/04f5d2a20c7456979d117c287aef073e.png)

当我在日志数据库中运行以下查询时，我会注意到组件名称和每个 OLE DB 目标组件插入的记录数。

```
select  id
,       message 
from    sysssislog 
where   source = 'so_14560087' 
and     message like '%rows%' 
```

我相信这就是您正在寻找的。我假设在您的情况下，您有多个数据流任务，并且`OLE DB Destination`在每个数据流任务中都保留了默认名称 OLE DB Destination。这就是您在日志表中看到相同名称的原因。您只需单击`OLE DB Destination`每个数据流任务中的组件并提供适当的名称供您检查状态。

![日志表](../Images/26fd81f91bf02a433064f79aa4885720.png)

# node.js - Mongodb查询嵌套对象

> ID：14560088
> 
> 赞同：0
> 
> 时间：2013-01-28T10:33:47.707
> 
> 标签：node.js, mongodb, pug, express

我的对象就像，

```
{
   "Team-A": {
        "captain": "A",
        "homeGround": "some ground",
        "winLoss": "12-4-0"
    },
    "Team-B": {
        "captain": "B",
        "homeGround": "some ground 2",
        "winLoss": "4-4-4"
    }
} 
```

我需要将此信息显示为，

```
<h1>Team-A</h1>
<h2>some ground</h2>
<h3>12-4-0</h3>

<h1>Team-B</h1>
<h2>some ground2</h2>
<h3>4-4-4</h3> 
```

**节点：**

```
MongoClient.connect("mongodb://localhost:27017/MY_DB_TEST", function(err, db) {
      if(!err) {
        console.log("We are connected");        

        var collection =  db.collection('football_teams');      
        var stream = collection.find().stream();

        stream.on("data", function(item){
            console.log(item);
            res.render('index', {obj: item });
        });     
      }
    }); 
```

**玉：**

```
h1= obj.captain
h2= obj.homeGround
h3= obj.winLoss 
```

我的控制台输出是：

```
{ _id: 51064fa1e0d5d118b4b29aa0,
  'Team-A': {
        'captain": 'A',
        'homeGround": 'some ground',
        'winLoss': '12-4-0'
    } }

title is not defined
    at eval (eval at <anonymous> (C:\node_modules\jade\lib\jade.js:176:8))
    at exports.compile (C:\node_modules\jade\lib\jade.js:181:12)
    at Object.exports.render (C:\node_modules\jade\lib\jade.js:216:14)
    at View.exports.renderFile [as engine] (C:\node_modules\jade\lib\jade.js:243:13)
    at View.render (C:\node_modules\express\lib\view.js:75:8)
    at Function.app.render (C:\node_modules\express\lib\application.js:503:10)
    at ServerResponse.res.render (C:\node_modules\express\lib\response.js:721:7)
    at CursorStream.exports.index (C:\Users\HFR&D\Desktop\nodemongoexpress\routes\index.js:18:8)
    at CursorStream.EventEmitter.emit (events.js:96:17)
    at CursorStream._onNextObject (C:\Users\HFR&D\Desktop\nodemongoexpress\node_modules\mongodb\lib\mongodb\cursorstream 
```

我不明白我应该如何遍历我的对象并获取值 Team-A/Team-B 及其各自的详细信息。

我如何使用`nodejs`and来实现这一点`jade`。

**更新：**

假设有 20 个团队，我的收藏将包含 20 个文档。我想要做的是，循环浏览我的收藏并在上面描述的 20 个文档中显示信息。

*   我的数据库结构正确吗？我应该为每个团队准备不同的文件吗？

*   如果是，我如何在翡翠渲染时动态获取文档（团队-A，团队-B）的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:06:14.127

正如您在 console.log 中看到的那样，您确实获得了 Team-A 集合

```
{ _id: 51064fa1e0d5d118b4b29aa0,
  'Team-A': {
        'captain": 'A',
        'homeGround": 'some ground',
        'winLoss': '12-4-0'
    } } 
```

你得到的错误是`title is not defined`，所以我猜其他东西正在破坏你的代码。（也许没有设置布局的标题变量？）

解决该问题后，请这样做

```
h1= obj['Team-A'].captain
h2= obj['Team-A'].homeGround
h3= obj['Team-A'].winLoss 
```

那会给你数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:21:06.710

```
var myobj = {
 "Team-A": {
   "captain": "A",
   "homeGround": "some ground",
   "winLoss": "12-4-0"
 },
 "Team-B": {
   "captain": "B",
   "homeGround": "some ground 2",
   "winLoss": "4-4-4"
 }
};

var key = Object.keys(obj)[0] // gives you the first key i.e. Team-A. its an array so every key is easily accessible.
var captain = myobj[key].captain // gives 'A'
var homeGround = myobj[key].homeGround // gives 'some ground'
var winloss = myobj[key].winloss //gives "12-4-0" 
```

# jquery - 在 JQM 中，我可以为列表视图和列表视图中的复选框获取单独的事件吗？

> ID：14560093
> 
> 赞同：1
> 
> 时间：2013-01-28T10:33:59.967
> 
> 标签：jquery, jquery-mobile, event-handling

在 Jquery mobile 中，我在列表视图中创建了一个复选框。我想将这两个事件分开，因为当用户只选中复选框时，事件就会触发。在单击列表项时，会发生不同的事件。

我如何在 JQM 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:06:44.237

这应该不是问题，看看我的例子：http: [//jsfiddle.net/Gajotres/QXJrk/](http://jsfiddle.net/Gajotres/QXJrk/)

当你点击一个复选框时，只有它的点击才会触发，当你点击一个列表视图元素时，它只会触发它自己的动作。

我不知道您是如何设法在 listview 实现上创建复选框的，但是如果在单击复选框时触发了 listview，那么您还需要在复选框单击事件中执行此操作：

```
e.stopPropagation();
e.stopImmediatePropagation(); 
```

# r - 合并R中的重叠列表位置

> ID：14560094
> 
> 赞同：1
> 
> 时间：2013-01-28T10:33:59.730
> 
> 标签：r, list

我对列表有疑问。我有两个清单：

`List1:`

```
[[1]]
 [1] 176 177 178 179 180

[[2]]
 [1] 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241
 [21] 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256

[[3]]
 [1] 260 261 262 263 264 265

[[4]]
 [1] 293 294 295 296 297 298 299 300 301 302 303 304

[[5]]
 [1] 393 394 395 396 397 398 
```

`List 2:`

```
[[1]]
 [1]  99 100 101 102 103

[[2]]
 [1] 260 261 262 263 264 265

[[3]]
 [1] 293 294 295 296 297 298 299 300

[[4]]
  [1] 390 391 392 393 394 395 
```

现在我想*用*. `combined overlapping lists of list 1 and list 2`它应该如下所示：

`List 3:`

```
[[1]]
 [1] 260 261 262 263 264 265

[[2]]
 [1] 293 294 295 296 297 298 299 300 301 302 303 304

[[3]]
 [1] 390 391 392 393 394 395 396 397 398 
```

我会很高兴有想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:12:35.717

听起来你的列表是，范围列表，想法是使用`IRanges`包。

你可以这样做：

首先我创建我的范围：

```
query   <- IRanges(c(176,222,260,293,393),c(180,256,265,304,398))
subject <- IRanges(c(99,260,293,390),c(103,265,300,395))

 query
IRanges of length 5
    start end width
[1]   176 180     5
[2]   222 256    35
[3]   260 265     6
[4]   293 304    12
[5]   393 398     6
subject
IRanges of length 4
    start end width
[1]    99 103     5
[2]   260 265     6
[3]   293 300     8
[4]   390 395     6 
```

比我发现重叠

```
tree <- IntervalTree(subject)
res <- findOverlaps(query, tree)

res
Hits of length 3
queryLength: 5
subjectLength: 4
  queryHits subjectHits 
   <integer>   <integer> 
 1         3           2        ## third element in 2 second element 
 2         4           3 
 3         5           4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:15:34.537

以下给了我您要求的结果：

```
list1<-list(176:180, 222:256, 260:265, 293:304, 393:398)
list2<-list(99:103, 260:265, 293:300, 390:395)

result <- list()
for (x1 in list1) {
  for (x2 in list2) {
    if (any(x1 %in% x2)) {
      result[[length(result)+1]] <- union(x1, x2) 
    }
  }
} 
```

# c++ - 每次实例化泛型类时增加编译时变量

> ID：14560095
> 
> 赞同：5
> 
> 时间：2013-01-28T10:34:01.133
> 
> 标签：c++, c++11, generic-programming

我有这堂课：

```
template <typename T, uint64_t N>
struct Probe {
  static const uint64_t Counter = N;
  typedef T Type;
}; 
```

我将其用作：

```
typedef Probe <int, 0> FirstIntProbe;
typedef Probe <int, 1> SecondIntProbe;
typedef Probe <float, 2> FloatProbe; 
```

是否可以创建一个编译时间\宏方法，它允许我在不指定第二个参数的情况下实例化此类，例如：

```
typedef Probe <int, Something?> FirstIntProbe;
typedef Probe <int, Something?> SecondIntProbe;
typedef Probe <float, Something?> FloatProbe; 
```

我认为这是不可能的，但是我又一次看到人们用 C++ 做我以前认为不可能的事情。

* * *

*更新：*

*   不需要加一，重要的是每个探针都有自己的编号。
*   不需要在不同的 .cpp 文件\翻译单元中具有唯一编号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T10:38:30.207

您可以考虑使用`__COUNTER__`宏，它是一个编译器扩展（但在[GCC](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)和[MSVC](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)等上受支持）。请注意，只有每个翻译单元（即每个文件`__COUNTER__`）是唯一的。`.cpp`

**编辑**：在多个翻译单元中包含标题是可以的。此示例链接并运行得非常好（基于 GCC 4.5）：

*探针.h*：

```
template <typename T, int N>
struct Probe {
    typedef T Type;
};

#define DECLARE_PROBE(type) typedef struct Probe<type, __COUNTER__> 
```

*主.cpp*：

```
#include "test.h"

DECLARE_PROBE(int) intprobe;
DECLARE_PROBE(float) floatprobe;

int main(int argc, char** argv) {
    intprobe ip;
    floatprobe fp;
    return 0;
} 
```

*测试.cpp*：

```
#include "test.h"

DECLARE_PROBE(int) intprobe;
DECLARE_PROBE(float) floatprobe;

static intprobe ip;
static floatprobe fp; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:08:45.437

*如果*您不需要整数常量表达式（即您不用`Counter`作数组的维度等），这实际上非常简单：只需为计数器使用全局静态（或将其放入非模板基类中） )，并在每次在初始化中使用它时递增它。就像是：

```
int currentProbeCounter;

template <typename T>
struct Probe
{
    static int const counter;
    //  ...
};

template <typename T>
const int Probe<T>::counter = ++ currentProbeCounter; 
```

请注意，这只会`Probe<T>::counter`在您使用时（或如果）为给定类型分配；您可能希望在`Probe`（即使您不需要）的构造函数中使用它来确保它的创建。（另一方面，如果你从不使用它，谁在乎它是否从未被创建。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:10:35.603

您可以使用[Boost.Preprocessor](http://www.boost.org/doc/libs/1_52_0/libs/preprocessor/doc/index.html)为您完成这项工作。

# web-services - 视觉工作室速成版 2010

> ID：14560099
> 
> 赞同：0
> 
> 时间：2013-01-28T10:34:17.050
> 
> 标签：web-services, visual-studio, debugging

我有一个包含 2 个项目的解决方案：一个 Web 服务和一个消耗他的项目。使用我的 Visual Studio 2008 Professional 我可以调试两个项目（从项目开始，当我调用 Web 服务时，我可以调试代码），但不能使用 Visual Studio Express 2010。这是我的“Express”版本的限制吗？ IDE？！？

感谢您的关注。

# spring - Tiles 3 List 属性无法正常工作

> ID：14560104
> 
> 赞同：1
> 
> 时间：2013-01-28T10:34:41.840
> 
> 标签：spring, spring-mvc, tiles

我的 spring MVC 项目和图块 3 面临几个问题，其中一个主要问题是列表属性。我想要做的是使用 来创建一个通用的瓷砖定义`OptionsRenderer`，就像在[最终视图文章中](http://tech.finn.no/2012/07/25/the-ultimate-view-tiles-3/4/)一样（文章中有一个错误，因为 lit 属性是在定义之外定义的，这是错误的）。`${options[myoptions]}`当我使用表达式创建一些属性时，我总是`IllegalStateException`在我的模板 JSP 中得到一个，因为缺少带有名称的列表属性`myoptions`，即使我定义了这个列表属性。我的代码如下：

## 瓷砖.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_3_0.dtd">

<tiles-definitions>

    <definition name="WILDCARD:*/*" template="/WEB-INF/view/template.jsp">
        <put-attribute name="meta" value="/WEB-INF/view/${options[folder]}/meta.jsp" />
        <put-attribute name="header" value="/WEB-INF/view/${options[folder]}/header.jsp" />
        <put-attribute name="body" value="/WEB-INF/view/${options[folder]}/{2}.jsp" />
        <put-attribute name="footer" value="/WEB-INF/view/${options[folder]}/footer.jsp" />

        <put-list-attribute name="folder">
            <add-list-attribute>
                <add-attribute value="{1}" />
                <add-attribute value="common" />
            </add-list-attribute>
        </put-list-attribute>
    </definition>
</tiles-definitions> 
```

## 模板.jsp

```
<%@ page language="java" pageEncoding="UTF-8"
    contentType="text/html; charset=utf-8" trimDirectiveWhitespaces="true"%>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<html>
<head>
<title>${dynamicTitle} - <fmt:message key="common.siteName" /></title>
<tiles:insertAttribute name="meta" />
</head>
<body>
    <div id="header">
        <tiles:insertAttribute name="header" />
    </div>
    <div id="body">
        <tiles:insertAttribute name="body" />
    </div>
    <div id="footer">
        <tiles:insertAttribute name="footer" />
    </div>
</body>
</html> 
```

我尝试了几种解决方案都没有结果。我的试验如下： 1.`<tiles:importAttribute name="folder"/>`在我的 JSP 中使用。完全没有区别 2.`<tiles:insertAttribute name="folder"/>`在我的JSP中使用。我遇到了一个异常，因为属性不是字符串。3.在JSP中定义属性`<tiles:putListAttribute name="folder">FULL_DEFINITION_HERE</tiles:putListAttribute>`完全没有区别。

我已经参考了上面提到的文章，以及没有用的特别是[OptionsRenderer 文档的](http://tiles.apache.org/framework/apidocs/org/apache/tiles/extras/renderer/OptionsRenderer.html)[平铺文档。](http://tiles.apache.org/framework/index.html)谁能告诉我我在这里做错了什么？我相信这与spring MVC无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T08:29:34.257

我也无法使用 OptionsRender，但喜欢能够在目录层次结构中选择我的模板的想法。所以我写了我自己的渲染器，它似乎运行得很好。我已经实现了路径语法“[CHOICE_1|CHOICE_2|...|CHOICE_n]”，它选择了导致有效路径的第一个选项。一个例子是：

```
 <definition name="main/*/*" template="/WEB-INF/tiles/layout_main.jsp">
      <put-attribute name="top" value="/WEB-INF/tiles/[{1}/{2}|{1}|common]/top.jsp"/>
      <put-attribute name="content" value="/WEB-INF/tiles/[{1}/{2}|{1}|common]/content.jsp"/>
      <put-attribute name="footer" value="/WEB-INF/tiles/[{1}/{2}|{1}|common]/footer.jsp"/>
    </definition> 
```

我的 Renderer 实现也应该能够替换选择模式的几次出现。OptionsRender 似乎无法处理这种情况。

这是渲染器的实现。它必须像[最终视图文章](http://tech.finn.no/2012/07/25/the-ultimate-view-tiles-3/4/)中所述那样集成到 Apache Tiles 中。也许 Apache Tiles 的某个人将它集成到了官方版本中。:-)

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.apache.tiles.request.Request;
import org.apache.tiles.request.render.Renderer;

public final class ChoiceRenderer implements Renderer {

    private static final Pattern CHOICE_PATTERN = Pattern.compile("\\[([^\\]]+)\\]");

    private final Renderer renderer;

    public ChoiceRenderer(Renderer renderer) {
        this.renderer = renderer;
    }

    @Override
    public boolean isRenderable(String path, Request request) {
        // only the overall format is checked, so no extra handling here
        return this.renderer.isRenderable(path, request);
    }

    @Override
    public void render(String path, Request request) throws IOException {
        Matcher matcher = CHOICE_PATTERN.matcher(path);
        List<String[]> groups = new ArrayList<String[]>();
        StringBuffer sb = new StringBuffer();
        while (matcher.find()) {
            matcher.appendReplacement(sb, "{[" + groups.size() + "]}");
            groups.add(matcher.group(1).split("\\|"));
        }
        matcher.appendTail(sb);
        if (groups.isEmpty()) {
            this.renderer.render(path, request);
        } else {
            backtrackPaths(sb.toString(), request, groups, 0);
        }
    }

    private String backtrackPaths(String pathPattern, Request request, List<String[]> groups, int depth)
            throws IOException {
        String matchPath = null;
        String[] parts = groups.get(depth);
        for (int i = 0; i < parts.length; ++i) {
            String path = pathPattern.replace("{[" + depth + "]}", parts[i]);
            if (depth == groups.size() - 1) {
                if (isPathValid(path, request)) {
                    this.renderer.render(path, request);
                    matchPath = path;
                    break;
                }
            } else {
                matchPath = backtrackPaths(path, request, groups, depth + 1);
            }
        }
        return matchPath;
    }

    // TODO should we use caching here?
    private boolean isPathValid(String path, Request request) {
        boolean rtn = false;
        // apparently the corresponding Renderer method seems to check the
        // path's format only
        if (this.renderer.isRenderable(path, request)) {
            try {
                rtn = request.getApplicationContext().getResource(path) != null;
            } catch (IllegalArgumentException e) {
                // TODO the javadoc states that null will be returned, but
                // instead of it an exception is thrown.
                // Seems to be a bug?!
                boolean throwException = true;
                if (e.getCause() instanceof FileNotFoundException) {
                    FileNotFoundException fex = (FileNotFoundException) e.getCause();
                    throwException = fex.getMessage().indexOf(path) == -1;
                }
                if (throwException) {
                    // seems to be a different reason as our searched path
                    throw e;
                }
            }
        }
        return rtn;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-05T09:54:04.273

请`$`从`${options`.

# php - WordPress 获取条款和订单

> ID：14560108
> 
> 赞同：3
> 
> 时间：2013-01-28T10:34:49.810
> 
> 标签：php, wordpress, taxonomy

我正在使用以下代码查询自定义分类中的术语：

```
<?php
  $term_slug    = get_query_var('term');
  $taxonomyName = get_query_var('taxonomy');
  $current_term = get_term_by('slug', $term_slug, $taxonomyName);
  $termchildren = get_term_children($current_term->term_id, $taxonomyName);
  foreach ($termchildren as $child) {
    $term = get_term_by('id', $child, $taxonomyName);

    echo '<li id="mid"><a href="#tab-' . $slug = $term->slug . '">' . $term->name . '</a></li>';

  }
?> 
```

这一切都很好！我遇到的问题是我想通过菜单顺序或类似的方式订购它。目前它们的顺序是随机的！

谁能建议我需要做什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T10:44:23.397

尝试使用[get_terms](http://codex.wordpress.org/Function_Reference/get_terms)函数。您的代码将是这样的（您可以指定 orderby 和 order arg）

```
<?php
  $term_slug     = get_query_var('term');
  $taxonomy_name = get_query_var('taxonomy');
  $current_term  = get_term_by('slug', $term_slug, $taxonomy_name);
  if ( true === is_a( $current_term, 'WP_Term' ) ) {
      $args = array(
          'child_of' => $current_term->term_id,
          'orderby'  => 'id',
          'order'    => 'DESC'
      );
      $terms = get_terms($taxonomyName, $args);
      if ( true === is_array( $terms ) ) {
          foreach ($terms as $term) {
              echo '<li id="mid"><a href="#tab-' . esc_attr( $term->slug ) . '">' . esc_html( $term->name ) . '</a></li>';
          }
      }
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T18:12:26.583

使用分类文件中的代码：

```
$wterm  = get_queried_object();
$termslug = $wterm->slug;
$termname = $wterm->name;
$termid   = $wterm->term_id;

$terms = get_terms( 'taxonomy-name', array(
    'orderby'    => 'name',
    'hide_empty' => 0,
    'child_of' => $termid
) );

if ( ! empty( $terms ) && ! is_wp_error( $terms ) ){
    foreach ( $terms as $term ) {
        echo $term->name ;
    }
} 
```

# android - 我应该在 java 中使用哪种类型来用 JNI 调用这个 C 函数？

> ID：14560111
> 
> 赞同：0
> 
> 时间：2013-01-28T10:35:08.437
> 
> 标签：android, pointers, struct, java-native-interface, malloc

当我想`C`在 android use 上调用 java 中的本机函数时，我遇到了这个问题`JNI`。我将一个指向结构的指针作为该`C`函数中的参数传递，并为该指针分配内存。

那么请告诉我如何`C`在java中调用这个函数？我google了很长时间，但没有得到任何奖励。

像这样的代码， A 是结构的名称：

```
JNIEXPORT int JNICALL
Java_pkgname_NativeTools_create(JNIEnv *env, jclass jclazz, A **ptr) {
    *ptr = (A*) malloc(sizeof(A));
    if (*ptr != NULL ) {
        return 0;
    } else {
        return -1;
    }
} 
```

而且我不知道如何编写本机界面：

```
public class NativeTools{
    static {
        System.loadLibrary("LibName");
    }

    // TODO don't know what type in JNI should I use to declare this native function?
    public static native int create(?);
} 
```

非常感谢，对不起我糟糕的英语:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:01:11.067

你不能这样做。您只能将[JNI 数据类型](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html)用作 C 函数参数。无论如何， Java中没有*结构*甚至*指针之类的东西。*是什么，您想在 Java 端创建然后“将其传递给 C”？您可以获得的最接近*指针*`jobject`的是引用类型，但 C 并不像您尝试的那样简单地理解它。它是对*JVM object*的引用，而不是*C struct*。它仅作为进一步 JNI 调用（回调 JVM）的参数。

有一些工具可以帮助您提高数据类型互操作性（SWIG、JNA），但鉴于明显的基本误解，您应该从一些基本阅读开始：

```
http://192.9.162.55/docs/books/jni/html/jniTOC.html 
```

(can't do a proper link, SO forbids IP addresses)

# ios - 如何在 AVPlayer 中设置歌曲的当前时间和总时间？

> ID：14560112
> 
> 赞同：1
> 
> 时间：2013-01-28T10:35:15.643
> 
> 标签：ios, nstimer, uislider, avplayer

我想在我的应用程序中使用以下代码来获取 UISlider 上的当前播放时间和总时间，我从这个[链接](https://stackoverflow.com/questions/6329706/avplayer-video-seektotime)获取代码。

```
 -(IBAction)sliding:(id)sender{

    CMTime newTime = CMTimeMakeWithSeconds(seeker.value, 1);
    [self.player seekToTime:newTime];
 }

-(void)setSlider{

    sliderTimer = [[NSTimer scheduledTimerWithTimeInterval:1.0 target:self    selector:@selector(updateSlider) userInfo:nil repeats:YES]retain];
    self.seeker.maximumValue = [self durationInSeconds];
    [seeker addTarget:self action:@selector(sliding:) forControlEvents:UIControlEventValueChanged];
    seeker.minimumValue = 0.0;
    seeker.continuous = YES;  
}

- (void)updateSlider {

    self.seeker.maximumValue = [self durationInSeconds];
    self.seeker.value = [self currentTimeInSeconds];
}

- (Float64)durationInSeconds {
        Float64 dur = CMTimeGetSeconds(duration);
    return dur;
}

- (Float64)currentTimeInSeconds {
        Float64 dur = CMTimeGetSeconds([self.player currentTime]);
    return dur;
  } 
```

但我不知道什么是*seeker*。我是 iOS 新手，我需要任何有关此问题的教程的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:43:16.613

```
@property (strong, nonatomic) IBOutlet UISlider *seeker; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T06:38:54.617

@邦德先生

```
- (Float64)currentTimeInSeconds {

double runningTime = CMTimeGetSeconds(_playerViewController.player.currentTime);
NSLog(@"currentTime %f",runningTime);

return dur;
} 
```

# c# - 使用已经运行的应用程序实例

> ID：14560113
> 
> 赞同：2
> 
> 时间：2013-01-28T10:35:17.157
> 
> 标签：c#, winforms

> **可能重复：**
> [创建单实例应用程序的正确方法是什么？](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application)
> [如何实现每个机器应用程序的单个实例？](https://stackoverflow.com/questions/4223061/how-to-implement-single-instance-per-machine-application)

我有一个 Winform 应用程序，它将一个参数作为参数。

```
static class Program
{

    [STAThread]
    static void Main(string[] args)
    {           
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Gauges(args));
    }
} 
```

该程序每天由另一个应用程序执行数次。

是否可以检查我的程序是否已经在运行，如果是，我可以使用带有最新参数的正在运行的实例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:38:08.337

您可以使用互斥锁停止运行的应用程序的多个副本。这里有一篇关于使用互斥锁的非常好的文章：http: [//sanity-free.org/143/csharp_dotnet_single_instance_application.html](http://sanity-free.org/143/csharp_dotnet_single_instance_application.html)

至于将参数传递给已经运行的进程，您需要实现某种形式的 IPC 来通知正在运行的实例新参数。您可以使用许多解决方案，例如套接字、命名管道等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:41:02.947

> 是否可以检查我的程序是否已经在运行

您可以在应用程序中使用[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx#United%20States%20%28English%29)

```
bool alreadyPresent  =false;
using (Mutex mutex = new Mutex(true, "YourAppName", out alreadyPresent  ))
{
    if(alreadyPresent ) {
       //APP ALREADY PRESENT 
    }
} 
```

[互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx#United%20States%20%28English%29)是**操作系统**工件，因此，您的应用程序（可执行文件）的不同实例不能访问同一个对象。

> 我可以使用带有最新参数的正在运行的实例吗？

这取决于您如何管理您的应用程序。您可以使用某种`IPC`机制将所需的参数传达给已经运行的进程。

# javascript - JavaScript 捕获事件

> ID：14560115
> 
> 赞同：3
> 
> 时间：2013-01-28T10:35:26.333
> 
> 标签：javascript, jquery

我有个问题。我的 DOM 中有太多事件。上层正在捕捉更深层次的事件。

简单的例子：

```
<!DOCTYPE html>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("p").click(function(){
                $(this).hide();
            })
            $("#second").click(function(){
                alert("second.");
            });
            $("#first").click(function(){
                alert("first.");
            });
        });
    </script>
    <style type="text/css">
        #first{
            width: 200px;
            height: 200px;
            background-color: red;
        }
        #second{
            width: 100px;
            height: 100px;
            background-color: green;
        }
    </style>
</head>
<body>

    <div id="first">
        <div id="second">

        </div>
    </div>

</body>
</html> 
```

如果有人点击被第一个 div 包围的第二个 div，则两个 div 都会捕获该事件。在这种情况下，我怎样才能只捕获第二个 div 的点击事件，而离开第一个 div。

我了解了事件冒泡，而 C# 中的隧道就是问题所在。这个问题怎么称呼？如何使用 JavaScript 和 jQuery 解决问题。解决方法是一样的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:38:08.350

你只需要阻止事件传播到父元素：

```
$("#second").click(function (e) {
    e.stopPropagation();

    alert("second.");
}); 
```

**演示：http: [//jsfiddle.net/EXbdt/3/](http://jsfiddle.net/EXbdt/3/)**

# scala - 在 Slick 上保存加密字段

> ID：14560116
> 
> 赞同：1
> 
> 时间：2013-01-28T10:35:31.680
> 
> 标签：scala, slick

一个我无法弄清楚的简单问题（谷歌或文档中没有 - 也许很明显，但对我来说不是）。我在 Play 中使用 slick！Framework 2.1，我想在数据库中保存一些敏感的用户信息。我想在每次要保存数据时加密数据（以及在内存中，当在 a 中构造时`case class`）并在每次需要时解密数据。数据是 OAuth `access_token`。

这是我的（简化的）代码：

```
case class User(id: Option[Int] = None,
                name: String,
                email: String,
                oauthToken: Option[String] = None) 
```

物体：

```
object Users extends Table[User]("User") {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def name = column[String]("name")
  def email = column[String]("email")
  def oauthToken = column[String]("oauthToken", O.Nullable)

  def * = id.? ~
          name ~
          email ~
          oauthToken.? <> (User, User.unapply _)
} 
```

我想要做的是在`oauthToken`每次`User`构造案例类时加密。并在每次`user.oauthToken`调用时对其进行解密。目前我最好的猜测是更改 的 getter 和 setter `oauthToken`，但据我所知，在 Scala 中我们不能真正做到这一点（更不用说对 Slick 的影响了）。

我应该怎么做才能在现场进行加密/解密？

之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:06:45.647

像这样的东西应该可以解决问题

```
// get user
Users.where(_.id is Some(1)).map(decodeUser)

def decodeUser(u: User) =
  u.copy(oauthToken = u.oauthToken.map(/* do decoding */))

// store user
for{
  model <- userForm.bindFromRequest
  id <- Users(encodeUser(model)).insert
} yield id

def encodeUser(u: User) =
  u.copy(oauthToken = u.oauthToken.map(/* do encoding */)) 
```

# javascript - 使用 Javascript 上传文件返回风格化的“拒绝访问”错误到一个按钮

> ID：14560121
> 
> 赞同：6
> 
> 时间：2013-01-28T10:35:59.063
> 
> 标签：javascript, jquery, css, iframe, file-upload

我使用以下方式对我的文件输入进行了风格化：

```
<html>
<head>
<style>
#yourBtn{
 position: relative;
 top: 150px;
 font-family: calibri;
 width: 150px;
 padding: 10px;
 border-radius: 5px;
 border: 1px dashed #ddeeff; 
 text-align: center;
 background-color: #ffddee;
 cursor:pointer;
 color:#333333;
}
</style>
<script type="text/javascript">
 function getFile(){
document.getElementById("upfile").click();
 }
 function sub(obj){
 document.getElementById("yourBtn").innerHTML = "Uploading Please Wait...";
 document.myForm.submit();
 event.preventDefault();
 }
</script>
</head>
<body>
<center>
<form action="/sub/upload.php" method="POST" enctype="multipart/form-data" name="myForm" target="myiframe">
<div id="yourBtn" onclick="getFile()">click to upload a file</div>
<div style='height: 0px;width: 0px; overflow:hidden;'><input id="upfile" type="file" name="upload" style="display:none;" onchange="sub(this)" /></div>
</form>
<iframe name="myiframe" style="width:100;height:100;border:2px solid #bbccdd;"></iframe>
</center>
</body>
</html> 
```

问题是 .submit() 函数在 IE 上返回“拒绝访问”错误（在 IE8 和 9 中测试）。在所有其他浏览器（chrome、opera、safari 和 Firefox）中都能正常工作。当 sub(obj) 被调用时。即使我也使用 Jquery，也会发生同样的情况。

那么谁能告诉我应该如何让这个脚本在 IE 上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:14:54.920

如上所述，IE 不允许您通过 javascript 打开对话框并代表用户提交文件。话虽如此，您对“文件输入”进行样式设置的想法是完全有效的。

此链接可以帮助您：

[样式文件输入](http://www.quirksmode.org/dom/inputfile.html)

至少可以说这是一个错误的工作，但一般要点是：

1.  创建一个文件输入并使用 css 将不透明度设置为 0.0。不要设置可见性，因为这将禁用输入。
2.  使用 CSS 为您喜欢的常规文本输入设置样式，使其看起来像您想要的文件输入。
3.  定位文本输入并添加 0 的 z-index。
4.  定位您的文件输入（完全透明）并将其 z-index 设为 1。
5.  编写javascript来拉取文件输入的值（即在jQuery中

    ```
    $('input[type="file"]').val(); 
    ```

    并将其放在文本输入中。

这里的想法是文件输入仍在拉文件，用户仍在选择文件。从某种意义上说，您是在掩盖它并使它看起来好像您有一个自定义控件。真的，你的假控制在真正透明的背后。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:47:01.167

这永远不会奏效。IE 不允许您通过 javascript 调用“选择文件”对话框并通过 javascript 提交关联的表单。如您所见，如果您尝试这样做，IE 将在表单提交时抛出错误。您必须允许用户自己单击输入元素。

# javascript - 未捕获的类型错误：无法调用未定义的方法“indexOf”

> ID：14560123
> 
> 赞同：0
> 
> 时间：2013-01-28T10:36:05.223
> 
> 标签：javascript, ajax, jquery, oracle-apex

我的 oracle apex 应用程序`javascripts`的页面上有以下两个。`HTML Header`

```
<script type="text/javascript">
function createEventListeners3(pThis)
{

var mainRow = "f04_"+pThis.id.substr(pThis.id.indexOf('_')+1);
$("#" + mainRow).change(function(){
var that = this;
var vRow = "f06_"+pThis.id.substr(pThis.id.indexOf('_')+1);
$.post("wwv_flow.show", 
       {p_request      : "APPLICATION_PROCESS=GET_AMOUNT",
        p_flow_id      : $v("pFlowId"),
        p_flow_step_id : $v("pFlowStepId"),
        p_instance     : $v("pInstance"),
        x01            : $(this).val()
        },
        function(data){ 
            if ($("#" + vRow).val() == ''){
                $("#" + vRow).val(data);
            }
        },
        "text"
      );
});

}
</script> 
```

我`javascript`从`autocomplete select event`这里打电话给上面。

```
<script type="text/javascript">
function createEventListeners()
{

$(function(){
 /* Set autocomplete */
 $('input[name="f04"]').autocomplete({
  source:function(req,res){

   /* Parameters for jQuery ajax */
   var opt={
    url:"wwv_flow.show",
    dataType:"json",
    traditional:true,
    cache:false,
    type:"POST",
    data:{
     p_flow_id:$v("pFlowId"),
     p_flow_step_id:$v("pFlowStepId"),
     p_instance:$v("pInstance"),
     p_request:"APPLICATION_PROCESS=GET_DESCRIPTION",
     x01:req.term
    },
    success:function(jsonData){
     res(
      $.map(jsonData.row,function(jsonRow){
       return{
        label:jsonRow.RET,
        value:jsonRow.DIS
       };
      })
     );
    }
   };
   /* Call Ajax to get list */
   $.ajax(opt);
  },
  focus:function(event,ui){
   /* Prevent value change when list get focus */
//   return false;
event.preventDefault();
  },

  select: function (event, ui) {

    createEventListeners3(this.id);
}

 });
});

return;
}
</script> 
```

但我得到了错误。

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:36:59.023

您已经可以将 id 而不是对象传递给 function `createEventListeners3`。`this`使用而不是传递对象`this.id`

*改变*

```
createEventListeners3(this.id); 
```

*至*

```
createEventListeners3(this); 
```

# hadoop - 蜂巢视图错误

> ID：14560125
> 
> 赞同：1
> 
> 时间：2013-01-28T10:36:16.607
> 
> 标签：hadoop, hive

我是 hadoop 配置单元的新手，我试图在配置单元表上创建一个一对一的配置单元视图，但我得到一个未知的主机异常:(

1.  下面给出的是表的 DDL：

    ```
    CREATE TABLE CLIAMS (
    CLAIM_KEY INT,
    CLAIM_NAME STRING
    )STORED AS SEQUENCEFILE; 
    ```

2.  以下是视图定义：

    ```
    create view claimant_view as select * from claims; 
    ```

3.  当我从视图中进行选择时，我会抛出以下异常：

    ```
    select * from claimant_view;
    Total MapReduce jobs = 1
    Launching Job 1 out of 1
    Number of reduce tasks is set to 0 since there's no reduce operator
    WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
    Execution log at: /tmp/root/root_20130128022828_021334d7-cd4e-4499-b053-d239b7b839ee.log
    java.net.UnknownHostException: server-1358839685-az-1-region-a-geo-1.localdomain: server-1358839685-az-1-region-a-geo-1.localdomain
            at java.net.InetAddress.getLocalHost(InetAddress.java:1360)
            at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:920)
            at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:896)
            at java.security.AccessController.doPrivileged(Native Method)
            at javax.security.auth.Subject.doAs(Subject.java:396)
            at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
            at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:896)
            at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:870)
            at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:435)
            at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:677)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
    Job Submission failed with exception 'java.net.UnknownHostException(server-1358839685-az-1-region-a-geo-1.localdomain: server-1358839685-az-1-region-a-geo-1.localdomain)'
    Execution failed with exit status: 1
    Obtaining error information

    Task failed!
    Task ID:
      Stage-1 
    ```

日志：

```
/tmp/root/hive.log 
```

有人请帮助我理解这个问题，如果您需要任何进一步的信息，请告诉我。

# php - PHP中的Javascript变量值

> ID：14560133
> 
> 赞同：0
> 
> 时间：2013-01-28T10:36:35.000
> 
> 标签：php, javascript

我的代码看起来像这样

```
var bal=$(this).val();
var findbalance="<?=balancefromid(bal);?>";
alert(findbalance); 
```

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:44:08.560

不，这是行不通的，因为虽然您可以为 JS 变量分配来自 PHP 的值，但如果不通过 GET/POST 参数或通过 Ajax 调用传递 JS 值，则不能以相反的方式执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:43:19.483

首先，您应该了解客户端和服务器端脚本是如何工作的，然后您将了解为什么这是不可能的和不合逻辑的

[http://en.wikipedia.org/wiki/Server-side_scripting](http://en.wikipedia.org/wiki/Server-side_scripting) [http://en.wikipedia.org/wiki/Client-side_scripting](http://en.wikipedia.org/wiki/Client-side_scripting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:50:22.160

听起来您对在 Web 上进行开发感到困惑。Javascript 是一种“客户端”语言，这意味着它在页面被编译并从服务器发送之后在客户端浏览器上运行。这意味着代码中没有 PHP/ASP，只有 HTML 和 Javascript。

PHP、ASP、JSP 是仅在服务器端运行的服务器端语言。

因此，要回答您的问题，不，您不能直接让 Javascript 调用 PHP（服务器端）函数，但您可以发布到 PHP 页面，然后该页面将执行您喜欢的任何功能。

# c# - 一个实现两个不同 IObservable 的类？

> ID：14560134
> 
> 赞同：2
> 
> 时间：2013-01-28T10:36:47.013
> 
> 标签：c#, system.reactive

我有一堂课有两个事件，叫他们`StatusChanged`和`ValueChanged`. 我想知道将这些“流”公开为`IObservable`. 实施`IObservable<Status>`和`IObservable<Value>`在同一个班级“不好”吗？它是否可能让我（或我班的用户）感到悲伤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:11:24.187

为不同类型实现协变接口是一个非常糟糕的主意。考虑一下如果将类强制转换为 会发生什么`IObservable<object>`，这现在是模棱两可的。

我宁愿有两个属性`IObservable<Status> StatusObservable{get{...}}`和`IObservable<Value> ValueObservable{get{...}}`. 简单，干净，它反映了您的班级提供的两个活动。

# php - 如何在代码中获取分类术语的机器名称？

> ID：14560137
> 
> 赞同：2
> 
> 时间：2013-01-28T10:37:04.477
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-taxonomy

如何在 Drupal 7 中具有分类术语 ID 的代码中获取分类术语的机器名称？

我试过 taxonomy_term_load() ，但它不返回机器名称。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:52:29.657

使用`pathauto's` [pathauto_cleanstring](http://drupalcontrib.org/api/drupal/contributions!pathauto!pathauto.inc/function/pathauto_cleanstring/7) () 函数来清理您的分类术语的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-15T13:40:43.040

本机分类术语不支持机器名称，例如词汇表。我刚刚开发了一个模块来支持这样的功能。它通过添加一个名为“machine_name”的新字段来更改分类术语属性，该字段可以使用术语名称键入或自动生成。

[https://www.drupal.org/project/taxonomy_machine_name](https://www.drupal.org/project/taxonomy_machine_name)

希望它可以帮助您或其他人。

BR

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:48:31.433

好的，这个路径是由 Drupal 核心模块“路径”生成的，我通过以下方式解决了。

```
$out_alias = drupal_lookup_path('alias', 'taxonomy/term/3'); 
```

第二种选择可能是：

```
$out_alias = url('taxonomy/term/3'); 
```

谢谢你的时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-16T09:03:56.293

@Cornel Andreev

我已经审查了您的问题并试图解决它。

我自己尝试过，并直接使用下面的代码获得了分类术语的名称。

```
$tid = array(4,5);
$term = taxonomy_term_load_multiple(array($tid), array());
print_r($term[$tid]->name); 
```

希望这会帮助你。

# php - 在 PHPWord 中操作模板

> ID：14560142
> 
> 赞同：14
> 
> 时间：2013-01-28T10:37:32.720
> 
> 标签：php, ms-word, phpword

我正在为我正在开发的 web 应用程序的报告模块使用 PHP 的 word 文档生成器。我选择 PHPWord 是因为 PHPDocX 的免费版本功能非常有限，而且它的页脚说明它只是一个免费版本。我有客户提供的模板。我想要的是加载模板并向其添加动态元素，例如附加文本或表格。我的代码在这里：

```
<?php
require_once '../PHPWord.php';

$PHPWord = new PHPWord();

$document = $PHPWord->loadTemplate('Template.docx');
$document->setValue('Value1', 'Great');

$section = $PHPWord->createSection();
$section->addText('Hello World!');
$section->addTextBreak(2);

$document->setValue('Value2', $section);

$document->save('test.docx');
?> 
```

我尝试创建一个新部分并尝试将其分配给模板中的一个变量（Value2），但出现了此错误：

```
[28-Jan-2013 10:36:37 UTC] PHP Warning:  utf8_encode() expects parameter 1 to be string, object given in /Users/admin/localhost/PHPWord_0.6.2_Beta/PHPWord/Template.php on line 99 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:27:40.133

setValue 期望第二个参数是纯字符串。无法提供 section 对象。

我已经深入研究了代码，并且没有一种简单的方法可以让节对象返回一个可由 setValue 函数使用的值。

因为我遇到了同样的问题，所以我为 Template.php 文件编写了一个补丁，允许您在用 s​​etValue 替换它们的标签之前克隆表行。每行都有一个唯一的 id，允许您识别每个不同行的模板标签。

这是它的工作原理：

将此函数添加到您的 Template.php 文件（位于 PHPWord 目录中）

```
public function cloneRow($search, $numberOfClones) {
    if(substr($search, 0, 2) !== '${' && substr($search, -1) !== '}') {
        $search = '${'.$search.'}';
    }
    $tagPos      = strpos($this->_documentXML, $search);
    $rowStartPos = strrpos($this->_documentXML, "<w:tr", ((strlen($this->_documentXML) - $tagPos) * -1));
    $rowEndPos   = strpos($this->_documentXML, "</w:tr>", $tagPos) + 7;

    $result = substr($this->_documentXML, 0, $rowStartPos);
    $xmlRow = substr($this->_documentXML, $rowStartPos, ($rowEndPos - $rowStartPos));
    for ($i = 1; $i <= $numberOfClones; $i++) {
        $result .= preg_replace('/\$\{(.*?)\}/','\${\\1#'.$i.'}', $xmlRow);
    }
    $result .= substr($this->_documentXML, $rowEndPos);
    $this->_documentXML = $result;
} 
```

在您的模板文件中，为每个表添加一行，您将用作模板行。假设您在该行中添加了标签 ${first_name}。

要获得一个有 3 行的表格，请调用： $document->cloneRow('first_name', 3);

您的模板的工作副本现在已更新为包含 3 行的表。行内的每个标签都附加了 # 和行号。

要设置您的值，请使用 setValue $document->setValue('first_name#1', 'Name on the first row'); $document->setValue('first_name#2', '第二行的名字'); $document->setValue('first_name#3', '第三行的名字');

我希望这是有用的！我将在此处保留代码和文档的更新版本：http: [//jeroen.is/phpword-templates-with-repeating-rows/](http://jeroen.is/phpword-templates-with-repeating-rows/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T21:30:04.633

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T09:04:19.433

**全新版本的 CloneRow 和 setValue**

现在您可以克隆合并的单元格。修复了许多带有 OOXML 标记的错误。

和新方法 setValue - 现在忽略模式中的垃圾标签。喜欢

```
{My<trash ooxml tags>Pattern} 
```

您可以在此处找到代码、文档和示例： [https ://github.com/Arisse/PHPWord_CloneRow](https://github.com/Arisse/PHPWord_CloneRow)

# cocoa-touch - 绘制具有绘图点间隙的核心图散点图

> ID：14560146
> 
> 赞同：0
> 
> 时间：2013-01-28T10:37:54.653
> 
> 标签：cocoa-touch, core-plot, scatter-plot

我对核心情节相对陌生，我在某个时候卡住了。
我有一个这样的图表：
![在此处输入图像描述](../Images/debd28bda2e6f386f5d22cf87bf31068.png)

并想画出没有间隙的图形，就像红色虚线所示！
如果此时不绘制绘图符号，您将如何做到这一点？
如果 Y 中的值不同，也应该可以连接到点！

有人处理过吗？
感谢您的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:22:57.847

告诉绘图它只有 6 个数据点（`-numberOfRecordsForPlot:`返回 6）。

```
Index   X     Y
-------------------
  0     0     6
  1     1     7
  2     3     7
  3     4     7
  4     5     6
  5     6     6 
```

# mysql - 动态外壳变量替换

> ID：14560152
> 
> 赞同：1
> 
> 时间：2013-01-28T10:38:14.467
> 
> 标签：mysql, shell

我有一个关于 Shell 变量替换的问题。

**要求：** 我需要向 mysql db 插入一些东西。而且我不想在 main shell 中编写插入脚本，所以我想将插入 sql 脚本定义为变量 $SQL 。此变量和许多其他变量存储在另一个名为 sql.cfg 的文件中

但是这个变量将引用另一个变量 $Value。当我执行主 shell 时，$Value 将被实际值替换。</p>

**示例：** 在 sql.cfg 中

```
SQL="insert into table column1,column2 values($Value1,$Value2)"
DB_NAME=dbname
DB_IP=192.168.0.x
USR=username
PWD=password 
```

在 main.sh

```
. ./sql.cfg

Value1=100
Value2=200

` mysql $DB_NAME -h$DB_IP -u $USR -p$PWD -se "$SQL;"` 
```

**问题：**

如何正确地将 $sql 替换为 $Value1 $Value2 以便我可以将它们插入到 mysql db 中？

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:04:46.350

在加载/获取 sql.cfg 之前`Value1`，您必须在 main.sh 中设置`Value2`

例子：

```
kent$  head *           
==> main.sh <==
#!/bin/bash
Value1=100
Value2=200
source sql.cfg
echo "$DB_NAME - $SQL"

==> sql.cfg <==
#!/bin/bash
SQL="insert into table column1,column2 values($Value1,$Value2)"
DB_NAME=dbname
DB_IP=192.168.0.x
USR=username
PWD=password

kent$  ./main.sh
dbname - insert into table column1,column2 values(100,200) 
```

如果您**真的**想先加载 sql.cfg 并稍后在 main.sh 中设置值。您可以将 sql.cfg 中的 $Value1,2 更改为占位符，并在 main.sh 中根据需要替换这些值。请参阅示例：

```
kent$  head *
==> main.sh <==
#!/bin/bash
source sql.cfg

Value1=444
Value2=555

SQL=$(sed "s/:Value1/$Value1/g; s/:Value2/$Value2/g" <<<$SQL)

echo "$DB_NAME - $SQL"

==> sql.cfg <==
#!/bin/bash
SQL="insert into table column1,column2 values(:Value1,:Value2)"
DB_NAME=dbname

kent$  ./main.sh
dbname - insert into table column1,column2 values(444,555) 
```

# ruby-on-rails - 如何从 ruby on rails 控制器中的 f.select 标记中获取选定值

> ID：14560154
> 
> 赞同：2
> 
> 时间：2013-01-28T10:38:16.503
> 
> 标签：ruby-on-rails, ruby, forms, ruby-on-rails-3

如何从控制器中的 f.select 标记中获取值。这是我的erb代码

```
<td>
  <%= f.text_field :startdate , :id => "from", :placeholder => "Start Date"%>   
</td>    
<td>           
<%= f.select :repetitive_task, options_for_select(["Every Day","Every Week", "Every Month"]), {:prompt => 'None'}, {:id => "select1"} %>
</td> 
```

这是我的控制器——

```
def create
  @micropost = current_user.microposts.build(params[:micropost])
  if params[:repetitive_task] == "Every Day" 
     @micropost.targetdate = params[:startdate]
  elsif params[:repetitive_task] == "Every Week" 
     @micropost.targetdate = params[:startdate] + 7
  elsif params[:repetitive_task] == "Every Month"
     @micropost.targetdate = params[:startdate] + 30 
  else
  end      
  if @micropost.save 
    flash[:success] = "Task created!"
    redirect_to root_url
  else             
   render 'static_pages/index'
end 
```

单击提交按钮时未获取值。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:42:48.420

```
<%= f.select :repetitive_task,options_for_select(["Every Day","Every Week", "Every Month"], params[:micropost][:repetitive_task])
, {:prompt => 'None'}, {:id => "select1"} %> 
```

**在options_for_select**中传递**第二个**参数以显示所选值。

 **也使用 params[:micropost][:repetitive_task] 而不是在控制器中使用 params[:repetitive_task]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:44:41.877

如果您使用 form_for 助手（例如 form_for :micropost），您应该在 params[:micropost] 中包含所有值。在你的情况下，你应该有 :repetitive_task 在

```
params[:micropost][:repetitive_task] 
```**

# python - 使用python-django实现下载操作时获取0字节文件

> ID：14560158
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:38:45.130
> 
> 标签：python, django, web, download

django 1.4\. 我正在尝试开发一个部署下载的功能。我没有得到正确的结果。我在下面附上了我的代码。当我点击超链接后下载时，我得到了一个 0 字节的文件。Content-Length`0`处于调试模式。我已经阅读了很多相关的问题，我得到了一些线索，但仍然感到困惑，因为我下载后得到了 0 字节的文件。任何人都可以帮助修改下面的代码，谢谢你的时间。

```
 def download_file(request, filepath, filename):
        path_to_file = filepath+"\\"+filename
        serverfile = file(path_to_file, 'rb')
        response = HttpResponse(mimetype='application/force-download')
        response['Content-Disposition'] = 'attachment; filename=%s' % smart_str(filename)
        response['Content-Length'] = serverfile.tell()
    return response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:51:24.987

`.tell()`给出文件中的当前位置. 由于您尚未阅读任何文件，因此您当前的位置将位于位置 0。

您可以使用`os.stat(path_to_file).st_size`以字节为单位给出文件大小。请注意，您还应该使用`os.path.join(filepath, filename)`来获取文件的完整（独立于操作系统）路径，而不是手动连接。

# asp.net - asp.net - 今天和其他日期之间的差异

> ID：14560159
> 
> 赞同：0
> 
> 时间：2013-01-28T10:38:54.140
> 
> 标签：asp.net, tsql

我有一个gridview，gridview 中的一列称为“最后检查”，这只是数据库中的一个日期时间字段。

在“最后检查”列而不是显示日期和时间，我想做的是显示“7 天”或“1 小时”或“7 分钟”等。

在我的 grdView_RowDataBound 子程序中（或者在 SQL 中，如果更容易的话）...有谁知道最简单的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:12:01.317

好的，我想我可以通过使用 CAST(DATEDIFF(mi, GETDATE(), GETDATE()+1) AS VARCHAR) 在 SQL 中解决这个问题

在几分钟内给我差异，然后使用 grdView_RowDataBound 子从那里获取差异

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:02:25.483

如果您在 Sql-Server 上，则可以使用`DATEDIFF`和从查询本身完成`CASE`。

假设如果超过一天，则需要忽略小时，如果距离 last_checked 日期时间超过一小时，则忽略分钟，您可以试试这个。

```
--Some data to work with
declare @t table ([last_checked] datetime)
insert into @t ([last_checked]) values ('20130127 09:15:21'),('20130128 09:15:21'),('20130128 11:25:21')

--Query
select case when totMinutes >= 60*24 then 
                 convert(varchar(12), totMinutes/(60*24)) + ' day(s)'
            when totMinutes >= 60 then 
                 convert(varchar(12), totMinutes/(60)) + ' hour(s)'
       else convert(varchar(12), totMinutes) + ' min(s)' end timingCol
from (
     select datediff(minute,[last_checked],getdate()) totMinutes
from @t ) X 
```

# google-api - google api证书验证问题

> ID：14560165
> 
> 赞同：2
> 
> 时间：2013-01-28T10:39:16.757
> 
> 标签：google-api, gsutil

我已经在几台机器上安装了 gsutil python 包。我从来没有任何问题。但最近在一台机器上我收到证书验证失败的消息。

```
Failure: Host accounts.google.com returned an invalid certificate (_ssl.c:491: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed): 
To learn more, see http://code.google.com/appengine/kb/general.html#rpcssl. 
```

我已阅读文档，但无法弄清楚如何解决此问题。

# javascript - 将 div 变成链接的最佳做法是什么？

> ID：14560166
> 
> 赞同：9
> 
> 时间：2013-01-28T10:39:19.130
> 
> 标签：javascript, jquery, html

我这里有个小问题。我有一个`div`with `h1, h2 and p`。我想将 div 变成一个链接，但我不能只将 a 包裹`<a>`在 div 或 h1、h2、p 周围。这不是正确的方法，但是我应该怎么做才能使整个 div 变成一个链接？我应该把每个元素都变成一个`span`吗？这将需要更多的工作

```
<a href="#" class="link">
    <span class="div">
        <span class="h1"></span>
        <span class="h2"></span>
        <span class="p"></span>
    </span>
</a> 
```

或者我应该使用javascript：

```
$('.link').click(function(){
   document.location.href='#';
}) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T10:58:40.367

You don't need any JS or jQuery to do this. An alternative would be to do something like this:

```
<div>
    <a href="#"></a>
    <h1>Something</h1>
    <h2>Something else</h2>
    <p>Another something</p>
</div>

<style type="text/css">
    div {
        position: relative;
    }

    div > a {
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 2;
    }
</style> 
```

Of course, change the CSS selectors so that they only affect whatever you want them to affect. The advantages of this are of course if the user doesn't have JS enabled, it will still completely work normally, and it's better for SEO.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T10:41:47.500

假设您的原始 HTML 如下所示，您应该添加一个`data`参数，其中包含单击 div 时要跟随的链接：

```
<div class="link" data-url="http://www.google.com">
    <span class="div">
        <span class="h1"></span>
        <span class="h2"></span>
        <span class="p"></span>
    </span>
</div> 
```

然后您可以将`click`处理程序附加到`div`：

```
$('.link').click(function() {
    window.location.assign($(this).data('url'));
}); 
```

最后，确保`cursor`在 CSS 中添加属性，这样 div 是可点击的：

```
.link { cursor: pointer; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T10:48:36.800

```
<div onclick="window.location = 'http://www.abc.com/';" style="cursor:pointer;">

</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:00:07.313

To elaborate on what Rory has proposed I think it might be safter to incude an actual link inside your div incase the user does not have javascript enabled and for search engine indexing.

```
<div class="link">
  <h1><a href="http://www.google.com">Heading One</a></h1>
  <h2>Heading Two</h2>
  <p>Paragraph</p>
</div> 
```

Then search for the h1 link and use that as the url

```
$('.link').on('click', function() {
    window.location = $(this).find('h1 a').attr('href');
}); 
```

And the CSS

```
.link { cursor:pointer; } 
```

# solr - 在共享主机中安装 SOLR

> ID：14560167
> 
> 赞同：2
> 
> 时间：2013-01-28T10:39:20.363
> 
> 标签：solr

有没有人有在 rackspacecloud 或 godaddy 等共享主机中安装 SOLR 4 的经验？

其实，有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:18:04.637

我刚刚得到确认无法安装它。我需要一个专用服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:35:09.427

您可以在 VDS 上运行 Solr。但是 Java 在 Ubuntu 12.04 上与 OpenVZ 存在一些问题。它在 Ubuntu 10.04 上运行良好。

# php - mysqli nuw_rows 总是返回 0

> ID：14560168
> 
> 赞同：0
> 
> 时间：2013-01-28T10:39:29.503
> 
> 标签：php, mysqli, prepared-statement, zero, rows-affected

我浏览了论坛和帖子，但我似乎无法弄清楚我在这里做错了什么。

我首先尝试 $mysqli->num_rows 来获取受影响的行，但显然这只适用于 SELECT 语句。不幸的是， ..->affected_rows 似乎也每次都返回 0。问题是什么？

```
$key = $email . $password . $mysqli->mysqli_salt;
$update_password = "UPDATE `users` SET `password`=SHA1(?) WHERE `surname`=? AND `lastname`=? AND `email`=?";
$stmt_update = $mysqli->prepare($update_password);
$stmt_update->bind_param("ssss", $key, $surname, $lastname, $email);
$stmt_update->execute();
$rows = $stmt_update->affected_rows; //i've also tried '$mysqli->affected_rows;
if ($rows != 1) {
   echo 'error';
}
$stmt_update->close(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:42:31.087

尝试将密码设置为其他值，而不是一遍又一遍地设置相同的值。如果密码未更改，则该行不计为已更新。

# kernel - Arch Linux 更新错误

> ID：14560174
> 
> 赞同：2
> 
> 时间：2013-01-28T10:39:46.477
> 
> 标签：kernel, archlinux, panic

今天更新了 ArchLinux 的使用`pacman -Syu`，但是报错了。我没注意。然后我重新启动机器，现在它报告内核恐慌。

[我找到了新闻](https://www.archlinux.org/news/update-filesystem-201301-1-and-glibc-217-2-together/)

但它并没有告诉内核可能会恐慌。我什至无法登录系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:11:14.700

1.  启动实时媒体
2.  挂载根分区到`/mnt`
3.  查看`/mnt/var/log/pacman.log`
4.  处理所有`.pacnews`列出的（应该`/etc/`在您的情况下或在您的情况下找到大多数/全部`/mnt/etc/`）
5.  确保你`mkinitcpio.conf`有最新的钩子。
6.  如果需要手动干预，请检查`archlinux.org`或订阅邮件列表以获取更新说明。
7.  **更频繁地更新**

没有任何日志或更多信息，我们将为您提供尽可能多的信息和/或帮助。***Arch Linux 是一个滚动发行版***和一个发行版，它需要用户比大多数人思考更多。如果您不能经常更新它（我每天运行 pacman -Syu），那么您应该考虑运行另一个发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:42:37.110

1.  启动到 Live USB/CD。
2.  将 Arch 分区挂载到`/mnt`.
3.  如果您有更新的 Live USB/CD，请使用`arch-chroot /mnt`. 如果不是，请按照[更改根文章](https://wiki.archlinux.org/index.php/Change_Root)中的说明进行操作。
4.  运行`sudo pacman -Syu`并*仔细*记录问题所在（如果有的话）。您可能必须跑步`dhcpcd`才能使您的互联网连接正常工作。
5.  退出，卸载分区等，它应该可以工作。

# java - 调用活动进出动画的最佳位置

> ID：14560177
> 
> 赞同：0
> 
> 时间：2013-01-28T10:40:02.437
> 
> 标签：java, android, animation, android-activity

在活动之间的向前/向后过渡期间调用淡入和淡出动画以制作动画的最佳位置是什么。我尝试了以下但在启动另一个活动时未在当前活动中激活淡出动画：

```
@Override
public void onStart() {
    super.onStart();
    Animation animation = AnimationUtils.loadAnimation(this, R.anim.fadein);
    findViewById(R.id.mainLayout).startAnimation(animation);
}

@Override
public void onStop() {
    Animation animation = AnimationUtils.loadAnimation(this, R.anim.fadeout);
    findViewById(R.id.mainLayout).startAnimation(animation);
    super.onStop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:46:05.257

使用[`overridePendingTransition(R.anim.fadein, R.anim.fadeout)`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)方法。

`startActivity(Intent)`在或的一种风格之后立即调用，`finish()`以指定接下来要执行的显式过渡动画。

# php - 上传带有可重复输入的带有 jquery ajax 的图像

> ID：14560179
> 
> 赞同：11
> 
> 时间：2013-01-28T10:40:05.037
> 
> 标签：php, javascript, jquery, jquery-plugins

**更新：**我几乎解决了这个问题，请参阅[Jquery 表单没有提交到 IE7 和 IE8](https://stackoverflow.com/questions/14632176/jquery-form-no-submission-to-ie7-and-ie8)我只需要对 ie7 和 ie8 进行排序，

我一直在使用**[THIS](http://malsup.com/jquery/form/#file-upload)**插件将文件作为电子邮件附件上传，我已经将它带到了它实际工作的地步，唯一的问题是它目前使用它来提交：

```
jQuery.ajax({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.css("width", percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.css("width", percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    complete: function(xhr) {
        status.html(xhr.responseText);
    }
}); 
```

我需要将其添加到的表单使用它来提交：

```
jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        data: {parameters: jsonData}
    }); 
```

我如何使插件与我的提交形式一起使用？

这是当前工作上传表单的**[JSFIDDLE](http://jsfiddle.net/dawidvdh/H32FW/1/)**。

然后是我需要将工作表单与**[JSFIDDLE](http://jsfiddle.net/dawidvdh/a7TVe/5/)**结合起来的表单（我已将其缩短为仅上传字段，但还有很多其他信息）

还有这里的 php 发送函数：

```
<?php
    function printMember($member) {
        foreach($member as $key=>$value) {
            //Fill the aux string first
            $str.= "$key : $value <br />";
        }
        //string that will be added to $msg variable inside the loop
        return $str;
    }

    $json = $_POST['parameters'];
    $json_string = stripslashes($json);
    $data = json_decode($json_string, true);
    $depCount = count($data["dependants"]);

    $msg .= "<h2>Main member data:</h2>";
    $msg .= printMember($data["mainmember"]);
    $msg .= "<h2>There are $depCount Dependants</h2>";

    foreach ($data["dependants"] as $index => $dependant) {
       $msg .= "<h2>Dependant $index</h2>";
       $msg .= printMember($dependant);
    }

    $strTo = "dawid@jamfactory.co.za";
    $strSubject = "Image Testing";
    $strMessage = nl2br($msg);

    //*** Uniqid Session ***//
    $strSid = md5(uniqid(time()));

    $strHeader = "";
    $strHeader .= "From: Dawid<test@testme.co.za>\nReply-To:test@testme.co.za";

    $strHeader .= "MIME-Version: 1.0\n";
    $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
    $strHeader .= "This is a multi-part message in MIME format.\n";

    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-type: text/html; charset=utf-8\n";
    $strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
    $strHeader .= $strMessage."\n\n";

    //*** Attachment ***//
    $count = 0;
    foreach($_FILES['myfile']['name'] as $filename)
    {
        $temp = $_FILES['myfile']['tmp_name'][$count];
        $strFilesName = $filename;
        $strContent = chunk_split(base64_encode(file_get_contents($temp))); 
        $strHeader .= "--".$strSid."\n";
        $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
        $strHeader .= "Content-Transfer-Encoding: base64\n";
        $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
        $strHeader .= $strContent."\n\n";
        $count++;
    }

    $flgSend = @mail($strTo,$strSubject,null,$strHeader);  // @ = No Show Error //

    if($flgSend)
    {
        echo "Mail send completed.";
    }
    else
    {
        echo "Cannot send mail.";
    }
?> 
```

如果有人不完全理解这个问题，我会在这里尝试进一步解释：

我有可重复的字段，在提交时将信息放入 JSON 数组，然后通过 PHP 解析为电子邮件，我想做的是有一个文件字段，其中图像被上传并与电子邮件一起发送，但之后在网上进行了很多研究，我发现这对于 ajax 是不可能的，所以我发现**[这个](http://malsup.com/jquery/form/#file-upload)**插件实际上可以工作，现在我只是想把它和我原来的形式结合起来

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:00:39.340

我不知道这是否适合您的需要，但我使用 Andrew Valums 文件上传器来实现相同的结果。

它可以上传多个文件，甚至支持拖放，但它的纯 javascript 不是 jQuery，但另一方面，Ray Nicholus 将 Valums 代码分叉到了一个 jQuery 插件。

我的经验是使用 Valums 版本，它可以与 jQuery 一起使用，没有问题。唯一的问题是您必须以基本的 javascript 样式与之交互。

我的上传实现是这样的：

1.  提供将文件上传到服务器的接口
2.  使文件上传器上传到服务器上的某个文件夹，并返回服务器上文件的名称和路径（通常是“上传文件夹”/“文件名”），以便您可以将其存储在表单的隐藏元素中
3.  当用户保存他们的数据时，只将文件的路径（从步骤 2 中获得）保存到数据库中

注意：有了这个，您不需要复制任何输入表单来上传文件，因为您可以上传任意数量的文件，只要您的服务器可以处理它；）

[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:52:23.257

因此，如果我理解正确，您希望将一些自定义数据附加到文件上传。这是正确的吗？

因此，如果您不想修改正在使用的 jQuery 插件，我会在表单中添加一些隐藏字段，并在提交之前将自定义数据放入其中。然后插件应该将它们拾取并与文件一起发送。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T11:50:17.773

解决了问题。。

它就像添加 `method="post" action="http://globalgeorgia.co.za/modules/mod_appform/js/mail.php"`然后 添加`type="submit"`到提交函数一样简单，它在 IE 7 和 IE 8 中完美运行，然后也是：

```
if (isValid) {
    getValues();
    var jsonData = JSON.stringify(result);  

    (function() {
    var bar = jQuery('.bar');
    var percent = jQuery('.percent');
    var status = jQuery('#status');
    jQuery('#spinner').html('<img src="http://globalgeorgia.co.za/modules/mod_appform/js/ajax-loader.gif" />');

    jQuery('#app_form').ajaxForm({
        type: "POST",
        url: "http://globalgeorgia.co.za/modules/mod_appform/js/mail.php",
        dataType: "json",
        //iframe: true,
        data: {parameters: jsonData},
        beforeSend: function() {
            status.empty();
            jQuery('#spinner').html();
            var percentVal = '0%';
            bar.css("width", percentVal)
            percent.html(percentVal);
        },
        uploadProgress: function(event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.css("width", percentVal)
            percent.html(percentVal);
        },
        complete: function(xhr) {
            status.html(xhr.responseText);
            jQuery('#spinner').html("sent");
        }
    }); 

    })();   
} 
```

解决了发送问题，感谢大家的帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T12:51:39.713

获取完整的本地文件路径需要什么。要处理上传的文件，您不需要知道完整的文件路径。浏览器自己完成这项工作。

请看这里，你一定会从这个链接中受益的

*   [如何从Firefox中的html输入表单获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T13:26:35.553

我不了解 PHP，只需添加以下内容即可发布数据。将**参数**传递给您的表单

```
 @{ 
    AjaxOptions options = new AjaxOptions{ 
    HttpMethod = "Post", 
    url: "mail.php",
    dataType: "json",
    data: {parameters: jsonData}
    UpdateTargetId = "formContent",
    beforeSend: function() {
                       status.empty();
                       var percentVal = '0%';
                       bar.css("width", percentVal)
                       percent.html(percentVal);
                      },
     uploadProgress: function(event, position, total, percentComplete) {
                             var percentVal = percentComplete + '%';
                               bar.css("width", percentVal)
                               percent.html(percentVal);
                              //console.log(percentVal, position, total);
                 },

    OnFailure = "do some thing",
    OnBegin = "ShowProgressBar",
    OnComplete =  function(xhr) {
                     status.html(xhr.responseText);
                         }
   };         
} 
```

您需要在 PHP 中添加代码（在**MVC3** asp .net 中我们这样做）

```
@using (Ajax.BeginForm(parameters))
 {
 } 
```

# iphone - 如何更新 NSUserdefaults 设置更改后的 UITableView？

> ID：14560184
> 
> 赞同：-4
> 
> 时间：2013-01-28T10:40:27.813
> 
> 标签：iphone, ios, objective-c, uitableview

我想知道如何最好地更新 UITableView。我有一个设置区域，用户可以在其中保存首选项（保存到 NSUserDefaults）。然后，当他们返回表格视图时，需要更新数据列表以反映用户所做的设置/首选项更改。

目前我有`[self.tableView reloadData];` viewWillAppear: 方法

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:48:50.043

这是重新加载表格的最佳方式。如果你想重新加载一行（或更多），你可以使用

```
[self.tableView reloadRowsAtIndexPaths: withRowAnimation:]; 
```

如果您想进行多次插入或删除，您可以使用

```
 [self.tableView beginUpdates];
 [self.tableView endUpdates]; 
```

`[self.tableView reloadData];`重新加载所有内容...重新显示可见行，重新加载数据。

# jquery - 如何在移动设备上处理宽表

> ID：14560200
> 
> 赞同：6
> 
> 时间：2013-01-28T10:41:02.633
> 
> 标签：jquery, css, ajax, jquery-mobile, mobile

这里有点一般性问题。只是想知道是否有在移动设备上显示宽表（即很多列）的巧妙方法。

稍微解释一下，我们创建了使用 ajax 从主站点加载其内容的移动站点，并且在某些情况下，这些页面包含具有很多列的表。将整个表格放在垂直放置的移动设备上的唯一方法是缩小字体大小，直到无法阅读。

只是想知道是否还有其他选择。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:09:05.193

您可以为每一行使用一个“小部件”，而不是使用表格来显示您的数据。这使得为​​移动设备设计并以响应方式进行数据流动变得更加容易。

示例：[Examdoctor - 立即购买页面](http://www.examdoctor.co.uk/BuyNow)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T10:47:47.897

我以前遇到过这个问题......而且很痛苦，因为你没有足够的空间来显示整个数据。

我当时的计算方式是使用可折叠项目的列表。您创建一个仅包含每行最重要数据的列表，如果用户想了解有关该行的更多信息，他可以单击该行并将其展开，显示所有详细信息。

只是我的2美分...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T10:58:35.283

不久前发现了这种技术并将其标记为将来使用，但从未发现需要做类似的事情，所以我没有玩过，但这是一个好主意：

[http://css-tricks.com/responsive-data-tables/](http://css-tricks.com/responsive-data-tables/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T11:10:36.130

如果你愿意冒险，jQuery Mobile 的 beta 版本（如果这个问题与它相关）有一个新的响应式表格实现：

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/index.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/index.html)

这是一个例子：http: [//jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html)

基本上，如果屏幕宽度变窄，它将改变其大小以适应宽度变化。您可以以这样的方式使用它，如果宽度太小，某些预定义的列将隐藏。目前这是 jQuery Mobile 框架上响应式表格的最佳解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-27T04:06:04.090

如何将容器 css 设置为

```
#container{
    width: 100vw;
    overflow: scroll;
} 
```

和桌子更宽

```
#table {
    width: 150vw;
} 
```

所以你可以滚动浏览

# jsf-2 - a4j：CommandLink 操作未在 Rich:popupPanel 上执行，当面板呈现时

> ID：14560202
> 
> 赞同：1
> 
> 时间：2013-01-28T10:41:16.677
> 
> 标签：jsf-2, richfaces, ajax4jsf, seam3

我有打开弹出面板的链接，在打开该面板之前，我希望从我的 ejb 无状态 bean 执行一些操作，并且应该呈现弹出面板。打开该面板后，我单击命令按钮，它应该从我的 bean 执行操作并关闭该面板。不执行第二个动作。

如果我从第一个 a4j:commandLink 中删除 'render' 属性，一切正常。

我用过：Richfaces 4.1.0.Final（我也试过 4.2.3.Final 和最新的：4.3.0.20121214-M3），Seam 3.1.0.Final，JBoss 7.1.1.Final。

my_page.xhtml：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:s="http://jboss.org/seam/faces"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

<h:head></h:head>
<h:body>
    <h:form>
        <a4j:commandLink action="#{myBean.init()}" render="myPopupPanel"
            oncomplete="#{rich:component('myPopupPanel')}.show(); return false;">
            Open panel
        </a4j:commandLink>
    </h:form>

    <rich:popupPanel id="myPopupPanel" modal="false" autosized="true"
        resizeable="false">
        <h:form id="deviceInputEditForm">

            <a4j:commandButton action="#{myBean.doAction()}" value="DoAction"
                oncomplete="#{rich:component('myPopupPanel')}.hide();" />

        </h:form>
    </rich:popupPanel>
</h:body>
</html> 
```

MyBean.java：

```
package com.hajdi.test;

import javax.ejb.Stateless;
import javax.inject.Named;

@Named
@Stateless
public class MyBean {
   public void init() {
      System.out.println("Init called.");
   }

   public void doAction() {
      System.out.println("doAction called");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T09:44:19.617

您可以在弹出面板中创建一个表单，例如

```
<rich:popupPanel id="myPopupPanel" modal="false" autosized="true"
        resizeable="false">
        <h:form id="deviceInputEditForm">
           <s:div id="anythingyouwant>"
            <a4j:commandButton action="#{myBean.doAction()}" value="DoAction"
                oncomplete="#{rich:component('myPopupPanel')}.hide();" />
            </s:div>
        </h:form>
    </rich:popupPanel> 
```

然后尝试从你的第一个喜欢重新渲染它

```
<h:form>
        <a4j:commandLink action="#{myBean.init()}" render="anythingyouwant"
            oncomplete="#{rich:component('myPopupPanel')}.show(); return false;">
            Open panel
        </a4j:commandLink>
    </h:form>
enter code here 
```

试一试，在这里告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T09:57:17.733

1.  最好呈现 popupPane 的内部组件 id 而不是 popupPane id。
2.  在jsf 2中，最好一页只使用*ONE*表单，状态管理是基于表单的，我认为这是jsf2中一个很大的设计问题。在 Richfaces 4.3 之前，有两种形式会导致一些奇怪的问题，不知道 4.3 有没有解决。MyFaces 有解决多表单问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:12:51.283

我从不使用富面，只使用素面。但我会尝试猜测您尝试在 onComplete 方法上访问的组件需要与 commandButton 相同的形式。还要检查来自 http 的 POST 回复，他们通常会带来错误消息，其中包含错误信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-13T10:13:52.160

a4j:commandLink 没有任何属性作为渲染，我想你拼错了。呈现属性名称。

`<a4j:commandLink action="#{myBean.init()}" rendered="myPopupPanel" oncomplete="#{rich:component('myPopupPanel')}.show(); return false;"> Open panel </a4j:commandLink>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T05:28:14.833

[https://stackoverflow.com/a/6908500/3583985](https://stackoverflow.com/a/6908500/3583985)

尝试使用上面的链接。它也对我的问题进行了排序..我面临同样的问题

添加区域标签，一切正常

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T17:01:36.583

render="myPopupPanel" 属性不应该是 reRender="myPopupPanel" 吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T09:31:26.840

我建议尝试：

```
<h:body>
    <h:form>
        <a4j:commandLink action="#{myBean.init()}" render="myPopupPanel"
            oncomplete="#{rich:component('myPopupPanel')}.show(); return false;">
            Open panel
        </a4j:commandLink>

    <rich:popupPanel id="myPopupPanel" modal="false" autosized="true"
        resizeable="false">
            <a4j:commandButton action="#{myBean.doAction()}" value="DoAction"
                oncomplete="#{rich:component('myPopupPanel')}.hide();" />
    </rich:popupPanel>

    </h:form>
</h:body> 
```

当我们使用丰富的面孔时，通常最好只有**一个表单元素......**

问候

# java - Smook Java to Xml Parser 删除包名

> ID：14560203
> 
> 赞同：0
> 
> 时间：2013-01-28T10:41:18.143
> 
> 标签：java, xml, smooks

如何从 Java 到 XML Smook 解析器的 XML 输出中删除包名称？

示例代码：

```
Smooks smooks = new Smooks();
ExecutionContext executionContext = smooks.createExecutionContext();
StringWriter writer = new StringWriter();
smooks.filterSource(executionContext,
    new JavaSource(inputJavaObject),
    new StreamResult(writer));
System.out.println(writer.toString()); 
```

# objective-c - 使用没有视图控制器的 NIB 文件创建自定义 UIVIew

> ID：14560207
> 
> 赞同：4
> 
> 时间：2013-01-28T10:41:31.497
> 
> 标签：objective-c, uiview, xib, nib

我为此苦苦挣扎了几个小时：我想创建一个从 NIB 文件加载的自定义 UIView。这就是我所做的：

1）我创建了一个名为“MyView”的类和一个NIB文件。

2）我把类作为文件的所有者自定义类。

3）为了加载NIB文件，我知道我需要这段代码，但我不知道把它放在哪里。我把它放在“init”方法中。

```
 NSArray * nib = [[NSBundle mainBundle]
                     loadNibNamed: @"MyView"
                     owner: self
                     options: nil];

    self = [nib objectAtIndex:0]; 
```

4）使用这个自定义视图：使用 IB，我在我的主 ViewController 中创建了一个 UIView。在自定义类的视图属性中，我放置了“MyView”。我为此视图创建了一个名为“myView”的 IBOutlet，并将其连接到 ViewController 类。

5）现在我不确定是否需要调用“init”或者它是否自动完成，因为它在 NIB 文件中。我尝试了他们两个。无论如何，“myView”类类型被识别为 UIView 而不是 MyView，并且正在显示一个空视图。

我究竟做错了什么？它有另一种方法吗？

谢谢，尼姆罗德

* * *

编辑：我根据这里的答案更改了我的代码。这里的所有答案实际上都没有使用自定义类，这就是这里的全部想法。这就是我所做的，但是应用程序崩溃了，因为它认为 testView 是 UIView 而不是 TestView。请帮忙。

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic,retain) TestView *testView;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray* views=[[NSBundle mainBundle] loadNibNamed:@"TestView" owner:nil options:nil];
    self.testView= [views objectAtIndex:0];
    [self.view addSubview:self.testView]; 
    [self.testView trace]; // calling a method from the custom class
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:47:47.793

尝试这个

```
if ((self = [super initWithCoder:aDecoder])) {
        if ((self = [super initWithCoder:aDecoder])) {
           NSArray * nib = [[NSBundle mainBundle]
                     loadNibNamed: @"MyView"
                     owner: self
                     options: nil];
          [self addSubview:nib[0]];
        }
        return self;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:30:05.910

要在您的应用程序中使用 nib 文件，我建议您这样做，这样更容易

-1) 使用您需要的所有组件创建 Nib 文件，例如它包含一个 UILabel 和一个 UIButton。

-2）你给每个组件一个标签号（例如：100,101）

-3）在您的代码中，无论是在 init 中还是在 viewController 中的 Methode 中，您都可以这样称呼它：

```
NSArray* views=[[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:nil options:nil];
    // PS: change "MyCustomView" to your nib file name "MyView" for instance
    // and do not add the .xib extension 
UIView* myCustomView= [views objectAtIndex:0];
// always parse the retrieved components so that you could use them in a proper way
UILabel*    myLabel=(UILabel*)      [myCustomView viewWithTag:100];
UIButton*   myButton= (UIButton*)      [myCustomView viewWithTag:101];
//if you are calling this from a UIView Class
 [self addSubview:mainView]; // add the customview to the main view
//if you are calling this from a ViewController uncomment this line below
//[self.view addSubview:mainView]; 
```

完成，现在您可以与自定义视图交互，您可以通过以下方式更改标签文本： `myLabel.text=@"someText";`

您可以向按钮添加操作：

```
[myButton addTarget:self action:@selector(someAction) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T13:51:53.223

这是我使用自定义类文件来实现的。我试图将工具栏附加到键盘上，当我创建连接到 .h 和 .m 文件的单独 XIB 文件时......所以在 .m 文件中，我在“initWithFrame”方法中使用了您的代码，如下所示：

```
 - (id)initWithFrame:(CGRect)frame
 {

      NSArray * nib = [[NSBundle mainBundle]
                 loadNibNamed: @"MyView"
                 owner: self
                 options: nil];

      self = [nib objectAtIndex:0];

      return self;

 } 
```

# memory-management - CUDA - 从 GPU 分配常量/纹理内存

> ID：14560213
> 
> 赞同：1
> 
> 时间：2013-01-28T10:41:51.270
> 
> 标签：memory-management, cuda, constants

我应该在 CUDA 中编写一个代码，它在递归循环中计算一个数组。有可能在它之前预先计算这个递归循环的一些中间步骤，即分配一些常量数组和标量，这将避免循环中的一些计算。

第一个想法是将常量数组存储在全局内存中，而标量参数每次都从 CPU 传递到 GPU（如这里建议的：[CUDA 和不同全局函数之间的共享变量](https://stackoverflow.com/questions/14085187/cuda-and-shared-variables-among-different-global-functions)）。

我想尝试使用 GPU 常量内存，因为它应该更快。但是，我发现的几个示例代码说明了如何从主机分配常量内存。是否可以从 GPU 分配一些常量内存，即在那里计算它的值（就像我们对全局内存所做的那样）？你能提供一个示例代码吗？

编辑：因为我可以分配很多常量数组，所以在这种情况下可能会更好地使用纹理内存。是否有一些关于如何从 GPU 分配内存的示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:27:38.677

回答你的第一个问题：'*是否可以从 GPU 分配一些常量内存*'。简短的回答是肯定的，正如其他人回答的那样，将数据从设备复制到设备常量内存。

从这里开始，您需要考虑访问模式和问题所需的数据量。

对于常量内存，可用内存量为 65536 字节，如果一个 warp 中的所有线程同时访问同一个元素，则广播数据。但是，64KB 的内存是不够的。

纹理内存具有过滤和缓存的 2D 空间局部性等特殊功能。因此，将纹理内存用于 3x3 窗口中的典型过滤器是典型的使用案例。

最后，如果您需要更新数据并在某些内核中使用它们，您可以选择使用全局内存。此外，您可以使用作为读/写纹理内存的表面内存（CUDA C Programming Guire，第 3.2.10.2 章）。

由于您正处于*我应该在 CUDA 中编写代码以在递归循环中计算数组的*阶段，因此您应该首先尝试全局内存以获得未来改进的基础。当您的内核工作时，您将看到可以以不同的方式重新安排或分配哪些访问，以获得 GPU 内存的最大性能。

最后一点，考虑到新的 Fermi 和 Kepler 架构已经为全局内存访问合并了 L1 和 L2 缓存层次结构，这可以缓解随机访问模式，甚至优于纹理内存，因为 L1/L2 缓存的数量更大。

最后，您可以在 CUDA SDK 中找到大量示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:53:04.637

正如您[在此处](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_gf268fa2004636b6926fdcd3189152a14.html)所读到的，如果`cudaMemcpyToSymbol`与`cudaMemcpyDeviceToDevice`标志一起使用，应该可以将数据从 gpu 直接复制到常量内存。但是不可能像编辑全局内存那样编辑常量内存的日期。您只能从中读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:55:29.243

可以从主机读取和写入常量内存。您只能从设备中读取常量内存。

# php - 嵌套的年/月/帖子标题存档

> ID：14560216
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:09.897
> 
> 标签：php, wordpress

我正在尝试在 wordpress 主题中为我的新闻部分创建一个嵌套的帖子存档：

```
<div class="blog-list-archive">

<?php
/**/
$years = $wpdb->get_col("SELECT DISTINCT YEAR(post_date)
FROM $wpdb->posts WHERE post_status = 'publish'
AND post_type = 'post' ORDER BY post_date DESC");
foreach($years as $year) :
?>
<li><a href="JavaScript:void()"><?php echo $year; ?></a>

    <ul class="archive-sub-menu">
        <?    $months = $wpdb->get_col("SELECT DISTINCT MONTH(post_date)
        FROM $wpdb->posts WHERE post_status = 'publish' AND post_type = 'post'
        AND YEAR(post_date) = '".$year."' ORDER BY post_date DESC");
        foreach($months as $month) :
        ?>
            <li><a href="<?php echo get_month_link($year, $month); ?>">

                <?php echo date( 'F', mktime(0, 0, 0, $month) );?></a>

            </li>

        <?php endforeach;?>

    </ul>

</li>

<?php endforeach; ?>

</div> 
```

如何扩展它以显示每个月的帖子标题？另外，我只想获取“新闻”类别“13”下的帖子。

只是为了说明我需要这种格式：

*   2013

    *   一月
    *   帖子标题 1
    *   帖子标题 2
    *   帖子标题 3
*   2012

    *   十二月
    *   帖子标题 1
    *   帖子标题 2
    *   帖子标题 3
    *   十一月
    *   帖子标题 1
    *   帖子标题 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:20:54.070

将此代码放在打印月份名称的代码下方。

```
global $wpdb;
$sposts = $wpdb->get_col( "
                SELECT ID
                FROM $wpdb->posts
                WHERE MONTH(post_date) = '$month'
                    AND YEAR(post_date) =  '$year'
                    AND post_status = 'publish'
                    AND 'post_type' = 'post'
                ORDER BY post_date DESC" );
foreach( $sposts as $spost ) {
    echo '<a href="' . get_permalink( $spost ) . "'>" . get_the_title( $spost ) . "</a>";
} 
```

# asp.net-web-api - 使用 Autofac 将 NLog 注入 Web Api 控制器

> ID：14560217
> 
> 赞同：4
> 
> 时间：2013-01-28T10:42:11.340
> 
> 标签：asp.net-web-api, autofac, nlog

我正在尝试使用 Autofac 添加 NLog 我的 Web Api 项目。但我有问题。

从 NuGet 安装 NLog 包后，我将以下文件添加到我的项目中。（由于关注不同的帖子和示例，可能会造成混淆）

**ILogger.cs**

```
 public interface ILogger {
        void Debug(string message);
        void Trace(string message);
        void Info(string message);
        void Warning(string message);
        void Error(string message);
        void Error(string message, Exception exception);
        void Fatal(string message);
        void Fatal(string message, Exception exception);
    } 
```

**记录器属性.cs**

```
[AttributeUsage(AttributeTargets.Parameter | AttributeTargets.Class)]
    public class LoggerAttribute : Attribute {
        public readonly string Name;

        public LoggerAttribute(string name) {
            Name = name;
        }
    } 
```

**NLogger.cs**

```
public class NLogger : ILogger {
        private readonly NLog.Logger logger;

        public NLogger(Type loggerType) {
             logger = LogManager.GetLogger(loggerType.FullName);
        }

        public void Debug(string message) {
            logger.Debug(message);
        }

        public void Trace(string message) {
            logger.Trace(message);
        }

        public void Info(string message) {
            logger.Info(message);
        }

        public void Warning(string message) {
            logger.Warn(message);
        }

        public void Error(string message) {
            logger.Error(message);
        }

        public void Error(string message, Exception exception) {
            logger.ErrorException(message, exception);
        }

        public void Fatal(string message) {
            logger.Fatal(message);
        }

        public void Fatal(string message, Exception exception) {
            logger.FatalException(message, exception);
        }
    } 
```

**NLogModule.cs**

```
public class NLogModule : Module {
        protected override void AttachToComponentRegistration(IComponentRegistry registry, IComponentRegistration registration) {
            registration.Preparing += OnComponentPreparing;
        }

        static void OnComponentPreparing(object sender, PreparingEventArgs e) {
            var typePreparing = e.Component.Activator.LimitType;

            // By default, the name supplied to the logging instance is the name of the type in which it is being injected into.
            string loggerName = typePreparing.FullName;

            //If there is a class-level logger attribute, then promote its supplied name value instead as the logger name to use.
            var loggerAttribute = (LoggerAttribute)typePreparing.GetCustomAttributes(typeof(LoggerAttribute), true).FirstOrDefault();
            if(loggerAttribute != null) {
                loggerName = loggerAttribute.Name;
            }

            e.Parameters = e.Parameters.Union(new Parameter[]
        {
            new ResolvedParameter(
                (p, i) => p.ParameterType == typeof (ILogger),
                (p, i) =>
                {
                    // If the parameter being injected has its own logger attribute, then promote its name value instead as the logger name to use.
                    loggerAttribute = (LoggerAttribute)
                    p.GetCustomAttributes(typeof(LoggerAttribute),true).FirstOrDefault();
                    if (loggerAttribute != null)
                    {
                        loggerName = loggerAttribute.Name;
                    }

                    // Return a new Logger instance for injection, parameterised with the most appropriate name which we have determined above.
                    return LogManager.GetLogger(loggerName);
                }),

            // Always make an unamed instance of Logger available for use in delegate-based registration e.g.: Register((c,p) => new Foo(p.TypedAs<Logger>())
            new TypedParameter(typeof(ILogger), LogManager.GetLogger(loggerName))
        });
        }
    } 
```

**测试控制器.cs**

```
 public class TestController : ApiController
    {
        private IUnitOfWork uow;
        private ILogger _logger;
        // GET api/test
        public TestController(IUnitOfWork unitOfWork, ILogger logger) {
            uow = unitOfWork;
            _logger = logger;
        }
...
    } 
```

**引导程序.cs**

var builder = new ContainerBuilder();

```
 // Register the Web API controllers.
    builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

    // Register other dependencies.

    builder.RegisterType<UnitOfWork>().As<IUnitOfWork>().InstancePerApiRequest();
    builder.RegisterType<NLogger>().As<ILogger>().InstancePerApiRequest();
    builder.RegisterModule(new NLogModule());
    builder.Register((c, p) => new TestController(p.TypedAs<UnitOfWork>(), p.TypedAs<NLogger>()));
    // Build the container.
    var container = builder.Build();

    // Create the depenedency resolver.
    var resolver = new AutofacWebApiDependencyResolver(container);

    // Configure Web API with the dependency resolver.
    GlobalConfiguration.Configuration.DependencyResolver = resolver; 
```

我无法让它工作，每一个变化都会导致不同的错误。

当前代码导致以下错误。

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>Sequence contains no elements</ExceptionMessage>
<ExceptionType>System.InvalidOperationException</ExceptionType>
<StackTrace>
at System.Linq.Enumerable.First[TSource](IEnumerable`1 source) at Autofac.ParameterExtensions.ConstantValue[TParameter,TValue](IEnumerable`1 parameters, Func`2 predicate) at Autofac.ParameterExtensions.TypedAs[T](IEnumerable`1 parameters) at TestAPI.Bootstrapper.<SetAutofacWebAPIServices>b__0(IComponentContext c, IEnumerable`1 p) in d:\Projects\RadoreAPIs\TestAPI\Bootstrapper.cs:line 32 at Autofac.Builder.RegistrationBuilder.<>c__DisplayClass1`1.<ForDelegate>b__0(IComponentContext c, IEnumerable`1 p) at Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) at Autofac.Core.Resolving.InstanceLookup.Execute() at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) at Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters)
</StackTrace>
</Error> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:25:01.700

首先，您`NLogModule`将提供这样的实例，`ILogger`因此`NLogger`( `builder.RegisterType<NLogger>().As<ILogger>()`) 注册应该是不必要的（并且可能会导致麻烦）。去掉它。

接下来，你有没有让模块在没有花哨的`[Logger]`属性支持的情况下工作？

第三，不要`e.Component.Activator.LimitType`用作“声明类型” ，而是`p.Member.DeclaringType`在参数 lambda 中使用。阅读我对[这个相关问题](https://stackoverflow.com/a/14485020/35245)的回答。

# php - 加载页面并更改 URL

> ID：14560218
> 
> 赞同：1
> 
> 时间：2013-01-28T10:42:13.977
> 
> 标签：php, codeigniter

我注意到在`$this->load->view('page.php)'`使用时，浏览器中的 URL 不会改变，即。如果我们来自`../step_1.php`并加载到`../step_2.php`，则 url 仍然是`../step_1.php`.

我正在制作一个多步骤表单，其中所有步骤都由一个控制器处理，并且我了解到处理这种情况的最佳方法是使用`load`. 问题是我不希望显示过去页面的 URL，而是显示新页面的 URL。我知道`redirect('page_controller')`可以实现这一点，但这是不切实际的（在控制器内重定向）。

有谁知道为什么会这样？

编辑：

[我从这个链接](http://ellislab.com/forums/viewreply/662802/)中找到了关于 CI 观点和重定向的解释。

> views -> 在前一页的 URL 中显示一个页面
> 
> 重定向 -> 在其自己的 URL 中显示页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:54:57.540

```
function step_1()
{
    load_page($step_1);
} 
```

而不是从您的视图中调用 load_page 在控制器中构建您的页面，然后调用适当的页面。CI 使用控制器方法作为 URL。据我所知，没有办法改变这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:55:07.603

```
class test{
{
    public function view()
    {

      switch($this->uri->segment(2))
      {
      case $this->uri->segment(2) == 'part1':
        $this->load->view('part1');
      break;
      case $this->uri->segment(2) == 'part2':
          $this->load->view('part2');
      break;
      }

    }
} 
```

或者

```
class test{
{
    public function view($page)
    {

      switch($page)
      {
      case $page == 'part1':
        $this->load->view('part1');
      break;
      case $page == 'part2':
          $this->load->view('part2');
      break;
      }

    }
}

test/view/part1
will go to view part1
test/view/part2
will go to view part2 
```

你可以试试这样的东西， *这未经测试告诉我是否有错误*

# zend-framework2 - 在另一个 ViewHelper 中创建 Url View Helper 的实例

> ID：14560219
> 
> 赞同：1
> 
> 时间：2013-01-28T10:42:16.050
> 
> 标签：zend-framework2

在我的项目中，我创建了一个 Helper 来显示 a-tags，但如果用户具有 ACL 权限，则会进行附加检查。当他可以访问 url 时，我想用现有的 UrlHelper 创建 Url - 但我无法实例化它：

```
// try 1
$pluginHelper = \Zend\Mvc\Service\ViewHelperManagerFactory::createService($this->getServiceLocator());
$this->_urlHelper = $pluginHelper->get('url');

// try 2
$factory = new \Zend\Mvc\Service\RouterFactory();
$router = $this->_urlHelper = $factory->createService($this->getServiceLocator());

// try 3
$module = new \RDGOnline\Module();
$config = $module->getConfig();
$router = \Zend\Mvc\Router\Http\TreeRouteStack::factory($config['router']);

$this->_urlHelper = new Url();
$this->_urlHelper->setRouter($router); 
```

我尝试了不同的方法，但都失败了。在我最后一次尝试中，创建了 url - 但它忽略了子文件夹。IE /主干/

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:46:44.713

如果您在视图助手中执行此操作，则可以通过注入视图的插件方法访问视图助手（插件）

```
public function someViewHelperMethod()
{
    $urlHelper = $this->view->plugin('url');
} 
```

# opensuse - “[Errno 2] 没有这样的文件或目录”在 opensuse 中构建包时

> ID：14560222
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:24.160
> 
> 标签：opensuse

我只是设置了 chroot 环境来在 opensuse 中构建包。对于 chroot，我关注了[http://blog.zenlinux.com/?p=428](http://blog.zenlinux.com/?p=428)和其他一些来源。用于构建包[http://en.opensuse.org/openSUSE:Build_Service_Tutorial](http://en.opensuse.org/openSUSE:Build_Service_Tutorial)

我坚持运行 osc 来构建包：

```
# osc co server:database mysql-workbench
A    server:database
A    server:database/mysql-workbench
A    server:database/mysql-workbench/mysql-workbench-gpl-5.2.44-avoid-version.patch
A    server:database/mysql-workbench/mysql-workbench-gpl-5.2.44-ctemplate-fix.patch
A    server:database/mysql-workbench/mysql-workbench-gpl-5.2.45-src.tar.gz
A    server:database/mysql-workbench/mysql-workbench.changes
A    server:database/mysql-workbench/mysql-workbench.spec
A    server:database/mysql-workbench/openSUSE_(Vendor_Package).xml
At revision 43cda63b296f40fa371cdb52a8e957d2.

# cd server:database/mysql-workbench
# osc -vt build openSUSE_12.2 x86_64 mysql-workbench.spec 
makeurl: https://api.opensuse.org ['source', 'server:database', '_meta'] []
makeurl: https://api.opensuse.org ['source', 'server:database', 'mysql-workbench'] cmd=getprojectservices
Run source service: /usr/lib/obs/service/format_spec_file --outdir /tmp/tmprT4XTU
Run source service: /usr/lib/obs/service/source_validator --outdir /tmp/tmp_tAFQr
Building mysql-workbench.spec for openSUSE_12.2/x86_64
Getting buildinfo from server and store to /root/repo/server:database/mysql-workbench/.osc/_buildinfo-openSUSE_12.2-x86_64.xml
makeurl: https://api.opensuse.org ['build', 'server:database', 'openSUSE_12.2', 'x86_64', 'mysql-workbench', '_buildinfo'] ['add=vim', 'add=gdb', 'add=strace', 'add=valgrind']
Getting buildconfig from server and store to /root/repo/server:database/mysql-workbench/.osc/_buildconfig-openSUSE_12.2-x86_64
makeurl: https://api.opensuse.org ['build', 'server:database', 'openSUSE_12.2', '_buildconfig'] []
Updating cache of required packages
0.0% cache miss. 421/421 dependencies cached.

makeurl: https://api.opensuse.org ['source', 'server:database', '_pubkey'] []
makeurl: https://api.opensuse.org ['source', 'openSUSE:12.2', '_pubkey'] []
Verifying integrity of cached packages
using keys from server:database, openSUSE:12.2
Writing build configuration
Running build
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/osc/babysitter.py", line 53, in run
    return prg.main()
  File "/usr/lib/python2.7/site-packages/osc/cmdln.py", line 310, in main
    return self.cmd(args)
  File "/usr/lib/python2.7/site-packages/osc/cmdln.py", line 333, in cmd
    retval = self.onecmd(argv)
  File "/usr/lib/python2.7/site-packages/osc/cmdln.py", line 449, in onecmd
    return self._dispatch_cmd(handler, argv)
  File "/usr/lib/python2.7/site-packages/osc/cmdln.py", line 1179, in _dispatch_cmd
    return handler(argv[0], opts, *args)
  File "/usr/lib/python2.7/site-packages/osc/commandline.py", line 5201, in do_build
    return osc.build.main(self.get_api_url(), opts, args)
  File "/usr/lib/python2.7/site-packages/osc/build.py", line 914, in main
    rc = subprocess.call(cmd)
  File "/usr/lib64/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib64/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib64/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
[Errno 2] No such file or directory 
```

知道为什么我得到“没有这样的文件或目录”吗？或任何提示我该如何调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:32:23.940

看起来您可能缺少`/usr/bin/build`实际在 chroot 中运行 rpmbuild 的程序。它在一个名为`build`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:56:51.053

问题不见了`sudo`。

我直接在 irc 上向开发人员询问了这个问题，经过一些调试，我们发现我错过了`sudo`。他们已经同意`osc`应该更精确地丢失`sudo`，所以这可能已经在新`osc`版本中修复。

# c# - c#中的Unicode转换

> ID：14560223
> 
> 赞同：8
> 
> 时间：2013-01-28T10:42:25.393
> 
> 标签：c#, unicode-string

我正在尝试在字符串上分配 Unicode，但它返回“Привет”字符串为“ÐŸÑ€Ð¸Ð²ÐµÑ‚”但我需要“Привет”，我正在通过以下函数进行转换。

```
public string Convert(string str)
{
    byte[] utf8Bytes = Encoding.UTF8.GetBytes(str);
    str = Encoding.UTF8.GetString(utf8Bytes);
    return str;
} 
```

我能做些什么来解决这个问题以返回“Привет”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T11:12:10.420

`П`是 Unicode 字符[0x041F](http://www.fileformat.info/info/unicode/char/41f/index.htm)，其 UTF-8 编码`0xD0 0x9F`导致[`ÐŸ`](http://forumtreff.pytalhost.de/viewtopic.php?f=47&t=66&start=2).

由于该函数仅返回输入参数，正如评论者已经讨论过的那样，我得出结论，您的原始输入字符串实际上是 UTF-8，并且您希望将其转换为本机 .Net 字符串。

原始字符串来自哪里？

Instead of reading the input into a C# `string`, change your code to read a `byte[]`, and then call `Encoding.UTF8.GetString(inputUtf8ByteArray)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T10:57:24.990

我尝试了下面的代码，这些是我的结果：

```
 string test="Привет";
        byte[] utf8Bytes = Encoding.UTF8.GetBytes(test);

        String str1 = Encoding.Unicode.GetString(utf8Bytes);
        String str2 = Encoding.UTF8.GetString(utf8Bytes); 
```

str1=鿐胑룐닐뗐苑的输出

str2=Привет 的输出

# jsf - 如何获取我的文件上传到的路径并打印出来

> ID：14560226
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:36.987
> 
> 标签：jsf, file-upload, primefaces

我正在使用 primefaces 进行文件上传，我想找到这个文件上传到的位置，然后在控制台或网页中打印出来，我该怎么做

我知道打电话给我使用的位置：

```
#{user.fileText} 
```

但如果可能的话，我想知道确切的路径，我该怎么做？

我的上传过滤器：

```
public class UploadFilter implements Filter {
   private int sizeThreshold = -1;
   private String repositoryPath;

   public void init(FilterConfig config) throws ServletException {
      repositoryPath = config.getInitParameter(
         "com.corejsf.UploadFilter.repositoryPath");
      try {
         String paramValue = config.getInitParameter(
            "com.corejsf.UploadFilter.sizeThreshold");
         if (paramValue != null) 
            sizeThreshold = Integer.parseInt(paramValue);
      }
      catch (NumberFormatException ex) {
         ServletException servletEx = new ServletException();
         servletEx.initCause(ex);
         throw servletEx;
      }
   }

   public void destroy() {
   }

   public void doFilter(ServletRequest request, 
      ServletResponse response, FilterChain chain) 
      throws IOException, ServletException {

      if (!(request instanceof HttpServletRequest)) {
         chain.doFilter(request, response);
         return;
      }

      HttpServletRequest httpRequest = (HttpServletRequest) request;

      boolean isMultipartContent 
         = ServletFileUpload.isMultipartContent(httpRequest);
      if (!isMultipartContent) {
         chain.doFilter(request, response);
         return;
      }

      DiskFileItemFactory factory = new DiskFileItemFactory();
      if (sizeThreshold >= 0)
         factory.setSizeThreshold(sizeThreshold);
      if (repositoryPath != null) 
         factory.setRepository(new File(repositoryPath));
      ServletFileUpload upload = new ServletFileUpload(factory);

      try {
         @SuppressWarnings("unchecked") List<FileItem> items 
            = (List<FileItem>) upload.parseRequest(httpRequest);
         final Map<String, String[]> map = new HashMap<String, String[]>();
         for (FileItem item : items) {
            String str = item.getString();
            if (item.isFormField())
               map.put(item.getFieldName(), new String[] { str });
            else
               httpRequest.setAttribute(item.getFieldName(), item);
         }

         chain.doFilter(new 
            HttpServletRequestWrapper(httpRequest) {
               public Map<String, String[]> getParameterMap() {
                  return map;
               }                   

               public String[] getParameterValues(String name) {
                  Map<String, String[]> map = getParameterMap();
                  return (String[]) map.get(name);
               }
               public String getParameter(String name) {
                  String[] params = getParameterValues(name);
                  if (params == null) return null;
                  return params[0];
               }
               public Enumeration<String> getParameterNames() {
                  Map<String, String[]> map = getParameterMap();
                  return Collections.enumeration(map.keySet());
               }
            }, response);
      } catch (FileUploadException ex) {
         ServletException servletEx = new ServletException();
         servletEx.initCause(ex);
         throw servletEx;
      }      
   }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:45:38.807

使用时`<p:fileUpload>`，您根本不应该自制自定义过滤器。到目前为止，您所展示的自定义过滤器根本无法与`<p:fileUpload>`组件正确交互。您应该使用 PrimeFaces 本身提供的过滤器。它是哪一个以及如何使用它，在其[文档](http://www.primefaces.org/documentation.html)中有明确的解释。所以你需要这个过滤器：

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

至于保存位置，您完全可以自己控制。只需在 bean (action)listener 方法中获取文件内容`UploadedFile#getInputStream()`并将其写入您选择的位置。

您不应该对 PrimeFaces 的“幕后”存储位置感兴趣，即文件大于配置的阈值缓冲区大小的**临时位置（因此将每隔一段时间自动清理/删除）。**

### 也可以看看：

*   [如何使用 PrimeFaces p:fileUpload？侦听器方法从未被调用或 UploadedFile 为空](https://stackoverflow.com/questions/8875818/how-to-use-primefaces-pfileupload-listener-method-is-never-invoked/8880083#8880083)
*   [如何在 JSF 中保存上传的文件](https://stackoverflow.com/questions/14211843/how-to-save-uploaded-file/14214223#14214223)

# wcf - 在异步 wcf 服务方法中使用 TPL 并行工作

> ID：14560228
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:42.900
> 
> 标签：wcf, parallel-processing, task-parallel-library

我有一个疑问。我实现了我的 wcf 4.0 服务方法，如下所示。

```
 IAsyncResult BeginGetData(string userid, AsyncCallback cb, object asyncState)
    {
       // Here i want to call 2 different methods simultaneously of another class

       // string result1 = classA.Method1(userid);
       // string result2 = classA.Method2(userid);        

    } 
```

如何同时调用 2 个方法并将两个结果值以相同的返回方法发送回客户端？我们可以使用 TPL 吗？在 TPL 中，如果我们使用 Task.ContinueWith，它将按顺序运行。有什么方法可以并行运行这 2 个方法并通过 EndGetData 方法返回 2 个结果？如果 Method1 先完成，那么它应该等待 Method2 完成。或者另一种方法是在每个方法结果完成时回火它们。这可能吗 ？请帮助和指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:50:21.413

我不确定使用 WCF 为您完成所有这些工作的复杂性。但是，在这里您可以只使用任务并行库 (TPL)[`ContinueWhenAll`](http://msdn.microsoft.com/en-us/library/dd321473.aspx)关键字：

其用法的一个例子是

```
Task task1 = Task.Factory.StartNew(() => Console.WriteLine("X"));
Task task2 = Task.Factory.StartNew(() => Console.WriteLine("Y")); 
```

这会在两个单独的后台线程池线程上同时触发这两个任务。然后，您可以等待两者都完成使用

```
var continuation = Task.Factory.ContinueWhenAll(
    new[] { task1, task2 }, tasks => Console.WriteLine("Done!")); 
```

或者在这里，您也可以使用`WhenAll`任务组合器并编写

```
var continuation = Task.WhenAll(task1, task2)
    .ContinueWith(ant => Console.Writeline("Done!")); 
```

从任务返回数据的示例：

```
Task<int> task1 = Task.Factory.StartNew<int>(() => 
    { 
        return SomeSerialMethodReturningInt32A(); 
    });
Task<int> task2 = Task.Factory.StartNew<int>(() => 
    { 
        return SomeSerialMethodReturningInt32B(); 
    }); 
```

然后在延续中（无论您选择哪种延续方法），您可以查询结果（并记住观察您[`AggregateException`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)的 s），如下所示

```
var continuation = Task.Factory.ContinueWhenAll(
    new[] { task1, task2 }, tasks => 
        { 
            int i = task1.Result;
            int j = task2.Result;
            // Neglecting exception handling.
        }); 
```

有关 TPL 的精彩介绍，请参阅[此 CodeProject 文章](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)。

我希望这有帮助。

# excel - 无法理解如何通过 OLEObjects.Add 方法的“IconFileName”、“IconIndex”参数传递值

> ID：14560229
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:44.050
> 
> 标签：excel, vbscript, vba

我运行了一个宏，如下所示：

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Range("D7").Select
    ActiveSheet.OLEObjects.Add(Filename:= _
        "C:\Documents and Settings\rakshiar\Desktop\\Operating+System+Concepts.pdf" _
        , Link:=False, DisplayAsIcon:=True, IconFileName:= _
        "C:\WINDOWS\Installer\{AC76BA86-7AD7-FFFF-7B44-AB0000000001}\PDFFile_8.ico", _
        IconIndex:=0, IconLabel:="Operating+System+Concepts.pdf").Select

    End Sub 
```

并尝试将其转换为***VBScript***代码，如下所示：

```
excel = WIN32OLE.new('Excel.Application')
excel.visible = true
wb=excel.workbooks.open("E:\\WIPData\\Ruby\\Scripts\\GSL_File_DownLoad.xlsx")
wbs= wb.Worksheets(1)
wbs.cells(rows,2).values = wbs.OLEObjects.Add(,full_path,False,True, IconFileName:= _
               "C:\WINDOWS\Installer\{AC76BA86-7AD7-FFFF-7B44-AB0000000001}\PDFFile_8.ico",_
               IconIndex:=0,"Operating+System+Concepts.pdf") 
```

但现在无法理解如何以及如何提出`IconIndex`和`IconFileName`论点？

我有 .pdf、.tif、.docs、docx、.gif 等扩展文件，我需要使用脚本将它们附加到 Excel 列。那么在运行时我将如何获得`"C:\WINDOWS\Installer\{AC76BA86-7AD7-FFFF-7B44-AB0000000001}\PDFFile_8.ico"`.pdf 文件的值？

请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:59:59.233

您可以使用这样的变量`Set ol = ws.OLEObjects.Add(, FileToBeinserted, False, True, icoFile, icoIndex,lbl)`，在执行上述语句之前，只需确定您要插入的文件类型，然后设置相关图标文件的路径`icoFile`

这是一个适用于选定扩展的示例（**TRIED AND TESTED ）。**请酌情修改

```
'~~> Sample icons for relevant files
Const pdfIco = "D:\Temp\icons\ARROWS\AARROW.ico"
Const wrdIco = "D:\Temp\icons\ARROWS\ANYWHERE.ico"
Const TiffIco = "D:\Temp\icons\ARROWS\ARROW1.ico"
Const OtherFormat = "D:\Temp\icons\ARROWS\ARROW1A.ico"

Dim Xl, Wb, Ws, ol, FileToBeInserted, lbl

Set Xl = CreateObject("Excel.Application")
Xl.Visible = True

Set Wb = Xl.Workbooks.Add
Set Ws = Wb.Sheets(1)

'~~> Let user select a file
FileToBeInserted = Xl.GetOpenFilename("All Files (*.*), *.*")

'~~> Check if the user selected a file
If FileToBeInserted <> False Then
    '~~> Get the file name for the label
    lbl = GetFileName(FileToBeInserted)

    icoIndex = 0

    '~~> I am testing for just 3 extensions. Amend as applicable
    Select Case GetFileExtn(FileToBeInserted)
    Case "PDF"
        icoFile = pdfIco
    Case "DOCX", "DOC"
        icoFile = wrdIco
    Case "Tiff"
        icoFile = TiffIco
    Case Else
        icoFile = OtherFormat
    End Select

    '~~> Create the object
    Set ol = Ws.OLEObjects.Add(, FileToBeInserted, False, True, icoFile, icoIndex, lbl)
End If

'~~> Function to get the File extention
Function GetFileExtn(sFile)
    GetFileExtn = Trim(UCase(Right(sFile, Len(sFile) - InStrRev(sFile, "."))))
End Function

'~~> Function to get the file name
Function GetFileName(sFile)
    GetFileName = Left(sFile, (InStrRev(sFile, ".", -1, 1) - 1))
End Function 
```

# windows-7 - 写入增量数字的批处理文件

> ID：14560231
> 
> 赞同：0
> 
> 时间：2013-01-28T10:42:44.367
> 
> 标签：windows-7, batch-file

我需要一个批处理脚本来获取用户的输入并将其写入文本文件的第二列。下面是我尝试过的，但它只是创建了递增的数字序列，但我无法将它们放置在正确的位置。

```
set /p rows: Enter number of rows:

for /l %%g in (1,1,%rows%) do echo %%g>> myfile.txt 
```

`myfile.txt`是一个逗号分隔的文件，有 10 列。

我希望增量行号出现在第二列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:42:22.043

假设`myfile.txt`文件看起来像这样

```
h,e,l,l,o,b,a,l,i,c 
```

那么这个

```
setlocal enabledelayedexpansion
set /p num=Enter number of rows:
set /a row=1
for /f "tokens=1-10 delims=," %%a in (myfile.txt) do (
echo %%a,!row!,%%b,%%c,%%d,%%e,%%f,%%g,%%h,%%i,%%j >>new.txt
set /a row+=1
if !row! gtr !num! goto :BREAK
)
:BREAK
del myfile.txt /f /q
ren new.txt myfile.txt 
```

将输出

```
h,1,e,l,l,o,b,a,l,i,c  
h,2,e,l,l,o,b,a,l,i,c 
```

# c# - 转发器中的分页：视图状态始终返回 null

> ID：14560238
> 
> 赞同：1
> 
> 时间：2013-01-28T10:42:54.147
> 
> 标签：c#, asp.net, paging, viewstate

我正在尝试使用 PagedDataSource 在转发器中实现分页。问题是当我单击“下一步”按钮时，页面仍然相同，它不会加载其他项目。我发现 viewstate 总是返回 null，我不知道这是否是问题所在。

这是 C# 代码：

```
public partial class Users 
{
    private int _pageSize;
    PagedDataSource page = new PagedDataSource();

    private const bool blnAllowPaging = true;
    private const int iPageSize = 3;

    protected void Page_Load(object sender, EventArgs e)
    {
        // if page is loaded for the first time call BindRepeater()
        if (!Page.IsPostBack)
        {
            // Load the table
            BindRepeater();
        }
    }

    protected void lnkFirst_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the first page
        CurrentPage = 0;
        BindRepeater();
    }

    protected void lnkPrevious_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the previous page
        CurrentPage -= 1;
        BindRepeater();
    }
    protected void lnkNext_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the next page
        CurrentPage += 1;
        BindRepeater();
    }

    protected void lnkLast_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the last page
        CurrentPage = page.PageCount - 1;
        BindRepeater();
    }
    private void FillPagesDropDownList(int iTotalPages)
    {
        ddlpageNumbers.Items.Clear();
        for (int i = 1; i <= iTotalPages; i++)
        {
            ddlpageNumbers.Items.Add(new ListItem(i.ToString(), i.ToString()));
        }
    }

    protected void ddlpageNumbers_SelectedIndexChanged(object sender, EventArgs e)
    {
        CurrentPage = ddlpageNumbers.SelectedIndex;
        BindRepeater();
    }

    private int CurrentPage
    {
        get
        {
            EnableViewState = true;
            object obj = ViewState["CurrentPage"];
            return (obj == null) ? 0 : (int)obj;
        }
        set
        {
            this.ViewState["CurrentPage"] = value;
        }
    }

    private void BindRepeater()
    {
        page.AllowPaging = blnAllowPaging;
        page.PageSize = iPageSize;

        lblTotalPages.Text = page.PageCount.ToString();
        FillPagesDropDownList(page.PageCount);

        // Disable buttons if necessary
        lnkFirst.Enabled = !page.IsFirstPage;
        lnkPrevious.Enabled = !page.IsFirstPage;
        lnkNext.Enabled = !page.IsLastPage;
        lnkLast.Enabled = !page.IsLastPage;
        // Set the PagedDataSource's current page
        page.CurrentPageIndex = CurrentPage;
        ddlpageNumbers.SelectedIndex = page.CurrentPageIndex;

        List<USERS> users = GetUsers(); // list of users taken from db
        page.DataSource = users;
        page.DataBind();

    }
} 
```

这是 asp.net 代码：

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<style type="text/css">
    .style1
    {
        width: 528px;
    }
</style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<asp:Repeater ID="m_SupportersRepeater" runat="server"  OnItemDataBound="SupportersRepeater_OnItemDataBound">
<HeaderTemplate>
    <table border="1" width="90%">
        <tr>
            <td>Name</td>
            <td>Family Name</td>
            <td>Age</td>
            <td>City</td>
        </tr>
</HeaderTemplate>

<ItemTemplate>
    <tr>
        <td><%# DataBinder.Eval(Container.DataItem, "FIRSTNAME")%></td>
        <td><%# DataBinder.Eval(Container.DataItem, "LASTNAME")%></td>
        <td><%# DataBinder.Eval(Container.DataItem, "AGE")%></td>
        <td><%# DataBinder.Eval(Container.DataItem, "CITY")%></td>
    </tr>
</ItemTemplate>

<FooterTemplate>
    </table>
</FooterTemplate>
</asp:Repeater>
<br />
<table style="margin-left: 214px">
 <tr align="center">
    <td colspan="4" class="style1">
        <asp:LinkButton ID="lnkFirst" runat="server" ForeColor="Black" Text="First" onclick="lnkFirst_Click" ></asp:LinkButton>&nbsp;
        <asp:LinkButton ID="lnkPrevious" runat="server" ForeColor="Black"  Text="Previous" OnClick="lnkPrevious_Click" >     </asp:LinkButton>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Page&nbsp;
        <asp:DropDownList ID="ddlpageNumbers" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlpageNumbers_SelectedIndexChanged">    </asp:DropDownList>&nbsp;of&nbsp;
        <asp:Label ID="lblTotalPages" runat="server">    </asp:Label>&nbsp;Pages.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:LinkButton ID="lnkNext" runat="server" ForeColor="Black" Text="Next" Onclick="lnkNext_Click" ></asp:LinkButton>&nbsp;
        <asp:LinkButton ID="lnkLast" runat="server" ForeColor="Black" Text="Last" Onclick="lnkLast_Click" ></asp:LinkButton>
    </td>
</tr>
</table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:45:19.147

在您的 BindRepeater 方法中，尝试将最后三行代码（检索数据并将其绑定到 PagedDataSource 成员的位置）移动到方法的顶部，以便在开始评估其属性之前填充 PagedDataSource 对象。我认为在方法末尾加载数据会将 page.CurrentPageIndex 属性重置为零。所以首先加载PagedDataSource，在PagedDataSource 上设置分页属性，然后将Repeater 的DataSource 属性设置为PagedDataSourceObject。

# mysql - mysql在windows cmd中不起作用

> ID：14560246
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:43:35.940
> 
> 标签：mysql, phpmyadmin

我像这样在环境变量中添加了mysql路径到路径

![在此处输入图像描述](../Images/45e7ce24f3aa3c39b54d650ef9657812.png)

但是当我在 Windows 命令行中使用 mysql 命令时，它给了我这个错误

![在此处输入图像描述](../Images/11f74a7606831da81c46a79b70f8d2d0.png)

我已经多次重新启动 Windows 但仍然无法正常工作我认为缺少一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:45:18.147

尝试将 MySQL /bin 添加到您的 PATH 中。这就是命令 .exe 文件所在的位置。

当您在没有完整路径的情况下调用可执行文件时，PATH 环境变量会告诉 Windows 在哪里查找可执行文件。它不会为您推断 /bin 。你必须是明确的。

# ios - 如何从 systemTimeZone 中提取时区

> ID：14560249
> 
> 赞同：0
> 
> 时间：2013-01-28T10:43:43.413
> 
> 标签：ios

我已经添加了这个样本。

```
localNotif.timeZone = [NSTimeZone systemTimeZone];

NSLog(@"%@",[NSTimeZone systemTimeZone]); 
```

我得到时区 = 亚洲/加尔各答 (GMT+05:30) 偏移 19800，重复间隔 = 0

见下图

我想设置剩余时间 1 月 28 日下午 4.30，但它存储了 11:05:34 时区 = 亚洲/加尔各答 (GMT+05:30) 偏移量 19800

见表格视图单元格

![在此处输入图像描述](../Images/841dd77a2dbad7b0387e5f6d368fcf22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:51:54.087

和

> NSTimeZone *localTime = [NSTimeZone systemTimeZone];

您将获得设备上设置的时区。

这是以下文档`NSTimeZone`：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimeZone_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimeZone_Class/Reference/Reference.html)

像这样使用对象：

> NSLog(@"当前本地时区是 %@ (距离 GMT %d 秒)", [localTime name], [localTime secondsFromGMT]);

# button - extjs4 在单击时更改按钮功能

> ID：14560256
> 
> 赞同：1
> 
> 时间：2013-01-28T10:44:15.163
> 
> 标签：button, extjs4

我有一个带有多个复选框的复选框组和一个名为“检查所有”的按钮，单击该按钮会检查复选框组中的所有复选框。此外，单击时，按钮的文本会更改为“取消选中所有”。当用户现在再次单击此按钮时, 我希望取消选中复选框组中的所有复选框并将按钮文本更改回“全部选中”。这可以使用 Ext.button.Button 还是我需要使用 Ext.button.Cycle？（注意：按钮被包裹在一个面板中，以便它可以访问复选框组中的所有复选框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:37:13.633

像这样的东西：

```
Ext.require('*');

Ext.onReady(function(){

    var allChecked = false,
        ignoreChange;

    var onChange = function(){
        if (ignoreChange) {
            return;
        }

        console.log('xxx');
        var checked = true;
        Ext.Array.each(fields, function(field){
            if (!field.checked) {
                checked = false;
                return false;
            }
        });

        allChecked = checked;
        updateButton();
    };

    var updateButton = function(){
        btn.setText(allChecked ? 'Uncheck All' : 'Check All');
    };

    var group = new Ext.form.CheckboxGroup({
        renderTo: document.body,
        columns: 1,
        items: [{
            text: 'A',
            boxLabel: 'A'
        }, {
            text: 'B',
            boxLabel: 'B'
        }, {
            text: 'C',
            boxLabel: 'C'
        }, {
            text: 'D',
            boxLabel: 'D'
        }, {
            text: 'E',
            boxLabel: 'E'
        }, {
            text: 'F',
            boxLabel: 'F'
        }]
    });

    var fields = group.query('checkbox');

    Ext.Array.forEach(fields, function(field){
        field.on('change', onChange);    
    });

    var btn = new Ext.button.Button({
        renderTo: document.body,
        text: 'Check All',
        handler: function(){
            ignoreChange = true;
            Ext.Array.forEach(fields, function(field){
                field.setValue(!allChecked);
            });
            ignoreChange = false;
            allChecked = !allChecked;
            updateButton();
        }
    });

}); 
```

# java - 如何在正则表达式中验证 HHMMSS

> ID：14560258
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:44:18.030
> 
> 标签：java

我试过这样它不起作用，但不适用于值 005959 格式 HHMMSS

```
if(Pattern.matches("^([0-23])([0-59])([0-59])$", value))
{
    SimpleDateFormat dformat = new SimpleDateFormat("HHMMSS");
    dformat.setLenient(false);
    dformat.parse(value);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:46:54.183

你不能做这样的数字范围。要验证 1-24 （顺便说一下，00 有什么问题？以及从什么时候开始 60 在其他位置有效？）您需要像这样逐位进行：

```
(0[1-9]|1[0-9]|2[0-4]) 
```

也就是说，如果第一个数字是 0，那么后面必须是 1-9；如果为 1，那么任何可以跟随；如果为 2，则必须遵循 0-4。但是为什么要使用正则表达式呢？在全：

```
^(0[1-9]|1[0-9]|2[0-4])(0[1-9]|[1-5][0-9]|60)(0[1-9]|[1-5][0-9]|60)$ 
```

但是，请检查 0 和 60 值的注释...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:48:56.410

正确的正则表达式应该是：

```
^([01]\d|2[0-3])[0-5]\d[0-5]\d$ 
```

正如评论中已经指出的那样，60 不是有效的分钟或秒，24 不是有效的小时。

在一个小时从 1 到 24 分钟从 1 到 60 的世界中，您应该使用：

```
^(0[1-9]|1\d|2[0-4])(0[1-9]|[1-5]\d|60)(0[1-9]|[1-5]\d|60)$ 
```

# python - python中Dropbox元数据的JSON解析

> ID：14560259
> 
> 赞同：0
> 
> 时间：2013-01-28T10:44:19.060
> 
> 标签：python, json, windows-7, dropbox-api

使用 Dropbox API，我可以查看根文件夹中的所有文件夹，并使用元数据，我可以在屏幕上打印来自 JSON 的所有信息。

例如，一个样本输出就像

```
{
    'bytes': 0,
    'contents': [
        {
           'bytes': 0,
           'icon': 'folder',
           'is_dir': True,
           'modified': 'Thu, 25 Aug 2011 00:03:15 +0000',
           'path': '/Sample Folder',
           'rev': '803beb471',
           'revision': 8,
           'root': 'dropbox',
           'size': '0 bytes',
           'thumb_exists': False
        }, 
        {
           'bytes': 77,
           'icon': 'page_white_text',
           'is_dir': False,
           'mime_type': 'text/plain',
           'modified': 'Wed, 20 Jul 2011 22:04:50 +0000',
           'path': '/magnum-opus.txt',
           'rev': '362e2029684fe',
           'revision': 221922,
           'root': 'dropbox',
           'size': '77 bytes',
           'thumb_exists': False
        }
    ],
    'hash': 'efdac89c4da886a9cece1927e6c22977',
    'icon': 'folder',
    'is_dir': True,
    'path': '/',
    'root': 'app_folder',
    'size': '0 bytes',
    'thumb_exists': False
} 
```

我不确定，如何获取“内容”数组的元素，然后递归地使用“路径”属性获取文件。

我的最终目标是获取文件`Dropbox`夹中所有文件的列表。有没有更好的方法来获取所有文件的列表？

我试过以下代码：

```
folder_metadata = self.api_client.metadata('/Photos')
print "-----------------------------"
print "path:", folder_metadata['path']
for s in folder_metadata['contents']:
    for dirname, dirnames, filenames in os.walk(s['path']):
        for filename in filenames:
            var = os.path.join(dirname, filename)
            print var 
```

它的输出是：

```
-----------------------------
path: /Photos 
```

如何获得绝对路径？

# jquery - 如何使用 'children' jQuery 选择器仅显示 div 的子跨度的内容？

> ID：14560263
> 
> 赞同：0
> 
> 时间：2013-01-28T10:44:33.273
> 
> 标签：jquery

我有这样的html”

```
<div id="words" style="opacity: 1; visibility:hidden;">
    <div id="row1" style="top: 1px;">
        <span wordnr="0" class="highlight">took</span>
    </div>
</div> 
```

我想得到， 所以我怎么能用孩子 jquery 呢**？**

我努力了：

```
<script>
   var a=$("#words").children('#row1').children('.highlight');
   alert( a );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:47:22.623

由于有效的 html id 是唯一的，因此您只能使用 row1，还有一件事是将代码放入[document.ready](http://api.jquery.com/ready/)以确保对`javascript/jquery`.

**[现场演示](http://jsfiddle.net/J2pLy/)**

```
$(document).ready(function(){
  $('#row1').children('.highlight').each(function(){
      alert($(this).text()); 
  });
}); 
```

如果您通过选择器仅获得一个元素，您甚至不需要每个元素。

```
 var forTook = $('#row1').children('.highlight').text(); 
```

或者

```
var forTook = $('#row1 .highlight').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:53:03.720

你几乎在那里：

```
<script>
   var a = $('#words').children('#row1').children('.highlight').text();
   alert( a );
</script> 
```

正如 Adil 所说，如果有多个匹配元素，您将需要遍历匹配元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:51:00.837

只是为了详细说明；你不能像你的例子那样提醒一个 jquery 对象：

```
var a = $("#words").children('#row1').children('.highlight'); 
```

在这种情况下，`a`将是一个 jQuery 对象，它具有类似数组的结构。

考虑到上述情况（假设您选择了正确的元素），您可以像@Adil 的示例一样对其进行迭代：

```
$.each(a, function(i, el){
    alert($(el).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:51:24.363

试试这个：`.find()`使用`.children()`

```
$("#words").children().find('.highlight').text(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:51:34.407

如果您`.highlight`的 HTML 中有多个元素，则必须遍历它们：

```
$('#row1 .highlight').map(function() {
    return $(this).text();
}).get(); 
```

这将返回一个包含所有突出显示的单词的数组。

# ios - iOS 自定义后退按钮 - 删除文本并使用自定义图像

> ID：14560267
> 
> 赞同：1
> 
> 时间：2013-01-28T10:45:01.627
> 
> 标签：ios, uinavigationcontroller, back-button

我正在尝试在我的应用程序中实现自定义后退按钮。我不想要一个“后退”的头衔或任何前一个 VC 的头衔。相反，我希望它看起来像所有 VC 的附加图像。

我尝试在 UIBarButtonItem 的外观代理上使用 setBackButtonBackgroundImage 来替换图像，但它仍然显示“后退”标签，我不知道如何摆脱它。

有没有人对实现这一点的最佳实践有任何建议？我需要某种 UINavigationController 子类吗？或者我是否仍然需要使用我过去见过的人们使用的自定义返回方法路由（似乎很hacky）去setLeftBarButtonItem？任何帮助将不胜感激。

![自定义后退按钮图像](../Images/b56c74e3383bbb880bed8a78353e77cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:21:35.913

尝试将 UIButton 作为子视图放在 leftBarButtonItem 中，并带有一个动作和你想要的图像，一切都会好起来的 :) （你可能需要稍微编辑它们，但这不应该是火箭科学 :P）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T13:43:53.927

在我的许多项目中，我使用了一个自定义的后退按钮，它只是一个没有文本的图标。我做了一些实验以找到最好的方法并提出了以下方法（我并不是说它是最好的方法或唯一的方法，但它对我有用并且稳定）。

我的想法是实现一个 Root ViewController 来重新设置标准后退按钮的样式。事实证明这根本不容易。在摆弄了大约 1 天的不同选项后，我终于找到了一个可行的解决方案。

诀窍是要有一个足够大的透明背景（比实际的背面 V 形更大，否则它会被调整为更小的尺寸），然后为 V 形使用自定义图像。

它有效，但正如您在下面的测量结果中看到的那样，它有一个小缺点：左侧有额外的 14 点间隙。如果您想在右侧匹配按钮，则需要将其补偿 14 个点（是的，它的点在视网膜上是 28 个像素...）

![在此处输入图像描述](../Images/709dd9692dfea403c4dc703d0be94e77.png)

这是我的代码：

```
//this vc implements a custom back button, you can make this a root controller
//from which you inherit all your view controllers. But for simplicity reasons for this explanation
//I skipped this

class VCRoot: UIViewController {

 override func viewDidLoad() {
  //call supers
  super.viewDidLoad()
  //create custom back item
  let backItem = UIBarButtonItem()
  //as image set the back chevron icon its a 22x22 points (so 44x44 in retina)
  backItem.image=PaintCode.imageOfBarBtnBack
  let b = PaintCode.imageOfBarBtnBackgroundEmpty
  //as background I use a 1 = 33 points (so 2x66 retina) fully transparant image
  backItem.setBackButtonBackgroundImage(b, forState: UIControlState.Normal, barMetrics: UIBarMetrics.Default)
  //set the newly created barbuttonitme as the back button
  navigationItem.backBarButtonItem=backItem
 }
}

//this vc puts a "forwards" button in the navbar on the right with a matching arrow
//The image of this matching forward arrow is the correct size (width!) so that its the same
//distance from the edge of the screen as the back button

class VC2: UIViewController {

 //outlet to the barbutton item from IB
 @IBOutlet weak var barbtn: UIBarButtonItem!

 override func viewDidLoad() {
  //call supers
  super.viewDidLoad()
 //the forward chevron in the image is shifted 14 points (so 28 retina) to the left 
 //so it has same distance from edge => its (22+14) x 22 = 36 x 22 points (72 x 44 retina) 
  barbtn.image=PaintCode.imageOfBarBtnForward
 }
} 
```

您也可以在这里参考我的博客： [http ://www.hixfield.net/blog/2015/05/adding-a-custom-back-button-the-standard-way/](http://www.hixfield.net/blog/2015/05/adding-a-custom-back-button-the-standard-way/)

# liferay - 登录表单放置在默认主页中

> ID：14560269
> 
> 赞同：2
> 
> 时间：2013-01-28T10:45:06.910
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 门户 6.1.1CE。

我选择了 zoe-resort 作为我的门户主题。

默认情况下，登录表单仅在我们单击登录链接时显示。

默认情况下，我想要主页中的表单。

如何在 portal-normal.vm 中包含登录表单...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:04:50.893

通过将登录表单放在主题上，它将在您的所有网站页面中持续存在！

如果您只想将它​​添加到您的主页中，那么我强烈建议您使用 Login portlet 并将其放在 portlet 上。

为此：

1.  以管理员身份登录。
2.  在 Dockbar 中，单击“添加”下拉菜单，单击“更多...”
3.  使用搜索找到“登录”portlet。
4.  将 portlet 拖到您希望它显示的位置。

# powershell - 发送 -MailMessage -Attachments 将不接受任何变量的 null

> ID：14560270
> 
> 赞同：1
> 
> 时间：2013-01-28T10:45:15.020
> 
> 标签：powershell, powershell-2.0

我正在使用 Powershell v2.0 中的 Send-MailMessage 功能我正在使用附件的变量，因为并不总是会发送附件。如果变量中没有附件（文件位置），我会收到一个错误，否则它会起作用。我如何设置 Send-MailMessage 功能以输出附件，而在其他时候却没有失败。

```
Send-MailMessage -BodyAsHtml –From Monitoring@CorporateActions -Priority $Priority –To "steven.meadows@dionglobal.eu" -Attachments $IDCSwiftLogFileAttachment,$SecurityLogFileAttachment, $ClientTypeLogFileAttachment –Subject “Corporate Actions Overnight Processing” –Body "<b><u> Download Status: </u></b> <br><br> $SWIFTDownloadErrorMessage $SecurityDownloadErrorMessage $ClientDownloadErrorMessage $HoldingDownloadErrorMessage $CLISLOOKDownloadErrorMessage $SWIFTDownloadSuccessMessage $SecurityDownloadSuccessMessage $ClientDownloadSuccessMessage $HoldingDownloadSuccessMessage $CLISLOOKDownloadSuccessMessage <b><u> X-Gen Processing Status: </u></b> <br><br> $SWIFTXGenNoInputMessage $SecurityXGenNoInputMessage $ClientXGenNoInputMessage $HoldingXGenNoInputMessage $CLISLOOKXGenNoInputMessage $IDCSwiftXGenSuccessMessage $SecurityXGenSuccessMessage $ClientXgenSuccessMessage $HoldingXgenSuccessMessage $ClientTypeXGenSuccessMessage $IDCSwiftXgenErrorMessage $SecurityXgenErrorMessage $ClientXgenErrorMessage $HoldingXgenErrorMessage $ClientTypeXGenErrorMessage”  –SmtpServer smtp.investmaster.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:30:25.907

您可以使用“splat”参数：{parameter name, parameter value} 的散列以避免`Attachments`在不需要时传递参数：

```
$attachments = @()
if ($IDCSwiftLogFileAttachment) {
  $attachments += $IDCSwiftLogFileAttachment
}
# Repeat for each potential parameter

$params = @{}
if ($attachments.Length -gt 0) {
  $params['Attachments'] = $attachments
}

Send-MailMessage @params -BodyAsHtml –From Monitoring@CorporateActions -Priority $Priority # Other parameters 
```

（在 PowerShell V2 中添加了使用哈希表传递参数的功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T03:47:14.637

假设您编写了函数，最简单的方法是将附件的变量放在最后一个 posh 将接受离开，如果它是函数调用中的最后一个

它可能不花哨或不正确，但我一直在使用这种方法和我写了几年的电子邮件功能，现在没有问题

# jquery - 如何识别手风琴中的活动面板

> ID：14560271
> 
> 赞同：0
> 
> 时间：2013-01-28T10:45:15.013
> 
> 标签：jquery, jquery-ui-accordion

我在我的编码中使用 jQuery 手风琴。

我在手风琴中有 36 个面板，每个面板都有一个表格。

当我单击提交按钮时，我想以打开/活动面板的形式获取输入文本框中的内容。

如何识别打开的活动面板以提交相关表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:57:05.550

```
<div id="accordion">
  <h3 class="panel-header" data-panel-no="1">Section 1</h3>
  <div>
    <p>
    Mauris 
    </p>
  </div>
  <h3 class="panel-header" data-panel-no="2">Section 2</h3>
  <div>
    <p>
    </p>
  </div>...
</div> 
```

now with jquery onclick on class="panel-header" get the data-panel-no attribute value and store it in some temp variable.

```
var activePanel=-1;
$(function(){
   $(".panel-header").click(function()
    {
        activePanel = $(".panel-header").attr("data-panel-no").val();
    }
}) 
```

Hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:17:44.963

每当我使用 javascript 来做这类事情时，我都会将“活动”类添加到当前选定的元素中。

```
$("a.navigation").click(function(e)
{
if($(this).is(".active")) return false;

$("a.navigation").removeClass("active");
$(this).addClass("active"); 
```

这样，总是很容易检测到什么被激活并对其采取行动。

# php - 清除 php 表单以发送另一封电子邮件

> ID：14560274
> 
> 赞同：0
> 
> 时间：2013-01-28T10:45:18.620
> 
> 标签：php, forms

我不确定实现这一目标的最佳方法是什么。如果用户想要发送另一个文本，我正在尝试在我的 PHP 表单上创建输入按钮以清除表单。目前我添加了一个事件 onClick="history.go(-1);return (true);" 但表格仍然显示为已填满。无论如何通过向按钮添加事件来实现这一点。

```
 echo "<div id='success_page_apps'>"; 
    echo "<h1>Email Sent Successfully.</h1>";
    echo "<p>Thank you, your message has been submitted to us.</p>";
    echo "</div>";
    echo "<input type="button" value="Send Another" onClick="history.go(-1); return (true); ">"; 
```

否则我应该更改其余代码的某些内容：

```
 $error    = '';
    $email    = ''; 
    $comments = ''; 

    if(isset($_POST['contactus'])) {

    $email    = $_POST['email'];
    $comments = $_POST['comments'];
    $app =  $_SERVER["REQUEST_URI"];;

        if(trim($comments) == '') {
        $error = '<div class="error_message">Attention! Please enter your message.</div>';
    } else if(trim($email) == '') {
        $error = '<div class="error_message">Attention! Please enter a valid email address.</div>';
    } else if(!isEmail($email)) {
        $error = '<div class="error_message">Attention! You have enter an invalid e-mail address, try again.</div>';
    }

    if($error == '') {

        if(get_magic_quotes_gpc()) {
            $comments = stripslashes($comments);
        }

$address = "email@myemail.com";
$e_subject = 'You\'ve been contacted from an app web page ' . $name . '.';
$e_body = "You have been contacted using the app comments box on the above app web page, their additional message is as follows.\r\n\n";

$e_content = "\"$comments\"\r\n\n";

         $e_reply = "$name $email";

     $msg = $e_body . $e_content . $e_reply;

     mail($address, $e_subject, $msg, $app, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n");

    echo "<div id='success_page_apps'>"; 
    echo "<h1>Email Sent Successfully.</h1>";
    echo "<p>Thank you, your message has been submitted to us.</p>";
    echo "</div>";
    echo '<input type="button" value="Send Another" onClick="history.go(-1); return (true); ">';
    }

}

  if(!isset($_POST['contactus']) || $error != '') // Do not edit.
     {
?>
        <?php echo $error; ?>

        <fieldset id="contact_apps">
        <br />
        <form  method="post" action="#ContactForm">
        <label for="email" accesskey="E"><span class="required"></span> Email</label>

        <input name="email" type="text" id="email" size="33" value="<?php echo$email;?>" />

        <textarea name="comments" cols="50" rows="15"  id="comments"><?php echo$comments;?></textarea>
        <input name="contactus" type="submit" class="send" id="contactus" value="Submit">

        </form>

        </fieldset>

<?php } 
```

更新

非常感谢 Edwin Alex 和 Bojangles 将我指向 jQuery 来解决问题。

我通过在标签后的 php 页面底部添加以下内容来解决问题。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>

<script> 
$(document).ready(function(){
 $("#email").val('');
  $("#comments").val('');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:50:07.937

您可以使用 :input 选择器来实现这一点。

```
$(":input").val(''); 
```

这条语句将清除表单字段中的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:11:23.790

您应该始终使用 header("Location: ..."); 将用户重定向到新页面。否则，post 值将保留在内存中，页面刷新将重新发送它们。

# java - 如何使用 Jersey 拦截器获取请求正文

> ID：14560276
> 
> 赞同：18
> 
> 时间：2013-01-28T10:45:20.573
> 
> 标签：java, jersey, jax-rs

我`REST-Jersey`在我的项目中使用。所有 POST 数据都以`JSON`格式发送并在服务器端解组到相应的 bean 中。像这样的东西：

向服务器发送请求：

```
 $('a#sayHelloPost').click(function(event){
        event.preventDefault();
        var mangaData = {
            title:'Bleach',
            author:'Kubo Tite'
        }
        var formData=JSON.stringify(mangaData);
        console.log(formData);
        $.ajax({
                url:'rest/cred/sayposthello',
                type: 'POST',
                data: formData,
                dataType: 'json',
                contentType:'application/json'
        })
}); 
```

有效载荷：

```
{"title":"Bleach","author":"Kubo Tite"} 
```

服务器端：

```
@POST
@Path("/sayposthello")
@Produces(MediaType.APPLICATION_JSON)
public Response sayPostHello(MangaBean mb){
    System.out.println(mb);
    return Response.status(200).build();
} 
```

漫画豆：

```
public class MangaBean {
    private String title;
    private String author;
    @Override
    public String toString() {
        return "MangaBean [title=" + title + ", author=" + author + "]";
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getAuthor() {
        return author;
    }
    public void setAuthor(String author) {
        this.author = author;
    }
} 
```

控制台输出：

```
MangaBean [title=Bleach, author=Kubo Tite] 
```

我从[这里](https://stackoverflow.com/questions/4358213/how-does-one-intercept-a-request-during-the-jersey-lifecycle)得到了 REST-interceptor 实现。

```
public class JerseyFilter implements ContainerRequestFilter{

    @Override
    public ContainerRequest filter(ContainerRequest req) {
        return req;
    }

} 
```

我想访问拦截器中的有效负载（请求正文）。由于数据为 JSON 格式，因此无法作为请求参数访问。**有没有办法可以在拦截器方法中获取请求正文？**请指教。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-29T09:15:04.980

这是您可以实现的一种方式，与 Jersey 实现其日志过滤器的方式非常相似。您可以读取实体并将其粘贴到请求中，这样您就不会意外地在过滤器中使用它。

```
import com.sun.jersey.api.container.ContainerException;
import com.sun.jersey.core.util.ReaderWriter;
import com.sun.jersey.spi.container.ContainerRequest;
import com.sun.jersey.spi.container.ContainerRequestFilter;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

public class JerseyFilter implements ContainerRequestFilter {

    @Override
    public ContainerRequest filter(ContainerRequest request) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        InputStream in = request.getEntityInputStream();
        final StringBuilder b = new StringBuilder();
        try {
            if (in.available() > 0) {
                ReaderWriter.writeTo(in, out);

                byte[] requestEntity = out.toByteArray();
                printEntity(b, requestEntity);

                request.setEntityInputStream(new ByteArrayInputStream(requestEntity));
            }
            return request;
        } catch (IOException ex) {
            throw new ContainerException(ex);
        }

    }

    private void printEntity(StringBuilder b, byte[] entity) throws IOException {
        if (entity.length == 0)
            return;
        b.append(new String(entity)).append("\n");
        System.out.println("#### Intercepted Entity ####");
        System.out.println(b.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:18:20.313

您只能读取一次内容，因为它是输入流。如果您在拦截器中获取它，那么您将无法在主解析中提供它。

您需要做的是创建一个过滤器来读取数据并将其提供给需要它的任何其他人。基本步骤是：

*   在您的过滤器中创建一个新的 HttpServletRequestWrapper 子类，它将输入读入缓冲区并覆盖 getInputStream() 以向该缓冲区提供新的输入流
*   将您的新子类沿链传递

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T11:44:59.123

您可以从请求输入流中获取 POST 正文。尝试这样的事情：

```
 @Override
        public ContainerRequest filter(ContainerRequest req) {
            try{

            StringWriter writer = new StringWriter();       
                IOUtils.copy(req.getEntityInputStream(), writer, "UTF-8");

            //This is your POST Body as String      
            String body = writer.toString();

                }
            catch (IOException e) {}
         return req; } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-16T11:56:49.083

不要使用`in.available()`方法检查 Inputstream 的总字节数。一些客户端没有设置这个值。在这种情况下，即使消息体输入流存在，它也会犯规。

```
 InputStream in = request.getEntityInputStream();
        final StringBuilder b = new StringBuilder();
        try {
            if (in.available() > 0) 
```

使用下面的代码

```
String json = IOUtils.toString(requestContext.getEntityStream(), Charsets.UTF_8);
            messageBody = json;
            InputStream in = IOUtils.toInputStream(json);
            requestContext.setEntityStream(in); 
```

# java - 插入 SelectCheckboxMenu 图像

> ID：14560280
> 
> 赞同：1
> 
> 时间：2013-01-28T10:45:29.600
> 
> 标签：java, jsf, jsf-2, primefaces

有没有办法像 selectOneMenu 的展示示例一样创建带有图像的 selectCheckboxMenu 项目。我的意思是像下面这样的例子：

使用的 Primefaces 版本是 3.4.1

这是我的代码：

xhtml-文件：

```
<p:selectCheckboxMenu value="#{autoCompleteBean.selectedPlayer2}" converter="player" panelStyle="width:150px"  
                         effect="fade" var="p" style="width:160px"  filter="true" filterMatchMode="startsWith">  
            <f:selectItem itemLabel="Select One" itemValue="" />  
            <f:selectItems value="#{autoCompleteBean.players}" var="player" itemLabel="#{player.name}" itemValue="#{player}"/>  

            <p:column>  
                <p:graphicImage value="/images/barca/#{p.photo}" width="40" height="50"/>  
            </p:column>  

            <p:column>  
                #{p.name} - #{p.number}  
            </p:column>  
        </p:selectCheckboxMenu> 
```

谢谢！

# iphone - UIBarButton 不适用于后退操作

> ID：14560283
> 
> 赞同：0
> 
> 时间：2013-01-28T10:45:35.207
> 
> 标签：iphone, ios, ipad

我正在尝试将后退按钮设置为`UIBarButton`，但`IBAction`无法正常工作。我不确定出了什么问题。任何人都可以让我知道。

```
-(IBAction)back:(id)sender {
    // Tell the controller to go back
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:09:16.833

只需将您的背部方法替换为：

```
-(IBAction)back:(id)sender {
    // Tell the controller to go back
    [self dismissModalViewControllerAnimated:YES];
} 
```

希望你的问题得到解决。

享受 ...！！！

# database - 企业库日志记录块中的扩展属性

> ID：14560285
> 
> 赞同：0
> 
> 时间：2013-01-28T10:45:45.777
> 
> 标签：database, logging, listener, enterprise-library, extended-properties

我正在使用 Enterprise Library 5 Logging 块来登录我的 Windows 应用程序，我还为我的日志条目定义了一些扩展属性，当我定义数据库跟踪侦听器并使用它来记录我的消息时，我的扩展属性保存在哪里？在哪个领域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:59:17.757

扩展属性不会使用开箱即用的数据库跟踪侦听器记录到单独的列或表中。

要记录扩展属性，请配置记录扩展属性的格式化程序：

```
 <formatters>
            <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" template="Timestamp: {timestamp}{newline}
Message: {message}{newline}
Category: {category}{newline}
Priority: {priority}{newline}
EventId: {eventid}{newline}
Severity: {severity}{newline}
Title:{title}{newline}
Machine: {localMachine}{newline}
App Domain: {localAppDomain}{newline}
ProcessId: {localProcessId}{newline}
Process Name: {localProcessName}{newline}
Thread Name: {threadName}{newline}
Win32 ThreadId:{win32ThreadId}{newline}
Extended Properties: {dictionary({key} - {value}{newline})}" name="Text Formatter"/>
        </formatters> 
```

然后扩展属性数据将被记录到 FormattedMessage 列。

这样做的缺点是扩展属性隐藏在 FormattedMessage 中。如果您想要扩展属性的更结构化表示，您可以创建自定义数据库跟踪侦听器。

有关将扩展属性记录到单独表的示例，请参阅[使用自定义异常处理程序的扩展属性跟踪侦听器](http://entlib.codeplex.com/wikipage?title=Sample%20Projects)。

# xslt - 对 XSL 样式表进行分段

> ID：14560288
> 
> 赞同：1
> 
> 时间：2013-01-28T10:45:51.080
> 
> 标签：xslt, xslt-1.0, xsl-fo, apache-cocoon

我目前用来将 XML 转换为 PDF 的样式表已经变得非常大并且失控了。它已成为维护的噩梦。

我计划通过根据其功能将其拆分为各种样式表来重新设计此样式表。应该有一个主要的 xsl，和 3-4 个辅助 xs。根据主 xsl 中的一些条件，它应该跳转到适当的辅助 xsl。有可能这样做吗？

更新：我使用的是 1.0 版

编辑：我正在使用 apache cocoon 从 XML 生成 pdf。想知道是否有办法预处理传入的 XML 并决定哪个 XSL 应该处理这个（基于 XML 中的参数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:25:05.147

您可能会发现，与其让“主 xsl ...跳转到适当的辅助 xsl”，不如有几个面向任务的入口点，每个入口点由一个样式表模块表示，然后有一个包含在之间共享的东西的公共模块不同的入口点。这使得利用 xsl:import 变得更加容易：每个面向任务的样式表都导入公共样式表并覆盖公共样式表中不适合特定任务的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:15:36.033

XSLT 1.0 当然允许您编写样式表模块并将它们合并到一个主样式表中，借助`xsl:import`或`xsl:include`( [http://www.w3.org/TR/xslt#section-Combining-Stylesheets](http://www.w3.org/TR/xslt#section-Combining-Stylesheets) )。

但是，您对“跳转到适当的辅助 xsl”一词的使用听起来相当程序化。对我来说，XSLT 主要是关于编写模板来匹配输入中的节点，并使用`xsl:apply-templates`. 在大多数情况下，这些模板是否在单独的文件中并不重要，除了导入优先级和`xsl:apply-imports`，请参阅[http://www.w3.org/TR/xslt#apply-imports](http://www.w3.org/TR/xslt#apply-imports)。

# c# - this 关键字和双问号 (??) 让我感到困惑

> ID：14560290
> 
> 赞同：0
> 
> 时间：2013-01-28T10:46:17.640
> 
> 标签：c#

> **可能重复：**
> [在 C# 中，两个问号一起意味着什么？](https://stackoverflow.com/questions/446835/what-do-two-question-marks-together-mean-in-c)

这是添加到 C# 3.x 的新功能吗？

例如

```
public class HttpRequests
{
    public string GetHtmlContent(this HttpRequest myRequest)
    {            
       //do something
       return retStr ?? (retStr=new GetHtmlStr(urlStr));
    }
} 
```

这个和**??** **_** 对我来说很奇怪，因为我多年来没有更新我对 C# 的了解。我知道 C# 2.x。

 **对于条件**if**和返回值，即

`return a == 0 ? a:b;`

是的，我能理解这是什么。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:51:01.190

`??`- .Net 2.0 引入的[**空合并运算符**](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

`this`in method -> 指定现有类型的[**扩展方法**](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)，由 C# 3.0 引入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:49:20.933

**this**指的是扩展方法

[关于扩展方法，您可以在此链接](http://msdn.microsoft.com/en-us/library/vstudio/bb383977%28v=vs.90%29.aspx)中找到全面的详细信息

* * *

> **??** _ 运算符称为空值合并运算符，用于为可空值类型和引用类型定义默认值。如果它不为空，则返回左操作数；否则返回正确的操作数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:52:58.423

```
GetHtmlContent(this HttpRequest myRequest) 
```

好吧，这推断它是一个`Extension method`但是你的代码是否编译，因为你的类**不是静态的**

> 当方法的第一个参数包含 this 修饰符时，该方法称为扩展方法。扩展方法只能在非泛型、非嵌套的静态类中声明。扩展方法的第一个参数不能有除此以外的修饰符，参数类型不能是指针类型。

也是`??`一个空合并运算符

```
string something = maybenull ?? "I cannot be null"; 
```

因此，当`maybenull`object 为 null 时，您将获得分配给您的字符串的另一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:54:35.020

## 本次预选赛

当`this`在静态类中的静态方法的第一个参数之前使用限定符时，该方法称为“扩展方法”。基本上你是在对编译器说：“嘿，我想将此方法添加到现有类而不修改它”。

LINQ 大量使用它们（有关详细信息，请参阅[Enumerable Class ）。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)

## ?? 或 Null-Coalescing 运算符

?? 或 Null-Coalescing Operator 是语法糖：

```
var2 = var1 == null ? something : var1; 
```

事实上，你可以用一行简单的代码替换上面的操作：

```
var2 = var1 ?? something; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:54:35.947

是的，这是新功能。

**this**在第一个方法参数之前表示该方法是扩展方法。我很确定该函数必须是静态的才能有效。

所以要使用这种方法，你可以写

```
HttpRequest request;
// assign request
request.GetHtmlContent(); 
```

它会以 request 作为参数调用 GetHtmlContent。

这 ？？是 null 合并运算符，用于简化对 null 的检查。

代替

```
string s;
// ... s something something
// return s == null ? s = "default" : s; 
```

这意味着如果字符串s为null，则返回这个值，但如果它不为null，则返回s的值，你可以简单地写：

返回 ?? “默认”;

如果它不为空，则返回 s，如果 s 为空，则返回默认值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T10:50:28.403

这是一个null-coalising算子，见[MSDN解释](http://msdn.microsoft.com/en-us/library/ms173224.aspx)**

# dependency-injection - 这是使用 DI 和存储库模式实现 CQRS 的方式吗？

> ID：14560291
> 
> 赞同：0
> 
> 时间：2013-01-28T10:46:24.980
> 
> 标签：dependency-injection, repository, repository-pattern, cqrs, 3-tier

我将一个 POC 项目分配给了一个要求实现命令查询分离、控制反转（使用依赖注入）和存储库模式的人。“某人”给了我一个 POC 解决方案项目，但我不确定这是否是这样做的。在这里简单介绍一下POC项目

*   该项目是一个简单的 3 层应用程序——表示层 (PL)、业务逻辑层 (BLL) 和数据访问层 (DAL)；每一层都是一个单独的项目
*   表示层是 Web 应用程序，BLL 和 DAL 是类库项目
*   在业务层中，定义了存储库接口。BLL 库的引用被添加到 DAL 项目中，并且在 DAL 项目中有实现存储库接口的具体类。这就是应用控制反转的方式
*   由于完成了 Command-Query-Separation，业务层中的存储库接口只声明了 Add/Update 和 Delete 方法。对于读取，直接在 DAL 中有“读取”接口，在 DAL 中有实现这些接口的具体类。
*   表示层包含对 BLL 库和 DAL 库的引用。对 Add/Update/Delete 的调用通过 BLL 路由到 DAL，而任何读取都直接从 DAL 完成。我相信这符合绕过 BLL 进行读取的 Command-Query-Separation 概念。

这是所有设置的说明。有三个项目

*   西北网
*   西北商业
*   西北数据访问

下面是不同层中的代码快照。

**-- 西北网 --**

```
// A class in the Presentation Layer
public class CustomerPage 
{

    // Business layer Interface from  NW.Business namespace
    private ICustomerBusiness ICustB;

    //DAL Read interface from NW.DataAccess.Read namepsace
    private ICustomerRead<Guid> ICustR;

    //Constructor for the Customer Page that uses Constructor Injection
  public CustomerPage(ICustomerBusiness ICustB, ICustomerRead<Guid> ICustR)
    {
        this.ICustB = ICustB;
        this.ICustR = ICustR;
    }
} 
```

**-- 西北商业 --**

```
//Declaration of business interface in the Business Layer
interface ICustomerBusiness
{
    void Persist();
}

// A class in the Business Layer that implements the business interface
public class Customer: ICustomerBusiness 
{
    //Repository interface object that will be injected by Constructor Injection.
    private ICustomerRepository ICustRep;

    public Customer(ICustomerRepository ICustRep)
    {
        this.ICustRep = ICustRep;
    }

    public void Persist()
    {

            ICustRep.AddOrUpdate();

    }
}

//Declaration of Repository interface in the Business Layer
public interface ICustomerRepository
{
    void AddOrUpdate();
    void Delete();
} 
```

**-- NW.DataAccess--**

```
public class CustomerRepository : ICustomerRepository
{

    public void AddOrUpdate()
    {
        //implementation of Add or Update
    }

    public void Delete()
    {
        //implementation of Delete
    }
}

//A Read interface in the Data Access Layer
interface ICustomerRead<T>
{
   // A read is returned as DTO since in Database this may map to more than 1 table
    CustomerDTO GetCustomerDetails(T id);
}

// An implementation of the Read Interface in the Data Access Layer
namespace NW.DataAccess.Read
{
    public class CustomerRead<T> : ICustomerRead<T> 
    {

        public CustomerDTO GetCustomerDetails(T id)
        {
           //implementation here
        }
    }
} 
```

我的直觉是这里有问题。似乎 CQRS 或至少上述实现没有解决某些要求

*   客户业务对象（客户类）可能需要从数据库中读取其内部目的（如初始化变量等）。在 DAL 层中直接定义读取，唯一的方法是引用 BLL 中的 DAL dll。但这会创建循环引用并违背已完成的 IOC
*   当所有业务对象都存在一些共同的读取需求时会发生什么？

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:47:04.467

我认为一般概念是拥有“命令”和“查询”，并且在其中您可以依赖存储库。

我实际上重构了一个 ASP.NET MVC 项目，其中每个控制器都依赖一个或多个存储库来完成它的工作。当我重构它时，我为每个需要发生的特定操作创建了“命令”和“查询”对象，这大大简化了每个控制器。然后在这些命令和查询中，我使用现有的存储库来执行逻辑。

这似乎是额外的努力，但我这样做的原因是因为该解决方案也有缓存。缓存代码一团糟，到处都有缓存键被添加和删除。通过将所有数据访问分离为命令和查询，然后在访问或更新数据时引发域事件，可以简化和分离缓存管理代码。

有关我如何实现简单的命令/查询分离的概述，请参阅我最近关于该主题的博客文章，其中还包含示例代码和 NuGet 包以帮助您更快地进行设置： [http ://www.nootn.com.au/2013 /03/command-query-separation-to-better.html](http://www.nootn.com.au/2013/03/command-query-separation-to-better.html)

特别是要回答您的问题“当所有业务对象都存在一些共同的读取要求时会发生什么”：想象一下，我在那里的 Query 和 Command 类采用一些常见的“IRepository”依赖项而不是像我的示例那样的“DBContext”这就是您可以跨业务对象“共享”该常见读取需求的方式。

# facebook-fql - 是否可以获取页面的所有者（uid）

> ID：14560292
> 
> 赞同：1
> 
> 时间：2013-01-28T10:46:27.507
> 
> 标签：facebook-fql

我需要知道某些页面所有者的 uid。但这些页面不是我管理的。

例如，如果我想通过 FQL 知道此页面的 uid：SELECT uid FROM page_admin WHERE page_id=188713234485099

这可能吗？

提前致谢

# java - 注销动态创建的接收器

> ID：14560293
> 
> 赞同：2
> 
> 时间：2013-01-28T10:46:30.567
> 
> 标签：java, android

我在我的代码中动态注册了 2 个接收者以获取发送短信的结果和发送状态，我无法创建新类，这必须在现有类（扩展对话框）中完成。如何注销接收器。

我已经阅读了其他帖子，但它们没有帮助，它们要么有一个单独的类，要么在 xml 清单中注册接收器。

这是我的代码

```
private void sendSMS(String keyword, String msisdn) { 

   String SENT = "SMS_SENT";
   String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(mContext, 0,
           new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(mContext, 0,
           new Intent(DELIVERED), 0);

    mContext.registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    sendEventLog("Failed(Generic failure)");    
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    sendEventLog("Failed(No service)");     
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    sendEventLog("Failed(Null PDU)");   
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    sendEventLog("Failed(Radio off)");  
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    mContext.registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    break;
                case Activity.RESULT_CANCELED:
                    sendEventLog("Failed(SMS not delivered)"); 
                    break;
            }
        }
    }, new IntentFilter(DELIVERED));

   SmsManager MySmsManager = SmsManager.getDefault();
       MySmsManager.sendTextMessage(msisdn, null, keyword, sentPI, deliveredPI);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:54:11.007

除了跟踪接收者之外，您似乎别无选择。

另请参阅[我是否需要](https://stackoverflow.com/questions/10919060/do-i-need-to-unregister-anonymous-broadcastreceiver)为此主题取消注册“匿名”BroadcastReceiver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:51:17.923

您只需存储对您即时创建的接收器的引用。

```
BroadcastReceiver rcv;
rcv = new BroadcastReceiver() { ... }
mContext.registerReceiver(rcv); 
```

使用此引用 ( `rcv`)，您可以取消注册它。

# ruby - 我如何创建 SASS mixin 并在每个项目中使用

> ID：14560295
> 
> 赞同：0
> 
> 时间：2013-01-28T10:46:49.877
> 
> 标签：ruby, sass

我想通过简单地使用 @import "mixinfile" 来创建一个带有不同 mixin 的 scss 文件，而不是在每个项目中复制该文件。类似于将文件夹添加到 Windows 中的路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:23:25.853

Compass 是 Sass 框架，它不仅提供了大量有用的函数和 mixin，而且还允许您轻松创建自己的扩展。如果您将扩展捆绑为 gem（我个人建议这样做），您将不必记住将其放在文件系统上的位置。

[http://compass-style.org/help/tutorials/extensions/](http://compass-style.org/help/tutorials/extensions/)

当一个扩展作为 Ruby gem 安装时（这很容易做到，即使你对 Ruby 一无所知），你需要做的就是在你的 config.rb 文件中添加这样的一行：

```
require "extension-name" 
```

它将使您扩展中的所有样式表都可以访问，就像您在项目目录中拥有它们的副本一样：

```
@import "extension-name/widgets"; 
```

Compass 的作者有一个关于如何在这里编写自己的扩展的截屏视频（不包括从扩展中创建 gem）：

[http://chriseppstein.github.com/blog/2010/08/01/building-a-personal-framework/](http://chriseppstein.github.com/blog/2010/08/01/building-a-personal-framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:46:15.003

如果您使用的是 Mac，我建议您使用 Codekit 作为预编译器，它为您提供了为您的每个项目导入自己的框架的机会。好东西。

在那里寻找@import 语句[http://incident57.com/codekit/help.php](http://incident57.com/codekit/help.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:00:16.263

假设你的 mixin 的名称是“example”。因此，您可以在 .scss 文件中写入“@import example”。为了让它工作，你必须在你的样式表路径中有一个名为“_example.scss”的文件。

现在，你说你想跨项目共享这个 mixin。为此，您必须通过 lib 加载您的 mixin，如果我们谈论的是 rails，最好的方法是使用 rails 引擎（请参阅 bourbon gem 源代码）。然后将其作为依赖项添加到您的 gemfile 中（您可以使用 git uri 或其他类型的源）。

# javascript - 访问外部变量

> ID：14560300
> 
> 赞同：0
> 
> 时间：2013-01-28T10:46:57.610
> 
> 标签：javascript, scope

```
Object({
  a: "string",
  b: function() { return a; }
}).b() 
```

抛出`a is not defined`。是否可以`a`从内部访问`b`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:48:16.820

用于`this`正确引用范围

```
Object({
  a: "string",
  b: function() { return this.a; }
}).b(); // return "string" 
```

请参阅[MDN 上的 this 关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)以进一步阅读。

# javascript - 没有画布的 HTML 线条图（仅 JS）

> ID：14560302
> 
> 赞同：15
> 
> 时间：2013-01-28T10:47:01.700
> 
> 标签：javascript, html

我正在尝试使用 HTML 并在页面上画一条线。

从我读过的所有内容中，建议使用 HTML5 画布标签是最好的，但我需要这条线来连接到页面上不在画布标签中的东西，所以画布对我不利（想要/需要使用本机 JS） .

我已经（根据我发现的东西）编写了一个函数，它可以满足我的需要，但问题是一旦出现线条，页面的其他所有内容都会消失。

我发现每次我在 JavaScript 中更改样式时，除了形状之外的所有内容都会消失。

删除“document.write”结束时什么都没有消失。

```
function draw(ax, ay, bx, by) {
    var n, widthLine, i, x, y;
    widthLine = 1;
    if (Math.abs(ax - bx) > Math.abs(ay - by)) {
        if (ax > bx) {
            n = ax;
            ax = bx;
            bx = n;

            n = ay;
            ay = by;
            by = n;
        }
        n = (by - ay) / (bx - ax);

        for (i = ax; i <= bx; i++) {
            x = i;
            y = Math.round(ay + m * (x - ax));
            document.write("<div style='height:" + lineWidth + "px;width:" + widthLine + "px;background-color:black;position:absolute;top:" + y + "px;left:" + x + "px;'></div>");
        }
    } else {
        if (ay > by) {
            n = ax;
            ax = bx;
            bx = n;

            n = ay;
            ay = by;
            by = n;
        }
        n = (bx - ax) / (by - ay);

        for (i = ay; i <= by; i++) {
            y = i;
            x = Math.round(ax + n * (y - ay));
            document.write("<div style='height:" + lineWidth + "px;width:" + lineWidth + "px;background-color:black;position:absolute;top:" + y + "px;left:" + x + "px;'></div>");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T10:49:22.120

快速修复。

下面的函数获取线的坐标，然后绘制它。

它通过使用又长又细的 div 元素来工作。计算旋转角度和长度。

应该适用于所有浏览器（希望甚至是 IE）。

```
function linedraw(ax,ay,bx,by)
{
    if(ay>by)
    {
        bx=ax+bx;  
        ax=bx-ax;
        bx=bx-ax;
        by=ay+by;  
        ay=by-ay;  
        by=by-ay;
    }
    var calc=Math.atan((ay-by)/(bx-ax));
    calc=calc*180/Math.PI;
    var length=Math.sqrt((ax-bx)*(ax-bx)+(ay-by)*(ay-by));
    document.body.innerHTML += "<div id='line' style='height:" + length + "px;width:1px;background-color:black;position:absolute;top:" + (ay) + "px;left:" + (ax) + "px;transform:rotate(" + calc + "deg);-ms-transform:rotate(" + calc + "deg);transform-origin:0% 0%;-moz-transform:rotate(" + calc + "deg);-moz-transform-origin:0% 0%;-webkit-transform:rotate(" + calc  + "deg);-webkit-transform-origin:0% 0%;-o-transform:rotate(" + calc + "deg);-o-transform-origin:0% 0%;'></div>"
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-03T05:05:56.290

我刚刚开发了我在纯 js + html 代码中画线的版本。
首先，tan 函数定义在 0 到 180 度之间。如果 x2 大于 x1，我们将这些点反转（x2 变为 x1，x1 变为 x2）。
之后，我们检查这条线的长度（勾股定理）并测量斜率。通过斜率，我们可以计算辐射度。为了以度为单位，我们将结果相乘，然后除以 3.14。
最后我们可以绘制一个高度为 1px，宽度为 lineLength 的 div。我们根据计算得到的 div 旋转这个 div。

```
function linedraw(x1, y1, x2, y2) {
    if (x2 < x1) {
        var tmp;
        tmp = x2 ; x2 = x1 ; x1 = tmp;
        tmp = y2 ; y2 = y1 ; y1 = tmp;
    }

    var lineLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
    var m = (y2 - y1) / (x2 - x1);

    var degree = Math.atan(m) * 180 / Math.PI;

    document.body.innerHTML += "<div class='line' style='transform-origin: top left; transform: rotate(" + degree + "deg); width: " + lineLength + "px; height: 1px; background: black; position: absolute; top: " + y1 + "px; left: " + x1 + "px;'></div>";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T10:57:35.420

这个[javascript 图形库](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)似乎非常适合您想要实现的目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-20T23:06:29.107

另一个堆栈溢出页面上的这个答案效果很好。我正在绘制图像。我需要将图像放入具有 ID 的 DIV 中，该 ID 稍后在 getElementById() 调用的脚本中使用。然后效果很好。页面上的另一个答案（Craig Taub）不起作用。我这样说是因为我花了很多时间才意识到我做错了什么。它使用相同的原理绘制一个旋转的细 div。我知道它适用于铬。

[在html页面上画线](https://stackoverflow.com/questions/4270485/drawing-lines-on-html-page)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-11T19:27:59.103

更新为：

```
lineDraw(ax, ay, bx, by) {
    if(ax > bx) {
        bx = ax + bx; 
        ax = bx - ax;
        bx = bx - ax;

        by = ay + by;
        ay = by - ay;
        by = by - ay;
    }

    let distance = Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));
    let calc = Math.atan((by - ay) / (bx - ax));
    let degree = calc * 180 / Math.PI;

    let line = document.createElement('div');
    line.style.css({
        position: 'absolute',
        height: '1px',
        transformOrigin: 'top left',
        width: distance,
        top: ay + 'px',
        left: ax + 'px',
        transform: `rotate(${degree}deg)`,
        backgroundColor: 'back',
    });
    document.body.appendChild(line);
} 
```

# sqlite - 为什么我不能使用 indexedDB.open 连接到我的 SQLite 数据库？

> ID：14560303
> 
> 赞同：0
> 
> 时间：2013-01-28T10:47:05.053
> 
> 标签：sqlite, indexeddb

我有一个 Sqlite 数据库。我想通过 indexedDB 连接到我的文件。我也尝试了 indexedDB，它在配置文件中创建了新的 sqlite 文件。这个新的 sqlite 文件有一个名为“database”的表。该表包含我的文件名。

我的源代码是：

```
var indexedDB = window.indexedDB 
    || window.webkitIndexedDB 
    || window.mozIndexedDB
    || window.msIndexedDB;

var db;
var request = indexedDB.open("rule");
request.onerror = function(evt) {
  console.log("Database error code: " + evt.target.errorCode);
};
request.onsuccess = function(evt) {
  console.log("Database connect success");
  db = request.result;
}; 
```

代码运行时，`db`变量为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:43:07.123

这是不可能的。

虽然[Firefox 以 SQLite 格式存储自己的 IndexedDB 数据库](https://stackoverflow.com/a/9878154/317937)，但您不能直接查询或访问这些数据库。相反，您需要使用异步 IDB API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:09:41.690

If I am understanding your question correctly, you have a pre-existing SQLite database and you are trying to connect to it using IndexedDB?

As editor said in his answer, this is **not possible**. [IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB) is not a generic interface for accessing databases. The name is kind of deceptive, *IndexedDB is not a relational database*; it actually allows you to create [Object Stores](https://en.wikipedia.org/wiki/Persistent_object_store) in the browser to store JavaScript objects in. These stores are created in the browser using JavaScript, the current implementation in Firefox does store IndexedDB data in a SQLite database but [the spec](http://www.w3.org/TR/IndexedDB/) does not require this, each browser may store the data however they like behind the scenes. Other browsers, and future versions of Firefox may or may not use SQLite at all, again that doesn't really matter because IndexedDB does not provide access to the backend databases it uses anyway. Even the current implementation in Firefox does not solely rely on SQLite, it stores things like `File` and `Blob` objects [separate from the SQLite DB](https://hacks.mozilla.org/2012/07/why-no-filesystem-api-in-firefox/).

# nginx - Nginx 位置指令将 url 中的语言环境转换为查询字符串

> ID：14560304
> 
> 赞同：0
> 
> 时间：2013-01-28T10:47:10.463
> 
> 标签：nginx

我想重写所有网址，例如：

```
http://example.com/en/foo
http://example.com/en 
```

至：

```
http://example.com/foo?locale=en
http://example.com?locale=en 
```

我已经尝试过这样的事情（没有成功）：

```
location ~ ^/([a-z]2)?/(.*)$ {
    rewrite ^([a-z]2)/(.*) /$2?locale=$1;
} 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:41:51.930

```
location / {
    rewrite "^/([a-z]{2})$" "/?_LOCALE_=$1" break;
    rewrite "^/([a-z]{2})/(.*)$" "/$2?_LOCALE_=$1" break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:19:35.663

尝试这个：

```
location ~ ^/([a-z]{2})(/.*){0,1} {
   rewrite ^/[a-z]{2}$ /?locale=$1 break;
   rewrite ^/[a-z]{2}/(.*)$ /$2?locale=$1 break;

location / {
    # I don't know what happend to your request after rewrite above
    # so I assume that you proxy pass it
    proxy_pass http://my.php.server/$uri?$query_string =404;
} 
```

在这里，您的示例都匹配第一个`location`模式。在此块内，请求的 url 与不同的模式匹配。
如果第一个模式匹配，则采用第二个示例。
如果第二个模式匹配，则采用您的第一个示例。

第二个`location`块*在最后尝试它，在*这里你重写的 url 来了，并按原样使用。我们在`$uri`这里是因为`$request_uri`价值是不可变的。第一个位置块之后的参数值`$uri`将更改为`/?locale=en`or `/foo?locale=en`。它不包含查询字符串，因此我们必须使用 variable 手动分配它`$query_string`。

# oauth-2.0 - 使用 stackexchange 的 OAuth 登录移动应用程序

> ID：14560305
> 
> 赞同：0
> 
> 时间：2013-01-28T10:47:14.993
> 
> 标签：oauth-2.0, mobile-application, stackexchange

我正在基于 StackExchange 的 API 在 Android 上制作一个混合应用程序。我需要在其中提供登录功能。我正在按照他们的 JS SDK [http://api.stackexchange.com/docs/js-lib](http://api.stackexchange.com/docs/js-lib)中描述的步骤进行操作。我能够成功执行 SE.init，但是 SE.authenticate 给出了一个错误，如“代理 URL 上的意外域”。现在我的应用程序的 url 在其域中有 localhost:8080，这是我在 SE.init 的 channelUrl 属性中指定的。即使我在 android 设备上运行它，它的域就像 file:///data/data... 之类的。那么我该如何解决这个问题？

在整个过程中，当我的浏览器在我的应用程序中单击登录后启动时，我确实看到了 stackexchange 的各种登录选项，例如通过 google、facebook 等登录。但是我上面描述的问题发生在我点击说 google 登录后. 所以它尝试重定向并发现我在 SE.init 的 channelUrl 中指定了一个本地主机域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T06:09:55.850

我遇到了类似的问题，所以我将分享我的发现，希望它对您或其他处理相同问题的人有用。

首先，您应用的注册域必须与您在 channelUrl 中提供的域匹配。这里需要注意的重要一点是，以下内容不被视为相同的域：

```
`example.domain.com` and `example.domain.com:8080`. 
```

许多浏览器会将其视为跨域帖子，因此您最终可能会收到以下错误：

> 无法将消息发布到 example.domain.com。收件人的来源为 example.domain.com:8080

这是为了防止跨站点脚本攻击。

什么对我有用？: 我意识到处理**localhost**东西的特性是一件非常痛苦的事情。因此，我在像 Heroku 这样的云托管服务上注册了我的应用程序（您可以选择任何可用的服务，我选择 Heroku 是因为它为初学者提供了快速且无忧的注册以及一个不错的工具带集。）。发布我的域现在是**myapp.herokuapp.com**。有一次，我在 StackExchange 应用程序的 OAuth 域中指定它并修改`channelUrl`参数以包含**myapp.heroku.com/blank.html**，这一切都开始工作了，我现在可以使用 StackExchange API 获取数据。

我正在发布我与 StackExchange 支持人员讨论的[链接](https://stackapps.com/questions/4277/receiving-error-unexpected-domain-on-proxy-url/4283#4283)，这些支持人员帮助我找到了这个解决方案。

希望这可以为您指明解决方案。

# php - 如何在新窗口中打开 RSS 链接 XML 元素的链接？

> ID：14560308
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:47:21.687
> 
> 标签：php, javascript, xml

我正在研究 RSS。在这方面，我也通过提供链接来创建标题。当我们单击该链接时，它会在同一个窗口中打开它。但我希望它在新窗口中打开。谁能告诉我如何得到它？

```
<link>http://www.google.com</link> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:54:41.813

RSS 只是提供数据。互动在这里是不可能的。所以html标签在这里不起作用。但幸运的是，许多 RSS 阅读器在其中呈现 HTML 标签。对于那些 RSS 阅读器，您可以将 HTML 标记作为*字符数据*传递。像这样，

```
<description>
<![CDATA[
    Read <a href="http://stackoverflow.com" target="_blank">more</a>
]]>
</description> 
```

这将在支持 HTML 的 RSS 阅读器上呈现如下。

> 阅读[更多](http://stackoverflow.com)

但我不确定它是否会在`<link>`. 因为`<link>`应该只包含 URL。此处不允许使用任意短语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:57:38.147

' `<channel>`s`<link>`元素包含一个 URL（在 RSS 2.0 中），即：

> 与频道对应的 HTML 网站的 URL。

与[规范](http://cyber.law.harvard.edu/rss/rss.html)比较。

使用这样的链接/URL 可以做什么超出了 RSS 规范的范围。因此，无法给出在同一窗口中打开（或不打开）该链接的建议。

此外，您还没有指定您所谈论的窗口。我假设它是具有图形用户界面 (GUI) 的软件的一部分，该界面显示来自 RSS 提要的链接以供参考。

因此，该软件（您未指定的软件）可以控制在（相同或）新窗口中打开链接。您无法通过 RSS 提要进行控制，但可以通过软件进行控制。

您使用哪个软件来显示 RSS 提要？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:51:19.573

这完全取决于用户使用的 RSS 阅读器。显然，在浏览器中，您会添加`target="_blank"`到`<a>`标签中，但随着时间的推移，这是浏览器自然采用的约定。无法保证`target="_blank"`对所有甚至任何读者都有效，但您可以尝试一下。

事实是，无论如何您都不应该为用户强制执行此行为——这完全取决于他们如何处理他们的选项卡/窗口。如果我想在新选项卡或窗口中打开链接，我将使用浏览器的命令明确地这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T10:50:21.540

从此替换您的代码，将目标设为空白

```
<link target ="_blank">http://www.google.com</link> 
```

# mysql - 使用 AND、OR、NOT 条件的 HIbernate 查询

> ID：14560310
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:47:26.537
> 
> 标签：mysql, oracle, hibernate, hql

我的 sql Table 和 Hibernae Pojo 类与`Message:`--> column相同`toList,fromList,deleteList`。

我正在准备查询：仅在 toList 和 fromList 中，不在 deleteList 中；

```
Query:select mb from Message mb where mb.toList LIKE :searchKey OR mb.fromList LIKE :searchKey 
```

以及如何在 DeleteList 条件下写入 NOT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:11:38.547

请参阅HQL 中所有可用操作数的[休眠表达式。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions)

根据您的情况：

```
Query: only in toList and fromList not in deleteList; 
```

这应该可以正常工作：

```
select mb from Message mb 
where mb.toList LIKE :searchKey 
AND mb.fromList LIKE :searchKey
AND NOT mb.deleteList LIKE :searchKey 
```

# c++ - 如何使用 Direct8 dll 编译/调试 Visual Studio 2012 Win32 项目

> ID：14560311
> 
> 赞同：1
> 
> 时间：2013-01-28T10:47:28.397
> 
> 标签：c++, c, winapi, visual-studio-2012

我是 Win32 的新手。

> 错误 LNK2019：未解析的外部符号 _DirectDrawCreateEx@16 在函数“int __cdecl DD_Init(int,int,int)”(?DD_Init@@YAHHHH@Z) 中引用

显示当我尝试在 Win7 VS2012（安装了 Directx 11）上运行 direct8 Win32 项目时，我可以在 vs2012 中使用 direct8 dll 编译 win32 项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:23:58.300

您尝试使用的 DirectX 版本非常旧。但我相当确定它仍然受支持，我看到 DirectDrawCreateEx() 仍然存在于最新的 Windows SDK 版本 8 中，它包含在 VS2012 中。请避免按照其他答案中的建议安装旧 SDK，它不会对 VS2012 有任何了解，并且可能会部署严重过时的组件，这些组件可能会影响您的机器。DirectX 不久前集成在 Windows SDK 中。

项目 > 属性 > 链接器 > 输入 > 附加依赖项设置。添加`ddraw.lib`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:21:41.093

确保您已安装 DirectX 8 SDK 并设置正确的项目路径： http: [//msdn.microsoft.com/en-us/library/73f9s62w](http://msdn.microsoft.com/en-us/library/73f9s62w(v=vs.71).aspx) (v=vs.71).aspx 您必须设置 x86 lib 目录对于一个win32项目。祝你好运

# ios - ARC 和 EXC_BAD_ACESS 与 UITableView

> ID：14560321
> 
> 赞同：0
> 
> 时间：2013-01-28T10:47:58.127
> 
> 标签：ios, objective-c, uitableview, exc-bad-access

我在我的应用程序中实现了一个视图，其中有一个 UITableView。它执行来自 Internet 的图像延迟加载，并且此视图还有一个退出按钮，我在其中执行以下代码：

```
-(IBAction) exit{

    NSArray *versionCompatibility = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

    if (![[self modalViewController] isBeingDismissed])
    {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
} 
```

我在这个 ViewController 中使用 ARC，问题是，每当我在 UITableView 滚动时按下退出按钮时，它都会给我一个 EXC_BAD_ACCESS 错误。知道问题是什么吗？

# c++ - OSX 中的 Mongo db connect() 段错误

> ID：14560322
> 
> 赞同：1
> 
> 时间：2013-01-28T10:48:02.963
> 
> 标签：c++, macos, mongodb, mongodb-c

我最近搬到了 mac，我在一个使用 MongoDB 的 c++ 应用程序中工作。

该代码在 Ubuntu 中工作，但是当我在 MAC 上朗姆酒时，我在尝试连接时遇到分段错误，我什至没有遇到异常（我正在捕捉）。

服务器已启动并正在运行，如果我通过 pymongo 或 mongo shell 连接它，它工作正常，我可以读取集合。

我在这里遇到了段错误：

```
conn = new mongo::DBClientConnection();
conn->connect(url,err_msg); 
```

如果 url = "localhost" ， "localhost:27017" 等都没有关系......当我调用 connect 并且对象（conn）被实例化并正确分配时，它总是会出现错误，我仔细检查了。

最新的 c++ 驱动程序和 mac osx 山狮有任何已知问题吗？我是否可能需要签署我的应用程序或以 root 身份运行它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T17:04:49.700

尝试使用以下选项[`mongo-cxx-driver`从 github构建：](https://github.com/mongodb/mongo-cxx-driver)

```
sudo scons --libc++ --c++11=on --cpppath=/opt/local/include --libpath=/opt/local/lib --prefix=/opt/local install 
```

# c++ - 使用基类对象初始化派生类对象

> ID：14560323
> 
> 赞同：0
> 
> 时间：2013-01-28T10:48:07.437
> 
> 标签：c++

我有以下类型：

```
typedef std::vector<Node> Nodes;
struct Top: public Nodes {};
struct Middle: public Nodes {};
struct Bottom: public Nodes {}; 
```

现在假设我的测试类构造了一个`Nodes`名为`_standardNodes`：

```
TestDifferentTypes(): _standardNodes(standardNodes(_model)) 
{
} 
```

如何创建使用存储在节点中的数据初始化的 Top 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:51:36.450

继承向量不是一个好主意；你想在那里有一个关系，而不是是一个。*使用具有的父级*并从中`class NodeStore`继承所有其他节点类。 *`std::vector``Node`*

 *然后编写一个适当的构造函数（对于每个类），它接受您需要的每种对象类型。它可能看起来像这样：

```
class NodeStore {
    std::vector<Node> m_nodes;

    std::vector<Node>& getNodes() { return m_nodes; }
}

class TopNode {
  TopNode ( NodeStore& store ): m_nodes(store.getNodes()) 
  {
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:00:21.240

You haven't shown us the use of `Nodes` and `Top`, `Middle` and `Bottom`, but from the looks of things, I don't think this can be made to work, for several reasons.

The most important reason is simple: a `std::vector<Node>` can only contain objects of type `Node`. Objects of type `Top`, `Middle` and `Bottom` will be sliced (converted to `Node`) if inserted, so you loose the derived type.

And you cannot do something like `struct Top : public std::vector<Top>` (not that I think that's what you want), since you cannot instantiate a vector over an incomplete type, and you cannot derive from an uninstantiated template.

The usual solution for this is to create a `Tree` class, and use `std::vector<Node*>` in the nodes (as a member, not via inheritance). Alternatively, you can use Boost's pointer vector (but be careful of lifetime of the objects), or if you know that you'll never need back pointers, you can use `std::vector<std::unique_ptr<Node>>` (but the interface becomes a little trickier, and you still need to be careful about the lifetime of objects—removing an object from the tree will destroy it).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:50:57.153

通常避免从容器类型继承（例如，析构函数未声明为虚拟的，这意味着您需要小心多态性）。您应该[更喜欢组合](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

但是，要回答您的问题，您需要定义一个适当的构造函数`Top`，然后在其中调用适当的基类构造函数：

```
struct Top : public Nodes {
    Top(const Nodes &rhs) : Nodes(rhs) {}
    ...
}; 
```*

# actionscript-3 - Flash 中的桌面/屏幕共享（有/无 FMS）

> ID：14560329
> 
> 赞同：1
> 
> 时间：2013-01-28T10:48:18.613
> 
> 标签：actionscript-3, flash, air, adobe, flash-builder

有没有人对Flash中的屏幕共享有任何想法。我必须实施它并且对此一无所知。

请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:08:16.200

您可以尝试使用`wowza media server`桌面/屏幕共享。他们的网站上有很多样品可用。

# c# - 具有先决条件的完全静默 MSI 安装程序

> ID：14560335
> 
> 赞同：1
> 
> 时间：2013-01-28T10:48:35.087
> 
> 标签：c#, .net, installation, windows-installer, bootstrapper

我有一个简单的 C# 应用程序，我需要为其创建一个静默安装程序。我正在使用 Visual Studio 安装程序（基于 MSI）。由于它是 C# 应用程序，因此安装程序必须安装 .NET 框架作为先决条件。

我的解决方案中的安装项目生成 2 个文件：`setup.exe`和`app.msi`，分别是引导程序和 MSI 文件。

另外：安装总是在提升的权限下，这是一个安全的假设。

因此，我试图同时启动两者`setup.exe`，并且`app.msi`在安装和未安装 .NET 的情况下安装完全静默。

```
msiexec /i app.msi /qn 
```

这在安装了 .NET 的机器上静默运行，而在未安装 .NET 的机器上静默失败。

其他组合以非静默方式工作或显示一些弹出窗口。

那么有没有可能让这样的安装过程静默呢？或者，至少，让 .NET 安装显示弹出窗口，但应用程序本身必须是静默的（此外，不应有其他与 .NET 安装无关的弹出窗口，如“安装程序正在初始化组件”等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:02:29.453

引导程序的目的是安装一系列包，通常是一组先决条件（有条件地安装），然后是主包。你的没有安装先决条件。

一种廉价的方法是使用脚本（甚至像批处理文件一样简单）作为引导程序：检测 .NET，如果不存在则运行 .NET 安装程序包，然后运行主包安装：

```
@echo off
rem this key/value is how WiX detects .NET 4.0 Full installation
reg query "HKLM\Software\Microsoft\NET Framework Setup\NDP\v4\Full" /v InstallPath >NUL 2>&1
rem sets ERRORLEVEL==0 if present, ERRORLEVEL==1 if absent

rem if .NET not found, install it:
if ERRORLEVEL 1 dotNetFx40_Full_setup.exe

rem now install main program
msiexec /i app.msi /qn 
```

注意事项：

*   注册表项名称因不同的 .NET 版本而异
*   出于安全原因，某些系统管理员会删除或禁用**reg.exe命令**
*   有时 .NET 安装程序会在您身上重新启动，并且您不会在第一次尝试时进入主包
*   刚安装的 .NET Framework 有时直到重新启动后才完全激活
*   **.bat**文件非常容易破解。VBScript 或 JScript 之类的也是如此。不要将它们用于真正的客户。一个好的引导程序（例如 WiX **burn**）具有内置的 .NET 检测功能，并且对黑帽更不透明

# c# - 从整个网站中提取网址

> ID：14560336
> 
> 赞同：1
> 
> 时间：2013-01-28T10:48:35.313
> 
> 标签：c#

我想从整个网站而不是单个网页中提取所有超链接。是否有任何用于此目的的 C# 库。如果没有，那么我们怎么能做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:58:09.963

您应该尝试 HTML Agility Pack（[此处](http://htmlagilitypack.codeplex.com/)）。看看这个[帖子](https://stackoverflow.com/questions/6063203/parsing-html-with-c-net/6063226#6063226)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:55:20.193

您可以从[C# scraping](http://www.dotnetperls.com/scraping-html)开始。为此，您可以尝试使用 HTML Agility Pack。还要检查一个相关的问题，比如[我需要一个强大的 Web Scraper 库](https://stackoverflow.com/questions/4377355/i-need-a-powerful-web-scraper-library)

# java - 为什么 slf4j Logger 没有 log 方法？

> ID：14560338
> 
> 赞同：3
> 
> 时间：2013-01-28T10:48:37.490
> 
> 标签：java, log4j, slf4j

我想知道为什么没有

```
logger.log(level, ...) 
```

在 slf4j 中。有确切的原因吗​​？当从 log4j 迁移到 slf4j 并使用 logback 时，这让我很头疼！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:54:02.063

slj4j 只是实际[Logger](http://www.slf4j.org/apidocs/org/slf4j/Logger.html)实现的包装器，以便提供更改底层实现的灵活性。

话虽如此，slf4j 使用*logger.level()*代替*.log(,)*表示法- logger。**调试（）**记录器。**信息（）**等

 *****这也基于在底层记录器配置中定义的受支持的级别，例如 logger.properties。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:12:02.620

这只是猜测，但我认为`log(Level...`类型方法不在接口中，原因有以下几种：

*   减少接口中的方法数量
*   避免需要在界面中定义数字日志级别
*   没有数字级别，只有枚举值，这种方法的优势不清楚
*   通过完全没有日志级别类，尽可能独立于底层日志系统的日志级别
*   当应用程序需要动态日志级别时，替代方案可能是[Marker concept](http://www.slf4j.org/apidocs/org/slf4j/Marker.html)。*****

# java - AlarmManager 在两个特定时间

> ID：14560340
> 
> 赞同：0
> 
> 时间：2013-01-28T10:48:46.500
> 
> 标签：java, android, alarmmanager

我在 9:00 和 21:00 有两个 AlarmManager，但只运行第二个警报。

```
 ////////9:00am/////////
    Intent aviso = new Intent(FijarAlerta.this,Servicio.class);
    PendingIntent pi = PendingIntent.getService(FijarAlerta.this, 0, aviso, PendingIntent.FLAG_UPDATE_CURRENT);
           //set the hour
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, 9);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
    am.setRepeating(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY,pi); 
```

第二次报警

```
////////21:00pm//////////
    Intent avisopm = new Intent(FijarAlerta.this,Servicio.class);
    PendingIntent pipm = PendingIntent.getService(FijarAlerta.this, 0, avisopm, PendingIntent.FLAG_UPDATE_CURRENT);
                 //set the hour
    Calendar calpm = Calendar.getInstance();
    calpm.set(Calendar.HOUR_OF_DAY, 21);
    calpm.set(Calendar.MINUTE, 0);
    calpm.set(Calendar.SECOND, 0);
    AlarmManager ampm = (AlarmManager)getSystemService(ALARM_SERVICE);
    ampm.setRepeating(AlarmManager.RTC_WAKEUP,calpm.getTimeInMillis(),AlarmManager.INTERVAL_DAY,pipm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:53:36.900

在每种情况下，调用的第二个参数`PendingIntent.getService()`应该是不同的数字。例如：

```
PendingIntent pi = PendingIntent.getService(FijarAlerta.this, 111, aviso,       PendingIntent.FLAG_UPDATE_CURRENT);
PendingIntent pipm = PendingIntent.getService(FijarAlerta.this, 222, avisopm, PendingIntent.FLAG_UPDATE_CURRENT); 
```

目前，第二个 pendingIntent 只是覆盖了第一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:22:37.190

只需更换第二条报警线：

```
PendingIntent pipm = PendingIntent.getService(FijarAlerta.this, 0, avisopm, PendingIntent.FLAG_UPDATE_CURRENT); 
```

低于一个

```
PendingIntent pipm = PendingIntent.getService(FijarAlerta.this, 1, avisopm, PendingIntent.FLAG_UPDATE_CURRENT); 
```

现在，如果您没有成功，请尝试让我发表评论。

享受编码。:)

# android - 电池电压为 3.4 时禁用 Wifi

> ID：14560341
> 
> 赞同：1
> 
> 时间：2013-01-28T10:48:46.610
> 
> 标签：android

对于我的设备，我想在电池电压降至 3.4 时禁用 wifi。

如何以编程方式知道电池电压为 3.4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:58:41.557

您必须获得`ACTION_BATTERY_CHANGED`粘性意图并从那里读取电压：

```
IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
Intent batteryStatus = getContext().registerReceiver(null, ifilter);

int voltage = batteryStatus.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);
if(voltage>0 && voltage<3400){
    //disable wifi
} 
```

# actionscript-3 - 1180：编译资产时调用可能未定义的方法 TabHighlightDisplay

> ID：14560343
> 
> 赞同：0
> 
> 时间：2013-01-28T10:48:51.013
> 
> 标签：actionscript-3, flash, flash-cs6

我的一些资产文件遇到了一个奇怪的类问题。它在 2 个 Mac 上运行良好，但在我的 macbook 上出现“在类路径中找不到此类定义”的错误

我很确定闪存出了点问题，它的路径错误或发生了奇怪的事情，符号的基类存在，就像我说的在其他机器上工作正常。

当我检查导致问题的资产的符号属性时，我正确输入了基类，检查类按钮表示已找到该类 (TabHighlight.as)

![找到 AS 导出基类](../Images/1f1a27b067924d1f01fb1681cc91a854.png)

但是，当我在同一个符号属性对话框上单击“确定”时，会弹出另一个警报，实际上说，找不到该类，因此将在导出期间创建一个。哇？

![作为出口](../Images/5ecefbd1c52ecbb479a1d9356742e912.png)

显然有问题，但是课程在那里，我已经正确设置了它适用于我的另一台计算机和我的同事的源路径。只是我的笔记本电脑！

几个小时以来，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:58:18.360

第一个对话框确认 class 的存在`TabHighlite`，第二个对话框警告您的类路径中没有 class `TabHighliteDisplay`。如果有类`TabHighliteDisplay`flash 会使用它，但默认情况下 Flash 会为它生成存根。听起来您在 2 Mac 中选中了“不再显示”框，却忘记了这一点）

# android - Android：WebView/BaseInputConnection 中的退格键

> ID：14560344
> 
> 赞同：15
> 
> 时间：2013-01-28T10:48:51.167
> 
> 标签：android, android-input-method, android-4.2-jelly-bean

我在 Android (4.2) 中遇到了软键盘退格的问题。

我在 WebView (CodeMirror) 中有一个自定义编辑器，它在`<textarea>`内部使用一个空的。似乎退格键不是由 Android 系统发送的，除非它认为`<textarea>`.

我已经覆盖`WebView` `onCreateInputConnection`以试图降低软输入：

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
    Log.d("CustomWebView", "onCreateInputConnection(...)");
    BaseInputConnection connection = new BaseInputConnection(this, false);
    outAttrs.inputType = InputType.TYPE_NULL;
    outAttrs.imeOptions = EditorInfo.IME_ACTION_NONE;
    outAttrs.initialSelStart = -1;
    outAttrs.initialSelEnd = -1;

    return connection;
} 
```

但是，这不起作用，甚至`onKeyUp`不需要退格。

如何强制软键盘始终发送退格键？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-28T11:47:01.690

好的，终于想通了。

在 Android 4.2（可能在早期版本中也是如此）中，退格键不是`sendKeyEvent(..., KeyEvent.KEYCODE_DEL)`由标准软键盘作为 a 发送的。相反，它以`deleteSurroundingText(1, 0)`.

因此，在我的情况下，解决方案是`InputConnection`使用以下内容进行自定义：

```
@Override
public boolean deleteSurroundingText(int beforeLength, int afterLength) {       
    // magic: in latest Android, deleteSurroundingText(1, 0) will be called for backspace
    if (beforeLength == 1 && afterLength == 0) {
        // backspace
        return super.sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL))
            && super.sendKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DEL));
    }

    return super.deleteSurroundingText(beforeLength, afterLength);
} 
```

注意：如果我在这里做一些愚蠢的事情，请告诉我，因为这是我为 Android 写作的第三天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T06:09:23.437

这段代码会更好，它适用于更多键盘：D

```
@Override
  public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
      outAttrs.actionLabel = null;
      outAttrs.inputType = InputType.TYPE_NULL;
      final InputConnection con = new BaseInputConnection(this,false);
      InputConnectionWrapper public_con = new InputConnectionWrapper(
              super.onCreateInputConnection(outAttrs), true) {
          @Override
          public boolean deleteSurroundingText(int beforeLength, int afterLength) {
              if (beforeLength == 1 && afterLength == 0) {
                  return this.sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL))
                          && this.sendKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DEL));
              }
              return super.deleteSurroundingText(beforeLength, afterLength);
          }

          @Override
          public boolean sendKeyEvent(KeyEvent event) {
              if(event.getKeyCode() == KeyEvent.KEYCODE_DEL){
                  return con.sendKeyEvent(event);
              }else {
                  return super.sendKeyEvent(event);
              }
          }
      };
      try {
          return public_con ;
      }catch (Exception e){
          return super.onCreateInputConnection(outAttrs) ;
      }
  } 
```

# silverlight - 列表框不显示带有实体框架的 silverlight mvvm 中的更新/新增值

> ID：14560346
> 
> 赞同：0
> 
> 时间：2013-01-28T10:49:01.217
> 
> 标签：silverlight, entity-framework, mvvm

在我的带有 MVVM 模式的 Silverlight5 项目中，我有一个列表框。我使用实体框架将数据加载到列表框。最初，所有数据都使用实体框架模型加载到列表框中。但是如果我添加新数据，列表框不会显示新添加的值。但是新增加的价值在实体中是可用的。问题是什么？我必须做些什么来实现这一点。

列表框 xaml 编码：

```
<ListBox ItemsSource="{Binding Projects,Mode=TwoWay}" SelectedItem="{Binding Project,Mode=TwoWay}" SelectionMode="Single" >
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <!--<StackPanel Orientation="Horizontal" />-->

                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="Gray" Margin="2,2,2,2"  BorderThickness="0">
                                    <StackPanel Orientation="Vertical" >
                                        <TextBlock Text="{Binding ProjectName,Mode=TwoWay}"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

视图模型代码：

```
 private IEnumerable<Project> projects;
        private Project project;
        private Customer customer;

        PartsDomainContext _context;
        public IEnumerable<Project> Projects
        {
            get
            {
                return projects;
            }
            set
            {
                projects= value;
                if (projects != null)
                {
                    OnPropertyChanged("Projects");
                    Project = projects.FirstOrDefault();
                    OnPropertyChanged("Project");
                }
            }
        }
public Project Project
        {
            get
            { 
                return project;
            }
            set
            {
                project=value;
                OnPropertyChanged("Project");
                if (project != null)
                {   

                    Customer = project.CustomerProjects.FirstOrDefault().Customer;
                    OnPropertyChanged("Customer");
                }
            }
        }
public ProjectListViewModel()
        {
            GetProjectList(ActiveData.Instance.userid);
        }
public void GetProjectList(int userid)
        {
            _context = new PartsDomainContext();
            OnPropertyChanged("Projects");
            _context.Load(_context.GetProjectListQuery(ActiveData.Instance.userid), Param =>
                {
                    if (!Param.HasError)
                    {
                        Projects = Param.Entities;
                        OnPropertyChanged("Projects");
                    }
                }, null);
        }

public void GetProjectList(int userid)
        {
            _context = new PartsDomainContext();
            OnPropertyChanged("Projects");
            _context.Load(_context.GetProjectListQuery(ActiveData.Instance.userid), Param =>
                {
                    if (!Param.HasError)
                    {
                        Projects = Param.Entities;
                        OnPropertyChanged("Projects");
                    }
                }, null);

        } 
```

需要帮助解决它..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:41:52.007

编辑：在这段代码中， saveChanges() 没有在任何地方实现。它应该适合您的需求。

**UPDATE2：我忘了提及如何创建从视图到视图模型的数据绑定。这可以与 UserControls 一起使用。UnityContainer 将自动解析所有依赖项。在您的代码隐藏中，您将构造函数更改为：**

```
public MainWindow(ProjectViewModel projectViewModel)
{
    this.DataContext = projectViewModel;
} 
```

我认为首先你应该做一些重构，提取一些接口，创建一个存储库并实现控制反转，以消除所有这些依赖关系。

让我帮您编写一些代码：（首先，我不确定您是如何实现实体上下文的，我非常喜欢 Entity Framework 的 Code First 方法，我将使用 (kindof) 来演示）

您的对象可能看起来有点像这样。

```
public class Project
{
  public int UserId { get; set; }
  //...
} 
```

然后你有你的上下文和它的界面：

（这个很简单，演示，使用 Code First，就像我上面说的）

```
public interface IProjectContext
{
  DbSet<Project> Projects { get; set; }
}

public class ProjectContext : DbContext, IProjectContext
{
  public DbSet<Project> Projects { get; set; }
} 
```

现在，您的 ViewModel 上不应该有这些 Get 方法。相反，让我们将它们提取到 Repository 实现（及其接口）中。

```
public interface IProjectRepository
{
  Project[] GetAll();
  Project[] GetByUser(int userId);
  void Add(Project project);
  void Remove(ProjectRepository project);
}

public class ProjectRepository : IProjectRepository
{
  private IProjectContext context;

  public ProjectRepository(IProjectContext context)
  {
    this.context = context;
  }

  public Project[] GetAll()
  {
    return context.Projects.ToArray();
  }

  public Project[] GetByUser(int userId)
  {
    return context.Projects.Where(p => p.UserId == userId).ToArray();
  }

  public void Add(Project project)
  {
    context.Projects.Add(project);
  }

  public void Remove(Project project)
  {
    context.Projects.Remove(project);
  }
} 
```

您的 ViewModel 现在会简单得多。为了使双向绑定正确及时更新，我们将实现 INotifyPropertChanged

```
public class ProjectViewModel : INotifyPropertyChanged
{
  #region Property Changed
  public event PropertyChangedEventHandler PropertyChanged;
  protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
  {
    var handler = this.PropertyChanged;
    if (handler != null)
    {
      handler(this, e);
    }
  }
  protected void RaisePropertyChanged(String propertyName)
  {
    OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
  }
  #endregion

  private IProjectRepository projectRepository;
  private ICollection<Project> projects;
  private Project activeProject;

  public ICollection<Project> Projects
  {
    get { return projects; }
    set
    {
      projects = value;
      RaisePropertyChanged("Projects");
    }
  }

  public Project ActiveProject
  {
    get { return activeProject; }
    set
    {
      activeProject = value;
      RaisePropertyChanged("ActiveProject");
    }
  }

  public ProjectViewModel(IProjectRepository projectRepository)
  {
    this.projectRepository = projectRepository;
    Projects = projectRepository.GetAll();
    ActiveProject = Projects.FirstOrDefault();
  }
} 
```

我将在您的 App.xaml.cs 中实现 Unity Container，以便将所有这些部分连接在一起。为此，您必须重写 OnStartup 并注册上述类型。

```
public partial class App : Application
{
  protected override OnStartup(StartupEventArgs e)
  {
    private IUnityContainer container = new UnityContainer();
    container.RegisterType<IProjectRepository,ProjectRepository>(new ContainerControlledLifetimeManager());
    container.RegisterType<IProjectContext,ProjectContext>(new ContainerControlledLifetimeManager());
    MainWindow window = container.Resolve<MainWindow>();
    window.Show();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:47:24.713

海刚才我修复了这个.. 在 ListBox_loaded() 事件中编写 DataContext。

```
private void ListBox_Loaded(object sender, RoutedEventArgs e)
        {
            DataContext = new UrViewModel();
        } 
```

问题解决了..

# windows - 安装 Windows Cloudera ODBC Hive 驱动程序在 odbcad32 中不显示驱动程序

> ID：14560348
> 
> 赞同：0
> 
> 时间：2013-01-28T10:49:05.647
> 
> 标签：windows, odbc, hive, cloudera, tableau-api

我下载并安装了链接[https://ccp.cloudera.com/display/con/Cloudera+Connector+for+Tableau](https://ccp.cloudera.com/display/con/Cloudera+Connector+for+Tableau)中提供的 cloudera odbc hive 驱动程序。但是在运行 odbcad32.exe（ODBC 数据源管理器）时，驱动程序选项卡不会显示与此驱动程序相关的任何新内容。我已经在 Window Server 2008 R2 和 Windows 7 上尝试过。有人遇到过同样的情况并有解决方案吗？谢谢， 切斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:16:47.503

您使用的是哪个版本的 ODBC 管理器？如果您的平台是 64 位，Cloudera ODBC 驱动程序将不会使用 64 位管理器显示（驱动程序是 32 位的）。因此，您必须使用可在 c:/windows/sysWoW64/odbcad32.exe 下找到的 32 位管理器。

请记住，32 位适配器只能用于 32 位应用程序。

希望这会有所帮助。

# c# - Microsoft Jet 数据库引擎找不到输入表或查询

> ID：14560356
> 
> 赞同：0
> 
> 时间：2013-01-28T10:49:48.923
> 
> 标签：c#, visual-studio-2008, oledb, oledbconnection

我有一个小方法，基本上检查页面加载时是否选中或取消选中复选框。

但是，我确实收到了上述错误消息，指出它找不到表“tblProducts”，我觉得很奇怪，因为该表确实存在于数据库中。为什么我会收到此 OleDbException？

这就是我所做的。

```
public void checkedOrNot(CheckBox chk, string column, string table)
{
    string codevalue;
    Session["exeFilePath"] = Request.CurrentExecutionFilePath;
    using (OleDbConnection myOLEDBConn = new OleDbConnection(ConfigurationManager.AppSettings["conn"]))
    {
        bool value = false;

        codevalue = Request.QueryString["code"];
        myOLEDBConn.Open();
        OleDbCommand cmd = myOLEDBConn.CreateCommand();
        cmd.CommandText = "SELECT ['" + column + "'] FROM ['" + table + "'] WHERE [CODE] = '" + codevalue + "'";
        OleDbDataReader dbReader = cmd.ExecuteReader();
        if (dbReader.Read())
        {
            value = (bool)dbReader["" + column + ""];
        }
        if (value == true)
        {
            chk.Checked = true;
        }
        else
        {
            chk.Checked = false;
        }
    }

}

checkedOrNot(chkPreview, "PreviewLibraryChecked", "tblProducts"); 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:06:22.147

换行

```
cmd.CommandText = "SELECT ['" + column + "'] FROM ['" + table + "'] WHERE [CODE] = '" + codevalue + "'"; 
```

有了这个

```
cmd.CommandText = "SELECT [" + column + "] FROM [" + table + "] WHERE [CODE] = '" + codevalue + "'"; 
```

# c# - 在 windows server 2008 R2 中更新 C# 版本

> ID：14560365
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:50:16.147
> 
> 标签：c#, asp.net, windows, windows-server-2008

我正在使用带有 IIS 7.5 的 Windows Server 2008 R2。我使用用于 Web 开发的最新 Visual Studio 开发了一个网站 (2012) 在我的服务器中，我有 asp.net 4.0 和 C# 2010。在我的项目中，我使用了 asp.net 4.5 和 C# 2012。将我的网站移动到 asp.net 4.0 是没问题。但是我遇到了 C# 编译器的问题。有没有办法将 C# 编译器更新到 2012？提前致谢！

哈维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:56:58.460

您需要在服务器上安装 .NET Framework 4.5，以便可以针对目标框架编译站点。我不知道 4.5 是否仍使用 4.0 CLR，如果是这样，您仍将在 IIS 中选择 .NET 4.0，就像使用 3.5 时选择 2.0 - 如果有另一个 CLR，那么您将看到明确的 4.5 IIS 中的选择。

# android - Android 多次崩溃警报

> ID：14560367
> 
> 赞同：1
> 
> 时间：2013-01-28T10:50:19.887
> 
> 标签：android, android-intent, textview

如果我在我的应用程序中抛出异常，它将按预期崩溃，显示消息“不幸已停止”。但是，它显示此消息然后打开另一个活动并再次显示该消息似乎很奇怪。它基本上会在应用程序重新启动之前遍历我所有显示此消息的活动。

`TextView`我通过将 a 强制转换为 a来引发测试异常`LinearLayout`，这是输出：

```
01-28 12:04:36.270: E/AndroidRuntime(23772): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.LinearLayout
01-28 12:04:36.270: E/AndroidRuntime(23772):    at com.iii.News.onCreate(News.java:16)
01-28 12:04:36.270: E/AndroidRuntime(23772):    at android.app.Activity.performCreate(Activity.java:5104)
01-28 12:04:36.270: E/AndroidRuntime(23772):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-28 12:04:36.270: E/AndroidRuntime(23772):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-28 12:04:36.270: E/AndroidRuntime(23772):    ... 11 more
01-28 12:04:42.706: D/dalvikvm(23873): newInstance failed: no <init>()
01-28 12:04:42.706: D/AndroidRuntime(23873): Shutting down VM
01-28 12:04:42.706: W/dalvikvm(23873): threadid=1: thread exiting with uncaught exception (group=0x41ff3930)
01-28 12:04:42.706: E/AndroidRuntime(23873): FATAL EXCEPTION: main
01-28 12:04:42.706: E/AndroidRuntime(23873): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.iii/com.iii.Forums}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.iii.menu.TradingMenuFragment: make sure class name exists, is public, and has an empty constructor that is public
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.os.Looper.loop(Looper.java:137)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at dalvik.system.NativeStart.main(Native Method)
01-28 12:04:42.706: E/AndroidRuntime(23873): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.iii.menu.TradingMenuFragment: make sure class name exists, is public, and has an empty constructor that is public
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.support.v4.app.Fragment.instantiate(Fragment.java:399)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1760)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at com.slidingmenu.lib.app.SlidingFragmentActivity.onCreate(SlidingFragmentActivity.java:20)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at com.iii.BaseActivity.onCreate(BaseActivity.java:29)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at com.iii.Forums.onCreate(Forums.java:9)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.Activity.performCreate(Activity.java:5104)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-28 12:04:42.706: E/AndroidRuntime(23873):    ... 11 more
01-28 12:04:42.706: E/AndroidRuntime(23873): Caused by: java.lang.InstantiationException: can't instantiate class com.iii.menu.TradingMenuFragment; no empty constructor
01-28 12:04:42.706: E/AndroidRuntime(23873):    at java.lang.Class.newInstanceImpl(Native Method)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at java.lang.Class.newInstance(Class.java:1319)
01-28 12:04:42.706: E/AndroidRuntime(23873):    at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
01-28 12:04:42.706: E/AndroidRuntime(23873):    ... 20 more
01-28 12:04:57.442: D/dalvikvm(23901): newInstance failed: no <init>()
01-28 12:04:57.442: D/AndroidRuntime(23901): Shutting down VM
01-28 12:04:57.442: W/dalvikvm(23901): threadid=1: thread exiting with uncaught exception (group=0x41ff3930)
01-28 12:04:57.442: E/AndroidRuntime(23901): FATAL EXCEPTION: main
01-28 12:04:57.442: E/AndroidRuntime(23901): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.iii/com.iii.Markets}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.iii.menu.TradingMenuFragment: make sure class name exists, is public, and has an empty constructor that is public
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.os.Looper.loop(Looper.java:137)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at dalvik.system.NativeStart.main(Native Method)
01-28 12:04:57.442: E/AndroidRuntime(23901): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.iii.menu.TradingMenuFragment: make sure class name exists, is public, and has an empty constructor that is public
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.support.v4.app.Fragment.instantiate(Fragment.java:399)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1760)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at com.slidingmenu.lib.app.SlidingFragmentActivity.onCreate(SlidingFragmentActivity.java:20)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at com.iii.BaseActivity.onCreate(BaseActivity.java:29)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at com.iii.Markets.onCreate(Markets.java:9)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.Activity.performCreate(Activity.java:5104)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-28 12:04:57.442: E/AndroidRuntime(23901):    ... 11 more
01-28 12:04:57.442: E/AndroidRuntime(23901): Caused by: java.lang.InstantiationException: can't instantiate class com.iii.menu.TradingMenuFragment; no empty constructor
01-28 12:04:57.442: E/AndroidRuntime(23901):    at java.lang.Class.newInstanceImpl(Native Method)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at java.lang.Class.newInstance(Class.java:1319)
01-28 12:04:57.442: E/AndroidRuntime(23901):    at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
01-28 12:04:57.442: E/AndroidRuntime(23901):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:13:49.903

因此，显然您正在尝试使用 a`TradingMenuFragment`但正如您从 logcat 中看到的那样，它没有空的构造函数。

```
01-28 12:04:42.706: E/AndroidRuntime(23873): Caused by: java.lang.InstantiationException: 
    can't instantiate class com.iii.menu.TradingMenuFragment; no empty constructor 
```

解决这个问题，一切都应该没问题。

# c# - 没有使用 IronPython 的名为 ctypes 的模块？

> ID：14560372
> 
> 赞同：0
> 
> 时间：2013-01-28T10:50:27.170
> 
> 标签：c#, python, ironpython, importerror

我使用**IronPython 2.6 CTP for .NET 4.0 Beta 2**从 C# 调用 Python 方法。
我已经包含了以下库：

```
IronPython.dll
IronPython.Modules.dll
Microsoft.Dynamic.dll
Microsoft.Scripting.Debugging.dll
Microsoft.Scripting.dll 
```

**我正在调用的 Python 代码**

```
#!/usr/bin/env python

import ctypes

class EAHashingAlgorithm():

    def __init__(self):
        # shift amounts in each round
        self.r1Shifts = [ 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22 ]
        self.r2Shifts = [ 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20 ]
        self.r3Shifts = [ 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23 ]
        self.r4Shifts = [ 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21 ]

        self.hexChars = "0123456789abcdef"

    def zero_fill_right_shit(self, data, bits):
        return (data & 0xffffffff) >> bits

    def num2hex(self, num):
        '''
            Convert a decimal number to hexadecimal
        '''
        temp = ''
        for i in range(0, 4):
            x = self.hexChars[ ( num >> (i * 8 + 4) ) & 0x0F ]
            y = self.hexChars[ ( num >> (i * 8) ) & 0x0F ]
            temp += (x + y)

        return temp

    def chunkMessage(self, string):
        # TODO: ctypes.c_int32() in this method
        nblk = (( len(string) + 8) >> 6) + 1
        blks = [0] * (nblk * 16)

        for i in range(0, len(string)):
            blks[i >> 2] |= ord(string[i]) << ((i % 4) * 8)

        i = i + 1

        blks[i >> 2] |= 0x80 << ((i % 4) * 8)
        blks[nblk * 16 - 2] = len(string) * 8

        return blks

    def add(self, x, y):
        lsw = (x & 0xFFFF) + (y & 0xFFFF)
        msw = (ctypes.c_int32(x >> 16).value) + (ctypes.c_int32(y >> 16).value) + (ctypes.c_int32(lsw >> 16).value)
        return ctypes.c_int32( (ctypes.c_int32(msw << 16).value) | (lsw & 0xFFFF) ).value

    # Bitwise rotate 32bit num to left
    def bitwiseRotate(self, x, c):
        return ctypes.c_int32( ctypes.c_int32(x << c).value | self.zero_fill_right_shit(x, 32 - c) ).value

    # Basic MD5 operations
    def cmn(self, q, a, b, x, s, t):
        z1 = self.add(a, q)
        z2 = self.add(x, t) 
        a1 = self.add(z1, z2)

        x1 = self.bitwiseRotate(a1, s)
        return self.add(x1, b)

    def md5_f(self, a, b, c, d, x, s, t):
        return self.cmn( ctypes.c_int32((b & c) | ((~b) & d)).value, a, b, x, s, t )

    def md5_g(self, a, b, c, d, x, s, t):
        return self.cmn( ctypes.c_int32((b & d) | (c & (~d))).value, a, b, x, s, t )

    def md5_h(self, a, b, c, d, x, s, t):
        return self.cmn( ctypes.c_int32(b ^ c ^ d).value, a, b, x, s, t )

    def md5_i(self, a, b, c, d, x, s, t):
        return self.cmn( ctypes.c_int32(c ^ (b | (~d))).value, a, b, x, s, t )

    def EAHash(self, string):
        x = self.chunkMessage(string)

        a = 1732584193
        b = -271733879
        c = -1732584194
        d = 271733878

        for i in range(0, 16, 16):
            tempA = a
            tempB = b
            tempC = c
            tempD = d

            # F
            a = self.md5_f(a, b, c, d, x[i+0], self.r1Shifts[0], -680876936)
            d = self.md5_f(d, a, b, c, x[i+1], self.r1Shifts[1], -389564586)
            c = self.md5_f(c, d, a, b, x[i+2], self.r1Shifts[2], 606105819)
            b = self.md5_f(b, c, d, a, x[i+3], self.r1Shifts[3], -1044525330)

            a = self.md5_f(a, b, c, d, x[i+4], self.r1Shifts[4], -176418897)
            d = self.md5_f(d, a, b, c, x[i+5], self.r1Shifts[5], 1200080426)
            c = self.md5_f(c, d, a, b, x[i+6], self.r1Shifts[6], -1473231341)
            b = self.md5_f(b, c, d, a, x[i+7], self.r1Shifts[7], -45705983)

            a = self.md5_f(a, b, c, d, x[i+8], self.r1Shifts[8], 1770035416)
            d = self.md5_f(d, a, b, c, x[i+9], self.r1Shifts[9], -1958414417)
            c = self.md5_f(c, d, a, b, x[i+10], self.r1Shifts[10], -42063)
            b = self.md5_f(b, c, d, a, x[i+11], self.r1Shifts[11], -1990404162)

            a = self.md5_f(a, b, c, d, x[i+12], self.r1Shifts[12], 1804603682)
            d = self.md5_f(d, a, b, c, x[i+13], self.r1Shifts[13], -40341101)
            c = self.md5_f(c, d, a, b, x[i+14], self.r1Shifts[14], -1502002290)
            b = self.md5_f(b, c, d, a, x[i+15], self.r1Shifts[15], 1236535329)

            # G
            a = self.md5_g(a, b, c, d, x[i+1], self.r2Shifts[0], -165796510)
            d = self.md5_g(d, a, b, c, x[i+6], self.r2Shifts[1], -1069501632)
            c = self.md5_g(c, d, a, b, x[i+11], self.r2Shifts[2], 643717713)
            b = self.md5_g(b, c, d, a, x[i+0], self.r2Shifts[3], -373897302)

            a = self.md5_g(a, b, c, d, x[i+5], self.r2Shifts[4], -701558691)
            d = self.md5_g(d, a, b, c, x[i+10], self.r2Shifts[5], 38016083)
            c = self.md5_g(c, d, a, b, x[i+15], self.r2Shifts[6], -660478335)
            b = self.md5_g(b, c, d, a, x[i+4], self.r2Shifts[7], -405537848)

            a = self.md5_g(a, b, c, d, x[i+9], self.r2Shifts[8], 568446438)
            d = self.md5_g(d, a, b, c, x[i+14], self.r2Shifts[9], -1019803690)
            c = self.md5_g(c, d, a, b, x[i+3], self.r2Shifts[10], -187363961)
            b = self.md5_g(b, c, d, a, x[i+8], self.r2Shifts[11], 1163531501)

            a = self.md5_g(a, b, c, d, x[i+13], self.r2Shifts[12], -1444681467)
            d = self.md5_g(d, a, b, c, x[i+2], self.r2Shifts[13], -51403784)
            c = self.md5_g(c, d, a, b, x[i+7], self.r2Shifts[14], 1735328473)
            b = self.md5_g(b, c, d, a, x[i+12], self.r2Shifts[15], -1926607734)

            # H
            a = self.md5_h(a, b, c, d, x[i+5], self.r3Shifts[0], -378558)
            d = self.md5_h(d, a, b, c, x[i+8], self.r3Shifts[1], -2022574463)
            # line below uses self.r2Shifts[2] where as MD5 would use self.r3Shifts[2]
            c = self.md5_h(c, d, a, b, x[i+11], self.r2Shifts[2], 1839030562)
            b = self.md5_h(b, c, d, a, x[i+14], self.r3Shifts[3], -35309556)

            a = self.md5_h(a, b, c, d, x[i+1], self.r3Shifts[4], -1530992060)
            d = self.md5_h(d, a, b, c, x[i+4], self.r3Shifts[5], 1272893353)
            c = self.md5_h(c, d, a, b, x[i+7], self.r3Shifts[6], -155497632)
            b = self.md5_h(b, c, d, a, x[i+10], self.r3Shifts[7], -1094730640)

            a = self.md5_h(a, b, c, d, x[i+13], self.r3Shifts[8], 681279174)
            d = self.md5_h(d, a, b, c, x[i+0], self.r3Shifts[9], -358537222)
            c = self.md5_h(c, d, a, b, x[i+3], self.r3Shifts[10], -722521979)
            b = self.md5_h(b, c, d, a, x[i+6], self.r3Shifts[11], 76029189)

            a = self.md5_h(a, b, c, d, x[i+9], self.r3Shifts[12], -640364487)
            d = self.md5_h(d, a, b, c, x[i+12], self.r3Shifts[13], -421815835)
            c = self.md5_h(c, d, a, b, x[i+15], self.r3Shifts[14], 530742520)
            b = self.md5_h(b, c, d, a, x[i+2], self.r3Shifts[15], -995338651)

            # I
            a = self.md5_i(a, b, c, d, x[i+0], self.r4Shifts[0], -198630844)
            d = self.md5_i(d, a, b, c, x[i+7], self.r4Shifts[1], 1126891415)
            c = self.md5_i(c, d, a, b, x[i+14], self.r4Shifts[2], -1416354905)
            b = self.md5_i(b, c, d, a, x[i+5], self.r4Shifts[3], -57434055)

            a = self.md5_i(a, b, c, d, x[i+12], self.r4Shifts[4], 1700485571)
            d = self.md5_i(d, a, b, c, x[i+3], self.r4Shifts[5], -1894986606)
            c = self.md5_i(c, d, a, b, x[i+10], self.r4Shifts[6], -1051523)
            b = self.md5_i(b, c, d, a, x[i+1], self.r4Shifts[7], -2054922799)

            a = self.md5_i(a, b, c, d, x[i+8], self.r4Shifts[8], 1873313359)
            d = self.md5_i(d, a, b, c, x[i+15], self.r4Shifts[9], -30611744)
            c = self.md5_i(c, d, a, b, x[i+6], self.r4Shifts[10], -1560198380)
            b = self.md5_i(b, c, d, a, x[i+13], self.r4Shifts[11], 1309151649)

            a = self.md5_i(a, b, c, d, x[i+4], self.r4Shifts[12], -145523070)
            d = self.md5_i(d, a, b, c, x[i+11], self.r4Shifts[13], -1120210379)
            c = self.md5_i(c, d, a, b, x[i+2], self.r4Shifts[14], 718787259)
            b = self.md5_i(b, c, d, a, x[i+9], self.r4Shifts[15], -343485551)
            # This line is doubled for some reason, line below is not in the MD5 version
            b = self.md5_i(b, c, d, a, x[i+ 9], self.r4Shifts[15], -343485551)

            a = self.add(a, tempA)
            b = self.add(b, tempB)
            c = self.add(c, tempC)
            d = self.add(d, tempD)

        return self.num2hex(a) + self.num2hex(b) + self.num2hex(c) + self.num2hex(d) 
```

**调用该方法的 C# 代码：**
`eaHash(...)`

```
ScriptEngine engine = Python.CreateEngine();
ScriptSource source = engine.CreateScriptSourceFromFile("EAHashingAlgorithm.py");
ScriptScope scope = engine.CreateScope();
source.Execute(scope);

dynamic eaHash = scope.GetVariable("EAHashingAlgorithm");
dynamic hash = eaHash();
this.answer = hash.EAHash(_answer); 
```

**收到错误**
`ImportError: No module named ctypes`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:59:01.000

您需要确保 IronPython 标准库也可用，因为还`ctypes`需要一些纯 Python 文件。添加对`engine.SetSearchPaths(new [] { "path/to/Lib" });`指向库的调用。如果您使用的是安装程序，它可能在`C:\Program Files\IronPython 2.7`; 在 zip 文件中，它位于 `Lib`.

如果您正在分发和应用程序，使用相对于您的可执行文件的文件夹是最有意义的；`Assembly.GetExecutingAssembly()`可能对此有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:52:23.463

> 我不断收到错误，没有名为 ctype 的模块...帮助任何人？

好吧，首先，模块被称为`ctypes`，而不是`ctype`。

但是，更重要的是，`ctypes`IronPython 直到 2.6 版才存在。

这包括早期的 2.6 alpha，显然还包括 .NET 4 的 2.6 CTP（从早期的 alpha 衍生而来）。如果您想确切地知道它何时进入 2.6（哪个 beta 等），那么该信息可能在某处可用，但您真的不应该关心。使用最终的 2.6 或更高版本。

[如果您不能这样做，那么这里](http://blog.jdhardy.ca/2009/04/ctypes-for-ironpython.html)至少有一个您可以使用的第三方实现。

# linux - GTK+ 安装

> ID：14560374
> 
> 赞同：6
> 
> 时间：2013-01-28T10:50:30.370
> 
> 标签：linux, gtk

我正在使用 ubuntu 12.10。我有 CODE:Blocks IDE。我想使用 gtk+，但是当我创建一个项目并构建它时，它说它找不到 gtk.h 文件。

我通过写作下载了 gtk+、glib、pango、gdk-pixbuf 和 atk

```
git clone git://git.gnome.org/gtk+, 
git clone git://git.gnome.org/glib

... 
```

然后我解压缩了所有库。在这里一切都很好。

要安装 gtk+ 我写“./configure --prefix=/opt/gtk” 它开始处理，大部分过程都正常，但随后出现错误

```
...
checking for some Win32 platform... no
checking whether build environment is sane... yes
checking for pkg-config... /usr/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for BASE_DEPENDENCIES... no
configure: error: Package requirements (glib-2.0 >= 2.33.1    atk >= 2.5.3    pango >= 1.30.0    cairo >= 1.10.0    cairo-gobject >= 1.10.0    gdk-pixbuf-2.0 >= 2.26.0) were not met:
No package 'glib-2.0' found
No package 'atk' found
No package 'pango' found
No package 'cairo' found
No package 'cairo-gobject' found
No package 'gdk-pixbuf-2.0' found
Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.
Alternatively, you may set the environment variables BASE_DEPENDENCIES_CFLAGS
and BASE_DEPENDENCIES_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

我尝试通过在其目录中编写 ./configure 来安装其他库。但它无法归档配置文件。

我设置`PKG_CONFIG_PATH`但它无论如何都不起作用

我该如何安装它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-18T16:46:11.103

你应该使用：apt-get install libgtk2.0-dev

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T13:13:14.887

你不需要这`git clone`一步。仅当您想重建 GTK+ 时才需要这样做。

你想要的是你的 Linux 发行版的开发包。在你的包中搜索类似的东西`libgtk*-dev`，然后安装它。这将安装您需要的标头和所需的所有依赖项。此外，`pkg-config`不需要任何提示即可找到`.pc`描述如何针对这些库构建和链接应用程序的文件，因此无需配置`PKG_CONFIG_PATH`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T02:28:50.640

你应该使用这个：

sudo apt-get install libgtk-3-dev

安装 GTK 之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T06:33:07.033

您还可以按照 gnome.org 上的建议使用 jhbuild 它会自动安装依赖项。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-10T18:11:11.367

我已经通过了这个。这是因为没有为编译 gtk 库设置 IDE（在您的情况下为 Code::Bloks）。您需要在终端中手动编译它：

```
gcc `pkg-config --cflags gtk+-2.0` -o nameOfYourFile nameOfYoutFile.c `pkg-config --libs gtk+-2.0` 
```

之后您可以在代码块或终端中运行它。

# r - 将超出范围的值设置为 NA

> ID：14560377
> 
> 赞同：0
> 
> 时间：2013-01-28T10:50:31.583
> 
> 标签：r

我有一个如下所示的数据集。传感器每分钟评估一次数据。 `WEIGHT`是一个因变量。`TIME`表示小时/分钟。这些数据将积累多年。问题是`row[4]`。在这一行，重量有一个奇怪的值（超出范围），这是由传感器错误引起的。您必须提醒，任何人都不能期望什么时候会出现奇怪的值。

我想要的是制作一个如下所示的程序。1\. 使用方法，设置方差范围（设置范围为 10 到 50） 2\. 使用 for(i) 语句，检查方差（权重）是否在范围内。3\. 当方差超出范围时，将 weight[i] 归为 NA。

```
 ID      TIME   WEIGHT
HM001   1223    24.9
HM001   1224    25.2
HM001   1225    25.5
HM001   1226    12233
HM001   1227    25.7
HM001   1228    27.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:04:16.990

如果您的数据位于名为 的数据框中`d`，您可以使用：

```
d$WEIGHT[d$WEIGHT<10 | d$WEIGHT>50] <- NA 
```

`for`对于此类任务，您不应该使用循环，而是使用矢量索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:14:12.427

你可以使用`within`and`is.na<-`来解决这个问题。假设您的数据框被称为`dat`：

```
within(dat, is.na(WEIGHT) <- WEIGHT < 10 | WEIGHT > 50)

     ID TIME WEIGHT
1 HM001 1223   24.9
2 HM001 1224   25.2
3 HM001 1225   25.5
4 HM001 1226     NA
5 HM001 1227   25.7
6 HM001 1228   27.1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T15:20:35.790

因为我无法抗拒：

```
fooweight<-runif(1e6)
wfun1<-function(x) x[x<.1 | x>.5] <- NA
wfun2<-function(x)  is.na(x) <- (x < .10 | x > .50)
microbenchmark(wfun1(fooweight),wfun2(fooweight),times=100)

Unit: milliseconds
              expr      min       lq   median       uq      max
1 wfun1(fooweight) 45.00671 47.68492 49.27120 50.28852 152.4313
2 wfun2(fooweight) 47.74992 51.05204 51.89938 53.00629 156.0306 
```

对不起，斯文，你输给朱巴大约 5% :-)

# sql - 如何在两个表上触发？

> ID：14560380
> 
> 赞同：1
> 
> 时间：2013-01-28T10:50:37.490
> 
> 标签：sql, postgresql

我有两个使用 jdbc 插入的表。例如它`parcelsTable`和`filesTable`我有一些情况：
1\. 在两个表中插入新行。
2\. 仅在 中插入新行`parcelsTable`。

表格：

```
DROP parcelsTable;
CREATE TABLE(
 num serial PRIMARY KEY,
 parcel_name text,
 filestock_id integer
)

DROP filesTable;
CREATE TABLE(
 num serial PRIMARY KEY,
 file_name text,
 files bytea
) 
```

我想设置`parcelsTable.filestock_id=filesTable.num`当我使用 TRIGGER 在两个表中都有 INSERT 时。
这是可能的？如何知道我在两个表中都插入了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:04:43.997

这可能不是一个答案，但它可能是你需要的。我将其作为答案而不是评论，因为我需要空间。

我不知道您是否可以在两个表上设置触发器。通常这不是必需的。与您的情况一样，通常您正在创建父记录和子记录，或者您只是创建现有记录的子记录。

因此，通常，如果您在创建两者时都需要触发器，则将触发器放在父记录上就足够了。

我不认为你可以做你需要的。您要做的是在同一事务中使用父记录主键填充外键。我不认为你能做到这一点。我认为您必须在 parcelsTable 的插入中提供外键。

当您在 parcelsTable 中创建记录时，有时您不会在 filesTable 中创建记录，最终会留下此 NULL。所以我想你会想在 INSERT 语句中设置外键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:09:36.783

在这种情况下，您不需要使用触发器来获取外键值。由于您已将其设置为`serial`您可以使用[`currval`](http://www.postgresql.org/docs/9.2/static/functions-sequence.html). 从你的应用程序中运行这样的东西：

```
insert into filesTable (file_name, files) select 'f1', 'asdf';
insert into parcelsTable (parcel_name, filestock_id) select 'p1', currval('filesTable_num_seq'); 
```

请注意，这仅应在一次插入一条记录以从`currval`. 我正在调用 的默认序列名称`table_column_seq`，除非您明确声明了不同的内容，否则您应该可以使用它。

我还建议明确声明可空性和关系：

```
CREATE TABLE parcelsTable (
  ...
  filestock_id integer NULL REFERENCES filesTable (num)
); 
```

这是[SqlFiddle](http://www.sqlfiddle.com/#!12/74b7a/1)的工作演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:17:47.093

我现在唯一的想法是您可以创建对表进行间接插入的函数。然后你可以有你需要的任何条件，也可以使用平行插入。

# excel - 使用 Perl 在 Excel 2010 工作表上保存 AsXMLData

> ID：14560381
> 
> 赞同：2
> 
> 时间：2013-01-28T10:50:41.960
> 
> 标签：excel, perl, save-as

我有一个 Excel 2010 电子表格，其中定义了一个 XML 映射。使用 Perl 我想将工作表保存为 XML 数据。我不需要导出 XML 映射文件。在 Excel 中，我可以选择“文件 > 另存为 > 另存为类型：XML 数据”。这是我要创建的输出，但来自我的 Perl 脚本。

我可以使用 enum 6 的命令以 CSV 格式输出工作表`SaveAs`。我还可以使用 enum 46 以 XML 格式输出电子表格`SaveAs`，但这不是我想要的。我只想要 XML 数据..

似乎有一个`SaveAsXMLData`功能，但我无法让它工作。任何帮助表示赞赏。

```
use strict;
use warnings;

use Win32::OLE qw(in with);
use Win32::OLE::Const 'Microsoft Excel';
use Win32::OLE::Variant;
use Win32::OLE::NLS qw(:LOCALE :DATE);

$Win32::OLE::Warn = 3; # Die on Errors.

my $Excel = Win32::OLE->GetActiveObject('Excel.Application')
            || Win32::OLE->new('Excel.Application', 'Quit');

$Excel->{DisplayAlerts}=0;

my $excel_file = 'c:\\temp\\master.xlsx';
my $csv_file   = 'c:\\temp\\master.csv';
my $xml_file   = 'c:\\temp\\master.xml';

my $workbook = $Excel->Workbooks->Open($excel_file);

# Alt+F11 in Excel to start VBA and after that F2 to start Object browser.
# 6 is CSV format
# 46 is XML spreadsheet
$workbook->SaveAs( $csv_file, 6 );

# Now just the XML Data
# The map is called MDBAC_Map
my $objMapToExport = $Excel->Workbooks->XmlMaps("MDBAC_Map");
$workbook->SaveAsXMLData( $xml_file, $objMapToExport );

$workbook->Close();
$Excel->Quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:14:28.827

我自己解决了这个问题（我 99% 都在那里！）。使用 Excel 中的宏记录器确认所需的函数调用如下：

```
ChDir "C:\temp"
ActiveWorkbook.SaveAsXMLData Filename:="C:\temp\master.xml", Map:= _
        ActiveWorkbook.XmlMaps("MDBAC_Map") 
```

导出 XML 映射的代码行错误。将上面的代码更改如下，脚本工作正常：

```
my $objMapToExport  = $workbook->XmlMaps("MDBAC_Map"); 
```

# jquery - 文本框只允许字母数字，也允许左箭头（<-）

> ID：14560382
> 
> 赞同：1
> 
> 时间：2013-01-28T10:50:43.817
> 
> 标签：jquery

**要求：**文本框应该只允许字母数字。

**我的问题：** 我的代码只允许使用字母数字。但问题是 leftarrow(<-) 在 google cromo 和 IE 中不起作用。它在 Mozilla Firefox 中工作。对于输入向后的文本，它不允许左箭头（<-）键。我该如何解决。

**代码：**

```
@Html.TextBoxFor(model => model.textId, new
{
   onkeyup = "this.value=this.value.replace(/[^A-Za-z0-9]/g,'');"
}) 
```

# jquery - jQuery - 如何从执行动画中排除 DOM 元素？

> ID：14560385
> 
> 赞同：0
> 
> 时间：2013-01-28T10:50:49.197
> 
> 标签：jquery

我对那个 HTML 代码有疑问。最父 div (class='question-cont') 执行动画 (jQuery `slideToggle()`) 但是，如果我单击`IPSUM`文本，该动画也会被执行。如何排除`div.answer-data-container`执行该动画？

```
<div class='question-cont'>
    <div class='question-toggle-header'>
        <div class='left question-container'>
           <label class='label-none orange-font left'>LOREM</label>
        </div>
    </div>
    <div class='clear'></div>
    <div class='left answer-data-container slider'>
        <div class='q-text'>
            <label class='label-none left'>IPSUM</label>
        </div>
    <div class='clear'></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:55:52.457

因为 IPSUM 是其中的一部分，`question-cont`所以当您点击 IPSUM 时，您也会点击`question-cont`. 你为什么不使用`question-toggle-header`而不是`question-cont`触发`slideToggle`

# mysql - 查询过于密集，服务器无法在 5000 条记录上执行

> ID：14560387
> 
> 赞同：0
> 
> 时间：2013-01-28T10:51:00.183
> 
> 标签：mysql

我有一个查询，它根据所涉及的销售、销售项目和员工构建一行销售信息。它在销售量为 10-20 的开发服务器上运行良好，但在销售量超过 5,000 的终端服务器上运行时，它会使整个系统停止运行。

```
SELECT Sales.SaleID,
Sales.StaffID,
Sales.CustomerID,
Sales.Timestamp,
Sales.Refunded,
Sales.PaymentType,
Staff.Forename AS staffForename,
Staff.Surname AS staffSurname,
itemList, sumOfCost,
sumOfPrice,
a.sumOfPrice - a.sumOfCost AS sumOfProfit

FROM Sales
INNER JOIN Staff ON Sales.StaffID = Staff.StaffID
LEFT JOIN (
              SELECT SaleID,
              GROUP_CONCAT(Quantity, ' x ', Name) itemList,
              SUM(Cost*Quantity) sumOfCost, SUM(Price*Quantity) sumOfPrice
              FROM SaleItems GROUP BY SaleID
          ) a
ON a.SaleID = Sales.SaleID

WHERE Sales.Deleted = '0'
AND Sales.ShopID = '0'
ORDER BY Sales.Timestamp DESC LIMIT 0,15 
```

任何帮助将不胜感激！此查询的最后一次尝试耗时 65 秒...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:22:13.990

我只是疯了，还是这正是我需要的？

```
SELECT Sales.SaleID,
Sales.StaffID, 
Sales.CustomerID, 
Sales.Timestamp, 
Sales.Refunded, 
Sales.PaymentType, 
Staff.Forename AS staffForename, 
Staff.Surname AS staffSurname, 
GROUP_CONCAT(SaleItems.Name) AS ItemList, 
SUM(Cost) AS sumOfCost, 
SUM(Price) AS sumOfCost, 
SUM(Price) - SUM(Cost) AS sumOfProfit 
FROM Sales 
JOIN Staff ON Sales.StaffID = Staff.StaffID 
JOIN SaleItems ON Sales.SaleID = SaleItems.SaleID 
WHERE Sales.Deleted = '0' 
AND Sales.ShopID = '0' 
GROUP BY SaleItems.SaleID 
ORDER BY Sales.Timestamp DESC 
LIMIT 0,15 
```

它似乎给出了正确的结果，但似乎不那么令人费解，因此我以前没有看到它有点令人困惑？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:46:51.833

首先，您没有子查询（在我看来）。对我来说，子查询是一个依赖于查询中另一个表的记录并针对每一行进行处理的查询。您的版本只是一个完整的查询运行一次，获得完整的结果集，然后将其作为连接到其他表的基础。

接下来，您的所有表都应具有其他人在评论中所述的明显索引，例如处理您的所有 JOIN 条件（加入员工 ID、销售 ID 等）。但是，您还应该有一个索引来帮助优化您的 CRITERIA ......在这种情况下，我会有一个索引

```
(Deleted, ShopID, SaleID ) 
```

包含“SaleID”列的原因是用于优化 GROUP BY 和 ORDER BY 子句。看来您只需要最近的 15 次销售。由于时间戳将直接与销售交易相关联，这意味着 SaleID #1 在 SaleID #2 之前有一个时间戳，对于 Sale ID #3、#4、#5 分别以此类推。也就是说，我只需要按销售 ID DESCENDING 完成相同结果的订单。

现在，供您查询。您最初拥有的是一个预查询，它汇总了所有销售、每个项目的各自成本和价格。这可能就是扼杀你的表现的原因。只有这样，您才会丢弃所有不符合您最外层 WHERE 标准的记录。

所以现在你知道我来自哪里，我会做以下事情。我的“PreQuery”不过是从销售表中选择，以获取您的已删除标准和商店 ID 的最近 15 次销售，但按销售 ID 降序排序（与上述示例中的时间戳基本相同）......并且将其限制为 15。然后，完成您的加入和分组，以便您只聚合与 15 个销售相关的行项目，而不是整个销售数据库。由于“PreQuery”已经预先订购了最新的，我们不必重新排序外部结果集。

我确实需要将 group-by 保留在外部级别，因为您可能有 10 个订单项用于单个销售 ID，并且只想显示销售的最终总计条目。

```
 SELECT 
          S.SaleID,
          S.StaffID,
          S.CustomerID,
          S.Timestamp,
          S.Refunded,
          S.PaymentType,
          Staff.Forename AS staffForename,
          Staff.Surname AS staffSurname,
          GROUP_CONCAT(SI.Quantity, ' x ', SI.Name) itemList,
          SUM(SI.Cost*SI.Quantity) sumOfCost, 
          SUM(SI.Price*SI.Quantity) sumOfPrice,
          SUM(SI.Price*SI.Quantity) - SUM(SI.Cost*SI.Quantity) AS sumOfProfit
       FROM 
          ( select Sales.SaleID
               FROM Sales
               WHERE Sales.Deleted = '0'
                  AND Sales.ShopID = '0'
               ORDER BY 
                  Sales.SaleID DESC 
               LIMIT 
                  0,15 ) PreQuery
             JOIN Sales S
                on PreQuery.SaleID = S.SaleID
                JOIN SaleItems SI
                   ON Sales.SaleID = SI.SaleID
                JOIN Staff 
                   ON S.StaffID = Staff.StaffID
   group by
      S.SaleID 
```

# javascript - Extjs 和 Grails 我如何防止祖先

> ID：14560392
> 
> 赞同：1
> 
> 时间：2013-01-28T10:51:18.497
> 
> 标签：javascript, grails, extjs4.1

我工作的一个项目是服务器站点是 Grails，客户端站点是 Extjs4.1，我使用关系数据库。在这种情况下，我工作正常，但是当我打电话给商店时，我遇到了一些问题。这个问题基于父母。当我像下面这样打电话给商店时......然后我必须打电话给它的父母，但我不想打电话给它的父母......

```
def stote(){        
    def prices = []
    Price.getAll()?.each{ v ->
        def a = v.article,
        b     = a.brand,
        bt    = b.brandType,
        gp    = b.genericProducts,
        c     = gp.categories,
        m     = b.manufacturers

        def manufacture     = [id:m.id,     name:m.name]
        def category        = [id:c.id,     name:c.name]
        def genericProduct  = [id:gp.id,    name:gp.name, m01i001001:category]
        def brandType       = [id:bt.id,    name:bt.name]
        def brand           = [id:b.id, name:b.name, m01i002001:manufacture, m01i003001:genericProduct, m01i004001:brandType]
        def article         = [id:a.id, name:a.name, mbcode:a.mbcode, pbcode:a.pbcode, details:a.details, m01i005001:brand]
        def price           = [id: v.id, m01i006001:article, price:v.price, date:v.date]
        prices << price
    }
    return prices
} 
```

这些属于关联键 m01i001001, m01i002001, m01i003001,m01i004001,m01i005001,m01i006001

我的归属喜欢

```
 belongsTo : [{
  model          : '${pkgName}.M01I005001',
  associatedName : 'M01I005001' ,
  associationKey : 'm01i005001' , 
  primaryKey     : 'id' , 
  foreignKey     : 'brandId'     
}], 
```

我想像这家商店一样打电话...

```
def stote(){        
    def prices = []
    Price.getAll()?.each{ v ->
        def a = v.article

        def article         = [id:a.id, name:a.name, mbcode:a.mbcode, pbcode:a.pbcode, details:a.details]
        def price           = [id: v.id, m01i006001:article, price:v.price, date:v.date]
        prices << price
    }
    return prices
} 
```

但是当我打电话给这家商店时，客户端加载问题。我不能偷懒它的父母。它的节目总是渴望的。

如果您有任何解决此错误的想法，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:59:58.583

这不是解决方案。我为此创建了一个代理模型，我删除了所有不必要的关系然后我解决了我的问题，这意味着我只保留一个属于所以只保留一个关联键。

# json - SSL 证书到 JSON

> ID：14560393
> 
> 赞同：5
> 
> 时间：2013-01-28T10:51:19.623
> 
> 标签：json, unix, escaping, ssl-certificate

我需要通过 JSON 将 SSL 证书作为字符串发送到我的服务器。在服务器上，我需要将 JSON 字符串重建为有效证书。我的问题是证书中的空格和刹车线。

如何保留证书的正确格式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T10:02:27.357

问题确实与空白和线路刹车有关。

这对我有用：

1.  将证书复制到单行文本字段中。不是很优雅，但它是一种快速制作单行字符串的方法。我猜大多数文本编辑器也可以做到这一点。

2.  用“\n”替换了线刹车（现在是空格）。不要替换`-----BEGIN RSA PRIVATE KEY-----`它们可以保持原样的短语之间的空格。

例子：

```
{
"key": "-----BEGIN RSA PRIVATE KEY-----\njlQvt9WdR9Vpg3WQT5+C3HU17bUOwvhp/r0+viMcBUCRW85UqI2BJJKTi1IwQQ4c\ntyTrhYJYOP+A6JXt5BzDzZy/B7tjEMDBosPiwH2m4MaP+6wTbi1qR1pFDL3fXYDr\n"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-27T05:05:32.273

另一种方法是在客户端对证书进行 base64 编码并在服务器上对其进行解码。这避免了添加换行符但保留格式的所有麻烦，类似于 kubernetes 机密

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T19:28:02.853

我会提供更细致的解释。json 序列化字符串转义换行符和其他一些字符。但是 json 字符串可以毫无问题地保存 PEM 编码的证书。这里出现的唯一麻烦是必须做一些工作来手动构建 json。我不会推荐这种方法。可以使用常用工具轻松支持此用例。例如，以下显示了证书的检索、嵌入到 json、解析 json、提取证书并最终由 openssl 解析：

```
openssl s_client -showcerts -connect google.com:443 </dev/null 2>/dev/null|openssl x509 -outform PEM | python3 -c "
import sys
import json
body = {}
body['cert'] = sys.stdin.read()
json.dump(body, sys.stdout)
" | python3 -c "
import sys
import json
body = json.load(sys.stdin)
print(body['cert'])
" | openssl x509 -text; echo $?
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            fa:bc:89:f7:bf:33:10:94:0a:00:00:00:01:25:fd:32
        Signature Algorithm: sha256WithRSAEncryption
...
0 
```

# wpf - WPF：如何使用 Style.Triggers

> ID：14560395
> 
> 赞同：0
> 
> 时间：2013-01-28T10:51:23.940
> 
> 标签：wpf, binding, datatrigger

我想实现（文件）资源管理器，如图标显示。这些项目有日期和标签。

用户应该能够编辑标签：

*   选择一个项目
*   点击标签
*   Label 的 TextBlock 替换为 TextBox 进行编辑

如何结束编辑（仅供参考）：

*   单击文本框外的任意位置
*   按 Enter 键盘键（通过实施 ICommand？）

第一次我尝试在代码中设置 TextBlock 和 TextBox 的可见性，发现这不是“正确”的做法。也许可以使用（数据）触发器编辑项目的标签？

我可以跟踪 OnClickLabelBlock 并设置 selectedMedia.IsEditing = true; 但它不会触发触发器。知道为什么 MediaItem.IsEditing 属性值更改会通知 DataTrigger 吗？与执行顺序或优先级机制有关吗？

我将选择引导我找到“最佳”架构来解决它的答案。

谢谢。

XAML：

```
<Window x:Class="WPFComponents.DailyImages"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Model="clr-namespace:WPFComponents.Model"
    Title="Media Items" Height="300" Width="300">

<ListView x:Name="_mediaItemList" ItemsSource="{Binding MediaItems}"
          ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionMode="Multiple">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
        </Style>
    </ListView.ItemContainerStyle>

    <ListView.ItemTemplate>
        <DataTemplate DataType="Model:MediaItem">

            <Grid Width="80" Margin="4">
                <Grid.RowDefinitions>
                    <RowDefinition></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>
                <Image HorizontalAlignment="Center" Stretch="Uniform" Source="{Binding Path=IconPath}" Width="70" />

                <StackPanel Grid.Row="2">
                    <TextBlock Text="{Binding Path=Date}" TextWrapping="Wrap" />

                    <TextBlock x:Name="_labelTextBlock" Text="{Binding Path=Label}" TextWrapping="Wrap"
                               PreviewMouseLeftButtonDown="OnClickLabelBlock">
                    </TextBlock>

                    <TextBox x:Name="_labelTextBox" Text="{Binding Path=Label}" Visibility="Collapsed"
                             TextWrapping="WrapWithOverflow" TextAlignment="Center">
                    </TextBox>
                </StackPanel>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsEditing}" Value="True">
                    <Setter TargetName="_labelTextBlock" Property="Visibility" Value="Collapsed" />
                    <Setter TargetName="_labelTextBox" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </DataTemplate.Triggers>

        </DataTemplate>
    </ListView.ItemTemplate>

    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel IsItemsHost="True" VerticalAlignment="Top" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>

</ListView> 
```

来源：

```
public partial class DailyImages
{
    public DailyImages()
    {
        InitializeComponent();

        ViewModel.DailyImages dailyImages = new ViewModel.DailyImages();
        // DailyImages has ObservableCollection<MediaItem> MediaItems property
        _mediaItemList.DataContext = dailyImages;
    }

    private void OnClickLabelBlock(object sender, MouseButtonEventArgs e)
    {
        TextBlock notes = sender as TextBlock;

        if (notes == null)
            return;

        MediaItem selectedMedia = notes.DataContext as MediaItem;

        if (selectedMedia == null)
        {
            // TODO: Throw exception
            return;
        }
        _mediaItemList.SelectedItems.Clear();
        selectedMedia.IsSelected = true;
        selectedMedia.IsEditing = true;
    }

public class MediaItem
{
    public MediaItem()
    {
        IsEditing = false;
        IsSelected = false;
    }

    public DateTime Date { get; set; }
    public string Label { get; set; }
    public string IconPath { get; set; }
    public bool IsEditing { get; set; }
    public bool IsSelected { get; set; }
} 
```

参考： [依赖属性值优先级](http://msdn.microsoft.com/en-us/library/ms743230.aspx)

第二部分：[ListView & File Explorer Like 行为](https://stackoverflow.com/questions/14588336/wpf-listview-file-explorer-like-behaviour)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:55:04.163

MediaItem 必须实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)并且它的每个必须绑定的属性都必须调用 RaisePropertyChanged 才能使绑定正常工作。在您的情况下， IsEditing 上的 Binding 无法知道该值已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:55:46.870

若要绑定您的 IsEditing 属性，必须在 WPF 被修改时通知它。

然后你必须`INotifyPropertyChanged`在`MediaItem`. （或添加依赖属性）

```
public class MediaItem : INotifyPropertyChanged
{
    public MediaItem()
    {
        IsEditing = false;
        IsSelected = false;
    }

    // Use the same pattern for Date, Label & IconPath if these value may change after the MediaItem instance has been added to the collection MediaItems.
    public DateTime Date { get; set; }
    public string Label { get; set; }
    public string IconPath { get; set; }

    private bool isSelected;
    public bool IsSelected
    {
        get { return isSelected; }
        set
        {
            if (isSelected != value)
            {
                isSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }
    }

    private bool isEditing;
    public bool IsEditing
    {
        get { return isEditing; }
        set
        {
            if (isEditing != value)
            {
                isEditing = value;
                OnPropertyChanged("IsEditing");
            }
        }
    }

    #region INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion
} 
```

否则，您的代码是正确的。

# php - 框架上的下拉菜单？

> ID：14560398
> 
> 赞同：0
> 
> 时间：2013-01-28T10:51:31.040
> 
> 标签：php, javascript, html, css, drop-down-menu

我的页面上有 2 个 iframe。一个是菜单窗格 (frame1)，另一个是内容窗格。菜单框架高度为 100 ，其余为 content frame ，由于各种原因，我无法更改 frame1 的高度。我在菜单框架中使用了 CSS 下拉菜单，当我使用菜单框架高度为 200 或 300 时，下拉菜单正确显示，但高度小却无法显示。

我需要做什么才能在 frame1 中显示主菜单并在 frame2 中显示下拉子菜单？听说叫跨框下拉菜单。请让我知道如何解决我的问题。我对 HTML、CSS、JavaScript 和 PHP 没问题。希望我能用这四种语言解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:54:11.970

我认为不使用框架是最好的答案。网站通常更易于访问和用户友好，如果您按照它们的设计意图设计它们而不是破解东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:37:11.350

您可以使用 jquery`$("#iframe_id").contents().find('#some_element')`从父元素访问第二个 iframe 中的元素，并且可以从 frame1 访问父 js 函数`parent.yourFunction()`。
嗯。像这样：
在 frame1：
`<div class='menu_btn' onclick='parent.openMenu();'></div>`
在父级中：

```
function openMenu() {  
$("#iframe2").contents().find('#some_element').show();
} 
```

**虽然解决方案很奇怪。
我建议您考虑更改所有页面视图，摆脱框架。**

# javascript - 当对象在范围之外更新时如何更新angularJS中的视图

> ID：14560401
> 
> 赞同：1
> 
> 时间：2013-01-28T10:51:37.667
> 
> 标签：javascript, html, angularjs

我在 AngularJS 范围之外有一个对象，看起来像：

```
obj = { isBig : true, name: "John" ... } 
```

它有很多参数，它是在 angular 范围之外创建的，它在 angularJS 之外更新（例如 - 通过我使用 jQuery 进行的 ajax 调用）。

在我的控制器里面我写：

```
$scope.obj = obj; 
```

**如何创建一个监听任何对象更改并更新视图的事件？所以事件是对象的变化**

具体来说，我有一个名为的参数`obj.isAjaxCallFailed = true/false`，我在视图中将其用作`<div ng-show="obj.isAjaxCallFailed"></div>`

它不工作。我尝试使用`$on`，但我想不出任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:11:16.990

使用`$watch()`on`obj`监听变化（在你的**控制器**中）：

```
$scope.$watch(function() {
   return obj;
}, function(value) {
   if(value) {
      $scope.obj = obj;
   }
}, true); 
```

在您的代码中您创建或更新的地方`obj`，您可以`$rootScope.$apply()`用来启动手表：

```
function someCallbackOutsideAngular(data) {
   var $rootScope = angular.injector(['ng']).get('$rootScope');
   $rootScope.$apply(function() {
      obj.someKey = data.someValue;
   });
} 
```

注意：`angular.injector(['ng'])`可能应该设置在回调之外的某个地方（不需要一直执行它）。

# cocos2d-iphone - 设备 (iPhone/iPad) 上 Cocos2d/Box2d 应用程序中的内存警告

> ID：14560405
> 
> 赞同：2
> 
> 时间：2013-01-28T10:51:46.343
> 
> 标签：cocos2d-iphone

这是 Xcode 中**profile->leaks**的信息，我在 iPad 2 上运行了大约 21 分 12 秒，然后崩溃了。

实时字节 ---- 5.45 MB

生活----13547

暂态---- 3845036

总字节数——720.31 MB

当应用程序在设备上运行时，应用程序在控制台中打印**Received Memory Warning时崩溃。**

我不太确定它是如何工作的。

但是请告诉我，如果一个应用程序在设备上运行了 21 分钟，在此运行期间总共使用了大约 720 MB 的内存，但实时字节永远不会超过 7.0 MB。

**我接受该应用程序首先使用 3.25 MB 作为活动字节，并且在此运行期间它的活动字节变为 5.45 MB，我不太确定活动字节如何继续像这样增加。**

但我的问题是：

在设备上运行时，它是否足以导致崩溃的应用程序？

或者

我是否面临其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:50:48.527

您可能会在 CCTextureCache 单例中留下大量的精灵。每次创建 CCSprite 时，都会缓存（静默）纹理，以便下次引用它时，加载和呈现会更快（快得多）。在模拟器中运行分配分析（参见下面的两张图片）：

![在设备中运行](../Images/f526b87ca191be131b0736ab42150bd6.png)

和

![这在模拟器中运行](../Images/1cbffcd88f1a686ce45f84884cb47c8b.png)

顶部图像来自设备上的分配分析。最大内存 4.4 Mb。

底部图像是相同的应用程序，相同的游戏序列，同时在模拟器中进行分析（峰值约为 78 Mb）。通过在模拟器中运行，我可以在分配中看到我的精灵使用的内存。在设备中，分配工具不占用此内存。

您正在寻找趋势和离散的大跳跃。如果您再也没有回来，您可能会留下未使用的精灵。就我而言，我选择在游戏执行的特定点从纹理中释放特定资源。这是来自 appController 的示例

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    MPLOGERROR(@"Before purge");
    [[CCTextureCache sharedTextureCache] dumpCachedTextureInfo];

    [CCAnimationCache purgeSharedAnimationCache];
    [[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
    [[CCDirector sharedDirector] purgeCachedData];

    MPLOGERROR(@"%After purge");
    [[CCTextureCache sharedTextureCache] dumpCachedTextureInfo];

} 
```

这是最后一搏，蛮力清理。但是您可以在游戏过程中移除不同时间点的特定纹理，而不会影响应用程序的“感知”响应能力。缓存在原则上通常是合理的，但在资源受限时会迅速变得棘手。了解它，进行实验，最终您会找到“什么保持/什么继续”的正确组合，以实现流畅的应用程序性能。

附言。尽管模拟器对于某些测试很好，但不要将其“性能”用作基准。模拟器性能在图形方面毫无意义，它不使用您计算机的 GPU（这就是您看到图形内存分配的原因:)）。

# java - Jackson 取负值并转换为有效日期

> ID：14560408
> 
> 赞同：0
> 
> 时间：2013-01-28T10:51:54.000
> 
> 标签：java, json, datetime, jackson

我在序列化和反序列化时都将**SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS**设置为**FALSE**。

我从 JSON 传递“2012-04-18T19:50:00”格式的日期。当 JSON 输入包含大于零的数字时，我没有问题。但是，当我尝试以负数传递日期时遇到问题（例如 - **“2012-01-28T-1:-1:00”**）。这将转换为**"Jan 27, 2013 10:59:00 PM"**。

如何明确指定杰克逊只接受日期的正值？或者是否有任何解决方法可以停止从 JSON 中为 Date 对象接收负值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:51:19.890

您可以定义`DateFormat`用于解析，然后应该限制有效的表达式。

# java - 使用 MySQL 数据库创建 jar 到 exe

> ID：14560410
> 
> 赞同：0
> 
> 时间：2013-01-28T10:52:02.207
> 
> 标签：java, mysql, swing, deployment, installation

如何创建包含 MySql DB 的安装程序 exe 文件？将数据库与我的应用程序一起安装的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:14:21.643

> 是的，我有 GUI，..

然后你需要[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)来部署它（到 Windows、OS X 和 *nix）。

JWS 提供了`ExtensionInstallerService`可用于调用数据库安装程序的 ，以及`PersistenceService`用于存储任何连接详细信息的 。见演示。两者都在[Java Web Start 示例](http://pscode.org/jws/api.html)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:13:17.923

您可以使用两种不同的技术，一种（如[JSmooth](http://jsmooth.sourceforge.net/)）从 jar 中创建一个 exe（此 exe 只是您的 jar 的包装器，将在运行时解压缩），另一种（如[NSIS](http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System)）用于创建“安装程序 exe "：一个安装程序，可以包含您之前创建的 jar-exe 和任何其他程序，例如数据库。

当然，这将是一个仅限 Windows 的解决方案，Windows exe 文件不能在 Linux/Mac 上运行。Jar 文件到处运行（如果安装了 Java）

# python - Python 有时不会将类实例作为第一个参数传递 - 理解 __new__

> ID：14560411
> 
> 赞同：1
> 
> 时间：2013-01-28T10:52:08.293
> 
> 标签：python, python-3.x, python-3.2

我有一个具有如下功能的类：

```
def foo(self):
    do_stuff() 
```

我这样称呼它：

```
instance.foo() 
```

我得到这个错误：

```
TypeError: foo() takes exactly 1 argument (0 given) 
```

但这很好用：

```
instance.foo(instance) 
```

谁能解释为什么会发生这种情况？这让我有点奇怪

如果您需要更多信息，请随时询问

**编辑**这里是实际代码的近似值......

```
def __new__(self):
    blah blah
    MyClass.__init__(self,blah)
    self.foo(self)     #<------------------------error here 
```

我怀疑我误解了它`__new__`的工作原理......我现在正在阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:52:09.603

这里的问题是**新**函数不接受 self 作为参数，因为您正在其中创建一个新对象。第一个参数实际上是类，通常缩写为 cls。

[来源](http://docs.python.org/3/reference/datamodel.html#object.__new__)

修正样本：

```
def __new__(cls):
    blah blah
    obj = MyClass.__new__(MyClass)
    obj.foo()
    return obj 
```

这将创建一个 MyClass 的实例而不是 cls。如果 MyClass 是 cls 的子类，那么它的 init 方法也会被自动调用（参见链接参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:44:18.107

```
class MyClass  
    def __new__(cls):
        blah
        o = object.__new__(cls)
        o.foo()
        return o 
```

`__new__`需要返回一个实例。它将 MyClass 作为参数，而不是 MyClass 的实例。

为了在 中实例化`MyClass`，`__new__`使用`object.__new__`了。这是为了防止无限递归

`__init__``__new__`只要该值是 MyClass 类型，就会在返回值上自动调用。这可以通过使用元类来防止

# mod-perl - mkdir //.ssh：权限在 /usr/lib/perl5/site_perl/5.8.8/Net/SSH/Perl/Util/Hosts.pm 第 92 行被拒绝

> ID：14560412
> 
> 赞同：0
> 
> 时间：2013-01-28T10:52:10.053
> 
> 标签：mod-perl

我在 perl cgi 文件中使用“Net::SFTP”将文件从我的开发盒中放入 Windows M/C。

手动添加以下新目录（具有 0777 权限）后一切正常：

```
bash-4.1$ pwd
/.ssh
-bash-4.1$ cd ..
-bash-4.1$ ls -ltra | grep .ssh
drwxrwxrwx 2 root root 4096 Jan 23 23:57 .ssh 
```

问题（如果我不手动添加上面的目录）根据我的理解：Apache is running cgi with user as "nobody" which does not have permission to make directory after connection is established via sftp and I'm getting below error日志中的消息：

```
xxx.xxx.net: Reading configuration data /.ssh/config
xxx.xxx.net: Reading configuration data /etc/ssh_config
xxx.xxx.net: Connecting to xxx.xxx.xxx.com, port 22.
xxx.xxx.net: Remote protocol version 2.0, remote software version 5.17 FlowSsh: Bitvise SSH Server (WinSSHD) 5.58: free only for personal non-commercial use^M
Math::BigInt: couldn't load specified math lib(s), fallback to Math::BigInt::Calc at /usr/lib/perl5/site_perl/5.8.8/Crypt/DH.pm line 6
xxx.xxx.net: Net::SSH::Perl Version 1.34, protocol version 2.0.
xxx.xxx.net: No compat match: 5.17 FlowSsh: Bitvise SSH Server (WinSSHD) 5.58: free only for personal non-commercial use^M.
xxx.xxx.net: Connection established.
xxx.xxx.net: Sent key-exchange init (KEXINIT), wait response.
xxx.xxx.net: Algorithms, c->s: 3des-cbc hmac-sha1 none
xxx.xxx.net: Algorithms, s->c: 3des-cbc hmac-sha1 none
xxx.xxx.net: Entering Diffie-Hellman Group 1 key exchange.
xxx.xxx.net: Sent DH public key, waiting for reply.
xxx.xxx.net: Received host key, type 'ssh-dss'.
xxx.xxx.net: Permanently added 'xxx.xxx.xxx.com' to the list of known hosts.
**mkdir //.ssh: Permission denied at /usr/lib/perl5/site_perl/5.8.8/Net/SSH/Perl/Util/Hosts.pm line 92** 
```

我试图用互联网上给出的不同方法来解决这个问题，但没有什么对我有用。

有人可以提出可能的解决方案吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:45:52.820

我最近自己也遇到了同样的问题，你说得对，这是一个权限问题。当您的nobody 进程尝试连接到远程服务器时，它希望将远程主机密钥写入文件。这是您的错误消息中失败的步骤（Hosts.pm 第 92 行）。

我的解决方案是为 NET::SFTP 创建一个无人可写的位置以写入 known_hosts 文件，并在构建 NET::SFTP 连接之前指定该位置。

```
$ENV{HOME} =  '/nobody/writable/location/'; 
```

[您可以在http://www.perlmonks.org/?node_id=599078](http://www.perlmonks.org/?node_id=599078)找到有关此问题的更多信息

# javascript - HTML5 Canvas：在画布边缘绘制形状

> ID：14560413
> 
> 赞同：1
> 
> 时间：2013-01-28T10:52:16.623
> 
> 标签：javascript, html, canvas, html5-canvas

我正在创建一个基本游戏，它在画布上的随机位置绘制正方形，但有时形状会被切断，因为它超出了画布的边界。谁能解释我如何才能在画布的另一侧绘制正方形（类似于在[小行星](http://www.play.vg/games/4-Asteroids.html)中的绘制方式）？我提出的搜索没有帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:39:18.033

好的，我想我已经解决了这个问题。基本上，这段代码只在画布内绘制正方形，如果它离开画布，它会检查它离开的边界并更新位置。需要循环变量，因为否则正方形将始终离开画布。

```
var canvas = document.getElementById('bg');
var ctx = canvas.getContext('2d');

var squares = [];
squares[squares.length] = new Square(200, 200, 20, 'red', 0.785398164);

function Square(x, y, size, colour, angle)
{
    this.x = x;
    this.y = y;
    this.size = size;
    this.colour = colour;
    this.speed = 5;
    this.angle = angle;
    this.looped = false;
}

Square.prototype.update = function()
{
    this.x += (Math.cos(this.angle) * this.speed);
    this.y += (Math.sin(this.angle) * this.speed);
    if (this.x < canvas.width && this.x + this.size > 0 &&
        this.y < canvas.height && this.y + this.size > 0)
    {
        this.draw();
        this.looped = false;
    }
    else
    {
        if (this.x > canvas.width && !this.looped)
        {
            this.x = -this.size;
        }
        if (this.x + this.size < 0 && !this.looped)
        {
            this.x = this.size + canvas.width;
        }
        if (this.y > canvas.height && !this.looped)
        {
            this.y = -this.size;
        }
        if (this.y + this.size < 0 && !this.looped)
        {
            this.y = this.size + canvas.height;
        }
        this.looped = true;
    }
}

Square.prototype.draw = function()
{
    ctx.fillStyle = this.colour;
    ctx.fillRect(this.x, this.y, this.size, this.size);
}

function gameLoop()
{
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (var i = 0; i < squares.length; i++)
    {
        squares[i].update();
    }
    requestAnimationFrame(gameLoop);
}

gameLoop();

(function()
{
    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x)
    {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame) window.requestAnimationFrame = function(callback, element)
    {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function()
        {
            callback(currTime + timeToCall);
        }, timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

    if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function(id)
    {
        clearTimeout(id);
    };
}()); 
```

我会做一个 JSFiddle，但 requestAnimationFrame 不能很好地配合它。

# c# - 如何从模型列表中获取最后一个值而不在 MVC 中循环它？

> ID：14560419
> 
> 赞同：3
> 
> 时间：2013-01-28T10:52:31.060
> 
> 标签：c#, linq, asp.net-mvc-4

在这里，我需要从视图中的模型列表中获取最后一个值而不循环它..这是我的控制器代码

```
public IList<ProductDetailModel> GetWPDetails()
            {
                ProductDetailModel Viewmodel;
                string funname = "GetCSpecialWPDetails";
                List<ProductDetailModel> getWPDetails = new List<ProductDetailModel>();
                getWPDetails = objrest.EcommerceWPDetails(funname);
                List<ProductDetailModel> WPDetails = new List<ProductDetailModel>();

                foreach (var item in getWPDetails)
                {
                    Viewmodel = new ProductDetailModel();
                    Viewmodel.Productid = item.Productid;
                    Viewmodel.ProductName = item.ProductName;
                    Viewmodel.CategoryID = item.CategoryID;
                    Viewmodel.ProductRate = item.ProductRate;
                    Viewmodel.DiscountRate = item.DiscountRate;
                    Viewmodel.imageurl1 = item.imageurl1;
                    WPDetails.Add(Viewmodel);
                }
                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnection"].ConnectionString);
                SqlCommand cmd = new SqlCommand("SELECT ThemeColor,LayoutDesign FROM dbo.Cpecial_Partner_Design WHERE [PartnerID]='" + Partid + "'", con);
                con.Open();

                using (SqlDataReader myReader = cmd.ExecuteReader())
                {
                    while (myReader.Read())
                    {
                        Viewmodel = new ProductDetailModel();
                        Viewmodel.ThemeColor = myReader["ThemeColor"].ToString();
                        Viewmodel.LayoutDesign = myReader["LayoutDesign"].ToString();
                        WPDetails.Add(Viewmodel);
                    }

                    myReader.Close();
                }
                con.Close();
                return WPDetails;

            } 
```

在这里，我通过循环模型来获取值，总计数为 47，但我需要的是我只需要第 47 个值，即最后一个值，没有任何循环。

查看代码

```
 @foreach (var item in Model)
       {
        @Html.EditorFor(modelItem => item.ThemeColor)
        @Html.EditorFor(modelItem => item.LayoutDesign)
       } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T10:56:11.840

使用 linq！在你的情况下[.Last()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last.aspx)方法。

尝试：

```
@{ var last = Model.Last(); }
@Html.EditorFor(modelItem => last.ThemeColor)
@Html.EditorFor(modelItem => last.LayoutDesign) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:54:45.810

你的模型似乎是一个 IList<>，所以我建议简单地使用这个：

```
var last;
if (Model != null && Model.Count > 0) last = Model[Model.Count - 1];
else
... 
```

# file - 文件保存在文件夹外，如何保存

> ID：14560422
> 
> 赞同：0
> 
> 时间：2013-01-28T10:52:35.403
> 
> 标签：file, lua, coronasdk, luafilesystem

我想将我的文件保存在一个文件夹中，但提出的问题是我的文件存储在文件夹之外，这很烦人。我正在分享我到目前为止所做的事情。

```
-- get raw path to app's Temporary directory
local doc_path = system.pathForFile( "", system.DocumentsDirectory )

-- change current working directory
local success = lfs.chdir( doc_path ) -- returns true on success
local new_folder_path

if success then
lfs.mkdir( "MyNewFolder" )
new_folder_path = lfs.currentdir() .. "/MyNewFolder"
end

local filePath = system.pathForFile( dataFileName , new_folder_path )
r = media.newRecording(filePath)
--print("new recording has been started with a name"..dataFileName)
r:startRecording() 
```

但是我录制的文件不在这个新创建的文件夹中，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:26:12.797

我搜索了一下，终于得到了问题的答案。这是如何在指定文件夹中创建新录音

```
r = media.newRecording( new_folder_path.."/"..dataFileName ) 
```

如问题中所述，此行将自动在此文件夹中创建一个文件。 `system.pathForFile()`只有当第二个参数是一个基本目录时才会自动创建一个文件`system.DocumentsDirectory`（因为它在文档中明确提到第二个参数是常量并且它应该只是任何基本目录）。因此，如果您想创建一个新文件 r 想查找文件的路径，您可以在文件名之前附加文件夹名称，例如`my folder/my file` 希望这会有所帮助

# ios - UISplitViewController 中的 masterViewController 未显示

> ID：14560427
> 
> 赞同：2
> 
> 时间：2013-01-28T10:52:51.850
> 
> 标签：ios, ipad, uitabbarcontroller, uisplitviewcontroller

我有一个带有 3 个选项卡的 tabbarcontroller，它们是 splitviewcontrollers。它工作正常，除非：

1.  在纵向视图中，点击 rootview 按钮以显示主弹出窗口。
2.  切换到任何其他选项卡
3.  旋转到横向（出现该选项卡的 masterview 控制器）
4.  切换回第一个选项卡，详细视图控制器位于正确位置（距左边框 320 像素），但主视图我有一个黑屏

我枚举了 splitviewcontroller 子视图，但 masterview 不存在。

如果我以纵向和横向旋转设备，则会出现主视图。

我试图用这张图片更好地解释：

![在此处输入图像描述](../Images/06ec94c294124255d05e31b6fe70544e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T16:27:59.083

在我看来，这个问题可能是由你所有的 UISplitViewControllers 使用相同的委托引起的，可能是你的 AppDelegate。这可能会导致您看到的行为，因为当一个 UISplitViewController 从返回 false 时`collapseSecondaryViewController:ontoPrimaryController`，它​​们都将返回 false，从而为您提供左侧的填充以为 masterViewController 腾出空间。但是您不活动的 UISplitViewControllers 没有显示 masterViewController，因此您得到一个空白区域，而不是您期望的。

# kendo-ui - kendo Treeview 数据源绑定

> ID：14560431
> 
> 赞同：0
> 
> 时间：2013-01-28T10:53:00.490
> 
> 标签：kendo-ui, kendo-treeview

我有主页：main.html

在此页面中，我有一个带有分层数据源的视图模型

```
datasource: [{id:"", items:[{.....}]}]; 
```

在模态窗口中，我有一个 Treeview。Treeview 在主页中调用数据源。

在我的数据源中有一个变量检查​​：真/假

我希望当我在树视图中选中或取消选中一个复选框时，这会绑定一个数据源。所以当我关闭一个模式窗口并重新打开它时，我会发现选中/未选中的复选框已恢复......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:27:00.610

如果你有这样的 HTML：

```
<div id="win" class="k-content">
    <div id="treeview"></div>
</div> 
```

如果你有一个`kendoWindow`which id`win`包含一个`kendoTreeView`with id `treeview`，你应该使用以下方法初始化它们：

```
var treeview = $("#treeview").kendoTreeView({
    checkboxes: {
        checkChildren: true
    },
    dataSource: data
}).data("kendoTreeView");

var kwin = $("#win").kendoWindow({
    visible  : true,
    modal    : true,
    resizable: false
}).data("kendoWindow"); 
```

无论`DataSource`for`tree`是本地（数组）还是远程。由于您不会破坏窗口，而只是打开和关闭，因此数据始终存在。

[在此处](http://jsfiddle.net/OnaBai/q6qpc/)运行示例

# windows - utf8 字符串在变量中的无效转换

> ID：14560432
> 
> 赞同：1
> 
> 时间：2013-01-28T10:53:01.787
> 
> 标签：windows, string, unicode, d

这里的效果是消息文本在希腊字母中是正确的，但消息标题都是空框，有时与其他文本有中文字符。

```
string msg= "ένα μήνυμα";
MessageBoxW(null, "ένα μήνυμα", cast(wchar*)msg.toStringz, MB_ICONERROR); 
```

![在此处输入图像描述](../Images/277383d921669893acaae0f7817d2705.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:57:33.880

在将 a 转换为 a而不是强制转换时，您需要使用[`toUTF16z`](http://dlang.org/phobos/std_utf.html#.toUTF16z)(from `std.utf`) ：`string``LPCWSTR`

```
MessageBoxW(null, "ένα μήνυμα", toUTF16z(msg), MB_ICONERROR); 
```

您不需要对字符串文字做任何事情，因为编译器会通过查看`MessageBoxW`的参数类型自动创建一个 UTF-16 常量。

# python - PySide/Cython 和 GIL 多线程使用

> ID：14560435
> 
> 赞同：3
> 
> 时间：2013-01-28T10:53:04.710
> 
> 标签：python, multithreading, qt, pyside, cython

我已经为**PySide/Cython**多线程应用程序苦苦挣扎了好几天。
将问题拆分为多个部分，我进行了一项使用 valgrind/helgrind 运行的测试（请参阅下面的一个错误条目）。
C 函数（`load`下面的 CHLone）使用 Python 及其 GIL（对 Cython 没有指令）， **Shiboken**也访问 GIL。
输出表明与 GIL 访问存在冲突（除非我错了），但我的理解是 GIL 的存在是为了避免这种冲突。

**Shiboken**执行了一些与`PyList_New`另一个线程冲突的 dealloc ......

我迷路了，
我以为*GIL 负责阻塞* `PyList_New`，而另一个线程正在修改一些 Python 共享数据。还是**Shiboken**忘记锁了？

第`listobject.c`161 行是`_PyObject_GC_TRACK()`（我假设）要求 GC 跟踪新对象的调用。
第 `classobject.c`2360 行是一个`_PyObject_GC_UNTRACK()`强烈要求 GC 停止跟踪对象的调用......
我看到**helgrind** diag 是一个*可能的数据竞争*，但事实上这会导致核心转储，我不喜欢使用线程时 Python GC 上可能*出现的单词。*我想先解决这个问题。

```
==26535== ----------------------------------------------------------------
==26535== 
==26535== Possible data race during read of size 8 at 0x4FE8488 by thread #2
==26535== Locks held: none
==26535==    at 0x4C92A80: PyList_New (listobject.c:161)
==26535==    by 0x742C43F: s2p_parseAndReadHDF (SIDStoPython.c:949)
==26535==    by 0x742C5C4: s2p_parseAndReadHDF (SIDStoPython.c:968)
==26535==    by 0x742E638: s2p_loadAsHDF (SIDStoPython.c:1485)
==26535==    by 0x741C3CC: __pyx_f_6CHLone_load (pyCHLone.c:2182)
==26535==    by 0x741D2AD: __pyx_pf_6CHLone_12load (pyCHLone.c:2422)
==26535==    by 0x741D1C3: __pyx_pw_6CHLone_13load (pyCHLone.c:2392)
==26535==    by 0x4D0A48F: PyEval_EvalFrameEx (ceval.c:4013)
==26535==    by 0x4D0C3DC: PyEval_EvalCodeEx (ceval.c:3253)
==26535==    by 0x4C8B641: function_call (funcobject.c:526)
==26535==    by 0x4C5F652: PyObject_Call (abstract.c:2529)
==26535==    by 0x4C7279E: instancemethod_call (classobject.c:2578)
==26535== 
==26535== This conflicts with a previous write of size 8 by thread #1
==26535== Locks held: none
==26535==    at 0x4C6C53F: instancemethod_dealloc (classobject.c:2360)
==26535==    by 0x5AB248A: Shiboken::AutoDecRef::~AutoDecRef() (in /tmp/tools-2/local/x86z/lib/python2.7/site-packages/PySide/QtCore.so)
==26535==    by 0x5F9736F: PySide::GlobalReceiverV2::qt_metacall(QMetaObject::Call, int, void**) (in /tmp/tools-2/local/x86z/lib/libpyside-python2.7.so.1.0.9)
==26535==    by 0x659BCA5: QObject::event(QEvent*) (in /tmp/tools-2/local/x86z/lib/libQtCore.so.4.8.0)
==26535==    by 0x5B038C5: QCoreApplicationWrapper::notify(QObject*, QEvent*) (in /tmp/tools-2/local/x86z/lib/python2.7/site-packages/PySide/QtCore.so)
==26535==    by 0x6586F8B: QCoreApplication::notifyInternal(QObject*, QEvent*) (in /tmp/tools-2/local/x86z/lib/libQtCore.so.4.8.0)
==26535==    by 0x658A5A7: QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) (in /tmp/tools-2/local/x86z/lib/libQtCore.so.4.8.0)
==26535==    by 0x65B60F2: ??? (in /tmp/tools-2/local/x86z/lib/libQtCore.so.4.8.0)
==26535== 
```

**问题：**
1\. 我为 GIL 假设的行为是否正确？
2\. 如果**No** ,
... 是否意味着我必须自己管理每个线程中的 GIL 锁？
...然后我必须为 Python 创建自己的*互斥锁*？！？？？？！？
3\. 如果**是**，
... 我的 Cython 或 C 库中是否存在关于 GIL 使用的问题？
...会不会是*QThread/QMutex*的副作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T18:34:39.210

在 CPython 中，全局解释器锁或 GIL 是一个互斥锁，可防止多个本机线程同时执行 Python 字节码。

因此，您可以从 GIL 中得到的所有期望是，它可以防止两个 Python 代码流同时执行。除此之外，您不应期望任何类型的锁定行为。编写依赖于保护您的 GIL 的代码通常是不好的做法。GIL 是许多人想要移除的疣，它在某些形式的 python 中不存在，例如 IronPython 和 jython。在它确实存在的地方，它会减少并发性，增加开销并使 python 代码比其他情况更难推理。

从上面我不清楚是否涉及任何 GIL 故障。第二个痕迹似乎在 C++ 领域很深，而不是在我理解 GIL 限制的领域。

# android - 在哪里设置扩展RelativeLayout的类字段的视图大小？

> ID：14560439
> 
> 赞同：3
> 
> 时间：2013-01-28T10:53:15.380
> 
> 标签：android, android-layout, view

我有一个类`MyLayout`扩展`RelativeLayout`，其中包括`View`类型字段。`MyLayout`对象是在 xml 布局文件中创建的，因此所有属性都在那里设置。我需要以编程方式设置`View`字段的大小，这取决于它的父级（`MyLayout`）的大小。

我试图在构造函数中设置它，但是当我尝试使用`getWidth()`方法时，它返回 0，所以我假设大小尚未在构造函数中设置。我也试图在`onDraw()`方法中设置它，但是当我运行一个应用程序时，这个内部`View`会以默认大小显示第二个，然后它会缩放到正确的大小。然后我尝试将它放在`onMeasure()`方法中，但是这个方法被调用了几次，所以它似乎根本没有效率。

那么设置它的最佳位置是什么？

这是我的课：

```
public class MyLayout extends RelativeLayout {

    private View pointer;

    public MyLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        init(context);
    }

    public MyLayout(Context context, AttributeSet attrs) {
        super(context, attrs);

        init(context);
    }

    public MyLayout(Context context) {
        super(context);

        init(context);
    }

    private void init(Context c) {
        pointer = new View(c);
        pointer.setBackgroundResource(R.drawable.pointer);
        addView(pointer);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)pointer.getLayoutParams();
        lp.height = (int)(getHeight() * 0.198);
        lp.width = (int)(getWidth() * 0.198);

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:47:54.820

在您的 MyLayout 类中，覆盖 onSizeChanged()：

```
protected void onSizeChanged(int w, int h, int oldw, int oldh) {

     RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)pointer.getLayoutParams();
     lp.height = (int)(getHeight() * 0.198);
     lp.width = (int)(getWidth() * 0.198);

}; 
```

# android - 使用 $.load 加载本地 html

> ID：14560453
> 
> 赞同：4
> 
> 时间：2013-01-28T10:54:09.420
> 
> 标签：android, jquery, android-webview

在我的应用程序中，正在加载驻留在 SD 卡中的本地 html

```
String extPath = getExternalFilesDir(null).toString();
String html = getHtml(extPath+File.separator+fileName); //it just reads html file and returns content as string
webvu.loadDataWithBaseURL("file://"+extPath+File.separator,html ,
"text/html","UTF-8", null); 
```

在 Web 视图 (webvu) 中加载的 html 文件尝试使用 $.load ajax 调用加载另一个 html 文件

> $.load("base.html",function(){ ... });

ajax load 抛出以下错误。我该如何解决这个问题

> XMLHttpRequest 无法加载 file:///storage/emulated/0/Android/data/com.example.sdcardwebview/files/sec.html。无法从 null 发出任何请求。在空：1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:50:13.053

我终于想出了解决方案

空源问题只发生在 JB 中，据说它有一个基于新 webkit 的 webview，它实现了更严格的同源策略。

因此，有问题的代码在 JB 以下的所有 android 版本上都可以正常工作。要让代码在 JB 上运行，我们需要做的就是更改 Web 视图设置。打电话

```
webView.getSettings().setAllowUniversalAccessFromFileURLs(true); 
```

# c# - Mongo c#驱动为泛型自定义序列化

> ID：14560460
> 
> 赞同：2
> 
> 时间：2013-01-28T10:54:42.113
> 
> 标签：c#, mongodb, mongodb-.net-driver

我对 mongo c# 驱动程序有一些问题。我有这样的课：

```
class MongoEntity<T>
{
    public ObjectId Id {get; set;}
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    public int Version { get; set; }
    public T Entity { get; set; }
} 
```

在将我的实体序列化到数据库期间，我有这样的文件：

```
"_id" : "510654cf33d22e1774d5a2a9",
"CreatedAt" : {
    "DateTime" : ISODate("2013-01-28T10:37:02.932Z"),
    "Ticks" : NumberLong("634949662229321756")
 },
 "UpdatedAt" : {
    "DateTime" : ISODate("2013-01-28T10:37:02.932Z"),
    "Ticks" : NumberLong("634949662229321756")
 },
 "Version" : 1,
 "Entity" : {
    "EntityKey" : "tom@gmail.com",
    "Password" : "ICy5YqxZB1uWSwcVLSNLcA==",        
    "Email" : "tom@gmail.com",
    "Name" : "Tom Anderson"
 } 
```

我真正想要的是让我的文档中实体对象的所有属性与 MongoEntity 对象的属性处于同一级别，如下所示：

```
"_id" : "510654cf33d22e1774d5a2a9",
"CreatedAt" : {
    "DateTime" : ISODate("2013-01-28T10:37:02.932Z"),
    "Ticks" : NumberLong("634949662229321756")
 },
 "UpdatedAt" : {
    "DateTime" : ISODate("2013-01-28T10:37:02.932Z"),
    "Ticks" : NumberLong("634949662229321756")
 },
 "Version" : 1,
 "EntityKey" : "tom@gmail.com",
 "Password" : "ICy5YqxZB1uWSwcVLSNLcA==",        
 "Email" : "tom@gmail.com",
 "Name" : "Tom Anderson" 
```

没有实体嵌入对象。我怎样才能以最简单的方式实现这一点？

PS我真正想要的是驱动程序的一些配置或编写自定义序列化程序，也许是一些动态的解决方法，我不想改变当前的类结构Enteties <-> MongoEntity

谢谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:43:15.847

无法配置内置序列化程序来生成您想要的文档格式（实体字段提升了一级）。

您必须编写一个自定义序列化程序，但这会很困难，因为您要么必须为每个 <T> 编写一个新的序列化程序，要么必须编写一个适用于任何 <T> 的复杂序列化程序。

WiredPrairie 的建议 (Person : MongoEntityBase) 是推荐的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:12:45.247

只需使用包含所有必需数据库字段的基本类型的子类。

```
public class abstract MongoEntityBase
{
    public ObjectId Id {get; set;}
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    public int Version { get; set; }
} 
```

然后，使用它：

```
public class Person : MongoEntityBase
{
    public string Email { get; set; }
    public string Name { get; set; }
} 
```

10gen 提供的 MongoDB C# 驱动程序适用于该模式。

# python - 如何使用 python 从 html 代码中获取特定的 id？

> ID：14560464
> 
> 赞同：-2
> 
> 时间：2013-01-28T10:54:57.380
> 
> 标签：python, html, parsing

我有很多 html 响应代码，在某些部分有这部分：

```
</td>
</tr>
    <input id="hiddenloginurl" type="hidden" name="loginurl" value="/sensor.htm?id=10240">
</table> 
```

如何解析 html 代码并使用 python 获取此 id？问题是，在每次新的 api 调用中，id 都会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:26:03.527

[美丽汤](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

> Beautiful Soup 提供了一些用于导航、搜索和修改解析树的简单方法和 Pythonic 习惯用法：用于剖析文档和提取所需内容的工具包。编写应用程序不需要太多代码
> 
> Beautiful Soup 自动将传入文档转换为 Unicode，将传出文档自动转换为 UTF-8。您不必考虑编码，除非文档未指定编码并且 Beautiful Soup 无法自动检测编码。然后你只需要指定原始编码。
> 
> Beautiful Soup 位于流行的 Python 解析器（如 lxml 和 html5lib）之上，允许您尝试不同的解析策略或以速度换取灵活性。

另请参阅此类似问题：[Extracting an attribute value with beautifulsoup](https://stackoverflow.com/questions/2612548/extracting-an-attribute-value-with-beautifulsoup)

```
inputTag = soup.find(attrs={"name": "stainfo"})
output = inputTag['value'] 
```

# javascript - chrome.downloads.download 给出“downloads.download 期间出错：URL 无效。”

> ID：14560465
> 
> 赞同：1
> 
> 时间：2013-01-28T10:54:57.847
> 
> 标签：javascript, google-chrome, google-chrome-extension, download

我正在为使用下载 API 的 Google Chrome 进行扩展。我想从网站下载 .jpg 文件。

我在清单中使用了这些权限：

```
"permissions": ["downloads", "*://www.thatsite.com/*"] 
```

我正在使用的命令是：

```
chrome.downloads.download({"url":"https://www.thatsite.com/images/image1.jpg"}); 
```

这给出了以下错误

> “downloads.download 期间出错：URL 无效。”

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:31:07.137

我尝试使用以下代码，它按预期工作。我希望你**不在**稳定频道。

把你的完整代码，问题完全出在 URL 上。

您可以参考以下代码作为参考

# 参考

### 清单.json

使用清单文件注册**浏览器操作**和**权限。**

```
{
    "name": "Download Demo",
    "description": "http://stackoverflow.com/questions/14560465/chrome-downloads-download-gives-error-during-downloads-download-invalid-url",
    "manifest_version": 2,
    "version": "1",
    "browser_action": {
        "default_popup": "popup.html"
    },
    "permissions": [
        "downloads",
        "*://www.google.co.in/*"
    ]
} 
```

### popup.html

添加`<script>`了符合**CSP**的文件。

```
<html>

    <head>
        <script src="popup.js"></script>
    </head>

    <body>
        <button id="download">Download</button>
    </body>

</html> 
```

### popup.js

只需将**URL**传递给`download API`.

```
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("download").addEventListener("click", function () {
        chrome.downloads.download({
            "url": "http://www.google.co.in/images/srpr/logo3w.png"
        }, function () {
            console.log("downloaded");
        });
    });
}); 
```

# jquery - jquery ajax跨域xml响应问题

> ID：14560468
> 
> 赞同：4
> 
> 时间：2013-01-28T10:55:06.383
> 
> 标签：jquery, ajax

这是我`xml`从网站访问的代码

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "http://rxnav.nlm.nih.gov/REST/Ndfrt/search?conceptName=TESTOSTERONE",
        dataType: "xml",
        success: xmlParser

      });
});

function xmlParser(xml) { 
    $(xml).find("entry").each(function () {
        $(".entirecont").append($(this).find('inputConceptName').text());
    });
} 
```

当我将此代码推送到生产环境时，它在本地运行良好，这给了我跨域限制。

这是[JsFiddle](http://jsfiddle.net/bpBtC/96/)

我知道这是一个跨域请求，但是，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T10:57:49.120

使用 XML，对于真正的跨域请求，您唯一真正的选择是该服务器是否支持[CORS](http://www.w3.org/TR/access-control/)，允许您的来源，并且您的浏览器支持它。（不过，如果他们有[JSONP](http://en.wikipedia.org/wiki/JSONP#JSONP)选项，那会更容易。但遗憾的是，快速浏览他们的 API 页面表明他们只支持 XML 和 JSON，而不支持 JSONP。但是请自行寻找，不要相信我的话，我没有仔细阅读。在我看来，如果他们支持 JSON 但不支持 JSONP，那就有点奇怪了。）

我有时听说过但已经做过的另一个选择是使用[YQL](http://developer.yahoo.com/yql/)作为[跨域代理](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)。

当然，您也可以运行自己的服务器，向*它*发出请求，然后让它查询 rxnav.nlm.nih.gov 提要并将其返回给您。然后 SOP 就没有了。

旁注：要在 IE8 或 IE9 中将 CORS 与 jQuery 一起使用，您需要一个使用特殊对象处理的插件`XDomainRequest`（IE8 和 IE9 的`XMLHttpRequest`对象不执行 CORS）。IE10 终于解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:57:40.927

您只能在跨域请求中使用`CORS`或。`JSONP`获取 XML 的 AJAX 请求将无法跨域工作

解决方法是使用 PHP/ASP.Net/选择的语言在本地服务器上创建服务器端代理，然后通过 AJAX 调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:57:54.163

您不能通过 ajax（期望 json）发出跨域请求。

我建议您发出本地 ajax 请求，并在服务器端连接到跨域服务器以获取您需要的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:10:17.177

您可以使用来自[https://github.com/flensed/flXHR](https://github.com/flensed/flXHR)的 flxhr来运行跨域 ajax 调用

要使用的示例代码

```
function crossDomainCall(){
    var flproxy = new flensed.flXHR({
        autoUpdatePlayer: true,
        instanceId: "myproxy1",
        onerror: handleError,
        onreadystatechange: handleCrossDomainCall
    });
    flproxy.open("POST", url);
    flproxy.send(null);
}

function handleCrossDomainCall(XHRobj){
    if (XHRobj.readyState == 4) {
        var xmlDoc = XHRobj.responseXML;
        //
    }
} 
```

# android - 9个瓦片Android WebView

> ID：14560470
> 
> 赞同：2
> 
> 时间：2013-01-28T10:55:08.007
> 
> 标签：android, android-webview

我想使用 webview 构建一个由 9 个图块组成的应用程序。它们中的每一个都是我加载到 webview 中的 .html 文件，并且导航是通过滑动进行的。

这是刷卡的代码：

```
boolean result = false;
  try {
    float diffY = e2.getY() - e1.getY();
    float diffX = e2.getX() - e1.getX();

    if (Math.abs(diffX) > Math.abs(diffY)) {
      if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
        if (diffX > 0)
          onSwipeRight();
        else
          onSwipeLeft();
      }
    } else {
      if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
        if (diffY > 0)
          onSwipeBottom();
        else
          onSwipeTop();
      }
    }
  } catch (Exception exception) {
    exception.printStackTrace();
  }
  return result;
} 
```

其中每种`onSwipe<Direction>()`方法的结构如下：

```
private void onSwipeTop() {
  if (row < MAX_ROW) {
    row++;
    loadUrl(Direction.UP);
    System.out.println("Swipe Top!");
  }
} 
```

[然后动画由在另一个问题](https://stackoverflow.com/questions/12995909/can-an-android-webview-do-a-translationx-animation-with-hardware-acceleration)中找到的这段代码处理：

```
public void onPageFinished(WebView view, String url) {
    webView.setDrawingCacheEnabled(true);
    webView.buildDrawingCache();
    imageView.setImageBitmap(Bitmap.createBitmap(webView.getDrawingCache()));
    webView.setDrawingCacheEnabled(false);

    imageView.setVisibility(View.VISIBLE);
    webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);

    ObjectAnimator webViewAnimator = null;
    ObjectAnimator imageViewAnimator = null;

    switch (currentDirection) {
      case LEFT:
        System.out.println(">> Left!");
        webViewAnimator =
            ObjectAnimator.ofFloat(webView, "translationX", webView.getWidth(), 0);
        imageViewAnimator =
            ObjectAnimator.ofFloat(imageView, "translationX", 0, -webView.getWidth());
        break;
      case RIGHT:
        System.out.println(">> Right!");
        webViewAnimator =
            ObjectAnimator.ofFloat(webView, "translationX", -webView.getWidth(), 0);
        imageViewAnimator =
            ObjectAnimator.ofFloat(imageView, "translationX", 0, webView.getWidth());
        break;
      case UP:
        System.out.println(">> Up!");
        webViewAnimator =
            ObjectAnimator.ofFloat(webView, "translationY", webView.getHeight(), 0);
        imageViewAnimator =
            ObjectAnimator.ofFloat(imageView, "translationY", -webView.getHeight());
        break;
      case BOTTOM:
        System.out.println(">> Bottom!");
        webViewAnimator =
            ObjectAnimator.ofFloat(webView, "translationY", -webView.getHeight(), 0);
        imageViewAnimator =
            ObjectAnimator.ofFloat(imageView, "translationY", webView.getHeight());
        break;
      default:
        break;
    }

    imageViewAnimator.setDuration(SLIDE_DURATION);
    webViewAnimator.setDuration(SLIDE_DURATION);

    AnimatorSet set = new AnimatorSet();
    set.addListener(new AnimatorListenerAdapter() {
      public void onAnimationEnd(Animator animation) {
        webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        imageView.setVisibility(View.GONE);
      }
    });

    set.playTogether(imageViewAnimator, webViewAnimator);
    set.start(); 
```

我的问题：只要我改变滑动方向，ImageView 就不再出现，而是被白屏代替，而我想获得平滑的过渡效果。有谁能够帮我？或者也许建议另一种解决方案？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:14:26.173

我对 webviews 有类似的问题，[这个](https://stackoverflow.com/questions/9476151/webview-flashing-with-white-background-if-hardware-acceleration-is-enabled-an)问题解决方案解决了我的问题。不久，我禁用了我的活动的硬件加速。希望这可以帮助。

# python - 您不能添加没有默认值的 null=False 列

> ID：14560475
> 
> 赞同：2
> 
> 时间：2013-01-28T10:55:27.317
> 
> 标签：python, django, django-south

我正在添加一个新应用程序，在使用 South 设置数据库时，我得到以下信息：

```
... line 11, in forwards
db.add_column('experiments_dailyreport', 'test_group_size', 
  orm['experiments.dailyreport:test_group_size'])

You cannot add a null=False column without a default value. 
```

鉴于这是一个没有数据的新表，有什么方法可以强制迁移吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:15:26.497

您可以使用以下命令强制迁移：

```
manage.py migrate --fake django-lean 0005 
```

`0005`迁移的版本号在哪里。在您的情况下，重要的是：

*   最后拥有正确的数据库模式
*   让 South 认为所有迁移都已运行

之后，您可以正常运行其他迁移。或者，您可以删除 South，从`django-lean`using创建最新的表`syncdb`，然后伪造所有`django-lean`迁移。

最后，如果您确定迁移存在问题，则值得`django-lean`就此联系开发人员。

# python - “pylab”和“matplotlib.pyplot”有什么区别？

> ID：14560477
> 
> 赞同：3
> 
> 时间：2013-01-28T10:55:31.293
> 
> 标签：python, matplotlib

我尝试使用 MatPlotLib 并且我意识到可以以两种不同的方式导入它，并且在这两种情况下它都可以工作（以相同的方式）：`import pylab as p`或`import matplotlib.pyplot as p`.

所以，我的问题是这两种方式有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:08:40.180

来自[官方](http://matplotlib.org/faq/usage_faq.html#matplotlib-pylab-and-pyplot-how-are-they-related)文档：

> Pylab 将 pyplot 功能（用于绘图）与 numpy 功能（用于数学和处理数组）结合在一个命名空间中，使该命名空间（或环境）更加类似于 MATLAB。例如，可以像在 MATLAB 中一样调用 sin 和 cos 函数，并且具有 pyplot 的所有功能。

请注意，pylab 仅从顶部 numpy 命名空间导入。因此，这将工作

```
import numpy
numpy.array # works
numpy.distutils # finds a module 
```

这不会

```
import pylab
pylab.array # works, is actually numpy array
pylab.distutils # gives an error 
```

# c - 函数“cond_resched”的隐式声明，在包含的头文件中定义为宏

> ID：14560486
> 
> 赞同：0
> 
> 时间：2013-01-28T10:56:06.853
> 
> 标签：c, linux-kernel, declaration, implicit

我正在尝试构建一个带有一些补丁的内核，这些补丁会影响相同的文件并出现问题。在构建时，我收到一个错误：

> arch/x86/include/asm/uaccess_64.h：在函数“copy_from_user”中：arch/x86/include/asm/uaccess_64.h:81:2：错误：函数“cond_resched”的隐式声明 [-Werror=implicit-function -宣言]

起初我跟着代码，发现指出的字符串是：

> if (access_ok(VERIFY_READ, from, n))

`access_ok(...)`是文件 uaccess.h 中的一个宏，它确实包含`cond_resched()`调用。实际`cond_resched()`调用在文件中定义`linux/sched.h`并#included 到`uaccess.h`文件中。我也尝试将它包含到`uaccess_64.h`文件中，但它没有帮助。所以我不知道如何隐式声明它。

# perl - Mojolicous and Hypnotoad how does it work?

> ID：14560487
> 
> 赞同：2
> 
> 时间：2013-01-28T10:56:08.283
> 
> 标签：perl, web-applications, asynchronous, mojolicious

I was hoping that someone would be kind enough to confirm how hypnotoad and workers...well work :)

If for example my client code has a loop ( i.e for each ) that calls the same route with a different argument on each iteration.  Is it possible that each call to the backend will be handled by a different worker ad therefore simultaneously? ( if there are free workers?) 

I know this is a basic question but any help is appreciated

Thanks. 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:07:19.500

Hypnotoad is a preforking server. It means, if you have 4 processor cores, you can run for example 4 workers. If one of them is busy because of blocking code sleep(10), another one will handle next connection and so on.

You can try it yourself. Just write this code, "sleep 5; $self->render_text('5 seconds')" set a "workers" option to 2 or more and try to load a page 2 times simultaneously

If your code is absolutely non-blocking, one worker can handle many connections simultaneously but it will execute it one-by-one.

# java - 将证书文件加载到证书对象中

> ID：14560489
> 
> 赞同：3
> 
> 时间：2013-01-28T10:56:11.370
> 
> 标签：java, ssl, openssl, ssl-certificate, x509certificate

我正在尝试将证书文件加载到证书对象中，但出现以下异常。

```
 java.security.cert.CertificateParsingException: invalid DER-encoded certificate data
    at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1701)
    at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:303)
    at sun.security.provider.X509Factory.parseX509orPKCS7Cert(X509Factory.java:532)
    at sun.security.provider.X509Factory.engineGenerateCertificates(X509Factory.java:417)
    at java.security.cert.CertificateFactory.generateCertificates(CertificateFactory.java:427) 
```

下面是我用来读取证书文件的代码，

```
 final CertificateFactory certFactory = CertificateFactory.getInstance("X.509");
    final Collection<? extends Certificate> certs =
         (Collection<? extends Certificate>) certFactory.generateCertificates(new ByteArrayInputStream(FileUtils.readFileToByteArray(serverCertFile))); 
```

以下是证书文件的内容，

```
Certificate:
Data:
    Version: 3 (0x2)
    Serial Number:
        c1:cb:80:07:27:ce:4b:62
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=qw, ST=ewe, L=rew, O=rwerwe, OU=rwer, CN=rew/emailAddress=rewrew
    Validity
        Not Before: Jan 28 06:17:34 2013 GMT
        Not After : Feb 27 06:17:34 2013 GMT
    Subject: C=qw, ST=ewe, L=rew, O=rwerwe, OU=rwer, CN=rew/emailAddress=rewrew
    Subject Public Key Info:
        Public Key Algorithm: rsaEncryption
        RSA Public Key: (1024 bit)
            Modulus (1024 bit):
                00:b6:d5:fd:01:2b:6d:ab:e2:da:a9:b4:a9:67:48:
                ce:72:d9:15:de:66:22:8e:68:a8:7b:7e:55:06:97:
                56:d2:bd:6a:2e:04:89:df:6a:36:9e:3d:ba:fc:32:
                b2:8b:f0:69:5d:54:54:b6:3e:b5:55:38:89:1f:1c:
                d0:4b:21:de:76:b3:be:fc:41:b5:62:b8:b8:3b:dc:
                ad:6d:e1:fc:1c:56:6d:90:1a:b3:6c:57:7e:66:a0:
                07:b9:16:99:cc:d4:c9:ee:05:7c:9d:1c:fb:6b:8f:
                a3:4b:d6:1c:a9:aa:51:e1:41:0d:10:a9:fe:b6:1b:
                f0:33:0c:ea:52:b9:9b:8e:5d
            Exponent: 65537 (0x10001)
    X509v3 extensions:
        X509v3 Subject Key Identifier: 
            FF:24:75:B1:32:C2:74:6D:B4:CB:22:A9:92:CF:F4:B6:4A:5F:0B:56
        X509v3 Authority Key Identifier: 
            keyid:FF:24:75:B1:32:C2:74:6D:B4:CB:22:A9:92:CF:F4:B6:4A:5F:0B:56
            DirName:/C=qw/ST=ewe/L=rew/O=rwerwe/OU=rwer/CN=rew/emailAddress=rewrew
            serial:C1:CB:80:07:27:CE:4B:62

        X509v3 Basic Constraints: 
            CA:TRUE
Signature Algorithm: sha1WithRSAEncryption
    46:14:65:27:c2:cd:55:ba:b4:0f:92:ac:8c:e4:bd:e5:e5:8d:
    e3:3b:59:52:9b:40:6a:dc:e3:cf:2c:03:49:e4:56:33:88:f6:
    94:10:de:64:00:2e:c6:2a:13:98:d0:16:71:25:8a:ea:04:3f:
    14:af:bf:8d:e1:7f:aa:54:78:68:32:86:67:9d:1d:42:fc:cb:
    1d:f2:7c:0b:1d:24:2f:e5:3f:bd:01:bd:d7:2d:74:4a:e9:7b:
    2f:25:97:64:7e:10:ba:bf:dd:49:6d:8a:91:e4:50:d8:a3:04:
    cc:37:8c:45:bd:13:b7:88:72:ef:24:20:b1:aa:05:6c:37:36:
    05:c6
    -----BEGIN CERTIFICATE-----
    MIIDLjCCApegAwIBAgIJAMHLgAcnzktiMA0GCSqGSIb3DQEBBQUAMG4xCzAJBgNV
    BAYTAnF3MQwwCgYDVQQIEwNld2UxDDAKBgNVBAcTA3JldzEPMA0GA1UEChMGcndl
    cndlMQ0wCwYDVQQLEwRyd2VyMQwwCgYDVQQDEwNyZXcxFTATBgkqhkiG9w0BCQEW
    BnJld3JldzAeFw0xMzAxMjgwNjE3MzRaFw0xMzAyMjcwNjE3MzRaMG4xCzAJBgNV
    BAYTAnF3MQwwCgYDVQQIEwNld2UxDDAKBgNVBAcTA3JldzEPMA0GA1UEChMGcndl
    cndlMQ0wCwYDVQQLEwRyd2VyMQwwCgYDVQQDEwNyZXcxFTATBgkqhkiG9w0BCQEW
    BnJld3JldzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAttX9ASttq+LaqbSp
    Z0jOctkV3mYijmioe35VBpdW0r1qLgSJ32o2nj26/DKyi/BpXVRUtj61VTiJHxzQ
    SyHedrO+/EG1Yri4O9ytbeH8HFZtkBqzbFd+ZqAHuRaZzNTJ7gV8nRz7a4+jS9Yc
    qapR4UENEKn+thvwMwzqUrmbjl0CAwEAAaOB0zCB0DAdBgNVHQ4EFgQU/yR1sTLC
    dG20yyKpks/0tkpfC1YwgaAGA1UdIwSBmDCBlYAU/yR1sTLCdG20yyKpks/0tkpf
    C1ahcqRwMG4xCzAJBgNVBAYTAnF3MQwwCgYDVQQIEwNld2UxDDAKBgNVBAcTA3Jl
    dzEPMA0GA1UEChMGcndlcndlMQ0wCwYDVQQLEwRyd2VyMQwwCgYDVQQDEwNyZXcx
    FTATBgkqhkiG9w0BCQEWBnJld3Jld4IJAMHLgAcnzktiMAwGA1UdEwQFMAMBAf8w
    DQYJKoZIhvcNAQEFBQADgYEARhRlJ8LNVbq0D5KsjOS95eWN4ztZUptAatzjzywD
    SeRWM4j2lBDeZAAuxioTmNAWcSWK6gQ/FK+/jeF/qlR4aDKGZ50dQvzLHfJ8Cx0k
    L+U/vQG91y10Sul7LyWXZH4Qur/dSW2KkeRQ2KMEzDeMRb0Tt4hy7yQgsaoFbDc2
    BcY=
    -----END CERTIFICATE----- 
```

如果我使用相同的代码从顶部删除证书文件中的内容直到 BEGIN CERTIFICATE，它的工作正常。但我的要求是证书文件将包含这些内容。有没有人遇到过这个错误？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:20:43.060

问题是，`CertificateFactory`如果它立即开始，则只能读取 PEM 格式的证书`-----BEGIN CERTIFICATE-----`。一些工具会先添加额外的信息（这里是 的结果`openssl x509 -text`），但证书工厂不会忽略它并将其视为格式错误的证书。

相反，使用`BuffedReader`and[`readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)来读取您的文件，忽略任何行，直到您到达`-----BEGIN CERTIFICATE-----`. 然后，将所有行添加`-----END CERTIFICATE-----`到一个临时字符串变量（或类似变量，例如`StringBuilder`）。将此传递给`CertificateFactory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:38:53.897

在我看来，您的证书文件格式可能不正确。

[CertificateFactory.generateCertificates](http://docs.oracle.com/javase/7/docs/api/java/security/cert/CertificateFactory.html#generateCertificate%28java.io.InputStream%29)的文档说，

> 对于 X.509 证书的证书工厂，inStream 中提供的证书必须是 DER 编码的，并且可以以二进制或可打印 (Base64) 编码形式提供。如果证书以 Base64 编码提供，则必须以 -----BEGIN CERTIFICATE----- 开头，结尾必须以 -----END CERTIFICATE----- 为界.

我不认为问题就像将边界标记添加到现有证书一样简单。

我只使用过 PEM 格式，它是 base-64 编码的 DER，所以我不确定你的格式是否错误，但我猜测二进制 DER 编码的证书不是人类可读的文本.

因此，我建议您返回源证书，并确保您获得格式正确的副本。如果原始证书的格式不同，可以使用 openssl 将其转换为 pem 格式。

# android - sdcard中的android SQLite数据库

> ID：14560493
> 
> 赞同：2
> 
> 时间：2013-01-28T10:56:25.350
> 
> 标签：android, sqlite

我想知道 android sqlite 中的一件事。

我在 sdcard 中创建了我的数据库。所以没有`upgrage() 方法。

```
public class DatabaseClass
{
    public static final String  DATABASE_FILE_PATH = "/sdcard";
    public static final String  DATABASE_NAME = "testDatabase";

    public static final String TRACKS_TABLE_CREATE =
        "create table if not exists casecategory (_id INTEGER primary key autoincrement, "
        + "category_name TEXT not null);";

    public SQLiteDatabase database;

    public DatabaseClass()
    {  
        try
        {
            database = SQLiteDatabase.openOrCreateDatabase(DATABASE_FILE_PATH + File.separator + DATABASE_NAME, null);
            createTables();
        }

        catch (SQLiteException ex)
        {
            Log.e("Hello", "error -- " + ex.getMessage(), ex);
        }
        finally
        {
            database.close();
        }
    } 
```

在内部存储器中，我们创建如下：-

```
public class DatabaseClass extends SQLiteOpenHelper 
{
    /*Constants */
    public final static String DATABASE_NAME ="localdbfile.db";
    public final static String NAME ="name";
    public final static String ADDRESS ="address";

    public final static String CITY ="city";

    public DatabaseClass(Context context) {
        super(context, DATABASE_NAME, null, 1);
        // TODO Auto-generated constructor stub
        }

    @Override
    public void onCreate(SQLiteDatabase db) {
    db.execSQL( "CREATE TABLE mylistdata(_id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, address TEXT,city TEXT);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP Table mylistdata");
        onCreate(db);

    }

} 
```

在内部存储器中，我们更改`version`号码并`upgrade()`调用。升级数据库。

如果我想在数据库中获取`upgrade`数据库版本`sdcard`。

如果可能的话，我该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T11:02:11.807

您可以将数据库直接存储在 SD 卡中，如下所示：

```
static class DatabaseClass extends SQLiteOpenHelper {

    DatabaseClass(final Context context) {
        super(context, Environment.getExternalStorageDirectory()
                + File.separator + "/DataBase/" + File.separator
                + DATABASE_NAME, null, DATABASE_VERSION);
    } 
```

如果您将您的数据库存储在内部存储器中，那么您也可以将数据库从内部存储器复制到 SD 卡:)

以下是如何将数据复制到 SD 卡的示例：

```
InputStream myInput = new FileInputStream("/data/data/pack_name/databases/databasename.db");

File directory = new File("/sdcard/some_folder");
if (!directory.exists()) {
    directory.mkdirs();
}

OutputStream myOutput = new FileOutputStream(directory.getPath() + "/AppName.backup");

byte[] buffer = new byte[1024];
int length;
while ((length = myInput.read(buffer)) > 0) {
    myOutput.write(buffer, 0, length);
}

myOutput.flush();
myOutput.close();
myInput.close(); 
```

# android - 更改自定义按钮中的标签

> ID：14560494
> 
> 赞同：2
> 
> 时间：2013-01-28T10:56:24.717
> 
> 标签：android, android-widget

我需要扩展 Button vidget 可以覆盖标签文本。例如：

```
button.seText("bla bla bla bla"); 
```

并查看标签“bla...bla”。它是这样的标准`singleLine="true"`，但结果像 bla bla... 对我不利。我创建了类 CustomButton extends Button，现在我需要为我的结果重写什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:17:44.340

设置`lines`按钮的属性`1`和`ellipsize` `middle`.

`SignleLine`现在已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:20:22.193

在你布局 XML

```
<button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="middle"
   /> 
```

# html - 在已经排列好的表格中划分一列 HTML CSS

> ID：14560495
> 
> 赞同：0
> 
> 时间：2013-01-28T10:56:27.160
> 
> 标签：html, css

我已经有一个格式正确的表格，表格中的主体完全排列整齐。但是我错过了一些东西。在 tbody 的名称列中，我需要将其分成两半，一个是包含数字的较小框，另一个是包含名称的较大框。

所以在它之前是这样的：td [name here] td

进入类似 td td[number] td td [name here] td td

这两个应该在标题中的 1 列下，这是一个名称。有什么想法吗？

这是标题：

```
 <thead>
          <tr class="table1row">
            <th ROWSPAN="4"> SEQ # </th>
            <th ROWSPAN="4" class="table1name"> NAME  </th>
            <th ROWSPAN="2" COLSPAN="4" class="table1loa" > LOA </th>
            <th COLSPAN="4"> TARDINESS/UNDERTIME </th>
          <tr>
          <tr>
            <th ROWSPAN="1" COLSPAN="3"> No. of Working Days </th>
            <th ROWSPAN="2" COLSPAN="1" class="table1ex"> Period Covered </th>
            <th ROWSPAN="1" COLSPAN="2"> FREQUENCY </th>
            <th ROWSPAN="1" COLSPAN="2"> TOTAL </th>
          </tr>
          <tr>
            <th> <small>VL</small> </th>
            <th> <small>SL</small> </th>
            <th> <small>OtherS/*</small> </th>
            <th> Tardiness </th>
            <th> Undertime </th>
            <th> Hrs </th>
            <th> Min </th>
          </tr>
        </thead> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:15:20.587

您可以在 td 中添加一个表。因此， tbody 将如下所示。`table`您可以在内部设置样式以`td`避免`cellspacing`和。 `cellpadding``0`

```
 <tbody>
      <tr class="table1row">
        <td ROWSPAN="4"> SEQ # </td>
        <td ROWSPAN="4" class="table1name">
          <table>
            <tr>
              <td>name</td>
              <td>number</td>
            </tr>
          </table>
        </td>      
        <td ROWSPAN="2" COLSPAN="4" class="table1loa" > LOA </td>
        <td COLSPAN="4"> TARDINESS/UNDERTIME </td>
      </tr>

      <tr>
        ....
      </tr>

      <tr>
        .....
      </tr>
    </tbody> 
```

注意：您忘记关闭`tr`.`<thead>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:16:05.493

这是你需要的吗..？

```
<table border="1">
   <tr>
     <th colspan="2">Title</th>
   </tr>
   <tr>
     <td width250px>No.</td>
     <td width=100px>Name</td>
   </tr>
</table> 
```

...

# javascript - 使用 javascript 在同一选项卡中打开 url

> ID：14560497
> 
> 赞同：1
> 
> 时间：2013-01-28T10:56:32.657
> 
> 标签：javascript

我在 worklistManager.jsp 中有一个按钮，它调用一个函数（getWorklistManagerModify（））.. 该函数位于 utility.js 文件中，该文件又执行一些操作并重定向到 worklist.jsp 页面及其响应.. 如何打开工作列表.jsp 页面在 worklistManager.jsp 的同一选项卡或同一窗口中。现在它作为单独的选项卡打开。

getWorklistManagerModify 函数：

```
function getWorklistManagerModify(){
    var whereCondn = "";
    //alert(gbshowgridFlag);
    if(dijit.byId('finderResponseGridCWPWORKLIST')){
        var selctedItem = dijit.byId('finderResponseGridCWPWORKLIST').selection.getSelected();
        if(selctedItem.length){
            dojo.forEach(selctedItem, function(selectedItem){
                if(selectedItem !== null){
                    dojo.forEach(dijit.byId('finderResponseGridCWPWORKLIST').store.getAttributes(selectedItem), function(attribute){
                        var value = dijit.byId('finderResponseGridCWPWORKLIST').store.getValues(selectedItem, attribute);
                        //alert(value);
                        if(attribute == "CWDOCID"){
                            whereCondn = whereCondn+attribute+"="+value;
                        }
                        //alert(whereCondn);
                    });
                    var cols= "DUE_DATE,PRIORITY,CWDOCID";
                    var ioArgs = {
                            url: "./DynamicDBServlet",
                            content: { TABLE_NAME:'CWPWORKLIST',WHERE_CONDN:whereCondn,COLUMNS:cols,ACTION:'select'}, 
                            handleAs: "text",
                            load: function(response) {
                            postRequestPage("worklist.jsp",response,'title');

                            },
                            error: function(error) {
                                alert("An unexpected error occurred: " + error);
                            }
                    };
                    var deferred = dojo.xhrPost(ioArgs);

                }
            });
            //alert("grid row selected");
        }else{
            alert("Please select a task");
        }
    }
    if(gbshowgridFlag==false){
        alert("Please select a task");
    }
} 
```

发送post请求的函数：

```
function postRequestPage(url, params, name){
    alert(params);
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", url);
    form.setAttribute("target", name);
    var input = document.createElement('input');
    input.type = 'hidden';
    input.name = "PARAM";
    input.value = params;
    form.appendChild(input);
    document.body.appendChild(form);
    window.location.href = url;
    //window.open(url,"_self");
    form.submit();
    document.body.removeChild(form);
} 
```

我尝试使用 window.location.href、window.open、location.href 和 window.location ......没有任何结果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:59:09.057

remove this line;

```
form.setAttribute("target", name); 
```

# vb.net - Barcode parsing

> ID：14560498
> 
> 赞同：2
> 
> 时间：2013-01-28T10:56:35.270
> 
> 标签：vb.net, winforms, textbox, barcode

For example I have this form:

As you can see I have Barcode textbox, and 6 more textboxes. What I need is a code that will parse my barcode from the textbox and fill in the remaining fields. The parenthesis ie `()`, and the numbers inside it, have to be deleted.

![LINK TO IMAGE](../Images/3dbe4bab11a99a8a5cde09a943b88e9d.png)

Here is example of my barcode

```
(1)CODE1(3)NAME(4)SURNAME(8)CODE2(10)CODE3(12)CODE4 
```

For now I have this code:

```
Private Sub Barcode_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Barcode.Leave
    Dim Duzina As String = Me.Barcode.Text.Length
    Dim I As Integer = 0
    Dim Slog As String = ""
    Dim Rec As String = Me.Barcode.Text
    For I = 4 To Duzina
        If Rec.Substring(I, 1) = "(" Then
            Me.Surname.Text = Slog
            Exit For
        End If
        Slog = Slog + Rec.Substring(I, 0)
    Next

End Sub 
```

So when the barcode loads into the first textbox, it should fill up all the other textboxes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:20:08.520

我的简单解决方案

```
Private Sub Barcode_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Barcode.Leave
    Dim codes = barcodeTextBox.Text.Split("("c)
    Dim code1 = codes(1).Split(")"c)
    Dim name = codes(2).Split(")"c)
    Dim surename = codes(3).Split(")"c)
    Dim code2 = codes(4).Split(")"c)
    Dim code3 = codes(5).Split(")"c)
    Dim code4 = codes(6).Split(")"c)

    sureNameTextBox.Text = surename(0).ToString()
    nameTextBox.Text = name(0).ToString()
    code1TextBox.Text = code1(0).ToString()
    code2TextBox.Text = code2(0).ToString()
    code3TextBox.Text = code3(0).ToString()
    code4TextBox.Text = code4(0).ToString()
End Sub 
```

替代解决方案

```
Private Sub Barcode_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Barcode.Leave
    Dim codes = barcodeTextBox.Text.Split("("c)
    Dim code1 = codes(1).Split(")"c).FirstOrDefault()
    Dim name = codes(2).Split(")"c).FirstOrDefault()
    Dim surename = codes(3).Split(")"c).FirstOrDefault()
    Dim code2 = codes(4).Split(")"c).FirstOrDefault()
    Dim code3 = codes(5).Split(")"c).FirstOrDefault()
    Dim code4 = codes(6).Split(")"c).FirstOrDefault()

    sureNameTextBox.Text = surename
    nameTextBox.Text = name
    code1TextBox.Text = code1
    code2TextBox.Text = code2
    code3TextBox.Text = code3
    code4TextBox.Text = code4
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:43:02.867

我已经这样做了

```
Private Function CitanjeBarkoda() As Boolean
    Dim Duzina As String = Me.TextBox8.Text.Length
    Dim I As Integer = 0
    Dim Slog As String = ""
    Dim Rec As String = Me.TextBox8.Text
    Dim BrOz As Integer = 0
    Dim BrZz As Integer = 0
    Dim NizOz As New ArrayList
    Dim NizZz As New ArrayList
    Dim Slog1 As String = ""

    For I = 0 To Duzina - 1
        If Rec.Substring(I, 1) = "(" Then
            BrOz = BrOz + 1
            NizOz.Add(I)
        End If
        If Rec.Substring(I, 1) = ")" Then
            BrZz = BrZz + 1
            NizZz.Add(I)
        End If

    Next
    Me.TextBox10.Text = Rec.Substring(NizZz(0) + 1, NizOz(1) - NizZz(0) - 1)
    Me.IMEOSOBE = Rec.Substring(NizZz(1) + 1, NizOz(2) - NizZz(1) - 1)
    Me.PREZIMEOSOBE = Rec.Substring(NizZz(2) + 1, NizOz(3) - NizZz(2) - 1)
    Me.TextBox3.Text = Rec.Substring(NizZz(3) + 1, NizOz(4) - NizZz(3) - 1)
    Me.BRKART = Rec.Substring(NizZz(4) + 1, NizOz(5) - NizZz(4) - 1)
    Me.TextBox5.Text = Rec.Substring(NizZz(5) + 1, NizOz(6) - NizZz(5) - 1)
return true
End function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:39:49.790

实际上，标题有点误导。它应该是字符串解析而不是条形码解析。不管怎样，你可以试试这个。

```
Private Sub Barcode_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Barcode.Leave
    Dim pvsBarcodeRAW As String = Trim(Me.Barcode.Text.Length)
    Dim voNVC As New System.Collections.Specialized.NameValueCollection

    Dim vasCodePairs() As String = Split(pvsBarcodeRAW, "(")
    For Each vsCodePair As String In vasCodePairs
        vsCodePair = Trim(vsCodePair)
        If vsCodePair.Length > 0 Then
            Dim vasCodePair() As String = Split(vsCodePair, ")")
            If vasCodePair.Length = 2 Then
                Select Case vasCodePair(0)
                    Case 1
                        voNVC("Code1") = vasCodePair(1)
                    Case 3
                        voNVC("Name") = vasCodePair(1)
                    Case 4
                        voNVC("SurName") = vasCodePair(1)
                    Case 8
                        voNVC("Code2") = vasCodePair(1)
                    Case 10
                        voNVC("Code3") = vasCodePair(1)
                    Case 12
                        voNVC("Code4") = vasCodePair(1)
                End Select
            End If
        End If
    Next

    'Now you can do whatever you want with the variables in the voNVC variable.
    SurName.Text = voNVC("SurName")
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T19:34:52.430

在扫描仪上输入启用了键盘映射`$I`的 Code 39 条形码。 `$I`就像键盘上的 TAB 键一样。

一次扫描

```
CODE1$INAME$ISURNAME$ICODE2$ICODE3$ICODE4 
```

将填充此：CODE1 NAME SURNAME CODE2 CODE3 CODE4

话虽如此，Code 39 不适用于长条码。您可以使用 QR，但那里的选项卡有点复杂，但仍然可行。您还需要一台 2D 扫描仪。

# c# - Loose binding of parameter names in WebApi routing

> ID：14560501
> 
> 赞同：0
> 
> 时间：2013-01-28T10:56:40.313
> 
> 标签：c#, asp.net-web-api

Currently we use the below routing rules to cater for all our controllers; the advantage being that we don't have to define a route for each action in each controller:

```
routes.MapHttpRoute("3", "{controller}/{action}/{arg1}/{arg2}/{arg3}");
routes.MapHttpRoute("2", "{controller}/{action}/{arg1}/{arg2}");
routes.MapHttpRoute("1", "{controller}/{action}/{arg1}");
routes.MapHttpRoute("0", "{controller}/{action}"); 
```

However due to this the parameter names in the methods must match; like so:

```
// Example method signature
public ResponseDto GetResponse(int arg1, int arg2) 
```

If the parameter names are changed to something more friendly (eg: a name that would show the intention of each parameter instead of an ambiguous "arg1" name) like so:

```
// Better example method signature
public ResponseDto GetResponse(int userId, int itemId) 
```

The binding would break unless:

*   The routes and parameter names are explicitly defined
*   The arguments are passed in using a query string

Is there are way to set up WebApi routing so it will automatically use the correct action based on the number of parameters; rather than the parameter names?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:06:52.167

您似乎正在尝试做一些类似于[自定义参数绑定的好博客文章](http://www.tugberkugurlu.com/archive/asp-net-web-api-catch-all-route-parameter-binding)中描述的事情。正如您所发现的，没有开箱即用的东西可以支持您尝试做的事情。

在概念层面上，HTTP 是围绕*资源*的概念构建的。URI 应该标识一个特定的资源。使用通用位置“参数”似乎模糊了资源的特殊性。使用 URI 的查询字符串似乎可以更好地服务于您的用例。这样，您的 HTTP API 就可以清楚地表达给定资源的预期参数的意图。

# web2py - 'urllib2.URLError'(

> ID：14560507
> 
> 赞同：4
> 
> 时间：2013-01-28T10:57:02.380
> 
> 标签：web2py, urllib

I have a web2py app installed which is served by Apache. After months of successful deployment, the website suddenly stops functioning with the error:

```
class 'urllib2.URLError'(urlopen error [Errno -3] Temporary failure in name resolution) 
```

I tried restarting the app and apache but it did not help. What are the possible causes for such an event to happen?

The system worked fine after a reboot.

# python - round off function in django

> ID：14560516
> 
> 赞同：0
> 
> 时间：2013-01-28T10:57:21.597
> 
> 标签：python, django, django-views, rounding, numerical-methods

I want to round off some values for my numerical calculations in views like-------

5.5 to 5 OR 549 t0 500 and 599 - 600 (the nearest one)

So I want to use round off OR floor function in django as we used in other languages. Is there any functions related to this in django then please suggest me some functions and also the libraries which i have to import to use these functions.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:08:56.027

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:02:46.090

使用浮点数时，您可以使用[round](http://docs.python.org/2/library/functions.html#round)、[math.ceil](http://docs.python.org/2/library/math.html#math.ceil)和 [math.floor](http://docs.python.org/2/library/math.html#math.floor)。

对于[decimal.Decimal](http://docs.python.org/2/library/decimal.html)，您可以使用[quantize](http://docs.python.org/2/library/decimal.html#decimal.Decimal.quantize)方法，该方法允许您指定舍入：

```
value = decimal.Decimal('0.5')
value.quantize(decimal.Decimal('1'), decimal.ROUND_UP)
value.quantize(decimal.Decimal('1'), decimal.ROUND_DOWN)
value.quantize(decimal.Decimal('1'), decimal.ROUND_HALF_UP)
... 
```

有关舍入方法的列表，请参见[decimal.Context](http://docs.python.org/2/library/decimal.html#decimal.Context)。

请注意，python 默认使用 ROUND_HALF_EVEN，这对于统计非常有用，但对于金融数学却非常尴尬。将金额四舍五入为 centis 的典型方法是以下代码：

```
amount = decimal.Decimal('0.15234')
CENTI = decimal.Decimal('0.01')
value.quantize(CENTI, decimal.ROUND_HALF_UP) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:14:21.953

[`decimal`](http://docs.python.org/library/decimal.html)在您的视图中使用：

```
>>> import decimal
>>> numbers = ['5.5','499','1','0.5']
>>> for i in numbers:
...   the_number = int(decimal.Decimal(i))
...   if the_number / 10:
...      the_number = the_number + 10 - (the_number % 10)
...   print the_number
...
5
500
1
0 
```

如果您想格式化浮点数，请[`floatformat`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#floatformat)按照 Daniel 的建议使用，但它不会为您进行舍入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T22:49:59.133

如果您在 ORM 中执行此操作，则可以使用`Func()`表达式，请参阅[此答案](https://stackoverflow.com/a/34622417/258772)。

# html - Full width menu support IE7 by CSS?

> ID：14560517
> 
> 赞同：2
> 
> 时间：2013-01-28T10:57:24.000
> 
> 标签：html, css

I'm trying to make a full width menu. I have problem with IE7 since display: table-cell doesn't support in IE7\. Is there any solutions beside this?

Here my code:

```
<div class="main_nav second">
     <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="#">Contact us</a></li>
     </ul>
</div> 
```

CSS:

```
 .main_nav ul {
        display: table;
        position: relative;
        table-layout: auto;
        width: 100%;
        padding: 0;
        border: 1px solid #CCCCCC;
    }

    .main_nav ul li {
        list-style: none;
        float: none;
        display: table-cell;
    }

    .main_nav ul li a {
        padding: 10px 15px;
        display: block;
        text-decoration: none;
    } 
```

I also try it with Javascript, but it works not really well when I add more items in menu. Thank in advanced for your value time :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:21:43.083

你能用`display: inline;`吗？

在此处查看我的示例：[小提琴示例](http://jsfiddle.net/vqh2C/2/)

# php - 发送子域作为发布数据

> ID：14560521
> 
> 赞同：2
> 
> 时间：2013-01-28T10:57:45.193
> 
> 标签：php, .htaccess, seo

过去几个小时一直在寻找解决方案，我想我会在这里问。

我正在寻找一种处理链接的方法，例如：

> [http://subdomain.domain.com/page/subpage/](http://subdomain.domain.com/page/subpage/)

所以它们被传递给服务器：

> [http://domain.com/index.php?subdomain=subdomain&page=page&subpage=subpage](http://domain.com/index.php?subdomain=subdomain&page=page&subpage=subpage)

index.php 可以用来显示正确的页面信息。

我可以让页面和子页面正常工作，但不知道如何获取子域。注意：如果没有子域，我希望该字段留空或包含默认值。

任何帮助将不胜感激。:)

**编辑：**
为了澄清，我希望第一个 URL 是用户看到的并且可以输入到地址栏中，第二个 URL 是当用户导航到第一个 URL 时服务器加载的页面。

我的 .htaccess 文件

```
Options +FollowSymlinks -MultiViews -Indexes

RewriteEngine On
RewriteBase /

# Remove 'www'
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Add slashes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://resolutiongaming.com/$1/ [L,R=301]

# Subdomain redirect
RewriteCond %{HTTP_HOST} ^resolutiongaming.com$
RewriteRule ^webdev/$ http://webdev.resolutiongaming.com [R=301,L]
RewriteRule ^artwork/$ http://artwork.resolutiongaming.com [R=301,L]
RewriteRule ^music/$ http://music.resolutiongaming.com [R=301,L]

ErrorDocument 404 /error.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:20:27.863

您可以在根目录中的一个 .htacces 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST}  ^(?:www\.)?([^\.]+)\.domain\.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/([^/]+)/([^/]+)/?   [NC]
RewriteRule .*     http://domain.com/index.php?subdomain=%1&page=%2&subpage=%3  [R=301,L] 
```

它将永久重定向：

`http://subdomain.domain.com/page/subpage/`或者`http://www.subdomain.domain.com/page/subpage/`

到：

`http://domain.com/index.php?subdomain=subdomain&page=page&subpage=subpage`

要使规则生效，`/page/subpage/`必须保留传入的 URL 方案：。

要将永久重定向替换为静默映射，请`R=301`从 [R=301,L] 中删除或将其替换`R`为临时重定向。

# c++ - clang: stripping class names from the output

> ID：14560527
> 
> 赞同：1
> 
> 时间：2013-01-28T10:58:07.370
> 
> 标签：c++, clang, debug-symbols, clang++

I build a C++ project of mine using `clang++`, using the following command line command (split into lines):

```
clang++
  -std=c++11
  -W -Wall -Wextra -pedantic -Wno-newline-eof -Werror
  -O4
  -I<dirs>
  -L<dirs>
  -l<libs>
  -framework <frameworks>
  -D <defs>
  -o <filename>
  <files> 
```

However, when I run `strings <filename>`, several class names show up, despite the `-O4` in the command line. I've tried `-Wl,-s` which should tell llvm to strip all symbols, but that doesn't remove these.

The class names that show up seem to all have one thing in common: they have a vtable. One of these classes is :

```
class MyClass {
public:
    virtual void myFunc() = 0;  
}; 
```

It shows up as the symbol :

```
N9namespace7MyClassE 
```

I don't like it that my namespace and class names show up in the final file. How do I strip these? My binary is a command line utility, so only the `main` function should be exported.

* * *

Even after supplying `-fno-rtti` (as suggested by @n.m.), some names still remain, such as :

```
__ZN15MyClassInstance6myFuncEv 
```

(MyClassInstance being a subclass of the MyClass above)

Additionally, even the names of global variables are in the binary.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:27:50.960

我通过提供 clang 参数解决了这个问题`-fno-rtti`，它禁用了 RTTI，这是我无论如何都不使用的 C++ 功能。

[编辑]
看起来`-O4`并不暗示`strip`，最后几个对我的类名的引用可以通过执行来删除`strip`。

# python - os x 10.6.8 - Cannot input non-ASCII/UTF-8 chars (e.g: å, ä, ö) in Python Interactive Mode

> ID：14560531
> 
> 赞同：0
> 
> 时间：2013-01-28T10:58:22.040
> 
> 标签：python, encoding, utf-8, osx-snow-leopard, python-interactive

Running `OS X 10.6.8 Snow Leopard` I cannot input the scandinavian letters into the interpretive mode. The terminal bell sounds for every keystroke and nothing shows up. All letters show up as normal in the regular terminal environment. **Inputting UTF8 characters works fine in the Terminal, when running a python script, in PyDev and in the REPL**

Is there a problem with the interactive mode settings and these special characters?

I have installed and am running python `2.7.3` mainly, but the OS-provided Pythons have this problem too. (i.e when running `python2.5` or `python2.6` I still experience this problem.) I dont know if installing python 2.7 has changed some under library that it uses, maybe `readline` (I'm on thin ice here, guessing basically)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:34:24.457

听起来这里的问题是 python.org Python 期待 real ，并且对 Apple 提供的替代品`readline`不满意。`libedit`

有关该问题的说明，请参阅[`readline`](http://pypi.python.org/pypi/readline)PyPI 的文档。

您可以按如下方式修复它：

```
sudo /path/to/easy_install readline 
```

请注意，这`readline`是少数无法通过 正确安装的东西之一`pip`，因此您必须使用`easy_install`（或手动执行）。

python.org 2.x 安装程序不附带`easy_install`. 按照页面上的说明进行安装[`setuptools`](http://pypi.python.org/pypi/setuptools)。

最重要的是，请记住，在某些情况下，您最终可能会使用 Apple-python`easy_install`以及`/usr/local/bin`，`/usr/bin`这意味着您不能确定是否`/usr/local/bin/easy_install`会获得该`python.org`版本，因此请明确使用`easy_install-X.Y`.

如果您使用的是 Apple 已经提供给您的 XY 版本的 python.org（或其他）安装，即使这样也无济于事。`/usr/local/bin/easy_install-2.7`很可能是苹果的（因为它在我现在坐在的 10.8.2 机器上）。唯一安全的方法是检查 shebang 行并查看它使用的 Python 解释器。

或者，更简单地说，如果 Apple 已经为您提供了一个 python-XY，请不要安装它。严肃地说，有数百个问题来自这样做的人并遇到问题，而所有这些问题都可以通过使用 Apple 构建来避免。Apple 曾经发布过损坏的、不完整的和/或严重过时的 Python，但从 10.5 或 10.6 开始，他们一直在发布工作的、完整的、相当新的版本，包括额外的类似`easy_install`和`PyObjC`包括在内的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:19:29.320

我在“[如何为土耳其特殊字符（非 ascii）定义/声明 utf-8 代码点以将它们用作标准 utf-8 编码？ ”中讨论了几乎相同的问题。](https://stackoverflow.com/questions/14680059/how-to-define-declare-utf-8-code-points-for-turkish-special-chars-non-ascii-to)s 拥有 A 具有相对不同的字符代码和代码点，但所有 A(s) 将指向相同的字体代码。因此，虽然在任何语言中显示 A 都使用字体代码，但每个 A 都将小于其字母表中的任何字符，但 ascii z 永远不会小于 ŞşÇçÖö 或任何重音字符....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:27:32.417

由于您使用的是 10.6 未附带的 2.7.3，因此您显然已经安装了一些第三方 Python。

如果您查看“Mac OS X 64-bit/32-bit x86-64/i386 Installer (2.7.3) for Mac OS X 10.6 and 10.7”安装程序的 Python 2.7.3[下载页面，它会显示：](http://www.python.org/download/releases/2.7.3/)

> 您可能需要更新的 Tcl/Tk 安装来运行 IDLE 或使用 Tkinter，有关说明，请参阅注释 2。

在注释 2 下：

> 这里有关于 Mac OS X 上的 IDLE、Tkinter 和 Tcl/Tk 的重要信息。此外，在 Mac OS X 10.6 上，如果您需要构建仅安装了 32 位 Python 的 C 扩展模块，则需要 Apple Xcode 3，而不是 4。64 位/32 位 Python 可以使用 Xcode 3或 Xcode 4。

如果您点击[链接](http://www.python.org/download/mac/tcltk/)，它会解释 10.6 附带的 Tcl/Tk 版本的问题。请注意，在下表中，特别不推荐使用 Apple 8.5.7。

如果您想在 10.6 上将 IDLE 与非 Apple Python 一起使用，图表建议安装[ActiveTcl 8.5.13](http://www.python.org/download/mac/tcltk/#activetcl-8-5-13)。

该页面没有确切解释问题是什么，但如果我没记错的话，每当 TkInter 在某些情况下收到非 ASCII 字符时，Apple 的 Tk 就会崩溃，他们可以为 IDLE 想出的最佳解决方法就是拒绝那些字符，正如你所看到的。

如果您使用的是不同的 Python 2.7.3（Enthought、ActiveState、Homebrew、MacPorts、手工构建等），他们大多没有关于这个问题的完整文档，但同样的修复可能会起作用。

我相信 10.6 也是 Apple 开始发布相当现代的 Python 版本和一个可用的 IDLE 的时候，所以你可能只想使用它而不是一开始就使用第三方 Python。（但是，我可能记错了，这可能仅适用于 10.7 及更高版本。）

# width -

> ID：14560533
> 
> 赞同：0
> 
> 时间：2013-01-28T10:58:22.927
> 
> 标签：width, fixed, underline

我是 stackoverflow.com 的新手，这是我的第一篇文章，所以：

我想要一个带下划线的 h1 文本。该下划线将是一个图像，它应该具有 420 像素的固定宽度。h1 中的文本通常会比 420 像素宽，但有时会更短。现在我知道这些是将下划线作为图像的解决方案，但是如何仅为下划线设置固定宽度？

```
h1 {
background-image:url('images/hrBg.jpg');
background-position: 0px bottom;
background-repeat: repeat-x;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:15:01.260

创建宽度为 420px 的背景图像。

然后使用下面的css

```
 h1 {
      background:url('https://images.squarespace-cdn.com/content/v1/5834a5fd9de4bb511a531745/1572560269010-YEGGAHEJ1O3AG5OAMO7M/ke17ZwdGBToddI8pDm48kEnLsHrnzeww6Ind1smsg7N7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1UZMvWVOiG2zXPfa_FplZumXplNQ97KbZI2EjeHIoBACLnr1xKjsq_-rO8kOgOtwYvw/Burning-Up-BG.jpg?format=2500w') no-repeat left bottom;
      min-width:420px;
    }
```

```
<h1>Text here</h1>
```

这将确保背景仅显示一次到 420 像素。`min-width`如果内容`h1`小于 420px ，我已经添加了该属性。该`no-repeat`属性确保背景只显示一次，因为我们通过实际图像设置了长度。

# php - Split every array element and transform to multiple dimenssion array?

> ID：14560537
> 
> 赞同：1
> 
> 时间：2013-01-28T10:58:42.430
> 
> 标签：php, arrays, multidimensional-array

I have an array POST after submited the form:

```
$POST = Array
(
    [29#487_Mon] => 90,
    [29#487_Mon_power] => 50,
    [30#487_Thur]=>80,
    [30#487_Thur_power]=>90,
    [41#487_Wed]=>10,
    [41#487_Wed_power]=>20,

) 
```

And I want is transform the $POST array to more friendly format that look like this:

```
$Transform = array(
    [29]=>array(
            [487_Mon] => 90,
            [487_Mon_power] => 50
            ),
    [30]=>array(
            [487_Thur]=>80,
            [487_Thur_power]=>90
            ),
    [41]=>array(
            [487_Wed]=>10,
            [487_Wed_power]=>20
            )
    ) 
```

Anyone Know how to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:16:37.267

正如@Gordon 在评论中指出的那样，另外，您可以通过以下方式完成：

```
<?php
$Transform = array();
foreach($POST as $key => $val){
 $key_parts = explode("#", $key); //spliting 29#487_Mon to 29 and 487_Mon
 /*
 $key_parts[0] = 29
 $key_parts[1] = 487_Mon
 */
 $Transform[$key_parts[0]][$key_parts[1]] = $val;
}
echo  '<pre>';
print_r($Transform);
echo  '</pre>';
?> 
```

看[演示](http://phpfiddle.org/main/code/g73-6jq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:21:29.670

这是在扩展@Gordon 所说的内容。如果@Gordon 希望提交他的评论作为答案，我将收回我的答案。

测试和工作

```
<?
    if( $_POST['submit'] ) {
        echo "<pre>";
        print_r( $_POST );
        echo "</pre>";
    }
?>

<form action="" method="post">
    <input type="text" name="29[487_Mon]"/>
    <input type="text" name="29[487_Mon_power]"/>
    <br/><br/>
    <input type="text" name="30[487_Thur]"/>
    <input type="text" name="30[487_Thur_power]"/>
    <br/><br/>
    <input type="text" name="41[487_Wed]"/>
    <input type="text" name="41[487_Wed_power]"/>
    <br/><br/>

    <input type="submit" name="submit" />
</form> 
```

# linux - nopage() 方法实现

> ID：14560538
> 
> 赞同：2
> 
> 时间：2013-01-28T10:58:44.707
> 
> 标签：linux, linux-device-driver

任何人都知道如何在无页面方法中将虚拟地址转换为物理地址。参考设备驱动程序手册，nopage 方法给出为，

```
struct page *simple_vma_nopage(struct vm_area_struct *vma,
                unsigned long address, int *type)
{
    struct page *pageptr;
    unsigned long offset = vma->vm_pgoff << PAGE_SHIFT;
    unsigned long physaddr = address - vma->vm_start + offset;
    unsigned long pageframe = physaddr >> PAGE_SHIFT;

    if (!pfn_valid(pageframe))
        return NOPAGE_SIGBUS;
    pageptr = pfn_to_page(pageframe);
    get_page(pageptr);
    if (type)
        *type = VM_FAULT_MINOR;
    return pageptr;
} 
```

page_shift 是用于表示虚拟和物理内存地址偏移的位数。但是偏移变量是什么？如何通过对 address 和 vm_start 等虚拟地址变量的算术运算计算物理地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:08:50.703

感觉vm_pgoff的文档不是很清楚。这是内存区域第一页在 RAM 中的偏移量。因此，如果我们的 RAM 从 0x00000000 开始，并且我们的内存区域从 0x0000A000 开始，那么 vm_pgoff = 10。如果您考虑/重新访问 mmap 系统调用，那么您可以看到我们传递的“偏移量”是起始字节的偏移量“长度”字节将从中映射到内存区域的文件。该偏移量可以通过将其左移到 PAGE_SHIFT 值（即 12）转换为地址（即每页大小 4KB）

现在，不管 cr3 寄存器是否用于线性地址到物理地址的转换，当我们说“地址 - vm_start”时，这给出了地址之间部分的大小。例如：vm_start = 0xc0080000 地址 = 0xc0090000

```
address - vm_start = 0x00010000
physaddr    = (address - vma->vm_start) + offset;
            = 0x00010000 + (10 << PAGE_SHIFT)
            = offset_to_page_that_fault + start_addr_of_memoryRegion_in_RAM  
            = 0x00010000 + 0x0000A000
            = 0x0001A000 
```

现在，由于这是物理地址，因此我们需要通过 PAGE_SHIFT 值右移来转换为页帧编号，即 0x0001A000 >> 12 = 0x1A = 26（十进制）因此第 26 页帧必须加载文件中的数据正在映射。因此，通过使用 inode 的结构 address_sapce 从磁盘检索数据，该结构包含磁盘上页面位置（交换空间）的信息。一旦数据被引入，我们返回结构页面，它在发生此页面错误的 page_frame 中表示此数据。我们将此返回给用户。

这是我对最新的理解，但我没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:14:21.477

“simple_region_start”是从物理内存开始的偏移量，我们的子区域需要映射出来

示例：off = 物理内存开始（页对齐）= 0xd000 8000 simple_region_start = 0x1000 因此我们要映射的子区域开始的物理地址为 = 0xd000 8000 + 0x1000 = 0xd000 9000

现在虚拟大小是需要从可用物理内存映射的部分。这必须由用户正确定义。

simple_region_size = 指向我们需要映射的最后部分的物理地址。

因此，如果我们希望从可用的物理内存映射 8KB，那么计算过程如下

```
simple_region_size = physical address just beyond the last of our portion
simple_region_size = 0xd000 9000 + 0x2000 (for the 8KBs)    
simple_region_size = 0xd000 B000 
```

所以我们的 8KB 部分的范围从物理地址 [0xd000 B000 到 0xd000 9000] 因此物理大小，即 psize = 0x2000

我们执行完整性检查，即如果我们的物理内存部分的大小小于用户尝试使用该内存区域的全长虚拟地址范围映射的大小，那么我们会引发异常。即说前。vsize = 0x3000

否则，我们使用 API“remap_pfn_range”来映射物理内存中传递物理地址的部分，而不是像之前所做的那样映射页帧号，因为这是 IO 内存。我觉得它应该是前面提到的API“io_remap_page_range”。

所以它会把从物理地址 0xd000 9000 开始的那部分物理内存映射到从 vma->vm_start 的 vsize 开始的用户线性地址上。

注意：和以前一样，我还没有对此进行测试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:41:42.717

不，书中的陈述是正确的，因为如前所述，“物理”只是您想要映射出从“关闭”物理地址到“simple_region_size”的物理内存的区域/部分的起始地址" "simple_region_size" 值由用户决定。类似地，“simple_region_start”由用户决定。

```
simple_region_start >= off 
```

因此，用户可以映射的最大物理内存由以下因素决定： psize = simple_region_size - off 即从物理内存开始到部分结束。

但实际上将映射到这个内存区域的数量由“vma->vm_end - vma->vm_start”给出，并由vsize表示。因此，存在执行完整性检查的需要，因为用户可以获得比预期更多的东西。

```
Kind regards,
Sanjeev Ranot 
```

# backbone.js - 如何获取和过滤数据

> ID：14560543
> 
> 赞同：3
> 
> 时间：2013-01-28T10:59:02.510
> 
> 标签：backbone.js, backbone-views

在我的主干功能中，一切正常，即使是过滤器。但问题是，每当我单击过滤器类型并切换到另一个过滤器类型时，它都会从现有的过滤数据中过滤，而不是从服务器和过滤器中获取新数据......

如果我在我的过滤器函数上添加 fetch 调用，它会获取应用所有数据，而不过滤......我该如何解决这个问题......？

我的代码：

```
 $(document).ready(function(){
    var school = {};

    school.model = Backbone.Model.extend({
        defaults:{
            name:'no name',
            age:'no age'
        }
    });

    school.collect = Backbone.Collection.extend({
        model:school.model,
        url:'js/school.json',
        initialize:function(){
            this.sortVar = "name"
        }
    });

    school.view = Backbone.View.extend({
        tagName:'div',
        className:'member',
        template:$('#newTemp').html(),
        render:function(){
            var temp = _.template(this.template);
            this.$el.html(temp(this.model.toJSON()));
            return this;
        }
    });

    school.views = Backbone.View.extend({
        el:$('#content'),
        events:{
            'click #newData' : 'newArrival',
            'click #showName' : 'showByName',
            'click #showAge' : 'showByAge'
        },
        initialize:function(){
            _.bindAll(this);
            this.collection = new school.collect;
            this.collection.bind('reset', this.render);
            this.collection.fetch();
            this.childViews = [];
        },
        newArrival:function(){
            this.collection.fetch(); //it works fine, i use this for update
        },
        showByName:function(){
// this.collection.fetch(); //but i can't do this, it removes filtered data..
            this.sortVar = 'name';
            var filterType = _.filter(this.collection.models, function(item){
                return item.get('name') != '';
            })
            this.collection.reset(filterType); //resets without fetching (filtering  from existing datas..)
        },
        showByAge:function(){
// this.collection.fetch(); //but i can't do this, it removes filtered data..
            this.sortVar = 'age';
            var filterType = _.filter(this.collection.models,function(item){
                return item.get('age') != 0;
            })
            this.collection.reset(filterType); //resets without fetching (filtering from existing datas..)
        },
        render:function(){

            _.each(this.childViews, function(old){
                old.remove();    
            });

            this.childViews = [];

            var that = this;
            _.each(this.collection.models, function(item){
                that.renderItem(item);    
            });
        },
        renderItem:function(item){
            var newItem = new school.view({model:item});
            this.$el.append(newItem.render().el);
            this.childViews.push(newItem);
        }
    });

    var newSchool = new school.views;
    }); 
```

在此先感谢，我还有另外 2 种方法可以添加，即在显示数据时对姓名和年龄进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:42:37.933

这对我有用.. 谢谢大家。

```
showByAge:function(){
        var that = this;
        this.sortVar = 'age';
        this.collection.fetch()
        .done(function(){ // i am proceeding after i finish the fetch!
            var filterType = _.filter(that.collection.models,function(item){
                return item.get(that.sortVar) != 0;
            })
            that.collection.reset(filterType);
        })
    }, 
```

# python - ImportError: No module named elementtree.ElementTree

> ID：14560545
> 
> 赞同：0
> 
> 时间：2013-01-28T10:59:07.907
> 
> 标签：python, import

I am running python 2.7 and am picking up a project from a different developer so I just trying to get it to compile and was getting import errors because the old developer was using "import elementtree.ElementTree as ET" so I am going around and replacing that code with "import xml.etree.ElementTree as ET"

But now ran into this file that still wont compile. Here is the Traceback:

```
C:\Users\Daniel\Documents\Time clock\source\TimeClock>python timeclock.py
Traceback (most recent call last):
  File "timeclock.py", line 30, in <module>
    from CheckHoursDialog import CheckHoursDialog
  File "C:\Users\Daniel\Documents\Time clock\source\TimeClock\CheckHoursDi
alog.py", line 11, in <module>
    from StudentEarningReport import StudentEarningReport
  File "C:\Users\Daniel\Documents\Time clock\source\TimeClock\StudentEarni
ngReport.py", line 10, in <module>
    import elementtree.ElementTree as ET
ImportError: No module named elementtree.ElementTree 
```

Can anyone point me in the right direction?

Here is the first 40 lines of the file.

```
"""StudentEarningReportPanel

Panel to show what students earned, based on the StudentEarningReport.
"""
__history__ = """History:
3/18/2010: Added ShowXML button
"""
import wx
import wx.lib.scrolledpanel as scrolled

from datetime import datetime as DT
import xml.etree.ElementTree as ET

from PyCollapsiblePane import PyCollapsiblePane as PCP
#~ try:
    #~ from agw import pycollapsiblepane as PCP
#~ except ImportError: # if it's not there locally, try the wxPython lib.
    #~ import wx.lib.agw.pycollapsiblepane as PCP

CP = PCP.PyCollapsiblePane

class ReportPanel(scrolled.ScrolledPanel):
    """ReportPanel(parent, node)
    Parent is the wx.Window-based parent.
    Node is an ElementTree.Element created by StudentEarningReport.py
    """
    def OnPaneChanged(self, evt=None):
        self.SetupScrolling(scrollToTop=False)

    def __init__(self, parent, node):
        assert ET.iselement(node)
        #~ ET.dump(node)
        self.Elem = node
        scrolled.ScrolledPanel.__init__(self, parent, style=wx.BORDER_SIMPLE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:10:19.163

问题是你已经修复了`StudentEarningReportPanel.py`，但是你正在导入`StudentEarningReport.py`，你还没有修复。

# iphone - UINavigationController 方向

> ID：14560547
> 
> 赞同：0
> 
> 时间：2013-01-28T10:59:09.763
> 
> 标签：iphone, ios, objective-c

我有 UINavigationController 和几个视图控制器。这是它们的列表：主 -> 专辑 -> 图像

现在在第一个和第二个（主要和专辑）中，我希望 UINavigationController 不会旋转（仅纵向），而在第三个（图像）中，它可以旋转。

我已经为 UINavigationController 创建了类别：

```
-(BOOL)shouldAutorotate {
    if ([self.topViewController isKindOfClass:[MWPhotoBrowser class]]) {
        return YES;
    }
    return NO;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    if ([self.topViewController isKindOfClass:[MWPhotoBrowser class]]) {
        return YES;
    }
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

现在我的问题是，当我推动图像视图控制器并旋转设备（视图控制器旋转）并按回此处（专辑）时，视图控制器旋转到并且无法旋转回纵向。

顺便说一句：我注意到它只发生在 iOS 6 和 iPhone 5 的设备上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:43:53.290

您是否尝试过包含以下方法但为您的视图控制器返回正确的值？

`- (NSUInteger)supportedInterfaceOrientations {`

```
return UIInterfaceOrientationMaskPortraitUpsideDown; 
```

`}`

# php - Is it possible to call specific PHP function from mainfunction.php file through Ajax?

> ID：14560551
> 
> 赞同：-3
> 
> 时间：2013-01-28T10:59:26.127
> 
> 标签：php, javascript

> **Possible Duplicate:**
> [Call PHP Function using jQuery AJAX](https://stackoverflow.com/questions/4152431/call-php-function-using-jquery-ajax)

I have a PHP file containing all functions created by me. I just want to know, how can I call a specific function through Ajax?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:01:41.733

You could pass a get or post variable and use it to then using php call a specific function. WHat exactly are you trying to achieve ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:02:13.167

通过 GET 方法将函数名称发送到 php 页面，然后使用执行 _GET 值`call_user_func`

[http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:02:46.443

你可以使用[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php)：

```
$name = $_POST['function'];

if (in_array($name, $allowed_functions)) {
    $result = call_user_func($name);
} 
```

虽然这个设计很糟糕。为什么需要这样做？

# java - Java Window in another Window

> ID：14560553
> 
> 赞同：1
> 
> 时间：2013-01-28T10:59:30.410
> 
> 标签：java, swing, window, awt, mdi

Multi-window applications often have a main-window, and all other windows are kind of 'parented' to it. Minimizing such a *sub-window* will hide its content and show the title-bar at the bottom-left of the screen. Also, these windows do not have their own Icon in the Task-bar, only the main-window does.

1.  How can I make a window being attached this way to another window?
2.  If that is possible, is it also possible without a referenfe to the actual main window?

@2: I'm embedding Java into such an application and I would like to be able to use awt or swing additionally to the native dialogs, which have this behavior by default.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:03:40.907

请参阅[如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)。

![在此处输入图像描述](../Images/af9e38cf3c9f44b387975252eb9cd0c6.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:03:58.733

*   看看`JInternalFrames`申请`MDI`_

*   阅读[Oracle 教程，尝试代码示例](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

# pdf - PhoneGap InAppBrowser not loading pdf

> ID：14560556
> 
> 赞同：2
> 
> 时间：2013-01-28T10:59:49.883
> 
> 标签：pdf, cordova

I am using `PhoneGap` InAppBrowser to load `pdf` in my app. It is loading `pdf` in IOS, but there is no location bar shown, and on Android `pdf` is never loaded. Here is my code to load `pdf`

```
iabRef = window.open('sample.pdf', '_blank', 'location=yes'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:16:24.727

遇到与 2.4.0 相同的情况。`_system`我在公开通话中切换到使用浏览器。这并不理想，因为它打开了一个简单地下载文件的浏览器，但至少它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:56:39.313

不确定这是否算作答案，但我相信这是一个已知的错误。[**此处**](https://github.com/phonegap/phonegap/blob/46a0c4f330c5815e7b8dfcec94d02e223b2ec258/changelog)在 2.4.0 RC 中将其标记为已修复[。](https://github.com/phonegap/phonegap/blob/46a0c4f330c5815e7b8dfcec94d02e223b2ec258/changelog)[](https://github.com/phonegap/phonegap/blob/46a0c4f330c5815e7b8dfcec94d02e223b2ec258/changelog)

# paypal - Paypal IPN works in sandbox ipn sinulator but not in transactions

> ID：14560558
> 
> 赞同：0
> 
> 时间：2013-01-28T10:59:58.797
> 
> 标签：paypal, paypal-ipn

My ipn script works when it is tested by paypal ipn simulator, but not with sandbox transactions, here is my paypal button

```
<form name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" 
    method="post">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="rslege_1359359492_biz@gmail.com">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="item_name" value="Playershare">
    <input type="hidden" name="amount" value="9.99">
    <input type="hidden" name="return" value="http://rspsdb.org/test.php">
    <input type="hidden" name="notify_url" value="http://rspsdb.org/paypal/ipn.php">
    <input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" 
        border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:09:14.660

Paypal 的 IPN 在晚上/早上的某个时间停止工作。

[https://twitter.com/PayPalUK](https://twitter.com/PayPalUK)

# python - python manage.py runserver 不工作

> ID：14560561
> 
> 赞同：1
> 
> 时间：2013-01-28T11:00:04.607
> 
> 标签：python, django

我正在尝试通过[编写您的第一个 Django 应用程序来在我的 Mac 上学习 django](https://docs.djangoproject.com/en/dev/intro/tutorial01/#the-development-server)

我跑

```
django-admin.py startproject mysite 
```

它会创建它应该创建的文件。然后我尝试通过运行启动服务器

```
python manage.py runserver 8080 
```

没关系，消息是：

> 验证模型...
> 
> 发现 0 个错误 Django 版本 1.4.2，使用设置 'mysite.settings' 开发服务器运行在 http://127.0.0.1:8080/ 使用 CONTROL-C 退出服务器。

但是当我访问 127.0.0.1:8080 时，我得到一个 504 错误页面：

> 该页面无法显示
> 
> 系统无法与外部服务器 ( 127.0.0.1 ) 通信。Internet 服务器可能很忙，可能永久关闭，或者由于网络问题而无法访问。……

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:40:51.487

考虑到您正在使用代理（如评论中所述）。这个错误的原因：

> 该页面无法显示
> 
> 系统无法与外部服务器 ( 127.0.0.1 ) 通信。Internet 服务器可能很忙，可能永久关闭，或者由于网络问题而无法访问。……

是在代理上查找 127.0.0.1 并且在代理服务器上没有监听端口 8080

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T17:45:56.603

使用 'python manage.py runserver 8000' 而不是 'python manage.py runserver 8080' 为我工作。

# java - Activity.this 对 Context 的引用

> ID：14560564
> 
> 赞同：0
> 
> 时间：2013-01-28T11:00:07.890
> 
> 标签：java, inner-classes

我有一个`Activity`我`ListView`已经添加了一个监听器（`setOnItemClickListener`）的。当我从上面提到的侦听器中进入此方法时：

```
 public void onItemClick(AdapterView<?> parent, View view, int pos, long id ) 
```

为了访问活动，我这样做了：

```
 MyActivity host = (MyActivity) parent.getContext(); 
```

从`host`变量中，我可以访问所有`MyActivity`方法和属性（不是静态的），但我无法访问`MyActivity.this`引用。

有人可以解释我为什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:03:28.407

`MyActivity.this`当您的代码在内部类中运行时，将引用“外部” MyActivity 类的实例。 - 可以？如果是这样，你为什么需要这个`host`变量？

*更新：*我只是突然想到，您可能会错过这样一个事实，即您可以`MyActivity.this`从*内部*类中访问的所有内容，您都可以`host`在您的特定设置中访问。

*更新：*您似乎对`this`. 最初，它代表*这个对象*，即你的代码运行的类。

使用附加符号`Class.this`，Java 使您能够访问代码的外部类的实例，但只能从内部类访问。

在以下示例中，`Class.this`有效：

```
class A {
    int a;
    class B {
        void process_a_in_A() {
            A.this.a++;
        }
    }
    // however, this does NOT work b/c
    // static inner classes do not have references t oouter classes
    static class C {
        void process_a_in_A() {
            // error -- class A.C is detached from its outer class A
            A.this.a++;
        }
    }
} 
```

此外，在以下示例中，`Class.this`不起作用。原因很简单，系统无法知道是否存在类 A 的实例以及您想要引用的可能的许多类 A 实例中的哪一个。

```
class A {
    int a;
}

class B {
    void process_a_in_A() {
        // A here is a class name, not an object reference;
        // so A.this is meaningless in this context
        A.this.a++;
    }
} 
```

再次请注意，您提出的问题没有提供*具体*回答的必要信息，因此只能笼统地回答，看起来您对内部类和`Class.this`符号有错误的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:05:38.910

确切地说，在任何类中，您都可以通过其 Name -> Name.this 引用自身（尤其用于内部类）

由于您已经在变量 host 中引用了您的对象，为什么不直接使用它呢？！

# php - ORM QueryBuilder with Entity subobjects

> ID：14560575
> 
> 赞同：1
> 
> 时间：2013-01-28T11:00:52.897
> 
> 标签：php, symfony, doctrine-orm

I have 2 entities: author and person.

In the author entity, there is a person field which is in fact the person object:

```
/**
 * @ORM\ManyToOne(targetEntity="Person", inversedBy="submission_authors")
 * @ORM\JoinColumn(name="person_id", referencedColumnName="id")
 */
protected $person; 
```

Now, in the repository: AuthorRepository, I would like to search for some authors by their firstname. To do this, I need to access the person object for the corresponding author ans look on the person's firstname.

I tryed:

```
 public function searchAuthors($q)
{
    $authQB = $this->createQueryBuilder( 'a' )
    ->select('a')
    ->where("a.person.firstname LIKE '%".$q."%'");

    return $authQB->getQuery()->getResult();
} 
```

But the problem is that I am geting an error:

```
 [Syntax Error] line 0, col 78: Error: Expected Doctrine\ORM\Query\Lexer::T_LIKE, got '.' 
```

Coud you please help me on how to resolve that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:35:17.110

您必须`person`像这样访问您的关系：

```
$authQB = $this->createQueryBuilder( 'a' )
    ->select('a')
    ->leftJoin('a.person', 'p')
   //... 
```

要了解有关查询生成器和联合表的更多信息：

*   这个[SO](https://stackoverflow.com/questions/8031321/doctrine-2-query-builder-and-join-tables)帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:04:34.830

尝试

```
$authQB = $this->createQueryBuilder( 'a' )
    ->select('a')
    ->innerJoin('a.person', 'p')
    ->where('p.firstname LIKE :myStuff')
    ->setParameter('myStuff', '%'.$q.'%'); 
```

# mysql - Result of a SELECT into a new table

> ID：14560581
> 
> 赞同：3
> 
> 时间：2013-01-28T11:01:13.673
> 
> 标签：mysql, sql

Hi does anyone know how to add the result of your SELECT in a new table?

```
SELECT Postcode, Punten1, Punten2, Punten3, Punten4 FROM main_inboedel, ouderdom,
       levensfase, inkomen, oppervlakte
 WHERE main_inboedel.Ouderdomnummer = ouderdom.Ouderdomnummer
   AND main_inboedel.Levensfasenummer = levensfase.Levensfasenummer
   AND main_inboedel.Inkomennummer = inkomen.Inkomennummer
   AND main_inboedel.Oppervlaktenummer = oppervlakte.Oppervlaktenummer 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T11:02:56.813

```
CREATE TABLE tablename AS SELECT field1,field2 FROM othertable; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T11:02:27.693

```
select *
into NEWTABLE
from OLDTABLE 
```

# sql - How do i use the query listed below to retrieve the third highest earners' name and salary?

> ID：14560582
> 
> 赞同：0
> 
> 时间：2013-01-28T11:01:17.820
> 
> 标签：sql, oracle

The following example displays the top three earners’ names and salaries. These employees belong to department 1002 in the EMPLOYEE table:

```
SELECT ROWNUM, fname, salary
FROM (SELECT fname, salary
FROM employee
WHERE dept_id=1002
ORDER BY salary DESC)
WHERE ROWNUM <=3; 
```

In the above example, the inline view retrieves the first name and salary of employees working in department 1002 in descending order of their salary. The `WHERE` condition of the outer query specifies that the result set would return only the first three rows.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:30:33.840

[这与您之前的问题](https://stackoverflow.com/q/14561628/266304)几乎相同，或者至少答案与[您得到](https://stackoverflow.com/a/14563079/266304)的答案相似：

```
select fname, salary
from (
    select fname, salary, 
        dense_rank() over (order by salary desc) as rn
    from employee
    where dept_id=1002
)
where rn = 3; 
```

[`dense_rank()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions050.htm)是一种分析函数，可为您提供无间隙排名。[`rownum`伪](http://docs.oracle.com/cd/E14072_01/server.112/e10592/pseudocolumns009.htm)列或“高级”[`row_number()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions154.htm)分析函数 和[`rank()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions139.htm#sthref1415)，做类似的事情，但不同地对待关系。

使用`rownum`/ `row_number()`，两个具有相同薪水的记录将以任意顺序返回，具有不同的“排名”，即您将始终拥有排名为 1、2、3、4、5、6 的记录，即使是平局。

使用`rank()`时，将返回具有相同薪水的两条记录，并具有相同的排名值，并且排名值与下一个值之间会有差距`salary`。因此，您可能会获得 1、1、1、4、4、6 的排名——所有三个排名为“1”的记录都具有相同的薪水，并且两个记录都排名“4”具有相同的薪水。在分配相同等级的记录中，排序仍然是任意的。

使用`dense_rank()`，将返回具有相同薪水的两条记录并具有相同的排名值，并且“排名”值与下一个值之间**不会**`salary`有差距。因此，您可能会得到 1、1、1、2、2、3 的排名——所有三个排名为“1”的记录都具有相同的薪水，并且两个记录都排名“2”具有相同的薪水。在分配相同等级的记录中，排序仍然是任意的。

使用 CTE 中的一些示例数据：

```
with t as (
    select 20000 as salary from dual
    union all select 30000 from dual
    union all select 40000 from dual
    union all select 30000 from dual
    union all select 40000 from dual
    union all select 40000 from dual
)
select salary,
    row_number() over (order by salary desc) as row_num,
    rank() over (order by salary desc) as r,
    dense_rank() over (order by salary desc) as dr
from t;

    SALARY    ROW_NUM          R         DR
---------- ---------- ---------- ----------
     40000          1          1          1
     40000          2          1          1
     40000          3          1          1
     30000          4          4          2
     30000          5          4          2
     20000          6          6          3

6 rows selected. 
```

你`rank()`可能没有任何排名为`3`; 与`dense_rank()`您同级别的可能不止一个。`row_number()`将有一个，但如果有关系，您将不知道它是否实际上是第三高的。您需要确定哪些匹配您要执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:27:53.983

在内部查询中使用 a `rank() over (order by salary)`，在外部查询中只需选择 rank=3。

# mysql - Data change when saved in Mysql

> ID：14560584
> 
> 赞同：0
> 
> 时间：2013-01-28T11:01:20.097
> 
> 标签：mysql, ruby-on-rails

My code is this

```
db_con=Mysql.new('localhost', 'root', 'root', 'testing')
db_con.query("insert into users(comment_id) values('39y5w57e43ujv54nlrni4adihhr37jofs9g2st9r46mrqc77wyvpk23qb8f1il') 
```

but save in db

```
4xgyoq56j823pb63wu8pn62o82gte9nic583re9emuuagfhcokn08uq1hmk3ls 
```

and table structure is `comment_id varchar(255)` how can i solve this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:05:26.517

你做错了什么，通过这个列表：

1.  你确定插入**了新记录吗？**
2.  你确定你在看正确的桌子吗？
3.  你确定你在看正确的数据库吗？

如果它是一个测试数据库，请尝试截断表（从那里删除所有记录）并显示之前/之后的内容。

# javascript - Touch Events not captured by webview Android Samsung Galaxy Note

> ID：14560585
> 
> 赞同：2
> 
> 时间：2013-01-28T11:01:33.047
> 
> 标签：javascript, android, android-webview

I need to display some sort of data in an html page by a webview. I am getting a blank screen and on clicking that black screen all the data is getting displayed. I captured a screen shot of the log cat which shows "no_fast_draw = false". Does anybody have the same issue?

![enter image description here](../Images/5ea13ca3e815ed51245e813b180d0b0c.png)

# c# - can't find variable in <%=%>

> ID：14560587
> 
> 赞同：2
> 
> 时间：2013-01-28T11:01:37.740
> 
> 标签：c#, asp.net, web-applications

I added a new web form in asp.net application which named Home. In `Home.aspx.cs` I used these following codes :

```
public partial class Home : System.Web.UI.Page
{
    protected string str = "Hello and welcome to c#";
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

Then I go to `Home.aspx` but unfortunately It won't find `str` variable.

These are the codes in `Home.aspx` :

```
 <body>
    <form id="form1" runat="server">
    <div>
    <%=str %>
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:21:54.720

看来这是asp.net错误的问题。因为它向我显示错误，但是当我在没有调试的情况下开始时，它会向我显示字符串，之后不会显示任何错误。

顺便说一句，受保护的没有问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T11:07:11.977

你的`str`变量应该`public`不是`protected`，使用如下：

```
public partial class Home : System.Web.UI.Page
{
    public string str = "Hello and welcome to c#";
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

# alloy - semantic change in 4.2?

> ID：14560589
> 
> 赞同：4
> 
> 时间：2013-01-28T11:01:45.803
> 
> 标签：alloy

My question is whether the semantics of () in the declaration of fields had changed in Alloy 4.2\.

I read in "Software Abstractions" that

```
addr: (Book -> Name) -> lone Addr 
```

means that the relation addr associates **at most** one address with each address book and name pair but this does not hold when running Alloy 4.2

For instance, for

```
sig Book, Name, Addr  {}
sig AddBX {
  addr : (Book -> Name) -> lone Addr
}

run XRun {
  some B : Book, N : Name, X : AddBX | #X.addr[B][N] = 2
} 
```

Alloy 4.2 finds a model instance which has for instance AddBX$2 with

```
Book$1 ->Name$0 ->Addr$0
Book$1 ->Name$0 ->Addr$1
Book$1 ->Name$0 ->Addr$2 
```

If I use instead

```
addr : Book -> Name -> lone Addr 
```

then no instance for the same run is found. This seems to indicate that in Alloy 4.2 this is how to declare that the relation addr associates **at most** one address with each address book and name pair but I would like to have a confirmation for this.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:00:01.330

这实际上是 v4.2 中的一个 bug，正确的行为是 Alloy4.1.10 实现的。

我创建了修复此问题的 v4.2 快照，您可以在此处下载：

[http://alloy.mit.edu/alloy/downloads/alloy4.2_2013-01-28.jar](http://alloy.mit.edu/alloy/downloads/alloy4.2_2013-01-28.jar)

感谢您报告此错误。

# doctrine-orm - 教义：具有两个多对多关系的复杂选择

> ID：14560598
> 
> 赞同：0
> 
> 时间：2013-01-28T11:02:19.160
> 
> 标签：doctrine-orm, many-to-many, query-builder

我需要在问题跟踪系统的表中查询一些问题，通过一个复杂的条件限制此查询：

问题（实体）被分组为类别（另一个实体）。人员（实体）是多个角色（第四个实体）的成员，这是一种多对多关系。最后，一个角色可以访问一个或多个类别，这是第二个 ManyToMany 关系。

```
<?php

/**
 * @Entity
 * @Table(name="issue")
 */
class Issue
{
    /**
     * @ManyToOne(targetEntity="Category", fetch="EAGER")
     * @JoinColumn(name="category", referencedColumnName="id", onDelete="RESTRICT", nullable=false)
     */
    private $category;
    …
}

/**
 * @Entity
 * @Table(name="category")
 */
class Category
{
    /**
     * @ManyToMany(targetEntity="Role", mappedBy="categories")
     */
    private $roles;
    …
}

/**
 * @Entity
 * @Table(name="role")
 */
class Role
{
    /**
     * @ManyToMany(targetEntity="Person", mappedBy="roles")
     */
    private $persons;

    /**
     * @ManyToMany(targetEntity="Category", inversedBy="roles")
     * @JoinTable(name="role_has_access_on_category",
     *  joinColumns={@JoinColumn(name="role_id", referencedColumnName="id")},
     *  inverseJoinColumns={@JoinColumn(name="category_id", referencedColumnName="id")}
     * )
     */
    private $categories;
    …
}

/**
 * @Entity
 * @Table(name="person")
 */
class Person
{   
    /**
     * @ManyToMany(targetEntity="Role", inversedBy="persons")
     * @JoinTable(name="person_is_member_of_role",
     *  joinColumns={@JoinColumn(name="person_id", referencedColumnName="id")},
     *  inverseJoinColumns={@JoinColumn(name="role_id", referencedColumnName="id")})
     */
    private $roles;
    …
} 
```

我已经把除了关系之外的所有字段都留下了，当然还有主键和更多的列……</p>

我想检索属于具有给定主键的人可以通过其所属角色访问的类别的所有问题。

一开始我只是开始试验如何查询多对多关系，所以下面的代码与我的目标并不真正相似。我终于找到了如何获取查询以检索一个多对多关系的另一端，因此我已经可以获取一个人所属的角色。但是此查询不会获取角色有权访问的类别。

```
$qb = $this->em->createQueryBuilder();
$qb->select('person')
   ->addSelect('role')
   ->addSelect('category')
   ->from('Person', 'person')
   ->innerJoin('person.roles', 'role')
   ->innerJoin('role.categories', 'category');

$result = $qb->getQuery()->getResult(); 
```

$result 包含具有所有关联角色的人员数据，但包含一个空白的类别数组而不是实体。最终的查询当然会从问题方面开始，但现在我只想打通到另一边……</p>

所以现在我想知道我是否必须扮演所有角色并遍历它们以获取所有类别。没有更简单的教义方法吗？

顺便说一句，这就是我要使用的 SQL：

```
SELECT issue.* FROM person AS p, person_is_member_of_role AS pim, role_has_access_on_category AS rha, issue
WHERE
    p.id = pim.person_id AND
    pim.role_id = rha.role_id AND
    rha.category_id = todo.category AND
    p.id = ?; 
```

我希望这一切都能以某种方式弄清楚，否则我会修改我的问题......</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:55:44.490

通过尝试将所有连接条件放在`WHERE`子句中，您将其过度复杂化。

如果我正确理解了问题，则查询如下所示：

```
SELECT
    i
FROM
    Issue i
JOIN
    i.category c
JOIN
    c.roles r
JOIN
    r.persons p
WHERE
    p.id = :personId 
```

翻译成`QueryBuilder`API：

```
$qb = $entityManager->createQueryBuilder();
$issues = $qb
    ->select('i')
    ->from('Issue', 'i')
    ->innerJoin('i.category', 'c')
    ->innerJoin('c.roles', 'r')
    ->innerJoin('r.persons', 'p')
    ->andWhere($qb->expr()->eq('p.id', ':personId'))
    ->setParameter('personId', $personId)
    ->getQuery()
    ->getResult(); 
```

`QueryBuilder`此外，如果没有充分的理由使用它，请考虑避免使用它。毕竟，它只是一个字符串生成器。

# c++ - 输出文件中奇怪的空字符序列

> ID：14560600
> 
> 赞同：1
> 
> 时间：2013-01-28T11:02:33.333
> 
> 标签：c++, file-io, ofstream, null-character

我将图形写入简单的文本文件格式（邻接表）。在一个例子中，我发现生成的文件包含一排奇怪的很长的“NUL”字符。

![在此处输入图像描述](../Images/c7485cc9d4c3e520efec8199bde9aaa9.png)

这些空字符可能来自哪里？他们的意思是什么？

生成文件的代码是

```
void GraphIO::writeAdjacencyList(Graph& G, std::string path) {
    std::ofstream file;
    file.open(path.c_str());

    G.forallNodes([&](node v) {
        file << v;
        G.forallNeighborsOf(v, [&](node x) {
            file << " " << x;
        });
        file << std::endl;
    });
    INFO("wrote graph to file: " << path);
} 
```

对所有节点的迭代实现为：

```
template<typename Callback>
inline void EnsembleClustering::Graph::forallNodes(Callback func, std::string par) {
    assert ((par == "") || (par == "parallel"));
    int64_t n  = this->numberOfNodes();
    #pragma omp parallel for if (par == "parallel")
    for (node v = this->firstNode(); v <= n; ++v) {
        // call node function
        func(v);
    }
} 
```

编辑：类型`node`只是一个 typedef`int64_t`

# xcode - MKMapView 不会在 iOS6 的 iPad REAL DEVICE 上缩放和动画

> ID：14560607
> 
> 赞同：3
> 
> 时间：2013-01-28T11:02:52.983
> 
> 标签：xcode, ipad, ios-simulator, mkmapview

我在每一行都显示了带有坐标（存储在数组中）的 UITableView，当我点击表格行时，我想在这些坐标上居中（缩放和动画）我的 MKMapView。这是简单的经典 didSelectRowAtIndexPath 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    latitude = [dataSourceLatitude objectAtIndex:indexPath.row];
    longitude = [dataSourceLongitude objectAtIndex:indexPath.row];

    MKCoordinateRegion region;
    region.center.latitude = latitudine.floatValue;
    region.center.longitude = longitude.floatValue;
    region.span.latitudeDelta = 0.20;
    region.span.longitudeDelta = 0.20;
    [map setRegion:region animated:TRUE];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

好吧，它适用于所有模拟器和设备，但不适用于 iOS6 的 iPad REAL DEVICE：只有在第一次点击表格行时，我才能看到地图缩放和坐标中心；在另一行上点击后，我看到地图直接以坐标为中心，没有缩放和动画。所以情况是这样的：

```
iPhone 5.1 simulator = it works!
iPad 5.1 simulator = it works
iPhone 5.1 REAL DEVICE = it works!

iPhone 6 simulator = it works!
iPad 6 simulator = it works
iPad 6 REAL DEVICE = it DOESN'T WORK! 
```

**编辑：** pinView animatesDrop 也有问题：在带有 iOS6 的 iPad REAL DEVICE 上，我看不到下降动画，但大头针直接在地图上捕捉。我使用了来自@Anna Karenina 的优雅代码，它仅在 iOS6 上不起作用：

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)annotationViews
{
    NSTimeInterval delayInterval = 0;       
    for (MKAnnotationView *annView in annotationViews)
    {
        CGRect endFrame = annView.frame;           
        annView.frame = CGRectOffset(endFrame, 0, -500);            
        [UIView animateWithDuration:1.500
                              delay:delayInterval
                            options:UIViewAnimationOptionAllowUserInteraction
                         animations:^{ annView.frame = endFrame; }
                         completion:NULL];         
        delayInterval += 0.1500;
    }
} 
```

这是一个众所周知的问题吗？我可以解决吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:52:49.417

在所有这些情况下，您是否使用完全相同的坐标？如果当前视图离目标视图太远，动画将被跳过。例如：整个欧洲 -> 意大利 = 平滑缩放。1st Street，Nobodyville，OH -> Le First Street，PetiteVille，France = 即时快照。

# javascript - 使用 jQuery 基于用户输入的复选框（到另一个复选框）

> ID：14560608
> 
> 赞同：2
> 
> 时间：2013-01-28T11:02:54.463
> 
> 标签：javascript, jquery

这是一个非常简单的 jQuery 用法，我无法使用。

当一个复选框被选中时，我希望另一个被选中。

**HTML：**

```
<input onchange="toggleRegion()" id="ESARO" type="checkbox" class="region"
value="ESARO" name="ESARO">ESARO

<br /><br />

<input type="checkbox" class="country" value="Afghanistan" name="country2"
/>Afghanistan 
```

**jQuery：**

```
function toggleRegion() {
    if ($('#ESARO').is(':checked')) {
        $('input[value="Afghanistan"]').attr('checked', true);
    }
} 
```

**jsfiddle：**

[http://jsfiddle.net/jsJU8/](http://jsfiddle.net/jsJU8/)

**我试过的：**

我有另一个函数，它按类对一组复选框做非常相似的事情，效果很好：

```
function toggleStatus() {
if ($('#TLO1').is(':checked')) {
        $('.country').attr('checked', true);

    } 
} 
```

所以我认为错误在于按值而不是按类选择元素，因为这是函数之间的唯一区别。

为此，我尝试调整选择器的语法以匹配我发现的各种示例（单引号、双引号、无引号等），但没有任何运气。#

尽管我注意到我使用 javascript (onChange) 调用 jQuery 函数可能是一个错误。这是一个问题吗？

非常感谢所有帮助-谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:04:51.060

您的代码正在运行，但您必须在第一个下拉菜单中选择*no-wrap (body)选项。*

**[现场演示](http://jsfiddle.net/jsJU8/1/)**

```
function toggleRegion() {
    if ($('#ESARO').is(':checked')) {
        $('input[value="Afghanistan"]').attr('checked', true);
    }
} 
```

![在此处输入图像描述](../Images/6dbd46ad0b87c5974e6eb6ec8c63d3cd.png)

# spyware - 什么是 adobe 扩展管理器 cs6/replace.exe

> ID：14560613
> 
> 赞同：0
> 
> 时间：2013-01-28T11:03:27.767
> 
> 标签：spyware

当我在笔记本电脑上运行 Malwarebytes 时，它会报告`Replace.exe`我`Adobe Extension Manager CS6`文件夹中调用的文件是间谍软件，并希望将其删除。请您告诉我这是否是合法的 Adob​​e 文件？

感谢期待，尼克德拉克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:50:51.927

奇怪的。我刚刚得到了同样的标志。[在恶意软件字节论坛](http://forums.malwarebytes.org/index.php?showtopic=121789)上阅读，这是一个误报。

# php - 推进和 PFBC 3.1 中的验证过程错误

> ID：14560618
> 
> 赞同：0
> 
> 时间：2013-01-28T11:03:42.810
> 
> 标签：php, forms, propel

我正在使用 Propel 和 PFBC（来自 Builder 类的 php）。我使用propel php orm（数据库）在xml文件中编写了验证，现在我想在单击登录按钮时使用它们。这意味着我想检查表单变量和数据库验证规则的验证。我的 xml 代码看起来像这样

```
<table name="names" phpName="Name">
<column name="nameid" phpName="Nid" type="integer" size="11" required="true" primaryKey="true"
autoIncrement="true" description="Name ID"/>
<column name="name" phpName="Name" type="varchar" size="50" required="true"
description="Name"/>
<validator column="name">
<rule name="required" message="Name is Required"/>
<rule name="minLength" value="3" message="Enter Valid Full-Name, Minimum of 3 characters"/>
<rule name="maxLength" value="20" message="Invalid Entry"/>
<rule name="match" value="/^[\w]+$/" message="No Special Character Allowed"/>
<rule name="unique" />
</validator>
</table>

<table name="relations" phpName="Relations">
<column name="rid" type="integer" size="11" required="true" primaryKey="true" autoIncrement="true"
description="Relational ID"/>

<column name="pnid" type="integer" size="11" required="true" description="name User ID"/>

<column name="rnid" type="integer" size="11" required="true" description="name Relationship ID"/>

<column name="relation" type="varchar" size="100" required="true" description="Relationship"/>

<validator column="relation">
<rule name="required" message="Relationship Type is Required" />
<rule name="match" value="/^([\w])+([\.\w\-]+)+$/" message="Enter a Valid String" />
<rule name="minLength" value="3" message="Enter a Valid Relation Ship"/>
<rule name="maxLength" value="20" message="Invalid Entry"/>
</validator>

<foreign-key foreignTable="names" onUpdate="CASCADE" onDelete="CASCADE">
<reference local="pnid" foreign="nid" />
<reference local="rnid" foreign="nid" />
</foreign-key>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:30:23.557

我猜你只是想知道如何运行 Propel 的验证？如果是这样，您可以这样做：

```
$name = new Name();
$name->setName($_POST['Name']); // or however you want to do it
// set other object properties

if (!$name->validate()) {
  $errors = $name->getValidationFailures();
  foreach ($errors as $field => $error) {
    // do something with the valiadtion errors
  }
} 
```

# opengl - 使用几何着色器优化立方体渲染

> ID：14560619
> 
> 赞同：2
> 
> 时间：2013-01-28T11:03:43.163
> 
> 标签：opengl, optimization, voxel, geometry-shader

在我的第一个 opengl 'voxel' 项目中，我使用几何着色器从 gl_points 创建立方体，它工作得很好，但我相信它可以做得更好。在 alpha 颜色中，我传递有关应该渲染哪些面的信息（以跳过与其他立方体相邻的面），然后使用“参考”立方体定义创建可见面的顶点。每个点乘以 3 个矩阵。本能告诉我，也许整张脸都可以乘以它们而不是每个点，但是我的数学能力很差，所以请指教。

```
#version 330 
layout (points) in;
layout (triangle_strip,max_vertices=24) out;

smooth out vec4 oColor;
in VertexData 
{
    vec4 colour;
    //vec3 normal;
} vertexData[];

uniform mat4 cameraToClipMatrix;
uniform mat4 worldToCameraMatrix;
uniform mat4 modelToWorldMatrix;

const vec4 cubeVerts[8] = vec4[8](
    vec4(-0.5 , -0.5, -0.5,1),  //LB   0
     vec4(-0.5, 0.5, -0.5,1), //L T   1
    vec4(0.5, -0.5, -0.5,1), //R B    2
    vec4( 0.5, 0.5, -0.5,1),  //R T   3
                        //back face
    vec4(-0.5, -0.5, 0.5,1), // LB  4
     vec4(-0.5, 0.5, 0.5,1), // LT  5
    vec4(0.5, -0.5, 0.5,1),  // RB  6
     vec4(0.5, 0.5, 0.5,1)  // RT  7
    );

const int  cubeIndices[24]  = int [24]
    (
      0,1,2,3, //front
      7,6,3,2, //right
      7,5,6,4,  //back or whatever
      4,0,6,2, //btm 
      1,0,5,4, //left
      3,1,7,5
    );      

void main()
{       
    vec4 temp;  
    int a = int(vertexData[0].colour[3]);
    //btm face
    if (a>31)
    {
        for (int i=12;i<16; i++)
        {
            int v = cubeIndices[i];
            temp = modelToWorldMatrix * (gl_in[0].gl_Position + cubeVerts[v]);
            temp = worldToCameraMatrix * temp;
            gl_Position = cameraToClipMatrix * temp;
            //oColor = vertexData[0].colour;
            //oColor[3]=1;
            oColor=vec4(1,1,1,1);       
            EmitVertex();
        }   
        a = a - 32;
        EndPrimitive(); 
    }
    //top face
    if (a >15 )
...
} 
```

-------- 更新代码：-----

```
//one matrix to transform them all
mat4 mvp = cameraToClipMatrix * worldToCameraMatrix * modelToWorldMatrix;
//transform and store cube verts for future use 
for (int i=0;i<8; i++) 
{
    transVerts[i]=mvp * (gl_in[0].gl_Position + cubeVerts[i]);
}
//btm face
if (a>31)
{
    for (int i=12;i<16; i++)
    {
        int v = cubeIndices[i];
        gl_Position = transVerts[v];
        oColor = vertexData[0].colour*0.55;
        //oColor = vertexData[0].colour;
        EmitVertex();
    }   
    a = a - 32;
    EndPrimitive(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:56:10.417

在 OpenGL 中，您不使用面（或线，就此而言），因此您不能将变换应用于面。您需要对构成该面的顶点执行此操作，就像您正在做的那样。

可能的优化是您不需要像您那样分离矩阵转换。如果您在应用程序代码中多次使用它们，并将它们作为单个统一传递到您的着色器中，这将节省一些时间。

另一个优化是在开始时循环转换八个立方体顶点，将它们存储到本地数组，然后在 if 逻辑中引用它们的转换位置。现在，如果您渲染立方体的每个面，您将变换 24 个顶点，每个顶点 3 次。

# ubuntu - 如何在 Ubuntu 上创建 Windows 安装程序？

> ID：14560621
> 
> 赞同：1
> 
> 时间：2013-01-28T11:03:46.287
> 
> 标签：ubuntu

我想在我的 Ubuntu 服务器上创建一个 Windows 安装程序。有谁知道哪个安装创建者可以用于这个目的，除了[NSIS](http://forums.winamp.com/showthread.php?t=300326)吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:14:49.357

我在[WiX](http://wix.sourceforge.net)上取得了成功（使用`wine`Windows 版本`mono`）。

# git - git post-receive 钩子不删除文件

> ID：14560625
> 
> 赞同：3
> 
> 时间：2013-01-28T11:04:10.233
> 
> 标签：git

我目前正在尝试 git，并且正在尝试创建一个工作流，以便推送到服务器上的裸远程 repo 将根据不同的分支更新 2 个不同的站点。

接收后挂钩是：

```
#!/bin/sh
GIT_WORK_TREE=/www/development/ git checkout -f master
GIT_WORK_TREE=/www/production/ git checkout -f production 
```

基于[https://stackoverflow.com/a/3838804/1097483](https://stackoverflow.com/a/3838804/1097483)但有一些修改。

不幸的是，在测试时，将新的测试文件提交到任何分支都会被推送并成功更新 web 根目录，但是对于删除相同的测试文件，web 根目录仍然保留已删除文件的副本。

有谁知道我怎样才能让 post-receive 挂钩强制删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:13:39.537

您可能应该使用[`git-reset`](http://git-scm.com/docs/git-reset)and [`git-clean`](http://git-scm.com/docs/git-clean)：

```
#!/bin/sh
GIT_WORK_TREE=/www/development/ git reset --hard master
GIT_WORK_TREE=/www/development/ git clean -fdx
GIT_WORK_TREE=/www/production/ git reset --hard production
GIT_WORK_TREE=/www/production/ git clean -fdx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:12:56.813

我认为工作树检出不会在工作目录中记录有关存储库的任何信息。因此，当更新已经签出的版本时，Git 将无法判断它必须应用哪个差异以及需要删除哪些文件。

最简单的解决方案是在签出之前删除文件夹中的所有文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:13:32.313

我最终做了

```
#!/bin/sh
GIT_WORK_TREE=/www/development/ git checkout -f master
GIT_WORK_TREE=/www/development/ git clean -fdx
GIT_WORK_TREE=/www/production/ git checkout -f production
GIT_WORK_TREE=/www/production/ git clean -fdx 
```

基于@Koraktor 的回答。

# perl - 如果从 cgi 运行，Email::Send::Gmail 无法连接到服务器

> ID：14560632
> 
> 赞同：0
> 
> 时间：2013-01-28T11:04:29.580
> 
> 标签：perl, email, cgi, connect, send

每当我使用 Email::Send::Gmail 运行简单的发送电子邮件功能时，我都会收到此错误：

[2013 年 1 月 28 日星期一 11:37:57] [错误] [客户端 31.171.245。*] 发送电子邮件时出错：Email::Send::Gmail: 在 /usr/local/share/perl5/Email/Send.pm 第 252 行连接到服务器 smtp.gmail.com 时出错，引用者：http:* //**.cgi

但是，从命令行运行时完全相同的代码正在工作。从命令行远程登录时可以使用 smtp.gmail.com。这是因为坚持还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:53:42.070

好吧，我明白了。似乎 CentOS 上的 selinux 阻止了来自 httpd 的外部连接，因此脚本没有连接。

你需要输入这个

> setsebool -P httpd_can_network_connect=1

为了连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T11:36:54.693

尝试（在您的 cgi 脚本中）这样做：

```
use Net::SMTP::SSL;
Net::SMTP::SSL->new( 'smtp.gmail.com', Port => 465, Debug => 1 ); 
```

并查看调试信息是否告诉您任何有用的信息。

您的 cgi 脚本是否可能使用不同的 perl，安装了不同的模块？

# eclipse - Maven Eclipse 插件尝试下载文件名中带有双连字符的源

> ID：14560652
> 
> 赞同：1
> 
> 时间：2013-01-28T11:05:36.553
> 
> 标签：eclipse, maven

为什么 Maven Eclipse 插件会尝试下载文件名中带有双连字符的源 JAR？请参见下面的示例：在所有情况下，URL 的最后一位都应该是`spring-web-3.0.5.RELEASE-sources.jar`（一个连字符）而不是`spring-web-3.0.5.RELEASE--sources.jar`（两个连字符）。

*我正在努力找出这是否是由于插件中的错误、Maven 元数据或其他原因造成的。*

这是 Maven 运行的示例输出，当使用`mvn eclipse:eclipse -DdownloadSources=true -DdownloadJavadocs=true -DforceRecheck=true`

```
Downloading: http://artifactory.local:8081/artifactory/repo/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository central (http://artifactory.local:8081/artifactory/repo)
Downloading: http://repo1.maven.org/maven2/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository default (http://repo1.maven.org/maven2)
Downloading: http://maven.springframework.org/release/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository spring-maven-release (http://maven.springframework.org/release)
Downloading: http://maven.springframework.org/milestone/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository spring-maven-milestone (http://maven.springframework.org/milestone)
Downloading: http://spring-roo-repository.springsource.org/release/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository spring-roo-repository (http://spring-roo-repository.springsource.org/release)
Downloading: https://repository.jboss.org/nexus/content/repositories/releases/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository JBoss Repo (https://repository.jboss.org/nexus/content/repositories/releases)
Downloading: https://spring-roo-equals-roo-addon.googlecode.com/svn/maven-repository//org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository googlecode.rooequals.repo (https://spring-roo-equals-roo-addon.googlecode.com/svn/maven-repository/)
Downloading: https://spring-roo-equals-roo-addon.googlecode.com/svn/maven-snapshot-repository//org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE--sources.jar
[INFO] Unable to find resource 'org.springframework:spring-web:java-source:-sources:3.0.5.RELEASE' in repository googlecode.rooequals.snapshotrepo (https://spring-roo-equals-roo-addon.googlecode.com/svn/maven-snapshot-repository/) 
```

插件配置：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.9</version>  <!-- Note 2.8 does not work with AspectJ aspect path -->
    <configuration>
      <downloadSources>true</downloadSources>
      <downloadJavadocs>false</downloadJavadocs>
      <wtpversion>2.0</wtpversion>
      <additionalBuildcommands>
        <buildCommand>
          <name>org.eclipse.ajdt.core.ajbuilder</name>
          <arguments>
            <aspectPath>org.springframework.aspects</aspectPath>
          </arguments>
        </buildCommand>
        <buildCommand>
          <name>org.springframework.ide.eclipse.core.springbuilder</name>
        </buildCommand>
      </additionalBuildcommands>
      <additionalProjectnatures>
        <projectnature>org.eclipse.ajdt.ui.ajnature</projectnature>
        <projectnature>com.springsource.sts.roo.core.nature</projectnature>
        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
      </additionalProjectnatures>
    </configuration>
  </plugin> 
```

**更新 1**

Maven版本是：

```
> mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100)
Java version: 1.6.0_37
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x" version: "10.6.8" arch: "x86_64" Family: "mac" 
```

# android - 我的应用中的 Google Play

> ID：14560655
> 
> 赞同：1
> 
> 时间：2013-01-28T11:05:44.573
> 
> 标签：android, google-play

我的应用程序能够允许用户从 Play 商店下载额外的 apk。

是否可以打开仅显示可嵌入应用程序的 apk 的 web 视图或其他类型的视图？

我在 Play 商店中有其他应用程序无法嵌入此应用程序，因此需要确保这些应用程序不会显示在视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:09:21.860

您可以制作自己的链接列表。

列表中的每个项目都可以将您定向到商店中的特定 apk。

# php - 无法打开流：是一个目录

> ID：14560658
> 
> 赞同：8
> 
> 时间：2013-01-28T11:05:50.857
> 
> 标签：php, file-upload, warnings

我在尝试使用 php 将上传的文件从临时文件夹移动到所需的文件时收到以下警告

警告：move_uploaded_file(test/) [function.move-uploaded-file]：无法打开流：是第 69 行 /home/..../filename.php 中的目录

警告：move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpKrCpQw' to 'test/' in /home/..../filename.php on line 69

以下是给出错误的第 67 和 69 行：

```
$destination = "test/". $name;

$answer = move_uploaded_file($_FILES['user_file']['tmp_name'],$destination); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T11:08:00.063

好像你的名字是空的

```
$destination = "test/". $name; 
```

回显你的名字，看看那里有什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-21T14:30:18.147

对我来说，这是文件大小。

因此，检查 php.ini 以查看上传的文件是否`upload_max_filesize`超过`post_max_size`.

或者可能在 Laravel 或 js 中添加验证规则。

# c# - 将当前页面 HTML 转发回服务器

> ID：14560674
> 
> 赞同：1
> 
> 时间：2013-01-28T11:07:36.847
> 
> 标签：c#, asp.net

对于我的一个项目，我有一个奇怪的要求，我希望将当前页面 html 发送回服务器，在那里我可以捕获它并保存到文本文件中。有什么方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:11:32.447

您可以通过使用获取整页的 html`document.body.innerHTML`

这是演示：http: [//jsfiddle.net/qCTvE/4/](http://jsfiddle.net/qCTvE/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:13:26.817

我认为这是可能的。我假设您正在使用网络表单。

您可以使用 javascript 获取 html 并存储在隐藏字段中：

```
document.getElementById('<%= hidHTML.ClientID %>').value = encodeURI(document.body.innerHTML); 
```

在服务器上，您可以使用 HttpUtility 解码并保存到数据库

# javascript - 使用变量重建 DOM 对象

> ID：14560676
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:07:39.767
> 
> 标签：javascript, variables, dom, element, variable-assignment

是否可以通过变量声明来缩小 DOM 引用？

例如`document.documentElement`：

```
var d = document;
console.log(d[d + 'Element']); // undefined
console.log(d[d] + 'Element'); // undefinedElement 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:13:33.980

它不起作用，因为`document`对象的字符串值不是 string `'document'`，它类似于`'[object HTMLDocument]'`（可能因浏览器而异）。

当您将字符串`'Element'`与`document`对象连接时，对象会隐式转换为字符串，并且您会得到一个类似`'[object HTMLDocument]Element'`,`document['[object HTMLDocument]Element']`且未定义的字符串。

# arrays - 如何访问盒装数组的第 n 列？

> ID：14560677
> 
> 赞同：3
> 
> 时间：2013-01-28T11:07:44.900
> 
> 标签：arrays, j

鉴于我有一个带形状的盒装数组`4 3`

```
v =. 4 3$'x1'; 'y1'; 'z1'; 'x2'; 'y2'; 'z2'; 'x3'; 'y3'; 'z3'
v
NB. +--+--+--+
NB. |x1|y1|z1|
NB. +--+--+--+
NB. |x2|y2|z2|
NB. +--+--+--+
NB. |x3|y3|z3|
NB. +--+--+--+
NB. |x1|y1|z1|
NB. +--+--+--+ 
```

## 选择

我可以通过`1{::v`

```
1{::v
NB. Get the second row
NB. +--+--+--+
NB. |x2|y2|z2|
NB. +--+--+--+ 
```

## 投影

但是如何访问第二列？

```
NB. Get the second column
NB. +--+
NB. |y1|
NB. +--+
NB. |y2|
NB. +--+
NB. |y3|
NB. +--+
NB. |y1|
NB. +--+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:15:39.647

`{`您还可以指定 Rank `"`：

```
1 {"1 v
NB. +--+--+--+--+
NB. |y1|y2|y3|y4|
NB. +--+--+--+--+ 
```

这将为您提供第二列，减去排名，因此只是一个 shape 数组`4`。要使其成型`4 1`，请使用 Ravel Items `,.`：

```
,.1 {"1 v
NB. +--+
NB. |y1|
NB. +--+
NB. |y2|
NB. +--+
NB. |y3|
NB. +--+
NB. |y1|
NB. +--+ 
```

此外，所有这些逻辑都适用于矩阵是否被装箱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T20:13:15.553

正如其他海报所观察到的，J 中的数组访问权重朝向主（前）轴。也就是说，J 语言可以很容易地沿数组长度寻址元素（第一项、第二项、第三项等）。

要访问非引导轴，J 程序员通常会采用以下两种策略之一，分别由 abstraktor 和 MPelletier 的响应证明：

*   更改数组，使感兴趣的轴*实际上成为*引导轴；在您的情况下，通过将第二个（“列”）轴转换为第一个（“行”）轴，如使用`|:`.

*   或者更改访问器函数的视角，使感兴趣的轴从访问器的角度*看起来像*引导轴。MPelletier 的解决方案就是一个例子，它`{`使用 rank ( `"`) 改变了（在您的情况下是访问器函数）的视角。在他的示例中，POV`{`一次仅限于一行，因此现在*从该函数的角度来看*，引导轴是每行的原子——当聚合时，它们对应于列（当然）。

所以这些是在 J 中访问非引导轴的主要方法。话虽如此，某些原始函数实际上可以直接处理非引导轴。事实上，`{`如果你正确格式化它的参数，它就是其中之一：

```
 (<a:;1) { v
+--+--+--+--+
|y1|y2|y3|y1|
+--+--+--+--+ 
```

在这里，我们将一个*装箱*的左参数传递给`{`. 当我们这样做时，就`{`知道该框本身包含一个框列表：每个轴一个框（item-in-the-shape-of）它的正确参数。这些（子）框中的每一个都将指示正确参数的相应轴的选择标准。在这里，我们用“ `a:`”表示第一个轴的“a”ll，用1表示第二个轴的第二个元素（即第二列）。我们还可以混合搭配，例如“第二行和第三行的第一列和最后一列”：

```
 (<1 2;0 _1) { v
+--+--+
|x2|z2|
+--+--+
|x3|z3|
+--+--+ 
```

当然，这以明显的方式扩展到 N 维数组。

因此，您可以使用`{`直接处理数组的非前导轴。某些其他原语共享此功能，当然它们仍然在寻址轴上执行其定义的功能（因此，如果您只想选择数据，请使用`{`）。

假设您想将数组切割（分区）为列，而不是更常见的行。然后你可以使用`;.`( *cut* ) ，但用一个盒装的左手参数代替通常的开放式 LHA：

```
 ('';1) <;.1 v
+----+----+----+
|+--+|+--+|+--+|
||x1|||y1|||z1||
|+--+|+--+|+--+|
||x2|||y2|||z2||
|+--+|+--+|+--+|
||x3|||y3|||z3||
|+--+|+--+|+--+|
||x1|||y1|||z1||
|+--+|+--+|+--+|
+----+----+----+ 
```

事实上，我们可以使用这种方法同时寻址多个轴；例如，我们可以将数组分组为按每列划分的行对（即分成 2x1 子数组）：

```
 (1 0 1 0;1) <;.1 v
+----+----+----+
|+--+|+--+|+--+|
||x1|||y1|||z1||
|+--+|+--+|+--+|
||x2|||y2|||z2||
|+--+|+--+|+--+|
+----+----+----+
|+--+|+--+|+--+|
||x3|||y3|||z3||
|+--+|+--+|+--+|
||x1|||y1|||z1||
|+--+|+--+|+--+|
+----+----+----+ 
```

或者，假设您不想选择列，而是想删除一些列。然后您可以将`}.`( *drop* ) 与向量 LHA 一起使用，而不是通常的标量：

```
 0 1 }. v  NB. Keep all the rows but drop the first column
+--+--+
|y1|z1|
+--+--+
|y2|z2|
+--+--+
|y3|z3|
+--+--+
|y1|z1|
+--+--+

   2 _1 }. v  NB. drop the first two rows and the last column
+--+--+
|x3|y3|
+--+--+
|x1|y1|
+--+--+ 
```

对于`{.`( *take* ) 也是如此：

```
 _ 1 {. v   NB. Take all the rows (_=∞) but only 1 column (the first)
+--+
|x1|
+--+
|x2|
+--+
|x3|
+--+
|x1|
+--+ 
```

类似地，向量 LHA 到`|.`( *rotate* ) 允许我们来回旋转数组的任何维度（或维度）：`_2 |. v`将旋转`v`两个位置的行，而`0 1 |. v`将*列*旋转一个位置（向后），并且`_2 1 |. v`将两者都做（所以左上角是“y3”）。

向量 LHA 还允许转置处理任何轴集合，并立即将它们全部移动到数组的后面（即转置它们）：

```
 $ 1 2 |: i. 11 22 33 44  NB.  Transpose the middle dimensions to the end
11 44 22 33
   $ 1 2 0 3 |: i. 11 22 33 44  NB. Mix up all dimensions
22 33 11 44 
```

等等

总而言之，J 语言旨在使谈论“主轴”（即第一轴）变得容易，因为在实践中这是最常见的用例。要谈论短轴，通常您会在物理上翻转数组（使用`|:`）以将感兴趣的轴置于最前面，或者您将修改函数的视角（使用`"`）以从该函数的角度获得等效效果观点。

此外，当需要时，J 提供了某些内置工具来直接处理非引导轴，如上所述。

*注意：为使示例简单，前面的讨论使用了单数形式的短语“感兴趣的轴”。但鉴于 J 的面向数组的性质，使用“感兴趣的axE”（复数）这个短语会更准确。从这个意义上说，可以在不失一般性的情况下对所给出的散文和示例进行复数替换（事实上，获得它：该语言鼓励在数组中思考，即同时在多个维度方面）。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T11:07:44.900

# 投影是转置矩阵上的选择

1.  使用`|:`转置
2.  选择第二*行*（前一列）`1{::`
3.  `4 1$`再次将结果重塑为垂直结果

## 总而言之

```
4 1$1{::|:v
NB. Get the second column
NB. +--+
NB. |y1|
NB. +--+
NB. |y2|
NB. +--+
NB. |y3|
NB. +--+
NB. |y1|
NB. +--+ 
```

# c# - CRM 2011：获取错误

> ID：14560679
> 
> 赞同：0
> 
> 时间：2013-01-28T11:07:53.720
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, crm, fetchxml

我在 crm 2011 中包含多个 fetch 的脚本出现错误...错误是密钥存在并且来自：

```
<condition attribute='bc_type' operator='eq' lable='Credit' value='948110001' /> 
```

如果没有记录存在条件它失败，而不是只是传递并返回 0 任何想法？

我声明

```
decimal TotalDed = 0;
decimal TotalCre = 0; 
```

编码：

```
string value_sum = string.Format(@"         
            <fetch distinct='false' mapping='logical' aggregate='true'> 
                <entity name='bc_llbalance'>
                    <attribute name='bc_units' alias='ded_sum' aggregate='sum' />
                       <filter type='and'>
                        <condition attribute='bc_learninglicense' operator='eq' value='{0}' uiname='' uitype='' />
                        <condition attribute='bc_type' operator='eq' lable='Deduction' value='948110000' />
                       </filter>
                </entity>
            </fetch>", a);

                    EntityCollection value_sum_result = service.RetrieveMultiple(new FetchExpression(value_sum));

                    foreach (var b in value_sum_result.Entities)
                    {
                        TotalDed = ((Decimal)((AliasedValue)b["ded_sum"]).Value);
                    }

                        string cre_sum = string.Format(@"         
            <fetch distinct='false' mapping='logical' aggregate='true'> 
                <entity name='bc_llbalance'>
                    <attribute name='bc_units' alias='cre_sum' aggregate='sum' />                      
                        <filter type='and'>
                        <condition attribute='bc_type' operator='eq' lable='Credit' value='948110001' />
                        <condition attribute='bc_learninglicense' operator='eq' value='{0}' uiname='' uitype='' />                        
                        </filter>
                </entity>
            </fetch>", a);

                            EntityCollection cre_sum_result = service.RetrieveMultiple(new FetchExpression(cre_sum));

                                foreach (var c in cre_sum_result.Entities)
                                {
                                    TotalCre = ((Decimal)((AliasedValue)c["cre_sum"]).Value);
                                } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:10:07.310

尝试改变你的`foreach`循环

```
foreach (var c in cre_sum_result.Entities)
{ 
    if(c.Attributes.ContainsKey("cre_sum"))
    {
        TotalCre += ((Decimal)((AliasedValue)c["cre_sum"]).Value);
    }
} 
```

在尝试强制转换之前，您需要测试该值是否存在。您得到的错误是一个通用的 .Net 错误（[更多信息在这里](http://msdn.microsoft.com/en-us/library/system.collections.generic.keynotfoundexception.aspx)）。

如果在特定记录的字段中未找到任何值，CRM 将不会包含该属性，因此它会在集合中丢失。

你也在使用`=`而不是`+=`。这意味着总计是最后一条记录的值，而不是总和。

考虑以下：

```
var ListOfNumbers = new List<int> { 1, 2, 3 ,4 }
var total = 0;
foreach (var c in ListOfNumbers)
{
    total = c;
}
Console.WriteLine(total.ToString()); 
```

会输出`4`

```
var ListOfNumbers = new List<int> { 1, 2, 3 ,4 }
var total = 0;
foreach (var c in ListOfNumbers)
{
    total += c;
}
Console.WriteLine(total.ToString()); 
```

会输出`10`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:11:36.223

那里似乎有一个错字：

```
operator='eq' lable='Credit'
               ^^^^^ 
```

应该

```
operator='eq' label='Credit'
               ^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:56:48.213

在 foreach 循环中，您必须检查别名 cre_sum 和 ded_sum 是否包含任何值...

例如，

TotalCre =c.Attributes.Contains("cre_sum") ? ((十进制)((AliasedValue)c["cre_sum"]).Value): 0;

所以它会检查它是否包含任何值，如果是，它将返回总和，否则返回 0。

对两个循环都这样做。

希望这可以帮助 ！！！

# java - JProgressBar：不会显示低值

> ID：14560680
> 
> 赞同：7
> 
> 时间：2013-01-28T11:07:54.087
> 
> 标签：java, swing, look-and-feel, jprogressbar

我在Java中试用了JProgressBar的功能。但是有一个问题我无法解决：

当我将最小值设置为零，最大值设置为 100，当前值设置为 6 时，将不会显示任何内容。进度条为空。如果我将 7 作为当前值，那么它可以工作。任何空白边框或其他空间似乎都有问题。该问题在 Windows 7 中出现，并且仅当 UIManager 设置为 SystemLookAndFeel 时才会出现。

有谁知道这个问题并有解决方案？下面是我的代码：

```
package lab;

import java.awt.FlowLayout;

import javax.swing.JDialog;
import javax.swing.JProgressBar;
import javax.swing.UIManager;

import core.Config;

public class ProgressSample extends JDialog {

public ProgressSample() {

    setDefaultCloseOperation(DISPOSE_ON_CLOSE);

    getContentPane().setLayout(new FlowLayout());

              // Nothing is displayed
    JProgressBar progressSix = new JProgressBar(0, 100);
    progressSix.setValue(6);
    getContentPane().add(progressSix);

              // This works
    JProgressBar progressSeven = new JProgressBar(0, 100);
    progressSeven.setValue(7);
    getContentPane().add(progressSeven);

    pack();
}

public static void main(String[] args) {

    try {
        UIManager.setLookAndFeel(UIManager
        .getSystemLookAndFeelClassName());
    } catch (Exception e) {
        e.printStackTrace();
    }

    ProgressSample dialogTest = new ProgressSample();
    dialogTest.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:12:27.427

Windows 原生外观进度条的 Java 代码以`PROGRESSCHUNKSIZE`原始 Windows 进度条的方式使用步骤呈现。请参阅[Windows JProgressBar 的源代码](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/java/swing/plaf/windows/WindowsProgressBarUI.java.html#line.105)。

只是渲染不流畅。如果您踏上进度条，您可以看到这些块。

它可能是可定制的，但我不知道你将如何完成它。

**问题的根源**

原来的 Windows XP 进度条是在小盒子里。[主题定义](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759749(v=vs.85).aspx)了盒子的大小，以及盒子之间的间隙。对于 Vista 及更高版本，主题已更改为将框之间的间隙指定为 0，但从未将框的大小重置为 1 像素。`OpenThemeData`通过and函数读取值`GetThemeInt` `Win32API`显示块大小`6`适用于我的主题（Windows 8）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:16:23.390

设置系统 L&F 时，它看起来像一个布局问题/错误。

我设法通过为问题设置进度条的首选大小来隐藏错误：

```
progressSix.setPreferredSize(new Dimension(200, 15)); 
```

它似乎与进度条大小有关。如果我使用 a`BoxLayout`而不是 the`FlowLayout`并且足够调整容器的大小，我可以看到它甚至显示较小的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T12:11:46.040

设置后进度指示器变得平滑：

```
progressBar.setStringPainted(true); 
```

然而，它现在显示一个百分比，并且颜色变为蓝色。你可以这样做：

```
progressBar.setString(""); // null means automatic percentage
progressBar.setForeground(new Color(0, 210, 40)); // Windows7-green 
```

我认为这是可行的，因为现在（部分）由 SWING 而不是由操作系统绘制条形图。进度条看起来有所不同，因为进度指示器缺少玻璃状的高光并且被涂成实心。背景看起来还是一样的。我的猜测是 SWING 让操作系统将其绘制为进度为 0%，然后在顶部绘制一个填充的矩形和文本。

最后一个设置，颜色，可以通过查询 UI 常量来改进。但是，在`ProgressBar.*`WindowsLookAndFeel 的所有键中，我只能找到蓝色。

# jakarta-ee - 在 jBoss 自定义登录模块中设置用户名

> ID：14560682
> 
> 赞同：0
> 
> 时间：2013-01-28T11:08:04.970
> 
> 标签：jakarta-ee, jboss

我正在开发为 jboss 实现了自定义登录模块的企业应用程序。它具有基于表单的安全登录，用户提供用户名和密码。在登录模块中，根据数据库检查凭据并完成一些附加检查。现在我想让用户通过一次性令牌（例如一些哈希字符串：EF223222131）登录，我想通过电子邮件将其作为 URL: 发送给他`applicationServer:8080/myApplication/login2.jsp?hash=EF223222131`。在页面上，`login2.jsp`我有基于表单的身份验证的相同表单，我将用户名和密码留空，并添加字段哈希。所有字段都是隐藏的，并且 javascript 在页面加载时触发表单提交。在登录模块中，我设法获得了哈希：

```
HttpServletRequest httpRequest = 
    (HttpServletRequest)PolicyContext.getContext("javax.servlet.http.HttpServletRequest");
    String hashV = httpRequest.getParameter("hashValue"); 
```

然后我从数据库集的身份和角色以及相应的方法中获取`loginOk = true;`用户`commitOk = true;`。但是在我的网络应用程序中，用户名保持为空。 `httpRequest.getUserPrincipal().getName()`返回空字符串。此外，如果我调用 EJB，我会从 `sessionContext.getCallerPrincipal().getName()`.

有没有办法从登录模块设置这些值？还是有另一种通过 URL 中的令牌登录的方法？

我正在使用 jboss 4.0.3SP1 和 java 1.4.2，但我认为它应该与较新的配置相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:00:03.563

问题出在登录模块的主题对象中。在该`commit()`方法中，有一段代码定义了主题对象：

```
if(!subject.getPrincipals().contains(identity)) {
        subject.getPrincipals().add(identity);
}
Group g = new SimpleGroup("Roles");
g.addMember(new SimplePrincipal((String) options.get("defaultRole")));
subject.getPrincipals().add(g); 
```

此外，我还添加了：

```
Group callerPrincipal = new SimpleGroup("CallerPrincipal");
callerPrincipal.addMember(identity);
subject.getPrincipals().add(callerPrincipal); 
```

新用户名在会话`httpRequest.getUserPrincipal().getName()`中可用（来自 servlet 和`sessionContext.getCallerPrincipal().getName()`EJB）

我从链接中找到了解决方案：[Jboss community](https://community.jboss.org/message/132526#132526)

# android - 谷歌地图示例代码：试图找出为什么我不断收到身份验证失败

> ID：14560683
> 
> 赞同：1
> 
> 时间：2013-01-28T11:08:04.627
> 
> 标签：android, google-maps

我正在尝试按照他们网站上的[指南测试 SDK 中的 Google Maps 示例代码。](https://developers.google.com/maps/documentation/android/start)

在对设置、构建路径和类路径进行了一些修改之后，我设法让它编译并部署到我的设备（物理设备，而不是模拟器）上。但是，我在 logcat 中收到授权失败错误。我已将我的 API 密钥输入到 AndroidManifest.xml 中。

除了该更改之外，示例中的其他代码均未更改。

我知道我已经添加了支持 jar 并正确引用了库项目，因为应用程序已编译。我能想到的只是不知何故签名证书是错误的。在包装过程中，我看到了这个：

```
[2013-01-28 10:35:00 - MainActivity] Using default debug key to sign package
[2013-01-28 10:35:00 - MainActivity] Using keystore: /home/user/.android/debug.keystore
[2013-01-28 10:35:00 - MainActivity] Packaging MainActivity.apk 
```

所以它使用的是 debug.keystore。

使用

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android | grep SHA1 
```

我发现我的调试证书是：

```
SHA1: {KEY_HIDDEN} 
```

因此，我将其添加到 Google API 控制台中，如下所示：

```
{KEY_HIDDEN};com.example.mapdemo 
```

由于示例应用程序的包是*com.example.mapdemo*

我得到了一个 API 密钥。就我而言，它是

```
AIzaSyAW8nihGO9uSW170YETE-Q1pPjFAW-B4M8 
```

所以我将它添加到我的 AndroidManifest.xml

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/demo_title"
    android:hardwareAccelerated="true">
    <!-- You must insert your own Google Maps for Android API v2 key in here. -->
    <meta-data
      android:name="com.google.android.maps.v2.API_KEY"
      android:value="AIzaSyAW8nihGO9uSW170YETE-Q1pPjFAW-B4M8"/>
    <activity android:name=".MainActivity">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>
    </activity> 
```

但是，我不断得到：

01-28 10:54:39.423：E/Google Maps Android API(28778)：授权失败。

而且我不知道为什么......有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:26:43.503

对于设备 - 您必须创建一个签名的应用程序包。
此外，当您生成调试证书时，您必须使用您为签署应用程序创建的密钥库（而不是调试密钥库）。
更新清单中的密钥并尝试运行。
希望这可以帮助。

编辑：keytool -v -list -keystore **your_keystore**

# ruby - 单个 Jekyll 网站中的多个博客

> ID：14560687
> 
> 赞同：15
> 
> 时间：2013-01-28T11:08:12.887
> 
> 标签：ruby, jekyll

有没有办法让一个 Jekyll 网站拥有多个博客？我目前想在一个站点中有两个博客。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T12:51:33.823

我是页面[http://www.garron.me/blog/multi-blog-site-jekyll.html的作者](http://www.garron.me/blog/multi-blog-site-jekyll.html)

考虑到您需要单独的档案页面，以及每个博客的最新帖子。只需使用这样的东西：

创建一个文件 archives-blog-1.html 并填写：

```
{% for post in site.posts %}
  {% if post.categories contains 'blog1' %}
    <div class="post">
        <h3 class="title"><a href="{{ post.url }}">{{ post.title }}</a></h3>
        <p class="meta">Date: {{ post.date }}</p>
    </div>
  {% endif %}
{% endfor %} 
```

这将为您提供 blog1 中所有帖子的列表，您可以对 blog2 执行相同的操作。该页面可以是您想要的任何地方。

对于最新的帖子，您可以使用相同的代码，但包含在：

```
{% for post in site.posts limit:5 %}
....
{% endfor %} 
```

这会给你持续 5 个帖子......我正在使用这个

```
{% for post in site.posts limit:5 %}

  <div class="post">
    <ul>
      <li><a href="{{ post.url }}">{{ post.title | truncate:200 }} </a><small>{{ post.date }}</small>
         {% if post.summary %}
            <p class="entry">{{ post.summary }}</p>
         {% endif %}
      </li>
    </ul>
  </div>
{% endfor %} 
```

在我的索引页面中。[http://www.garron.me/index.html](http://www.garron.me/index.html) ...在子标题下（来自博客）我不限于任何类别，所以所有博客的帖子都会出现在那里，你可以限制`{% if post.categories contains 'blog1' %}`

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-13T03:20:16.400

到目前为止，有一个比任何答案都更简单的解决方案。

文件夹结构：

`- blog1/ - _posts/ - blog2/ - _posts/`

然后在 blog1 的 index.html 中，使用`site.categories.blog1`而不是`site.posts`.

[请参阅https://jekyllrb.com/docs/variables/](https://jekyllrb.com/docs/variables/)中的“site.categories”和“page.categories”文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:11:06.250

我使用两个独立的 Jekyll 安装[在同一个域上运行两个博客](http://hypertext.net/2013/01/jekyll)；如果您的博客将存在于单独的根目录中（我的位于`/`and `/photos/`），那么我会推荐这种方法。我还[描述了如何合并两个博客的 sitemap.xml 文件](http://hypertext.net/2013/01/merge-sitemaps)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-18T21:28:40.040

您最好的选择是查看[数据文件](https://jekyllrb.com/docs/datafiles/)功能。您可以将`.markdown`文件放在您的单独文件夹中，`source`并在发布时链接到它们。这确实意味着为了发表一篇文章，您需要编写一个数据文件条目，但是您可以托管任意数量的“博客”，每个博客都有自己的文件夹。帖子将自动将它们所在的文件夹作为 url。我将这种方法用于我自己的个人博客和作品集。

要么，或者您可能想查看收藏：http: [//jekyllrb.com/docs/collections/](http://jekyllrb.com/docs/collections/)

# visual-c++ - 在 Windows XP 上构建，什么时候在 VS2012 上开发？

> ID：14560690
> 
> 赞同：1
> 
> 时间：2013-01-28T11:08:23.070
> 
> 标签：visual-c++, msbuild, visual-studio-2012, migration

我们计划从 Visual Studio 2005 迁移到 Visual Studio 2012 (Visual-C++-11)。（如果我们能提供帮助，我们非常想跳过 2010 年，因为新版本已经存在并且提供了更好的 C++ 体验。）

但是我们遇到了一个小障碍：

我们的构建服务器仍然运行 Windows 2003r2（都在专用虚拟机中），并且由于混乱的工具支持/问题，我们无法将构建服务器升级到更新的操作系统。

到目前为止，开发人员大多已切换到 Windows7，因此移动剩余的 Windows XP 开发人员框应该不会造成问题。

由于 VS2012 只在 Win7 上运行，我们想知道我们是否可以利用它的工具（C++ 编译器、C#）并仍然在 W2k3 构建服务器上进行完全等效的构建 - 毕竟，我们并不真的需要 VS GUI，只需构建来自 VS2012 的 C++ 和 C# 项目。

我们有哪些选择？

SDK（7.1？8？）编译器+ msbuild命令行能让我到任何地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:35:32.793

在项目属性页中，有一个选项“平台工具集”允许您选择项目的兼容性。因此，您可以在 VS2012 中工作，但使用“VS2008 编译器”构建它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:32:24.067

这是我们所做的：

**使用[CMake](http://www.cmake.org/)**

CMake 允许您为您的操作系统创建构建系统。因此我们可以在 VS2005、VS2010 和 Eclipse、XCode 等中使用相同的代码。

你可以做类似的事情：在你的旧机器上安装 VS2005，让 CMake 从源代码为你创建项目。在您较新的机器上，您可以使用 CMake 生成 VS2012 解决方案（我不知道他们是否支持 2012，因为我们还没有使用 2012）。

这里的一个大**优点**是：如果您计划迁移到任何其他 IDE 甚至 Linux，您只需重新运行 CMake 并在这些环境中轻松编译您的源代码。

一个大**问题**：您必须开始阅读有关 CMake 并为所有项目创建 CMakeLists.txt 的内容（可能需要做很多工作，具体取决于项目数量、每个项目中的源代码文件数量、特定编译器选项、链接器选项等.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T18:45:35.423

> 我们的构建服务器仍然运行 Windows 2003r2（都在专用虚拟机中），并且由于混乱的工具支持/问题，我们无法将构建服务器升级到更新的操作系统。

好。这个问题没有什么结果。我们最近重新评估了这个问题，我看到了两个选项（我还没有尝试过）：

*   只需在受支持的操作系统（Win7）上进行完整的 VS 安装，压缩整个 VS+WinSDK 目录（以及位于 %WINDR% 下某处的必要 runtme DLL），然后尝试是否可以让该东西在基于 XP 的操作系统。可能会奏效。如果你问我，这不是一个好主意。
*   拆分构建过程以跨多个操作系统分发构建，以便我们可以使用仅在其中一个上受支持的工具。-- 这实际上听起来比实际要复杂得多。我们已经在几个 Jenkins 作业中运行了我们的构建，所以我应该能够让它工作。（无论如何，所有构建节点都已经是虚拟机，因此添加更多虚拟机并不是什么大问题。）

# java - 当工作表名称中包含无效字符时，有没有办法通过 Apache POI 加载 Excel 文件

> ID：14560691
> 
> 赞同：0
> 
> 时间：2013-01-28T11:08:23.890
> 
> 标签：java, excel, apache-poi

我收到的 Excel 文件似乎是在 excel 之外生成的，并且通常在其中一个工作表名称中包含“[”或“]”。

POI 似乎没有加载这些文件，只是抛出一个错误，我怎样才能让 Apache-poi 加载这些文件并去除无效字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:40:12.427

在您的情况下，我不清楚 POI 在文件加载时如何引发错误。

但是 xlsx 有简单的[格式](http://en.wikipedia.org/wiki/Office_Open_XML)。因此，您可以解压缩文件并在 workbook.xml 中重命名适当的 xml 和节点以直接重命名页面名称。

# php - php-mysql_num_rows 警告

> ID：14560698
> 
> 赞同：-4
> 
> 时间：2013-01-28T11:08:43.313
> 
> 标签：php, mysql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:17:10.120

*   您正在混合[mysqli](http://docs.php.net/manual/en/book.mysqli.php)（如改进的 i ）和 mysql （如[弃用的 api](http://docs.php.net/manual/en/mysqlinfo.api.choosing.php)）功能。
*   您的代码容易发生[sql 注入](https://en.wikipedia.org/wiki/SQL_injection)，因为您没有正确编码查询的参数。由于您使用的是 multi_query() 这个脚本真的很容易出现[bobby tables](https://xkcd.com/327/)。请在 stackoverflow 中搜索防止这种情况的好方法。
*   在其当前形式中，脚本只需要记录计数，而不需要实际数据。在这种情况下，使用[`SELECT Count()`](https://stackoverflow.com/questions/1221559/count-vs-count1)而不是检索实际数据
*   这种不[加锁](https://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)的方法很容易出现[竞争条件](https://en.wikipedia.org/wiki/Race_condition)。最好使用不允许插入两个相同（由键定义）记录的[唯一约束。](https://dev.mysql.com/doc/refman/5.1/en/constraint-primary-key.html)然后，您的脚本可以测试特定的错误代码，以向用户显示“数据库中已读取项目”消息。

* * *

编辑：参数 $data 由`$mysqli->real_escape_string`.
但是 $filename 也是“任意数据”，因为它几乎可以是客户端在 http 请求中发送的任何字符串。所以它也必须逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:10:53.647

而不是`if(mysql_num_rows($rs) == 0)`，使用`if($rs->num_rows)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:17:01.420

```
echo $q; 
```

你会得到一个查询在 phpmyadmin 中执行它，我猜这个查询是错误的。

# objective-c - SQLite 查询问题

> ID：14560703
> 
> 赞同：0
> 
> 时间：2013-01-28T11:09:03.003
> 
> 标签：objective-c, sql, sqlite

我有一个有 3 个表的数据库

**名称（PK_NameId，FK_ContactId，FK_FavId，长度）**

**联系人（PK_ContactId）**

**收藏夹(PK_FavId)**

在我的 iPhone 应用程序中，有各种选项（标准）来搜索名称，因为用户可以选择多个名称，用户可以选择多个联系人，用户可以选择多个收藏夹，用户还可以选择长度，如 0-10、10-20 等。用户也可以在没有任何条件的情况下单击搜索按钮来获取所有名称。我是 SQLite 的新手，想要创建一个用于搜索名称的查询，方法是通过编码考虑所有没有 if-else 条件的情况，这需要更少的时间来执行查询。我知道一个选项来检查选择了哪些标准用户并应用 if-else 条件，但它不太好，所以我想通过查询来处理它。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:06:29.213

我使用以下方式得到了解决方案 -

```
NSString *strQuery;    
strQuery = [NSString stringWithFormat:@"SELECT N.PK_NameId FROM Name N inner join Contact C on C.PK_ContactId = N.FK_ContactId inner join Favourites F on F.PK_FavId = N.FK_FavId where ((1)"]; 
```

在此之后，我检查了每个选择类型（姓名、联系人、列表）的空值并将查询附加到原始查询。最后使用我在主查询的 where 子句之后打开的右大括号完成查询。

```
strQuery = [NSString stringWithFormat:@"%@)", strQuery]; 
```

# image - 如何设置按钮选择和取消选择图像？

> ID：14560704
> 
> 赞同：0
> 
> 时间：2013-01-28T11:09:04.327
> 
> 标签：image, ios6, uibutton

当我触摸按钮以显示所选图像并再次触摸显示的按钮取消选择图像时。

我正在尝试这种编码：

```
UIButton *btn=(UIButton*) sender;
if (btn.selected=YES)
{        
    [btn setImage: [UIImage imageNamed:@"reportsel.png"]  forState:UIControlStateSelected];

}else{        

    [btn setImage:[UIImage imageNamed:@"reports.png"] forState:UIControlStateNormal];
} 
```

任何时候单击此按钮都不会进入其他状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:13:23.927

对于高亮状态，使用：[btnObj setImage:[UIImage imageNamed:@"imgName.png"] forState:UIControlStateHighlighted];

在正常状态下，使用：[btnObj setBackgroundImage:[UIImage imageNamed:@"imgName1.png"] forState:UIControlStateNormal];

# ios - iOS：如何以编程方式检索核心动画绘制率？

> ID：14560706
> 
> 赞同：4
> 
> 时间：2013-01-28T11:09:05.347
> 
> 标签：ios, objective-c, profiling, core-animation

我想查询/测量 iOS 上的核心动画绘制率。我知道我可以通过使用 XCode 的 Instruments 和 CA 分析器来做到这一点，但我特别想从应用程序中检索相同的信息*以*将其显示在应用程序本身中。

更多上下文：这是针对具有嵌入式 UIWebView 的应用程序，我们想要测量应用程序的核心动画的总帧率。

任何提示或建议表示赞赏，即使它不是一个完整的解决方案。

谢谢！保罗

# php - 在 PHP 中签署 Twitter 趋势 API v1.1 请求失败

> ID：14560711
> 
> 赞同：2
> 
> 时间：2013-01-28T11:09:19.180
> 
> 标签：php, oauth, twitter, twitter-oauth

从 Twitter API 1.1 版开始，**每个**请求都必须通过 OAuth 1.0a 进行身份验证和签名。在我的 PHP 项目中，我想使用 Twitter 趋势 API，尤其是我想使用 GET 趋势/位置调用。所以它是只读的。现在，要授权请求，这里有一个出色的 Twitter API[文档](https://dev.twitter.com/docs/auth/authorizing-request)。我们了解到我们必须在 HTTP 请求中发送一个额外的标头，称为“Authorization”，其中包含一个以“OAuth”开头的字符串并包含七个参数：

1.  oauth_consumer_key
2.  oauth_nonce
3.  oauth_signature
4.  oauth_signature_method
5.  oauth_timestamp
6.  oauth_token
7.  oauth_version

在这七个参数中，上面提到的第三个参数 oauth_signature 有点特殊，因为要构建它的值，您必须包含所有其他参数以及更多参数，然后对其进行签名。[再次，这个过程在这里](https://dev.twitter.com/docs/auth/creating-signature)得到了很好的解释。

在注册我的应用程序并获取消费者密钥和秘密以及访问令牌和秘密后，我实施了所有这些步骤。这是我的 PHP 代码（当然，我划掉了秘密）：

```
 $HTTPmethod = 'GET';
$twitterApiBaseUrl = 'https://api.twitter.com/1.1/trends/place.json';
$twitterApiParams  = 'id=' . $WOEID;
$twitterApiCallUrl = $twitterApiBaseUrl . '?' . $twitterApiParams;

$OAuthConsumerKey = 'eV78fJOOiObfeytAwvWCg';
$OAuthAccessToken = '1116971396-6uc4xOLziLAdiqOfrtKfuRraa2GdCzas9aQX8ZB';
$OAConsumerSecret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$OATokenSecret    = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';

// building the necessary (as of Twitter API v1.1) authorization header
// according to https://dev.twitter.com/docs/auth/authorizing-request
$DST = 'OAuth ';

// 1.: Consumer key
$oaConsumerKeyKey = rawurlencode("oauth_consumer_key");
$oaConsumerKeyVal = rawurlencode($OAuthConsumerKey);
$DST .= $oaConsumerKeyKey . '="' . $oaConsumerKeyVal . '", ';

// 2.: Nonce
$oaNonceKey = rawurlencode("oauth_nonce");
$oaNonceVal = rawurlencode(base64_encode(time()));
$DST .= $oaNonceKey . '="' . $oaNonceVal . '", ';

// 3.: Signature method
$oaSignatureMethodKey = rawurlencode("oauth_signature_method");
$oaSignatureMethodVal = rawurlencode('HMAC-SHA1');
$DST .= $oaSignatureMethodKey . '="' . $oaSignatureMethodVal . '", ';

// 4.: Timestamp
$oaTimestampKey = rawurlencode("oauth_timestamp");
$oaTimestampVal = rawurlencode(time());
$DST .= $oaTimestampKey . '="' . $oaTimestampVal . '", ';

// 5.: Token
$oaTokenKey = rawurlencode("oauth_token");
$oaTokenVal = rawurlencode($OAuthAccessToken);
$DST .= $oaTokenKey . '="' . $oaTokenVal . '", ';

// 6.: Version
$oaVersionKey = rawurlencode("oauth_version");
$oaVersionVal = rawurlencode('1.0');
$DST .= $oaVersionKey . '="' . $oaVersionVal . '", ';

// 7.: Signature
// according to https://dev.twitter.com/docs/auth/creating-signature
$preSignatureBaseString = $twitterApiParams;
$preSignatureBaseString .= '&';
$preSignatureBaseString .= $oaConsumerKeyKey . '=' . $oaConsumerKeyVal;
$preSignatureBaseString .= '&';
$preSignatureBaseString .= $oaNonceKey . '=' . $oaNonceVal;
$preSignatureBaseString .= '&';
$preSignatureBaseString .= $oaSignatureMethodKey . '=' . $oaSignatureMethodVal;
$preSignatureBaseString .= '&';
    $preSignatureBaseString .= $oaTimestampKey . '=' . $oaTimestampVal;     
$preSignatureBaseString .= '&';
$preSignatureBaseString .= $oaTokenKey . '=' . $oaTokenVal;
$preSignatureBaseString .= '&';
$preSignatureBaseString .= $oaVersionKey . '=' .$oaVersionVal;

print "<b>preSignatureBaseString:</b> $preSignatureBaseString<p/>\n";

$signatureBaseString = $HTTPmethod;
$signatureBaseString .= '&';
$signatureBaseString .= rawurlencode($twitterApiBaseUrl);
$signatureBaseString .= '&';
$signatureBaseString .= rawurlencode($preSignatureBaseString);

print "<b>signatureBaseString:</b> $signatureBaseString<p/>\n";

$signingKey = rawurlencode($OAConsumerSecret) . '&' . rawurlencode($OATokenSecret);

$oaSignatureKey = rawurlencode("oauth_signature");
$oaSignatureVal = base64_encode(hash_hmac('sha1', $signatureBaseString, $signingKey));

print "<b>oaSignatureVal:</b> $oaSignatureVal<p/>\n";

$DST .= $oaSignatureKey . '="' . rawurlencode($oaSignatureVal) . '"';

print "<b>DST:</b> $DST<p/>\n";

$header = "User-Agent: MyCoolTwitterTrendsApp\r\n" .
          "Authorization: " . $DST . "\r\n";              
$opts = array(
        'http' => array(
           'method'    => $HTTPmethod,
           'header'    => $header
        ));
print "<b>header:</b> $header<p/>\n";

    $context = stream_context_create($opts);

$twitterApiResponse = file_get_contents($twitterApiCallUrl, false, $context);

$decodedResponse = json_decode($twitterApiResponse);

echo $decodedResponse; 
```

问题是，每次对 API 的实际调用都会失败，并出现“HTTP/1.0 401 Unauthorized”错误。谁能告诉我为什么以及我在这里做错了什么？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:07:40.697

不确定这是否是我遇到的相同问题，但尝试检查时间戳我的准确时间为 1 小时，去弄清楚那是什么！白天节省时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T14:44:44.850

使用此代码

```
 $oauth_hash = '';
        $oauth_hash .= 'oauth_consumer_key=YOUR_CONSUMER_KEY&';
        $oauth_hash .= 'oauth_nonce=' . time() . '&';
        $oauth_hash .= 'oauth_signature_method=HMAC-SHA1&';
        $oauth_hash .= 'oauth_timestamp=' . time() . '&';
        $oauth_hash .= 'oauth_token=YOUR_ACCESS_TOKEN&';
        $oauth_hash .= 'oauth_version=1.0';
        $base = '';
        $base .= 'GET';
        $base .= '&';
        $base .= rawurlencode('https://api.twitter.com/1.1/trends/place.json');
        $base .= '&';
        $base .= rawurlencode('id=23424848&'.$oauth_hash);
        $key = '';
        $key .= rawurlencode('YOUR_CONSUMER_SECRET');
        $key .= '&';
        $key .= rawurlencode('YOUR_ACCESS_TOKEN_SECRET');

        $signature = base64_encode(hash_hmac('sha1', $base, $key, true));
        $signature = rawurlencode($signature);
        $oauth_header = '';
        $oauth_header .= 'oauth_consumer_key="YOUR_CONSUMER_KEY", ';
        $oauth_header .= 'oauth_nonce="' . time() . '", ';
        $oauth_header .= 'oauth_signature="' . $signature . '", ';
        $oauth_header .= 'oauth_signature_method="HMAC-SHA1", ';
        $oauth_header .= 'oauth_timestamp="' . time() . '", ';
        $oauth_header .= 'oauth_token="YOUR_ACCESS_TOKEN", ';
        $oauth_header .= 'oauth_version="1.0", ';
        $curl_header = array("Authorization: Oauth {$oauth_header}", 'Expect:');
        $curl_request = curl_init();
        curl_setopt($curl_request, CURLOPT_HTTPHEADER, $curl_header);
        curl_setopt($curl_request, CURLOPT_HEADER, false);
        curl_setopt($curl_request, CURLOPT_URL, 'https://api.twitter.com/1.1/trends/place.json?id=23424848');
        curl_setopt($curl_request, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl_request, CURLOPT_SSL_VERIFYPEER, false);
        var_dump(curl_exec($curl_request));
        curl_close($curl_request); 
```

[我已修改代码以从此博客](http://blog.jacobemerick.com/web-development/working-with-twitters-api-via-php-oauth/)获取用户时间线

# mpi - 探针似乎消耗 CPU

> ID：14560714
> 
> 赞同：10
> 
> 时间：2013-01-28T11:09:33.963
> 
> 标签：mpi, openmpi

我有一个 MPI 程序，它由一个主进程组成，它将命令传递给一堆从进程。收到命令后，从站只需调用 system() 即可。当从站等待命令时，它们会消耗 100% 的各自 CPU。Probe() 似乎处于一个紧密的循环中，但这只是一个猜测。你认为这可能是什么原因造成的，我能做些什么来解决它？

这是从进程中等待命令的代码。同时看日志和*top*命令表明，当slave在消耗CPU时，它们就在这个函数内部。

```
MpiMessage
Mpi::BlockingRecv() {
  LOG(8, "BlockingRecv");

  MpiMessage result;
  MPI::Status status;

  MPI::COMM_WORLD.Probe(MPI_ANY_SOURCE, MPI_ANY_TAG, status);
  result.source = status.Get_source();
  result.tag = status.Get_tag();

  int num_elems = status.Get_count(MPI_CHAR);
  char buf[num_elems + 1];
  MPI::COMM_WORLD.Recv(
     buf, num_elems, MPI_CHAR, result.source, result.tag
  );
  result.data = buf;
  LOG(7, "BlockingRecv about to return (%d, %d)", result.source, result.tag);
  return result;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T13:14:11.203

是的; 大多数 MPI 实现，为了性能，阻塞操作忙等待。假设 MPI 作业是我们在处理器上唯一关心的事情，如果任务被阻塞等待通信，最好的办法是不断轮询该通信以减少延迟；这样在消息到达和移交给 MPI 任务之间几乎没有延迟。这通常意味着即使没有做任何“真正的”事情，CPU 也被固定在 100%。

对于大多数 MPI 用户来说，这可能是最好的默认行为，但它并不总是您想要的。通常 MPI 实现允许关闭它；使用 OpenMPI，[您可以使用 MCA 参数关闭此行为，](http://www.open-mpi.org/faq/?category=running#oversubscribing)

```
mpirun -np N --mca mpi_yield_when_idle 1 ./a.out 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-28T00:43:56.567

听起来有三种方法可以等待 MPI 消息：

1.  积极的忙等待。这将尽快将消息发送到您的接收代码中。一些处理器除了检查传入的消息之外什么都不做。如果您将所有处理器都置于这种状态，那么系统的其余部分将会非常缓慢。MPI 默认使用激进模式。
2.  降级忙等待。这将在忙等待时让步给其他进程。如果您要求的进程数多于您拥有的处理器数，MPI 将切换到降级模式。您还可以使用[MCA 参数](http://www.open-mpi.org/faq/?category=running#oversubscribing)强制进取或降级模式。
3.  轮询。即使降级的忙等待仍然是一个忙等待，它会为每个正在等待的进程保持一个处理器固定在 100%。如果您的系统上有其他不想与之竞争的任务，您可以在调用阻塞接收之前通过 sleep 调用循环调用[。`MPI_Iprobe()`](http://www.open-mpi.org/doc/v1.7/man3/MPI_Iprobe.3.php)我发现 100 毫秒的睡眠对于我的任务来说已经足够响应了，并且当工作人员空闲时仍然保持 CPU 使用率最小。

我做了一些搜索，发现如果您不与其他任务共享您的处理器，[那么您想要的是忙碌的等待。](http://www.open-mpi.org/community/lists/users/2010/10/14505.php)

# android - Android ACTION_SEND 超链接在 GMail 中不起作用

> ID：14560717
> 
> 赞同：6
> 
> 时间：2013-01-28T11:09:46.507
> 
> 标签：android, email, android-intent, hyperlink

这是我在 Android 中发送 HTML 电子邮件的代码，带有可点击的链接。

```
private void sendEmail()
{

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
String subject = "Prueba";
String emailtext = "<a href=http://www.google.es>PruebaEmail</a>";
emailIntent.setType("message/rfc822");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(emailtext.toString()));

startActivity(Intent.createChooser(emailIntent, "Send mail"));
} 
```

几个月前，它还在工作并发送一个可点击的超链接，但现在，当我在我的 GMail 帐户中收到邮件时，没有超链接，只有纯文本。

我已经尝试了所有这些类型：

```
emailIntent.setType("message/rfc822"); 
```

和

```
emailIntent.setType("plain/text"); 
```

和

```
emailIntent.setType("text/html"); 
```

这对于文本：

```
String emailtext = "<a href=http://www.google.es>PruebaEmail</a>"; 
```

和

```
String emailtext = "<a href='http://www.google.es'>PruebaEmail</a>"; 
```

和

```
String emailtext = "<a href="http://www.google.es">PruebaEmail</a>"; 
```

但这些都不起作用。

这个问题只针对 GMail，因为如果我将邮件发送到 Evernote 或其他应用程序，我会得到一个可点击的链接。

这是我的 API 配置：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="8"/> 
```

并使用 Android 3.2 编译

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:33:51.247

好的，终于找到了解决问题的方法。href 和外部的链接必须完全相同。删除了我的评论，它们现在无关紧要。

问题出在 gmail 客户端 4.2.2 上，我似乎有最新的 :) gmail 客户端 4.1.2 对你所写的 href 标签工作得很好。

gmail客户端像这样工作真的很愚蠢。

# iphone - 为什么我的代码无法在 iphone 5 上运行

> ID：14560721
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:18.447
> 
> 标签：iphone, xcode, call

所以我做了一个调用号码的应用程序：

```
NSString *cleanedString = [[number componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""];
NSString *escapedPhoneNumber = [cleanedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", escapedPhoneNumber]];
UIWebView *mCallWebview = [[UIWebView alloc] init]  ;
[self.view addSubview:mCallWebview];
[mCallWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

然而，一位使用 iPhone 5 的测试人员报告说，在他的手机上运行正常时，它无法在他的手机上运行。他没有遇到任何崩溃或任何事情。

感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:37:59.730

```
 NSString *number = YOUR-NUMBER;       
  NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"telprompt:%@",number]];

  [[UIApplication sharedApplication] openURL:url]; 
```

尝试使用此代码，完成通话后它将导航回您的应用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:14:16.733

URL 架构在您的`tel:`代码中使用不正确，请删除`//`

```
NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", escapedPhoneNumber]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:03:02.050

您可以检查此代码。我希望这会对您有所帮助。

```
NSString *phoneNo = @"your phone no";
NSString *strAppend  = [@"tel:" stringByAppendingString:phoneNo];
[[UIApplication sharedApplication]
  openURL:[NSURL URLWithString:strAppend]]; 
```

# php - PHP 数组 / preg_replace 按位置

> ID：14560725
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:27.163
> 
> 标签：php, arrays, replace, position

我有一段包含随机数字的文本。

我制作了一个数字数组，对它们进行处理（根据每个数字查找要显示的相关信息），然后将更改后的数组重新插入到原始文本中与我从中获取数组相同的位置。

到目前为止，我正在使用 preg_match_all 创建新数组，然后为进程使用 foreach，然后将这些字符串插入一个名为 $replacement 的新数组中。

所以我有一个数组，我想用它来替换原始文本中的字符串。问题是我希望根据位置值计算替换 - 无论数组中有什么，字符串 1 按数组中的位置匹配字符串 1。

很难解释。这是一个例子。

`Original text: Hello 1 Hello 2 Hello 3`

```
original array {
    [0] 1
    [1] 2
    [2] 3
}
replacement array {
    [0] One
    [1] Two
    [2] Three
} 
```

因此，当我做我需要做的事情时，原始正文将如下所示：

`Hello One Hello Two Hello Three`

`Hello One Hello Two Hello Three`问题是，即使原始数组是，我也希望它看起来像：

```
original array {
    [0] 1
    [1] 1
    [2] 1
}
replacement array {
    [0] One
    [1] Two
    [2] Three
} 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:29:37.797

你在尝试这个吗：-

```
$original_array=array(1,2,3);
foreach($original_array as $key=>$value) {
  echo str_replace($key, 'Hello',$key);
} 
```

输出：-HelloHelloHello

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:30:15.990

这是你要找的……？？？

```
$string="Hello 1 Hello 2 Hello 3";
    $rslt=preg_match_all('/(\d)/',$string,$matches);
    foreach ($matches[0] as $key=>$value){
        $digit= $key+1;
        $words=convertToWord($digit);
        $string= str_replace($value,$words,$string);
    }

echo $string;
function convertToWord($digit)
    {
        switch($digit)
        {
            case "0": return "zero";
            case "1": return "one";
            case "2": return "two";
            case "3": return "three";
            case "4": return "four";
            case "5": return "five";
            case "6": return "six";
            case "7": return "seven";
            case "8": return "eight";
            case "9": return "nine";
            case "": return "only";
        }
    } 
```

**输出：**

> 你好一 你好二 你好三

[演示](http://codepad.viper-7.com/ZUnTDd)

# ruby-on-rails - 输出中的方括号

> ID：14560726
> 
> 赞同：2
> 
> 时间：2013-01-28T11:10:29.930
> 
> 标签：ruby-on-rails, capybara, rspec2

当我通过测试时，以下输出：（使用 windows）

```
←[32m.←[0m

Finished in 0.63953 seconds
←[32m1 example, 0 failures←[0m

Randomized with seed 46497 
```

看到所有这些方括号了吗？他们怎么了？当测试失败时情况会更糟。由于括号，输出几乎不可读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:16:04.093

这些是 Windows 控制台无法处理的 ANSI 颜色代码。您可以在 Rails 日志中禁用 then，将这一行添加到`test.rb`（如果您只想在测试环境中删除它们）或`application.rb`（对于所有环境）：

```
config.colorize_logging = false 
```

并重新启动您的服务器。

# jquery - 使用 ajax/jquery 加载文件内容

> ID：14560727
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:34.943
> 
> 标签：jquery

我希望在单击我的潜水中的一个链接时从 .php 文件加载子链接。这可行，但我希望在单击“主页”链接时，再次返回原始链接。这也有效，但是当我重新单击这些链接之一时，子链接不再从 .php 文件中加载。

html页面：

```
<script>
    $(document).ready(function(){
        $(".link").click(function(){
            var value = $(this).attr("href");
            var linkName = {'href':value};
            alert(value);

            $.ajax({
                type: "POST",
                url: 'sublinks.php',
                data :linkName,
                success: function(response){
                    $('#target').html(response);
                }
            });
        }) ;
    })
</script>
.
.
.
<ul>
    <li><a href="#home" class="link">Home</a></li>
</ul>

<ul id="target">
    <li><a href="#book" class="link">books</a></li>
    <li><a href="#auth" class="link">authors</a></li>
</ul> 
```

sublinks.php 文件

```
<html>
<body>
    <?php
        $name = $_POST['href'];
        $books = array('web','coocking','coding');
        $authers = array(111,222,333);

        if ($name == "#books") {
            foreach ($books as $v)
                echo "<li><a href=\"#eroom\">".$v."</li></a>";
        }
        else if ($name == "#authors") {
            foreach ($authers as $v)
                echo "<li><a href=\"#sroom\">".$v."</li></a>";
        }
        else if ($name == "#home") {
            echo "<li><a  href=\"#book\" class=\"link\">books</li></a>";
            echo "<li><a  href=\"#auth\" class=\"link\">authers</li></a>";
        }
    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:15:10.097

尝试：

```
$('#target').on( 'click', 'a.link', function () { 
  ..your code here
}); 
```

编辑：我的意思是改变以下：

```
$(".link").click(function(){ 
```

至

```
$('#target').on( 'click', 'a.link', function () { 
```

补充：你也可以做

```
$(document).on('click', 'a.link', function() {
    .... rest of your code
}); 
```

编辑：此代码将添加一个委托，以便在`a.link`添加更多元素时，`#target`它们也将绑定其点击处理程序。

# java - Hibernate Search（Lucene 索引）如何工作？

> ID：14560729
> 
> 赞同：2
> 
> 时间：2013-01-28T11:10:36.423
> 
> 标签：java, hibernate, lucene, hibernate-search

我正在使用基于 Lucene 索引构建的 Hibernate Search。如果针对数据库表创建索引，则返回结果的性能会很好。

我的问题是，一旦创建了索引，如果我们查询结果，Hibernate Search 是否使用创建的索引从原始数据库表中获取结果？还是不需要访问数据库来获取结果？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T23:15:07.330

除非您使用[Projections](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#projections "指数预测")，否则索引仅用于识别与查询匹配的主键集，然后使用这些索引从数据库加载实体。

这有很多很好的理由：

*   正如您所指出的，我们不会将所有数据存储在索引中：更大的索引是更慢的索引
*   将所有需要的元数据添加到索引将使索引操作非常昂贵
*   从索引中提取值根本没有效率：它擅长查询，仅此而已
*   关系数据库非常擅长按主键加载数据
*   如果你的数据库不够好，二级缓存非常适合通过主键加载
*   通过从数据库加载，我们保证了一致性，尤其是*异步*索引
*   通过从数据库加载，您有实体参与事务和隔离

也就是说，如果您不需要完全托管的实体，您可以使用 Projections 来加载您注释为 Stored.YES 的字段。一种常见的模式是使用投影提供匹配的预览，然后当用户单击详细信息以加载与该结果匹配的完整实体时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:18:00.020

默认情况下，每次通过 Hibernate 插入、更新或删除对象时，Hibernate Search 都会根据[文档更新相应的 Lucene 索引](http://docs.jboss.org/hibernate/search/3.4/reference/en-US/html_single/)

因此，进一步的搜索将仅通过 lucene 索引产生数据。

另一个[解释](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)索引如何工作的问题

# zend-framework2 - zf2在控制器、表单和视图中访问url参数

> ID：14560730
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:36.933
> 
> 标签：zend-framework2, multilingual

我正在 ZF2 中开发一个多语言网站。同样，我需要将“locale”和“textDomain”传递给控制器​​/表单/视图中的“translate”和“url”助手。

我如何才能最好地在 MVC 中检索和传递它。我无法就如何处理表单标签翻译做出结论。

提前感谢您的帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:31:09.727

查看文档：

[https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.view.helpers.html](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.view.helpers.html)

如果您附加了 Zend\I18n\Translator\Translator，FormLabel 视图助手将在其呈现期间翻译标签内容。

```
// Setting a translator
$this->formLabel()->setTranslator($translator);

// Setting a text domain
$this->formLabel()->setTranslatorTextDomain('my-text-domain');

// Setting both
$this->formLabel()->setTranslator($translator, 'my-text-domain'); 
```

笔记

注意：如果您在服务管理器中的键“翻译器”下有翻译器，则视图助手插件管理器将自动将翻译器附加到 FormLabel 视图助手。更多信息参见 Zend\View\HelperPluginManager::injectTranslator()。

ZF2 骨架应用程序向您展示了如何设置上述翻译器，它将自动为您翻译标签:)

# java - 找不到带有 jsoup (Java) 的亚马逊元素，因为我对 Web 开发知之甚少

> ID：14560731
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:38.170
> 
> 标签：java, html, web-scraping, amazon, jsoup

我目前正在尝试从亚马逊上抓取大量数据。我正在使用 jsoup 来帮助我做到这一点，一切都进行得很顺利，但由于某种原因，我无法弄清楚如何拉动当前销售新产品的卖家数量。

这是我正在抓取的网址示例：http: [//www.amazon.com/dp/B006L7KIWG](https://rads.stackoverflow.com/amzn/click/com/B006L7KIWG)

我想从以下内容中提取“39 new”：

```
<div id="secondaryUsedAndNew" class="mbcOlp">
    <div class="mbcOlpLink">
        <a class="buyAction" href="/gp/offer-listing/B006L7KIWG/ref=dp_olp_new_mbc?ie=UTF8&condition=new">
            39&nbsp;new
        </a> &nbsp;from&nbsp;
        <span class="price">$60.00</span>
     </div>
</div> 
```

这个项目是我第一次使用jsoup，所以编码可能有点不确定，但这里有一些我尝试过的东西：

```
 String asinPage = "http://www.amazon.com/dp/" + getAsin();
            try {
                Document document = Jsoup.connect(asinPage).timeout(timeout).get();
.....  

  //get new sellers try one
                    Elements links = document.select("a[href]");
                    for (Element link : links) {
                       // System.out.println("Span olp:"+link.text());
                        String code = link.attr("abs:href");
                        String label = trim(link.text(), 35);
                        if (label.contains("new")) {
                            System.out.println(label + " : " + code);
                        }
                    }

    //get new sellers try one
                    Elements links = document.select("div.mbcOlpLink");
                    for (Element link : links) {
                       // System.out.println("Span olp:"+link.text());
                    }

    //about a million other failed attempts that you'll just have to take my word on. 
```

当我在页面上抓取我需要的所有其他内容时，我已经成功了，但由于某种原因，这个特定的元素很痛苦，任何帮助都会很棒！多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:44:58.297

我会用

```
String s = document.select("div[id=secondaryUsedAndNew] a.buyAction").text.replace("&nbsp;"," "); 
```

正如此时页面上所说，这应该会给您留下“42 new”。

希望这对你有用！

# android - 如果选择了非零位置，则在旋转后调用 Spinner 的 onItemSelected 回调两次

> ID：14560733
> 
> 赞同：33
> 
> 时间：2013-01-28T11:10:50.657
> 
> 标签：android, android-widget, android-spinner

当我创建我的活动时，我设置了一个 Spinner，为它分配了一个监听器和一个初始值。我知道`onItemSelected`在应用程序初始化期间会自动调用回调。我觉得奇怪的是，当设备旋转时，这种情况会发生**两次**，给我带来了一些我必须以某种方式规避的问题。如果微调器初始选择为零，则不会发生这种情况**。**我能够隔离问题，这是触发它的最简单的活动：

```
public class MainActivity extends Activity implements OnItemSelectedListener {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("Test","Activity onCreate");
    setContentView(R.layout.activity_main);
    ((Spinner)findViewById(R.id.spinner1)).setSelection(2);
    ((Spinner)findViewById(R.id.spinner1)).setOnItemSelectedListener(this);
}
@Override
public void onItemSelected(AdapterView<?> spin, View selview, int pos, long selId)
{
    Log.i("Test","spin:"+spin+" sel:"+selview+" pos:"+pos+" selId:"+selId);
}
@Override
public void onNothingSelected(AdapterView<?> arg0) {}
} 
```

这是应用程序启动然后设备旋转时显示的 logcat：

```
 I/Test( 9881): spin:android.widget.Spinner@4052f508 sel:android.widget.TextView@40530b08 pos:2 selId:2
    I/Test( 9881): Activity onCreate
    I/Test( 9881): spin:android.widget.Spinner@40535d80 sel:android.widget.TextView@40538758 pos:2 selId:2
    I/Test( 9881): spin:android.widget.Spinner@40535d80 sel:android.widget.TextView@40538758 pos:2 selId:2 
```

这是预期的行为吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-04T18:27:38.853

设法在另一个stackoverflow问题中找到解决方案：

```
spinner.post(new Runnable() {
    public void run() {
        spinner.setOnItemSelectedListener(listener);
    }
}); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-11T23:38:05.807

一般来说，触发 onItemSelected 调用的事件似乎很多，而且很难跟踪所有这些事件。此解决方案允许您仅使用 OnTouchListener 响应用户发起的更改。

为微调器创建侦听器：

```
public class SpinnerInteractionListener implements AdapterView.OnItemSelectedListener, View.OnTouchListener {

    boolean userSelect = false;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        userSelect = true;
        return false;
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        if (userSelect) { 
            // Your selection handling code here
            userSelect = false;
        }
    }

} 
```

将侦听器作为 OnItemSelectedListener 和 OnTouchListener 添加到微调器：

```
SpinnerInteractionListener listener = new SpinnerInteractionListener();
mSpinnerView.setOnTouchListener(listener);
mSpinnerView.setOnItemSelectedListener(listener); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-07-07T20:31:51.087

只需在设置侦听器之前使用 setSelection(#, false) ：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ...
    spinner.setSelection(2, false);
    spinner.setOnItemSelectedListener(this);
} 
```

关键是第二个参数。它说不要为过渡设置动画，立即执行操作并防止 onItemSelected 被触发两次，因为系统已经进行了调用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-11T15:12:39.223

第一次`onItemSelected`运行时，`view`尚未充气。第二次它已经膨胀了。解决方案是`onItemSelected`用`if (view != null)`.

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if (view != null) { 
        //do things here

    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-14T23:56:46.370

这就是我所做的：

做一个局部变量

```
Boolean changeSpinner = true; 
```

在 saveInstanceMethod 上保存 spinner 的选中项位置

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("ItemSelect",mySpinner.getSelectedItemPosition());
} 
```

然后在创建的活动上从 savedInstanceState 获取该 int ，如果 int 为 != 0 则将布尔变量设置为 false；

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {

    if (savedInstanceState!=null) {
        if (savedInstanceState.getInt("ItemSelect")!=0) {
           changeSpinner = false;
        }
    }

} 
```

最后在微调器的 OnItemSelected 上执行此操作

```
mySpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent,android.view.View v, int position, long id) {
        if (changeSpinner) {
           [...]
        } else {
           changeSpinner= true;
        }
    }); 
```

所以，第一次 when is called 什么都不做，只是将布尔变量设为 true，第二次将执行代码。也许不是最好的解决方案，但它有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-03T10:40:47.480

我正在更新@Andres Q. 在 Kotlin 中的答案。

创建一个使用 Spinner 的内部类

```
inner class SpinnerInteractionListener : AdapterView.OnItemSelectedListener, View.OnTouchListener {
        override fun onNothingSelected(parent: AdapterView<*>?) {

        }

        override fun onItemSelected(parent: AdapterView<*>?, view: View?, position: Int, id: Long) {
            if (userSelect) {
                //Your selection handling code here
                userSelect = false
            }
        }

        @SuppressLint("ClickableViewAccessibility")
        override fun onTouch(v: View?, event: MotionEvent?): Boolean {
            userSelect = true
            return false
        }

        internal var userSelect = false
    } 
```

然后将外部实例变量声明`onCreate()`为全局变量

```
lateinit var spinnerInteractionListener: SpinnerInteractionListener 
```

`onCreate()` 然后在里面初始化它

```
spinnerInteractionListener = SpinnerInteractionListener() 
```

并像使用它一样

```
spinnerCategory.onItemSelectedListener = spinnerInteractionListener
spinnerCategory.setOnTouchListener(spinnerInteractionListener) 
```

这`spinnerCategory`是[微调器](https://developer.android.com/guide/topics/ui/controls/spinner)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T13:32:57.047

试试这个：

```
boolean mConfigChange = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    mConfigChange = false;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mainf);

    Log.i("SpinnerTest", "Activity onCreate");
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.colors,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    ((Spinner) findViewById(R.id.spin)).setAdapter(adapter);

     ((Spinner) findViewById(R.id.spin)).setSelection(2);
    ((Spinner) findViewById(R.id.spin)).setOnItemSelectedListener(this);

}

@Override
protected void onResume() {
    mConfigChange = true;
    super.onResume();
}

@Override
public void onItemSelected(AdapterView<?> spin, View selview, int pos, long selId) {
    if (!mConfigChange)
        Log.i("Test", "spin:" + spin + " sel:" + selview + " pos:" + pos + " selId:" + selId);
    else
        mConfigChange = false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-02T15:41:46.863

一旦你知道有项目列表和要选择的位置，你就可以调用`setSelection`，这样你`onItemSelected`就可以避免被调用两次。

我创建了一篇关于我认为更好的方法的文章[如何避免 onItemSelected 在 Spinners 中被调用两次](http://knewless.blogspot.com.es/2016/04/android-how-to-avoid-onitemselected-to.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-18T07:42:02.250

我编写了一个扩展函数，它跳过所有选择事件，除了用户发起的那些。如果您不使用第一个默认微调器位置，请**不要忘记覆盖 defPosition**

```
fun Spinner.setFakeSelectSkipWatcher(execute: (position: Int) -> Unit, defPosition: Int = 0) {
val listener = object : AdapterView.OnItemSelectedListener {
    var previousIsNull = -1
    var notSkip = false
    override fun onItemSelected(p0: AdapterView<*>?, view: View?, position: Int, p3: Long) {
        if (notSkip) execute(position)
        else {
            if ((view != null && position == defPosition) ||
                (view == null && position == defPosition) ||
                (view != null && previousIsNull == 1 && position != defPosition)
            ) notSkip = true
        }
        previousIsNull = if (view == null) 1 else 0
    }
    override fun onNothingSelected(p0: AdapterView<*>?) {}
}
onItemSelectedListener = listener 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-22T23:12:37.223

在 kotlin stateflow 中让它变得简单。在片段中，它也可以保存旋转数据。在我的代码中，我解决了

在视图模型中：

```
private val _selectedPosition = MutableStateFlow(0)
val selectedPosition = _selectedPosition.asStateFlow()

fun setPosition(position: Int) {
    _selectedPosition.value = position
} 
```

在片段中

```
val selectedPosition= viewModel.selectedPosition.value
spinner.setSelection(selectedPosition) 
```

# ios - 如何用 UItextfield 替换特定字符

> ID：14560735
> 
> 赞同：0
> 
> 时间：2013-01-28T11:10:58.267
> 
> 标签：ios, objective-c, xcode, uitextfield, uitextview

我尝试了所有方法但没有用，因为我的逻辑能力很差......问题是我需要用uitextfield替换句子中的一个单词，让它看起来像一个空白，而且太动态了

例如：测试到达现场

我需要用 UItextfield 替换上面句子中的“Test”，以便用户可以输入 uitextfield。请告诉我更换它的方法..

我用 uitextview 来显示问题，代码是

```
UITextview   *textview = [[UITextView alloc] initWithFrame:CGRectMake(0.0, currentY, 320.0, myStringSize.height)];
textview.text = [NSString stringWithFormat:@"%i. %@", i+1, unhide];
textview.font = [UIFont fontWithName:@"Helvetica" size:16.0f];
CGRect frame = textview.frame;
frame.size.height = textview.contentSize.height;
textview.frame = CGRectMake(0.0, currentY, 320.0, frame.size.height+20);
textview.editable = NO;
[scrollMain addSubview:textview]; 
```

有什么办法可以吗...

或者有没有办法在textview中找出“Test”的坐标？帮帮我，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:14:11.773

这会将“Test”一词替换为您选择的字符串：

```
textview.text = [textview.text stringByReplacingOccurrencesOfString:@"test" withString:@"SomeStringToReplaceWithTest"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:14:30.697

编辑：

在你的文本视图中选择“测试”，以编程方式找到它的范围

找到选定的文本范围：

```
UITextRange *selectionRange=[textView selectedTextRange];
CGRect selectionStartRect=[textView caretRectForPosition:selectionRange.start];
CGRect selectionEndRect=[textView caretRectForPosition:selectionRange.end];
CGPoint selectionCenterPoint=(CGPoint){(selectionStartRect.origin.x + selectionEndRect.origin.x)/2,(selectionStartRect.origin.y + selectionStartRect.size.height / 2)}; 
```

`textField.frame`现在用上面的初始化。

您的文本字段将出现在编写测试的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:18:35.643

执行以下步骤：

```
NSRange wordRange = NSMakeRange(0,10);
NSArray *firstWords = [[str componentsSeparatedByString:@" "] subarrayWithRange:wordRange]; 
```

您将数组元素中的所有单词然后通过上述方法之一替换您想要的任何世界。更新：

```
 NSString *test=@"Test arrives on the scene";
NSRange wordRange = NSMakeRange(0,10);
NSMutableArray *firstWords = (NSMutableArray *)[[test componentsSeparatedByString:@" "] subarrayWithRange:wordRange];
[firstWords replaceObjectAtIndex:indexOfstringyouWant withObject:yourTextField.text]; 
```

然后再次将字符串从数组中取出。

# gwt - 使用 Maven 将 GWT 从 1.7 升级到 2.4

> ID：14560739
> 
> 赞同：0
> 
> 时间：2013-01-28T11:11:02.810
> 
> 标签：gwt, maven

在我的项目中，我们使用的是 GWT 1.7，现在我们想将其升级到 2.4。我们还使用 maven 1.6 来构建项目。我已经更改了所有 pom.xml 文件，所以它们看起来像这样：

```
<properties>        
        <gwt.version>2.4.0</gwt.version>
</properties>

<dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwt.version}</version>
            <scope>runtime</scope>
        </dependency>
</dependencies> 
```

现在，当我尝试构建项目时，它会因错误而崩溃：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] artifact not found - Unable to download the artifact from any repository

Try downloading the file manually from the project website.

Then, install it using the command: 
    mvn install:install-file -DgroupId=com.google.gwt -DartifactId=gwt-dev -Dversion=2.4.0 -Dclassifier=linux-libs -Dpackaging=zip -Dfile=/path/to/file

Alternatively, if you host your own repository you can deploy the file there: 
    mvn deploy:deploy-file -DgroupId=com.google.gwt -DartifactId=gwt-dev -Dversion=2.4.0 -Dclassifier=linux-libs -Dpackaging=zip -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

  com.google.gwt:gwt-dev:zip:2.4.0

from the specified remote repositories:
  central (http://repo1.maven.org/maven2),
  smartgwt-maven (http://www.smartclient.com/maven2),
  repo.pentaho.org (http://repository.pentaho.org/artifactory/pentaho),
  java-net-maven2 (http://download.java.net/maven/2),
  thirdparty.pentaho.org (http://repository.pentaho.org/artifactory/thirdparty),
  Octo Technology Nexus (http://forge.octo.com/nexus/content/groups/public),
  codehaus-maven-repo (http://repository.codehaus.org/org/codehaus/mojo/) 
```

我已经下载了文件 gwt-2.4.0.zip 和 gwt-servlet-2.4.0.jar，并尝试 mvn 安装它们，现在我的 .m2/repository/com/google/gwt/ 4目录：gwt、gwt-dev、gwt-servlet 和 gwt-user，它们都有 2.4.0 类别（有些也有旧的 1.7.0）目录，但仍然出现构建错误。

**更新**

现在我已将版本更改为`<gwt.version>2.5.0-rc1</gwt.version>`，开始 maven 构建，我看到 mvn 何时下载所需的包，但它再次出现：

```
com.google.gwt:gwt-dev:jar:2.5.0-rc1 
```

未找到。我从google网站下载了gwt-2.5.0.zip，里面有很多.jar文件，我应该安装哪个？

# php - 尝试以不同的语言显示文本

> ID：14560741
> 
> 赞同：1
> 
> 时间：2013-01-28T11:11:13.443
> 
> 标签：php, cookies, session-cookies, setcookie

我设置了一个名为“lang”的cookie。浏览时，它将被当前语言分配一个值。但是如何以当前语言显示文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:13:42.197

尝试 -

```
if($_COOKIE["lang"]=='dutch'){
$text='dutch text';
}
elseif($_COOKIE["lang"]=='german'){
$text='german text';
}
elseif($_COOKIE["lang"]=='french'){
$text='french text';
}

echo $text; 
```

# z3 - Z3 Python 中无法满足的核心

> ID：14560745
> 
> 赞同：3
> 
> 时间：2013-01-28T11:11:21.597
> 
> 标签：z3, z3py

我正在使用 Z3 的 Python API，试图在我正在编写的研究工具中包含对它的支持。我有一个关于使用 Python 接口提取无法满足的核心的问题。

我有以下简单的查询：

```
(set-option :produce-unsat-cores true)
(assert (! (not (= (_ bv0 32) (_ bv0 32))) :named __constraint0))
(check-sat)
(get-unsat-core)
(exit) 
```

通过 z3 可执行文件（对于**Z3 4.1**）运行此查询，我收到了预期的结果：

```
unsat
(__constraint0) 
```

对于**Z3 4.3**，我得到一个分段错误：

```
unsat
Segmentation fault 
```

这不是主要问题，尽管这是一个有趣的观察。然后我将查询（在文件内）修改为

```
(assert (! (not (= (_ bv0 32) (_ bv0 32))) :named __constraint0))
(exit) 
```

使用文件处理程序，我将此文件的内容（在变量 `queryStr' 中）传递给以下 Python 代码：

```
import z3
...
solver = z3.Solver()
solver.reset()
solver.add(z3.parse_smt2_string(queryStr))
querySatResult = solver.check()
if querySatResult == z3.sat:
    ...
elif querySatResult == z3.unsat:
    print solver.unsat_core() 
```

我从“unsat_core”函数收到空列表：[]。我是否错误地使用了此功能？该函数的文档字符串表明我应该改为做类似的事情

```
solver.add(z3.Implies(p1, z3.Not(0 == 0))) 
```

但是，我想知道是否仍然可以按原样使用查询，因为它符合 SMT-LIB v2.0 标准（我相信），以及我是否遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T15:38:59.513

您观察到的崩溃已修复，该修复将在下一个版本中提供。如果您尝试“不稳定”（正在进行的工作）分支，您应该会得到预期的行为。您可以使用检索不稳定的分支

```
git clone https://git01.codeplex.com/z3 -b unstable 
```

API`parse_smt2_string`仅提供对 SMT 2.0 格式的解析公式的基本支持。它不保留注释`:named`。我们将在未来版本中解决此限制和其他限制。同时，我们应该使用“答案文字”，例如`p1`以下形式的断言：

```
solver.add(z3.Implies(p1, z3.Not(0 == 0))) 
```

在“不稳定”分支中，我们还支持以下新 API。它“模拟”`:named`了 SMT 2.0 标准中使用的断言。

```
def assert_and_track(self, a, p):
    """Assert constraint `a` and track it in the unsat core using the Boolean constant `p`.

    If `p` is a string, it will be automatically converted into a Boolean constant.

    >>> x = Int('x')
    >>> p3 = Bool('p3')
    >>> s = Solver()
    >>> s.set(unsat_core=True)
    >>> s.assert_and_track(x > 0,  'p1')
    >>> s.assert_and_track(x != 1, 'p2')
    >>> s.assert_and_track(x < 0,  p3)
    >>> print(s.check())
    unsat
    >>> c = s.unsat_core()
    >>> len(c)
    2
    >>> Bool('p1') in c
    True
    >>> Bool('p2') in c
    False
    >>> p3 in c
    True
    """
    ... 
```

# jquery - 使用 jQuery 的按钮计时

> ID：14560751
> 
> 赞同：0
> 
> 时间：2013-01-28T11:11:34.523
> 
> 标签：jquery, asp.net-mvc-3

我必须根据按钮点击显示数据。只需使用 jquery 即可完成。现在问题是我想自动化这些按钮..例如，当页面加载时，数据根据第一个按钮显示（好像第一个按钮被点击) ，然后在2秒后根据第二个按钮显示数据（好像点击了第二个按钮），再过2秒后根据第三个按钮显示数据（好像点击了第一个按钮）。

```
$(document).ready(function () {

    $(".headerClass").text("Top Line Stats !!")
    $(".InformationItem").hide();
     $(".informationContainer div[data-id=1]").show();

 //   window.setInterval(function () { DisplaySuccessiveData() }, 10000)
});

$(".listItem").click(function () {
    var index = $(this).attr("data-id");
    $(".InformationItem").hide();
    $(".informationContainer div[data-id=" + index + "]").fadeIn(1000);
}); 
```

如何进行 ？我是初学者，对编码了解不多。我无法正确应用 Setinterval 和 settimeout 函数。请指导我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:17:15.097

您可以使用..

```
window.setInterval(yourfunction, 10000);

function yourfunction() { alert('test'); } 
```

时间过去后会调用你的函数

# android - 将字段动态添加到 Android 中的布局

> ID：14560758
> 
> 赞同：1
> 
> 时间：2013-01-28T11:11:59.533
> 
> 标签：android, android-layout, android-widget

在我的应用程序中，我想根据选择动态添加字段。虽然有 4 个固定微调器字段，但微调器的值取决于第一个微调器字段等的选择。必须根据第一个字段填充第二个微调器字段，基于第二个字段填充第三个微调器字段，依此类推.

根据在这 4 个微调框字段中选择的选项，布局将包含文本字段或单选按钮等附加字段。

有人可以建议实现这一目标的最佳方法或参考其他示例吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:17:55.977

您可以将视图添加到类似于以下代码的布局：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            (LayoutParams.WRAP_CONTENT), (LayoutParams.WRAP_CONTENT));

RelativeLayout relativeLayout = new RelativeLayout(mContext);
relativeLayout.setLayoutParams(layoutParams);

TextView view = new TextView(mContext);
view.setLayoutParams(layoutParams);

relativeLayout.addView(view); 
```

然后你需要将它添加到现有的 ViewLayout 中：

```
LinearLayout originalLayout = findViewById(R.id.mylayout);
originalLayout.addView(relativeLayout); 
```

可以扩展此想法以将自定义视图等添加到您的屏幕。

# c# - 在 .NET 中使用表达式解析器

> ID：14560761
> 
> 赞同：0
> 
> 时间：2013-01-28T11:12:05.383
> 
> 标签：c#, .net, math, expression

我不确定这是否是一个典型的 stackoverflow 问题，但我正在开发一个应用程序，我应该不断检查一些条件（例如，如果某个变量的值超过阈值）。条件可以随时更改，最好从代码外部更改。

人们建议我应该使用表达式解析器，但我仍然不明白与 .NET 提供的基本数学运算相比，它们为我提供了什么优势。

你推荐一个好的 .NET 表达式解析器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:40:37.633

表达式解析器将提供更大的灵活性。您的表达式可以写成字符串中的公式，它们可以是应用程序数据，而不是硬编码的类/方法/任何东西。

您可以执行以下操作：

```
// Assign an action to an expression given as a string
ExpressionObserver.Add("(a+b+c)/2 > x-y", () => { DoSomething(); }); 
```

或者：

```
// Replace the old expression by something written by the user in the UI
someExpressionActionAssignment.Expression = MyLineEdit1.Text; 
```

但我不知道所有这些增加的复杂性是否真的在你的情况下得到了回报。如果你只有几个简单的表达式，那么它可能是矫枉过正的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:20:07.863

我认为您需要动态 LINQ。您可以将条件作为字符串传递。

这是 ScottGu 的博客文章：[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library。 aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我通过一个类似的问题找到了这个：[动态 WHERE 子句 in LINQ](https://stackoverflow.com/questions/848415/linq-dynamic-where-clause)

# mongodb - 为我的社交设计 MongoDb 架构

> ID：14560763
> 
> 赞同：0
> 
> 时间：2013-01-28T11:12:10.553
> 
> 标签：mongodb, database-design, nosql

我是 MongoDB 新手，我只是想创建一个简单的项目来测试 MongoDB 的性能 该项目就像一个简单的 CMS，它有用户、博客和评论，用户可以有朋友

所以我这样设计我的数据库

```
user
{
     _ID:
    name:
    birth_day:
    sex:

    friends:[id_1,Id_2]
}
blogs
{
    title:
    owner: 
    tags_fiends:
    comments:
    [
        {"_id":"","content":"","date_created":""},
        {"_id":"","content":"","date_created":""},
    ],
    "like"={"_id","_id"}
} 
```

以及该数据库需要多少个集合。我可以为用户和博客使用 1 个集合吗？在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:05:54.660

由于 mongoDB 是少模式或无模式数据库，您可以在文档中创建任何类型的结构，支持：

*   个别元素
*   嵌套数组
*   嵌套文档

在架构设计过程中，您必须考虑几件事，因为将用户和博客放在分开的架构中很有用。例如，如果您将某些内容存储在嵌套数组中，则可以指定索引以在该数组中固定搜索，但在一个特定集合中只能有一个多键索引（索引数组内容）。因此，如果您将朋友和博客、帖子和标签全部存储在数组中，您只能在其中一个上拥有索引。

同样重要的是要知道在这种情况下每个文档的大小限制现在是 16MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:02:09.133

在您的场景中，我会让用户成为一个集合，并通过博客集合中的 _id 引用它。

在实践中，您可以将博客设置为用户的属性，唯一的限制是最大文档大小为 16MB - 但这是很多博客（文本）。

为了解决这个问题（假设您需要），引用用户 _id 的单独博客集合就可以了。如果那不是您的 _id，您可能也需要对用户名进行非规范化。这意味着您可以在单个查询中获取用户的所有博客。

# wpf - 默认按钮对输入窗口对话框没有反应

> ID：14560764
> 
> 赞同：2
> 
> 时间：2013-01-28T11:12:19.683
> 
> 标签：wpf, xaml, dialog, window

我有一个带有“浏览”按钮的小型用户控件，用于选择一些文件，并带有用于可视化所选文件路径的文本框：

```
<TextBox Text="{Binding FilePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
<Button Content="Browse" cal:Message.Attach="SelectInstallationPointsFile" /> 
```

从窗口对话框开始的控件作为带有两个按钮的窗口 -`OK`并且`Cancel`在窗口资源样式（代码的简化版本）上定义：

```
<Style TargetType="{x:Type Window}">
    ...
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Window}">
                ...
                <ContentControl Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" /> <!-- here will be the user control -->
                <Button IsDefault="True" Content="OK" cal:Message.Attach="Apply" />
                <Button IsCancel="True" cal:Message.Attach="Cancel" />
            ...
</Style> 
```

对话框视图（绿色部分 - 窗口，红色 - 用户控件）：

![绿色部分 - 窗口，红色 - 用户控件](../Images/b6d15e2d0f59957e7a79f9d4ac93f5fa.png)

问题是下一个 - 当您单击`Enter`按钮时，然后`Browse`从用户控件中对按钮做出反应，而不是`OK`从窗口对话框中对按钮做出反应，尽管`OK`按钮有`IsDefault="True"`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:34:32.460

在 YourUserControl.xaml.cs 中：

```
public partial class YourUserControl : UserControl
{
    public YourUserControl()
    {
        InitializeComponent();
        this.OkBtn.Focus();
    }
} 
```

对不起，我的错，你可以试试：

```
<ControlTemplate TargetType="{x:Type Window}" FocusManager.FocusedElement="{Binding ElementName=OkBtn}"> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:31:56.657

所以，我只是在“浏览”按钮中尝试了 Focusable="False"，它有效！）

# matlab - How to set the scope of a variable in a Matlab function

> ID：14560765
> 
> 赞同：3
> 
> 时间：2013-01-28T11:12:24.213
> 
> 标签：matlab, overloading, scope

I have observed a strange behavior in running the same code in a Matlab function and in the command window. It's already described in [How does scoping in Matlab work?](https://stackoverflow.com/questions/13073201/how-does-scoping-in-matlab-work) , but I don't understand how I could solve my specific problem. The code is the following:

```
exporteddata.m  %File created by an external program 
                %to export data in Matlab format

surface = struct('vertices', [...]) ; 
                         %I can't specify in the external program 
                         %the name of the variable, it's always "surface" 
```

My actual code is:

```
 myfunction.m 

   function output = myfunction(input)
   load(input);
   n = size(surface.vertices);
  .... 
```

When running

```
myfunction('exporteddata.m'); 
```

I get the following error:

**??? No appropriate method, property, or field vertices for class hg.surface.**

When running the same instructions from the command window or in debug mode, the code works well.

How can I specify in the function that I need the variable surface present in the workspace, not the Matlab function?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:23:25.407

First of all, I must point out that [`surface`](http://www.mathworks.com/help/matlab/ref/surface.html) is a built-in function in MATLAB, so overloading it is just... bad. Bad, bad, **BAD**!

Having said that, the MATLAB interpreter does a pretty good job at resolving variable names and usually tells them apart from function names correctly. So where's your problem, you ask?
I believe that you're using the wrong function: [`load`](http://www.mathworks.com/help/matlab/ref/load.html) is a function that loads data from MAT files into the workspace. It is not fit for m-files. By not executing "exportedata.m" properly, `surface` has never been created as a variable, so MATLAB identifies it as a function name. If you want to execute "exportedata.m", just type:

```
exportedata 
```

and if you want to run the file with the filename stored in `input`, you can use [`run`](http://www.mathworks.com/help/matlab/ref/run.html):

```
run(input) 
```

By executing `run(input)` from within `myfunction`, `surface` should be created in `myfunction`'s local scope, and it should work.

**EDIT:**
I've just tested it, and the interpreter still gets confused. so the issue of the variable name resolution remains. Here's a workaround:

```
function output = myfunction(input)
   surface = 0;                     %// <-- Pay attention to this line
   run(input);
   n = size(surface.vertices); 
```

Predefining `surface` allows the interpreter to identify it as a variable throughout your entire function. I've tried it and it works.

# android - 崩溃不应显示任何错误

> ID：14560766
> 
> 赞同：0
> 
> 时间：2013-01-28T11:12:28.080
> 
> 标签：android, runtime-error

在 Android 中，发生错误时会提示运行时错误对话框。是否可以隐藏它？或者只是在生产模式下隐藏它？因为它显示了一些不应该向用户公开的应用程序的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:55:38.620

`Thread.setDefaultUncaughtExceptionHandler(..)`您可以在主线程上为未捕获的异常设置自定义处理程序。在那里你可以做你需要做的事情，包括如果你使用以下模式调用默认行为：

```
public class ExceptionHandler implements UncaughtExceptionHandler
{
    /**
     * The default handler.
     */
    private UncaughtExceptionHandler defaultUEH;

    /**
     * Constructs the instance and sets the default handler to the one currently
     * active at the time of construction.
     */
    public ExceptionHandler() 
    {
        this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
    }

    @Override
    public void uncaughtException(Thread thread, Throwable ex)
    {
        // do your stuff            

        // if you want to resume with the default behaviour, you call this
        defaultUEH.uncaughtException(thread, ex);
    }
} 
```

在你的`Activity`/ `Application`：

```
Thread.setDefaultUncaughtExceptionHandler(new ExceptionHandler()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:27:36.880

您应该避免您的应用程序达到强制关闭，当您的应用程序最终强制关闭时，您的主线程已被杀死并且您的应用程序不再运行并且在编码中无法访问，因此您可以创建另一个线程并处理情况并显示给用户的自定义对话框。

也许Github 中的[Acra](https://github.com/ACRA/acra)会帮助你处理这个问题。

# linux - 无法在 Eclipse Juno 上配置 Tomcat 7

> ID：14560767
> 
> 赞同：1
> 
> 时间：2013-01-28T11:12:36.927
> 
> 标签：linux, eclipse, tomcat

我安装了带有 Spring Tools Suite 插件的 Eclipse Juno。

我需要将一个新导入的 Web 项目部署到我通过存储库安装在我的系统上的 Tomcat 7。

问题是`New Server Wizard`屏幕不允许我选择 Tomcat 7，因为描述是空的且不可修改。

![日食截图](../Images/dff81f92604fa7c6fa626ab1d1cc5676.png)

我怎样才能解决这个问题？我可以选择其他版本的 Tomcat，但是当我选择 Tomcat 的安装路径时，我收到安装版本为 7 的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:38:59.103

根据本[网站提供的说明](http://hariprasad.info/cannot-create-a-server-using-the-selected-type-eclipse-tomcat/)

请按照以下步骤操作，因为这是一个已知问题

1.  转到`Window–&gt;Preferences–&gt;Server–&gt;Runtime Environments`并修复服务器的损坏路径/链接。
2.  重命名`org.eclipse.jst.server.tomcat.core.prefs`为`org.eclipse.jst.server.tomcat.core.prefs.bak`（或者您可以删除此文件）。这个文件可以在`\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings`
3.  重命名`org.eclipse.wst.server.core.prefs`为`org.eclipse.wst.server.core.prefs.bak`（或删除文件）。该文件也可以在与上述相同的位置找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T13:25:12.993

```
Follow these steps

1.)Go to Window–&gt;Preferences–&gt;Server–&gt;Runtime Environments and fix the broken path/link for the server.
2.)delete this file org.eclipse.jst.server.tomcat.core.prefs under this location \workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings
3.)delete this file org.eclipse.wst.server.core.prefs under this location \workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings

After following these step's you can configure tomcat in eclipse. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:59:46.003

![尝试进入新服务器向导](../Images/ff377d93569c53417b6acba5de2ed5e6.png)

单击添加配置运行时环境

![在此处输入图像描述](../Images/ba8179f8c5ef39eabb375ba05b14187b.png)

在服务器运行时环境窗口中，您很可能会看到 Apache Tomcat 7。如果您删除运行时环境，然后返回到新服务器向导，Tomcat 7 将可以再次添加。

希望有帮助。这让我疯了几天

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-23T02:31:54.993

Eclipse Juno 可能还不能与 Apache Tomcat 7 完全兼容。使用 Tomcat 6 进行安装和配置工作。简单的。

# java - Android GCM Java 服务器 - 没有消息数据的推送通知

> ID：14560782
> 
> 赞同：4
> 
> 时间：2013-01-28T11:13:41.290
> 
> 标签：java, android, push-notification, google-cloud-messaging

我正在尝试开发 java 服务器以在我的应用程序中发送推送通知。

我成功发送通知，但我有两个问题......

1.  消息文本未出现在状态栏中（仅显示应用程序的名称）

2.  当我单击状态栏中的通知时，没有任何反应（未打开应用程序）

这是我的java服务器代码：

```
 //ArrayList<String> userGcmList = new ArrayList<String>();   
    ArrayList<String> userRegIdGcmList = new ArrayList<String>(); 

    //my phone
    userRegIdGcmList.add("***********");        

    int numverOfDevicesRegisterd = userRegIdGcmList.size(); 

    try {                   
        //AI KEY 
        Sender sender = new Sender("*****************");    

        // use this line to send message with payload data
        Message message = new Message.Builder()
            .collapseKey("1")
            .timeToLive(3)
            .delayWhileIdle(true)
            .addData("message", "Text in the status bar does not appear")
            .build();

        // Use this for multicast messages
        MulticastResult result = sender.send(message, userRegIdGcmList, numverOfDevicesRegisterd);
        sender.send(message, userRegIdGcmList, numverOfDevicesRegisterd);           
        System.out.println(result.toString());  

        if (result.getResults() != null) {
            int canonicalRegId = result.getCanonicalIds();
            if (canonicalRegId != 0) {
            }
        } else {
            int error = result.getFailure();
            System.out.println(error);
        }

    } catch (Exception e) {         
        e.printStackTrace();
    } 
```

我在路由器上打开端口 5228 但它没有改变...

和我的应用程序中的来源：

> ```
> /**
>  * Issues a notification to inform the user that server has sent a message.
>  */
> private static void generateNotification(Context context, String message) { 
> ```

```
 long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, message, when);

    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    String title = context.getString(R.string.app_name);

    Intent notificationIntent = new Intent(context, LauncherActivity.class);

    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:39:23.017

参考这个[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)类名：GCMIntentService

# sublimetext2 - Sublime Text 2 中的每个项目文件类型设置

> ID：14560784
> 
> 赞同：3
> 
> 时间：2013-01-28T11:13:44.243
> 
> 标签：sublimetext2

我有一个在梅森的项目。我如何告诉 ST2 以 Mason 身份打开**该项目**的 .html 文件？

更一般地说，我如何告诉 ST2 在每个项目的基础上重新分配文件类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-26T21:24:28.157

对于那些对 ST3 解决方案感兴趣的人，我写了[这篇博](http://braindump.io/sublime-text/2014/09/26/project-specific-syntax-highlighting-in-sublime-text-3.html)文，我将在此处摘录。

首先，您需要将下面的 python 代码保存到您`Packages/User`目录中的文件中。此目录所在的位置取决于您的系统。在 MacOS 上，它位于`~/Library/Application Support/Sublime Text 3/Packages/User`. 为文件命名，例如`project_specific_file_syntax.py`.

```
import os.path
import re
import sublime_plugin

class ProjectSpecificFileSyntax(sublime_plugin.EventListener):
    def on_load(self, view):
        filename = view.file_name()
        if not filename:
            return

        syntax = self._get_project_specific_syntax(view, filename)
        if syntax:
            self._set_syntax(view, syntax)

    def _get_project_specific_syntax(self, view, filename):
        project_data = view.window().project_data()

        if not project_data:
            return None

        syntax_settings = project_data.get('syntax_override', {})

        for regex, syntax in syntax_settings.items():
            if re.search(regex, filename):
                return syntax

        return None

    def _set_syntax(self, view, syntax):
        syntax_path = os.path.join('Packages', *syntax)
        view.set_syntax_file('{0}.tmLanguage'.format(syntax_path)) 
```

现在，您只需要在文件中添加一个`syntax_override`部分`.sublime-project`，就像这样。

```
{
    ...

    "syntax_override": {
        "\\.html$": [ "HTML Underscore Syntax", "HTML (Underscore)" ]
    }
} 
```

该`syntax_override`部分可以包含任意数量的键/值对。键应该是与文件名匹配的正则表达式。该值应该是一个包含两个字符串的数组。第一个字符串是包含语法文件的包的名称，第二个是语法的名称。在 Sublime Text 的目录结构中查找以 . 结尾的文件`.tmLanguage`。这些文件的名称（减去`.tmLanguage`扩展名）是您将用于第二个字符串的名称。

我只用 Sublime Text 3 对此进行了测试，但我确信它可以很容易地适应 Sublime Text 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:42:15.013

Sublime Text 2 中没有原生的每个项目的语法设置。

目前，我正在使用[Modellines](https://github.com/SublimeText/Modelines)插件作为解决方法，但它需要`.html`在项目中每个文件的顶部（或底部）添加此模式行：

```
<!-- sublime: x_syntax Packages/Mason/Syntaxes/Mason.tmLanguage
--> 
```

**注意回车**，`-->`不能在同一行，否则将被解释为参数。

另一首曲目，我阅读了很多关于[DetectSyntax](https://github.com/phillipkoebbe/DetectSyntax)插件的评论。我很快就尝试了，没有成功，但也许你会比我更有耐心！无论如何，如果你能让它发挥作用，我对反馈很感兴趣。

# r - 在 R 中绘制哈斯图

> ID：14560785
> 
> 赞同：1
> 
> 时间：2013-01-28T06:25:16.310
> 
> 标签：r

是否有用于处理二元关系（计算闭包等）并绘制关系的 Hasse 图的 R 包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:49:36.553

包中的`hasse()`功能`DAKS`可以满足您的需要。

提示：[Rseek.org](http://www.rseek.org/)是一个特定于 R 的搜索机器，它可以创造奇迹。上面的函数是第一个命中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T07:53:05.457

DAKS 包是一种方法。你可以在这里阅读[小插图](http://cran.r-project.org/web/packages/DAKS/vignettes/DAKS.pdf)。

希望这能让你开始。

# android - 在 EditText 中选择所有文本时是否可以忽略特殊字符？

> ID：14560788
> 
> 赞同：1
> 
> 时间：2013-01-28T11:13:51.823
> 
> 标签：android, text, textview, keypress, selectall

我有一个`EditText`. 当我专注于它时，所有文本都被选中。当用户输入一个字符时，之前的文本（选定的文本）被删除，新的字符被插入到`EditText`.

我想防止在用户插入字符“=”**时删除选定的文本。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:21:11.260

将 textwatcher 与 EditText 一起使用，它具有三种方法

```
afterTextChanged(Editable s)
beforeTextChanged(CharSequence s, int start, int count, int after)
onTextChanged(CharSequence s, int start, int before, int count) 
```

使用 beforeTextChanged 并检查是否插入了特殊字符（= 或其他），保留旧文本

[http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

# .net - 使用 .Net 表单对用户和成员进行 Umbraco 身份验证

> ID：14560790
> 
> 赞同：2
> 
> 时间：2013-01-28T11:14:09.767
> 
> 标签：.net, forms-authentication, umbraco

我已经使用 .Net Forms Authentication 设置了权限，该权限非常适合 Umbraco 成员：

```
<!-- Public access permissions -->
<location path="scripts"><system.web><authorization><allow users="?"/></authorization></system.web></location>
<location path="images"><system.web><authorization><allow users="?"/></authorization></system.web></location>
<location path="css"><system.web><authorization><allow users="?"/></authorization></system.web></location>
<location path="umbraco"><system.web><authorization><allow users="?"/></authorization></system.web></location>

<system.web>
  <authentication mode="Forms">
    <forms name="yourAuthCookie" loginUrl="login.aspx" protection="All" path="/" />
  </authentication>
  <authorization>
      <deny users="?"/>
  </authorization>
</system.web> 
```

因此，除非他们验证自己的身份，否则成员将无法访问该站点，脚本和样式除外，以便可以正确查看登录页面。

当我尝试验证用户（在 Umbraco 中是指使用 CMS 的用户，而不是刚刚访问该站点的用户）时，问题就出现了。我试图让 umbraco/ 文件夹和 umbraco/login.aspx 等打开，但它没有正确显示 cms。

这一切似乎都是因为没有通过身份验证，好像我先以会员身份登录，然后以用户身份登录，它会完美显示一切。相反，如果我仅以用户身份登录，则大部分内容根本看不到。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:03:32.017

我认为你从错误的角度来处理这个问题。您可以通过 Umbraco UI 控制公共访问 - 无需修改 web.config。

1.  确保您已设置至少一个成员组
2.  右键单击“主页”节点并选择“公共访问”
3.  从可用选项中选择“基于角色的保护”
4.  选择成功验证后允许访问您的站点的成员组（角色）。
5.  选择您的登录和错误页面并点击更新。

以下视频应有助于演示实现您所要求的基本步骤：

[http://umbraco.com/help-and-support/video-tutorials/umbraco-fundamentals/members/role-based-protection/TVPlayer](http://umbraco.com/help-and-support/video-tutorials/umbraco-fundamentals/members/role-based-protection/TVPlayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:52:21.410

由于没有人回答我会说我发现将这些文件夹添加到我向公众开放的文件夹中似乎目前可以很好地解决问题，也许我将来需要添加其他东西但是它似乎正在工作：

```
<location path="umbraco"><system.web><authorization><allow users="?"/></authorization></system.web></location>
<location path="umbraco_client"><system.web><authorization><allow users="?"/></authorization></system.web></location>
<location path="DependencyHandler.axd"><system.web><authorization><allow users="?"/></authorization></system.web></location> 
```

我在根目录中添加了 umbraco 的文件夹和一个名为 DependencyHandler.axd 的虚拟文件。

不过，如果有人知道更好的解决方案，请不要犹豫，炫耀一下。

# silverlight - 'Microsoft.Expression.Platform.Silverlight.Metadata.FrameworkElementMetadata' 的类型初始化程序引发异常

> ID：14560792
> 
> 赞同：0
> 
> 时间：2013-01-28T11:14:11.930
> 
> 标签：silverlight, xaml

我得到**了 'Microsoft.Expression.Platform.Silverlight.Metadata.FrameworkElementMetadata' 的类型初始化程序引发了异常。**项目设计时的错误。

除此之外，这里还有两个不同项目的 App.xaml 文件快照。它们都使用相同的资源。其中之一说关键参数不能为空。并且任何设计器窗口都无法打开。我看到的只是我之前提到的错误。

注意：我使用的是 SL5 和 SL 5.0 交互 dll。我也意识到了[这一点](http://connect.microsoft.com/VisualStudio/feedback/details/669751/the-type-initializer-for-microsoft-expression-platform-silverlight-silverlightcommondesigntimeproperties-threw-an-exception)。

我正在寻找任何建议。

![该项目也在运行时运行](../Images/3b18f4a080421975220591dadd3e3c76.png)

![该项目在设计和运行时运行](../Images/0c720a47a2c2a3ac531744a3583ff358.png)

# bash - bash_aliases 和 awk 转义引号

> ID：14560796
> 
> 赞同：9
> 
> 时间：2013-01-28T11:14:20.353
> 
> 标签：bash, awk, alias, quote

我正在尝试为命令创建别名以查看内存使用情况，

```
ps -u user -o rss,command | grep -v peruser | awk '{sum+=$1} END {print sum/1024}' 
```

但是，天真的，

```
#.bash_aliases
alias totalmem='ps -u user -o rss,command | grep -v peruser | awk '{sum+=$1} END {print sum/1024}'' 
```

给出错误：

```
-bash: alias: END: not found
-bash: alias: {print: not found
-bash: alias: sum/1024}: not found 
```

我试过用双引号，

`totalmem ="ps ... |awk '{sum+=$1} END {print sum/1024}'"`， 或者

`totalmem ='ps ... |awk "{sum+=$1} END {print sum/1024}"'`, 逃避,

`totalmem ='ps ... |awk \'{sum+=$1} END {print sum/1024}\''`，或转义双引号......但我似乎无法让它工作。

`totalmem ='ps ... |awk \"{sum+=$1} END {print sum/1024}\"'`,

给出错误

```
awk: "{sum+=}
awk: ^ unterminated string 
```

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T11:28:37.297

您可以通过使用 shell 函数而不是别名来避免引用问题：

```
totalmem () {
  ps -u user -o rss,command | grep -v peruser | awk '{sum+=$1} END {print sum/1024}'
} 
```

这也更加灵活，因为您可以允许`totalmem`接受参数，例如传递给`-u`选项的用户名`ps`，如下例所示：

```
totalmem () {
  ps -u "$1" -o rss,command | grep -v peruser | awk '{sum+=$1} END {print sum/1024}'
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-28T11:20:14.163

您几乎拥有它，`$`它将以双引号扩展，因此需要额外的转义：

```
alias totalmem='ps -u user -o rss,command | grep -v peruser | awk "{sum+=\$1} END {print sum/1024}"' 
```

或者使用*iiSeymour*`awk`建议的内部模式：

 *```
alias totalmem='ps -u user -o rss,command | awk "!/peruser/ {sum+=\$1} END {print sum/1024}"' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-28T11:18:21.120

像这样：

```
alias totalmem='ps -u user -o rss,command | grep -v peruser | awk '\''{sum+=$1} END {print sum/1024}'\' 
```

说明：您可以为同一个参数使用不同类型的引号，例如`"I'm double-quoted"'and I am $HOME-less'-and-i-am-not-quoted`. 因此，如果您需要单引号内的单引号，您可以添加`'\''`which (1) 终止单引号，(2) 添加文字单引号`\'`， (3) 再次开始单引号。

（这种大小的别名最好作为函数来完成）。*

# entity-framework - 存储库模式如何定义 OrderBy

> ID：14560799
> 
> 赞同：4
> 
> 时间：2013-01-28T11:14:31.823
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

我有一个存储库类，它的使用非常通用，并且没有专门引用我的表。下面显示的是获取表中所有项目的功能之一。我想做的是扩展它以便可以订购结果。有没有办法传入谓词/表达式或类似的东西？

```
public IQueryable<T> All<T>() where T : class
{
    return _context.Set<T>().AsQueryable();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:20:39.567

只需`Queryable.OrderBy`在所有实体上使用方法：

```
fooRepository.All().OrderBy(foo => foo.Bar) 
```

如果要添加带有谓词的方法：

```
public IQueryable<T> AllOrderedBy<T,TKey>(Expression<Func<T,TKey>> predicate) 
    where T : class
{
    return _context.Set<T>().OrderBy(predicate);
} 
```

BTW`DbSet<T>`实现`IQueryable<T>`，所以你不需要调用`AsQueryable()`.

# android - 有时我在 Json 数组中得到不同的字符串 Key:Value

> ID：14560804
> 
> 赞同：3
> 
> 时间：2013-01-28T11:15:01.443
> 
> 标签：android, json, getjson

例如，有时我在 Json Array 中有不同的字符串标签

```
 {
 "html_attributions": [],
 "results": [
     {

         "name": "V & P FOX LOCKSMITHS",
         "opening_hours": {
             "open_now": true
         },
         "vicinity": "91A Saint Martin's Lane, London"
     },
     {
         "id": "c680cf44d85a15cdc727e0101f8531db70c0cf1c",            
           "name": "London United Kingdom",
         "vicinity": "41-43 Wardour Street, London" 

        // Here i do not get open hours tag, what should do when we 
         //not get json parsing in synchrozied manner 

     },
     {

         "name": "Timpson",
         "opening_hours": {
             "open_now": true
         },
         "vicinity": "40 Villiers Street, Charing Cross"
     }] } 
```

当我将某个特定位置用作英国时，解析结果取决于位置。我在解析中得到了三个属性。名称、城市、营业时间。

但是当将位置从英国更改为美国时，我只有两个属性名称，城市。没有开放时间，但我在所有位置的代码中使用了三个变量。但是当我们从 web 服务中只得到两个值时，我在解析时出错

我的 Java 代码是

```
 JSONObject json = jParser.getJSONFromUrl(url);  
 try {  
    // Getting Array of Contacts  
     towLogSmithJsonArray = json.getJSONArray(TAG_RESULTS_LOG_SMITH);  
    if(towLogSmithJsonArray!=null)  
    {  
            // looping through All Contacts  
        for(int i = 0; i < towLogSmithJsonArray.length(); i++)  
               {  
                    JSONObject d = towLogSmithJsonArray.getJSONObject(i);  
                    // Storing each json item in variable  
                    String openNOW="";  

                    String nameCarRental = d.getString(TAG_NAME_LOG_SMITH);             
             String cityAddress = d.getString(TAG_CITY_LOCATION_LOG);  

             // JSONObject phone = d.getJSONObject(TAG_OPENING_HOURS);  
             //    openNOW = phone.getString(TAG_OPEN_NOW);         

             Log.e("nameCarREntal", nameCarRental);
             Log.e("CityAddress",cityAddress);
             //Log.e("OPenNow",openNOW);

             // creating new HashMap
             HashMap<String, String> mapLockSmith = new HashMap<String, String>();              
             // adding each child node to HashMap key => value

             mapLockSmith.put(TAG_NAME_LOG_SMITH, nameCarRental);
             mapLockSmith.put(TAG_OPEN_NOW, openNOW);
             mapLockSmith.put(TAG_CITY_LOCATION_LOG, cityAddress);

             // adding HashList to ArrayList
             towLogSmithList.add(mapLockSmith);
             }
          }
         else
                {  
            Log.d("LOck Smith parsing NUll: ", "null");  
            Toast.makeText(LockSmith.this,"There is not data for particular location",Toast.LENGTH_LONG).show();  
        }    
        }catch (JSONException e) {    
    e.printStackTrace();  
 } 
```

当我对“openNOW”标签一无所知时，应该有什么变化

三种方式

> ```
>  -OpenNow: True
>  -OPenNow: False
>  -“opening_hours” Tag  is not available in Pasring array  code. 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:22:59.433

检查`"opening_hours"`and`"open_now"`是否出现在您的对象中：

```
String openNOW = "";
if(d.has("opening_hours"){
    JSONObject json2 = d.getJSONObject("opening_hours");
    if(json2.has("open_now"){
        openNOW=json2.getString("open_now");
    }
} 
```

# c# - 内存和代码平衡

> ID：14560808
> 
> 赞同：2
> 
> 时间：2013-01-28T11:15:13.263
> 
> 标签：c#, memory, balance

我知道这是一个老话题，但是在我的编程过程中我总是遇到这样一个问题：如何平衡内存使用和代码大小？

这是一个例子：

我想实现一个类（在 C# 中），并且我希望构造函数接受各种不同类型的参数。所以我需要一个构造函数来接受一个 IEnumerable 对象（这包括数组、列表等），但我还需要一个构造函数来接受可变长度参数（使用**params**）。这两个构造函数的内部构造例程完全相同，但是为了允许变长参数，我还是需要后一个。

```
Foo(IEnumerable<Bar> a) {/*construction*/}
Foo(params Bar[] a) {/*the same construction like above*/} 
```

但是，我可以使用**params**转换参数数组并调用另一个构造函数：

```
Foo(params Bar[] a) : this(new List<Bar>(a)) {/*here empty*/} 
```

虽然使用这种方式减少了代码大小，但它引入了一个临时列表对象，因此增加了内存使用量（虽然也是临时的）。

我知道这个例子会有很多讨论，关于哪个更好。但是我想知道，你们一般会如何处理这种平衡问题。很多情况下情况会比较复杂，有时还需要考虑执行时间的平衡。

有一个原则叫做“不要重复自己”，这是否也适用于像这里的示例这样的小段代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:20:31.857

您不需要从`params`数组创建列表。`Bar[]`数组是`IEnumerable<Bar>`，因此您可以在不创建任何新对象的情况下使用它。只需将其强制转换，以便它调用正确的构造函数，而不是它本身（或者只是为了清楚它的作用）：

```
Foo(params Bar[] a) : this((IEnumerable<Bar>)a) {} 
```

对于这不可能的任何情况，通常您可以添加一个私有构造函数，该构造函数可以完成其他构造函数的工作，因此仍然只有一个地方的代码。即使可以处理更多情况的代码变得有点复杂，这通常仍然比拥有两段几乎完成相同事情的代码更可取。

# android - Android/Facebook：在墙上发布消息

> ID：14560810
> 
> 赞同：3
> 
> 时间：2013-01-28T11:15:18.747
> 
> 标签：android, facebook, facebook-graph-api

我想通过 Android 应用程序在我自己的墙上发布消息。我有登录方法 loginToFacebook() 。单击按钮时，如果用户已登录，我希望发布一条消息。我对 facebook API 不是很熟悉，所以我查看了 facebook 开发人员文档和 Internet 上的其他站点以提出以下代码。然而，我的墙上没有任何消息。显然我错过了一些东西，但我不知道是什么，因为我的 LogCat 上没有错误。

```
public class ShareActivity extends Activity implements OnClickListener{
    Facebook facebook = new Facebook("477110419013909");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    String FILENAME = "AndroidSSO_data";
    SharedPreferences mPrefs;

  public void onClick(View arg0) {
        loginToFacebook();
        if (facebook.isSessionValid()) {
            Bundle bundle = new Bundle();
            bundle.putString("message","Hey Facebook!");
            try {
                String strRet = facebook.request("/me/feed",bundle,"POST");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Log.e("Facebook", "Error: " + e.getMessage());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                Log.e("Facebook", "Error: " + e.getMessage());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.e("Facebook", "Error: " + e.getMessage());
            }

}

public void loginToFacebook() {
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

                    @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());
                        editor.commit();
                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error

                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors

                    }

                });
    }
}
} 
```

我试着做

```
if (facebook.isSessionValid()) {
            Bundle bundle = new Bundle();
            bundle.putString("message","Hey Facebook!");

            facebook.dialog((Activity) this, "feed", bundle,
                    new DialogListener() {

                        public void onComplete(Bundle values) {
                        }

                        public void onFacebookError(FacebookError error) {}
                        public void onError(DialogError e) {}
                        public void onCancel() {}
            });
 } 
```

也没有工作

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T11:42:25.617

我已将此活动类用于发布图片：

```
public class PostStatusFBActivity extends Activity {
 private static String[] PERMISSIONS = 
            new String[] {"photo_upload","publish_stream"};

Bundle parems;
//String status;
private AsyncFacebookRunner mAsyncRunner;
public final static String FB_APP_ID = "xxxxxxxx"; 
private Facebook fb;
private Handler mHandler;
//private ProgressDialog mProgressDialog;
//private static String app_secret = "51a4b033e6cdbddf5761101d3eb09881";

/**
 * @see android.app.Activity#onCreate(Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mHandler = new Handler();

    Intent intent=getIntent();
    parems=intent.getBundleExtra("params");
    fb= new Facebook(PostStatusFBActivity.FB_APP_ID);

    SessionStore.restore(fb, this);

    if (fb.isSessionValid()) 
        post_status();
    else
        fb.authorize(this, PERMISSIONS,new AppLoginListener());

}

private class AppLoginListener implements DialogListener {

    public AppLoginListener() {

    }

    public void onCancel() {

        Toast.makeText(getApplicationContext(), "Please accept to login", Toast.LENGTH_LONG).show();
        finish();
    }

    public void onComplete(Bundle values) {
        /**
         * We request the user's info so we can cache it locally and
         * use it to render the new html snippets
         * when the user updates her status or comments on a post. 
         */

        mAsyncRunner=new AsyncFacebookRunner(fb);
        post_status();
    }

    public void onError(DialogError e) {
        Log.e("BTS", "dialog error: " , e);               
    }

    public void onFacebookError(FacebookError e) {
        Log.e("BTS ", "facebook error: " , e);
        Toast.makeText(getApplicationContext(), "Facebook error", Toast.LENGTH_LONG).show();
        finish();
    }
}

protected void onActivityResult(int requestCode, int resultCode,Intent data) {
    //Facebook fb = Session.wakeupForAuthCallback();
    fb.authorizeCallback(requestCode, resultCode, data);
}

public void post_status() {

    Log.e("BTS ____  ", " Post satus called ");
    mAsyncRunner.request("me/photos", parems,"POST",new mRequestListener(),null);
}

public class mRequestListener implements RequestListener{

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) {
        Log.d("BTS", "******************* FACEBOOK::onMalformedURLException *******************");
        e.printStackTrace();
        finish();
    }

    @Override
    public void onIOException(IOException e, Object state) {
        Log.d("BTS", "******************* FACEBOOK::onIOException *******************");
        e.printStackTrace();
        finish();
    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) {
        Log.d("BTS", "******************* FACEBOOK::onFileNotFoundException *******************");
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "Image not found", Toast.LENGTH_LONG).show();
        finish();
    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        Log.d("BTS", "******************* FACEBOOK::onFacebookError *******************");
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "Facebook error", Toast.LENGTH_LONG).show();
        finish();
    }

    String msg="";

    @Override
    public void onComplete(String response, Object state) {
        Log.d("BTS", "******************* FACEBOOK::onComplete *******************");

        // TODO Auto-generated method stub
        Log.d("Facebook-Example",
                "News feed: " + response.toString());
        JSONObject json;

        /*JSONObject json = Util.parseJson(response);
            final String pictureURL = json.getString("picture");
            if (TextUtils.isEmpty(pictureURL)) {
         * */
        try {
            json = Util.parseJson(response);
            Log.d("Facebook-Example",
                    "News feed: " + json.toString(2));

             final String post_id = json.getString("post_id");
             if (TextUtils.isEmpty(post_id)) {
                msg="Error in update status";
             }else{
                 msg="Status updated";
             }
             mHandler.post(new Runnable() {
                    @Override
                    public void run() {
                        Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_LONG).show();
                        //mProgressDialog.dismiss();
                        finish();
                    }
             });

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FacebookError e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

}

这是我从以前的 Activity 传递的 Bundle 参数 `byte[] data = null;
Bundle params = new Bundle();
params.putByteArray("photo", data); params.putString("caption", status);`

您可以放在 Bundle 上的其他值 `params.putString("message", "This string will appear as the status message"); params.putString("link", "This is the URL to go to"); params.putString("name", "This will appear beside the picture"); params.putString("caption", "This will appear under the title"); params.putString("description", "This will appear under the caption"); params.putString("picture", "This is the image to appear in the post");`

# django - RESTClient for Firefox - 将字典作为 POST 参数发送

> ID：14560811
> 
> 赞同：0
> 
> 时间：2013-01-28T11:15:20.227
> 
> 标签：django, rest-client

我正在尝试发布请求以使用 RESTClient 插件测试我的网站。在正文中，我传递了以下文本：

```
["abcd":"12", "ab":"23"] 
```

但在后端（django 服务器）中，我在解析时遇到错误：

```
MultiValueDictKeyError: 'Key \'input0\' not found in <QueryDict: {u\'{["abcd":"12", "ab":"23"]}\': [u\'\']}>' 
```

我也尝试使用 Content-type 作为 application/json 发送请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:51:52.790

您应该`request.body`在 Django 代码中使用来访问 POST 数据。

# java - 如何使用杰克逊反序列化数组？

> ID：14560816
> 
> 赞同：0
> 
> 时间：2013-01-28T11:15:40.680
> 
> 标签：java, android, arrays, json, jackson

我的 json 看起来像：

```
[
   {
      "schedule":[
         {
            "amount":19.98,
            "due_at":null,
            "identifier":"1549b45ff814e181dcbb983a02b35e9b3dd276fc-1",
            "paid_at":"2012-01-24",
            "status":"paid"
         }
      ]
   },
   {
      "schedule":[
         {
            "amount":24.68,
            "due_at":null,
            "identifier":"1549fdfdf814e181dcbb983a02b35e9b3dd276fc-1",
            "paid_at":"2012-08-14",
            "status":"paid"
         }
      ]
   }
] 
```

我的日程表模型：

```
public class Schedule {
    public double amount;
    public String due_at;
    public String identifier;
    public String paid_at;
    public String status;
} 
```

我的时间表模型：

```
public class Schedules extends HashMap<String, ArrayList<Schedule>>{
    private static final long serialVersionUID = 1L;
} 
```

现在我使用：

```
ListSchedules objectMapper.readValue = (jp, new TypeReference <Schedules> () {}); 
```

但它不起作用，谁能告诉我要走的路

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:24:11.270

修改如下

对于对象数组

```
Schedule[] objects = objectMapper.readValue(jp, Schedule[].class); 
```

对于对象列表

```
 List<Schedule> objects = 
objectMapper.readValue(jp, new TypeReference<List<Schedule>>(){}) 
```

*假设`jp`是杰森文本

# .net - VS2010 中的单元测试 - “运行”通过，“调试”失败

> ID：14560827
> 
> 赞同：0
> 
> 时间：2013-01-28T11:16:42.920
> 
> 标签：.net, unit-testing, debugging

我有一个测试用例，当我在 VS2010 中运行测试用例时，测试用例通过了。

但是，后来我发现测试用例不正确，CheckStatus() 方法中的断言应该失败，我在调试测试用例时得到断言失败。

那么测试用例在运行模式下通过的原因是什么？

```
 [TestMethod]
    public void TestMethod() {
        Invokable.Invoke(() => TestApplication.AnEvent+= CheckStatus);
        try {
            TestApplication.SearchCommand.Execute();
            Assert.AreEqual(State.Update, TestApplication.State);
        } finally {
            Invokable.Invoke(() => {
                TestApplication.AnEvent -= CheckStatus);
            });
        }
    }

    private void CheckStatus() {
        Assert.AreEqual(State.Initial, TestApplication.State);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:25:29.063

看起来像一个时间问题，可能是由于调试模式下的代码运行速度较慢引起的。

用于提供线索的调用，`Invoke`表明您正在进行跨线程通信。如果是这样，请在进一步测试之前查看如何在线程之间进行同步，因为在调用有机会被调用之前测试可能正在运行。

您可以使用`Thread.Sleep()`before`Execute()`方法自行测试。

# wordpress - 在菜单中显示每个子类别的最新帖子？

> ID：14560828
> 
> 赞同：1
> 
> 时间：2013-01-28T11:16:51.847
> 
> 标签：wordpress, menu

我正在尝试做一个由类别和子类别组成的菜单。对于每个子类别，我想显示该类别中的最新帖子。我试图用到处找到的代码创建一个walker，但现在它为每个项目显示相同的最新帖子，并且它位于父类别及其子类别之间。我如何获取好的类别，并仅显示子类别的最新帖子？这是我的代码：

```
 class Custom_Walker_Nav_Menu extends Walker_Nav_Menu {

 function start_el(&$output, $item, $depth, $args)
  {
       global $wp_query;
       $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

       $class_names = $value = '';

       $classes = empty( $item->classes ) ? array() : (array) $item->classes;

       $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
       $class_names = ' class="'. esc_attr( $class_names ) . '"';

       $output .= $indent . '<li id="menu-item-'. $item->ID . '" ' . $value . $class_names .'>';

       $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
       $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
       $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
       $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

       $prepend = '<strong>';
       $append = '</strong>';
       $description  =  '<div id="querySort"></div>';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
        $item_output .= $description.$args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        //ajout du nb de posts

        $submenus = $depth == 0 ? get_posts( array( 'post_type' => 'nav_menu_item', 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'meta_query' => array( array( 'key' => '_menu_item_menu_item_parent', 'value' => $item->ID ) ) ) ) : false;

        $item_output .= $submenus ? ' <span class="submenus-count">(' . count( $submenus ) . ')</span>' : '';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );

        //add last post for each subcategories

         $cat_name = esc_attr( $category->name); 
         $cat_name = apply_filters( 'list_cats', $cat_name, $category ); 

         $list_recent_cat_post = '<ul class="show-hide">';
         $args = array( 'numberposts' => 4, 'category_name' => $category->name );
         $myposts = get_posts( $args );
         foreach( $myposts as $mypost ) :  
            $list_recent_cat_post .= '<li><a href="' . get_permalink($mypost->ID) . '">' . $mypost->post_title . '</a></li>';
         endforeach; 
         $list_recent_cat_post .= '</ul>';

         $link = '<a href="' . get_category_link( $category->term_id ) . '" '; 
         if ( $use_desc_for_title == 0 || empty($category->description) ) 
             $link .= 'title="' . sprintf(__( 'View all posts filed under %s' ), $cat_name) . '"'; 
         else 
             $link .= 'title="' . esc_attr( strip_tags( apply_filters( 'category_description', $category->description, $category ) ) ) . '"'; 
         $link .= '>'; 
         $link .= $cat_name . '</a>'; 

         if ( (! empty($feed_image)) || (! empty($feed)) ) { 
             $link .= ' '; 

             if ( empty($feed_image) ) 
                 $link .= '('; 

             $link .= '<a href="' . get_category_feed_link($category->term_id, $feed_type) . '"'; 

             if ( empty($feed) ) 
                 $alt = ' alt="' . sprintf(__( 'Feed for all posts filed under %s' ), $cat_name ) . '"'; 
             else { 
                 $title = ' title="' . $feed . '"'; 
                 $alt = ' alt="' . $feed . '"'; 
                 $name = $feed; 
                 $link .= $title; 
             } 

             $link .= '>'; 

             if ( empty($feed_image) ) 
                 $link .= $name; 
             else 
                 $link .= "<img src='$feed_image'$alt$title" . ' />'; 
             $link .= '</a>'; 
             if ( empty($feed_image) ) 
                 $link .= ')'; 
         } 

         if ( isset($show_count) && $show_count ) 
             $link .= ' (' . intval($category->count) . ')'; 

         if ( isset($show_date) && $show_date ) { 
             $link .= ' ' . gmdate('Y-m-d', $category->last_update_timestamp); 
         } 

         $link .= $list_recent_cat_post;

         if ( isset($current_category) && $current_category ) 
             $_current_category = get_category( $current_category ); 

         if ( 'list' == $args['style'] ) { 
             $output .= "\t<li"; 
            $class = 'cat-item cat-item-'.$category->term_id; 
             if ( isset($current_category) && $current_category && ($category->term_id == $current_category) ) 
                 $class .=  ' current-cat'; 
             elseif ( isset($_current_category) && $_current_category && ($category->term_id == $_current_category->parent) ) 
                 $class .=  ' current-cat-parent'; 
             $output .=  ' class="'.$class.'"'; 
             $output .= ">$link\n"; 
         } else { 
             $output .= "\t$link\n"; 
         } 

        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:42:19.827

这是你的功能人：

```
class Custom_Walker_Nav_Menu extends Walker_Nav_Menu {

 function start_el(&$output, $item, $depth, $args)
  {
       global $wp_query;
       $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

       $class_names = $value = '';

       $classes = empty( $item->classes ) ? array() : (array) $item->classes;

       $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
       $class_names = ' class="'. esc_attr( $class_names ) . '"';

       $output .= $indent . '<li id="menu-item-'. $item->ID . '" ' . $value . $class_names .'>';

       $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
       $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
       $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
       $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

       $prepend = '<strong>';
       $append = '</strong>';
       $description  =  '<div id="querySort"></div>';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
        $item_output .= $description.$args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        //ajout du nb de posts

        $submenus = $depth == 0 ? get_posts( array( 'post_type' => 'nav_menu_item', 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'meta_query' => array( array( 'key' => '_menu_item_menu_item_parent', 'value' => $item->ID ) ) ) ) : false;

        $item_output .= $submenus ? ' <span class="submenus-count">(' . count( $submenus ) . ')</span>' : '';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );

        //add last post for each subcategories

        if( $item->type == 'taxonomy' && $item->post_parent != 0 ){

             $list_recent_cat_post = '<ul class="show-hide">';
             $args = array( 'numberposts' => 4, 'category__in' => $item->object_id );
             $myposts = get_posts( $args );
             foreach( $myposts as $mypost ) :  
                $list_recent_cat_post .= '<li><a href="' . get_permalink($mypost->ID) . '">' . $mypost->post_title . '</a></li>';
             endforeach; 
             $list_recent_cat_post .= '</ul>';
            }else{
                $list_recent_cat_post = ''; 
            }

         $link = '<a href="' . get_category_link( $category->term_id ) . '" '; 
         if ( $use_desc_for_title == 0 || empty($category->description) ) 
             $link .= 'title="' . sprintf(__( 'View all posts filed under %s' ), $cat_name) . '"'; 
         else 
             $link .= 'title="' . esc_attr( strip_tags( apply_filters( 'category_description', $category->description, $category ) ) ) . '"'; 
         $link .= '>'; 
         $link .= $cat_name . '</a>'; 

         if ( (! empty($feed_image)) || (! empty($feed)) ) { 
             $link .= ' '; 

             if ( empty($feed_image) ) 
                 $link .= '('; 

             $link .= '<a href="' . get_category_feed_link($category->term_id, $feed_type) . '"'; 

             if ( empty($feed) ) 
                 $alt = ' alt="' . sprintf(__( 'Feed for all posts filed under %s' ), $cat_name ) . '"'; 
             else { 
                 $title = ' title="' . $feed . '"'; 
                 $alt = ' alt="' . $feed . '"'; 
                 $name = $feed; 
                 $link .= $title; 
             } 

             $link .= '>'; 

             if ( empty($feed_image) ) 
                 $link .= $name; 
             else 
                 $link .= "<img src='$feed_image'$alt$title" . ' />'; 
             $link .= '</a>'; 
             if ( empty($feed_image) ) 
                 $link .= ')'; 
         } 

         if ( isset($show_count) && $show_count ) 
             $link .= ' (' . intval($category->count) . ')'; 

         if ( isset($show_date) && $show_date ) { 
             $link .= ' ' . gmdate('Y-m-d', $category->last_update_timestamp); 
         } 

         $link .= $list_recent_cat_post;

         if ( isset($current_category) && $current_category ) 
             $_current_category = get_category( $current_category ); 

         if ( 'list' == $args->style ) { 
             $output .= "\t<li"; 
            $class = 'cat-item cat-item-'.$category->term_id; 
             if ( isset($current_category) && $current_category && ($category->term_id == $current_category) ) 
                 $class .=  ' current-cat'; 
             elseif ( isset($_current_category) && $_current_category && ($category->term_id == $_current_category->parent) ) 
                 $class .=  ' current-cat-parent'; 
             $output .=  ' class="'.$class.'"'; 
             $output .= ">$link\n"; 
         } else { 
             $output .= "\t$link\n"; 
         } 

    }
} 
```

您的函数的问题是您希望设置变量 $category。这是一个错误。另一个是您没有检查菜单项类型。您只想将子菜单应用于分类类型的菜单项。并且要从该分类中获取帖子，您必须获取带有 category__in arg 的帖子，其中包含类别 ID，您可以从 $item->object_id 获得。

# java - 带有后缀的简单键值对的 Java 正则表达式

> ID：14560829
> 
> 赞同：1
> 
> 时间：2013-01-28T11:17:00.440
> 
> 标签：java, regex, key-value, keyvaluepair

考虑一组字符串，如下所示：

```
Memory size = 4,194,304 KB
Cache size=   32,768 K
Number of cores = 8
Note   =4,000,000 KB is less than 4 GB 
```

是否有一个通用且不太复杂的 Java 正则表达式完全匹配每个字符串并生成以下组？

```
"Memory size", "4,194,304", "KB"
"Cache size", "32,768", "K"
"Number of cores", "8"
"Note", "4,000,000 KB is less than 4 GB" 
```

这些组是`key`,`value`和 (可选) `suffix`。

其他要求：

*   值（即'='之后的部分）不一定是数字
*   ':' 两侧的任何空格都应一次性删除，无需回溯
*   “KB”和“K”字符串匹配不区分大小写
*   捕获的组应始终具有相同的索引（理想情况下，键/值/后缀为 3 个组，所有匹配项具有相同的组索引）

显然，一个简单的表达式

*   `([^=]+) *: *([^=]+)`

不完全涵盖上述规范。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:30:38.373

完全涵盖上述规范的正则表达式是：

```
^([^=]+?) *= *(.+?) *$ 
```

**编辑**

原来我错过了 K/KB 部分。这是修改后的版本：

```
^([^=]+?) *= *(.+?) *(KB?)? *$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:34:10.237

像这样的东西应该工作：

```
^(.*?)\s*=\s*(?:([\d,]+)\s*(K|KB)$|(.*)) 
```

`^`- 匹配行首

`(.*?)`通过匹配任何东西来捕获左项（`?`使其不贪婪；否则它会吃掉所有的空白）。

`\s*=\s*`匹配并丢弃等号及其周围的任何空间。

`(?:([\d,]+)\s*(K|KB)$|(.*))`这个长组匹配一件事或另一件事。`(?:`使其成为非捕获组，因为您不想捕获整个事物。

`([\d,]+)\s*(K|KB)$` 如果有一个数字后跟 K 或 KB 和字符串的结尾，则在两组中匹配。

`(.*)`否则，匹配一组中剩余的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:31:12.677

试试看，告诉我它是否有效：

```
(.*) *= *(.*) (.*) 
```

# java - Eclipse 导入建议消失了

> ID：14560832
> 
> 赞同：4
> 
> 时间：2013-01-28T11:17:03.873
> 
> 标签：java, eclipse

几天前我已经升级到 Eclipse 4.2，并且正在开发一个由 git 使用 eGit 插件跟踪的项目。

突然间，我想它一定是在一个推送提交之后，自动导入提示完全忘记了我项目的类。它所能提供的只是java标准库类。

我尝试重新启动 Eclipse，以及清理项目、验证项目、执行拉取操作并查看 .classpath 文件（这对我来说并不奇怪）。

如果你看截图；在包资源管理器中，您可以看到一个名为“SceneNode”的类列出。在右侧有一个我正在处理的文件，它在同一个项目中，但缺少导入选项，它应该在那里。

手动编写导入语句可以解决问题，但由于我很懒，我想要我的导入选项。有没有其他人有这个问题？

![我的问题](../Images/e5e0ec7476357a28c2d2f4567a4d6693.png)

编辑：这是我的 .classpath 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="src"/>
<classpathentry kind="lib" path="jars/jinput.jar"/>
<classpathentry kind="lib" path="jars/lwjgl.jar">
    <attributes>
        <attribute name="org.eclipse.jdt.launching.CLASSPATH_ATTR_LIBRARY_PATH_ENTRY" value="ORRE-v2/natives"/>
    </attributes>
</classpathentry>
<classpathentry kind="lib" path="jars/lzma.jar"/>
<classpathentry kind="lib" path="jars/slick-util.jar"/>
<classpathentry kind="lib" path="jars/slick.jar"/>
<classpathentry kind="lib" path="jars/xom-1.2.8.jar"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
<classpathentry kind="con" path="org.eclipse.jdt.junit.JUNIT_CONTAINER/4"/>
<classpathentry kind="lib" path="jars/lwjgl_util.jar"/>
<classpathentry kind="output" path="bin"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:35:45.467

试试这个：

转到*首选项 » Java » 编辑器 » 内容辅助 » 高级*。

确保勾选/选中*其他 Java 提案。*

如果这不起作用，只需关闭项目并重新打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-20T04:48:33.497

在 Eclipse 中更新@vicky 的 2020 年答案，以激活为 Alexa 技能自动创建导入，确保在 Windows -> Preferences -> Java -> Editor -> Content Assist -> Advanced 上，所有 Java 选项下默认提案种类被选中。

[![高级内容辅助](../Images/22d84a1c8a6eedc709e7e629ce7abdd4.png)](https://i.stack.imgur.com/cRiGq.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T12:30:20.003

> 我有很多搜索，但我认为你应该尝试 eclipse 快捷方式来修复所有导入，如果它有效的话。快捷方式是“CTRL+SHIFT+O” – vicky

我找不到*Other Java Proposals*，但是尝试上述方法对我有用。

# asp.net - 如何在 asp.net 网站中使用 wowza 媒体服务器？

> ID：14560839
> 
> 赞同：3
> 
> 时间：2013-01-28T11:17:22.250
> 
> 标签：asp.net, rtmp, http-live-streaming, live-streaming, wowza

我在 asp.net 中有一个网站，我希望用户连接他们的网络摄像头并允许他们播放他们的音频/视频。在其他页面上，我想展示他们的直播。

我希望能够将视频流从我的应用程序发送到 wowza 媒体服务器。是否可以？如果是，那么我如何使用我的 .net 应用程序与流数据进行交互，例如；如果我想存储文本聊天或从广播中截取屏幕截图或想将我的应用程序数据合并到聊天中，我应该从我的 .net 网站调用哪些 API/方法？

我看过[http://www.wowza.com/media-server/developers#wowza-ide](http://www.wowza.com/media-server/developers#wowza-ide)并发现它是为 java 开发人员准备的，但其他像 .net 的呢？我们可以在 .net 应用程序中使用 wowza 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:26:23.613

虽然不是您的确切要求，但 Wowza 聊天教程让您朝着正确的方向前进：[http](http://www.wowza.com/forums/content.php?42) ://www.wowza.com/forums/content.php?42 。

wowza 链接描述了 /examples/VideoChat/FlashRTMPPlayer/player.html 中的示例聊天客户端。为了开发您自己的聊天客户端，您需要创建自己的 Flash 客户端，通常使用 ActionScript。如果您不是 Flash 开发人员，您可以将[OpenTok](http://www.tokbox.com/opentok/api)视为 Wowza 的替代品。他们有一个 javascript API，不需要 Flash 开发技能。

# ios - 如何在 TPL 任务运行时显示 iOS 网络指示器？

> ID：14560842
> 
> 赞同：7
> 
> 时间：2013-01-28T11:17:35.370
> 
> 标签：ios, xamarin.ios, task-parallel-library, xamarin

在与服务器 API 交谈时，我大量使用任务并行库。
我想在这些任务中的任何一个当前正在运行时显示 iOS 网络指示器。

我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T11:17:35.370

我创建了这个类来包装`NetworkActivityIndicatorVisible`成一对进入/离开方法。

```
public static class NetworkIndicator
{
    static int _counter;

    public static void EnterActivity ()
    {
        Interlocked.Increment (ref _counter);
        RefreshIndicator ();
    }

    public static void LeaveActivity ()
    {
        Interlocked.Decrement (ref _counter);
        RefreshIndicator ();
    }

    public static void AttachToTask (Task task)
    {
        if (task.IsCanceled || task.IsCanceled || task.IsFaulted)
            return;

        EnterActivity ();
        task.ContinueWith (t => {
            LeaveActivity ();
        });
    }

    static void RefreshIndicator ()
    {
        UIApplication.SharedApplication.NetworkActivityIndicatorVisible =
            (_counter > 0);
    }
} 
```

然后为了方便我添加了两个扩展方法：

```
public static class TaskExtensions
{
    public static Task WithNetworkIndicator (this Task task)
    {
        NetworkIndicator.AttachToTask (task);
        return task;
    }

    public static Task<TResult> WithNetworkIndicator<TResult> (this Task<TResult> task)
    {
        NetworkIndicator.AttachToTask (task);
        return task;
    }
} 
```

我如何包装它：

```
var task = Api.QueryNotifications (AuthManager.CurrentProfile.Id, NotificationType.All, until, cached)
    .WithNetworkIndicator (); 
```

然后我像往常一样使用任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:02:10.603

在 NetworkActivityIndi​​catorVisible 中尝试此代码：

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; 
```

# iphone - 插入命令错误 - Appcelerator Titanium

> ID：14560848
> 
> 赞同：0
> 
> 时间：2013-01-28T11:17:49.033
> 
> 标签：iphone, ios, sqlite, appcelerator, titanium-mobile

我是 Appcelerator Titanium 的新手。我已经成功创建了数据库。当我尝试插入记录时，它显示错误，

```
[ERROR] Script Error = Error occurred calling next on a PLSqliteResultSet. 
SQLite error: 'constraint failed' for 'INSERT INTO test (t_Id, t_Name)
VALUES (1,"sam")')' at app.js (line 24). 
```

我的代码是：

```
Ti.Database.install('myDB.sqlite','myDB'); 
var db = Ti.Database.open('myDB'); 
db.execute('INSERT INTO test (t_Id, t_Name) VALUES (1,"sam")'); 
```

请帮我！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:24:26.947

像这样做。

```
db.execute('INSERT INTO credentials(username,password,token) VALUES(?,?,?)',username,password,token); 
```

这是添加动态值。用户名密码和令牌是这里的变量。

# ajax - 在页面渲染后触发服务器请求（ajax？）以在 apache wickets 中重新渲染页面的某些部分

> ID：14560855
> 
> 赞同：0
> 
> 时间：2013-01-28T11:18:03.350
> 
> 标签：ajax, wicket, wicket-1.5

在我的页面上有一个显示汽车经销商列表的面板。面板显示经销商列表，其中包含每个经销商的信息，如下所述。

*   对于每个经销商，我需要显示：姓名、地址、电话、营业时间。数据是json。
*   *姓名、地址、电话*：它们是简单的文本标签。
*   *hours*：每个经销商都有一个“查看时间”链接。单击它时，如果小时数据尚不存在，则文本标签会向下滑动显示“正在加载 gif”的链接，否则会显示小时数据。再次单击链接将隐藏小时数据。

呈现页面时，这是我需要的行为：

*   在页面渲染中，我显示*姓名、地址、电话*标签和*营业时间*链接。截至目前，我**没有**json 中的时间信息。
*   页面呈现后，我想向服务器发出请求（Ajax ？），获取带有小时信息的更新 json 并重新呈现“查看时间”，以便在单击时显示小时。*这是我不知道该怎么做。*

为什么我最初不发送带有小时信息的 json？这是因为收集成本很高，而且很少会使用“查看时间”链接。因此，预先收集所有这些数据会使页面呈现速度变慢。**我希望页面加载的事件/行为触发获取小时数据的请求并仅**重新呈现在单击“查看时间”链接时向下滑动的小时文本标签。

我看了看，`AjaxSelfUpdatingTimerBehavior`但它的触发器是持续时间，而不是页面加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:21:42.583

您可以`AjaxLazyLoadPanel`为此使用 an （如 drobson 建议的那样）。这很好用，但在您的场景中它可能有 1 个缺点。要更新的每一个小时都将是一个同步的 AJAX 调用，因此每个小时都需要单独更新。这可能意味着更多的流量和不理想的用户体验。

另一种选择可能是添加一个`AbstractDefaultAjaxBehavior`到您的页面，这将更新小时（并将整个面板添加到目标）。您可以在文档加载后调用此行为生成的方法。

```
 this.add(new AbstractDefaultAjaxBehavior() {

        @Override
        protected void respond(AjaxRequestTarget target) {
            //calculate hours + add list or whatever to the target
        }

        @Override
        protected CharSequence getCallbackScript() {
            StringBuilder result = new StringBuilder();

            result.append("function resetHours() {\n");
            result.append("wicketAjaxPost('" + this.getCallbackUrl() + "', null, function(){}, function(){});" + "\n");
            result.append("}\n");
            return result;
        }
    }); 
```

和电话：

```
public void renderHead(IHeaderResponse response) {
    response.renderOnLoadJavaScript("resetHours()");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:30:39.200

根据您的说法，由于`view hours`链接将“很少”使用，因此最好按需获取这些数据，而不是在页面加载期间/之后将它们全部拉出。

反过来，这将减少在页面中收集大量数据的开销，并使您无需将每个数据与每个记录关联、解析它们并将它们放入 HTML 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:01:36.977

尝试添加“查看时间”链接和代码以获取面板上的数据，然后使用 AjaxLazyLoadPanel 延迟加载该面板[http://www.mkyong.com/wicket/how-do-use-ajaxlazyloadpanel-in-wicket/](http://www.mkyong.com/wicket/how-do-use-ajaxlazyloadpanel-in-wicket/) . 您可以在应用程序收集数据时为每个链接显示加载 gif。

# php - 如何检测浏览器语言并检查语言是西班牙语还是英语？

> ID：14560856
> 
> 赞同：0
> 
> 时间：2013-01-28T11:18:04.927
> 
> 标签：php

在我的网站上，我有两种选择，一种是英语，一种是西班牙语。

为了`english=en-US,en;q=0.5 and for spanish=es-es, es; q = 0,5.`

我用了`$lang = $_SERVER['HTTP_ACCEPT_LANGUAGE'];`

现在我想检查情况并更改我网站的徽标。但每次它都给我带来不好的结果。我该怎么做。任何帮助都会被应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:21:18.613

你可以这样做：

```
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
switch ($lang){
    case "es":   //spanish
        include("logo_es.php");
        break;
    case "en":  //english and any other language
    default:
        //for english and default
        include("logo.php");
        break;
} 
```

# gcc - 加载共享库时出错：libsandbox.so

> ID：14560857
> 
> 赞同：3
> 
> 时间：2013-01-28T11:18:06.930
> 
> 标签：gcc, shared-libraries, sandbox, autoconf

当我在编译沙盒 c 程序后尝试运行 .out 文件时，出现以下错误：

```
 ./sandbox: error while loading shared libraries: libsandbox.so: cannot open shared object file: No such file or directory 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T00:20:26.600

“**共享库丢失**”问题并非`libsandbox`. 许多使用 GNU 自动工具进行构建配置的自编译库都会发生这种情况。

问题是 GNU autotools 会在默认情况下准备要使用的库`/usr/local/lib`（并且有充分的理由让此设置保持默认状态，例如[FHS](http://www.pathname.com/fhs/ "FHS")一致性）。但是，在某些 Linux 发行版中——比如**Ubuntu**和**ArchLinux——**运行时链接器（aka. `ld.so`）不会*搜索*共享`/usr/local/lib`库，除非通过`ldconfig`.

虽然@anton-kovalenko 的答案中的所有其他解决方案都是可行的，但如果您只配置`libsandbox`选项`--prefix=/usr`和`--libdir=/usr/lib`（当然，如果您具有对 的写访问权限`/usr/lib`）可能会更方便。或者您可以添加一个新`ldconfig`条目`/etc/ld.so.conf.d`以启用`/usr/local/lib`系统级别的库搜索。

免责声明：我是`libsandbox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:58:03.800

您执行以下操作：

1.  首先你找到你的副本在哪里`libsandbox.so`。如果您成功链接到它，它可能在某个地方。
2.  然后你试试看`env LD_LIBRARY_PATH=/directory/of/your/libsandbox/copy/ ./sandbox`它是否有效。
3.  然后您决定如何将您的程序与库一起部署，以便它在目标机器上运行。有很多可能性：`gcc -Wl,-rpath='$ORIGIN'`链接可以`libsandbox.so`从可执行文件的目录加载。负责处理的包装脚本`LD_LIBRARY_PATH`是另一种解决方案。放入`libsandbox.so`动态链接器可以找到它的位置是另一个。

# c# - 使用 System.DirectoryServices.AccountManagement 我收到奇怪的错误

> ID：14560858
> 
> 赞同：2
> 
> 时间：2013-01-28T11:18:07.133
> 
> 标签：c#, active-directory, ldap

当我运行下面的代码来检索所有组、子组和相关用户时，我在检索一些记录后得到一个奇怪的错误：我期望检索 90000 个组/子组和 250000 个用户

错误：

> System.Runtime.InteropServices.COMException 被捕获 Message=服务器无法运行

```
 public static List<Group>getUsers()
{

    // create the "context" in which to operate - your domain here, 
    // as the old-style NetBIOS domain, and the container where to operate in
    PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "lin.proximus.com");

    // define a "prototype" - an example of what you're searching for
    // Here: just a simple GroupPrincipal - you want all groups
    GroupPrincipal prototype = new GroupPrincipal(ctx);

    // define a PrincipalSearcher to find those principals that match your prototype
    PrincipalSearcher searcher = new PrincipalSearcher(prototype);

    // define a list of strings to hold the group names        
    List<Group> groupNames = new List<Group>();
    int counter = 0;
    // iterate over the result of the .FindAll() call
    foreach (var gp in searcher.FindAll())
    {

        // cast result to GroupPrincipal
        GroupPrincipal groupPrincipal = gp as GroupPrincipal;

        // if everything - grab the group's name and put it into the list
        if (groupPrincipal == null) continue;

        Group group = new Group();
        group.Name = groupPrincipal.Name;
        group.Description = groupPrincipal.Description;
        AddSubGroups(groupPrincipal, ref group);
        AddMemebers(groupPrincipal, ref group);
        counter++;
        groupNames.Add(group);
        Console.WriteLine(counter);
        if (counter > 10000)
            return groupNames;
    }
    return groupNames;
}

private static void AddSubGroups(GroupPrincipal gp,ref Group gr)
{
    gr.SubCounts = 0;
    if (gp.GetGroups().Count() <= 0) return;

    gr.SubCounts = gp.GetGroups().Count();
    gr.SubGroups = new List<string>();
    foreach (var principal in gp.GetGroups())
    {
        gr.SubGroups.Add(principal.Name);
    }
}

private static void AddMemebers(GroupPrincipal gp, ref Group gr)
{
    if (gp.GetMembers().Count() <= 0) return;

    gr.Users = new List<string>();

    foreach (Principal principal in gp.GetMembers())
    {
        gr.Users.Add(principal.Name);
    }
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:00:04.003

看起来您可以设置[DirectorySearcher.PageSize](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.pagesize.aspx)并进行分页结果集。这通常可以让您超越服务器端的限制。

我仍然会尝试一个已知的 LDAP 工具（我喜欢 Apache Studio），看看它是否有效。（目录.apache.org/studio）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T23:17:48.143

这个错误可能意味着很多事情，但我强烈建议 [Wireshark'ing][1] 你的机器和 ldap 服务器之间的 TCP 流量，以便更好地了解实际导致它的原因。

如果您的连接在搜索器运行时超时，您将在引发该错误之前从您的机器上看到 [RST, ACK]。这也可能反过来，目标 ldap 服务器在搜索器完成之前强行关闭您的连接。

另外，我建议使用较低级别的 DirectoryServices 命名空间中可用的对象和类，而不是 AccountManagement 命名空间必须提供的东西。

我真的为这种事情挖掘了 LdapConnection 和 DirectorySearcher 对象，它们都具有很大的灵活性：

```
LdapConnection ldapConnection = new LdapConnection("lin.proximus.com:389");
ldapConnection.Timeout = 100000; 
```

将 PageSize 设置为 jeemster 推荐的，并且 PageTimeLimit ：

```
var directoryEntry = new DirectoryEntry(("LDAP://" + ldapUrl), usrname, password);

var directorySearcher = new DirectorySearcher(directoryEntry)
{
    SearchScope = SearchScope.Subtree,
    ServerPageTimeLimit = TimeSpan.FromSeconds(100000),
    PageSize = 500000       
}; 
```

让我知道你在这里发现了什么。

# c# - 日期抛出异常

> ID：14560861
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:18:17.537
> 
> 标签：c#, datetime

我有一个包含文本的文本框

```
18/1/2013 
```

我想将此文本作为类型日期时间。我试过使用特定的代码

```
Convert.ToDateTime(DateTime.ParseExact(TxtStartDate.Text.Trim(), "dd/MM/yyyy", null)); 
```

但它抛出一个异常

```
String was not recognized as a valid DateTime. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:20:46.487

利用

```
var date = DateTime.ParseExact(TxtStartDate.Text.Trim(), "d/M/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

# python - Python - 加入换行符

> ID：14560863
> 
> 赞同：107
> 
> 时间：2013-01-28T11:18:20.050
> 
> 标签：python, string

在 Python 控制台中，当我键入：

```
>>> "\n".join(['I', 'would', 'expect', 'multiple', 'lines']) 
```

给出：

```
'I\nwould\nexpect\nmultiple\nlines' 
```

虽然我希望看到这样的输出：

```
I
would
expect
multiple
lines 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-28T11:20:06.307

控制台正在打印表示，而不是字符串本身。

如果你加上前缀`print`，你会得到你所期望的。

有关字符串和字符串表示形式之间差异的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)超级简化，表示是您在源代码中键入以获取该字符串的内容。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-28T11:19:24.507

你忘`print`了结果。你得到的是`P`in[`RE(P)L`](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)而不是实际的打印结果。

在 Py2.x 你应该这样

```
>>> print "\n".join(['I', 'would', 'expect', 'multiple', 'lines'])
I
would
expect
multiple
lines 
```

在 Py3.X 中， print 是一个函数，所以你应该这样做

```
print("\n".join(['I', 'would', 'expect', 'multiple', 'lines'])) 
```

现在这是简短的答案。你的 Python 解释器，它实际上是一个 REPL，总是显示字符串的表示，而不是实际显示的输出。陈述是你会得到的`repr`陈述

```
>>> print repr("\n".join(['I', 'would', 'expect', 'multiple', 'lines']))
'I\nwould\nexpect\nmultiple\nlines' 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-28T11:52:53.177

你需要`print`得到那个输出。
你应该做

```
>>> x = "\n".join(['I', 'would', 'expect', 'multiple', 'lines'])
>>> x                   # this is the value, returned by the join() function
'I\nwould\nexpect\nmultiple\nlines'
>>> print x    # this prints your string (the type of output you want)
I
would
expect
multiple
lines 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-28T11:19:23.693

你必须打印它：

```
In [22]: "\n".join(['I', 'would', 'expect', 'multiple', 'lines'])
Out[22]: 'I\nwould\nexpect\nmultiple\nlines'

In [23]: print "\n".join(['I', 'would', 'expect', 'multiple', 'lines'])
I
would
expect
multiple
lines 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-28T11:20:25.557

当你用这个打印它时，`print 'I\nwould\nexpect\nmultiple\nlines'`你会得到：

```
I
would
expect
multiple
lines 
```

是专门用于标记END-OF-TEXT的`\n`换行符。它表示行或文本的结束。许多语言（如 C、C++ 等）都具有此特性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-19T12:52:56.433

repr() 函数返回给定对象的可打印表示，对于 Python 中的 evalStr() 或 exec 至关重要；例如，您想摆脱 Python 的禅宗：

```
eng.execString('from this import *');
println('import this:'+CRLF+
  stringReplace(eng.EvalStr('repr("".join([d.get(c,c) for c in s]))'),'\n',CRLF,[rfReplaceAll])); 
```

# spring - JPQL 中的多个 LEFT JOIN FETCH

> ID：14560865
> 
> 赞同：2
> 
> 时间：2013-01-28T11:18:30.300
> 
> 标签：spring, jpql, spring-data-jpa

我试图在一个查询中从 3 个表中获取数据。我有“工作经验”、“技能”和“描述”。这个想法是，一个工作经验有多个与之相关的技能和多个描述。我正在尝试从一个特定的雇主那里查询所有工作经验（工作经验表有一个“EmployerId”列）。

我从获取描述开始，这很有效：

```
select distinct w from Workexperience w 
  left join fetch w.skills
    where w.employer=(select e from Employer e where e.username = :username) 
```

这给了我所有的工作经验和他们的技能，到目前为止一切都很好。当我尝试添加描述时，它变坏了：

```
select distinct w from Workexperience as w
  left join fetch w.skills
  left join fetch w.descriptions
    where w.employer=(select e from Employer e where e.username = :username) 
```

这给了我经典的延迟初始化异常。

所以我的问题是：你可以在一个查询中使用多个'left join fetch'语句吗？如果是这样，你如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:15:55.900

[不](https://stackoverflow.com/questions/8790852/jpa-lazy-fetch-entities-over-multiple-levels-with-criteria-api)，你不能（根据规范）。

请注意，尽管 Hibernate 支持它。

# windows - Windows 命令判断 .dll 文件是 32 位还是 64 位？

> ID：14560866
> 
> 赞同：31
> 
> 时间：2013-01-28T11:18:30.283
> 
> 标签：windows, dll, cmd, 32bit-64bit

我在 windows cmd 中寻找一个命令来告诉我某个 dll 文件是 32 位还是 64 位

Windows中有这样的东西吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-28T11:27:46.030

[`DUMPBIN`](http://support.microsoft.com/kb/177429)`/HEADERS`包含在 Visual C++ 中，并且可以通过开关提供此信息。

32 位图像的示例输出：

```
FILE HEADER VALUES
     14C machine (i386)
       6 number of sections
306F7A22 time date stamp Sun Oct 01 22:35:30 1995
       0 file pointer to symbol table
     1D1 number of symbols
      E0 size of optional header
     302 characteristics
            Executable
            32 bit word machine
            Debug information stripped 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T12:28:41.733

您可以使用 dbghelp 库来获取图像标头。然后，您可以从`FileHeader`.

这是一些示例代码。请原谅相当蹩脚的错误处理。我只是快速地把它敲起来来说明，我什至对 C++ 一点也不流利。

```
#include <Windows.h>
#include <Dbghelp.h>

#include <string>
#include <iostream>

using namespace std;

bool GetImageFileHeaders(wstring fileName, IMAGE_NT_HEADERS &headers)
{
    HANDLE fileHandle = CreateFile(
        fileName.c_str(),
        GENERIC_READ,
        FILE_SHARE_READ,
        nullptr,
        OPEN_EXISTING,
        FILE_ATTRIBUTE_NORMAL,
        0
    );
    if (fileHandle == INVALID_HANDLE_VALUE)
        return false;

    HANDLE imageHandle = CreateFileMapping(
        fileHandle,
        nullptr,
        PAGE_READONLY,
        0,
        0,
        nullptr
    );
    if (imageHandle == 0)
    {
        CloseHandle(fileHandle);
        return false;
    }

    void *imagePtr = MapViewOfFile(
        imageHandle,
        FILE_MAP_READ,
        0, 
        0,
        0
    );
    if (imagePtr == nullptr)
    {
        CloseHandle(imageHandle);
        CloseHandle(fileHandle);
        return false;
    }

    PIMAGE_NT_HEADERS headersPtr = ImageNtHeader(imagePtr);
    if (headersPtr == nullptr)
    {
        UnmapViewOfFile(imagePtr);
        CloseHandle(imageHandle);
        CloseHandle(fileHandle);
        return false;
    }

    headers = *headersPtr;

    UnmapViewOfFile(imagePtr);
    CloseHandle(imageHandle);
    CloseHandle(fileHandle);

    return true;
}

int main(int argc, char* argv[])
{
    IMAGE_NT_HEADERS headers;
    if (GetImageFileHeaders(L"C:\\windows\\system32\\user32.dll", headers))
    {
        if (headers.FileHeader.Machine == IMAGE_FILE_MACHINE_I386)
            cout << "x86";
        else if (headers.FileHeader.Machine == IMAGE_FILE_MACHINE_IA64)
            cout << "IA64";
        else if (headers.FileHeader.Machine == IMAGE_FILE_MACHINE_AMD64)
            cout << "x64";
        else
            cout << "Machine not recognised";
    }
    return 0;
} 
```

要链接它，您需要添加`dbghelp.lib`到项目的其他依赖项。要了解有关这背后的详细信息的更多信息，请参阅 MSDN 文档以了解所使用的各种 API 调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-02T15:14:16.703

如果您已安装 7zip ：

```
"C:\Program Files\7-Zip\7z.exe" l "my-program.exe" | findstr CPU 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-15T20:20:34.833

您正在寻找的功能在 UNIX 系统上本机可用；使用“文件”命令。如果您安装了 Cygwin 或其他 UNIX 模拟器之一，则可以在 Windows 系统上使用“文件”。

# php - 使用带有 3 个连续可靠下拉列表的 Ajax

> ID：14560869
> 
> 赞同：0
> 
> 时间：2013-01-28T11:18:40.000
> 
> 标签：php, javascript, mysql, ajax, drop-down-menu

和平与你同在，我是使用 Ajax 的新手，问题是，我有 3 个连接到数据库的下拉列表，第一个是“姓名”，第二个是“年龄”，第三个是“国家”！因此，我已连接到数据库，并在第一个列表“名称”中从中检索数据，然后使用 Ajax，在选择第一个列表的任何选项并将它们放入名为“年龄”的第二个列表后，我已成功检索到匹配数据，问题是，当我使用与第二个名为“age”的列表完全相同的方式将匹配数据检索到名为“country”的第三个列表中时，它不起作用！所以请帮助我，因为我正在使用这个例子来学习 Ajax，然后应用到一个更大的实际项目中！这是代码：-首先，home.php页面：-

```
<?php
include "config.php";
?>
<html> 
<head> 
<script type="text/javascript">
function agematch() {
 if (window.XMLHttpRequest) {
  xmlhttp = new XMLHttpRequest();
} 
 else {
 xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
 }

xmlhttp.onreadystatechange = function() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {

  document.getElementById('age').innerHTML = xmlhttp.responseText;
  }

} 
xmlhttp.open('GET', 'connection.inc.php?name='+document.ajax.name.value, true );
xmlhttp.send();

}

function countrymatch() {
 if (window.XMLHttpRequest) {
  xmlhttp = new XMLHttpRequest();
} 
 else {
 xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
 }

xmlhttp.onreadystatechange = function() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {

  document.getElementById('country').innerHTML = xmlhttp.responseText;
  }

} 
xmlhttp.open('GET', 'country.inc.php?age='+document.ajax.age.value, true );
xmlhttp.send();

}

</script>
</head>
<body> 
<form id="ajax" name="ajax" > 
Choose your name : <select name="name" id="name" select="selected"  onchange="agematch();"> <option>  </option> 
 <?php

   $query = "SELECT DISTINCT name FROM info";
   $result = mysql_query($query);
   while($row = mysql_fetch_array($result)){
   echo"<option  value ='".$row[0]."'> '".@$row[0]."'</option>";
                                }   
 ?>
</select>
Age : <select id="age" name="age" onchange="countrymatch();">  </select>
country : <select id="country" name="country"> <option> </option> </select>

</form>
</body>
</html> 
```

现在，第一次 Ajax 调用的页面：-

```
<?php
include "config.php";
echo " <option>  </option> " ;
if(isset( $_GET['name']) ) {
  @$name = $_GET['name'];
  }

  $query = "SELECT age FROM info WHERE name = '".@$name."' "; 
  $result = mysql_query($query);
    while ($query_row = mysql_fetch_array($result)) {

      echo " <option  value ='".$query_row[0]."'> $query_row[0]</option> ";
      }

 ?> 
```

现在，第三个下拉菜单的第二个 Ajax 调用页面：-

```
<?php
include "config.php"; 

  if (isset( $_GET['age']) ) {
     @$age=$_GET['age'];
   }     

  $query = "SELECT country FROM info WHERE name='".@$name."' AND age='".@$age."'  ";
  $result= mysql_query($query);
  while  ($query_row = mysql_fetch_array($result)) {

   echo " <option value = '".$query_row[0]."'> $query_row[0] </option> ";

  }

 ?> 
```

如您所见，这是代码，当然我是通过一个名为“config.php”的页面连接到数据库的，所以我希望您帮我解决这个问题，并将数据库中的数据检索到第三个drop下拉列表“国家”。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:23:33.317

您没有通过`name`第二个电话。

代替

`xmlhttp.open('GET', 'country.inc.php?age='+document.ajax.age.value, true );`

和

`xmlhttp.open('GET', 'country.inc.php?age='+document.ajax.age.value+'&name='+document.ajax.name.value, true );`

希望有帮助。

# java - 无法找到 url 状态/无法 ping 一个 url（启用 SSL 的主机）并处理无效的 SSL 证书

> ID：14560872
> 
> 赞同：0
> 
> 时间：2013-01-28T11:18:58.427
> 
> 标签：java, ssl-certificate

如果我执行下面的代码，我会收到一个异常说“**无法找到请求目标的有效证书路径**”

```
String protocol = "https://10.0.100.80/MyAPP/index.html";
java.net.URL obj = new java.net.URL(protocol);
HttpURLConnection httpReq = (HttpURLConnection) obj.openConnection();
httpReq.setDoOutput(true);
httpReq.setInstanceFollowRedirects(true);
httpReq.setRequestMethod("GET");
Date date = new Date();
System.out.println("iStatus: " + httpReq.getResponseMessage());
System.out.println("iCode: " + httpReq.getResponseCode()); 
```

例外：

```
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: 
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:323)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:217)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
    ... 14 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:318)
    ... 20 more 
```

帮我ping一个启用ssl的url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:34:29.293

有这个代码，看看

```
HttpsURLConnection httpReq = (HttpsURLConnection) obj.openConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:26:02.767

使用以下实现处理这种情况。

```
public  Map<String,Object> pingSSLEnabledURL(String urlString) throws Exception {
        Map<String,Object> returnMap = null;
        // configure the SSLContext with a TrustManager
        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(new KeyManager[0], new TrustManager[] {
            new DefaultTrustManager() }, new SecureRandom());
        SSLContext.setDefault(ctx);

        URL url = new URL(urlString);
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setHostnameVerifier(new HostnameVerifier() {
            @Override
            public boolean verify(String arg0, SSLSession arg1) {
                return true;
            }
        });
        returnMap = getResponseStatus(url, null, conn);

        conn.disconnect();
        return returnMap;
    }

 private  class DefaultTrustManager implements X509TrustManager {
        @Override
        public void checkClientTrusted(X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }

        @Override
        public void checkServerTrusted(X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }

        @Override
        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    }

    private  Map<String,Object> getResponseStatus(URL url, HttpURLConnection httpURLConnection,
            HttpsURLConnection httpsURLConnection) throws IOException {
        Map<String,Object> returnMap = new HashMap<String,Object>();

        returnMap.put("PROTOCOL", url.getProtocol());
        returnMap.put("PORT", url.getDefaultPort());
        returnMap.put("HOST", url.getHost());
        returnMap.put("URL", url.getFile()); 

        if (httpURLConnection != null){

            returnMap.put("STATUS_MESSAGE", httpURLConnection.getResponseMessage());
            returnMap.put("STATUS_CODE", httpURLConnection.getResponseCode());

        }
        if (httpsURLConnection != null){

            returnMap.put("STATUS_MESSAGE", httpsURLConnection.getResponseMessage());
            returnMap.put("STATUS_CODE", httpsURLConnection.getResponseCode());
        }

        return returnMap;

    } 
```

# image - 缩略图的 SEO 实践

> ID：14560873
> 
> 赞同：0
> 
> 时间：2013-01-28T11:18:58.797
> 
> 标签：image, seo, thumbnails

有 SEO 最佳实践来识别带有文件名前缀、后缀或其他提示的缩略图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:06:58.230

我不相信关于缩略图的文件名前缀或后缀有任何建议。

就所有图像而言（常规尺寸或缩略图），我建议使用标签`alt`的`title`属性对您的图像内容进行有意义的描述。`<img>`图像名称有时可能由一些对客户没有意义的标识符组成。但是，也建议使用有意义的图像名称。

请查看 Matt Cutts 博客页面：[Gadgets、Google 和 SEO](http://www.mattcutts.com/blog/matt-video-alt-attributes-for-images/)，其中 Matt 详细描述了图像标签中正确信息`alt`和`title`属性的重要性。

# jackrabbit - 在资源适配器上运行 Jackrabbit 垃圾收集器

> ID：14560875
> 
> 赞同：1
> 
> 时间：2013-01-28T11:19:06.207
> 
> 标签：jackrabbit, jcr

我想使用资源适配器部署模型运行数据存储垃圾收集器。我尝试关闭 jackrabbit-jca 存储库，然后运行[此处](http://wiki.apache.org/jackrabbit/DataStore#Running_Data_Store_Garbage_Collection_.28Jackrabbit_2.x.29)建议的代码，但我不知道我需要包含哪些库，因为我现在只能通过 jcr api 访问 jackrabbit。我总是得到 ClassDefNotFoundExceptions 或 java.lang.LinkageError：加载程序约束违规。Jackrabbit 版本是 2.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:39:34.683

[要获取运行 Jackrabbit 所需的 jar 文件列表，您可以使用 Maven并以](http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-webapp/pom.xml?view=markup)[与项目`jackrabbit-webapp`](http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-webapp/pom.xml?view=markup)相同的方式列出依赖项：

```
<properties>
    <jackrabbit.version>2.5.3</jackrabbit.version>
</properties>
<dependencies>
<dependency>
  <groupId>javax.jcr</groupId>
  <artifactId>jcr</artifactId>
</dependency>
<dependency>
  <groupId>org.apache.jackrabbit</groupId>
  <artifactId>jackrabbit-core</artifactId>
  <version>${jackrabbit.version}</version>
</dependency>
<dependency>
  <groupId>org.apache.tika</groupId>
  <artifactId>tika-parsers</artifactId>
  <exclusions>
    <exclusion>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
    </exclusion>
  </exclusions>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
</dependency>
<dependency>
  <groupId>org.apache.jackrabbit</groupId>
  <artifactId>jackrabbit-jcr-server</artifactId>
  <version>${jackrabbit.version}</version>
</dependency>
<dependency>
  <groupId>org.apache.jackrabbit</groupId>
  <artifactId>jackrabbit-jcr-servlet</artifactId>
  <version>${jackrabbit.version}</version>
</dependency>
<dependency>
  <groupId>org.apache.jackrabbit</groupId>
  <artifactId>jackrabbit-jcr-rmi</artifactId>
  <version>${jackrabbit.version}</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jul-to-slf4j</artifactId>
  <version>${slf4j.version}</version>
  <scope>test</scope>
</dependency>
</dependencies> 
```

如果您不使用 Maven，您可以通过[下载 jackrabbit-webapp](http://jackrabbit.apache.org/downloads.html) `jackrabbit-webapp-2.5.3.war`获取 jar 文件列表，然后重命名为`.zip`并展开。jar 文件然后在目录中`WEB-INF/lib`。这是“最坏情况”列表，实际上您可能不需要 pdfbox、poi、derby 等内容。

# java - Java中的行差异与上下文

> ID：14560878
> 
> 赞同：3
> 
> 时间：2013-01-28T11:19:15.367
> 
> 标签：java, diff

是否有用于多行文本块之间基于行的差异的 Java 库，它支持上下文行之前/之后，类似于`diff -C`Unix 工具包中的？

例如，假设第一个块是

```
a
b
foo
c
d 
```

第二块是

```
a
b
goo
c
d 
```

然后用一行上下文进行差异应该产生类似的结果：

```
 b
-foo
+goo
 c 
```

最好，这应该使用本机 Java 库来完成，而不是将 diff 作为外部进程调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:23:11.367

Java 没有开箱即用的 diff 功能。但是你可以使用[这个](http://code.google.com/p/java-diff-utils/)java 库。这不需要您调用类似的过程`diff`

# cordova - 如何在 Android Phonegap 中实现 Pushnotification

> ID：14560883
> 
> 赞同：0
> 
> 时间：2013-01-28T11:19:39.893
> 
> 标签：cordova

我是Phonegap的新手。我有一个应用程序，我想在其中添加一个人作为好友，所有详细信息都将保存在我的数据库中，但是一旦我添加他，一条消息应该在他的 android 手机中发送给那个人（充当外部通知-状态栏通知）谁安装了这个应用程序。如何使用phonegap向他发送一条消息，作为他在android中的外部通知。

提前致谢.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:31:23.757

要使用 Android 推送通知，您必须实现一个使用[Google Cloud Messaging 服务](http://developer.android.com/google/gcm/index.html)的应用程序，您的 PhoneGap 应用程序可以使用该应用程序。

如果您不想自己实现应用程序，可以使用第三方服务，例如[Urban Airship](http://urbanairship.com/)。

希望这可以帮助 ：）

# .net - Windows 用户配置文件路径文件夹

> ID：14560884
> 
> 赞同：0
> 
> 时间：2013-01-28T11:19:42.950
> 
> 标签：.net, windows

谁能描述如何在 DotNet 的屏幕截图中获取以下文件夹以及这些文件夹的用途？下面在 Dotnet 命名空间中描述为“Missed”的文本中。

![用户文件夹 Windows 资源管理器](../Images/6b6313a36baae009d53cd8306b4ba9c5.png)

我只能通过以下方式获取以下文件夹 `My.Computer.FileSystem.SpecialDirectories`

.

**财产**....**目的**

**所有用户应用程序数据**

> 应用程序应存储所有用户设置的目录（通常是 C:\ProgramData\WindowsApplication1\WindowsApplication1\1.0.0.0）。

**当前用户应用程序数据**

> 应用程序应存储当前用户设置的目录（通常为 C:\Users\PeterBlue\AppData\Roaming\WindowsApplication1\WindowsApplication1\1.0.0.0）。

**桌面**

> 当前用户的桌面目录（通常为 C:\Users\PeterBlue\Desktop）。

**我的文件**

> 当前用户的 My Documents 目录（通常为 C:\Users\PeterBlue\Documents）。

**我的音乐**

> 当前用户的 My Music 目录（通常为 C:\Users\PeterBlue\Music）。

**我的照片**

> 当前用户的 My Pictures 目录（通常为 C:\Users\PeterBlue\Pictures）。

**程序文件**

> Program Files 目录（通常为 C:\Program Files）。

**程式**

> 当前用户的程序目录（通常为 C:\Users\PeterBlue\AppData\Roaming\Microsoft\Windows\Start Menu\Programs）。

**温度**

> 当前用户的临时目录（通常为 C:\Users\PeterBlue\AppData\Local\Temp）。

**错过**了 DotNet 命名空间和错过的信息：

*   行政人员
*   默认
*   默认用户（为什么有钥匙标志以及如何获得访问权限？）
*   用户

    .

*** 自己的解决方案 ***

我自己解决文件夹问题的解决方案是使用`cmd`带有`Dir /ah` ![所有用户目录](../Images/8192d10f9bc1c47574e6e53b289a86ab.png) ex 的命令行：现在我们可以看到真正的文件夹是“C:\Users\Public\Documents”，而不是“C:\Users\All Users”通过`Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:54:46.030

Note you should not use those profile folders to guess anything that you can retrieve from Environment.GetFolderPath. Anything you can get from there can be changed by SHSetFolderPath or some other tool. The supported way to retrieve those folders are documented already (Environment.GetFolderPath, SHGetFolderPath etc)

*   Administrator/*user*: default location for profile of the user named Administrator/*user*. Can be retrieved via [GetUserProfileDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762280%28v=vs.85%29.aspx) with a user token.
*   Default: default location of the template user's profile, which is used when creating a new user, can be retried by [GetDefaultUserProfileDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762277%28v=vs.85%29.aspx)
*   默认用户：一些 OEM 可能会错误地创建此文件夹。可能是为 XP 粗心编写的代码的剩余部分，其中默认用户配置文件存储在[GetProfilesDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762278%28v=vs.85%29.aspx) \Default User 中。[除非SysPrep](http://en.wikipedia.org/wiki/Sysprep)更改了默认用户配置文件目录，否则对此文件夹的自定义将无效。使用记录在案的 API 来避免此类问题始终是一个好主意。

Environment.SpecialFolder 是[CSIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)值的包装器，因此它不包含默认用户配置文件或其他用户的标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:30:13.320

我想，你正在寻找这样的方法：

```
Environment.GetFolderPath(Environment.SpecialFolder.Mydocuments); 
```

也

```
Environment.SpecialFolder.ApplicationData
Environment.SpecialFolder.System
Environment.SpecialFolder.CommonApplicationData
Environment.SpecialFolder.CommonProgramFiles
Environment.SpecialFolder.Cookies
Environment.SpecialFolder.Desktop
Environment.SpecialFolder.DesktopDirectory
Environment.SpecialFolder.Favorites
Environment.SpecialFolder.History
Environment.SpecialFolder.InternetCache
Environment.SpecialFolder.LocalApplicationData
Environment.SpecialFolder.MyComputer
Environment.SpecialFolder.MyMusic
Environment.SpecialFolder.MyPictures
Environment.SpecialFolder.Personal
Environment.SpecialFolder.ProgramFiles
Environment.SpecialFolder.Programs
Environment.SpecialFolder.Recent
Environment.SpecialFolder.SendTo
Environment.SpecialFolder.StartMenu 
```

这里有什么：[这里](http://en.wikipedia.org/wiki/Special_folder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:13:13.827

您可以使用以下命令获取当前用户目录和父用户目录：

```
//get the current user's home directory (C:/Users/user)
string userDirectory = Environment.ExpandEnvironmentVariables("%HOMEDRIVE%%HOMEPATH%");
//get the Users directory (C:/Users)
string homeUsersDirectory = userDirectory.Substring(0, userDirectory.LastIndexOf("\\")); 
```

这是你要找的吗？
我不确定是否可以为其他用户检索用户目录。如果您知道他们的用户名，您可以通过将用户名添加到`homeUsersDirectory`字符串中来获取他们。
但是，默认情况下，您不应在其目录中拥有写权限。

# php - php表单验证功能无法正常工作

> ID：14560892
> 
> 赞同：0
> 
> 时间：2013-01-28T11:20:18.063
> 
> 标签：php, validation, spry

嗨，如果可能的话，我需要一些帮助。

我创建了一个 PHP 函数，它在每个字段下方显示表单服务器端验证的错误。以下是基本部分：

```
$errors = array();

//check if e-mail is valid
    if(filter_var($email, FILTER_VALIDATE_EMAIL) === false){
        $errors['email'] = "Please give a valid email.";
    }
.....

function display_error($field_name){
    global $errors;
    if($errors[$field_name]){
        echo "<span class=\"form_error\">" . $errors[$field_name] . "</span>\n";
    }
}

....

<span id="spryEmail">
<label>E-mail *<br />
<input type="text" name="email" id="email" />
</label>
<span class="textfieldRequiredMsg">Your e-mail is required.</span><span class="textfieldInvalidFormatMsg">Please provide a valid e-mail.</span></span>
<?php display_error('email'); ?> 
```

当我在浏览器上预览表单时（我暂时禁用了 javascript），它显示了这个：

**注意：未定义索引：第 60 行 C:.......\functions.php 中的电子邮件** ，指向函数内部的 if 语句。如何修复此通知，使其不显示？注意：如果我提交表单，错误消息会正确显示。

2) 如您所见，我还添加了一些 Spry 验证来验证 onblur。我有一个验证码字段

```
<span id="spryCaptcha">
<label>Security code *<br />
<img src="captcha.php" id="imgCode" />
<input type="text" name="captcha" id="captcha" />
</label>
<span class="textfieldRequiredMsg">Please type the code you see.</span></span>
<?php error_for('captcha'); ?> 
```

我想做的是，如果用户输入了错误的代码，那么在点击提交按钮之前，来自 error_for 函数的消息也会显示 onblur。我怎样才能使这项工作？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:40:31.830

实际上，函数内部代码的这种更改在`if(!empty($errors[$field_name])){ ... }`我的第一个问题上效果很好！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T11:24:13.237

先摆脱那个丑陋的`global $errors`

`function display_error($errors, $field_name)`

进而`<?php display_error($errors, 'email'); ?>`

并确保索引存在`if (isset($errors['email']))`

# html - 在表单中为某些字段设置自动完成功能

> ID：14560899
> 
> 赞同：1
> 
> 时间：2013-01-28T11:20:32.523
> 
> 标签：html, autocomplete

我有一个表单，我想在其中关闭某些字段的自动完成功能。在我的测试中，关闭自动完成功能就是关闭***整个***表单，这不是我想要的。这就是我所做的：

```
<form>
  <input name="a">
  <input name="b" autocomplete="off">
</form> 
```

我有一些问题：

*   这是预期的行为吗？不是从我一直在阅读的...
*   如何仅对*某些*字段禁用自动完成功能？

# ios - CoreData 删除多个对象

> ID：14560900
> 
> 赞同：20
> 
> 时间：2013-01-28T11:20:38.203
> 
> 标签：ios, objective-c, core-data

我知道如何删除 CoreData 中的单个对象我只是想知道是否有更简单的方法来删除多个对象？

对于单个删除，您可以使用

```
[moc deleteObject:someManagedObject]; 
```

但是多个对象没有等价物。

目前我正在考虑做...

```
NSArray *arrayOfManagedObjectsToDelete = //...

for (SomeManagedObjectClass *managedObject in arrayOfManagedObjectsToDelete) {
    [moc deleteObject:managedObject];
} 
```

但我不确定是否有其他方法可以做到这一点？

理想情况下，像...这样的方法

```
- (void)deleteObjects:(NSSet*)objects 
```

on`NSManagedObjectContext`或类似的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-24T11:20:51.893

**iOS 9**

**迅速**

```
let fetchRequest = NSFetchRequest(entityName: "EntityName") let deleteRequest = NSBatchDeleteRequest(fetchRequest: fetchRequest)

do {
    try myPersistentStoreCoordinator.executeRequest(deleteRequest, withContext: myContext) } catch let error as NSError {
    // TODO: handle the error 
} 
```

**Objective-C**

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"EntityName"];
NSBatchDeleteRequest *deleteRq = [[NSBatchDeleteRequest alloc] initWithFetchRequest:request];

NSError *deleteError = nil;
[myPersistentStoreCoordinator executeRequest:deleteRq withContext:myContext error:&deleteError]; 
```

**iOS 8 及更早版本**

```
NSFetchRequest *fr = [[NSFetchRequest alloc] init];
[fr setEntity:[NSEntityDescription entityForName:@"EntityName" inManagedObjectContext:myContext]];
[fr setIncludesPropertyValues:NO]; //only fetch the managedObjectID

NSError *error = nil;
NSArray *objects = [myContext executeFetchRequest:fr error:&error];

//error handling goes here
for (NSManagedObject *object in objects) {
  [myContext deleteObject:object];
}
NSError *saveError = nil;
[myContext save:&saveError];
//more error handling here 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-23T20:50:03.633

**iOS10**和**斯威夫特 3**

```
 let fetchRequest = NSFetchRequest<NSFetchRequestResult>(entityName: "EntityName")
    let deleteRequest = NSBatchDeleteRequest( fetchRequest: fetchRequest)

    do{
        try mContext.execute(deleteRequest)
    }catch let error as NSError {//handle error here } 
```

这会删除所有对象，`EntityName`但您可以使用`NSPredicate`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-28T11:30:20.947

据我所知，没有一种方法......你应该像你已经在做的那样做。有一个方法被调用`deletedObjects`，但它只返回一组对象，这些对象将在下一次保存操作期间从其持久存储中删除，如类参考中所述。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-28T11:34:31.547

不，没有特定的方法可以删除多个对象 atm。但我会做这样的事情，类似于你已经在做的事情：

```
- (void)removeFromManagedObjectContext {
  NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = [NSEntityDescription entityForName:@"YourEntity" inManagedObjectContext:managedObjectContext];

    NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:nil];

    for (Your Entity *Entity in results) {
        [managedObjectContext deleteObject:Entity];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-14T13:19:45.227

来自[https://www.avanderlee.com/swift/nsbatchdeleterequest-core-data/](https://www.avanderlee.com/swift/nsbatchdeleterequest-core-data/)

```
extension NSManagedObjectContext {

    /// Executes the given `NSBatchDeleteRequest` and directly merges the changes to bring the given managed object context up to date.
    ///
    /// - Parameter batchDeleteRequest: The `NSBatchDeleteRequest` to execute.
    /// - Throws: An error if anything went wrong executing the batch deletion.
    public func executeAndMergeChanges(using batchDeleteRequest: NSBatchDeleteRequest) throws {
        batchDeleteRequest.resultType = .resultTypeObjectIDs
        let result = try execute(batchDeleteRequest) as? NSBatchDeleteResult
        let changes: [AnyHashable: Any] = [NSDeletedObjectsKey: result?.result as? [NSManagedObjectID] ?? []]
        NSManagedObjectContext.mergeChanges(fromRemoteContextSave: changes, into: [self])
    }
} 
```

我的目标是删除一些对象所以这是我如何使用它

```
var objectsToRemove = [NSManagedObjectID]()
// gather objectIDs

let batchDeleteRequest = NSBatchDeleteRequest(objectIDs: objectsToRemove)
do {
    try defaultContext.executeAndMergeChanges(using: batchDeleteRequest)            
} catch {
    // handle error
} 
```

# mod-rewrite - .htaccess 重写返回内容但返回 404 标头状态

> ID：14560904
> 
> 赞同：0
> 
> 时间：2013-01-28T11:20:53.130
> 
> 标签：mod-rewrite, rewrite, http-status-code-404

我在我的 .htaccess 文件中有一些重写，看起来像这样（我已经更改了文件/var 名称，但基本相同）：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^page/([^/\.]+)/pageno=([^/\.]+)?$ page.php?slug=$1&pageno=$2

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^page/([^/\.]+)/?$ page.php?slug=$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^page/([^/\.]+)/([^/\.]+)/pageno=([^/\.]+)?$ page.php?slug=$1&something=$2&pageno=$3

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^page/([^/\.]+)/([^/\.]+)/?$ page.php?slug=$1&something=$2 
```

当我访问其中一个重写的 URL 时，例如 www.mydomain.com/page/something 中的正确内容 page.php?slug=something 显示在大多数浏览器中，除了旧版本的 Internet Explorer，但真正的问题是重写后的 URL 返回一个 404 标头代码（这可能是某些浏览器不显示内容而其他浏览器选择显示内容的原因）。

我有其他重写似乎有效并返回 200 OK 标头，例如：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)-some-page-([^/\.]+).html?$ some-page.php?pageno=$2&myvar=$1 
```

我能看到的唯一区别是上面的重写包含一个假的 .html 扩展名，所以不确定这是否有任何不同。

任何帮助将不胜感激！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:39:52.543

添加

```
 header("HTTP/1.0 200"); 
```

在你包含标题之后，就像

```
define('WP_USE_THEMES', false);
require($_SERVER['DOCUMENT_ROOT'] . '/blog/wp-blog-header.php');
header("HTTP/1.0 200"); 
```

# sharepoint - 如何在 sharepoint 的内容类型名称中插入“/”

> ID：14560906
> 
> 赞同：0
> 
> 时间：2013-01-28T11:20:54.443
> 
> 标签：sharepoint, content-type

我想创建一种名为“一般信息/一般服务”的内容类型。但是当我尝试创建它时会抛出一个错误，即不允许使用特殊字符（在我的情况下是“/”）。为此，我尝试使用斜杠的 ANSI 字符插入。但是`&`符号不允许进入。对此问题的任何建议。我添加了该屏幕截图以供参考。 ![在此处输入图像描述](../Images/6f68eb968895678c2100f69b3eed3c34.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:17:24.513

内容类型名称值可以是对格式**为 $Resources:String**的资源的引用。

有关详细信息，请参阅本地化 SharePoint 解决方案。名称本身不能超过 128 个字符，并且不能包含字符 \ / : * ? " # % < > { } | ~ &、两个连续的句点 (..) 或特殊字符，例如制表符。

请参阅此链接 [http://msdn.microsoft.com/en-us/library/ms460224(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ms460224(v=office.14).aspx)

# php - 这个标签在 .php 文件中是什么意思？

> ID：14560913
> 
> 赞同：0
> 
> 时间：2013-01-28T11:21:20.463
> 
> 标签：php

```
<!--?php 
```

谷歌这个很难。我明白什么`<?php`意思，但为什么`!--`在中间？

它似乎有一些我不知道的奇怪效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:22:45.733

这是一个 HTML 注释。

```
<!-- comment --> 
```

它不是有效的 PHP 开始标签，被 PHP 忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:22:35.243

它没有任何意义。看起来有人正在用 HTML 标记将其注释掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:22:57.530

一些 IDE 会让你用这个语句注释掉 PHP 代码。崇高肯定会的。不过，这不是一种启动 PHP 语句的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:50:19.650

它实际上只是一个 HTML 注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T11:26:16.490

这是一个 HTML 注释。

```
 <!-- comment --> 
```

如果在页面中，语法如下

```
 <!-- <?php ?>--> 
```

那么那个php博客也不会执行

# ruby - 使用 FbGraph 从 facebook 获取所有用户设备

> ID：14560917
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:21:32.943
> 
> 标签：ruby, ruby-on-rails-3, facebook-graph-api, fb-graph

我想从 facebook 获取所有用户设备，我是获取用户详细信息的用户 FbGraph。我已成功获取电影、音乐电视、教育和其他一些信息，但我不知道如何获取用户设备信息。[这](https://developers.facebook.com/docs/reference/api/user/)是来自 facebook 的文档链接。以下是我如何获取用户信息和他的兴趣的代码片段示例。我相信它可以被重构。**请告诉我如何使用 FbGraph 获取所有设备信息**。谢谢

```
def self.find_for_facebook(access_token, signed_in_resource=nil)
  data         = access_token['extra']['user_hash']
  fb_user_data = FbGraph::User.me(access_token['credentials']['token'])

  first_name = data['first_name']
  last_name  = data['last_name']

  # to get the user interests in movies and music i do as follow
  fb_user_data.movies.collect(&:name)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:13:30.010

嘿，仅供参考，可能对其他人有帮助，

我正在使用`fb_graph 2.6.0`，如果您需要获取所有用户设备信息，则必须将 fb_graph gem 升级到**>=2.6.3**，另外 fb_graph 取决于 multi_json 并且它需要**multi_json 版本 >= 1.3**所以如果其他一些 gem 依赖于它 multi_json低于 1.3 的版本（您可以查看 Gemfile.lock 文件）然后 multi_json 版本之间存在冲突，您还必须升级其他 gem。

之后，您可以像以下任何其他字段一样简单地获取设备，

```
FbGraph::User.me(access_token).devices 
```

# java - 如何获得随机照片输出？

> ID：14560922
> 
> 赞同：-2
> 
> 时间：2013-01-28T11:21:47.487
> 
> 标签：java, user-interface, random, dice

我这里有一个程序可以掷两个骰子。它使用线程（我做对了吗？就像我使用了两个线程一样好吗？）当我点击滚动时，它最终会滚动。它工作得很好，但每次我点击停止时，我总是得到相同的输出。如何获得随机输出？请帮忙谢谢

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class Rolling extends JFrame {

private boolean pause = false;
private int pic = 1;
private JLabel lblGame, d1, d2, d3, d4, d5, d6, d7, d8, d9, d10, d11, d12, out1, out2;
private JButton roll, stop;
private RollButtonHandler rbh;
private StopButtonHandler sbh;

public void showGui() {

    roll = new JButton("Roll");
    roll.setFont(new Font("Arial", Font.BOLD, 20));
    roll.setLocation(170, 350);
    roll.setSize(150, 80);
    roll.setVisible(true);
    rbh = new RollButtonHandler();
    roll.addActionListener(rbh);

    stop = new JButton("Stop");
    stop.setFont(new Font("Arial", Font.BOLD, 20));
    stop.setLocation(375, 350);
    stop.setSize(150, 80);
    stop.setVisible(true);
    sbh = new StopButtonHandler();
    stop.addActionListener(sbh);

    lblGame = new JLabel("Rolling Dice...");
    lblGame.setFont(new Font("Arial", Font.BOLD, 40));
    lblGame.setLocation(300, 20);
    lblGame.setSize(300, 80);
    lblGame.setVisible(true);

    ImageIcon dice1 = new ImageIcon(getClass().getResource("dice1.jpg"));
    d1 = new JLabel(dice1);
    d1.setSize(500, 200);
    d1.setLocation(200, 80);
    d1.setVisible(true);

    ImageIcon dice2 = new ImageIcon(getClass().getResource("dice2.jpg"));
    d2 = new JLabel(dice2);
    d2.setSize(500, 200);
    d2.setLocation(200, 80);
    d2.setVisible(true);

    ImageIcon dice3 = new ImageIcon(getClass().getResource("dice3.jpg"));
    d3 = new JLabel(dice3);
    d3.setSize(500, 200);
    d3.setLocation(200, 80);
    d3.setVisible(true);

    ImageIcon dice4 = new ImageIcon(getClass().getResource("dice4.jpg"));
    d4 = new JLabel(dice4);
    d4.setSize(500, 200);
    d4.setLocation(200, 80);
    d4.setVisible(true);

    ImageIcon dice5 = new ImageIcon(getClass().getResource("dice5.jpg"));
    d5 = new JLabel(dice5);
    d5.setSize(500, 200);
    d5.setLocation(200, 80);
    d5.setVisible(true);

    ImageIcon dice6 = new ImageIcon(getClass().getResource("dice6.jpg"));
    d6 = new JLabel(dice6);
    d6.setSize(500, 200);
    d6.setLocation(200, 80);
    d6.setVisible(true);

    ImageIcon dice7 = new ImageIcon(getClass().getResource("dice1.jpg"));
    d7 = new JLabel(dice7);
    d7.setSize(500,200);
    d7.setLocation(0,80);
    d7.setVisible(true);

    ImageIcon dice8 = new ImageIcon(getClass().getResource("dice2.jpg"));
    d8 = new JLabel(dice8);
    d8.setSize(500,200);
    d8.setLocation(0,80);
    d8.setVisible(true);

    ImageIcon dice9 = new ImageIcon(getClass().getResource("dice3.jpg"));
    d9 = new JLabel(dice9);
    d9.setSize(500,200);
    d9.setLocation(0,80);
    d9.setVisible(true);

    ImageIcon dice10 = new ImageIcon(getClass().getResource("dice4.jpg"));
    d10 = new JLabel(dice10);
    d10.setSize(500,200);
    d10.setLocation(0,80);
    d10.setVisible(true);

    ImageIcon dice11 = new ImageIcon(getClass().getResource("dice5.jpg"));
    d11 = new JLabel(dice11);
    d11.setSize(500,200);
    d11.setLocation(0,80);
    d11.setVisible(true);

    ImageIcon dice12 = new ImageIcon(getClass().getResource("dice6.jpg"));
    d12 = new JLabel(dice12);
    d12.setSize(500,200);
    d12.setLocation(0,80);
    d12.setVisible(true);

    Random ran = new Random();
    int rollDice1 = ran.nextInt(6) + 1;
    int rollDice2 = ran.nextInt(6) + 1;

    ImageIcon output1 = new ImageIcon(getClass().getResource("dice" + rollDice1 + ".jpg"));
    out1 = new JLabel(output1);
    out1.setSize(500, 200);
    out1.setLocation(0, 80);
    out1.setVisible(false);

    ImageIcon output2 = new ImageIcon(getClass().getResource("dice" + rollDice2 + ".jpg"));
    out2 = new JLabel(output2);
    out2.setSize(500, 200);
    out2.setLocation(200, 80);
    out2.setVisible(false);

    Container pane = getContentPane();
    pane.setLayout(null);
    pane.add(lblGame);
    pane.add(d1);
    pane.add(d2);
    pane.add(d3);
    pane.add(d4);
    pane.add(d5);
    pane.add(d6);
    pane.add(d7);
    pane.add(d8);
    pane.add(d9);
    pane.add(d10);
    pane.add(d11);
    pane.add(d12);
    pane.add(roll);
    pane.add(stop);
    pane.add(out1);
    pane.add(out2);

    RollThread1 thread1 = new RollThread1();
    RollThread2 thread2 = new RollThread2();

    setTitle("Two Roll Dice");
    setSize(600, 500);
    setResizable(false);
    setLocation(400, 200);
    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public class RollThread1 extends Thread {

    public RollThread1() {
        start();
    }

    public void run() {

        try {
            while(pause) {
                if(pic == 1) {
                    d1.setVisible(false);
                    d2.setVisible(true);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(true);
                    pic++;
                    sleep(250);
                } else if(pic == 2) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(true);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(true);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 3) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(true);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(true);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 4) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(true);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(true);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 5) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(true);
                    d7.setVisible(false);
                    d8.setVisible(true);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 6) {
                    d1.setVisible(true);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(true);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic = 1;
                    sleep(250);
                }
            }
        } catch(InterruptedException e) {
        }
    }
}

public class RollThread2 extends Thread {

    public RollThread2() {
        start();
    }

    public void run() {

        try {
            while(pause) {
                if(pic == 7) {
                    d1.setVisible(false);
                    d2.setVisible(true);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(true);
                    pic++;
                    sleep(250);
                } else if(pic == 8) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(true);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(true);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 9) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(true);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(true);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 10) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(true);
                    d6.setVisible(false);
                    d7.setVisible(false);
                    d8.setVisible(false);
                    d9.setVisible(true);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 11) {
                    d1.setVisible(false);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(true);
                    d7.setVisible(false);
                    d8.setVisible(true);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic++;
                    sleep(250);
                } else if(pic == 12) {
                    d1.setVisible(true);
                    d2.setVisible(false);
                    d3.setVisible(false);
                    d4.setVisible(false);
                    d5.setVisible(false);
                    d6.setVisible(false);
                    d7.setVisible(true);
                    d8.setVisible(false);
                    d9.setVisible(false);
                    d10.setVisible(false);
                    d11.setVisible(false);
                    d12.setVisible(false);
                    pic = 1;
                    sleep(250);
                }
            }
        } catch(InterruptedException e) {
        }
    }
}

public class RollButtonHandler implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        RollThread1 thread1 = new RollThread1();
        RollThread2 thread2 = new RollThread2();
        pause = true;
        stop.setEnabled(true);
        roll.setEnabled(false);

        Random ran = new Random();
        int rollDice1 = ran.nextInt(6) + 1;
        int rollDice2 = ran.nextInt(6) + 1;
    }
}

public class StopButtonHandler implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        RollThread1 thread1 = new RollThread1();
        RollThread2 thread2 = new RollThread2();
        pause = false;
        stop.setEnabled(false);
        roll.setEnabled(true);
        d1.setVisible(false);
        d2.setVisible(false);
        d3.setVisible(false);
        d4.setVisible(false);
        d5.setVisible(false);
        d6.setVisible(false);
        d7.setVisible(false);
        d8.setVisible(false);
        d9.setVisible(false);
        d10.setVisible(false);
        d11.setVisible(false);
        d12.setVisible(false);
        out1.setVisible(true);
        out2.setVisible(true);

        Random ran = new Random();
        int rollDice1 = ran.nextInt(6) + 1;
        int rollDice2 = ran.nextInt(6) + 1;

        ImageIcon output1 = new ImageIcon(getClass().getResource("dice" + rollDice1 +".jpg"));
        out1 = new JLabel(output1);

        ImageIcon output2 = new ImageIcon(getClass().getResource("dice" + rollDice2 +".jpg"));
        out2 = new JLabel(output2);
    }
}

}

public static void main(String[] args) {

    Rolling exe = new Rolling();
    exe.showGui();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:26:40.197

在停止代码中有这个

```
Random ran = new Random(System.currentTimeMillis());
int rollDice1 = ran.nextInt(6) + 1;
ran.setSeed(System.currentTimeMillis());
int rollDice2 = ran.nextInt(6) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:28:56.690

首先，这是很多代码。我要做的是创建图像图标，将它们添加到集合中并随机选择一个，然后显示它。

```
ArrayList<JLabel> diceList = new ArrayList<JLabel>();

public Constructor() {
    ImageIcon output1 = new ImageIcon(getClass().getResource("dice" + rollDice1 + ".jpg"));
    out1 = new JLabel(output1);
    out1.setSize(500, 200);
    out1.setLocation(0, 80);
    out1.setVisible(false);
    diceList.add(out1);
    //Add the other dices aswell
}

public JLabel getRandomDice() {
    Random rand = new Random();
    return diceList.get(rand.nextInt(diceList.getLength()))

} 
```

注意：我有一段时间没有编写 Java，因此它可能无法编译，但您可以大致了解。无需为此使用线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T17:29:11.370

即使需要使用线程，这也是相当糟糕的代码。谷歌研究

*   “静态”字段。
*   'Java 集合'

一旦你这样做了，你会立即看到你自己的代码需要一些改进。

# delphi - 鼠标输入 TShape

> ID：14560929
> 
> 赞同：1
> 
> 时间：2013-01-28T11:22:07.393
> 
> 标签：delphi, delphi-xe2

我有一个 TMachine 类，即 TShape 类

```
unit MachineShape;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, extctrls,myDataModule,Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type

TMachine = class(TShape)
  private
    { Private declarations }
  public
    { Public declarations }
    procedure PlaceShape(sizeW,sizeH :integer; name, order,asset : string);
  end;
implementation

    Procedure TMachine.PlaceShape(sizeW,sizeH :integer; name, order,asset : string);
    begin
       self.width :=  sizeW;
       self.height := sizeH;
       self.top := 136;
       self.left := MyDataModule.fDB.LastX +2;//set left
       MyDataModule.fDB.lastx := left + sizeW;
    end;

end. 
```

我将如何为此添加 onmouseenter 代码？因此，当在运行时添加形状时，它会有自己的鼠标输入代码。像这样的东西，我知道这行不通..但也许它会告诉你我想要做什么？因此，当我创建 TMachine 时，我会将名称和编号传递给该程序，它会使 onmouseenter 程序使用我发送的名称/编号进行更新。

```
Procedure TMachine.EditMouseEnter(name,number :string);
begin
   ....onmouseenter(Label2.Caption := name AND label3.caption := Number)...
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:33:56.650

添加`OnMouseEnter`事件：

```
type
  TMachineEvent = procedure(Sender: TMachine) of object;

  TMachine = class(TShape)
  private
    FOnMouseEnter: TMachineEvent;
    ...
    procedure CMMouseEnter(var Message: TMessage); message CM_MOUSEENTER;
  protected
    procedure DoMouseEnter; virtual;
  published
    property OnMouseEnter: TMachineEvent read FOnMouseEnter write FOnMouseEnter;
    ...
  end;

implementation

{ TMachine }

procedure TMachine.CMMouseenter(var Message: TMessage);
begin
  DoMouseEnter;
  inherited;
end;

procedure TMachine.DoMouseEnter;
begin
  if Assigned(FOnMouseEnter) then
    FOnMouseEnter(Self);
end; 
```

并在运行时分配该事件：

```
procedure TForm1.CreateMachine;
var
  Machine: TMachine;
begin
  Machine := TMachine.Create(Self);
  Machine.SetBounds(...);
  Machine.OnMouseEnter := MachineMouseEnter;
  Machine.Parent := Self;
end;

procedure TForm1.MachineMouseEnter(Sender: TMachine);
begin
  Label2.Caption := Sender.Name;
  Label3.Caption := Sender.Number;
end; 
```

# android - if语句的android junit测试用例

> ID：14560930
> 
> 赞同：0
> 
> 时间：2013-01-28T11:22:08.637
> 
> 标签：android, junit

嗨，我是 android 的 junit 测试新手，所以我的问题是我有 6 个`EditText`字段，其中一个`Button`通过按下`Button`它会检查天气字段的字段长度`EditText`是否为零，如果它们为零，那么它将显示一个`Toast`，否则它将转到另一个`Activity`所以这是我的代码

```
Button.OnClickListener okListener = new Button.OnClickListener() {
        public void onClick(View arg0) {
            if(text1.getText().toString().length()==0 || text2.getText().toString().length()==0||text3.getText().toString().length()==0||   text4.getText().toString().length()==0||text5.getText().toString().length()==0||    text6.getText().toString().length()==0||txt7.getText().toString().length()==0||txt8.getText().toString().length()==0){
                Toast msg = Toast.makeText(ActivityOne.this,
                        "Field shouldn't left blank", Toast.LENGTH_LONG);
        msg.show();
} 
```

我知道如何为任何人编写测试用例，而`if` `statement` 任何人都知道如何编写测试用例`Toast`。使用**`Robotium`**也不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:26:21.203

例如：

```
// JUnit class
Button.OnClickListener okListener = new Button.OnClickListener() {
            public void onClick(View arg0) {
                assertTrue(text1.getText().toString().isEmpty() || 
                            text2.getText().toString().isEmpty()||
                            text3.getText().toString().isEmpty()||
                            text4.getText().toString().isEmpty()||
                            text5.getText().toString().isEmpty()|| 
                            text6.getText().toString().isEmpty()||
                            txt7.getText().toString().isEmpty()||
                            txt8.getText().toString().isEmpty());
    }

public void testButtons() {
    yourButton.setOnClickListener(okListener);
    okListener.onClick(yourButton);
} 
```

PS1：使用`String.isEmpty()`而不是`String.length() == 0`.

PS2：我建议您改用数组/列表`EditText`。为每个字段设置一个字段确实是一种不好的做法。如果添加/删除一个会发生什么`EditText`？您需要扫描所有代码才能找到`EditText`并删除它。使用数组/列表，您只需要更新数组/列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:26:35.943

单元测试不适合测试 GUI。

出于这个目的，尝试使用例如[Robotium](http://code.google.com/p/robotium/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:04:26.160

是的，我终于找到了 Toast 的 junit 测试用例，并且在这里使用**Robotium**非常简单，代码会像这样

```
 Solo solo = new Solo(getInstrumentation(), getActivity());
    getInstrumentation().waitForIdleSync();
    // Now do whatever you need to do to trigger your dialog.

    // Let's assume a properly lame dialog title.
    assertTrue("Could not find the dialog!", solo.searchText("MY Dialog Title")); 
```

# android - 如何清除上一个 Gridview 项目并在 android 中重新填充新适配器？

> ID：14560948
> 
> 赞同：1
> 
> 时间：2013-01-28T11:23:18.373
> 
> 标签：android, gridview

如果我在这里使用惰性适配器，当我请求另一个适配器时如何清除网格视图

在这里我把我的代码用于gridview

> Gridview Activity.java

```
public class VisitorActivity extends Activity implements OnClickListener{
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new visitormiddlelistasyntask.execute(""); 
       }   

public class VisitorMiddleListAsyncTask extends AsyncTask<String,ArrayList<HashMap<String, String>>,ArrayList<HashMap<String, String>>>
    {
        String city;
        JsonParser jparser=new JsonParser();
        String visitorurl="http://digitalhoteladnetwork.com/vixxa_beta/index.php/visitors/webvisitorlist";
        //String visitorurl="http://digitalhoteladnetwork.com/vixxa_beta/index.php/visitors/websearch_visitor_guide";

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(String... params) 
        {
            //For Get city

            Geocoder geocoder = new Geocoder(VisitorActivity.this, Locale.getDefault());
            try
            {
                List<Address> addresses = geocoder.getFromLocation(latitude, longitude, 1);
                Log.e("Addresses","-->"+addresses);
                city = addresses.get(0).getSubAdminArea();
               // Log.e("Cityname","--->"+city);

            }
            catch (IOException e)
            {
                e.printStackTrace();
              //  Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
            }

                    WebServiceData wsd=new WebServiceData();

                    String visitorstring=wsd.VisitorGuide(city, visitorurl);

                    //Log.e("webservice visitorstring","-->"+wsd.VisitorGuide(city, visitorurl));

                Log.e("webservice visitorstring","-->"+visitorstring);

                    try
                    {
                        JSONObject jobject=new JSONObject(visitorstring);
                        JSONArray jvisitorlist=jobject.getJSONArray(TAG_VISITORGUIDELIST);

                        for(int i=0;i<jvisitorlist.length();i++)
                        {
                            HashMap<String, String> map=new HashMap<String, String>();

                            String id=jvisitorlist.getJSONObject(i).getString(TAG_VISITORGUIDEID).toString();
                            //Log.e("Id","-->"+id);

                            String title=jvisitorlist.getJSONObject(i).getString(TAG_VISITORGUIDETITLE).toString();
                            //Log.e("Title","-->"+title);

                            String image=jvisitorlist.getJSONObject(i).getString(TAG_VISITORGUIDEIMAGE).toString();
                            //Log.e("Image","-->"+image);

                            //String show=jvisitorlist.getJSONObject(i).getString(TAG_VISITORTITLESHOW).toString();

                            map.put(TAG_VISITORGUIDEID,id);
                            map.put(TAG_VISITORGUIDETITLE,title);
                            map.put(TAG_VISITORGUIDEIMAGE, image);
                            //map.put(TAG_VISITORTITLESHOW,show );

                            visitormiddle.add(map);

                        }

                        //Log.e("Visitor Guide List","-->"+jvisitorlist);

                    }
                    catch (Exception e)
                    {
                            e.printStackTrace();
                    }

                    return visitormiddle;

        }

        protected void onPostExecute(ArrayList<HashMap<String, String>> result)
        {

            gridview=(GridView)findViewById(R.id.gridview);
            adapter=new LazyAdapter(VisitorActivity.this, visitormiddle);
            gridview.setAdapter(adapter);

        }

    }

} 
```

> LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

    private static final String TAG_VISITORGUIDELIST="visitorlist";
    private static final String TAG_VISITORGUIDEID="visitor_guide_id";
    private static final String TAG_VISITORGUIDETITLE="visitor_guide_cat_title";
    private static final String TAG_VISITORGUIDEIMAGE="visitor_guide_cat_image";
    //private static final String TAG_VISITORTITLESHOW="visitor_guide_cat_titleshow";

    private Activity activity;

    private ArrayList<HashMap<String, String>> result; 
    private static LayoutInflater inflater=null;
    public GridImageLoader gridimageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> r) {
        activity = a;
        result=r;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        gridimageLoader=new GridImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return result.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder{
        public TextView text;
        public ImageView image;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        ViewHolder holder;
        if(convertView==null){
            vi = inflater.inflate(R.layout.griditem, null);
            //vi = inflater.inflate(R.layout.griditem,parent,false);
            holder=new ViewHolder();
            holder.text=(TextView)vi.findViewById(R.id.textview);;
            holder.image=(ImageView)vi.findViewById(R.id.imageview);
            vi.setTag(holder);
        }
        else

            holder=(ViewHolder)vi.getTag();

        holder.text.setText(result.get(position).get(TAG_VISITORGUIDETITLE));
        holder.image.setTag(result.get(position).get(TAG_VISITORGUIDEIMAGE));
        gridimageLoader.DisplayImage(result.get(position).get(TAG_VISITORGUIDEIMAGE), activity, holder.image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:26:55.757

您可以使用 ArrayAdapter 然后调用 `adapter.clear()`以清除网格视图，然后用新数据重新填充它。

您可以使用相同的 VisitorMiddleListAsyncTask 再次填充数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:36:18.653

要清除 gridView，您可以设置空适配器或将其可见性设置为不可见或消失。

# iphone - NS_ENUM 给出关于前向引用的编译器警告

> ID：14560950
> 
> 赞同：3
> 
> 时间：2013-01-28T11:23:25.467
> 
> 标签：iphone, objective-c, c, enums, compiler-warnings

我使用[漂亮的新](http://nshipster.com/ns_enum-ns_options/)NS_ENUM 尝试在我的 Objective-C iOS 项目中定义一个枚举。

我在类的标题中声明 NS_ENUM，如下所示：

```
NS_ENUM(int, SomeEnumType){
    SomeEnumType1,
    SomeEnumType2,
    SomeEnumType3,
    SomeEnumType4
};

@interface Issue : NSObject
.... 
```

我得到编译器警告：

> ISO C 禁止前向引用“枚举”类型

现在，如果我将枚举定义为（稍微）较旧的传统方式，如下所示：

```
typedef enum{
    SomeEnumType1,
    SomeEnumType2,
    SomeEnumType3,
    SomeEnumType4
}SomeEnumType;

@interface Issue : NSObject
.... 
```

在代码中完全相同的位置，问题就消失了。NS_ENUM 我在做什么错？

编辑：

我通过添加 typedef 来纠正它，但它仍然给出警告。

我已经打开了迂腐的编译器警告。这只是它过于迂腐的情况，还是我缺少正确的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:34:53.867

尝试：

```
typedef NS_ENUM(int, SomeEnumType){
    SomeEnumType1,
    SomeEnumType2,
    SomeEnumType3,
    SomeEnumType4
}; 
```

`NS_ENUM`不会为你做 typedef 来声明`SomeEnumType`类型，你必须自己做。

**更新：**出现警告的原因是由于 NS_ENUM 的实现。让我们看看它试图做什么：

```
#define NS_ENUM(_type, _name) enum _name : _type _name; enum _name : _type 
```

问题线（我相信）是这样的：

```
enum _name : _type _name; 
```

这是在宏本身内执行前向声明。因此，通过迂腐的警告，它正在标记它的使用。

迂腐的警告只是说明如果您想将其转换为纯 C，它不会是可移植的，因为它不遵循枚举的无前向声明的标准化。在 Xcode、Clang 和 LLVM 领域（事实上 NS_ENUM 是由 Apple 提供的），你应该很安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:33:36.150

你错过了`typedef`：

```
typedef NS_ENUM(int, SomeEnumType){
    SomeEnumType1,
    SomeEnumType2,
    SomeEnumType3,
    SomeEnumType4
}; 
```

您提到您正在使用迂腐警告。编译器是正确的：固定类型的枚举是[C++ 标准的一部分](http://clang.llvm.org/docs/LanguageExtensions.html#enumerations-with-a-fixed-underlying-type)，而不是 ISO C。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-26T19:44:59.983

正如其他人指出的那样，迂腐的警告是正确的。但是，您不必使用`NS_ENUM`宏来利用严格类型的枚举。只需像这样声明您的枚举，当您保留严格的输入时，警告就会消失：

```
typedef enum : int {
    SomeEnumType1,
    SomeEnumType2,
    SomeEnumType3,
    SomeEnumType4
} SomeEnumType; 
```

# html - 保持 IE 和 Chrome 的每行字数相同

> ID：14560951
> 
> 赞同：0
> 
> 时间：2013-01-28T11:23:27.603
> 
> 标签：html, css

我有一个使用以下 CSS 和 div 在屏幕上显示的大型文本文档。这个想法是用户阅读文本，3分钟后他们记录他们到达的行号，这给出了每分钟的阅读速度。

问题是 IE 和 Chrome 每行显示的字数略有不同，因此 Chrome 在整个页面上有 189 行，而 IE 大约为 195 行。有没有办法标准化每行的字数？或者更好的方法来做到这一点？

欢迎任何帮助！

代码摘录如下：

```
.row01 {
width: 870px;
margin: 0 auto;
padding: 15px 0 0 0;
}
.col01 .numbers {
float: left;
padding-right: 4px;
padding-left: 4px;
color: #6BACC9;
font-size: 0.75em;
line-height: 1.6em;
margin-top: 1.6em;
}
.col01 .text {
float: left;
margin-left: 2px;
margin-top: 1.6em;
font-size: 0.75em;
line-height: 1.6em;
width: 830px;
}

<div class="row01">
<div class="col01">
<h2>The Time and Stress Crisis by Dr David Lewis</h2>
<div class=numbers>1\. <br />2\. <br />3\. <br />4\. <br />5\. <br />6\. <br />7\. <br />8\.     <br /></div>

<div class=text>Let me introduce you to a young acquaintance of mine - Chris.  I think    you may find you have common interests.<br />
<br />
Chris came into the office an hour early to tackle a mountain of urgent paper work.      Intimidated by the sheer size of the backlog, he found it hard to concentrate or decide his priorities.  As a result, by the time other staff arrived, his sole accomplishment had been to transform that mountain into several smaller mounds.  For the rest of the day, constant interruptions - by subordinates seeking guidance, colleagues needing to discuss departmental projects, demands from his superiors, endless telephone calls and unscheduled visitors - meant he made little further progress in catching up with his work.  Twelve hours after his working day had started, an exhausted and demoralised Chris left for home, with the backlog almost unchanged.<br />
<br /></div>
</div>
</div> 
```

更新

即使将字体大小更改为绝对字体大小，我仍然在长文本文档上遇到 IE9 问题。所以我最终迫使 IE9 采用 IE8 标准：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:39:21.320

区别可能在于浏览器设置：

您可以设置在浏览器中使用的标准字体和字体大小（在 Firefox 和 chrome 中，这是新罗马 16 的时代）。如果元素以 16 pt（标准浏览器设置）的字体显示，则 '2em' 为 32 pt。

我建议您在 css 中使用实际的字体大小（以点或像素为单位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:25:40.907

使用像素：`px`作为字体测量。Pixel-perfect 的人一直使用它来使他们的设计在每个浏览器上看起来都非常相似*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:39:34.733

你可能会发现使用 normalise.css 之类的东西很有用：

[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

尝试让所有浏览器都显示相同的内容。

# django - 字段 feincms 内容类型上的 FilteredSelectMultiple 小部件

> ID：14560955
> 
> 赞同：2
> 
> 时间：2013-01-28T11:23:41.863
> 
> 标签：django, django-widget, feincms

我在 FeinCMS 中有一个定制的内容类型。

```
class DownloadsContent(models.Model):
    title = models.CharField(max_length=200, verbose_name=_('title'))
    files = FileManyToMany(verbose_name=_('files')) 
```

'files' 字段是一个多列表，仅显示 .doc 和 .pdf 文件：

```
class FileManyToMany(models.ManyToManyField):
    def __init__(self, to=MediaFile, **kwargs):
        limit = {'type__in': ['doc', 'pdf']}
        limit.update(kwargs.get('limit_choices_to', {}))
        kwargs['limit_choices_to'] = limit
        super(FileManyToMany, self).__init__(to, **kwargs) 
```

直到现在一切正常。添加此内容类型时，它会显示所有文件。

但是如何在我的内容类型中使用 FilteredSelectMultiple 小部件？像：

![在此处输入图像描述](../Images/5def1f85ec306839eb23ef52c800a3f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:05:17.933

实际上，实现这一目标的更简单方法是：

```
class DownloadContentInline(FeinCMSInline):
    filter_horizontal = ['files']

class DownloadContent(models.Model):
    feincms_item_editor_inline = DownloadContentInline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:19:52.450

在我自己的模型字段类 FileManyToMany 中，添加添加小部件的“def formfield(self, ...)”

```
from django.db import models
from feincms.module.medialibrary.models import MediaFile

class FileManyToMany(models.ManyToManyField):
    def __init__(self, to=MediaFile, **kwargs):
        limit = {'type__in': ['doc', 'pdf', 'xls']}
        limit.update(kwargs.get('limit_choices_to', {}))
        kwargs['limit_choices_to'] = limit
        super(FileManyToMany, self).__init__(to, **kwargs)

    def formfield(self, **kwargs):
        from django.contrib import admin
        defaults = {'widget': admin.widgets.FilteredSelectMultiple('vebose_name', False)}
        defaults.update(kwargs)
        return super(FileManyToMany, self).formfield(**defaults) 
```

# sql - SQL Server 2008，连接字符串？

> ID：14560956
> 
> 赞同：3
> 
> 时间：2013-01-28T11:23:41.737
> 
> 标签：sql, sql-server, string, concatenation

我浪费了整整 2 天的时间来尝试解决这个问题，现在我疯了，我需要紧急帮助，问题是，我必须要桌子

表：销售额，*SalesId*为`primary key`

```
---------------------------------------------------
SalesId | SalesDate | Customer| Discount | Remarks
---------------------------------------------------
1       | 01/01/2012|   John  |   15     |   NULL
2       | 01/01/2012|   Peter |   25     |   NULL
3       | 01/01/2012| Micheal |   35     |   NULL 
```

表：SalesBody，*SerialNo*是`primary key`，*SalesId*是`foreign key`

```
---------------------------------------------------
SerialNo | SalesId | Product | Quantity | Rate
---------------------------------------------------
10       | 1       | Pencil   | 18       | 20
11       | 1       | pen      | 200      | 60
12       | 1       | Rubber   | 150      | 10
13       | 1       | Paper    | 500      | 2
14       | 2       | Mouse    | 15       | 190
15       | 2       | KeyBoard | 10       | 600
16       | 2       | Monitor  | 5        | 2000
17       | 3       | Mobile   | 2        | 15000 
```

现在我想做一个查询，可以得到如下结果

```
----------------------------------------------------------------------------
SalesId | SalesDate  | Details                               | Amount
----------------------------------------------------------------------------
1       | 01/01/2012 | Sold: Pencil x 18 @ 20, Pen x 200 @ 60| xxxxxxx
        |            |  Rubber x 150 @ 10, Paper x 500 @ 2   |
2       | 01/01/2012 | Sold: Mouse x 15 @ 190, Keyboard x 10 |
        |            |  @ 600, Monitor x 5 @ 2000            | xxxxxxx
3       | 01/01/2012 | Sold: Mobile x 2 @ 15000              | xxxxxxx 
```

我尝试了不同的技术，例如。合并，东西，用于 XML PATH('')

我无法连接详细信息字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:17:23.850

据我所见，您只需要旋转 SalesBody 表并按 SalesID 分组

类似于以下查询的内容应该可以解决问题

```
select sb.SalesId, ( SELECT ', ' + sb2.Product + ' x ' + sb2.Quantity + ' @ ' + sb2.Rate
       FROM SalesBody sb2
       WHERE sb2.SalesId = sb.SalesId 
       FOR XML PATH('') ) AS Details
from SalesBody sb
group by sb.SalesId 
```

然后只需将该查询与您的 Sales 表连接以获取其他数据，并对上述查询中的 Details 执行 STUFF 命令以删除前导“，”并添加您的“sold：”字符串，您应该一切顺利。

# ios - ios自动续订订阅和我们服务中的用户

> ID：14560959
> 
> 赞同：4
> 
> 时间：2013-01-28T11:23:53.070
> 
> 标签：ios, in-app-purchase, subscription

在我们的服务中，每个用户都有一个用户名（电子邮件）、密码和一个唯一标识符。如何通过 Apple 的**自动续订订阅**将任何购买链接到该用户？

是否有任何字段可以使 Apple 用户独一无二？我不想将它链接到设备，因为用户可以从许多设备上运行应用程序，所以我想要用户的唯一标识符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T09:55:06.697

Apple 不会为您提供 Apple 用户或 Apple ID 的唯一标识符（可能是为了帮助保护用户隐私）。我正在做的是使用他们的第一个自动更新收据作为他们的唯一标识符。因此，您应该能够`original_transaction_id`在收据验证中使用 。当您使用 Apple 服务器验证收据时，响应应包括该用户从您那里购买的原始自动续订订阅的交易 ID，无论他们使用的是哪种设备。而且我发现即使订阅失效然后重新开始，也总会有一个原始的自动续订交易被引用。

这有点小技巧，但似乎有效。

或者，您也可以使用 iCloud 键值存储来存储唯一 ID。该 ID 在用户的所有设备上都是相同的，但他们必须在所有设备上打开 iCloud。从技术上讲，他们可能使用不同的 iCloud 帐户而不是他们用于购买的帐户，因此这并不完美。

# windows-phone-7 - wp7上的动画旋转按钮

> ID：14560960
> 
> 赞同：0
> 
> 时间：2013-01-28T11:23:52.707
> 
> 标签：windows-phone-7, animation, rotation

> 您好，我正在尝试在两个图像之间的按钮上创建一个旋转动画，一个用于前面，另一个用于前面，就像在瓷砖中发生的事情一样。
> 
> 请问有什么想法吗？
> 
> 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:13:23.047

[与此线程](https://stackoverflow.com/questions/14505597/creating-custom-tiles-inside-the-wp7-app/14506913#14506913)非常相似。查看[Tile Slider](http://tileslider.codeplex.com/)或[Hub Tiles](http://www.windowsphonegeek.com/articles/Windows-Phone-HubTile-in-depth-Part1-key-concepts-and-API)。或者，您可以创建自己的动画。

# embedded - 如何验证附加了两位十六进制校验和的 ASCII 字符串？

> ID：14560962
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:24:00.630
> 
> 标签：embedded, checksum

我正在使用带有 HEW（高性能嵌入式工作台）编译器的 Renesas 16 bt MCU。

系统接收格式如下的 ACSII 数据：

```
<data><cc> 
```

其中`<cc>`包含两个 ASCII 十六进制数字，对应于所有前面字符的 8 位按位异或。包含的字符串的最大长度`<cc>`为 14。

这是我的尝试：

```
#pragma INTERRUPT Interrupt_Rx0
void Interrupt_Rx0 (void)
{
    unsigned char   rx_byte, rx_status_byte,hex;
    char buffer[15],test[5];
    int r,k[15];
    char * pEnd;
    unsigned char dat,arr[14],P3;
    unsigned int i,P1[10];

    rx_byte = u0rbl;    //get rx data
    rx_status_byte = u0rbh;

    if ((rx_status_byte & 0x80) == 0x00)        //if no error
    {
        if ((bf_rx0_start == 0) && (rx_byte == '?') && (bf_rx0_ready == 0))
        {

            byte_rx0_buffer[0]=rx_byte;
            bf_rx0_start = 1;                                    
            byte_rx0_ptr = 1;       
        }

        else
        {
            if (rx_byte == '?')
            {
                bf_rx0_start = 1;
                byte_rx0_ptr = 0;
            }
            if(bf_rx0_start == 1)
            {
                byte_rx0_buffer[byte_rx0_ptr++] = rx_byte;          

                sprintf(buffer,"%X",rx_byte); //ASCII CONVERSION
                dat=strtol(buffer,&pEnd,16);
                //  P1=(int)dat;
                //  sprintf(P1,"%s",dat);
                delay_ms(2000);
                k[byte_rx0_ptr++]=dat;  
            }                       

            if ((byte_rx0_ptr == 14))               
                bf_rx0_start = 0;//end further rx until detect new STX

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:14:51.107

> 将此值转换为十六进制值 & xor 即（3F^30^31^53^52^57=68），如果我可以在程序中进行此计算

您从根本上不了解值和编码之间的区别。无论您将两者表示为“2”、“二”还是“X X”，二加三等于五。加法作用于*值*，而不是表示。所以“转换为十六进制和异或”是没有意义的。你 XOR**值**，而不是表示。十六进制是一种表示。

要保持运行 XOR，只需`int running_xor=0;`在顶部执行类似操作，然后 `running_xor ^= rx_byte;`每次收到一个字节。完成后它将包含正确的值。将其设置为零以将其重置。

完全忘记十六进制。这就是打印这些值以供*您*使用的方式。这与仅处理值的程序的内部逻辑无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:34:50.280

您最好将数据验证与数据接收分开，即使您不在中断处理程序中执行此操作；如果您使用的是 RTOS，最好在未检查的 ISR 中缓冲数据并将数据验证推迟到主代码线程或任务线程。您当然不想在 ISR 中调用重量级库函数，例如 sprintf() 或 strtol()！

无论哪种方式，这里都有一个函数，它将接收一个指向接收到的字符串的指针及其长度（以避免不必要的`strlen()`调用，因为您已经知道接收到了多少个字符），`true`如果校验和有效则返回，`false`否则返回。它对数据长度没有限制 - 这将由调用函数执行。

如果您知道校验和十六进制数字将始终为大写或小写，则可以简化该`decodeHexNibble()`函数。

```
#include <stdint.h>
#include <stdbool.h>

uint8_t decodeHexNibble() ;
uint8_t decodeHexByte( char* hexbyte ) ;
uint8_t decodeHexNibble( char hexdigit ) ;

bool checkData( char* data, int length )
{
    int data_len = length - 2 ;
    char* bcc_ptr = &data[data_len] ;
    uint8_t rx_bcc_val = 0 ;
    uint8_t actual_bcc_val = 0 ;
    int i = 0 ;

    // Convert <cc> string to integer
    rx_bcc_val = decodeHexByte( bcc_ptr ) ;

    // Calculate XOR of <data>
    for( i = 0; i < data_len; i++ )
    {
        actual_bcc_val ^= data[i] ;
    }

    return actual_bcc_val == rx_bcc_val  ;
}

uint8_t decodeHexNibble( char hexdigit )
{
    uint8_t nibble ;

    if( hexdigit >= '0' && hexdigit <= '9' )
    {
        nibble = hexdigit - '0' ;
    }
    else if( hexdigit >= 'a' && hexdigit <= 'f' )
    {
        nibble = hexdigit - 'a' + 10 ;
    }
    else if( hexdigit >= 'A' && hexdigit <= 'F' )
    {
        nibble = hexdigit - 'A' + 10 ;
    }
    else
    {
        // Do something 'sensible' with invalid digits
        nibble = 0 ;
    }

    return nibble ;
}

uint8_t decodeHexByte( char* hexbyte )
{
    uint8_t byte = hexbyte[0] << 4 ;
    byte |= hexbyte[1] ;

    return byte ;
} 
```

# jquery - 带有“jquery-1.8.2.min.js”和“jquery.mobile-1.2.0.min.js”的 Servlet 链接不起作用？

> ID：14560964
> 
> 赞同：0
> 
> 时间：2013-01-28T11:24:04.127
> 
> 标签：jquery, servlets, jquery-mobile

我编写了代码，其中对 ServletA 的请求将调用 ServletB，然后将用户重定向到外部页面（即 PayPal 页面）。

该代码工作正常并重定向到正确的页面，直到将 jquery 和 jquery.mobile 包含到初始 jsp 页面。

```
<html> 
<head>
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">   </script>
</head>
<body>
  <a href="/myApp/ServletA">Call to ServletA</a>
</body>
</html> 
```

在调试时，我知道我到达了 ServletB，但由于某种原因，我没有被重定向到外部链接。该页面仅在短暂出现“<strong>错误加载页面”的情况下挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:10:00.777

默认情况下，JQM 将通过 AJAX 请求所有页面。这样做时，JQM 正在加载页面并抓取第一个`<div:jqmData(role="page"></div>`.

如果 servlet 页面不是 JQM 页面，则链接将不起作用。

因此，为了加载第 3 方提供程序或 servlet 页面，您需要通过指定来告诉 JQM 不要在链接上使用 AJAX `data-ajax="false"`，这将覆盖 JQM 并执行常规页面加载。

这将离开您的应用程序，这样做时您应该注意这一点。

# jquery - 如何使用 jQuery Validation Engine 和 Twitter Bootstrap 模式修复定位错误

> ID：14560965
> 
> 赞同：9
> 
> 时间：2013-01-28T11:24:06.413
> 
> 标签：jquery, html, css, twitter-bootstrap, jquery-validation-engine

我在我的网站上使用 Twitter Bootstrap 2.1.0，我也在使用 jQuery Validation Engine 2.6.2 插件，它们可以很好地协同工作。

直到您尝试在模式中使用验证引擎：

![](../Images/9825b2891e9875e27d02f3db441fb2c3.png)

注意我们是如何得到一个水平滚动条的，并且消息被截断了？

我想知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T10:59:11.280

您可以在实例化/更新validationEngine时为错误消息建立默认位置，这将应用于所有已验证的字段：

```
$("#formID1").validationEngine({promptPosition : "topRight:-100"}); 
```

和/或为您的每个字段设置单独的位置设置：

```
<input type="text" class="validate[required]" data-prompt-position="bottomRight:-100" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T14:23:36.610

```
<script type="text/javascript">
    $(function () {
        $("#form1").validationEngine('attach', { promptPosition: "topLeft" });
    });
    function RValidate() {
        $("#form1").validationEngine('detach');
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T10:03:52.697

在 jquery.validationEngine.js 中搜索以下代码

```
 if (options.isOverflown)
     field.before(prompt);
 else
     $("body").append(prompt); 
```

将其替换为

```
 //if (options.isOverflown)
     field.before(prompt);
 //else
     //$("body").append(prompt); 
```

# php - Zend 框架，从模型中返回类方法

> ID：14560972
> 
> 赞同：0
> 
> 时间：2013-01-28T11:24:26.350
> 
> 标签：php, zend-framework, zend-form, zend-framework-modules

我有一个模型，我想在表单的下拉列表中使用所有变量。

```
protected $_scheduledTime;
protected $_isLive;
protected $_isQueued;
protected $_url; 
```

我希望，这样的事情会奏效，但它没有

```
public function getMethods() {
    $methods = getclass_methods($this);
    return $methods;
} 
```

调用它会返回这个致命错误：

致命错误：调用未定义的函数 getclass_methods()

我想要实现的是更新模型时自动更新的表单选项（这可能非常频繁）

我可能已经回答了我自己的问题，因为我将在模型中构建一个数组，该数组在调用时返回......但如果已经有一种方法可以做到这一点，那么将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:32:35.370

```
get_declared_classes() // gives you all declared classes
get_class_methods() // gives you all methods of class
get_class_vars() // gives you properties of the class
get_object_vars() // gives you propertis of an object
get_parent_class()  // gives you parent class of the current class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:28:54.567

该函数是[get_class_methods](http://php.net/manual/en/function.get-class-methods.php)，而不是 getclass_methods （缺少'_'）

# c# - 数组中的内存不足异常

> ID：14560975
> 
> 赞同：1
> 
> 时间：2013-01-28T11:24:31.923
> 
> 标签：c#, arrays, out-of-memory

我想制作一个大小为 10^9 元素的数组，其中每个元素可以是相同大小的整数。我总是`OutOfMemoryException`在初始化行得到一个。我怎样才能做到这一点？

如果这是不可能的，请提出替代策略？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:28:57.377

在 .net 4.0 或更早版本中，即使在 64 位进程中，数组也被限制为 2GB。所以对于十亿个元素，支持的最大元素大小是两个字节，但一个`int`是四个字节。所以这行不通。

如果你想拥有一个更大的集合，你需要自己编写，由多个数组支持。

在 .net 4.5 中可以避免此限制，有关详细信息，请参阅 Jon Skeet 的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:29:49.597

假设您的意思`int`是元素类型，如果您使用的是 64 位 CLR，则可以使用 .NET 4.5 执行此操作*。*

您需要使用[`<gcAllowVeryLargeObjects>`](http://msdn.microsoft.com/en-us/library/hh285054%28v=VS.110%29.aspx)配置设置。默认情况下*未*启用。

如果您使用的是较旧的 CLR，或者您使用的是 32 位机器，那么您就不走运了。当然，如果您使用的是 64 位机器，但只是旧版本的 CLR，您可以将“一个大数组”封装到一个单独的对象中，该对象具有一个较小数组的列表……您甚至可以实现`IList<int>`它这样*大多数*代码就不需要知道您并没有真正使用单个数组。

（如评论中所述，您仍然只能创建一个包含 2 ^(31)个元素的数组；但您对 10 ⁹的要求正好在此范围内。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:30:02.173

我认为您不应该将所有这些数据加载到内存中，将其存储在文件中的某个位置，然后创建一个可以作为数组工作但实际上从文件中读取和写入数据的类

这是一般的想法（这当然不能正常工作，另外你必须在编写它和其他一些东西之前将你的 int 值转换为 byte[] 数组）

```
public class FileArray
{
   Stream s;

   public this[int index]
   {
      get { s.Position = index * 4; return s.Read(); }
      set { s.Position = index * 4; s.Write(value); }
   }
} 
```

这样，您将拥有像数组一样工作的东西，但数据将存储在您的硬盘上

# c++ - 错误：没有匹配的调用函数，使用 C++

> ID：14560977
> 
> 赞同：0
> 
> 时间：2013-01-28T11:24:37.527
> 
> 标签：c++, class, function, call, matching

我是 C++ 新手，请如果有人可以提供这些错误的指导/见解。这会有很大帮助。

以下代码fuzzyex1.cpp：

```
#include "fuzzyvar.h"

TControlVariable TEMPERATURE(0,1,1200);
TFuzzySet
COLD = TEMPERATURE.Trapezoid(0,0,300,500),
COOL = TEMPERATURE.Trapezoid(100,300,500,700),
TEPID = TEMPERATURE.Trapezoid(300,500,700,900),
WARM = TEMPERATURE.Trapezoid(500,700,900,1100),
HOT = TEMPERATURE.Trapezoid(700,900,1200,1200);

TSolutionVariable POWER(0,1,100);
TFuzzySet
LOW = POWER.Trapezoid(0,0,30,50),
MEDIUM = POWER.Triangle(30,50,70),
HIGH = POWER.Trapezoid(50,70,100,100);

void FuzzyController(float Temperature, float &Power)
{
TEMPERATURE = Temperature;
If (TEMPERATURE is COLD) then (POWER should be HIGH);
If (TEMPERATURE is TEPID) then (POWER should be MEDIUM);
If (TEMPERATURE is WARM) then (POWER should be LOW);
Power = POWER.Defuzzification();
} 
```

给出以下错误：

```
fuzzyex1.cpp:6: error: no matching function for call to TFuzzySet::TFuzzySet(TFuzzySet)’
fuzzyset.h:14: note: candidates are: TFuzzySet::TFuzzySet(TFuzzySet&)
fuzzyset.h:13: note:                 TFuzzySet::TFuzzySet(TUniverse*)
fuzzyset.h:12: note:                 TFuzzySet::TFuzzySet()
fuzzyex1.cpp:7: error: no matching function for call to TFuzzySet::TFuzzySet(TFuzzySet)’
fuzzyset.h:14: note: candidates are: TFuzzySet::TFuzzySet(TFuzzySet&)
fuzzyset.h:13: note:                 TFuzzySet::TFuzzySet(TUniverse*)
fuzzyset.h:12: note:                 TFuzzySet::TFuzzySet() 
```

等等类似的代码行。

模糊集.h 如下：

```
#include "membership.h"
#include "universe.h"

class TFuzzySet
{ 
protected:
TMembershipDegree *Membership;
TUniverse *Universe;
unsigned Size;
public:
TFuzzySet();
TFuzzySet(TUniverse *AUniverse);
TFuzzySet(TFuzzySet &Set);
void SetUniverse(TUniverse *AUniverse);
TUniverse *GetUniverse();
TMembershipDegree &operator [](unsigned Index);
TMembershipDegree MembershipDegree(float Valor);
void Clear();
TFuzzySet operator or(TFuzzySet &Op2);
TFuzzySet operator and(TFuzzySet &Op2);
TFuzzySet operator not();
TFuzzySet operator and(TMembershipDegree &Op2);
TFuzzySet &operator =(TFuzzySet &Op);
~TFuzzySet() ;
  };
class TSolutionFuzzySet : public TFuzzySet
{
public:
TSolutionFuzzySet();
TSolutionFuzzySet(TUniverse *AUniverse);
TSolutionFuzzySet &operator=(TFuzzySet &Op);
float Sum();
float WeightedSum();
float Centroid();
float MaxMean() ;
 }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:30:20.287

临时对象不能绑定到非常量引用。

更改`TFuzzySet(TFuzzySet &Set);`为`TFuzzySet(const TFuzzySet &Set);`

# c# - 控制器返回时线程死亡

> ID：14560978
> 
> 赞同：1
> 
> 时间：2013-01-28T11:24:41.603
> 
> 标签：c#, asp.net-mvc, entity-framework, dependency-injection, structuremap

我正在开发一个繁重的 MVC 例程，它会延迟几分钟的处理时间。然后我调用一个 Ajax 请求，如果进程已正确启动，我想从控制器向接口发送一个答案，并继续使用线程执行它。但是，发送返回时，需要访问数据库，并且出现以下错误：对象已释放。

我的代码：

```
var entidade = this._repositorioDeTabelaDePremiacaoUPL.ObterPorID(dto.ID);
if(entidade.StatusDoServico == ListaDeStatusDoServico.tcProcessando.Id)
     return Content("{success:false}");

Thread thread = new Thread(() => this._servicoDeTabelaDePremiacaoUPL.GerarTabela(dto));
thread.Start();
GerenciadorDeUnidadeDeTrabalho.Corrente.Commit();

return Content("{success:true}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:41:52.753

我建议为您的线程使用额外的数据库上下文并在最后处理它。因为您的 Web 应用程序和额外线程的数据库上下文具有不同的生命周期。对于 Web 应用程序，它通常是每个 HttpContext - Web 请求，对于线程，它是线程的生命周期。您可以自己创建数据库上下文的新实例，也可以使用一些[条件对象构造](http://codebetter.com/jeremymiller/2009/01/19/conditional-object-construction-in-structuremap-i-e-fun-with-lambdas/)。

*笔记：*

*在应用程序的整个生命周期中重用数据库上下文并将其作为静态属性引用不是一个很好的做法（它可能导致并发问题并且上下文中的实体状态可能变得不一致）。更好的方法是在 HTTPContext 范围 ( `InstanceScope.HttpContext`) 中注册您的数据库上下文，然后在您的控制器上使用构造函数注入。*

**全球.asax**

```
ObjectFactory.Configure(i => { i.For<ContextoBase>().LifecycleIs(Lifecycles.GetLifecycle(InstanceScope.HttpContext)).Use<ContextoDaAplicacao>(); } 
```

**控制器**

```
public MyController(ContextoBase context){
    this.context = context;
}
// then use it in action methods (note: it will be automatically disposed at the end of the web request) 
```

# symfony - Doctrine2：调用未定义的方法 Doctrine\ORM\QueryBuilder::field()

> ID：14560981
> 
> 赞同：1
> 
> 时间：2013-01-28T11:24:50.530
> 
> 标签：symfony, orm, doctrine-orm

我正在尝试使用学说查询生成器创建查询：

```
public function searchAuthors($q)
{
    $qb = $this->createQueryBuilder('Author')
    ->field('person.firstname')->equals('test');

    return $qb->getQuery()->getResult();
} 
```

但我得到：

```
Fatal error: Call to undefined method Doctrine\ORM\QueryBuilder::field() in ... on line 18 
```

field() 方法来自学说文档网页。你能帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:48:44.683

`field()`仅存在于[Doctrine MongoDB ODM](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/Query/Builder.php#L365-L376)中（要使用它，请参见[此处](https://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/query-builder-api.html?highlight=field%28%29#getting-single-result)），而不存在于[Doctrine 2 ORM](https://github.com/doctrine/doctrine2/blob/2.3/lib/Doctrine/ORM/QueryBuilder.php)中。

# .net - Gallio NAnt 任务错误：无法解析 ITestProjectManager 服务

> ID：14560983
> 
> 赞同：1
> 
> 时间：2013-01-28T11:25:01.097
> 
> 标签：.net, nant, gallio

我在一个更大的构建文件中有以下 NAnt 目标：

```
<target name="load-gallio">
  <loadtasks assembly="lib/Gallio.NAntTasks.dll" />
</target>

<target name="test" depends="load-gallio">
    <gallio failonerror="true">
       <files>
          <include name="target/tests.dll" />
       </files>
   </gallio>
</target> 
```

tests.dll 在 Gallio 命令行运行器和 Icarus 中运行良好。当我运行“nant test”时，我得到以下信息：

```
load-gallio:

test:

   [gallio] Gallio NAnt Task - Version 3.4 build 12
   [gallio] Start time: 11:12
   [gallio] Stop time: 11:12 (Total execution time: 0.881 seconds)

BUILD FAILED

INTERNAL ERROR

Gallio.Runtime.RuntimeException: Could not resolve component for service type 'Gallio.Runner.Projects.ITestProjectM
anager' because there do not appear to be any components registered and enabled for that service type.
   at Gallio.Runtime.Extensibility.RegistryServiceLocator.ResolveNonDisabledDescriptor(Type serviceType)
   at Gallio.Runtime.Extensibility.RegistryServiceLocator.Resolve[TService]()
   at Gallio.Runner.TestLauncher.RunWithRuntime()
   at Gallio.Runner.TestLauncher.Run()
   at Gallio.NAntTasks.GallioTask.RunLauncher(TestLauncher launcher)
   at Gallio.NAntTasks.GallioTask.InternalExecute()
   at Gallio.NAntTasks.GallioTask.ExecuteTask()
   at NAnt.Core.Task.Execute()
   at NAnt.Core.Target.Execute()
   at NAnt.Core.Project.Execute(String targetName, Boolean forceDependencies)
   at NAnt.Core.Project.Execute()
   at NAnt.Core.Project.Run() 
```

为什么会这样？我是否缺少某种运行时设置/服务注册步骤？这是一个错误吗？提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:33:59.697

我倾向于直接调用运行器，因为它通常更灵活，并且通常会消除 nant 和实用程序之间的依赖关系。我不知道这是否适合您，但如果是一个例子，可能是：

```
<exec program="gallio.echo.exe" basedir="Utilities" verbose="true">
    <arg line="target/tests.dll"/>
    <arg value="/rt:XML"/>
    <arg value="/rd:Reports"/>
    <arg value="/no-echo-results"/>
    <arg value="/f:exclude Category:RunManually"/>
</exec> 
```

可以在[此处](http://www.gallio.org/wiki/doku.php?id=tools%3aoptions_for_echo)找到命令行参数的完整文档。

# iphone - 使用特定的电子邮件帐户从 Objective c 发送电子邮件

> ID：14560987
> 
> 赞同：-2
> 
> 时间：2013-01-28T11:25:27.003
> 
> 标签：iphone, objective-c, email, accounts

我们需要直接从应用程序发送电子邮件，但使用特定的公司电子邮件帐户。也就是说，用户可能在他的 iphone 中有多个电子邮件帐户，但应用程序需要自动获取用户的公司电子邮件，因此从该帐户发送消息。

我们尝试了几种方法都没有成功。要发送电子邮件，我们使用 SKPSMTPMessage。

我们已经能够使用通讯簿框架访问所有联系人，但我们无法访问用户电子邮件。

你知道有什么办法吗？我们一直在浏览这个网站和其他网站，但没有取得多大成功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:28:32.600

为了应用程序用户的安全，Apple 不允许这样做。**未经他的许可，Apple 不允许您发送电子邮件或授予您访问用户电子邮件的权限。**

# mysql - MySQL数据库合并两个数据库

> ID：14560992
> 
> 赞同：0
> 
> 时间：2013-01-28T11:25:36.600
> 
> 标签：mysql, database, merge

不久前我建立了两个 Wordpress 博客，显然都有不同的数据库。我最近通过更改表前缀将这些数据库合并为一个，因此这两个“实体”具有相同数量的表和相同的名称（因为它们来自 Wordpress 安装）但具有不同的前缀，即：

Blog1_tabledata1
Blog1_tabledata2
Blog1_tabledata3
Blog1_tabledata4
Blog2_tabledata1
Blog2_tabledata2
Blog2_tabledata3
Blog2_tabledata4

我现在意识到我需要合并这两个数据库（它们都使用相同的表），以便它们可以在同一个 Wordpress 实例中使用（稍后由标签等分隔）。

这样做最简单的方法是什么？

（请注意，我是从 MySQL 的角度提出这个问题的——这不是 Wordpress 的问题！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:32:27.883

如果您绝对不是在寻找 wordpress 解决方案，那意味着您没有查看所有域。我的意思是，您没有查看数据的*含义*。这可能是个问题。但尽管如此：

1.  找出外键。如果表是 MyIsam 而不是 InnoDB，它们将是隐式的。找出哪个 ID 指向哪个字段。
2.  从一个数据库中选择并插入另一个数据库。这意味着您将一个表的行添加到目标数据库的等效项中。自动增量行会很好。但是对于外键（显式和隐式）字段，这里是麻烦的开始。
3.  如果您插入一个用户，则该用户将获得一个新 ID -> 您必须在旧数据库中找到该用户 ID 的等价物，以便您可以插入具有正确 ID 的外键。这很棘手，如果不将其作为 wordpress 问题，我们就无法为您提供更多帮助：只需弄清楚它们应该是哪些行 :)。它是数据库//域特定的。（我的意思是你不能仅仅通过查看字段来弄清楚，你必须知道它们的一些含义）
4.  如果数据库是正确的，这应该可以工作，但我不确定你是否遇到重复问题（所有都应该继续使用 ID，并且你在步骤 3 中使用唯一且连接的 ID 修复了它。但如果你的域没有想要两个帐户，两个页面或两个任何东西（标签？）具有相同的名称，你仍然有问题。但同样，这是特定于域的逻辑，你特别要求不要去那里。

# jquery - jQuery 数据表；如何包含可选的删除链接并避免显示“点击编辑”？

> ID：14560993
> 
> 赞同：0
> 
> 时间：2013-01-28T11:25:45.533
> 
> 标签：jquery, datatables

我在使用下面的数据表时遇到了 2 个问题；

```
 var otable = $('#tradeList').dataTable({
        "bServerSide": true,
        "sAjaxSource": serverDataSource,
        "bProcessing": true,
        "bLengthChange": false,
        "iDisplayLength": "15",

        "bPaginate": true,
        "sPaginationType": "full_numbers",
        "aoColumns": [
                     {
                         "sName": "ID",
                         "bSearchable": false,
                         "bSortable": false,
                         "bVisible": false
                     },
                     { "sName": "TRADENAME" },
                    {
                        "sName": "TRADEID",
                        "bSearchable": false,
                        "bSortable": false,
                        "fnRender": function (oObj) {
                            // oObj.aData[2] returns the TradeId
                            if (oObj.aData[2] == "0")
                                //return "<a href='" + deleteUrl + "?id=" + oObj.aData[2] + "'>Delete</a>";
                                return "<button onclick=" + dataService.deleteTrade(oObj.aData[2], fnDraw, deleteUrl ) + ")>";
                            else
                                return "";
                        }
                    }
            ]
        }).makeEditable({
        sUpdateURL: updateUrl,
        sAddURL: addUrl,
        sDeleteURL: deleteUrl
    }); 
```

删除按钮是可选的。因此，当我不想显示它时，如何停止显示默认的“单击以编辑”文本。我可以看到它来自 Jquery 库 jeditable。第二个问题我将在一个单独的问题中提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:46:20.480

要删除“单击以编辑”，您必须将属性“占位符”配置为在 makeEditable 函数中为空。你的情况是：

```
var otable = $('#tradeList').dataTable({
    "bServerSide": true,
    "sAjaxSource": serverDataSource,
    "bProcessing": true,
    "bLengthChange": false,
    "iDisplayLength": "15",

    "bPaginate": true,
    "sPaginationType": "full_numbers",
    "aoColumns": [
                 {
                     "sName": "ID",
                     "bSearchable": false,
                     "bSortable": false,
                     "bVisible": false
                 },
                 { "sName": "TRADENAME" },
                {
                    "sName": "TRADEID",
                    "bSearchable": false,
                    "bSortable": false,
                    "fnRender": function (oObj) {
                        // oObj.aData[2] returns the TradeId
                        if (oObj.aData[2] == "0")
                            //return "<a href='" + deleteUrl + "?id=" + oObj.aData[2] + "'>Delete</a>";
                            return "<button onclick=" + dataService.deleteTrade(oObj.aData[2], fnDraw, deleteUrl ) + ")>";
                        else
                            return "";
                    }
                }
        ]
    }).makeEditable({
    sUpdateURL: updateUrl,
    sAddURL: addUrl,
    sDeleteURL: deleteUrl,
    aoColumns: [
    {
        placeholder : ""
    },
    {
        placeholder : ""
    },
    {
        placeholder : ""
    }
]
}); 
```

# matlab - 在 Matlab 中输出循环结果

> ID：14560994
> 
> 赞同：0
> 
> 时间：2013-01-28T11:25:48.783
> 
> 标签：matlab, loops

您好，有此代码，我不知道如何将输出结果与每个像素一起放置。我认为输出代码定义不明确。

编辑：

我将尝试解释代码：

```
% I have an image

    imagen1=imread('recor.tif');
    imagen2= double(imagen1);
    band1= imagen2(:,:,1);

% I preallocate the result (the image size is 64*89*6)
    yvan2= zeros(61,89,1);

% For every pixel of the image, I want to get one result (each one is different).
    for i = 1 : nfiles
        for j = 1 : nrows
            for i = 1:numel(band1)

% I'm doing this because I've to multiply the results of this interpolation with that result a2ldb1y= ldcm_1(:,1). This vector has a length of 2151x1 and I need to muliply the result of the interpolation for (101:267) position on the vector, this is the reason because I'm doing the interpolation since 101 to 267 (also because I don't have that values).

            interplan= interp1(van1,man2,t2,'spline');
             ma(96) = banda1a(i); % I said 96, because I want to do an interpollation 
            end                
            van1= [101 96 266]';
            mos1= ma(134);
            van2= [0 pos1 0];

            t= 101:267;
            t2= t';
            xi= 101:1:267;
            xi2=xi';
            interplan= interp1(van1,van2,t2,'spline');

% After this, I 'prepare' the vector.

            out=zeros(2151,1)
            out(101:267) = interplan;

% And then, I do all this operation (are important for the result) 

            a2ldb1y= ldcm_1(:,1); 
            a2ldsum_pesos1= sum(a2ldb1y);
            a2l7dout1_a= a2ldb1y.*out;
            a2l7dout1_b=  a2l7dout1_a./a2ldsum_pesos1;
            a2l7dout1_c= sum(a2l7dout1_b);

% And the result a2l7dout1_c I want it for every pixel (the results are different because every pixel has a different value...)
           **yvan2(:,:,1)= [a2l7dout1_c];**

        end 
    end 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:23:01.323

我在这里在黑暗中拍摄，但我认为您正在寻找：

```
yvan2(i, j, 1)= a2l7dout1_c; 
```

代替：

```
yvan2(:,:,1)= [a2l7dout1_c]; 
```

因此，您的输出应该在`yvan2`循环完成后存储在变量中。

### 附言

您的代码中的一些问题：

1.  为什么你有两个循环使用相同的迭代变量`i`？您的计算可能不正确，因为`i`正在被两个`for`循环修改。

2.  为什么你甚至需要第二个循环？每次迭代都会超出`ma(134)`前一次迭代设置的值。您可以将整个循环替换为：

    ```
    ma(134) = banda1a(numel(band1)) 
    ```

3.  您不应该使用名称`i`和`j`for 循环变量。它们已经为虚数单位（即`sqrt(-1)`）保留，因此 MATLAB 需要额外的处理时间来解析名称。您宁愿使用其他循环变量名称，甚至`ii`和`jj`.

# android - 在android中上传压缩图像

> ID：14560996
> 
> 赞同：1
> 
> 时间：2013-01-28T11:25:55.883
> 
> 标签：android, image, performance, upload, compression

> 我必须制作一个 android 应用程序，用户可以在其中浏览图库或相机中的图像。然后将图像转换为字符串，然后上传到本地服务器。在服务器上，图像被再次转换并存储为图像。我压缩了图片但是无法上传请帮帮我

下面是代码..

```
 package com.example.hdfcuploadapp;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import android.util.Base64;
import android.app.Activity;``
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Point;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.PopupWindow;

public class MainActivity extends Activity {

    private static final int REQ_CODE_PICK_IMAGE = 1;
    private static final int CAMERA_REQUEST = 1888;
    private static View popupView = null;
    private static PopupWindow popupWindow = null;
    private static Button buttonBrowse = null;
    private static String compressedImage = null;
    private static Point position = null;
    private static Bitmap imageSelected = null;
    private static String selectedImageRealPath = null;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         Button buttonUpload = (Button) findViewById(R.id.buttonUpload);

         buttonUpload.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });

      buttonBrowse = (Button) findViewById(R.id.buttonBrowse);

        buttonBrowse.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if(position!= null){
                    showPopup(MainActivity.this, position);
                }           
            }

            @SuppressWarnings("deprecation")
            private void showPopup(final Activity activity, Point position) {

                int popupWidth = 120;
                int popupHeight = 130;

                LinearLayout linearLayout = (LinearLayout) findViewById(R.id.popup);

                LayoutInflater layoutInflater = (LayoutInflater) activity.getSystemService(LAYOUT_INFLATER_SERVICE);

                 popupView = layoutInflater.inflate(R.layout.popup, linearLayout);

                 popupWindow = new PopupWindow(activity);
                 popupWindow.setContentView(popupView);
                 popupWindow.setWidth(popupWidth);
                 popupWindow.setHeight(popupHeight);

                 int offset_X = 85;
                 int offset_Y = 5;

                 popupWindow.setBackgroundDrawable(new BitmapDrawable());
                 popupWindow.showAtLocation(popupView, Gravity.NO_GRAVITY, position.x + offset_X, position.y + offset_Y);

            }
        });     
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus){

        int[] location = new int[2];
        buttonBrowse.getLocationOnScreen(location);
        position = new Point();
        position.x = location[0];
        position.y = location[1];

    }

    public void buttonGallery_Click(View v){

        Intent intent = new Intent(
                Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(intent, REQ_CODE_PICK_IMAGE);
    }

    public void buttonTakePhoto_Click(View v){
        popupWindow.dismiss();
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, CAMERA_REQUEST);
    }

    @Override 
    protected void onActivityResult(int requestCode, int resultCode, 
               Intent intent){

        switch(requestCode) { 
        case REQ_CODE_PICK_IMAGE:
            if(resultCode == RESULT_OK){  
             Uri selectedImageUri = intent.getData();
               selectedImageRealPath = getRealPathFromURI(selectedImageUri);
               imageSelected = BitmapFactory.decodeFile(selectedImageRealPath);
               compressedImage = imageCompression(selectedImageRealPath);  

                final ImageView imageViewPhoto = (ImageView) findViewById(R.id.imageViewPhoto);
               imageViewPhoto.setImageBitmap(imageSelected);

            }
            break;

        case CAMERA_REQUEST:
            if(resultCode == RESULT_OK){
                Uri selectedImageUri = intent.getData();
                selectedImageRealPath = getRealPathFromURI(selectedImageUri);
                imageSelected = (Bitmap) intent.getExtras().get("data");
                MediaStore.Images.Media.insertImage(getContentResolver(), imageSelected, String.valueOf(System.currentTimeMillis()), "This is an Image.");
                compressedImage = imageCompression(selectedImageRealPath);

                final ImageView imageViewPhoto = (ImageView) findViewById(R.id.imageViewPhoto);
                imageViewPhoto.setImageBitmap(imageSelected);
            }
            break;
        }
        popupWindow.dismiss();  
    }

    private String imageCompression(String filePath) {
        File imageFile = new File(filePath);
        FileInputStream fis = null;

        try
        {
          fis = new FileInputStream(imageFile); 
        }
        catch(FileNotFoundException e)
        {
            e.printStackTrace();
        }

        Bitmap bm = BitmapFactory.decodeStream(fis);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bm.compress(Bitmap.CompressFormat.JPEG, 90, baos );

        byte[] b = baos.toByteArray();

        return Base64.encodeToString(b, Base64.DEFAULT);
}

    public String getRealPathFromURI(Uri contentUri)
    {
        try
        {
            String[] proj = {MediaStore.Images.Media.DATA};
            @SuppressWarnings("deprecation")
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        catch (Exception e)
        {
            return contentUri.getPath();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T18:08:38.180

```
 Image ivcard = Base64ToImage(vcard);
    //Image thumb = image.GetThumbnailImage(120, 120, ()=>false, IntPtr.Zero);
   // thumb.Save(Path.ChangeExtension(fileName, "thumb"));
    try
    {
        string x = System.DateTime.Now.Hour.ToString() + System.DateTime.Now.Minute.ToString() + System.DateTime.Now.Second.ToString() + System.DateTime.Now.Millisecond.ToString();
        string ipath1;
        ipath1 = "ma\\imagesc1" + x + ".jpg";

        ivcard.Save(Server.MapPath(ipath1), System.Drawing.Imaging.ImageFormat.Jpeg);
    }
    catch { }

private Image Base64ToImage(string base64String)
{
    // Convert Base64 String to byte[]
    byte[] imageBytes = Convert.FromBase64String(base64String);
    using (MemoryStream ms = new MemoryStream(imageBytes, 0,
                                     imageBytes.Length))
    {
        // Convert byte[] to Image
        ms.Write(imageBytes, 0, imageBytes.Length);
        Image image = Image.FromStream(ms, true);
        return image;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T09:38:12.667

```
public void uploadImage(String filePath) {

   File imgFile=new File(filePath);
    RequestParams requestParamsForUploadImage=new RequestParams();
    requestParamsForUploadImage.put("file",imgFile);        

    AsyncHttpClient client = new AsyncHttpClient();

    client.post("URL of server upload file",
            requestParamsForUploadImage, new JsonHttpResponseHandler() {
                // response code '200'
                @Override
                public void onSuccess(int statusCode, org.apache.http.Header[] headers, org.json.JSONObject response) {
                    //Image is uploaded successfully...
                }

                // When the response returned by REST has Http
                // response code other than '200' such as '404',
                // '500' or '403' etc
                @Override
                public void onFailure(int statusCode, org.apache.http.Header[] headers, java.lang.Throwable throwable, org.json.JSONObject errorResponse) {
                  //Failed to upload
                }

            });
} 
```

因为我使用[AsyncHttpClient](http://loopj.com/android-async-http/doc/com/loopj/android/http/AsyncHttpClient.html)库来执行文件上传。不要忘记将它添加到您的项目中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:01:26.687

```
public  String EncodeToString(Bitmap image)
{                   
     Bitmap immagex=image;
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     immagex.compress(Bitmap.CompressFormat.JPEG, 100, baos);
     byte[] b = baos.toByteArray();
     String imageEncoded = Base64.encodeToString(b,Base64.DEFAULT);            
     return imageEncoded;
} 
```

确保在将位图传递给此方法时尝试尽可能减小位图的大小，并尽可能在后台线程中运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-27T05:52:47.087

压缩图片到**75%**然后上传。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.JPEG, 75, baos);
byte[] imageBytes = baos.toByteArray();
String encodedImage = Base64.encodeToString(imageBytes, Base64.DEFAULT); 
```

# javascript - 在 Javascript 中使用 Haversine 公式

> ID：14560999
> 
> 赞同：36
> 
> 时间：2013-01-28T11:26:04.667
> 
> 标签：javascript, haversine

我正在尝试使用 Haversine 距离公式（如在此处找到：[http](http://www.movable-type.co.uk/scripts/latlong.html) ://www.movable-type.co.uk/scripts/latlong.html ）但我无法让它工作，请参阅以下代码

```
 function test() { 
    var lat2 = 42.741; 
    var lon2 = -71.3161; 
    var lat1 = 42.806911; 
    var lon1 = -71.290611; 

    var R = 6371; // km 
    //has a problem with the .toRad() method below.
    var dLat = (lat2-lat1).toRad();  
    var dLon = (lon2-lon1).toRad();  
    var a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
                    Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
                    Math.sin(dLon/2) * Math.sin(dLon/2);  
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    var d = R * c; 

    alert(d); 
} 
```

错误是：

```
Uncaught TypeError: Object -0.06591099999999983 has no method 'toRad' 
```

我理解是因为它需要执行以下操作：

```
Number.prototype.toRad = function() {
return this * Math.PI / 180;
} 
```

但是当我把它放在函数下面时，它仍然会返回相同的错误消息。如何使它使用辅助方法？或者是否有另一种方法来编写代码以使其工作？谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-28T11:51:52.843

此代码有效：

```
Number.prototype.toRad = function() {
   return this * Math.PI / 180;
}

var lat2 = 42.741; 
var lon2 = -71.3161; 
var lat1 = 42.806911; 
var lon1 = -71.290611; 

var R = 6371; // km 
//has a problem with the .toRad() method below.
var x1 = lat2-lat1;
var dLat = x1.toRad();  
var x2 = lon2-lon1;
var dLon = x2.toRad();  
var a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
                Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);  
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; 

alert(d); 
```

注意我是如何定义 x1 和 x2 的。在以下位置玩它：[https ://tinker.io/3f794](https://tinker.io/3f794)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-05-19T03:57:42.837

这是基于其他 3 个答案的重构函数！

请注意，坐标参数是 [longitude, latitude]。

```
function haversineDistance(coords1, coords2, isMiles) {
  function toRad(x) {
    return x * Math.PI / 180;
  }

  var lon1 = coords1[0];
  var lat1 = coords1[1];

  var lon2 = coords2[0];
  var lat2 = coords2[1];

  var R = 6371; // km

  var x1 = lat2 - lat1;
  var dLat = toRad(x1);
  var x2 = lon2 - lon1;
  var dLon = toRad(x2)
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
    Math.sin(dLon / 2) * Math.sin(dLon / 2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  var d = R * c;

  if(isMiles) d /= 1.60934;

  return d;
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-02-15T10:43:53.743

ES6 JavaScript/NodeJS 重构版本：

```
 /**
     * Calculates the haversine distance between point A, and B.
     * @param {number[]} latlngA [lat, lng] point A
     * @param {number[]} latlngB [lat, lng] point B
     * @param {boolean} isMiles If we are using miles, else km.
     */
    const haversineDistance = ([lat1, lon1], [lat2, lon2], isMiles = false) => {
      const toRadian = angle => (Math.PI / 180) * angle;
      const distance = (a, b) => (Math.PI / 180) * (a - b);
      const RADIUS_OF_EARTH_IN_KM = 6371;

      const dLat = distance(lat2, lat1);
      const dLon = distance(lon2, lon1);

      lat1 = toRadian(lat1);
      lat2 = toRadian(lat2);

      // Haversine Formula
      const a =
        Math.pow(Math.sin(dLat / 2), 2) +
        Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);
      const c = 2 * Math.asin(Math.sqrt(a));

      let finalDistance = RADIUS_OF_EARTH_IN_KM * c;

      if (isMiles) {
        finalDistance /= 1.60934;
      }

      return finalDistance;
    }; 
```

有关针对已接受答案的测试，请参阅 codepen：[https ://codepen.io/harrymt/pen/dyYvLpJ?editors=1011](https://codepen.io/harrymt/pen/dyYvLpJ?editors=1011)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-28T11:38:04.987

为什么不尝试直接的解决方案？无需扩展 Number 原型，只需将 toRad 定义为常规函数：

```
function toRad(x) {
   return x * Math.PI / 180;
} 
```

然后`toRad`到处打电话：

```
var dLat = toRad(lat2-lat1); 
```

扩展 Number 原型并不总是按预期工作。例如调用 123.toRad() 不起作用。我认为如果你做`var x1 = lat2 - lat1; x1.toRad();`的比做的更好`(lat2-lat1).toRad()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T11:42:30.110

在函数中调用这些扩展之前，您需要扩展 Number 原型。

所以只要确保

```
Number.prototype.toRad = function() {
  return this * Math.PI / 180;
} 
```

在你的函数被调用*之前被调用。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T11:46:55.343

> 当我把它放在函数下面时

你只需要把它放在你调用的点之上`test()`。函数`test`本身的声明位置无关紧要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-24T06:22:15.690

另一个减少冗余并且与 Google LatLng 对象兼容的变体：

```
 function haversine_distance(coords1, coords2) {

     function toRad(x) {
         return x * Math.PI / 180;
    }

  var dLat = toRad(coords2.latitude - coords1.latitude);
  var dLon = toRad(coords2.longitude - coords1.longitude)

  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos(toRad(coords1.latitude)) * 
          Math.cos(toRad(coords2.latitude)) *
          Math.sin(dLon / 2) * Math.sin(dLon / 2);

  return 12742 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-14T16:32:26.407

这是 JavaScript 中另一个重构的答案：

```
getHaversineDistance = (firstLocation, secondLocation) => {
    const earthRadius = 6371; // km 

    const diffLat = (secondLocation.lat-firstLocation.lat) * Math.PI / 180;  
    const diffLng = (secondLocation.lng-firstLocation.lng) * Math.PI / 180;  

    const arc = Math.cos(
                    firstLocation.lat * Math.PI / 180) * Math.cos(secondLocation.lat * Math.PI / 180) 
                    * Math.sin(diffLng/2) * Math.sin(diffLng/2)
                    + Math.sin(diffLat/2) * Math.sin(diffLat/2);
    const line = 2 * Math.atan2(Math.sqrt(arc), Math.sqrt(1-arc));

    const distance = earthRadius * line; 

    return distance;
}

const philly = { lat: 39.9526, lng: -75.1652 }
const nyc = { lat: 40.7128, lng: -74.0060 }
const losAngeles = { lat: 34.0522, lng: -118.2437 }

console.log(getHaversineDistance(philly, nyc)) //129.61277152662188
console.log(getHaversineDistance(philly, losAngeles)) //3843.4534005980404 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-12-17T14:27:29.327

这是上面talkol解决方案的java实现。他或她的解决方案对我们非常有效。我不想回答这个问题，因为最初的问题是针对 javascript 的。我只是分享给定 javascript 解决方案的 java 实现，以防其他人发现它有用。

```
// this was a pojo class we used internally...
public class GisPostalCode {

    private String country;
    private String postalCode;
    private double latitude;
    private double longitude;

    // getters/setters, etc.
}

public static double distanceBetweenCoordinatesInMiles2(GisPostalCode c1, GisPostalCode c2) {

    double lat2 = c2.getLatitude();
    double lon2 = c2.getLongitude();
    double lat1 = c1.getLatitude();
    double lon1 = c1.getLongitude();

    double R = 6371; // km
    double x1 = lat2 - lat1;
    double dLat = x1 * Math.PI / 180;
    double x2 = lon2 - lon1;
    double dLon = x2 * Math.PI / 180;

    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) *
        Math.sin(dLon/2) * Math.sin(dLon/2);

    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double d = R * c;

    // convert to miles
    return d / 1.60934;
} 
```