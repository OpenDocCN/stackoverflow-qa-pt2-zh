# StackOverflow 问答 12609000-12609999

# ruby-on-rails - 类继承和 Ruby 模块

> ID：12609004
> 
> 赞同：1
> 
> 时间：2012-09-26T19:28:35.933
> 
> 标签：ruby-on-rails, ruby

为了清楚起见，我决定将 Rails 应用程序分解为不同的模块，作为其中的一部分，我希望每个模块都有自己的 ApplicationController。所以我经历并为每个模块定义了一个应用程序控制器，如下所示：

```
module Login
  class ApplicationController < ::ApplicationController
    ...
  end
end 
```

然后我会在登录模块中创建一个不同的控制器：

```
module Login
  class HomeController < ApplicationController

  end
end 
```

我的期望是，这将首先搜索应用程序控制器的登录模块，但据我所见，它实际上是在继承全局应用程序控制器（我在 Login::ApplicationController 中所做的任何声明都不会被拾取）。我已经搜索了一些关于此的信息，但无法弄清楚为什么它在顶级名称空间中使用 ApplicationController 而不是 Login 中的那个。让 HomeController 从 Login::ApplicationController 继承它工作得很好，但我想了解为什么它在未来没有 Login:: 前缀时不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:48:11.947

尝试

```
module Login
  class HomeController < Login::ApplicationController

  end
end 
```

# java - Netbeans 7.2 中的输出窗口无法正确显示泰文符号

> ID：12609006
> 
> 赞同：1
> 
> 时间：2012-09-26T19:28:53.813
> 
> 标签：java, utf-8, netbeans-7, output-window

需要你的帮助。我有一个烦人的问题：在 Netbeans 7.2 输出窗口中无法漂亮地打印泰语符号：

System.out.println(...); 之后的输出 ??????????????????[TH_WORD]

如前所述，我更改了 netbeans.conf，但没有帮助；我将项目属性-> 源编码更改为 UTF-8，源看起来不错，源中的所有泰文符号都可以正确打印。但是如何更改 NB 输出窗口的设置呢？

Windows 7 64bit，Netbeans 7.2（我将 NB 运行为“C:\Program Files (x86)\NetBeans 7.2\bin\netbeans64.exe”--locale en_US）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:56:07.227

得益于对话[Java：如何检测（和更改？）System.console 的编码？](https://stackoverflow.com/questions/2415597/java-how-to-detect-and-change-encoding-of-system-console)

该解决方案的建立和应用：

PrintStream out = new PrintStream(System.out, true, "UTF-8");

确实使用适当的 import java.io.*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-12T04:28:17.103

对于阿塞拜疆语，我试过这个：

*   添加`System.setOut(new PrintStream(System.out, true, "UTF8"));`到我的代码中。改正后变了？标记成不同的符号。之前的单词**tədarük**显示为**t?dar?k**。但现在它**站在 tЙ™darГјk**
*   然后我添加`-Dfile.encoding=utf-8`到项目属性的运行参数中，没办法
*   然后用 测试`-Duser.language=az`，结果是一样的
*   更改了输出控制台上的字体（右键单击控制台和设置窗口将`Monospaced`字体更改为`Arial`，没有任何改变

它没有帮助。只有在更改 Netbeans 配置后它才起作用。我打开了 netbeans.conf，在我的情况下它位于 C:\Program Files\NetBeans 7.4\etc 文件夹中，在 linux 上它将是 /usr/local/netbeans-7.4/etc/netbeans.conf

我在引号之前添加`-J-Dfile.encoding=UTF-8`到末尾。`netbeans_default_options`重新启动 NetBeans。现在它甚至可以使用`Monospaced`字体并且无需设置`-Duser.language`参数。

所以我只需要两件事。

1.  添加`-J-Dfile.encoding=UTF-8`到`netbeans_default_options`netbeans.conf
2.  更改代码中的输出字符串编码：`System.setOut(new PrintStream(System.out, true, "UTF8"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:17:05.553

解决方案是将用于控制台输出窗口的字体更改为包含泰语字符的字体。在 Eclipse 中，这可以在 Preferences 对话框中进行。我使用 NetBeans 已经至少 5 年了，但我 99% 确信那里也有类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T03:22:45.830

您可以在 mycomputer 中添加系统变量

```
JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF8 
```

# cassandra - 无法在 Cassandra 1.2 中执行范围查询

> ID：12609008
> 
> 赞同：2
> 
> 时间：2012-09-26T19:28:59.917
> 
> 标签：cassandra, fluentcassandra

我正在通过 FluentCassandra 和 C# 访问 Cassandra 1.2。我使用了 DataStax 安装包。我遇到的问题是我无法执行下面显示的范围查询。

我尝试了下表创建方法：

```
CREATE TABLE Test (KEY text, p1 int, p2 int, p3 int, p4 int, p5 int, p6 int, 
p7 int, p8 int, data text, PRIMARY KEY (KEY))

CREATE TABLE Test (KEY text, p1 int, p2 int, p3 int, p4 int, p5 int, p6 int, 
p7 int, p8 int, data text, PRIMARY KEY (KEY, p1, p2, p3, p4, p5, p6, p7, p8)) 
```

这是查询：

```
SELECT Data FROM Test WHERE KEY IN ('           0', '           1', 
'           2', '           3', '           4', '           5', '           6', 
'           7', '           8', '           9', '          10', '          11', 
'          12', '          13', '          14', '          15') AND 
p1 >= 10 AND p1 <= 40 AND p2 >= 20 AND p2 <= 80 AND 
p3 >= 30 AND p3 <= 120 AND p4 >= 40 AND p4 <= 160 AND 
p5 >= 50 AND p5 <= 200 AND p6 >= 60 AND p6 <= 240 AND 
p7 >= 70 AND p7 <= 280 AND p8 >= 80 AND p8 <= 320; 
```

错误是：

> “使用 Equal 运算符的 by-columns 子句中没有索引列”/“PRIMARY KEY 部分 p2 不能被限制（前面的部分 p1 要么不受限制，要么受非 EQ 关系限制）”

我的连接构建器：

```
ConnectionBuilder builder = new ConnectionBuilder(CDBkeyspace, 
new Server("localhost"), true, 0, 100, 0, ConnectionType.Framed, 4096, 
ConsistencyLevel.QUORUM, Apache.Cassandra.ConsistencyLevel.QUORUM, "3.0.0"); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:21:35.117

由于错误指定 P2 不能被限制，除非 P1 上有 EQUAL 运算符所有参数，直到您指定的最后一个必须具有相等性并且只有最后一个可以具有不相等性

# php - 在mysql中前进？

> ID：12609014
> 
> 赞同：-2
> 
> 时间：2012-09-26T19:29:43.257
> 
> 标签：php, mysql, json

PHP 文件：

```
<?php
require 'JSON.php'; // JSON.php
try
{
    $connection = mysql_connect("localhost", "root", "autoset") or die("Could not connect: " . mysql_error());
    mysql_query("SET NAMES utf8", $connection);
    mysql_select_db(test, $connection);
    $sql = "select * from Evaluation";
    $sth = mysql_query($sql) or die("Query error: " . mysql_error());
    // JSON 
    $json = new Services_JSON();
    $rows = array();
    while ($r = mysql_fetch_assoc($sth))
    {
        $rows[] = $r;
    }
    $output = $json->encode($rows);
    echo $output;
    mysql_close($connection);
}
catch (Exception $e)
{
    echo $e->getMessage();
    // Note: Log the error or something
}
?> 
```

这是我的 JSON 结果：

```
[{"ENTERPRISE":"22","PERIOD":"53","EPS":"54","STOCKPRICE":"24","PER":"33"}] 
```

我怎样才能得到没有像这样的列名的字段？

```
[22, 55, 54, 24, 33] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:50:14.323

如果您不希望 MySQL 数据作为由列名作为键的关联数组，并且总是想要一个带有数字索引的普通数组，请在从查询资源中提取**$row时使用****mysql_fetch_array($sth,MYSQL_NUM)**而不是**mysql_fetch_assoc($sth) 。**您应该在结果 JSON 中得到一个数组数组，而不是对象数组：

 **```
[[22, 55, 54, 24, 33]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:31:18.910

使用 解码它[`json_decode`](http://php.net/manual/en/function.json-decode.php)，然后从那里，[`array_values`](http://php.net/manual/en/function.array-values.php)在字典上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:35:46.170

```
<?php
$values_data = array_values($data_from_sql);
$values_without_columns = json_encode($values_data );
?> 
```**

# mysql - MySQL 不工作

> ID：12609016
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:30:00.957
> 
> 标签：mysql, mysql-error-1064, notin

我正在努力将 MySQL 语句放在一起，我想知道它有什么问题。为什么这个 MySQL 语句不起作用？

```
SELECT * 
FROM  `deals` 
WHERE CATEGORY NOT 
IN  'Construction & Repair'
AND (
EXPIRE_DATE >= NOW() 
OR EXPIRE_DATE IS NULL
)
AND LOCATION =  'Melbourne'
AND STATUS =  'Active'
LIMIT 0 , 1000 
```

我收到以下错误消息：

**#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“Construction & Repair”AND (EXPIRE_DATE >= NOW() OR EXPIRE_DATE IS NULL) AND' 附近使用正确的语法**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:32:05.457

把它放在括号里

```
WHERE CATEGORY NOT 
IN  ('Construction & Repair') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:32:16.860

我认为你的语法是错误的，你希望它是：

```
 NOT IN ("item1", "item2") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:33:10.730

采用

```
SELECT * 
FROM  `deals` 
WHERE CATEGORY = 'Construction & Repair'
AND (
EXPIRE_DATE >= NOW() 
OR EXPIRE_DATE IS NULL
)
AND LOCATION =  'Melbourne'
AND STATUS =  'Active'
LIMIT 0 , 1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:33:12.223

IN 之后的任何内容都应该放在括号中。

```
IN('Construction & Repair') 
```

# lua - 日冕的重力来源是身体

> ID：12609018
> 
> 赞同：1
> 
> 时间：2012-09-26T19:30:04.520
> 
> 标签：lua, physics, coronasdk

我想让一个月亮围绕一个行星旋转，或者类似的东西。那么有什么我可以要求的东西来`physics.setGravity(0,0)`改变重力拉向的位置，特别是把它指定为物理体？如果没有，只需一个特定的 xy 坐标就可以了。

```
local moon = display.newImage ("moon.png")
physics.addBody(moon, {bounce=0, density=1.0})
local earth = display.newImage ("earth.png")
physics.addBody(earth, {bounce=0, density=1.0}) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:14:07.097

不 - 你可以改变重力，但它只会在你设置的方向上拉/推，永远不会到任何点。当月球/其他与传感器之间的碰撞事件开始时，您可能会在地球周围使用传感器（不可见）并施加力将物体拉向它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:08:37.463

`setGravity`我认为您应该使用以下方式旋转图像，而不是使用该选项：

```
local physics = require("physics")
physics.start()
physics.setGravity(0, 0)
display.setStatusBar( display.HiddenStatusBar )

local background = display.newImage( "space.png", true )
background.x = display.contentWidth / 2
background.y = display.contentHeight / 2

local earth = display.newImage( "earth.png" )
earth.x = 100; earth.y = 200
earth.xScale = 0.7
earth.yScale = 0.7
physics.addBody( earth, {radius=40 } )
earth.bodyType = "static"

local moon = display.newImage( "moon.png", 40, 40)
moon.x = earth.x + 80
moon.y = earth.y
moon.xScale = 0.3
moon.yScale = 0.3
moon.rotation = 100  
physics.addBody( moon, {radius=10 } )
moon.bodyType = "dynamic"

myJoint = physics.newJoint( "pivot", moon, earth, earth.x, earth.y )

local orbit = function( event )    
        moon.rotation = moon.rotation + 1.5
end 
```

请注意，我并不是真的在胡说八道，而是在函数`setGravity`中定义了旋转的速度。`orbit`

上面的代码假设你只有图像文件来代表你的行星体。如果是这样，您将不得不使用上面的常量（`earth.x`和`earth.y`，缩放值等）以使整个系统看起来适合您选择的图像。

祝你好运！

# django - Django 模型分组相关

> ID：12609033
> 
> 赞同：0
> 
> 时间：2012-09-26T19:30:46.407
> 
> 标签：django, django-models, group-by, distinct

我将 Django 1.4 与 MySQL 一起使用。我有以下型号：

```
Event:
    title = CharField()
    description = CharField()

Dates:
   event = ForeignKey(Event)
   location = ForeignKey(Location)
   date = DateTimeField()
   participants = IntegerField()

Location:
   ........ 
```

我需要为参加人数大于 X 的每个活动（和地点）选择第一个可用日期

在 MySQL 查询中，它只是 Date 表上的一个选择，其中包含按事件分组的事件和位置的连接。但这在 Django 中是不可能的，并且 MySQL 不支持 distinct("field")

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:30:27.010

如下：

```
event_dates = Dates.objects.filter(participants__gte=200
    ).values('event').annotate(Max('date')) 
```

这将转化为 MYSQL

```
SELECT MAX(date) FROM dates GROUP BY event WHERE participants > 200; 
```

然后你可以访问它

```
for event_date in event_dates:
    print event_date.0 
```

# object - 如何使用在 SystemVerilog 中对其进行操作的方法获取实例的名称？

> ID：12609036
> 
> 赞同：5
> 
> 时间：2012-09-26T19:31:04.107
> 
> 标签：object, verilog, system-verilog

有什么方法可以获取它在 SystemVerilog 中操作的对象的名称？

就像实施

```
object1.printName() 
```

应该打印字符串

```
object1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T03:51:10.633

不，语言中没有为类执行此操作的机制。

对于模块，您可以使用`%m`格式说明符来显示分层名称。但是对于类，输出使用`%m`显示类类型名称，而不是实例名称。（至少那是 Incisive 和 Questa 观察到的行为。）还要注意，`%m`如果从函数中调用，它将包括函数名称。

例子：

```
module test;

  // Print %m in a module
  function void printName();
    $display("%m");
  endfunction

  class foo;

    // Print %m in a class
    virtual function void printName();
      $display("%m");
    endfunction

  endclass

  foo foo_inst = new;

endmodule

module top;
   test test_inst();

   initial begin
     test_inst.foo_inst.printName();
     test_inst.printName();
   end
endmodule 
```

输出：

```
top.test_inst.foo.printName
top.test_inst.printName 
```

如果来自的输出`%m`有用，您可以使用字符串将其捕获`$sformatf`，然后对其进行修改或执行任何操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:15:59.740

如果您使用的是 OVM/UVM，那么 get_full_name() / get_name() 将返回测试平台层次结构中组件的名称。

对象是动态的，因此您所问的问题隐含地无效。

当有人想要实现对象名称时，他们要做的就是在每个对象的构造函数中传递一个“字符串名称”，因此当对象是新的时，父对象会说出它的名称。

如果您查看 OVM/UVM 中的每个组件，您会看到构造函数签名： function new(string name="", ovm_component parent=null)

这些被基类用来实现 get_full_name() / get_name()

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T10:13:51.820

实例没有名称。考虑这段代码：

```
someObject a
someObject b

initial begin
    a = new();
    b = a;
    a.printName();
    b.printName();
end 
```

`a`并`b`指向`someObject`. 我们只创造了一个。因此，两个调用都必须报告相同的名称，但您希望它们报告我们用来访问它们的句柄的名称。那是不可能的。

* * *

OVM/UVM 对象包含一个包含实例名称的成员变量。它可以在构造时给出或使用设置`set_name()`。可以使用`get_name()`. 即使您谈论的对象不是 OVM/UVM，您也可以使用类似的系统。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T19:44:37.287

对于高级别的东西，我不确定是否有与您描述的完全一样的东西。

但是，有`$typename`系统任务。但是，我不知道它如何处理类的对象。我以前没有发现需要这个。

通常我所看到的（以及我所做的，因为我发现它很有用）是创建一个存储在由构造函数分配的类中的字符串，它是对象的“名称”。然后我可以在登录时使用它，所以我知道不同的消息来自哪里。当然，这取决于您创建具有有用名称的新变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-05T22:45:07.987

如果你想模仿 uvm/ovm，你可以添加你自己的类方法来做到这一点。这会很笨拙，而且你基本上是在发明自己的方法——但不是每个人都使用 uvm/ovm。

```
package foo_pkg;

class foo;
    string name;

    // Make your own get_full_name(), but shortname it
    function string gfn (input string s="");
        return {this.name, " ", s};
    endfunction : gfn

    // let the caller pass 'name' on the constructor
    function new (input string name="");
        this.name = name;
    endfunction : new

    function void test_prints();
        // wrap your strings with gfn(..) to whatever $display or logging macros you use

        $display(gfn("some text"));

        $display($sformatf("%t %m %s: value=%p", $time, gfn(), value));
    endfunction : bar

endclass
endpackage

module squirrel;

foo_pkg::foo foo_obj = new(.name($sformatf("%m"));
initial foo_obj.test_prints();

endmodule 
```

# xml - MSBuild XML 中未使用的引用路径

> ID：12609037
> 
> 赞同：1
> 
> 时间：2012-09-26T19:31:08.490
> 
> 标签：xml, properties, reference, msbuild, path

大家好：搜遍了没找到答案，我是新手，请多多包涵。我有一个 MSBuild xml 文件，它应该在构建之前清除所有项目的 bin 和 obj 文件夹。同样，此构建文件设置（或应该）在编译项目时使用的参考路径。我遇到的问题是，当构建清除 bin 和 obj 文件夹时，没有一个项目使用引用路径 PropertyGroup 进行编译。正在设置的参考路径示例，以及一个项目的编译：

参考路径：

```
<Target Name="Compile" DependsOnTargets="GetLatest;CleanBinObj;CleanNetDLL">
    <!-- Compile DLLs and Copy them to the Build Folder -->
    <PropertyGroup>
      <ThirdPartyAtalasoftDLLReferencePath>E:\Builds\Third Party\Atalasoft\10.0 - .NET 4.0\</ThirdPartyAtalasoftDLLReferencePath>
      <ThirdPartyHylandDLLReferencePath>E:\Builds\Third Party\Hyland\</ThirdPartyHylandDLLReferencePath>
      <ThirdPartyInfragisticsDLLReferencePath>E:\Builds\Third Party\Infragistics\12.1\</ThirdPartyInfragisticsDLLReferencePath>
      <ThirdPartyMSOfficeDLLReferencePath>E:\Builds\Third Party\MS Office\</ThirdPartyMSOfficeDLLReferencePath>
      <ThirdPartyMSSQLDLLReferencePath>E:\Builds\Third Party\MS SQL CE\</ThirdPartyMSSQLDLLReferencePath>
      <ThirdPartyOtherDLLReferencePath>E:\Builds\Third Party\Other\</ThirdPartyOtherDLLReferencePath>

      <ApplicationDLLBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Applications\</ApplicationDLLBuildPath>
      <MiddlewareDLLBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Middleware\</MiddlewareDLLBuildPath>
      <ComponentDLLBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Components\</ComponentDLLBuildPath>
      <InterfaceDLLBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Interfaces\</InterfaceDLLBuildPath>
      <TriggerProcessDLLBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Trigger Process\</TriggerProcessDLLBuildPath>
      <WebOutPutBuildPath>E:\Builds\NetDLL\$(CodeBranch)\Web\</WebOutPutBuildPath>
    </PropertyGroup>
    <PropertyGroup>
      <ReferencePath>
        $(MiddlewareDLLBuildPath);
        $(ComponentDLLBuildPath);
        $(InterfaceDLLBuildPath);
        $(ThirdPartyAtalasoftDLLReferencePath);
        $(ThirdPartyHylandDLLReferencePath);
        $(ThirdPartyInfragisticsDLLReferencePath);
        $(ThirdPartyMSOfficeDLLReferencePath);
        $(ThirdPartyMSSQLDLLReferencePath);
        $(ThirdPartyOtherDLLReferencePath)
      </ReferencePath>
    </PropertyGroup> 
```

项目编译：

```
<MSBuild Projects="..\MyProject\MyProject.csproj"
             Properties="ReferencePath=$(ReferencePath)"></MSBuild> 
```

这里的一切对我来说似乎都是正确的。如果需要更多代码来解决此问题，请告诉我。

# regex - 什么是清洁模具字符串的可靠方法，删除“在 File.pm 第 123 行”？

> ID：12609040
> 
> 赞同：1
> 
> 时间：2012-09-26T19:31:14.517
> 
> 标签：regex, perl, exception-handling, die

有时我想通过在某处输出它来处理末尾带有“at File.pm line 123”的 Perl 字符串异常。但是，我真的不想用路径名、行号等公开最后一位。

随着时间的推移，我提出了几种可能的解决方案，但我都不太喜欢它们。仅使用这样的正则表达式是一个显而易见的表达式：

```
s/\s+ at \s+ .*$//xms; 
```

但问题是它会杀死任何带有“at”字样的东西。将行号设为非可选会有所帮助，但最终您会得到具有“at ANON”的匿名代码或类似的怪诞代码。

我什至尝试过这样的事情：

```
$_ = reverse $_;
s/^.*? \s+ ta \s+//xms;
$_ = reverse $_; 
```

这对单行错误非常有效。但是，如果您最终得到来自`confess`或其他异常抛出器的完整堆栈跟踪，那么您最终会得到长堆栈跟踪。

有人愿意分享一个好的解决方案吗？或者更好的方法的建议？（“不要像那样输出 die 消息”不是可接受的答案。）

如果有一个我忽略的 CPAN 模块在这里提供帮助，我很想知道。如果没有，我正在考虑为此目的贡献一个 CPAN 模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:54:12.257

1.  您的第一个片段不会«杀死任何带有“ at”一词的东西。»。`at`必须是倒数第二个字才能做任何事情。

2.  我认为你的两个片段（正向和反向）是 100% 等效的（除了第二个不支持尾随换行符，所以它可能永远不会匹配）。

3.  图案

    ```
    /\s+ at \s+ \S+ (?:\s+ line \s+ \d+)?$/x 
    ```

    不匹配

    ```
    $ perl -e'(eval "sub { die }")->()'
    Died at (eval 1) line 1. 
    ```

4.  图案

    ```
    /\s+ at \s+ \S+ (?:\s+ line \s+ \d+)?$/x 
    ```

    不匹配

    ```
    $ echo foo | perl -e'<STDIN>; die;'
    Died at -e line 1, <STDIN> line 1. 
    ```

5.  我认为 Perl 不会在不添加数字的情况下添加文件名。

    如果行号是可选的，那么您将不可避免地匹配“晚餐在九点”的最后两个单词。除非您开始采用启发式方法。

* * *

查看源代码，这是`die`可以附加的：

```
Adds:                   " at %s line %"IVdf
Sometimes followed by:  ", <%"SVf"> line %"IVdf
                or by:  ", <%"SVf"> chunk %"IVdf
Sometimes followed by:  " during global destruction"
Always followed by:     ".\n" 
```

这给了我们：

```
s/
   (?&BASE)
   (?&IO_CLAUSE)?
   (?&GLOBAL_DESTR)?
   \.?\n\z

   (?(DEFINE)
      (?<BASE>         [ ] at [ ] (?&FILE_NAME) [ ] line [ ] [0-9]+ )
      (?<IO_CLAUSE>    , [ ] <(?&HANDLE_NAME)> [ ] (?:line|chunk) [ ] [0-9]+ )
      (?<GLOBAL_DESTR> [ ]during[ ]global[ ]destruction )

      # Heuristics:
      (?<FILE_NAME>   \S+ | \(eval[ ][0-9]+\) )
      (?<HANDLE_NAME> \w+ )
   )
//x 
```

这是尽可能具体的。

（注意：据`.`我所知，Carp 有时会忘记尾随的“”。）

（注意：Perl 使用单个空格，因此`[ ]`比 . 更精确`\s+`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:56:28.117

`die`您可以通过定义一个函数来覆盖您的内置`CORE::GLOBAL::die`函数：

```
BEGIN {
    *CORE::GLOBAL::die = sub {
        my $y = pop @_;
        chomp $y;
        CORE::die @_,$y,"\n";
    }
}

my $method = rand(3);
die "I died\n" if $method > 2;
die "I died too" if $method > 1;
die; 
```

报告要么

```
I died
I died too
<nothing - maybe not the right thing to do> 
```

如何使用该`CORE::GLOBAL::...`软件包记录在[`perlsub`](http://search.cpan.org/perldoc?perlsub).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:51:54.237

我相信标准`die`输出总是包含`at`和`line`部分，所以它应该足够使用：

```
s/\s+at\s(?!.*\bat\b).*\sline\s\d+\.$//; 
```

# html - 垂直对齐需要做什么？

> ID：12609045
> 
> 赞同：1
> 
> 时间：2012-09-26T19:31:48.833
> 
> 标签：html, css, web

我有一个非常简单的测试 html 站点，如下所示：

```
<html>
<body>
<div style="height:500px">
    <img style="height:200px; vertical-align:middle;" src="http://i.imgur.com/BidLR.jpg" />
</div>
</body>
</html> 
```

但是图像不会在 div 中垂直居中显示。（至少在谷歌浏览器中）。图像居中渲染需要什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:34:49.650

`vertical-align`将图像垂直居中在它的线上。您需要设置一个`line-height`比图像高的值。

见风格区：http:
[//jsfiddle.net/5ugDx/](http://jsfiddle.net/5ugDx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:16:27.860

至少有 6 种不同的方法可以使您的图像居中。选一个：

[http://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

# objective-c - 预期标识符或“（”

> ID：12609047
> 
> 赞同：-3
> 
> 时间：2012-09-26T19:31:55.090
> 
> 标签：objective-c

尝试编写关于分数运算的简单程序。无法编译代码。在“减法”方法的界面中出现“预期标识符或'（' xcode”错误。

我对这个问题进行了研究，在我看来这是某种通用错误。这是我的程序：

```
#import <Foundation/Foundation.h>
// Define the Fraction class
@interface Fraction : NSObject
{
int numerator;
int denominator;
}
@property int numerator, denominator;
-(void) print;
-(void) setTo: (int) n over: (int) d;
 -(double) convertToNum;
-(Fraction *) add: (Fraction *) f;
–(Fraction *) subtract: (Fraction *) f;
–(Fraction *) multiply: (Fraction *) f;
–(Fraction *) divide: (Fraction *) f;

-(void) reduce; 
@end

#import "Fraction.h"
@implementation Fraction
@synthesize numerator, denominator;
-(void) print
{
NSLog (@"%i/%i", numerator, denominator);
}
-(double) convertToNum
{
if (denominator != 0)
return (double) numerator / denominator;
else
    return NAN;
}
-(void) setTo: (int) n over: (int) d
{
numerator = n;
denominator = d;
}
// add a Fraction to the receiver

-(Fraction *) add: (Fraction *) f
{

Fraction *result = [[Fraction alloc] init];
result.numerator = numerator * f.denominator +
denominator * f.numerator;
result.denominator = denominator * f.denominator;
[result reduce];
return result;
}

-(Fraction *) subtract: (Fraction *) f
{
Fraction *result = [[Fraction alloc] init];
result.numerator = numerator * f.denominator -
denominator * f.numerator;
result.denominator = denominator * f.denominator;
[result reduce];
return result;
}

-(Fraction *) multiply: (Fraction *) f
{
Fraction *result= [[Fraction alloc] init];

result.numerator = numerator * f.numerator;
result.denominator = denominator * f.denominator;
[result reduce];
return result;

}

-(Fraction *) divide: (Fraction *) f;
{
Fraction *result = [[Fraction alloc] init];
result.numerator= numerator * f.denominator;
result.denominator = denominator * f.numerator;
[result reduce];
return result;
}

-(void) reduce
{
int u = numerator;
int v = denominator;
int temp;
while (v != 0) {
temp = u % v;
u = v;
v = temp;
}
numerator /= u;
denominator /= u;
}
@end
#import "Fraction.h"

int main (int argc, char *argv[])
{
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

Fraction *myFraction1 = [[Fraction alloc] init];
Fraction *myFraction2 = [[Fraction alloc] init];

[myFraction2 setTo:200 over:300];

[myFraction1 setTo: 100 over: 300];

[myFraction2 subtract: myFraction1];

NSLog (@"The value of myFraction2 is:");

[myFraction2 print];

[myFraction2 release];
[myFraction1 release];

[pool drain];
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:36:58.607

删除此行末尾的逗号`main`：

```
Fraction *myFraction2 = [[Fraction alloc] init], ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:38:50.663

假设这是文字复制和粘贴，您使用了错误的破折号。最后，在英式和美式键盘上，您想要的键盘位于“0”键的右侧。您似乎正在使用破折号。如果您仔细查看上面的列表，特别是`add:`与`subtract:`顶部列表相比，您会发现您的角色稍微宽一些。

尝试复制并粘贴：

```
-(Fraction *) subtract: (Fraction *) f; 
```

在您现有的定义上查看差异。

# mod-rewrite - mod_rewrite 作为访问控制 - 如何通过所有页面资源？

> ID：12609048
> 
> 赞同：0
> 
> 时间：2012-09-26T19:32:03.397
> 
> 标签：mod-rewrite

我在 Apache 上使用 mod_rewrite 作为访问控制。规则的设置使得如果用户未登录，他将无法访问大多数页面。某些页面（都具有 *.php 扩展名）被站点管理员选择为“公共页面”。“公共页面”确实授予未登录用户的权限。

未经明确许可公开的各种图片和其他资源，匿名用户无法访问；他们将用户发送到主页。这正是我想要的行为。

问题是这些公共页面有各种各样的嵌入元素，从遥远的目录链接。这些元素被相同的重写规则拒绝。

**是否可以传递来自重写页面的任何资源请求，但要阻止它们？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:02:35.017

> 是否可以传递来自重写页面的任何资源请求，但要阻止它们？

如果引用者是一个 php 页面（或任何其他公共页面）的 URL，您可以对 a 中的`%{HTTP_REFERER}`var进行额外检查以允许访问。`RewriteCond`这样做的问题是引用者可能会被欺骗。它看起来像：

```
RewriteCond %{HTTP_REFERER} ^(http://your-domain.com)?/path/to/public\.php$ [OR]
RewriteCond %{HTTP_REFERER} ^(http://your-domain.com)?/path/to/another-public\.php$ [OR]
RewriteCond %{HTTP_REFERER} ^(http://your-domain.com)?/public/stuff/.*\.php$
RewriteRule ^ - [L] 
```

规则本身可能会有所不同，具体取决于您现有的规则（如果引用者与上述规则之一匹配，则此规则只会传递请求）。

# node.js - 我的 Node 包需要两个具有相同依赖项的包。可以吗？

> ID：12609050
> 
> 赞同：0
> 
> 时间：2012-09-26T19:32:05.717
> 
> 标签：node.js, package, npm

我的节点包当前需要`express`和`locomotive`. 两者都`express`需要 `locomotive`包`commander`。

当每个包（`express`和`locomotive`）都需要指挥官时，这将解析为两个不同的文件。根据[Node 的文档](http://nodejs.org/api/modules.html#modules_module_caching_caveats)，该`commander`包将被执行两次，并且在我的应用程序中将有两个`commander`包的主副本，每个文件一个。

现在，根据我[`require.resolve()`](http://nodejs.org/api/modules.html#modules_all_together)对`./node_modules/commander`.

然后我应该将`commander`包（和所有其他重复的包）合并到`node_modules`我的应用程序根目录的文件夹中吗？

编辑下午 12:58：我还注意到重复的包可能不是同一版本。`express`有`commander 0.6.1`一阵子`locomotive`有`commander 1.0.4`。另一个依赖`express`和`locomotive`共享分别是`mkdirp`at`0.3.3`和`0.3.4`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:37:50.393

每个软件包在安装时都会在各自的`node_modules`文件夹中安装自己的依赖项。

例如，`express`它会有自己的`node_modules`文件夹，里面有它的特定版本`commander`，而另一个模块也有它自己的。

确认;

```
mkdir someNewProject && cd someNewProject
npm install express locomotive 
```

然后查看那些已安装模块的目录结构，如下所示；

```
ls node_modules/express
ls node_modules/locomotive 
```

您应该注意到它们每个都有自己的`node_modules`文件夹及其依赖项。因此，我不建议尝试制作通用指挥官包。

# regex - PostgreSQL regexp_replace 麻烦忽略前面

> ID：12609054
> 
> 赞同：1
> 
> 时间：2012-09-26T19:32:18.527
> 
> 标签：regex, postgresql

我在 PostgreSQL (9.2) 中尝试以下 regex_replace 语句

```
 # SELECT regexp_replace('_this._is_a_long_entry._of.nonsense_text', '\._|^_', '$','g'); 
```

### 客观的：

是用'$'替换所有*以句*点开头的下划线字符。我还替换了锚定在位置 1 的下划线；这是有效的。我想将两场比赛都塞进一个声明中。所有这些都是为了开发一种机制，将我们拥有的一些奇怪的文本推送到 PostreSQL ltree 结构中。

### 问题：

如何在不影响句号的情况下进行上述第一次替换？

我希望看到结果如下所示：

`$this.$is_a_long_entry.$of.nonsense_text`

注意：也尝试过显式捕获下划线，但 PG 实现似乎忽略了这一点：

```
# SELECT regexp_replace('_this.is_long_entry._of.nonsense_text', '\.(_)|^_', '$','g'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:59:55.983

```
SELECT regexp_replace('_this._is_a_long_entry._of.nonsense_text'
                     ,'(\.|^)_' -- capture the preceding char (none at start)
                     , '\1$'    -- use the captured char
                     ,'g');     -- globally 
```

这是假设[`standard_conforming_strings = ON`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)。

# assembly - 我在汇编语言程序中遇到问题

> ID：12609057
> 
> 赞同：0
> 
> 时间：2012-09-26T19:32:35.513
> 
> 标签：assembly, x86

这是汇编程序。

“输入3名员工的姓名和薪水，然后将他们的薪水相加，显示总薪水，然后显示平均薪水”

这是代码

```
Msg_display Macro str
    mov ah,09h
    mov dx,offset str
    int 21h
EndM Msg_display

.model small
.stack 100h
.data
        e1 db "Enter Name And Salary of 1st Employee","$"
        e2 db "Enter Name And Salary of 2nd Employee","$"
        e3 db "Enter Name And Salary of 3rd Employee","$"
    N1 db 20 dup(?)
    N2 db 20 dup(?)
    N3 db 20 dup(?)
    s1 db 0
    s2 db 0
    s3 db 0
        num db 0
        msg1 db "After Adding their Salaries, Result is....","$"
        msg2 db "Average Salary Is....","$"
        Ent db 0ah,0dh,"$"

.code
    mov ax,@data
    mov ds,ax

        Msg_display e1
    mov si,offset N1
    call input_str
    call No_input
    mov s1,ax

        Msg_display e2
    mov si,offset N2
    call input_str
    call No_input
    mov s2,ax

        Msg_display e3
    mov si,offset N3
    call input_str
    call No_input
    mov s3,ax

Input_str Proc
    mov ah,01h
    int 21h
    mov [si],al
    inc si
        cmp al,0dh
    JE end_input
    Jmp Input_str
End_input:
    mov [si],"$"
Input_str EndP

No_input Proc
    mov ah,01h
    int 21h
    cmp al,0dh
    JE skip

    sub al,48
    xor ah,ah
    mov num ,ax
    pop ax
    mul bx
    add ax,num
    push ax

skip:
    pop ax
    ret
No_Input endp

mov ax,s1
add s2,ax
add s2,s3

mov ah,09h
mov dx, offset msg1
int 21h

mov ah, 02h
mov al, s2
int 21h

mov ax,s2
mov bx,3

div bx
mov ah,09h
mov dx, offset msg2
int 21h

mov ah, 02h
mov dl,al
int 21h

mov ah,04ch
int 21h

End 
```

我不断收到此错误“第 32,38,44,66,69,77,78,79,86 行的指令运算符无效”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:41:13.200

这

```
cmp [si],[di] 
```

是无效指令。它无效有几个原因：

1.  `cmp`不使用 2 个内存操作数，很少有指令使用，当它们使用时，最多有一个内存操作数被显式指定，另一个预计将以预定义的方式隐式寻址，而无需您将其告知汇编程序。
2.  内存操作数的大小不明确，汇编器无法确定它应该是 a `byte`、 a`word`还是 a `dword`（双字）。

您应该将其中一个内存操作数加载到寄存器中，然后`cmp`使用该寄存器和另一个内存操作数。

顺便说一句，类似的行`mov [si],"$"`也可能存在上述问题 2，因为数字（“$”解析为“$”的 ASCII 代码）没有与之关联的大小，并且内存操作数是裸露的，缺少尺寸规格。正确/明确的方法是拼出内存操作数大小，如下所示：

```
mov byte ptr [si],"$" 
```

宏不是子例程，您不要调用它们：

```
call Msg_display e1 
```

这是对宏的无效使用。它应该是类似`Msg_display e1`或`Msg_display(e1)`或`Msg_display<e>`代替的东西。

这里没有这种形式的`div`指令：

```
div ax,3 
```

`div`接受一个显式操作数（除数），它不是立即数 (3)。它可以是寄存器或内存操作数。另一个操作数（被除数）是 in `ax`（当做 16/8=8,8 除法`dx:ax`时）或 in（当做 32/16=16,16 除法时）。`dx`此外，如果您的股息是 16 位，请记住将其归零。

# javascript - 无法调用未定义的方法“toLowerCase”

> ID：12609059
> 
> 赞同：2
> 
> 时间：2012-09-26T19:32:41.837
> 
> 标签：javascript, jquery

我有这段代码，它正在从文本框中读取值，我认为在尝试 parseInt() 之前检查 '' 是安全的，但显然不是。

我收到错误消息：

> 未捕获的类型错误：无法调用未定义的方法“toLowerCase”

使用此代码：

```
 var total = 0;
            $.each('.reg-input', function () {
                if ($(this).val() == '') {
                }
                else {
                    total += parseInt($(this).val());  //this line throwing error
                }                    
            });
            if (total == 0) {
                $('.RegisterContainer').hide();                    
            } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:34:57.460

`'.reg-input'`是一个字符串，`this`在这种情况下也将是一个字符串，而不是一个 dom 元素。试试这个：

```
$('.reg-input').each(function(){... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T19:39:04.040

您收到奇怪错误的原因是您`$.each`使用字符串而不是集合调用。

字符串是一个对象，所以它仍然是一个集合，但集合中的项目是字符串类的属性和方法（并且`toLowerCase`是其中之一）。

要遍历使用选择器找到的元素，请使用[`each`方法](http://api.jquery.com/each/)而不是[`$.each`方法](http://api.jquery.com/jQuery.each/)：

```
$('.reg-input').each(function(){
  ..
}); 
```

现在`this`循环内部将是一个元素，而不是字符串类的成员，因此您可以使用它`$(this).val()`来获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T22:18:54.647

我有完全相同的问题，我通过分配`$(this).val()`给一个变量然后将变量解析为一个整数来解决它。因此，正确的解决方法是：

```
var total = 0;
        $.each('.reg-input', function () {
            if ($(this).val() == '') {
            }
            else {
                $this_val = $(this).val();
                total += parseInt($this_val);  //this line throwing error
            }                    
        });
        if (total == 0) {
            $('.RegisterContainer').hide();                    
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T19:37:45.943

`if ($(this).val() == "")` 检查该值是否是未定义的字符串“”。
您可以像这样使用 typeof 运算符 `if(typeof $(this).val() == 'undefined')`

# php - php从html字符串中提取第一张图片，删除所有图片标签，并截断html字符串

> ID：12609063
> 
> 赞同：2
> 
> 时间：2012-09-26T19:32:51.947
> 
> 标签：php, html, parsing, truncate

我在数据库中保存了来自 tinymce 编辑器的 html 内容，所以我想在 php 页面上显示这个 html 内容，但是以漂亮的方式。我想首先检查 html 字符串中是否存在图像，如果存在则首先在 php 页面中显示它。然后我想在图像右侧显示一些文本，将其截断前 200 个单词，但它必须保持 html，因为它可能不仅存在链接简单的文本。

是否有用于操作 html 和截断 html 字符串以实现“阅读更多”功能的 php 库或 php 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:43:02.073

这看起来是一个不错的工具：

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

有趣的是，它甚至在首页上有您正在寻找的示例。

编辑：

PHP 实际上带有自己的用于处理 HTML 的库，记录在：[http](http://docs.php.net/manual/en/book.dom.php) ://docs.php.net/manual/en/book.dom.php 另请查看[http://code.google.com/p/phpquery /](http://code.google.com/p/phpquery/)

# objective-c - 如何在 Cocos2d v2 中画一条简单的线？

> ID：12609065
> 
> 赞同：0
> 
> 时间：2012-09-26T19:33:03.863
> 
> 标签：objective-c, cocos2d-iphone

在我最后一个问题的后续内容中[，](https://stackoverflow.com/questions/12588470/the-new-cocos2d-has-not-got-ccribbon)为了替换 CCribbon，我想画一条简单的线。如何才能做到这一点？（顺便说一句，我已经看过其他以前的问题，但我仍然无法得到它）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:55:30.510

看看 cocos2d 项目中的 Draw Primitives 测试。简而言之，您可以使用以下代码。

节点的draw方法里面

```
-(void)draw
{
    [super draw];

    ccDrawColor4B(255, 255, 255, 255) //Color of the line RGBA
    glLineWidth(5.0f) //Stroke width of the line
    ccDrawLine(ccp(0, 0), ccp(10, 10));
} 
```

# android - 重定向到图像上的 URL 单击以在 5 秒后更改

> ID：12609067
> 
> 赞同：0
> 
> 时间：2012-09-26T19:33:07.803
> 
> 标签：android, arraylist

当我单击从可绘制文件夹中获取的图像时，我试图重定向到特定的 URL。我采用了一个整数数组来存储所有图像。

```
 final int[] imageArray = { R.drawable.advert1, R.drawable.arrow_blue_r,R.drawable.background4 }; 
```

我已经使用以下示例在 ID 为 advt_image 的图像视图上更改了一段时间后的图像

```
final Handler handler = new Handler();
Runnable runnable = new Runnable() {
    int i = 0;

    public void run() {
        advtImage.setImageResource(imageArray[i]);
        Log.i("AdvtImage::::",""+advtImage);
        i++;
        if (i > imageArray.length - 1) {
            i = 0;
        }
        handler.postDelayed(this, 3000); // for interval...
    }
};
handler.postDelayed(runnable, 2000); // for initial delay.. 
```

每次图像发生变化并且用户单击特定图像时，我无法弄清楚如何使用以下意图。

```
Intent viewIntent = new Intent("android.intent.action.VIEW",
     Uri.parse("http://www.stackoverflow.com/")); 
```

AnyHelp 对此表示高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:47:44.303

您可以保留要使用的 URI 数组，使用图像数组的索引来调用正确的 URI。

示例代码：

```
final int[] imageArray = { R.drawable.advert1, R.drawable.arrow_blue_r,R.drawable.background4 };
final String[] URLArray = {"http://www.stackoverflow.com","http://www.google.com","http://d.android.com"};

int position = 0;

final Handler handler = new Handler();
Runnable runnable = new Runnable() {

    public void run() {
        advtImage.setImageResource(imageArray[position]);
        Log.i("AdvtImage::::",""+advtImage);
        position++;
        if (position > imageArray.length - 1) {
            position = 0;
        }
        handler.postDelayed(this, 3000); // for interval...
    }
};
handler.postDelayed(runnable, 2000); // for initial delay.. 
```

然后在你的点击中，你可以做

```
Intent viewIntent = new Intent("android.intent.action.VIEW",
     Uri.parse(URLArray[position]); 
```

# python - 为什么 os.path.join 会丢弃参数？

> ID：12609075
> 
> 赞同：13
> 
> 时间：2012-09-26T19:33:46.527
> 
> 标签：python, language-design

我正在学习 Python，我注意到我的一个脚本有些奇怪。做了一些测试，我发现问题源于这种行为：

```
>>> import os
>>> os.path.join('a','b')
'a/b'
>>> os.path.join('a','/b')
'/b' 
```

检查[文档](http://docs.python.org/library/os.path.html#module-os.path)，这实际上是功能的设计：

> os.path. **加入**（*路径1* **[**，*路径2* **[**，... **]]**）
> 
> > 智能地加入一个或多个路径组件。如果任何组件是绝对路径，则所有先前的组件（在 Windows 上，包括先前的驱动器号，如果有的话）都将被丢弃，并继续加入。...

我的问题不是[我的脚本为什么失败](https://stackoverflow.com/q/11873787/1438)，而是为什么函数是这样设计的。我的意思是，至少在 Unix 上，`a//b`这是一种完全可以接受的指定路径的方式，如果不是优雅的话。为什么要这样设计功能？有没有办法判断一个或多个路径元素是否已被丢弃，而不是用 测试每个路径字符串`os.path.isabs()`？

* * *

出于好奇，我还检查了路径组件以`os.sep`字符结尾的情况：

```
>>> os.path.join('a/','b')
'a/b' 
```

这按预期工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T19:38:44.233

`os.path.join('a', '/b')`返回有用的一种情况是，`/b`如果您向用户询问文件名。

用户可以输入相对于当前目录的路径，也可以输入完整路径，您的程序可以像这样处理这两种情况：

```
os.path.join(os.getcwd(), filename) 
```

* * *

```
In [54]: os.getcwd()
Out[54]: '/tmp'

In [55]: os.path.join(os.getcwd(), 'foo')
Out[55]: '/tmp/foo'

In [56]: os.path.join(os.getcwd(), '/foo/bar')
Out[56]: '/foo/bar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:41:26.103

认为您正在编写一个实用程序`cd`来检查新目录，您会使用

```
os.path.join(currdir, newdir) 
```

如果用户输入`/b`你会抛出第一个参数。这适用于使用当前目录的大量内容。

# perl - 如何为 Google 登录正确实施 Net::OpenID::Consumer 并请求用户的电子邮件？

> ID：12609076
> 
> 赞同：4
> 
> 时间：2012-09-26T19:33:45.963
> 
> 标签：perl, openid, google-openid, dancer

我已经能够成功使用 Net::OpenID::Consumer，但是当我开始请求用户的电子邮件地址时，Google 现在会提示用户授权共享他们的电子邮件地址。每次都会发生这种情况，无论用户是否选中“记住此批准”复选框。如何防止 Google 每次都提示用户批准？

我们网站的 OpenID 注册和登录路径是一样的，否则我们只能在用户注册时向 Google 请求电子邮件地址。

我会尝试发布足够多的相关代码（这是一个 Dancer 应用程序）。

```
my $csr = Net::OpenID::Consumer->new(                                                                                                            
    ua => LWP::UserAgent->new(),                                                                                                                 
    consumer_secret => $secret,                                                                                               
);

my $claimed_identity = $csr->claimed_identity('https://www.google.com/accounts/o8/id');

$claimed_identity->set_extension_args(
    "http://openid.net/srv/ax/1.0",
        {
            'mode' => 'fetch_request',
            'type.email' => 'http://axschema.org/contact/email',
            'required'   => 'email',
});

my $check_url = $claimed_identity->check_url(                                                                                                    
        return_to => 'http://my.site.com/openid_landing',                                                                                                                
        trust_root => 'http://my.site.com',                                                                              
        delayed_return => 1,                                                                                                                     
    ); 
```

雅虎似乎没有这个问题。我想这可能是谷歌的一个问题，但我敢打赌这是我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:49:39.330

查看 Google 开发人员指南，您的应用程序 URL 应该与`openid.realm`OpenID 请求中的参数值匹配，以便在没有授权页面的情况下顺利登录。话虽如此，我认为您应该指定`required_root`以匹配`trust_root`，例如-

```
my $csr = Net::OpenID::Consumer->new(                                                                                                            
    ua => LWP::UserAgent->new(),                                                                                                                 
    consumer_secret => $secret,   
    required_root => "http://my.site.com"                                                                                            
); 
```

# c# - 如何使用多个 GridView ItemTemplate (WinRT/XAML)

> ID：12609082
> 
> 赞同：2
> 
> 时间：2012-09-26T19:34:12.110
> 
> 标签：c#, xaml, windows-runtime

我创建了一个 GridView 界面，其中包含不同大小的图块（如 Windows 开始屏幕）。如何在每个图块上以不同的方式定位控件？我的代码目前如下所示：

```
 <DataTemplate>
                <Grid Height="500" Width="1000">
                    <Grid.Background>
                        <SolidColorBrush Color="{Binding TileColor}"/>
                    </Grid.Background>
                    <StackPanel VerticalAlignment="Top">
                        <TextBlock Foreground="{Binding TextColor}" FontSize="25" TextWrapping="Wrap" Text="{Binding Title}" Margin="10,10,720,0"/>
                    </StackPanel>
                    <StackPanel VerticalAlignment="Bottom">
                        <TextBlock Foreground="{Binding TextColor}" FontSize="20" TextWrapping="Wrap" Text="{Binding Subtitle}" Height="334" Margin="10,0,336,15" RenderTransformOrigin="0.497,0.59"/>
                    </StackPanel>
                </Grid>
            </DataTemplate> 
```

但由于不同的瓷砖高度，它没有正确布局。有没有办法可以定义多个 ItemTemplates？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:26:30.780

您可以创建多个数据模板，然后您需要使用 DataTemplateSelector 将它们映射到您的图块。我认为这篇文章将完美地回答你的问题！

[http://visualstudiomagazine.com/articles/2012/08/06/multiple-item-templates-in-windows-phone.aspx](http://visualstudiomagazine.com/articles/2012/08/06/multiple-item-templates-in-windows-phone.aspx)

# javascript - var isMobile = jQuery.browser.mobile; 需要别的

> ID：12609088
> 
> 赞同：0
> 
> 时间：2012-09-26T19:34:22.677
> 
> 标签：javascript, jquery-plugins

我有一些效果很好的东西。当它被部署为包含时，var isMobile 正在停止该函数的其余部分工作，但在它自己的页面上完美工作。

我希望阻止执行的 jQuery 插件称为 Meerkat，它显示和隐藏浏览器底部的拥抱 div。只要猫鼬没有出现在手机或平板电脑上，一切都是合意的。非常糟糕的用户体验。我以为我有一个 Detectmobilebrowser.js 的赢家

```
$(document).ready(function(){
  var isMobile = jQuery.browser.mobile;
  if(isMobile)
  {
    window.location.href = 'http://*******/nomeerkat.html';
  }
}); 
```

这是一个独立的功能，猫鼬功能适用于非移动/平板电脑平台。当预订为包含桌面平台时，不会执行 meerkat 功能。再多的谷歌搜索都没有发现任何与检测移动设备相关的 if else 示例。:(

```
$(function(){
  $('.meerkat').meerkat({                      
    background:'url(\'http://****.jpg\') repeat-x left top',
    height: '90px',
    width: '940px',
    position: 'bottom',
    close: '.close-meerkat',
    dontShowAgain: '.dont-show',
    animationIn: 'fade',
    animationSpeed: 1000,
    removeCookie: '.reset'
  }).addClass('pos-bot');
  $('#bottom').click(function(){
   $('.meerkat').destroyMeerkat();
   $('.meerkat').meerkat({
     height: '90px',
     width: '940px',
     position: 'bottom',
     close: '.close-meerkat',
     dontShowAgain: '.dont-show',
     animationIn: 'slide',        
     animationSpeed: 1000,
     removeCookie: '.reset'
   }).removeClass('pos-bot');
   $('.code').hide();
   $('.bottom_').show();
   return false;
 });
}); 
```

# python - 如果在python中更改了值，如何查看当前值并更改颜色

> ID：12609089
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:34:24.323
> 
> 标签：python, text, colors, object-properties

如果值从当前值更改，我试图弄清楚如何更改文本字段的笔触颜色。对于这些字段，我有从各种来源自动提取并输入 XML 表单的值。这些值也是数字。我想写一些“如果值改变，打印不同颜色的笔触颜色”的东西，但不知道该怎么做。到目前为止，我的微弱尝试如下。不确定任何人需要帮助的其他信息，但请询问，如果需要我会回答。

```
v = FormSet.GetFieldValue(CurrentForm, "IMPR_ROOMS_TOT_BEDROOMS")
if v != v 
    FormSet.SetObjectPRoperty(CurrentForm, "IMPR_ROOMS_TOT_BEDROOMS", "StrokeColor", "#f11818") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:44:23.043

你的比较永远不会是真的。v 永远不会不等于 v，因此您设置属性的代码将永远不会触发。

# php - 回显一个非常大的数字

> ID：12609093
> 
> 赞同：14
> 
> 时间：2012-09-26T19:34:35.110
> 
> 标签：php

我有一个不寻常的问题，我不知道如何解决。

我有一个 JSON 文件，其中存储了应用程序 ID，即以下内容：

```
"app_id": "363924477024846" 
```

我从 HDD 读取我的 JSON 文件并使用 json_decode() 解析它以在我的应用程序中使用它。但是，在某一时刻，我希望将 app-id 发送到浏览器。问题是，如果我回显该变量，其打印如下：

```
2.7110712626725E+14 
```

有什么办法可以防止这种情况发生吗？我不需要它被 PHP 威胁为一个数字，因为我没有用它做任何计算 - 一个字符串就可以了。但由于它仅由数字表示，似乎 json_decode() 威胁它为数字，即使我在它周围加上引号（应该表示一个字符串）或者 PHP 在这种情况下只是做了愚蠢的类型提示，我不知道...

关于如何处理的任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T19:39:19.750

我在这里遇到了同样的问题：只需使用 phps number_format 函数，即可解决此问题：

```
$number = "363924477024846";
echo number_format($number, 0, '', '');

// 363924477024846 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T19:41:23.183

看起来[json_decode](http://php.net/manual/en/function.json-decode.php)可以选择将大整数视为字符串。

```
json_decode($json, false, 512, JSON_BIGINT_AS_STRING) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:36:34.870

尝试将其转换为字符串

```
echo((string)$theNumber); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:37:27.740

一个快速而肮脏的解决方案是在数字的开头或结尾添加一些字符，以强制 PHP 将其视为字符串。也许代替“363924477024846”使用“z363924477024846”，然后在需要使用它时删除z。显然在发送之前附加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T19:39:39.033

如果您可以更改 JSON 文件内容，您是否尝试过将应用程序 ID 用引号括起来，如下所示：

```
"app_id": "'363924477024846'" 
```

正如 clentfort 所说，您超过了 32 位整数的最大值（约 21 亿有符号）

# ruby-on-rails - Rails：带有条件的依赖范围

> ID：12609102
> 
> 赞同：0
> 
> 时间：2012-09-26T19:35:08.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, scope

我有以下带有范围的用户对象：

```
Class User < ActiveRecord::Base
  ...
  scope :vendors,   lambda { where(:user_type => 'v') }
  scope :customers, lambda { where(:user_type => 'c') }
  ... 
```

我想`inactive`为供应商和客户创建一个行为不同的新范围，例如在伪代码中

```
 scope :inactive, lambda {
    if (:user_type => 'v')
      where(some_condition_only_for_vendors)

    elsif (:user_type => 'c')
      where(different_condition_only_for_customers)

    else
      where(another_condition)

    end
  } 
```

这样，我可以`users.vendors.inactive`根据一组条件获取所有不活跃的供应商，并`users.customers.inactive`根据另一组条件获取所有不活跃的客户。

这是可能的还是有更好的方法来做到这一点？请注意，这里有很多遗留代码，因此实现继承可能不可行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:46:08.047

我立即看到的问题是您从类中调用了一个范围，并且没有记录实例来获取 user_type。

```
User.inactive 
```

所以你可能有类似的东西：

```
class User < ActiveRecord::Base
  scope :inactive, lambda { |user_type|
    case user_type
    when 'v'
      where(some_condition_only_for_vendors)
    when 'c'
      where(different_condition_only_for_customers)
    else
      where(another_condition)
    end
  }

  def related_users
    User.inactive(user_type).all
  end
end 
```

# c++ - 在 C++ 中捕获 MySQL 错误

> ID：12609104
> 
> 赞同：1
> 
> 时间：2012-09-26T19:35:11.200
> 
> 标签：c++, exception-handling, mysql-error-1062

在 C++ 中，我正在使用`mysql.h`库，但无法捕获 MySQL 错误（例如，由于主键冲突而导致插入失败）。

我试过了

```
#include <mysql.h>
// ...
try{
    res = mysql_perform_query(conn, sqlIn);
} catch (...) {
// ...
} 
```

但它仍然不能避免中止：

```
MySQL query error : Duplicate entry 
```

我正在使用 PuTTy 接口运行已编译的 c++ 程序，当程序中止时，它会重现 MySQL 的错误（无论我是否使用 TRY CATCH）。
我没有找到任何对 MySQL 使用 catch 语句的特定异常代码的引用。

显然，即使使用“一揽子”语法（），C++（使用这个库`mysql.h`）也不会捕获 MySQL 回调错误`catch (...)`。由于这种语法应该捕获所有异常，但在这种情况下没有，我不知道这里发生了什么。如何捕获 SQL 异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:50:53.410

mysql C 库不会抛出任何异常；它只是像大多数其他 C 库一样，在一个公共位置（如 errno）设置错误信息并返回一个状态。由您的客户端代码检查返回并引发错误/异常。

如果您需要轻松解决问题，请尝试使用 mysql++ (AKA mysqlpp)。这是一款我可以担保的软件；坚如磐石！ [http://tangentsoft.net/mysql++/](http://tangentsoft.net/mysql++/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T03:52:19.203

尝试在 mysql C 库周围使用一些 c++ 包装器。例如[http://mysqlcppapi.sourceforge.net/](http://mysqlcppapi.sourceforge.net/)

C 不会抛出你必须通过 mysql_errorno 函数检查的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:28:39.057

我不会推荐 Mysql C++ 库有两个原因 1\. 很难得到支持。2.相比Mysql C库慢

您可以使用 mysql_error() 和 mysql_errno() API 来了解错误并手动通过异常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T16:44:10.963

根据 kingstonian 的建议，我在 mysql 周围使用了 mysql++ 包装器（要在 ubuntu 中安装，[请参阅我的回答另一个 SO 问题的食谱](https://stackoverflow.com/a/12842218/1166727)）

下面的代码用于测试错误处理，其中在键中插入了重复值 (Id_Target = 9)。使用适合您的数据库结构的插入来适应您自己的需求。

```
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#include <stdio.h>
#include </usr/include/mysql++/mysql++.h>

// sudo g++ -o /temp/zdelMySQLpp01c $(mysql_config --cflags) /home/ubuntu/zdelMySQLpp01c.cpp $(mysql_config --cflags --libs) -l pthread -std=c++0x -g -L/usr/lib/mysql -lmysqlclient -lmysqlpp

using namespace mysqlpp;
using namespace std;

//MySQL type
struct connection_details {
        char *server;
        char *user;
        char *password;
        char *database;
};

int main(int argv, char** argc){

// MySQL connection (global)
struct connection_details mysqlD;
mysqlD.server = (char *)"localhost";  // where the mysql database is
mysqlD.user = (char *)"root";       // the root user of mysql   
mysqlD.password = (char *)"XXXXXX"; // the password of the root user in mysql
mysqlD.database = (char *)"test";   // the databse to pick

// connect to the mysql database
mysqlpp::Connection conn(false);
if (conn.connect(mysqlD.database, mysqlD.server, mysqlD.user, mysqlD.password)) {
    //printf("ALOALO funcionou conexao\n");
    mysqlpp::Query query = conn.query("INSERT INTO test.target (Id_Target, Ds_Target, Ds_Target_Name, Ds_Target_PWD, Ds_Target_Email, Ds_Target_Icon) VALUES ('9', 'test', 'name', 'pass', 'email', NULL)");
        if (mysqlpp::StoreQueryResult res = query.store()) {
                cout << "We have:" << endl;
                for (size_t i = 0; i < res.num_rows(); ++i) {
                    cout << '\t' << res[i][0] << endl;
                }
        } else {
                cerr << "Failed to get item list: " << query.error() << endl;
                return 1;
    }
        return 0;
}
} 
```

# jquery - Jquery Bootstrap UI - 外部模态弹出窗口

> ID：12609105
> 
> 赞同：0
> 
> 时间：2012-09-26T19:35:11.370
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我正在尝试创建一个函数，该函数将在引导模式内的任何具有“删除”类的链接或按钮上创建确认删除消息。我目前有这个代码来创建一个常规的确认对话框：

```
'init_confirm_delete' : function(){
    $('a.delete,button.delete').live('click',function(e){
        return confirm('Are you sure you want to delete this?');
        e.preventDefault();
    });

}, 
```

这很好用。下面是我尝试集成引导 UI 的新代码：

```
 'init_confirm_delete' : function(){
    $('a.delete,button.delete').click(function () {
        $('#delete-confirm').dialog('open');
    return false;
});
    $("delete-confirm").dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Ok: function () {
                $(this).dialog("Delete");
            },
        }
    })      
}, 
```

程序员有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:05:44.077

我看到了一个错误，那就是

```
$("delete-confirm").dialog({ ... }); // missing # for id selector 
```

应该

```
$("#delete-confirm").dialog({ ... }); 
```

# jquery - 如何使用 iMask 允许可选字符？

> ID：12609106
> 
> 赞同：1
> 
> 时间：2012-09-26T19:35:14.637
> 
> 标签：jquery, regex, input, mask

这是我的原始帖子：[imask](https://stackoverflow.com/questions/12608719/jquery-json-undefined#12608843)

我解决了这个问题，但我想知道如何在输入上放置多个掩码。所以对于电话输入，我想输入如下内容：

```
$('#phone').iMask({  
    type:'fixed',  
    mask:'(999) 999-9999 || 9 (999) 999-9999',  
    stripMask: false
}); 
```

但显然这不起作用（或者我不会发布）。任何人都知道如何在面具中做多个条件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:42:32.403

mask 中的值不是正则表达式，它是自定义的掩码格式。

以下应该工作

```
 $('#phone').iMask({  
    type:'fixed',  
    mask:'9 (999) 999-9999',  
    stripMask: false
 }); 
```

如果用户不想输入第一个数字，他们可以通过使用箭头跳过该数字来跳过它

[http://jsfiddle.net/GtQKh/23/](http://jsfiddle.net/GtQKh/23/)

# php - Symfony2 使用 md5 密码登录

> ID：12609108
> 
> 赞同：1
> 
> 时间：2012-09-26T19:35:19.207
> 
> 标签：php, symfony

您好，我正在尝试使用 Symfony2 和数据库表登录，密码在 md5 中，没有盐字段。我有很多用户，我无法更改它。

当我发送带有无效电子邮件的表单时，登录似乎工作正常，它返回消息正确“凭据错误”。但是当我发送带有良好电子邮件的表格时，它会显示“提供的密码无效”。

怎么了？

我配置防火墙：

```
security:
    encoders:
        Usuari\BackendBundle\Entity\Usuari:
            algorithm: md5 
```

在 Usuari 实体中实现 UserInterface，不加盐

```
 public function getUsername()
    {
        return $this->email;
    }

    public function getSalt() { 
        return '';
    }

    public function getPassword()
    {
        return $this->clau;
    }

    public function getRoles()
    {
        return array('ROLE_ADMIN');
    }

    public function eraseCredentials() { }

    public function equals(UserInterface $user)
    {
        return $this->email === $user->getUsername();
    } 
```

和 /login 路由的安全控制：

```
namespace Mes\BackendBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\SecurityContext;

    class SecurityController extends Controller
    {
        public function loginAction()
        {
            $request = $this->getRequest();
            $session = $request->getSession();

            // get the login error if there is one
            if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
                $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
            } else {
                $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
            }

            return $this->render('MeBackendBundle:Security:login.html.twig', array(
                // last username entered by the user
                'last_username' => $session->get(SecurityContext::LAST_USERNAME),
                'error'         => $error,
            ));
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:37:36.930

更改`algorithm: sha1`为`algorithm: md5`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:20:17.400

我也有类似的情况。我所做的是我创建了单独的编码器，以便旧用户可以使用旧算法登录，而新用户可以使用 symfony 的默认编码器获得更安全的密码。

[我在这里](https://stackoverflow.com/questions/12005004/migrating-legacy-users-to-symfony2)发布了一个非常广泛的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T23:08:54.123

Thomas, this solutions seems works fine, but it is more complex.

Finally I decide regenerate all passwords from database with other encode function and salt field. I will send an email to the all users with a link that allows these change his password

# css - 响应式 css 背景图像

> ID：12609110
> 
> 赞同：214
> 
> 时间：2012-09-26T19:35:23.877
> 
> 标签：css, responsive-design, background-image, image-resizing

我有一个网站（g-floors.eu），我想让背景（在 css 中我为内容定义了一个 bg-image）也响应。不幸的是，我真的不知道如何做到这一点，除了我能想到的一件事，但这是一种解决方法。创建多个图像，然后使用 css 屏幕大小来更改图像，但我想知道是否有更实用的方法来实现这一点。

基本上我想要实现的是图像（带有水印'G'）会自动调整大小而不会显示更少的图像。如果可以当然

链接：[g-floors.eu](http://www.g-floors.eu)

我到目前为止的代码（内容部分）

```
#content {
  background-image: url('../images/bg.png');
  background-repeat: no-repeat;
  position: relative;
  width: 85%;
  height: 610px;
  margin-left: auto;
  margin-right: auto;
} 
```

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-09-26T19:51:02.147

如果您希望根据浏览器窗口的大小缩放相同的图像：

```
background-image:url('../images/bg.png');
background-repeat:no-repeat;
background-size:contain;
background-position:center; 
```

不要设置宽度、高度或边距。

编辑：关于不设置宽度、高度或边距的上一行是指 OP 关于随窗口大小缩放的原始问题。在其他用例中，您可能需要在必要时设置宽度/高度/边距。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-11-16T20:12:23.367

通过此代码，您的背景图像将居中并固定它的大小，无论您的 div 大小发生什么变化，适用于小、大、正常大小，最适合所有人，我将它用于我的背景大小或 div 大小可以更改的项目

```
background-repeat:no-repeat;
-webkit-background-size:cover;
-moz-background-size:cover;
-o-background-size:cover;
background-size:cover;
background-position:center; 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-03-17T22:43:35.583

试试这个 ：

```
background-image: url(_images/bg.png);
background-repeat: no-repeat;
background-position: center center;
background-attachment: fixed;
background-size: cover; 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-09-26T19:49:18.437

CSS：

```
background-size: 100%; 
```

这应该够了吧！:)

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-11-25T15:57:10.987

这是我使用的响应式背景图像的 sass mixin。它适用于任何`block`元素。当然，同样可以在纯 CSS 中工作，您只需`padding`手动计算即可。

```
@mixin responsive-bg-image($image-width, $image-height) {
  background-size: 100%;
  height: 0;
  padding-bottom: percentage($image-height / $image-width);
  display: block;
}

.my-element {
  background: url("images/my-image.png") no-repeat;

  // substitute for your image dimensions
  @include responsive-bg-image(204, 81);
} 
```

示例[http://jsfiddle.net/XbEdW/1/](http://jsfiddle.net/XbEdW/1/)

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-01-28T04:28:02.060

## 这是一个简单的=）

```
body {
    background-image: url(http://domains.com/photo.jpeg);
    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
} 
```

看看[**jsFiddle 演示**](https://jsfiddle.net/omarjuvera/2raxtxqr/15/)

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-04-22T05:20:21.147

这是我得到的最好方法。

```
#content   {
    background-image:url('smiley.gif');
    background-repeat:no-repeat;
    background-size:cover;
} 
```

检查[w3schools](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-size&preval=auto)

更多可用选项

```
background-size: auto|length|cover|contain|initial|inherit; 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-11-24T06:05:38.277

```
#container {
    background-image: url("../images/layout/bg.png");
    background-repeat: no-repeat;
    background-size: 100% 100%;
    height: 100vh;
    margin: 3px auto 0;
    position: relative;
} 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2013-11-16T18:36:39.167

我用了

```
#content {
  width: 100%;
  height: 500px;
  background-size: cover;
  background-position: center top;
} 
```

效果很好。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-07-25T08:27:45.703

通过在底部图像高度/宽度 x 100 = padding-bottom % 中添加填充来响应网站：

[http://www.outsidethebracket.com/responsive-web-design-fluid-background-images/](http://www.outsidethebracket.com/responsive-web-design-fluid-background-images/)

* * *

更复杂的方法：

[http://voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios](http://voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios)

* * *

尝试调整背景 eq Firefox Ctrl + M 以查看我认为最好的神奇脚本：

[http://www.minimit.com/demos/fullscreen-backgrounds-with-centered-content](http://www.minimit.com/demos/fullscreen-backgrounds-with-centered-content)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-04-26T15:07:15.287

你可以使用这个。我已经测试并且它的工作100％正确：

```
background-image:url('../images/bg.png'); 
background-repeat:no-repeat;
background-size:100%;
background-position:center; 
```

您可以在此屏幕尺寸模拟器上测试您的网站的响应能力：http: [//www.infobyip.com/testwebsiteresolution.php](http://www.infobyip.com/testwebsiteresolution.php)

每次进行更改时清除缓存，我更喜欢使用 Firefox 来测试它。

如果您想使用其他站点/URL 的图像而不喜欢： `background-image:url('../images/bg.png');` //此结构是使用您自己托管服务器中的图像。然后像这样使用： `background-image: url(http://173.254.28.15/~brettedm/wp-content/uploads/Brett-Edmonds-Photography-14.jpg) ;`

享受 ：）

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-02-10T13:51:40.717

如果您希望无论纵横比如何都显示整个图像，请尝试以下操作：

```
background-image:url('../images/bg.png');
background-repeat:no-repeat;
background-size:100% 100%;
background-position:center; 
```

无论屏幕尺寸如何，这都会显示整个图像。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-12-03T15:09:53.477

```
 <style> 
         * {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

#res_img {
  background: url("https://s15.postimg.org/ve2qzi01n/image_slider_1.jpg");
  width: 100%;
  height: 500px;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: center;
  border: 1px solid red;
}

@media screen and (min-width:300px) and (max-width:500px) {
  #res_img {
    width: 100%;
    height: 200px;
  }
}

    </style>

<div id="res_img">
</div> 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-01-23T06:20:09.873

只需两行代码，就可以了。

```
#content {
  background-image: url('../images/bg.png');
  background-size: cover;
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-06-15T10:10:01.160

使用 jQuery 自适应平方比

```
var Height = $(window).height();
var Width = $(window).width();
var HW = Width/Height;

if(HW<1){
      $(".background").css("background-size","auto 100%");
    }
    else if(HW>1){
      $(".background").css("background-size","100% auto");
    } 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-09-08T14:24:16.043

```
background:url("img/content-bg.jpg") no-repeat;
background-position:center; 
background-size:cover; 
```

或者

```
background-size:100%; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-04-25T13:18:54.107

我认为，最好的方法是：

```
body {
    font-family: Arial,Verdana,sans-serif;
    background:url("/images/image.jpg") no-repeat fixed bottom right transparent;
} 
```

这样就无需再做任何事情，而且非常简单。

至少，它对我有用。

我希望它有所帮助。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-12T01:39:30.713

尝试使用`background-size`但使用**两个参数**一个用于宽度，另一个用于高度

```
background-image:url('../images/bg.png'); 
background-repeat:no-repeat;
background-size: 100% 100%; // Here the first argument will be the width 
// and the second will be the height.
background-position:center; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-02-21T12:56:40.460

```
background: url(/static/media/group3x.6bb50026.jpg);
background-size: contain;
background-repeat: no-repeat;
background-position: top; 
```

position 属性可用于根据需要对齐顶部底部和中心，背景尺寸可用于中心裁剪（封面）或完整图像（包含或 100%）

# java - ServletRequest getInputStream - 读取超时

> ID：12609111
> 
> 赞同：2
> 
> 时间：2012-09-26T19:35:29.083
> 
> 标签：java, struts

每隔一段时间，在不到一秒钟的时间里，我在尝试获取特定请求的发布数据时会出现读取超时。这对我来说很奇怪，这会发生，我想知道是否有人以前见过。这发生在公共生产 Web 应用程序中，并且在一天中的随机时间发生大约 8 个实例（每个实例持续一秒或更短，看到 1 到 15 个读取超时）。这是堆栈跟踪的相关部分：

```
Caused by: java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:751)
    at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:781)
    at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:116)
    at org.apache.coyote.http11.InternalInputBuffer.doRead(InternalInputBuffer.java:710)
    at org.apache.coyote.Request.doRead(Request.java:428)
    at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)
    at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:403)
    at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)
    at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:162)
    at com.offers.util.OffersHttpServletRequest.popuplateReqBytes(OffersHttpServletRequest.java:117)
    at com.offers.util.OffersHttpServletRequest.getPostData(OffersHttpServletRequest.java:64)
    at com.util.TrackAction.getPostData(TrackAction.java:148)
    ... 40 more 
```

---这种困惑已在评论中得到解答---

请注意，OffersHttpServletRequest 是一个覆盖某些方法（getPostData、getInputStream、isSecure、getReader、getRequestURL、getProtocol）的类 - 但是 popuplateReqBytes 调用 super.getInputStream()*而不是*覆盖的 getInputStream 方法。所以我对堆栈跟踪如何从 ServletRequestWrapper.getInputStream 返回到 OffersHttpServletRequest.getInputStream 有点困惑。

---结束混乱---

- - 更新 - -

根据 jtahlborn 的观察进行更改后更改了堆栈跟踪。改变*并没有*解决问题。

# php - 从字符串'word'中获取int值

> ID：12609117
> 
> 赞同：1
> 
> 时间：2012-09-26T19:35:41.117
> 
> 标签：php

> **可能重复：**
> [在 PHP 中将单词转换为数字](https://stackoverflow.com/questions/1077600/converting-words-to-numbers-in-php)

我一直在四处寻找，但到目前为止还没有遇到任何东西。是否可以执行以下操作：

```
$columns = 'four';
$columns_int = PHP_FUNCTION($columns);

return $columns_int;

// returns int(4) 
```

我相信我在玩 Ruby 并看到了类似的东西，但认为这在 PHP 中也可用。谢谢！

# javascript - 如何使用 javascript 下载网页

> ID：12609121
> 
> 赞同：6
> 
> 时间：2012-09-26T19:35:54.200
> 
> 标签：javascript

> **可能重复：**
> [Javascript 可以读取任何网页的源代码吗？](https://stackoverflow.com/questions/680562/can-javascript-read-the-source-of-any-web-page)

我想使用 javascript 下载文件并解析它。我需要一个像 php 的函数`file_get_contents()`。我寻找它，但我找不到任何东西。

更新：感谢您的解决方案，但我忘了写 AJAX 不适合这个问题，因为我无权访问远程地址并且有跨域请求问题。我也无法设置任何 php 代理，因为我的主机阻止了对 fopen 的访问。我更喜欢纯 JavaScript 解决方案。

PS：对不起，但这个问题确实是重复的（我不知道），[这里](https://stackoverflow.com/questions/680562/can-javascript-read-the-source-of-any-web-page)提供的解决方案非常适合这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T19:43:15.680

查看 XMLHttp 请求

[http://www.w3schools.com/xml/xml_http.asp](http://www.w3schools.com/xml/xml_http.asp)

或者 JQuery 的 load、$.get、$.post 和 $.ajax 方法。这里是一个示例

```
var request = new XMLHttpRequest(); 
request.open("GET", 'http://www.url.com');
request.onreadystatechange = function() { 
if (request.readyState === 4 && request.status === 200) {

//response handling code

}
};
request.send(null); // Send the request now 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T19:40:14.057

简短的问题，简短的回答：您可能想玩一些 Ajax。通过调用本地 php 脚本制作 a`file_get_contents()`并将其返回页面，或者直接调用外部 URL。您的浏览器可能不允许您这样做。

**补充：** 您更新了您的问题，说您*更喜欢纯 javascript 解决方案*。我不认为你可以，因为你试图获取不是[JSONP](http://en.wikipedia.org/wiki/JSONP)的东西。另外，您说您的主机阻塞`fopen()`，我曾经在他们做同样事情的主机上。我惊讶地发现他们没有阻止[使用 sockets](http://php.net/manual/en/function.fsockopen.php)，这是我的解决方法：

```
$server = "www.example.com";
$path = "/path/index.html";
$type = "HTTP/1.1";

$fp = fsockopen($server, 80, $errno, $errstr, 30);
if (!$fp) echo "$errstr ($errno)<br />\n";
else {
    $out  = "GET $path $type\r\n";
    $out .= "Host: $server\r\n";
    $out .= "User-Agent: Mozilla 4.0\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    $contents = "";
    while (!feof($fp)) $contents .= fgets($fp, 128);
    fclose($fp);
    echo $contents;
} 
```

我意识到您不想要 PHP 代理解决方案，我认为您可能别无选择。试试看，对我很有用。如果您的主机也被阻止`fsockopen()`，您可能会不走运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:38:31.420

看看[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)。它从网络上异步下载文件。

如果您打算使用`jquery`，请查看 .ajax()，它包装了 XMLHttpRequest。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:59:25.313

**iframe：** 在您的页面上放置一个不可见的 iframe，

```
<iframe id="frame1" style="display:none"></iframe> 
```

触发下载[点击或其他事件处理程序等]，并设置 iframe 的 URL。例如 ，`"/location/file"`

```
var iframe =  document.getElementById("frame1");
iframe .src = "/location/file"; 
```

这将触发从浏览器下载。

另一种方法是简单地导航到下载 url，浏览器发现 MIME 类型无法显示并会显示一个下载对话框。利用

```
window.location.href = "/location/file"; 
```

# grails - 当 getter 返回相同的类时，自引用 hasMany 会抛出 MappingException

> ID：12609123
> 
> 赞同：1
> 
> 时间：2012-09-26T19:35:59.760
> 
> 标签：grails

我想知道以下场景是否是 Grails 错误，或者我是否需要一种不同的方式来表示递归关系。

创建 Grails 2.1.0 应用程序（使用 create-app）和下面的域类（使用 create-domain-class）会在“grails run-app”上产生 MappingException：

```
class Person {
    static hasMany = [neighbours:Person]

    public Person getBestFriend() {
        return null
    }
}

Caused by MappingException: Foreign key (FKC4E39B558E488775:person [])) must have same  number of columns as the referenced primary key (person [id])
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

如果`getBestFriend()`返回类型为`Object`或任何其他类型，则应用程序启动正常。更改hasMany的`Person`类型也是如此。`neighbours`添加`static transients = ['bestFriend']`没有产生任何变化。

这个异常主要出现在我使用复合键引用子对象时的搜索中，但我找不到与此示例类似的情况。提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:41:19.057

我在这里尝试过，同样的问题发生了。一种解决方案是使用[命名查询](http://grails.org/doc/2.1.0/ref/Domain%20Classes/namedQueries.html)。

```
class Person {

    static hasMany = [neighbours:Person]

    //static transients = ['bestFriend']

    //public Person getBestFriend() {
//      return null
//  }

    static namedQueries  = {
        bestFriend {
        }
    }

    static constraints = {

    }
} 
```

# java - 从 netbeans 创建 MySQL 数据库

> ID：12609124
> 
> 赞同：0
> 
> 时间：2012-09-26T19:36:10.753
> 
> 标签：java, mysql, netbeans-7

我正在关注有关使用休眠的 netbeans 教程（[http://netbeans.org/kb/docs/web/hibernate-webapp.html](http://netbeans.org/kb/docs/web/hibernate-webapp.html)）。在 section 下`Creating the Database`，第 2 步说：

```
After installing the plugin, start the MySQL database by expanding
the Databases node in the Services window, right-clicking the
MySQL Server node and choosing Start. 
```

但是我的 Netbeans 7.2 中没有这样`start`的选项。实际上 MySQL 数据库实际上是`jdbc:mysql://localhost:3306/mysql?zeroDateTimeBehavior=convertToNull [myname on Default schema]`. 虽然它列出了我现有的数据库，但无法执行教程所需的步骤 2 到 4。我正在为 MySQL 使用 XAMPP。我有 Mac OS X Lion 10.8。

例如，我什至如何进入`Create MySQL database`对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:46:04.960

我找到了另一个教程，它承诺帮助在 Netbeans 中配置 MySQL：http: [//netbeans.org/kb/docs/ide/mysql.html](http://netbeans.org/kb/docs/ide/mysql.html)。我认为它有我寻求的答案。

# css - IE7/8 修复背景大小：封面

> ID：12609128
> 
> 赞同：0
> 
> 时间：2012-09-26T19:36:33.750
> 
> 标签：css, drupal-7

我知道有关于如何修复`background-size: cover`IE7/8 的帖子，但我的背景是在 Drupal 中构建的幻灯片。我通过 louisremi 加载了 jquery.backgroundSize.js 但什么也没发生。我将 JS 添加到站点以便它正在加载，但是我是否需要配置一些东西才能让它工作？我对JS不好。

现在我使用了过滤方法：[http ://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

但它只引入了一个静态图像。无论如何要在IE中保留我的幻灯片吗？

网站 Droga5 做到了，但我不知道是怎么做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T14:51:22.940

如果您对 jQuery 或 Zepto 方法没问题，这里是解决方案：[https ://github.com/pakcheong/jqthumb](https://github.com/pakcheong/jqthumb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:22:24.817

您可以为此使用 IE 过滤器。在你的 CSS 添加：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='image.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='image.gif',
sizingMethod='scale')"; 
```

如果您使用 javascript 更改 html *img src*，您还必须在过滤器中更改它。

# objective-c - 如何转换为 NSObjects 数组？

> ID：12609133
> 
> 赞同：0
> 
> 时间：2012-09-26T19:36:44.537
> 
> 标签：objective-c, arrays, nsobject

来自Java，我正在写：

```
NSObject* obj[] = (NSObject* []) [self getResult]; 
```

编译器抱怨`Cast to incomplete type 'NSObject *[]'`

将对象转换为对象数组的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:40:25.553

鉴于您承认对语言和库的新颖性：您通常会使用集合类型，例如`NSArray`. 同样，`-getResult`将返回一个`NSArray`.

* * *

另请注意，在 ObjC 中，类型转换实际上是将`NSObject`类型指针作为另一种类型传递——没有隐式提升（正如您在 Java 中看到的那样）。如果您想将 an 向下转换`NSObject`为 an `NSArray`，则可以使用`NSArray * array = (NSArray*)[self getResult];`. 同样，没有提升 - 如果结果是 an `NSString`，那么您仍然在运行时处理 an `NSString`。

Tommy 的回答 (+1) 演示了如何创建一个`NSArray`包含一个元素的元素——另一种编写方式，它不依赖于最新的编译器功能是`NSArray * array = [NSArray arrayWithObject:[self getResult]];`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:44:46.717

假设`getResult`返回一个对象，而您想要的是一个对象数组，从 Xcode 4.4 开始，您可能会使用：

```
NSArray *objects = @[ [self getResult] ]; 
```

这将创建一个（不可变）数组，其中只包含一个对象——无论结果`getResult`是什么。

在 Objective-C 中，数组可以包含任何对象；您不会创建数组来保存特定类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:42:47.330

您应该考虑使用内置的 Array 类。要么`NSArray`或`NSMutableArray`

# php - 如何识别客户端 PHP Socket？

> ID：12609134
> 
> 赞同：3
> 
> 时间：2012-09-26T19:36:46.897
> 
> 标签：php, sockets

所以我有一个普通的 PHP 套接字（或多或少与 php 手册中的示例代码相同）。我找到了一种方法来检测客户端何时断开连接（无论是否正常），但我如何识别它是谁？IP 地址的使用已停止，因为可能有多个用户使用相同的 IP。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:43:10.907

如果您考虑[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)或 UDP 数据包标头中传递的内容，则其中包含的身份信息并不多，只有 IP 地址。如果您想知道客户的身份，您需要让他们发送某种唯一标识符（例如@madara 评论的用户名和密码）。如果它们来自同一个 IP，这意味着它们使用的是同一个路由器，在这种情况下，它的目的是掩盖路由器后面的设备。

要检测谁断开了连接，您首先需要确定谁连接了。每个连接都有自己的套接字，即使它们来自同一个 IP 地址。在伪 php 中：

```
// Store all active sockets in an array
$online_users = array();

// Open up a listening socket
$listener = socket_create(...);
socket_listen($listener);
$client_sock = socket_accept($listener);

// Have the client send authentication stuff after connecting and
// we'll receive it on the server side
$username = socket_read($client_sock, $len);
// Map the username to the client socket
$online_users[$username] = $client_sock;

// Continue to read or write data to/from the sockets. When a read or
// write fails, you just iterate through the array to find out who
// it was. If the socket $failed_sock failed, do as follows
foreach ($online_users as $name => $socket)
{
    if ($socket == $failed_sock)
    {
        // $name is the username of the client that disconnected
        echo $name . ' disconnected';
        // You can then broadcast to your other clients that $name
        // disconnected. You can also do your SQL query to update the
        // db here.
        // Finally remove the entry for the disconnected client
        unset($online_users[$name]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:51:21.383

从逻辑上讲，在您的情况下，这很难！这里只是一个想法：

如果是聊天，如何将所有在线用户存储在数据库或具有以下列的平面文件中：

```
NICKNAME
IP
TIME 
```

并创建一个函数来检查这些并相应地更新时间，比如说每 10 秒。基于此，您将能够确定何时以及谁在线/离线。

- - - 更新 - - -

检查您的套接字错误？使用 get_last_error() 检查错误代码。

```
$errorcode = socket_last_error(); 
$errormsg=socket_strerror($errorcode); 
die("Error: (".$errorcode.") ".$errormsg."\n"); 
```

取消设置用户：

```
if($data === FALSE) {
    socket_close($clients[$i]['socket']);
    unset($clients[$i]);
    echo 'Client disconnected!',"\r\n";
    continue;
} 
```

从数据库中取消设置客户端。您还可以通过他们的 ID 从 $clients 数组中识别确切的昵称。

# linux - Linux：iframe 被注入 php 文件，但修改时间戳未被修改

> ID：12609137
> 
> 赞同：0
> 
> 时间：2012-09-26T19:37:00.103
> 
> 标签：linux

我有一个 php 站点，其中包含一个定期注入 iframe 的文件。文件的权限为 544，目录的权限为 555。

该文件显然已经注入了 iframe，但是当我运行 stat 时，修改日期仍然很旧（即早在黑客发生之前）。

如何在不更新修改标志的情况下修改文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:41:05.600

修改日期可以使用[touch](http://www.manpagez.com/man/1/touch/)命令设置为过去，如下所示：

```
touch -t <timestamp> filename 
```

我的猜测是你的系统上有一个有趣的人。考虑“[强化](https://www.google.at/search?q=linux%20hardening)”你的系统，特别是确保所有内容都被记录（并且日志受到保护，最好在只有你有权访问的远程服务器上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:43:12.137

如果是黑客攻击，攻击者很可能只是将文件的修改时间重置为原始修改时间。

如果您想确保文件具有其原始完整性，请使用签名函数（例如 sha1、md5）创建文件的校验和以引用或使用 SCM 工具（如 git 或 svn）来跟踪您的更改文件。

# java - 迭代中的 Java 垃圾收集对象创建

> ID：12609147
> 
> 赞同：1
> 
> 时间：2012-09-26T19:37:55.810
> 
> 标签：java, garbage-collection

看看下面的代码

```
for(int i = 0; i < 10; i++) {
    new Object();
} 
```

由于没有对对象的引用，垃圾收集器会在每次迭代中启动吗？通常不鼓励在没有任何引用的情况下在迭代中创建对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:41:34.550

> 由于没有对对象的引用，垃圾收集器会在每次迭代中启动吗？

可能不是。这不像 JVM 通常是这样引用计数的。将创建少量垃圾 - 每个对象在迭代后都有*资格收集，但未指定实际**收集*这些对象的时间。

> 通常不鼓励在没有任何引用的情况下在迭代中创建对象吗？

毫无目的地创建对象通常不是一个好主意。我不确定您所说的“没有任何参考”是什么意思。如果您*有理由*在每次迭代中创建一个新对象，并且在迭代完成后不需要它，那很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:40:19.517

Java 不保证垃圾收集何时开始。它只保证 GC （我在这里解释一下）：

> 最终，引用计数为 的超出范围的对象`0`将被垃圾回收。

即使打电话[`System.gc()`](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/System.html#gc%28%29)也不能保证任何事情。远离任何依赖于非确定性行为的代码。

正如 Jon Skeet 所指出的，大多数 Java GC 不使用引用计数。在这里阅读更多[http://www.ibm.com/developerworks/java/library/i-garbage2/](http://www.ibm.com/developerworks/java/library/i-garbage2/)和这里[http://www.ibm.com/developerworks/java/library/i-garbage1/](http://www.ibm.com/developerworks/java/library/i-garbage1/)（文章是关于IBM 的 VM - 其他 VM 的 GC 算法可能会有所不同）。我主要使用术语作为过度简化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:40:12.123

不，垃圾收集器不会在每次迭代中启动。收集器不是完全确定的 - 没有一组特定的约束导致它运行。垃圾收集器不会仅仅因为您创建了它可以收集的对象而运行。

但是，在每次迭代中创建的对象立即符合垃圾回收条件——这是两个不同的概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:40:35.863

您不知道 GC 何时运行。

您在循环中在堆上创建的每个对象在超出范围时都有资格进行 GC，但不能保证每次迭代都运行 GC。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T19:40:43.760

垃圾收集器在生成已满（或在某个占用率）时启动，而不是在代码块退出时启动。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T20:28:40.600

关于为短期对象优化垃圾收集的评论是有效的。

此外，请注意，在这种情况下**，HotSpot 的某些方面**也可能会影响垃圾收集。

[逃逸分析](http://en.wikipedia.org/wiki/Escape_analysis)在 Java 6 中被添加到 Oracle/OpenJDK JVM 中，并且[在 OpenJDK 7 的 HotSpot 编译器中默认启用](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis)：

> 逃逸分析是一种技术，Java 热点服务器编译器可以通过该技术分析新对象的使用范围并决定是否将其分配到 Java 堆上。

从理论上讲，这将允许编译器确定该对象只能在方法内访问，因此它可以分配在堆栈上而不是堆上。因此，它*可以*在每次迭代结束时从内存中释放出来，而根本不需要垃圾收集（类似于在每次迭代后显式释放 C/C++ 中的内存）。

在实践[中，OpenJDK 7 中的转义分析文档](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis)说，JDK 7 编译器当前*“不会用堆栈分配替换非全局转义对象的堆分配”*。所以看起来堆栈分配是一种可以实现的优化（IMO），但现在似乎没有实现。

另一个优化是让编译器（或 HotSpot）检测在此示例中创建的对象从未使用过，并且其构造函数不会修改应用程序其他地方的状态/导致副作用。在这种情况下，它可以完全从编译代码中消除该语句，因此`new Object()`永远不会执行。

总之，HotSpot 继续变得更加智能，并且已经针对此类情况进行了一些优化。

现在（正如其他人提到的）GC 不太可能在每次迭代后立即启动，但它可能会很快释放这些对象（伊甸园空间/年轻一代等）。

将来 HotSpot 可能会使用堆栈分配，因此确实会在每次迭代后释放内存。或者编译器或 HotSpot 可能会完全消除此特定语句。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T19:44:06.520

> 垃圾收集器会在每次迭代中启动吗

你不知道也不应该关心，因为这些对象将在年轻一代中，并且该区域的清理速度很快（需要小房子维护）。

> 通常不鼓励在没有任何引用的情况下在迭代中创建对象吗？

依靠。如果是这样，即在*本地范围内*创建匿名对象实际上可以帮助 GC 将它们识别为符合 GC 的条件。

# visual-studio-2010 - OpenCV 和 VS2010：致命错误 LNK1104：致命错误 LNK1104：无法打开文件 'tbb_debug.lib

> ID：12609157
> 
> 赞同：4
> 
> 时间：2012-09-26T19:38:45.017
> 
> 标签：visual-studio-2010, opencv

我尝试按照本指南使用 Visual Studio C++ 2010（使用 Windows 7 64 位）安装 OpenCV：[在 Visual C++ 2010 Express 中安装 OpenCV 2.4.3](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-in-visual-c-2010-express)

我正在使用 OpenCV-2.4.2，因此更改了所有附加依赖项，例如从`"opencv_calib3d240d.lib"`到`"opencv_calib3d242d.lib"`。

但是，当我尝试运行用于显示图像的示例代码时出现以下错误：

```
<quote>1>LINK : fatal error LNK1104: cannot open file 'tbb_debug.lib'</quote> 
```

我尝试将文件夹从“ia32”切换到“intel64”。我还尝试将“tbb_debug.lib”添加到 Linker->Input 中的“Additional Dependencies”。

另一件事：OpenCV 的位置在另一个硬盘驱动器 (D:) 上，而不是我的操作系统和 VS (C:)，但我认为这不应该有所作为 [编辑：我已移至 C:，但仍然得到相同问题。]

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:35:07.407

我遇到了这个问题并更改`Common Language Runtime Support (/clr)`为 `No Common Language Runtime Support`配置属性-> 常规-> 通用语言运行时。它的工作成功。

# javascript - 将文本文件分配给 js 变量？

> ID：12609161
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:39:00.593
> 
> 标签：javascript

有没有办法将像“info.txt”这样的文件分配给js变量，这样我就可以将它设置为div的内部html？

这是我目前拥有的：

```
texts = //load content of a text file (text file contains the html etc)
document.getElementById("main").innerHTML = text; //assign 
```

然后我会有：

```
<div id="main">//content shows here</div> 
```

这可能吗 ？我应该提到我没有使用图书馆。我想学会在没有人的情况下做到这一点。文本文件还需要设置权限类型吗？它会显示 HTML 布局还是仅显示为文本？

编辑：文本文件在同一台服务器上:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:57:27.870

如果它在服务器上，您可以通过 ajax 调用获取它。

ActiveX 案例仅适用于用户机器上的文件。

如果使用`innerHTML`，它将显示为 HTML。

# gridview - Android - 在哪里创建新类？

> ID：12609168
> 
> 赞同：0
> 
> 时间：2012-09-26T19:39:20.493
> 
> 标签：gridview, baseadapter

我尝试在 Android 之上（两个教程成功），我遇到了这个问题： http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)的第 5 步，说“创建一个新的类...”在哪里创建它？

Eclipse 说“在它自己的文件中”，新文件应该在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:33:18.147

除非涉及到包，否则无论其他类在哪里。

# asp.net - MySQL外键，在不删除原始记录的情况下跳闸“级联删除”

> ID：12609169
> 
> 赞同：0
> 
> 时间：2012-09-26T19:39:29.900
> 
> 标签：asp.net, mysql, foreign-keys, relational-database, cascade

我目前在一个系统中工作，我们使用 MySQL 来存储我们所有的关系数据，但我们的审计日志被保存在 MongoDB 文档数据库中以进行长期存档。在“项目”（系统中最大的父实体）的情况下，我希望允许用户删除项目并强制级联删除有效地清理我的所有相关数据的数据库。（这就是它变得棘手的地方）

理想情况下，一旦删除，我的“项目”表中的单数记录将在删除过程中持续存在，被标记为“存档”项目，然后我的代码将知道如果用户尝试访问存档项目，我们将加载单个页面显示删除之前在项目生命周期内收集的所有 MongoDB 审计日志。

我想我可以通过选择项目记录、运行删除、重新插入数据并重新使用分配给项目的原始 AutoInc id 在事务中完成这项工作。关于这个感觉很脏，所以我想知道是否有人看到更好的方法来做到这一点。

理想情况下，如果有一种方法可以在不实际删除原始记录的情况下触发表的外键上的级联事件，我将拥有我需要的东西，但我还没有看到任何这样的野兽。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:46:25.220

我过去使用的只是添加一个存档列并将其设为布尔值。因此，当用户“删除”某些内容时，它只会切换标志。显然，只有当您使用 php 之类的东西来处理请求并且不允许用户直接修改数据库时，才能做到这一点。需要更多关于您计划如何执行此操作的信息。

我会把这个放在评论中，但我认为我没有足够高的评价来评论其他问题。

# mercurial - 水银服务器钩子

> ID：12609172
> 
> 赞同：1
> 
> 时间：2012-09-26T19:39:49.430
> 
> 标签：mercurial

我正在使用 mercurial-server 和 hgadmin。所有用户都使用 hg 用户推送 repos。它们的密钥存储在 /etc/mercurial-server/keys 中，所有的 repos（包括 hgadmin）都存储在 /var/lib/mercurial-server/repos 中。

问题：/var/lib/mercurial-server/repos 上的任何钩子都没有工作，尽管每个人都可以毫无问题地推/拉，并且 -v 没有显示错误。

退货时`hg showconfig hooks`的PS ：`/var/lib/mercurial-server/repos/hgadmin``/var/lib/mercurial-server/repos/hgadmin/.hg/hgrc from untrusted user hg, group hg`

我知道我需要添加一个`hgrc`文件

```
[trusted]
user hg 
```

但是没有用户hg...

编辑：

```
/var/lib/mercurial-server:                                                                                                           
[root@275238 mercurial-server]# ls -a -l                                                                                                      
total 40
drwx------  4 hg   hg   4096 Sep 26 22:35 .                                                                                                  
drwxr-xr-x 29 root root 4096 Sep 23 18:01 ..                                                                                                            
-rw-------  1 hg   hg     34 Sep 26 21:59 .bash_history                                                                                           
-rw-r--r--  1 hg   hg     18 May 10 21:45 .bash_logout                                                                                              
-rw-r--r--  1 hg   hg    176 May 10 21:45 .bash_profile                                                                                             
-rw-r--r--  1 hg   hg    124 May 10 21:45 .bashrc                                                                                                     
-rw-r--r--  1 hg   hg    610 Sep 23 18:01 .mercurial-server                                                                                  
drwxrwxr-x  5 hg   hg   4096 Sep 23 19:04 repos                                                                                     
drwxr-xr-x  2 hg   hg   4096 Sep 23 18:04 .ssh                                                                                                      
-rw-------  1 hg   hg    577 Sep 23 19:22 .viminfo        

/var/lib/mercurial-server/repos:
[root@275238 repos]# ls -a -l
total 20
drwxrwxr-x 5 hg hg 4096 Sep 23 19:04 .
drwx------ 4 hg hg 4096 Sep 26 22:35 ..
drwxr-xr-x 3 hg hg 4096 Sep 23 18:06 anewrepo
drwxr-xr-x 8 hg hg 4096 Sep 27 20:48 gamequark
drwxrwxr-x 3 hg hg 4096 Sep 27 20:48 hgadmin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:02:23.720

`hg`需要成为所有者，`hg`需要成为其`/var/lib/mercurial-server`下的所有事物的组；现在是这样吗？

# java - Wu的抗锯齿算法，非黑线

> ID：12609185
> 
> 赞同：1
> 
> 时间：2012-09-26T19:40:41.990
> 
> 标签：java, colors, antialiasing

我一直在使用[Xiaolin Wu 的](http://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)抗锯齿算法。但是，我在亮度调整方面遇到了障碍。我能够让它在黑色背景下正常工作。现在我一直致力于在我正在绘制的像素和我正在绘制的像素之间进行颜色混合。（基于 0 - 1 浮点数混合两种颜色）。我遇到了一个问题，它与它自身的高亮度融合在一起。关于如何处理这个问题的任何见解？

如果需要，我可以发布代码。

编辑：这发生在线连接处（绘制连接的线）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T12:25:27.013

Wu 将起点/终点与线本身分开绘制，因此您应该只能绘制互连线的最后一个终点。

# ruby-on-rails - 使用 Heroku 控制台的整数与字符串问题

> ID：12609189
> 
> 赞同：1
> 
> 时间：2012-09-26T19:40:55.537
> 
> 标签：ruby-on-rails

我最近使用 heroku 控制台所做的更改出现错误。

在我应用这个之后：

```
u = User.where(:email => 'brian@lumeo.com').first
u.invitation_limit = 10
u.save 
```

我收到此错误：

```
ActionView::Template::Error (comparison of String with 0 failed): 
```

在这行代码上：

```
<% if current_user.invitation_limit > 0 %> 
```

邀请限制是数据库中的一个整数字段，数字10显然是一个整数，但是我需要像这样使用to_i吗？

```
u.invitation_limit = 10.to_i 
```

好奇这是否是我不知道的常见事情。

如果您对此有所了解，请告诉我。

在此先感谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T14:23:07.610

只需在控制台中编写以下魔术命令：`heroku restart`然后按“Enter”。

每当您在日志中遇到非常非常奇怪的错误时，它就像一种魅力。

现在`Heroku`对我来说就像一个旧版本的`Windows`- 有什么问题吗？只需重新启动它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:23:12.407

我的猜测是，当您从数据库中提取数据时，rails 会将所有内容作为字符串值返回 - 您使用的是 JSON 格式吗？因为这将读取为字符串值。

我会用这个：

```
<% if current_user.invitation_limit.to_i > 0 %> 
```

# linux - libusb_interrupt_transfer 没有响应

> ID：12609196
> 
> 赞同：3
> 
> 时间：2012-09-26T19:41:31.477
> 
> 标签：linux, usb, buffer, interrupt, libusb

我的问题与这里提出的问题非常相似：[libusb 中断传输](https://stackoverflow.com/questions/6474949/libusb-interrupt-transfer)

我正在对驱动程序 Linux-G13_1.0-r44.zip 进行逆向工程

在这里找到：[http ://code.google.com/p/linux-g13-driver/downloads/list](http://code.google.com/p/linux-g13-driver/downloads/list)

让它在 RHEL5 下工作。

似乎一切正常，但是我从 libusb_interrupt_transfer 得到的唯一响应是超时错误“-7”

输出：“lsusb -v -d 046d:c21c”

```
Bus 006 Device 010: ID 046d:c21c Logitech, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x046d Logitech, Inc.
  idProduct          0xc21c
  bcdDevice            2.03
  iManufacturer           0
  iProduct                1 G13
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           41
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      0 No Subclass
      bInterfaceProtocol      0 None
      iInterface              0
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.11
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      61
          Report Descriptor: (length is 61)
            Item(Global): Usage Page, data= [ 0x00 0xff ] 65280
                            (null)
            Item(Local ): Usage, data= [ 0x00 ] 0
                            (null)
            Item(Main  ): Collection, data= [ 0x01 ] 1
                            Application
            Item(Global): Logical Minimum, data= [ 0x00 ] 0
            Item(Global): Logical Maximum, data= [ 0xff 0x00 ] 255
            Item(Local ): Usage, data= [ 0x01 ] 1
                            (null)
            Item(Global): Report ID, data= [ 0x01 ] 1
            Item(Global): Report Count, data= [ 0x07 ] 7
            Item(Global): Report Size, data= [ 0x08 ] 8
            Item(Main  ): Input, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Global): Report ID, data= [ 0x03 ] 3
            Item(Local ): Usage, data= [ 0x02 ] 2
                            (null)
            Item(Global): Report Count, data= [ 0xdf 0x03 ] 991
            Item(Main  ): Output, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Global): Report ID, data= [ 0x07 ] 7
            Item(Local ): Usage, data= [ 0x03 ] 3
                            (null)
            Item(Global): Report Count, data= [ 0x04 ] 4
            Item(Main  ): Feature, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Global): Report ID, data= [ 0x04 ] 4
            Item(Local ): Usage, data= [ 0x04 ] 4
                            (null)
            Item(Main  ): Feature, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Global): Report ID, data= [ 0x05 ] 5
            Item(Local ): Usage, data= [ 0x05 ] 5
                            (null)
            Item(Main  ): Feature, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Global): Report ID, data= [ 0x06 ] 6
            Item(Local ): Usage, data= [ 0x06 ] 6
                            (null)
            Item(Global): Report Count, data= [ 0x01 0x01 ] 257
            Item(Main  ): Feature, data= [ 0x02 ] 2
                            Data Variable Absolute No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Main  ): End Collection, data=none
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               2
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               1 
```

在 Constants.h 中定义：

```
#define G13_INTERFACE 0
#define G13_KEY_ENDPOINT 1
#define G13_LCD_ENDPOINT 2
#define G13_KEY_READ_TIMEOUT 0
#define G13_VENDOR_ID 0x046d
#define G13_PRODUCT_ID 0xc21c
#define G13_REPORT_SIZE 8
#define G13_LCD_BUFFER_SIZE 0x3c0
#define G13_NUM_KEYS 40 
```

G13.cpp：

```
#include "Constants.h"
...
int G13::read() {
    unsigned char buffer[G13_REPORT_SIZE];
    int size;
    cout << "prebuffer: " << buffer << "\n";
    cout << "presize: " << size << "\n";
    int error = libusb_interrupt_transfer(handle, LIBUSB_ENDPOINT_IN | G13_KEY_ENDPOINT, buffer, G13_REPORT_SIZE, &size, 1000);
    cout << "buffer: " << buffer << "\n";
    cout << "size: " << size << "\n";
    if (error && error != LIBUSB_ERROR_TIMEOUT) {
        std::map<int, std::string> errors;
        errors[LIBUSB_SUCCESS] = "LIBUSB_SUCCESS";
        errors[LIBUSB_ERROR_IO] = "LIBUSB_ERROR_IO";
        errors[LIBUSB_ERROR_INVALID_PARAM] = "LIBUSB_ERROR_INVALID_PARAM";
        errors[LIBUSB_ERROR_ACCESS] = "LIBUSB_ERROR_ACCESS";
        errors[LIBUSB_ERROR_NO_DEVICE] = "LIBUSB_ERROR_NO_DEVICE";
        errors[LIBUSB_ERROR_NOT_FOUND] = "LIBUSB_ERROR_NOT_FOUND";
        errors[LIBUSB_ERROR_BUSY] = "LIBUSB_ERROR_BUSY";
        errors[LIBUSB_ERROR_TIMEOUT] = "LIBUSB_ERROR_TIMEOUT";
        errors[LIBUSB_ERROR_OVERFLOW] = "LIBUSB_ERROR_OVERFLOW";
        errors[LIBUSB_ERROR_PIPE] = "LIBUSB_ERROR_PIPE";
        errors[LIBUSB_ERROR_INTERRUPTED] = "LIBUSB_ERROR_INTERRUPTED";
        errors[LIBUSB_ERROR_NO_MEM] = "LIBUSB_ERROR_NO_MEM";
        errors[LIBUSB_ERROR_NOT_SUPPORTED] = "LIBUSB_ERROR_NOT_SUPPORTED";
        errors[LIBUSB_ERROR_OTHER] = "LIBUSB_ERROR_OTHER    ";
        cerr << "Error while reading keys: " << error << " (" << errors[error]
                << ")" << endl;
        cerr << "Stopping daemon" << endl;
        return -1;
    }

    if (size == G13_REPORT_SIZE) {
        parse_joystick(buffer);
        parse_keys(buffer);
        send_event(EV_SYN, SYN_REPORT, 0);
    }
    return 0;
} 
```

“sudo ./Linux-G13-Driver”，在设备上混合密钥时，返回：

```
Found Device: 0x1abebd20
Kernel driver detached
Device Loaded: 0x1abebd20
loading /root/.g13/bindings-0.properties
prebuffer: ï¿½
presize: 255
buffer: #
size: 0
prebuffer: #
presize: 0
buffer: #
size: 0
prebuffer: #
presize: 0
buffer: #
size: 0
prebuffer: #
presize: 0
^C
Segmentation fault 
```

我包括 prebuffer 和 presize 行只是为了证明它实际上是在初始化缓冲区。同样正如我在顶部引用的帖子中提到的 Arne，该设备似乎可以正确打开，并且两个接口都已正确声明。他提到的唯一让我有点困惑的是“SET_INTERFACE”和“SET_CONFIGURATION”，但也许这只是Windows的东西？

我应该注意，我必须做两件事才能在 rhel5 上正确构建它：

1.  由于 Linux/uinterface.h 中的无符号引用，必须将“include Linux/interface.h”行添加到一堆头文件中

2.  必须构建 libusb-1.0，因为它不包含在我的特定 rhel5 构建中

我对 linux 有点陌生，所以我尝试了 libusb-1.0.8 和 libusb-1.0.9 均无济于事。我的 Windows 直觉告诉我 libusb 构建是我的问题，并且由于某种原因，该库实际上并未接收来自 USB 设备的中断。

对于任何重大的菜鸟错误，我提前道歉。有人有什么想法吗？

# wpf - 对网格进行排序时，工具提示绑定搞砸了

> ID：12609199
> 
> 赞同：0
> 
> 时间：2012-09-26T19:41:50.023
> 
> 标签：wpf, data-binding, binding, tooltip, telerik-grid

我将 Telerik 网格控件绑定到 ViewModel。其中一个属性可以包含相对较长的字符串，难以放入网格中。因此，我将单元格显示为带有 TextTrimming="WordEllipsis" 的 TextBlock，并在 ToolTip 控件中显示全文：

```
<telerik:GridViewDataColumn UniqueName="TaskDetails" DataMemberBinding="{Binding TaskDetails}" Header="Task details"  IsReadOnly="True" Width="*" >
    <telerik:GridViewDataColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding TaskDetails}" ToolTipService.ShowDuration="300000" TextTrimming="WordEllipsis" Height="30">
                <TextBlock.ToolTip>
                    <ToolTip>
                        <TextBlock Width="350" TextWrapping="WrapWithOverflow" Text="{Binding TaskDetails}" />
                    </ToolTip>
                </TextBlock.ToolTip>
            </TextBlock>
        </DataTemplate>
    </telerik:GridViewDataColumn.CellTemplate>
</telerik:GridViewDataColumn> 
```

一切正常，直到用户对网格进行排序。如果应用了排序，TextBlock 会显示正确的数据，但工具提示会显示先前位于该位置的单元格的文本。就像它没有被排序一样。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:04:07.697

我们遇到了类似的问题，尽管使用了不同的网格。数据模板包含一个用户控件，在里面我们有这个：

```
public WebSnapshotCell()
{
  InitializeComponent();

  this.ToolTipOpening += new ToolTipEventHandler(WebSnapshotCell_ToolTipOpening);
}

void WebSnapshotCell_ToolTipOpening(object sender, ToolTipEventArgs e)
{
  // Refresh tooltip's data context
  ToolTip tooltip = this.ToolTip as ToolTip;
  if (tooltip != null)
  {
    tooltip.DataContext = this.DataContext;
  }
} 
```

在您的情况下，您可以尝试将 TextBox 放在 UserControl 中，或者以其他方式处理 ToolTipOpening 事件，或者将 ToolTip 的 DataContext 显式绑定到 TextBlock 的 DataContext

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T15:18:54.457

我最终在我的网格中使用了自定义控件：

```
<telerik:GridViewDataColumn UniqueName="TaskDetails" 
                        DataMemberBinding="{Binding TaskDetails}" 
                        Header="Task details"  
                        Width="500"
                        IsReadOnly="True">
<telerik:GridViewDataColumn.CellTemplate>
    <DataTemplate>
        <cc:LongTextBlock Text="{Binding TaskDetails}" ToolTipShowDuration="300000" VerticalAlignment="Center" ToolTipWidth="350" />
    </DataTemplate>
</telerik:GridViewDataColumn.CellTemplate> 
```

LongTextBlock 是具有 3 个依赖属性的简单控件：

```
public class LongTextBlock : Control
{

static LongTextBlock()
{
    DefaultStyleKeyProperty.OverrideMetadata(typeof(LongTextBlock), new FrameworkPropertyMetadata(typeof(LongTextBlock)));
}

#region DependencyProperty Text of LongTextBlock

public string Text
{
    get { return (string)GetValue(TextProperty); }
    set { SetValue(TextProperty, value); }
}

public static readonly DependencyProperty TextProperty =
    DependencyProperty.Register("Text", typeof(string), typeof(LongTextBlock),
            new UIPropertyMetadata(string.Empty));

#endregion

#region DependencyProperty ToolTipShowDuration of LongTextBlock

public int ToolTipShowDuration
{
    get { return (int)GetValue(ToolTipShowDurationProperty); }
    set { SetValue(ToolTipShowDurationProperty, value); }
}

public static readonly DependencyProperty ToolTipShowDurationProperty =
    DependencyProperty.Register("ToolTipShowDuration", typeof(int), typeof(LongTextBlock),
            new UIPropertyMetadata(10000));

#endregion

#region DependencyProperty ToolTipWidth of LongTextBlock

public double ToolTipWidth
{
    get { return (double)GetValue(ToolTipWidthProperty); }
    set { SetValue(ToolTipWidthProperty, value); }
}

public static readonly DependencyProperty ToolTipWidthProperty =
    DependencyProperty.Register("ToolTipWidth", typeof(double), typeof(LongTextBlock),
            new UIPropertyMetadata(350.0));

#endregion
} 
```

和控件的样式：

```
<Style TargetType="{x:Type local:LongTextBlock}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:LongTextBlock}">
                <TextBlock Text="{TemplateBinding Text}" TextTrimming="WordEllipsis" ToolTipService.ShowDuration="{TemplateBinding ToolTipShowDuration}">
                    <TextBlock.ToolTip>
                        <ToolTip>
                            <TextBlock Width="{TemplateBinding ToolTipWidth}" TextWrapping="WrapWithOverflow" Text="{TemplateBinding Text}" />
                        </ToolTip>
                    </TextBlock.ToolTip>
                </TextBlock>
            </ControlTemplate>
        </Setter.Value>
    </Setter>

</Style> 
```

# php - FB 登录按钮未在 Chrome 和 IE 中显示

> ID：12609203
> 
> 赞同：0
> 
> 时间：2012-09-26T19:42:09.277
> 
> 标签：php, facebook, internet-explorer, google-chrome

我在这里看到了类似的问题，并且我添加了许多有意义的解决方案（HTML Doc 更改、重新定位和重新排序脚本/按钮），但该按钮仅在 Firefox 中呈现并且可点击。

Facebook选项卡/页面界面在这里：facebook.com/TodaysAesthetics/app_157293451075619

单击链接可以看到托管页面...（我无法发布更多链接）

FB 设置：应用程序域：有和没有 www 的托管站点（我读到 www 可能是罪魁祸首） 带有 Facebook 登录的网站 -> 站点 URL：DOMAIN/facebook/（我尝试过 DOMAIN/facebook/ 和 DOMAIN/facebook/todays）

这是我的代码：

```
 <?php 
          define('YOUR_APP_ID', '[edit]');
          define('YOUR_APP_SECRET', '[edit]');
          function get_facebook_cookie($app_id, $application_secret) {
          $args = array();
          list($encoded_sig, $payload) = explode('.', $_COOKIE['fbsr_' . $app_id], 2);
          $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
          $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
          if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
             return null;
          }
          $expected_sig = hash_hmac('sha256', $payload,
          $application_secret, $raw = true);
          if ($sig !== $expected_sig) {
              return null;
          }
          $token_url = "https://graph.facebook.com/oauth/access_token?"
         . "client_id=" . $app_id . "&client_secret=" . $application_secret.     "&redirect_uri=" . "&code=" . $data['code'];
          $response = @file_get_contents($token_url);
          $params = null;
          parse_str($response, $args);
          return $args;
        }
          $cookie = get_facebook_cookie(YOUR_APP_ID, YOUR_APP_SECRET);
          if ($cookie) {
               $user = json_decode(file_get_contents('https://graph.facebook.com    /me?access_token=' . $cookie['access_token']));
        }
    ?>
          <?php if ($cookie) { ?>
 <form>
              <input type="button" id="hide" value="Print" onClick="printc()">
            </form>
          [MY COUPON IMAGE]
            <?php } else { ?>
            <fb:login-button scope="email,user_birthday,user_location" onlogin="window.location.reload()" autologoutlink="true">Connect to Facebook to View Special</fb:login-button>
                      <?php } ?>
                <div id="fb-root"></div>
            <script src="http://connect.facebook.net/en_US/all.js"></script>
            <script>
              FB.init({appId: '<?= YOUR_APP_ID ?>', status: true,
                       cookie: true, xfbml: true,oauth:true});
              FB.Event.subscribe('auth.login', function(response) {
                window.location.reload();
              });
            </script> 
```

请让我知道我是否可以提供任何其他信息，或者我是否错过了任何答案。我已经尝试更改这些脚本与 div 等的顺序，但此时我会尝试任何方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:52:31.253

您已经使用 HTTP 嵌入了 JS SDK，因此当通过 HTTPS 请求页面时，Chrome 和 IE 会阻止它执行。*（顺便说一句，如果您刚刚查看了这些浏览器的错误控制台，您很容易发现这一点 - 所以请熟悉这种调试工具并在将来使用它们！）*

代替

```
<script src="http://connect.facebook.net/en_US/all.js"></script> 
```

利用

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

– 这让浏览器自己选择了正确的协议。

# c++ - Mac上的Opencv包含错误

> ID：12609204
> 
> 赞同：3
> 
> 时间：2012-09-26T19:42:20.143
> 
> 标签：c++, macos, opencv, include

我使用mac端口在我的mac山狮上安装了opencv。然后我写了一个 OpenCV_util.cc 文件，它有：

```
#include <cv.h>
#include <cvaux.h>
#include <highgui.h> 
```

当我尝试用 编译它时`g++ OpenCV_util.cc`，出现以下错误：

```
OpenCV_util.h:1:16: error: cv.h: No such file or directory
OpenCV_util.h:2:19: error: cvaux.h: No such file or directory
OpenCV_util.h:3:21: error: highgui.h: No such file or directory 
```

然后我用

```
g++ OpenCV_util.cc -I /opt/local/include/opencv -L /opt/local/lib 
```

编译器找到了 cv.h、cvaux.h 和 highgui.h。但是，我收到以下错误：

```
In file included from OpenCV_util.h:1,
                 from OpenCV_util.cc:1:
/opt/local/include/opencv/cv.h:63:33: error: opencv2/core/core_c.h: No such file or directory
/opt/local/include/opencv/cv.h:64:33: error: opencv2/core/core.hpp: No such file or directory 
```

......（很多这样的错误）

我检查了/opt/local/include/opencv2/core/，所有文件都在那里。我认为这是因为在 cv.h 中，它具有：

```
#include "opencv2/core/core_c.h"
#include "opencv2/core/core.hpp" 
```

但不是绝对路径。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:03:48.413

我认为你不应该包括`/opt/local/include/opencv`. 您可能应该只使用此路径：`/opt/local/include/`并在使用时在需要的地方使用 opencv 或 opencv2`#include` 例如

```
#include <opencv/cv.h>
#include <opencv/cvaux.h>
#include <opencv/highgui.h> 
```

和类似的东西：

```
g++ OpenCV_util.cc -I /opt/local/include/ -L /opt/local/lib 
```

# php - 如何从 PHP 中的缓存标头中删除“max-age”参数？

> ID：12609205
> 
> 赞同：0
> 
> 时间：2012-09-26T19:42:23.073
> 
> 标签：php, caching, browser-cache

如何`max-age`从 PHP 中的缓存标头中删除参数？

如果我注释掉 中的`session.cache_expire`变量`PHP.ini`，它只会将 max-age 设置为 10800。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:45:11.950

```
session_cache_expire(0); 
```

或者如果要删除缓存，请使用：

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

# javascript - 使用验证引擎成功功能不起作用

> ID：12609206
> 
> 赞同：0
> 
> 时间：2012-09-26T19:42:24.420
> 
> 标签：javascript, jquery, ajax

我无法使脚本工作，当我运行它时它总是返回错误

```
$(document).ready(function()
{
    $("#form1").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "note/note.php",
        success: false
    });
    if (success == "true")
    {
        function()
        {
            window.alert("Report Sent!");
            //write a confirmation to the user
            document.getElementById("update").innerHTML="Report Sent!";
            setTimeout(function()
            {
                document.getElementById("update").innerHTML="";
            },3000);
        }
    }
}); 
```

什么可能是一个好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:50:52.773

这是问题所在：

```
$(document).ready(function()
{
    $("#form1").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "note/note.php",
        success: false
    }); 
```

您将一个对象文字传递给该`validationEngine`方法，该`success`属性应该是一个函数，其中包含您希望在验证成功时看到执行的代码，而是将其设置为 false，然后像这样继续：

```
if (success == "true")
{
     function()
     { 
```

您不仅使用实际上是对象属性的变量（因此您正在创建一个全局变量，即**EVIL**），您正在声明该函数，但没有调用它。我注意到您正在检查 的值`success`，期望它是一个字符串。您的 php 脚本的返回值将作为参数传递给成功回调函数。我也冒昧地更改了函数以反映这一点：

```
$(document).ready(function()
{
    $("#form1").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "note/note.php",
        success: function(response)//response is what the php script returns
        {
            //the function from your if branch goes here
        }
    }); 
```

你应该没事。完整的代码应该类似于：

```
$(document).ready(function()
{//notice the curly braces around what you're passing to validationEngine
    $("#form1").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "note/note.php",
        success: function(response)
        {
            if (response !== 'true')
            {
                if (window.console)
                {
                    console.log(response);
                    alert('check your console to see the response');
                }
                else
                {
                    alert(response);
                }
                return;
            }
            alert("Report Sent!");//no need for window here
            document.getElementById("update").innerHTML="Report Sent!";
            setTimeout(function()
            {
                document.getElementById("update").innerHTML="";
            },3000);
        }
    });
    //As I said, you're passing an object, so you could write the code above like so:
    var validationArgs = {ajaxSubmit:true,ajaxSubmitFile:'note/note.php'};
    validationArgs.success = function()
    {
        //your function
    };
    $('#form1').validationEngine(validationArgs);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:57:20.820

您需要为此使用回调函数。

```
$(document).ready(function() {
    var update = $("#update");
    // Callback 
    var onSuccess = function() {
        alert("Report Sent!");

        //write a confirmation to the user           
        update.html("Report Sent!");

        setTimeout(function(){
             update.html("");
        },3000);
    };

    $("#form1").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "note/note.php",
        success: onSuccess
   });
}); 
```

# haskell - mapM 的懒惰版本

> ID：12609208
> 
> 赞同：11
> 
> 时间：2012-09-26T19:42:33.810
> 
> 标签：haskell, io, lazy-sequences

假设，我在使用 IO 时得到了大量的项目列表：

```
as <- getLargeList 
```

现在，我正在尝试`fn :: a -> IO b`申请`as`：

```
as <- getLargeList
bs <- mapM fn as 
```

`mapM`有 type `mapM :: Monad m => (a -> m b) -> [a] -> m [b]`，这就是我在类型匹配方面所需要的。但它会在内存中构建所有链，直到返回结果。我正在寻找类似的`mapM`，它将懒惰地工作，以便我可以`bs`在 tail 仍在构建时使用 head of。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T20:48:28.193

不要`unsafeInterleaveIO`为此使用任何惰性 IO。这正是创建迭代器要解决的问题：避免惰性 IO，这会提供不可预测的资源管理。诀窍是**永远不要构建列表**并使用迭代器不断地对其进行流式传输，直到您完成使用它为止。我将使用我自己的库中的示例`pipes`来演示这一点。

首先，定义：

```
import Control.Monad
import Control.Monad.Trans
import Control.Pipe

-- Demand only 'n' elements
take' :: (Monad m) => Int -> Pipe a a m ()
take' n = replicateM_ n $ do
    a <- await
    yield a

-- Print all incoming elements
printer :: (Show a) => Consumer a IO r
printer = forever $ do
    a <- await
    lift $ print a 
```

现在让我们对我们的用户刻薄，并要求他们为我们生成非常大的列表：

```
prompt100 :: Producer Int IO ()
prompt100 = replicateM_ 1000 $ do
    lift $ putStrLn "Enter an integer: "
    n <- lift readLn
    yield n 
```

现在，让我们运行它：

```
>>> runPipe $ printer <+< take' 1 <+< prompt100
Enter an integer:
3<Enter>
3 
```

它只提示用户输入一个整数，因为我们只需要一个整数！

如果你想`prompt100`用 的输出替换`getLargeList`，你只需写：

```
yourProducer :: Producer b IO ()
yourProducer = do
    xs <- lift getLargeList
    mapM_ yield xs 
```

...然后运行：

```
>>> runPipe $ printer <+< take' 1 <+< yourProducer 
```

这将懒惰地流式传输列表，并且永远不会在内存中构建列表，所有这些都不会使用不安全的`IO`黑客攻击。要更改您需要多少元素，只需更改您传递给的值`take'`

有关更多此类示例，请阅读[`pipes`教程](http://hackage.haskell.org/packages/archive/pipes/2.3.0/doc/html/Control-Pipe-Tutorial.html)。`Control.Pipe.Tutorial`

要了解有关惰性 IO 为何会导致问题的更多信息，请阅读 Oleg 关于该主题的原始幻灯片，您可以在[此处](http://okmij.org/ftp/Haskell/Iteratee/IterateeIO-talk-notes.pdf)找到。他很好地解释了使用惰性 IO 的问题。任何时候你不得不使用惰性 IO，你真正想要的是一个迭代库。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T20:26:04.673

IO monad 确实具有延迟效果的机制。它被称为`unsafeInterleaveIO`。您可以使用它来获得所需的效果：

```
import System.IO.Unsafe

lazyMapM :: (a -> IO b) -> [a] -> IO [b]
lazyMapM f [] = return []
lazyMapM f (x:xs) = do y <- f x
                       ys <- unsafeInterleaveIO $ lazyMapM f xs
                       return (y:ys) 
```

这就是惰性 IO 的实现方式。实际执行效果的顺序很难预测并且将由结果列表中元素的评估顺序决定，这是不安全的。出于这个原因，重要的是任何 IO 影响`f`都是良性的，因为它们应该是顺序不敏感的。一个通常足够良性影响的一个很好的例子是从只读文件中读取。

# jquery - 在rails中创建一个类似自动建议搜索框的twitter

> ID：12609211
> 
> 赞同：0
> 
> 时间：2012-09-26T19:42:53.837
> 
> 标签：jquery, twitter, autocomplete, ruby-on-rails-3.2, autosuggest

请那些知道如何创建类似自动建议搜索框的 twitter 或 facebook 的人？我一直在尝试实现这一点......这是我从[此处输入链接描述](http://s254.codeinspot.com/q/1379267)中获得的一些代码。

```
 <div class="search_index">

 <div id = "testsearch">
 <%=render :partial => 'search'%> // partial where the updated search elements will appear from 
 </div>

<%=form_tag(search_path,:method=>'get',:remote=>true) do%>

   <%=text_field_tag :search%>
   <%= submit_tag "search" ,:name=>nil%>

<%end%>

<%= set_focus_to_id 'search' %>  // I have a helper "set_focus_to_id"

<script> // small javascript file :)

 document.observe("dom:loaded", function() {   // ensures the page is loaded first
 new Form.Element.Observer(                    // Observes the text_field_tag every 2     seconds
  'search',
   2,
   respondToChange                         //refrences the function in the Layout      
   )                                         // on a change in search calls   respondToChange
  });

  </script>

  </div> 
```

在我的标签上

```
 <script>
 function respondToChange() {
 $('search').up('form').submit()            // The ".up finds the form in the DOM"
 };
 </script> 
```

代码似乎不起作用，它甚至没有响应

**请问有人知道如何以更有效的方式实现此功能**

我真的需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:08:55.473

一个不错的选择是使用预先存在的脚本：

1.  [http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)
2.  [http://jquery.malsup.com/twitter/](http://jquery.malsup.com/twitter/)

他们创建了自己的，它有一些值得考虑的功能。甚至使用。

# c# - Windows 8 中的 XmlnsDefinitionAttribute 和 XmlnsPrefix 模拟是什么？

> ID：12609212
> 
> 赞同：3
> 
> 时间：2012-09-26T19:42:57.347
> 
> 标签：c#, xaml, windows-8

我可以找到对名为 XmlnsDefinitionAttribute 的结构的引用，但无法弄清楚如何在程序集上设置它...

（我想要实现的是能够为我的各种库提供默认的 xmlns 前缀名称）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:00:37.407

遗憾的是，我不相信这些属性存在于 Windows 8 xaml 堆栈中。不过，我很乐意纠正这一点。

# jquery - 在 ul 的每个第一个孩子上添加类，并在每个悬停时删除

> ID：12609213
> 
> 赞同：0
> 
> 时间：2012-09-26T19:42:58.070
> 
> 标签：jquery

我有一个 ul 重复作为不同的类别。在 jquery 的帮助下，我在 ul li 的每个第一个孩子上添加了该类，然后每当我将鼠标悬停在任何 li 上时我都将其删除。但是其中一个缺陷是每当我将鼠标悬停在任何元素上时，都会删除每个类别 ul li 第一个子类，但我希望一次悬停时只删除特定的 ul li 第一个子类。

```
$(".product-left ul li:first-child img").addClass("first_child");

$(".product-left ul li ").mouseover(function() {
  $(".product-left ul li:first-child img" ).each.removeClass("first_child");
}).mouseout(function() { 
  $(".product-left ul li:first-child img").addClass("first_child");
}); 
```

html

```
<div class="product-left">

     <ul>
              <li><div class="pr_name"> <a href=" subproductpage.php?id=4"><div class="img_50_35">
        <img width="50" height="35" src="childsubcategory_image/20120925_085744_accomodation.gif"> </div>
        <span class="product_nm"> cosmo_sub_child_2 </span></a>
        </div>
  </li>
                 <li><div class="pr_name"> <a href=" subproductpage.php?id=3"><div class="img_50_35">
        <img width="50" height="35" src="childsubcategory_image/20120925_080004_search.gif"> </div>
        <span class="product_nm"> cosmo_sub_child </span></a>
        </div>
       </li>
                 </ul>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:45:45.427

`this`在事件处理程序中使用`mouseover`来引用触发事件的元素：

```
$(".product-left ul li").mouseover(function() {
    $("img", this).removeClass("first_child");
}).mouseout(function() { 
    $("img", this).addClass("first_child");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:46:42.993

尝试这个

```
$(".product-left ul").find('img:eq(0)').addClass("first_child");
$(".product-left ul li").mouseover(function() {
    $(this).parent().find("img:eq(0)").removeClass("first_child");
}).mouseout(function() {
    $(this).parent().find("img:eq(0)").addClass("first_child");
});​ 
```

[小提琴](http://jsfiddle.net/sushanth009/NNz9W/)_

标记而不是标记

**更新代码**

[更新的小提琴](http://jsfiddle.net/sushanth009/ZbMfC/)

# c# - 使用 SQL Server 数据库事务作为 C# 锁

> ID：12609215
> 
> 赞同：1
> 
> 时间：2012-09-26T19:43:01.580
> 
> 标签：c#, asp.net, sql-server

我正在将一个网站移动到多个实例。这意味着我不能再使用 a`lock`来确保服务不会在自身之上运行。所以我需要一种跨实例锁定的方法。

我可能应该使用带有消息队列的后台工作人员，但我觉得这对于这项服务来说太过分了。我想知道我是否可以以某种方式将数据库事务用作锁。我不在乎速度 - 我希望它简单且有效。

这是我想做的事情：

```
public class MultiInstanceLock : IDisposable
{
    private readonly string lockId;
    private Transaction transaction;
    private LockEntity lockEntity;

    public MultiInstanceLock(String _lockId)
    {
        lockId = _lockId;

        transaction = new Transaction(IsolationLevel.RepeatableRead, lockId);
        lockEntity = new LockEntity(lockId);
        if(lockEntity.IsNew)
            lockEntity.Id = lockId;

        lockEntity.LockedOn = DateTime.Now;
        lockEntity.Save();
    }

    public void Dispose()
    {
        if (lockEntity != null)
        {
            lockEntity.UnlockedOn = DateTime.Now;
            lockEntity.Save();
        }

        if(transaction != null)
            transaction.Commit();
    }
} 
```

这是用法：

```
using(var l = new MultiInstanceLock("Foo"))
{
    ...do foo...
} 
```

这行得通吗？有没有更好的办法？

*我已经注意到该事务将适用于我的 using 语句中的任何数据库访问，这很糟糕。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:58:44.883

查看 SQL Server applocks - 正是您需要的（尝试锁定命名资源）。

[http://msdn.microsoft.com/en-us/library/ms189823.aspx](http://msdn.microsoft.com/en-us/library/ms189823.aspx)

我们为此编写了一个小的 IDisposable 包装器，以使获取和清理更容易。

# search - 用于从一个较大字符串中的集合中查找每个字符串出现次数的算法

> ID：12609221
> 
> 赞同：0
> 
> 时间：2012-09-26T19:43:40.580
> 
> 标签：search, substring

我有一个大字符串 A 和一组相对较小的字符串 B*。

如何有效地从 A 中的 B* 中找到每个字符串的出现次数？

我怀疑后缀树可以在这里使用，但我不知道该怎么做。

# java - 如何声明一个变量？

> ID：12609223
> 
> 赞同：-2
> 
> 时间：2012-09-26T19:43:48.940
> 
> 标签：java

我需要在下面我使用过的代码中声明 pct 并从 netbeans 得到错误：

```
pct d = Percent.parsepct(discountpercentTextField.getText()); 
```

声明 pct 的确切代码是什么？另外，我在哪里声明这个？一开始？

这是完整的代码文件：

```
 /*
       * To change this template, choose Tools | Templates
       * and open the template in the editor.
       */

       package murach.forms;
import murach.business.InvoiceCalculations;
 import java.text.NumberFormat;

/**
 *
 * @author james
 */
 public class InvoiceForm extends javax.swing.JFrame {

/**
 * Creates new form InvoiceForm
 */
public InvoiceForm() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    messageLabe1 = new javax.swing.JLabel();
    messageLabe2 = new javax.swing.JLabel();
    messageLabe3 = new javax.swing.JLabel();
    messageLabe4 = new javax.swing.JLabel();
    messageLabe5 = new javax.swing.JLabel();
    customertypeTextField = new javax.swing.JTextField();
    subtotalTextField = new javax.swing.JTextField();
    discountpercentTextField = new javax.swing.JTextField();
    discountamountTextField = new javax.swing.JTextField();
    totalTextField = new javax.swing.JTextField();
    calculateButton = new javax.swing.JButton();
    exitButton = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Invoice Total Calculator");

    messageLabe1.setText("Customer Type:");

    messageLabe2.setText("Subtotal:");

    messageLabe3.setText("Discount Percent:");

    messageLabe4.setText("Discount Amount:");

    messageLabe5.setText("Total:");

    customertypeTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            customertypeTextFieldActionPerformed(evt);
        }
    });

    subtotalTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            subtotalTextFieldActionPerformed(evt);
        }
    });

    discountpercentTextField.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            discountpercentTextFieldActionPerformed(evt);
        }
    });

    calculateButton.setMnemonic('c');
    calculateButton.setText("Calculate");
    calculateButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            calculateButtonActionPerformed(evt);
        }
    });

    exitButton.setMnemonic('x');
    exitButton.setText("Exit");
    exitButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            exitButtonActionPerformed(evt);
        }
    });

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(38, 38, 38)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(messageLabe1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 126, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 137, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(messageLabe5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(totalTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 145, Short.MAX_VALUE)
                    .add(discountamountTextField))
                .add(org.jdesktop.layout.GroupLayout.TRAILING, discountpercentTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 144, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(customertypeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 40, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(subtotalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 144, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(74, Short.MAX_VALUE))
        .add(layout.createSequentialGroup()
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .add(calculateButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 124, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(exitButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 77, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(43, 43, 43))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(31, 31, 31)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(customertypeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(subtotalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(discountpercentTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(discountamountTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(6, 6, 6)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(messageLabe5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(totalTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(18, 18, 18)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(exitButton)
                .add(calculateButton))
            .addContainerGap(58, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>                        

private void customertypeTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                      
    // TODO add your handling code here:

}                                                     

private void subtotalTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    // TODO add your handling code here:

}                                                 

private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
       // TODO add your handling code here:
    System.exit(0);

}                                          
private boolean isValidData ()
{
    SwingValidator sv= new SwingValidator();
    return
      sv.isPresent(customertypeTextField, "Customer Type")&&
      sv.isPresent(subtotalTextField, "Subtotal")&&
      sv.isDouble(subtotalTextField, "Subtotal");      
}        

private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
      // TODO add your handling code here:
   double c = Double.parseDouble(customertypeTextField.getText());
   double s = Double.parseDouble(subtotalTextField.getText());
   pct d = Percent.parsepct(discountpercentTextField.getText());
   double a = Double.parseDouble(discountamountTextField.getText());
   double total = InvoiceCalculations.calculateTotal(c, s, d);
   NumberFormat currency = NumberFormat.getCurrencyInstance();
   totalTextField.setText(currency.format(total));
}                                               

private void discountpercentTextFieldActionPerformed(java.awt.event.ActionEvent evt) {                                                         
    // TODO add your handling code here:

}                                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(InvoiceForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            InvoiceForm frame  =new InvoiceForm();
            frame.setVisible (true);
            frame.setLocationRelativeTo(null);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton calculateButton;
private javax.swing.JTextField customertypeTextField;
private javax.swing.JTextField discountamountTextField;
private javax.swing.JTextField discountpercentTextField;
private javax.swing.JButton exitButton;
private javax.swing.JLabel messageLabe1;
private javax.swing.JLabel messageLabe2;
private javax.swing.JLabel messageLabe3;
private javax.swing.JLabel messageLabe4;
private javax.swing.JLabel messageLabe5;
private javax.swing.JTextField subtotalTextField;
private javax.swing.JTextField totalTextField;
// End of variables declaration                   
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:47:06.533

没有足够的信息给出明确的答案，但它看起来像是类`parsepct`的工厂方法`Percent`。如果这是真的，那么问题是您没有为变量声明使用正确的类型。正确的是：

```
Percent d = Percent.parsepct(discountpercentTextField.getText()); 
```

这声明了一个名为`d`type的变量`Percent`，并立即为其分配工厂方法返回的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:47:14.907

我会假设你想这样做：

```
Percent pct = Percent.parsepct(discountpercentTextField.getText()); 
```

但我会*认真*建议您参加一点 Java 速成课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:48:05.083

如果您想声明某种原始类型的变量，那么您可能想查看本[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)以了解如何在类中声明变量..

*注意： -`pct`不是有效的原始类型。所以，编译器无法理解它。

如果您要声明某个类的引用..那么您实际上需要使用名称定义某些类`Percent`..

***编辑***： -

看到你的代码后，看起来你实际上正在使用一些编译器不知道的其他类型。你应该有一个用 name 定义的类`pct`，告诉编译器这是我正在创建的。

```
 double s = Double.parseDouble(subtotalTextField.getText());
   pct d = Percent.parsepct(discountpercentTextField.getText()); 
```

就像类`parseDouble`中的静态方法`Double`返回类型一样`double`，您需要有一个`Percent`具有静态方法的类，该类`parsepct()`将返回您声明为`pct`..（我认为应该是`Percent`）的类型。

# ruby - Activerecord 3.2.8 关联错误

> ID：12609224
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:43:50.107
> 
> 标签：ruby, multithreading, activerecord

我在 ActiveRecord 3.2.8 中遇到了奇怪的错误，代码如下：

我有 2 个模型 - 客户和发票。

```
class Customer < ActiveRecord::Base
  has_many :invoices
end

class Invoice < ActiveRecord::Base
  belongs_to :customer

  def self.last(customer)
    customer.invoices.order("some_date_column DESC").first
  end
end 
```

我正在运行与此类似的代码：

```
Thread.new do
  ActiveRecord::Base.connection_pool.with_connection do
    Customer.all.each do |customer|
      invoice = Invoice.last(customer)
      ...
    end
  end
end 
```

运行该代码时，有时会出现以下奇怪错误：

```
/var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:25:in 'initialize': wrong number of arguments (1 for 0) (ArgumentError)
from /var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:25:in 'new'
from /var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations/collection_association.rb:25:in 'initialize'
from /var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations.rb:157:in 'new'
from /var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations.rb:157:in 'association'
from /var/lib/gems/1.8/gems/activerecord-3.2.8/lib/active_record/associations/builder/association.rb:44:in 'invoices'
from .../models/invoice.rb:7:in 'last' 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:59:34.417

当你遇到这种错误时

```
wrong number of arguments (X for Y) 
```

这意味着您试图调用一个传递与预期不同数量的参数的方法。在您的情况下，您调用的方法不应该接收任何参数（`for 0`），但您尝试传递一个（`1 for`）。从错误的最后一行来看，问题似乎是`Invoice.last(customer)`

# wordpress - Wordpress 漂亮的永久链接“未指定输入文件”错误

> ID：12609225
> 
> 赞同：0
> 
> 时间：2012-09-26T19:43:51.807
> 
> 标签：wordpress

使用漂亮的永久链接时，我遇到了可怕的“未指定输入文件”错误，但我认为这是 WordPress 问题，而不是重写模块问题。我在 IIS7 和 WP 3.4.2 上。漂亮的固定链接是：

```
http://www.mydomain.com/blog/2012/09/20/post-name/ 
```

*这正确地重写*为：

```
http://www.mydomain.com/blog/index.php/2012/09/20/post-name/ 
```

我认为重写是正确的，因为当我手动转到后一个 url 时，我仍然得到错误。所以我认为问题在于WordPress。不过，为了完整起见，这里是重写规则：

> ```
>  <rule name="Main Rule" stopProcessing="true">
>       <match url="^blog/(.+)" />
>       <conditions logicalGrouping="MatchAll">
>         <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
>         <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
>       </conditions>
>       <action type="Rewrite" url="/blog/index.php/{R:1}" />
>     </rule> 
> ```

SO上有很多关于这个问题的帖子，但它们似乎都是重写问题，所以我不*认为*这是我遇到的问题的任何问题的重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:50:08.377

嗯，这是一个重写问题，有点。在上面的模式中，我没有考虑到该站点位于共享主机上，并且`/blog`实际上指向`\subfolder\blog`. 更改它如下修复它：

```
 <rule name="Main Rule" stopProcessing="true">
      <match url="^blog/(.+)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      </conditions>
      <action type="Rewrite" url="/subfolder/blog/index.php/{R:1}" />
    </rule> 
```

这并不理想，因为我必须硬编码子文件夹的名称，但现在，我会接受它。

# php - 在浏览器上显示 mysql 存储的时间戳值

> ID：12609241
> 
> 赞同：0
> 
> 时间：2012-09-26T19:45:03.837
> 
> 标签：php, mysql, timestamp

我正在尝试在我的浏览器上显示 mysql 存储的 unix 时间戳值（并将它们保存到 CSV 文件中）。这些值存储为 int (11)。问题是，当我显示它们时，我看到了“d”、“P”、“j”、“M”和其他用于格式化日期的字符，而不是实际的时间戳。怎么了？

```
<?php

/* MySQL connection and database connection code */
mysql_query ("SELECT emailaddress, subscribedate FROM email_list_subscribers WHERE subscriberid = '$sid'");

$email_result= mysql_query ("SELECT emailaddress, subscribedate FROM  email_list_subscribers WHERE subscriberid = '$sid'");
if (mysql_num_rows ($email_result) == 0) {
  $email = '';
  $subscribedate = '';
} else {
  $email = mysql_fetch_assoc ($email_result);
  $email =  $email['emailaddress'];
  $subscribedate = (string) ( $email['subscribedate']);
  echo $sid . " : " . $subscribedate . "<br/>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:52:25.773

您必须将时间戳值转换为日期时间才能显示格式化信息：

```
 $timestamp = '1348617600';

    $datetime = date("Y-m-d H:i:s", $timestamp);

    echo $datetime; 
```

你也可以使用：

```
echo strtotime($timestamp); 
```

**小心，你必须考虑到时区**

# wpf - 如何将正则表达式 d[1-13] 模式绑定到 devexpress 的 TextEdit.Mask 属性中？

> ID：12609242
> 
> 赞同：0
> 
> 时间：2012-09-26T19:45:03.503
> 
> 标签：wpf, regex, devexpress, mask

我的问题太短太简单了。我有 WPF devexpress 文本编辑字段。（我是 devexp 的新手）文本编辑字段只能是数字字符，最多 13 个字符。例如; 123456789987 是正确的。但是 1234ght6789 不正确 123445667777777744646 不正确。如何在 wpf devexpress 掩码结构中给出正则表达式模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:48:22.353

您想使用范围量词：

```
^\d{1,13}$ 
```

# redis - Redis 数据易变吗？

> ID：12609245
> 
> 赞同：5
> 
> 时间：2012-09-26T19:45:16.643
> 
> 标签：redis

我试图找出一些东西，我一直在寻找一段时间没有结果。

**如果 Redis 服务器断电或关闭或会擦除 RAM 会发生什么？它是否在某处保留备份？**

我想将 Redis 用于 SaaS 风格的应用程序，所以如果我去 app.com/usernamesapp 它将使用 redis 来验证 usernamesapp 是否存在并获取 ID ...此时它将使用 MySQL 来处理所有其余的东西...原因是我想尽快开始显示页面，并且大部分内容都是 javascript，因此所有 MySQL 都会在事后发生。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T19:54:56.607

Redis 可以配置为定期写入磁盘，因此如果服务器出现故障，您不会丢失数据。 [http://redis.io/topics/persistence](http://redis.io/topics/persistence)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:53:09.787

来自 Redis 常见问题解答

> Redis 是内存中但持久存在于磁盘上的数据库

因此，严重故障不应导致数据丢失。[在http://redis.io/topics/faq](http://redis.io/topics/faq)阅读更多内容

# android - 适用于 Android 的 Zbar 扫描仪

> ID：12609246
> 
> 赞同：1
> 
> 时间：2012-09-26T19:45:23.697
> 
> 标签：android, android-intent, zbar-sdk

我正在按照这个项目将 Zbar 扫描仪集成到我的 android 应用程序中 - [https://github.com/DushyanthMaguluru/ZBarScanner](https://github.com/DushyanthMaguluru/ZBarScanner)。当相机出现时，我希望将图像放在扫描仪上。我知道如何在 iOS 中通过向扫描仪添加子视图来执行此操作 -

```
 UIImageView * image2 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    image2.image = [UIImage imageNamed:@"scan.png"];
    image2.userInteractionEnabled = YES;
    [reader.view addSubview:image2]; 
```

有没有办法为android做到这一点？

# jquery - 复制表格中的行和复制表格

> ID：12609247
> 
> 赞同：0
> 
> 时间：2012-09-26T19:45:27.543
> 
> 标签：jquery, jquery-ui

我的例子在这里：http: [//jsfiddle.net/ranell/J9ZGu/9/](http://jsfiddle.net/ranell/J9ZGu/9/)

我正在尝试： - 复制表格中的一行 - 使用另一个链接复制表格，以在新表格中复制行

问题：-新链接复制旧表中的一行-复制的新行包含与最后一行相同的值

有没有更简单的方法？？多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:01:59.647

```
 $('#mydiv').clone(true).attr("id", "mytable"+ i).insertAfter('#mydiv'); 
```

如有错误请评论。您正在克隆 #mydiv 并在其后添加。`insertAfter('#mydiv');` 因此，即使创建了新表单，您仍在旧的#mydiv 之后添加。您需要在新表格之后添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:02:26.463

在第一个表中添加的行的问题可以这样解决：

```
 $(document).on('click', '.add_line', function(e) {
        e.preventDefault();
        var wrapper = $(this).parents('.wrapper');

        var toClone = wrapper.find('table tr:last');
        toClone.after(toClone.clone(true).attr("id", "champs" + i));
    }); 
```

链接：http: [//jsfiddle.net/J9ZGu/10/](http://jsfiddle.net/J9ZGu/10/)

编辑：当然，您需要将类添加`wrapper`到您的第一个 div。此外，添加类`add_line`和`add_form`您的“添加行”和“和表单”链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T21:20:03.587

我认为这个例子很完整而且非常有用，不需要以我的方式重新制作它，我会尝试适应它:) 我分享： [在这里](http://www.mdelrosso.com/sheepit/index.php?lng=en_GB&sec=demo7)

非常感谢你的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:07:05.343

您需要相对于链接选择表，例如使用 prev() 方法：

示例：http: [//jsfiddle.net/ds9Uq/](http://jsfiddle.net/ds9Uq/)

# java - Java中的字符串数组并解析它们

> ID：12609252
> 
> 赞同：0
> 
> 时间：2012-09-26T19:46:01.070
> 
> 标签：java, string

好的，所以我有两个字符串。第一个字符串是一个单词，第二个字符串是一个句子。现在句子包含了这个词，也包含了这个词的定义。请参见下面的示例。

字串：AED 句子串：这很像“Kindle”或自动体外除颤器 (AED)。

所以我需要找到定义：自动体外除颤器这个词：AED。

我需要做的是解析并找到定义。我目前陷入困境，我需要一些帮助。下面的逻辑将单词分解为数组，将句子分解为数组。不幸的是，这并不完整。而且，当逻辑查看单词的第一个字母时，它不会真正起作用，因为 AED 中的 A 是大写字母，而自动中的 a 是小写字母。

```
private void getDefinitions(String word, String sentence) {
    if (sentence.contains(word)) {
        String[] wordStrAry = word.split("");
        String[] sentStr = sentence.split(" ");
        for (int sentInt = 0; sentInt < sentStr.length; sentInt++){
            for (int wordInt = 0; wordInt < wordStrAry.length; wordInt++) {
            wordStrAry[wordInt].trim();
                if (!wordStrAry[wordInt].equals("")) {
                    if (sentStr[sentInt].startsWith(wordStrAry[wordInt])){
                        System.out.println(sentStr[sentInt]);
                    }
                }
            }
        }
    }
} 
```

我忘记的一点信息是我需要从句子中提取定义并将其显示在文本框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:33:02.540

```
public static String getDefinition(String acronym, String sentence) {
    if (!sentence.toLowerCase().contains(acronym.toLowerCase())) {
        return null;
    }

    StringBuilder patternBuilder = new StringBuilder();
    for (char letter : acronym.toCharArray()) {
        patternBuilder.append("[");
        patternBuilder.append(Character.toLowerCase(letter));
        patternBuilder.append(Character.toUpperCase(letter));
        patternBuilder.append("]");
        patternBuilder.append("\\w*\\s+");
    }
    patternBuilder.delete(patternBuilder.length() - 3, patternBuilder.length());

    Pattern pattern = Pattern.compile(patternBuilder.toString());
    Matcher matcher = pattern.matcher(sentence);
    if (!matcher.find()) {
        return null;
    }

    return matcher.group();
}

public static void main(String[] args) {
    String acronym = "AED";
    String sentence = "This will be much like the \"Kindle\" or Automated External Defibrillator (AED)";
    String definition = getDefinition(acronym, sentence);
    if (definition != null) {
        System.out.println(acronym + " = " + definition);
    } else {
        System.out.println("There is no definition for " + acronym);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:49:47.053

为什么要把它分成一个数组？

你可以只使用 String [contains](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法

```
sentence.contains(word) 
```

如果返回 true，它确实包含它。请注意，这是区分大小写的。如果您希望它不区分大小写，那么您可能想要这样做

```
sentence.toLowerCase().contains(word.toLowerCase()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:27:26.207

如果我对您的理解正确，这将搜索您在您指定的句子中指定的首字母缩写词，然后找到与该首字母缩写词匹配的短语并返回它们。请注意，如果有多种可能性并且错误的可能性出现在正确的可能性之前，这将失败。我只是想不出一种方法来避免这种情况（尽管您可以通过找出更接近首字母缩写词出现的位置来减少它）。

```
public static String makeInitialism(String[] words)
{
    StringBuilder initialism = new StringBuilder();
    for(String word : words)
    {
        initialism.append(word.toUpperCase().charAt(0));
    }
    return initialism.toString();
}

public static String buildPhrase(String[] words)
{
    StringBuilder phrase = new StringBuilder();
    for(int i = 0; i < words.length; i++)
    {
        phrase.append(words[i].toUpperCase().charAt(0));
        if(words[i].length() > 1)
        {
            phrase.append(words[i].substring(1));
        }
        if((i + 1) < words.length)
        {
            phrase.append(" ");
        }
    }
    return phrase.toString();
}

public static String getDefinition(String word, String sentence) throws DefinitionNotFoundException
{
    //StackOverflow removes double spaces, you can replace " "+" " with a double space in your code.
    sentence = sentence.replace(" "+" ", " ");
    String[] words = sentence.split(" ");
    int wordsToJoin = word.length();
    word = word.toUpperCase();
    for(int i = 0; i < words.length - (wordsToJoin - 1); i++)
    {
        String[] tryingWords = Arrays.copyOfRange(words, i, i + wordsToJoin);
        if(word.equals(makeInitialism(tryingWords)))
        {
            return word + ": " + buildPhrase(tryingWords);
        }
    }
    throw new DefinitionNotFoundException();
} 
```

跑步：

```
System.out.println(getDefinition("LVPD", "I have a good friend at the Las Vegas police department")); 
```

产生输出：

```
LVPD: Las Vegas Police Department 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:19:46.187

```
package acronym;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Acronym {

    // any sequence of "word character"(\w) between "word boundaries" (\b) that starts with two to-be-defined characters (%c) - String.format(...)
    private static final String aWordPatternFormat = "\\b[%c%c]\\w*\\b";

    public Acronym() {
        super();
    }

    public String getDefinition(String word, String sentence) {

        String regex = buildRegex(word);

        return findDefinition(regex, sentence);
    }

    private String buildRegex(String word) {

        StringBuilder builder = new StringBuilder();

        builder.append("(");

        for (int i = 0; i < word.length(); i++) {

            char ch = word.charAt(i);

            String aWordPatternRegex = String.format(aWordPatternFormat, Character.toUpperCase(ch), Character.toLowerCase(ch));

            // ignore any spaces before the first word
            if(i != 0) {
                builder.append("\\s");
            }

            // add the word regex to the phrase regex we are building
            builder.append(aWordPatternRegex);
        }

        builder.append(")");

        return builder.toString();
    }

    private String findDefinition(String regex, String sentence) {

        Pattern pattern = Pattern.compile(regex);

        Matcher matcher = pattern.matcher(sentence);

        boolean matches = matcher.find();

        if(!matches) {
            throw new RuntimeException("The sentence does not contains the definition of the word");
        }

        return matcher.group();
    }

} 
```

--- JUnit 测试 ---

```
package acronym;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class AcronymTest {

    @Test
    public void testGetDefinitions() {

        assertEquals("automated external defibrillator", new Acronym().getDefinition("AED", "This will be much like the “Kindle” or automated external defibrillator (AED)"));
        assertEquals("Las Vegas police department", new Acronym().getDefinition("LVPD", "I have a good friend at the Las Vegas police department shall"));
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T23:25:43.750

```
package acronym;

public class Acronym {

    public String getDefinition(String word, String sentence) {
        sentence = sentence.trim();
        word = word.trim();

        final int sLength = sentence.length();
        final int wLength = word.length();

        int startPos = 0, endPos = sLength;
        int w = 0, s = 0;

        if(equalsIgnoringCase(sentence, s, word, w)) {
            startPos = s;
            w++; s++;
        }

        for (; s < sLength; s++) {
            if(sentence.charAt(s) == ' ') {
                if(w == 0) {
                    startPos = s + 1;
                }
                if(w == wLength) {
                    endPos = s;
                    break;
                }
                if(equalsIgnoringCase(sentence, s + 1, word, w)) {
                    w = (w < wLength) ? w + 1 : wLength;
                }
                else {
                    w = 0;
                }
            }
        }
        return sentence.substring(startPos, endPos);
    }

    private boolean equalsIgnoringCase(String sentence, int s, String word, int w) {
        return equalsIgnoringCase(sentence.charAt(s), word.charAt(w));
    }

    private boolean equalsIgnoringCase(char sCharAt, char wCharAt) {
        return Character.toLowerCase(sCharAt) == Character.toLowerCase(wCharAt);
    }

} 
```

上一个示例的 JUnit 测试：

```
package acronym;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class AcronymTest {

    @Test
    public void testGetDefinitions() {

        assertEquals("automated external defibrillator", new Acronym().getDefinition("AED", "This will be much like the “Kindle” or automated external defibrillator (AED)"));
        assertEquals("Las Vegas police department", new Acronym().getDefinition("LVPD", "I have a good friend at the Las Vegas police department shall"));
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-25T18:50:39.003

```
public class AcronymSplit implements Acronym {

public AcronymSplit() {
    super();
}

@Override
public String getDefinition(String word, String sentence) {
    String[] split = sentence.replaceAll("[^A-Za-z\\s]", "").split("[^\\w]", -1);

    StringBuilder builder = new StringBuilder();
    for (String string : split) {
        builder.append(string.charAt(0));
    }
    int index = builder.toString().toLowerCase().indexOf(word.toLowerCase());
    builder = new StringBuilder();
    for (int i = index; i < (index + word.length()); i++) {
        if(i != index) {
            builder.append(' ');
        }
        builder.append(split[i]);
    }
    return builder.toString();
} 
```

}

# java - 在 OpenJDK 6 和 7 中找不到 JButton 类

> ID：12609255
> 
> 赞同：1
> 
> 时间：2012-09-26T19:46:15.780
> 
> 标签：java, swing, ubuntu-12.04, openjdk

我正在尝试在我的 Ubuntu 12.04 机器上安装 Java，但至少可以说我很沮丧。我安装了 OpenJDK/JRE 6 和 7，但以下代码找不到 JButton 或 JFrame 类：

```
package app;

import java.awt.*;

public class AppInterface {

    private JFrame main;
    private JButton play;
    private JButton exit;

} 
```

我已经从 apt-get 安装了所有相关的库。为什么我无法访问 Swing 库？

我的编译错误：

```
`Have no file for /usr/lib/jvm/java-7-openjdk-i386/jre/lib/netx.jar`
`Have no file for /usr/lib/jvm/java-7-openjdk-i386/jre/lib/plugin.jar`
`Have no file for /usr/lib/jvm/java-7-openjdk-i386/jre/lib/jfr.jar` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:47:40.637

你也应该`import javax.swing.*;`这样。

# appcode - 按命中计数（通过计数）的 Appcode 断点

> ID：12609256
> 
> 赞同：1
> 
> 时间：2012-09-26T19:46:23.130
> 
> 标签：appcode

有没有办法像在 IntelliJ 或 Xcode 中那样将通过计数输入到断点？例如，在循环运行时断点被忽略了 9 次，但第十次它会停止调试器。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T15:46:42.473

目前还没有这样的选项，我们将在下一个版本中添加它：http: [//youtrack.jetbrains.com/issue/OC-5458](http://youtrack.jetbrains.com/issue/OC-5458)

# java - MySQL 事务隔离级别

> ID：12609263
> 
> 赞同：0
> 
> 时间：2012-09-26T19:47:01.370
> 
> 标签：java, percona

目前我正在为 MySQL 服务器寻找最佳的事务隔离级别，我正在做一个会计桌面应用程序，所以我必须决定我应该使用哪个事务隔离级别。我已经阅读了所有这些，但我需要你的经验来决定。

我正在使用 MySQL（Percona 服务器）最新更新。Java 编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:59:53.890

使用哪种隔离级别取决于应用程序的性质。

您运行什么类型的查询，以及以什么顺序等将影响哪个隔离级别是合适的。

一般来说，没有“最好的”隔离级别。

您应该使用对您的应用程序安全的最弱事务级别。或者，如果性能无关紧要，并且您只想要最安全的选项，请使用可序列化 - 但是，您可能会在并发查询期间遇到死锁。

隔离级别越强（例如：可序列化），性能越差，反之亦然。

阅读：[http ://en.wikipedia.org/wiki/Isolation_%28database_systems%29](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)

# python - 调整大小时的 Python 图像库图像分辨率

> ID：12609266
> 
> 赞同：5
> 
> 时间：2012-09-26T19:47:07.310
> 
> 标签：python, image-processing, jpeg, python-imaging-library, resolution

我正在尝试使用 python 图像库将一些 jpeg 图像从 24X36 英寸缩小到 11X16.5 英寸。由于 PIL 以像素为单位，这意味着从 7200X 4800 像素缩放到 3300 X2200 像素，我的分辨率设置为 200 像素/英寸，但是当我运行我的脚本时，PIL 将分辨率更改为 72 像素/英寸，我最终得到一个更大的像素图像比我以前。

```
import Image

im = Image.open("image.jpg")

if im.size == (7200, 4800):
    out = im.resize((3300,2200), Image.ANTIALIAS)
elif im.size == (4800,7200):
    out = im.resize((2200,3300), Image.ANTIALIAS)

out.show() 
```

调整图像大小时，有没有办法保持图像分辨率？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:51:06.210

保存DPI，需要在保存时指定；该`info`属性并不总是在图像操作中保留：

```
dpi = im.info['dpi']  # Warning, throws KeyError if no DPI was set to begin with

# resize, etc.

out.save("out.jpg", dpi=dpi) 
```

# hadoop - 如何列出特定用户运行的所有 hadoop 作业？

> ID：12609267
> 
> 赞同：2
> 
> 时间：2012-09-26T19:47:11.713
> 
> 标签：hadoop

我正在尝试找到一个可以用来列出我当前正在运行的所有作业的命令。“hadoop job -list”列出了所有的工作。有没有办法按用户过滤列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:53:49.947

您可以使用用户名简单地 grep 输出

```
hadoop job -list | grep <username> 
```

# sql - 验证 SQL 以报告简单 Oracle 表中给定父级的所有子级

> ID：12609270
> 
> 赞同：1
> 
> 时间：2012-09-26T19:47:27.077
> 
> 标签：sql, oracle, hierarchy

我希望这是一个非常简单的请求……我不是开发人员或 DBA，但我涉足过 Perl、PHP 和 PowerShell。无论如何，我们有一个大约 400 位父母和孩子的桌子。表格的片段在这篇文章的底部。如果需要完整的深度，我可以提供 412 个父/子的完整列表。

SOURCE_ID 和 DESTINATION_ID 代表 SOA 环境中的 Web 服务。对于这个练习，我们只需要选择一个服务，然后在层次结构中显示它下面的“下游”子代。此外，我们也想知道层次结构中的“上游”父母。

我最初只是将表格剪切并粘贴到一个文本文件中，然后使用这个[PERL 脚本](https://stackoverflow.com/questions/3862217/create-a-hierarchy-file-using-perl)生成一个层次结构文件，然后将其粘贴到 excel 中。长话短说，**我想出了 25 个唯一 ID**，我认为它们都是 SOURCE_ID 的孩子。

我想用 SQL 查询来做到这一点，这样我就可以制作一个交互式/自助式网页，而不必担心手动过程。我从这个网站的某个地方找到并操作了这段代码：

```
select Source_Service_Id parent, Destination_Service_Id child
from dd_service_relationship
connect by prior id = Source_Service_Id
start with Source_Service_Id = 10512 
```

**它只返回 12 个结果**。现在我不知道该相信哪个结果。

请验证 SQL 代码是否应返回所有子项（如果子项在多个父项下，则不重复），并且它将遍历整个表。

这是 dd_service_relationship 表的一小部分：

```
ID            UPDATE_DATE                  SOURCE_ID        DESTINATION_ID
10502    9/24/2012 2:09:45 PM    10501                    10500
10504    9/24/2012 2:09:45 PM    10501                    10503
10506    9/24/2012 2:09:45 PM    10501                    10505
10509    9/24/2012 2:09:45 PM    10508                    10507
10511    9/24/2012 2:09:45 PM    10508                    10510
10513    9/24/2012 2:09:45 PM    10508                    10512
10515    9/24/2012 2:09:45 PM    10508                    10514
10517    9/24/2012 2:09:45 PM    10508                    10516
10519    9/24/2012 2:09:45 PM    10508                    10518
10521    9/24/2012 2:09:45 PM    10508                    10520
10523    9/24/2012 2:09:45 PM    10508                    10522
10526    9/24/2012 2:09:45 PM    10525                    10524
10527    9/24/2012 2:09:45 PM    10525                    10505
10529    9/24/2012 2:09:45 PM    10525                    10528
10531    9/24/2012 2:09:45 PM    10525                    10530
10533    9/24/2012 2:09:45 PM    10532                    10505
10534    9/24/2012 2:09:45 PM    10532                    10507
10535    9/24/2012 2:09:45 PM    10532                    10510
10536    9/24/2012 2:09:45 PM    10532                    10512
10538    9/24/2012 2:09:45 PM    10532                    10537
10541    9/24/2012 2:09:45 PM    10540                    10539
10543    9/24/2012 2:09:45 PM    10542                    10514
10544    9/24/2012 2:09:45 PM    10542                    10539
10545    9/24/2012 2:09:45 PM    10542                    10505
10547    9/24/2012 2:09:45 PM    10546                    10518
10549    9/24/2012 2:09:45 PM    10546                    10548 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:36:30.273

这是我最终拼凑的代码。由于我不是开发人员，因此我无法保证它的效率或适当的结构。它完成了我寻求帮助的工作，而且它按今天的日期过滤，还从另一个表中提取服务的名称。希望这可以帮助其他人寻找类似的解决方案：

```
select SERVICE_NAME from DD_SERVICES where ID in (
select distinct DESTINATION_SERVICE_ID from(
    select
    ID,
    SOURCE_SERVICE_ID, 
    DESTINATION_SERVICE_ID, 
    level
    from DD_USER.DD_SERVICE_RELATIONSHIP where trunc(UPDATE_DATE) = trunc(SYSDATE)
    start with SOURCE_SERVICE_ID = {insert root value here}
    connect by prior DESTINATION_SERVICE_ID = SOURCE_SERVICE_ID
    )
) 
```

# php - jquery如何获取表中的值

> ID：12609274
> 
> 赞同：0
> 
> 时间：2012-09-26T19:47:47.373
> 
> 标签：php, jquery, html

我有以下代码生成一个表：

```
 <table class="table table-bordered table-striped" id="assignedvs">
      <thead>
          <tr>

              <th>VlId</th>
              <th>Name</th>
              <th>Status</th>
              <th>Voice</th>
              <th>Jumbo</th>
              <th>Mode</th>
          </tr>
      </thead>
      <tbody>

          <?php foreach ($vln as $vlndetail): ?>
              <tr>          
                     <td id='vlid'><?php echo $vlndetail['VlId'] ?></td>
              <td><?php echo $vlndetail['Name'] ?></td>
              <td><?php echo $vlndetail['Status'] ?></td>
              <td><?php echo $vlndetail['Voice'] ?></td>
              <td><?php echo $vlndetail['Jumbo'] ?></td>
              <td><?php echo $vlandetail['Mode'] ?></td>
            </tr>
          <?php endforeach ?> 
```

我需要找到 VlId 与用户在文本框中指定的内容相匹配的行。找到此记录后，我想在特定行的模式列中获取值。

这是我到目前为止所写的：

```
 $('#delete').live('click', function()  {

                //get a count of all records. only allowed to delete if you have more than one + the header.
                var reccount = $('#assignedvs tr').length;

                if (reccount > 2)
                {
                    //loop through the table
                $('#assignedvs tr').each(function() {

                    var temp = $(this).find(".vlid").html(); 
                    console.log(temp);  
                                    if (temp == $('#uservalue').val){
                                          //grab mode column
                                     }
                });
                }
                else
                {
                    alert("error: must have at least 1 record.");
                }

    }); 
```

问题 - 我必须引用 vlid 列的代码不正确。它总是向控制台打印一个空值。你能告诉我我做错了什么吗？谢谢。

**编辑 1**

我将我的 id 更改为一个类，并将我的 jquery 更改回我拥有的原始代码。它正在工作 - 除了我认为它包含 header 的事实。我有 4 行 + 标题。当我检查控制台结果时，第一个打印输出始终为 NULL，然后是 4 条记录的正确值。如何让它忽略标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:50:21.227

那是因为你是`find`ing by `className`，而不是 by `id`。要查找 by `id`，请改用以下内容：

```
$(this).find("#vlid").html(); 
```

**但是**，由于`id`s 在整个文档中应该是唯一的，因此更好的解决方案是维护您当前的代码，而不是使用`<td id='vlid'>`，而是使用`<td class='vlid'>`。

另请注意，这`val()`是一个函数。因此，要获取给定输入的值，您应该使用`$('#uservalue').val()`.

**编辑**：要排除标题，请使用`$('#assignedvs tbody tr')`选择器。这样，您只会获得 的后代行`tbody`，从而忽略标题行，这些行来自`thead`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:50:19.013

几个变化：

1.  `<?php echo $vlndetail['VlId']; //missing semi-colon ?>`
2.  `var temp = $(this).find("#vlid").html();`vlid 是一个 id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:51:31.920

[您可以通过http://datatables.net](http://datatables.net)上的数据表轻松完成此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:51:31.947

```
var temp = $(this).find("#vlid").html(); // .vlid (by class) changed to #vlid (by id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:01:41.270

一个更简单的解决方案。

*使用vlId*为每一行分配一个 ID （可能预先`tr_`添加到 ID 以避免重复）。

为每个数据单元分配一个具有列名的类。

像这样：

```
 <?php foreach ($vln as $vlndetail): ?>
          <tr id='tr_<?php echo $vlndetail['VlId'] // set the ID ?>'>          
              <td class='vlid'><?php echo $vlndetail['VlId'] ?></td>
              <td class='Name'><?php echo $vlndetail['Name'] ?></td>
              <td class='Status'><?php echo $vlndetail['Status'] ?></td>
              <td class='Voice'><?php echo $vlndetail['Voice'] ?></td>
              <td class='Jumbo'><?php echo $vlndetail['Jumbo'] ?></td>
              <td class='Mode'><?php echo $vlandetail['Mode'] ?></td>
          </tr>
      <?php endforeach ?> 
```

然后要获取所选 vlID 的名称，只需执行以下 JQUERY：

```
var rowID = "#tr_" + $('#uservalue').val(); // this is optional. I prefer to cache values for increased code readability.
$(rowID + " td.Mode").dostuffhere(); // this selector returns the Mode cell for the row indicated by the user 
```

这将抓取该特定行的模式列。

# magento - Magento 产品导入的列名无效

> ID：12609278
> 
> 赞同：1
> 
> 时间：2012-09-26T19:48:11.400
> 
> 标签：magento, csv, import, e-commerce, export

我正在尝试从 Magento Community 升级到 Magento Enterprise。我已经分别安装了每个。我从我的社区安装中直接导出了产品，并尝试将其直接导入到 Enterprise。

最初，我收到的错误是

> 不支持“csv”文件扩展名

根据有类似问题的人[对论坛帖子的回复，](http://www.magentocommerce.com/boards/viewthread/197451/P30/#t309123)我做了以下操作：

> 在 System > Tools > Compilation 下禁用 Magento 编译器

但是，我遇到的下一个验证错误是：

> 列名：“_root_category”、“_group_price_website”、“_group_price_customer_group”、“_group_price_price”、“_media_attribute_id”、“_media_image”、“_media_lable”、“_media_position”、“_media_is_disabled”无效

我对 CSV Magento 提供给我的产品进行了零编辑。我复制了它，打开了文件，发现零问题和零重复列。

我不知道下一步该怎么做，有什么建议吗？

CSV 样本

链接： - [Google 文档预览](https://docs.google.com/spreadsheet/ccc?key=0Ag2Dx-KXLi9vdGVZSnpFdVNTRzJCbUFLQVBDNGxTb3c)

链接 - [Google 云端硬盘下载](https://docs.google.com/open?id=0Bw2Dx-KXLi9vMnJja3BlS0V2V00)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-05-12T20:53:59.270

在文本编辑器中打开并保存为 UTF-8 编码

确保您使用的是 Import/Export > Import 而不是已弃用的 Dataflow 导入方法

# javascript - Backbone 应用程序的网络服务器？

> ID：12609281
> 
> 赞同：1
> 
> 时间：2012-09-26T19:48:13.193
> 
> 标签：javascript, backbone.js, webkit, makefile

抱歉，这可能是一个完全的菜鸟问题

[我从 github https://github.com/elfsternberg/The-Backbone-Store](https://github.com/elfsternberg/The-Backbone-Store)下载了一个主干示例应用程序，根据其自述文件，“必须安装在网络服务器下才能正常运行”。实际上，当我在 Chrome 中打开索引文件时，它只显示一个没有 javascript 功能的 html/css，并出现此错误

```
XMLHttpRequest cannot load file:///Users/me/Sites/backbonestore/data/items.json. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我认为这可能是因为 json 数据文件中的这些链接

```
"url": "http://www.amazon.com/Door-Religious-Knives/dp/B001FGW0UQ/?tag=quirkey-20" 
```

该教程说我需要一个网络服务器，即使它不使用数据库。

当我不使用 Rails 时，有没有办法使用 webkit（我通常在 Rails 环境中工作）？如果这不是问题，那么你能解释一下我如何让它工作吗？

这个主干项目和我看过的其他项目之间的一个区别是它有一个 make 文件。我必须对此做些什么吗？

制作文件

```
.SUFFIXES: .nw .js .pdf .html .tex 

NOTANGLE=       notangle
NOWEAVE=        noweave
ECHO=           /bin/echo

all: index.html store.js 

.nw.html:
    $(NOWEAVE) -filter l2h -delay -x -index -autodefs c -html $*.nw > $*.html

.nw.tex:
    $(NOWEAVE) -x -delay $*.nw > $*.tex             #$

.tex.pdf:
    xelatex $*.tex; \
    while grep -s 'Rerun to get cross-references right' $*.log; \
        do \
        xelatex *$.tex; \
    done

.nw.js:
    @ $(ECHO) $(NOTANGLE) -c -R$@ $<
    @ - $(NOTANGLE) -c -R$@ $< > $*.nw-js-tmp
    @ if [ -s "$*.nw-js-tmp" ]; then \
        mv $*.nw-js-tmp $@; \
    else \
        echo "$@ not found in $<"; \
    rm $*.nw-js-tmp; \
    fi  

store.js: backbonestore.nw
    @ $(ECHO) $(NOTANGLE) -c -R$@ $<
    @ - $(NOTANGLE) -c -R$@ $< > $*.nw-html-tmp
    @ if [ -s "$*.nw-html-tmp" ]; then \
        mv $*.nw-html-tmp $@; \
    else \
        echo "$@ not found in $<"; \
    rm $*.nw-tmp; \
    fi  

index.html: backbonestore.nw
    @ $(ECHO) $(NOTANGLE) -c -R$@ $<
    @ - $(NOTANGLE) -c -R$@ $< > $*.nw-html-tmp
    @ if [ -s "$*.nw-html-tmp" ]; then \
        mv $*.nw-html-tmp $@; \
    else \
        echo "$@ not found in $<"; \
    rm $*.nw-tmp; \
    fi  

clean:
    - rm -f *.tex *.dvi *.aux *.toc *.log *.out *.html *.js

realclean: clean
    - rm -f *.pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:32:55.443

这里的问题可能是您正在尝试访问 chrome 中的应用程序，并且 chrome 中存在一个已知问题，如果您看到文件路径以`file:///`而不是开头，则无法打开文件路径`file://`事实上您可以使用任何 Web 服务器您可以通过 localhost url 访问这些路径。尝试在 Firefox 中打开同一个文件，它应该可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:24:28.203

您可以尝试安装一个小型静态文件 Web 服务器，例如[node-static](https://github.com/cloudhead/node-static)。只需`npm install -g node-static`（需要[node.js](http://nodejs.org)），然后 - 在您的`The-Backbone-Store/`目录中 - 键入`static`. 您现在应该可以通过访问来使用`http://localhost:8080`

# dynamics-crm-2011 - 潜在的重复记录：CRM 2011 中没有

> ID：12609283
> 
> 赞同：3
> 
> 时间：2012-09-26T19:48:16.530
> 
> 标签：dynamics-crm-2011

我有一个重复检测规则来检查具有相同姓氏和相同名字的前两个字母的联系人，不区分大小写。我已选中该框以排除不活动的匹配记录，并且我没有进行直接的数据库操作。

为了测试重复检测，我用我的名字创建了一个联系人并保存了它。然后，我创建了一个具有相同姓氏和 Mike 而不是 Michael 作为名字的潜在客户。当我尝试限定该潜在客户并从中创建联系人时，我会看到一个标题为“检测到重复项”的对话框，但在找到的重复项的底部应该显示“潜在的重复记录：无”。

这篇文章 ( [http://support.microsoft.com/kb/2693711](http://support.microsoft.com/kb/2693711) ) 是我发现的唯一似乎解决了这个问题的东西，但它并没有解决我的问题。

编辑添加：我发现如果我通过直接创建新联系人而不是限定潜在客户来触发重复检测规则，它可以正常工作并显示匹配的可能重复项。但是，在获得潜在客户资格时，我仍然希望它能够正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:30:53.120

对我来说听起来很麻烦，它确实应该向用户显示哪些记录发生冲突。

但是，我会以不同的方式来解决问题 - 在潜在客户上创建一个重复检测规则，以查找与联系人上的姓氏和名字相匹配的内容，因此这会更早地警告用户可能存在冲突。电子邮件地址也总是一个很好的指标，尽管这取决于您是否会在早期阶段捕获该信息的过程。

（同样，如果您从事 B2B 业务，您可能希望通过公司名称对客户进行重复检查）

为什么要浪费所有时间填写潜在客户的详细信息，却在您尝试对其进行限定时发现它已经作为合格联系人或帐户存在于系统中？

# c++ - 实际声明了“未声明的标识符”

> ID：12609284
> 
> 赞同：9
> 
> 时间：2012-09-26T19:48:17.003
> 
> 标签：c++, undeclared-identifier

对于我在类头文件中声明为公共数据成员、一个 int 和一个指向该 int 的指针的变量，我一直收到错误 C2065s。仅当我在函数中使用这些变量时才标记为错误的代码行 - 在类的构造函数中，它们似乎可以通过。

我正在使用 Visual Studio 2010 Express 编写普通的 C++（不是 Visual C++），这是编译器错误日志的输出：

```
1>------ Build started: Project: Project 2, Configuration: Debug Win32 ------
1>  BaseClassWithPointer.cpp
1>d:\libraries\documents\school\advanced c++\project 2\project 2\baseclasswithpointer.cpp(27): error C2065: 'q' : undeclared identifier
1>d:\libraries\documents\school\advanced c++\project 2\project 2\baseclasswithpointer.cpp(27): error C2541: 'delete' : cannot delete objects that are not pointers
1>d:\libraries\documents\school\advanced c++\project 2\project 2\baseclasswithpointer.cpp(32): error C2065: 'num' : undeclared identifier
1>d:\libraries\documents\school\advanced c++\project 2\project 2\baseclasswithpointer.cpp(33): error C2065: 'q' : undeclared identifier
1>d:\libraries\documents\school\advanced c++\project 2\project 2\baseclasswithpointer.cpp(34): error C2065: 'q' : undeclared identifier
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

最后，这是我的代码块和标题：

BaseClassWithPointer.h

```
#pragma once
#include <iostream>

using namespace std;

class BaseClassWithPointer
{
public:
    int num;
    int *q;
    BaseClassWithPointer();
    BaseClassWithPointer(int value);
    BaseClassWithPointer(const BaseClassWithPointer& otherObject);
    void destroyPointer();
    virtual void print();
    virtual ~BaseClassWithPointer();                                                        //Destructor is virtual so that derived classes use their own version of the destructor. ~     (2\. Inheritance - base class with pointer variables – destructors.)
    const BaseClassWithPointer& operator= (const BaseClassWithPointer &rhs);        //Assignment operator is overloaded to avoid shallow copies of pointers. ~ (3\. Inheritance     – base class with pointer variables – assignment operator overloading.)

}; 
```

BaseClassWithPointer.cpp

```
#pragma once
#include "BaseClassWithPointer.h"
#include <iostream>

using namespace std;

BaseClassWithPointer::BaseClassWithPointer()
{
    num = 0;
    q = &num;
}

BaseClassWithPointer::BaseClassWithPointer(int value)
{
    num = value;
    q = &num;
}

BaseClassWithPointer::BaseClassWithPointer(const BaseClassWithPointer& otherObject)
{
    num = otherObject.num;
    q = &num;
}

void destroyPointer()
{
    delete q;
}

void print()
{
    cout << "Num: " << num << endl;
    cout << "Value pointed to by q: " << *q << endl;
    cout << "Address of q: " << q << endl;
}

BaseClassWithPointer::~BaseClassWithPointer()
{
    destroyPointer();
}

const BaseClassWithPointer& BaseClassWithPointer::operator=(const BaseClassWithPointer &rhs)
{
    if (this != &rhs)
    {
        num = rhs.num;
        q = &num;
    }

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T19:50:23.470

您忘记了 destroyPointer() 方法的类标识符。尝试

```
void BaseClassWithPointer::destroyPointer() 
```

反而

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T19:51:16.827

这个：

```
void destroyPointer()

...

void print() 
```

应该

```
void BaseClassWithPointer::destroyPointer()
{
....
}

void BaseClassWithPointer::print()
{
....
} 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:51:38.363

函数 destroyPointer() 不是 cpp 文件中类的一部分。它应该是：

```
void BaseClassWithPointer::destroyPointer()
{
  delete q;
} 
```

但是：

```
void destroyPointer()
{
  delete q;
} 
```

这就是为什么它找不到 q

# mysql - 为什么会出现此错误 #1071 - 指定的密钥太长；最大密钥长度为 1000 字节？

> ID：12609292
> 
> 赞同：0
> 
> 时间：2012-09-26T19:48:52.663
> 
> 标签：mysql

> **可能重复：**
> [“指定的密钥太长；最大密钥长度为 1000 字节”](https://stackoverflow.com/questions/1037598/specified-key-was-too-long-max-key-length-is-1000-bytes)

SQL查询：

```
CREATE TABLE  `freecomputermarket`.`Members` (

`ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`UserName` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`Email` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`Password` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`BirthDate` DATE NOT NULL ,
`RegisterationDate` DATE NOT NULL ,
`ActivationCode` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`ActivationLink` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`IsActive` BIT( 0 ) NOT NULL ,
`Gender` CHAR( 6 ) NOT NULL ,
UNIQUE (
`UserName` ,
`ActivationCode` ,
`ActivationLink`
)
) ENGINE = MYISAM 
```

当我执行此查询时，出现错误“#1071 - 指定的密钥太长；最大密钥长度为 1000 字节”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:52:35.890

您的`UNIQUE`索引中有三个 255 个字符的 UTF8 列。每个 UTF8 字符最多可以占用 3 个字节，因此每列最多可以占用 765 个字节，这使得整个索引总共需要 2295 个字节，如错误所示，超过了 1000 个字节的限制。

# jquery - Jquery Mobile：动态添加的列表与嵌套项目未正确打开内部列表

> ID：12609297
> 
> 赞同：2
> 
> 时间：2012-09-26T19:49:16.767
> 
> 标签：jquery, list, jquery-mobile

遇到一个奇怪的问题。**这似乎是一个错误。**

在 Jquery 移动列表中动态添加带有嵌套列表的列表项。现在-单击新列表项-打开新嵌套列表，但也打开它的显示-以前的嵌套列表项*（添加新之前的最后一个嵌套列表项）*。

这是小提琴-

[**http://jsfiddle.net/codenameavi/qSrfv/13/**](http://jsfiddle.net/codenameavi/qSrfv/13/)

[使用浏览器后退按钮在小提琴中的嵌套和主列表之间导航]

使用此代码动态添加 -

```
$("#addBttn").click(function() {

      // adding a LI with Nested List in Main List
      var li = '<li data-icon="false" data-theme="a"><a>NEW ITEM</a>'

                 + '<ul data-role="listview" data-inset="true" data-theme="h" data-dividertheme="a">'
                     + '<li data-icon="false" data-theme="b">'
                     + '<a>NEW ITEM 1</a></li>'
                     + '<li data-icon="false" data-theme="b">'
                     + '<a>NEW ITEM 2</a></li>'          
                 + '</ul>'

               + '</li>';

    $("#newsListContent").append(li).trigger('create');
    $("#newsListContent").listview('refresh');
}); 
```

**编辑**

是的，它是一个错误。刚刚报告的问题 - [https://github.com/jquery/jquery-mobile/issues/5098](https://github.com/jquery/jquery-mobile/issues/5098)

该错误也存在于最新版本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:47:12.290

试试这个，它有效：
**编辑：**

```
var i=1;
$('#addBttn').click(function() {

     // adding a LI with Nested List in Main List
     var li = '<li data-icon="false" data-theme="a">NEW '+i+'</li>';
     $('#newsListContent').append(li);

    var ul = '<ul data-role="listview" data-inset="true" data-theme="h" data-dividertheme="a" id="ul_'+i+'">'
                     + '<li data-icon="false" data-theme="b">'
                     + 'NEW ITEM '+i+'</li>'
                     + '<li data-icon="false" data-theme="b">'
                     + 'NEW ITEM '+i+'</li>'          
                 + '</ul>';   
    $('#newsListContent li:last').append(ul).trigger('create');

    $('#newsListContent').listview('refresh');

    i++;
}); 
```

[http://jsfiddle.net/ouadie/prZ9a/1/](http://jsfiddle.net/ouadie/prZ9a/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:32:53.180

这看起来是一个错误。

jQM 为您的 li 元素子锚标记添加一个索引号，这些标记与具有相同数据 URL 的隐藏页面相关。

发生的事情是新的 li 元素与列表中的最后一个 li 元素具有相同的编号，这反过来又导致两个页面彼此堆叠显示。

这是食物元素：

```
<a href="#list&amp;ui-page=newsListContent-0" class="ui-link-inherit">FOOD</a> 
```

请参阅附加在 href 中的索引 0，这与隐藏页面有关：

```
<div data-role="page" data-url="list&amp;ui-page=newsListContent-0" data-theme="d" data-count-theme="c" tabindex="0" class="ui-page ui-body-d">
    <div data-role="header" data-theme="b" class="ui-header ui-bar-b"
        role="banner">
        <div class="ui-title">FOOD</div>
    </div>
    <div data-role="content" class="ui-content" role="main">
        <ul data-role="listview" data-inset="true" data-theme="d"
            data-dividertheme="a"
            class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <li data-icon="false" data-theme="a"
                class="ui-li ui-li-static ui-body-a ui-corner-top">FOOD ITEM 1</li>
            <li data-icon="false" data-theme="a"
                class="ui-li ui-li-static ui-body-a">FOOD ITEM 2</li>
            <li data-icon="false" data-theme="a"
                class="ui-li ui-li-static ui-body-a ui-corner-bottom">FOOD
                ITEM 3</li>
        </ul>
    </div>
</div> 
```

具有相同的索引 0。添加新的 li 元素不会更改当前的 li 索引并复制已使用的 0 索引。

这是新的 li 元素（href 也指向 food li 元素）

```
<a class="ui-link ui-link-inherit" href="#list&amp;ui-page=newsListContent-0">NEW ITEM</a> 
```

这是新的隐藏页面：

```
<div data-role="page" data-url="list&amp;ui-page=newsListContent-0" data-theme="h" data-count-theme="c" tabindex="0" class="ui-page ui-body-h">
    <div data-role="header" data-theme="b" class="ui-header ui-bar-b"
        role="banner">
        <div class="ui-title">NEW ITEM</div>
    </div>
    <div data-role="content" class="ui-content" role="main">
        <ul data-role="listview" data-inset="true" data-theme="h"
            data-dividertheme="a"
            class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <li data-icon="false" data-theme="b"
                class="ui-btn ui-btn-up-b ui-btn-icon-right ui-li ui-corner-top"><div
                    class="ui-btn-inner ui-li ui-corner-top">
                    <div class="ui-btn-text">
                        <a class="ui-link-inherit">NEW ITEM 1</a>
                    </div>
                </div></li>
            <li data-icon="false" data-theme="b"
                class="ui-btn ui-btn-up-b ui-btn-icon-right ui-li ui-corner-bottom"><div
                    class="ui-btn-inner ui-li">
                    <div class="ui-btn-text">
                        <a class="ui-link-inherit">NEW ITEM 2</a>
                    </div>
                </div></li>
        </ul>
    </div>
</div> 
```

即使您更新到最新版本，它仍然是一个问题：

*   [http://jsfiddle.net/qSrfv/16/](http://jsfiddle.net/qSrfv/16/)

我用 jQM 创建了一个新问题：

*   [https://github.com/jquery/jquery-mobile/issues/5098](https://github.com/jquery/jquery-mobile/issues/5098)

看起来这以前是一个问题，但由于您动态添加 li 元素，我创建了一个新问题

# iphone - 如何将图像保存在 iPhone 上的图库中？

> ID：12609301
> 
> 赞同：5
> 
> 时间：2012-09-26T19:49:40.400
> 
> 标签：iphone, objective-c, ios, ios5

如何将图像保存在 iPhone 上、图库中、“壁纸”等应用程序中？

嗨 :) 我用壁纸创建应用程序 :) 但我不知道如何将我的图像保存在画廊中 :( 请帮帮我

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-26T19:53:17.120

要保存图像，您可以使用以下代码行：

```
 UIImage *image = [UIImage imageNamed:"someImage.png"];
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

还有一些方法可以检查图像何时完成保存，完整的文档可以在这里找到：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

在较新的 iOS 版本上，Apple 要求您在 info.plist 中为 key 添加使用描述符`Privacy - Photo Library Additions Usage Description`。( `NSPhotoLibraryAddUsageDescription`)

# c - 为什么 C 中的 printf() 方法设计为接受任意数量的参数？

> ID：12609309
> 
> 赞同：3
> 
> 时间：2012-09-26T19:50:20.983
> 
> 标签：c, oop, printf, overloading

我总是问自己这个问题，为什么 C 中的 printf() 被设计为接受任意数量的参数，这不是重载吗？如果是的话，纯结构化语言如何包含面向对象的语言概念，例如方法重载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:51:50.757

> 这不是重载吗？

不，C 中没有重载。它被称为[“可变参数函数”](http://en.wikipedia.org/wiki/Variadic_function#C.2C_Objective-C.2C_C.2B.2B.2C_and_D)。

不，尽管它出现在 C++ 中并且没有出现在 C 中，但方法重载并不是一个面向对象的概念。它在非面向对象的相当古老的编程语言（例如 Prolog）中具有突出的特点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:52:05.657

它不是重载..任何采用可变数量参数的方法都称为可变参数函数。

[wiki 上的](http://en.wikipedia.org/wiki/Variadic_function)可变参数方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:52:14.450

这称为可变参数（可变参数数），自 C 语言早期就存在。

这与重载无关。

从某种意义上说，它只是“一个开放的原型”，表达了原型并不总是像现在这样严格使用的事实。C在这个部门的灵活性源于参数传递的方式：参数的清理是调用者的责任，它可以知道他们在需要的时间占用了多少空间。

使用竞争调用约定（例如 Pascal 调用约定）时，类似的技术是不可能的（容易的）

# android - Maven android build 给出编译时错误，就好像它是用 -target=1.5 构建的

> ID：12609319
> 
> 赞同：0
> 
> 时间：2012-09-26T19:51:14.160
> 
> 标签：android, maven, java, jdk1.6, jdk1.5

在我的 Maven 构建过程中，我遇到了这样的错误：

[错误] /sandbox/mobile-apps/quickdroid/test/src/com/xxx/MyActivity.java:[14,21] java.util.LinkedHashMap.Entry 在 java.util.LinkedHashMap 中具有私有访问权限

我用一个类创建了一个简单的测试项目。此错误对应于以下代码：

```
 LinkedHashMap.Entry<String, Object> test; 
```

Intellij 可以很好地编译此代码。如果我在我的 intellij javac 参数中更改 -target=1.5，那么我会得到同样的错误。下面在我的 pom.xml 中，我指定了目标 1.6，并使用 -X 参数验证了 maven 正在获取此设置。为什么我会收到错误，好像它仍在编译目标 1.5？

maven -X 输出的摘录：1.6

.

[调试] (f) 源 = 1.6 [调试] (f) staleMillis = 0 [调试] (f) 目标 = 1.6

.

[调试] 命令行选项：[调试] -d /sandbox/mobile-apps/quickdroid/test/target/classes -classpath {...} -g -nowarn -target 1.6 -source 1.6

pom.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<groupId>com.xxx.android</groupId>
<artifactId>test</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>apk</packaging>
<name>test</name>

<dependencies>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
    </dependency>
</dependencies>

<build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.3.2</version>
            <extensions>true</extensions>
            <configuration>
                <sdk>
                    <!-- platform or api level (api level 4 = platform 1.6)-->
                    <platform>11</platform>
                </sdk>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# algorithm - 如何在许多有时间限制的地点之间找到最快的路径

> ID：12609330
> 
> 赞同：2
> 
> 时间：2012-09-26T19:51:37.733
> 
> 标签：algorithm, sorting, path-finding, heuristics

我正在尝试开始一个我已经集思广益了几年的个人研究项目。我知道用于查找以最快的时间访问位置的最佳顺序的图表和算法。但是我被困在下一步的研究中，是否有研究论文/算法可以解决这个问题？给定一个起点和一个终点，其中包含许多必须访问的“航路点”。并且一些航点有时间限制，例如必须在下午 4:00 之前到达航点三。因此，算法必须首先根据它们的时间限制（如果有的话）对位置进行排序，然后找到访问每个航点的最佳顺序。

我研究了许多不同的算法/启发式方法，并搜索了有关该主题的研究论文，但找不到任何确定的东西。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:02:10.557

从来没有做过这样的事情，但是......详细说明已经告诉你的 BlueRaja，我不得不说你很可能已经找到了你的圣杯（也许，你只是没有意识到）。

您尝试解决的与时间相关的问题看起来只是另一种方式来重新陈述您在穿越图形时已经必须解决的与空间相关的寻路问题。

换句话说，看起来你有*两个*图表要遍历。第一个是*空间*的，由您必须访问的航路点网络表示。第二个是您必须满足的“时间窗口”的*时间*（又名“时间相关”）图表，以免错过任何公共汽车/火车/轮船/飞机/任何东西。

据我所知，您可以使用常规的路径查找/图交叉算法（Dijkstra、A*、收缩层次结构等）来遍历空间图并重新使用*相同的*算法（或非常相似的算法） ) 也可以遍历时间相关图。

毕竟，这两个图都只是“约束”网络（要遍历的点，在空间或时间上）的数学表示，并且可以使用相同的算法进行遍历。最有可能的是，如果您查看用于整理“时间窗口”的代码，您会发现它已经非常类似于一个非常简单的与空间相关的图遍历算法。

主要问题似乎是找到时间图的良好表示（您必须尊重的“时间窗口”网络）。最有可能的是，它必须是时间受限的空间航路点（空间点，或“门”，每个都附有“时间窗口”）的图表。

无论如何，一次操作无法解决两个问题。首先，您必须在时间图中找到连接所有时间窗口（按所需顺序）的“最短路径”（即：您必须将它们整理出来，就像您已经在做的那样）。其次，您必须找到空间图中任何一对时间窗口之间的最短路径（并检查最短/最快路径是否足够快以满足下一个时间窗口）。

# mercurial - 由于 eclipse 中的 hg 而发生内部错误

> ID：12609336
> 
> 赞同：0
> 
> 时间：2012-09-26T19:52:00.103
> 
> 标签：mercurial, tortoisehg

每当我在 Eclipse 中启动一个新项目时，都会出现以下错误。

要观察的一件事是最后的奇怪路径，我不知道为什么，总是出现在错误消息中。

ps：灰色区域是我的用户名。

![在此处输入图像描述](../Images/c12649f8c0ddf5bd376065e8e8e5c5a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:57:40.587

看起来您正在运行 Windows 7。检查您正在使用的文件夹的安全设置，并确保您的用户对它们具有适当的权限。

# java - 找到素数-->筛法

> ID：12609337
> 
> 赞同：0
> 
> 时间：2012-09-26T19:52:03.833
> 
> 标签：java, algorithm, primes, sieve-of-eratosthenes

我尝试了几次，但仍然给了我 ArrayOutOfIndex。但我想节省内存，所以我使用

```
boolean[]isPrime = new boolean [N/2+1]; 
```

代替

```
boolean[]isPrime = new boolean [N+1]; 
```

这给了我第 23 行和第 47 行的 ArrayOutOfIndex

第 23 行：

```
 for (int i = 3; i <= N; i=i+2) {
    isPrime[i] = true;
    } 
```

第 47 行：

```
 for (int i = 3; i <= N; i=i+2) {
        if (isPrime[i]) primes++;
  ...
   } 
```

* * *

```
Full code:

public class PrimeSieve {
    public static void main(String[] args) { 

        if (args.length < 1) {
            System.out.println("Usage: java PrimeSieve N [-s(ilent)]");
            System.exit(0);
        }

        int N = Integer.parseInt(args[0]);

        // initially assume all odd integers are prime

        boolean[]isPrime = new boolean [N/2+1];

        isPrime[2] = true;

        for (int i = 3; i <= N; i=i+2) {
            isPrime[i] = true;
        }

        int tripCount = 0;

        // mark non-primes <= N using Sieve of Eratosthenes
        for (int i = 3; i * i <= N; i=i+2) {

            // if i is prime, then mark multiples of i as nonprime
        if (isPrime[i]) {
          int j = i * i;
          while (j <= N){
            tripCount++;
            isPrime[j] = false;
            j = j + 2*i;
            }
                        }
                                            }

        System.out.println("Number of times in the inner loop: " + tripCount);

        // count and display primes
        int primes = 0;
        if(N >= 2 ){
            primes = 1;
        }
        for (int i = 3; i <= N; i=i+2) {
            if (isPrime[i]) primes++;
            if (args.length == 2 && args[1].equals("-s"))
                ; // do nothing
            else
                System.out.print(i + " ");
        }
        System.out.println("The number of primes <= " + N + " is " + primes);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:55:56.887

当您将数组的大小从 更改为`[N+1]`时`[N/2+1]`，您还需要更新 for 循环的结束条件。现在你的 for 循环运行 until `i=N`，所以你试图做`isPrime[i]`when `i > (N/2+1)`... 所以你得到一个`ArrayIndexOutOfBoundsException`.

改变这个：

```
for (int i = 3; i <= N; i=i+2) 
```

对此：

```
for (int i = 3; i <= N/2; i=i+2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:13:57.470

您应该使用相同的索引函数存储和访问数组：`isPrime[i/2]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:05:35.420

好吧，例如，如果 N=50 你`isPrime` 只拥有 26 个元素，并且你试图访问 3,5..47,49 处的元素（当然，这是超出范围的）

您可能想要的是在循环中使用`i/2`（作为**index**），这样您仍在迭代数字 3、5..47、49，但您使用向量的正确索引。

# javascript - HTML：用鼠标悬停时，前景中的元素不应该是后面的块内容吗？

> ID：12609344
> 
> 赞同：1
> 
> 时间：2012-09-26T19:52:16.977
> 
> 标签：javascript, html, css

你知道这个问题。链接位于容器中，该容器设置在其上方的绝对定位块元素后面。在这种情况下，无法点击链接。

例如看这个例子：http: [//jsfiddle.net/8VE3a/](http://jsfiddle.net/8VE3a/)

我只是好奇，有没有办法让上面的容器不阻止点击事件，以便它“点击”下面的链接？同样的问题`hover`？如果我将鼠标悬停在链接上，我仍然希望触发它的鼠标悬停状态！？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:55:30.693

你在这里：http: [//jsfiddle.net/8VE3a/1/](http://jsfiddle.net/8VE3a/1/)

```
pointer-events: none; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:55:18.100

根据具体情况，您可以更改链接项的 z-index 以使它们出现在背景内容上方：

CSS：

```
.some-class a{
    z-index: 5;
}
.background-div{
    z-index: 1;
} 
```

# php - 从 MySQL 中删除行不起作用

> ID：12609346
> 
> 赞同：1
> 
> 时间：2012-09-26T19:52:18.010
> 
> 标签：php, mysql, delete-row

我正在尝试使用下面的 PHP 代码从 MySQL 中的表中删除一行。from的返回值为`mysql_affected_rows()`1。没有错误。但是，该行仍然存在于 MySQL 中。不知道我做错了什么。有什么想法吗？

```
$db = array('host'=>'127.0.0.1',  
        'user'=>'root',  
        'pass'=>'',  
        'name'=>'testdb');

// CONNECT TO THE MYSQL SERVER
$connection = mysql_connect($db['host'], $db['user'], $db['pass']);
if(!$connection){
    // HANDLE ERROR HERE
    die('Unable to connect to MySql server : '.mysql_error($connection));
}

// SELECT THE DATABASE SCHEMA
if(!mysql_select_db($db['name'],$connection)){
    // HANDLE ERRORS HERE
    die('Unable to connect to database : '.mysql_error($connection));
}

$result = mysql_query("delete from photos where id=".$photo_id, $connection);
echo mysql_affected_rows($connection); 
```

**更新**

我在最后添加了以下代码并解决了问题 -

```
mysql_query("commit", $connection); 
```

感谢您的评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:30:16.967

如您的情况一样应用于 innodb 表。

```
mysql_query("BEGIN", $connection); 
// delete code
mysql_query("COMMIT", $connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:12:41.277

在这种情况下，我通常做的是启用 general_log（设置 global general_log_file=general.log; 并设置 global general_log=1;）并查看那里的内容。

那么问题出在哪里就变得很明显了。

如果还不清楚发生了什么，您可以在 mysql 控制台上运行这些查询...

# r - 处理具有冗余行的数据表

> ID：12609349
> 
> 赞同：1
> 
> 时间：2012-09-26T19:52:22.473
> 
> 标签：r

标题没有准确说明，但我想不出其他词来总结我确切要问的内容。

我有一个如下形式的表格：

```
value (0<v<1)        # of events
   0.5677                 100000
   0.5688                   5000
   0.1111                   6000
     ...                     ...
   0.5688                 200000
   0.1111                  35000 
```

以下是我喜欢用这张表做的一些事情：绘制直方图、计算平均值、拟合分布等。到目前为止，我只能弄清楚如何用像这样的向量来做这件事

```
v=(0.5677,...,0.5688,...,0.1111,...) 
```

但不是桌子。

由于几乎连续的可能值的数量很大，我想制作一个新表不会那么有效，所以在不修改原始表并制作另一个表的情况下这样做是非常可取的。但是，如果必须这样做，那也没关系。提前致谢。

附录：我想弄清楚的是如何将此表视为通常的数据向量：如果我有以下向量表示与上述完全相同的数据：

```
v= (0.5677, ...,0.5677 , 0.5688, ... 0.5688, 0.1111,....,0.1111,....)
    ------------------   ------------------  ------------------
     (100000 times)      (5000+200000 times)  (6000+35000) times 
```

然后我们只需要应用绘图、均值等基本函数来得到我想要的。我希望这能让我的问题更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:32:47.340

您的数据由一个值和该值的计数组成，因此您正在寻找将使用计数来加权值的函数。键入 ?weighted.mean 以获取有关计算加权（分组）数据平均值的函数的信息。对于密度图，您希望在 density() 函数中使用 weights= 参数。对于直方图，您只需使用 cut() 将值组合成少量组，然后使用 aggregate() 对组中所有值的计数求和。您会在包 Hmisc 中找到各种加权统计度量（wtd.mean、wtd.var、wtd.quantile 等）。

# javascript - 单选按钮开关检查 php

> ID：12609353
> 
> 赞同：2
> 
> 时间：2012-09-26T19:52:38.480
> 
> 标签：javascript, jquery, html, radio, checked

我的网站就像一个具有 2 种搜索类型的搜索引擎。类型 1 类型 2。当有人来到我的网站时，我只是不知道该怎么做，默认选中的类型是类型 1，如果它选择类型 2，那么即使页面被刷新，访问者仍然保持类型 2。我需要的正是来自这里的样本。

js

```
$(function() {
        $( "#radio" ).buttonset();
    });​ 
```

html

```
<form>
    <div id="radio">
        <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
        <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
        <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
    </div>
</form> 
```

我希望能够将**checked="checked"**从收音机切换到另一个或类似的东西。真的不知道。但我认为它必须用 php 或 javascript 做一些事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:56:17.760

您需要在某处缓存/存储设置选项（cookie、数据库、memcache(d)、redis 等）并使用用户 ID 加载。这也必须在 Javascript 中处理，因为它涉及客户端。

**Cookie 参考**：[https ://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

对于memcache(d)、redis、SQL、文件存储：

**AJAX 参考**：[https ://developer.mozilla.org/en-US/docs/AJAX](https://developer.mozilla.org/en-US/docs/AJAX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:06:28.273

并且 my_function 将发送一个 ajax 请求来打开会话以保持选中单选的值：

```
my_function()
{
   var value_checked = $("input[name='radio']:checked").val();
   $.ajax({
   type: 'POST',
   url: 'page.php',
   data: {'value_checked':value_checked},
   });
} 
```

您进入 page.php $_POST['value_checked '] 并将其设置在会话变量中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:00:35.263

您可以在单选按钮的 onClick 事件中定义函数：

```
$(document).ready(function() {
  $('radio[name=radio]').each(function() {
   $(this).click(function() {
    my_function();
    });
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:03:19.360

您必须将该信息存储在 cookie 或会话中，因为**web 是无**状态的，并且如果回发它不会记住页面的状态，除非它被缓存在某个地方。

尝试使用[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)

# extract - Cognos - 如何将查询名称、数据项名称和表达式提取到文件（excel 或 txt）中

> ID：12609363
> 
> 赞同：1
> 
> 时间：2012-09-26T19:53:08.380
> 
> 标签：extract, cognos

我想知道是否有一种快速方法可以从每个查询的 cognos 报告中获取所有数据项及其表达式，并能够将其提取到文本或 Excel 文件中。尽管我不太熟悉 XML，但我认为可能可以用 XML 完成一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:28:42.407

首先将您的报告规范复制到剪贴板：
![将报告复制到剪贴板](../Images/baa5e0f6c2bc88b009798863c61dfb58.png)

然后打开支持 XPath 的 XML 编辑器并发出以下表达式：

```
 /report/queries/query 
```

将结果复制到其他 XML 文件并在 Excel 中将其作为 XML 表打开。
您应该得到与此类似的结果（Excel 2010）： ![在此处输入图像描述](../Images/c4753e11503f64c8c263e2a94a674e64.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T08:29:56.437

或者将您的报告另存为 XML 并在 Excel 中打开

# c# - 如何使用 OpenXml 将外部图像添加到 Word 文档？

> ID：12609367
> 
> 赞同：4
> 
> 时间：2012-09-26T19:53:12.833
> 
> 标签：c#, openxml

我正在尝试使用 C# 和 Open XML 将图像从 url 插入到文档中。图片可能会改变，所以我不想下载它，我希望它仍然是外部参考。

我发现了几个像这样的例子，它们允许我添加本地图像：

[http://msdn.microsoft.com/en-us/library/bb497430.aspx](http://msdn.microsoft.com/en-us/library/bb497430.aspx)

我该如何调整它以获取 URI？还是完全有另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T17:47:14.780

您可以通过快速部件字段将外部图像添加到 Word 文档。有关说明，请参阅[superuser](https://superuser.com/questions/38870/in-microsoft-word-how-can-i-link-to-an-image-from-the-web-which-updates)上的以下答案。

要以编程方式实现所描述的步骤，您必须使用外部关系来包含来自 URL 的图像。

以下是完成此操作的步骤：

1.  创建图片类的实例。
2.  添加一个形状来指定图片的样式（宽度/高度）。
3.  使用 ImageData 类来指定外部关系的 ID。
4.  向主文档部分添加外部关系。为外部关系提供您在步骤 3 中指定的相同 ID。

以下代码只是实现了上述步骤。图像被添加到 word 文档的第一段。

```
using (WordprocessingDocument newDoc = WordprocessingDocument.Open(@"c:\temp\external_img.docx", true))
{
    var run = new Run();

    var picture = new Picture();

    var shape = new Shape() { Id = "_x0000_i1025", Style = "width:453.5pt;height:270.8pt" };
    var imageData = new ImageData() { RelationshipId = "rId56" };

    shape.Append(imageData);

    picture.Append(shape);

    run.Append(picture);

    var paragraph = newdoc.MainDocumentPart.Document.Body.Elements<Paragraph>().FirstOrDefault();

    paragraph.Append(run);      

    newDoc.MainDocumentPart.AddExternalRelationship(
       "http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",
       new System.Uri("<url to your picture>", System.UriKind.Absolute), "rId56");
} 
```

在上面的代码中，我省略了定义形状类型的代码。我建议您使用[OpenXML SDK 生产力工具](http://www.microsoft.com/en-us/download/details.aspx?id=5124)之类的工具 来检查与图像有外部关系的 Word 文档。

# algorithm - 检查游戏板上所有可能线的算法复杂性

> ID：12609368
> 
> 赞同：1
> 
> 时间：2012-09-26T19:53:14.107
> 
> 标签：algorithm, scalability, big-o, game-engine, graph-algorithm

*在n* x *m*的游戏板上检查所有可能的长度为*l*的线的时间复杂度是多少？

 **例如，井字棋盘是 3x3，线被定义为长度 3；有 8 条可能的线路。我们还可以想象一个 9x9 的棋盘和一条规则，即您需要一条长度为 5 的线才能获胜。您如何描述检查具有不同*n*、*m*和*l*值的每条可能线的复杂性？

请注意，这*不是*考虑将游戏树遍历到未来的游戏状态，只是检查棋盘的当前状态以查看当前状态是否有赢家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:58:23.703

显然，您需要检查水平线、垂直线和对角线。

让我们假设板的布局，如果两者不相等，则 n 始终是较大的数字，并且它是侧放的“（乐高风格，而不是摩天大楼风格）。所以它是`n`横而`m`高的。

水平线将有`n * (m - l)`数量。

垂直线将有`m * (n - l)`数量。

对角线将是`(m - l) * (n - l)`, 或`m*n - l*m - l*n + l*l`

如果我们假设`n >= m > l`，那么我们可以肯定地说它在 内`O(n^2)`，正如我们对二维板所期望的那样。

我们知道这`l > n >= m`不会有任何结果。如果`n = m = l`我们有一个常数（`2*n + 2`）。如果`n = l > m`我们还有更好的情况，因为我们不必检查对角线或垂直线，您只需检查`m`线条。如果`n > l > m`，那么我们可以再次排除垂直线，但必须考虑对角线。无论如何，它比做对角线、垂直和水平线要少。

但是，可以根据[phant0m 的](https://stackoverflow.com/users/383124/phant0m)注释进行优化。它要求你知道最后一步是什么。

您可以放心地假设，如果采取了行动，那么它是在棋盘上没有赢家的时候做出的。因此，如果在棋盘上出现了一个获胜条件，那么它一定是由于最近的棋步而形成的。因此，给定此信息的最坏情况是获胜线是由最后的最新动作形成的。因此，您需要检查`l - 1`在每个方向（水平、垂直、前向对角线和后向对角线）延伸的 4 条线段。这是一共`4 * (2*l - 1)`，安然无恙`O(l)`。考虑到您只需要存储一个额外的坐标（最近的移动），这是一个最明智的优化。**

# python - 如何从 Google 代码中进行 pip 安装？

> ID：12609376
> 
> 赞同：2
> 
> 时间：2012-09-26T19:53:56.933
> 
> 标签：python, repository, pip, google-code

我正在尝试在此处安装托管在[Google Code](http://code.google.com/p/gevent/downloads/list)上的 Gevent 测试版，但我似乎无法正确使用命令（我不断收到**无法检测存档格式**错误）。从 Google 代码 pip install gevent-1.0b4 的命令是什么？

这是命令和错误：

`(venv)zak$ pip install https://code.google.com/p/gevent/gevent-1.0b4.tar.gz Downloading/unpacking https://code.google.com/p/gevent/gevent-1.0b4.tar.gz HTTP error 404 while getting https://code.google.com/p/gevent/gevent-1.0b4.tar.gz Could not install requirement https://code.google.com/p/gevent/gevent-1.0b4.tar.gz because of error HTTP Error 404: Not Found Could not install requirement https://code.google.com/p/gevent/gevent-1.0b4.tar.gz because of HTTP error HTTP Error 404: Not Found for URL https://code.google.com/p/gevent/gevent-1.0b4.tar.gz`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:07:21.797

您的 URL 错误，它返回**404**（您可以通过在浏览器中访问它来验证）。

```
pip install http://gevent.googlecode.com/files/gevent-1.0b4.tar.gz 
```

会工作。但正如它在 Google Code 的项目主页上所说，gevent 现在位于[github 上](https://github.com/SiteSupport/gevent)。

所以是

```
pip install https://github.com/downloads/SiteSupport/gevent/gevent-1.0b4.tar.gz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:59:03.940

尝试`pip install http://gevent.googlecode.com/files/gevent-1.0b4.tar.gz`

# caching - 缓存控制：为什么有两个不同的最大年龄

> ID：12609392
> 
> 赞同：0
> 
> 时间：2012-09-26T19:55:04.627
> 
> 标签：caching, atom-feed

我正在阅读来自 Twitter 的 atom-feed。我想知道我应该多久查询一次提要（即，将其输入查询 URL），以免错过任何结果。

标头缓存控制行有两个不同的 max-ages：

```
Cache-Control: max-age=15, must-revalidate, max-age=300 
```

我该如何解释这个？我应该每 15 秒还是每 300 秒轮询一次？

任何学到的评论将不胜感激。

# iphone - 我可以重用 UIView 吗？

> ID：12609395
> 
> 赞同：1
> 
> 时间：2012-09-26T19:55:21.320
> 
> 标签：iphone, ios, uiview, reusability

我的故事板中有 UIView 和插座 mynewView，我希望它显示完全不同的内容。并且做很多次。

我的 UIView 包含许多对象，我从互联网加载它。但每次我这样做

```
 NSArray *viewsToRemove = [view1 mynewView];
    for (UIView *v in viewsToRemove) {
        [v removeFromSuperview];
    }

    //Let's try to remove all possible views..

    viewsToRemove = [self.view subviews];
    for (UIView *v in viewsToRemove) {
        [v removeFromSuperview];
    }

    //here i create mynewView
    mynewView = [self createnewRandomView];
    //And finally add the View we have created.

    [self.view addSubview:mynewView]; 
```

我监控内存消耗，每次添加新的 UIView 时都会看到它的增长。即使我删除所有超级视图。我想他们会留在记忆中。

在我更改视图之前，我从超级视图中删除了所有可能的视图，但它们仍然保留在内存中。

Xcode 设置为使用 ARC，所以我无法发布它。

有什么好方法可以重用 UIView 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:43:35.473

```
[self.view addSubview:mynewView]; 
```

您的 newView 被添加为 self.view 的子视图。您上面的代码不用于删除 self.view 中的 yourVewView。请在添加新视图之前尝试此代码：

```
for (UIView *view in self.view) {
   if([view isKindOfClass:[YourNewViewClassName class]])
   {
       [view removeFromSuperView];
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-26T21:14:55.860

当你删除子视图时，将它们设置`nil`为你去，像这样：

```
for (UIView *v in viewsToRemove) {
   [v removeFromSuperview];
    v = nil;
} 
```

有关更多信息，请参阅例如[Arc：为多个按钮设置对 nil 的引用](https://stackoverflow.com/questions/11542720/arc-setting-references-to-nil-for-multiple-buttons)

# api - 尝试使用 soundcloud sdk 流式传输音乐

> ID：12609399
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:55:42.937
> 
> 标签：api, sdk, streaming, soundcloud

嗨，伙计们是 java 脚本的新手..

我正在尝试使用他们的 java 脚本 SDK 在 soundcloud 中流式传输音轨，但我的代码无法正常工作，请让我知道如何使其工作。下面是我的代码

```
 <!DOCTYPE html>
  <html><head>
  <script src=”http://connect.soundcloud.com/sdk.js”&gt;</script>

  <script src=”http://code.jquery.com/jquery-1.7.1.min.js”&gt;</script>

  <script>

  SC.initialize({

  client_id: “15c5a12b5d640af73b16bd240753ffbb?,

  redirect_uri: “http://connect.soundcloud.com/examples/callback.html”

  });
  $("#stream").live("click", function(){
      SC.stream("http://api.soundcloud.com/tracks/293", {autoPlay: true});
    });
  </script>
  </head>
  <body>
  <input type="button" href="#" id="stream" class="big button" value="Stream It Again, Sam" />
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:45:17.343

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T21:28:08.963

In addition to the changes mentioned above, changing the JQuery version to 1.4 worked for me.

# objective-c - SBJson 流解析器

> ID：12609400
> 
> 赞同：0
> 
> 时间：2012-09-26T19:55:53.490
> 
> 标签：objective-c, json, parsing, sbjson

我正在为 iOS 5 中的应用程序构建 Xcode 4.3.2 +。

我决定使用 SBJson 来解析来自我们服务器的数据流。我已经验证我正在从服务器接收到有效的 JSON 响应。我的问题涉及 SBJsonStreamParser 和 SBJsonParser 类背后的设计。

在 SBJsonParser 中，“objectWithData”方法似乎从 JSON 响应中接收到数据，并使用 SBJsonStreamParserAccumulator 将数据流附加到单个 JSON 文档中。一旦数据流被收集到一个对象中，它就会被 SBJsonStreamParser 中的“parse”方法解析。

在请求更大的 JSON 文档时，我遇到了几个问题。响应的大小似乎是合理的（特别是 9.4 KB 响应）。似乎 SBJsonStreamParser 在获取大于特定大小的数据流时会中断。解析器在响应较小（~3KB）时成功，但在响应较大（~10KB）时失败。我使用 NSLog 来验证在这两种情况下，拉一个小的和大的流，这些方法都成功地接收了完整的 json 文档——因为它看起来像 [{"id": .... 123}]。我确信问题在于数据流太长。

我想知道我是否错误地使用了 SBJson 或者这仅仅是解析器的限制？有什么我可以配置的东西允许 SBJsonStreamParser 不对更大（但合理的）数据流抛出错误并继续解析完整的响应？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:26:57.530

实际上，您有`objectWithData:`向后的工作原理。`SBJsonStreamParserAccumulator`用于累积解析的输出，而不是未解析的数据流。

# python - __init__() 在 python/django 中得到了一个意外的关键字参数“mime”

> ID：12609402
> 
> 赞同：3
> 
> 时间：2012-09-26T19:55:57.403
> 
> 标签：python, django, mime, magic-methods

.py 文件中此代码的第一行返回错误。

```
mime = magic.Magic(mime=True)
content_type = mime.from_buffer((data).read(1024))
request.session['content_type'] = content_type
if content_type == 'application/pdf' or content_type == 'application/msword':
    request.session['upload_status'] = "Content type is valid according to (MAGIC)" 
```

错误信息是 `__init__() got an unexpected keyword argument 'mime'`

我正在使用 Django 1.4.1 和 Python 2.7.3。我安装了魔法。不知道出了什么问题 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:58:30.833

只是在黑暗中刺伤，但[文档](https://github.com/ahupp/python-magic)建议您不应该`Magic`直接实例化该类。

```
import magic
magic.from_buffer(open("testdata/test.pdf").read(1024)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:59:36.430

Magic 对象的构造函数不接受名为“mime”的参数。我建议用 help(magic.Magic); 查看文档字符串。它可能会给你一个线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T19:06:13.737

根据上面的建议，如果与 JIRA 服务器的连接失败并出现错误：

```
The error message is __init__() got an unexpected keyword argument 'mime' 
```

然后去编辑

```
/usr/lib/python2.7/site-packages/jira/client.py 
```

代替

```
self._magic = magic.Magic(mime=True) 
```

和

```
self._magic = magic 
```

然后像这样运行代码：

```
from jira.client import JIRA
import magic
...
jira = JIRA(options={'server':'https://jira.server.goes.here'}, basic_auth=(options.username, options.password)) 
```

我正在使用带有 jira-python 的 python 2.7.3 ( [http://jira-python.readthedocs.org/en/latest/](http://jira-python.readthedocs.org/en/latest/) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-18T01:25:26.500

您很可能有另一个版本的`magic`. 如果我上次查看这些东西时没记错的话，Ubuntu 附带了一个不同的版本（也许，还有一个叫做 的东西`filemagic`）。开箱即用的 Cygwin 版本也是如此。那是我的情况。

我重新安装了 Cygwin 并遇到了同样的问题 - Python 的两个版本`magic`/ `python-magic`/ `filemagic`。我在这里查看了 SO 的解决方案，但没有很快找到。幸运的是，我保留了以前的笔记，对我有用的解决方案是：

```
$ sudo pip3 uninstall filemagic
$ sudo pip3 install python-magic 
```

或者，什么在我的 Cygwin 安装上效果更好：

```
$ python -m pip uninstall filemagic
$ python -m pip install python-magic 
```

这解决了我的问题。

当我搜索有关此问题的更多信息时，我在 github 上发现了一个非常相似的解决方案[（](https://github.com/secrary/SSMA/issues/1)已存档[） 。](https://web.archive.org/save/https://github.com/secrary/SSMA/issues/1)还有一个额外的步骤。

> 卸载文件魔术：
> 
> `sudo pip3 uninstall filemagic`
> 
> 卸载python-magic：
> 
> `sudo pip3 uninstall python-magic`

（可能的补充）

`sudo apt-get uninstall python-magic`

> 安装python-magic：
> 
> `sudo pip3 install python-magic`

~~通过快速搜索，我找不到两个版本的详细信息`magic`。我刚刚在线程上发现一些评论说，“你必须有其他版本的`magic`”，或者“你必须有不同版本的`magic`”。~~

**编辑** 我已经用`magic`来源更新了这个答案。由此看来，您可能必须在安装之前执行另一个`python-magic`命令`pip`

`sudo apt-get uninstall python-magic`

如上所述。

* * *

### 编辑

我发现有关其不同版本的详细信息随处`magic`可见。

我有以下三个链接（[第一](https://github.com/ahupp/python-magic)，[第二](https://stackoverflow.com/a/25287488/6505499)，[第三](https://bugs.launchpad.net/ubuntu/+source/file/+bug/603128)）

基本上，有两个版本。获得最多支持的是 PYPI，而且（在我看来）使用得更频繁。目前是v.0.4.15（2020-02-19），它的github页面是第一个链接。在该页面上，您可以阅读以下内容：

> 名称冲突
> 
> 遗憾的是，有两个库使用模块名称`magic`。两者都已经存在了很长一段时间。如果您正在使用此模块并使用类似的方法出现错误`open`，则您的代码需要另一个。希望有朝一日，这些会被调和。

第二个版本似乎引起了最多的问题，目前是 (2020-02-19) v5.25。根据第三个链接和我自己的研究，`sudo apt-get install python-magic`在某些版本的 Ubuntu 上使用时会安装这个。（[在此处](https://launchpad.net/ubuntu/xenial/amd64/python-magic/1:5.25-2ubuntu1.1)查看来自 Ubuntu 的一些可能的详细信息。）

在第二个链接中可以找到所有这一切的最佳解释。支持@mhawke 很好地解释事情。

以下是上述链接的归档版本：[第一个](https://web.archive.org/web/20200220014817/https://github.com/ahupp/python-magic)归档，[第二个](https://web.archive.org/web/20200220014834/https://stackoverflow.com/questions/25286176/how-to-use-python-magic-5-19-1/25287488)归档，[第三个](https://web.archive.org/web/20200220014850/https://bugs.launchpad.net/ubuntu/+source/file/+bug/603128)归档，[Ubuntu 信息归档](https://web.archive.org/web/20200220014930/https://launchpad.net/ubuntu/xenial/amd64/python-magic/1:5.25-2ubuntu1.1)。

# algorithm - 有哪些算法或方法可以对随机数据进行高效搜索索引？

> ID：12609404
> 
> 赞同：1
> 
> 时间：2012-09-26T19:56:02.750
> 
> 标签：algorithm, search, data-structures, indexing

我需要一个“出发点”来研究用于在大量随机数据中查找随机字符串的高效搜索算法、方法和技术的选项。我只是在学习这些东西，所以有人有这方面的经验吗？以下是我要优化的一些条件：

1.  第一个想法是在搜索索引等方面最小化文件大小 - 所以尽可能小的索引，甚至更好 - 动态搜索。
2.  要搜索的数据是大量完全随机的数据——例如，没有可感知模式的随机二进制 0 和 1。千兆字节的东西。
3.  提供一个同样随机的搜索字符串，比如 0111010100000101010101 在大量随机数据中找到相同字符串的最有效方法是什么？性能等方面的权衡是什么？
4.  需要定位该搜索字符串的所有实例，因此这似乎是限制要实施的解决方案类型的重要条件。

任何提示、线索、技术、维基文章等将不胜感激！我现在正在研究这个，看起来很有趣。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:27:14.517

一种简单的方法是在可搜索数据的所有可能的 N 字节子串上建立一个索引（N = 4 或 8 或类似的东西）。索引将从小块映射到该块出现的所有位置。

当你想查找一个值时，取前 N 个字节并使用它们来查找所有可能的位置。当然，您需要验证所有位置。

N 的高值意味着更多的索引空间使用和更快的查找，因为会发现更少的误报。

这样的索引在大小上可能是基本数据的小倍数。

* * *

第二种方法是将可搜索数据拆分为连续的、不重叠的 N 字节块（N = 64 左右）。将每个块散列到更小的大小 M（M = 4 或 8 左右）。

这节省了大量的索引空间，因为您不需要所有重叠的块。

当您查找一个值时，您可以通过查找要找到的字符串的所有连续、重叠的子字符串来定位候选匹配项。这假定要找到的字符串的大小至少为 N * 2 个字节。

# git - 找出本地分支正在跟踪哪个远程

> ID：12609415
> 
> 赞同：4
> 
> 时间：2012-09-26T19:57:19.633
> 
> 标签：git

这*不是* [找出本地分支正在跟踪的远程分支](https://stackoverflow.com/questions/171550/find-out-which-remote-branch-a-local-branch-is-tracking)，如果我有多个遥控器，我可能在所有遥控器中都有“master”。 `git branch`返回 master 但我不知道我所在的 master 分支是在 remoteFoo 还是 remoteBar 中。例如，我可能会这样做：

```
git clone someRepo.git
cd someRepo
git remote add anotherRemote otherremoteURL 
```

然后`git remote`显示

```
someRepo
anotherRemote 
```

在这两种情况下，我都可以`git checkout -b master someRepo/master`或`git checkout -b master anotherRemote/master`并且`git branch`会说“主人”。如何取回第一部分“someRepo”或“anotherRemote”？

你会认为我可以使用`git remote show`，但它需要一个参数，即你想要信息的遥控器的名称。

```
$ git remote show origin
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly
$ git remote show
someRepo
anotherRemote 
```

随着`git branch`我得到当前的指示：

```
$ git branch
  hold
* master
  old-stuff
  refactor 
```

但输出中没有“*” `git remote`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T03:02:25.513

您可能想在下面尝试这些以查看详细信息。

```
git remote -v
git remote -v show origin 
```

下面的示例输出：

```
dmasi@:/var/www/pirate_booty$ git remote -v
origin  git@bitbucket.org:dmasi/pirate_booty_calculator.git (fetch)
origin  git@bitbucket.org:dmasi/pirate_booty_calculator.git (push)

dmasi@:/var/www/pirate_booty$ git remote -v show origin
* remote origin
  Fetch URL: git@bitbucket.org:dmasi/pirate_booty_calculator.git
  Push  URL: git@bitbucket.org:dmasi/pirate_booty_calculator.git
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-31T18:01:37.497

`git status -sb`似乎很容易理解和记住。

`-s`代表以*短格式给出输出。*

`b`用于*显示分支和跟踪信息。*

参考：[https ://git-scm.com/docs/git-status#git-status--s](https://git-scm.com/docs/git-status#git-status--s)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T20:13:23.673

[这在此处](https://stackoverflow.com/a/10014163/1307974)的类似问题中得到了回答：要让**当前**分支跟踪远程分支，

```
git rev-parse --symbolic-full-name --abbrev-ref @{u} 
```

# delphi - 分段上传 GoogleDrive Api v2 时出现 503 错误

> ID：12609419
> 
> 赞同：2
> 
> 时间：2012-09-26T19:57:24.703
> 
> 标签：delphi, delphi-xe2, google-drive-api

我正在尝试在 Delphi XE2 中使用 Google Drive API，到目前为止，我几乎可以正常工作。我正在努力解决的一件事是分段上传。当我尝试上传文件时，我收到 503 错误。通常，这应该表明服务器有问题。但是，当我使用 fiddler 而不是我的 API 向同一 URL 发送具有相同正文和标头的上传请求时，文件已成功上传。这告诉我我的代码一定有问题。这个特殊的功能是一团糟，但在这里。

```
function TGoogleDriveApi.MultipartUpload(aStream : TStream; aTitle : string = 'Untitled';
  aDescription : string = ''; mimeType : string = 'application/octet-stream';
  indexableText : IGoogleDriveIndexableText = nil;
  lastViewedByMeDate : string = ''; modifiedDate : string = '';
  parents : IGoogleDriveParentList = nil) : IGoogleDriveFile;
var
  json, url, body, boundry, contentType : string;
  ss : TStringStream;
  ms : TMemoryStream;
  lHttpHelper : IHttpHelper;
  streamBytes : TBytes;
begin
  boundry := 'a_boundry';
  body := '--'+boundry+sLineBreak;
  body := body + 'Content-Type: application/json; charset=UTF-8';
  lHttpHelper := THttpHelper.Create;
  if(Token.IsExpired) then
    Token.Refresh(TokenUrl, OAuth.ClientId, OAuth.ClientSecret);
  url := 'https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart&access_token='+lHttpHelper.UrlEncode(Token.access_token);
  json := '{';
  json := json + '"title": "'+aTitle+'"';
  if(aDescription <> '') then
    json := json + ', "description": "'+aDescription+'"';
  if(lastViewedByMeDate <> '') then
    json := json + ', "lastViewedByMeDate": "'+lastViewedByMeDate+'"';
  json := json + ', "mimeType": "'+mimeType+'"';
  if(modifiedDate <> '') then
    json := json + ', "modifiedDate": "'+modifiedDate+'"';
  json := json + '}';
  body := body + sLineBreak + sLineBreak + json + sLineBreak + sLineBreak + '--'+boundry;
  body := body + sLineBreak + 'Content-Type: '+mimeType + sLineBreak  + sLineBreak;
  body := body + 'some test text from the api' + sLineBreak + sLineBreak + '--'+boundry+'--';

  ss := TStringStream.Create;
  ss.WriteString(body);
  ss.Position := 0;
  ms := TMemoryStream.Create;
  ms.Write(ss,ss.Size);
  SetLength(streamBytes,aStream.Size);
  aStream.Read(streamBytes,aStream.Size);
  ms.Write(streamBytes[0],aStream.Size);
  ss.Clear;
  ss.Position := 0;
  ss.WriteString(sLineBreak + sLineBreak + '--'+boundry+'--');
  ss.Position := 0;
  ms.Write(ss,ss.Size);

  contentType := 'multipart/related; boundary="'+boundry+'"';
  json := lHttpHelper.PostResponse(url,contentType,ms);
  FreeAndNil(ss);
  FreeAndNil(ms);
  Result := nil;
end; 
```

导致问题的线路是`lHttpHelper.PostResponse`呼叫。代码如下所示：

```
function THttpHelper.PostResponse(url, contentType : string; aStream : TStream) : string;
var
  lHTTP: TIdHTTP;
  lStream : TStringStream;
  handler : TIdSSLIOHandlerSocketOpenSSL;
begin
  lStream := TStringStream.Create;
  lHTTP := TIdHTTP.Create(nil);
  handler := TidSSLIOHandlerSocketOpenSSL.Create(nil);
  handler.SSLOptions.Method := sslvSSLv3;
  lHTTP.IOHandler := handler;
  try
    lHTTP.Request.ContentType := contentType;
    lHTTP.Post(url,aStream,lStream);
    lStream.Position := 0;
    Result := lStream.ReadString(lStream.Size);
      //except
  finally
    lStream.Free;
    lHTTP.Free;
    handler.Free;

    lStream := nil;
    lHTTP := nil;
    handler := nil;
  end;
end; 
```

我目前正在`MultipartUpload`从我的测试中调用该函数，如图所示

```
procedure TestIGoogleDriveApi.TestMultipartUpload;
var
  ReturnValue : IGoogleDriveFile;
  fs : TFileStream;
begin
  fs := TFileStream.Create('testupload.jpg',fmOpenRead);
  ReturnValue := FIGoogleDriveApi.MultipartUpload(fs,'Test Multipart Image Upload from API.txt','test file','image/jpeg');
  FreeAndNil(fs);
  if(ReturnValue = nil) then
    fail('ReturnValue cannot be nil');
end; 
```

任何想法可能导致问题？我什至不确定在这一点上应该怀疑什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:11:26.880

在我的代码中更改了两件事并进行了一些实质性的清理之后，我能够让上传工作。我所做的主要更改是将所有内容直接写入到`TMemoryStream`而不是a`TStringStream`然后写入a`TMemoryStream`并使用`AnsiString`s 而不是字符串。这是我清理后的代码。

```
function TGoogleDriveApi.MultipartUpload(aStream: TStream; aFile: TGoogleDriveFileUp) : IGoogleDriveFile;
var
  json, url, boundary, body : AnsiString;
  lHttpHelper : IHttpHelper;
  ms : TMemoryStream;
  ss : TStringStream;
  writer : IRtSerializeWriter;
  reader : IRtSerializeReader;
begin
  if(Token.IsExpired) then
    Token.Refresh(TokenUrl, OAuth.ClientId, OAuth.ClientSecret);
  lHttpHelper := THttpHelper.Create;
  ss := TStringStream.Create;
  writer := TRtJsonSerializeWriter.Create;
  writer.SaveToStream(ss,aFile);
  ss.Position := 0;
  json := ss.ReadString(ss.Size);
  FreeAndNil(ss);
  url := 'https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart&access_token='+lHttpHelper.UrlEncode(Token.access_token);
  boundary := 'a_bondary';
  body := '--'+boundary+sLineBreak;
  body := body + 'Content-Type: application/json; charset=UTF-8' + sLineBreak + sLineBreak;
  body := body + json + sLineBreak + sLineBreak +'--'+boundary;
  body := body + sLineBreak + sLineBreak;
  ms := TMemoryStream.Create;
  ms.Write(body[1],Length(body));
  ms.CopyFrom(aStream, aStream.Size);
  body := sLineBreak + sLineBreak + '--' + boundary + '--';
  ms.Write(body[1],Length(body));
  ms.Position := 0;
  json := lHttpHelper.PostResponse(url,'multipart/related; boundary="'+boundary+'"',ms);
  ss := TStringStream.Create;
  ss.WriteString(json);
  ss.Position := 0;
  reader := TRtJsonSerializeReader.Create;
  Result := TGoogleDriveFileDown.Create;
  reader.LoadFromStream(ss,Result as TGoogleDriveFileDown);
  FreeAndNil(ms);
  FreeAndNil(ss);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:48:49.613

您需要以某种方式遵循@RobKennedy 的建议。您需要查看线路上发生了什么来调试它。尝试用**http替换****https**驱动器 url，然后使用 Wireshark 进行跟踪。

 **@Hendra 也是正确的，通常您的应用程序需要实现指数退避并重试 500 个错误，尽管我怀疑这不是您的具体问题（还 :-)）**

# visual-studio-2010 - 从 Visual Studio Qt 插件生成的 .pro 文件添加了不必要的 openGL 库？

> ID：12609422
> 
> 赞同：1
> 
> 时间：2012-09-26T19:57:58.727
> 
> 标签：visual-studio-2010, qt, opengl, makefile

我用 Qt 和 openGL 小部件在 Visual Studio 中创建了一个基本应用程序。我从插件导出一个 .pro 文件，以便在 Linux 中编译。

我收到消息：

```
/usr/bin/ld: cannot find -lopengl32
/usr/bin/ld: cannot find -lglu32 
```

...运行make时。

如果我删除，问题就会消失，程序编译得很好：

```
LIBS += -lopengl32 \
    -lglu32 
```

...来自生成的 .pro 文件。

我了解“导出 .pro”功能并非完美无缺，但这是解决此问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:48:04.200

我不太记得 Linux 上 OpenGL 库的确切名称，但它不是 opengl32。而是libopengl。所以这是完全正常的。

这将使您仅在 Windows 上与 opengl32.lib 链接：

```
win32 : LIBS += -lopengl32 -lglu32 
```

如果需要，这将使您与 Linux 上的 libopengl 链接：

```
unix : LIBS += -lopengl -lglu 
```

对于`macx`平台范围，我想还有额外的工作要与 OpenGL 框架链接。

# apache - PHP PDO 显示“没有价值”

> ID：12609423
> 
> 赞同：4
> 
> 时间：2012-09-26T19:58:00.710
> 
> 标签：apache, pdo, php

我已经看到很多描述这个问题的问题，但没有一个解决解决方案。

昨晚我将 PHP 从 5.3.2 更新到 5.4.6，突然间 PDO 开始表现得很奇怪，并显示没有可用的驱动程序。

*   我在`ext`目录中有必要的 DLL (php_pdo_mysql.dll)
*   在`php.ini`PDO 和特定于数据库的扩展中都启用
*   以下代码在从终端/cmd 和浏览器执行时的行为不同：

    `print_r(PDO::getAvailableDrivers());`

    在终端/cmd 它显示适当的驱动程序列表，而在浏览器中显示空数组。

所有这一切让我相信 Apache 安装（仍然在 ）有些地方不太对劲`2.2`。我安装了版本`2.4`只是为了确定，但没有任何改变。

调用时，`phpinfo()`显示正确的`php.ini`路径，但是否还有其他可能影响正确加载 PDO 的内容？

提前致谢！

# iphone - 几个 UINavigation 控制器，每个选项卡一个，作为我的应用程序委托的出口？

> ID：12609424
> 
> 赞同：0
> 
> 时间：2012-09-26T19:58:07.223
> 
> 标签：iphone, objective-c, ios, xcode

这更多是对问题和我的实现的讨论，这似乎引起了问题。

我的应用程序有一个标签栏和导航控制器。在每个选项卡中，您可以进入视图，并且选项卡栏将被隐藏，直到您从子视图中单击返回。

我的选项卡上的每个都有一个导航控制器，这些在我的应用程序委托中被声明为插座，并且还有`@class tab1navcontroller`

一个典型的用途是。

```
MyAppDelegate *delegate = (MyAppDelegate *)[[UIApplication sharedApplication] 
       delegate];
[delegate.tab1NavController pushViewController:nextController animated:YES]; 
```

过去我在这方面没有遇到很多问题，我相信我是从当时正在阅读的书中复制了这种方法。

然而，几个月前我和一位大学讨论过，他说我的应用程序应该只有一个导航控制器。

当时我确实尝试替换代码（如上所示）并`self.navigationcontroller`改用，但这会导致问题，我不记得它们是什么，但我放弃了这些修复。

今天发生了一个错误，当视图被快速推送和返回时。我还使用僵尸分析器运行了该应用程序，这表明上面的代码是问题所在。

我相信上面的代码可能会导致泄漏。

我只是不知道什么方法是最好的，从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:56:22.893

正如@Dima 在评论中所说，你的同事错了。在我的应用程序中，我有一个 tabbarController 作为窗口 rootViewController。您可以在属性或其 viewController 数组或单独的导航控制器中公开它。您不能在多个选项卡中重复使用导航控制器 - 每个选项卡一个，或者混合使用。也就是说，在我的 tabbarController 中，我有 4 个导航控制器和一个普通的 UIViewController 子类。

选项卡栏控制器保留其所有视图控制器，导航控制器保留其所有视图控制器。也就是说，如果你有一个对被弹出的 viewController 的“分配”类型引用，你就会遇到问题。

# css - CSS3图像边框z-index

> ID：12609425
> 
> 赞同：2
> 
> 时间：2012-09-26T19:58:13.580
> 
> 标签：css, border

我的图像有以下标记：

```
img.framed
{
    border-image: url('../images/design/frame.png') 40 40 40 40 stretch stretch;
    border-color: #f4be52; border-style: inset; border-width: 40px;
} 
```

我得到了这个结果：

![在此处输入图像描述](../Images/ce6644de10524033b073128adaa464d2.png)

我不喜欢，框架内的图像覆盖了我框架的一部分。

如何修改我的代码以在图像上显示**框架**？

像那样：

![在此处输入图像描述](../Images/aea4b73eb6a0d25b545c7ab0d8a1b29e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T12:41:33.377

必须隐藏图像的某些部分才能创建您想要的内容。

创建具有您的图像的主 div，以及另一个用于框架边框的 div。

这个主 div 是**相对定位**的，因此其中绝对定位的元素是**相**对于它的。

将框架边框背景应用于子 div，而不是图像。这个子 div 应该与图像的宽度和高度几乎相同，并且`z-index`大于图像。此外，将其稍微放在顶部和左侧以成像。

```
<div class="main">
    <div class="image-container">
    <!-- does not actually contain the image -->
    </div>
    <img src="some image"/>
</div> 
```

[**JS小提琴**](http://jsfiddle.net/OmShiv/UDtby/)

我使用纯边框来显示重叠。绿色边框与图像的黄色背景重叠。

这是CSS：

```
.main {
    position: relative;
    top: 100px;
    left: 10%;
}
.image-container {
    position: absolute;
    left: -70px;
    top: -70px;
    border: 20px solid rgba(25,255,25, 0.5);
    z-index: 5;
    width: 230px;
    height: 330px;
    border-image: url('your frame link') 90 90 90 90 stretch stretch;
    border-color: #f4be52;
    border-style: inset;
    border-width: 86px;
}
img {
    position: absolute;
    background: #eaff77;
    width: 260px;
    height: 360px;
    z-index: 1;
}
.main:hover > img {
    z-index: 10;
} 
```

**更新**：
我已经用真实图像和适当的宽度和高度更新了小提琴。请检查。
当您将鼠标悬停在图像上时，您会看到实际大小。这只是为了证明 Frame 实际上与图像重叠，这正是您想要的。

# android - android中的一半或四分之一黑屏

> ID：12609430
> 
> 赞同：3
> 
> 时间：2012-09-26T19:58:31.100
> 
> 标签：android, android-activity

我有一个 android 活动，当我有时启动（大约 4 次中的 1 次）时，它只会在显示之前绘制四分之一或一半的屏幕。当我改变方向或按下按钮时，屏幕会正确绘制。

我只是在使用 TextViews、Buttons、Fonts - 没有绘图或类似的东西。

我所有的初始化代码都在 onCreate() 中。在这种方法中，我加载了一个大约 40 行长的文本文件，并且还获得了一个共享首选项。这会导致延迟，使其无法绘制意图吗？

如果有人看到类似的东西，请提前致谢。

**编辑**- 我尝试注释掉单词列表的加载，但它没有解决问题。

**编辑 2** - 我没有设法解决问题，但设法通过在 onCreate 末尾添加一个计时器来改进它。我设置了低刷新率，并在勾选中更改了其中一个控件的文本。这似乎重新绘制了屏幕并摆脱了屏幕的黑色部分。

这里是活动

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainRelativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/blue_abstract_background" >

    <RelativeLayout
        android:id="@+id/relativeScore"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:id="@+id/ScoreLabel"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:padding="10dip"
            android:text="SCORE:"
            android:textSize="18dp" />
    />

        <TextView
            android:id="@+id/ScoreText"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@id/ScoreLabel"
            android:padding="5dip"
            android:text="0"
            android:textSize="18dp" />

        <TextView
            android:id="@+id/GameTimerText"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:minWidth="25dp"
            android:text="0"
            android:textSize="18dp" />

        <TextView
            android:id="@+id/GameTimerLabel"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@id/GameTimerText"
            android:padding="10dip"
            android:text="TIMER:"
            android:textSize="18dp" />
             />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeHighScore"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/relativeScore" >

        <TextView
            android:id="@+id/HighScoreLabel"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:padding="10dip"
            android:text="HIGH SCORE:"
            android:textSize="16dp" />

        <TextView
            android:id="@+id/HighScoreText"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/HighScoreLabel"
            android:padding="10dip"
            android:text="0"
            android:textSize="16dp" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/relativeHighScore"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linearMissing"
            android:layout_width="fill_parent"
            android:layout_height="80dp"
            android:layout_gravity="center"
            android:orientation="vertical" >

            <View
                android:layout_width="match_parent"
                android:layout_height="2dp"
                android:background="@color/yellow_text" />

            <TextView
                android:id="@+id/MissingWordText"
                style="@style/yellowShadowText"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_gravity="center_horizontal"
                android:layout_marginTop="25dp"
                android:text="MSSNG WRD"
                android:textSize="22dp"
                android:typeface="normal" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="2dp"
            android:background="@color/yellow_text" />

        <TableLayout
            android:id="@+id/buttonsTableLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:paddingTop="5dp" >

                <Button
                    android:id="@+id/aVowelButton"
                    android:layout_width="66dp"
                    android:layout_height="66dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginBottom="10dp"
                    android:layout_marginRight="5dp"
                    android:background="@drawable/blue_vowel_button"
                    android:text="@string/a"
                    android:textColor="@color/yellow_text"
                    android:textSize="30dp" />

                <Button
                    android:id="@+id/eVowelButton"
                    android:layout_width="66dp"
                    android:layout_height="66dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginBottom="10dp"
                    android:layout_marginRight="5dp"
                    android:background="@drawable/blue_vowel_button"
                    android:text="@string/e"
                    android:textColor="@color/yellow_text"
                    android:textSize="30dp" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" >

                <Button
                    android:id="@+id/iVowelButton"
                    android:layout_width="66dp"
                    android:layout_height="66dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_margin="5dp"
                    android:background="@drawable/blue_vowel_buttoni"
                    android:text="@string/i"
                    android:textColor="@color/yellow_text"
                    android:textSize="30dp" />

                <Button
                    android:id="@+id/oVowelButton"
                    android:layout_width="66dp"
                    android:layout_height="66dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_margin="5dp"
                    android:background="@drawable/blue_vowel_button"
                    android:text="@string/o"
                    android:textColor="@color/yellow_text"
                    android:textSize="30dp" />

                <Button
                    android:id="@+id/uVowelButton"
                    android:layout_width="66dp"
                    android:layout_height="66dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_margin="5dp"
                    android:background="@drawable/blue_vowel_button"
                    android:text="@string/u"
                    android:textColor="@color/yellow_text"
                    android:textSize="30dp" />
            </TableRow>
        </TableLayout>

        <TextView
            android:id="@+id/TimeToStartText"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:textSize="24dp" />

        <Button
            android:id="@+id/startButton"
            style="@style/yellowShadowText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="10dp"
            android:background="@drawable/blue_button_menu"
            android:gravity="center"
            android:padding="10dip"
            android:text="START!"
            android:textSize="28dp" />
    </LinearLayout>

</RelativeLayout> 
```

还有 OnCreate() 和一些方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game);
    isNewWord = true; 
    m_gameScore = 0; 
    m_category = getCategoryFromExtras();           
    //   loadWordList(m_category); 
    initialiseTextViewField(); 
    loadHighScoreAndDifficulty(); 
    setFonts();
    setButtons(); 

    setStartButton(); 

    enableDisableButtons(false); 

}

private void loadHighScoreAndDifficulty() {
    //setting preferences
    SharedPreferences prefs = this.getSharedPreferences(m_category, Context.MODE_PRIVATE);
    int score = prefs.getInt(m_category, 0); //0 is the default value
    m_highScore = score; 
    m_highScoreText.setText(String.valueOf(m_highScore)); 

    prefs = this.getSharedPreferences(DIFFICULTY, Context.MODE_PRIVATE);
    m_difficulty = prefs.getString(DIFFICULTY, NRML_DIFFICULTY); 

}

private void initialiseTextViewField() {
    m_startButton = (Button) findViewById(R.id.startButton);
    m_missingWordText = (TextView) findViewById(R.id.MissingWordText); 
    m_gameScoreText = (TextView) findViewById(R.id.ScoreText); 
    m_gameScoreLabel = (TextView) findViewById(R.id.ScoreLabel); 
    m_gameTimerText = (TextView) findViewById(R.id.GameTimerText); 
    m_gameTimerLabel = (TextView) findViewById(R.id.GameTimerLabel); 
    m_timeToStartText = (TextView) findViewById(R.id.TimeToStartText);
    m_highScoreLabel = (TextView) findViewById(R.id.HighScoreLabel); 
    m_highScoreText = (TextView) findViewById(R.id.HighScoreText);
}

private String getCategoryFromExtras() {
    String category = ""; 
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        category = extras.getString("category");
    }
    return category;
}

private void enableDisableButtons(boolean enable) {
    Button button = (Button) findViewById(R.id.aVowelButton);
    button.setEnabled(enable);
    button = (Button) findViewById(R.id.eVowelButton);
    button.setEnabled(enable);
    button = (Button) findViewById(R.id.iVowelButton);
    button.setEnabled(enable);
    button = (Button) findViewById(R.id.oVowelButton);
    button.setEnabled(enable);
    button = (Button) findViewById(R.id.uVowelButton);
    button.setEnabled(enable);
}

private void setStartButton() {
    m_startButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            m_gameScore = 0; 
            updateScore(); 
            m_startButton.setVisibility(View.GONE);
            m_timeToStartText.setVisibility(View.VISIBLE);
            startPreTimer(); 
        }

    });

} 
```

# orm - ColdFusion 9 ORM一次更新多行

> ID：12609431
> 
> 赞同：0
> 
> 时间：2012-09-26T19:58:34.313
> 
> 标签：orm, coldfusion

进行这样的查询的最佳方法是什么，它将更新多行：

```
UPDATE B
    SET col_a = 1
    Where col_a = 0 
```

我可以加载实体，然后循环它们为每个实体执行 EntitySave，但这似乎有点矫枉过正。我应该使用 HQL 进行更新吗？我可以使用 HQL 进行更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:05:06.957

您绝对可以使用`ORMExecuteQuery`. 这是我参与的一个项目的示例：

```
ORMExecuteQuery("UPDATE Part SET ReleaseDate = :ReleaseDate, ChangeNote = :ChangeNote WHERE ID IN (#Arguments.PartIDs#)", {ReleaseDate = Arguments.ReleaseDate, ChangeNote = Arguments.ChangeNote}); 
```

就这么简单...请注意，您将参数指定为`:VarName`并将它们作为`ORMExecuteQuery`函数的第二个参数输入。

# ios - 重新创建类似于 ARIA ipad 应用程序的垂直标签栏的最安全方法

> ID：12609433
> 
> 赞同：0
> 
> 时间：2012-09-26T19:58:47.190
> 
> 标签：ios, ipad, ios5

我一直在寻找改变 iPad 应用程序当前 UI 的想法，我发现[ARIA v11](http://itunes.apple.com/us/app/aria-v11/id489782767?mt=8)对我们来说看起来非常有用。虽然，我不确定他们是如何创建垂直选项卡的，但从我的在线研究中，我听到了混合消息作为做什么。我很好奇重新创建它的最安全方法是什么，这样我就不会破坏任何视图控制器及其方法。

我们支持 iOS >5.0

这是我正在尝试重新创建的特定“文件夹选项卡”类型的屏幕截图。 ![在此处输入图像描述](../Images/77bd86aaae3bdc58bde28fb594767ba8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:31:55.570

[好的，所以我用这个](http://www.hollance.com/2011/11/mhtabbarcontroller-a-custom-tab-bar-for-ios-5-using-the-new-container-apis/)例子弄清楚了，这就是我很快想到的：

![在此处输入图像描述](../Images/6729dab9713d5a58839a345313ccdb8b.png)

# url - 网站上的目录可以在其名称中包含句点吗？

> ID：12609436
> 
> 赞同：1
> 
> 时间：2012-09-26T19:59:02.893
> 
> 标签：url, directory

网站上的文件夹是否可以具有包含句点的名称？例如，“foo.folder”是网站上的有效目录名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:01:47.073

答案是肯定的。这已在骗局中大量使用，并且仍在起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:02:16.853

是的。**允许所有合法的文件名**。无法通过 http 传输的字符将是`urlencoded`，但点不是其中之一。

# java - 是否可以将 javax.xml.transform.Transformer 与包含一些 xalan:redirect 的 xslt 一起使用？

> ID：12609438
> 
> 赞同：0
> 
> 时间：2012-09-26T19:59:19.173
> 
> 标签：java, xslt, xalan

**我为xalan**编写了一个 xslt ，它与 xalan cli ( ) 配合得很好`org.apache.xalan.xslt.Process`。xslt 使用 xalan 扩展名`redirect`它确实生成了几个 xml 文件，如预期的那样。

现在我想从 Java 应用程序进行转换。我查看了org.apache.xalan.xslt.Process源代码，有点复杂（1000行if/then/else）。我找不到文档。我正在查看调用转换并可能设置输出目录的最少代码。

我试过类似的东西：

```
 final ByteArrayOutputStream out = new ByteArrayOutputStream();
    InputStream in = null;
    InputStream xsl = null;
    try {
        in = inputFileStream;
        xsl = url.openStream();
        final TransformerFactory tFactory = TransformerFactory
                .newInstance();
        final Transformer transformer = tFactory
                .newTransformer(new StreamSource(xsl));
        transformer.transform(new StreamSource(in), new StreamResult(out));
    } catch (Throwable t) {
        Activator.logErrorMessage(NLS.bind(
                Messages.Import_XSLT_TRANSFORMATION_FAILED, t.toString()));
    } finally {
        IOUtils.closeQuietly(xsl);
        IOUtils.closeQuietly(in);
        IOUtils.closeQuietly(out);
    } 
```

它适用于简单的 xslt（即没有重定向扩展）。如果我使用带有重定向扩展名的 xslt，我会得到常规输出`<?xml version="1.0" encoding="UTF-8"?>`，但没有其他输出文件（就像我在使用 时得到的那样`org.apache.xalan.xslt.Process`）。

使用带有重定向扩展名的 xslt 进行转换的最小调用/API 是什么，并且知道所有输出文件将在哪里结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:35:03.813

实际上代码工作正常。只是我没有提供完整的路径`redirect:write file=""`，所以我错过了输出文件实际写入的事实。

我将一个参数从java传递给xslt：

```
final Transformer transformer = templates.newTransformer();
transformer.setParameter("containerFullPath", containerFullPath);
transformer.transform(new StreamSource(in), new StreamResult(out)); 
```

并在 xslt 中添加了以下行：

```
<xsl:param name="containerFullPath"/> <!-- at the root of the xslt -->
...
    <redirect:write  file="{$containerFullPath}/{$modelName}-{@name}.bpmn">
... 
```

现在，我可以看到它们应该在的输出文件。

# ios - UIWebView 在推送的 ViewController 中闪烁

> ID：12609445
> 
> 赞同：0
> 
> 时间：2012-09-26T19:59:47.950
> 
> 标签：ios, uiwebview, uinavigationcontroller

我有 2 个由 UINavigationController 控制的 ViewController A 和 B。在 B 视图控制器中，我有 UIWebView。我将数据从 A 传递给 B。我推送 B 视图控制器。在 B viewDidLoad 方法中，我将数据设置为 UIWebView。UIWebView 控制器中的 loadHTMLString（我用来设置数据）方法是异步的，所以当我将视图控制器 B 推送到 UINavigatorController 时，我看到了一点延迟/黑屏/闪烁，因为尽管 B ViewController 已经推送，我的数据仍在 UIWebView 中呈现。那么避免黑屏/闪烁的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:07:59.393

也许隐藏 webView`(webView.hidden = YES)` 直到`– webViewDidFinishLoad:` 方法（在这个方法中只是 set `webView.hidden = NO`）`UIWebViewDelegate` 将被调用，对你来说将是 halpfull。或者，您可以使用`– stringByEvaluatingJavaScriptFromString:`设置背景的方法，它在这个问题中描述了[在 viewDidLoad 中调用 UIWebView 的 stringByEvaluatingJavaScriptFromString 是否正确？](https://stackoverflow.com/questions/8678932/is-it-correct-to-invoke-stringbyevaluatingjavascriptfromstring-of-uiwebview-in-v)

# javascript - JS 过滤器链接正在移动页面 - 不知道为什么

> ID：12609447
> 
> 赞同：0
> 
> 时间：2012-09-26T19:59:51.563
> 
> 标签：javascript

我创建了一个简单的菜单设置，其中所有信息都在同一页面上 - 在选择该选项卡之前，大部分信息都是隐藏的。我正在使用的过滤器 JS 对此非常有效，但由于某种原因（仅在 CHROME 中），当单击菜单项（例如，位置、帮助）时，屏幕会弹出几百像素（显示选定的信息就好了尽管）。奇怪的是，这只发生在页面被刷新并且第一次被点击的时候。在那之后，一切都很好！

以下是相关代码，但要查看它的实际效果，请参阅[测试站点](http://www.southsideurbanmarket.com/)

我用于过滤器的 JS 是：

```
 $(document).ready(function() {
    $('#nav a').click(function() {
        $('#nav a.current').removeClass('current');
        $(this).addClass('current');

        var filterVal = $(this).text().toLowerCase().replace(' ','');

        $('#content div').each(function() {
            if(!$(this).hasClass(filterVal)) {
                    $(this).hide().addClass('hidden');
            } else {
                $(this).show().removeClass('hidden');
            }
        });
    return false;
    });
}); 
```

HTML 菜单和信息如下：

```
<ul id=nav>
<a href="#" class="current"><li>Mission</li></a>
<a href="#"><li>Location</li></a>
<a href="#"><li>Help</li></a>
<a href="#"><li>Vendors</li></a>        
</ul>

        <div id=content>
        <div class=mission>
            <img src="./images/roosters.jpg">
            <h2>The Mission</h2>
            <p>...</p>
        </div>

        <div class=location>
            <img src="./images/old_market.jpg">
            <h2>Our Location</h2>
            <p>...</p>
        </div>

        <div class=help>
            <img src="./images/helpers.jpg">
            <h2>Get Involved</h2>
            <p>...</p>
        </div>

        <div class=vendors>
            <img src="./images/artisans.jpg">
            <h2>Our Vendors</h2>
            <p>...</p>
        </div>          

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:04:52.967

它`href="#"`在您的锚标记中，它们指向页面顶部。您可能希望将 a 添加`preventDefault()`到您的点击处理程序中。[在这里](http://api.jquery.com/event.preventDefault/)阅读所有相关信息。

# scala - 使用 Play2 / Scala 通过 Iteratee 将文件上传流转发到 S3

> ID：12609451
> 
> 赞同：18
> 
> 时间：2012-09-26T20:00:22.170
> 
> 标签：scala, amazon-s3, playframework-2.0, iterate

我已经阅读了一些关于通过 Iteratee 将文件发送到 S3 的可能性的内容，这似乎允许在我们收到文件时发送 S3 文件块，并避免大文件的 OutOfMemory 例如。

我发现这篇 SO 帖子可能几乎是我需要做的： [Play 2.x : Reactive file upload with Iteratees](https://stackoverflow.com/questions/11916911/play-2-x-reactive-file-upload-with-iteratees) 我真的不明白怎么做，或者它是否真的在 Play 2.0.2 中可用（因为 Sadek Brodi 说 foldM 仅在 Play 2.1 中可用）

对于阅读过一些关于 Iteratees 的博客但还不是 Scala/Play2 专家的人，有人可以用简单的方式解释一下吗？

我什至不知道我是否应该使用多部分正文解析器或类似的东西，但我知道的一件事是我不明白这段代码在做什么：

```
val consumeAMB = 
  Traversable.takeUpTo[Array[Byte]](1028*1028) &>> Iteratee.consume()

val rechunkAdapter:Enumeratee[Array[Byte],Array[Byte]] =
  Enumeratee.grouped(consumeAMB)

val writeToStore: Iteratee[Array[Byte],_] =
  Iteratee.foldM[Array[Byte],_](connectionHandle){ (c,bytes) => 
    // write bytes and return next handle, probable in a Future
  }

BodyParser( rh => (rechunkAdapter &>> writeToStore).map(Right(_))) 
```

* * *

顺便说一句，与使用经典的 Java InputStream / OutputStream 相比，内存消耗会有什么不同。我实际上能够以非阻塞方式将 500mb 文件转发到 S3，内存消耗非常低，不使用 Iteratees，使用 Java + AsyncHttpClient + Grizzly（但我想它也适用于 Netty）。

那么使用Iteratee有什么好处呢？

我可以看到的一个区别是，我获得并转发到 S3 的 InputStream 在我的情况下由一个临时文件支持（这是一种 CXF 行为），因此它可能不像 Play Iteratee 那样具有反应性

但是对于 Iteratee，如果 Enumerator 产生连接接收到的字节并通过 Iteratee 将它们转发到 S3，那么如果与 S3 的连接不好并且字节不能非常快速地转发，那么“待处理”字节存储在哪里?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-13T22:59:07.017

**简单的解释？**我会尽力。:)

您正在用组件构建管道。一旦你构建了管道，它就可以被发送数据。它是一个*Iteratee*，所以它知道如何*迭代*数据。

您要上传的文件包含在请求正文中，而 BodyParser 是在 Play 中处理请求正文的。因此，您将迭代管道放入 BodyParser。当发出请求时，您的管道将被发送数据（它将对其*进行迭代*）。

您的管道 ( `rechunkAdapter &>> writeToStore`) 将数据分块为 1MB 位，然后将它们发送到 S3。

管道的第一部分 ( `rechunkAdapter`) 进行分块。它实际上有自己的迷你管道来进行分块（`consumeAMB`）。一旦迷你管道接收到足够的数据来组成一个块，它就会将它发送到主管道。

管道的第二部分 ( `writeToStore`) 就像一个循环，在每个块上被调用，让您有机会将每个块发送到 S3。

**迭代器的优点？**

一旦您知道发生了什么，您就可以通过将组件连接在一起来构建迭代管道。并且类型检查器通常会在您错误地将某些东西连接在一起时告诉您。

例如，我们可以修改上面的管道来修复它很慢的事实。它可能很慢，因为只要一个块准备好上传到 S3，请求上传就会暂停。放慢请求上传速度很重要，这样我们就不会耗尽内存，但我们可以通过添加一个固定大小的缓冲区来更宽容一点。所以只需添加`Concurrent.buffer(2)`到管道的中间以缓冲最多 2 个块。

Iteratees 为流提供了一种功能方法。这是优点还是缺点，取决于您对函数式编程的感受。:) 与惰性流（另一种功能方法）相比，迭代提供了对资源使用的精确控制。

最后，迭代器允许我们相对简单地（！）进行非常复杂的异步流编程。我们可以在不持有线程的情况下处理 IO，这是可扩展性的巨大胜利。经典的 Java InputStream/OutputStream 示例需要 2 个线程。

# google-app-engine - GAE：如何上传应用程序要访问的文件？

> ID：12609457
> 
> 赞同：0
> 
> 时间：2012-09-26T20:00:40.863
> 
> 标签：google-app-engine, templates, go

**更新：我发现了问题。**我的 HTML 文件静态规则仍然与模板匹配，即使它们位于子目录中。在更改规则使其不再匹配后，应用程序可以访问这些文件。

我正在创建一个 Google AppEngine 应用程序。我正在使用 Go 语言，但我不确定这是否相关。我想使用带有单独模板文件的模板。所以应用程序必须读取模板文件。在本地这可行，但在将应用程序上传到 GAE 后，调用 template.ParseFiles() 时我得到“没有这样的文件或目录”。

所以我在想，我必须以某种方式指出模板文件是应用程序文件，以便它们以正确的方式上传。我想我的模板文件可能因为这个在我的 app.yaml 中被上传为静态文件

```
- url: /(.*\.html)
  static_files: \1
  upload: .*\.html 
```

所以我把它们移到了他们自己的目录中。但这并没有什么不同。我尝试在 app.yaml 中为我的脚本规则添加一个上传指令，如下所示：

```
- url: /.*
  script: _go_app
  upload: templates/.* 
```

但这似乎是不允许的。那么谁能告诉我如何从我的 GAE 应用程序中访问模板文件（或任何数据文件）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T00:51:12.200

**假设**文件不在`static_dir`or`static_files`目录中，文件会自动上传。请参阅 App Engine 文档中的[跳过文件](https://developers.google.com/appengine/docs/go/config/appconfig#Go_app_yaml_Skipping_files)部分。App Engine 将此类目录和文件视为静态资源，[静态资源与应用程序分开](https://developers.google.com/appengine/docs/go/config/appconfig#Go_app_yaml_Static_file_handlers)提供。

静态资源通常不能从应用程序代码访问。如果您必须将模板与其他静态资源放在同一目录中，则可以使用该`application_readable`设置使您的应用也可以访问这些资源。

但正如您所注意到的，您可以将模板放在应用程序中未映射到静态资源路径的位置；这可能是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:29:31.690

项目目录中的所有文件都会自动上传。

如果您的应用需要访问它们（这是您使用模板时的情况），您不能将它们标记为静态。这就是第一个解决方案失败的原因。

第二次尝试也不起作用，因为上传不是 url 描述的成员。

在您的情况下，只需部署您的应用程序，文件将自动上传并可供您的应用程序使用（您可能需要获取项目的基本路径以构建模板的完整路径）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T13:11:10.997

在 [1] 检查 app.yaml 的不同选项。您可以检查 static_dir 和 static_files 选项。我正在分享一个能够下载静态文件的示例。这些文件位于静态文件夹和测试文件夹中。我分享我的 app.yaml：

```
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: .*
  script: main.app

- url: /test
  static_dir: test  
  application_readable: true

- url: /(.*\.(gif|png|jpg))$
  static_files: static/\1
  upload: static/.*\.(gif|png|jpg)$
  application_readable: true 
```

和 main.py：

```
…
import webapp2
...
class Download(webapp2.RequestHandler):
    def get(self):

      imageName = self.request.get('img-name')
      self.response.headers['Content-Disposition'] = str('attachment; filename=' + imageName)
      f = None
      try:
          f = open('static/' + imageName, 'r')
          self.response.out.write(f.read())
      except:
          self.response.out.write('Jon Wayne')

class Test(webapp2.RequestHandler):
    def get(self):

      imageName = self.request.get('tst-name')
      self.response.headers['Content-Disposition'] = str('attachment; filename=' + imageName)
      f = None
      try:
          f = open('test/' + imageName, 'r')
          self.response.out.write(f.read())
      except:
          self.response.out.write('Jon Test')

app = webapp2.WSGIApplication([
    ('/download', Download),
    ('/tst', Test)
], debug=True) 
```

我有两个图像：fib2.png 和 fib1.jpeg 然后在 Test 文件夹中我有两个文件 fib2.tst 和 fib1.tst。

Web 是域名。

[https://web.com/download?img-name=fib2.png](https://web.com/download?img-name=fib2.png)

[https://web.com/download?img-name=fib1.jpeg](https://web.com/download?img-name=fib1.jpeg)

[https://web.com/tst?tst-name=fib2.tst](https://web.com/tst?tst-name=fib2.tst)

[https://web.com/tst?tst-name=fib1.tst](https://web.com/tst?tst-name=fib1.tst)

希望这可以帮助！

[1] [https://cloud.google.com/appengine/docs/standard/go/config/appref#handlers_element](https://cloud.google.com/appengine/docs/standard/go/config/appref#handlers_element)

# php - Drupal 7 从表中的数据自动更新还是？

> ID：12609460
> 
> 赞同：0
> 
> 时间：2012-09-26T20:00:57.403
> 
> 标签：php, drupal-modules

我正在学习使用 Drupal 7 制作网站，一切都很好并且符合我的喜好。
我有一个用 Perl 编写的脚本，可以从网站上抓取新闻。

**现在我希望 Drupal（如果可能的话运行脚本，否则我可以使用服务器玉米作业）通过从每个抓取的新闻中制作页面或文章来更新网站的首页。**

我总是可以将 perl 中的数据添加到 db、xml、csv 或 JSON 文件中。这只是需要自动化。请指导我找到可能的解决方案，例如，如果我需要在 PHP 中编写脚本，我应该在哪里以及如何将它包含在 Drupal 中，或者是否有任何您认为有帮助的模块（有很多模块可供搜索，但在右侧查找我缺乏的方向）。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:03:38.180

您可以使用[feed 模块](http://drupal.org/project/feeds)从 csv 文件导入节点。您可以将要抓取的数据放入 csv 中，并以设定的时间间隔自动运行导入。

# django - Mac OS X 上的 Django 需要安装 MySQLdb

> ID：12609462
> 
> 赞同：-1
> 
> 时间：2012-09-26T20:01:10.230
> 
> 标签：django, mysql-python

我尝试将 Django 设置为使用 MySQL 数据库，但由于后端不可用而导致阻塞。在网上阅读我发现需要安装 MySQLdb，也许还需要安装 _mysql。我很惊讶有这么多不同的指令集可用，它们在安装过程中似乎都做了不同的事情。还有大量关于安装 MySQLdb 的问题的帖子，以及关于安装是 PIA 的频繁评论。这让我停下来，因为我想我可能做出的任意选择可能会导致随机且难以追踪错误。

对于最可靠的安装方法是否有共识？

我不介意配置问题。我只是希望不要造成原始问题。作为一般的咆哮，由于 MySQL 在 DBMS 中如此普遍，为什么后端尚未安装在 Django 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:00:16.357

我使用[Homebrew](http://mxcl.github.com/homebrew/)来安装 MySQL 之类的东西。这很简单：

1.  安装自制软件：

    ```
    ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)" 
    ```

2.  使用 Homebrew 安装 MySQL：

    ```
    brew install mysql 
    ```

3.  使用您喜欢的 Python 安装机制安装[MySQL Python 模块](http://pypi.python.org/pypi/MySQL-python/1.2.4b1)（我更喜欢使用 Pip）：

    ```
    pip install MySQL-python 
    ```

> 作为一般的咆哮，由于 MySQL 在 DBMS 中如此普遍，为什么后端尚未安装在 Django 中？

您可以在 Django 中使用其他数据库后端（例如 SQLite 或 PostgreSQL），并且 MySQL 连接器本身是一个安装在 Django 之外的模块（并且可能被其他软件使用——很多情况下它可能已经安装）。

# c# - 由于 mt.exe 生成后事件而抑制 GUID 警告

> ID：12609464
> 
> 赞同：5
> 
> 时间：2012-09-26T20:01:17.213
> 
> 标签：c#, visual-studio, guid, suppress-warnings, post-build-event

在一个大型的、预先存在的代码库中，我有几个 *.dll 需要向 COM 互操作注册。

这些清单注册正在使用 mt.exe 以下列方式作为构建后事件执行：

```
mt.exe -manifest "$(ProjectDir)myProjectManifestFragment.xml" -nodependency -managedassemblyname:"$(TargetFileName)" -out:"$(TargetName).manifest" -outputresource:"$(TargetFileName)";#2 
```

在这种情况下，不需要显式 GUID，但是，mt.exe 自然会生成以下性质的混乱警告：

```
mt.exe : genman warning G81010014: Explicit guid not defined for type myInternalType 
```

我的问题是：如何在不明确定义 GUID 的情况下抑制这些警告？

请注意，我不想接受构建后事件并重定向输出（a la > NUL），因为我仍然希望接收错误通知。有一种方法可以只抑制 mt.exe 中的标准错误，但我只想抑制这个警告。我什至会很高兴抑制 mt.exe 生成的所有警告（不一定是 G81010014）。

MSDN 上的 mt.exe 文档似乎只显示了一个详细标志，但无法将详细级别更改为“简洁”模式，在这种模式下警告将被抑制。在 Visual Studio 2010 中，显然有一种方式可以抑制特定警告，但我无法确定这如何适用于特定的构建后事件，更不用说仅由 mt.exe 生成的警告了。

先感谢您！这实际上是我在 Stack Overflow 上的第一篇文章 :) 如果我需要更具体、更广泛等，请告诉我... ^_^

干杯!

-卡达伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-21T22:25:20.347

我有同样的问题（VS 2010）。重定向到 NUL 是我能想到的。

您总是可以执行多命令行或批处理文件并测试错误：

```
MT.EXE  etc...
if NOT %ERRORLEVEL%==0 ... 
```

# java - 如何从 Android 中的 JSON 解析多个值？

> ID：12609467
> 
> 赞同：-3
> 
> 时间：2012-09-26T20:01:27.917
> 
> 标签：java, android, json

我第一次尝试解析 JSON。在我的 JSON 数据中，单个 JSON 数组中有多个 JSON 对象。数据样本：

> { "root":[ {"Sc_we":[ ]}, {"Sc_wesam":[ {"head":"欢迎页面"}, {"color":"Black"} ]} ] }

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        website = new URL(
                    "http://xxxxxxx");
        InputStream in = website.openStream();
        parseMovie(in);
    }
    catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

protected void parseMovie(InputStream json) throws IOException,
JSONException {
    // TODO Auto-generated method stub

    BufferedReader reader = new BufferedReader(new InputStreamReader(json));
    StringBuilder sb = new StringBuilder();
    String line = reader.readLine();
    while (line != null) {
        sb.append(line);
        line = reader.readLine();
    }
    reader.close();
    System.out.println(sb);
    JSONObject jobj = new JSONObject(sb.toString());
    System.out.println("jsonobj:" + jobj);

    JSONArray array = jobj.getJSONArray("root");

    System.out
        .println("jsonobject   :+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
                + array);
} 
```

我得到了上面的 JSON 数据，但我需要`S_we`值和`Sc_wesam`数据。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:17:13.083

您可以使用 迭代单个元素`JSONArray`，并对您的数据做出一些假设：

```
JSONArray array = jobj.getJSONArray("root");
JSONObject subObj;
JSONArray subArray;

for (int i = 0; i < array.length(); i++)
{
    subObj = array.getJSONObject(i);

    if (subObj.has("Sc_wesam")) // handle Se_wesam
    {
        subArray = subObj.getJSONArray("Sc_wesam");

        for (int j = 0; j < subArray.length(); j++)
        {
            subObj = subArray.getJSONObject(j);
            if (subObj.has("head"))
                System.out.println("Sc_wesam head value: " +
                                   subObj.getString("head"));
            else if (subObj.has("color"))
                System.out.println("Sc_wesam color value: " +
                                   subObj.getString("color"));
        }
    }
    else if (subObj.has("Sc_we")) // handle Se_we
    {
        subArray = subObj.getJSONArray("Sc_wesam");

        // ... etc.
    }
} 
```

# .net - Installing .NET 4.0 on Windows Server 2003 SP2

> ID：12609471
> 
> 赞同：2
> 
> 时间：2012-09-26T20:01:57.853
> 
> 标签：.net, .net-4.0, windows-xp, installation

I live in the world of Dark Matter developers where we still have to support mission-critical applications running on Windows Server 2003, SP2, 32 bit. At least I have the ability to upgrade to .net 4.0 on this machine. However, when I run the .net 4.0 full installer, I get the error:

```
Final Result: Installation failed with error code: (0x800B0100), "No signature was present in the subject." 
```

Does anyone know how to get this to work? I have done it on a similar machine, but that was about a year ago.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T23:28:21.137

Ok, I got it. I had a bad installer, a lightweight one that needed to download components. When I got the right full package, and ran as Admin, then it installed just fine. The machine I was on did not allow downloads from Microsoft.

Here's the package I used:

[http://www.microsoft.com/en-us/download/details.aspx?id=17718](http://www.microsoft.com/en-us/download/details.aspx?id=17718)

# php - 为什么要扩展一个类，而不是仅仅向原始类添加一个新方法？

> ID：12609476
> 
> 赞同：3
> 
> 时间：2012-09-26T20:02:11.817
> 
> 标签：php, oop, methods, extend

当谈到 OOP 的课程时，我终于有了我的啊哈时刻。我一直在努力思考这个想法。现在我开始明白了，我想知道扩展一个类的目的是什么。将另一个方法添加到类中会不会更简单，还是我只是错过了重点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:07:02.767

如果要向类添加功能，请添加方法。但是，在某些情况下，您想要添加功能，但无法在基类中执行此操作。

最好的例子是展示。当向类添加方法`Radius`时，只有当类是 a 时才有意义`Circle`，a`Rect`没有半径。向基类添加方法`Radius`也没有任何意义，因为`Rect`该类也获得了方法`Radius`。

例子：

```
abstract class Shape
{
  abstract public function Draw();
}

class Rect extends Shape
{
  public function Draw()
  {
  }
}

class Circle extends Shape
{
  public function Draw()
  {
  }

  public function Radius()
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:09:09.410

有时原始类是您无法更改的库的一部分。

有时您想以多种不同的方式扩展超类。

例如（java 语法而不是 PHP，但想法是一样的）：

```
class Shape {
  abstract double getArea();
}

class Square extends Shape {
  double getArea() {
    return size * size;
  }
}

class Circle extends Shape {
  double getArea() {
    return radius * radius * Math.PI;
  }
} 
```

对于接受 Shape 类型参数的方法，您可以传入 Squares 和 Circles。该方法不需要知道它得到哪一个，但仍然可以调用 getArea()。如果您只是将该方法添加到 Shape 类，这将不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T20:38:30.370

这将是一个简化，但给你一个现实生活中的例子：

假设您要创建一个内容管理系统，即根据用户输入在您的网站上显示不同页面的脚本。

您可能希望每个页面（我们称它们为模块）具有特定功能，例如在该页面/模块上执行的允许命令。然后，这些不同的命令可以是每个模块类中的不同方法。

但是，如果您允许登录命令，无论用户当前在您网站的哪个位置，会怎样？即，这将是所有模块之间共享的命令。

然后，您的解决方案可以通过拥有一个父模块类来解决，登录方法将驻留在其中，并且可由所有模块执行。

```
// Your parent class
abstract class ParentModule 
{
   protected function login()
   {
      // Login stuff
   }
}

// One of your modules
final class ArticleModule extends ParentModule
{
    public function submit_article()
    {
        // An example function
    }
}

// Another one of your modules that the user could still login from
final class AnotherModule extends ParentModule
{
    public function another_command()
    {
        // Magic
    }
} 
```

然后，您的控制器可能如下所示。

```
$module = new ArticleModule();
$module->login();
$module->submit_article(); 
```

最后，当你开始研究接口时——我花了很长时间才理解这些——你将再次看到抽象类的好处。事实上，如果你完全掌握了抽象类的概念，你会更容易理解接口。

# c - 在路径中找不到程序 g++

> ID：12609482
> 
> 赞同：5
> 
> 时间：2012-09-26T20:02:36.900
> 
> 标签：c, eclipse, g++

我正在将 Eclipse 用于 C 项目。我通过转到 New->C project->Executable->Empty Project, Linux gcc toolchain 创建了一个新项目。

当我添加一个新的 .c 文件时，我得到“在路径中找不到程序 'g++'”。我该如何摆脱这个？我什至没有使用 C++。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-04T23:48:23.170

我有类似的问题，它是由

1.  使用 ubuntu 软件中心安装 g++ GNU C++ 编译器和

2.  换人——

Window -> Preferences -> C/C++ -> Build -> Settings -> Discovery -> CDT GCC Build in Complier Settings [共享]

```
From: ${COMMAND} -E -P -v -dD "${INPUTS}"
To  : /usr/bin/${COMMAND} -E -P -v -dD "${INPUTS}" 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T23:49:11.630

对于后代，我将发布我自己的解决方案来解决这个问题。上面或相关 StackOverflow 问题的答案都没有帮助；大多数提到的菜单项不存在，而我可以尝试的菜单项什么也没做。我也搜索了其他网站；大约有 6 个不同的答案重复了很多次，但没有任何帮助。

简短的回答：**我吹走了 Eclipse 安装并替换了它**。然后它起作用了。至少对我来说，这不是一个项目或配置选项（至少不是我可以从 GUI 获得的选项）；Eclipse 程序文件夹中的某些内容已经过调整，只有新安装才能修复该问题。

我正在使用 Eclipse 的“ADT”（Android 开发人员工具）构建进行 Android 开发。我对配置做了一些事情，使它开始出现上述错误（实际上是两个错误，对于 gcc 和 g++ 都是）。我尝试了很多潜在的解决方案（除了我自己寻找可能有帮助的选项），但都没有成功。

问题是，我在路径中不需要 gcc 或 g++。我正在做 Android 开发，虽然两者都在构建过程中使用，但我没有使用 Eclipse 来进行构建；我使用 Android 构建系统。C/C++ Build/Discovery 选项甚至没有给我设置 gcc 或 g++ 路径的选项。我在其他地方找到的其他答案引用了不存在的菜单条目，大多数似乎是关于帮助人们在 Eclipse 中使用正常的 C/C++ 构建，而我不需要这样做。

所以我利用这个机会从 Google 下载了最新的 ADT 包，然后我运行了新的包，将现有项目导入新的工作区（以防旧工作区损坏或问题的一部分）。不再有烦人的 gcc/g++ 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T15:44:49.187

我能够通过选择解决问题

项目（在项目资源管理器中右键单击）-> 属性-> 工具链编辑器

并切换 Current Toolchain: to Android GCC 和 Current Buolder: to Android Builder

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:51:39.503

我在使用[“Eclipse IDE for C/C++ Developers”时遇到了同样的错误。](http://www.eclipse.org/downloads/)

从 Ubuntu 软件中心安装 Eclipse，然后下载并安装[Eclipse CDT](http://www.eclipse.org/cdt/)。

要安装 CDT，请打开 Eclipse -> Help -> Install New Software -> Add -> Archieve... 然后将 CDT 路径指定到那里。就这样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-25T12:29:28.440

我也有同样的问题。我在运行我的程序时没有出现此错误，但在添加后，包括不同的 Api 和 paths ，可能无意中在我的 Path 中发生了一些我无法修复的更改。我可以通过转到属性来修复这个错误，然后恢复所有选项卡的默认值。

# sql-server-2008 - sql server 获取多级数据

> ID：12609483
> 
> 赞同：0
> 
> 时间：2012-09-26T20:02:41.940
> 
> 标签：sql-server-2008

如何使用 SQL Server 实现以下目标？我正在尝试在 Sitefinity 中获取页数。

表结构有很多列，但下面是重要的列

```
**Id**                  **parentid**                **title**
 ABC                        DEF                     title1
 XYZ                        DEF                     title2
 LLL                        DEF                     title3
 PPP                        ABC                     title4
 III                        ABC                     title5
 WWW                        PPP                     title6 
```

一个页面可以有子页面，一个子页面可以有更多的子页面。在数据库中，子页面用 ID 列表示，父页面用 parentID 表示。我怎样才能得到每个父母的孩子人数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:17:22.583

如果我理解正确，这样的事情应该让你开始：

```
select id as parent,
       title as title,
       count(*) as number_children
  from table as parent
 inner join table as children
    on children.parentid = parent.id
 group by 1,2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:56:14.983

我从另一个线程得到了答案：[SQL Server 2005 中的分层查询](https://stackoverflow.com/questions/235515/hierarchical-queries-in-sql-server-2005)。

```
 WITH Parent AS
(
    SELECT
        ID,
        ParentID,
        Name AS Path
    FROM
        tblHierarchy
    WHERE
        ParentID IS NULL

    UNION ALL

    SELECT
        TH.ID,
        TH.ParentID,
        CONVERT(varchar(128), Parent.Path + '/' + TH.Name) AS Path
    FROM
        tblHierarchy TH
    INNER JOIN
        Parent
    ON
        Parent.ID = TH.ParentID
)
SELECT * FROM Parent 
```

# javascript - jQuery 淡化单独的 DIV 内容，但仅在当前 DIV 中

> ID：12609485
> 
> 赞同：1
> 
> 时间：2012-09-26T20:02:50.400
> 
> 标签：javascript, jquery, css

我有这样的设置...

```
<div class="racebox">
<div class="rb_logo"><a href="#" class="trigger"><img src="<?php bloginfo( 'url' ); ?>/img      /new/rlogo_chm.png" width="250" height="184" /></a></div>
<div class="panel rb_bg"><img src="<?php bloginfo( 'url' ); ?>/img/new/bg_racebox.png" width="250" height="184" /></div>
</div> 
```

我正在使用它来更改 Racebox 容器内第二个 div 的不透明度：

```
$(document).ready(function() {
    // OPACITY OF DIV SET TO 0%
    $(".panel").css("opacity","0.0");

    // ON MOUSE OVER
    $(".trigger").hover(function () {

    // SET OPACITY TO 100%
    $(".panel").stop().animate({
        opacity: 1.0
    }, "slow");
},function(){});

// ON MOUSE OUT
$(".trigger").mouseout(function () {
    // SET OPACITY BACK TO 0%
    $(".panel").stop().animate({
        opacity: 0.0
    }, "slow");
});
}); 
```

这很好用，但我想拥有这个“racebox”容器的多个实例，而且我很确定这个脚本会淡化所有目标 div 而不是仅当前一个。关于如何设置它的任何建议，以便它只淡化当前容器内的 div？

对 jQuery 来说相当新，如果我遗漏了一些超级基本的东西，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:07:36.820

使用它来遍历相对于当前目标的dom

```
$(document).ready(function() {
    // OPACITY OF DIV SET TO 0%
    $(".panel").css("opacity", "0.0");

    // ON MOUSE OVER
    $(".trigger").hover(function() {

        // SET OPACITY TO 100%
        // current hovered .trigger - get parent - find sibling with .panel class
        $(this).parent().siblings(".panel").stop().animate({
            opacity: 1.0
        }, "slow");
    }, function() {});

    // ON MOUSE OUT
    $(".trigger").mouseout(function() {
        // SET OPACITY BACK TO 0%
        $(this).parent().siblings(".panel").stop().animate({
            opacity: 0.0
        }, "slow");
    });
});​ 
```

或在您的选择器中传递上下文

```
$(".panel",$(this).closest('.racebox')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:07:50.843

将代码更改为以下

```
 $(document).ready(function() {
    // OPACITY OF DIV SET TO 0%
    $(".panel").css("opacity","0.0");

    // ON MOUSE OVER
    $(".trigger").hover(function () {

    // SET OPACITY TO 100%
    this.parent().next().stop().animate({
        opacity: 1.0
    }, "slow");
},function(){});

// ON MOUSE OUT
$(".trigger").mouseout(function () {
    // SET OPACITY BACK TO 0%
    this.parent().next().stop().animate({
        opacity: 0.0
    }, "slow");
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:08:13.427

如果是这种情况，请使用 $(this) 而不是 .panel

```
// ON MOUSE OVER
    $(".trigger").hover(function () {

    // SET OPACITY TO 100%
    $(this).parent().find('.panel').stop().animate({
        opacity: 1.0
    }, "slow");
},function(){});

// ON MOUSE OUT
$(".trigger").mouseout(function () {
    // SET OPACITY BACK TO 0%
    $(this).parent().find('.panel').stop().animate({
        opacity: 0.0
    }, "slow");
}); 
```

# wpf - 如何使用停靠面板和绑定将图标添加到 wpf 树视图？

> ID：12609486
> 
> 赞同：0
> 
> 时间：2012-09-26T20:02:53.407
> 
> 标签：wpf, binding, treeview, icons, dockpanel

我在停靠面板中有一个树视图，树视图的所有元素都在 HierarchicalDataTemplates 中。这是代码：

```
<DockPanel Margin="10,10,0,0" VerticalAlignment="Stretch" Grid.Row="0" Grid.RowSpan="5" Grid.Column="0">
        <DockPanel.Resources>

            <src:TreeViewFilter x:Key="MyList" />

            <HierarchicalDataTemplate DataType="{x:Type src:TreeViewParent}" ItemsSource="{Binding Path=OrderAttributes}">
                <TextBlock Text="{Binding Path=Name}" FontSize="24"/>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate DataType="{x:Type src:OrderAttribute}" ItemsSource="{Binding Path=OrderAttributes}">
                <TextBlock Text="{Binding Path=NameAndCount}" FontSize="16"/>
            </HierarchicalDataTemplate>

        </DockPanel.Resources>
        <TreeView Name="treeView1" BorderThickness="2" ItemsSource="{Binding Source={StaticResource MyList}, UpdateSourceTrigger=PropertyChanged}" TreeViewItem.Selected="treeViewFilter"/>
    </DockPanel> 
```

如您所见，DockPanel 环绕在 TreeView 周围。我要添加的图标将位于第二个 HierarchicalDataTemplate 中，它绑定到字符串并显示为文本框。根据“NameAndCount”的名称，我会选择一个图标显示在左侧。

关于我的示例的解决方案有什么想法吗？或者我是否需要考虑使用不同的模板，如 StackPanel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:50:27.200

在任意位置添加 Image-Control，将其 Source 绑定到“NameAndCount”并使用 IValueConverter 将其转换为图像路径。

# oracle - Oracle比较时间戳和日期

> ID：12609487
> 
> 赞同：36
> 
> 时间：2012-09-26T20:02:54.343
> 
> 标签：oracle

我有一个时间戳字段，我只想在 Oracle 的查询中比较它的日期部分

我怎么做，

```
SELECT *
FROM Table1
WHERE date(field1) = '2012-01-01' 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-26T20:06:40.927

您可以[截断](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions201.htm)日期部分：

```
select * from table1 where trunc(field1) = to_date('2012-01-01', 'YYYY-MM-DD') 
```

这种方法的问题在于，`field1`由于函数调用，不会使用任何索引。

或者（并且对索引更友好）

```
select * from table1 
 where field1 >= to_timestamp('2012-01-01', 'YYYY-MM-DD') 
   and field1 < to_timestamp('2012-01-02', 'YYYY-MM-DD') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T20:14:46.610

您可以截断日期

```
SELECT *
FROM Table1
WHERE trunc(field1) = to_Date('2012-01-01','YYY-MM-DD') 
```

查看[SQL Fiddle](http://sqlfiddle.com/#!4/25ee2/4)以获得更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T06:19:07.327

`to_date`格式对我有用。请考虑日期格式： `MON-`, `MM`, `.`, `-`.

```
t.start_date >= to_date('14.11.2016 04:01:39', 'DD.MM.YYYY HH24:MI:SS')
t.start_date <=to_date('14.11.2016 04:10:07', 'DD.MM.YYYY HH24:MI:SS') 
```

# python - Windows 7：文件夹大小限制 - 多文件夹符号链接

> ID：12609488
> 
> 赞同：1
> 
> 时间：2012-09-26T20:03:02.363
> 
> 标签：python, windows, filesystems, symlink, directory

有点奇怪的问题，一种二合一的诚实；目前希望在 Windows 7 中执行此操作。我有文件夹 A 和文件夹 B，它们都有不同的文件。我想做的第一件事是设置一个限制，以便每个文件夹中不能保存超过 5GB 的文件。

其次，在某种意义上，我想做的是将两个文件夹“符号链接”到文件夹 C。这样文件夹 A 和 B 中的所有文件内容都将显示在文件夹 C 中。

我在 Python 中工作得最好，但愿意优化任何语言来完成这样的事情。我正在寻找有关处理此类事情的最佳方法的意见。任何帮助或建议表示赞赏。谢谢！

# mysql - 规范化和唯一 ID

> ID：12609491
> 
> 赞同：1
> 
> 时间：2012-09-26T20:03:13.167
> 
> 标签：mysql, database, database-design, normalization

我有一张名为`videos`. 其中包含三列：`media_id`、`project_id`和`video_url`。我的问题是，我有必要拥有`media_id`吗？我没有在任何其他表中使用它。我希望会有多个`project_id`s 具有相同的数字但不同`video_url`的 s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T21:28:51.913

是否拥有某事物的代理 ID 与规范化无关。

（版权鸣叫）

是否拥有某事物的代理 ID 取决于您是否对它有用。你自己已经给出了答案。这取决于是否有很大的可能性，即使它现在没有实际用途，这种用途也可能在不久的将来迅速出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:10:57.310

您可以在模型中使用 project_id 和 video_url 作为函数依赖键，但在物理级别上，我不想使用 URL 作为键的一部分。

我的意思是我更喜欢 ID 或数字，以避免每次在不同的表中引用键时都输入长字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T21:05:03.523

我认为这是必要的。这纯粹是基于这样一个事实，即媒体条目是唯一的，并且任何一个项目都可能有多个媒体条目。这为行保留了唯一的 id、适当的项目关系和媒体资源的有价值的 URL 数据。

# python - 用于*不*创建网站的 Web 框架？

> ID：12609494
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:16.827
> 
> 标签：python, web-frameworks

> **可能重复：**
> [为本地 Web 应用程序推荐的 python 库/框架？](https://stackoverflow.com/questions/4543604/recommended-python-library-framework-for-local-web-app)

我正在寻找一个轻量级的框架/网络服务器，它可以很容易地为一些恶魔进程或一些理想情况下应该是桌面应用程序的应用程序开发 Web 界面。

一些例子

*   要组织照片/音乐收藏，在文件夹之间移动，编辑这些的元数据等，
*   一个简单的待办事项清单/资金管理器/文件管理器等，
*   日志/文本文件查看器
*   显示我的 git 存储库状态的页面

我更喜欢服务器端是 python。我不想运行像 apache 这样的完整网络服务器。由于这将类似于桌面应用程序使用，我不需要任何安全功能来阻止我访问文件系统或运行任何 shell 命令或访问互联网等，

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:07:58.053

[Werkzeug](http://werkzeug.pocoo.org/)是一个不错的选择。它是一个 Web 工具包，而不是一个 Web 框架。它非常成熟，是流行的微框架[Flask的基础。](http://flask.pocoo.org/)

我使用 vanilla Werkzeug 开发了一个网站，它非常直观。它有一种明确的感觉。没有 RoR 风格的自动加载控制器和文件夹逻辑，只有一堆文档齐全且有用的类和模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:05:33.360

检查[瓶子.py](http://bottlepy.org/docs/dev/)

大多数框架都有内置的开发服务器，所以你仍然可以使用 django 或其他一些。但是如果你正在寻找一些轻量级的东西来做一些快速的项目，bottle.py 会很棒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:06:39.133

以及cherry.py 是一个具有完整服务器的轻量级框架。 [http://www.cherrypy.org/](http://www.cherrypy.org/)

> ```
> CherryPy allows developers to build web applications in much 
> the same way they would build any other object-oriented Python 
> program. This results in smaller source code developed in less time. 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T21:03:55.827

在任何兼容 wsgi 的 Python 轻量级 Web 服务器上运行的任何 Python Web 微框架都可以。这里已经有两个问题了。

# javascript - 用多个输入字段填充数组

> ID：12609497
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:20.803
> 
> 标签：javascript, jquery, arrays

我想使用 jQuery 来填充一个数组，其中包含来自输​​入字段的值，该类为“seourl”...

```
<input id="title" class="seourl" name="title" type="text" value="???">
<input id="subtitle" class="seourl" name="title" type="text" value="???">
<input id="subtitle2" class="seourl" name="title" type="text" value="???">

<a id="getFriendlyUrl" href="">get url friendly</a> 
```

如何使用“seourl”类的输入字段填充数组？

```
$("#getFriendlyUrl").click(function() {

    var arr_str = new Array();

    ?????? POPULATE ARRAY with input fields of class 'seourl', how ??????????????

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T20:04:35.810

```
$("#getFriendlyUrl").click(function() {

    var arr_str = $('.seourl').map(function() {
                                       return this.value;
                                   }).toArray();
}); 
```

如果需要，您可以使用 jQuery 来获取`.value`。

```
return $(this).val(); 
```

无论哪种方式，您最终都会得到一个值数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:05:49.857

```
$('.seourl').each(function(ele){
    arr_str.push($(ele).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:06:09.420

```
$("#getFriendlyUrl").click(function() {
    var arr_str = new Array();

    $('.seourl').each(function() {

        arr_str.push( $(this).val() );
    })'

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:08:44.183

html:

```
<input id="title" class="seourl" name="title" type="text" value="???">
<input id="subtitle" class="seourl" name="title" type="text" value="???">
<input id="subtitle2" class="seourl" name="title" type="text" value="???">

<a id="getFriendlyUrl" href="">get url friendly</a>​ 
```

带有 jquery 的 JS：

```
$("#getFriendlyUrl").click(function() {

    var arr_str = new Array();

    $(".seourl").each(function(index, el) {
     arr_str[index] = $(el).val();   
    });
    alert(arr_str[0] + arr_str[1] + arr_str[2]);

});​ 
```

jsfiddle：http: [//jsfiddle.net/Mutmatt/NmS7Y/5/](http://jsfiddle.net/Mutmatt/NmS7Y/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:09:40.487

```
$("#getFriendlyUrl").click(function() {

    var arr_str = new Array();
    $('.seourl').each(function() {
        arr_str.push($(this).attr('value'));

    });
    alert(arr_str);
}); 
```

# android - 缩放动画不影响布局

> ID：12609498
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:23.780
> 
> 标签：android, android-layout, android-animation

我有这样定义的 top_sliding_out 动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator" >

    <alpha
        android:duration="300"
        android:fromAlpha="1"
        android:toAlpha="0" />

    <scale
        android:duration="300"
        android:fromXScale="1"
        android:fromYScale="1"
        android:pivotX="50%"
        android:pivotY="0%"
        android:toXScale="1"
        android:toYScale="0" />
</set> 
```

代码触发动画：

```
public void onCheckedChanged(final CompoundButton buttonView, boolean isChecked)
{
    Animation anim = AnimationUtils.loadAnimation(this.getActivity(), R.anim.top_slide_out);
    anim.setFillAfter(true);
    ((View)buttonView.getParent()).startAnimation(anim);
    final Handler handler = new Handler();
    handler.postDelayed(new Runnable()
    {
        public void run()
        {
            getListView().requestLayout();
        }
    }, anim.getDuration());
} 
```

我执行此动画以在列表中隐藏我的自定义行。但问题是布局并没有改变它的大小，所以它留下了空洞。

动画前：

![在此处输入图像描述](../Images/1442b9516c7fc5285112f7527d1141d5.png)

动画后：

![在此处输入图像描述](../Images/0f0af4e2c9b6b83358910c44aa538547.png)

我能做些什么呢？动画正在进行时如何更改布局？

# java - 上传带有元数据、Azure JAVA API 的文件

> ID：12609499
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:25.857
> 
> 标签：java, azure, metadata

我正在尝试将某个文件上传`METADATA`到 azure blob 容器。

当我使用 .net SDK 执行此操作时，它会按原样发送`put`所有`metadata`内容。

但是，如果我尝试使用 Java，它会发送 3`puts`并且在`metadata`我发出命令之前不会反映`cBlockBlob.uploadProperties()`，直到 3rd `put`。

为什么会通过 3 `puts`？这是JAVA sdk中的问题吗？

**这是第一把**

```
*PUT /mycontainer/0721ef8f-8d70-4b91-9d1f-04757363f903.xml?blockid=AAAAAEm%2FC%2FE%3D& comp=block&sr=c&timeout=4&si=WriteOnly& sig=eUe%2Fe7kcFcmiIzOVNgqbXd%2BjlIN3ZQd8fkQq3IsHQVQ%3D HTTP/1.1
x-ms-version: 2011-08-18
User-Agent: WA-Storage/Client v0.1.1
Content-Type: 
Host: certainhost.blob.core.windows.net
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive
Content-Length: 4613* 
```

**这是第二次放**

```
*PUT /mycontainer/0721ef8f-8d70-4b91-9d1f-04757363f903.xml?comp=blocklist&sr=c&timeout=4&si=WriteOnly&sig=eUe%2Fe7kcFcmiIzOVNgqbXd%2BjlIN3ZQd8fkQq3IsHQVQ%3D HTTP/1.1
x-ms-version: 2011-08-18  
User-Agent: WA-Storage/Client v0.1.1
Content-Type: 
Content-MD5: hYRJFeM5RFH29bPj3oxhwA==
Host: certainhost.blob.core.windows.net
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive
Content-Length: 100*

<?xml version='1.0' encoding='UTF-8'?><BlockList><Uncommitted>AAAAAEm/C/E=</Uncommitted></BlockList> 
```

**这是第 3 个 put（显示 required 的那个`metadata`）**

```
*PUT /mycontainer/0721ef8f-8d70-4b91-9d1f-04757363f903.xml?comp=properties&sr=c&timeout=4&si=WriteOnly&sig=eUe%2Fe7kcFcmiIzOVNgqbXd%2BjlIN3ZQd8fkQq3IsHQVQ%3D HTTP/1.1
x-ms-version: 2011-08-18
User-Agent: WA-Storage/Client v0.1.1
Content-Type: 
x-ms-blob-content-encoding: utf-8
x-ms-meta-x-ms-meta-versionCFDI: 3.2
Host: certainhost.blob.core.windows.net
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive
Content-Length: 0* 
```

**这是.net SDK中唯一的**

```
*PUT /mycontainer/0721ef8f-8d70-4b91-9d1f-04757363f903.xml?comp=properties&sr=c&timeout=4&si=WriteOnly&sig=eUe%2Fe7kcFcmiIzOVNgqbXd%2BjlIN3ZQd8fkQq3IsHQVQ%3D HTTP/1.1
x-ms-version: 2009-09-19
User-Agent: WA-Storage/6.0.6002.18312
x-ms-blob-type: BlockBlob
x-ms-meta-versionCFDI: 3.2
Host: certainhost.blob.core.windows.net
Content-Length: 6841
Connection: Keep-Alive* 
```

**其他的，这是什么意思？**

```
<?xml version='1.0' encoding='UTF-8'?><BlockList><Uncommitted>AAAAAEm//E=</Uncommitted></BlockList> 
```

它在第二次放置中发​​送，.net 不会显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:40:32.680

我相信正在发生的事情是 JAVA SDK 正在将您的文件分成块并上传这些块。第一个 PUT 请求是“PUT Block”请求，第二个是“Commit Block List”请求，第三个是“Set Metadata”请求。根据 REST API 文档，您也可以在“提交阻止列表”操作期间设置 blob 的元数据 (http://msdn.microsoft.com/en-us/library/windowsazure/dd179467.aspx)。.Net SDK 仅在一个请求中上传此文件，而 Java SDK 将文件拆分为块并上传，这似乎很奇怪。如果这是在 Java SDK 中实现的方式，我不会感到惊讶。您尝试上传的文件的大小是多少？

关于您的第二个问题，这是“提交阻止列表”操作的有效负载。

# c# - 从另一个类中的方法返回一个变量

> ID：12609501
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:31.597
> 
> 标签：c#

我是 C# 的新手，并试图弄清楚为什么下面的代码不起作用。我尝试制作一个非静态的自定义类 HtmlRequest，因此可以根据需要使用`HtmlRequest someVar = new HtmlRequest();`

return sb 持有该值，但它没有被返回到`hmtmlString`线上`htmlString = htmlReq.getHtml(uri)`。

我尝试在公共类 HtmlRequest 之后放置 Get{code ...return sb;} 但无法获得正确的语法

```
 public partial class MainWindow : DXWindow
    {

            private void GetLinks()
            {
                HtmlRequest htmlReq = new HtmlRequest();
                Uri uri = new Uri("http://stackoverflow.com/");
                StringBuilder htmlString = new StringBuilder();
                htmlString = htmlReq.getHtml(uri); //nothing returned on htmlString

            }

    }

    public class HtmlRequest
    {

        public StringBuilder getHtml(Uri uri)
        {
                // used to build entire input
                StringBuilder sb = new StringBuilder();

                // used on each read operation
                byte[] buf = new byte[8192];

                // prepare the web page we will be asking for
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);

                // execute the request
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();

                // we will read data via the response stream
                Stream resStream = response.GetResponseStream();

                string tempString = null;
                int count = 0;

                Do
                {
                    // fill the buffer with data
                    count = resStream.Read(buf, 0, buf.Length);

                    // make sure we read some data
                    if (count != 0)
                    {
                        // translate from bytes to ASCII text
                        tempString = Encoding.ASCII.GetString(buf, 0, count);

                        // continue building the string
                        sb.Append(tempString);
                    }
                }
                while (count > 0); // any more data to read?

                return sb;

        }

    } 
```

如果我在上面设置断点，`return sb;`那么变量是正确的，但没有返回它。这可能是非常明显的事情，有人可以解释为什么它不起作用以及如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:14:23.953

不需要这个：

```
StringBuilder htmlString = new StringBuilder();
htmlString = htmlReq.getHtml(uri); 
```

说一句就够了：

```
StringBuilder htmlString = htmlReq.getHtml(uri); 
```

你不必定义任何东西。没有什么意思是“空”，“垃圾”，什么？htmlString 是它以前的对象吗？或者函数根本不返回？它是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:21:18.067

尝试使用该值而不是立即退出该方法。如果不使用，优化的构建将不会保存返回值。

# javascript - 我的 Firefox 浏览器测试有什么问题？

> ID：12609502
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:36.247
> 
> 标签：javascript

我想测试用户是否在 3.0 版下使用 Firefox，如果是则触发该功能，这就是我最终得到的结果！现在我用火狐14.0版本测试了一下，还是触发了这个功能！任何人都可以帮助初学者？谢谢！

脚本：

```
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Firefox/x.x or Firefox x.x (ignoring remaining digits);
var ffversion= Number(RegExp.$1) // capture x.x portion and store as a number
if (ffversion<=3)
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:09:30.250

这里：

```
var result = /Firefox[\/\s](\d+\.\d+)/.exec( navigator.userAgent );

if ( result && +result[1] <= 3 ) {
    // do your thing 
} 
```

请注意，功能测试将是一个更好的解决方案：

```
if ( browser_doesnt_implement_this_feature ) {
    implementIt();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:19:01.957

你可以在一个正则表达式测试中做到这一点：

```
if(/Firefox[\/\s]([0-2]\.|3\.0)/g.test(navigator.userAgent)){
  // do old FF stuff
} 
```

# javascript - 将 textarea 内容转换为 html

> ID：12609503
> 
> 赞同：1
> 
> 时间：2012-09-26T20:03:36.807
> 
> 标签：javascript

我需要制作一个简单的 Javascript 转换器，它将`<textarea>`输入转换为 html 格式的列表。

这是示例输入的外观：

```
Brand: Brand1
  Model1 /Model2 /Model3 /Model4 /Model5 /Model6 /
Brand: Brand2
  Model1 /Model2 /Model3 /Model4 /Model5 /Model6 / 
```

这将是转换后的 html：

```
<h3>Brand1</h3>
<ul>
  <li>Model1</li>
  <li>Model2</li>
  <li>Model3</li>
  <li>Model4</li>
  <li>Model5</li>
  <li>Model6</li>
</ul>
<h3>Brand2</h3>
<ul>
  <li>Model1</li>
  <li>Model2</li>
  <li>Model3</li>
  <li>Model4</li>
  <li>Model5</li>
  <li>Model6</li>
</ul> 
```

任何人都可以提供一些示例代码来做到这一点吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:28:43.237

jQuery 将是执行此操作的简单方法，但如果您被迫使用纯 Javascript 执行此操作，您将拥有如下所示的内容：

HTML：

```
<textarea id="input" rows="5" cols="60">Brand: Brand1
    Model1 /Model2 /Model3 /Model4 /Model5 /Model6
    Brand: Brand2
    Model1 /Model2 /Model3 /Model4 /Model5 /Model6
</textarea>

<input id="convertButton" type="button" value="convert" />

<div id="output"></div> 
```

Javascript：

```
var convertButton = document.getElementById('convertButton');

convertButton.onclick = function(){
    var input = document.getElementById('input');
    var output = document.getElementById('output');

    var lines = input.value.split( '\n' );
    var html = '';
    for( var i=0; i<lines.length; i++ ) {
        if( lines[i].indexOf('Brand')===0 ) {
            var brand = lines[i].split(':')[1];
            html += '<h3>' + brand + '</h3>';
        }
        if( lines[i].indexOf('/')!==-1 ) {
            var models = lines[i].split('/');
            html += '<ul><li>' + models.join('</li><li>') + '</li></ul>';
        }
    }
    output.innerHTML = html;
};​ 
```

请注意，此解决方案不会进行大量错误检查，如果您对输入不小心，它会变得非常混乱，但它应该为您提供一个开始做您想做的事情的地方。在此处查看现场演示：http: [//jsfiddle.net/GUQXf/4/](http://jsfiddle.net/GUQXf/4/)

# c# - 创建 .gif 文件

> ID：12609509
> 
> 赞同：0
> 
> 时间：2012-09-26T20:03:58.837
> 
> 标签：c#, sql-server-2008, stored-procedures, gif

我的任务是在 c# 中存储和检索 .gif 文件。我已成功将 gif 存储在数据库中。我将其转换为二进制文件并使用存储过程存储在数据库中。

这是我的代码：

```
public int Insert(byte[] Byte,string Name,int userid)
{
    try
    {
        SqlCommand storedProcCommand = new SqlCommand("Insert", con);
        storedProcCommand.CommandType = CommandType.StoredProcedure;
        storedProcCommand.Parameters.AddWithValue("@Bytes", banner2Byte);
        storedProcCommand.Parameters.AddWithValue("@name", bannerName);
        storedProcCommand.Parameters.AddWithValue("@userid", userid);
        con.Open();
        storedProcCommand.ExecuteNonQuery();
        con.Close();
    }
    catch (Exception ex)
    {
    }
} 
```

如何从数据库中检索字节数组并转换为 a`.gif`并创建我首先存储的文件？

```
public int Retrieve(int id)
{
    try
    {
        SqlCommand storedProcCommand = new SqlCommand("Retrieve", con);
        storedProcCommand.CommandType = CommandType.StoredProcedure;
        storedProcCommand.Parameters.AddWithValue("@id", id);

        con.Open();

        SqlDataReader reader = storedProcCommand.ExecuteReader();
        reader.Read();

        byte[] arrays = reader.getBytes();             

        reader.Close();
        con.Close();
    }
    catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:08:48.960

假设您已正确存储了 gif 文件（包含标题和所有文件），您可以使用此函数从字节数组中取回图像。

```
public Image bytearr2image(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    return Image.FromStream(ms);
} 
```

# eclipse - Eclipse 需要简单的 PDF 查看器

> ID：12609512
> 
> 赞同：0
> 
> 时间：2012-09-26T20:04:09.927
> 
> 标签：eclipse, pdf

我正在寻找一种在 Eclipse (Juno) 中查看 PDF 的方法。

我只需要快速查看 PDF，不需要编辑、搜索或查看之外的任何功能。

我尝试了一些插件，但是当打开 PDF 时，它们都会切换到新的视角。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:39:08.203

我会尝试 Pdf4Eclipse：[http](http://borisvl.github.com/Pdf4Eclipse/) ://borisvl.github.com/Pdf4Eclipse/建议在已经拥有新视角的 texlipse 环境旁边，所以我认为，这不会切换。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-01-12T00:41:00.550

尝试简单易用的 PDF 查看器，可以从以下 eclipse 市场网站下载/安装。

[http://marketplace.eclipse.org/content/pdf-viewer#.Us-ZfvQeo0E](http://marketplace.eclipse.org/content/pdf-viewer#.Us-ZfvQeo0E)

# java - SWT - 列值是一个布尔值

> ID：12609513
> 
> 赞同：0
> 
> 时间：2012-09-26T20:04:27.963
> 
> 标签：java, swt

在我的表查看器中设置列值时。
您如何处理不是字符串值的列？
我将如何更改下面的代码来处理布尔值而不是字符串值？

这是我用来用字符串值布局其余列的代码。

```
col = createTableViewerColumn(titles[5], bounds[5], 5);
   col.setLabelProvider(new ColumnLabelProvider() {
      public String getText(Object element) {
         if(element instanceof AplotResultsDataModel.ResultsData) {
            return ((AplotResultsDataModel.ResultsData)element).getPrintStatus();
         }          
      return super.getText(element); 
      }
   }); 
```

`getPrintStatus()`返回一个`boolean`值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:40:02.420

我建议您在那里使用`ColumnLabelProvider.getImage(Object element)`并显示状态图像。

# php - 从 url 命名困境中上传图片

> ID：12609521
> 
> 赞同：0
> 
> 时间：2012-09-26T20:04:59.633
> 
> 标签：php, image, upload

假设我有一个图片网址

[http://website.com/content/image.png](http://website.com/content/image.png)

我想抓取该图像并将其放置在我自己的服务器中，但我想事先重命名它，以便可以将位置存储在数据库中。

我正在使用以下代码：

```
$url = 'http://website.com/content/image.png';
/* Extract the filename */
$filename = substr($url, strrpos($url, '/') + 1);
/* Save file wherever you want */
file_put_contents('upload/'.$filename, file_get_contents($url)); 
```

如果我想将文件重命名为全新的文件，但保持扩展名完好，我该如何完成？如果网址中有更多内容，这也会起作用吗？

例如，而不是： url here/content/image.png 它将是： url here/content/stuff/images/image.png

我基本上是在尝试编写一个通用函数，它将获取图像的 URL，将其上传到我的服务器，然后将该图像重命名为我想要的名称，同时保持扩展的完整性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:14:39.883

首先-您需要检查您的网络服务器是否可以从另一台服务器访问 URL。

第二-假设您可以：

```
$url = 'http://website.com/content/image.png';
$extension = end(explode(".", $url));
$filename = "the_filename_you_want.".$extension;
file_put_contents('upload/'.$filename, file_get_contents($url)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:06:39.990

```
 <?php
 $url = 'http://www.bla.org/img/derp.jpg';
 $extension = end(explode('.', $url));
 file_put_contents('/tmp/image.'.$extension, file_get_contents($url)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:07:42.997

`$filename = substr($url, strrpos($url, '.'));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:13:33.527

你需要[pathinfo](http://php.net/manual/en/function.basename.php)：

```
$url = 'http://website.com/content/image.png';
$path = parse_url($url, PHP_URL_PATH);
/* Extract the filename and extension */
$filename = pathinfo($path, PATHINFO_FILENAME);
$extension = pathinfo($path, PATHINFO_EXTENSION);
/* Save file wherever you want */
file_put_contents('upload/' . $filename . '.' . $extension, file_get_contents($url)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:16:44.027

您可能希望查看`parse_url()`函数以获取各种 URL 组件。

像：

```
$url_parts = parse_url($url);
$uri = $url_parts['path']; 
```

然后用于`pathinfo()`将 URI 的组件分解为路径、文件名、扩展名等。

```
$uri_info = pathinfo($uri);
$dir_name = $uri_info['dirname'];
$file_name = $uri_info['filename'];
$file_basename = $uri_info['basename'];
$file_extension = $uri_info['extension']; 
```

# api - 图书馆工作

> ID：12609522
> 
> 赞同：0
> 
> 时间：2012-09-26T20:05:00.277
> 
> 标签：api, operating-system, libraries, system-calls

我曾使用过**<iostream>**和其他通用 c++ 库。除此之外，我还使用过像**<pthread.h> 这样的库。**

现在，我已经阅读了**依赖于操作系统**的系统调用允许库和硬件上的功能实现之间的接口。这在 <pthread.h> 的工作中很明显，我们可以在 Linux 中使用但在 Windows 中不能使用。我对此的解释是，在 <pthread.h> 内部，函数是使用 UNIX**系统调用**定义的，Windows 无法理解。

但是 <iostream> 似乎在 Linux 和 Windows 中都可以正常工作。现在我的问题是，即使
<iostream> 的函数也需要根据 Windows 和 Linux 不同的系统调用来定义，那么**<iostream> 如何在两个 OS 上都能正常工作**。

PS：我知道按照我上面的想法，所有的库（即API）都会根据操作系统进行划分，或者库会针对不同的操作系统以不同的形式出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:47:20.503

`<iostream>`是 C++ 标准的一部分，它为用户提供了一个接口，以便您可以在不同的操作系统上运行相同的 C++ 代码，尽管它们是通过不同的系统调用实现的。

`<pthreads>`是[POSIX](http://en.wikipedia.org/wiki/POSIX)（便携式操作系统接口）标准的一部分，具有类似的目标，用于实现多线程应用程序。

到目前为止一切顺利.. 现在棘手的部分是 Windows 似乎`pthreads`不像大多数其他 POSIX 标准那样支持，因为.. 嗯，它是非常规的。`win32-threads`相反，它有自己的线程库。

关于操作系统，我认为将它们分为两类是公平的，即 windows 和其他类 unix 操作系统（linux、macos、solaris 等）。这并不是说 Windows 是一个邪恶的操作系统，只是它们有不同的目标。

如果您需要一个可移植的多线程应用程序，您可能需要使用更高级别的库，例如[OpenMP](http://en.wikipedia.org/wiki/OpenMP)（`pthreads`在 Linux 中使用，可能`win32-threads`在 Windows 中实现）或[Intel TBB](http://en.wikipedia.org/wiki/Intel_Threading_Building_Blocks)等。

此外， [C++11](http://en.wikipedia.org/wiki/C%2B%2B11)将拥有自己的内置线程支持，假设这些 C++ 编译器完全符合标准，您可以在 Windows 和其他人中以相同的方式安全地使用它。

**编辑：**我忘了提一下，有一些项目旨在在 Windows 上实现 POSIX 标准，例如[Cygwin](http://en.wikipedia.org/wiki/Cygwin)或[Interix](http://en.wikipedia.org/wiki/Interix)（由微软开发，但在 Windows 8 中已弃用）。如果你想`<pthreads>`在 Windows 中使用，你也可以使用这些。您使用`<pthreads>`函数进行的线程调用将映射到本机 Windows 线程。

# objective-c - 禁止加载 UIPickerView - Obj C

> ID：12609524
> 
> 赞同：0
> 
> 时间：2012-09-26T20:05:08.370
> 
> 标签：objective-c, ios, uitextfield, uipickerview

我有一个以编程方式创建的 UIPickerView。当有人在屏幕上按下 UITextField 时，它就会显示出来。唯一的问题是，如果有人在 UIPickerView 已经被填充后按下 UITextField，越来越多的 PickerView 开始在前一个之上分层。

如果 UIPickerView 已经在屏幕上，那么抑制填充 U​​IPickerView 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:07:54.733

有ofc。有多种方法可以做到这一点，但最简单的方法是只保留对 UIPickerView 的引用。换句话说，只需将它存储在类变量中并检查它是否不为零。

您还可以在 UIPickerView 上设置 tag 属性，并通过查询它的超级视图检查它是否已经存在。有关标签的更多信息：http: [//developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/tag](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/tag)

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:16:25.163

一旦 UIPicker 出现，您可以禁用您的 UITextField，并在您关闭选择器后重新启用它。

# xml - 在 WCF 中修改 XML 响应；损坏的 XML

> ID：12609525
> 
> 赞同：3
> 
> 时间：2012-09-26T20:05:15.357
> 
> 标签：xml, wcf, web-services

我正在尝试使用 ClientMessageInspector 修改来自 Web 服务的响应。在某些时候，我需要`Message`从修改后的`XMLStream`. 流的内容如下：

```
<soapenv:Envelope xmlns:soapenv="http://env" xmlns:xsd="http://xsd" xmlns:xsi="http://xsi" xmlns:v1="http://v1">
    <soapenv:Body>
        <v1:VM>
            <SH>
                <a>aa</a>
                <b>bb</b>
            </SH>
        </v1:VM>
    </soapenv:Body>
</soapenv:Envelope> 
```

我尝试使用以下方法创建消息：

```
System.Xml.XmlReader XMLReader = System.Xml.XmlReader.Create(XMLStream);
Message ModifiedReply = System.ServiceModel.Channels.Message.CreateMessage(OriginalReply.Version, null, XMLReader); 
```

但是，当我使用 Message.ToString() 打印消息内容时，我得到：

```
<s:Envelope xmlns:s="http://env">
    <s:Header />
        <s:Body>
            ... stream ...
        </s:Body>
</s:Envelope> 
```

如何防止“...流...”并获取实际的 XML 部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:30:34.437

从 a 创建的消息`XmlReader`将始终`...stream...`作为其正文打印出来。由于阅读器是底层 XML 的仅向前视图，因此不能多次使用它，因此如果`ToString`要从阅读器读取数据，则 WCF 管道的其余部分将无法使用该消息（例如编码器，它将把它写到电线上）。

如果你真的想看到完整的消息，你可以做的是自己缓冲消息，然后再重新创建它。你可以使用 a `MessageBuffer`。如果您真的想要完整的消息内容，`ToString`可能会也可能不会给您，因此您需要将消息写出来以强制打印。

```
public class StackOverflow_12609525
{
    public static void Test()
    {
        string xml = @"<soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/""
            xmlns:xsd=""http://xsd""
            xmlns:xsi=""http://xsi""
            xmlns:v1=""http://v1"">
        <soapenv:Body>
            <v1:VM>
                <SH>
                    <a>aa</a>
                    <b>bb</b>
                </SH>
            </v1:VM>
        </soapenv:Body>
    </soapenv:Envelope>";
        MemoryStream XmlStream = new MemoryStream(Encoding.UTF8.GetBytes(xml));
        XmlReader reader = XmlReader.Create(XmlStream);
        Message originalReply = Message.CreateMessage(reader, int.MaxValue, MessageVersion.Soap11);
        Console.WriteLine(originalReply); // this shows ...stream...
        Console.WriteLine();

        XmlStream = new MemoryStream(Encoding.UTF8.GetBytes(xml));
        reader = XmlReader.Create(XmlStream);

        Message modifiedReply = Message.CreateMessage(reader, int.MaxValue, originalReply.Version);
        MessageBuffer buffer = modifiedReply.CreateBufferedCopy(int.MaxValue); // this consumes the message

        Message toPrint = buffer.CreateMessage();
        MemoryStream ms = new MemoryStream();
        XmlWriterSettings ws = new XmlWriterSettings
        {
            Indent = true,
            IndentChars = "  ",
            OmitXmlDeclaration = true,
            Encoding = new UTF8Encoding(false)
        };
        XmlWriter w = XmlWriter.Create(ms, ws);
        toPrint.WriteMessage(w);
        w.Flush();
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));

        modifiedReply = buffer.CreateMessage(); // need to recreate the message here
    }
} 
```

# javascript - 为什么 JavaScript 中没有更频繁地使用 Try/Catch？

> ID：12609527
> 
> 赞同：38
> 
> 时间：2012-09-26T20:05:21.883
> 
> 标签：javascript

似乎对于支持 Try/Catch 的其他语言，开发人员比在 JavaScript 中更多地使用该功能。是否有一个原因？Try/Catch 的 JS 实现是否有缺陷？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-26T20:13:49.820

试着看看这篇文章：[http ://dev.opera.com/articles/view/efficient-javascript/?page=2#trycatch](http://dev.opera.com/articles/view/efficient-javascript/?page=2#trycatch)

*从上面的链接：*

try-catch-finally 结构相当独特。与其他构造不同，它**在运行时在当前范围内创建一个新变量**。**每次**执行 catch 子句时都会发生这种情况，其中捕获的异常对象被分配给一个变量。即使在同一范围内，此变量也不存在于脚本的其他部分中。它在 catch 子句的开头被创建，然后在它的结尾被销毁。

因为这个变量是在运行时创建和销毁的，并且代表了语言中的一种特殊情况，所以**一些浏览器不能非常有效地处理它**，并且**在性能关键循环中放置一个 catch 处理程序可能会在捕获异常时导致性能问题**。

[**您也可以在这里**](https://stackoverflow.com/questions/5260526/use-of-try-catch-in-javascript)查看类似的问题[](https://stackoverflow.com/questions/5260526/use-of-try-catch-in-javascript)

 ****更新**

添加指向：[https](https://github.com/petkaantonov/bluebird/wiki/Optimization-killers) ://github.com/petkaantonov/bluebird/wiki/Optimization-killers 的链接，因为它包含有关 V8 以及它如何处理这些（和类似）构造的有用信息。

尤其：

目前不可优化：

*   生成器函数
*   包含 for-of 语句的函数
*   包含 try-catch 语句的函数
*   包含 try-finally 语句的函数
*   包含复合 let 赋值的函数
*   包含复合 const 赋值的函数
*   包含包含**proto**或 get 或 set 声明的对象文字的函数。

可能永远无法优化：

*   包含调试器语句的函数
*   逐字调用 eval() 的函数
*   包含 with 语句的函数

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-26T20:10:14.480

不，它没有缺陷，但是对于同步代码，使用自己的代码检查事情通常比使用笨重的`try{}catch(e){}`.

例子：

```
var container = document.getElementById("timmy");
container.innerHTML = "I'm timmy!"; 
```

如果没有 ID 为“timmy”的元素，我们可以这样处理：

```
try
{
    container.innerHTML = "I'm timmy";
}
catch (error)
{
    //handle no container
} 
```

或者：

```
if(container) container.innerHTML = "I'm timmy";
else //handle no container 
```

* * *

要记住的另一件事是 JavaScript 应用程序是事件驱动的，程序主体中的 try/catch 块无法捕获事件回调中发生的错误。

例子：

```
sqlConnection.query("SELECT * FROM table", 
    function(){console.log("queried!");}); 
```

这将触发一些在您的程序继续运行时运行的本机代码。如果发生错误，您不能期望您的程序回溯到这一行，以便您的错误处理程序可以完成它的工作！相反，您在回调本身中处理错误。通常的做法是通过将发生的任何错误作为第一个参数传递来提供回调。

```
sqlConnection.query("SELECT * FROM table", 
    function(error, data){
        if(error) console.log("query failed");
        else console.log("queried!");
    }); 
```

或者，如果您的代码在回调中失败，您可以按照我上面提到的方式处理它。

```
link.onclick = function(e)
{
    var popUp = document.getElementById("popup");
    if(!popUp)
        return true; //follow link if no pop-up exists
    popUp.style.display = "block";
}; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-26T20:14:44.873

大多数 javascript 代码的异步特性将 try/catch 隐藏在低级别，然后调用错误回调。

js 中最繁重的代码是异步的，并使用回调或承诺模式。其他代码很简单，不需要 try/catch。

如果你深入研究 js 库（选择你最喜欢的），你会发现 try/catch 块包装了现代 js 应用程序中执行的大量繁重的应用程序代码。然后这些库调用您在许多 js 代码示例中看到的错误或失败回调。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T20:10:03.870

我相信与 if 语句相比，try/catch 的开销更大，尽管我认为只有在实际抛出异常时才重要。我经常使用 try/catch，但前提是我知道很有可能会抛出异常。

如果有效地使用，真的没有理由不使用 try/catch。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:12:43.340

JavaScript 不太需要它们，原因是，几乎没有任何理由去捕捉错误，因为，一个错误不会停止整个脚本。Javascript 是事件驱动的，大多数函数在特定事件发生时运行，并且它是客户端，所以如果出现任何问题，它就会出错，捕获和处理错误几乎没有任何好处。只有我的看法。**

# c++ - 字符串的值不同，但打印它们显示相同的值

> ID：12609529
> 
> 赞同：1
> 
> 时间：2012-09-26T20:05:24.967
> 
> 标签：c++, c, strcmp, stat

我正在运行以下代码来检查文件是否存在，但是将字符串传递给 stat 时，它返回失败。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>

int main ()
{
struct stat statbuf;
char tmp_buf1[100];
char result [100];
char result1[100]="/root/file.sh";
strcpy(tmp_buf1,"echo $HOME/file.sh");
FILE* fp;
fp = popen(tmp_buf1,"r");
printf("Name passed is:%s\n",tmp_buf1);
fread(result,1,sizeof(result),fp);
fclose (fp);
printf("The full path is  %s\n",result);
int rc = 0;

// To find out difference b/w the the strings, I am doing a strcmp, it is returning 10.
int r = strcmp(result,result1);

printf (" Return is = %d\n",r);
rc = stat(result, &statbuf);
if ( rc == -1 ) {
    printf("File is NOT HERE!\n");
    printf("Return Code = %d",rc);
   }
else
    printf("Found it !");
} 
```

不知道为什么这些字符串不一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:16:19.110

```
strcpy(tmp_buf1,"echo $HOME/file.sh"); 
```

`echo`结束它应该用换行符`'\n'`，ASCII码10回显的字符串。这就是两个字符串之间的区别。试试看

```
strcpy(tmp_buf1,"echo -n $HOME/file.sh"); 
```

另一方面，`FILE*`打开的 with`popen`应该用 关闭`pclose`，而不是用关闭`fclose`。

# arrays - 在 VBA 中创建一个函数，该函数具有一个动态数组作为参数，其输出也是一个动态数组

> ID：12609535
> 
> 赞同：0
> 
> 时间：2012-09-26T20:06:00.287
> 
> 标签：arrays, vba, dynamic

这就是我想要做的：假设你有一个动态数组，其维度可以从**0x6**到**10x6**（这意味着我们可以有从 0 到 10 的任何行，但列总是 6）。我一直在拼命地尝试创建一个函数（然后将其绑定到一个宏），该函数将使用第一个数组作为参数，并将创建第二个数组作为输出，其元素将是第一个数组的返回值。例如，如果我们有 1x6 的简单情况，则输出数组的元素为 5，每种情况下都由公式 给出`(x_i+1 - x_i)/x_i, i=1, 2, ..., 6`。此外，该函数必须能够绕过输入数组中的任何缺失值并忽略相应的不存在的返回值。整个事情必须在 VBA 脚本中完成。

自从我疯狂地寻求帮助已经两天了，但问题是我对 VBA 编程一无所知（我通常使用其他语言，如 MATLAB 或 Mathematica）所以这对我来说非常困难。我发现的任何解决方案都无法整合并实现我的目标。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:24:17.547

因为您没有提供代码，所以我无法准确确定您想要做什么，但这里有一个传递数组并返回您应该能够推断的数组的示例。

编辑：只是为了好玩，将其更新为最多可用于 3 维数组。

```
Public Sub Test()
    'Defines testArray as Variant 0 to 10
    Dim testArray(0 To 1, 0 To 6) As Long
    Dim returnArray() As Long
    Dim i As Long
    Debug.Print UBound(testArray, 2)
    'Populates testArray with Longs
    For i = 0 To UBound(testArray, 1)
        For j = 0 To UBound(testArray, 2)
            testArray(i, j) = (i + j) * 2
        Next
    Next
    'Passes testArray and returns ParseArray
    returnArray = addOne(testArray)
  End Sub

Public Function addOne(arrValues() As Long) As Variant
    Dim arrCopy() As Long
    Dim dimensionNum As Long, ErrorCheck As Long
    On Error Resume Next
    For dimensionNum = 1 To 60000
        ErrorCheck = LBound(arrValues, dimensionNum)
        If Err.Number <> 0 Then
            dimensionNum = dimensionNum - 1
            Exit For
        End If
    Next
    Dim i As Long, j As Long, k As Long
    'Copies passed array to avoid updating passed array directly
    arrCopy = arrValues
    'Adds 1 to each element of the array.
    If dimensionNum = 1 Then
        For i = LBound(arrCopy) To UBound(arrCopy)
            arrCopy(i) = arrCopy(i) + 1
        Next
    ElseIf dimensionNum = 2 Then

        For i = LBound(arrCopy) To UBound(arrCopy)
            For j = LBound(arrCopy, 2) To UBound(arrCopy, 2)
                arrCopy(i, j) = arrCopy(i, j) + 1
            Next
        Next
    ElseIf dimensionNum = 3 Then
        For i = LBound(arrCopy) To UBound(arrCopy)
            For j = LBound(arrCopy, 2) To UBound(arrCopy, 2)
                For k = LBound(arrCopy, 3) To UBound(arrCopy, 3)
                    arrCopy(i, j, k) = arrCopy(i, j, k) + 1
                Next
            Next
        Next
    Else
        MsgBox "Add function only works for three dimensions or fewer arrays"
    End If
    addOne = arrCopy
End Function 
```

# tsql - 2个varchars之间的T-SQL隐式转换

> ID：12609536
> 
> 赞同：3
> 
> 时间：2012-09-26T20:06:00.690
> 
> 标签：tsql, implicit-conversion

我有一些我继承的 T-SQL (SQL Server 2008)，并试图找出为什么一些查询运行得非常慢。在`Actual Execution Plan`我有三个聚集索引扫描中，这花费了我 19%、21% 和 26%，所以这似乎是我的问题的根源。

字段的内容通常是数字（但有些工作编号有字母前缀）

数据库设计（供应商提供）非常糟糕。他们的应用程序中工作编号的最大长度为 12 个字符，但在连接的表中，它`varchar(50)`在某些地方和`varchar(15)`其他地方被定义为。我的参数是 a `varchar(12)`，但如果我将其更改为 a ，我会得到同样的结果`varchar(50)`

该节点包含以下内容：

```
Predicate: [Live_Costing].[dbo].[TSTrans].[JobNo] as [sts1].[JobNo]=CONVERT_IMPLICIT(varchar(50),[@JobNo],0) 
```

`sts1`是派生表，但它从中提取的表`jobno`是`varchar(50)`

我不明白为什么它在 2 个 varchars 之间进行隐式转换。仅仅是因为它们的长度不同吗？

我对执行计划相当陌生

有没有一种简单的方法来确定执行计划中的哪个节点与查询的哪个部分相关？是谓词，连接子句？

问候

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:18:22.217

一些变量可以有排序规则：[在此处输入链接描述](https://stackoverflow.com/q/1631936/1982253)

无论您需要验证排序规则，都可以在服务器、数据库、表和列级别指定。

首先，检查 tempdb 和供应商提供的数据库之间的排序规则。它应该匹配。如果没有，它将倾向于进行隐式转换。

假设您无法修改供应商提供的代码库，以下一项或多项应该对您有所帮助： 1) 预定义您的临时表并为使用的 db 中的键字段指定相同的排序规则，而不是 tempdb。2) 在进行字符串比较时提供排序规则。3）如果对临时表使用“select into”，请为键值指定排序规则 4）确保表和列的排序规则与数据库排序规则匹配（如果您仅将供应商的特定表导入现有数据库，则非常重要。）

如果您可以更改供应商提供的代码库，我建议您查看使所有 char 键长度相同而不是 varchar 的成本。Varchar 的开销为 10。需要注意的是，如果您创建一个不为 null 的固定长度字符字段，它将被填充到右侧（不可避免）。

理想情况下，您将拥有 int 键，并且仅使用 varchar 字段进行用户交互/查找：

创建表 Products(ProductID int not null identity(1,1) primary key clustered, ProductNumber varchar(50) not null)

alter table Products 添加约束 uckProducts_ProductNumber unique(ProductNumber)

然后在 ProductID 而不是 ProductNumber 上执行所有连接。只需过滤 ProductNumber。

会很好的。

# vmware - 从 VMware PowerCLI 检索域设置

> ID：12609537
> 
> 赞同：0
> 
> 时间：2012-09-26T20:06:00.503
> 
> 标签：vmware, powercli

有谁知道如何从 PowerCLI 获取管理程序的域设置？我想获取服务器所在域的名称，但是查看 vmware 文档（https://www.vmware.com/support/developer/vc-sdk/）我看不到如何检索它. 我的目标是 API 版本 4.1 及更高版本。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:16:29.090

我无法在 powerCLI 中使用它，我认为是因为我无法轻松查看某些对象的底层类型是什么。但是，我确实找到了一种通过 VIM API 获取此信息的方法，它应该以相同的方式工作：

```
IHostAuthenticationManager hostAuthenticationManager = _hostSystem.Client.GetView(_hostSystem.ConfigManager.AuthenticationManager, null);
HostActiveDirectoryInfo activeDirectorySettings = hostAuthenticationManager.Info.AuthConfig.OfType<HostActiveDirectoryInfo>().FirstOrDefault();

activeDirectorySettings.JoinedDomain // The name of the domain the hypervisor is connected to 
```

# c++ - C ++ 03中最接近浮点值的整数

> ID：12609539
> 
> 赞同：13
> 
> 时间：2012-09-26T20:06:15.580
> 
> 标签：c++, floating-point, type-conversion, c++03, integral

对于某些整数类型，即使浮点值远远超出整数的可表示范围，我如何才能找到最接近浮点类型的某个值的值。

或者更准确地说：

设`F`为浮点类型（可能是`float`、`double`或`long double`）。设为`I`整数类型。

假设两者`F`和`I`都有有效的专业化`std::numeric_limits<>`。

给定一个可表示的值`F`，并且只使用 C++03，我怎样才能找到最接近的可表示值`I`？

我追求的是一种纯粹、高效和线程安全的解决方案，除了 C++03 所保证的之外，它对平台没有任何假设。

如果不存在这样的解决方案，是否可以使用 C99/C++11 的新特性找到一个解决方案？

由于报告域错误的方式不平凡，使用`lround()`C99 似乎存在问题。能否以可移植和线程安全的方式捕获这些域错误？

注意：我知道 Boost 可能通过它的`boost::numerics::converter<>`模板提供了一个解决方案，但是由于它的高度复杂性和冗长，我无法从中提取要领，因此我无法检查他们的解决方案是否使超出 C++03 的假设。

以下天真的方法失败了，因为`I(f)`当 的整数部分`f`不是 的可表示值时，C++03 未定义 的结果`I`。

```
template<class I, class F> I closest_int(F f)
{
  return I(f);
} 
```

然后考虑以下方法：

```
template<class I, class F> I closest_int(F f)
{
  if (f < std::numeric_limits<I>::min()) return std::numeric_limits<I>::min();
  if (std::numeric_limits<I>::max() < f) return std::numeric_limits<I>::max();
  return I(f);
} 
```

`F(std::numeric_limits<I>::min())`这也失败了，因为和的组成部分`F(std::numeric_limits<I>::max())`可能仍然无法在 中表示`I`。

最后考虑这第三种方法，它也失败了：

```
template<class I, class F> I closest_int(F f)
{
  if (f <= std::numeric_limits<I>::min()) return std::numeric_limits<I>::min();
  if (std::numeric_limits<I>::max() <= f) return std::numeric_limits<I>::max();
  return I(f);
} 
```

这个时间`I(f)`总是会有一个明确定义的结果，但是，因为`F(std::numeric_limits<I>::max())`可能比 小得多`std::numeric_limits<I>::max()`，所以我们可能会返回`std::numeric_limits<I>::max()`一个浮点值，它是低于 的多个整数值`std::numeric_limits<I>::max()`。

请注意，之所以会出现所有麻烦，是因为未定义转换是`F(i)`向上舍入还是向下舍入到最接近的可表示浮点值。

以下是 C++03（4.9 浮点整数转换）的相关部分：

> 整数类型或枚举类型的右值可以转换为浮点类型的右值。如果可能，结果是准确的。否则，它是下一个较低或较高可表示值的实现定义选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:43:50.170

对于 radix-2（二进制）浮点类型和大于等于 64 位的整数类型，我有一个实用的解决方案。见下文。评论应该清楚。输出如下。

```
// file: f2i.cpp
//
// compiled with MinGW x86 (gcc version 4.6.2) as:
//   g++ -Wall -O2 -std=c++03 f2i.cpp -o f2i.exe
#include <iostream>
#include <iomanip>
#include <limits>

using namespace std;

template<class I, class F> I truncAndCap(F f)
{
/*
  This function converts (by truncating the
  fractional part) the floating-point value f (of type F)
  into an integer value (of type I), avoiding undefined
  behavior by returning std::numeric_limits<I>::min() and
  std::numeric_limits<I>::max() when f is too small or
  too big to be converted to type I directly.

  2 problems:
  - F may fail to convert to I,
    which is undefined behavior and we want to avoid that.
  - I may not convert exactly into F
    - Direct I & F comparison fails because of I to F promotion,
      which can be inexact.

  This solution is for the most practical case when I and F
  are radix-2 (binary) integer and floating-point types.
*/
  int Idigits = numeric_limits<I>::digits;
  int Isigned = numeric_limits<I>::is_signed;

/*
  Calculate cutOffMax = 2 ^ std::numeric_limits<I>::digits
  (where ^ denotes exponentiation) as a value of type F.

  We assume that F is a radix-2 (binary) floating-point type AND
  it has a big enough exponent part to hold the value of
  std::numeric_limits<I>::digits.

  FLT_MAX_10_EXP/DBL_MAX_10_EXP/LDBL_MAX_10_EXP >= 37
  (guaranteed per C++ standard from 2003/C standard from 1999)
  corresponds to log2(1e37) ~= 122, so the type I can contain
  up to 122 bits. In practice, integers longer than 64 bits
  are extremely rare (if existent at all), especially on old systems
  of the 2003 C++ standard's time.
*/
  const F cutOffMax = F(I(1) << Idigits / 2) * F(I(1) << (Idigits / 2 + Idigits % 2));

  if (f >= cutOffMax)
    return numeric_limits<I>::max();

/*
  Calculate cutOffMin = - 2 ^ std::numeric_limits<I>::digits
  (where ^ denotes exponentiation) as a value of type F for
  signed I's OR cutOffMin = 0 for unsigned I's in a similar fashion.
*/
  const F cutOffMin = Isigned ? -F(I(1) << Idigits / 2) * F(I(1) << (Idigits / 2 + Idigits % 2)) : 0;

  if (f <= cutOffMin)
    return numeric_limits<I>::min();

/*
  Mathematically, we may still have a little problem (2 cases):
    cutOffMin < f < std::numeric_limits<I>::min()
    srd::numeric_limits<I>::max() < f < cutOffMax

  These cases are only possible when f isn't a whole number, when
  it's either std::numeric_limits<I>::min() - value in the range (0,1)
  or std::numeric_limits<I>::max() + value in the range (0,1).

  We can ignore this altogether because converting f to type I is
  guaranteed to truncate the fractional part off, and therefore
  I(f) will always be in the range
  [std::numeric_limits<I>::min(), std::numeric_limits<I>::max()].
*/

  return I(f);
}

template<class I, class F> void test(const char* msg, F f)
{
  I i = truncAndCap<I,F>(f);
  cout <<
    msg <<
    setiosflags(ios_base::showpos) <<
    setw(14) << setprecision(12) <<
    f << " -> " <<
    i <<
    resetiosflags(ios_base::showpos) <<
    endl;
}

#define TEST(I,F,VAL) \
  test<I,F>(#F " -> " #I ": ", VAL);

int main()
{
  TEST(short, float,     -1.75f);
  TEST(short, float,     -1.25f);
  TEST(short, float,     +0.00f);
  TEST(short, float,     +1.25f);
  TEST(short, float,     +1.75f);

  TEST(short, float, -32769.00f);
  TEST(short, float, -32768.50f);
  TEST(short, float, -32768.00f);
  TEST(short, float, -32767.75f);
  TEST(short, float, -32767.25f);
  TEST(short, float, -32767.00f);
  TEST(short, float, -32766.00f);
  TEST(short, float, +32766.00f);
  TEST(short, float, +32767.00f);
  TEST(short, float, +32767.25f);
  TEST(short, float, +32767.75f);
  TEST(short, float, +32768.00f);
  TEST(short, float, +32768.50f);
  TEST(short, float, +32769.00f);

  TEST(int, float, -2147483904.00f);
  TEST(int, float, -2147483648.00f);
  TEST(int, float, -16777218.00f);
  TEST(int, float, -16777216.00f);
  TEST(int, float, -16777215.00f);
  TEST(int, float, +16777215.00f);
  TEST(int, float, +16777216.00f);
  TEST(int, float, +16777218.00f);
  TEST(int, float, +2147483648.00f);
  TEST(int, float, +2147483904.00f);

  TEST(int, double, -2147483649.00);
  TEST(int, double, -2147483648.00);
  TEST(int, double, -2147483647.75);
  TEST(int, double, -2147483647.25);
  TEST(int, double, -2147483647.00);
  TEST(int, double, +2147483647.00);
  TEST(int, double, +2147483647.25);
  TEST(int, double, +2147483647.75);
  TEST(int, double, +2147483648.00);
  TEST(int, double, +2147483649.00);

  TEST(unsigned, double,          -1.00);
  TEST(unsigned, double,          +1.00);
  TEST(unsigned, double, +4294967295.00);
  TEST(unsigned, double, +4294967295.25);
  TEST(unsigned, double, +4294967295.75);
  TEST(unsigned, double, +4294967296.00);
  TEST(unsigned, double, +4294967297.00);

  return 0;
} 
```

输出（[ideone](http://ideone.com/5588v)打印与我的 PC 相同）：

```
float -> short:          -1.75 -> -1
float -> short:          -1.25 -> -1
float -> short:             +0 -> +0
float -> short:          +1.25 -> +1
float -> short:          +1.75 -> +1
float -> short:         -32769 -> -32768
float -> short:       -32768.5 -> -32768
float -> short:         -32768 -> -32768
float -> short:      -32767.75 -> -32767
float -> short:      -32767.25 -> -32767
float -> short:         -32767 -> -32767
float -> short:         -32766 -> -32766
float -> short:         +32766 -> +32766
float -> short:         +32767 -> +32767
float -> short:      +32767.25 -> +32767
float -> short:      +32767.75 -> +32767
float -> short:         +32768 -> +32767
float -> short:       +32768.5 -> +32767
float -> short:         +32769 -> +32767
float -> int:    -2147483904 -> -2147483648
float -> int:    -2147483648 -> -2147483648
float -> int:      -16777218 -> -16777218
float -> int:      -16777216 -> -16777216
float -> int:      -16777215 -> -16777215
float -> int:      +16777215 -> +16777215
float -> int:      +16777216 -> +16777216
float -> int:      +16777218 -> +16777218
float -> int:    +2147483648 -> +2147483647
float -> int:    +2147483904 -> +2147483647
double -> int:    -2147483649 -> -2147483648
double -> int:    -2147483648 -> -2147483648
double -> int: -2147483647.75 -> -2147483647
double -> int: -2147483647.25 -> -2147483647
double -> int:    -2147483647 -> -2147483647
double -> int:    +2147483647 -> +2147483647
double -> int: +2147483647.25 -> +2147483647
double -> int: +2147483647.75 -> +2147483647
double -> int:    +2147483648 -> +2147483647
double -> int:    +2147483649 -> +2147483647
double -> unsigned:             -1 -> 0
double -> unsigned:             +1 -> 1
double -> unsigned:    +4294967295 -> 4294967295
double -> unsigned: +4294967295.25 -> 4294967295
double -> unsigned: +4294967295.75 -> 4294967295
double -> unsigned:    +4294967296 -> 4294967295
double -> unsigned:    +4294967297 -> 4294967295 
```

# php - 用于在 php 站点上模拟（强）加载的程序

> ID：12609543
> 
> 赞同：2
> 
> 时间：2012-09-26T20:06:37.843
> 
> 标签：php, testing, load, simulation

我想在现场模拟负载，（网站写在 php 上）。例如，我想在同一页面上模拟同时 10 000 个请求（例如 index.php），搜索后我找到了“jmeter”（但我仍然没有测试它）。其他，您可以为此推荐什么程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:17:51.490

使用 Apache Bench。它是一个命令行负载测试器。如果你想同时测试 10,000 个用户，请使用这个命令行：

```
ab -c 10000 http://www.mysite.com/ 
```

-c 是并发请求的数量..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:08:18.603

[`ApacheBench`](http://httpd.apache.org/docs/2.2/programs/ab.html)非常适合这种事情，并且可能已经安装在您的机器上。

# coq - 假设对矛盾证明的否定

> ID：12609548
> 
> 赞同：5
> 
> 时间：2012-09-26T20:06:42.937
> 
> 标签：coq

我有一堆规则，它们本质上意味着某些命题 P 永远不会为真。我现在必须使用 Coq 证明 P 是错误的。为了在纸面上这样做，我会假设 P 成立，然后得出矛盾，从而证明 P 不能成立。

我不太确定如何假设 P 支持这个证明，这就是我寻求帮助的原因。我当前的代码：

```
Variables {…} : Prop.
Hypothesis rule1 : … .
Hypothesis rule2 : … .
.
.
.
Hypothesis rule6 : … .
Variable s : P. (* Assume that P holds for proof by contradiction *)
(* other Coq commands *)
(* proof is done *) 
```

有人可以确认我是否以正确的方式进行此操作（否则，我应该怎么做？）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T21:02:48.287

你要做的是证明：

```
Theorem notP := ~ P. 
```

归结为：

```
Theorem notP := P -> False. 
```

因此，对于 P 类型的变量，您需要证明目标为 False。

我相信你这样做的方式是可以接受的，尽管你可能想把它放在`Variable s : p.`一个部分中，这样你就永远无法在你不想的其他地方达到那个 s...

```
Section ProvingNotP.
Variable p : P.
Theorem notP: False.
Proof. ... Qed.
End ProvingNotP. 
```

我认为这应该有效。

# java - 用 Java 表示图

> ID：12609551
> 
> 赞同：0
> 
> 时间：2012-09-26T20:06:51.050
> 
> 标签：java

请问如何用Java表示图形？

我必须在图上应用算法，算法的第一条指令是验证最后一个顶点是否相关？

![在此处输入图像描述](../Images/bced72258aefdaac01baebdee4fb78e1.png)

在java中构建图之后，我应该验证最后三个点是否依赖，如果它们依赖，则将位于箭头头部的顶点替换为其前一个顶点，并验证最后三个点是否依赖点是否依赖
等。直到我们找到三个顶点独立谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:10:11.533

你可以坚持一个`Node`班级，一个`Vertice`班级或一张地图`<Node, Value>`来获取这些信息。

关于什么

```
public class Node {
  private String description;
  private Map<Node, Cost> vertices;
} 
```

这几乎总结了它的基本结构。现在可以对其进行迭代以构建路径并从中锻炼信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:13:17.807

您还可以将图表示为邻接矩阵。与节点相比，如果您的图形包含很多边，这尤其有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T06:39:37.297

要在 JAVA 中表示图形，您也可以使用[ZEST API](http://www.eclipse.org/gef/zest/)，它具有 GraphNode、GraphConnection 等必须对您有帮助的类。

# plugins - After Effects 插件是使用 AE sdk 跨平台制作的吗？

> ID：12609554
> 
> 赞同：0
> 
> 时间：2012-09-26T20:07:07.963
> 
> 标签：plugins, sdk, cross-platform, after-effects

我想在 c/c++ 中使用后效 sdk 开发一个后效插件。以这种方式制作的插件是否跨平台。我将在 Mac 上进行开发，那么该插件是否可以在没有任何修改的情况下在 Windows 上运行？如果没有，我是否需要进行一些小调整以使其跨平台，或者我是否必须在 windows 下重新开发插件才能在 windows 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:15:58.547

取决于你的代码。

如果您使用 GET_MAIN_WHND() 等特定平台调用，则必须根据每个平台更改代码。

另一方面，它应该与 windows 的代码完全相同。只需复制一个现有项目，就像您在 mac 上所做的那样，然后复制您的代码。

# java - eclipse中的文件路径错误？（Java 春天）

> ID：12609562
> 
> 赞同：1
> 
> 时间：2012-09-26T20:07:50.720
> 
> 标签：java, spring, input, io

```
InputStream inp = new FileInputStream("src/main/resources/ExportHour.xls"); 
```

我的 Java Spring 项目的 src/main/resources 文件夹中有一个文件。我试图在我的一个控制器中创建一个输入流，但是我总是得到一个找不到文件的异常。当我更改路径位置以专门指向我机器上的文件时，它工作正常。

有什么办法可以使文件可以在java项目中找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:14:10.240

听起来您*可以*只更改流程的工作目录-我怀疑它不是您认为的位置。例如，我建议你写

```
File file = new File("src/main/resources/ExportHour.xls"); 
```

然后 log `file.getAbsolutePath()`，查看它使用的确切文件。

但是，您几乎肯定*不*应该使用 a `FileInputStream`。最好使用类似的东西：

```
InputStream inp = Foo.class.getResourceAsStream("/ExportHour.xls"); 
```

...对于某些`Foo`具有类加载器的类，其中包含您需要的资源。

（或者可能`/resources/ExportHour.xls"`，取决于您的构建结构。）

这样，即使您将所有这些都构建到 jar 文件中，您仍然可以打开该资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:14:53.290

尝试使用 spring [ClassPathResource](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/ClassPathResource.html)。

```
InputStream inp = new ClassPathResource("ExportHour.xls").getInputStream(); 
```

那是因为 maven 中的资源文件夹直接放在你的 jar 文件中，即 ExportHours.xls 文件放在你的 jar 的根目录中。

# ruby - 如何在 Ruby 中将字符串添加到散列的散列中？

> ID：12609565
> 
> 赞同：-3
> 
> 时间：2012-09-26T20:08:04.233
> 
> 标签：ruby

```
a = ["Bob Green", "Don Brown", "Rich Freedom"]

a_hash = {"key_name" =>{"name" => "a_name", "a_thing" => 0}}

keys = a_hash.keys

for i in 0..a.length
  aCOG = a[i]
  aCOGkey = a[i].to_s.downcase.delete(' ')

  keys[i] = aCOGkey
  a_hash[keys[i]]["name"] = aCOG   #why does this line fail?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:18:57.197

让我们来看看：

```
keys[0] == aCOGkey == a[0] == "bobgreen" 
```

看起来那条线失败了，因为`a_hash`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:39:56.790

嵌套哈希不只是自行创建。换句话说，Ruby 也不知道键的值是哈希。

您可以使用上述所有方法来专门分配哈希，也可以使用

```
a_hash = Hash.new { |h,k|  h[k] = {} } 
```

这假设所有值`a_hash`都是一个散列（嵌套散列）。此方法可以将默认值设置为哈希。你也可以`h[k] = {name:"",a_thing:0}`在你的情况下设置。

所以你只需要这样做：

```
a = ["Bob Green", "Don Brown", "Rich Freedom"]    
a_hash = Hash.new { |h,k|  h[k] = {} }    
a.each{|n| a_hash[n.to_s.downcase.delete(' ')]["name"] = n} 
```

尽量不要`for`在 Ruby 中使用。请改用枚举器。对哈希键使用符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:18:00.420

将新的键值对写入散列中的散列可以像这样工作：

```
outer_hash['inner_hash_key']['new_key_in_inner_hash'] = 'String I want to add'. 
```

# shell - 用于类项目的 ubuntu 上的 Unix shell。无法识别错误

> ID：12609576
> 
> 赞同：1
> 
> 时间：2012-09-26T20:08:42.030
> 
> 标签：shell, unix, fork, echo

我的代码在这里。本质上，自定义 shell 需要将 echo、cd 和 quit 作为命令，并 fork 一个子命令作为命令。编译时没有错误，但没有运行。当我给出“echo hello”时，它没有回应论点……它进入了正确的功能，但我无法查明错误。我猜我在 execlp 函数上犯了一个错误。有人可以帮我吗？

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <string.h>

int main()
{

    char command[256];
    char * parsedCmd;
    char * argument;

    //char *sep[]=" ";

    while (1<2)
    {
        printf("\nOS Assignment 1@user: ");
        fgets(command, sizeof(command), stdin); 

        parsedCmd=strtok(command, " ");
        argument=strtok(NULL, " ");

        //printf("\n%s\n", argument);

        if (strncmp("quit", command, 4)==0)
            break;
        if (strncmp("cd", parsedCmd, 2)==0)
        {
            printf("\nExecuting cd\n");
            execCD(argument);   
        }
        if (strncmp("echo", parsedCmd, 4)==0)
        {
            printf("\nEchoing now...\n");
            shellEcho(argument);
        }       
        else
            printf("\nOur shell is simple. Try either cd, echo or quit :) ...\n");  
    }   
}

int execCD(char *receive)
{
    printf("\nExecuting cd as Child...\n"); 
    printf("\nDirectory to cd is %s\n", receive);
    pid_t pid;

    pid=fork();

    if (pid<0)
    {
        fprintf(stderr, "\nFork Failed\n");
        return 1;
    }

    else if (pid==0)
    {
        execlp(receive, "cd", NULL);
    }

    else
    {
        wait(NULL);
        printf("Child Complete");
    }

    return 0;
}

int shellEcho(char *receive)
{
    printf("\nExecuting echo as Child...\n");   

    pid_t pid;

    pid=fork();

    if (pid<0)
    {
        fprintf(stderr, "\nFork Failed\n");
        return 1;
    }

    else if (pid==0)
    {
        execlp(receive, "echo", NULL);
    }

    else
    {
        wait(NULL);
        printf("Child Complete");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:56:58.460

你有`execlp`倒退的论据。另外，请注意，按照惯例，您需要指定“echo”两次：一次作为要执行的程序的名称，第二次作为第 0 个参数（通常但不一定是程序的名称）。

```
int shellEcho(char *receive)
{
    printf("\nExecuting echo as Child...\n");   
    pid_t pid;
    pid=fork();

    if (pid<0) {
        fprintf(stderr, "\nFork Failed\n");
        return 1;
    } else if (pid==0) {
        execlp("echo", "echo", receive, NULL);
    } else {
        wait(NULL);
        printf("Child Complete");
    }

    return 0;
} 
```

另外，请注意“cd”不能执行，因为它必须由 shell 实现（它不是可以运行的单独程序）。与你的老师讨论这个问题可能比在这里进一步讨论更合适。

# android - SurfaceView 上的 Android 相对布局

> ID：12609583
> 
> 赞同：3
> 
> 时间：2012-09-26T20:09:20.773
> 
> 标签：android, android-layout, animation, android-relativelayout, surfaceview

我有一个非常不典型的问题，我为此使用容器（RelativeLayout）在 CameraView（SurfaceView）上覆盖了一个 AnimationView（RelativeLayout），但是在 CameraView 之后显示的 AnimationView 剪切添加

这是我的活动 onCreate 代码：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    RelativeLayout container = (RelativeLayout) findViewById(R.id.container);

    cameraView = new CameraView(this);
    RelativeLayout.LayoutParams surfaceLayoutParams = new RelativeLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    cameraView.setLayoutParams(surfaceLayoutParams);
    container.addView(cameraView);

    animationView = new AnimationView(this);
     RelativeLayout.LayoutParams relativeLayoutParams = new RelativeLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
     animationView.setLayoutParams(relativeLayoutParams);

    container.addView(animationView);

    animationView.startAnimation();
} 
```

并显示切割 AnimationView：[http ://s13.postimage.org/d62piuko7/Untitled.png](http://s13.postimage.org/d62piuko7/Untitled.png)

但是当不添加 CameraView 时，动画效果很好：[http ://s18.postimage.org/sycfdq2mx/Untitled2.png](http://s18.postimage.org/sycfdq2mx/Untitled2.png)

# php - 修复简单的 PHP WordPress 用户显示名称脚本

> ID：12609586
> 
> 赞同：1
> 
> 时间：2012-09-26T20:09:39.097
> 
> 标签：php, mysql, html, wordpress

我有显示来自 WordPress 数据库的所有帖子的 PHP 脚本。然后该脚本获取作者的用户 ID 并在数据库的用户表中查询它以找出他们的显示名称。**但是，这目前仅适用于第一个结果。为什么是这样？**

```
<?

mysql_connect('localhost','username','password');
mysql_select_db('database');

$result=mysql_query("SELECT * FROM wp_posts WHERE post_type='post'");
while($row=mysql_fetch_array($result)){
echo'<p><h3>'.$row[post_title].'</h3><br>';

$user=mysql_query("SELECT * FROM wp_users WHERE ID='$row[post_author]'");
while($u=mysql_fetch_array($user)){
echo $u[display_name];
}
echo' </p>';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:15:18.180

你为什么不改变你的查询

```
Select users.display_name, posts.post_title 
FROM wp_posts posts 
inner join wp_users users on posts.post_author = users.ID
where posts.post_type = 'post'; 
```

这将摆脱大量的数据库调用。除了第一个结果之外，究竟什么对任何结果都不起作用？您确定 wp_posts 表中有超过 1 个帖子吗？

# java - 使用 Class.getResourcesAsStream 获取 Apache Commons 配置

> ID：12609588
> 
> 赞同：1
> 
> 时间：2012-09-26T20:09:43.893
> 
> 标签：java, class, configuration, apache-commons

填充`java.util.Properties`对象的理想方法似乎是使用一些变体

```
properties.load(ClassLoader.getSystemClassLoader().getResourcesAsStream(String className)); 
```

一个重要的想法是指向`Properties.load`一个类的 InputStream，而不是一个路径。

如何做到这一点`org.apache.commons.configuration.Configuration`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:25:08.433

如果您向它们`org.apache.commons.configuration.PropertiesConfiguration`传递一个. 他们在内部使用 API来尝试在[用户主目录、当前类路径和系统类路径](https://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/ConfigurationUtils.html#locate%28java.lang.String%29)中查找资源。`org.apache.commons.configuration.XMLPropertiesConfiguration``String``org.apache.commons.configuration.ConfigurationUtils`

顺便说一句，当您试图找出从类路径加载属性文件时要使用的“正确”类加载器时，您可能会发现[这篇文章很有用。](http://www.javaworld.com/javaworld/javaqa/2003-06/01-qa-0606-load.html)

# excel - 无法在 vba 中重命名工作表

> ID：12609589
> 
> 赞同：0
> 
> 时间：2012-09-26T20:09:45.903
> 
> 标签：excel, vba

我正在制作一个简单的脚本，从不同的工作簿中取出一堆工作表并将它们放在一个工作簿上。我必须重命名所有工作表，以便它们与我拥有的其他脚本一起使用。除了我从 eod 循环中获得的工作表之外，所有工作表都被重命名了。前两张纸被重命名得很好，但之后循环中的一张都没有。来自 eod 表的所有工作簿都是 xlsx 格式，其余的是 xls 格式。宏完成后，我放入的每张 xls 表格都会关闭，但所有 xlsx 格式文件都不会。我不知道这是否是问题的一部分。什么会导致这只重命名某些工作表？

```
 Sub getSheets()
        num = 1
 ----->   ' loop for eod 
        Do Until copyover("Weekly", "EOD Week " & num) = False
            num = num + 1
        Loop

        temp = copyover("Voice_of_the_Customer", "VOC")
        temp = copyover("Daily_Cp%_v2", "COMP")
        temp = copyover("MPJ-Scorecard-QC-Summary", "QC")
        temp = copyover("MPJ-Scorecard-SCOI-Summary", "SCOI")
        temp = copyover("TechUpstreamTransmit", "UPSQ")
        temp = copyover("Daily_CCG_OTG", "MTF")
        temp = copyover("summary", "S7 QC")
        temp = copyover("MPJ-Scorecard-TCF-Summary", "TCF")

    End Sub

Function copyover(SheetAd As String, SheetName As String) As Boolean

    Dim origWork As Workbook
    Dim fileName As String
    Dim copytoFile As Variant
    Dim copytoFile2 As Workbook
    Set origWork = ActiveWorkbook

    tem = MsgBox("Do you want to add " & SheetName, vbYesNoCancel)
    If (tem = vbYes) Then
        copyover = True
        On Error GoTo ErrHandler
        copytoFile = Application.GetOpenFilename _
        (Title:=SheetAd, _
        FileFilter:="Excel Files *.x* (*.x*),")
        Workbooks.Open copytoFile
        Set copytoFile2 = ActiveWorkbook
        copytoFile2.Sheets(SheetAd).Move After:=origWork.Sheets("TechScore")
        'ActiveSheet.Name = SheetName
        origWork.Activate
        origWork.Sheets(SheetAd).Name = SheetName
        'ThisWorkbook.VBProject.VBComponents(SheetAd).Name = "Mudface"
         Workbooks(copytoFile).Close False
    Else
    If (tem = vbNo) Then
          copyover = False
    End If
    End If

ErrHandler:

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:32:13.373

这对我来说很难理解。看起来你的编码方式相当危险。origWork 从未初始化。如果您将“选项显式”放在模块/工作表代码中的所有代码之上，它可能会对您有所帮助。我认为你的部分工作基本上是在某个地方迷失在记忆中，并且永远不会在你认为的地方结束。尝试在某些关键行添加断点并检查正在引用哪些工作簿。这是关于 VBA 的一件非常非常好的事情，因为您可以在它运行时调试/编辑变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T18:31:09.217

如果您只想重命名具有特定名称的某些工作表，我已经制作了几个宏来快速完成此操作：

宏 1

```
Sub Sheetlist()
Dim x As Integer

Sheets.Add After:=ActiveSheet
ActiveSheet.Name = "sheetlist"
Range("A1").Select
ActiveCell.FormulaR1C1 = "Sheet List"
Range("C1").Select
ActiveCell.FormulaR1C1 = "New List"
For x = 1 To Worksheets.Count
Cells(x + 1, 1).Value = Worksheets(x).Name
Next x
End Sub 
```

这将在您的工作簿中创建一个名为 sheetlist 的工作表，该工作表将列出当前工作簿中的所有工作表。您可以消除任何不想用下一个宏重命名的工作表名称，但要确保没有空格。

有一个标题为“新列表”(C) 的列，您可以在其中放置要调用工作表的名称列表。确保此工作表具有与 A 列相同数量的名称。

宏 2：

```
Sub batchrename()
'
' batchrename Macro
'
Dim OldSheetName As String
Dim NewSheetName As String
Dim SheetCount As Integer
Dim NewSheetList As String

NewSheetList = InputBox("How many names are there?") + 1
For SheetCount = 1 To Range("C2:C" & NewSheetList).Count
OldSheetName = Sheets("sheetlist").Cells(SheetCount + 1, 1)
NewSheetName = Sheets("sheetlist").Cells(SheetCount + 1, 3)

Sheets(OldSheetName).Select
ActiveSheet.Name = NewSheetName
Next SheetCount

End Sub 
```

这会将工作表从 A 重命名为 C 中的名称。提示将询问您名称列表在哪里，输入新名称列表的完整范围（例如：C2:C250），然后按 Enter。

希望这可以帮助，

# javascript - 如何更新 knockoutjs 可观察数组项

> ID：12609597
> 
> 赞同：2
> 
> 时间：2012-09-26T20:10:31.287
> 
> 标签：javascript, knockout.js

我有一个带有可观察用户对象数组的视图模型设置。项目的添加/删除工作正常，但如何更新项目？我可以使用 ko indexOf 函数找到值。

```
function User( username, date_inactive, date_active ) {
    this.username = username;
    this.date_active = date_active;
    this.date_inactive = date_inactive;
};  

User.prototype.inactivateMe = function() {
    json_responses.push( this );
    $.getJSON( "url" + this.username, function( json ) {
        original = json_response.pop();
        //do update here
    });
};

userModel = [  ], //Where the loaded usernames are stored. 

viewUserModel = {
    users: ko.observableArray(userModel)
    //.......

    //This is how I'm adding users to the array.
addUser: function () {
    $.getJSON( "url", 
    { username: usern }, 
        function( json ) { 
            if( json.STATUS != undefined && json.STATUS == 'success' ) {
                newuser = new User( json.USERNAME, json.DATE_ACTIVE, json.DATE_INACTIVE  );
                viewUserModel.users.push( newuser );            
            }
        }
    });
    } 
```

viewUserModel.users 的值从服务器 json 响应推送到数组中。

当用户单击按钮并且服务器响应成功时，我希望能够更新 date_active 和 date_inactive 值。

我的设置是改编自[http://net.tutsplus.com/tutorials/javascript-ajax/into-the-ring-with-knockout-js-the-title-fight/](http://net.tutsplus.com/tutorials/javascript-ajax/into-the-ring-with-knockout-js-the-title-fight/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:18:43.103

可观察数组仅跟踪对数组所做的更改（例如推送和弹出），而不是数据本身。您将需要按照@Ianzz 指定的方式进行制作`date-active`和观察。`date_inactive`

```
function User( username, date_inactive, date_active ) {
    this.username = username;
    this.date_active = ko.observable(date_active);
    this.date_inactive = ko.observable(date_inactive);
}; 
```

然后在你的html中，做一些事情，比如

```
<div data-bind="foreach: Users">
    <input data-bind="value: date_active"/>
    <input data-bind="value: date_inactive"/>
<div>​ 
```

有关完整示例，请参见[小提琴](http://jsfiddle.net/Rynan/CF8r4/)。

# android - 服务实现模式

> ID：12609598
> 
> 赞同：0
> 
> 时间：2012-09-26T20:10:40.690
> 
> 标签：android, web-services, service

好的，我有这个应用程序需要定期向 Web 服务发送更新，我已经进行了大量研究，并且提出了两种服务实现模式。

1.  使用线程实现服务，周期性更新时间可能会有所不同，因此我将让线程以所需的时间间隔休眠，然后再次调用 Web 服务。我还需要更新活动，因此将使用广播接收器或信使。

2.  使用带有调度计时器/警报管理器的服务，唤醒系统并使用与广播接收器耦合的意图服务。

哪个是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:35:18.693

我想我会选择 #2 选项：

1.  创建一个`IntentService`进行更新。
2.  `BroadcastReceiver`用`IntentFilter`(s)注册 a并`IntentService`从它开始。
3.  `AlarmManager`以`Broadcast`所需的时间间隔使用已注册的操作。

我更喜欢这种方法，因为：

1.  这是一种非常灵活的模式：您可以随时通过注册相同的接收器来执行不同的操作（如网络连接更改、系统启动更改等）来启动服务，
2.  它使逻辑与应用程序的其他部分保持松散耦合。
3.  管理线程没有麻烦。您可以通过使用免费获得它`IntentService`
4.  这是解决这个问题的更多安卓方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:32:33.790

主要区别在于用户可以关闭后台服务，然后您将不再获得任何更新。如果您向 AlarmManager 注册事件，那么您可以控制这些事件何时/是否发生。如果用户关闭您的应用程序并进入任务管理器并关闭与您的应用程序相关的任何正在运行的服务，AlarmManager 仍将唤醒并发送您的 BroadcastReceiver 将接收的消息。

# visual-studio - 在visual studio的“BUILD EVENTS”中启动一个进程

> ID：12609599
> 
> 赞同：1
> 
> 时间：2012-09-26T20:10:43.470
> 
> 标签：visual-studio

有谁知道如何在“构建事件”视觉工作室中启动一个过程？例如

```
TASKKILL /FI "IMAGENAME eq notepad.exe" /F
sleep 3
if $(ConfigurationName)==Debug @echo do some stuff of building and copyng dll files build 
C:\notepad.exe 
```

在最后一行，它卡住了，无法完成构建 dll。我尝试添加像 linux shell 这样的 & 来运行该过程，但我没有任何成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:10:07.020

[http://ss64.com/nt/start.html](http://ss64.com/nt/start.html)

这个“开始”命令看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:03:21.107

如果您希望在启动的应用程序仍在运行时完成构建后事件，您可以使用[cmdow](https://ritchielawrence.github.io/cmdow/)：

```
C:\Tools\cmdow.exe /Run C:\Windows\notepad.exe 
```

`C:\Tools\`您将可执行文件提取到的路径在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T06:39:20.847

您可以通过在外部脚本文件中运行构建事件来做到这一点。*

例如，将此添加到 Post-build 事件：

```
powershell.exe -file "$(ProjectDir)Build\Post-build.ps1" -ConfigurationName "$(ConfigurationName)" -PlatformName "$(PlatformName)" -TargetDir "$(TargetDir)" 
```

并在项目目录下创建此文件：

**构建\构建后.ps1**

```
param(
    [string]$ConfigurationName,
    [string]$PlatformName,
    [string]$TargetDir
)

#[void][Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
#[void][System.Windows.Forms.MessageBox]::Show("It works.")

Get-Process Notepad | kill
Start-Sleep -seconds 1
if ($ConfigurationName -eq 'Debug')
{
    # Run some debug configuration tasks
}

Start-Process C:\notepad.exe 
```

[*取自[这个](https://stackoverflow.com/a/6501719/450913)答案并进行了一些修改。]

# javascript - 当我悬停一个 li 时如何更改 div

> ID：12609600
> 
> 赞同：1
> 
> 时间：2012-09-26T20:10:45.797
> 
> 标签：javascript, jquery, html, css

**我的本意**

当我`hover`超过一个`li`时，`#featuredThumbs li`我想交换`div`下`#productText`

我怎样才能做到这一点？我想为 和 添加一个活动`li`状态`div`。我还希望它在页面加载时自动启动。

[这是我的 jsFiddle 文件](http://jsfiddle.net/breezy/DKTWz/)

**JS**

```
 $("#featuredThumbs li").hover( function() {
          $(".active").removeClass("active");
          $(this).addClass("active");
});​ 
```

**HTML**

```
<div id="container">
  <h2>Lorem ipsum!</h2>
  <div id="featuredProducts">
    <div id="productText">
      <div id="autoText" class="products">
        <h3>Auto Insurance</h3>
        <p>orem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea</p>
      </div>
      <!-- eo : products -->
      <div id="homeText" class="products">
        <h3>Auto Insurance</h3>
        <p>orem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea</p>
      </div>
      <!-- eo : products -->
      <div id="commercialText" class="products">
        <h3>Auto Insurance</h3>
        <p>orem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea</p>
      </div>
      <!-- eo : products -->
      <div id="lifeText" class="products">
        <h3>Auto Insurance</h3>
        <p>orem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea</p>
      </div>
      <!-- eo : products -->

    </div>
    <!-- eo: productText -->
    <ul id="featuredThumbs">
      <li id="autoProd"></li>
      <li id="homeProd"></li>
      <li id="commercialProd"></li>
      <li id="lifeProd"></li>
    </ul>
  </div>
  <!-- eo : featuredProducts -->

</div>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:23:36.703

试试这个

```
 $("#featuredThumbs li").hover( 
     function(){
           $(this).addClass("active");
           $(this).append($('#'+$(this).attr('id').replace('Prod','Text')).html());
         },
     function(){
           $(".active").removeClass("active");
           $(this).html("");
        }
     );​ 
```

[演示](http://jsfiddle.net/abaksheyev/b6seS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:25:56.673

你可以这样做：

```
// activate first item
$("#productText .products:first").show().siblings().hide(); 
$("#featuredThumbs li:first").addClass("active");

// set hover handler
$("#featuredThumbs li").hover( function() {
    $(".active").removeClass("active");
    $(this).addClass("active");

    // find div id based on li id
    var liId = $(this).attr('id');
    var liIdParts =  liId.split("-");
    var divId = liIdParts[0] + "Text";

    $("#" + divId)
        .addClass("active")
        .show()
        .siblings()
        .removeClass("active")
        .hide();    
});​ 
```

[演示](http://jsfiddle.net/DKTWz/2/)

**更新：自动切换**

[演示](http://jsfiddle.net/DKTWz/3/)

```
var nextLi;
var autoSwitch = setInterval(function(){
    var firstLi = $("#featuredThumbs li:first");

    if(nextLi == undefined){
        nextLi = firstLi;
    }else{
        nextLi = nextLi.next("li");
        nextLi = (nextLi.length == 0) ? firstLi : nextLi;
    }  
    switchToDivForLi(nextLi);    
}, 3000);

$("#productText .products:first").show().siblings().hide(); 
$("#featuredThumbs li:first").addClass("active");

$("#featuredThumbs li").hover( function() {
    switchToDivForLi($(this));

    if(autoSwitch != undefined){
        clearInterval(autoSwitch);  
    }        
});

function switchToDivForLi(liElement){
    $(".active").removeClass("active");
        liElement.addClass("active");

        var liId = liElement.attr('id');
        $("#" + liId.replace("Prod", "Text"))
            .addClass("active")
            .show()
            .siblings()
            .removeClass("active")
            .hide(); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:26:56.620

我认为，这可能会对您有所帮助：

CSS：

```
.products { display:none; }
.products.active { display:block; } 
```

JS：

```
$("#featuredThumbs li").hover( function() {
    $(".active").removeClass("active");
    var textid = this.id.replace("Prod", "Text");
    $(this).addClass("active");
    $("#" + textid).addClass("active");
});​ 
```

只要 li 元素的 id 以“Prod”结尾并且匹配的文本以“Text”结尾，这将起作用。我还将类添加`active`到第一个 div。

[http://jsfiddle.net/KfEuL/](http://jsfiddle.net/KfEuL/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T20:28:19.820

这是你要找的吗？

```
$(function() {
    $("#featuredThumbs li").hover( function() {
          $(".active").removeClass("active");
          $(this).addClass("active");
          $('.products').hide();
          $('#' + this.id.replace('Prod','Text')).show()
    });
});​​ 
```

不要忘记更改产品 div 的标题，以便区分它们（现在它们都说“汽车保险”）。我还将它添加到 css 中：

```
.products { display: none; } 
```

* * *

为了让它自动循环，这是完整的代码：

```
var intervalLen = 1000; //milliseconds 
$(function() {
    $("#featuredThumbs li").mouseover( function() {
          $(".active").removeClass("active");
          $(this).addClass("active");
          $('.products').hide();
          $('#' + this.id.replace('Prod','Text')).show();

          clearInterval(interval);
    });

    $("#featuredThumbs li").mouseout(function() {
        interval = setInterval(showNext,intervalLen);
    });
});

function showNext() {
    var visible = $('div', $('#productText')).not(':hidden');
    var next = visible.next('.products'); 
    if(next.length == 0) {
        next = $('div:first-child', $('#productText'));
    }
    visible.hide();
    next.show();
}

var interval;
​$(function() {
    interval = setInterval(showNext,intervalLen);
}); 
```

额外的 CSS 行更改为：

```
.products:not(:first-child) { display: none; } 
```

当用户将鼠标悬停在一个项目上时，它不会循环，因为 onmouseover 事件会停止间隔并且 onmouseout 会重新启动它。您可以通过更改来更改循环的速度`intervalLen`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T20:16:14.913

你的意思是这样的吗？

```
document.getElementById('featuredThumbs').onmouseover = function() {
  document.getElementById('productText').innerHTML = 'swap';
} 
```

# php - 致命错误 Joomla+Cron+Smart Search+Acepolls

> ID：12609602
> 
> 赞同：2
> 
> 时间：2012-09-26T20:10:54.853
> 
> 标签：php, joomla, ssh, cron

我尝试使用智能搜索模块在 Joomla 中设置自动重新索引内容。

[http://docs.joomla.org/Setting_up_automatic_Smart_Search_indexing](http://docs.joomla.org/Setting_up_automatic_Smart_Search_indexing)

Joomla 2.5.3

当我通过 ssh 登录到服务器并运行脚本时，我遇到了一个致命错误......并保存了一些帖子（搜索索引结果在 8 页上）。

有人知道如何解决这个问题吗？

```
* Processed batch 1 in 0.213 seconds.
* Processed batch 2 in 0.182 seconds.
* Processed batch 3 in 0.177 seconds.
* Processed batch 4 in 0.009 seconds.

PHP Fatal error: Class 'JModuleHelper' not found in / var / wolq.ru / plugins / content / acepolls / acepolls.php on line 41
Fatal error: Class 'JModuleHelper' not found in / var / wolq.ru / plugins / content / acepolls / acepolls.php on line 41 
```

acepolls.php 中的 41-42 行：

```
$module = JModuleHelper::getModule('mod_acepolls');
$content = self::_renderModule($module, array(), $id); 
```

如果我从网络界面运行重新索引 - 它运行成功并将搜索索引结果保存在 26 页上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:17:45.717

我没有得到 mod_acepolls 的源代码，所以我不是 100% 的，但无论如何：

[通常，当通过 Web 界面运行 Joomla 时，Joomla 使用JDocumentHTML](http://docs.joomla.org/JDocumentHTML/11.1)类构建其网页。问题是定义[JDocumentHTML](http://docs.joomla.org/JDocumentHTML/11.1)的文件也导入了[JModuleHelper](http://docs.joomla.org/JModuleHelper/11.1)。所以当 mod_acepolls 通过 web 界面运行时，[JModuleHelper](http://docs.joomla.org/JModuleHelper/11.1)已经被导入。

最简单的解决方案是在*finder_indexer.php*（我猜你使用 CLI/Cron 运行的文件）中导入[JModuleHelper 。](http://docs.joomla.org/JModuleHelper/11.1)找到已经进行了一些导入的行（大约第 45 行）并插入以下内容：

 *```
jimport('joomla.application.module.helper'); 
```

重要的是要记住，如果您升级网站，这可能会中断。*

# django - django 剩余元素被截断

> ID：12609604
> 
> 赞同：9
> 
> 时间：2012-09-26T20:11:09.290
> 
> 标签：django, list

我是 django 的新手，我想获取 name 字段包含“John”的 id。下面的代码段运行得很好，但是，

在视图.py

```
 all_ids=Employee.objects.filter(name__contains = 'John').values('id')
    return HttpResponse(" All id= %d " %all_ids) 
```

它返回：

```
 All id=[{'id': 1},{'id':2} , so on  '...(remaining elements truncated)...'] 
```

显示 20 个项目有限制。那么，我怎样才能摆脱这个限制和（剩余元素被截断）？有没有更好的方法来获取查询中字段的所有值而不被截断？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T20:34:45.433

一种覆盖它的方法是

```
all_ids= list(Employee.objects.filter(name__contains = 'John').values('id')) 
```

# c# - 使用 Visual Studio 设计器将 TableLayoutPanel 中的 Windows 窗体控件居中

> ID：12609609
> 
> 赞同：12
> 
> 时间：2012-09-26T20:11:30.700
> 
> 标签：c#, .net, winforms, windows-forms-designer

我将控件容器紧密绑定到用户控件的边缘，在所述用户控件的两侧均匀分布（子控件始终位于父控件的中心）。使用设计器，我试图添加这些跨越`TableLayoutPanel`. 我单击控件容器并单击“布局”工具栏上的“水平居中”按钮。控件不会居中。

为什么？如何轻松居中控制？

我遇到的问题与文档[如何：对齐和拉伸 TableLayoutPanel 控件中的控件不一致](http://msdn.microsoft.com/en-us/library/ms171688%28v=vs.110%29.aspx)

问题控制是 5 个按钮，它们应该位于所示的 2 个跨栏的中心：

按钮紧密绑定到控制边缘： ![控制布局](../Images/8411f85a7eb9594289c9e99a30520642.png)

**新图像**显示在可疑控制中正确设置为“左、右”的锚点![显示锚点的新图像](../Images/326c4c7c68e5f62b4001fbd34f47ff8c.png)

**显示锚点设置为“无”的**新图像**![锚点设置为](../Images/32a2641af8fd0699b234c5679af3af0b.png)**

 *** * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-27T15:16:41.650

尝试将 Anchor 属性设置为 None：

```
dataMasterControl1.Anchor = AnchorStyles.None; 
```

它应该从包含控件的 TableLayoutPanel 单元格中居中。您可能需要调整 UserControl 本身的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:01:57.957

我知道这不是一个完整的答案，但您是否尝试过调整行、列和单元格的大小？如果您发布屏幕截图会有所帮助吗？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel(v=vs.80).aspx)**

# filepicker.io - Filepicker.io - 防止视频上传的图像转换

> ID：12609610
> 
> 赞同：5
> 
> 时间：2012-09-26T20:11:33.293
> 
> 标签：filepicker.io

我们目前正在与 Filepicker.io 合作，以允许用户上传图像和视频。看来，如果我们在 Javascript API 选项中指定图像转换，则视频上传不会处理，而是卡在 99.30%。如果我删除“转换”选项，视频上传过程不会出现问题。是否可以指定图像转换选项并接受两种类型的上传？如果是这样，这确实应该在文档中指定。

我附加了一个带有相关代码的 JSFiddle。[http://jsfiddle.net/BYkD4/](http://jsfiddle.net/BYkD4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T00:20:13.847

这可能是我们这边的问题，现在看看。对于大文件（+1Mb），我们将文件分割成块，并行上传，然后在服务器端重新组合它们。我们使用浏览器进度达到 90% 标记，之后我们必须“最好地猜测”服务器端进度的样子，至少现在是这样。这就是它挂在 99.30% 的原因——如果你给它足够的时间，它实际上可能能够完成。

无论如何，调查一下

编辑：看起来这是我们的问题。修复部署，一切都应该工作正常。抱歉这个问题

# objective-c - 使用 Core Data 区分 UITableViewCells

> ID：12609614
> 
> 赞同：0
> 
> 时间：2012-09-26T20:12:11.303
> 
> 标签：objective-c, core-data, uitableview, many-to-many

我有两个实体，Note 和 Tag，它们具有多对多的关系。我希望能够点击注释并拥有一个 UITableView，其中填充了所有存在的标签，并且所有与被点击的注释有关系的标签在右侧都有一个 UITableViewCellAccessoryCheckmark。

我尝试做的是获取两个数组，包含所有标签的数组和包含相关标签的数组。然后我做了这样的事情：

```
 for (int i = 0; i < [self.tagArray count]; i++) {
    Tag *new = [self.tagArray objectAtIndex:i];
    if ([self.all containsObject: new])
    {
        new.isIn = TRUE;
    }
    else {
        new.isIn = FALSE;
    }

} 
```

isIn 是 Tag 的一个属性，初始化如下：

在 Tag.h 中：

```
@property BOOL isIn; 
```

在 Tag.m 中：

```
@synthesize isIn; 
```

我觉得这是错误的方法。谁能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:13:50.153

根据我的评论，如果您仍然显示所有标签，则无需预先检查标签是否应该有复选标记。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    // not going to go into basic cell generation logic here
    Tag *currentTag = [self.tagArray objectAtIndex:indexPath.row];
    if([self.all containsObject: currentTag])
    {
       // checkmark
    }
    else
    {
       // no checkmark
    }
    return cell;
} 
```

# mysql - Mysql按条件计数记录，选择多个字段

> ID：12609615
> 
> 赞同：0
> 
> 时间：2012-09-26T20:12:15.447
> 
> 标签：mysql, count, case

我尝试使用计数案例来计算某个列（runs.Finish）中的记录（如果它们等于一个）。

当我像下面第三行那样添加计数案例时，我似乎无法让它工作。

```
SELECT
  `jockeys`.`JockeyInitials`,
  `jockeys`.`JockeySurName` ,
  COUNT(  `runs`.`JockeysID` ), 
  COUNT( CASE WHEN `runs`.`Finish`=1 THEN 1 ELSE NULL END ) AS `runs`.`Finish` , 
  SUM(  `runs`.`StakeWon` ) 
FROM runs, jockeys
WHERE  `runs`.`JockeysID` =  `jockeys`.`JockeysID` 
  AND  `runs`.`JockeysID` >=1
  AND  `runs`.`JockeysID` <=100
GROUP BY  `runs`.`JockeysID` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:16:16.983

您的查询应该是（按列检查分组和案例语句列的别名）

```
SELECT
  `jockeys`.`JockeyInitials`,
  `jockeys`.`JockeySurName` ,
  COUNT(  `runs`.`JockeysID` ), 
  COUNT( CASE WHEN `runs`.`Finish`=1 THEN 1 ELSE NULL END ) AS `Finish` , 
  SUM(  `runs`.`StakeWon` ) 
FROM runs, jockeys
WHERE  `runs`.`JockeysID` =  `jockeys`.`JockeysID` 
  AND  `runs`.`JockeysID` >=1
  AND  `runs`.`JockeysID` <=100
GROUP BY  `jockeys`.`JockeyInitials`,
  `jockeys`.`JockeySurName` 
```

# c# - ServiceStack JSON 根名称

> ID：12609619
> 
> 赞同：1
> 
> 时间：2012-09-26T20:13:03.540
> 
> 标签：c#, json, servicestack

我已经使用 ServiceStack 启动并运行了一个 REST hello world 服务。

它当前从如下所示的测试对象返回 JSON：

```
{"Name":"Value"} 
```

对象很简单：

```
public class TestResponse { public string Name { get; set; } } 
```

有谁可以装饰类以强制在 JSON 中使用根名称，使其看起来像这样：

```
 { root:{"Name":"Value"} } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:26:00.393

返回的 JSON 与您填充的 ​​DTO 的确切形状相匹配（即首先是 DTO 的角色）。因此，您应该更改 DTO 以表示您想要的确切形状，例如

```
public class TestResponse {
    public TestRoot Root { get; set; }
}
public class TestRoot {
    public string Name { get; set; }
} 
```

然后您可以按预期返回它：

```
return new TestResponse { Root = new TestRoot { Name = "Value" } }; 
```

或者，如果您愿意，也可以使用字典：

```
public class TestResponse {
    public TestResponse() {
       this.Root = new Dictionary<string,string>();
    }
    public Dictionary<string,string> Root { get; set; }
} 
```

并返回：

```
return new TestResponse { Root = { { "Name", "Value" } } }; 
```

# ms-access - 将自动递增的主键插入 Access 表

> ID：12609621
> 
> 赞同：7
> 
> 时间：2012-09-26T20:13:18.420
> 
> 标签：ms-access, primary-key

我们在 Access 数据库中有一个包含超过 50 万条记录且没有 PK 的巨型表。是否可以将自动递增的主键列插入到已经存在的 Access 表中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T20:14:15.127

是的，可以通过编辑表格并添加自动增量类型字段非常简单地完成。唯一的规则是每个表只能有一个自动增量。

![自动递增](../Images/63cc21ac2eed52a060fea49ca49503f0.png)

# objective-c - 从在线导入代码

> ID：12609623
> 
> 赞同：0
> 
> 时间：2012-09-26T20:13:29.820
> 
> 标签：objective-c, import

我知道这是一个牵强附会的问题。

但是是否可以从在线导入代码，比如我的网站服务器上有一个 .h 和 .m 文件，并且在我想使用的代码中我可以导入它吗？如何？

我问这个是因为如果他们需要做的只是重新加载应用程序并且应用程序更改为最新版本，它可以更轻松地更新应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:39:11.937

如果您正在谈论 Mac OS X 应用程序，那么*是*的，这是可能的。无需共享您的源代码，只需在服务器上编译并让应用程序下载新的二进制文件。

但是，如果您的应用程序需要通过 iOS 应用程序所必需的 App Store，那么这肯定是*不可能*的。您唯一能做的就是尽可能简化提交过程（[请参阅此问题](https://stackoverflow.com/questions/2005517/automating-iphone-app-submission-process)）。

如果您喜欢能够随时推送新代码的想法，请考虑制作一个 Web 应用程序。这些天你可以做很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:24:29.340

我不是 100%（可能是 95%）确定，但我认为在线存储 objc 代码以使其自动升级是不可能的，因为应用程序无法自行重建。

但是，如果您愿意，您可以做一个通用应用程序，首先获取在线存储的 XML/plist（例如）以检索数据，然后应用程序设置为读取它并根据它呈现不同的行为，但您必须对其进行编码以前以通用方式支持动态更改。

希望这可以帮助。

# django - 如何在文本上执行 Django 聚合函数

> ID：12609626
> 
> 赞同：2
> 
> 时间：2012-09-26T20:13:40.450
> 
> 标签：django, join, model, aggregate

我有一个如下所示的模型：

```
class Loves(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    user_name = models.CharField(max_length=200) 
```

模型中的数据如下所示：

民意调查choice_text 用户

1个麦克

1 迈克

1个詹姆斯

2 詹姆斯

2 b 旋律

1 d 迈克

如何输出如下所示的列表：

用户元组
mike (1,a),(1,b),(1,d)
james (1,c), (2,a)
melody (2,b)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:59:22.403

```
collection={} 
for l in Loves.objects.all():
    if l.user_name in collection:
        collection[l.user_name].append((l.poll,l.choice_text))
    else:
        collection[l.user_name]=[(l.poll,l.choice_text)]
# and to turn it into a list just do
results_list=list(collection) 
```

# python - Python-计算熊猫系列中的字符串数

> ID：12609631
> 
> 赞同：0
> 
> 时间：2012-09-26T20:13:51.077
> 
> 标签：python, pandas

> **可能重复：**
> [pandas：单个变量的频率表](https://stackoverflow.com/questions/12207326/pandas-frequency-table-for-a-single-variable)

我正在寻找一个函数来计算数组中不同字符串的数量（它采用熊猫系列的格式）。我有这个循环，但需要更有效的东西。

```
from pandas import *
ser = Series(['a', 'a', 'b', 'b', 'b', 'c', 'c'])
def occuranceCount(ser):
    labels = []
    x = ''
    for i in range(len(ser)):
        if ser[i] != x:            
            labels.append(ser[i])
            x = ser[i]
    return labels

print len(occuranceCount(ser)) 
```

主要问题是计算我有多少不同的标签，但还需要知道特定标签在数组中出现了多少次。谢谢

# python - 在列表中搜索字符串

> ID：12609633
> 
> 赞同：0
> 
> 时间：2012-09-26T20:13:57.853
> 
> 标签：python, file-io

我有包含几行文本的文件。我在我的代码中以这种方式打开文件：

```
final = codecs.open("info", 'r', 'utf-8')
lines = final.readlines() 
```

然后我想找到确切的行：

```
if 'Edytuj'.join('\n') in lines:
#rest of code 
```

我知道该文件包含`'Edytuj'`但该语句始终`False`是，我在某处犯了错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:15:30.320

你看过什么`'Edytuj'.join('\n')`回报吗？（它会返回`'\n'`，因为您要加入长度为 1 的可迭代对象）。我猜这不是你的本意。

您究竟希望该测试做什么？

也许你的意思是：

```
if any('Edytuj' in line for line in lines):
   pass #... 
```

或者可能：

```
if 'Edytuj\n' in lines: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:24:45.963

```
with codecs.open("info", 'r', 'utf-8') as file:
    for line in file:
        if u'Edytuj\n' == line: # match full line
           #rest of code 
```

`if u'Edytuj' in line`如果该行中可能有其他内容，您可以使用。

# python-2.7 - Python path.exists() 返回 False

> ID：12609635
> 
> 赞同：22
> 
> 时间：2012-09-26T20:14:12.387
> 
> 标签：python-2.7, file

我正在构建一个基本文件服务器，但我的程序找不到文件。

```
def sendfile(sock, myfile):
    print 'Serving file:', myfile
    print 'File exists?:', os.path.exists(myfile)

    path = os.path.normpath(os.path.join(os.getcwd(), myfile))
    print 'Serving file:', path
    print 'File exists?:', os.path.exists(path) 
```

即使 'myfile' 和 'path' 是正确的 [文件与服务器程序位于同一目录中]，这些总是返回 False。

IDLE 工作正常，但没有传递给函数。

```
>>> print os.path.exists("/user/server/foo.txt")  
True 
```

我错过了什么？

[编辑：] 输出：

```
Serving file: foo.txt

File exists?: False
Serving file: /user/server/foo.txt

File exists?: False 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T20:30:42.930

在检查路径是否存在之前，我几乎 100% 确定您没有清理您的输入。这是我在解释器中运行的内容：

```
>>> from os.path import exists
>>> exists('dog.png')
True
>>> exists('dog.png\n')
False 
```

`path`在检查它是否存在之前尝试去除空格。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-08T23:13:39.310

如果您阅读[os.path.exists()](https://docs.python.org/dev/library/os.path.html#os.path.exists)的 Python 文档，它会说在某些特定情况下文件或文件夹存在但[os.path.exists()](https://docs.python.org/dev/library/os.path.html#os.path.exists)返回 false：

> 如果 path 引用现有路径或打开的文件描述符，则返回 True。对于损坏的符号链接返回 False。在某些平台上，如果未授予对请求的文件执行 os.stat() 的权限，即使路径物理存在，此函数也可能返回 False。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-23T22:44:39.597

没有直接回答这里所说的问题，但是当 os.path.exists() 一直给我“False”时，我发现了这个话题，即使在使用 strip() 或 os.path.join() 之后也是如此。就我而言，我使用 ~ (tylda) 指向主目录，如下所示：

```
fileName = "~/path/to/file.txt" 
```

解决此问题的最佳方法是使用**os.path.expanduser(fileName)**，然后检查文件是否存在。或者使用 os.path.abspath() 恢复绝对路径，然后从路径中删除“~”（但此解决方案不适用于所有情况）。

```
os.path.exists(os.path.abspath(fileName).replace("~","")) 
```

也许这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-02T13:13:55.703

正如在[这个答案](https://stackoverflow.com/a/12609889/12153948)中所说， 这主要发生在空白处。

我也遇到过这个问题。我花了很多时间才弄清楚这一点。

python 有一个称为`strip()`删除空格的函数。

如果变量`path_to_file`包含实际文件的路径，则尝试使用

```
if path.exists(path_to_file.strip())
        print("file exists")
else:
        print("file doesn't exist") 
```

这对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T20:23:45.870

这可能无法直接回答您的问题，但您可以使用“try/except”方法：如果文件不存在（特别是如果它是内置函数），则使用该文件的任何函数都应返回异常，并且您可以采取相应的行动。那么你就不用自己去检查文件是否存在了。危险的？也许吧，但这取决于你实际上想要做什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-26T03:34:02.267

如果由于空格而失败，老实说这应该被认为是一个错误。

我发现在某些情况下，结果会是虚假的，这取决于文件服务器的状态。这种情况不会一直发生，只会偶尔发生一次。

我发现至少有 10 秒的延迟，我可以避免失败。在这种情况下，我会反复打开 zip 存档以访问特定的压缩文件。在尝试打开它之前，它会检查路径是否存在（由于这个奇怪的问题，请尝试在下面使用）。如果它失败了，那么它会在一个循环中等待，延迟会增加。我发现它通常会在 4 个循环（10 秒延迟）后再次发现文件存在。

这是我的循环打印语句的输出：

```
Archive r:\ballotimagearchive\ca_san_francisco_2020_pri\d03.zip does not exist according to os.path.exists().
Waiting 1 seconds
Waiting 2 seconds
Waiting 3 seconds
Waiting 4 seconds
After wait of 10 secs, r:\ballotimagearchive\ca_san_francisco_2020_pri\d03.zip now exists according to os.path.exists(). 
```

以及产生这个的代码段。

```
 if os.path.isfile(source_path):
    print(f"Verified that {source_path} exists.")
else:
    print(f"Archive {source_path} does not exist according to os.path.exists().")

    # this may be a spurious problem related to using a file server.

    tot_time = 0
    for i in range(1,20):
        print(f"Waiting {i} seconds")
        time.sleep(i)
        tot_time += i 
        if os.path.isfile(source_path):
            print(f"After wait of {tot_time} secs, {source_path} now exists according to os.path.exists().")
            break
    else:
        print(f"After wait of {tot_time} secs, {source_path} still not found according to os.path.exists().")
        sys.exit(1) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-21T07:37:24.860

如果给定路径长于 256 个字符，os.path.exists 也会返回 false。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-29T14:55:45.343

我遇到了同样的问题，并找到了以下解决方案：

即使在 Windows 上使用操作系统的本机目录分隔符“\”或“/”，在所有场合使用正斜杠对我来说都很好。os.sep 可以提供帮助。

除此之外，清理路径字符串有点类似于：

```
import re
from os import path
strPath = "c:/dir1/dir2/dir3/dir4/important-file.ext"
strPath = re.escape(strPath)

bTest = os.access(strPath, os.F_OK)

# or the classic
bTest = path.exists(strPath)
print(bTest) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-24T07:47:51.623

我想使用`Downloads`ubuntu上文件夹中的文件，但是`os.path.exists`找不到使用绝对路径`~/Downloads/filename.txt`。

然后我`os.path.abspath('')`用来获取根路径`/home/yourPCname/`并替换`~`，它的工作原理！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-20T00:42:46.257

在我尝试添加 getcwd() 之前，我经常遇到这个问题，现在它永远不会失败

```
os.path.join(os.getcwd(), source_file) 
```

# c# - Azure SDK 已安装，但 Visual Studio 2012 看不到它

> ID：12609644
> 
> 赞同：9
> 
> 时间：2012-09-26T20:14:42.907
> 
> 标签：c#, visual-studio-2010, azure, visual-studio-2012

在云下，我只看到“Get Windows Azure SDK for .NET”，但我知道它已安装。安装程序会看到它。

我应该提一下，我已经安装了 2012 大小的 Visual Studio 2010。2010 具有所有项目类型并且效果很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-19T14:24:43.130

打开程序和功能，找到“Microsoft Visual Studio 20xx 的 Windows Azure 工具”（其中 xx 是您遇到问题的 Visual Studio 版本）

右键单击并选择修复。

修复完成后，重新打开 Visual Studio，搜索“云”的已安装模板，并应出现“Windows Azure 云服务”项目，确认问题已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T02:41:39.250

我有同样的问题。重新启动后，仍然无法识别 VS 2012 的 Azure SDK 2.1。当我右键单击时，我只有卸载或更改选项。我选择了卸载，然后弹出另一个窗口询问我是否要修复。我选择了修复，最后出现了 Windows Azure 云服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:33:21.503

几天前我遇到了类似的问题。VS10 和 VS12 都安装在 Win 7 机器上。而且 VC12 没有看到 azure，所以我按照 VS12 的步骤重新安装它，然后它仍然无法工作。

但是，在 VS12 和系统重新启动后，它确实有效。

# css - 为什么 IE10 不显示嵌套的 CSS3 3D 转换元素？

> ID：12609646
> 
> 赞同：7
> 
> 时间：2012-09-26T20:14:44.463
> 
> 标签：css, css-transforms, internet-explorer-10

我有点迷路了，我目前正在测试 Windows 8 Release Preview 附带的 IE10 (10.0.9200.16384)，我过得很艰难。困扰我的一件事是 IE 似乎不能正确处理嵌套的 3D 变换。请看这个小提琴：

[http://jsfiddle.net/uUHdF/1/](http://jsfiddle.net/uUHdF/1/)

有两个彩色的 div，一个红色的，一个绿色的 div 旋转和平移，以便它充当长方体的顶部，并且这个长方体本身也旋转和平移（请注意，我不能将 transform-origin 与旋转一起使用只是因为它在 Webkit 中是/曾经是错误的......以防万一这可能是可能修复的一部分）。它应该如下所示：

[![](../Images/10954417207b901f2dc156fd0d2432bc.png)](https://i.stack.imgur.com/EGMNR.png)

它在 Chrome 和 Firefox 中按预期工作，但在 IE10 中缺少绿色 div：

[![](../Images/8cd9d4c9cd3791ed75e360f5a54e399e.png)](https://i.stack.imgur.com/HJHXM.png)

有谁知道我是否遗漏了什么，或者它是否可能是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:17:38.767

IE10 不支持：

```
transform-style: preserve-3d; 
```

# c# - 观察 Visual Studio 2012 中的变量地址

> ID：12609649
> 
> 赞同：4
> 
> 时间：2012-09-26T20:14:52.823
> 
> 标签：c#, debugging, visual-studio-2012

我正在使用 VS 2012RC，并为教育目的编写了一些简单的 C# 方法。我目前正在学习 C#/.NET 如何与字符串一起工作，我想观察我的字符串变量的地址只是为了了解它们的行为，但是当我尝试使用断点进行调试时，我只得到变量的值而不是他们在内存中的地址。我很确定有一种方法可以在 VS 2012 中获取此信息，因此我正在寻找有关该主题的一些帮助。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T20:20:43.780

在某处放置断点。

可以选择为您的变量创建一个对象 ID。

打开你的记忆窗口。Ctrl+D,Y

在地址栏中输入您的变量名称或对象 ID。

享受。

# java - MVC 架构和模态对话框窗口

> ID：12609652
> 
> 赞同：3
> 
> 时间：2012-09-26T20:15:08.223
> 
> 标签：java, swing, model-view-controller, modal-dialog

我正在开发一个 MVC 架构中的项目。它应该是一个简单的应用程序来管理一些客户。

有 MainModel、MainView 和 MainController 类，它们使主窗口显示客户表的内容，并让用户插入、删除或编辑客户。

我的问题是插入和编辑按钮应该显示一些对话框窗口，让用户插入和编辑一些文本值，我有一些疑问。

我想问你几个问题：

*   我应该为每个对话窗口使用 MVC 架构吗？
*   如果是，我已经尝试过这样做，但我的对话框窗口是模态的，所以我的代码运行模型，运行视图，但它在视图中被阻止并且它不运行控制器类。我该如何解决？

    例如，它在“new InsertCustomerController ...”指令中被阻止：

    ```
     CustomerModel customerModel = new CustomerModel();
        InsertCustomerView insertCustomerView = new insertCustomerView(customerModel);
        new InsertCustomerController(insertCustomerView, customerModel); 
    ```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:38:59.130

无论使用何种模式，您都可以使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)来使您的对话与应用程序的模型保持同步。此[示例](https://stackoverflow.com/a/11832979/230513)使用`PropertyChangeListener`; [这里](https://stackoverflow.com/a/3072979/230513)提到了其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:27:35.223

尽管我无法从您的帖子中完全看出，但我不确定您是否以正确的方式考虑 MVC。但是，假设您有一个 Customer、CustomerView 和 CustomerController 类。

客户可以包含与成为客户相关的所有业务逻辑——因此它可能具有 setBalance(int newBalance)、getBalance() 等方法。

CustomerView 类本质上可以是 JPanel 或 JFrame 的子类（因为看起来您正在使用问题标签中的 Swing）。此类将代表一个客户实例。也许你可以有一个**私有的 Customer**类变量。此类的职责应仅包括向包含在其 Customer 实例中的用户显示数据以及允许他们对其进行修改。

很难说 CustomerController 会做什么，因为我对您的应用程序一无所知，但它可能包含 ActionListener 以及有助于将输入和输出路由到模型和视图的不同部分的那种东西。

我做了一些谷歌搜索，发现了一个非常简单的例子，你可能想看看：[http ://www.austintek.com/mvc/](http://www.austintek.com/mvc/)

祝你好运。希望这可以帮助。

# jquery - jquery自定义验证（addMethod）返回false不管

> ID：12609654
> 
> 赞同：0
> 
> 时间：2012-09-26T20:15:17.083
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

我在这个问题上撞墙了，所以我很感激这方面的任何帮助。我有一些我创建的验证方法指向一个 javascript 函数，如果电子邮件不是/当前在我们的成员表中，则返回 true/false。javascript 函数 (CheckEmail) 运行良好，控制器操作运行良好，但无论 CheckEmail 返回 true 还是 false，它总是评估为无效字段。请帮忙：

验证

```
 $.validator.addMethod("emailCheck", function (value, element) {
                return this.optional(element) || CheckEmail(value);
            }, "This email is already registered");

            Validator = $("#RegForm").validate({
                rules: {
                    Email: {
                        required: true,
                        email: true,
                        emailCheck: true
                    },
                    Password: {
                        required: true,
                        minlength: 6
                    },
                    ConfirmPassword: {
                        required: true,
                        equalTo: "#Password"
                    },
                    "UserObj.FirstName": {
                        required: true,
                        minlength: 2
                    },
                    "UserObj.LastName": {
                        required: true,
                        minlength: 2
                    }
                }

            }); 
```

javascript方法：

```
function CheckEmail(email) {
    $.getJSON("/account/jsonCheckEmail", { EmailToCheck: email }, function (data) {
        if (data.status = "OK") {
            if (data.msg = "True") {
                return true;
            }
            else {
                return false;
            }
        }
    });

} 
```

控制器动作：

```
public JsonNetResult jsonCheckEmail(string EmailToCheck)
{
    JsonNetResult jsonEmail = new JsonNetResult();
    jsonEmail.Formatting = Formatting.Indented;
    try
    {

        string user = Membership.GetUserNameByEmail(EmailToCheck);

        if (string.IsNullOrWhiteSpace(user))
        {
            jsonEmail.Data = new jsonResponseObj("True", "True");
        }
        else {
            jsonEmail.Data = new jsonResponseObj("False","False");
        }

    }
    catch (Exception ex)
    {
        jsonEmail.Data = new jsonResponseObj(ex);
        //jsonEmail.Data = new jsonResponseObj("False", "False");
    }

    return jsonEmail;
} 
```

HTML：

```
 <tr>
                    <td>@Html.LabelFor(m => m.Email)
                    </td>
                    <td>@Html.TextBoxFor(m => m.Email)
                        @Html.ValidationMessageFor(m => m.Email)
                    </td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:42:47.243

[您可以利用插件的远程](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)工具，而不是编写自己的 jQuery 处理程序：

```
Email: {
     required: true,
     email: true,
     remote: "/account/jsonCheckEmail"
}, 
```

# actionscript-3 - Adobe Flex：支持树形 UI 组件的树形数据结构？

> ID：12609658
> 
> 赞同：1
> 
> 时间：2012-09-26T20:15:39.657
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flash-builder

我目前正在使用 ArrayCollection 来定义树节点的设备树。我更喜欢使用由自定义对象组成的实际树数据类型（每个对象定义如何呈现自己，它们的右键菜单等）并让树显示它。谁能建议如何实现这一目标？

谢谢你，弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T20:31:43.720

如果您打算在 mx 树上进行大量定制。您最终会为简单的事情编写大量工作解决方案。mx 树组件有已知的错误......从未解决。

更好的方法是创建...您自己的基于火花的树组件，土星男孩有一个很好的例子@ [http://saturnboy.com/2011/09/spark-treelist/](http://saturnboy.com/2011/09/spark-treelist/)

# c++ - 在 boost::asio 中启动异步操作和运行 io_service 的正确顺序？

> ID：12609659
> 
> 赞同：0
> 
> 时间：2012-09-26T20:15:43.067
> 
> 标签：c++, asynchronous, boost-asio

我试图了解启动 io_service`io_service::run()`与我的应用程序中的第一个异步操作的正确顺序，例如，`async_accept`. 大多数 boost 示例似乎首先执行后者，不知道为什么。

[boost 文档说明](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/overview/core/basics.html)了以下几点：

> 您的程序必须调用 io_service::run() 才能检索结果。当有未完成的异步操作时，对 io_service::run() 的调用会阻塞，因此您通常会在开始第一个异步操作后立即调用它。

我从图中了解到，异步操作的结果通过队列传递给 io_service，除非 io_service 已经在运行，否则它不会从该队列中获取结果。所以说 io_service 应该总是首先启动是不是正确的。该文档似乎另有暗示。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:18:51.600

像这样的异步操作`async_accept`将在操作系统中启动异步任务，这会将结果（一旦可用）放入`io_service`的事件队列中。

`io_service::run`将轮询队列以获取结果并调用传递这些结果的处理程序。

当您没有异步任务时，没有要获取的结果，`io_service`也没有可能产生任何结果的未*完成工作*，所以它只是返回。

所以，你想要的顺序是：

*   启动至少一个异步任务
*   调用`io_service::run`发起轮询

您甚至可以启动单个异步任务，该任务可能会启动整个任务*链*，并且永远不会`io_service`耗尽工作要做。

# c - 64 位算术在 32 位应用程序中提供错误输出

> ID：12609660
> 
> 赞同：1
> 
> 时间：2012-09-26T20:15:57.293
> 
> 标签：c, operating-system, cross-compiling, powerpc, endianness

我不明白为什么以下相同的操作会报告两个不同的输出。当我的 num 被声明为负值并将 num 添加到 baseAddr 时，我看到我的 addr 超出了 32 位范围。另一方面，如果我将 num 声明为正值并进行减法，我确实看到了正确的结果。即我的结果输出被准确报告。有人可以解释一下下面的计算有什么问题吗？

```
/* Architecture is powerpc. Program cross-compiled for powerpc. Gcc Version- 4.6.2 */
#include <stdio.h>
typedef unsigned long long u_int64;
typedef unsigned long u_int32;

int main() {
   u_int64 baseAddr = 0x8e008128;
   u_int32 num = -360;
   u_int64 addr = baseAddr + num;
   printf("\nAddr 1st step = 0x%llx\n", addr);

   /* Same operation, but slightly different */
   num = 360;
   addr = baseAddr - num;
   printf("\nAddr 2nd step = 0x%llx\n", addr);
   return 0;
}

/* Output:
Addr printed is 0x18e007fc0, but I need just 0x8e007fc0
/diagsk10copy/bin # ./e500GPR

Addr 1st step = 0x18e007fc0 //Wrong
Addr 2nd step = 0x8e007fc0
*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:17:54.640

`u_int32`是无符号类型；将 -360 分配给它会导致整数溢出并导致`num`持有一个非常大的正值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:30:11.503

`u_int32`未签名。您分配给它的负数`360`将被重新解释为正数 32 位数字。当您将它添加到 时`u_int64`，该值**将扩展为 32 个零**以匹配另一个操作数的大小。这不是您想要的：由于该数字是负数，因此您需要上半部分的所有数字，以便在加法结果以比最大值大 1 的数字为模减少后，加法产生所需的效果可以用`u_int64`^*表示。

如果您声明`num`as `u_int64`，则第一部分和第二部分会产生预期的数字（[ideone 上](http://ideone.com/MOWO3)的演示）。

```
u_int64 baseAddr = 0x8e008128;
u_int64 num = -360;
u_int64 addr = baseAddr + num; // Works!
printf("\nAddr 1st step = 0x%llx\n", addr); 
```

* * *

^* 6.2.5 (9) “涉及无符号操作数的计算永远不会溢出，因为不能由结果无符号整数类型表示的结果会以比结果可以表示的最大值大一的数字为模减少类型。”。感谢[Daniel Fischer](https://stackoverflow.com/users/1011995/daniel-fischer)找到标准的相关部分！

# mysql - 在 BASH 脚本中使用变量创建 MySQL 数据库

> ID：12609663
> 
> 赞同：2
> 
> 时间：2012-09-26T20:16:14.217
> 
> 标签：mysql, database, bash

我正在尝试使用 BASH 脚本中的变量创建 MySQL 数据库。这是给我带来麻烦的代码： **database="mysql --verbose --user=root --password --execute="create database foo""**运行时失败并显示选项列表。我确定问题出在执行选项后使用引号，但我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:20:22.137

设置`database`变量有什么意义？

```
mysql --verbose --user=root --password --execute="create database foo" 
```

应该可以很好地创建数据库`foo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:13:54.177

尝试这个：

```
#!/bin/sh
mysql --verbose --user=root --password --execute="create database $1" 
```

将其保存在您的 bashscript 文件夹中并像这样运行它：

```
nameofbashscript mydatabasename 
```

# popup - OpenLayers - 将相应的弹出文本添加到标记数组

> ID：12609668
> 
> 赞同：0
> 
> 时间：2012-09-26T20:16:26.563
> 
> 标签：popup, openlayers, markers

我在 OpenLayers 中可能有一个相当基本的问题，如果有人能帮助我解决这个问题，那就太好了。

我有一组标记，每个标记都应该有不同的弹出框文本。但是，我未能将相应的文本应用于标记。我尝试通过另一个数组来获取弹出框的内容。但是，我无法将正确的文本与标记相关联。这是我的代码：

```
var vs_locations = [
[13.045240, 47.8013271],
[13.145240, 47.8013271],
[13.245240, 47.8013271],
];

var popupContentHTML = [
"Text for marker with loc[0]",
"Text for marker with loc[1]",
"Text for marker with loc[2]"
];

function addVS(){

  for (var i = 0; i < vs_locations.length;i++){
    var loc = vs_locations[i];
    var feature = new OpenLayers.Feature(volksschulen, new OpenLayers.LonLat(loc[0],loc[1],loc[2]).transform(proj4326,proj900913));
    feature.closeBox = true;
    feature.data.icon = new OpenLayers.Icon('coffeehouse.png');
    feature.popupClass =  OpenLayers.Class(OpenLayers.Popup.FramedCloud, {
     'autoSize': true, 
    });
    marker = feature.createMarker();
    volksschulen.addMarker(marker);
    feature.data.popupContentHTML = ; //Here should be the text according to the marker
    feature.data.overflow = "auto";
    marker.events.register("mousedown", feature, markerClick);
    feature.popup = feature.createPopup(feature.closeBox);
    map.addPopup(feature.popup);
    feature.popup.hide();
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:59:06.313

你试过了吗：

```
feature.data.popupContentHTML = popupContentHTML[i]; 
```

假设您的位置数组的长度与您的文本数组匹配，无论是长度还是位置

# animation - Masonry jsmodernizr动画不起作用

> ID：12609670
> 
> 赞同：0
> 
> 时间：2012-09-26T20:16:34.783
> 
> 标签：animation, jquery-masonry

我正在尝试让 MasonryJS 在调整窗口大小时设置动画。砌体本身正在工作，但不是动画。见：http: [//jsfiddle.net/Vzufg/](http://jsfiddle.net/Vzufg/)

谁能发现为什么这不起作用？它应该做这样的事情：http: [//masonry.desandro.com/demos/animating-modernizr.html](http://masonry.desandro.com/demos/animating-modernizr.html)

非常感谢任何指针的人！

# c# - 孩子使用界面

> ID：12609671
> 
> 赞同：0
> 
> 时间：2012-09-26T20:16:37.340
> 
> 标签：c#, interface, abstract-class, base-class

我有一个将处理表单上的图像的用户控件。但是根据源是什么（网络摄像头或 ID 扫描或其他视频源），用户控制是不同的。

但是它们有一些共同的特性，所以我想创建一个基类。

我的其他控件都有一些我需要的界面项。我想在基础级别声明接口，并在类级别实现。但 virtual 和 override 似乎是获得我想要的最接近的方式。有没有办法，强制新类实现基类分配的接口？环顾四周，让类抽象化（我不完全理解）可能是一个开始。如果只是方法可能没问题，但我也在使用属性。在那个领域，我在寻找答案时遇到了死胡同。这是我到目前为止所拥有的。我在正确的轨道上吗？我只是根本没有使用过抽象类，只接触过有限的接口。从研究来看，我认为我的方法是正确的，只是不确定该属性。

```
 public interface RequiredAnswer
  {
    void LabelRequiredFieldEmpty();
    bool AnswerRequired{ get;}
  }

  public abstract partial class ExtImage : UserControl, RequiredAnswer
  {
    public virtual bool AnswerRequired
    {
      get
      {
         throw new NotImplementedException ("Answer Required");
      }
    }
    public abstract void LabelRequiredFieldEmpty ()
    {
        //checkBox_AgreementAcceptedText.ForeColor = Color.Red;
    } 
```

所以我会上课

```
 public partial class ExtImageWebCam : ExtImage
  {
    public override bool AnswerRequired
    {
      get
      {
        return valueFromThisClassThatMeansAnAnswerIsRequired;
      }
    }

     public override void LabelRequiredFieldEmpty ()
     {
       // do something 
     }    
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:19:53.603

当您声明方法抽象时，您基本上是在说子类必须提供方法的定义。您可以使属性抽象。这听起来正是您所需要的。

这是[MSDN](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.100%29.aspx)文章以供进一步参考。

来自 MSDN

特性

> > 抽象属性的行为类似于抽象方法，除了声明和调用语法的不同。
> > 
> > 在静态属性上使用 abstract 修饰符是错误的。
> > 
> > 通过包含使用 override 修饰符的属性声明，可以在派生类中覆盖抽象继承属性。

稍后继续

> > 在此示例中，类 DerivedClass 派生自抽象类 BaseClass。抽象类包含一个抽象方法 AbstractMethod 和两个抽象属性 X 和 Y。

```
abstract class BaseClass   // Abstract class
{
    protected int _x = 100;
    protected int _y = 150;
    public abstract void AbstractMethod();   // Abstract method
    public abstract int X    { get; }
    public abstract int Y    { get; }
} 
```

带有接口的抽象基类

> > 抽象类必须为所有接口成员提供实现。
> > 
> > 实现接口的抽象类可能会将接口方法映射到抽象方法。例如：

```
interface I
{
    void M();
}
abstract class C : I
{
    public abstract void M();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:22:59.090

你在正确的轨道上。这是您可以做什么的简单示例。将 Bar() 方法抽象化会强制继承者实现它。

```
public interface IFoo{
    void Bar();
}

public abstract class BaseFoo : IFoo
{
    public abstract void Bar();

    public void Implemented(){
        Debug.WriteLine("this is a shared implementation");
    }
}

public class KungFoo : BaseFoo{
    public override void Bar()
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:23:39.763

首先，接口应该`I`以约定俗成的开头，所以你的接口应该是`IRequiredAnswer`.

其次，如果要强制继承的类实现自己的方法而不是继承它们，只需在基类中将它们抽象：

```
public abstract class ExtImage : UserControl, IRequiredAnswer
{
    public abstract bool AnswerRequired  { get; }

    public abstract void LabelRequiredFieldEmpty ();
} 
```

然后，您的子类必须实现方法和属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:25:44.857

您在创建接口然后为您的目的定义抽象类的正确轨道上。

接口的标准命名约定已被打破，但是接口通常以 I 为前缀以帮助识别它们

```
public interface IRequiresAnswer
{
   void LabelRequiredFieldEmpty();
   bool AnswerRequired { get;  }
} 
```

我还建议将 AnswerRequired 属性更改为函数，因为您的具体类说“做一些事情来找到结果”。属性通常意味着快速，因此在属性中执行任何计算都会掩盖调用属性时发生的实际工作。使用函数时，调用者会更清楚地看到结果不会立即实现。

# jquery - 溢出内的淡入“滚动到顶部”按钮：自动 div

> ID：12609684
> 
> 赞同：3
> 
> 时间：2012-09-26T20:17:46.433
> 
> 标签：jquery, scroll, overflow, fadein, scrolltop

我正在尝试在设置为溢出的 div 底部添加一个滚动到顶部按钮：自动。它将用于网站的一部分，该部分使用 ajax 将内容（不同长度）调用到 div 中。

我想要的功能：当用户在 div 中滚动时，按钮会淡入视图（很像本教程： http: [//www.mattvarone.com/web-design/uitotop-jquery-plugin/](http://www.mattvarone.com/web-design/uitotop-jquery-plugin/)）。我找到了提供这种淡入功能的很棒的教程，但仅与*整个页面*的长度有关，而不是与单个滚动 div 相关。这是我遇到麻烦的地方。

我能够在滚动 div 中创建一个固定按钮。我对编码非常陌生，无法弄清楚如何创建当用户在 div 中滚动时触发的淡入效果。在这里查看我的示例尝试：http: [//jsfiddle.net/in_excess/eEHbW/5/](http://jsfiddle.net/in_excess/eEHbW/5/)

如果有人可以提供一些帮助，将不胜感激。甚至只是一个指向我所描述的站点/教程的链接。我已经在谷歌上搜索了好几天，找不到我需要的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:36:45.933

您需要根据 div 的可滚动区域计算不透明度：

```
$('#content').scroll(function() {
    var total = $(this)[0].scrollHeight - $(this).height();
    var opacity = $(this).scrollTop() / total;
    $('#backtotop').css('opacity', opacity);
}); 
```

当您从顶部进一步滚动时，回滚按钮变得更加不透明。

这是更新的小提琴：http: [//jsfiddle.net/adrianonantua/eEHbW/9/](http://jsfiddle.net/adrianonantua/eEHbW/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:22:48.720

阿罗哈。您可以使用 javascript 来获取像 div 这样的元素的大小/高度：

```
var divSize = document.getElementById('myDiv').style.height; 
```

然后您可以使用此信息来调整用于创建按钮的 div 的不透明度/过滤器：

```
var opacity = divSize / 10; //or whatever method you want to use to determine opacity
var button = document.getElementById('scrollToTopButton');
button.style.opacity = opacity;
button.style.filter = "alpha(opacity="+ opacity +")"; 
```

# redis - 是否建议使用 Supervisor 运行 redis

> ID：12609687
> 
> 赞同：4
> 
> 时间：2012-09-26T20:17:51.700
> 
> 标签：redis, production-environment, supervisord

使用 Supervisor 在生产环境中运行 redis 是一种好习惯吗？

我用谷歌搜索，但没有看到很多这样做的例子。如果不是，那么在生产中运行 redis 的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T08:00:26.053

我个人只是在生产中在 Redis 上使用 Monit。如果 Redis 崩溃，Monit 将重新启动它，但更重要的是，Monit 将能够监控（并在达到三分之二时发出警报）Redis 当前占用的 RAM 量（这是最大的问题）

配置可能是这样的（如果`maxmemory`在 Redis 中设置为 1Gb）

```
check process redis
  with pidfile /var/run/redis.pid
  start program = "/etc/init.d/redis-server start"
  stop program = "/etc/init.d/redis-server stop"
  if 10 restarts within 10 cycles
    then timeout
  if failed host 127.0.0.1 port 6379 then restart
  if memory is greater than 1GB for 2 cycles then alert 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:51:50.777

这要看情况。如果我确实在守护进程控制下使用 redis，我会使用 runit。我确实使用monit，但仅用于监控。我喜欢看到绿灯。

然而，为了让 redis 发挥真正的力量，你不能将 redis 作为一个守护进程运行，尤其是作为一个主控。如果主服务器出现故障，您将不得不将一个从服务器切换为主服务器。简单地退出，我只是在头部拍摄节点，我有一个厨师食谱会带来一个新节点。

但是话又说回来....这也取决于您拍摄快照的频率。我不快照，因此不需要守护进程控制。

人们使用 reids 来获得蛮力速度。这意味着不写入磁盘并将所有数据保存在内存中。如果一个节点出现故障...并且您没有快照...数据丢失。

# php - 为什么这个数组不能插入到我的 MYSQL 表中？

> ID：12609688
> 
> 赞同：0
> 
> 时间：2012-09-26T20:17:52.113
> 
> 标签：php

> **可能重复：**
> [如何将多维数组插入 MySQL 表？](https://stackoverflow.com/questions/12596528/how-show-multidimensional-arrays-be-inserted-into-a-mysql-table)

我有一个数组。该数组是多维的，并且在内爆方面工作得很好。然后，当我尝试将数组插入数据库时​​，每行的每个多维数组。它不会进入。只有最后一行插入自己，但是在尝试了这个不插入任何东西的新代码之后，我被卡住了。顺便说一句，我丢失了以前的代码：

```
foreach ($links as $link) {
    $output = array(
        "title"       => Titles($link), 
        "link"        => $link,
        "description" => getMetas($link),
        "keywords" => getKeywords($link) 
    );
    if (empty($output["description"])) {
        $output["description"] = getWord($link);
    }
    $data[] = '"' . implode('" , "', $output) . '"';
}
mysql_query( "INSERT INTO search (title, description , keywords, link)
    VALUES (" . $data . ")" ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:19:36.870

因为您将结果分配`implode`给`$data[]`，即 的下一个可用数组元素`$data`。在这种情况下，您希望将 的结果分配`implode`给 just `$data`。

如果您打印生成的 SQL，您可能只会得到`INSERT INTO ...... VALUES(Array)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:23:09.573

查询`mysql_query( "INSERT INTO search (title, description , keywords, link) VALUES (" . $data . ")" );`需要在`foreach`循环内。

```
 foreach ($links as $link) {
$output = array(
    "title"       => Titles($link), //dont know what Titles is, variable or string?
    "link"        => $link,
    "description" => getMetas($link),
    "keywords" => getKeywords($link) 
);
if (empty($output["description"])) {
    $output["description"] = getWord($link);
}
$data = '"' . implode('" , "', $output) . '"';
$success = mysql_query( "INSERT INTO search (title, description , keywords, link)
VALUES (" . $data . ")" );
if( $success)
  echo $link . ' row inserted';
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:31:25.537

您的 INPUT 语法仅填充一行。要在一个 MYSQL 查询中添加所有行，您将更改代码如下：

```
$data = "";
foreach ($links as $link) {
    $output = array(
        "title"       => Titles($link), 
        "link"        => $link,
        "description" => getMetas($link),
        "keywords" => getKeywords($link) 
    );
    if (empty($output["description"])) {
        $output["description"] = getWord($link);
    }
    $data .= '("' . implode('", "', $output) . '"), '; // add each row in parenthesis.
}
mysql_query( "INSERT INTO search (title, description , keywords, link)
    VALUES " . $data ); 
```

此外，您的 mysql 代码已全部弃用，您应该尽快转换为 mysqli。

# c++ - C++ 匿名命名空间：变量初始化为 0？

> ID：12609690
> 
> 赞同：4
> 
> 时间：2012-09-26T20:17:55.417
> 
> 标签：c++, static

这里有一个相关的未回答问题：
[c++ - Variables auto-initialized to 0 in unnamed namespace? - 堆栈溢出](https://stackoverflow.com/questions/6526466/variables-auto-initialized-to-0-in-unnamed-namespace)

当我在 CI 中有一个全局函数指针时，可以将其声明为静态并将其初始化为 NULL 并且仅可用于我的文件。在 C++ 中，我将很多东西切换到匿名命名空间，但我很好奇它们是否持有同样的保证。如果我在匿名命名空间中有一个函数指针，它会被初始化为 null 吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T20:19:49.593

*程序启动时，*所有具有静态存储持续时间的变量都初始化为零。*这些包括在命名空间范围内声明的所有变量（在全局命名空间或任何其他命名空间中，包括未命名的命名空间）。*

# c++ - 子项访问同一父项的其他子项的元素

> ID：12609693
> 
> 赞同：2
> 
> 时间：2012-09-26T20:18:12.757
> 
> 标签：c++, pointers, parent, parent-child, member

我目前正在使用 C++ 开发一款 RPG 游戏，并且已经到了在地图上包含事件的地步。

我希望能够让地图上的事件治愈玩家。我认为最简单的方法是使用“this”关键字从游戏中传递指向事件对象的指针。当我开始这样做时，出现了一大堆编译器错误，这些错误似乎是由于试图包含一个当前试图包含另一个类的类。（我猜是无限循环？）

例如。我有我的“游戏”类，它有一个属于“mapManager”类的公共成员。然后，“mapManager”对象将“事件”对象作为成员。“游戏”对象在其成员中也有一个“玩家”对象。我需要让“玩家”拥有的“事件”对象更改变量。我可以在需要的时候诚实地抛出指针，但这可能会变得很麻烦。

我想问的是，是否有一种简单的方法可以让父母的孩子访问该父母的另一个孩子，或者是否更容易将指针指向所有需要它们指向其他孩子的子类.

哇......这没什么意义，但希望有人能理解到足以给我一个好的答案。这是一些代码，以防万一。

`:game.h`

 `include "player.h" include "event.h"

class game { public: player Player; event Event; };

:player.h

class player { public: game* Game;

};

:event.h

class event { public: game* Game; };`  `仅此导致“游戏没有命名类型”，因此我尝试将游戏包含在 event.h 和 player.h 中并得到相同的错误。我想要做的是能够从内部事件访问玩家的变量 HP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:12:43.517

最好尽可能避免循环引用；但是，如果您*真的*想这样做，那么解决方案是`Game`在头文件的顶部前向声明您的类，该类将使用指向它的引用/指针。例如

```
#ifndef EVENTH
#define EVENTH

class Game;

class Event
{
    Game* game;
};

#endif 
```

和..

```
#ifndef PLAYERH
#define PLAYERH

class Game;

class Player
{
    Game* game;
};

#endif 
```

对于不需要知道类的实现/大小的头文件`Game`，一个简单的前向声明就足以让编译器知道具有该名称的类存在。

在您的`.cpp`源文件中（其中的实现`Game`实际上很重要并由 Player/Event 实现使用），您仍然需要`#include`包含您的 Game 类定义的标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T21:15:48.173

```
//game.h
class event;
class game {
    event _e;
private:
    game(){}
    //game& operator=(game& other) {}
    ~game(){}
public:
    static game & getInstance() {
        static game instance;
        return instance;
    }
    event& getEvent() {return _e;}
};

//HealEventObserver.h
class HealEventObserver {
public:
    virtual void heal() = 0;
    virtual ~HealEventObserver(){}
};

//player.h include game.h and HealEventObserver.h event.h
class Player : public HealEventObserver
{
public:
    virtual void heal() {/*heal the player*/}
    Player() {
        game& instance = game::getInstance();
        event& e = instance.getEvent();
        e.registerObserver(this);
    }
};

//event.h include HealEventObserver.h
class event {
    std::set<HealEventObserver*> _observers;
    void notify() {
        std::set<HealEventObserver*>::iterator it = _observers.begin();
        std::set<HealEventObserver*>::iterator end = _observers.end();
        for( ;it!=end; ++it) {
            it->heal();
        }
    }
public:
    void registerObserver(HealEventObserver* observer) {_observers.insert(observer);}
}; 
```

不要让你的事件对象改变玩家，只需让事件告诉玩家治愈自己。此外，如果游戏应该代表一切，那么让它成为全球性的。

* * *

**回答评论：（**这只是我的意见，没有别的。）

经过一番研究，我发现这个链接给出了很好的参考名称。

[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)`

# php - 两个日期列表之间的php天数

> ID：12609695
> 
> 赞同：1
> 
> 时间：2012-09-26T20:18:16.583
> 
> 标签：php, list, days

看代码就知道是什么问题了？

如果你帮助我，我会很高兴：

```
list($from_day,$from_month,$from_year)    = explode(".","27.09.2012");
list($until_day,$until_month,$until_year) = explode(".","31.10.2012");

$iDateFrom = mktime(0,0,0,$from_month,$from_day,$from_year);
$iDateTo   = mktime(0,0,0,$until_month,$until_day,$until_year);

while ($iDateFrom <= $iDateTo) {
    print date('d.m.Y',$iDateFrom)."<br><br>";
    $iDateFrom += 86400; 
} 
```

写同一题的日期 2 次

10 月（31 日）历史上写过 2 次画到 10 月 30 日结束：（

27.09.2012

28.09.2012

...

26.10.2012

27.10.2012

**[[2012 年 10 月 28 日]]**

**[[2012 年 10 月 28 日]]**

29.10.2012

30.10.2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:26:36.407

1.  您的问题是因为您已将时间设置为 00:00:00，将其设置为 12:00:00。那是因为[夏令时](http://en.wikipedia.org/wiki/Daylight_saving_time)。
2.  停止使用 date() 函数，使用[Date 和 Time](http://php.net/manual/en/book.datetime.php)类。

### 解决方案（PHP >= 5.4）：

```
$p = new DatePeriod(
    new DateTime('2012-09-27'),
    new DateInterval('P1D'),
    (new DateTime('2012-10-31'))->modify('+1 day')
);
foreach ($p as $d) {
    echo $d->format('d.m.Y') . "\n";
} 
```

### 解决方案（PHP < 5.4）

```
$end = new DateTime('2012-10-31');
$end->modify('+1 day');
$p = new DatePeriod(
    new DateTime('2012-09-27'),
    new DateInterval('P1D'),
    $end
);
foreach ($p as $d) {
    echo $d->format('d.m.Y') . "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:32:29.217

您有夏令时问题。从一个时间戳到另一个添加秒很容易出现围绕这些边缘条件的问题（闰日可能有问题），您应该养成使用 PHP 的 DateTime 和 DateInterval 对象的习惯。它使处理日期变得轻而易举。

```
$start_date = new DateTime('2012-09-27');
$end_date = new DateTime('2012-10-31');
$current_date = clone $start_date;
$date_interval = new DateInterval('P1D');

while ($current_date < $end_date) {
    // your logic here

    $current_date->add($date_interval);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:39:31.627

我不知道你来自哪里，但很可能你在你的时区进行夏令时转换（我住的地方是 11 月 4 日 - 正好在 10 月 28 日之后的一周）。你不能指望一天正好有 86400 秒长。

如果你用 mktime 循环递增，你应该没问题：

```
list($from_day,$from_month,$from_year)    = explode(".","27.09.2012");
list($until_day,$until_month,$until_year) = explode(".","31.10.2012");

$iDateFrom = mktime(0,0,0,$from_month,$from_day,$from_year);
$iDateTo   = mktime(0,0,0,$until_month,$until_day,$until_year);

while ($iDateFrom <= $iDateTo)
{
    print date('d.m.Y',$iDateFrom)."<br><br>";
    $from_day = $from_day + 1;
    $iDateFrom = mktime(0,0,0,$from_month,$from_day,$from_year);
} 
```

即使`$from_day`可能会超过 31，mktime 也会为您进行数学转换。（即 31 天的月份中的 32 天 = 下个月的第 1 天）

编辑：对不起，我在错误的地方增加了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:41:53.673

我解决这个问题的想法是这样的；

```
$firstDate = "27.09.2012";
$secondDate = "31.10.2012";

$daysDifference = (strtotime($secondDate) - strtotime($firstDate)) / (60 * 60 * 24);
$daysDifference = round($daysDifference);

for ($i = 0; $i <= $daysDifference; $i++)
{
    echo date("d.m.Y", strtotime('+'.$i.' day', strtotime($firstDate))) . "<BR>";
} 
```

这应该可以解决您的问题并且更容易阅读（恕我直言）。我刚刚测试了代码，它输出所有日期，没有双打。它还可以使您免于所有夏令时不一致的问题。

# ruby-on-rails - Rails 构建方法修改对象

> ID：12609697
> 
> 赞同：0
> 
> 时间：2012-09-26T20:18:20.667
> 
> 标签：ruby-on-rails, ruby

假设我的助手中有一个简单的方法可以帮助我检索客户：

```
def current_client 
  @current_client ||= Client.where(:name => 'my_client_name').first
end 
```

现在调用`current_client`返回：

```
#<Client _id: 5062f7b851dbb2394a00000a, _type: nil, name: "my_client_name"> 
```

完美的。客户端有几个关联用户，我们看最后一个：

```
> current_client.user.last
#<User _id: 5062f7f251dbb2394a00000e, _type: nil, name: "user_name"> 
```

后来在一个`new`方法中，我称之为：

```
@new_user = current_client.user.build 
```

而现在，令我惊讶的是，调用`current_client.user.last`返回

```
#<User _id: 50635e8751dbb2127c000001, _type: nil, name: nil> 
```

但用户数不会改变。换句话说 - 它没有添加新用户，但缺少一个用户......这是为什么呢？我该如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:54:11.520

`current_client.users.count`对数据库进行往返以确定关联的用户记录数。由于尚未保存新用户（它只是被构建），数据库不知道它。

`current_client.users.length`将使用 Ruby 为您提供计数。

```
current_client.users.count # => 2
current_client.users.length # => 2
current_client.users.build
current_client.users.count # => 2
current_client.users.length # => 3 
```

# ruby-on-rails - Rails：注册控制器忽略条件

> ID：12609699
> 
> 赞同：0
> 
> 时间：2012-09-26T20:18:29.343
> 
> 标签：ruby-on-rails

我的注册控制器中有以下代码（在创建方法中）：

```
respond_to do |format|
  if discount_code && invalid_discount_code
    flash[:notice] = error_notification
    format.html { render action: "new" }
  elsif already_registered
    flash.now[:error] = error_notification
    format.html { redirect_to root_url }
  elsif @user.save
    events_history_hash = JSON.parse(@user.events_history)
    @user.skip_confirmation!
    sign_in @user
    if events_history_hash[Current_event_id.to_s]["payment"] && events_history_hash[Current_event_id.to_s]["payment"] == 0
      flash[:notice] = "Your complimentary registration for this event has been accepted."
      format.html { redirect_to root_url }
    elsif auto_approve
      payment = extract_payment_from_events_history_json(@user.events_history)
      format.html { redirect_to new_stripe_payment_path(:registration_payment => payment) }
    else
      EventMailer.send_email_to_admins_to_process_invite_request(current_user).deliver
      flash[:notice] = INVITE_REQUEST_RECEIVED
      format.html { redirect_to root_url }
    end
  else
    format.html { render action: "new" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end 
```

该代码在我的开发环境（我的 MAC 本地）上运行得非常好，如果 auto_approve 为真，它会将我重定向到支付页面，但是当我将代码上传到测试服务器时，它总是会执行

```
EventMailer.send_email_to_admins_to_process_invite_request(current_user).deliver 
```

即使 auto_approve 设置为 true。我通过在测试服务器上运行控制台验证了这一点。我还应该寻找什么？

# 可能是黑客：

这可能是一个黑客，但它解决了问题。在 test.rb 中，我将 config.serve_static_assets 的值从 false 更改为 true（默认情况下，在 test.rb 和 production.rb 中设置为 false，但在 development.rb 中设置为 true）

```
config.serve_static_assets = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:54:21.080

如何以及在哪里`auto_approve`设置？这个测试服务器是在生产环境下运行的吗？

# c# - TempData 和提琴手

> ID：12609700
> 
> 赞同：1
> 
> 时间：2012-09-26T20:18:37.470
> 
> 标签：c#, asp.net-mvc, fiddler, tempdata

```
public ActionResult Index()
{
    TempData["msg"] = "Test";
    return RedirectToAction("About");
}

public ActionResult About()
{
    var msg = TempData["msg"];
    return View();
} 
```

一个简单的问题。我相信当我看到它的答案时，我会拍自己的额头。

在浏览器中导航到 Index 操作会导致重定向到 About 操作，并且 TempData 值是正确的。

为什么当我使用 Fiddler 作曲家导航到 Index 操作时，它会导致重定向到 About 操作但 TempData 值丢失并且为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:02:03.877

我认为可以在这里找到答案（http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx）：

“会话由可以使用 SessionID 属性读取的唯一标识符标识。当为 ASP.NET 应用程序启用会话状态时，会检查应用程序中对页面的每个请求是否有从浏览器发送的 SessionID 值。如果没有提供 SessionID 值，ASP.NET 启动一个新会话，并且该会话的 SessionID 值与响应一起发送到浏览器。”

当我将此行添加到每个动作的开头时：

```
Debug.Write(string.Format("SessionId: {0}\r\n", HttpContext.Session.SessionID)); 
```

我看到当您从浏览器运行时，sessionid 是相同的。当从 Fiddler 作曲家运行时，它们是不同的。

因此，将使用默认的 TempDataProvider（将 TempData 存储在会话状态）重置 TempData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:24:47.140

如果请求相同，则结果应该相同。很可能您在编写假请求时没有制作第一个请求的精确副本。请注意，在 tempData 的情况下，只有当它是包含此数据的第一个请求时，您的组合请求才会起作用（获取 tempData）-因此您必须“复制”尚未由应用程序发送的请求，您无法重播请求依赖于 tempData。

临时数据存储在会话状态中并在第一次请求后被清除，因此如果您没有正确地手动/通过 Fiddler 作曲家发送信息或（如您的情况）使用相同的信息到同一个控制器。

另请参阅有关同一主题的其他[相关问题。](https://stackoverflow.com/search?q=tempdata)

# javascript - 有没有人找到一种方法来愉快地处理 WYSIHTML5 中的代码？

> ID：12609701
> 
> 赞同：4
> 
> 时间：2012-09-26T20:18:37.783
> 
> 标签：javascript, parsing, syntax, wysihtml5

我正在使用基于 WYSIHTML5 ( [https://github.com/xing/wysihtml5 ) 的 WYSIHTML5 Bootstrap (](https://github.com/xing/wysihtml5) [http://jhollingworth.github.com/bootstrap-wysihtml5](http://jhollingworth.github.com/bootstrap-wysihtml5) )，从网站。

我希望能够将代码处理到编辑器中，然后使用 HighlightJS 突出显示语法。

我创建了一个新按钮并复制了 wysihtml5.js 中使用的方法来`<b>`打开和关闭粗体，`<pre>`而是使用：

```
(function(wysihtml5) {
var undef;

wysihtml5.commands.pre = {
    exec: function(composer, command) {

        return wysihtml5.commands.formatInline.exec(composer, command, "pre");
    },

    state: function(composer, command, color) {

        return wysihtml5.commands.formatInline.state(composer, command, "pre");
    },

    value: function() {
        return undef;
    }
};
})(wysihtml5) 
```

但这还不够。编辑器在编辑时隐藏标签。我需要能够将我的内容包装在两者中`<pre>`，`<code>`即。`<pre><code></code></pre>`.

**这意味着编写一个与 wysihtml5 使用的函数不同的函数，我不知道如何......有人可以帮我吗？**

这是 wysihtml5 中 formatInline 函数的代码：

```
 wysihtml5.commands.formatInline = {
exec: function(composer, command, tagName, className, classRegExp) {
  var range = composer.selection.getRange();
  if (!range) {
    return false;
  }
  _getApplier(tagName, className, classRegExp).toggleRange(range);
  composer.selection.setSelection(range);
},

state: function(composer, command, tagName, className, classRegExp) {
  var doc           = composer.doc,
      aliasTagName  = ALIAS_MAPPING[tagName] || tagName,
      range;

  // Check whether the document contains a node with the desired tagName
  if (!wysihtml5.dom.hasElementWithTagName(doc, tagName) &&
      !wysihtml5.dom.hasElementWithTagName(doc, aliasTagName)) {
    return false;
  }

   // Check whether the document contains a node with the desired className
  if (className && !wysihtml5.dom.hasElementWithClassName(doc, className)) {
     return false;
  }

  range = composer.selection.getRange();
  if (!range) {
    return false;
  }

  return _getApplier(tagName, className, classRegExp).isAppliedToRange(range);
},

value: function() {
  return undef;
}
};
})(wysihtml5); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:03:59.837

从 wysihtml5 的开发者 Christopher 那里得到了答案：

```
wysihtml5.commands.formatCode = function() {
exec: function(composer) {
var pre = this.state(composer);
if (pre) {
  // caret is already within a <pre><code>...</code></pre>
  composer.selection.executeAndRestore(function() {
    var code = pre.querySelector("code");
    wysihtml5.dom.replaceWithChildNodes(pre);
    if (code) {
      wysihtml5.dom.replaceWithChildNodes(pre);
    }
  });
} else {
  // Wrap in <pre><code>...</code></pre>
  var range = composer.selection.getRange(),
      selectedNodes = range.extractContents(),
      pre = composer.doc.createElement("pre"),
      code = composer.doc.createElement("code");
  pre.appendChild(code);
  code.appendChild(selectedNodes);
  range.insertNode(pre);
  composer.selection.selectNode(pre);
}
},
state: function(composer) {
var selectedNode = composer.selection.getSelectedNode();
return wysihtml5.dom.getParentElement(selectedNode, { nodeName: "CODE" }) && wysihtml5.dom.getParentElement(selectedNode, { nodeName: "PRE" });
}
}; 
```

...并将其添加到您的工具栏：

```
<a data-wysihtml5-command="formatCode">highlight code</a> 
```

非常感谢克里斯托弗！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:41:50.063

I fork today bootstrap-wysihtml5 project and add code highlighting support using Highlight.js.

You can check demo at [http://evereq.github.com/bootstrap-wysihtml5](http://evereq.github.com/bootstrap-wysihtml5) and review source code [https://github.com/evereq/bootstrap-wysihtml5](https://github.com/evereq/bootstrap-wysihtml5). It's basically almost same code as from Christopher, together with UI changes and embeded inside bootstrap version of editor itself.

# javascript - 使用按钮卸载以跨浏览器工作

> ID：12609702
> 
> 赞同：1
> 
> 时间：2012-09-26T20:18:46.833
> 
> 标签：javascript, dom-events, window.onunload

我想知道是否可以让 Javascript 中的 unload 方法执行 a`button.click;`或 a `document.getElementById('target').click()`，现在我正在为不同的浏览器研究不同的方法，但我似乎无法让它们一起工作。

这样做的原因是我想清除浏览器中的信息，但我似乎无法让卸载方法正常工作。但我什至不知道 unload 方法是否能够执行 button.click 或 a`document.getElementById('target').click();`是否有类似该方法可以或不能执行的操作的列表？这是我试图开始工作的代码：

```
 window.onunload=leave;

     function leave() {

    // For Internet Explorer only. 
    if (navigator.appName == "Explorer"){
    document.getElementById('kioskform:broswerCloseSubmit').click();
    }

    // For Chrome only
    if (navigator.appName == "Chrome"){
    // add code for Chrome to use.
    }

    // for Safari only
    if (navigator.appName == "Safari"){
    // add code for Safari to use
    }

    // for Firefox only 
    if (navigator.appName == "Firefox"){
    // add code for Firefox to use
    }

} 
```

到目前为止，唯一有效的是 IE，但其他 Web 浏览器不喜欢文档中的代码。但我想为我正在使用的其他浏览器尝试其他方法。但我似乎根本无法让浏览器检测工作，非常感谢任何想法或建议或建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:03:36.170

某些浏览器（Chrome / FF）不支持 window.onunload 方法。

见：[http ://bugs.jquery.com/ticket/10509](http://bugs.jquery.com/ticket/10509)

# python - 如何使用 import 语句覆盖 python 内置函数？

> ID：12609705
> 
> 赞同：1
> 
> 时间：2012-09-26T20:18:50.940
> 
> 标签：python, python-3.2

我想登录到一个文本文件，无论`print`编辑到`sys.stdout`. 虽然我知道更聪明的人可以想出更优雅和 Pythonic 的解决方案，但这是我的解决方案

```
class logger:

  def __init__(self, filename='log.txt'):
    self.logf = open(filename, 'a')

    global print
    self.__print = print

    print = self.lognprint

  def __del__(self):
    self.logf.close()

  def lognprint(self, *args, **keywords):
    self.__print(*args, file = self.logf, **keywords)
    self.__print(*args, **keywords) 
```

现在，如果我在代码中的任何地方添加

```
mylog = logger() 
```

之后编辑的任何内容`print`也会被记录。

但是由于许多明显的原因，这**并不**安全/好。例如，多个`logger`对象可能很讨厌。

此外，我的灵感来自

```
from __future__ import print_function 
```

（例如，请参阅[this](http://python3porting.com/noconv.html)）并且我想做类似的事情，这样当我使用我的模块时，我的 print 版本会在代码中的任何位置覆盖`import`内置函数。`print`

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:41:45.717

[logging cookbook](http://docs.python.org/howto/logging-cookbook.html#logging-cookbook)中给出了类似的解决方案，或者将内容记录到文件中，该文件也打印到 std.out 。
这是您可以简单地将内容记录到名为“spam.log”的文件并将某些内容打印到std.out的方法：

```
import logging

logger = logging.getLogger('simple_example')
logger.setLevel(logging.DEBUG)
# create file handler which logs even debug messages
fh = logging.FileHandler('spam.log')
fh.setLevel(logging.DEBUG)
# create console handler with a higher log level
ch = logging.StreamHandler()
ch.setLevel(logging.ERROR)
# create formatter and add it to the handlers
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
ch.setFormatter(formatter)
fh.setFormatter(formatter)
# add the handlers to logger
logger.addHandler(ch)
logger.addHandler(fh)

# 'application' code
logger.debug('debug message')
logger.info('info message')
logger.warn('warn message')
logger.error('error message')
logger.critical('critical message') 
```

在此示例中，所有消息都进入文件，只有更高级别进入控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:24:01.353

与其将代码放在类中，不如将其放在模块级别。这样它将在第一次导入模块时执行：

```
# logging.py
print = my_print 
```

# c# - 如何大写正则表达式编号组

> ID：12609707
> 
> 赞同：0
> 
> 时间：2012-09-26T20:18:58.297
> 
> 标签：c#, regex

假设我有一个正则表达式模式，我想用其他东西替换模式的匹配项。在当前模式中，有两个组将匹配，每个组都有编号（$1 和 $2）：

```
Regex pattern = new Regex(@"\[([a-zA-Z0-9_\-]+)\^=([^\]]+)\]");
string replacement = "[starts-with(@$1,$2)]"; 
```

示例 CSS 选择器：

```
[id^="blah"] 
```

预期输出：

```
[start-swith(@ID,"blah")] // Note ID is capitalized 
```

这是另一个正则表达式模式：

```
Regex pattern = new Regex(@"\[([a-zA-Z0-9_\-]+)\*=([^\]]+)\]");
string replacement = "[contains(@$1,$2)]"); 
```

当我执行替换时，有什么方法可以将组 $1 中的匹配大写？

注意：我有许多模式被添加到列表中，并且它们与替换字符串配对，因此我必须使解决方案适用于所有需要将某些匹配组大写的替换。

## 更新

我想我只是想到了一个可能的解决方案：将替换字符串转换为 a`MatchEvaluator`并在需要时返回大写的组匹配项。我认为这可能有效：

```
Regex pattern = new Regex(@"\[([a-zA-Z0-9_\-]+)\^=([^\]]+)\]");
MatchEvaluator evaluator = new MatchEvaluator((Match m) =>
    {
        return string.Format("[starts-with(@{0},{1})]", m.Groups[1].Value.ToUpper(), m.Groups[2].Value);
    }); 
```

如果有人能想到更好的解决方案，请告诉我。非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:45:57.520

MatchEvaluator 很好，以为你烧了我 ;) 无论如何：

```
var pattern = @"([a-z]+) ([a-z]+)";
var format = "[starts-with({0}{1}]";

var input = "bla bla";
var result = ReplacePattern(input, pattern, format);

public static string ReplacePattern(string input, string pattern, string format)
{
   if (Regex.Match(input, pattern).Groups.Count != 3) return input;//or throw, or...
   return Regex.Replace(input, pattern, x =>
            string.Format(format,
                          x.Groups[1].Value.ToUpper(), 
                          x.Groups[2].Value));
} 
```

# c - 调用 fgets 时出现分段错误

> ID：12609709
> 
> 赞同：2
> 
> 时间：2012-09-26T20:19:17.827
> 
> 标签：c, segmentation-fault

我正在尝试编写一个简单的程序来从纯文本列表中列出的文件中读取数据，但是当我尝试在我的 processFile 函数中调用 fgets() 时，我一直遇到分段错误。

如果我只是简单地调用诸如 processFile("file.txt") 之类的东西就不会发生这种情况，但是当我尝试通过我的 processList 函数调用 processFile 时会发生这种情况。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void processFile (char *file)
{
    char line[256];
    FILE* pgmFile;
    pgmFile = fopen(file, "r");
    fgets(line, 200, pgmFile); // Seg fault here
    fclose(pgmFile);
}    

// Runs processFile on every file listed in list
void processList (char *list)
{
    FILE *pgmList;
    pgmList = fopen(list, "r");

    char line[256];

    while (fgets(line, 255, pgmList) != NULL) {
        processFile(line);
    }
    fclose(pgmList);
}      

int main ()
{
    processList("downgesture_test1.list");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:21:17.007

尝试检查`fopen`. 如果是`NULL`呢？因为您的“文件名”很可能有尾随`\n`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:22:07.003

如果文件不存在， fopen 将返回 NULL。在调用 fopen 之后添加一些错误处理，您的列表中可能只有一个错误的条目。

可能发生的情况是 pgmFile 为 NULL，并且 fgets 尝试访问它，从而导致 seg 错误。

# job-scheduling - Register-ScheduledJob 和 Write-Host

> ID：12609711
> 
> 赞同：1
> 
> 时间：2012-09-26T20:19:25.107
> 
> 标签：job-scheduling, powershell-3.0

我正在使用[Register-ScheduledJob](http://technet.microsoft.com/en-us/library/hh850536.aspx)在我执行脚本的后台作业中在 powershell 中注册作业。该脚本包含一些命令，例如 Get-Process 和 Write-Host 命令。和...

尽管每个命令都在结果中执行，但我看不到写入主机的输出（get-Process 没问题）

也许有人知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:02:20.720

Write-Host 写入主机，这是脚本正在运行的应用程序（例如 PowerShell.exe），因此它会显式输出到屏幕，并且当您在非交互式环境中运行时不会执行任何操作。您永远不应该使用它来输出您想要收集的数据，仅用于轻量级调试或在交互式脚本中打印到屏幕上。

您通常应该将 write-output 用于要作为输出收集的数据。

虽然您也可以使用调试/警告/错误输出（这些由作业收集，但未显示在常规输出中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:25:46.803

非常感谢你。写输出有帮助。

另外，我在最后几天发现的内容可能对其他人有帮助：如果您启动预定的后台作业并在此作业中启动 powershell 脚本，如下所示：

```
Register-ScheduledJob -Name1 temp -ScheduledJobOption $option -ScriptBlock {
D:\scprit.ps1
} 
```

你的工作永远不会结束，因为完成脚本后 powershell 窗口仍然打开。因此，您必须在脚本块中添加退出：

```
Register-ScheduledJob -Name1 temp -ScheduledJobOption $option -ScriptBlock {
D:\scprit.ps1
Exit-PSSession
} 
```

# python - 从列表中提取特定列

> ID：12609714
> 
> 赞同：10
> 
> 时间：2012-09-26T20:19:47.040
> 
> 标签：python

我有一个包含列索引的列表，如下所示：

```
list1 = [0 ,2] 
```

另一个列表列表将包含 csv 文件的文件内容，如下所示：

```
list2=[["abc", 1, "def"], ["ghi", 2, "wxy"]] 
```

什么是创建一个新列表的最佳方法，该列表仅包含来自ie`list2`中包含的列号的值`list1`

```
newList = [["abc", "def"], ["ghi", "wxy"]] 
```

我很难创建子列表

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T20:24:43.083

你可以使用`List Comprehension`： -

```
newList = [[each_list[i] for i in list1] for each_list in list2] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T20:28:23.023

如果您对元组列表感到满意，您可以使用`operator.itemgetter`

```
import operator
list1 = [0,2]
my_items = operator.itemgetter(*list1)
new_list = [ my_items(x) for x in list2 ] 
```

（或者你可以`map`在这里使用）：

```
new_list = map(my_items, list2) 
```

并作为 1 班轮：

```
new_list = map(operator.itemgetter(*list1), list2) 
```

`operator.itemgetter`可能比嵌套列表理解有轻微的性能优势，但它可能足够小，不值得担心。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T20:23:36.460

```
>>> list1 = [0 ,2]
>>> list2=[["abc", 1, "def"], ["ghi", 2, "wxy"]]
>>> newList = [[l[i] for i in list1] for l in list2]
>>> print newList
[['abc', 'def'], ['ghi', 'wxy']] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-01T18:00:05.573

直接从 python 列表中提取一些列是不可能的，因为 python 并不将此列表视为一个数组（根据定义具有行和列），而是作为列表的列表。

但是，您可以非常轻松地执行此类操作，而无需使用任何列表推导式`Numpy`。具体来说，您可以执行以下操作：

```
import numpy as np

list1 = [0 , 2]
list2=[["abc", 1, "def"], ["ghi", 2, "wxy"]]

# Covert list2 to numpy array
array2 = np.array(list2)

# Extract the specific columns from array2 according to list1
newArray = array2[:, list1]

#  Convert the new numpy array to list of lists
newList = newArray.tolist()

# newList is the following list: [['abc', 'def'], ['ghi', 'wxy']] 
```

我希望这也有帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T20:24:38.750

如果您使用的是 csv 文件，则无需重新发明轮子。看看优秀的`csv`模块。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-23T14:45:05.077

您可以像这样将[Poete Maudit 的答案](https://stackoverflow.com/a/51125711/10101556)放在一行中：

```
column = np.array(list_name)[:,column_number].tolist() 
```

您还可以通过删除将其保留为 numpy 数组`.tolist()`

# reporting-services - SSRS 报告上的 MDX 查询错误

> ID：12609716
> 
> 赞同：0
> 
> 时间：2012-09-26T20:19:51.080
> 
> 标签：reporting-services, mdx

函数需要第一个参数的元组集表达式。使用了字符串或数字表达式。我正在我的 ssrs 报告中设计 mdx 查询。

这是我的 MDX 查询：

```
SELECT 
     NON EMPTY { [Measures].[Order Quantity], [Measures].[Discount Amount], [Measures].[Freight], [Measures].[Extended Amount] } ON COLUMNS, 
     NON EMPTY { ([Customer].[Customer Key].[Customer Key].ALLMEMBERS * [Currency].[Currency Key].[Currency Key].ALLMEMBERS * [Currency].[Currency Name].[Currency Name].ALLMEMBERS * [Customer].[Gender].[Gender].ALLMEMBERS ) } ON ROWS 
FROM (
      SELECT ( STRTOSET ( '{" & Join(Parameters!CurrencyCurrencyKey.Value,",") & "}') ) ON COLUMNS
      FROM [AWDW]
     ) 
```

任何的想法？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:12:19.823

我认为调用`Join`不会返回正确的表达式。为了使您的查询有效，它应该返回类似于 a 的唯一名称`Currency Key`。

我不知道您是否要选择一种或多种货币，但[StrToSet](http://msdn.microsoft.com/en-us/library/ms144782.aspx)的第一个参数必须具有如下值：

```
"{'unique name of the currency'}" 
```

或者

```
"{('unique name of the first currency') , ('unique name of the second currency')...}" 
```

# javascript - JSON/JSONP 如何使用 for(;;); 在响应体中

> ID：12609719
> 
> 赞同：1
> 
> 时间：2012-09-26T20:19:59.193
> 
> 标签：javascript, json, jsonp, google-closure-library

我似乎无法找到一种方法来忽略`for(;;);`跨域 JSONP 请求的响应正文中的 。我在自己的服务器上执行此操作，这里没有其他内容。我正在尝试将其包含`for(;;);`在回调的响应正文中，如下所示：

```
_callbacks_.callback(for(;;);[jsondata....]); 
```

但是如何在解析 JS 代码之前将其从响应正文中删除？顺便说一句，我正在使用 Google Closure Library。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:04:15.273

好吧，我想我明白了。for(;;); 的原因 是否有防止某些信息的跨域数据请求。所以基本上，如果你有信息，你试图保护你通过一个正常的 Ajax JSON 通道，如果你在多个服务器上存储数据，你在服务器级别处理它。

JSONP 请求实际上是一个远程脚本包含，这意味着无论服务器输出什么都是实际的 Javascript 代码，所以如果你有一个`for(;;);`before 你`_callbacks_.callback();`的代码将在请求成功时在源域上执行。如果是无限for循环，显然会卡住页面。

所以正常的实现方法如下：

1.  向位于同一服务器上的文件发送一个普通的 Ajax 请求。
2.  执行服务器级别的工作并通过加密的 CURL 向外部服务器发送请求。
3.  为服务器响应添加安全性（一个`for(;;);`或`while(1);`或`throw(1);`后跟一个`<prevent eval statements>`字符串。
4.  以文本字符串形式获取响应。
5.  从字符串中删除您的安全实现。使用标准 JSON 解析器将字符串（现在是“JSON 字符串”）转换为 JS 对象/数组等。
6.  对数据做任何你想做的事情。

只是想我应该把它放在这里，以防其他人将来谷歌它，因为我没有通过谷歌找到合适的信息。这应该有助于防止跨域请求伪造。

# apache-flex - Flash + IE9 +“不将加密页面保存到磁盘”已选中

> ID：12609721
> 
> 赞同：0
> 
> 时间：2012-09-26T20:20:16.673
> 
> 标签：apache-flex, internet-explorer, http, https, browser-cache

我有一个 adobe flex 应用程序，它执行 xml ajax 请求来填充图形。我有一个问题，客户不会取消选中 IE 中的“不将加密页面保存到磁盘”设置，当他们加载图表时，他们会收到“服务器通信错误”。

我尝试了几种标题组合：

```
// works in IE8, but not IE9
Pragma => ''
Cache-control => '' 

// works in IE8, but not IE9
Pragma => ''
Cache-control => 'no-store' 

// works in IE8, but not IE9
Pragma => 'public'
Cache-control => 'max-age=0' 

// doesn't work in IE8 or IE9
Pragma => 'no-cache'
Cache-control => 'no-cache,max-age=30,must-revalidate' 
```

有人能告诉我魔法巫毒术可以让它在所有版本的 IE > 8 中工作吗

或者，我的 Windows 测试虚拟机上是否有一些奇怪的设置导致缓存标头被忽略。

我通过大量谷歌搜索找到的一般批准的解决方案似乎只是取消选中 IE 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:52:50.813

您可以使用`POST`request 而不是`GET`来避免任何缓存。据我所知，没有浏览器缓存`POST`请求

嗨，M。

# wpf - “ContentControl 的内容必须是单个元素。” 例外

> ID：12609724
> 
> 赞同：3
> 
> 时间：2012-09-26T20:20:32.197
> 
> 标签：wpf, contentcontrol

我是 WPF 的新手，所以这可能是一个愚蠢的问题，但就是这样。
我正在尝试使用 XAML 事物创建自定义按钮，所以这就是我所拥有的：

```
<Button x:Class="Controls.ShinyButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Height="40" Width="150">
    <Button.Resources>
        <ResourceDictionary Source=".\Resources.xaml" />
    </Button.Resources>

    <Border Background="{StaticResource BlueGradient}" CornerRadius="5">
        <DockPanel>
            <Image x:Name="imgIcon" DockPanel.Dock="Left" Height="32" Margin="4"/>
            <TextBlock DockPanel.Dock="Right" Text ="Test" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="White" />
        </DockPanel>
    </Border>

    <Button.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF02B6FF" Offset="0" />
            <GradientStop Color="#FF0084F0" Offset="1" />
        </LinearGradientBrush>
    </Button.Background>
 </Button> 
```

设计者理解它并且编译没有错误，但是当我尝试运行程序并创建它的实例时，我收到错误：
“ContentControl 的内容必须是单个元素。”

我的资源文件是：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <LinearGradientBrush x:Key="BlueGradient">
        <GradientStop Offset="0" Color="#FF02B6FF"/>
        <!-- (2, 182, 255)-->
        <GradientStop Offset="1" Color="#FF0084F0"/>
        <!-- (0, 132, 240) -->
    </LinearGradientBrush>

</ResourceDictionary> 
```

我的边框内有 DockPanel，所以按钮只有一个孩子......
“ShinyButton”类看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace Controls
{
    /// <summary>
    /// Interaction logic for ShinyButton.xaml
    /// </summary>
    public partial class ShinyButton : Button
    {
        public ShinyButton()
        {
            InitializeComponent();
        }
    }
} 
```

在 main 函数中，我像这样添加它：

```
public MainWindow()
        {
            InitializeComponent();

            ShinyButton shiny = new ShinyButton();
            this.AddChild(shiny); //This is where the exception is thrown.

        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T20:38:11.713

只是一个猜测和 atm 我无法测试它，但请尝试以下代码：

```
<Button.Template>
    <ControlTemplate>
        <Border Background="{StaticResource BlueGradient}" CornerRadius="5">
            <DockPanel>
                <Image x:Name="imgIcon" DockPanel.Dock="Left" Height="32" Margin="4"/>
                <TextBlock DockPanel.Dock="Right" Text ="Test" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="White" />
            </DockPanel>
        </Border>
    </ControlTemplate>
</Button.Template> 
```

编辑：好的，下次尝试：

不要将 ShinyButton 添加到窗口（删除 this.AddChild(shiny)），而是尝试通过添加以下代码将 ShinyButton 添加到网格：

```
NameOfGrid.Children.Add(shiny); 
```

这个错误的原因是你的 Window 只能有一个孩子，我敢打赌，在你的情况下，已经有一个 Grid 作为这个孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:44:20.577

刚刚尝试了您的代码，它工作正常，但有一些警告。

为了让它工作，我需要删除 resouceDictionary 链接，因为我没有那个文件。是否有可能定义某些内容，而不仅仅是样式/模板等？

另外我注意到您的代码有一个 x:Class="ShinyButton"，代码和 xaml 中是否定义了任何内容？

# dynamic-linking - 更改 Mach-o 二进制文件中的函数引用

> ID：12609728
> 
> 赞同：0
> 
> 时间：2012-09-26T20:21:13.570
> 
> 标签：dynamic-linking, mach-o

我需要将 mach-o 二进制文件中的函数引用更改为我自己的 dylib 中定义的自定义函数。我现在遵循的过程是，

1.  将对旧函数的引用替换为新函数。例如`_fopen`使用`_mopen`sed。

2.  [我在MachOView](http://sourceforge.net/projects/machoview/)中打开 mach-o 二进制文件以查找我想要更改的实体的地址。然后我使用十六进制编辑器手动更改二进制文件中的信息。

有没有一种方法可以使这个过程自动化，即编写一个程序来读取符号和动态加载信息，然后在可执行文件中更改它们。我正在查看 mach-o 头文件，`/usr/include/mach-o`但不完全确定如何使用它们来获取此信息。是否存在任何库 - C 或 python 可以帮助做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:11:22.963

varrunr - 使用 DYLD 的插入，您可以轻松实现大部分（如果不是全部）功能。您创建自己的库，并声明您的插入函数，就像这样

```
// This is the expected interpose structure
typedef struct interpose_s {
    void *new_func;
    void *orig_func;
} interpose_t;

static const interpose_t interposing_functions[] \
    __attribute__ ((section("__DATA, __interpose"))) = {
        { (void *)my_open,  (void *) open  }
    }; 
```

..你只需实现你的开放。在插入函数中，所有对原始函数的引用都将起作用——这使得它成为包装器的理想选择。而且，您可以使用 DYLD_INSERT_LIBRARIES 强行插入您的 dylib（与 Linux 上的 LD_PRELOAD 原理相同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T19:41:49.840

有趣的问题，我正在尝试做一些类似于静态库的事情；看看[这](http://www.apriorit.com/our-company/dev-blog/226-imported-function-redirection-in-mach-o)是否有帮助

# javascript - 如何根据其值更改所需表单输入的 CSS 样式

> ID：12609737
> 
> 赞同：2
> 
> 时间：2012-09-26T20:21:58.130
> 
> 标签：javascript, html, validation

我想知道如何编写 javascript 来改变所需的表单元素的样式；如果它们有值，就改变它们。

我想要做的是当它们为空白时在所需的文本字段周围有一个彩色边框，并在它们有值时删除边框样式。

我想做的是编写一个javascript函数来检查值是否为空并设置适当的样式：

```
function requiredElement(id) {
  var Input = document.getElementById(id);
  if(Input.value==null) {
    Input.style.border = '2px solid #FF0000';
  }
} 
```

但是我坚持的是当用户在这些必填字段中输入/删除字符时更改样式，并为这些字段调用函数。

我有一个简单的 html 表单，每个输入都有一个唯一的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:26:17.827

使用 jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

然后添加此代码：

```
$('.important').change(function() {
  if(($(this).val()) != '') $(this).css( 'border-width', '0' );
  else  $(this).css( 'border-width', '2' );
}); 
```

假设您在 css 中添加了边框

```
.important
{
    border-style:solid;
    border-width:2px;
    border-color:red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:32:01.457

要确定元素的值何时更改，请将您的自定义函数绑定到`onchange`and`onkeypress`事件（或者，在 jQuery 中，绑定到[.change()](http://api.jquery.com/change/)和[.keypress()](http://api.jquery.com/keypress/)）。

要真正改变元素的外观，最好在 CSS 类中定义样式并使用 JavaScript 酌情添加/删除该类。

您可以通过 JavaScript 更改 HTML 元素的 CSS 类，如下所示：

```
element = document.getElementById("myElement");
element.className = "invalid"; 
```

或者，在 jQuery 中，使用[.addClass()](http://api.jquery.com/addClass/)函数：

```
$("#myElement").addClass("invalid"); 
```

* * *

HTML：

```
<input id="something" name="something" type="text" class="inputClass"
    onchange="requireElement(this)"
    onkeypress="requireElement(this)" /> 
```

JavaScript：

```
function requireElement(element) {
    if(element.value == null)
        element.className = "inputClass invalid";
    else
        element.className = "inputClass";
} 
```

# wpf - Del 键不会触发 ApplicationCommands.Delete

> ID：12609739
> 
> 赞同：2
> 
> 时间：2012-09-26T20:22:01.277
> 
> 标签：wpf, canvas, command, ribbon, fluent

我创建了一个名为 的 Canvas 的自定义实现，`DrawingCanvas`用户可以在其上绘制路径、矩形等。

我添加了对`ApplicationCommands.Delete`命令的支持：

```
void DrawingCanvas_Loaded(object sender, RoutedEventArgs e)
{
    CommandBindings.Add(new CommandBinding(
        ApplicationCommands.Delete,
        HandleDeleteExecuted,
        CanExecuteDelete));
} 
```

然后从 Fluent Ribbon Control Suite 中定义一个按钮来使用它：

```
<Fluent:Button x:Name="deleteButton"
                Header="Delete"
                Icon="Images\Delete16.png"
                SizeDefinition="Middle, Small, Small"
                Command="ApplicationCommands.Delete"
                CommandTarget="{Binding ElementName=drawingCanvas}"/> 
```

在 XAML 中进一步向下`DrawingCanvas`定义为`x:Name="drawingCanvas"`.

当您单击按钮时，命令将正确执行，并且我的处理方法`DrawingCanvas`被调用。

现在，我希望此设置足以使用该`Del`键触发命令，但事实并非如此。

我对 WPF 比较陌生，不知道我在这里做错了什么，或者至少我该如何调试它。非常感谢任何指针。谢谢！

# node.js - 无法从 Ubuntu 上的 NodeJS 连接到 MongoDB。OSX 上的相同代码可以正常工作

> ID：12609743
> 
> 赞同：0
> 
> 时间：2012-09-26T20:22:24.723
> 
> 标签：node.js, mongodb, ubuntu, express, mongoose

我在我的 osx 笔记本电脑和远程 ubuntu 服务器上本地安装了 mongodb。两者都运行 mongodb，我可以使用端口 28017 上的 http 诊断来验证这一点。我在两台计算机上运行相同的代码。在 osx 上一切正常，但在 Ubuntu 上，我无法通过 NodeJS 连接到数据库。我不断收到此错误：

```
Error: failed to connect to [localhost:27017]]
message:  listen EADDRNOTAVAIL
stack:  Error: listen EADDRNOTAVAIL
    at errnoException (net.js:769:11)
    at Server._listen2 (net.js:892:19)
    at listen (net.js:936:10)
    at Server.listen (net.js:993:9)
    at asyncCallback (dns.js:67:16)
    at Object.onanswer [as oncomplete] (dns.js:120:9) 
```

我不明白的是，我可以通过 mongo 命令行界面在本地连接 Ubuntu。我还可以通过我的 OSX 计算机上的 mongo 命令连接到 Ubuntu 上的数据库。所以 MongoDB 本身的安装似乎没有什么问题。

谁能想到我无法通过 NodeJS 连接的原因？我试过使用 mongodb 和 mongoose 包。两者都给了我同样的错误。

以下是我尝试的两种方法：

```
var mongo = require("mongodb");
var host = "localhost";
var port = mongo.Connection.DEFAULT_PORT;
var db = new mongo.Db('node-mongo-examples', new mongo.Server(host, port, {}), {});
db.open(function(err, db){
    if(err){
        log.error('MongoDB connection error:', err);
    }else{
        log.info("OPEN MONGO CONNECTION");
    }
}); 
```

和猫鼬：

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'node-mongo-examples');

db.on('error', function(err){
  log.error('MongoDB connection error:', err);
});

db.once('open', function () {
  log.debug("OPEN MONGO CONNECTION");
}); 
```

在日志中我没有看到任何特别之处，也没有任何反应

```
***** SERVER RESTARTED *****

Wed Sep 26 18:00:18 [initandlisten] MongoDB starting : pid=13377 port=27017 dbpath=/var/lib/mongodb 64-bit host=octo-dev
Wed Sep 26 18:00:18 [initandlisten] db version v2.2.0, pdfile version 4.5
Wed Sep 26 18:00:18 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Wed Sep 26 18:00:18 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Wed Sep 26 18:00:18 [initandlisten] options: { config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Wed Sep 26 18:00:18 [initandlisten] journal dir=/var/lib/mongodb/journal
Wed Sep 26 18:00:18 [initandlisten] recover : no journal files present, no recovery needed
Wed Sep 26 18:00:18 [websvr] admin web console waiting for connections on port 28017
Wed Sep 26 18:00:18 [initandlisten] waiting for connections on port 27017 
```

.....除非我通过mongo命令行界面连接：

```
Wed Sep 26 18:30:40 [initandlisten] connection accepted from 127.0.0.1:38229 #3 (1 connection now open) 
```

我没有东西可以尝试了。有什么解决这个问题的建议吗？

* * *

一些额外的信息

```
sudo netstat -tulpn
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:27017           0.0.0.0:*               LISTEN      13377/mongod    
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      885/mysqld      
tcp        0      0 0.0.0.0:1935            0.0.0.0:*               LISTEN      1102/java       
tcp        0      0 0.0.0.0:9999            0.0.0.0:*               LISTEN      1102/java       
tcp        0      0 192.87.219.76:10000     0.0.0.0:*               LISTEN      31171/webserver 
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      1387/java       
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      1076/apache2    
tcp        0      0 0.0.0.0:28017           0.0.0.0:*               LISTEN      13377/mongod    
tcp        0      0 0.0.0.0:48466           0.0.0.0:*               LISTEN      12418/java      
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      3507/sshd       
tcp        0      0 127.0.0.1:9016          0.0.0.0:*               LISTEN      12418/java      
tcp        0      0 0.0.0.0:5080            0.0.0.0:*               LISTEN      1102/java       
tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      1216/master     
tcp        0      0 0.0.0.0:41018           0.0.0.0:*               LISTEN      12418/java      
tcp        0      0 0.0.0.0:8443            0.0.0.0:*               LISTEN      1102/java       
tcp        0      0 0.0.0.0:9090            0.0.0.0:*               LISTEN      12418/java      
tcp        0      0 0.0.0.0:29090           0.0.0.0:*               LISTEN      12418/java      
tcp        0      0 127.0.0.1:8100          0.0.0.0:*               LISTEN      8535/soffice.bin
tcp        0      0 127.0.0.1:8005          0.0.0.0:*               LISTEN      1387/java       
tcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      887/slapd       
tcp        0      0 0.0.0.0:33736           0.0.0.0:*               LISTEN      1102/java       
tcp6       0      0 :::22                   :::*                    LISTEN      3507/sshd       
tcp6       0      0 :::389                  :::*                    LISTEN      887/slapd       
udp        0      0 192.87.219.76:123       0.0.0.0:*                           721/ntpd        
udp        0      0 127.0.0.1:123           0.0.0.0:*                           721/ntpd        
udp        0      0 0.0.0.0:123             0.0.0.0:*                           721/ntpd        
udp        0      0 0.0.0.0:5353            0.0.0.0:*                           797/avahi-daemon: r
udp        0      0 0.0.0.0:55248           0.0.0.0:*                           797/avahi-daemon: r
udp6       0      0 :::123                  :::*                                721/ntpd        
udp6       0      0 :::35920                :::*                                797/avahi-daemon: r
udp6       0      0 :::5353                 :::*                                797/avahi-daemon: r 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:46:47.177

确保端口`27017`对 Ubuntu 中的 Web 服务器开放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:32:14.710

我发现问题了！！系统有一个混乱的 /etc/hosts 文件。与 localhost 配置不同的东西。更正这个文件解决了一切：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:56:05.180

尝试`mongo`从终端触发命令。如果 mongodb 出现问题，它将显示错误。

# javascript - Web Worker 中的 AJAX 请求？

> ID：12609744
> 
> 赞同：0
> 
> 时间：2012-09-26T20:22:28.023
> 
> 标签：javascript, ajax

在我的 Web 应用程序中，用户在页面上所做的操作必须发送到我的数据库，因此我保存了最新的更改。

当用户关闭页面时，我只是在此处调用带有请求的函数：

```
window.onbeforeunload = sendData; 
```

但是出现问题的地方是我每 10 秒发送一次数据。我确实发送我的请求同步而不是异步（或者它不会被发送`onbeforeunload`）。问题在于，当每 10 秒发送一次数据时，这会增加用户界面的延迟。

```
setInterval(sendData,10000); 
```

这就是所谓的：

```
function sendData(){
     var xhr = new XMLHttpRequest();
     var localData = datatodatabase;
     xhr.open("POST", "handler.php", false);
     xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
     xhr.send("pack="+datatodatabase);
} 
```

是否可以在 Web Worker 中添加它以使同步请求停止延迟其他一切正在发生的事情？

（正如我所说：我必须使用同步，因为`onbeforeunload`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:27:30.603

为什么不让它每 10 秒异步一次，而是`onbeforeunload`让它同步呢？像这样：

```
setInterval(function () {
    sendData(true);
}, 10000);

window.onbeforeunload = function () {
    sendData(false);
}

function sendData(async) {
    // Make the ajax call the specific way based on whether *async* is *true* or *false*

    // Probably eventually:
    xhr.open("POST", "handler.php", async);
} 
```

# c# - 修改作为参数传递给修改类的对象的正确方法

> ID：12609745
> 
> 赞同：1
> 
> 时间：2012-09-26T20:22:30.083
> 
> 标签：c#

以下 2 条建议中修改对象属性的最佳方法是什么，该对象正在由接受对象作为参数的类修改？

1.  让类处理对象并返回一个值，然后将其分配给对象

或者。

1.  使用 ref 关键字传递对象并让类修改对象而不实际返回任何内容。

例如，我有一个 Person 对象，其中包含 First Name 和 Last Name 以及 2 种不同的创建全名的方法。

哪个是最好的方法？

```
public static void Main()
{
    Person a = new Person {  FirstName = "John", LastName = "Smith" };
    Person b = new Person { FirstName = "John", LastName = "Smith" };

    NameProcesser np = new NameProcesser();

    // Example A
    a.FullName = np.CreateFullNameA(a);

    // Example B
    np.CreateFullNameB(ref b);
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; }
}

public class NameProcesser
{
    public string CreateFullNameA(Person person)
    {
        return person.FirstName + " " + person.LastName;
    }

    public void CreateFullNameB(ref Person person)
    {
        person.FullName = person.FirstName + " " + person.LastName;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:25:47.377

你不需要`ref`。只需修改方法中的对象。

当引用类型作为参数传递时，它是“按引用”传递的，而不是按值传递的。因此，当您修改它时，您实际上是在修改原始对象。只有`ref`在传递值类型（例如`int`.

我用引号说“通过引用”，因为实际发生的是指向原始对象的内部“指针”正在*按值*传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:04:40.103

## 第一件事

您提到的事实`ref`表明您缺少一个基本概念；也就是说，可以访问对象引用的代码根据定义可以访问*实际*对象。

唯一可以想到的使用`ref`参数的使用场景是，当您想将该引用设置为某个其他对象或`null`.

如果您不使用`ref`（甚至`out`就此而言，请参阅[此处](https://stackoverflow.com/questions/388464/whats-the-difference-between-the-ref-and-out-keywords)的区别），您实际上是按值传递参数，这意味着创建了它的副本。

这意味着两件事，取决于参数是**值类型**（如 int、long、float 等）还是**引用类型**（引用任何类的实例）。

如果参数是值类型，则会创建它的副本。然后，您的方法可以为所欲为，因为副本仅限于该方法的范围。

但是，如果参数是引用类型（如您`Person`所愿），则仅复制*引用*本身：底层对象是相同的。这就是最大的区别所在。但是请记住，您在方法中可用的引用仍然是原始引用的副本，这意味着您可以将其设置为`null`，将其设置为另一个对象，简而言之，对它做任何您喜欢的事情：一旦方法返回，该引用将消失，原始引用将保持不变。

## 话虽如此

正如其他人告诉你的那样，真的没有必要使用`ref`.

此外，只要您处理诸如连接名字和姓氏之类的琐碎情况，我就会让对象本身来做（就像 Slapout 所做的那样）。

如果出现这种需要，以后总有时间分离职责。

还要考虑为这样一个微不足道的任务设置一个单独的类也可能被认为是违反直觉的。说这是手头的代码：

```
var p = new Person() { FirstName = "John", LastName = "Smith"} ;

Console.WriteLine(p.FullName); 
```

当我这样做时，我完全期望`FullName`在任何时候都返回一些有意义的东西（即“John Smith”）。

相反，使用您的两种方法，如果我忘记（并且*我会*）打电话会发生什么`CreateFullName`？

如果您确实需要将给定的关注点移动到单独的类中，请将其隐藏在属性的`get`方法中。

这样，人们就不需要知道你写的类的基础，而且它仍然是可测试的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:24:59.607

两者都 - 而且你不需要'ref' - 只需使用：

```
public void CreateFullNameB(Person person) 
{ 
    person.FullName = person.FirstName + " " + person.LastName; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:29:56.957

首先，将方法分离到另一个类的唯一原因是该方法是否具有数据库或网络访问等依赖项。否则，那个简单的方法应该是`Person`类的属性。

此外，将整个对象传递给方法的唯一原因是对象数据在该方法中被广泛使用。否则最好将 FirstName 和 LastName 作为参数传递并返回结果。

类不需要通过`ref`修饰符来修改其内容。ref 仅在方法想要分配参数并引用新实例时才需要。

在您描述的示例中，如果从两个选项中进行选择，则返回值会更好，因为它减少了耦合并将逻辑与数据表示分离。但是如果一个实体的属性很少可以更新，那么传递对象会更好。

# c - 使用 fts(3) 遍历文件系统

> ID：12609747
> 
> 赞同：2
> 
> 时间：2012-09-26T20:22:38.390
> 
> 标签：c, linux, unix, filesystems, traversal

我有一个问题`fts(3)`。每当我尝试访问该`fts_children()`函数的任何成员时，都会遇到分段错误。当我在[http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html)阅读手册页时，它声称在读取函数运行后自行填充并返回链接的链接列表通过`link`结构中的字段。我怀疑 child_function 什么也没返回，但我觉得这与手册页不符。我是否应该将这些文件添加到子缓冲区，因为我认为这是自动完成的？我的代码如下，谢谢！

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fts.h>
#include<string.h>

int compare (const FTSENT**, const FTSENT**);

int main(int argc, char* const argv[])
{

        FTS* file_system = NULL;
        FTSENT* child = NULL;
        FTSENT* parent = NULL;
        FTSENT* temp = NULL;

        file_system = fts_open(argv + 1,FTS_COMFOLLOW | FTS_NOCHDIR,&compare);

        while( (parent = fts_read(file_system)) != NULL)
        {

             child = fts_children(file_system,0);
             printf("%s\n", child->fts_path);

        }
//      while (child ->fts_link != NULL)
      //         child = child->fts_link;
        fts_close(file_system);
        return 0;
}

int compare(const FTSENT** one, const FTSENT** two){
        return (strcmp((*one)->fts_name, (*two)->fts_name));
}
"test_fs.c" 43L, 1108C 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-12T14:31:02.833

如果您只对遍历指定路径的所有目录和文件感兴趣，只需重复调用`fts_read`.

如果您只想遍历流，@sehe 的示例可以重写为：

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>
#include<fts.h>
#include<string.h>
#include<errno.h>

int compare (const FTSENT**, const FTSENT**);
void indent (int i);

int main(int argc, char* const argv[])
{
    FTS* file_system = NULL;
    FTSENT *node,    = NULL;

    if (argc<2)
    {
        printf("Usage: %s <path-spec>\n", argv[0]);
        exit(255);
    }

    file_system = fts_open(argv + 1,FTS_COMFOLLOW|FTS_NOCHDIR,&compare);

    if (NULL != file_system)
    {
        while( (node = fts_read(file_system)) != NULL)
        {
            switch (node->fts_info) 
            {
                case FTS_D :
                case FTS_F :
                case FTS_SL:
                    indent(node->fts_level);
                    printf("%s\n", node->fts_name);
                    break;
                default:
                    break;
            }
        }
        fts_close(file_system);
    }
    return 0;
}

int compare(const FTSENT** one, const FTSENT** two)
{
    return (strcmp((*one)->fts_name, (*two)->fts_name));
}

void indent(int i)
{
    for (; i > 0; i--) 
        printf("    ");
} 
```

当您运行它时，它会遍历流并按顺序列出所有文件和目录：

```
★ mkdir -p test/A/1 test/A/2 test/B/1 test/B/2

★ tree test                                   
test
├── A
│   ├── 1
│   └── 2
└── B
    ├── 1
    └── 2

★ ./fts test                                  
test
    A
        1
        2
    B
        1
        2 
```

`fts_children`仅当您需要特定目录的子节点列表时才调用。在这种情况下，您必须`fts_read`在调用之前至少调用一次`fts_children`；否则`fts_children` 只会将`argv`参数中指定的节点返回给`fts_open`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:51:23.983

您只需要添加一个 NULL 检查。

你可能想要

*   为`file_system`
*   检查命令行参数
*   添加更多错误处理：

    > 如果成功，该`fts_children()`函数返回一个指向结构的指针，该`FTSENT`结构描述`NULL`目录中终止的文件链接列表中的第一个条目。该`fts_children()`函数可能会失败并针对、、、和函数指定`errno`的任何错误进行设置。`chdir()``malloc()``opendir()``readdir()``stat()`

**更新**到评论中的新问题：

*   链表遍历的while循环放错了（在外循环之外？）
*   printf 只显示路径......而不是文件名。

当你在它的时候：

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fts.h>
#include<string.h>
#include<errno.h>

int compare (const FTSENT**, const FTSENT**);

int main(int argc, char* const argv[])
{
    FTS* file_system = NULL;
    FTSENT* child = NULL;
    FTSENT* parent = NULL;

    if (argc<2)
    {
        printf("Usage: %s <path-spec>\n", argv[0]);
        exit(255);
    }

    file_system = fts_open(argv + 1,FTS_COMFOLLOW | FTS_NOCHDIR,&compare);

    if (NULL != file_system)
    {
        while( (parent = fts_read(file_system)) != NULL)
        {
            child = fts_children(file_system,0);

            if (errno != 0)
            {
                perror("fts_children");
            }

            while ((NULL != child)
                && (NULL != child->fts_link))
            {
                child = child->fts_link;
                printf("%s%s\n", child->fts_path, child->fts_name);
            }
        }
        fts_close(file_system);
    }
    return 0;
}

int compare(const FTSENT** one, const FTSENT** two)
{
    return (strcmp((*one)->fts_name, (*two)->fts_name));
} 
```

示例输出片段：

```
./.profiles/sehe/.opera/icons/cache/g_0000
./.profiles/sehe/.opera/icons/cache/g_0000/opr00002.tmp
./.profiles/sehe/.opera/icons/cache/g_0000/opr00003.tmp
./.profiles/sehe/home/sehe/.mozilla
fts_children: Permission denied
./.vbox-sehe-ipc/lock 
```

# windows - 装配中的 Windows 音频

> ID：12609748
> 
> 赞同：4
> 
> 时间：2012-09-26T20:22:38.520
> 
> 标签：windows, audio, assembly, x86-16

我正在考虑在 8086 ASM 中使用 VGA 进行图形制作游戏，但在继续进行任何操作之前，我想确保我可以将音频输入到我的项目中。我怀疑 PC 扬声器是否足够。

我正在寻找一种在 Windows 的 8086 中编程音乐的方法。现代声卡中是否有某种标准可以直接访问，还是必须使用 Windows API？我现在不确定要寻找什么，所以欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:53:21.090

与最终融合为 (S)VGA 的显示器不同，声卡从未达到相同的兼容性。有不同的 Sound Blasters、Gravis Ultrasound 等。如今，现代硬件通常与那些不兼容，如果没有适当的 DOS 驱动程序或不知道支持的内存区域、端口、格式和协议，您就无法在 DOS 中将它们编程为 Sound Blaster。

我只能建议为像 DosBox 这样的 PC/DOS 仿真器编写这样的程序，它可以模拟 Sound Blaster 和 (S)VGA。那应该行得通。

或者，您可以编写一个普通的 Windows 程序，使用 Win32 API 进行输入、绘图和声音。

# c++ - 如何在 C++ 中创建一个类，使其表现得像一个原生 int 类

> ID：12609749
> 
> 赞同：3
> 
> 时间：2012-09-26T20:22:38.513
> 
> 标签：c++, class, types, int, declaration

我正在学习 C++，并了解到 int 类型只是预制类。所以我想也许我应该尝试创建一个。

我想做的基本上是一个普通的int类

```
int x;
x=7;
cout << x; 
```

// 屏幕上的输出是 7。

所以同样...

```
abc x;
x=7;
cout << x; 
```

我会放什么

```
class abc{
\\ HERE!!!!!! 
}; 
```

所以我可以这样做

```
class SomeClass {
public:
    int x;

    SomeClass(int x) {
        this->x = x;
    }
};

int main(int argc, char *argv[]) {
    SomeClass s = 5;

    cout << s.x << "\n"; // 5

    s = 17;

    cout << s.x << "\n"; // 17

    return 0;
} 
```

但正如你所看到的，我必须使用 sx 来打印值——我只想使用 's'。我做它是作为一个实验，我不想听到这种方法是好是坏，是无意义的还是革命性的，或者是做不到的。我记得我做过一次。但只能通过复制和粘贴我不完全理解甚至忘记的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T20:27:58.670

> 并了解到 int、types 只是预制类

这是完全错误的。尽管如此，您仍然可以完全控制类在表达式中的行为方式，因为您可以（几乎）重载任何运算符。您在这里缺少的是执行`operator<<`时调用的通常重载：

```
cout<<s; 
```

您可以像这样创建它：

```
std::ostream & operator<<(std::ostream & os, const SomeClass & Right)
{
    Os<<Right.x;
    return Os;
} 
```

有关详细信息，请参阅有关运算符重载的[常见问题解答。](https://stackoverflow.com/questions/4421706/operator-overloading)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:28:10.473

您需要`operator<<`为您的课程重载，如下所示：

```
class abc
{
public:
    abc(int x) : m_X(x) {}

private:
    int m_X;

    friend std::ostream& operator<<(std::ostream& stream, const abc& obj);  
};

std::ostream& operator<<(std::ostream& os, const abc& obj)
{
    return os << obj.m_X;
} 
```

除非您想访问受保护/私人成员，否则`friend`您不必超载。`operator<<`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T22:17:38.717

您必须在您的类中将`abc`运算符定义为 int 并从 int 中定义赋值运算符，就像在这个模板类中一样：

```
template <class T>
class TypeWrapper {
public:
  TypeWrapper(const T& value) : value(value) {}
  TypeWrapper() {}
  operator T() const { return value; }
  TypeWrapper& operator (const T& value) { this->value = value; return *this; }
private:
  T value;
};

int main() {
  TypeWrapper<int> x;
  x = 7;
  cout << x << endl; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T20:26:07.110

<< 和 >> 基本上是函数名。你需要为你的班级定义它们。与 +、-、* 和所有其他运算符相同。方法如下：

[http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:27:45.017

您想重载输出运算符：

```
std::ostream& operator<< (std::ostream& out, SomeClass const& value) {
    // format value appropriately
    return out;
} 
```

# c# - 了解如何使用类

> ID：12609751
> 
> 赞同：2
> 
> 时间：2012-09-26T20:22:57.250
> 
> 标签：c#, class

我正在尝试了解如何在 C# 中使用或访问多个类，有人可以向我解释这段代码的作用吗？

```
public class Mammal : Animal
{   
    public Mammal(String name) : base(name) { }

    public override void Eat(Food food)
    {
        Console.WriteLine("Mammal \"" + Name + "\" eats " + food.Name);
    }
} 
```

目的是`public override void Eat(Food food)`什么？我的意思是它有什么作用？？

```
namespace ConsoleApplication1
{
    public class Food
    {
        private String name;

        Food(String name)
        {
            this.name = name;
        }

        public String Name
        {
            get 
            {
                return name;
            }
            set
            {
                name = value;
            }
        }   
    }

    public class Animal
    {
        private String name = "no name";

        public String Name {
            get 
            { 
                return name; 
            }
            set 
            { 
                name = value; 
            }
        }

        private Animal() { }

        public Animal(String name)
        {
            this.name = name;
        }

        public virtual void Eat(Food food)
        {
            Console.WriteLine("Animal \"" + Name + "\" eats " + food.Name);
        }

        public virtual void Born() 
        {
            Console.WriteLine("Animal \"" + Name + "\" is born");
        }

        public virtual void Die() 
        {
            Console.WriteLine("Animal \"" + Name + "\" is died");
        }
    }

    public class Mammal : Animal
    {   
        public Mammal(String name) : base(name) { }

        public override void Eat(Food food)
        {
            Console.WriteLine("Mammal \"" + Name + "\" eats " + food.Name);
        }

        public override void Born()
        {
            Console.WriteLine("Mammal \"" + Name + "\" is born");
        }

        public override void Die()
        {
            Console.WriteLine("Mammal \"" + Name + "\" is died");
        }

        public virtual void FedMilk(Mammal[] children)
        {
            for (Int32 i = 0; i < children.Length; i++)
            {
                Console.WriteLine("Mammal \"" + Name + "\" feds milk child \"" + children[i].Name + "\"");
            }
        }
    }

    public class Horse : Mammal
    {
        public Horse(String name) : base(name) { }

        public override void Eat(Food food)
        {
            Console.WriteLine("Horse \"" + Name + "\" eats " + food.Name);
        }

        public override void Born()
        {
            Console.WriteLine("Horse \"" + Name + "\" is born");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T20:34:13.820

行，

您已经定义了一个名为哺乳动物的基本类，然后您创建了不同类型的哺乳动物，例如 Animal，然后是特定的动物（Horse）。

所以每个哺乳动物都需要吃东西，所以你为什么要创建一个叫做吃的函数。

但是每一种哺乳动物都吃同样的东西吗？不！！！

但是每一个哺乳动物都需要吃东西。

所以在那个地方，覆盖属性很方便，它允许你覆盖“吃”的基本功能，这样你就可以指定吃每一种特定动物的东西。

因此，当您创建一个狗类时，您将覆盖eat 函数并指定谁吃一些狗粮。

但是因为您的所有特定动物也是动物，您可以将它们称为动物并打印吃功能。

假设你想看看每一种动物都吃什么。您将创建一个动物列表的循环并打印eat 函数。

因为您已经覆盖了吃功能并指定了每种食物。您将为每只动物获得正确的食物。

我在说清楚吗？

例如看这段代码

```
List<Animal> animals = new List<Animal>();

            Horse hr = new Horse();
            Dog dg = new Dog();
            Bird br = new Bird();

            animals.Add(hr);
            animals.Add(dg);
            animals.Add(br);

            foreach(var animal in Animals)
            {
                Console.WriteLine(animal.eat());
            } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T20:37:49.217

`override`是 C# 中的一个关键字，它表示“嘿，我想以不同于我的基（父）类的方式来做这件事。” 它与[多态性](https://www.google.com/search?q=what%20is%20polymorphism?)有关。

对于发布的代码，您有一个*类层次结构*。A`Mammal`是 的特定类型`Animal`。所以我们可以说*Mammal 继承自 Animal 基类*( `Mammal : Animal`)。

在`Animal`基类中，有`virtual`成员（如`public virtual void Eat`）。这些*虚拟*成员中的任何一个都可以在更派生的类中被覆盖。

当您`override`在更派生的类中使用虚拟属性或方法时，您是在说“当有人使用此属性或方法时，如果该对象是 Mammal 的实例，则与该实例是基本 Animal 或其他一些实例时的做法不同一种动物（例如鸟、鱼或爬行动物）”。

```
Animal beaver = new Mammal("beaver"); // "Mammal beaver"
Animal finch = new Bird("finch"); // "Bird finch"
Animal japaneseHuman = new Mammal("Japanese human"); // "Mammal Japanese human"
Animal godzilla = new Reptile("godzilla"); // "Reptile godzilla"

beaver.Eat(new Food("wood")); // "eats wood"
finch.Eat(new Food("nuts")); // "eats nuts"
japaneseHuman.Eat(new Food("whale")); // "eats whale"
godzilla.Eat(new Food("Japanese people")); // "eats Japanese people" 
```

您还可以在抽象基类`override`中声明类型。`abstract`覆盖`abstract`几乎就像覆盖一样工作`virtual`，除了没有定义基本实现（只定义了基本*签名*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:44:18.583

覆盖为类提供了更改特定方法实现方式的能力。

通过阅读示例代码，所有`Animal`的 s 都可以出生，可以死亡，可以吃东西。`Mammal`和类中的覆盖`Horse`允许不同的功能。吃的方式可能与`Horse`吃的方式不同`Dog`。

方法是虚拟的这一事实允许 ode 例如：

```
Animal[] animals = new Animal[] { new Horse(), new Dog(), new Mammal() };
foreach (Animal animal in animals)
{
    animal.Born();
    animal.Eat(new Food());
    animal.Die();
} 
```

上面的每个调用都会向下流动，并将调用`Horse.Born()`or`Dog.Eat(Food)`实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T20:46:33.373

> Blockquote public override void Eat(Food food) 的目的是什么，我的意思是它有什么作用？

哺乳动物是动物类型的一类。如果 Animal 是一个抽象类，那么 Mammal 将继承 Animal 拥有的所有属性和方法，并且必须具有 Animal 中所有抽象的实现。所有抽象意味着它只是一个框架，它强制子类实现抽象类知道它们必须具备的东西才能正常运行。

哺乳动物有一种方法，食物，它是特定于其类别的，并且与所有其他动物所做的不同。尽管所有动物都可能在为食物定义的基类动物中拥有一个方法，但哺乳动物总是会使用它自己的方法——这就是覆盖的意思。

所以回顾一下：

```
Mammal someMammal = new Mammal();
someMammal.Eat(new Food()); 
```

在这种情况下，将调用的 eat 版本是 Mammal's Eat。

现在，如果我们这样做：

```
Animal someAnimal = new Animal();--must be non-abstract
someaAnimal.Eat(new Food()); 
```

这里我们称之为动物版的吃。

现在如果我们这样做呢？

```
Mammal someMammal = new Mammal();
someMammal.Eat(new Food());--no surprise we get mammal's eat
Animal someAnimal = (Animal)someMammal;
someAnimal.Eat(new Food());--but what happens here!? 
```

好吧，因为 Mammal 的 eat 是一个覆盖，所以哺乳动物的 eat 方法将被再次调用。如果它没有被覆盖，我们会得到动物的。

供参考，以了解有关覆盖、基类/派生类和虚拟类的更多信息。 [http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:39:31.093

**public override void Eat(Food food)**的目的是什么，我的意思是它有什么作用？？

在基类中，Eat 方法已被标记为虚拟。这意味着它可以被任何继承它的类重新实现。这就是这段代码的作用：

```
public override void Eat(Food food) 
```

它为继承类定义了 Eat 方法。

# firefox - 从选项卡获取窗口对象

> ID：12609753
> 
> 赞同：3
> 
> 时间：2012-09-26T20:23:03.717
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在开发 Firefox 的 Addon SDK (v1.10) 的扩展。

我的扩展程序有一个工具栏按钮，可以根据活动选项卡的内容在其左侧更新一个小徽章。

**问题**

当打开多个窗口时，工具栏按钮会更新为活动选项卡的值，无论它是否在同一个窗口上。这意味着非活动窗口的工具栏按钮正在使用来自不同窗口的数据进行更新。

可以访问数据来源的选项卡对象，有没有办法识别选项卡附加到的窗口对象？

这将与[此处](https://stackoverflow.com/a/8103203/1560260)描述的这种方法相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:45:00.397

查看 SDK 源代码（即`packages/api-utils/lib/tabs/tab.js`），`tab`对象实际上具有`window`属性。我测试了它，这确实有效：

```
console.log(require("tabs").activeTab.window.title); 
```

不确定为什么没有记录此属性，可能是文档错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T22:20:24.353

这会是活动窗口吗？您可以使用获取当前活动窗口的窗口对象

```
windows.browserWindows.activeWindow 
```

文档：[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/windows.html#browserWindows](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/windows.html#browserWindows)

window 对象有一个当前打开的选项卡列表：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/windows.html#tabs](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/windows.html#tabs)

如果您需要在不是当前活动选项卡或窗口的窗口中查找选项卡，则可能更难确定。你能提供更多关于你真正想要做什么的细节吗？

# c# - 我可以做些什么来阻止其他人运行我的 Windows RT 代码？

> ID：12609754
> 
> 赞同：5
> 
> 时间：2012-09-26T20:23:04.380
> 
> 标签：c#, windows-runtime, obfuscation

从 Windows 应用商店下载的应用程序安装在此位置：

```
C:\Program Files\WindowsApps 
```

如果你查看这个文件夹，你可以访问每个应用程序的 .exe 并使用反射器来反编译它们。

目前，我的 Windows RT 应用程序通过 SSL 向 WCF 服务发送密码，以确保只有使用我的应用程序的人才能访问我的数据库（通过服务）。

如果任何人都可以阅读我的代码，我如何确保只有使用我的 Windows 8 应用程序的人才能访问该服务？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T20:39:00.717

在非常普遍的意义上，这是不可能的。如果您创建任何放置在客户计算机上的东西，最终您会偶然发现有人会设法破译您的代码并了解如何调用您的服务。您可能会将其混淆为疯狂的级别，但它仍然**必须**由处理器执行，因此处理器必须理解它。如果确实如此，那么任何了解汇编的人都可以理解它。您可能会巧妙地混淆它，以便从不重要的垃圾中清理代码非常耗时，但在某些时候仍然有人会阅读它。

一种常见的防御措施是试图检测*谁**实际上正在尝试使用您的服务。这就是为什么所有“门户”都要求您“注册”的原因。这样，应用程序身份就被边缘化了，提供登录名、密码、PGP 密钥等的用户会被检查并验证他/她是否被允许实际运行您的服务。

此外，在操作系统/框架层，有几种方法可以选择性地向您的客户提供“许可证”，然后在您的应用程序中，您可以使用许可证中的密钥/哈希值在您的服务中进行身份验证。这可能会部分减轻用户记住密码等的负担，或者它可能提供额外的身份验证因素，或者它可能只是一个允许或不运行应用程序的是-否标志。不过，它不会保护您的代码不被阅读。许可证仅有助于验证软件副本是否合法以及是否属于该特定用户/计算机。

您可以选择性地仅针对“反射”（或dotpeeking，或ildasming，或......）采取行动。这些工具确实使反编译变得容易（尽管原来的反射器现在是付费软件）。因此，最简单的形式是使用混淆器，这将使反编译变得不可能或更难——这会减少一些潜在的代码阅读者，你可以假设脚本小子已经消失了。您可以忽略混淆器，并且可以使用**本机**代码（C++，而不是 C++/cli）编写服务连接器。这将使代码完全不可反射和不可靠，这将切断另一大比例的人，但仍然会留下一些人（我和其他数千人，但这远少于数百万人）。

虽然这并没有给你明确的答案，但我想告诉你，你只能得到一些“硬度”，但你不能让它完全不被阅读。这就是为什么您应该专注于以这种方式访问​​服务，在街上向陌生人展示您的代码不会危及您的安全。

现在开始解决您的问题：核心问题似乎不在于您的应用程序使用了一些秘密算法，而在于您已将密码硬编码在其中。您看，使用这种方法，他们不需要阅读您的代码。他们只需要监听您的应用程序通过套接字发送的数据..

另一个问题是**每个人都使用相同的关键词**。

硬编码的魔术字符串可能是某种验证，但绝不是身份验证。如果您希望应用程序免注册，请在首次运行时使注册静音和自动？当然，你只会解决这个问题：任何人都可以阅读代码并学习如何自动注册，然后他们将进行克隆。但是，就像我说过的那样：你永远不知道谁在另一边。它是您的应用程序，还是它的理想克隆？或者它可能是一个克隆，使用你自己的 hacked-a-bit 库连接到你？如果它长得像鸭子，叫起来像鸭子，那它就是鸭子。

# gcc - 检测 GCC 为哪个目标 CPU 配置？

> ID：12609758
> 
> 赞同：5
> 
> 时间：2012-09-26T20:23:14.630
> 
> 标签：gcc, c-preprocessor

> **可能重复：**
> [检测 CPU 架构编译时](https://stackoverflow.com/questions/152016/detecting-cpu-architecture-compile-time)

是否有 GCC 设置的定义来告诉配置 GCC 的 CPU（x86/amd64/ppc/etc）？

所以我可以像这样使用它：

```
#ifdef PPCARCH
  dosomething();
#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:30:51.320

要在源代码中在编译时检测架构，请使用预定义的宏。

根据这篇[文章](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/cpp/System_002dspecific-Predefined-Macros.html)，它总是有一个形式的名称，`_arch_`或者`__arch__`arch是目标架构的名称。要查看确切定义的内容，请使用以下命令：

```
touch foo.h; cpp -dM foo.h; rm foo.h 
```

它将打印出所有预定义的宏。

要在命令行上打印，请尝试：

```
gcc -dumpmachine 
```

它将显示 GCC 的构建目标。

# c# - 如何在路由中定义 PUT 方法仅限于控制器中的 Put 方法而不使用参数？

> ID：12609759
> 
> 赞同：10
> 
> 时间：2012-09-26T20:23:15.323
> 
> 标签：c#, routing, asp.net-mvc-4, asp.net-web-api

下面是 WebApiConfig.cs 中的路由配置：

```
config.Routes.MapHttpRoute(
    name: "DefaultApiPut",
    routeTemplate: "api/{controller}",
    defaults: new { httpMethod = new HttpMethodConstraint(HttpMethod.Put) }
);

config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get, HttpMethod.Post, HttpMethod.Delete) }
); 
```

这是我的控制器：

```
public class MyController : ApiController {
    [HttpPut]
    public void Put()
    {
        //blah
    }
} 
```

不知何故，当客户端发送带有 URL 的 PUT 请求时`/api/myController/12345`，它仍然映射到中的`Put`方法`MyController`，我期待一个错误，比如找不到资源。

如何强制`Put`方法只接受不带参数的请求？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-09T19:35:36.603

这可以限制路由上的 http 方法：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
    config.Routes.MapHttpRoute(
       name: "LocationApiPOST",
       routeTemplate: "api/{orgname}/{fleetname}/vehicle/location",
       defaults: new { controller = "location" }
       constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) }
   );

    config.Routes.MapHttpRoute(
       name: "LocationApiGET",
       routeTemplate: "api/{orgname}/{fleetname}/{vehiclename}/location/{start}",
       defaults: new { controller = "location", start = RouteParameter.Optional }
       constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
   );

   ...

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-27T03:41:12.577

您将`httpMethod`约束放入`defaults`，但它应该放入`constraints`.

`defaults`只是说如果请求不包含部分或全部作为路由参数时的默认值是什么（在动词的情况下，这是没有意义的，因为每个 HTTP 请求总是有一个动词作为协议的一部分）。`constraints`限制将激活路由的路由值组合，这是您实际尝试做的。

仅供参考，对于这种简单/标准的路由，您也不需要`[HttpPut]`API 控制器中的属性。这已经由将动词映射到控制器方法的 HTTP 路由处理了。

# regex - 我想根据 Powershell 中的正则表达式为管道字符串的高亮部分着色

> ID：12609760
> 
> 赞同：6
> 
> 时间：2012-09-26T20:23:16.787
> 
> 标签：regex, powershell, console, format

这是一个技术问题，但作为一个练习，我的目的是编写一个 PS 来接受管道输入，并使用正则表达式作为参数，并突出显示与正则表达式匹配的任何文本。

我找不到任何信息的部分是它很容易匹配文本、捕获到缓冲区或替换文本。但是我需要用颜色控制替换匹配的文本，原始文本，然后恢复以前的颜色。除了使用写入输出之外，我似乎找不到任何生成颜色输出的方法，并且不能在一次写入中执行单独的颜色，这意味着：

- 匹配正则表达式

-write-host 在默认颜色匹配之前输出所有文本，使用 -NoNewLine

-write-host 匹配，使用 -NoNewLine

-write-host 剩下的

这看起来很混乱，如果我们想要支持多个匹配，就会变得更加混乱。有没有更雄辩的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T20:54:40.443

`Write-Host`是这样做的正确方法。使用结果对象的`.Index`和`.Length`属性`Match`来确定匹配文本的确切位置。您只需要小心跟踪索引:)

这适用于多场比赛，并且不是非常不整洁的 IMO：

```
function ColorMatch
{
   param(
      [Parameter(Mandatory = $true, ValueFromPipeline = $true)]
      [string] $InputObject,

      [Parameter(Mandatory = $true, Position = 0)]
      [string] $Pattern
   )

   begin{ $r = [regex]$Pattern }
   process
   {
       $ms = $r.Matches($inputObject)
       $startIndex = 0

       foreach($m in $ms)
       {
          $nonMatchLength = $m.Index - $startIndex
          Write-Host $inputObject.Substring($startIndex, $nonMatchLength) -NoNew
          Write-Host $m.Value -Back DarkRed -NoNew
          $startIndex = $m.Index + $m.Length
       }

       if($startIndex -lt $inputObject.Length)
       {
          Write-Host $inputObject.Substring($startIndex) -NoNew
       }

       Write-Host
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-10T03:35:52.267

或者，我发现使用[ANSI/VT100 格式](https://powershell.org/forums/topic/how-to-use-ansi-vt100-formatting-in-powershell-ooh-pretty-colors/)更简单，并且使用更大范围的颜色完全符合我的需要：

```
$esc=[char]27
$fileContents="abc455315testing123455315abc"
$keywordSearch="testing123"

$fileContents -replace $keywordSearch,"$esc[38;2;0;200;255m$keywordSearch$esc[0m" 
```

请注意，这仅适用于 PowerShell 控制台窗口，不适用于 PowerShell ISE。这个[维基百科页面](https://en.wikipedia.org/wiki/ANSI_escape_code)也很有帮助；特别是关于选择颜色的这一行：

> ESC[ 38;2;⟨r⟩;⟨g⟩;⟨b⟩ m 选择 RGB 前景色

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T15:24:13.210

这是拉特金答案的延伸。在这里，我扩展了 Match 对象，以便可以更轻松地为此目的以及其他目的对其进行处理。

```
function Split-Match {
    param([Parameter(Mandatory = $true)]
    $match
    )
    $sections = @()
    $start = 0
    $text = $m.Line
    foreach ($m in $match.Matches) {
        $i = $m.Index
        $l = $m.Length

        $sections += $false, $text.Substring($start, $i - $start)
        $sections += $true, $text.Substring($i, $l)
        $start = $i + $l
    }
    $sections += $false, $text.Substring($start)
    $match | Add-Member -Force Sections $sections
    $match
}

function Write-Match {
    param([Parameter(Mandatory = $true)]
    $match
    )
    $fg = "White"
    $bg = "Black"
    foreach($s in $match.Sections) {
        if ($s.GetType() -eq [bool]) {
            if ($s) {
                $fg = "White"
                $bg = "Red"
            } else {
                $fg = "White"
                $bg = "Black"
            }
        } else {
            Write-Host -NoNewline -ForegroundColor $fg -BackgroundColor $bg $s
        }
    }
    Write-Host
}

$string = @'
Match this A
Not this B
Not this C
But this A
'@
$m = $string | select-string -CaseSensitive -AllMatches "A"
$m = Split-Match $m
Write-Match $m 
```

[![输出](../Images/84a27e94ffb24b3938a695a699a7e87c.png)](https://i.stack.imgur.com/6IUlH.png)

# c# - 使用“使用”实例化和简单实例化有什么区别

> ID：12609763
> 
> 赞同：0
> 
> 时间：2012-09-26T20:23:35.473
> 
> 标签：c#

我一直在研究一些代码。我有一个问题：

这两个代码有什么区别？

```
using (FORM formExemple = new FORM ())
{
formExemple.ShowDialog();
} 
```

和

```
FORM formExemple = new FORM ();
formExemple.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T20:26:00.680

`using`完成后调用对象的`Dispose()`方法进行清理。它通常处理诸如关闭打开的连接和/或释放内存之类的事情。如果您以其他方式实例化它，则必须手动执行此操作。您只能`using`在实现该`IDisposable`接口的对象上使用，这可以确保`Dispose()`该对象存在方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T20:25:45.830

using 块用于自动处理实现`IDisposable`. 第一个`Dispose()`在块的末尾被调用。using 块还将确保在发生异常时正确处理对象。

当开发人员确定他们不再需要该对象时，第二个不需要并且需要由开发人员处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T20:26:10.893

与以往一样，请查阅文档 -[语句的](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)[MSDN C# 指南`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)或 C# 规范（它是 C# 5 规范中的第 8.13 节）。

该`using`语句只能与实现的类型一起使用`IDisposable`，并且它基本上确保在初始表达式（*资源获取表达式*）中出现的任何资源都被放置在块的末尾，即使抛出异常也是如此。您的第一个代码片段大致相当于：

```
FORM formExemple = new FORM(); // I hope you don't *really* use these names
try
{
    formExemple.ShowDialog();
}
finally
{
    formExemple.Dispose();
} 
```

请注意，除此之外还有更多内容：

*   资源获取表达式中声明的任何变量的作用域都是`using`语句本身
*   它处理空值
*   `using`它处理语句中变量的变化（*原始*值仍然被释放）

基本上，它可以更轻松地清理需要及时处理的资源——网络流、文件句柄、数据库连接、图形对象等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T20:26:55.247

`using`是您可以与已实现 IDisposable 接口的对象一起使用的东西。使用 using 的原因是一旦你完成了你的表单，你不必担心任何清理工作，Form 上的 Dispose 方法将被调用，一切都会被清理。

在您的第二个示例中，从未调用 Dispose 并且对象仍在内存中，并且如果垃圾收集器无法识别它需要清理它，则可能会存在一段时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T20:27:31.860

使用[语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)...

```
using (Font font1 = new Font("Arial", 10.0f)) 
{
    byte charset = font1.GdiCharSet;
} 
```

... 是以下模式的语法快捷方式（语法糖）：

```
{
    Font font1 = new Font("Arial", 10.0f);
    try
    {
      byte charset = font1.GdiCharSet;
    }
    finally
    {
      if (font1 != null)
        ((IDisposable)font1).Dispose();
    }
} 
```

（我从上面的链接中获取了示例）

...因此，您的两个代码片段之间的区别是`try`+ 对 -block 的`IDisposable.Dispose()`调用`finally`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-26T20:26:21.977

using 语句定义了 formExemple 的范围，一旦超出 using 语句的控制，为 formExemple 分配的内存将被释放。

# sql - SQL Server 2008 XML 输入参数到存储过程以传递“IN”子句值

> ID：12609769
> 
> 赞同：0
> 
> 时间：2012-09-26T20:23:57.057
> 
> 标签：sql, sql-server, xml

所以我有`checkboxlist`一个 ASP.NET 表单。我需要选择的 ID作为存储过程 ( )`checkboxes`中子句的一部分。非常简单——假设用户选择, , , , 那么我的程序会询问 where 的值。由于我不能做动态语句，而且我不想动态构建查询，我认为 XML 会是一个不错的选择。 `IN``SQL Server 2008``1``2``4``7``TranCode IN (1,2,4,7)``IN`

因此，我在 VB.NET -`<chargecode><refnum>1</refnum><refnum>2</refnum></chargecode>`等 中构建 XML 字符串`TranCode`并`RefNum`表示相同的字段，它们只是在事务表和描述表之间命名不同，因此`refnum`如果需要，我可以在我的 XML 中更改为其他内容，但是我肯定要使用`TranCode`比较列。

在我的存储过程中，我声明了一个名为 的 XML 变量`@ChargeCodesXML`，它将包含从 VB.NET 传入的 XML 字符串。基本上，我需要做的就是将所有引用句柄字段从 XML 文件中拉出，以便与`TranCode`. 该过程有几个连接，一些聚合函数，分组等，但基本上我想要类似的东西

```
SELECT * FROM SomeTable WHERE TranCode IN (SELECT RefNum FROM MyXMLFile) 
```

我一直在四处搜索，看到了许多复杂的 XML 查询，但没有什么比我需要的更简单，所以我对我看到的示例感到不知所措。有人可以告诉我如何为这个非常简单的比较修改我的过程吗？

谢谢！麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:47:05.570

这样的事情应该解决你的问题：

```
SELECT * FROM SomeTable WHERE TranCode IN (
  SELECT
    ChargeCode.RefNum.value('.', 'INT')
  FROM
    @ChargeCodesXML.nodes('/chargecode/refnum') AS ChargeCode(RefNum)
) 
```

此查询的关键部分是您使用[节点](http://msdn.microsoft.com/en-us/library/ms188282.aspx)方法来分解 XML。如果您打算在 SQL Server 2008 中花费大量时间使用 XML，我建议您阅读一下这方面的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:43:04.450

```
SELECT * 
FROM SomeTable 
WHERE TranCode IN (
                  SELECT T.N.value('(./text())[1]', 'int')
                  FROM @ChargeCodesXML.nodes('/chargecode/refnum') AS T(N)
                  ) 
```

# javascript - 尝试 OO Javascript，但似乎继承变量不像我习惯的那样工作？

> ID：12609773
> 
> 赞同：2
> 
> 时间：2012-09-26T20:24:09.683
> 
> 标签：javascript, jquery, function

我在想拥有一个带有变量和方法的函数将能够允许子函数引用变量。也许我做错了，并且想要一些关于如何正确格式化这些东西的建议。

```
function somefunction(callback) {
    var x,y,z;
    var timervar = setInterval(function() {
        //...
        callback().always(function() {
            x++;
        });
        //...
    }, 1);
} 
```

我将如何正确关联 X？

**编辑：**

我正在一个while循环中进行一些迭代。x,y,z 是存储计数器信息的变量。*当回调*完成执行时，我或多或少地增加或减少变量。

它不调用更多回调（）的原因是因为它处于while循环中。WHich 很好，很漂亮，因为它与 X 值有关。似乎在某个点之后，它退出了 while 循环的范围并等待 .always() 被触发，以便它能够恢复 while 循环。while 循环在计时器内设置，因此它每 10 毫秒检查一次是否准备好继续查找。

**最终编辑：** 总是没有触发，因为我忘记了回调（）中的返回，所以它从未被识别为已完成。. *_* .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:58:47.310

另一种方法是制作自包含模块：

```
somefunction = (function() {
    var x,y,z;

    return {
        callback: function(){
            return x++;
        }
    }
}); 
```

[您可以在http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)上探索有关 JavaScript 设计模式的精彩文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:33:06.700

尝试类似的东西

```
var SomeObj = {
  x: 0,
  myFunc : function(){
     SomeObj.x++;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T22:34:54.750

尝试这个：

```
function createObject(o) {
    function F() {}
    F.prototype = o;
    return new F();
} 
```

取自原型继承：http: [//javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)

```
var SomeObj = {
  x: 0,
  myFunc : function(){
     SomeObj.x++;
  }
}

var newObj = createObject(SomeObj); 
```

也许这篇文章会有所帮助？[https://stackoverflow.com/a/3075818/566012](https://stackoverflow.com/a/3075818/566012)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:34:46.043

我在JS中使用了以下继承实现

```
/**
* inheritance
* 
* @author Kevin Lindsey
* @version 1.0
* 
* copyright 2006, Kevin Lindsey
* 
*/

// namespace placeholder
TWE = {};

/**
* A function used to extend one class with another
* 
* @param {Object} subClass
*       The inheriting class, or subclass
* @param {Object} baseClass
*       The class from which to inherit
*/
TWE.extend = function(subClass, baseClass) {
    function inheritance() { }
    inheritance.prototype = baseClass.prototype;

    subClass.prototype = new inheritance();
    subClass.prototype.constructor = subClass;
    subClass.baseConstructor = baseClass;
    subClass.superClass = baseClass.prototype;
} 
```

然后你可以做类似的事情：

```
function myBaseClass() {
this._datamember1 = ....;
//more data members
}

function mySubClass() {
 mySubClass.baseConstructor.call(this);   

//list additional data members here
}

TWE.extend(mySubClass, myBaseClass); 
```

在此处查看更多信息 [http://www.kevlindev.com/tutorials/javascript/inheritance/index.htm](http://www.kevlindev.com/tutorials/javascript/inheritance/index.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:51:58.700

我会说你可以分配

变我=这个；

然后在您的代码中，您可以使用 me.x、me.y 等。

# vb.net - 在带有音量控制的 VB.net 中播放音频文件 (.wav)

> ID：12609782
> 
> 赞同：2
> 
> 时间：2012-09-26T20:24:47.470
> 
> 标签：vb.net, audio, xna, directx, volume

**编辑：在下面的自我回答中解决。**

我已经查看了所有内容，但找不到任何对使用音量控制播放音频文件有用的东西。我试过XNA；SLIMDX 和“Microsoft.VisualBasic.Devices.Audio”，但没有任何帮助。我发现有音量控制的选项太复杂了，我不知道如何使用，而且我目前的方法除了播放（有或没有循环的背景，或暂停执行直到结束）之外，不能让你做任何事情玩）并停止。

这是我当前的代码：

```
Dim AD As New Microsoft.VisualBasic.Devices.Audio
   Sub Play()
        Dim af() As Byte = IO.File.ReadAllBytes("music.wav")
        AD.Play(af, AudioPlayMode.BackgroundLoop)
   End Sub 
```

这会在后台循环播放“music.wav”，但我无法暂停/查找它或控制音量。有没有简单的方法（如上）从缓冲区播放音频文件并控制音量？我已经查看了所有内容，但没有找到适合我的项目的内容。

> 系统：Win7 64位
> 
> VS版本：2010
> 
> 语言：VB.net

哦还有一件事，首先缓冲音频也是我的解决方案所需要的（正如您在我当前的代码中看到的那样）

有人对此有解决方案吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:58:25.320

经过一番搜索，我找到了答案，所以这是我为我的问题找到的解决方案：

下载[Naaudio](http://naudio.codeplex.com/)并将引用添加到您的项目中。

然后下面的代码是如何使用它从缓冲区加载音频：

```
Dim Wave1 As New NAudio.Wave.WaveOut 'Wave out device for playing the sound

Dim xa() As Byte = IO.File.ReadAllBytes("C:\YourPath\YourWave.wav") 'Your Buffer

Sub PlaySound()

        Dim data As New IO.MemoryStream(xa) 'Data stream for the buffer

        Wave1.Init(New NAudio.Wave.BlockAlignReductionStream(NAudio.Wave.WaveFormatConversionStream.CreatePcmStream(New NAudio.Wave.WaveFileReader(data))))

        Wave1.Volume = 0.1 'Sets the Volume to 10%

        Wave1.Play()

End Sub 
```

**WaveFileReader**可以更改为您需要的任何阅读器（即用于“.mp3”文件的 MP3 阅读器）以加载您的音频文件，但代码按原样用于加载“.wav”文件。

哦，还有，别忘了

```
WaveOut.Dispose() 
```

当你完成以避免错误时。

我希望我的研究对某人有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:29:53.577

您是否尝试过使用[媒体播放器控件](http://www.viscomsoft.com/Tutorials/movieplayerpro/1/how_to_create_media_player_application.htm)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T23:04:34.950

嘿，我已经创建了一个类来处理 wave(pcm) 文件，希望这会对你有所帮助。它尚未完成，但可能会有所帮助。

```
Imports System.IO 
```

导入 System.Runtime.InteropServices 导入 System.ComponentModel

公共结构 WaveHeader Public Chunk As Char() Public ChunkSize As Int32 Public Format As Char() Public SubChunk1 As Char() Public SubChunk1Size As Int32 Public AudioFormat As Int16 Public Channels As Int16 Public SampleRate As Int32 Public ByteRate As Int32 Public BlockAlign As Int16 Public BitsPerSample As Int16 Public SubChunk2 As Char() Public SubChunk2Size As Int32 结束结构

公共枚举状态 无 播放 暂停 停止 结束 枚举

公共课wav

```
Private watch As New Stopwatch
Private WithEvents timer As New Timer

Private mystate As State = State.None
Private myheader As WaveHeader

Private myurl As String = Nothing
Private mytotaltime As Double = 0

Private Declare Function SetProcessWorkingSetSize Lib "kernel32.dll" (ByVal process As IntPtr, ByVal minimumWorkingSetSize As Integer, ByVal maximumWorkingSetSize As Integer) As Integer

Event OnPlayStateChange(ByVal e As State)

Public Shared Sub FlushMemory()
    GC.Collect()
    GC.WaitForPendingFinalizers()
    If (Environment.OSVersion.Platform = PlatformID.Win32NT) Then
        SetProcessWorkingSetSize(Process.GetCurrentProcess().Handle, -1, -1)
    End If
End Sub

Sub New()
    timer.Interval = 1
    timer.Start()
End Sub

Function readheader(ByVal url As String)
    Dim fh As WaveHeader
    Dim stream As New FileStream(url, FileMode.Open)
    Dim br As New BinaryReader(stream)
    fh.Chunk = br.ReadChars(4)
    fh.ChunkSize = br.ReadInt32
    fh.Format = br.ReadChars(4)
    fh.SubChunk1 = br.ReadChars(4)
    fh.SubChunk1Size = br.ReadInt32
    fh.AudioFormat = br.ReadInt16
    fh.Channels = br.ReadInt16
    fh.SampleRate = br.ReadInt32
    fh.ByteRate = br.ReadInt32
    fh.BlockAlign = br.ReadInt16
    fh.BitsPerSample = br.ReadInt16
    For i = 1 To fh.SubChunk1Size - 16
        br.ReadByte()
    Next
    fh.SubChunk2 = br.ReadChars(4)
    fh.SubChunk2Size = br.ReadInt32
    br.Close()
    stream.Close()

    Return Header2String(fh)
End Function

Function Header2String(ByVal fh As WaveHeader)
    Dim t As String = ""
    t &= "Chunk             " & fh.Chunk & Environment.NewLine
    t &= "Chunksize         " & fh.ChunkSize & Environment.NewLine
    t &= "Format            " & fh.Format & Environment.NewLine
    t &= "subChunk1         " & fh.SubChunk1 & Environment.NewLine
    t &= "subchunk1size     " & fh.SubChunk1Size & Environment.NewLine
    t &= "PCM               " & fh.AudioFormat & Environment.NewLine
    t &= "Channels          " & fh.Channels & Environment.NewLine
    t &= "Samplerate        " & fh.SampleRate & Environment.NewLine
    t &= "ByteRate          " & fh.ByteRate & Environment.NewLine
    t &= "Block Align       " & fh.BlockAlign & Environment.NewLine
    t &= "Bits/Sample       " & fh.BitsPerSample & Environment.NewLine
    t &= "subChunk2         " & fh.SubChunk2 & Environment.NewLine
    t &= "subChunk2size     " & fh.SubChunk2Size & Environment.NewLine
    Return t
End Function

Function StopAudio()
    My.Computer.Audio.Stop()
    watch.Stop()
    watch.Reset()
    If PlayState = State.Playing Or PlayState = State.Paused Then
        mystate = State.Stopped
    End If
    Return 0
End Function

Function playAudio(ByVal url As String)
    If My.Computer.FileSystem.FileExists(url) Then
        Try
            My.Computer.Audio.Play(SongStream(url, 0), AudioPlayMode.Background)
            'My.Computer.Audio.Play(fast(url, 0, CDbl(form1.TextBox4.Text)), AudioPlayMode.Background)

            watch.Restart()
            mystate = State.Playing
            RaiseEvent OnPlayStateChange(State.Playing)
            myurl = url
        Catch ex As Exception
            Throw New Exception("Error! Can't Play The File.")
            'MsgBox(ex.Message)
        End Try
    Else
        Throw New Exception("File Not Exist.")
    End If
    Return 0
End Function

Function PauseAudio()
    If PlayState = State.Playing Then
        My.Computer.Audio.Stop()
        watch.Stop()
        mystate = State.Paused
        RaiseEvent OnPlayStateChange(State.Paused)
    End If
    Return 0
End Function

Function ResumeAudio()
    If PlayState = State.Paused And IsNothing(URL) = False Then
        Try
            My.Computer.Audio.Play(SongStream(URL, time), AudioPlayMode.Background)
            watch.Start()
            mystate = State.Playing
            RaiseEvent OnPlayStateChange(State.Playing)
        Catch : End Try
    End If
    Return 0
End Function

Private Function fast(ByVal url As String, ByVal position As Double, ByVal speed As Single)
    Dim fh As New WaveHeader
    Dim stream As New FileStream(url, FileMode.Open)
    Dim br As New BinaryReader(stream)

    fh.Chunk = br.ReadChars(4)
    fh.ChunkSize = br.ReadInt32
    fh.Format = br.ReadChars(4)
    fh.SubChunk1 = br.ReadChars(4)
    fh.SubChunk1Size = br.ReadInt32
    fh.AudioFormat = br.ReadInt16
    fh.Channels = br.ReadInt16
    fh.SampleRate = br.ReadInt32
    fh.ByteRate = br.ReadInt32
    fh.BlockAlign = br.ReadInt16
    fh.BitsPerSample = br.ReadInt16
    fh.SampleRate *= speed
    fh.ByteRate *= speed

    For i = 1 To fh.SubChunk1Size - 16
        br.ReadChar()
    Next

    stream.Position = fh.SubChunk1Size + 20

    fh.SubChunk2 = br.ReadChars(4)
    fh.SubChunk2Size = br.ReadInt32

    If fh.Channels = 6 Then
        fh.Channels = 2
        fh.BlockAlign = fh.Channels * fh.BitsPerSample / 8
        fh.SampleRate = fh.SampleRate * (6 / fh.Channels)
    End If

    position = Math.Round(CInt(position / 1000) * fh.ByteRate)
    If position >= fh.SubChunk2Size Then
        Throw New Exception("Songs isn't that long")
    End If

    mytotaltime = Math.Round(fh.SubChunk2Size / fh.ByteRate)

    fh.SubChunk2Size -= position

    Dim header() As Byte = {Asc("R"), Asc("I"), Asc("F"), Asc("F"), 0, 0, 0, 0, Asc("W"), Asc("A"), Asc("V"), Asc("E"), Asc("f"), Asc("m"), Asc("t"), Asc(" "), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, Asc("d"), Asc("a"), Asc("t"), Asc("a"), 0, 0, 0, 0}
    BitConverter.GetBytes(fh.SubChunk2Size).CopyTo(header, 40)
    BitConverter.GetBytes(fh.BitsPerSample).CopyTo(header, 34)
    BitConverter.GetBytes(fh.BlockAlign).CopyTo(header, 32)
    BitConverter.GetBytes(fh.ByteRate).CopyTo(header, 28)
    BitConverter.GetBytes(fh.SampleRate).CopyTo(header, 24)
    BitConverter.GetBytes(fh.Channels).CopyTo(header, 22)
    BitConverter.GetBytes(fh.AudioFormat).CopyTo(header, 20)
    BitConverter.GetBytes(16).CopyTo(header, 16)
    BitConverter.GetBytes(fh.SubChunk2Size + 36).CopyTo(header, 4)
    myheader = fh
    Dim audio(fh.SubChunk2Size + 44) As Byte
    header.CopyTo(audio, 0)
    stream.Position = position
    br.ReadBytes(fh.SubChunk2Size).CopyTo(audio, 44)

    br.Dispose()
    stream.Dispose()
    br = Nothing
    stream = Nothing

    Return audio
End Function

Private Function SongStream(ByVal url As String, ByVal position As Double)
    Dim fh As New WaveHeader
    Dim stream As New FileStream(url, FileMode.Open)
    Dim br As New BinaryReader(stream)

    fh.Chunk = br.ReadChars(4)
    fh.ChunkSize = br.ReadInt32
    fh.Format = br.ReadChars(4)
    fh.SubChunk1 = br.ReadChars(4)
    fh.SubChunk1Size = br.ReadInt32
    fh.AudioFormat = br.ReadInt16
    fh.Channels = br.ReadInt16
    fh.SampleRate = br.ReadInt32
    fh.ByteRate = br.ReadInt32
    fh.BlockAlign = br.ReadInt16
    fh.BitsPerSample = br.ReadInt16

    For i = 1 To fh.SubChunk1Size - 16
        br.ReadChar()
    Next

    stream.Position = fh.SubChunk1Size + 20

    fh.SubChunk2 = br.ReadChars(4)
    fh.SubChunk2Size = br.ReadInt32

    If fh.Channels = 6 Then
        fh.Channels = 2
        fh.BlockAlign = fh.Channels * fh.BitsPerSample / 8
        fh.SampleRate = fh.SampleRate * (6 / fh.Channels)
    End If

    position = Math.Round(CInt(position / 1000) * fh.ByteRate)
    If position >= fh.SubChunk2Size Then
        Throw New Exception("Songs isn't that long")
    End If

    mytotaltime = Math.Round(fh.SubChunk2Size / fh.ByteRate)

    fh.SubChunk2Size -= position

    Dim header() As Byte = {Asc("R"), Asc("I"), Asc("F"), Asc("F"), 0, 0, 0, 0, Asc("W"), Asc("A"), Asc("V"), Asc("E"), Asc("f"), Asc("m"), Asc("t"), Asc(" "), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, Asc("d"), Asc("a"), Asc("t"), Asc("a"), 0, 0, 0, 0}
    BitConverter.GetBytes(fh.SubChunk2Size).CopyTo(header, 40)
    BitConverter.GetBytes(fh.BitsPerSample).CopyTo(header, 34)
    BitConverter.GetBytes(fh.BlockAlign).CopyTo(header, 32)
    BitConverter.GetBytes(fh.ByteRate).CopyTo(header, 28)
    BitConverter.GetBytes(fh.SampleRate).CopyTo(header, 24)
    BitConverter.GetBytes(fh.Channels).CopyTo(header, 22)
    BitConverter.GetBytes(fh.AudioFormat).CopyTo(header, 20)
    BitConverter.GetBytes(16).CopyTo(header, 16)
    BitConverter.GetBytes(fh.SubChunk2Size + 36).CopyTo(header, 4)
    myheader = fh
    Dim audio(fh.SubChunk2Size + 44) As Byte
    header.CopyTo(audio, 0)
    stream.Position = position
    br.ReadBytes(fh.SubChunk2Size).CopyTo(audio, 44)

    br.Dispose()
    stream.Dispose()
    br = Nothing
    stream = Nothing

    Return audio
End Function 
```

# 区域“财产”

```
<Browsable(False)> ReadOnly Property PlayState
    Get
        Return mystate
    End Get
End Property

<Browsable(False)> ReadOnly Property URL
    Get
        Return myurl
    End Get
End Property

ReadOnly Property TotalTime
    Get
        Return mytotaltime
    End Get
End Property

ReadOnly Property time
    Get
        Return watch.ElapsedMilliseconds
    End Get
End Property

ReadOnly Property timestamp
    Get
        Return watch.Elapsed.ToString
    End Get
End Property 
```

# 结束区域

```
Private Sub timer_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles timer.Tick
    If Not TotalTime = 0 Then
        If TotalTime <= time / 1000 Then
            watch.Stop()
            watch.Reset()
            mystate = State.Finished
            RaiseEvent OnPlayStateChange(State.Finished)
        End If
    End If
    FlushMemory()
End Sub

ReadOnly Property SongHeader As WaveHeader
    Get
        Return myheader
    End Get
End Property 
```

结束类

公共类频谱

```
Dim h As WaveHeader

Function readheader(ByVal url As String)
    Dim fh As WaveHeader
    Dim stream As New FileStream(url, FileMode.Open)
    Dim br As New BinaryReader(stream)
    fh.Chunk = br.ReadChars(4)
    fh.ChunkSize = br.ReadInt32
    fh.Format = br.ReadChars(4)
    fh.SubChunk1 = br.ReadChars(4)
    fh.SubChunk1Size = br.ReadInt32
    fh.AudioFormat = br.ReadInt16
    fh.Channels = br.ReadInt16
    fh.SampleRate = br.ReadInt32
    fh.ByteRate = br.ReadInt32
    fh.BlockAlign = br.ReadInt16
    fh.BitsPerSample = br.ReadInt16
    For i = 1 To fh.SubChunk1Size - 16
        br.ReadByte()
    Next
    fh.SubChunk2 = br.ReadChars(4)
    fh.SubChunk2Size = br.ReadInt32
    h = fh
    Return br.ReadBytes(fh.SubChunk2Size)
End Function

Function showit()
    Dim b As New Bitmap(500, 200)
    Dim g As Graphics = Graphics.FromImage(b)
    Dim d() As Byte = readheader("songs\s.wav")
    'Dim t As Integer = d.Count
    For i = 0 To d.Count - 1
        Dim x = CInt((i / d.Count) * 500)
        Dim y = CInt(d(i).ToString) - 200
        g.DrawLine(Pens.Black, x, 0, x, y)
    Next

    'g.FillEllipse(Brushes.Black, 0, 0, 500, 300)
    Return b.Clone
End Function 
```

结束类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T13:37:52.333

由于似乎很少有关于在 VB.NET 中使用 naudio 的文档，而不是随处可见的 C# 示例，并且根据@user1666788 的评论，这是一种让它播放 VB.NET 的 MP3 文件的简单方法，而不是WAV。

```
Public Shared Wave1 As New NAudio.Wave.WaveOut 'Wave out device for playing the sound

Public Sub btn_PlayPause_Click(sender As Object, e As EventArgs) Handles btn_PlayPause.Click

        Dim file As String = "C:\test.mp3"
        Dim data As New NAudio.Wave.Mp3FileReader(file)
        Wave1.Init(data)
        Wave1.Play()
End Sub 
```

# c# - Resharper 猛拉自己的尾巴；是第一次正确还是最后一次正确？

> ID：12609788
> 
> 赞同：6
> 
> 时间：2012-09-26T20:25:18.053
> 
> 标签：c#, winforms, refactoring, resharper

我有一些冗长的代码：

```
private bool AnyUnselectedCombox()
{
    bool anyUnselected = false;
    foreach (Control c in this.Controls)
    {
        if (c is ComboBox)
        {
            if ((c as ComboBox).SelectedIndex == -1)
            {
                anyUnselected = true;
                break;
            }
        } 
    }
    return anyUnselected;
} 
```

...Resharper 提供了一个优雅的 LINQ 表达式，如下所示：

```
return this.Controls.OfType<ComboBox>().Any(c => (c as ComboBox).SelectedIndex == -1); 
```

...但是随后的 Resharper 检查说明了它生成的代码（上图）：*“类型转换是多余的”*（指的是“c as ComboBox”部分），因此它最终成为：

```
return this.Controls.OfType<ComboBox>().Any(c => c.SelectedIndex == -1); 
```

Resharper 不应该生成 Resharper 认可的代码吗？或者它只是有时需要两次传球才能完全“束腰”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T20:30:32.303

是的，有时 ReSharper 会自行纠正，需要第二遍才能使其“恰到好处”。我一直认为它使用某些“安全模板”来进行转换，在某些情况下，安全转换的某些部分并不是真正需要的。

尽管所有版本的代码都是正确且等效的，但第一个“pass”正在转换为 Linq，第二个“pass”删除了 Linq 转换添加的一些冗余代码。

# linux - 使用 ab 进行网站基准测试

> ID：12609790
> 
> 赞同：3
> 
> 时间：2012-09-26T20:25:43.460
> 
> 标签：linux, performance, apache, benchmarking

我正在为我正在开发的网站尝试各种基准测试工具，并发现`Apache Bench`(ab) 是负载测试的绝佳工具。它是一个命令行工具，显然非常易于使用。但是我对它的两个基本标志有疑问。我正在阅读的网站说：

```
Suppose we want to see how fast Yahoo can handle 100 requests, with a maximum of 10 requests running concurrently:

ab -n 100 -c 10 http://www.yahoo.com/ 
```

以及对标志的解释：

```
Usage: ab [options] [http[s]://]hostname[:port]/path
Options are:
    -n requests     Number of requests to perform
    -c concurrency  Number of multiple requests to make 
```

我想我只是无法绕开我的头`number of requests to perform`和`number of multiple requests to make`。当我像上面的例子一样把它们放在一起时会发生什么？

谁能给我一个更简单的解释这两个标志一起做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:33:16.527

在您的示例中，ab 将创建 10 个到 yahoo.com 的连接，并同时使用每个连接请求一个页面。

如果您省略 -c 10 ab 将仅创建一个连接，并且仅在第一个连接完成时创建下一个连接（当我们下载了整个主页时）。

如果我们假设服务器的响应时间不取决于它同时处理的请求数，那么您的示例将比没有 -c 10 的情况快 10 倍。

另外：[Apache Benchmark 中的并发请求 (-c) 是什么？](https://stackoverflow.com/questions/6830854/what-is-concurrent-request-c-in-apache-benchmak)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:36:30.233

`-n 100 -c 10`意思是“发出 100 个请求，一次 10 个”。

# sql - SQL Server：不同+随机行

> ID：12609795
> 
> 赞同：0
> 
> 时间：2012-09-26T20:25:55.657
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

如何从 SQL Server 2008/2005 表中选择不同的和随机的行？

我有一个提示列表，我需要从中**随机**挑选一些提示，它们也必须是**唯一的**。

我试过了：

```
Select 
    Distinct Tips 
From 
    jfpastrologytips 
Where 
    GetDate() <= validtill 
Order by 
    NewId() 
```

并被异常委托

> *如果指定了 SELECT DISTINCT，则消息 145、级别 15、状态 1、行 1 ORDER BY 项必须出现在选择列表中。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T20:27:34.863

您可以通过使用`GROUP BY`而不是解决此问题`DISTINCT`

```
Select Tips 
From jfpastrologytips 
Where GetDate() <= validtill 
GROUP BY Tips 
Order by NewId() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:28:15.073

试试这个，如果您只选择其中一个，则不需要 distinct：

```
Select top 1 Tips 
From jfpastrologytips 
Where GetDate() <= validtill 
Order by NewId() 
```

# mysql - MySQL 清除 shell 脚本

> ID：12609798
> 
> 赞同：0
> 
> 时间：2012-09-26T20:25:58.803
> 
> 标签：mysql, bash, shell

我有一个包含 1.2 亿行的 mysql 表，我想编写一个 shell 脚本来开始清除该表中不需要的一些无用信息。问题是我对 shell 脚本非常陌生。

我有一`datetime`列带有unix时间戳。我想删除不是在过去 2 个月内的每一行，因为我最近制定了一项数据保留政策，该政策只允许我保留 2 个月的某些数据。

TL;DR 需要构建一个 shell 脚本，使用列中的 unix 时间戳删除所有行，直到最后 2 个月的数据`datetime`。

更新：这是我的新 shell 脚本

```
#!/bin/sh

i=1
while [ "$i" -ne 0 ]
do
  i=mysql -h 127.0.0.1 -u halo_ylh -pCa5d8a88 halo_twittstats < mysqlpurge.sql
  sleep 10
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:40:32.553

[只使用current_timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-timestamp)和[unix_timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数执行会不会更容易：

```
DELETE FROM Table1 
 WHERE datetime < unix_timestamp(current_timestamp - interval 2 month) 
```

要从 shell 运行它，您可以将该命令放在一个文件`script1.sql`中并使用[mysql](http://dev.mysql.com/doc/refman/5.5/en/batch-commands.html)命令行工具运行它：

```
mysql db_name < script1.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:18:39.620

```
mysql --host ? -user ? -password ? {DB_NAME} < dump_script.sql > data.dat 
```

dump_script.sql 将让您的 SELECT 语句检索您要归档的数据。它将输出存储在 data.dat

然后

```
mysql --host ? -user ? -password ? {DB_NAME} < delete_script.sql 
```

delete_script.sql 将包含与 dump_script.sql 中相同的 WHERE 子句的 DELETE 语句。

确保锁定表，以便在两个脚本执行之间没有写入可能使其进入 WHERE 子句的内容，以避免被删除脚本删除但不包含在转储脚本中的幻像插入。

# scheme - 什么是 Scheme 中的原子？

> ID：12609803
> 
> 赞同：16
> 
> 时间：2012-09-26T20:26:05.410
> 
> 标签：scheme

有人可以解释或将我链接到任何有用的资源（我在谷歌上找不到任何线程）可以帮助我理解原子是什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T20:56:10.410

如今，我们认为*原子*是一个不是 cons-pair 且不为 null 的元素。那包含着：

*   数字
*   字符串
*   符号
*   布尔值
*   人物

这最好用以下程序来表达，取自 The Little Schemer 一书：

```
(define atom?
  (lambda (x)
    (and (not (pair? x)) (not (null? x))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T22:19:15.290

一些作者（McCarthy 和 Friedman/Felleisen 等）使用术语“原子”来指代不是“缺点”对的数据。我声称，这些天来，您更有可能反转这一点，并测试“cons”-hood 而不是“atom”-hood。您在哪里看到使用的术语？

# php - 在 else 语句中输出变量

> ID：12609808
> 
> 赞同：0
> 
> 时间：2012-09-26T20:26:19.340
> 
> 标签：php, if-statement

我试图`$username`从我的数据库中提取作为问候语。如何在 else 语句中输出变量？

变量用户名等于以下内容：

```
$username =  htmlentities($_SESSION['user']['username'], ENT_QUOTES, 'UTF-8');

<?php
if($_GET["p"] == 'login') {
echo "";
} else {
echo "<div class='row'><div class='logo'><img style='margin-left: -21px;' src='http://localhost/ncms/images/logo.png' /></div><p class='panel radius topinfo'>Welcome    . $username .</p>";
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:40:21.267

使用双引号时，您不需要连接文本字符串。你可以把它改成

```
echo "<div class='row'><div class='logo'><img style='margin-left: -21px;' src='http://localhost/ncms/images/logo.png' /></div><p class='panel radius topinfo'>Welcome $username</p>"; 
```

除了提出的问题外，我没有尝试修复您的代码中的错误，请不要投反对票。他应该使用上面建议的验证器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:40:37.147

PHP 变量在双引号中使用时会自动扩展，但这些通常用于在 HTML 中指定属性值。

我发现在回显 HTML 时记住规则的最简单方法是对 HTML 使用单引号，对属性值使用双引号，对 php 变量使用字符串连接。

```
echo '<div class="row"><div class="logo"><img style="margin-left: -21px;" src="http://localhost/ncms/images/logo.png" /></div></div><p class="panel radius topinfo">Welcome '. $username .'</p>'; 
```

您还缺少一个关闭 div（在上面添加）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:30:26.150

您可以使用字符串格式。

```
printf("<div class='row'><div class='logo'><img style='margin-left: -21px;' src='http://localhost/ncms/images/logo.png' /></div><p class='panel radius topinfo'>Welcome %s</p>", $username); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:49:12.670

好吧。解决它。抱歉让你们在这方面感到困惑，我不得不将变量放在启动会话的函数集中。嗬！

再次抱歉，谢谢你们的提示，尽管我忘了如何在那里连接一秒钟，哈哈。

# asp.net - ASP.NET：当我“取消选中”控件时，为什么我的 CheckedChanged 事件不执行？

> ID：12609810
> 
> 赞同：1
> 
> 时间：2012-09-26T20:26:21.663
> 
> 标签：asp.net, vb.net, checkbox, oncheckedchanged

我有一个复选框，它是中继器的一部分。当我选中该框和取消选中该框时，我试图让该复选框的 checkedchanged 事件发生。该事件目前仅在我选中该框时触发，但是……当我也取消选中时不会触发。我将在下面发布一些代码，希望有人可以引导我朝着正确的方向前进。谢谢！

**将处理程序添加到中继器复选框控件**

```
Dim MyCheckBox As New CheckBox

MyCheckBox = e.Item.FindControl("MyCheckBox")
AddHandler MyCheckBox.CheckedChanged, AddressOf MyCheckBox_CheckedChanged 
```

**我的 CheckedChanged 处理程序事件**

```
 Private Sub MyCheckBox_CheckedChanged(sender As Object, e As System.EventArgs)
         Dim RepeaterItem As RepeaterItem

         For Each RepeaterItem In MyRepeater.Items
             If IsListItem(RepeaterItem) Then
                If CType(sender, CheckBox).Checked Then
                   CType(RepeaterItem.FindControl("SelectionCheckBox"), CheckBox).Checked = True
                Else
                   CType(RepeaterItem.FindControl("SelectionCheckBox"), CheckBox).Checked = False
                End If
             End If
         Next

    End Sub 
```

**ASPX 文件复选框声明**

```
<asp:CheckBox ID="MyCheckBox" AutoPostBack="True" Text="" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:45:35.367

您是否在 ASPX 文件中设置了 AutoPostBack = true 。

# .net - .NET 通过 AppSetting 通过指纹查找证书

> ID：12609813
> 
> 赞同：5
> 
> 时间：2012-09-26T20:26:28.687
> 
> 标签：.net, vb.net, certificate, app-config

这个真的很奇怪，我无法弄清楚为什么一种方法有效而另一种方法无效。

我在本地计算机商店中有一个证书和一个指纹。该应用程序在发出 HTTP Web 请求时使用该证书，因此我需要获取它。我想将指纹作为 AppSetting 值存储在 web.config 中。每当我提取 AppSetting 值并使用它来查找证书时，它都找不到它。但是，如果我创建一个局部变量（类变量，只读，常量，等等）并通过它进行搜索，它就可以工作。我在两个值上都完成了 String.Compare() 是**完全相同** 的。是什么赋予了？我试着看一下 IL，看看我是否能看到一些时髦的东西，但什么也没有。

```
' This Works '
Dim certificateThumbprint As String = "D0650C9D31CF525D3C82153DCEBC3C3265D75FE3"
Dim certCollection = certStore.Certificates.Find(X509FindType.FindByThumbprint, certificateThumbprint, False)

' This doesn't '
Dim appSettingcertificateThumbprint = System.Web.Configuration.WebConfigurationManager.AppSettings("CertificateThumbprint")
Dim certCollection2 = certStore.Certificates.Find(X509FindType.FindByThumbprint, appSettingcertificateThumbprint, False)

' Intermediate window shows that '
String.Compare(certificateThumbprint, appSettingcertificateThumbprint, True) = 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-18T18:21:16.233

So it turns out when you copy and paste the thumbprint string from the certificate's properties window, it's possible to also carry over an invisible hex character that won't show up in your Visual Studio window. ([see here](http://petarvucetin.me/blog/2010/05/wcf-invalid-hexadecimal-string-format/))

What I ended up doing was copying the thumbprint to Notepad++, going a line below it, typing it exactly how I saw it, copying it back to the web.config, and running from there. That seemed to work out perfectly.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T11:04:31.077

我也发现了完全相同的问题，经过广泛搜索，除了您上面建议的那种事情之外，没有找到任何答案。

也许微软可以评论他们的 Certificates.Find 函数的匹配方法，以便我们有机会可靠地使用内置功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-08T18:30:30.363

*   粘贴到记事本++
*   将编码切换为 ANSI
*   删除乱码
*   复制
*   粘贴到 web.config

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-25T14:55:25.960

此代码有效：

```
Dim certStore = New X509Store(StoreLocation.CurrentUser)
Const certificateThumbprint As String = "E846D7787F9D43C136FFEBDD03DEDA8DE83E20D8"
certStore.Open(OpenFlags.ReadOnly)
Dim certCollection = certStore.Certificates.Find(X509FindType.FindByThumbprint,certificateThumbprint, False)

' This doesn't ( Now it does :)
Dim appSettingcertificateThumbprint = ConfigurationManager.AppSettings("CertificateThumbprint").Substring(2)
Dim certCollection2 = certStore.Certificates.Find(X509FindType.FindByThumbprint, appSettingcertificateThumbprint, False) 
```

请注意从配置管理器中提取后的 .SubString(2)。如果您对两个字符串都执行 .ToCharArray() 并在 Watch Window 中检查数组，您可以检查我为什么这样做。来自 AppSettings 的那个在开始时有 2 个额外的字符。您的情况可能会有所不同，所以我建议 .ToCharArray 并相应地编辑字符串。

我不确定为什么 .NET 会这样做。

祝你好运 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:11:33.050

在我看来，您的 WORKING 版本专门将变量作为 STRING 变暗，而非工作版本没有指定 AS STRING（因此您得到一个 OBJECT）。

您应该在使用它时将 appSettingcertificateThumbprint 作为字符串或使用 .ToString 方法（在 .Find 方法中）。

# html - 边框 100% 宽度计算 - 文本不适合

> ID：12609814
> 
> 赞同：0
> 
> 时间：2012-09-26T20:26:31.353
> 
> 标签：html, css, forms, button, width

我有一个有趣的盒子模型/宽度/继承问题，我很困惑。基本上，这就是我所拥有的：

```
<table>
  <tr>
    <td>
      <div><input type="text">So the td is at least this big</input></div>
      <div>
        <button>The Fish Molecular Genetics and Biotechnology Laboratory</button>
        <button>Each button must be as wide as the widest one</button>
      </div>
    </td>
  </tr>
<table> 
```

在这个简化的模型中，`<td>`具有（并且必须具有）自动宽度，`<button>`具有 100% 宽度，`display:block;`因此所有按钮将具有相同的宽度，`<button>`还有一些填充，几乎所有东西都有`box-sizing:border-box;`.

所以，当一个按钮被渲染时，它的框宽度被设置为它包含的文本的宽度。但是哦，等等，它的框宽度是从边框到边框测量的，并且它有一个填充，所以文本实际上换行到下一行。由于上述简化模型中不明显的许多充分理由，它必须是边界框。并且 td 必须具有自动宽度，因为按钮会根据文本框中的内容实时更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:21:39.047

这是一个不错的修复，但我仍然认为这有资格作为一个错误。

```
<div>
  <button><span>The Fish Molecular Genetics and Biotechnology Laboratory</span></button>
  <button><span>Each button must be as wide as the widest one</span></button>
</div> 
```

和

```
button {padding:0;}
button span {margin:1em;} 
```

* * *

**编辑**
这里发生的不止一件事。第二个问题是EMS。显然，当文本容器的宽度呈现为 328.00003654 像素时，文本换行可能会出错。切换到`span {margin:`固定的像素单位。

# rpm - 从 Linux 上的 rpm 包中删除一些信息，例如软链接

> ID：12609815
> 
> 赞同：1
> 
> 时间：2012-09-26T20:26:31.337
> 
> 标签：rpm, rpmbuild, rpm-spec

这是我目前正在处理的一种情况。

我提供了一个包含 32 位和 64 位应用程序的 rpm 包，并且可以在两种模式下安装，即在 64 位和 32 位平台上。

由于该软件包包含这两个应用程序，因此当尝试在 32 位 Linux 机器上安装 rpm 软件包时。它也为 64 位应用程序和 32 位应用程序创建软链接。在安装后，我删除了 64 位应用程序的软链接，因为我们无法在 32 位机器上安装它。

现在，问题出现了，因为该软件包已经安装在 32 位机器上，并且我已经删除了 64 位应用程序的软链接作为安装后的一部分，但 rpm 仍然包含这些 64 位应用程序软件的信息-links 并且在通过 rpm 命令查询时可以看到，但实际上这些不应该。

因此，任何人都想通过 rpm 查询并删除 32 位应用程序的额外信息。这应该在安装 32 位软件包期间完成，可能在安装后。

任何帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:26:53.270

It sounds like you have the soft-links included in the RPM %file listing. Have you considered adding a `%post` script that would create the soft-links rather than "*installing*" the soft links?

# r - R: tiff() 不会压缩或将分辨率设置为 300 ppi

> ID：12609816
> 
> 赞同：2
> 
> 时间：2012-09-26T20:26:33.037
> 
> 标签：r, plot, tiff

我正在尝试使用 R 保存一些图表以供发布。我想用 lzw 压缩它们并将分辨率设置为 300。由于某种原因，它不允许我这样做。事实上，R 似乎忽略了我设置的一些变量。

对于代码示例，

```
tiff(file="file.tiff", 
            width=6.83, height=6.83, units="in", 
            pointsize="12", compression = "lzw", 
            bg="white", res=300, antialias = "none" ) 
```

输出大小为 28 x 28 英寸、分辨率为 72 ppi 的未压缩文件。

一个可重现的例子是

```
hist(rnorm(1000))
dev.off() 
```

这是 File.tiff 的 ImageMagick 的输出

```
Image: file.tiff
  Format: TIFF (Tagged Image File Format)
  Class: DirectClass
  Geometry: 2049x2049+0+0
  Units: PixelsPerInch
  Type: PaletteAlpha
  Base type: TrueColor
  Endianess: MSB
  Colorspace: sRGB
  ...
  Compression: None
  ...
  Filesize: 16.8MB 
```

我在另一个运行 10.7 的 Apple 上对此进行了测试，得到了相同的结果。可以看出，即使使用选项压缩并将分辨率设置为 300 dpi，输出也不遵循选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:41:27.697

我通过附加在 GNU/Linux 上使用 R 2.15.1 验证了您的示例

```
hist(rnorm(1000))
dev.off() 
```

接您的`tiff()`电话并`"file.tiff"`使用[ImageMagick](http://www.imagemagick.org/script/identify.php)的命令行工具检查生成的文件`identify`（大部分输出省略）：

```
Image: file.tiff
  Format: TIFF (Tagged Image File Format)
  Class: DirectClass
  Geometry: 2049x2049+0+0
  Resolution: 300x300
  Print size: 6.83x6.83
[...]
  Compression: LZW
[...]
  Filesize: 70KB
[...] 
```

R 命令似乎完全按照您的意图执行。我怀疑您创建 TIFF 文件的方式不是您描述的方式，或者您用来检查 TIFF 文件属性的工具有问题。

# c++ - 如何动态链接 GCC 对象？

> ID：12609818
> 
> 赞同：0
> 
> 时间：2012-09-26T20:26:39.793
> 
> 标签：c++, c, gcc, compiler-construction, linker

我不确定这个问题的措辞是否正确，或者我想要的是否可行。

我有一个现有的 GCC 应用程序（如果重要的话，为 Cortex-M3 编译）。我想做的是创建一个可以调用现有应用程序的小功能（只有一个方法，几个方法）。

我想将这几个方法放在特定的内存位置（我知道该怎么做）。我不知道该怎么做是让新应用程序与现有应用程序的对象进行编译/链接。

例如，我现有的应用程序具有以下功能：

```
int Add(int a, int b); 
```

新应用程序想要使用它：

```
int Calculate(int a, int b, int opType)
{
  Add(a, b);
} 
```

我可以访问所有链接器、obj、h 文件等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:57:14.670

您通常不能链接到*可执行文件*，只能链接到库（静态或共享）和目标文件。因此，我能给出的最佳建议是将第一个程序的“核心”构建为共享库，并将“前端”（`main`）链接为针对核心共享库构建的可执行文件。然后，您的第二个程序也可以只是与共享库链接的程序。

您还可以使用`dlopen`动态可执行文件在运行时链接可执行文件，并用于`dlsym`获取所需功能的函数指针，尽管这通常仅在您无法控制第一个可执行文件时使用。

后者的示例（再次注意，这应该是最后的手段）：

交流：

```
#include <stdio.h>
int main() { printf("hello world!\n"); return 42; } 
```

公元前：

```
#include <stdio.h>
#include <dlfcn.h>

main() {
    void *handle = dlopen("a", RTLD_LAZY);
    if(!handle) {
        printf("failed: %s\n", dlerror());
        return -1;
    }
    int (*amain)() = dlsym(handle, "main");
    if(!amain) {
        printf("dlsym failed: %s\n", dlerror());
        return -1;
    }
    return amain();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:35:08.643

感谢您的输入，但是我能够通过使用现有应用程序中的 ELF 文件编译新应用程序来完成我想要的操作，通过指定链接器的输入
`--just-symbols elffile.elf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:54:22.157

如果您使用的是 linux 变体，那么@nneonneo 给出的使用 dlopen() 和 dlsym() 的答案是最好的方法。

但是，假设您正在使用另一个操作系统（或根本没有）和/或您确实需要此代码位于固定位置（例如，如果您需要将执行转移到特定内存设备上的地址，例如. 如果进行闪存操作），您可以使用硬编码函数指针。

声明一个函数指针如下：

```
 typedef int (*AddFnPtr)(int a, int b);
AddFnPtr MyAddFunction = (AddFnPtr)ADDRESS_OF_YOUR_FUNCTION; 
```

然后调用为：

```
 int Calculate(int a, int b, int opType)
{
  MyAddFunction(a, b);
} 
```

请注意，链接器无法知道您放置在该位置的代码是否具有正确的原型，甚至是否存在——因此在链接时或运行时都没有错误检查。

您可能（取决于操作系统）还需要采取措施将您将函数放入本地进程地址空间的绝对内存位置映射。

# python - Pygame to exe显示模块错误

> ID：12609819
> 
> 赞同：0
> 
> 时间：2012-09-26T20:26:44.363
> 
> 标签：python, pygame, py2exe

> **可能重复：**
> [打开我的 Pygame 程序的 EXE 会出现导入错误](https://stackoverflow.com/questions/6482235/opening-an-exe-of-my-pygame-program-gives-me-import-errors)

我正在尝试为使用 pygame 的应用程序制作一个 .exe。我使用以下[脚本](http://www.pygame.org/wiki/Pygame2exe)

当我运行 .exe 文件时，我得到以下信息：

```
C:\fractals\dist\gui.exe\zipextimporter.py:82: RuntimeWarning: import display: No module named _view
(ImportError: No module named _view)
C:\fractals\dist\gui.exe\zipextimporter.py:82: RuntimeWarning: import draw: No module named _view
(ImportError: No module named _view)
C:\fractals\dist\gui.exe\zipextimporter.py:82: RuntimeWarning: import image: No module named _view
(ImportError: No module named _view)
C:\fractals\dist\gui.exe\zipextimporter.py:82: RuntimeWarning: import pixelcopy: No module named _view
(ImportError: No module named _view)
C:\fractals\dist\gui.exe\zipextimporter.py:82: RuntimeWarning: import transform: No module named _view
(ImportError: No module named _view)
Traceback (most recent call last):
  File "gui.py", line 19, in <module>
  File "pygame\__init__.pyo", line 70, in __getattr__
NotImplementedError: display module not available
(ImportError: No module named _view) 
```

pygame 1.9.2a0 蟒蛇 2.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:44:58.720

I don't know, which script you use, but this script was made for compiling pygame apps to exe

```
# This will create a dist directory containing the executable file, all the data
# directories. All Libraries will be bundled in executable file.
#
# Run the build process by entering 'pygame2exe.py' or
# 'python pygame2exe.py' in a console prompt.
#
# To build exe, python, pygame, and py2exe have to be installed. After
# building exe none of this libraries are needed.
#Please Note have a backup file in a different directory as if it crashes you 
#will loose it all!(I lost 6 months of work because I did not do this)

try:
    from distutils.core import setup
    import py2exe, pygame
    from modulefinder import Module
    import glob, fnmatch
    import sys, os, shutil
    import operator
except ImportError, message:
    raise SystemExit,  "Unable to load module. %s" % message

#hack which fixes the pygame mixer and pygame font
origIsSystemDLL = py2exe.build_exe.isSystemDLL # save the orginal before we edit it
def isSystemDLL(pathname):
    # checks if the freetype and ogg dll files are being included
    if os.path.basename(pathname).lower() in ("libfreetype-6.dll", "libogg-0.dll","sdl_ttf.dll"): # "sdl_ttf.dll" added by arit.
            return 0
    return origIsSystemDLL(pathname) # return the orginal function
py2exe.build_exe.isSystemDLL = isSystemDLL # override the default function with this one

class pygame2exe(py2exe.build_exe.py2exe): #This hack make sure that pygame default font is copied: no need to modify code for specifying default font
    def copy_extensions(self, extensions):
        #Get pygame default font
        pygamedir = os.path.split(pygame.base.__file__)[0]
        pygame_default_font = os.path.join(pygamedir, pygame.font.get_default_font())

        #Add font to list of extension to be copied
        extensions.append(Module("pygame.font", pygame_default_font))
        py2exe.build_exe.py2exe.copy_extensions(self, extensions)

class BuildExe:
    def __init__(self):
        #Name of starting .py
        self.script = "MyApps.py"

        #Name of program
        self.project_name = "MyApps"

        #Project url
        self.project_url = "about:none"

        #Version of program
        self.project_version = "0.0"

        #License of the program
        self.license = "MyApps License"

        #Auhor of program
        self.author_name = "Me"
        self.author_email = "example@example.com"
        self.copyright = "Copyright (c) 2009 Me."

        #Description
        self.project_description = "MyApps Description"

        #Icon file (None will use pygame default icon)
        self.icon_file = None

        #Extra files/dirs copied to game
        self.extra_datas = []

        #Extra/excludes python modules
        self.extra_modules = []
        self.exclude_modules = []

        #DLL Excludes
        self.exclude_dll = ['']
        #python scripts (strings) to be included, seperated by a comma
        self.extra_scripts = []

        #Zip file name (None will bundle files in exe instead of zip file)
        self.zipfile_name = None

        #Dist directory
        self.dist_dir ='dist'

    ## Code from DistUtils tutorial at http://wiki.python.org/moin/Distutils/Tutorial
    ## Originally borrowed from wxPython's setup and config files
    def opj(self, *args):
        path = os.path.join(*args)
        return os.path.normpath(path)

    def find_data_files(self, srcdir, *wildcards, **kw):
        # get a list of all files under the srcdir matching wildcards,
        # returned in a format to be used for install_data
        def walk_helper(arg, dirname, files):
            if '.svn' in dirname:
                return
            names = []
            lst, wildcards = arg
            for wc in wildcards:
                wc_name = self.opj(dirname, wc)
                for f in files:
                    filename = self.opj(dirname, f)

                    if fnmatch.fnmatch(filename, wc_name) and not os.path.isdir(filename):
                        names.append(filename)
            if names:
                lst.append( (dirname, names ) )

        file_list = []
        recursive = kw.get('recursive', True)
        if recursive:
            os.path.walk(srcdir, walk_helper, (file_list, wildcards))
        else:
            walk_helper((file_list, wildcards),
                        srcdir,
                        [os.path.basename(f) for f in glob.glob(self.opj(srcdir, '*'))])
        return file_list

    def run(self):
        if os.path.isdir(self.dist_dir): #Erase previous destination dir
            shutil.rmtree(self.dist_dir)

        #Use the default pygame icon, if none given
        if self.icon_file == None:
            path = os.path.split(pygame.__file__)[0]
            self.icon_file = os.path.join(path, 'pygame.ico')

        #List all data files to add
        extra_datas = []
        for data in self.extra_datas:
            if os.path.isdir(data):
                extra_datas.extend(self.find_data_files(data, '*'))
            else:
                extra_datas.append(('.', [data]))

        setup(
            cmdclass = {'py2exe': pygame2exe},
            version = self.project_version,
            description = self.project_description,
            name = self.project_name,
            url = self.project_url,
            author = self.author_name,
            author_email = self.author_email,
            license = self.license,

            # targets to build
            windows = [{
                'script': self.script,
                'icon_resources': [(0, self.icon_file)],
                'copyright': self.copyright
            }],
            options = {'py2exe': {'optimize': 2, 'bundle_files': 1, 'compressed': True, \
                                  'excludes': self.exclude_modules, 'packages': self.extra_modules, \
                                  'dll_excludes': self.exclude_dll,
                                  'includes': self.extra_scripts} },
            zipfile = self.zipfile_name,
            data_files = extra_datas,
            dist_dir = self.dist_dir
            )

        if os.path.isdir('build'): #Clean up build dir
            shutil.rmtree('build')

if __name__ == '__main__':
    if operator.lt(len(sys.argv), 2):
        sys.argv.append('py2exe')
    BuildExe().run() #Run generation
    raw_input("Press any key to continue") #Pause to let user see that things ends 
```

you can find the script on [http://www.pygame.org/wiki/Pygame2exe](http://www.pygame.org/wiki/Pygame2exe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:58:13.947

添加`import pygame._view`到主源文件的顶部，如此处[所述](https://stackoverflow.com/a/6574032/142637)。

# geometry - 以像素的比例表示已知单位

> ID：12609822
> 
> 赞同：1
> 
> 时间：2012-09-26T20:27:02.037
> 
> 标签：geometry, aspect-ratio

这个问题可能有一个非常简单的答案/公式，但数学对我来说不是一个强项。如果我有真实世界对象的比例，我如何获取单位并以像素为单位按比例表示该对象？

让我们以[北美曲棍球场为例](http://upload.wikimedia.org/wikipedia/commons/0/0b/Ice_hockey_layout.svg)

溜冰场本身为 200 英尺 x 85 英尺，因此其纵横比为 40:17。假设我缩放它，使整个溜冰场大小为 1000 像素 x 425 像素。现在，我的大脑决定停止工作的地方是计算有多少像素代表一只脚。

我们知道冰的中心应该距离溜冰场的两端正好 100 英尺。在这个比例（或任何比例）下，计算多少像素等于 100 英尺的公式是什么？或者多少像素等于一英尺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:31:06.140

如果 1000 像素 == 200 英尺，那么每英尺的像素 == 1000 / 200 = 5.0。

另一个轴是相同的：425 / 85 == 5.0（因为您将纵横比保持在 2.35）。

最容易将“per”视为“/”符号，因此“pixels per feet”翻译为“pixels / feet”，即“1000 像素/200 英尺”；进行除法每英尺产生 5.0 像素。

（因此 100 英尺半曲棍球场将是 100 英尺 X 5 像素，或 500 像素）。

# javascript - 对于这种特殊情况，哪种 javascript 结构的访问时间更快？

> ID：12609826
> 
> 赞同：0
> 
> 时间：2012-09-26T20:27:15.590
> 
> 标签：javascript, arrays, performance, object, data-structures

我需要将特定数字映射到字符串值。这些数字不一定是连续的，所以例如我可能有这样的东西：

```
var obj = {};
obj[10] = "string1";
obj[126] = "string2";
obj[500] = "string3"; 
```

如果我正在做这样的搜索，使用对象或数组`obj[126]`会更快吗？`{}``[]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:34:19.670

不会有任何区别。ECMAScript 数组，如果稀疏（即没有设置连续索引）被实现为哈希表。在任何情况下，您都可以保证 O(n) 访问时间，所以这根本不应该关心您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:33:41.283

我创建了一个~~[微基准](http://jsperf.com/sprase-array)~~为您服务 - 查看@Bergi 提供的[更全面的测试](http://jsperf.com/sparse-objects)。在我的浏览器上，对象文字有点慢，但并不显着。自己试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:33:52.953

JS-array 是一个对象，所以你选择什么并不重要。

创建了一个 jsperf 测试[(http://jsperf.com/array-is-object)](http://jsperf.com/array-is-object)来证明这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:30:05.110

明确地，一个对象应该是最好的选择。

如果你有这样的代码：

```
var arr = [];
arr[10] = 'my value'; 
```

，你的数组变成一个包含 11 个值的数组

```
alert(arr.length); // will show you 11 
```

, 前 10 个是`undefined`.

显然，您不需要长度为 1000 的数组来存储

```
var arr = [];
arr[999] = 'the string'; 
```

另外我必须注意，在编程中，您必须为特定情况选择合适的类。
你的任务是制作成对的**地图**，`key: value`对象是这里更好的选择。
如果您的任务是创建**有序集合**，那么请确保您需要一个数组。

**更新：**

在评论中回答您的问题。

想象一下，你有两个“集合”——一个数组和一个对象。它们中的每一个只有一个等于 999 的键/索引。

如果你需要找到一个值，你需要遍历你的集合。

对于数组，您将进行 999 次迭代。
对于对象 - 只有一次迭代。

[http://jsfiddle.net/f0t0n/PPnKL/](http://jsfiddle.net/f0t0n/PPnKL/)

```
var arrayCollection = [],
    objectCollection = {};

arrayCollection[999] = 1;
objectCollection[999] = 1;
var i = 0,
    l = arrayCollection.length;

for(; i < l; i++) {
    if(arrayCollection[i] == 1) {
        alert('Count of iterations for array: ' + i); // displays 999
    }
}

i  = 0;

for(var prop in objectCollection) {
    i++;
    if(objectCollection[prop] == 1) {
        alert('Count of iterations for object: ' + i); // displays 1
    }
} 
```

**[​基准测试](http://jsperf.com/find-the-value-in-collection)** ​</p>

**总共：**

您必须正确设计应用程序并考虑可能的未来任务，这些任务将需要对您的集合进行一些不同的操作。
如果您需要订购您的收藏品，您必须选择一个`array`.
否则 an`object`可能是更好的选择，因为访问其属性的速度与访问数组项的速度大致相同，但搜索值 in`object`将比 sparse 更快`array`。

# ruby - 如何在 ruby on rails 中访问实例变量

> ID：12609827
> 
> 赞同：-3
> 
> 时间：2012-09-26T20:27:16.843
> 
> 标签：ruby, ruby-on-rails-3, attributes, instance-variables

`@revenue_category`是一个 ActiveRecord 对象，其中包含我的收入表中的一行，该表被检索`Revenue.all(:order => "revenue_made")`并整理出来。所以它的每个属性都是一个列名，属性的值是存储在该列中的那个特定行的值。

`@revenue_category`看起来像这样：

```
--- !ruby/ActiveRecord:Revenue
attributes:
    id: 1
    revenue_made: 3000000
    premium_option_a_cost: 250
    premium_option_b_cost: 450
    premium_option_c_cost: 650 
```

`@option_picked`看起来像这样：

```
 picked_option_(could be a,b or c)_cost 
```

当该属性的名称存储在另一个实例变量中时，如何访问 ActiveRecord 实例变量的特定属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:33:37.963

这听起来像是您想要动态构建一条消息以发送到`@option_picked`对象。试试这个，看看会发生什么。

```
# Given
@option_picked = "a"
lookup = "picked_option_#{ @option_picked }_cost"

# Attributes might be accessible as methods
# depending on the nature of the object...
result = @revenue_category.send(lookup)

# ...or an attribute lookup like this might work
result = @revenue_category[lookup] 
```

# sitecore - 通过 Sitecore Web 服务访问项目字段

> ID：12609837
> 
> 赞同：0
> 
> 时间：2012-09-26T20:27:54.553
> 
> 标签：sitecore, sitecore6

我正在通过 Sitecore Web Service 即时创建项目。到目前为止，我可以从此函数创建项目：

> 添加从模板

我也试过这个链接：[http ://blog.hansmelis.be/2012/05/29/sitecore-web-service-pitfalls/](http://blog.hansmelis.be/2012/05/29/sitecore-web-service-pitfalls/)

但我发现很难访问这些字段。到目前为止，这是我的代码：

```
public void CreateItemInSitecore(string getDayGuid, Oracle.DataAccess.Client.OracleDataReader reader)
    {
        if (getDayGuid != null)
        {
            var sitecoreService = new EverBankCMS.VisualSitecoreService();
            var addItem = sitecoreService.AddFromTemplate(getDayGuid, templateIdRTT, "Testing", database, myCred);

            var getChildren = sitecoreService.GetChildren(getDayGuid, database, myCred);

            for (int i = 0; i < getChildren.ChildNodes.Count; i++)
            {
                if (getChildren.ChildNodes[i].InnerText.ToString() == "Testing")
                {
                    var getItem = sitecoreService.GetItemFields(getChildren.ChildNodes[i].Attributes[0].Value, "en", "1", true, database, myCred);

                    string p = getChildren.ChildNodes[i].Attributes[0].Value;
                }
            }
        }
    } 
```

如您所见，我正在创建一个**项目**，并且我想访问该项目的**字段**。我认为**GetItemFields**会给我一些价值，但发现很难得到它。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:36:24.803

我的建议是不要使用 VSS（Visual Sitecore 服务），而是专门为你想要它做的事情编写你自己的服务。

这种方式通常更有效，因为您可以直接在服务内部做您想做的事情，而不是对 VSS 进行大量调用并在客户端处理您的逻辑。

对我来说，这一直是比使用 VSS 更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:05:24.267

我假设您正在寻找字段的外观以及字段 ID 是什么。

您可以使用 ID 调用 GetXml，它会返回项目以及其中设置的所有版本和字段，它不会显示您尚未设置的字段。

# google-cloud-messaging - GCM Android：不幸的是，GCM 演示已停止

> ID：12609845
> 
> 赞同：0
> 
> 时间：2012-09-26T20:28:13.113
> 
> 标签：google-cloud-messaging

我正在 android 上尝试 GCM 演示应用程序：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)。正确执行了所有步骤，但是当我启动应用程序时出现此错误。不幸的是，GCM 演示已经停止。

使用模拟器浏览器测试此服务器 URL，我认为它是正确的：

```
SERVER_URL: = "http://100.81.31.199:8080/gcm-demo"; 
```

当我检查 LogCat 时，我看到了这个：

```
09-26 16:13:22.449: I/ActivityManager(159): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.google.android.gcm.demo.app/.DemoActivity u=0} from pid 256
09-26 16:13:22.449: W/WindowManager(159): Failure taking screenshot for (246x410) to layer 21005
09-26 16:13:22.599: D/dalvikvm(639): Not late-enabling CheckJNI (already on)
09-26 16:13:22.619: D/dalvikvm(37): WAIT_FOR_CONCURRENT_GC blocked 0ms
09-26 16:13:22.629: I/ActivityManager(159): Start proc com.google.android.gcm.demo.app for activity com.google.android.gcm.demo.app/.DemoActivity: pid=639 uid=10048 gids={3003, 1028}
09-26 16:13:22.740: D/dalvikvm(37): GC_EXPLICIT freed 38K, 4% free 7964K/8259K, paused 6ms+28ms, total 129ms
09-26 16:13:22.759: D/dalvikvm(37): WAIT_FOR_CONCURRENT_GC blocked 0ms
09-26 16:13:22.779: E/PowerManagerService(159): Excessive delay setting brightness: 291ms, mask=2
09-26 16:13:22.899: D/dalvikvm(37): GC_EXPLICIT freed <1K, 4% free 7964K/8259K, paused 4ms+11ms, total 139ms
09-26 16:13:22.899: D/dalvikvm(37): WAIT_FOR_CONCURRENT_GC blocked 0ms
09-26 16:13:23.009: D/dalvikvm(37): GC_EXPLICIT freed <1K, 4% free 7964K/8259K, paused 37ms+7ms, total 116ms
09-26 16:13:23.019: I/Choreographer(159): Skipped 41 frames!  The application may be doing too much work on its main thread.
09-26 16:13:23.059: E/PowerManagerService(159): Excessive delay setting brightness: 267ms, mask=2
09-26 16:13:23.179: E/PowerManagerService(159): Excessive delay setting brightness: 110ms, mask=2
09-26 16:13:23.399: E/Trace(639): error opening trace file: No such file or directory (2)
09-26 16:13:23.779: D/dalvikvm(159): GC_CONCURRENT freed 526K, 7% free 11534K/12295K, paused 37ms+92ms, total 1073ms
09-26 16:13:23.859: D/AndroidRuntime(639): Shutting down VM
09-26 16:13:23.859: W/dalvikvm(639): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-26 16:13:23.979: E/AndroidRuntime(639): FATAL EXCEPTION: main
09-26 16:13:23.979: E/AndroidRuntime(639): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.android.gcm.demo.app/com.google.android.gcm.demo.app.DemoActivity}: java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.os.Looper.loop(Looper.java:137)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 16:13:23.979: E/AndroidRuntime(639):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 16:13:23.979: E/AndroidRuntime(639):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 16:13:23.979: E/AndroidRuntime(639):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 16:13:23.979: E/AndroidRuntime(639):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 16:13:23.979: E/AndroidRuntime(639):  at dalvik.system.NativeStart.main(Native Method)
09-26 16:13:23.979: E/AndroidRuntime(639): Caused by: java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf
09-26 16:13:23.979: E/AndroidRuntime(639):  at com.google.android.gcm.GCMRegistrar.checkDevice(GCMRegistrar.java:98)
09-26 16:13:23.979: E/AndroidRuntime(639):  at com.google.android.gcm.demo.app.DemoActivity.onCreate(DemoActivity.java:51)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.Activity.performCreate(Activity.java:5008)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-26 16:13:23.979: E/AndroidRuntime(639):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-26 16:13:23.979: E/AndroidRuntime(639):  ... 11 more
09-26 16:13:23.999: W/ActivityManager(159):   Force finishing activity com.google.android.gcm.demo.app/.DemoActivity
09-26 16:13:23.999: W/WindowManager(159): Failure taking screenshot for (246x410) to layer 21010
09-26 16:13:24.259: I/Choreographer(159): Skipped 35 frames!  The application may be doing too much work on its main thread.
09-26 16:13:24.519: W/ActivityManager(159): Activity pause timeout for ActivityRecord{415724b0 com.google.android.gcm.demo.app/.DemoActivity}
09-26 16:13:24.849: I/Choreographer(256): Skipped 46 frames!  The application may be doing too much work on its main thread.
09-26 16:13:25.959: I/Process(639): Sending signal. PID: 639 SIG: 9
09-26 16:13:25.969: I/ActivityManager(159): Process com.google.android.gcm.demo.app (pid 639) has died.
09-26 16:13:26.229: W/InputMethodManagerService(159): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@413a39b0 attribute=null
09-26 16:13:26.520: E/BufferQueue(36): [] drainQueueLocked: BufferQueue has been abandoned!
09-26 16:13:35.509: W/ActivityManager(159): Activity destroy timeout for ActivityRecord{415724b0 com.google.android.gcm.demo.app/.DemoActivity} 
```

有什么线索吗？？？？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:29:09.803

模拟器可能有错误的目标。“Android XY”目标不包含 Google API。

相反，您应该使用具有“Google API”目标的模拟器。

# r - 是否可以在“within(...)”结构中循环？

> ID：12609850
> 
> 赞同：4
> 
> 时间：2012-09-26T20:28:22.797
> 
> 标签：r, for-loop

感谢我从阅读资料中获得的所有帮助。

当我只处理一个 data.frame 时，我对我的 R 循环不满意，因为我必须一遍又一遍地写下数据帧的名称，这会使我的 R 代码膨胀。

这是一个愚蠢的例子：

```
x<- rep(NA,10)
y <- 1:10
dat <- data.frame(x,y)

for(i in 2:nrow(dat)){
    dat$x[i] <- dat$y[i] + dat$y[i-1]
} 
```

所以我想摆脱的是那个`dat$`-bit。外部循环可以很好地完成`within()`，但我不确定你是否真的可以用 R 做到这一点。我试过了：

```
remove(x,y) # In order to avoid accidental usage of the initial vectors
within(dat,{
for(i in 2:nrow(dat)){
    x[i] <- y[i] + y[i-1]
}}) 
```

输出如下所示：

```
 x  y  i
1  NA  1 10
2   3  2 10
3   5  3 10
4   7  4 10
5   9  5 10
6  11  6 10
7  13  7 10
8  15  8 10
9  17  9 10
10 19 10 10 
```

所以循环确实有效，只是有一个新的神奇列。

有谁知道（1）这里发生了什么以及（2）如何优雅地处理这种循环（一个更复杂的例子`within()`围绕一个循环，包括几个`if()`语句和计算失败顺便说一句？

提前非常感谢！skr

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:37:29.030

本回答了您的主要问题，并指出这`i`是由`for`循环分配的。您可以通过尝试这样的事情来看到情况如此：

```
for(j in 1:3) cat("hi\n") 
hi
hi
hi
> j
[1] 3 
```

一种选择是`i`通过设置它的值来删除不需要的变量`NULL`：

```
within(dat,{
for(i in 2:nrow(dat)){
    x[i] <- y[i] + y[i-1]
}
i <- NULL
}) 
```

另一种是使用`with()`而不是`within()`：

```
dat$x <- with(dat, {
    for(i in 2:nrow(dat)){
        x[i] <- y[i] + y[i-1]
    }
    x
}) 
```

最后，虽然我意识到你的只是一个玩具示例，但最好的解决方案*通常*是完全避免`for`循环：

```
d <- data.frame(y=1:10)
within(d, {x = y + c(NA, head(y, -1))})
#     y  x
# 1   1 NA
# 2   2  3
# 3   3  5
# 4   4  7
# 5   5  9
# 6   6 11
# 7   7 13
# 8   8 15
# 9   9 17
# 10 10 19 
```

# kinect - 在 SDK1.5 中使用 KinectColorViewer

> ID：12609858
> 
> 赞同：2
> 
> 时间：2012-09-26T20:28:49.560
> 
> 标签：kinect, kinect-sdk

我正在尝试在使用 Kinect for windows (sdk 1.5) 的项目中使用 KinectColorViewer。在 kinect explorer 示例中，KinectColorViewer 组件具有绑定的 KinectSensorManager 组件。在 xaml 文件中，我们有：

```
<kt:KinectColorViewer x:Name="ColorViewer" KinectSensorManager="{Binding KinectSensorManager}" CollectFrameRate="True" RetainImageOnSensorChange="True" /> 
```

在其他项目中重现相同的概念时遇到很多麻烦。我使用过 Microsoft.Kinect.Toolkit 的 KinectSensorChooser、KinectSensorChooserUI 和 Mirosoft.Sampels.Kinect.wpfviewers KinectColorViewer。尝试将 colorViewer 的 KinectSensorManager 绑定到 UI 元素并跟随。

```
<my:KinectColorViewer Width="200" Height="200" HorizontalAlignment="Left" Margin="198,12,0,0" Name="kinectColorViewer1" VerticalAlignment="Top" KinectSensorManager="{Binding ElementName=kinectSensorChooserUI1, Path=KinectSensorChooser.Kinect}" /> 
```

两次尝试均未成功。有人用新的 SDK 使用过 ColorViwer、DepthViwer 和 SkeletonViewer 吗？认为我们会很棒...

为了绑定 KinectSensorManager，我在后端添加了以下代码：

```
public partial class MainWindow : Window
{
  public KinectSensorManager KinectSensorManager { get; set;}
  private void WindowLoaded(object sender, RoutedEventArgs e)
{
  KinectSensorManager = new KinectSensorManager();

  KinectSensorManager.KinectSensorChanged += new EventHandler<KinectSensorManagerEventArgs<KinectSensor>>(KinectSensorManager_KinectSensorChanged);

        // Look through all sensors and start the first connected one.
        // This requires that a Kinect is connected at the time of app startup.
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the skeleton stream to receive skeleton frames

            this.sensor.SkeletonStream.Enable();
            this.sensor.DepthStream.Enable();
            this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
            this.sensor.AllFramesReady += new System.EventHandler<AllFramesReadyEventArgs>(sensor_AllFramesReady);
            this.sensor.SkeletonFrameReady += this.SensorSkeletonFrameReady;

            // Start the sensor!
            try
            {
                this.sensor.Start();
            }
            catch (IOException)
            {
                this.sensor = null;
            }

            var kinectSensorBinding = new Binding("KinectSensor") { Source = this.sensor };
            BindingOperations.SetBinding(this.KinectSensorManager, KinectSensorManager.KinectSensorProperty, kinectSensorBinding);

        }

        if (null == this.sensor)
        {
            this.statusBarText.Text = Properties.Resources.NoKinectReady;
        }

    } 
```

和 Xaml 文件：

```
<kt:KinectColorViewer Width="191" Height="83" Grid.Column="3" KinectSensorManager="{Binding KinectSensorManager}" HorizontalAlignment="Left" Margin="17,236,0,0" Name="kinectColorViewer1" VerticalAlignment="Top" /> 
```

但我仍然没有得到任何颜色流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T21:15:51.530

您的绑定声明不正确。“KinectSensorChooser.Kinect”是对 KinectSensorChooser 选择的硬件（即 Kinect）的引用——它不是 KinectSensorManager。

您应该以与示例显示相同的方式绑定到 KinectSensorManager。您是否正在尝试做一些特别的事情会导致您以不同的方式绑定它？

你的主课应该像这样开始：

```
// automatically finds a Kinect for you
private readonly KinectSensorChooser sensorChooser = new KinectSensorChooser();

// the bindable sensor property
public KinectSensorManager KinectSensorManager { get; private set; }

public MainViewModel()
{
    if (IsInDesignMode) {
        // load design mode only content
    }
    else
    {
        // initialize the Kinect sensor manager
        KinectSensorManager = new KinectSensorManager();
        KinectSensorManager.KinectSensorChanged += this.KinectSensorChanged;

        // locate an available sensor
        sensorChooser.Start();

        // bind chooser's sensor value to the local sensor manager
        var kinectSensorBinding =
            new Binding("Kinect") { Source = this.sensorChooser };
        BindingOperations.SetBinding(
            this.KinectSensorManager,
            KinectSensorManager.KinectSensorProperty,
            kinectSensorBinding);
    }
}

#region Kinect Discovery & Setup

private void KinectSensorChanged(object sender,
    KinectSensorManagerEventArgs<KinectSensor> args)
{
    if (null != args.OldValue)  
        UninitializeKinectServices(args.OldValue);

    if (null != args.NewValue)
        InitializeKinectServices(KinectSensorManager, args.NewValue);
}

// Kinect enabled apps should customize which Kinect services it initializes here.
private void InitializeKinectServices(
    KinectSensorManager kinectSensorManager, 
    KinectSensor sensor)
{
    // Application should enable all streams first.

    // configure the color stream
    kinectSensorManager.ColorFormat = 
        ColorImageFormat.RgbResolution640x480Fps30;
    kinectSensorManager.ColorStreamEnabled = true;

    // configure the depth stream
    kinectSensorManager.DepthStreamEnabled = true;

    kinectSensorManager.TransformSmoothParameters = 
        new TransformSmoothParameters
        {
            Smoothing = 0.5f,
            Correction = 0.5f,
            Prediction = 0.5f,
            JitterRadius = 0.05f,
            MaxDeviationRadius = 0.04f
        };

    // configure the skeleton stream
    sensor.SkeletonFrameReady += OnSkeletonFrameReady;
    kinectSensorManager.SkeletonStreamEnabled = true;
}

// Kinect enabled apps should uninitialize all Kinect services that were initialized in InitializeKinectServices() here.
private void UninitializeKinectServices(KinectSensor sensor)
{
    sensor.SkeletonFrameReady -= this.OnSkeletonFrameReady;
}

#endregion Kinect Discovery & Setup 
```

然后，您可以从您的视图绑定到管理器，如示例所示。

您还需要通过将以下内容放入构造函数中来设置 DataContext： DataContext = this;

# java - Arduino + Processing + Sensirion SHT7#（湿度/温度传感器）

> ID：12609861
> 
> 赞同：0
> 
> 时间：2012-09-26T20:29:07.667
> 
> 标签：java, arduino, libraries, processing, sensors

我是[Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)和 Arduino 的新手。我想将 Arduino 和湿度传感器[SHT75](http://www.sensirion.com/en/products/humidity-temperature/humidity-sensor-sht75/)与 Processing 连接，以获取湿度和温度数据并将其显示在 GUI 上。安装传感器库后，我可以使用 Arduino IDE 轻松控制 SHT75 传感器并使用串行监视器接收数据（链接）。这是Arduino代码：

```
#include <Sensirion.h>

const uint8_t dataPin =  9;              // SHT serial data
const uint8_t sclkPin =  8;              // SHT serial clock
const uint8_t ledPin  = 13;              // Arduino built-in LED
const uint32_t TRHSTEP   = 5000UL;       // Sensor query period
const uint32_t BLINKSTEP =  250UL;       // LED blink period

Sensirion sht = Sensirion(dataPin, sclkPin);

uint16_t rawData;
float temperature;
float humidity;
float dewpoint;

byte ledState = 0;
byte measActive = false;
byte measType = TEMP;

unsigned long trhMillis = 0;             // Time interval tracking
unsigned long blinkMillis = 0;

void setup() {
    Serial.begin(9600);
    pinMode(ledPin, OUTPUT);
    delay(15);                           // Wait >= 11 ms before first cmd
    // Demonstrate blocking calls
    sht.measTemp(&rawData);              // sht.meas(TEMP, &rawData, BLOCK)
    temperature = sht.calcTemp(rawData);
    sht.measHumi(&rawData);              // sht.meas(HUMI, &rawData, BLOCK)
    humidity = sht.calcHumi(rawData, temperature);
    dewpoint = sht.calcDewpoint(humidity, temperature);
    logData();
}

void loop() {
    unsigned long curMillis = millis();          // Get current time

    // Rapidly blink LED.  Blocking calls take too long to allow this.
    if (curMillis - blinkMillis >= BLINKSTEP) {  // Time to toggle the LED state?
        ledState ^= 1;
        digitalWrite(ledPin, ledState);
        blinkMillis = curMillis;
    }

    // Demonstrate non-blocking calls
    if (curMillis - trhMillis >= TRHSTEP) {      // Time for new measurements?
        measActive = true;
        measType = TEMP;
        sht.meas(TEMP, &rawData, NONBLOCK);      // Start temp measurement
        trhMillis = curMillis;
    }
    if (measActive && sht.measRdy()) {           // Note: no error checking
        if (measType == TEMP) {                  // Process temp or humi?
            measType = HUMI;
            temperature = sht.calcTemp(rawData); // Convert raw sensor data
            sht.meas(HUMI, &rawData, NONBLOCK);  // Start humidity measurement
        }
        else {
            measActive = false;
            humidity = sht.calcHumi(rawData, temperature); // Convert raw sensor data
            dewpoint = sht.calcDewpoint(humidity, temperature);
            logData();
        }
    }
}

void logData() {
    Serial.print("Temperature = ");
    Serial.print(temperature);

    Serial.print(" C, Humidity = ");
    Serial.print(humidity);

    Serial.print(" %, Dewpoint = ");
    Serial.print(dewpoint);
    Serial.println(" C");
} 
```

使用带有 Arduino 库（Firmata）的处理，我可以轻松地与其他模拟（例如[LDR](http://en.wikipedia.org/wiki/Photoresistor)）或[I²C](http://en.wikipedia.org/wiki/I%C2%B2C)传感器通信（只需遵循网络上提供的数千个教程！），但我不知道如何连接 Arduino +带有处理 IDE 的 SHT75。SHT75 传感器具有一种类似 I²C 的通信协议。这是数据表。我试过使用“serial.Arduino”命令（两者`import processing.serial`都`import cc.arduino`使用过），但没有。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:15:02.497

根据数据表：

> SHT7x 的串行接口针对传感器读数和有效功耗进行了优化。传感器无法通过 I²C 协议寻址，但是，传感器可以连接到 I²C 总线，而不会干扰连接到总线的其他设备。微控制器必须在协议之间切换。”

这意味着物理层（电压、时序和总线类型）与 I²C 兼容。但该芯片不使用标准 I²C 数据包。因此，您可以使用 Arduino 中嵌入的 I²C 总线，但不能使用 I²C 库。您必须自己处理芯片的低级 I²C 模块。

幸运的是，这并不难，因为 I²C 并不是那么微妙，您甚至可以使用直接 GPIO 控制而不是嵌入式 I²C 模块来执行有效的 I²C 数据包。这将需要一些时间，但在没有广泛的微控制器或电子知识的情况下也是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:25:00.583

如果您在 Arduino 的串行监视器中接收到值，这意味着一切都很好，您只需从[处理](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)中的串行端口读取该值。

在这里，您有一个示例，说明您必须在处理[草图](http://www.arduino.cc/en/Tutorial/Sketch)中做什么：

```
import processing.serial.*;

Serial myPort;

void setup() {
    // List all the available serial ports:
    println(Serial.list());
    // Open the port you are using at the rate you want:
    myPort = new Serial(this, Serial.list()[0], 9600);
}

void draw() {
    while (myPort.available() > 0) {
        int inByte = myPort.read();
        println(inByte);
    }
} 
```

这是取自[这里](http://processing.org/reference/libraries/serial/Serial_available_.html)。这很容易:) 请记住，要让一切正常工作，您必须关闭 Arduino 中的串行监视器。

# jquery - isHappy.js 在无效时允许 ajax 调用

> ID：12609862
> 
> 赞同：1
> 
> 时间：2012-09-26T20:29:07.527
> 
> 标签：jquery, ajax, codeigniter

我抛出这个是希望有人可能会发现一个错误，因为我现在已经多次这样做了。它工作了大约十分钟，但后来就坏了。

我有一个带有 3 个字段的非常简单的联系表的 codeigniter 网站。我正在使用 isHappy.js 来验证表单，然后发送到服务器。isHappy.js 应该停止 AJAX 函数，直到表单得到验证，但这部分没有发生。如果我在未填写表单的情况下单击提交按钮，则会出现验证错误，但随后会进行 ajax 调用并提交表单。

## 继承人的Javascript：

```
 $(function() { 

 $('#contact-form').isHappy({
   fields: {

     '#email': {
       required: true,
       message: 'How can I reach you sans email??'
     },
     '#subject': {
       required: true,
       message: 'Can you give me a clue to what you inquiring about please'
     },
     '#body': {
       required: true,
       message: 'More details please....'
     }
   }
});

 $('#contact-form').bind('submit', function(e) {
                e.preventDefault();
                var query_params = $('#contact-form').serialize();

                $.ajax({
                    type: 'POST',       
                    url: 'http://website.dev:8080/contact/email/ajax',
                    data: query_params,
                    dataType: 'json',

                    success: function(string){
                        $('#contact-form').fadeOut('medium', function() {
                                $('#linkedin').after("<div style=\"clear:both;\" /><div id=\"contact-complete\" stlye=\"width:100%;height:200px;\"><h1>"+string+"</h1></div>").fadeIn('medium');        
                        });                                                             
                    }

                });
    });     
}); 
```

## 和 HTML：

```
<form action="http://website.dev:8080/contact/email" method="post" accept-charset="utf-8" id="contact-form">        
<div class="contact-input">
    <input type="text" name="email" id="email" placeholder="Your email" value="" />
</div>
<div class="contact-input">
    <input type="text" name="subject" id="subject" placeholder="Subject" value="" />
</div>
<div class="contact-textarea">
    <textarea rows="10" placeholder="How can I help you?" name="body" id="body"></textarea>
</div>
<input type="submit" value="Send" id="contact-click" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:03:05.363

根据[happy.js docs](http://happyjs.com/)，如果验证失败，会发生两件事：

1.  该字段将获得一个`unhappy`类。
2.  该字段将`<span>`在它之前获得一个权利，在 DOM 中具有一个 class`unhappyMessage`和一个 id ，无论该字段的 id 是 plus `_unhappy`。

这纯粹是表象。您必须`unhappy`在 AJAX 调用之前检查表单是否包含任何带有类的输入。

```
var is_unhappy = false;
$('#contact-form div :input').each( function(i) {
    if ( $(this).hasClass('unhappy') ) {
        is_unhappy = true;
        return false;
    }
});
if(!is_unhappy){
    //do ajax.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:37:41.300

没有 HTML 就无法判断，但您使用的是什么类型的输入？看起来您正在使用提交类型的输入标签，您可以将其更改为按钮类型的输入标签并绑定到点击 - 然后您的问题应该会消失。

# tsql - 基于 Or 的计数不区分计数

> ID：12609864
> 
> 赞同：0
> 
> 时间：2012-09-26T20:29:26.933
> 
> 标签：tsql

我的结果显示两个计数相同，但应该有一些计数不同，因为 CarCode 有时为空。

```
SELECT  distinct car.carKey,            
    car.Weight,
    car.CarCode,
    COUNT(car.carKey)OVER(PARTITION BY car.carKey) AS TotalCarKeyCount,
    COUNT(Case When (car.[Weight] IS not null) and (car.CarCode is null) as CarCountWithoutCode 
           then 0 
       else car.carKey End) OVER(PARTITION BY car.carKey) AS CarCount
from car 
```

结果显示`TotalCarKeyCount`并且`CarCountWithoutCode`始终具有相同的计数，例如 case 语句不起作用或其他情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:51:47.387

听起来您可能想`SUM()`改用：

```
SELECT  distinct car.carKey,            
    car.Weight,
    car.CarCode,
    COUNT(car.carKey)OVER(PARTITION BY car.carKey) AS TotalCarKeyCount,
    SUM(Case When (car.[Weight] IS not null) and (car.CarCode is null) as CarCountWithoutCode 
           then 0 else 1 End) OVER(PARTITION BY car.carKey) AS CarCount
from car 
```

[SQL Fiddle 演示](http://sqlfiddle.com/#!3/adae7/4)`COUNT()`显示了 using和之间的区别`SUM()`：

```
create table test
(
  id int
);

insert into test values
(1), (null), (23), (4), (2);

select 
  count(case when id is null then 0 else id end) [count],
  sum(case when id is null then 0 else 1 end) [sum]
from test; 
```

Count 返回 5，Sum 返回 4。或者您可以更改`COUNT()`要使用`null`的值，这些`null`值将在最终结果中排除`count()`

```
select 
  count(case when id is null then null else id end) [count],
  sum(case when id is null then 0 else 1 end) [sum]
from test; 
```

您的查询将是：

```
SELECT  distinct car.carKey,            
    car.Weight,
    car.CarCode,
    COUNT(car.carKey)OVER(PARTITION BY car.carKey) AS TotalCarKeyCount,
    COUNT(Case When (car.[Weight] IS not null) and (car.CarCode is null) as CarCountWithoutCode 
           then null else 1 End) OVER(PARTITION BY car.carKey) AS CarCount
from car 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:48:52.563

将 更改`then 0`为`then null`。零值被计算在内，空值不被计算在内。

# eclipse - 安装 Google 插件和 GWT 后，Eclipse Indigo 在启动时崩溃

> ID：12609870
> 
> 赞同：1
> 
> 时间：2012-09-26T20:29:48.073
> 
> 标签：eclipse, gwt, plugins, crash

我在 Mac OS X 10.5.8 上运行。

我之前发表过一篇关于 GPE/GWT 不适用于 Eclipse 4.2 的文章。所以我尝试使用 Eclipse 3.7.2。这一次，我安装了 GPE 3.7 和 GWT 2.4 插件。再次，安装成功，完成后它要求我重新启动 Eclipse SDK。

选择我的工作区并启动后，它会在不久后崩溃并弹出错误。错误消息说“错误通知注册表更改侦听器\无效的注册表对象”。弹出错误后，工作台将立即关闭。

如果我从插件文件夹中删除 Google 插件，我可以将工作台恢复到工作状态。

我尝试了不同的 Eclipse Indigo 包，S2 Eclipse IDE for Java Developers 和 Java EE，在我安装 GPE 3.7 和 GWT 2.4 插件后都遇到了完全相同的情况。

有没有人有任何想法？

# actionscript-3 - AIR > browseForSave 奇怪的行为

> ID：12609874
> 
> 赞同：0
> 
> 时间：2012-09-26T20:29:57.097
> 
> 标签：actionscript-3, air

我刚刚注意到我的应用程序中有一些奇怪的东西。

我有一个触发此功能的“保存”按钮：

```
 var saveFile:File = File.desktopDirectory.resolvePath(nameOfProject+".uct");
 saveFile.browseForSave("Save as");
 saveFile.addEventListener(Event.SELECT, saveFileToSystem); 
```

单击时，它会显示带有建议名称文件的“浏览保存”窗口。现在我注意到，在导出、安装和运行应用程序时，当我第一次单击按钮时一切正常，但是当我再次单击时，位置如下所示：

![在此处输入图像描述](../Images/d0d2ebe4a5b81bd4a04b4dd34f2799be.png)

“where”字段是同一个文件....？即使我点击保存，它也不会保存。奇怪的是，在 Flash Builder 中测试我的应用程序时并没有发生这种情况。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:56:38.750

我做了上面的解决方法，它似乎可以解决问题。代码是这样的：

```
var saveFile:File = File.documentsDirectory.resolvePath("output.file");
var tempMovedAway:File = File.applicationStorageDirectory.resolvePath("temp.temp");
currentFileRenamedForAirBug = picker.clone();
currentFileRenamedForAirBug.moveTo(tempMovedAway), true);
saveFile.addEventListener(Event.SELECT, function():void {
        tempMovedAway.deleteFile();
    } );
saveFile.addEventListener(Event.CANCEL, function():void {
        tempMovedAway.moveTo(currentFileRenamedForAirBug);
    });
saveFile.browseForSave("save file"); 
// MUST be sure to call saveFile.browseForSave, or you risk losing an existing file. 
```

您可以将此批次包装在 Air 运行时 (NativeApplication.nativeApplication.runtimeVersion) 和仅限 Mac 的检查中，以避免不必要地执行此操作。

此外，如果您的文件保存代码可能依赖于对现有文件的更改（而不是创建一个全新的文件），则您需要稍微调整一下。

# python - 输出文件到另一个目录

> ID：12609877
> 
> 赞同：1
> 
> 时间：2012-09-26T20:30:03.680
> 
> 标签：python, bash, file-io

我有一个 python 脚本，我编写了它以便它生成一个输出文件到一个`test`使用这两行调用的新目录：

```
self.mkdir_p("test") # create directory named "test"
file_out = open("test/"+input,"w") 
```

mkdir_p 函数如下：

```
def mkdir_p(self,path):
    try:
        os.makedirs(path)
    except OSError as exc:
        if exc.errno == errno.EEXIST:
            pass
        else: raise 
```

`storage`现在，我将我希望我的脚本运行的所有文件都存储在`storage`名为位于），并将所有输出保存到`test`我​​在 python 脚本中编码的目录中？

我在 bash 中做了一个天真的方法，比如：

```
#!/bin/bash

# get the directory name where the files are stored (storage)
in=$1

# for files in (storage) directory
for f in $1/*

do

  echo "Processing $f file..."
  ./my_python_script.py $f

done 
```

它没有工作并抛出 IOError：`No such file or directory: 'test/storage/inputfile.txt'`

我希望我足够清楚地解释了我的问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:37:46.383

`$f`是`storage/inputfile.txt`，Python 会`test/`先于它，然后抱怨，因为`test/storage`不存在。创建目录，或在创建输出文件名之前剥离目录部分。

# javascript - MVC 4：在 RedirectToAction 上禁用 Javascript 和 CSS

> ID：12609879
> 
> 赞同：0
> 
> 时间：2012-09-26T20:30:07.683
> 
> 标签：javascript, css, asp.net-mvc, asp.net-mvc-routing

我有一个登录页面，登录成功后会重定向到主页。但是，成功登录后，主页的 javascript 和 css 将被禁用或未应用于该页面。脚本和样式表在布局中定义。我在这里错过了什么吗？

附加信息：

我修改了RouteConfig：

```
 routes.MapRoute(
           name: "UserLogin",
           url: "{controller}/{action}",
           defaults: new { controller = "Accounts", action = "UserLogin" });

        routes.MapRoute(
         name: "CompanyList",
         url: "{controller}/{action}",
         defaults: new { controller = "Company", action = "List" }); 
```

登录页面的脚本和样式表都很好，但公司列表的页面却乱七八糟。但是，如果我从路由配置中删除登录页面，公司列表的页面就可以了。我没有遇到任何错误。

# qt - 来自 QVariant(qulonglong) 的 Qt Q_ENUM 属性。

> ID：12609894
> 
> 赞同：1
> 
> 时间：2012-09-26T20:31:00.737
> 
> 标签：qt, properties, enums

考虑以下 Qt 代码：

```
class Foo : public QObject {
  Q_OBJECT
  Q_ENUMS(E)
  Q_PROPERTY(E x READ x WRITE set_x)

  public:
    enum E {
      a = 0,
      b = 1,
      c = 2
    };

    E x() const { return x_; }
    void set_x(E value) { x_ = value; }

private:
    E x_;
};

int main (int argc, char **argv) {
  QCoreApplication app(argc, argv);

  Foo f;

  f.setProperty("x", Foo::c);
  std::cout << f.property("x").toInt() << std::endl;  // 2

  f.setProperty("x", QVariant((int)1));
  std::cout << f.property("x").toInt() << std::endl; // 1

  f.setProperty("x", QVariant((long long)0));
  std::cout << f.property("x").toInt() << std::endl; // should be 0\. is 1\. 
} 
```

为什么它会这样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:38:15.527

如果您测试 的返回值`setProperty`，您将看到该集合失败：

```
ok = f.setProperty("x", QVariant((long long)0));
std::cout << ok << std::endl;  // 0, i.e. false 
```

Qt 代码的相关部分在 中`qmetaobject.cpp`，注释如下：

```
if (isEnumType()) {
    if (v.type() == QVariant::String) {
        // ... we won't get here.
    } else if (v.type() != QVariant::Int && v.type() != QVariant::UInt) {
        // We got here because we didn't provide an int or uint.

        // This will be 0...
        int enumMetaTypeId = QMetaType::type(qualifiedName(menum));

        // ... which means this will return false; the property will not be set.
        if ((enumMetaTypeId == 0) ||
            (v.userType() != enumMetaTypeId) ||
            !v.constData())
            return false;

        // ... we never get here
    }
}

// ... we never get here 
```

所以这种行为似乎是设计使然：`enum`只能使用`QVariant`类型为`int`or的对象设置属性`uint`。

# android - 从另一个活动启动一个活动

> ID：12609902
> 
> 赞同：-1
> 
> 时间：2012-09-26T20:32:22.487
> 
> 标签：android, launching-application

我只想知道如何检测用户是否打开应用程序，以便我的活动也启动。

例如，用户打开短信应用程序，并在出现一种锁屏后立即出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:47:47.677

您可以创建一个将在后台运行的服务，并且您可以使用[此 API](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)来确定哪些活动是可见的。这就是应用程序锁的工作量。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-26T20:37:21.907

据我了解Android系统，除非您正在制作自定义固件，否则这是不可能的。

# r - 列表中每个数据框的行数

> ID：12609908
> 
> 赞同：5
> 
> 时间：2012-09-26T20:32:36.650
> 
> 标签：r, list

我在 R 中有一个数据框列表。它们是使用 lapply 和 read.csv 命令创建的。我想知道列表中每个数据框的行数。nrow 命令不适用于此列表。我不确定可能因为它是一个列表。关于计算列表中每个数据框的行数的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T20:33:54.547

列表没有行。用于`sapply`循环列表：

```
sapply(data.frame.list, nrow) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T18:27:27.093

或 lapply- 区别在于输出

```
lapply(data.frame.list, function(x) nrow(x)) 
```

# java - JAX-WS 客户端抛出 SOAPFaultException 而不是自定义异常

> ID：12609910
> 
> 赞同：1
> 
> 时间：2012-09-26T20:32:56.920
> 
> 标签：java, jax-ws

我有一个正在开发的基于 JAX-WS 的应用程序。我使用从服务器生成 WSDL `wsgen`，然后使用`wsimport`. 我正在编写自己的自定义异常来抛出我的方法调用。代码结构如下。

自定义异常类：

```
@WebFault(faultBean = "com.mysite.FaultBean")
public class MyCustomException extends Exception {
  private FaultBean faultInfo;

  //Getters/Setters/Constructors...
} 
```

自定义故障 Bean：

```
public class FaultBean {
  private String message;
  private List<String> messages;

  //Getters/Setters/Constructors...
} 
```

`MyCustomException`然后，我从我的 Web 服务端点中的方法中抛出。当我调用我的一个 Web 服务方法并引发异常时，客户端得到的是一个`SOAPFaultException`而不是`MyCustomException`. 为什么没有使用自定义异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:06:22.000

因此，经过一番调查，事实证明被抛出的异常`SOAPFaultException`并非来自我认为的地方。他们实际上并没有被抛出`MyCustomException`。因此，为了解决所有情况，我利用了 Spring AOP 并创建了一个 Around 方面来包装我对 Web 服务实现层的所有调用。

在这方面，我捕获任何抛出的异常并将其包装在 a 中`MyCustomException`，然后再重新抛出它。然后我的客户可以正确处理异常。

# c# - 在多个 ACCESS 数据库上过滤数据集以优化结果

> ID：12609913
> 
> 赞同：-1
> 
> 时间：2012-09-26T20:33:06.947
> 
> 标签：c#, .net, linq, dataset

我有以下 c# 代码来过滤当前数据，同时连接到多个 MS 访问数据库表。这工作正常，但由于 Dataset ds 太大，循环需要永远返回检查调用另一个 mdb 数据库表的每一行。有没有办法优化它以删除基于列过滤器的行。

```
string ABCACCESSDataSource = @"c:\websites\abc.mdb";
string XYZACCESSDataSource = @"c:\websites\xyz.mdb";

private void dataviewTable()
{
        OleDbConnection Conn = DatabaseCommands.openDBConnection(ABCACCESSDataSource, this);
        string query1 = select column1, column2, column3 from ABCTable where column2 = 'hello' order by column1;
        Dataview dv; 
        OleDbDataAdapter da = new OleDbDataAdapter(query1, Conn);

        DataSet ds = new System.Data.DataSet();
        da.Fill(ds, "ABCTable");

         foreach (DataRow dr in ds.Tables["ABCTable"].Rows)
          checkValue = dr["ABCTable"].ToString();
                        {
                        resultvalue = getvalue(checkValue);
                        if(resultvalue == "unavailable")
                        {
                            dr.delete();
                        }

             dv = ds.Tables["ABCTable"].DefaultView;    
}    

private string getvalue(string checkValuepassed)    
{
        OleDbConnection Conn2 = DatabaseCommands.openDBConnection(XYZACCESSDataSource, this);
        string query2 = select columnX from XYZTable where columnY = 'test' AND columnZ = '" + checkValuepassed +"'" ;;

        OleDbDataAdapter da2 = new OleDbDataAdapter(query2, Conn2);
        ds2 = new DataSet();
                        da2.Fill(ds2);
                        resultVal = ds2.Tables[0].Rows[0][0].ToString() ;

                        return resultVal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:38:43.163

第二个数据库（XYZ）有多大？如果它适合内存，您可以首先在 Dictionairy 中从中选择所有行（没有任何 columnZ = ...），然后在 getvalue(..) 中仅执行内存操作，从而节省大量 OleDb 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:48:01.607

如果您获得单个值，则将其放入表中以检索值会很慢。

但是检索一次值。

```
string query2 = select columnZ, columnX from XYZTable where columnY = 'test' ;;

Dictionary<string, string> table2Dict = new Dictionary<string, string>();

table2Dict.add(columnZ, columnX);

colZvalue = table2Dict[checkValuepassed]; 
```

另一种看待这个问题的方法不是循环 ABC。
只需循环 XYZ 并向 ABC 发出删除命令。
如果记录不存在，它将不会删除任何内容。并以 10-100 个为一组进行分组。
会有甜蜜点。
删除 [XYX] where [ABCTable] in (..,..,..);

# python - 剥离文本以创建列表并比较 2 个相似列表

> ID：12609919
> 
> 赞同：0
> 
> 时间：2012-09-26T20:33:38.157
> 
> 标签：python, text, strip

我需要从看起来像这样的文件名中拆分出文本：`'foo_bar_1_10.asc.gz'`并且我为每个看起来像这样的文件都有一个相应的文本列表：`'1 10'`. 这个对应的列表是我想要重新创建的。原因是我需要将所有文件与主列表进行比较以查找丢失的文件。所以最终我需要一种方法来比较两个列表（差异？）任何帮助都会很棒

```
import os
newtxt = []
oldtxt = '\foobar\master_list.txt'
wd = '\foobar'

for file in os.listdir(wd):
    file = file.split('.')
    subpieces = file[0].split('_')
    numbers = ' '.join(subpieces[-2:])
    newtxt.append(numbers)
    print txt 
```

@@@ 更新 @@@ 我现在有 2 个带有行号的列表（在 unix 中使用类似于 nl 的函数——命名`nl`和输出看起来像这样`1: 1 10`和`2: 1 12`。我需要检查`newtxt`from中的缺失值`oldtxt`。我试过了这：

```
s = set(nl(newtxt))
diff = [x for x in nl(oldtxt) if x not in s]
print diff 
```

这返回的是一些文本字符，而不是我所期望的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:40:05.940

听起来您正在为字符串解析部分苦苦挣扎。`.split`首先通过调用string方法将文件名分割成几段，用句号分割：

```
>>> file = 'foo_bar_1_10.asc.gz'
>>> pieces = file.split('.')
>>> pieces
['foo_bar_1_10', 'asc', 'gz'] 
```

然后根据 _ 字符将其拆分为子片段：

```
>>> subpieces = pieces[0].split('_')
>>> subpieces
['foo', 'bar', '1', '10'] 
```

然后，您可以将最后两个部分重新连接在一起，用空格分隔，如下所示：

```
>>> numbers = ' '.join(subpieces[-2:])
>>> numbers
'1 10' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:39:12.470

一些评论（以及您自己想出来的解决方案的路径）：

*   确保你逃脱了`\`in `\foobar`，因为`\f`不会给你你所期望的
*   该`.replace`方法使用**2 个**参数：你要替换什么，你要用什么来替换它。你错过了一个。
*   如果您知道如何替换`foo_bar_`, by 比如说 ''，您可以对扩展名做同样的事情，然后将 a 替换`_`为`' '`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:39:20.113

我想[正则表达式](http://docs.python.org/library/re.html)会是最简单的。当你想保持空格时，用空格替换每个非数字字符，然后去掉前导和尾随空格

```
>>> import re
>>> a = 'foo_bar_1_10.asc.gz'
>>> re.sub('[^\d]',' ',a).strip()
'1 10' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:39:25.353

比方说

> s = '1_10.asc.gz'

然后

> l = s.split('.')[0].split('_')
> #注意 l = ['1','10']

如果你需要'1 10'，那就做

> 项目 = ' '.join(l)

要进行“差异”，请使用设置差异（用法取决于您运行的 python 版本）。请参阅 [http://docs.python.org/library/stdtypes.html#set](http://docs.python.org/library/stdtypes.html#set)
或者如果 python2.4 及以下： [http ://docs.python.org/library/sets.html](http://docs.python.org/library/sets.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T21:07:37.863

这是另一个使用正则表达式解析列表中所有文件的解决方案。

```
import os
import re
reg1 = re.compile("\d+_\d+")
newtxt = []
wd = '\foobar'
for file in os.listdir(wd)
    match = reg1.search(file)
    if match:
        newtxt.append(match.group().replace('_', ' '))      
        print file
    else:
        print("no match found") 
```

# javascript - 我的隐藏输入中的值错误

> ID：12609923
> 
> 赞同：0
> 
> 时间：2012-09-26T20:33:48.710
> 
> 标签：javascript, jquery

我无法在隐藏的输入中获取正确的值。

下面我有一个表单，每次用户单击按钮时都会将其附加到表格中：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_form' align='center'><br/><span class='msg'></span><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<input type='hidden' class='numimage' name='numimage' value='" + numimage + "' /></p>" +
    "<iframe class='upload_target_image' name='upload_target_image' src='#' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>");

    $image.append($fileImage); 
```

现在这是我收到的问题，它处理表单中的隐藏输入：

```
<input type='hidden' class='numimage' name='numimage' value='" + numimage + "' /> 
```

假设我将两种形式附加到表中，第 1 行中的一种形式（隐藏输入中的值应为 1）和第 2 行中的一种形式（隐藏输入中的值应为 2）。

现在，如果我使用表单 1 上传文件，那么隐藏输入中的值等于 1，这是正确的。如果我然后使用表单 2 上传文件，则输入中的值等于 2。这很好。

问题是，如果我恢复到表单 1 并上传另一个文件，由于我的编码方式，隐藏输入的值仍然是 2，而实际上它应该是 1。

所以我的问题是如何更改下面的代码，以便隐藏输入的值是取决于用于上传文件的表单的数字，（使用的表单 1 的值 = 1，表单 2 的值 = 2已使用，值 = 3 用于表格 3 等）

下面是代码：

```
var numimage = 0;

...//form code from top goes here

//CODE BELOW INCREMENTS A QUESTION NUMBER AND INCREMENTS THE HIDDEN VALUE FOR EACH ROW ADDED
          $('.num_questions').each( function() {

    var $this = $(this);

     var $questionNumber = $("<input type='hidden' class='num_questionsRow'>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

     $qid.append($questionNumber);                             

    ++numimage;        
    $(".numimage").val(numimage);

});

//BELOW STARTS THE UPLOADING OF THE FILE

function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

}); 

//BELOW IS CODE FOR WHEN FILE UPLOAD STOPS  
function stopImageUpload(){

      $(sourceImageForm).find('.imagef1_upload_form .msg').html(result);
      $(sourceImageForm).find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');  

return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:56:23.530

***在任何地方添加此方法***

```
function GetFormCount(){
  var frm = $('FORM');

    if(frm[0] != undefined)
    {
       if(length in frm )
       {
          return  frm.length ;
       }
        return 1;
    }
    return 0;
} 
```

***JS 更改表单的创建***

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_form' align='center'><br/><span class='msg'></span><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<input type='hidden' class='numimage' name='numimage' value='" + GetFormCount()+ "' /></p>" +
    "<iframe class='upload_target_image' name='upload_target_image' src='#' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>"); 
```

ps 据我了解，您在每个表单中都有这个字段。

# wpf - How do I get or set the selected index of a wpf ribbon combo box?

> ID：12609933
> 
> 赞同：1
> 
> 时间：2012-09-26T20:34:08.483
> 
> 标签：wpf, vb.net, xaml, ribbon

I have been looking all over the internet (googling pretty much) and have found no answer to this simple question and thus I'm starting to think it might not be possible.

Ok so I have a RibbonCombobox up in my ribbon. Here's the code

```
<ribbon:RibbonComboBox  
                  SelectionBoxWidth="150"
                  VerticalAlignment="Center" 
                  IsEditable="False" Name="cbConsultationRapideEmploye">
                        <ribbon:RibbonGallery Name="cbConsultationRapideEmployeG" SelectedValuePath="Name"
                          MaxColumnCount="1">
                            <ribbon:RibbonGalleryCategory Name="cbConsultationRapideEmployeGC" Margin="0" Padding="0" ItemsSource="{Binding}" DisplayMemberPath="NomEmploye" />
                        </ribbon:RibbonGallery>
                    </ribbon:RibbonComboBox> 
```

I populate this combobox from a dataset on load.

What I want to do is set on load the selected item to be the first one in the list. I know that there is a SelectedItem property on the RibbonGallery, but sometimes it works just way better with an index.

I could probably roll with setting the SelectedItem as the first item in my Dataset but in the case of fetching info, fetching the text is not really an option as I will want the ID (from the database) of the employee and not his name.

If someone has an alternate solution I'm all open to suggestions.

EDIT: As per request here is the code where the combobox gets his values.

```
bd.openConnection()
dsCbNomEmploye = bd.queryds("SELECT Prenom + ' ' + Nom AS NomEmploye FROM tblEmploye ORDER BY 1", "tblEmploye")
cbConsultationRapideEmploye.DataContext = dsCbNomEmploye.Tables(0).DefaultView 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:30:24.827

I ended up adding the SelectedValuePath on the RibbonGallery tag like so

```
<ribbon:RibbonComboBox  
                  SelectionBoxWidth="150"
                  VerticalAlignment="Center" 
                  IsEditable="False" Name="cbConsultationRapideEmploye">
                        <ribbon:RibbonGallery SelectedValuePath="idEmploye" Name="cbConsultationRapideEmployeG"
                          MaxColumnCount="1">
                            <ribbon:RibbonGalleryCategory Name="cbConsultationRapideEmployeGC" Margin="0" Padding="0" ItemsSource="{Binding}" DisplayMemberPath="NomEmploye" />
                        </ribbon:RibbonGallery>
                    </ribbon:RibbonComboBox> 
```

Afterwards if you need the text value you can get it with the cbConsultationRapideEmployeG.SelectedItem and if you need the actual value you can get it with cbConsultationRapideEmployeG.SelectedValue

In short SelectedItem=Displayed value SelectedValue=not shown value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:46:56.760

I did this in WPF Combobox (XAML) and worked. May be it will give you an idea

```
ItemsSoruce={Binding} SelectedIndex={Binding ElementName=yourcomboboxname, Path=SelectedItem} IsSynchronizedWithCurrentItem = True 
```

# iphone - 如何安装 cocos3d？出了点问题

> ID：12609939
> 
> 赞同：1
> 
> 时间：2012-09-26T20:34:21.750
> 
> 标签：iphone, objective-c, cocos2d-iphone, cocos3d

我已经完成并遵循互联网上的许多教程来安装 cocos2d，并且在终端中它说安装完成/成功。但是 cocos3d 上没有 Xcode 模板？有人可以帮忙吗:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:10:41.510

我想我重新阅读了你的问题，现在我明白了。

你已经安装了 cocos2d，所以不会有 3d 的模板，只有 2d。要显示 3d，您必须安装 cocos3d 扩展：

[http://brenwill.com/cocos3d/](http://brenwill.com/cocos3d/)

# jquery - 如何从最后一个列表项中删除边框并选择：nth- child（多个项目）

> ID：12609941
> 
> 赞同：0
> 
> 时间：2012-09-26T20:34:37.120
> 
> 标签：jquery, css, jquery-selectors, css-selectors

如何选择第三个链接以删除右边框？前三个是文本链接，我想从最后一个文本链接中删除右边框。最后两个是按钮。我也不想要按钮之间或按钮末尾的边框。我无法相信我在这方面遇到了多大的麻烦。它可能是一个简单的解决方案，但它让我永远为浏览器弄清楚它。谢谢。

Javascript

```
<script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script language="javascript">
        $(document).ready(function() {
        $("ul.subnavigation li:nth-child(3)").addClass("last-child");
    });
        </script> 
```

HTML

```
<ul class="subnavigation">
                <li><a href="$sign_in_url" id="Program" rel="nofollow" ></a>Program </li>
                <li><a href="$sign_in_url" id="About" rel="nofollow" >About </a> </li>
                <li><a href="$sign_in_url" id="faq" rel="nofollow" >How to/FAQs</a> </li>
                <li><a href="$sign_in_url" id="register" rel="nofollow" class="btn_register hide-text">Register</a> </li>
                <li><a href="$sign_in_url" id="signin" rel="nofollow" class="btn_signin hide-text">Sign in</a></li></ul> 
```

CSS

```
ul.subnavigation {  
    font-family:Arial, sans-serif; 
    font-weight:bold; 
    font-size:16px;
    color:#333333; 
    list-style:none;
    }

.subnavigation li{
    display:inline;
    border-right:1px solid #ccc;
}

.subnavigation li:last-child{
    display:inline;
    border-right:0px;
}

.last-child {border:none;}

.subnavigation li a   {
    text-decoration:none;
    padding:0 10px 0 10px;
    line-height:18px;

    }

.subnavigation li a:hover {
    color:#2274ac;
    }

.subnavigation a.btn_register {
    background:url(../images/nt_btn-register.png) no-repeat;
    width:66px; 
    height:23px;
    display:inline-block;
    margin:0 5px 0 0;
    float:right;
    text-indent:-999px;
    }

.subnavigation a.btn_signin {
    background:url(../images/nt_btn-signin.png) no-repeat;
    width:56px; 
    height:23px;
    display:inline-block;
    margin:0 10px 0 5px;
    float:right;
    text-indent:-999px;
    }

.hide-text {
text-indent: 100%;
white-space: nowrap;
overflow: hidden;
} 
```

[JS 小提琴在这里](http://jsfiddle.net/Chris22/A46Ka/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:46:06.963

你不需要 jQuery。这里是纯 CSS - [**DEMO**](http://jsfiddle.net/A46Ka/4/)

```
.subnavigation li:nth-child(n+3) {
    border: 0;
} 
```

* * *

**更新**

上面的代码不适用于旧版 IE-s - [***:nth-child*浏览器支持**](http://caniuse.com/#search=nth-child)

为了使其向后兼容，您仍然必须使用 jQuery - [**DEMO**](http://jsfiddle.net/A46Ka/7/)

```
$(function() {
    $(".subnavigation").find("li:gt(1)").css("border", 0);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:43:14.853

将您的 CSS 更改为更具体

```
li.last-child {border-right:0px;} 
```

然后 jQuery 你可以使用[.slice()](http://api.jquery.com/slice/)来获取`li`索引 2> 的元素来删除右边框

```
$(document).ready(function() {
   $("ul.subnavigation li").slice(2).addClass("last-child");
});​ 
```

[http://jsfiddle.net/A46Ka/2/](http://jsfiddle.net/A46Ka/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:42:07.573

这也应该工作

```
$("ul.subnavigation li:gt(1)").addClass("last-child"); 
```

根据您的风格添加它，它应该可以工作

```
.last-child 
{
   border-right:0px !important;
} 
```

设置**!important**将覆盖默认样式

[检查这个小提琴](http://jsfiddle.net/sushanth009/A46Ka/8/)

# java - 如何强制重用 jdbc 池中的连接？

> ID：12609947
> 
> 赞同：1
> 
> 时间：2012-09-26T20:34:46.620
> 
> 标签：java, mysql, jdbc

我有一个 Runnable，它从如下连接池中获取连接，并有 60 秒的时间来处理连接：

```
private static ConnectionPoolDataSource cpds; // MysqlConnectionPoolDataSource

public void run(){
    while((System.currentTimeMillis()-created)<60000){
        try(Connection conn = cpds.getPooledConnection().getConnection()){  
            //do something
        }catch(SQLException sqle){}
    }
} 
```

当线程在 60 秒后终止时，我假设连接返回到池中，并且当创建新线程时，可以重新使用连接。但是当我列出我的网络连接时，随着更多线程的创建，列表会不断增长。如上所述创建的连接是否正确返回到池中，如果是，我如何强制重新使用连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T08:24:26.233

您实际上并没有使用连接池。A`ConnectionPoolDataSource`不打算直接使用。它旨在作为（特殊）`DataSource`对象`PooledConnection`，然后通过提供连接池的（正常）`DataSource`实现将其保存在连接池中。

一个普通的开发者不应该直接使用 a ，它的目的是与 Application Servers 提供的连接池一起使用，或者被包装到提供连接池的`ConnectionPoolDataSource`通用s 中。`DataSource`

当`Connection`从连接池请求 a 时，它将检出现有的`PooledConnection`（或从其请求新的`ConnectionPoolDataSource`），检索 a`Connection`并将其返回给用户。当用户关闭 时`Connection`，`PooledConnection`将向连接池发出信号，表明它再次可用。

在这种情况下，您正在创建一个`PooledConnection`，从中检索一个`Connection`，然后丢弃`PooledConnection`. 这意味着`PooledConnection`被放弃，并且它与数据库的物理连接不能被重用，并且在最终被垃圾收集时将被关闭/丢弃（通常当连接池想要关闭物理连接时，它会调用`close()`）`PooledConnection`。

您要么需要使用应用服务器提供的连接池，要么使用 DBCP、c3p0 或 BoneCP 等通用连接池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:46:03.853

你没有说你使用的是什么连接池，所以答案是“也许”。

但是，大多数池都有一些方法来检测废弃的连接。例如，[DBCP](http://commons.apache.org/dbcp/configuration.html)为您提供`removeAbandoned`和`removeAbandonedTimeout`配置参数。这些不会立即将连接返回到池，因此您仍然会看到连接数在超时到期之前一直在增长（并且希望，由于您处于紧密循环中，因此您已经设置了最大连接数打开连接）。

# c# - 确定哪些 dll/exe 是我的应用程序的有效模块

> ID：12609951
> 
> 赞同：1
> 
> 时间：2012-09-26T20:35:05.393
> 
> 标签：c#, wpf, dll, module, .net-assembly

我正在开发一些支持使用报告模块的软件。基本上，我们不想默认发送所有报告，因为它只会造成不必要的膨胀，所以我正在寻找一种有效的方法来检查当前的 exe 和 dll 是否有可以在运行时动态添加的有效模块。到目前为止，我已经尝试在 AssemblyInfo 中设置自定义属性并将 at 用作如下标志：

```
private void GetReportModules() { 
        try {
            var dlls = Directory.GetFiles(Directory.GetCurrentDirectory()).Where(x => Path.GetExtension(x) == ".dll" || Path.GetExtension(x) == ".exe");
            dlls = dlls.OrderBy(x => Path.GetFullPath(x)).Where(x => {
                try {
                    return null != System.Reflection.Assembly.LoadFrom(x);
                } catch (Exception) {
                    Console.WriteLine("Skipping {0} - does not load using reflection.", Path.GetFileName(x));
                    return false;
                }
            });

            foreach (var dll in dlls) {
                System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFrom(dll);
                object[] attributes = assembly.GetCustomAttributes(typeof(ReportNameAttribute), false);
                if (attributes.Count() > 0) {
                    // dynamically include the assembly as a menu item
                }
            }

        } catch (Exception ex) { throw new GenericException(ex); }
    } 
```

问题是我实际上必须加载每个 dll 和 exe 两次，这似乎不是很有效。任何人都可以提出一种他们以前完成过类似的事情的方法或改进我正在做的事情的方法吗？

如果我无需先加载程序集就可以检查属性，那将是非常棒的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:41:52.550

反思是有代价的。通常，如果您执行一次并不会太贵（请记住缓存结果。如果需要不时刷新它们，您可以为此使用计时器）。

如果您不想加载所有程序集并检查，您可以使用配置文件，用户必须明确定义应该加载的内容。

您还可以设置一个特殊文件夹，根据定义，该文件夹应仅包含与此内容相关的 dll - 此文件夹中的任何内容都是您想要加载的内容。

# ruby-on-rails - Rails，乘客，线程之间的通信

> ID：12609952
> 
> 赞同：0
> 
> 时间：2012-09-26T20:35:06.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, passenger

我想为我编写简单的记录器，将消息放入内存中，并在后台每隔 X 秒将其写入数据库。

这是缓冲的记录器代码：

```
module BufferedLogger
  def buffer
    @buffer ||= []
  end

  def log( message )
    buffer << message
  end

  def write_buffer  
    while message = buffer.shift do 
      # save the message in nosql
    end
  end

  def repeat_every( interval )
    Thread.new do
      loop do
        start_time = Time.now
        yield
        elapsed = Time.now - start_time
        sleep([interval - elapsed, 0].max)
      end
    end
  end

  extend self

  thread = repeat_every(10) do
    write_buffer
  end 

end 
```

在开发中，这很好用，可以在和方法中`buffer()`访问相同`@buffer`的变量。但是一旦我进入生产或登台环境，即一旦我落后于乘客，这似乎不再被共享。`log``write_buffer``@buffer`

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:59:42.483

由于`passenger`创建单独的流程，并且这些流程将如何持续取决于乘客的算法，我想它不会像您期望的那样运作良好。（顺便说一句，我在这方面使用全局变量/类变量的经验很糟糕。）

我对缓冲日志的建议是，使用像[fluentd](http://fluentd.org)这样的记录器作为中间处理器。Fluentd 可以监控和收集日志。您可以编写一个插件将收集的日志写入数据库。我认为这将满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:49:11.283

如果您尝试保存数据库 I/O，这通常不是问题，因此您可能会过早地进行优化。

如果我需要缓冲数据库写入，我可能会关闭自动提交，然后在记录发生时写入记录，在 n 条记录后或 n 秒后提交，以先到者为准。

数据库可以处理大量流量并具有各种内部缓冲，因此您的磁盘和系统影响最小化。如果您的数据库与 Rails 主机在同一台机器上，那么出于性能原因，您应该将它们分开。

否则，除非您收集了指标并且可以指出数据库 I/O 存在问题，否则我会说编写代码并且在问题浮出水面之前不必担心缓冲。

# javascript - 如何创建类似于大多数网站上的通用侧边栏？

> ID：12609953
> 
> 赞同：0
> 
> 时间：2012-09-26T20:35:05.700
> 
> 标签：javascript, html, css

如果你的网页覆盖了整个屏幕，那么左右两边都有区域，里面什么都没有。如果您使页面变小，它们将变小，并且实际网页在您移动时保持居中，直到条形消失，此时它将停止移动。（本网站包含这些栏）我查找了如何制作侧栏，但我发现所有资源都包含不会消失的侧栏或导航栏。（我不想要导航栏）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:57:55.617

你的问题有点含糊，但在大多数情况下，你有一个两列固定宽度的布局，它被包裹在一个容器中。该容器通常以固定宽度居中在页面上。

```
<div id="container">
  <div id="left-column">Left Column</div>
  <div id="right-column">Right Column</div>
</div> 
```

在这种情况下，容器 div 上的 margin:0 auto 是 div 的中心。您可以使用 min-width 来确保容器 div 不会低于特定大小，如果您使用基于百分比的布局，这将是一件好事。CSS 看起来像这样：（请注意，我已经给它高度和颜色以使其清晰）。

```
#container {
  margin:0 auto;
  width:300px;
  min-width:300px;    
}

#left-column {
  float:left;
  background-color:green;  
  width:230px;
  height:200px;    
}

#right-column {
  float:right;
  background-color: red;
  width:70px;
  height:200px;    
} 
```

这是[演示](http://jsfiddle.net/SeasonEnds/jxzGL/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:43:22.437

达斯汀迪亚兹曾经对这个问题有一个非常巧妙的答案 - 但他的网站似乎已关闭（http://www.dustindiaz.com/centering-a-webpage/）

无论如何，你可以通过在你的身体上添加这个 css 来使网页居中而不需要任何额外的标记：

```
body { 
    margin:0 auto;
    width:760px;
    /* adjust width as needed */
} 
```

所有功劳归功于达斯汀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:46:12.907

当您找到一个可以满足您需求的网站时，您可以使用浏览器附带的工具了解它的工作原理。例如，在 IE 和 Chrome 上，按 F12 将显示所有内容 - HTML、javascript、CSS 等等。

如果您无法理解某个特定的效果，请返回一个 URL，我们将帮助您了解详细信息。

# facebook - Facebook 对话提要在其他客户端上不起作用

> ID：12609954
> 
> 赞同：0
> 
> 时间：2012-09-26T20:35:08.290
> 
> 标签：facebook

我有以下提要对话框代码。用户报告我说他们无法分享，但即使在我的机器上使用没有任何历史记录的不同浏览器，它也能正常工作。问题可能是什么？什么是调试此问题的好清单？

```
FB.init({appId: "1111", status: true, cookie: true});

function postToFeed(description) {

  var obj = {
    method: 'feed',
    link: 'http://example.com/',
    picture: 'http://example.com/static/facebook-app-icon.png',
    name: 'Example app',
    caption: 'Example caption!',
    description: description
  };

  FB.ui(obj);
}

<div id='fb-root'></div>
<a onclick="var msg=getShareMsg(); postToFeed(msg); return false;">
    <img src='/static/facebook.png' alt="Share" title="Share on Facebook">
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:56:57.133

首先，他们是收到带有错误消息的弹出窗口，还是什么都没有？

如果什么都没有：

*   是否是 Javascript 错误（检查 JS 错误控制台）
*   弹出窗口是否在您允许的机器上被阻止？如果没有触发弹出窗口的用户事件，就会发生这种情况

如果是出现错误的 FB 弹窗：

*   应用程序是否处于沙盒模式，您是唯一的开发者吗？检查（https://developers.facebook.com/apps//summary）
*   FB JS SDK 是否正确加载？您如何包含“//connect.facebook.net/en_US/all.js”文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:05:43.190

以 Joe T 提出的问题为基础：

*   当你说它在你的机器上工作时，我假设你和你的最终客户都在看同一个服务器？(http://example.com)
*   [http://example.com](http://example.com)都列在您的应用配置文件中，example.com 列在您的域列表中？
*   尝试使用另一个非开发者 Facebook 帐户登录。

# jquery - queue: false 使用函数时无法在 jQuery 动画上工作

> ID：12609958
> 
> 赞同：2
> 
> 时间：2012-09-26T20:35:29.237
> 
> 标签：jquery

我正在使用 jquery animate 函数为 DIV 设置动画。但是我想在点击很多次时避免排队。当我使用 queue: false 并添加一个函数时，该函数不起作用。我真的不知道为什么。如果我删除该函数，它可以工作，但我需要该函数和队列同时为假。

这是我的 Javascript

```
 $("#details-kpi-container").animate({ height: "295px" }, {queue: false }, function () {
    funcion_a_ejecutar();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:39:31.400

你的语法不正确。检查文档：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

如果要传递一个`options`对象，则需要在该对象中包含回调。

```
$("#details-kpi-container").animate({height: "295px"}, {
    queue: false,
    complete: function () {
        funcion_a_ejecutar();
    }
}); 
```

# c# - 如何检查 SQLDataReader 是否没有行

> ID：12609959
> 
> 赞同：37
> 
> 时间：2012-09-26T20:35:32.747
> 
> 标签：c#, sqldatareader

我试图弄清楚如何检查 my`SqlDataReader`是否为空或没有行（意味着预订不存在），然后显示一个消息框。出于某种原因，当我在遇到`While dr.Read())`代码时进行调试时，如果它没有返回结果，它就会退出。

我尝试将此代码放在几个不同的位置，但如果没有返回记录，似乎没有一个会触发消息框

```
if (dr.GetValue(0) == DBNull.Value || !dr.HasRows)
{
    MessageBox.Show("Reservation Number Does Not Exist","Error", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
}
else
{
    (read records)
} 
```

我的代码...

```
try
{
   using (SqlConnection con = new SqlConnection(connectionString))
   {
      using (SqlCommand cmd = con.CreateCommand())
      {
         con.Open();
         cmd.CommandText = "usp_StoredProcedureName";
         cmd.CommandType = CommandType.StoredProcedure;
         cmd.Parameters.AddWithValue("@regnum", regnumber);

         using (SqlDataReader dr = cmd.ExecuteReader())
         {
             //Loop through all the rows, retrieving the columns you need.
             while (dr.Read())
             {
                 lblConf.Text = dr.GetValue(0).ToString();
                 lblName.Text = dr.GetValue(1).ToString() + "," + dr.GetValue(2);
                 lblCompany.Text = dr.GetValue(3).ToString();
                 lblStatus.Text = dr.GetValue(4).ToString();
             }
         }
      }
   }
}
catch (Exception ex)
{
    MessageBox.Show("Can not open connection! ");
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-26T20:37:05.183

```
if(dr.HasRows)
{
    // ....
}
else
{
    MessageBox.Show("Reservation Number Does Not Exist","Error", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
} 
```

[SqlDataReader.HasRows 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.hasrows.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T20:40:10.967

将此添加到您的代码中以检查：

```
sqlCommand cmd = new sqlCommand();
SqlDataReader dr = cmd.ExecuteReader();

if(dr.HasRows)
{
    while(dr.Read())
    {
        //code
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T20:37:10.177

[该`HasRows`物业](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.hasrows.aspx)可能会为您提供帮助。

> 适当的价值
> 
> 类型：System.Boolean 如果 SqlDataReader 包含一行或多行，则为 true；否则为假。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T20:50:06.843

> 出于某种原因，当我在遇到`while dr.Read()`代码时进行调试时，如果它没有返回结果，它就会退出

我认为你在这里看到的是如果没有下一个，或者在这种情况下是第一个要读取的记录，则`SQLDataReader.Read()`返回。`false`

正如其他人所响应的那样，使用该`HasRows`属性来确定结果集中是否有任何行。根据您需要完成的任务，您可能希望利用第一次调用空结果集时`Read()`确实返回的事实。`false`

# php - 大多数 Wordpress 用户都打开了 output_buffering 吗？

> ID：12609961
> 
> 赞同：0
> 
> 时间：2012-09-26T20:35:41.673
> 
> 标签：php, wordpress, wordpress-theming

[我的问题与我在此处](https://stackoverflow.com/questions/12608881/wordpress-redirect-issue-headers-already-sent)看到的其他问题的答案有关-现在大多数使用 php 后端和代码内容的开发人员和设计人员都将启用或应该启用此功能....我认为

但是，使用我的主题或 WordPress 上的任何其他主题的普通用户是否启用了此功能？大多数私人或共享托管服务是否已启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:46:33.573

这是。它设置为一个值，因此 - 它意味着它的开启。没有它，我认为会有问题

# git - 强制 git 在 rebase 期间进行无操作提交

> ID：12609962
> 
> 赞同：7
> 
> 时间：2012-09-26T20:35:42.543
> 
> 标签：git

因此，为了让我的团队中害怕版本控制和命令行的开发人员能够接受 fork/rebase/pull-request git 工作流程，我跳过了很多障碍。

在向我们的开发 wiki 添加 rebase 文章时，我只是说到“做`git rebase`。如果有任何合并冲突，修复它们。然后做一个`git add`。然后做`git rebase --continue`。”

但是在完成示例并截取屏幕截图时，我被提醒如果存在合并冲突，并且我解决它以支持上游分支，`git rebase --continue`实际上执行 a 拒绝继续并给出错误：

```
No changes - did you forget to use 'git add'?
If there is nothing left to stage, chances are that something else
already introduced the same changes; you might want to skip this patch. 
```

此处对技术细节进行了精彩的讨论：[Git rebase：冲突不断阻碍进度](https://stackoverflow.com/questions/4033009/git-rebase-conflicts-keep-blocking-progress)

但我想要的是让这种行为*停止*。

我认为发生这种情况有一个很好的设计原因（可能与仅使用正常提交机制的 rebase 相关，这种行为可能是有意义的）但在这种情况下，它令人困惑且不直观，并使冲突逻辑：“修复冲突。如果你修复看起来与上游分支完全一样，执行 a `git rebase --skip`。在所有其他情况下，执行 a `git rebase --continue`。”

有没有办法抑制这种行为，无论是使用重新设置标志还是在版本控制的配置文件中（所以我不必在每个开发人员的计算机上设置它或提供这样做的说明）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T09:59:28.390

当前的[文档`git-rebase`](http://git-scm.com/docs/git-rebase)提到了一个`--keep-empty`选项：

> `--keep-empty`
>      在结果中保留不改变其父项的任何内容的提交。

不幸的是，没有将此设置放入配置文件中。

# objective-c - IOS 6.0 xcode 4.5 编译错误#import 代码保存在类外的文件中

> ID：12609963
> 
> 赞同：1
> 
> 时间：2012-09-26T20:35:54.917
> 
> 标签：objective-c, import, xcode4.5

我一直在愉快地编译并使用 Xcode 4.3.2 (IOS5.1)。现在我已经冒险并决定迁移到 Xcode 4.5，我的应用程序以最悲惨的方式编译失败。现在，我还没有解决 ARMV7 或类似问题的问题。不，我的问题可能会让你们中的许多人呻吟。

但是你可以为此责怪我的基本 ANSI C 天。每个人都喜欢可重用的代码，我已经创建了很多。但！！！我没有将这些特定代码中的任何一个变成对象本身。也就是说，我没有把接口和实现的步骤放在心上。

当然，我有我的视图控制器等的类。但是，为了避免必须**声明**和**分配*** *init* * 对象以便我可以使用其中的方法，我只是将大量方法转储到 .inc 文件中 - 在其他单词包含文件。例如，我有一种改变表格单元格的背景颜色或背景图像的方法——我会导入具有该方法的文件。

例如

```
-(void)defaultInactiveBackGroundForCell:(UITableViewCell *)cell {

   cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:DEFAULT_INACT_CELL_BACKGROUND_IMAGE] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

} // defaultInactiveBackGroundForCell 
```

到目前为止一切都很好。

而且，我会在我的类文件（我的 .m 文件）的顶部 #import 文件（包含上面的代码）。在我的 willDisplayCell 委托方法中，我只需调用以下方法：

```
[self defaultInactiveBackGroundForCell:cell]; 
```

它会起作用的。

但在 Xcode 4.5 下，它开始了大时代：

声明中缺少方法的联系人。

所以，我的问题是：有没有办法像过去使用 ANSI C 那样将#importing 代码放入类 .m 填充？

帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:19:00.863

我想我知道问题可能是什么。我正在导入的方法已完全实现，也就是说，它们不是标头。这些完整的方法是在我的@implementation 行之后#imported 的。

我以 .h 文件的形式添加了方法规范，作为 @interface 和 @end 之间的私有类，作为 @implementation 中私有方法声明的一部分。

我可能没有意义，但本质上，Xcode 4.3.2 似乎很高兴在@implementation 和@end 之间导入所有这些方法。但 Xcode 4.5 完全没有。它也需要定义标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:46:45.493

我不确定它是否与您的“面向对象”有关或缺乏。从 Xcode 4.5 开始，最低部署目标是 iOS 4.3。在迁移到我的部署目标为 4.0 的 Xcode 4.5 后，我在最近的一个项目中遇到了头文件导入错误。将其更改为 4.3 修复了它。

# asp.net - 通过子域共享会话可用于 IE，但不适用于 Firefox

> ID：12609965
> 
> 赞同：0
> 
> 时间：2012-09-26T20:36:15.927
> 
> 标签：asp.net, subdomain

我在通过子域共享会话时遇到问题。我有一个应用程序可以通过

*   [http://myapplication.com](http://myapplication.com)
*   [http://customer1.myapplication.com](http://customer1.myapplication.com)
*   [http://customer2.myapplication.com](http://customer2.myapplication.com)

我像这样设置我的 web.config 文件：

```
<httpCookies domain=".myapplication.com"/>
<authentication mode="Forms">
<forms loginUrl="index.aspx" cookieless="UseCookies" timeout="60000" enableCrossAppRedirects="true" domain=".myapplication.com"/>
</authentication> 
```

“enableCrossAppRedirects”可以配置为真或假，没有任何变化。

在 IE 中，当我从一个子域切换到另一个子域时，我总是使用同一个会话。但是对于 Firefox，每次我更改子域时，都会为每个子域创建一个新会话。

我在谷歌上阅读了很多文章，但没有任何效果。我不明白为什么 Firefox 与众不同

这是一个简单的aspx代码页，自己测试

```
<%@ Import NameSpace="System" %>
<%@ Import NameSpace="System.Linq" %>
<%@ Import NameSpace="System.Data" %>
<%@ Import NameSpace="System.Configuration" %>
<%@ Import NameSpace="System.Collections" %>
<%@ Import NameSpace="System.Collections.Generic" %>
<%@ Import NameSpace="System.Web" %>
<%@ Import NameSpace="System.Web.Security" %>
<%@ Import NameSpace="System.Web.UI" %>
<%@ Import NameSpace="System.Web.UI.WebControls" %>
<%@ Import NameSpace="System.Web.UI.WebControls.WebParts" %>
<%@ Import NameSpace="System.Web.UI.HtmlControls" %>
<%@ Import NameSpace="System.Reflection" %>
<%@ Import NameSpace="System.Web.SessionState" %>
<script language="c#" runat="server">

public void Page_Load(object sender, EventArgs e)
{
Log("<b>Refresh twice to see result after switch to another subdomain</b>");
if (Session["CREATION"] == null)
{
string navigateur = HttpContext.Current.Request.ServerVariables["HTTP_USER_AGENT"].ToString    ();
if (navigateur.ToUpper().Contains("FIREFOX"))
{
navigateur = "Firefox";
}
else if (navigateur.ToUpper().Contains("MSIE"))
{
navigateur = "Internet Explorer";
}

Session["CREATION"] = "Session create at " + DateTime.Now.ToString("hh:mm:ss") + " by "     +      navigateur;  
}
Session["HOST"] = Request.Headers["HOST"];
Session["SESSIONID"] = Session.SessionID;
CheckSession();
}
private void Log(string text)
{
Label1.Text += text + "<br/>";
}
public void CheckSession()
{
object obj = typeof(HttpRuntime).GetProperty("CacheInternal", BindingFlags.NonPublic | BindingFlags.Static).GetValue(null, null);   
object[] obj2 = (object[])obj.GetType().GetField("_caches", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(obj);
for (int i = 0; i < obj2.Length; i++)
{
Hashtable c2 = (Hashtable)obj2[i].GetType().GetField("_entries", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(obj2[i]);
foreach (DictionaryEntry entry in c2)
{

object o1 = entry.Value.GetType().GetProperty("Value", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(entry.Value, null);
if (o1.GetType().ToString() == "System.Web.SessionState.InProcSessionState")
{
Log("<hr/>");
SessionStateItemCollection sess = (SessionStateItemCollection)o1.GetType().GetField("_sessionItems", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(o1);                
if (sess != null)
{
foreach (string key in sess.Keys)
{
Label1.Text += key + " = " + sess[key] + "<br>";
}

}
}
}
}

}
</script>

<html>
<body>
<form id="form1" runat="server">

<asp:Label id="Label1" runat="server"/>
</form>
</body>
</html> 
```

希望有人可以帮助我。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:21:25.787

在设置中从域中删除第一个点。您的代码将如下所示：

```
<httpCookies domain="myapplication.com"/>
<authentication mode="Forms">
<forms loginUrl="index.aspx" cookieless="UseCookies" timeout="60000" 
      enableCrossAppRedirects="true" domain="myapplication.com"/>
</authentication> 
```

使用这个点，您不会让子域读取 cookie 并创建一个新的。

# install4j - install4jc 指定浮动服务器

> ID：12609968
> 
> 赞同：1
> 
> 时间：2012-09-26T20:36:29.897
> 
> 标签：install4j

我现在使用 install4jc 我可以在命令行中指定浮动服务器和版本（Windows 或多平台）。

是否可以在我们的构建服务器上安装的任何 install4j 配置文件中指定这些，以便人们不必记住在每个构建计划中设置它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:13:56.217

您可以修改安装目录，为一台机器上的所有用户设置浮动许可服务器：

获取文件`%USERPROFILE%\.install4j5\config.xml`或`$HOME/.install4j5/config.xml`并将其复制到`[install4j installation directory]/config/config.xml`.

# c++ - 不鼓励在 C++ 中使用常量吗？

> ID：12609971
> 
> 赞同：9
> 
> 时间：2012-09-26T20:36:38.977
> 
> 标签：c++, coding-style

这个[风格指南](http://geosoft.no/development/cppstyle.html)对我很有用，但我遇到了规则 #5：

> 通常，应尽量减少使用此类常量。在许多情况下，将值作为方法实现是更好的选择：

```
int getMaxIterations() // NOT: MAX_ITERATIONS = 25
{
    return 25;
} 
```

我从风格的角度理解这个推理：你不仅取消了“大喊大叫”的常量声明，而且还减少了正在使用的*语言结构*的数量（如果这是不正确的术语，请原谅我），使程序更容易理解。

但是，这种方法是否会对编译器产生负面影响，或者现代编译器（或者实际上是较旧的编译器..）能够足够提前确定您的 getMaxIterations 函数每次都返回相同的数字？

确实，再三考虑，编译器是否甚至需要向前看？样式指南建议方法方法比使用常量值*更好*，我猜这是正确的，因为“常量”值在其在任何范围内的使用完成后不需要保存在内存中？

总之，我的问题是：不鼓励使用常量值，如果是，为什么？

（对于奖励积分，将常量值声明为方法和常量之间有什么技术区别？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:45:32.153

这是内联的大多数编译器。

话虽如此，风格指南是有道理的。它说而不是这样做：

```
#define FOO_MAX_ITERATIONS 25
struct Foo {
  void do_it() { for(int i = 0; i < FOO_MAX_ITERATIONS; i++) iterate(); }
}; 
```

应该是这样的：

```
struct Foo {
  int getMaxIterations() { return 25; }
  void do_it() { for(int i = 0; i < getMaxIterations(); i++) iterate(); }
}; 
```

正如您所看到的，从长远来看，它更加一致和可读，并且有利于未来的设计，例如当您从类继承时。稍后，您可能希望在运行时修改 getMaxIterations()，而不必像 #define FOO_MAX_ITERATIONS someMethod() 那样做丑陋的 hack。

如果您使用任何健全的 C++11 编译器（即不是 Visual Studio），则应另外声明此类函数：

```
struct Foo {
  constexpr int getMaxIterations() { return 25; }
  void do_it() { for(int i = 0; i < getMaxIterations(); i++) iterate(); }
}; 
```

请注意那里的 getMaxIterations() 声明中的 constexpr 。这告诉 C++11 编译器它是一个“常量表达式”，并且可以在编译时进行评估。通过这样做，它可以在编译之前直接将 getMaxIteratsion() 替换为 25，其中包括许多其他事情，例如允许您在其他编译时声明中使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T20:51:09.253

原因之一是 Bertrand Meyer 所说的“统一参考原则”（IIRC）。

他以银行账户和当前余额为例。这应该是数据成员还是函数/方法？Meyer 认为，在软件项目的整个生命周期中，这种类型的决策可能会发生多次变化。因此，即使余额当前表示为数据成员，您也应该将其包装在 getter 中。然后，即使实现必须更改，*接口*也不必更改......因此此类的客户端与实现更改隔离。

换句话说，即使*现在*这是一个常数，您可能会发现自己处于需要计算的点。

而且，正如其他人所指出的那样，任何现代编译器（希望）都足够聪明，它们将内联方法实现，并且您不会因为将其作为方法而招致性能损失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T20:46:00.067

不，事实上，这是*鼓励*的。之前的编译器`constexpr`（有很多，甚至是最新的 MSVC）不能将函数调用用作常量值。

```
std::array<int, getMaxIterations()> arr; // bad
std::array<int, MaxIterations> arr; // fine 
```

那个指南是一大堆错误。考虑 44

> 类的部分必须按公有、受保护和私有 [2][3] 排序。必须明确标识所有部分。不适用的部分应省略。

这是完全错误的。通常需要将它们交错，因为公共 API 依赖于私有的东西。这种严格的顺序禁止了几种 API，纯粹是因为声明顺序。一个简单的例子是你返回一个私有类型——通常用于代理对象、表达式模板等，或者公共方法的实现依赖于私有模板方法，在使用它之前必须完全定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T21:47:14.863

声明一个常量值和以本样式指南建议的方式使用方法之间有一个巨大的区别。

方法声明：

```
int getMaxIterations()
{
  return 25;
} 
```

意味着获取 getMaxIterations 的值可以修改调用该方法的对象的状态。这意味着您无法了解 const 对象的最大迭代值是多少。这也意味着在多线程环境中调用该方法可能是不安全的。这显然是不正确的，方法应该声明为：

```
int getMaxIterations() const; 
```

# c# - 在 powerpoint c# 中编写文本

> ID：12609973
> 
> 赞同：2
> 
> 时间：2012-09-26T20:36:50.660
> 
> 标签：c#, powerpoint

我想通过 c# 中的自动化在 powerpoint 中编写文本。

为此，我正在使用**Microsoft.Office.Interop.PowerPoint**。

我的示例代码：

```
objSlide = objSlides.Add(1, PowerPoint.PpSlideLayout.ppLayoutCustom);
objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
objTextRng.Text = "first text";
objTextRng.Font.Name = "Calibri";
objTextRng.Font.Size = 20;

objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
objTextRng.Text = "second text";
objTextRng.Font.Name = "Calibri";
objTextRng.Font.Size = 20; 
```

当我尝试运行此代码时，它只会为我提供第二个文本范围的输出，即“第二个文本”。

如果我想在同一张幻灯片中显示两个文本，我需要做什么。

我也尝试使用 different `textrange`，`textframe`但我不能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:39:43.893

您遇到问题是因为您在两个代码块中访问相同的形状：

```
objSlide.Shapes[1].TextFrame.TextRange; 
```

根据幻灯片中有多少个形状，您可能希望第一个块引用索引 0 或第二个块引用索引 2。无论哪种方式，两个块都应该引用不同的形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:37:06.580

作为 vb.net 代码：

```
Dim n as Integer =2
for i = 1 to 2 
        Dim Orientation As Microsoft.Office.Core.MsoTextOrientation =  Microsoft.Office.Core.MsoTextOrientation.msoTextOrientationHorizontal
        Dim STextLeft As Single = 100*i
        Dim STextWidth As Single = 100
        Dim STextHeight As Single = 100
        Dim STextTop As Single = 100*i
        Dim TargetShape = objslide.shapes.AddTextbox(Orientation, STextLeft, STextTop, STextWidth, STextHeight)

    TargetShape.textframe.textrange=i.tostring
    Orientation=nothing
    targetshape=nothing 
```

下一个

这将创建两个文本形状。请不要将 Orientation 和 Targetshape 设置为空，仅仅因为 COM 非常糟糕。如果不这样做，PowerPoint 将保持打开状态。您可能需要致电

```
 GC.Collect()
   GC.WaitForPendingFinalizers()
   GC.Collect()
   GC.WaitForPendingFinalizers() 
```

在你的程序结束时，也是。

# java - Mockito verify() 因“实际调用过多”而失败

> ID：12609976
> 
> 赞同：28
> 
> 时间：2012-09-26T20:36:56.063
> 
> 标签：java, mockito

我有一个相当复杂的测试用例，我正在尝试将以下 verify() 添加到：

```
verify(userService).getUserById(anyLong()).setPasswordChangeRequired(eq(Boolean.TRUE)); 
```

这失败并出现此错误：

```
org.mockito.exceptions.verification.TooManyActualInvocations: 
userService.getUserById(<any>);
Wanted 1 time:
-> at     test.controllers.AuthenticationControllerMockTest.testLookupsExceeded(AuthenticationControllerMockTest.java:404)
But was 4 times. Undesired invocation: 
```

所以我把它改成这样：

```
verify(userService, atLeastOnce()).getUserById(anyLong()).setPasswordChangeRequired(eq(Boolean.TRUE)); 
```

现在它失败了：

```
java.lang.NullPointerException
    at test.controllers.AuthenticationControllerMockTest.testLookupsExceeded(AuthenticationControllerMockTest.java:404) 
```

因为这是返回null：

```
verify(userService, atLeastOnce()).getUserById(anyLong()) 
```

这似乎令人费解 - 如果我使用默认值（仅一次调用），它会失败，因为它被多次调用，但如果我告诉它多次调用没问题，它会失败，因为它找不到任何调用！

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T20:46:28.503

看起来你们都想模拟`userService.getUserById()`被调用时发生的事情，并验证`setPasswordChangeRequired(true)`在返回的对象上被调用。

您可以通过以下方式完成此操作：

```
UserService userService = mock(UserService.class);
User user = mock(User.class);
when(userService.getUserById(anyLong())).thenReturn(user);

...

// invoke the method being tested

...

verify(user).setPasswordChangeRequired(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-12-14T20:34:38.760

添加调用该方法的次数也应该可以解决问题。

> verify(aclient, times(2)).someMethod();

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-07T17:24:41.377

间歇性地得到同样的错误。我们发现我们`@Mock`错误地在类中添加了两个相同类型的s。

```
 @Mock
SomeClient aClient;

@Mock
SomeClient bClient;

@Test
void test(){
  verify(aClient).someMethod(any());  //passes and fails intermittently
} 
```

删除第二个模拟固定片状。

# scala - 如何从 2 元组列表中的最后一个条目中检索第二个值？

> ID：12609978
> 
> 赞同：0
> 
> 时间：2012-09-26T20:37:03.570
> 
> 标签：scala, map, tuples

我使用地图扫描输入文件并生成字数。映射键是单词，值是单词的出现。我将地图转换为列表并按值升序排序。因此，我有一个包含 2 个元组的列表，其中出现频率最低的单词位于列表的第一个位置，最常出现的单词位于列表的最后一个位置。

我知道我可以使用 myList.last 轻松获得列表最后位置的 2tuple，然后使用 myTuple._2 访问结果的第二个元素

可以在一行代码中完成吗？我想让它尽可能简洁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:38:50.047

你的意思是：

```
val muList = List(("aardvark", 1), ("cow", 5), ("dog", 9))
muList.last._2  // 9 
```

这将获得最后一个元素，`muList`然后是在那里找到的元组中的第二个元素。

但是您不需要转换为 a`List`和排序等等。您可以从 中获取 max-count 元素`Map`，它会更快：

```
val mu = Map("aardvark" -> 1, "dog" -> 9, "cow" -> 5)
val highestCountPair = mu.maxBy(_._2)   // ("dog",9)
highestCountPair._2                     // 9 
```

或者，如果您根本不关心这个词：

```
mu.map(_._2).max  // 9 
```

# python - 打印元组中的每 2 个元素

> ID：12609983
> 
> 赞同：4
> 
> 时间：2012-09-26T20:37:16.887
> 
> 标签：python, iteration, tuples

我已经查看了几个问题[Iteration over every two elements in a list](https://stackoverflow.com/questions/5389507/iterating-over-every-two-elements-in-a-list)和 [Python "Every Other Element" Idiom](https://stackoverflow.com/questions/2631189/python-every-other-element-idiom?lq=1)，它们产生了一个我可能被迫使用的答案，但我觉得有更好的方法；我想用下面的代码做的是能够每两个或每 4 个元素打印一次

```
 Gun_rack =(
         'Gun 1:', 'Colt New Frontier 44 Special', 'Cal:.44     ', 'Weight: 2.8  lbs', 'Ammo Capacity  :6',
         'Gun 2:', 'Smith & Wesson SW1911DK'  ,    'Cal:.45 ACP ', 'Weight: 2.6  lbs', 'Ammo Capacity  :9',
         'Gun 3:', 'Heckler & Koch P2000SK V2',    'Cal.357     ', 'Weight: 1.50 lbs', 'Ammo Capacity :13',             
         'Gun 4:', 'Magnum Research Desert Eagle', 'Cal.50      ', 'Weight: 4.46 lbs', 'Ammo Capacity  :7',
         'Gun 5:', 'Heckler & Koch MP5K ',         'Cal 9mm     ', 'Weight: 4.78 lbs', 'Ammo Capacity :30',
         ) 
```

我知道如果我使用字典，我可以像 python 教程中给出的示例一样打印每个键和值参数，但是这些项目是随机顺序的，因此是元组

```
>>> knights = {'gallahad': 'the pure', 'robin': 'the brave'}
>>> for k, v in knights.iteritems():
...     print k, v
...
gallahad the pure
robin the brave 
```

我希望将类似的代码与列表或元组一起使用：

```
for a ,b in Gun_rack:
   print a,b 
```

或者

```
for a,b,c,d, in Gun_rack:
  print a,b,c,d, 
```

我想我应该提到输出应该是什么，而不是逐步遍历元组并打印每个第二个元素或每个第四个元素，它应该遍历元组并打印每 2 个元素，然后打印接下来的 2 个元素，直到结束元组。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T20:40:40.437

要打印所有其他元素：

```
for elem in Gun_rack[::2]:
   print elem 
```

以及其他所有元素，从第二个元素开始：

```
for elem in Gun_rack[1::2]:
   print elem 
```

当然，要每四个元素执行一次，只需将 2 更改为 4。这样做的原因是因为`slice`对象（当您这样做时会隐式创建`a[:]`）需要 3 个参数 - *start,stop,stride*。在这里，我们指定了步幅。

# php - PHP 类可以动态声明其属性吗？

> ID：12609986
> 
> 赞同：0
> 
> 时间：2012-09-26T20:37:30.193
> 
> 标签：php, oop, class, if-statement, attributes

通常，当我编写 PHP 类时，我会执行以下操作：

```
class MyClass () {
   public attribute1;
   public attribute2;
   public attribute3;
} 
```

是否可以根据逻辑设置属性？

```
class MyClass () {

   public function __construct() {
      if (some condition) {
         public attribute1;
         attribute1 = 23;
      } else {
         public attribute1;
         attribute1 = 55;
         public attribute2;
         attribute2 = 11;        
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:39:33.487

就像其他人说的那样，使用`$this->param = 11;`，但我不喜欢这个想法，因为**我不喜欢**我的类中未声明的变量。

在类定义中声明变量是为了可读性，您可以设置私有、公共和受保护。在java中这是不允许的，所以应该在php中，**它应该是 error**。

如果您不知道要使用哪些变量，请**使用魔术方法** [_get *()*](http://php.net/manual/en/language.oop5.overloading.php#object.get)*和*[_set()](http://php.net/manual/en/language.oop5.overloading.php#object.set)。

## 示例代码：

```
class MyClass {

    private $store = [];

    public function __get($name)
    {
        return isset($this->store[$name]) ? $this->store[$name] : null; # or output error
    }

    public function __set($name, $value)
    {
        $this->store[$name] = $value;
    }

    public function __construct()
    {
        if (rand(0,1)) {
            $this->attribute1 = 12;
        } else {
            $this->attribute2 = 21;
        }
    }

}

var_dump( (new MyClass)->attribute1 );
var_dump( (new MyClass)->attribute1 );
var_dump( (new MyClass)->attribute1 ); 
```

## 输出：

```
int(12)
NULL
int(12) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:40:01.313

是的，但你这样做：

```
class MyClass () { 

   public function __construct() { 
      if (some condition) { 
         $this->attribute1 = 23; 
      } else { 
         $this->attribute1 = 55; 
         $this->attribute2 = 11;         
      } 
   } 
} 
```

并且属性将始终是公开的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T20:55:32.497

首次访问时会创建一个属性。正如其他人所说，这不是一种好的做法，它被称为*猴子补丁*，并且只能在动态语言中实现（即那些不涉及编译器的语言，至少在开发人员方面）。

这不是一个好的做法，因为如果您不将字段集中在一个地方，自动生成工具将无法工作，代码助手可能无法工作，并且代码库的其他贡献者可能无法理解您的代码。

然而，这并不**总是**一个坏习惯。例如，CakePHP（一个 MVC 框架）使用以下技术来加速某些类的编写。当你`Controller`像这样扩展类时

```
class ThingsController extends AppController {

  var $components = array("Foo", "Bar", "Baz");

  function index() {
    $this->Foo($this->Bar->bar());
  }

} 
```

该`$components`变量由基类构造函数检查以动态加载`Foo`,`Bar`和`Baz`类，并使它们在实例变量中自动可用，例如`$this->Foo`inside `ThingsController`。然而，这在文档中已明确说明，并且是现代框架中彻底使用的一种约定，用于提供*魔术变量*，即未在代码中直接声明的变量。这种用法可以节省打字时间，但代价是破坏了上述工具的支持 - 并不是说​​新开发人员经常会有些头疼：P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T20:40:03.170

不存在的属性在第一次调用时创建。

```
class MyClass () {

   public function __construct() {
      if (some condition) {
         $this->attribute1 = 23;
      } else {
         $this->attribute1 = 55;
         $this->attribute2 = 11;        
      }
   }
} 
```

但这样做并不是一个好习惯。这样，您将不得不在项目中的*任何位置*搜索属性声明。想想你的队友（如果有的话）或你未来的自己。您应该明确定义该类具有的所有属性，否则您肯定会忘记定义它们的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:39:46.947

是的，你不会`public attribute1;'`在方法中使用。你会使用`$this->attribute1 = 23;`或`$this->attribute2 = 11;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T20:39:56.197

当然。

```
class MyClass () {
   public $attribute1;

   public function __construct($an_array = NULL) {
      if ($an_array) {
         $this->attribute1 = $an_array;  
      }
   }
} 
```

# jquery - 在 IE8 中点击“输入”按钮不会提交表单

> ID：12609987
> 
> 赞同：3
> 
> 时间：2012-09-26T20:37:38.303
> 
> 标签：jquery, forms, internet-explorer-8

在我们的组织中，我们仍在使用 IE8 标准。在我们的一个基于 Web 的应用程序中，我们注意到我们无法通过`Enter`密钥提交表单。在网上搜索后，我偶然发现了这个答案：[https ://stackoverflow.com/a/4629047/731052](https://stackoverflow.com/a/4629047/731052)

虽然 jQuery 解决方案确实有效，但我们的用户在按下键时仍然会收到“叮”声`Enter`。有没有办法防止这种情况发生？当我在像谷歌这样的网站上时，当我按下回车键时我没有得到任何“叮当”。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T20:40:33.947

用这个

```
if (e.which == '13') {
    e.preventDefault();
   //then put your code
   } 
```

假设您正在使用问题中的代码，您有一个链接到

```
jQuery.fn.handle_enter_keypress = function() {
  if ($.browser.msie){
    $(this).find('input').keypress(function(e){
      // If the key pressed was enter
      if (e.which == '13') {
        $(this).closest('form')
        .find('button[type=submit],input[type=submit]')
        .filter(':first').click();
      }
    });
  }
} 
```

# c++ - Windows Server 2008 R2 上的常见对话框：GetOpenFileName 崩溃

> ID：12609989
> 
> 赞同：1
> 
> 时间：2012-09-26T20:37:43.373
> 
> 标签：c++, windows-server-2008-r2, getopenfilename, common-dialog

我们有一个相当大的应用程序，用 C++ 编写，在 Windows Server 2003 和 Windows Server 2008 R2 上运行。它使用 GetOpenFileName API 来打开 Open File 对话框，用于选择视频文件。

我们看到在 Windows Server 2008 R2 上，我们偶尔会在“打开文件”对话框中遇到崩溃。主 GUI 线程正在等待工作线程，而工作线程正在获取访问冲突异常。堆栈跟踪如下所示：

```
linkinfo.dll!_IsValidLinkInfo@4()   
shell32.dll!LinkInfo_LoadFromStream()  + 0x7d bytes 
shell32.dll!CShellLink::_LoadFromStream()  + 0x14b bytes    
shell32.dll!CShellLink::Initialize()  + 0x1a bytes  
shell32.dll!InitializeFileHandlerWithStream()  + 0xc4 bytes 
shell32.dll!CFileSysItemString::HandlerCreateInstance()  + 0x13b bytes  
shell32.dll!CFileSysItemString::LoadHandler()  - 0x9f1d bytes   
shell32.dll!CFSFolder::_CreatePerInstanceDefExtIcon()  + 0x9b bytes 
shell32.dll!CFSFolder::_CreateDefExtIcon()  + 0xb6 bytes    
shell32.dll!CFSFolder::s_GetExtractIcon()  + 0x1e bytes 
shell32.dll!CFSFolder::_BindHandler()  - 0xd759 bytes   
shell32.dll!CFSFolder::GetThumbnailHandler()  + 0x51 bytes  
shell32.dll!_CreateThumbnailHandler()  + 0x61 bytes 
shell32.dll!CShellItem::BindToHandler()  - 0x20a93 bytes    
shell32.dll!_GetExtractIconW@16()  + 0x63 bytes 
shell32.dll!_GetILIndexFromItem()  + 0x5f bytes 
shell32.dll!_SHGetIconIndexFromPIDL@20()  - 0x3857d bytes   
shell32.dll!CFSFolder::GetIconOf()  + 0xa57c3 bytes 
shell32.dll!_SHGetIconIndexFromPIDL@20()  + 0x24 bytes  
shell32.dll!_SHIconIndexFromPIDL@16()  + 0x3d bytes 
shell32.dll!CRegFolder::GetIconOf()  + 0x10a892 bytes   
shell32.dll!_SHGetIconIndexFromPIDL@20()  + 0x24 bytes  
shell32.dll!_SHIconIndexFromPIDL@16()  + 0x3d bytes 
explorerframe.dll!CNscIconTask::_Extract()  + 0x1f bytes    
explorerframe.dll!CNscOverlayTask::InternalResumeRT()  + 0x31 bytes 
explorerframe.dll!CRunnableTask::Run()  + 0xa2 bytes    
shell32.dll!CShellTask::TT_Run()  + 0x5b bytes  
shell32.dll!CShellTaskThread::ThreadProc()  + 0x99 bytes    
shell32.dll!CShellTaskThread::s_ThreadProc()  + 0x1b bytes  
shlwapi.dll!_ExecuteWorkItemThreadProc@4()  + 0xe bytes 
ntdll.dll!_RtlpTpWorkCallback@8()  + 0xdf bytes 
ntdll.dll!_TppWorkerThread@4()  - 0x1185 bytes  
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

似乎许多其他人也遇到了类似的问题： [MSDN thread from 2011](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/ae1a0abe-a133-4ce7-ae88-3e96ca8d7cbf/)。

> “我的情况与打开通用对话框 (8R2) 应用程序崩溃的情况相同。有时它有助于重新启动应用程序并重试......有时不会。由于来自不同供应商的几个应用程序都会发生这种情况，因此更多可能是普通对话的问题。”
> 
> “我想在这里插话，我们在 2008 R2 机器上遇到了同样的问题。它可以是任何程序（我在 Notepad.exe 中见过一次）。当你查看事件查看器时，你会看到崩溃发生在由公共对话框调用的不同模块中。它发生在 32 位程序和 64 位程序中。它不会发生 100% 的时间——而是大约 50%。我们还没有看到任何模式何时以及为何发生。”

我们的假设是“打开文件”对话框试图从视频文件中获取一些缩略图信息，但视频解码器正在崩溃。

有没有其他人遇到过这个问题？如果是这样，您是否能够找出根本原因是什么？你知道为什么 IsValidLinkInfo 会出现访问冲突吗？

我们可以在这里应用任何解决方法吗？我们计划尝试删除此特定文件类型 (.ts) 的文件关联。有没有办法告诉“打开文件”对话框不要创建缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:52:48.033

更新：

我们[在 ServerFault 上发现另一个线程](https://serverfault.com/questions/79690/word-2007-crashes-on-server-2008-r2-terminal-services)报告了类似的问题（“通常当您单击文件/打开或文件/保存时它会崩溃，但并非每次都崩溃”）。根据 Microsoft 的建议，另一位用户 (PG) 能够通过将应用程序排除在数据执行保护之外来解决问题。

我们检查了数据执行保护设置，发现它设置为“为除我选择的程序和服务之外的所有程序和服务启用 DEP”。将其更改为“仅对基本的 Windows 程序和服务启用 DEP”后，问题不再出现。

# asp.net - 在没有回发的情况下调用按钮事件

> ID：12609993
> 
> 赞同：2
> 
> 时间：2012-09-26T20:37:57.867
> 
> 标签：asp.net

我有一个按钮，我想正常工作，但我不希望它回发。

如果用户单击它，我想在下一次回发时执行 Button Click 事件，我只是不希望该特定按钮能够回发。

我试过这个：

```
<asp:Button ID="ChangeAllBtn" runat="server" Text="Change All" OnClientClick="return false;" OnClick="ChangeAllBtnClick" /> 
```

但是在我回发后它不会调用 ChangeAllBtnClick 。如果我删除“return false;”，那么在我想要它之前就会有回发。

做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:21:04.290

您可以有一个隐藏字段来存储第一次点击。如果用户第二次单击，您可以尝试发出 ajax 请求..

这样，您的页面中就不会出现回发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:46:57.147

似乎是一个奇怪的要求。我不知道该怎么做。是否有可能以这样一种方式构造您的代码，当您回发时它只执行您的按钮单击事件中的代码？例子：

```
void ChangeAllBtnClick(object o, EventArgs e)
{
   DoStuff();
}

void RealButton_BtnClick(object o, EventArgs e)
{
   DoStuff(); //Executing all the code that would have been run for ChangeAllBtnClick here
   /*
      code for RealButton would be in here...
   */
}

void DoStuff()
{
   //Whatever
} 
```

如果这不是一个选项，我可能会创建一个作为服务器端控件的隐藏字段。然后您可以从客户端脚本设置它并检查服务器端的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T21:38:05.540

下面的工作吗？将 onclientclick javascript 设置为返回 false，这样它就不会回发，但也让该函数将隐藏字段中的值设置为“1”，默认值为“0”，基本上是一个标志。

在 PageLoad 检查隐藏字段的值，如果值为 1，则执行所需的代码并将隐藏字段值设置回 0。

```
<!------HTML Code------>
<input type="hidden" id="hdnChangeAllFlag  value="0" />
<asp:Button ID="ChangeAllBtn" runat="server" Text="Change All" OnClientClick="return > ChangeAllClicked()" />

<script>
function ChangeAllClicked()
{
$("#hdnChangeAllFlag").val('1');
return false;
}
</script>
''' Server Side Code

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Request("hdnChangeAllFlag")="1" and IsPostback Then
        ''''Y
    End If

End Sub 
```

# html - 重定向到搜索 URL

> ID：12609995
> 
> 赞同：0
> 
> 时间：2012-09-26T20:38:10.700
> 
> 标签：html

我希望用户搜索的输入将他​​们重定向到 URL example.com/plans?input

如何创建一个按钮？到目前为止，我有以下内容，但在输入时它什么也没做。

```
" onsearch="javascript:alert('http://www.example.com/plans?' + this.value);"/></input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:42:30.490

最好的方法是创建一个表单：

```
<form action="http://www.example.com/plans" method="GET">
   <input type="text" name="query"/>
   <input type="submit" />
</form> 
```

当点击提交按钮时，数据将被发送到：

```
http://www.example.com/plans?query=thequery 
```

# c++ - C++ 使用指针地址打印字符

> ID：12609999
> 
> 赞同：1
> 
> 时间：2012-09-26T20:38:25.177
> 
> 标签：c++, c, pointers

如果我有一个字符串地址

```
(DWORD*)PEFile->ExportTable.pNames[i]; 
```

我怎样才能打印那个字符串，注意我不知道那个字符串的大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:42:20.940

这有点难以解释，因为它模棱两可，但是......

如果 .pNames 本身是一个以 null 结尾的字符数组（c 字符串）或 C++ 字符串，只需执行以下操作：

```
std::cout << (DWORD*)PEFile->ExportTable.pNames; 
```

如果 .pNames[i] 是一个以 null 结尾的字符数组（c-string），只需执行以下操作：

```
std::cout << (DWORD*)PEFile->ExportTable.pNames[i]; 
```

如果它是一个非空终止字符数组并且您不知道大小，那么您就有麻烦了。

如果您有字符数组的大小并且它不是以 null 结尾的，那么您可以迭代它并打印。 `std::copy(PEFile->ExportTable.pNames[i], PEFile->ExportTable.pNames[i] + length, std::ostream_iterator<char>(std::cout, ""));`会在一行中为您做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:40:51.923

如果字符串是[空终止的](http://en.wikipedia.org/wiki/Null-terminated_string)，您可以简单地使用：

```
std::cout << PEFile->ExportTable.pNames[i] << std::endl; 
```

（使用`std::wcout`if`UNICODE`已定义且`pNames[i]`是`LPCWSTR`.）

如果既没有空终止符也没有字符串长度，那么你就完蛋了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T21:08:34.613

如果您认真对待这是 C 而不是 C++：

```
printf("%s", PEFile->ExportTable.pNames[i]); 
```