# StackOverflow 问答 12924000-12924999

# c# - C# 矩阵到 Android 矩阵？

> ID：12924000
> 
> 赞同：0
> 
> 时间：2012-10-16T21:51:03.033
> 
> 标签：c#, java, android

我在 C# 中有一些代码

```
 //take a world Vector2D and make it a relative Vector2D
    public Vector2D WorldToRelative(Vector2D world)
    {
        Matrix mat = new Matrix();
        PointF[] Vectors = new PointF[1];

        Vectors[0].X = world.X;
        Vectors[0].Y = world.Y;

        mat.Rotate(-m_angle / (float)Math.PI * 180.0f);
        mat.TransformVectors(Vector2Ds);

        return new Vector2D(Vectors[0].X, Vectors[0].Y);
    } 
```

问题是android的矩阵似乎没有旋转和变换向量。

它具有前后旋转和映射向量。

我该怎么做才能将此代码正确移植到android？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:15:07.793

旋转、缩放和翻译位于[http://developer.android.com/reference/android/opengl/Matrix.html](http://developer.android.com/reference/android/opengl/Matrix.html)。他们只是返回一个浮点数[]。您可能必须将向量放入矩阵中才能使用这些方法。您可能需要使用矩阵的转置，具体取决于 android 的处理方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:19:08.770

Android有一个很棒的`Matrix`课程；只需使用`mMatrix.setRotate()`and`mMatrix.setTranslate()`来进行旋转和平移。如果需要扩展，请使用`mMatrix.setScale()`.

很多 Android 函数都以 'set' 为前缀，所以`.rotate()`变成`.setRotate()`. 只是需要一点时间来适应！

# git - 将 Git 存储库发布到 SVN

> ID：12924001
> 
> 赞同：4
> 
> 时间：2012-10-16T21:51:11.660
> 
> 标签：git, svn, mirroring

我和我的小团队使用 Git，而更大的团队使用 Subversion。我想安排一个 cron 作业，以`HEAD`每小时将我们的存储库 current 发布到 SVN 存储库中的某个目录中。

我以为我已经弄清楚了，但是我之前写下的食谱现在似乎不起作用：

```
git clone ssh://me@gitserver/git-repo/Projects/ProjX px2
cd px2
svn mkdir --parents http://me@svnserver/svn/repo/play/me/fromgit/ProjX
git svn init -s http://me@svnserver/svn/repo/play/me/fromgit/ProjX
git svn fetch
git rebase trunk master
git svn dcommit 
```

这是我尝试时发生的情况：

```
% git clone ssh://me@gitserver/git-repo/Projects/ProjX px2
Cloning into 'ProjX'...
...

% cd px2

% svn mkdir --parents http://me@svnserver/svn/repo/play/me/fromgit/ProjX
Committed revision 123.

% git svn init -s http://me@svnserver/svn/repo/play/me/fromgit/ProjX
Using higher level of URL: http://me@svnserver/svn/repo/play/me/fromgit/ProjX => http://me@svnserver/svn/repo

% git svn fetch
W: Ignoring error from SVN, path probably does not exist: (160013): Filesystem has no item: File not found: revision 100, path '/play/me/fromgit/ProjX'
W: Do not be alarmed at the above message git-svn is just searching aggressively for old history.
This may take a while on large repositories

% git rebase trunk master
fatal: Needed a single revision
invalid upstream trunk 
```

我本可以发誓这以前有效，有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T00:21:21.877

您的方法存在一些问题：

*   您似乎正在使用预先存在的 git 存储库，而不是通过`git svn init`. 变基假设有一个共同的祖先，但是如果您的 git repo 先前是通过 初始化的`git init`，那么`git svn init`将创建第二个根（即无父节点）提交，并且从一个提示到另一个提示的变基将无法在没有`--onto`.
*   您使用`-s`to 选项`git svn init`，这会导致它搜索`branches/`、`tags/`和`trunk/`。正如警告 ( `Using higher level...`) 明确指出的那样，这会导致`git-svn`配置指向 svn 存储库的顶部，而不是`fromgit/ProjX`子目录。
*   你指的是`trunk`即使这个分支没有充分的理由存在；`git svn init`实际上创建了一个名为`remotes/git-svn`.

所以你想要的实际顺序是：

```
# 1st time only
svn mkdir --parents http://me@svnserver/svn/repo/play/me/fromgit/ProjX
mkdir px2
cd px2
git svn init http://me@svnserver/svn/repo/play/me/fromgit/ProjX
git svn fetch 
```

现在黑客可以在 git 和 svn 中同时发生。下次你想`dcommit`从 git 到 svn，你只需这样做：

```
cd px2
git svn rebase
git svn dcommit 
```

如果您已经初始化了 git 存储库，开始在其中进行 hack，并且需要将该历史记录移植到 svn 中，那么仅第一次的序列会更加困难，因为您需要将所有 git 历史记录移植到 svn 中，即使它们没有t 共享一个共同的祖先：

```
# 1st time only
svn mkdir --parents http://me@svnserver/svn/repo/play/me/fromgit/ProjX
git clone ssh://me@gitserver/git-repo/Projects/ProjX px2
cd px2
git svn init http://me@svnserver/svn/repo/play/me/fromgit/ProjX
git svn fetch

# transplant original git branch onto git-svn branch
root_commit=$( git rev-list --reverse HEAD | head -n1 )
git tag original-git
git reset --hard $root_commit
git reset --soft git-svn
git commit -C $root_commit
# N.B. this bit requires git >= 1.7.2
git cherry-pick $root_commit..original-git
# For older gits you could do
#   git rev-list $root_commit..original-git | xargs -n1 git cherry-pick
# or use git rebase --onto but that requires jumping through some
# hoops to stop moving remotes/git-svn. 
```

随后，`svn rebase`和`dcommit`以前一样做。

如果有人想在沙箱中测试这种方法，您可以下载[我的测试脚本](https://gist.github.com/cf334fc594e7f9fab988)。我建议您在运行之前进行视觉安全审核；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T22:56:46.923

我¹想把问题分成几个问题：

1.  将 Git 历史记录导入现有的 Subversion 存储库；
2.  之后自动同步 Git 和 SVN 存储库。

我的建议基于[SubGit](http://subgit.com) ²。

## 将 Git 存储库导入 SVN

1.  如果您可以在 svnserver 本地访问 Subversion 存储库，那么设置非常简单，并且在[SubGit Book](http://subgit.com/book)中有详细记录：

    假设 Subversion 存储库位于 $SVN_REPO，Git 存储库位于 $GIT_REPO。首先，运行以下命令：

    ```
    $ subgit configure $SVN_REPO 
    ```

    然后调整生成的 $SVN_REPO/conf/subgit.conf 文件如下：

    ```
     [git "ProjX"]
         repository = $GIT_REPO
         translationRoot = /play/me/fromgit/ProjX
         trunk = trunk:refs/heads/master
         branches = branches/*:refs/heads/*
         shelves = shelves/*:refs/shelves/*
         tags = tags/*:refs/tags/* 
    ```

    我不太确定您的案例的 translationRoot 选项。该值必须是相对于 SVN 存储库根目录的项目路径，请指定正确的路径。

    不要忘记删除其他“git”部分，因此 SubGit 不会将 SVN 存储库的这些部分转换为 Git。

    或者，您可以调整 $SVN_REPO/conf/authors.txt 文件以指定如何将 Git 提交者名称转换为 SVN 作者名称：

    ```
    SvnAuthor = Git Committer <git.committer@company.com> 
    ```

    最后，将您的 Git 存储库导入 SVN：

    ```
    $ subgit install $SVN_REPO 
    ```

    此时 $SVN_REPO 和 $GIT_REPO 有 SubGit 安装的特殊钩子。Subversion 和 Git 服务器会在每次传入修改时触发这些挂钩。这样 SubGit 会自动同步 SVN 和 Git 存储库。创建的镜像是双向的，即一些开发人员可能使用 SVN 客户端，其他人可能选择任何 Git 客户端。

    如果您不需要这种同步，只需禁用它：

    ```
    $ subgit uninstall [--purge] $SVN_REPO 
    ```

2.  如果您没有对 Subversion 存储库的本地访问权限，事情会变得更加棘手，但仍有可能：

    首先，将整个 SVN 存储库获取到您的计算机，以便您可以在本地访问它：

    ```
    $ svnadmin create repo
    $ svnrdump dump http://me@svnserver/svn/repo | svnadmin load repo 
    ```

    现在记住获取存储库的最新版本：

    ```
    $ svn info file:///path/to/repo
    Path: repo
    URL: file:///path/to/repo
    Repository Root: file:///path/to/repo
    Repository UUID: cbc56e97-717f-4d50-b705-cb6de2c836eb
    Revision: $LATEST_REVISION
    Node Kind: directory
    Last Changed Author: SvnAuthor
    Last Changed Rev: $LATEST_REVISION
    Last Changed Date: 2012-10-27 14:01:38 +0200 (Sat, 27 Oct 2012) 
    ```

    然后重复上一个子句中的所有步骤。因此，本地 SVN 存储库之后应该存储导入的 Git 历史记录。

    最后，将生成的历史记录发送回 SVN：

    ```
    $ svnsync initialize http://me@svnserver/svn/repo file://path/to/repo
    $ svn propset --revprop -r0 svn:sync-last-merged-rev $LATEST_REVISION http://me@svnserver/svn/repo
    $ svnsync synchronize http://me@svnserver/svn/repo 
    ```

    请注意，远程存储库必须启用*pre-revprop-change*挂钩才能使 svnsync 工作。

## Git 和 SVN 存储库的自动同步

1.  如果您对 Subversion 存储库具有本地访问权限，则可以在安装 SubGit 后继续工作。正如我已经提到的，它在将更改发送到其中一个存储库后立即翻译更改，因此在这种情况下无需维护任何 cron 作业。

2.  如果您没有对 Subversion 存储库的本地访问权限但仍想使用 SubGit，我建议您使用 svnsync 来同步托管在 svnserver 上的 SVN 存储库和由 SubGit ³控制的 SVN 存储库。

    [您可以在此 HOW-TO](http://blog.subgit.com/git-mirror-of-remote-svn-repo/)中找到有关如何设置此类镜像的指南。

    请注意，对于这种情况，您的项目应该有一个单独的 Subversion 存储库，否则很难保持 svnsync 正常工作。

3.  如果出于任何原因您决定使用`git-svn`，我建议您在使用 SubGit 导入 Git 历史记录后创建一个全新的 Subversion 存储库克隆：

    ```
    $ git svn init -s http://me@svnserver/svn/repo/play/me/fromgit/ProjX
    $ git svn fetch 
    ```

    根据我的经验，将 Git 历史记录导入 SVN 并不是`git-svn`为此而设计的。另一方面，SubGit 处理得很好。

¹全面披露：我是 SubGit 开发人员之一。

² SubGit 是一种商业产品，但对于最多 10 个提交者的小型团队是免费的。我认为它适用于你的情况。

³我们的团队正在开发 SubGit 2.0，它支持同步位于不同主机上的 SVN 和 Git 存储库。基本上，您可以在任何地方创建 Git 存储库，并使用指定的 SVN URL 将 SubGit 安装到其中。之后，您可以使用这些存储库中的任何一个——更改会在它们之间自动转换。

我们将发布具有该功能的 EAP 构建，因此可以尽快尝试。

# c# - 如何通过正则表达式屏蔽输入？1112223333 或 1112223333444

> ID：12924003
> 
> 赞同：7
> 
> 时间：2012-10-16T21:51:12.113
> 
> 标签：c#, regex, visual-studio-2010, xaml

这是在一个 xaml 文件中。

我需要用正则表达式屏蔽框的输入。

我需要它包含 10 个数字或 13 个数字（按顺序，没有符号）

我有 ：

```
<... ValidationRegEx="\d{13}" /> 
```

效果很好，但是当我想在其中添加十个掩码时，它会中断：

```
<... ValidationRegEx="\d{13} | \d{10}" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T21:53:07.513

我细化了应该删除的空格，如下所示：

```
ValidationRegEx = "\d{13}|\d{10}" 
```

否则，空格字符将成为您匹配的字符串的一部分（即 13 位数字后跟一个空格，或一个空格后跟 10 位数字）。

您也可以尝试像这样简化表达式：

```
ValidationRegEx = "\d{10}\d{3}?" 
```

（需要十位加三位可选数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:41:49.227

这对我有用：

```
< ... RegEx="\b\d{10}\b|\b\d{13}\b" ... /> 
```

这表示“找到一个 10 位数字的整个单词或找到一个 13 位数字的整个世界”。

正则表达式前后的 \b 表示找到整个单词。

看看这个帮助我回答我自己问题的教程网站：

[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:42:16.490

```
 ┌─────┬─ 10 or 13 digits
                              ↓     ↓
 ValidationRegEx = "(?<!\d)\d{10}\d{3}?(?!\d)" 
                       ↑                 ↑
                       │                 └─ negative lookahead to ensure 
                       │                    there is no other digit ahead
                       │
                       └─ negative lookbehind to ensure
                          there is no other digit behind 
```

# python - 如何将单词的第一个字母移到末尾

> ID：12924009
> 
> 赞同：0
> 
> 时间：2012-10-16T21:51:32.873
> 
> 标签：python, python-3.x, python-2.7

我需要删除一个单词的第一个字母并将其移到末尾，例如：

```
word = 'whatever'
# I want to convert it to 'hateverw' 
```

到目前为止，我已经尝试过：

```
word[1:] # hatever 
```

但是我应该如何将第一个字母移到末尾？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T21:52:37.457

你可以使用：

```
word[1:]+word[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-02T23:31:31.400

这是我所做的：

```
wrd = input("Give me a word: ")

pig = wrd[1:] + wrd[0] + "ay"

print(wrd, "in Pig Latin it is:", pig.lower()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-03T14:41:27.847

**代码 ：**

```
word=input()
print(word[1:]+word[0]) 
```

**输出 ：**

```
>>> oHell
>>> Hello 
```

代码（单词 [1:0]）从第二个字符打印到最后一个字符。

> 如果要编写代码来打印第一个字符，请将代码编写为：

```
a="AbC"
print(a[0]) 
```

**输出 ：**

```
>>> A 
```

> 因为字符串的索引总是从 0 开始，而不是 1。

# c# - 重绘的单实例 C# 窗口

> ID：12924012
> 
> 赞同：1
> 
> 时间：2012-10-16T21:51:57.870
> 
> 标签：c#, command-line, utility

我认为很容易的事情很快就打败了我。我不是本地 C# 程序员，但被要求创建一个具有单个实例的 WinForm 应用程序。我已经在 StackOverflow 上看到了 Mutex 示例，但让我难以理解的一件事是能够在命令行上将参数传递给窗口、解析值并使用新值重新绘制表单。

有人有这方面的例子吗？似乎让我绊倒的主要事情是线程。我想运行 my.exe 并显示窗口。每次运行表单时，我都不想要一个新表单——只是为了获取新参数并在表单中显示它们。

感谢任何/所有回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:56:05.587

当您启动应用程序的另一个实例时，您正在运行相同的代码，但在不同的进程上。因此，您需要查看[进程之间的数据传递](https://stackoverflow.com/questions/84855/what-is-the-best-choice-for-net-inter-process-communication)。诸如命名管道或远程处理之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:37:40.797

@lazyberezovsky 是对的。从命令行再次调用应用程序将产生一个不同的、不相关的进程，并且在退出正在调用的新进程之前，您需要进程间通信以将新参数转发到先前运行的应用程序实例。

恕我直言，在这两个进程之间进行通信的最简单方法（当然不是最好的）是使用 Windows 注册表，因为这已经是线程安全的并且 API 非常简单。

首先，当应用程序运行时，在显示主窗体之前，我会[检查应用程序的另一个实例是否正在运行](https://stackoverflow.com/questions/4722198/checking-if-windows-application-is-running)。

如果为 false，这是应用程序第一次运行，我将处理命令行并将表单显示为常规。我还将清除用于进程间通信的注册表项（见下文）。

如果为真，那么我会将命令行存储在[注册表](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)中的特定键上，该键将用于进程间通信，然后我将终止应用程序，甚至不显示主窗体。

您正在运行的应用程序（第一个实例）将需要启动轮询机制（可能是 Windows 计时器每秒触发一次），该机制会定期检查需要新命令行的注册表项。它通常会找到并清空字符串并且什么都不做，但是如果检索到的值不为空，那么这意味着用户再次使用一组不同的参数生成了应用程序，然后您可以继续解码您的命令行并重新绘制窗口有必要的。在此之后，请确保再次清除注册表项，以便轮询机制恢复并检测用户下次调用应用程序的时间。

命名管道、WCF、.remoting 或 TCP 套接字是可以使用且不需要轮询机制的 IPC 机制，这可能会被某些人所反对。;)

希望这可以帮助！

# java - Log4J - 在具有动态线程创建的环境中，每个线程一个日志文件

> ID：12924015
> 
> 赞同：1
> 
> 时间：2012-10-16T21:52:27.153
> 
> 标签：java, log4j

让我先简要解释一下我正在使用的系统：

我们有一个作为守护进程运行的系统，在工作单元进入时运行它们。当这个守护进程被赋予一个新的工作单元时，它会动态地创建一个新线程。对于这些工作单元中的每一个，我需要 Log4J 创建一个新的日志文件以附加到 - 文件名将在运行时提供，此时必须创建新的日志文件。这个守护进程必须能够无限期地保持活动状态，我相信这会引起一些内存问题，我将解释。

我的第一个想法是为每个工作单元创建一个新的 Logger，当然，以线程命名。工作单元的线程保留对该 Logger 的引用。当单元完成时，它将被垃圾收集，但问题是 Log4J 本身保留了对 Logger 的引用，它将永远不会被再次使用。似乎所有这些 Logger 都会导致 VM 内存不足。

另一种解决方案：子类Filter，通过线程名称过滤Appender，并将它们放在同一个Logger上。然后，在工作单元完成时移除 Appender。当然，这需要添加代码以删除附加程序。那将是很多代码更改。

我研究了 NDC 和 MDC，它们似乎是为了管理交错输出到同一个文件。我考虑过提出这个作为解决方案，但我认为它不会被接受。

我想说 Log4J 似乎*不*打算以这种方式运行，即在运行时动态创建新的日志文件，因为它们是必需的（或期望的）。所以我不确定接下来要看哪个方向 - log4j 不是这里的解决方案，还是我完全错过了什么？我对 NDC 的关注不够仔细吗？还是因为我看不到的原因，我对 Log4J 持有 Loggers 的担忧不是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T15:57:53.280

ThreadLocal 似乎是您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:59:13.920

您可以创建一个包装普通日志方法的新日志方法，并附加线程 ID。类似于以下内容（过于简单，但你明白了）。我相信 Log4j 已经是线程保存，所以只要你不记录大量，你应该没问题。然后你可以轻松地 grep 线程 id。

```
public log(long id, String message)
{
   logger.log("ThreadId: id + "message: " + message);
} 
```

# c# - 尝试从同一个变量打印多个条目

> ID：12924016
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:52:28.553
> 
> 标签：c#, for-loop, while-loop

我很好奇是否有一种方法可以循环同一个字符串变量的多个条目？基本上，我想将玩家姓名的多个条目打印到一个 For 循环中，但是我有一个脑残，我很难理解如何扩展我到目前为止编写的简单代码段-环形。

```
 class Program
{
    static void Main(string[] args)
    {
    string choice = "y";
    string player_name = "";

    while (choice == "y")
    {

        Console.WriteLine("Enter the players name: ");
        player_name = Console.ReadLine();

        Console.WriteLine("Would you like to enter another player? y/n");
        choice = Console.ReadLine();

    }
    Console.WriteLine(player_name);

    Console.ReadLine();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:55:57.893

将名字放在一个列表中，然后遍历列表：

```
List<string> player_names = new List<string>();

do {

    Console.WriteLine("Enter the players name: ");
    player_name = Console.ReadLine();
    player_names.Add(player_name);

    Console.WriteLine("Would you like to enter another player? y/n");
} while (Console.ReadLine() == "y");

foreach (string name in player_names) {
  Console.WriteLine(name);
} 
```

# business-intelligence - Kettle / Pentaho 中的聚合操作

> ID：12924023
> 
> 赞同：1
> 
> 时间：2012-10-16T21:52:48.657
> 
> 标签：business-intelligence, etl, pentaho, kettle

我正在尝试在 Excel 文件输入的某些列之间进行聚合操作。我有以下情况：

```
第 1 栏 第 2 栏 第 3 栏

X $15 一个
X $20 一个
Y $1 B
Y $1 B
是 $3 C

```

我想实现这个聚合操作：

```
第 1 栏 第 2 栏 第 3 栏

X $35 一个
Y $2 B
是 $3 C

```

如您所见，第 1 列和第 3 列是进行聚合操作的标准，在这种情况下，我想获得第 2 列的总和。

在 Pentaho 数据集成中有什么方法可以做到这一点吗？我试过“加入行”和“加入行（作为笛卡尔积）”，但是，我没有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:26:35.693

请看[Group By step](http://wiki.pentaho.com/display/EAI/Group+By)。它应该允许您按`Column 1`and`Column 3`和 sum进行分组`Column 2`。

# sql-server-2008 - tsql 动态 sql 最佳方法

> ID：12924034
> 
> 赞同：0
> 
> 时间：2012-10-16T21:53:07.923
> 
> 标签：sql-server-2008, tsql

我下面的动态查询有效，但想知道我下面的内容是否可以优化，或者是否有更好的方法。

我有一个网络表单，用户可以在其中输入位置和收集日期。对于收集的日期，我有收集的起始日期和收集的日期。用户将收集的截止日期留空，在这种情况下，它将执行比收集的起始日期更大的操作。

请注意我是如何在下面执行 IS NOT NULL 和 1=1 的。还想知道动态 SQL 是否是最好的方法，或者是否有更简单的方法来做到这一点。

```
 DECLARE @sql varchar(max);

    SET @sql = 'SELECT * from tblProgram WHERE 1=1' 

    IF (@Location IS NOT  NULL)
    BEGIN
      SET @sql = @sql + ' AND Location = ' +  @Location
    END      

    IF (@FromDateCollected IS NOT  NULL AND @ToDateCollected IS NOT NULL)
    BEGIN
         SET @sql = @sql + ' AND pw.DateCollected >= ' +  QUOTENAME(convert(varchar, @FromDateCollected,101),'''') 
         + ' AND pw.DateCollected <= ' + QUOTENAME(convert(varchar, @ToDateCollected,101),'''')

    END
    ELSE IF (@FromDateCollected IS NOT  NULL AND @ToDateCollected IS  NULL)
    BEGIN
      SET @sql = @sql + ' AND pw.DateCollected >= ' +  QUOTENAME(convert(varchar, @FromDateCollected,101),'''') 

    END 

   exec(@sql) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:11:25.447

那么你可以做 ta.speot.is 评论使用静态 SQL 并做

```
WHERE x is null or x > date_column? 
```

但是，如果您坚持使用动态 SQL，则应使用[sp_executeSQL的参数化 SQL 语句](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

它更易于阅读，您不必使用引号名称，并且可以防止 SQL 注入

```
DECLARE @Location int 
DECLARE @FromDateCollected datetime 
DECLARE @ToDateCollected datetime
SET  @ToDateCollected  = '1/02/2012'

DECLARE @sql nvarchar(max)
DECLARE @ParmDefinition nvarchar(max)

SET  @ParmDefinition = N'@Location int , @FromDateCollected datetime, @ToDateCollected datetime ';

SET @sql = N'SELECT * from tblProgram WHERE 1=1' 

IF (@Location IS NOT  NULL)
BEGIN
   SET @sql = @sql + N' AND Location = @Location'
END      

IF (@FromDateCollected IS NOT  NULL AND @ToDateCollected IS NOT NULL)
BEGIN
   SET @sql = @sql + N' AND pw.DateCollected >= @FromDateCollected '
      + N' AND pw.DateCollected <= @ToDateCollected '

END
ELSE IF (@FromDateCollected IS NOT  NULL AND @ToDateCollected IS  NULL)
BEGIN
   SET @sql = @sql + N' AND pw.DateCollected >= @FromDateCollected' 

END 

exec sp_executesql @SQL, @ParmDefinition, @Location = @Location,
                                  @FromDateCollected = @FromDateCollected,
                                      @ToDateCollected = @ToDateCollected 
```

[演示](http://sqlfiddle.com/#!3/1c4d5/5)

# objective-c - NSOperation 子类 isCancelled isFinished isConcurrent

> ID：12924037
> 
> 赞同：2
> 
> 时间：2012-10-16T21:53:15.037
> 
> 标签：objective-c

我有一个 NSOperation 子类。我正在压倒主要并准备就绪。这不是并发操作。

当我调用 [op cancel] 时，操作不会从队列中删除。我打印出 [op isCancelled] [op isFinished] & [op isConcurrent]..

操作被取消：1 操作完成：0 操作正在并发：0

我究竟做错了什么？超类不会处理取消的操作并为非并发操作更改键“isFinished”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:57:57.347

如果你覆盖`ready`，你也必须覆盖`cancel`。抽象类中发生的情况是，当调用取消时，它将操作设置为就绪，以便队列可以调用开始，开始方法检查取消标志，然后中止操作并设置 isFinished=YES。然后操作队列dealloc的操作。你不能没有另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:01:08.827

作为 NSOperation 子类，您有责任定期检查 [self isCancelled] 并在为 YES 时退出操作。操作队列不能（立即）取消已经在运行的操作。

# django - 更改设置配置现在 Django 静态文件不起作用

> ID：12924043
> 
> 赞同：0
> 
> 时间：2012-10-16T21:53:46.247
> 
> 标签：django, django-settings, django-staticfiles

所以我用以下方案更新了我的项目设置

```
PROJECT_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

/settings
  base.py
  prod.py
  dev.py 
```

这是上述配置的正确 STATICFILES_DIRS 设置吗？

```
STATICFILES_DIRS = [
os.path.join(PROJECT_ROOT, "site_media", "static"),
]

STATIC_URL = "/site_media/static/" 
```

模板渲染得很好

```
TEMPLATE_DIRS = [
     os.path.join(PROJECT_ROOT, "templates"),
] 
```

所以我对为什么我的 css 文件不起作用

主页.html

```
<link rel="stylesheet" href="{{ STATIC_URL }}css/home.css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:21:59.550

您可能希望将您的更改`PROJECT_ROOT`为以下内容：

```
# cwd is settings. determine project path
cwd = os.path.dirname(os.path.abspath(__file__)) 
PROJECT_ROOT = cwd[:-9] # chop off "settings/" 
```

这应该让你的项目根在你想要的地方。另外，当您尝试使用时，前端正在创建什么链接`{{STATIC_URL}}`？

您可能需要查看[此链接](https://code.djangoproject.com/wiki/SplitSettings)以获取有关拆分 settings.py 文件的更多信息。

# sql - 在 Access 追加查询中检查键违规

> ID：12924047
> 
> 赞同：0
> 
> 时间：2012-10-16T21:53:56.663
> 
> 标签：sql, ms-access, key

我正在尝试将一个表附加到另一个表，并且收到一个密钥冲突错误。

> “Microsoft Access 无法追加追加查询中的所有记录。由于类型转换失败，Microsoft Access 将 0 字段设置为 Null，并且由于键违规，它没有将 26 条记录添加到表中, 0 条记录因违反锁定规则，0 条记录因违反验证规则。是否仍要运行操作查询？"

我怎样才能告诉 Access 这些关键违规行为具体发生在哪里？我很难滚动浏览并解决所有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T16:25:48.263

如果您的服务器位于 SQL Server 上并且您通过 Access 访问它，则需要将链接与链接管理器重新同步。

在某些情况下，您需要将所有列设置为允许空值，因为在重新同步链接后会出现此错误。

我遇到了很多用于即兴报告的回溯/遗留 .txt 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:00:06.673

[您可以使用简单的内部连接](http://msdn.microsoft.com/en-us/library/office/bb208854%28v=office.12%29.aspx)检测 26 个冲突：

```
SELECT *
FROM tableA
   INNER JOIN tableB
      ON tableA.keyColumn = tableB.keyColumn 
```

# linux - fork() & 内存分配行为

> ID：12924048
> 
> 赞同：3
> 
> 时间：2012-10-16T21:53:57.150
> 
> 标签：linux, memory-management, linux-kernel, fork

我在一个禁用交换并且禁用内存过量使用的系统上工作。

假设我的进程当前消耗 100 MB 内存，系统可用内存小于 100 MB。

如果我执行 fork() 会失败，因为内核也尝试为子进程分配 100 MB 吗？

我读过Linux在分叉时使用写时复制，因此子和父共享所有页面。所以我猜 fork 应该成功？

假设 fork 成功，假设我在调用 exec() 之前在子进程中有几行代码。因此，父子进程将继续共享文本段，除非子进程触及任何堆内存，否则内存使用量不应有任何变化。这个对吗 ？

```
Edit: One follow-up question: With swapping/overcommit disabled, can the cumulative VSS 
(Virtual Set Size) of all the processes be more than the available physical memory ?

I tried this out.  VSS of all the processes can be much more than that of the physical 
memory available.

pmap -x output from a process. 

total kB          132588   10744    7192

First number - Virtual Set Size
Second number - Resident Set Size
third number - dirty pages

RSS is < 10% of VSS. This is with swapping and overcommit disabled.

For every shared library loaded I see something like the following..

00007fae83f07000      32      24       0 r-x--  librt-2.12.so
00007fae83f0f000    2044       0       0 -----  librt-2.12.so
00007fae8410e000       8       8       8 rw---  librt-2.12.so

00007fae84312000     252     120       0 r-x--  libevent-2.0.so.5.0.1
00007fae84351000    2048       0       0 -----  libevent-2.0.so.5.0.1
00007fae84551000       8       8       8 rw---  libevent-2.0.so.5.0.1

I guess r-x segment is code and rw- is data. But there is a 2 MB segment 
that is not loaded. I see this 2 MB segment for every single shared library. 
My process loads a lot of shared libraries. That explains the huge difference 
between VSS & RSS.

Any idea what is that 2 MB segment per shared library ? 

When overcommit is disabled, if this process calls fork() will it fail when 
the free memory is less than VSS (132588 Kb) or RSS (10744) ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:16:05.463

是的，如果完全禁用内存过量使用，那么`fork`将会失败。它将失败，因为如果程序希望写入它们，它可能会取消共享其所有页面，并且严格的过度使用模式不允许这样做。

您可以替换`fork`为`vfork`，这将起作用。`vfork`设计为仅在与`exec`fork/exec 模型结合使用以启动新进程时使用。

# mongodb - 猫鼬查询不起作用

> ID：12924050
> 
> 赞同：1
> 
> 时间：2012-10-16T21:54:00.523
> 
> 标签：mongodb, mongoose

我正在执行此查询以查找 ID 为“345”且在其所有者数组中有一个字符串“jack”的书。

但它只查找所有者部分而不查询 id。我在做语法错误吗？

```
Book.findOne({owner:{$in:["jack"]} },{_id:"345"},function(err,data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:35:54.137

find 选择器的`owner`和`_id`属性都需要在同一个对象中：

```
Book.findOne({owner:{$in:["jack"]}, _id:"345"}, function(err,data) {...}); 
```

# facebook - Facebook推荐按钮，不弹出对话框

> ID：12924052
> 
> 赞同：0
> 
> 时间：2012-10-16T21:54:21.813
> 
> 标签：facebook, wordpress, facebook-like, facebook-sharer

Facebook 推荐按钮生成器为我的网站提供了一个按钮，但它在 Facebook 的演示中无法正常工作，它没有弹出对话框也没有获取正确的图像。

我已经正确设置了所有元标记，并且它们也正确呈现。

这是一个示例帖子， http: [//makinsensebabe.com/ten-video-pictures-explaining-why-everyone-went-nutz-in-spain-last-week/](http://makinsensebabe.com/ten-video-pictures-explaining-why-everyone-went-nutz-in-spain-last-week/)

几天以来，我一直在搜索这个问题，但没有得到任何合适的答案，甚至在设置元标记后每次都没有获取正确的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:57:13.423

根据[Facebook 的调试工具](https://developers.facebook.com/tools/debug)，您缺少一些所需的元标记：

`Admins And App ID Missing fb:admins and fb:app_id tags are missing. These tags are necessary for Facebook to render a News Feed story that generates a high click-through rate.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:57:42.887

您可以在[Facebook Debug 上为您的对象](https://developers.facebook.com/tools/debug/og/object?q=http://makinsensebabe.com/ten-video-pictures-explaining-why-everyone-went-nutz-in-spain-last-week/)检查 url 的状态- 并从那里开始。

# iphone - UITableView 部分标题字体问题

> ID：12924054
> 
> 赞同：0
> 
> 时间：2012-10-16T21:54:33.157
> 
> 标签：iphone, ios, uitableview, interface-builder, uifont

我正在尝试为 UITableView 自定义节标题。UITableView 是在 IB 中创建的。我有两个我无法弄清楚的问题。

1.  无论 UILabel 有多大，字体大小都不会超过 18 左右。

2.  部分标题遮盖了表格。

我把标签涂成蓝色，这样你就可以看到它们的大小。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
// Name of section
NSString *header = [[purchases allKeys] objectAtIndex:section];

// Label for section header
UILabel *label = [[[UILabel alloc] init] autorelease];
label.frame = CGRectMake(10, 0, 230, 45);
label.textColor = _orange;
label.font = [UIFont fontWithName:@"Heiti TC Medium" size:52];
label.text = header;
label.backgroundColor = [UIColor blueColor];

// View to contain label
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(10, 0, 230, 45)];
[view autorelease];
[view addSubview:label];

return view;
} 
```

![截屏](../Images/f281329164a0f6a53ee884270b686803.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:24:32.250

1.  您应该为标题高度添加表视图委托方法
2.  您应该将所有单元格宽度用于标题视图。
3.  您的字体命名为 STHeitiTC-Medium

# indexeddb - 如何保证 Indexeddb 事务完成单元测试序列？

> ID：12924055
> 
> 赞同：2
> 
> 时间：2012-10-16T21:54:33.313
> 
> 标签：indexeddb

假设您正在构建一个框架 Foobar，并假设 Foobar 有一个函数 .coolstuff()，它会调用 IndexedDB 调用 .coolstuff2() 和 .coolstuff3()，当这两个都完成时，事务调用 .coolstuff4()。

随意混合和匹配上面的内容，通过在一些 for 循环中围绕各种项目进行良好的度量，以及不同层次的异步性。

现在您想编写一些单元测试来测试 Foobar。您首先编写一个将一些参数传递给 Foobar 的测试，然后启动一些很酷的东西。在各个阶段，您可能希望使用 sinon.js（或其他框架）将钩子附加到某些特定的coolstuff 函数上，以在 IndexedDB 上进行项目计数或检查 dom 等。尽管可能难以计算各种时间，但您还是这样做了.coolstuffX() 已被调用，以便在正确的阶段进行拦截以进行必要的检查。

你很满意。测试以您想要的结果结束。现在是时候运行 unittest 2 了。

但是， .coolstuffXYZ() 尚未完成异步调用单元测试 1 所需的任何内容。这将干扰单元测试 2。

如此短的依赖于测试后的计时器（混乱）......或拦截 Foobar 中的每一个函数进行单元测试，这样当你说你的测试结束时它实际上结束了（更混乱，并且无法保证）。

有没有办法关闭相关测试的数据库连接并等待所有 IndexedDB 事务完成......在开始下一个测试之前？[修辞，因为我怀疑没有]

还是我必须找到一种方法在不同的 javascript 上下文中运行每个测试？无论哪种方式，似乎都很混乱/棘手。吐槽一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:56:55.670

我在 indexeddb 之上构建了一个库。该框架的核心功能主要由单元测试覆盖。如果您想看看我是如何做到的，请访问[http://users.telenet.be/kristofdegrave/test/](http://users.telenet.be/kristofdegrave/test/)。我使用 QUnit 作为测试库。

我要做的是在第一个测试完成后开始下一个测试。对于每个测试，我都会清理以前的情况并从新的数据库情况开始。我通过在运行测试之前删除数据库来做到这一点，并创建一个包含测试初始情况的新数据库。这样测试可以独立运行，不会相互影响。

# java - GFlot/Flot：堆叠条形图未正确堆叠所有系列

> ID：12924056
> 
> 赞同：0
> 
> 时间：2012-10-16T21:54:36.903
> 
> 标签：java, gwt, charts, flot, bar-chart

我将*GWT 2.4*与*GFlot 2.4.3*结合使用，并且对六个系列的堆叠有一个奇怪的问题。

您可以在下图中看到我的栏以及问题。我有六个系列（handler1 到 handler6）代表百分比，颜色用于区分系列并有其自身的含义，但这对我的问题并不重要。如果值大于 0.0，我只会将 DataPoints 添加到系列中。

![GFlot 堆叠问题](../Images/afc29ee40a24323d6c11a55ad8c5f4d3.png)

此表显示前四个柱的数据，日期从时间戳转换为毫秒：

```
12.9.2012 | 0     0      0       0       100    
13.9.2012 | 0     0      0       99,529  0,417  
14.9.2012 | 0     0      99,935  0       0,065
15.9.2012 | 0     99,93  0       0       0,07 
```

如您所见，红色系列在 9 月 12 日和 13 日正确堆叠，但随后 Flot 突然停止堆叠条形图，直至 9 月 14 日及以后，您可以看到底部的小红色条形。另请注意，9 月 14 日的红条稍微移到了 9 月 13 日，这将继续使用以下日期/x 值。

我在值中添加了一个固定数字以增加条形的大小，并且能够看到 GFlot 没有正确堆叠条形的原因是它们不共享相同的 x 值，但这很荒谬，因为我有还验证了 - 输出到`System.err`- 所有系列的 x 值都是相同的！

例如：对于带有黄色和红色且正确堆叠的第二条，正在生成此输出：

> 系列处理程序 3：x 值：1.347.487.200.000
> 系列处理程序 4：x 值：1.347.487.200.000

堆叠不正确的第三条柱具有以下输出：

> 系列处理程序 2：x 值：1.347.573.600.000
> 系列处理程序 4：x 值：1.347.573.600.000

因此，对于两个条形，每个相关系列的 x 值是相同的，但在第二个条形之后堆叠停止工作。**这怎么可能，我该怎么做才能防止这种情况发生？**

这个问题似乎只发生在这个数据上，当绘制不同的数据时，它按预期工作，如下图所示：

![GFlot 正确堆叠](../Images/8e8b087c838c0c4b61e58c8f38ac41a2.png)

* * *

这是将数据添加到系列的代码。`multipleData`是一个对象，`Double`其 x 值是a `ArrayList<Double>`，y 值是 an，`query.getData()`返回 an`ArrayList<multipleData>`并`md.getvalue()`返回对象中`ArrayList`包含的 y 值`multipleData`。

`handlers[]`-array 显然是具有六个系列处理程序的数组。是的，我的`options.setStack(true);`情节代码中有一个；）

```
for(multipleData md : query.getData()) {
   if(!md.getValue().isEmpty()) {
      for(int i=0; i < 5; i++) {
         if(md.getValue().get(i) > 0.0) {
            handlers[i].add(new DataPoint((md.getPoint(), md.getValue().get(i)));
         }
      }
   }
} 
```

**从 10 月 17 日开始编辑：**此图像具有完全不同的数据库，并且非常清楚地显示了问题。起初，条形图没有堆叠，突然堆叠按预期工作：

![条形图堆叠问题2](../Images/a7cfe83454e2ce043f6113f113953f30.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:28:46.440

通过添加虚拟 DataPoints 并结合将**线宽**设置为**0**（`.setLineWidth(0)`调整时`BarSeriesOptions`），我能够自己解决问题。

如果没有将线宽设置为 0，Flot 似乎会在堆叠条的底部和顶部生成空 DataPoints 的轮廓，这看起来很丑陋，并且还给人一种没有数据/不应该有数据的外观。

# c# - WebMatrix 会话变量不起作用

> ID：12924063
> 
> 赞同：2
> 
> 时间：2012-10-16T21:55:10.440
> 
> 标签：c#, session-variables, webmatrix

由于我的疏忽（对于 AppState 和 Session 变量仍然是新手），我必须将我的所有 AppStates 更改为 Session 变量。WebMatrix 的替换使该部分变得容易，但是我现在在下面两行代码的第一行中遇到此错误：

```
Session["gActionMessage"] = "";
Session["gActionMessageDisplayed"] = "not"; 
```

错误：

```
Compiler Error Message: CS0103: The name 'Session' does not exist in the current context 
```

如果重要，这些代码行在我的 _AppStart.cshtml 文件中。

有什么建议么？我有语法错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:39:05.897

执行 _AppStart.cshtml 文件时会话不可用。这在管道中发生得太早了。您可以使用 _PageStart.cshtml 来初始化会话变量。

# jquery-mobile - 如何使用 jQuery Mobile 使按钮内的图像居中？

> ID：12924069
> 
> 赞同：1
> 
> 时间：2012-10-16T21:55:51.667
> 
> 标签：jquery-mobile

我是 jQuery mobile 和 Phonegap 的新手。抱歉，如果这不是问这个问题的地方。

我正在尝试将自定义图像放在按钮内（不是左侧或右侧的小图标，而是更大的图像）。

**我使用以下代码：**

```
<a data-role="button" data-corners="false" data-shadow="false" >
    <img src="images/car.png" />
</a> 
```

在渲染中，图像不是居中而是向右。

我也尝试过使用 a`class="car-icon"`和相应的 css3 规则：

```
.ui-icon-car-icon {
    background-image: url("car.png");   
}

.ui-icon-car-icon {
  text-align: center;
} 
```

任何帮助将不胜感激（我整晚都在试图解决这个问题）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:20:32.230

尝试使用这个东西，像这样：http: [//jsfiddle.net/den232/sFupf/](http://jsfiddle.net/den232/sFupf/)

```
 <button><img src="http://doc.jsfiddle.net/_downloads/jsfiddle-logo.png" height=35 width=35 ></button> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:28:25.993

您可以尝试将图像设置为`background`链接的`<a>`，并使用以下方法将其居中`background-position: center center;`：

**HTML：**

```
<a id="mybutton" data-role="button" data-corners="false" data-shadow="false" >&nbsp;</a> 
```

**CSS：**

```
#mybutton {
    background: url('car.png') no-repeat scroll 0 0 transparent;
    background-position: center center; 
} 
```

# pdf - 在命令行上导出 PDF 页面标签

> ID：12924073
> 
> 赞同：12
> 
> 时间：2012-10-16T21:56:00.707
> 
> 标签：pdf, command-line, page-numbering

我想导出存储在一些 PDF 文档中的页面标签以便于解析。我知道我可以在使用 转换后深入研究 PDF 文档`qpdf`，但这似乎有点矫枉过正。

是否没有命令行工具可以简单地打印每个页面（或与其他元数据一起）的页面标签？我知道 PDFSpy 会导出标签，但不能选择 300 美元，最好是免费的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T23:56:44.250

***简短回答：***
**我不知道有任何（免费）工具可以“简单地打印”每页的页面标签。**

此外，您将无法使用类似`qpdf`或具有同等功能的工具来逃避扩展压缩对象和对象流。

***长答案：***
没有这样的工具，因为这些是您在页面标签方面可以安全依赖的仅有的几件事。这些是：

1.  每个 PDF 文档都*必须*包含一个根对象。
2.  该根对象*必须*是`/Type /Catalog`.
3.  该文档的预告片将显示在哪里可以使用键`/Root`和间接对象编号引用找到对象。
4.  **如果**PDF 文档使用非标准页面标签，则文档根对象*必须*有一个名为 的条目`/PageLabels`。

这是它停止相对容易的地方。因为`/PageLabels`键所指的对象可能包含在压缩的对象*流中*。这意味着您必须扩展该对象流。

如果你真的成功地将页面标签描述为 ASCII，你会发现它不是一个容易解析的平面列表（就像 a `dictionary`is）：它是一个*数字树*。

我不会详细介绍这些复杂性，因为要描述所有可能的变化需要很长的文章。您最好直接在[**官方 ISO PDF-1.7 规范**](http://www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)中阅读它。

但相反，我会给你一个 ASCII PDF 代码的例子：

```
213 0 obj
  << /Type /Catalog
     /PageLabels 
        << 
           /Nums 
                 [ 
                   0 <<           % start labeling from page no. 1
                       /S /r      % label with lowercase roman numbers
                     >> 
                   7 <<           % start new labeling from page no. 8
                       /S /D      % label with standard decimal numbers
                     >> 
                   11 <<          % start labeling page no. 12
                       /S /D      % label with decimal numbers...
                       /P (ABCD-) %   ...but using label prefix 'ABCD-'...
                       /St 3      %   ...followed by '3' as the start decimal.
                     >>
                  ]
        >>
     %%...........................
     %%...more root object keys...
     %%........................... 
  >>
endobj 
```

上面的示例将标记页码*1、2、3、...（最后一个），*如下所示：

```
i
ii
iii
iv
v
vi
1
2
3
4
ABCD-3
ABCD-4
ABCD-5
ABCD-6
...and so on until last page... 
```

如您所见，标记页面的 PDF 方法（将页码映射到页面名称）完全不直观。您只能通过研究PDF规范来理解它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-07T22:13:39.047

我编写了一个基于 Poppler 的小型命令行实用程序来完成这项任务：**[https ://github.com/HeimMatthias/pdfpagelabels](https://github.com/HeimMatthias/pdfpagelabels)**

免责声明：我是 OP，并在另一个帐户下创建了原始帖子。多年来，我一直在通过 pdftk（在上面的评论中列出）成功使用该解决方案。然而，去年是时候从头开始重新实现我们的系统了，我们已经有许多实例无法通过我们的实现来解析 pdf-tk 输出。

新的命令行工具遵循[只做一件事的理念，但要做得好](https://en.wikipedia.org/wiki/Unix_philosophy#Do_One_Thing_and_Do_It_Well)，并简单地打印 pdf 文件的所有或选定页面的页面标签。如果有人发现这很有用，并在这里偶然发现它，那就更好了。

# c# - 如何以通用方式耦合两个类？

> ID：12924077
> 
> 赞同：3
> 
> 时间：2012-10-16T21:56:07.817
> 
> 标签：c#, generics, type-inference, type-safety

我有像`Ship`,等实体的类，它们每个都有一个像`Shampoo`,等的管理器类。所有管理器类都实现和实体实现。`Horse``ShipManager``ShampooManager``HorseManager``IManager``IEntity`

现在我写了一个静态函数来保存看起来像这样的实体：

```
public static bool Save<S, T>(S entity, string msg) where S : IEntity 
                                                    where T : IManager<S>, new()
{
    string possibleError;
    switch (new T().Save(entity, out possibleError))
    {
        //---------------------
    }
    return true;
} 
```

这里的不雅点是我必须调用`Save`类似`Save<Radio, RadioManager>`等。我想要的是这样的：

```
public static bool Save<T>(T entity, string msg) where T : IEntity
{
    string possibleError;
    switch ((/*find manager here*/).Save(entity, out possibleError))
    {
        //---------------------
    }
    return true;
} 
```

有几种方法可以做到这一点，但我希望有一些*涉及泛型和类型推断*的东西。我认为最好通过设计将实体类与相应的管理器类结合起来，以实现某种类型的安全性。

在扩展方法的帮助下，这是我可以做的：

```
public static bool Save<T>(this IManager<T> mgr, T entity, string msg) where T : IEntity
{
    string possibleError;
    switch (mgr.Save(entity, out possibleError))
    {
        //---------------------
    }
    return true;
} 
```

这样我就可以打电话了：

```
FooManager fMgr = new FooManager();
fMgr.Save(foo, "success"); 
```

但是在这里我总是需要实例化`IManager`然后调用`Save`它的实例上的方法。我很想避免那么多重复的代码，并将责任交给静态函数。**如何设计类以使其之间具有关系`IManager`，`IEntity`以便自动推断实体的管理者？**

**编辑：**请注意，我没有将`Save`管理器类中的方法移动到实体类的奢侈（这会使生活更轻松）。我们的整个设计基于一个实体类和一个相应的管理器类。所以我想坚持下去。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:09:02.260

FooManager 的客户是否关心它是 FooManager 还是 IManager<Foo> ？如果它只需要一个 IManager<Foo>，您可能需要查看[AbstractFactory](http://en.wikipedia.org/wiki/Abstract_factory_pattern)模式。您的工厂将负责按需实例化/检索正确的 IManager。工厂到位后，您的保存方法将如下所示

```
public static bool Save<S>(S entity, string msg) 
  where S : IEntity
  {     
     string possibleError;     
     switch (ManagerFactory.GetManagerFor<S>().Save(entity, out possibleError))     
     {
       //---------------------     
     }     
     return true; 
  } 
```

实现 ManagerFactory 的最简单方法是使用服务定位器/依赖注入器，并让它自动发现您的 IManager<T> 实现。然后您的 GetManagerFor 方法只会从 DI 容器中请求一个实例。例如，这里是使用[AutoFac的方法](http://code.google.com/p/autofac/)

```
var dataAssembly = Assembly.GetExecutingAssembly();

builder.RegisterAssemblyTypes(dataAssembly)
    .Where(t => t.Name.EndsWith("Manager"))
    .AsClosedTypesOf(typeof(IManager<>); 
```

这将导致 autofac 在当前程序集中查找名称中以“Manager”结尾的所有类，并注册为 IManager<T> 的封闭类型。所以它会找到 FooManager 并将其注册为 IManager<Foo> 的实例

现在 ManagerFactory 只需要调用

```
return container.Resolve<IManager<Foo>>() 
```

而你是金色的。我不会为你写申请，但这应该足以让你继续前进。阅读 AutoFac 上的文档，它真的很强大，因为它还可以使用依赖注入为您构建对象，并且它是一个很好的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:17:10.200

这是我解决它的方法。

`Manager`我像这样创建了一个函数`IEntity`：

```
IManager<T> Manager<T>() where T : IEntity; 
```

现在，每当我`IEntity`在任何实体类中实现时，我也被迫实现它们各自`Manager`的。例如。

```
public class Foo : IEntity
{
    public IManager<T> Manager<T>() where T : IEntity
    {
        return (IManager<T>)new FooManager();
    }
} 
```

现在我可以打电话了：

```
public static bool Save<T>(T entity, string msg) where T : IEntity, new()
{
    string possibleError;
    switch (entity.Manager<T>().Save(entity, out possibleError))
    {
        //--------------------------------------
    }
    return true;
} 
```

不是最好的设计，但这可以完成工作..

# version-control - 源码备份策略

> ID：12924079
> 
> 赞同：0
> 
> 时间：2012-10-16T21:56:40.780
> 
> 标签：version-control, backup

我有一个“项目”文件夹，其中包含数十个 Visual Studio 项目。我想为他们创建一个备份。首先，我想我应该将它们全部复制到我的 SkyDrive 或 DropBox 文件夹中，并让它们在有变化时同步到云端。

另一种策略是使用源代码控制，但我不希望在进行更改时进行备份，并且应该对其进行优化。我的意思是，只有更改的文件和更改的部分应该上传到服务器以节省我的带宽。我没有很好的连接（512 Kbps）。

此外，我的代码对我来说非常有价值，因此安全性对我来说非常重要。

有没有办法实现自动备份到云端（最好是免费的）并利用源代码控制选项（如修订等）？

我相信很多人对此都有解决方案，而且很多人也有同样的问题，所以请让问题得到回答，而不是仅仅点击“关闭”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:11:59.993

使用 GitHub 或 BitBucket。您拥有版本控制和存储库云存储的所有好处。

您可以根据需要随时提交更改，并且仅在将更改推送到服务器或从服务器拉取更改时才需要流量。版本控制系统足够聪明，只发送修改过的文件。

您甚至可以让一个团队在本地网络上工作，而不需要云解决方案，并且只需定期推送到云服务器以进行备份。为此，您可以创建一个从本地存储库中提取并推送到服务器的脚本。该脚本可以在调度程序中运行。

除了用于备份文件的服务外，我认为无论如何您都应该使用版本控制。作为一名程序员，我认为你不能没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:59:41.807

[您可能对此感兴趣。](https://stackoverflow.com/questions/1960799/using-gitdropbox-together-effectively)

这个想法是您只在 Dropbox 中创建源代码控制存储库，然后将实际副本检出到您的机器上。

然后，您只能提交（这将触发同步）您已修改的文件，这也为这些项目保留了所有历史记录。

# ruby - @instance_variable 和 attr_accessor 之间的区别

> ID：12924080
> 
> 赞同：35
> 
> 时间：2012-10-16T21:56:40.810
> 
> 标签：ruby

我刚开始学习 ruby​​，我看不出 an`@instace_variable`和使用声明的属性之间的区别`attr_accessor`。

以下两个类有什么区别：

```
class MyClass  
  @variable1 
end 
```

和

```
class MyClass
  attr_accessor :variable1
end 
```

我在网上搜索了很多教程，每个人都使用不同的符号，它与 ruby​​ 版本有什么关系吗？我还在 StackOverflow 中搜索了一些旧线程

> [Ruby 中的 attr_accessor 是什么？](https://stackoverflow.com/questions/4370960/what-is-attr-accessor-in-ruby)
> [这两个 Ruby 类初始化定义有什么区别？](https://stackoverflow.com/questions/2751930/whats-the-difference-between-these-two-ruby-class-initialization-definitions)

但我仍然无法弄清楚什么是最好的使用方式。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-16T22:26:02.603

实例变量在它所在的对象之外是不可见的；但是当您创建 时`attr_accessor`，它会创建一个实例变量，并使其在对象之外可见（和可编辑）。

带有实例变量的示例（不是`attr_accessor`）

```
class MyClass
  def initialize
    @greeting = "hello"
  end
end

m = MyClass.new
m.greeting #results in the following error:
  #NoMethodError: undefined method `greeting' for #<MyClass:0x007f9e5109c058 @greeting="hello"> 
```

使用示例`attr_accessor`：

```
class MyClass
  attr_accessor :greeting

  def initialize
    @greeting = "hello"
  end
end

m2 = MyClass.new
m2.greeting = "bonjour" # <-- set the @greeting variable from outside the object
m2.greeting #=> "bonjour"   <-- didn't blow up as attr_accessor makes the variable accessible from outside the object 
```

希望这说明清楚。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-16T22:40:46.577

实例变量在类之外是不直接可见的。

```
class MyClass
  def initialize
    @message = "Hello"
  end
end

msg = MyClass.new
@message
#==> nil   # This @message belongs to the global object, not msg
msg.message
#==> NoMethodError: undefined method `message'
msg.@message
#==> SyntaxError: syntax error, unexpected tIVAR 
```

现在，您总是可以这样做：

```
msg.instance_eval { @message } 
```

或者像这样直接询问变量：

```
msg.instance_variable_get :@message 
```

但这很尴尬，有点作弊。在别人的课堂上闲逛可能具有教育意义，但不应要求您的客户端代码这样做以获得可靠的结果。因此，如果您希望客户能够看到这些值，请不要让他们使用上述技术；相反，定义一个显式公开值的方法：

```
class MyClass
  def message 
    return @message
  end
end
msg.message
# ==> "Hello" 
```

因为你经常想要这样做，Ruby 提供了一个快捷方式来使它更容易。下面的代码与上面的代码具有完全相同的结果：

```
class MyClass
  attr_reader :message
end 
```

这不是一种新类型的变量。这只是定义方法的一种简写方式。您可以查看`msg.methods`并看到它现在有一个`message`方法。

现在，如果您想让外人不仅可以看到实例变量的值，而且还可以更改它，该怎么办？为此，您必须定义一个不同的分配方法，`=`名称中带有 a：

```
class MyClass
  def message=(new_value)
    @message = new_value
  end
end
msg.message = "Good-bye"
msg.message
# ==> "Good-bye" 
```

请注意，赋值运算符在这里是半魔法的；即使 and 之间有空格`msg.message`，`=`Ruby 仍然知道调用该`message=`方法。诸如此类的组合运算符`+=`也会触发对该方法的调用。

同样，这是一个常见的设计，所以 Ruby 也为它提供了一个快捷方式：

```
class MyClass
  attr_writer :message
end 
```

现在，如果你单独使用`attr_writer`，你会得到一个可以修改但看不到的属性。有一些奇怪的用例是您想要的，但大多数情况下，如果您要让外人修改变量，您也希望他们能够读取它。不必同时声明 an`attr_reader`和 an `attr_writer`，您可以像这样同时声明两者：

```
class MyClass
  attr_accessor :message
end 
```

同样，这只是定义让您从类外部获取实例变量的方法的快捷方式。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-16T22:37:35.847

`attr_accesor`为您提供读取和写入实例变量的方法。实例变量被设计为对外界隐藏，因此为了与它们通信，我们应该有 **attr** _ibute**访问器**方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-22T06:53:36.350

在 OOPS 中，我们有一个称为**封装**的概念，这意味着***对象的内部表示通常隐藏在对象定义之外的视图之外。只有对象“本身”才能弄乱它自己的内部状态。外面的世界不能。***

**每个对象通常由其状态和行为定义**，在 ruby​​ 中，实例变量称为对象的内部状态或状态，根据 OOPS，任何其他对象都不应访问该状态，因此我们遵守封装。

前任：`class Foo def initialize(bar) @bar = bar end end`

上面，我们定义了一个类 Foo 并且在初始化方法中我们初始化了一个实例变量（属性）或（属性）。当我们使用 new 方法创建一个新的 ruby​​ 对象时，它又在内部调用 initialize 方法，当方法运行时，@bar 实例变量被声明并初始化，并将保存为对象的状态。

每个实例变量都有自己的内部状态，并且对对象本身来说是唯一的，我们在类中定义的每个方法都会根据方法定义和用途改变对象的内部状态。这里的initialize方法做同样的事情，比如创建一个新的实例变量。

```
var object = Foo.new(1)
#<Foo:0x00000001910cc0 @bar=1> 
```

在后台，ruby 创建了一个实例变量 (@bar =1) 并将值作为对象的状态存储在对象“对象”中。我们可以使用“instance_variables”方法检查它，并且该方法根据对象的当前状态返回一个包含对象所有实例变量的数组。

```
object.instance_variables
#[
     [0]: @bar
 ] 
```

我们可以在上面看到“@bar”实例变量。它是在我们调用对象的初始化方法时创建的。默认情况下，这个“@bar”变量不应该是可见的（隐藏的），因此除了对象之外的其他人不能从内部看到它。但是，一个对象可能会弄乱它自己的内部状态，这意味着如果我们给它一种方法，它可以显示或更改值，这两个可以通过在类中创建一个新的实例方法来完成。

当我们想通过调用@bar 变量来查看它时，我们会得到一个错误，因为默认情况下我们看不到对象的状态。

```
show = object.bar
#NoMethodError: undefined method `bar' for #<Foo:0x00000001910cc0 @bar=1>
#from (irb):24
#from /home/.rvm/rubies/ruby-2.0.0-p648/bin/irb:12:in `<main>' 
```

但是我们可以通过两种方法访问变量，这两种方法称为**setter 和 getter**方法，它们分别允许对象显示或更改其内部状态（实例变量/属性/属性）。

```
class Foo
  def bar
    @bar
  end

  def bar=(new_bar)
    @bar = new_bar
  end
end 
```

我们已经定义了 getter(bar) 和 setter(bar=) 方法，我们可以任意命名它们，但里面的实例变量必须与我们想要显示或更改值的实例变量相同。setter 和 getter 在某种程度上违反了 OOPS 概念，但它们也是非常强大的方法。

当我们通过重新打开类并定义它们来定义这两个方法时，当我们用方法调用对象时，我们可以查看实例变量（此处为@foo）并更改其值。

```
object.bar
1

object.bar=2
2

object.bar
2 
```

这里我们调用了 bar 方法（getter），它返回 @bar 的值，然后我们调用了 bar= 方法（setter），我们提供了一个 new_value 作为参数，它改变了实例变量（@bar）的值，我们可以通过调用 bar 方法再看一遍。

在 ruby​​ 中，我们有一个名为**attr_accessor**的方法，它结合了 setter 和 getter 方法，我们将它定义在类内部的方法定义之上。attr_* 方法是创建方法的快捷方式（setter 和 getter）

```
class Foo
  attr_accessor :bar
end 
```

我们必须提供一个符号 (:bar) 作为 attr_accessor 方法的参数，该方法在内部创建 setter 和 getter 方法，方法名称作为提供的符号名称。

如果我们只需要一个 getter 方法，我们可以调用 attr_reader :bar 如果我们只需要一个 setter 方法，我们可以调用 attr_writer :bar

attr_accessor 创建 attr_writer 和 attr_reader 方法

我们可以为 attr_* 方法提供任意数量的实例变量，用逗号分隔

```
class Foo
  attr_writer :bar
  attr_reader :bar
  attr_accessor :bar, :baz
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-31T22:24:23.397

因为`attr_accessor`定义了方法，所以您可以从类外部调用它们。A`@variable`只能从类内部访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-15T18:10:30.047

另一个更紧凑的答案（对于 Java 开发人员） `attr_accessor :x`创建了 getter 和 setter`@x`

```
class MyClassA
  attr_accessor :x
end 
```

是相同的

```
class MyClassB
  def x=(value) #java's typical setX(..)
    @x=value
  end
  def x
    @x
  end
end 
```

# php - 在 PHP 中将打开文件请求传递给操作系统

> ID：12924081
> 
> 赞同：0
> 
> 时间：2012-10-16T21:56:45.763
> 
> 标签：php, file, user-interface

我试图弄清楚 PHP 中是否有一种方法可以在用户桌面上打开文件（即，用户从 PHP 页面上显示的文件列表中选择一个文件，然后使用适当的程序打开文件用户的桌面，就好像用户在 GUI 中双击它一样。）搜索了一段时间后，我发现这可以通过使用 PHP 中的 COM 对象的一些看起来很复杂的代码来实现，但这仅适用于 Windows 用户我试图让这个平台不可知。

有没有其他人尝试过这样做并成功了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:36:23.120

如果没有冗长的“用户同意”过程，或者用户自愿（理想情况下，有意识地）安装某些软件组件，您就无法在用户的机器上执行应用程序。

我认为最干净的方法可能是使用（签名！）Java 小程序。

否则，您可以尝试让用户使用合适的协议处理程序注册特定协议，您可以下载并安装在用户系统上以拦截诸如`exec://format%20C%2C`;-)之类的链接

不幸的是， file:// 协议（可以理解）受到限制。例如，在 Firefox 中，如果您在地址栏中手动插入“C:\”并导航，它会（在某种程度上）起作用。如果您单击*这些*链接，它们将（在某种程度上）起作用。在不同的安全上下文（例如 Internet）中复制文档中的相同链接，你瞧，它不起作用。

另一种可能性是使用 REXECd（在大多数平台上可用）或某些克隆对所有 Intranet 客户端进行后门。然后当用户单击时，您将命令从 PHP 发送到用户的工作站。由于现在的 PC 是多用户平台，因此您需要一些快速的工作来确定如何执行此操作。例如，在 Linux 机器上，您必须运行具有适当所有权和`DISPLAY`价值的 X 应用程序。

您还可以“识别”用户的平台并让用户下载适当的批处理文件，要么`.sh`要么`.bat`要么`.cmd`；但他们需要点击下载，点击批准，点击打开可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:16:56.387

您不能在客户端上运行文件。这是一个很大的安全漏洞，浏览器不允许你这样做。

在windows上你可以使用ActiveX，但是客户端必须允许安装ActiveX组件，你会遇到很多问题。

# visual-studio-2008 - SSRS 行在导出时分页

> ID：12924083
> 
> 赞同：1
> 
> 时间：2012-10-16T21:56:48.210
> 
> 标签：visual-studio-2008, sharepoint, reporting-services

我的 SSRS 报告中有一个行组，当它在 sharepoint 的 webspart 中使用时限制了该表。

```
=Ceiling(RowNumber(Nothing)/8) 
```

这很好用，我每页有 8 行。但问题是当我尝试导出表格时。例如，当我导出为 PDF 时，我得到 8 个项目，然后是很多空白，在下一页我得到 8 个项目，当我真正想要的是我的导出没有分页，直到页面上的空间不足。好像我的表情打破了我的出口。有没有正确的方法来拥有两者？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:05:57.027

我发现[了这个：Conditional report rendering based on render formats for SSRS Reports](http://www.mssqltips.com/sqlservertip/2106/conditional-report-rendering-based-on-render-formats-for-ssrs-reports/)，你应该改变你的表达式来测试[RenderFormat](http://blogs.msdn.com/b/robertbruckner/archive/2010/05/02/globals-renderformat-aka-renderer-dependent-report-layout.aspx)。或者，也许您可​​以使用 RenderFormat.Name（例如 EXCEL、PDF 等）来非常具体。

```
=IIF(
  Globals.RenderFormat.IsInteractive, 
  Ceiling(RowNumber(Nothing)/8),
   ... in case of other formats....
) 
```

![在此处输入图像描述](../Images/0093a6e3780bbabf22f6f3eeab9905f7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:56:58.537

查看[处理导出格式](http://www.bi-rootdata.com/2012/10/efficient-way-of-handling-excel.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:31:11.757

所以我能够从这篇文章的例子中让它工作

[http://beyondrelational.com/modules/2/blogs/115/posts/11163/disable-page-break-when-exporting-to-excel-in-ssrs-2008-r2.aspx](http://beyondrelational.com/modules/2/blogs/115/posts/11163/disable-page-break-when-exporting-to-excel-in-ssrs-2008-r2.aspx)

因为我在做数据处理 RenderFormat 不能在很多地方使用，但这种方式效果很好

# xml - 来自本体的 XML 结构

> ID：12924084
> 
> 赞同：1
> 
> 时间：2012-10-16T21:57:00.410
> 
> 标签：xml, ontology

数据库 A 包含每个城市及其体育场的足球俱乐部和板球俱乐部列表。我为给定的本体编写了一个模糊的 XML 结构。但是结构中有错误。我无法在 XML 中找到错误。可以有人指出这个错误吗？

```
<?xml version='1.0'?>
<City>
<Name>London</Name>

    <Football_clubs>
        <club_details>
            <name>Chelsea FC</name>
            <stadium>Stamford Bridge</stadium>
        </club_details>
        <club_details>
            <name>Fulham</name>
            <stadium>Craven Cottage</stadium>
        </club_details>
        <club_details>
            <name>Spurs</name>
            <stadium>WHL</stadium>
        </club_details>
    </Football_clubs>
    <Cricket_Clubs>
        <club_details>
            <name>Yorkshire</name>
            <stadium>XYZ</stadium>
        </club_details>
        <club_details>
            <name>Leicetshire</name>
            <stadium>ABC</stadium>
        </club_details>
        <club_details>
            <name>Surrey</name>
            <stadium>GHI</stadium>
        </club_details>
    </Cricket_Clubs>

 </City>

 <City>
<Name>Manchester</Name>

    <Football_clubs>
        <club_details>
            <name>Manchester Utd</name>
            <stadium>Old Trafford</stadium>
        </club_details>
        <club_details>
            <name>Manchester City</name>
            <stadium>Maine Road</stadium>
        </club_details>
        <club_details>
            <name>Bolton</name>
            <stadium>SDF</stadium>
        </club_details>
    </Football_clubs>
    <Cricket_Clubs>
        <club_details>
            <name>Yorkshire</name>
            <stadium>XYZ</stadium>
        </club_details>
        <club_details>
            <name>Leicetshire</name>
            <stadium>ABC</stadium>
        </club_details>
        <club_details>
            <name>Surrey</name>
            <stadium>GHI</stadium>
        </club_details>
    </Cricket_Clubs>

  </City> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:12:14.003

肯定缺少根元素：

“每个 XML 文档只有一个根元素。这个元素也称为文档元素。它包含所有其他元素，因此是所有其他元素的唯一父元素。” - 维基

应该：

```
<?xml version='1.0'?>
<cities>
    <city>
        ...contents
    </city>
    <city>
        ...contents
    </city>
</cities> 
```

# java - 从 String 转换为 byte[] 到 String

> ID：12924091
> 
> 赞同：1
> 
> 时间：2012-10-16T21:57:19.613
> 
> 标签：java, character-encoding, utf

我遇到了这样一个java字符串，其中以下是**错误**的：

```
body.equals(new String(body.getBytes())); 
```

我想这是因为 String 构造函数默认将 body byte[] 的编码视为 UTF-8，我不是 100% 确定。我如何能够将此字符串存储在 byte[] 中并能够稍后将其转换回来？我想我需要能够确定 byte[] 的编码是什么。我该怎么做？

一些上下文：我需要 byte[] 以便我可以压缩数据，将其存储在数据库中，然后解压缩并将未压缩的 byte[] 转换回原始字符串。该字符串最初来自某个下载网页的库，我不确定他们在将其交给我之前对字符串进行了哪些处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:10:11.313

平台默认字符集用于编码和解码。

问题是，该字符集可能是有限的，例如 US-ASCII。如果字符串中的字符在该字符集之外，我们将丢失它。

使用涵盖所有 unicode 字符的字符集，例如 UTF-8、UTF-16。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:05:38.563

只需确保两种方式都使用相同的字符集 - 从字符串创建字节数组*和*从字节数组创建字符串时。

所以你的例子会更好：

```
body.equals(new String(body.getBytes("utf-8"), "utf-8")); 
```

这将保证，无论环境如何，字节都会被理解。

几乎毫无疑问，您还应该使用 unicode。如果您选择单字节编码（例如 ISO 代码页），您将来可能会后悔，即使现在有满足您需要的单字节编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:08:59.037

在不指定编码的情况下在字节和字符之间进行转换时，行为取决于平台。使用的默认编码是 JVM 范围的并且取决于您的系统。我不知道如果编码是 ASCII 并且你有一些非 ASCII 字符会发生什么，但我知道你会得到一个不同的字符串。您需要在每次音乐会时指定编码以避免这种情况。

# php - Youtube API 视频列表，多久刷新缓存？

> ID：12924092
> 
> 赞同：0
> 
> 时间：2012-10-16T21:57:22.577
> 
> 标签：php, youtube, youtube-api

所以我有一些简单的东西：

```
 $yt = new Zend_Gdata_YouTube();
        $yt->setMajorProtocolVersion(2);

        $q = $yt->newVideoQuery();
        $q->setOrderBy('viewCount');
        $q->setCategory('182);
        $q->setAuthor('MYYOUTUBENAME');

        printVideoFeed($yt->getVideoFeed($q)); 
```

哪个工作得很好。

现在我正在上传更多视频，这些视频已经过处理并且是公开的——但它们没有出现在上面的输出列表中。

就像上面的查询卡在同一个缓存上，不会刷新和加载来自用户 MYYOUTUBENAME 的关键字“182”的新视频？

我试图更改正在显示的视频的视频标题，这也不会刷新，它会显示旧的视频标题？

我可以以某种方式影响这一点并让 youtube 刷新它的缓存，还是 youtube 做的事情？如果最后一条语句是答案，那么两次刷新之间需要多长时间？现在等了大约45分钟，仍然没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:54:38.260

（基本上，您需要从上传供稿中请求视频，而不是从搜索供稿中请求视频，并确保在发出上传供稿请求时不提供任何排序​​参数。）

# ios - 模拟“拍照”屏幕闪烁

> ID：12924094
> 
> 赞同：10
> 
> 时间：2012-10-16T21:57:38.923
> 
> 标签：ios, animation, uiview, avfoundation, calayer

我有一个模拟拍照的 AV Foundation 应用程序（如相机应用程序）。通常以下内容对我有用，但在这种情况下不是。

这段代码在我的视图控制器的一个动作中执行。它包含一个附加了 AVCaptureVideoPreviewLayer 的全屏 UIView (videoPreviewLayer)。动画执行，但没有显示任何内容。另请注意，我使用的是 ARC、iOS 6、iPhone 4S、iPad3。

```
// Flash the screen white and fade it out
UIView *flashView = [[UIView alloc] initWithFrame:[[self videoPreviewView] frame]]; 
[flashView setBackgroundColor:[UIColor whiteColor]];
[[[self view] window] addSubview:flashView];

[UIView animateWithDuration:1.f
             animations:^{
                 [flashView setAlpha:0.f];
             }
             completion:^(BOOL finished){
                 [flashView removeFromSuperview];
             }
 ]; 
```

这是我附加 AVCaptureVideoPreviewLayer 的方法：

```
 // Setup our preview layer so that we can display video from the camera
captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.captureSession];

CALayer *viewLayer = videoPreviewView.layer;
viewLayer.masksToBounds = YES;

captureVideoPreviewLayer.frame = videoPreviewView.bounds;

[viewLayer insertSublayer:captureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]]; 
```

**注意**经过进一步调查后，虽然间歇性地发生了闪光。通常它似乎在它应该开始后大约 5-10 秒变得可见。即使我调用了一次代码，我也看到它快速连续运行两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:29:39.090

我的问题是“flash”代码是从 AV Foundation 回调中调用的。回调未在主线程上运行，因此任何 UI 代码都无法正确执行。该解决方案是执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^{ /* execute flash code */ }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-17T11:05:58.593

# 您的代码为 swift3

```
let shutterView = UIView(frame: cameraView.frame)
shutterView.backgroundColor = UIColor.black
view.addSubview(shutterView)
UIView.animate(withDuration: 0.3, animations: {
    shutterView.alpha = 0
}, completion: { (_) in
    shutterView.removeFromSuperview()
}) 
```

# integration-testing - 集成测试 Umbraco

> ID：12924101
> 
> 赞同：2
> 
> 时间：2012-10-16T21:58:23.197
> 
> 标签：integration-testing, umbraco, data-access-layer

因此，我编写了一个相当简单的 DataAccess Layer 用于 Umbraco CMS 4.9。我想编写一些集成测试来测试我的存储库是否工作等。

显然 Umbraco 有一些依赖关系，那么人们如何测试他们的数据访问是否正常工作呢？

ps 我们已经有 BDD / selenium 测试..我想要适当的 Nunit 集成测试...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:51:55.427

一种方法可能是伪造源数据，即节点本身。显然，建立一个数据树是一项相当大的工作，但由于 Node 对象继承自 INode，您应该能够注入自己的实现 INode 的对象并创建自己的数据树供所有单元测试使用。

# jquery - jQuery中的等效就绪函数

> ID：12924104
> 
> 赞同：1
> 
> 时间：2012-10-16T21:58:38.530
> 
> 标签：jquery

这三个是等价的吗？

```
$(function(){
  $("#a").html("i am a")
}); 
```

```
(function($){
  $("#b").html("i am b")
})($); 
```

```
(function(){
  $("#c").html("i am c")
})(); 
```

[代码可用`here`。](http://jsfiddle.net/toeinriver/MPDKp/)

参考：

*   [jQuery 文档就绪函数](https://stackoverflow.com/questions/7479817/jquery-document-ready-functions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:02:19.280

第一个实际上等待就绪事件，而其他则没有。

第二个是用来给 JQuery 起别名的，但是在现在的使用方式上是没用的。你通过`$`，它在参数中接收`$`。当使用另一个为 分配不同值的库时，通常会使用此构造`$`。在这种情况下，您可以调用`function($){...}(jQuery)`, 以使`$`变量在函数范围内仍然指向 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:59:39.630

不，第一个等到文件准备好，其他两个没有。它们只是为代码创建一个运行范围，而不是在全局范围内运行。

# sql - 多对多关系显示其他匹配条件

> ID：12924107
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:58:44.247
> 
> 标签：sql

我将类别和列表分别存储在列表类别*表*和*列表*表中。

一个列表可以存储在多个类别中，一个类别可以有多个列表。这些由表 *ListingCategory_Listings* 连接：

```
ID | ListingCategoryID | ListingID 
```

我需要以某种方式获取其中的列表符合特定标准的所有列表类别。

例如，想象一下类别，例如：食物、饮料、住宿。

酒吧列表将链接到食品和饮料，酒店将链接到食品、饮料和住宿，旅馆将链接到住宿等。

这些列表中的每一个都经过地理编码，我希望能够显示在确定的地理位置 X 英里内有列表的类别。因此，如果只有酒吧位于 X 英里范围内，我们将显示 Food and Drink。如果只是宿舍落在这个半径内，我们只显示住宿等。我有逻辑计算出距离，我只是不知道如何得到我想要的结果

最后......为可怕的帖子标题道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:07:53.417

应该很简单

```
SELECT DISTINCT c.ID, c.name
FROM ListingCategory c
   JOIN ListingCategory_Listings lc
      ON c.ID = lc.ListingCategoryID
WHERE lc.ListingID IN (<list of listings comma separated>) 
```

# debugging - CUDA 5.0 的文件输入/输出错误

> ID：12924108
> 
> 赞同：1
> 
> 时间：2012-10-16T21:58:45.650
> 
> 标签：debugging, file-io, cuda

下载最新的工具包并编译/运行我目前拥有的代码后，我收到任何类型的文件 IO 函数的调试断言错误。当调用 fprintf 时，甚至下面的代码也会以断言错误退出。

```
//main.cu

#include <stdio.h>
#include <stdlib.h>

int main ( void ) {
    FILE* foo;
    foo=fopen("C:\\asdfsa.txt","w");
    fprintf(foo,"wtf\n");
    fclose(foo);
    return 0;
} 
```

我正在使用 CUDA 工具包 5.0 和 Visual Studio。知道发生了什么吗？我的代码在带有旧版本 cuda 工具包的旧计算机上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:22:04.947

检查 fopen 返回值。看起来您正在全新的环境中运行代码 - 也许您无法在 C:\ 中创建文件（例如，这可能需要管理员权限）

# c# - 从 Web 服务响应中删除 Xml 声明

> ID：12924112
> 
> 赞同：1
> 
> 时间：2012-10-16T21:59:00.690
> 
> 标签：c#, xml, web-services

我有以下网络服务。`<?xml version="1.0" encoding="utf-8"?>`输出的文件顶部有 XML 声明。我需要摆脱它才能让我的移动应用程序正常工作。我该怎么做？

```
[WebMethod]
    public XmlDocument GetTileData(string user)
    {
        var xml = new XmlDocument();
        xml.LoadXml(string.Format(@"<tile>
                                  <visual>
                                    <binding template='TileWideSmallImageAndText02'>
                                      <image id='1' src='http://server/images/{0}_wide.png'/>
                                      <text id='1'>Custom Field : {1}/text>
                                      <text id='2'>Custom Field : {2}</text>
                                      <text id='3'>Custom Field : {3}</text>
                                    </binding>
                                    <binding template='TileSquarePeekImageAndText01'>
                                      <image id='1' src='http://server/images/{0}_square.png'/>
                                      <text id='1'>Custom Field</text>
                                      <text id='2'>{1}</text>
                                    </binding>    
                                  </visual>
                                </tile>", value1, value2, value3, value4));

        return xml;
    } 
```

编辑 1：我试图返回 Xml 元素而不是文档，但它也不起作用。我仍然看到声明。

```
 [WebMethod]
        public XElement GetTileData(string user)
        {
            var xml = XDocument.Parse(string.Format(@"<tile>
                                      <visual>
                                        <binding template='TileWideSmallImageAndText02'>
                                          <image id='1' src='http://server/images/{0}_wide.png'/>
                                          <text id='1'>Custom Field : {1}/text>
                                          <text id='2'>Custom Field : {2}</text>
                                          <text id='3'>Custom Field : {3}</text>
                                        </binding>
                                        <binding template='TileSquarePeekImageAndText01'>
                                          <image id='1' src='http://server/images/{0}_square.png'/>
                                          <text id='1'>Custom Field</text>
                                          <text id='2'>{1}</text>
                                        </binding>    
                                      </visual>
                                    </tile>", value1, value2, value3, value4));

            return xml.Root;
        } 
```

编辑 2：我能够通过使用 HttpHandler 来解决这个问题。请看下面我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:53:40.340

以下方法将在没有声明的情况下将对象输出到 XML。关键部分是 XmlWriterSettings 类。见下文。

```
public static string SerializeToString(object obj)
        {
            var serializer = new XmlSerializer(obj.GetType());
            var ns = new XmlSerializerNamespaces();
            ns.Add("", "");
            var ms = new MemoryStream();
            //the following line omits the xml declaration
            var settings = new XmlWriterSettings { OmitXmlDeclaration = true, Encoding = new UnicodeEncoding(false, false) };
            var writer = XmlWriter.Create(ms, settings);
            serializer.Serialize(writer, obj, ns);
            return Encoding.Unicode.GetString(ms.ToArray());
        } 
```

虽然在处理类对象时使用此方法，但在处理字符串时适用相同的原则。关键部分是 XmlWriterSettings 类，并且可能（尽管您的帖子没有提到） XmlSerializerNamespaces 类。

该方法将返回一个没有 xml 声明和名称空间的字符串，这非常适合我需要使用的 Web 服务片段。

- 编辑 -

以下短程序打印没有声明和标签的所有内容：

```
var xml = new XmlDocument();
    var fragment = @"<tile>
                          <visual>
                            <binding template='TileWideSmallImageAndText02'>
                              <image id='1' src='http://server/images/{0}_wide.png'/>
                              <text id='1'>Custom Field : {1}/text>
                              <text id='2'>Custom Field : {2}</text>
                              <text id='3'>Custom Field : {3}</text>
                            </binding>
                            <binding template='TileSquarePeekImageAndText01'>
                              <image id='1' src='http://server/images/{0}_square.png'/>
                              <text id='1'>Custom Field</text>
                              <text id='2'>{1}</text>
                            </binding>    
                          </visual>
                        </tile>";

   var returnedXml = SerializeToString(fragment);
   returnedXml = returnedXml.Replace("<string>", "");
   returnedXml = returnedXml.Replace("</string>", "");
    Console.WriteLine(returnedXml);
}

public static string SerializeToString(string obj)
{
    var serializer = new XmlSerializer(obj.GetType());
    var ns = new XmlSerializerNamespaces();
    ns.Add("", "");
    var ms = new MemoryStream();
    //the following line omits the xml declaration
    var settings = new XmlWriterSettings { OmitXmlDeclaration = true, Encoding = new UnicodeEncoding(false, false) };
    var writer = XmlWriter.Create(ms, settings);
    serializer.Serialize(writer, obj, ns);
    return Encoding.Unicode.GetString(ms.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:02:31.740

试试这个：http: [//msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.omitxmldeclaration.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.omitxmldeclaration.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:13:18.137

我能够通过摆脱 Web 服务并改用 HttpHandler 来获得我正在寻找的输出。这是代码 -

```
 public class Handler1 : IHttpHandler
        {        
            public void ProcessRequest(HttpContext context)
            {
               var xml= @"<tile>
                      <visual>
                        <binding template='TileWideSmallImageAndText02'>
                          <image id='1' src='http://server/images/{0}_wide.png'/>
                          <text id='1'>Custom Field : {1}/text>
                          <text id='2'>Custom Field : {2}</text>
                          <text id='3'>Custom Field : {3}</text>
                        </binding>
                        <binding template='TileSquarePeekImageAndText01'>
                          <image id='1' src='http://server/images/{0}_square.png'/>
                          <text id='1'>Custom Field</text>
                          <text id='2'>{1}</text>
                        </binding>    
                      </visual>
                    </tile>";

               context.Response.ContentType = "text/xml";
               context.Response.Write(xml);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:01:21.470

不返回 XmlDocument 对象，而是返回一个字符串`return xml.InnerXml;`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T22:34:21.260

有效的 XML 文档将始终将此作为文档的第一行。如果没有这一行，您将无法创建 XML 文档，即使您这样做了，这也不是有效的 XML。

你为什么要这样做？

如果您想将其转换为字符串...在您的 WebMethod 中将其从 XmlDocument 更改为字符串...使用 C# 删除第一行并将其作为字符串返回。

```
[WebMethod] 
public string GetTileData(string user) 
{ 
    string xml = string.Format(@"<tile> 
                              <visual> 
                                <binding template='TileWideSmallImageAndText02'> 
                                  <image id='1' src='http://server/images/{0}_wide.png'/> 
                                  <text id='1'>Custom Field : {1}/text> 
                                  <text id='2'>Custom Field : {2}</text> 
                                  <text id='3'>Custom Field : {3}</text> 
                                </binding> 
                                <binding template='TileSquarePeekImageAndText01'> 
                                  <image id='1' src='http://server/images/{0}_square.png'/> 
                                  <text id='1'>Custom Field</text> 
                                  <text id='2'>{1}</text> 
                                </binding>     
                              </visual> 
                            </tile>", value1, value2, value3, value4); 

    return xml; 
} 
```

但是，我的建议是将第一行保留在那里。

# intersystems-cache - 如何导入一个类并保持相同的包目录结构？

> ID：12924113
> 
> 赞同：0
> 
> 时间：2012-10-16T21:59:06.377
> 
> 标签：intersystems-cache

我在 USER 命名空间中创建了一堆用于原型设计的类和包。现在我需要将所有这些类移动到不同的命名空间中。当我将类从 USER 命名空间导出/导入到另一个命名空间时，包目录树没有正确创建。例如：

> 类/Package1.SubPackage1.SomeClass

像这样在命名空间中创建：

> 类/Package1.SomeClass

我还注意到它剥离了 Package1。从我导出的原始对象。

有什么诀窍？

我在上面使用了 Ensemble 的工作室......

# objective-c - 如何在 OpenGL 2.x 中删除纹理？

> ID：12924114
> 
> 赞同：1
> 
> 时间：2012-10-16T21:59:07.480
> 
> 标签：objective-c, memory, opengl-es, opengl-es-2.0, textures

我按照[本教程](http://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1)使用 OpenGL 创建了一个基本游戏，在对其进行分析后，发现即使删除了精灵，纹理也没有被释放，从而造成内存泄漏。我通过在 Sprite 类中创建缓存轻松解决了这个问题，但我想知道如何删除纹理本身以供将来参考。它装有`GLKTextureLoader`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:59:29.230

```
GLuint index = self.textureInfo.name;
glDeleteTextures(1, &index); 
```

# git - Git：变基或合并以更新本地分支

> ID：12924115
> 
> 赞同：2
> 
> 时间：2012-10-16T21:59:13.027
> 
> 标签：git, merge, rebase

好的，我有一个开发分支，可以远程跟踪并由该项目中的每个人共享。

在本地，我已经从这个分支出来做一些正在进行的工作。但是，与此同时，另一个开发人员已提交并将更改推送到开发分支，我希望这些更改反映在我的本地分支中。 **现在是rebase的时候吗？**

我不想简单地将我的本地分支提交给开发，然后启动一个新分支，因为我想维护我的提交历史。

据我了解，rebase 将采用 HEAD 的开发分支并在其之上重新应用我的所有提交，但是如果我们对相同的行进行了更改，这是否会覆盖其他开发人员的更改而不会引发冲突？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:06:36.847

首先，你 fetch，然后你 rebase。这样做不会破坏其他人的更改；您所做的是重做您的变更集，以便它是针对他的更改而不是早期版本的增量。它从日志中消除了不必要和无用的合并消息，并使日志更有意义**，如果**这确实是应该表示开发历史的方式。

继续并重新设置基准；在这种情况下听起来是正确的做法。太多人只是不假思索地**git pull 。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T22:06:46.820

是的，你是对的，rebase 将占据开发分支的负责人，并重新应用你所有的提交。

不，它不会在不引发冲突的情况下覆盖其他开发人员的更改。如果有冲突的更改，您将需要解决冲突，就像在合并中一样（修复冲突，并使用`git add`来暂存修复），然后告诉 rebase 继续使用`git rebase --continue`.

是的，这是进行 rebase 的合适时机。很多人就是这样工作的。如果他们有未推送的本地提交，并且有上游提交，他们会在继续工作或推送到公共 repo 之前重新设置本地提交。

# node.js - 将通知系统更改为 SSL。（现在它在 Chrome 中使用 https 时被阻止，因为使用 http）

> ID：12924118
> 
> 赞同：2
> 
> 时间：2012-10-16T21:59:35.760
> 
> 标签：node.js, curl, https, express

我的网站中有一个通知系统，我正在尝试将其从 http 更改为 https。

但我的 app.js 现在列出到端口 8888。

有没有一种快速的方法可以修改它？我在网上尝试了几种方法，但都不起作用。

（现在我的卷曲是这样的`http://myipaddress:8888`）

非常感谢！对此，我真的非常感激。

```
 /* CONFIGURATION */

/* Web Server Config */
var _postpath = '/send';
var _listenport = 8888;
var _listenaddr = '0.0.0.0';  //use '0.0.0.0' to listen on all interfaces

/* Slave (sub) Redis Server Config */
var _channelfilter = '*';
var _sub_db_addr = '127.0.0.1';
var _sub_db_passwd_protected = true;
var _sub_db_passwd = 'mypassword';
var _sub_db_port = 6379;  //default redis port is 6379

/* Master (pub) Redis Server Config */
var _pub_db_addr = '127.0.0.1';
var _pub_db_passwd_protected = true;
var _pub_db_passwd = 'mypassword';
var _pub_db_port = 6379;  //default redis port is 6379

/* add pub.auth(_pub_db_passwd) in function to enable password

/* SocketIO Config */
var _loglevel = 1;

/* simple-pub-sub Config */
var _secretkey = "mypassword";

/* SERVER CODE -- DO NOT MODIFY */
redis = require('redis');
express = require('express');
socketio = require('socket.io');
fs = require("fs"),
pub = redis.createClient(_pub_db_port, _pub_db_addr); if (_pub_db_passwd_protected) {  }

sub = redis.createClient(_sub_db_port, _sub_db_addr); if (_sub_db_passwd_protected) { }
sub.on("pmessage", function(pattern, channel, json) { io.sockets.volatile.emit(channel, JSON.parse(json)); });
sub.psubscribe('*');

app = express.createServer(express.static(__dirname + '/public'),express.bodyParser());
app.listen(_listenport, _listenaddr);
app.post(_postpath, function(req, res){
  if(req.body.secretkey==_secretkey){
    delete req.body.secretkey; pub.publish(req.body.channel, JSON.stringify(req.body));
    res.send(200);
  }
});

io = socketio.listen(app);
io.configure(function () { io.set('log level', _loglevel) }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:36:43.340

我刚刚找到了解决方案。

```
var options = {
  key: fs.readFileSync('/home/ec2-user/privatekey.pem'),
  cert: fs.readFileSync('/home/ec2-user/certificate.pem')
};

app = express.createServer(options, express.static(__dirname + '/public'),express.bodyParser()); 
```

# c# - System.Threading.Tasks -> 继续

> ID：12924122
> 
> 赞同：4
> 
> 时间：2012-10-16T21:59:57.037
> 
> 标签：c#, .net, task, task-parallel-library

假设您有以下服务：

```
interface ISuessService {
    Task<Thing> Thing1();
    Task<Thing> Thing2(); 
} 
```

而且我有一个扩展方法`ContinueOnUIThread`，我可以在其中做一些很酷的事情，比如：

```
myService.Thing1().ContinueOnUIThread(_ => label.Text = "Done!"); 
```

并轻松地与 UI 线程交互。

实现执行此操作的新`ContinueWith`扩展方法的最佳方法是什么：

```
myService.Thing1()
  .ContinueWith(myService.Thing2())
  .ContinueOnUIThread(_ => label.Text = "Done!"); 
```

基本上在完成`Thing2`后开始`Thing1`，然后调用 UI 线程。

我最接近的是这样的，但我真的不喜欢打电话`Wait`：

```
myService.Thing1()
  .ContinueWith(_ => { 
     var thing2 = myService.Thing2().Wait(); 
     return thing2.Result; 
   })
  .ContinueOnUIThread(_ => label.Text = "Done!"); 
```

有没有一种干净的方法可以做到这一点？

PS - 我没有 .Net 4.5，所以不允许等待/异步 - 此代码必须在 MonoTouch/Mono for Android 上运行，所以坚持使用 4.0

PS - 注意我的使用`_`，这只是“我没有真正使用这个参数”的快捷方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:06:36.777

我认为您可能正在寻找的是来自[System.Threading.Tasks.TaskExtensions的](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskextensions.aspx)[Unwrap](http://msdn.microsoft.com/en-us/library/dd780917.aspx)方法

```
myService.Thing1()
.ContinueWith(_ => myService.Thing2()).Unwrap()
.ContinueOnUIThread(_ => label.Text = "Done!"); 
```

# multithreading - 为什么我会选择基于线程/进程的方法与异步 Web 服务器

> ID：12924124
> 
> 赞同：11
> 
> 时间：2012-10-16T22:00:02.517
> 
> 标签：multithreading, asynchronous, webserver, multiprocessing

随着我对 Web 服务器软件进行了更多研究，我开始质疑 Apache 的基于线程/进程的方法与 Nginx 和 Lighttpd 等服务器提供的异步请求处理是否适合，后者往往会扩展更重的负载更好。

我知道后两者和 Apache 之间还有许多其他区别。我的问题是在什么情况下我会选择基于线程/进程的方法而不是异步处理。

1.  是否有任何我不能与异步方法一起使用的功能/技术（或功能不佳/效果不佳）？

2.  哪些情况会导致异步方法的性能比基于线程/进程的方法更差？这些是常见的还是罕见的情况，差异有多大？

3.  在比较两者时，我还应该考虑其他因素吗？请记住，我主要关注基于线程/进程的方法与异步，而不是碰巧使用其中一种方法的任何特定服务器软件。这些问题可能是管理/调试困难、安全问题等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-19T14:44:10.237

这是旧的，但值得回答。让我们首先说每个模型是如何工作的。

在线程中，您有一个请求进入处理程序，处理程序产生一个新的操作系统线程来处理该请求，并且该请求的所有工作都发生在该线程中，直到发送响应并结束线程。此模型支持与服务器可以生成的线程一样多的并发请求（但线程可能有些重量级）。

当执行异步请求时，请求进入处理程序，但不是创建线程来处理它，而是将连接添加到所谓的事件循环中。事件循环监听连接上的数据/状态变化，并在每次“某事”发生时触发回调。将连接添加到事件循环后，处理程序立即侦听要添加的新连接。这允许您同时拥有许多（有时是 100K）并发*连接*。

> 是否有任何我不能与异步方法一起使用的功能/技术（或功能不佳/效果不佳）？

是的，当您进行数字运算时。异步（或“事件”）系统的架构使得它擅长*传递数据*但不*处理数据*。它可以处理数以千计的并发操作，但是因为它只在*一个 OS 线程*上运行，所以它触发的回调需要做的尽可能少，以获得最大的吞吐量。这是因为如果您的某个回调执行一些需要 5 秒的数字运算，那么您的整个服务器*将冻结 5 秒*，直到该操作完成。这个想法是获取数据，将其发送到它要去的地方（数据库、API 等）并以最少的处理发送响应。

异步有利于网络 I/O：在多个源/目标之间传递数据（以及用户界面，但这超出了本文的范围）。

> 哪些情况会导致异步方法的性能比基于线程/进程的方法更差？这些是常见的还是罕见的情况，差异有多大？

见上文，但任何时候你做的 CPU 工作比网络 I/O 多，你应该切换到线程模型。但是，有一些架构变通方法......例如，您可以拥有一个异步应用程序，并且只要它需要进行实际工作，它就会将工作发送到工作队列。但是，如果每个请求都需要 CPU 处理，那么这种架构就太过分了，您不妨只使用线程服务器。

> 在比较两者时，我还应该考虑其他因素吗？请记住，我主要关注基于线程/进程的方法与异步，而不是碰巧使用这些方法之一的任何特定服务器软件。这些问题可能是管理/调试困难、安全问题等。

异步编程*通常*比线程更复杂。也就是说，如果您不是自己进行编程（即您在 nginx 和 apache 之间进行选择），那么我通常建议您使用异步（nginx），因为您通常可以通过这种方式从服务器中榨取更多汁液. 我总是赞成在堆栈中使用尽可能多的异步。

也就是说，如果您正在编写应用程序并尝试决定是使用线程模型还是异步模型，则必须考虑开发人员的时间。除非您使用的语言在事件循环（如方案）上具有绿色线程，否则预计会因流氓异常导致整个应用程序崩溃并且通常将您的头绕在[CPS](http://en.wikipedia.org/wiki/Continuation-passing_style)周围/使用回调处理所有事情。Futures/promises 是你的朋友，但只是使异步更好的创可贴。

### TL;博士

*异步，当在服务器中使用时，如果你正在做网络 IO 而不做其他事情*，它可以比线程压缩（很多）更多的并发操作。

如果您正在处理任何类型的数字运算，请使用线程应用程序服务器*或*使用带有后台排队系统的异步应用程序。

异步编程要困难得多，除非您的语言支持“假”线程（即绿色线程）。一旦你克服了最初的驼峰，你就没事了，一般来说。如果您没有绿色线程，请使用承诺。

如果您可以选择线程和异步作为堆栈中的组件（apache 与 nginx），并且它们提供*完全相同的功能*，则稍微支持异步。不要仅仅因为你认为它会让一切都快 20 倍而选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T23:25:37.713

与线程和与安全性和可靠性相关的异步模型相比，进程具有几个优点。大多数网站不需要这些特殊优势，但有时它们是不可或缺的。

1.  安全性：您可以作为低权限用户在沙箱中运行您的工作进程，并且每个工作进程只处理一个请求。这可以缓解某些类型的安全漏洞：即使攻击者接管了您的整个工作进程，只要您根据请求元数据将其严格沙箱化（即它没有对您所有数据的写入权限），它就可以' t 损害系统稳定性或影响对请求的响应。
2.  安全性#2：有时您需要对不受信任的代码进行沙箱处理，或者在不同代码或不同请求之间强制隔离，而做到这一点的唯一方法是使用单独的一次性流程。（想想运行用户提供的代码。）
3.  可靠性：如果您定期（或针对每个请求）拆除和更换工作进程，内存泄漏和内存损坏的严重程度要低得多。
4.  在单独的进程中处理用户请求时，很容易对 CPU 时间、磁盘和网络配额等实施硬限制。即使请求处理代码进入无限循环，主进程（或操作系统）也可以强制超时。

# maven - 配置 maven-license-plugin 以正确使用 excludeGroups

> ID：12924132
> 
> 赞同：3
> 
> 时间：2012-10-16T22:00:29.683
> 
> 标签：maven, plugins, licensing

当此插件附加到测试或打包阶段时，它会导致多模块构建中断，因为它会在模块依赖项位于本地存储库之前强制依赖解析（首先在更新到新快照版本时构建）。我试图让插件忽略许可证输出不需要的有问题的 com.cons3rt 组依赖项。尝试了几种变体：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>license-maven-plugin</artifactId>
        <version>1.3</version>
        <executions>
          <execution>
            <id>aggregate-add-third-party</id>
                <configuration>
                <excludedGroups>com.cons3rt</excludedGroups>
                </configuration>
        <phase>package</phase>
            <goals>
              <goal>aggregate-add-third-party</goal>
            </goals>
          </execution>
        </executions> 
```

似乎没有任何效果 - 查看 mvn -X 的输出，该插件似乎没有遵守 excludeGroups 的配置设置。任何人都有使用这种配置方法的运气吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T04:45:22.960

此问题的解决方法是使用命令行通过命令行传递参数

-Dlicense.excludedGroups

范围。

例如 mvn 包 -Dlicense.excludedGroups=com.jhla.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-26T18:11:48.460

在您的配置中，使用管道分隔多个 groupId 并将其设置`.*`为引用所有子包：

```
<excludedGroups>com.group1.*|com.group2.*</excludedGroups> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T14:46:38.280

简单地改变

```
<excludedGroups>com.cons3rt</excludedGroups> 
```

至

```
<excludedGroups>^com\.cons3rt</excludedGroups> 
```

因为给定的字符串需要是正则表达式。

有关详细信息，请参阅以下文档： [http ://www.mojohaus.org/license-maven-plugin/aggregate-add-third-party-mojo.html](http://www.mojohaus.org/license-maven-plugin/aggregate-add-third-party-mojo.html)

# html - 小 CSS 问题

> ID：12924134
> 
> 赞同：0
> 
> 时间：2012-10-16T22:00:51.800
> 
> 标签：html, css, wordpress

在这个网站：[http ://elegantthemes.com/preview/eStore/?p=20](http://elegantthemes.com/preview/eStore/?p=20)

我们可以在“left-content”和“widget”之间看到一些垂直线，并且您还可以看到整个小部件的灰色阴影。

我的目的是让它的尺寸更大，（左内容）所以我的内容和图像可以完美地设置。由于这种灰色，当我尝试更改“左列”和“小部件”的宽度时，它看起来很脏。

现在我的疑问是：

1.  我正在考虑改变'left-content'和'widget'之间的垂直线的宽度
2.  如何将小部件灰色更改为其他颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:47:25.690

主题是使用宽背景图像`#main-content`来创建列的外观。您需要做的就是为您制作一个新的背景图像`#main-content`并像您已经做的那样设置宽度。

您可能需要更改背景图像`.widgettitle`以匹配您所做的任何宽度或颜色更改。

# java - 为什么在迭代之间休眠会导致循环中的操作比不休眠的情况花费更长的时间

> ID：12924137
> 
> 赞同：7
> 
> 时间：2012-10-16T22:01:01.453
> 
> 标签：java

附加的程序（见最后）在执行时会产生以下输出：

```
..........
with sleep time of 0ms
  times= [1, 1, 1, 0, 1, 1, 0, 1, 1, 0]
  average= 0.7
..........
with sleep time of 2000ms
  times= [2, 2, 2, 2, 2, 1, 2, 2, 2, 2]
  average= 1.9 
```

在这两种情况下，都会执行完全相同的代码，即从程序开始时实例化的 Random 对象重复获取下一个值。首先执行的预热方法应该在实际测试开始之前触发任何类型的 JIT 优化。

谁能解释这种差异的原因？到目前为止，我每次都能在我的机器上重复这个结果，并且这是在带有 java 7 的多核 Windows 系统上执行的。

一件有趣的事情是，如果测试执行的顺序是相反的，也就是说，如果我们在没有延迟的循环之前运行有延迟的循环，那么时间会更相似（没有延迟的循环实际上需要更长的时间):

```
..........
with sleep time of 2000ms
  times= [2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
  average= 2.0
..........
with sleep time of 0ms
  times= [2, 3, 3, 2, 3, 3, 2, 3, 2, 3]
  average= 2.6 
```

据我所知，操作方法内部没有创建任何对象，并且当通过分析器运行它时，似乎没有触发垃圾收集。一个疯狂的猜测是，一些值被缓存在处理器本地缓存中，当线程进入睡眠状态时，该缓存被刷新，然后当线程唤醒时，它需要从主内存中检索值，但这并不是那么快。然而，这并不能解释为什么颠倒顺序会有所不同......

我最初观察到这种行为（这促使我编写这个示例测试类）的真实情况是 XML 解组，我注意到在快速连续的情况下一个接一个地重复解组同一个文档比执行相同的文档产生更好的时间事情，但在调用 unmarshal 之间有延迟（通过睡眠或手动产生的延迟）。

这是代码：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Tester
{
    public static void main(String[] args) throws InterruptedException
    {
        warmUp(10000);

        int numRepetitions = 10;
        runOperationInALoop(numRepetitions, 0);
        runOperationInALoop(numRepetitions, 2000);
    }

    private static void runOperationInALoop(int numRepetitions, int sleepTime) throws InterruptedException
    {
        List<Long> times = new ArrayList<Long>(numRepetitions);
        long totalDuration = 0;

        for(int i=0; i<numRepetitions; i++)
        {
            Thread.sleep(sleepTime);

            long before = System.currentTimeMillis();
            someOperation();
            long duration = System.currentTimeMillis() - before;

            times.add(duration);
            totalDuration = totalDuration + duration;

            System.out.print(".");
        }
        System.out.println();

        double averageTimePerOperation = totalDuration/(double)numRepetitions;

        System.out.println("with sleep time of " + sleepTime + "ms");
        System.out.println("  times= " + times);
        System.out.println("  average= " + averageTimePerOperation);
    }

    private static void warmUp(int warmUpRepetitions)
    {
        for(int i=0; i<warmUpRepetitions; i++)            
        {
            someOperation();
        }
    }

    public static int someInt;
    public static Random random = new Random(123456789L);

    private static void someOperation()
    {
        for(int j=0; j<50000; j++)
        {
            someInt = ((int)random.nextInt()*10) + 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T22:05:06.690

当你睡眠即使是很短的时间（你可能会发现 10 毫秒就足够长了）你会放弃 CPU 并且数据、指令和分支预测缓存会受到干扰甚至被清除。即使像 System.currentTimeMillis() 或更准确的 System.nanoTime() 这样的系统调用也可以在很小的程度上做到这一点。

AFAIK，避免放弃核心的唯一方法是忙于等待并使用线程亲和性将线程锁定到核心。这可以最大限度地减少这种干扰，并意味着您的程序在低延迟情况下运行速度可以提高 2-5 倍，即当亚毫秒级任务很重要时。

为了您的利益

[http://vanillajava.blogspot.co.uk/2012/01/java-thread-affinity-support-for-hyper.html](http://vanillajava.blogspot.co.uk/2012/01/java-thread-affinity-support-for-hyper.html)

[http://vanillajava.blogspot.co.uk/2012/02/how-much-difference-can-thread-affinity.html](http://vanillajava.blogspot.co.uk/2012/02/how-much-difference-can-thread-affinity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:20:49.253

当您的线程进入睡眠状态时，您实际上是在对 JVM 说：该线程在接下来的 X 毫秒内什么也不做。JVM 很可能在此时唤醒各种后台线程来做他们的事情（例如 GC），这很可能会导致对存储在处理器缓存中的数据进行更新。当你重新唤醒线程时，它的一些数据可能不再在缓存中（快），但很可能会转移到主内存（慢）。

查看[http://mechanical-sympathy.blogspot.co.uk/](http://mechanical-sympathy.blogspot.co.uk/)了解更多关于低级缓存效果的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:36:17.227

1.  无法保证`sleep()`睡眠时间与您指定的时间完全一致。Javadoc 中有一个特定的声明。

2.  `System.currentTimeMillis()`具有系统相关粒度，您可以通过运行相对较少的迭代（如 2000 次）来暴露该粒度。您应该将其乘以至少 10 以脱离粒度区域。在 Windows 上，我相信它高达 16 毫秒。

# python-3.2 - 需要帮助让 for 循环正确迭代

> ID：12924143
> 
> 赞同：0
> 
> 时间：2012-10-16T22:01:52.110
> 
> 标签：python-3.2

我正在为此做家庭作业，我已经完成了大部分工作- 60,000，步长值为 50。

```
 def computeTax(status, taxableIncome):
        print("Taxable Income/" + "\t" + "Single/" + "\t" + "Married Joint/" + \
              "\t" + "Married Separate/" + "  " + "Head of Household")
        for taxableIncome in range(50000, 60001, 50):
            for status in range(1, 5, 1):
              if (status == 1):    #tax calculation for single person
                 tax1 = 8350 * .10 + (33950 - 8350) * 0.15 + \
                       (taxableIncome - 33950) * 0.25
                 tax1 = round(tax1,0)
              if (status == 2):   #tax calculation for married file jointly
                 tax2 = 16700 * .10 + (67900 - 16700) * 0.15 + \
                        (taxableIncome - 67900) * 0.15
                 tax2 = round(tax2,0)
              if (status == 3):   #tax calculation for married file separately
                 tax3 = 8350 * .10 + (33950 - 8350) * 0.15 + \
                       (taxableIncome - 33950) * 0.25
                 tax3 = round(tax3,0)
              if (status == 4): #tax calculation for head of household
                 tax4 = 11950 * .10 + (45500 - 11950) * 0.15 + \
                       (taxableIncome - 45500) * 0.25
                 tax4 = round(tax4,0)
         print(str(tax1) + "\t" + str(tax2) + "\t" + str(tax3) + "\t" + str(tax4))
        return (status, taxableIncome)

    computeTax(range(1, 5, 1),range(50000, 60001, 50)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:53:35.250

我对 python 不熟悉，但是您是否必须像使用 PHP 一样定义代码块？例如

```
if (status == 1):    #tax calculation for single person
{                 
tax1 = 8350 * .10 + (33950 - 8350) * 0.15 + \
                       (taxableIncome - 33950) * 0.25
                 tax1 = round(tax1,0)
} 
```

就像我说的; 不熟悉Python，但我想我可能会为您提供答案；如果我完全离开了，那么对不起，祝你好运。

# javascript - JQuery .click 没有按我的预期工作

> ID：12924144
> 
> 赞同：8
> 
> 时间：2012-10-16T22:01:52.517
> 
> 标签：javascript, jquery, dom, onclick

我对 Jquery 中的 .click 函数有疑问。我有这个代码：

```
for (var i = 0; i < 5; i++) {
    var divTest = $('<div></div>');
    divTest.text("My Div " + i);
    divTest.click(function() {
        alert("Alert: Div " + i);
    });
    $('#myTest').append(divTest);
}​ 
```

我希望向“myTest”元素添加五个 div，并且对于每个 div，onclick 函数将显示一个带有相应 div 编号的警报。

div 已正确添加，但是当我单击 div 时，我总是会收到带有文本的警报：`"Alert: Div 5"`。为什么？我必须改变什么才能产生我期望的行为？

这是我的 jsFiddle：http: [//jsfiddle.net/BKFGm/2/](http://jsfiddle.net/BKFGm/2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T22:03:39.803

在这种情况下，您应该使用[闭包](https://stackoverflow.com/q/111102/1249581)：

```
(function(i) {
    divTest.click(function() {
        alert("Div: " + i);
    });
})(i); 
```

**演示：http:** [//jsfiddle.net/BKFGm/4/](http://jsfiddle.net/BKFGm/4/)

* * *

`i`另一种选择是传入[`eventData`](http://api.jquery.com/click/)地图：

```
divTest.click({ i: i }, function(e) {
    alert("Div: " + e.data.i);
}); 
```

**演示：http:** [//jsfiddle.net/BKFGm/11/](http://jsfiddle.net/BKFGm/11/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T22:04:00.817

再一次，一个经典的闭包案例。`i`不断增加，而您想将其锚定在`click`事件中。试试这个：

```
for( i=0; i<5; i++) {
  (function(i) {
    // your code that depends on `i` here
  })(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:05:34.907

这是一个范围问题。此外，这是一个非常常见的问题。

简单的修复：

```
for(var i = 0; i < 5; i++){
     var divTest = $('<div></div>')
         divTest .text("My Div " + i);

    (function(index){
        divTest .click(function () {
             alert("Div: " + index);
                    });
    })(i);

        $('#myTest').append(divTest);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:06:03.907

发生这种`Alert`情况时，变量`i`已设置为`5`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T22:07:14.810

`.click`在与您的循环不同的范围内工作，并且是`undefined`在执行单击处理程序时，除非您在全局范围内有其他 i 变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T22:13:34.693

## 你也可以试试这个

```
$(function() {
    for(var i = 0; i < 5; i++){
        var divTest = $('<div/>', {
            'text':"My Div " + i,
            'click':(function(i){
                return function(){
                    alert("Div: " + i);
                }
            })(i)
        });
        $('#myTest').append(divTest);
    }
});​ 
```

[**演示**](http://jsfiddle.net/BKFGm/12/)。

# iphone - [CFXPreferencesSearchListSource tryLock]

> ID：12924146
> 
> 赞同：4
> 
> 时间：2012-10-16T22:02:00.910
> 
> 标签：iphone, ios, xcode, ipad

我正在实现 ShareKit，到目前为止在 iOS5.1 和 6.0 上都很好，但是 5.0 在模拟器中给我带来了一些问题。

每当我执行我的操作表并离开程序（例如在浏览器中启动 Facebook）时，我的应用程序都会崩溃：

-[CFXPreferencesSearchListSource tryLock]：无法识别的选择器发送到实例 0x957e120

到底是怎么回事？搜索时找不到任何类似的错误。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T06:51:37.853

这是模拟器5的bug。UIAlertView关闭后，按CMD+SHIFT+H，出现bug。

事实上，它不会发生在物理设备中。所以不要惊慌

# debugging - OllyDbg 的十六进制转储显示中的尖括号符号是什么意思？

> ID：12924147
> 
> 赞同：1
> 
> 时间：2012-10-16T22:02:07.600
> 
> 标签：debugging, assembly

在 OllyDbg 中，主要的反汇编视图（和其他反汇编视图）有尖括号表示法和破折号表示法（> v - 等）。这些符号的含义是什么。例如，在屏幕截图中，73DA 处的行下方有一个“>”符号。上面的行有一个点，后跟一个 caron 等。

![OllyDbg 截图提取](../Images/dab12bcf38ca0d6badb44b0c608d4028.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:16:15.723

`^ v`箭头指示分支/跳转的方向。请注意，它们只出现在`J__`（跳转）指令上：如果目标地址在该指令之前，则会出现一个向上箭头；如果目标地址在该指令之后，将出现一个向下箭头。

`>`箭头表示它是此类指令的目标。例如，在`010073B9`. 有一个向下箭头，因为跳转目标是`010073DA`，它在 之后`010073B9`。然后，有一个`>`at`010073DA`因为它是跳跃的目标。

换句话说，它们只是视觉辅助工具。它们没有句法目的。

# c - 我们需要为 memmap 保留内存块进行 ioremap 吗？

> ID：12924150
> 
> 赞同：0
> 
> 时间：2012-10-16T22:02:23.780
> 
> 标签：c, memory-management, linux-kernel, linux-device-driver, kernel

我使用`memmap=8G$4G`linux 内核引导参数保留了内存块。

需要`ioremap`这个内存吗？

`ioremap`手册页说：

> ioremap 执行平台特定的操作序列，以使总线内存 CPU 可通过 readb/readw/readl/writeb/writew/writel 函数和其他 mmio 帮助程序访问。返回的地址不保证可以直接用作虚拟地址。

因此，如果我不能将返回的`ioremap`地址用作直接寻址内存的虚拟地址，那么一个更广泛的问题是我们何时应该`ioremap`使用内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:30:55.550

是的，您必须到`ioremap`该区域才能访问它。当您指示内核忽略此区域时，内核不会为此内存区域设置页面目录条目。

如果重新映射地址空间的地址，则返回的地址`ioremap`可能无法直接使用。`io-port`当您从`memory`地址空间重新映射地址时，可以直接使用它们。

但是，请查看[https://unix.stackexchange.com/questions/37729/how-can-i-reserve-a-block-of-memory-from-the-linux-kernel](https://unix.stackexchange.com/questions/37729/how-can-i-reserve-a-block-of-memory-from-the-linux-kernel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T10:41:56.653

根据我保留（或阻塞）的经验，内存如下。

> 如果您尝试保留特定容量的内存，您可能必须重新映射 BIOS 提供的现有内存映射。

如果您的系统不允许您这样做，那么您将必须确定 BIOS 提供的内存映射中哪个区域是空闲的，并且只有那个区域可以保留。

# java - 比较数组之间的相似性

> ID：12924151
> 
> 赞同：0
> 
> 时间：2012-10-16T22:02:26.387
> 
> 标签：java, arrays, algorithm, similarity

我试图找到一种有效的方法来比较表示客户端服务质量的给定数组与两个 Web 服务的 QOS，并选择与给定 QOS 最相似的数组。

```
 int[] arrayCompare(int[] clientQOS){

      int[] service1QOS=new int[]{3,1,4};
      int[] service2QOS=new int[]{1,3,3};

      //I want to compare clientQOS     with  S1 QOS       and S2 QOS

      return  mostSimilarArray
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:05:37.330

循环遍历每个目标的源数组，将计数器增加增量（值之间的正差）。最小的增量和是最接近的匹配。

注意事项

如果您认为数值更接近更相似，并且不同值之间的比例相等，这应该是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:06:32.617

我会制作一个自定义对象而不是数组并实现接口 Comparable。通过这种方式，您可以封装比较算法并稍后在其他地方重用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-09T15:35:49.997

有很多计算数组“相似度”的方法。

这里是 Golang 的实现：

```
// SimilarityPreCheck is delegated to verify that the given array have the correct size
func SimilarityPreCheck(a, b []float64) bool {
    if len(a) == 0 || len(b) == 0 {
        log.Println("CosineSimilarity | Nil input data")
        return false
    }

    if len(a) != len(b) {
        log.Printf("CosineSimilarity | Input vectors have different size")
        return false
    }

    return true
}

// CosineSimilarity is delegated to calculate the Cosine Similarity for the given array
func CosineSimilarity(a, b []float64) float64 {
    if !SimilarityPreCheck(a, b) {
        return -1
    }

    // Calculate numerator
    var numerator float64
    for i := range a {
        numerator += a[i] * b[i]
    }

    // Caluclate first term of denominator
    var den1 float64
    for i := range a {
        den1 += math.Pow(a[i], 2)
    }
    den1 = math.Sqrt(den1)

    // Caluclate second term of denominator
    var den2 float64
    for i := range b {
        den2 += math.Pow(b[i], 2)
    }
    den2 = math.Sqrt(den2)

    result := numerator / (den1 * den2)
    return result
}

// EuclideanDistance is delegated to calculate the euclidean distance for the given array
func EuclideanDistance(v1, v2 []float64) float64 {
    if !SimilarityPreCheck(v1, v2) {
        return -1
    }
    var euclidean float64
    for i := range v1 {
        euclidean += math.Pow(v1[i]-v2[i], 2)
    }
    return math.Sqrt(euclidean)
}

// ManhattanDistance is delegated to calculate the Manhattan norm for the given array
func ManhattanDistance(v1, v2 []float64) float64 {
    if !SimilarityPreCheck(v1, v2) {
        return -1
    }
    var taxicab float64
    for i := range v1 {
        taxicab += math.Abs(v2[i] - v1[i])
    }
    return taxicab
} 
```

# android - 带有 Intent 类的额外内容未通过 android

> ID：12924153
> 
> 赞同：0
> 
> 时间：2012-10-16T22:02:47.203
> 
> 标签：android, android-intent

我在 Intent 对象中放入了一些数据，但是它们没有传递到新启动的活动中。我尝试调试应用程序，当调试器到达 Intent 对象的附加值传递给新变量的行时，我收到了这些错误![在此处输入图像描述](../Images/230fb3fe8895a24ad07ab9756f676845.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:05:11.707

这不是错误，它只是意味着您的 PC 上没有 android 源代码。只需跳过任何 android 系统调用，您应该能够继续，或者在您看到此屏幕后单击“Step Return”，您应该返回到您自己的代码。

[这里](https://stackoverflow.com/a/3964993/1236185)也有一个很好的答案，它解释了如何打开“Step Filters”，以便eclipse自动跳过进入任何android源。

另见： http: [//www.eclipsezone.com/eclipse/forums/t83338.rhtml](http://www.eclipsezone.com/eclipse/forums/t83338.rhtml)

# .net - 困难的 T-SQL 连接/透视

> ID：12924154
> 
> 赞同：0
> 
> 时间：2012-10-16T22:02:58.757
> 
> 标签：.net, sql, tsql, join

我最初提出这个问题的方式对大多数人来说都没有帮助，所以我对其进行了重大修改。

我有一个遗留数据库，**我无法控制**（也从来没有）其架构。db 模式的设计与提供程序无关，供非托管 C++ 使用，因此没有 FK 约束等。我出现并需要从 .NET 使用它，并且还需要呈现与最初预期不同的数据.

这是相关表的架构（我已经用粗体/星号标记了这个问题的键的数量）：

```
CREATE TABLE [dbo].[Formats](
[GroupName] [varchar](255) NOT NULL,
**[BatchID] [bigint] NOT NULL,**
[SeriesNumber] [bigint] NOT NULL,
**[SequenceID] [bigint] NOT NULL,**
[SeqNum] [int] NOT NULL,
[FormatName] [varchar](50) NOT NULL

CREATE TABLE [dbo].[Fields](
[GroupName] [varchar](255) NOT NULL,
**[BatchID] [bigint] NOT NULL,**
**[SequenceID] [bigint] NOT NULL,**
[SeqNum] [int] NOT NULL,
**[FieldName] [varchar](50) NOT NULL,**
[FieldDisplayName] [varchar](50) NOT NULL,
[FieldValue] [ntext] NULL 
```

Formats:Fields 之间存在 1:Many 的关系。

我需要查询格式行列表。挑战有几个： + 有一个复合外键。+ 我需要将格式过滤为包含相关字段的子集。+ 相关字段必须与任意数量的过滤条件匹配，然后才能内联到格式。

所以要通过这个：存储过程接收下表值参数：

```
_FieldDisplayName_  Field_Value
 Field 1             001
 Field 2             002 
```

然后它需要按这些值过滤字段表。

由于我需要使用所有标准，而不仅仅是其中一个，当我不知道我有多少值或 FieldDisplayName 是什么时，我不知道如何使用它来检索有用的加入值将是。

@Joe Phillips 足够聪明，可以看穿混乱并建议我需要旋转桌子。就是这样：

**编辑：** 以下正在对数据进行透视，但我不确定它是否理想。在提供答案之前仍在等待其他想法。

我没有使用 TVP，而是使用临时表和动态 SQL（是的，我看到了注入漏洞）：

```
IF OBJECT_ID('[tempdb].[dbo].[#FilterFields]') is not null
Drop Table dbo.#FilterFields

CREATE Table #FilterFields (FieldDisplayName varchar(50), FieldValue nvarchar(max))
/* Just some example data */
INSERT INTO #FilterFields (FieldDisplayName, FieldValue) VALUES ('PTNUM', '011')
INSERT INTO #FilterFields (FieldDisplayName, FieldValue) VALUES('SITENUM', '001')

Declare @column_names varchar(max)
Declare @dynamic_pivot_query as varchar(max)

SELECT @column_names = Stuff((SELECT DISTINCT ',[' + FieldDisplayName + ']'
                FROM #FilterFields FOR xml path('')),1,1,'')

PRINT(@column_names)    

SET @dynamic_pivot_query =
'select * ' +
'from tempdb.dbo.#FilterFields ' +
'Pivot
(
MIN(
    FieldValue
    )
FOR FieldDisplayName IN (' + @column_names + ')
) as P'

PRINT(@dynamic_pivot_query)
EXEC(@dynamic_pivot_query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:23:21.763

因为您有一个带有值列表的复合键（功能上），所以您希望通过子选择来利用 IN。为此，您需要组合这些字段，这意味着至少对可能的数据有一点了解，因为您希望以一种对每个密钥对来说都是唯一的方式组合它们。如果 BatchID 和 SequenceID 是设置长度的字符串，那么只需添加它们就足够了。如果它们有所不同，您可能需要一个不会出现在破折号或 & 号中的分隔符。我将在这里演示。

```
SELECT  *
FROM    Formats format 
WHERE   format.BatchID + '-' + format.SequenceID  IN 
    (SELECT field.BatchID + '-' + field.SequenceID
     FROM Fields field
           INNER JOIN #FilterFields filter
               ON filter.FieldDisplayName = field.FieldDisplayName AND
                  filter.FieldValue = field.FieldValue) 
```

由于您在 table 参数上使用了内部联接，因此它将根据这些值的配对过滤字段表，并仅返回匹配的字段表的组合键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:05:24.490

```
SELECT  a.*, -- select on the rows you want to display by specifying
        b.*  -- their column name instead of using asterisk *
FROM    Formats a
        INNER JOIN Fields b
            ON  a.BatchID = b.BatchID AND
                a.SequenceID = b.SequenceID 
```

# c - 将 3d 数组发送到 CUDA 内核

> ID：12924155
> 
> 赞同：6
> 
> 时间：2012-10-16T22:03:00.687
> 
> 标签：c, cuda, gpu, gpgpu

我将给出的代码作为[How can I add up two 2d (pitched) arrays using nested for loops的答案？](https://stackoverflow.com/questions/6137218/cuda-2d-array-problem)并尝试将其用于 3D 而不是 2D 并稍微更改了其他部分，现在看起来如下：

```
 __global__ void doSmth(int*** a) {
  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    for(int k=0; k<2; k++) 
     a[i][j][k]=i+j+k;
 }

 int main() {
  int*** h_c = (int***) malloc(2*sizeof(int**));
  for(int i=0; i<2; i++) {
   h_c[i] = (int**) malloc(2*sizeof(int*));
   for(int j=0; j<2; j++)
    GPUerrchk(cudaMalloc((void**)&h_c[i][j],2*sizeof(int)));
  }
  int*** d_c;
  GPUerrchk(cudaMalloc((void****)&d_c,2*sizeof(int**)));
  GPUerrchk(cudaMemcpy(d_c,h_c,2*sizeof(int**),cudaMemcpyHostToDevice));
  doSmth<<<1,1>>>(d_c);
  GPUerrchk(cudaPeekAtLastError());

  int res[2][2][2];
  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    GPUerrchk(cudaMemcpy(&res[i][j][0],
    h_c[i][j],2*sizeof(int),cudaMemcpyDeviceToHost));  

  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    for(int k=0; k<2; k++) 
     printf("[%d][%d][%d]=%d\n",i,j,k,res[i][j][k]);     
 } 
```

在上面的代码中，我使用 2 作为 h_c 的每个维度的大小，在实际实现中，我将拥有非常大的这些大小，并且对于“int***”或更多维度的子数组的每个部分都有不同的大小. 我在尝试将结果复制回 res 数组的内核调用后遇到问题。你能帮我解决这个问题吗？请您按照我上面写的方式显示解决方案。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T23:31:41.380

首先，我认为当他发布对您提到的上一个问题的回复时，他并不打算代表良好的编码。因此，弄清楚如何将其扩展到 3D 可能不是您时间的最佳利用方式。例如，为什么我们要编写只使用一个线程的程序？虽然这样的内核可能有合法用途，但这不是其中之一。**您的内核有可能并行**执行一堆独立的工作，但是您将其全部强制到一个线程上，并对其进行序列化。并行工作的定义是：

```
a[i][j][k]=i+j+k; 
```

让我们弄清楚如何在 GPU 上并行处理。

我要做的另一个介绍性观察是，由于我们正在处理的问题的大小是提前知道的，所以让我们使用 C 来解决它们，并尽可能多地从该语言中获得好处。在某些情况下可能需要嵌套循环来执行 cudaMalloc，但我认为这不是其中之一。

这是一个并行完成工作的代码：

```
#include <stdio.h>
#include <stdlib.h>
// set a 3D volume
// To compile it with nvcc execute: nvcc -O2 -o set3d set3d.cu
//define the data set size (cubic volume)
#define DATAXSIZE 100
#define DATAYSIZE 100
#define DATAZSIZE 20
//define the chunk sizes that each threadblock will work on
#define BLKXSIZE 32
#define BLKYSIZE 4
#define BLKZSIZE 4

// for cuda error checking
#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            return 1; \
        } \
    } while (0)

// device function to set the 3D volume
__global__ void set(int a[][DATAYSIZE][DATAXSIZE])
{
    unsigned idx = blockIdx.x*blockDim.x + threadIdx.x;
    unsigned idy = blockIdx.y*blockDim.y + threadIdx.y;
    unsigned idz = blockIdx.z*blockDim.z + threadIdx.z;
    if ((idx < (DATAXSIZE)) && (idy < (DATAYSIZE)) && (idz < (DATAZSIZE))){
      a[idz][idy][idx] = idz+idy+idx;
      }
}

int main(int argc, char *argv[])
{
    typedef int nRarray[DATAYSIZE][DATAXSIZE];
    const dim3 blockSize(BLKXSIZE, BLKYSIZE, BLKZSIZE);
    const dim3 gridSize(((DATAXSIZE+BLKXSIZE-1)/BLKXSIZE), ((DATAYSIZE+BLKYSIZE-1)/BLKYSIZE), ((DATAZSIZE+BLKZSIZE-1)/BLKZSIZE));
// overall data set sizes
    const int nx = DATAXSIZE;
    const int ny = DATAYSIZE;
    const int nz = DATAZSIZE;
// pointers for data set storage via malloc
    nRarray *c; // storage for result stored on host
    nRarray *d_c;  // storage for result computed on device
// allocate storage for data set
    if ((c = (nRarray *)malloc((nx*ny*nz)*sizeof(int))) == 0) {fprintf(stderr,"malloc1 Fail \n"); return 1;}
// allocate GPU device buffers
    cudaMalloc((void **) &d_c, (nx*ny*nz)*sizeof(int));
    cudaCheckErrors("Failed to allocate device buffer");
// compute result
    set<<<gridSize,blockSize>>>(d_c);
    cudaCheckErrors("Kernel launch failure");
// copy output data back to host

    cudaMemcpy(c, d_c, ((nx*ny*nz)*sizeof(int)), cudaMemcpyDeviceToHost);
    cudaCheckErrors("CUDA memcpy failure");
// and check for accuracy
    for (unsigned i=0; i<nz; i++)
      for (unsigned j=0; j<ny; j++)
        for (unsigned k=0; k<nx; k++)
          if (c[i][j][k] != (i+j+k)) {
            printf("Mismatch at x= %d, y= %d, z= %d  Host= %d, Device = %d\n", i, j, k, (i+j+k), c[i][j][k]);
            return 1;
            }
    printf("Results check!\n");
    free(c);
    cudaFree(d_c);
    cudaCheckErrors("cudaFree fail");
    return 0;
} 
```

由于您已在评论中要求它，因此这是我可以对您的代码进行的最少更改以使其正常工作。让我们也提醒自己您提到的上一个问题中的一些 talonmies 评论：

“出于代码复杂性和性能原因，你真的不想这样做，在 CUDA 代码中使用指针数组比使用线性内存的替代方案更难也更慢。”

“与使用线性内存相比，这是一个糟糕的主意。”

我必须在纸上画出来，以确保我的所有指针都正确复制。

```
#include <cstdio>
inline void GPUassert(cudaError_t code, char * file, int line, bool Abort=true)
{
    if (code != 0) {
        fprintf(stderr, "GPUassert: %s %s %d\n", cudaGetErrorString(code),file,line);
        if (Abort) exit(code);
    }
}

#define GPUerrchk(ans) { GPUassert((ans), __FILE__, __LINE__); }

 __global__ void doSmth(int*** a) {
  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    for(int k=0; k<2; k++)
     a[i][j][k]=i+j+k;
 }
 int main() {
  int*** h_c = (int***) malloc(2*sizeof(int**));
  for(int i=0; i<2; i++) {
   h_c[i] = (int**) malloc(2*sizeof(int*));
   for(int j=0; j<2; j++)
    GPUerrchk(cudaMalloc((void**)&h_c[i][j],2*sizeof(int)));
  }
  int ***h_c1 = (int ***) malloc(2*sizeof(int **));
  for (int i=0; i<2; i++){
    GPUerrchk(cudaMalloc((void***)&(h_c1[i]), 2*sizeof(int*)));
    GPUerrchk(cudaMemcpy(h_c1[i], h_c[i], 2*sizeof(int*), cudaMemcpyHostToDevice));
    }
  int*** d_c;
  GPUerrchk(cudaMalloc((void****)&d_c,2*sizeof(int**)));
  GPUerrchk(cudaMemcpy(d_c,h_c1,2*sizeof(int**),cudaMemcpyHostToDevice));
  doSmth<<<1,1>>>(d_c);
  GPUerrchk(cudaPeekAtLastError());
  int res[2][2][2];
  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    GPUerrchk(cudaMemcpy(&res[i][j][0], h_c[i][j],2*sizeof(int),cudaMemcpyDeviceToHost));

  for(int i=0; i<2; i++)
   for(int j=0; j<2; j++)
    for(int k=0; k<2; k++)
     printf("[%d][%d][%d]=%d\n",i,j,k,res[i][j][k]);
 } 
```

简而言之，我们必须执行以下连续序列：

1.  malloc 一个多维指针数组（在主机上），比问题大小小一维，最后一维是一组指向 cudaMalloc'ed 到设备而不是主机上的区域的指针。
2.  创建另一个多维指针数组，其类与上一步中创建的类相同，但比上一步中创建的类少一维。该数组还必须在设备上具有最终排名 cudaMalloc。
3.  将上一步中的最后一组主机指针复制到上一步中设备上的 cudaMalloced 区域中。
4.  重复步骤 2-3，直到我们最终得到一个指向多维指针数组的（主机）指针，所有这些指针现在都驻留在设备上。

# javascript - 在 Adob e Air 中将相机视频源附加到 html

> ID：12924157
> 
> 赞同：4
> 
> 时间：2012-10-16T22:03:22.593
> 
> 标签：javascript, html, air, adobe, videodisplay

我正在使用 Adob​​e AIR SDK 开发一个需要录制视频的 HTML/JavaScript 应用程序。我没有使用可以使用的 Flex 或 Flash Builder`<mx:VideoDisplay />`

我知道如何通过`nativeWindow.stage`. 是否可以在 html 或 iframe 的一部分中做类似的事情？`<mx:VideoDisplay />`或者是否有一个 AIR 像ActionScript 中的标签那样解释的 html 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:10:59.680

最后的答案不是将视频提要附加到 HTML，而是将其加载到 Flash Player 文件中。我们最终将 JWPlayer 嵌入到应用程序中，并让它播放来自媒体服务器的视频流。但是，可以做类似的事情来拥有一种视频聊天应用程序。您可以创建一个在 ActionScript 中实现 ExternalInterface 类的 SWF 文件，以便向 JavaScript 公开必要的函数。

# android - 如何建立一个any.do like删除手势？

> ID：12924158
> 
> 赞同：0
> 
> 时间：2012-10-16T22:03:21.743
> 
> 标签：android, view, gesture

我是android新手，我想开发一些像any.do这样的UI，我有两个问题：

1.  如何建立一个any.do like删除手势？当你手指扫过项目时，它会在项目上添加一条线吗？

2.  当您在同一个视图上有 titleA + 一些列表项和 TitleB+一些列表项时，布局文件应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:02:51.677

1.  我猜你的意思是“跨越”任务的灰线。实际上它相当简单，只需使用可绘制的 xml 创建一个线条形状，并将其大小从 0 设置为任务的整个宽度。

2.  不太明白您所指的布局？是灰线布局吗？列表项布局？

# c++ - 如何检查 stringstream>>string 是否不会在字符串上放置任何内容？

> ID：12924164
> 
> 赞同：7
> 
> 时间：2012-10-16T22:04:07.767
> 
> 标签：c++, string, stringstream

例如，在解析文本文件时，有时该文件包含以下内容：

```
keyword a string here
keyword another string
keyword 
keyword again a string 
```

请注意，第 3 行有一个空字符串（无或空格）。问题是，当您执行 stringstream>>laststring 时，并且 stringstream 有一个空字符串（null 或只有空格），它不会覆盖“laststring "，它什么也做不了。无论如何要事先检查这种情况吗？我不想创建一个临时空字符串只是为了检查它在 stringstream>> 之后仍然是空的，看起来很蹩脚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T22:08:15.073

当您无法从流中读取时 - 它的状态会发生变化，因此当转换为 bool 时，它会返回 false：

```
bool read = static_cast<bool>(ss >> laststring); 
```

或 - 在`if-expr`：

```
if (ss >> laststring) 
    cout << "Just read: " << laststring; 
```

查看[示例](https://godbolt.org/z/ncox3n8xT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:10:14.380

你只能在尝试阅读是否有东西**之后才能知道。**您可以做的是跳过空格并查看下一个位置是否有非空格：

```
if ((in >> std::ws).peek() != std::char_traits<char>::eof()) {
    ...
} 
```

鉴于创建空字符串的成本很低，我不会费心尝试读取字符串。但是请注意，从流中读取不是基于行的，即在您上面的情况下，您需要先拆分行或使用类似`std::getline()`读取行的第二部分的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:18:35.357

您可以使用 getline 从文件中读取一行。然后，将该行复制到字符串流中，并一次从字符串流中读取一个单词。当流用完行/字时，流将自动停止阅读。

```
// open file
std::ifstream fin("text.txt");

// 'iterate' through all the lines in the file
unsigned lineCount = 1;
std::string line;
while (std::getline(fin, line))
{
    // print the line number for debugging
    std::cout << "Line " << lineCount << '\n';

    // copy line into another stream
    std::stringstream lineStream(line);

    // 'iterate' through all the words in the line
    unsigned wordCount = 1;
    std::string word;
    while (lineStream >> word)
    {
        // print the words for debugging
        std::cout << '\t' << wordCount++ << ' ' << word << '\n';
    }
} 
```

您需要包括`iostream`、`fstream`和。`sstream``string`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-20T17:38:45.297

要检查字符串是否为空，请使用`foo.size() == 0`.

用于检查字符串流是否为空`fooStream.rdbuf()->in_avail() == 0`

# python - 两个布尔值列表的二进制加法

> ID：12924166
> 
> 赞同：1
> 
> 时间：2012-10-16T22:04:16.450
> 
> 标签：python, binary, boolean

我收到以下提示：

> 创建一个函数： BoolAdd(A,B) 对布尔值的列表 A 和 B（A 和 B 具有相同的长度 N）执行二进制加法并返回两个元素的列表。第一个元素是溢出，这意味着它以 FALSE 值返回，除非加法不适合与 A 和 B 最初相同的长度列表。输出列表的第二个元素是一个布尔值列表，对应于 A 和 B 的向量和。确保定义了 BOOL_ADD，这样无论为 N 选择的值如何，它都能正常工作。

我不确定如何执行二进制加法，然后将其转换为布尔值。我也不确定何时将溢出更改为 TRUE。在问题的前面，我们编写了以下 HalfAdder 函数：

```
def HalfAdder(A,B):
    S = int((A and not B) or (not A and B))
    C = int(A and B)
    return (S, C) 
```

和 FullAdder 函数：

```
def FullAdder(A,B,C):
    AB = int((A and not B) or (not A and B))
    S = int((C and not AB) or (not C and AB))
    CAB = int(C and AB)
    C1 = int((A and B) or (CAB))
    return (S,C1) 
```

是否会合并其中任何一个？

这是我到目前为止所拥有的，但它没有解决：

```
def BoolAdd(A,B):
    L = []
    overflow = False
    for i in range (0,len(A)):
            x = bin(A[i]+B[i])
            x = bool(x)
            L.append(x)
    if (len(L) > len(A)):
        overflow = True

    return [overflow, L] 
```

关于我做错了什么或如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:13:23.503

您有一个半加法器，您需要从中构造一个[全加器](http://en.wikipedia.org/wiki/Adder_%28electronics%29#Full_adder)，然后将输入列表中的每个元素的多个调用链接在一起，再加上前面项目的进位。

链接是通过使用[波纹进位](http://en.wikipedia.org/wiki/Adder_%28electronics%29#Ripple-carry_adder)技术完成的，从前一组项目中获取“进位”输出并将其作为第三个输入输入。

# google-app-engine - Sitebricks 和渠道存在服务 (GAE)；正常的servlet也有问题

> ID：12924170
> 
> 赞同：0
> 
> 时间：2012-10-16T22:04:41.457
> 
> 标签：google-app-engine, servlets, channel-api, sitebricks

在我的 Java Google App Engine 服务器应用程序中，我想启用 Channel Presence servlet，以便使用 Channel API 跟踪与我的频道的连接/断开连接（如此处所述。我已经像描述的那样编辑了我的[文件](https://developers.google.com/appengine/docs/java/channel/overview#Tracking_Client_Connections_and_Disconnections)`WEB-INF/appengine-web.xml`。

我的应用程序中的大多数 servlet 使用**Sitebricks**，而不是扩展 HttpServlet 的类，以便为我提供一种在我的应用程序中创建 REST 端点的简单方法。但是，似乎在我的课堂上使用 Sitebricks 不起作用，因为我`WARNING: No file found for: /_ah/channel/connected/`在点击 URL 时得到：

```
@At("/_ah/channel")
@Service
public class MyChannelPresenceServlet {
    ...
    @Post("/connected")
    public void connectedMethod() {
        ...
    }

    @Post("/disconnected")
    public void disconnectedMethod() {
        ...
    }
    ...
} 
```

我有什么方法可以使用 Sitebricks 为 Channel Presence`/-ah/channel/connected/`和提供 REST URL 端点`/_ah/channel/disconnected/`吗？

### 奖金问题

假设 Sitebricks 不是要走的路，相反，我需要坚持`extends HttpServlet`使用通过`WEB-INF/web.xml`. 这个其他解决方案仍然对我不起作用。假设我要将它放入我的 web.xml 文件中：

```
<servlet>
    <servlet-name>channel_connect</servlet-name>
    <servlet-class>com.example.PresenceServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>channel_connect</servlet-name>
    <url-pattern>/_ah/channel/connected/</url-pattern>
</servlet-mapping> 
```

在此示例中，com.example.PresenceServlet 是 HttpServlet 的子级，并覆盖了父级的 doPost(HttpServletRequest, HttpServletResponse) 方法。我仍然遇到问题：

```
WARNING: /_ah/channel/connected/
java.lang.InstantiationException: com.ea.pogosocial.rest.ChannelServiceServlet
at java.lang.Class.newInstance0(Class.java:357)
at java.lang.Class.newInstance(Class.java:325)
at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:66)
at com.google.sitebricks.SitebricksFilter.doFilter(SitebricksFilter.java:88)
at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)
at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)
at com.google.sitebricks.HiddenMethodFilter.doFilter(HiddenMethodFilter.java:75)
at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)
at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)
at com.googlecode.objectify.cache.AsyncCacheFilter.doFilter(AsyncCacheFilter.java:59)
at com.googlecode.objectify.ObjectifyFilter.doFilter(ObjectifyFilter.java:49)
at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)
at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)
at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.appstats.AppstatsFilter.doFilter(AppstatsFilter.java:141)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

非常感谢所有帮助。特别是来自谷歌员工。

（*PS：*我使用的是GAE SDK 1.7.2，期待1.7.3的发布）

* * *

## 更新

我又尝试了一个实验。在`<servlet>`我的 servlet 类的 web.xml 标记中，我添加了这个标记以强制在服务器启动时加载我的 servlet（顺便说一下，`mvn gae:run`在我的示例中使用了该标记）。现在我得到这个输出

```
WARNING: /_ah/channel/connected/: javax.servlet.UnavailableException: java.lang.InstantiationException: com.ea.pogosocial.rest.ChannelServiceServlet 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T02:16:40.493

嗯，这太糟糕了。看起来 GAE 内省了 servlet 链以尝试发现 /_ah/channel/* 的注册处理程序

免责声明：我是 Sitebricks 和 Guice Servlet 的创建者，所以我觉得这很令人沮丧。有一次我在 GAE 中实现了一个通道设置，我设法直接使用通道 API 来完成它： [https ://github.com/dhanji/crosstalk/blob/master/src/main/java/com/wideplay/crosstalk/网页/RoomPage.java](https://github.com/dhanji/crosstalk/blob/master/src/main/java/com/wideplay/crosstalk/web/RoomPage.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:10:12.877

如果还有人在乎...

问题是我既不能使用**Sitebricks**也不能使用**Guice 注入**来处理对 Channel Presence 服务 URI 的 POST 请求的 Servlet。一旦我删除了这两个，servlet 就像一个魅力。

# nuget - NuGet 中“npm install”的等价物是什么？

> ID：12924179
> 
> 赞同：8
> 
> 时间：2012-10-16T22:05:24.000
> 
> 标签：nuget, npm

在 Node.js 项目中，我只是将一个`package.json`文件与其余的源文件一起分发，而想要使用该项目的人只需运行

```
npm install 
```

并下载所有依赖项并将其放入`node_modules`目录中。

在 NuGet 的世界中，有一个`packages.config`文件似乎大致相当于 Node 的`package.json`. 当我打开`cmd.exe`或打开 PowerShell 时，相当于的命令是什么`npm install`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T22:18:51.787

```
nuget install packages.config 
```

[并获取 NuGet.exe 命令行](http://nuget.codeplex.com/downloads/get/222685)

# jquery - 存储格式化数据

> ID：12924183
> 
> 赞同：0
> 
> 时间：2012-10-16T22:05:37.650
> 
> 标签：jquery, html

有没有办法使用 HTML5 存储格式化数据并使用 jQuery 检索它？

```
<li data-title="description here">My element</li>

$('li').data('title'); 
```

我说的是简单的换行符和项目符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:09:08.460

您可以将任何内容放入属性中，包括可在其他地方使用的 HTML - 但是请记住字符`<`,`>`和`"`应分别转义为`&lt;`,`&gt;`和 ，`&quot;`以确保解析器不会遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:10:55.523

如果您在其中有任何特殊字符，则必须使用**反斜杠 \** 或使用与该字符等效的 unicode来转义它们

# java - Java 的 SHA-256 有时会返回 255 位

> ID：12924185
> 
> 赞同：1
> 
> 时间：2012-10-16T22:05:39.177
> 
> 标签：java, hash, biginteger, sha

当我使用 Java`MessageDigest`计算`BigInteger`. 看起来有时哈希值有 256 位，但有时它只有 255 位。这是我用来测试 BigInteger 散列的代码：

```
@Test
public void testSHA256LengthConsistent() {
    MessageDigest sha256 = null;
    try {
        sha256 = MessageDigest.getInstance("SHA-256");
    } catch (NoSuchAlgorithmException e) {
        Assert.fail("NoSuchAlgorithmException. Can't construct the MessageDigest.");
    }
    BigInteger[] tests = {new BigInteger("15902493"), new BigInteger("5189087324092341824"), new BigInteger("7153293421609183203421127438153268")};
    for(BigInteger testNum : tests) {
        byte[] hash = sha256.digest(testNum.toByteArray());
        Assert.assertEquals(32, hash.length); //256 bits is 32 bytes
        BigInteger hashedInt = new BigInteger(1, hash);
        Assert.assertEquals(256, hashedInt.bitLength());
    }
} 
```

（是的，我使用的是 JUnit 4）。此测试在第三个测试编号上失败，其中第二个断言失败并显示“预期为 256，但为 255”。

我将 BigIntegers 与字节数组转换的方式有问题吗？我可以为 Java 的 MessageDigest 找到的所有示例都使用它来散列字符串，而不是 BigInteger，所以我不知道是否有“标准”方式将 BigInteger 与 MessageDigest 一起使用。或者，这是 Java 处理 SHA-256 方式中的错误或边缘情况，并且 7153293421609183203421127438153268 （我随机生成的一个数字）会导致哈希中的一个错误？

顺便说一句，我已经尝试将哈希转换为负 BigInteger（使用`new BigInteger(-1, hash)`）以查看符号位是否有问题，但我得到了完全相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T22:12:15.953

前导零被忽略

```
byte[] bytes = {0x0, 0x1};
System.out.println(new BigInteger(1, bytes).bitLength()); 
```

印刷

```
1 
```

不是您预期的 16 岁。

* * *

我应该阅读 Javadoc，因为它在[BigInteger.bitLength()中声明](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#bitLength%28%29)

> 此 BigInteger 的最小二进制补码表示中的位数，不包括符号位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T20:58:09.173

如果您要运行足够数量的随机测试，您会看到大约一半的结果是 256 位长，四分之一是 255 位长，八分之一是 254 位长等等。原因是每个位的哈希实际上是随机的，因此高位（或者，准确地说，您关心的任何其他特定位）有 50% 的概率为 1，50% 的概率为 0，25% 的概率为两个高阶位（或您要查看的任何其他两个特定位）是 00（或您要测试的任何其他值）等等。

```
 public static void main(final String[] args) throws Exception {
    final Random random = new Random();
    final int[] bits = new int[257];
    for (int i = 0; i < 10000; i++) {
        final MessageDigest sha256 = MessageDigest.getInstance("SHA-256");
        final BigInteger testNum = new BigInteger(100, random);
        final byte[] hash = sha256.digest(testNum.toByteArray());
        final BigInteger hashedInt = new BigInteger(1, hash);
        bits[hashedInt.bitLength()]++;
    }

    for (int i = 0; i < bits.length; i++) {
        if (bits[i] > 0) {
            System.out.println(i + " / " + bits[i]);
        }
    }        
} 
```

制作：

位：244 计数：2 0.02% 位：245 计数：3 0.03% 位：246 计数：4 0.04% 位：247 计数：7 0.07% 位：248 计数：20 0.2% 位：249 计数：33 0.33% 位： 250 计数：70 0.7% 位数：251 计数：168 1.68% 位数：252 计数：296 2.96% 位数：253 计数：657 6.57% 位数：254 计数：1238 12.38% 位数：255 计数：2510 25.1% 位数：256 位数: 4992 49.92%

# opengl - OpenGL 中的轮廓效果

> ID：12924188
> 
> 赞同：21
> 
> 时间：2012-10-16T22:06:01.860
> 
> 标签：opengl, graphics, 3d, glsl

在 OpenGL 中，我可以通过正常绘制对象来勾勒对象，然后使用模板缓冲区再次将其绘制为线框，这样原始对象就不会被覆盖。但是，这会导致轮廓具有一种纯色。

[![在此处输入图像描述](../Images/9ad993c7245bce3185e888879ba2d85b.png)](https://i.stack.imgur.com/ubl0J.jpg)

在这张图片中，生物轮廓的像素似乎越远离它们所描绘的生物越透明。如何使用 OpenGL 实现类似的效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-16T18:36:21.097

我迟到了答案，但我试图实现同样的目标，并认为我会分享我正在使用的解决方案。

使用不那么复杂的着色器可以在单个绘制操作中实现类似的效果。

在片段着色器中，您将根据闪电和纹理计算片段的颜色，为您提供未突出显示的颜色“colorA”。

您的第二种颜色是轮廓颜色“colorB”。

您应该将片段获取到相机矢量，对其进行归一化，然后获得该矢量与片段法线的点积。

片段到相机矢量只是片段在眼睛空间中的位置的倒数。

片段的颜色是：

```
float CameraFacingPercentage = dot(v_fragmentToCamera, v_Normal);
gl_FragColor = ColorA * CameraFacingPercentage + ColorB * (1 - FacingCameraPercentage); 
```

这是基本想法，但您必须尝试使用​​或多或少的轮廓颜色。此外，模型的凹面部分也将突出显示，但问题中发布的图像也是如此。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T22:13:55.007

他们没有为此使用线框。我猜它与着色器密切相关并且需要这个：

1.  将对象渲染到模板缓冲区
2.  在应用模糊时使用选择的颜色渲染模板缓冲区
3.  在它上面渲染模型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:44:25.317

据我所见，屏幕上的效果很短，许多“边缘”效果不是纯边缘，就像漫画轮廓一样。大多数情况下，你有一个通道是你正常渲染对象，然后一个通道只有几何体（没有纹理）和一个 GLSL 着色器。在片段着色器中，法线被采用并且该法线垂直于您为对象着色的相机矢量。然后通过包括接近完美垂直的区域来平滑效果。

我将不得不查找确切的数学，但我认为如果您将相机矢量的点积与法线相乘，您会得到“垂直度”的量。然后，您可以通过 exp 之类的函数运行以偏向 1。

所以（不保证它是正确的）：

```
exp(dot(vec3(0, 0, 1), normal)); 
```

（注意：一切都在屏幕空间中。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T11:50:23.597

使用 dotprod(view,normal) 检测 GLSL 着色器中的边缘

[http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Toon_Shading#Outlines](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Toon_Shading#Outlines)

# svn - 当文件夹不包含文件时，TortoiseSVN 无法连接到存储库

> ID：12924200
> 
> 赞同：1
> 
> 时间：2012-10-16T22:06:54.467
> 
> 标签：svn, tortoisesvn

TortoiseSVN 可以很好地导航我的存储库，除非我导航到一个不包含任何文件的文件夹，此时它说...

> 无法连接到 URL 'http://www.blah.com/svn/' 上的存储库。OPTIONS 请求在响应中返回了无效的 XML：第 1 行的 XML 解析错误：未找到元素 (http://www.blah.com/svn/)

使用网络浏览器时我没有这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-24T12:18:31.863

您输入的网址不正确。您无法使用 SVN 客户端访问 Web 界面（即存储库列表）。您必须明确指定存储库（或其子文件夹或项目）的 URL。

请参阅涵盖相同问题的 SO 线程：[访问 VisualSVN 服务器时，为什么我在 svn 客户端“第 1 行的 XML 解析错误未找到元素”上出现错误？](https://stackoverflow.com/q/11541520/761095).

# c# - Windows.System.UserProfile.UserInformation.NameAccessAllowed 始终返回 false

> ID：12924206
> 
> 赞同：3
> 
> 时间：2012-10-16T22:07:53.153
> 
> 标签：c#, windows-store-apps

我正在尝试访问 Windows 应用商店应用程序中的用户信息。

具体来说，我想获得`DisplayName`.

我已经更新了应用程序清单文件以包含企业身份验证，甚至尝试添加帐户图片提供程序，希望这会有所帮助。

不幸的是，`NameAccessAllowed`总是返回 false，所以`GetDisplayNameAsync()`返回一个空字符串。

我可能需要在清单中启用其他一些特权吗？

更新：

我忘了提到我已经尝试过用户域名示例。

[http://code.msdn.microsoft.com/windowsapps/User-domain-name-sample-85ce3e49](http://code.msdn.microsoft.com/windowsapps/User-domain-name-sample-85ce3e49)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T09:48:51.083

在“PC 设置 -> 隐私”中打开“让应用程序访问我的姓名、图片和其他帐户信息”选项修复了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:21:52.687

问题是如果用户没有 Microsoft 帐户设置，则基于 Microsoft 的站点

获取 DisplayName 将返回 Empty String [DisplayName 和 GetDisplayNameAsync()](http://code.msdn.microsoft.com/windowsapps/Account-picture-name-sample-912baff1#content)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-06T12:15:56.790

在 Windows 安全设置中，您必须允许应用程序获取此信息。所以 NameAccessAllowed 将返回 true。

# php - 在 zend 中保存会引发一个奇怪的错误

> ID：12924219
> 
> 赞同：0
> 
> 时间：2012-10-16T22:09:25.317
> 
> 标签：php, zend-framework

所以我得出的结论是，这个错误是由于两行特定的代码造成的。

```
$notification_object->flag = true;
$notification_object->save(); 
```

似乎抛出：

```
SQLSTATE[08P01]: <<Unknown error>>: 7 ERROR:  bind message supplies 0 parameters, but prepared statement "pdo_stmt_0000000f" requires 1 
```

有谁知道为什么？

**根据要求提供更多信息**

那么 $notifications_object 是如何创建的呢？

```
$notifications_table = new Users_Model_NotificationsMapper();
$notifications = $notifications_table->findByUserAndId($request, $identity->id); 
```

然后我们循环遍历：

```
foreach($notifications as $notification_object){
    //Do some code

   //We need to now update a value in the database,
   //essentially in the row we just got back.

   $notifications_object->flag = true;
   $notifications_object->save();

} 
```

# c# - 将 XmlSerializer 与根元素中的数组一起使用

> ID：12924221
> 
> 赞同：37
> 
> 时间：2012-10-16T22:09:38.867
> 
> 标签：c#, .net, arrays, xml-serialization

我有一个类似于以下内容的 XML 文档：

```
<scan_details>
    <object name="C:\Users\MyUser\Documents\Target1.doc">
        ...
    </object>
    <object name="C:\Users\MyUser\Documents\Target2.doc">
        ...
    </object>
    ...
</scan_details> 
```

我希望使用这些`System.Xml.Serialization`属性来简化 XML 反序列化。我遇到的问题是我无法弄清楚如何指定根节点包含一个数组。

我尝试创建以下类：

```
[XmlRoot("scan_details")]
public class ScanDetails
{
    [XmlArray("object")]
    public ScanDetail[] Items { get; set; }
}

public class ScanDetail
{
    [XmlAttribute("name")]
    public string Filename { get; set; }
} 
```

但是，当我将 XML 反序列化为`ScanDetails`对象时，`Items`数组仍然存在`null`。

如何反序列化根节点中的数组？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-16T22:19:40.270

您应该使用`[XmlElement]`, 而不是`[XmlArray]`装饰 Items 属性 - 它已经是一个数组，您只想设置元素名称。

```
public class StackOverflow_12924221
{
    [XmlRoot("scan_details")]
    public class ScanDetails
    {
        [XmlElement("object")]
        public ScanDetail[] Items { get; set; }
    }

    public class ScanDetail
    {
        [XmlAttribute("name")]
        public string Filename { get; set; }
    }

    const string XML = @"<scan_details> 
                            <object name=""C:\Users\MyUser\Documents\Target1.doc""> 
                            </object> 
                            <object name=""C:\Users\MyUser\Documents\Target2.doc""> 
                            </object> 
                        </scan_details> ";

    public static void Test()
    {
        XmlSerializer xs = new XmlSerializer(typeof(ScanDetails));
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));
        var obj = xs.Deserialize(ms) as ScanDetails;
        foreach (var sd in obj.Items)
        {
            Console.WriteLine(sd.Filename);
        }
    }
} 
```

# javascript - 防止广告图片被缓存

> ID：12924223
> 
> 赞同：1
> 
> 时间：2012-10-16T22:09:43.000
> 
> 标签：javascript, html, wordpress, caching, ads

我正在使用 Adrotate 运行 Wordpress - 请注意，这不是 Wordpress 问题 - 广告商向我发送了他们想要作为广告运行的图像。我知道如果我将图像直接放在广告中，由于缓存软件 (memcache) 的原因，展示次数将不会被跟踪，所以我想我会用一些 JavaScript 来规避它。我下面的方法会起作用还是我需要做一些事情，比如生成一个随机查询字符串？

```
<script>
document.write("<div><a href=%link% target=_blank><img src=\"%image%\" height=\"250\" width=\"250\" /></a></div>");
</script> 
```

注意：我根本不知道任何 JavaScript，所以这需要为我明确说明！我也玩过 OpenX，但对于一个简单的广告活动来说，它似乎太先进了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:19:54.500

您可以为图像 src 参数添加时间戳：

```
<script>
document.write("<div><a href=%link% target=_blank><img src=\"%image%?v=") ;
document.write(new Date().getTime());
document.write("\" height=\"250\" width=\"250\" /></a></div>");
</script> 
```

# asp.net - 考虑到可扩展性和友好 URL 的 GUID 替代方案

> ID：12924226
> 
> 赞同：8
> 
> 时间：2012-10-16T22:10:08.723
> 
> 标签：asp.net, guid, friendly-url

我决定使用 GUID 作为我的许多项目数据库表的主键。我认为这是一个很好的做法，尤其是考虑到可扩展性、备份和恢复。问题是我不想使用常规 GUID 并搜索替代方法。我实际上很想知道我使用什么 Pinterest 作为主键。当您查看 URL 时，您会看到如下内容：

```
http://pinterest.com/pin/275001120966638272/ 
```

我更喜欢数字表示，即使它是以字符串形式存储的。有什么办法可以做到这一点？

此外，youtube 还使用了另一种我无法弄清楚的散列技术：

```
http://www.youtube.com/watch?v=kOXFLI6fd5A 
```

这让我想起了缩短 url 之类的方案。

我更喜欢最短的，但我知道它不能保证是唯一的。我首先想到做这样的事情：

```
 DateTime dt1970 = new DateTime(1970, 1, 1);
 DateTime current = DateTime.Now;
 TimeSpan span = current - dt1970; 
```

结果示例：

```
1350433430523.66 
```

打印自 1970 年以来的总毫秒数，但是如果我每秒有数十万次写入会发生什么。

我主要更喜欢非 BIGINT Auto-Increment 解决方案，因为它使使用 3rd 方工具扩展数据库以及问题较少的备份/恢复功能减少了很多麻烦，因为如果我愿意，我可以在服务器之间传输数据等。

**另一种**复杂的方法是针对我的应用程序定制解决方案。在数据库中，主键还将包含用户名（唯一且用户不能更改），因此我可以将名称的数值与毫秒数结合起来，这将给我一个唯一的数字字符串。因为用户插入数据的频率不高，所以保证数字ID是唯一的。我也可以删除最后 5 个数字，仍然得到一个唯一的 ID，因为我假设用户不会以每秒超过 1 的速度插入数据，但我可能不会那样做（你怎么看这个想法？）

所以我请求你的帮助。我的数据假设增长非常大，每年 2TB，每秒有数万行新行。我希望 URL 看起来尽可能“友好”，并且不希望使用“常规”GUID。

我正在使用 ASP.NET 4.5 和 MySQL 开发我的应用程序

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-06-06T15:16:34.753

# 碰撞表

对于像 GUID 这样的 YouTube，您可以看到[这个](https://stackoverflow.com/questions/1458468/youtube-like-guid)答案。他们基本上保留了他们生成的所有随机视频 ID 的数据库表。当他们请求一个新的时，他们检查表是否有任何冲突。如果他们发现碰撞，他们会尝试生成一个新的碰撞。

# 长主键

您可以使用`long`（例如`275001120966638272`）作为主键，但是如果您有多个生成唯一标识符的服务器，则必须以某种方式对它们进行分区或引入全局锁，因此每个服务器不会生成相同的唯一标识符。

# Twitter 雪花 ID

ID分区问题的一种解决方案`long`是使用雪花 ID。这是[Twitter](https://github.com/twitter-archive/snowflake)用来生成其 ID 的内容。所有生成的 ID 都由以下部分组成：

*   以毫秒为单位的纪元时间戳 - 41 位（给我们 69 年的自定义纪元）
*   配置的机器 ID - 10 位（最多为我们提供 1024 台机器）
*   序列号 - 12 位（每台机器的本地计数器，每 4096 翻转一次）

为将来的目的保留一个额外的位。由于 ID 使用时间戳作为第一个组件，因此它们是可按时间排序的（这对查询性能非常重要）。

# Base64 编码的 GUID

您可以使用将 a 编码为 base64 字符串的[ShortGuid 。](http://www.singular.co.nz/2007/12/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp/)`GUID`缺点是输出有点难看（例如`00amyWGct0y_ze4lIsj2Mw`），并且它区分大小写，如果您使用小写它们可能对 URL 不利。

# Base32 编码的 GUID

还有`GUID`'s 的 base32 编码，你可以看到[这个](https://stackoverflow.com/questions/641361/base32-decoding)答案。这些比上面的 ShortGuid 略长（例如`lt7fz44kdqlu5pt7wnyzmu4ov4`），但优点是它们都可以是小写的。

# 多重因素

我一直在考虑的一种替代方法是引入多个因素，例如如果 Pintrest 使用用户名和 ID 来获得额外的唯一性：

> [https://pinterest.com/some-user/1](https://pinterest.com/some-user/1)

这里的 ID`1`对用户来说是唯一的`some-user`，可以是他们发表的帖子数，即他们的下一个帖子是`2`. 您也可以将 YouTube 的方法与他们的视频 ID 一起使用，但特定于用户，这可能会导致一些可笑的短 URL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-13T05:06:02.953

唯一键的第一个，最简单和实用的场景是写入顺序的递增编号序列，这表示一个数据库中的记录编号，在本地范围内提供唯一编号：这是 - 经常满足 -*应用程序级别的要求*。

接下来，通常使用基于时间和计数器串联的数值方法来确保同一货车中的并发事务在写入之前将具有唯一的 id。

当系统变得高度线程化和分布式时，比如在高度并发的情况下，是否需要放松一些约束，然后才能成为扩展的惩罚。

## 通用唯一标识符作为主键

是的，这是一个很好的做法。

*   关键参考系统可以提供与底层数据库系统的独立性。
*   当诱发场景发生时，这为数据库提供了更高级别的完整性：备份、恢复、扩展、迁移，并可能证明某些真实性。

这篇 由 Alexander Marquardt（MongoDB 的高级咨询工程师）撰写[的生成用于 MongoDB 的全球唯一标识符的文章详细介绍了这个问题，并提供了有关数据库和信息学的一些见解。](https://www.mongodb.com/blog/post/generating-globally-unique-identifiers-for-use-with-mongodb)

UUID 是 128 位长度。它们引入了足够高的熵，以确保标签的实际唯一性。它们可以用 32 个十六进制字符串表示。足以写出几千亿十亿的十进制数。

在考虑总体原理和分析时，还会出现以下几个问题：

1.  数据库的主键和*唯一资源位置*是否应该作为两个不同的实体保存？
2.  这个编号会破坏系统中的顺序性吗？
3.  提供机器主机号`(h)`、用户号`(u)`和`(t)`写入索引`(i)` 的时间是否保证 PK`huti`保持唯一？

现在考虑数据库系统：

*   主键应保留为数字（无论是六进制）
*   数据库系统依赖它，这意味着性能考虑。
*   它们的大小应该是固定的，
*   系统必须快速响应以判断它是否可能正在处理 PK。

## 哈希德

Youtube 的哈希技术是[hashids](https://hashids.org/)。

这是一个不错的选择：hash 是shorts，长度可以控制，字母表可以定制，它是可逆的（和对主键的简短引用一样有趣），它可以使用salt。它的设计是散列正数。

然而，它*是*一个散列，因此存在发生冲突的可能性。可以检测到它们：在存储它们之前违反了唯一约束，在这种情况下，应该再次运行。

考虑对这个答案的评论，以确定从缩短的 sha1+b64 配方中可以获得多少熵。 [为了预测碰撞场景](https://stackoverflow.com/a/3038269/1874016)，需要估计数据库的未来维度，即潜在的记录数。推荐阅读：[*Z.Bloom*，一个ID需要多长时间？](https://eager.io/blog/how-long-does-an-id-need-to-be/)

### 自纪元以来的毫秒数

引用自上一篇文章，该文章以漂亮的合成风格提供了手头问题的大部分答案

> 但是，自 1970 年以来，您可能不需要每次都进行编码。如果您只对保持最近的记录彼此靠近感兴趣，您只需要足够的值来确保您没有更多具有相同前缀的值，而不是您的数据库可以一次缓存

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-12T08:42:12.197

您可以做的是通过将所有字母转换为 guid 中的数字，将 GUID 转换为仅数字。这是一个看起来像的例子。它有点长，但如果这不是问题，这可能是生成密钥的一种方法。

> 1004234499987310234371029731000544986101469898102

这是我用来生成上面字符串的代码。但是我可能会建议您使用长主键，尽管它可能会有点痛苦，但它可能是比下面的函数更安全的方法。

```
 string generateKey()
    {
        Guid guid = Guid.NewGuid();
        string newKey = "";
        foreach(char c in guid.ToString().Replace("-", "").ToCharArray())
        {
            if(char.IsLetter(c))
            {
                newKey += (int)c;
            }
            else
            {
                newKey += c;
            }
        }
        return newKey;
    } 
```

**编辑：**

我做了一些测试，只取了前 20 个数字，在 5000000 个生成的密钥中，4999978 是唯一的。但是当使用 25 个第一个数字时，它是 5000000 中的 5000000。如果使用这种方法，我建议您进行更多测试。

# javascript - 如何检查没有链接的节点的d3 js力图并删除它们？

> ID：12924227
> 
> 赞同：5
> 
> 时间：2012-10-16T22:10:08.233
> 
> 标签：javascript, layout, graph, d3.js, force-layout

我想控制我的节点，以便每个节点都是链接的，并且没有孤立的节点。

我的脚本每 30 秒从 json 查询中添加一对新节点。如果任一新节点是现有节点的副本，则图将仅使用唯一节点更新并将其链接到另一个现有节点。

在此过程中，我将移除最旧的节点以在图表上最多保留 10 个节点。正是在这里，我似乎遇到了麻烦。我怎样才能开始删除节点并检查并删除任何落后者，即未链接到任何其他节点的节点？

该脚本基于[knoren 关于添加新节点的帖子](https://stackoverflow.com/questions/9539294/adding-new-nodes-to-force-directed-layout)。

```
 this.checkLength = function () {
                    if (nodes.length > 10) {
                        var i = links.shift();
                        nodes.splice(findNodeIndex(i),1);
                        update();
                    }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T10:08:56.310

正如 paxRoman 所建议的，为了删除节点，您可以执行以下操作：

```
node.exit().remove(); 
```

现在，要查找空节点，您可以使用`weight`force 节点的属性，如[force layout 文档中所述](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-nodes)：

> weight - 节点权重；关联链接的数量。

因此，最后，为了获得所有空的节点，您可以执行以下操作：

force.nodes().filter(函数(d){d.weight==0})

成为你的`force`力量布局。

另请注意，权重属性只会在`force.start()`调用时初始化，如文档中所述：

> 在将节点传递给布局之前不需要设置这些属性；如果未设置，则在调用 start 时布局将初始化合适的默认值

# php - AJAX 和 php POST 问题

> ID：12924229
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:10:10.840
> 
> 标签：php, javascript

我正在尝试传递给 PHP 文件单元编号。当我尝试 alert("test"); 时，我的 AJAX 甚至无法正常工作。在 ajax.onreadystatefunction() 中它不会打印。

每次有人单击表格中的单元格时，都会调用我的 javascript getrow(t) 函数，结果是单元格变成绿色。我想最终使用 php 将这些数据输入到 postgres 表中。

感谢所有的帮助！弗拉德

```
<script type="text/javascript">
//gets the row and column number
function getRow(t) 
{
    var col=t.cellIndex;
    var row=t.parentNode.rowIndex;
    var testTable = document.getElementById("testTable");
    t.style.backgroundColor = "#33CC66";
    var cellnumber = (row*15 + col);
    var ajax = new XMLHttpRequest();

    //use ajax to enter into visitedCells
    ajax.onreadystatechange = function() 
    {
        // Call a function when the state changes.
       if(ajax.readyState == 4 && ajax.status == 200) 
       {
           ajax.open("POST", insertCoordinates.php, true);
           ajax.send(cellnumber);    
       }
       else
       {
           alert("Error:" + ajax.status + "and " + ajax.statusText);
       }
    }
}
</script>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:21:34.917

```
 ajax.open("POST", insertCoordinates.php, true);
         ajax.send(cellnumber); 
```

应该在外面`ajax.onreadystatechange`

就在之前`}//getRow`

你实际上没有执行请求

应该是这样的：

```
var ajax = new XMLHttpRequest();
//use ajax to enter into visitedCells
  ajax.onreadystatechange = function() {//Call a function when the state changes.
  if(ajax.readyState == 4 && ajax.status == 200) {
       alert('success');    
  } else {
       alert("Error:" + ajax.status + "and " + ajax.statusText);
 }
}//onreadyState

ajax.open("POST", insertCoordinates.php, true);
ajax.send(cellnumber); 
```

可能无法在 IE 中使用

应该使用这样的结构：

```
try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
} 
```

但最好的方法是使用 jQuery ...简单而安全

# variables - 使用脚本输出设置 Jenkins 提示变量

> ID：12924232
> 
> 赞同：0
> 
> 时间：2012-10-16T22:10:14.077
> 
> 标签：variables, jenkins, parameterized, choice, choicefield

我有一个脚本：ScriptA.bat 或 ScriptA.sh

我想从 Jenkins 界面调用这个脚本，即使用作业。脚本需要参数（该参数的值可以在后端动态更改）。

即创建了 Jenkins JobScriptA，它使用 scriptA 期望的 3 个参数调用此 scriptA，即 JobScriptA 设置为使用“此构建已参数化”设置。

如果脚本需要 3 个参数，则创建参数，第一个是一个简单的文本框，第二个是一个包含 N 个值的列表框。这两个很容易设置，第一个可以设置为字符串/密码/文本参数，第二个可以设置为 CHOICE 参数类型。

好的，我的？是：对于我想要的第三个参数。该参数的值类似于“2nd”，但我不知道这些值，即它们不像“AAAA”或“BBBB”那样是静态的。我有一个脚本“script_param3.sh 或 .bat”，我想知道的是 Jenkins 是否支持将“script_param3.sh/.bat”的输出作为 CHOICE 值列表，以便我可以设置 param3 以获取该输出作为它的可能值。有时 script_param.sh/.bat 会生成：

*   1
*   2
*   3
*   4
*   5

有时它可能会产生

*   12
*   33
*   232
*   3
*   21

所以..正如我上面提到的，param3 完全取决于 script_param3.sh/.bat 输出的内容。

如何在 Jenkins 参数提示界面中实现这一点。

任何的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T14:39:18.380

1.  [https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)
2.  [https://wiki.jenkins-ci.org/display/JENKINS/Extended+Choice+Parameter+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Extended+Choice+Parameter+plugin)
3.  [https://wiki.jenkins.io/display/JENKINS/Dynamic+Parameter+Plug-in](https://wiki.jenkins.io/display/JENKINS/Dynamic+Parameter+Plug-in)

以上插件帮助...

# jquery - 我可以让 IE7、HTML5 表单验证和 jQuery .submit 事件一起工作吗

> ID：12924236
> 
> 赞同：2
> 
> 时间：2012-10-16T22:10:27.360
> 
> 标签：jquery, forms, html, validation, internet-explorer-7

这是我的表格：

```
<div id="MyModal" class="m-modal-container">
  <div class="form-wrap">
    <form id="form_reg" class="m-form reg-form" action="www.somedomain.com/subPage">
      <div class="form-element email">
    <input type="email" class="text" name="email" id="email" value="" placeholder="Email Address" title="Email is required." maxlength="90" required>
      </div>
      <div class="form-element buttons">
        <button type="submit" class="button primary submit">Register</button>
      </div>
    </form>
  </div>
</div> 
```

这是来自我的 JS 文件来处理提交

```
$("#MyModal #form_reg").submit(function(event){
    var initial_id = 0;

    $.ajax({
        url: '/dir/file.cfc',
        async: false,
        data: {
            method: 'myFunction', 
            emailAddress: $("#MyModal #form_reg").find('[name="email"]').val(), 
            email_id: 0
        },
        cache: false,
        type: 'get',
        dataType: 'json'
    })
    .success(function(response) { initial_id = response.jsid; }) 
    .error(function(jqXHR, textStatus, errorThrown) { })
    .complete(function(response) { 
        if (initial_id == 0) {
            return true;
        } else {
            event.preventDefault();
            $('#MyModal').dialog('close');
            return false;               
        }
    });
}); 
```

我的问题：

此表单在主页上显示为模式。用户填写完毕，点击提交，进入新页面。它使用 HTML5 表单验证来指示必填字段。它使用 webShims/polyfill 来实现旧版浏览器的兼容性。

一切正常。我的问题出现在某些情况下，我不希望表单提交到“subPage”（表单上的默认操作）。相反，我希望它简单地关闭模态表单，停留在显示模态的页面上。（这发生在电子邮件已经在系统中的情况下 - 不想将用户带到显示电子邮件已经在系统中的消息的辅助表单页面）。

如果我使用 $("#MyModal #form_reg").click(function(event){ blah blah blah }); - 然后我可以控制提交与不提交。但是，我随后失去了 HTML5 表单验证功能。如果我使用 $("#MyModal #form_reg").submit(function(event){ blah blah blah }); 表单验证有效，但页面提交并且代码未捕获事件。

迄今为止我所做的所有研究都表明 IE7 不能很好地处理 .submit 事件，但是，我需要 .submit 事件才能使表单验证正常工作。

有没有办法让这三件事一起工作？IE7 是导致我的问题的唯一浏览器。.submit/form 验证在 FF、IE9、Opera 和 Chrome 中按预期工作。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:15:12.553

尝试使用`.preventDefault()`which 停止默认提交操作

```
$("#MyModal #form_reg").submit(function(event){
    var initial_id = 0;

    event.preventDefault();

   // your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:35:33.147

客户端表单验证的大多数跨浏览器解决方案之一是动态禁用 HTML5 验证（例如，通过使用 JS`novalidate`向元素添加属性`FORM`）并为所有浏览器使用相同的自定义 JavaScript 验证代码路径。

因此，当禁用 JS 时，HTML5 验证*至少*可以在现代浏览器中工作，而如果启用 JS，则 JavaScript 验证将在所有浏览器中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:16:06.443

那么提交事件应该在IE7中工作。它应该由 jQuery 规范化。所以这很奇怪。我会说：尝试删除 webshims（仅用于测试）并查看是否调用了您的提交处理程序，如果它有效，则可能是 webshims 错误（请报告此。然后）。如果它仍然不起作用，那应该是一个 jQuery 错误。

要解决您的问题，您可以执行以下操作：

*   删除验证 $("#MyModal #form_reg").prop('noValidate', true);
*   挂钩提交或按钮单击
*   并使用 checkValidity + 显示验证消息检查处理程序内部的有效性

# jquery - jQuery Validate - 如何删除特定标签上的错误类？

> ID：12924238
> 
> 赞同：2
> 
> 时间：2012-10-16T22:10:36.953
> 
> 标签：jquery, jquery-validate

在此处查看实际问题：（感谢任何可以提供帮助的人！）

**[http://jsfiddle.net/74u7g/](http://jsfiddle.net/74u7g/)**

*   当密码匹配时，我通过添加类 checkMark 添加绿色复选标记
*   要查看问题，请更改第二个密码，使其不匹配且少于 6 个字符。
*   我只想删除此特定输入的类（第二个密码字段）

`class`如果用户稍后更改其条目（成功后）导致错误，则所需文本保持绿色（未删除）。如何成功删除`class` `checkMark`错误？

```
$("#registerForm").validate({       
    rules: {
    createUsername: {
    required: true,
    email: true
},

    createPassword: {
    required: true,
    minlength: 6
    },

    createPassword2: {
    equalTo: "#createPassword",
    minlength: 6
    }
},

messages: {
    createPassword: {
    required: "This field is required.",
    minlength: "Password must be 6-15 characters long."
    }
},

success: function(label) {
    if ( $(label).parent().is('#confirmPassContainer') ) {
        $(label).addClass('checkMark').html('&#x2713;'); 
        }   
    }

}); 
```

我试过`highlight`and`error`方法没有成功。我在 StackOverflow 上搜索了很多答案，但还没有运气。希望使用jQuery的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:25:24.490

`highlight:`在您的内部使用`.validate()`...

```
highlight: function (element, errorClass) {
    $(element).siblings('label').removeClass('checkMark');
} 
```

我相信每次表单测试无效时它都会触发......有点与`success:`.

在您的演示中：

[http://jsfiddle.net/74u7g/5/](http://jsfiddle.net/74u7g/5/)

**编辑：**

`element`指正在`input`验证的特定元素。

`errorClass`指`class`插件用来标记错误的。本例中未使用。

所以`$(element)`选择有错误的元素，然后`.siblings('label')`只选择作为元素的兄弟姐妹`<label>`，然后`.removeClass('checkMark')`删除你的`checkMark` `class`.

```
$(element).siblings('label').removeClass('checkMark'); 
```

**编辑2：**

您可能想要添加一个条件来测试它是否在相关的输入元素上，尽管我确信让它在所有元素上运行肯定不会有什么坏处。

见：http: [//jsfiddle.net/74u7g/6/](http://jsfiddle.net/74u7g/6/)

```
if ( $(element).parent().is('#confirmPassContainer') ) {
    $(element).siblings('label').removeClass('checkMark');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:29:26.803

您可以通过使用 CSS 优先级来解决问题。

```
.regForms .error {
    display:block;
    color:#c92a00 !important;
    font-size:12px;
} 
```

在您的情况下，当第二个密码与第一个密码不同时，您同时有 2 个 CSS 规则和 2 个颜色定义。!important 允许您优先处理错误之一。

# c++ - 是否根据最新的 C++ 标准保留以下划线开头的标识符？

> ID：12924243
> 
> 赞同：2
> 
> 时间：2012-10-16T22:11:05.240
> 
> 标签：c++, c++11, standards

> **可能重复：**
> [在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)

我对标准中的相关部分感兴趣（如果有的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T22:13:37.707

是的，当下划线后跟另一个下划线或大写字母时（即预处理器#defines 或宏），或者如果标识符位于全局命名空间中（第 17.6.4.3.2 节）：

> 某些名称和函数签名集始终保留给实现：
> 
> — 每个包含双下划线 _ _ 或以下划线后跟大写字母 (2.12) 的名称都保留给实现以供任何使用。
> 
> — 每个以下划线开头的名称都保留给实现用作全局名称空间中的名称。

请注意，第一点意味着如果两个下划线出现在标识符中的*任何位置*，即使在中间或末尾，名称都是保留的。另外，我会补充（§17.6.4.3.5，强调我的）：

> ***不*以下划线开头的**文字后缀标识符**保留用于将来的标准化。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:14:08.297

它们不是保留的，`for`但您不应该使用它们，因为编译器开发人员可能会使用它们来命名自己的函数，因此它可能与您的函数冲突。因此，如果您使用`my_class::_function`那么应该没有错误，但是编写一个全局函数，例如`void _function()`可能会使用一个编译器生成一个副本！**

# xml - 使用 P4Merge 合并 XML

> ID：12924247
> 
> 赞同：7
> 
> 时间：2012-10-16T22:11:19.420
> 
> 标签：xml, merge, perforce

我的（大）公司使用 Perforce 进行大部分源代码控制。（我无法逃避这一点。）

我和一位同事经常不得不同时处理同一个基于 XML 的文件。当需要合并我们的更改时，P4Merge 通常不如我想的那么聪明。例如，考虑这个超级简单的 XML 文件和两个冲突的变体：

![简单的 XML 文件和在同一个地方具有相同结束标记的两个变体。](../Images/d9aeb19c932b89fa06615e467bba471d.png)

如图所示，P4Merge 不支持 XML，并且只保留一份通用`</b>`.

您如何修改 Perforce 工具本身以支持更智能的 XML 合并，或者如何修改 Perforce 工具链以使用更智能的合并工具作为解决过程的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T02:45:46.203

有一个名为 Project:Merge 的工具可以更好地处理 XML 内容，并且它与 Perforce 集成：

[http://www.projectmerge.com/help/en/integratep4v.php](http://www.projectmerge.com/help/en/integratep4v.php)

更新：Project:Merge 已重命名为 Oso XML Merge 并在发布此帖子后进行了更新。最新版本可以在[这里](https://osocorporation.com/xmlmerge/index.php)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T22:20:13.063

假设您使用的是 P4V / P4Win，您可以将默认的差异和合并工具从 Perforce 工具更改为您喜欢的工具。请参阅[P4V 手册中的此页面](http://www.perforce.com/perforce/doc.current/manuals/p4v/Configuring_display_preferences.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T16:07:26.180

您也可以将此作为您希望看到的增强功能：http: [//p4ideax.com/ideas/585/intelligent-support-for-xml-when-doing-merges](http://p4ideax.com/ideas/585/intelligent-support-for-xml-when-doing-merges)

# php - PHP 标准值为 NULL 且不会更新

> ID：12924253
> 
> 赞同：0
> 
> 时间：2012-10-16T22:11:51.450
> 
> 标签：php, mysql, database

在我的数据库中，我有一些表，一个用于图像路径，一个用于图像宽度，它们的标准值是 NULL，还有一个空值（复选框和下拉框都是 NULL）当我输入新的路径或宽度不会改变，但我的另一个会改变，这是我的代码。

```
require_once("../Packages/Connection.php");

$text = mysql_real_escape_string($_POST["articleText"]);
$method = $_POST['method'];
$articleId = $_POST['articleId'];
$imagePath = $_POST['imagePath'];
$imageWidth = $_POST['imageWidth'];

if($method == "update")
{
    mysql_query("UPDATE Articles SET text='$text' WHERE id='$articleId'") or die(mysql_error());
}
elseif($method == "delete")
{
    mysql_query("DELETE FROM Articles WHERE id=".$articleId."");
};

if($_POST["articleGroup"]=="News")
{
    mysql_query("INSERT INTO Articles VALUES(NULL,'".$_POST["articleGroup"]."','".time()."','".$text."', NULL, NULL, NULL)") or die(mysql_error());
}
else
{
    mysql_query("INSERT INTO Articles VALUES (NULL,'".$_POST["articleGroup"]."','NULL','".$text."','NULL','".$imagePath."','".$imageWidth."')") or die(mysql_error());  
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:17:19.553

其他两个字段没有更新。

```
UPDATE Articles SET text='$text' WHERE id='$articleId' 
```

应该包括更新（添加到 SET 子句）其他字段。

正如其他人所说，您也应该清理其他字段（并且可能从已弃用的扩展中移出 - 如有必要更新 PHP），否则您所做的任何清理都是毫无意义的，因为被攻击者可以使用其他字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:20:03.403

您需要将其他两个属性添加到更新命令中。了解您的 mysql 表架构会很有帮助，但猜测列名，我得到：

```
mysql_query("UPDATE Articles SET text='".$text."', width='".$imageWidth."', path='".$imageWidth."' WHERE id='".$articleId."'"); 
```

此外，正如评论者指出的那样，您**确实**需要清理您的输入值。任何 REQUEST 变量都需要检查/清理。[您可以在此处](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)阅读有关此内容的更多信息

# assembly - 如何猜测下一条指令以使用动态内存在汇编中执行

> ID：12924259
> 
> 赞同：0
> 
> 时间：2012-10-16T22:12:30.043
> 
> 标签：assembly, x86, dynamic-memory-allocation, cracking, ollydbg

我的一个朋友挑战我破解他编写的一个小程序。基本上，它是一个显示图像的 exe 文件，但为了做到这一点，您需要一个带有密码的密钥文件。

我开始用 ollydgb 对其进行逆向工程，我发现需要存在一个名为 key.txt 的文件并包含密码。我意识到的另一件事是我的朋友使用密码来计算内存地址并调用它。因此，如果您的密码错误，应用程序将崩溃，因为它会跳转到一个随机地址，可能会导致违规。

他基本上将密码存储在EBX中。他放了一个固定值 EAX。然后他做了ADD EAX、EBX，最后是CALL EAX。

所以，知道了这一切，如果我知道接下来要执行哪个地址，我可以从存储在 EAX 中的固定值中减去该地址，我将得到与密码对应的 HEX 值。

我的问题是，我到底怎么知道下一个要执行的地址是哪个？我对破解还很陌生...

我尝试在 CALL 之后指向下一个地址，但它不起作用。我还检查了它正在使用的库，我当然看到了 opengl32，但我不确定我是否必须以某种方式跳转到那个库。

我的问题是，我怎样才能确定下一个要执行的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:12:36.400

X86 指令集的属性之一是，尽管长度可变（指令使用可变字节数编码），但指令序列会很快收敛。这意味着，如果您随机选择一个位置作为函数的开始并从该点开始拆卸，您将不会搞砸。你反汇编的一些指令是错误的，但最终（而且很快）你会得到真正的指令。

这意味着你可以做一些事情，比如在可执行文件中选择随机地址，并开始寻找常见的模式，比如函数的序言和结尾。这些可以给你提示代码在哪里。

但是，这假设您的朋友不是手写程序集或以其他方式混淆代码。

但是，无论他做什么，都会有一些对导入地址表中的方法的调用，或者系统调用指令。这些将运行代码来绘制图像，或者将修改进程的页表，以便可以对混淆的代码进行反混淆。这些模式会更可靠。因此，一个好的开始是转储 iat（导入地址表），并寻找对有趣函数的调用。如果这不起作用，请尝试寻找系统调用模式。究竟要寻找什么取决于您所使用的特定操作系统。

要记住几件事：

1.  如果您的朋友没有关闭 ASLR（地址空间布局随机化），那么即使您有正确的密码，代码也可能不会总是有效。

2.  我对 olydbg 不太熟悉，但我假设它使用递归下降反汇编。如果是这样，它可能不会在反汇编中包含您的目标函数，因为它不会有任何静态可解析的调用。

要解决 2，您可能需要编写代码自己进行反汇编，解码指令。最好的起点是扫描 exe 以寻找间接调用指令。之后尝试系统调用。

**更新**

还有一件事：如果 exe 配置为使 exe 部分可写或数据部分可执行（或关闭 nxbit），则映像中可能没有系统调用。在开始之前查看图像中的部分表并查看是否有任何异常作为健全性检查是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:55:15.330

除非程序很小（我的意思是只有几 KB 的代码），否则您无法轻易弄清楚，需要执行一些代码分析、做出假设并通过试验来确认或反驳它们，并且不可避免地会出错。

我首先想到的是找到代码中存在但没有调用/跳转指令将控制权转移给它们的函数。您可以通过首先确定为绘制图片而必须调用的那些函数（调用相关 OpenGL/DirectX/GDI 函数的函数）来缩小搜索范围。然后你可以从那里向后工作。

查看可执行文件的数据部分中是否有任何函数指针/地址也可能很有用，原因是编译器可能会删除未被任何其他函数或指针引用的函数，因此对于感兴趣的函数要仍然存在于已编译的可执行文件中，必须在某处对其进行一些引用（当然，除非代码是在所有优化关闭的情况下编译的）。

无论哪种方式，恐怕您都将不得不编写大量代码。

要查看的另一件事是可执行文件本身及其部分（例如，它们的名称、大小、位置或内容）。这可能会给你一些线索。

# pandas - 将 Pytables 表转换为 pandas DataFrame

> ID：12924264
> 
> 赞同：6
> 
> 时间：2012-10-16T22:13:19.050
> 
> 标签：pandas, pytables

很多关于如何将 csv 读入 pandas 数据框的信息，但我拥有的是一个 pyTable 表并想要一个 pandas 数据框。

我已经找到了如何将我的 pandas DataFrame 存储*到*pytables ......然后读我想读回它，此时它将具有：

```
"kind = v._v_attrs.pandas_type" 
```

*我可以把它写成 csv 并重新读入，但这似乎很愚蠢。这就是我现在正在做的事情。*

我应该如何将 pytable 对象读入熊猫？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:53:09.860

```
import tables as pt
import pandas as pd
import numpy as np

# the content is junk but we don't care
grades = np.empty((10,2), dtype=(('name', 'S20'), ('grade', 'u2')))

# write to a PyTables table
handle = pt.openFile('/tmp/test_pandas.h5', 'w')
handle.createTable('/', 'grades', grades)
print handle.root.grades[:].dtype # it is a structured array

# load back as a DataFrame and check types
df = pd.DataFrame.from_records(handle.root.grades[:])
df.dtypes 
```

请注意，您的 u2（无符号 2 字节整数）将以 i8（整数 8 字节）结尾，并且字符串将是对象，因为 Pandas 尚不支持可用于 Numpy 数组的全部 dtype。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-13T15:18:44.197

文档现在包含一个关于[使用 HDF5 存储的优秀部分，并且在](http://pandas.pydata.org/pandas-docs/dev/io.html#hdf5-pytables)[食谱](http://pandas.pydata.org/pandas-docs/dev/cookbook.html#cookbook-hdf)中讨论了一些更高级的策略。

现在相对简单：

```
In [1]: store = HDFStore('store.h5')

In [2]: print store
<class 'pandas.io.pytables.HDFStore'>
File path: store.h5
Empty

In [3]: df = DataFrame([[1, 2], [3, 4]], columns=['A', 'B'])

In [4]: store['df'] = df

In [5]: store
<class 'pandas.io.pytables.HDFStore'>
File path: store.h5
/df            frame        (shape->[2,2]) 
```

并从 HDF5/pytables 中检索：

```
In [6]: store['df']  # store.get('df') is an equivalent
Out[6]:
   A  B
0  1  2
1  3  4 
```

*也可以[在表内查询](http://pandas.pydata.org/pandas-docs/dev/io.html#querying-a-table)。*

# php - 无法弄清楚如何在 php 中对此进行编码

> ID：12924278
> 
> 赞同：0
> 
> 时间：2012-10-16T22:14:29.993
> 
> 标签：php

我正在尝试`$_GET`用户可能输入的一些变量（忙于制作基本的网络服务器）：

```
$users= strval($_GET['user']);
$price= intval($_GET['price']);
$productID= intval($_GET['productid']); 
```

这是我的查询：

```
$query = "SELECT * FROM `table` WHERE `user` = '" . $user . "' AND `price` <= " . $price . " AND `productID` = " . $productID; 
```

（像这样）

鉴于此理论联系：

```
www.example.com/api.php?price=300 
```

并且不要使用 GET 的其余部分（用户和产品 ID）将自动填充 0 或 ''（int/string）。

所以我想我可以使用一个`if`声明：

```
if(price == 0){
   // change the query without the price as WHERE
} 
```

但是，如果我将 price 和 productID 或 productID 和 user 组合为变量呢？

处理这个问题的最佳方法是什么？也许这是一个愚蠢的问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:19:20.910

如果提供了变量，您可以使用组合的 IF 语句来构建适当的查询（如果没有，则忽略它们）

```
$query = "SELECT * FROM `table` WHERE 1"; // WHERE 1 means "return all rows from table"

if ( isset( $_GET['price'] ) ){ // Only if price variable is set
    $query .= " AND price <= '{$_GET['price']}'"; // Restrict results by price
}

if ( isset( $_GET['user'] ) ){ // Only if user variable is set
    $query .= " AND user LIKE '{$_GET['user']}'"; // Restrict results by user
}

if ( isset( $_GET['productID'] ) ){ // Only if user variable is set
    $query .= " AND productID = '{$_GET['productID']}'"; // Restrict results by productID
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:22:22.950

您可以使用三元运算符正确制作查询字符串，在设置价格子句时连接它。

```
$query = "select * from table where user = $user" . ($price ? " AND price <= $price" : "") . " AND productID = $productID"; 
```

你的英语很差，我们是巴西人 o/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:24:36.663

```
$users = $_GET['user'] || "";
$price = $_GET['price'] || 0;
$productID = $_GET['productid'] || 0;
$query = "SELECT * FROM table WHERE 1";

$query .= (isset($_GET['user'))?"AND user = '{$users}'";
$query .= (isset($_GET['price'))?"AND price <= '{$price}'";
$query .= (isset($_GET['productid'))?"AND productID = '{$productID}'"; 
```

如果您想将变量用于其他用途。如果未在数据中设置值，这会将值设置为`0`或（空字符串）。`""``$_GET`

# ios - 选择注释视图时分配方法

> ID：12924280
> 
> 赞同：0
> 
> 时间：2012-10-16T22:14:35.947
> 
> 标签：ios, mapkit, mkannotationview

`annotation view`当（并且只有注释视图）被单击时，我尝试调用一个方法。

```
- (void)mapView:(MKMapView *)m didSelectAnnotationView:(MKAnnotationView *)view {

            [self openDetailView];            

} 
```

但我注意到，`openDetailView`只有当我选择 , 时才会调用此方法 ( ) ，这`PIN`意味着在`annotation view`显示之前。如何在标注点击时触发该方法？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:24:05.943

通过添加带箭头的按钮而不是标注：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    if ([annotation isMemberOfClass:[MKUserLocation class]]) {
        return nil;
    }
    MKPinAnnotationView *v =[[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"ku"] autorelease];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    button.frame = CGRectMake(0, 0, 24, 24);
    Shop *shop = [(ShopAnnotation *)annotation myShop];
    button.tag = [shop.ID intValue];
    [button addTarget:self action:@selector(callOutPressed:) forControlEvents:UIControlEventTouchUpInside];
    [button setImage:[UIImage imageNamed:@"map_arr_right.png"] forState:UIControlStateNormal];

    v.rightCalloutAccessoryView = button;
    v.canShowCallout = YES;
    return v;
}

- (void) callOutPressed:(id)sender {

    NSLog(@"callout pressed");
} 
```

# iphone - 从子类调用视图

> ID：12924282
> 
> 赞同：0
> 
> 时间：2012-10-16T22:14:49.613
> 
> 标签：iphone, uiviewcontroller, delegates, subview

我有一个主要由两个视图组成的 iPhone 应用程序，我们称它们为`fullScreen`和`cardViews`（它们`cardViews`作为全屏视图的子视图呈现）。`masterCardViewClass`我已经通过使用 a和 a来处理呈现卡片视图的所有动画`masterFullScreenViewClass`。所有特定的cardViews都是masterCardView的子类，所有特定的fullScreenViews都是masterFullScreenView的子类。

我使用来自`masterFullScreenViewClass`. 我使用 masterCardView 中的委托方法关闭了 cardView。但是，我在调用从另一个 cardView 呈现 cardView 的方法时遇到问题。所有 cardView 呈现方法都包含在 masterFullScreenViewController 类中。

我如何访问这些方法，而无需在需要它们的地方复制粘贴它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:49:23.400

一种方法是使用协议。

简而言之，您`masterCardView class`将实现一个提供 a 的协议方法`cardView`（为了简单起见，假设您调用具有特定索引的 cardViews）：

**万事达卡视图.h：**

```
@protocol CardPresenterDelegate <NSObject>

- (void)presentCardViewWithIndex:(int)index;

@end

@interface MasterCardView:UIViewController <CardPresenterDelegate>
... 
```

**万事达卡视图.m：**

```
- (void)presentCardViewWithIndex:(int)index
{
// Code for presenting a cardView
} 
```

您还需要在您的 cardView 中创建一个委托（弱）属性：

**卡片视图.h**

```
@property (weak) id<CardPresenterDelegate> cardPresenterDelegate; 
```

然后通过访问您的 cardView 中的该属性，您可以告诉 masterCardView 为您做一些事情：

**卡片视图.m**

```
[self.cardPresenterDelegate presentCardViewWithIndex:5]; 
```

哦，而且，在你的 masterCardView 中创建它们时，不要忘记在你的 cardViews 上设置委托属性：

回到**masterCardView.m：**

```
cardView.cardPresenterDelegate = self; 
```

# html - 使用 代替在 Django 模板中

> ID：12924284
> 
> 赞同：0
> 
> 时间：2012-10-16T22:15:08.157
> 
> 标签：html, django, django-templates, django-views

我正在使用一个库[tagit](https://github.com/aehlke/tag-it/blob/master/README.markdown)它使用`<ul>`并且我想用它来将标签传递给视图但是当我尝试使用

```
<ul type="input" name='skills'> 
```

代替

```
<input type="input" name='skills'> 
```

我明白了

```
MultiValueDictKeyError 
```

那么有没有办法使用 ul 作为视图的输入！？

# python - 更改输出文本文件的格式

> ID：12924287
> 
> 赞同：0
> 
> 时间：2012-10-16T22:15:18.090
> 
> 标签：python

我有一个这样的文本文件：-

```
V1xx AB1
V2xx AC34
V3xx AB1 
```

我们可以`;`通过python脚本在每一行添加吗？

```
V1xx AB1;
V2xx AC34;
V3xx AB1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:35:13.633

这是您可以尝试的。我有`overwritten the same file`。

你可以`try creating a new one`（我把它留给你） - 你需要`with`稍微修改你的陈述： -

```
lines = ""

with open('D:\File.txt') as file:
    for line in file:
        lines += line.strip() + ";\n"

file = open('D:\File.txt', "w+")
file.writelines(lines)

file.flush() 
```

**更新**：-对于文件**的就地修改**，您可以使用`fileinput`模块：-

```
import fileinput

for line in fileinput.input('D:\File.txt', inplace = True):
    print line.strip() + ";" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:40:10.390

```
input_file_name = 'input.txt'
output_file_name = 'output.txt'

with open(input_file_name, 'rt') as input, open(output_file_name, 'wt') as output:
    for line in input:
        output.write(line[:-1]+';\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:34:08.287

```
#Open the original file, and create a blank file in write mode
File     = open("D:\myfilepath\myfile.txt")
FileCopy = open("D:\myfilepath\myfile_Copy.txt","w")

#For each line in the file, remove the end line character,
#insert a semicolon, and then add a new end line character.
#copy these lines into the blank file
for line in File:
    CleanLine=line.strip("\n")
    FileCopy.write(CleanLine+";\n")
FileCopy.close()
File.close()

#Replace the original file with the copied file
File = open("D:\myfilepath\myfile.txt","w")
FileCopy = open("D:\myfilepath\myfile_Copy.txt")
for line in FileCopy:
    File.write(line)
FileCopy.close()
File.close() 
```

注意：我把“复制文件”留在那里作为备份。您可以手动删除它或使用 os.remove() （如果您这样做，请不要忘记导入 os 模块）

# mobile - SignalR 可以在移动设备上使用吗

> ID：12924292
> 
> 赞同：0
> 
> 时间：2012-10-16T22:15:46.050
> 
> 标签：mobile, signalr

这可能是一个简单的问题，但我正在努力寻找答案。谁能告诉我 S3 或 pad 等移动浏览器是否支持 SignalR？如果不支持 websockets，我可以看到它会退回到长轮询，但我可以确定移动浏览器是否支持它？我找到了一个在线井字游戏演示，但这在我的手机上不起作用。

谢谢你的帮助...

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:48:09.423

您的意思是在浏览器中还是本机应用程序可以做到？

如果浏览器支持所需的传输规范，长轮询是最低公分母，那么它应该可以工作。它最终“只是”HTTP。我可以肯定地确认它可以在带有 Chrome 的 Android 中运行。

原生应用程序也差不多。如果他们有 HTTP 支持，他们应该能够使用 SignalR。有一些 SignalR 客户端的 diff 实现。移动平台已经存在。

# vba - 使用 VBA 在 Excel 中将单元格的值/格式转换为 HTML 字符串

> ID：12924294
> 
> 赞同：2
> 
> 时间：2012-10-16T22:16:01.993
> 
> 标签：vba, excel

我现在在多个应用程序中都遇到了这个问题，我想知道是否有人提出了比我更有效的解决方案。本质上，我的目标是将单元格中的内容转换为 HTML 字符串以包含其所有格式。到目前为止，我的解决方法是遍历字符串中的每个字符以确定字体大小、粗细和样式，但是，当一次转换大量数据时，这可能会非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:26:00.407

依次遍历每个字符将非常缓慢，但仅在极端情况下才需要。我已经使用以下方法非常成功地解决了同样的问题。

对于每个相关属性（粗体、斜体等），我构建了一个数组，用于存储该属性值的每次更改的位置。然后在生成 HTML 时，我可以吐出所有文本，直到下一次更改（在任何属性中）。在不经常更改的地方，这显然更快。

现在，要到达每个属性的更改位置，我首先测试是否实际上有*任何*更改，这很容易 - 例如，如果所有文本都是粗体，Font.Bold 将返回 true，如果全部为 false非粗体，如果同时有粗体和非粗体部分，则为 null （或其他一些值 - 我不记得了）。

所以，如果值根本没有变化，我们已经完成了。如果值发生变化，那么我将文本二进制细分为两半并重新开始。再一次，我可能会发现一半都是一样的，而另一半包含变化，所以我像以前一样对下半部分进行另一个细分，以此类推。

由于很少有细胞倾向于有很多变化，而许多细胞根本没有，这最终会非常有效。或者至少比逐字符方法更有效。

# c# - 类CSS3的盒子阴影实现/算法

> ID：12924296
> 
> 赞同：4
> 
> 时间：2012-10-16T22:16:12.260
> 
> 标签：c#, .net, gdi+, dropshadow

我正在寻找或尝试实现一种算法来绘制框阴影（如在 CSS 3 规范中），它接受以下参数：

*   水平偏移
*   垂直偏移
*   插图
*   传播
*   模糊
*   颜色
*   （可选：不透明度）。

从哪儿开始。

我一直在寻找 Firefox / Chrome 源代码，看看我是否可以从那里提取一个实现，没有这样的运气！

我研究了线性渐变算法，用一个盒子来绘制它们，这种方法很有效，除了圆角矩形它会在阴影中留下空像素，大概是由于边缘的半径。

我正在使用 GDI+ 在 .NET 中执行此操作。我的目标不是为图像创建阴影。我已经看过这方面的文章。我想为使用 GDI+ 绘制的形状创建阴影。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T21:05:29.407

我为您编写了一个 DropShadowPanel，它处理其中的控件并根据控件标签的要求添加阴影（外部或内部）。

正如您在图像控件中看到的那样，按照定义获得它们的阴影：

标签：

文本框：**DropShadow:5,5,5,10,#000000,noinset**

日历：**DropShadow:10,10,80,30,#0000FF,noinset**

图片框左上角：**DropShadow:-50,20,50,10,#888888,noinset**

图片框左下角：**DropShadow:10,10,20,20,#442200,inset**

图片右下角：**DropShadow:0,0,50,50,#442200,noinset**

![在此处输入图像描述](../Images/44e180f05bae3e5bb5eb4df4dec656a8.png)

这是面板的代码：（它在绘制到控制 gdi 对象之前使用中间绘图到图像中，以不使表单爬行 - 这实际上工作得非常快）

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication4
{
    public class DropShadowPanel : Panel
    {
        protected override void OnControlAdded(ControlEventArgs e)
        {
            e.Control.Paint += new PaintEventHandler(Control_Paint);
            base.OnControlAdded(e);
        }

    void Control_Paint(object sender, PaintEventArgs e)
    {
        CheckDrawInnerShadow(sender as Control, e.Graphics);
    }

    private void CheckDrawInnerShadow(Control sender, Graphics g)
    {
        var dropShadowStruct = GetDropShadowStruct(sender);

        if (dropShadowStruct == null || !dropShadowStruct.Inset)
        {
            return;
        }

        DrawInsetShadow(sender as Control, g);

    }

    protected override void  OnControlRemoved(ControlEventArgs e)
    {
        e.Control.Paint -= new PaintEventHandler(Control_Paint);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        DrawShadow(Controls.OfType<Control>().Where(c => c.Tag != null && c.Tag.ToString().StartsWith("DropShadow")), e.Graphics);
    }

    void DrawInsetShadow(Control control, Graphics g)
    {
        var dropShadowStruct = GetDropShadowStruct(control);

        var rInner = new Rectangle(Point.Empty, control.Size);

        var img = new Bitmap(rInner.Width, rInner.Height, g);
        var g2 = Graphics.FromImage(img);

        g2.CompositingMode = CompositingMode.SourceCopy;
        g2.FillRectangle(new SolidBrush(dropShadowStruct.Color), 0, 0, control.Width, control.Height);

        rInner.Offset(dropShadowStruct.HShadow, dropShadowStruct.VShadow);
        rInner.Inflate(dropShadowStruct.Blur, dropShadowStruct.Blur);
        rInner.Inflate(-dropShadowStruct.Spread, -dropShadowStruct.Spread);

        double blurSize = dropShadowStruct.Blur;
        double blurStartSize = blurSize;

        do
        {
            var transparency = blurSize/blurStartSize;
            var color = Color.FromArgb(((int)(255 * (transparency * transparency))), dropShadowStruct.Color);               
            rInner.Inflate(-1,-1);
            DrawRoundedRectangle(g2, rInner, (int)blurSize, Pens.Transparent, color);
            blurSize--;
        } while (blurSize > 0);

        g.DrawImage(img, 0, 0);
        g.Flush();

        g2.Dispose();
        img.Dispose();
    }

    void DrawShadow(IEnumerable<Control> controls, Graphics g)
    {
        foreach (var control in controls)
        {
            var dropShadowStruct = GetDropShadowStruct(control);

            if (dropShadowStruct.Inset)
            {
                continue; // must be handled by the control itself
            }

            DrawOutsetShadow(g, dropShadowStruct, control);
        }
    }

    // drawing the loop on an image because of speed
    private void DrawOutsetShadow(Graphics g, dynamic dropShadowStruct, Control control)
    {
        var rOuter = control.Bounds;
        var rInner = control.Bounds;
        rInner.Offset(dropShadowStruct.HShadow, dropShadowStruct.VShadow);
        rInner.Inflate(-dropShadowStruct.Blur, -dropShadowStruct.Blur);
        rOuter.Inflate(dropShadowStruct.Spread, dropShadowStruct.Spread);
        rOuter.Offset(dropShadowStruct.HShadow, dropShadowStruct.VShadow);
        var originalOuter = rOuter;

        var img = new Bitmap(originalOuter.Width, originalOuter.Height, g);
        var g2 = Graphics.FromImage(img);

        var currentBlur = 0;

        do
        {
            var transparency = (rOuter.Height - rInner.Height)/(double) (dropShadowStruct.Blur*2 + dropShadowStruct.Spread*2);
            var color = Color.FromArgb(((int)(255 * (transparency * transparency))), dropShadowStruct.Color);
            var rOutput = rInner;
            rOutput.Offset(-originalOuter.Left, -originalOuter.Top);
            DrawRoundedRectangle(g2, rOutput, currentBlur, Pens.Transparent, color);
            rInner.Inflate(1, 1);
            currentBlur = (int) ((double) dropShadowStruct.Blur*(1 - (transparency*transparency)));
        } while (rOuter.Contains(rInner));

        g2.Flush();
        g2.Dispose();

        g.DrawImage(img, originalOuter);

        img.Dispose();
    }

    private static dynamic GetDropShadowStruct(Control control)
    {
        if (control.Tag == null || !(control.Tag is string) || !control.Tag.ToString().StartsWith("DropShadow"))
            return null;

        string[] dropShadowParams = control.Tag.ToString().Split(':')[1].Split(',');
        var dropShadowStruct = new
                                {
                                    HShadow = Convert.ToInt32(dropShadowParams[0]),
                                    VShadow = Convert.ToInt32(dropShadowParams[1]),
                                    Blur = Convert.ToInt32(dropShadowParams[2]),
                                    Spread = Convert.ToInt32(dropShadowParams[3]),
                                    Color = ColorTranslator.FromHtml(dropShadowParams[4]),
                                    Inset = dropShadowParams[5].ToLowerInvariant() == "inset"
                                };
        return dropShadowStruct;
    }

    private void DrawRoundedRectangle(Graphics gfx, Rectangle bounds, int cornerRadius, Pen drawPen, Color fillColor)
    {
        int strokeOffset = Convert.ToInt32(Math.Ceiling(drawPen.Width));
        bounds = Rectangle.Inflate(bounds, -strokeOffset, -strokeOffset);

        var gfxPath = new GraphicsPath();
        if (cornerRadius > 0)
        {
            gfxPath.AddArc(bounds.X, bounds.Y, cornerRadius, cornerRadius, 180, 90);
            gfxPath.AddArc(bounds.X + bounds.Width - cornerRadius, bounds.Y, cornerRadius, cornerRadius, 270, 90);
            gfxPath.AddArc(bounds.X + bounds.Width - cornerRadius, bounds.Y + bounds.Height - cornerRadius, cornerRadius,
                           cornerRadius, 0, 90);
            gfxPath.AddArc(bounds.X, bounds.Y + bounds.Height - cornerRadius, cornerRadius, cornerRadius, 90, 90);
        }
        else
        {
            gfxPath.AddRectangle(bounds);
        }
        gfxPath.CloseAllFigures();

        gfx.FillPath(new SolidBrush(fillColor), gfxPath);
        if (drawPen != Pens.Transparent)
        {
            var pen = new Pen(drawPen.Color);
            pen.EndCap = pen.StartCap = LineCap.Round;
            gfx.DrawPath(pen, gfxPath);
        }
    }
    }
} 
```

代码编写很快，没有太多审查，因此可能存在错误，特别是如果您在控件上设置了 wring 标签）。

PS。您可能会注意到内部阴影不适用于某些控件。这是因为它们是 Windows 系统控件的包装器。小组无法自行克服这一点，但您可以在这里进行：http: [//www.codeproject.com/Articles/4548/Generating-missing-Paint-event-for-TreeView-and-Li](http://www.codeproject.com/Articles/4548/Generating-missing-Paint-event-for-TreeView-and-Li)

# php - Left Join 只返回一行

> ID：12924299
> 
> 赞同：3
> 
> 时间：2012-10-16T22:16:19.280
> 
> 标签：php, mysql, sql, count, left-join

我正在尝试加入两个表。我想要表中的所有列`product_category`（现在总共有 6 个）并计算`products_has_product_category`表中每个类别中的产品数量 CatCount。我的查询结果是第一个类别的 1 行，总计数为 68，当我正在查找每个类别计数的 6 行时。

```
<?php
          $result = mysql_query("
                        SELECT a.*, COUNT(b.category_id) AS CatCount
                        FROM `product_category` a
                        LEFT JOIN `products_has_product_category` b
                        ON a.product_category_id = b.category_id
                    ");
          while($row = mysql_fetch_array($result)) {

              echo '
              <li  class="ui-shadow" data-count-theme="d">
              <a href="' . $row['product_category_ref_page'] . '.php" data-icon="arrow-r" data-iconpos="right">' . $row['product_category_name'] . '</a><span class="ui-li-count">' . $row['CatCount'] . '</span></li>';
          }

        ?> 
```

我已经为此工作了几个小时，并且非常感谢任何关于我做错了什么的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:58:22.013

在没有`GROUP BY`子句的情况下，`COUNT()`聚合只能返回一行，包含该子句过滤后的表的总数`WHERE`。我怀疑你的意思`GROUP BY b.category_id`是`LEFT JOIN`反对子查询：

```
SELECT
  a.*,
  catcount
FROM
  product_category a
  LEFT JOIN (
    SELECT category_id, COUNT(*)  AS catcount
    FROM products_as_product_category 
    GROUP BY category_id
  ) subcount ON a.product_category_id = subcount.category_id 
```

`GROUP BY`这是因为 MySQL 对子句的内容和存在很宽容，所以您的查询首先在语法上是成功的。由于缺少`GROUP BY`. 根据您的表的内容`product_category`，MySQL 可能允许您在没有连接子查询的情况下执行上述操作，而是`product_category`在`GROUP BY`子句中包含正确的列，但在不知道该表的内容的情况下我不能确定，并且上述方法是标准的，并且可以跨其他 RDBMS 移植，而无需依赖 MySQL 的宽大处理。

最后一点，虽然我已经在上面做了，但我*从不*建议`SELECT *`在`JOIN`查询中做。连接表之间的公共列名需要别名以在 PHP API 中进行区分，从而引起混淆。始终最好明确说明您在列表中实际需要的`SELECT`列。

# jquery - Ruby on Rails 3.2.8 和 jQuery：空白的 javascript 函数体？

> ID：12924302
> 
> 赞同：0
> 
> 时间：2012-10-16T22:16:32.123
> 
> 标签：jquery, ruby-on-rails

在这里开发我的第一个 Rails 应用程序。试图让 jQuery 在我的视图中工作，据我所知，它应该简单地与我当前版本的 Rails 3.2.8 一起“开箱即用”。

这是我得到的：

*   一个名为*register#index*的视图（带有一个名为“register”的控制器）：

    ```
    <head>
      <%= stylesheet_link_tag    "application", controller.controller_name %>
      <%= javascript_include_tag "application", controller.controller_name %>
    </head> 
    ```

*   此视图正在加载两个 JS 文件：*application.js*和*register.js*

    *应用程序.js*：

    ```
    //= require jquery
    //= require jquery_ujs
    //= require twitter/bootstrap 
    ```

    *注册.js*：

    ```
    $(document).ready(function(){
    alert("Hello, jQuery!");
    }); 
    ```

当我通过浏览器加载页面时，我可以看到包含的 jQuery.js 文件，并且我的*register.js 已*加载，现在已转换为：

```
(function() {

}).call(this); 
```

呼叫丢失（并且`alert()`不会触发）。为什么这个是空白的？这是我的 gem 的问题，还是我的 jQuery 语法的问题？

一些额外的事情值得注意：

*   Gemfile 包括`jquery-rails`，我已经运行`bundle install`了`rails g jquery:install`
*   即使我输入了 jQuery 以外的 jQuery `alert()`，函数体仍然显示为空白。
*   我已经在每次测试之间清除了我的缓存。
*   浏览器 (Chrome) 没有报告 JavaScript 错误
*   此代码或多或少直接从 jQuery 教程中复制/粘贴。

**编辑**：添加了我的 javascript 标签如何包含在页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:47:29.573

现在您只加载特定于每个控制器的 .js 文件。尝试更改您`head`以一次加载所有 .js 和 .css 文件，看看是否有帮助：

**应用程序.html.erb**

```
<head>
  <%= stylesheet_link_tag "application-all", :media => "all" %>
  <%= javascript_include_tag "application" %>
</head> 
```

您还需要更改应用程序 .js 以包含所有 .js 文件，如下所示：

**应用程序.js**

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

如果这不起作用，请尝试将您的 javascript 从 .js 文件中移到您的视图中，以确保您正确安装了 jQuery。你会这样做：

```
<body>
  <script type="text/javascript">
    $(document).ready(function(){
      alert("Hello, jQuery!");
    });
  </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:58:23.010

弄清楚了。

因此，即使 jQuery 被加载到我的*application.js*文件中，它也不在*register.js*文件使用的范围内（显然是并行加载的，可能是由于我在我的 .js 文件中引用它的方式`javascript_include_tag`。）

解决方案是确保 jQuery 在该额外*register.js*文件的范围内，方法是在加载 jQuery的*register.js*开头添加一个清单注释：

新修改的*register.js*文件：

```
//= require jquery
//= require jquery_ujs

$(document).ready(function(){

    alert('Hello, jQuery!');

}); 
```

**注意**：

碰巧我也在使用*twitter-bootstrap-rails*，它显然在其包中包含 jQuery。当我使用`//= require jquery`上面的包含时，虽然它有效，但它在浏览器中引发了错误：

```
Uncaught typeerror Object#<object> has no method 'popover' 
```

为避免此错误，我包含了 twitter 引导参考并省略了其他 jQuery 参考。我的*register.js*文件结束时：

```
//= require twitter/bootstrap

$(document).ready(function(){

    alert('Hello, jQuery!');

}); 
```

希望这对以后遇到类似问题的人有所帮助！

*   戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T21:02:27.377

请试试这个：

```
$(document).ready(function(){
   alert("Hello, jQuery!");
}); 
```

在 application.js 中使用此脚本。如果您收到警报，则表示您的 register.js 文件未正确包含。

# c++ - libmarkdown2（折扣）线程安全使用？

> ID：12924304
> 
> 赞同：0
> 
> 时间：2012-10-16T22:17:18.053
> 
> 标签：c++, c, linux, markdown, discount

我编写了一个 C++ 函数，用于将 markdown 格式的字符串转换为 html 格式的字符串，在 linux 上包装 C 库 libmarkdown2（折扣）：

```
string markdown2html(const string& markdown)
{
    auto m = mkd_string(&markdown[0], markdown.size(), 0);

    mkd_compile(m, 0);

    char* text;
    int len = mkd_document(m, &text);

    string html(text, text+len);

    mkd_cleanup(m);

    return html;
} 
```

这是线程安全的吗？也就是说，我可以安全地从不同的线程上下文并行多次调用这个函数吗？折扣降价句柄是否共享任何可能阻止这种情况的全局状态？我需要做任何特殊的每进程或每线程初始化来准备这种用法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:34:10.000

据我所知，在 Discount 中唯一可能不能重入的就是`mkd_initialize()`函数，尽管我在 2.1.{mumble} 中做了一个小的重新设计，试图保持全局变量的静态。

# actionscript-3 - air 项目中的 RSS 阅读器问题

> ID：12924308
> 
> 赞同：0
> 
> 时间：2012-10-16T22:17:41.080
> 
> 标签：actionscript-3, air, rss-reader

我正在尝试构建一个简单的 adobe air 应用程序来读取 rss 提要。

我成功阅读了 rss 提要，但我正在尝试阅读特定的提要（由我的学校提供​​）。当我从有效的 rss 阅读器更改 url 时，我收到 HTTP 请求错误：

> HTTP 请求错误" faultCode="Server.Error.Request" faultDetail="Error: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: app:/url_req " 错误 ID = 2032]。网址：url_req"]

我尝试了许多不同的方法来解决这个问题，但每次我都没有快乐......

HttpService 声明如下：

```
<s:HTTPService id="lorenz" url="url_req" useProxy="false" /> 
```

其中 url_req 是带有 url 的变量（我不能提供它来保护我的学者数据）。

我确实注意到，当在 Interned Explorer 中输入 url 时，它得到了一个有效的答案（firefox 和 chrome 给出了 500 错误）。

我不是 rss 专家，但我希望有人可以帮助我阅读此提要。我从通过 IE 获得的提要中加入了标题，希望这会有所帮助

```
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:cf="http://www.microsoft.com/schemas/rss/core/2005">
<channel xmlns:cfi="http://www.microsoft.com/schemas/rss/core/2005/internal" cfi:lastdownloaderror="None"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:51:41.270

我发现了问题：Flex（或 flash builder）似乎不能很好地处理安全链接......

> 默认情况下，通过 HTTP 等不安全协议提供的 SWF 文件无法访问通过安全 HTTPS 协议提供的其他文档，即使这些文档来自同一个域也是如此。（[adobe livedocs](http://livedocs.adobe.com/flex/3/html/help.html?content=security2_15.html)）

所以我不得不想出一个解决方法：我创建了一个 php 文件，它读取安全内容并通过一个简单的 http 协议传递它

编码：

```
$url="https:mySecuredUrl.com";
$str = file_get_contents($url);
echo $str; 
```

现在我要做的就是从 php 文件中读取我的提要。

# c# - C#中的访问对象

> ID：12924310
> 
> 赞同：-4
> 
> 时间：2012-10-16T22:17:44.170
> 
> 标签：c#, class, object

我有一个类代理，Process Track Manager。

我向 Proxy 的构造函数发送了一个 Process 类的实例。进程类有一个列表 As

```
public List<TrackManager> l = new List<TrackManager>(); 
```

我将 2 个跟踪管理器实例添加到列表中。

从另一个类调用 UpdateClient，我如何访问列表中 TrackManager 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:34:32.910

You could first try to implement a method from your first class, for example:

```
//Class Example
    public void UpdateClient(int n){
l[n].myMethod();
} 
```

Then in the class you want to instance your object you could do this: (Asuming you have an object "Example" built in your constructor, or somewhere before):

```
public void RandomMethod()
{
//code...
    ex.updateClient(n);
//Being ex an instance of the class Example
} 
```

# gnupg - 在电子邮件签名中报告什么？GnuPG 密钥是否足够？

> ID：12924311
> 
> 赞同：5
> 
> 时间：2012-10-16T22:17:46.840
> 
> 标签：gnupg

我想告诉我的电子邮件的收件人我使用 GnuPG。为此，我只需在电子邮件签名中的地址下方添加一行“GnuPG 密钥 0x14102F..”。但是，我经常看到人们也给指纹。这是一个好主意吗？我看不出任何理由。如果收件人有我的密钥 ID，他可以去密钥服务器，下载我的公钥，并使用它来验证我的签名和/或加密消息。那么为什么需要指纹呢？我想知道什么是“好习惯”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:22:34.113

实际上，我发现只提供指纹是所需的方法，请参阅[http://lists.gnupg.org/pipermail/gnupg-users/2009-January/035204.html](http://lists.gnupg.org/pipermail/gnupg-users/2009-January/035204.html)它还包含密钥 ID，因此信息不会也必须提供。密钥ID不唯一的问题在多个地方提出，例如[http://www.asheesh.org/note/debian/short-key-ids-are-bad-news.html](http://www.asheesh.org/note/debian/short-key-ids-are-bad-news.html)指纹确实也不是独特的，但不太可能不是。

# java - 如何将 IPentahoResultSet 转换为 JSON 对象

> ID：12924313
> 
> 赞同：1
> 
> 时间：2012-10-16T22:18:13.107
> 
> 标签：java, json, pentaho, mondrian

我正在编写 java 代码，试图将 IPentahoResultSet 转换为 JSON，以便可以使用 apache commons httpclient 将其发送到服务器。我找不到将这个 pentaho 结果集转换为 JSON 的任何方法。任何帮助将不胜感激。我试过这段代码来序列化它，但它不起作用。我认为它是为了序列化类而不是结果集。

```
import flexjson.JSONSerializer;
import org.pentaho.commons.connection.marshal.MarshallableResultSet;
.
.
.
IPentahoResultSet data;
//data will contain result of executing and MDX against Mondrian
MarshallableResultSet result = new MarshallableResultSet();
result.setResultSet(data);
JSONSerializer serializer = new JSONSerializer(); 
String json = serializer.deepSerialize( result ); 
```

# php - 通过 htaccess 将 PNG 解析为 PHP 仅适用于本地服务器，但不适用于 Web 服务器

> ID：12924314
> 
> 赞同：2
> 
> 时间：2012-10-16T22:18:13.750
> 
> 标签：php, .htaccess, parsing, png, image

我在 PHP 中创建了一个动态 PNG 图片。为了使用 PNG 扩展，我创建了一个包含以下内容的 .htaccess-File：

```
AddType application/x-httpd-php .png 
```

在我的本地 XAMPP 服务器上，一切正常，但在将文件上传到网络服务器后，它就不再工作了。当我访问该文件时，会显示该文件的 PHP 代码。

这些是来自两台服务器的 2 个不同的答案：

**本地服务器：**

```
HTTP/1.1 200 OK
Date: Tue, 16 Oct 2012 21:51:58 GMT
Server: Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
Last-Modified: Sat, 07 Feb 2009 11:47:04 GMT
Etag: "9000000024598-1e66-46252b23c9e00"
Accept-Ranges: bytes
Content-Length: 7782
Keep-Alive: timeout=5, max=99
Connection: Keep-Alive
Content-Type: image/x-icon 
```

**网络服务器：**

```
HTTP/1.1 200 OK
Date: Tue, 16 Oct 2012 21:55:17 GMT
Server: Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r
Last-Modified: Tue, 16 Oct 2012 21:21:56 GMT
Etag: "db0f1b0-afc-4cc33be6befa5"
Accept-Ranges: bytes
Content-Length: 2812
Keep-Alive: timeout=3, max=100
Connection: Keep-Alive
Content-Type: application/x-httpd-php 
```

所以不知何故该文件没有被解析。我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:23:03.433

我认为您最好将 a`.htaccess`与 RewriteEngine 一起使用，如下所示：

```
RewriteEngine On
RewriteBase /directory/to/dynamic_image
RewriteRule ^logo\.png$ logo.php 
```

或者对于所有 .php 文件：

```
RewriteEngine On
RewriteBase /directory/to/dynamic_image
RewriteRule ^(.+)\.png$ $1.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:29:09.667

在您的 php 文件中将标题设置为 png 图像（在任何输出到页面之前）：

```
<?php
header('Content-Type: image/png');
// image generating code here.......
?> 
```

这消除了对 .htaccess 条目的需要

# php - ZipArchive::close 返回 false

> ID：12924318
> 
> 赞同：2
> 
> 时间：2012-10-16T22:18:20.060
> 
> 标签：php, zip

您好我正在尝试创建一个新的 zip 文件，我已经重新编译了启用 ZIP 的 PHP，这是我的代码

```
 if($_SERVER['REQUEST_METHOD'] == "POST"){ 
          $zip = new ZipArchive;     
          if($zip->open("/home/user1joe/public_html/upload/test.zip",ZIPARCHIVE::CREATE)!= true)  {
                 echo "error file did not up upload";
                 exit(0);
          }
          foreach ($_FILES["images"]["error"] as $key => $error) 
                  if ($error == UPLOAD_ERR_OK) {
                        $temp_name = $_FILES["images"]["tmp_name"][$key];
                        $new_name  = $_FILES['images']['name'][$key];
                        var_dump($temp_name);
                        var_dump($new_name); 

                        if(file_exists($temp_name)){
                              $zip->addFile($temp_name,$new_name);
                              move_uploaded_file($temp_name, "upload/".$new_name);
                        } else
                              echo "error file does not exist"; 

                        echo "numfiles: " . $zip->numFiles . "\n";
                        echo "status:" . $zip->status . "\n";
                  }
          $res = $zip->close();
          var_dump($res);
          } 
```

$zip->close() 返回 false 并且没有创建 zip。

*   我没有遇到任何错误
*   $zip->numFiles 显示存档中有文件
*   我要创建 zip 的文件夹具有可写权限

我有点迷失了我可以测试的其他东西，任何想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:18:40.293

zip->close() 方法进行一些处理（实际压缩，或者只是获取/写入文件属性），这需要添加到存档的文件存在。但是，您正在使用 move_uploaded_file() 调用从原始位置删除输入文件。

# assembly - 使用 UEFI 编写操作系统

> ID：12924319
> 
> 赞同：20
> 
> 时间：2012-10-16T22:18:20.970
> 
> 标签：assembly, cpu-architecture, osdev, efi, uefi

由于学校的原因，我最近没有太多编码，但我决定我想再次开始从事 OS 开发工作。然而，最近我听说 EFI 可以替代 BIOS。我想为使用 EFI 而不是 BIOS 的平台开发操作系统。我很难弄清楚从哪里开始。谁能指出我正确的方向？也许解释一下 EFI 对操作系统开发意味着什么，也许告诉我我可以使用哪些测试环境（最好是虚拟的）。坦率地说，我不太确定 EFI 到底是什么。我还应该花时间研究 ARM 组装吗？我知道 x86 Assembly，但我觉得它也已经过时了。我真的很迷茫，我很想听听你的意见。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-17T05:17:03.667

EFI 是 UEFI 的前身，这是人们实际使用的东西，尽管他们有时仍将其称为 EFI。您可以在[uefi.org](http://www.uefi.org/home/)获得相关规范。

UEFI 规范定义了**引导加载程序**可能需要知道的所有内容。PI 规范为芯片供应商定义了接口，用于在行业中实现其代码的可移植性。因此，您会听说诸如 Win8 之类的操作系统需要符合特定版本的 UEFI 规范（例如 2.3.1c）才能使某些功能（例如安全启动）正常工作。所有这一切都表明，EFI 并没有完全取代 BIOS，而是成为 BIOS 必须遵守以支持某些操作系统的标准。

开始的地方（在获得规范副本之后）是[SourceForge 上的 TianoCore 项目](http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=Welcome)。其中一个项目是[OVMF](http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=OVMF)，它是 UEFI 的虚拟机目标。您可能还想查看在 Windows 下运行命令提示符的 NT32 目标。当您想要设计一个位于 UEFI 接口之上的应用程序（如引导加载程序）时，这些工具非常有用。

至于学习汇编，我不建议你从那里开始。要知道的东西太多了，我们创建 UEFI 的部分原因是为了让新程序员可以使用 C 而不是 ASM。在 UEFI 中有几个地方我们使用 ASM，但是构建系统会处理拼接的细节，而且您通常不需要对处理器状态进行棘手的控制，也不需要通过编写ASM。您这样做的唯一其他原因是大小，并且由于 BIOS 的其余部分将在 C 中，除非您在 ASM 中重写整个内容，否则它有点违背目的，没有人会这样做。专注于学习规范以及如何使用它们来编写自己的 UEFI 应用程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-26T14:43:46.580

这个问题的答案较晚，但如果您同时还没有发现它们，我可以添加以下几点：

> 或许可以解释一下 EFI 对操作系统开发的意义

其实，不多。好吧，也许有一点。好吧，让我们解释一下。UEFI 为预引导阶段提供固件环境。它还为操作系统提供了一些运行时服务，但是，预计操作系统，而不是 UEFI 固件，最终将驱动系统 - 这些服务允许您执行各种与引导配置相关的活动 -[示例](http://wiki.phoenix.com/wiki/index.php/EFI_RUNTIME_SERVICES)。

好处是，如果您准备使用符合[多重引导 2](https://en.wikipedia.org/wiki/Multiboot_Specification)的引导加载程序，您实际上不需要了解有关 UEFI 的任何信息 - 引导加载程序将根据多重引导规范加载您，然后`ExitBootServices()`在 UEFI 术语中调用它会破坏固件环境。

可以生成一个具有 EFI 存根的 Linux 内核，因此可以“不使用”引导加载程序进行引导 -[这个博客向您展示了如何使用](http://blog.realcomputerguy.com/2012/05/efi-stub-booting-without-bootloader.html). 您可以为您的内核执行此操作 - 您只需要生成一个与固件位数匹配的 PE/COFF 内核。

> 也许告诉我我可以使用哪些测试环境（最好是虚拟的）

如果您负担得起[VMWare Workstation](https://www.vmware.com/products/workstation/)，这将极大地帮助您。除了包含 gdb 存根以便您可以调试任何部分，您还可以编辑虚拟机定义文件 (*.vmx) 以包含

```
firmware="efi" 
```

瞧，VMWare 将启动一个完全正常工作的 UEFI 环境。适用于 Linux 和 Windows。

互联网上的各种帖子都提到了 QEMU 设置，当然还有 VirtualBox。我从来没有亲自在 VirtualBox EFI 平台上成功启动过任何现有系统，也没有尝试过 QEMU，尽管我相信它和其他各种模拟器可能都可以工作。

> 我还应该花时间研究 ARM 组装吗？

这取决于你的目标。关于汇编的问题，我想你应该知道它来写一个操作系统。我认为您编写哪个平台并不重要 - 事实上，我认为为多个平台编写将使您更加欣赏机器之间的差异。

但是，一般来说，我不会尝试用汇编语言编写整个操作系统。这样做的主要原因是时间——我认为这是一个爱好项目，因此为您的大量努力获得一些奖励将比尝试调试程序集（尤其是您不熟悉的程序集）更有趣。随着您变得更加熟练，您总是可以用汇编程序替换选择位，特别是当您有足够的其余代码来测试它时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T01:04:45.793

您可以使用 qemu 进行一些 uefi 应用程序开发/测试。看到[这个](http://al.robotfuzz.com/playing-with-uefi-secure-boot-part-1-ovmf/)了解更多信息

除此之外，我强烈建议您熟悉 uefi 并尝试在 uefi 模型中进行一些驱动程序/应用程序开发。您可以尝试从加载程序运行网络堆栈、网络引导基础设施、可能设置一个更整洁的预操作系统 GUI。这不仅能让你擅长 uefi，还能帮助你了解平台特定的细节。

这就是我的说法，但上面的评论很好记住。

# html - Chrome 在鼠标悬停时呈现垂直线

> ID：12924321
> 
> 赞同：0
> 
> 时间：2012-10-16T22:18:27.570
> 
> 标签：html, css, google-chrome, css-transitions

[示例网站](http://www.patrickcason.com)

因此，当您将鼠标悬停在项目上时，您应该会看到 rgba 背景淡入，并在现有图像上显示一些文本。我无法在 Safari 或 Firefox 中复制错误。事实上，我不能每次都重复相同的，我也可以说刷新页面也不一定能解决问题。

这是我的代码中的问题，还是我们特别遇到了 Webkit 和/或 Chrome 的问题？

**更新 1**

最初我认为这是 RGBA 背景的问题，所以我尝试使用 a`background: black;`来查看它是否改变了任何东西。这不起作用，因为鼠标悬停时该线仍然存在。

**更新 2**

由于我一直使用的显示器，我认为这是一个问题。我正在使用带有视网膜显示屏的新 Macbook Pro。这仍然可能是问题的根源，但我不相信它是。我还没有在另一台不是视网膜显示器的设备上进行自我测试，但有人告诉我这些线条仍然很普遍。

**此图像将有助于：**

![这是一个有趣的图像描述！](../Images/43a984f4db9412ded199e4017b400f96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:37:55.290

我无法在 Chrome 中重现*le 问题*，但从您的屏幕截图来看，您似乎已放大。有时浏览器会四舍五入百分比并且您最终可能会丢失像素，最好让它*坚持*每个边缘而不是指定高度和宽度：

```
.projectItem {
  overflow: hidden;
 }

 .projectItem a {
   display: block;
   position: absolute;
   opacity: 0;
   width: 102%;
   height: 102%;
   background: black;
   color: #F6F8EE;
   background: rgba(0, 0, 0, 0.85);
   border-radius: 5px;
   margin: -1% 0 0 -1%;
 } 
```

另外，我不确定您为什么显示为`table`，但这可能会使问题更加复杂。将其更改为`block`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:05:39.523

你的盒子模型有些东西我不喜欢这种技术。我使用过类似的悬停/淡入淡出脚本，但从未使用负边距（因为它会提升盒子模型），或者使顶层大于底部。

我发现了一些有助于它为我渲染得更好的东西（我没有看到线条，但我看到的是圆角的白色角落突出或父角落中的黑色凿点）。无论如何，这里有几件事：

1.  Nix -1% 0 0 -1% 边距（制作 102% 宽，然后使用 -1% 边距对我来说似乎是 100%，但依赖于所有浏览器呈现相同的数学）。
2.  将父子设置为相同的W x H（200px x 410px）
3.  将孩子的半径减小 1 px 为我隐藏了角落的奇怪之处（再次，我认为这是渲染引擎的东西 FWIW）；虽然没有设置它应该可以完成这项工作。
4.  我还添加`.projectItem a:hover`到`.projectItem a`的 CSS 声明中，以允许仅在`.projectItem a:hover`.

这个小提琴分别添加/删除了上述所有功能的翻转效果：http: [//jsfiddle.net/hd4QM/](http://jsfiddle.net/hd4QM/)

HTH。

# c - 使用套接字 API 在 C 中转发 UDP 数据包

> ID：12924322
> 
> 赞同：1
> 
> 时间：2012-10-16T22:18:29.613
> 
> 标签：c, sockets, udp, ip

我正在使用套接字 API 在 C 中编写一个内容过滤器，它将拦截 DNS 请求，并且仅在允许域时才返回响应。描述这个的伪代码是：

1.  将所有 DNS 查询重定向到正在侦听 UDP 端口 X 的内容过滤程序。
2.  内容过滤程序提取正在查询的域并确定是否允许。
3.  如果允许，则内容过滤程序将原始 DNS 请求包转发给原始目标 DNS 服务器，同时保持原始源和 IP+端口，以便 DNS 服务器可以将回复直接发送回客户端。
4.  如果不允许该域，则不发送任何回复。

我目前有程序在 UDP 端口 X 上侦听，但问题是我无法访问 IP 标头，因此无法在保留原始标头的同时将 DNS 请求简单地转发到原始服务器。

我尝试过使用`socket(AF_INET, SOCK_RAW, IPPROTO_UDP)`，但它没有绑定到端口 X（可以理解），并且没有收到任何流量。

在 UDP 端口 X 上侦听，同时仍然能够访问传入数据包的 IP 标头的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:27:34.777

我认为 UDP 套接字上的 recvfrom 应该给你正确的源地址。您可能仍然需要一个原始套接字来转发消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:11:38.907

基于 SOCK_RAW 的套接字的功能取决于您所在的平台。通常，当您想要访问完整的 IP 数据报信息时，我建议使用[伯克利包过滤器](http://en.wikipedia.org/wiki/Berkeley_Packet_Filter)来挖掘寻址到感兴趣的 UDP 端口的数据链路层帧。

# swt - Eclipse RCP 中的 swt 导入失败

> ID：12924325
> 
> 赞同：1
> 
> 时间：2012-10-16T22:18:36.477
> 
> 标签：swt, eclipse-rcp

我似乎在这里兜圈子。

我有一系列相关的项目正在运行，但有些事情导致它无法运行。症状是任何使用从 org.eclipse.swt 包导入的源文件都无法编译，红线位于导入语句下方。

一些项目对 org.eclipse.swt jar 有插件依赖，但其他项目没有。如果我尝试添加这样的依赖项，org.eclipse.swt 不会作为包提供，但只能从 Manifest 编辑器中的依赖项选项卡添加依赖于平台的包，例如 org.eclipse.win32.win32.x86 . 通过右键单击包资源管理器中的源文件访问的构建路径也显示了依赖关系。

如果我将 org.eclipse.win32.win32.x86 jar 显式添加到构建路径，大多数项目都会构建，但仍有一些错误（其中的违规行是 SWTApplicationComposite window = new SWTApplicationComposite(parent); 和阻碍是对父级的 - 作为一个无法识别的类 Composite，尽管它已被声明为没有问题！）

我曾尝试删除依赖项，然后将其添加为新的依赖项，但编译器仍然无法找到它。

关于我可能错过的任何线索（我正在这样做作为 RCP 开发的一部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:27:16.550

我认为设置的目标平台无法识别平台特定的 jar（win 64 位或 32 位）。

1.  创建目标配置文件并在编辑器中选择win32作为配置
2.  您会在目标配置文件编辑器的右上角看到“设置为目标平台”链接。
3.  单击该链接。它将您的目标平台设置为特定于 win32（识别所有 swt win32 捆绑包）

# jquery - 如何在没有触发器的情况下延迟功能工作（准备好文档）

> ID：12924328
> 
> 赞同：1
> 
> 时间：2012-10-16T22:18:46.167
> 
> 标签：jquery, function, delay

我有这个自动启动幻灯片的功能，我需要延迟它直到服务器执行查询和回显数据

```
 $(document).ready(function(){

        $('#camera_wrap_2').camera({
            height: '380px',
            loader: 'bar',
            pagination: false,
            thumbnails: true
        });

    }); 
```

我试过这个但没有用

```
 $(document).ready(function(){
        setTimeout(camera,2000);

    });
    $('#camera_wrap_2').camera({
            height: '380px',
            loader: 'bar',
            pagination: false,
            thumbnails: true
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:22:08.110

如果与

> 服务器执行查询

你的意思是一些ajax调用然后你需要使用回调并在那里调用你的代码。

否则，在超时示例中，您需要创建一个名为的函数`camera`，因为这是`setTimeout`预期的

```
$(document).ready(function(){
    setTimeout(camera,2000);
});
function camera(){
    $('#camera_wrap_2').camera({
            height: '380px',
            loader: 'bar',
            pagination: false,
            thumbnails: true
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:21:37.507

如果您尝试做的是`.camera`在延迟 2 秒后运行该方法，您可以通过将方法放入`setTimeout()`将在规定的延迟后调用的函数中来执行此操作：

```
$(document).ready(function(){
    setTimeout(function() {
        $('#camera_wrap_2').camera({
            height: '380px',
            loader: 'bar',
            pagination: false,
            thumbnails: true
        });
    },2000);
}); 
```

通常像这样的硬编码等待时间是错误的解决方案。正确的解决方案通常是等待特定事件发生并为该事件设置一个监听器。

我无法从您的问题中看出（因为您没有提供有关您正在等待的服务器响应的信息），但您在这里想要的事件可能是来自对服务器的 ajax 调用的响应。如果是这种情况，那么您可以安装一个回调以完成该 ajax 调用并`.camera()`在该回调中运行该方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T22:24:24.683

您还可以使用 delay() jQuery 函数

```
$(document).ready(function(){

    $('#camera_wrap_2').delay(2000).camera({
        height: '380px',
        loader: 'bar',
        pagination: false,
        thumbnails: true
    });

}); 
```

# c# - C# SOAP Web 服务 服务器违反了协议。Section=ResponseStatusLine

> ID：12924331
> 
> 赞同：0
> 
> 时间：2012-10-16T22:18:57.453
> 
> 标签：c#, web-services, soap, system.net.webexception

我有一个调用 Web 服务的应用程序......我收到一个错误，我只是把我留在头上的几根头发拉出来，也许有人可以帮忙。

这是代码：

```
Service_RetrieveIntervalDataserviceagent srv = new Service_RetrieveIntervalDataserviceagent();
srv.Credentials = new NetworkCredential(UserName, Password, Domain);
MDMIntervalDataInput dataInput = new MDMIntervalDataInput();
 string Url = srv.Url;
DeviceList deviceList = new DeviceList();

deviceList.Type = DeviceListType.M;
deviceList.DeviceId = "2862,2876,2877".Split(',');

//Setup dataInput
dataInput.ApplicationName = "TestApp";
dataInput.StartDate = DateTime.Now.AddDays(-3).ToString("MM/dd/yyyy");
dataInput.EndDate = DateTime.Now.AddDays(-3).ToString("MM/dd/yyyy");
dataInput.OutputMode = MDMIntervalDataInputOutputMode.Wire;
dataInput.DeviceList = deviceList;
srv.RetrieveIntervalData_V10(dataInput); 
```

我不断收到错误：

> 服务器违反了协议。Section=ResponseStatusLine

我确实注意到 URL 从*HTTPS*更改为*HTTP*这可能是问题吗？

我还尝试将以下内容添加到我的配置文件中，但仍然无法正常工作：

```
<system.net> 
  <settings> 
    <httpWebRequest useUnsafeHeaderParsing="true" /> 
  </settings> 
</system.net> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:17:28.173

这是我修复它的方法...

我注意到 URL 正在从 HTTPS 更改为 HTTP...HTTP URL 是罪魁祸首，因此我将其更新为手动设置 URL，并且它起作用了。

# jenkins - Jenkins 并行触发和等待

> ID：12924336
> 
> 赞同：6
> 
> 时间：2012-10-16T22:19:25.203
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins

我有 4 个作业需要按以下顺序执行

```
JOB A 
 |------> JOB B
 |------> JOB C 
            |------> JOB D 
```

在上述

1.  A 应该同时触发 B 和 C，C 反过来触发 D。
2.  A 应该保持工作运行，直到他们三个都完成。

我尝试了以下插件，但无法实现我想要的

*   加入插件
*   多任务插件
*   多配置项目
*   参数化触发器插件

*有没有我没有尝试过的插件可以帮助我解决这个问题。或者这可以通过不同的方式实现。请指教。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T11:09:29.843

将**DSL 脚本**与**Build Flow**插件一起使用。

尝试执行此示例：

```
 build("job A")

   parallel
   (
      {build("job B")}
      {build("job C")}
   )

   build("job D") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T00:49:17.410

我正在尝试构建相同的系统。我正在构建一个认证管道，我需要在其中运行打包/构建/部署作业和相应的测试作业。当所有这些都成功时，我想汇总测试结果并触发可以进行自动化 maven 发布的发布作业。

我选择了构建管道插件来实现系统的可视化。最初尝试使用带有阻塞构建的参数化触发器插件。我无法以这种方式设置归档工件/指纹和下游构建关系，因为**归档工件仅在 postbuild 中有效**。然后我将参数化触发器放在构建后活动中。通过这种方式，我能够设置下游构建、指纹识别、汇总测试结果，但构建失败并没有冒泡到上游作业链，上游作业是非阻塞的

我终于能够使用这些插件来实现这一点-

*   构建管道
*   多任务插件
*   指纹插件
*   复制工件插件
*   加入插件

我正在使用詹金斯 1.514

系统看起来像这样

触发作业 --> 构建（和部署）作业 (1..n) ---> 测试作业 (1..n)

触发作业 -

*   创建为 MultiJob 并在 shell exec 中创建指纹文件

    回声`date +%s`>指纹.txt

诀窍是**文件需要在构建期间存档**，以执行此脚本-

```
ARCHIVEDIR=$JENKINS_HOME/jobs/$JOB_NAME/builds/$BUILD_ID/archive
mkdir $ARCHIVEDIR
cp fingerprint.txt $ARCHIVEDIR 
```

*   创建由构建/部署作业组成的多作业阶段。
*   构建/部署作业本身就是一个多作业
*   按照与上述指纹识别相关的相同步骤创建构建/部署作业。
*   从上游作业复制指纹.txt 工件
*   在触发测试作业的部署作业中设置 MultiJob 阶段
*   创建一个新的指纹文件并强制将其存档，类似于上述步骤
*   在最终测试作业中收集 Junit 结果。

在 trigger Job 中，使用 Join Plugin 通过选择“Run Post Build Actions at join”来执行 Release Job，并仅在 Trigger Job 的稳定构建上执行发布项目。这样，所有步骤都显示在 Build Pipeline 视图中，并且 Trigger 作业正在阻止所有下游构建完成，并将其状态设置为最差的下游构建，以便为发布作业提供决策点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:26:19.100

试试[Locks and Latches 插件](https://wiki.jenkins-ci.org/display/JENKINS/Locks+and+Latches+plugin)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-12T18:23:52.267

多任务插件

如果您想停止下游/上游工作链定义的混乱。或者，当您想要添加将按顺序或并行执行的完整 Jenkins 作业层次结构时。将上下文添加到您的构建流，实现从 MultiJob 到其所有阶段和作业的参数继承。阶段是顺序的，而每个阶段内的作业是并行的。

[https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T03:13:27.603

这可能不是最佳方式，但它应该有效。使用参数化触发器插件。对于作业 A，添加一个构建步骤（不是构建后操作）以在同一构建步骤中同时启动作业 B 和 C，并阻止它们完成。在 Job C 中，添加一个构建步骤（不是 Post Build Action），它启动 Job D 并阻塞直到它完成。这应该让 Job A 一直运行。

但这并不是最理想的：作业 A 处于打开状态，等待 B 和 C 完成。然后 C 保持打开直到 D 完成。

作业 A 需要在这段时间内保持运行是否有某种原因？另一种可能性是在 B 和 C 启动后让 Job A 终止，但在 Job A 上进行升级，它将在 Job B、C 和 D 成功后执行您的最终操作。

# asp.net - 将自定义类添加到 webmatrix 中的项目

> ID：12924337
> 
> 赞同：2
> 
> 时间：2012-10-16T22:19:24.917
> 
> 标签：asp.net, webmatrix

我是 asp.net 的新手，我正在尝试将自定义类添加到我的项目中。

我创建了一个名为 Test.cs 的文件

```
public class Test
{
  public string sayHello()
  {
    return "Hello World";
  }
} 
```

在我的 Default.cshtml 中：

```
Test example = new Test();
@example.sayHello(); 
```

但是我在尝试加载测试类时遇到错误...我需要包含“使用”的内容？我需要用 Visual Studio 编译来创建自定义类吗？还是我想念什么？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:39:46.210

您必须在站点的根目录中创建一个名为“App_Code”的新目录并将您的 Test.cs 移动到其中。

然后，这个 Default.cshtml 工作：

```
@{
    Test example = new Test(); 
    var message = example.sayHello(); 

}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <p>@message</p>
    </body>
</html> 
```

# php - 如果满足某个条件，PHP“foreach”值的增量

> ID：12924338
> 
> 赞同：-2
> 
> 时间：2012-10-16T22:19:27.740
> 
> 标签：php, foreach

我有这个循环：

```
<?php foreach ($option['option_value'] as $option_value) { ?>

<?php if ($option_value['quantity'] <= 0) { ?>

What code should be put here?

<?php } ?>

<?php } ?>

<?php echo $i; ?> 
```

假设循环是 10 轮。所以，当**$option_value['quantity'] <= 0**我需要一些变量来计算它，如果在这 10 轮中满足**$option_value['quantity'] <= 0**的条件 3 次，我想要的变量将其计数为 3，并在最后**回显。**因此，任何帮助将不胜感激。我已经尝试过使用**i++**等，但我不知道如何定义它以使其工作并计算是否满足条件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:30:55.610

您想`$i`在 foreach 循环范围之外进行初始化，然后在每次条件为真时递增它：

```
<?php
$i = 0;
foreach ($option['option_value'] as $option_value) {
    if ($option_value['quantity'] <= 0) {
        $i++;
    }
} 
echo $i;
?> 
```

# vhdl - 我的 VHDL 代码的输出变得依赖于重置

> ID：12924339
> 
> 赞同：0
> 
> 时间：2012-10-16T22:19:28.040
> 
> 标签：vhdl

又是我！首先我想说我几天前学习了VHDL，而且我还是个新手，所以我容易犯愚蠢的错误。任何建议都会很棒。我为可用作内存控制器的模块编写了 VHDL 代码。

这是我的代码：

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_arith.all;
use IEEE.std_logic_unsigned.all;
use ieee.numeric_std.all;
entity memory_controller is
port(clk: in std_logic;
     reset: in std_logic;
     bus_id: in std_logic_vector(7 downto 0);
     read_write, burst: in std_logic;
     ready: in std_logic;
     oe, we: out std_logic;
     addr_1, addr_2: out std_logic_vector(7 downto 0)
     );
end memory_controller;
architecture behavioral of memory_controller is
    type statetype is (idle, decision, wr, rd1, rd2, rd3, rd4);
    signal present_state, next_state : statetype;
    signal addr_int : integer range 0 to (2**addr_1'length)-1;
    begin
    Synch_reset: process(clk)
    begin
        if (rising_edge(clk)) then
            if (reset ='0') then
                present_state <= next_state;  
            else
                present_state <= idle;   
            end if;
        end if;
    end process;  
    decision_logic: process(present_state, read_write, ready, burst)
    begin
        case present_state is
            when idle => 
                oe <= '0'; we <= '0'; addr_int <= 0;
                addr_1 <= std_logic_vector(to_unsigned(addr_int, addr_1'length));
                addr_2 <= std_logic_vector(to_unsigned(addr_int, addr_2'length));
                if(bus_id = "11110011") then
                    next_state <= decision;
                else
                    next_state <= idle;
                end if;
            when decision =>
                if (read_write = '1') then 
                    next_state <= rd1;
                else 
                    next_state <= wr;
                end if;
            when wr =>
                we <= '1';
                if (ready = '1') then 
                    next_state <= idle;
                else
                    next_state <= wr;
                end if;
            when rd1 =>
                oe <= '1';
                if(ready = '0') then
                    next_state <= rd1;
                else
                    if(burst = '0') then
                        next_state <= idle;
                    else 
                        next_state <= rd2;
                        addr_int <= addr_int + 1;
                addr_1 <= std_logic_vector(to_unsigned(addr_int, addr_1'length));
                addr_2 <= std_logic_vector(to_unsigned(addr_int, addr_2'length));
                    end if;
                end if;
            when rd2 =>
                oe <= '1';
                if(ready = '1') then
                    next_state <= rd3;
                    addr_int <= addr_int + 1;
                addr_1 <= std_logic_vector(to_unsigned(addr_int, addr_1'length));
                addr_2 <= std_logic_vector(to_unsigned(addr_int, addr_2'length));
                else
                    next_state <= rd2;
                end if;
            when rd3 =>
                oe <= '1';
                if(ready = '1') then 
                    next_state <= rd4;
                    addr_int <= addr_int + 1;
                addr_1 <= std_logic_vector(to_unsigned(addr_int, addr_1'length));
                addr_2 <= std_logic_vector(to_unsigned(addr_int, addr_2'length));
                else
                    next_state <= rd3;
                end if;
            when rd4 =>
                oe <= '1';
                if(ready = '1') then 
                    next_state <= idle;
                else 
                    next_state <= rd4;
                end if;
         end case;
     end process;
end behavioral; 
```

这是我的测试台：

```
Library IEEE;
USE IEEE.std_logic_1164.all;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
entity memory_controller_tb is
end memory_controller_tb;
architecture test of memory_controller_tb is
component memory_controller
port(clk: in std_logic;
     reset: in std_logic;
     bus_id: in std_logic_vector(7 downto 0);
     read_write, burst: in std_logic;
     ready: in std_logic;
     oe, we: out std_logic;
     addr_1, addr_2: out std_logic_vector(7 downto 0)
     );
end component;
signal clk: std_logic;
signal reset: std_logic;
signal read_write, burst, oe, we: std_logic;
signal addr_1, addr_2: std_logic_vector(7 downto 0);
signal ready: std_logic;
signal bus_id: std_logic_vector(7 downto 0);
signal StopClock : boolean := FALSE;
begin
UUT :memory_controller
port map( clk => clk,
          reset => reset,
          bus_id => bus_id,
          read_write => read_write,
          burst => burst,
          ready => ready,
          oe => oe,
          we => we,
          addr_1 => addr_1,
          addr_2 => addr_2);
clk_process: process
begin
while not StopClock loop
clk <= '0';
wait for 5 ns;
clk <= '1';
wait for 5 ns;
end loop;
end process clk_process;
stim: process is
begin
reset <= '1', '0' after 50 ns;
bus_id <= "11110011";
wait for 5 ns;
read_write <= '0';
wait for 5 ns;
ready <= '1';
bus_id <= "11110011";
wait for 5 ns;
read_write <= '1';
assert (ready <='1' and burst <= '1')
report "Illegal state"
severity error;
assert (ready <= '1' and burst <='0')
report "Illegal state"
severity error;
wait for 5 ns;
ready <= '0';
wait for 5 ns;
burst <= '0';
wait for 5 ns;
ready <= '1';
wait for 5 ns;
burst <= '1';
wait for 5 ns;
ready <= '0';
wait for 5 ns;
ready <= '1';
wait for 5 ns;
ready <= '1';
end process;
end test;

configuration CFG_memory_controller of memory_controller_tb is
    for test
        for UUT : memory_controller
        end for;
    end for;
end; 
```

当burst被断言时，它应该在ready断言时通过read1 read2 read3和read4（如当burst = 1时，它应该继续读取2，读取3，如果ready为1，则读取4）并且不能进入空闲状态如果重置在两者之间的任何时间变为 0。但它对我有用。如何更改程序以使其不依赖于重置？

此外，当地址重置为返回空闲状态时，地址不会重置为 0。当我尝试更改代码时，它说我试图从多个地方断言地址。

另外，我认为我的测试台写作技巧很糟糕，是否有任何规则或指导方针可以遵循，还是你必须为此培养一种直觉？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:51:02.337

您有一个组合循环：您`addr_int`在组合过程中读取和写入信号，这会导致各种问题。要么创建一个信号`next_addr_int`并将其分配到时钟进程中，要么将所有内容放在一个时钟进程中。

代码的其他问题：

*   `std_logic_arith`并`std_logic_unsigned`已弃用。改为使用`ieee.numeric_std`。
*   像这样的转换使您的代码难以理解：`addr_1 <= std_logic_vector(to_unsigned(addr_int, addr_1'length));`使用`unsigned`而`std_logic_vector`不是代替。
*   在您的重置子句中，人们会假设重置为低电平有效，因为您检查了`reset = '0'`. 相反，检查`reset = '1'`并反转`if`和`else`部分。我猜这些工具不会介意你的编码风格，但它会让人类感到困惑。

# google-app-engine - 谷歌应用引擎登陆页面上的 Facebook 点赞按钮（打开图形标签）

> ID：12924340
> 
> 赞同：1
> 
> 时间：2012-10-16T22:19:31.770
> 
> 标签：google-app-engine, facebook-graph-api, facebook-like

我正在使用 GAE 作为我的应用程序的登录页面（不久之后将在 GAE 上开发）
我正在尝试添加社交按钮（twitter、G+、facebook 之类）
结果对于 FB 之类的，我需要输入打开的图形标签在 html-head
[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

令我惊讶的是，我的 GAE 模板在 GAE 自动生成的 html 文档中运行。
[http://developers.facebook.com/tools/debug/og/object?q=reciprocity-ring-001.appspot.com](http://developers.facebook.com/tools/debug/og/object?q=reciprocity-ring-001.appspot.com)
所以 FB like 按钮尝试访问错误 html-head 中的打开图形标签，即它看着 GAE 自动生成的头部。

1/ 如何编辑 GAE http-head

2/如何在不编辑上述文件的情况下解决此问题？

伊曼纽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:41:32.103

Facebook为元标记（Open Graph 协议的一部分）[抓取 Open Graph Urls ，因此您的](http://developers.facebook.com/docs/opengraphprotocol/)[页面内容必须通过简单的 HTTP GET 可用](http://facebook.stackoverflow.com/questions/8896773/opengraph-on-ajax-based-website)，无需 javascript。此外，不同的 Open Graph 对象需要具有不同的 Url。了解如何在单页应用程序（例如 GWT 应用程序）中处理此问题：[Facebook Open Graph Single Page Apps](https://stackoverflow.com/questions/9725252/facebook-open-graph-single-page-apps)

使用 GWT，您可以通过 url 参数拥有具有不同 url 的单页应用程序： `reciprocity-ring-001.appspot.com` `reciprocity-ring-001.appspot.com?object=1` `reciprocity-ring-001.appspot.com?object=2` 您还可以使用 Fragment Identifier（又名 GWT 历史令牌）：`reciprocity-ring-001.appspot.com#object2`这都指向同一个 GWT 应用程序，参数仅用于生成正确的 FM 元标记。

然后，您必须有一个 servlet（或 jsp 或其他模板技术）来生成带有所需 FM 元标记的主机页面。这必须在服务器端完成，以便即使通过 HTTP GET 请求页面时也存在 FM 元标记。

完成此操作后，您可以在 GWT 应用程序中放置 FB Like 按钮，并适当地`href`指向这些 Url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:12:18.440

事实证明我正在使用带有域掩码的godaddy。域掩码创建一个框架，在其中打开我的隐藏域。

至少我发现信息和框架是在godaddy级别完成的。不确定我可以随意编辑用于域掩码的 html 包装器....

# django - 为什么使用 django-south？

> ID：12924343
> 
> 赞同：1
> 
> 时间：2012-10-16T22:19:42.483
> 
> 标签：django, django-south

据我了解，django-south 非常类似于数据库模式的版本控制。但是为什么在开发时它比 python manage.py syncdb 更好呢？我可以理解您是否已经真正启动并且不能只删除数据库，但是当您可以删除数据库时，我看不出使用它的意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:26:52.040

它的目的是在生产环境中迁移模式。如果您正在运行一个从用户那里收集大量数据的生产应用程序，并且您想要扩展一个表，那么不得不删除数据库并丢失所有数据真的很不幸。

它在开发过程中增加的好处是消除了每次更改模型时必须浪费的时间删除数据库、重新同步数据库和创建新的超级管理员。

# asp.net - 当在gridview上按下删除按钮时抛出必须声明标量变量“@Content”

> ID：12924350
> 
> 赞同：0
> 
> 时间：2012-10-16T22:20:25.680
> 
> 标签：asp.net, gridview, sqldatasource, formview

我正在尝试在网格视图中启用删除。当您运行此代码并按下删除按钮时，您会收到错误必须声明标量变量“@Content”。

**代码**

```
 <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" />
        <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
        <asp:BoundField DataField="Content" HeaderText="Content" SortExpression="Content" />
    </Columns>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" 
    runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM [ImportantNews]" 
     DeleteCommand="DELETE FROM [ImportantNews] WHERE [Content] = @Content AND [Title] = @Title">
    <DeleteParameters>
        <asp:Parameter Name="Title" Type="string"/>
        <asp:Parameter Name="Content" Type="string"/>
    </DeleteParameters>
  </asp:SqlDataSource> 
```

请注意我使用的是 Asp.net 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:01:15.557

你可以试试这个

```
<asp:GridView ID="GridView2" runat="server" DataKeyNames="Content,Title"........ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:29:21.960

您需要在后面的代码中提供参数值。

```
SqlDataSource1.DeleteParameters.Add("Content", "ABC");
SqlDataSource1.DeleteParameters.Add("Title", "XYZ"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T07:46:49.190

我发现了问题。

Yoy需要将gridview控件上的DataKeyNames属性设置为GradeID

[检查答案 1](http://go4answers.webhost4life.com/Example/gridview-control-delete-error-must-110142.aspx)

# css - 在 IE 中查看站点会导致 Quirks 模式，使其无法使用

> ID：12924353
> 
> 赞同：1
> 
> 时间：2012-10-16T22:20:53.193
> 
> 标签：css, quirks-mode

我试图寻找几个小时来解决这个问题，但没有任何效果。我正在尝试构建一个菜单栏，但它在 IE 中无法正常工作（我在 IE7 和 8 中进行了测试。）一切都以怪癖模式打开 IE。我已经查看了造成这种情况的原因，并尝试了我现在无法理解的一切。我通过验证运行了 CSS 和 HTML 文件，并且都以零问题返回。我听说了文档类型之前隐藏的 BOM 字符和空白，并通过检测器运行了这两个文件，两者都恢复正常。我很抱歉，但我不像这里的一些人那么先进，并提前感谢您的帮助。任何关于可能导致这种情况的教育将不胜感激。我无法发布 URL，因为这是一个 Intranet 站点，所以我只会发布我正在使用的代码。

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" href="menu.css" type="text/css" media="screen" />

<title>Mega Drop Down Menu</title>
<!--[if IE 6]>
<style>
body {behavior: url("csshover3.htc");}
#menu li .drop {background:url("img/drop.gif") no-repeat right 8px; 
</style>
<![endif]-->

</head>

<body>

<ul id="menu">

    <li><a href="#" class="drop">Home</a>

        <div class="dropdown_2columns">

            <div class="col_2">
                <h2>Welcome !</h2>
            </div>

            <div class="col_2">
                <p>Hi and welcome here ! This is a showcase of the possibilities of this awesome Mega Drop Down Menu.</p>             
                <p>This item comes with a large range of prepared typographic stylings such as headings, lists, etc.</p>             
            </div>

            <div class="col_2">
                <h2>Cross Browser Support</h2>
            </div>

            <div class="col_1">
                <img src="img/browsers.png" width="125" height="48" alt="" />
            </div>

            <div class="col_1">
                <p>This mega menu has been tested in all major browsers.</p>
            </div>

        </div>

    </li>

    <li><a href="#" class="drop">5 Columns</a>

        <div class="dropdown_5columns">

            <div class="col_5">
                <h2>This is an example of a large container with 5 columns</h2>
            </div>

            <div class="col_1">
                <p class="black_box">This is a dark grey box text. Fusce in metus at enim porta lacinia vitae a arcu. Sed sed lacus nulla mollis porta quis.</p>
            </div>

            <div class="col_1">
                <p>Phasellus vitae sapien ac leo mollis porta quis sit amet nisi. Mauris hendrerit, metus cursus accumsan tincidunt.</p>
            </div>

            <div class="col_1">
                <p class="italic">This is a sample of an italic text. Consequat scelerisque. Fusce sed lectus at arcu mollis accumsan at nec nisi porta quis sit amet.</p>
            </div>

            <div class="col_1">
                <p>Curabitur euismod gravida ante nec commodo. Nunc dolor nulla, semper in ultricies vitae, vulputate porttitor neque.</p>
            </div>

            <div class="col_1">
                <p class="strong">This is a sample of a bold text. Aliquam sodales nisi nec felis hendrerit ac eleifend lectus feugiat scelerisque.</p>
            </div>

            <div class="col_5">
                <h2>Here is some content with side images</h2>
            </div>

            <div class="col_3">

                <img src="img/01.jpg" width="70" height="70" class="img_left imgshadow" alt="" />
                <p>Maecenas eget eros lorem, nec pellentesque lacus. Aenean dui orci, rhoncus sit amet tristique eu, tristique sed odio. Praesent ut interdum elit. Sed in sem mauris. Aenean a commodo mi. Praesent augue lacus.<a href="#">Read more...</a></p>

                <img src="img/02.jpg" width="70" height="70" class="img_left imgshadow" alt="" />
                <p>Aliquam elementum felis quis felis consequat scelerisque. Fusce sed lectus at arcu mollis accumsan at nec nisi. Aliquam pretium mollis fringilla. Nunc in leo urna, eget varius metus. Aliquam sodales nisi.<a href="#">Read more...</a></p>

            </div>

            <div class="col_2">

                <p class="black_box">This is a black box, you can use it to highligh some content. Sed sed lacus nulla, et lacinia risus. Phasellus vitae sapien ac leo mollis porta quis sit amet nisi. Mauris hendrerit, metus cursus accumsan tincidunt.Quisque vestibulum nisi non nunc blandit placerat. Mauris facilisis, risus ut lobortis posuere, diam lacus congue lorem, ut condimentum ligula est vel orci. Donec interdum lacus at velit varius gravida. Nulla ipsum risus.</p>

            </div>

        </div>

    </li>

    <li><a href="#" class="drop">4 Columns</a>

        <div class="dropdown_4columns">

            <div class="col_4">
                <h2>This is a heading title</h2>
            </div>

            <div class="col_1">

                <h3>Some Links</h3>
                <ul>
                    <li><a href="#">ThemeForest</a></li>
                    <li><a href="#">GraphicRiver</a></li>
                    <li><a href="#">ActiveDen</a></li>
                    <li><a href="#">VideoHive</a></li>
                    <li><a href="#">3DOcean</a></li>
                </ul>   

            </div>

            <div class="col_1">

                <h3>Useful Links</h3>
                <ul>
                    <li><a href="#">NetTuts</a></li>
                    <li><a href="#">VectorTuts</a></li>
                    <li><a href="#">PsdTuts</a></li>
                    <li><a href="#">PhotoTuts</a></li>
                    <li><a href="#">ActiveTuts</a></li>
                </ul>   

            </div>

            <div class="col_1">

                <h3>Other Stuff</h3>
                <ul>
                    <li><a href="#">FreelanceSwitch</a></li>
                    <li><a href="#">Creattica</a></li>
                    <li><a href="#">WorkAwesome</a></li>
                    <li><a href="#">Mac Apps</a></li>
                    <li><a href="#">Web Apps</a></li>
                </ul>   

            </div>

            <div class="col_1">

                <h3>Misc</h3>
                <ul>
                    <li><a href="#">Design</a></li>
                    <li><a href="#">Logo</a></li>
                    <li><a href="#">Flash</a></li>
                    <li><a href="#">Illustration</a></li>
                    <li><a href="#">More...</a></li>
                </ul>   

            </div>

        </div>

    </li>

    <li class="menu_right"><a href="#" class="drop">1 Column</a>

        <div class="dropdown_1column align_right">

                <div class="col_1">

                    <ul class="simple">
                        <li><a href="#">FreelanceSwitch</a></li>
                        <li><a href="#">Creattica</a></li>
                        <li><a href="#">WorkAwesome</a></li>
                        <li><a href="#">Mac Apps</a></li>
                        <li><a href="#">Web Apps</a></li>
                        <li><a href="#">NetTuts</a></li>
                        <li><a href="#">VectorTuts</a></li>
                        <li><a href="#">PsdTuts</a></li>
                        <li><a href="#">PhotoTuts</a></li>
                        <li><a href="#">ActiveTuts</a></li>
                        <li><a href="#">Design</a></li>
                        <li><a href="#">Logo</a></li>
                        <li><a href="#">Flash</a></li>
                        <li><a href="#">Illustration</a></li>
                        <li><a href="#">More...</a></li>
                    </ul>   

                </div>

        </div>

    </li>

    <li class="menu_right"><a href="#" class="drop">3 columns</a>

        <div class="dropdown_3columns align_right">

            <div class="col_3">
                <h2>Lists in Boxes</h2>
            </div>

            <div class="col_1">

                <ul class="greybox">
                    <li><a href="#">FreelanceSwitch</a></li>
                    <li><a href="#">Creattica</a></li>
                    <li><a href="#">WorkAwesome</a></li>
                    <li><a href="#">Mac Apps</a></li>
                    <li><a href="#">Web Apps</a></li>
                </ul>   

            </div>

            <div class="col_1">

                <ul class="greybox">
                    <li><a href="#">ThemeForest</a></li>
                    <li><a href="#">GraphicRiver</a></li>
                    <li><a href="#">ActiveDen</a></li>
                    <li><a href="#">VideoHive</a></li>
                    <li><a href="#">3DOcean</a></li>
                </ul>   

            </div>

            <div class="col_1">

                <ul class="greybox">
                    <li><a href="#">Design</a></li>
                    <li><a href="#">Logo</a></li>
                    <li><a href="#">Flash</a></li>
                    <li><a href="#">Illustration</a></li>
                    <li><a href="#">More...</a></li>
                </ul>   

            </div>

            <div class="col_3">
                <h2>Here are some image examples</h2>
            </div>

            <div class="col_3">
                <img src="img/02.jpg" width="70" height="70" class="img_left imgshadow" alt="" />
                <p>Maecenas eget eros lorem, nec pellentesque lacus. Aenean dui orci, rhoncus sit amet tristique eu, tristique sed odio. Praesent ut interdum elit. Maecenas imperdiet, nibh vitae rutrum vulputate, lorem sem condimentum.<a href="#">Read more...</a></p>

                <img src="img/01.jpg" width="70" height="70" class="img_left imgshadow" alt="" />
                <p>Aliquam elementum felis quis felis consequat scelerisque. Fusce sed lectus at arcu mollis accumsan at nec nisi. Aliquam pretium mollis fringilla. Vestibulum tempor facilisis malesuada. <a href="#">Read more...</a></p>
            </div>

        </div>

    </li>

</ul>

</body>

</html> 
```

这里的 CSS

```
body, ul, li {
    font-size:14px; 
    font-family:Arial, Helvetica, sans-serif;
    line-height:21px;
    text-align:left;
}

#menu {
    list-style:none;
    width:940px;
    margin:30px auto 0px auto;
    height:43px;
    padding:0px 20px 0px 20px;

    /* Rounded Corners */

    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;

    /* Background color and gradients */

    background: #014464;
    background: -moz-linear-gradient(top, #0272a7, #013953);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0272a7), to(#013953));

    /* Borders */

    border: 1px solid #002232;

    -moz-box-shadow:inset 0px 0px 1px #edf9ff;
    -webkit-box-shadow:inset 0px 0px 1px #edf9ff;
    box-shadow:inset 0px 0px 1px #edf9ff;
}

#menu li {
    float:left;
    display:block;
    text-align:center;
    position:relative;
    padding: 4px 10px 4px 10px;
    margin-right:30px;
    margin-top:7px;
    border:none;
}

#menu li:hover {
    border: 1px solid #777777;
    padding: 4px 9px 4px 9px;

    /* Background color and gradients */

    background: #F4F4F4;
    background: -moz-linear-gradient(top, #F4F4F4, #EEEEEE);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F4F4F4), to(#EEEEEE));

    /* Rounded corners */

    -moz-border-radius: 5px 5px 0px 0px;
    -webkit-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
}

#menu li a {
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px; 
    color: #EEEEEE;
    display:block;
    outline:0;
    text-decoration:none;
    text-shadow: 1px 1px 1px #000;
}

#menu li:hover a {
    color:#161616;
    text-shadow: 1px 1px 1px #ffffff;
}
#menu li .drop {
    padding-right:21px;
    background:url("img/drop.png") no-repeat right 8px;
}
#menu li:hover .drop {
    background:url("img/drop.png") no-repeat right 7px;
}

.dropdown_1column, 
.dropdown_2columns, 
.dropdown_3columns, 
.dropdown_4columns,
.dropdown_5columns {
    margin:4px auto;
    float:left;
    position:absolute;
    left:-999em; /* Hides the drop down */
    text-align:left;
    padding:10px 5px 10px 5px;
    border:1px solid #777777;
    border-top:none;

    /* Gradient background */
    background:#F4F4F4;
    background: -moz-linear-gradient(top, #EEEEEE, #BBBBBB);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEEEEE), to(#BBBBBB));

    /* Rounded Corners */
    -moz-border-radius: 0px 5px 5px 5px;
    -webkit-border-radius: 0px 5px 5px 5px;
    border-radius: 0px 5px 5px 5px;
}

.dropdown_1column {width: 140px;}
.dropdown_2columns {width: 280px;}
.dropdown_3columns {width: 420px;}
.dropdown_4columns {width: 560px;}
.dropdown_5columns {width: 700px;}

#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {
    left:-1px;
    top:auto;
}

.col_1,
.col_2,
.col_3,
.col_4,
.col_5 {
    display:inline;
    float: left;
    position: relative;
    margin-left: 5px;
    margin-right: 5px;
}
.col_1 {width:130px;}
.col_2 {width:270px;}
.col_3 {width:410px;}
.col_4 {width:550px;}
.col_5 {width:690px;}

#menu .menu_right {
    float:right;
    margin-right:0px;
}
#menu li .align_right {
    /* Rounded Corners */
    -moz-border-radius: 5px 0px 5px 5px;
    -webkit-border-radius: 5px 0px 5px 5px;
    border-radius: 5px 0px 5px 5px;
}

#menu li:hover .align_right {
    left:auto;
    right:-1px;
    top:auto;
}

#menu p, #menu h2, #menu h3, #menu ul li {
    font-family:Arial, Helvetica, sans-serif;
    line-height:21px;
    font-size:12px;
    text-align:left;
    text-shadow: 1px 1px 1px #FFFFFF;
}
#menu h2 {
    font-size:21px;
    font-weight:400;
    letter-spacing:-1px;
    margin:7px 0 14px 0;
    padding-bottom:14px;
    border-bottom:1px solid #666666;
}
#menu h3 {
    font-size:14px;
    margin:7px 0 14px 0;
    padding-bottom:7px;
    border-bottom:1px solid #888888;
}
#menu p {
    line-height:18px;
    margin:0 0 10px 0;
}

#menu li:hover div a {
    font-size:12px;
    color:#015b86;
}
#menu li:hover div a:hover {
    color:#029feb;
}

.strong {
    font-weight:bold;
}
.italic {
    font-style:italic;
}

.imgshadow { /* Better style on light background */
    background:#FFFFFF;
    padding:4px;
    border:1px solid #777777;
    margin-top:5px;
    -moz-box-shadow:0px 0px 5px #666666;
    -webkit-box-shadow:0px 0px 5px #666666;
    box-shadow:0px 0px 5px #666666;
}
.img_left { /* Image sticks to the left */
    width:auto;
    float:left;
    margin:5px 15px 5px 5px;
}

#menu li .black_box {
    background-color:#333333;
    color: #eeeeee;
    text-shadow: 1px 1px 1px #000;
    padding:4px 6px 4px 6px;

    /* Rounded Corners */
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;

    /* Shadow */
    -webkit-box-shadow:inset 0 0 3px #000000;
    -moz-box-shadow:inset 0 0 3px #000000;
    box-shadow:inset 0 0 3px #000000;
}

#menu li ul {
    list-style:none;
    padding:0;
    margin:0 0 12px 0;
}
#menu li ul li {
    font-size:12px;
    line-height:24px;
    position:relative;
    text-shadow: 1px 1px 1px #ffffff;
    padding:0;
    margin:0;
    float:none;
    text-align:left;
    width:130px;
}
#menu li ul li:hover {
    background:none;
    border:none;
    padding:0;
    margin:0;
}

#menu li .greybox li {
    background:#F4F4F4;
    border:1px solid #bbbbbb;
    margin:0px 0px 4px 0px;
    padding:4px 6px 4px 6px;
    width:116px;

    /* Rounded Corners */
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
}
#menu li .greybox li:hover {
    background:#ffffff;
    border:1px solid #aaaaaa;
    padding:4px 6px 4px 6px;
    margin:0px 0px 4px 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:28:40.913

我管理的一个网站也发生了这种情况，一切都通过了 W3C 的验证，Firefox 的 Web Developer 插件没有报告任何问题，但我们看到 IE 进入了怪癖模式……也就是说，直到我们添加了这个元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# python - 如何在 Linux Ubuntu 12.04 上从 Python 调用脚本文件或可执行文件

> ID：12924354
> 
> 赞同：-5
> 
> 时间：2012-10-16T22:20:54.743
> 
> 标签：python, linux, subprocess

如果我从 Python 解释器或 Python 脚本调用脚本文件，则会收到错误消息`'No such file or directory'`并且 Linux 脚本不会执行。如果我调用纯 Linux 命令，例如 subprocess.call('ls') 它工作正常。

在'C'中，我会使用：system("");

Python中的等价物是什么？

在我的 Python 脚本中，在 Linux 计算机上，我需要调用执行构建的脚本。 `subprocess.call`非常适合 Linux shell 命令，但是`'No such file or directory'`当我调用脚本时我会得到。

这是我调用的 Python 脚本行：

```
 rtn_code = subprocess.call(['~/WindRiver/workspace/XPedite5570_SMP_VIP/build_MM_VxWorks'])

`build_MM_VxWorks` is a Linux script that uses VxWorks development tools to build a VxWorks kernel.

`build_MM_VxWorks` works okay from the Linux command line. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T22:31:33.357

您可能想尝试[pexpect](http://pypi.python.org/pypi/pexpect/)。它在较高级别上模拟 shell 用户输入。它可能有点“hacky”，但是当您需要自动化工作程序时它非常强大。

以下是我如何使用它来读取数据库中的表：

```
import pexpect, getpass

child = pexpect.spawn('mysql -u root -p')
child.expect('Enter password: ')
password = getpass.getpass("Enter Mysql password for user root \n")
child.sendline(password)
child.sendline("use database")

child.expect('Database changed')

child.sendline('SELECT * FROM table;')
child.interact() 
```

如您所见，模仿用户输入非常容易。

# sql - 以不同方式排列 SQL 查询结果

> ID：12924355
> 
> 赞同：0
> 
> 时间：2012-10-16T22:20:59.420
> 
> 标签：sql, sql-server, pivot, sql-server-2012

我正在使用 MS SQL Server 2012 Express

我的查询是：

```
select invTypeMaterials.[typeID], invTypes.[typeName], invTypeMaterials.[quantity] from invTypeMaterials
  inner join invTypes
    on invTypeMaterials.materialTypeID = invTypes.[typeID] 
```

我的结果如下所示：

```
typeID | typeName | quantity
18     | Blah1    | Integer
18     | Blah2    | Integer
...    | ...      | ...
36     | Blah1    | Integer
36     | Blah1    | Integer 
```

我真的希望我的结果看起来像这样：

```
typeID | Blah1   | Blah2   | ... | Blah7
18     | Integer | Integer | ... | Integer
...
36     | Integer | Integer | ... | Integer 
```

如果我在外部解析数据，这将是可能的，但我希望有一些漂亮的 SQL 语句可以轻松轻松地完成这一切。类型只有 Blah1 到 Blah7，类型的所有值都是整数。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:08:09.373

您没有指定您正在使用的 RDBMS。但这基本上是一个`PIVOT`.

MySQL：

如果您使用的是 MySQL，它没有`PIVOT`函数，但可以使用`CASE`语句和聚合函数进行复制。有两种方法可以做到这一点 - 使用硬编码值的静态版本或使用准备好的语句的动态版本。

静态版本 MySQL（参见[SQL fiddle with demo](http://sqlfiddle.com/#!2/4da7f/9)）：

```
select m.typeID,
  sum(case when t.typename = 'type 1' then m.quantity else 0 end) Type1,
  sum(case when t.typename = 'type 2' then m.quantity else 0 end) Type2,
  sum(case when t.typename = 'type 3' then m.quantity else 0 end) Type3
from invTypeMaterials m
inner join invTypes t
  on m.typeID = t.typeID
group by m.TypeId; 
```

动态版本 MySQL（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/4da7f/7)）：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when t.typename = ''',
      t.typename,
      ''' then m.quantity else 0 end) ',
      replace(t.typename, ' ', '')
    )
  ) INTO @sql
from invTypeMaterials m
inner join invTypes t
  on m.typeID = t.typeID;

SET @sql = CONCAT('SELECT m.typeID, ', @sql, ' 
                  from invTypeMaterials m
                  inner join invTypes t
                    on m.typeID = t.typeID
                   GROUP BY m.TypeId');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

SQL Server 有一个`PIVOT`函数，您可以静态或动态地执行此操作。

静态版本 SQL Server（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4da7f/2)）：

```
select typeid,
  isnull([Type 1], 0) type1,
  isnull([Type 2], 0) type2,
  isnull([Type 3], 0) type3
from 
(
  select m.TypeId,
    m.quantity,
    t.typename
  from invTypeMaterials m
  inner join invTypes t
    on m.typeID = t.typeID
) x
pivot
(
  sum(quantity)
  for typename in ([Type 1], [Type 2], [Type 3])
) p 
```

动态版本 SQL Server（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4da7f/4)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsNull as nvarchar(max)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(typename) 
                    from invTypes
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull 
    = STUFF((SELECT distinct ', IsNull(' + QUOTENAME(typename) + ', 0) as '+ replace(typename, ' ', '') 
                    from invTypes
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT typeid, ' + @colsNull + ' from 
             (
                select m.TypeId,
                  m.quantity,
                  t.typename
                from invTypeMaterials m
                inner join invTypes t
                  on m.typeID = t.typeID
            ) x
            pivot 
            (
                sum(quantity)
                for typename in (' + @cols + ')
            ) p '

execute(@query) 
```

# php - ics 没有出现在我的 iPad 的 iCal 中

> ID：12924361
> 
> 赞同：1
> 
> 时间：2012-10-16T22:21:38.273
> 
> 标签：php, ipad, icalendar

我有一个 php 页面，用于测试 iPad 的示例 ics 数据，但是当我在 Safari**中点击“日历”中的“打开”**按钮时，它会触发日历应用程序，但它会打开而没有向我显示任何有关事件的信息。这是我的代码：

```
<?php

$ical = "
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN

BEGIN:VEVENT
DTSTAMP:" . gmdate('Ymd').'T'. gmdate('His') . "Z
DTSTART:" . gmdate('Ymd').'T'. "160000Z
DTEND:" . gmdate('Ymd').'T'. "170000Z
SUMMARY:Paul's Birthday
END:VEVENT

BEGIN:VEVENT
DTSTAMP:" . gmdate('Ymd').'T'. gmdate('His') . "Z
DTSTART:" . gmdate('Ym').'T'. "230000Z
DTEND:" . gmdate('Ymd').'T'. "240000Z
SUMMARY:John's Birthday
END:VEVENT

END:VCALENDAR";

//echo out
header('Content-type: text/calendar; charset=utf-8');
header('Content-Disposition: inline; filename=calendar.ics');
echo $ical;

?> 
```

我究竟做错了什么？

编辑：

这是从 php 生成的示例文件：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN

BEGIN:VEVENT
DTSTAMP:20121017T204856Z
DTSTART:20121017T160000Z
DTEND:20121017T170000Z
SUMMARY:Paul's Birthday
END:VEVENT

BEGIN:VEVENT
DTSTAMP:20121017T204856Z
DTSTART:201210T230000Z
DTEND:20121017T240000Z
SUMMARY:John's Birthday
END:VEVENT

END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:20:18.900

你有一个错字。在您的第二个 VEVENT 上，DTSTART 的那一天不见了。

代替

> gmdate('Ym')

和

> gmdate('Ymd')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:56:02.440

自己修好了。显然 iCal 不喜欢在**BEGIN:VCALENDAR**之前换行。我希望 iCal 去掉那种东西，但显然他们没有，所以如果其他人对 iCal 有问题，请务必检查字符串是否以换行符开头！

# entity-framework - 为什么 EF 代码首先抛出模型支持上下文异常？使用 4.0.3

> ID：12924362
> 
> 赞同：3
> 
> 时间：2012-10-16T22:21:39.080
> 
> 标签：entity-framework, mapping, entity, code-first, dbcontext

继承人例外：

> 自数据库创建以来，支持“ScannerContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

每次我运行我的应用程序时都会得到这个。我无法弄清楚这意味着什么。我认为这意味着某些东西没有正确映射，但我不知道是什么。我正在使用代码优先模型，并且我有一个想要完全自定义映射的现有数据库。现在，我的类中的所有内容都与我的数据库命名相同，以消除可能的原因。

当我尝试`.Add()`将实体添加到上下文时抛出异常。

**实体在数据库中**

![数据库图像](../Images/fa9b7e6ce606a3614e0f3f6eca36a3e9.png)

**我的 DataLayer 中的实体**

```
public class EAsset
{
    public int i_GID { get; set; }
    public EAssetType Type { get; set; }
    public EOrgEnvironment Environment { get; set; }
    public EUser Contact { get; set; }
    public string s_Name { get; set; }
    public string s_Role { get; set; }
    public DateTime d_Added { get; set; }
    public DateTime d_LastUpdated { get; set; }
    public bool b_Retired { get; set; }

    public EAsset()
    {
        Type = new EAssetType();
        Environment = new EOrgEnvironment();
        Contact = new EUser();
        d_Added = DateTime.Now;
        d_LastUpdated = DateTime.Now;
    }
} 
```

**上下文对象**（尝试表映射和键分配）

```
public class ScannerContext : DbContext
{
    public ScannerContext()
        : base("LabDatabase") { }

    public DbSet<EAsset> EAssets { get; set; }
    public DbSet<EAssetType> EAssetTypes { get; set; }
    public DbSet<EOrgEnvironment> EOrgEnvironments { get; set; }
    public DbSet<EUser> EUsers { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<EAsset>().HasKey(k=>k.i_GID).ToTable("t_Assets");
        modelBuilder.Entity<EAssetType>().HasKey(k => k.i_ID).ToTable("t_Asset_Types");
        modelBuilder.Entity<EOrgEnvironment>().HasKey(k => k.i_ID).ToTable("t_Org_Environments");
        modelBuilder.Entity<EUser>().HasKey(k => k.i_ID).ToTable("t_Users");

        base.OnModelCreating(modelBuilder);

    }
} 
```

**该程序**

```
class Program
{
    static void Main(string[] args)
    {
        EAsset Entity = new EAsset { s_Name = "jewri-pc" };
        var sContext = new ScannerContext();
        sContext.EAssets.Add(Entity);
        sContext.SaveChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:25:34.373

对于 EF 运行时版本 4.0.3 / 版本 4.0

```
public class ScannerContext : DbContext
{
    public ScannerContext()
        : base("LabDatabase") { }

    ...

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        Database.SetInitializer<ScannerContext>(null); // <--- This is what i needed

        ...

        base.OnModelCreating(modelBuilder);

    }
} 
```

安装了该代码后，我现在正在寻找与在模型中考虑所有关系相关的错误。FK 约束迫使我添加缺少的关系项。

在这里找到信息。他们稍微解释了重要性。

[自创建数据库以来，支持 <Database> 上下文的模型已更改](https://stackoverflow.com/questions/3600175/the-model-backing-the-database-context-has-changed-since-the-database-was-crea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T06:02:38.797

Enable-Migrations -ContextTypeName EmployeeProject.Models.DepartmentContext

意味着你必须写你的项目名称.Models.Context 名称

它会起作用的。

# actionscript-3 - AS3 - 又一个 TypeError：错误 #1009 无法访问

> ID：12924363
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:21:42.597
> 
> 标签：actionscript-3, flash, audio, typeerror, soundchannel

我正在 AS3 中创建“太空入侵者”游戏。现在一切正常，但不断出现 #1009 错误，我正在查看它很长一段时间，但我只是看不到问题所在。一些额外的眼睛可以帮助我想！

这是调试器所说的：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at testbestandkopie_fla::MainTimeline/winGame()[testbestandkopie_fla.MainTimeline::frame1:352]
at testbestandkopie_fla::MainTimeline/enemyHitTest()[testbestandkopie_fla.MainTimeline::frame1:338]
at testbestandkopie_fla::MainTimeline/onTick()[testbestandkopie_fla.MainTimeline::frame1:117]
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

下面我将粘贴与错误有关的代码：

1：创建 AS 链接名称：

```
//Sound FX-------------------------------------------------------------------------
var startFX:Sound = new startGameSound();
var laserFX:Sound = new laserSound();
var explosionFX:Sound = new explosionSound();
var musicFX:Sound = new backgroundMusic();
var loseFX:Sound = new endGameSound();
var winFX:Sound = new winGameSound();
var SfxTransform = new SoundTransform();
var myChannelMisc:SoundChannel = new SoundChannel();
var myChannelMusic:SoundChannel = new SoundChannel();
var myChannelWin:SoundChannel = new SoundChannel();
var myChannelLose:SoundChannel = new SoundChannel();
//--------------------------------------------------------------------------------- 
```

2：[第 117 行] AS 第 117 行是突出显示的：

```
//Handlers Functions---------------------------------------------------------------
function onTick(e:TimerEvent) { //A continuous run of some functions below.
moveCharacter();
moveEnemyField(); 

playerCollisionDetectWall();
enemyCollisionDetectWall();
enemyCollisionDetectWallBottom();

moveLasers();
enemyHitTest(); <---- line 117
} 
```

3: [第 338 行] 函数enemyHitTest(); winGame() 开始的地方；功能：

```
function enemyHitTest() {
//For each of the three enemys
for (var i:int = 0; i < enemyArray.length; i++) {
    //the each of the six lasers
    for (var j:int = 0; j < 6; j++) {
        //don't consider lasers that aren't in play:
        if (laserArray[j].y > SpelerMC.y) continue;
        if (enemyArray[i].visible &&     enemyArray[i].hitTestObject(laserArray[j])) {
            score += 10;
            myChannelMisc = explosionFX.play();
            SfxTransform.volume = 0.3;
            myChannelMisc.soundTransform = SfxTransform;
            scoreTxt.text = score.toString();
            trace("Invader nummer " + i + " neergeschoten!");
            enemyArray[i].visible = false;
            //Now we remove the laser when hitting.
            laserArray[j].x = j * 70 + 100; 
            laserArray[j].y = 895;
        }
        else if(score == 660) { 
        //If you reach a score of 660 (66 enemy's x 10 = 660) you win the game.
            winGame(); <---- Line 338
        }
    }
}
} 
```

4: [第 352 行] winGame(); 在敌人命中获得 660 分后运行函数。

```
function winGame() {
winScreen.visible = true;
gameTimer.stop();
//Stop the music.
myChannelMusic.stop();
//Start the "You Win" music.
myChannelWin = winFX.play();
SfxTransform.volume = 0.02;
myChannelWin.soundTransform = SfxTransform; <---- line 352
} 
```

如您所见，它通过这些功能运行。我已经检查了我在库中的文件是否有问题，但是 AS Linkage 名称与我在上面定义的 var 完全相同。也许一些额外的眼睛可以看到这里出了什么问题，并解释我为什么..

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:57:55.950

根据[livedocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29)：

**如果您没有声卡或没有可用的声道，**winFX.play()方法可能会返回 null。**一次可用的最大声道数为 32。**

 **检查上述任何一个问题是否适用于您....

* * *

正如马克所说，类**winGameSound**是这里的罪魁祸首。调用**winFX.play()**返回空值，而不是声道。所以你不能对空对象应用声音变换。

目前可以得到的唯一信息是该类继承了 Sound 类并通过 play() 调用返回 null。**

# c - 如何在服务器和客户端之间创建多个 tcp 连接

> ID：12924375
> 
> 赞同：0
> 
> 时间：2012-10-16T22:22:33.107
> 
> 标签：c, linux, sockets, ubuntu

我是 Unix/Linux 网络编程的新手，所以我在下面编写了服务器-客户端程序。在这段代码中，客户端和服务器之间有一个套接字，客户端请求服务器，然后服务器响应 1 到 100 个数字给客户端。所以我的问题是我们如何在不使用线程的情况下使用 3 个套接字（tcp 连接）来完成这个过程？（例如，第一个套接字运行，然后第二个运行，然后第三个运行，然后再次第一次运行。）你有什么建议吗？

客户端.c

```
int main()
{

int sock;
struct sockaddr_in sa;
int ret;
char buf[1024];
int x;

sock = socket (AF_INET, SOCK_STREAM, 0);

bzero (&sa, sizeof(sa));
sa.sin_family = AF_INET;
sa.sin_port = htons(SERVER_PORT);
inet_pton (AF_INET, SERVER_IP, &sa.sin_addr);

ret = connect (sock,
(const struct sockaddr *) &sa,sizeof (sa));

if (ret != 0) {
    printf ("connect failed\n");
    exit (0);
}

x = 0;
while (x != -1) {
    read (sock, buf , sizeof(int));
    x = ntohl(*((int *)buf));
    if (x != -1)
    printf ("int rcvd = %d\n", x);
}

close (sock);

exit (0);

} 
```

服务器.c

```
int main()
{

int list_sock;
int conn_sock;
struct sockaddr_in sa, ca;
socklen_t ca_len;
char buf[1024];
int i;
char ipaddrstr[IPSTRLEN];

list_sock = socket (AF_INET, SOCK_STREAM, 0);

bzero (&sa, sizeof(sa));
sa.sin_family = AF_INET;
sa.sin_addr.s_addr = htonl(INADDR_ANY);
sa.sin_port = htons(SERVER_PORT);
bind (list_sock,(struct sockaddr *) &sa,sizeof(sa));

listen (list_sock, 5);

while (1){

    bzero (&ca, sizeof(ca));
    ca_len = sizeof(ca); // important to initialize
    conn_sock = accept (list_sock,(struct sockaddr *) &ca,&ca_len);

    printf ("connection from: ip=%s port=%d \n",inet_ntop(AF_INET, &(ca.sin_addr),
        ipaddrstr, IPSTRLEN),ntohs(ca.sin_port));

    for (i=0; i<100; ++i){

        *((int *)buf) = htonl(i+20);
        // we using converting to network byte order

        write (conn_sock, buf, sizeof(int));

    }

    * ((int *)buf) = htonl(-1);
    write (conn_sock, buf, sizeof(int));

    close (conn_sock);

    printf ("server closed connection to client\n");

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:28:06.990

也许这不是你想要的，但我认为你可以试试 epoll，有一个简单的例子

```
typedef struct event_loop
{
    int max_event;
    int epfd;
}event_loop;

event_loop* create_event_loop()
{
    event_loop *ep = malloc(sizeof(event_loop));
    ep->max_event = 512;
    ep->epfd = epoll_create(512);
    return ep; 
}
int add_event(event_loop *ep, int fd) 
{
    epoll_event ee; 
    ee.data.fd = fd; 
    ee.event = EPOLLIN | EPOLLPRI;
    epoll_ctl(ep->epfd, EPOLL_CTL_ADD, fd, &ee);
}
void event_main(event_loop *ep, int listenfd)
{
    epoll_event events[512];
    int nfds, i, newfd;
    while(1)
    {   
        if(nfds = epoll_wait(ep->epfd, events, 512, -1) == -1) 
            exit(1);
        for(i = 0; i < nfds; i++)
        {   
            if(events[nfds].data.fd == listenfd)
            {   
                newfd = accept(listenfd, NULL, NULL);
                add_event(ep, newfd);
            }
            else
            {
                //do what you want
            }
        }
    }
} 
```

epoll 是一种高效的解决方案，只需`man epoll`获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:39:56.267

我认为最好看一下优秀的资源[Beej's Guide to Netwokr Programming](http://beej.us/guide/bgnet/)，其中详细介绍了这一点。他还提供了一些很好的示例，您可以将其用作起点，他涵盖了包括 Windows 在内的所有主要平台。

基本上你这样做：

```
socket()
bind()
listen()
accept() 
```

accept() 返回一个连接到唯一客户端的套接字。然后，您将使用 select、poll 或 epoll 来确定这些套接字上何时有数据可用。我建议您可以查看这些 API 的手册页和 Beej 的指南。这是我第一次学习网络编程的地方。

查看您的代码，您的内部循环是错误的。当您接受连接时，您需要将其添加到列表或其他内容中。目前，您覆盖它并松开它。您应该使用 (e)poll 或 select 来告诉您哪个有数据。您可以随时写信给他们中的任何一个。再次，查看 Beej 指南中的示例，它们是最有帮助的。

# php - PHP file_put_contents textarea 问题

> ID：12924378
> 
> 赞同：0
> 
> 时间：2012-10-16T22:23:19.423
> 
> 标签：php, textarea, fopen, fwrite

通过 PHP file_get_contents/file_put_contents 读取/写入时出现问题。基本上我想将文本文件读入文本区域（单击编辑文件按钮）并能够编辑它并提交更改（提交更改按钮）并使用新文件内容重绘文本区域。

它读起来很好。

它删除所有文件的内容，而不是覆盖/更新它，留下一个空白文件。

似乎它无法获取 textarea 内容并将它们作为文件的新内容输入。我知道它是微不足道的，我很想念它。

在 Win Apache 服务器上运行。

代码：

```
<html>
<body>
<form name="form" method="POST">
<input type="submit" name="pickedName" value="Edit File" />&nbsp;
<input name="file_picked" value="1.txt" type="text" id="file_picked" style="width:250px;" />&nbsp;
<input type="submit" name="submitChanges" value="Submit Changes">
</form>

<?php
$file_picked = $_POST['file_picked'];
$edit_field = $_POST['edit_field'];

if (isset($_POST['pickedName'])) {
//get file contents and display in textarea box
$theData = file_get_contents($file_picked);
echo "<textarea name=\"edit_field\" id=\"edit_field\" cols=\"150\" rows=\"30\">";
echo $theData;
echo "</textarea><br />";
}

if (isset($_POST['submitChanges'])) {
//grab new textarea contents and put into file.
$theData = file_put_contents($file_picked, $edit_field);

//redraw textarea with new contents
$theData = file_get_contents($file_picked);
echo "<textarea name=\"edit_field\" id=\"edit_field\" cols=\"150\" rows=\"30\">";
echo $theData;
echo "</textarea><br />";

}
?>
</body>
</html> 
```

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:28:36.443

对文件使用 FILE_APPEND 标志而不是覆盖它

```
file_put_contents($file_picked, $edit_field, FILE_APPEND); 
```

# xpath - 如何拉href链接

> ID：12924380
> 
> 赞同：0
> 
> 时间：2012-10-16T22:23:23.653
> 
> 标签：xpath

我正在尝试从一个正式的页面中提取一个链接，我似乎无法通过简单的谷歌搜索找到...这可能很简单，但 xpath 不是我的专业领域

我正在使用 c# 并尝试提取链接并将其写入控制台以弄清楚如何获取链接

这是我的 C# 代码

```
 var document = webGet.Load("http://classifieds.castanet.net/cat/vehicles/cars/0_-_4_years_old/");
        var browser = document.DocumentNode.SelectSingleNode("//a[starts-with(@href,'/details/')]");
        if (browser != null)
        {
            string htmlbody = browser.OuterHtml;
           Console.WriteLine(htmlbody);

        } 
```

html代码部分是

```
<div class="last">&hellip;</div><a href="/cat/vehicles/cars/0_-_4_years_old/?p=13">13</a><a href="/cat/vehicles/cars/0_-_4_years_old/?p=2">&raquo;</a>
<select name="sortby" class="sortby" onchange="doSort(this);">
    <option value="">Most Recent</option>
    <option value="of" >Oldest First</option>
    <option value="mw" >Most Views</option>
    <option value="lw" >Fewest Views</option>
    <option value="lp" >Lowest Price</option>
    <option value="hp" >Highest Price</option>
</select><div style="clear:both"></div>
</div>
<br /><br /><br />
                <a href="/details/2008_vw_gti/1454282/" class="prod_container" >
        <h2>2008 VW GTi</h2>
        <div style="float:left; width:122px; z-index:1000">
        <div class="thumb"><img src="http://c.castanet.net/img/28/thumbs/1454282-1-1.jpg" border="0"/></div>
        <div class="clear"></div>
        mls
        </div>
        <div class="descr">
            The most fun car I have owned.  Dolphin Grey, 4 door, Dual Climate control, DRG Transmission with paddle shift.  Leather...
        </div>
        <div class="pdate">
            <p class="price">$19,000.00</p>
            <p class="date">Kelowna<br />Posted: Oct 15,  2:54 PM<br />Views: 349</p>
        </div>
        <div style="clear:both" ></div>
        <div class="seal"><img src="/images/bookmark.png" /></div>
        </a>
                <a href="/details/price_drop_gorgeous_rare_white_2009_honda_accord_ex-l_coupe/1447341/" class="prod_container" >
        <h2>PRICE DROP!!! Gorgeous Rare White 2009 Honda Accord EX-L Coupe </h2>
        <div style="float:left; width:122px; z-index:1000">
        <div class="thumb"><img src="http://c.castanet.net/img/28/thumbs/1447341-1-1.jpg" border="0"/></div>
        <div class="clear"></div>
        sun2010
        </div>
        <div class="descr"> 
```

我要获取的链接是“/details/2008_vw_gti/1454282/”部分。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:11:12.550

**HTML 不是 XML**。XPath 是用于浏览 XML 文档的工具，但是 HTML 不符合 XML 要求。您链接的 HTML 不是格式良好的 XML，因此 XPath 将不起作用。

您需要查看使用 HTML 到 XML 转换器，然后将该转换的输出添加到您的问题以编写 XPath，或者使用不同的工具进行调查。我建议在 Google 上搜索“C# HTML scrapers”，但我不熟悉 .Net，所以无法提供更窄的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:29:21.227

尝试以下 Xpath 表达式：

```
//a[@class="prod_container"]/@href 
```

# javascript - 旋转后Jquery隐藏图像

> ID：12924389
> 
> 赞同：0
> 
> 时间：2012-10-16T22:24:25.543
> 
> 标签：javascript, jquery, rotation, hide

我有一张在点击事件上旋转 360 度的图像。图像完成旋转后，我希望该图像消失。有什么建议么？

```
$("#refresh").rotate({
   bind:
     {
        click: function(){
            $(this).rotate({ angle:0,animateTo:720,easing: $.easing.easeInOutExpo });
            $(this).fadeOut("slow");
        }
     }

}); 
```

HTML

```
<div class="span4" style="float:right">

    <img src="assets/img/refresh_btn.png" id="refresh" width="70" height="70"/> 

</div> 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:28:51.223

我假设你正在使用这个？[http://code.google.com/p/jqueryrotate/wiki/Documentation](http://code.google.com/p/jqueryrotate/wiki/Documentation)

在这种情况下，使用完成后触发的回调。像这样的东西：

```
$("#refresh").rotate({
   bind:
     {
        click: function(){
            $(this).rotate({ angle:0,animateTo:720,easing: $.easing.easeInOutExpo });
            $(this).fadeOut("slow");
        },
        callback: function(){
            $(this).hide();
        },
     }

}); 
```

# c# - 为音乐文件的专辑封面提供给 MediaControl 的 URI .Net

> ID：12924390
> 
> 赞同：1
> 
> 时间：2012-10-16T22:24:34.730
> 
> 标签：c#, windows-8, uri, media

我想在 Windows 8 媒体控件中显示专辑封面，如下所示：

![专辑艺术](../Images/1747c132fafd24f699ae436512acb43c.png)

但是，MediaControl.AlbumArt 具有 Uri 类型，而不是我预期的 ImageSource 类型。嵌入在音乐文件中的专辑封面是否还有 URI？我尝试为文件提供一个 URI ("file:///C:/Rest/Of/Path.mp3")（立即出现异常结果），但除此之外，我什至不知道从哪里开始。也许我应该把专辑封面写到一个临时文件中并指向它（感觉这样做是错误的，但也许吧？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:34:35.743

您可以提供 Web 链接或使用 ms-appx:// 格式来引用应用目录中的文件。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)

请注意，要引用应用程序目录的根目录，它是三个斜杠：

```
var x = new Uri("ms-appx:///path/to/image.png"); 
```

# java - 使用 ArrayList 上另一个类的方法和 foreach 循环？

> ID：12924395
> 
> 赞同：0
> 
> 时间：2012-10-16T22:24:40.923
> 
> 标签：java

```
public void verschuif1(){
    for(Object x : puntenLijst){
        x.verschuif2(3, 3);
    }
} 
```

puntenLijst 是另一个类的对象实例的 ArrayList。现在我尝试用一​​个 foreach 循环来做一些事情，该循环遍历 ArrayList 中的所有对象并在其上使用 verschuif2() 方法（来自其他类）。

但这似乎不起作用。

有人可以帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:26:13.513

您必须先投射您的对象：

```
for (Object x : puntenLijst){
    ((MyObject)x).verschuif2(3, 3);
} 
```

或者，您可以在`ArrayList`. 所以对于`ArrayList`这样的：

```
ArrayList<MyObject> puntenLijst 
```

您可以完全避免投射：

```
for (MyObject x : puntenLijst){
   x.verschuif2(3, 3);
} 
```

相关：[为什么使用泛型](http://docs.oracle.com/javase/tutorial/java/generics/why.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:27:23.887

您需要在调用该方法之前进行强制转换

```
((ClassName) x).verschuif2(3, 3); 
```

使其编译。

比这更好的是使您的列表通用

```
List<ClassName> puntenLijst = new ArrayList<ClassName>(); 
```

那么你就不需要强制转换（这被认为是不安全的类型）。然后你会循环如下

```
for (ClassName x : puntenLijst){ 
    x.verschuif2(3, 3); // no casting required
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:29:56.120

问题是您的循环对对象引用进行操作。如果您的方法未在 Object 中声明，则您的代码无法知道该方法调用是否有效。

您需要的是将 puntjenblist 声明为与此类似：

集合，其中 {type} 是一些声明 versschuif2 方法的类。

然后在您的 for 循环中，您可以通过 {type} 引用对象以调用该方法。

这样，for 循环就知道集合中的每个对象都有可以调用的方法。

# c# - List 上的 Select() 是否会丢失集合的大小？

> ID：12924398
> 
> 赞同：3
> 
> 时间：2012-10-16T22:24:58.763
> 
> 标签：c#, linq

在下面的代码中，该`Select()`方法是否足够聪明，可以在内部保持列表的大小以使该`ToArray()`方法变得便宜？

```
List<Thing> bigList = someBigList;
var bigArray = bigList.Select(t => t.SomeField).ToArray(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:36:20.697

这很容易检查，无需查看实现。只需创建一个实现 的类`IList<T>`，并在`Count`属性中添加跟踪：

```
 class MyList<T> : IList<T>
    {
        private readonly IList<T> _list = new List<T>();
        public IEnumerator<T> GetEnumerator()
        {
            return _list.GetEnumerator();
        }

        public void Add(T item)
        {
            _list.Add(item);
        }

        public void Clear()
        {
            _list.Clear();
        }

        public bool Contains(T item)
        {
            return _list.Contains(item);
        }

        public void CopyTo(T[] array, int arrayIndex)
        {
            _list.CopyTo(array, arrayIndex);
        }

        public bool Remove(T item)
        {
            return _list.Remove(item);
        }

        public int Count
        {
            get
            {
                Console.WriteLine ("Count accessed");
                return _list.Count;
            }
        }

        public bool IsReadOnly
        {
            get { return _list.IsReadOnly; }
        }

        public int IndexOf(T item)
        {
            return _list.IndexOf(item);
        }

        public void Insert(int index, T item)
        {
            _list.Insert(index, item);
        }

        public void RemoveAt(int index)
        {
            _list.RemoveAt(index);
        }

        public T this[int index]
        {
            get { return _list[index]; }
            set { _list[index] = value; }
        }

        #region Implementation of IEnumerable

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        #endregion
    } 
```

如果`Count`访问该属性，则此代码应打印“访问计数”：

```
var list = new MyList<int> { 1, 2, 3 };
var array = list.Select(x => x).ToArray(); 
```

但它不打印任何东西，所以不，它不跟踪计数。当然，可能会有特定于 的优化`List<T>`，但似乎不太可能......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T22:38:01.077

不，现在它没有（至少是 .NET 实现）。从 MS 参考源，`Enumerable.ToArray`实现为

```
public static TSource[] ToArray<TSource>(this IEnumerable<TSource> source) {
    if (source == null) throw Error.ArgumentNull("source"); 
    return new Buffer<TSource>(source).ToArray();
} 
```

`Buffer<TSource>`通过根据需要进行迭代和调整大小，在构造时创建源序列的副本（以数组形式）；`source`如果是一个，它有一个特殊的“快速路径” `ICollection<TSource>`，但结果`Enumerable.Select`不出所料地没有实现那个接口。

尽管如此，除了纯粹的好奇之外，我认为这个结果没有任何意义。一方面，实施可能在未来的任何时候发生变化（即使快速的成本效益分析不会发现这种可能性）。在任何情况下，您最多会遭受 O(logN) 重新分配。对于小 N，重新分配不会很明显。对于较大的 N，迭代集合所花费的时间将是 O(N)，因此很容易占主导地位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:44:51.920

当您将`Select`运算符应用于可枚举序列时，它会创建以下迭代器之一：

*   `WhereSelectArrayIterator`
*   `WhereSelectListIterator`
*   `WhereSelectEnumerableIterator`

在 的情况下`List<T>`，`WhereSelectListIterator`创建迭代器。它使用列表的迭代器来迭代列表并应用谓词和选择器。这是一个`MoveNext`方法实现：

```
while (this.enumerator.MoveNext())
{
    TSource current = this.enumerator.Current;
    if ((this.predicate == null) || this.predicate(current))
    {
        base.current = this.selector(current);
        return true;
    }
} 
```

如您所见，*它不保留有关匹配 predicate 的项目数的信息*，因此它不知道过滤序列中的项目数。

# html - 具有 max-width 属性的电子邮件客户端上的文本溢出省略号

> ID：12924401
> 
> 赞同：3
> 
> 时间：2012-10-16T22:25:12.747
> 
> 标签：html, html-email, css

我正在构建一个 HTML 电子邮件，它有两个要求：

1.  宽度应该达到最大宽度（即使用`max-width`CSS 属性）
2.  任何超过该最大宽度的文本都必须用省略号截断。

我尝试使用以下样式，但它不适用于所有电子邮件客户端或大多数浏览器（除了 Chrome）：

```
text-overflow: ellipsis; 
white-space: nowrap; 
overflow: hidden; 
max-width: 740px; 
```

我知道在 IE 中，您需要为包含您截断的元素的所有元素设置宽度，但我尝试使用 max-width 并且它不适用。

那么有没有办法获得这种所需的行为，除了手动将文本截断到某个设置的字符限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:42:50.047

Outlook 不支持文本溢出和最大宽度。您可以在此处检查电子邮件客户端的 CSS 兼容性：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

我不知道有任何黑客可以做你想做的与 Outlook 兼容的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:30:51.517

电子邮件客户端是 CSS 合规性阶梯的最底层。所以不要指望普遍支持这一点。甚至`max-width`可能并非所有地方都支持类似的东西。

您最好将省略号嵌入到实际文本中。

# c++ - 看似模棱两可的模板函数重载

> ID：12924402
> 
> 赞同：2
> 
> 时间：2012-10-16T22:25:25.830
> 
> 标签：c++, templates, c++11, sfinae, overload-resolution

偶然发现时我试图解决的原始问题是选择`parse_impl`版本：

*   如果解析器（类型`U`）提供了一个名为 的字段`"skp"`，则使用该字段；
*   如果没有，请使用默认值。

我想出了以下代码：

```
// This variant compiles for parsers requiring a skipper:
template <typename I, typename U, typename A,
          typename = typename std::enable_if<
              not std::is_same<
                  typename std::remove_reference<U>::type::skipper_type,
                  qi::unused_type
              >::value
          >::type,
          typename = void > // avoid redefinition (1 more overload not shown)
bool parse_impl(I & start, I end, U && parser, A & attr)
{
    // qi::space by default:
    return qi::phrase_parse(start, end, parser, qi::space, attr);
}

// This variant compiles for parsers providing skipper via 'skp' member:
template <typename I, typename U, typename A,
          typename = typename std::enable_if<
              not std::is_same<
                  typename std::remove_reference<U>::type::skipper_type,
                  qi::unused_type
              >::value
              && (sizeof(U::skp) != 0)
          >::type,
          typename = void, typename = void > // avoid redefinition
bool parse_impl(I & start, I end, U && parser, A & attr)
{
    // parser.skp is available:
    return qi::phrase_parse(start, end, parser, parser.skp, attr);
} 
```

呼叫站点如下所示：

```
pr.is_ok = parse_impl(pr.position, input.cend(), parser, pr.attr); 
```

这对于有和没有的类型都调用`skp`。

它可以编译（在 gcc4.7 上），但我不明白为什么：当`skp`存在时，两个`enable_if`s 中的表达式都应该评估为真（`skipper_type`显然不等于`unused_type`then），并且调用应该是模棱两可的。我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:42:09.003

正如评论中所得出的结论，这里的问题是，当使用 just 时`U::skp`，可能会`U`被推断为引用类型（即，当传递左值解析器时）。发生这种情况时，您将启动 SFINAE，因为引用类型显然没有嵌套*任何东西*。

解决方法是从`U`with中删除引用，`std::remove_reference`以便您拥有`(sizeof(std::remove_reference<T>::type::skp) != 0)`. 请注意，`typename`此处不需要，因为`::skp`表示`type`必须是类型名。

# ios - 定向灯

> ID：12924408
> 
> 赞同：11
> 
> 时间：2012-10-16T22:26:05.900
> 
> 标签：ios, cocos2d-iphone, box2d-iphone

我正在研究需要定向灯的游戏创意（2D）。基本上我想添加可以移动的光源，并且光线与场景中的其他物体相互作用。

我现在正在做的是一些使用传感器 (box2d) 和 ccDrawLine 的测试，我可以实现与我想要的类似的东西。基本上我从某个点发送一堆传感器，并通过光线投射检测碰撞，获取端点并在传感器上画线。

只是想获得一些意见，如果这是这样做的好方法，还是其他更好的选择来构建这样的东西？

另外我想知道如何在这个区域（传感器区域）上制作灯光效果，以提供更好看的灯光效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:23:21.647

我能想到一种你可以应用的很酷的效果。将一些粒子放在可见光的区域内，就像火花一样闪烁并非常缓慢地落下，就像这张[照片上的东西](http://image1.masterfile.com/em_w/05/89/39/400-05893940w.jpg)

无论如何，任何解决这个问题的方法都需要使用碰撞检测，所以如果你有有限数量的 box2d 对象，你就很好了。

当您有很多 box2d 对象时，我会想到的其他方法是仅使用纯色（应该很快）将屏幕渲染为纹理，并在生成的纹理上执行光线追踪以查找将受光影响的像素。这样您就仅限于分辨率而不是 box2d 对象的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:27:55.700

[这里](https://github.com/LaurentGomila/SFML/wiki/Source%3a-Ruby-Light-Manager)有一个很好的关于 2D 空间中动态和静态灯光的源代码。它是 Ruby 代码，但易于理解，因此将其移植到 Obj-C/Cocos2D/box2D 应该不长。

我真的希望它能帮助你，因为它帮助了我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T11:54:55.030

嗯，有趣的问题。Cocos2D 确实提供了一些相当灵活的遮罩效果。您可以在对象上放置一个渐变蒙版，其位置取决于“光”的位置，从而产生对象被光着色的效果。

# php - 具有多个值的单个 sql 数据库条目到数组中

> ID：12924412
> 
> 赞同：2
> 
> 时间：2012-10-16T22:26:16.977
> 
> 标签：php, arrays

该脚本查询数据库并检索具有多个数字的单个条目

`SELECT jnum from database where x = y`

> 输出 = 11111,22222,33333,44444

所以我把它炸开然后`,`得到`$variable[0] = 11111``$variable[1]= 22222`

我想要做的是使用这些数字中的每一个对另一个表执行查询（数字每次都会不同，并且可能有任意数量的数字）。

有没有办法为数组中的每个条目构建一个 foreach 或一个计数的 while 循环，以便我可以查询数据库中从上面的输出中获得的每个值。

我不知道我是否清楚地传达了我在这里想要做的事情，所以我提前道歉。

我得到数据库表的一个条目，它包含一个字符串 (11111,22222,33333) 我爆炸，并获取数组变量 [] 并不总是有 3 个条目，有时可能有 5 或 7 或 10 或 1但每一个都是独一无二的。但是对于每个值，我想查询一个 db 表并检索具有该单个数字（`$variable[]`）作为条目的所有行。不确定循环计数或 foreach 语句是否有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:30:03.310

好吧，假设这些是单列中的值，则无需查看您可以使用`WHERE ... IN`：

```
SELECT * FROM the_other_table WHERE some_col IN ('11111','22222','33333') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:29:48.660

查看 foreach 循环 - [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

```
foreach ($variable as $value) {

    $myquery = "some query using $value";
    // then execute your query
 } 
```

# git - 从 git 子模块推送代码，但无法从主工作目录再次拉取代码

> ID：12924414
> 
> 赞同：0
> 
> 时间：2012-10-16T22:26:37.833
> 
> 标签：git, push, pull, git-submodules

我有一个项目，它从不同的 repo 中提取一个库作为子模块。我从子模块目录中对库进行了一些更改，并成功地将其推送到 Github。当我尝试从库的主要开发中提取更改时，我得到“已经是最新的”。当我知道它不是。我可以克隆图书馆的 repo 并且有我的更改。为什么不拉通知变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:56:27.920

您应该设置 2 个单独的遥控器。一个用于 sourceforge，一个用于 github。然后，您可以选择要推送的内容。只要您不调用`git submodule init`，您就可以切换您的子模块以指向另一个 repo 并在您喜欢时从那里获取更改。

# ruby-on-rails - Rails 3：将组和成员建模为层次结构

> ID：12924416
> 
> 赞同：2
> 
> 时间：2012-10-16T22:26:49.680
> 
> 标签：ruby-on-rails, activerecord, ancestry

一个`Group`实例可以包含`Person`实例或其他`Group`实例。我想使用 Ancestry gem 来反映层次结构，但 Ancestry 似乎不适用于两种不同的模型。我不想使用单表继承`Person`，`Model`因为它们在概念上是不同的。

对此需求进行建模的最佳方法是什么？我愿意使用多对多或其他类型的关联来构建自己的层次结构，但我不确定如何使两个模型（`Person`和`Group`）相互配合。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:33:41.640

听起来您想使用多态关联。有关简单示例，请参见 rails 指南：http: [//guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

**编辑**更新以包括层次结构：

听起来您需要几个新模型，例如“级别”和“子级”：

团体模型：

```
has_many :children, :as => :groupable
belongs_to :level 
```

人物模型：

```
has_many :children, :as => :groupable 
```

级别模型：

```
has_many :children
has_one :group

attr_accessible :level (integer) 
```

儿童型号：

```
belongs_to :groupable, :polymorphic => true 
```

可以通过结合子模型和级别模型来简化这一点，但我不知道 ActiveRecord 是否可以处理两个表之间的两种关系（一个用于作为组或人的子组，一个用于父组，其中听起来它总是一个组）

您的层次结构级别将由`level`级别模型中的整数反映。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:11:52.473

您可以轻松地在 Group 类上设置层次结构（使用适合您的单模型层次结构），然后在 Groups 和 Users 之间添加一对多关联：

```
class Group < AR::Base
  acts_as_tree # or whatever is called in your preferred tree implementation
  has_many :users
end

class User < AR::Base
  belongs_to :group
end 
```

你将会有

```
@group.children # => a list of groups
@group.parent   # => another group or nil if root
@group.users    # => the users directly below this group
@user.group     # => a group 
```

如果您确实需要该组拥有用户或子组但不能同时拥有两者，请使用验证规则。

# java - 你如何阻止 Proguard 删除类型参数？

> ID：12924425
> 
> 赞同：38
> 
> 时间：2012-10-16T22:27:28.850
> 
> 标签：java, android, maven, proguard

我目前正在尝试混淆一系列库。我的基础库包含几个使用类型参数的类和方法，由于 Proguard 混淆删除了类型参数，因此其他代码无法使用。消除混淆可以消除这些问题。我已经阅读了所有 ProGuard 使用文档、示例和故障排除，但找不到任何关于如何处理类型参数或 ProGuard 的哪个方面剥离类型参数的文档。

**构造函数类型参数问题：**

库 1 包含以下类：

```
public abstract class AbstractFactoryFactory<T> 
```

库 2 包含几个扩展上述类的类，但构造函数抛出编译器错误，指出：

```
error: type AbstractFactoryFactory does not take parameters 
```

**返回类型参数问题：**

库 1 有一个 Foo 类，其方法如下：

```
public List<String> doSomething() 
```

Libary 2 尝试使用 doSomething 方法，但经过混淆后，该方法返回一个无类型列表，该列表生成以下编译器错误：

```
error: incompatible types Object 
```

**Proguard.cfg**

```
-dontoptimize

-renamesourcefileattribute SourceFile
-keepparameternames
-keepattributes Exceptions,*Annotation*,InnerClasses,SourceFile,LineNumberTable,Deprecated

-keep public class * {
    public protected *;
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keepclassmembernames class * {
    java.lang.Class class$(java.lang.String);
    java.lang.Class class$(java.lang.String, boolean);
}

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-16T22:54:11.770

根据 ProGuard[典型库使用指南](http://proguard.sourceforge.net/manual/examples.html#library)：

> 在 JDK 5.0 及更高版本中编译时，需要“Signature”属性才能访问泛型类型。

添加以下行解决了我缺少类型参数的问题：

```
-keepattributes Signature 
```

# php - PHP 的 mysql() 函数是什么？

> ID：12924426
> 
> 赞同：1
> 
> 时间：2012-10-16T22:27:31.853
> 
> 标签：php, mysql, function, namespaces, undocumented-behavior

我在 PHP 中遇到了一个奇怪的错误：

```
mysql() 
```

我尝试了**三种**不同的设置，每次使用这个名称和任何参数或没有参数声明一个函数都会产生一个错误：

```
Fatal error: Cannot redeclare mysql() 
```

[然而，我在函数 index](http://www.php.net/manual/en/indexes.functions.php#refentry-index-for-m)中找不到具有这样名称的函数，如果它真的存在，我猜它会在[这里](http://php.net/manual/en/function.mysql.php)。我尝试在网上搜索，但我的搜索查询的模糊性使得任何关于此的信息都难以找到。

简单地调用一个函数的有用性`mysql()`，这个函数是什么，为什么没有记录？

* * *

*我排除的可能性：*

*   它可能是一个类构造函数*（没有这样的类）*
*   模块名称是冲突的原因*（不适用于其他模块，如 mssql）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:38:00.563

只是一个未记录的保留字 [http://php.net/manual/en/reserved.keywords.php](http://php.net/manual/en/reserved.keywords.php)

检查源代码，我看到该函数是空的

# android - Android - Andengine - 如何使用原生 UI SKD

> ID：12924428
> 
> 赞同：3
> 
> 时间：2012-10-16T22:27:38.950
> 
> 标签：android, user-interface, sdk, native, andengine

我想使用原生sdk界面布局，（如何一个普通的应用程序）来设计我的游戏菜单，并将其链接到BaseGameActivity或GameScene，我知道如何使用sdk native设计界面，但我不知道如何实现它和引擎：S

我找不到任何解决方案，我希望有人能帮助我找到最好的方法，或者使用这些方法的方法。

对不起，我的英语不好。

* * *

更多信息：我知道如何在我的基本活动中添加一个小框架布局，但我可以设置一组菜单（2/3），你可以在上面移动，进入游戏并退出游戏:)

再次对不起我的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:27:56.437

好吧，我这样做了:)

仅使用布局等创建普通活动并使用 intent.putExtra(); 将特定信息发送到 BaseGameActivy，然后，在 onCreateResources() 上，我设置了一系列条件来确定我之前按下的，并设置所需的场景。

对不起我的英语:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-18T12:08:39.007

编辑：从原始网站导入的教程

# 如何将 UI Android SDK 与 AndEndine 一起使用

注意：如果您在这些布局中更改宽度和高度，可能会出现填充错误，因此请小心（此解决方案适用于全屏使用）

## XML 布局

在项目的目录*res/layout中创建一个名为**themainactivity.xml*的空文件，并将以下内容放入其中。

注意：将属性设置`tools:context`为您的应用程序活动名称，以点开头（此处：.MyMainActivity）

**XML 布局文件：res/layout/themainactivity.xml**

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <!-- code placed here will be above the AndEngine render -->
</RelativeLayout> 
```

## Java 类

你只需要在你的类中指定 ID。

**MyMainActivity.java**

```
package com.example;

import org.andengine.ui.activity.SimpleLayoutGameActivity;

public class MyMainActivity extends SimpleLayoutGameActivity  
{
    @Override
    protected int getLayoutID()
    {
        return R.layout.themainactivity;
    }

    @Override
    protected int getRenderSurfaceViewID()
    {
        return R.id.gameSurfaceView;
    }
} 
```

* * *

# 在 AndEngine 中创建自定义 Android SDK 布局

## XML 布局

警告：根节点必须是合并节点！在这里面你可以做你想做的事。

**XML 布局文件：res/layout/my_view.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">
  <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:orientation="vertical" >
      <Button
          android:id="@+id/button1"
          android:layout_width="fill_parent"
          android:layout_height="40dp"
          android:text="Dat button" />
  </LinearLayout>
</merge> 
```

[![快速查看结果](../Images/5fcc8c00849942a0f152e3aa29dabab8.png)](https://i.stack.imgur.com/JBnc0.jpg)

## 控制器类

为了能够使用您的界面，您必须使用 inflater 服务将其链接到 XML 视图。

注意：UI Java 代码是在您切换到 WYSIWIG 编辑器时编译的，因此如果您不添加下面的链接代码，您将不会在使用它的活动中看到布局的内容。

**自定义布局：MyView.java**

```
package com.example;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.LinearLayout;

public class MyView extends LinearLayout 
{
    public MyView(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        // Link to the XML view
        LayoutInflater.from(context).inflate(R.layout.my_view, this, true);

        // Link to the XML view (alternative using service, you can delete if you don't need it)
        //LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //inflater.inflate(R.layout.my_view, this);
    }
} 
```

## 在其他活动中重复使用

只需在活动布局中添加此代码即可。

```
<com.example.MyView
    android:id="@+id/myView1"
    android:layout_width="100dp"
    android:layout_height="wrap_content" /> 
```

# java - 基本递归

> ID：12924430
> 
> 赞同：5
> 
> 时间：2012-10-16T22:28:23.653
> 
> 标签：java, recursion

这是我从学校收到的一个作业问题。问题是，编写一个名为capitalizer 的方法，它将采用字符串“ownage”，然后显示（不必返回）它的所有可能的大写形式，例如“OwNaGE”或“OWnAGE”。它不必对每个字符串都有效，只要“拥有”这个词就足够了，而且必须通过递归来完成。

这是我到目前为止所拥有的。

```
import java.util.*;

class MethodAssign2{
   static void capitalizer(String a,int b){
      if(b==-1){
         System.out.println("worked?");
      }else{
         char[] achars = a.toCharArray();
         achars[b] -= 32;
         String caplet = new String(achars);
         System.out.println(caplet);
         System.out.println(a);
         capitalizer(caplet,b-1);
         capitalizer(a,b-1);
      }
   }
   public static void main(String[]args){
      String word = "ownage";
      capitalizer(word,word.length()-1);
   }
} 
```

我的脑子现在完全乱了。好像我有很多重复的案例。你们认为我接近正确的解决方案吗？我该如何做到这一点，以便在基本情况下没有任何事情发生，而不是打印出一些东西？如何避免重复？任何人请帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:37:51.780

为了避免重复 - 你应该只在停止子句中打印你的字符串，而不是在每次迭代中。

```
static void capitalizer(String a,int b){
    if(b==-1){
        System.out.println(a); //CHANGE: printing in the stop clause
    }else{
        char[] achars = a.toCharArray();
        achars[b] -= 32;
        String caplet = new String(achars);
        //CHANGE: not printing every iteration
        capitalizer(caplet,b-1);
        capitalizer(a,b-1);
    }
} 
```

算法的想法是：在每个阶段，您“猜测”当前字符是什么 - 它是大字符还是小字符，并在较小的问题（下一个字符）上递归调用算法。
您对当前字母是否大写重复此操作。

* * *

前面的代码失败了，因为您打印了它在每个字母更改后生成的字符串，这导致打印单词的所有可能方式更多（几乎加倍）`2^n`^。

* * *

(1)**奖励：**您可以打印完全`2^n`可能的字符串，因为对于您需要选择的每个字符：是否大写？您为每个字符重复这个问题，并根据[产品规则](http://en.wikipedia.org/wiki/Rule_of_product)- 它为您提供了完全`2^n`可能的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:36:25.197

看看你的这段代码：

```
System.out.println(caplet);
System.out.println(a);
capitalizer(caplet,b-1);
capitalizer(a,b-1); 
```

您打印字符串的当前版本，然后再次处理它们。但是，当进一步处理时，将发生任何事情都没有改变的情况。然而，在每次迭代中，您仍在打印相同的字符串。

您想要做的是删除这些打印，并在最后（在`if(b==-1)`块中）添加一个打印，您可以在其中打印您在该点完成的特定迭代集的最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:47:13.630

您的递归函数应该操作给定单词的第一个字母，并依靠递归调用来操作剩余的字母。这是一个非常常见的问题，当您必须遍历复合对象的所有可能状态时会发生这种问题。

这不会编译，但（我认为）这里是伪代码的解决方案：

```
recursion(word){

List list = new List();

String firstLetter = firstLetter(word);
String restOfWord = restOfWord(word);

for( rest : recursion(restOfWord)){
list.append(firstLetter.uppercase()+rest);
list.append(firstLetter.lowercase()+rest);

return list;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:37:14.417

递归思考时，请根据重复的步骤进行思考。

所以考虑最后一个字母，你有：

自有自有

退一步你有：

拥有 拥有 拥有 拥有 拥有 拥有

看？对于倒数第二个字母的每个备选方案，您都有最后一个字母的备选值。等等。

因此，请考虑“如果我有前 n 个字母的所有备选方案，那么我如何根据下一个字母获得备选方案？

想想如何解决这个问题，你会得到一个递归的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T01:26:08.637

```
public static void capitalizer(String input) {
    capitalizer("", input);
}

private static void capitalizer(String prefix, String buffer) {
    if (buffer.isEmpty()) {
        System.out.println(prefix);
        return;
    }

    char c = buffer.charAt(0);
    char cup = Character.toUpperCase(c);

    String p = prefix + c;
    String pup = prefix + cup;

    String b = buffer.length() == 0 ? "" : buffer.substring(1, buffer.length());

    capitalizer(p, b);
    capitalizer(pup, b);
}

public static void main(String[] args) {
    capitalizer("ownage");
} 
```

输出，

```
ownage
ownagE
ownaGe
ownaGE
ownAge
ownAgE
ownAGe
ownAGE
owNage
owNagE
owNaGe
owNaGE
owNAge
owNAgE
owNAGe
owNAGE
oWnage
oWnagE
oWnaGe
oWnaGE
oWnAge
oWnAgE
oWnAGe
oWnAGE
oWNage
oWNagE
oWNaGe
oWNaGE
oWNAge
oWNAgE
oWNAGe
oWNAGE
Ownage
OwnagE
OwnaGe
OwnaGE
OwnAge
OwnAgE
OwnAGe
OwnAGE
OwNage
OwNagE
OwNaGe
OwNaGE
OwNAge
OwNAgE
OwNAGe
OwNAGE
OWnage
OWnagE
OWnaGe
OWnaGE
OWnAge
OWnAgE
OWnAGe
OWnAGE
OWNage
OWNagE
OWNaGe
OWNaGE
OWNAge
OWNAgE
OWNAGe
OWNAGE 
```

# php - 查询失败，让我被困在树林里

> ID：12924436
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:28:47.367
> 
> 标签：php, mysql

我正在尝试执行一个查询，该查询从图像表中删除过滤器表中不存在的所有文件。我正在跳过数据库中的 3,500 个最新文件，以便将表“修剪”回过滤器表中的 3,500 +“X”条记录。

filters 表包含文件的标记，以及 images 表中使用的文件 id。

该代码将在 cron 作业上运行。

我的代码：

```
$sql = mysql_query("SELECT * FROM `images` ORDER BY `id` DESC") or die(mysql_error());

while($row = mysql_fetch_array($sql)){
    $id = $row['id'];
    $file = $row['url'];

    $getId = mysql_query("SELECT `id` FROM `filter` WHERE `img_id` = '".$id."'") or die(mysql_error());
    if(mysql_num_rows($getId) == 0){        
        $IdQue[] = $id;
        $FileQue[] = $file;
    }
}
for($i=3500; $i<$x; $i++){
    mysql_query("DELETE FROM `images` WHERE id='".$IdQue[$i]."' LIMIT 1") or die("line 18".mysql_error());
    unlink($FileQue[$i]) or die("file Not deleted");
}
echo ($i-3500)." files deleted."; 
```

输出：0 个文件被删除。

数据库内容：

```
images table: 10,000 rows
filters table: 63 rows 
```

过滤器表中包含图像表 id 的行数：63 php 脚本的执行时间：4 秒 +/- 0.5 秒

相关数据库结构

*   表：图像
*   ID
*   网址
*   ETC...

*   表：过滤器

*   ID
*   img_id（包含来自图像表的 ID）
*   ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:39:24.027

```
 for($i=3500; $i<$x; $i++){ 
```

如果`$x < 3500`. 你可能想要：

```
 for($i=3500; $i<($x + 3500); $i++){ 
```

重新阅读有关 SQL 的文档`JOIN`也是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:41:14.067

根据 Brendan 的回答，您可以构建一个[subquery](http://www.roseindia.net/mysql/mysql5/writing-subqueries.shtml)。您的整个脚本可能看起来像：

```
$query = mysql_query(
   "DELETE FROM `images` WHERE `id` NOT IN (
       SELECT `id` from `filter`
    ) ORDER BY `id` DESC LIMIT 3500,12340283492834
") or die(mysql_error());

printf("Files deleted: %d\n", mysql_affected_rows()); 
```

子查询`(SELECT `id` from `filter` LIMIT 3500,12340283492834)`首先解析并将一个 id 列表返回给父查询以在`WHERE`子句中使用。然后，您通过传入偏移量来保留最后 3500 行（因此它会跳过前 3500 行，然后删除其余行）。注意丑陋的`LIMIT 3500,12340283492834`......这是因为 MySQL 不支持无限制的偏移量。

完成后，运行选择查询以获取所有图像 URL，然后遍历文件系统上的图像，如果文件名不在结果数组中，则将其删除。

# c++ - 如何在带有模板的函数中使用前向类声明？

> ID：12924443
> 
> 赞同：2
> 
> 时间：2012-10-16T22:29:20.243
> 
> 标签：c++, templates

我有两节课。每个都有一个指向另一个类的指针。所以我必须在其中一个中使用前向类声明。此方法运行良好，直到我需要使用带有模板的函数（我必须在头文件中编写声明和实现）。

更具体地说，我的代码类似于以下文件。MS Visual Studio 2010 在 Windows 上编译这些文件时没有问题。但是当我在 Mac 上通过 XCode 4.3.2 编译它们时，我在文件 ClassA.h 中收到“成员访问不完整类型 'ClassB'”的错误。

谁能告诉我如何使用 XCode 在 Mac 上编译它？

**文件 ClassA.h**

```
#ifndef CLASS_A
#define CLASS_A

//#include "ClassB.h"

class ClassB;

class ClassA
{
public:
    ClassA();
    template <typename T> 
    void funcA(T *t);

    int iNum;
    ClassB *pB;
};    

template <typename T> 
void ClassA::funcA(T *t)
{
    iNum = *(int*)t;
    iNum += pB->iNum;
}

#endif 
```

**文件 ClassA.cpp**

```
#include "ClassA.h"

ClassA::ClassA()
{
    iNum = 1;
} 
```

**文件 ClassB.h**

```
#ifndef CLASS_B
#define CLASS_B

#include "ClassA.h"

class ClassB
{
public:
    ClassB();
    template <typename T> 
    void funcB(T *t);

    int iNum;
    ClassA *pA;
};

template <typename T> 
void ClassB::funcB(T *t)
{
    iNum = *(int*)t;
    iNum -= pA->iNum;
}

#endif 
```

**文件 ClassB.cpp**

```
#include "ClassB.h"

ClassB::ClassB()
{
    iNum = 2;
} 
```

**主文件**

```
#include <stdio.h>
#include "ClassA.h"
#include "ClassB.h"

int main(void)
{
    ClassA objA;
    ClassB objB;

    objA.pB = &objB;
    objB.pA = &objA;

    int a = 11;
    int b = 22;
    objA.funcA(&a);
    objB.funcB(&b);

    printf("Class A: %d, %d\n", objA.iNum, objA.pB->iNum);
    printf("Class B: %d, %d\n", objB.iNum, objB.pA->iNum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:41:02.257

您`pB->iNum`在函数定义中访问，因为您没有包含`classB.h`.

前向声明帮助您定义类，然后您可以包含您的头文件。尝试这样的事情：

```
#ifndef CLASS_A
#define CLASS_A

class ClassB;

class ClassA
{
public:
    ClassA();
    template <typename T> 
    void funcA(T *t);

    int iNum;
    ClassB *pB;
};    

#include "ClassB.h"

template <typename T> 
void ClassA::funcA(T *t)
{
    iNum = *(int*)t;
    iNum += pB->iNum;
}

#endif 
```

并在`classB.h`

# git - 使用 git push 时将选项传递给 curl

> ID：12924447
> 
> 赞同：6
> 
> 时间：2012-10-16T22:29:38.077
> 
> 标签：git, curl

据我了解，git在进行http传输时依赖curl（至少在使用http时，我确信ssh是不同的）。

鉴于此，有没有办法让 git 将特定标志传递给 curl？例如，我想通过 --limit-rate 100k 之类的东西在节流条件下测试 git push 命令。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T02:39:21.350

这不是您特定问题的答案，但它可以帮助您获得相同的结果。

您可以使用[netbrake](http://www.hping.org/netbrake/)，例如：

```
$ netbrake --limit 100k git push 
```

的好处`netbrake`是您可以将它与任何其他命令一起使用。缺点是特定于 Linux。

另一种选择是设置环境变量。我不确定 git 是否尊重这些变量（尽管其他程序这样做）。检查[Curl 的连接选项](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTLOWSPEEDLIMIT)。

# r - 如何在没有循环的情况下将向量相乘？

> ID：12924455
> 
> 赞同：6
> 
> 时间：2012-10-16T22:30:15.203
> 
> 标签：r

我有两个向量：

```
x = c(1,2,3)
y = c(4,5,2) 
```

我想将每个元素`x`与每个元素相乘`y`，然后将其全部加起来。所以我想做的是类似的事情：

```
1*(4 + 5 + 2) + 2*(4 + 5 + 2) + 3*(4 + 5 + 2) = 11 + 22 + 33 = 66 
```

有没有办法在没有循环的情况下做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T22:38:45.193

这就是我要用的！

```
sum(x) * sum(y)
# [1] 66 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T22:37:48.567

尝试：

```
sum(x*sum(y))
[1] 66 
```

矢量化运算符很整洁！

`?mapply`在执行这些类型的任务时要记住一个方便的功能：例如：

```
mapply("*",x,y) 
```

...会做 x[1] * y[1], x[2] * y[2] etc... 来产生

```
mapply("*",x,y)
[1]  4 10  6 
```

像这样的汇总函数`sum`也可以在一侧使用，例如：

```
mapply("*",x,sum(y))
[1] 11 22 33 
```

这意味着进行计算的长期方法也将是：

```
sum(mapply("*",x,sum(y)))
[1] 66 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T22:40:11.290

除了 Josh 和 thelatemail 的优秀想法之外的其他三个想法：

```
sum(do.call("*", expand.grid(x, y)))
sum(outer(x, y)) ## or equivalently: sum(x %o% y)
sum(sapply(split(x, x), function(z) z * y)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-16T23:18:28.230

我们可以使用`x %*% t(y)`得到一个包含我们想要的产品的矩阵，然后`sum`将矩阵中的所有内容加在一起。

```
sum(x %*% t(y))
#[1] 66 
```

* * *

以及同样想法的稍微高效的版本（感谢 Gavin）

```
sum(tcrossprod(x, y))
#[1] 66 
```

# c++ - make 命令给出不兼容的 i386 架构（i386x86-64）

> ID：12924456
> 
> 赞同：2
> 
> 时间：2012-10-16T22:30:24.513
> 
> 标签：c++, linux, makefile

我无法将我的 make 文件用于我在 linux 环境中编写的程序。该程序是使用我的教授给我的 bitmapImage.h 和 bitmapImage.so 的蕨类分形。每当我尝试运行 make 文件时，都会收到一长串错误，主要是：

```
 make
g++    -c -o fern.o fern.cpp
g++    -c -o fernType.o fernType.cpp
g++ -m32 -o fern fern.o fernType.o bitmapImage.so
/usr/bin/ld: cannot find crt1.o: No such file or directory
/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: cannot find -lm
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
/usr/bin/ld: cannot find -lgcc
/usr/bin/ld: cannot find -lc
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
/usr/bin/ld: cannot find -lgcc
/usr/bin/ld: cannot find crtn.o: No such file or directory
collect2: ld returned 1 exit status
make: *** [spiro] Error 1 
```

*我的猜测是 bitmapImage.so 是为 32 位系统设计的，但我的虚拟机 ubuntu 运行 64 位。我该如何解决这个问题，以便我可以编译我的程序？谢谢！*

编辑：更新了我的旧帖子以显示我得到的当前错误

生成文件：

```
# Make file for spirograph program

## note, uses bitmapImage shared object file (library).

OBJS = fern.o fernType.o
CC  = g++ -m32
DEPS1 = fernType.h
DEPS2 = bitmapImage.h

all: spiro

spiro: $(OBJS)
    $(CC) -m32 -o fern $(OBJS) bitmapImage.so

spiro.o:    fern.cpp $(DEPS1)
    $(CC) -m32 -c fern.cpp

spiroType.o:    fernType.cpp $(DEPS1) $(DEPS2)
    $(CC) -m32 -c fernType.cpp

# -----
# clean by removing object files.

clean:
    rm  $(OBJS) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:38:26.550

将`-m32`选项添加到您的编译行中，这会强制将所有内容编译为 32 位地址空间。（它仍将在 64 位系统上运行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:36:05.583

是的，这正是问题所在——您不能将 32 位目标文件与 64 位目标文件链接起来。您需要：

*   在 32 位机器（真实或虚拟）上编译，
*   向您的教授索要 64 位库，或
*   向库索取源代码，以便您自己编译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:36:33.337

1.  用于`file`查看共享库是否确实是 32 位的。
2.  如果是，您将不得不以某种方式获取它的 64 位副本。

# python - 温度转换器问题

> ID：12924460
> 
> 赞同：0
> 
> 时间：2012-10-16T22:30:55.743
> 
> 标签：python, function, if-statement, tkinter

我正在使用 GUI 为我的第一个主要项目制作温度转换器，即 Tkinter 模块。我在初始化 GUI 时没有任何问题。这很好用（据我所知）。我需要一些帮助来制作 IF 语句来调用与转换相关的每个函数。我遇到的问题是我不确定如何显示来自两个不同列表的两个项目之间的等价性。这是我的代码（我知道我遗漏了一些东西。显然是 if 语句。）

```
from tkinter import *

gui = Tk()
gui.title(string='Temperature Converter')
#create the GUI
fromUnit = StringVar()
#variable which holds the value of which unit is active in "units1"
toUnit = StringVar()
#variable which holds the value of which unit is active in "units2"
initialTemp = StringVar()
#the initial temperature entered in "enterTemp" entry
initialTemp.set('0')
#set the initial temperature to 0
convertedTemp = StringVar()
#used to display the converted temperature through "displayTemp" 
convertedTemp.set('0')
#set the converted temperature to 0

units1 = ('Celsius', 'Fahrenheit', 'Kelvin') #the units used in the OptionMenu
units2 = ('Celsius', 'Fahrenheit', 'Kelvin')

fromUnit.set(units1[0]) #set the active element to the item in index[0] of units1
toUnit.set(units2[0]) #set the active element to the item in index[0] of units2

# celsius-celcius conversion
def celsius_to_celsius():
    currentTemp = float(initialTemp.get())
    convertedTemp.set(currentTemp)

# celsius-kelvin conversion
def celsius_to_kelvin():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp + 273.15)
    convertedTemp.set(currentTemp)

# celsius-fahrenheit conversion
def celsius_to_fahrenheit():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp * (9/5))+32
    convertedTemp.set(currentTemp)

#fahrenheit-fahrenheit conversion
def fahrenheit_to_fahrenheit():
    currentTemp = float(initialTemp.get())
    convertedTemp.set(currentTemp)

#fahrenheit-celsius conversion
def fahrenheit_to_celsius():
    currentTemp = float(initialTemp.get())
    currentTemp = ((currentTemp - 32)*(5/9))
    convertedTemp.set(currentTemp)

#fahrenheit-kelvin conversion
def fahrenheit_to_kelvin():
    currentTemp = float(initialTemp.get())
    currentTemp = ((currentTemp - 32)*(5/9)+273.15)
    convertedTemp.set(currentTemp)

#kelvin-kelvin conversion
def kelvin_to_kelvin():
    currentTemp = float(initialTemp.get())
    convertedTemp.set(currentTemp)

#kelvin-celsius conversion
def kelvin_to_celsius():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp - 273.15)
    convertedTemp.set(currentTemp)

#kelvin-fahrenheit conversion
def kelvin_to_fahrenheit():
    currentTemp = float(initialTemp.get())
    currentTemp = (((currentTemp - 273.15)*(9/5))+32)
    convertedTemp.set(currentTemp)

#main function
#contains the if statements which select which conversion to use
def convert_Temp():
    currentTemp = float(initialTemp.get())
    if (fromUnit, toUnit) == ('Celsius','Celsius'):
        celsius_to_celsius()

gui.geometry('+100+100')
#set up the geometry

enterTemp = Entry(gui,textvariable=initialTemp,justify=RIGHT)
enterTemp.grid(row=0,column=0)
#Entry which receives the temperature to convert

convertFromUnit = OptionMenu(gui,fromUnit,*units1)
convertFromUnit.grid(row=0,column=1)
#Option Menu which selects which unit to convert from

displayTemp = Label(gui,textvariable=convertedTemp)
displayTemp.grid(row=1,column=0)
#Label which displays the temperature
#Takes text variable "convertTemp"

convertToUnit = OptionMenu(gui,toUnit,*units2)
convertToUnit.grid(row=1,column=1)
#Option Menu which selects which unit to convert to

convertButton = Button(gui,text='Convert',command=convert_Temp)
convertButton.grid(row=2,column=1)
#Button that starts the conversion
#Calls the main function "convert_Temp"

gui.mainloop()
#End of the main loop 
```

感谢您的观看以及您提供的任何帮助和批评。没有知识是浪费的！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:03:39.830

*正如评论中所指出的，您有一些架构缺陷（这是正常的，因为您正在学习）并且您可能会从[CodeReview](https://codereview.stackexchange.com/)社区（它是 stackexchange 网络的另一个站点）获得有趣的反馈。*

这里有几个选项可以用来执行您所谓的*If 语句*。您已经将转换包装在函数中的事实扩大了可能性。

1) 枚举 if 中的所有组合

您开始的内容有所不同：用于`fromUnit.get()`访问 tkinter 变量¹的值。

```
if (fromUnit.get(), toUnit.get()) == ('Celsius','Celsius'):
    celsius_to_celsius()
if (fromUnit.get(), toUnit.get()) == ('Celsius','Fahrenheit'):
    celsius_to_fahrenheit()
if (fromUnit.get(), toUnit.get()) == ('Celsius','Kelvin'):
    celsius_to_kelvin() 
```

2) 嵌套 if

```
if fromUnit.get() == 'Celsius':
    if toUnit.get()) == 'Celsius':
        celsius_to_celsius()
    if toUnit.get()) == 'Fahrenheit':
        celsius_to_fahrenheit()
    if toUnit.get()) == 'Kelvin':
        celsius_to_kelvin() 
```

3）使用字典（关联数组）来存储函数

```
converters = {
    'Celsius' : {
        'Celsius' : celsius_to_celsius,
        'Fahrenheit': celsius_to_fahrenheit,
        'Kelvin': celsius_to_kelvin},
    'Fahrenheit' : {
        'Celsius' : fahrenheit_to_celsius,
        'Fahrenheit': fahrenheit_to_fahrenheit,
        'Kelvin': fahrenheit_to_kelvin},
    #...
}
#retrieve function, and call it (through the () at the end)
converters [fromUnit.get()] [toUnit.get()] () 
```

实际上，它使用嵌套字典。您也可以只使用一本字典

```
converters = {
    ('Celsius', 'Celsius') : celsius_to_celsius,
    ('Celsius', 'Fahrenheit'): celsius_to_fahrenheit,
    ('Celsius', 'Kelvin'): celsius_to_kelvin,
}
converters [(fromUnit.get(), toUnit.get())] () 
```

4）您使用的一致命名方案允许生成函数名称

```
function_name = fromUnit.get().lower() + "_to_" + toUnit.get().lower()
globals()[function_name] () 
```

5) 委托调度

通常，大型组合 if（或在存在的语言中切换）对重构具有吸引力。例如，您可能对`convertFromUnit`或`fromUnit`（分别`*toUnit`）执行初步工作。

使用嵌套字典的机制非常接近 Python 对象内部使用的机制。

```
def fromUnitCallback():
    global _converter
    _converter = globals()[fromUnit.get()]()

def toUnitCallback():
    global _function_name
    _function_name = toUnit.get().lower()

def convert_Temp():
    currentTemp = float(initialTemp.get())
    _converter.set(currentTemp)
    converted = getattr(_converter, _function_name) ()
    convertedTemp.set(converted)

class Kelvin:
    def __init__(self, val=0):
        self.__kelvin = val

    def kelvin(self):
        return self.__kelvin

    def celsius(self):
        return self.__kelvin - 273.15

    def fahrenheit(self):
        return (self.__kelvin - 273.15)*1.8 + 32

    def set(self, val):
        self.__kelvin = val

class Celsius(Kelvin):
    def __init__(self, val):
        Kelvin.__init__(self)
        self.set(val)

    def set(self, val):
        Kelvin.set(self, val + 273.15)

class Fahrenheit:
    def __init__(self, val):
        Kelvin.__init__(self)
        self.set(val)

    def set(self, val):
        Kelvin.set((val - 32)*5/9 + 273.15) 
```

* * *

¹ Tkinter 变量是对象，即复合人工制品嵌入值和相关方法。与常规变量的目的相同，除了它们可以是`traced`，即被警告它们的值已更改。它们与 tkinter 小部件结合使用以简化操作。在这里，您要比较`fromUnit`与文字字符串的内容`'Celsius'`，因此您必须`fromUnit`通过`get`方法询问字符串。有关详细信息，请参阅[http://effbot.org/tkinterbook/variable.htm](http://effbot.org/tkinterbook/variable.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:37:26.563

这是我在上面启动的程序的最终源代码。

```
from tkinter import *

gui = Tk()
gui.title(string='Temperature Converter')
#create the GUI
fromUnit = StringVar()
#variable which holds the value of which unit is active in "units1"
toUnit = StringVar()
#variable which holds the value of which unit is active in "units2"
initialTemp = StringVar()
#set the initial temperature to 0
convertedTemp = StringVar()
#used to display the converted temperature through "displayTemp" 
convertedTemp.set('0')
#set the converted temperature to 0

units1 = ('Celsius', 'Fahrenheit', 'Kelvin') #the units used in the OptionMenu
units2 = ('Celsius', 'Fahrenheit', 'Kelvin')

fromUnit.set(units1[0]) #set the active element to the item in index[0] of units1
toUnit.set(units2[0]) #set the active element to the item in index[0] of units2

#main function
#contains the if statements which select which conversion to use
def convert_Temp():
    currentTemp = float(initialTemp.get())
    cu1 = fromUnit.get()
    cu2 = toUnit.get()

    if (cu1, cu2) == ('Celsius', 'Celsius'):
        c_c()
    elif (cu1, cu2) == ('Celsius', 'Kelvin'):
        c_k()
    elif (cu1, cu2) == ('Celsius', 'Fahrenheit'):
        c_f()
    elif (cu1, cu2) == ('Fahrenheit', 'Fahrenheit'):
        f_f()
    elif (cu1, cu2) == ('Fahrenheit', 'Celsius'):
        f_c()
    elif (cu1, cu2) == ('Fahrenheit', 'Kelvin'):
        f_k()
    elif (cu1, cu2) == ('Kelvin', 'Kelvin'):
        k_k()
    elif (cu1, cu2) == ('Kelvin', 'Celsius'):
        k_c()
    elif (cu1, cu2) == ('Kelvin', 'Fahrenheit'):
        k_f()
    else:
        messagebox.showerror(title='ERROR', message='Error in the IF statements')

# celsius-celcius conversion
def c_c():
    currentTemp = float(initialTemp.get())
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

# celsius-kelvin conversion
def c_k():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp + 273.15)
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

# celsius-fahrenheit conversion
def c_f():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp * (9/5))+32
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#fahrenheit-fahrenheit conversion
def f_f():
    currentTemp = float(initialTemp.get())
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#fahrenheit-celsius conversion
def f_c():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp - 32)*(5/9)
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#fahrenheit-kelvin conversion
def f_k():
    currentTemp = float(initialTemp.get())
    currentTemp = ((currentTemp - 32)*(5/9)+273.15)
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#kelvin-kelvin conversion
def k_k():
    currentTemp = float(initialTemp.get())
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#kelvin-celsius conversion
def k_c():
    currentTemp = float(initialTemp.get())
    currentTemp = (currentTemp - 273.15)
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

#kelvin-fahrenheit conversion
def k_f():
    currentTemp = float(initialTemp.get())
    currentTemp = (((currentTemp - 273.15)*(9/5))+32)
    currentTemp = round(currentTemp, 2)
    convertedTemp.set(currentTemp)

gui.geometry('+100+100')
#set up the geometry

enterTemp = Entry(gui,textvariable=initialTemp,justify=RIGHT)
enterTemp.grid(row=0,column=0)
#Entry which receives the temperature to convert

convertFromUnit = OptionMenu(gui,fromUnit,*units1)
convertFromUnit.grid(row=0,column=1)
#Option Menu which selects which unit to convert from

displayTemp = Label(gui,textvariable=convertedTemp)
displayTemp.grid(row=1,column=0)
#Label which displays the temperature
#Takes text variable "convertTemp"

convertToUnit = OptionMenu(gui,toUnit,*units2)
convertToUnit.grid(row=1,column=1)
#Option Menu which selects which unit to convert to

convertButton = Button(gui,text='Convert',command=convert_Temp)
convertButton.grid(row=2,column=1)
#Button that starts the conversion
#Calls the main function "convert_Temp"

gui.mainloop()
#End of the main loop 
```

# android - ListView 显示不稳定的数据

> ID：12924464
> 
> 赞同：0
> 
> 时间：2012-10-16T22:31:04.793
> 
> 标签：android, android-listview, android-cursoradapter, android-progressbar, android-cursor

我正在使用 cursoradapter 填充列表视图，其中包含文本、图像和每行中的水平进度条。一切都很好，除了在上下滚动行时所有信息都混淆了。我很确定它与光标如何回收信息以及重新加载它时混淆有关。我似乎无法找到解决此问题的方法，谢谢您的帮助。

```
public class MyDisplayAdapter extends CursorAdapter{
    private final Context context;
    private final Cursor c;

    public MyDisplayAdapter(Context context, Cursor c) {
        super(context,c);
        this.context=context;
        this.c=c;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        long Time = new Date().getTime();

        String savedodom=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_ODOM));
        String savedmiles=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_MILES));
        String savedtime=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_Q));

        long timer = Long.valueOf(savedtime);

        long realtime = Time-timer;

        int w = Integer.parseInt(savedmiles);

        int g = Integer.parseInt(savedodom);

        long m = realtime;
        int l = (int) m;

        int frealtime = l/10000;

        int ght = 8640/w;

        int k = frealtime/ght;

        int frd = g+k;

        long bn = (long) frd;

        ImageView imageicon = (ImageView) view.findViewById(R.id.button1);

        String eid=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_ID));
        TextView t4 = (TextView) view.findViewById(R.id.id);

        String ename=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_NAME));
        TextView t1 = (TextView) view.findViewById(R.id.text1);
        t1.setText(ename);
        if(t1.getText().toString().equals("Brake Pads")){
            imageicon.setBackgroundResource(R.drawable.mtire);
        }
        if(t1.getText().toString().equals("Air Filter")){
            imageicon.setBackgroundResource(R.drawable.maiffilter);
        }

         String edept=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_DEPT));
         TextView t2 = (TextView) view.findViewById(R.id.text3);

        String eage=cursor.getString(cursor.getColumnIndex(EmployeeDatabase.EMP_AGE));

        int x = Integer.valueOf(eage);
        int x2 = Integer.valueOf(edept);
        int ww = x2+x;
        int trb = ww-frd;
        TextView t3 = (TextView) view.findViewById(R.id.textView7);

        ProgressBar pg = (ProgressBar)view.findViewById(R.id.progressBar1);
        pg.setProgress(trb);
        pg.setMax(x);

        int pet = pg.getMax();
        int prog = pg.getProgress();
        t2.setText(""+x);
        t4.setText(""+pet);
        t3.setText(""+prog);

        if(trb < 10){
            t3.setTextColor(Color.RED);
        }
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.item, null, false);
        return rowView;
    } 
```

在我的主要活动中

```
db=new EmployeeDatabase(this);
c=db.query(EmployeeDatabase.EMP_TABLE, null,
        null,null,null,null,null);

MyDisplayAdapter adapter = new MyDisplayAdapter(this, c);// OWN ADAPTER
ListContent.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:36:54.323

任何时候使用适配器时，都应该使用 if-else 而不是 just if。你有你的 bindView 方法在做：

```
if(t1.getText().toString().equals("Brake Pads")){
    imageicon.setBackgroundResource(R.drawable.mtire);
} 
```

这意味着如果它是真的，但不再是，drawable 不会被重置。做类似的事情：

```
if(t1.getText().toString().equals("Brake Pads")){
    imageicon.setBackgroundResource(R.drawable.mtire);
}
else {
    imageicon.setBackgroundResource(defaultResourceId)
} 
```

此外，只是一个随机建议，请考虑使用 ViewHolder，因为它会帮助您提高性能。您还可以将光标行转储到[ContentValues](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fcontent%2FContentValues.html&ei=e-F9UN7pLc_iigKVyoCgDw&usg=AFQjCNGGbXSstIL5HE2a-ITa9d9pdKnGXA&sig2=jFV4yuL9Qc33kTczPz5pUw)对象，因此您不必调用 cursor.getString(cursor.getColumnIndex(key))

# mongodb - MongoDB 高级查询：获取数组中匹配第二个条件的元素

> ID：12924465
> 
> 赞同：6
> 
> 时间：2012-10-16T22:31:04.643
> 
> 标签：mongodb

我们有一组具有以下结构的元素：

要素：

```
{
id : 123,
items : [ { color: "blue", "groups" : [3, 5] }, { color: "red", "groups" : [6, 8] } ]
}

{
id : 124,
items : [ { color: "blue", "groups" : [1, 2] }, { color: "green", "groups" : [5, 9] } ]
} 
```

我们想要一种有效的方法来获取具有可访问组 5、9、27、123 或 56 的蓝色项目的元素。这应该返回 ID 为 123 的元素，但不返回 ID 为 124 的元素，因为项目必须满足这两个条件。我们希望查询尽可能高效。

此查询高效但不满足要求：

```
{$and : { "items.groups" : { $in : [5, 9, 27, 123, 56] }, "items.color" : "blue" }} 
```

因为它会匹配`id = 124`，因为它有一个匹配“蓝色”的项目和另一个匹配第 9 组的项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T22:45:38.040

您需要使用[`$elemMatch`](http://docs.mongodb.org/manual/reference/operator/elemMatch/)，因为您正在寻找匹配单个数组元素的多个属性：

```
db.test.find({ items: { $elemMatch: { 
    color: "blue", 
    groups: { $in: [5, 9, 27, 123, 56] } 
}}}); 
```

# ruby-on-rails - Capistrano 与 PostgreSQL，错误：其他用户正在访问数据库

> ID：12924466
> 
> 赞同：30
> 
> 时间：2012-10-16T22:31:05.423
> 
> 标签：ruby-on-rails, postgresql, capistrano

我有一个使用 PostgreSQL 作为后端的 Rails 应用程序，它带有一个尝试模仿生产的证书环境，除了它需要定期重置数据库以进行质量检查。

当我在部署期间尝试`db:reset`从 Capistrano 任务执行时，出现错误：

`ERROR: database "database_name" is being accessed by other users`

并且数据库不能作为重置任务的一部分被删除，从而导致部署失败。有没有办法可以从 Capistrano 重置数据库连接，以便成功删除表？从 Capistrano 任务将 SQL 通过管道传输到 psql 可能有效，但我想知道是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-16T22:59:03.783

使用 PostgreSQL，您可以发出以下语句来返回除此之外的所有打开连接的后端 pid：

```
SELECT pid FROM pg_stat_activity where pid <> pg_backend_pid(); 
```

然后您可以向每个后端发出终止请求

```
SELECT pg_terminate_backend($1); 
```

将从第一条语句返回的 pid 绑定到每个 pg_terminate_backend exec。

如果其他连接没有使用与您相同的用户，则您必须以超级用户身份连接才能成功发出终止。

*   [管理信号功能文档](http://www.postgresql.org/docs/current/static/functions-admin.html#FUNCTIONS-ADMIN-SIGNAL)
*   [监控统计功能](http://www.postgresql.org/docs/current/static/monitoring-stats.html#MONITORING-STATS-FUNCTIONS)
*   [pg_stat_activity 查看文档](http://www.postgresql.org/docs/current/static/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)

更新：合并评论并表达为 Capistrano 任务：

```
desc "Force disconnect of open backends and drop database"
task :force_close_and_drop_db do
  dbname = 'your_database_name'
  run "psql -U postgres",
      :data => <<-"PSQL"
         REVOKE CONNECT ON DATABASE #{dbname} FROM public;
         ALTER DATABASE #{dbname} CONNECTION LIMIT 0;
         SELECT pg_terminate_backend(pid)
           FROM pg_stat_activity
           WHERE pid <> pg_backend_pid()
           AND datname='#{dbname}';
         DROP DATABASE #{dbname};
      PSQL
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:45:07.973

我将[dbenhur 的答案](https://stackoverflow.com/questions/12924466/killing-postgresql-connections-from-capistrano/12924735#12924735)与 Capistrano 任务结合起来，以达到我需要的结果，就像一个魅力：

```
desc 'kill pgsql users so database can be dropped'
task :kill_postgres_connections do
  run 'echo "SELECT pg_terminate_backend(procpid) FROM pg_stat_activity WHERE datname=\'database_name\';" | psql -U postgres'
end 
```

这假定用户 postgres 的 auth_method 在 pg_hba.conf 中设置为“信任”

然后你可以在你的部署任务之后`update_code`和之前调用它`migrate`

```
after 'deploy:update_code', 'kill_postgres_connections' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T14:49:46.903

您可以简单地对执行删除的 ActiveRecord 代码进行猴子补丁。

对于 Rails 3.x：

```
# lib/tasks/databases.rake
def drop_database(config)
  raise 'Only for Postgres...' unless config['adapter'] == 'postgresql'
  Rake::Task['environment'].invoke
  ActiveRecord::Base.connection.select_all "select pg_terminate_backend(pg_stat_activity.pid) from pg_stat_activity where datname='#{config['database']}' AND state='idle';"
  ActiveRecord::Base.establish_connection config.merge('database' => 'postgres', 'schema_search_path' => 'public')
  ActiveRecord::Base.connection.drop_database config['database']
end 
```

对于 Rails 4.x：

```
# config/initializers/postgresql_database_tasks.rb
module ActiveRecord
  module Tasks
    class PostgreSQLDatabaseTasks
      def drop
        establish_master_connection
        connection.select_all "select pg_terminate_backend(pg_stat_activity.pid) from pg_stat_activity where datname='#{configuration['database']}' AND state='idle';"
        connection.drop_database configuration['database']
      end
    end
  end
end 
```

（来自：[http](http://www.krautcomputing.com/blog/2014/01/10/how-to-drop-your-postgres-database-with-rails-4/) ://www.krautcomputing.com/blog/2014/01/10/how-to-drop-your-postgres-database-with-rails-4/ ）

# php - 只有时间的时间函数返回

> ID：12924469
> 
> 赞同：-8
> 
> 时间：2012-10-16T22:31:12.343
> 
> 标签：php, time

我知道 php time() 函数。但我只想让它返回当前时间。没有其他的。

`16:23`. 没有下午，没有上午，没有日期，没有秒。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:34:23.323

您可以通过格式化字符来做到这一点：

```
echo date("H:i"); 
```

看[这里](http://php.net/manual/en/function.date.php)。

# ruby-on-rails - RubyMine 4.5：如何在调试期间进入上下文感知 Rails 控制台？

> ID：12924473
> 
> 赞同：2
> 
> 时间：2012-10-16T22:31:29.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubymine, ruby-debug

例如，在 RubyMine 中调试时的断点暂停期间，您如何进入 Rails 控制台会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:56:11.763

AFAIK，这是不可能的。我能弄清楚的最接近的是在调试器中评估上下文感知表达式：http: [//www.jetbrains.com/ruby/webhelp/evaluation-expressions.html](http://www.jetbrains.com/ruby/webhelp/evaluating-expressions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T17:05:28.283

[您可以通过 PID 使用hijack](https://github.com/ileitch/hijack)进入现有的 ruby​​ 进程。

# asp.net-mvc - 重定向到 MVC 中的不同视图

> ID：12924475
> 
> 赞同：0
> 
> 时间：2012-10-16T22:31:40.813
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有几个 HTML 文件，我想将它们包含在我的 MVC 项目中。我想得到如下结果：

```
www.Test.com/Products/

www.Test.com/Products/Drinking/
www.Test.com/Products/Drinking/Product1
www.Test.com/Products/Drinking/Product2
www.Test.com/Products/Drinking/Product3

www.Test.com/Products/Cleaning/
www.Test.com/Products/Cleaning/Product1
www.Test.com/Products/Cleaning/Product2
www.Test.com/Products/Cleaning/Product3

www.Test.com/Products/SkinCare/
www.Test.com/Products/SkinCare/Product1
www.Test.com/Products/SkinCare/Product2
www.Test.com/Products/SkinCare/Product3 
```

创建控制器的最佳方法是什么以及如何将我的文件放在嵌套视图中？或任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:42:43.027

Products 可以是您的控制器 Drinking、Cleaning 和 SkinCare 可以是 action，其中 product1 product2 product3 是传递给 action 的 id。

然后根据 productId 返回您想要的任何视图。或者基于名为 Product 的类创建一个强类型视图，并将产品对象传递给视图。

```
 public class ProductsController : Contoller
   {
       public ActionResult Cleaning(string id)
       {
            Product p = new Product();
            //create the product based on the id

           return view(p);

        }

    } 
```

或返回特定的视图名称

```
return view("Product1"); 
```

或者对于强类型视图

```
return view("Product1",p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:36:37.533

[ASP] 框架本身应该为您处理路由。模型、控制器和视图都应该遵循特定的命名约定，从而产生正确的 URL。

# localization - 用于 Web 应用程序的多语言应用程序工具包

> ID：12924478
> 
> 赞同：5
> 
> 时间：2012-10-16T22:31:53.340
> 
> 标签：localization, windows-8, asp.net-mvc-4, visual-studio-2012, multilingual

我遇到了这个非常有趣的工具，用于 Windows 应用程序的 Visual Studio 2012 开发，称为多语言应用程序工具包 - 更多信息[在这里](http://blogs.msdn.com/b/windowsappdev/archive/2012/10/03/multilingual-app-toolkit-for-developing-windows-store-apps-using-visual-studio-2012.aspx)

这是非常聪明的，它如何根据选定的语言等生成资源。

作为开发多语言应用程序的 Web 应用程序开发人员，我会喜欢具有相同功能的类似产品。例如，我目前正在为需要支持多种语言的客户开发 MVC4 应用程序。有这样的工具可以帮助我吗？或者是否可以为此类网站使用多语言应用工具包？还有其他类似的工具吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-22T00:16:39.607

Multilingual App Toolkit v3.0 现在支持 ASP.NET MVC 项目。见博客公告：http: [//blogs.msdn.com/b/matdev/archive/2014/04/14/announcing-multilingual-app-toolkit-v3-0.aspx](http://blogs.msdn.com/b/matdev/archive/2014/04/14/announcing-multilingual-app-toolkit-v3-0.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:47:45.910

您只需执行 Visual Studio 扩展在 Windows Phone/Windows Store 项目中为您执行的操作即可。该扩展将一些 MSBuild 导入放在您的项目文件中，并设置您现有的资源文件，以便使用 XLIFF 文件生成这些文件。

详情请见：[http ://damsteen.nl/blog/using-the-microsoft-multilingual-app-toolkit-with-asp.net-mvc-or-any-other-.net-project-type](http://damsteen.nl/blog/using-the-microsoft-multilingual-app-toolkit-with-asp.net-mvc-or-any-other-.net-project-type)

# javascript - 子字符串不返回正确的文本？

> ID：12924484
> 
> 赞同：-2
> 
> 时间：2012-10-16T22:32:36.870
> 
> 标签：javascript, jquery, greasemonkey

我很难理解为什么变量在以下代码中无法正常工作。

```
var welcomeMsg = $('#accountbar span.welcome_text').text(); // This returns "Welcome, Nick(account)      "
var cutdown = welcomeMsg.slice(0, -6); // This removes excessive spaces after (account) 
cutdown = cutdown.slice(cutdown.indexOf(",")+2,cutdown.indexOf("(")); // returns "Nick"

var username = cutdown;  // "Nick" //This doesn't work with last line of the script
//alert(username);
//var username = "Nick"  // but this works if it's used instead of  var username = cutdown;
//alert(username);

$("td:contains('"+username+"')").parent().css({
    "background" : "url('http://imagehost.com/forum/row1.png')"
}); 
```

这是一个 Greasemonkey 脚本，如果这很重要的话。

**已解决：** 这似乎`.trim`是删除所需字符串周围过多空格的更好方法。如果这个脚本非常适合我

```
var cutdown = welcomeMsg.slice(0, -6); // This removes excessive spaces after (account) 
cutdown = cutdown.slice(cutdown.indexOf(",")+2,cutdown.indexOf("(")); 
```

替换为这个

```
var cutdown = welcomeMsg.slice(welcomeMsg.indexOf(",")+2,welcomeMsg.indexOf("("));
cutdown = cutdown.trim(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:17:01.980

`slice()`and`indexOf()`方法不能可靠地消除用户名周围的麻烦。使用正则表达式获得更健壮/灵活的方法。

此外，即使选择了正确的行，由于服务器问题、热链接阻塞等原因，仅设置这样的背景可能会失败。如果图像加载没有占用，请设置颜色作为备份。考虑`@require`使用图像以减少服务器依赖性（其他问题的主题/涵盖的主题）。

这是应该工作得更好的代码。（[**在 jsFiddle 上查看它的实际操作**](http://jsfiddle.net/sxYZf/)）：

```
var welcomeMsg  = $('#accountbar span.welcome_text').text ();
var userName    = welcomeMsg.replace (
    /^\s*Welcome,\s*([^\(]+)\((?:\n|\r|.)+$/i, 
    "$1"
);
userName        = $.trim (userName);

$("tr:contains('" + userName + "')").css ( {
    "background-color": "lime",
    "background-image": "url('http://imagehost.com/forum/row1.png')"
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:47:28.333

似乎对我来说很好..我使用的是**颜色**而不是**图像**

[检查小提琴](http://jsfiddle.net/sushanth009/QVEfe/1/)

```
var welcomeMsg="Welcome, Nick(account)      " // This returns "Welcome, Nick(account)    "

console.log("'" + welcomeMsg + "'");

var cutdown = welcomeMsg.slice(0, -6); // This removes excessive spaces after (account) 

console.log("'" + cutdown + "'");
cutdown = cutdown.slice(cutdown.indexOf(",")+2,cutdown.indexOf("(")); // returns "Nick"

console.log("'" +cutdown+ "'");
var username = cutdown;  

$("td:contains('"+username+"')").parent().css({   "color" : "red"});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T09:12:46.600

`.trim`修复了使用它而不是`.slice`

# php - 如何通过 jquery/ajax 从 php 获取数组值并将其传递给另一个 php 文件？

> ID：12924498
> 
> 赞同：0
> 
> 时间：2012-10-16T22:34:30.033
> 
> 标签：php, arrays, jquery

这是我的php代码，`$contents`必须在更改事件之后传递..

```
<?php

    if($flag == true){
        $contents = $store; // this is the array that needs to be passed
        $color = array();
        foreach($store as $item){
            $color[] = $item['color'];
        }
        $u_color = array();
        $u_color = array_unique($color);
        echo '<label>Available Colors:</label>
        <select id="color">
            <option>Select a color</option>';
        foreach($u_color as $item){
            echo '<option>'.$item.'</option>';
        }
        echo '</select>';
    }

    ?> 
```

这是我的 jquery/ajax 代码，应该在更改事件之后触发

```
$(function () {
    $('#color').live('change', function () {
        var data = <? php echo json_encode($contents); ?> ;
        var the_array = $.parseJSON(data);
        $.ajax({
            url: 'wp-content/themes/twentyeleven-child/receiver.php',
            type: 'post',
            data: {
                data: the_array
            },
            datatype: 'json',
            success: function () {

            }
        });
    });
}); 
```

这是我的`receiver.php`

```
 <?php

print_r($_POST['data']);

?> 
```

这是包含我的内容`$contents`：

```
 Array
(
    [0] => Array
        (
            [size] => 2
            [price] => $59.00
            [color] => Black
        )

    [1] => Array
        (
            [size] => 4
            [price] => $59.00
            [color] => Black
        )

    [2] => Array
        (
            [size] => 6
            [price] => $59.00
            [color] => Black
        )

    [3] => Array
        (
            [size] => 8
            [price] => $59.00
            [color] => Black
        )

    [4] => Array
        (
            [size] => 10
            [price] => $59.00
            [color] => Black
        )

    [5] => Array
        (
            [size] => 12
            [price] => $59.00
            [color] => Black
        )

    [6] => Array
        (
            [size] => 14
            [price] => $59.00
            [color] => Black
        )

    [7] => Array
        (
            [size] => 16
            [price] => $59.00
            [color] => Black
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:37:49.703

尝试这个

```
 var the_array = $array.join() ; 
```

将以逗号分隔的字符串形式加入数组，这可以传递给 Ajax 请求。

否则，您可以序列化您的数组并将数组对象也传递给您的请求，

```
 vat the_array = $array.serializeArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:42:57.943

我在这里没有看到实际的 Ajax 请求……使用`$.ajax`……或`$.post`……或`$.get`

编辑和添加：

`var data = '<?php echo json_encode($array);?>'; var the_array= $.parseJSON(data);`

一个完整的例子：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>
<?php
  $array = array();
  $array['id'] = '2335';
  $array['data'] = 'data string';
?>

<script type="text/javascript">
$(function() {
  var data = '<?php echo json_encode($array);?>';
  var the_array = $.parseJSON(data);
  // keep in mind that the_array is Object not Array 
  // may be you should convert it to an Array
  // other way is to post 'data' adding it to array  var the_array = ('data': data);   
});
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T22:46:37.647

## 向页面发送ajax请求

你可以使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)通过 POST 将你的数组发送到服务器（你的代码缺少一些东西）

```
$.ajax({
  type: 'POST',
  url: 'receiver.php',
  data: { myarray: the_array },
  success: function(data){
    // executed on success
  },
  dataType: dataType
}); 
```

## 初始化渲染页面中的值

如果您想在呈现的 PHP 模板中将一些代码传递给 js，请使用`json_encode()`将您的 PHP 数组/对象“转换”为 JavaScript Object Notation 字符串：

```
<script>
var the_array = <?php print json_encode($the_array); ?>;
// ...
</script> 
```

## 回复异步（ajax）请求

如果你想`receiver.php`返回一些 json 给调用者（例如成功函数），只需打印它

```
<?php

// .. do stuff here ..

header('Content-type: application/x-json');
print json_encode($the_array);

?> 
```

然后，您将“自动”获得`$the_array`回调。`data``success:`

# java - 将 Tapestry 与 Primefaces 一起使用？

> ID：12924505
> 
> 赞同：1
> 
> 时间：2012-10-16T22:35:32.013
> 
> 标签：java, jakarta-ee, primefaces, tapestry

是否可以将 Tapestry 与 Primefaces 一起使用？我想知道，因为 primefaces 使用 xhtml 标签来构建网页。Tapestry 不使用 xhtml 而是拥有 *tml 文件格式。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:26:47.560

好...

由于 Tapestry 实际上是 JSF 的替代 MVC 框架（您可以选择 JSF 或 Tapestry ，但不能同时选择两者），所以答案是**否定**的，您要么选择 JSF 作为 MVC 框架 + Primefaces 作为组件套件，要么选择 Tapestry 作为 MVC框架。

请参阅[Java Server Faces 2.0 或 Tapestry 5.2？](https://stackoverflow.com/questions/3831807/java-server-faces-2-0-or-tapestry-5-2)

# node.js - 在 NodeJS 中：是否可以同时执行两个回调？

> ID：12924526
> 
> 赞同：4
> 
> 时间：2012-10-16T22:37:21.243
> 
> 标签：node.js

假设我有这个代码：

```
function fn(n)
{
  return function()
  {
    for(var k = 0; k <= 1000; ++k) {
      fs.writeSync(process.stdout.fd, n+"\n");
    }
  }
}

setTimeout(fn(1), 100);
setTimeout(fn(2), 100); 
```

是否有可能`1`并且`2`可以`stdout`互换打印（例如`12121212121...`）？

我已经对此进行了测试，但它们并没有互换使用，即`1111111...222222222...`，但很少有测试无法证明，我担心会发生类似的`111111211111...2222222...`事情。

换句话说：当我在 Node 中注册一些回调和事件处理程序时，两个回调可以同时执行吗？

（我知道这可以通过启动两个进程来实现，但是我们会有两个`stdout`，上面的代码将被拆分成单独的文件，等等。）

另一个问题：忘记节点并笼统地说：在单个进程上的任何语言中，两个函数是否可以同时执行（即以与上述相同的方式）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:39:46.220

不，每个回调都将在其自己的“执行框架”中执行。在其他语言中，如果操作发生在不同的线程中，则可能会出现“并行执行”和潜在的冲突，因为由此引起的锁定是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:57:20.110

只要回调代码是纯同步的，就没有两个函数可以并行执行。开始在内部使用一些异步的东西，比如获取网络结果或插入数据库，tadam：你会遇到并行问题。

# php - 如何使用 xpath 解析此 XML 以直接获取元素？

> ID：12924529
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:37:45.523
> 
> 标签：php, xpath

> **可能重复：**
> [使用 SimpleXML 使用命名空间解析 XML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

我是 xpath 的新手，无法解析它。它不产生任何输出。

这包含从 Google Map API V3 返回的 XML。我想让它解析并从 PostalCode/PostalCodeNumber 返回邮政编码。我设置了这个测试，因为我需要能够确保我可以访问 PostalCode/PostalCodeNumber，即使 Google 的 API 会阻碍其他标签，有时会这样做。因此，让 xpath 正常工作对我来说很重要，因为我希望能够直接访问 PostalCode/PostalCodeNumber 等内容，而无需依赖静态树结构路径。请善意和帮助您的回复，谢谢！

```
<?php

$xml = <<<XML
<?xml version="1.0" encoding="UTF-8" ?>
<kml xmlns="http://earth.google.com/kml/2.0"><Response>
  <name>40.74445606,-73.97495072</name>
  <Status>
    <code>200</code>
    <request>geocode</request>
  </Status>
  <Placemark id="p1">
    <address>317 E 34th St, New York, NY 10016, USA</address>
    <AddressDetails Accuracy="8" xmlns="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"><Country><CountryNameCode>US</CountryNameCode><CountryName>USA</CountryName><AdministrativeArea><AdministrativeAreaName>NY</AdministrativeAreaName><Locality><LocalityName>New York</LocalityName><Thoroughfare><ThoroughfareName>317 E 34th St</ThoroughfareName></Thoroughfare><PostalCode><PostalCodeNumber>10016</PostalCodeNumber></PostalCode></Locality></AdministrativeArea></Country></AddressDetails>
    <ExtendedData>
      <LatLonBox north="40.7458050" south="40.7431070" east="-73.9736017" west="-73.9762997" />
    </ExtendedData>
    <Point><coordinates>-73.9749507,40.7444560,0</coordinates></Point>
  </Placemark>
</Response></kml>
XML;

$xml = new SimpleXMLElement($xml);

$result = $xml->xpath('PostalCode/PostalCodeNumber');

while(list( , $node) = each($result)) {
    echo 'PostalCode/PostalCodeNumber: ',$node,"\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:11:33.370

邮政编码位于命名空间中。您必须在 XPath 表达式中指定命名空间以匹配元素：

```
$xml = new SimpleXMLElement($xml);
$xml->registerXPathNamespace('urn', 'urn:oasis:names:tc:ciq:xsdschema:xAL:2.0');
$result = $xml->xpath('//urn:PostalCodeNumber'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:05:22.607

使用[`descendant::PostalCode`](http://www.xpathtester.com/obj/ea8bf906-b05b-47bd-8ab1-21b82e3b0874) 或[`//PostalCode`](http://www.xpathtester.com/obj/4ca95a77-c9a6-4fa8-bc1f-8ec23180e39b)。

请注意，在上面的链接中，我从您的 xml 中删除了命名空间定义以使其正常工作。查看[http://www.edankert.com/defaultnamespaces.html#Conclusion](http://www.edankert.com/defaultnamespaces.html#Conclusion)以获得清晰的解释。

[有关易于理解的 XPath 介绍，请参阅 W3Schools](http://www.w3schools.com/xsl/xpath_syntax.asp)。

# java - Java静态方法变量在编译时解析，在运行时加载？

> ID：12924533
> 
> 赞同：2
> 
> 时间：2012-10-16T22:37:51.293
> 
> 标签：java, time, static, compilation

我正在阅读 Java 中的静态方法和变量，发现下面两篇关于堆栈溢出的文章。

[Java中的静态方法总是在编译时解析吗？](https://stackoverflow.com/questions/1039229/are-static-methods-in-java-always-resolved-at-compile-time?rq=1) 这就是说，静态方法是在编译时解析的。

[java，运行时或编译时何时加载静态变量？](https://stackoverflow.com/questions/4343760/when-is-static-variable-loaded-in-java-run)时间或编译时间

这就是说，静态方法是在编译时加载的。

编译器在解析静态变量/方法时不应该加载它们（比如在编译时）吗？令人困惑！有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T22:48:04.413

在我看来，您似乎对“解决”和“加载”这两个术语的含义感到困惑。

解析方法/变量意味着准确地决定调用哪个方法/变量。例如，实例方法是在运行时完成的，这导致子类能够覆盖超类的方法（多态性）。然而，静态方法不能被覆盖并且在编译时被解析。

加载变量意味着实际上将值放入内存。当然，这只能在运行时发生。具体来说，在加载类本身时会加载一个静态变量。

# css-float - 向左浮动多个元素

> ID：12924535
> 
> 赞同：0
> 
> 时间：2012-10-16T22:37:57.157
> 
> 标签：css-float

我有 8 个 div，我让它们都向左浮动，因为我希望它们都在同一行并溢出它们的容器。出于某种原因，它们是成对的，我不确定为什么。这是 jsfiddle [http://jsfiddle.net/wp9jB/](http://jsfiddle.net/wp9jB/)

这是代码：

```
.standard_containers {
width:275px;
padding-top:15px;
padding-right:10px;
padding-left:10px;
padding-bottom:15px;
float:left;
margin-left:7px;
margin-right:7px;
}

<div style="width:690px;border:1px solid red;position:relative;">

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<div class="standard_containers shadow gradient_2">

<p class="head_med_blue">Physical Thearpy Protocols</p>

</div>

<br style="clear:both;" />
</div> 
```

​​​

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:45:31.103

它们成对出现，因为您`<div>`的宽度为 690 像素。将一个“列”中的所有项目设置为 320 像素 - 将一个“行”中的所有项目设置为 2500 像素。

如果 div的宽度*必须*为 690px，`<div style="width:320px;border:1px solid red;margin-right:370px;">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T03:06:54.957

如果您希望所有 8 个元素都在同一行上适合该 div，那么您将不得不减小 .standard_container 类的大小

```
<style type="text/css">
   .standard_containers {
        width:60px;
        padding:15px 6px;
        float:left;
        margin:0 7px;
    } 
</style> 
```

我使用的是简写，而不是 padding-top、padding-bottom、margin-top 等，第一个数字是顶部和底部，第二个数字是左右。

# sql - 在 where 子句中使用 decode

> ID：12924538
> 
> 赞同：0
> 
> 时间：2012-10-16T22:38:00.400
> 
> 标签：sql, oracle, plsqldeveloper

我的条款`DECODE`中`WHERE`有这样的：

```
Where id = decode('&flag','Yes',(Select id from tab where id > 10),0) 
```

如果子查询返回一篇文章，则此代码有效。如果我返回多个，我会收到一个错误，例如 ORA-01427，“单行子查询返回多于一行”

我试图将 '=' 更改为 'in' 但我仍然遇到同样的错误！

有任何想法吗？

扩展示例：

```
WHERE Dop_id = (DECODE ('&prep_flag', 'Yes', 
    (SELECT Dop_id FROM 
                   ( SELECT DOP_id, name FROM TABLE)
                    WHERE name IS NOT NULL) 
 , Dop_id)) 
```

如前所述，如果选择状态返回行，而不是几个，则此方法有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:57:31.923

假设解码只需要一个值，`Select id from tab where id > 10`我会尝试将选择移到解码之外：

```
WHERE id IN (
    SELECT decode('&flag', 'Yes', id, 0)
    FROM tab
    WHERE id > 10
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:44:38.527

```
WHERE Dop_id IN 
      ( CASE &flag
        WHEN 'Yes'
        THEN (SELECT Dop_id 
                FROM TABLE
               WHERE name IS NOT NULL)
        ELSE Dop_id); 
```

# c++ - 临时结构对象构造函数奇调用

> ID：12924539
> 
> 赞同：1
> 
> 时间：2012-10-16T22:38:06.313
> 
> 标签：c++, compiler-construction

我不明白这段代码应该在 C 和 C++ 中提供不同的行为（在 C 和 C++[中有效的代码在用每种语言编译时会产生不同的行为吗？](https://stackoverflow.com/questions/12887700/can-code-that-is-valid-in-both-c-and-c-produce-different-behavior-when-compile)）

```
#include <stdio.h>

struct f { };

int main() {
    f();
}

int f() {
    return printf("hello");
} 
```

为什么我可以在 C++ 中调用 f()？它是默认构造函数（顺便说一句，我没有看到，还有另一个“隐式”吗？）？在不调用 f() 函数的 C++ 中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:43:29.537

每个类都有一个隐式的默认构造函数，除非你定义了其他构造函数。这个类的定义`f`：

```
struct f { }; 
```

相当于：

```
struct f { 
    f() = default;
    // same for copy constructors, move constructors, destructor, etc
}; 
```

所以是的，在 main 内部，你正在初始化值（或默认初始化，这里是一样的），一个类型为 的对象`f`。

至于为什么它不调用函数`f`，好吧，里面`main`没有`f`可用的函数的声明或定义。命名的唯一可见符号`f`是上面定义的结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T23:19:07.573

在 C++ 中，表达式`T()`where `T`is a type 是创建一个*值初始化*的临时变量。请注意，这与一般对构造函数的调用不同（特别是对于 POD 类型它是不同的）。

# ibm-mq - 在 IBM MQ 中自动清除队列中的消息

> ID：12924543
> 
> 赞同：4
> 
> 时间：2012-10-16T22:38:37.420
> 
> 标签：ibm-mq

我想知道您是否有办法配置队列以自动清除消息？我们正在努力部分实现我们架构的一个组件，并希望能够发送到队列，但让队列自动删除正在发送的消息，这样我们就不必运行脚本等来执行清理-向上。

到目前为止，我唯一能找到的是运行 CLEAR QLOCAL 或将消息设置为从发布应用程序过期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-07-27T17:30:37.373

对于您的用例，IBM MQ 中有几个选项：

1.  创建一个 QALIAS 指向一个 TOPIC 对象，该对象具有一个没有订阅者的主题字符串，发送给 QA 的消息将消失。
2.  让发送应用程序设置消息到期。
3.  使用 IBM MQ`CAPEXPRY`功能在队列级别以管理方式强制消息到期。
4.  运行脚本以`CLEAR QLOCAL`针对队列发出。队列上不能有打开的句柄才能正常工作。
5.  `CLEAR QLOCAL`以编程方式对队列发出等效的 PCF 命令。队列上不能有打开的句柄才能使其工作。
6.  针对队列运行 IBM MQ`dmpmqmsg`实用程序以读取和丢弃消息。

# javascript - 如何将单选按钮集动态添加到页面

> ID：12924548
> 
> 赞同：0
> 
> 时间：2012-10-16T22:39:13.070
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试创建一组单选按钮，我可以通过单击按钮轻松克隆它们。我遇到了困难，因为底层 HTML 需要将标签附加到 DOM 树上的特定 ID。我对如何使用 javascript 安全地将新代码注入 DOM 的理解是，我不能使用 ID，因为它们都必须是唯一的。是否有一种可接受的方法来进行这种类型的克隆，而无需维护额外的 javascript 变量来将单选按钮 ID 组合在一起？

另外：我需要能够自由删除这些按钮集。

[可以在http://jsfiddle.net/MrvYc/3/](http://jsfiddle.net/MrvYc/3/)找到一个说明问题和我想要完成的小提琴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:09:47.690

要将标签与收音机链接，而不是使用 JS 变量来维护，您可以生成一个唯一的 ID，如 GUID，并直接使用它。

删除块时，不需要ID，因为你有块内的关闭HTMLElement，你可以使用parent()函数和remove()函数来完成这项工作。

这是一个例子：

```
/**
 * Generate a guid part
 */
function GuidPart()
{
    return Math.floor(Math.random() * 0x10000).toString(16);
}

/**
 * Generate a new GUID
 */
function getGuid()
{
    return (GuidPart() + GuidPart() + "-" +
            GuidPart() + "-" +
            GuidPart() + "-" +
            GuidPart() + "-" +
            GuidPart() + GuidPart() + GuidPart());
}

/**
 * Build a new block with radio, label and close span
 */
function buildNewRadio(labelText)
{
    // Retrieve a new guid
    var guid = getGuid();

    // Create a span container with the radio and label inside
    // linked together by the guid
    var container = $(document.createElement("span")).append(
        $(document.createElement("input")).attr('id', guid),
        $(document.createElement("label")).attr('for', guid).val(labelText))
        .addClass("container");

    // Finally append the close span (use to remove the entiere block)
    container.append(
        $(document.createElement("span").addClass("close")
            .click(function(mouseEvent) {
                // Retrieve the span container and remove it
                $(this).parent().remove();
            }));

    return container;
} 
```

您可以调用 buildNewRadio 函数并将结果 HTMLElement 附加到您的 DOM 容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:08:22.470

每次将新输入添加到 DOM 时，我通常只会将自动生成的 ID 加一：

```
<input type="button" id="addRadio" value="Add Radio Button" />
            <div id="container">
                <input type="radio" name="myRadio" id="myRadio1" />
                <label for="myRadio1">Radio 1</label>
            </div>

<script type="text/javascript">
            $(document).ready(function() {
                var maxId = 0;
                $('#addRadio').click(function() {
                    var nextId = (!maxId) ? $("input[name='myRadio']").length + 1 : maxId + 1;
                    var wrap = $('<div>').attr('id', 'wrap' + nextId);
                    wrap.append($('<input>').attr({
                        type : 'radio',
                        name : 'myRadio',
                        id : 'myRadio' + nextId
                    }));
                    wrap.append($('<label>').attr({
                        for : 'myRadio' + nextId
                    }).html('Radio' + nextId));
                    wrap.append($('<a>').attr({
                        href : 'javascript:void(0);'
                    })
                    .click(function() {
                        $('#wrap' + nextId).remove();
                    })
                    .html('Delete'));
                    $('#container').append(wrap);

                    maxId = nextId;
                });
});
</script> 
```

# python - PyQt4 QPixmap根据EXIF旋转Jpg

> ID：12924550
> 
> 赞同：1
> 
> 时间：2012-10-16T22:39:27.380
> 
> 标签：python, pyqt4, exif, image-rotation

考虑一个[简单的`PyQt4`应用程序，加载图片`QPixmap`](http://zetcode.com/tutorials/pyqt4/widgets2/)并[使用 ratio 缩放](https://stackoverflow.com/a/9351984/544721)。

代码的关键部分：

```
from PyQt4 import QtGui, QtCore
(...)
pixmap = QtGui.QPixmap("example.jpg")
pixmap = pixmap.scaled(1100, 1800, QtCore.Qt.KeepAspectRatio) 
```

当我看到我的照片旋转错误时，我感到很惊讶。

我想，原因是照片包含`EXIF`有关相机位置的信息，应该考虑并应用旋转：

```
$ exiftool example.jpg  | grep -i rot
Orientation                     : Rotate 270 CW
Auto Rotate                     : Rotate 270 CW
Rotation                        : 270 
```

如何做到这一点`PyQt4`，保持接近原始的短程序形式......最好是*短而甜*的*pythonic*方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:13:00.670

您需要一种读取和解析 EXIF 信息的方法。(Py)Qt 没有内置该功能。但是那里有很好的 Python 工具，比如[`pyexiv2`](http://tilloy.net/dev/pyexiv2/overview.html), [`EXIF.py`](https://github.com/ianare/exif-py), [`PyExifTool`](http://smarnach.github.com/pyexiftool/).

获得旋转角度后，很容易将其应用于您的`QPixmap`：

```
pixmap = pixmap.scaled(1100, 1800, QtCore.Qt.KeepAspectRatio)
pixmap = pixmap.transformed(QtGui.QTransform().rotate(angle)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:40:24.493

这不是最优雅的方法，但我发现`exiftool`它安装在我使用的大多数系统上，而软件包`pyexiv2`不一定如此。

我使用`exiftool`了，通过使用以下建议的包装器类：[https](https://stackoverflow.com/a/10075210/544721) ://stackoverflow.com/a/10075210/544721（注意：为了将包装器与 Py3k 一起使用，您需要添加`.encode()`并`.decode()`在适当的位置进行`str<->bytes`转换）

```
pixmap = QtGui.QPixmap('example.jpg')
with ExifTool() as e:
    exif_metadata = e.get_metadata('example.jpg')
    picture_orientation_code = exif_metadata[0]['EXIF:Orientation']
if picture_orientation_code == 8:
    pixmap = pixmap.transformed(QtGui.QTransform().rotate(270))
elif picture_orientation_code == 6:
    pixmap = pixmap.transformed(QtGui.QTransform().rotate(90))
pixmap = pixmap.scaled(1100, 1600, QtCore.Qt.KeepAspectRatio) 
```

仍然 - 我不认为它是最优雅的，但我希望这个答案可以帮助其他读者，直到出现更好的解决方案。

# c++ - 在 C++ 中按字母顺序将节点添加到链表

> ID：12924551
> 
> 赞同：1
> 
> 时间：2012-10-16T22:39:30.183
> 
> 标签：c++, sorting, linked-list

我正在尝试创建一个从用户那里获取单词的链接列表，直到输入为空白，并且每个单词都被添加，因此列表保持字母顺序。但是，只打印第一个节点。有什么我做错了吗？这是我所拥有的（减去标题和声明）：

```
 //put in additional nodes until the input is blank
while(in != " "){
    cin >> in;
    newPtr->data = in;
    prevPtr->data = "";
    prevPtr->next = NULL;
    nextPtr = list;
    //shift the prevPtr and nextPtr until newPtr is alphabetically between them
    while(!(prevPtr->data<=in && nextPtr->data>in)){
        prevPtr = nextPtr;
        nextPtr = prevPtr->next;
    }
    //make newPtr point to the next node
    if(nextPtr != NULL){
        newPtr->next = nextPtr;
    }
    //make newPtr the "next" pointer of the previous node, if any
    if(prevPtr != NULL){
        prevPtr->next = newPtr;
    }
    //if there's nothing before newPtr, make it the first node
    else{
        list = newPtr;
    }
    printList(list);
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:56:51.767

我会将此作为评论发布，因为我担心我可能会遗漏一些东西，但我还不能这样做，所以这里没有答案：

是什么让您无法使用[std::list](http://en.cppreference.com/w/cpp/container/list)？您可以插入一个单词，检查它是否为非空，立即应用标准[排序算法](http://en.cppreference.com/w/cpp/algorithm/sort)（它依赖于排序对象的比较运算符）并打印它。它速度快，您的代码简短易读，而且您无需花费时间重新发明轮子。

PS：如果你想测试一个空字符串，我认为它应该是`""`，而不是。`" "`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:08:02.667

我认为这里有很多问题。

对于初始迭代中的一个，prevPtr->data 指向什么？如果它没有指向任何内容或尚未分配给任何内存，则您不应该将其设置为任何内容。

另外，您需要在每次迭代时为 newPtr 分配内存，否则您只是在覆盖列表中它指向的最后一个内存位置。

其次，假设 prevPtr 指向某个东西，在此 while 循环的第二次迭代（或更多）中，prevPtr 已在列表中向下移动（prevPtr = nextPtr），这将导致 prevPtr->data = "" 擦除其中的任何数据那个元素。所以你可以在之后打印第一个节点加上一堆空格。

第三，您应该首先在循环中检查 list 是否为 NULL，因为如果循环为 NULL，nextPtr->data 将指向垃圾，这是不好的。这个对列表的 NULL 检查可能是第一个元素的极端情况。

尝试这样的事情，我没有时间测试它，但它应该朝着正确的方向发展：

```
Node *list = NULL; 

while(in != " "){
    cin >> in;
    Node *newPtr = new Node();
    newPtr->data = in;
    newPtr->next = NULL;

    prevPtr = list;
    nextPtr = list;

    // Do we have an empty list
    if(list != NULL)
    {
        // Corner Case: First on the list
        if(newPtr->data <= prevPtr->data)
        {
            list = newPtr;
            newPtr->next = prevPtr;
        }
        else
        {
            // CASE: Somewhere between the first and the list
            while(nextPtr->next != NULL)
            {
                nextPtr = nextPtr->next;
                if(newPtr->data >= prevPtr->data && newPtr->data <= nextPtr->data)
                {
                    prevPtr->next = newPtr;
                    newPtr->next = nextPtr;
                    break;
                }
                prevPtr = prevPtr->next;
            }

            // Corner Case: end of list
            if(nextPtr->next == NULL)
            {
                nextPtr->next = newPtr;
            }
        }
    }
    else 
    {
        // Corner Case: We had an empty list
        list = newPtr;
    }
    printList(list); 
```

# html - 文本链接隐藏了我的图片链接

> ID：12924560
> 
> 赞同：0
> 
> 时间：2012-10-16T22:40:15.520
> 
> 标签：html, css

我有一个图像，其中文本/链接覆盖在顶部。我的问题是，有时前景中的文本会在背景中隐藏图像中的链接。我认为这是因为文本框在文本周围形成了一个不可见的矩形，因此创建了一个看起来它应该属于图像但实际上被文本覆盖的区域。我想知道当我将鼠标悬停在该区域上时，是否有可能链接到我的图像链接，而不是我的文本链接（见图）。

[http://jsfiddle.net/WHpMr/](http://jsfiddle.net/WHpMr/)

![在此处输入图像描述](../Images/25bd452dff4247d7076cbac9ae24d51d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:58:40.553

试试这个，即把你的标签里面：http: [//jsfiddle.net/WHpMr/3/](http://jsfiddle.net/WHpMr/3/)

HTML：

```
<div class="ad">
    <span class="link middle right"><a href="#text" class="inline-link">my text link abcdefg<br>meow<br>meow<br>meow</a></span>
    <a href="#background"><img src="http://www.placekitten.com/320/200"></a>
</div> 
```

CSS：

```
.ad {
    position: relative;
    height: 200px;
    width: 320px;
}
.link {
    position: absolute;
    padding: 20px;
    pointer-events: none;
}
.inline-link {
    pointer-events: all;
}
.top { top:0%; }
.middle { top:33%; }
.bottom { top:66%; }
.left { text-align:left; left:0%; }
.center { text-align:center; margin:0 auto; width:100%; }
.right { text-align:right; right:0%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:59:04.153

你这样想是对的。该元素将创建一个包含内容的块。如果您一心想要这样做，您可以使用[地图元素。](https://developer.mozilla.org/en-US/docs/HTML/Element/map)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:05:05.827

如果你让每一行都成为自己的链接，那将最大限度地减少问题。如果你真的想全力以赴，你可以让每个单词都有自己的链接。但是您正在使用一些 JS 自动化而不是在 HTML 中手动完成更容易的事情。

**编辑：**这是一个适用于您的简单示例的普通 JS 解决方案的尝试，至少：

[http://jsfiddle.net/aLN2d/35/](http://jsfiddle.net/aLN2d/35/)

# javascript - 用于更改超链接文本颜色的 Javascript 计数器

> ID：12924566
> 
> 赞同：0
> 
> 时间：2012-10-16T22:40:56.537
> 
> 标签：javascript, html

我有一个带有 pre 和 next 的图像轮播……还有与显示的图像一起使用的超链接。当显示相关图像时，如何使超链接变为红色？

我正在考虑一个计数器来识别/关联图像和超链接

# c# - 动态控制Viewstate

> ID：12924569
> 
> 赞同：0
> 
> 时间：2012-10-16T22:41:15.857
> 
> 标签：c#, asp.net, webforms

我现在被困住了。在花费很长时间试图将动态添加的链接按钮或标签维护到网格视图之后，似乎我在回发时覆盖了复选框状态。

如前所述，我正在使用以下内容动态地将链接按钮或标签添加到网格视图中的占位符：

```
protected void LedgerGrid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int index = e.Row.RowIndex;

            if (items[index].noteID > 0)
            {

                PlaceHolder label = (PlaceHolder)e.Row.FindControl("HasPrevious");
                LinkButton link = new LinkButton();
                link.CommandName = "LinkCommand";
                link.Command += new CommandEventHandler(link_Command);
                link.Text = "Yes";
                link.ID = index.ToString();
                label.Controls.Add(link);

            }
            else
            {
                PlaceHolder label = (PlaceHolder)e.Row.FindControl("HasPrevious");
                Label noNote = new Label();
                noNote.Text = "No";
                label.Controls.Add(noNote);
            } 
```

这是网格视图：

```
<asp:GridView runat="server" ID="LedgerGrid" AutoGenerateColumns="false" 
    onselectedindexchanged="LedgerGrid_SelectedIndexChanged" 
    onrowdatabound="LedgerGrid_RowDataBound" onrowcommand="LedgerGrid_RowCommand" 
    >
<Columns>
<asp:TemplateField HeaderText="Notes">
<ItemTemplate>
  <asp:PlaceHolder ID="HasPrevious" runat="server"></asp:PlaceHolder>
</ItemTemplate>
</asp:TemplateField>
<asp:BoundField HeaderText="Invoice Date" DataField="invoicedate" DataFormatString="{0:d}" />
<asp:BoundField HeaderText="Invoice" DataField="invoice" />
<asp:BoundField HeaderText="Fee Debt" DataField="Fee_Debt" DataFormatString="{0:C}" />
<asp:BoundField HeaderText="Cost Debt" DataField="Cost_Debt" DataFormatString="{0:C}" />
<asp:BoundField HeaderText="VAT Debt" DataField="VAT_Debt" DataFormatString="{0:C}" />
<asp:BoundField HeaderText="Total Debt" DataField="Total_Debt" DataFormatString="{0:C}" />
<asp:BoundField HeaderText="Client Code" DataField="ClientCode" />
<asp:ButtonField  HeaderText="Matter Number" DataTextField="matternumber" CommandName="ViewMatter" />
<asp:BoundField HeaderText="Decription" DataField="matterdescription" />
<asp:TemplateField>
<ItemTemplate>
<asp:CheckBox ID="AddInvoiceCheck" runat="server" Enabled="true" />
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

为了确保我的链接按钮命令有效，我正在重建 gridview，就像在 Page_load 中一样。这是页面加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {

            string clientCode = Server.HtmlEncode(Request.QueryString["clientcode"]);
            items = DataAccess.DataAccess.GetLedgerDetails(clientCode);
            ViewState["LedgerItems"] = items;
            ViewState["clientcode"] = clientCode;
            LedgerGrid.DataSource = items;
            LedgerGrid.DataBind();
            LedgerClientObject clientDetails = DataAccess.DataAccess.GetClientDetails(clientCode);
            ClientCodeLabel.Text = string.Format("Group Code: {0}", clientDetails.GroupCode);
            ClientNameLabel.Text = string.Format("Client Name: {0}", clientDetails.ClientName);
            ClientCodeFilter.DataSource = clientDetails.ClientCodes;
            ClientCodeFilter.DataBind();

        }
    } 
```

为了维护回发时动态添加的控件，我调用以下命令：

```
protected void Page_PreLoad(object sender, EventArgs e)
    {

        if (IsPostBack)
        {
            items = (List<LedgerItem>)ViewState["LedgerItems"];
            LedgerGrid.DataSource = items;
            LedgerGrid.DataBind();

        }

    } 
```

当然，现在看来，通过使用这种方法，我正在覆盖复选框 gridview 列的状态。我接近这一切都错了吗？我希望能够使用视图状态来维护我动态添加到网格视图的控件的设置。有没有办法可以在 PreLoad 事件中重新加载 gridview 之前/之后访问复选框控件表单 gridview 的状态？

我正在通过单击按钮检查复选框列的状态，如下所示：

```
 protected void Unnamed1_Click(object sender, EventArgs e)
    {
        NoteModel note = new NoteModel();
        for (int i = 0; i < LedgerGrid.Rows.Count; i++)
        {
            int invoice = Convert.ToInt32(LedgerGrid.Rows[i].Cells[2].Text);
            CheckBox check = (CheckBox)LedgerGrid.Rows[i].FindControl("AddInvoiceCheck");
            if (check.Checked)
            {
                note.invoices.Add(invoice);

            }

        }

        if (note.invoices == null)
        {

            string clientcode = (string)ViewState["clientcode"];
            ViewState["InvoiceError"] = 1;
            Response.Redirect(string.Format("Ledger.aspx?clientcode={0}", clientcode));
        }
        else
        {
            string clientcode = (string)ViewState["clientcode"];
            Session["NoteObject"] = note;
            Response.Redirect(string.Format("AddNote.aspx?cc={0}", clientcode));

        }

    } 
```

每当我遍历 gridview 中的复选框控件时，它们都未选中，例如被我的 PreLoad 代码覆盖！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:34:55.267

最后我决定不使用动态创建的控件。相反，我在网格视图中添加了一个按钮域。然后，在我的 rowdatabound 事件中，如果它确实符合我的标准，我将按钮的可见性设置为 false。这种方式保持视图状态，因为我不需要在回发时创建控制。

似乎最好的选择是尽可能避免动态控制的网络表单。我仍然想知道要利用哪个事件来覆盖视图状态恢复控件？

# oracle - 没有可接受的数据库更改通知查询

> ID：12924572
> 
> 赞同：1
> 
> 时间：2012-10-16T22:41:50.100
> 
> 标签：oracle, odp.net

我正在使用 ODP.NET 编写的应用程序中使用数据库更改通知 (DCN)。Oracle 11g 11.2.0.2.0 的一个实例接受 DCN 注册，而另一个实例拒绝它们进行相同的查询。据我所知，两个数据库的架构完全相同。两个用户都具有更改通知权限。什么可能导致一个数据库拒绝另一个数据库接受的注册请求？

查询类似于，`select * from my_table;`错误消息是`ORA-29983: Unsupported query for Continuous Query Notification`。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:20:16.177

如[连续查询通知文档](https://docs.oracle.com/cd/E11882_01/appdev.112/e41502/adfns_cqn.htm#ADFNS575)中所述，对于可以注册查询结果更改通知的查询有许多限制，包括引用同义词。

从您的评论看来，您在失败的实例中有同义词，这解释了您看到的错误。

（拼写错误的）[错误消息](https://docs.oracle.com/cd/E11882_01/server.112/e17766/e29250.htm#ORA-29983)操作还涉及视图和同义词：

> **ORA-29983：不支持的连续查询通知查询**
> **原因**：查询不能注册为连续查询通知。
> **行动**：查询有一些结构，使其与连续查询通知不兼容，如同义词或视图。请查看文档以获取完整列表。

# fortran - BLAS 1 级程序是否仍然适用于现代 fortran 编译器？

> ID：12924573
> 
> 赞同：8
> 
> 时间：2012-10-16T22:41:52.507
> 
> 标签：fortran, blas

大多数[BLAS 1 级 API](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)都可以使用 Fortran 9x+ 矢量化分配和内在过程直接编写。

假设您使用的是现代优化编译器（如[Intel Fortran](http://software.intel.com/en-us/fortran-compilers)）和正确的特定于目标的编译器优化选项，那么使用 BLAS 1 级过程是否有任何性能优势，例如来自[英特尔 MKL](http://software.intel.com/en-us/intel-mkl)或其他快速 BLAS 实施？

如果有，当这些好处出现时，典型的向量大小是多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T22:51:31.850

这取决于。我们之前使用英特尔编译器对此进行了测试，结果令人惊讶。例如，`DOT_PRODUCT`Fortran 与 BLAS 实现根据问题大小给出了不同的趋势。随着数组中元素的数量越来越多，BLAS 变得比内在的更好。但是对于小问题，内在函数要快得多。

我们实际上为我们的用例测量了使一个比另一个更好所需的截止大小，并实际使用 if 语句来决定调用哪个。我不能分享这些结果，但我鼓励你自己测试一下。使用 BLAS 仍然有好处。

# python - python线程内存使用64位与32位

> ID：12924574
> 
> 赞同：3
> 
> 时间：2012-10-16T22:41:57.813
> 
> 标签：python, linux, memory-management, 64-bit, python-multithreading

我有一个基本的 python 程序，它可以创建大量线程（2000），处理一些东西，然后把它写出来。

我已将我的代码缩小到与此类似（使用 2k 线程）： URL fetch thread example on： [http ://www.ibm.com/developerworks/aix/library/au-threadingpython/](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)

除了在我的课堂上，我实际上什么都不做（从队列中获取项目，然后调用任务完成）。在这个缩小版和我做事的版本中，内存使用是一样的。在 32 位 python 解释器中，我使用了大约 105 兆的虚拟内存。在 64 位中，我使用了超过 8 个演出。

我正在运行 rhel 6。我还添加了：threading.stack_size(32768) 以减小堆栈大小。我假设 python 正在获取一些默认的内存限制，我只是无法弄清楚这个限制是什么。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T14:58:29.067

If you are on RHEL6 or your glibc is newer than 2.10 (you can check with rpm -q glibc). It's due to the missing of MALLOC_ARENA_MAX.

In RHEL 6, the malloc of glibc (>=2.10) has a new arena allocator which allows each thread to be able to allocate its own arena. And the max number of re-usable arena depends on the number of cores. On a 64-bit system, these arenas are 64M mappings and the default number of arenas for a 16-cores system could reach up to 128\. You can easily get 128*64MB = 8GB. So it can result in huge amount of virtual memory (VMS) when using many threads (though the increase in RSS could be completely normal.)

This can be resolved by setting the env. variable MALLOC_ARENA_MAX to a small number like 1 or 4\.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:55:12.130

如果你真的需要 2k+ 线程，你将会有兴趣阅读 Global Interpreter Lock (GIL)：[http ://wiki.python.org/moin/GlobalInterpreterLock](http://wiki.python.org/moin/GlobalInterpreterLock)

# html - 使视频播放器可以使用受限视频

> ID：12924576
> 
> 赞同：1
> 
> 时间：2012-10-16T22:42:06.063
> 
> 标签：html, .htaccess

我的网站上有一堆 .mp4 视频。我试图做到这一点，因此无法通过访问我网站上的绝对位置的人访问它们。

我不希望人们能够导航到[http://mysite.com/video/some_video.mp4](http://mysite.com/video/some_video.mp4)并下载我的视频。

我修改了我的 .htaccess 以限制 .mp4 被看到。

`<Files ~ "\.mp4$"> Order allow,deny Deny from all </Files>`

但是，这可行，它还会禁止视频在我的播放器内播放。

有什么方法可以限制对某个目录内的 .mp4 文件的访问，同时仍然允许我的脚本（视频播放器）访问它们？

任何输入表示赞赏，谢谢！

**修复** 了我终于能够得到这个工作！谢谢拉塞尔哈罗尔！

这是我的 .htaccess 的样子

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?domain\.net/ [NC]
RewriteRule ^.*$ http://domain.net/404 [L]
<Files .mp4>
Order Deny,Allow
Deny from all
Allow from my_servers_ip_address
#allow from env=internal
</Files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:09:21.283

我也尝试过这样做，但这与我得到的一样接近

```
RewriteCond %{HTTP_REFERRER} !=http://(.*).domain.com/
RewriteRule ^(.*)$ http://domain.com/index.html
<Files .*>
Order Deny,Allow
Deny from all
Allow from 123.119.141.11
Allow from 127.0.0.1
#allow from env=internal
</Files> 
```

但是，即使来自正确的 http 引荐来源网址，它似乎也会停止播放所有视频

**更新2**

更好的方法是通过以下方式 - 这不是一个完美的解决方案，因为有人可能会伪造推荐人

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?YOURDOMAIN\.com/ [NC]
RewriteRule ^.*$ http://new.YOURDOMAIN.com/404 [L] 
```

这就是对我有用的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-11T12:48:34.570

[RussellHarrower 的回答](https://stackoverflow.com/a/12924823/10251345)就像一个魅力。跟进：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://localhost:8888/application/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://www.localhost:8888/application/.*$ [NC]
RewriteRule .(mp4|mp3|avi)$ - [F] 
```

# ajax - 无法在 IE 上获取 Facebook 好友数组，但可以在其他浏览器上使用

> ID：12924578
> 
> 赞同：0
> 
> 时间：2012-10-16T22:42:24.130
> 
> 标签：ajax, facebook, json, facebook-graph-api, facebook-access-token

此函数在 Chrome 和 Firefox 上有效，但在 IE9 上无效，其中 errorHandler 正在记录此错误消息：

```
ERROR:  getFriendsArray {"readyState":0,"status":0,"statusText":"No Transport"} 
```

getUserAccessToken() 正在返回正确的值。任何想法可能是什么，只影响IE？

编辑：似乎直接在 IE 浏览器上的[https://graph.facebook.com/me/friends返回 HTTP 400 错误。](https://graph.facebook.com/me/friends)

```
function getFriendsArray() {

    var friendsArray = [];

    $.ajax({                                      
        url: 'https://graph.facebook.com/me/friends',
        data: {
            access_token: getUserAccessToken(),
            fields: 'name,picture,gender'
        },
        dataType: 'json',
        cache: true,
        async: false,
        success: function(response) {
            var data = '';
            $.each(response.data, function(indice, item) {
                friendsArray.push(item);
            });                       
        },
        error: function(err) {
            errorHandler('getFriendsArray', JSON.stringify(err));
        }
    });

    return friendsArray.sort(sortByName);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:16:44.790

`$.ajax`仅支持使用 XMLHttpRequest 或 XDomainRequest (IE)，后者仅支持少数场景，如果请求的资源是 SSL，则要求您的页面是 SSL。

取而代之的是使用`FB.api`，它可以处理这个以及更多问题，确保调用通过 JSONP、XHR、XDomainRequest 或 Flash。

# c# - 使用 NUnit 测试 Windows 8 应用商店应用

> ID：12924579
> 
> 赞同：15
> 
> 时间：2012-10-16T22:42:30.807
> 
> 标签：c#, .net, windows-8, nunit, windows-store-apps

我目前正在为一个班级开发一个 Windows 应用商店应用程序 (Windows 8)，但在运行我的 NUnit 测试时遇到了问题。

我的解决方案/项目设置如下所示：

*   地铁应用程序.sln

    *   SQLite-net.csproj - 类库（Windows 商店应用程序）。文件是从 NuGet 中提取的。
    *   DataModel.csproj - 类库（Windows 应用商店应用）
    *   UnitTests.csproj - 单元测试库（Windows 商店应用程序）。NUnit 框架是从 NuGet 中提取的。
    *   TheMetroApp.csproj - 从 Windows SDK 示例之一中提取的项目文件。
*   杂项。依赖项和实用程序

    *   Windows 8 专业版 RTM/Visual Studio 2012 RTM
    *   锐化 7
    *   NUnit 2.6.1
    *   SQLite（按照[此处](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)的说明进行设置）

UnitTests 依赖并引用 DataModel。DataModel 依赖并引用 SQLite-net。我添加到 UnitTests 项目的唯一内容是包含一些存根 NUnit 单元测试的单个类。据我所知，这些设置正确：

```
[TestFixture]
public class TaskSourceTests
{
    #region Private Class Members

    private ITaskSource _taskSource;
    private String _dbPath;

    #endregion

    #region Testing Infrastructure

    [SetUp]
    public void SetUp()
    {
        // This part makes NUnit/ReSharper have problems.
        _dbPath = Path.Combine(ApplicationData.Current.LocalFolder.Path, "UnitTestDatabase.sqlite");
    }

    #endregion

    #region Misc. CRUD stuff

    [Test]
    public void CreateTaskTest()
    {
        // Save the task.
        Task task = new Task( "Some Task", "lol.", DateTime.Now, false );
        _taskSource.Save( task );

        // Confirm that it is in the task db.
        using( SQLiteConnection db = new SQLiteConnection( _dbPath ) )
        {
            const String query = "SELECT * FROM Task WHERE Id = ?";
            IList<Task> results = db.Query<Task>( query, task.Id );
            Assert.True( results.Contains( task ) );
        }
    }

    // ...and so on [but with stubs that are basically Assert.Fail( "" )].

    #endregion
} 
```

TheMetroApp 是 Windows 8 SDK 示例项目之一，但包含一些自定义 XAML 表单。我对这个项目没有任何问题。

*我的问题是我尝试使用的单元测试运行器都没有工作。*

当我尝试使用官方 NUnit x86 测试运行器（版本 2.6.1）时，由于证书相关问题，我的测试失败[（请参阅此处）](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/449635cd-6aad-4d89-95a7-be7444d48f98)：

```
UnitTests.TaskSourceTests.CreateTaskTest:
SetUp : System.InvalidOperationException : The process has no package identity. (Exception from HRESULT: 0x80073D54) 
```

ReSharper 的 NUnit 测试运行程序因完全相同的原因而失败。不幸的是，目前似乎没有解决方法。

我还尝试使用 Visual Studio 2012 中内置的测试运行器（通过[NUnit Visual Studio 测试适配器](http://www.nunit.org/index.php?p=vsTestAdapter&r=2.6)）。当我尝试使用“全部运行”运行测试时，我得到以下输出：

```
------ Run test started ------
Updating the layout...

Checking whether required frameworks are installed...

Registering the application to run from layout...

Deployment complete. Full package name: "GibberishAndStuff"

No test is available in C:\Projects\project-name\ProjectName\UnitTests\bin\Debug\UnitTests.dll. Make sure that installed test discoverers & executors, platform & framework version settings are appropriate and try again.
========== Run test finished: 0 run (0:00:09.4873768) ========== 
```

我注意到的一些奇怪的事情是，如果我在测试资源管理器中选择一个特定的测试并告诉它运行，我会收到一条略有不同的错误消息：

```
Could not find test executor with URI 'executor://nunittestexecutor/'.  Make sure that the test executor is installed and supports .net runtime version 4.0.30319.18010. 
```

这有点令人困惑，因为我安装了 NUnit 测试适配器。我在测试适配器的启动板页面上没有看到与我的问题类似的任何内容。

我不确定我应该从哪里开始。如果这不起作用，我不介意修改我的项目以使用 xUnit.net、Microsoft 的单元测试框架或其他东西。如果我能让 NUnit 正常工作，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:14:09.340

我有一个 Windows 7 Phone 应用程序，它与您遇到的问题相同。我的解决方案是创建一个单独的“链接”项目，该项目使用标准 .net 库编译代码。链接的项目在单元测试/NUnit 方面没有问题。

有关详细信息，请参阅以下内容：

[http://msdn.microsoft.com/en-us/library/ff921109(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/ff921109(v=pandp.40).aspx)

[http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044/](http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044/)

我已将该应用程序移植到 Windows 8 并且运行我的测试用例没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T16:41:39.440

在为通用应用程序（W81 + WP81）创建单元测试时，我刚刚遇到了同样的错误消息。这里唯一的解决方案是停止使用 NUnit 并仅使用 MSTest。

# c# - 清理单词粘贴撇号和其他特殊字符

> ID：12924580
> 
> 赞同：0
> 
> 时间：2012-10-16T22:42:31.940
> 
> 标签：c#, asp.net

我环顾四周，并没有找到一个可靠的解决方案。有没有办法替换来自文本编辑器（radeditor）的单词粘贴撇号和其他特殊字符？当我尝试通过电子邮件发送它们时，这些字符被替换为 ? 问号。我不希望手动替换所有可能的特殊字符，除非某处有已知列表。

# javascript - 获取包含换行符的文本区域的字符数

> ID：12924591
> 
> 赞同：3
> 
> 时间：2012-10-16T22:43:22.357
> 
> 标签：javascript, textarea

我在 Chrome 中测试了这段代码，似乎有一个涉及换行符的错误。在我实际使用所有字符之前，我已经达到了最大长度。

```
var ta = document.getElementById('myText');

document.getElementById('max').innerHTML = ta.maxLength;

setInterval(function() {
    document.getElementById('count').innerHTML = ta.value.length;
}, 250);
```

```
<textarea id="myText" maxlength="200" style="width:70%;height:130px">
Lorem Ipsum is simply dummy text of the printing and typesetting industry.
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s
Type more words here...
</textarea>

<div>
    Char Count <span id="count">0</span>/<span id="max">0</span>
</div>
```

如何准确获取文本区域的字符数？

**更新 1** 我向 Chromium 团队报告了这个[错误](https://code.google.com/p/chromium/issues/detail?id=158652)，它似乎是低优先级的。

**更新 2** 该错误已合并到另一个[错误](https://bugs.chromium.org/p/chromium/issues/detail?id=252613)中。

**更新 3** 该错误似乎已修复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:57:18.777

似乎是一个与将 CR/LF 对视为两个字符而不是一个字符有关的 WebKit 错误（考虑[提交它）。](https://bugs.webkit.org/)因为如果允许使用 197 个字符而不是 200 个字符通常是非关键的，因此可以忽略这一点。

但是，如果您愿意，您可以尝试在用户键入时不断保存插入符号位置，全部替换`\r\n`为`\n`，并在 textarea 中恢复插入符号位置。

# tridion - 通过虚 URL 查询 Tridion 页面

> ID：12924593
> 
> 赞同：3
> 
> 时间：2012-10-16T22:43:23.517
> 
> 标签：tridion

在我们的应用程序设计中，我们想向用户介绍 VanityURL 概念。VanityURL 将是页面的自定义元。通过 URL 查询页面的代理 api 不再起作用，因为虚 url 不是 PAGE 表中的那个。我们提出的解决方案是使用 CustomMetaKeyCriteria 和 CustomMetaValueCriteria 查询页面 id，它对我们有用。

我想请专家来评估这个解决方案并提供一些意见。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:46:53.947

好问题。我会谨慎地查询每个页面请求的元数据。您可能还需要小心地将这些数据存储为页面元数据，因为您需要确保这些值在出版物中的所有页面/URL 中都是唯一的。

为了解决唯一性问题，您可能希望创建一个事件系统，该系统在保存页面时根据某种索引文件检查/保存值。

该文件可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<VanityURLS PublicationID="tcm:0-33-1">
    <Page ID="tcm:3-24-64">
        <Vanity>/someURL.html</Vanity>
        <Vanity>/someotherURL.html</Vanity>
    </Page>
    <Page ID="tcm:3-25-64">
        <Vanity>/someURL.html</Vanity>
        <Vanity>/someotherURL.html</Vanity>
    </Page>
<VanityURLS> 
```

然后，您可以定期发布该索引文件并使用它来查找请求的 URL，并将它们映射到页面 URI。然后，您可以通过它们的 URI 加载页面，或者如果您想使用现有代码，则可以使用链接 API 从 URI 获取 URL。然后，您可以将该值传递给 GetPageMetaByURL() 方法。

# string - 使用 Trie 查找最长的公共子串

> ID：12924595
> 
> 赞同：1
> 
> 时间：2012-10-16T22:43:31.077
> 
> 标签：string, algorithm, data-structures, trie

如何使用 trie 在两个或多个字符串中找到 LCS（最长公共子字符串）？

我有这样的想法——假设我的第一个字符串是“abbcabdd”。然后我将首先在 trie 中插入“abbcabdd”，然后是“bbcabdd”，然后是“bcabdd”……，然后是“d”，并对每个字符串重复此过程。

然后通过遍历trie计算最长的子串。

但我认为它效率不高。还有其他改进的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:44:58.907

您所描述的正是[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)- 使用优化的算法生成后缀树，您将提高效率！

请注意，有一种用于构建后缀树的算法`O(n)`（当然，假设是一个常量字母表）。

# matlab - 将图像转换为极坐标的示例明确地做到这一点 - 想要一个光滑的矩阵方法

> ID：12924598
> 
> 赞同：4
> 
> 时间：2012-10-16T22:43:53.620
> 
> 标签：matlab, image-processing, polar-coordinates

我正在尝试将图像从笛卡尔坐标转换为极坐标。

我知道如何使用 for 循环明确地做到这一点，但我正在寻找更紧凑的东西。

我想做类似的事情：

```
[x y] = size(CartImage);
minr = floor(min(x,y)/2);

r = linspace(0,minr,minr);
phi = linspace(0,2*pi,minr);

[r, phi] = ndgrid(r,phi);

PolarImage = CartImage(floor(r.*cos(phi)) + minr, floor(r.sin(phi)) + minr); 
```

但这显然行不通。

基本上我希望能够在网格上索引 CartImage。

然后将在网格上定义极坐标图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T03:17:52.180

给定一个矩阵 M（本例中只是一个 2d 高斯）和一个发生极坐标变换的已知原点 (X0,Y0)，我们预计等强度圆将转换为等强度线：

```
 M=fspecial('gaussian',256,32); % generate fake image
 X0=size(M,1)/2; Y0=size(M,2)/2;
 [Y X z]=find(M);
 X=X-X0; Y=Y-Y0;
 theta = atan2(Y,X);
 rho = sqrt(X.^2+Y.^2);

 % Determine the minimum and the maximum x and y values:
 rmin = min(rho); tmin = min(theta);
 rmax = max(rho); tmax = max(theta);

 % Define the resolution of the grid:
 rres=128; % # of grid points for R coordinate. (change to needed binning)
 tres=128; % # of grid points for theta coordinate (change to needed binning)

 F = TriScatteredInterp(rho,theta,z,'natural');

 %Evaluate the interpolant at the locations (rhoi, thetai).
 %The corresponding value at these locations is Zinterp:

 [rhoi,thetai] = meshgrid(linspace(rmin,rmax,rres),linspace(tmin,tmax,tres));
 Zinterp = F(rhoi,thetai);

 subplot(1,2,1); imagesc(M) ; axis square
 subplot(1,2,2); imagesc(Zinterp) ; axis square 
```

![在此处输入图像描述](../Images/0ff9c8054f95326b7581ab0363132be9.png)

弄错 (X0,Y0) 会在变换中显示为变形，所以要小心检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-05T14:21:19.787

我注意到 bla 的答案是从极坐标到笛卡尔坐标。然而，问题是在相反的方向。

```
I=imread('output.png');   %read image
I1=flipud(I);
A=imresize(I1,[1024 1024]);
A1=double(A(:,:,1));
A2=double(A(:,:,2));
A3=double(A(:,:,3));  %rgb3 channel to double
[m n]=size(A1);
[t r]=meshgrid(linspace(-pi,pi,n),1:m); %Original coordinate

M=2*m;
N=2*n;
[NN MM]=meshgrid((1:N)-n-0.5,(1:M)-m-0.5);
T=atan2(NN,MM);
R=sqrt(MM.^2+NN.^2);                  

B1=interp2(t,r,A1,T,R,'linear',0);
B2=interp2(t,r,A2,T,R,'linear',0);
B3=interp2(t,r,A3,T,R,'linear',0); %rgb3 channel Interpolation
B=uint8(cat(3,B1,B2,B3));        

subplot(211),imshow(I);  %draw the Original Picture
subplot(212),imshow(B);  %draw the result 
```

# xslt - 在 XSL 转换中用顺序字母替换 XML 值

> ID：12924600
> 
> 赞同：0
> 
> 时间：2012-10-16T22:43:56.373
> 
> 标签：xslt, grouping, xslt-1.0

给定输入 XML

```
<FlightOptions> 
  <item> 
     <Fares> 
       <item> 
         <FareClass>T</FareClass> 
         <Fare>100</Fare> 
         <FareType>E</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>Y</FareClass> 
         <Fare>200</Fare> 
         <FareType>E</FareType> 
         <Seats>10</Seats> 
       </item> 
       <item> 
         <FareClass>R</FareClass> 
         <Fare>250</Fare> 
         <FareType>E</FareType> 
         <Seats>20</Seats> 
       </item> 
       <item> 
         <FareClass>N</FareClass> 
         <Fare>100</Fare> 
         <FareType>F</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>M</FareClass> 
         <Fare>200</Fare> 
         <FareType>F</FareType> 
         <Seats>50</Seats> 
       </item> 
       <item> 
         <FareClass>L</FareClass> 
         <Fare>300</Fare> 
         <FareType>F</FareType> 
         <Seats>20</Seats> 
       </item> 
       <item> 
        <FareClass>K</FareClass> 
        <Fare>400</Fare> 
        <FareType>F</FareType> 
        <Seats>5</Seats> 
       </item> 
       <item> 
        <FareClass>E</FareClass> 
        <Fare>500</Fare> 
        <FareType>F</FareType> 
        <Seats>9</Seats> 
       </item> 
     </Fares> 
     <Flight> 
         <FlightNumber>YY232</FlightNumber> 
         <Origin>JFK</Origin> 
         <Destination>LHR</Destination> 
         <DepTime>1300</DepTime> 
         <ArrTime>2000</ArrTime> 
     </Flight> 
    </item> 
</FlightOptions> 
```

并应用 XSL 模板（感谢 Tim C 提供此模板！） -

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 

   <xsl:template match="Fares"> 
      <xsl:copy> 
         <xsl:apply-templates select="item"> 
            <xsl:sort select="FareType"/> 
            <xsl:sort select="Fare"/> 
         </xsl:apply-templates> 
      </xsl:copy> 
   </xsl:template> 

   <xsl:template match="Fares/item"> 
      <xsl:if test="not(preceding-sibling::item[FareType=current()/FareType][Seats > 9])"> 
         <xsl:call-template name="identity"/> 
      </xsl:if> 
   </xsl:template> 

   <xsl:template match="Seats[. > 9]"> 
      <xsl:copy>9</xsl:copy> 
   </xsl:template> 

   <xsl:template match="@*|node()"> 
      <xsl:call-template name="identity"/> 
   </xsl:template> 

   <xsl:template name="identity"> 
      <xsl:copy> 
         <xsl:apply-templates select="@*|node()"/> 
      </xsl:copy> 
   </xsl:template> 

</xsl:stylesheet> 
```

我们得到以下输出 XML -

```
<FlightOptions> 
  <item> 
     <Fares> 
       <item> 
         <FareClass>T</FareClass> 
         <Fare>100</Fare> 
         <FareType>E</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>Y</FareClass> 
         <Fare>200</Fare> 
         <FareType>E</FareType> 
         <Seats>9</Seats> 
       </item> 
       <item> 
         <FareClass>R</FareClass> 
         <Fare>250</Fare> 
         <FareType>E</FareType> 
         <Seats>9</Seats> 
       </item> 
       <item> 
         <FareClass>N</FareClass> 
         <Fare>100</Fare> 
         <FareType>F</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>M</FareClass> 
         <Fare>200</Fare> 
         <FareType>F</FareType> 
         <Seats>9</Seats> 
       </item> 
       <item> 
         <FareClass>L</FareClass> 
         <Fare>300</Fare> 
         <FareType>F</FareType> 
         <Seats>9</Seats> 
       </item> 
       <item> 
        <FareClass>K</FareClass> 
        <Fare>400</Fare> 
        <FareType>F</FareType> 
        <Seats>5</Seats> 
       </item> 
       <item> 
        <FareClass>E</FareClass> 
        <Fare>500</Fare> 
        <FareType>F</FareType> 
        <Seats>9</Seats> 
       </item> 
     </Fares> 
     <Flight> 
         <FlightNumber>YY232</FlightNumber> 
         <Origin>JFK</Origin> 
         <Destination>LHR</Destination> 
         <DepTime>1300</DepTime> 
         <ArrTime>2000</ArrTime> 
     </Flight> 
    </item> 
</FlightOptions> 
```

我想要对上面的输出做的是按照每个项目被选中的顺序用字母顺序（A、B、C、D ...）替换 FareClass 标签。此外，我想保持 G 和 Y FareClass 不变。[如果您对 XML/XSL 有疑问，我会问问题 #8074924，该问题由 Tim C 解决。]

输出 XML 需要如下所示：

```
<FlightOptions> 
  <item> 
     <Fares> 
       <item> 
         <FareClass>A</FareClass> 
         <Fare>100</Fare> 
         <FareType>E</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>Y</FareClass> 
         <Fare>200</Fare> 
         <FareType>E</FareType> 
         <Seats>10</Seats> 
       </item> 
       <item> 
         <FareClass>B</FareClass> 
         <Fare>250</Fare> 
         <FareType>E</FareType> 
         <Seats>20</Seats> 
       </item> 
       <item> 
         <FareClass>N</FareClass> 
         <Fare>100</Fare> 
         <FareType>F</FareType> 
         <Seats>5</Seats> 
       </item> 
       <item> 
         <FareClass>C</FareClass> 
         <Fare>200</Fare> 
         <FareType>F</FareType> 
         <Seats>50</Seats> 
       </item> 
       <item> 
         <FareClass>D</FareClass> 
         <Fare>300</Fare> 
         <FareType>F</FareType> 
         <Seats>20</Seats> 
       </item> 
       <item> 
        <FareClass>E</FareClass> 
        <Fare>400</Fare> 
        <FareType>F</FareType> 
        <Seats>5</Seats> 
       </item> 
       <item> 
        <FareClass>F</FareClass> 
        <Fare>500</Fare> 
        <FareType>F</FareType> 
        <Seats>9</Seats> 
       </item> 
     </Fares> 
     <Flight> 
         <FlightNumber>YY232</FlightNumber> 
         <Origin>JFK</Origin> 
         <Destination>LHR</Destination> 
         <DepTime>1300</DepTime> 
         <ArrTime>2000</ArrTime> 
     </Flight> 
    </item> 
</FlightOptions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:32:55.623

如果我理解正确，您需要基于 Tim 的解决方案的解决方案，但在输出中，所有 FareClass 值按输出文档顺序从 A 到 Z 重新排序，但 G 和 Y 不变。

我会使用这样的管道方法。请注意，阶段 1 是直接从 Tim 复制的，仅通过添加模式属性进行更改。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exslt="http://exslt.org/common"
  exclude-result-prefixes="xsl exslt"> 
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:variable name="phase-1-output">
  <xsl:apply-templates select="/" mode="phase-1" />
</xsl:variable>

<xsl:variable name="phase-2-output">
  <xsl:apply-templates select="exslt:node-set($phase-1-output)" mode="phase-2" />
</xsl:variable>

<xsl:template match="/">
  <xsl:copy-of select="$phase-2-output" />
</xsl:template>

<!-- ================ Phase One from Tim C ==============================-->   
   <xsl:template match="Fares" mode="phase-1"> 
      <xsl:copy> 
         <xsl:apply-templates select="item" mode="phase-1" > 
            <xsl:sort select="FareType"/> 
            <xsl:sort select="Fare"/> 
         </xsl:apply-templates> 
      </xsl:copy> 
   </xsl:template> 

   <xsl:template match="Fares/item" mode="phase-1"> 
      <xsl:if test="not(preceding-sibling::item[FareType=current()/FareType][Seats > 9])"> 
         <xsl:call-template name="identity-1" /> 
      </xsl:if> 
   </xsl:template> 

   <xsl:template match="Seats[. > 9]" mode="phase-1"> 
      <xsl:copy>9</xsl:copy> 
   </xsl:template> 

   <xsl:template match="@*|node()" name="identity-1"  mode="phase-1"> 
      <xsl:copy> 
         <xsl:apply-templates select="@*|node()" mode="phase-1" /> 
      </xsl:copy> 
   </xsl:template> 

<!-- ================ Phase Two ============================================-->   

   <xsl:template match="@*|node()" name="identity-2" mode="phase-2"> 
      <xsl:copy> 
         <xsl:apply-templates select="@*|node()" mode="phase-2" /> 
      </xsl:copy> 
   </xsl:template> 

   <xsl:template match="FareClass[.!='G'][.!='Y']" mode="phase-2"> 
      <xsl:copy> 
        <xsl:variable name="raw-count">
         <xsl:number count="item[(FareClass!='G') and (FareClass!='Y')]" /> 
        </xsl:variable>
        <xsl:number value="$raw-count + not($raw-count &lt;  7)
                                      + not($raw-count &lt; 25)" format="A" />
      </xsl:copy> 
   </xsl:template> 

</xsl:stylesheet> 
```

*...使用来自原始编辑*的示例输入，产生输出...

```
<FlightOptions>
  <item>
    <Fares>
      <item>
        <FareClass>A</FareClass>
        <Fare>100</Fare>
        <FareType>E</FareType>
        <Seats>5</Seats>
      </item>
      <item>
        <FareClass>B</FareClass>
        <Fare>200</Fare>
        <FareType>E</FareType>
        <Seats>10</Seats>
      </item>
      <item>
        <FareClass>C</FareClass>
        <Fare>250</Fare>
        <FareType>E</FareType>
        <Seats>20</Seats>
      </item>
      <item>
        <FareClass>D</FareClass>
        <Fare>100</Fare>
        <FareType>F</FareType>
        <Seats>5</Seats>
      </item>
      <item>
        <FareClass>E</FareClass>
        <Fare>200</Fare>
        <FareType>F</FareType>
        <Seats>50</Seats>
      </item>
      <item>
        <FareClass>F</FareClass>
        <Fare>300</Fare>
        <FareType>F</FareType>
        <Seats>20</Seats>
      </item>
    </Fares>
    <Flight>
      <FlightNumber>YY232</FlightNumber>
      <Origin>JFK</Origin>
      <Destination>LHR</Destination>
      <DepTime>1300</DepTime>
      <ArrTime>2000</ArrTime>
    </Flight>
  </item>
</FlightOptions> 
```

* * *

# 更新

感谢 Surge 提供新的和改进的用例。使用我的解决方案，更新后的测试用例的输出是......

```
<FlightOptions>
  <item>
    <Fares>
      <item>
        <FareClass>A</FareClass>
        <Fare>100</Fare>
        <FareType>E</FareType>
        <Seats>5</Seats>
      </item>
      <item>
        <FareClass>Y</FareClass>
        <Fare>200</Fare>
        <FareType>E</FareType>
        <Seats>9</Seats>
      </item>
      <item>
        <FareClass>B</FareClass>
        <Fare>250</Fare>
        <FareType>E</FareType>
        <Seats>9</Seats>
      </item>
      <item>
        <FareClass>C</FareClass>
        <Fare>100</Fare>
        <FareType>F</FareType>
        <Seats>5</Seats>
      </item>
      <item>
        <FareClass>D</FareClass>
        <Fare>200</Fare>
        <FareType>F</FareType>
        <Seats>9</Seats>
      </item>
      <item>
        <FareClass>E</FareClass>
        <Fare>300</Fare>
        <FareType>F</FareType>
        <Seats>9</Seats>
      </item>
      <item>
        <FareClass>F</FareClass>
        <Fare>400</Fare>
        <FareType>F</FareType>
        <Seats>5</Seats>
      </item>
      <item>
        <FareClass>H</FareClass>
        <Fare>500</Fare>
        <FareType>F</FareType>
        <Seats>9</Seats>
      </item>
    </Fares>
    <Flight>
      <FlightNumber>YY232</FlightNumber>
      <Origin>JFK</Origin>
      <Destination>LHR</Destination>
      <DepTime>1300</DepTime>
      <ArrTime>2000</ArrTime>
    </Flight>
  </item>
</FlightOptions> 
```

这与您声明的预期输出略有不同，但我相信差异可以通过您犯错误的事实来解释（参见 FareClass N）。通过检查，我认为这是一个 PASS 结果。

## 更新 2

哎呀。刚刚注意到两个错误并已更正。原来的错误模板是...

```
<xsl:variable name="phase-2-output">
  <xsl:apply-templates select="/" mode="phase-2" />
</xsl:variable> 
```

和

```
 <xsl:number count="item" /> 
```

正确的代码应该是...

```
<xsl:variable name="phase-2-output">
  <xsl:apply-templates select="exslt:node-set($phase-1-output)" mode="phase-2" />
</xsl:variable> 
```

和

```
 <xsl:number count="item[(FareClass!='G') and (FareClass!='Y')]" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:03:11.347

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml"/>
    <xsl:template match="/">
        <xsl:apply-templates select="//Fares"/>
        </xsl:template>
    <xsl:template match="//Fares">
        <xsl:for-each select="item">
            <xsl:choose>
                <xsl:when test="not(contains(FareClass,'G') or contains(FareClass,'Y'))">
                    <item>
                        <xsl:variable name="count">
                            <xsl:number count="item"/>
                        </xsl:variable>
                        <FareClass>
                            <xsl:choose>
                            <xsl:when test="position()>1">
                                <xsl:number format="A" value="position()-1"/>
                                </xsl:when>
                                <xsl:otherwise>
                                <xsl:number format="A"/>
                                </xsl:otherwise>
                                </xsl:choose>

                        </FareClass>
                    <xsl:copy-of select="child::*[position() > 1]"/>
                    </item>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="."/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# php - 在代码中调用对象方法

> ID：12924602
> 
> 赞同：0
> 
> 时间：2012-10-16T22:44:13.883
> 
> 标签：php, object, types, casting

我对 PHP 有点陌生，而且我对 JAVA、C# 或 C++ 等强类型语言更有经验。我目前正在用 PHP 编写一个 Web 工具，但在尝试做我想做的事情时遇到了问题想。

我想在代码中做什么的简单想法是通过我使用 PHP-IMAP 获取的一些电子邮件来运行的。然后我创建电子邮件对象（我定义的一个类），并将它们放入一个数组中。但是，稍后在代码中，我会循环浏览这些电子邮件以显示它们。但是，正如您可能已经猜到的那样，我会遇到问题，我尝试在后面的循环中使用电子邮件类对象方法——而且我很确定 PHP 不知道数组中的变量恰好是电子邮件类对象！

我写了一个 toString 方法，我想在循环中调用它。虽然我不需要为此工具的最终版本执行此操作，但我想找出我缺少的内容。

这是我调用该方法的类和循环：

```
 include 'imap_email_interface.php';

 class ImapEmail implements imap_email_interface
 {
    // Email data
    var $msgno;
    var $to;
    var $from;
    var $subject;
    var $body;
    var $attachment;

    // Email behavior
    /* PHP 4 ~ legacy constructor */
    public function ImapEmail($message_number)
    {
        $this->__construct();
        $this->msgno = $message_number;
    }

    /* PHP 5 Constructor */
    public function __construct($message_number)    
    {   $this->msgno = $message_number; }

    public function send($send_to)
    {
        // Not Yet Needed! Seriously!
    }

    public function setHeaderDirectly($TO, $FROM, $SUBJECT)
    {   $this->to = $TO;    $this->from = $FROM;    $this->subject = $SUBJECT;  }

    public function setHeaderIndirectly($HEADER)
    {
        if (isset($HEADER->to[0]->personal))
            $this->to = '"'.$HEADER->to[0]->personal.'", '.$HEADER->to[0]->mailbox.'@'.$HEADER->to[0]->host;
        else
            $this->to = $HEADER->to[0]->mailbox.'@'.$HEADER->to[0]->host;
        $this->from = '"'.$HEADER->from[0]->personal.'", '.$HEADER->from[0]->mailbox.'@'.$HEADER->from[0]->host;
        $this->subject = $HEADER->subject;
    }

    public function setBody($BODY)
    {   $this->body = $BODY;    }

    public function setAttachment($ATTCH)
    {
        $this->attachment = $ATTCH;
    }

     public function toString()
     {
        $str = '[TO]: ' . $this->to . '<br />' . '[FROM]: ' . $this->from . '<br />' . '[SUBJECT]: ' . $this->subject . '<br />';
        $str .= '[Attachment]: '.$this->attachment.'<br />';

        return $str;
     }
 }
?> 
```

循环：

```
foreach ($orderFileEmails as $x)
    {
        $x->toString();
        echo '<br /><br />';
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:52:46.373

如您的代码中所写，您的`toString`函数返回`$str`表示电子邮件内容的变量。

```
 public function toString()
 {
       $str = '[TO]: ' . $this->to . '<br />' . '[FROM]: ' . $this->from . '<br />' . '[SUBJECT]: ' . $this->subject . '<br />';
       $str .= '[Attachment]: '.$this->attachment.'<br />';

      return $str; //You RETURN the string
 } 
```

在您的循环中，您只是调用函数并对返回的值执行“无”操作。用于`echo`将其返回值打印到屏幕上。

```
foreach ($orderFileEmails as $x)
    {
        echo $x->toString(); //Notice the echo I've added
        echo '<br /><br />';
    } 
```

另一件事是，确保它`$orderFileEmails`是一个对象数组，否则这个循环不会做你愿意做的事情。为了调试它，在循环之前写：`var_dump($orderFileEmails);`.

**编辑：**另一种选择是使用`magic method` `__toString()`. （手册 - h​​ttp: [//www.php.net/manual/en/language.oop5.magic.php#object.tostring](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)）

它是这样工作的：

```
class ImapEmail
{
    // Your methods and properties here...

    public function __toString()
    {
      $str = '[TO]: ' . $this->to . '<br />' . '[FROM]: ' . $this->from . '<br />' . '[SUBJECT]: ' . $this->subject . '<br />';
      $str .= '[Attachment]: '.$this->attachment.'<br />';

      return $str;
    }
}

$class = new ImapEmail();
echo $class; 
```

# ios - JSON 中的 RestKit 嵌套对象

> ID：12924605
> 
> 赞同：1
> 
> 时间：2012-10-16T22:44:46.327
> 
> 标签：ios, json, mapping, restkit, nsmanagedobject

JSON 文件如下所示：

```
{
  "status":"success",
  "result":[
     {
        "id":"1",
        "name":"Wigwam Motel",
        "latitude":34.106785,
        "longitude":-117.349399,
        "tag1_id":123,
        "tag2_id":2,
        "tag3_id":3,
        "address1":"Some Place Str.",
        "address2":"123",
        "city":"San Francisco",
        "state":"CA",
        "zip":94103,
        "total_photos":"4",
        "total_checkins":"5",
        "status":"approved",
        "hero_checkin": 
    {
        "id":12345,
        "type":"photo",
        "comment":"Lorm Ipsum Etc.",
        "created":"2012-04-02",
           "photo_name":"http://crashtestdata.sandbox.whoisstudio.com/crashtestdata.sandbox.whoisstudio.com//images/thumbs/abbotkinneymural.jpg",
        "attraction":
            {
            "id":"12345",
            "name":"Attraction 1"
            },
        "user": 
            {
            "id":"1234",
            "username":"john.smith",
            "facebook_uid":"false",
            "twitter_username":"false",
            "email":"jhon.smith@example.org",
            "first_name":"John",
            "last_name":"Smith",
            "avatar":"http://crashtestdata.sandbox.whoisstudio.com/crashtestdata.sandbox.whoisstudio.com//images/thumbs/abbotkinneymural.jpg"
            }
    }
     }, 
```

映射如下所示：

```
 RKManagedObjectMapping* checkInMapping = [RKManagedObjectMapping mappingForClass:[CheckIn class]
                                                            inManagedObjectStore:           [RKObjectManager sharedManager].objectStore];

checkInMapping.primaryKeyAttribute = @"checkInId";

[checkInMapping mapKeyPathsToAttributes:
        @"id",                  @"checkInId",
        @"comment",             @"comment", 
        @"facebook_share_id",   @"facebookShareId", 
        @"photo_name",          @"photoName",
        @"twitter_share_id",    @"twitterShareId",
        @"account_id",          @"accountId",
        @"attraction_id",       @"attractionId",
        @"created",             @"createdTimestamp",
        @"updated",             @"updatedTimestamp",
        @"type",                @"type",
 nil];

RKManagedObjectMapping *mapping = [RKManagedObjectMapping mappingForClass:[Attraction class]
                                                 inManagedObjectStore:[RKObjectManager sharedManager].objectStore];

 mapping.primaryKeyAttribute = @"attractionId";

[mapping mapKeyPath:@"hero_checkin" toRelationship:@"heroCheckIn" withMapping:checkInMapping];

[mapping mapKeyPathsToAttributes:
        @"id",          @"attractionId",
        @"name",            @"name",
        @"description",     @"description",
        @"longitude",       @"longitude",
        @"latitude",        @"latitude",
        @"tag1_id",         @"tag1Id",
        @"tag2_id",         @"tag2Id",
        @"tag3_id",         @"tag3Id",
        @"city",            @"city",
        @"state",           @"state",
        @"zip",             @"zip",
        @"total_photos",    @"totalPhotos",
        @"total_checkins",  @"totalCheckIns",
        @"status",          @"status",
        @"founder_user_id", @"founderId",
        @"founder_user",    @"founderUser",
        @"region_id",       @"regionId",
        @"region",          @"region",
        @"region_checkin_id",@"regionCheckInId",
        @"region_checkin",  @"regionCheckIn",
 nil];

// Just another try to map the relationship it didn't work
//    [mapping mapRelationship:@"heroCheckIn" withMapping:checkInMapping];
//    [[RKObjectManager sharedManager].mappingProvider setMapping:checkInMapping 
//    forKeyPath:@"response.hero_checkin"];
//    [checkInMapping hasOne:@"heroCheckInId" withMapping:mapping];
//    [checkInMapping connectRelationship:@"heroCheckIn" 
//   withObjectForPrimaryKeyAttribute:@"heroCheckId"];

[[RKObjectManager sharedManager].mappingProvider setObjectMapping:mapping forKeyPath:@"result"]; 
```

这就是我得到的：

```
<Attraction: 0xf19d080> (entity: Attraction; id: 0xf198060 <x-coredata://4C997AF5-D806-46C8-AD32-80220D2E9D97/Attraction/p7> ; data: {
address1 = nil;
address2 = nil;
attractionId = 1;
city = "San Francisco";
founder = nil;
founderAccountId = 0;
heroCheckIn = nil;
heroCheckInId = 0;
latitude = "34.106785";
longitude = "-117.349399";
name = "Wigwam Motel";
region = nil;
regionId = 0;
state = CA;
status = approved;
tag1Id = 123;
tag2Id = 2;
tag3Id = 3;
totalCheckIns = 5;
totalPhotos = 4;
zip = 94103; 
```

正如你所看到的 heroCheckIn 为零，我一直在阅读很多论坛，在这里发帖和 RestKit 文档，但似乎我遗漏了一些东西，所以欢迎任何帮助，或者至少是朝着正确的方向推动. 顺便说一句，我有 CoreData 模型，其中包含关系和所有字段，相应地具有 Attraction 和 CheckIn 中的属性。

提前致谢

# asp.net - 即使我在 Windows 8 中安装了协议，SignalR 也不会使用 Websocket 协议

> ID：12924607
> 
> 赞同：5
> 
> 时间：2012-10-16T22:44:56.303
> 
> 标签：asp.net, iis, windows-8, websocket, signalr

我正在使用信号器在我的 Web 应用程序中执行一些实时事件。我试图强制信号器使用新的 websocket 协议，但它不会，即使我指定它。

```
$.connection.hub.start({ transport: 'webSockets' }) 
```

我肯定安装了 Web 套接字协议，并且正在运行带有 IIS 8 的 Windows 8。

我还需要做什么才能在信号器中启用 Web 套接字支持？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T00:26:40.333

确保您的应用使用 SignalR 包中的 .NET 4.5 程序集。如果项目以 4.0 为目标，或者以这种方式开始，那么 nuget 将添加对不支持 websocket 的 4.0 SignalR 程序集的引用。如果是这种情况，那么只需将信号器包卸载并重新安装到您的项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T23:35:12.653

Web 套接字需要 .NET 4.5。

如果您以后尝试在 Windows Server 8 上运行它，请务必激活 Web Sockets 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T11:33:10.850

如果您已经在使用框架 4.5 但仍然没有运气，请向您的 IIS 网站添加 HTTPS 绑定并通过 HTTPS 访问该网站。

# azure - Window Azure 与 Citrix Xenapp

> ID：12924609
> 
> 赞同：0
> 
> 时间：2012-10-16T22:45:01.753
> 
> 标签：azure, citrix

目前，我的公司通过 Citrix Xenapp 服务器向客户提供我们的软件。作为管理员，我们能够启动服务器实例，而我们的客户只能启动他们的特定应用程序

我的问题是 Windows Azure 是否也提供这种类型的环境。我正在寻找部署我们应用程序的新版本并且我倾向于 Azure，但如果这是我们前进的方向，我希望将我们现有的所有系统迁移到 Azure，而不是同时维护 Azure 和 Citrix。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:06:59.767

格雷格，

原则上是的，您可以这样做，但您不能只插入 Azure 作为 XenApp 的直接替代品（零/最少的努力）。Azure 实际上有它自己的运行时。虽然它是基于 Windows 的，并且肯定有可能在 Azure 等效的现有应用程序中重用代码，但您需要重新编写应用程序以使其在 Azure 中运行。

鉴于您的应用程序在 XenApp 上运行，它很可能是一个胖客户端应用程序，即它的大部分逻辑都存在于您在 XenApp 上运行的主可执行文件中，并且可能会使用一些其他后端服务。相比之下，您应该将 Azure 视为提供 Web 应用程序的平台。因此，您可以将该应用程序重新架构为 Azure 托管的 Web 应用程序，然后您可以通过 Azure 以多租户方式将其部署给您的客户，然后他们将通过浏览器而不是 Citrix Receiver 访问它。

问候，多诺万

# sharepoint-2010 - SharePoint 2010 虚拟机 DNS 问题

> ID：12924620
> 
> 赞同：0
> 
> 时间：2012-10-16T22:45:48.917
> 
> 标签：sharepoint-2010, dns, virtual-machine

我最近在工作中为我们的虚拟机创建了一个新的 SharePoint 2010 映像。安装和配置完成后，通常会打开一个指向您计算机名称的页面。但是，在我创建的所有图像中，我都遇到了问题。当 SharePoint 完成配置并转到计算机的本地 url（例如“http://yourcomputername/”）时，我收到 DNS_UNRESOLVED_HOSTNAME 错误。但是，当我将 url 更改为“http://localhost/”时，它允许我转到我的 SharePoint 网站的主页。

任何想法可能是什么问题？我正在使用 VMWare Player 来设置映像，并且我将 Windows Server 2008 R2 作为我的基本操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:06:14.433

我在重新创建我的虚拟机后发现这只是一个设置问题，仅此而已。

# wolfram-mathematica - NDSolve 不返回任何内容

> ID：12924621
> 
> 赞同：0
> 
> 时间：2012-10-16T22:45:54.000
> 
> 标签：wolfram-mathematica, differential-equations

任何人都可以看看这个.nb，因为我很确定我的 7 个未知数和 3 个微分未知数的 10 个方程组是有效的？NDSolve 什么都不返回，它甚至不会给我一条错误消息。

[链接到笔记本](http://danielmaly.net/nondsolve.nb)

# visual-studio-2012 - 带有 WCF RIA 服务的可重复使用的通用 LightSwitch 屏幕

> ID：12924631
> 
> 赞同：1
> 
> 时间：2012-10-16T22:47:18.463
> 
> 标签：visual-studio-2012, wcf-ria-services, visual-studio-lightswitch

我是 WCF RIA 服务的新手，现在使用 LightSwitch 已经有 4 个月左右的时间了。我创建了一个通用屏幕，用于在整个 LightSwitch 应用程序中编辑查找表，主要是为了学习如何创建一个通用屏幕，该屏幕可以动态地与不同的实体集一起使用。

画面很简单：

![LightSwitch 中的通用 LookupTypesList](../Images/d46508c2b878c2b7255ec4cd30364218.png)

使用类似于以下的参数打开： `Application.ShowLookupTypesList("StatusTypes", "StatusTypeId");`它对应于数据库中查找表的实体集。

这是我的 WCF RIA 服务代码：

```
using System.Data.Objects.DataClasses;
using System.Diagnostics;
using System.Reflection;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data;
using System.Linq;
using System.ServiceModel.DomainServices.EntityFramework;
using System.ServiceModel.DomainServices.Server;

namespace WCF_RIA_Project
{
    public class LookupType
    {
        [Key]
        public int TypeId { get; set; }
        public string Name { get; set; }
    }

    public static class EntityInfo
    {
        public static Type Type;
        public static PropertyInfo Key;
        public static PropertyInfo Set;
    }

    public class WCF_RIA_Service : LinqToEntitiesDomainService<WCSEntities>
    {

        public IQueryable<LookupType> GetLookupTypesByEntitySet(string EntitySetName, string KeyName)
        {
            EntityInfo.Set = ObjectContext.GetType().GetProperty(EntitySetName);
            EntityInfo.Type = EntityInfo.Set.PropertyType.GetGenericArguments().First();
            EntityInfo.Key = EntityInfo.Type.GetProperty(KeyName);

            return GetTypes();
        }

        [Query(IsDefault = true)]
        public IQueryable<LookupType> GetTypes()
        {
            var set = (IEnumerable<EntityObject>)EntityInfo.Set.GetValue(ObjectContext, null);
            var types = from e in set
                        select new LookupType
                        {
                            TypeId = (int)EntityInfo.Key.GetValue(e, null),
                            Name = (string)EntityInfo.Type.GetProperty("Name").GetValue(e, null)
                        };
            return types.AsQueryable();
        }

        public void InsertLookupType(LookupType lookupType)
        {
            dynamic e = Activator.CreateInstance(EntityInfo.Type);
            EntityInfo.Key.SetValue(e, lookupType.TypeId, null);
            e.Name = lookupType.Name;

            dynamic set = EntityInfo.Set.GetValue(ObjectContext, null);
            set.AddObject(e);
        }

        public void UpdateLookupType(LookupType currentLookupType)
        {
            var set = (IEnumerable<EntityObject>)EntityInfo.Set.GetValue(ObjectContext, null);
            dynamic modified = set.FirstOrDefault(t => (int)EntityInfo.Key.GetValue(t, null) == currentLookupType.TypeId);
            modified.Name = currentLookupType.Name;
        }

        public void DeleteLookupType(LookupType lookupType)
        {
            var set = (IEnumerable<EntityObject>)EntityInfo.Set.GetValue(ObjectContext, null);
            var e = set.FirstOrDefault(t => (int)EntityInfo.Key.GetValue(t, null) == lookupType.TypeId);
            Debug.Assert(e.EntityState != EntityState.Detached, "Entity was in a detached state.");
            ObjectContext.ObjectStateManager.ChangeObjectState(e, EntityState.Deleted);
        }
    }
} 
```

当我从运行屏幕将项目添加到列表中，保存它，然后编辑它并重新保存时，我收到数据冲突*“另一个用户已删除此记录”。*

![数据冲突：](../Images/4490dc809434164595195c0fb582f7a7.png)

我可以通过在保存后重新加载查询来解决这个问题，但这很尴尬。

如果我删除、保存、读取并保存一个具有相同名称的项目，我将无法保存数据，*“上下文已经在跟踪具有相同资源 Uri 的不同实体。”*

![无法保存数据：](../Images/9479726ed0e1afcf832c42e6d08ee916.png)

这两个问题只影响我使用 WCF RIA 服务的通用屏幕。当我为特定数据库实体构建 ListDetail 屏幕时，没有问题。看来我缺少一些逻辑，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:58:20.277

我了解到这是使用 LightSwitch 的错误方法。

这个通用屏幕无法完全模拟一些幕后的东西，如果不做大量工作可能无法实现。我收到的错误只是一个例子。*LightSwitch 的内置冲突解决也将失败*。

LS 的 RAD 设计意味着只创建一堆相似的屏幕是可行的方法，并有一些共享的方法。如果实际布局需要同时在许多相同的屏幕上更改，`.lsml`如果您*小心*并先进行备份，您始终可以找到并替换文件。请注意，不支持直接修改这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:19:58.070

我最近收到了这个错误。在我的例子中，我在我的 WCF RIA 服务中创建了一个唯一 ID，但是在我的代码后面的屏幕中，当我创建稍后将传递给 WCF RIA 服务插入方法的对象时，我必须显式设置一个唯一 ID（然后这个值将是用底层数据库表中的唯一计数器 ID 覆盖）。

请参阅此项目的示例代码：http: [//lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/157/A-Visual-Studio-LightSwitch-Picture-File-Manager.aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/157/A-Visual-Studio-LightSwitch-Picture-File-Manager.aspx)

# mapping - 用于 2D 游戏教程的 C++ Tile 映射？

> ID：12924633
> 
> 赞同：2
> 
> 时间：2012-10-16T22:47:32.603
> 
> 标签：mapping, 2d, tile

我正在尝试弄清楚如何设置 2D 自上而下的视图游戏。我认为瓦片映射是一个很好的开始。我为角色和地砖使用基本精灵。有人知道我可以使用的好的教程和设置指南吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-29T20:03:17.203

很抱歉回答迟了，但在我搜索与您相同的内容时，我发现了以下结果：

1.  [从零开始的 C++ Tile 引擎——第 1 部分](http://www.dreamincode.net/forums/topic/230524-c-tile-engine-from-scratch-part-1/)
2.  [从头开始的 C++ Tile 引擎——第 2 部分](http://www.dreamincode.net/forums/topic/230525-c-tile-engine-from-scratch-part-2/)
3.  [从头开始的 C++ Tile 引擎——第 3 部分](http://www.dreamincode.net/forums/topic/231078-c-tile-engine-from-scratch-part-3/)
4.  [从头开始的 C++ Tile 引擎——第 4 部分](http://www.dreamincode.net/forums/topic/232396-c-tile-engine-from-scratch-part-4/)

我希望它有帮助:)

# maven - 在父 pom 中定义 Maven 插件，但只在子项目中调用插件

> ID：12924634
> 
> 赞同：51
> 
> 时间：2012-10-16T22:47:40.360
> 
> 标签：maven, build-process

我有一组项目，它们都需要在构建期间运行相同系列的 Maven 插件执行。我想避免在每个项目中重新声明所有这些配置，所以我让它们都继承自父 pom“模板”项目，该项目仅包含那些插件执行（8 个不同的 mojos）。但我希望这些插件执行只在子项目上运行，而不是在 Maven 构建期间在父项目上运行。

我尝试了四种不同的方式来完成这件事，每种方式都有我不喜欢的副作用。

1.  在父 pom 的元素中声明插件执行，`build/plugins`并使用 properties-maven-plugin[打开`skip`](http://maven.40175.n5.nabble.com/Execution-of-plugin-in-child-poms-and-not-in-current-pom-tp4666403p4685295.html)父项目中[其他插件的属性。](http://maven.40175.n5.nabble.com/Execution-of-plugin-in-child-poms-and-not-in-current-pom-tp4666403p4685295.html)这不起作用，因为插件目标之一（maven-dependency-plugin:build-classpath）没有`skip`属性。

2.  `build/pluginManagement`在父 pom 的元素中声明插件执行。`build/plugins`不幸的是，这需要我在每个子项目的 pom 元素中重新声明八个插件中的每一个，例如：

    ```
    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
    </plugin>
    ... 
    ```

    如果我需要更改模板 pom.xml 中的插件，这太重复了，而且有问题。

3.  在父 pom 中的配置文件中声明插件执行，该文件因缺少文件而激活（*父*`nobuild.txt`pom 中确实存在，因此插件不会在那里执行）：

    ```
    <profiles>
        <profile>
            <activation>
                <file>
                    <missing>nobuild.txt</missing>
                </file>
            </activation>
            <build>
                ....
            </build>
        </profile>
    </profiles> 
    ```

    这在大多数情况下都有效，除了`missing`元素中的文件路径似乎基于*当前工作目录*而不是基于项目的项目。这打破了我希望能够做的一些多模块构建。 **编辑：**澄清一下，父“模板”项目实际上本身就是多模块项目中的一个模块，并且当我尝试例如`mvn install`在根上执行时构建中断。项目结构如下：

    ```
    + job
    |- job-core
    |- job-template
    |- job1                   inherits from job-template
    |- job2                   inherits from job-template 
    ```

4.  设置自定义生命周期和打包。这似乎允许我将插件绑定到生命周期阶段，[但不指定任何配置](http://maven.40175.n5.nabble.com/writing-a-parent-pom-that-does-not-execute-its-plugins-tp4913346p4919168.html)。

那么，是否有另一种方法来指定一组可以在多个项目中重用的 Maven 插件执行（在每个项目的 pom 中重复最少）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2018-12-07T08:56:14.520

这是第五种方式。我认为它有最小的缺点：没有配置文件，没有自定义生命周期，在子 POM 中没有声明，对插件没有“跳过”要求。

[从https://stackoverflow.com/a/14653088/2053580](https://stackoverflow.com/a/14653088/2053580)复制它——非常感谢[最终用户](https://stackoverflow.com/users/167889/end-user)！

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <!-- Main declaration and configuration of the plugin -->
                <!-- Will be inherited by children -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>
                <executions>
                    <execution>
                        <!--This must be named-->
                        <id>checkstyle</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
                <!-- You may also use per-execution configuration block -->
                <configuration...>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <!-- This declaration makes sure children get plugin in their lifecycle -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <!-- Configuration won't be propagated to children -->
            <inherited>false</inherited>
            <executions>
                <execution>
                    <!--This matches and thus overrides execution defined above -->
                    <id>checkstyle</id>
                    <!-- Unbind from lifecycle for this POM -->
                    <phase>none</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T23:52:54.370

我最终编写了自己的插件，该插件利用[mojo-executor](https://github.com/TimMoore/mojo-executor#readme)来调用其他 mojo。这使我能够 1) 集中构建配置和 2) 最大限度地减少在每个子项目中重复的配置数量。

^(（如果您对这一切的原因感到好奇：每个子项目都是一个将从命令行执行的作业。构建设置了一个调用者 shell 脚本并将其附加到构建中，以便将其签入我们的工件存储库。部署脚本稍后将它们拉到它们将运行的机器上。）)

模板项目的 pom 的相关部分：

```
<project ...>
    <parent> ... </parent>
    <artifactId>job-template</artifactId>
    <packaging>pom</packaging>
    <name>job project template</name>
    <build>
        <pluginManagement>
            <plugin>
                <groupId>...</groupId>
                <artifactId>job-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>generate-sources-step</id>
                        <goals><goal>job-generate-sources</goal></goals>
                    </execution>
                    <execution>
                        <id>package-step</id>
                        <goals><goal>job-package</goal></goals>
                    </execution>
                    ... (a couple more executions) ...
                </executions>
            </plugin>
        </pluginManagement>
    </build>
</project> 
```

不得不创建一个新的 maven-plugin 项目（job-maven-plugin）。Pom 看起来像：

```
<project ...>
    <parent> ... </parent>
    <artifactId>job-maven-plugin</artifactId>
    <packaging>maven-plugin</packaging>
    <name>job maven executor plugin</name>
    <dependencies>
        <dependency>
            <groupId>org.twdata.maven</groupId>
            <artifactId>mojo-executor</artifactId>
            <!-- version 1.5 supports Maven 2, while version 2.0 only supports Maven 3 -->
            <version>1.5</version>
        </dependency>
    </dependencies>
</project> 
```

正如您从模板项目中看到的那样，我的插件中有多个 mojo（每个阶段一个需要发生的事情）。例如，job-package mojo 绑定到 package 阶段并使用 mojo-executor 库来运行另外两个 mojo（它们只是附加了一些构建工件）：

```
/**
 * @goal job-package
 * @phase package
 */
public class PackageMojo extends AbstractMojo {
    /**
     * @parameter expression="${project}"
     * @required
     * @readonly
     */
    protected MavenProject project;
    /**
     * @parameter expression="${session}"
     * @required
     * @readonly
     */
    protected MavenSession session;
    /**
     * @component
     * @required
     */
    protected PluginManager pluginManager;

    @Override
    public void execute() throws MojoExecutionException, MojoFailureException {
        ExecutionEnvironment environment = executionEnvironment(project, session, pluginManager);

        // Attach script as a build artifact
        executeMojo(
            plugin(
                groupId("org.codehaus.mojo"),
                artifactId("build-helper-maven-plugin"),
                version("1.7")
            ),
            goal("attach-artifact"),
            configuration(
                element("artifacts",
                    element("artifact",
                        element("file", "${project.build.directory}/script.shl"),
                        element("type", "shl")
                    )
                )
            ),
            environment
        );

        // Zip up the jar and script as another build artifact
        executeMojo(
            plugin(
                groupId("org.apache.maven.plugins"),
                artifactId("maven-assembly-plugin"),
                version("2.3")
            ),
            goal("single"),
            configuration(
                element("descriptors",
                    element("descriptor", "${project.build.directory}/job/descriptor.xml")
                )
            ),
            environment
        );
    }
} 
```

然后，在子项目中，我只需要引用一次插件。在我看来，这比在每个子项目中重复每个幕后插件要好得多（这不可接受地增加了 pom 之间的耦合）。如果我以后想在构建过程中添加一个 mojo 执行，我只需要修改一个地方并增加一个版本号。子项目的 pom 看起来像：

```
<project ...>
    <parent>
        <groupId> ... </groupId>
        <artifactId>job-template</artifactId>
        <version> ... </version>
        <relativePath>../job-template</relativePath>
    </parent>
    <artifactId>job-testjob</artifactId>
    <name>test job</name>
    <build>
        <plugins>
            <plugin>
                <groupId> ... </groupId>
                <artifactId>job-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project> 
```

此外，整个多模块目录结构现在看起来像这样：

```
+- job
  +- job-core
  +- job-maven-plugin
  +- job-template
  +- job-testjob1               (inherits from job-template)
  +- job-testjob2               (inherits from job-template) 
```

在我看来，这个解决方案并不完全是最佳的，因为我现在将插件配置嵌入到一系列 mojos 而不是 pom 中，但它满足了我的目标，即集中配置并最大限度地减少子项目 pom 之间的重复。

^(（最后一点：我刚刚发现[maven-aggregate-plugin](http://code.google.com/p/maven-aggregate-plugin/wiki/Usage)似乎允许在 pom 中对多个插件执行进行分组。这可能以稍微更理想的方式解决了问题，但我没有心情重做最后一个几个小时的工作。虽然可能对其他人有益。）)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T15:11:53.197

就我个人而言，我会选择解决方案 2。重复次数最少，如果可能，您应该尽量避免配置文件，以避免开始记录需要为哪些项目激活哪些配置文件。

只需简单地执行一个`mvn (clean) install`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-18T10:00:03.573

[这是我在](http://maven.40175.n5.nabble.com/Can-I-force-a-plugin-to-not-run-during-parent-pom-execution-phase-tp5752479p5752492.html)寻找相同问题的解决方案时发现的另一个选项。我在这里发布它是因为这已经是一个很好的选项集合 - 希望它可以帮助其他人不要花费数小时来解决这个问题：

鉴于插件具有跳过执行的选项，可以在父 pom（部分）中打开该选项，并将“继承”标志设置为 false，以便它不会传播给子代：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
        <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
            <inherited>true</inherited>
            <configuration>
               ...
            </configuration>
        </execution>
    </executions>
    <!-- Skip plugin execution for parent pom but enable it for all children -->
    <configuration>
        <skipAssembly>true</skipAssembly>
    </configuration>
    <inherited>false</inherited>
</plugin> 
```

虽然当我第一次阅读这个解决方案时，我对它持怀疑态度，但它对我有用——至少对于程序集插件来说是这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-05T12:55:44.613

另一种选择：您可以更改执行绑定到不存在值的阶段，而不是使用“跳过”属性，例如`never`.

`<inherited>false</inherited>`这与@Timi 建议的方法一起使用非常好

# import - Xcode 如何从 iTunes 获取 iTunes 曲目信息，特别是评论？

> ID：12924642
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:49:32.740
> 
> 标签：import, comments, itunes

我可以将用户对 iTunes 中曲目的评论输入到我的应用程序中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:21:34.850

你的问题很模棱两可。

在 Mac 上，用户评论可作为`comment`任何`track`对象的属性使用。在 Windows 上，它们可作为`Comment`任何`IITTrack`对象上的方法的结果。

因此，假设您已经知道如何访问轨道：

苹果脚本：

```
comment of theTrack 
```

在 Mac 上使用 ScriptingBridge 或 appscript 的 Python：

```
theTrack.comment() 
```

在 Windows 上使用 PyCOM 的 Python：

```
theTrack.Comment() 
```

带有 ScriptingBridge 或 appscript 的 ObjC：

```
[theTrack comment]; 
```

等等。

如果您不知道如何访问曲目，则需要比这更多的基本帮助（并且您需要告诉我们您使用的是 Windows 还是 Mac，您要使用哪种语言和库等），但这里有一个完整的 py-appscript 示例，打印出库中每首曲目的评论：

```
from appscript import *
print('\n'.join(app('iTunes').tracks.comment())) 
```

如果您不是在编写 iTunes 脚本，而是在解析其 XML 库 plist 文件，那么每个曲目都是`dict`一个`Tracks`. 如果轨道有用户评论，它们是带有 key 的字符串`Comments`。同样，如果您还不知道如何解析这个 XML 文件，那么您就会遇到更基本的问题。但这里又是一个简单的例子：

```
from Foundation import NSDictionary
d = NSDictionary.dictionaryWithContentsOfFile_('/Users/me/Music/iTunes/iTunes Library.xml')
print('\n'.join(t.get('Comments', '') for t in d['Tracks'].values())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:10:00.360

从您的评论来看，听起来您实际上不是在 Mac 上，而是在 iOS 上，而且您实际上并不是在尝试从 iTunes 访问评论，而是从 iOS 音乐库访问评论。

如果是这样的话：

```
NSString *comments = [currentItem valueForProperty:MPMediaItemPropertyComments]; 
```

这将为您提供 iOS 音乐库中的评论。但是，无法保证设备会同步从 iTunes 同步的任何曲目（或从商店购买，或从 Match 下载）的评论，因此您很可能一无所获。在这种情况下，您无能为力。

您无法直接从 iTunes 获取评论，因为您没有连接到 iTunes。

# javascript - 是否有一种设计模式可以像观察者一样与装饰器混合使用？

> ID：12924648
> 
> 赞同：3
> 
> 时间：2012-10-16T22:50:15.063
> 
> 标签：javascript, design-patterns

我注意到不久前使用 XNA/C#（游戏引擎）之类的东西时，您只需将组件添加到对象并赋予它额外的功能。例如：

**类 Spaceship**有组件，**Collidable**，**Gravity**，**Controls**等等......

通常这些组件实现 IUpdatable/IDrawable 接口或 DrawableGameComponent 或其他东西：[https ://gamedev.stackexchange.com/questions/20918/what-happens-when-i-implement-iupdateable-or-idrawable-in-xna](https://gamedev.stackexchange.com/questions/20918/what-happens-when-i-implement-iupdateable-or-idrawable-in-xna)

当需要更新/绘制或其他一些“事件”时，所有组件都会被调用，这些组件上都有这些事件，这让我想到了观察者模式。然而，这些功能似乎是在“装饰”主类。

这是一个已知的模式吗？这叫什么？这是一个在游戏开发之外使用的好模式吗？我标记 JavaScript 的原因是因为我正在考虑在 JS 中做类似的事情，我想知道是否有人见过有人做类似的事情。

它可能看起来像这样：

```
function Watcher() {
    this.components = [];
    this.update() = function() {
        for (component in this.components) {
            if (typeof component.update === "function") {
                component.update();
            }                
        }            
    };
}

function Component() {
    this.update = function() {
    };
}

function Wiggle(obj) {
    _.extend(this, Component.prototype);
    this.obj = obj;
    this.wiggled = false;
    this.update = function() {
        if (this.wiggled) {
            this.obj.x -= 1;         
        } else {
            this.obj.x += 1;            
        }
        wiggled = !wiggled;           
    };
}

function Car() {
    this.x = 0;
    _.extend(this, Watcher.prototype);
    this.components.push(new Wiggle(this));
} 
```

然后可能会触发事件并更新所有汽车组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:54:48.663

我认为您的意思是 mixins (Javascript) 或 Traits (PHP)

Mixins 基本上只是 _.extend'ing（或 $.extend'ing）您当前的对象与另一个对象（已经具有一些属性/功能）。您可以在[http://www.joezimjs.com/javascript/javascript-mixins-functional-inheritance/上阅读更多内容](http://www.joezimjs.com/javascript/javascript-mixins-functional-inheritance/)

PHP (5.4) 的特性更强大，你可以做很多很酷的事情。这是来自 stackoverflow 的一个很好的例子：[PHP 中的特征——任何现实世界的例子/最佳实践？](https://stackoverflow.com/questions/7892749/traits-in-php-any-real-world-examples-best-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:50:14.863

**复合**图案？

`Component`为常见的行为（`update`方法）定义一个接口（ ）

让所有组件实现`Component`（可碰撞、重力、控制等）

让父类`SpaceShip`维护一个`Component`s列表

让父类也`SpaceShip`实现 `Component`。

从客户的角度来看`SpaceShip`，它是一个提供`update`方法的对象。

在内部，在它的`update`方法中，`SpaceShip`调用`update`所有`Component`的

# objective-c - 自动布局约束 - 键盘

> ID：12924649
> 
> 赞同：35
> 
> 时间：2012-10-16T22:50:20.403
> 
> 标签：objective-c, ios, uikeyboard, autolayout

我坚持尝试平滑地为具有自动布局约束的表格视图设置动画。我在我的 .h 中引用了约束“keyboardHeight”，并在 IB 中将其链接起来。我要做的就是在弹出时使用键盘为表格视图设置动画。这是我的代码：

```
- (void)keyboardWillShow:(NSNotification *)notification
{
    NSDictionary *info = [notification userInfo];
    NSValue *kbFrame = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    NSTimeInterval animationDuration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    CGRect keyboardFrame = [kbFrame CGRectValue];
    CGFloat height = keyboardFrame.size.height;

    [UIView animateWithDuration:animationDuration animations:^{
        self.keyboardHeight.constant = -height;
        [self.view setNeedsLayout];
    }];
} 
```

问题是动画块是瞬时的，我看到在键盘完成动画之前出现空白。所以基本上我在键盘动画时看到视图的白色背景。只要键盘正在动画，我就无法使动画持续。

我是以错误的方式接近这个吗？提前致谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-17T00:58:02.167

试试这种方式：

```
self.keyboardHeight.constant = -height;
[self.view setNeedsUpdateConstraints];

[UIView animateWithDuration:animationDuration animations:^{
   [self.view layoutIfNeeded];
}]; 
```

记住这个模式，因为这应该是更新基于约束的布局的正确方法（根据 WWDC）。你也可以添加或删除`NSLayoutConstraint`s，只要你调用`setNeedsUpdateConstraints`之后。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-01T17:08:10.920

如果您使用的是 UITableViewController，则 iOS 应自动适应键盘大小以调整 contentInsets。但是如果你的 tableView 在 UIViewController 里面，你可能想用这个：

[Spring](https://github.com/MengTo/Spring)框架中的[KeyboardLayoutConstraint 。](https://github.com/MengTo/Spring/blob/master/Spring/KeyboardLayoutConstraint.swift)到目前为止我找到的最简单的解决方案。 ![键盘布局约束](../Images/0b7f22ab5674c268a63fcafeb229df59.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-11T16:05:34.100

尝试下一个代码。在这种情况下，表格视图布局在屏幕的底部边缘。

```
- (void)keyboardWillShow:(NSNotification *)notification { // UIKeyboardWillShowNotification

    NSDictionary *info = [notification userInfo];
    NSValue *keyboardFrameValue = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    NSTimeInterval animationDuration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    CGRect keyboardFrame = [keyboardFrameValue CGRectValue];

    BOOL isPortrait = UIDeviceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation);
    CGFloat keyboardHeight = isPortrait ? keyboardFrame.size.height : keyboardFrame.size.width;

    // constrBottom is a constraint defining distance between bottom edge of tableView and bottom edge of its superview
    constrBottom.constant = keyboardHeight; 
    // or constrBottom.constant = -keyboardHeight - in case if you create constrBottom in code (NSLayoutConstraint constraintWithItem:...:toItem:...) and set views in inverted order

    [UIView animateWithDuration:animationDuration animations:^{
        [tableView layoutIfNeeded];
    }];
}

- (void)keyboardWillHide:(NSNotification *)notification { // UIKeyboardWillHideNotification

    NSDictionary *info = [notification userInfo];
    NSTimeInterval animationDuration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    constrBottom.constant = 0;
    [UIView animateWithDuration:animationDuration animations:^{
        [tableView layoutIfNeeded];
    }];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-18T18:36:56.547

我采用的方法是添加一个遵循键盘大小的视图。将它添加到您的表格视图或文本输入或其他任何内容下方，当键盘出现时它会向上推。

这就是我设置视图层次结构的方式：

```
NSDictionary *views = @{@"chats": self.chatsListView, @"reply": self.replyBarView, @"fakeKeyboard":self.fakeKeyboardView};
[self.view addVisualConstraints:@"V:|-30-[chats][reply][fakeKeyboard]|" views:views]; 
```

然后键盘尺寸跟随视图的关键位如下所示：

```
- (void)keyboardWillShow:(NSNotification *)notification
{
    // Save the height of keyboard and animation duration
    NSDictionary *userInfo = [notification userInfo];
    CGRect keyboardRect = [userInfo[UIKeyboardFrameEndUserInfoKey] CGRectValue];
    self.desiredHeight = CGRectGetHeight(keyboardRect);
    self.duration = [userInfo[UIKeyboardAnimationDurationUserInfoKey] floatValue];

    [self animateSizeChange];
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    self.desiredHeight = 0.0f;

    [self animateSizeChange];
}

- (CGSize)intrinsicContentSize
{
    return CGSizeMake(UIViewNoIntrinsicMetric, self.desiredHeight);
}

- (void)animateSizeChange
{
    [self invalidateIntrinsicContentSize];

    // Animate transition
    [UIView animateWithDuration:self.duration animations:^{
        [self.superview layoutIfNeeded];
    }];
} 
```

让这个特定视图处理其大小调整的好处是，您可以让视图控制器忽略它，并且您还可以在您的应用程序中任何您想要将所有内容向上移动的地方重新使用此视图。

完整文件在这里： [https ://gist.github.com/shepting/6025439](https://gist.github.com/shepting/6025439)

# ipad - 无法将右栏按钮项添加到导航项

> ID：12924652
> 
> 赞同：0
> 
> 时间：2012-10-16T22:50:50.187
> 
> 标签：ipad, ios5

我想实现一种方法来在标题导航栏的右侧添加一个完成的底部，以便有人开始在 UITextView 中输入文本但由于某种原因没有任何反应。该方法被调用但不添加按钮：

```
-(void)textViewDidBeginEditing:(UITextView *)textView{  
    UIBarButtonItem *doneButton;
    [doneButton setTarget:self];
    [doneButton setStyle:UIBarButtonItemStyleDone];
    [doneButton setAction:@selector(keyboardDone:)];
    [self.navigationItem setRightBarButtonItem:doneButton animated:YES];           
} 
```

我在这里做一些非常基本的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T00:19:51.813

您需要在准备好使用之前分配并初始化 UIBarButton 项。您所做的只是声明“doneButton”是一个 UIBarButtonItem，但您从未正确设置它以供使用。

# sql - 无法在数据步骤中运行调用执行

> ID：12924653
> 
> 赞同：2
> 
> 时间：2012-10-16T22:50:51.273
> 
> 标签：sql, sas

我正在尝试在数据步骤中运行插入语句来填充表。运行代码 ERROR: Domain error 时出现以下错误。日志中没有关于此错误的其他信息。

我正在实现的示例代码是：

```
 DATA _NULL_;
  SET DataSetA;

 Call Execute ('Proc Sql; Insert Into TableA Select col1,col2,c.Col2 From Table B Inner        Join ( Select col1,' || Datasetcol1 || ' As col2, ' || Datasetcol2 || ' as Col3 FROM ' || Datasetcol3 || ' ) c On b.Col1=c.col1;quit;');

 run; 
```

如果有 2000 条记录，此代码运行正常，但现在我有 10000 条记录并抛出该错误。Datasetcol1 和 Datasetcol2 是我在查询中使用的数据集的值。

我不知道为什么会发生此错误。最初，我认为这可能是因为处理器工作太多，我使用 sleep 和 wakeup 等待，但是，我仍然得到错误。另外，我并不总是收到此错误。它有时会发生，有时不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:50:57.097

我正在运行 Joe 的代码，我没有任何问题。这是在带有 SAS 9.2m3 的 Windows 7 上，因此可能与您的环境不同。另外，由于我没有您的数据，因此我无法复制您所做的事情。

我看到很多可能会改进代码的东西，但错误消息表明 SAS 内部存在一些问题。我通常发现与 SAS 技术支持人员核实比推测称为 SAS 的黑匣子中可能发生的事情更有效。提交一张票。

我在 SAS 支持站点上很好地引用了此错误消息，它指向 Oracle 特定问题。[http://support.sas.com/kb/14/873.html](http://support.sas.com/kb/14/873.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:44:43.507

首先，我会尝试删除“PROC SQL；” 和“退出；” 从您重复的 CALL EXECUTE 中，并且每次只运行一次 - 使用 IF *N* = 1; 运行 PROC SQL，您可以使用 LAST 变量来确定何时调用 QUIT，或者将其留在数据步之外并编写 QUIT；运行后；数据步骤，因为它将在适当的位置执行。重复调用 SQL 环境可能会导致您的问题本身。

另一种可能的解决方案是不使用 CALL EXECUTE，而是将这些全部写入文本文件，然后 %include 该文本文件。同样，%include 不包括 PROC SQL 和 QUIT 的部分，以及 PROC SQL 块内的 %include。如果 CALL EXECUTE 在这里特别有问题，那么这在功能上没有区别。老实说，我还是更喜欢这种方法，因为它a）更接近你真正在做的事情（以编程方式编写SQL代码，然后执行它），b）更容易调试（它编写一个文本文件，然后你可以从中获取行去测试）。

编辑：从调用中删除 PROC SQL 和 QUIT 的示例：

```
data class;
set sashelp.class;
run;

filename _null dummy;
proc printto log=_null;
data _null_;
set sashelp.class end=eof;
if _n_ = 1 then call execute('PROC SQL;');
do _t = 1 to 10000;
  _exec = cats('insert into class (name,age,sex) select name,age,sex from sashelp.class where name="',name,'";');
  call execute(_exec);
end;

if eof then call execute('QUIT;');
run; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:04:28.763

对于如此庞大的代码生成，更安全的方法是生成一个外部文件并运行它：

```
 DATA _NULL_;
  SET DataSetA;
  file "script.sas";
  length stmt $200;
  stmt = 'Proc Sql; Insert Into TableA Select col1,col2,col3 From Table B Inner        Join ( Select col1,' || Datasetcol1 || ' As col2, ' || Datasetcol2 || ' as Col3 FROM Table C) c On b.Col1=c.col1;quit;';
  put stmt;
 run;

 %include "script.sas" ; 
```

这也为您提供了在处理代码时检查生成代码的地方。

注意：注意保存代码的变量的长度（`stmt $200`此处）和外部文件的行大小（默认为 256）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T21:11:48.640

您可以`call execute`通过宏工具执行所有操作来完全避免使用。

例子：

```
%macro InsertFromTable(table_name, ds_col1, ds_col2);
    proc sql;
        Insert Into TableA 
        Select col1,col2,col3 
        From Table B 
        Inner Join ( 
            Select col1
                ,&ds_col1\. As col2
                ,&ds_col2\. as Col3 
            FROM &table_name. as C
        ) c On b.Col1=c.col1
    ;quit;
%mend;

%Macro InsertFromAllTables();
    %let dsid=%sysfunc(open(DataSetA,i));
    %syscall set(dsid);

    %let rc = %sysfunc(fetch(&dsid));
       %do %while (&rc. eq 0);            
            %InsertFromTable(&table_name., &col1., &col2.);
            %let rc = %sysfunc(fetch(&dsid));            
       %end;
    %let rc=%sysfunc(close(&dsid));
%mend;

data DatasetA;
    infile datalines firstobs=3 missover;    
    input table_name: $10\. col1: $10\. col2: $10.;

    datalines;    
    table_name   col1   col2
    ----------   ----   ----
    Table_1       C1      C2
    Table_2       D1      D2
    Table_x       xx      yy
;run;

%InsertFromAllTables(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T18:12:37.857

如果您拥有最新版本的 SAS（版本 9.3 Maint 2），您可以尝试使用 DOSUBL 语句。它允许您从 DATA 步骤中运行任何 SAS 语句集合，只要这些语句代表“完整”步骤。即：全局语句，DATA 步与 RUN；，PROC 步与 RUN/QUIT。

它被标记为实验性的，但基本文档和示例可在[此 SAS 全球论坛 2012 论文](http://support.sas.com/resources/papers/proceedings12/227-2012.pdf)中找到。

注意：尽管 DOSUBL 最初在 SAS 9.3 中是有效的语法，但我的经验是它在 SAS 9.3M2 中效果更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T21:36:34.470

我将把它分成另一个答案，因为它与我最初的想法完全不同。

我首先假设这是一个数据错误。通过执行以下操作进行故障排除： 1\. 使用前 5000 行。如果成功，则仅使用第二个 5000 行 (firstobs=5001)。如果两者都不失败，则不是数据错误；如果其中一个或两个都失败，则可能是数据错误。2\. 然后执行二叉树搜索式算法。假设前 5000 个失败。然后尝试第一个 2500。如果失败，请尝试第一个 1250。继续直到找到通过的东西。然后尝试最后一个通过的另一半（例如，625 通过；所以尝试 626-1250）。

继续分成两半，直到您拥有可以检查的一小组数据（一行、五行，任何最适合您查看数据的能力，特别是基于内部连接创建的行数）。查看行，看看是否有任何可能非法的内容弹出。

当然，如果您达到特定大小（例如 625）并发现从 1 到 10000 的所有 625 集合都通过了，只是当组合成更大的集合时没有通过，您可能再次没有数据错误 - 但我认为这很可能你这样做，特别是考虑到拉里发布的链接。

如果您想要一个更快的解决方案，请考虑在 DatasetA 和 TableA/B 中对相关变量进行频率处理。看看其中一行中的任何内容是否非法或不寻常。例如，如果您看到一个不可能的日期，或者一个没有意义的负数，则可能是有问题。

最后，这个插入行的系统是什么？我希望不是 SAS（因为有很多更好的 SAS-sy 解决方案）。根据系统的不同，您可能违反了该系统的规则之一（例如在 Larry 的链接中），或者您可能违反了表约束或其他 SAS 没有特殊错误消息的东西，但仍然违反了一些规则。无论如何，“域错误”一词都可以这样理解。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T23:49:59.000

我认为你是对的，原因是`call execute`. 限制可以由多种因素决定，例如可用内存的数量、指令队列的限制（顺便说一句，我做了这个）等等......

在这种情况下，一个好的做法可能是使用数据集集语句上的`firstobs`and选项以 1000 个批处理执行调用。`obs`

```
DATA _NULL_;
  SET DataSetA(firstobs=1 obs=1000);
  *Call Execute ...;
run;

DATA _NULL_;
  SET DataSetA(firstobs=1001 obs=2000);
  *Call Execute ...;
run; 
```

然后根据需要对上述代码进行宏化...

# javascript - javascript中base64后的文件扩展名

> ID：12924654
> 
> 赞同：3
> 
> 时间：2012-10-16T22:50:51.840
> 
> 标签：javascript, jquery, base64, file-extension

> **可能重复：**
> [有没有办法在使用数据时指定建议的文件名：URI？](https://stackoverflow.com/questions/283956/is-there-any-way-to-specify-a-suggested-filename-when-using-data-uri)

因此，我设法从 powerpoint 中获取了一个 XML 文件，对该 XML 进行 ajax，然后提示用户下载使用 base 64 编码的文件。一旦用户下载了文件，他/她就可以用 powerpoint 打开它，一切正常。我唯一的问题是要下载的文件的名称和扩展名。目前在 chrome 中，它提示下载一个名为“download”的文件，没有文件扩展名。关于如何编辑要下载的文件名和扩展名的任何想法？
这是代码片段：

```
var file;
$.ajax({
    type: "GET",
    url: "file.xml",
    dataType: "xml",
    success: function(xml) {
        file = xml;
    }
});

window.location = "data:ms-powerpoint;base64" + btoa(file); 
```

谢谢！

# html - 响应式网格，当达到最小宽度时，浮动元素在彼此下方移动

> ID：12924655
> 
> 赞同：0
> 
> 时间：2012-10-16T22:50:59.033
> 
> 标签：html, css, responsive-design

我正在创建一个响应式网站（目前只处理主要内容。）

我创建了两个基于百分比宽度的浮动 div。一个包含随着浏览器调整大小而调整大小的图像。图像的最小宽度为 100 像素。

谁能告诉我为什么放入移动大小的宽度时它不会下降？如何在文本下方制作图像堆栈？

[JS小提琴](http://jsfiddle.net/7d6D7/)

[现场直播](http://www.rubytuesdaycreative.co.uk/testsite/about.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:58:22.917

如果您将: `min-width: 100px;`应用于 side 元素，则在小屏幕上它会下降到底部。祝设计好运。（像这样：http: [//jsfiddle.net/eddturtle/7d6D7/1/](http://jsfiddle.net/eddturtle/7d6D7/1/)）

# jquery - 高度 绝对定位（在响应式设计中）

> ID：12924657
> 
> 赞同：1
> 
> 时间：2012-10-16T22:51:16.257
> 
> 标签：jquery, css, responsive-design, media-queries

我有一个幻灯片，它是使用 jQuery 触发的，并在 ul 中循环显示图像。图像使用 CSS 设置样式以绝对定位为重叠，并且它们随意淡入和淡出。

**问题**

作为响应式设计的一部分，我给每张图片设置了 100% 的最大宽度，并为 ul 设置了静态高度，当然，图片会根据屏幕尺寸改变高度。

**解决方案**

可以在加载图像后使用 jQuery 检查图像的大小并相应地调整 ul 的大小 - 但这会在加载图像时导致令人讨厌的闪烁。

有 CSS 解决方案吗？

通过这个 jsFiddle 解释了很多：http: [//jsfiddle.net/eddturtle/vvsDh/1/](http://jsfiddle.net/eddturtle/vvsDh/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:08:56.087

您可以通过使用背景图像来提出一些建议，因为 CSS3 有一个“背景大小”属性，您可以将其设置为“覆盖”。[这是文档](http://w3schools.com/cssref/css3_pr_background-size.asp)。

我可能会做的是隐藏您的图像列表，而是为每个过渡创建一个图像持有者并设置它的 CSS 背景属性。让这个新的持有者淡入，并使用 fadeIn 函数的回调从 DOM 中删除以前的持有者。如果您需要我，我可能会为您编辑小提琴并运行此解决方案。

编辑***

来吧，伙计。这应该完全按照您的需要工作。就像现在一样，背景图像被设置为覆盖，这将确保图像填满整个区域。如果要确保显示整个图像并限制比例，请使用包含。您需要做的就是将父级#slideshow 高度调整到您需要的高度。

[http://jsfiddle.net/vvsDh/5/](http://jsfiddle.net/vvsDh/5/)

# sencha-touch - 未捕获的类型错误：无法读取未定义的属性“isModel”

> ID：12924662
> 
> 赞同：0
> 
> 时间：2012-10-16T22:51:51.193
> 
> 标签：sencha-touch

嗨，我在执行我的代码后收到此错误。它说“未捕获的类型错误：无法读取未定义的属性'isModel'”。我正在尝试使用我定义的名为“model.login”的模型和一个包含虚拟数据的存储来显示一个列表。

```
Ext.Loader.setConfig({
enabled: true,
paths:{
    'model' : 'app/model',
    'store' : 'app/store'
}

});
Ext.application({
    name: 'GS',
    launch: function(){
        var myStore = null;
        Ext.require('model.login', function(){
            var login = Ext.create('model.login');
            myStore = new Ext.data.Store({
                model: login,
                data:[
                      {id:'09803' , issued_at: 'thisurl', instance_url:'https', signature:'token', access_token:'ser'}
                      ]
            });
        });
        this.viewport = new Ext.Panel({
            fullscreen: true,
            items:[
                   {
                       xtype: 'list',
                       itemTpl: '{id}',
                       store: myStore
                   }
                   ]
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:56:31.357

您创建视口的调用是在`model.login`加载和创建商店之前发生的。将用于创建视口的代码移动到`Ext.require`.

此外，当将模型传递到商店时，您传递的是模型构造函数，而不是它的实例。

```
Ext.application({
  name: 'GS',
  launch: function(){
    this.viewport = 
    var me = this;
    Ext.require('model.login', function(){                
      myStore = new Ext.data.Store({;

      me.viewport = new Ext.Panel({
        fullscreen: true,
        // You can pass a single item into item
        items:{
          xtype: 'list',
          itemTpl: '{id}',
          store: myStore
        }
      });
    });
  }
}); 
```

请注意，有一种更好的方法可以做到这一点，您可以告诉应用程序要加载哪些模型并内联您的一些调用以使其更易于阅读

```
Ext.application({
  name: 'GS',
  models: 'login', // looks in GS.model.login
  launch: function(){
    me.viewport = new Ext.Panel({
      fullscreen: true,
      // You can pass a single item into item
      items:{
        xtype: 'list',
        itemTpl: '{id}',
        store: {
          model: 'model.login', // or GS.model.login without quotes
          data:[              
            {id:'09803' , issued_at: 'thisurl', instance_url:'https', signature:'token', access_token:'ser'}]
          }
       }
    });
  }
}); 
```

# ios - 使用 Gamekit 在设备之间共享音乐

> ID：12924663
> 
> 赞同：0
> 
> 时间：2012-10-16T22:51:52.923
> 
> 标签：ios, gamekit

有没有一种方法可以开发一个使用 GameKit 来共享当前在另一台设备上播放的音乐的应用程序？

使用 GameKit 的连接部分没有问题。这是我遇到问题的共享音乐部分。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:47:58.620

在做了一些研究后，我意识到这在技术上是可行的，但由于版权问题，Apple 不允许这样做。理论上，您可以通过 GameKit 连接 2 个设备，然后获取库中音频项目的 MPMediaPropertyAssetURL，并使用 AV Foundation 打开它。您可以使用 AVAssetReader 从文件中读取，然后通过 GameKit 连接流式传输它们。所以从技术上讲这是可能的，但在法律上可能不允许！希望这对某人有帮助！

# ehcache - 将 ehcache 服务器从一台机器移动到另一台机器

> ID：12924670
> 
> 赞同：0
> 
> 时间：2012-10-16T22:53:02.550
> 
> 标签：ehcache, terracotta

我们已经使用 ehcache.server.1.0.0.war 快一年了。

这周我们搬到了新电脑。我们复制了缓存并相应地更改了 ehcache.xml。

但是，新服务器现在没有启动。它抛出错误：

```
 SEVERE: WSSERVLET11: failed to parse runtime descriptor: java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
             java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
                             at org.slf4j.impl.JDK14LoggerAdapter.warn(JDK14LoggerAdapter.java:429)
                             at net.sf.ehcache.store.DiskStore.deleteIndexIfCorrupt(DiskStore.java:267)
                             at net.sf.ehcache.store.DiskStore.initialiseFiles(DiskStore.java:210)
                             at net.sf.ehcache.store.DiskStore.<init>(DiskStore.java:166)
                             at net.sf.ehcache.store.DiskStore.create(DiskStore.java:187)
                             at net.sf.ehcache.Cache.createDiskStore(Cache.java:1069)
                             at net.sf.ehcache.Cache.initialise(Cache.java:941)
                             at net.sf.ehcache.CacheManager.addCacheNoCheck(CacheManager.java:921)
                             at net.sf.ehcache.CacheManager.addConfiguredCaches(CacheManager.java:607)
                             at net.sf.ehcache.CacheManager.init(CacheManager.java:336)
                             at net.sf.ehcache.CacheManager.<init>(CacheManager.java:276)
                             at net.sf.ehcache.CacheManager.create(CacheManager.java:636)
                             at net.sf.ehcache.CacheManager.getInstance(CacheManager.java:657)
                             at net.sf.ehcache.server.soap.EhcacheWebServiceEndpoint.<init>(EhcacheWebServiceEndpoint.java:71)
                             at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                             at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:32:57.703

```
 java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple; 
```

当您的 jar 的 slf4j 版本错误时会发生此错误。仔细检查旧服务器上的所有 jar 版本/大小，并确保它们在新服务器上相同。

还有差异。jar 的版本可能在您的新应用服务器系统类路径中，这会干扰您的应用程序类路径。您应该在部署描述符中配置类加载顺序策略（它特定于您正在使用的应用服务器供应商）

# matlab - 如何在matlab图中最右边的x轴上添加附加标签？

> ID：12924671
> 
> 赞同：1
> 
> 时间：2012-10-16T22:53:02.720
> 
> 标签：matlab, matlab-figure

我已经为 x 轴设置了刻度标签，我也为 x 轴设置了标签。我正在寻找一种方法在 x 刻度标签旁边的图形最右边放置一个额外的 x 标签，有什么办法吗？谢谢

就像下图一样，x 刻度是自动添加的，x 标签是通过命令 xlabel 添加的。但我想在图中添加一个额外的标签“add'l”（红色）。但是我有很多图和/或子图，并且轴可能不同，所以我需要添加有问题的标签而不是手动添加。

![演示](../Images/e68673ce8a6526c760f11731af3d4992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:01:01.390

我建议使用`uicontrol`将仔细放置在相关区域中的一个。

```
 uicontrol('style','text',....); 
```

如果您的 UI 可调整大小，请确保具有相同的单位，即如果文本单位是`Normalized`，那么轴单位也应该是`Normalized`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:59:04.700

在 MATPLOTLIB 画廊页面上查看此示例：http: [//matplotlib.org/examples/pylab_examples/alignment_test.html](http://matplotlib.org/examples/pylab_examples/alignment_test.html)

它显示向轴添加各种不同的文本。 ![在此处输入图像描述](../Images/546c1161cf3194f5ea32648691cc6278.png)

# c++ - OSX 10.8.2 上的 Poco C++ 库：架构 x86_64 的未定义符号

> ID：12924673
> 
> 赞同：1
> 
> 时间：2012-10-16T22:53:10.707
> 
> 标签：c++, macos, http, linker, x86-64

我正在尝试使用[Poco](http://pocoproject.org/) C++ 库在 Mac OS X 10.8.2 上的 C++ 中执行简单的 http 请求。我安装了 Poco，复制粘贴了[本教程](http://xjia.heroku.com/2011/09/10/learning-poco-get-with-http/)中的 http_request.cc 代码，使用“g++ -o http_get http_get.cc -lPocoNet”运行它，但得到了：

```
Undefined symbols for architecture x86_64:
  "Poco::StreamCopier::copyStream(std::basic_istream<char, std::char_traits<char> >&, std::basic_ostream<char, std::char_traits<char> >&, unsigned long)", referenced from:
      _main in ccKuZb1g.o
  "Poco::URI::URI(char const*)", referenced from:
      _main in ccKuZb1g.o
  "Poco::URI::~URI()", referenced from:
      _main in ccKuZb1g.o
  "Poco::URI::getPathAndQuery() const", referenced from:
      _main in ccKuZb1g.o
  "Poco::URI::getPort() const", referenced from:
      _main in ccKuZb1g.o
  "Poco::Exception::displayText() const", referenced from:
      _main in ccKuZb1g.o
  "typeinfo for Poco::Exception", referenced from:
      GCC_except_table1 in ccKuZb1g.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

已经为此苦苦挣扎了几个小时。知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:07:57.463

,类在库中`Poco::URI`，因此您还需要链接到该库。`Poco::StreamCopier``PocoFoundation`

```
g++ -o http_get http_get.cc -lPocoNet -lPocoFoundation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:58:29.347

您似乎没有指定库的包含路径和编译源代码时要使用的库。您需要向 g++ 提供 -I 和 -L 指令以分别指定库和库本身的包含路径。

# php - 谷歌地图覆盖错误

> ID：12924680
> 
> 赞同：0
> 
> 时间：2012-10-16T22:54:06.647
> 
> 标签：php, sql, xml, google-maps

我正在使用 Google 地图创建一个地图，该地图可以通过调用 PHP 脚本以 XML 的形式输出 KML 层，从而从数据库中提取（和切换）各种数据层。当我运行下面的代码时，什么也没有发生，也没有控制台错误。我知道返回的 XML 是正确的，因为在我的测试中它与有效的 XML 数据层完全相同。

html

```
function downloadUrl(url,callback) {
        var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest;

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                callback(request, request.status);
            }
        };

        request.open('GET', url, true);
        request.send(null);
    }

    $(document).ready(function() {
        $('.kml_item').toggle(
                function() {
                    $(this).animate({backgroundColor: '#ffffff'}, 200);
                    downloadUrl("SQL_map.php", function(data) {
                        var xml = data.responseXML;
                        var kmlxml = new google.maps.KmlLayer(xml);
                        kmlxml.setMap(the_Map);
                    }); 
```

SQL_map.php 的相关部分

```
header("Content-type: text/xml"); 
echo '<?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://earth.google.com/kml/2.1">
        <Document> 

        <Style id="a">
            <IconStyle>
                <Icon>
                           <href>http://maps.google.com/mapfiles/ms/icons/yellow-dot.png</href>
                </Icon>
            </IconStyle>
        </Style>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
// ADD TO XML DOCUMENT NODE
 echo '<Placemark><name>' . parseToXML($row['name']) . '</name><styleUrl>#a</styleUrl><point><coordinates>' . $row['lat'] . ',' . $row['lng'] . '</coordinates></point><description>' . parseToXML($row['name']) . '</description></Placemark>';
 }

  // End XML file
   echo '</Document>
   </kml>'; 
```

我不一定要找人来为我尝试做的事情提供完整的代码，但真正的问题是这种提取数据并将其放置在地图上的方法是否可行。我尝试了其他几种方法，每种方法都有自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:14:05.150

不知道为什么您没有收到或看到错误，这是不正确的：

```
downloadUrl("SQL_map.php", function(data) {
                    var xml = data.responseXML;
                    var kmlxml = new google.maps.KmlLayer(xml);
                    kmlxml.setMap(the_Map); 
```

[KmlLayer](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)需要一个可供 Google 服务器访问的可公开访问的 URL。

根据您的 KML 的复杂性，您可能能够使用[geoxml3](http://code.google.com/p/geoxml3/)，并将其 parseKmlString 方法传递给包含 KML（但不是 responseXML）的字符串。

# c# - 为什么这个单行正则表达式不返回所有匹配项？

> ID：12924682
> 
> 赞同：1
> 
> 时间：2012-10-16T22:54:15.630
> 
> 标签：c#, .net, regex, regex-greedy, non-greedy

我刚刚问了一个[与此类似的问题](https://stackoverflow.com/questions/12923782/why-is-this-regular-expression-returning-only-one-match)，并且有一个出色而准确的答案，但事实证明我现在遇到了一个全新的问题。原来我有*一行相关的输入*。我不确定如何以抽象的方式问这个问题，所以我将直接进入我的输入：

（**已编辑以提供更好的示例**）

> bear999bear888bear777bear666fox---bear222bear333bear444bear555fox

（标记之间的项目不一定是数字）

这是表达式（**EDITED 以匹配更新的输入示例**）：

```
bear.*bear(?<matchString>(.(?!bear.*bear))*?)bear.*fox 
```

它返回**444**。有没有办法可以调整它以返回**444 和 777**？它似乎跳过了第一场比赛，只支持后者。我有*！*排除，使其仅匹配左侧的最里面。

我一直在这里测试： [http ://regexlib.com/RETester.aspx](http://regexlib.com/RETester.aspx)

**当我将它分成两行并打开多行时，这非常有用。为什么当输入在单行时它会停止工作？**

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:48:24.700

这应该有效（它在您在问题中链接的那个正则表达式测试器中有效）：

```
(?<=bear)(?:(?!bear).)*(?=bear(?:(?!bear).)*fox) 
```

它读起来像“让我们匹配前面的东西，里面`bear`没有`bear`序列，后面跟着`bear`- 没有`bear`-`fox`序列”。

这里没有捕获组；整场比赛就是你所需要的。

是的，我不禁想知道为什么要使用单个正则表达式来完成它实际上看起来像是一个标记器的工作。) 例如，您可以`'fox'`先将行拆分，然后将每个部分拆分`'bear'`- 并在每个结果的最后一个之前取一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:07:57.510

你的第一个`.*`是贪婪的。这将起作用：

```
xxx.*?xxx.*?xxx(?<matchString>.*?)xxx.*?yyy 
```

# jquery - Highstock 不适用于日期格式 %d/%m/%Y

> ID：12924685
> 
> 赞同：1
> 
> 时间：2012-10-16T22:54:47.103
> 
> 标签：jquery, date, format, highstock

我对 Highstock 有疑问。好吧，我的数据库格式如下：(%d/%m/%Y)

```
fecha_emision neto
01/02/2012    22300
01/10/2012    17250
02/10/2012    105400
03/10/2012    52700
08/10/2012    322100 
```

我正在使用 highstock，日期是倒退的，结果是这样的：

![这是结果](../Images/d3400433de37dcc451c453c0073221c2.png)

我正在尝试一切，但我不知道如何修复它，我需要更改格式，因为 rangeSelector 带有 inputDateFormat: '%d/%m/%Y' 和 inputEditDateFormat: '%d/%m/%你不工作，有什么办法吗？

这是我的脚本

```
Highcharts.dateFormat('%d/%m/%Y');

});

var chart;

var options = {
                    chart: {
                        renderTo: 'container',
                        defaultSeriesType: 'line',
                        marginRight: 130,
                        marginBottom: 25
                    },

                    rangeSelector: {
                    inputDateFormat: '%d/%m/%Y',
                    inputEditDateFormat: '%d/%m/%Y',
                    enabled : true,
                    inputEnabled:true
                    },

                    navigator : {
                        enabled : true
                    },

                    scrollbar : {
                        enabled : true
                    },

                    title: {
                        text: 'Ventas Realizadas',
                        x: -20 //center
                    },

                    subtitle: {
                        text: 'Diariamente',
                        x: -20
                    },

                    xAxis: {
                        type: 'datetime',
                        //tickInterval: 1 * 24 * 3600000,
                        tickWidth: 0,
                        gridLineWidth: 1,
                        labels: {
                            align: 'center',
                            x: -3,
                            y: 20,

                        }
                    },

                    yAxis: {
                        title: {
                            text: 'Valores Netos Vendidos'
                        },
                        labels: {
                            formatter: function() {
                            return this.value;
                            }
                        },

                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },

                    tooltip: {
                        xDateFormat: '%d/%m/%Y',

                        formatter: function() {
                            return Highcharts.dateFormat('%d/%m/%Y', this.x) +' Vendido<b>'+ Highcharts.numberFormat(this.y, 0)+ '</b>';
                        }
                    },

                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 100,
                        borderWidth: 0
                    },

                    series: [{
                        name: 'Valores Netos'
                    }]

                }

                // Load data asynchronously using jQuery. On success, add the data
                // to the options and initiate the chart.
                // This data is obtained by exporting a GA custom report to TSV.
                // http://api.jquery.com/jQuery.get/
                jQuery.get('clases/data.php', null, function(tsv) {
                    var lines = [];
                    traffic = [];
                    try {
                        // split the data return into lines and parse them
                        tsv = tsv.split(/\n/g);
                        jQuery.each(tsv, function(i, line) {
                            line = line.split(/\t/);
                            date = Date.parse(line[0]);
                            traffic.push([
                                date,
                                parseInt(line[1].replace(',', ''), 10)
                            ]);
                        });
                    } catch (e) {  }
                    options.series[0].data = traffic;
                    chart = new Highcharts.Chart(options);
                }); 
```

这是我的数据库文件“data.php”

```
<?php 

$con = mysql_connect("localhost","root",""); 

if (!$con) {   die('Could not connect: ' . mysql_error()); } 

mysql_select_db("pymesonline", $con); 

$result = mysql_query("SELECT fecha_emision, neto FROM facturas ORDER BY fecha_emision"); 

    while($row = mysql_fetch_array($result)) {
        echo $row['fecha_emision'] . "\t" . $row['neto']. "\n"; } 
    mysql_close($con); 

?>, i appreciate any kind of help. 
```

# c# - MVC C3 继承类的正确格式是什么？

> ID：12924691
> 
> 赞同：0
> 
> 时间：2012-10-16T22:55:29.957
> 
> 标签：c#, oop

我创建了以下类，它描述了用户可能上传的任何类型的文件：

```
namespace MyModels.Models
{
    public class File
    {
        public string FileName { get; set; }
        public string FileTypeId { get; set; }
        public string URLFileName { get; set; } //cleaned for web
        public string Dir { get; set; } //which directory is located in
        public long FileSize { get; set; } //size in bytes
        public DateTime DateAdded { get; set; } //date uploaded
        public int UploadedByUser {get; set;} //UserID of user
        public bool inCloud { get; set; } // moved to cloud
        public bool inGlacier { get; set; } // moved to glaciers
        public DateTime? DateTrashed { get; set; } //date user deleted
        public int TrashedByUser { get; set; } //UserID of user
        public List<FileDescendent> Descendents { get; set; } //List of copies
    }
} 
```

然后我想为图像文件创建一个类。我希望这个类也有文件属性。我这样做吗？

```
namespace MyModels.Models
{
    public class Image : File
    {
        public int OrigHeight { get; set; }
        public int OrigWidth { get; set; }
    }
} 
```

或这个？

```
namespace MyModels.Models
{
    public class Image
    {
        public int OrigHeight { get; set; }
        public int OrigWidth { get; set; }
        public File File { get; set; }
    }
} 
```

请问有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:11:56.177

这是一种[传承](http://en.wikipedia.org/wiki/Inheritance_%28computer_science%29)。在这种情况下，图像**是一个**文件。

```
public class Image : File
{
    public int OrigHeight { get; set; }
    public int OrigWidth { get; set; }
} 
```

这是一篇[作文](http://en.wikipedia.org/wiki/Object_composition)。在这种情况下，图像**有一个**文件。

```
public class Image
{
    public int OrigHeight { get; set; }
    public int OrigWidth { get; set; }
    public File File { get; set; }
} 
```

至于我，图像是一个文件。因此继承在这里更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:00:57.777

我认为区别在于API。您宁愿将 inCloud 查找为`image.inCloud`或`image.File.inCloud`吗？

在大多数情况下，我更喜欢`image.inCloud`. 但是，例如，如果 File 实例化成本很高，则可能首选第二种访问器模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:01:12.833

你的第一个例子是继承，第二个例子不是。

在您的第二个示例中，您还将拥有文件属性，但捆绑在`File`属性中。`FileName`例如，要访问该属性，您将使用`obj.File.FileName`而不是`obj.FileName`继承类时获得的属性。

此外，作为类`File`中的属性`Image`，它不会在您创建`Image`类的实例时自动创建。您还必须创建`File`类的实例并放入实例的`File`属性`Image`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:05:02.480

我会选择继承。它将允许您对两者都使用依赖注入模型。对 MVC3 非常有用的东西。

第二大优势是您可以拥有显示文件列表的共享视图，并且您可以传入这两种类型的集合。更不用说你写的任何 Linq 了。

# java - Java 方法声明

> ID：12924692
> 
> 赞同：-1
> 
> 时间：2012-10-16T22:55:34.080
> 
> 标签：java, methods, integer

我正在尝试为我的程序声明一个方法，该方法只需要一个 5 位整数，并且对于整数的每个数字，从程序中读取一个值并将其打印出来。我知道这不是很清楚，但我无法传达我的意思。我知道这将是某种 for 循环来单独读取整数的每个数字，直到达到 5。类似于 charAt() 字符串方法但适用于数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:02:02.347

阅读“模数”。它是一种原始操作，可通过`%`Java 中的符号获得。

对于除法，它是余数。所以

```
 System.out.println("Last digit: "+(12345 % 10)); 
```

将打印 5。弄清楚自己如何获得其他数字。

作为练习，弄清楚如何打印*二进制数字*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:03:55.613

您可以除以取模。

```
while(n > 0) {
  System.out.println("Digit " + (n % 10));
  n /= 10;
} 
```

如果您使用任何基数，这很好用：您需要做的就是用 10 代替基数（除以基数意味着将所有内容都向左移动，取模意味着得到最后一个数字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:58:10.737

您可以非常轻松地将整数转换为字符串并使用`charAt()`

```
String parseableString = Integer.toString(yourInt);

for (int i = 0; i < parseableString.length(); i++){
    System.out.println(parseableString.charAt(i));
} 
```

# c++ - 在 typedef 结构上使用 sizeof 运算符

> ID：12924694
> 
> 赞同：10
> 
> 时间：2012-10-16T22:55:37.357
> 
> 标签：c++, typedef

这可能太明显了。但是，尽管许多 stackoverflow 线程讨论了这个问题的不同方面，但我找不到具体的答案。

```
typedef struct _tmp {
   unsigned int a;
   unsigned int b;
} tmp;

int main()
{
    int c=10;
    if (c <= sizeof tmp) {
       printf("less\n");
    } else {
       printf("more\n");
    }
    return 0;
} 
```

我将此编为 -

```
g++ -lstdc++ a.cpp 
```

我收到一个错误 -

```
expected primary-expression before ‘)’ token 
```

我想我错过了一些非常明显和直接的东西。但似乎无法确定它：-/

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T22:56:58.740

### 5.3.3 大小[expr.sizeof]

> 1)`sizeof`运算符产生其操作数的对象表示中的字节数。操作数要么是一个表达式，它是一个未计算的操作数（第 5 条），**要么是一个带括号的*type-id*。**（强调我的）

在您的情况下，它是一个*类型 ID*，因此必须用括号括起来。**8.1 类型名称 [dcl.name]**中描述了什么是类型 ID 。

`sizeof tmp`应该是`sizeof (tmp)`。

如在

`if (c <= sizeof tmp)`应该是`if (c <= sizeof (tmp))`。

是的，非常“明显和直接”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-16T22:58:36.163

sizeof 运算符有两种形式：

```
sizeof expression
sizeof(type) 
```

当你给它一个类型时，你需要括号，`sizeof(tmp)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T22:57:26.983

在周围添加括号`tmp`：`sizeof(tmp)`

# c# - 自定义配置部分 - 多个集合

> ID：12924695
> 
> 赞同：1
> 
> 时间：2012-10-16T22:55:49.577
> 
> 标签：c#, .net, web-config, app-config, system.configuration

> **可能重复：**
> [如何创建包含集合集合的配置部分？](https://stackoverflow.com/questions/10958054/how-to-create-a-configuration-section-that-contains-a-collection-of-collections)

我想在 web.config 中创建类似于此自定义部分的内容

```
<MyCustomSection>
     <Collection name="test">
        <item name="foo" />
        <item name="bar">
     </Collection>
     <Collection name="test2">
        <item name="bob" />
        <item name="joe" />
     </Collection>
     ...
</MyCustomSection> 
```

我看过许多教程展示了如何创建一个集合（比如这个：[http](http://dotnetslackers.com/articles/customconfiguration/Custom_Configuration_Collections.aspx) ://dotnetslackers.com/articles/customconfiguration/Custom_Configuration_Collections.aspx ），但没有显示如何创建一个集合的集合。这甚至可能吗？

# java - 不明白为什么我得到一个“字符串索引超出范围：-3”错误 - Java

> ID：12924696
> 
> 赞同：0
> 
> 时间：2012-10-16T22:55:51.507
> 
> 标签：java, string, text, indexing, range

我有一个从文本文件中读取的 Java 程序，我正在尝试将一个变量设置为两个字符串之间的字符串 - 在 "text" : " 和 " , "date 之间。我不断收到错误 'String index out of range ：-3'，我似乎找不到任何其他可以应用于我的代码的解决方案。

```
String filename5 = "C:\\Users\\Steven\\Desktop\\Tests\\wunderground
\\outputTweetsWeatherAlerts.txt";
String filename6 = filename5;

FileInputStream input_file5 = new FileInputStream(filename5);
Scanner input5 = new Scanner(input_file5);
input5.findInLine("\"id\"");
String tweetText1 = input5.next();
int startPosition = tweetText1.indexOf(": \"") + ": \"".length();  
System.out.println("Start Position: " + startPosition);

int endPosition = tweetText1.indexOf("\" , \"date", startPosition);  
System.out.println("endPosition " + endPosition);

String tweetText = tweetText1.substring(startPosition, endPosition); 
// THIS LINE CAUSES ERROR:   String index out of range: -3
System.out.println(tweetText); 
```

我正在阅读的文本文件如下：

{ "_id" : { "$oid" : "507dc77633f77fd20f7eec96"} , "id" : 258307760112955393 , "text" : "一些随机文本" , "date" : { "$date" : ... }

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:38:15.587

查看代码，您可能错误地使用了 Scanner。尝试打印出 tweetText1，它会给你一个空字符串。您可能会做的是保留 FileInputStream，获取文件的内容并通过使用递归 fis.read 并将 char 添加到 StringBuilder 中（例如）然后使用 @DNA 的代码。

或者我能想到的最好的替代方法是使用`input5.nextLine()`而不是`input5.next()`，因为数据只在一行中，这将起到作用。如果是多行，那也行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:13:18.390

以下对我有用（或至少不会引发错误），这表明`findInLine()`（您没有向我们展示）没有返回您认为应该返回的内容。

正如菲利普怀特豪斯在评论中所建议的那样，也许您的文本行实际上分为两行？

您需要在每个步骤中打印出结果以查看出了什么问题，或者使用调试器检查变量。

```
 String tweetText1 = "{ \"_id\" : { \"$oid\" : \"507dc77633f77fd20f7eec96\"} , \"id\" : 258307760112955393 , \"text\" : \"Some random text\" , \"date\" : { \"$date\" : ... }";
    int startPosition = tweetText1.indexOf(": \"") + ": \"".length();
    System.out.println(startPosition);
    int endPosition = tweetText1.indexOf("\" , \"date", startPosition);
    System.out.println(endPosition);

    String tweetText = tweetText1.substring(startPosition, endPosition);
    // THIS LINE CAUSES ERROR: String index out of range: -3
    System.out.println(tweetText); 
```

这输出：

```
start
22
105
507dc77633f77fd20f7eec96"} , "id" : 258307760112955393 , "text" : "Some random text 
```

# r - R中的并行处理受限

> ID：12924698
> 
> 赞同：8
> 
> 时间：2012-10-16T22:56:12.980
> 
> 标签：r, ubuntu, parallel-processing

我正在使用并行和 doParallel 包运行 ubuntu 12.04 和 R 2.15.1。当我并行运行任何东西时，我被限制为 100% 的内核，而我应该有高达 800% 的内核，因为我使用 8 个内核运行它。系统监视器上显示的是每个子进程只得到 12%。

发生了什么限制了我的执行速度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T00:15:37.257

问题可能在于 R 进程仅限于一个核心（并且子进程继承该核心）。

尝试这个：

```
> system(sprintf("taskset -p 0xffffffff %d", Sys.getpid()))
pid 3064's current affinity mask: fff
pid 3064's new affinity mask: fff 
```

现在，如果在您的机器上，当前的关联掩码报告为 1，那么这就是问题所在。上面的行应该解决它（即第二行应该报告 fff （或类似的）。

Simon Urbanek 编写了一个函数`mcaffinity`，允许对多核进行这种控制。据我所知，它仍处于 R-devel 中。

有关详细信息，请参见例如[关于 R-sig-hpc 的讨论](https://stat.ethz.ch/pipermail/r-sig-hpc/2012-April/001357.html)。

更新，除了新郭的回答：

如果您通过 openblas 使用隐式并行化和显式并行化（通过并行/雪/多核）一起使用，您可能需要根据您是否在显式并行部分内来更改 openblas 使用的线程数。
这是可能的（在 Linux 下使用 openblas，我不知道任何其他通常优化的 BLAS' 提供线程数的函数），有关详细信息，请参阅[Simon Fuller 的博客文章](https://hyperspec.wordpress.com/2012/07/26/altering-openblas-threads/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T00:15:00.033

由于`libblas.so(.3gf)`包裹，我遇到了同样的问题，我不知道这是否也会导致您的问题。启动时`R`，它会调用`BLAS`安装在您系统中的系统来进行线性代数计算。我有`libopenblas.so(.3gf)`并且它使用“CPU Affinity”选项进行了高度优化，也就是说，当你进行数值向量或矩阵计算时，openblas 包将只创建 8 个线程，并使每个线程都粘在一个指定的固定线程上CPU来加速代码。然而，通过设置这个，你的系统会被告知所有的 CPU 都非常繁忙，因此如果有更多的并行任务到来，系统会尝试将它们挤到一个 CPU 中，以尽量不干扰繁忙的 CPU。

所以这是我的解决方案：我下载了一个 openblas 包源并使用文件“ `Makefile.rule`”进行了编译：有一行“ `#NO_AFFINITY = 1`”，我刚刚删除了“ `#`”，因此编译后，没有选择关联选项。然后我安装了这个包，问题就解决了。

有关此参考，请参阅[https://github.com/ipython/ipython/issues/840](https://github.com/ipython/ipython/issues/840)

请注意，这是一种权衡。去掉 CPU 亲和性会让你在进行数值计算时失去一些效率，这就是为什么尽管 openblas 维护者（张先义博士）知道这个问题，但他仍然将 cpu 亲和性作为默认选项发布代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:15:39.170

我的猜测是你可能有错误的代码。我想发布一个从在线[http://www.r-bloggers.com/parallel-r-loops-for-windows-and-linux/](http://www.r-bloggers.com/parallel-r-loops-for-windows-and-linux/)复制的示例：

```
library(doMC)
registerDoMC()
x<- iris[which(iris[,5]!='setosa'),c(1,5)]
trials<- 10000
r<- foreach(icount(trials), .combine=cbind) %dopar% {
    ind<- sample(100,100,replace=T)
    result1<- glm(x[ind,2]~x[ind,1],family=binomial(logit))
    coefficients(result1)
} 
```

您可以定义要并行使用的内核数量：

```
options(cores=4) 
```

# java - Java 变量初始化

> ID：12924700
> 
> 赞同：1
> 
> 时间：2012-10-16T22:56:24.670
> 
> 标签：java

这是我写的一段代码。

```
public class cube { 
   private int length;
   private int breadth;
   private int height;
   private int volume;
   private int density;
   private int weight;
   public cube(int l,int b,int h, int d)  {
      length=l;
      breadth=b;
      height=h;
      density=d;
   }

   public void volmeShow(){
      volume = length * breadth * height;
      System.out.println("The Volume of the cube is "+this.volume);
   }
} 
```

所以如果我像这样实现上面的立方体类，

```
public class cubeApp {
    public static void main(String[] args){
       cube mycube = new cube(5,6,9,2);
       mycube.volumeShow();
    }
} 
```

我得到一个输出，告诉我音量是 270。

但我得到一个输出，说音量为 0。另一方面，如果我这样定义音量变量：

```
public class cube { 
    private int length;
    private int breadth;
    private int height;
    private int volume=length*breadth*height;
    private int density;
    private int weight;
    public cube(int l,int b,int h, int d)  {
        length=l;
        breadth=b;
        height=h;
        density=d;
    }

    public void volmeShow(){
        System.out.println("The Volume of the cube is " + this.volume);
    }
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:58:24.867

因为`length`,`breadth`并`height`在执行该语句时没有被分配任何值。您最好在构造函数中执行该计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T22:58:59.050

唯一的问题是您的`volume`变量仅在对象构造发生之前定义。其余属性默认设置为 0，因此生成的卷为 0。您可以将构造函数修改为：

```
public cube(int l,int b,int h, int d)  {
    length=l;
    breadth=b;
    height=h;
    density=d;
    volume=length*breadth*height;
} 
```

这样体积将被正确计算。旁注，您应该使用 Cube 作为类名，请参阅[Java 的代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T22:58:44.597

since`private int volume=length*breadth*height;`在类初始化时执行，所有涉及的字段为 0。

您可以将构造函数修改为：

```
public cube(int l,int b,int h, int d)  {
    length=l;
    breadth=b;
    height=h;
    density=d;
    volume=length*breadth*height;
} 
```

这样体积将被正确计算。旁注，您应该使用 Cube 作为类名，请参阅[Java 的代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T23:02:00.460

当一个类被初始化时，所有成员字段都被初始化为默认值（对于`int`（和一般的数字）为 0）。

基本上

```
private int length;
private int breadth;
private int height;
private int density;
private int weight;
private int volume=length*breadth*height; 
```

评估为

```
private int length = 0;
private int breadth = 0;
private int height = 0;
private int density = 0;
private int weight = 0;
private int volume=length*breadth*height; 
```

评估为

```
private int volume=0*0*0; 
```

然后您不再更新音量值。

你实际上会更好...

```
public cube(int l,int b,int h, int d)  {
    length=l;
    breadth=b;
    height=h;
    density=d;
    volume=length*breadth*height;
} 
```

...实际上，您可以完全取消`length`,`breadth`和values （从您的示例中） `height`，`density`因为它们不会为您的课程添加任何内容...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T22:58:59.797

在其他变量中设置值后，您需要计算和分配体积 -

```
public cube(int l,int b,int h, int d)  { 
    length=l; 
    breadth=b; 
    height=h; 
    density=d; 
    volume=length*breadth*height;
} 
```

但是，音量看起来在你的课堂上是多余的。您可以删除它，您的方法可以随时计算它 -

```
public void volmeShow(){     
     int volume=length*breadth*height; //local, not needed at class level
     System.out.println("The Volume of the cube is " + volume); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T22:58:38.660

你不能像这样定义 var 。

当您在方法之外定义它时 - 这将在创建类时计算。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T23:01:41.560

属性由构造函数按照声明的顺序在构造函数主体之前但在调用 super() 之后进行初始化。

在初始化卷时，在您的情况下，所有成员都设置为零，这是 int 的默认值。

你必须写：

```
public cube(int l,int b,int h, int d)  {
    length  = l;
    breadth = b;
    height  = h;
    density = d;
    volume  = length*breadth*height;
} 
```

# javascript - JQuery $.extend 可以与索引一起使用吗？

> ID：12924706
> 
> 赞同：0
> 
> 时间：2012-10-16T22:56:56.363
> 
> 标签：javascript, jquery, object, coffeescript, extend

我正在尝试扩展以下结构的对象（在 Coffeescript 中使用 JQuery）：

```
objectThatIsAList = {
  'List Item'      : 
    callback       :=>
      return "Some value"
  'Another item'   :
    callback       :=>
      return "Another value"
  'The final item' :
    callback       :=>
      no
} 
```

此对象用作大型基于咖啡脚本的框架中的下拉菜单的（动态）模型。

我正在扩展它

```
objectThatIsAList = $.extend {}, objectThatIsAList,  {
  'New Item' :
    callback :=>
      return "New stuff"
} 
```

这会产生这样的对象（添加注释以显示预期结果）

```
objectThatIsAList = {
  'List Item'      : 
    callback       :=>
      return "Some value"
  'Another item'   :
    callback       :=>
      return "Another value"

  # this should be last
  'The final item' :
    callback       :=>
      no

  # this should not be last
  'New Item'       :
    callback       :=>
      return "New stuff"
} 
```

显然，对象得到了正确扩展，但是属性的顺序与构建列表的目的相关。**我更希望`'Final Item'`作为扩展对象的第四个而不是第三个属性**。

但我的研究并未显示对该`$.extend`方法的索引支持。是否有人成功实现了这样的功能和/或有提示如何将对象属性“插入”到某个位置的另一个对象中？

还是有一种聪明的方法可以在`$.extend`?

不一定非得是 Coffee，即使是 JS 或 Pseudocode 也会有很大帮助。

**编辑：**

这是我提出的解决方案，它扩展了遗留代码以获取数组并将它们转换为对象（在整个框架中被广泛使用，并且更改原始代码会破坏很多工作代码）：

```
# this comparison yields a data object that is passed to a method rendering a menu
if o.menu instanceof Array
  menuArrayToObj = {}
  for menuObject in o.menu
    for menuObjectProperty,menuObjectValue of menuObject
      menuArrayToObj[menuObjectProperty]=menuObjectValue if menuObjectProperty? and menuObjectValue?
  o.menu = menuArrayToObj
else o.menu 
```

有了这个，它可以被提供一个对象或一个数组。后者很容易通过接头插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:02:01.733

Javascript 对象*根据定义是无序的*。

如果你想保持一个顺序，你需要一个`Array`代替。

一个很好的例子是 jQueryUI 对话框对象。尽管可以`Object`按照您对`buttons`选项的方式使用 an ，但如果您要求各个按钮按特定顺序排列，则必须提供对象*数组*。

使用此模型，您的对象将如下所示：

```
arrayThatIsAList = [
  { title: 'List Item', callback: ... },
  { title: 'Another Item', callback: ... },
  { title: 'New Item', callback: ... },
  { title: 'The final item', callback: ... }
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:25:24.313

`$.extend()`用于将 2 个或多个对象合并为一个。**它不管理订单**。

如果你想对数据进行排序，你应该使用一个对象数组（它允许你用它的索引来操作数据）并使用一个自定义排序函数来比较你的对象标题：

```
yourArray.sort(sortfunction);

function sortfunction(yourObjectA, yourObjectB){
    //Compare yourObjectA and yourObjectB, and return -1, 0, or 1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:10:45.443

将具有第一个属性的对象作为调用的第一个参数`$.extend`：

```
objectThatIsAList = $.extend { 
  'New Item' : 
    callback :=> 
      return "New stuff" 
}, objectThatIsAList 
```

*“不！”* ，你喊道，*“ECMAScript 规范明确地未定义属性枚举排序！”*

是的，没错。有效点。 **但是，**所有现代 ECMAScript 实现都按照定义的顺序枚举属性。它成为事实上的标准。在这里试试：[jsfiddle.net/TqfNE](http://jsfiddle.net/TqfNE/)。我怀疑任何人都可以找到按定义顺序以外的顺序列出属性的浏览器。

因此，不能保证符合规范，但出于所有实际目的，它可以始终如一地工作。

但是请注意，如果您开始使用整数作为属性名称，您*将*在浏览器之间得到不一致的结果。

# android - 消息处理程序和弱引用问题

> ID：12924712
> 
> 赞同：1
> 
> 时间：2012-10-16T22:57:33.400
> 
> 标签：android, memory-leaks, android-handler

以下消息处理程序可以正常接收来自我的服务的消息...

```
private  Handler handler = new Handler() 
{

    public void handleMessage(Message message) 
    {
        Object path = message.obj;

        if (message.arg1 == 5 && path != null)  //5 means its a single mapleg to plot on the map
        {
            String myString = (String) message.obj;
            Gson gson = new Gson();
            MapPlot mapleg = gson.fromJson(myString, MapPlot.class);
            myMapView.getOverlays().add(new DirectionPathOverlay(mapleg.fromPoint, mapleg.toPoint));
            mc.animateTo(mapleg.toPoint);

        }
        else
        {
            if (message.arg1 == RESULT_OK && path != null) 
            {
                Toast.makeText(PSActivity.this, "Service Started" + path.toString(), Toast.LENGTH_LONG).show();
            } 
            else 
            {
                Toast.makeText(PSActivity.this,"Service error" + String.valueOf(message.arg1),  Toast.LENGTH_LONG).show();          

            }

        }
    };
}; 
```

然而，即使它在 AVD 中测试正常（我通过 DDMS 向它提供了一个大的 KML 文件）“对象路径 = message.obj;” 行有一个警告说“这个处理程序类应该是静态的，否则可能会发生泄漏”。

但是如果我说“static Handler handler = new Handler()”，它不会编译并抱怨我“不能对非静态字段 myMapView 进行静态引用。如果我不能进行这样的引用，我就做不到任何有用的东西。

这让我在这个问题上花了几个小时在谷歌上搜索，并且比我想知道的更多地了解弱引用。我发现经常发现的建议是我应该更换......

```
private Handler handler = new Handler() 
```

和

```
 static class handler extends Handler
{
    private final WeakReference<PSActivity> mTarget;
    handler(PSActivity target)
    {
        mTarget = new WeakReference<PSActivity>(target);
    } 
```

但这不会编译仍然抱怨我无法对非 dtatic 字段进行静态引用。所以，我一周或之前的问题是“我怎样才能为 android 编写一个消息处理程序，以便我的服务可以将数据发送到我的活动。即使我有工作代码，问题仍然与后缀“不泄漏内存”有关。谢谢，加里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:06:31.287

当我尝试在服务中使用处理程序时，我收到了相同的警告消息，并最终通过从[这个线程](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)中获取建议来解决它，请参阅我项目中的代码片段。

```
public class MyService extends Service {
    ...
    private MyHandler mHandler;

    public static class MyHandler extends Handler {
        private final WeakReference<MyService> mService;

        MyHandler(MyService service) {
            mService = new WeakReference<MyService>(service);
        }

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            MyService service = mService.get();
            if (service!=null) {
                if (msg.what==MSG_RESUME_CHECKING) {
                    service.pause();
                } else if (msg.what==MSG_PAUSE_CHECKING) {
                    service.resume();
                }
            }
        }
    }
    ...

    @Override
    public void onCreate() {
        super.onCreate();
        ...
        mHandler = new MyHandler(this);
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T03:46:39.183

我知道我参加聚会有点晚了，但希望这有助于进一步回答未来询问者的问题。

正如您通过谷歌搜索发现的那样（我自己做了很多事情来解决类似的问题），您需要将 Handler 实例转换为静态内部类（嵌套类），该类在其构造函数中采用目标 Activity。然后它将这个 Activity 引用转换为 WeakReference，这就是可以用来与目标 Activity 中的事物交互的东西。在你的情况下：

```
Toast.makeText(mTarget.get().this, "Service Started" + path.toString(), Toast.LENGTH_LONG).show(); 
```

由于您要更改为嵌套类，因此您还需要创建该类的实例，以便您的 Thread 在其 run() 方法中访问。有关这方面的更多帮助（以及如何确保您的应用即使在配置更改后也能正常工作），请参阅[此问题](https://stackoverflow.com/questions/18221593/android-handler-changing-weakreference)。

希望这可以帮助！

# java - 使用 CORBA - org.omg.CORBA.BAD_PARAM 连接客户端（在 VirtualBox 上）和服务器（在 localhost 上）：

> ID：12924713
> 
> 赞同：1
> 
> 时间：2012-10-16T22:57:40.290
> 
> 标签：java, c++, virtualbox, corba

我现在正在研究 Java/C++ 和 CORBA 中的简单 gui 应用程序。我希望 VirtualBox 上的客户端连接到本地主机上的服务器。当我有一个简单的应用程序时，比如我之前写过的一个 calc 就很好了。但是当涉及到运行需要一些 args 巫婆 javas`-cp`选项的客户端时，我遇到了错误。**（当我在 localhost 上同时拥有客户端和服务器时，就没有这样的问题！）**我在 VirtualBox 上使用 Win XP，在 localhost 上使用 Ubuntu。

我的错误：

```
WARNING: "IOP00100007: (BAD_PARAM) string_to_object conversion failed due to bad
 scheme name"
org.omg.CORBA.BAD_PARAM:   vmcid: OMG  minor code: 7  completed: No
        at com.sun.corba.se.impl.logging.OMGSystemException.soBadSchemeName(Unkn
own Source)
        at com.sun.corba.se.impl.logging.OMGSystemException.soBadSchemeName(Unkn
own Source)
        at com.sun.corba.se.impl.resolver.INSURLOperationImpl.operate(Unknown So
urce)
        at com.sun.corba.se.impl.resolver.ORBInitRefResolverImpl.resolve(Unknown
 Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(Unknown
Source)
        at ClientConnection.connect(ClientConnection.java:57)
        at Client.main(Client.java:295)

Exception in thread "main" org.omg.CORBA.BAD_PARAM:   vmcid: OMG  minor code: 7
 completed: No
        at com.sun.corba.se.impl.logging.OMGSystemException.soBadSchemeName(Unkn
own Source)
        at com.sun.corba.se.impl.logging.OMGSystemException.soBadSchemeName(Unkn
own Source)
        at com.sun.corba.se.impl.resolver.INSURLOperationImpl.operate(Unknown So
urce)
        at com.sun.corba.se.impl.resolver.ORBInitRefResolverImpl.resolve(Unknown
 Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(Unknown
Source)
        at ClientConnection.connect(ClientConnection.java:57)
        at Client.main(Client.java:295)
make[1]: *** [run] Error 1 
```

ClientConnection.java:57 是一行`objRef = clientORB.resolve_initial_references("NameService");` Client.java:295 是一行： `ClientConnection.connect(args);`

`connect`方法只是一个普通的客户端连接 corba 代码。

我跑了我的例子：

1） `C:\Temp\Client>java -cp .:../Dir1:../Dir2 Client -ORBInitRef NameService =corbaloc::192.168.56.1:2809/NameService Error: Could not find or load main class Client`所以它甚至根本没有运行..

2) 在 Makefile 的帮助下：

```
HOST = 192.168.56.1
PORT = 2809
NAMESERVICE = NameService

run:
    java -cp .:../Dir1:../Dir2 Client -ORBInitRef NameService=corbaloc::$(HOST):$(PORT)/$(NAMESERVICE) 
```

通过键入`make run`然后我得到了我之前发布的那些错误。怎么了？我的意思是，一个简单的代码可以正常工作，但 gui 版本不想......`-cp`选项有问题吗？我无法更改我的应用程序的目录树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:28:36.837

我个人认为你有两个问题。

1.  类路径的事情。`Client.class`你有一个名为`.`or`Dir1`或`Dir2`. 如果没有，请查找它并将其添加到类路径中。如果在，请提供更多信息

2.  CORBA 的东西；我想看看你的`Orb.init();`电话。其他一切看起来都不错。

# iframe - 为 iframe 页面创建上一个下一个按钮

> ID：12924715
> 
> 赞同：2
> 
> 时间：2012-10-16T22:57:51.357
> 
> 标签：iframe

这个主题可能有很多代码，但我似乎正在寻找一种不基于历史的变体，是否有可能......

所以我有这个代码......

```
<script type="text/javascript">
var pages=new Array();

pages[0]="listItem1.html";
pages[1]="listItem2.html";
pages[2]="listItem3.html";
pages[3]="listItem4.html";
pages[4]="listItem5.html";

var i=0;
var end=pages.length;
end--;
function changeSrc(operation) {
if (operation=="next") {
if (i==end) {
  document.getElementById('the_iframe').src=pages[end];
  i=0;}
else {
  document.getElementById('the_iframe').src=pages[i];
  i++;}}
if (operation=="back") {
if (i==0) {
  document.getElementById('the_iframe').src=pages[0];
  i=end;}
else {
  document.getElementById('the_iframe').src=pages[i];
  i--;}}}
</script>
</head>

<body>

<ul id="menu" role="group">

<li><a href="listItem1.html" target="ifrm" role="treeitem">Welcome</a>
  <ul>
    <li><a href="listItem2.html" target="ifrm" role="treeitem">Ease of Access Center</a></li>
  </ul>
</li>    

<li><a href="listItem3.html" target="ifrm">Getting Started</a>
  <ul>      
    <li><a href="listItem4.html" target="ifrm">Considerations</a></li>
    <li><a href="listItem5.html" target="ifrm">Changing Perspective</a></li>
  </ul>
</li>
</ul>

<iframe id="the_iframe" scrolling="no" src="listItem1.htm" name="ifrm" style="width:540px;></iframe>

<input type="button" onClick="changeSrc('back');" value="Back" />
<input type="button" onClick="changeSrc('next');" value="Next" /> 
```

如果我点击下一个或上一个按钮，它确实会移动到某个地方，**但是**......

假设我的 iframe 显示 listItem2，然后我单击菜单中的 listItem4（涉及树形菜单），然后我想转到 listItem3，然后我点击后退按钮...而不是转到 listItem3，它转到listItem2 （或不是从 4 到 3 的页面的某个地方）。

按钮似乎是根据历史记录导航的？...但我只想直接向前或向后移动...我不希望我的按钮具有这种浏览器类型的功能...如果我在 listItem4然后点击下一个按钮，我希望它转到 listItem5。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:30:26.450

我不明白你的代码在这里：

document.getElementById('the_iframe').src=pages[i]; 我++；

如果要前进到下一个元素并显示它，则需要先增加**i**。不过，也许我只是错过了一些东西。

我认为您的问题是，如果用户单击您的直接链接之一，而不是代码中的“下一个”和“上一个” **i**没有得到更新。因此，如果您在第 2 页并单击 4 的链接，然后单击返回，则**我**当前是 2 而不是 4。希望对您有所帮助。如果有，请务必将其标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:29:13.310

向每个链接标签添加一个点击事件，该事件将调用单个函数，就像您在输入标签中一样。让函数输入某个数字并将该数字分配给 i。那应该这样做。抱歉，我无法显示任何源代码，JAVASCRIPT 不是我的语言。我可以阅读它，但我不敢从头开始编写代码。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:26:51.307

好的，我会尝试代码，但如果它关闭，请不要对其进行降级。

这是您可以放在 changeSrc 函数之前的函数：

*函数更新I（**值**）{i = 值}*

这是您将添加到 a 标签中的链接的一键式事件。当然，在这种情况下发送函数的 4 将更改为适合引用的任何 ListItem 的任何内容：

*onClick =“更新I（4）”*

这对你有帮助吗？

# security - 内容安全策略的 connect-src 指令是否允许您进行跨域请求？

> ID：12924717
> 
> 赞同：10
> 
> 时间：2012-10-16T22:57:56.403
> 
> 标签：security, browser-security, content-security-policy

在您的内容安全策略中指定`connect-src`指令是否会放宽浏览器的同源策略并允许您进行跨源 XHR 请求？还是该指令仅用于限制已经合法的 XHR（即同源呼叫或 CORS 启用的呼叫）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T14:06:58.630

该`connect-src`指令没有放宽同源政策；它只是指定您可以连接的源列表，假设浏览器已经允许您连接到它们（例如通过 CORS）。

通常，内容安全策略是一个注释，您作为作者可以用来限制页面的功能。它不授予新的权限，而只是删除它们。

# ruby-on-rails - Ruby on Rails bundle exec rake assets:precompile error - no such file to load -- gelf

> ID：12924732
> 
> 赞同：0
> 
> 时间：2012-10-16T22:58:58.313
> 
> 标签：ruby-on-rails, rake, bundler, assets

当我运行 RAILS_ENV=production bundle exec rake assets:precompile 我得到：

```
Rake aborted!
no such file to load -- gelf

Tasks: TOP => environment
(See full trace by running task with --trace)
rake aborted! 
```

如果我使用 --trace 运行它，我会得到：

```
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
rake aborted!
no such file to load -- gelf
/Users/gareth/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/Users/gareth/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/Users/gareth/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/gareth/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/Users/gareth/enghance/config/initializers/graylog.rb:1:in `<top (required)>' 
```

我还没有找到任何解决方案，或者有同样错误的问题，所以我认为这可能是一些基本的问题。

有没有人遇到过同样的问题并解决了或者知道出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:11:28.573

您在 gemfile 中缺少 gelf gem，导致错误：

```
no such file to load -- gelf 
```

只需将以下行添加到您的 gemfile 中：

```
gem 'gelf' 
```

并`bundle install`从您的应用程序的根目录运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T22:35:40.550

我意识到这个回复太晚了，但是如果有人遇到这个问题，我想我会分享我是如何解决它的——一旦你解决了它就很容易了（在我的情况下需要几个小时:( ). 我决定在 EC-2 上部署我的 rails 应用程序，并且正在遵循橡胶 + rails + EC2 教程，但我无法让它工作。我恢复到早期的 git 检查点，认为它会摆脱我系统上所有来自橡胶的东西 - 但它没有。每次我尝试运行“rails server”时，我都会收到一个与橡胶有关的错误，其中第一个是你上面提到的那个：
`in require': cannot load such file -- gelf (LoadError)`

删除以下文件后，一切恢复正常：

`config/rubber`

`config/initializers/graylog.rb`

以防万一它帮助其他人。

# osgi - OSGi 包更新不会停止/卸载旧包，为什么？

> ID：12924734
> 
> 赞同：1
> 
> 时间：2012-10-16T22:58:59.343
> 
> 标签：osgi, bundle, auto-update

我正在实现一个包含三个包的 GUI（摆动）应用程序，比如说 bundleA、bundleB 和 bundleC。我使用 BundleContext.installBundle(String location) 方法将所有这三个包安装在/使用单独的安装包中。

当我使用另一个名为“UpgradeBundle”的包来更新三个已安装的包之一时，问题就开始了。更准确地说，我调用 BundleC.update(null) 方法，然后调用 FrameworkWiring.refreshBundles(BundlesForRefresh, null) 方法，因为我读到包更新需要调用 FrameworkWiring.refreshBundles。然而，对 FrameworkWiring.refreshBundles 的调用会导致启动一个带有更新包的新 GUI 应用程序（而不是在已经运行的应用程序实例中更新它），而已经运行的应用程序继续使用旧包运行。知道为什么会这样吗？

如果您需要对该问题进行更多详细说明，请告诉我，我将尝试进一步解释该问题。

PS 我正在使用 Equinox OSGi 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:13:15.640

刷新将停止所有引用任何先前版本的更新包的包。我猜你的应用程序在调用 stop 方法时没有正确关闭现有实例。start 方法然后创建一个新方法。

为了防止应用程序在更新时不关闭，您必须仔细设计您的系统，以确保您的应用程序没有类加载器引用到更新的包。专注于接口的服务是实现这一目标的绝佳方式。但是，最终会有很多情况下，您的应用程序也需要关闭以刷新其引用。

# twitter-bootstrap - 在 Twitter Bootstrap 中实现侧边栏导航（与演示相同）

> ID：12924738
> 
> 赞同：2
> 
> 时间：2012-10-16T22:59:06.483
> 
> 标签：twitter-bootstrap

在此页面中：http: [//twitter.github.com/bootstrap/components.html](http://twitter.github.com/bootstrap/components.html)，侧边栏导航向上滚动，然后与页面顶部保持固定距离。

使用 CSS， position: fixed 始终保持与顶部的恒定距离。

我无法弄清楚 Twitter 引导程序是如何做到这一点的。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:04:34.443

我希望这部分 twtter bootstrap 对你有帮助[http://twitter.github.com/bootstrap/javascript.html#affix](http://twitter.github.com/bootstrap/javascript.html#affix)

# c# - 使用 VisualStudio 的图标

> ID：12924739
> 
> 赞同：1
> 
> 时间：2012-10-16T22:59:18.283
> 
> 标签：c#, visual-studio, mef, intellisense

我正在编写一个 IntelliSense 实现，并试图访问 VisualStudio 的图标集。我了解您打算使用 MEF，并且应该以某种方式自动填充您导入的属性/字段。目前我有：

```
[Import]
public IGlyphService GlyphService { get; set; } 
```

GlyphService 始终为空。我错过了什么？

*   [Msdn 参考 IGlyphService](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.language.intellisense.iglyphservice.aspx)
*   [Msdn 参考 Babel 图标](http://msdn.microsoft.com/en-us/library/bb166402%28v=VS.90%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:24:15.087

显然，您确实必须手动填充和组合一个 CompositionContainer。我的解决方案如下所示：

```
// An aggregate catalog that combines multiple catalogs
var catalog = new AggregateCatalog();

// Adds all the parts found in the necessary assemblies
catalog.Catalogs.Add(new AssemblyCatalog(typeof(IGlyphService).Assembly));
catalog.Catalogs.Add(new AssemblyCatalog(typeof(SmartTagSurface).Assembly));

// Create the CompositionContainer with the parts in the catalog
CompositionContainer mefContainer = new CompositionContainer(catalog);

// Fill the imports of this object
mefContainer.ComposeParts(this); 
```

运行此之后，当前对象（或您在撰写部分中选择的对象）将填充它的 Imports。我遇到了几个问题，包括需要在程序的 bin 文件夹中包含引用的 dll。

# c - 我的指针和动态分配的实现是否正确？

> ID：12924741
> 
> 赞同：0
> 
> 时间：2012-10-16T22:59:24.480
> 
> 标签：c, pointers, matrix

我正在研究 C/C++ 中的指针，作为我学习这个问题的小项目，我正在尝试开发一个简单的应用程序来使用矩阵进行操作。我想问一下我使用指针和动态分配的这种方式是正确的还是我弄错了。谢谢 ：）

```
#include <stdlib.h>
#include <stdio.h>

int numberRows;
int numberCollumns;
void getSize()
{
   printf("Write down size of matrix in format Rows Collumns: ");
   scanf("%i %i", &numberRows, &numberCollumns);
}

void getMatrix(int *m[])
{
   int x = 0;
   int y = 0;
   while(x<numberRows)
   {
      while(y<numberCollumns)
      {
      scanf("%i", &m[x][y]);
      y++;        
      }
   x++;
   y = 0;
   }
}

void writeMatrix(int *m[])
{
   int x = 0;
   int y = 0;
   while(x<numberRows)
   {
      while(y<numberCollumns)
      {
      printf("%i ", m[x][y]);
      y++;        
      }
   printf("\n");
   x++;
   y = 0;
   }
}

int main()
{
   getSize();
   int **matrix;
   matrix = (int**)malloc(numberRows*sizeof(int*));
   int x = 0;
   while(x < numberCollumns)
   {
      matrix[x] = (int*)malloc(numberCollumns*sizeof(int));
      x++;
   }
   getMatrix(matrix);
   printf("\n\nMatrix: \n");
   writeMatrix(matrix);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:09:07.863

我发现了一个问题：

```
while(x < numberCollumns)
{
   matrix[x] = (int*)malloc(numberCollumns*sizeof(int));
   x++;
} 
```

你的循环条件是错误的。如果行数和列数不匹配怎么办？此外，我没有看到对`free`.

至于代码风格，你的 while 循环会比 for 循环更好看：

```
for(int x = 0; x < numberRows; ++x)
{
    matrix[x] = (int*)malloc(numberCollumns*sizeof(int));
} 
```

**边注**

代码是纯 C 的（除了从 的返回的转换`malloc`）。C++ 代码看起来会大不相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:16:28.047

看起来没问题，除了 Jesse Good 指出你的构造应该循环`numberRows`，而不是`numberCollumns`（*PS* 'column' 中只有一个 L）。

我认为您对变量名的选择有误导性。您的矩阵布局为`matrix[rows][columns]`，但您使用 对其进行索引`[x][y]`。传统上，`x`是水平索引并且`y`是垂直的。使用`x`来选择行（这是一个垂直维度）有一天会让你感到困惑。要么颠倒这些用法，要么做数学家所做的事情（使用`i`and `j`）。

关于 2D 矩阵本身，出于缓存局部性和效率的原因，我会避免对每一行进行单独分配。前几天我回答了一个问题并对此提出了一些想法： [使用指针而不是数组](https://stackoverflow.com/questions/12888845/using-pointers-instead-of-an-array/12888976#12888976)

`for`最后，这只是一般风格的东西......当你只是迭代你的行/列时，为什么不使用循环。它更容易阅读，而且更不容易发生意外（“哎呀，我忘了重置和/或增加我的计数器”）。

哦，是的，如果这是纯 C，请不要转换`malloc`调用的结果。

# matlab - 使用枚举的性能问题

> ID：12924742
> 
> 赞同：3
> 
> 时间：2012-10-16T22:59:33.670
> 
> 标签：matlab, enums

我在 MATLAB 中有一个 for 循环（我知道，我知道 - 我应该使用向量化，但在这种特殊情况下，循环才有意义）它用一个值替换向量的某些元素。此向量是自定义枚举数据类型。与具有内置数据类型的类似方法相比，替换非常慢（请参见下面的简单测试结果）。我预计会有一些差异，但三个数量级似乎很高。*这是一个已知问题吗？*

要重新创建问题，请创建以下枚举：

```
类定义 MyEnum

    枚举
        真的
        错误的
        不定
    结尾

结尾

```

初始化一个向量并在循环中进行一些替换：

```
>> v = repmat(MyEnum.TRUE, 100000, 1);
>> 抽动; 对于 ii = 1：长度（v）；v(ii) = MyEnum.FALSE; 结尾; 目录；
经过的时间是 0.824617 秒。

```

将此与使用内置类型的类似方法进行比较：

```
>> v = true(100000, 1);
>> 抽动; 对于 ii = 1：长度（v）；v(ii) = 假；结尾; 目录；
经过的时间是 0.000950 秒。

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:09:22.223

您在每次迭代中添加一个方法调用，这通常是一个缓慢的操作。此外，Matlab 中的 OOP 效率特别低，如此[处](https://stackoverflow.com/questions/1693429/is-matlab-oop-slow-or-am-i-doing-something-wrong)所述。阅读 SO 问题，有一些有趣的细节，包括在较新的 Matlab 版本中讨论性能加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:41:13.670

In my experience, it's likely to be the `MyEnum.FALSE` piece that's slow. Whenever I've needed to do anything similar, I extract the enum value first, i.e.

```
falseVal = MyEnum.FALSE; for ii = 1:N, v(ii) = falseVal; end 
```

That might help at least in part.

# python - 在 Python 中向 lambda 添加方法

> ID：12924745
> 
> 赞同：0
> 
> 时间：2012-10-16T22:59:53.577
> 
> 标签：python, lambda

我想在 python 中做这样的事情：

```
(lambda: ... some code ...).valueHandling(...some parameters) 
```

也就是说，我想`function`使用一个名为`valueHandling`. 我尝试了不同的东西，例如：

1)

```
def valueHandling(self):
  ...

function.valueHandling=valueHandling 
```

2)

```
function.__class__.__dict__['valueHandling']=valueHandling 
```

3）等

没有工作......有没有办法做到这一点？要添加一种方法以使所有“lambdas”都可以响应该方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:17:21.867

您可以设置单个（函数/lambda/etc..）对象的属性：

```
l = lambda x: x*2
def fun():
  return 1
l.f = fun
l.f()
1 
```

您不能对*所有*功能都这样做 - 您必须手动将其添加到每个功能。

您可以编写一个简短的包装器，然后`mylambda(lambda x: ...)`：

```
def mylambda(x):
  x.f = fun
  return x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:05:56.630

CPython 不允许这样做：

```
TypeError: can't set attributes of built-in/extension type 'function' 
```

（如果您尝试使用该`.__dict__`方法...）

```
TypeError: 'dictproxy' object does not support item assignment 
```

这是因为这些类型是用 C 实现的，并且以灵活性换取速度。

# django - django 在哪里呈现默认的 500 回溯，以便我可以使用它来创建自己的日志？

> ID：12924746
> 
> 赞同：11
> 
> 时间：2012-10-16T23:00:07.617
> 
> 标签：django, django-templates, django-views, django-middleware, django-errors

我想用它在我的自定义中间件类的 process_exception() 方法中生成 html 日志文件，例如：

*   捕捉到异常。
*   process_exception(request) 调用。
*   process_exception 调用返回默认错误 html 的任何函数。
*   process_exception 将返回的 html 写入 django 服务器运行的某个位置的日志文件夹。

我知道 Django 能够为这些异常发送电子邮件，但我不想使用它。我正在使用 JSON 开发一个 RESTful 应用程序，因此返回一个说明错误 500 的 json 字符串然后将 html 放在其他地方感觉更合适。

提前致谢。

抱歉，也许我需要澄清一下：我不想创建自己的 500.html，我想使用 django 在 Debug=True 时使用的那个。即生成错误文件并将其放在日志文件夹中。

***感谢 Mark 的帮助 - 这是我为感兴趣的人提供的解决方案：***

```
import logging
import os
import settings
import sys
import datetime

from response import get_json_response
from django.views.debug import ExceptionReporter

logging.config.dictConfig(settings.LOGGING)
LOGGER = logging.getLogger('console_logger')

class LoggingMiddleware(object):

    def process_exception(self,request,exception):
        exc_type, exc_value, exc_traceback = sys.exc_info()
        er = ExceptionReporter(request, exc_type, exc_value, exc_traceback)
        time = str(datetime.datetime.now())
        file_path = os.path.join(settings.LOG_FOLDER, "{}.html".format(time))
        LOGGER.error("Writing error 500 traceback to %s" % file_path)
        file_handle = open(file_path,'w')
        file_handle.write(er.get_traceback_html())
        file_handle.close()
        return get_json_response(500,"HTTP Error 500: Internal Server Error") 
```

该代码拦截任何异常，使用 sys 模块和 djangos 默认错误模板生成格式良好的回溯/异常信息页面，然后将其放置在日志文件夹中，然后返回一个 JSON 对象，说明存在 http 错误 500。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:01:53.347

500 回溯页面使用一个模板字符串 ( `TECHNICAL_500_TEMPLATE`)，它被硬编码到`django.views.debug`. 该报告由一个`ExceptionReporter`类生成，该类也包含在`django.views.debug`其中，您应该能够将其重新用于您自己的日志生成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T07:47:40.520

如果我们想显示在您的模板 ( `500.html`) 中生成的异常，那么我们可以编写您自己的 500 视图，获取异常并将其传递给您的 500 模板。

## 脚步：

## 在 my_app.views.py

```
import sys
import traceback

from django.http.response import HttpResponseServerError
from django.template import loader
from django.template.context import Context, RequestContext

def custom_500(request):
    t = loader.get_template('500.html')
    type, value, tb = sys.exc_info()
    return HttpResponseServerError(
        t.render(
            Context({
                'exception_value': value,
                'value': type,
                'tb': traceback.format_exception(type, value, tb)
            }, RequestContext(request))
        )
    ) 
```

## 在主 Urls.py

```
from django.conf.urls.defaults import *
handler500 = 'my_app.views.custom_500' 
```

## 在模板中 (500.html)

```
{{ exception_value }}{{value}}{{tb}} 
```

更多信息在这里：[https ://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view](https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:14:17.487

重复： [模板不存在：500.html](https://stackoverflow.com/questions/2822422/template-does-not-exist-500-html)

基本上只需将 500.html 放在您的模板文件夹中，它就会使用它。

# c# - 为什么使用 double.Parse 然后转换为浮点数？

> ID：12924747
> 
> 赞同：1
> 
> 时间：2012-10-16T23:00:21.123
> 
> 标签：c#, casting, refactoring, type-conversion

我在我正在处理的一些代码中看到了这一点：

```
num1 = (float)double.Parse(parameters[i + 1]);
num2 = (float)double.Parse(parameters[i + 2]); 
```

想知道为什么他们不只是使用`float.Parse`而不是`double.Parse`并转换为`float`. 有充分的理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:05:39.883

> 有充分的理由吗？

是的。如果参数很大，上面的代码会引发`OverflowException`，但代码只需要最大值为 float max 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:05:01.077

> 有充分的理由吗？

并不真地。这里的主要区别是：

1.  一些额外的开销（这当然没有任何好处）

2.  如果值超出单个可表示的范围，则会出现不同的潜在异常。

一般来说，这可能应该直接使用[Single.Parse](http://msdn.microsoft.com/en-us/library/2thct5cb.aspx#Y0)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:12:52.133

如果您尝试这段代码，您会看到，例如，如果数字太大而无法使用 float 表示，则会引发异常，但当从 double 转换为 float 时不会出现任何异常。这个数字将是无穷大。自己试试：

```
string numString = "23339823498723948723958734956283468237468273468274602983409283.4092834092834029834029384029834";
            double num2 = double.Parse(numString);
            float num3 = (float)num2;
            float num1 = float.Parse(numString); 
```

也许有人一开始就预料到了这种行为。即使，我会使用 try catch 而不是这种方法。

# c# - NHibernate 的相对路径连接字符串

> ID：12924748
> 
> 赞同：1
> 
> 时间：2012-10-16T23:00:30.740
> 
> 标签：c#, nhibernate, connection-string, relative-path

我正在使用以下代码来创建`Session Factory`带有 NHibernate 的。我想用相对路径来指定这个路径，这样当我和我的队友合并我们的分支时，我们就不必一直修复连接字符串。我怎样才能做到这一点？

```
private static void InitializeSessionFactory(bool deleteSchemaOnClosing = false, bool regenerateSchemaOnOpening = false)
{
_sessionFactory = Fluently.Configure()
    .Database(MsSqlConfiguration.MsSql2008
                  .ConnectionString(
                      @"Data Source=.\SQLEXPRESS;AttachDbFilename=""C:\MyProject\MyProjectCore\Fluent NHibernate\CoreDatabase.mdf"";Integrated Security=True;User Instance=True")
                  .ShowSql()
    )
    .Mappings(m =>
              m.FluentMappings
                  .AddFromAssemblyOf<User>())
    .ExposeConfiguration(cfg => new SchemaExport(cfg)
                                    .Create(deleteSchemaOnClosing,regenerateSchemaOnOpening))
    .BuildSessionFactory();
} 
```

我的`app.config`文件如下所示：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="CoreDatabase.Properties.Settings.CoreDatabaseConnectionString"
            connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CoreDatabase.mdf;Integrated Security=True;User Instance=True"
            providerName="System.Data.SqlClient" />
        <add name="Fluent_NHibernate.Properties.Settings.CoreDatabaseConnectionString"
            connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CoreDatabase.mdf;Integrated Security=True;User Instance=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/></startup></configuration> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:35:57.357

看看 SqlConnectionStringBuilder，你可以这样做：

```
var rawStr = Settings.CoreDatabaseConnectionString.ConnectionString;
// retrieve the original connection string from config file

var conBuilder = new SqlConnectionStringBuilder(rawStr);
conBuilder.AttachDBFilename = Path.GetFullPath(
    Path.Combine(Environment.CurrentDirectory, "CoreDatabase.mdf"));
// if you're doing this in a web environment, swap Environment.CurrentDirectory 
// for HttpRuntime.AppDomainAppPath

_sessionFactory = Fluently.Configure()
    .Database(MsSqlConfiguration.MsSql2008
                  .ConnectionString(conBuilder.ToString())
                  .ShowSql()
    )
// rest of your configuration... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:28:13.843

作为一个示例，您可以遵循类似这样的内容.. 这将是一种将值保存到 .Config 文件的方法，但只是为了给您一个示例，说明如何在 .Config 文件中使用参数，请看一下这个。

如果您确实需要一个示例，我还将以更简单的方式附加到我的答案中

```
//Add config like this:
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>

  </connectionStrings>
</configuration>

 Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            config.ConnectionStrings.ConnectionStrings.Add(new ConnectionStringSettings(
                                                          "MyConnectionString",
                                                          String.Format("DataSource={0};InitialCatalog={1};IntegratedSecurity={2}",
                                                                         "testing", "testing2", "Testing6")));
            config.Save(ConfigurationSaveMode.Modified, true);
            ConfigurationManager.RefreshSection("connectionStrings");
            MessageBox.Show(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString) 
```

看看如何从配置文件中读取，并尝试链接上的示例代码并逐步执行代码，这将是一次很棒的学习体验...... [如何从 .Config 文件中读取应用程序设置](http://msdn.microsoft.com/en-us/library/610xe886%28v=vs.100%29.aspx)

# visual-studio-2010 - 可以在 Visual Studio 中创建项目的“链接”副本吗？

> ID：12924753
> 
> 赞同：0
> 
> 时间：2012-10-16T23:01:02.443
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, project, file-link

我想知道是否有一种简单的方法可以在 Visual Studio 2010 或 2012 中创建项目的“链接”副本。我的​​意思是，我已经有了包含所有文件的 C# 库项目（用于创建VS 2010 的 TFS 签入策略）。现在，为了让我的签入策略在 VS 2012 上运行，我需要更改引用以引用新的 v11.0 Team Foundation dll。由于我仍然想在 VS 2010 上更新和使用我的签入策略，而不是更改项目中的引用，我想创建一个新项目，该项目将使用新的 v11.0 引用，但仍引用存储在原始项目；所以它本质上是原始项目的链接副本。

我知道我可以通过创建我的新项目手动执行此操作，然后添加现有项目，指向其他项目的文件，然后选择“添加为链接”。这样做的问题是，当我创建新文件并将它们添加到原始项目时，它们不会自动被拾取并添加到这个新项目中；我必须记住将新项目中的新文件添加为“添加为链接”。

我知道在创建 XNA Windows 游戏项目后，您可以选择创建项目的 XBox 或 Windows Phone 副本，然后创建项目的“链接”副本，该副本会自动获取添加到 Windows 项目的新文件夹和文件（确切地说我在上面描述并正在寻找的东西）。

那么有没有办法让我们自己为 Visual Studio 中的常规 C# 库类执行此操作？或者“为 Xbox 360 / Windows Phone 创建项目副本”类型的设置是否在做一些我们无法复制或轻松复制的时髦？

任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:06:47.577

你不能在视觉工作室。为什么不直接编写代码从其他项目的目录中导入您创建的所需文件。像 DLL Import 之类的。

# iphone - iOS：防止视图方向切换？

> ID：12924757
> 
> 赞同：1
> 
> 时间：2012-10-16T23:01:37.877
> 
> 标签：iphone, ios, uiview, orientation

在我的应用程序的构建设置中，我检查了所有支持的方向（除了倒置）。

但是，当我启动应用程序时，某些不打算以纵向显示的视图将自动旋转并截断一半视图。我不希望这些视图旋转。

我怎样才能防止这种情况？我试过使用：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    return YES;
if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    return YES;

return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

但是该设备仍然希望在可能的情况下转为纵向。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:18:31.433

`shouldAutorotateToInterfaceOrientation`已弃用。新的替代品是`shouldAutoRotate`. 为了在返回值之前在界面方向之间进行识别`shouldAutoRotate`，请使用`interfaceOrientation`UIViewControllers 的属性。例如，你可以有这样的东西：

```
-(BOOL)shouldAutoRotate{
    if (self.interfaceOrientation == UIInterfaceOrientationPortrait){
        return YES;
    }
    else {
        return NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:24:18.987

此方法已弃用，不会在 iOS 6 中调用。有关更多信息，请参阅 Apple 的文档或关于 SO 的一千个问题之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:15:10.907

您不想旋转的视图是否嵌入在导航栏或选项卡栏中？如果是这样，我也面临同样的问题。您需要为选项卡栏/导航栏分配一个类，并将 ios 6 的新方法覆盖为：

```
-(BOOL)shouldAutoRotate
{
return NO;
} 
```

让我知道这是否是您的问题类型。我还必须使用 NSNotificationCenter 实现方向更改，以便允许在我的一个子视图上进行旋转。如果这是您要找的东西，我会发布。

让我知道！

# android - 我在 res 文件夹中有 mymenu.xml，但是当我膨胀它时，它说无法解析或不是字段

> ID：12924768
> 
> 赞同：0
> 
> 时间：2012-10-16T23:02:49.733
> 
> 标签：android, menu

我在res下创建了menu文件夹，`mymenu.xml`在文件夹里面创建了，在里面可以看到mymenu预留的内存空间`R.java` 但是一直提示`cannot be resolved or is not a field.`可能是什么问题？

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mymenu, menu);
    return true;

} 
```

**在 R.java 中**

```
public static final class menu {
    public static final int mymenu=0x7f050000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:17:08.830

确保您使用的项目`R`不是`android.R`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:13:09.453

您是否尝试将其重命名为 menu.xml？你能显示和.xml 源吗？

# mysql - MySQL 设备的启动和停止时间

> ID：12924773
> 
> 赞同：1
> 
> 时间：2012-10-16T23:03:51.110
> 
> 标签：mysql, sql

我有一个包含趋势数据的数据库，结构如下：

```
[Timestamp, System_State]
2012-01-01 00:00:00, 1
2012-01-01 00:01:00, 1
2012-01-01 00:02:00, 0
2012-01-01 00:03:00, 1
2012-01-01 00:04:00, 1
2012-01-01 00:05:00, 0
... 
```

现在我需要编写一个 SQL 查询来了解系统何时启动（system_state 从 0 变为 1）以及何时停止（状态从 1 变为 0）。除了使用光标之外，我还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:24:07.417

像这样的东西怎么样（这是T-SQL，即SQL Server，但也可能适用于MySql）

```
declare @t table (eventTime datetime, eventState bit)

insert @t select '2012-01-01 00:00:00', 1
union all select '2012-01-01 00:01:00', 1
union all select '2012-01-01 00:02:00', 0
union all select '2012-01-01 00:03:00', 1
union all select '2012-01-01 00:04:00', 1
union all select '2012-01-01 00:05:00', 0

select *
from
(
    select eventTime, eventState, row_number() over (order by eventTime, eventState)r 
    from @t
) a
inner join
(
    select eventTime, eventState, row_number() over (order by eventTime, eventState)r 
    from @t
) b
on a.r = b.r-1
where a.eventState <> b.eventState 
```

——或者：

```
select *
from @t a
where exists (
    select 1
    from @t b
    where a.eventTime > b.eventTime
    and a.eventState != b.eventState
    and not exists
    (
        select 1
        from @t c
        where a.eventTime > c.eventTime
        and b.eventTime < c.eventTime
    )
)
order by eventTime 
```

- 或者

```
select *
from @t a
inner join @t b
    on a.eventTime > b.eventTime
    and a.eventState != b.eventState
left outer join @t c
    on a.eventTime > c.eventTime
    and b.eventTime < c.eventTime
where c.eventState is null
order by a.eventTime 
```

# sql-server - SQL Server 中固定宽度数据类型的可变宽度等效项

> ID：12924775
> 
> 赞同：0
> 
> 时间：2012-10-16T23:03:57.573
> 
> 标签：sql-server, null

我在 SQL Server 中读到过，无论列值是否为 NULL，固定宽度数据类型总是占用空间，而如果列值为 NULL，可变宽度数据类型则不会。是否有等效于 int、float、datetime 等的可变宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:09:14.630

问：是否有不占用固定空间量的变量类型？

答：当然。nvarchar、ntext、image 和 Document XML 立即浮现在脑海中。

问：对于 int、number 或 datetime 等类型，除了固定宽度之外，还有什么其他的吗？

答：没有:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:32:08.750

正确的是，以“VAR”开头的数据类型在值为 NULL 时不会占用数据页上的空间。VAR 版本可用的数据类型只有字符和二进制数据类型。所有其他的，如 INT 和 DATETIME 总是占用固定数量的空间，与它们的值无关。请参阅[数据库中空值使用的空间](https://stackoverflow.com/questions/556363/space-used-by-nulls-in-database)

# c++ - 使用 OpenCV 进行单相机校准 - 生成“完整”未失真图像的问题

> ID：12924780
> 
> 赞同：6
> 
> 时间：2012-10-16T23:04:57.153
> 
> 标签：c++, opencv

我一直在尝试使用 OpenCV 的相机校准套件使鱼眼相机的图像不失真（如果相关，我使用的是 GoPro）。我已经完成了大部分流程，并且可以生成不失真的图像。但是，当使用重映射时，未失真的图像是“有效矩形” - 换句话说，返回的图像是原始图像的裁剪版本，以避免未失真帧中固有的弯曲黑色边框。

我试图使用 getOptimalNewCameraMatrix() 来纠正这种情况，结果非常奇怪。我希望你们中的一个可以阐明我的问题。

我目前校准相机如下：

```
double error = calibrateCamera(worldPoints, sensorPoints, process_size, cameraMatrix, distCoeffs, rvecs, tvecs, calibration_flags); 
```

生成我需要的cameraMatrix。这部分有效（我认为），因为如果我通过 initUndistortRectifyMap() 然后 remap() 运行它，我会得到一个有效的图像。但是，我正在寻找完整的图像，所以接下来我会尝试按如下方式更正我的 cameraMatrix：

```
int alpha = 1;
cameraMatrix_corr = getOptimalNewCameraMatrix(cameraMatrix, distCoeffs, image.size(), alpha); 
```

然后，我为重映射生成 X 和 Y 映射，如下所示（这是直接从 OpenCV 2.0 Cookbook 借来的，所以我相当有信心它也可以工作）。

```
initUndistortRectifyMap(
    cameraMatrix_corr,  // computed camera matrix
    distCoeffs, // computed distortion matrix
    Mat(), // optional rectification (none)
    Mat(), // camera matrix to generate undistorted
    image.size(),  // size of undistorted
    CV_32FC1,      // type of output map
    map1, map2);   // the x and y mapping functions 
```

最后，我重新映射我的图像！

```
// Apply mapping functions
remap(image, undistorted, map1, map2, INTER_LINEAR); 
```

这是我到目前为止的结果。如果我使用 alpha = 0 （矩阵没有变化），我会得到合理的（虽然裁剪）结果。

![图像（alpha = 1）](../Images/4c5810fc74e150c0369ed44ceb6981fd.png)

如果我使用 alpha = 1，我认为它应该给我一个图像，每个原始像素都映射到新图像，我得到以下信息：

![图像（alpha = 0）](../Images/c6cfdfdf60790963b05bf1685a174363.png)

所以，我的问题是：我做错了什么，为什么我不能从校准中获得未经裁剪、不失真的图像？

感谢大家容忍我，这是我在这里的第一个问题，但我试图尽可能完整。让我知道我是否搞砸了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:58:28.390

我相信校正相机矩阵不是为了不失真而应该做的事情，因为这会给你一个相机矩阵，就好像没有失真一样。

如果您不想“丢失”图像信息，最好将地图移动到 x 和 y 并将图像映射到更大的图像。这是因为当不失真时，角落中的像素会向外移动以校正图像。

请记住，鱼眼镜头具有很高的失真，即使使用正确的代码也可能无法完全纠正。

# php - 使用 PHP 在 mongodb 中检索初始值

> ID：12924781
> 
> 赞同：0
> 
> 时间：2012-10-16T23:04:57.390
> 
> 标签：php, mongodb

在文档中，我想为我的收藏中的每个人存储唯一的电话号码，如下所示：

```
phones: {
        "5551112222": {
            extension: "101",
            type: "Mobile"
        },
        "8005554444": {
            extension: "225",
            type: "Work"
        },
    },
name: {
  first: "john",
  last: "smith"
} 
```

我的 PHP 代码可以访问它，这让我可以访问扩展名和类型，但是我如何访问数字部分，因为 $d 显然不起作用，因为它只返回整个数组？

```
 foreach ($cursor['phones'] as $d) {
   echo 'number: ' . $d . '<br />ext. ' . $d['extension'] . '<br />type: ' . $d['type']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:22:57.270

根据您的变量`var_dump`输出：`$cursor['phones']`

> 数组（2）{[5551112222]=>数组（2）{[“扩展”]=>字符串（3）“101”[“类型”]=>字符串（6）“移动”}[8005554444]=>数组(2) { ["extension"]=> string(3) "225" ["type"]=> string(4) "Work" } }

将您的代码更改为：

```
 foreach ($cursor['phones'] as $number => $extra) {
      echo 'number: ' . $number . '<br />ext. ' . $extra['extension'] . '<br />type: ' . $extra['type']; 
```

原因很简单，当使用`foreach`以下格式的循环时：

```
foreach($arr as $d) 
```

`$d`将包含该对的值。

来自 php 手册： http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

```
foreach (array_expression as $value)
    statement
foreach (array_expression as $key => $value)
    statement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:24:28.443

`$d`将返回整个数组，代表数组的 foreach 值`$d['extension']`应该可以工作；可以？如果您正在尝试获取密钥，请将您的 foreach 更改为：

```
foreach($cursor['phones'] as $id => $d){ 
```

并使用`$id`var 输出数字。

# haskell - 将类型级别的自然数转换为常规数

> ID：12924782
> 
> 赞同：7
> 
> 时间：2012-10-16T23:04:58.347
> 
> 标签：haskell, types

我试图通过一个实现点积的简单示例来掌握类型级自然数的窍门。我代表这样的点积：

```
data DotP (n::Nat) = DotP [Int]
    deriving Show 
```

现在，我可以为每个单独的点积大小创建一个幺半群实例（`mappend`实际的点积在哪里），如下所示：

```
instance Monoid (DotP 0) where
    mempty                      = DotP $ replicate 0 0
    mappend (DotP xs) (DotP ys) = DotP $ zipWith (*) xs ys

instance Monoid (DotP 1) where
    mempty                      = DotP $ replicate 1 0
    mappend (DotP xs) (DotP ys) = DotP $ zipWith (*) xs ys

instance Monoid (DotP 2) where
    mempty                      = DotP $ replicate 2 0
    mappend (DotP xs) (DotP ys) = DotP $ zipWith (*) xs ys 
```

但我想定义一个更通用的实例，如下所示：

```
instance Monoid (DotP n) where
    mempty                      = DotP $ replicate n 0
    mappend (DotP xs) (DotP ys) = DotP $ zipWith (*) xs ys 
```

我不确定如何将类型的数字转换为可以在 mempty 函数中使用的常规数字。

* * *

编辑：拥有一个在 O(1) 时间内运行的函数也很酷`dotplength :: (DotP n) -> n`，只需查找它是什么类型，而不必遍历整个列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T00:31:56.543

要获得`Integer`对应于类型级别 natural `n`，您可以使用

```
fromSing (sing :: Sing n) :: Integer 
```

在摆弄了一下之后，我得到了这个来编译：

```
{-# LANGUAGE DataKinds, KindSignatures, ScopedTypeVariables #-}

import Data.Monoid
import GHC.TypeLits

data DotP (n :: Nat) = DotP [Int]
    deriving Show

instance SingI n => Monoid (DotP n) where
    mempty = DotP $ replicate (fromInteger k) 0
      where k = fromSing (sing :: Sing n)

    mappend (DotP xs) (DotP ys) = DotP $ zipWith (*) xs ys

dotplength :: forall n. SingI n => DotP n -> Integer
dotplength _ = fromSing (sing :: Sing n) 
```

# python - Python 类声明中的变量用法

> ID：12924787
> 
> 赞同：1
> 
> 时间：2012-10-16T23:05:11.130
> 
> 标签：python, class, variables

这是 Zed Shaw 的“Learn Python the Hard Way”教程 40 中的代码片段：

```
class Song(object):

    def __init__(self, lyrics):
        self.lyrics = lyrics

    def sing_me_a_song(self):
        for line in self.lyrics:
            print line 
```

为什么 Python 在定义“sing_me_a_song”函数时允许使用“self.lyrics”？是因为“ *init* ”下定义的任何变量也可以在同一类的其他地方使用吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:06:39.547

**实例变量**

这称为实例变量。任何定义为“前缀”的变量`self.`都可以在对象的任何方法中使用。通常，此类变量是在 中创建的`__init__`，因此可以从对象初始化的那一刻开始访问它们，尽管您可以在其他方法中定义实例变量。例如：

```
>>> class foo:
...     def fun(self):
...             self.heh=3
... 
>>> f = foo()
>>> f.heh 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: foo instance has no attribute 'heh'
>>> f.fun()
>>> f.heh
3 
```

`__init__`注意在;之外初始化实例变量的危险。如果在您尝试访问它们之前未调用初始化它们的方法，则会出现错误。

**类变量**

这不要与“类变量”混淆，后者是另一种类型的变量，可以被类的任何方法访问。可以为整个类设置类变量，而不仅仅是该类的特定对象。这是一个包含实例变量和类变量的示例类，以显示差异：

```
class MyClass:
    classVar = "I'm a class var."
    def __init__(self):
        self.instanceVar = "I'm an instance var."
    def fun(self):
        methodVar = "I'm a method var; I cannot be accessed outside of this method."
        self.instanceVar2 = "I'm another instance var, set outside of __init__." 
```

**关于“方法”与“功能”的注释**

在您的问题中，您称其`sing_me_a_song`为“功能”。实际上，它是类的*方法*`Song`。这与常规的旧函数不同，因为它从根本上与类相关联，因此也与该类的对象相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:10:48.223

当您定义**init**函数时，您会注意到第一个参数是“self”——这是对正在创建的对象的引用。当您执行“self.lyrics = Lyrics”时，这实际上是将值分配给对象的属性，而不是变量。

所以当你去别处访问它时，它是可见的——但不是因为它是一个变量！你的想法是对的，如果我们遵循正常的范围规则，它不应该是可见的。但是，它不是变量，*任何*代码都可以访问 self.lyrics 的值，只要它们具有对对象的引用。

例如：

```
test = Song(["This is some lyrics."])
test.sing_me_a_song() #this works
print test.lyrics[0] #but so does this! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:09:11.030

根据代码，`self.lyrics`在类的构造函数中定义。创建对象时总是首先调用构造函数。可以`self.lyrics`在其他类方法中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:10:01.167

`self`用于引用`Song`正在调用该方法的类的实际实例。例如，如果你这样做...

```
foo = Song("hello")
bar = Song("world") 
```

然后`foo.lyrics`设置为`"hello"`，并`bar.lyrics`设置为`"world"`。如果您随后在其中一个实例上调用方法，就像这样......

```
foo.sing_me_a_song() 
```

`self`然后使用set to调用该方法`foo`，并因此`self.lyrics`查找，`"hello"`因为它是`foo`其中`lyrics`设置为的实例`"hello"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T23:10:43.120

重要的是要意识到它不是类定义，其方式与 java 或 c++ 定义类的方式完全相同。

自我是一个动态的对象。无论是自我，还是任何其他对象， `myObj.newField = value` 始终是一件有效的事情。由于在初始化对象时运行了**init**，因此有一个 self.lyrics 元素。

你可以有

```
 def foo(self):
    self.thing = "turtle" 

```

然后在 foo 之后调用的任何函数中，您可以引用 self.thing。（这可能是一个非常糟糕的主意，但在语法上并没有错）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T23:10:53.010

这个名字`self`没什么特别的。在 python 中，对象的每个方法都会自动引用该对象作为它的第一个参数。

This means that in the `__init__` (constructor) method, your setting the attribute `lyrics` on the object. Later on, you can call `sing_me_a_song`, and that will get a reference to the same object with lyrics attribute.

# android - 如何向 Android Pico TTS 添加新声音？

> ID：12924788
> 
> 赞同：4
> 
> 时间：2012-10-16T23:05:16.373
> 
> 标签：android, text-to-speech

我想在 Android 随附的现有 Pico TTS 引擎中添加新声音（例如女性声音或卡通声音）。它仅附带一个男性声音。我知道还有其他支持多种声音的 TTS 引擎，但它们不是免费的。我希望我的 Android 应用程序能够使用多种声音。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:40:43.220

Pico TTS 引擎的创建者是 SVOX，他们不太可能让他们的免费产品轻松与他们的“<a href="https://play.google.com/store/apps/details?id =com.svox.classic" rel="nofollow">经典文本到语音引擎”。

# c# - 为什么这个服务方法没有出现？

> ID：12924791
> 
> 赞同：0
> 
> 时间：2012-10-16T23:05:33.603
> 
> 标签：c#, asp.net, visual-studio-2010, wcf, web-services

这是我第一次在 Visual Studio 和 C# 中编程。我正在尝试创建 Web 服务，但我的 GetProduct 没有出现。

```
 namespace GettingStartedHost
 {
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
public class Service1 : IService1
{
    public string GetData(int value)
    {
        return string.Format("You entered: {0}", value);
    }

    public int GetProduct(int a, int b)
    {
        return a * b;
    }

    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        int GetProduct(int a, int b);

        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

    }

    public CompositeType GetDataUsingDataContract(CompositeType composite)
    {
        if (composite == null)
        {
            throw new ArgumentNullException("composite");
        }
        if (composite.BoolValue)
        {
            composite.StringValue += "Suffix";
        }
        return composite;
    }

} 
```

}

当我按 CTRL-F5 启动测试服务器时，只显示了 2 个方法。GetProduct 不显示。怎么了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T23:22:37.513

请尝试此代码。

```
namespace GettingStartedHost
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public int GetProduct(int a, int b)
        {
            return a * b;
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }
    }

    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        int GetProduct(int a, int b);

        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);
    }

} 
```

# python - python多处理的内存使用情况

> ID：12924792
> 
> 赞同：1
> 
> 时间：2012-10-16T23:05:34.173
> 
> 标签：python, multiprocessing

`multiprocessing.Process`一旦进程加入，进程所消耗的内存是否会被释放？

我想到的场景大致是这样的：

```
from multiprocessing import Process
from multiprocessing import Queue
import time
import os

def main():
  tasks = Queue()  
  for task in [1, 18, 1, 2, 5, 2]:
    tasks.put(task)

  num_proc = 3           # this many workers @ each point in time
  procs = []
  for j in range(num_proc):
     p = Process(target = run_q, args = (tasks,))  
     procs.append(p)
     p.start()

  # joines a worker once he's done
  while procs:
    for p in procs:
        if not p.is_alive():
            p.join()        # what happens to the memory allocated by run()?  
            procs.remove(p)
            print p, len(procs)
    time.sleep(1)  

def run_q(task_q):
    while not task_q.empty():  # while's stuff to do, keep working
        task = task_q.get()
        run(task)

def run(x):       # do real work, allocates memory
    print x, os.getpid()
    time.sleep(3*x)

if __name__ == "__main__":
  main() 
```

在实际代码中，长度`tasks`远远大于 CPU 内核的数量，每个`task`都是轻量级的，不同的任务占用的 CPU 时间（几分钟到几天）和内存量也大不相同（从花生到几 GB） . 所有这些内存都是 a 本地的`run`，不需要共享它—​​—所以问题是它是否在 a`run`返回时释放，和/或在进程加入时释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:18:07.423

当进程终止时，进程消耗的内存被释放。在您的示例中，这发生在 run_q() 返回时。

# mysql - 如何在 MySQL 中进行条件 INSERT？

> ID：12924802
> 
> 赞同：0
> 
> 时间：2012-10-16T23:06:33.927
> 
> 标签：mysql, sql

我有两张桌子。

**资产表**

> ```
>  |  AID  | NAME | 
>    | 1234  | item1| 
> ```

**项目表**

> ```
>  |  BID  | ITEM | 
>    |       |      | 
> ```

问题：只有当资产表中存在我要插入的相同数据时，如何将数据插入项目表？还是有可能？假设只有当资产表 AID 值（1234）存在时，我才能插入项目表 BID 值（1234）。我试过这样做：

```
INSERT INTO 'item'('BID') VALUES (1234) WHERE 'item'.BID='assets'.AID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:49:13.867

```
INSERT INTO item (BID) SELECT assets.aid FROM assets WHERE aid = 1234; 
```

如果您可能找到多个匹配项并且不想插入多于一行，请在 SELECT 中使用 DISTINCT。

此外，如果您只想限制数据库中的插入，请使用外键约束。一旦你有了它，你就不需要有条件地插入。如果父表中不存在辅助，只需插入并让数据库尝试失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:41:51.727

您可以使用动态 SQL 并在以后执行它，但这很难看。只需做一个 IF 条件。如果记录存在于 Value 中，则运行插入，否则不运行。

尝试这样的事情：

```
(SELECT Count(*) FROM Value WHERE BID = '1234') > 0
    --your insert-- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:10:42.307

您不能使用`WHERE`该`INSERT`语句，因为 mysql 不支持它。只需卸下`WHERE`零件，它应该可以工作。

但是您必须单独检查数据是否存在于另一个表中（或在子查询中）。

# mutt - mutt 回复挂钩：无法设置抄送：

> ID：12924804
> 
> 赞同：1
> 
> 时间：2012-10-16T23:07:04.587
> 
> 标签：mutt

我的（完整的）.muttrc：

```
reply-hook "~t our@group.address" "my_hdr Reply-To: our@group.address"
# Has no effect for unknown reason
reply-hook "~t our@group.address" "my_hdr Cc: Reply-To" 
```

第一个有效，回复获得默认设置的回复：标题。第二个没有，与条目的顺序无关。如果我更改`Cc:`为`MakeSomethingUp:`，它可以工作！

我想这是即使在回复钩子之后也会被解雇的东西。但它可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T00:44:54.380

我相信这是由默认的“metoo”选项为“no”引起的。将此添加到您的 .muttrc：

```
metoo=yes 
```

# spotify - 当曲目在 Spotify JavaScript API 中加星标或取消星标时，是否会触发任何事件？

> ID：12924805
> 
> 赞同：0
> 
> 时间：2012-10-16T23:07:05.480
> 
> 标签：spotify

当 Spotify JavaScript API 中的曲目被加星标或未加星标时，是否会触发任何事件？如果是，我该如何为此定义回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:40:40.380

您需要查看已加星标的播放列表以了解项目更改：

```
var sp = getSpotifyApi();
var models = sp.require('$api/models');

var playlist = models.library.starredPlaylist;
playlist.observe(models.EVENT.ITEMS_ADDED, function() {
  console.log('New starred tracks!');
  console.log(playlist.tracks);
}); 
```

# ios - 使用 set point.x iphone 获取 UIBezierPath point.y

> ID：12924806
> 
> 赞同：2
> 
> 时间：2012-10-16T23:07:12.413
> 
> 标签：ios, objective-c, iphone, swift, uibezierpath

我有一个[UIBezierPath](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBezierPath_class/)，当我设置点 x 时我需要得到点 y

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:46:48.660

您将需要在点之间进行插值。要访问这些点，最简单的方法是将它们存储到`NSMutableArray`. 创建此数组并添加所有 CGPoints，同时将它们添加到您`UIBezierPath`的绘图例程中。如果这是不可能的，请参阅[此处](https://stackoverflow.com/questions/3051760/getting-a-list-of-points-from-a-uibezierpath)了解如何从`UIBezierPath`. 请参阅下面的代码，了解如何实现您想要的：

```
-(float)getYValueFromArray:(NSArray*)a atXValue:(float)x
{
    NSValue *v1, *v2;
    float x1, x2, y1, y2;

    // iterate through all points
    for(int i=0; i<([a count]-1); i++)
    {
        // get current and next point
        v1 = [a objectAtIndex:i];
        v2 = [a objectAtIndex:i+1];

        // return if value matches v1.x or v2.x
        if(x==[v1 CGPointValue].x) return [v1 CGPointValue].y;
        if(x==[v2 CGPointValue].x) return [v2 CGPointValue].y;

        // if x is between v1.x and v2.x calculate interpolated value
        if((x>[v1 CGPointValue].x) && (x<[v2 CGPointValue].x))
        {
            x1 = [v1 CGPointValue].x;
            x2 = [v2 CGPointValue].x;
            y1 = [v1 CGPointValue].y;
            y2 = [v2 CGPointValue].y;
            return (x-x1)/(x2-x1)*(y2-y1) + y1;
        }
    }

    // should never reach this point
    return -1;
}

-(void)test
{
    NSMutableArray *a = [[NSMutableArray alloc] init];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake( 0, 10)]];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake(10,  5)]];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake(15, 20)]];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake(20, 30)]];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake(35, 50)]];
    [a addObject:[NSValue valueWithCGPoint:CGPointMake(50,  0)]];

    float y = [self getYValueFromArray:a atXValue:22.5];
    NSLog(@"Y value at X=22.5 is %.2f", y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T14:01:31.013

@nullp01nter 感谢您的精彩回答。正是我需要的！:) 这是我的 Swift 版本，作为带有 PointXYs 的数组的扩展：

```
protocol PointXY {
    var x : CGFloat { get set }
    var y : CGFloat { get set }
}

extension CGPoint: PointXY { }

extension Array where Element: PointXY {
    func getYValue(forX x: CGFloat) -> CGFloat? {
        for index in 0..<(self.count - 1) {
            let p1 = self[index]
            let p2 = self[index + 1]
            // return p.y if a p.x matches x
            if x == p1.x { return p1.y }
            if x == p2.x { return p2.y }
            // if x is between p1.x and p2.x calculate interpolated value
            if x > p1.x && x < p2.x {
                let x1 = p1.x
                let x2 = p2.x
                let y1 = p1.y
                let y2 = p2.y
                return (x - x1) / (x2 - x1) * (y2 - y1) + y1
            }
        }
        return nil
    }
} 
```

# c# - “滚动”单行文本框

> ID：12924814
> 
> 赞同：3
> 
> 时间：2012-10-16T23:08:32.830
> 
> 标签：c#, winforms, textbox, scroll, caret

我试图在选择某些文本时向左“滚动”单行文本框，而不更改选择。

![在此处输入图像描述](../Images/fc381a30f82a8994892723d0d676ea75.png)

在上图中，我有一个文本框 A，其中包含字母 M 到 Z 的选择，但我看不到文本框开头的字母。

文本框 B 是我通过将选择从 Z 反向拖动到 M 手动完成的，它滚动可见区域，使左侧的字母变得可见。

通过使用下面的代码，我可以滚动到开头，但我会失去选择。

```
 txtTest.SelectionStart = 0;
  txtTest.SelectionLength = 0;
  txtTest.ScrollToCaret(); 
```

如何以编程方式选择 M 到 Z，同时仍显示文本框中的第一个字符？
（如上图B）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:18:45.577

未经测试，但是当您在帖子中调用那段代码时，您可以记录插入符号当前的位置。然后再次启用该选择。

```
int originalSelectionStart = txtTest.SelectionStart;
int originalSelectionLength = txtTest.SelectionLength;
txtTest.SelectionStart = 0;
txtTest.SelectionLength = 0;
txtTest.ScrollToCaret();
txtTest.SelectionStart = originalSelectionStart;
txtTest.SelectionLength = originalSelectionLength; 
```

# javascript - Highcharts - 在缩放事件（选择）上显示标记并在重置缩放时隐藏。是否可以？

> ID：12924815
> 
> 赞同：0
> 
> 时间：2012-10-16T23:08:42.630
> 
> 标签：javascript, jquery, highcharts, jquery-events

我希望你能对此有所了解。

这是一个例子 [http://jsfiddle.net/uBhu7/](http://jsfiddle.net/uBhu7/)

我已经设法在缩放（选择）事件中显示标记：

```
 events: {
        selection: function(event) {
            this.series[0].options.marker.enabled = true;
        }, 
```

现在的问题是：当用户点击“重置缩放”按钮时，有没有办法隐藏标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:20:44.093

这个似乎有效：http: [//jsfiddle.net/highcharts/uBhu7/1/](http://jsfiddle.net/highcharts/uBhu7/1/)

基本上，您需要在重置选择时销毁所有标记，然后将启用的选项设置回 false，以便 drawMarkers 方法不会创建新标记。

# html - 使用 phonegap 2.1.0 将画布保存到设备内存

> ID：12924819
> 
> 赞同：1
> 
> 时间：2012-10-16T23:09:10.053
> 
> 标签：html, cordova, canvas, base64

我有一个画布，可以在其中执行一些视觉操作。我想将图像保存到我的应用程序的 Documents 文件夹中，但是我在使用 base64 编码的数据路径时遇到了一些问题。有没有办法将该数据编码为二进制文件？

# java - java：返回继承的子类类型

> ID：12924832
> 
> 赞同：2
> 
> 时间：2012-10-16T23:10:17.803
> 
> 标签：java

我正在尝试使用 Hibernate 构建一个 CRUD 系统。我想为我的所有数据库对象构建一个接口：

```
public abstract class ADBElem { } 
```

这是一个 DB 对象方法（读取）的示例：

```
public static PrdProduct read(Integer id) {
    Session session = HibernateUtil.getSessionFactory().openSession();
    PrdProduct product = null;
    product = (PrdProduct) session.get(PrdProduct.class, id);
    session.close();
    return product;
} 
```

返回类型取决于继承的类，我如何把这个方法放在我的抽象类中？

到目前为止我发现了什么：

```
public abstract class ADBElem<T> {
    public static T read(Integer id) {
    Session session = HibernateUtil.getSessionFactory().openSession();
    T item = null;
    item = (T) session.get(T.class, id);
    session.close();
    return item;
 }

public class PrdProduct extends ADBElem<PrdProduct> {} 
```

但它不起作用，我收到此错误：无法对非静态类型 t 进行静态引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:17:25.083

在抽象类中，您必须添加带有返回类型的方法签名，该返回类型是它的超类`PrdProduct`或由它实现的接口。然后，无论具体类型如何，具体方法都必须返回相同的抽象类型。

```
public abstract class ADBElem { 
    public static SomeSuperCLass read(Integer id);
}

public class PrdProduct extends SomeSuperCLass {
    public static SomeSuperCLassOrInterface read(Integer id) {
        Session session = HibernateUtil.getSessionFactory().openSession();
        PrdProduct product = null;
        product = (PrdProduct) session.get(PrdProduct.class, id);
        session.close();
        // return product which is also a `SomeSuperClass`
        return product;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:57:44.700

使用静态（实用程序）方法，您可以*只键入 method*。但是，没有办法获取`Class`泛型类型，因此您也必须传入一个`Class`对象。

以下是如何将其编码为静态方法（无论该类是否已键入）：

```
public static <T> T read(Integer id, Class<T> clazz) {
    Session session = HibernateUtil.getSessionFactory().openSession();
    T object = (T) session.get(clazz, id);
    session.close();
    return object;
} 
```

使用时，java 将*推断*类型，因此您可以像这样简单地编写（不进行强制转换）调用：

```
PrdProduct product = MyClass.read(1, PrdProduct.class); 
```

# android - Android：来自 BroadcastReceiver 的通知

> ID：12924835
> 
> 赞同：21
> 
> 时间：2012-10-16T23:10:40.513
> 
> 标签：android

我有一个启动广播接收器的警报管理器。这是我的广播接收器：

```
public class AlarmBrodcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent arg1) {
        showNotification(context);
    }

    private void showNotification(Context context) {
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                new Intent(context, MyActivity.class), 0);

        NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(context)
                .setSmallIcon(0)
                .setContentTitle("My notification")
                .setContentText("Hello World!");
        mBuilder.setContentIntent(contentIntent);
        mBuilder.setDefaults(Notification.DEFAULT_SOUND);
        mBuilder.setAutoCancel(true);
        NotificationManager mNotificationManager =
            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(1, mBuilder.build());

    }  
} 
```

广播及时开始，但没有通知，只有声音。文字在哪里？怎么了？是因为我使用的是 API 10 和支持库吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T23:21:12.723

哦，我发现了问题。问题出在 .setSmallIcon(0) ...当我设置一些真实资源时，没关系，出现通知...

# php - 如何使用 PHP 创建单个用户页面？

> ID：12924838
> 
> 赞同：-1
> 
> 时间：2012-10-16T23:10:42.003
> 
> 标签：php, url, variables, redirect

我有一个带有名为 users.php 的页面的站点，它接受 URL 变量“用户名”并根据该变量返回用户信息。例如，URL users.php?username=someuser 将检索用户“someuser”的数据。我很好奇如何为每个用户创建一个单独的 URl，以便 mysite.com/someuser 重定向到 users.php?username=someuser。

有人可以向我解释如何做到这一点吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:14:23.027

您必须编辑 .htaccess 文件。看看[这里](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

例如：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ user.php?username=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ user.php?username=$1 
```

它将转换 URL，如

```
site.com/user123/ or site.com/user123 
```

到

```
site.com/user.php?username=user123 
```

# android - 猴子跑步者是否有等效于 jython -i （交互式提示）的方法？

> ID：12924847
> 
> 赞同：0
> 
> 时间：2012-10-16T23:11:40.960
> 
> 标签：android, jython, monkeyrunner

我是 python/jython 的 -i 开关的忠实粉丝，如

```
$ jython -i set_up_my_stuff.py
..
..sets up object1
..sets up object2
>>> object1.do_stuff() 
```

我想知道是否有猴子跑步者的等价物？似乎不是 ./monkeyrunner -i 选项。

这样，我可以使用脚本设置我的测试，然后通过交互式提示使用手机进行探索。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:43:20.990

If you invoke monkeyrunner without any arguments, it itself present you an interactive environment, and you can enter your monkeyrunner commands manually and work with it. Up/down keys are working, so having something is better than nothing.

But if this is not what you meant, and you want to debug monkeyrunner scripts interactively, you can setup Eclipse to work with monkeyrunner, where you can step through the script, watch variables etc. It is documented [here](http://dtmilano.blogspot.com/2011/03/using-android-monkeyrunner-from-eclipse.html)

And to answer to your question, there is no way to interactively run a script by using monkey runner (As far as I know)

# ios - 使用 monogame 构建默认 iOS 解决方案时出现错误消息

> ID：12924852
> 
> 赞同：4
> 
> 时间：2012-10-16T23:12:23.853
> 
> 标签：ios, xamarin.ios, gamekit, monogame, gkmatchmaker

当我尝试在 Monotouch 上构建默认的“MonoGame.Framework.iOS.sln”时，有人知道为什么会收到以下错误消息吗？我该如何解决这个问题？：

在指南源文件的第 468 行（从 MonoGame.Framework.iOS>iOS>GamerServices>Guide.cs 我得到，

```
public static void ShowMatchMaker()
{
     AssertInitialised ();

if ( ( Gamer.SignedInGamers.Count > 0 ) && ( Gamer.SignedInGamers[0].IsSignedInToLive ) )
   {
    // Lazy load it
if ( matchmakerViewController == null )
   {
     matchmakerViewController = new GKMatchmakerViewController(); } 
```

// 该行的错误是——类型“MonoTouch.GameKit.GKMatchmakerViewController”不包含采用“0”参数的构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:12:54.767

默认构造函数（实际上是`init`该类型的选择器`GKMatchmakerViewController`）无效（遗憾的是，Apple 关于可以使用什么初始化的文档`init`有点缺乏）。

同样从 iOS6 开始，这会在运行时引发 ObjectiveC 异常：

```
Objective-C exception thrown.  
Name: NSInvalidArgumentException 
Reason: <GKMatchmakerViewController: 0x16101160>: 
must use one of the designated initializers 
```

因此，这个默认构造函数以及其他一些构造函数已被删除，因为它们的使用可能会在早期的 iO​​S 版本中导致奇怪的崩溃（而且你不希望你的游戏在 iOS6 上出现异常行为）。

# google-cloud-datastore - Google App Engine，迁移到 HRD

> ID：12924854
> 
> 赞同：1
> 
> 时间：2012-10-16T23:12:47.663
> 
> 标签：google-cloud-datastore

大约一年前，我为我的谷歌帐户注册了一堆应用程序。例如。xys.appspot.com。其中一些应用程序没有部署任何东西，但是当我现在转到应用程序控制台时，它显示它正在使用主/从数据存储，我需要迁移到 HRD。

即使我没有部署任何内容，我是否必须迁移这些空应用程序，或者我现在可以在其中部署一个新应用程序并将其部署在 HRD 数据库中？

如果这没有发生，我是否必须启动此迁移过程，现在，如何将请求重定向到 xyz.appspot.com 到 xyz-hrd.appspot.com？我对谷歌提供的 .appspot 扩展感到满意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:33:37.610

您需要根据[迁移到 High Replication 数据存储](https://developers.google.com/appengine/docs/adminconsole/migration)指南进行迁移。关于重定向，这取决于您使用的编程语言和框架。通常，应用程序主处理程序中的重定向规则就足够了。

此外，如果应用程序是空的，您可以删除它们并创建支持 HRD 的新应用程序。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:31:50.653

根据[迁移指南](https://developers.google.com/appengine/docs/adminconsole/migration)，最后一步使旧应用程序 ID（在您的情况下为 xys）成为新应用程序 ID 的别名（在您的情况下为 xys-hrd）。引用指南，

> 作为最后一步，您将使旧应用程序 ID 成为新应用程序 ID 的“别名”；因此，如果用户在 old-name.appspot.com 上浏览您的应用程序，他们将看到您的新应用程序（您可能认为它是 new-name.appspot.com）。迁移后，您无需将用户指向或将文档更新到新 URL。

所以事情应该可以正常工作。

# ajax - Qt Quick 中的 AJAX

> ID：12924857
> 
> 赞同：0
> 
> 时间：2012-10-16T23:12:55.647
> 
> 标签：ajax, qt, qml, qt-quick

我正在考虑使用 Qt Quick 来构建桌面应用程序，因为它对于像我这样使用 node.js 进行 Web 开发的人来说看起来更友好，但是是否可以像`GridView`仅使用 QML 一样执行 AJAX 和填充控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:49:17.573

这是你所追求的：

[http://qt-project.org/doc/qt-4.8/declarative-xml-xmlhttprequest-xmlhttprequest-example-qml.html](http://qt-project.org/doc/qt-4.8/declarative-xml-xmlhttprequest-xmlhttprequest-example-qml.html)

或者，对于 Qt5：

[http://qt-project.org/doc/qt-5.1/qtqml/qtqml-javascript-qmlglobalobject.html](http://qt-project.org/doc/qt-5.1/qtqml/qtqml-javascript-qmlglobalobject.html)

# objective-c - 发送到 Deallocated Instance 的消息 - 在 Singleton 中

> ID：12924862
> 
> 赞同：0
> 
> 时间：2012-10-16T23:13:31.137
> 
> 标签：objective-c, ios, memory-management, cocos2d-iphone

我看到很多这些问题都没有答案......希望有人能帮助我。

所以我在我的应用程序中创建了一个单例，我重新加载了一个场景，但是当我尝试访问我的敌人路径的数据时收到了这条消息。

这是单例中的代码

在初始化中：

```
 NSString *resourcePath = @"EnemyPaths";
    NSString *levelDefsFile = [[NSBundle mainBundle] pathForResource:resourcePath ofType:@"plist"];
    _enemyPaths = [[NSDictionary alloc] initWithContentsOfFile:levelDefsFile]; 
```

当我重新加载场景时，我在单例中调用这个函数来释放旧数据

```
-(void) resetGameData
{
    [enemy1 release];
    [enemy2 release];
    [enemy3 release];
    [enemy4 release];
    [enemy5 release];
    [enemy6 release];
    [enemy7 release];
    [enemy8 release];
    [enemy9 release];
    [enemy10 release];

    [self setupEnemyPaths];
}

-(void) setupEnemyPaths
{
    NSString *getLevel = [NSString stringWithFormat:@"Level%d", CURRENT_LEVEL];
    NSAssert(_enemyPaths != nil, @"Couldn't open EnemyPaths file");
    _level = (NSDictionary *) [_enemyPaths objectForKey:getLevel];
    NSAssert(_level != nil, @"Couldn't find Level entry");

...
} 
```

我得到了错误

```
_level = (NSDictionary *) [_enemyPaths objectForKey:getLevel]; 
```

但我不确定为什么- _enemyPaths 已分配，我从未发布过它.. 还是我错过了什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:45:56.717

解决。我相信这些项目没有被复制并被直接使用，切换到复制每个项目，一切都很好。必须在通话中最终得到一个空字典。

# django - 如何检查是否定义了 django 模板变量？

> ID：12924865
> 
> 赞同：57
> 
> 时间：2012-10-16T23:13:46.327
> 
> 标签：django, django-templates

我有一个从许多视图中使用的 django 模板。该模板有一个消息块，用于通知用户应该引起他们注意的任何事情。是否发送消息取决于视图。一些视图可能会向模板发送`message`变量，而其他视图可能不会。

```
view_1:
    message = "This is an important message"
    render_to_response("my_template.html", 
                       {'message':message, 'foo':foo, 'bar':bar},
                       context_instance = RequestContext(request))

view_2:
    message = "This is an important message"
    render_to_response("my_template.html", 
                       {'foo':foo, 'bar':bar},
                       context_instance = RequestContext(request)) 
```

在模板中，我检查`message`变量并包含如下块：

```
base_template.html:
    ....
    {% block main_body %}
         {% block messages %}
         {% endblock %}
         {% block content %}
         {% endblock %}
    {% endblock %}
    ....

 my_template.html:
     {% extends base_template.html %}
     ....
     {% if message %}
          {% block messages %}
              <div class='imp_msg'>{{ message }} </div>
          {% endblock %}
     {% endif %}
     ... 
```

问题是即使 view_2 没有传递消息，最终的 html 也会被渲染`<div class='imp_msg'></div>`——基本上是一个空的 div。

由于该 CSS 旨在为消息提供 light_red 背景，因此我看到的是页面顶部的空 light_red 条。

我也试过: `{% ifnotequal message None %}`, `{% ifnotequal message '' %}`, 尝试设置`message`to`None`或`''`明确，但似乎没有帮助。

将不胜感激一些帮助！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-16T23:18:04.177

你需要切换你的`{% block %}`和你的`{% if %}`

```
{% block messages %}
    {% if message %}<div class='imp_message'>{{ message }}</div>{% endif %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-03-24T23:57:25.673

要检查，在 if 语句中，您需要将值与 进行比较`None`，如下所示：

```
{% if some_missing_var is None %}
   // code here if some_missing_var exists
{% else %}
   // code here if some_missing_var does not exist
{% endif %} 
```

在其他情况下（来自文档）：

通常，如果变量不存在，模板系统会插入引擎的 string_if_invalid 配置选项的值，默认设置为 ''（空字符串）。

我尝试了其他一些答案，但直到我阅读了有关如何处理无效变量的文档并且将上述内容弄清楚后，它们才起作用。

[链接到描述处理无效变量的文档](https://docs.djangoproject.com/en/stable/ref/templates/api/#how-invalid-variables-are-handled)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-13T21:19:45.247

如果您不想`KeyError`在模板上下文中没有变量时乱扔日志，我建议使用 templatetags 过滤器。

在`myapp/templatetags/filters.py`我添加：

```
@register.simple_tag(takes_context=True)
def var_exists(context, name):
    dicts = context.dicts  # array of dicts
    if dicts:
        for d in dicts:
            if name in d:
                return True
    return False 
```

在 html 模板中：

```
{% load filters %}
...
{% var_exists 'project' as project_exists %}
{% if project_exists %}
  ...
{% endif} 
```

# url - 这是哪个代码页

> ID：12924869
> 
> 赞同：0
> 
> 时间：2012-10-16T23:14:04.880
> 
> 标签：url, query-string

我正在发送这个查询字符串

> param=Declaração de Carência

并获得“Declaraï¿½ï¿½o de Carï¿½ncia”作为 Request.QueryString["param"] 的结果

有人能帮我吗？我尝试了每一个重载的编码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:18:45.707

你的框架误解码了它，造成不可逆转的损坏。

```
>>> print u'Declaraï¿½ï¿½o de Carï¿½ncia'.encode('latin-1').decode('utf-8')
Declara��o de Car�ncia 
```

寻求有关您正在使用的特定框架的进一步帮助。

# clojure - Leiningen Uberjar 与 lein run 的结果不同

> ID：12924870
> 
> 赞同：3
> 
> 时间：2012-10-16T23:14:08.577
> 
> 标签：clojure, leiningen

当我在 clojure repl 或使用 leiningen repl 中运行我的应用程序时，我的应用程序会运行，但是当我使用 uberjar 创建一个 jar 并运行该应用程序时，它只会读取我收藏的前 2 条记录。

我将其追踪到 pmap，因此我创建了 pmap 的最简单用法，并且它变得更加怪异。为什么这行得通

```
(ns ktest.core
    (:gen-class))
(defn -main []
  (println (pmap identity (range 20)))) 
```

但不是这个

```
(ns ktest.core
        (:gen-class))
    (defn -main []
       (pmap #(println %) (range 20))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:46:12.037

你被“懒虫”咬了。pmap 创建读取时将计算结果的序列。当您使用它运行它时，`println`它会读取结果以便打印它们，从而触发评估。在这种情况下，您可以修复此遗嘱`doall`或`dorun`. 如果您只需要运行它的打印副作用，请选择`dorun`，如果您需要对此结果执行某些操作，则选择`doall`将结果保存在内存中。

```
(dorun (pmap #(println %) (range 20))) 
```

由于[分块序列](http://www.infoq.com/news/2009/12/clojure-11-rc1-transients)，一些项目被打印出来。[有关pmap 和分块序列](http://dev.clojure.org/jira/browse/CLJ-862)的详细信息，请参阅此 Jira 问题。

# windows - Win 控制台，如何识别这个 unicode 字符？

> ID：12924872
> 
> 赞同：0
> 
> 时间：2012-10-16T23:14:16.333
> 
> 标签：windows, text, unicode, batch-file, cmd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:46:58.717

似乎是“常见的 unicode 问题”。在控制台中选择光栅字体时 - unicode 不可用。解决此问题的两种方法：

1.  打开控制台窗口属性，转到“字体”页面，选择“Lucida Console”或“Consolas”。按“确定”。

2.  使用替代控制台。[例如ConEmu](https://stackoverflow.com/a/10904494/1405560)（我是作者）。这类软件解决了普通控制台窗口的许多问题。

现在你可以`dir`

# json - 使用 Java Jersey 客户端的 WCF JSON 服务 - 错误：OperationFormatter 遇到无效的消息正文

> ID：12924880
> 
> 赞同：1
> 
> 时间：2012-10-16T23:16:05.927
> 
> 标签：json, wcf, rest, jersey

我正在尝试从我的 java 客户端（使用 jersey）调用 WCF 方法，但是每当我尝试调用服务时，我都会在服务日志中收到以下错误。

OperationFormatter 遇到无效的消息正文。预计会找到名称为“类型”且值为“对象”的属性。找到值“字符串”。

我不确定我是否以正确的格式将值传递给服务..

该服务接受 2 个参数（对象 object1，布尔提交），我以 json 格式传递值，如下所示，

服务 ：

```
[OperationContract]
        [FaultContract(typeof(SLFault))]
        [WebInvoke]
        public string InsertObject(object object1, bool commit) 
```

json输入：

```
{commit=[true], object1=[{"infoObjectParams":{"DynamicFields":{"idx_Indicator":["Yes"]},"Name":"Test",additionalProperties":{}}}]} 
```

但是我总是遇到上述错误，有人可以帮我解决我的问题吗？

谢谢，BB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:34:50.387

我将错误的格式传递给 WCF 服务。

一旦我修改了输入格式如下，一切正常......

{"commit":true,"object1":{"DynamicFields":{"idx_Indicator":["Yes"]},"additionalProperties":{}}}

谢谢，BB

# webgl - Three.js/WebGL 缩放到固定尺寸

> ID：12924883
> 
> 赞同：0
> 
> 时间：2012-10-16T23:16:36.940
> 
> 标签：webgl, three.js

我有某些可能是任何尺寸的平面几何图形。

我必须将它们缩放到特定尺寸（比如 1024x768 或 768x1024）

Three.js 通过 Geometry.scale 对象提供缩放。如果您知道初始高度/宽度是多少，这将非常有用，因为我可以这样做：

```
obj.scale.x = finalWidth/initialWidth;
obj.scale.y = finalHeight/initialHeight; 
```

但是没有对象会返回几何高度和宽度（即initialWidth和initialHeight）（如果我在这里错了，请纠正我）。

那么有没有办法在不知道初始尺寸的情况下将几何图形缩放到特定尺寸？

PS 当我不知道初始尺寸时，您可能会首先问我是如何构建对象的。当然，我确实知道初始尺寸，但那是我正在构建的框架的另一个很远的部分，如果可以的话，我希望避免跟踪整个尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:29:53.027

你说的对。要完成解决方案：

```
geometry.computeBoundingBox(); 
```

调用 computeBoundingBox 后，可以从 geometry.boundingBox 中读取尺寸

```
width = geometry.boundingBox.max.x - geometry.boundingBox.min.x
height = geometry.boundingBox.max.y - geometry.boundingBox.min.y
depth = geometry.boundingBox.max.z - geometry.boundingBox.min.z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:29:03.163

你说的是真的。你可以试试

```
geometry.computeBoundingBox(); 
```

然后可以从 计算尺寸`geometry.boundingBox`。

# python - 为什么奇怪的列表理解行为有副作用？

> ID：12924884
> 
> 赞同：1
> 
> 时间：2012-10-16T23:16:43.520
> 
> 标签：python, lambda, list-comprehension, side-effects

我知道在 Python 列表推导中使用副作用不是一个好习惯。但我不明白为什么会发生以下情况：

```
In [66]: tmp = [1,2,3,4,5]; [tmp.remove(elem) for elem in tmp]
Out[66]: [None, None, None]

In [67]: tmp
Out[67]: [2, 4] 
```

无论这是否是好的做法，列表理解的内部不应该做一些可预测的事情吗？如果以上*是*可以预测的，有人可以解释为什么只`remove`发生了三个操作，为什么偶数条目是剩下的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T23:21:02.940

这不是关于 listcomps，而是关于从您正在迭代的列表中删除：

```
>>> tmp = [1,2,3,4,5]
>>> for elem in tmp:
...     tmp.remove(elem)
... 
>>> tmp
[2, 4] 
```

它是这样的：

```
>>> tmp = [1,2,3,4,5]
>>> for elem in tmp:
...     print elem, tmp
...     tmp.remove(elem)
...     print elem, tmp
... 
1 [1, 2, 3, 4, 5]
1 [2, 3, 4, 5]
3 [2, 3, 4, 5]
3 [2, 4, 5]
5 [2, 4, 5]
5 [2, 4] 
```

首先它查看第 0 个元素，然后删除 1。所以在下一次迭代中，它想要删除第一个元素，现在是第 3 个，等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T23:20:41.860

当您直接迭代它时，从列表中删除绝不是一个好主意。编辑：哎呀，我把列表和字典混淆了。字典有一个 iteritems() 和 iterkeys() 方法，当您迭代字典并从中删除项目时，您将使用该方法。

对于列表，如果您想在列表组合中执行此操作，您可能需要复制列表。或者，交替：

```
[None and tmp.pop(0) for i in xrange(len(tmp))] 
```

# c# - 将分隔符应用于串行协议中的字节列表，将一个字节替换为两个

> ID：12924892
> 
> 赞同：0
> 
> 时间：2012-10-16T23:17:43.507
> 
> 标签：c#, .net, list, generics, bytearray

我正在研究串行通信协议。在这个协议中，packt 由字节组成，它应该以 . 开头和结尾`0x7E`。

该协议指示任何被`0x7E`或`0x7D`应该被转义到`0x7D 0x5E`或`0x7d 0x5D`相应地转义的字节。

这是一个示例数据包：

```
7E 40 09 00 BE EF 05 7E 06 01 02 03 04 05 7E 
```

如您所见，`byte[7]`在此数据包中应替换为 2 个字节`0x7D 0x5E`。为此，我编写了以下方法，但无法完成此任务：

```
private List<byte> Finalize(List<byte> packet)
{
    int u = 1; //keep track of end of pack
    //because if escape characters are present
    //end bit will be shifted to right

    //Walk through list and fix escape bytes
    for (int i = 1; i < packet.Count; i++)
    {
        if (packet[i] == 0x7D)
        {
            packet[u] = 0x7D;
            packet[u + 1] = 0x5D;
            u += 2;
        }
        else if (packet[i] == 0x7E) //Sync Byte
        {
            packet[u] = 0x7D;
            packet[u + 1] = 0x5E;
            u += 2;
        }
        else
        {
           packet[u] = packet[i]; //Exception here!!
           u++;
        }
    }

    return packet;
} 
```

该方法抛出一个`ArgumentOutOfRangeException`. 有人可以告诉我可能是什么问题！？我想我实现了一个正确的逻辑，但似乎我没有正确处理索引！

循环从索引 1 开始，因为它是起始字节，不应更改。它也不应该更改列表中的最后一个字节，即 0x7E，即结束字节！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:21:08.150

我建议创建一个新列表，并将数据从原始列表复制到新列表。虽然可能有一些方法可以“就地”进行更新，但简单地创建一个新列表可能更容易。实际上，使用 a`byte[]`而不是`List<byte>`可能会更好，尽管您必须在创建新数组之前计算原始数组中 7D 或 7E 字符的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:38:52.273

首先，当您用值 `0x7D`和`0x7E`. 其次，您的更改`u`速度比`i`产生上述异常的速度要快。当您转义字节时，您将 2 添加到`u`但在循环的该迭代中`for`， i 仅增加。第三，更好的方法肯定是while循环。

要处理第一个问题，您应该向列表中添加更多元素。`Insert`会做到这一点，而不是手动将所有内容向右移动。第二个问题可以通过只使用一个计数器来解决。检查代码：

```
 private List<byte> Finalize(List<byte> packet)
        {
            int i = 1;
            while (i < packet.Count-1)
            {
                if (packet[i] == 0x7D)
                {
                    packet[i] = 0x7D;
                    packet.Insert(i+1, 0x5D);
                    i += 2;
                }
                else if (packet[i] == 0x7E) //Sync Byte
                {
                    packet[i] = 0x7D;
                    packet.Insert(i+1, 0x5E);
                    i += 2;
                }
                else 
                    i++;
            }
            return packet;
       } 
```

另一种解决方案是在方法中创建新列表并为其添加适当的值。 `while (i < packet.Count-1)`是因为我认为您不想逃避结束字节。请记住，列表中的最后一个字节`packet[packet.Count-1]`不是`packet[packet.Count]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:20:24.470

这是一个扩展方法，它转义数据包。它不触及默认的第一个和最后一个字节。

```
public static IEnumerable<byte> Finalize(this IList<byte> packet)
{
    yield return 0x7E;

    for(int i = 1; i < packet.Count - 1; i++)
    {
        if (packet[i] == 0x7E)
        {
            yield return 0x7D;
            yield return 0x5E;
            continue;
        }

        if (packet[i] == 0x7D)
        {
            yield return 0x7D;
            yield return 0x5D;
            continue;
        }

        yield return packet[i];
    }

    yield return 0x7E;
} 
```

用法很简单：

```
byte[] packet = { 0x7E, 0x40, 0x09, 0xEF, 0x05, 0x7E, 0x06, 0x04, 0x05, 0x7E };
byte[] escapedPacket = packet.Finalize().ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:29:40.223

我对 c# 不太熟悉，但看起来你正在覆盖源数据包，并在你进行时破坏它。

另外，List 会自动增长吗？因为你写的超出了它的长度。List 是如何处理的？

循环应该从 1 还是 0 开始？因为您的退出条件是“i < packet.Count”而不是“i <= packet.Count”，它会错过最后一个字节。

# visual-studio - Visual Studio 的 Dart 插件

> ID：12924893
> 
> 赞同：16
> 
> 时间：2012-10-16T23:17:48.357
> 
> 标签：visual-studio, dart

有谁知道是否有 Visual Studio for Dart 的设计器或插件，类似于 Dart 编辑器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-04T17:04:02.610

**编辑**：[Dart Code](https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code)，我的 Visual Studio Code 的 Dart 扩展比我制作的 VS 扩展更完整（包括一个工作调试器和一些颤振集成）。

* * *

原答案：

由于似乎没有其他人这样做，所以我决定尝试一下。它非常不完整，但我已经开始研究扩展：

![Dart Visual Studio 集成](../Images/11ec5863be6846b26469ec41751963a1.png)

[http://visualstudiogallery.msdn.microsoft.com/69112f14-62d0-40fb-9ccc-03e3534e7121](http://visualstudiogallery.msdn.microsoft.com/69112f14-62d0-40fb-9ccc-03e3534e7121)

可在 Visual Studio 中安装的当前版本的 DartVS (v0.6) 非常基础，使用正则表达式进行语法高亮显示，并基于每个文件向 DartAnalyzer 发送错误/警告。这不是很可靠！

新版本的扩展 (v0.8/v1) 正在开发中，它使用 Google 的 Dart 分析服务，速度更快、更可靠，但距离发布还有一段距离:(

下一个版本的计划功能列表可以在 GitHub 上找到：

[https://github.com/DartVS/DartVS/issues?q=is%3Aissue+milestone%3A0.8](https://github.com/DartVS/DartVS/issues?q=is%3Aissue+milestone%3A0.8)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T02:15:38.587

Visual Studio 还没有。

# r - 使用 R 替换字符

> ID：12924894
> 
> 赞同：0
> 
> 时间：2012-10-16T23:17:54.287
> 
> 标签：r

我有一个包含 1 列地址的 csv 文件。它具有以下值：

```
A <- structure(list(Address = structure(1:3, .Label = c("&2340 P St", 
 "&5656 N St", "456 B Street"), class = "factor")), .Names = "Address", 
 row.names = c(NA, 3L), class = "data.frame")
A
##        Address
## 1   &2340 P St
## 2   &5656 N St
## 3 456 B Street 
```

我需要清理数据——如果有“&”，则删除所有字符（或用空格替换）。我在我的 2.csv 文件中期待这个结果：

```
##        Address
## 1 456 B Street 
```

这是代码：

```
 A <-read.csv("U:/161/1.csv", header=T,sep=",")
 B<-gsub("&", " ", A$ADDRESS1, ignore.case = TRUE)
 write.table(B, file = "U:/161/2.csv", sep = ","
 , col.names = NA, qmethod = "double") 
```

它只删除“&”。如何删除地址的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:27:43.133

使用`grep`or`grepl`标识哪些行包含`&`然后排除这些行

```
B <- droplevels(A[!grepl('&', A$Address), ,drop=FALSE])
B
##       Address
## 3 456 B Street 
```

请注意，我将`[`调用包装起来`droplevels`以确保`&`也删除未使用的级别（带有 的级别），因为在这种情况下，结果只会是 1 行，我将`drop=FALSE`其保留`B`为`data.frame`

要使用`grep`（返回索引），您将使用`-`

```
B <- droplevels(A[-grep('&', A$Address), ,drop=FALSE])
B 
```

# c# - UserControl 将表单置于最前面

> ID：12924895
> 
> 赞同：0
> 
> 时间：2012-10-16T23:17:57.030
> 
> 标签：c#, winforms

自定义有没有办法`UserControl`将应用程序的主窗体放在前面？

*基本上，我正在与一些第 3 方库集成，每次我调用它们时，应用程序都会被置于其他所有内容之前。我想让自定义控件请求主窗体将自己重新置于一切之上。*

我曾考虑从主窗体中捕获`Leave`事件，但这似乎不是一个好主意。

程序层次结构...

`MainForm > TabControl > TabPages[] > each as a Custom UserControl`

我宁愿不必让父母或孩子知道对方（除非这是推荐的做法）。我的正常开发是基于 Web 的，因此谁与谁交谈以及 Windows 窗体应用程序的正确设计对我来说仍然是新事物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:25:23.947

你可以试试

```
Application.OpenForms[0].Activate() // or BringToFront() 
```

但请记住，在方法中启动主表单之前，您应该有任何打开的表单`Main`：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
// do not open any forms here
Application.Run(new MainForm()); 
```

如果你真的需要在主表单之前打开一些表单，那么这将是：

```
Application.OpenForms["MainForm"].Activate() 
```

# url-rewriting - 用 nginx 重写所有对 index.php 的请求

> ID：12924896
> 
> 赞同：72
> 
> 时间：2012-10-16T23:17:59.167
> 
> 标签：url-rewriting, nginx

在我的 apache 配置中，我有以下简单的重写规则

1.  除非文件存在将重写为 index.php
2.  在网址上，您永远不会看到文件扩展名 (.php)

如何在 nginx 中重写它？

```
#
# Redirect all to index.php
#
RewriteEngine On

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} (/[^.]*|\.)$ [NC]
RewriteRule .* index.php [L] 
```

这是我的 nginx 服务器块现在的样子，但它不起作用:(

```
root /home/user/www;
index index.php;

# Make site accessible from http://localhost/
server_name some-domain.dev;

###############################################################
# exclude /favicon.ico from logs
location = /favicon.ico {
    log_not_found off;
    access_log off;
}   

##############################################################
# Disable logging for robots.txt
location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
}   

##############################################################
# Deny all attempts to access hidden files such as 
# .htaccess, .htpasswd, .DS_Store (Mac).
location ~ /\. {
    deny all;
    access_log off;
    log_not_found off;
}   

##############################################################
#   
location / { 
    include /etc/nginx/fastcgi_params;
    fastcgi_param   SCRIPT_FILENAME  $document_root/index.php$args;
    fastcgi_pass    127.0.0.1:9000;
}   

###############################################################
# serve static files directly
location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico)$ {
    access_log off;
    expires    30d;
}   

###############################################################
# redirect server error pages to the static page /50x.html
error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root html;
}   

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#   
location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
    # With php5-cgi alone:
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    include fastcgi_params;
} 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-23T13:53:23.480

我已经尝试过了，并成功获得了我的索引页。当我在我的站点配置文件中添加此代码时：

```
location / {
    try_files $uri $uri/ /index.php;
} 
```

在配置文件本身内部解释了这些是配置的步骤

> 首先尝试将请求作为文件，然后作为目录，然后回退到 index.html

就我而言，它是`index.php`，因为我通过 php 代码提供页面。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-02-12T15:15:16.437

要传递 get 变量，请使用`$args`：

```
location / {
    try_files $uri $uri/ /index.php?$args;
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-10-17T09:25:06.360

**1 除非文件存在将重写为 index.php**

将以下内容添加到您的`location ~ \.php$`

```
try_files = $uri @missing; 
```

这将首先尝试提供文件，如果找不到，它将移动到该`@missing`部分。所以还要将以下内容添加到您的配置中（在`location`块外），这将重定向到您的索引页面

```
location @missing {
    rewrite ^ $scheme://$host/index.php permanent;
} 
```

* * *

**2 在您永远看不到文件扩展名 (.php) 的网址上**

要删除 php 扩展，请阅读以下内容： [http ://www.nullis.net/weblog/2011/05/nginx-rewrite-remove-file-extension/](http://www.nullis.net/weblog/2011/05/nginx-rewrite-remove-file-extension/)

以及链接中的示例配置：

```
location / {
    set $page_to_view "/index.php";
    try_files $uri $uri/ @rewrites;
    root   /var/www/site;
    index  index.php index.html index.htm;
}

location ~ \.php$ {
    include /etc/nginx/fastcgi_params;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /var/www/site$page_to_view;
}

# rewrites
location @rewrites {
    if ($uri ~* ^/([a-z]+)$) {
        set $page_to_view "/$1.php";
        rewrite ^/([a-z]+)$ /$1.php last;
    }
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-06-06T11:41:30.870

无需重写的平面和简单配置，在某些情况下可以工作：

```
location / {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /home/webuser/site/index.php;
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-11-23T18:11:01.087

使用 nginx $is_args 而不是 ? 对于 GET 查询字符串

```
location / { try_files $uri $uri/ /index.php$is_args$args; } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-20T14:16:57.527

这是您的第二个问题的答案：

```
 location / {
        rewrite ^/(.*)$ /$1.php last;
} 
```

这对我有用（根据我的经验），意味着你所有的 blabla.php 都将重写为 blabla

像[http://yourwebsite.com/index.php](http://yourwebsite.com/index.php)到[http://yourwebsite.com/index](http://yourwebsite.com/index)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-12T21:12:56.087

以下是我解决这个问题的第 1 部分的方法：

```
 location / {
            rewrite ^([^.]*[^/])$ $1/ permanent;
            try_files $uri $uri/ /index.php =404;
            include fastcgi_params;
            fastcgi_pass php5-fpm-sock;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_intercept_errors on;
    } 
```

**重写 ^([^.]*[^/])$ $1/ 永久；**将非文件地址（没有文件扩展名的地址）重写为末尾有一个“/”。我这样做是因为我遇到了“拒绝访问”。当我尝试在没有它的情况下访问文件夹时出现消息。

**try_files $uri $uri/ /index.php =404;** 是从 SanjuD 的答案中借用的，但如果仍未找到该位置，则需要额外的 404 重新路由。

**fastcgi_index index.php；**是我遗漏的最后一块拼图。如果没有此行，该文件夹不会重新路由到 index.php。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-12T19:18:00.223

如果您只想将 index.php（没有其他 php 文件将传递给 fastcgi）传递给 fastcgi，以防您在像 codeigniter 这样的框架中有这样的路由

```
$route["/download.php"] = "controller/method";

location ~ index\.php$ {
        fastcgi_pass 127.0.0.1:9000;
        include fastcgi.conf;
} 
```

# haskell - 一个非常简单的功能的“功能中的非详尽模式”？

> ID：12924899
> 
> 赞同：-1
> 
> 时间：2012-10-16T23:18:12.147
> 
> 标签：haskell, recursion

你好 stackoverflow 社区，

我有一段相当简单的代码出现了一个奇怪的错误。这是我的代码：

```
multiplyByTwo 0 = 1
myltiplyByTwo x = 2 * multiplyByTwo (x-1) 
```

如您所见，这是简单的递归。我收到“函数 multiplyByTwo 中的非详尽模式”异常。我不明白为什么我会得到这个，因为我已经设置了最低值`multiplyByTwo 0 = 1`，因此我猜该函数在那之后不会调用自己。我的意思是我不明白为什么这种模式是“非详尽的”。我假设您为 x 输入的数字是正数。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T23:20:47.917

您在第二行中有错字：

```
myltiplyByTwo x = 2 * multiplyByTwo (x-1)
 ^ 
```

因此，它定义了一个新函数，并且`multiplyByTwo`只为参数 0 定义。

# javascript - 查找为 div 设置 onclick 事件的位置？

> ID：12924904
> 
> 赞同：1
> 
> 时间：2012-10-16T23:06:01.290
> 
> 标签：javascript, html, css

通过使用网络检查器，我发现了一个

```
<div id="logo"> 
```

当您单击刷新页面时。它是链接标志和图像标志的包含 div。

我不想要这种行为。

我怎样才能知道它被设置在哪里？

这是首页上的主要徽标：

[www.papermepress.com](http://www.papermepress.com)

如果您注意到整个顶部是可点击的。我只希望徽标可点击。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:22:41.060

这不是`<div>`导致您的页面刷新的原因，而是其中`<a>`包含的内容。徽标链接到主页，这是一种普遍的做法。

```
<div id="logo" class="grid_24">
  <a href="http://papermepress.com" title="Paper Me"><img src="http://papermepress.com/wp-content/uploads/2012/10/PMP_logocopy1.png"></a>               
</div> 
```

虽然它的尺寸比父级要小得多，但它的尺寸还是`<div id='logo'>`会`<img>`填满`display: block;`整个`<a>`父级`<div id='logo'>`。如果您删除`display: block;`包含`<a>`将不会扩展以填充整个父级`<div id='logo'>`，并且只有图像区域本身是可点击的。

```
/* in style.css */
#logo img {margin:0 auto; text-align:center; display:block; margin:0 auto;} 
```

# cross-compiling - Boost 构建方法：交叉编译环境中的本地构建工具

> ID：12924905
> 
> 赞同：0
> 
> 时间：2012-10-16T23:19:05.317
> 
> 标签：cross-compiling, boost-build, bjam

我已经将一个使用 boost-build 的项目从 Windows（使用 msvc）移植到 Linux（使用 gcc），现在正在将它进一步移植到交叉编译的 Linux（也使用 gcc）。我想长期支持所有 3 个平台（Windows、本机 Linux、交叉编译的 Linux）。

我已经加入了对交叉编译的基本支持，只需添加一个新的“使用 gcc ...”行。然而，这个项目使用了一些生成代码的构建工具，这些工具在每次构建时都会重新构建——在我目前对交叉编译的基本支持下，这些构建工具是交叉构建的，因此不会在构建机器上运行。简而言之，这些都需要在任何时候都是本地构建的，我不确定如何最好地指定它。这种情况有最佳实践吗？

我当然可以提供有关 Jamfile 组织等的更多详细信息，但我想我会从简短的说明开始；>

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:51:01.397

我要尝试的第一件事是强制使用主机工具集来构建工具，例如

```
exe mytool : mytool.cpp
           : <host-os>linux:<toolset>gcc
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:13:24.527

只是为了结束循环，我还在 boost build 邮件列表上问了这个问题。对我有用的答案是：

[http://article.gmane.org/gmane.comp.lib.boost.build/25469](http://article.gmane.org/gmane.comp.lib.boost.build/25469)

相关问题：一旦完成上述操作，我就遇到了明显是 boost build 中的一个错误，其中静态库传播“太远”。我使用这里的答案解决了第二个问题：

[http://article.gmane.org/gmane.comp.lib.boost.build/25484](http://article.gmane.org/gmane.comp.lib.boost.build/25484)

# facebook - phonegap 2.1.0 facebook connect 插件在初始化时失败！在安卓上

> ID：12924906
> 
> 赞同：3
> 
> 时间：2012-10-16T23:19:06.857
> 
> 标签：facebook, facebook-graph-api, cordova, phonegap-plugins

我下面的代码在 eclipse android 模拟器上运行良好。[但是，当我在https://build.phonegap.com/](https://build.phonegap.com/)上使用 phonegap build 构建一个 android apk并在我难以置信的 2 上打开它时，我收到这个弹出错误“cordova facebook connect plugin fail on init！”

这是我的电话间隙应用程序。你可以下载它。 [https://build.phonegap.com/apps/211586/share](https://build.phonegap.com/apps/211586/share)

我在 git 存储库中的代码在这里

[https://bitbucket.org/sunmeet/phonegab2.0_fbapi](https://bitbucket.org/sunmeet/phonegab2.0_fbapi)

此代码基于davejohnson/phonegap-plugin-facebook-connect上的[https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook)上的 hackbook 示例，并使用 phonegap 2.1.0 运行. 我按照教程中的所有步骤进行操作。

我该如何解决。

# arrays - 将带空格的引用项读入数组

> ID：12924909
> 
> 赞同：3
> 
> 时间：2012-10-16T23:19:53.943
> 
> 标签：arrays, bash

说我有文件`foo.txt`

```
"The" "quick brown" "fox" "jumps over" "the" "lazy dog." 
```

我想将文件中的这些“字段”读入一个数组。但是，如果该字段有空格，我的尝试将失败

```
$ read -a bar < foo.txt

$ echo ${bar[0]}
"The"

$ echo ${bar[1]}
"quick 
```

我已经看到答案建议更改`IFS`，但这是一行，因此似乎无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-27T11:43:21.290

这是一个可以完成这项工作的函数。对于大字符串来说它可能会很慢，但可以很好地完成工作，没有像任意代码执行或路径名扩展这样的警告：

```
#!/bin/bash

parse_quoted_items() {
    # Return array is parse_quoted_items_ary
    local line=$1
    parse_quoted_items_ary=() parse_quoted_items_error=
    while [[ $line ]]; do
        if [[ $line =~ ^[[:space:]]*\"([^\"]*)\"([[:space:]]+.+|)[[:space:]]*$ ]]; then
            parse_quoted_items_ary+=( "${BASH_REMATCH[1]}" )
            line=${BASH_REMATCH[2]}
        else
            parse_quoted_items_error=$line
            return 1
        fi
    done
} 
```

然后你可以用作

```
IFS= read -r line < foo.txt
if parse_quoted_items "$line"; do
    declare -p parse_quoted_items_ary
else
    printf >&2 "There was an error parsing the string at %s\n" "$parse quoted_items_error"
    exit 1
fi 
```

这不是一个令人满意的答案，但我怀疑是否有任何（安全）方法不会显式解析字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-27T13:21:24.570

此解决方案类似于 Håkon Hægland 的：

它还使用 Bash 的[进程替换](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)和[`readarray`/`mapfile`](http://www.gnu.org/software/bash/manual/bashref.html#index-readarray)但 Perl 部分要短一些。

```
readarray -t words < <(cat fox.txt | perl -i -pe 's/(?<=") (?=")/\n/g') 
```

要不就

```
readarray -t words < <( perl -pe 's/(?<=") (?=")/\n/g' fox.txt ) 
```

该行使用 Perl 替换处理，利用后向和前瞻来检测 a`"`后面和另一个 后面的空格`"`。这些空格被换行符替换，以允许`readarray`将每一行读入数组`words`。然后将此多行输出传递给`readarray`,`-t`将在将尾随换行符添加到数组之前将它们去除。

* * *

请注意，在测试这个时，我无法天真地将输出`perl`直接传输到`readarray`，它似乎从未将一行读入数组，因为它是空的。正如@gniourf_gniourf 指出的那样，这与右手程序在子shell 中启动“绑定”在该子shell 中创建的任何变量这一事实有关。

相关资源：

[“我在管道中的循环中设置变量。为什么它们在循环终止后消失？或者，为什么我不能通过管道读取数据？”](http://mywiki.wooledge.org/BashFAQ/024)

有趣的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-27T08:25:26.410

`IFS`不会有帮助的。这有效：

```
eval bah=(`cat foo.txt`) 
```

测试：

```
for i in "${bah[@]}"; do echo $i; done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-27T10:31:57.540

使用 Perl：

```
IFS=$'\n' a=( $(perl -ne '@a = split (/("[^"]*")/); for (my $i=1; $i<@a; $i+=2) { print "$a[$i]\n" }' foo.txt) ) 
```

注意：这将比纯 bash 解决方案慢，因为它必须启动 Perl 解释器。

**更新：**

对于 Bash 4+：要避免`IFS`全局设置：

```
readarray -t a < <(perl -ne '@a = split (/("[^"]*")/); for (my $i=1; $i<@a; $i+=2) { print "$a[$i]\n" }' foo.txt) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-27T06:41:42.410

```
$ . <(sed 's/^/set /' foo.txt)

$ echo $1
The

$ echo $2
quick brown 
```

# php - phpseclib 验证签名失败

> ID：12924911
> 
> 赞同：0
> 
> 时间：2012-10-16T23:19:57.857
> 
> 标签：php, rsa, signature, phpseclib

我不知道我做错了什么，或者我只是没有考虑清楚。我想签署一些文本并在此之后立即进行验证。我正在使用 phpseclib 的 RSA 签名算法。它有效，但现在我想测试如果我更改我之前签署的文本，验证是否失败。它不应该验证文本，因为它与原始文本不同。所以我写了一些代码并测试了10次。算法验证签名 4 次，失败 6 次。这不是很奇怪吗？这是我的代码。基本上我创建了一个公钥/私钥对，并且只使用了 phpseclib 中的函数。

```
<?php
include('Crypt/RSA.php');

$private_key = <<<EOD
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCmGJj20JA2taFPLjnxSuD8sUFwWnVQU7iECgdmmmKy5IDGx4Hv
P4ZxHOVVlqxVnz7lbvxhJahWVmBrHV9vj6w+9khaxo6j4Q7dZvDHt9VhgFyODy8M
V97X8Le2WZuRzINhNziYptGIX9hPbSxl5IEFY7Mcev3NF0IswVtn8+Oy+QIDAQAB
AoGASzST/h1NTxhKY7nAjpqi6Iex45dxyt89irunwjNhQTLphBfNo3CWBR1aUbiZ
a2NhbS0lpS8R25XcrmNsVO0uxdCpVnHwzuQLI61kv9Bu8i1/TpCG8yGGSU4+gi7x
12y943RkNYMqg8X0esupMTx4xhaHlTBt/dhAe7yB9nK1haECQQDQ/P2XcCXkO+lH
cImjhx9BjL8TdXUeZmbsMEmHJM7pqtYEybdjf2zTBqOOmehkczCTeWQD074xFqrW
K707lRLlAkEAy3WTTKFSwjGy2JC+iym+Yp5biYGwsAL3zXj6y0k1BHIWOoc59GrO
tpbUBMXmX7g6g/KZ8VkboW0xtnoyVPU6hQJBALYDgQGBxR6QJ03274kix9AZOtlB
tS0y1nTiYUd4gVT1Wsx0umnHswnfgFdUKBhEUow+byL+KWkrasJ4+aiI3xkCQEPp
K9BxLIF7OzoEHkWvGkgqmV0td79YTkQ8NGH0PokMV5UTm+mUWQkjEQPC1qFuicGP
EYk4d/uKygQhh3lKHU0CQHUmD9ch6POTOnBIt67EhQ8Dt/nIQqnjYOWi+x5xLT0T
zORMLod6pO16USOk1nNk6FtCxlsbQTsaaEZ6xw3WsMQ=
-----END RSA PRIVATE KEY-----
EOD;
$public_key = <<<EOD
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCmGJj20JA2taFPLjnxSuD8sUFw
WnVQU7iECgdmmmKy5IDGx4HvP4ZxHOVVlqxVnz7lbvxhJahWVmBrHV9vj6w+9kha
xo6j4Q7dZvDHt9VhgFyODy8MV97X8Le2WZuRzINhNziYptGIX9hPbSxl5IEFY7Mc
ev3NF0IswVtn8+Oy+QIDAQAB
-----END PUBLIC KEY-----
EOD;

$rsa = new Crypt_RSA();
$rsa->loadKey($private_key);
$plaintext = 'Beer';
$signature = $rsa->sign($plaintext);
$rsa->loadKey($public_key);
$plaintext = '';
var_dump($rsa->verify($plaintext, $signature)); //should always fail but doesn't
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:01:20.533

尝试最新的 Git 版本。应该是这个bug：

[https://github.com/phpseclib/phpseclib/commit/ee25c73a448d24f8658e074e90d8811774678d93](https://github.com/phpseclib/phpseclib/commit/ee25c73a448d24f8658e074e90d8811774678d93)

引用日志，

“- 修复签名验证（感谢 Richard Odekerken！）”。

# objective-c - 如何修改 emo 框架以提供您自己的方法，这些方法将在松鼠语言中可用

> ID：12924917
> 
> 赞同：1
> 
> 时间：2012-10-16T23:20:35.047
> 
> 标签：objective-c

有人可以澄清你必须做什么才能在 emo 框架中创建自己的方法：

例如，我在 emo 框架中创建了一些客观的 C 代码和标头，以使用圆圈。

我将它放入 RootViewController.m 中，它工作正常。它生成一个圆圈，但不是松鼠语言。

如何使 main.nut 文件中的方法作为新的自定义 squirrel 命令可用？

```
emo.circleHide();
emo.circleWhatever();
emo.circleSize(2); 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-12T21:15:44.577

您可以使用插入运算符 (<-) 将自己的函数添加到表和类中。例子：

```
emo.foo <- function(){
    print("Yup");
};

emo.foo(); 
```

# apache-flex - Flex：在浏览器窗口调整大小时重新定向弹出窗口

> ID：12924922
> 
> 赞同：0
> 
> 时间：2012-10-16T23:20:53.327
> 
> 标签：apache-flex, actionscript, popup

我的页脚有一堆选项卡，每个选项卡都会打开一个弹出窗口。但是有一个小故障，一旦打开弹出窗口，如果我调整浏览器的大小，那么我的弹出窗口不会自动调整大小以匹配新的窗口配置。本质上，弹出窗口的尺寸是静态的而不是动态的。

我想消除这个故障，但我不确定如何才能实现这一目标。这就是我配置弹出窗口尺寸的方式。

```
var stagePt:Point = new Point();
popup.x = 80;
popup.y = stagePt.y-(footerPopupContainer.height+15);
popup.drawPointerPopup(stagePt,popup); 
```

实现此目的的一种方法是在调整浏览器窗口大小时使用新尺寸重新绘制弹出窗口。本质上，resize 事件将为上面的弹出窗口设置 x 和 y 属性（即如果它已经打开），然后调用 drawPointerPopup 方法。但这不是一种流畅的方法。

如果上面不是弹窗，而只是一个div，其可见性在点击相应的页脚选项卡时触发或关闭，则不会出现此问题。但我认为这是因为弹出窗口本质上是一个新的浏览器窗口（肯定是 HTML，不确定 Flex）。我当然不能用 div 替换它，因为我正在处理遗留代码。

无论如何，我必须为此找到解决方案。任何线索都非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:44:57.220

我会选择事件选项。

为视图的 resize 事件添加事件监听器。在处理程序中，在弹出窗口上触发一个事件以调整它的大小，或者从将它添加到舞台的类中调整它的大小。

这将是我应该想到的最 mvc 的做法。

# java - 从文件中读取时添加了空格...？

> ID：12924923
> 
> 赞同：0
> 
> 时间：2012-10-16T23:21:01.270
> 
> 标签：java, file, spaces

我正在尝试从项目的文件中读取一个单词及其相应的代码。这是我拥有的代码，它读起来很好，只是出于某种原因，在一些但不是全部代码之后添加了空格。我不明白为什么会这样。

代码是：

```
public void loadDictionary(String file){
    String fileName=file;
    String fileNameTwo=file;
    //Coder c=new Coder();
    String string;
    String code;
    String s=null;
    try{//System.out.println("1");
        FileReader freader=new FileReader(fileName);
        FileReader freaderTwo=new FileReader(fileNameTwo);
        //System.out.println("1");
        BufferedReader inFile=new BufferedReader(freader);
        BufferedReader inFileTwo=new BufferedReader(freaderTwo);
        //System.out.println("2");          
        //System.out.println("3");
        if ((s=inFile.readLine())==null){
            System.out.println("5");
            throw new EmptyFileException("Nothing in file to upload.");
        }
        while ((s=inFileTwo.readLine())!=null){
            //System.out.println("4");
            //System.out.println(s);
            String[] tokens=s.split(" ");
            string=tokens[0];
            //System.out.println(string);
            code=tokens[1];
            //System.out.println(code);
            this.insert(string, code); 
            System.out.println(code+".");               
        }//end while
        //this.printCoder();
    }//end try
    catch(EmptyFileException ex){
    }
    catch(IOException ex){
    System.out.println("Error in uploading dictionary.");
    }   

}//end method 
```

...并且输出是（代码的）：

```
 5721.
 9963.
 4432   .
 1143   .
 6402   .
 3333   .
 4924       .
 1429       .
 3110   .
 3036   .
 2736   .
 8064. 
```

句点用于显示添加了多少空格。我只是在 system.out.println() 中添加了句点。

编辑：月经不是很正确......但你明白了。有时确实比它显示的更多/更少的空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:28:01.243

我的猜测是该文件的空格/制表符比您想象的要多-您遇到的空格实际上是制表符。

一般来说，如果要根据空格进行拆分，则应包括所有空格，甚至是制表符。

重试拆分：

```
String[] tokens=s.split("\\s+"); 
```

它将根据正则表达式进行拆分`"\\s+"`-这意味着至少（可能更多）某种空间。

# apache-flex - 设置数据网格中单元格的背景颜色

> ID：12924932
> 
> 赞同：0
> 
> 时间：2012-10-16T23:21:45.420
> 
> 标签：apache-flex, advanceddatagrid

如何在数据网格中设置特定单元格的背景颜色。我通过项目渲染器尝试过。但是项目渲染器的问题是，直到数据没有填充到数据网格中，背景颜色才会起作用。即使数据网格中没有数据，我也希望突出显示单元格或单元格集。

请在下面找到我的代码：

MAin.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="onComplete()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import flashx.textLayout.formats.BackgroundColor;

            import mx.controls.advancedDataGridClasses.AdvancedDataGridColumn;
            private var dataArr:Array=new Array({data1:"Value"},{data1:"Value"},{data1:"Value"},{data1:"Value"},{data1:"Value"},{data1:"Value"})
            private function onComplete():void{
                var colsArr:Array=new Array();
                var column1:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column1.headerText="Header1";
                //column1.setStyle("backgroundColor","0xcccccc");
                column1.dataField="data1";
                colsArr.push(column1);
                var column2:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column2.headerText="Header2";
                //column2.setStyle("backgroundColor","0xcccccc");
                column2.dataField="data2";
                colsArr.push(column2);
                var column3:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column3.headerText="Header3";
                //column3.setStyle("backgroundColor","0xcccccc");
                column3.dataField="data3";
                colsArr.push(column3);
                var column4:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column4.headerText="Header4";
                //column4.setStyle("backgroundColor","0xcccccc");
                column4.dataField="data4";
                colsArr.push(column4);
                var column5:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column5.headerText="Header5";
                column5.dataField="data5";
                colsArr.push(column5);
                var column6:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column6.headerText="Header6";
                column6.dataField="data6";
                colsArr.push(column6);
                var column7:AdvancedDataGridColumn=new AdvancedDataGridColumn();
                column7.headerText="Header7";
                column7.dataField="data7";
                colsArr.push(column7);
                sampleDG.columns=colsArr;
                sampleDG.rowCount=colsArr.length;
            }
            private function myStyleFunction(data:Object, col:AdvancedDataGridColumn):Object{
                if(col.headerText=="Header1" || col.headerText=="Header2" || col.headerText=="Header3"){
                    return {backgroundColor:0xcccccc, color:0xff0000};
                }else{
                    return {backgroundColor:0xffffff, color:0xff0000};
                }
                return {};
            }
        ]]>
    </fx:Script>
    <mx:AdvancedDataGrid id="sampleDG" rowCount="3" width="350" horizontalScrollPolicy="on" height="300"
                         cachePolicy="on"  styleFunction="myStyleFunction" itemRenderer="com.ADGItemRenderer"/>
</s:Application> 
```

ADGItemRenderer：

```
package com.ssc.pna.secmaster.renderer
{
    import com.ssc.pna.components.MktDGColumn;

    import mx.charts.styles.HaloDefaults;
    import mx.controls.advancedDataGridClasses.AdvancedDataGridItemRenderer;
    import mx.controls.advancedDataGridClasses.AdvancedDataGridListData;
    import mx.controls.listClasses.BaseListData;
    import mx.styles.CSSStyleDeclaration;
    import mx.styles.IStyleManager2;
    import mx.styles.StyleManager;

    [Style(name="rowColor", type="uint", format="Color", inherit="yes")] 

    public class ADGItemRenderer extends AdvancedDataGridItemRenderer
    {

        /**
         *  @private
         */
        public var dataType:Object; 
        public var precision:Object;
        private static var stylesInited:Boolean = initStyles();

        /**
         *  @private
         */
        private static function initStyles():Boolean
        {
            return true;
        }

        public function ADGItemRenderer()
        {
            super();
            background = true;
            backgroundColor=0xFFFFCC;
        }

        override public function validateNow():void
        {
            //listData=listData;
             var _listDataDummy:BaseListData=listData;

            backgroundColor = 0xFFFFCC;

            super.validateNow();
        }

    }
} 
```

即使没有数据，我也想更改前三列中所有单元格的背景颜色（正如我在上面的代码中尝试的那样）。最初我尝试使用 SetStyle 在列级别设置颜色，但遇到了一些问题。所以想改变方法。下面的链接将为您提供有关该问题的详细信息：

[flex中的datagrid提前水平滚动时背景颜色消失](https://stackoverflow.com/questions/12847099/background-color-disappears-when-scrolling-horizontally-in-advance-datagrid-in-f)

# asp.net-mvc - ASP.NET MVC 4 和使用 CodeFirst 动态更改成员资格连接字符串

> ID：12924933
> 
> 赞同：1
> 
> 时间：2012-10-16T23:22:01.463
> 
> 标签：asp.net-mvc, custom-membershipprovider

我正在创建一个 MVC4 多租户站点，该站点为每个租户使用单独的数据库，并且一直试图让会员资格为每个租户工作，但没有任何运气。

出于某种原因，无论我做什么，connectionStringField 始终为空。任何想法为什么会发生这种情况？

```
public class CodeFirstMembershipProvider : MembershipProvider
    {    
      public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)  
      { 
          base.Initialize(name, config);  

          // hard coded for testing  
          string connectionString = @"server=localhost;database=masterdb;uid=master;pwd=password";

          // Set private property of Membership provider.  
          FieldInfo connectionStringField = GetType().BaseType.GetField("_sqlConnectionString", BindingFlags.Instance | BindingFlags.NonPublic);  
          if(connectionStringField != null)
            connectionStringField.SetValue(this, connectionString);  
      }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T01:49:04.350

你不能让这个工作。即使你能弄清楚如何让反射以你想要的方式发挥作用。这将导致不稳定和意想不到的结果。

原因是 Membership Provider 是一个全局静态的单个实例，用于所有并发用户。这意味着如果您更改一个用户的连接字符串，它会更改所有用户的连接字符串。更糟糕的是，您可能会对其进行更改，然后将上下文切换到另一个用户，并且他们可能会覆盖该更改，然后返回并且应用程序未处于它认为的状态。

内置的会员系统并非旨在在运行时更改其内部数据。它旨在为多个应用程序使用单个数据库。

如果您坚持为每个租户使用单独的数据库，那么您将不得不实现自己的身份验证系统，因为成员资格在您希望的情况下根本无法工作。起初它可能看起来有效，但随着您的网站获得更多并发用户，它是一个定时炸弹，等待在您的脸上爆炸。

# string - 随机字符串的单独数据库？

> ID：12924935
> 
> 赞同：0
> 
> 时间：2012-10-16T23:22:11.357
> 
> 标签：string, random, uniqueidentifier

当用户在我的网站上创建订单时，订单需要一个在应用程序中应该是唯一的代码。我不想使用 GUID，因为它们又长又笨拙——我只想要一个由八个字符或其他字符组成的字母数字代码。

我认为最好预先生成这些代码，以便在运行时代码不会卡在寻找独特的东西。

此外，我正在考虑将这些代码放入一个单独的数据库中，以便备份和移动我的主数据库不涉及对数兆字节的随机字符串进行改组 - 使用的值将被复制到主数据库的订单表中。

这听起来是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:49:51.680

不需要数据库。加密将为您提供一组随机的唯一数字。DES 使用 64 位块，因此通过加密 0、1、2、3...，您将获得一组随机出现的 64 位数字。

没有 32 位块大小的标准密码，但您可以自己编写一个简单的[Feistel 密码](http://en.wikipedia.org/wiki/Feistel_cipher)（见下文）或使用具有可变块大小的 Hasty Pudding 密码。

```
/**
 * IntegerPerm is a reversible keyed permutation of the integers.
 * This class is not cryptographically secure as the F function
 * is too simple and there are not enough rounds.
 *
 * @author rossum
 */
public final class IntegerPerm {
    //////////////////
    // Private Data //
    //////////////////

    /** Non-zero default key, from www.random.org */
    private final static int DEFAULT_KEY = 0x6CFB18E2;

    private final static int LOW_16_MASK = 0xFFFF;
    private final static int HALF_SHIFT = 16;
    private final static int NUM_ROUNDS = 4;

    /** Permutation key */
    private int mKey;

    /** Round key schedule */
    private int[] mRoundKeys = new int[NUM_ROUNDS];

    //////////////////
    // Constructors //
    //////////////////
    public IntegerPerm() { this(DEFAULT_KEY); }

    public IntegerPerm(int key) { setKey(key); }

    ////////////////////
    // Public Methods //
    ////////////////////
    /** Sets a new value for the key and key schedule. */
    public void setKey(int newKey) {
        assert (NUM_ROUNDS == 4) : "NUM_ROUNDS is not 4";
        mKey = newKey;

        mRoundKeys[0] = mKey & LOW_16_MASK;
        mRoundKeys[1] = ~(mKey & LOW_16_MASK);
        mRoundKeys[2] = mKey >>> HALF_SHIFT;
        mRoundKeys[3] = ~(mKey >>> HALF_SHIFT);
    } // end setKey()

    /** Returns the current value of the key. */
    public int getKey() { return mKey; }

    /**
     * Calculates the enciphered (i.e. permuted) value of the given integer
     * under the current key.
     *
     * @param plain the integer to encipher.
     *
     * @return the enciphered (permuted) value.
     */
    public int encipher(int plain) {
        // 1 Split into two halves.
        int rhs = plain & LOW_16_MASK;
        int lhs = plain >>> HALF_SHIFT;

        // 2 Do NUM_ROUNDS simple Feistel rounds.
        for (int i = 0; i < NUM_ROUNDS; ++i) {
            if (i > 0) {
                // Swap lhs <-> rhs
                final int temp = lhs;
                lhs = rhs;
                rhs = temp;
            } // end if
            // Apply Feistel round function F().
            rhs ^= F(lhs, i);
        } // end for

        // 3 Recombine the two halves and return.
        return (lhs << HALF_SHIFT) + (rhs & LOW_16_MASK);
    } // end encipher()

    /**
     * Calculates the deciphered (i.e. inverse permuted) value of the given
     * integer under the current key.
     *
     * @param cypher the integer to decipher.
     *
     * @return the deciphered (inverse permuted) value.
     */
    public int decipher(int cypher) {
        // 1 Split into two halves.
        int rhs = cypher & LOW_16_MASK;
        int lhs = cypher >>> HALF_SHIFT;

        // 2 Do NUM_ROUNDS simple Feistel rounds.
        for (int i = 0; i < NUM_ROUNDS; ++i) {
            if (i > 0) {
                // Swap lhs <-> rhs
                final int temp = lhs;
                lhs = rhs;
                rhs = temp;
            } // end if
            // Apply Feistel round function F().
            rhs ^= F(lhs, NUM_ROUNDS - 1 - i);
        } // end for

        // 4 Recombine the two halves and return.
        return (lhs << HALF_SHIFT) + (rhs & LOW_16_MASK);
    } // end decipher()

    /////////////////////
    // Private Methods //
    /////////////////////

    // The F function for the Feistel rounds.
    private int F(int num, int round) {
        // XOR with round key.
        num ^= mRoundKeys[round];
        // Square, then XOR the high and low parts.
        num *= num;
        return (num >>> HALF_SHIFT) ^ (num & LOW_16_MASK);
    } // end F()

} // end class IntegerPerm 
```

# jquery - 如何用 span id 替换点击功能

> ID：12924938
> 
> 赞同：2
> 
> 时间：2012-10-16T23:22:28.140
> 
> 标签：jquery

我正在开发一个 jquery 下拉菜单。[（在这里](http://www.filamentgroup.com/examples/menus/flyout.php)演示）

而我需要做的是获得用户选择的完整路径，并验证没有更多的选项可供选择。最初的想法（在下拉菜单之前，只有常规的 li/ul）是用这个[小提琴完成的](http://jsfiddle.net/q6yDe/588/)

如您所见，有验证和完整路径变量供以后使用。

现在，我想要实现的与下拉菜单相同。

这是我根据下拉菜单用用户选择填充标签的代码。

```
<asp:Label ID="LabelMenu" text="" runat="server" /> <span id="menuSelection"></span> 
```

如您所见，span id`menuSelection`是得到结果的那个。

所以我的问题是。如何替换`click`小提琴上显示的功能以获得`menuSelection`结果？

目标是在用户从下拉菜单中选择一个字段后获得完整路径和验证

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:16:31.850

我可能误解了你，但这至少会给你一个想法。

资源：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script> 
```

html:

```
<label id="LabelMenu" text="" runat="server" />
<span id="menuSelection">My Span List</span> 
```

jQuery：

```
$(document).ready(function(){
    // Flag to prevent multiple insertion
    var flag = false;
    $("#menuSelection").click(function() {
        // Prevent inserting more than 1 menu
        if (flag == false) {
            // Your menu
            $('<ul id="mylist"> <li><a href="#">First Level 1</a> <ul> <li><a href="#">FL1 Second Level 1</a></li> <li><a href="#">FL1 Second Level 2</a></li> </ul> </li> <li><a href="#">First Level 2</a> <ul> <li><a href="#">FL2 Second Level 1</a> <ul> <li><a href="#">FL2 SL1 Third Level 1</a></li> </ul> </li> <li><a href="#">FL2 Second Level 2</a> <ul> <li><a href="#">FL2 SL2 Third Level 1</a></li> </ul> </li> <li><a href="#">FL2 Second Level 3</a></li> </ul> </li> <li><a href="#">First Level 3</a> <ul> <li><a href="#">FL3 Second Level 1</a> <ul> <li><a href="#">FL3 SL1 Third Level 1</a></li> <li><a href="#">FL3 SL1 Third Level 2</a></li> </ul> </li> <li><a href="#">FL3 Second Level 2</a></li> <li><a href="#">FL3 Second Level 3</a> <ul> <li><a href="#">FL3 SL3 Third Level 1</a></li> </ul> </li> </ul> </li> <li><a href="#">First Level 4</a> </li> </ul>'
             ).insertAfter($(this)).menu().focus().focusout(function() {
                // When out of menu remove this instance
                $(this).empty().remove();
                // Flag false again
                flag = false;
            });
            // Find which menu item is clicked
            $('#mylist a').click(function() {
                var route=$(this).parent().text();
                if($(this).next().length==0){
                    alert('no more levels');
                    alert(route);
                    $('#LabelMenu').text(route);
                }else{
                    alert(route);
                    $('#LabelMenu').text($(this).text());
                }
            });
        }
        // Change flag on click
        flag = true;
    });
}); 
```

小提琴：http: [//jsfiddle.net/BerkerYuceer/gp6H5/](http://jsfiddle.net/BerkerYuceer/gp6H5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:25:25.057

您可以使用**更改**事件而不是**单击**

```
$("select").on('change' , function() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:26:14.423

```
$('element.selector').on('click', function(event) {    
      event.preventDefault();
      // your logic
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T06:38:20.707

可以在您的插件文件中进行更改有功能 this.chooseItem 他们你可以写你的东西

```
 this.chooseItem = function(item){
    menu.kill();

    //your custom code should go here:

    $('#menuSelection').text($(item).text());   
    location.href = $(item).attr('href');
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:54:39.757

有没有一种方法可以为所有级别的菜单项分配 ID。如果是这样，这些 ID 可以是渐进的。即在主菜单中，ID 可以是 1、2、3、4、5、6。如果 3,4,5 进一步扩展，则子菜单可以包含 (3_1, 3_2, 3_3)、(4_1, 4_2) 等条目。

这样，当您最终选择一个元素时，您可以使用 ID 获取从您遍历到此选项的完整限定路径。

这只有在你能以某种方式将 id 推送到所有 li 元素时才会奏效。

# php - 如何找到数组的最后一个元素

> ID：12924941
> 
> 赞同：0
> 
> 时间：2012-10-16T23:22:43.127
> 
> 标签：php

我正在尝试使用 foreach 循环查找数组中的最后一个元素。

我有..

```
 foreach ( $employees as $employee ) {

         $html.=$employee ->name.'and ';

  } 
```

我不想在最后一位员工中添加“和”。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T23:24:21.603

我想还有另一种方法：

```
$html = implode(' and ', 
  array_map(function($el) { return $el->name; }, $employees)); 
```

这很简单：[**array_map**](http://php.net/manual/en/function.array-map.php)将创建一个元素数组`$employee->name`，并且[**implode**](http://php.net/manual/en/function.implode.php)将从这些元素中创建一个字符串，使用`' and '`字符串作为“胶水”。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T23:26:17.393

比在你的 foreach 中有一个计数器更干净的方法可能是简单地从你的字符串中删除最后的“和”。

```
foreach ($employees as $employee) {
    $html .= $employee->name . 'and ';
}
$html = substr($html, 0, strlen($html) - 4); 
```

# chef-infra - 一个厨师服务器实例可以管理多少个节点？

> ID：12924946
> 
> 赞同：3
> 
> 时间：2012-10-16T23:23:35.277
> 
> 标签：chef-infra

我正在配置厨师服务器，并希望通过该服务器管理 500 多个节点 - 可能接近 1000 个。我可以期望在 EC2 上的超大型实例上有效地工作吗？我应该考虑在不同的服务器上运行rabbitmq、solr 等吗？是否可以在分布式设置中运行厨师服务器本身？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T05:05:03.360

*更新*

Chef 11 于今年早些时候发布。与该版本一起发布的还有一些新闻稿/案例研究，供 Opscode 合作进行可扩展性测试的公司使用。值得注意的是，Facebook 和 Cycle Computing 使用单个 Chef 服务器管理 10,000 多个节点集群。Chef Server 的规格适中，但未公开。更多信息可在此处获得：

*   [大厨11公告](http://www.opscode.com/blog/2013/02/04/chef-11-released/)
*   [脸书公告](http://www.opscode.com/blog/2013/02/04/facebook-likes-opscode-and-private-chef/)
*   [菲尔·迪博维茨，Facebook，聚光灯](http://youtu.be/YA8p65qcD0I)
*   [Phil 在 ChefConf 的演讲](http://www.youtube.com/watch?v=SYZ2GzYAw_Q)
*   [循环计算案例研究](http://www.opscode.com/customers/cycle-computing/)

需要注意的是，这适用于 Open Source Chef Server 和 Enterprise Chef。Opscode 的托管企业厨师服务本质上是一个巨大的企业厨师实例，因为它运行基本“相同”的代码库。

（不*完全相同*，因为 Opscode 具有运行允许多个客户付费和使用的可公开访问的 SaaS 平台所需的自定义和附加服务。）

Chef Wiki 上的这个页面有很多很好的链接和信息：

*   [http://wiki.opscode.com/display/chef/Scalability+and+High+Availability](http://wiki.opscode.com/display/chef/Scalability+and+High+Availability)

需要考虑的几点：

1.  重要的指标不是节点数，而是随着时间的推移收敛的节点数。例如，每天运行一次 Chef 的 500 个节点在服务器上的负载低于每 10 分钟运行一次 Chef 的 50 个节点。当然，每 10 分钟（甚至 30 分钟，一个常见的间隔时间）运行 Chef 的 500 个节点对系统来说是很大的负载。

2.  Chef Server 被设计为分布式系统，因此组件可以在单独的节点上运行。这正是[Opscode Hosted Chef](http://www.opscode.com/enterprise-chef)和[Opscode Private Chef](http://www.opscode.com/enterprise-chef)的工作方式——各种服务在不同的系统上运行以分配负载。如果您期望有很多节点经常运行 Chef，那么您绝对应该在单独的系统上运行这些服务。wiki 上的[Chef 配置设置](http://docs.opscode.com/config.html)页面描述了服务的配置选项。

3.  高可用性和可扩展性不是一回事，需要不同的方法。它们之间的差异完全超出了 Chef 的范围。不过，“[可扩展性和高可用性](http://wiki.opscode.com/display/chef/Scalability+and+High+Availability)”页面应该会有所帮助。

4.  Chef 10.x 或 0.10.x 版本使用基于 Ruby 的 API 服务，并将 CouchDB 作为后端数据存储。在 Hosted Chef 的规模上，Opscode 发现了可扩展性问题，这在[Seth Falcon 在 ChefConf 2012 的演讲中有所](http://www.youtube.com/watch?v=FRFekZrLNas)描述。虽然该演讲主要是关于客户数据的真棒实时迁移，但有几点关于 CouchDB 的可伸缩性。此外，[Chef 11 将迁移到基于 Erlang 的 API 服务](http://www.opscode.com/blog/2012/08/31/test-drive-the-chef-11-server-preview/)，并将 SQL（MySQL*或*PostgreSQL）作为后端数据存储。

5.  *更新*Open Source Chef Server 的 Chef 11 版本需要完全重写 Erlang 中的服务器 API 服务，如前所述。此答案顶部的信息通过案例研究和会谈，让您更深入地了解这一切的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:55:19.443

@jtimberman 总结得很好，您确实可以通过将 Chef 服务拆分到多个单独的节点并投入更多资源来将事情扩展到某个点。

通过数据点，我看到大约 700 个客户端由单个（开源）Chef 10.x 服务器管理，solr 和 couchdb 在不同的节点上。

# c - 如何判断套接字是否关闭

> ID：12924948
> 
> 赞同：2
> 
> 时间：2012-10-16T23:23:45.000
> 
> 标签：c, winapi, sockets

我有一个简单的客户端服务器程序，但主要问题是一旦客户端和服务器之间建立连接，如果客户端关闭程序，服务器会重复执行最后一条消息，有时会产生巨大的问题。所以我想要的是，如果我可以调用任何函数来获取 SOCKET 结构的状态，那么如果客户端关闭程序，服务器就会知道停止。我只需要从函数中查找坏套接字的函数。顺便说一句，我正在用 Win32 c 编写这个程序。我试过 if(mySocket==SOCKET_ERROR) 似乎没有用......除非我用错了。我刚开始联网。

```
if(!sockServer.RecvData( recMessage, STRLEN )){return 0;}
// where
bool Socket::RecvData( char *buffer, int size )
{
    int i = recv( mySocket, buffer, size, 0 );
    if(!i){return false;}
    buffer[i] = '\0';
    return true;
}  //this isn't working 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:31:52.817

如果对等端关闭套接字，`read()`并且`recv()`将返回零。您必须忽略如果“服务器重复执行最后一条消息”，这当然会“产生巨大的问题”，而不仅仅是“有时”而是*总是*。

**编辑 1：**您还犯了另一个基本的 TCP 编程错误：您假设您在一次读取中收到了整个消息。TCP 中没有消息，它只是一个字节流，写入和读取（`send()`和`recv()`）之间没有 1::1 的对应关系。`recv()`可以返回零或少至 1 个字节。您必须组织自己的消息边界，并且必须循环直到收到可以处理的完整消息。

**编辑 2：**您还忽略了接收方法中的所有错误。您必须寻找`recv()`返回 -1`，而不是继续处理您尝试读取的数据的逻辑。至少您应该调用 perror() 或检查 errno 或 Winsock 等效项。

当您收到错误或 EOS 时，您必须停止循环、关闭套接字、忘记连接并忘记此客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:45:49.280

在主消息过程中监听 FD_CLOSE 怎么样？您正在使用带有 FD_CLOSE 的 WSAAsyncSelect 吗？

# c - 带有类型转换的令人讨厌的指针数组，Invalid Initializer 错误

> ID：12924950
> 
> 赞同：1
> 
> 时间：2012-10-16T23:24:10.077
> 
> 标签：c, arrays, pointers, casting

```
volatile uint32_t * sdramData = (volatile uint32_t *)0x30000100;

#define WIDTH  800

volatile uint32_t * im[WIDTH/4] = (volatile uint32_t **)sdramData; 
```

第三行是给我一个错误的行。我正在尝试创建一个从 sdramData 位置开始的 int 指针数组。它说无效的初始化程序错误。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:31:10.277

初始化符号需要用大括号括起来，大括号中的值必须是常量：

```
volatile uint32_t * im[WIDTH/4] = { sdramData }; 
```

`sdramData`如果数组的第一个元素是一个常量（它不在术语的含义范围内），这将初始化数组的第一个元素，并将其他元素保持为零。

如果你真的想要 200 个连续的 4 字节位置（对此我有疑问 - 见下文），你将不得不产生 200 个值来初始化列表（因为标准 C 仍然没有重复计数选项对于数组初始值设定项，遗憾的是——作为扩展，GCC 确实如此）。

```
#define SDRAMBASE 0x30000100

#define INIT_x(x)  (SDRAMBASE + (x) * sizeof(uint32_t))
#define INIT_5(x)  INIT_x(x+0), INIT_x(x+1), INIT_x(x+2), INIT_x(x+3), INIT_x(x+4)
#define INIT_10(x) INIT_5(x+0), INIT_5(x+5)
#define INIT_50(x) INIT_10(x+0), INIT_10(x+10), INIT_10(x+20), INIT_10(x+30), INIT_10(x+40)

volatile uint32_t *im[WIDTH/4] =
{
    INIT_50(  0),
    INIT_50( 50),
    INIT_50(100),
    INIT_50(150),
}; 
```

不漂亮，但节省了很多打字。如果需要，您可以在扩展中插入`(volatile uint32_t *)`演员表`INIT_x`——您可能会这样做。

* * *

### 另一种解释

另一方面，您可能可以编写一个表达式，只使用 SDRAMBASE 来完成没有数组的工作`im`：

```
#define im_ARRAY(i)  (*(volatile uint32_t *)(SDRAMBASE + (i) * sizeof(uint32_t))) 
```

现在你可以写（圆括号而不是方括号）：

```
uint32_t x = im_ARRAY(43); 
```

代替：

```
uint32_t x = im[43]; 
```

事实上，你甚至可以使用：

```
#define im_ARRAY   ((volatile uint32_t *)SDRAMBASE) 
```

然后你可以写（像往常一样的方括号）：

```
uint32_t x = im_ARRAY[43]; 
```

这看起来更符合预期的效果。仍然不完全好，但相对干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:10:30.657

您所追求的可能是：

```
volatile uint32_t (*im)[4] = (volatile uint32_t (*)[4])sdramData; 
```

如果`sdramData`至少指向`WIDTH`uint32_t 值，那么这将进行`im[0..WIDTH/4 - 1][0..3]`有效访问。

# php - 在我的网站上开发类似按钮，而不是添加 Facebook 类似按钮

> ID：12924957
> 
> 赞同：0
> 
> 时间：2012-10-16T23:24:31.933
> 
> 标签：php, javascript, mysql, ajax

如何在我的网站上开发一个赞按钮？这种类似按钮如何在不连接数据库并编写查询以返回结果的情况下工作？我不想在我的网站中添加 Facebook 赞按钮。我想知道怎么开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:27:17.050

您必须以某种方式存储这些信息，最好的方法是数据库。您可以让按钮增加数据库值，然后在页面加载时读取它以获取当前的“喜欢”数。除非您希望它只是通知您，否则我想您可以将`mail()`其交给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:58:09.553

虽然我不确定您为什么要在单个会话中为单个用户执行类似的操作，但您可以创建[一个简单的 click counter](http://jsfiddle.net/crowjonah/2EqtN/)。

我使用 jQuery 和 Bootstrap 让它变得闪亮，我做得很简单，就像这样：

```
<button class="btn" rel="tooltip" title="" id="likes" data-placement="right">Like<i class="icon-thumbs-up"></i></button>​ 
```

和

```
$(document).ready(function(){
    var likeCount = 0;
    $('#likes').click(function(){
    likeCount++;
    console.log(likeCount);
    $(this).attr('data-original-title',likeCount).tooltip({'trigger' : 'click'}).tooltip('show');
    });
}); 
```

如果你想跳过数据库的事情，你也可以使用[jQuery cookie](https://github.com/carhartl/jquery-cookie)来跨多个会话存储局部变量。

这将涉及一个稍微棘手的可变舞蹈，我做得不是超级有效，但它完成了工作：http: [//jsfiddle.net/crowjonah/wyU59/](http://jsfiddle.net/crowjonah/wyU59/)

相同的 HTML 标记，不同的脚本：

```
$(document).ready(function(){
    $.cookie('likeCountCookie', likeCount);
    var cookieCount = $.cookie('likeCountCookie');
    $('#likes').attr('data-original-title',cookieCount).tooltip({'trigger' : 'click'}).tooltip('show');
    if (cookieCount){
        var likeCount = cookieCount;
    }
    else {
        var likeCount = 0;
    }

    $('#likes').click(function(){
        likeCount++;
        $.cookie('likeCountCookie', likeCount);
        $(this).attr('data-original-title',likeCount).tooltip({'trigger' : 'click'}).tooltip('show');
    });
});

​ 
```

# iphone - iOS - 结果之间的差异

> ID：12924959
> 
> 赞同：0
> 
> 时间：2012-10-16T23:24:44.443
> 
> 标签：iphone, ios, ipad

我在两个必须相同的值之间存在这种差异......

```
#define degreesToRadian(x) (M_PI * x / 180.0f)

... 
CGFloat angle = -3.0f;
CGFloat beta = degreesToRadian(90.0f - fabsf(angle));

CGFloat delta = (90.0f - fabsf(angle)) * M_PI /180.0f; 
```

此时我得到 beta = 282.72 和 delta = 1.51 ？

两个值必须相同！

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:27:34.817

您的宏已损坏 - 更改：

```
#define degreesToRadian(x) (M_PI * x / 180.0f) 
```

到：

```
#define degreesToRadian(x) (M_PI * (x) / 180.0f) 
```

**注意**：这是为什么你不应该使用预处理器来处理这类事情的另一个例子。C 和 Objective C 已经有 20 年的内联函数了——你应该利用它们。

# multithreading - 计时器使 UI 无响应？

> ID：12924960
> 
> 赞同：1
> 
> 时间：2012-10-16T23:24:47.907
> 
> 标签：multithreading, performance, qt, timer, signals

我使用计时器发出信号并调用槽函数，该函数根据新数据更新 UI。

我计算出运行该功能的时间很短。当计时器设置为 1000 毫秒时，UI 响应很慢。

我试图将该功能移动到一个线程，但我发现它很困难，因为很多功能需要访问 UI 类的受保护值。

我将尝试将计时器移动到另一个线程并将更新功能保留在 UI 类（主窗口）中，但我不知道它是否会有所帮助。

为什么计时器会导致 UI 变慢且无响应？线程会更轻，消耗更少的 CPU 时间吗？我怎样才能解决这个问题？

```
 initTimer()
    {
        refreshTimer = new QTimer(this);
        connect(refreshTimer, SIGNAL(timeout()), this, SLOT(refreshDisplay));
        refreshTimer->start(1000);
    } 
```

每 1000 毫秒调用一次刷新槽函数：

```
 void refreshDisplay()
    {
        ui->tableWidget->setUpdatesEnabled(false);

        for(int queue_i = size_1, index = 0; queue_i >= 0; queue_i--, index++)
        {
            LogInfoItem* logItem = (LogInfoItem*)logDisplayQueue.at(queue_i);

            QString BITS_str = bits2Hexs(logItem->BITS);

            ui->tableWidget->item(index, 0)->setText(logItem->time);//time
            ui->tableWidget->item(index, 1)->setText(logItem->name);//name
            ui->tableWidget->item(index, 2)->setText(BITS_str);//BITS

            if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);
        }

        ui->tableWidget->setUpdatesEnabled(true);

        Q_FOREACH(Page* p, PageInfoList)
        {
            p->refresh();
        }

        Q_FOREACH(IconLabel* icl, iconLabelList)
        {
            icl->refresh();
        }
    } 
```

'refresh()' 所做的只是根据里面的数据改变 ui 中的图标和文本。此外，我已将数据设为静态，但仍无法修复它。（我已经测试过功能，几乎不费时间......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:43:19.627

谢谢，我用了你的方法，终于找到了cpu Eater，就是setIcon函数。我在它之前添加了一个 if 语句，如果数据没有改变，就不会调用它。谢谢大家！

# regex - Perl Regex 将字符串转换为十六进制 警告未初始化值或使用 /x

> ID：12924966
> 
> 赞同：4
> 
> 时间：2012-10-16T23:25:34.490
> 
> 标签：regex, perl, perl-critic

我在 perl 中使用正则表达式将字符串转换为十六进制，但是，当我这样做时，我会收到来自 perl 评论家或 perl 的警告：

```
#$test is defined, i just put the regex code snippet here...
#this will trigger a warning from perl critic
#warning: use of regex expression without "/x" expression..
$text =~  s/(.)/sprintf("%x",ord($1))/eg;

#this will trigger a a warning at run time 
#warning: "uninitialized value $1 in regexp compilation"
$text =~   m{s/(.)/sprintf("%x",ord($1))/eg}x; 
```

有没有办法编写上述代码而不会从 Perl 评论家那里得到警告或反馈？

我认为问题在于 ord 正在处理未定义的值，并且当您输入 /x 时，检查正则表达式会认为 $1 的值是无效的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T00:30:41.473

这个批评者就是所谓的误报。这里没有必要或理由`/x`。如果你试图让每一个批评者保持沉默，你最终会得到奇怪的代码。也就是说，评论家在推荐

```
s/(.)/sprintf("%x",ord($1))/exg 
```

此外，避免转换换行符可能没有意义。如果是这样，您也想使用`/s`。

```
s/(.)/sprintf("%x",ord($1))/sexg 
```

# networking - Netty：检测发送的数据是否被客户端接收到

> ID：12924967
> 
> 赞同：0
> 
> 时间：2012-10-16T23:25:50.740
> 
> 标签：networking, tcp, netty, nio

> **可能重复：**
> [如何从服务器获取客户端套接字的确认？](https://stackoverflow.com/questions/12792967/how-to-get-an-acknowledgement-for-the-client-socket-from-server)

我已经使用 netty 实现了一个彗星消息服务器，它可以长时间保持连接打开。它工作正常，但我无法检测到以下内容：

有时客户端连接已“意外”关闭，就像有人切断电缆一样。发生这种情况后，我仍然可以写入该通道（服务器端）而不会出现错误或能够检测到任何错误。

那么：如何检测我从 netty 服务器发送到客户端的数据是否真的被接收到了？

在“旧”java.io 中，这是（afaik）在套接字级别完成的。我无法感知连接是否断开（没有保持连接），但是当我尝试将数据写入 OutputStream 时，如果连接同时断开，它会失败。但是，对于 netty，这种情况不再发生，我想知道我是否还能以某种方式获取该信息（信息 = 同时底层连接已断开，无法传递数据）

基本上：底层 TCP 已经超时，因为没有收到 ACK。这在 java.nio / Netty 中是如何出现的？目前我可以继续写入死连接。

# jfugue - JFugue '+' 没有被解析？和弦不响

> ID：12924968
> 
> 赞同：3
> 
> 时间：2012-10-16T23:25:53.030
> 
> 标签：jfugue

看起来在 4.1x 、 4.02 版本（这些是我尝试过的唯一版本）中，和谐“+”不起作用。当我执行时： Player p = new Player(); p.play ("C5maj");

我听到所有三个音符

但是当我执行 p.play("C+G+E"); 我只听到E音。这同样适用于任何“和弦”字符串。似乎只有最后一个音符正在播放。我在linux上运行。

任何帮助，将不胜感激。

编辑：

我发现在并行播放音符时，默认的持续时间机制不起作用。所以演奏 C+G+E 只会给你 E。但是如果我演奏“Ch+Gh+Eh”..那么我会从所有音符中得到声音。

# c# - 从两个不同的 Visual Studio 调试两个不同的程序

> ID：12924969
> 
> 赞同：0
> 
> 时间：2012-10-16T23:25:56.647
> 
> 标签：c#, c++, visual-studio-2010, debugging, visual-studio-2003

我有两个 Windows 控制台程序，一个是在 C++ VS2003 中开发的，另一个是在 C# VS2010 中开发的。C++ 程序调用 C# 程序。

我想使用两个 Visual Studio 进行调试，而不必在第一个程序中间停止，然后复制第二个程序的参数，然后使用它们分别运行第二个程序。是否可以将两者联系起来，使调试过程无缝衔接？

谢谢你的帮助！

# xml - 为什么会输出这个？

> ID：12924970
> 
> 赞同：0
> 
> 时间：2012-10-16T23:26:01.437
> 
> 标签：xml, xslt

我正在尝试学习 XSLT 并遇到了一些问题。我认为这条线`<xsl:template match="response/results">`会将 xlst 进程限制为仅元素中的那些`<results>`元素？？？

这会输出一些初始值，我不知道为什么。在下面的结果中，您将在结果的开头看到以下内容：

```
manhattan WMOS
true
false
60
1
10
0 
```

XML:

```
<?xml version="1.0" encoding="UTF-8" ?>
<response version="2">
    <query>manhattan WMOS</query>
    <location></location>
    <dupefilter>true</dupefilter>
    <highlight>false</highlight>
    <totalresults>60</totalresults>
    <start>1</start>
    <end>10</end>
    <pageNumber>0</pageNumber>
    <results>
        <result>
            <jobtitle>Manhattan Associates WMoS QA Analyst</jobtitle>
            <company>CMAC Inc</company>
            <city>Asheville</city>
            <state>NC</state>
            <country>US</country>
            <formattedLocation>Asheville, NC</formattedLocation>
            <source>JobServe USA</source>
            <date>Thu, 11 Oct 2012 15:20:31 GMT</date>
            <snippet>Manhattan Associtates WMoS Loads of Documentation and detail required for this position Immediate opening for 2 Senior QA Analysts Project: Manhattan (WMOS... </snippet>
            <url>http://www.indeed.com/viewjob?jk=06bef17e206740d3&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae</url>
            <onmousedown>indeed_clk(this, &#039;5585&#039;);</onmousedown>
            <jobkey>06bef17e206740d3</jobkey>
            <sponsored>false</sponsored>
            <expired>false</expired>
            <formattedLocationFull>Asheville, NC</formattedLocationFull>
            <formattedRelativeTime>5 days ago</formattedRelativeTime>
        </result>
        <result>
            <jobtitle>Software Analyst - WMOS</jobtitle>
            <company>Manhattan Associates</company>
            <city>Atlanta</city>
            <state>GA</state>
            <country>US</country>
            <formattedLocation>Atlanta, GA</formattedLocation>
            <source>Manhattan Associates</source>
            <date>Mon, 01 Oct 2012 21:02:50 GMT</date>
            <snippet>innovations include: Manhattan SCOPE® a portfolio of... Position open in Atlanta Office. About Manhattan Associates:  Manhattan Associates is at the forefront of... </snippet>
            <url>http://www.indeed.com/viewjob?jk=a17a7c578a779db8&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae</url>
            <onmousedown>indeed_clk(this, &#039;5585&#039;);</onmousedown>
            <jobkey>a17a7c578a779db8</jobkey>
            <sponsored>false</sponsored>
            <expired>false</expired>
            <formattedLocationFull>Atlanta, GA</formattedLocationFull>
            <formattedRelativeTime>14 days ago</formattedRelativeTime>
        </result> 
```

XSLT：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:param name="ItemsToShow" select="'2'"/>
<xsl:param name="ShowItemDetails" select="'true'"/>
<xsl:param name="ShowItemDate" select="'true'"/>
<xsl:param name="Locale"/>
<xsl:param name="Target"/>
  <xsl:variable name="apos">'</xsl:variable>

<xsl:template name="google_analytics_event_tracking">
    <xsl:param name="link_category" />
    <xsl:param name="link_sub_category" />
     <xsl:param name="link_data" />

  <xsl:value-of select="concat('_gaq.push([', $apos, '_trackEvent', $apos, ',', $apos, $link_category, $apos, ',', $apos, $link_sub_category, $apos, ',', $apos, $link_data, $apos,')]')" />
</xsl:template>
  <xsl:template match="response/results">
    <xsl:for-each select="result[position()&lt;=$ItemsToShow or $ItemsToShow&lt;1]">
        <xsl:variable name="jobOutboundLinkAction">
            <xsl:call-template name="google_analytics_event_tracking">
                <xsl:with-param name="link_category" select="'indeed.com'" />
                <xsl:with-param name="link_sub_category" select="'none'" />
                <xsl:with-param name="link_data" select="url" />
            </xsl:call-template>
        </xsl:variable>
        <div class="jobWrapper">
            <div class="jobTitle">
                <a href="{url}">
                    <xsl:attribute name="target">
                        <xsl:value-of select="$Target"/>
                    </xsl:attribute>
                    <xsl:attribute name="onclick">
                        <xsl:value-of select="$jobOutboundLinkAction"/>
                    </xsl:attribute>
                    <xsl:value-of select="jobtitle"/>
                </a>
            </div>
            <xsl:if test="$ShowItemDate='true'">
                <h6>
                    <xsl:value-of select="date"/>
                </h6>
            </xsl:if>
            <xsl:if test="$ShowItemDetails='true'">
                Company: <xsl:value-of select="company" disable-output-escaping="yes"/>
                <br />
                <xsl:value-of select="formattedLocation" disable-output-escaping="yes"/>
                <br />
                <p>
                    <xsl:value-of select="snippet" disable-output-escaping="yes"/>
                </p>
            </xsl:if>
            <div class="cleaner"></div>
        </div>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

输出：

```
manhattan WMOS
true
false
60
1
10
0
<div class="jobWrapper">
    <div class="jobTitle">
        <a href="http://www.indeed.com/viewjob?jk=06bef17e206740d3&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae" target="" onclick="_gaq.push(['_trackEvent','indeed.com','none','http://www.indeed.com/viewjob?jk=06bef17e206740d3&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae')]">Manhattan Associates WMoS QA Analyst</a>
    </div>
    <h6>Thu, 11 Oct 2012 15:20:31 GMT</h6>
    Company: CMAC Inc<br>
        Asheville, NC<br>
            <p>Manhattan Associtates WMoS Loads of Documentation and detail required for this position Immediate opening for 2 Senior QA Analysts Project: Manhattan (WMOS... </p>
            <div class="cleaner"></div>
        </div>
        <div class="jobWrapper">
            <div class="jobTitle">
                <a href="http://www.indeed.com/viewjob?jk=a17a7c578a779db8&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae" target="" onclick="_gaq.push(['_trackEvent','indeed.com','none','http://www.indeed.com/viewjob?jk=a17a7c578a779db8&amp;qd=Cg_V6UykGXt-ccaEWxs0BA1LyorWd-7Tcbya1NtZKa9WZ1DtngXSHw91EGjVCy_rntA_Y_5cpbSuoLd44_xEjXNG-vBD0DC792zHqZRp6lE&amp;indpubnum=1813651566614396&amp;atk=179li835k18b17ae')]">Software Analyst - WMOS</a>
            </div>
            <h6>Mon, 01 Oct 2012 21:02:50 GMT</h6>
            Company: Manhattan Associates<br>
                Atlanta, GA<br>
                    <p>innovations include: Manhattan SCOPE® a portfolio of... Position open in Atlanta Office. About Manhattan Associates:  Manhattan Associates is at the forefront of... </p>
                    <div class="cleaner"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:08:50.827

您只有一个可匹配的模板。因此，与那个不匹配的所有内容都将由 XSLT 内置模板处理。

您需要为其他元素创建额外的模板。像这样的东西...

```
<xsl:template match="*" /> 
```

... 将接收所有未与其他模板特别匹配的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:03:28.487

啊，找到[这个链接](http://www.tizag.com/xmlTutorial/xslapplytemplates.php)

添加此以过滤掉不需要的内容：

```
<xsl:template match="response">
    <xsl:apply-templates select="results"/>
</xsl:template> 
```

# c# - 从 AD 配置 C# 获取 MinRequiredPasswordLength

> ID：12924971
> 
> 赞同：-1
> 
> 时间：2012-10-16T23:26:04.203
> 
> 标签：c#, asp.net-mvc, active-directory, membership-provider, activedirectorymembership

我想知道在 AD 中配置的 MinRequiredPasswordLength。因为当我调试时：

```
Membership.MinRequiredPasswordLength 
```

它总是返回“7”，在 AD 中它被配置为 8。我知道这个属性可以从 web.config 更改（我没有指定它），但我想从 AD 中恢复它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:48:22.533

在最新版本的 AD 中，这不再是全局设置。它实际上是每个用户作为几年前发布的称为细粒度密码策略 (FGPP) 的功能，它允许您在每个用户的基础上覆盖密码策略。

值得庆幸的是，AD 团队提供了一些工具来帮助您。

与您在 IMO 之后的最接近的匹配也是一个名为 msDS-ResultantPSO 的属性（在用户上），它可以告诉您该用户的最终结果策略（如果您熟悉组策略中的 RSOP.msc，则为 RSOP.msc世界）。这可以通过 LDAP 进行查询。

有关所有这些的更多数据：[http ://technet.microsoft.com/en-us/library/cc754544(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754544(v=ws.10).aspx)

# xcode - 如何在 Mac 中编译/构建 ada？

> ID：12924977
> 
> 赞同：2
> 
> 时间：2012-10-16T23:27:12.837
> 
> 标签：xcode, macos, terminal, gnat

我正在使用带有命令行工具的 xCode 4.5.1 运行 Mac OS X 10.8 (Mountain Lion)。

我刚刚[从这里](http://libre.adacore.com/download/configurations#)安装了 GNAT 2012 。

我使用本教程安装了它：

> 导航到包含一个名为的文件的目录：doinstall
> 输入：sudo mkdir /usr/loca/gnat 您必须输入您的密码
> 输入：sudo ./doinstall 按回车键和提示 y 更新您的路径：sudo export PATH=/usr /local/gnat/bin:$PATH 你现在应该可以使用命令 gnatmake 进行编译了

一切顺利，我重新开始。在我的桌面上，我有 hello.adb：

```
with Ada.Text_IO;use Ada.Text_IO;
procedure Hello is
begin
    Put_Line ("Hello world!");
end Hello; 
```

在终端中，我导航到我的桌面并执行`gnatmake hello.adb`. 但我明白了

```
-bash: gnatmake: command not found 
```

但是在终端中，如果我执行`info gnat`，我会得到一个非常大的文档。

1.  为什么我不能编译 hello.adb？无论如何要修复？
2.  我可以在 xCode 中创建 ada 项目并编译/调试吗？我想使用 xCode 作为 IDE 来编辑源文件。如果是这样，我应该使用什么类型的项目？“外部构建系统”也许？有人可以发布一个关于如何使用 xcode 运行 hello world 的教程吗？这对我有很大帮助。视频会很棒。可惜艾达在互联网上的资源如此之少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:30:13.897

您需要将通往 Ada 的路径放在一个更永久的地方。只要终端打开，您在终端中输入的命令就会持续。

打开`~/.bash_profile`并添加

```
export PATH=/usr/local/gnat/bin:$PATH 
```

您可以从终端打开文件

```
nano ~/.bashrc 
```

或者

```
vim ~/.bashrc 
```

如果您使用的是 ZSH，请将该`export`行放在`~/.zshrc`.

**编辑**：对于#2，我找不到更新的 XCode 插件，但如果你想要一个 IDE，请查看[这个最佳答案](https://stackoverflow.com/questions/4091088/cant-make-ada-work-with-xcode-3-2)。

# javascript - 在javascript中将空格编码为+

> ID：12924984
> 
> 赞同：0
> 
> 时间：2012-10-16T23:27:55.987
> 
> 标签：javascript, ajax

我已经修改了一些代码以通过 MySQL 查询填充下拉选择框，并且我的最终“结果”需要附加到新的“搜索”URL。

```
var result = $("select#model option:selected").html();
$.post (location.href="advanced_search.php?" + "keywords=" + result, function(data){; 
```

我的问题是`result`包括我需要转换为的空格`+`，所以：

```
/advanced_search.php?keywords=2001-2004 Honda Civic TypeR 
```

需要阅读：

```
/advanced_search.php?keywords=2001-2004+Honda+Civic+TypeR 
```

我整个晚上都在寻找解决方案，但是我很难找到可以用我有限的技能实现的东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:36:00.020

使用`data`jQuery 的 AJAX 方法的参数，你不需要转义任何东西——这一切都将由 jQuery 为你完成。

此外，此查询*可能*应该是 GET，而不是 POST。当您分配给`location.href`您时，会导致新 URL 的页面重新加载，而不是真正的 AJAX 请求。

```
var result = $("select#model option:selected").html();
$.get("advanced_search.php", {
     keywords: result
}, function() { ... }); 
```

恕我直言，几乎*没有*充分的理由手动创建 POST 或 GET 参数 - 使用键/值对对象要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:35:24.620

```
location.href="advanced_search.php?" + "keywords=" + result 
```

应该是

```
location.href="advanced_search.php?keywords=" + encodeURIComponent(result) 
```

因为 if`result`包含一个`#`then ，它将成为片段的一部分而不是查询参数的一部分。 [`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)将正确地转义一个字符串，以便您的服务器`result`在您询问“keywords”GET 参数的值时返回。

正如 Mozilla 的文档所解释的那样

> 为避免对服务器的意外请求，您应该对将作为 URI 的一部分传递的任何用户输入的参数调用 encodeURIComponent。例如，用户可以键入`"Thyme &time=again"`变量注释。不使用`encodeURIComponent`这个变量会给出`comment=Thyme%20&time=again`. 请注意，与号和等号标记了一个新的键值对。

* * *

如果您已经构建了 URL，那么

```
encodeURI('/advanced_search.php?keywords=2001-2004 Honda Civic TypeR')

== '/advanced_search.php?keywords=2001-2004%20Honda%20Civic%20TypeR' 
```

内置[`encodeURI`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)函数接受一个字符串并将所有不能出现在 URL 中的字符替换为 % 编码的等效字符。

> 通过将特定字符的每个实例替换为表示字符的 UTF-8 编码的一个、两个、三个或四个转义序列来编码统一资源标识符 (URI)（对于由两个“代理”组成的字符，只有四个转义序列人物）。

任何服务器都应将`%20`URL 视为等同于在 URL的路径部分之外工作的`+`除外。`%20`

如果出于某种原因，您确实需要`+`，那么在 encodeURI 之后，应该可以安全地替换`%20`为`+`因此。

```
var myUrl = '/advanced_search.php?keywords=2001-2004 Honda Civic TypeR';
encodeURI(myUrl).replace(/%20/g, '+') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:36:46.947

您希望`encodeURIComponent`它不仅可以替换空格，还可以替换任何其他可能导致问题的内容。

```
..."keywords=" + encodeURIComponent( result ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T23:40:31.820

我建议您稍微重新访问您的代码，因为发布数据但只是通过 QueryString 发送信息（URL 中的 ? 之后的所有内容）有点忽略了这一点。

您应该在对象中发送关键字，如下所示：

```
var result = $("select#model option:selected").html();
$.post("advanced_search.php", { keywords: result }, function(data){
    // success callback code goes here
}); 
```

如果您的 PHP 查找 $_POST['keywords']，当 $post 由 jQuery 执行时，您应该在其中找到您的数据。

通过 QueryString 发送它是不可撤销的，但在这种情况下，你真的应该按照以下方式做一些事情：

```
var result = $("select#model option:selected").html();
$.get("advanced_search.php", 
    { keywords: result }, 
    function(data){
        // success callback code goes here
    }); 
```

但是，您应该习惯于正确地发布数据，因为通过查询字符串发送数据既不安全，而且由于编码和 URL 长度限制而容易出现问题。

此外，这引出了一个问题：为什么要从标签内编码 HTML？你为什么不简单地在你的 中放一个简单的键，像这样：

```
<select id="model">
    <option value="key1">2001-2004 Honda Civic TypeR</option>
    <option value="key2">2005-2008 Honda Civic TypeR</option>
    <option value="key3">2009-2012 Honda Civic TypeR</option>
    <option value="key4">2013-2015 Honda Civic TypeR</option>
</select>

var result = $("select#model option:selected").val();
$.post("advanced_search.php", { keywords: result }, function(data){
    // success callback code goes here
}); 
```

运行查询也应该更简单，考虑到您可以缩短值并且不需要对编码/解码值进行任何处理，除非您没有每个选择选项的键，在这种情况下，我想我理解你正在采取的方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-16T23:30:37.533

只是`.replace(/ /g,'+')`它，虽然我必须承认我对你的代码到底在做什么感到困惑。

# php - Symfony“主控制器”开始会话？

> ID：12924985
> 
> 赞同：0
> 
> 时间：2012-10-16T23:27:56.183
> 
> 标签：php, symfony

我有各种调用启动会话的方法和类，有时会导致错误`"Failed to start the session because headers have already been sent"`

让我想知道，哪里是开始会议的好地方？每个请求只调用一次的地方，以及每个请求都调用的地方。像主控制器一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:55:50.213

要开始会话，您应该执行以下操作：

```
use Symfony\Component\HttpFoundation\Session\Session;

$session = new Session();
$session->start(); 
```

[Symfony 文档会话章节](http://symfony.com/doc/current/components/http_foundation/sessions.html)说..

> Symfony 会话旨在替换几个原生 PHP 函数。应用程序应避免使用 session_start()、session_regenerate_id()、session_id()、session_name() 和 session_destroy()，而应使用以下部分中的 API。

**编辑**：

看看[symfony/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php)（第 142 行）

在您的文件`session.use_cookies`中启用了吗？`php.ini`

# c++ - boost 或 Visual Studio 2010 中的内存泄漏

> ID：12924990
> 
> 赞同：0
> 
> 时间：2012-10-16T23:28:16.110
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, stl

我一直在 Boost 或 Visual Studio 2010 中发现漏洞。像这个漏洞一样简单的程序：

```
#include <boost\regex.hpp>

int main()
{
    _CrtMemState state;
    _CrtMemCheckpoint(&state);

    {
        boost::regex my_filter;
        my_filter.set_expression("filter");
    }

    _CrtMemDumpAllObjectsSince(&state);
    return 0;
} 
```

并返回

```
Dumping objects ->
{174} normal block at 0x00195C28, 1024 bytes long.
 Data: <    8\          > 00 00 00 00 38 5C 19 00 00 00 00 00 00 CD CD CD 
{172} normal block at 0x00195B90, 16 bytes long.
 Data: <  <         pO  > B8 D3 3C 01 01 00 00 00 01 00 00 00 70 4F 19 00 
{171} normal block at 0x00195B48, 8 bytes long.
 Data: < P      > BC 50 19 00 00 00 00 00 
{170} normal block at 0x00195AF8, 16 bytes long.
 Data: <  <         XQ  > E8 D3 3C 01 01 00 00 00 01 00 00 00 58 51 19 00 
{169} normal block at 0x00195A98, 32 bytes long.
 Data: < R   R   R      > 80 52 19 00 80 52 19 00 80 52 19 00 09 0C 00 00 
{168} normal block at 0x00195A48, 20 bytes long.
 Data: < Q   Q   R   Y  > E8 51 19 00 E8 51 19 00 E0 52 19 00 F8 59 19 00 
{167} normal block at 0x001959F8, 16 bytes long.
 Data: < 2=          R  > 94 32 3D 01 02 00 00 00 01 00 00 00 E0 52 19 00 
{158} normal block at 0x00195968, 80 bytes long.
 Data: <hY  hY  hY      > 68 59 19 00 68 59 19 00 68 59 19 00 CD CD CD CD 
{157} normal block at 0x00195920, 8 bytes long.
 Data: < W      > 0C 57 19 00 00 00 00 00 
{156} normal block at 0x001958B0, 52 bytes long.
 Data: < X   X   X      > B0 58 19 00 B0 58 19 00 B0 58 19 00 CD CD CD CD 
{155} normal block at 0x00195868, 8 bytes long.
 Data: < V      > F8 56 19 00 00 00 00 00 
{154} normal block at 0x001957F8, 52 bytes long.
 Data: < W   W   W      > F8 57 19 00 F8 57 19 00 F8 57 19 00 CD CD CD CD 
{153} normal block at 0x001957B0, 8 bytes long.
 Data: < V      > E4 56 19 00 00 00 00 00 
{150} normal block at 0x00195768, 8 bytes long.
 Data: <`3>     > 60 33 3E 01 00 00 00 00 
{149} normal block at 0x001952E0, 1096 bytes long.
 Data: <                > 09 0C 00 00 00 00 00 00 00 00 00 00 00 00 1A 00 
{148} normal block at 0x00195280, 32 bytes long.
 Data: < Z   Z   Z      > 98 5A 19 00 98 5A 19 00 98 5A 19 00 CD CD CD CD 
{147} normal block at 0x00195238, 8 bytes long.
 Data: < 3>     > 14 33 3E 01 00 00 00 00 
{146} normal block at 0x001951E8, 20 bytes long.
 Data: <HZ  HZ          > 48 5A 19 00 48 5A 19 00 CD CD CD CD CD CD CD CD 
{145} normal block at 0x001951A0, 8 bytes long.
 Data: < 3>  Z  > 04 33 3E 01 A8 5A 19 00 
{144} normal block at 0x00195158, 8 bytes long.
 Data: < R   Y  > E0 52 19 00 F8 59 19 00 
{143} normal block at 0x00195110, 8 bytes long.
 Data: <pO      > 70 4F 19 00 00 00 00 00 
{142} normal block at 0x00194F70, 356 bytes long.
 Data: < Q              > 10 51 19 00 00 00 00 00 00 00 00 00 00 00 00 00 
Object dump complete. 
```

我发现这个使用 boost 1.47 和 1.50 我正在使用带有 SP1 的 Visual Studio 2010 它似乎在 VS2010 中。我试图找到一个修补程序但没有任何成功

感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:01:11.633

在这两个例子中，`_CrtMemDumpAllObjectsSince`都是在 boost 对象的析构函数运行之前被调用的，所以没有任何机会来整理自己。仍然分配的内存几乎可以肯定不是泄漏。

应该修改代码以确保在检查仍然分配的内存之前运行析构函数：

```
#include <boost\regex.hpp>

int main()
{
    _CrtMemState state;
    _CrtMemCheckpoint(&state);

    {
        boost::smatch what;
    }

    _CrtMemDumpAllObjectsSince(&state);
    return 0;
} 
```

或者，更好的是，改用该`_CrtSetDbgFlag`函数：

[http://msdn.microsoft.com/en-us/library/5at7yxcs(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/5at7yxcs(v=vs.100).aspx)

设置`_CRTDBG_LEAK_CHECK_DF`标志。在运行所有全局析构函数之后，将在程序退出时执行泄漏检查。这使得列出的任何项目都更有可能实际上是泄漏。

# java - 组合来自 txt 文件的字符串

> ID：12924991
> 
> 赞同：0
> 
> 时间：2012-10-16T23:28:29.210
> 
> 标签：java

我有两个由名称（第一个）和姓氏（第二个）组成的 txt 文件。我试图以一种方式将这两者结合起来：每个名字都与每个姓氏结合在一起。我想到了Stringbuffer，然后......？这仅供个人使用，因此任何提示将不胜感激。

```
public class test {

public static void main(String[] args) {

        String anArray[] = new String[10];

        anArray[0] = "John";
        anArray[1] = "Paul"; 
        anArray[2] = "Mike";

        String anArray2[] = new String[10];

        anArray2[0] = "Smith";
        anArray2[1] = "Johnson";
        anArray2[2] = "Simpson";

        for (int i=0; i<3; i++) {

        for (int j=0; j<3; j++) {

            String combined = anArray[i].concat(anArray2[j]);
            System.out.println(combined);

        }
        }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:32:25.737

您正在寻找两组的[笛卡尔积。](http://en.wikipedia.org/wiki/Cartesian_product)

您将需要嵌套循环并在其中分配每个名字及其姓氏

伪代码：

```
 for each firstName:
     for each surName:
         print firstName surName 
```

注意 - 这里的`StringBuilder`or`StringBuffer`对一个简单的字符串 concat 没有多大帮助 - 因为你正在连接两个字符串（你需要为其创建对象） - 除非你想要一个包含所有可能名称的字符串，但我怀疑什么你正在寻找。

# asp.net - Visual Studio - 网站解决方案文件 - 在与 .sln 文件相同的目录中创建网站文件夹的副本

> ID：12924994
> 
> 赞同：0
> 
> 时间：2012-10-16T23:28:47.480
> 
> 标签：asp.net, visual-studio, tfs, web, solution

我在使用 Visual Studio 2012 / TFS 在与我的解决方案文件相同的目录中创建网站目录副本时遇到问题。

我的回购结构如下；

源代码：

*   /src/website1
*   /src/website2
*   /src/libraryxyz

解决方案文件：

*   /sln/网站.sln

当我在新的工作区中打开 WebSites.sln 时，Visual Studio 会创建 /src/website1 和 /src/website2 的副本并将它们放在 /sln 文件夹中。

这只发生在网站上，libraryxyz 项目仍然相对引用。我检查了解决方案文件，并且网站参考是相对的（..//src/website1）。

任何人都知道为什么会发生这种情况以及如何阻止它？

编辑：我有更多关于这个问题的信息；

*   在我创建新工作区并从新工作区加载新解决方案后，它就消失了。
*   为另一个网站创建具有与上述相同结构的新解决方案导致网站文件夹再次出现完全相同的问题。
*   发生问题时，到 TFS 存储库的实际文件夹映射会更改。也就是说，为了参数，网站目录将具有本地文件夹映射 c:\dev\ws1\src\website1，一旦加载解决方案，实际映射将更改为 c:\dev\ws1 \sln\website1 并且该网站之前映射到的文件夹变为空。
*   现在包含两个使用新结构的新解决方案文件的新工作区仅在最新解决方案中出现问题。以前的“固定”解决方案工作正常。

我真的不知道为什么会发生这种情况，这似乎是默认行为，直到某些东西发生变化，我只是不知道那个“东西”是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:10:14.967

最后，我们弄清楚了造成这种情况的原因。

解决方案文件未自动绑定到源代码管理。

文件 -> 源代码管理 -> 高级 -> 更改源代码管理。然后确保所有内容都绑定到源代码管理，即使绑定被视为“无效”。

# haskell - 如何使用 Haskell 和 GIO 读取文件？

> ID：12924996
> 
> 赞同：0
> 
> 时间：2012-10-16T23:29:36.117
> 
> 标签：haskell, gtk2hs, gio

例如，这是我使用 Haskell 和 gtk2hs 编写的一小段程序：

```
import System.GIO

foreign import ccall safe "g_type_init"
    g_type_init :: IO ()

main :: IO ()
main = do
    g_type_init
    let file = fileFromParseName "my-file.txt"
    inputStream <- fileRead file Nothing
    ... 
```

该`fileRead`方法返回一个`FileInputStream`实例，但我无法在文档中的任何地方找到从中读取的方法。GIO中对应的C方法应该是`g_input_stream_read`，但是gtk2hs中好像没有实现。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:40:33.390

经过一些实验，我设法编写了自己的`g_input_stream_read`. 它不是很漂亮，甚至可能不安全，但这将成功打印 main 顶部指定的文件的前 1,024 个字符：

```
import Control.Monad (liftM)
import Data.Char (chr)
import Data.Word (Word8)
import Foreign
import Foreign.C (CInt)
import System.GIO
import System.GIO.Types (unInputStream, toInputStream)
import System.Glib (glibTypeInit, GError)

foreign import ccall unsafe "g_input_stream_read"
    -- inputStreamRead <stream> <buffer> <count> <cancellable> <error>, returns the number of bytes read
    inputStreamRead :: Ptr InputStream -> Ptr a -> CInt -> Ptr (Maybe Cancellable) -> Ptr GError -> IO (CInt)

addrToChar :: Ptr a -> Int -> IO (Char)
addrToChar p i = do
    let addr = p `plusPtr` i
    val <- peek addr :: IO Word8
    return $ chr (fromIntegral val)

main :: IO ()
main = do
    glibTypeInit
    let file = fileFromParseName "file.txt"
    fileInputStream <- fileRead file Nothing
    let stream = unInputStream $ toInputStream fileInputStream
    allocaBytes 1024 $ \buffer -> do
        alloca $ \err -> do
            bytesRead <- liftM fromEnum $ inputStreamRead (unsafeForeignPtrToPtr stream) buffer 1024 nullPtr err :: IO Int
            result <- mapM (addrToChar buffer) [0..bytesRead]
            putStrLn result 
```

它需要一些工作才能变得简单`inputStreamRead :: InputStream -> IO (String)`，但至少这是朝着正确方向迈出的一步。

编辑：找到了更好的解决方案。这个应该继续读取，直到读取的字节数等于 0，并且有一个更友好的入口点：

```
import Control.Monad (liftM)
import Data.Char (chr)
import Data.Word (Word8)
import Foreign
import Foreign.C (CInt)
import System.GIO
import System.GIO.Types
import System.Glib (glibTypeInit, GError)

foreign import ccall unsafe "g_input_stream_read"
    -- inputStreamRead <stream> <buffer> <count> <cancellable> <error>, returns the number of bytes read
    inputStreamRead :: Ptr InputStream -> Ptr a -> CInt -> Ptr Cancellable -> Ptr GError -> IO (CInt)

chunk :: Int
chunk = 4096

bytesToText :: [Word8] -> [Char]
bytesToText [] = []
bytesToText (x:xs) = (chr $ fromEnum x):(bytesToText xs)

readGIOStream :: InputStream -> Maybe Cancellable -> IO ([Word8])
readGIOStream stream cancel = do
    allocaBytes chunk $ \buffer -> do
        alloca $ \err -> do
            case cancel of
                Just c  -> withForeignPtr (unCancellable c) $ \c' -> readChunk buffer c' err streamPtr
                Nothing -> readChunk buffer nullPtr err streamPtr
            where streamPtr = unInputStream stream
                  readChunk b c e s = withForeignPtr s $ \s' -> do
                          bytesRead <- liftM fromEnum $ inputStreamRead s' b (toEnum chunk) c e
                          result <- mapM (\i -> peek $ b `plusPtr` i) [0..(bytesRead-1)]
                          if bytesRead == 0
                              then return result
                              else do rest <- readChunk b c e s
                                      return $ result ++ rest

main :: IO ()
main = do
    glibTypeInit
    let file = fileFromParseName "live-forever.txt"
    fileInputStream <- fileRead file Nothing
    text <- liftM bytesToText $ readGIOStream (toInputStream fileInputStream) Nothing
    putStrLn text 
```