# StackOverflow 问答 12983000-12983999

# php - 无法使用 php 设置 cookie，然后使用 javascript 使用 jquery mobile 读取它

> ID：12983003
> 
> 赞同：0
> 
> 时间：2012-10-19T21:56:11.723
> 
> 标签：php, jquery-mobile, cookies

我正在尝试使用 jquery mobile 创建一个简单的网络应用程序。在应用程序中的某个时刻，我需要从一个php页面获取信息到一个javascript页面，然后来回来回（即javascript会更新cookie，它会被php读取，然后会被javascript读取） ， ETC。）。

为了测试我可以用 php 设置一个 cookie，然后在同一个页面加载时用 javascript 读取它，我创建了以下工作脚本：

```
<?php
    include("../../../connectFiles/connect_dev.php");
    setcookie("cookie_test","hello", 0, '/');       
?>

<html>
    <head><title>Cookie setting test</title></head>
<body>
    <script type="text/javascript">
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }

    alert(readCookie('cookie_test'));
</script>
Hello there, I hope you were able to see my cookie!
</body> 
```

正如我所提到的，这工作得很好。但是，当我采用相同的代码并尝试在 jquery 移动框架中实现它时，我似乎找不到 cookie。它一直显示为“null”。我猜这与通过 jquery 移动框架访问 cookie 时有关。我已经将 readCookie 函数绑定到 jquery mobile 中的 pageshow 函数，如下所示：

```
$(document).on('pageshow',function(e, ui){
if (e.target.id == 'assessment') {
    var objective = readCookie('objective');
    alert("objective: "+objective); 
```

不幸的是，这每次都会导致“空”cookie 值。我需要做什么才能在 PHP 中设置 cookie 并在 javascript 中调用它？

# macos - 全局鼠标事件处理类似于 MacOsX 的内置屏幕截图功能

> ID：12983006
> 
> 赞同：1
> 
> 时间：2012-10-19T21:56:35.647
> 
> 标签：macos, cocoa, mouseevent, global

我知道 Stackoverflow 上有几个关于 MacOsX 中全局鼠标事件的问题，我花了最后几个小时寻找一个帮助我的问题。

**我想要创建的功能几乎类似于 OsX 的内置屏幕截图功能。*(Shift+CMD+4)***

我想**按下快捷方式**并用它**激活鼠标侦听**器。然后**mouseDown 事件应该返回一个坐标**，而**mouseRelease 事件**应该返回另一个坐标。然后我想从他们那里制作一个 CGRect 并且**应该停用**事件监听器。

我发现的所有代码示例都在 NSView 或 NSWindow 中给了我 mouseEvents 但不是全局的，或者它们给了我鼠标坐标的位置，但我必须自己用 NSTimer 轮询它。这些都不是我需要的。

正如我所说：我花了几个小时寻找。我已经阅读了许多问题线程和 Cocoa 事件处理的 Apple 指南，但没有一个答案真正帮助了我。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:10:24.177

You will be able to get the global mouse events using

1) CGEvents. Use CGEventTap().

2) From OS X v 10.6, there is a new method :

```
+ (id)addGlobalMonitorForEventsMatchingMask:(NSEventMask)mask handler:(void (^)(NSEvent*))block 
```

# c# - MVC4 / 是我想要的部分视图吗？

> ID：12983017
> 
> 赞同：1
> 
> 时间：2012-10-19T21:57:46.930
> 
> 标签：c#, razor, asp.net-mvc-4, partial-views, renderpartial

我的网站基于带有 Razor 的 MVC4 Web 应用程序。我想将页面划分为以下区域：

```
-----------------------
|      |              |
|      |              |
|      |--------------|
|      |              |
|      |              |
|------|              |
|      |              |
|      |              |
|      |--------------|
|      |              |
|      |              |
----------------------- 
```

这个叫什么？每个区域都是“局部视图”吗？我需要正确的术语，以便我可以在谷歌上寻求更多帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T22:11:59.953

局部视图只是没有布局（默认情况下）的视图的呈现，有或没有视图模型。

我建议不要混淆部分视图的功能和页面布局。部分视图可以返回任何 html 子集，包括完全呈现的页面。因此，在您的示例中，左侧的整个列可能是一个局部视图，然后调用两个局部视图来呈现顶部和底部。或者局部视图可以返回顶部和底部。

部分视图非常适合显示可能超出当前上下文上下文的内容（例如，使用 Ajax 从订单列表屏幕中拉出带有订单详细信息的模式弹出窗口）。我个人使用局部视图来分离父视图（页面或局部视图）的每个视图模型的显示。

至于页面布局，我强烈建议阅读[ScottGU 的关于布局和部分的博客，](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)其中布局可能需要或可选地包含页面*填充的*部分。

# c# - 如果结果有多种类型，如何将类型设置为 IEnumerable<>？

> ID：12983018
> 
> 赞同：0
> 
> 时间：2012-10-19T21:57:58.920
> 
> 标签：c#, linq

问题 我正在用我之前制作的程序在这里尝试一些新的东西。在第一个程序中，我能够拖放表适配器并使用通用“var”来存储查询结果。现在我正在尝试创建一个具有一些代码分离的新程序。例如，在第一个程序中，我将所有代码都写在 form.cs 文件中，这次我想创建一个类来运行查询并将它们返回给调用类，但是，如何存储查询结果包含多种类型？您不能返回 var 变量，它必须更具体。我在选择行上收到错误消息：“无法将类型'System.Collections.Generic.IEnumerable' 隐式转换为'System.Collections.Generic.IEnumerable;。存在显式转换（您是否缺少演员表？）

有人能帮我吗？演员阵容是什么？第一种方法 (public IEnumerable getList()) 按预期工作，它的第二种方法 (public IEnumerable getRecipeInfo(string recipeName)) 出现错误。到目前为止，这是我的代码。

```
namespace recipeDataBase
{
    class Query
    {
        recipiesNewDataSet recipeDataSet = new recipiesNewDataSet();
        recipiesNewDataSetTableAdapters.RecipeTableAdapter recipeTableAdapter = new recipiesNewDataSetTableAdapters.RecipeTableAdapter();
        recipiesNewDataSetTableAdapters.RecipeIngredientTableAdapter ingredientTableAdapter = new recipiesNewDataSetTableAdapters.RecipeIngredientTableAdapter();
        recipiesNewDataSetTableAdapters.RatingTableAdapter ratingTableAdapter = new recipiesNewDataSetTableAdapters.RatingTableAdapter();

        public  Query()
        {

        }

        public IEnumerable<string> getList()
        {
            recipeTableAdapter.Fill(recipeDataSet.Recipe);

            IEnumerable<string> recipeList = (from a in recipeDataSet.Recipe
                                              select a.RecipeName);
            return recipeList;
        }

        public IEnumerable<string> getRecipeInfo(string recipeName)
        {
            recipeTableAdapter.Fill(recipeDataSet.Recipe);
            ratingTableAdapter.Fill(recipeDataSet.Rating);
            ingredientTableAdapter.Fill(recipeDataSet.RecipeIngredient);
            IEnumerable<string> recipeInfo = (from a in recipeDataSet.Recipe
                                              from b in recipeDataSet.Rating
                                              from c in recipeDataSet.RecipeIngredient
                                              where a.RecipeName == recipeName &&
                                              a.RecipeNum == c.RecipeNum &&
                                              a.RatingNum == b.RatingNum
                                              select new { a.RecipeName, a.Nationality, a.Event, a.Source, b.FamilyRating, c.Ingredient });
            return recipeInfo;
        }

    }
} 
```

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:02:26.800

您遇到异常是因为您在查询中选择了匿名类型，但查询变量的类型是`IEnumerable<string>`. 相反，您必须选择一个字符串，使用`var`关键字或自定义类。

如果您想返回一些有用的东西，我会创建一个自定义类，其中包含您在匿名类型中选择的所有这些属性，例如：

```
public class Recipe
{
    public String RecipeName{ get; set;}
    public String Nationality{ get; set;}
    public String Event{ get; set;}
    // ...
} 
```

然后你可以`IEnumerable<Recipe>`从方法中返回一个而不是在查询中选择实例：

```
...
select new Recipe(){ RecipeName=a.RecipeName, Nationality=a.Nationality, Event=a.Event,... }); 
```

旁注：我建议在查询中使用`Join`，而不是：`Where`

[为什么 LINQ JOIN 比使用 WHERE 链接快得多？](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:34:25.520

您正在使用匿名类型，因此：

```
 var recipeInfo = (from a in recipeDataSet.Recipe
                                          from b in recipeDataSet.Rating
                                          from c in recipeDataSet.RecipeIngredient
                                          where a.RecipeName == recipeName &&
                                          a.RecipeNum == c.RecipeNum &&
                                          a.RatingNum == b.RatingNum
                                          select new { a.RecipeName, a.Nationality, a.Event, a.Source, b.FamilyRating, c.Ingredient }).ToList(); 
```

...给你一个匿名类型的 IEnumerable，它有 6 个值，可能是所有字符串。`var`不代表“变体”并且*仍然*是强类型声明，只是在编译时解析（如果无法从使用中推断出类型，则会失败）。因此，上面的代码在编译时`var`意味着意义*`IEnumerable<anonymous_type_with_6_strings>`*，但`return`语句试图这样做`IEnumerable<string>`——这是你得到编译时强制转换异常的地方。

我建议你创建一个简单的类来保存 RecipeInfo 值，这样你的方法就可以返回`IEnumerable<RecipeInfo>`：

```
class RecipeInfo
{
    public string RecipeName {get;set;}
    public string Nationality {get;set;}
    public string Event {get;set;}
    public string Source {get;set;}
    public string FamilyRating {get;set;}
    public string Ingredient {get;set;}
} 
```

然后您可以将您的选择*投射*到这种类型中：

```
 var recipeInfo = (from a in recipeDataSet.Recipe
                                      from b in recipeDataSet.Rating
                                      from c in recipeDataSet.RecipeIngredient
                                      where a.RecipeName == recipeName &&
                                      a.RecipeNum == c.RecipeNum &&
                                      a.RatingNum == b.RatingNum
                                      select new RecipeInfo{RecipeName=a.RecipeName, Nationality=a.Nationality, Event=a.Event, Source=a.Source, FamilyRating=b.FamilyRating, Ingredient=c.Ingredient }).ToList(); 
```

# c# - 将深度图像与 RGB 图像对齐

> ID：12983019
> 
> 赞同：4
> 
> 时间：2012-10-19T21:58:00.433
> 
> 标签：c#, kinect

很长一段时间以来，我一直在尝试将深度流与 Kinect 的 RGB 流对齐。我已经阅读了几篇关于它的文章，但我必须错过一些关键点，因为我无法让它工作......

这是我设法做的图片，我圈出了一些容易发现的错位 ![Kinect 深度错位](../Images/484e1ae2d1e28e425825efaa0b7901f8.png)

我一直在尝试将其简化为尽可能小的代码，但它仍然是一大段代码，所以请耐心等待，下面的代码片段是 Kinect SDK 每次准备好深度和 RGB 帧时调用的代码。

如您所见，我一直在尝试

```
ColorImagePoint colorpoint = _Sensor.CoordinateMapper.MapDepthPointToColorPoint(DepthImageFormat.Resolution640x480Fps30, depthpoint, ColorImageFormat.RgbResolution640x480Fps30); 
```

我更喜欢使用 CoordinateMapper.MapDepthFrameToColorFrame （因为这应该能够解决问题）但我无法让它工作..我可能没有正确地做它..

我正在使用微软的 Kinect SDK 1.6

```
private void EventAllFramesReady(Object Sender, AllFramesReadyEventArgs e)
{
    System.Drawing.Color color;

    Bitmap image = null;
    Bitmap depth = null;

    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
        {
            // color 
            image = new Bitmap(colorFrame.Width, colorFrame.Height);
            byte[] colorPixels = new byte[colorFrame.PixelDataLength];
            colorFrame.CopyPixelDataTo(colorPixels);

            //lock bitmap, and work with BitmapData (way faster than SetPixel())
            BitmapData imageBitmapData = image.LockBits(new Rectangle(0, 0, image.Width, image.Height),
                                                ImageLockMode.WriteOnly,
                                                image.PixelFormat);
            IntPtr IptrImage = imageBitmapData.Scan0;
            byte[] PixelsImage = new byte[image.Width * image.Height * 4];

            // depth
            depth = new Bitmap(depthFrame.Width, depthFrame.Height);
            DepthImagePixel[] depthData = new DepthImagePixel[depthFrame.PixelDataLength];
            depthFrame.CopyDepthImagePixelDataTo(depthData);

            //lock bitmap, and work with BitmapData (way faster than SetPixel())
            BitmapData depthBitmapData = depth.LockBits(new Rectangle(0, 0, depth.Width, depth.Height),
                                                ImageLockMode.WriteOnly,
                                                depth.PixelFormat);
            IntPtr IptrDepth = depthBitmapData.Scan0;
            byte[] PixelsDepth = new byte[depth.Width * depth.Height * 4];

            DepthImagePoint depthpoint = new DepthImagePoint();

            for (int x = 1; x < colorFrame.Width; x++)
            {
                for (int y = 1; y < colorFrame.Height; y++)
                {
                    int i = ((y * image.Width) + x) * 4;

                    short depthdistanceRAW = (depthData[x + y * depth.Width]).Depth;

                    // convert distance value into a color
                    color = System.Drawing.Color.Pink;
                    if (depthdistanceRAW > 0 && depthdistanceRAW <= 4000)
                    {
                        int depthdistance = (int)((depthdistanceRAW / 4090f) * 255f);
                        color = System.Drawing.Color.FromArgb((int)(depthdistance / 2f), depthdistance, (int)(depthdistance * 0.7f));
                    }

                    depthpoint.X = x;
                    depthpoint.Y = y;
                    depthpoint.Depth = depthdistanceRAW;

                    ColorImagePoint colorpoint = _Sensor.CoordinateMapper.MapDepthPointToColorPoint(DepthImageFormat.Resolution640x480Fps30, depthpoint, ColorImageFormat.RgbResolution640x480Fps30);

                    //if (colorpoint.X > 0 && colorpoint.X <= 640 && colorpoint.Y > 0 && colorpoint.Y <= 480)
                    //{
                    int adjustedposition = ((colorpoint.Y * image.Width) + colorpoint.X) * 4;
                    //if (adjustedposition < depthData.Length)
                    //{
                    PixelsDepth[i] = color.B;
                    PixelsDepth[i + 1] = color.G;
                    PixelsDepth[i + 2] = color.R;
                    PixelsDepth[i + 3] = DepthTransparency;
                    //}
                    //}

                    PixelsImage[i] = colorPixels[i];
                    PixelsImage[i + 1] = colorPixels[i + 1];
                    PixelsImage[i + 2] = colorPixels[i + 2];
                    PixelsImage[i + 3] = 255;
                }
            }

            Marshal.Copy(PixelsImage, 0, IptrImage, PixelsImage.Length);
            image.UnlockBits(imageBitmapData);

            Marshal.Copy(PixelsDepth, 0, IptrDepth, PixelsDepth.Length);
            depth.UnlockBits(depthBitmapData);
        }
    }

    _kf.UpdateImage(image); // update the RGB picture in the form
    _kf.UpdateDepth(depth); // update the Depth picture in the form
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T15:07:33.970

我在这里发布了一个[类似问题](https://stackoverflow.com/questions/29682863/kinect-1-8-colorframe-and-depthframe-not-coordinated)的答案。

[Coordinate Mapping Basics-WPF C# Sample](https://msdn.microsoft.com/en-us/library/hh973086.aspx)展示了如何使用此方法。您可以在下面找到代码的一些重要部分：

```
// Intermediate storage for the depth data received from the sensor
private DepthImagePixel[] depthPixels;
// Intermediate storage for the color data received from the camera
private byte[] colorPixels;
// Intermediate storage for the depth to color mapping
private ColorImagePoint[] colorCoordinates;
// Inverse scaling factor between color and depth
private int colorToDepthDivisor;
// Format we will use for the depth stream
private const DepthImageFormat DepthFormat = DepthImageFormat.Resolution320x240Fps30;
// Format we will use for the color stream
private const ColorImageFormat ColorFormat = ColorImageFormat.RgbResolution640x480Fps30;

//...

// Initialization
this.colorCoordinates = new ColorImagePoint[this.sensor.DepthStream.FramePixelDataLength];
this.depthWidth = this.sensor.DepthStream.FrameWidth;
this.depthHeight = this.sensor.DepthStream.FrameHeight;
int colorWidth = this.sensor.ColorStream.FrameWidth;
int colorHeight = this.sensor.ColorStream.FrameHeight;
this.colorToDepthDivisor = colorWidth / this.depthWidth;
this.sensor.AllFramesReady += this.SensorAllFramesReady;

//...

private void SensorAllFramesReady(object sender, AllFramesReadyEventArgs e)
{
    // in the middle of shutting down, so nothing to do
    if (null == this.sensor)
    {
        return;
    }

    bool depthReceived = false;
    bool colorReceived = false;

    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (null != depthFrame)
        {
            // Copy the pixel data from the image to a temporary array
            depthFrame.CopyDepthImagePixelDataTo(this.depthPixels);

            depthReceived = true;
        }
    }

    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        if (null != colorFrame)
        {
            // Copy the pixel data from the image to a temporary array
            colorFrame.CopyPixelDataTo(this.colorPixels);

            colorReceived = true;
        }
    }

    if (true == depthReceived)
    {
        this.sensor.CoordinateMapper.MapDepthFrameToColorFrame(
            DepthFormat,
            this.depthPixels,
            ColorFormat,
            this.colorCoordinates);

        // ...

        int depthIndex = x + (y * this.depthWidth);
        DepthImagePixel depthPixel = this.depthPixels[depthIndex];

        // scale color coordinates to depth resolution
        int X = colorImagePoint.X / this.colorToDepthDivisor;
        int Y = colorImagePoint.Y / this.colorToDepthDivisor;

        // depthPixel is the depth for the (X,Y) pixel in the color frame
    }
} 
```

# ruby-on-rails - 如何将 Rails 连接到非 Ruby 后端？

> ID：12983024
> 
> 赞同：0
> 
> 时间：2012-10-19T21:58:35.163
> 
> 标签：ruby-on-rails

假设我有 Java 后端，我希望 Rails 与某种 RPC 进行通信。我该如何设置它以及 RPC 调用在架构上应该在 rails 应用程序中的哪个位置，rails 应用程序、控制器或模型的哪个文件和哪个目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:04:21.297

在 Rails 端易于使用的是某种 JSON 协议。如果您需要在 ruby​​ 中解析 SOAP，那么您可以查看 Savon，它将 xml 响应解析为一个不错的散列。

如果您询问将与后端对话并进行调用的代码放在哪里，那么通常将其放在 lib 目录中。如果你需要接收请求，那么当然会在控制器中。

# c# - Context.Cache 是否可能会在请求中删除项目？

> ID：12983028
> 
> 赞同：0
> 
> 时间：2012-10-19T21:58:59.330
> 
> 标签：c#, asp.net, .net, caching, iis

假设我有一个类似下面的片段，它返回 Context.Cache["someComplexObject"] 的内容：

```
public class Something {
    private static SortedDictionary<Guid, Object> ComplexObjectCache
    {
        get
        {
            if (Context.Cache["someComplexObject"] == null)
            {
                FillCache();
            }
            return (SortedDictionary<Guid, Object>)Context.Cache["someComplexObject"];
        }

        set
        {
            Int32 seconds = (new Random()).Next(120, 180);
            Context.Cache.Add(
                "someComplexObject",
                value,
                null,
                DateTime.Now.AddSeconds(seconds),
                System.Web.Caching.Cache.NoSlidingExpiration,
                System.Web.Caching.CacheItemPriority.NotRemovable,
                null
            );
        }
    }
} 
```

在用户控件中，假设我有这个：

```
Object o = Something.ComplexObjectCache[someGuid];

/* 

    do some other stuff ...

*/

DoSomethingWith(o); 
```

在非常罕见的情况下，我会看到一些异常，这些异常让我相信当**DoSomethingWith(o)**被击中时**o**不再在内存中。我 97% 确定没有其他并行进程发生，除了缓存在做什么。我看到其他奇怪的现象让我相信缓存键是空的或不完整的。

 **即使在其他地方仍有指向它的指针，缓存能否/是否真的从内存中删除一个对象？如果是这样，我该如何对抗？

## 更新

经过进一步挖掘，我发现我们有一个**相关**的缓存项（索引），当它在“主”缓存项之前过期时会导致问题。我已经重做了这个实体的缓存代码，将这两个结构*一起*存储在一个对象数组中。这似乎解决了这个问题。

你们都没有足够的信息来解决问题。因此，我将查看答案，并对似乎最准确地解决了*给定*问题的答案打勾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:19:20.790

缓存永远不会从内存中删除任何内容。

它是从内存中删除对象的垃圾收集器，并且只有在没有更多对该对象的引用时才会发生这种情况。因此，对象不会从内存中删除，即使它们从缓存中删除，只要您有对它的引用。

（缓存可以在请求中丢弃对对象的引用。由于多个线程可以同时处理请求，因此在不同的线程中可能会发生一些事情，从而使缓存丢弃项目。缓存不能等到所有线程都空闲才能丢弃项目，那么它可能永远无法做到这一点，并且您会耗尽内存。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:26:39.993

是的，它会。如果 Web 服务器被按下内存，即使这样的代码也将无法打印“foo”。

```
Context.Cache.Add(
            "someComplexObject",
            "foo",
            null,
            DateTime.Now.AddSeconds(seconds),
            System.Web.Caching.Cache.NoSlidingExpiration,
            System.Web.Caching.CacheItemPriority.NotRemovable,
            null
        );

Response.Write(Cache["someComplexObject").ToString()); 
```

你需要做一些聪明的事情，比如

```
string val = "foo";

Context.Cache.Add(
            "someComplexObject",
            val,
            null,
            DateTime.Now.AddSeconds(seconds),
            System.Web.Caching.Cache.NoSlidingExpiration,
            System.Web.Caching.CacheItemPriority.NotRemovable,
            null
        );

Response.Write(val.ToString()); 
```

此外，您在读取或写入缓存的任何时候都需要锁定。您可以为此使用 ReaderWriterLock （或类似的）。这是为了避免在写入缓存时读取（以及在读取缓存时写入）。

我已经为[SixPack 库](http://code.google.com/p/sixpack-library)实现了几个缓存，您可能会觉得它们很有趣，例如查看这个[CacheController](http://code.google.com/p/sixpack-library/source/browse/branches/dotnet2.0/src/SixPack/ComponentModel/CacheController.cs)类。

附带说明一下，该类比您需要的要复杂一点，因为它是允许您像这样缓存的系统的一部分：

```
[Cached]
public class MyTime : ContextBoundObject
{
        [CachedMethod(1)]
        public DateTime Get()
        {
                Console.WriteLine("Get invoked.");
                return DateTime.Now;
        }

        public DateTime GetNoCache()
        {
                Console.WriteLine("GetNoCache invoked.");
                return DateTime.Now;
        }
} 
```

[完整示例](http://code.google.com/p/sixpack-library/wiki/Caching)

[NuGet 包](http://nuget.org/packages/SixPack)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:17:38.273

只要感觉如此，缓存就可以自由地删除对象。即，它可以检测内存压力并在添加项目后立即删除它们。

你真的不应该使用 Cache 来传递对象。缓存是缓存 - 存储对象以在将来加快速度，但在单个请求期间使用其他方式传递对象。另请注意，与[Items](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)之类的东西不同，Cache 是共享的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T22:18:06.907

是的，您的 FillCache 方法正在填充缓存，但是在您检索缓存内容之间存在时间。此时您的缓存可能会失效。尝试从您的 FillCache 方法返回，以便您始终拥有可靠的参考：

```
private SortedDictionary<Guid, Object> ComplexObjectCache()
{
    if (Context.Cache["someComplexObject"] == null)
    {
       var cacheItems = FillCache();
       return cacheItems;
    }
    return (SortedDictionary<Guid, Object>)Context.Cache["someComplexObject"];
} 
```**

# php - 在 PHP 中使用静态方法和属性会占用更少的内存吗？

> ID：12983029
> 
> 赞同：25
> 
> 时间：2012-10-19T21:59:03.187
> 
> 标签：php, memory-management, memory-leaks, static-methods

我正在开发一个每秒可以看到几十个并发用户的 Web 应用程序。我有一个类将在同一页面加载中多次实例化。在那个类中，我有一些属性在每个对象中总是相同的，所以我正在考虑声明这些属性，`static`以减少在同一类的多个实例实例化时将使用的内存页面请求。

这样做会不会因为 PHP 只能存储一次静态属性的值而为该应用程序使用更少的内存？这样做会在并发用户之间节省内存，还是仅在每个 PHP 进程中节省内存？

这对方法有什么作用？如果这意味着对象可以回收相同的方法，那么如果你想节省内存，为什么不能将类的所有方法都声明为静态？

我不完全理解为什么以及何时将属性或方法声明为静态的，但我确实理解将它们声明为静态允许在不实例化类的对象的情况下访问它们（这感觉就像一个 hack ...这些方法和属性应该在其他地方......不是吗？）。我对`static`声明影响内存使用的方式特别感兴趣，以努力使我的 Web 服务器上的内存使用尽可能低……总的来说，我对正在发生的事情有更好的了解。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T22:03:59.343

当您将类方法/变量声明为静态时，它绑定到类并由类共享，而不是对象。从内存管理的角度来看，这意味着当类定义加载到堆内存中时，会在那里创建这些静态对象。当在堆栈内存中创建类的实际对象并且完成静态属性的更新时，指向包含静态对象的堆的指针被更新。这确实有助于减少内存，但幅度不大。

从编程范式来看，人们通常选择使用静态变量来获得架构优势，而不是内存管理优化。换句话说，当人们想要实现单例或工厂模式时，可能会像您提到的那样创建静态变量。它提供了更强大的方法来了解在“类”级别发生的事情，而不是在“对象”级别发生的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T22:18:09.410

查看静态与单例测试： http: [//moisadoru.wordpress.com/2010/03/02/static-call-versus-singleton-call-in-php/](http://moisadoru.wordpress.com/2010/03/02/static-call-versus-singleton-call-in-php/)

注意：由于某些原因，stackoverflow 没有显示 multilne 主题，所以我添加了一张图片。

```
Number of runs  Singleton call time (s)     Static call time (s)
100             0.004005                    0.001511
1,000           0.018872                    0.014552
10,000          0.174744                    0.141820
100,000         1.643465                    1.431564
200,000         3.277334                    2.812432
300,000         5.079388                    4.419048
500,000         8.086555                    6.841494
1,000,000       16.189018                   13.696728 
```

在此处查看更多详细信息：[https ://stackoverflow.com/a/3419411/260080](https://stackoverflow.com/a/3419411/260080)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T22:05:59.780

*在 PHP 中使用静态方法和属性会占用更少的内存吗？*

大概。但是，你为什么要搞乱你的 OOP 架构呢？

*有关系吗？*

可能不是。需要记忆的是 PHP 本身。我坚信删除几个字节，因为您使用静态方法不会有所作为。相反，不要加载无用的模块。例如，如果您不使用 GD，请不要加载它。激活缓存以减少调用 PHP 的次数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-07T17:45:42.910

一般来说，是的。静态方法和属性使用较少的内存。但是，差异非常小。

更有趣的是[静态和非静态方法的性能差异](http://www.codedwell.com/post/59/static-vs-non-static-methods-in-php)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T22:06:55.243

静态方法调用在多次迭代中更快，但静态方法并不能真正节省内存。

如果您声明的类没有任何需要对每个对象实例唯一的属性，那么您可以将每个方法和属性声明为静态。但是，如果您有需要绑定到每个对象的属性，那么静态方法就没有帮助。原因是因为在静态方法内部，没有引用，`$this`所以您不能从静态方法中引用对象属性。

阅读[静态关键字](http://www.php.net/manual/en/language.oop5.static.php)以更好地理解这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-10T13:23:23.420

我刚刚改进了 Stanislav 链接的基准以使其生效：

[https://3v4l.org/rDpVv](https://3v4l.org/rDpVv)

```
Results for PHP 7.4.1:

Runs by case: 500000 
Memory usage at start: 426,320

Run                                 Duration    %       Memory
Dynamic                             0.0594      30%     496
Dynamic instantiated                0.0917      46%     0           #
Dynamic instantiated stored         0.1994      100%    48,967,472  # slowest
Storage only                        0.0422      21%     16,781,392
Cost of instations only when stored 0.1572      79%     32,186,O8O  # cost of stored instatiations minus storage cost (diff of 2 previous lines)
Static                              0.0870      44%     0           # equivalent to dynamic with instantiation
Singletons with many getInstance    0.1213      61%     376
Singletons with one getInstance     0.0669      34%     320         # equivalent to "Dynamic"
Functions assigning $GLOBALS        0.0605      30%     0           # more than 2 times longer than using "global"
Functions assigning a global        0.0458      23%     32          # fastest. 32bits allocated? probably passed by copy... odd
Functions with $counter by ref      0.0707      35%     0           # slow for functions
Functions with $counter static prop 0.0524      26%     0 
```

评论：

*   “修改全局的函数”最快，占 23%
*   “实例化，存储然后调用动态方法”是最长的，所以 100%
*   存储实例会消耗大量内存和总时间的 21%
*   “通过 ref 将 $counter 作为参数传递”几乎是“修改全局函数”的 2 倍
*   调用修改静态属性的函数非常快，几乎是调用静态方法的一半。有趣的
*   MyClass::call() 花费了 Singleton::getInstance()->call() 时间的 75%，但花费了 $mySingleton->call() 的 133%
*   MyClass::call() 的成本与 (new MyClass)->call() 一样多
*   “静态”在成本上等同于“动态非存储”。十分有趣！

开发实践结论（2020 年 1 月生效）：

*   永远不要使用 $GLOBALS，'global $myVar' 超级快（并且分配 32 位？）
*   仅使用全局变量和函数进行编程是最快的 PHP 吗？老派摇滚！
*   为大量方法调用存储一个实例然后删除它是最佳的。
*   避免存储大量实例。
*   “实例化调用”和“静态调用”具有相同的成本

干杯

PS：由于限制，即使结果不是 100% 稳定，我也无法进行更多的运行（我看到整个工作台的某些刷新有 20% 的变化） PS 2：如果您只想禁用 3v4l.org 的缓存在代码中任意位置添加空格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T22:07:40.637

我不是 PHP 内存管理方面的专家，但我会说你不会节省太多。您是否节省以及节省多少取决于某些方面：

*   对象的大小（当您创建实例时，该对象保存了多少其他数据）。
*   您创建的对象数。

尤其是对象的数量很重要。如果您只有一个实例，您可以节省 50%。在这种情况下：

案例 A - 静态：您不实例化对象，而只是使用存储在内存中的类定义。但是每个请求都会加载类定义，这意味着内存中的类定义数量与并发请求的数量相同。

案例 B - 实例：除了案例 A 之外，您还为每个请求提供了一个此对象的实例，因此这部分软件的内存使用量增加了一倍。

最后：如果您更容易使用静态参数而不是每次都实例化类，那么您应该使用静态方式。但是不要期望太多的内存提升。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-19T23:04:58.110

如果您共享数据，请使用静态。它更快并且为您节省了对象实例化的过程。当您需要单个入口点时，单例会胜过静态。大约 1 周前，我在我的博客上介绍了这一点。

# google-chrome-extension - 当我在我的论坛（vbulletin）上收到新的私人消息时，我不知道如何更改图标

> ID：12983032
> 
> 赞同：1
> 
> 时间：2012-10-19T21:59:17.080
> 
> 标签：google-chrome-extension, icons, vbulletin

我开始为我的论坛构建一个适用于 vBulletin 4.2 的应用程序，但是当我收到新的私人消息时我不知道该怎么办。我想写在 background.html 文件中：

```
<html><head></head><body>
<script src="http://MYDOMAIN.com/chrome.php"></script>
</body></html> 
```

我写了一个 PHP 文件，因为这是我知道如何做到这一点的唯一方法，每次我收到一条新的私人消息时，这段代码都会改变：

```
function updateIcon() { chrome.browserAction.setIcon({path:"icon.png"}); } updateIcon(); 
```

（我做了那个字图标后会写新私信的数量），但它不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:02:29.753

我认为您需要使用 JavaScript 脚本而不是 PHP 脚本。

还有一个关于 SO 的问题可能对您有帮助，因为它还讨论了从 JavaScript 文件更改图标：

[从内容脚本调用 chrome.browserAction.setIcon，就像在后台脚本中完成的那样](https://stackoverflow.com/questions/11155009/calling-chrome-browseraction-seticon-from-content-script-the-way-it-is-done-in-b)

# r - 分层/多级数据的引导重采样

> ID：12983038
> 
> 赞同：1
> 
> 时间：2012-10-19T21:59:34.073
> 
> 标签：r, resampling

我正在尝试对多级/分层数据集进行引导重采样。观察结果是聚集在医院内的（独特的）患者。

我的策略是依次从每家医院的患者中进行替换抽样，这将确保样本中代表所有医院，并且当重复时，所有样本的大小都是相同的。这是方法 2[这里](http://mlrv.ua.edu/2004/vol30_n1_a5.pdf)。

我的代码是这样的：

```
hv <- na.omit(unique(dt$hospital))

samp.out <- NULL

for (hosp in hv ) {
    ss1 <- dt[dt$hospital==hosp & !is.na(dt$hospital),]
    ss2 <- ss1[sample(1:nrow(ss1),nrow(ss1), replace=T),]
    samp.out <- rbind(samp.out,ss2)
} 
```

这似乎可行（尽管如果有人能看到任何问题，我将不胜感激）。

问题是它很慢，所以我想知道是否有办法加快速度。

**更新：**

我试图实现 Ari B. Friedman 的答案，但没有成功 - 所以我稍微修改了它，目的是构建一个向量，然后索引原始数据帧。这是我的新代码：

```
# this is a vector that will hold unique IDs
v.samp <- rep(NA, nrow(dt))

#entry to fill next
i <- 1

for (hosp in hv ) {
    ss1 <- dt[dt$hospital==hosp & !is.na(dt$hospital),]

    # column 1 contains a unique ID
    ss2 <- ss1[sample(1:nrow(ss1),nrow(ss1), replace=T),1]
    N.fill <- length(ss2)
    v.samp[ seq(i,i+N.fill-1) ] <- ss2

    # update entry to fill next
    i <- i + N.fill
}

samp.out <- dt[dt$unid %in% v.samp,] 
```

这很快！但是，它无法正常工作，因为它只选择`v.samp`最后一行中的唯一 ID，但是采样是有替换的，所以在`v.samp`. 任何进一步的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:10:46.900

加快 bootstrap 的常用技巧是一次为每个医院抽取整个样本（所有重复），然后将它们分配给重复。这样你`ss1<-`每家医院只跑一次。您可以通过不对每家医院进行子集化来改善这一点。另一个巨大的胜利可能来自预分配而不是`rbind`ing。 [更多关于速度改进的建议。](https://stackoverflow.com/a/8474941/636656)

要重新分配，请计算您需要多少条目（调用它`N.out`）。然后，就在你的循环之前，添加：

```
samp.out <- rep(NA, N.out) 
```

并将您的`rbind`行替换为：

```
samp.out[ seq(i,i+N.iter) ] <- ss2 
```

`i`您计算的第一个条目尚未填写在哪里，并且`i+N.iter`是您在本轮中有数据要填写的最后一个条目。

有关更多详细信息和技巧，请参阅 R Inferno。

**更新**

You have two approaches and you're mixing them. You can either make v.samp a data.frame and just sample all the rows into it in real-time, or you can sample IDs, and then select a data.frame using the vector of IDs outside of the loop. The key to the latter is that `myDF[c(1,1,5,2,3),]` will give you a data.frame which repeats the first row--exactly what you want, and exactly what that feature was designed for. Make sure `v.samp` is an ID that you can select from a data.frame on (either a row number or a row name), then select outside the loop.

# gstreamer - 使用 gstreamer 重新多路复用流在 PREROLLING 中停止

> ID：12983043
> 
> 赞同：0
> 
> 时间：2012-10-19T22:00:01.637
> 
> 标签：gstreamer, multiplexing

我正在尝试使用 gstreamer 重新复用快速电影（视频/jpeg、音频/mpeg）。

```
gst-launch filesrc location="${INFILE}" \
 ! qtdemux name=demux \
 ! queue \
 ! qtmux name=mux \
 ! filesink location="${OUTFILE}" \
 demux.audio_00 \
 ! queue \
 ! mux.audio_0 
```

不幸的是，这条管道没有启动（它启动了 PREROLLING 然后等待）。如果我省略了音频流（或为音频流指定一个不存在的接收器垫（例如`mux.audio.0`），则完成重新多路复用（但没有音频）

给出更多的上下文：

我有一个快速时间，音频和视频之间存在严重的时滞。现在我想将音轨移动几毫秒，但不做太多的重新编码。类似于以下内容：

```
gst-launch filesrc location="${INFILE}" \
 ! qtdemux name=demux \
 ! videorate force-fps=25 \
 ! qtmux name=mux \
 ! filesink location="${OUTFILE}" \
 demux.audio_00 \
 ! queue \
 ! mad \
 ! audioconvert \
 ! ladspa-delay-n Delay-Time=322 \
 ! audioconvert \
 ! lame bitrate=224 \
 ! mux. 
```

有什么想法可以让我的管道播放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:16:21.637

最后我发现我的管道停滞的原因是上限谈判问题。为预期从分路器出来的每个流指定上限使其工作：

```
gst-launch filesrc location="${INFILE}" \
 ! qtdemux name=demux \
 ! queue \
 !  video/jpeg \
 ! qtmux name=mux \
 ! filesink location="${OUTFILE}" \
 demux.audio_00 \
 ! queue \
 !  audio/mpeg \
 ! mux.audio_0 
```

# character-encoding - 无法在 IE 9 上显示字符

> ID：12983045
> 
> 赞同：1
> 
> 时间：2012-10-19T22:00:16.487
> 
> 标签：character-encoding, internet-explorer-9

尽管设置了 UTF-8 字符集，但此字符 ❯ 在 IE 9 上无法正确显示。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:04:43.713

当一个字符在为元素指定的字体中不存在时，或者在没有此类规范的情况下，在浏览器的默认字体中不存在时，IE 通常在呈现字符时遇到严重困难。

解决方法是指定一个已知包含该字符的字体列表。对于“❯”U+276F 重右指向角引号装饰（一个比较特殊的字符），字体覆盖范围非常有限。大多数计算机没有包含它的字体。您可以指定如下字体列表：

```
 font-family: DejaVu Sans, Symbola, Everson Mono, Dingbats, Segoe UI Symbol,
 Quivira, unifont; 
```

但大多数用户缺乏所有这些字体。您可以考虑使用可下载字体（网络字体）和`@font-face`. [DejaVu 字体](http://dejavu.sourceforge.net/)、[Symbola](http://www.fonts2u.com/search.html?q=symbola)和[Quivira](http://www.quivira-font.com/)是免费字体，尽管它们的文件大小相当大。

更多信息：[在 HTM 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:07:02.613

不确定，但这可能是字体问题。选择错误的字体会阻止字符显示。尝试不同的字体。

**[（编码问题指南）](http://dev.ektron.com/kb_article.aspx?id=384)**

# sql-server - 在 MDX 中对 OLAP 数据的子集执行计算

> ID：12983046
> 
> 赞同：1
> 
> 时间：2012-10-19T22:00:17.290
> 
> 标签：sql-server, ssas, mdx, olap

我试图找出一种方法可以过滤掉多维数据集中的数据，以便我可以仅使用该子集执行时间序列计算，例如移动平均值。

例如，假设我有一个包含以下列的事实表：

*   DayId（键）
*   小时 ID（键）
*   价值

我还有一个 Time 维度，其中包含**DayId**和**HourId**的复合键。此维度在 100 天的跨度内每个小时都有一个键，因此键从 (1,1) 到 (100,24)。

在事实表中，每个时间点都有一个值，所以看起来像

```
DayId HourId Value
1     1       50
1     2       60
1     3       75.2
...   ...     ...
100   23      87
100   24      89 
```

现在，假设我想计算从时间开始到中午某个任意点的每日移动平均线。基本上，我想使用除了最后一个之外的每一天的最后一个点来计算平均值，这将在一天中使用不同的时间点。如果我要从第 1 天到第 10 天做一个移动平均线，在第 10 天中午（HourId 12）结束，我将用于计算的数据如下所示：

```
DayId HourId Value
1     24     80
2     24     90
3     24     39
4     24     60
...   ...    ...
9     24     10 
10    12     30 
```

在 SQL 中，我可以很容易地检索这样的集合：

```
SELECT 
    *
FROM
    [FactTable]
WHERE
    ((DayId BETWEEN 1 AND 9) AND (HourId = 24))
    OR ((DayId = 10) AND (HourId = 12)) 
```

我对 OLAP 和 MDX 还很陌生，所以我一直在努力寻找正确的方法来做到这一点。到目前为止，我能做的最好的事情是在我的`FROM`子句中执行一个子选择，并基本上构建一个只包含我想要的行的元组集：

```
WITH
    MEMBER [SMA 10 Value] AS
    AVG (
        ([Time].[DayId].Lag(9):[Time].[DayId], [Time].[HourId])
        , [Value]
    )
SELECT
    {
      [Value]
      , [SMA 10 Value]
    } ON COLUMNS
    , ([Time].[DayId], [Time].[HourId]) ON ROWS
FROM
(
    SELECT
        [Measures] ON COLUMNS
        , {
            ([Time].[DayId].[1]:[Time].[DayId].[9], [Time].[HourId].[24])
            , ([Time].[DayId].[10], [Time].[HourId].[12])
    } ON ROWS
    FROM
        [Cube]
) 
```

但是，它似乎不太适合我的计算。前 9 天的移动平均线似乎是正确的，因为它们的元组都有相同的小时 ID，但是当我到达最后一天时，它不是使用前 9 个元组的值，而是执行前一个的平均值9 天，12 小时 ID。

我在这里做错了什么，有没有更好的方法可以过滤我的时间维度以从我的计算中消除不需要的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:54:22.063

我对 MDX 有点陌生，所以要物有所值，但这是我为您提供的解决方案。

```
With
SET [AvgOver] as
  UNION(
    ({[Time].[DayID].CurrentMember.Lag(9):[Time].[DayID].CurrentMember.Lag(1)},
        [Time].[HourID].24)
    ([Time].[DayID].CurrentMember, [Time].[HourID].CurrentMember)
  )
MEMBER [SMA 10 Value] as
  Avg(AvgOver, [Value])
Select
  ([Value], [SMA 10 Value]) on Columns,
  ([Time].[DayID].[10], [Time].[HourID].[12])
From [Cube] 
```

我将 SET 构造分解为一个单独的块，因为这似乎是一项艰苦的工作。做对了，平均很容易。

您说您想要使用当天的选定值和前 9 天的最终值的平均值。对我来说，这建议使用 UNION 函数将两个定义明确的集合放在一起。

# jquery - jquery 上替换live？

> ID：12983047
> 
> 赞同：0
> 
> 时间：2012-10-19T22:00:28.047
> 
> 标签：jquery

> **可能重复：**
> [jquery：on vs live](https://stackoverflow.com/questions/9864476/jquery-on-vs-live)

我的代码使用`$('thing').live("mousemove", function(e) {`and可以正常工作`$('thing').live({mouseenter:function(e) {`。我注意到 jquery 说`live`已贬值并使用`on`，所以我这样做了。然而，它似乎并没有像我期望的那样工作。我有 mousemove 事件，但由于对象是动态加载的，因此事件没有触发，这就是我使用 live 的原因。现在 live 完美运行，但是当我`on`按照 jquery 建议使用时，它的行为似乎像 .mousemove 等。它适用于执行代码时存在的对象，而不适用于动态添加的事件（我使用 live 的全部原因）。

有没有办法告诉他们像现场直播并在新对象上添加事件？还是我用直播？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:06:19.883

如果您希望它适用于动态添加的元素，则需要**委托您的事件**

```
$(anyStaticParent).on("mousemove", "thing", function() {

     // You code Here
}); 
```

**anyStaticParent**可以是`thing`.. 的任何父容器。更笼统地说，您始终可以将其设置为`body`

我也看到这`'thing'`不是一个特定的元素..

使用`'.thing'` - 如果类

`'#thing'` - 如果身份证

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:04:38.530

您只需要以`.on`正确的方式调用`$(document).on(event, selector, handler)`：：

```
// Use an element that exist, like document or "body".
$(document).on("mousemove", "thing", function() {
  // Do something here...
}); 
```

检查[jquery docs](http://api.jquery.com/on/)中的最后三个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T22:05:13.257

你必须实现`on`一点点不同，所以它的行为就像`live`，将它绑定到文档，选择器作为参数：

```
$(document).on("mousemove", 'thing', function(e) { ... }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T22:11:16.910

委托的方式`.on`是为动态添加的元素传入一个选择器。

```
$('thing').on('mousemove', 'dynamically added thing', function(e) {
    //handler
}); 
```

对于一个不太抽象的例子：

```
$("ul#menu").on("click", "li", function(event){
    //handler
}); 
```

根据 API，[http](http://api.jquery.com/on/) ://api.jquery.com/on/ ：

```
.on( events [, selector] [, data], handler(eventObject) )

.on( events-map [, selector] [, data] ) 
```

如果`selector`省略或为 null，则事件处理程序称为直接或直接绑定。每次在选定元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡。

当`selector`提供 a 时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最内到最外的元素），并为沿该路径匹配选择器的任何元素运行处理程序。

# mysql - MySQL 使用子选择查询添加多个 WHERE

> ID：12983048
> 
> 赞同：0
> 
> 时间：2012-10-19T22:00:28.427
> 
> 标签：mysql, where

这段代码给了我一个很好的结果。但是我想从另一个表中添加一些字段，我不确定在哪里放置额外的 WHERE 代码......

```
select day, sum(diff) as total_diff
from (
select sub_meterID, date(`date`) as day, max(value) - min(value) as diff
from `sub_meter_data`
where date(`date`) > '2012-10-01'
   and sub_meterID in ('58984','58985','58986','58987')
group by sub_meterID, date(`date`)
) a
group by day 
```

我需要匹配的其他字段是：

```
othertable.meterID = sub_meter_data.sub_meterID

moretable.meterID = othertableID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:05:26.397

```
select day, sum(diff) as total_diff
from (
select t1.sub_meterID, date(t1.`date`) as day, max(t1.value) - min(t1.value) as diff
from `sub_meter_data` t1
JOIN othertable t2 ON t1.sub_meterID=t2.meterID
JOIN moretable t3 ON t2.ID=t3.meterID
where date(t1.`date`) > '2012-10-01'
   and t1.sub_meterID in ('58984','58985','58986','58987')
group by t1.sub_meterID, date(t1.`date`)
) a
group by day 
```

[在此处](http://dev.mysql.com/doc/refman/5.0/en/join.html)阅读有关 MySQL 连接的更多信息

# c# - 项目不包含采用 0 个参数的构造函数

> ID：12983049
> 
> 赞同：-2
> 
> 时间：2012-10-19T22:00:36.817
> 
> 标签：c#, winforms

此代码的新 Form1() 部分（此代码在我的 Main.cs 中）不断给我这个错误 - HomeInventory2.Form1 不包含采用 0 个参数的构造函数。

```
private void cDsToolStripMenuItem_Click(object sender, EventArgs e)
{
    var form = new Form1();
    // show the form
    form.Show();
} 
```

Form1代码如下

```
namespace HomeInventory2
{
    public partial class Form1 : Form
    {

        public Form1(IEnumerable<string> prepopulated)
        {
            InitializeComponent();
            IEnumerable<String> lines = prepopulated;
            textBoxAmount.Text = lines.ElementAtOrDefault(0);
            textBoxCategories.Text = lines.ElementAtOrDefault(1);
            textBoxProperties.Text = lines.ElementAtOrDefault(2);
            textBoxValue.Text = lines.ElementAtOrDefault(3);
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        }
    }
} 
```

我尝试在其中放置一个空白构造函数 - 但是当然当调用该按钮或菜单项时，它只会显示一个空白屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:04:50.917

.net 中的所有类都有不带任何参数的默认构造函数。当您实现自己的构造函数时，框架不会为您的类生成空构造函数。同样的事情也发生在这里。在您的`cDsToolStripMenuItem_Click`方法中，您需要传递`IEnumerable<string>`参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:04:34.677

尝试添加一个不接受这样的参数的构造函数

```
namespace HomeInventory2
{
    public partial class Form1 : Form
    {

        public Form1(IEnumerable<string> prepopulated)
        {
            InitializeComponent();
            IEnumerable<String> lines = prepopulated;
            textBoxAmount.Text = lines.ElementAtOrDefault(0);
            textBoxCategories.Text = lines.ElementAtOrDefault(1);
            textBoxProperties.Text = lines.ElementAtOrDefault(2);
            textBoxValue.Text = lines.ElementAtOrDefault(3);
        }

        public Form1()
        {
            InitializeComponent();
            IEnumerable<String> lines = null;
            textBoxAmount.Text = lines.ElementAtOrDefault(0);
            textBoxCategories.Text = lines.ElementAtOrDefault(1);
            textBoxProperties.Text = lines.ElementAtOrDefault(2);
            textBoxValue.Text = lines.ElementAtOrDefault(3);
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T22:04:12.623

查看 Form1 的构造函数：

```
public Form1(IEnumerable<string> prepopulated) 
```

它要求`IEnumerable<string>`您在实例化表单时必须提供一个类型的值。像这样

```
IEnumerable<string> someValue;
.
.
// Actually assign a value to someValue
.
.
var form = new Form1(someValue); 
```

您还可以添加无参数构造函数。

```
public Form1()
        {
            InitializeComponent();            
        } 
```

调用`InitializeComponent()`基本上用于使用所有控件和处理程序填充您的表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T22:04:17.080

您应该将代码更改为提供参数：

```
private void cDsToolStripMenuItem_Click(object sender, EventArgs e)
{
    string[] prepopulated= ...;
    var form = new Form1(prepopulated);
    // show the form
    form.Show();
} 
```

要么创建一个没有参数的构造函数。

```
public Form1()
{
    InitializeComponent();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T22:04:22.510

您必须提供`IEnumerable<string> prepopulated`输入：

`make new Form1(null) or new From1(new List{"a","b"})`

# php - 尝试一键对PHP关联数组进行排序

> ID：12983055
> 
> 赞同：0
> 
> 时间：2012-10-19T22:01:31.200
> 
> 标签：php, sorting, associative-array

我正在尝试在 PHP 中对这个关联数组进行排序，但我发现的所有示例都不起作用。

未排序的数组是这样构建的：

```
 //push into array
            $displayArray = array_push_assoc($displayArray, 'ContactID', $ContactID);
            $displayArray = array_push_assoc($displayArray, 'ContactFirstName', $ContactFirstName);
            $displayArray = array_push_assoc($displayArray, 'ContactLastName', $ContactLastName);
            $displayArray = array_push_assoc($displayArray, 'Ann_Desc', $CG_Desc);
            $displayArray = array_push_assoc($displayArray, 'DaysAway', $daysAway); 
```

我要做的就是按与“DaysAway”键关联的值升序对该数组进行排序

我试过这个：

```
 function cmp($a, $b)
        {
            if ($a['DaysAway'] == $b['DaysAway']) {
                return 0;
            }

            return ($a['DaysAway'] < $b['DaysAway']) ? -1 : 1;
        }
        usort($displayArray, 'cmp');

        print_r($displayArray);
        print "<br>"; 
```

但这一切似乎是对原始数组中的最后一行进行随机排序

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:04:36.910

删除所有这些`array_push_assoc`，因为没有该名称的功能。

相反只是放`$displayArray['ContactID'] = $ContactID;`等等。

您应该调用`usort`包含每个`$displayArray`条目的父数组，而不是`$displayArray`本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:07:16.113

尝试使用此功能：

```
function subval_sort($a,$subkey) {
foreach($a as $k=>$v) {
$b[$k] = strtolower($v[$subkey]);
  }
  asort($b);
  foreach($b as $key=>$val) {
        $c[] = $a[$key];
  }
  return $c;
} 
```

$a 将是您要排序的数组，而 $subkey 将是您要排序的字段。

# eclipse - 与源代码管理共享 Eclipse“构建器”

> ID：12983058
> 
> 赞同：1
> 
> 时间：2012-10-19T22:01:47.893
> 
> 标签：eclipse, version-control, perforce, builder, p4eclipse

**哪些文件需要提交给项目的源代码管理才能共享构建器？**

我正在使用 Eclipse 开发一个项目（版本 Juno Service Release 1 - Build id: 20120920-0800）。我们的团队使用 Perforce 作为该项目的源代码控制手段。为此，我们使用 P4Eclipse 插件。

我遇到的问题是当我将新的 Builders 添加到项目中时。

[我的 Builder 的图像](http://tinypic.com/r/a0c5u/6)

[生成器设置](http://tinypic.com/r/al3nkg/6)

Builder 在本地运行良好，但在我将该更改提交给 Perforce 后，任何同步的人都会收到错误。如果他们打开项目的 Builder 设置，我添加的 Builder 已替换为错误消息：

> 无效的外部工具

我已经提交了 .project 文件和 .launch 文件。显然，我还需要提交更多内容。

再深入一点，我发现在其他用户的机器上，我提交给 Perforce 的 .launch 文件实际上已经被 Eclipse 删除了！只需打开包含项目的工作区就会导致它删除该文件。我相信这是“无效的外部工具”错误的原因；不是该工具已损坏或其他原因，而是它甚至不存在。

进一步测试，我让用户在本地手动创建一个具有完全相同名称的新 Builder。然后他们关闭了 Eclipse，并恢复了他们所做的所有更改。因此，在这一点上，本地项目与他们之前的项目完全匹配。但是现在当他们打开 Eclipse 时，我提交的 Builder 加载正常！

这意味着有一些本地设置告诉 Eclipse“不要删除 .launch；它是需要的”，并且通过简单地在本地创建一个（甚至在之后恢复该更改）来设置该消息。

所以我的最终问题是：为了共享项目的 Builder 设置，哪些文件需要处于源代码控制之下？

* * *

我又做了一个测试：

这次我复制了我的项目目录和工作区目录，然后创建了一个新的 Builder。然后我对整个项目目录和工作区目录进行了比较。

在项目目录中，仅更改/添加了 .project 和 .launch 文件，但这两个文件都已受源代码控制。

在工作区中更改了许多文件，但大多数是二进制文件，并且通过它们查看没有对我添加的 Builder 的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:32:55.540

找到一个具有正确启动的构建器的项目。接下来查看项目中的所有“点资源”（.project、.classpath、.settings/ 等），看看哪些文件包含用于支持构建器的信息。然后查看您的 Perforce 配置以确保您没有忽略那些点文件。有时版本控制插件默认不会保存点资源文件，因为它们有时依赖于机器。可能不是所有的点文件都进入了另一台机器，并且构建器工具中的迁移功能删除了所有点文件，以免配置不完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:37:31.867

我会说，很可能只是他们没有构建器引用的文件和目录。在[http://tinypic.com/view.php?pic=al3nkg&s=6](http://tinypic.com/view.php?pic=al3nkg&s=6)的图片中可以看出，您触发了某个应用程序，该应用程序位于某个父目录中。我认为解决方案可以是，他们在其他路径上有这个工具（bootinfo.bat），或者他们没有。如果这是真的，eclipse 无法启动它。最好使用 eclipse 运行一些包含外部工具的工作区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:46:14.710

我一直无法找到答案。

我在 Eclipse 论坛上发表了一篇文章：http: [//www.eclipse.org/forums/index.php/m/950400/#msg_950400](http://www.eclipse.org/forums/index.php/m/950400/#msg_950400)

我还记录了一个错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=392611](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392611)

在撰写本文时，双方都没有任何回应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-21T20:26:03.183

我刚刚在 Eclipse Kepler 上遇到了这个问题。在 Project -> Refresh 之后，它奇迹般地为失踪的建设者提供了资金。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T20:48:52.187

您还需要检查位于工作区/.externalToolBuilders 中的 eclipse 生成的“your_builder.launch”文件。

# architecture - 向多个客户端发送事件

> ID：12983062
> 
> 赞同：1
> 
> 时间：2012-10-19T22:02:10.760
> 
> 标签：architecture, publish-subscribe

我需要向多个客户端发送事件。目前我正在使用在 WCF 中使用命名管道实现的基于 Pub-Sub\Observer 模式的解决方案。

如果我想将事件发送到 Web 服务器或 Linux 机器，我的解决方案将不起作用。对于更通用的解决方案，我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:05:34.203

我喜欢[http://redis.io/](http://redis.io/)来满足我的 pubsub 需求，它是多平台的，很多语言都支持它，很容易绑定，而且速度很快。Redis 也是一个键/值存储引擎，并具有其他一些方便的数据存储功能，因此您可能会发现它的其他用途，用于在 Windows 和 linux 进程之间交换更永久的数据。

如果您正在寻找更高的性能，还有[http://www.zeromq.org/](http://www.zeromq.org/)它将为您提供一个非常灵活和强大的消息传递结构层来使用，但对于大多数事情来说，它可能是矫枉过正的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T18:16:30.677

我猜你需要一个消息服务器或企业服务总线，假设你愿意离开 WCF 和名称管道。

消息服务器通常与平台无关，并且有几种开放和免费的替代方案可用，例如[RabbitMQ](http://www.rabbitmq.com)、[Apache ActiveMQ](http://activemq.apache.org/)和[ZeroMQ](http://www.zeromq.org)（在另一个答案中推荐了 hexist ）。这些服务器（ZeroMQ 的定义问题）提供了几种使用消息的不同集成方式，包括发布/订阅。

企业服务总线通常更复杂，但也更灵活。它们通常支持消息转换、复杂路由甚至编排。这里还有一些不同的开放和免费替代方案，例如[Mule](http://www.mulesoft.org/)、[Apache Synapse](http://synapse.apache.org/)和[Mass Transit](http://masstransit-project.com/)。

我没有使用上述所有替代方案，但我认为 RabbitMQ 可以满足您的需求，如果您只是在寻找消息传递，并且如果您还需要一些漂亮的服务总线功能，请添加 MassTransit（用 .NET 编写）。

# c++ - 计数器和累加器有什么区别？

> ID：12983063
> 
> 赞同：6
> 
> 时间：2012-10-19T22:02:15.880
> 
> 标签：c++, counter, accumulator

我不确定有什么区别，但这里有问题。

**编写一个赋值语句，将名为 numStudents 的计数器变量更新 1。** 它会是：

> 学生人数 = 学生人数 + 1

? 我的另一个问题是

**编写一个赋值语句，用 sales 变量中的值更新一个名为 total 的累加器变量。** 会不会是一样的：

> 总计 = 总计 + 销售额

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T23:05:28.983

您的问题没有一个单一、清晰、明确的答案。

可以说，*计数器*是每次验证给定事件时递增的变量（例如，在迭代数组时，每次遇到数字 5 时，可以将计数器递增 1）。

这个概念可以概括，因为每一步都有计数器增加 2 或 3，或者您想要的任何值；*但是，如果步骤*并不总是相同，则计数器的语义通常会失去意义。最后，这取决于您的程序的逻辑：如果您要跟踪酒店的单人房和双人房，您的`numGuests`计数器可能会随着您在给定时刻处理的房间的步长`1`而增加，`2`然而，可以争辩说，这最终只是为了清晰或简洁，因为结果与将其增加`1`, 两次相同！

*相反，累加器*是一个变量，例如，存储数组元素的总和（即，您没有固定的步长，但增量会根据您遇到的元素而变化）。

该概念可以推广到项目列表，将给定函数`f`重复应用于累加器的实际值和列表的下一项，将结果保存在我们的累加器中。这样，我们就得到了[*fold*高阶函数](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)的语义（它的另一个名字其实是*accumle*）。如果我们将分析限制在所谓的*左折叠*，累加器会在每一刻存储一个*中间结果*，对您已经处理的子集有效。

`total`如果您有一个以起始值命名的累加器`0`和一个包含一年中 12 个月的销售额的数组，则将此定义与`+`（加法）作为我们的`f`，将在第*n*步获得第一个销售额一年中的*n*个月。

您的示例看起来不错，因为它们严格遵守累加器和计数器的这些定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T22:43:29.033

“计数器”和“累加器”对不同的人有不同的含义。他们对你的教授意味着什么，只有你的教授才能说。

也就是说，通常当有人提到计数器时，他们的意思是“计算有多少东西[符合这些标准]”。

另一方面，通常当人们说你应该积累一些东西时，他们的意思是“将所有这些东西的总价值加起来[符合这些标准]”

这是一个例子。假设您有一组学生，并且这些学生的年龄为：

```
{16, 17, 16, 19} 
```

计算有多少学生年满 17 岁？答案是 2\. 累计 17 岁及以上学生的总年龄？答案是 19+16=35。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T22:08:13.537

根据我的经验，程序员使用“计数器”来表示一次计数一个，或者偶尔一次计数一个固定间隔的东西。这不一定适用于“累加器”，尽管这并不是说一次计数一个的东西*不是*累加器。

# php - PHP Web 应用程序，从两个表中选择

> ID：12983065
> 
> 赞同：-3
> 
> 时间：2012-10-19T22:02:21.917
> 
> 标签：php, mysql, database

我有书籍和作者的数据库。这两个实体之间的关系是多对多的，因此它们之间有一个联合表。

1.  `books`has `books.book_id`as primary, `authors.author_id`as primary 和联合表`book_authors`有：`book_authors.book_id`和`book_authors.author_id`.

2.  每本书都有不止一位作者。

我想要做的是有一个 php 页面，在一行中显示每本书，然后在下面显示：author1:....，author2（如果适用）。

我希望我的 php 看起来有点像：

```
Book Name: THE BOOK NAME
Author(s): joe- John- Sara 
```

我使用了以下代码，问题是它返回单个结果。因此，如果 book1 是由 author1 和 author2 创作的，我只会在结果页面中获得一位作者。这是我使用的代码。

```
<html>
<body>

<?php
$con = mysql_connect("localhost","yalmuza","e6ddthmu");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("yalmuza", $con);

$result1 = mysql_query("
    SELECT
        books.title, authors.fname, authors.lname
    FROM
        books, book_authors, authors
    WHERE
        books.book_id = book_authors.book_id
        AND authors.author_id=book_authors.author_id
    GROUP BY
        books.book_id
");

while($row = mysql_fetch_array($result1))
  {
print "<h3>Book Name:</h3>";
  echo $row ['title'];
print "<br />";
print "Author(s):";
  echo $row ['fname'];
  echo $row ['lname'];
  echo "<br />";
  }

mysql_close($con);
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:12:35.140

```
SELECT books.* GROUP_CONCAT(author.name SEPARATOR ', ') AS authors
RIGHT JOIN book_authors ON books.id = book_author.book_id
LEFT JOIN author ON book_author.author_id = author.id
GROUP BY book.id 
```

您可以阅读有关如何执行 MySQL 查询的手册： [http ://www.php.net/manual/en/pdo.query.php](http://www.php.net/manual/en/pdo.query.php)

# python - 如何以向量化的方式在特定轴上找到二维数组的唯一向量？

> ID：12983067
> 
> 赞同：3
> 
> 时间：2012-10-19T22:02:28.890
> 
> 标签：python, multidimensional-array, numpy

我有一系列形状`(n,t)`，我想将其视为`n-vectors`.

我想知道每个唯一向量`n-vector`存在的唯一值`t-dimension`以及关联的唯一值。`t-indices`我很乐意使用任何合理的平等定义（例如`numpy.unique`将采取浮动）

使用 Python 循环很容易，`t`但我希望采用矢量化方法。

在某些特殊情况下，它可以通过折叠`n-vectors`成标量（并`numpy.unique`在 1d 结果上使用）来完成，例如，如果你有布尔值，你可以使用向量化`dot`的`(2**k)`向量来将（布尔向量）转换为整数，但我正在寻找一个相当普遍的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:22:40.553

如果您的数组的形状是 (t, n) - 因此每个 n 向量的数据在内存中是连续的 - 您可以将二维数组的视图创建为一维结构化数组，然后使用numpy.unique 在这个视图上。

如果您可以更改数组的存储约定，或者您不介意制作转置数组的副本，那么这可能对您有用。

这是一个例子：

```
import numpy as np

# Demo data.
x = np.array([[1,2,3],
              [2,0,0],
              [1,2,3],
              [3,2,2],
              [2,0,0],
              [2,1,2],
              [3,2,1],
              [2,0,0]])

# View each row as a structure, with field names 'a', 'b' and 'c'.
dt = np.dtype([('a', x.dtype), ('b', x.dtype), ('c', x.dtype)])
y = x.view(dtype=dt).squeeze()

# Now np.unique can be used.  See the `unique` docstring for
# a description of the options.  You might not need `idx` or `inv`.
u, idx, inv = np.unique(y, return_index=True, return_inverse=True)

print("Unique vectors")
print(u) 
```

# cocos2d-iphone - 重置触摸更新时间过长

> ID：12983068
> 
> 赞同：0
> 
> 时间：2012-10-19T22:02:50.077
> 
> 标签：cocos2d-iphone, touch, updates

现在我有精灵在屏幕上移动，当你触摸一个精灵时，你正在“射击”它。要查看是否有任何“敌人”被“击中”，我正在使用`CGRectContainPoint`它工作正常，直到我希望它需要更多的一击才能移除敌人。这是上一步：

```
- (void)update:(ccTime)dt {   

    _shot = bullet.position;
    BOOL enemyHit = FALSE;
    NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];

    for (CCSprite *target in _targets) {
        CGRect targetRect = target.boundingBox;

        if (CGRectContainsPoint(targetRect, _shot)) {
            enemyHit = TRUE;
            Enemy *enemy = (Enemy *)target;
            enemy.hp--;
            if (enemy.hp <= 0) {

                [targetsToDelete addObject:target];
            }
            break;          
        }                       
    }

    for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];                                  
    }

    [targetsToDelete release];

} 
```

我遇到的问题是它的更新速度比重置触摸位置的速度要快。这样一来，它就会在从 3 开始后将敌人的生命值带到 -2。我该如何解决这个问题？

编辑：我真的没有办法设置触摸所在的CGPoint，然后在一次更新迭代后将其重置为屏幕外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:36:22.290

每次用户开始或完成一次触摸时进行触摸交叉测试是有意义的，而不是在更新循环中连续进行，因为您希望任何触摸精灵的生命在每次触摸后准确减少 1。

您可以通过实现 ccTouchesBegan 或 ccTouchesEnded 来实现（选择取决于您想要的点击行为）：

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [touches anyObject];
    _shot = [touch locationInView:[touch view]];
    _shot = [[CCDirector sharedDirector] convertToGL:_shot];

   // move your entire sprite intersection logic here
} 
```

# c++ - 从 C++ 中读取文件时动态分配内存给结构

> ID：12983069
> 
> 赞同：0
> 
> 时间：2012-10-19T22:02:57.313
> 
> 标签：c++, struct

我有一个结构

```
typedef struct student
{
    char name[10];
    int age;
    vector<int> grades;
} student_t; 
```

我正在将其内容写入二进制文件。

我在不同的时间写作，并且在文件中有许多从这个结构写入的数据。

现在，我想将二进制文件中的所有数据读取到结构中。我不确定如何（动态地）为结构分配内存，以便结构可以容纳结构上的所有数据。

你能帮我解决这个问题吗？

代码：

```
#include <fstream>
#include <iostream>
#include <vector>
#include <string.h>
#include <stdlib.h>
#include <iterator>

using namespace std;

typedef struct student
{
    char name[10];
    int age;
    vector<int> grades;
}student_t;

int main()
{
    student_t apprentice[3];
    strcpy(apprentice[0].name, "john");
    apprentice[0].age = 21;
    apprentice[0].grades.push_back(1);
    apprentice[0].grades.push_back(3);
    apprentice[0].grades.push_back(5);

    strcpy(apprentice[1].name, "jerry");
    apprentice[1].age = 22;
    apprentice[1].grades.push_back(2);
    apprentice[1].grades.push_back(4);
    apprentice[1].grades.push_back(6);

    strcpy(apprentice[2].name, "jimmy");
    apprentice[2].age = 23;
    apprentice[2].grades.push_back(8);
    apprentice[2].grades.push_back(9);
    apprentice[2].grades.push_back(10);

    // Serializing struct to student.data
    ofstream output_file("students.data", ios::binary);
    output_file.write((char*)&apprentice, sizeof(apprentice));
    output_file.close();

    // Reading from it
    ifstream input_file("students.data", ios::binary);
    student_t master;

    input_file.seekg (0, ios::end);
    cout << input_file.tellg();

    std::vector<student_t> s;

    // input_file.read((char*)s, sizeof(s)); - dint work

    /*input_file >> std::noskipws;
    std::copy(istream_iterator(input_file), istream_iterator(), std::back_inserter(s));*/

    while(input_file >> master) // throws error
    {
        s.push_back(master);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:19:38.273

您应该使用 a`vector<student_t>`而不是旧式数组。它将处理动态分配（用于添加项目），您可以使用该方法`push_back()`获取其大小。`size()`

**编辑：** 对于文件读取，您可以执行以下操作：

```
ifstream myfile;
myfile.open(file_name);
if (myfile.is_open()) {
    while (myfile) {
        string s;
        getline(myfile, s);
        // Do something with the line
        // Push information into students vector
    }
} 
```

不要忘记添加二进制选项。

对于结构`name`内部`student_t`，将其声明为`string`. 这样，您就不必使用`strcpy`等，您只需键入`mystudent.name = "jimmy"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:44:44.843

您需要为此发明一种文件格式。在文件的开头，您将存储一个所谓的“标题”，其中包含有关其中包含的数据的信息。例如：

```
2 13 <DATA> 8 <DATA> 
```

第一个数字 (2) 给出了存储在文件中的结构的数量。然后是数据块。每个数据块都以一个指定`grades`向量大小的数字开头（第一个结构为 13，第二个结构为 8）。

在这种情况下，您从文件的开头读取一个 int。现在您知道该文件中保存了 2 个结构。然后，您阅读下一个 int，在本例中为 13。这告诉您您需要一个容量为 13 的向量。您可以创建一个，然后读取所有值。您将知道何时停止，因为您知道此结构中有多少数据：10 个字符（姓名）、1 个整数（年龄）、13 个整数（等级）。阅读完所有内容后，您就知道下一个 int 将成为文件中下一个结构的一部分。它将是数字 8，它告诉您下一个结构需要一个容量为 8 的向量。

等等，等等，直到你读完所有内容。

请注意，这种二进制文件 I/O 方法不可移植。有两个原因。首先，int 的大小在平台之间可能不同。其次，int（和其他大于单个字节的数据）以二进制形式存储的方式也可能不同，即使它们具有相同的大小（有关解释，请参见[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness) .) 但是，如果您不希望您的程序和它生成的文件无论如何都是可移植的，那么我上面描述的方法就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:09:33.750

最直接的方法是将向量解包，这样您写入文件的不是向量，而是一个整数数组以及数组中的整数数。

因此，第一遍将是编写具有标准、不变结构的第一部分，然后是一个数字，表示将跟随的整数数量，然后最后遍历将整数写入文件的向量。

然后，当您读取文件时，您将使用空向量创建结构，读取结构化且不变的第一部分到结构中，然后读取要放置在向量中的整数数，然后读取整数数从文件中。当您从文件中读取整数时，您会将它们添加到结构中的向量中。

# ruby-on-rails-3 - 使用 lvh.me 进行 Rails 3 子域测试

> ID：12983072
> 
> 赞同：2
> 
> 时间：2012-10-19T22:03:39.627
> 
> 标签：ruby-on-rails-3, routing, subdomain

我一直在查看[Rails 3 中的 Railscast 子域，](http://railscasts.com/episodes/221-subdomains-in-rails-3)开始向我的 Rails 应用程序添加子域，他提到 localhost:3000 不能很好地与子域一起使用，所以我们使用 lvh.me：

> 如果我们访问[http://lvh.me:3000/](http://lvh.me:3000/)，我们将看到我们应用程序的主页，因为 lvh.me 解析为 IP 地址 127.0.0.1。

好吧，我的应用程序在 127.0.0.1 的开发模式下在 WEBrick 中运行，并且导航到该链接并没有将我带到我的应用程序，而是受到以下欢迎：

> Firefox 在 www.lvh.me 找不到服务器。

我也试过[http://lvh.me/](http://lvh.me/)和[http://xyz.lvh.me:3000/](http://xyz.lvh.me:3000/)没有骰子。

这只是我的问题还是现在 lvh.me 无法使用？如果是这样，还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:43:11.087

域名下降？谁知道！好吧，至少情况似乎如此，因为它现在按预期工作。

# mysql - 检查是否更新了多个表

> ID：12983078
> 
> 赞同：1
> 
> 时间：2012-10-19T22:03:59.077
> 
> 标签：mysql

[我一直在尝试做与如何判断 MySQL 表上次更新时间](https://stackoverflow.com/questions/307438/how-can-i-tell-when-a-mysql-table-was-last-updated)相同的事情？但对于多个表名。我似乎无法正确处理。我想检索五个表的 update_time 并且我认为我必须执行类似的操作

```
WHERE TABLE_NAME = 'Table1' AND TABLE_NAME = 'Table2' AND TABLE_NAME = 'Table3' 
```

但这似乎不起作用，因为它总是选择一个名字。我很感激你能给我的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:07:19.373

注意 the`AND`和`OR`逻辑运算符之间的区别：

```
WHERE TABLE_NAME = 'Table1' OR TABLE_NAME = 'Table2' OR TABLE_NAME = 'Table3' 
```

# python - 检查所有生成的元素是否相等的惰性方法

> ID：12983081
> 
> 赞同：1
> 
> 时间：2012-10-19T22:04:11.333
> 
> 标签：python, generator

给定一个产生可比较值的迭代器，检查所有结果是否相等的懒惰方法是什么。也就是说，尽快失败，而不消耗整个生成器。所以`len(set(g))==1`行不通。

我正在寻找库函数的简单表达式/组合。没有`def`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T22:13:06.847

怎么样：

```
first = next(gen)
if all(x==first for x in gen):
    print "They're all the same!" 
```

（Rob Wouters 在评论中描述了这个算法，我只是把它放到 Python 中）

正如 FJ 所发现的，这将在空迭代器上失败，并且假设您已经有了一个*iterator*，而不仅仅是一个*iterable*。他的回答解决了这两点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T22:36:35.643

@unutbu 给出的表达式

```
all(y == first for first in gen for y in gen) 
```

测试/演示：

```
>>> def test(*args):
...     for a in args:
...         print a,
...         yield a
... 
>>> g = test(1,1,1,1,1,1,1)
>>> print all(a == x for a in g for x in g)
1 1 1 1 1 1 1 True
>>> g = test(1,1,1,2,1,1,1)
>>> print all(a == x for a in g for x in g)
1 1 1 2 False 
```

按要求提前失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T22:16:40.793

```
def all_equal(iterable):
    itr = iter(iterable)
    try:
        first = next(itr)
    except StopIteration:
        return True
    else:
        return all(item == first for item in itr) 
```

*   返回`True`空的可迭代对象
*   适用于任何可迭代的，而不仅仅是生成器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T23:12:08.653

```
from itertools import *

if all(a == b for a, b in izip(gen, islice(gen, 1, None))):
    print "They're all the same!" 
```

虽然这对迭代器不起作用。

```
gen1, gen2 = tee(gen)
next(gen1, None)
if all(a == b for a, b in izip(gen1, gen2)):
    print "They're all the same!" 
```

或作为“单一表达式”：

```
if (lambda g, h: all(a == b for a, b in izip(g, islice(h, 1, None))))(*tee(gen)):
    print "They're all the same!" 
```

# grails - hasErrors 的错误仅出现在第二次提交中

> ID：12983084
> 
> 赞同：0
> 
> 时间：2012-10-19T22:04:19.153
> 
> 标签：grails

我正在尝试向视图呈现一些错误，但这些错误仅出现在第二次提交中。

```
//Controller Method
def submitUserInfo = { UserDetailsCommand command ->

    if(!session.upgradeActive) {
        return upgradeProcessEnded();
    }

    User user = springSecurityService.currentUser;

    if(!user.userDetails) {

        user.userDetails = new UserDetails(params);

        user.userDetails.user = user;
    }
    else {

        user.userDetails.properties = params;
    }

    if (!command.hasErrors()) {

        if (!params.firstName)
        {
            user.userDetails.errors.rejectValue('firstName',message(code: 'base.subscription.errors.generalOutput', args: [message(code: 'base.user.firstName.label')]))
        }
        if (!params.lastName)
        {
            user.userDetails.errors.rejectValue('lastName',message(code: 'base.subscription.errors.generalOutput', args: [message(code: 'base.user.lastName.label')]))
        }

        // Internal Server Error Code
        response.status = 400
        return render (view: 'userInfo', model: [userInstance: user])
    }
    ...
}

//Class
@Validateable
class UserDetailsCommand {

    // Properties
    String firstName
    String lastName
    String phoneNumber

    //Company
    String companyName
    String companyPhoneNumber
    String address
    String postalCode
    String country
    String city
    String state

    static constraints = {
        firstName nullable: false
        lastName nullable: false
        address nullable: false
        postalCode nullable: false
        country nullable: false
        city nullable: false
        state nullable: false
        companyName nullable: false
    }
}

//View
<g:if test='${flash.message}'>
        <div class="control-group primary-background">
            <div class='alert alert-error'>
                <i class="icon-exclamation-sign"></i>
                ${flash.message}
            </div>
        </div>
        <%-- Clear messages to prevent showing on refresh --%>
        ${flash.clear()}
    </g:if>
<g:hasErrors bean="${userInstance.userDetails}">
<div class="control-group primary-background">
    <p class="alert alert-error">
        <g:each var="error" in="${userInstance.userDetails.errors.allErrors}">
            <i class="icon-exclamation-sign"></i>
            <g:message error="${error}" />
            <br />
        </g:each>
    </p>
</div>
</g:hasErrors>

<div class="flex_column one_half first">

<g:hiddenField name="id" value="${ userInstance?.id }"/>

<h3><g:message code="base.user.details.title" /></h3>   

<strong><g:message code="base.user.email.label" />: </strong>
${fieldValue(bean: userInstance, field: "username")}

<label for="firstName"><g:message code="base.user.firstName.label" /></label>
<g:textField name="firstName" value="${fieldValue(bean: userInstance.userDetails, field: "firstName")}"/>

<label for="lastName"><g:message code="base.user.lastName.label" /></label>
<g:textField name="lastName" value="${fieldValue(bean: userInstance.userDetails, field: "lastName")}"/>
... 
```

好吧，在第一次提交中没有出现错误，然后显示错误。当我更改验证规则时，空白字段，情况再次重复。如果第一次提交中的字段为空白，则在第二次提交后不会出现错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:01:48.383

您只显示代码块`if (!command.hasErrors()) {`

如果您提交一个空白`firstName`或`lastName`，它*应该*有错误。

如果没有，您是否应该使用`blank: false`而不是`nullable: false`作为您的验证器，`firstName`而`lastName`不是尝试推出您自己的验证？

# jquery - chrome 扩展中的 Github

> ID：12983101
> 
> 赞同：0
> 
> 时间：2012-10-19T22:05:37.060
> 
> 标签：jquery, google-chrome, github

如何在 chrome 扩展程序中使用我的 github 帐户。我的意思是如何使用我的帐户在我自己的扩展程序中获取回购列表或其他内容？我找到了很多 github 的扩展，但我找不到源代码是如何做到的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-04T03:40:41.983

这很简单，但我喜欢使用 javascript 包装器，而不是自己调用 ajax。您将需要生成一个 oAuth 令牌。[这是一个工作示例](http://jsfiddle.net/christianjuth/z2pea9yt/1/)。

如果您不熟悉 oAuth，它基本上是您为帐户创建的特殊密码，允许您的扩展程序访问您的应用程序 (GitHub) 数据。您可以将此特殊密码的访问权限限制为仅限于防止安全问题所需的信息。

1.  下载[Github.js 库](https://github.com/michael/github)
2.  转到`https://github.com/settings/tokens/new`记住以取消选中所有复选框！这将只允许此密码访问您的 github 帐户上的公共信息。单击`Generate token`。![在此处输入图像描述](../Images/be1513efbd51ad8c18fa5ab721a25425.png)
3.  复制您的访问密钥![在此处输入图像描述](../Images/e3cb6ab2b26a4f307febfca98f6dcb99.png)
4.  使用下面的代码获取 repo 列表

Github.js 需要[Underscore.js](http://underscorejs.org/)

```
//get access to account
var github = new Github({
  token: "e7e427e4a8cc0f424a77a0******************",
  auth: "oauth"
});

//get user
var user = github.getUser();

//get repos
user.repos(function(err, repos) {
  //loop through repos
  for (i = 0; i < repos.length; i++) {
    repo = repos[i];
    //access repo here
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:07:19.697

他们会使用[github API](http://developer.github.com/v3/)。这是*List Your Repositories* API 函数的文档：http: [//developer.github.com/v3/repos/#list-your-repositories](http://developer.github.com/v3/repos/#list-your-repositories)

如何实现与它的交互在很大程度上取决于您。

[这里有一些资源可以帮助您入门](http://www.google.com/search?q=github+api+tutorial)

似乎您在问题中标记了 jQuery，这是[一个与 github API 交互的 jQuery 插件，](https://github.com/lynnwallenstein/jQuery-Github-Badge/blob/master/jquery.github_badge.js)可以帮助您了解如何使用它。祝你好运！

# google-app-engine - appengine java命令行部署，刷新令牌

> ID：12983110
> 
> 赞同：2
> 
> 时间：2012-10-19T22:06:43.040
> 
> 标签：google-app-engine

在不需要谷歌用户名/密码或任何用户输入的情况下，通过命令行部署 Java AppEngine 应用程序的适当方法是什么？

我可以使用 --oauth2 命令对 Python / Go 应用程序执行此操作，从 .appcfg_oatuh2_tokens json 文件中检索 refresh_token，然后运行以下命令：

```
appcfg.py --oauth2_refresh_token=$MY_TOKEN update hello-world-app/ 
```

但是我还没有找到Java的等价物。我想将 Java Appengine 部署添加到我们的 CI 产品[drone.io](https://drone.io)中，以补充我们现有的 Heroku 和 Dotcloud 部署选项。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:23:57.833

appcfg.sh`--oauth2`从版本 1.7.2 开始支持该标志。

所以你只需要这样做：

```
appcfg.sh --oauth2 update <path-to-your-app> 
```

该工具将第一次生成令牌并将其持久化。没有`--oauth2_refresh_token`选项，但您可以通过复制生成的 oauth 凭据来实现相同的目的，这些凭据位于用户目录中并称为`.appcfg_oauth2_tokens_java`.

# c# - 为什么 nhibernate 3.3 不允许在 ICollection 上使用私有设置器？

> ID：12983118
> 
> 赞同：4
> 
> 时间：2012-10-19T22:07:15.483
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate

我将 nhibernate 3.2 升级到 nhibernate 3.3，并且在我的域类中定义了很多虚拟成员，如下所示：

```
public virtual ICollection<Movie> Movies { get; private set; } 
```

这在升级后停止工作，我得到这个异常：

```
Following types may not be used as proxies:
ClassName: method set_Movies should be 'public/protected virtual' or 'protected internal virtual' 
```

现在我设法通过将 setter 更改为 protected 来解决问题，但我也很惊讶将 Collection 属性更改为带有支持字段的只读属性。

所以我有两个问题：

1.  为什么 NHibernate 决定禁止使用私有设置器？它看起来不像 .net 的技术限制，因为它以前受支持，我认为从设计的角度来看不应该这样做，因为我们应该使用 Collection Remove()、Add() 等方法来操作但是为什么要允许受保护的和公共的二传手呢？

2.  为什么（以及如何）使用带有支持字段的只读属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:01:59.333

NHibernate 将代理生成器集成到它的程序集中，并且（如果我错了，请纠正我）使用的实现无法处理私有设置器。

但是，如果没有 setter，它会尝试搜索支持字段（否则它无法设置它）并且 readonly 是编译时功能，在使用反射时会被忽略。

# javascript - 水平居中图像大于屏幕并在浏览器调整大小时缩小图像

> ID：12983122
> 
> 赞同：1
> 
> 时间：2012-10-19T22:07:33.633
> 
> 标签：javascript, css, image

你好 CSS 大师的 stackoverflow。我被困在一个问题上，我认为 CSS 可能是不可能的。

我想结合这两个规则并将它们都应用于同一个图像：

1）随着浏览器大小的变化动态缩放图像

```
#main-graphic {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
} 
```

2）随着浏览器变小，居中图像并裁剪图像的侧面

```
#main-graphic {
  width: 2560px;
  height: 100%;
  margin-left: -1280px;
  left: 50%;
  position: relative;
} 
```

*但是我如何仅*使用CSS来做到这一点？或者那不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:30:14.757

您需要充分利用最大/最小宽度（和高度）。

[这是一个很好的起点。](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:31:42.020

例如，您可以将图像用作空 div 上的背景图像。我不完全确定你想要它，但这样的东西可以满足你的需要。

HTML

```
 <div class="img"></div> 
```

CSS

```
.img {
    max-width: 2560px;
    width: 100%;
    height: 100%;
    background-image: url('whatever.jpg');
    background-size: contain;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:32:37.463

通过在第二个代码块中设置宽度，我假设您不想调整图像大小。

如果浏览器宽度不适合它，这将使图像保持居中而不管页面宽度和裁剪边...

```
#main-graphic {
  display: inline-block;
  background-image: url('http://cux.waspdigital.com/wp-content/themes/creativeux/_/img/home-main.jpg');
  width: 100%;
  height: 228px;
  background-repeat: no-repeat;
  background-size: 1280px 228px;
  background-position: 50% 0;
}​

<div id="main-graphic"></div>​ 
```

[http://jsfiddle.net/Xt2vM/](http://jsfiddle.net/Xt2vM/)

# jquery - 如何为每个具有特定类的元素添加点击处理程序？

> ID：12983125
> 
> 赞同：0
> 
> 时间：2012-10-19T22:07:40.363
> 
> 标签：jquery

我想在每个具有类 .ui-icon-trash 的元素上添加一个单击处理程序，该处理程序需要提供一个数据表对象（我已经有了）和应该删除的行。我不知道如何迭代我的元素以添加 clickhandler，我也不知道如何为每次迭代检索当前的 tr。

```
 $(".ui-icon-trash").click(function(){
        deleteRowFromTable(oTable, ????The TR of the current element????);          

    }); 
```

这是我的桌子

```
 <table id="table_id" class="display">
        <thead>
            <th>Property</th>
            <th>Value</th>      
            <th></th>
        </thead>
        <tbody>
            <button id="create-property">Create new property</button>

            <tr >
                <td>mailAddress_object</td>
                <td id="mailAddress_object" >Message from SendALL 2.5</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_1" name="mailAddress_object"></span></td>                     
            </tr>       

            <tr >
                <td>mjmj</td>
                <td id="mjmj" >xcvxcv</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_2" name="mjmj"></span></td>                       
            </tr>       

            <tr >
                <td>olol</td>
                <td id="olol" >kjkkjk</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_3" name="olol"></span></td>                       
            </tr>       

            <tr >
                <td>plsUrl</td>
                <td id="plsUrl" >http://komm2.srs-management.de</td>        
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_4" name="plsUrl"></span></td>                     
            </tr>       

            <tr >
                <td>scPwd</td>
                <td id="scPwd" >sysadm</td>     
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_5" name="scPwd"></span></td>                      
            </tr>       

            <tr >
                <td>smtp</td>
                <td id="smtp" >YOUR_MAILSERVER</td>     
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_6" name="smtp"></span></td>                       
            </tr>       

            <tr >
                <td>test</td>
                <td id="test" >test3</td>       
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_7" name="test"></span></td>                       
            </tr>       

            <tr >
                <td>useEncryption</td>
                <td id="useEncryption" >false</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_8" name="useEncryption"></span></td>                      
            </tr>       

        </tbody>    
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:11:31.970

尝试这个

```
$("body").on('click', ".ui-icon-trash" ,function(){

    var $closestTr = $(this).closest('tr');  // This will give the closest tr
                            // If the class element is the child of tr          

     $closestTr.remove() ;  // Will delete that
 }); 
```

您需要在跨度内添加一些文本，否则您看不到跨度..我只是将删除文本添加到跨度`with class .ui-icon-trash`

[检查小提琴](http://jsfiddle.net/sushanth009/49TFL/)

# c++ - 如何从 VCL 项目的消息循环中调用其他函数？

> ID：12983127
> 
> 赞同：1
> 
> 时间：2012-10-19T22:07:48.147
> 
> 标签：c++, api, c++builder

我有一个项目，我需要使用一个带有 dll 和 .cpp 以及 .h 文件的 API。在文档中，我被告知使用所提供 API 的 PreTranslateMessage(MSG* pMsg) 类函数并将其放入用户界面的消息循环中。

是否可以使用 C++ Builder 作为该项目的 IDE，如果可以，那么如何，因为它没有可以放置此函数的消息循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:16:17.777

看看[这个](http://www.functionx.com/cppbuilder/Lesson06.htm)，它有一些关于将 Windows 事件消息与[VCL](http://en.wikipedia.org/wiki/Visual_Component_Library)集成的过程的文档，虽然不知道这是否适用于你的项目，如果你的项目使用`MFC`框架，你最好使用 Visual Studio。

无论哪种情况，您都可以包含`windows.h`并访问`win32`API 函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:52:21.790

C++Builder 中的 VCL 应用程序**确实**有一个消息循环（毕竟它是一个普通的 Windows 应用程序）。它隐藏在`TApplication::Run()`方法中，该方法在项目`WinMain()`函数中调用。如果要在此循环内调用，可以直接或通过组件`PreTranslateMessage()`为事件分配事件处理程序。在 VCL 处理之前从消息队列中删除消息后立即触发该事件。`TApplication::OnMessage``TApplicationEvents``OnMessage`

# .net - .NET String [] 运算符从 ToString() 返回不同的东西

> ID：12983129
> 
> 赞同：3
> 
> 时间：2012-10-19T22:07:50.573
> 
> 标签：.net

我有一个从 InstallShield 执行的 .NET 自定义操作 (DTF)。

在 .NET CA 中，我正在提取一个值为`"[CommonAppDataFolder]abc\def.txt"`.

该属性的访问方式如下：

```
string val = session["MY_PROPERTY"]; // Microsoft.Deployment.WindowsInstaller.Session 
```

当我将此变量打印到日志文件时，我得到：`C:\ProgramData\abc\def.txt`. 这是我所期望的。

但是，当我使用`[]`运算符逐个字符查看时，我会从未替换的值中获取字符： `[CommonAppDataFolder]...`例如，`val[0]`is`'['`而不是`'C'`.

这怎么可能？

此外，`==`, `string.compare()`,`!=`等都没有给出预期的结果（我想这些使用`[]`引擎盖下的运算符）。

编辑：

这就是我记录的方式： `session.Log("File name: {0}", val);`

这就是我逐字符打印的方式：

```
for (int i = 0; i < val.Length; i++) 
{ 
    session.Log(val[i].ToString());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:01:37.190

字符串 val 仍然包含未替换的版本，因此 for 循环可以正常工作。
会话中的 Log() 方法使用 'val' 作为格式字符串（而不是文字），它在写入结果之前将任何占位符替换为实际值。

如果您下载调试符号（输出可能在此处发布不合法），您会看到这种情况。

简而言之， Log() 调用 Message() 并在该 msdn 页面中调用[MsiProcessMessage()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371614%28v=vs.85%29.aspx)它指的是[MsiFormatRecord()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370109%28v=vs.85%29.aspx)。在该文档的末尾，它解释了自动发生的替换。在这种情况下最值得注意的是：

> *   如果遇到 [propertyname] 形式的子字符串，则将其替换为属性的值。
> *   如果找到 [%environmentvariable] 形式的子字符串，则替换环境变量的值。

尝试以下代码以获得您的预期结果

```
string formattedVal = session.Format(val)
for (int i = 0; i < formattedVal.Length; i++)  
{  
    session.Log(formattedVal[i].ToString()); 
} 
```

# java - 为什么使用原因链中的循环？

> ID：12983131
> 
> 赞同：3
> 
> 时间：2012-10-19T22:07:59.113
> 
> 标签：java, exception

我刚刚读到“Oracle jdbc 驱动程序抛出的一些 SqlExceptions 在原因字段中引用了自身”。恕我直言，一个例外很容易引起，就像我可以[将自己](http://en.wikipedia.org/wiki/Bootstrapping)从头发的沼泽中拉出来一样容易。

但这似乎很正常，甚至可以`Throwable.printStackTrace`识别“循环引用”，这是我所知道的 JDK 中唯一这样的地方（例如，所有`Arrays.deep*`方法最终都会导致递归结构的堆栈溢出）。

那么在原因链中创建循环的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:02:12.930

[`cause==this`表示没有初始化任何原因。](http://code.google.com/p/guava-libraries/issues/detail?id=1173#c12) 在这种情况下`getCause()`会返回。`null`中的代码`Throwable.printStackTrace`用于处理多元素循环。我认为这样的循环没有任何充分的理由，但也许有些是由于错误或恶意而进入的。

# android - 如何在通知管理器android的contentText中显示变量或数据

> ID：12983136
> 
> 赞同：-1
> 
> 时间：2012-10-19T22:08:40.573
> 
> 标签：android, android-notifications

嗨，我正在 android 中创建一个 aac 播放器应用程序，我已经有这样的通知管理器：

```
Context context = getApplicationContext();
String ns = Context.NOTIFICATION_SERVICE;
int icon = R.drawable.icon;
CharSequence tickerText = "Now playing...";
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when);
CharSequence contentTitle = "My notification";
CharSequence contentText = "txtMetaTitle";
Intent notificationIntent = new Intent(AACPlayerActivity.this, Principal.class);
notification.flags = Notification.FLAG_ONGOING_EVENT;

PendingIntent contentIntent = PendingIntent.getActivity(this,0,notificationIntent,0);

notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
mNotificationManager.notify(1, notification); 
```

但现在我试图插入普通文本，如**CharSequence contentTitle = "My notification";** 而是在我的情况下显示一个变量，即来自流的广播服务器的元数据。

当我打开广播电台时，我已经有这个显示了，它显示了电台的徽标图像，url，来自shoutcast url的标题，带有以下代码：

```
public void playerMetadata( final String key, final String value ) {
    TextView tv = null;

    if ("StreamTitle".equals( key ) || "icy-name".equals( key ) || "icy-description".equals( key )) {
        tv = txtMetaTitle;
    }
    else if ("icy-url".equals( key )) {
        tv = txtMetaUrl;
    }
    else return;

    final TextView ftv = tv;

    uiHandler.post( new Runnable() {
        public void run() {
            ftv.setText( value );
        }
    });
} 
```

我如何显示例如**txtMetaTitle**并在通知中实现它：

```
CharSequence contentTitle = "My notification";
CharSequence contentText = "txtMetaTitle"; 
```

显示来自直播的元数据？

非常感谢你。

编辑：

完整代码：

```
 private void start() {
        stop();

        txtMetaTitle.setText("");
        txtMetaGenre.setText("");
        txtMetaUrl.setText("");

        multiPlayer = new MultiPlayer( this, getInt( txtBufAudio ), getInt( txtBufDecode ));

        //multiPlayer.playAsync(getUrl());

        Log.d(TAG, "onClick: starting srvice");

        myIntent = new Intent(this, MyService.class);
        myIntent.putExtra("URL", getUrl());
        myIntent.putExtra("MP",new  Sharable(multiPlayer));
        startService(myIntent);
        Context context = getApplicationContext();
        String ns = Context.NOTIFICATION_SERVICE;
        int icon = R.drawable.icon;
        CharSequence tickerText = "Now playing...";
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);
        CharSequence contentTitle = "My notification";
        CharSequence contentText = txtMetaTitle.getText();
        Intent notificationIntent = new Intent(AACPlayerActivity.this, Principal.class);
        notification.flags = Notification.FLAG_ONGOING_EVENT;

        PendingIntent contentIntent = PendingIntent.getActivity(this,0,notificationIntent,0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
       NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
       mNotificationManager.notify(1, notification);
    } 
```

我修复了在此内部移动通知服务：

```
 public void playerMetadata( final String key, final String value ) {
        TextView tv = null;

        if ("StreamTitle".equals( key ) || "icy-name".equals( key ) || "icy-description".equals( key )) {
            tv = txtMetaTitle;
        }
        else if ("icy-url".equals( key )) {
            tv = txtMetaUrl;
        }
        else return;

        final TextView ftv = tv;

        uiHandler.post( new Runnable() {
            public void run() {
                ftv.setText( value );
                System.out.println("Now playing..." + txtMetaTitle.getText().toString());
                Context context = getApplicationContext();
                String ns = Context.NOTIFICATION_SERVICE;
                int icon = R.drawable.icon;
                CharSequence tickerText = "Now playing...";
                long when = System.currentTimeMillis();
                Notification notification = new Notification(icon, tickerText, when);
                CharSequence contentTitle = txtMetaTitle.getText().toString();
                CharSequence contentText = txtMetaUrl.getText().toString();
                Intent notificationIntent = new Intent(AACPlayerActivity.this, Principal.class);
                notification.flags = Notification.FLAG_ONGOING_EVENT;
                PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

                //PendingIntent contentIntent = PendingIntent.getActivity(this,0,notificationIntent,0);

                notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
               NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
               mNotificationManager.notify(1, notification);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:23:46.813

使用默认通知布局，您会得到两行：标题和文本。如果您想要更多的灵活性，则必须创建自定义布局。

而不是设置标题和文本，而是实例化 a [`RemoteViews`](http://developer.android.com/reference/android/widget/RemoteViews.html)，

```
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom); 
```

然后将其设置到您的通知对象中，

```
mNotification.contentView = contentView; 
```

`RemoteViews`工作方式与正常视图略有不同。您必须调用`RemoteViews`对象上的方法才能将值设置到其中的视图中。例如，

```
contentView.setTextViewText(R.id.text_view_id, "Hello, world."); 
```

如您所见，您可以在布局中使用的视图类型以及您可以在它们上调用的方法是有限的。

# travis-ci - 如何检测是否有 Travis-Ci

> ID：12983137
> 
> 赞同：34
> 
> 时间：2012-10-19T22:08:44.107
> 
> 标签：travis-ci

我需要一种方法来确定调用该函数的人是否是 Travis-CI。如果是 Travis-CI，我不想在这里开始会话。现在，我让我的测试脚本创建一个名为的文件`test.txt`，然后查找它。

```
protected function __construct() {
    if ( (!session_id()) && (!file_exists('test.txt' ))) session_start();
} 
```

但是，必须有更好的方法。看起来，如果没有文件检查，如果确实有一个会话，就不会创建一个新的会话。但这种情况并非如此。如果是这样的话，下面的之前的链接应该已经通过了。

添加“test.txt”文件[之前：](https://travis-ci.org/#!/chriscct7/jigoshop/builds/2859226)
[之后](https://travis-ci.org/#!/chriscct7/jigoshop/builds/2859424)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-20T13:58:51.503

一般来说，您可以通过检查环境变量来检测您是否在 Travis-CI 上。您可以检查`CI=true`或更具体的`TRAVIS=true`. 在 PHP 中，您可以使用该[`getenv()`函数](http://php.net/manual/en/function.getenv.php)来获取环境变量的值。

请参阅[环境的完整列表](https://docs.travis-ci.com/user/environment-variables/#default-environment-variables)。[您可以在 .travis.yml](http://docs.travis-ci.com/user/environment-variables/)中设置更多环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T09:42:54.407

对于 Java，我正在检查用户：

```
/**
 * check if we are in the Travis-CI environment
 * @return true if Travis user was detected
 */
public boolean isTravis() {
  String user = System.getProperty("user.name");
  return user.equals("travis");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T19:59:43.453

如果你使用 JavaScript，有一个很棒的模块叫做[is-ci](https://www.npmjs.com/package/is-ci)，它在 NPM 中可用并且是 MIT 许可的。

注意：它`true`适用于任何持续集成环境，不仅仅是 TravisCI。

# linux - kgdb 和以太网连接

> ID：12983140
> 
> 赞同：3
> 
> 时间：2012-10-19T22:08:53.810
> 
> 标签：linux, linux-kernel, remote-debugging

在谷歌搜索和阅读后，我通过串行线路设置了 kgdb，我可以进入调试器（通过 /proc/sysrq-trigger 停止内核）并从主机 gdb 连接，它是 ARM 工具链的一部分。

基本上我的开发板运行嵌入式 linux abd 我正在调试的驱动程序，我的 PC 有两个连接到板 - 串行和以太网（telnet 会话）。

将主机 gdb 连接到目标后，我不再能够对板进行 telnet，因为重现内存损坏的唯一方法是在板上应用一些用户应用程序配置。

是预期的还是我做错了什么，并且有一种方法可以使 IP 连接到目标*和*GDB 会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:04:39.847

这是意料之中的。主要是当您连接到 KDB 时，您正在破坏（停止/冻结）内核，它会等待您说“开始”以再次运行内核或跟踪有问题的项目。

最好的办法是在您正在跟踪的 API/Funciton 上设置一个断点，然后“Go”，内核将运行，您将让您的 telnet/ssh 重新工作，一旦它命中 API，它就会中断进入调试器，但由于整个操作系统被冻结，您将再次丢失 Telnet 会话。

# c++ - 如何在不使用循环的情况下插入向量？

> ID：12983142
> 
> 赞同：2
> 
> 时间：2012-10-19T22:09:03.787
> 
> 标签：c++

我想将满足某些条件的向量中的元素复制到另一个向量中，但不使用手写循环。例如，

```
std::vector<double> source; // somehow filled elsewhere
std::vector<double> result;

for( std::vector<double>::const_iterator it = source.begin(); it != source.end(); ++it )
{
   if ((*it) % 2)
   {
      result.push_back(*it);
   }
} 
```

上面的代码使用手写循环来填充`result`. 没有手写循环怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:12:19.310

您可以使用`std::copy_if()`和`std::back_inserter()`这样做。要获得具有合适值的初始序列，您可以使用`std::generate_n()`. 我可以把东西打出来，但你最好还是做功课。

# ruby-on-rails-3 - “测试”的未定义方法“stringify_keys”：字符串

> ID：12983143
> 
> 赞同：0
> 
> 时间：2012-10-19T22:09:16.610
> 
> 标签：ruby-on-rails-3

我正在关注这个 railscast 来实现一个简单的解决方案来处理静态页面：[http ://railscasts.com/episodes/117-semi-static-pages-revised?view=asciicast](http://railscasts.com/episodes/117-semi-static-pages-revised?view=asciicast)

我遇到的具体问题是让我的页面控制器中的更新方法工作。

我的路线文件：

```
Jog::Application.routes.draw do
root :to => 'categories#index'
devise_for :categories
devise_for :users
resources :categories do
  resources :gists
end
resources :sub_categories, :gists, :pages, except: "show, edit, update, destory" 
get ':id', to: 'pages#show', as: :page 
get ':page/edit', to: 'pages#edit', as: :edit_page 
put ':page', to: 'pages#update', as: :update_page
delete ':page', to: 'pages#destroy', as: :destroy_page  
end 
```

这是我的模型：

```
class Page < ActiveRecord::Base
resourcify
attr_accessible :content, :name, :permalink
validates_uniqueness_of :permalink

def to_param
permalink
end
end 
```

我的控制器更新方法：

```
def update
@page = Page.find_by_permalink!(params[:page])

respond_to do |format|
  if @page.update_attributes(params[:page])
    format.html { redirect_to @page, notice: 'Page was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @page.errors, status: :unprocessable_entity }
  end
end
end 
```

我的错误：“测试”的未定义方法“stringify_keys”：字符串

我研究了其他“stringify_keys”错误，但找不到类似的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:54:38.007

当函数需要一个集合而不是字符串或符号时，会引发 String_keys 错误。上面资源函数中的 :except 选项需要一个数组，该数组具有符号形式的操作名称...

还要告诉我测试变量的使用位置以及引发错误的行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:17:45.877

在您的路由文件中，将值从字符串更改为符号数组。我认为它不了解您要排除的方法。

```
resources :sub_categories, :gists, :pages, except: [:show, :edit, :update, :destroy] 
```

如果不是这样，你能指出错误指向的行号吗？`test`变量在哪里使用？

# c# - 如何停止从 pcap.net 接收数据包？

> ID：12983149
> 
> 赞同：3
> 
> 时间：2012-10-19T22:10:00.750
> 
> 标签：c#, pcap, pcap.net

我正在研究 pcap.net 拦截来自各种设备的数据包的能力。

开始这个过程非常简单：

```
communicator.ReceivePackets(0, PacketHandler); 
```

但在那之后，这个过程并没有停止。曾经。

如何强制关闭抓包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:42:28.600

实际上，正如您在评论中提到的那样， Break() 就是为此而设计的。

# php - FTP API？PHP 服务器到服务器上传

> ID：12983151
> 
> 赞同：1
> 
> 时间：2012-10-19T22:10:09.440
> 
> 标签：php, ftp

我知道有大量的 PHP FTP 函数，但我过去曾尝试过很多次以使基础知识能够正常工作。可以连接，但通常会遇到列出目录等问题。

是否有服务或 API 可以告诉它下载此文件夹（或 zip）然后上传和解压缩到此服务器？（只是转移也可以）。

PHP 有这方面的功能，但我无法让它工作——使用 Laravel 框架和带有 PagodaBox 托管的 SFTP 包，而且似乎 Pagoda 甚至没有安装 php FTP 模块。

没有 PHP 或一些远程服务有没有办法做到这一点？

或者我是否需要为 FTP PHP 功能设置正确的第二台服务器，然后创建我自己的小 api？有没有开箱即用的正确设置的好的托管公司？

## 更新

有关我正在尝试做的事情的更多信息：

我正在创建一项服务，人们可以在其中创建网站，然后可以以 zip 文件（HTML 文件等）下载该网站，但我想为我的客户提供一种使用 FTP 自动为他们上传的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:52:41.357

您可以使用[`cURL.`](http://php.net/cURL/)

这是一个示例代码：

```
<?php
if(!function_exists('curl_init'))
    die('cURL isn\'t available too!');

$file = "toUp.zip";
$ch = curl_init();
$fp = fopen($file, 'r');

curl_setopt($ch, CURLOPT_URL, 'ftp://username:password@site.com/public_html/'.$file);
curl_setopt($ch, CURLOPT_UPLOAD, 1);
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($file));

curl_exec($ch);
$err_no = curl_errno($ch);
curl_close($ch);
fclose($fp);

if($err_no == 0){
    echo 'FTP Transfer complete.';
}else{
    echo 'FTP Transfer error: '.$err_no;
    echo '. See http://curl.haxx.se/libcurl/c/libcurl-errors.html';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-05T21:57:29.383

*（代表问题作者发布答案）*。

这已经解决了 - 我必须在 Pagodabox 中为 PHP 扩展编辑 boxfile。

# tfs - 基于组（权限）过滤 TFS Listitem

> ID：12983153
> 
> 赞同：1
> 
> 时间：2012-10-19T22:10:13.157
> 
> 标签：tfs, tfs-workitem

我在 TFS 中有一个字段，其中包含每个人都可以看到的 ALLOWEDVALUES。那里没有问题。显示所有列表项。

我现在想根据一个人是否在一组中“添加”到 ALLOWEDVALUES 集合中。我创建了一个新项目组，创建了一个新的 ALLOWEDVALUES 规则，该规则将 for 设置为新项目组。

现在查看值列表时，显示的列表为空。我想看到显示的是来自两个 ALLOWEDVALUES 的列表。这可能吗？

代码片段：

```
<WHEN field="Field" value="Value">
 <ALLOWEDVALUES expanditems="true">
 <LISTITEM value="OM1" />
 <LISTITEM value="OM2" />
 <LISTITEM value="OM3" />
 </ALLOWEDVALUES>
 <ALLOWEDVALUES for="[project]\ModelTest" expanditems="true">
 <LISTITEM value="New Model 1" />
 </ALLOWEDVALUES> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:52:46.580

您可以这样做：

```
<WHEN field="Field" value="Value">
  <ALLOWEDVALUES not="[project]\ModelTest" expanditems="true">
     <LISTITEM value="OM1" />
     <LISTITEM value="OM2" />
     <LISTITEM value="OM3" />
  </ALLOWEDVALUES>
  <ALLOWEDVALUES  for="[project]\ModelTest" expanditems="true">
     <LISTITEM value="OM1" />
     <LISTITEM value="OM2" />
     <LISTITEM value="OM3" />
     <LISTITEM value="New Model 1" />
  </ALLOWEDVALUES>
</WHEN> 
```

# php - 选择合适的 PHP 框架

> ID：12983154
> 
> 赞同：0
> 
> 时间：2012-10-19T22:10:20.323
> 
> 标签：php, zend-framework, symfony, frameworks

我有一个问题，我有两周的时间来学习框架和 MVC。我学过 MVC，但对 Symfony 或 Zend 框架都不懂；通常我用 ?post=id 做我的项目。

我认为我应该学习框架是如何工作的，因为它们更专业并且提供更多的安全性。我需要一种学习框架的方法，我应该选择哪一种？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:15:34.953

首先，一个框架并没有提供更多的安全性或专业性——在从头开始开发时，您可能会犯尽可能多的错误。

您是否被迫学习 MVC 并使用框架？不要误会我的意思，但如果你的最后期限很紧迫，我宁愿坚持你所知道的，因为当你不熟悉框架或模式时，你可能会遇到许多框架问题。

同样获得快速概览的最佳方法是使用谷歌 - 这是我的第一个搜索结果，看起来相当不错。

[http://www.onextrapixel.com/2010/05/24/an-overview-of-php-framework-guides-for-developers/](http://www.onextrapixel.com/2010/05/24/an-overview-of-php-framework-guides-for-developers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:15:14.910

如果你现在很擅长`MVC`但又想学习`MVC Framework Architecture`，那么你应该尝试一下`Code Igniter`。这是一个强大、轻量级的框架，甚至它也太容易理解了。

你甚至可以试试`Kohana`这个。

祝你好运！

# ruby - 我可以根据操作类型更改默认范围吗

> ID：12983156
> 
> 赞同：1
> 
> 时间：2012-10-19T22:10:30.767
> 
> 标签：ruby, ruby-on-rails-3

如果我正在寻找单个结果而不是集合，是否可以更改我的默认范围？

即 Model.find(id) 与 Model.all

`default_scope lambda { where({:language_id => Language.default_or_first.id}) }`

当我找到一整段记录时，我真的只想以这种方式限定我的索引视图。

当我执行 Model.find(3) 时，我希望它能够提供给我，即使它不是默认语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:12:23.237

您可以使用 unscoped 忽略默认范围。

```
model = Model.unscoped.find(1) 
```

会给你你的模型。

你也可以

```
model = Model.find_by_id!(1) 
```

但我真的认为你应该考虑根本不使用默认范围，这可能会导致更多的麻烦。

# ruby - RVM + 红宝石 1.9.3-p286

> ID：12983157
> 
> 赞同：3
> 
> 时间：2012-10-19T22:10:39.063
> 
> 标签：ruby, macos, rvm

刚刚尝试使用 RVM 在 osx 10.8.2 上安装 ruby​​ 1.9.3-p286 并收到以下错误：

```
Installing new ruby ruby-1.9.3-p286
ruby-1.9.3-p286 - #configure
ruby-1.9.3-p286 - #download
ruby-1.9.3-p286 - #extract
ruby-1.9.3-p286 - #validate

Libraries missing for ruby-1.9.3-p286: /opt/sm/pkg/versions/libffi/3.0.10/lib/libffi.5.dylib. Refer to your system manual for installing libraries

Mounting remote ruby failed, trying to compile.
Installing Ruby from source to: /Users/lee/.rvm/rubies/ruby-1.9.3-p286, this may take a while depending on your cpu(s)...
ruby-1.9.3-p286 - #downloading ruby-1.9.3-p286, this may take a while depending on your connection...
ruby-1.9.3-p286 - #extracting ruby-1.9.3-p286 to /Users/lee/.rvm/src/ruby-1.9.3-p286
ruby-1.9.3-p286 - #extracted to /Users/lee/.rvm/src/ruby-1.9.3-p286
ruby-1.9.3-p286 - #configuring
ruby-1.9.3-p286 - #compiling
ruby-1.9.3-p286 - #installing

Error running 'make install', please read /Users/lee/.rvm/log/ruby-1.9.3-p286/install.log
There has been an error while running make install. Halting the installation. 
```

我已经用谷歌搜索了这些错误，但到目前为止没有任何帮助，感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T23:54:01.127

这应该通过[https://github.com/wayneeseguin/rvm/issues/1244](https://github.com/wayneeseguin/rvm/issues/1244)解决 - 问题应该已经解决：

```
rvm get head
rvm reinstall 1.9.3 
```

# javascript - 如何将 jQuery UI 小部件传递给函数？

> ID：12983159
> 
> 赞同：1
> 
> 时间：2012-10-19T22:10:40.510
> 
> 标签：javascript, jquery, jquery-ui

我有两个函数对两种不同的小部件类型执行相同的操作。我以为我已经找到了一种实现，它允许我使用一个通用函数而不是两个。我的想法是我会将每种类型的小部件传递给这个通用函数。但是，我在细节上苦苦挣扎：

这是我的两个函数，它们重复了很多代码：

```
buildTemplateLookupTreeDialog: function () {
    lookupTreeViewDialog.bind('loaded.jstree', function () {
        var templateID = workflowDialogContent.find('#DeviceTemplateID').val();
        lookupTreeViewDialog.TemplateLookupTree('setSelectedNode', '#' + templateID);
        lookupTreeViewDialog.TemplateLookupTree('saveCookie');
    }).TemplateLookupTree();

    lookupTreeViewDialog.TemplateLookupTree('onNodeDblClick', function (template) {
        if (openDialog != null) {
            openDialog.TemplateLookupTree('saveCookie');
            openDialog.data('result', { id: template.id, name: template.name });
            openDialog.dialog('close');
        }
    });
},
buildComponentLookupTreeDialog: function () {
    lookupTreeViewDialog.bind('loaded.jstree', function () {
        var componentID = workflowDialogContent.find('#DeviceComponentID').val();
        lookupTreeViewDialog.ComponentLookupTree('setSelectedNode', '#' + componentID);
        lookupTreeViewDialog.ComponentLookupTree('saveCookie');
    }).ComponentLookupTree();

    lookupTreeViewDialog.ComponentLookupTree('onNodeDblClick', function (component) {
        if (openDialog != null) {
            openDialog.ComponentLookupTree('saveCookie');
            openDialog.data('result', { id: component.id, name: component.name });
            openDialog.dialog('close');
        }
    });
} 
```

这是我认为通用实现的样子：

```
buildGenericLookupTreeDialog: function (lookupTreeWidget, title, idSelector, nameSelector) {
    lookupTreeViewDialog.bind('loaded.jstree', function () {
        var selectedNodeID = workflowDialogContent.find(idSelector).val();
        lookupTreeViewDialog.lookupTreeWidget('setSelectedNode', '#' + selectedNodeID);
        lookupTreeViewDialog.lookupTreeWidget('saveCookie');
    }).lookupTreeWidget();

    lookupTreeWidget('onNodeDblClick', function (node) {
        if (openDialog != null) {
            lookupTreeWidget('saveCookie');
            openDialog.data('result', { id: node.id, name: node.name });
            openDialog.dialog('close');
        }
    });
}

//Called like so
this.buildGenericLookupTreeDialog(TemplateLookupTree, 'Select Template', '#DeviceTemplateID', '#DeviceTemplateName'); 
```

现在，这段代码立即抛出一个错误——TemplateLookupTree not defined。除非我实际初始化它（例如lookupTreeViewDialog.TemplateLookupTree()），否则我似乎无法通过其名称引用小部件；

如果我在传递到 buildGenericLookupTree 之前初始化 TemplateLookupTree - 每当使用 lookupTreeWidget 时都会收到错误，就像函数一样。

有关如何干燥此代码的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:53:27.050

将查找树小部件名称作为字符串传递并查看此线程以获取有关如何调用它的信息： [当我将其名称作为字符串时如何执行 JavaScript 函数](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

# emacs - nrepl.el 和 leiningen 2 默认命名空间？

> ID：12983160
> 
> 赞同：12
> 
> 时间：2012-10-19T22:10:45.033
> 
> 标签：emacs, clojure, leiningen

启动并运行 Emacs / Clojure 环境，我现在遇到了我不确定是否正常的行为。特别是，当我启动一个 nREPL 并编译 (Cc Ck) 我的缓冲区时，我会被放入 core.clj 文件顶部定义的命名空间之外的其他地方。我应该添加免责声明，即我对 Clojure 和命名空间有点陌生，所以我对这一切的理解可能很模糊。我愿意接受那些向我展示 Better Way™ 的固执己见的答案。

首先，关于我的设置：

我的 emacs 环境是 Cocoa Emacs 24，主要使用 Melpa 存储库中的 emacs 入门工具包进行设置，并通过包管理器添加 clojure 和 nrepl 包。

我的 leiningen 2 项目是使用`lein new test-clj`.

我的**project.clj**：

```
(defproject test-clj "0.1.0-SNAPSHOT"
  :description "A geospatial test app example mostly ripped off from http://datamangling.com/blog/2010/05/26/geotools-quickstart-in-clojure/"
  :repositories {"osgeo-geotools" "http://download.osgeo.org/webdav/geotools"}
  :url "FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.geotools/gt-main "8.2"]
                 [org.geotools/gt-shapefile "8.2"]
                 [org.geotools/gt-epsg-hsql "8.2"]
                 [org.geotools/gt-swing "8.2"]]) 
```

我的**core.clj**：

```
(ns test-clj.core
  (:import [org.geotools.data CachingFeatureSource FeatureSource FileDataStore FileDataStoreFinder])
  (:import [org.geotools.map DefaultMapContext MapContext])
  (:import [org.geotools.swing JMapFrame])
  (:import [org.geotools.swing.data JFileDataStoreChooser]))

(defn show-shapefile
  "Prompts the user for a shapefile and displays its content"
  []
  (if-let [shapefile (JFileDataStoreChooser/showOpenFile "shp" nil)]
    (let [fs (.getFeatureSource (FileDataStoreFinder/getDataStore shapefile))]
      (doto (DefaultMapContext.)
        (.setTitle "Quickstart")
        (.addLayer fs nil)
        (JMapFrame/showMap))))) 
```

我*想*我应该能够

1.  加载我的 core.clj 文件并插入 ( `M-x nrepl-jack-in`)
2.  `C-c C-k`将缓冲区加载到 REPL
3.  输入 (show-shapefile) 并对我的聪明印象深刻

实际上，我收到一个看起来像的错误`clojure.lang.Compiler$CompilerException: java.lang.RuntimeException: Unable to resolve symbol: show-shapefile in this context, compiling:(NO_SOURCE_PATH:1)`

如果从 REPL 中我第一次输入（in-ns `test-clj.core），我就是金子。另外，如果我输入 (test-clj.core/show-shapefile) 我就设置好了。

当我以逆时针方向加载 REPL 时，我会自动进入 test-clj.core 命名空间，这看起来非常方便。

那么我的问题有两个：

1.  这是我看到的正确行为吗？（即我只是懒惰？）
2.  有没有办法进入这个命名空间（或者相反，告诉我这是一个愚蠢的想法）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T22:25:44.493

只需对您的工作流程进行一些更改：

1.  加载我的 core.clj 文件并插入（`M-x`nrepl-jack-in）
2.  `C-c` `C-l`加载文件
3.  `c-c` `M-n`将 repl 切换到命名空间
4.  输入 (show-shapefile) 并对我的聪明印象深刻

第 2 步编译文件，创建命名空间
第 3 步只是比切换到 repl 并运行更短`in-ns`

# mongodb - MongoDB 分片 findAndModify

> ID：12983162
> 
> 赞同：1
> 
> 时间：2012-10-19T22:10:50.093
> 
> 标签：mongodb, sharding, findandmodify

我正在尝试对我的数据库进行分片，但我遇到了**findAndModify的问题**

我有一个看起来像这样的架构（myCollection）：

```
{
    "_id": "508206a9f6ded00c50f59469"
    "DatabaseId" : 91,
    "TypeId" : "5e62603c-8",
    "ItemId" : "734",
    "UserId" : "d14e3afd-d8b3-4c37-87cd-db5d89291c44"
} 
```

我正在像这样设置我的 shardkey：

```
db.runCommand({enablesharding:"myDb"});
db.runCommand({
    shardcollection: "myDb.myCollection",
    key: {
        "DatabaseId" : 1,
        "TypeId" : 1,
        "ItemId" : 1
    }
}); 
```

假设上面的模式被插入到数据库中。

现在我运行这个查询：

```
db.myCollection.findAndModify({
    query: {
        "DatabaseId" : 91,
        "TypeId" : "5e62603c-8",
        "ItemId" : "734",
        "UserId" : "d14e3afd-d8b3-4c37-87cd-db5d89291c44"
    },
    remove: true
}); 
```

我从运行 findAndModify 得到这个错误：

```
findAndModifyFailed failed: {
    "errmsg" : "exception: query for sharded findAndModify must have shardkey",
    "code" : 13343,
    "ok" : 0
} 
```

谁能向我解释为什么这么说？或解决方案？在我看来，我正在做我需要做的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:57:15.483

您的分片键有 3 个字段：databaseId、typeId 和 itemId。

Mongo 告诉您，您不能仅使用 databaseId 执行 findAndModify。我不知道为什么。

你需要类似的东西：

```
db.myCollection.findAndModify({
query: {
    "DatabaseId" : 91,
    "TypeId": "blah",
    "itemId": "foo"
    "GroupId" : "5e62603c-8",
    "Identifier" : "734",
    "UserId" : "d14e3afd-d8b3-4c37-87cd-db5d89291c44"
},
remove: true 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:36:11.143

要扩展 ptyx 的答案：

[findAndModify](http://docs.mongodb.org/manual/reference/command/findAndModify/)上的文档说，如果查询不包含分片键，分片集群将失败。由于您使用的是复合分片键，因此您可能需要在查询中包含所有三个字段。（见底部的红色段落）。

# jquery - 如何得到 显示和滚动与 JQuery 单击水平滚动编码？

> ID：12983166
> 
> 赞同：0
> 
> 时间：2012-10-19T22:11:29.000
> 
> 标签：jquery, html, scroll

我正在尝试创建一个通过导航箭头将 div 滑入和滑出的页面。可以在这里看到一个不工作的演示：drawmeahouse.com（右边的 div 会滑动到中间，中间会滑动到右边的镜像，等等，当它们被添加时会有更多的 div最终...）

这是我已经走了多远，到目前为止失败了，drawmeahouse.com/index2.html

如您所见，内容没有显示在中间，导航箭头根本没有移动任何东西！我对 JQuery 很陌生，所以我试图破解这个，但我需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:21:27.083

需要在点击时为 div 设置动画......类似于：

```
$('.next').click(
     function(){
          $('.shadow').animate({ left: '-=600px' })
     }
) 
```

这会将所有具有类的 div 移动`shadow`到左侧，从而有效地将 div 右侧带入主视图。id 使用不同的类之类的`content`东西，因为我确定你会`shadow`在其他元素上重用该类。

div 必须是绝对的才能为 left 属性设置动画。

或者您可以将它们全部放入一个容器中，容器绝对定位并移动整个容器，而不仅仅是 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:35:48.267

```
$(function(){
   $('#nextControl').click(function() {
      $('#mask').animate({
        marginLeft: "-=200px"
      }, "fast");
   });
    $('#prevControl').click(function() {
      $('#mask').animate({
        marginLeft: "+=200px"
      }, "fast");
   });
}); 
```

代码需要执行`on render ready`or `on document ready`，这是在更正一些其他语法错误后完成的。如果您想查看内容，请`visibility: hidden;`从容器的 CSS 中删除。

# twitter-bootstrap - Bootstrap 的远程模式对话框不起作用

> ID：12983169
> 
> 赞同：10
> 
> 时间：2012-10-19T22:11:43.653
> 
> 标签：twitter-bootstrap

我在使用来自 Twitter Bootstrap api 的远程模式对话框时遇到问题。

我正在尝试使用远程 html 页面中的内容加载模式对话框。我有两页，一页包含按钮 (modal-remote.html)，另一页包含单击按钮时我希望显示的内容 (modal-target.html)。

**模态远程.html**：

```
<!DOCTYPE html>
<html lang="en">
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>

<a href="modal-target.html" data-target="#myModal" role="button" class="btn" data-toggle="modal">
    Launch demo modal</a>

</html> 
```

这是我的目标（或远程）页面代码

**模态目标.html**：

```
<html>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>

    <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
      </div>
      <div class="modal-body">
        <p>The quick brown fox jumps over the lazy dog. </p>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary" id="save_btn">Save changes</button>
      </div>
    </div>
</html> 
```

它们在同一个目录中。当我单击按钮时，什么也没有发生。有人知道我在做什么错吗？非远程模式对话框工作得很好，我只是不知道如何使用远程功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T09:17:24.630

您应该仔细阅读[模态文档](http://twitter.github.com/bootstrap/javascript.html#modals)。

> > 如果提供了远程 url，内容将通过 jQuery 的 load 方法加载并注入到 .modal-body

您的文件应该更像这样：

模态远程.html：

```
<!DOCTYPE html>
<html lang="en">
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>

<a href="modal-target.html" data-target="#myModal" role="button" class="btn" data-toggle="modal">
    Launch demo modal</a>

<div class="modal hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
      </div>
      <div class="modal-body">
        <!-- content will be loaded here -->
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary" id="save_btn">Save changes</button>
      </div>
    </div>
</html> 
```

模态目标.html：

```
<p>The quick brown fox jumps over the lazy dog. </p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T07:41:59.820

从 Bootstrap v3.30 开始，不推荐使用**远程**选项。见[这里](http://getbootstrap.com/javascript/#modals)。

所以推荐使用远程内容的方法是使用[jquery.load()](http://api.jquery.com/load/)方法。

例子：

```
$("modal").load("remote_content.html"); 
```

# ruby-on-rails - Ruby DateTime.new 混乱

> ID：12983175
> 
> 赞同：2
> 
> 时间：2012-10-19T22:12:32.787
> 
> 标签：ruby-on-rails, ruby, datetime, locale

我仍然对如何在 Ruby 中使用**DateTime感到有些困惑。**我想将 GMT 存储在数据库中，至少我认为我会。但是如何创建可用的本地化日期时间呢？

```
date = Date.new(2012, 11, 24)
 => #<Date: 2012-11-24 ((2456256j,0s,0n),+0s,2299161j)> 
new_appt = DateTime.new(date.year, date.month, date.day, 10, 0, 0)
 => #<DateTime: 2012-11-24T10:00:00+00:00 ((2456256j,36000s,0n),+0s,2299161j)> 
```

此 DateTime 对象的 GMT 偏移量为 +00:00。我希望它是 -07:00 或 -08:00，具体取决于给定日期是否遵守夏令时。我可以添加最后一个参数（`+7`或`+8`）但如何计算？

有没有办法告诉给定日期时区偏移量是（或将是）并将其考虑到 DateTime.new 对象中，以便可以正确存储（和检索）它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:09:00.293

请参阅[文档](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-dst-3F)以`Time`获取更多信息。

创建变量时，可以使用`Time.local`，它会判断 DST 是否正确。例如，要在`3.30 pm`您可以执行以下操作：（*我的当地时间是 CST）*

```
Time.local 2012, 10, 20, 15, 30
=> 2012-10-20 15:30:00 +0800 
```

存储到数据库时，我建议存储为 UTC，即，`variable.utc`然后如果需要再次将其呈现给用户，只需`variable.localtime`再次调用即可。从内存来看，这使得在 JavaScript 等其他语言中使用时间变得非常简单。

# mysql - SQL：获取包含 1 或另一个的列

> ID：12983182
> 
> 赞同：1
> 
> 时间：2012-10-19T22:13:28.670
> 
> 标签：mysql, sql, database

这是一种“非此即彼”的查询，我想不出最好的方法

`SELECT id, serial_number FROM bid_tag WHERE active = 1 AND house_id = 0 OR house_id = 14`

所以我需要得到一个**0**或特定数字“14”的 house_id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:15:17.510

括号是你的朋友。如果您不使用它们，逻辑表达式将以错误的顺序进行评估（在您的情况下，也可以列出非活动项目）：

```
active = 1 AND (house_id = 0 OR house_id = 14) 
```

[`IN()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)如果您有多个选项，您也可以使用, 更方便：

```
active = 1 AND house_id IN (0, 14) 
```

# jquery - 为什么在 jQuery 中找不到可折叠面板

> ID：12983186
> 
> 赞同：-1
> 
> 时间：2012-10-19T22:13:49.607
> 
> 标签：jquery, ajaxcontroltoolkit, collapsiblepanelextender

我在一个页面上有九个可折叠面板。我可以从后面的 jQuery 或 C# 代码展开或折叠它们。在我破坏某些东西之前一切正常，现在 $find(cpe) 为九个中的两个返回 null。

面板已定义且对 C# 可见，但它们在 DOM (Firebug) 中的 outerHTML 设置表明存在问题：

这些工作：

```
<input name="ctl00$body$cpOutsideSales_ClientState" id="ctl00_body_cpOutsideSales_ClientState" value="true" type="hidden">
<input name="ctl00$body$cpGeneral_ClientState" id="ctl00_body_cpGeneral_ClientState" value="false" type="hidden"> 
```

这些不起作用：

```
<input name="ctl00$body$cpDuties_ClientState" id="ctl00_body_cpDuties_ClientState" type="hidden">
<input name="ctl00$body$cpAnalyst_ClientState" id="ctl00_body_cpAnalyst_ClientState" type="hidden"> 
```

问题是缺少“value ='true'”，但我看不到设置它的明显方法。这是一个有效的声明：

```
<asp:CollapsiblePanelExtender ID="cpGeneral" runat="server" 
    TargetControlID="pnlGeneral" 
    BehaviorID="cpGeneral" 
    TextLabelID="lblGeneral" 
    SuppressPostBack="true" 
    Collapsed="true" 
    ImageControlID="icnGeneral" 
    ExpandControlID="pnlGeneralcp" 
    CollapseControlID="pnlGeneralcp"
    ExpandedText="Collapse" 
    CollapsedText="<b>Position/Organization</b>">
</asp:CollapsiblePanelExtender> 
```

一个没有：

```
<asp:CollapsiblePanelExtender ID="cpDuties" runat="server" 
    TargetControlID="pnlDuties"
    BehaviorID="cpDuties" 
    TextLabelID="lblDuties" 
    SuppressPostBack="true" 
    Collapsed="true"
    ImageControlID="icnDuties" 
    ExpandControlID="pnlDutiescp" 
    CollapseControlID="pnlDutiescp"
    ExpandedText="Collapse" 
    CollapsedText="<b>Duties</b>">
</asp:CollapsiblePanelExtender> 
```

我尝试在 C# 中设置 ClientState，代码执行，但 jQuery 代码仍然找不到控件。IE 这在 pn="cpGeneral" 时有效，但在 pn="cpDuties' 时失败：

```
function addPanelHandler(panel, pn) {
    extender = $find(pn);
    if (extender != null) {
        extender.add_expanded(function () {
            loadPanel(panel, pn);
        });
    }
} 
```

这是来自 FireBug 的图像。请注意，九个中的两个缺少“真实”： ![在此处输入图像描述](../Images/bae42001741e399c41bce537bf501b5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:30:22.130

我看不出这两个不应该工作的理由。我相信它与输入/数据有关。
但因为它是一个快速检查：
1）尝试另一个浏览器。还有一个。
如果它们的行为方式都相同：
2) 确保 addPanelHandler 的输入完全正确。如果他们是 - 找人来消除[输入](http://en.wikipedia.org/wiki/Rubber_duck_debugging)和问题。
3）如果您仍然有问题：暂时放弃aspnet并将代码复制/粘贴到HTML中并提取代码。恕我直言：摆脱服务器加快了调试周转。

* * *

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T22:13:22.780

对于造成这种情况的原因，我从来没有给出明确的答案，但是通过仔细地重新创建控件，我创建了另一个可以工作的控件，并逐渐将功能从坏控件转移到好的控件。我能够将它与控件声明中的某些内容隔离开来，但这与我得到的一样接近。

# ember.js - Ember.Select - 如何填写这些值？

> ID：12983192
> 
> 赞同：2
> 
> 时间：2012-10-19T22:14:35.863
> 
> 标签：ember.js

我在我的 Rails 应用程序中使用 Ember.js，到目前为止，我已经很好地掌握了一些东西。但是，我正在尝试使用 Ember.Select 语句输入生日下拉列表。我想知道在此选择中添加值的最佳方法和位置是什么？提前致谢！

# php - 数据库表不与任何其他表关联

> ID：12983196
> 
> 赞同：0
> 
> 时间：2012-10-19T22:15:14.527
> 
> 标签：php, mysql, sql, database, mysqli

我在下面有一个查询，用户将在其中输入一个问题中的一个术语，它将输出包含该术语的问题，并与它一起显示与它的答案、它的选项类型、它的回复类型等相关的问题。

以下是查询：

```
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, 
                GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, 
                r.ReplyType, q.QuestionMarks, q.SessionId   
FROM Answer an    
JOIN Question q 
ON q.QuestionId = an.QuestionId 
AND an.SessionId = q.SessionId   
JOIN Reply r 
ON q.ReplyId = r.ReplyId    
JOIN Option_Table o 
ON q.OptionId = o.OptionId 
WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
GROUP BY an.SessionId, an.QuestionId 
```

现在我意识到通过使用 CRON，它每年都会删除以前的考试（SessionId），这意味着这些问题不会出现供用户在用户中搜索。

所以我想做的是建立一个表格来存储所有以前的问题，表格如下：

```
Previous_Question Table:

PreviousId (auto) PreviousContent
1                 What is 2+2? 
2                 What is 4+4 and 3+3?
3                 What is square root of 144? 
```

所以我想使用 Previous_Question Table 来搜索以前的问题。所以我需要更改上面的查询虽然最大的问题是该表没有链接到任何其他表，这意味着我将如何能够检索它的正确答案、回复类型、选项类型等？这是我的问题。

有什么帮助吗？

编辑：

以下是其他表格：

问题表

```
SessionId QuestionId  QuestionContent             NoofAnswers ReplyId QuestionMarks OptionId
AAA       1           What is 2+2?                  1          1          5         2
AAA       2           What is 4+4 and 3+3?          1          2          5         3
ABC       3           What is square root of 144?   1          1          7         5 
```

答案表：

```
AnswerId(auto) SessionId QuestionId  Answer
1              AAA       1           B
2              AAA       2           A
3              AAA       3           D
4              ABC       1           A 
```

回复表：

```
ReplyId ReplyType
1       Single
2       Multiple 
```

选项表：

```
OptionId  OptionType
1         A-C
2         A-D
3         A-E
4         A-F
5         A-G 
```

现在假设 SessionId "AAA" 被删除，这意味着在 "Question" 表中包含 SessionId 的 "AAA" 的所有相应行都将被删除。但刚刚意识到相应的答案也会如此。

我需要帮助以某种方式设置一些东西，它将存储以前的问题及其详细信息（答案、回复类型、选项类型）等，以便即使问题和答案因为会话已被删除而被删除，老师也可以采取一些方法挑选那些存储在某处的问题，以便教师仍然可以选择这些问题及其相关答案、选项类型、回复类型等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:29:53.553

快速拍摄...您可以更改会话表的结构并添加一个布尔字段，比如说“活动”。然后，对该表运行查询，并将 active 设置为 TRUE。并且，不要删除会话，只需将值更改为非活动。因此，下次需要时，只需检查 active=TRUE。

# xml - 如何使用带有属性值的 xslt 作为选择器？

> ID：12983197
> 
> 赞同：3
> 
> 时间：2012-10-19T22:15:15.463
> 
> 标签：xml, xslt, selector

我正在尝试学习 xslt，并且我正在使用一个看起来像这样的 xml。

```
<Beats>
 <Beat>
   <Personal type="set">
      <Usages type="box">
       1233
      </Usages>
      <NonUsages type="box">
       4122
      </NonUsages>
   </Personal>

   <NonPersonal type="unset">
      <Damages type="box">
       6466
      </Damages>
      <NonDamages type="box">
       5544
      </NonUsages>
   </NonPersonal>

   <Confidential type="set">
      <Discounts type="box">
       1233
      </Discounts>
      <NonDiscounts type="box">
       4122
      </NonDiscounts>
   </Confidential>

 </Beat>
</Beats> 
```

我目前的目标是打印出内部标签内的数字。但是我不能将标签的名称用作选择器，因为只有属性“类型”很重要。我尝试使用以下 xslt。但它似乎没有工作。

```
<xsl:output method="text"/>
<xsl:template match="*">
<html>
<body>
<h2> Test</h2>
<xsl:for-each select="//Beats/Beat/[@type='set']">
   <xsl:value-of select="[@type='box'] />
   <br/>
</xsl:for-each>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

我究竟做错了什么 ？

我想不通的另一件事是如何在使用属性作为选择器的同时获取标签的名称。代替

```
<xsl:value-of select="[@type='box'] /> 
```

它给出了标签内的内容；我可以使用什么来获取包含此“type=box”属性的标签的名称？（例如，Usages、NonUsages 等。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:56:17.293

**此转换旨在仅对您的原始转换提供必要的更正**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/">
        <html>
            <body>
                <h2> Test</h2>
                <xsl:for-each select="/*/*/*[@type='set']/*[@type='box']">
                    <xsl:value-of select="." />
                    <br/>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时（在更正它以使其成为格式良好的 XML 文档之后）**：

```
<Beats>
 <Beat>
   <Personal type="set">
      <Usages type="box">
       1233
      </Usages>
      <NonUsages type="box">
       4122
      </NonUsages>
   </Personal>

   <NonPersonal type="unset">
      <Damages type="box">
       6466
      </Damages>
      <NonDamages type="box">
       5544
      </NonDamages>
   </NonPersonal>

   <Confidential type="set">
      <Discounts type="box">
       1233
      </Discounts>
      <NonDiscounts type="box">
       4122
      </NonDiscounts>
   </Confidential>
 </Beat>
</Beats> 
```

**产生了（我猜是）想要的结果**：

```
<html>
   <body>
      <h2> Test</h2>
       1233
      <br/>
       4122
      <br/>
       1233
      <br/>
       4122
      <br/>
   </body>
</html> 
```

**它在浏览器中显示为**：

## 测试

1233
4122
1233
4122

* * *

**关于你的第二个问题**：

> 我想不通的另一件事是如何在使用属性作为选择器的同时获取标签的名称。代替
> 
> ```
> <xsl:value-of select="[@type='box'] /> 
> ```

**你想要的东西**：

```
<xsl:for-each select="/*/*/*[@type='set']/*[@type='box']">
  <xsl:value-of select="name()"/>
  <xsl:text> : </xsl:text>
  <xsl:value-of select="." />
  <br/>
</xsl:for-each> 
```

**现在完整的转换变成：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/">
        <html>
            <body>
                <h2> Test</h2>
                <xsl:for-each select="/*/*/*[@type='set']/*[@type='box']">
                  <xsl:value-of select="name()"/>
                   <xsl:text> : </xsl:text>
                    <xsl:value-of select="." />
                    <br/>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

**当它应用于同一个 XML 文档（上图）时，结果是**：

```
<html>
   <body>
      <h2> Test</h2>Usages : 
       1233
      <br/>NonUsages : 
       4122
      <br/>Discounts : 
       1233
      <br/>NonDiscounts : 
       4122
      <br/>
   </body>
</html> 
```

**这由浏览器显示为**：

## 测试

使用次数：1233 非使用
次数：4122
折扣：1233 非折扣
：4122

# c# - 烛台多个 Y 值

> ID：12983199
> 
> 赞同：10
> 
> 时间：2012-10-19T22:15:33.807
> 
> 标签：c#, oledb, mschart, candlestick-chart

我的任务是在 Windows 窗体中使用 MSChart 制作烛台图。我已经成功地制作了一个没有问题的 3D 条形图。但是在互联网上搜索了很长时间，微软的源代码（WinSamples）和很多令人头疼的问题后，我找不到创建烛台图的正确方法。

可以帮助我的是一个明确的例子，它向图表中添加了一个带有多个 Y 值或更正我的代码的系列（当我运行时，除了图例标签之外，调试没有任何显示）。

一个好处是该示例基于 OleDB（我的值在 Access 数据库中）。

所以我的问题是：如果你有在 Windows 窗体中用 C# 创建烛台图表的经验，你能给我一个提示，或者（甚至更好）你能给我一些 C# 代码吗？

这是我当前（不工作）的代码：

```
using System.Windows.Forms.DataVisualization.Charting;
public partial class CandleStick : Form
{
    public CandleStick()
    {
        InitializeComponent();
    }

    private void CandleStick_Load(object sender, EventArgs e)
    {
        GrafiekLaden();
    }

    public void GrafiekLaden()
    {

        Koers k = new Koers();
        // This method fills up a list, the data comes from my database
        // it contains Date, High, Low, Open, Close
        k.meerdereOphalen();

        Series price = new Series();
        chart1.Series.Add(price);

        // Set series chart type
        chart1.Series["price"].ChartType = SeriesChartType.Candlestick;

        // Set the style of the open-close marks
        chart1.Series["price"]["OpenCloseStyle"] = "Triangle";

        // Show both open and close marks
        chart1.Series["price"]["ShowOpenClose"] = "Both";

        // Set point width
        chart1.Series["price"]["PointWidth"] = "1.0";

        // Set colors bars
        chart1.Series[0]["PriceUpColor"] = "Green";
        chart1.Series[0]["PriceDownColor"] = "Red";

        for (int i = 0; i < k.Lijst.Count; i++)
        {
            // adding date and high
            chart1.Series["price"].Points.AddXY(DateTime.Parse(k.Lijst[i].Datum), k.Lijst[i].Hoog);
            // adding low
            chart1.Series["price"].Points[i].YValues[1] = k.Lijst[i].Laag;
            //adding open
            chart1.Series["price"].Points[i].YValues[2] = k.Lijst[i].PrijsOpen;
            // adding close
            chart1.Series["price"].Points[i].YValues[3] = k.Lijst[i].PrijsGesloten;
        }
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T15:50:01.623

您的代码添加了一个`Series`未命名的“价格”，然后引用两者`Series["price"]`，`Series[0]`如果其他系列已经存在，这将是不同的东西。我运行了一个稍微修改过的版本（用 a 伪造数据库数据`List<>`）没有任何问题。您应该验证来自数据库的数据是否正常。

![在此处输入图像描述](../Images/205fd26c67a328cacab9facaf49a8736.png)

```
public partial class Form3 : Form
{
    public Form3()
    {
        InitializeComponent();
    }

    private void CandleStick_Load(object sender, EventArgs e)
    {
        GrafiekLaden();
    }

    public void GrafiekLaden()
    {
        // fake the DB data with a simple list
        List<dbdata> k = new List<dbdata> { 
            new dbdata("1/1/2012", 10f, 8f, 9f, 9.5f),
            new dbdata("2/1/2012", 15F, 10F, 12F, 13F),
            new dbdata("3/1/2012", 5F, 10F, 8F, 6F),
            new dbdata("4/1/2012", 25F, 10F, 18F, 16F)
        };

        Series price = new Series("price"); // <<== make sure to name the series "price"
        chart1.Series.Add(price);

        // Set series chart type
        chart1.Series["price"].ChartType = SeriesChartType.Candlestick;

        // Set the style of the open-close marks
        chart1.Series["price"]["OpenCloseStyle"] = "Triangle";

        // Show both open and close marks
        chart1.Series["price"]["ShowOpenClose"] = "Both";

        // Set point width
        chart1.Series["price"]["PointWidth"] = "1.0";

        // Set colors bars
        chart1.Series["price"]["PriceUpColor"] = "Green"; // <<== use text indexer for series
        chart1.Series["price"]["PriceDownColor"] = "Red"; // <<== use text indexer for series

        for (int i = 0; i < k.Count; i++)
        {
            // adding date and high
            chart1.Series["price"].Points.AddXY(DateTime.Parse(k[i].Datum), k[i].Hoog);
            // adding low
            chart1.Series["price"].Points[i].YValues[1] = k[i].Laag;
            //adding open
            chart1.Series["price"].Points[i].YValues[2] = k[i].PrijsOpen;
            // adding close
            chart1.Series["price"].Points[i].YValues[3] = k[i].PrijsGesloten;
        }
    }
}

class dbdata
{
    public string Datum;
    public float Hoog;
    public float Laag;
    public float PrijsOpen;
    public float PrijsGesloten;
    public dbdata(string d, float h, float l, float o, float c) { Datum = d; Hoog = h; Laag = l; PrijsOpen = o; PrijsGesloten = c; }
} 
```

# javascript - Greasemonkey Jquery 干扰？

> ID：12983202
> 
> 赞同：2
> 
> 时间：2012-10-19T22:15:46.643
> 
> 标签：javascript, jquery, greasemonkey

> **可能重复：**
> [Greasemonkey 1.0 中的 jQuery 与使用 jQuery 的网站冲突](https://stackoverflow.com/questions/12146445/jquery-in-greasemonkey-1-0-conflicts-with-websites-using-jquery)

看来，如果我的任何greasemonkey 脚本具有如下行，我会在包含jquery 的网站上收到错误。我不知道为什么，但我确实注意到一些 javascript 事件完全没有触发。（例如，我无法添加评论）。

我可以在脚本中排除 SO，但有更好的解决方案吗？也许我应该在测试 jquery 是否存在后动态添加 jquery。如何解决此问题以及如何在不使用 jquery 的情况下将 jquery 脚本标签添加到正文？

```
// @require         http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:45:29.523

[Greasemonkey 1.0 从根本上改变了沙盒的工作方式](http://wiki.greasespot.net/@grant)，破坏了数千个脚本。另请参阅，[Greasemonkey 1.0 中的 jQuery 与使用 jQuery 的网站冲突](https://stackoverflow.com/questions/12146445/jquery-in-greasemonkey-1-0-conflicts-with-websites-using-jquery)。

这是一个巨大的问题，Greasemonkey 的首席开发人员表示完全不愿意以明智的方式解决它。

要解决此问题，请将沙箱恢复到您的脚本，并通过**编辑****[元数据块](http://wiki.greasespot.net/Metadata_Block)****以以下行结束来**`$`解决冲突：

```
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design change introduced in GM 1.0,
    It restores the sandbox.
*/ 
```

指定一个`@grant`值（不是`none`）会重新激活沙箱。

* * *

您还可以考虑切换到[*Scriptish*](https://addons.mozilla.org/en-US/firefox/addon/scriptish/)，它在过去提供了卓越的功能和性能，并且不会受到这种新沙盒行为的影响。

*到目前为止， Scriptish*还没有发布破坏其大部分安装基础的更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:30:17.483

仅当尚未包含 jQuery 时才需要包含它。所以你需要进行第一行检查。如果包含，则运行脚本，如果不包含，则添加类似行以包含它，然后循环检查功能。像这样的东西：

```
var wrote = false,
    runScript = function(){
    if(typeof(jQuery) === 'undefined'){
        if(!wrote){
            wrote = true;
            document.write('<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>');
        }
        setTimeout(runScript, 50);
    }else{
        //your script goes here
    }
};

runScript(); 
```

唯一的问题是如果谷歌的 jquery 没有启动。

# java - 在 Eclipse .classpath (Windows) 中使用 %UserProfile%

> ID：12983203
> 
> 赞同：1
> 
> 时间：2012-10-19T22:15:59.297
> 
> 标签：java, eclipse, scala, sbt

在 Eclispe 中指定路径时，有没有办法使用 %UserProfile% `.classfile`？我有一个项目，其中包含以下行`.classfile`：

```
<classpathentry kind="lib" path="C:/Users/<username>/.ivy2/cache/somelib.jar"/> 
```

有没有办法以更便携的方式指定它，可以检入存储库并供不同用户使用？特别是我想摆脱`C:/Users/<username>`路径的一部分。

我看到了两种可能的方法来解决这个问题，但不知道如何实现它们中的任何一个：

1.  在路径中使用 %UserProfile% 来引用用户目录。在 Linux 上，可以使用`~`，但这似乎不适用于 Windows。
2.  使用指定常春藤缓存位置的环境变量。

任何提示如何做这些事情，或如何以其他方式解决问题将不胜感激。

背景：该项目是一个使用 sbt 构建的 Scala 项目，它使用 ivy 管理依赖关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:45:37.003

Have you thought about just using the sbt eclipse plugin to manage your eclipse project?

[https://github.com/typesafehub/sbteclipse](https://github.com/typesafehub/sbteclipse)

This generates a project which you can import in your workspace.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:24:35.233

另一种选择是可以使用类路径容器。[我没有为 Ivy 尝试过。]

[http://ant.apache.org/ivy/ivyde/history/latest-milestone/cp_container.html](http://ant.apache.org/ivy/ivyde/history/latest-milestone/cp_container.html)

类路径变量（您提到的选项 2）也是可能的。

右键单击项目>配置构建路径>添加变量>配置变量>新变量[创建一个具有正确名称的变量]>确定>扩展[选择您需要使用的罐子]。

您的类路径应该更新。在这种情况下，您的项目团队需要遵循相同的程序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-05T18:39:03.560

从另一个堆栈溢出条目：这对你有用吗？

`System.getenv(String name)`，我*猜*是或者`System.getenv("USERPROFILE")` `System.getenv("%USERPROFILE%")`——下面的“答案”链接并不像我的简单假设那么天真

[我们可以在 Java 中读取操作系统环境变量吗？](https://stackoverflow.com/questions/20610080/can-we-read-the-environment-variables-of-os-in-java)

# javascript - jQuery Masonry 移除函数示例

> ID：12983204
> 
> 赞同：3
> 
> 时间：2012-10-19T22:16:09.690
> 
> 标签：javascript, jquery, jquery-masonry

我已经在我们的网站上实现了 jQuery masonry，效果很好。我们的网站是动态的，用户必须能够添加/删除砌体框。该站点有一个添加示例，但没有删除示例。我们的数据库被查询返回 x 个项目。循环通过它们被加载和显示。这是一个代码示例：（我们使用 F3 框架，F3:repeat 是它的循环机制。）。

```
<div id="container" class="transitions-enabled clearfix" style="clear:both;">
   <F3:repeat group="{{@productItems}}" value="{{@item}}">
      <div id="{{@item.itemId}}">
         <div class="box">
            <div class="view"> <!-- for css -->
               <a onclick='quickRemove("{{@item.itemId}}")>
                  <img src="{{@item.pic}}" />
               </a>
            </div>
            <p>
            {{@item.title}}
            </p>
         </div> 
      </div>
   </F3:repeat>
</div> 
```

在 javascript 代码中，项目 ID 号是唯一的，并被传递到函数中。也是区分每个盒子的div id#。我尝试了各种组合和方法，但似乎无法让它发挥作用。

```
function quickRemove(item){
    var obj = $('#'+item+'').html(); // item is the product id# but also the div id#
    $('#container').masonry('remove',obj);

    $('#container').masonry('reloadItems');
    $('#container').masonry('reload');
} 
```

有没有人成功删除了一个项目，你是怎么做到的？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:20:33.373

目前，您似乎正在将一个充满 html 的字符串传递给 masonry remove 方法。通过不包括将其传递给实际的 jQuery 包装元素`.html()`

```
function quickRemove(item){
    var obj = $('#'+item+''); // item is the product id# but also the div id#
    $('#container').masonry('remove',obj);

    $('#container').masonry('reloadItems');
    $('#container').masonry('reload');
} 
```

# windows-7-x64 - 使用anycpu构建时，它有stackoverflow异常

> ID：12983206
> 
> 赞同：1
> 
> 时间：2012-10-19T22:16:22.920
> 
> 标签：windows-7-x64, anycpu, stack-size

我在托管代码中有一个项目（C# winform 程序）。当我在 vs2010 中构建时（尝试使用 .net 2.0 和 .net 4.03），如果目标是 x64 或 x84，它们都在 win 7 环境中运行得更好。但是当使用anycpu构建时，它在win 7中有stackoverflow异常。它在逻辑中使用了一个大堆栈。我尝试了以下方法：1）创建新线程，将大小设置为 400000，2）构建后运行 corflags xxx.exe /32BIT- 3）运行 editbin xxx.exe /STACK:400000。

问题仍然存在。请帮忙。

提前致谢。

# objective-c - UIBezierPath 绘制直线

> ID：12983211
> 
> 赞同：3
> 
> 时间：2012-10-19T22:16:50.107
> 
> 标签：objective-c, ios, ipad, uibezierpath

这是我目前正在使用的相关 .m 。

```
- (void)drawRect:(CGRect)rect
{

    [[UIColor redColor] setStroke];
    for (UIBezierPath *_path in pathArray) 
    [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];    

}

#pragma mark -
#pragma mark - Touch Methods

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    myPath=[[UIBezierPath alloc]init];

    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    if([ud objectForKey:@"lineThickness"] == nil) {
        myPath.lineWidth=5;
    }
    else {

        float thicknessFloat = [ud floatForKey:@"lineThickness"];
        myPath.lineWidth= 10\. * thicknessFloat;

    }

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];
    [pathArray addObject:myPath];

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    if([ud objectForKey:@"lineThickness"] == nil) {
        myPath.lineWidth=5;
    }
    else {

        float thicknessFloat = [ud floatForKey:@"lineThickness"];
        myPath.lineWidth= 10\. * thicknessFloat;

    }
    [myPath addLineToPoint:[mytouch locationInView:self]];
    [self setNeedsDisplay];

} 
```

它工作得很好，但由于这是我稍微修改的教程代码，我不知道如何解决想要在两点之间画线的问题，并且每次添加一个点时让框架连接这些点。

任何人都可以请我指出如何做到这一点的好方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:00:53.667

如何实现这一点的细节取决于您正在寻找的效果。如果您只是点击一堆点并想将它们添加到 a`UIBezierPath`中，您可以在视图控制器中执行以下操作：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    CGPoint location = [mytouch locationInView:self.view];

    // I'm assuming you have a myPath UIBezierPath which is an ivar which is 
    // initially nil. In that case, we'll check if it's nil and if so, initialize 
    // it, otherwise, it's already been initialized, then we know we're just
    // adding a line segment.

    if (!myPath)
    {
        myPath = [UIBezierPath bezierPath];
        [myPath moveToPoint:location];

        shapeLayer = [[CAShapeLayer alloc] initWithLayer:self.view.layer];
        shapeLayer.lineWidth = 1.0;
        shapeLayer.strokeColor = [UIColor redColor].CGColor;
        shapeLayer.fillColor = [UIColor clearColor].CGColor;

        [self.view.layer addSublayer:shapeLayer];
    }
    else
    {
        [myPath addLineToPoint:location];
        shapeLayer.path = myPath.CGPath;
    }
} 
```

如果您想要一些可以用手指绘制的东西（例如拖动手指绘制），那么它可能看起来像：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    CGPoint location = [mytouch locationInView:self.view];

    myPath = [UIBezierPath bezierPath];
    [myPath moveToPoint:location];

    shapeLayer = [[CAShapeLayer alloc] initWithLayer:self.view.layer];
    shapeLayer.lineWidth = 1.0;
    shapeLayer.strokeColor = [UIColor redColor].CGColor;
    shapeLayer.fillColor = [UIColor clearColor].CGColor;

    [self.view.layer addSublayer:shapeLayer];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    CGPoint location = [mytouch locationInView:self.view];

    [myPath addLineToPoint:location];
    shapeLayer.path = myPath.CGPath;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T22:27:59.067

我不会使用 UIBezierPath，因为它更多地用于绘制曲线路径。

实现这一点的最有效方法是在 drawRect 中使用核心图形绘制命令，同时使用数组存储您要绘制的点；此数组附加到您的触摸方法中。

```
- (void)drawRect:(CGRect)rect {   
    CGContextRef c = UIGraphicsGetCurrentContext();

    CGFloat black[4] = {0, 0, 
                    0, 1};
    CGContextSetStrokeColor(c, black);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 100, 100);
    CGContextAddLineToPoint(c, 100, 200); //call this in a loop that goes through the point array
    CGContextStrokePath(c);
} 
```

这里有更多信息：[Quartz 2D Programming Guide](https://developer.apple.com/library/mac/ipad/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)

希望这可以帮助！

# c - 设计交互式客户端

> ID：12983212
> 
> 赞同：0
> 
> 时间：2012-10-19T22:16:56.040
> 
> 标签：c, sockets, unix, client-server

我正在尝试设计一个客户端程序，该程序连接到远程服务器并向其发送各种消息/请求，并根据发送的请求期望响应（例如，发送加入消息并等待响应，然后查询某些资源或不按特定顺序询问一些信息等）。

我想设计客户端，以便用户可以在加入服务器后选择任何可能的请求发送（在完成一个请求并获得响应后，如果有的话，它应该允许他们执行进一步的请求或退出）。类似于每次返回的操作菜单（同时还等待来自服务器的任何数据）？但是我似乎无法弄清楚如何做到这一点。有没有办法做到这一点（最好不要进入分叉/线程）？

对此的任何投入都会非常棒。TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:22:04.883

我将从一个简单的聊天服务器开始，让您了解套接字编程。谷歌示例 TCP 聊天服务器或其他东西，你最终会得到这样的简单示例：[http](http://www.cs.ucsb.edu/~almeroth/classes/W01.176B/hw2/examples/tcp-server.c) ://www.cs.ucsb.edu/~almeroth/classes/W01.176B/hw2/examples/tcp-server.c 。 . 一旦您能够远程登录到您的服务器并读取/写入您的客户端，您应该能够从那里继续前进并在您的客户端发出特定命令和类似的事情时执行操作。

# jqgrid - 替代本地数据集上的 jqgrid triggerToolbar

> ID：12983215
> 
> 赞同：0
> 
> 时间：2012-10-19T22:17:14.017
> 
> 标签：jqgrid, filter, local, reload

我有一个显示大量数据的 jqgrid。通过 jquery ajax 调用（在 jqgrid 逻辑之外）定期从服务器检索数据。将检索到的数据与之前重试的数据进行比较（并在 js 中存储为 var。它用作 jqgrid 的数据）。如果它们不同，则刷新本地数据，然后触发 jqgrid 重新加载。jqgrid 数据类型是 jsonstring。

此解决方案运行良好，除非用户在过滤器工具栏中有过滤器值。因为我设置了一个 0.1 秒的计时器来触发 loadcomplete 事件中的过滤器，所以当有过滤器字符串时，整个网格刷新如下所示：

*   最初在 jqgrid 中显示了 20 条记录（因为用户正在过滤列中的某个值）
*   jqgrid 被刷新，因为分开的 ajax 调用从服务器轮询的数据与浏览器中存储的数据不同
*   jqgrid 将在很短的时间内显示所有新数据
*   jqgrid 过滤器在 loadcomplete 内触发。屏幕再次显示 20 条记录。

它在技术上仍然有效。但是有没有办法在可视化网格之前在 jsonstring 上本地重新应用过滤器？换一种说法，jqgrid 可以只可视化一次，这将同时加载新的 jsonsting 并应用之前放置在过滤器框中的过滤器？

谢谢卡比

更新：

我尝试了 Oleg 的一种解决方案，在重新加载网格时应用过滤器。这是[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridFiltered.htm)。只要数据类型是本地的，它就可以完美地工作。我的页面实际上使用数据类型 jsonstring 来重新加载网格。代码中的这个函数似乎确实适用于 jsonstring。我希望在外部 jquery ajax 成功从服务器检索数据后调用这样的函数。

```
function filter() {
            var searchFiler = $("#filter").val(), f;

            if (searchFiler.length === 0) {
                grid[0].p.search = false;
                $.extend(grid[0].p.postData,{filters:""});
            }
            f = {groupOp:"OR",rules:[]};
            f.rules.push({field:"name",op:"cn",data:searchFiler});
            f.rules.push({field:"note",op:"cn",data:searchFiler});
            grid[0].p.search = true;
            $.extend(grid[0].p.postData,{filters:JSON.stringify(f)});
            grid.trigger("reloadGrid",[{page:1,current:true}]);
        } 
```

有人可以帮帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:05:00.037

`datatype: "jsonstring"`与 的用法相比， 的用法存在细微差别`datatype: "local"`。[您可以在此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1856-1879)比较代码的相应部分。代码的差异之一是和函数`datatype: "local"`的用法。最后一个函数 ( ) 将仅在虚拟滚动 (或) 的情况下使用。在您的情况下，和之间的重要区别是.`addLocalData``populateVisible``populateVisible``scroll: 1``scroll: true``datatype: "jsonstring"``datatype: "local"``addLocalData``datatype: "local"`

该功能`addLocalData`适用​​于本地数据的分组和过滤（请参阅[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1599-1609)）。此外，它会将显示的行列表剪切到当前页面（请参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1628)）。

因此，如果服务器返回未过滤的数据并且您需要显示过滤后的数据，那么您应该`datatype: "local"`使用`datatype: "jsonstring"`. 而不是`datastr`你应该使用`data`. 您可能需要使用`localReader`而不是`jsonReader`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#array_data)）或只是手动将从服务器返回的数据转换为默认可以读取的格式`localReader`。

**更新**：在[另一个答案](https://stackoverflow.com/a/13081756/315935)中，我描述并包含了演示如何`localReader`使用的演示。

您还可以做的是将服务器返回的输入数据转换为标准格式（或以该格式从服务器返回数据）。`data`参数应该是命名对象的数组，其属性类似于`colMode`. 所以你可以做的只是一个简单的遍历`rows`数组并以 jqGrid 所需的格式创建另一个数组。相应的代码可能如下：

```
// let us you have myImput with myImput.rows
// and you have cm which you use as the value of colModel parameter
var mydata = [], input = myImput.rows, l = input.length,
    cmLength = cm.length, i, j, inputItem, item;
for (i = 0; i < l; i++) {
    inputItem = input[i];
    item = {id: inputItem.id};
    inputItem = inputItem.cell;
    for (j = 0; j < cmLength; j++) {
        item[cm[j].name] = inputItem[j];
    }
    mydata.push(item);
} 
```

经过这样的转换，您可以使用`mydata`数组作为`data`参数的值。

# assembly - 远跳到保护模式后的 GPF

> ID：12983218
> 
> 赞同：2
> 
> 时间：2012-10-19T22:17:55.127
> 
> 标签：assembly, x86, osdev, protected-mode, bochs

在使用 GRUB 作为我的引导加载程序进行了几周的工作后，我决定自己动手做，这样我就可以了解它们是如何工作的。我在互联网上找到了 Brokenthorn 的教程（目前在[http://www.brokenthorn.com/Resources/OSDev9.html](http://www.brokenthorn.com/Resources/OSDev9.html)上）。当我尝试切换到保护模式时，cpu 硬件在远跳后重置。我正在运行 bochs v. 2.6。

这是我的第二阶段引导加载程序（几乎是教程的副本，因为我认为它可以解决我的问题 - 它没有）

```
 bits    16

; Remember the memory map-- 0x500 through 0x7bff is unused above the BIOS data area.
; We are loaded at 0x500 (0x50:0)

org 0x50:0x0

jmp main                ; go to start

;*******************************************************
;   Preprocessor directives
;*******************************************************

%include "Gdt.inc"          ; Gdt routines

;*******************************************************
;   Data Section
;*******************************************************

;*******************************************************
;   STAGE 2 ENTRY POINT
;
;       -Store BIOS information
;       -Load Kernel
;       -Install GDT; go into protected mode (pmode)
;       -Jump to Stage 3
;*******************************************************

main:

    ;-------------------------------;
    ;   Setup segments and stack    ;
    ;-------------------------------;

    cli             ; clear interrupts
    xor ax, ax          ; null segments
    mov ds, ax
    mov es, ax
    mov ax, 0x9000      ; stack begins at 0x9000-0xffff
    mov ss, ax
    mov sp, 0xFFFF
    sti             ; enable interrupts

    call    InstallGDT      ; install our GDT
    ;activate gate a20

    mov al,2
    out 0x92,al

    ;-------------------------------;
    ;   Go into pmode       ;
    ;-------------------------------;

    cli             ; clear interrupts
    mov eax, cr0        ; set bit 0 in cr0--enter pmode
    or  eax, 1
    mov cr0, eax
    jmp 08h:Stage3      ; ############It restarts here############

    ; Note: Do NOT re-enable interrupts! Doing so will triple fault!
    ; We will fix this in Stage 3.
;******************************************************
;   ENTRY POINT FOR STAGE 3
;******************************************************

bits 32                 ; Welcome to the 32 bit world!

Stage3:

    ;-------------------------------;
    ;   Set registers       ;
    ;-------------------------------;

    mov     ax, 0x10        ; set data segments to data selector (0x10)
    mov     ds, ax
    mov     ss, ax
    mov     es, ax
    mov     esp, 90000h     ; stack begins from 90000h

;*******************************************************
;   Stop execution
;*******************************************************

STOP:

    hlt 
```

我的 GDT：

```
 gdt_data: 
    dd 0                ; null descriptor
    dd 0 

; gdt code:             ; code descriptor
    dw 0FFFFh           ; limit low
    dw 0                ; base low
    db 0                ; base middle
    db 10011010b            ; access
    db 11001111b            ; granularity
    db 0                ; base high

; gdt data:             ; data descriptor
    dw 0FFFFh           ; limit low (Same as code)
    dw 0                ; base low
    db 0                ; base middle
    db 10010010b            ; access
    db 11001111b            ; granularity
    db 0                ; base high

end_of_gdt:
toc: 
    dw end_of_gdt - gdt_data - 1    ; limit (Size of GDT)
    dd gdt_data             ; base of GDT 
```

这是我尝试此代码时 bochs 给出的错误：

```
00018047272e[CPU0 ] jump_protected: gate type 0 unsupported
00018047272e[CPU0 ] interrupt(): gate descriptor is not valid sys seg (vector=0x0d)
00018047272e[CPU0 ] interrupt(): gate descriptor is not valid sys seg (vector=0x08)
00018047272i[CPU0 ] CPU is in protected mode (active)
00018047272i[CPU0 ] CS.mode = 16 bit
00018047272i[CPU0 ] SS.mode = 16 bit
00018047272i[CPU0 ] EFER   = 0x00000000
00018047272i[CPU0 ] | EAX=60000011  EBX=00000000  ECX=00090003  EDX=00000080
00018047272i[CPU0 ] | ESP=0000ffff  EBP=00000000  ESI=000e0000  EDI=0000ffac
00018047272i[CPU0 ] | IOPL=0 id vip vif ac vm RF nt of df if tf sf zf af PF cf
00018047272i[CPU0 ] | SEG sltr(index|ti|rpl)     base    limit G D
00018047272i[CPU0 ] |  CS:0050( 0004| 0|  0) 00000500 0000ffff 0 0
00018047272i[CPU0 ] |  DS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00018047272i[CPU0 ] |  SS:9000( 0005| 0|  0) 00090000 0000ffff 0 0
00018047272i[CPU0 ] |  ES:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00018047272i[CPU0 ] |  FS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00018047272i[CPU0 ] |  GS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00018047272i[CPU0 ] | EIP=0000004f (0000004f)
00018047272i[CPU0 ] | CR0=0x60000011 CR2=0x00000000
00018047272i[CPU0 ] | CR3=0x00000000 CR4=0x00000000
00018047272i[CPU0 ] 0x000000000000004f>> jmp far 0008:00a4 : EAA4000800
00018047272e[CPU0 ] exception(): 3rd (13) exception with no resolution, shutdown status is 00h, resetting
00018047272i[SYS  ] bx_pc_system_c::Reset(HARDWARE) called
00018047272i[CPU0 ] cpu hardware reset 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T07:59:00.813

```
0x000000000000004f>> jmp far 0008:00a4 : EAA4000800 
```

看起来 org 0x50:0x0 搞砸了，因为跳远应该更像 0008:05a4。尝试使用 org 0x500 而不是 org 0x50:0x0。

# assembly - 优化 ARM 组装的效率

> ID：12983219
> 
> 赞同：0
> 
> 时间：2012-10-19T22:17:56.920
> 
> 标签：assembly, arm

我这里有一个简单的程序，它被设置为产生输出，

```
The value of a is 2005

The value of b is 1959

The value of c is 1

The value of d is 0

The value of (a - b) * (c + d) is 46 
```

我正在寻找优化代码的最佳方法，我正在重复代码！是否可以直接从其他寄存器打印？例如 SWI 0 但对于不在 R0 中的整数？

```
 B   main
aval    DEFW    2005
bval    DEFW    1959
cval    DEFW    1
dval    DEFW    0
valOf   DEFB    'The value of \0'
isStr   DEFB    ' is \0'
lstStr  DEFB    'The value of (a - b) * (c + d) is \0'

    ALIGN

main    ADR R0, valOf   ;Value a
    SWI 3       
    MOV R0, #97     
    SWI 0       
    ADR R0, isStr   
    SWI 3
    LDR R0, aval    
    SWI 4
    MOV R0, #10     ;print new line
    SWI 0

    ADR R0, valOf   ;Value b
    SWI 3
    MOV R0, #98
    SWI 0
    ADR R0, isStr   
    SWI 3
    LDR R0, bval    
    SWI 4
    MOV R0, #10     ;print new line
    SWI 0

    ADR R0, valOf   ;Value c
    SWI 3
    MOV R0, #99
    SWI 0
    ADR R0, isStr   
    SWI 3
    LDR R0, cval    
    SWI 4
    MOV R0, #10     ;print new line
    SWI 0

    ADR R0, valOf   ;print 'value of '
    SWI 3
    MOV R0, #100
    SWI 0
    ADR R0, isStr   ;
    SWI 3
    LDR R0, dval    
    SWI 4   
    MOV R0, #10     ;print new line
    SWI 0

    ADR     R0, lstStr
    SWI 3
    LDR R3, aval
    LDR R4, bval
    LDR R5, cval
    LDR R6, dval
    SUB R1, R3, R4
    SUB R2, R5, R6
    MUL R0, R1, R2
    SWI 4

    SWI 2       ;exit 
```

任何想法都非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:49:52.767

我正要问你是否必须用汇编语言编写，但由于你正在使用`SWI`（现在它被称为[SVC](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihidabi.html)），显然你正坐在操作系统之上，很有可能是 Linux。

为什么你不用C写？这对你来说应该容易得多，除非这只是为了学习目的，在这种情况下你为什么要尝试学习这种用法？

关于优化，当您坐在非实时操作系统之上并进行系统调用时，任何性能预期都会丢失。从软件中断的角度来看，内核可能会以可变且无保证的方式延迟您的代码。

因此，在这种情况下，如果您正在考虑使您的应用程序快速运行，请尝试通过在用户空间中准备/缓存打印缓冲区来减少系统调用的数量，您可以在其中应用一些简单明了的 C 习惯用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:26:11.667

假设您对“优化”的定义是更少的代码（而不是速度），您可能会首先考虑使用子例程来完成繁重的工作的可能性。这样，您可以将字符串加载到 R0 中，将值加载到 R1 中，然后调用子例程。

诸如寄存器传输和各种 swi 调用之类的步骤将同时完成（如果要更改格式，这也会使事情变得容易得多），并且每个输出的主代码从大约十行减少到大约三行（一对夫妇寄存器加载和调用）。

# azure - Azure 上的 WF 服务，需要在 basicHttpBinding 上更改/增加 maxStringContentLength

> ID：12983222
> 
> 赞同：1
> 
> 时间：2012-10-19T22:18:19.143
> 
> 标签：azure, workflow

这有点像新手，但我花了一整天的时间试图弄清楚这一点。我在 Azure WebRole 中有一个 WF Service1.xamlx，其中包含一个 web.config ServiceModel 部分：

```
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" >
  <serviceActivations>
    <add relativeAddress="~/Service1.xamlx" service="Service1.xamlx" factory="System.ServiceModel.Activities.Activation.WorkflowServiceHostFactory"/>
  </serviceActivations>
</serviceHostingEnvironment> 
```

在我的客户端应用程序中，当我将服务引用添加到 Service1.xaml 时，这就是我得到的绑定（basicHttpBinding 的所有默认设置）：

```
 <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding> 
```

我需要增加绑定中的 maxStringContentLength="8192" 值。我怎么做？？

感谢您查看此内容以及您可以提供的任何帮助。

# delphi - 删除 OnDraw 中的列表框项目？

> ID：12983225
> 
> 赞同：0
> 
> 时间：2012-10-19T22:18:49.010
> 
> 标签：delphi, delphi-7

我有一个列表框并向其中添加项目，项目是文件的地址，项目是在一些过程之后添加的，它们是这样插入的：

```
Listbox_Browser.Items := myItems; 
```

所以我没有一一添加它们，我在插入 ti 列表框时无法检查它们，我尝试在 OnDraw 中检查它们并使用如下代码：

```
 Try
    FileOpenandP(Listbox_Browser.Items[Index]);
  Except
    ListBox_Browser.Items.Delete(Index);
  End; 
```

但我收到错误“列表索引超出范围”，解决方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T22:39:01.040

该`OnDrawItem`活动仅用于**绘画**。您不应该在该事件中**管理**您的列表，只根据需要绘制其当前项目。

您**应该**先检查文件，**然后**将剩余的列表分配给 ListBox，而不是一次分配整个列表，例如：

```
I := 0;
while I < myItems.Count do
begin
  try
    FileOpenandP(myItems[I]);
    Inc(I);
  except
    myItems.Delete(I);
  end;
end;
ListBox_Browser.Items := myItems; 
```

如果您不想`myItems`更改，请改用单独的列表：

```
tmpItems := TStringList.Create;
try
  tmpItems.Assign(myItems);
  I := 0;
  while I < tmpItems.Count do
  begin
    try
      FileOpenandP(tmpItems[I]);
      Inc(I);
    except
      tmpItems.Delete(I);
    end;
  end;
  ListBox_Browser.Items := tmpItems;
finally
  tmpItems.Free;
end; 
```

或者：

```
ListBox_Browser.Items := myItems;
I := 0;
while I < ListBox_Browser.Items.Count do
begin
  try
    FileOpenandP(ListBox_Browser.Items[I]);
    Inc(I);
  except
    ListBox_Browser.Items.Delete(I);
  end;
end; 
```

或者：

```
ListBox_Browser.Items.BeginUpdate;
try
  ListBox_Browser.Items.Clear;
  I := 0;
  for I := 0 to myItems.Count-1 do
  begin
    try
      FileOpenandP(myItems[I]);
    except
      Continue;
    end;
    ListBox_Browser.Items.Add(myItems[I]);
  end;
finally
  ListBox_Browser.Items.EndUpdate;
end; 
```

# ios - 不同iphone的不同背景

> ID：12983238
> 
> 赞同：1
> 
> 时间：2012-10-19T22:20:55.103
> 
> 标签：ios, iphone, xcode

**1.**在 xcode ios 应用程序中插入背景的最佳方法是什么？
**2.**我有两个背景，一个大的覆盖了所有的东西，一个小的，底部有一些细节。我是否必须为较小的背景制作两张不同的图片才能适合所有 iPhone？

-西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T05:03:59.050

背景图片应该在主视图上，并且要插入较小的图片，请使用子视图。如果您愿意，您还可以弹出一个子视图或为其设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:29:25.203

我认为一般来说最好的方法是创建两个具有相同内容但大小不同的图像。您应该为 iPhone 4 及以下机型创建一张 320X480 的图像，为 iPhone 4S 及以上机型的视网膜显示屏创建一张 640X960 的图像。格式为：

图像名称.png (320X480)

ImageName@x2.png (640X960)

当您在代码中引用图像时，您应该使用 ImageName.png 作为源图像，设备将自动决定是使用常规图像还是视网膜显示图像。

在您的背景中使用相同的内容将是非常用户友好的（至少可以说），无论是 iPhone 4 及以下或更高版本。

附带说明：如果您使用的是 Cocos2d，高清图像格式将更改为 ImageName-hd.png

# javascript - AIR Embeded SWF 说它是一个函数

> ID：12983245
> 
> 赞同：0
> 
> 时间：2012-10-19T22:21:27.973
> 
> 标签：javascript, apache-flex, air, externalinterface

我正在开发一个 AIR HTML 应用程序，该应用程序需要在本地主机上显示来自媒体服务器的实时流。我的同事为我创建了一个 Flash 应用程序，它连接到流并显示视频，并使用[ExternalInterface.addCallback](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e92.html)来公开播放器的控件（即开始、停止等）。但是，一旦我将它嵌入到 AIR HTML 应用程序中

```
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"
WIDTH="320" HEIGHT="240" id="player" ALIGN="">
    <PARAM NAME="movie" VALUE="../swf/player.swf">
    <PARAM NAME="quality" VALUE=high>
    <EMBED src="../swf/player.swf" quality=high WIDTH="320" HEIGHT="240"
        NAME="player" ALIGN="" TYPE="application/x-shockwave-flash"
        PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer">
    </EMBED>
</OBJECT> 
```

AIR 中的 JavaScript 控制台告诉我 document['player'] 是函数，但没有定义 document['player'].startStream()（他使用 ExternalInterface 公开的函数之一）。

它在其自己的 HTML 文件中工作正常，但在 AIR 应用程序中出现故障。有任何想法吗？

# sql - 解析/处理 XML 并插入 SQL 表

> ID：12983250
> 
> 赞同：0
> 
> 时间：2012-10-19T22:22:20.293
> 
> 标签：sql, xml, sql-server-2005, xquery

跟进：[这种 XML 格式是否正确？](https://stackoverflow.com/questions/12979693/is-this-xml-format-correct)

我有一些工作的 SQL 代码循环通过 QABLOCKs 并打印它们（在生产中 PRINTs 将更改为 INSERTs）。

```
-- XML instance
DECLARE    @x1 XML
SELECT @x1 = 
'
<tests>
    <test id="1">
        <qablock number="1">
            <question>What is 1 + 1?</question>
            <explanation>It"s 2.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="1" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="0" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
        <qablock number="2">
            <question>What is 2 + 2?</question>
            <explanation>It"s 4.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="0" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="1" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
    </test>
</tests>
'

DECLARE 
    @cnt INT, 
    @totCnt INT,
    @child XML

-- counter variables
SELECT 
    @cnt = 1,
    @totCnt = @x1.value('count(/tests/test/qablock)','INT')

-- loop
WHILE @cnt <= @totCnt BEGIN
    SELECT
        1 AS tests_id, --this is hard-coded
        @cnt AS qablock_number, 
        @x1.value('(/tests/test/qablock[position()=sql:variable("@cnt")]/question/text())[1]','varchar(500)') AS question, 
        @x1.value('(/tests/test/qablock[position()=sql:variable("@cnt")]/explanation/text())[1]','varchar(1000)') AS explanation

    PRINT 'Processing Child Element: ' + CAST(@cnt AS VARCHAR)
    PRINT 'Child element:  ' + CAST(@child AS VARCHAR(max))
    PRINT ''

    -- increment the counter variable
    SELECT @cnt = @cnt + 1
END 
```

我不知道这是否是正确的程序，但至少它似乎有效。我接下来想做的是运行另一个类似的脚本，该脚本循环遍历所有选项并打印它们。对于每个 OPTION，我需要打印：QABLOCK 编号、OPTION 编号、OPTION 值和 OPTION is_correct。我什至无法靠近。:(这是我到目前为止所得到的：

```
-- XML instance
DECLARE    @x1 XML
SELECT @x1 = 
'
<tests>
    <test id="1">
        <qablock number="1">
            <question>What is 1 + 1?</question>
            <explanation>It"s 2.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="1" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="0" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
        <qablock number="2">
            <question>What is 2 + 2?</question>
            <explanation>It"s 4.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="0" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="1" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
    </test>
</tests>
'

DECLARE 
    @cnt INT, 
    @totCnt INT,
    @child XML

-- counter variables
SELECT 
    @cnt = 1,
    @totCnt = @x1.value('count(/tests/test/qablock/options/option)','INT')

-- loop
WHILE @cnt <= @totCnt BEGIN
    SELECT
        1 AS tests_id, --hard-coded value
        @x1.value('(/tests/test/qablock/@number)[1]','varchar(500)') AS qablock_number, 
        @x1.value('(/tests/test/qablock/options/option[position()=sql:variable("@cnt")]/@number)[1]','varchar(500)') AS option_number

    PRINT 'Processing Child Element: ' + CAST(@cnt AS VARCHAR)
    PRINT 'Child element:  ' + CAST(@child AS VARCHAR(max))
    PRINT ''

    -- increment the counter variable
    SELECT @cnt = @cnt + 1
END 
```

所以，显然它搞砸了，但我似乎无法弄清楚要改变什么。

首先，我不知道如何获取当前OPTION的父QABLOCK编号。

Second, only my first 5 option_number's are displaying their numbers properly, the second 5 are showing NULL.

P.S. Some of this code was from: [http://beyondrelational.com/modules/2/blogs/28/posts/10316/xquery-lab-35-how-to-write-a-loop-to-process-all-the-child-elements-of-an-xml-value.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10316/xquery-lab-35-how-to-write-a-loop-to-process-all-the-child-elements-of-an-xml-value.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:17:50.293

This should do the trick:

```
-- XML instance
DECLARE    @x1 XML
SELECT @x1 = 
'
<tests>
    <test id="1">
        <qablock number="1">
            <question>What is 1 + 1?</question>
            <explanation>It"s 2.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="1" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="0" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
        <qablock number="2">
            <question>What is 2 + 2?</question>
            <explanation>It"s 4.</explanation>
            <options>
                <option number="1" value="1" correct="0" />
                <option number="2" value="2" correct="0" />
                <option number="3" value="3" correct="0" />
                <option number="4" value="4" correct="1" />
                <option number="5" value="5" correct="0" />
            </options>
        </qablock>
    </test>
</tests>
'

declare @testCount int
, @testIndex int 
, @qaCount int
, @qaIndex int 
, @optCount int
, @optIndex int 

, @testId int
, @qaNo int
, @question nvarchar(500)
, @explanation nvarchar(500)
, @optNo int
, @optVal int
, @optCorrect bit

--for each test
set @testCount = @x1.value('count(/tests/test)','int')
set @testIndex = 1 
while @testIndex <= @testCount
begin

    --insert a record for this test
    set @testId = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/@id)[1]','int')
    print 'insert into tests (id, ...) values (' + + cast(@testId as nvarchar(9)) + ')'
    print 'set @testIdDB = scope_identity()' --if we're using db generated ids rather than relying on the ids in the imported xml

    --for each qablock
    set @qaCount = @x1.value('count(/tests/test[sql:variable(''@testIndex'')]/qablock)','int')
    set @qaIndex = 1    
    while @qaIndex <= @qaCount
    begin   
        --insert a qa record
        select @qaNo = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/@number)[1]','int')
        , @question = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/question/text())[1]','nvarchar(500)')
        , @explanation = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/explanation/text())[1]','nvarchar(500)')
        print 'insert into qa (testId, qaNo, Question, Explanation) values (@testIdDB, ' + cast(@qaNo as nvarchar(9)) + ', ' + quotename(@question,'''') + ', ' + quotename(@explanation,'''') + ')'
        print 'set @qaIdDB = scope_identity()' 

        --for each option
        set @optCount = @x1.value('count(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/options/option)','int')
        set @optIndex = 1   
        while @optIndex <= @optCount
        begin   
            --insert an option record
            select @optNo = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/options/option[sql:variable(''@optIndex'')]/@number)[1]','int') 
            , @optVal  = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/options/option[sql:variable(''@optIndex'')]/@value)[1]','int')
            , @optCorrect  = @x1.value('(/tests/test[sql:variable(''@testIndex'')]/qablock[sql:variable(''@qaIndex'')]/options/option[sql:variable(''@optIndex'')]/@correct)[1]','bit')
            print 'insert into tests (qaId, number, value, isCorrect) values (@qaIdDB, ' + cast(@optNo as nvarchar(9)) + ', ' + cast(@optVal as nvarchar(9)) + ', ' + cast(@optCorrect as nchar(1)) +  ')'

            set @optIndex = @optIndex + 1
        end
        set @qaIndex = @qaIndex + 1
    end
    set @testIndex = @testIndex + 1
end 
```

Or better still (thanks to the link you provided for prompting me):

```
select x.value('@id','int') testId
FROM @x1.nodes('/tests/test') d(x)

select x.value('../@id','int') parentTestId
, x.value('@number','int') qaNumber
,  x.value('(question/text())[1]','nvarchar(500)') question
,  x.value('(explanation/text())[1]','nvarchar(500)') explanation
FROM @x1.nodes('/tests/test/qablock') d(x)

select x.value('../../@number','int') parentQaNumber
, x.value('@number','int') number
, x.value('@value','int') value
, x.value('@correct','bit') correct
FROM @x1.nodes('/tests/test/qablock/options/option') d(x) 
```

# python - SQLAlchemy（无 ORM）：更新语句未提交

> ID：12983251
> 
> 赞同：1
> 
> 时间：2012-10-19T22:22:25.380
> 
> 标签：python, sql, sqlalchemy

我的数据库模块中有这个（匿名）函数：

```
def fix_publishing_dates(row_id, last_time=None, next_time=None,
    next_index=1, user="python_script"):
  sql = """
  UPDATE
    schema.table
  SET
    last_time = :last_time
  , next_time = :next_time
  , next_index = :next_index
  , col4 = SYSDATE
  , col5 = :user_id
  , is_active = 1
  WHERE
    id = :row_id
  """
  with closing(Session()) as s:
    with s.begin_nested():
      user_id = get_userid_by_name(user)
      args = dict(
          last_time=last_time,
          next_time=next_time,
          next_index=next_index,
          row_id=row_id,
          user_id=user_id,
          )
      s.execute(sql, args)
      s.flush()
    s.commit() 
```

由于某种原因，这不起作用。我在上表中查询 is_active=1，得到零行。我在这里做明显错误的事情吗？

### 笔记

我不想使用 SQLAlchemy ORM 并为此添加大量样板表类*；我只是喜欢使用带有文本查询的 Session() 来支持事务。

*：也不会因为内省而减慢我的启动时间；到这个数据库的网络管道很慢。

### 编辑 1

*   我正在通过 cx_oracle 使用 Oracle 11 数据库。
*   万一这很重要，绑定值之一有时是 None/
*   此代码（以不同方式匿名）也不起作用：

    ```
    def fix_publishing_dates(**kwargs):
      sql = insert_query_here
      user_id = get_userid_by_name(user)
      args = dict(kwargs)
      print "*" * 50
      print "* About to update database with values: {}".format(args)
      print "*" * 50
      result = engine.execute(sql, args)
      print "Row count is:", result.rowcount
      #import ipdb;ipdb.set_trace()
      #s.commit() 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:42:46.467

我认为 Sessions 不会在不使用 ORM 对象的情况下管理事务。但是您可以直接使用引擎上的事务：

```
with engine.begin() as conn:
    conn.execute(...) 
```

# sql - 在填写值时合并两个版本跟踪表

> ID：12983252
> 
> 赞同：8
> 
> 时间：2012-10-19T22:22:41.890
> 
> 标签：sql, postgresql

我有两个跟踪数据库值更改的历史表，使用修订 ID 来跟踪各个更改。例如

表格1：

```
 rev |  A   |  B 
=================
 1   |  100 | 'A'
 4   |  150 | 'A'
 7   |  100 | 'Z' 
```

表 2：

```
 rev |  C   |  D 
==================
 1   |  200 | True
 5   |    0 | True
 8   |    0 | False 
```

目标是将这两个表合并为：

```
 rev |  A   |  B  |  C  |  D 
===============================
 1   |  100 | 'A' | 200 | True
 4   |  150 | 'A' | 200 | True
 5   |  150 | 'A' |   0 | True
 7   |  100 | 'Z' |   0 | True
 8   |  100 | 'Z' |   0 | False 
```

这个想法是，对于给定的修订，我会采用与该修订相对应的值或低于它的最高修订。

想到的 SQL 查询类似于使用约束*rev1 < rev2*交叉连接两个表，然后使用子查询选择行，其中*rev1 = max(rev1)*对于每个给定的*rev2*；将此查询与其对应的交换*rev2*和*rev1*联合；最后从*rev1 = rev2*中过滤掉重复项。

问题是：

*   这种类型的连接有名称吗？
*   是否有在 SQL 中执行这种类型的连接的习惯用法，或者以编程方式执行它会更好（这肯定会更简单并且可能更有效）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:26:11.300

[SQL小提琴](http://sqlfiddle.com/#!12/7389f/1)

```
select
    coalesce(t1.rev, t2.rev) rev,
    coalesce(a, lag(a, 1) over(order by coalesce(t2.rev, t1.rev))) a,
    coalesce(b, lag(b, 1) over(order by coalesce(t2.rev, t1.rev))) b,
    coalesce(c, lag(c, 1) over(order by coalesce(t1.rev, t2.rev))) c,
    coalesce(d, lag(d, 1) over(order by coalesce(t1.rev, t2.rev))) d
from
    t1
    full join
    t2 on t1.rev = t2.rev
order by rev 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:54:04.197

这可以通过子查询来实现

```
SELECT ISNULL(Table1.rev,Table2.rev) AS rev
,ISNULL(A,(SELECT TOP 1 A FROM Table1 AS T1 WHERE ISNULL(Table1.rev,Table2.rev) > T1.rev AND A IS NOT NULL ORDER BY rev DESC)) AS A
,ISNULL(B,(SELECT TOP 1 B FROM Table1 AS T1 WHERE ISNULL(Table1.rev,Table2.rev) > T1.rev AND B IS NOT NULL ORDER BY rev DESC)) AS B
,ISNULL(C,(SELECT TOP 1 C FROM Table2 AS T2 WHERE ISNULL(Table1.rev,Table2.rev) > T2.rev AND C IS NOT NULL ORDER BY rev DESC)) AS C
,ISNULL(D,(SELECT TOP 1 D FROM Table2 AS T2 WHERE ISNULL(Table1.rev,Table2.rev) > T2.rev AND D IS NOT NULL ORDER BY rev DESC)) AS D
FROM Table1
FULL OUTER JOIN Table2
ON Table1.rev = Table2.rev 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:52:46.380

没有特定的连接类型来处理这种查询。您必须将其作为复杂查询或以编程方式进行。下面是这个问题的 PL/PGSQL 代码示例，使用您的示例数据。

```
CREATE OR REPLACE FUNCTION getRev(OUT rev INT, OUT A INT, OUT B CHAR, OUT C INT, OUT D BOOL) RETURNS SETOF record STABLE AS
$BODY$
DECLARE
    c1 SCROLL CURSOR FOR SELECT * FROM Table1 ORDER BY rev;
    c2 SCROLL CURSOR FOR SELECT * FROM Table2 ORDER BY rev;
    r1    Table1%ROWTYPE;
    r1c   Table1%ROWTYPE;
    r2    Table2%ROWTYPE;
    r2c   Table2%ROWTYPE;
BEGIN
  OPEN c1;
  OPEN c2;
  FETCH c1 INTO r1;
  FETCH c2 INTO r2;
  r1c := r1;
  r2c := r2;
  WHILE r1 IS NOT NULL AND r2 IS NOT NULL
  LOOP
    CASE 
    WHEN r1.rev = r2.rev THEN 
      rev := r1.rev;
      A := r1.a;
      B := r1.b;
      C := r2.c;
      D := r2.d;
      FETCH c1 INTO r1c;
      FETCH c2 INTO r2c;
      CASE 
        WHEN r1c.rev = r2c.rev THEN
      r1 := r1c;
      r2 := r2c;
        WHEN r1c.rev < r2c.rev THEN
          r1 := r1c;
      FETCH PRIOR FROM c2 INTO r2c;
    ELSE
          r2 := r2c;
      FETCH PRIOR FROM c1 INTO r1c;
      END CASE;
    WHEN r1.rev < r2.rev THEN
      WHILE r1c IS NOT NULL AND r1c.rev < r2.rev LOOP
         r1 := r1c;
         FETCH c1 INTO r1c;
      END LOOP;
      rev := r2.rev;
      A := r1.a;
      B := r1.b;
      C := r2.c;
      D := r2.d;
      r1 := r1c;
    ELSE 
      WHILE r2c IS NOT NULL AND r2c.rev < r1.rev LOOP
         r2 := r2c;
         FETCH c2 INTO r2c;
      END LOOP;
      rev := r1.rev;
      A := r1.a;
      B := r1.b;
      C := r2.c;
      D := r2.d;
      r2 := r2c;
    END CASE;
    RETURN NEXT;
  END LOOP;
  CLOSE c1;
  CLOSE c2;
  RETURN;
END
$BODY$
LANGUAGE 'plpgsql'; 
```

这应该在 O(length(Table1) + length(Table2)) 中运行。

请注意“CASE WHEN r1.rev = r2.rev”中的棘手部分：我们必须选择在哪个表上继续扫描以进行下一次迭代。正确的一个是光标后转速值最小的那个，以获取两个表中可用的所有转速。您当然可以通过用 C 或 C++ 对其进行编码来获得更好的性能。

# jquery - 当行太大时，JQuery Datatable 不显示

> ID：12983253
> 
> 赞同：0
> 
> 时间：2012-10-19T22:23:07.657
> 
> 标签：jquery, datatable

我在使用 JQuery 数据表时遇到了一个奇怪的问题；我在我的网站上的许多页面上都有这些，并且它们运行良好，除非数据超过了一些看似任意的大小。在一种情况下，这正好是 798 行（有两列），另一种有 9 列，不会显示超过 500 行的任何内容。我认为这与数据的整体大小有关。在 Google 上查找此内容时，人们会说非常大的数据集可能存在问题，但这些似乎总是指数百万行；我最多只有16000多。当然这不应该引起问题吗？

基本上，如果我尝试返回比它喜欢的更多的行，它什么也不做；没有错误，只是不显示任何数据并锁定 IE。是否有我错过的某个设置导致了这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:17:52.970

我最终使用服务器端处理来处理数据加载：

```
<script type="text/javascript">
$(document).ready(function() {
    //http://www.datatables.net
    $('#userTable').dataTable({
        "sPaginationType": "full_numbers",
        "bJQueryUI": false,
        "bAutoWidth": false,
        "bLengthChange": false,
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "/Project/GetDataTables2",
        "fnServerData": function(url, data, callback) {
            $.ajax({
                "url": url,
                "data": data,
                "success": callback,
                "contentType": "application/x-www-form-urlencoded; charset=utf-8",
                "dataType": "json",
                "type": "POST",
                "cache": false,
                "error": function() {
                    alert("DataTables warning: JSON data from server failed to load or be parsed. " +
                    "This is most likely to be caused by a JSON formatting error.");
                }
            });
        },
        "aoColumns": [
            { "bSortable": true },
            { "bSortable": true }
        ]
    });
});                    
</script> 
```

由于我一次只加载 10 个左右，因此效果很好并且加载速度很快。

# jvm - OSB sbconfig.jar 问题 - JVM 字符长度问题

> ID：12983255
> 
> 赞同：0
> 
> 时间：2012-10-19T22:23:23.243
> 
> 标签：jvm, char, osb

我正在使用 Jenkins 进行 Oracle OSB 构建工作。

```
The issue I am facing is: In the sbconfig.jar that's gets crated is not having the full service name.
 Ex. If my OSB service name is EmployeeRecordDetailReturnsStorageBOService but in the sbconfig.jar its getting created as EmployeeRecordDetailReturnsStorageBOSer only.

      I need the full service name in the sbconfig.jar for my further processing of this jar.
 I am using the eclipse based jar <java dir="${eclipse.home}" jar="${eclipse.home}/plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar" ...> in my ant build file.

 But what I have observed is the java command that we are using has a folder length limit. It could not created the full service name in the sbconfig.jar because the ant build file is in a deep location under the folders like abcd/efgh/ijkl/mnop/qrst/xyz/build.xml so thats why its not able to create the full service name in the sbconfig.jar file. Its seems to be an character length issue in java/JVM.

Can anybody pls let me know how to to over some this problem. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:35:14.513

当您将 sbconfig.jar 导入回 sbconsole 时，它​​不会导致任何问题。因此，不必担心 sbconfig.jar 中的名称会缩短。

如果您在导入时遇到任何问题，请告诉我们。

# ios - 您自己的 Xcode 中的 MapBox iOS SDK

> ID：12983260
> 
> 赞同：0
> 
> 时间：2012-10-19T22:24:03.260
> 
> 标签：ios, xcode, mapbox

我使用以下 git clone --recursive [https://github.com/mapbox/mapbox-ios-example.git从 github 下载了 MapBox 示例](https://github.com/mapbox/mapbox-ios-example.git)

哪个下载了它，包括所有依赖项。现在我正在尝试创建一个单独的项目并包含该示例中的 MapBox DSK。`MapBox.h`我尝试创建工作区，然后创建单个视图项目，然后添加新文件并为 MapBox DSK 选择 .xcodepro，但是当我尝试导入文件时没有工作。我之前从未尝试过导入 3rd 方 API，并且有点不确定如何正确地做到这一点。任何想法我怎么能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-21T09:03:59.233

试试看嘛：

```
 #import <Mapbox/Mapbox.h> 
```

而不是像这里建议的那样只导入 Mapbox.h： [https ://www.mapbox.com/blog/ios-sdk-framework](https://www.mapbox.com/blog/ios-sdk-framework)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T06:12:53.727

您只需将 Mapbox-ios-sdk 项目文件从 Finder 拖到 Xcode 的文件窗格中。

然后单击 Xcode 文件窗格中的项目，Target-->Build Settings。搜索“用户标题搜索路径”。指定 MapBox sdk 的位置。

我所做的是将 MapBox-iOS-sdk 放在我的项目目录中。我将路径设置为`$(SRCROOT)`并确保将其设置为递归。

当您使用它时，还要确保在其他链接器标志中设置了 -ObjC 和 -all_load。

这只能帮助您引用 .h 文件进行链接，也在 Build Setting 下，Link Binary with Libraries 您需要 libMapBox.a。

如果在组和文件窗格中有一个 MapBox.bundle（如在最新的开发分支中），您也希望将其拖到 Target->Build Phases->Copy bundle resources 中。（添加按钮对我不起作用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:50:02.677

我认为最好的方法是查看MapBox 提供的[mapbox-ios-example](https://github.com/mapbox/mapbox-ios-example)并尝试将所有依赖项复制到您自己的项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:21:17.457

有点晚了，但我这样做了，就像这里解释的那样：http: [//mapbox.com/mapbox-ios-sdk/#binary](http://mapbox.com/mapbox-ios-sdk/#binary)。

不要乱用 git，只是把东西拖到你的项目中，很简单！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T16:20:10.623

我认为这里的问题是他在从 Map Box 下载的资源文件夹中找不到标题为“MapBox.Framework”的特定“文件”，但是您实际需要做的是复制整个文件夹，标题为“ MapBox.Framework”进入框架部分。我认为令人困惑的是，在您将该文件夹复制到 Xcode 的框架部分之前，需要复制的主文件夹看起来不像黄色框架图标。

# c# - 缓存通知配置在 Windows Azure 缓存预览中不起作用

> ID：12983264
> 
> 赞同：0
> 
> 时间：2012-10-19T22:24:59.973
> 
> 标签：c#, azure, azure-caching

我正在尝试设置 Windows Azure Cache Preview 实现，但在使本地缓存配置正常工作时遇到了问题。这是我当前的配置：

```
<dataCacheClients>
  <tracing sinkType="DiagnosticSink" traceLevel="Error" />
  <dataCacheClient name="default" requestTimeout="30000" 
                   maxConnectionsToServer="5" isCompressionEnabled="true">
    <autoDiscover isEnabled="true" identifier="{My Role Name}" />
        <localCache isEnabled="true" sync="NotificationBased" 
                    objectCount="100000" ttlValue="300" />
        <clientNotification pollInterval="60" />
  </dataCacheClient>
</dataCacheClients> 
```

我使用 Ninject 创建默认缓存对象，如下所示：

```
Bind<DataCache>().ToMethod((context) => new DataCacheFactory().GetDefaultCache()); 
```

当我没有对本地缓存做任何事情时，这种注入工作得很好，但是我遇到了将大型数据集放入缓存的问题（超时），所以我想我会看到使用本地缓存会产生什么行为。

由于我更改了配置（基于 MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh916611.aspx#section_3)，请参阅该部分中的“角色缓存（预览）”），我收到以下错误：

> 错误代码 ERRCA0015：SubStatus ES0001：不支持基于通知的失效，因为缓存未配置为支持通知。

这有点令人困惑，因为我认为那是 dataCacheClients 配置部分应该做的事情。我是否需要以编程方式在 DataCache 对象本身上设置某些内容，或者我是否在 Web 配置中遗漏了某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:17:07.043

您需要确保服务器端的命名缓存启用了通知。这可以在 Visual Studio 中“缓存”选项卡下的 Azure 角色的“缓存”选项卡中查看，该角色具有缓存服务器端。

# function - 需要有关 SSRS SPLIT 功能的帮助

> ID：12983265
> 
> 赞同：1
> 
> 时间：2012-10-19T22:25:06.523
> 
> 标签：function, reporting-services, split

嗨，我需要你的建议，

1）我有一个动态字符串，每次都会改变。

例如，今天字符串将是`"ItemA,ItemB,ItemC"`，明天它将是`"itemA,ItemB"`唯一的。

2) 我有一个 SSRS 报告，它有 3 列

3）我想拆分这个字符串`"ItemA,ItemB,ItemC"`，并希望在 ssrs 表的这 3 列中显示拆分子字符串。分隔符是`","`（逗号）

4）我用过

```
=Split("ItemA,ItemB,ItemC",",").GetValue(0) in the first column of the report 

=Split("ItemA,ItemB,ItemC",",").GetValue(1) in the second column of the report

=Split("ItemA,ItemB,ItemC",",").GetValue(2) in the third column of the report 
```

5）一切正常，直到我的字符串是`"ItemA,ItemB,ItemC"`，

但是当我在第三列中`"ItemA,ItemB"`看到我的字符串更改时。`"#Error"`

我理解了这个错误，因为

`=Split("ItemA,ItemB,ItemC",",").GetValue(2)`我们没有任何值，因为在应用 split 函数后字符串现在只有 2 个值。

有什么办法可以避免`#Error`在第三列中。

注意：我必须在 ssrs 报告中强制使用 3 列。

我曾尝试`=Replace(Split("ItemA,ItemB",",").GetValue(2),"#Error","NULL")` 在第三列中使用，但这也行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:17:50.997

这类似于使用 IIF 语句中的[除零问题](https://stackoverflow.com/questions/10322773/divide-by-zero-error-in-ssrs-report)。问题是 IIF 不是表达式，它是一个具有三个参数的函数：

```
IIF(Condition, ValueIfTrue, ValueIfFalse) 
```

因此，所有参数在传递给函数之前都会被评估，这会导致错误，因为即使条件应该意味着它不是，仍然会评估错误的表达式。

我看不到使用通常的解决方法来解决除以零情况下的问题的方法。我们需要的是一种没有这个问题的真正的语言。幸运的是，这可以通过自定义代码的形式获得。

请执行下列操作：

*   右键单击没有报表对象的报表表面区域
*   选择报告属性
*   单击代码选项卡
*   插入以下代码：

    ```
    Public Function ExtractCode(Combined As String, Position As Integer) As String
        if (Split(Combined, ",").Length >= Position) Then
            Return Split(Combined, ",").GetValue(Position-1)
        Else
            Return ""
        End If
    End Function 
    ```

*   单击确定并返回报告

*   右键单击要在其中使用表达式的单元格，然后单击表达式
*   插入以下表达式：

    ```
    =Code.ExtractCode(Fields!Combo.Value, 3) 
    ```

值 3 是您要从 Combo 字段中提取的“列”，因此要获取第二个“列”，您将使用 2。如果该位置没有列，则返回一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T19:52:56.110

如果名称返回错误，您可以将第三列的可见性更改为隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T10:58:28.850

您可以附加一个虚拟元素，然后拆分：

```
yourText = "ItemA,ItemB"

item0 = Split(yourText & ",", ",").GetValue(0)
item1 = Split(yourText & ",", ",").GetValue(1)
item2 = Split(yourText & ",", ",").GetValue(2)

item0 = ItemA
item1 = ItemB
item2 = 
```

# java - Java 线程停止工作并且没有抛出异常或 Throwable

> ID：12983271
> 
> 赞同：2
> 
> 时间：2012-10-19T22:25:48.630
> 
> 标签：java, multithreading

我通常用大约 4 个线程运行我的程序，并且在程序运行后 1 小时到 10 小时之间的任何地方，一些线程只是停止并且什么也不做，我的程序围绕 Exception 和 Throwable 块，我也有一个线程的 uncaughtException 并且什么都没有被添加到我的日志文件中关于任何错误。如何找到导致线程停止的原因？

编辑

这是我的代码的基本结构

下面是设置 uncaughtException 块的代码

```
 newThread.setName("Thread" + totalNumberOfThreads);
                newThread.setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler()
                {
                    @Override
                    public void uncaughtException(Thread t, Throwable e)
                    {
                        Main.logger.info("ERROR! An exception occurred in " + t.getName() + ". Cause: " + e.getMessage());
                    }
                });
                newThread.start(); 
```

这是线程的基本结构

```
@Override
public void run()
{               
  while (true)
  {
    try
    {               
      //a long section of code
    }
    catch (Exception e)
    {
      e.printStackTrace();
      Main.logger.info(threadName + ": " + e);
    }
    catch (Throwable t)
    {
      Main.logger.info(threadName + ": " + "Throwable: " + t);
    }
    finally
    {      
      //some code to close connections.. ect..
    }
  } // end while
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:35:14.520

> 如何找到导致线程停止的原因？

你知道线程已经停止的事实吗？如前所述，它们可能会被阻止。您可以使用[`jstack`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html)它们来查看它们是否处于活动状态，或者更仔细地检查在启用远程调试的情况下启动程序，并在您觉得它们已停止时附加调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:30:00.237

您可以尝试在调试器中运行程序，这可以让您检查线程的状态。

您还可以使用Java中的内置`Ctrl-Break`或机制 - 请参阅[故障排除挂起或循环进程](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/hangloop.html)，这将导致 HotSpot VM 打印线程转储，包括线程状态。`Ctrl-\`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T22:35:28.597

问题只是尖叫**[死锁](http://en.wikipedia.org/wiki/Deadlock)**- 它显示了一个人的所有经典症状。

死锁是指线程 A 等待线程 B 完成并释放一些资源（锁），而线程 B 等待线程 A 完成并释放一些资源。
[有关死锁的更多信息可以在 java 教程中找到](http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)

这导致两个线程都停止执行并且什么都不等待。

在某些情况下，查找程序是否确实存在死锁可能非常棘手，即使在使用旨在检测死锁的程序时，使用该程序也可以暂时“解决问题”。有关更多详细信息，请参阅[Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)。

有时（尽管并非总是如此）检测死锁的最佳方法是查看程序的抽象，并尝试检查线程之间的所有依赖项 - 并查看可能发生依赖项冲突的位置。

PS 另一个常见的同步问题是[数据竞赛](http://en.wikipedia.org/wiki/Race_condition#Computing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:59:14.577

首先，我会研究 ExecutorService 并将您的代码分解为 Callable。这将允许您在具有返回值或让异常发生的能力的线程中运行它。然后，如果出现问题，您可以重新启动它。

每当代码捕获 Exception 和/或 Throwable 时，就会产生很大的代码异味。应抛出已检查异常之外的任何异常。如果你使用上面提到的可调用模式，你可以检查你得到了什么，记录它，然后重新启动（如果需要）。

# powershell - 从 CMD 调用 powershell.exe 并退出代码 boolean

> ID：12983273
> 
> 赞同：3
> 
> 时间：2012-10-19T22:26:05.240
> 
> 标签：powershell, cmd

我想从 cmd.exe 运行 PowerShell 命令（不是脚本）并正确管理退出代码：

```
powershell.exe [bool]((get-service wsearch).status -eq 'Running') 
```

但我想将布尔状态作为错误级别返回。

我想`%errorlevel%`在运行后回显并使用它来确定服务状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:04:26.690

只需使用 PowerShell`exit`命令将结果作为参数提供。例如：

```
C:\>powershell -command "exit [int]$true;"

C:\>echo %errorlevel%
1

C:\>powershell -command "exit [int]$false;"

C:\>echo %errorlevel%
0 
```

或者对于您的情况：

```
powershell.exe -command "exit [int]((get-service wsearch).status -eq 'Running')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:58:21.827

您也可以使用此变体：

```
CMD I> Set cmd=powershell -c "((gsv wsearch -ea 0).status -eq 'Running')"
CMD I> %cmd% |>nul find "True" && echo RUNNING||echo NOT RUNNING
RUNNING

CMD I> Set cmd=powershell -c "((gsv youka -ea 0).status -eq 'Running')"
CMD I> %cmd% |>nul find "True" && echo RUNNING||echo NOT RUNNING
NOT RUNNING 
```

# javascript - 将多维 JSON 数组转换为 JS 变量

> ID：12983274
> 
> 赞同：1
> 
> 时间：2012-10-19T22:26:06.520
> 
> 标签：javascript, jquery, json, multidimensional-array

假设您有以下 JSON：

```
{"zero":{"0":"foo","1":"foo2"},"one":"fooa","two":"foob"} 
```

将其转换为的最有效方法是什么：

```
 var zero = ['foo','foo2'];
 var one = 'fooa';
 var two = 'foob'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:31:19.587

[JSON](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse) .解析：

```
var json = '{"zero":{"0":"foo","1":"foo2"},"one":"fooa","two":"foob"}';
var pJson = JSON.parse(json);
var zero = [ pJson.zero[0], pJson.zero[1] ];
var one = pJson.one;
var two = pJson.two; 
```

# php - 来自 2 个没有数据库的搜索引擎的分页

> ID：12983276
> 
> 赞同：1
> 
> 时间：2012-10-19T22:26:13.073
> 
> 标签：php

我同时抓取 2 个搜索引擎（谷歌学者和天秤座）来获取他们的数据我正在使用 dom 树解析来获取他们的数据并在结果页面中显示结果。但我很困惑如何从两个搜索引擎进行分页。对于第一页，很简单：

```
$keystring = isset($_POST['keywords']) ? $_POST['keywords'] : '';
$changeLibra    = str_replace(" ", "%20", $keystring);
$changeGscholar = str_replace(" ", "+"  , $keystring);

$urlLibra   = "http://libra.msra.cn/Search?query=$changeLibra&s=0";
$urlGscholar   = "http://scholar.google.com/scholar?q=$changeGscholar&hl=en&btnG=Search&as_sdt=1%2C5&as_sdtp=on";
//function to get their data using dom tree
getDataLibra($urlLibra);  
getDataGScholar($urlGscholar); 
```

下一页可以声明：

```
$urlGscholar2 = http://scholar.google.com/scholar?start=20&q=$changeGscholar&hl=id&as_sdt=0 // page 2
$urlGscholar3 = http://scholar.google.com/scholar?start=30&q=$changeGscholar&hl=id&as_sdt=0 // page 3 
```

等等..和

```
$urlLibra2 = http://libra.msra.cn/Search?query=$changeLibra&s=0&start=11&end=20 // page 2
$urlLibra3 = http://libra.msra.cn/Search?query=$changeLibra&s=0&start=21&end=30 // page 3 
```

知道如何进行分页吗？谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:43:44.223

如果您的数据是数组格式，您可以阅读此[Zend Pagination with array](https://stackoverflow.com/questions/1663820/zend-pagination-with-array)

这是最简单的方法，但您需要使用 Zend Framework 库或至少一些模块。

# git - 我是不是因为错误地使用 git rebase 而破坏了我的工作？

> ID：12983282
> 
> 赞同：27
> 
> 时间：2012-10-19T22:26:47.117
> 
> 标签：git, version-control, rebase, git-rebase

我执行了以下行：

```
git rebase -i dev --onto master 
```

我认为这会切断我的开发分支并将其粘贴到我的主分支之上。而 -i 会让我折叠变更集。

但是当它调出编辑器时，我没有看到任何变更集。我所看到的只是“noop”。所以我只是退出了它。然后我查看我的 git 历史记录，我所有的更改都消失了。我的开发分支与我的主人在同一个地方！

有人可以帮我恢复吗？谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-19T22:33:07.563

Git 让你很难丢掉工作。

跑：

```
git reflog 
```

比寻找变基之前的提交

然后检查一下

```
git checkout <sha> 
```

环顾四周，是不是你要恢复的版本？

如果是这样，请在此处创建一个分支

```
git checkout -b mybranch 
```

# environment-variables - process.start 从变量位置 %temp%

> ID：12983283
> 
> 赞同：1
> 
> 时间：2012-10-19T22:26:49.700
> 
> 标签：environment-variables, process.start, temp

我有程序将文件解压缩到 %temp%\myfolder\

我需要从该位置运行一个文件。我已经尝试过 shell 和 process.start 但最终我正在寻找：

```
Process.start("%temp%\myfolder\start.cmd") 
```

我还在 getenvironmentvariable 上查看了 msdn，但没有任何效果。:(

**更新：简而言之，这就是我所拥有的**

```
Imports system.diagnostics
Imports system.IO

System.Environment.GetEnvironmentVariable("TEMP")
Dim temp As String = System.IO.Path.GetTempPath

Things I have tried
process.start("%temp%\myfolder\start.cmd")
process.start("temp" & "myfolder\start.cmd") 
```

我收到一个错误代码，说“找不到文件”。但是，如果我将 %temp%\myfolder\start.cmd 复制到 run 或 cmd.exe 中，程序就会运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:10:05.543

首先设置

```
Environment.CurrentDirectory = Environment.GetEnvironmentVariable("temp")
' Possible variables include temp, tmp, and windir for examples. 
```

此命令会将当前目录放置为 C:\Users\ (currentuser)\appdata\local\temp 或为变量设置的任何位置。然后运行进程启动。它应该如下所示：

```
Environment.CurrentDirectory = Environment.GetEnvironmentVariable("temp")
Process.start("myfolder\start.cmd") 
```

# jquery - .ajax 报告成功但数据库插入失败

> ID：12983285
> 
> 赞同：1
> 
> 时间：2012-10-19T22:26:51.837
> 
> 标签：jquery

我对 jquery/ajax 很陌生，在搜索了两天后，我终于寻求帮助。显然有一些我不理解的基本内容。

这是 .ajax 代码：

```
 $.ajax({
    url: "../ajax/create_employee.php",
    type: 'json',
async: false,
    data: $serialFormData,
    // callback handler that will be called on success
    success: function(response, textStatus, jqXHR){ 
```

这是调用的 php 文件 (create_employee.php)：

```
 <?php
    require ("../models/m_employee.php");
    $myemployee = new m_employee();
    $response = $myemployee->create_new_employee($_POST);
    //echo " php file response = " . $response;
    return $response;
    ?> 
```

这是目标代码：

```
 }
$q  = "insert into employee(employee_num,employee_fname,employee_lname,employee_position,employee_start_time,employee_stop_time)";
$q .= "values ('$num','$fname','$lname','$position','$start_time','$stop_time')";

if(!$r = mysqli_query($dbc,$q) ) {
   $data['error'] = "true";
   $data['message'] = "insert failed";      
   $data['success'] = "false";
   return json_encode($data);
} 
```

返回到调用文件的数据是正确的，但似乎没有进入“成功”函数。返回到 .ajax 调用的数据应该来自我的 create_employee.php 文件还是只是服务器报告该文件已执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:02:24.923

尝试`echo`改用：

```
<?php
require ("../models/m_employee.php");
$myemployee = new m_employee();
$response = $myemployee->create_new_employee($_POST);
//echo " php file response = " . $response;
echo $response;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:06:48.840

这与 ajax 无关，而是 mysql 问题。我建议使用测试数据自行运行 php。您可能需要重新考虑 $_POST 变量。

遵循维和人员关于使用回声而不是返回的建议。

# php - PHP 在类/对象中使用全局变量

> ID：12983287
> 
> 赞同：3
> 
> 时间：2012-10-19T22:26:56.693
> 
> 标签：php, class, variables, object

> **可能重复：**
> [未解析基本语法的解决方法](https://stackoverflow.com/questions/2671928/workaround-for-basic-syntax-not-being-parsed)

我不明白如何在 php.ini 中使用对象内部的变量。

例如在javascript中我会这样做，这会很好。

```
var foo = 10,
    bar = {option: foo+5}
;

console.log(bar.option); 
```

在php中我做同样的事情但它失败了

```
$variable = 10;

class myObject {
    var $username = $variable + 5 ;
    var $zzz = $username + 5;

} 
```

也可以`$this`在对象中使用还是仅在函数中使用？

最后，我将如何设置基于同一对象内另一个变量的变量，例如 myObject 的第二行？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T22:30:45.210

正确的方法是使用[构造函数](http://www.php.net/manual/en/language.oop5.decon.php)——在创建对象时运行的方法。

当您定义[类属性](http://www.php.net/manual/en/language.oop5.properties.php)时，您只能使用常量值（例如`1`，很好） `'xyz'`，`array()`而不是需要在运行时评估的表达式。

将变量传递给构造函数，不要使用全局变量。

```
class myObject {
    public $username;
    public $zzz;

    public function __construct($variable) {
        $this->username = $variable + 5 ;
        $this->zzz = $this->username + 5;
    }
}

$obj = new myObject(10);
echo $obj->username; //15 
```

在 PHP 中，如果您不想编写 OOP 代码，则不需要使用类和对象。您可以简单地创建良好的旧功能。但是，如果您想使用它们，请尝试熟悉 OOP 概念。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T22:47:22.410

具体来说，您询问了如何在 PHP 中使用全局变量。为此，您将在定义变量时使用 global 关键字：

```
$variable = 10;

class myObject {
    function foo () {
        global $variable;
        $username = $variable + 5 ;
        $zzz = $username + 5;
    }
} 
```

但不要！这是个坏主意。这样做违反了对象封装的所有原则，并且每次运行代码时都会杀死一只小狗。好吧，也许小狗是安全的，但这仍然不是一个好主意。

相反，您应该通过构造函数或访问器方法将值传递给对象。见下文：

```
// The following code is guaranteed not to kill any puppies
class myObject {

    private $_variable;
    private $_userName;
    private $_zzz;

    public function __construct($value) {
        $this->_variable = $value;
        $this->_userName = $this->_variable + 5;
        $this->_zzz = $this->_userName + 5;
    }

}

$variable = 10;
$obj = new myObject($variable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:31:09.633

由于您可以在课堂外访问它的变量，我相信这就是您想要实现的目标

```
class myObject {
    public $username;
    public $zzz;
}

$variable = 10;
$obj = new myObject();
$obj->username = $variable + 5;
$obj->zzz = $obj->username + 5; 
```

或者你可以有

```
class MyObject {
    private $username;
    private $zzz;

    public function increment($variable) {
        $this->username = $variable + 5;
        $this->zzz = $this->username + 5;
    }
}

$variable = 10;
$obj = new MyObject();
$obj->increment($variable); // First Call
$obj->increment(5); // Canbe called multiple times 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T22:31:13.150

您可以在对象中拥有几种类型的变量，静态和非静态，但也可以是公共的、私有的受保护的。我不会详细介绍，但这里有一个例子：

```
class MyClass 
{
   public $test = 'non-static';
   public static $otherTest = 'static';
   private $privateTest = 'private';
   const CONSTANT_TEST = 'constant';

   public function someMethod() {
       echo $this->$test; // non-static
       echo self::$otherTest; // static
       echo static::$otherTest; // static
       echo $this->privateTest; // private
   }

   public static staticMethod() {
       echo $this->test; // error
       echo self::$otherTest; // static
       echo static::$otherTest; // static
   }
}

$obj = new MyClass;
echo $obj->test; // non-static
echo $obj::otherTest; // static
echo MyClass::otherTest; // static
echo $obj->privateTest; // error
echo $obj::CONSTANT_TEST; // constant
echo MyClass::CONSTANT_TEST; // constant 
```

# sql - 操作查询

> ID：12983288
> 
> 赞同：0
> 
> 时间：2012-10-19T22:27:02.623
> 
> 标签：sql, ms-access, row

我如何检索在 prepod 表中找到的名字的前 10 行（即`prepodFamIO`），以及在 plany 表中找到的最大小时数的学期总和（`PAuditTime`假设这两个信息在不同的表。

我知道如果我想选择名字的前 10 行，我可以运行这个查询

```
select * from prepod 
limit 30; 
```

或者

```
select * from prepod 
where rownum <= 30; 
```

如果我想选择最大的小时总和

```
SELECT MAX(PAuditTime)
 AS LargestNumber
 FROM plany
 order by PAuditTime; 
```

但是我怎么能把它们放在一个查询中......我在访问中使用 sql 和 ms sql 谢谢这是我的数据库的快照，但我只对表 plany 和 prepod 感兴趣 ![在此处输入图像描述](../Images/6cf9c9d79ff3892d970430ae1dc059ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:06:42.660

```
 SELECT TOP 10 prepodFamIO, MAX(PAuditTime)
    FROM Prepod AS pr
    INNER JOIN Plany AS pl ON pr.PlanyId = pl.IDPlany
GROUP BY prepodFamIO
ORDER BY MAX(PAuditTime) DESC 
```

...？

# c# - 使用 int 与 bool

> ID：12983290
> 
> 赞同：0
> 
> 时间：2012-10-19T22:27:10.267
> 
> 标签：c#, .net

我正在查看一些代码，我看到一行如下所示：

```
// 1 if timer is executing, else 0
private int _inTimer; 
```

这似乎是一个二进制标志。你要么在计时器里，要么不在。

**为什么要将其声明为 int 而不是 bool？**

如果您最终想要添加不同的状态，我可以理解这种情况，但是我会争论使用枚举。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:29:54.927

我能想象在这里使用的唯一原因`int`- 如果不止一件事可以同时在计时器中。验证它，如果此变量不用作计数器，则立即重构此代码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T22:30:53.337

该人可能不知道`Boolean`。此外，可能跟踪的状态`int`比实际评论的要多。

说了这么多，我同意，根据代码中的这些注释，我会使用 a `bool`，如果需要超过 2 个状态，我会使用 a `Enum`，但同样，我真的不知道你从中得到的代码库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T22:36:17.330

如果您需要`int`使用`bool`原子操作，例如[`Interlocked.CompareExchange`](http://msdn.microsoft.com/en-us/library/801kt583.aspx).

PS：我知道[`Interlocked.CompareExchange<T>`](http://msdn.microsoft.com/en-us/library/bb297966.aspx)，但它是在 .NET 3.5 中引入的，仅支持引用类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T22:29:13.943

如果它打算像 a 一样使用，请`bool`使用 a `bool`。这将使其他开发人员更容易理解其意图。整数不会阻止任何人分配高于 1 的值，并且 bool 仅限于使用`true`or `false`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T22:32:34.193

确实，没有理由在`int`这里使用 a ， a `boolean`or`enum`显然是更好的选择，但我不会为这么小的事情而烦恼。我敢打赌，有更多彻底的改变可以使代码更好，而不是专注于像这样的小事情。

# jquery - 自定义 jquery UI 对话框表单

> ID：12983291
> 
> 赞同：0
> 
> 时间：2012-10-19T22:27:13.270
> 
> 标签：jquery, jquery-ui

我是 jquery UI 的新手，我想在我的网站中使用 jquery 对话框表单。所以我有以下显示图标的代码：

```
<a href='' class='bt_green' id='dialog'><span class='bt_green_lft'></span><strong>Add user</strong><span class='bt_green_r'></span></a> 
```

但是，在 Jquery 网站的对话框表单示例中，他们使用如下按钮：

```
<button id="create-user">Create a user</button> 
```

以及触发对话框表单的 javascript 代码：

```
$( "#create_user" )
        .button()
        .click(function() {
            $( "#dialog-form" ).dialog( "open" );
        }); 
```

我认为只需将 #create_user 替换为我将在“bt_green”类旁边添加的 id 就可以了，但它不起作用，并且仍然在我想要显示的图标后面显示一种灰色按钮对话框形式。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:32:16.080

您可以在 Javascript 中执行以下操作：

```
$(".bt_green") 
    .button() 
    .click(function() { 
        $( "#dialog-form" ).dialog( "open" ); 
    }); 
```

# objective-c - 更改 NSDateFormatter 的数字符号

> ID：12983293
> 
> 赞同：4
> 
> 时间：2012-10-19T22:27:25.553
> 
> 标签：objective-c, ios, nsdateformatter, nslocale

所以我的场景基本上是这样的：如果用户有一个阿拉伯语语言环境，一个日期被格式化成这个字符串：١٩‏/١٠‏/٢٠١٢ ٣:٢١ م

数字是阿拉伯数字，日期是根据阿拉伯语言环境/区域格式以某种方式排序/格式化的。问题是某些用户的语言环境可能是阿拉伯语，但语言设置为英语（因为他/她可能无法阅读阿拉伯语）。

有没有办法只将数字更改为阿拉伯语，同时保留来自语言环境的格式化程序中的所有其他内容？也就是说，根据区域设置/区域格式（保留顺序）格式化该日期，但使用英文数字而不是阿拉伯数字。我看不出苹果为我们提供的任何方式做出这样的改变。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T19:07:35.207

您必须使用具有英文数字符号的区域设置标识符之一。例如：

```
NSDateFormatter *dateFormatter = [NSDateFormatter new];
dateFormatter.dateFormat = @"EEEE dd MMM | hh:mm a";
dateFormatter.locale = [NSLocale localeWithLocaleIdentifier:@"ar_TN"];
NSLog(@"%@", [dateFormatter stringFromDate:[NSDate date]]); 
```

这将打印：

```
الخميس 14 جانفي | 02:02 م 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T13:26:52.750

以下帖子可能会回答您的问题： [Objective-C 中的字符串替换](https://stackoverflow.com/questions/668228/string-replacement-in-objective-c)

```
NSString *str = @"This is a string";

str = [str stringByReplacingOccurrencesOfString:@"string"
                                 withString:@"duck"]; 
```

对于每个格式化的日期字符串，您将调用 10 次 (0,1,2,...,8,9)。也许这会对你有所帮助。

# javascript - 请解决这个 jQuery 问题

> ID：12983298
> 
> 赞同：-4
> 
> 时间：2012-10-19T22:28:10.123
> 
> 标签：javascript, jquery, html

我是 jQuery 和 PHP 的新手。我自己试过，但不明白如何低于输出。请问有人会调查这个吗？

**我正在努力实现这一目标：** `http://jsfiddle.net/exttq/`

我的意思是：Form1 和 Form2 仅在之前显示，但我只在选中或取消选中这些框后才打开或关闭它们

这个 PHP 函数代码有什么问题？

```
function eshop_extras_checkout($echo){

    $echo .= '

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 

    <script>

    $(".formGroup").hide();
    $("#chooseForm input:checkbox").on("change", function() {
        if($(this).is(":checked")) {
            $("#" + $(this).val()).show();
        }
        else {
            $("#" + $(this).val()).hide();
        }
    });
    ​
</script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= ' <form id="chooseForm">
        <input type="checkbox" name="form1" value="form1"> Form1<br>
        <input type="checkbox" name="form1" value="form2"> Form2<br>
    </form>

    <form id="form1" class="formGroup">
        <h2>FORM 1</h2>
        <label>Name</label><input type="text"> <br>
        <label>Address</label><input type="text">
    </form>

    <form id="form2" class="formGroup">
        <h2>FORM 2</h2>
        <label>Username</label><input type="text"> <br>
    </form>';

    $echo .= '<legend>Articles Order Form</legend>' . "\n";

    return $echo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:39:05.287

我观察到的第一件事是你的脚本在你的 DOM 中的 HTML 之前。我建议你把它放在 DOM Ready Handler 中，然后再试一次。

```
<script>
  $(document).ready(function() {
       $(".formGroup").hide();
       $("body").on("change","#chooseForm input:checkbox" ,function() {
           if($(this).is(":checked")) {
                $("#" + $(this).val()).show();
            }
            else {
              $("#" + $(this).val()).hide();
           }
       });
   });
</script>' 
```

# iphone - 应用程序在设备上崩溃，但在模拟器中没有推送 UITableView

> ID：12983299
> 
> 赞同：0
> 
> 时间：2012-10-19T22:28:14.007
> 
> 标签：iphone, ios, xcode, uitableview, push

这是我第一次在这里写，但我有一个无法处理的问题:(...

当我在另一个表中推送一个单元格后推送一个 UITableView 时，问题就出现了，如果我创建一个通用 UITableViewController 并推送它，它可以工作，但是如果我用所有必要的方法重新定义类就不起作用。

我之前在其他代码中实现过这个并且它可以工作，但是现在，在更新到 Xcode 4.5 后，它不起作用......

这是我要推送的视图的源代码：

```
@interface ECDetailSettingsTableView ()

@end

@implementation ECDetailSettingsTableView

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 4;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ECDetailSettingsCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"ECDetailSettingsCell"];

    // Configure the cell...

    return cell;
} 
```

这是推送 tableview 的代码：

```
/********************* Pushing View *********************/
[tableView deselectRowAtIndexPath:indexPath animated: YES];

_themeTable = [self.storyboard instantiateViewControllerWithIdentifier:@"ECDetailSettingsViewController"];
[self.navigationController pushViewController:_themeTable animated:YES]; 
```

PD：谢谢大家，如果我犯了语法错误，对不起:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:49:44.703

也许如果你`segue`在故事板中使用这会产生错误，因为这只适用于 iOS 6。

# c++ - 非指针函数类型可以是非类型参数吗？

> ID：12983300
> 
> 赞同：4
> 
> 时间：2012-10-19T22:28:18.380
> 
> 标签：c++, templates

我一直在试验 C++ 中的函数类型。请注意，我并不是指指向函数的类型，例如：

```
typedef void (*voidFuncPtr)(); 
```

但更具异国情调：

```
typedef void (voidFunc)(); 
```

我没想到下面的代码会编译，但令人惊讶的是：

```
template<voidFunc func>
class funcClass
{
public:
    void call() { func(); };
};

void func()
{ }

void Test()
{
    funcClass<func> foobar;
    foobar.call();
} 
```

但是，如果我尝试将以下内容添加到 funcClass：

```
voidFuncPtr get() { return &func; } 
```

我得到错误`Address expression must be an lvalue or a function designator`

我在这里的第一个问题是：编译器使用什么样的黑魔法来假装一个 func 类型是它实际上可以传递一个实例的东西？它只是将其视为参考吗？第二个问题是：如果它甚至可以调用，为什么它的地址不能被取走？另外，这些非指针函数类型叫什么？我只是因为 boost::function 而发现了它们，并且从来没有找到任何关于它们的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:39:37.907

标准的§14.1.4 说：

> 非类型模板参数应具有以下类型之一（可选 cv 限定）：
> 
> — 整数或枚举类型，
> 
> — 指向对象的指针或**指向函数**的指针，[*这是你的*]
> 
> — 对对象的左值引用或对函数的左值引用，
> 
> — 指向成员的指针，
> 
> — std::nullptr_t。

§14.1.6 说

> 非类型非引用模板参数是纯右值。它不应被分配或以任何其他方式更改其值。**非类型非引用模板参数不能获取其地址**。当使用非类型非引用模板参数作为引用的初始化器时，总是使用临时的。

这解释了你看到的两种行为。

请注意，`func`这与`&func`（§14.3.2.1）相同：

> [非类型模板参数可以是]一个常量表达式（5.19），它指定具有静态存储持续时间和外部或内部链接的对象或具有外部或内部链接的函数的地址，包括函数模板和函数模板ID，但不包括非静态类成员，表示（忽略括号）为 & id-expression，但**如果名称引用函数或数组，则 & 可以省略，** 如果相应的模板参数是引用，则 & 应省略；或者...

所以它只是一个函数指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:39:26.407

鉴于代码在没有地址运算符的情况下编译，并且指针（包括函数和成员函数）是有效的模板参数，编译器似乎认为`voidFunc`是函数指针类型，即类型的衰减版本。这方面的规则在 C++ 2003 和 C++ 2011 之间没有改变。

# c# - 如何在 WebBrowser 中使用 WebView.postUrl()

> ID：12983301
> 
> 赞同：3
> 
> 时间：2012-10-19T22:28:19.393
> 
> 标签：c#, winforms, post, webbrowser-control

之前处理过 WebView，它区分[loadUrl()](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29)和[postUrl()](http://developer.android.com/reference/android/webkit/WebView.html#postUrl%28java.lang.String,%20byte%5B%5D%29)。

但是 WebBrowser 只有[Navigate()](http://msdn.microsoft.com/en-us/library/ms161356.aspx)方法，该方法似乎通过提供（可选？） postData 参数采取了不同的方法。

这是如何运作的？是否有演示如何使用它的教程（带有示例代码）？

**更新 1：**我刚刚发现[了这个提示](https://stackoverflow.com/a/3794597/1357272)，它并没有真正显示任何代码，但是关于在 WebBrowser 中使用 POST 的注意事项。

**更新2：** [这个线程](http://social.msdn.microsoft.com/Forums/en-US/visualjsharpgeneral/thread/eacb1c98-278b-425b-9d9a-1876603c2dc2)总比没有好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:49:27.113

在 Windows 窗体的 WebBrowser 中，您可以通过调用窗体的[InvokeMember("submit")](https://stackoverflow.com/questions/2299273/how-do-i-submit-a-form-inside-a-webbrowser-control)来发布数据：

如果您知道要提交的表单的 ID：

```
HtmlElement form = webBrowser1.Document.GetElementById("FormID");
if (form != null)
    form.InvokeMember("submit"); 
```

# android - 当存在超过 1 个精灵时，Android 会滞后

> ID：12983306
> 
> 赞同：0
> 
> 时间：2012-10-19T22:28:50.463
> 
> 标签：android, performance, sprite, collision

我有一个“简单”的射击游戏，我在中央底部有一门大炮，可以向敌人（精灵）射击位图。

现在我不知道它是碰撞检测还是精灵本身，但如果我“生成”多个敌人，它开始滞后，15 之后它完全无法播放。

精灵唯一要做的就是向一个方向移动自己并从精灵表中改变图片并保存一些变量，没什么。

碰撞检测是通过穿过一系列敌人，在其中我穿过第二组子弹，对于每个敌人，我通过制作一个 Rect 来检查子弹是否击中它并检查重叠。

它有点代码，所以我不知道我是否应该发布其中一些，但如果需要，您可以要求我发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:46:23.513

[如果您使用诸如libGDX 之](http://libgdx.badlogicgames.com/)类的游戏库，我是否可以建议您为自己节省很多麻烦和样板代码？它是免费的、开源的，并且会处理 sprite、碰撞检测、对象池（以避免 GC 启动并将您的游戏拖到停止状态）、输入等。此外，如果你使用得当，你可以在你的 PC 上以快速的重新部署周期开发你的应用程序（我不是在谈论一个 android 模拟器），并且不那么频繁地将它推送到你的手机上。信不信由你，我与创作者没有任何关系——我只是认为它是一个非常棒的图书馆，它是免费的，这太棒了，否则你会经历很多从头开始构建一切的痛苦。

当然，如果您真的坚持要从头开始，那么是的，您将不得不提供一些代码。

# methods - 数组赋值问题

> ID：12983307
> 
> 赞同：-1
> 
> 时间：2012-10-19T22:29:07.077
> 
> 标签：methods

我得到了一个不兼容的类型，需要 int found:void on this line --> moneyCount = countDemoninations(change, denomination[i])。试图理解为什么？

```
public class Change {
    int [] denomination = {1,2,5,10,20,50,100,200,500,1000,2000,5000};
    int moneyCount = 0; 

    public void catagorizeChange(int change){
        for (int i = 0; i < denomination.length; i++){
            moneyCount = countDemoninations(change, denomination[i]);

        }
    }   

    public void countDemoninations(int change, int denomination){
        int moneyCount =0;
        while (change >= denomination){
            moneyCount = moneyCount++;
            change = change - denomination;
        }
    }
} 
```

我是一个新的java学生，我想知道下面的编辑代码是否在一个好的实践中，即在另一个属于同一个类的情况下使用一种方法？

```
 public void countChangedenominations (int change){
        for (int i = 0; i < moneyValuearray.length; i++){
            moneyCountarray[i] = countDemonination(change, moneyValuearray[i]);
        }
    }   

    public int countDemonination(int change, int denomination){
        while (change >= denomination){
            moneyCount = ++moneyCount;
            change = change - denomination; 
        }
        return moneyCount; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:31:05.457

线路问题的根源：

```
moneyCount = countDemoninations(change, denomination[i]); 
```

is that`countDemoninations`是[void](http://en.wikibooks.org/wiki/Java_Programming/Keywords/void)类型，而`moneyCount`是 类型`int`。

要解决此问题，请将您的`countDemoninations`方法签名更改为 return`int`而不是`void`，然后`moneyCount`作为方法中的最后一条语句返回：

```
public int countDemoninations( int change, int denomination ) {
    int moneyCount = 0;
    while ( change >= denomination ) {
        moneyCount = moneyCount++;
        change = change - denomination;
    }

    return moneyCount;
} 
```

# dojo - 如何使用 TypeScript 加载 dojo 模块

> ID：12983310
> 
> 赞同：1
> 
> 时间：2012-10-19T22:29:17.137
> 
> 标签：dojo, typescript

如果我从 CDN 加载 dojo，如何使用 TypeScript 导入模块？以下代码不知道在哪里寻找“dojo”：

```
import dojo = module("dojo"); 
```

有没有办法告诉 TypeScript 去别处寻找？TypeScript 中是否有类似于 dojoConfig 包的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:40:22.603

如果您从 CDN 引用 Dojo，您不希望使用“外部模块”机制来导入它，因为这需要 CommonJS 或 AMD 格式的模块，并希望它们位于文件系统上。您想要做的只是 /// 需要 Dojo 的“打字”（例如，请参阅 TypeScript 附带的 JQuery.d.ts）。

```
/// <require path="dojo.d.ts" /> 
```

这将告诉编译器 Dojo 中的所有类型在编译中都可用。确保在运行时正确包含 Dojo 取决于您。

我不确定是否已经创建了 Dojo.d.ts 文件。如果您想自己开始添加类型，那么有一个包含一堆这些的[存储库](https://github.com/borisyankov/DefinitelyTyped/tree/master/Definitions)至少应该作为一个很好的例子。

# mysql - mysql 按查询条目的一部分分组

> ID：12983311
> 
> 赞同：0
> 
> 时间：2012-10-19T22:29:19.353
> 
> 标签：mysql, sql-order-by

我的（简化的）查询

```
SELECT name, city FROM some.tbl WHERE name LIKE "%clarendon%" ORDER BY city, name

```

我得到如下信息：

```
命名城市
克拉伦登经济旅馆 克拉伦登
克拉伦登炮兵巷伦敦
克拉伦登巴比肯工作室伦敦
克拉伦登布拉什菲尔德街伦敦
克拉伦登加那利伦敦市中心
克拉伦登商业街伦敦
Clarendon Cottages 檫木
克拉伦登探索码头东伦敦
克拉伦登古奇之家伦敦
克拉伦登之家和花园邱园
克拉伦登豪华公寓 爱丁堡
Clarendon Manning Place 里士满
克拉伦登矿业伦敦
克拉伦登北康威汽车旅馆
克拉伦登佩皮斯街伦敦
Clarendon Puma Court 伦敦
克拉伦登管家圣伦敦
克拉伦登藤街伦敦
克拉伦登威灵顿街伦敦
克拉伦登·雷斯伯里斯坦斯
克拉伦登酒店 魁北克
伦敦克拉伦登酒店
克拉伦登班特里湾开普敦
The Clarendon Fresnaye 开普敦
纽卡斯尔克拉伦登酒店

```

我想得到的是这个——

col.name 保持其顺序，但 col.city 由 col.name 片段排序，其中包含单词 clarendon：

```
命名城市
  克拉伦登经济旅馆 克拉伦登
  克拉伦登豪华公寓 爱丁堡
  克拉伦登之家和花园邱园
  克拉伦登炮兵巷伦敦
  克拉伦登巴比肯工作室伦敦
  克拉伦登布拉什菲尔德街伦敦
  克拉伦登加那利伦敦市中心
  克拉伦登商业街伦敦
  克拉伦登探索码头东伦敦
  克拉伦登古奇之家伦敦
  克拉伦登矿业伦敦
  克拉伦登佩皮斯街伦敦
  Clarendon Puma Court 伦敦
  克拉伦登管家圣伦敦
  克拉伦登藤街伦敦
  克拉伦登威灵顿街伦敦
  克拉伦登北康威汽车旅馆
  Clarendon Manning Place 里士满
  Clarendon Cottages 檫木
  克拉伦登·雷斯伯里斯坦斯
  克拉伦登酒店 魁北克
  克拉伦登班特里湾开普敦
  The Clarendon Fresnaye 开普敦
  伦敦克拉伦登酒店
  纽卡斯尔克拉伦登酒店

```

**编辑** 错字-当然是“按名称，城市排序”，但问题仍然有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:35:16.690

问题不正确。您发布的查询已经为您提供了第二个结果。

[编辑]

```
ORDER BY
  substr(name, 1, 9), city, name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:43:32.953

您拥有的第一个结果似乎正在使用`ORDER BY name, city`而不是（如您声称的那样）`ORDER BY city, name`。

第二个结果可以通过以下方式返回：

```
SELECT name, city 
FROM some.tbl 
WHERE name LIKE "%clarendon%" 
ORDER BY SUBSTRING_INDEX(name, 'Clarendon', 1)
       , city
       , name ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T22:35:07.687

此查询简单查询可满足您的需求：

```
SELECT name, city 
FROM some.tbl 
WHERE name LIKE "%clarendon%" 
ORDER BY name ASC, city ASC 
```

# c# - 显示和重新隐藏 SIP 时无法隐藏 SIP 菜单栏

> ID：12983314
> 
> 赞同：1
> 
> 时间：2012-10-19T22:29:39.760
> 
> 标签：c#, windows-mobile-6.5

我有一个 Windows Mobile 6 解决方案，我试图隐藏底栏。我有自己的按钮来显示 SIP（​​它比标准按钮更大更容易让用户点击）。这使 SIP 很好，我正在使用 MoveWindow 向下移动键盘，使其位于屏幕底部： ![屏幕底部显示的 SIP 图像](../Images/c069e1a73c65fcc0e7b62e8f301bb0b5.png)

但是，当我在隐藏 SIP 时尝试恢复窗口时，会出现标准键盘： ![我不想要的 SIP 键盘的图像](../Images/06edcf24ebbb477e4b1827b801d0b039.png)

我正在使用在 stackoveflow 其他地方找到的代码：[如何将软件输入面板（键盘）移动到 windows 移动屏幕的底部？](https://stackoverflow.com/questions/7153640/how-do-you-move-software-input-panel-keyboard-to-bottom-of-windows-mobile-scre)但由于上述问题，无法使其完全正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:40:51.533

好的。终于破解了这个。我需要使用 SWP_NOACTIVATE 而不是 MoveWindow 来使用 SetWindowPos。MoveWindow 以某种方式更改了 SIP 的启用状态，从而导致了问题。

# ios - 使用 AVPlayer 音频播放 AVMutableComposition 会不同步

> ID：12983315
> 
> 赞同：7
> 
> 时间：2012-10-19T22:29:40.563
> 
> 标签：ios, avfoundation

我有一个带有 2 个音轨和一个视频轨的 AVMutableComposition。我正在使用合成从 .mov 文件中串起大约 40 个不同的视频剪辑，将每个剪辑的视频内容放在我的合成的视频轨道中，并将音频放在音轨中。我用于音乐的第二个音轨。我还有一个用于标题图形的同步层。

当我使用 AVPlayer 播放此作品时，音频会慢慢不同步。开始变得明显大约需要 4 分钟。似乎如果我只将少数较长的剪辑串在一起，问题就不那么明显了，当有很多剪辑较短的剪辑（在我的测试中约为 40 个）时，它会变得非常糟糕。

暂停和播放不会重新同步音频，但是搜索会。换句话说，如果我让视频播放到最后，即使我在整个过程中暂停和播放，唇形同步也会明显关闭，但是，如果我寻找到接近尾声的时间，音频就会恢复同步。

我现在的 hacky 解决方案是每分钟左右寻找 currentTime + 1 帧。这会在视频中产生令人不快的跳跃，这是由于查找操作的延迟而导致的，因此不是一个好的解决方案。

使用 ExportSession 导出不会出现此问题，音频在输出影片中保持同步。

我想知道 AVPlayer 中的新 masterClock 属性是否是这个问题的答案，如果是，它是如何使用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-11T01:02:29.623

我遇到了同样的问题，并通过以下方式指定时间尺度来修复它，以及许多其他音频和视频内容：

```
CMTime(seconds: my_seconds, preferredTimescale: CMTimeScale(600)) 
```

之前，我的时间刻度是`CMTimeScale(NSEC_PER_SEC)`. 这让我在以不同的帧速率编写剪辑时感到紧张，加上 Eddy 在这里提到的音频不同步。

尽管看起来像一个神奇的数字，但 600 是 24、30、60 和 120 的公倍数。这些是用于不同目的的常用帧速率。共同倍数避免了在编写多个剪辑时拖拽舍入问题。

# android - 关于开发移动应用程序的天真查询

> ID：12983316
> 
> 赞同：0
> 
> 时间：2012-10-19T22:29:40.390
> 
> 标签：android, objective-c, mobile

我已经使用 Java 为基于 android 的移动设备开发了应用程序。我曾尝试使用 C# 为基于 Windows 的手机开发应用程序，并听说 iOS 需要了解 Objective C。

想知道是否有任何方法可以使用一种语言来开发可以在所有这些平台上运行的应用程序。我了解每个操作系统都执行具有不同二进制文件的程序。但只是想知道是否有任何像 JRE 这样的通用平台可以在这些移动操作系统上运行。

谢谢回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:33:18.137

如果不使用 HTML 移动 webapps，我认为你最接近 3 个平台之间的通用语言的赌注是使用 Mono 的 C#。

查看同一家公司支持的适用于 Android 的 Mono 和适用于 iOS 的 MonoTouch。

虽然您可能会为您的应用程序使用相同的语言，甚至在不同平台之间共享内部 API，但您仍然会开始遇到不同平台上 UI 处理方式的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:11:41.347

有一个项目： http: [//www.appcelerator.com/platform](http://www.appcelerator.com/platform)可用于编写适用于 Android 和 iOS 的应用程序......但根据我的经验，我可以说这仅适用于简单的原型应用程序。应用程序越花哨，您遇到的问题就越大。

# javascript - 在 Javascript 中更喜欢 {foo: bar} 或 {foo : bar} （:) 后的额外空格样式

> ID：12983317
> 
> 赞同：0
> 
> 时间：2012-10-19T22:29:44.007
> 
> 标签：javascript

是否应该写作是否有任何社区共识

```
 {foo: bar} 
```

或者

```
 {foo : bar} 
```

在 Javascript 中。

看起来 JsHint 不关心物质。

例如，在具有类似字典结构的 Python 上，首选名称后没有多余空格的样式。

这是大型开源代码库中编码风格的一致性问题。我真的不在乎缩小输出的样子。我只是想确保我的奴才**产生一致的源代码**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:39:00.090

你的问题的答案是**否定的，没有共识**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:44:29.997

我认为已经决定了

*   克罗克福德没有额外的空间。

*   idomatic.js 没有额外的空间。

*   jQuery 更喜欢没有额外的空间。

感谢 elclanrs 的指点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:32:12.903

您必须记住一件事，**开发代码不是生产代码**。继续在你的开发代码中使用额外的空间，但是当你最小化它时，它`{a:b}`无论如何都会变成这样。

如果您的目标是生成高度可读且一致的代码，那么也许您应该编写一个标准。每个人的做法都略有不同。看看有多少个模块示例。

例如，为什么不这样做？

```
var objectName = {};
objectName.foo = bar; 
```

或这个？

```
var objectName = function(){};
objectName.foo = bar; 
```

# wpf - 将 RadioButton 组与其关联数据绑定

> ID：12983318
> 
> 赞同：0
> 
> 时间：2012-10-19T22:29:48.660
> 
> 标签：wpf, tags, radio-button

我有一组在 XAML 中创建的 RadioButtons，它们是通过绑定到代码隐藏中的对象集合而生成的。

我正在寻找一种在已选择的 RadioButton 与其相关的对象（在本例中为 PaletteSwatch 对象）之间进行映射的干净方式。

PaletteSwatch.color 字段用于单独的 RadioButton 样式定义（此处未列出）。

任何帮助将不胜感激。

**CS模型类**

```
public class PaletteSwatch
{

    private string colorField;

    public string color
    {
        return colorField;
    }
    ...
} 
```

**CS 窗口类**

```
...
private ObservableCollection<PaletteSwatch> mDefaultPalette = new ObservableCollection<PaletteSwatch>();

public ObservableCollection<PaletteSwatch> PaletteDefault
{
    get
    {
         return mDefaultPalette;
    }
} 
```

**XAML**

```
<ItemsControl ItemsSource="{Binding ElementName=mainWindow, Path=PaletteDefault}" ItemTemplate="{StaticResource swatchTemplate}">
      <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate >
                 <UniformGrid Columns="7"/>
             </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
</ItemsControl>

...

<DataTemplate x:Key="swatchTemplate">
     <RadioButton GroupName="filterColorThemes" Click="RadioButton_Click"/>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:33:54.850

好吧，我为那些可能想知道的人找到了答案……

基本上你需要在 RadioButton 上添加标签字段：

```
<RadioButton GroupName="filterColorThemes" Click="RadioButton_Click" Tag="{Binding}"/> 
```

{Binding} 标记引用列表中的一个元素，在我的例子中是 PaletteSwatch 对象。

然后在cs文件中：

```
 private void RadioButton_Click(object sender, RoutedEventArgs e)
    {
        RadioButton rb = sender as RadioButton;
        PaletteSwatch ps = rb.Tag;

        ...

    } 
```

# c++ - 'new' 关键字和类存储

> ID：12983326
> 
> 赞同：2
> 
> 时间：2012-10-19T22:30:18.037
> 
> 标签：c++, class, heap-memory

与这个问题并行：[我什么时候应该在 C++ 中使用 new 关键字？](https://stackoverflow.com/questions/655065/when-should-i-use-the-new-keyword-in-c)

假设我有以下代码结构：

```
class Foo{
private:
    int a;
    int b;
    /* ect */
};

class Bar{
private:
    Foo A;
    /* ect */
};

int main() {
    Bar *b;
    b = new Bar();

    // call b->methods()

    delete b;
}; 
```

我从上面的链接知道`b`是堆（免费存储）分配的。`A`但是课内的内容`b`呢？假设`A`也分配了堆是否安全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T22:35:20.827

“在堆上”，学究式地，有点用词不当。C++ 没有规定使用堆，只是分配使用`new`的对象分配在未指定的“自由存储”上。反正...

是的，如果`B`有一个类型的成员变量`A`并且您实例化一个`B`using`new`那么所有该对象都在免费存储中。

但是，重要的是要注意，当您这样做时：

`B* b = new B;`

`b` *它本身*并不在自由存储中，而是一个自动变量（即“在堆栈上”）。*指向*的*东西`b`*在免费商店上。自动变量在超出范围时会被销毁——但`b`在这种情况下指向的东西不会。如果你不这样做`delete b;`，你会得到内存泄漏。

这可能会令人困惑并且看起来并不重要。也许这令人困惑，但这并非不重要。事实上，它`b`是一个自动变量，它指向自由存储中的某个东西，这使得一个非常重要的习惯用法成为可能，称为 RAII，它用于诸如智能指针之类的东西。

`shared_ptr<B> b(new B);`

`b`，在这里，仍然是一个自动变量。但是当`b`超出范围并被销毁时，它会`b`使用它指向的东西。在这里使用智能指针将有助于消除您没有在`delete b`上面创建的内存泄漏。

# html - 溢出：隐藏对 ul 标签有什么作用？

> ID：12983336
> 
> 赞同：13
> 
> 时间：2012-10-19T22:31:17.513
> 
> 标签：html, css, html-lists, overflow, hidden

我正在使用本文中的说明创建一个多列列表：

[http://csswizardry.com/2010/02/mutiple-column-lists-using-one-ul/](http://csswizardry.com/2010/02/mutiple-column-lists-using-one-ul/)

简而言之，它说要按照以下方式做一些事情：

HTML：

```
<div class='block'>
  <ul>
    <li>
      Item1
    </li>
    <li>
      Item2
    </li>
    <li>
      Item3
    </li>
  </ul>
</div> 
```

CSS：

```
.block {
    border: 1px solid black;
    padding: 10px;
}
.block ul {
    width: 100%;
    overflow: hidden;
}
.block ul li {
    display: inline;
    float: left;
    width: 50%;
} 
```

它工作得非常好，但我对溢出感到难以置信：隐藏的 CSS 声明。

没有它，我的外部 div 会像这样折叠：

[http://jsfiddle.net/alininja/KQ9Nm/1/](http://jsfiddle.net/alininja/KQ9Nm/1/)

包含在内时，外部 div 的行为与我希望的完全一样：

[http://jsfiddle.net/alininja/KQ9Nm/2/](http://jsfiddle.net/alininja/KQ9Nm/2/)

我想知道为什么溢出：隐藏会触发这种行为。我希望它会切断内部 li 项目，而不是强制外部 div 扩展到必要的高度。

感谢您的关注！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T22:36:27.873

除非您将溢出设置为隐藏、滚动或自动，否则内部可能浮动的任何内容都不会被剪裁。该方法的真正神奇之处在于，在没有给元素设置高度的情况下，当您将溢出设置为隐藏时，它会采用内部元素的高度。

在这里，div 不会环绕 img，因为 img 是浮动的。

```
<div><img style="float:left;height:100px" /></div> 
```

在这里，div 将实现 img 的高度，因为它具有适当的溢出。

```
<div style="overflow:hidden"><img style="float:left;height:100px" /></div> 
```

如果你给它一个设定的高度，然后设置溢出隐藏它会砍掉任何会向外溢出的东西。

```
<div style="overflow:hidden;height:50px"><img style="float:left;height:100px" /></div> 
```

请注意，在很多情况下，这些技术可用于避免`clear:both`输入额外的标记。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T22:38:10.157

`overflow: hidden;`那里包含浮动的`li`s。`overflow: hidden;`创建一个新的块格式化上下文——这就是具有自己的块格式化上下文的元素所做的——它们包含浮点数。

我将在 StackOverflow 上指出另一个答案，对此进行更多解释：[添加 CSS 边框更改 HTML5 网页中的定位](https://stackoverflow.com/questions/11661264/adding-css-border-changes-positioning-in-html5-webpage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:38:30.937

使用溢出：隐藏，内容不会驱动/推动 UL 的尺寸。UL 尺寸覆盖并忽略内容是否适合其中。

没有溢出：隐藏内容及其行为可能会也可能不会驱动 UL 的整体维度。这主要是因为 UL 更像是一个容器，其边界受其内容设置/影响。隐藏溢出后，UL 更像是一个具有覆盖尺寸的视口，而不是一个容器。

# android - Proguard 可以混淆 Android 库项目 (APKLIB) 吗？

> ID：12983342
> 
> 赞同：4
> 
> 时间：2012-10-19T22:31:44.040
> 
> 标签：android, maven, obfuscation, proguard, android-library

我试图混淆一个 Android 库项目 (APKLIB)，允许将该库分发给潜在客户进行测试开发，而不会损害大部分源代码。

不幸的是，Google 无法提供任何文档和示例，并且对混淆的 APKLIB 的唯一引用是没有解决方案的问题帖子。

我尝试使用 android-maven-plugin 以及 maven-proguard-plugin 和 Maven 来混淆 APKLIB，但最终结果没有被混淆。我还尝试将 proguard 目标移至 maven 的 process-classes 和 prepare-package 阶段，但没有成功。

我最后的手段是将源代码从 APKLIB 中分离出来并将其混淆为 JAR，同时将 APKLIB 保留为 AIDL 文件和资源，并依赖于混淆的 JAR。但是，如果可能的话，我想避免这种情况，因为我们的项目已经有大量的库。

有谁知道是否有可能混淆 APKLIB？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T09:27:33.290

嗨，您问的是创建一个混淆的 jar 文件吗？

您可以通过向其中添加 build.xml 文件并在 proguard-project.txt 文件中进行更改并`ant release`从命令行运行“”来做到这一点，您将在项目的 bin 文件夹中的 proguard 文件夹下找到 obfuscated.jar。

脚步;

-> 要在 linux 的项目中添加 build.xml，请打开终端并转到 android/tools/ant 文件夹并运行`./android update project -p /path of your android library project`. 您将在项目根目录中找到 build.xml。

-> 要在编辑器中的项目中启用混淆，请打开一个`project.properties`文件并从中删除注释`proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt`

-> 将您的更改添加到 proguard-project.txt 文件并在终端中转到您的项目并运行 ant release

# c - Windows 驱动程序时间戳功能

> ID：12983345
> 
> 赞同：2
> 
> 时间：2012-10-19T22:32:14.373
> 
> 标签：c, windows, kernel, driver, device-driver

我正在修改现有的 Windows 内核设备驱动程序，我需要在其中捕获时间戳。我打算使用 time.h 库并调用 clock() 函数来获取它，但是在 Windows Visual Studio 下，链接失败。所以我把它当作我需要在驱动程序库中工作的一种手段。

我找到了以下函数，KeInitializeTimer 和 KeSetTimerEx，但如果我打算设置一个计时器并唤醒它，则使用这些函数。我真正需要的是能给我一个时间戳的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T17:29:57.713

我正在用答案更新我的问题，以便其他人从我的发现中受益。

要获取时间戳，您可以使用 KeQueryTickCount()。该例程将为您提供自系统启动以来发生的间隔中断的计数。但是，如果您需要找出自上次捕获的时间戳以来已经过去了 X 时间量，您还需要查询您的系统以确定每个间隔时钟中断所花费的时间。

ULONG KeQueryTimeIncrement() 为您提供 100 纳秒单位的数量。

例子：

```
PLARGE_INTEGER timeStamp;

KeQueryTickCount(&timeStamp); 
```

请注意 PLARGE_INTEGER 的定义如下：

```
#if defined(MIDL_PASS)
typedef struct _LARGE_INTEGER {
#else // MIDL_PASS
typedef union _LARGE_INTEGER {
    struct {
        ULONG LowPart;
        LONG HighPart;
    } DUMMYSTRUCTNAME;
    struct {
        ULONG LowPart;
        LONG HighPart;
    } u;
#endif //MIDL_PASS
    LONGLONG QuadPart;
} LARGE_INTEGER; 
```

因此，假设您想查看自上次获取时间戳后是否经过了 30 秒，您可以执行以下操作：

```
ULONG tickIncrement, ticks;
LARGE_INTEGER waitTillTimeStamp;
tickIncrement = KeQueryTimeIncrement(); 
```

// 1 秒是 1,000,000,000 纳秒，但是，因为 KeQueryTimeIncrement 以 // 100ns 为增量，除以它，你的常数就是 10,000,000

```
ticks = ((30 * 10,000,000) / tickIncrement);
KeQueryTickCount(&waitTillTimeStamp);
waitTillTimeStamp.QuadPart += ticks;

<.....Some code and time passage....>
KeQueryTickCount(&currTimeStamp);

if (waitTillTimeStamp.QuadPart < currTimeStamp.QuadPart) {
    <...Do whatever...>
} 
```

另一个帮助你理解这一点的例子，如果你想把你得到的时间戳转换成一个时间值，比如毫秒。

```
LARGE_INTEGER mSec, currTimeStamp;
ULONG timeIncrement;

timeIncrement = KeQueryTimeIncrement();

KeQueryTickCount(&currTimeStamp);

// 1 millisecond is 1,000,000 nano seconds, but remember divide by 100 to account for 
// KeQueryTickCount granularity.
mSec.QuadPart = (currTimeStamp.QuadPart * timeIncrement) / 10000; 
```

请记住，此示例是出于演示目的，mSec 不是当前时间（以毫秒为单位）。根据上面使用的 API，它只是系统启动后经过的毫秒数。

您也可以使用 GetTickCount()，但这会返回一个 DWORD，因此只能为您提供自系统启动最多 49.7 天以来的毫秒数。

# node.js - Redis 食谱聊天食谱

> ID：12983356
> 
> 赞同：1
> 
> 时间：2012-10-19T22:33:25.997
> 
> 标签：node.js, redis, chat, publish-subscribe, cookbook

我是 Node.Js 和 Redis 的新手。我得到了 Redis 食谱并尝试了聊天客户端和服务器食谱。

我想知道是否有人让代码工作，或者代码中是否存在一些错误。

我没有看到从客户端发送的消息在服务器上被调用的位置。

任何帮助都会很棒。

问候，汤姆

客户代码：

```
<?php

?> 

<html>
<head>
<title></title>

<script src="http://192.168.0.118:8000/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

<script>

var socket = io.connect('192.168.0.118',{port:8000});

socket.on('message', function(data){
alert(data);
//var li = new Element('li').insert(data);
//$('messages').insert({top: li});
});

</script>

</head>

<body>

<ul id="messages">
<!-- chat messages go here -->
</ul>

<form id="chatform" action="">
<input id="chattext" type="text" value="" />
<input type="submit" value="Send" />
</form>
<script>

$('#chatform').submit(function() {
socket.emit('message', 'test'); //$('chattext').val());
$('chattext').val(""); // cleanup the field
return false;
});

</script>

</body>
</html> 
```

服务器代码：

```
var http = require('http');
io = require('socket.io');

redis = require('redis');
rc = redis.createClient();
//rc1 = redis.createClient();

rc.on("connect",function(){
rc.subscribe("chat");
console.log("In Chat Stream");
});

rc.on("message",function (channel,message){

 console.log("Sending hope: " + message);
 //rc1.publish("chat","hope");
 socketio.sockets.emit('message',message);
});

server = http.createServer(function(req,res){

res.writeHead(200,{'content-type':'text/html'});
res.end('<h1>hello world</h1>');

});

server.listen(8000);

var socketio = io.listen(server); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:56:54.857

看起来您没有在监听来自 socket.io 的任何连接/消息事件 .. 尝试类似

```
socketio.sockets.on('connection', function(socket) {
   console.log("Got connection");
   socket.on('message', function(msg) {
       rc1.publish("chat", msg);
   });
}); 
```

您需要在上面取消注释`rc1`，您将需要第二个 redis 连接

# tridion - 存档管理器如何检查未更改的内容和已更改的内容？

> ID：12983357
> 
> 赞同：7
> 
> 时间：2012-10-19T22:33:39.547
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在检查以下文档并寻找有关存档管理器如何检查内容更改的更多信息。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ArchiveManager_10SP2/concept_756FB4CA97E94AE9836229E605A06CAD](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ArchiveManager_10SP2/concept_756FB4CA97E94AE9836229E605A06CAD)

设想：

1.  我有组件 A 和相关组件字段链接到组件 B、C、D。
2.  在我的页面 A 上，我们使用模板 A 添加组件 A 并
    发布页面 A。
3.  On Publish Archive Manager 正在处理此问题
    并将版本存储在 Archive Manager DB 中。
4.  对内容的后续更新在组件 B、C、D 中的任何一个上完成。

当我们重新发布页面 A 时，存档管理器是否将其作为新副本处理？现在，我们看到它进行一些更新，而我们看不到它的一些更新。

我们希望对以下文档进行一些澄清。

*   重新发布（内容未更改）— 重新发布页面时，存档管理器会检查页面的内容和/或其工件是否已实际更改。如果页面的内容及其工件均未更改，则会创建新版本的记录以指示资源已被重新发布，但内容本身不会被重新归档。

*   重新发布（内容已更改）— 当页面重新发布且其内容已更改时，将创建记录的新版本并为其内容创建新条目。

Archive Manager 如何检查其工件是否已更改？它是否检查组件 A、B、C、D 和页面 A ？

任何澄清都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:03:10.477

Archive Manager 的归档发生在 Tridion 的内容部署阶段，它不会返回到 Content Manager。

归档器通过查看发布器放入传输包的指令来确定正在部署哪些组件表示。但据我记得（已经有一段时间了）它只使用实际的网页来确定组件是否已更改。

# java - 当它获取一行数组时如何从prepareCall获取详细信息

> ID：12983359
> 
> 赞同：0
> 
> 时间：2012-10-19T22:33:40.610
> 
> 标签：java, mysql, callable-statement

我有一个使用 prepareCall 连接到 Db 的程序。有一个功能可以浏览 Db 中的某些元素。这是此功能的一部分：

```
Resource f = new Resource();
        if (rs.next()) {
            f.setAreaSrl(rs.getInt(1));
            f.setAreaId(rs.getInt(2));
            f.setAreaName(rs.getString(3));
            f.setCenterX(rs.getFloat(4));
            f.setCenterY(rs.getFloat(5));
            f.setCenterZ(rs.getFloat(6));

        }
        return f;
    } catch (SQLException e) {
        JOptionPane.showMessageDialog(null, "problem in accessing DB");
        e.printStackTrace();
        return null;
    } 
```

我在java中有以下代码：

```
Resource mzone = new Resource();
          mzone.getOneEntityBase("areasrl=i"); 
```

那会给我一排桌子。我如何逐个元素地访问它们？

我想用这个数字做一些计算，所以我需要把它们分开。

我找到了一些方法来做到这一点，但它不起作用。

```
Resource mzone = new ResourceAreaZone();
          mzone.getOneEntityBase("areasrl=1");
          String name = mzone.getAreaName();              
          centerX = (int) mzone.getCenterX(); 
```

# django - Dotcloud 上的 Nginx 和 Django

> ID：12983362
> 
> 赞同：1
> 
> 时间：2012-10-19T22:34:09.927
> 
> 标签：django, nginx, dotcloud

我目前有一个 dotcloud 应用程序，它使用 django 来提供一切服务。它工作得很好，但是，我们最近在 angular.js 中重做了我们的网站，我不想使用 django 来提供实际的 html 页面（我只想使用 nginx），但我希望 django 提供一些服务我们为要使用的角度代码构建的 API 的链接。

我是否可以在同一个应用程序中配置 nginx 为特定 url 提供一些静态文件，并让它发送其他 url 供 django 服务？

我希望 nginx 为我的 index.html 页面提供服务，这是对 wwww.example.com 的请求，但是如果对 example.com/api/login/ 的请求进入，我希望由 django 处理。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:00:02.270

是的，你可以做你想要的，你只需要在你的项目中添加一个 nginx.conf，然后指定你想要 nginx 服务的 url 和你想要 django 服务的 url，默认情况下它们都会去 django ，所以你只需要指定你想由 nginx 服务的那些。

*   这是文档的链接：http: [//docs.dotcloud.com/0.4/guides/nginx/](http://docs.dotcloud.com/0.4/guides/nginx/)
*   链接到关于位置块的 nginx 文档：[http ://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

这是一个从 nginx 提供静态文件的示例，您可以将其用作指南来完成您需要的操作。

```
location /media/ { 
      root /home/dotcloud/data ; 
}
location /static/ { 
      root /home/dotcloud/volatile ; 
} 
```

# php - php 错误 - 循环额外运行一次？

> ID：12983367
> 
> 赞同：2
> 
> 时间：2012-10-19T22:35:07.933
> 
> 标签：php, mysql

我已经编写了 php 脚本来从文本文件中读取内容并将它们插入数据库。文本文件只有 3 个条目，但 while 循环运行了 4 次。不知道为什么？？

这里是脚本

```
$con = mysql_connect("localhost","root","root") or die("Could not connect to server");
$db = mysql_select_db("bolly_songs",$con) or die("Could not select database");

$file1 = "ex_name.txt";
$file2 = "ex_link.txt";

$fp1 = fopen($file1,"r");
$fp2 = fopen($file2,"r");

$ctr =1 ;

while(!feof($fp1)){
    $text1 = fgets($fp1);
    $text2 = fgets($fp2);

    $id = "emov".$ctr;

    $query = "insert into example_table(movie_name, movie_link,movie_id) values('$text1', '$text2','$id')";

    $result = mysql_query($query) or die("Query failed ".mysql_error());

    echo "Data inserted in field $ctr with id as $id \n";
    $ctr++;
}

fclose($fp1);
fclose($fp2); 
```

由于脚本额外运行一次，它会在表中插入一行，其中只有 $id 值，并将两个字段都保留为空。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:40:08.670

`fgets`如果没有可读取的内容，则返回 false，因此请检查它是否在循环中返回 (===) false，或者将循环更改为文档中的此示例：

```
while (($buffer = fgets($handle, 4096)) !== false) {
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
} 
```

# c - 有没有办法让 Eclipse 的代码完成与 XCode 的一样好？

> ID：12983377
> 
> 赞同：1
> 
> 时间：2012-10-19T22:35:52.450
> 
> 标签：c, eclipse, autocomplete

我刚刚开始为 iOS 制作我的第一批应用程序，其中包括第一次使用 XCode。我很惊讶在此代码完成后编码变得如此轻松。从数据类型到函数名称，再到语法模板，IDE 都会向您建议并在您选择时将其写入。它使编码变得如此流畅，这意味着您无需费力地记住您为某个函数命名的名称，或者参数的输入顺序。

到目前为止，我一直在使用 Eclipse 编写 C 代码以及一些 Java。我已经了解了如何修改 Java 的内容辅助选项，以便它可以根据几乎任何输入提供建议，从而模拟 XCode 的功能。但是尝试在 C/C++ 编辑器的首选项下做同样的事情，我找不到类似的设置。

我还能做些什么来配置 Eclipse，使其匹配或至少接近 XCode 中相同级别的代码完成，还是我进入插件领域？为了清楚起见，我指的是 Eclipse（特别是 C）中的 C/C++ 编辑器，我想模仿 XCode 的代码完成功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:47:26.170

您可以转到首选项下的“内容辅助”以选择您选择的语言，并确保自动激活已打开。然后，减少延迟（100 毫秒适用于我），并在“自动激活触发器”框中，放置您想要自动激活的任何字符。对于像 Xcode 这样的东西，那就是：.abcdefghijklmnopqrstuvwxyz，如果你想要的话，加上大写字母。瞧！

# c# - App.config 文件与应用程序一起版本化？

> ID：12983379
> 
> 赞同：2
> 
> 时间：2012-10-19T22:35:58.047
> 
> 标签：c#, .net, dependencies, version, app-config

我有一个被编译成可执行文件的应用程序。它依赖于一个 app.config 文件（它会变成一个 MyApp.exe.config 文件）。

我需要对应用程序进行更新，所以进行了更改，重新编译，然后替换了 application.exe 文件。但它不起作用......直到我也用它复制了新的 app.config 文件，即使 app.config 没有改变。

有人可以解释一下吗？app.config 是否成为像任何其他 dll 一样进行版本控制的依赖项？我想既然它是一个配置文件（本质上是一个文本文件），它不会被版本控制并以这种方式依赖。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T22:40:08.873

app.config 文件只是一个 xml 配置文件。没有像程序集那样的版本控制。

您所做的某些更改是否有可能在原始 app.config 中的 app.config 中添加了一些配置。例如，添加服务引用将使用 Web 服务所需的端点和配置更改 app.config。

你得到什么错误？

# java - 如何通过 SSO 使用 Spring 3 的安全性？

> ID：12983380
> 
> 赞同：1
> 
> 时间：2012-10-19T22:35:59.250
> 
> 标签：java, spring, security

我们正在使用 Spring 3 框架，并且我们有一个 SSO（单点登录）提供程序，它重定向到我们的应用程序，在请求中传递特殊令牌以指示用户已通过身份验证。

我想使用 Spring 安全性来处理诸如拒绝访问页面之类的事情，除非用户经过身份验证，但我也希望能够在开发应用程序时在本地计算机上绕过它。

因此，在生产场景中，我希望 SSO 重定向到我们的应用程序，特别是“/login.html”目标，该目标应该以某种方式触发我编写的自定义类，以从请求中提取预期的登录信息并加载用户的从我们的数据库中获取信息并将其放入会话中以供应用程序的其余部分使用。

然后在开发场景中，我需要通过使用自定义登录页面创建会话，然后像上面一样从数据库加载用户信息来绕过 SSO。

我试图弄清楚如何自己做，但我似乎无法完全理解这一切。

任何有关如何完成此任务的信息，即使只是高级路线图，也会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:49:19.577

如果您`AuthenticationProvider`为 Spring Security 编写自定义以通过 SSO 提供程序进行身份验证，那么您可以有两种 Spring Security 配置，一种用于连接您的自定义`AuthenticationProvider`以用于生产，另一种用于使用标准身份验证提供程序的开发。

# c# - 计算 CPU 使用率的更有效方法

> ID：12983385
> 
> 赞同：1
> 
> 时间：2012-10-19T22:36:33.747
> 
> 标签：c#, .net, performance

所以我正在编写一个任务管理器克隆，现在我正在使用它来计算每个进程的 CPU 使用率 %s。问题是这非常慢；我只是想知道是否有办法加快速度。

此外，我不允许使用 PerformanceCounter 的方法和/或 WMI。

```
//Omitted:
// - Process[] processes just holds the currently running processes
// - rows[] is a list of the rows I have in a table which shows the tables data
// - rows[2] is the column for CPU usage
// - rows[0] is the column for PID
//========
//Do CPU usages
double totalCPUTime = 0;
foreach (Process p in processes)
{
    try
    {
        totalCPUTime += p.TotalProcessorTime.TotalMilliseconds;
    }
    catch (System.ComponentModel.Win32Exception e)
    {
        //Some processes do not give access rights to view their time.
    }
}
foreach (Process p in processes)
{
    double millis = 0;
    try
    {
        millis = p.TotalProcessorTime.TotalMilliseconds;
    }
    catch (System.ComponentModel.Win32Exception e)
    {
        //Some processes do not give access rights to view their time.
    }
    double pct = 100 * millis / totalCPUTime;
    for (int i = 0; i < rows.Count; i++)
    {
        if(rows[i].Cells[0].Value.Equals(p.Id))
        {
            rows[i].Cells[2].Value = pct;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:42:04.397

使用[PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)组件获取不同的性能统计信息：

```
var cpuCounter = new PerformanceCounter("Process", "% Processor Time", p.ProcessName);
double value = cpuCounter.NextValue(); 
```

这是创建任务管理器之类的示例[。](http://www.codeproject.com/Articles/29986/A-Simple-Performance-Counter-Application)

还可以考虑使用 Win API 函数[`GetProcessTimes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223%28v=vs.85%29.aspx)。

# performance - 需要一些关于从相当复杂的来源编写大型报告查询的最佳方法的建议

> ID：12983389
> 
> 赞同：1
> 
> 时间：2012-10-19T22:36:42.213
> 
> 标签：performance, views, multiple-databases, cross-join

在搜索了其他答案以查看是否已经提出了这个特定问题（并且已经提出了其他口味 - 只是没有涵盖我需要询问的所有内容）之后，我想提出以下场景并就最常见的问题寻求建议创建此报告查询的有效方法。这是一篇冗长的帖子，不幸的是，我不允许发布任何 T-SQL 代码——我的雇主明确禁止这样做。

这些年来我学到的一件事是，有很多人比我知道的多得多——所以在搜索并没有找到你需要的东西之后，问问别人吧:)

所有表都有主键，如果有链接到子表的表，则有外键。数据库和报表服务器是 SQL 2008 R2。该服务器运行 128GB RAM，是一个 4CPU 四核超线程野兽。

首先，我有一组包含 Locations、Sections 和 Areas 的表。位置通过映射表链接到部分 - 部分有多个位置，部分通过映射表链接到区域，并且有多个部分到区域。这些表都位于数据库“A”中。我在一个单独的数据库“B”中创建了一个视图，它代表了一个快速执行的漂亮结果集中的区域 - 部分 - 位置链接。我称之为 LocationSectionArea 视图。

在数据库“B”中，成千上万的用户正在输入他们关于他们工作的各种类别的日常统计数据。目前有91个类别。每个类别将包含从大约 3 个到多达 25 个不等的子类别。类别和子类别的数量可以随时更改，通过管理界面添加或删除更多。我创建了一个视图来表示这些链接并返回一个名为 CategorySubCategoryFields 视图的结果集。

为每个类别/子类别链接收集的信息各不相同 - 有些需要大约 8 个不同的字段，有些需要 3 个，有些只需要 1 个。这些字段链接到相应的子类别。这再次包含在数据库“B”中。

我已经构建了一个视图，可以很好地将这些数据放在这个数据库中，最终得到一个大的结果矩阵，以一种可以很容易报告的方式呈现数据，并且到目前为止的视图执行似乎是完全可以接受的速度。我称之为 UserStatsView。这包含在数据库“B”中。

现在 - 输入数据的用户被分配到前面提到的位置之一。结果需要显示一个部分内的所有位置，一个区域内的所有部分，以及每个位置显示该类别的每个类别和子类别。然后需要将其链接到来自 UserStatsView 的结果，因此您最终会得到一个相当大的这些结果矩阵，其中混杂着许多没有结果的 0 - 但它们是为报告目的而创建的。

报告必须允许用户，例如，选择一个部分，然后生成该部分中包含的所有位置的报告，以及用户为该位置输入的结果的统计 - 对于每个类别-子类别组合有。无论用户是否输入了实际结果，它都必须显示该部分的所有位置和所有类别-子类别。因此，某些报告上可能有很多 0。

为此，我创建了一个将 LocationSectionArea 与 CategorySubCategoryFields 视图交叉连接的结果视图。这创建了我想要的基本矩阵。然后我将这个矩阵加入到 UserStatsView 的结果中，加入 LocationId、CategoryId 和 SubCategoryId 以插入位置的用户结果。这都是在数据库“B”中创建的。

现在，如果您在最后的 where 子句中提供足够的过滤器以减少记录数量，这一切都可以正常工作并且“可以”。正如您所想象的那样 - 如果他们尝试运行具有更大结果集的报告 - 它开始变得非常缓慢。（即，涵盖所有地点 6 个月的日期范围需要超过 30 秒）

我的部分问题是我相信位置信息是从数据库“A”链接进来的，并且构造的视图包含在数据库“B”中，以及该报告所需的所有其他信息的所有视图表和记录。

另一部分是我相信创建的非常大和复杂的交叉连接然后链接到用户结果的视图。交叉连接是在与 UserStatsView 结果集连接之前没有索引或相关数据的笛卡尔结果。

我认为的第三个问题是，正在“创建”数据以填补所有空白，以便生成可以输入 SSRS 的结果结构。我已经看到表假脱机和散列连接占用了大量执行时间，以及从数据库中查找位置、部分和区域。这些都通过查询执行估计计划显示出来。

我要问的是，根据上述标准，是否有人知道是否有更好的方法来生成此结果集。我是否完全错过了一种非常简单快捷的方法，这很有可能:)。如果有人可以建议我应该研究什么，我会很乐意去做——只是不确定现阶段要研究什么？

干杯

杆。

更新：以下是定义两个数据库的表结构，。显然，真正的桌子还有更多，但这是它们如何挂在一起的关键。请原谅这么大的帖子 - 我已经删除了除了关键字段和一些数据字段之外的所有内容，以便您查看表格的结构。表名和字段名已更改为通用名称，删除了许多额外字段，因此我可以发布代码。

* * *

数据库 A

```
**Location Table**
LocationId BIGINT PK
LocationName Varchar(100)

**Section Table**
SectionId Bigint PK
SectionName varchar(100)

**Area Table**
AreaId Bigint PK
AreaName varchar(100)

**LocationSectionMap Table**
LocSecId Bigint PK
LocationId Bigint FK Index to Location Table
SectionId BigInt FK Index to Section Table

**SectionAreaMap Table**
SecAreaId Bigint PK 
SectionId Bigint FK Index to Section Table
AreaId Bigint FK Index to Area Table 
```

* * *

数据库 B

```
**Categories Table** 
CategoryId Bigint PK
categoryName varchar(100)

**SubCategories Table**
SubCategoryId Bigint
CategoryId Bigint FK to Categories Table 
SubCategoryType Int
FieldTypeId Int (1, 2, 3 or 4)

**UserStats Table**
UserStatId bigint PK
UserId Bigint
StartDate DateTime
EndDate DateTime
LocationId Bigint --> this is the location ID in Location table in database A
SectionId Bigint --> this is the Section ID in Section Table in database A
AreaId Bigint --> this is the Area ID of the Area Table in database A

**FieldType1 Table**
FieldType1Id bigint PK
UserStatId  Bigint FK to UserStats Table
SubCategoryId Bigint FK to Subcategories Table
Value1 int
Value2 int

**FieldType2 Table**
FieldType2Id bigint PK
UserStatId  Bigint FK to UserStats Table
SubCategoryId Bigint FK to Subcategories Table
Value1 int 
Value2 int 
Value4 int
Value5 int
Value6 int
Value7 int
Value8 int
Value9 int
Value10 int

**FieldType3 Table**
FieldType3Id bigint PK
UserStatId  Bigint FK to UserStats Table
SubCategoryId Bigint FK to Subcategories Table
Value1 int
Value2 int
Value11 int
Value12 int
Value13 int
Value14 int
Value15 int
Value16 int

**FieldType4 Table**
FieldType4Id bigint PK
UserStatId  Bigint FK to UserStats Table
SubCategoryId Bigint FK to Subcategories Table
CombinedValue1And2 int

**SubCategoryAssociations Table**
SubCategoryAssociationId Int PK
ReportOfSubCategoryId bigint FK to Subcategories Table
IncludeValuesFromSubcategoryId Bigint FK to Subcategories Table 
```

视图：数据库 A 中的区域-截面-位置视图 (vwAreasSectionsAndLocations)

```
SELECT     A.AreaId, A.AreaName, C.SectionId, C.SectionName, E.LocationId, E.LocationName
FROM         DatabaseA.dbo.tblAreas AS A INNER JOIN
                      DatabaseA.dbo.tblAreaSections AS B ON A.AreaId = B.AreaId INNER JOIN
                      DatabaseA.dbo.tblSections AS C ON B.SectionId = C.SectionId INNER JOIN
                      DatabaseA.dbo.tblSectionLocations AS D ON C.SectionId = D.SectionId INNER JOIN
                      DatabaseA.dbo.tblLocations AS E ON D.LocationId = E.LocationId 
```

数据库 B 中的 Category-SubCategory 视图 (vwCategoryAndSubCategory)

```
SELECT     TOP (100) PERCENT dbo.tblCategories.CategoryId, 
          dbo.tblCategories.CategoryName, 
                      dbo.tblSubCategory.SubCategoryId, 
                      dbo.tblSubCategory.SubCategoryname, 
              dbo.tblSubCategory.SubCategoryTypeId
FROM         dbo.tblCategories INNER JOIN
                      dbo.tblSubCategory ON dbo.tblCategories.CategoryId = dbo.tblSubCategory.CategoryId
ORDER BY dbo.tblCategories.CategoryName, dbo.tblSubCategory.SubCategoryname 
```

视图交叉连接两个视图以创建所需的结果矩阵（无结果）（vwAreaSectionLocationCategorySubCategory）

```
SELECT     dbo.vwCategoryAndSubCategory.CategoryId, dbo.vwCategoryAndSubCategory.CategoryName, 
                      dbo.vwCategoryAndSubCategory.CategoryPlacementOrder, dbo.vwCategoryAndSubCategory.IsStandardDaybookEntryCategory, 
                      dbo.vwCategoryAndSubCategory.SubCategoryId, dbo.vwCategoryAndSubCategory.SubCategoryname, dbo.vwCategoryAndSubCategory.SubCategoryTypeId, 
                      dbo.vwCategoryAndSubCategory.SubCategoryPlacementOrder, dbo.vwAreasSectionsAndLocations.AreaId, dbo.vwAreasSectionsAndLocations.AreaName, 
                      dbo.vwAreasSectionsAndLocations.SectionId, dbo.vwAreasSectionsAndLocations.SectionName, dbo.vwAreasSectionsAndLocations.LocationId, 
                      dbo.vwAreasSectionsAndLocations.LocationName
FROM         dbo.vwCategoryAndSubCategory CROSS JOIN
                      dbo.vwAreasSectionsAndLocations 
```

创建使用统计结果的视图 (vwUserStatsResults)

```
SELECT      dbo.tblUserStats.UserStatId, 
    dbo.tblUserStats.UserId, 
    dbo.tblUserStats.LocationId, 
        dbo.tblUserStats.SectionId, 
    dbo.tblUserStats.AreaId,                       
            dbo.tblUserStats.StartDate, 
    dbo.tblUserStats.EndDate, 
    dbo.tblFieldType1.CategoryId, 
    dbo.tblFieldType1.SubCategoryId, 
            1 AS FieldTypeId, 
    (dbo.tblFieldType1.Value1 + ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType1 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType2 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType3 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0)) 
                  AS Value1, (dbo.tblFieldType1.Value2 + ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType1 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType2 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType3 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType1.UserStatId = A.UserStatId), 0)) 
                  AS Value2, Value1 + Value2 AS CombinedValue1And2, 0 AS Value3, 0 AS Value4, 
                  0 AS Value5, 0 AS Value6, 0 AS Value7, 0 AS Value8, 
                  0 AS Value9, 0 AS Value10, 0 AS Value11, 0 AS Value12, 0 AS Value13, 
                  0 AS Value14, 0 AS Value15, 0 AS Value16
FROM         dbo.tblUserStats INNER JOIN
                  dbo.tblFieldType1 ON dbo.tblUserStats.UserStatId = dbo.tblFieldType1.UserStatId 

UNION ALL

SELECT      dbo.tblUserStats.UserStatId, 
    dbo.tblUserStats.UserId, 
    dbo.tblUserStats.LocationId, 
            dbo.tblUserStats.SectionId, 
    dbo.tblUserStats.AreaId, 
            dbo.tblUserStats.StartDate, 
    dbo.tblUserStats.EndDate, 
    dbo.tblFieldType2.CategoryId, 
    dbo.tblFieldType2.SubCategoryId, 
            2 AS FieldTypeId, 
    dbo.tblFieldType2.Value1 + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType1 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType2 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType3 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  AS Value1, dbo.tblFieldType2.Value2 + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType1 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType2 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType3 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType2.UserStatId = UserStatId)), 0) 
                  AS Value2, dbo.tblFieldType2.Value1 + dbo.tblFieldType2.Value2 AS CombinedValue1And2, 
                  ISNULL(dbo.tblFieldType2.Value3, 0), ISNULL(dbo.tblFieldType2.Value4, 0), 
                  ISNULL(dbo.tblFieldType2.Value5, 0), ISNULL(dbo.tblFieldType2.Value6, 0), 
                  ISNULL(dbo.tblFieldType2.Value7, 0), ISNULL(dbo.tblFieldType2.Value8, 0), 
                  ISNULL(dbo.tblFieldType2.Value9, 0), ISNULL(dbo.tblFieldType2.Value10, 0), 
                  0 AS Value11, 0 AS Value12, 0 AS Value13, 0 AS Value14, 0 AS Value15, 
                  0 AS Value16
FROM         dbo.tblUserStats INNER JOIN
                  dbo.tblFieldType2 ON dbo.tblUserStats.UserStatId = dbo.tblFieldType2.UserStatId 
UNION ALL
SELECT      dbo.tblUserStats.UserStatId, 
    dbo.tblUserStats.UserId, 
    dbo.tblUserStats.LocationId, 
    dbo.tblUserStats.SectionId, 
    dbo.tblUserStats.AreaId, 
            dbo.tblUserStats.StartDate, 
    dbo.tblUserStats.EndDate, 
    dbo.tblFieldType3.CategoryId, 
    dbo.tblFieldType3.SubCategoryId, 
            3 AS FieldTypeId, 
    dbo.tblFieldType3.Value1 + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType1 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType2 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value1) AS Expr1
                          FROM         dbo.tblFieldType3 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  AS Value1, dbo.tblFieldType3.Value2 + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType1 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType2 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  + ISNULL
                      ((SELECT     SUM(Value2) AS Expr1
                          FROM         dbo.tblFieldType3 AS A
                          WHERE     (FieldId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      (ReportOnSubCategoryId = A.SubCategoryId))) AND (dbo.tblFieldType3.UserStatId = UserStatId)), 0) 
                  AS Value2, dbo.tblFieldType3.Value1 + dbo.tblFieldType3.Value2 AS CombinedValue1And2, 0 AS Value3, 
                  0 AS Value4, 0 AS Value5, 0 AS Value6, 0 AS Value7, 
                  0 AS Value8, 0 AS Value9, 0 AS Value10, 
                  ISNULL(dbo.tblFieldType3.Value11, 0), ISNULL(dbo.tblFieldType3.Value12, 0), 
                  ISNULL(dbo.tblFieldType3.Value13, 0), ISNULL(dbo.tblFieldType3.Value14, 0), 
                  ISNULL(dbo.tblFieldType3.Value15, 0), ISNULL(dbo.tblFieldType3.Value16, 0)
FROM         dbo.tblUserStats INNER JOIN
                  dbo.tblFieldType3 ON dbo.tblUserStats.UserStatId = dbo.tblFieldType3.UserStatId 
UNION ALL
SELECT     dbo.tblUserStats.UserStatId, 
    dbo.tblUserStats.UserId, 
    dbo.tblUserStats.LocationId, 
            dbo.tblUserStats.SectionId, 
    dbo.tblUserStats.AreaId, 
            dbo.tblUserStats.StartDate, 
    dbo.tblUserStats.EndDate, 
    dbo.tblFieldType4.CategoryId, 
    dbo.tblFieldType4.SubCategoryId, 
            4 AS FieldTypeId, 
    0 AS Value1, 0 AS Value2, dbo.tblFieldType4.CombinedValue1And2 + (ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType1 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType2 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value1)
                          FROM         dbo.tblFieldType3 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0)) 
                  + (ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType1 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType2 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0) 
                  + ISNULL
                      ((SELECT     SUM(A.Value2)
                          FROM         dbo.tblFieldType3 A
                          WHERE     A.SubCategoryId IN
                                                    (SELECT DISTINCT IncludeValuesFromSubCategoryId
                                                      FROM          dbo.tblSubCategoryAssociations
                                                      WHERE      ReportOnSubCategoryId = A.SubCategoryId) AND dbo.tblFieldType4.UserStatId = A.UserStatId), 0)) 
                  AS CombinedValue1And2, 0 AS Value3, 0 AS Value4, 0 AS Value5, 0 AS Value6, 
                  0 AS Value7, 0 AS Value8, 0 AS Value9, 0 AS Value10, 
                  0 AS Value11, 0 AS Value12, 0 AS Value13, 0 AS Value14, 0 AS Value15, 
                  0 AS Value16
FROM         dbo.tblUserStats INNER JOIN
                  dbo.tblFieldType4 ON dbo.tblUserStats.UserStatId = dbo.tblFieldType4.UserStatId 
```

最后是把所有东西放在一起的视图 (vwReportResults)

由于字数限制，在另一个条目中发表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:52:15.587

由于字数限制，接上一篇文章...

```
SELECT     TOP (100) PERCENT dbo.vwAreaSectionLocationCategorySubCategory.categoryId, 
        dbo.vwAreaSectionLocationCategorySubCategory.categoryName, 
                  dbo.vwAreaSectionLocationCategorySubCategory.SubCategoryId, 
                  dbo.vwAreaSectionLocationCategorySubCategory.SubCategoryName, 
        dbo.vwAreaSectionLocationCategorySubCategory.FieldTypeId, 
                  dbo.vwAreaSectionLocationCategorySubCategory.AreaId, 
                  dbo.vwAreaSectionLocationCategorySubCategory.AreaName, 
        dbo.vwAreaSectionLocationCategorySubCategory.SectionId, 
                  dbo.vwAreaSectionLocationCategorySubCategory.SectionName, 
        dbo.vwAreaSectionLocationCategorySubCategory.LocationId, 
                  dbo.vwAreaSectionLocationCategorySubCategory.LocationName, 
        ISNULL(dbo.vwUserStatsResults.UserStatsId, 0) AS UserStatsId, 
                  ISNULL(dbo.vwUserStatsResults.UserId, 0) AS UserId, 
        ISNULL(dbo.vwUserStatsResults.LocationId, 0) AS LocationId, 
        ISNULL(dbo.vwUserStatsResults.SectionId, 0) AS SectionId, 
        ISNULL(dbo.vwUserStatsResults.AreaId, 0) AS AreaId, 
                    ISNULL(dbo.vwUserStatsResults.StartDate, N'2000-01-01') AS StartDate, 
        ISNULL(dbo.vwUserStatsResults.EndDate, N'2000-01-01') AS EndDate, 
                    ISNULL(dbo.vwUserStatsResults.Value1, 0) AS Value1, 
        ISNULL(dbo.vwUserStatsResults.Value2, 0) AS Value2, 
        ISNULL(dbo.vwUserStatsResults.CombinedValue1And2, 0) AS CombinedValue1And2, 
        ISNULL(dbo.vwUserStatsResults.Value3, 0) AS Value3, 
        ISNULL(dbo.vwUserStatsResults.Value4, 0) AS Value4, 
                    ISNULL(dbo.vwUserStatsResults.Value5, 0) AS Value5, 
        ISNULL(dbo.vwUserStatsResults.Value6, 0) AS Value6, 
        ISNULL(dbo.vwUserStatsResults.Value7, 0) AS Value7, 
                    ISNULL(dbo.vwUserStatsResults.Value8, 0) AS Value8, 
        ISNULL(dbo.vwUserStatsResults.Value9, 0) AS Value9, 
        ISNULL(dbo.vwUserStatsResults.Value10, 0) AS Value10, 
                    ISNULL(dbo.vwUserStatsResults.Value11, 0) AS Value11, 
        ISNULL(dbo.vwUserStatsResults.Value12, 0) AS Value12, 
                    ISNULL(dbo.vwUserStatsResults.Value13, 0) AS Value13,   
        ISNULL(dbo.vwUserStatsResults.Value14, 0) AS Value14, 
        ISNULL(dbo.vwUserStatsResults.Value15, 0) AS Value15, 
                    ISNULL(dbo.vwUserStatsResults.Value16, 0) AS Value16
FROM         dbo.vwAreaSectionLocationCategorySubCategory LEFT OUTER JOIN
                  dbo.vwUserStatsResults ON dbo.vwAreaSectionLocationCategorySubCategory.LocationId = dbo.vwUserStatsResults.LocationId AND 
                  dbo.vwAreaSectionLocationCategorySubCategory.SubCategoryId = dbo.vwUserStatsResults.SubCategoryId AND 
                  dbo.vwAreaSectionLocationCategorySubCategory.FieldTypeId = dbo.vwUserStatsResults.FieldTypeId AND 
                  dbo.vwAreaSectionLocationCategorySubCategory.categoryId = dbo.vwUserStatsResults.categoryId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:52:02.877

我相信在找到并阅读了一篇关于交叉连接性能和注意事项的文章以及一篇关于将视图更改为表值用户定义函数的文章后，我找到了自己的答案，我只是将视图到 TV-UDF 并从一开始就过滤“视图”以减少 SQL Server 需要执行的工作量。这应该有望减少返回的数据量并停止或减少表假脱机。

# tsql - 使用 TSQL 为其余列创建列值标题

> ID：12983394
> 
> 赞同：2
> 
> 时间：2012-10-19T22:37:57.783
> 
> 标签：tsql, group-by

我有下表

```
ID | Group      | Type         | Product
1    Dairy         Milk           Fresh Milk
2    Dairy         Butter         Butter Cream
3    Beverage      Coke           Coca cola
4    Beverage      Diet           Dew
5    Beverage      Juice          Fresh Juice 
```

我需要以下输出/查询结果：

```
ID | Group      | Type         | Product
1    Dairy             
1                 Milk           Fresh Milk
2                 Butter         Butter Cream
2    Beverage      
1                Coke            Coca cola
2                Diet            Dew
3                Juice           Fresh Juice 
```

对于上面的示例，硬编码脚本可以完成这项工作，但我会为任意数量的组寻找动态脚本。我不知道如何做到这一点，我还没有示例查询。我需要想法，至少给我一个想法的例子。PIVOT 看起来是一个不错的选择，但看起来并不完全适合这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:36:45.413

这是一种可能的方法。它基本上结合了“Group-Headers”和“Group-Items”。困难在于正确地订购它们。

```
WITH CTE AS
(
  SELECT ID,[Group],Type,Product,
    ROW_NUMBER() OVER (PARTITION BY [Group] Order By ID)AS RN
  FROM Drink
)
SELECT ID,[Group],Type,Product
FROM(
   SELECT RN AS ID,[Group],[Id]AS OriginalId,'' As Type,'' As Product, 0 AS RN, 'Group' As RowType
   FROM CTE WHERE RN = 1
   UNION ALL
   SELECT RN AS ID,'' AS [Group],[Id]AS OriginalId,Type,Product, RN, 'Item' As RowType
   FROM CTE
)X
ORDER BY  OriginalId ASC
, CASE WHEN RowType='Group' THEN 0 ELSE 1 END ASC
, RN ASC 
```

这是一个演示小提琴：[http ://sqlfiddle.com/#!6/ed6ca/2/0](http://sqlfiddle.com/#!6/ed6ca/2/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:53:05.387

稍微简化的方法：

```
With Groups As
    (
    Select Distinct Min(Id) As Id, [Group], '' As [Type], '' As Product
    From dbo.Source
    Group By [Group]
    )
Select Coalesce(Cast(Z.Id As varchar(10)),'') As Id
  , Coalesce(Z.[Group],'') As [Group]
  , Z.[Type], Z.Product
From    (
        Select Id As Sort, Id, [Group], [Type], Product
        From Groups
        Union All
        Select G.Id, Null, Null, S.[Type], S.Product
        From dbo.Source As S
            Join Groups As G
                On G.[Group] = S.[Group]
        ) As Z
Order By Sort 
```

应该注意的是，使用`Coalesce`纯粹是出于审美原因。在这些情况下，您可以简单地返回 null。

[SQL小提琴](http://sqlfiddle.com/#!3/e16a2/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:01:32.113

以及使用 ROW_NUMBER 的方法：

```
IF OBJECT_ID('dbo.grouprows') IS NOT NULL DROP TABLE dbo.grouprows;

CREATE TABLE dbo.grouprows(
ID INT,
 Grp NVARCHAR(MAX),
 Type NVARCHAR(MAX),
 Product NVARCHAR(MAX)
 );
 INSERT INTO dbo.grouprows VALUES
(1,'Dairy','Milk','Fresh Milk'),
(2,'Dairy','Butter','Butter Cream'),
(3,'Beverage','Coke','Coca cola'),
(4,'Beverage','Diet','Dew'),
(5,'Beverage','Juice','Fresh Juice');

SELECT 
CASE WHEN gg = 0 THEN dr1 END GrpId,
CASE WHEN gg = 1 THEN rn1 END TypeId,
ISNULL(Grp,'')Grp,
CASE WHEN gg = 1 THEN Type ELSE '' END Type,
CASE WHEN gg = 1 THEN Product ELSE '' END Product
FROM(
SELECT *,
DENSE_RANK()OVER(ORDER BY Grp DESC) dr1
FROM( 
SELECT *,
ROW_NUMBER()OVER(PARTITION BY Grp ORDER BY type,gg) rn1,
ROW_NUMBER()OVER(ORDER BY type,gg) rn0
FROM(
SELECT  Grp,Type,Product, GROUPING(Grp) gg, GROUPING(type) tg FROM dbo.grouprows
GROUP BY Product, Type, Grp
WITH ROLLUP
)X1
WHERE tg = 0
)X2
WHERE gg=1 OR rn1 = 1
)X3
ORDER BY rn0 
```

# c# - System.ArgumentNullException

> ID：12983396
> 
> 赞同：0
> 
> 时间：2012-10-19T22:38:17.970
> 
> 标签：c#

我得到了这个例外......

```
System.ArgumentNullException: Value cannot be null.
Parameter name: typeName
   at HomeInventory2.Services.Factory.GetService(String servicename) in C:\Users\Protego\Documents\Visual Studio 2010\Projects\HomeInventory2\HomeInventory2\Services\Factory.cs:line 37
   at HomeInventory2.Business.Manager.GetService(String name) in C:\Users\Protego\Documents\Visual Studio 2010\Projects\HomeInventory2\HomeInventory2\Business\Manager.cs:line 14
   at HomeInventory2.Business.InventoryMngr.Create(CreateInventory inv) in C:\Users\Protego\Documents\Visual Studio 2010\Projects\HomeInventory2\HomeInventory2\Business\InventoryMngr.cs:line 19
   at HomeInventory2.Form1.submitButton_Click(Object sender, EventArgs e) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Form1.cs:line 52
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

源于此代码 -

```
private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        } 
```

该代码应该以正在创建的文件结束，这些值被保存到文本文件中。显然有些事情正在发生故障 - 我假设在 InventoryMngr 文件中看起来像这样。

```
namespace HomeInventory2.Business
{
    public class InventoryMngr : Manager
    {
        /// <summary>
        /// persists the inventory information
        /// </summary>
        /// <param name="inv"></param>
        public void Create(CreateInventory inv)
        {
            InventorySvc inventorySvc =
            (InventorySvc)GetService(typeof(InventorySvc).Name);
            inventorySvc.CreateInventory(inv);
        }
    }
} 
```

业务经理得到服务

```
namespace HomeInventory2.Business
{
    public abstract class Manager
    {
        private Factory factory = Factory.GetInstance();
        protected IService GetService(String name)
        {
            return factory.GetService(name);
        }
    }
} 
```

和工厂 getservice

```
public IService GetService(string servicename)
{
    Type type;
    Object obj = null;
    try
    {
        type = Type.GetType(GetImplName(servicename));
        obj = Activator.CreateInstance(type);
    }
    catch (Exception e)
    {
        Console.WriteLine("Exception occured: {0}", e);
        throw e;
    }
    return (IService)obj;
} 
```

获取ImplName

```
private string GetImplName(string servicename)
        {
            NameValueCollection settings =
                ConfigurationManager.AppSettings;
            return settings.Get(servicename);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:40:35.083

这是你的问题：

```
NameValueCollection settings = ConfigurationManager.AppSettings;
return settings.Get(servicename); 
```

确保您的 app.config/web.config 具有正确的`AppSettings`值。 `settings.Get(servicename)`没有找到`servicename`.

因此，如果服务名称是“AwesomeService”，您需要在 appSettings 中添加一个元素，例如：

`<add key="AwesomeService" value="somevalue"/>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T22:43:10.493

我修改你的代码如下：

```
public void Create(CreateInventory inv)
{
    InventorySvc inventorySvc =
        (InventorySvc)GetService((typeof(InventorySvc)).toString());
    inventorySvc.CreateInventory(inv);
} 
```

# iphone - 使用 PhoneGap 并添加 iAd

> ID：12983399
> 
> 赞同：-1
> 
> 时间：2012-10-19T22:38:31.280
> 
> 标签：iphone, ios, cordova

我将如何将 PhoneGap 用于我的应用程序，但将我目前拥有的 iAd 保留在我的应用程序的新的全 HTML 版本中？我听说过一个广告插件，但我找不到。我的 SDK 使用 iOS 6.0，PhoneGap 版本使用 Cordova 2.1.0。

我在这里看到了一些旧答案，但它们似乎都适用于 iOS 4.0，并且无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:10:26.653

您可以在这里找到广告插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/AdPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/AdPlugin)

一般来说，你可以去这里：[https](https://github.com/phonegap/phonegap-plugins) ://github.com/phonegap/phonegap-plugins浏览所有可用的插件。

# python - 第二次运行脚本，没有从邮件服务器检索到消息

> ID：12983401
> 
> 赞同：1
> 
> 时间：2012-10-19T22:38:49.400
> 
> 标签：python, pop3

我使用以下代码从我的 gmail 帐户读取邮件。

```
import poplib
pop_conn = poplib.POP3_SSL('pop.gmail.com')
pop_conn.user('user')             # result: '+OK send PASS'
pop_conn.pass_('password')        # result: '+OK Welcome.'
print pop_conn.list()[1]
pop_conn.quit() 
```

它按预期向我显示了 1 条消息。
但是，如果我第二次运行此脚本，我会收到 0 条消息。在服务器上，消息仍然存在且未读。
我怎样才能让所有消息也第二次运行脚本？

对我来说，它就像一个电子邮件客户端，不会两次下载相同的邮件。是否有一些标志可以强制程序再次下载所有内容？我在 ubuntu 12.10 上使用 python 2.7.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:15:50.173

你确定这就是你在事情发生时所做的一切吗？据我所知，只是使用`list()`不应该那样做，但是如果您`retr()`以前也阅读过邮件内容，那么 POP3 服务器通常会标记该邮件，并且不会再在进一步连接时返回它。

您可以尝试改用 IMAP，因为它可以让您更详细地指定行为，例如。您可以告诉它不要将消息标记为已查看，并允许您多次检索它们。Google 支持 IMAP，python 有 imaplib 可以使用它。

# vim - 为所有编程语言文件类型设置 vim 设置

> ID：12983409
> 
> 赞同：1
> 
> 时间：2012-10-19T22:39:28.550
> 
> 标签：vim

我的系统有一些默认的 vim 设置，在编程语言文件上使用这些设置毫无意义。我想更改`formatoptions`任何具有编程语言文件类型的缓冲区的设置。

我一直在`autocmd`为每个文件扩展名添加一个 .vimrc ：

```
au FileType python,c,cpp,java setlocal formatoptions=crql 
```

但是维护这个列表变得很烦人。如何为所有编程语言文件类型（`c`, `cpp`, `python`, `java`...）和可能的所有结构化语法（`xml`, `yaml`, `cfg`, `diff`...）配置设置，但*不能*为其他文件类型（如`gitcommit`无文件类型）配置设置？我需要维护自己的黑名单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:50:51.820

您最好将所有内容都打开，然后在文件类型出现问题的地方有选择地关闭它们。

# d3.js - 使用 Force Layout 中的路径作为 ClipPath

> ID：12983412
> 
> 赞同：1
> 
> 时间：2012-10-19T22:40:02.883
> 
> 标签：d3.js, force-layout

我正在根据强制布局中的某些点生成 voronoi 路径。我想随机分配 10 个类中的 1 个路径，然后用一个 clipPath 包装其中一些类，然后我可以将其应用于另一个元素。

是否可以使用 d3 将 svg 标签包裹在元素周围而不是附加？

或者甚至可以在clipPath 中使用d3 生成的多个路径？

谢谢您的帮助，

```
w = $(window).width();
    h = $(window).height();

    function ranNum(){
        return Math.floor((Math.random()*10)+1);
    }

    $('#grid').css('height', h);

    var vertices = d3.range(50).map(function(d) { return {x: d.x, y: d.y}; });
    //console.log(vertices);

    links = [];
    voronoiVertices = [];
    var force = d3.layout.force()
        .nodes(vertices)
        .size([w, h])
        .linkDistance(60)
        .charge(-900)
        .on("tick", tick)
        .start();

    var svg = d3.select("body").append("svg:svg")
        .attr("width", w)
        .attr("height", h);

    //path gradient
    var defs = svg.append('defs')
    var radialGradient = defs.append('radialGradient')
        .attr('id', 'pathGrad')
        .attr('cx', '50%')
        .attr('cy', '50%')
        .attr('r', '50%')
        .attr('fx', '50%')
        .attr('fy', '50%');

    var stop1 = radialGradient.append('stop')
        .attr('offset', '.2')
        .attr('stop-color', '#a8a8a8');

    var stop2 = radialGradient.append('stop')
        .attr('offset', '1')
        .attr('stop-color', '#0000000');

    //path dropShadow
    var filterShadow = defs.append('filter')
        .attr('id', 'pathShadow')
        .attr('height', '130%');

    var gCir = svg.append('g')
        .attr("class", "gCircle");

    var gPath = svg.append('g')
        .attr("class", "gPath");

    var circle = svg.selectAll("circle");   
    var path = gPath.selectAll("path")
            .data(d3.geom.voronoi(vertices))
                .enter().append("path")
            .attr("fill", "url(#pathGrad)");

            //wraps path with random class after generation
    $('path').each(function(){$(this).attr('class', 'path-' + Math.floor((Math.random()*10)+1))});

    var clip = defs.append("svg:clipPath")
        .attr("id", "clip")
            .append("svg:rect")
            .attr("id", "clip-rect")
            .attr("x", "0")
            .attr("y", "0")
            .attr("width", '900px')
            .attr("height", '900px');

    var gClip = svg.append("svg:g")
        .attr('clip-path', 'url(#clip)');
/*
    var clip = gClip.append("svg:image")
        .attr("class", "circle")
        .attr("xlink:href", "clip.jpg")
        .attr("x", "0px")
        .attr("y", "0px")
        .attr("width", w)
        .attr("height", h); 
*/
    var selectPath = d3.selectAll('.path-10');      
    console.log(selectPath);    

    function tick() {
        voronoiVertices = vertices.map(function(t){return [t.x, t.y]})  
        path = path.data(d3.geom.voronoi(voronoiVertices))
            path.enter().append("path")
            .attr("d", function(t) { return "M" + t.join("L") + "Z"; });
        path.attr("fill", "url(#pathGrad)")
            .attr("d", function(t) { return "M" + t.join("L") + "Z"; });        

        circle = circle.data(vertices)
        circle.enter().append("circle")
            .call(force.drag)
            .attr("r", 0)
            .attr('class', function(d) { return d.index; })
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; })
            .transition().duration(5000).attr("r", 5);

            circle.attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-09T15:57:12.107

这里有 jQuery 和 D3 的奇怪组合。使用 D3 时，请尝试执行 D3 中的操作。例如，我宁愿这样做：

```
.attr("class", function(d){return 'path-'+Math.floor((Math.random()*10)+1))}); 
```

比这个：

```
$('path').each(function(){$(this).attr('class', 'path-' + Math.floor((Math.random()*10)+1))}); 
```

d3 有一种[奇特但聪明的做事方式](http://bl.ocks.org/mbostock/3808218)，最好在做一些严肃的事情之前好好学习这种更新模式。

这是工作代码：

```
w = 1200;
h = 500;

function ranNum(){
    return Math.floor((Math.random()*10)+1);
}

var vertices = d3.range(50).map(function(d) { return {x: d.x, y: d.y}; });
//console.log(vertices);

links = [];
voronoiVertices = [];
var force = d3.layout.force()
    .nodes(vertices)
    .size([w, h])
    .linkDistance(60)
    .charge(-900)
    .on("tick", tick)
    .start();

var svg = d3.select("body").append("svg")
    .attr("width", w)
    .attr("height", h);

//path gradient
var defs = svg.append('defs')
var radialGradient = defs.append('radialGradient')
    .attr('id', 'pathGrad')
    .attr('cx', '50%')
    .attr('cy', '50%')
    .attr('r', '50%')
    .attr('fx', '50%')
    .attr('fy', '50%');

var stop1 = radialGradient.append('stop')
    .attr('offset', '.2')
    .attr('stop-color', '#a8a8a8');

var stop2 = radialGradient.append('stop')
    .attr('offset', '1')
    .attr('stop-color', '#0000000');

//path dropShadow
var filterShadow = defs.append('filter')
    .attr('id', 'pathShadow')
    .attr('height', '130%');

var gCir = svg.append('g')
    .attr("class", "gCircle");

var gPath = svg.append('g')
    .attr("class", "gPath");

var circle = svg.selectAll("circle");   
var path = gPath.selectAll("path")
        .data(d3.geom.voronoi(vertices))
            .enter().append("path")
        .attr("fill", "url(#pathGrad)");

        //wraps path with random class after generation
//$('path').each(function(){$(this).attr('class', 'path-' + Math.floor((Math.random()*10)+1))});

var clip = defs.append("svg:clipPath")
    .attr("id", "clip")
        .append("svg:rect")
        .attr("id", "clip-rect")
        .attr("x", "0")
        .attr("y", "0")
        .attr("width", '900px')
        .attr("height", '900px');

var gClip = svg.append("svg:g")
    .attr('clip-path', 'url(#clip)');

function tick() {
    voronoiVertices = vertices.map(function(t){return [t.x, t.y]})  
    path = path.data(d3.geom.voronoi(voronoiVertices))
        path.enter().append("path")
        .attr("d", function(t) { return "M" + t.join("L") + "Z"; });
    path.attr("fill", "url(#pathGrad)")
        .attr("d", function(t) { return "M" + t.join("L") + "Z"; });        

    circle = circle.data(vertices)
    circle.enter().append("circle")
        .call(force.drag)
        .attr("r", 0)
        .attr('class', function(d) { return d.index; })
        .attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; })
        .transition().duration(5000).attr("r", 5);

        circle.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
} 
```

祝你好运！

# json - 以编程方式检索“喜欢”

> ID：12983418
> 
> 赞同：0
> 
> 时间：2012-10-19T22:40:55.643
> 
> 标签：json, facebook-graph-api

我正在对信用社的社交活动进行分析。我有一些代码需要这样的链接......

[https://www.facebook.com/americanlakecu/likes](https://www.facebook.com/americanlakecu/likes)

...并将其转换为...

[http://graph.facebook.com/americanlakecu](http://graph.facebook.com/americanlakecu)

..这使我能够抓住“喜欢”和“人们在说话”。问题是许多机构，尤其是较小的机构，似乎使用不同的格式。这是一个例子。

[https://www.facebook.com/pages/EvergreenDIRECT-Credit-Union/276887662722?sk=likes](https://www.facebook.com/pages/EvergreenDIRECT-Credit-Union/276887662722?sk=likes)

任何人都知道如何转换上面的链接，以便我可以使用 api 以与[http://graph.facebook.com/americanlakecu](http://graph.facebook.com/americanlakecu)相同的方式呈现 JASON ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:51:52.687

在点击其他机构的图表时，您需要参考 facebook id。对于 Americanlakecu，该 ID 是 Americanlakecu。对于 Evergreen 的情况，请尝试 2​​76887662722。但出于某种原因，您的“较小”页面需要访问令牌。我认为差异可能只是数据可用性的简单问题。

如上所述，您仍然可以获取他们的数据，但您需要一个 api 访问令牌。例如，直接点击此链接不会向您显示任何内容：http: [//developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/?method=GET&path=276887662722) ?method=GET&path=276887662722 ，但是在您到达那里之后，如果您获取访问令牌，您将看到所有您需要的信息。

因此，将您的 SDK 实现配置为使用访问令牌，您应该能够继续使用方便的图形方法。

# android - Android 设置 True 或 False - 应用退出时清除

> ID：12983421
> 
> 赞同：0
> 
> 时间：2012-10-19T22:41:22.667
> 
> 标签：android, sharedpreferences

我希望在打开应用程序时弹出通知。但是一旦用户解雇，我不希望它再次出现，即使他们回到相同的活动。但是当应用程序退出并且他们稍后回来时，我希望弹出相同的对话框通知（提示用户登录）。

所以基本上...

```
boolean b = true;

if (b == true) {
     // show dialog
     b = false;
} 
```

我只是想让 var b 保存状态，但在退出时清除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:47:06.943

如果您不希望该值在您的应用程序关闭时持续存在，我不确定使用 sharedpreference 是否有意义，因为这就是它们的重点。

也许在您的 Application 类中使用布尔值会更好？它会一直持续到应用程序完全关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:50:35.407

android 没有“应用程序退出”的概念，只有 android 生命周期，因此您必须更具体地了解您想要的行为。例如，您的意思是每当用户导致您的应用程序中的任何活动被暂停并且您的应用程序中没有任何活动被恢复时？

如果您只有一个活动，那么您可以在活动中保留一个状态变量，在暂停时将其设置为 false，在恢复时设置为 true。

如果您有 >1 个活动，那么跟踪您的任何活动何时不再处于前台是很痛苦的。例如，如果您在活动暂停时设置foreground=false，在活动恢复时设置foreground=true，然后检查时间容差。例如，如果暂停和恢复之间的时间大于某个阈值，则假设您从后台返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:50:50.167

您不想使用 SharedPrefs，除非他们使用按钮或其他侦听器从应用程序中注销，否则您无法确定更改它。如果你想确保它被重置，你可以把它放在 onDestroy() 来重置变量或 onPause() 甚至更好

# c# - 从另一个类访问表单的控件

> ID：12983427
> 
> 赞同：13
> 
> 时间：2012-10-19T22:42:30.290
> 
> 标签：c#

我有一个 Windows 窗体应用程序，其中添加了一些控件到设计器中。当我想从 Form1.cs 中更改启用文本框的某些内容（LIKE）时，我只需使用：

```
textBox1.Enabled = true; 
```

但现在我有一个名为 class1.cs 的单独类。

如何从静态函数 class1.cs 启用 textBox1？

注意：我没有尝试任何代码，因为我对此一无所知。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T22:45:16.957

编辑：很多编辑。

```
public partial class Form1 : Form
{
    // Static form. Null if no form created yet.
    private static Form1 form = null;

    private delegate void EnableDelegate(bool enable);

    public Form1()
    {
        InitializeComponent();
        form = this;
    }

    // Static method, call the non-static version if the form exist.
    public static void EnableStaticTextBox(bool enable)
    {
        if (form != null)
            form.EnableTextBox(enable);
    }

    private void EnableTextBox(bool enable)
    {
        // If this returns true, it means it was called from an external thread.
        if (InvokeRequired)
        {
            // Create a delegate of this method and let the form run it.
            this.Invoke(new EnableDelegate(EnableTextBox), new object[] { enable });
            return; // Important
        }

        // Set textBox
        textBox1.Enabled = enable;
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-11T13:44:11.590

这只是另一种方法：

```
TextBox t = Application.OpenForms["Form1"].Controls["textBox1"] as TextBox; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T22:50:12.280

您可以将 Form 的实例传递给类

```
 MyForm frm = new MyForm();

 MyClass c = new MyClass(frm); 
```

然后您的班级可以采用该实例并访问文本框

```
 public class MyClass
 {

   public MyClass(MyForm f)
   {
      f.TextBox1.Enabled = false;
   }
 } 
```

设计看起来不太好

最好在表单中调用类并根据返回的值操作文本框

```
//MyForm Class

 MyClass c = new MyClass();
 c.DoSomethings();
 if(c.getResult() == requiredValue)
   textBox1.enabled = true;
 else
   textBox1.enabled = false;

//MyForm Class ends here 
```

**更新**

```
public class Class1
{
   public static int SomeFunction()
   {
      int result = 1;
      return result;
   }

   public static void SomeFunction(out int result)
   {
      result = 1;
   }
} 
```

用法

```
if(Class1.SomeFunction() == 1)
   textBox1.Enabled = true;
else
   textBox1.Enabled = false; 
```

或者

```
int result = 0;
Class1.SomeFunction(out result);

if(result == 1)
   textBox1.Enabled = true;
else
   textBox1.Enabled = false; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T22:50:08.603

您可以让您的 class1 有一个事件来启用文本框。

```
public class Class1
{
  public event Action<object, EventArgs> subscribe ;
  private void raiseEvent()
  {
     var handler = subscribe ;
     if(handler!=null)
     {
        handler(this,EventArgs.Empty);//Raise the enable event.
     }
  }
} 
```

让包含 TextBox 的类以某种方式订阅它。在 TextBox 包装类中

```
 public class TextBoxWrapper
       public void EnablePropertyNotification(object sender, EventArgs args) 
       {
          TextBox1.Enabled = true ; //Enables textbox when event is raised.
       }
       public TextBoxWrapper()
       {
         class1Instance.subscribe+=EnablePropertyNotification ;
       } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-19T22:50:20.563

您不应该`Form`从您的*class1*中真正更改 UI 控件，而是在*class1*中创建一个方法或属性来判断是否应该启用文本框。

例子：

```
// I changed the name class1 to MySettings
public class MySettings
{
    public bool ShouldTextBoxBeEnabled()
    {
        // Do some logic here.
        return true;
    }

    // More generic
    public static bool SetTextBoxState(TextBox textBox)
    {
        // Do some logic here.
        textBox.Enabled = true;
    }

    // Or static property (method if you like)
    public static StaticShouldTextBoxBeEnabled { get { return true; } }
} 
```

然后以您的形式：

```
MySettings settings = new MySettings();
textBox1.Enabled = settings.ShouldTextBoxBeEnabled();

// Or static way
textBox1.Enabled = MySettings.StaticShouldTextBoxBeEnabled;

// Or this way you can send in all textboxes you want to do the logic on.
MySettings.SetTextBoxState(textBox1); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-16T15:36:40.383

要访问/修改表单元素属性，只需将其写在您的外部类中。

```
Form1.ActiveForm.Controls["textBox1"].Enabled = true; 
```

`textBox1`TextBox 的变量名在哪里。

这实际上做了什么：获取由字符串中的名称指定的活动 Form 对象的控件。

**警告：**活动表单是指当前打开并关注的表单。如果您在计算机上使用最小化的 WindowsForm 应用程序执行其他操作，`Form1.ActiveForm`则不会获取表单，而是会给出`null`，这可能会导致以后出错。当心！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-23T11:46:23.660

在本例中，您有一个名为 Main.cs 的表单和一个名为 MyClass 的类：

在 MyClass 中（注意：我的 Form Class 的名称 = 'Main'）：

```
Main ui = new Main();
ui.toolStripProgressBarStickers.PerformStep(); 
```

在 (FormName).Designer.cs 所以在我的情况下 Main.designer.cs 将适当的控件从“私有”更改为“公共”：

```
public System.Windows.Forms.ToolStripProgressBar toolStripProgressBarStickers; 
```

这为我解决了。谢谢， Ensai Tankado

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-03T18:36:16.400

我不得不在工作中这样做，并且没有发现这些答案中的任何一个与我最终做的事情相匹配，所以我展示了我是如何让它发挥作用的。

首先，在加载事件中初始化类的副本。

```
NameOfClass newNameofClass; 
```

然后你想绑定到你的类（在加载事件中）：

```
textBox1.DataBindings.Add(new Binding("Enabled", newNameofClass, "textBox1Enabled")); 
```

在您的班级中，执行以下操作：

```
private bool textBox1Enabled = false;
public bool TextBox1Enabled
{
    get
        {
            return textBox1Enabled;
        }
        set
        {
            textBox1Enabled = value;
        }
} 
```

*   false 设置会将您的文本框初始化为禁用
*   如果要默认启用，请将 textBox1Enabled 设置为 true。
*   如果您有其他逻辑来启用/禁用文本框，只需相应地修改 textBox1Enabled 的值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-16T19:35:10.017

根据@vr_driver 的回答，您可以这样做以避免其他容器（如组框、面板...

```
TextBox t = Application.OpenForms["Form1"].Controls.Find("textBox1", true)[0] as TextBox; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-25T21:18:47.540

好简单：

创建要从中访问元素的表单对象的实例。

```
Form1 ui = new Form1(); 
```

现在将表单元素更改为“公共” - 就像在设计器代码中一样：

```
...
public System.Windows.Forms.TextBox textBox6;
... 
```

现在您可以在代码中像这样访问它们：

```
ui.textBox6 ... 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-12-01T08:33:46.623

这就是你应该做的：我在我的表单类中编写了下面的代码：

```
public static Form1 form = null;

    private delegate void SetImageDelegate(Image image);

    public Form1()
    {
        InitializeComponent();
        form = this;
    }

    public static void SetStaticImage(Image image)
    {
        if (form != null)
            form.pic1.Image = image;
    }

    private void setImage(Image img)
    {
        // If this returns true, it means it was called from an external thread.
        if (InvokeRequired)
        {
            // Create a delegate of this method and let the form run it.
            this.Invoke(new SetImageDelegate(setImage), new object[] { img });
            return; // Important
        }

        // Set textBox
        pic1.Image = img;
    } 
```

并且下面的代码应该在另一个类中：

```
Form1 frm= Form1.form;
frm.pic1.Image = image; 
```

请注意，我`private static Form1 form = null;`改为`public static Form1 form = null;`

祝你好运……哈桑·埃斯坎达里 (Hassan Eskandari) 写的 :)

# asp.net - HtmlAgilityPack：如何在我循环遍历节点集合时从节点中删除标签？

> ID：12983429
> 
> 赞同：0
> 
> 时间：2012-10-19T22:42:34.127
> 
> 标签：asp.net, tags, html-agility-pack

循环遍历节点集合时，如何从节点中删除标签

我在一个复杂的文档中

```
For Each node As HtmlNode In document.DocumentNode.SelectNodes("//section/div[3]/section/article") 
```

然后我得到一个地址字符串，我以这种方式拆分

```
adress = Split(node.SelectSingleNode("./div[2]/div").InnerHtml, "<br>") 
```

但有时我在这个地址中有一些广告，它来自一个总是以“span”标签开头的工具提示我如何在从节点拆分结果之前删除它？

例如，在我拆分之前，结果看起来很正常

```
88989 <br> myCity <br> mySTreet <br> address 
```

在某些情况下，结果看起来像

```
88989 <br> myCity <span>mycity is a nice city<br> Visit us </span> <br> mySTreet <br> address 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:28:20.050

好的，可以使用

```
 Dim ChildNode As HtmlNode
 For Each node As HtmlNode In document.DocumentNode.SelectNodes("//section/div[3]/section/article")
   Dim code = ChildNode.SelectSingleNode("./span")
   ChildNode.RemoveChild(code, False)
... 
```

# java - 如何解析名称=值^^名称=值^^名称=值

> ID：12983430
> 
> 赞同：0
> 
> 时间：2012-10-19T22:42:42.057
> 
> 标签：java, regex, string, parsing

**我的问题：**非常具体。我正在尝试考虑解析以下文本的最简单方法：

```
^^domain=domain_value^^version=version_value^^account_type=account_type_value^^username=username_value^^password=password_value^^type=type_value^^location=location_value^^id=xxx^^cuid=cuid_value^^ 
```

每次都会出现完全一样的情况。几个要求：

*   并非所有这些键值对每次都会出现。
*   它们的顺序可能不同

我正在寻找这样的代码：

```
private String[] getKeyValueInfo(String allStuff) {
  String domain = someAwesomeMethod("domain", allStuff);
  String version = someAwesomeMethod("version", allStuff);
  String account_type = someAwesomeMethod("account_type", allStuff);
  String username = someAwesomeMethod("username", allStuff);
  String password = someAwesomeMethod("password", allStuff);
  String type = someAwesomeMethod("password", allStuff);
  String location = someAwesomeMethod("location", allStuff);
  String id = someAwesomeMethod("id", allStuff);
  String cuid  = someAwesomeMethod("cuid", allStuff);
  return new String[] {domain, version, account_type, username, password, type, location, id, cuid};
} 
```

我不知道`someAwesomeMethod(String key, String allStuff)`应该包含什么。

**我在想什么：**像这样：

```
private String someAwesomeMethod(String key, String allStuff) {
  Pattern patt = Pattern.compile("(?i)^^" + key + "=(.*?)^^", Pattern.DOTALL);
  Matcher matcher = patt.matcher(allStuff);
  if (matcher.find()) {
    return matcher.group(1);
  }
  return null;
} 
```

**那有什么问题：**

我担心如果我不得不经常这样做会有点慢/麻烦。所以我正在寻找任何提示/建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T22:47:20.250

如果你必须做很多事情，我会制作一张地图，类似于

```
Map<String, String> m = new HashMap<String, String>();
for (String s : stuff.split("\\^\\^"))  // caret needs escaping
{  
    String[] kv = s.split("=");
    m.put(kv[0]) = kv[1];
} 
```

然后查找您刚刚执行的密钥`m.get("key")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:47:06.100

String.split() 将为此工作

```
strVar = /* Your big long string */
String[] vars = strVar.split("\\^\\^"); // needs escaping 
```

# java - 未从线程接收位置数据

> ID：12983431
> 
> 赞同：4
> 
> 时间：2012-10-19T22:42:44.873
> 
> 标签：java, android, multithreading, timer, location

我正在尝试使用计时器每隔一段时间发送包含用户位置的短信。最初，我遇到了一个空指针异常，这是由于我犯了一个简单的错误。一旦解决了这个问题，一切似乎都运行良好。但是，它永远不会获取我的位置，因此，不断发送的文本是“无法接收位置”。

我要问的是为什么它没有得到我的位置？我能做些什么来解决这个问题？

没有 logcat 错误，我正在使用两个模拟器来测试这个应用程序（将文本从一个发送到另一个）。如果您能提供任何帮助或解决方案，将不胜感激！如果我忽略了一些看似非常简单的事情，请提醒我我正在这样做。谢谢！

这是代码：

```
 public class MessageService extends Service{
int counter = 0;
private Timer timer = new Timer();
public String textTime, phoneNumber;
public int updateInterval;
int lat, lng;
String coordinates, latitude, longitude;
LocationManager locationManager;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId){
    //receives the intent extras from the calling intent
    textTime = intent.getStringExtra("textTime");
    phoneNumber = intent.getStringExtra("phone");

    phoneNumber = "5556";

    //the following if statement has to do with transferring the string textTime into a number that can be used
    if (textTime.equals("15 Minutes")) {
        updateInterval = (15 * (60000));
    }else if (textTime.equals("30 Minutes")) {
        updateInterval = (30 * (60000));
    }else if (textTime.equals("1 Hour")){
        updateInterval = (60 * (60000));
    }else {
        updateInterval = (15 * (60000));
    }

    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    new Thread(){
        public void run(){
            Looper.prepare();
            // Define a listener that responds to location updates
            LocationListener locationListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                  // Called when a new location is found by the network location provider.
                  //makeUseOfNewLocation(location);
                    lat = (int) (location.getLatitude() * 1E6);
                    lng = (int) (location.getLongitude() * 1E6);

                    latitude = Integer.toString(lat);
                    longitude = Integer.toString(lng);

                    coordinates = "Coordinates: " + latitude + ", " + longitude + ". Latitude: " + latitude + " Longitude: " + longitude + ". Respond 'END' to stop texts."; 
                }

                public void onStatusChanged(String provider, int status, Bundle extras) {}

                public void onProviderEnabled(String provider) {}

                public void onProviderDisabled(String provider) {}
              };

              Looper.loop();

              if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
              }else{
                    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
              }

        }
    }.start();

    //the following method should use a timer to send a sms message in a timed interval. It also should implement using a different thread
    doSomethingRepeatedly();

    return START_STICKY;

}

public void doSomethingRepeatedly(){
    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            //the following code should be what is done repeatedly
            //Log.d("MessageService", String.valueOf(++counter));

            sendSmsMessage();
        }
    }, 0, updateInterval);
}

//the following code handles sending the text message
public void sendSmsMessage(){
    SmsManager sms = SmsManager.getDefault();
    if (coordinates == null || coordinates.equals("")){
        coordinates = "Could Not Receive Location";
    }

    sms.sendTextMessage(phoneNumber, null, coordinates , null, null);

}

public void onDestroy() {
    super.onDestroy();

    if (timer != null) {
        timer.cancel();
    }
}

}//end of service 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:48:36.417

您的 LocationListener 可能在`onLocationChanged()`被调用之前就被销毁了。您的服务应该实现 LocationListener 本身。

* * *

```
public class MessageService extends Service implements LocationListener {
    int counter = 0;
    private Timer timer = new Timer();
    public String textTime, phoneNumber;
    public int updateInterval;
    int lat, lng;
    String coordinates, latitude, longitude;
    LocationManager locationManager;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId){
        //receives the intent extras from the calling intent
        textTime = intent.getStringExtra("textTime");
        phoneNumber = intent.getStringExtra("phone");

        phoneNumber = "5556";

        //the following if statement has to do with transferring the string textTime into a number that can be used
        if (textTime.equals("15 Minutes")) {
            updateInterval = (15 * (60000));
        }else if (textTime.equals("30 Minutes")) {
            updateInterval = (30 * (60000));
        }else if (textTime.equals("1 Hour")){
            updateInterval = (60 * (60000));
        }else {
            updateInterval = (15 * (60000));
        }

        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        }else{
            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
        }

        //the following method should use a timer to send a sms message in a timed interval. It also should implement using a different thread
        doSomethingRepeatedly();

        return START_STICKY;

    }

    public void doSomethingRepeatedly(){
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                //the following code should be what is done repeatedly
                //Log.d("MessageService", String.valueOf(++counter));

                sendSmsMessage();
            }
        }, 0, updateInterval);
    }

    //the following code handles sending the text message
    public void sendSmsMessage(){
        SmsManager sms = SmsManager.getDefault();
        if (coordinates == null || coordinates.equals("")){
            coordinates = "Could Not Receive Location";
        }

        sms.sendTextMessage(phoneNumber, null, coordinates , null, null);

    }

    public void onDestroy() {
        super.onDestroy();

        if (timer != null) {
            timer.cancel();
        }
    }

    @Override
    public void onLocationChanged(Location location) {
        // Called when a new location is found by the network location provider.
        //makeUseOfNewLocation(location);
        lat = (int) (location.getLatitude() * 1E6);
        lng = (int) (location.getLongitude() * 1E6);

        latitude = Integer.toString(lat);
        longitude = Integer.toString(lng);

        coordinates = "Coordinates: " + latitude + ", " + longitude + ". Latitude: " + latitude + " Longitude: " + longitude + ". Respond 'END' to stop texts."; 
    }

    @Override
    public void onProviderDisabled(String provider) {}

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:47:05.863

我不太明白您的代码，但是如果您希望一个线程更新`coordinates`字段，然后另一个线程读取 的内容`coordinates`，则需要创建`coordinates`字段`volatile`.

线程之间共享的任何值都需要同步或以某种方式跨越[内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)才能可见。

# jquery - 仅当 AJAX 调用和数据库删除成功时，如何删除视图中的一行？

> ID：12983435
> 
> 赞同：3
> 
> 时间：2012-10-19T22:43:11.573
> 
> 标签：jquery, ajax

我有一个表格，其中每一行都有一个删除按钮。实际上我每次都删除该行而不检查ajax调用是否成功。我怎样才能做到这一点，以便只有在 ajax 调用正常时才会删除该行。

这是我在每一行的点击处理程序

```
$("body").on('click', ".ui-icon-trash" ,function(){

    var $closestTr = $(this).closest('tr');  // This will give the closest tr
                            // If the class element is the child of tr          
    deleteRowFromDB(oTable, closestTr);
    $closestTr.remove() ;  // Will delete that
 }); 
```

在这里我的ajax调用

```
function deleteRowFromDB(oTable, sendallproperty){

        var deleteEntryRoute = #{jsRoute @Application.deleteConfigurationEntry() /}
        console.log("route is: " + deleteEntryRoute.url)
        $.ajax({
           url: deleteEntryRoute.url({id: sendallproperty}),
           type: deleteEntryRoute.method,
           data: 'id=' + sendallproperty
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:46:58.460

在您的 Ajax 请求的**成功回调**函数中调用它

```
$.ajax({
         url: deleteEntryRoute.url({id: sendallproperty}),
         type: deleteEntryRoute.method,
         data: 'id=' + sendallproperty.
         success : function() {
             // Your code here
        }
     }); 
```

**编辑**

```
$("body").on('click', ".ui-icon-trash" ,function(){

    var $closestTr = $(this).closest('tr');     
    deleteRowFromDB(oTable, $closestTr);
});

function deleteRowFromDB(oTable, sendallproperty){

   var deleteEntryRoute = #{jsRoute @Application.deleteConfigurationEntry() /}
   console.log("route is: " + deleteEntryRoute.url)
   $.ajax({
           url: deleteEntryRoute.url({id: sendallproperty}),
           type: deleteEntryRoute.method,
           data: 'id=' + sendallproperty,
           success : function() {
             sendallProperty.remove();
           }
   });
}; 
```

也是`{id: sendallproperty}` 一个 jQuery 对象 ..

如果你想传递 id ... 你需要这样做

```
{id: sendallproperty.attr('id')} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:49:32.873

```
$("body").on('click', ".ui-icon-trash" ,function(){

    var $closestTr = $(this).closest('tr');  // This will give the closest tr
                        // If the class element is the child of tr          
    if(true === deleteRowFromDB(oTable, closestTr)){
        //if true returned from the success in the ajax function, then we remove
        $closestTr.remove() ;  // Will delete that
    }

 });

function deleteRowFromDB(oTable, sendallproperty){

    var deleteEntryRoute = #{jsRoute @Application.deleteConfigurationEntry() /}
    console.log("route is: " + deleteEntryRoute.url)
    $.ajax({
       url: deleteEntryRoute.url({id: sendallproperty}),
       type: deleteEntryRoute.method,
       data: 'id=' + sendallproperty,
       success:function(data){
           return true;
       },
       error:function(){
           return false;
       }
    });
} 
```

# c# - Twitter 流过滤器 API：定期获取 IOE 异常

> ID：12983442
> 
> 赞同：0
> 
> 时间：2012-10-19T22:43:58.450
> 
> 标签：c#, twitter, streaming

我正在使用 twitter 流 API (C#) 并定期（每 12 小时或类似的时间）获取 IOE 异常，而 Stream reader 正在尝试读取 JSON 对象（readLine）。请查看异常和下面的代码。任何帮助将不胜感激。先感谢您。

> 无法从传输连接中读取数据：连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应。

```
string userName = "XXXX";
string password = "XXXX";
string url = @"https://stream.twitter.com/1.1/statuses/filter.json";
string parameters = "follow=" + userIds  +"&track=" + keywords;

// Request and Response 
HttpWebRequest webRequest = null;
HttpWebResponse webResponse = null;
StreamReader streamReader = null;
byte[] byteArray;

// Establishing connection with twitter filter.json
byteArray = Encoding.UTF8.GetBytes(parameters);
webRequest = (HttpWebRequest) WebRequest.Create(url);
webRequest.Credentials = new NetworkCredential(userName, password);
webRequest.Timeout = 100000;

Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
webRequest.Method = "POST";
webRequest.ContentType = "application/x-www-form-urlencoded";

byte[] postData = encode.GetBytes(parameters);
webRequest.ContentLength = postData.Length;
Stream twitterPost = webRequest.GetRequestStream();
twitterPost.Write(postData, 0, postData.Length);
twitterPost.Close();

webResponse = (HttpWebResponse)webRequest.GetResponse();
streamReader = new StreamReader(webResponse.GetResponseStream(), encode);

Stopwatch sw = new Stopwatch();
sw.Start();

while (sw.Elapsed < TimeSpan.FromDays(365))
{
    String json = streamReader.ReadLine(); // [The program stop here. throws exception]
    if (json == "")
    {
     continue;
    }
    Packet dataPacket = new Packet() { json = json, id = id++ };
    ThreadPool.QueueUserWorkItem(new WaitCallback(Execute), dataPacket);
 }

// Aborting the request and closing the stream
webRequest.Abort();
sw.Stop();
streamReader.Close();
streamReader = null;
webResponse.Close();
webResponse = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:52:47.773

听起来您的互联网连接中断或您与路由器的连接。

在我的国家，大多数 ISP 每天都会在午夜刷新您的 IP 地址，这会导致连接中断几秒钟，也许您的 ISP 正在做类似的事情？

# sql-server - 一个字段上的 SQL Server 大量更新

> ID：12983444
> 
> 赞同：0
> 
> 时间：2012-10-19T22:44:15.970
> 
> 标签：sql-server, sql-server-2012

我正在构建一个 VoIP 交换机，我将使用 SQL 存储过程进行插入。每次更新历史表时，我都需要更新用户表“余额字段”。由于它是一个开关，我每秒可以进行数百次更新。我想知道在没有死锁和错误信息的情况下更新字段的最佳方法。我将使用 MS sql server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:59:08.697

Partition the user table into evenly sized partitions - SQL 2012 allows 10000 of them. That way the updates are distributed over many allocation units instead of just one. Then add the WITH(ROWLOCK) hint to the update query.

To kick off the actual update you could use a trigger.

# php - 在带有 __isset 和 __get 的不可访问对象上使用空

> ID：12983454
> 
> 赞同：1
> 
> 时间：2012-10-19T22:45:28.090
> 
> 标签：php, getter, magic-methods

```
<?php

class Magic_Methods
{
    protected $meta;

    public function __construct() 
    {
        $this->meta = (object) array(
            'test' => 1
        );
    }

    public function __isset($name) 
    {
        echo "pass isset {$name} \n";

        return isset($this->$name);
    }

    public function __get($name) 
    {
        echo "pass get {$name} \n";

        return $this->$name;
    }
}

$mm = new Magic_Methods();

$meta = empty($mm->meta->notExisting);

var_dump($meta);

echo "||\n";

$meta = empty($mm->meta);

var_dump($meta); 
```

上面的代码片段对我来说没有按预期工作。为什么第一个 empty() 会忽略 __isset？我明白了：

```
pass get meta 
bool(true)
||
pass isset meta 
pass get meta 
bool(false) 
```

我希望得到相同的结果或另一个传递`__isset`，但不是直接调用`__get`. 或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:59:05.920

在这里阅读[http://www.virendrachandak.com/techtalk/php-isset-vs-empty-vs-is_null/](http://www.virendrachandak.com/techtalk/php-isset-vs-empty-vs-is_null/)

*   **isset** () 只关心存在而不关心是否为空
*   **empty** () 考虑数据类型，为了考虑数据，它需要值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:50:15.570

在第一次调用 empty 时，它试图“获取”元数据，以便测试元数据内的“notExisting”是否为空。$meta 只是一个没有魔法方法的通用 std 类，所以你不会得到任何输出（它不调用 Magic_Methods::__get，因为 $meta 不是 Magic_Methods 的实例）。

在第二次调用 empty 时，它会检查 meta 是否已设置，因此 isset 返回 true。正如克劳德里安所说，空取决于值，因此它会尝试“获取”元数据，以便确定该值是否为空。它不是空的，因此空返回 false。如果将第二次调用改为空，改为 isset，它只调用返回 true 的 isset。

# java - 如何将 JSP 页面添加到使用 Jetty 的 Java 应用程序

> ID：12983458
> 
> 赞同：1
> 
> 时间：2012-10-19T22:46:12.653
> 
> 标签：java, jsp, jetty

我们正在构建一个 Java 应用程序，它可以从各种数据源创建报告。为了最终用户的简单性，我们希望通过浏览器提供这些报告，因此我们计划将 Jetty 合并到我们的应用程序中。然而，JSP 页面似乎对我们正在做的事情非常有用。由于我从未使用过 JSP 页面并且到目前为止只创建了一个 Hello World Jetty 示例（尽管我确实有很多其他 Java 经验）我想知道是否有人能够指出我如何正确的方向将 JSP 页面合并到我们的应用程序中。

基本上我想要一个 Java 应用程序来处理所有的数字，然后使用 Jetty 来显示一堆 JSP 页面。这是它应该如何工作还是我在理解中遗漏了什么？

谢谢，哈利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:10:23.453

只是好奇，你为什么选择 Jetty？为什么不使用 Tomcat 或 GlassFish？

您可以让您的应用程序只使用 JSP 页面，但这是不好的做法，也不是创建 Web 应用程序的好方法。JSP 与 Java Servlet 一起工作。基本上 JSP 页面用于视图，servlet 用作控制器。在 servlet 中，您提供所有应用程序的逻辑，在 JSP 页面中，您显示您需要的内容。

我建议您开始阅读有关[servlet](http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)的内容，尝试制作一个 Web 应用程序，了解它是如何工作的，然后您会看到这个解决方案是否适合您想要实现的目标。

# php - 如何在 PHP 中将文件夹中的照片显示到网页上

> ID：12983461
> 
> 赞同：-4
> 
> 时间：2012-10-19T22:46:36.170
> 
> 标签：php, html, dynamic, upload, photo

图片用于将 JPEG、PNG 和 GIF 上传到名为 /originals 的文件夹中的上传链接。然后代码将照片的尺寸标准化为缩略图，并将新的缩略图保存在 /thumbnails 文件夹中。

我现在如何在上传后立即在网页的 6 列表格中以数组的形式显示缩略图照片？

我的 php 块：

```
 <?php

$files = scandir("./."/thumbnails);
$numFiles = count($files);

 if($numFiles < 3)
{
echo "<p>Gallery is empty </p>";
}
else 
{
echo "<p> click thumbnail </p>";
echo "<table><tr>";
for($i = 0; $i < $numfiles -2; $i++)
{
    if($i % $Num_COLUMNS == 0 && $i != 0)
        {
            echo "</tr><tr>";
        }
    echo "<td>";
    echo "<a href='ViewPicture.php?src=".urlencode($files[i +2])."' target='_blank'><img src='".GALLERY_THUMBNAILS.urlencode($files[$i + 2])."' alt='".$files[$i + 2])."' title='".$files[$i + 2]."'/></a>'";
    echo "</td>";
}
echo "</tr> </table>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:48:50.600

使用 PHP 中的[scandir](http://php.net/manual/en/function.scandir.php)函数获取所有文件。然后循环遍历结果并`<img>`为每个文件输出一个标签。

# python - PIL - 用虚拟框识别对象

> ID：12983467
> 
> 赞同：2
> 
> 时间：2012-10-19T22:47:10.543
> 
> 标签：python, image, image-processing, python-imaging-library

我有一个带有黑线轮廓字符的图像（抱歉，出于版权目的无法链接它）。勾勒出人物轮廓的黑线是图片上最暗的东西（计划利用这一事实来帮助找到它）。我需要做的是获得四个坐标，在角色周围绘制一个虚拟框。该框应尽可能小，同时仍将轮廓字符保留在其内容中。我打算使用盒子来帮助通过使用盒子的中心点来确定角色图形的中心点。

我开始尝试识别大纲的各个部分。由于它是图像上最暗的线，我使用 getextrema() 来获取轮廓上的至少一个点，但我不知道如何获取更多点，然后将这些点组合成一个框。

非常感谢任何对此问题的见解。干杯!

*   编辑 *

这就是我现在所拥有的：

```
im = Image.open("pic.jpg")
im = im.convert("L")
lo, hi = im.getextrema()
im = im.point(lambda p: p == lo)
rect = im.getbbox()
x = 0.5 * (rect[0] + rect[2])
y = 0.5 * (rect[1] + rect[3]) 
```

进入人物内部似乎非常一致，但实际上离中心并不那么近。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:53:31.883

1.  找到一个合适的阈值，将轮廓与图像的其余部分分开，可能使用您已经拥有的极值。如果对比度足够大，这应该不会太难，只需将一些值添加到最小值即可。
2.  使用您找到的值对图像设置阈值，请参阅[此问题](https://stackoverflow.com/questions/6485254/how-to-i-use-pil-image-pointtable-method-to-apply-a-threshold-to-a-256-gray-im)。您希望二进制阈值图像中的暗部分变为白色，因此请使用小于阈值 ( `lambda p: p < T`)。
3.  用于 `thresholdedImage.getbbox()`获取轮廓的边界框

# python - import pymongo 导致“ImportError: cannot import name BSON”。你如何修复导入错误？

> ID：12983472
> 
> 赞同：25
> 
> 时间：2012-10-19T22:47:36.713
> 
> 标签：python, mongodb, pymongo, bson

我无法让一个简单的 Hello World 应用程序使用 Flask、MongoDB 和 Python 工作。尝试从`bson`模块导入时，应用程序正在轰炸。所有模块都通过成功安装`pip`并且我正在运行`virtualenv`，所以我不确定为什么会出现错误：`ImportError: cannot import name BSON`

这是我的示例应用程序代码：

```
import os
from flask import Flask
from flask import g
from flask import jsonify
from flask import json
from flask import request
from flask import url_for
from flask import redirect
from flask import render_template
from flask import make_response
import pymongo
from pymongo import Connection
from bson import BSON
from bson import json_util

app = Flask(__name__)

@app.route('/')
def hello():

    connection = Connection()
    # Get your DB
    db = connection.my_database
    # Get your collection
    cars = db.cars
    # Create some objects
    import datetime
    car = {"brand": "Ford",
           "model": "Mustang",
           "date": datetime.datetime.utcnow()}
    # Insert it
    cars.insert(car)
    json_docs = [json.dumps(doc, default=json_util.default) for doc in cars.find()]

    return json_docs

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.debug = True
    app.run(host='0.0.0.0', port=port) 
```

我不确定如何进行调试，或者我在这里是否缺少某些东西。

编辑：结果`pip freeze`：

```
Flask==0.9
Jinja2==2.6
WTForms==1.0.2
Werkzeug==0.8.3
bson==0.3.3
distribute==0.6.28
mongo==0.2.0
pymongo==2.3
pytz==2012g
wsgiref==0.1.2 
```

Edit2：删除了 bson 和 pymongo，重新运行`pip install pymongo`。现在完成跟踪：

```
Traceback (most recent call last):
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
18:21:20 web.1  |     return self.wsgi_app(environ, start_response)
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
18:21:20 web.1  |     response = self.make_response(self.handle_exception(e))
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
18:21:20 web.1  |     response = self.full_dispatch_request()
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/flask/app.py", line 1361, in full_dispatch_request
18:21:20 web.1  |     response = self.make_response(rv)
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/flask/app.py", line 1450, in make_response
18:21:20 web.1  |     rv = self.response_class.force_type(rv, request.environ)
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/werkzeug/wrappers.py", line 711, in force_type
18:21:20 web.1  |     response = BaseResponse(*_run_wsgi_app(response, environ))
18:21:20 web.1  |   File ".../venv/lib/python2.7/site-packages/werkzeug/test.py", line 818, in run_wsgi_app
18:21:20 web.1  |     app_iter = app(environ, start_response)
18:21:20 web.1  | TypeError: 'list' object is not callable 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-19T23:13:03.833

尝试卸载`bson`和`pymongo`包，然后重新安装`pymongo`包。`pymongo`安装它自己的`bson`包，我认为你已经用其他`bson`包安装覆盖了它，这可能是导致你的导入错误的原因。

供参考：

*   当您 pip install pymongo 它也会安装 bson 但它不会打印一条消息说它正在将 bson 安装到您的 virtualenv 站点包
*   pymongo 也没有将 bson 列为 dep
*   pip -v list 也没有显示安装了 bson
*   那些要点 IMO 有一些代码气味（至少打印一条消息，说明您正在安装 bson）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-09-12T00:17:35.093

我遇到了同样的问题。我认为原因是我安装`pymongo`然后安装`bson`. 然后我卸载bson。然后我遇到了这个问题。

`pip freeze pymongo`它什么都不需要。

所以也许它有自己的 bson 包。

我解决这个问题的方法：

`pip uninstall pymongo`

`pip uninstall bson`

然后重新安装pymongo

`pip install pymongo`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T23:30:47.070

您正在返回一个列表`hello()`。您需要返回一个字符串或一个 Response 对象，请参阅[Flask 文档](http://flask.pocoo.org/docs/quickstart/#about-responses)。例如，在返回之前将列表转换为字符串：

```
return '\n'.join(json_docs) 
```

# svn - 无法从 SVN 中删除我的文件夹

> ID：12983473
> 
> 赞同：1
> 
> 时间：2012-10-19T22:47:51.247
> 
> 标签：svn, tortoisesvn

我正在尝试从 SVN 中完全删除我的文件夹。正如这里的一些人提到的，我右键单击我的文件夹 -> TortoiseSVN -> 删除。然后，从父文件夹中我做了 Commit。这从我的文件系统中删除了它，但它仍然存在于 SVN 存储库中。我通常在删除文件夹时没有任何问题，所以我不确定发生了什么......

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:59:29.793

听起来你已经正确地完成了这个过程。

右键单击 -> TortoiseSVN -> 删除。然后提交更改。如果这还没有从您的存储库中删除该文件：

1.）我会尝试更新到早期版本，然后重复。2.）重新启动系统并重复上述操作。3.）删除所有文件，然后重新添加它们。

如果这些都不起作用，请尝试更新到最新版本的 SVN（如果还没有的话），然后重复上述步骤。这最近发生在我身上，希望我能准确地告诉你我做了什么（除了所有这些修补之外）让它再次工作。

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:01:06.223

右键单击您的文件夹，选择 Repo-Browser 并直接从您的存储库中删除该文件夹。

# php - 使用 .htaccess RewriteRule 解释多个 $_GET 变量

> ID：12983475
> 
> 赞同：0
> 
> 时间：2012-10-19T22:48:05.730
> 
> 标签：php, regex, .htaccess, url

> **可能重复：**
> [不遵守规则时，Mod 重写和使用 PHP 的 GET 获取 URL](https://stackoverflow.com/questions/6814977/mod-rewrite-and-using-phps-get-for-urls-when-not-following-the-rules)

这几天我一直在摸不着头脑……我有一个实例，其中 URL 需要在`$_GET`字符串上传递不同的变量。

我正在寻找解析以下网址：

```
http://www.domain.com/1/count/?var1=a&var2=b 
```

基本上，我需要将其解析*`count`*为一个`$_GET['var3']`变量以及附加在斜杠 ( *`?var1=a&var2=b`*) 之后的其他附加变量。

我已经尝试了以下以及许多其他选项，但它导致了 404：

```
RewriteRule ^1/(count|list|detail)$/$ /1/service.php?method=$1
RewriteRule ^1/(count|list|detail)$/$ /1/service.php?method=$1&$2? 
```

我搜索了许多文档和答案，但我找不到适用的答案并承认，这让我慢慢发疯！

任何帮助都将被亲切地接受和感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:54:14.333

您想使用 [QSA]，查询字符串追加。[在这里](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)阅读。如果这是您在浏览器中想要的：

`http://www.domain.com/1/count/?var1=a&var2=b`

你应该把它放在你的 htaccess 文件中

`RewriteRule ^(count|list|detail)/$ /service.php [QSA]`

我从您上面的规则中删除了一些东西，不知道您的系统，我不确定它们的用途。`1`和副本是`$`干什么用的？

此规则将发送`domain.com/count/?t=5`到`domain.com/service.php?t=5`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:14:31.587

```
RewriteRule ^/?1/(count|list|detail)/?$ /1/service.php?method=$1 [QSA] 
```

# exception-handling - WCF 服务的企业库异常处理问题

> ID：12983476
> 
> 赞同：0
> 
> 时间：2012-10-19T22:48:08.743
> 
> 标签：exception-handling, enterprise-library

我的应用程序由 3 层组成，非常简单。

*   具有所有业务逻辑的类库
*   公开类库的 WCF 服务
*   asp.net 网页界面。

在类库层，我定义了一个企业库异常处理策略，以便将所有异常记录到数据库中。在底层代码中，异常被抛出，它们合并到外观上。在外观中，我触发 EL 策略来记录错误，然后在响应中切换一个 sucessStatus 布尔值，并有一个方法将我的所有异常转换为友好列表，以便最终消费者可以通过它来了解任何想法发生了什么。

我的类库中的外观看起来像这样：

```
public SomeResponse DoSomething(SomeRequest request)
        {   
        SomeResponse response = new SomeResponse();
            try
            {
                response.data = SomeOperationThatWillThrowAnException;
            }
            catch (InvalidOperationException ex)
            {
                var exceptionManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
                exceptionManager.HandleException(ex, "StandardPolicy");
                response.Errors.Add(Utility.ExceptionToError(ex));
                response.SuccessStatus = false;
            }
        return response;
    } 
```

如果我构建一个简单的 winform 客户端并让它与我的类库对话，这将有效。

但是，当我使用完整堆栈时，我得到“用户代码未处理错误异常”。我似乎无法以任何方式在 WCF 层配置 EL 以防止这种情况发生。

我的 WCF 服务只是我的类库外观的一个简单包装器。

```
public SomeResponse DoSomething(SomeRequest request)
{
    return new MyFacade.DoSomething(request);
} 
```

我想要的是让类库静默处理错误，而不是在 WCF 或 UI 级别触发任何异常。我希望消费者（在本例中为 ASP.NET Webform UI）必须检查响应消息内容以了解发生了什么，而不是让异常停止执行死在其轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:15:12.420

您的配置文件中可能有错误，导致 GetInstance() 或 HandleException() 抛出异常。您是否尝试过调试 WCF 服务？

# java - 无法理解 Java 映射条目集

> ID：12983478
> 
> 赞同：2
> 
> 时间：2012-10-19T22:48:13.793
> 
> 标签：java, dictionary, iteration

我在这里看一个 java 刽子手游戏：[https ://github.com/leleah/EvilHangman/blob/master/EvilHangman.java](https://github.com/leleah/EvilHangman/blob/master/EvilHangman.java)

特别是代码是这样的：

```
Iterator<Entry<List<Integer>, Set<String>>> k = partitions.entrySet().iterator();
while (k.hasNext())
{
    Entry<?, ?> pair = (Entry<?, ?>)k.next();
    int sizeOfSet = ((Set<String>)pair.getValue()).size();
    if (sizeOfSet > biggestPartitionSize)
    {
        biggestPartitionSize = sizeOfSet;
    }
} 
```

现在我的问题。我猜我的 google foo 很弱，除了 java doc 本身之外，我在 Entry 集上找不到太多东西。难道只是地图的临时副本？而且我根本找不到任何关于语法的信息：

```
Entry<?, ?> 
```

谁能解释或指出我对这些问号发生了什么的解释？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:58:29.950

An`entrySet`是 Map 中所有 Entries 的集合 - 即 Map 中所有键值对的集合。因为 Map 由键、值对组成，所以如果要对其进行迭代，则需要指定是要迭代键、值还是两者（条目）。

`<?,?>`表示该变量`pair`包含一个条目，其中键和值可以是任何类型。这通常表明我们不在乎它持有什么类型的值。在您的代码中，情况并非如此，因为您需要将值转换为，`Set<String>`以便检查其大小。

您还可以按如下方式重写代码，避免强制转换为`Set<String>`

```
Iterator<Entry<List<Integer>, Set<String>>> k = partitions.entrySet().iterator();
while (k.hasNext())
{
Entry<?, Set<String>> pair = (Entry<?, Set<String>>)k.next();
int sizeOfSet = pair.getValue().size();
if (sizeOfSet > biggestPartitionSize)
{
     biggestPartitionSize = sizeOfSet;
} 
```

当我们需要更具体地了解 Entry 所持有的类型时，我们可以使用完整类型：`Entry<List<Integer>, Set<String>>`。这避免了将键或值转换为特定类型的需要（以及转换为错误类型的风险）。

您还可以仅指定键的类型或值，如我上面的示例所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:54:22.553

您可以在 Javadoc 中找到有关 Entry 的信息：http: [//docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)

部分是因为`<?, ?>`Entry 是一个通用接口。

更多信息在`?`这里：[http ://docs.oracle.com/javase/tutorial/java/generics/wildcards.html](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)

话虽如此，这个例子中的用法并不是很好。获取 sizeOfSet 的一种更简洁的方法：

```
int sizeOfSet = k.next().getValue().size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:53:55.997

您不应该对 entrySet() 函数返回有太多了解。您可以依赖的只是它是一个`Set<Map.Entry<x,y>>`. 它可能是一个相当特殊的 (*) 副本，但它更有可能是一个提供原始`Map`.

在现代 Java 中，这类事情通常写成：

```
for (Map.Entry<X, Y> me : map.entrySet()) {
   // code that looks at me.xxx() here
} 
```

在您的示例中， X,Y 是`List<Integer>, Set<String>`。

(*) 文档说，“集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。”

感谢@Miserable 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T23:15:55.250

```
Entry<?, ?> 
```

> 谁能解释或指出我对这些问号发生了什么的解释？

我可能是错的，但我认为程序员试图偷懒。应该是

```
Entry<List<Integer>, Set<String>>> 
```

**那么不需要任何演员表**

还：

> 我猜我的 google foo 很弱，除了 java doc 本身之外，我在 Entry 集上找不到太多东西。难道只是地图的临时副本？

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)有你需要的一切（强调我的）：

*   返回此映射中包含的映射的 Set 视图。set**由 map 支持**，因此对 map 的更改会反映在 set 中，反之亦然。
*   如果在对集合进行迭代时修改了映射（除了通过迭代器自己的删除操作，或通过迭代器返回的映射条目上的 setValue 操作），则迭代的结果是未定义的。
*   该集合**支持**元素**移除**，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。
*   它**不支持**add**或**addAll**操作**。

您还在寻找什么更多信息？

# asp.net-mvc-3 - MVC3 多个选项卡返回具有不同数据的部分视图

> ID：12983485
> 
> 赞同：2
> 
> 时间：2012-10-19T22:49:20.943
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, jquery-tabs

我的视图中有几个选项卡并且有部分视图。

局部视图包含一个 web 网格。根据所选的选项卡，网格必须加载特定的数据。

使用 RenderAction 返回局部视图。但是当我发布我的观点时，我遇到了溢出异常。

这是我的代码。

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Sage Pay</a></li>
        <li><a href="#tabs-2" >Pay Pal</a></li>
    </ul>
    <div id="tabs-1">
        @{Html.RenderAction("SagePayPayments", "OrderProcessing");}
    </div>
    <div id="tabs-2">
        @{Html.RenderAction("PayPalPayments", "OrderProcessing");}
    </div> 
```

我的控制器是

```
public ActionResult PayPalPayments()
    {
        var model = new OrderContext().GetNewPayments(PaymentType.PayPal);
        return PartialView("_PaymentsToVerify", model);
    }

    public ActionResult SagePayPayments()
    {
        var model = new OrderContext().GetNewPayments(PaymentType.SagePay);
        return PartialView("_PaymentsToVerify", model);
    }

    [HttpPost]
    public ViewResult VerifyPayments(FormCollection formData)
    {
        var context = new OrderContext();
        var orderIds = formData.GetValues("chkSelected");
        if (orderIds != null)
        {
            IList<long> selectedOrders = orderIds.Select(orderId => Convert.ToInt64(orderId)).ToList();
            context.VerifyPayments(selectedOrders);
        }
        return View("Unverified");
    } 
```

有人可以帮助我我所缺少的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:47:48.483

我们似乎专注于对这个问题的看法，但我怀疑这是问题所在。

您正在将一个值转换为一个 long，如果它计算的值超过 long.MaxValue 或小于 long.MinValue，这可能会引发溢出异常。

我会说，将此位放在 try catch 块中并尝试再次运行您的代码，然后检查您要转换的值是什么，并从那里解决真正的问题。

# java - 是否可以修改 OSCeleton 发送 lost_user 事件/消息的时间？

> ID：12983486
> 
> 赞同：1
> 
> 时间：2012-10-19T22:49:29.757
> 
> 标签：java, processing, osc

我正在玩[OSCeleton](https://github.com/Sensebloom/OSCeleton)和[Processing](http://processing.org)并成功地跟踪骨架并做一些事情。

**我想知道是否有任何方法可以更改将“lost_user”消息发送到处理的延迟时间。** 这需要很长时间才能实现我想要实现的目标，因为我需要在用户离开屏幕后立即停止跟踪，这样我就可以接受另一个用户的交互。（想象一个很多人都想玩的装置）。

任何帮助/提示将不胜感激。

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:28:41.217

据我从 OSCeleton 的源代码和我对 kinect 的最少经验（我从未使用过 OSCeleton）可以看出，没有办法修改该代码来做到这一点。这似乎是由驱动程序或 kinect 自身（？）处理的甚至更低的事情。

但是，您不必为此束缚自己，如果我理解正确，我会建议几种绕过问题的方法。

首先，最新的驱动程序和示例应该支持多用户，这意味着您可以只安排谁是您的主要用户。从我可以从源代码中得知，当检测到新用户以及 ID 号时，您确实会在处理中收到一条 osc 消息。您可以将每个到达的新用户放入一个 arrayList 中，并找出一种不依赖最新用户的方法来做事。

如果您仍然在追求用户后的用户，或者我误解了多用户支持（自述文件中没有提到），您可以检查自己是否有用户离开了该区域。尽管您无法获得这样的明确答案，但您可以检查例如，用户的特定关节或所有关节是否在最近收到的 10-20 条 osc 消息中移动。这可能意味着将这个关节的位置存储在一个 10-20 项数组中并不断更新，同时还要检查项是否不同。如果数组中的所有项目都相同，则您的用户没有移动一点，因此可能不应该考虑在内。

最后但同样重要的是，您可以切换到其他解决方案。我大约一年前使用的是“ [Synapse for Kinect](http://synapsekinect.tumblr.com) ”，现在看起来也过时了。您可以使用的最新版本是一个名为[SimpleOpenNI](http://code.google.com/p/simple-openni/)的处理库，它绝对具有多用户跟踪功能，您不需要运行任何中间程序来为您提供关节。

我希望这有帮助

# c# - Windows8 WinRT 的 IsConnectedToNetwork 失败

> ID：12983497
> 
> 赞同：0
> 
> 时间：2012-10-19T22:50:13.477
> 
> 标签：c#, windows-8, windows-runtime

有人知道查看用户是否在线/离线的好方法吗？当我使用 public static bool IsConnectedToNetwork(); 看看它是否是假/真的，它似乎总是正确的，即使我关闭了我的互联网来测试它......

我错过了什么吗？

```
public static bool nets()
{
    bool go = 
        System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable();

    if (go == false)
    {
        return false;  
    }
    return true;
} 
```

现在，在我的启动中，我运行：

```
var ba = nets();

if (ba == false)
{
    txtHeader.Text = "err";
}
if (ba != false)
{
    // Code
} 
```

我也试过：

```
 public static bool IsConnectedToNetwork(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:36:29.087

我用

```
public static bool IsConnectedToInternet()
{
    ConnectionProfile connectionProfile = NetworkInformation.GetInternetConnectionProfile();
    return (connectionProfile!=null && connectionProfile.GetNetworkConnectivityLevel() == NetworkConnectivityLevel.InternetAccess);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:56:51.520

您可以 ping 少数众所周知的 URL 之一，看看您是否得到响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:06:26.960

我有一种方法似乎工作得相当不错，特别是注意到有时以太网似乎正在使用，即使它不在 Windows 8 RTM 中......这就是为什么似乎没有任何工作！

但是，执行以下操作对我来说是一个不错的选择来测试...

```
 var profile = Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile();

         var interfaceType = profile.NetworkAdapter.IanaInterfaceType;
            // 71 is WiFi & 6 is Ethernet
            if (interfaceType == 71 | interfaceType == 6) 
            {
              // Run Code
            }
            /* 3G/Mobile Detect
            else if (interfaceType == 243 | interfaceType == 244)
            {
              // Run Code if you need to use a less quality feature.
            }*/
            else
            {
                txtHeader.Text = "Error, Check connection or Try connecting to the Internet...";
            } 
```

# magento - Magento - 如何设置倒计时：在购物车中添加 $XX 并获得免费送货

> ID：12983499
> 
> 赞同：0
> 
> 时间：2012-10-19T22:50:26.303
> 
> 标签：magento, checkout, cart, shipping

如何在 Magento 购物车中为免费送货金额添加倒计时？我希望在我的 Magento 电子商务网站上通过我的购物车添加一小段代码，这将告诉我的客户他们需要购买多少才能获得免费送货。例如，我为所有超过 100 美元的订单提供免费送货，并且客户已将价值 60 美元的产品添加到购物车中 - 然后我想输出“只需再添加 40 美元并获得免费送货”，然后当我们达到 100 美元时基准，回声将变为“我们将免费运送您的订单！”

有谁可以解决这个问题？我已经搜索了两天了，根本不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:41:45.550

构建扩展，获取购物车价值

```
$this->helper('checkout')->formatPrice(Mage::getSingleton('checkout/cart')->getQuote()->setSubtotalWithDiscount()); 
```

添加一个配置变量或要检查的东西，你就有了你的价值。

如果你需要帮助，有很多人可以为你做，我也一样。包括发票:-)

# java - 将图像插入布局，然后意图用于电子邮件应用程序

> ID：12983504
> 
> 赞同：1
> 
> 时间：2012-10-19T22:51:12.633
> 
> 标签：java, android, image, email, android-intent

好的，所以我想看看是否可以完成。所以我有一个基本的申请表提交。用户可以在其中填写一些信息，例如支持请求。这包括几个编辑文本和视图文本。然后它有一个小的文本构建器代码，用于将文本合并在一起并将意图发送到 android 系统以通过电子邮件输出。

所以我想知道的是如何将图像添加到这个因素中。

```
 public void onClick(View v) {
        String[] recipients = new String[]{"email@email.com", "email@email.com",};
          String subject = textSubject.getText().toString();
          String message = "Name:\n" + nametext.getText().toString();
          message += "\n\nEmail:\n" + emailtext.getText().toString();
          message += "\n\nContact#:\n" + phonetext.getText().toString();
          message += "\n\nTopic:\n" + topictext.getText().toString();
          message += "\n\nDescription:\n" + detailstext.getText().toString();
          message += "\n\n" + sentby.toString();

          Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);
          //email.putExtra(Intent.EXTRA_CC, new String[]{ to});
          //email.putExtra(Intent.EXTRA_BCC, new String[]{to});
          email.putExtra(Intent.EXTRA_SUBJECT, subject);
          email.putExtra(Intent.EXTRA_TEXT, message);

          //need this to prompts email client only
          email.setType("message/rfc822");
          //plain text
          email.setType("text/plain");

          startActivity(Intent.createChooser(email, "Choose an Email client  :"));
          finish();

        }
    }); 
```

因此，这里是字符串构建器代码的示例代码，用于合并在 xml 布局文件的编辑文本表单中键入的内容。

现在我想知道该怎么做，我需要什么代码在我的 xml 布局上添加一个插入图像按钮，从用户的文件管理器或画廊应用程序中选择图像的代码，然后我如何将它添加到通过电子邮件发送的总体意图。

任何建议、反馈、源代码示例和任何帮助都会有所帮助。提前致谢。

## 更新

我找到了下面的代码，想知道是否有人使用过它，以及它是否可以在我上面的代码中工作。

```
 sendIntent.putExtra(Intent.EXTRA_STREAM, "file:///sdcard/mysong.mp3"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T13:28:52.280

你需要使用 android.net.Uri

```
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/mysong.mp3")); 
```

将文件附加到电子邮件是可行的。

# c++ - C++ - 我的循环一直加到 0

> ID：12983507
> 
> 赞同：0
> 
> 时间：2012-10-19T22:51:55.960
> 
> 标签：c++, loops, for-loop

到目前为止，这是我的代码

```
#include <iostream>
using namespace std;

int main ()
{
int num1 = 0;
int num2 = 0;
int sum = 0;

for(num2 = num1; num1 <= num2; num1 +=2) sum += num1;
    num1 = num1 / 2 == 0? num1 : num1 + 1;
    num2 = num2 / 2 == 0? num2 : num2 - 1;

cout << "Enter the First Number:" << endl;
cin >> num1;
cout << "Enter the Second Number:" << endl;
cin >> num2;
cout << "Total Sum: " << sum << endl;
  } //end for 
```

但总和不断加起来为0：/

这就是问题所在。

创建一个程序，显示用户输入的两个数字之间的偶数之和，包括两个数字。换句话说，如果用户输入一个偶数，该数字应该包含在总和中。例如，如果用户输入整数 2 和 7，则总和为 12 (2 + 4 + 6)。如果用户输入整数 2 和 8，则总和为 20 (2 + 4 + 6 + 8 )。如果用户输入的第一个整数大于第二个整数，则显示错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:56:30.803

You need to calculate the sum *after* getting the input!

But your whole calculation and loop usage is wrong. Here it's fixed:

```
#include <iostream>
using namespace std;

int main ()
{
    int num1 = 0;
    int num2 = 0;
    int sum = 0;

    cout << "Enter the First Number:" << endl;
    cin >> num1;
    cout << "Enter the Second Number:" << endl;
    cin >> num2;

    if (num1 % 2 == 1) num1 += 1;
    if (num2 % 2 == 1) num2 -= 1;

    while (num1 <= num2) {
        sum += num1;
        num1 += 2;
    }

  cout << "Total Sum: " << sum << endl;
} 
```

Note the following:

1.  `%` returns modulus - `num1 % 2 ==1` implies that `num1` is odd. I took out your ternary `?:` operators not because they're bad, but just because `if` is easier to read and in this case you're not doing anything if `num1` is even.

2.  You were setting `num2` at the start of your for loop. A `while` loop makes more sense in this situation, or a `for` loop without initialization `for (;num1<=num2; num1+=2) {`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:03:30.010

代码是按顺序执行的，for循环初始化会让你失去循环的边界考虑这个代码。

```
#include <iostream>
using namespace std;

int main ()
{
    int num1 = 0;
    int num2 = 0;
    int sum = 0;

    cout << "Enter the First Number:" << endl;
    cin >> num1;
    cout << "Enter the Second Number:" << endl;
    cin >> num2;

    if (num1 > num2) // swap the numbers and do not print error message
    {
        int temp = num1;
        num1 = num2;
        num2 = temp;
    }
    //make sure to start from even number
    num1 = num1 % 2 ? num1+1 : num1;

    for(; num1 <= num2; num1 +=2) 
        sum += num1;    
    cout << "Total Sum: " << sum << endl;
  } //en 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T23:06:08.417

虽然作业（我假设）应该由您解决，但这里有一些提示可以帮助您：

1）您的 for 循环需要在应该循环的代码周围使用大括号：

```
for(num2 = num1; num1 <= num2; num1 +=2)
{
    sum += num1;
    num1 = num1 / 2 == 0? num1 : num1 + 1;
    num2 = num2 / 2 == 0? num2 : num2 - 1;
} 
```

2）您的循环在您的`cout`and`cin`语句之上，因此它在用户输入任何数字之前运行。您需要将循环移动到用户已将数字提供给程序之后（下方）。

3）循环的逻辑可能不是你想要的。添加大括号后，这就是它正在做的事情（在“伪代码”中）：

```
Let num2 equal num1 // Both are set to zero so this doesn't do anything
While num1 is less than or equal to num2:
{
    Add the current value of num1 to sum.
    if num1 /2 (ignoring remainder) is 0, then set num1 equal to itself. Otherwise, add 1 to it.
    // num1 already equals itself, so this doesn't do anything when num1 / 2 is zero.
    // 
    if num2 /2 (ignoring remainder) is 0, then set num1 equal to itself. Otherwise, subtract 1 from it.
    Add 2 to num1.
} 
```

除非作业另有说明，否则最好不要使用三元 (? 和 :) 语法，因为当您刚开始编程时它会非常混乱（至少，我是这么认为的）。

C++ 是一门具有挑战性的语言学习，但坚持下去！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T23:40:47.667

1.) 获取数字 2.) 确定最大值和最小值 3.) 求和之间的偶数

```
#include <iostream>
using namespace std;

void main()
{
   int num1 = 0;
   int num2 = 0;
   int sum = 0;
   int temp = 0;
   int i;

   //Get your input values
   cout << "Enter the First Number:" << endl;
   cin >> num1;
   cout << "Enter the Second Number:" << endl;
   cin >> num2;
   cout << endl;    

   //just to reorganize and make num1 the smallest of the two
   if ( num2 << num1 )
   {
       temp = num1;
       num1 = num2;
       num2 = temp;
   }    

   //loop through and add even values
   for(i = num1; i < num2; i++)
   {
       if(i%2 == 0)
       {
           sum = sum + i;
       }
   }

   cout << "Sum: " << sum << endl;
} 
```

# css - Mobile Safari -webkit-gradient iOS5/6 不一致

> ID：12983508
> 
> 赞同：3
> 
> 时间：2012-10-19T22:52:03.807
> 
> 标签：css, ios6, mobile-safari

我注意到 iOS5 和 iOS6 上的 Mobile Safari 处理 -webkit-radial-gradient 的方式不一致，我想在 webapp 中进行纠正。

举个例子：

```
div {
    width:100%;
    height:100%;
    background-color: black;
    background-image: -webkit-radial-gradient(center center, circle cover, rgba(255,255,255,1), rgba(0,0,0,0) 75%);
    position:absolute;
} 
```

应用于

```
<div>&nbsp;</div> 
```

可查看/可编辑：http: [//jsfiddle.net/kJ8z3/3/](http://jsfiddle.net/kJ8z3/3/) 对于移动设备： http: [//fiddle.jshell.net/kJ8z3/3/show/](http://fiddle.jshell.net/kJ8z3/3/show/)

出于某种原因，iOS6 上的渐变“更强”。

*   [iOS6 截图](http://dl.dropbox.com/u/93587851/Photo%20Oct%2019%2C%203%2031%2015%20PM.png)（iPad 2，WebKit 536.26）
*   [iOS5 截图](http://dl.dropbox.com/u/93587851/Photo%20Oct%2019%2C%203%2031%2019%20PM.png)（iPad 1，WebKit 534.46）

桌面上的 Google Chrome (WebKit 537.4) 或 Safari (Webkit 534.57.2) 的更新版本会产生更类似于 iOS5 的渐变，因此它可能不是直接的 WebKit 问题。

两种设备都报告了 32 位颜色深度 (screen.colorDepth)，但是来自 iOS5 的渐变似乎显示了条带指示性伪影或较低的颜色深度。谷歌浏览器报告 32 位深度，但比桌面 Safari 有更多条带，后者只报告 24 位颜色深度。

知道发生了什么吗？或者更重要的是，从实际的角度来看，我如何调和两者之间的差异？我想要一个相同渲染的径向渐变，alpha 透明度从白色渐变为透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:01:34.753

在我看来，它似乎全面“有效”。这只是它在操作系统、设备等之间工作得如何的问题。为了帮助解决 Photoshop 中的条带问题，在渐变中添加第三种，有时是第 5 种颜色对视觉效果有很大帮助。它减少了程序负责的颜色转换量（它确实必须计算它们......）。

无论如何，我在你的渐变中添加了第三种颜色，它使事情变得更加紧密。 [http://fiddle.jshell.net/8U46E/](http://fiddle.jshell.net/8U46E/)

如果您不是 Photoshop 专家/gal，此站点可能会有所帮助：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# c# - 改进的演示文稿和标点符号

> ID：12983515
> 
> 赞同：1
> 
> 时间：2012-10-19T22:52:38.230
> 
> 标签：c#, wpf, xaml

我在网格中有一个网格。无论窗口大小如何，我都希望它能够利用最大大小：

*   Main_Grid 应该是最大宽度
*   Grid_tool_bar 应该是最大宽度

但实际上并非如此，我无法找到原因。这是代码：

```
<Window x:Class="SocialNetworkingApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Background="White" WindowStyle="None" HorizontalAlignment="Stretch" WindowState="Normal" AllowsTransparency="True" WindowStartupLocation="CenterScreen">
    <Border Margin="0,0,0,0" BorderBrush="Black" BorderThickness="1,1,1,1" >
        <Grid x:Name="Main_Grid" Background="White" Width="Auto" Height="Auto" Margin="0,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="25"/>
                <RowDefinition Height="50"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="20"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid Name="Title_Bar" Grid.Row="0" VerticalAlignment="Top" ShowGridLines="True" Grid.IsSharedSizeScope="True" MouseDown="Drag_Window" Background="#FF4FA2DA" HorizontalAlignment="Left" Width="766" Height="31">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120" />
                </Grid.ColumnDefinitions>
            </Grid>
        </Grid>
    </Border>
</Window> 
```

![](../Images/cd71e36b1b42da41cbdb07585c7e0792.png)

通过最小化属性来解决

```
<Window x:Class="SocialNetworkingApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Background="White" WindowStyle="None"  WindowState="Normal" AllowsTransparency="True" WindowStartupLocation="CenterScreen">
    <Border Margin="0,0,0,0" BorderBrush="Black" BorderThickness="1,1,1,1" >
        <Grid x:Name="Main_Grid" Background="White" >
            <Grid.RowDefinitions>
                <RowDefinition Height="10" />
                <RowDefinition Height="20"/>
                <RowDefinition Height="40"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="20"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid Name="Title_Bar" Grid.Row="0" Height="Auto" Background="#FF4FA2DA" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120" />
                </Grid.ColumnDefinitions>
            </Grid>
        </Grid>
    </Border>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:58:24.630

```
 <Grid Name="Title_Bar" Grid.Row="0" ... Width="766" Height="31"> 
```

如果您希望它自动调整，请**不要**指定宽度。只需删除该属性。

编辑：也删除`HorizontalAlignment="Left"`设置器。至少对于外部网格。

# python - How to declare ports in Cloud9 using Python

> ID：12983518
> 
> 赞同：6
> 
> 时间：2012-10-19T22:53:05.490
> 
> 标签：python, port, twisted, cloud9-ide

I'm new to using [Cloud9 IDE](http://c9.io) (c9) and so far it looks great, except a few minor things.

I see from the docs that to start up a simple node.js http server, you have to pass in process.env.PORT in place of the regular port such as "8080".

Node Hello World [example](https://docs.c9.io/writing_nodejs_hello_world.html):

```
 var http = require('http');
 http.createServer(function (req, res) {
     res.writeHead(200, {'Content-Type': 'text/plain'});
     res.end('Hello World\n');
 }).listen(process.env.PORT, process.env.IP); 
```

What I want to know is, on c9, can you only start services on ports using javascript / node.js? Or do other languages work just as well, perhaps with some other method of passing the port? Specifically python + Twisted?

I uploaded some twisted code that was working locally for me, but wouldn't work on c9 because it was trying to access local ports (which are already in use). Here is the error

```
twisted.internet.error.CannotListenError: Couldn't listen on any:8080: [Errno 98] Address already in use. 
```

How would one make the following example work, if even possible, running on c9?

Python+Twisted Hello World [example](http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html)

```
from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "<html>Hello, world!</html>"

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run() 
```

Initial searches through the [documentation](https://docs.c9.io/) and github [issues](https://github.com/ajaxorg/cloud9/issues) did not turn much up. I'm hoping this is possible and I just missed the right parameter to pass.

* * *

Edit: Updated output below

Node Code

```
console.log(process.env.PORT)
console.log(process.env.IP) 
```

Terminal output

```
Running Node Process
Tip: you can access long running processes, like a server, at 'http://private-cloud.mrchampe.c9.io'.
Important: in your scripts, use 'process.env.PORT' as port and 'process.env.IP' as host.
8080
127.6.70.129 
```

Python Code

```
import os

print os.environ["PORT"]
print os.environ["IP"] 
```

Terminal output

```
Running Python Process
8080
127.6.70.129 
```

Twisted code

```
import os
import twisted

from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "<html>Hello, world!</html>"

site = server.Site(Simple())

reactor.listenTCP(int(os.environ["PORT"]), interface=os.environ["IP"])
reactor.run() 
```

Terminal Output

```
Running Python Process
hello world
Traceback (most recent call last):
  File "python/hello.py", line 17, in <module>

reactor.listenTCP(int(os.environ["PORT"]), interface=os.environ["IP"])
TypeError: listenTCP() takes at least 3 non-keyword arguments (2 given) 
```

The [listenTCP](http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.interfaces.IReactorTCP.listenTCP.html) TypeError is strange because 2 arguments works locally but not on Cloud9\. I don't see why using these arguments does not work.

I have the above code hosted on [this](https://c9.io/mrchampe/python-twisted) public Cloud9 project for anyone to take a look. Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T01:32:31.370

`process.env.PORT` and `process.env.IP` from Node.js [sound like](http://nodejs.org/api/process.html#process_process_env) `os.environ["PORT"]` and `os.environ["IP"]` in Python. Perhaps you can try:

```
reactor.listenTCP(int(os.environ["PORT"]), site, interface=os.environ["IP"]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:43:15.613

Probably this is limitation of c9 environment management, so users dont abuse their service too much. I would assume that they have some level of management for Node.js used resources and thus allow these to open ports.

If this was the case and I **had** to work with cloud9, I would probably approach this as follows: - create Node.js service which would act as a proxy, listening on twisted behalf - create new reactor with overriden listenTCP and listenUDP methods, which would bind these to Node.js proxy service.

The way how proxy would work is as follows, Node.js would initially listen on one "management" TCP port. Then, when twisted service starts up, it would create a TCP connection between Node.js and itself through that port. Then, whenever listenTCP or listenUDP is called, these commands would then be dispatched to Node.js service, which in return would open the port and all of the comunication through that port would then be proxied to twisted through that existing TCP connection.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T22:55:51.707

It's worth mentioning that Jean-Paul's answer worked for me as well, but I had to use 'address' instead of 'interface':

```
http_server.listen(int(os.environ.get("PORT")), address=os.environ["IP"]) 
```

# c++ - 每个选项卡只看到一次 onload 事件

> ID：12983520
> 
> 赞同：1
> 
> 时间：2012-10-19T22:53:19.193
> 
> 标签：c++, internet-explorer, bho

我有一个监听 onload 事件的 BHO。这是在每个 BeforeNavigate2 事件中运行的代码（简化）：

```
CComQIPtr<IWebBrowser2> pBrowser(pDisp);

CComPtr<IDispatch> pUnk = NULL;
HRESULT hr = pBrowser->get_Document(&pUnk);

CComQIPtr<IHTMLDocument2> pHtmlDoc2(pUnk);

CComQIPtr<IHTMLWindow2> pWindow2;
pHtmlDoc2->get_parentWindow((IHTMLWindow2**) &pWindow2);

CComQIPtr<IHTMLWindow3> pWindow3(pWindow2);

VARIANT_BOOL result = VARIANT_TRUE;
CComBSTR onEvent(TEXT("onload"));
pDomEvent = new Page::DOMLoaded();

pWindow3->attachEvent(onEvent, pDomEvent, &result); 
```

（我已删除所有检查以简化）

第一个页面会触发 onload 事件，但之后访问的页面不会触发。我找不到我错过了什么，或者做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:38:50.423

BeforeNavigate 这样做可能还为时过早。在第二次和随后的电话中，我怀疑您正在使用旧窗口。请改用 NavigateComplete2。

# c - g-wan 更新 servlet

> ID：12983523
> 
> 赞同：1
> 
> 时间：2012-10-19T22:53:47.713
> 
> 标签：c, servlets, g-wan

我注意到截至 2012 年 10 月 19 日的 g-wan 用户手册 pdf 文档， [http](http://gwan.ch/download) ://gwan.ch/download 它说：

> 更新 servlet（C、C++ 等） 当您需要添加或更新位于 csp 目录中的 servlet 时，您可以在不停止 G-WAN 的情况下执行此操作（所有缓存文件都会实时更新）。

然而，当我启动 gwan 时，它似乎编译了 csp 目录中的所有内容。在具有 1000 个 .c 文件的系统上，这将是非常难看的。无论如何，我尝试更新 hello.c 文件只是为了看看会发生什么。当我再次访问它时，更改不会发生。我必须重新启动服务器。另外，如果我放入一个新的 servlet，比如 hello2.c，我会得到“在这个服务器上找不到请求的 URL”。直到我重新启动服务器？

是什么赋予了？

G-WAN 3.3.28 64-bit (Mar 28 2012 11:24:16) - 我在 2012 年 10 月 19 日的下载中看到的最新版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:28:25.397

这对我有用。我正在运行 CentOS。我能找到的唯一问题是头文件没有更新。

我似乎无法复制你所经历的。你在什么操作系统上？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:22:19.387

吉尔找到了答案。这是权限。（对于像我这样的 linux 新手） csp 目录必须与 gwan 服务器的启动方式具有相同的所有者/组。

> sudo ./gwan -d:www-data:www-data

如果按上述方式启动，csp 目录还必须是 www-data 作为所有者和组以及实际的 servlet 文件。就我而言，它是 hello.c 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T01:40:38.027

仅适用于应该很快的下一个版本，我相信版本 3.10.x。搜索标签“g-wan”，您将看到其他提到新版本的线程。

# html - 垂直和水平对齐

> ID：12983524
> 
> 赞同：2
> 
> 时间：2012-10-19T22:53:50.823
> 
> 标签：html, layout, alignment, css

我的问题如下：

我已经垂直居中一个div。但是，我想将另一个 div 水平居中。问题是我无法将其水平居中。

[这是我的 (X)HTML 和 CSS](http://jsfiddle.net/fE9JR/)

(X)HTML：

```
<body>
<div id="strut"></div>
<div id="page">
    <div id="inner_page">
        <h1>Galidie "jQzz" Clément</h1>
    </div>
</div> 
```

CSS：

```
html, body {
margin: 0;
padding: 0;
height: 100%;
}

#strut, #page {
    display: inline-block;
    vertical-align: middle;
}

#strut {
    height: 100%;
}

#page {
    border: 1px solid #c00;
}

#inner_page {
    width: 750px;
    margin: 0 auto;
    background-color: #c00;
}

h1 {
    text-align: center;
    margin: 0;
} 
```

strut 是垂直居中元素的标记。页面垂直居中。这个想法是尝试将 inner_page 块水平居中。

我应该使用绝对位置吗？还是别的什么？我选择了好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:58:52.700

`#page`是内联块，所以它总是占据它的孩子的尺寸。在这种情况下，它唯一的孩子是`#inner_page`750px，所以它们的大小相同。这意味着你不能真正把它放在里面`#page`。

例如，您可以`#page`通过穿上来使自己`text-align: center`居中`body`。

# objective-c - parser:foundCharacters - 为什么我需要“解析器”？

> ID：12983529
> 
> 赞同：1
> 
> 时间：2012-10-19T22:54:49.437
> 
> 标签：objective-c, parsing

```
(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{   
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet: 

    [NSCharacterSet whitespaceAndNewlineCharacterSet]];    
} 
```

我试图弄清楚为什么我需要解析器。所有的修剪都是在字符串上完成的，那么为什么我还要发送解析器呢？我在方法中看不到与解析器相关的任何内容。只是为了报道吗？（很有可能我不明白解析器是什么。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:21:46.467

这是一个委托方法。该`parser`参数在那里，因为如果您对多个解析器使用相同的委托，您*可能需要它。*

# jquery - textarea 和其他功能的自动完成

> ID：12983530
> 
> 赞同：2
> 
> 时间：2012-10-19T22:55:02.350
> 
> 标签：jquery

我正在使用 jQuery 自动完成

```
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
}); 
```

虽然我想做的是摆脱 availableTags 并使其在 div.post h3.username 中搜索并从那里获取用户名。我也想将它用于文本区域，这可能吗？

下一个问题是，是否有可能仅在您第一次写 @ 时才起作用，然后像 @T 这样的用户会显示所有 T 用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:14:15.697

如果你有你想在“div.post h3.username”中使用的每个用户名，那么你必须创建一个包含所有用户名的列表（类似于你想要摆脱的那个），但需要更多关于如果您需要更多帮助，这些名称是如何包含在该元素中的。

至于使用 @ 来检索用户名，取决于你想要什么。例如，如果您坚持必须在书面文本旁边出现一个包含建议用户名的新框，那么使用 textareas 是不可能的。这是因为没有跨浏览器解决方案来本地化您正在写作的坐标。您必须使用具有 contenteditable 属性的 div 而不是 textarea。但是，如果您愿意将这些用户名包含在 textarea 下方的另一个 div 中，那么这是很有可能的。如果您想描述您的期望，也许我可以提供一些代码。

不过，您可能更喜欢[这种](http://imankulov.github.com/asuggest/)自动完成功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:20:30.660

如果你想做一些花哨的完成，比如根据内容从一个列表或另一个列表中搜索，你会想要做一个自定义搜索功能。而不是`source: availableTags`你会做类似的事情

```
source: function(request, response) { .... } 
```

有关如何编写该函数的更多详细信息，请参阅[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)，但这将为您提供解析 @ 符号和诸如此类的东西所需的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:26:47.320

动态生成标签列表非常简单。不要为选项提供数组，而是提供一个`source:`搜索 DIV 并返回所有匹配标签的函数。

由于您的源函数可以查看用户键入的内容，因此它可以在输入中搜索以开头的单词`@`并在查找完成时使用该单词。

# javascript - 在 JavaScript 中验证 HTML 实体

> ID：12983532
> 
> 赞同：1
> 
> 时间：2012-10-19T22:55:11.703
> 
> 标签：javascript, regex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:02:43.430

怎么样

```
/[\u2019]/ 
```

它使用实际字符而不是 html 实体。2019 是 8217 [10的十六进制]

[http://jsfiddle.net/eV2ek/](http://jsfiddle.net/eV2ek/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:43:39.933

只要您通过`charset`属性或`Content-Type`标题正确标记 JavaScript（或它的保存页面，如果它是内联的）的编码，您就可以使用任何在正则表达式中没有特殊含义的字符，只需在此处按字面输入即可：

```
/’/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:59:18.733

Alternative of `&#8217;` or `&#x2019;` in regex in most of environments is

```
\u2019 
```

however in Perl and PCRE `\u` is not supported , but `\x` syntax instead

```
\x2019 
```

as `2019` is hex of decimal `8217`.

Regarding unicode with regex in Javascript read: [Javascript + Unicode regexes](https://stackoverflow.com/questions/280712/javascript-unicode)

# css - Why is this dropdown link color different?

> ID：12983533
> 
> 赞同：-2
> 
> 时间：2012-10-19T22:55:11.180
> 
> 标签：css, debugging, drop-down-menu, firebug

I hate css, this makes no sense. I finally finished styling this menu and now I click a different page and the links are all white on a white dropdown bg. I can only think it somehow has to do with the li.current-menu-item style but it doesn't make sense why. Nothing shows up in firebug either.

This page works correctly: [http://www.brainbuzzmedia.com/themes/simplybusiness/](http://www.brainbuzzmedia.com/themes/simplybusiness/)

This one has white links: [http://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=86](http://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=86)

If you figure this out could you please tell me how or what you use to debug?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:00:54.427

投资组合页面（以及随后导航到的任何页面..）有一个额外的选择器样式“current-menu-item”。要么摆脱它或适当的风格

```
div.nav-menu ul li.current-menu-item a {
    color: #EE8855;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:01:45.973

在第二个链接上，子菜单项链接使用以下 CSS 应用白色：

```
div.nav-menu ul li.current-menu-item:hover a 
```

您应该将其更改为：

```
div.nav-menu ul li.current-menu-item:hover > a 
```

因为您只想针对 的孩子`<a>`，`<li class="current-menu-item">`而不是所有后代。

见[http://www.w3.org/TR/css3-selectors/#child-combinators](http://www.w3.org/TR/css3-selectors/#child-combinators)

# visual-studio - VS2010, SP2010: NuGet package not being added to web.config

> ID：12983534
> 
> 赞同：0
> 
> 时间：2012-10-19T22:55:30.917
> 
> 标签：visual-studio, visual-studio-2008, sharepoint-2010

This is my first Visual Studio 2010 / SharePoint 2010 Visual Web Part, and my first use of NuGet, so forgive my blinding ignorance. fwiw, this is for SP2010\. I'm asking here instead of at sharepoint.stackexchange because I suspect it's more a VS question.

In VS2010, I have a SP2010 Visual Web Part project. It debugs clean and shows a basic "Hello World!" as desired. Looking at VisualWebPart1UserControl.ascx.cs, I have

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using Microsoft.SharePoint;

namespace VisualWebPartProject1.VisualWebPart1
{
    public partial class VisualWebPart1UserControl : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            SPSite site = SPContext.Current.Site;
            SPSite.UsageInfo usage = site.Usage;
            foo.Text = "Hello World!";
        }
    }
} 
```

So far so good. Now what I really want to do on this page will involve some ugly date/time work, so I google, and discover a NuGet package, "TimePeriodLibrary.NET". I get NuGet config'd to work with VS2010, and I add the package to my project. I see the package refeerences added in References, great.

Problem comes when I try this:

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using Microsoft.SharePoint;
using Itenso.TimePeriod;

namespace VisualWebPartProject1.VisualWebPart1
{
    public partial class VisualWebPart1UserControl : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            SPSite site = SPContext.Current.Site;
            SPSite.UsageInfo usage = site.Usage;

              TimeRange timeRange1 = new TimeRange(
              new DateTime(2011, 2, 22, 14, 0, 0),
              new DateTime(2011, 2, 22, 18, 0, 0));
              foo.Text = "TimeRange1: " + timeRange1;
        }
    }
} 
```

It looks okay, but when I debug, I get:

```
"Could not load file or assembly 'Itenso.TimePeriod, Version=1.4.11.0, Culture=neutral, PublicKeyToken=d7f23b760ed5c748' or one of its dependencies. The system cannot find the file specified.":"Itenso.TimePeriod, Version=1.4.11.0, Culture=neutral, PublicKeyToken=d7f23b760ed5c748" 
```

Being my first use of NuGet (amongst other firsts as you can tell), I was under the impression that it would modify web.config and basically 'make it work'. I've tried in desperation to even manually drag the needed .DLLs into the /BIN folder for the web application, but even that didn't work.

I'll admit it, I'm stumped. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:47:04.550

我讨厌回答自己的问题，但我确实让它发挥了作用。 [http://jussionsharepoint.com/index.php/2012/02/08/using-global-assembly-cache-tool-gacutil-exe-effectively/](http://jussionsharepoint.com/index.php/2012/02/08/using-global-assembly-cache-tool-gacutil-exe-effectively/) 我找到了.dll，并使用**gacutil.exe /i**安装它给 GAC。此后，一切都按预期进行。我不能权威地说这是获得预期结果的“正确”方式，但似乎如此。如果这不是让它发挥作用的最佳方式，我对社区希望传递的任何智慧持开放态度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:11:28.153

您应该右键单击引用，选择属性，并将构建操作设置为“复制到本地”（或类似的东西）

作为旁注，nuget 管理器只执行包内的操作，因此几乎可以肯定，当出现问题时，这不是管理器的错。

# asp.net - Stored procedures in SQL Server master-child relationships not tables

> ID：12983539
> 
> 赞同：9
> 
> 时间：2012-10-19T22:56:36.983
> 
> 标签：asp.net, sql, sql-server, asp.net-mvc, sql-server-2008

In college last year I came across something I found very interesting with regard to stored procedures. It was mostly with regard to reducing code repetition for transaction management, error handling, and security. But I have researched it since and cannot find it anywhere. Perhaps I don't know what it is called so I will explain.

Let's say I have a simple table (forget its relationships, just a single table). I have at least 5 possible operations I can do on it namely CRUD, with the R being read the details of one row, or read a list of rows for a given criteria. Again, let's not get into too much detail with complicated stored procedures and let's pretend, for this example, we want nothing but the following 5 operations to be performed:

*   Create (simple insert)
*   Read (one for reading a single row)
*   Read multiple (reading a list of rows, simple `select * from sometable where some condition`, nothing complicated),
*   Update (simple update)
*   Delete (again, simple delete).

For the purposes of this example, a simple table with 2 or 3 columns, and the most simple procedures you can come up with to do those operations.

**The problem**:

My lecturer, when talking to us about transactions, advised us to take these simple procedures, and keep them separate as is normal. But then to write a master procedure which executes each of these. This means we have a master procedure into which we pass a character lets say 'C' for create and so on, and a series of conditions which decide which job to run. Of course, we should pass in the details needed from the master to the child proc which means we need to get them from the user as parameters. This master procedure is already beginning to sound complicated.

His reasoning, do the transaction handling, validation, error handling, and security handling in the master procedure. Then call that master procedure with the required parameters, which does all the checking, and passes the parameters to the child procedure. Below is an example.

![enter image description here](../Images/a815acc567493d1a9085576bb8e33cd5.png)

Simple table, don't go worrying too much about relationships, keys, indexes, constraints, triggers and so on.

For the below two pieces of code, the only real relevant bit is the parts between the try...catch. The rest is boiler plate for the master.

Below is the code for a create procedure:

```
ALTER proc [Actions].[AreaCreate]
--External Variables - Input
@AreaName varchar(50),  @AreaAvailablity bit,   @Description varchar(max),

--External Variables - Output
@NoOfRecords int output

as
--Internal Variables
declare @ErrorMessage varchar(max)

Begin try
    insert  [Tennis3rdYrMVC].[dbo].Areas
            ([AreaName],    [AreaAvailablity],  [Description])
    values  (@AreaName,     @AreaAvailablity,   @Description)

    --Show # of records affected so you can detect nulls or empty lists
    --and handle them as you choose in the code
    set     @NoOfRecords = @@ROWCOUNT
End try
Begin Catch
    set @ErrorMessage = ERROR_MESSAGE()
    raiserror(@ErrorMessage,16,1)
    return ERROR_NUMBER()
End Catch

--All Ok
return 0 
```

Below is another piece of code for a delete procedure

```
ALTER proc [Actions].[AreaDelete]
--External Variables - Input
@Id int,

--External Variables - Output
@NoOfRecords int output

as
--Internal Variables
declare @ErrorMessage varchar(max)

begin try
    delete from [Tennis3rdYrMVC].[dbo].Areas
    where Id = @Id

    --Show # of records affected so you can detect nulls or empty lists
    --and handle them as you choose in the code
    set @NoOfRecords=@@ROWCOUNT
end try
begin catch
    set @ErrorMessage = ERROR_MESSAGE()
    raiserror(@ErrorMessage,16,1)
    return ERROR_NUMBER()
end catch

--All Ok
return 0 
```

Finally, the suggested, and complicated master proc.

```
ALTER proc [Admin].[AreaMaster]
--External Variables - Input
@JobType int, -- 1=Create, 2=Read 1, 3=Read Many, 4=Update, 5=Delete
--Master sprock uses null defaults because not every job requires every field to be present.
--i.e. We dont need to know the area name of an area we want to delete.
@Id int                 = null,     @AreaName varchar(50)       = null,
@AreaAvailablity bit    = null,     @Description varchar(max)   = null,

--External Variables - Output
@NoOfRecords int = null output --Used to count the number of records affected where needed.
as
BEGIN
    --Internal Variables
    declare @ErrorMessage varchar(max)
    declare @return_value int

    -- SET NOCOUNT ON added to reduce network traffic and speed things up a little.
    SET NOCOUNT ON;

    /*
    --VALIDATION

    --Logic for ensuring all required values are entered should be done in processing below in
    --the master sprock, NOT in the children (i.e. why check for valid id in 5 sprocks when you
    --can do it here in one).

    We will do all the processing needed to ensure valid and required values are entered where
    needed.

    --SECURITY
    This is also where we put the security code required to stop SQL Injection and other
    attacks, NOT in the child sprocks. The child sprocks would not be allowed to execute by
    pages directly.

    */

    --Once all validation is done, call  relevant child sprocks

    --Call AreaCreate Sprock
    if(@JobType='1')
    begin
        exec    @return_value = [Actions].[AreaCreate]
                @AreaName           = @AreaName,
                @AreaAvailablity    = @AreaAvailablity,
                @Description        = @Description,
                @NoOfRecords        = @NoOfRecords OUTPUT

        --select    @return_value 'Return Value'

        if @return_value<>0
        begin
            raiserror('Error: Problem creating area.',16,0)
            --rollback transaction
            return 99
        end
    end

    --Call AreaShowDetail Sprock
    if(@JobType='2')
    begin
        exec    @return_value   = [Actions].[AreaShowDetail]
                @Id             = @Id,
                @NoOfRecords    = @NoOfRecords output
        ----Testing
        --select    'Return Value' = @return_value

        if @return_value<>0
        begin
            raiserror('Error: Problem reading area details.',16,0)
            --rollback transaction
            return 99
        end
    end

    --Call AreaShowList Sprock
    if(@JobType='3')
    begin
        exec    @return_value   = [Actions].[AreasShowList]
                @NoOfRecords    = @NoOfRecords output
        ----Testing
        --select    'Return Value' = @return_value

        if @return_value<>0
        begin
            raiserror('Error: Problem reading areas list.',16,0)
            --rollback transaction
            return 99
        end
    end

    --Call AreaUpdate Sprock
    if(@JobType='4')
    begin
        EXEC    @return_value = [Actions].[AreaUpdate]
                @Id                 = @Id,
                @AreaName           = @AreaName,
                @AreaAvailablity    = @AreaAvailablity,
                @Description        = @Description,
                @NoOfRecords        = @NoOfRecords OUTPUT

        --select    'Return Value'      = @return_value

        if @return_value<>0
        begin
            raiserror('Error: Problem updating area.',16,0)
            --rollback transaction
            return 99
        end
    end

    --Call AreaDelete Sprock
    if(@JobType='5')
    begin
        exec    @return_value   = [Actions].[AreaDelete]
                @Id             = @Id,
                @NoOfRecords    = @NoOfRecords output

        --select    'Return Value'  = @return_value
        if @return_value<>0
        begin
            raiserror('Error: Problem deleting area(s).',16,0)
            --rollback transaction
            return 99
        end
    end

    --All Ok
    return 0
END 
```

Is that complicated or what? Now imagine another level which if you have several tables to operate on, will decide which sub master to call, and this MasterMaster for want of a better name must have external parameters for every field in every table. However, the validation, security, and transaction code would be moved up to that level instead.

More importantly, is that the way a professional would do it. And finally, I am using MVC with entity framework. Suppose I have a database like this (I have), and access is only allowed through this master stored procedure (it is). How do I call such a stored procedure from within EF and MVC. Even better, how would I bypass EF all together and get the data into my controller in a way my view will understand. I know how to do this with ASP.Net code behind. But not in MVC.

Any suggestions. Please, feel free to tell me that this is completely crazy as it seems like a hell of a lot of work (what if you have 50 tables (I do). Imagine, 5 simple operations, across 50 tables = 250 child stored procedures + 50 Sub-Sub-Masters, + 5 Sub-Masters + 1 Master. I have my work cut out. Is there a tool that can do this or at least generate a template for me?

So to summarise, My questions are:

1.  Is this overly complicated or is this the professional way to do this?
2.  What is the term used to describe this Master / child procedural relationship.
3.  Is there a tool that can automate this process.
4.  Is there a tool that can help me generate some kind of boilerplate template.
5.  How can I use this procedure with EF and MVC
6.  How can I bypass EF altogether and just find a way to call the procedure directly.
7.  Is there anything like the equivalent of classes, or even methods in T-SQL which can structure this much like a standard piece of code. Meaning that each child procedure is a method, each table has its properties, and the constructor will be the the initial (or altered) representation of the object.
8.  If 7 does exist, which would be more standard, the way I described (i.e.) splitting everything up, or the idea in 7.

With regard to this point 4 I am talking about something simple, like the one already in SQL Server where you right click a procedure and choose execute and it generates some simple code for testing your procedure, or like the one for making functions.

Thanks for reading this and for any help you can offer.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T09:56:03.683

从理论上讲，您的讲师提出了一个很好的概念。将某些类型视为顶级域模型的想法很有意义。了解如何拯救其直系子女的对象也非常有用。

除了理论，我不同意实现，主要是因为它（不必要的）冗长和不灵活。

## 存储过程

存储过程很棒，但是使用 ORM（如 EF）或任何自动化框架的好处之一是您不必一遍又一遍地编写样板代码来做同样的事情。多年来，我已经大大减少了我的应用程序中仅 CRUD 的过程的数量，而是更喜欢根据需要自动生成语句（同样，这是一个好的 ORM 的功能）。

**阅读**
大多数应用程序需要以不同的方式查看相同的数据，并且拥有无限数量的选项来查询该数据通常是有利的。也许你想要整张唱片；也许你想要一个字段。也许您想要一级对象层次结构，或者您希望将对象层次结构扁平化为视图模型。

**多读**
当我**编写**存储过程时，我倾向于将精力放在高度优化的存储过程上，以有效地浏览/搜索数据。

在大多数业务应用程序中，read-many 最终成为数据的摘要视图。作为搜索结果返回 1000 条窄/扁平记录是微不足道的；但是检索 1000 个复杂对象的完整层次结构效率极低，通常不需要。

公平地说，您的主 proc 可以返回适当的摘要视图，但我指的是我之前的观点，即能够以多种方式查看数据。声明单一的多读行为是不必要的限制。

**删除**
删除有时是存储过程的理想选择。将 100 条记录加载到业务层只是为了获取它们的 ID 并一一发出 DELETE 是没有意义的。

**事务**
在我看来，最灵活的事务支持通常来自业务层。请参阅我对“应在 .NET 或 SQL Server 中处理事务？”的回答：[https ://stackoverflow.com/a/12470061/453277](https://stackoverflow.com/a/12470061/453277)

## 顶级模型

“Person”是顶级模型的良好候选者，而“Address”可能是该模型的子模型。

一个主程序促进所有访问的想法是完全不切实际的。虽然您可能只向用户显示人员管理屏幕，但在后台您可能希望访问地址对象而不需要或不知道与它相关的人员。

一个简单的示例是带有地址列表的个人资料页面；您单击“编辑”按钮以启动模式窗口以编辑地址的详细信息。你真的想要通过人员管理逻辑来获取地址数据吗？您可能会执行与父母相关的安全检查；您可能会与父母建立新的关系；你可能什么都不做。灵活性和可重用性是这里的关键。

此外，当您决定在 Person->Address 关系之外添加 Company->Address 关系时，您不希望重新创建任何此逻辑。

## 亲子关系

两个相关对象之间并不总是存在可定义的父/子关系。我最喜欢的例子是 Person 和 Document。

*   一个人可能有一个他们创作的文档列表。
*   一个文档可能有一个作者列表。

哪个是家长？

对数据库来说，它几乎不重要。某处可能有一个`PersonDocument`包含两个整数列的表；哪个是父母并不重要。同样，在业务层中，灵活性是关键。您应该能够以“孩子”的形式访问`Document`人员列表，并以“孩子”`Person`的形式访问文档列表。

我喜欢将所有关系视为潜在的双向关系。将它们视为双向的从来没有什么坏处，但强制父/子层次结构可能会受到限制。

## 安全

**SQL 注入**
我在您的主进程的评论中注意到了这一点：

> 这也是我们放置阻止 SQL 注入和其他攻击所需的安全代码的地方，而不是在子链中。不允许子链轮直接由页面执行。

对存储过程的调用应始终正确参数化，这提供了所需的防止注入的保护。这里提到的 SQL 注入要么无关紧要，要么令人担忧，因为它表明调用没有得到适当的准备。

**Securables**
对 SQL Server 中对象级安全性的讨论远远超出了本文的范围，但我会提到，您可以在不使用主过程的情况下实现极其精细的安全性。

## 建议

*   如果您使用的是 ORM（如 EF），请让它完成工作并为您编写此管道代码。不要试图将不同的范式强加给它。如果您必须使用讲师的方法（例如对于作业），从等式中删除 EF 可能更容易。

*   灵活性是关键（我已经第三次说了）。无论您开发了多么出色的范例，您都需要在某些时候扩展它或偏离它。能够做到这一点至关重要。

*   即使两种类型看似无关，您也应该能够在相同的事务和逻辑上下文中操作它们。

*   正如@Habibillah 指出的那样，不要忘记测试/可测试性。

*   当您需要交付项目时，不要重新发明轮子（即使用完成工作的现有工具）。然而，这是一个很好的问题，创建自己的对象持久性/检索方法是一个很好的学术练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:19:35.840

它只是一种称为[以数据库为中心](http://en.wikipedia.org/wiki/Database-centric_architecture)的软件开发范例。简而言之，您只需为 c# 之类的编译代码编写一点点即可调用数据库过程或函数，所有逻辑都将存储在过程和函数上。

出于某种原因，我发现很多公司都非常严格地修改他们的代码（需要更多的经理批准）而不是由 DBA 修改数据库程序，因此维护应用程序变得很简单。

然而，软件开发现在采用以应用程序为中心的方法，所有规则包括存储在代码中的数据库方案（已使用 ORM 完成）、单元测试、继续集成等，但没有这些工具（例如单元测试）维护代码是比存储过程更复杂。

# python - Why can't pip find packages listed in `pip search` results?

> ID：12983541
> 
> 赞同：9
> 
> 时间：2012-10-19T22:56:50.077
> 
> 标签：python, pip

First it's there:

```
$ pip search pylibpcap
pylibpcap                 - pylibpcap is a python module for the libpcap packet capture library. 
```

Then it's not:

```
$ pip install pylibpcap
Downloading/unpacking pylibpcap
  Could not find any downloads that satisfy the requirement pylibpcap
No distributions at all found for pylibpcap
Storing complete log in /home/u0/riley/.pip/pip.log 
```

What gives? I realize there are other ways I can install this package, but why is pip doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-19T15:52:24.683

这个答案是对 JF Sebastian 答案的评论，因为它建立在它之上，但是很难复制和粘贴内容。

对于也遇到此问题并希望快速解决的人：

=> 首先，安装 libpcap

=> 然后：

```
sudo pip2 install http://ncu.dl.sourceforge.net/project/pylibpcap/pylibpcap/0.6.4/pylibpcap-0.6.4.tar.gz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:51:59.917

Pip 找到了描述包的元页面，但在上面找不到有效的下载链接。

pylibpcap 的作者可以在 pypi 或其主页的某个位置的包元数据中放置一个指向源 tarball 的链接。

您可以手动提供 tarball 链接，如[@mrchampe 链接的答案](https://stackoverflow.com/a/9578018/4279)所示。

# linux - What is the maximum number of open TCP connection in Linux

> ID：12983542
> 
> 赞同：0
> 
> 时间：2012-10-19T22:56:52.943
> 
> 标签：linux, networking, tcp

> **Possible Duplicate:**
> [What is the theoretical maximum number of open TCP connections that a modern Linux box can have](https://stackoverflow.com/questions/2332741/what-is-the-theoretical-maximum-number-of-open-tcp-connections-that-a-modern-lin)
> [Max number of socket on Linux](https://stackoverflow.com/questions/3430474/max-number-of-socket-on-linux)

I want to know by default how many open TCP connections at the same time can I have on a linux machine? Is there any limitation and If there is, how can I increase it?

# c++ - std::thread，类构造函数和析构函数

> ID：12983546
> 
> 赞同：2
> 
> 时间：2012-10-19T22:57:13.817
> 
> 标签：c++, multithreading, c++11, stdthread

在 C++11 中测试线程时，我创建了以下示例：

```
#include <iostream>
#include <thread>

class Foo {
public:
    Foo(void) {
        std::cout << "Constructor called: " << this << std::endl;
    }
    ~Foo(void) {
        std::cout << "Destructor called: " << this << std::endl;
    }
    void operator()() const {
        std::cout << "Operatior called: " << this << std::endl;
    }
};

void test_normal(void) {
    std::cout << "====> Standard example:" << std::endl;
    Foo f;
}

void test_thread(void) {
    std::cout << "====> Thread example:" << std::endl;
    Foo f;
    std::thread t(f);
    t.detach();
}

int main(int argc, char **argv) 
{
    test_normal();
    test_thread();

    for(;;);
} 
```

打印以下内容：

![在此处输入图像描述](../Images/b17ec0766d311daa804290bfe2606bca.png)

为什么要为线程调用 6 次析构函数？为什么线程报告不同的内存位置？

**编辑** 添加移动和复制构造函数输出时：

![在此处输入图像描述](../Images/2265474ce59329d0deec9eab1e1f2ead.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T23:02:04.287

函数对象将被移动或复制。您没有在输出中考虑任何这些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T23:23:02.973

添加一个复制构造函数并将构造函数移动到您的类。

```
Foo(Foo const&) { std::cout << "Copy Constructor called: " << this << std::endl; }
Foo(Foo&&) { std::cout << "Move Constructor called: " << this << std::endl; } 
```

现在，如果您运行[代码](http://liveworkspace.org/code/5cc68b3dc859f5522a3837bfb4f3bc57)，输出（在 gcc 4.7.2 上）如下所示：

```
====> Standard example:
Constructor called: 0xbff696ff
Destructor called: 0xbff696ff
====> Thread example:
Constructor called: 0xbff696ff
Copy Constructor called: 0xbff696cf
Move Constructor called: 0x93a8dfc
Destructor called: 0xbff696cf
Destructor called: 0xbff696ff
Operator called: 0x93a8dfc
Destructor called: 0x93a8dfc 
```

如您所见，对析构函数的调用次数与对各种构造函数的调用次数相匹配。

我怀疑 gcc 设法省略了 MSVC 似乎正在进行的一些复制/移动构造调用，因此对析构函数的调用比您的示例要少。

* * *

`std::move`此外，您可以通过将`Foo`对象添加到线程构造函数来完全避免复制构造。

`test_thread`将线程构造线更改为

```
std::thread t(std::move(f)); 
```

现在输出如下所示：

```
====> Standard example:
Constructor called: 0xbfc23e2f
Destructor called: 0xbfc23e2f
====> Thread example:
Constructor called: 0xbfc23e2f
Move Constructor called: 0xbfc23dff
Move Constructor called: 0x9185dfc
Destructor called: 0xbfc23dff
Destructor called: 0xbfc23e2f
Operator called: 0x9185dfc
Destructor called: 0x9185dfc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T23:01:37.220

因为您的 Foo 在堆栈上，而不是堆上。这意味着您在 test_thread 中分配一个新的，然后在您调用 std::thread(f) 并再次在 thread(f) 中复制它。

相反，您需要创建一个在堆上分配的指针，并传递它，以便每次都不会复制对象，使用堆（新）来分配它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T23:34:46.687

如果您不自己做，编译器会添加默认的移动和复制构造函数，检查这个

[https://ideone.com/wvctrl](https://ideone.com/wvctrl)

```
#include <iostream>
#include <thread>

class Foo {
public:
    Foo(Foo&& f) {
        std::cout << "Constructor Foo&& called: " << this << std::endl;
    }
    Foo(const Foo& f) {
        std::cout << "Constructor const Foo& called: " << this << std::endl;
    }
    Foo(void) {
        std::cout << "Constructor called: " << this << std::endl;
    }
    ~Foo(void) {
        std::cout << "Destructor called: " << this << std::endl;
    }
    void operator()() const {
        std::cout << "Operatior called: " << this << std::endl;
    }
};

void test_normal(void) {
    std::cout << "====> Standard example:" << std::endl;
    Foo f;
}

void test_thread(void) {
    std::cout << "====> Thread example:" << std::endl;
    Foo f;
    std::thread t(f);
    t.detach();
}

int main(int argc, char **argv) 
{
    test_normal();
    test_thread();

    for(;;);
} 
```

它表明所有 ctors 都与 dtors 配对。

还要看看这个SO：

[C++11 的三规则变成五规则？](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)

# oracle11g - 即使没有指定过滤条件，oracle 也使用索引

> ID：12983553
> 
> 赞同：0
> 
> 时间：2012-10-19T22:58:37.013
> 
> 标签：oracle11g, sql-execution-plan

在此查询中：

```
 SELECT WTTEMPLATE.TEMPLATEuID,
                    MAX (WTTRX.VALUEDATE) AS template_last_use_date
               FROM wttemplate, wttrx
              WHERE WTTEMPLATE.TEMPLATEID = WTTRX.TEMPLATEID(+)
                    AND WTTEMPLATE.CUSTID = WTTRX.CUSTID
           GROUP BY WTTEMPLATE.TEMPLATEuID 
```

解释计划显示：使用 WTTEMPLATE.TEMPLATEID 和 (WTTRX.TEMPLATEID,WTTRX.CUSTID) 上的索引进行索引快速全扫描。我的问题是：我没有指定任何过滤条件，那么它如何使用索引？它应该进行全面扫描...对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:16:03.620

您在 where 子句中使用 TEMPLATEID。这就是为什么 Oracle 使用索引来加快连接操作的查找速度。

顺便说一句：但你真的应该习惯使用标准的 JOIN 语法，而不是 WHERE 子句中的隐式连接：

```
SELECT wttemplate.templateuid,
       max (wttrx.valuedate) as template_last_use_date
FROM wttemplate 
   LEFT JOIN wttrx 
      ON wttemplate.templateid = wttrx.templateid
     AND wttemplate.custid = wttrx.custid
GROUP BY wttemplate.templateuid 
```

更改连接语法不会更改执行计划。这只是一个更清晰的问题，并且不太容易出现不需要的笛卡尔连接。

# mysql - 带条件的 MySQL 更新触发器

> ID：12983557
> 
> 赞同：1
> 
> 时间：2012-10-19T22:59:05.983
> 
> 标签：mysql, if-statement, triggers, case

我有一个 PHP 应用程序，可将“通过”、“失败”或“NA”插入字段 TEST1、TEST2、TEST3 ... 到 TEST15。

如果任何 TEST1-TEST15 字段包含“失败”，我有一个名为 OVERALL 的字段需要自动更新为“失败”。

我很确定我需要使用包含更新语句和 CASE 或 IF 的触发器，但我无法确定确切的语法。

任何人都可以请帮助一个 MySQL 菜鸟吗？我正在使用 MySQL 服务器版本：5.1.63-0+squeeze1 (Debian)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:08:30.260

你可能会做类似的事情

```
CREATE TRIGGER triggerName AFTER INSERT ON yourTable
FOR EACH ROW BEGIN
    IF NEW.yourColumn = 'Fail' THEN
        UPDATE otherField set column = 'Fail'
    END IF;
END 
```

这就是这种触发器在理论上的样子，但是我必须说我不是 100% 的语法，因为我在 mysql 上工作已经有一段时间了。

您可以查看手册以获取有关触发器 [http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html的更多信息](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:00:06.760

好的，这是另一个 TRIGGER，您可以尝试一下。我对其进行了测试，如果插入行的 test1 或 test2 中的值是 FAIL，它应该将整个字段更改为 FAIL。除了您要插入的行之外，它不会为任何其他行设置整体字段。

触发器的代码：

```
DELIMITER |

CREATE TRIGGER setoverall BEFORE INSERT ON table_name
  FOR EACH ROW BEGIN
    IF NEW.test1 = 'FAIL' OR NEW.test2 = 'FAIL' THEN
        SET NEW.overall = 'FAIL';
    END IF;
  END;
| 
```

您需要做的就是输入正确的表名并检查表中的所有其他 13 个测试列，如果它们的值为 FAIL。我希望这对您有所帮助，如果有任何不清楚的地方请告诉我。

# ruby-on-rails - Nokogiri HttParty Xpath Ruby on Rails

> ID：12983561
> 
> 赞同：0
> 
> 时间：2012-10-19T22:59:33.853
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在处理返回 XML 的 Eve Online 请求。我正在为请求使用 HTTParty，并且我正在尝试使用 Nokogiri 来获取特定元素的属性值。

这是响应的示例：

```
 <eveapi version="2"><currentTime>2012-10-19 22:41:56</currentTime><result><rowset  name="transactions" key="refID"  columns="date,refID,refTypeID,ownerName1,ownerID1,ownerName2,ownerID2,argName1,argID1,amount,balance,reason,taxReceiverID,taxAmount"><row date="2012-10-18 23:41:50" refID="232323" refTypeID="9" ownerName1="University of Caille" ownerID1="32232" ownerName2="name" ownerID2="34343" argName1="" argID1="0" amount="5000.00" balance="5000.00" reason="Starter fund" taxReceiverID="" taxAmount=""/></rowset></result><cachedUntil>2012-10-19 23:03:40</cachedUntil></eveapi> 
```

我只需要访问元素“行”的属性，并且可以返回许多行。

我阅读了有关 XPath 的信息，据我了解，如果我执行以下操作，它应该返回所有行：`doc.xpath('row')`但是，它不会返回任何内容。

这是我到目前为止所拥有的：

```
options = {:keyID => 111111, :vCode => 'fddfdfdfdf'}
response = HTTParty.post('https://api.eveonline.com/char/WalletJournal.xml.aspx', :body => options)
doc = Nokogiri::XML(response.body)
doc.xpath('row').each do |r|

end 
```

循环永远不会执行。

我究竟做错了什么？我需要返回所有行元素并访问每个行的属性。

这是我之前的代码，它一直有效，直到我尝试了一个不同的字符并收到“无法将整数转换为字符串错误”：

```
options = {:keyID => 434343, :vCode => 'fdfdfdfdf'}
response = HTTParty.post('https://api.eveonline.com/char/WalletJournal.xml.aspx', :body => options)
data = response.parsed_response
data['eveapi']['result']['rowset']['row'].each do |t|
  if t['ownerName2'].eql?('name') && !t['reason'].eql?('Starter fund')
    uniqueKey = t['ownerID1'].to_s + t['date']
    if !Payment.exists?(:unique_payment_key => uniqueKey)
      p = Payment.new
      p.owner_id = t['ownerID1']
      p.owner_name = t['ownerName1']
      p.unique_payment_key = uniqueKey
      p.amount = t['amount']
      p.reason = t['reason']
      p.save
    end
  end
end 
```

对不起，错误`error: can't convert String into Integer online line 42`是

```
if t['ownerName2'].eql?('name') && !t['reason'].eql?('Starter fund') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:04:35.813

好吧，假设您想要任何深度的行元素，您可以使用`//row`而不是解决您的直接问题。`row`

但是，HTTParty 会为您解析您的响应，因此如果您要以不同的方式解析它，那么仅使用它来发布页面有点多余。

# c++ - 构造函数中超类的c ++ init成员

> ID：12983562
> 
> 赞同：2
> 
> 时间：2012-10-19T22:59:40.767
> 
> 标签：c++, constructor, initialization, member, superclass

我不明白为什么我的成员没有初始化。我有这样的事情：

```
class A
{
  public:
    A() {member = 0;}
    int getMember() {return member;}
  protected:
    int member;
} 
```

和

```
class B : public A
{
  public:
    B() : A() {member = 10;}
} 
```

当我尝试从 B 获取*成员*的值时，它始终为 0。我在这里想念什么？

谢谢！

**编辑**：Ctor 现在是公开的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:16:36.907

我尝试了两件事，它们都给出了预期的结果：

```
class A
{
  public:
    A() {member = 0;}
    int getMember() {return member;}
  protected:
    int member;
};

class B : public A
{
public:
    B() : A() {member = 10;}
};

int main() {
    A* a = new B();
    cout << a->getMember() << endl;
    B b;
    cout << b.getMember() << endl;
    return 0;
} 
```

这返回

```
output:
10
10 
```

[您可以在http://ideone.com/FArIAC](http://ideone.com/FArIAC)查看代码

# python - Django，模板中的 url 标签不起作用：NoReverseMatch

> ID：12983563
> 
> 赞同：2
> 
> 时间：2012-10-19T22:59:42.380
> 
> 标签：python, django, templates, url, reverse

我在 django 的模板中生成反向 url 时遇到了问题。几个小时以来，我一直在尝试解决它，但我不知道问题可能是什么。URL 反转在模型和视图中效果很好：

```
# like this in models.py
@models.permalink
    def get_absolute_url(self):
        return ('entry', (), {
            'entry_id': self.entry.id,
        })

# or this in views.py
return HttpResponseRedirect(reverse('entry',args=(entry_id,))) 
```

但是当我试图在模板中制作它时，会出现这样的错误：

> NoReverseMatch at /entry/1/
> Reverse for ''add_comment'' with arguments '(1L,)' 和关键字参数 '{}' 未找到。

我的文件结构如下所示：

```
project/
├── frontend
│   ├── models.py
│   ├── urls.py
│   └── views.py
├── settings.py
├── templates
│   ├── add_comment.html
│   └── entry.html
├── utils
│   └── with_template.py
└── wsgi.py 
```

我的 urls.py：

```
from project.frontend.views import *
from django.conf.urls import patterns, include, url

urlpatterns = patterns('project.frontend.views',

    url(r'^entry/(?P<entry_id>\d+)/', 'entry', name="entry"),
    (r'^entry_list/', 'entry_list'), 
```

然后entry_list.html：

```
{% extends "base.html" %}
{% block content %}
    {% for entry in entries %}
            {% url 'entry' entry.id %}
    {% endfor %}
{% endblock %} 
```

在views.py中我有：

```
@with_template
def entry(request, entry_id):
    entry = Entry.objects.get(id=entry_id)
    entry.comments = entry.get_comments()
    return locals() 
```

其中 with_template 跟随装饰器（但我不认为这是一种情况）：

```
class TheWrapper(object):
    def __init__(self, default_template_name):
        self.default_template_name = default_template_name

    def __call__(self, func):
        def decorated_func(request, *args, **kwargs):
            extra_context = kwargs.pop('extra_context', {})
            dictionary = {}
            ret = func(request, *args, **kwargs)
            if isinstance(ret, HttpResponse):
                return ret
            dictionary.update(ret)
            dictionary.update(extra_context)
            return render_to_response(dictionary.get('template_name',
                                                     self.default_template_name),
                                      context_instance=RequestContext(request),
                                      dictionary=dictionary)
        update_wrapper(decorated_func, func)
        return decorated_func

if not callable(arg):
    return TheWrapper(arg)
else:
    default_template_name = ''.join([ arg.__name__, '.html'])
    return TheWrapper(default_template_name)(arg) 
```

您有什么想法，可能会导致问题吗？非常感谢提前！

* * *

**编辑：** 我刚刚做了一个实验。我评论了我能留下的所有东西：urls.py

```
# -*- coding: UTF-8 -*-
from justmetyou.frontend.views import *
from django.conf.urls import patterns, include, url
urlpatterns = patterns('justmetyou.frontend.views',
    url(r'^entry/(?P<entry_id>\d+)/', 'entry', name="entry"),
) 
```

视图.py

```
# -*- coding: UTF-8 -*-
from justmetyou.frontend.models import *
from django.shortcuts import render_to_response, get_object_or_404
def entry(request, entry_id):
    entry = Entry.objects.get(id=entry_id)
    return render_to_response('entry.html', {'entry':entry}) 
```

entry.html

```
{% extends "base.html" %}
{% block content %}
{% url 'entry' 1 %}
{% endblock %} 
```

什么都没有改变。我总是遇到同样的错误。所以现在我更加困惑了，因为在这个简单的代码中一切看起来都很好。你认为这可能是像服务器这样的外部东西或像这样的东西......？我没有任何想法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:17:45.103

我怀疑您使用的是 Django 1.3 而您没有调用[`{% load url from future %}`](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#url).

因此，请尝试不`'`使用 URL 名称：

```
{% url entry 1 %} 
```

# javascript - jQuery 日期选择器和类分配

> ID：12983567
> 
> 赞同：0
> 
> 时间：2012-10-19T23:00:04.887
> 
> 标签：javascript, jquery, datepicker

我正在使用通过将`dp`类分配给输入元素来触发的默认 jquery 日期选择器。如果我在 html 中设置元素的类，它工作正常，但如果我`dp`用 js ( `document.getElementById(eleId).className = 'dp';`) 分配类，则当用户单击输入时不会触发日期选择器。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:06:01.387

那是因为当你将`datepicker`事件绑定到你的元素时（通过选择器，可能`$(".dp")`，它只绑定到在那个时间点找到的那些。之后的任何时候，就像你说的那样，元素可能会获得类（甚至失去它）。我的建议是做这样的事情：

```
<div id="container">
    <!-- Your elements that may or may not have the class "dp" -->
</div>

<script type="text/javascript">
    $("#container").on("click", "dp", function () {
        $(this).datepicker('destroy').datepicker({showOn: 'both'}).focus();
    });
</script> 
```

当然，您可以将绑定放入其中`document.ready`，并且可以更改传递给的选项`datepicker`。如果你不能缩小范围`"#container"`，你可以使用or代替。`"body"`此外，您还需要以`onfocus`某种方式考虑。

不过，我建议您尽可能使用 jQuery，因为您已经包含了它。例如，您的代码：`document.getElementById(eleId).className = 'dp';`很好，但为什么不使用方法`addClass`，为什么不使用`"#"`选择器？喜欢：

```
$("#" + eleId).addClass("dp");
// and alternatively
$("#" + eleId).removeClass("dp"); 
```

使用的一个问题`className`是操作元素的类并不容易。使用会`.className = "whatever"`覆盖任何先前`className`的值 - 当然，您可以考虑这一点，但使用 jQuery 会更容易。此外，在使用 时`removeClass`，jQuery 可能会也可能不会自动删除元素的任何事件绑定，而 where`className`不会这样做。如果您要执行诸如删除和添加类之类的操作，则可能会变得一团糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:08:05.283

何时分配课程很重要。您必须在加载 datepicker 模块*之前分配类。*

否则，日期选择器会加载它找到的任何输入，然后停止。如果您在该事件之后分配类，则不会有任何响应，因为加载器已完成其工作并且对任何新项目不感兴趣。

或者，您可以在将类分配给元素*后再次调用日期选择器。*

# foursquare - Foursquare API /lists/USER_ID/tips 不包含任何待办事项或已完成的组

> ID：12983569
> 
> 赞同：1
> 
> 时间：2012-10-19T23:00:17.907
> 
> 标签：foursquare

有什么方法可以列出已经完成/待办事项的用户列表？该文档暗示 todo 和 done 字段应包含这些组的计数和数组，但实际上，虽然我得到非零计数，但对于已弃用的 /users/USER_ID/tips 调用和/lists/USER_ID/tips 调用中不存在（并且在其他地方可能为空，例如“完成”类型的 listItems.items.tip.listed.groups.items，即使计数不为零）。

我正在尝试替换我在编译代码中的一个（可能已弃用）调用，它给了我正确的输出，所以我知道这样的调用必须存在于某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:06:43.217

您可以使用提示详细信息端点 (https://developer.foursquare.com/docs/tips/tips) 获取有关提示的更多信息，包括喜欢/待办事项。

# gmail - Exchange Web 服务 (EWS) 和 Gmail/Google Apps

> ID：12983570
> 
> 赞同：2
> 
> 时间：2012-10-19T23:00:50.417
> 
> 标签：gmail, exchange-server, google-apps, exchangewebservices

鉴于我的 iPhone 似乎能够连接到 Google Apps 邮件（即：gmail，但使用我自己的域名）并使用日历和联系人，我假设我能够以编程方式连接到 Exchange Web 服务。我假设 iPhone 只是将 gmail 视为 Exchange 服务器，但是当使用桌面上的 Outlook 连接到 gmail 时，Google Apps Sync 的存在让我感到奇怪。

我的问题的简短版本是：我可以使用 EWS 连接到 gmail 并访问我的联系人和日历（以及电子邮件）吗？

我对这个假设的第一次测试失败了，它无法自动发现配置：

```
 ExchangeService service = new ExchangeService();
        service.AutodiscoverUrl("davepl@mygmaildomainname.com");

        EmailMessage message = new EmailMessage(service);
        message.Subject = "Subject";
        message.Body = "Body";
        message.ToRecipients.Add("davepl@mygmaildomainname.com");
        message.Save();

        message.SendAndSaveCopy(); 
```

我的目标是支持 IMAP 之外的更广泛的电子邮件，并希望 EWS 不仅能将我的范围扩展到 Exchange 服务器，还能扩展到 gmail。

谢谢！戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:43:02.493

Gmail 实施[ActiveSync](http://support.google.com/a/bin/answer.py?hl=en&answer=135937) API，而不是 EWS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:15:25.120

Exchange Web 服务是 Microsoft 专门为 Exchange 服务器构建的。它不是邮件服务的“标准”，我怀疑 Google 是否将 Exchange Server 用于 GMail。GMail 可能有 iPhone 正在使用的自己的 Web 服务 API。顺便说一句，iPhone 也可以连接到 Exchange Server，在这种情况下，它可能使用 EWS 或 WebDAV。

# java - 界面中需要澄清

> ID：12983576
> 
> 赞同：0
> 
> 时间：2012-10-19T23:01:29.540
> 
> 标签：java, interface

我知道接口只能在其中实现静态值和最终值。但是是否有任何漏洞可以让我使用接口更改变量的值？这个问题可能很荒谬，但我很无奈，因为这是我的要求。这是示例代码..

```
public interface I {
    int val = 1;  
    int changeValue();

} 
```

* * *

```
Class A implements I{
    int changeValue(){
        val = 2 ; 
        return 0;
    }
} 
```

如何使用接口更改“val”的值？我可以做类似的事情：

```
val = changeValue(); 
```

是否有任何等效于在界面中执行此功能的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:04:45.257

**你不能**。接口变量是`static`和`final`默认情况下。

`final`变量是在对象的生命周期内不能更改的变量。

vairable`static`是一个*类变量*——这意味着类的所有实例（或本例中的接口）只有一个值。

因此 - 你只有一个值`I.x`- 并且这个值不能改变。

* * *

您可能想要做的是在您的界面中定义方法：

```
int getVal();
void setVal(int val); 
```

并让实现类实现方法 - 这样您就可以将变量与`getVal()`和`setVal()`方法一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:22:46.173

您不能对接口执行此操作。但是，可以修改`static final`类中的变量：

```
public abstract class I {
    static final int val; 
    static
    {
        val = 1;
    }
} 
```

* * *

```
import java.lang.reflect.*;

public class NotFinal
{
    public static void main(String args[]) throws Exception
    {
        System.out.println(I.val); // Before: 1     

        Field field = I.class.getDeclaredField("val");
        field.setAccessible(true);
        Field modifiersField = Field.class.getDeclaredField("modifiers");
        modifiersField.setAccessible(true);
        modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);
        field.set(null, 2);

        System.out.println(I.val); // After: 2
    }
} 
```

输出：

```
1
2 
```

请注意，如果您在声明中分配值，则这不起作用，即

```
static final int val = 1; 
```

因为编译器对此的处理方式不同（作为常量） - 请参阅[此答案](https://stackoverflow.com/a/3301818/699224)。

# facebook - 脸书共同好友

> ID：12983578
> 
> 赞同：0
> 
> 时间：2012-10-19T23:01:36.827
> 
> 标签：facebook, facebook-fql

我正在尝试按我们拥有的共同朋友的数量对我的朋友进行排序。我尝试逐个获取共同朋友的数量并创建一个 id->no_of_mutual_friend 键值对，但这需要的时间太长了，因为我必须调用 facebook API 超过 1000 次。

有没有更简单的方法通过使用 FQL 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:05:15.913

这做你需要的吗？

```
SELECT uid, mutual_friend_count
FROM user
WHERE uid IN 
    (SELECT uid1 
     FROM friend 
     WHERE uid2 = me()) 
ORDER BY mutual_friend_count DESC 
```

# php - 使用 dirname(__FILE__) 是否存在安全风险？

> ID：12983581
> 
> 赞同：1
> 
> 时间：2012-10-19T23:01:39.163
> 
> 标签：php, security, dirname

查看 Joomla 的代码，我看到在索引的第一行，它定义了安装的基本路径

```
dirname(__FILE__) 
```

这是该站点可能存在风险的字体吗？我的意思是，如果非受控错误消息显示 Joomla 目录的内部路径，例如由于包含失败，它是否可以用于对站点执行某种攻击? 如果是，使用此功能是否方便？欢迎任何想法。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T23:04:42.490

使用这种结构是好的，本身并没有安全风险。您强调的安全风险是向生产站点上的最终用户显示错误消息。你不应该那样做！关闭错误报告。您可以更改 php.ini 中的适当设置，或者如果您无权访问 php.ini，则可以在代码开头执行此操作，如下所示：

```
error_reporting(0);
@ini_set('display_errors', 0); 
```

# c++ - 从带有opengl代码的c++转换为带有GUI的QT应用程序？

> ID：12983590
> 
> 赞同：2
> 
> 时间：2012-10-19T23:03:57.893
> 
> 标签：c++, qt, opengl

我用 C++（面向对象）编写了一个程序，我使用 OpenGL 来在屏幕上渲染一些东西。我还使用了 microsoft kinect SDK for windows ，现在我想为我的程序制作一个 GUI，使其更像带有菜单、按钮等的应用程序。我想知道是否可以按照我对 QT 所说的方式转换我的程序？什么样的改变是必要的？因为我对QT不太了解，有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T23:16:20.010

是的，Qt 对 OpenGL 和 C++ 非常友好。（它是用 C++ 编写的，甚至还有一个 QGLWidget 组件）。Plus 具有一般 GUI 编程所需的所有菜单和按钮等。

我建议从一个可以工作的 Qt OpenGL 应用程序开始——一个小的应用程序——然后添加你的 OpenGL 代码。

这个：[你好GL](http://doc.qt.digia.com/qt/opengl-hellogl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:03:54.647

在 Qt 中做 OpenGL 很容易。一些更好的材料是 Qt 中的 NeHe 实现。

[http://qt-project.org/wiki/NeHe_in_Qt](http://qt-project.org/wiki/NeHe_in_Qt)

从上面的 wiki 页面阅读了一些博客和示例后，我想你可以了解如何在 Qt 世界中使用 OpenGL。我不会把它们复制到这里，^_^。

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T23:20:15.577

这会很困难，而且工作量很大，但是您可以将 OpenGL 集成到 Qt 中。主要问题是更强大的 Qt 模型的不同（它带有按钮、窗口和许多使事情变得更容易的触发器）

你可能需要做一些工作来获得 Qt 基础。我会推荐一些类似于[http://www.trinitydesktop.org/docs/qt4/tutorials-addressbook.html](http://www.trinitydesktop.org/docs/qt4/tutorials-addressbook.html)的东西作为起点。本教程适用于比简单的 hello world 更复杂的应用程序，可能会让您更轻松地入门。

# javascript - 从一个移动选项到一个- 选项选择属性坏了？

> ID：12983592
> 
> 赞同：2
> 
> 时间：2012-10-19T23:04:27.113
> 
> 标签：javascript, html, drop-down-menu, prototypejs, dom-manipulation

我正在尝试为 Prototype 编写一个插件，用户单击下拉列表并将其替换为多选元素。我几乎完成了它。在用户选择他们想要显示的内容并将表单提交到同一页面之前，一切都很好。我正在使用 PHP 来保留用户使用标签`selected`属性选择的内容。`<option>`所以我的插件在此之后运行并将选项复制到多选，这就是问题所在。假设用户选择了 3 个项目，在多选的 html 代码中，所有 3 个项目都具有`selected`属性，但只有最后一个会突出显示，并且在此时重新提交表单时，它实际上只提交突出显示的一个。[**这是一个演示。**](http://jsfiddle.net/QVqA8/)对此的任何帮助都会很棒。谢谢。

**HTML**

```
<select id="test1">
    <option>Option 1</option>
    <option selected="selected">Option 2</option>
    <option selected="selected">Option 3</option>
</select>

<select id="test2" multiple="multiple">
</select>​ 
```

**JavaScript**

```
$('test1').childElements().each(function(option){
    $('test2').insert(option);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:14:53.130

因为第一个下拉菜单不是多选，并且它只能有一个选中项，所以 DOM 将被规范化，只有一个选项的`selected`属性设置为`true`.

好像当你复制它们时，属性仍然存在，所以你必须阅读它并`selected`相应地设置属性。

从未使用过原型，但我想出了这样的东西：

```
$('test1').childElements().each(function(option){
    $('test2').insert(option);
    option.selected = $(option).readAttribute('selected');
}); 
```

[jsFiddle](http://jsfiddle.net/QVqA8/1/) - 仅在 Chrome 中测试

# lotus-notes - 在 Lotus Notes 公式中排序

> ID：12983605
> 
> 赞同：0
> 
> 时间：2012-10-19T23:05:58.403
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

是否可以从 Lotus Domino 数据库中查询那些具有比给定数字/ID 更大的通用 ID 的文档，并使用 Lotus 公式查询通过它们的通用 ID 对它们进行排序？如果是，如何？

在 SQL 中，以下内容与我想要的类似：

```
SELECT universalId 
FROM all_documents
WHERE universalId > custom_value
ORDER BY universalId 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:47:10.910

是的：

```
SELECT @Text(@DocumentUniqueId) > custom_value 
```

这将在视图选择公式中起作用。如果您还为视图的第一列创建公式`@Text(@DocumentUniqueId)`，并为视图设置排序属性，那么您有`ORDER BY`.

选择公式也适用`NotesDatabase.Search()`于 LotusScript 或 COM 中的调用，或`Database.Search()`Java 中的调用。这会给你一个`NotesDocumentCollection`（或`DocumentCollection`在Java中），你可以编写代码对其进行排序。

注意：该`search()`方法在大型数据库中效率很低。

# jquery - jQuery 更改类 - div 在 Firefox 中消失，在 Chrome、IE、Safari 中正常

> ID：12983609
> 
> 赞同：2
> 
> 时间：2012-10-19T23:06:09.390
> 
> 标签：jquery, html, css, firefox

[在这里](http://www.aboveandbeyonduc.com/dry-ice-blasting-nj)，我在右侧边栏中有一个 div，它应该以这种方式运行：

1）当您向下滚动页面并且 div 到达浏览器屏幕的顶部时，它的类会发生变化，并且它将固定在屏幕顶部，直到您到达 div 的父元素的底部。

2）一旦 div 的底部到达父元素的底部，它的类就会变回非固定位置。

这是供您使用的 jsfiddle [http://jsfiddle.net/comparebest/z2Nyn/1/](http://jsfiddle.net/comparebest/z2Nyn/1/)

现在解决问题：

由于某种原因，在 FireFox 中，一旦 div 到达父元素的底部，div 就会消失，而在 Chrome、IE 和 Safari 中它仍然可见。

您可能需要缩小浏览器屏幕的大小才能观察此行为。

如何防止 div 在 FF 中消失？

PS：

继承人的jQuery代码：

```
 function fixInParent(selector) {
    var $el = $(selector);

    $(window).scroll(function() {
        if($el.parent().offset().top > $(this).scrollTop())
            $el.addClass('top').removeClass('floating').removeClass('bottom');
        else if ($(this).scrollTop() + $el.height() < $el.parent().offset().top + $el.parent().height())
            $el.addClass('floating').removeClass('top').removeClass('bottom');
        else
            $el.addClass('bottom').removeClass('top').removeClass('floating');
    });
}

$(document).ready(function() {
    fixInParent('#floater');
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:37:37.260

您面临的问题实际上非常简单，但有点烦人。根据*CSS 2.1*的规范，它指出：

> 'position:relative' 对 table-row-group、table-header-group、table-footer-group、table-row、table-column-group、table-column、table-cell 和 table-caption 元素的影响未定义。

来自*w3.org*：“ [9.3.1 选择定位方案：‘位置’属性](http://www.w3.org/TR/CSS21/visuren.html#choose-position)”

因此，即使所有其他浏览器都将这个值用作“*预期*”，Firefox 忽略它也没有错。因此，您应该考虑一个解决方案，其中父`<td>`元素`style="position:relative;"`不是您的“浮动”框的参考。

也许这里的答案可以帮助你：

“ [Firefox 是否支持位置：相对于表格元素？](https://stackoverflow.com/q/5148041/1456376) ”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:35:44.433

问题是 Firefox 对表格单元格上的相对定位的支持。请参阅：[Firefox 是否支持 position: relative 在表格元素上？](https://stackoverflow.com/questions/5148041/does-firefox-support-position-relative-on-table-elements)

**您的修复**：
应用于`position:relative`包含`<table>`标签，以便表格是定位上下文，而不是单元格。

这应该适用于您的情况，因为您只有一行单元格，并且它们`bottom`与表格相同。我能够让它在你的 Firebug 网站上工作；尽管不在您的小提琴中，因为在该示例中，单元格*未*与表格底部对齐。

# code-organization - 是否有组织复杂 Python 代码系统的良好标准？

> ID：12983610
> 
> 赞同：3
> 
> 时间：2012-10-19T23:06:14.633
> 
> 标签：code-organization

我有一个 python web 服务器，带有一个基于自定义文本的游戏和博客。我正在努力将代码分成可供参考的好地方，而事情正在失控。

要组织的事情：

*   单独的模块类
*   独立的模块功能
*   数据库调用和结果
*   处理用户输入
*   安全问题

在从事此类项目时，是否有任何指南或已知方法可以很好地遵循。我发现我的代码开始变得 WET（所有内容都写两次），我无法阻止它。我会很感激你们中许多有更多经验的人提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:19:56.250

如果您认为将应用程序分解成这些区域是合乎逻辑的，那么请开始创建模块并以任何对您有意义的方式移动代码。

没有*真正*正确的方法可以做到这一点，因为它对每个单独的用例都是主观的，但是有*一些*静态代码分析工具可以用来帮助提高代码的质量水平。

我经常使用的工具是 pep8（主要是为了遵守约定）和 pylint。pyflakes 显然也是另一个很棒的（我一直想使用它）。我发现在运行 pep8 和 pylint 之后，我所做的更改数量使我的代码更容易理解（我还了解了一些我之前做得不好的事情）并且结果总是更高整体质量代码。

顺便说一句，我阅读了@Omnikrys 的评论并且不同意。Python 作为一种多范式语言，如果您选择走这条路，它显然很适合 OOP。然而，我发现一旦你真正弄清楚如何在所有鸭式打字的荣耀中使用 Python，并真正接受“我们都是同意的成年人”的理念，你就可以开始写一些*非常*高质量的东西，*而不是*过度——工程解决方案。当然，这是很有争议的（我已经就这个主题进行了很多辩论）并且完全取决于你。

# xcode - 这到底是什么意思？

> ID：12983611
> 
> 赞同：-2
> 
> 时间：2012-10-19T23:06:20.513
> 
> 标签：xcode, macos

```
- (IBAction)theButton:(id)sender
   [[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:@"http://www.example.com/"]];
} 
```

我是新手，无法将其连接到主菜单中的按钮。你能解释一下这个东西是做什么的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:09:56.027

这是一种在调用时将在用户浏览器中打开 URL 的方法。

这`IBAction`只是一个标记，允许 XCode 知道这是一个动作，因此它可以让您将其链接到 Nib 中表单上的按钮（或类似的东西），以便在单击按钮时加载 URL .

`[NSURL URLWithString:@"http://www.example.com/"]`很明显地创建了一个 URL。

您可以[在文档中获得有关 NSWorkspace 的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)所有详细信息。

# erlang - 有 Erlang BERT-RPC 客户端吗？

> ID：12983612
> 
> 赞同：1
> 
> 时间：2012-10-19T23:06:38.157
> 
> 标签：erlang, bert-rpc

如果我在一台机器上有一个 BERT-RPC 服务器（Ernie），并且想从另一台机器上的 Erlang/OTP 应用程序与它通信，那么最好的课程是什么？有 Erlang BERT-RPC 客户端吗？

我想通过 gen_tcp 发送和接收消息不会太麻烦，但是已经有一个现有的、稳定的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:16:18.347

我们运行一个简单的`gen_server`using`gen_tcp`来处理来自 Rails 应用程序的传入 bert 请求。在那里的某个地方你会发现类似的东西：

```
handle_info({tcp, Socket, RawData}, State) ->
    Data = bert:decode(RawData),
    do_bert_crap(Data),
    ...
    gen_tcp:send(Socket, bert:encode({reply, whatever})),
    {noreply, State}. 
```

我们不会以这种方式处理很多请求。这仅在内部使用。

编辑：我们使用[bert.erl](https://github.com/mojombo/bert.erl)进行（反）序列化。

# java - 在 gwt 中设置地图时遇到了一些严重问题（java 编程）

> ID：12983615
> 
> 赞同：1
> 
> 时间：2012-10-19T23:07:15.733
> 
> 标签：java, google-maps, gwt, google-maps-markers

所以我尝试了简单的地图教程，以及预发布地图 v3.8 中的示例，我使用的是 GWT v2.4。无论我尝试什么，我都会收到此错误：

```
onModuleLoad() threw an exception

Exception while loading module com.google.gwt.worldbrewers.client.WorldBrewers. See Development Mode for details. 
```

然后下面说：

```
java.lang.reflect.InvocationTargetException 
```

那么导致它的原始原因是

```
Caused by: com.google.gwt.core.client.JavaScriptException: (TypeError): $wnd.google is undefined 
```

这是由这条线引起的：

```
LatLng myLatLng = LatLng.create(-34.397, 150.644); 
```

这个问题的解决方案真的很简单，因为无论我从这段代码中注释什么，我都会得到相同的异常：

```
 LatLng myLatLng = LatLng.create(-34.397, 150.644);
           MapOptions myOptions = MapOptions.create();
           myOptions.setZoom(8.0);
           myOptions.setCenter(myLatLng);
           myOptions.setMapTypeId(MapTypeId.ROADMAP);
           GoogleMap.create(Document.get().getElementById("map_canvas"), myOptions); 
```

有人可以向我展示一些非常基本的代码，可以工作并发布标记吗？当我删除所有上述代码时，我的程序并没有中断，所以它在那里（来自教程）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:42:22.093

似乎尚未加载 Google Maps JavaScript API。

在 gwt-maps-3.8.0 预发布库的 README 中，它有关于如何包含脚本文件的说明：

> 1) 更新您的主机文件以包含以下脚本标记：
> 
> ```
> <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=SENSOR_TRUE_OR_FALSE"></script> 
> ```

# javascript - 在 TypeScript 中使用 import/require 来获取接口声明

> ID：12983622
> 
> 赞同：8
> 
> 时间：2012-10-19T23:08:32.180
> 
> 标签：javascript, typescript, js-amd

如果我使用语法引用 TypeScript 声明文件（例如 jquery.d.ts）`/// <reference path="..."/>`，则由我来确保通过其他方式加载相应的库，即仅引用 .d.ts 文件不会加载图书馆。

有没有办法让 TypeScript`require()`在我使用它时生成对库的调用？如果我不使用 AMD/requirejs，我可以`require`手动调用，但我想让它与 AMD 一起工作。

这样做的好处是我的依赖项不会在两个地方定义。从 .ts 文件中引用库就足以确保它加载，而不必在我的 HTML 中手动维护依赖项列表。

**更新**：我打开了一个[新问题](https://stackoverflow.com/questions/13015898/asynchronous-load-of-typescript-declarations-with-no-exports)，澄清了我的确切情况。由于我没有提供所有必要的细节，因此我想对我最初的问题的答案表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T23:35:33.230

是的，TypeScript 支持“外部”模块，这些模块基本上是一流的 AMD 或 CommonJS 模块。例如：

MyLib.ts

```
export function foo() { return 'bar' } 
```

我的项目

```
import lib = module('./MyLib.ts')
lib.foo(); // returns bar 
```

用“--module amd”编译它，你会得到正确的模块和为你生成的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T23:17:14.397

我在我的博客上写了[一些](http://absolom-programming.blogspot.ca/2012/10/typescript-amd-with-js-library.html)关于它的东西。[您还可以在GitHub 上](https://github.com/joproulx/JsLibImporter)找到示例。

该解决方案的解释相当长，但基本上我使用带有 Require.JS 的垫片来定义代表我要加载的 Javascript 库的模块名称。然后我创建一个同名的 TypeScript 文件，让 TypeScript 编译器生成可以使用我想要的 JS 库的 Javascript 代码。像这样真的没有意义，但请阅读帖子，我认为它会更有意义。

# model-view-controller - 模型、视图或控制器中的零填充？

> ID：12983626
> 
> 赞同：1
> 
> 时间：2012-10-19T23:09:22.330
> 
> 标签：model-view-controller

在我的圈子里，关于在哪里填充数字存在一些分歧：模型、视图或控制器。由于该数字作为数字存储在数据库中，因此必须在需要时对其进行填充以进行显示。

意见？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:12:47.400

这可能更多地取决于偏好而不是协议，但我觉得这应该发生在模型中。这样，您的控制器就可以接收到漂亮、干净的数据，并且根本不需要修改数据。我相信有些人会说控制器应该处理它，因为该模型严格用于数据库方法，但我认为我不同意这一点。

我想我们都可以同意，这当然不应该出现在视图中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:48:05.010

*   如果您正在实现经典的 MVC、MVP 或 Model2 MVC 模式，则应该在视图中完成。在您从模型层请求数据的部分附近。

*   如果您实际上使用 MVVM 模式，那么在 View 或 ViewModel 中（MVVM 模式适用于当您无法完全控制模型层和视图并且需要在它们之间创建适配器的情况）。

*   如果您正在使用某些 Rails 克隆，将术语“MVC”用于营销目的，则格式应该是他们称之为“视图助手”的东西。

> [来自 ASP.NET MVC 的愚蠢的人倾向于称它为“ViewModel”，因为他们已经决定使用名称“View”来引用模板。而现在，MS 没有固定命名约定一种模式，而是选择了另一种模式——MVVM。干得好，女士。像往常一样非常适合工作保障。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:26:39.600

我还敢说填充属于模型，更具体地说 - 视图模型。确实，模型对于从数据库传输数据很有用。使用视图模型将数据从控制器传输到视图也是有意义的，保持视图本身“哑”并且模型单元可测试。至少在 asp.net 的简化形式的 MVC 中是这样。

# scala - Play Framework 20 - 在视图中创建表单

> ID：12983629
> 
> 赞同：1
> 
> 时间：2012-10-19T23:09:38.610
> 
> 标签：scala, playframework-2.0

我是新手！20，我需要将一个对象传递给模板以及同一对象的一个​​表单，例如：

```
@(filter: Filter)(filterForm: Form[Filter]) 
```

我可能做错了什么，因为这不是 DRY。访问过滤器方法并在与该对象相关的视图中创建表单的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:59:22.360

最好只使用`Form`对象，因为如果表单没有错误，您可以[从中获取内部对象。](http://www.playframework.org/documentation/api/2.0.4/scala/play/api/data/Form.html#get%3aT)

像这样的东西：

```
@if(!filterForm.hasErrors) {
    @defining(filterForm.get) { filter =>
      ...
    }
} 
```

# mysql - 带有嵌套连接和选择的 SQL 查询

> ID：12983630
> 
> 赞同：0
> 
> 时间：2012-10-19T23:09:45.357
> 
> 标签：mysql, sql, syntax

我试图从我的数据库中的菜单项列表中的多层菜单中组合在一起。这是我的查询。fl=第一级，sl=第二级，等等。

这是查询：

```
SELECT name as flName,id AS flId
FROM menu_items AS m1
WHERE parent_id = 0
INNER JOIN (SELECT name AS slName, id AS slId, parent_id AS slPid FROM menu_items)
m2 ON m1.firstLevelId = m2.parent_id
INNER JOIN (SELECT name AS tlName, id AS tlId, parent_id AS tlPid FROM menu_items)
m3 ON m2.id = m3.parent_id 
```

我得到的错误是：

```
PersistenceException: Query threw SQLException:You have an error in your SQL syntax.  
check the manual that corresponds to your MySQL server version for the right syntax to 
use near 'INNER JOIN (SELECT name AS slName, id AS slId, parent_id AS slPid FROM  
menu_item' 
```

但这对我来说似乎是有效的，我不知道。我很确定我之前已经对子查询进行过连接。我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:12:50.903

将 where 子句移到末尾，如下所示：

```
SELECT name as flName,id AS flId
FROM menu_items AS m1 INNER JOIN (
        SELECT name AS slName, id AS slId, parent_id AS slPid FROM menu_items
    ) m2 ON m1.firstLevelId = m2.parent_id
    INNER JOIN (
        SELECT name AS tlName, id AS tlId, parent_id AS tlPid FROM menu_items
    ) m3 ON m2.id = m3.parent_id
WHERE parent_id = 0 
```

# java - 使用具有多个排除字段的 java 正则表达式进行排除

> ID：12983632
> 
> 赞同：0
> 
> 时间：2012-10-19T23:10:09.293
> 
> 标签：java, regex

对不起，伙计们，我用谷歌搜索了，仍然无法让我的代码工作。不完全是java的高手（还没有，但给我时间:-)）。我有一个 xml 文档，我正在使用 DOM 解析器来读取、提取类属性，现在我需要使用正则表达式排除其中一些属性。例如，到目前为止我的输出是：

```
[[#text: ns1:Spare3]]

[[#text: ns1:Spare4]]

[[#text: ns1:Spare5]]

[[#text: ns1:Street]]

[[#text: ns1:Anything]]

[[#text: ns1:TearLineDateUpdated]]

[[#text: ns1:SourceReportTearline]]

[[#text: ns1:AnyFilter]]

[[#text: ns1:UpdatedByTelecom]]

[[#text: ns1:UpdatedByName]] 
```

我需要排除那些包含单词的行`Spare`，或者以`TearLine`（不区分大小写）和其他一些开头。

我的代码片段（我写来测试）说：

```
Pattern p = Pattern.compile(".*?\\Spare\\(.*?\\)",    
Pattern.CASE_INSENSITIVE|Pattern.DOTALL | Pattern.MULTILINE);
Matcher m = p.matcher((nl.item(i)).toString());
if (m.matches())
{
System.out.println("["+nl.item(i)+"]" + "matched"); 
}
else
{
System.out.println("["+nl.item(i)+"]" + "not matched");     
} 
```

我如何排除任何包含单词的`Spare`行和任何以开头的行`TearLine`（但`TearLine`可以出现在单词的其他地方，这没关系）。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:17:12.507

这些是您要匹配的实际字符串吗？也就是说，DOM 解析器生成了这些字符串，而现在您正在对它们应用正则表达式？如果是这样，你想要这样的东西：

```
Pattern p = Pattern.compile(
    "ns1:(tearline|.*spare)", Pattern.CASE_INSENSITIVE
);
Matcher m = p.matcher("");

String[] inputs = {
    "[[#text: ns1:Spare3]]",
    "[[#text: ns1:Spare4]]",
    "[[#text: ns1:Spare5]]",
    "[[#text: ns1:Street]]",
    "[[#text: ns1:Anything]]",
    "[[#text: ns1:TearLineDateUpdated]]",
    "[[#text: ns1:SourceReportTearline]]",
    "[[#text: ns1:AnyFilter]]",
    "[[#text: ns1:UpdatedByTelecom]]",
    "[[#text: ns1:UpdatedByName]]"
};

for (String s : inputs)
{
  System.out.printf( "%n%5b => %s%n", !m.reset(s).find(), s );
} 
```

输出：

```
false => [[#text: ns1:Spare3]]

false => [[#text: ns1:Spare4]]

false => [[#text: ns1:Spare5]]

 true => [[#text: ns1:Street]]

 true => [[#text: ns1:Anything]]

false => [[#text: ns1:TearLineDateUpdated]]

 true => [[#text: ns1:SourceReportTearline]]

 true => [[#text: ns1:AnyFilter]]

 true => [[#text: ns1:UpdatedByTelecom]]

 true => [[#text: ns1:UpdatedByName]] 
```

笔记：

*   我使用`find()`了而不是`matches()`所以我的正则表达式只需要匹配我感兴趣的部分，而不是整个字符串。

*   其他一些响应者之所以使用`^TearLine`，是因为您说该词必须出现在行首，但如果我的猜测是正确的，您真的想在`ns1:`前缀之后匹配它。另一方面，`.*spare`允许`spare`出现在任何地方，而不仅仅是在开头（`.*?spare`也可以）。

*   类似地，Ωmega`"\\bSpare\\b"`假设您只对*完整*的单词感兴趣`Spare`。我省略了边界（`\b`）这个词，因为您似乎想要匹配诸如`Spare3`或（我猜）之类的东西`FooSpare`。

*   我不知道您为什么要添加`\\(.*?\\)`到您的正则表达式中，因为您的示例字符串中没有括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:32:58.743

没关系使用所有这些代码行 - 只需使用这个简单的一行代码`String.matches()`：

```
if (nl.item(i).toString().matches("(?i)(?s).*ns1:(spare|tearline).*")) {
    // not matched
else {
    // matched
} 
```

fyi`(?i)`使正则表达式不区分大小写，并且`(?s)`是`Pattern.DOTALL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:20:10.167

使用正则表达式模式

```
^(?:TearLine.*|.*\\bSpare\\b) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T23:15:18.117

您可能想摆脱第一个反斜杠

```
".*?Spare\\(.*?\\)" 
```

因为`\S`匹配任何不是空白的东西。

另一方面，您的正则表达式需要如下所示：

```
"ns1:tearline.*" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T23:17:58.137

要匹配以 TearLine 开头的行：

```
^TearLine 
```

要匹配包含 Spare 的行：

```
Spare 
```

将它们组合在一个表达式中：

```
(?:^TearLine)|(?:Spare) 
```

# java - 如何在 JSTL 中打印出数组对象的索引

> ID：12983633
> 
> 赞同：0
> 
> 时间：2012-10-19T23:10:09.893
> 
> 标签：java, html, arrays, jstl

我在 JSTL 中有一个问题，我有一个来自 servlet 中设置的请求属性的数组对象。我要做的就是打印数组的索引。请问有什么帮助吗？这是代码：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="/WEB-INF/tlds/Functions" prefix="func"%>
<table>
    <tr>
        <td>
            <b>k</b> = 
        </td>
        <td>
            <table border="1">
                <c:forEach var="i" begin="0" end="${responseVector.length}">
                <tr>
                    <td>k<sub>${i}</sub></td><!-- I wish to print the indexes here -->
                </tr>
                </c:forEach>
            </table>
        </td>
        <td>
            <table border="1">
                <c:forEach var="i" items="${responseVector}">
                <tr>
                    <td>${func:roundOff(i, 4)}</td>
                </tr>
                </c:forEach>
            </table>
        </td>
    </tr>
</table>
<br/> 
```

在上面的代码中，responseVector 是一个双精度数组对象，但我希望第一个循环中的变量 i 在每次循环迭代时打印数组对象的索引。我的预期输出是：k0, k1, k2, ... 但我有一个异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:16:58.023

试试这个：（使用`varStatus`属性）

```
<c:forEach items="${responseVector}" var="r" varStatus="status">
  <c:out value="${status.index}"/>
</c:forEach> 
```

`${status.index}`会给你：

> 检索当前轮次迭代的索引。如果在底层数组、java.lang.Collection 或其他类型的子集上执行迭代，则返回的索引相对于底层集合是绝对的。索引从 0 开始。

更多信息[在这里](http://docs.oracle.com/cd/E17802_01/products/products/jsp/jstl/1.1/docs/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html#getIndex%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:46:53.437

在 Paulius Matulionis 的建议的帮助下，我想通了。这是我使用的正确代码：

```
<%-- 
    Document   : DisplayResponseVector
    Created on : Sep 14, 2012, 5:33:41 PM
    Author     : Jevison7x
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="/WEB-INF/tlds/Functions" prefix="func"%>
<table>
    <tr>
        <td>
            <b>k</b> = 
        </td>
        <td> 
            <table border="1">
                <c:forEach var="i" items="${responseVector}" varStatus="sub">
                <tr>
                    <td>k<sub>${sub.count - 1}</sub></td>
                </tr>
                </c:forEach>
            </table>
        </td>
        <td>
             = 
        </td>
        <td>
            <table border="1">
                <c:forEach var="i" items="${responseVector}">
                <tr>
                    <td>${func:roundOff(i, 4)}</td>
                </tr>
                </c:forEach>
            </table>
        </td>
    </tr>
</table>
<br/> 
```

上面的代码完美地完成了工作！感谢大家。

# mingw - 如何在 MinGW 中包含库 MPICH2

> ID：12983635
> 
> 赞同：3
> 
> 时间：2012-10-19T23:10:33.840
> 
> 标签：mingw, mpi, mpich

我不断收到错误：

```
 fatal error: mpi.h: No such file or directory 
```

我如何包含`mpi.h`为默认库？我相信我已经放`c:\MPICH2\bin`了系统变量>路径

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:32:19.150

编译器找不到头文件。系统 PATH 变量与此无关。

为了运行编译器，它需要位于系统 PATH 上（当您在命令行上键入它时，操作系统会在此处查找“gcc”）。一旦 GCC 运行，它需要知道在哪里可以找到头文件。`-I`您可以使用以下标志添加包含路径：

```
gcc -I"C:/Program Files (x86)/MPICH2/include" -c -o main.o main.c 
```

完成后，所有内容都已编译，下一步就是链接程序。您将需要使用`-L`标志指定库的路径：

```
gcc -L"C:/Program Files (x86)/MPICH2/lib" -o main.exe main.o -lmpi 
```

通常这是由`mpicc`脚本处理的，因此您不必担心这一点。不过，`mpicc`预构建的 Windows MPICH2 附带的不能与 MinGW 一起使用（我认为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T10:50:59.097

我在 Ubuntu 13.10 上遇到了同样的问题。在 .zshrc （或 .bashrc 如果你使用 bash shell）中添加这一行

```
export C_INCLUDE_PATH=/usr/lib/openmpi/include 
```

为我做了伎俩

# c# - Bitshifting Int16 仅适用于文字

> ID：12983636
> 
> 赞同：5
> 
> 时间：2012-10-19T23:10:49.620
> 
> 标签：c#, bit-shift, short

当我在 VS 中编写此代码时，它不起作用（“无法将'int'隐式转换为'short'。存在显式转换。您是否缺少演员表？”）：

```
short A = 5;
short B = 1 << A; 
```

然而这段代码绝对没问题：

```
short A = 1 << 5; 
```

我知道我可以通过将整个表达式转换为简短来消除错误，但是谁能告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:13:16.287

因为 A 不是文字，所以编译器不知道*结果*可以表示为 a `short`。因此它需要一个明确的演员表。使用文字 5，编译器会看到结果是 32，它可以放入`short`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:18:17.767

C# 语言规范 4.0 在 6.1.9 中声明：

> 如果常量表达式的值在目标类型的范围内，则 int 类型的常量表达式（第 7.18 节）可以转换为 sbyte、byte、short、ushort、uint 或 ulong 类型。

常量表达式的转换是隐含的特殊情况之一（6.1）。

# c# - 从公共静态类调用函数

> ID：12983637
> 
> 赞同：0
> 
> 时间：2012-10-19T23:11:01.753
> 
> 标签：c#, asp.net, static-methods

我是 ASP.NET 的新手。

我真的需要帮助，因为我被困住了。我在谷歌上做了很多阅读，无法弄清楚我做错了什么。

> 错误：CS0103：当前上下文中不存在名称“MyClass”

我有一个 MyClass.cs 文件，我喜欢在该文件的任何页面上重用该函数。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MyNameSpace
{
    public static class MyClass
    {

        //
        // TODO: Add constructor logic here
        //

        public static string FormatDateNoTime(string input)
        {
            string thedate;
            DateTime strDate = DateTime.Parse(input);
            thedate = strDate.ToString("MM/dd/yyyy");
            return thedate;
        }

        public static string test()
        {
            return "1234";
        }

    }
} 
```

另一个Page2.aspx.cs调用了这个函数，但是报错

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;

using MyNameSpace;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Write(MyClass.FormatDateNoTime("02/01/2012"));
    }
} 
```

有人可以帮忙吗，我只是想在任何页面中重用这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:45:28.443

在这：

```
Response.Write(MyClass.FormatDateNoTime("02/01/2012")); 
```

右键单击`MyClass`并选择“resolve”，其中应包含添加命名空间或使用类型的完全限定名称的选项。

如果解析不存在，请从包含 Page2.aspx.cs 的程序集中添加对包含 MyClass.cs 的程序集的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:35:46.090

这是我的建议

*   您需要`MyClass`通过包含`using namespaceOfMyClass`或同时包含调用者类和被调用的类来导入的命名空间应该属于同一个命名空间

*   有时默认情况下不编译该类。右键单击解决方案资源管理器中的文件，然后单击属性。检查`Build Action`属性并确保它显示“编译”

*   从最顶层构建您的项目，例如解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T08:20:30.180

我有同样的问题。我解决了重启VS的问题。重新启动后，我的项目中看不到有问题的类的 cs 文件。我再次将文件添加到解决方案资源管理器中的项目并构建了完整的项目。

# php - php mysql数组结果问题

> ID：12983640
> 
> 赞同：0
> 
> 时间：2012-10-19T23:11:35.363
> 
> 标签：php

我有书籍和作者的数据库。这两个实体之间的关系是多对多的，因此它们之间有一个联合表。

1.  `books`has `books.book_id`as primary, `authors.author_id`as primary 和联合表`book_authors`有：`book_authors.book_id`和`book_authors.author_id`.

2.  每本书都有不止一位作者。

我想要做的是有一个 php 页面，在一行中显示每本书，然后在下面显示：author1:....，author2（如果适用）

我希望我的 php 看起来有点像：

```
Book Name: THE BOOK NAME
Author(s): joe- John- Sara 
```

我使用了以下代码，问题是它返回单个结果。因此，如果 book1 由多个作者撰写，则每次都会与不同的作者一起显示不止一次。我想做的是让每本书后面跟着一系列作者

```
<html>
<body>

<?php
$con = mysql_connect("localhost","myusername","mypassword");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("mydb", $con);

$result1 = mysql_query("
    SELECT books.title, authors.fname, authors.lname 
    FROM books, book_authors, authors  
    WHERE books.book_id = book_authors.book_id 
    AND authors.author_id=book_authors.author_id");

while($row = mysql_fetch_array($result1))
  {
print "<h3>Book Name:</h3>";
  echo $row ['title'];
print "<br />";
print "Author(s):";
  echo $row ['fname'];
  echo $row ['lname'];
  echo "<br />";
  }

mysql_close($con);
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:21:35.950

这是一个可以解决问题的查询：

```
SELECT books.title, authors.fname, authors.lname FROM books LEFT JOIN
book_authors ON books.book_id = book_authors.book_id LEFT JOIN authors
ON authors.author_id = book_authors.author_id 
```

您必须仔细检查 book_id 是否与行作者相同。

另一种方法是首先选择书籍，然后在您的 foreach 循环中，通过 book_authors 表查找该书的作者。

另一件需要注意的是[mysql_*](http://php.net/manual/en/function.mysql-query.php)函数已被弃用，您应该考虑使用[mysqli_*](http://www.php.net/manual/en/mysqli.query.php)或[PDO](http://www.php.net/manual/en/pdo.query.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:23:02.613

您的 sql 查询不正确。它需要像这样格式化。

`SELECT column_name(s) FROM table_name1 INNER JOIN table_name2 ON table_name1.column_name=table_name2.column_name`

`SELECT books.title, authors.fname, authors.lname FROM books INNER JOIN authors ON books.book_id = authors.book_id`

SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo FROM Persons INNER JOIN Orders ON Persons.P_Id=Orders.P_Id ORDER BY Persons.LastName

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:26:14.357

尝试`group_concat`

```
SELECT books.title, group_concat(concat(authors.fname,' ',authors.lname) AS Authors
FROM books, book_authors, authors  
WHERE books.book_id = book_authors.book_id 
AND authors.author_id=book_authors.author_id
GROUP BY books.title 
```

然后在 PHP

```
 while($row = mysql_fetch_array($result1))
  {
     print "<h3>Book Name:</h3>";
     echo $row ['title'];
     print "<br />";
     $authors = explode($row['Authors']); //array of authors

     for($authors as $author)
     {
        echo($author.'<br/>')
     }
   } 
```

您可以改用 JOIN

```
SELECT books.title, GROUP_CONCAT(authors.fname) AS Authors 
FROM books
LEFT JOIN book_authors ON books.book_id = book_authors.book_id
LEFT JOIN authors ON book_authors.author_id = authors.author_id
GROUP BY books.title 
```

# web-services - htaccess 允许 .txt 文件

> ID：12983643
> 
> 赞同：5
> 
> 时间：2012-10-19T23:12:15.023
> 
> 标签：web-services, .htaccess

在网络文件夹中，我目前无法`.txt`通过浏览器中的 URL 访问文件。如何修改我的`htaccess`文件，以便`.txt`可以通过浏览器中的 URL 访问具有类型的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:09:09.523

在 htaccess 文件中插入以下代码：

```
<FilesMatch "\.(txt)$">
  Order Deny,Allow 
  Allow from all
</FilesMatch> 
```

这将允许访问所有 txt 文件。如果您希望拒绝除一个特定文件之外的所有文件：

```
 Order Deny,Allow 
 Deny from All 
<Files "view_only_this_file.txt"> 
  Order Deny,Allow 
  Allow from All 
</Files> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:31:59.937

如果 Sergio 提到的将设置添加到您的 .htaccess 文件中不起作用，您可能必须直接进入您的 VirtualHost 条目。并添加规则。我会让这里更有经验的 apache 人加入进来，但这就是我要去的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-18T09:20:20.317

非常感谢塞尔吉奥！我已更改您的代码以允许特定的 txt 文件：

```
<Files "unternehmenscocktail.txt"> 
  Order Deny,Allow 
  Allow from all
</Files> 
```

# xaml - 我可以在 XAML 中定义变量吗？

> ID：12983645
> 
> 赞同：5
> 
> 时间：2012-10-19T23:12:24.357
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

因此，这在 WPF 和 SL 中曾经是可能的：

```
<Grid.Resources>
    <x:Double x:Name="MyDouble">1.2</x:Double>
</Grid.Resources> 
```

但在 WinRT-XAML 中，它只是强调：

> 处理初始化字符串“1.2”时发生 TypeConverter 语法错误

有人知道这样做的诀窍吗？

**解决方案**

使用 x:Key 而不是 x:Name！

```
<Grid.Resources>
    <x:Double x:Key="MyDouble">1.2</x:Double>
</Grid.Resources> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:53:27.543

我也得到了这个：“类型'Double'和一般的“值类型”，不能使用x：Name”

如果您从 x:Name 切换到 x:Key - 它工作正常。

# java - android 应用程序作为 Web 服务的客户端

> ID：12983646
> 
> 赞同：0
> 
> 时间：2012-10-19T23:12:29.897
> 
> 标签：java, android, web-services

> **可能重复：**
> [Android HttpClient：NetworkOnMainThreadException](https://stackoverflow.com/questions/11736530/android-httpclient-networkonmainthreadexception)

我在创建一个 android 应用程序时遇到了麻烦，该应用程序假设是
我在 java (eclipse) 中创建的 web 服务的客户端。
这真的很基本，但仍然不起作用..

网络服务类：

```
package com.ws;

public class Converter {

    public Converter () {
    }

    public String sayHello(String name) {
        return "Hello " + name + "!"; 
    }
} 
```

android 应用程序中的类：（我为此使用[了本](http://www.insightforfuture.blogspot.co.il/search/label/Android)教程）

```
package MyConverter.Android;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class access extends Activity {

    private String METHOD_NAME = "";
    // our webservice method name
    private String NAMESPACE = "http://ws.com";
    // Here package name in webservice with reverse order.
    private String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    // NAMESPACE + method name
    // private static final String URL =
    private static final String URL = "http://my-ip:8080/ConverterWebSrvice/services/Converter";

    // you must use ipaddress here, don’t use Hostname or localhost

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.access);

        Button b2 = (Button) findViewById(R.id.button2);
        b2.setOnClickListener(new OnClickListener(){ 
            public void onClick(View v){      
                ws();
            }});
        }

    public void ws() {
        String name = "Dan";

        METHOD_NAME = "sayHello";
        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("name", name);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Object result = envelope.getResponse();
            ((TextView) findViewById(R.id.textView1)).setText(name
                    + " Longitude is : " + result.toString());

        } catch (Exception E) {
            E.printStackTrace();
            ((TextView) findViewById(R.id.textView1)).setText("ERROR:"
                    + E.getClass().getName() + ":" + E.getMessage());
        }
    }
} 
```

这就是我运行整个事情的方式：
1\. 我为 Converter 项目执行“运行方式 > 在服务器上运行”
2\. 我为应用程序项目执行“运行方式 > android 应用程序”

模拟器运行，当我按下按钮时，我收到了“不幸的是”消息。
在 LogCat（在 eclipse 中）我看到以下消息：

```
10-19 22:29:41.250: W/System.err(643): android.os.NetworkOnMainThreadException
10-19 22:29:41.260: W/System.err(643):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-19 22:29:41.270: W/System.err(643):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-19 22:29:41.270: W/System.err(643):  at libcore.io.IoBridge.connectErrno(IoBridge.java:144)
10-19 22:29:41.270: W/System.err(643):  at libcore.io.IoBridge.connect(IoBridge.java:112)
10-19 22:29:41.270: W/System.err(643):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-19 22:29:41.280: W/System.err(643):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-19 22:29:41.280: W/System.err(643):  at java.net.Socket.connect(Socket.java:842)
10-19 22:29:41.290: W/System.err(643):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
10-19 22:29:41.290: W/System.err(643):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-19 22:29:41.300: W/System.err(643):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
10-19 22:29:41.300: W/System.err(643):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
10-19 22:29:41.300: W/System.err(643):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-19 22:29:41.300: W/System.err(643):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
10-19 22:29:41.310: W/System.err(643):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
10-19 22:29:41.310: W/System.err(643):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
10-19 22:29:41.320: W/System.err(643):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
10-19 22:29:41.320: W/System.err(643):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-19 22:29:41.320: W/System.err(643):  at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
10-19 22:29:41.330: W/System.err(643):  at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:109)
10-19 22:29:41.330: W/System.err(643):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:157)
10-19 22:29:41.350: W/System.err(643):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
10-19 22:29:41.350: W/System.err(643):  at MyConverter.Android.access.ws(access.java:53)
10-19 22:29:41.350: W/System.err(643):  at MyConverter.Android.access$1.onClick(access.java:37)
10-19 22:29:41.360: W/System.err(643):  at android.view.View.performClick(View.java:4084)
10-19 22:29:41.360: W/System.err(643):  at android.view.View$PerformClick.run(View.java:16966)
10-19 22:29:41.370: W/System.err(643):  at android.os.Handler.handleCallback(Handler.java:615)
10-19 22:29:41.380: W/System.err(643):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-19 22:29:41.390: W/System.err(643):  at android.os.Looper.loop(Looper.java:137)
10-19 22:29:41.390: W/System.err(643):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-19 22:29:41.402: W/System.err(643):  at java.lang.reflect.Method.invokeNative(Native Method)
10-19 22:29:41.402: W/System.err(643):  at java.lang.reflect.Method.invoke(Method.java:511)
10-19 22:29:41.410: W/System.err(643):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-19 22:29:41.410: W/System.err(643):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-19 22:29:41.410: W/System.err(643):  at dalvik.system.NativeStart.main(Native Method)
10-19 22:29:41.420: D/AndroidRuntime(643): Shutting down VM
10-19 22:29:41.420: W/dalvikvm(643): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-19 22:29:41.450: E/AndroidRuntime(643): FATAL EXCEPTION: main
10-19 22:29:41.450: E/AndroidRuntime(643): java.lang.NullPointerException
10-19 22:29:41.450: E/AndroidRuntime(643):  at MyConverter.Android.access.ws(access.java:60)
10-19 22:29:41.450: E/AndroidRuntime(643):  at MyConverter.Android.access$1.onClick(access.java:37)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.view.View.performClick(View.java:4084)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.view.View$PerformClick.run(View.java:16966)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.os.Handler.handleCallback(Handler.java:615)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.os.Looper.loop(Looper.java:137)
10-19 22:29:41.450: E/AndroidRuntime(643):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-19 22:29:41.450: E/AndroidRuntime(643):  at java.lang.reflect.Method.invokeNative(Native Method)
10-19 22:29:41.450: E/AndroidRuntime(643):  at java.lang.reflect.Method.invoke(Method.java:511)
10-19 22:29:41.450: E/AndroidRuntime(643):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-19 22:29:41.450: E/AndroidRuntime(643):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-19 22:29:41.450: E/AndroidRuntime(643):  at dalvik.system.NativeStart.main(Native Method)
10-19 22:29:44.060: I/Process(643): Sending signal. PID: 643 SIG: 9 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:18:20.013

您最基本的问题是您试图在 UI 线程上进行网络访问，这在 Android 中是禁止的。您可能应该查找 AsyncTask 的文档，并使用它来建立网络。

本教程似乎与您的问题密切相关： [http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:34:12.790

您正在 UI/主线程中进行网络访问。开始查看 Android 的 AsyncTask。对您的代码进行了快速更新，以包含一个 AsyncTask，这可能需要根据您的需要进行更新。

```
public class LoginAcitivity extends Activity {

    private String METHOD_NAME = "";
    // our webservice method name
    private String NAMESPACE = "http://ws.com";
    // Here package name in webservice with reverse order.
    private String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    // NAMESPACE + method name
    // private static final String URL =
    private static final String URL = "http://my-ip:8080/ConverterWebSrvice/services/Converter";

    // you must use ipaddress here, don’t use Hostname or localhost

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.access);

        Button b2 = (Button) findViewById(R.id.button2);
        b2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                AccessWebServiceTask task = new AccessWebServiceTask();
                task.execute();
            }
        });
    }

    public void ws() {
        String name = "Dan";

        METHOD_NAME = "sayHello";
        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("name", name);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Object result = envelope.getResponse();
            ((TextView) findViewById(R.id.textView1)).setText(name
                + " Longitude is : " + result.toString());

        } catch (Exception E) {
            E.printStackTrace();
            ((TextView) findViewById(R.id.textView1)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
        }
    }

    class AccessWebServiceTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            ws();
            return null;
        }

    }

} 
```

# ios - 将简单的点击识别添加到 iPad 应用程序

> ID：12983652
> 
> 赞同：2
> 
> 时间：2012-10-19T23:13:09.140
> 
> 标签：ios, ipad, uiview, uiviewcontroller, touch

我刚刚开始尝试学习如何为 iPad 编写应用程序。我有 C、C++ 和 Java 方面的经验，但总体上对 Objective C ios 还是很陌生。

我有一个自定义 UIView 可以在屏幕上绘制一条数字线，并且我有一些工作按钮可以触发该视图中的方法。

我想做的是在我的 UIView 中触摸绘制的数字线调用一个方法。更一般地说，背景上的任何点击都应该使用屏幕坐标调用此方法，这样我就可以决定他们是否触摸了正确的位置以及要做什么。

我已经搜索了好几个小时来获取信息，并且有点绕圈子。据我所知，将手势识别代码添加到 ViewController 而不是 UIView 是正常的（我让 Xcode 自动为我做尽可能多的事情，所以对这些不同的部分只有非常基本的了解）。

问题是程序的所有“大脑”都在 UIView 中（我想将绘制的箭头移动到数字行上的新点击位置）。但是，如果我在 ViewController 中有一个响应触摸事件的方法，我无法弄清楚如何从我的控制器中调用我的 UIView 方法。

最简单的方法是直接在我的 UIView 子类中从触摸事件调用的方法。

到目前为止，我所做的只是使用 Xcode 设置一个单一视图应用程序并创建一个 UIView 子类（称为 FracLine），然后绘制数字线和一个箭头。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:59:52.327

如果您查看[UIResponder](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/cl/UIResponder)的文档（从 UIView 继承），您将在底部附近看到与触摸相关的方法。这些方法都为您提供了一个包含 UITouch 对象的 NSSet 触摸。[UITouch](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)有一个名为 locationInView 的实例方法：它会给你一个 CGPoint 来查看它被触摸的位置。

# java - 我如何询问用户某事，然后保存答案并再次重复询问相同的内容

> ID：12983654
> 
> 赞同：1
> 
> 时间：2012-10-19T23:13:15.500
> 
> 标签：java, loops, while-loop, nested

好的，下面的代码（我是新手，请多多包涵）我希望能够向用户提问：

```
System.out.println("Will the customer be adding any options to the order?");
System.out.println("1\. Bed Frame ($39.99)");
System.out.println("2\. Pillows ($59.99)");
System.out.println("3\. Blankets ($129.99)");
System.out.println("4\. No Options added. Enter No"); 
```

1.  客户将回答 1-4，然后通过循环询问客户是否要添加其他任何内容/您确定您不想添加任何内容。如果没有，客户将被发送到另一个班级（更多问题） . 如果是，客户会再次被问到同样的“客户会不会……”问题。
2.  客户添加让我们说项目 1 并通过一个循环并询问客户是否要添加其他任何内容/您确定您不想添加任何内容。如果没有，则发送到另一个班级。如果是，客户会再次被问到同样的“客户会不会……”问题。一旦用户回答完问题，答案将与客户添加的产品的名称和价格一起保存并打印在 writeOutput() 行中。

我知道这是一个循环，但我不知道如何实现这种循环。任何人都可以帮我填空吗？谢谢你。以下是完整代码

```
import java.util.Scanner;
public class addons 
```

{

```
 private int Option;
    private String Bed_Frame, Pillows, Blankets, No_Options_Added;
    private String Name;
    private double Price;
    public void readInput()
    {

        Scanner keyboard = new Scanner(System.in);
        System.out.println("Will the customer be adding any options to the order?");
         System.out.println("1\. Bed Frame ($39.99)");
      System.out.println("2\. Pillows ($59.99)");
         System.out.println("3\. Blankets ($129.99)");
         System.out.println("4\. No Options added. Enter No");
        Option = keyboard.nextInt();

       switch (Option)
            {
                case 1:
                   Name = "Bed Frame";
                    Price = 39.99;
                    break;
                case 2:
                   Name = "Pillows";
                   Price = 59.99;
                    break;
                 case 3:
                   Name = "Blankets";
                   Price = 129.99;
                    break;
                 case 4:
                 Name = "No Options Added";
                 System.out.println("No options added");
                   Price = 0;
                    break;
            }
    }

    public void writeOutput()
    {
        System.out.println(Name);
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:19:34.270

只需添加一个`while(true) { ... }`块，您可以在问题之后添加一个条件 - 如果答案是“是” - 使用`break`（不是在 switch-case 块中！）完成重复循环：

```
 public void readInput() {

        Scanner keyboard = new Scanner(System.in);
        while (true) {  //ADDED THE WHILE LOOP
           System.out.println("Will the customer be adding any options to the order?");
           System.out.println("1\. Bed Frame ($39.99)");
           System.out.println("2\. Pillows ($59.99)");
           System.out.println("3\. Blankets ($129.99)");
           System.out.println("4\. No Options added. Enter No");
           Option = keyboard.nextInt();
           switch (Option)
              {
               case 1:
                 Name = "Bed Frame";
                 Price = 39.99;
                 break;
               case 2:
                 Name = "Pillows";
                 Price = 59.99;
                 break;
               case 3:
                 Name = "Blankets";
                 Price = 129.99;
                 break;
               case 4:
                 Name = "No Options Added";
                 System.out.println("No options added");
                 Price = 0;
                 break;
            }

      //ADDED EXIT POINT WHEN TO EXIT:
      System.out.println("Is that All?");
      //read an answer
      if (*answer was yes*) break;

      } //ADDED A CLOSING BLOCK
} 
```

阅读答案并确定条件应该作为练习 - 因为它看起来像是一个教程作业，我不想破坏乐趣！:)

# javascript - 当用户在 div 之外单击时，如何在 Backbone 中隐藏 div？

> ID：12983655
> 
> 赞同：4
> 
> 时间：2012-10-19T23:13:21.977
> 
> 标签：javascript, backbone.js

我在 Backbone 中有一个包含内部 div 的视图。当用户在 div 之外单击时，我想隐藏 div。

我不确定如何在视图中设置一个事件，显示“单击 NOT #inner_div”：“removeDiv”。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:24:52.157

通常的方法是直接附加一个点击处理程序`<body>`，然后关闭或隐藏你的`<div>`. 例如：

```
render: function() {
    $('body').on('click', this.remove);
    this.$el.html('<div id="d"></div>');
    return this;
},
remove: function() {
    $('body').off('click', this.remove);
    // This is what the default `remove` does.
    this.$el.remove();
    return this;
} 
```

如果您只想隐藏`<div>`而不是删除它，只需将点击绑定到与;`<body>`不同的方法即可。[`remove`](http://backbonejs.org/#View-remove)您仍然希望从中删除点击处理程序`<body>`。`remove`此外，您需要捕获视图上的点击事件，`el`以防止它们到达`<body>`.

演示：http: [//jsfiddle.net/ambiguous/R698h/](http://jsfiddle.net/ambiguous/R698h/)

如果您有其他关心点击事件的元素，那么您绝对可以定位 a`<div>`来掩盖它`<body>`，然后将您的点击处理程序绑定到它。您可以查看[jQuery BlockUI](http://www.malsup.com/jquery/block/)插件以了解这是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:43:38.700

如果你使用 Prototype，你可以这样做：

```
initialize: function() {
  // some code
  document.on('click', function(e, target) {
    if (target !== this.el && target.up('#inner_div').length === 0) {
      this.remove();
    }
  }.bind(this));
} 
```

我猜想使用 jQuery 它可能看起来像这样：

```
initialize: function() {
  // some code
  $(document).on('click', function(e) {
    if (e.target !== this.el && e.target.parent('#inner_div').length === 0) {
      this.remove();
    }
  }.bind(this));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T14:06:36.573

尽管直接操作 DOM 是可行的，但您可以通过为您的视图提供一些适当的结构来让 Backbone 为您处理事情。例如：

```
BoxView = Backbone.View.extend({
  events: {
    'click': '_click'
  },

  _click: function() {
    return false;
  }
});

AppView = Backbone.View.extend({
  el: '.app',

  initialize: function() {
    this.boxView = new BoxView({ el: $('.box') })
  },

  events: {
    'click': '_click'
  },

  _click: function() {
    this.boxView.remove();
  }
});

new AppView({ el: $('.app') }); 
```

这样，一旦触发了外部视图的点击，我们就可以更改内部视图。注意 BoxView`click`事件的绑定，以防止在用户单击它时释放它。

演示：[https ://jsfiddle.net/embs/45da2ppm/](https://jsfiddle.net/embs/45da2ppm/)

如果您已经有一个复杂的 Backbone 视图结构，并且无法轻松地重构为子视图结构，您仍然可以使用[Backbone.Events 模块](http://backbonejs.org/#Events "Backbone.Events 模块")在内部视图中侦听外部视图的点击事件，然后根据需要对其进行操作。

我还建议查看这篇关于使用 Backbone 时常见错误的好[文章。](https://www.toptal.com/backbone-js/top-8-common-backbone-js-developer-mistakes)其中一些与您的问题密切相关：

*   [直接响应任意事件修改 DOM](https://www.toptal.com/backbone-js/top-8-common-backbone-js-developer-mistakes#mistake-2-modifying-dom-in-direct-response-to-arbitrary-events)
*   [使用 jQuery “.on()” 而不是委托事件](https://www.toptal.com/backbone-js/top-8-common-backbone-js-developer-mistakes#mistake-8-using-jquery-on-instead-of-delegated-events)

# javascript - 如何在页面加载端之外继续显示 jQuery Mobile 微调器？

> ID：12983658
> 
> 赞同：0
> 
> 时间：2012-10-19T23:13:44.753
> 
> 标签：javascript, jquery-mobile

一旦页面加载完成`jQuery Mobile`，**微调器**就会消失。我希望微调器一直停留到某些事件（来自服务器的数据到达）之后：

```
$('#form').live('pagebeforeshow', function(){
   var def = $.Deferred();

   $.post('url', obj)
      .success(function (response) {
         def.resolve();
      });

   def.done(function(){
      // I want the spinner to disappear now.
   });
});
// in this point, once the 'pagebeforeshow' handler is returned,
// the spinner disappears - but I want it to stay only after def is resolved. 
```

（顺便说一句，我想找到微调器被移除的点会更简单，然后重新显示它。我希望找到一个更优雅的解决方案，不会有这种风险（虽然风险很小，但仍然..）有那种闪烁）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:31:38.810

尝试添加`.mobile.loading( 'show')`，`$('#form').live('pageshow', function()`当事件完成时，您可以使用`.mobile.loading( 'hide')`.

# ajax - ASP.NET MVC 3 Ajax.BeginForm() 在视图/共享文件夹中找不到控制器操作？

> ID：12983659
> 
> 赞同：0
> 
> 时间：2012-10-19T23:13:47.927
> 
> 标签：ajax, asp.net-mvc-3

有人知道这里有什么交易吗？如果我将 Ajax.BeginForm 放入一个 cshtml 文件中

## 视图/共享文件夹

这没用：

```
 @using (Ajax.BeginForm("TestAction", "Test", new AjaxOptions
 {
     HttpMethod = "Post"
 }
 , new { id = "submitTestForm" })) {} 
```

但是常规的 Html.BeginForm 会：

```
@using (Html.BeginForm("TestAction","Test",FormMethod.Post,new {id="submitTestForm"})) {} 
```

但是如果我把它移到下面

## Views/Test 文件夹（本例中的控制器是 TestController）

它工作正常。

这是一个错误吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:28:57.763

不知道为什么它在共享文件夹中不起作用，但是您可以摆脱 ajax 表单并使用普通表单并自己编写一些手写的 CLEAN javascript 来做同样的事情

```
@using(Html.Beginform("testAction","test",FormMethod.Post, new { id="submitTestFrm"})
{

  <input type="submit" />
}

<script type="text/javascript">
 $(function(){
     $("#submitTestFrm").submit(function(e){
        e.preventDefault();
        var _this=$(this);
        $.post(_this.attr("action"),_this.serialize(),function(response){
          //do something with the response.
      });
     });    
 });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T11:21:12.230

I had the same issue (**but in ASP.Net MVC 5**) when I realized I was actually using the wrong overload of the BeginForm-method. Simply changing to this resolved the issue for me:

```
@using (Html.BeginForm("TestAction","Test", null, FormMethod.Post, new {id="submitTestForm"})) {} 
```

Notice the **null** parameter being sent for the routevalues object.

# image - 这个 EMF 图像 A4 大小如何？

> ID：12983660
> 
> 赞同：3
> 
> 时间：2012-10-19T23:13:57.330
> 
> 标签：image, reverse-engineering, gdi, file-format, .emf

Adobe Illustrator 制作的 EMF 文件（我不知道哪个版本，但它具有早期样式的 EMR 标题之一）应该是 A4 大小的，我不明白它是怎么回事。该文件具有以下 EMR 记录：

```
U_EMRHEADER                   record:    0 type:  1 offset:       0 size:     116
   rclBounds:      {255,-925,1377,-132} 
   rclFrame:       {7969,-28906,43031,-4125}  **350.63 x 247.82 mm**
   dSignature:     0x464D4520
   nVersion:       0x00010000
   nBytes:         1924
   nRecords:       54
   nHandles:       4
   sReserved:      0
   nDescription:   13
   offDescription: 88
      Desc. A:  Adobe Systems
      Desc. B:  
   nPalEntries:    0
   szlDevice:      {1024,768} 
   szlMillimeters: {320,240} 
U_EMRSETMAPMODE               record:    1 type: 17 offset:     116 size:      12
   iMode:          0x00000008       **MM_ANISOTROPIC**
U_EMRSETWINDOWORGEX           record:    3 type: 10 offset:     140 size:      16
   ptlOrigin:      {0,0}
U_EMRSETVIEWPORTORGEX         record:    4 type: 12 offset:     156 size:      16
   ptlOrigin:      {0,0}
U_EMRSETWINDOWEXTEX           record:    5 type:  9 offset:     172 size:      16
   szlExtent:      {10104,7143}
U_EMRSETVIEWPORTEXTEX         record:    6 type: 11 offset:     188 size:      16
   szlExtent:      {3368,2381} 
```

rclFrame 字段通常设置页面大小，但 A4 为 297 x 210 毫米，而不是 350.63 x 247.82 毫米。但是 350.63 x 247.82 是 A4 的正确比例。我可以从这些数字中找出 A4 尺寸的唯一方法是将 rclFrame 值视为 MM_HIENGLISH，然后以这种方式使用来自 EMRSETWINDOWEXTEX/EMRSETVIEWPORTEXTEX 的 1/3 比例因子：

```
 35.063" * 1/3 = 11.69"
 24.782" * 1/3 = 8.26" 
```

但这意味着程序在看到后两条记录之前无法确定页面的大小。我也找不到任何说明这种事情发生的文档。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:25:52.960

我认为您的 EMF 可能包含比诊断转储所指示的更多信息。提供的 EMR_HEADER 记录的 nVersion 设置为 0x00010000，因此该记录还包含以下从 szlMilimeters 开始的字段：

```
 public uint     cbPixelFormat;
    public uint     offPixelFormat;
    public uint     bOpenGL;
    public SIZE     szlMicrometers; 
```

提供的诊断转储中缺少这些字段的值。这是我机器上的 XP emf 文件头部的十六进制转储：

```
 0: 01 00 00 00 6c 00 00 00 58 07 00 00 03 02 00 00  | ....l...X....... |
10: aa 0b 00 00 1f 04 00 00 95 1f 00 00 07 09 00 00  | ................ |
20: 07 31 00 00 15 11 00 00 20 45 4d 46 00 00 01 00  | .1...... EMF.... |
30: 44 07 00 00 2e 00 00 00 03 00 00 00 00 00 00 00  | D............... |
40: 00 00 00 00 00 00 00 00 61 13 00 00 68 1b 00 00  | ........a...h... |
50: d2 00 00 00 29 01 00 00 00 00 00 00 00 00 00 00  | ....)........... |
60: 00 00 00 00 50 34 03 00 28 88 04 00              | ....P4..(...     | 
```

在此代码段中，szlMicrometers 字段是最后一对 DWORD。它们的值为 0x00033450、0x00048828，并以千分之一毫米的十进制表示，这些值为 210000、297000

# mysql - 需要简单的 SQL vb.net 帮助

> ID：12983667
> 
> 赞同：0
> 
> 时间：2012-10-19T23:15:10.150
> 
> 标签：mysql, sql, vb.net, parameters

我有一个产品的 CSV 文件，我正在解析以创建一个 SQL 文件并最终在数据库上运行以添加产品。

我正在创建这样的查询：

```
 Dim sql As String = "INSERT INTO ""APP"".""PRODUCTS"" (ID,REFERENCE,CODE,CODETYPE,NAME,PRICEBUY,PRICESELL,CATEGORY,TAXCAT,ATTRIBUTESET_ID,STOCKCOST,STOCKVOLUME,IMAGE,ISCOM,ISSCALE,ISKITCHEN,ATTRIBUTES) VALUES (@ID,@REFERENCE,@CODE,@CODETYPE,@NAME,@PRICEBUY,@PRICESELL,@CATEGORY,@TAXCAT,@ATTRIBUTESET_ID,@STOCKCOST,@STOCKVOLUME,@IMAGE,@ISCOM,@ISSCALE,@ISKITCHEN,@ATTRIBUTES)"
        Dim cmd As New SqlCommand(sql)
        cmd.Parameters.AddWithValue("@ID", ID)
        cmd.Parameters.AddWithValue("@REFERENCE", REFERENCE)
        cmd.Parameters.AddWithValue("@CODE", CODE)
        cmd.Parameters.AddWithValue("@CODETYPE", CODETYPE)
        cmd.Parameters.AddWithValue("@NAME", NAME)
        cmd.Parameters.AddWithValue("@PRICEBUY", PRICEBUY)
        cmd.Parameters.AddWithValue("@PRICESELL", PRICESELL)
        cmd.Parameters.AddWithValue("@CATEGORY", CATEGORY)
        cmd.Parameters.AddWithValue("@TAXCAT", TAXCAT)
        cmd.Parameters.AddWithValue("@ATTRIBUTESET_ID", ATTRIBUTESET_ID)
        cmd.Parameters.AddWithValue("@STOCKCOST", STOCKCOST)
        cmd.Parameters.AddWithValue("@STOCKVOLUME", STOCKVOLUME)
        cmd.Parameters.AddWithValue("@IMAGE", IMAGE)
        cmd.Parameters.AddWithValue("@ISCOM", ISCOM)
        cmd.Parameters.AddWithValue("@ISSCALE", ISSCALE)
        cmd.Parameters.AddWithValue("@ISKITCHEN", ISKITCHEN_NEW)
        cmd.Parameters.AddWithValue("@ATTRIBUTES", ATTRIBUTES) 
```

但是我不希望通过 .NET 执行它们，我怎样才能简单地将查询（替换参数）导出到文本框，每个查询一行。（此代码在循环中运行，这是针对该循环中的一个产品）

我尝试了 cmd.CommandText 但它只是列出了带有@ID 的 SQL 查询，而不是 ID 变量的实际值。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:18:02.300

我假设这是一项临时工作，因为您本质上想要创建一个 INSERT 语句的文本文件。在这种情况下，您甚至不想处理 SQL 对象。我什至不会打扰 VB.NET，只需使用 VB 脚本。或者您可以只使用 Excel 格式化您的 INSERT 命令并将其复制并粘贴到文本文件中。

# json.net - 具有两个可为空属性的 json.net 对象序列化为单个属性

> ID：12983668
> 
> 赞同：0
> 
> 时间：2012-10-19T23:15:12.093
> 
> 标签：json.net

我想使用 json.net 来序列化 jquery ui 小部件的选项，例如 jquery 手风琴。

但是手风琴有一个属性**active**可以是以下之一：

一个基于 0 的整数，它定义了一个活动选项卡，

一个布尔值，当设置为 false 时，将折叠所有手风琴。

我正在考虑创建 2 个可为空的 .NET 属性：

```
int? Active

bool? IsActive 
```

如果 Active 不为空，则应将其序列化为具有属性名称的整数**active**，如果 IsActive 不为空，则应将其序列化为具有相同名称的布尔值**active**。.Net 代码将确保其中只有一个不能为空。

但是当我将 [JsonProperty("active")] 放在两个属性上时，它不起作用......还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:50:32.513

您当前方法的困难在于，拥有这两个字段将不起作用，因为您无法同时标记它们`[JsonProperty("active")]`。我的第一次尝试是定义类如下：

```
class Accordion
{
    [JsonProperty("active")]
    [JsonConverter(typeof(ActiveTabConverter))]
    public int Active { get; set; }

    [JsonProperty("active")]
    [JsonConverter(typeof(ActiveTabConverter))]
    public bool IsActive { get; set; }
} 
```

这会导致异常（我想你也有这个），因为我使用`[JsonProperty("active")]`了两个属性。删除其中一个属性也不起作用：没有例外，但是从其中删除属性的字段从未反序列化。

起作用的是以下内容：

```
class Accordion
{
    [JsonProperty("active")]
    [JsonConverter(typeof(ActiveTabConverter))]
    public int Active { get; set; }

    [JsonIgnore]
    public bool IsActive
    {
        get
        {
            return this.Active > -1;
        }
    }

    public Accordion()
    {
        this.Active = -1;
    }
} 
```

请注意，仍然有两个字段，但只有其中一个会被反序列化。是`IsActive`一个辅助属性。我在这里遵循的约定是`Active`大于 0 的值表示打开的手风琴选项卡，而 -1 相当于`false`从 JSON 接收。

```
class ActiveTabConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(int) || objectType == typeof(bool);
    }

    public override object ReadJson(JsonReader reader, Type objectType,
        JsonSerializer serializer)
    {
        var value = JValue.ReadFrom(reader);

        if (value.Type == JTokenType.Integer)
        {
            return serializer.Deserialize<int>(reader);
        }

        return -1;
    }

    public override void WriteJson(JsonWriter writer, object value,
        JsonSerializer serializer)
    {
        int item = (int)value;

        if (item == -1)
        {
            writer.WriteValue(false);
        }
        else
        {
            writer.WriteValue(item);
        }

        writer.Flush();
    }
} 
```

这个类负责反序列化和序列化`Active`值。

我使用以下代码来序列化/反序列化。请注意，JSON 实际上来自 jQuery 手风琴。对于有问题的一个属性来说，这太过分了，但我认为最好使用真实数据。

```
string json1 = "{\"disabled\":false,\"create\":null,\"active\":2,\"animate\":300,\"collapsible\":false,\"event\":\"click\",\"header\":\"> li > :first-child,> :not(li):even\",\"heightStyle\":\"auto\",\"icons\":{\"activeHeader\":\"ui-icon-triangle-1-s\",\"header\":\"ui-icon-triangle-1-e\",\"headerSelected\":\"ui-icon-triangle-1-s\"},\"activate\":null,\"beforeActivate\":null,\"navigation\":false,\"autoHeight\":true,\"clearStyle\":false,\"fillSpace\":false,\"change\":null,\"changestart\":null,\"animated\":\"slide\"}";
string json2 = "{\"disabled\":false,\"create\":null,\"active\":false,\"animate\":300,\"collapsible\":true,\"event\":\"click\",\"header\":\"> li > :first-child,> :not(li):even\",\"heightStyle\":\"auto\",\"icons\":{\"activeHeader\":\"ui-icon-triangle-1-s\",\"header\":\"ui-icon-triangle-1-e\",\"headerSelected\":\"ui-icon-triangle-1-s\"},\"activate\":null,\"beforeActivate\":null,\"navigation\":false,\"autoHeight\":true,\"clearStyle\":false,\"fillSpace\":false,\"change\":null,\"changestart\":null,\"animated\":\"slide\"}";

Accordion accordion = JsonConvert.DeserializeObject<Accordion>(json1);
string serializedJson = JsonConvert.SerializeObject(accordion);

accordion = JsonConvert.DeserializeObject<Accordion>(json2);
serializedJson = JsonConvert.SerializeObject(accordion); 
```

# php - 您可以将函数中的变量设置为参数中给出的名称吗？

> ID：12983670
> 
> 赞同：1
> 
> 时间：2012-10-19T23:15:22.947
> 
> 标签：php, function

如果我有一个功能：

```
function abc($var1,$var2){
   $var1 = 'this is var1';
   $var2 = 'this is var2';
} 
```

如何设置变量并将参数中提供的名称用作函数中定义的某些字符串？

因此，如果我要运行：

`abc($useThis , $andThis);`

我怎样才能让它返回：

```
// $useThis  == 'this is var1'
// $andThis  == 'this is var2' 
```

我知道参数被用作*输入*，但它们可以以相反的方式使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T23:19:36.483

您可以简单地通过[引用](http://php.net/manual/en/language.references.pass.php)传递参数，而不是通过值传递。

```
function abc(&$var1,&$var2){
   $var1 = 'this is var1';
   $var2 = 'this is var2';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:19:26.627

您可以使用[引用](http://php.net/manual/en/language.references.pass.php)来修改传递给php函数的变量，`&`在参数前放一个符号以通过引用传递它们

```
function abc(&$var1,&$var2){
   $var1 = 'this is var1';
   $var2 = 'this is var2';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T23:20:19.447

是的，您可以在 PHP 中[通过引用传递。](http://php.net/manual/en/language.references.pass.php)

在参数前面加上 & 符号：

```
function abc(&$var1, &$var2){
   $var1 = 'this is var1';
   $var2 = 'this is var2';
} 
```

# php - PHP SMTP 邮件联系表

> ID：12983673
> 
> 赞同：0
> 
> 时间：2012-10-19T23:15:34.893
> 
> 标签：php, smtp

我有一个使用 Pear 的 SMTP 身份验证的联系表。我也想向填写表格的人发​​送一封确认电子邮件。

我必须在我的 php 中添加什么才能实现这一点

```
<?php
        error_reporting(E_ALL);
        ini_set('display_errors', True);

        set_include_path('******');

        require_once "Mail.php";

// Set the email variables from the form here:

    $name = $_POST['name']; // Pass the Name value to the $Name variable
    $number = $_POST['number'];
    $email = $_POST['email']; // Pass the Email value to the $Email variable
    $enquiry = $_POST['enquiry'];
    $comment = $_POST['message']; // Pass the Comment value to the $Comment variable

 $from = $email;
 $to = "Enquiries <enquiries@brisbanediveacademy.com.au>";
 $subject = "Enquiry ( $enquiry)";

        $body = "You have received a Web Enquiry. \n
            Name: $name\n
            Contact: $number \n
            Email: $email\n
            Enquiry Type: $enquiry \n
            Comments: $comment";

 $host = "******.com.au";
 $username = "*****.com.au";
 $password = "******";

 $headers = array('From' => $from,
                  'To' => $to,
                  'Subject' => $subject);
 $smtp = Mail::factory('smtp',
                       array('host' => $host,
                            'auth' => true,
                            'username' => $username,
                            'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
     echo("<p>" . $mail->getMessage() . "</p>");
 } else {
     echo("<p>Message successfully sent! We will be in contact with you shortly!</p>");
 }
 ?> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:22:37.150

您可以在 headers 数组中使用 CC

```
 'Cc' => 'Sendername <$from>', 
```

甚至更好

```
'Bcc' => 'Sendername <$from>', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:35:15.463

如果您希望他们收到与您收到的相同的电子邮件，Ivan 的解决方案就很好。

但最好是简单地给他发一封不同的电子邮件。

你生成两个。一次给你，一次给他。

如果您想拥有公共部分，请为此使用单独的变量，然后将其附加或添加到消息中。

# opengl - 为什么设置 glRasterPos 会使我的 ftgl 文本消失？

> ID：12983674
> 
> 赞同：0
> 
> 时间：2012-10-19T23:15:44.237
> 
> 标签：opengl, fonts, ftgl

我正在为 opengl 中的字体使用 FTGL 库而苦苦挣扎。例如，我还没有弄清楚如何将文本放在屏幕左下角以外的某个位置。我目前正在使用像素图字体，并开始尝试使用`glRasterPos`.

以下代码“有效”，因为它将左下角的文本显示为白色：

```
ftglRenderFont(ftgl_freesans, "HELLO WORLD!", FTGL_RENDER_ALL); 
```

在以下示例中，文本根本不显示：

```
float r[4];
glGetFloatv(GL_CURRENT_RASTER_POSITION, r);
glRasterPos4fv(r);
ftglRenderFont(ftgl_freesans, "HELLO WORLD!", FTGL_RENDER_ALL); 
```

我很困惑！应该没有什么不同，那为什么字体不渲染呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:27:40.370

当您调用 glRasterPos 时，它会根据矩阵堆栈的当前值进行转换，而不仅仅是“设置”该值。

查询当前栅格位置的值会返回已经转换的位置。因此，调用`glRasterPos(glGet(GL_CURRENT_RASTER_POSITION))`具有将当前窗口空间位置再次通过变换矩阵的效果，这不是您想要的。

如果您将模型视图和投影矩阵设置为恒等，那么您的 get/set 操作应该符合您的预期。

来自 MSDN 的引用：

> glRasterPos 提供的对象坐标被视为与 glVertex 命令的坐标一样。它们由当前的模型视图和投影矩阵转换并传递到裁剪阶段。如果顶点没有被剔除，那么它被投影并缩放到窗口坐标，这成为新的当前光栅位置。

# ios - 如何以自定义方法访问 UITableViewCell 中的对象？

> ID：12983679
> 
> 赞同：1
> 
> 时间：2012-10-19T23:16:06.797
> 
> 标签：ios, iphone, uitableview

## 编辑：这篇文章有点长，所以最后的问题复制在这里：

> 所以很明显它不是检查我点击的单元格，而是检查它正在创建的一个新单元格。我将如何检查被单击的单元格，并检查该特定单元格中的内容（即检查该单元格标签的文本）。

所以在 InterfaceBuilder 我有一个原型单元格，我执行以下代码在 uitableview 中创建多个单元格

```
//tableview datasource delegate methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return cellIconNames.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";

cellIconName = [cellIconNames objectAtIndex:indexPath.row];

NSString *cellIconImageName = [[self cellIconImages] objectAtIndex:[indexPath row]];

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

if(cell == nil){
    cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.rightLabel.text = [cellIconNames objectAtIndex:indexPath.row];
cell.carrierImage.image = [UIImage imageNamed:cellIconImageName];

urlString = [cellButtons objectAtIndex:indexPath.row];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 290, 88);
[button setTitle:@"" forState:UIControlStateNormal];
[button addTarget:self action:@selector(startCarrierSite:) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:button];
[cell.contentView bringSubviewToFront:button];

return cell;
} 
```

所以基本上我所做的就是在每个单元格上制作一个图像视图、一个标签和一个透视按钮，并让各自的图像和标签根据数组表达不同的内容。

我在每个单元格中的按钮都指向同一个选择器 startCarrierSite：

这是 startCarrierSite 的方法

```
-(IBAction)startCarrierSite:(CustomCell *)cell;{

UILabel *rightLabel = (UILabel*) [cell.subviews objectAtIndex:0];

NSString *labelText = rightLabel.text;

if(labelText == @"Aetna"){
    NSURL *url = [NSURL URLWithString:@"www.aetna.com"];
    [[UIApplication sharedApplication] openURL:url];
}else{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.google.com"]];
    }
} 
```

我要做的是检查单元格的标签，如果该标签的 .text 等于某个字符串，我运行代码以打开 safari 和 blah blah blah，这不是问题。

问题是我似乎无法检查单元格中的标签。我正在尝试执行此操作的当前方法是使用 CustomCell （它是 UITableViewCell 类的子类）的参数运行操作。

这有效，并且当您单击它时会检查单元格，但是然后我去检查标签的文本并且它崩溃了。我收到错误

由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayI objectAtIndex:]：索引 4294967295 超出空数组的范围”

所以很明显它不是检查我点击的单元格，而是检查它正在创建的一个新单元格。我将如何检查被单击的单元格，并检查该特定单元格中的内容（即检查该单元格标签的文本）。

编辑（添加更新的方法）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;{

CustomCell *cell = (CustomCell*)[tableView cellForRowAtIndexPath:indexPath];

if ([cell.urlString isEqualToString:@"Aetna"]) {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.aetna.com"]];
}else if([cell.urlString isEqualToString:nil]){
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.google.com"]];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:19:27.967

使用这个 UITableViewDelegate 方法：

```
tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

从那里你可以访问单元格`[tableView cellForRowAtIndexPath:indexPath]`

**编辑**

另外，不要将字符串与`yourString == @"someString"`.

使用`[yourString isEqualToString:@"someString"]`.

**编辑 2 **

将属性添加到您的 CustomCell

`@property (nonatomic) NSString *urlString;`

在创建单元格时设置属性，然后在 didSelectRowAtIndexPath 方法中执行此操作；

`CustomCell *cell = (CustomCell*)[tableView cellForRowAtIndexPath:indexPath];`

现在 URL 很简单`cell.urlString`。

# android - ImageView 上的 TranslateAnimation (Android)

> ID：12983681
> 
> 赞同：3
> 
> 时间：2012-10-19T23:16:31.677
> 
> 标签：android, position, imageview, android-animation, translate-animation

因此，我的布局中有一个 ImageView，当用户在后者上滑动时，我想将其向右或向左滑动。我使用 TranslateAnimation 来翻译 ImageView，如下图所示。

```
ImageView logoFocus = (ImageView) findViewById(R.id.logoFocus);

Animation animSurprise2Movement = new TranslateAnimation(logoFocus.getLeft(), logoFocus.getLeft()+150, logoFocus.getTop(), logoFocus.getTop());
animSurprise2Movement.setDuration(1000);
animSurprise2Movement.setFillAfter(true);
animSurprise2Movement.setFillEnabled(true);
logoFocus.startAnimation(animSurprise2Movement); 
```

我已将此代码放在我的 Swipe Right 部分中，相同的代码但使用 getLeft()-150 作为 Swipe Left 部分。当我第一次滑动时，它按预期工作，但是当我向另一个方向滑动时，ImageView 会回到它的原始位置，然后向另一个方向滑动，而不是只滑动到原始位置。

我已经尝试在已设置为动画的 AnimationListener 的 onAnimationEnd 方法中添加以下内容，但徒劳无功。

```
MarginLayoutParams params = (MarginLayoutParams) logoFocus.getLayoutParams();
params.setMargins(logoFocus.getLeft()+150, logoFocus.getTop(), logoFocus.getRight(), logoFocus.getBottom());
logoFocus.setLayoutParams(params); 
```

我也用相同的方法尝试了以下方法，但都没有按预期工作。

```
((RelativeLayout.LayoutParams) logoFocus.getLayoutParams()).leftMargin += 150;
logoFocus.requestLayout(); 
```

有人能帮帮我吗？即使使用了 setFillAfter(true) 和 setFillEnabled(true)，动画之后的位置似乎也没有改变。有没有使用 TranslateAnimation 的替代方法？

感谢您为我提供的任何帮助。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T15:47:04.607

好的，所以我解决了这个问题。我现在使用一个全局变量，每次我为 ImageView 设置动画时都会更新它，而不是试图强制 ImageView 改变它的实际位置。因为我使用了 setFillAfter(true) 和 setFillEnabled(true)，所以它不会再无意识地回到原来的位置。

```
private float xCurrentPos, yCurrentPos;
private ImageView logoFocus;

logoFocus = (ImageView) findViewById(R.id.logoFocus); 
xCurrentPos = logoFocus.getLeft(); 
yCurrentPos = logoFocus.getTop(); 

Animation anim= new TranslateAnimation(xCurrentPos, xCurrentPos+150, yCurrentPos, yCurrentPos); 
anim.setDuration(1000); 
anim.setFillAfter(true); 
anim.setFillEnabled(true); 
animSurprise2Movement.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation arg0) {}

    @Override
    public void onAnimationRepeat(Animation arg0) {}

    @Override
    public void onAnimationEnd(Animation arg0) {
        xCurrentPos -= 150;
    }
});
logoFocus.startAnimation(anim); 
```

如果您遇到同样的问题，希望这会有所帮助。我看过好几篇这样的帖子，没有好的答案。

# amazon-web-services - 无法到达 erlang 端口映射器 - Couchbase 错误

> ID：12983689
> 
> 赞同：2
> 
> 时间：2012-10-19T23:18:01.323
> 
> 标签：amazon-web-services, nosql, couchbase

我在将服务器添加到集群或在**Couchbase**中创建对远程集群的引用时遇到问题。我在 Amazon 上的同一区域和区域中创建了 EC2 Windows 2008 服务器。我已经在每台机器上安装了 Couchbase，并且服务器运行良好。我已经打开了安全组中的所有端口只是为了测试。

当我尝试添加服务器时，“添加服务器”窗口中出现以下错误：

> 注意 - 无法访问 erlang 端口映射器。超时连接到端口“4369”上的“54.243.156.39”。这可能是由于不正确的主机/端口组合或服务器之间的防火墙。

我在两者上都使用了相同的用户名和密码。即使我想在第一次配置服务器时将服务器添加到当前集群，也会出现连接问题。

*   我已经安装了**couchbase 2.0 beta**
*   EC2 服务器不在集群中，它们是单个 EC2 机器

对此有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:00:37.700

看来您对 Erlang 端口映射器守护程序 (epmd) （允许节点到节点通信）有问题，因为您的防火墙默认阻止此端口。您应该手动打开它。在防火墙设置中单击允许程序，然后添加端口并在端口号字段中输入端口号 4369/tcp。以防万一，通过 netsh advfirewall 命令检查和配置您的 IP 表。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T03:17:56.760

我们在向集群添加新节点时遇到了类似的问题。它可以连接到 Erlang 端口映射器，但它说它无法将 IP 地址解析为主机名。但是它在错误消息中为我们提供了我们输入的 IP 地址的主机名，所以它肯定可以解决它。

Telnet 证明我们可以连接到远程机器上的端口映射器，并且我们清除了所有 iptables 规则（使用 iptables -F）以确保我们不会阻塞自己。

解决方案相当奇怪。我们必须为集群中的所有主机手动添加 /etc/hosts 条目，这立即允许我们的新节点加入现有集群。因此，我认为 DNS/Erlang foo 深处正在发生一些奇怪的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-01T23:16:30.307

同样的问题，同时将新节点添加到集群。

根据 couchbase-server 日志，erlang 端口映射器试图绑定到系统中不存在的 ip（公共云），但只有私有云 ip 存在。

因此必须将所需的 ip（私有云 ip）添加到以下文件中

```
vi /opt/couchbase/var/lib/couchbase/ip
xx.xxx.xx.x OR hostname 
```

# javascript - 加载 javascript 文件后，Bing 地图未定义

> ID：12983701
> 
> 赞同：3
> 
> 时间：2012-10-19T23:19:38.963
> 
> 标签：javascript, prototypejs, bing-maps

我正在动态加载[Bing Map API](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1)脚本。脚本完成加载后，我想构建我的地图。问题是`Microsoft`并且`Microsoft.Maps`已经定义，但`Microsoft.Maps.Map`不是。我意识到他们的脚本会异步加载更多脚本，但即使在等待这些额外的假设脚本 10 秒后，`Microsoft.Maps.Map`仍然未定义。那么我该如何加载他们的`Map`课程呢？我在他们的[示例](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1)中看不到任何显式加载类的内容。

**Javascript（原型框架）：**

```
var script = new Element(
    'script', {
        type: 'text/javascript',
        src: 'http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0'
    }
);

script.observe(
    'load',
    function(event) {
        console.info(Microsoft);
        console.info(Microsoft.Maps);
        console.info(Microsoft.Maps.Map);
    }
);

document.body.appendChild(script); 
```

**控制台输出：**

```
>>>  Microsoft
Object { Maps={...}}
>>>  Microsoft.Maps
Object { Globals={...}}
>>>  Microsoft.Maps.Map
undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:20:32.243

cbayram 是对的，你看得太早了。但具体来说，一旦他们完成加载（onscriptload），您就不会使用 Bing Map 特定的方式来触发您的脚本。我们避免使用全局函数，但 AFAIK 你真的需要在这里使用一个。

试试这个：

```
var script = new Element(
    'script', {
        type: 'text/javascript',
        src: 'http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onscriptload=DrawMap'
    }
);

function DrawMap() {
   console.info(Microsoft);
   console.info(Microsoft.Maps);
   console.info(Microsoft.Maps.Map);
}

document.body.appendChild(script); 
```

不重要，但为什么要将它附加到正文？我总是将它附加到头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:50:16.977

BING Map API 的 JavaScript 文件会动态地将其他 JS 和 CSS 文件加载/注入到您的页面中。

```
<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/js/en-us/veapicore.js">
<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/js/en-us/veapidelay.js">
<link rel="stylesheet" type="text/css" rev="stylesheet" href="http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/css/en/mapdelay.css">
<link rel="stylesheet" type="text/css" rev="stylesheet" href="http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/css/en/mapcontrol.css">
<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/js/en-us/veapiAnalytics.js"> 
```

Map 函数/对象似乎是在

```
http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121012100453.93/js/en-us/veapicore.js 
```

**编辑：**

您的 script.observe 在加载第一个（初始）JS 文件时运行。Map 函数为时过早，因为它在 veapicore.js 中实例化，随后由初始 mapcontrol.ashx?v=7.0 加载。您在寻找该 Map 对象时还为时过早。

# java - Java q 关于类结构

> ID：12983710
> 
> 赞同：0
> 
> 时间：2012-10-19T23:20:57.620
> 
> 标签：java, class, data-structures, static

1.  静态 void 主类是程序的入口，无论哪个类调用它......还是它只是该特定类的入口方法......
2.  这到底是如何工作的：

    ```
    public class init{
        public static void main(String[] args){
            new init();
        }

        public init(){
            System.out.print("hi");
        }
    } 
    ```

    我不明白程序创建自身实例的方式......你为什么不能这样做？

    ```
    public class init{
        public static void main(String[] args){
            start();
        }

        public static void start(){
            System.out.print("hi");
        }
    } 
    ```

3.  静态与简单的公共到底做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:25:52.640

`static`并且`public`是不同的关键字。 `public`是一个**访问修饰符**。 `static`只需将成员指定为类范围。

`public static void main`以便 JVM 知道从何时开始执行您的程序。它只选择一个入口点并忽略其他入口点（如果有）。

无论哪种方式都有效，但这一切都归结为设计。也就是说，您希望您的构造函数显示一条消息，还是将该责任委托给另一个方法？而且该方法也不必是静态的。你可以这样：

```
new init().start() ; 
```

这就是为什么编程很棒和这样的 PITA ;) 因为有很多方法可以完成一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:26:11.883

1)`main`是您“运行”Java 类的方式。一个程序可以有多个类，每个类都有自己的`main`. 当你运行它时，你指定要运行哪个类。

2）你*可以*这样做，但通常处理对象的*实例*而不是类更好。这样做有多种原因。

3)`static`表示它是类级别的变量/方法，而不是实例变量/方法。它们可以在类本身（例如，`System.out`）*或*实例（甚至是空引用）上调用，但这被认为是糟糕的形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T23:27:17.227

> 静态 void 主类是您程序的入口，无论哪个类调用它......还是它只是该特定类的入口方法

就是说程序可以从哪个JVM启动的方法，很像`main`C/C++程序中的函数。如果您有超过 1 个使用此方法的类，那么您应该告诉 JVM 哪个类将是程序入口。

> 静态与简单的公共到底做了什么

`static`关键字表示方法/变量属于类，简单的 private/protected/public/default 表示方法/变量属于类实例（对象）。

> 这到底是如何工作的

您正在创建`init`该类的一个实例。在 Java 代码中这样做没有错。在类构造函数中，程序会`Hi`在控制台打印一个单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T23:24:29.537

嗯，你*可以*做第二件事。可以肯定的是，我只是编译它，它运行，并说：

`hi>`

静态实际上与公共无关，它是静态与动态的……以及公共与私有的。

请阅读：[类中的“静态”关键字有什么作用？](https://stackoverflow.com/questions/413898/what-does-the-static-keyword-do-in-java)

顺便说一句，*嘘*——你不必有 static 关键字来启动程序。你*可以*说：

```
public void main(String[] args) 
```

大多数时候，你会过得去，虽然在你的情况下，你没有！

当我删除第一个`static`时，它给出了：

`java.lang.NullPointerException`错误 。我需要弄清楚为什么......所以，坚持到`static void main`你对 Java 足够了解为止！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T23:24:45.977

1.  进入你的程序

2.  该类创建自己的一个实例，因为最终，它可能需要封装更多数据，而不仅仅是执行 System.out.print

3.  在这种情况下，static 定义了一个 Class 方法——即，一个由类调用的方法，而不是由从该类实例化的对象调用的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T23:32:17.560

Java 的入口点始终是指定的`main`方法。在您的第一个示例中，您创建了一个类型的新对象`init`（类名是`init`）
在您的 init 类的构造函数中，您告诉它写 hi。`new`您告诉它使用关键字创建一个新实例。构造函数是匹配类名的方法。

第二个示例不创建任何实例。您调用该`start`方法，该方法会打印 hi。您也可以编写`init.start();`，因为静态方法总是引用类型（类），而非静态方法总是需要对象引用才能执行。
这是您的第一个示例的修改版本来演示这一点：

```
public class Init{
    public static void main(String[] args){
        Init i = new Init();
        i.goodBye();
    }

    public Init(){
        System.out.print("hi");
    }

    public void goodBye() {
        System.out.print("Good Bye");
    }
} 
```

# objective-c - 您如何从应用程序层次结构深处的场景回到起点？

> ID：12983717
> 
> 赞同：0
> 
> 时间：2012-10-19T23:21:50.783
> 
> 标签：objective-c, ios, xcode, uistoryboard, segue

我有一个带有这样的情节提要的应用程序：![在此处输入图像描述](../Images/100303b4c4fa8e77cf230db4f3c77c27.png)

标记为 1 的场景是我的应用程序初始视图，用户在加载应用程序时看到的第一个场景。这实际上是我的登录/注册场景。

标记为 2 的场景在应用程序的深处，它嵌入在 UINavigationController 中，该控制器本身可通过 UITabBarController 访问。这个场景有一个注销按钮，它可以清除会话并且还应该将用户返回到场景#1。

返回第一个场景的正确方法是什么？我尝试了几种不同的方法，成功率为零。这是我尝试过的：

> [[self navigationController] popToRootViewControllerAnimated:YES];

加载 #2 时（我相信）不会做任何事情，它实际上是当前 navigationController 的根视图控制器。

> 通过 segue 推送

并没有真正起作用，因为它只是将场景#1 添加到堆栈中，使用户能够“返回”到设置。我相信我可以为此隐藏导航栏，但据我所知，我不应该这样做，因为这种方法只是将视图添加到堆栈中，如果用户要重复此操作，应用程序最终将耗尽内存和崩溃。

> AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; [[delegate.window rootViewController]dismissModalViewControllerAnimated:YES];

这似乎确实清除了所有内容并返回到初始视图，但是与场景的任何交互（例如点击登录或注册按钮）都会导致如下错误：

> ** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图在目标上呈现 nil 模态视图控制器。”

我非常感谢您为解决此问题提供的任何帮助。我已经在这几天了，尽可能多地阅读听起来相关的 SO 问题，尝试阅读 Apple 文档（尽管不知道在 UINavigationBarController 参考之外从哪里开始）和谷歌搜索的结果.

我只做这种类型的编程几个星期，所以如果这是一个愚蠢的问题，我很抱歉，我只是无法找到问题的成功解决方案，这对我来说有点障碍在这一刻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:39:44.273

这有效：

```
- (IBAction)pop:(id)sender {

    [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:0] animated:YES];
} 
```

# delphi - JCL 需要 Delphi 库路径中的源代码

> ID：12983721
> 
> 赞同：1
> 
> 时间：2012-10-19T23:22:53.920
> 
> 标签：delphi, delphi-xe2, jedi, jedi-code-library

我已将 JCL 安装到 Rad-Studo XE2 中，并选择了适当修改库路径的选项。这将 z:\3rd party\Jedi 3.45\jcl\lib\d16\win32 和 z:\3rd party\Jedi 3.45\jcl\source\include 添加到我环境中的库路径中。win32 目录包含所有新编译的 dcu、obj、lib、dcp 和 res 文件，就像它应该的那样。

问题是，如果我在代码中使用 jcl 文件，除非我将所有 jcl*.pas 文件添加到路径中，否则我无法构建它。一旦我完成了代码完成，便便开始了，因为它似乎在不断地重新编译所有内容。

我哪里出错了？

![库路径截图](../Images/8695f714e5daf0487dda14d6a8785b66.png)

# crash - 内存泄漏/崩溃转换图像数据

> ID：12983727
> 
> 赞同：3
> 
> 时间：2012-10-19T23:23:16.793
> 
> 标签：crash, xamarin.ios, garbage-collection, uiimage, nsdata

以下代码在约 200 次调用后崩溃。我在每次调用后都尝试了 GC，并在另一个 GC 中尝试了 MemoryWarning 块，但它仍然崩溃。

```
public byte[] ConvertImage(string base64String)
{
    try
    {
        byte[] encodedDataAsBytes = Convert.FromBase64String ( base64String );
        base64String = "";
        NSData data = UIImage.LoadFromData ( NSData.FromArray ( encodedDataAsBytes ) ).AsPNG();
        encodedDataAsBytes = null;
        Byte[] returnBytes2 = new Byte[data.Length];
        System.Runtime.InteropServices.Marshal.Copy
        (data.Bytes, returnBytes2, 0, System.Convert.ToInt32(data.Length));
        data.Dispose();
        return returnBytes2;
    }
    catch(Exception ex)
    {
        Log.LogError("ConvertImage", ex);
        return null;
    }
} 
```

TIA，瑞克

经过 Xamarin 支持的大量敲击和出色的帮助之后 - 答案是将方法包装在`using (var pool = new NSAutoreleasePool ())`

现在一切都很好！哦，还有一点，将 .PNG 更改为 .JPEG 也减少了负载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T01:14:17.510

这是相当消耗内存的。base64 `string`，`byte[]`数组， the `NSData`， the `UIImage`， the second `NSData`， the second`byte[]`数组。这是您正在处理的图像所需内存的许多倍。

根据代码的调用方式（例如，在一堆图像上循环），您分配内存的速度可能比 GC 能够回收它的速度更快。在某些时候，iOS 会触发内存警告（但这在循环中无济于事），如果内存使用量没有迅速减少，它会杀死你。

`IDisposable`您可以通过处理代码创建的每个实例来轻松降低内存需求。现在，您只处置`NSData`您创建的两个实例之一，而不是处置`UIImage`. 您可以像这样处理所有这些：

```
byte[] encodedDataAsBytes = Convert.FromBase64String ( base64String );
using (var nsd1 = NSData.FromArray ( encodedDataAsBytes ))
using (var img = UIImage.LoadFromData ( nsd1 ))
using (NSData data = img.AsPNG ()) {
    byte[] returnBytes2 = new byte [data.Length];
    Marshal.Copy (data.Bytes, returnBytes2, 0, (int) data.Length);
    return returnBytes2;
} 
```

接下来，后面的代码的目的是什么？即你在做什么`byte[]`包含PNG图像？它本身并不是很有用，但是如果您只是将其保存到磁盘，那么您可以从 中执行此操作`NSData`并跳过最后一次`byte[]`分配。

其他技巧，依赖于使用，也可以应用（例如，`byte[]`在可能的情况下重用第二个缓冲区），但我们需要更多地了解代码是如何使用的。

# c# - 计算二项式系数的算法

> ID：12983731
> 
> 赞同：9
> 
> 时间：2012-10-19T23:24:01.300
> 
> 标签：c#, algorithm, math, combinatorics

我需要一种计算组合而不会耗尽内存的方法。这是我到目前为止所拥有的。

```
public static long combination(long n, long k) // nCk
{
    return (divideFactorials(factorial(n), ((factorial(k) * factorial((n - k))))));
}

public static long factorial(long n)
{
    long result;
    if (n <= 1) return 1;
    result = factorial(n - 1) * n;
    return result;
}

public static long divideFactorials(long numerator, long denominator)
{
    return factorial(Math.Abs((numerator - denominator)));
} 
```

我已将其标记为 C#，但理想情况下，该解决方案应该与语言无关。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-20T20:00:48.847

我见过的计算二项式系数的最佳方法之一是[Mark Dominus](http://blog.plover.com/math/choose.html)。与其他一些方法相比，使用较大的 N 和 K 值溢出的可能性要小得多。

```
public static long GetBinCoeff(long N, long K)
{
   // This function gets the total number of unique combinations based upon N and K.
   // N is the total number of items.
   // K is the size of the group.
   // Total number of unique combinations = N! / ( K! (N - K)! ).
   // This function is less efficient, but is more likely to not overflow when N and K are large.
   // Taken from:  http://blog.plover.com/math/choose.html
   //
   long r = 1;
   long d;
   if (K > N) return 0;
   for (d = 1; d <= K; d++)
   {
      r *= N--;
      r /= d;
   }
   return r;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-01T20:27:54.607

这是一个与 Bob Byran 非常相似的解决方案，但检查了另外两个前提条件以加快代码速度。

```
 /// <summary>
    /// Calculates the binomial coefficient (nCk) (N items, choose k)
    /// </summary>
    /// <param name="n">the number items</param>
    /// <param name="k">the number to choose</param>
    /// <returns>the binomial coefficient</returns>
    public static long BinomCoefficient(long n, long k)
    {
        if (k > n) { return 0; }
        if (n == k) { return 1; } // only one way to chose when n == k
        if (k > n - k) { k = n - k; } // Everything is symmetric around n-k, so it is quicker to iterate over a smaller k than a larger one.
        long c = 1;
        for (long i = 1; i <= k; i++)
        {
            c *= n--;
            c /= i;
        }
        return c;
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-19T23:44:20.097

```
public static long combination(long n, long k)
    {
        double sum=0;
        for(long i=0;i<k;i++)
        {
            sum+=Math.log10(n-i);
            sum-=Math.log10(i+1);
        }
        return (long)Math.pow(10, sum);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T23:49:52.427

查看您的代码，难怪您会很快耗尽内存。您的方法`divideFactorials`调用方法阶乘并使用差异“分子-分母”作为参数。根据您的代码，这种差异很可能会非常大，并且您将在阶乘方法中陷入很长的循环中。

如果它真的只是为了找到 nCk（我假设这是因为您在代码中的注释），只需使用：

```
public static long GetnCk(long n, long k)
{
    long bufferNum = 1;
    long bufferDenom = 1;

    for(long i = n; i > Math.Abs(n-k); i--)
    {
        bufferNum *= i;
    }

    for(long i = k; i => 1; i--)
    {
        bufferDenom *= i;
    }

    return (long)(bufferNom/bufferDenom);
} 
```

当然使用这种方法你会很快超出范围，因为 long 实际上并不支持很长的数字，所以 n 和 k 必须小于 20。

假设您实际上使用非常大的数字，您可以使用双精度数而不是长数，因为幂变得越来越重要。

**编辑：** 如果您使用大量数字，您也可以使用斯特林公式：

随着 n 变大 ln(n!) -> n*ln(n) - n。

将其放入代码中：

```
public static double GetnCk(long n, long k)
{
    double buffern = n*Math.Log(n) - n;
    double bufferk = k*Math.Log(k) - k;
    double bufferkn = Math.Abs(n-k)*Math.Log(Math.Abs(n-k)) - Math.Abs(n-k);

    return Math.Exp(buffern)/(Math.Exp(bufferk)*Math.Exp(bufferkn));
} 
```

我只提出这个答案，正如你所说的与语言无关，C#代码只是用来演示它。由于您需要对 n 和 k 使用较大的数字才能使其起作用，因此我建议将其作为查找大型组合的二项式系数的一般方法。

对于 n 和 k 都小于 200-300 左右的情况，您应该使用 Victor Mukherjee 提出的答案，因为它是准确的。

**Edit2：** 编辑了我的第一个代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T02:58:25.807

只是为了完成：标准`C`数学库具有 Γ 和 lnΓ（称为`tgamma`and `lgamma`）的实现，其中

Γ(n) = (n-1)！

库计算肯定比求和对数更快、更准确。有关更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Gamma_function)和[Mathworld](http://mathworld.wolfram.com/GammaFunction.html)。

# algorithm - weka 中可用的哪些算法会自动对数据集的特征进行加权？

> ID：12983734
> 
> 赞同：0
> 
> 时间：2012-10-19T23:24:23.457
> 
> 标签：algorithm, machine-learning, weka

我有一个包含 5 到 10 个特征的数据集。输出值是一个标量值。（所以我看起来像线性回归，而不是分类器）。一些特征比其他特征更重要，一些特征组合可以产生很大的结果。

考虑到这些要求，Weka 中内置的哪些算法是很好的候选者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:19:58.617

您是否尝试过 Weka Explorer 中的“选择属性”选项卡？InfoGainAttributeEval 和 CorrelationAtrributeEval 是我通常开始使用的两种有用的特征选择方法。

这是 InfoGainAttributeEval 针对我的数据集的示例输出。第一列按降序列出每个属性的重要性。

```
Ranked attributes:
0.02416    8 attr8
0.014166  16 attr16
0.012868  14 attr14
0.011905  15 attr15
0.011624   6 attr6
0.010619   1 attr1
0.010367   3 attr3
0.010171   5 attr5
0.008921   7 attr7
0.008763  11 attr11
0.006094   9 attr9
0.00603   10 attr10
0.003089   4 attr4
0.00095   12 attr12
0.000672   2 attr2
0.000127  13 attr13

Selected attributes: 8,16,14,15,6,1,3,5,7,11,9,10,4,12,2,13 : 16 
```

如果您有兴趣，请参阅以下链接以获取有关基于相关性的特征选择的经典论文： [http ://www.cs.waikato.ac.nz/~mhall/thesis.pdf](http://www.cs.waikato.ac.nz/~mhall/thesis.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:37:46.073

Weka 有一组`Classifier`执行回归的“”（它们在 Weka 术语中输出一个数字“类”）。在 Weka GUI 中，如果您选择数字属性作为“类”，您将看到它们。

其中是`weka.classifiers.functions.SimpleLinearRegression`，它完全按照它所说的那样做。Weka 还有更复杂的回归引擎，例如`MultilayerPerceptron`.

# wso2 - WSO2 Dataservice 大插入错误

> ID：12983737
> 
> 赞同：0
> 
> 时间：2012-10-19T23:24:38.897
> 
> 标签：wso2, wso2esb, wso2carbon, wso2dss

当我使用大约 100 列的大型插入语句时，插入列的那一刻被交换。

我已经检查了序数和名称，但我无能为力。

你以前有过这个问题吗？

我正在使用 Carbon 4.0.1 并安装了 ESB 和 AS 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:09:32.123

这是随 Carbon 4.0.0 和 4.0.1 发布的数据服务组件中的一个已知问题。基本上，当您使用大量列时，它们的序数似乎​​会被打乱，偏离原始（自然）顺序。这将在下一个即时版本中修复。

问候， 普拉巴斯

# iphone - iphone有没有办法让按钮中的图像翻转？

> ID：12983739
> 
> 赞同：0
> 
> 时间：2012-10-19T23:24:48.533
> 
> 标签：iphone

我正在尝试制作一个猜谜游戏，您可以在其中单击卡片并翻转。然后，您尝试找到匹配的卡。

在此之前我制作了程序，可以将图像从一张照片翻转到另一张照片。但我不知道如何在按钮的图像上做到这一点。我看到一个似乎可以做到这一点的游戏。您单击一个按钮，图像就会从一个图像翻转到另一个图像。

不知道他是怎么做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:30:41.647

它的工作方式与翻转图像的方式相同，`UIButton`继承自`UIView`，就像`UIImage`. 只需制作动画并使用`UIViewAnimationTransitionFlipFromLeft`或其他选项。

# django - 如何使用 Django 模型将 XML 安全文本数据保存到数据库？

> ID：12983740
> 
> 赞同：0
> 
> 时间：2012-10-19T23:25:13.207
> 
> 标签：django, django-models, django-forms, escaping

我正在构建一个 Django 站点，该站点与应该只保存 XML 安全数据的数据库交互。像*“Mike & Ike”*这样的字符串需要存储为*“Mike & Ike”*

据我所知，有两种方法。验证表单时，我可以将字符串转换为 XML 安全字符串。对于每个可以包含文本数据的字段，我都必须调用`xml.sax.saxutils.escape`适当的验证函数。此外，当从数据库模型向表单对象提供初始数据时，我必须使用函数将字符串标记为**安全（** **|safe**和**autoescape off**等模板过滤器在这里没有帮助，因为表单的 html 输出会自动转义所有值）。`django.utils.safestring.mark_safe`

 ****```
class NameForm(forms.Form):
    name = forms.CharField()

    def clean_name(self):
        from xml.sax.saxutils import escape
        return escape(self.cleaned_data['name'])

from django.utils.safestring import mark_safe
form = NameForm(initial={'name': mark_safe(Customer.objects.get(pk=1).name)}) 
```

这种方法有缺点。字符串在`escape`d 之后可能会发生很大变化。另外，我必须记住将所有初始值标记为安全。我认为更好的方法是在数据库保存时转义值，就在值写入数据库之前。它可以让我直接将任何值分配给模型对象，而不必担心转义它们。此外，当从数据库中查找对象时，`c = Customer.objects.get(pk=1)`该值`c.name`应该是未转义的值。例如：

```
c = Customer(id=1, name="Mike & Ike")
c.full_clean() # "test drive" escaping here and make sure it does not cause field overflow
c.save()
# database now have
# CUSTOMER
# NAME: 'Mike &amp; Ike'
c1=Customer.objects.get(pk=1)
c1.name # Mike & Ike
c.name  # Mike & Ike 
```

那可能吗？我从哪说起呢？我已阅读[Django 文档](https://docs.djangoproject.com/en/1.4/ref/models/instances/#what-happens-when-you-save)，它讨论了保存数据时执行的步骤，但没有关于如何自定义该行为的指南。我想我想自定义那里提到的第 3 步，但我愿意接受建议。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:29:35.083

您可以创建一个自定义`save()`方法并在那里转义它

[https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)

例如

```
def save(self, *args, **kwargs):
    self.name = clean_name(self.name)
    super(NameForm, self).save(*args, **kwargs) 
```****

# c++ - 如何用“-pthread”而不是“-mthread”编译boost_thread？

> ID：12983748
> 
> 赞同：6
> 
> 时间：2012-10-19T23:26:07.880
> 
> 标签：c++, boost, compilation, pthreads, boost-thread

我有一个操作系统并且编译时没有`-mthread`可用的。我有`-pthread`。如何用而不是编译**boost_thread**？`-pthread``-mthread`

我当前的编译器构建日志：

```
./b2 -j1 --with-thread link=static --prefix=./install-dir release threading=multi --builddir=./bu
ild-dir install

Component configuration:

    - chrono                   : not building
    - context                  : not building
    - date_time                : not building
    - exception                : not building
    - filesystem               : not building
    - graph                    : not building
    - graph_parallel           : not building
    - iostreams                : not building
    - locale                   : not building
    - math                     : not building
    - mpi                      : not building
    - program_options          : not building
    - python                   : not building
    - random                   : not building
    - regex                    : not building
    - serialization            : not building
    - signals                  : not building
    - system                   : not building
    - test                     : not building
    - thread                   : building
    - timer                    : not building
    - wave                     : not building

...patience...
...found 19764 targets...
...updating 16 targets...
gcc.compile.c++ bin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi/error_code.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads  -DBOOST_ALL_NO_LIB=1 -DBOOST_SYSTEM_STATIC_LINK=1 -DNDEBUG  -I"." -c -o "bin.v2\libs\system\build\gcc-4.2.
1\release\link-static\threading-multi\error_code.o" "libs\system\src\error_code.cpp"

...failed gcc.compile.c++ bin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi/error_code.o...
...skipped <pbin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi>libboost_system.a(clean) for lack of <pbin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi>error_
code.o...
...skipped <pbin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi>libboost_system.a for lack of <pbin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi>error_code.o.
..
...skipped <pinstall-dir/lib>libboost_system.a for lack of <pbin.v2/libs/system/build/gcc-4.2.1/release/link-static/threading-multi>libboost_system.a...
gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/chrono.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_All_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPRECATE
D -DBOOST_SYSTEM_STATIC_LINK=1 -DNDEBUG  -I"." -c -o "bin.v2\libs\chrono\build\gcc-4.2.1\release\link-static\threading-multi\chrono.o" "libs\chrono\src\chrono.cpp"

...failed gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/chrono.o...
gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/thread_clock.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_All_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPRECATE
D -DBOOST_SYSTEM_STATIC_LINK=1 -DNDEBUG  -I"." -c -o "bin.v2\libs\chrono\build\gcc-4.2.1\release\link-static\threading-multi\thread_clock.o" "libs\chrono\src\thread_clock.cpp"

...failed gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/thread_clock.o...
gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/process_cpu_clocks.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_All_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPRECATE
D -DBOOST_SYSTEM_STATIC_LINK=1 -DNDEBUG  -I"." -c -o "bin.v2\libs\chrono\build\gcc-4.2.1\release\link-static\threading-multi\process_cpu_clocks.o" "libs\chrono\src\process_cpu_clocks.cpp"

...failed gcc.compile.c++ bin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi/process_cpu_clocks.o...
...skipped <pbin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi>libboost_chrono.a(clean) for lack of <pbin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi>chrono
.o...
...skipped <pbin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi>libboost_chrono.a for lack of <pbin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi>chrono.o...
...skipped <pinstall-dir/lib>libboost_chrono.a for lack of <pbin.v2/libs/chrono/build/gcc-4.2.1/release/link-static/threading-multi>libboost_chrono.a...
gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/pthread/thread.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_CHRONO_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPREC
ATED -DBOOST_SYSTEM_STATIC_LINK=1 -DBOOST_THREAD_BUILD_LIB=1 -DBOOST_THREAD_POSIX -DNDEBUG  -I"." -c -o "bin.v2\libs\thread\build\gcc-4.2.1\release\link-static\threading-multi\pthread\thread.o" "libs\
thread\src\pthread\thread.cpp"

...failed gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/pthread/thread.o...
gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/pthread/once.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_CHRONO_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPREC
ATED -DBOOST_SYSTEM_STATIC_LINK=1 -DBOOST_THREAD_BUILD_LIB=1 -DBOOST_THREAD_POSIX -DNDEBUG  -I"." -c -o "bin.v2\libs\thread\build\gcc-4.2.1\release\link-static\threading-multi\pthread\once.o" "libs\th
read\src\pthread\once.cpp"

...failed gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/pthread/once.o...
gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/future.o
cc1plus: error: unrecognized command line option "-mthreads"

    "g++"  -ftemplate-depth-128 -O3 -finline-functions -Wno-inline -Wall -pedantic -mthreads -Wextra -Wno-long-long -pedantic -DBOOST_ALL_NO_LIB=1 -DBOOST_CHRONO_STATIC_LINK=1 -DBOOST_SYSTEM_NO_DEPREC
ATED -DBOOST_SYSTEM_STATIC_LINK=1 -DBOOST_THREAD_BUILD_LIB=1 -DBOOST_THREAD_POSIX -DNDEBUG  -I"." -c -o "bin.v2\libs\thread\build\gcc-4.2.1\release\link-static\threading-multi\future.o" "libs\thread\s
rc\future.cpp"

...failed gcc.compile.c++ bin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi/future.o...
...skipped <pbin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi>libboost_thread.a(clean) for lack of <pbin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi>pthrea
d/thread.o...
...skipped <pbin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi>libboost_thread.a for lack of <pbin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi>pthread/threa
d.o...
...skipped <pinstall-dir/lib>libboost_thread.a for lack of <pbin.v2/libs/thread/build/gcc-4.2.1/release/link-static/threading-multi>libboost_thread.a...
...failed updating 7 targets...
...skipped 9 targets... 
```

是否有可能以某种方式修补 boost_thread 以使用我的编译器在我的平台上编译，以便让 boost_thread 认为它应该被编译`-pthread`？

平台 - 旧的，经过大量修改的 cigwin，gcc-4.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:41:16.090

您可以尝试修补 tools/build/v2/tools/gcc.jam

```
1017 rule setup-threading ( targets * : sources * : properties * )
1018 {
1019     local threading = [ feature.get-values threading : $(properties) ] ;
1020     if $(threading) = multi
1021     {
1022         local target = [ feature.get-values target-os : $(properties) ] ;
1023         local option ;
1024         local libs ;
1025 
1026         switch $(target)
1027         {
1028             case windows : option = -mthreads ;
1029             case cygwin  : option = -mthreads ;
1030             case solaris : option = -pthreads ; libs = rt ;
1031             case beos    : # No threading options.
1032             case *bsd    : option = -pthread ;  # There is no -lrt on BSD.
1033             case sgi     : # gcc on IRIX does not support multi-threading.
1034             case darwin  : # No threading options.
1035             case *       : option = -pthread ; libs = rt ;
1036         }
1037 
```

如果您提供更多信息，我可以尝试帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T21:13:14.517

您可以使用 cxxflags 参数将标志传递给编译器，请参阅[http://www.boost.org/build/doc/html/bbv2/reference/tools.html#bbv2.reference.tools.compiler.gcc](http://www.boost.org/build/doc/html/bbv2/reference/tools.html#bbv2.reference.tools.compiler.gcc) 一些可能会有所帮助这里是： cxxflags=-DPTHREADS cxxflags=-DBOOST_THREAD_POSIX cxxflags=-pthread cxxflags=-DTHREAD
您可能需要进行试验才能得到您想要的结果，但我会首先重新运行您的命令

```
./b2 -j1 --with-thread link=static cxxflags=-DPTHREADS cxxflags=-DBOOST_THREAD_POSIX cxxflags=-pthread cxxflags=-DTHREAD --prefix=./install-dir release threading=multi --builddir=./build-dir install 
```

# sql - 在更新 oracle 中使用选择结果

> ID：12983756
> 
> 赞同：1
> 
> 时间：2012-10-19T23:26:49.550
> 
> 标签：sql, oracle

我搜索并发现了许多与我类似的问题，但没有一个解决方案适合我。这是在 Oracle 中，我不知道版本（我只通过 SQL Developer 访问它）。我有两个表（省略了不相关的列）：

```
describe t_points_receipt
Name              Null     Type          
----------------- -------- ------------- 
USER_ID           NOT NULL NUMBER(9)     
PROMOTION_ID      NOT NULL NUMBER(9)     
AMOUNT            NOT NULL NUMBER(9,2)   

describe t_user_promotion_points
Name         Null     Type        
------------ -------- ----------- 
USER_ID      NOT NULL NUMBER(9)   
PROMOTION_ID NOT NULL NUMBER(9)   
TOTAL_POINTS          NUMBER(9,2) 
```

而且，我有这个查询：

```
select user_id, promotion_id, sum(amount) from t_points_receipt
 where promotion_id = 10340 group by user_id, promotion_id; 
```

我想做的是用 t_user_promotion_points.user_id = (results).user_id 和 t_user_promotion_points.promotion_id = (results).promotion_id 的结果中的 sum(amount) 更新 t_user_promotion_points。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:35:49.537

```
update t_user_promotion_points p
set total_points = select sum(amount) from t_points_receipt r
on p.user_id = r.user_id 
where r.promotion_id = 10340 and
where t.promotion_id = 10340 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:48:59.970

您可以为要设置的值创建相关子查询：

```
update t_user_promotion_points p
set total_points = (select sum(amount) from t_points_receipt r where p.user_id = r.user_id and p.promotion_id = r.promotion_id)
where p.promotion_id = 10340; 
```

# java - 用于单极编码的字符比较 java

> ID：12983757
> 
> 赞同：1
> 
> 时间：2012-10-19T23:27:03.813
> 
> 标签：java, comparison, char

这里的问题是由于某种原因没有输入 for 循环内的条件。也就是说 `if (samp==1){`，由于所有字符都应该是 0 或 1，因此应该始终输入这两个字符中的一个，而不是输入它们中的任何一个，我不确定发生了什么。这应该是一个简单的字符比较。我还对其进行了测试，以查看“samp”变量一次正确地对位序列采样一个字符。

真的可以在这里使用一些帮助。我相信它的头脑简单得令人麻木。

```
//This method will take in a binary bit sequence which should be set up correctly from above
    //Then it should print the Unipolar encoding of the waveform
    public static void Unipolar(String s){
        String code ="";
        char samp='9';
        char[] charArray = s.toCharArray();  //turn the input bit sequence into a char array for simplicity

        String topline="";     //the method I chose was to keep a consistent 3 strings to draw the output
        String midline="";
        String botline="";

        for (int i = 0; i < s.length(); i++) {
        samp = charArray[i];
        System.out.println(samp);
            //depending on if the current character is a 1 or a 0 a differnt pattern will be added to the 
            //string to be outputted
            if (samp==1){
                topline+="*****"; 
                midline+="*    ";
                botline+="*    ";
            }
            if (samp==0){
                topline+="     ";
                midline+="     ";
                botline+="*****";
            }
        }
        System.out.println(topline);
        System.out.println(midline);
        System.out.println(botline);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:30:07.290

比较时应使用字符值`chars`：

```
if (samp == '1') {
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:30:16.093

好的，没关系....问题是我需要在 0 或 1 周围加上单引号，这意味着这是正确的比较运算符。

```
if (samp=='0'){ 
```

# android - 在不同布局中的视图之间设置对齐属性

> ID：12983760
> 
> 赞同：2
> 
> 时间：2012-10-19T23:27:18.527
> 
> 标签：android, xml

我正在为我的应用程序创建一个 XML 布局，我需要在文本下方对齐一个按钮，但是因为我使用 LinearLayout 将一些文本与属性权重水平对齐，所以按钮保持在不同的布局中，现在我定义了属性“ android:layout_below" 并且它没有找到文本的 ID。那么，有人有什么建议可以在不使用 Java 的情况下解决这个问题吗？

这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="3" >

<TextView
    android:id="@+id/text1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="text1"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/text2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="text2"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/text3"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="text3"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout>

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/text1"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/text1"
    android:gravity="center"
    android:text="Button" />

</RelativeLayout> 
```

编辑：按钮必须与 对齐`text1`，想法是使用三个属性：align_left、align_right 和 align_below，因此按钮具有与文本相同的宽度。我还有其他的观点来设置文本的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:46:10.963

您可以为 LinearLayout 设置 id：

```
<LinearLayout 
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="3" > 
```

并将按钮放在布局下使用

```
android:layout_below="@+id/text" 
```

要在第一个文本下对齐按钮，您可以将 text1 和按钮与垂直线性布局括起来：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:weightSum="3" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="text1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Button" />

</LinearLayout>

   <TextView
      android:id="@+id/text2"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:gravity="center"
      android:text="text2"
      android:textAppearance="?android:attr/textAppearanceLarge" />

   <TextView
      android:id="@+id/text3"
      android:layout_width="0dp"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:gravity="center"
      android:text="text3"
      android:textAppearance="?android:attr/textAppearanceLarge" />

   </LinearLayout>

  </RelativeLayout> 
```

# .htaccess - Codeigniter 问题 - 删除尾部斜杠，将其他非允许的 URI 字符重定向到 404 页面

> ID：12983761
> 
> 赞同：0
> 
> 时间：2012-10-19T23:27:30.957
> 
> 标签：.htaccess, codeigniter, redirect, http-status-code-404

我最近在 .htaccess 中添加了以下内容以删除尾部斜杠：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301] 
```

我还扩展 CI_URI 以删除不允许的 URI 字符并重定向到 404 页面（感谢原作者，而不是我！）：

```
public function _filter_uri($str)
{
if ($str != '' && $this->config->item('permitted_uri_chars') != '' && $this->config->item('enable_query_strings') == FALSE)
{
// preg_quote() in PHP 5.3 escapes -, so the str_replace() and addition of - to   preg_quote() is to maintain backwards
// compatibility as many are unaware of how characters in the permitted_uri_chars will be parsed as a regex pattern
if ( ! preg_match('|^['.str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-')).']+$|i', $str))
{
show_404(); //show 404 error page instead "The URI you submitted has disallowed characters" error
}
}

// Convert programatic characters to entities and return
return str_replace(
array('$',     '(',     ')',     '%28',   '%29'),
// Bad
array('&#36;', '&#40;', '&#41;', '&#40;', '&#41;'),
// Good
$str);
}
} 
```

由于我添加了 .htaccess 代码，URI 中任何不允许的字符，例如[http://www.mysite.com/contro,ller/func,tion](http://www.mysite.com/contro,ller/func,tion)（带逗号）都会导致重定向到 301 页面，随后链接到404 错误页面（即“页面已移至此处”，带有指向我的标准 404 页面的链接）。

我可以让两者一起工作，所以不允许的字符只是重定向到我的标准 404 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:47:15.190

如果您查看列表，`item('permitted_uri_chars')`您可能可以将它们复制到重写规则中。假设允许的字符是斜杠、数字/字母、下划线、句点和连字符：

```
RewriteRule !^[A-Za-z0-9_/\-\.]*$ - [L,R=404] 
```

另请注意，URL 转义字符在通过 mod_rewrite 发送之前会被解码。因此，如果 URL 看起来像`http://something.com/foo%20bar`，那么您用来匹配它的表达式是：`^foo\ bar$`因为 未`%20`转义到空格中。

# c# - 在 C# 中返回变量

> ID：12983765
> 
> 赞同：0
> 
> 时间：2012-10-19T23:28:15.160
> 
> 标签：c#, .net, class, methods, return

这是我课堂上的方法

```
public void tostringmeth(string concat)
    {
      // string concat;
        string markstring;
        string matricstring;

        markstring = "";
        matricstring = "";

        Mark.ToString(markstring);
        Matric.ToString(matricstring);

       concat= FirstName + " " + SecondName + " " + DoB+ " " + Course+ " " + markstring + " " + matricstring ;

        return; 
```

本质上我需要将“concat”变量返回到主窗体，以便我可以使用它（它只在标签中显示它）。我将如何去访问它？由于某种原因，将其声明为公共字符串会引发错误。编辑：我现在明白了，这是一个非常明显和愚蠢的错误（公共字符串不是无效的！）。感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:32:24.500

```
public string tostringmeth(string concat)
{
    // do your thing

    return concat;
} 
```

并以您的形式：

```
MyLabel.Text = tostringmeth(myConcatString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:50:39.587

他们是两种简单的方法。第一个我认为是最简单的...第二个也很简单:)

```
public string stVar; // It will not give error. because it is not in any function 
                   //it is in the scope of class. In this way no need to return 
```

修饰符（如公共/私有等）不能与方法（函数）的变量一起使用。它们可以很容易地与类成员一起使用（类变量，在任何函数括号中声明）

```
public void tostringmeth(string concat)
{
  // string concat;
    string markstring;
    string matricstring;

    markstring = "";
    matricstring = "";

    Mark.ToString(markstring);
    Matric.ToString(matricstring);

   stVar= FirstName + " " + SecondName + " " + DoB+ " " + Course+ " " + markstring + " " + matricstring ;

} 
```

第二种方式已经告诉

```
public string tostringmeth(string concat)
{
  // string concat;
    string markstring;
    string matricstring;

    markstring = "";
    matricstring = "";

    Mark.ToString(markstring);
    Matric.ToString(matricstring);

   concat= FirstName + " " + SecondName + " " + DoB+ " " + Course+ " " + markstring + " " + matricstring ;
  return concat;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T23:36:28.050

您将 concat 字段传递给您的方法，但不执行它包含的值。我认为没有理由将其传递给方法。我会做这样的事情：

```
public string tostringmeth() 
{ 
    string markstring; 
    string matricstring; 

    markstring = ""; 
    matricstring = ""; 

    Mark.ToString(markstring); 
    Matric.ToString(matricstring); 

   return FirstName + " " + SecondName + " " + DoB+ " " + Course+ " " + markstring + " " + matricstring ; 

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T23:41:21.673

两个选项：
第一，更好的选项，返回所需的字符串值。（我稍微简化了方法逻辑）

```
 public string tostringmeth()    
  {    
       return FirstName + " " + SecondName + " " + 
             DoB + " " + Course + " " +
             Mark.ToString(string.empty) + " " + 
             Matric.ToString(string.empty);
  } 
```

二、修改方法入参（必须将方法参数声明为ref）

```
 public void tostringmeth(ref string concat)    
  {    
       concat = FirstName + " " + SecondName + " " + 
             DoB + " " + Course + " " +
             Mark.ToString(string.empty) + " " + 
             Matric.ToString(string.empty);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T00:22:14.900

返回某些内容的函数必须是非 void 类型。

```
// void function cant return anything
public void tostringmeth(string inputParameter)
{
    return; // returns nothing 
}

// string function can return string
public string tostringmeth(string inputParameter)
{
     // string function can return string

     string outputParameter = something;
     return outputParameter; // returns variable value
} 
```

# html - 如何混合描述相同对象的本体（使用 rdfa？）

> ID：12983766
> 
> 赞同：8
> 
> 时间：2012-10-19T23:28:28.330
> 
> 标签：html, semantic-web, ontology, rdfa

想象一下，我开始使用本体，因为它提供了一些有用的词汇来描述我感兴趣的对象，例如 FOAF 来描述一个人（我）。我立即遇到了两个问题。我遇到了另一个本体，它也有描述一个人的词汇。

**问题 1**：其中一些术语在功能上是等效的或相关的，但我不想为将两个本体都包装在同一个对象上而烦恼，

```
<span property="foaf:name"><span property="dc:creator">Carl Boettiger</span></span> 
```

因为这很麻烦，而且似乎忽略了**链接**数据的整个想法，它应该足够聪明，知道 a`dc:creator`也是 a`foaf:person.` 那么正确的方法是什么？我如何确认这些对象之间的关系（例如，可能并非所有对象都`foaf:person`应该是`dc:creator`。它是否在语义网上的某个地方说`dc:creator`是 的子集`foaf:person`？我是否需要以某种方式链接到这样的声明？你能指出我在哪里吗？

**问题2**：一个本体中的词汇不足以满足我的目的，所以我需要使用另一个本体中的词汇。例如，据我所知，FOAF 并没有提供一种方式来说明我的组织、位置或角色（GoogleSnippets 似乎认为这些字段是有效人员的必填字段）。所以我去找一个方便的本体，比如谷歌建议的那个，[http://rdf.data-vocabulary.org](http://rdf.data-vocabulary.org)，它有这些术语。现在我又遇到了一个密切相关的问题，即确保两个本体就一个人是什么达成一致：

```
<div typeof="foaf:Person">
  <span property="foaf:name">Carl Boettiger</span> is a <span property="v:role"> graduate student </span>
</div> 
```

`v:role`对它属于什么有自己的想法，a `typeof="v:Person`。我是否也需要添加此`typeof`声明？那么我是否需要做一些事情来说明它与 相同`foaf:Person`，并且确实这`v:role`两者`foaf:name`都描述了同一件事（我）？

非常感谢您澄清我的困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:28:04.297

请注意 foaf:Person 是在 RDFa 中通过 @typeof 属性表示的类型或类。另一方面，dc:creator、foaf:name、v:role 是放置在 RDFa 中的 @property 属性中的属性。通常，您首先在 HTML 中键入对象（例如 Person），然后通过属性为其提供名称或角色等属性。类型通常以大写字母 (foaf:Person) 开头，而属性则以小写字母 (foaf:name) 开头。

问题 1：不是为每个新属性添加一个新的 span 元素，而是可以将所有属性放在同一个属性属性中，用空格分隔：

```
<span property="foaf:name dc:creator">Carl Boettiger</span> 
```

> 是否在语义网上的某个地方说 dc:creator 是 foaf:person 的子集？

首先，这个例子还不够充分，dc:creator 是一个属性，而 foaf:Person 是一个类型，但是让我们假设我们正在谈论 foaf:Agent 和 foaf:Person，foaf 规范声明 foaf:Person 是foaf:Agent: [http://xmlns.com/foaf/spec/#term_Person](http://xmlns.com/foaf/spec/#term_Person) - 词汇可以定义这样的关系。还有跨词汇映射，有时定义来自各种词汇的类和属性之间的关系。

> 我是否需要以某种方式链接到这样的声明？

不，您通常不必这样做。

问题 2：请注意，不推荐使用[http://rdf.data-vocabulary.org](http://rdf.data-vocabulary.org)以支持 schema.org 词汇： http: [//schema.org/docs/full.html](http://schema.org/docs/full.html)和[http://schema.rdfs.org /](http://schema.rdfs.org/)

> 我还需要添加这种类型的声明吗？那么我是否需要做一些事情来说明它与 foaf:Person 相同，并且确实 v:role 和 foaf:name 都描述了同一件事（我）？

通常，在以 HTML 格式发布数据时，您不会尝试声明词汇表之间的等价性，而是使用您认为对使用您的数据的应用程序有用的所有词汇表术语进行发布，并且在 RDFa 中这样做很容易，因为您可以在给定的@typeof 或@property 属性中嵌入多种类型和属性。

```
<div typeof="foaf:Person v:Person">
  <span property="foaf:name v:name">Carl Boettiger</span> is a <span property="v:role"> graduate student </span>
</div> 
```

请注意，您可以在[http://rdfa.info/play/测试您的 RDFa 标记](http://rdfa.info/play/)

# excel - 从excel（Excel VBA）插入后在PowerPoint中调整图表大小

> ID：12983768
> 
> 赞同：1
> 
> 时间：2012-10-19T23:28:43.287
> 
> 标签：excel, powerpoint, powerpoint, excel, vba, powerpoint

我有一些代码在[excel](/questions/tagged/excel "显示标记为“excel”的问题")中获取图表并将其粘贴到[powerpoint](/questions/tagged/powerpoint "显示标记为“powerpoint”的问题")幻灯片中。但是，一旦将其粘贴到[powerpoint](/questions/tagged/powerpoint "显示标记为“powerpoint”的问题")中 ，我不确定如何调整图表的大小。我已经研究过它是哪个数字“形状”，我​​可以手动执行此操作，但我不知道如何自动执行此操作。任何帮助将不胜感激，谢谢！

这是我的代码：

```
Sub AddChartToPPT(PPT As PowerPoint.Application, Slide As Integer, Chart As String, FromTop As Double, FromLeft As Double, Length As Double, Width As Double)
Dim activeslide As PowerPoint.Slide
PPT.ActiveWindow.View.GotoSlide Slide
Set activeslide = PPT.ActivePresentation.Slides(Slide)
ActiveSheet.ChartObjects(Chart).Activate
ActiveChart.ChartArea.Copy
activeslide.Shapes.PasteSpecial(DataType:=ppPasteMetafilePicture).Select
PPT.ActiveWindow.Selection.ShapeRange.Left = FromLeft
PPT.ActiveWindow.Selection.ShapeRange.Top = FromTop
'Need to add scaling code
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:23:51.640

试试这个：

```
dim shp as Object
set shp=activeslide.Shapes.PasteSpecial(DataType:=ppPasteMetafilePicture)
shp.Left = FromLeft
shp.Top = FromTop 
```

所以你的代码的其余部分：

```
Sub AddChartToPPT(PPT As PowerPoint.Application, Slide As Integer, Chart As String, FromTop As Double, FromLeft As Double, Length As Double, Width As Double)
Dim activeslide As PowerPoint.Slide, shp as Object
PPT.ActiveWindow.View.GotoSlide Slide
Set activeslide = PPT.ActivePresentation.Slides(Slide)
ActiveSheet.ChartObjects(Chart).Activate
ActiveChart.ChartArea.Copy
set shp=activeslide.Shapes.PasteSpecial(DataType:=ppPasteMetafilePicture)
shp.Left = FromLeft
shp.Top = FromTop
'Need to add scaling code     
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:11:44.123

根据我的经验，在将图表对象粘贴到 PowerPoint 之前，在 Excel 中调整图表对象的大小会更容易。首先，Excel的对象模型更加清晰。其次，调整图元文件的大小可能会导致失真，而调整图表大小并粘贴为不需要调整大小的图元文件则不会。

# python - 无法导入 django_tables2l

> ID：12983771
> 
> 赞同：0
> 
> 时间：2012-10-19T23:29:04.723
> 
> 标签：python, django, django-models, django-forms

嗨，我是 Django 的新手，我已尽力理解它，但我还有很长的路要走。我正在开发一个项目，我想在其中使用 django tables2 创建 HTML 表。几天来我一直在尝试导入 django 表，但仍然没有运气......请帮助我。

尝试导入 django_tables2 时出现此错误

```
$ python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import django_tables2
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "build\bdist.win32\egg\django_tables2\__init__.py", line 3, in <module>
File "build\bdist.win32\egg\django_tables2\tables.py", line 4, in <module>
File "c:\Python27\lib\site-packages\django\db\__init__.py", line 11, in <module>
if DEFAULT_DB_ALIAS not in settings.DATABASES:
File "c:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
self._setup()
File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 40, in _setup
raise ImportError("Settings cannot be imported, because environment variable %s is              undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable     DJANGO_SETTINGS_MODULE is undefined. 
```

当我从 forms.py 导入时，我得到错误未解决的导入。请帮助我，一步一步地告诉我如何正确地做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:35:33.160

错误：

> `ImportError`: 无法导入设置，因为环境变量 `DJANGO_SETTINGS_MODULE`未定义。

意味着`django_tables2`只有当你在 Django 上下文中时它才可以导入，这样它就知道你的项目设置是什么等等，而不仅仅是在一般的 Python 上下文中。

改为尝试它`manage.py shell`，它会为您设置所需的`DJANGO_SETTINGS_MODULE`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:29:21.957

首先，您需要进入项目内部，即 django_table2，您将在其中找到 manage.py 文件。尝试使用以下命令将其加载到 shell 中：

```
python manage.py shell 
```

这将设置所需的 django 和 python 环境。在此之后，您将能够在 Python 路径中导入项目。因此，如果您使用的是 Linux 操作系统，可以在 /usr/local/lib/python2.*/dist_packages/ 中找到 django_tables2，您需要做的就是从 Shell 导入它，

```
from django_tables2 import * 
```

现在，进口显然取决于您要完成的工作。您可能想查看本教程。 [http://django-tables2.readthedocs.org/en/latest/](http://django-tables2.readthedocs.org/en/latest/)

# actionscript-3 - 无法扩展 Sound 对象原型

> ID：12983782
> 
> 赞同：0
> 
> 时间：2012-10-19T23:31:11.707
> 
> 标签：actionscript-3, flash, object, audio, prototype

我是编程新手。我需要向 Sound 对象添加新属性，但我无法让它工作。这就是我正在做的事情：

```
S31 = new Sound();
S31.load(new URLRequest("mp3/S31.mp3"));
Sound.prototype.correctas = 0;
trace(S31.correctas); 
```

我收到此错误消息：

“1119：通过静态类型 flash.media:Sound 的引用访问可能未定义的属性更正”。

我不知道该怎么办。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:05:39.577

as3 中确实没有使用原型类（如果我在这里错了，请有人纠正我，我知道它包含但我不确定你为什么要使用它。）

您可以创建[动态](https://stackoverflow.com/questions/9514479/how-to-create-a-as3-dynamic-class-and-how-to-use-it)类，允许您在运行时向它们添加属性，但在这种情况下，我会坚持使用 OOP。

您想要做的是创建一个扩展 Sound 的类并保存您想要包含的任何扩展功能。这个新类将[继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)基础 Sound 类的所有功能。

尝试[创建一个新的 AS3 类](http://www.adobe.com/devnet/flash/quickstart/creating_class_as3.html)并让它扩展 Sound

```
package src {
import flash.media.Sound;
import flash.media.SoundLoaderContext;
import flash.net.URLRequest;

    public class MySound extends Sound{

    public var correctas:Number; //assuming you are using a Number here          

    //sound takes two params in its constructor 
    public function MySound(stream:URLRequest=null, context:SoundLoaderContext=null){
    //super passes these params to the super class
        super(stream, context);
     }
} 
```

现在要使用它，您将创建一个新的 MySound 对象而不是 Sound

```
 var s31:MySound = new MySound();
 s31.load(new URLRequest("mp3/S31.mp3"));
 s31.correctas = 0;
 trace(s31.correctas) //will be 0 
```

# openerp - 在树中创建窗口操作，可能会影响所有记录

> ID：12983784
> 
> 赞同：1
> 
> 时间：2012-10-19T23:31:20.787
> 
> 标签：openerp

我有一个列出待办事项记录的树视图。我需要添加一个执行操作的按钮，例如删除所有标记为完成的条目，例如`clear_completed(cr, uid, ids, context)`（`ids`在这种情况下并不真正需要）。

我相信这是通过窗口操作（配置 > 自定义 > 低级对象）完成的，但究竟如何使该操作在客户端表单中可用？也欢迎 XML 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T13:06:51.993

你需要一个向导来做到这一点。
选定的条目是`context['active_ids']`可变的。
您可以以[account.invoice.confirm 向导](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/7045/account/wizard/account_invoice_state.py#L26)为例。另请参阅[相关的 XML](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/7045/account/wizard/account_invoice_state_view.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:16:15.373

在您的 .xml 文件中，您可以继承 account.invoice 的树形视图并添加 type='object' 的“按钮”。该按钮将显示在您的树视图中。例如：

```
<button name="clear_completed" string="My Action" type="object"/> 
```

在 .py 文件中编写您的逻辑代码。

希望它会帮助你。谢谢你。

# php - 在 wkhtmltopdf 中混合页面方向

> ID：12983785
> 
> 赞同：16
> 
> 时间：2012-10-19T23:31:39.010
> 
> 标签：php, html, pdf, wkhtmltopdf

我正在使用 wkhtmltopdf 从单个 HTML 文件生成 PDF，使用`page-break-before: always`. 例如：

```
<div class="cover">
    Cover Page
</div>
<div class="page">
    Page 1
</div>
<div class="page">
    Page 2
</div> 
```

使用 CSS：

```
.page {
    page-break-before: always;
} 
```

现在，我编写了 wkhtmltopdf 命令，用于在信纸大小的页面上纵向打印 PDF。我需要其中一个页面处于横向，其余页面处于纵向（以便在屏幕上查看 PDF 时，所有内容都将正确定向）。

有没有办法在单个 PDF 中混合方向？

如果这是不可能的，有没有办法使用 wkhtmltopdf 合并多个 PDF？（我已经看到了不同 pdfmerge 软件的其他建议。）如有必要，我可以将我的 HTML 源文件拆分为每个页面的多个文件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T03:38:19.303

如果将来有人在寻找这个答案，我会用我的解决方案来完成这个。由于缺乏答案，我想确实没有办法使用 wkhtmltopdf 创建具有多个页面方向的 PDF。

1.  我实现的第一个解决方案是使用一个 HTML 文件创建单个 PDF，并使用以下 CSS 旋转横向页面的内容：

    ```
    width: 1275px; 
    height: 1650px; 

    -webkit-transform: translateY(1650px) rotate(270deg); /* Chrome, Safari 3.1+ */ 
    -moz-transform: translateY(1650px) rotate(270deg); /* Firefox 3.5+ */ 
    -o-transform: translateY(1650px) rotate(270deg); /* Opera 10.5-12.0 */ 
    -ms-transform: translateY(1650px) rotate(270deg); /* IE 9 */ 
    transform: translateY(1650px) rotate(270deg); /* IE 10+, Firefox 16.0+, Opera 12.1+ */ 
    filter: progid:DXImageTransform.Microsoft.Matrix(M11=6.123031769111886e-17, M12=1, M21=-1, M22=6.123031769111886e-17, SizingMethod='auto expand'); /* IE 6-7 */ 
    -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=6.123031769111886e-17, M12=1, M21=-1, M22=6.123031769111886e-17, SizingMethod='auto expand')"; /* IE 8 */ 

    -webkit-transform-origin: 0% 0%; 
    -moz-transform-origin: 0% 0%; 
    -o-transform-origin: 0% 0%; 
    -ms-transform-origin: 0% 0%; 
    transform-origin: 0% 0%; 
    ```

    （要编写类似的兼容 CSS3 转换，请查看这个伟大的网站来计算所有 IE 矩阵值：[http](http://www.useragentman.com/IETransformsTranslator/) ://www.useragentman.com/IETransformsTranslator/ ）

    如果您的用户只在 PDF 生成后打印它，这将是一个不错的解决方案。由于我的用户需要在屏幕上查看 PDF，因此他们必须使用他们的 PDF 查看软件来旋转页面是不切实际的。

2.  因此，我的第二个解决方案是将每个页面从单个 HTML 文件创建为单独的 PDF，然后我使用[Ghostscript](http://www.ghostscript.com/download/gsdnld.html)将它们合并到一个文件中。这工作得很好，但只是增加了一些额外的处理时间来创建所有文件并合并它们。就我而言，PDF 不会经常下载，而且页数很少，所以额外的时间并不是一个很大的负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T20:15:36.270

致@sacohe——来自未来的你好！是的，还在寻找。

如果将来有人仍在寻找此答案，我将留下功能请求的链接：[https ://github.com/wkhtmltopdf/wkhtmltopdf/issues/1564](https://github.com/wkhtmltopdf/wkhtmltopdf/issues/1564)

目前它仍然是开放的，但可能迟早会修复。

# scala - 列表列表循环定义 Scala

> ID：12983791
> 
> 赞同：2
> 
> 时间：2012-10-19T23:32:29.273
> 
> 标签：scala

我有一个由整数定义的列表列表：

```
val ex: List[List[Int]] = List(List (1, 2, 3), List(4, 5, 6), List(7, 8 , 9), ex) 
```

如何使用scala中的循环定义将列表列表的所有元素乘以2？

编辑：实体 X 的循环定义是一个有效地使用 X 来设置自己 X 的定义。

例子：

```
val ex1: List[List[Int]] = List(List(1,2,3), <call ex1 to multiply the elements by two>) 
```

该示例将创建一个无限列表。我很抱歉没有早点澄清。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:12:02.503

我不确定，但我认为您可能正在寻找 Streams，它类似于延迟定义的列表，并且该定义可以是递归的。这看起来像你想要的吗？

```
scala> val ex:Stream[List[Int]] = List(1,2,3) #:: ex.map( _ map (_*2) )
ex: Stream[List[Int]] = Stream(List(1, 2, 3), ?)

scala> ( ex take 5 ) foreach println
List(1, 2, 3)
List(2, 4, 6)
List(4, 8, 12)
List(8, 16, 24)
List(16, 32, 48) 
```

也许

```
scala> val ex:Stream[List[Int]] = List(1,2,3) #:: ex.map( _ map (_+3) )
ex: Stream[List[Int]] = Stream(List(1, 2, 3), ?)

scala> ( ex take 5 ) foreach println
List(1, 2, 3)
List(4, 5, 6)
List(7, 8, 9)
List(10, 11, 12)
List(13, 14, 15) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:56:05.033

如果我正确解释你的问题，你想这样做：

```
val ex: List[List[Int]] = {
  val ex = List(List(1, 2, 3), List(4, 5, 6), List(7, 8, 9))
  ex ++ ex
} 
```

这不是一个循环定义，因为内部`ex`只是遮蔽了外部（如果您使用不同的变量名称会更清楚）。

如果您确实想要递归定义，则需要使用惰性数据结构，例如`Stream`（您可以尝试使用`List`，但您会得到`NullPointerException`）。所以你可以这样写：

```
val ex: Stream[List[Int]] = 
  Stream(List(1, 2, 3), List(4, 5, 6), List(7, 8, 9)) #::: (ex take 3)

ex.toList // if it actually needs to be a List, which is probably doesn't 
```

`#:::`是on的惰性`Stream`等价物。`:::``List`

如果您追加`ex`而不是`ex take 3`then`ex`将是无限的，您可以使用`(ex take 6).toList`.

**编辑**：在阅读@AmigoNico 对您的问题的解释（这可能是正确的解释 - 但谁知道！）之后，您也可以使用该`iterate`函数执行此操作，例如

```
List.iterate(List(1,2,3), 3)(_ map (_ * 2))
  // List(List(1, 2, 3), List(2, 4, 6), List(4, 8, 12))

// or if you want it infinte:
val xs = Stream.iterate(List(1,2,3))(_ map (_ * 2))
(xs take 3).toList
  // result same as above 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:38:30.270

1.  你不能有无限`List`，因为它不是 Scala 中的惰性数据结构，你将不可避免地耗尽内存。但是 Scala 有一个惰性结构——`Stream`
2.  您正在寻找的是一个`iterate`功能。标准库中没有它，所以这里有一个受[Haskell](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aiterate)启发的实现（假设您使用的是 Scala 2.10）：

    ```
    implicit class AnyFunctional [ A ] ( val a : A ) extends AnyVal {
      def iterate ( f : A => A ) : Stream[A] = a #:: (f(a) iterate f)
    } 
    ```

    将它放在范围内，您将能够像这样使用它：

    ```
    scala> List(1,2,3) iterate (_.map(_*2)) take 3 toList
    warning: there were 1 feature warnings; re-run with -feature for details
    res7: List[List[Int]] = List(List(1, 2, 3), List(2, 4, 6), List(4, 8, 12)) 
    ```

# android - 如何在方向改变时切换到其他活动（然后再返回）？

> ID：12983792
> 
> 赞同：1
> 
> 时间：2012-10-19T23:32:36.063
> 
> 标签：android, android-activity, android-orientation

在我的 Android 应用程序中，我有一个主要活动“MyActivity”，它覆盖了 onConfigurationChanged() 方法。在该方法中，我检查方向的变化，如果更改为横向，则调用另一个活动：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        super.onConfigurationChanged(newConfig);
        startActivity(new Intent(this, BaseFullScreenActivity.class));
    }
} 
```

然后，当我将手机更改为横向时，会调用另一个活动类“BaseFullScreenActivity”，它工作正常。在那个被调用的活动中，我再次覆盖 onConfigurationChanged() 方法以再次结束这个子活动：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        super.onConfigurationChanged(newConfig);
        finish();
    }
} 
```

但是，在第二次方向更改（回到纵向）时，应该结束我的子活动并再次显示主要活动，应用程序崩溃并且我收到以下错误：

```
android.app.SuperNotCalledException: 
Activity MyActivity did not call through to super.onConfigurationChanged() 
```

我确实在两个活动中都覆盖了 onStop() 方法并调用了 super.onStop()，但这对我没有帮助。

还有其他想法吗？
在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:37:32.547

为什么不按照错误提示做呢？如果您将调用移至 if 语句之外的超类，则您的应用不会在第二次方向更改时崩溃。

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);
    if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        startActivity(new Intent(this, BaseFullScreenActivity.class));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:45:03.767

正如 Sam 所说， super() 调用应该是您方法中的第一个语句。（[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)）

# c# - 动态 C# 公式评估

> ID：12983793
> 
> 赞同：1
> 
> 时间：2012-10-19T23:32:39.113
> 
> 标签：c#, .net

给定字符串中的动态 if 语句，.net 中是否有一种方法可以评估并返回正确的结果。

IE

```
 static void Main(string[] args)
    {
        String a = "if(\"Alex\" == \"Alex\"){return 1;}else{return 0;}";
        passThroughTest.Program.evalStatement(a);
    }
    public static void evalStatement(String statement)
    {

        //Evaluation of Statement

     } 
```

这并不完美，但在这种情况下，最终结果将是 1。从这个角度来看，这似乎是“愚蠢的”，但它适用于需要利用类似语法进行评估的更复杂的引擎。

我是否需要编写某种解析器并评估语句...？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:35:39.497

我认为您正在寻找的是 CSharpCodeProvider ：http: [//msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)

这允许您从源代码编译或评估 C# 代码并运行它。它可能不像评估单个“if”案例那么容易，因为当您编译 C# 时，您应该拥有完整的语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T23:41:31.650

*   您可以使用[javascript.net](https://github.com/JavascriptNet/Javascript.Net)

    他们网站上的示例代码：

    ```
    // Initialize a context
    using (JavascriptContext context = new JavascriptContext()) {

        // Setting external parameters for the context
        context.SetParameter("console", new SystemConsole());
        context.SetParameter("message", "Hello World !");
        context.SetParameter("number", 1);

        // Script
        string script = @"
            var i;
            for (i = 0; i < 5; i++)
                console.Print(message + ' (' + i + ')');
            number += i;
        ";

        // Running the script
        context.Run(script);

        // Getting a parameter
        Console.WriteLine("number: " + context.GetParameter("number"));
    } 
    ```

*   或使用 C# 表达式树，请参阅[Building Expression Evaluator with Expression Trees](http://www.aboutmycode.com/net-framework/building-expression-evaluator-with-expression-trees-in-csharp-table-of-contents/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T22:37:39.880

你也可以这样做：

```
var expression="(\"Alex\" == \"Alex\") ? 1:0"; 
var res = FlexRule.DynamicEvaluation.ExpressionEval.Default.Compute(null, expression); 
```

有关表达式的更多详细信息，请查看 [http://wiki.flexrule.com/index.php?title=Expression](http://wiki.flexrule.com/index.php?title=Expression)

# url-rewriting - urlrewrite 替换标题

> ID：12983798
> 
> 赞同：3
> 
> 时间：2012-10-19T23:33:43.753
> 
> 标签：url-rewriting, tuckey-urlrewrite-filter

我正在尝试用 Tuckey 的 Urlrewrite-filter 替换 Jetty 提供的页眉。我正在使用以下构造：

```
<rule>
<from>.*</from>
<set type="response-header" name="X-Frame-Options">ALLOWALL</set>
</rule> 
```

此规则有效，但不是替换标题而是添加一个新标题。所以页面最终有两个标题 - 旧的和新的。

```
X-Frame-Options:    SAMEORIGIN  
X-Frame-Options:    ALLOWALL 
```

有没有办法删除旧的？还是强制规则替换而不是添加？

# php - 用 PHP 分隔字符串

> ID：12983799
> 
> 赞同：1
> 
> 时间：2012-10-19T23:33:47.467
> 
> 标签：php, html

我目前正在为我的网站开发一个非常简单的搜索功能。用户输入他们的搜索查询，然后他们被带到显示结果的页面。就我而言，用户正在搜索其他用户。我的问题是，如何将一个字符串分成两个变量？

示例查询：

马特·莫里斯

我希望我的 PHP 将出现空格的字符串分开。我怎样才能做到这一点？

```
 <html>
    <form method="get" action="results.php">
        <input type="text" name="search"/>
    </form>

 </html>

<?php

    // code to explode the string into $fname and $lname 
       if there is a space present

$fname= Matt
$lname= Morris

if (isset($fname) && isset($lname)) {
$search_query= "SELECT * FROM users WHERE fname LIKE %'".$fname."'% AND lname LIKE  
%'".$lname."'%";
// code to run the query and display results
}
else if (isset($fname)) {
$search_query= "SELECT * FROM users WHERE fname LIKE %'".$fname."'%";
// code to run the query and display results
}
else if (isset($lname)) {
$search_query= "SELECT * FROM users WHERE lname LIKE %'".$lname."'%";
// code to run the query and display results
}

 ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T23:35:16.463

你可以这样做：

```
list($first, $last) = explode($name, ' ', 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T23:36:11.130

可以使用php函数explode [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
// Example 1
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T23:35:15.213

`$array = explode(' ', $string);`

# php - 仅当我复选框时才应显示相应的表单

> ID：12983800
> 
> 赞同：-2
> 
> 时间：2012-10-19T23:33:56.730
> 
> 标签：php, javascript, jquery, html

我正在尝试实现这个确切的功能： http: [//jsfiddle.net/exttq/](http://jsfiddle.net/exttq/) 但是在里面使用我的 PHP，现在它显示 2 个复选框和 2 个表单，但是我需要的是：除非我检查任何，否则这 2 个表单不应该是可见的盒子..

所以，请检查以下代码中的错误...

```
function eshop_extras_checkout($echo){

    $echo .= '

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 

    <script>

    $(".formGroup").hide();
    $("#chooseForm input:checkbox").on("change", function() {
        if($(this).is(":checked")) {
            $("#" + $(this).val()).show();
        }
        else {
            $("#" + $(this).val()).hide();
        }
    });
    ​
</script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= ' <form id="chooseForm">
        <input type="checkbox" name="form1" value="form1"> Form1<br>
        <input type="checkbox" name="form1" value="form2"> Form2<br>
    </form>

    <form id="form1" class="formGroup">
        <h2>FORM 1</h2>
        <label>Name</label><input type="text"> <br>
        <label>Address</label><input type="text">
    </form>

    <form id="form2" class="formGroup">
        <h2>FORM 2</h2>
        <label>Username</label><input type="text"> <br>
    </form>';

    $echo .= '<legend>Articles Order Form</legend>' . "\n";

    return $echo;
} 
```

等待您的回复...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:39:41.470

问题是您的脚本在元素出现在 DOM 之前执行。看：

```
//when this line executes:
$(".formGroup").hide(); //the .formGroup is not present in the DOM yet
//in other words, the jQuery object is empty and calling .hide() does nothing

//the same happens to this handler binding:
$("#chooseForm input:checkbox").on("change", ... 
```

您的小提琴的 JS 设置为使用`onDomReady`包装器，这就是它在那里正常工作的原因。

您可以将脚本放在表单的 HTML 下方，和/或简单地将脚本内容包装在[DOM 就绪处理程序](http://api.jquery.com/ready/)中：

```
$(function() {
    $(".formGroup").hide();
    $('#chooseForm input:checkbox').on('change', function() {
        if($(this).is(':checked')) {
            $("#" + $(this).val()).show();
        }
        else {
            $("#" + $(this).val()).hide();
        }   
    });
}); 
```

* * *

jQuery 始终将代码包装在[DOM 就绪处理程序](http://api.jquery.com/ready/)中的最佳实践之一，即：

```
$(document).ready(function() {
    //code here
}); 
```

或更短的速记：

```
$(function() {
    //code here
}); 
```

两者具有相同的效果，它们阻止代码在 DOM 准备好之前执行。

另一个 JavaScript 最佳实践是将 JS 代码放在页面的页脚（就在`</body>`. .

上述两种最佳实践都是可以组合的。尽管如此，简单地使用 DOM 就绪处理程序就可以解决问题，并且将脚本移动到 HTML 表单下方也足够了。

* * *

您的框架已经在`noConflict`模式下加载了另一个 jQuery 副本，这意味着您不能`$`在全局范围内使用别名。为了解决这个问题，您可以使用这种特殊的 DOM 就绪语法，它将别名 jQuery 回到`$`其范围内：

```
jQuery(function($) {
    $(".formGroup").hide();
    $("#chooseForm input:checkbox").on("change", function() {
        if($(this).is(":checked")) {
            $("#" + $(this).val()).show();
        }
        else {
            $("#" + $(this).val()).hide();
        }
    });
}); 
```

来自 DOM 就绪处理程序文档的更多信息 - Aliasing the jQuery Namespace：

> 当使用另一个 JavaScript 库时，我们可能希望调用 `$.noConflict()`以避免命名空间困难。调用此函数时，`$`快捷方式不再可用，迫使我们 `jQuery`每次正常写时都要写`$`。但是，传递给`.ready()`方法的处理程序可以接受一个参数，该参数传递给全局`jQuery`对象。这意味着我们可以在`.ready()`处理程序的上下文中重命名对象，而不会影响其他代码。

# html - JWPlayer 不适用于 Internet Explorer 8

> ID：12983801
> 
> 赞同：0
> 
> 时间：2012-10-19T23:34:05.500
> 
> 标签：html, flash, video, jwplayer

出于某种原因，Internet Explorer 8 及更低版本无法运行 JWPlayer，我已正确引用了所有内容。为什么视频不能在 jwplayer 上运行？

似乎 jwplayer 甚至没有在 IE8 或更低版本中加载。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:36:59.723

`window.outerWidth`在 IE8 中未定义，因此您的条件评估为 false 并且 JWPlayer 代码永远不会运行。

自己调试真的没那么难。条件中的简单警报或 console.log 显示它没有运行，然后您推断它可能是因为条件本身评估错误，然后 window.outerWidth 的简单警报或 console.log 显示它未定义。

潜在解决方案的相同问题：[https ://stackoverflow.com/a/5954761/1217408](https://stackoverflow.com/a/5954761/1217408)

使用`document.body.clientWidth`那里指出的那样，这样的事情应该可以工作：

```
if((window.outerWidth && window.outerWidth > 640) || (document.body.clientWidth && document.body.clientWidth > 640)){ 
```

您应该记住，在 IE 中，这可能包括计算可用宽度时的滚动条。它们并不完全等同，但如果你小心或注意它，那么你应该没有任何问题。

# ruby-on-rails - 如何使用字符串数组的数组来匹配另一个字符串？

> ID：12983815
> 
> 赞同：1
> 
> 时间：2012-10-19T23:35:34.127
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, ruby-on-rails-3.2

我有一个乱七八糟的标题列表（比如说 1000 个）。我想分析这些标题以查找与我创建的少数类型匹配的“关键字”（标题不是模型，但类型是）。

例如，假设第一个标题字符串是`"awesome playlist of house, EDM and ambient"`

现在，假设我也有 15 `Genres`，每个都有一个属性`name`

我的最终目标是我想为该标题字符串分配流派。这很容易通过进行一些字符串规范化，然后使用`.include?`

但如果有同义词，它就没有帮助。例如，我的 @genre.name 被称为`chill`，它应该适用于`ambient`上面的字符串。同样，我的舞曲 @genre.name 被称为`dance`，并且应该包含`EDM`在上面的字符串中（edm = 电子舞曲）

所以我想做的是为每个流派添加 10 个左右的同义词，这样它也可以检查这些同义词。

问题是我不确定如何在循环中执行此操作。我猜是循环中的循环？

这是我的“单级”代码，没有同义词

```
 def determine_genres(title)
    relevant_genres = []
    @genres.each do |genre|
      if normalize_string(title).include? normalize_string(genre.name)
        relevant_genres << genre.id
      end
    end
    relevant_genres
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:25:24.687

当您说字符串数组时，您肯定走在正确的轨道上。我会把它的结构更像：

```
genres = {
    'chill' => ['ambient','mood','chill'],
    'dance' => ['edm','trance','house',]
} 
```

等等，因此，散列中的每个键都是 的名称`@genre.name`，而相应的数组是该 @genre 的所有可能同义词/子流派的列表。

在 ruby​​ 中，有一个漂亮的数组方法，使用它`&`可以让你“交叉”两个数组并找到共同的值。像这样：

```
[1,2,3,4,5] & [0,3,5,6,8]  OUTPUT: [3,5] 
```

在此处查看更多信息：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)

如果你将归一化的句子和所有关键术语的数组相交，那么你可以说如果输出的相交数组的长度 > 0，那么就有与该类型匹配的关键术语并且该类型是相关的。

所以你可以这样编辑循环（使用上面数组的流派散列）：

```
def determine_genres(title)
  relevant_genres = []
  genres.each do |genre, terms|
    intersecting_terms = normalize_string(title) & terms
    if intersecting_terms.length > 0
      relevant_genres << Genre.find_by_name(genre).id
    end
  end
  relevant_genres
end 
```

您还可以在数据库中为`Genre`存储同义词的哈希/数组的模型提供一个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:51:03.073

嗯。。。好吧

您如何看待这种方法，对于每种类型，您将使用一个通用名称（如环境），对于每个同义词，您会将它们与哈希相关联。IE

```
hsh = {"chill" => "ambient",
 "chillout" => "ambient",
 "chilloff" => "ambient",
 "ambient" => "ambient",
 "trance"  => "electronic"
}

#then you just need to check the Hash like this:

puts hsh['chill']  #=> ambient
puts hsh['chillout'] #= ambient
puts hsh['trance'] #=> electronic 
```

不利的一面是您需要写下所有这些同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:25:11.423

对于每个同义词，创建一个实例，`Genre`它`name`是同义词，并且与`id`代表同义词相同。

我不确定您的结构是否最有效，但是使用它，您仍然可以将其重构为：

```
def determine_genres(title)
  title = normalize_string(title)
  @genres.select{|genre| title.include? normalize_string(genre.name)}.map(&:id)
end 
```

# c# - 如何在 foreach 循环中删除 xmlnode？

> ID：12983816
> 
> 赞同：2
> 
> 时间：2012-10-19T23:35:37.683
> 
> 标签：c#, xml

在下面的代码中，我使用 foreach 循环检查节点列表中的每个节点并删除其中的一些。在我删除一个节点后，foreach 循环抛出以下错误：“元素列表已更改。枚举操作无法继续”。我怎样才能避免它？

```
public static XmlNodeList Scan(XmlNodeList nodeList)
        {
            string elementValue = null;
            foreach (XmlNode xmlElement in nodeList)
            {
                elementValue = xmlElement.InnerText;
                if (elementValue.Length >= 6 && elementValue.Substring(0, 3) == "999")
                {
                    continue;
                }
                else 
                {
                    XmlNode node = xmlElement.ParentNode;
                    node.RemoveChild(xmlElement);
                }
            }

            return nodeList;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:40:34.410

遗憾的是，答案是不使用 foreach，而是使用非常防弹的“for()”。

```
for(int i = collection.Count - 1; i >= 0; i--)
{
    object myObject = collection[i];
    collection.Remove(myObject);
} 
```

在这种情况下，我在集合中向后循环，一次删除一个对象。这样，我永远不会有无效的索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T00:06:16.133

由于您不是简单地从您循环的集合中删除项目，因此我不确定“使用 for 循环”是否有效。

下面分两个步骤：

1.  创建一个常规列表，列出您想要与其父级分离的所有元素。
2.  从它们的父元素中分离这些元素 - 通过迭代不受分离影响的常规列表。

```
public static XmlNodeList Scan(XmlNodeList nodeList)
{
    List<XmlNode> toRemove = new List<XmlNode>();

    foreach (XmlNode xmlElement in nodeList)
    {
        string elementValue = xmlElement.InnerText;
        if (elementValue.Length < 6 || elementValue.Substring(0, 3) != "999")
        {
            toRemove.Add(xmlElement);
        }
    }

    foreach(XmlNode xmlElement in toRemove)
    {
        XmlNode node = xmlElement.ParentNode;
        node.RemoveChild(xmlElement);
    }

    return nodeList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:40:23.413

使用 for 循环代替

```
for(I=length-1;I>=0;I--) 
```

For each 用于枚举，枚举列表时不能删除。此外，循环必须从最后一个元素开始，以避免在删除元素时发生任何偏移。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-12T18:57:37.163

我找到了一个替代方法：[将 xmlnodelist 转换为 list<>](https://forums.asp.net/t/1842614.aspx?Convert%20xmlnodelist%20to%20list%20)

`XmlNodeList`有一个方法`Cast`，可以按如下方式使用：

```
var listOfNodes = new List<XmlNode>(xmlNodeList.Cast<XmlNode>()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T23:43:54.413

不允许更改`foreach`迭代期间使用的集合。您可以`For..loop`改用

```
for(int i=0; i<nodeList.Length; i++)
{
   //remove nodeList[i];
} 
```

# twitter-bootstrap - Twitter Bootstrap：偏移列？

> ID：12983826
> 
> 赞同：2
> 
> 时间：2012-10-19T23:36:55.993
> 
> 标签：twitter-bootstrap, css, layout, twitter-bootstrap-2

我正在研究 Bootstrap 并且想知道偏移列：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

文档说这些列“每行应该总是加起来 12”。然后它给出了一个偏移列的例子：

```
<div class="row">
  <div class="span4">...</div>
  <div class="span3 offset2">...</div>
</div> 
```

问题：

1.  这些列加起来不等于 12。它总共只有 7。或者如果你计算偏移量：9。这只是一个坏例子还是什么？
2.  为什么我要抵消任何东西？这只是为了更好地处理我网站布局的内容吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T00:48:07.367

为了澄清 Rob 的意思，您缺少的是所有网格示例都使用 9 列。原因是文档中的侧边栏（侧边导航）本身占用了 3 列。

引导文档的整个宽度为 12 列，侧边导航为负 3，剩下 9 列用于网格演示。有道理？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:40:48.787

侧边栏是 span3。所以整个页面宽度加起来是12。它显示的内容部分只是一个span9。

# python - cv.Get2D 颜色坐标

> ID：12983828
> 
> 赞同：3
> 
> 时间：2012-10-19T23:37:00.880
> 
> 标签：python, opencv

我想单击一个对象并获取我之前选择的颜色的像素坐标。我在网上找到了这段代码

```
import cv
tolerancia = 30
def evento_mouse(event,x,y,flags,param):
    if event==cv.CV_EVENT_LBUTTONDOWN:
        pixel=cv.Get2D(imagen,y,x) 
        print 'X =',x,'  Y =',y
        print 'R =',pixel[2],'G =',pixel[1],'B =',pixel[0]
        cv.InRangeS(imagen,(pixel[0]-tolerancia,pixel[1]-tolerancia,pixel[2]-                                               tolerancia),(pixel[0]+tolerancia,pixel[1]+tolerancia,pixel[2]+tolerancia),temporal)
        cv.ShowImage('Color',temporal)
        c = cv.Get2D(temporal,y,x) 
        print c[0],c[1],c[2] # I always get: 255, 0, 0
   imagen=cv.LoadImage('prueba2.png')
   cv.ShowImage('Prueba',imagen)
   temporal=cv.CreateImage(cv.GetSize(imagen),cv.IPL_DEPTH_8U,1)
   cv.SetMouseCallback('Prueba',evento_mouse)
   cv.WaitKey(0) 
```

我正在尝试查看像素是白色还是黑色。但我总是得到相同的值： 255, 0, 0 (blue = 255)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:02:17.173

您需要了解几件事。

您正在使用 OpenCV 的旧 'cv' 界面。在这种情况下，要获取像素值，您可以使用函数“cv2.Get2D”，它会返回相应 BGR 值的元组。

**1\. 为什么是蓝色，即二值图像的 (255,0,0)？**

对于彩色图像和灰度/二进制图像，返回相同的 3 个元素的元组，但对于灰度图像，第一个元素是像素值，其余两个是不相关的，因此它们是零。因此，由于您正在读取二进制图像（时间）的像素值，因此您会得到 (255,0,0) 等值。

**2\. 为什么总是 (255,0,0) ？**

当您单击原始图像时，会创建一个相应的二值图像，其中与您单击的颜色对应的区域变为白色，而所有其他区域变为黑色。如果您单击原始图像中的红色，您的二值图像将是这样的，所有红色区域都将是白色并且保持黑色。所以很明显，你点击的像素总是白色的。因此，如果您从二进制图像中读取该像素，则始终只能得到 (255,0,0)。

我想建议您迁移到 OpenCV 新的 Python 接口“cv2”模块。它有很多优点。主要优势是非常重要的 Numpy 支持。您可以查看此 SOF 进行一些比较：[所有这些 OpenCV Python 接口之间有什么不同？](https://stackoverflow.com/questions/10417108/what-is-different-between-all-these-opencv-python-interfaces/10425504#10425504)

你也可以从这里获得一些关于 cv2 的启动教程：[www.opencvpython.blogspot.com](http://www.opencvpython.blogspot.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:42:58.727

首先，我认为您需要检查您的下限和上限是否在 0 到 255 的范围内。

其次，你的“时间”变量是一个“面具”。如果该位置的像素值在您的下限和上限范围内，则在位置 (x, y) 将其设置为 255。它不包含位于给定范围内的所有像素。

下面是我在测试图像上尝试的一些代码。请注意，我使用了一些 numpy，但使用 cv2.cv.fromarray() 转换为 CvMat 以匹配您的代码。

```
#!/usr/bin/env python

import cv2
import numpy as np

def main():
    image = cv2.imread("forest.jpg")
    imageMat = cv2.cv.fromarray(image)
    dst = cv2.cv.fromarray(np.zeros((imageMat.rows, imageMat.cols), np.uint8))

    x = 250 # Manually set pixel location. You can get this from your mouse event handler.
    y = 500
    pixel = image[y, x] # Note y index "row" of matrix and x index "col".
    tolerance = 10
    # Ensure your bounds are within 0 and 255.
    lower = tuple(map(lambda x: int(max(0, x - tolerance)), pixel))
    upper = tuple(map(lambda x: int(min(255, x + tolerance)), pixel))
    # Get mask of all pixels that satisfy range condition and store it in dst.
    cv2.cv.InRangeS(imageMat, lower, upper, dst)

    mask = np.asarray(dst) # Convert back to numpy array.
    cv2.imshow("Mask", mask) # The mask indicating which pixels satisfy range conditions
    cv2.imshow("Image", image)
    extracted = np.zeros_like(image) # The pixels that satisfy range condition.
    extracted[np.where(mask)] = image[np.where(mask)]
    cv2.imshow("extracted", extracted)

    cv2.waitKey()

if __name__ == "__main__":
    main() 
```

这是python2版本：

```
#!/usr/bin/env python

import cv2
import numpy as np

def main():
    image = cv2.imread("forest.jpg")
    x = 230 # Manually set pixel location. You can get this from your mouse event handler.
    y = 300
    pixel = image[y, x] # Note y index "row" of matrix and x index "col".
    tolerance = 30
    # Ensure your bounds are within 0 and 255.
    lower = map(lambda x: max(0, x - tolerance), pixel)
    upper = map(lambda x: min(255, x + tolerance), pixel)
    lower = np.asarray(lower)
    upper = np.asarray(upper)
    mask = cv2.inRange(image, lower, upper) # Notice we can just get mask without having to allocate it beforehand.

    cv2.imshow("Mask", mask) # The mask indicating which pixels satisfy range conditions
    cv2.imshow("Image", image)
    extracted = np.zeros_like(image) # The pixels that satisfy range condition.
    extracted[np.where(mask)] = image[np.where(mask)]
    cv2.imshow("extracted", extracted)

    cv2.waitKey()

if __name__ == "__main__":
    main() 
```

# ruby-on-rails - 无法停止 Heroku 上的 solr 服务器

> ID：12983835
> 
> 赞同：0
> 
> 时间：2012-10-19T23:37:51.253
> 
> 标签：ruby-on-rails, heroku, solr, websolr

我尝试停止`solr`Heroku 上的服务器（已经安装了 Websolr $20 插件），但我无法这样做。

```
$ heroku run rake sunspot:solr:stop
Running `rake sunspot:solr:stop` attached to terminal... up, run.1
java version "1.6.0_20"
OpenJDK Runtime Environment (IcedTea6 1.9.9) (6b20-1.9.9-0ubuntu1~10.04.2)
OpenJDK 64-Bit Server VM (build 19.0-b09, mixed mode)
rake aborted!
No PID file at /app/solr/pids/production/sunspot-solr-production.pid

Tasks: TOP => sunspot:solr:stop
(See full trace by running task with --trace) 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:17:33.183

当您说 时`heroku run`，您是在要求 Heroku 启动一个新的测功机。然后你告诉这个新的 dyno 运行一个`rake`任务来停止 Solr——但它没有运行 Solr，它是一个完全不同的服务器上的全新 dyno，它只是运行 rake 任务来停止 Solr。

测功机启动后，您只有几种方式与测功机通信：

*   通过它绑定的端口，如果有的话；
*   通过它所连接的服务（例如数据库或消息代理）；或者
*   通过要求 Heroku 停止它，通过扩展、部署新版本或通过`ps:stop`.

您可以通过 获取您的应用程序正在运行的进程列表`heroku ps`。（大概此列表将包括您尝试停止的 Solr 实例。）您可以使用 . 终止这些进程中的任何一个`heroku ps:stop <process name>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T02:54:57.333

如果要删除索引，则应删除插件。没有办法暂停插件。

# c - 尝试使用 conio.h 的函数（特别是 textbackground）

> ID：12983836
> 
> 赞同：0
> 
> 时间：2012-10-19T23:37:53.437
> 
> 标签：c, windows

在遇到问题后，我一直在研究 C 头文件 conio.h。我已将头文件包含在我的代码中（我在 Windows 上运行并使用 GCC 编译器），但似乎没有包含头文件，从而导致无法使用其功能。我错过了一步还是做错了什么？谢谢。

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

int main()
{
    textbackground(RED);
    printf("Hello");
    return 0;
} 
```

任何帮助将不胜感激。

**控制台错误**

> C:\Users\Justin\Desktop\Project\gui\main.c||在函数'main'中：| C:\Users\Justin\Desktop\Project\gui\main.c|7|警告：函数'textbackground'的隐式声明| C:\Users\Justin\Desktop\Project\gui\main.c|7|error: 'RED' undeclared (第一次在这个函数中使用)| C:\Users\Justin\Desktop\Project\gui\main.c|7|错误：（每个未声明的标识符只报告一次| C:\Users\Justin\Desktop\Project\gui\main.c|7|错误：对于它出现的每个函数。）| ||=== 构建完成：3 个错误，1 个警告 ===|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:40:53.843

由于您在 Windows 上，我建议您使用

```
BOOL WINAPI SetConsoleTextAttribute(
  _In_  HANDLE hConsoleOutput,
  _In_  WORD wAttributes
); 
```

和其他功能来自`wincon.h`. 我经常使用它们。他们工作正常。

# visual-studio - 引用的 DLL 的 Visual Studio 负载

> ID：12983837
> 
> 赞同：1
> 
> 时间：2012-10-19T23:37:54.497
> 
> 标签：visual-studio, debugging, dll, reference

抱歉，我对 Visual Studio 不太熟悉...

我在 VS2010 中有一个要正确构建的项目，我创建了对包含项目使用的库方法的 DLL 的引用。如果没有引用，我会得到构建错误。

我可以在解决方案资源管理器中看到引用。这是一个可以编译的插件，现在构建时没有错误或警告。

但是当我运行它来尝试调试它时，我发现它在使用在引用库之一中定义的对象时崩溃。

当我查看“模块”窗口时，我可以看到实际上已经加载了该 dll 的两个副本——一个位于部署主程序的区域，另一个位于我的插件所在的目录中。我假设这可能是它崩溃的原因。

在构建之后，项目中引用的一些 dll 会被复制到构建调试目录中。导致问题的一个是复制过来的一个，但它是唯一一个似乎是从两个地方加载的。我不知道为什么某些引用的 dll 被复制而其他的却没有。而且我不知道为什么只从两个位置加载了这个 dll。

我对所有项目文件进行了文本搜索以查找 dll 的名称，以查看项目中是否有多个引用会导致 dll 被加载两次。

有关如何解决此问题的任何建议？

# c# - WebMatrix razor (C#) WebMail helper 返回服务器错误发送电子邮件

> ID：12983838
> 
> 赞同：1
> 
> 时间：2012-10-19T23:38:26.253
> 
> 标签：c#, email, razor, helper, webmatrix

每个人，

我在 WebMatrix razor (C#) 中发送电子邮件时遇到问题。

我得到的错误是：

```
a connection attempt failed because the connected party did not properly respond after a period......., etc. etc. 
```

它在我的工作中运行良好，但是当尝试在另一台计算机上进行演示时，当用户尝试注册并且尝试发送确认电子邮件时，它会返回此错误。它在以下行出错：

```
WebMail.Send(
                    to: email,
                    subject: "Please confirm your account",
                    body: "Your confirmation code is: " + token + ". Visit <a href=\"" + confirmationUrl + "\">" + confirmationUrl + "</a> to activate your account. " +
                    "Once your account is confirmed, all you need to do is await administrator approval."
                    ); 
```

我检查了以下内容：

1.  确保 smtp 服务器名称正确“smtp.gmail.com”
2.  确保我确实拥有当前版本的 WebMatrix
3.  确保我有 WebHelper 库。
4.  确保端口设置为 25
5.  确保设置了正确的电子邮件地址和密码

我尝试研究一些帖子，但没有一个有效。

关于这可能是什么的任何想法？

谢谢你的帮助！

更新：

我在 XP 中禁用了 Comodo，但它仍然不起作用。我想我追踪了与它说没有响应的主机相对应的 IP 地址，它属于 Tyler TX 中的服务器，由 Suddenlink（计算机的 ISP）拥有，但由于设置的电子邮件地址已设置通过谷歌，我试图访问他们的 SMTP 服务器，而不是 Suddenlink，他们的服务器真的很重要吗？如果有帮助，我确实知道“他们的”传出 (SMTP) 服务器需要身份验证。这和它有什么关系吗？同样，我没有使用通过他们设置的电子邮件帐户，虽然

# php - 调整大小导致缓慢

> ID：12983839
> 
> 赞同：0
> 
> 时间：2012-10-19T23:38:28.727
> 
> 标签：php, javascript, html, css

我正在一个站点上工作，该站点将在框（div）内有很多图像，这些图像被排序为网格（绝对定位）。我注意到调整图像大小以适应框会导致网站显着变慢。有很多图像 (342)，但我不明白为什么会这样，因为当我不调整它们的大小时，网站运行速度很快。

请注意：我计划在未来实现盒子的动态调整大小。**我提到这一点是为了避免将每个图像保存为另一个尺寸的答案。我有兴趣了解减速的原因，而不是不同的实施方法。**

网格最初由 150px * 150px 的框 (div) 组成。网格位于`<body>`并且最初没有图像（只有空的 div）。加载主体后，JavaScript 函数将图像放入相应的框中。JavaScript 函数依赖 PHP 从数据库中获取图像以及调整大小。以下是该部分 PHP 的步骤：

1.) PHP 从数据库中获取图像文件名。

2.) PHP 获取图像尺寸（以像素为单位）并将它们保存到两个变量中。我在这里称他们为 x 和 y。

3.) 我更改 x 和 y 以使图像适合 150px * 150px（或我分配给框的初始尺寸的任何初始值）。

4.) 我习惯`echo`了`write document.getElementById("PHP given Id").innerHTML = '<img src="PHP given filename" style="width:PHP x value; height:PHP y value"/>';`。

如果我在我的代码中注释掉第 3 步，则站点会快速运行（即注释掉从图像默认尺寸更改 x 和 y 的部分）。我还尝试设置`<img>`而不是内联 CSS 的宽度和高度属性，但这并不能解决缓慢的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T23:43:56.420

调整图像大小需要相当多的计算能力，因此速度变慢。您可以做的最好的事情是使用 PHP 调整图像大小并保存缩略图，因此您只需执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:11:25.590

使用`gd`php 中的库动态加载图像并调整其大小，然后使用`header`php 中的函数告诉浏览器您正在发送图像（而不是文本）。您输出调整大小的图像。

使用这种方法，您可以对`<img>`标签使用类似的东西：

```
 <img src="script.php?file=someFile" style="width: 150px; height: 150px;" /> 
```

有了这个，您不需要为每个图像创建缩略图。

# javascript - 加载requirejs和jquery时出错

> ID：12983841
> 
> 赞同：7
> 
> 时间：2012-10-19T23:38:40.850
> 
> 标签：javascript, jquery, requirejs

我正在为 AMD 尝试使用 requirejs 和 jquery 的简单演示。以下是我的文件夹结构结构：

```
├── index.html
└── js
    ├── lib
    │   ├── jquery.js
    │   └── require.js
    └── main.js 
```

在我的 index.html 文件中，我有以下内容：

```
 <head>
    <script data-main="js/main" src="js/lib/require.js"></script>
  </head>

  <body>
    <div id="hello">    </div>

  </body> 
```

我的 main.js 文件如下所示：

```
define(['lib/jquery'], function ($) {

  $("#hello").html("Wow this works!");

}); 
```

但是当我这样做时，我得到一个错误：`Uncaught TypeError: undefined is not a function` 在 main.js 第 3 行。

怎么了？我看不懂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T03:39:05.150

阅读本期：[https ://github.com/jrburke/requirejs/issues/435](https://github.com/jrburke/requirejs/issues/435)

我的理解是这是因为 jquery 是如何定义自己的。它使用命名的定义调用：

```
define( "jquery", [], function () { return jQuery; } ); 
```

所以现在，如果你需要`'lib/jquery'`它就行不通了。您必须完全要求`'jquery'`它才能工作。

**编辑：**

如果你想把 jquery 放在`lib/`文件夹中并且你的基本 url 是`lib/`( `lib/../`) 的父文件夹，你可以使用这样的垫片：

```
requirejs.config({
  baseUrl: 'js',
  shim: {
    'lib/backbone': {
      deps: ['lib/underscore', 'lib/jquery'],
      exports: 'Backbone'
    },
    'lib/underscore': {
      exports: '_'
    },
    'lib/jquery': {
      exports: '$'
    }
  }
});

requirejs(['lib/jquery'], function($) {
  // use $
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:56:53.033

我已经在 main.js 的第一行尝试了没有“$”的示例，它工作正常。

修复**main.js**：

```
define(['lib/jquery'], function () {
     $("#hello").html("Wow this works!");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:51:34.817

```
<script data-main="js" src="js/lib/require.js"></script>
<script src="js/main.js"></script> 
```

是你想要的。该`data-main`属性只是指向应该是它的相对请求的根。因此，您需要直接加载 main 或通过脚本标记或`require()`内联脚本块中的调用

# java - 需要将字节数组/二进制消息从 UDP DatagramPacket 转换为 java 中的几个字段

> ID：12983842
> 
> 赞同：1
> 
> 时间：2012-10-19T23:38:48.137
> 
> 标签：java, bytearray, ascii, datagram

我有一个包含 10 字节消息的字节数组。我知道前 2 个字节包含一个想要提取到字符串的 id。这个 id 的一个例子是：2001。剩余的字节由我知道的其他字段组成。

我从 UDP 消息接收二进制数据，在尝试使用以下方法转换二进制/字节数组后，我的打印仍然记录二进制消息。

我使用的代码如下转换二进制 UDP 消息：

```
 DatagramPacket rcvMsg = receivepacket.getData();
 String id = new String(rcvMsg, 0, 2, "US-ASCII");
 System.out.println("id ----- : "+id); 
```

我怎样才能让它从二进制数据报消息中打印 2001？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:46:56.540

您希望以什么格式恢复前 2 个字节？它们代表一个整数，还是一个编码字符串？

因为，否则您可以将数组包装到 ByteArrayInputStream 中，然后将后者包装到 DataInputStream 中，然后使用 DataInputStream 方法在您认为合适的时候读取您的消息。

```
DataInput input = new DataInputStream(new ByteArrayInputStream(myArray));
String id = String.valueOf(input.readShort()) 
```

如果它们对应于受支持的 Java 数据类型（即字节、短、整数、字符串等），您甚至可以继续使用此对象来读取数组中编码的其余字段。

现在，如果您的前两个字节仅代表 ASCII 字符（或任何其他编码），那么您最好使用 String 构造函数之一：

```
String id = new String(myBytes, 0, 2, "US-ASCII"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:41:21.493

将您的字节数组转换为字符串，然后根据需要使用子字符串将其剪切。

如果有帮助，这里有一个与 c# 中的代码类似的问题（与 java 不太相似）： [How to create a packet in C#](https://stackoverflow.com/questions/12868219/how-to-create-a-packet-in-c-sharp/12868432#12868432)

此处基于 java 示例更新：[Java Byte Array to String to Byte Array](https://stackoverflow.com/questions/6684665/java-byte-array-to-string-to-byte-array)

```
byte[] bytes = new byte[] {97, 98, 99};
String str = new String(bytes);
System.out.println(str.substring(0,2));
System.out.println(str.substring(2)); 
```

# c# - 用C#提取html元素的值

> ID：12983844
> 
> 赞同：1
> 
> 时间：2012-10-19T23:39:10.227
> 
> 标签：c#, regex, xml-parsing

在 Wordpress 生成的页面中，有以下元标记：

```
<meta name="generator" content="WordPress 3.4.2" /> 
```

我正在寻找一种轻松提取“3.4.2”的方法（在上面的示例中）

使用 XmlDocument 或正则表达式会更快吗？

我找到了 JSoup，但这对于我正在尝试做的事情来说太过分了。

**编辑**

只是为了澄清 - 我不想包含任何外部库。
此外，这是在类库中运行的，因此也不能选择使用 powershell。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:44:08.797

由于您不想匹配成对的标签或任何东西，所以正则表达式应该没问题。只需搜索`content="WordPress (\d\.\d\.\d)`或类似。（如果真的一致，你可以搜索整个`meta`标签。）

尝试将 HTML 页面解析为 XmlDocument 可能行不通；并非所有有效的（或浏览器支持的）HTML 都是有效的 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:51:54.653

利用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)解析 HTML

![在此处输入图像描述](../Images/143ace5685c43479d0f9ff3b6d9debcb.png)

**编辑（要复制的代码）**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using HtmlAgilityPack;

namespace HTMLAgilityExample
{
    class Program
    {
        static void Main(string[] args)
        {
            string contentValue;

            HtmlDocument document = new HtmlDocument();
            document.Load("C:/test.html");
            foreach(HtmlNode link in document.DocumentNode.SelectNodes("//meta[@content]"))
            {
                HtmlAttribute attribute = link.Attributes["content"];
                if(attribute.Value.Contains("WordPress"))
                {
                    contentValue = attribute.Value.Replace("WordPress", "").Trim();
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T15:55:15.807

我想，既然你无论如何都必须从属性值中解析版本，而且听起来你不想在这个任务之外进行任何广泛的 HTML 解析，我建议使用正则表达式。

这应该给你一个开始。表达式可以简化一点；也许没有必要指定属性值在元标记内。或者可以稍微收紧一点；也许最好指定“内容”属性。无论哪种方式，这在我的快速测试中都有效。

请注意，为了更好的可读性，我喜欢在正则表达式中保留空格并包含 IgnorePatternWhitespace 选项。

```
var html = ""; // Populate the html string here

var options = RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace;
var regx = new Regex( "<meta\\s+? .*? WordPress\\s*? (?<version> [\\d\\.]+) [^\\d\\.] .*? />", options );

var match = regx.Match( html );

if ( match.Success ) {
    var version = match.Groups["version"].Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T23:59:07.137

你可以使用powershell：

```
PS> [xml]$xml = '<meta name="generator" content="WordPress 3.4.2" />'
PS> ($xml.meta.content) -match "[\d\.]+"
True
PS> $matches[0]
3.4.2 
```

# android - Android 试图从零开始的游戏

> ID：12983850
> 
> 赞同：1
> 
> 时间：2012-10-19T23:40:02.790
> 
> 标签：android

我正在尝试制作一个黑屏游戏，当您滑动屏幕时，您触摸的黑色部分会消失并在其后面显示图像。目的是保持滑动，直到你能猜出图像是什么。

我见过其他应用程序可以做到这一点。我被困在如何做到这一点上。我的想法是通过更改像素来修改位图以透视。但是我看不到任何访问位图内存的方法，或者也许还有另一种方法可以做到这一点？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:20:31.910

One way to make this would be having your bitmap drawn like any other image, and on top of it you'll have an editable black bitmap (that you can dinamically make using draw(), look for documentation on Paint class), and when the user swipes, you record the path, and use a brush to paint transparent pixels on the black bitmap, so the image below will become visible.

That last part is almost the same as implementing a simple paint app, so it shouldn't be hard to figure out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:17:09.360

一个潜在的解决方案是使用该[`copy`](http://developer.android.com/reference/android/graphics/Bitmap.html#copy%28android.graphics.Bitmap.Config,%20boolean%29)方法创建图像位图的副本。这样您就可以对图像进行修改。

然后用黑色方块遮住图像。当用户在图像上擦拭手指时，您需要记录他们遵循的路径并以此为基础创建遮罩图像。使用该蒙版，您可以浏览原始图像并仅在滑动路径未覆盖的区域中将图像涂黑。

这可能值得一试[`Paint`](http://developer.android.com/reference/android/graphics/Paint.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:59:24.103

您可以使用 a [`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，但我怀疑这不是您想要的滑动效果类型。然而，这是一种简单的实现方式。`ViewPager`在股票 android 应用程序中广泛使用。看看 Play Music 如何让您在最近/专辑/...视图之间滑动。正如您所看到的，它更像是一种分页（相对于滑动）效果。

您可以使用[`ImageSwitcher`](http://developer.android.com/reference/android/widget/ImageSwitcher.html), 并为输入/输出效果添加动画。这是一篇关于如何在动画中使用它的 SO 文章，

[设置动画 ImageSwitcher 将运行（in_left 或 out_right）](https://stackoverflow.com/questions/9432653/setting-animation-imageswitcher-will-run-in-left-or-out-right)

然而，这并不好用，因为动画是在检测到滑动后触发的……动画不跟随滑动。

如果你不喜欢这些，你可能会坚持编写一些 OpenGL 代码来获得你想要的东西。

# java - Windows和Linux之间的Java7 DatagramSocket.setReceiveBufferSize方式不同？

> ID：12983853
> 
> 赞同：0
> 
> 时间：2012-10-19T23:40:33.673
> 
> 标签：java, network-programming, operating-system, udp

在 Linux（Ubuntu 12.04）和 Windows 7 上调用此代码，您会得到非常不同的结果：

```
DatagramSocket socket = new DatagramSocket(4445);
socket.setReceiveBufferSize(Integer.MAX_VALUE);
System.out.println("SO_RX_BUFFER SET TO:"+socket.getReceiveBufferSize()); 
```

Linux 你得到： SO_RX_BUFFER SET TO:131071

在 Windows 上你会得到： SO_RX_BUFFER SET TO:2147483647

为什么操作系统之间存在巨大差异？为什么linux的价值这么小？反正有没有增加linux缓冲区的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:13:35.817

这里发生的是主机操作系统的行为不同。

*   在 Linux 案例中，操作系统对您可以从应用程序中请求的内容设置了上限。要解决此问题，您需要更改操作系统配置设置。这将需要“root”权限，并且不应由应用程序完成。

    [这个页面](http://fasterdata.es.net/host-tuning/linux/)有一些关于 Linux 网络调优的基本信息。

*   在 Windows 的情况下，操作系统要么不设置限制，要么（更有可能）静默覆盖用户请求的缓冲区大小，如果它大于操作系统施加的限制。

* * *

说了这么多，你需要想想你在这里做什么。缓冲的网络数据包（RX 和 TX）很可能必须保存在物理内存中。当您增加限制时，您会迫使操作系统为自己保留更多的 RAM 页面，从而减少可用于正常应用程序的内存。

第二个问题是，如果基本问题是您的应用程序难以跟上，那么增加网络缓冲量可能是有害的。在最坏的情况下，您的应用程序将不断处理旧数据包，而新数据包将被丢弃。简而言之，额外的缓冲使延迟变得更糟，而没有（必然）消除数据丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:02:21.830

这似乎是重复的： [为什么更改 SO_RCVBUF 的值不起作用？](https://stackoverflow.com/questions/10063497/why-changing-value-of-so-rcvbuf-doesnt-work)

看起来linux有配置文件限制。

添加以下内容：

net.core.rmem_max = 16777216 （或任何你想要的限制）

到 /etc/sysctl.conf

解决了这个问题。

# java - 为 Webview 捕获的 JPG 图像创建特定位置

> ID：12983857
> 
> 赞同：1
> 
> 时间：2012-10-19T23:40:50.617
> 
> 标签：java, android, image, android-sdcard, webpage-screenshot

好的，所以我想弄清楚如何调整此代码以保存图像而不是 /sdcard 我想将其保存在 /sdcard/folder/Screenshot_xxxxx.jpg 之类的地方，

这是下面的代码。

```
 case R.id.settings_capture:
                item.setIcon(R.drawable.capture);                   
                //Resize the webview to the height of the webpage
                int pageHeight = web.getContentHeight();
                LayoutParams browserParams = web.getLayoutParams();
                web.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, pageHeight));

                //Capture the webview as a bitmap
                web.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(web.getDrawingCache());
                web.setDrawingCacheEnabled(false);

                //Create the filename to use
                String randomFilenamepart = String.valueOf(new SecureRandom().nextInt(1000000));
                String filename = Environment.getExternalStorageDirectory().toString() + "/ScreenShot_" + randomFilenamepart + ".jpg";

                File imageFile = new File(filename);
                //Stream the file out to external storage as a JPEG
                OutputStream fout = null;
                try {
                    fout = new FileOutputStream(imageFile);
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fout);
                    fout.flush();
                    fout.close();
                    Toast.makeText(WebViewClientDemoActivity.this, "Screen Capture Saved!\n\nImage Saved at location : /sdcard\n\nSaved As: ScreenShot_xxxxx.jpg", Toast.LENGTH_LONG).show();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    Toast.makeText(WebViewClientDemoActivity.this, "Problem with Capturing Image or Location to Store Image", Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    web.setLayoutParams(browserParams);
                } 
```

所以我的主要目标是将代码修改为我可以将其保存在特定位置的位置，例如 sdcard 上的应用程序自己的文件夹。

感谢任何帮助、评论、源代码示例、外部链接。我提前感谢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:59:19.743

更新此行以包含所需的路径：

```
 File imageFile = new File(filename); 
```

例如

```
 File imageFile = new File("/sdcard/folder/"+filename); 
```

请确保在执行代码之前安装文件驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T07:50:21.823

这解决了我的问题

```
 case R.id.settings_capture:
                item.setIcon(R.drawable.capture);                   
                //Resize the webview to the height of the webpage
                int pageHeight = web.getContentHeight();
                LayoutParams browserParams = web.getLayoutParams();
                web.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, pageHeight));

                //Capture the webview as a bitmap
                web.setDrawingCacheEnabled(true);
                Bitmap bitmap = Bitmap.createBitmap(web.getDrawingCache());
                web.setDrawingCacheEnabled(false);

               // final DateFormat DF = new SimpleDateFormat("yyyyMMdd_HHmmss_SSS");
                String out = new SimpleDateFormat("EEE_MMM_dd_yyyy hh:mm.s'.jpg'").format(new Date());

                //Create the filename to use
                String target_filename  = "FolderName-" + (out);
                        //+ ".jpg";
                try {
                    File targetDir = new File(Environment.getExternalStorageDirectory(), "/Enlighten");
                if (!targetDir.exists()){   
                    targetDir.mkdirs(); }
                    File file = new File(targetDir, target_filename);
                    FileOutputStream fos = new FileOutputStream(file);
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
                    fos.flush();
                    fos.close();
                    Toast.makeText(WebViewClientDemoActivity.this, "Capture Saved!\n\nImage Stored @ /sdcard/Location", Toast.LENGTH_LONG).show();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    Toast.makeText(WebViewClientDemoActivity.this, "Problem Storing Image To: /sdcard/Location", Toast.LENGTH_LONG).show();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    web.setLayoutParams(browserParams);
                }
                return true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T04:31:57.400

试试这个代码：将图像存储在特殊文件夹和具有不同名称的图像

```
 String root = Environment.getExternalStorageDirectory()
                    .toString();
            File myDir = new File(root + "/image_folder_name");
            myDir.mkdirs();
            Random generator = new Random();
            int n = 10000;
            n = generator.nextInt(n);
            String fname = "Image-" + n + ".jpg";
            file = new File(myDir, fname);

            Log.i(TAG, "" + file);

            if (file.exists())
                file.delete();
            try {
                FileOutputStream out = new FileOutputStream(file);
                bm.compress(Bitmap.CompressFormat.JPEG, 90, out);
                out.flush();
                out.close();

            } catch (Exception e) {
                e.printStackTrace();
            } 
```

# asp.net-mvc - 在 MVC 中生成 HTML 4 语义

> ID：12983863
> 
> 赞同：0
> 
> 时间：2012-10-19T23:41:37.967
> 
> 标签：asp.net-mvc

在创建 MVC 3 Razor 时，我们选择了`Generate HTML5 Semantics`. 我们意识到那个网络应用程序。也必须在 上得到支持`IE8`。

如何`HTML 5`在现有的 MVC-3 项目中禁用语义生成。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:03:23.660

Visual Studio 中有一个设置允许您将 DOCTYPE 更改为 HTML 4.01。那么您当然应该替换标记中的所有 HTML5 标记：

![在此处输入图像描述](../Images/27e4588dce4140a909c1ca9f00cb8cd0.png)

此外，如果您包含`modernizr`，IE8 可以支持语义标记。将使用 Javascript 来实现相同的效果。

# javascript - 如何使用 jQuery 打开一个新的 HTML 页面？

> ID：12983869
> 
> 赞同：13
> 
> 时间：2012-10-19T23:42:52.507
> 
> 标签：javascript, jquery, html, select, ibm-mobilefirst

所以，我使用的是 IBM Worklight，我在其中调用了主文件`file1.html`，然后我创建了另一个名为`file2.html`.

我正在尝试打开 file2 但到目前为止还没有运气。我尝试了以下代码：

1.  `$(this).load("file2.html");`

2.  `$("div1").load("file2.html"); //div1 is the id for outer div of file1`

3.  `WL.App.openUrl("file2.html");`

4.  `window.openURL("file2.html");`

这些都不起作用！有什么建议么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-19T23:46:49.300

用于`window.open("file2.html");`在新窗口中打开，

或用于`window.location.href = "file2.html"`在同一窗口上打开。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T23:48:54.903

使用[window.open("file2.html");](https://developer.mozilla.org/en-US/docs/DOM/window.open)

**句法**

```
var windowObjectReference = window.open(strUrl, strWindowName[, strWindowFeatures]); 
```

**返回值和参数**

```
windowObjectReference 
```

对新创建的窗口的引用。如果调用失败，它将为空。该引用可用于访问新窗口的属性和方法，前提是它符合同源策略安全要求。

```
strUrl 
```

要在新打开的窗口中加载的 URL。 `strUrl`可以是 Web 上的 HTML 文档、图像文件或浏览器支持的任何资源。

```
strWindowName 
```

新窗口的字符串名称。名称可以用作链接和表单的目标，使用`<a>`or`<form>`元素的 target 属性。名称不应包含任何空格。注意`strWindowName`没有指定新窗口的标题。

```
strWindowFeatures 
```

可选参数列出新窗口的特征（大小、位置、滚动条等）。字符串不能包含任何空格，每个特征名称和值必须用逗号分隔。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-20T00:05:19.037

如果你想使用 jQuery， .load() 函数是你所追求的正确函数；

但是您`#`在示例 2 中缺少来自 div1 id 选择器的

这应该有效：

```
$("#div1").load("file2.html"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T23:45:01.957

你需要使用ajax。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
<code>
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
});
</code> 
```

# iphone - iOS - 我的应用程序没有出现在“设置”>“隐私”>“联系人”中

> ID：12983871
> 
> 赞同：4
> 
> 时间：2012-10-19T23:43:25.037
> 
> 标签：iphone, ios, ipad, addressbook, privacy

虽然我的应用程序倾向于访问地址簿，但在设置>隐私>联系人中没有任何迹象。它有时有效（在 iPhone 4 上），有时无效（新 iPad）。我究竟做错了什么？

# javascript - 使用 jquery 或 js 在 kendo ui 中隐藏列

> ID：12983872
> 
> 赞同：4
> 
> 时间：2012-10-19T23:43:28.943
> 
> 标签：javascript, jquery, kendo-ui

经过一段时间的研究，尝试在剑道网格表中隐藏一个指定列

使用这个

```
 $('#grid .k-grid-content table tr td:nth-child(8),th:nth-child(8)').toggle(); 
```

在没有帮助的情况下，有人有想法吗？

我要隐藏的列绑定到

```
 { 
                field: "CreatedDate",
                width: 20,
                title: "Create Date",
                type: 'date',

                template: '#= kendo.toString(CreatedDate,"MM/dd/yyyy") #'
            } 
```

[编辑]

```
$('#grid div.k-grid-header-wrap th:nth-child(4)').toggle()
$('#grid div.k-grid-content td:nth-child(4)').toggle() 
```

只能隐藏标题..但不能隐藏整个列，仍然需要帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-20T06:40:02.777

假设#grid 已经绑定为剑道网格，您可以使用[hideColumn 函数](http://docs.kendoui.com/api/web/grid#hidecolumn)：

```
var grid = $("#grid").data("kendoGrid");
grid.hideColumn("CreatedDate"); 
```

这将隐藏标题和数据列。当您还需要显示列时，还有一个[showColumn 函数。](http://docs.kendoui.com/api/web/grid#showcolumn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:09:18.723

试试这个：

```
$('#grid div.k-grid-header-wrap th:nth-child(4)').toggle();
$('#grid div.k-grid-content td:nth-child(4)').toggle(); 
```

或（组合成一个选择器）：

```
$('#grid div.k-grid-header-wrap th:nth-child(4), #grid div.k-grid-content td:nth-child(4)').toggle(); 
```

Kendo UI Grid 显然将表格分解为如下结构：

```
<div id="grid">
    <div class="k-grouping-header"></div>
    <div class="k-grid-header">
        <div class="k-grid-header-wrap">
            <table cellspacing="0">
                <colgroup>
                    <col />
                </colgroup>
                <thead>
                    <tr>
                        <th></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="k-grid-content">
        <table class="k-focusable" cellspacing="0">
            <colgroup>
                <col />
            </colgroup>
            <tbody>
                <tr data-uid="5f65ad8c-601d-4700-a176-23be2d33fc76">
                    <td></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="k-pager-wrap k-grid-pager k-widget" data-role="pager">
    </div>
</div> 
```

由于表头和表体位于不同的`div`元素中，因此您需要两个选择器来获取它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T13:05:30.647

我根据屏幕大小显示或隐藏特定列。
当屏幕小于 X 时，表达式为真。

```
 hidden: ($(window).width() < 1350) 
```

（在列部分定义）

```
columns: [{
    field:  "Answers",
    title:  "Answers",
    width:  35,
    hidden: ($(window).width() < 1350)
},{
    ... 
```

# javascript - 简单的 JQuery Fade 代码在一分钟后停止

> ID：12983879
> 
> 赞同：0
> 
> 时间：2012-10-19T23:44:25.463
> 
> 标签：javascript, html, css, jquery-mobile

我遇到了这个公认的解决方案，它是关于 Simple JQuery Fade ticker： [Simple JQuery Fade ticker](https://stackoverflow.com/questions/5420200/simple-jquery-fade-ticker)

如何使用将在一分钟后停止的相同代码创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:50:44.860

```
var aniSpd01 = 1000;
var fadeSpd01 = 1000;

$(function() {
    var startIndex = 0;
    var endIndex = $('#aniHolder div').length;
    $('#aniHolder div:first').fadeIn(fadeSpd01);

    var interval = window.setInterval(function() {
    $('#aniHolder div:eq(' + startIndex + ')').delay(fadeSpd01).fadeOut(fadeSpd01);
        startIndex++;
        $('#aniHolder div:eq(' + startIndex + ')').fadeIn(fadeSpd01);

        if (endIndex == startIndex) startIndex = 0;
    }, aniSpd01);
    //NEW
    window.setTimeout(function () {
        window.clearInterval(interval);
    }, 1000 * 60);
}); 
```

# php - 如何通过php在两个mysql表之间创建超文本链接

> ID：12983880
> 
> 赞同：0
> 
> 时间：2012-10-19T23:44:36.050
> 
> 标签：php, mysql, hyperlink

首先，抱歉，因为我不确定我正在做的问题是否与 mysql 中所谓的“关系”有关（我不是专家）。

好吧，问题是我从 PHP 执行查询以调用存储在 mysql 数据库中的表，比方说：

```
+-------+-----+
|NAME   |YEAR |
+-------+-----+
|Ana    |1990 |
|John   |1987 |
|Jane   |1992 |
+-------+-----+ 
```

我在 mysql 中有第二个表，让我们说这个：

```
+-------+----------+
|NAME   |CITY      |
+-------+----------+
|Ana    |Barcelona |
|John   |Santiago  |
|Jane   |La Habana |
+-------+----------+ 
```

所以我需要做的是，在我通过 PHP 看到的第一个表中，具有可点击的名称，所以如果我单击 Ana，则在第二个 PHP 页面上获取：

“安娜在巴塞罗那”

对不起，如果我太天真而无法表达自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:15:56.817

您可以在显示第一个结果的查询中使用[JOIN ：](http://dev.mysql.com/doc/refman/5.1/en/join.html)

```
SELECT myFirstTable.name, myFirstTable.year, mySecondTable.city FROM myFirstTable LEFT JOIN ON mySecondTable.name=myFirstTable.name WHERE 1 
```

然后在您的 php 中，您可以将第三个结果分配给您要显示的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:49:49.557

您需要通过 MySQL 查询加载第一组数据，然后创建指向第二个页面的链接（通过发布或获取变量）以查找下一组数据。

简单的 MySQL 查询，真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:11:42.083

在 page1 中打印`Anna`时，创建指向 page2 的链接并`Anna`使用`GET`.
将链接设为`<a href=page2.php?name=Anna>Anna</a>`. 此数据可用于 page2，并且可以使用`GET`全局数组 as访问`$_GET['name']`。现在您可以轻松创建查询。

# jquery - Jquery 屏幕输入到输出：将换行符解析为 CR \n howto？

> ID：12983882
> 
> 赞同：1
> 
> 时间：2012-10-19T23:44:47.803
> 
> 标签：jquery, html

我现在的代码非常简单：

```
// JS doc
$(document).ready(function(e) {
    $("#id_input").keyup(function(e) {
        var val = $("#id_input").val();
        $("#id_output").val(val);
    });

}); 
```

我正在尝试改进它，以便按 shift+enter 并在我的输入中获取换行符会导致我的输出中出现换行符。实际上，我认为代码中有一个换行符，但没有`\n`，这是输入中 ctrl+enter 所需的输出。

[http://jsfiddle.net/hD8CF/3/](http://jsfiddle.net/hD8CF/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:30:31.233

这是您需要让新行显示为中断[nl2br](http://si1.php.net/manual/en/function.nl2br.php)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:38:56.770

[http://jsfiddle.net/hD8CF/10/](http://jsfiddle.net/hD8CF/10/)将`<pre>`标签放入等式中。

关键线变化在这里： `$("#id_output").html("<pre>" + val + "</pre>");`

另一条评论提到添加`<pre></pre>`到 HTML 并将其定位为输出。

您可以在 jquery 上看到它的工作草案：http: [//jsfiddle.net/fqX8c/](http://jsfiddle.net/fqX8c/)。请喜欢他的评论，上面。另外，我有将文本作为对象发送的代码，在散焦上，这在其他方面很有用；不幸的是，它使用击退，我使用 jQuery 和 mooTools。我将尝试将其翻译为 jQuery。 [http://jsfiddle.net/hD8CF/18/](http://jsfiddle.net/hD8CF/18/)，*工作版*：http: [//jsfiddle.net/hD8CF/20/](http://jsfiddle.net/hD8CF/20/)：*教育版*

# graphviz - Graphviz 允许边缘节点重叠

> ID：12983885
> 
> 赞同：4
> 
> 时间：2012-10-19T23:45:14.190
> 
> 标签：graphviz

我想将 graphviz 用于一个项目，但无法获得我想要的行为。我有一个可以用 graphviz 绘制的图表，但我也有一个相同图表的版本，它有一些额外的边缘。我希望绘制第二个图形，其中节点与第一个图形位置相同，边缘位于相同位置，但要绘制新边而不避免与节点有任何重叠。

为了更好地了解我想要的东西，想象一个带有图表的 Powerpoint 幻灯片，然后在下一张幻灯片上显示相同的图表，这些额外的边缘出现在第一个图表的顶部，但不修改图表旧部分的外观. 这就是我想要的效果。

我认为可以通过让一些边缘忽略任何重叠约束来实现这种效果。我无法弄清楚如何控制特定边缘（甚至所有边缘）的边缘和节点之间的重叠。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T04:21:57.813

您可以通过（或可能）`dot`输出另一个 .dot 文件，并将位置分配给所有元素。将您的附加边添加到该文件中，然后再次运行它以生成您的第二个图形。`dot -Tdot``dot -Txdot``dot`

# android - 从 DatePicker 和 TimePicker 获取值

> ID：12983886
> 
> 赞同：1
> 
> 时间：2012-10-19T23:45:29.587
> 
> 标签：android

我在屏幕上有 2 个日期选择器和 2 个时间选择器，还有一个提交按钮。用户选择开始日期、开始时间、结束日期和结束时间。然后程序获取这些值并将它们存储到变量中，但是变量只返回这些控件的默认值。有没有办法从这些控件中的每一个中获取更新的值？

我的代码在编辑屏幕上看起来像这样：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editscreen);

    timepickerStart = (TimePicker)findViewById(R.id.timePicker1);
    timepickerEnd = (TimePicker)findViewById(R.id.timePicker2);
    datepickerStart = (DatePicker)findViewById(R.id.datePicker1);
    datepickerEnd = (DatePicker)findViewById(R.id.datePicker2);

    submitbutton = (Button)findViewById(R.id.submit);

    locationText = (EditText)findViewById(R.id.locationText);
    eventText = (EditText)findViewById(R.id.eventText);

}

public void DateStart(View v)
{
    GlobalVariables.datepickerYearStart = datepickerStart.getYear();
    GlobalVariables.datepickerMonthStart = datepickerStart.getMonth();
    GlobalVariables.datepickerDayStart = datepickerStart.getDayOfMonth();
}

public void DateEnd(View v)
{
    GlobalVariables.datepickerYearEnd = datepickerEnd.getYear();
    GlobalVariables.datepickerMonthEnd = datepickerEnd.getMonth();
    GlobalVariables.datepickerDayEnd = datepickerEnd.getDayOfMonth();
}

public void TimeStart(View v)
{
    GlobalVariables.timepickerHourStart = timepickerStart.getCurrentHour();
    GlobalVariables.timepickerMinuteStart = timepickerStart.getCurrentMinute();
}

public void TimeEnd(View v)
{
    GlobalVariables.timepickerHourEnd = timepickerEnd.getCurrentHour();
    GlobalVariables.timepickerMinuteEnd = timepickerEnd.getCurrentMinute();
}

public void submitClicked(View v)
{

    startActivity(new Intent(this, AddToCalendar.class));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:48:58.120

**改写**

查看您当前的代码，让我们继续使用`get`DatePicker 和 TimePicker 中的各种方法。但是，您从不打电话`DateStart()`或其他任何人，他们看起来像您为 OnClickListener 设置了它们......无论如何，试试这个：

```
public void submitClick(View v) {
    DateStart(null);
    TimeStart(null);
    DateEnd(null);
    TimeEnd(null);

    // Do what you please your GlobalVariables
} 
```

* * *

虽然我可能会省略多个`GlobalVariables`并为每个日期/时间存储一个`long`值：

```
public void submitClick(View v) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(datepickerStart.getYear(), datepickerStart.getMonth(),
                 datepickerStart.getDayOfMonth(), timepickerStart.getCurrentHour(), 
                 timepickerStart.getCurrentMinute(), 0);
    long startTime = calendar.getTimeInMillis();

    // And similar approach for the end time, then use them however you please
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:14:06.907

你需要为你的 DatePicker 设置一个监听器：

```
 DatePicker picker = new DatePicker(this);
    picker.init(<year>, <monthOfYear>, <dayOfMonth>, new DatePicker.OnDateChangedListener() {

        @Override
        public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            //set the value of the variable here 
        }
    }); 
```

# jquery - click on link paste to text area jQuery

> ID：12983889
> 
> 赞同：1
> 
> 时间：2012-10-19T23:46:15.980
> 
> 标签：jquery

Hey guys I'm trying to make it so when you click on the existing a href= it will paste the inner text to the textarea. Though of course if click that the a href it'll lead to link so i made it so it'll take out the href. So far I have this code

```
$(function(){
$(".username a").removeAttr("href").css("cursor","pointer");
var $paste = $('div.post h4 .username a span');
  $paste.click('')
}); 
```

Ok I guess thats a good start lol. Problem to me is, I don't know how to add onClick="" or whatever to make the function work on click ya know? or would .click work in general. of course i would need a function in the .click area. I don't know what to place in there to create what text is inside the a tag... Can someone help me, if you use .append or or anything can you also give an explanation, I'm trying to learn as I go.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:53:33.697

```
$(function(){
    $('.username a').click(function(){ return false; });
    $('.username a').one('click', function(e){
             //e is short for event
        e.preventDefault(); //will no longer follow through
        //You want to append the text of the anchor link into the textarea.

        var innerTxt = $(this).text();
        //need to trim whitespace from the string
        innerTxt = $.trim(innerTxt);

        var $obj= $('textarea'); //replace this with textarea selector
        $obj.val(
           $obj.val()+'\n@'+innerTxt
        );               
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:54:54.760

Try this

```
$(".username a").click(function(e){
    //DO Wathever you want here 
    e.preventDefault(); 
}) 
```

# ruby-on-rails - Websolr + Heroku + sunspot_autocomplete 与 db:seed

> ID：12983891
> 
> 赞同：1
> 
> 时间：2012-10-19T23:46:42.553
> 
> 标签：ruby-on-rails, heroku, solr, websolr

我正在 Heroku 上设置我的应用程序。已经安装了 20 美元的 websolr 插件。迁移已经运行。

运行时`heroku rake db:seed`出现以下错误。

知道是什么原因造成的吗？

```
$ heroku run rake db:seed
RSolr::Error::Http - 400 Bad Request
Error: <html><head><title>Apache Tomcat/6.0.28 - Error report</title><style><!--H1 {font-    family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status     400 - ERROR: [doc=Dvd 2] unknown field 'dvd_title_as'</h1><HR size="1" noshade="noshade"><p>    <b>type</b> Status report</p><p><b>message</b> <u>ERROR: [doc=Dvd 2] unknown field     'dvd_title_as'</u></p><p><b>description</b> <u>The request sent by the client was     syntactically incorrect (ERROR: [doc=Dvd 2] unknown field 'dvd_title_as').</u></p><HR size="1"     noshade="noshade"><h3>Apache Tomcat/6.0.28</h3></body></html>

Request Data: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Dvd 2</field><field name=\"type\">Dvd</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Dvd</field><field name=\"featured_b\">false</field><field name=\"dvd_title_as\">100% Dirty Slut</field><field name=\"title_text\">100% Dirty Slut</field><field name=\"studio_text\">Cherry Boxxx</field></doc></add>"

Backtrace: /app/vendor/bundle/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/app/vendor/bundle/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in     `send_and_receive'
(eval):2:in `post'
/app/vendor/bundle/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:67:in `update'
/app/vendor/bundle/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:87:in `add'
/app/vendor/bundle/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:101:in `add_documents'
/app/vendor/bundle/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:26:in `add'
/app/vendor/bundle/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:91:in `index'
/app/vendor/bundle/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/app/vendor/bundle/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot.rb:184:in `index'

Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:59:52.230

隐藏在该 HTML 响应中的错误消息是`unknown field 'dvd_title_as'`.

基本上，您的应用程序发送到 Solr 的文档没有在`schema.xml`. 您可能需要使用应用程序的最新架构更新您的 websolr 索引，您可以通过使用`heroku addons:open websolr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T02:50:57.833

我建议您访问 help.websolr.com 并填写支持请求。

# javascript - 将 ajaxed 数据分配到分页数据中，最好的方法是什么？

> ID：12983897
> 
> 赞同：1
> 
> 时间：2012-10-19T23:47:08.823
> 
> 标签：javascript, jquery

所以，我在问如何为我遇到的问题创建适当的概念/解决方案。我很确定我会掩饰它，但是在与这里的一些人交谈之后，我发现有不止一种方法可以给猫剥皮，而且更常见的是 - 更好。哈哈。

所以，我有一些数据进来......通过ajax调用。好，很好。所有这些都捆绑在一个我认为创建页面分页的篮子中。

例如，我得到一桶 4 项，我的分页是每页 2.. 等于 2 页。我只构建一个分页被点击的页面。我有数据，但是我把它构建出来。（为了下面的例子）。

所以这是我的问题。我有第二组数据我必须检索（它是一个单独的 ajax 调用），第二组数据*可能*会将其他数据附加到第一组项目。

即使尚未构建显示器，如何最好地将第二组映射到第一组。

所以，-为了争论，我有我刚收到的第一组数据。假设每页只有 2 个项目。

总的来说，我的第一个存储桶有以下数据：

```
data = [
{name:ITEM1, desc: Greatest Book in History, id: 98987 },
{name:ITEM2, desc: Second Greatest Book in History, id: 76557 },
{name:ITEM3, desc: Third Greatest Book in History, id: 121212 },
{name:ITEM4, desc: Fourth Greatest Book in History, id: 09546 } 
```

]

第一页。

* * *

```
ITEM 1 - Greatest Book in history
ITEM 2 - Second Greatest Book in history 
```

* * *

第2页分页被点击

* * *

```
ITEM 3 - Third Book in history (**special sale: Special Edition**)
ITEM 4 - Fourth Greatest Book in history 
```

现在，我的第二个第二个数据有以下

specialData = [ {121212：特价：特别版}]

所以，第二个 ajax 调用将发送我所有的 First Bucket IDS 并返回任何可用的“新”信息。如果有，我将在显示中附加新数据。

现在，我的猜测是：

1）。等待第二个请求完成，然后将第一个存储桶数据附加到第二组信息中，因此当我构建分页时，那里的数据会在请求分页时构建。

或者

2）。像往常一样构建第一个数据桶，然后应用与项目 ID 号相同的 * 元素 ID *。当获取第二个数据桶时，我使用新信息附加到 html 元素 ID。 .这就是我找到合适匹配的方法。唯一的事情是，我必须知道该特定元素 ID dom 项是否存在（可见/构建到当前分页页面），然后才能附加该新信息。

```
<div>ITEM 3 - Third Book in history<span id="121212"></span></div> 
```

我在这里想念什么？这比我做的简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:18:16.040

对于 JavaScript 提供的数据结构的简洁性和性质，我可能会采用第二种方法。鉴于您已经用 jQuery 标记了问题，这里有一个实现。

```
 var dataBucket = {};
    function enrichBucket(incomingData) {
        for(var i = 0, len = incomingData.length; i < len; i++) {
            var dataEntry = incomingData[i];
            dataBucket[dataEntry.id] = $.extend( dataBucket[dataEntry.id]||{}, dataEntry);
        }
    } 
```

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)如果要进行深度合并，请查看 [deep] 标志。

# eclipse - 安装 sbteclipse

> ID：12983900
> 
> 赞同：15
> 
> 时间：2012-10-19T23:47:14.313
> 
> 标签：eclipse, scala, sbt, sbteclipse

我有问题最好使用[sbteclipse](https://github.com/typesafehub/sbteclipse)

我做了什么：

*   转到我的全局 sbt 文件夹。
*   创建了一个插件文件夹
*   创建了文件 plugins.sbt`addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0")`
*   去了我的eclipse项目并创建了一个build.sbt文件
*   它包含：

> 名称：=“富”
> 
> ```
> version := "1.0"
> 
> scalaVersion := "2.9.2"
> 
> libraryDependencies += "net.java.dev.jna" % "jna" % "3.4.0" 
> ```

*   我在我的 cmd 中选择项目文件夹。并输入`sbt eclipse`

但我总是收到以下错误

```
[error] Not a valid command: eclipse (similar: help, alias)
[error] Not a valid project ID: eclipse
[error] Expected ':'
[error] Not a valid key: eclipse (similar: deliver, licenses, clean)
[error] eclipse
[error]        ^ 
```

ps：我使用的是Windows。我也在使用 sbt 0.12

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T00:26:25.727

您的全局 sbt 文件夹位于`%USERPROFILE%\.sbt`（`C:\Users\<username>\.sbt`很可能）。所以你的插件应该定义在`%USERPROFILE%\.sbt\plugins\plugins.sbt`

如果不这样做，您可以直接将其添加到您的项目中。添加文件路径为`<project_root>\project\plugins.sbt`. 如果该`project`目录不存在，您将需要创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T12:40:05.857

我想我可能已经找到了解决办法。首先，检查插件配置的默认目录是 'USER_HOME/.sbt/plugins' 而不是 'USER_HOME/.sbt/0.13/plugins'。

其次，指定的 sbt 版本似乎很重要。在“PROJECT_HOME/project/build.properties”中，有一个“sbt.version”属性。如果此文件中指定的 sbt 版本与实际安装的 sbt 版本不同，则可能存在问题。我认为我受到的影响更大，因为我使用的是 Activator 模板，并且它已经在这个“build.properties”文件中指定了“sbt.version”。

在四处寻找时，我遇到了这个

[sbt 网站http://www.scala-sbt.org/0.13.0/docs/Community/ChangeSummary_0.13.0](http://www.scala-sbt.org/0.13.0/docs/Community/ChangeSummary_0.13.0.html)中的“对 project/plugins/ 中插件配置的支持已被删除。自 0.11.2 起已弃用” 。 [.html](http://www.scala-sbt.org/0.13.0/docs/Community/ChangeSummary_0.13.0.html) _ 我仍然看到很多人指出它应该在'PROJECT_HOME/projects/plugins.sbt'中配置。我认为这非常令人困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T16:56:14.873

我有类似的问题并[回答](https://stackoverflow.com/a/37708453/441652)了类似的[问题](https://stackoverflow.com/q/24687698/441652)。

我尝试了“一切”，最终，我只需要将我`sbt`的 from更新`0.13.1`为`0.13.9`.

# android - itemizedOverlay 中的 NullPointerexception

> ID：12983902
> 
> 赞同：-1
> 
> 时间：2012-10-19T23:47:34.500
> 
> 标签：android, google-maps, nullpointerexception, itemizedoverlay

在 android 应用程序中，我使用 Google API 进行地图。我得到了以下异常。我想知道这个异常到底是什么意思？

```
10-19 23:45:06.619: E/AndroidRuntime(837): FATAL EXCEPTION: main
10-19 23:45:06.619: E/AndroidRuntime(837): java.lang.NullPointerException
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.ItemizedOverlay.getItemsAtLocation(ItemizedOverlay.java:617)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.ItemizedOverlay.getItemAtLocation(ItemizedOverlay.java:586)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.ItemizedOverlay.handleMotionEvent(ItemizedOverlay.java:498)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.ItemizedOverlay.onTouchEvent(ItemizedOverlay.java:572)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.OverlayBundle.onTouchEvent(OverlayBundle.java:63)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.google.android.maps.MapView.onTouchEvent(MapView.java:679)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.View.dispatchTouchEvent(View.java:3885)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.os.Looper.loop(Looper.java:130)
10-19 23:45:06.619: E/AndroidRuntime(837):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-19 23:45:06.619: E/AndroidRuntime(837):  at java.lang.reflect.Method.invokeNative(Native Method)
10-19 23:45:06.619: E/AndroidRuntime(837):  at java.lang.reflect.Method.invoke(Method.java:507)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-19 23:45:06.619: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-19 23:45:06.619: E/AndroidRuntime(837):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:13:43.260

就像您忘记`populate()`在构造函数中添加的声音一样。

它应该是这样的：

```
LocationItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    this.context = context;
    populate(); // Add this
}
..... 
```

它发生在移动地图上

# visual-studio - 在 Windows 商店项目中对自定义控件进行单元测试

> ID：12983903
> 
> 赞同：1
> 
> 时间：2012-10-19T23:47:38.310
> 
> 标签：visual-studio, unit-testing, windows-runtime, windows-store-apps, ui-testing

我想对我为 Windows 商店项目创建的自定义控件进行单元测试。只是简单的事情，比如“当 X 为真时有一个按钮”。

但是，我似乎什至无法在测试上下文中实例化控件。每当我尝试调用构造函数时，都会收到与未在 UI 上下文中运行相关的异常。我也无法创建针对 Windows 商店项目的编码 UI 测试项目。

*   如何以编程方式实例化要测试的控件？如何创建 WinRT UI 同步上下文？
*   如何以编程方式将“用户”命令事件发送到控件？
*   如何以编程方式实例化/拆卸整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:44:53.407

我找到了一种使非交互部分工作的hacky方法：使用函数`Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync`.

很明显，对吧？然而，这仍然留下了如何模拟用户操作的问题。

```
/// Runs an action on the UI thread, and blocks on the result
private static void Ui(Action action) {
    Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(
        CoreDispatcherPriority.Normal, 
        () => action()
    ).AsTask().Wait();
}
/// Evaluates a function on the UI thread, and blocks on the result
private static T Ui<T>(Func<T> action) {
    var result = default(T);
    Ui(() => { result = action(); });
    return result;
}
[TestMethod]
public void SliderTest() {
    // constructing a Slider control is only allowed on the UI thread, so wrap it in UI
    var slider = Ui(() => new Slider());
    var expected = 0;
    // accessing control properties is only allowed on the UI thread, so same deal
    Assert.AreEqual(expected, Ui(() => slider.Value));
} 
```

# objective-c - 在 iOS Xcode 中显示来自 RSS 源的网页

> ID：12983904
> 
> 赞同：1
> 
> 时间：2012-10-19T23:47:47.400
> 
> 标签：objective-c, xcode, webview, rss, formatting

目前，我在导航控件的 UITableView 中有一个 RSS 提要阅读器。我想点击链接并打开一个格式化页面（包含来自为 iOS 屏幕格式化的网站的所有信息）。我不确定是否应该使用 RSS 数据和 UITextView 来执行此操作？我目前正在尝试使用 UITextView，希望我可以在没有任何希望的情况下分离信息（标题、作者、正文）。我希望能够在实际应用程序本身中移动数据并根据自己的喜好对其进行格式化。我阅读并注意到您可以包含 HTML 和自定义 CSS。这是要走的路吗？我不太确定如何解决这个问题。我希望打开的页面完全可滚动（如 IGN 应用程序或 Slashgear 应用程序）。许多网站应用程序都利用了这个（我对此有点陌生）。他们怎么做？我还想指出，在某些时候我想缓存数据，这样它就可以在没有连接到互联网的情况下加载已经加载的内容。有没有人有任何想法？

编辑：好的，我相信我找到了从玩耍和大量谷歌搜索中走下来的正确路径（没有直接说明这样做的好方法是什么）。我现在的特殊方式是一般的 UIScrollView 的路线。现在我不明白的部分是如何将长文本分成“页面”以进行滚动（并且我正在使用分页功能。这种情况使我陷入了这个问题：[如何基于 UIScrollView/UITextView 分隔字符串框架的大小](https://stackoverflow.com/questions/13021253/how-to-separate-strings-for-uiscrollview-uitextview-based-on-the-size-of-the-fra)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:04:17.240

好吧，我相信我找到了正确的道路，从到处玩和大量的谷歌搜索（没有直接说明这样做的好方法是什么）。我现在的特殊方式是一般的 UIScrollView 的路线。现在我不明白的部分是如何将长文本分成“页面”以进行滚动（并且我正在使用分页功能。这种情况使我陷入了这个问题：[如何基于 UIScrollView/UITextView 分隔字符串框架的大小](https://stackoverflow.com/questions/13021253/how-to-separate-strings-for-uiscrollview-uitextview-based-on-the-size-of-the-fra)

# php - 从类内部查询 mysql 数据库

> ID：12983906
> 
> 赞同：3
> 
> 时间：2012-10-19T23:48:16.513
> 
> 标签：php, mysql, class, mysqli

我正在尝试从一个类中运行对 MySQL 数据库的查询，但由于某种原因它无法正常工作。我在一个单独的文件中有这个类，我用`require_once()`函数链接到它。

这是主 .php 文件的样子：

```
<?php
  require_once("connect.php");
  require_once("theClass.php");

  $a = new theClass;
  $a->runQuery();
} 
```

连接.php：

```
<?php
//connect to mySQL database
$mysqli = new mysqli("host", "user", "password", "db");
if ($mysqli->connect_errno)
{
    echo "<br><h1>Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error . "</h1><br>";
} 
```

theClass.php：

```
<?php
require_once('connect.php');

class theClass
{
  //class variables and other functions here

  function runQuery()
  {
    $query = "SELECT col_1 FROM db.table";
    $stmt = $mysqli->prepare($query);
    stmt->execute();
    $stmt->bind_result($r);

    while($stmt->fetch())
    {
      echo $r . "<br>";
    }
  }
}; 
```

我尝试将类复制到主 .php 文件中，但它仍然不起作用；但是，我在外部 .php 文件以及主 .php 文件中使用了完全相同的代码（查询、准备、执行、bind_result 和 fetch 部分），并且两次都有效。这使我相信您无法从类内部运行查询，或者有不同的方法可以这样做。谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T23:52:16.297

### 将其传递给方法本身

您必须将数据库对象传递给该方法，因为它们不在同一范围内：

```
function runQuery($mysqli) 
```

并称它为

```
$a = new theClass;
$a->runQuery($mysqli); 
```

### 将其传递给构造函数

如果您的类进行了很多数据库调用，您可以简单地将其传递给构造函数并将其保存为私有变量以供以后使用：

```
class theClass
{
  private $mysqli;

  function __construct($mysqli) {
    $this->mysqli = $mysqli;
  }

  function runQuery()
  {
    $query = "SELECT col_1 FROM db.table";
    $stmt = $this->mysqli->prepare($query);
    stmt->execute();
    $stmt->bind_result($r);

    while($stmt->fetch())
    {
      echo $r . "<br>";
    }
  }
}; 
```

并称它为

```
$a = new theClass($mysqli);
$a->runQuery(); 
```

* * *

这两种方法都清楚地表明你的类的依赖是一个mysqli对象，这有利于以后的维护和可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T23:52:31.990

您需要将 $mysqli 作为参数传递或使用全局 $mysqli

```
<?php
require_once('connect.php');

class theClass
{
  //class variables and other functions here

  function runQuery()
  {
    global $mysqli;
    $query = "SELECT col_1 FROM db.table";
    $stmt = $mysqli->prepare($query);
    stmt->execute();
    $stmt->bind_result($r);

    while($stmt->fetch())
    {
      echo $r . "<br>";
    }
  }
}; 
```

# sqlite - 是什么导致带有 OR 子句的 sqlite 连接约束显着变慢？

> ID：12983909
> 
> 赞同：2
> 
> 时间：2012-10-19T23:48:41.600
> 
> 标签：sqlite

这是两个sqlite查询：

```
SELECT * FROM items JOIN licenses ON items.id=licenses.id OR items.type=licenses.type; 
```

此查询不使用`OR`，它使用`UNION`

```
SELECT * FROM items JOIN licenses ON items.id=licenses.id UNION SELECT * FROM items JOIN licenses ON items.type=licenses.type; 
```

假设我在 id 上的 licenses 表中有一个索引，并且在 type 上的 licenses 表中有一个索引，第一个使用 an 的查询不`OR`应该只慢一点吗？

我看到第一个查询比 Sqlite 中的第二个查询慢大约 20 倍，这是什么原因？

对于第一个查询，我希望内部计划看起来像这样：

*   对于`items`表中的每一行：
*   `id`从表的列中获取值并使用它来查找表`items`中的所有行，调用该组匹配行 A。`licenses``id`
*   `type`从表的列中获取值并使用它来查找表`items`中的所有行，调用该组匹配行 A'。合并 A 和 A' 并消除任何重复的行。将结果添加到结果行列表中`licenses``type`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:50:20.710

对于连接，SQLite 仅支持两个表上的嵌套循环连接（可以使用索引进行优化）。如[The SQLite Query Planner](http://www.sqlite.org/optoverview.html)和[Query Planning](http://www.sqlite.org/queryplanner.html)中所述，一次与两个表进行连接不是受支持的优化之一。

# javascript - Image Resizer 水印插件 - 动态定位文本和修改字体大小

> ID：12983917
> 
> 赞同：0
> 
> 时间：2012-10-19T23:50:14.417
> 
> 标签：javascript, asp.net, imageresizer

我正在使用[ImageResizer](http://imageresizing.net/)作为图像编辑工具。我有一个文本层，需要通过查询字符串动态修改字体大小和位置，但我无法这样做。这可能吗？

我通过#{key}得到了要更改的文本，我希望有一种类似的方法来调整字体大小和位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:38:17.373

如果您有自定义布局规则，则提供的 CustomOverlaySample 可能是比 Watermark 更好的起点。

但是，水印非常简单且易于修改；并且许可证确实允许这样做。

# python - 使用 Python 列表更新 numpy 数组时出现意外行为

> ID：12983921
> 
> 赞同：0
> 
> 时间：2012-10-19T23:50:17.573
> 
> 标签：python, numpy

```
t=0
abig= zeros((10000,150))    
aa=[0 for i in range(150)]
print abig[0]

while 1:
    aa=abig[t]

    for k in range(150):

        for i in range(150):         
            ppp=aa[k]+nk[k]*(1-iris[k][3]*aa[i]*iris[i][3]*kk[i][k])
        aa[k]=ppp

        if aa[k]<0:
            aa[k]=0
        if aa[k]>10:
            aa[k]=10
    print abig[0]
    abig[t+1]=aa
    t=t+1
    sds=subtract(abig[t-1],abig[t])
    if norm(sds)<0.0001:
        break
print t 
print aa 
```

我的期望是将每个分配`abig[t]`给 aa，然后用 aa 进行一些计算，然后将 aa 分配回去，`abig[t+1]`然后得到这两者的减法。

但这是我的结果：

> "D:\Python27\python.exe" "C:\Users\zlxstc\Desktop\数据库挖掘\assignment 3\Untitled 3.py" [ 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0\. 0.]
> 
> [ 0.02182929 0.01688619 0.01852881 0.02994012 0.02334267 0.02912904 0.01877934 0.02329373 0.01769912 0.01881822 0.02398082 0.02355713 0.02299379 0.02074258 0.02807412 0.02593361 0.02593361 0.02362391 0.02639219 0.01560549 0.02182929 0.01877934 0.0185701 0.02597403 0.03099814 0.02547771 0.02663825 0.03051572 0.01591343 0.01709986 0.02156567 0.02685285 0.0245459 0.02358491 0.02918856 0.02524615 0.02329373 0.02355713 0.02128565 0.02085941 0.02360718 0.02074258 0.0174703 0.01569859 0.02460025 0.0293772 0.01628399 0.02424242 0.02284148 0.02043736 0.02331002 0.02427184 0.03293808 0.01901864 0.02340824 0.01877934 0.01688619 0.01422677 0.02125399 0.02394063 0.02175332 0.0199005 0.02547771 0.02570694 0.02360718 0.0249004 0.02299908 0.02807412 0.02768549 0.02463054 0.01268231 0.01469508 0.02125399 0.02247191 0.02880184 0.02912904 0.03359086 0.02071251 0.0293772 0.02154708 0.01923077 0.03096934 0.01879699 0.01996008 0.01789229 0.03225806 0.02125399 0.01730703 0.02156567 0.0204165 0.0273224 0.03164557 0.01879699 0.02208481 0.02334267 0.01547988 0.03147624 0.0163292 0.02630887 0.01901864 0.01783167 0.02099958 0.01835199 0.01730703 0.01769912 0.0273224 0.02856327 0.01670844 0.03631082 0.0339098 0.02752546 0.02502503 0.01946661 0.02421894 0.02329373 0.0200441 0.01454334 0.02018978 0.01902226 0.02085941 0.02329373 0.02777778 0.01769912 0.02207993 0.02483855 0.02886003 0.02362391 0.02355713 0.01832845 0.01968504 0.02181025 0.01968504 0.0144655 0.01936483 0.02807412 0.02229654 0.02483855 0.02017756 0.01877934 0.02630887 0.01497006 0.01688619 0.02047083 0.01919754 0.0212766 0.02340824 0.02563445 0.02563445 0.01789229 0.015716.......................20..........27

两者`abig[0]`不一样。所以减法是`0`。为什么？`kk[]`和`nk[]`以上有一些定义`iris[]`。它们是否相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:26:44.347

您的代码中有几个问题（除了变量名的选择）。首先，做：

```
aa=abig[t] 
```

不复制`abig[t]`. 相反`aa`，并且`abig[t]`引用相同的数据，因此如果您执行以下操作：

```
aa[1] = 20 
```

然后自动

```
abig[t][1] = 20 
```

另一方面，分配的顺序可能是错误的。我想你想要的是：

```
abig[t] = aa 
```

`abig`似乎是一个`numpy`数组，该`copy`方法被隐式使用，因此它是`abig[t]`一个副本`aa`（它们不共享数据）。

现在做：

```
abig[t][1] = 20 
```

没有改变`aa[1]`。

其次，这部分代码：

```
for i in range(150):         
    ppp=aa[k]+nk[k]*(1-iris[k][3]*aa[i]*iris[i][3]*kk[i][k])
aa[k]=ppp 
```

与以下内容相同：

```
aa[k]=aa[k]+nk[k]*(1-iris[k][3]*aa[149]*iris[149][3]*kk[149][k]) 
```

所以循环是没用的。我想你真正的意思是

```
for i in range(150):         
    aa[k]=aa[k]+nk[k]*(1-iris[k][3]*aa[i]*iris[i][3]*kk[i][k]) 
```

（但不完全确定）。

总之，在您当前的实现`aa`中，`abig[t]`并且`abig[t+1]`都引用相同的数据，因此当您减去连续的行时，您会得到一堆零。

# markdown - R markdown 中未生成 Mp4 文件

> ID：12983930
> 
> 赞同：1
> 
> 时间：2012-10-19T23:51:09.953
> 
> 标签：markdown, knitr, rstudio, chunks

我设置了块选项：`fig.show='animate'`在 R markdown 中。但是Figure文件夹中没有生成mp4文件。针织 html 中也没有显示动画。有什么帮助或建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T00:01:29.820

我正在使用 MAC 山狮。它运作良好：

首先，您需要一个 MP3 编码器。FFmpeg 不包含一个，但它会使用 LAME，可以在[这里下载](http://sourceforge.net/projects/lame/files/)。

在终端中，创建一个新目录并解压缩下载的 LAME。我正在使用当前最新版本的 lame-3.99.5。

```
mkdir ~/lame
cd ~/lame
tar xvzf lame-3.99.5.tar.gz 
```

下载并解压源代码或从 CVS 中检出后，切换到主目录，然后输入通常用于构建开源项目的三个命令：

```
cd lame-3.99.5
./configure
make
sudo make install 
```

然后创建一个工作目录：

```
mkdir ~/ffmpeg
cd ~/ffmpeg 
```

FFmpeg 的最新版本通常可以干净地编译，这就是您通常想要的版本：

```
svn checkout svn://svn.ffmpeg.org/ffmpeg/trunk ffmpeg
cd ffmpeg 
```

接下来，配置和制作

```
./configure --enable-libmp3lame --enable-shared --disable-mmx --arch=x86_64
make
sudo make install 
```

完毕！

# c - 加密程序中的分段错误

> ID：12983931
> 
> 赞同：-2
> 
> 时间：2012-10-19T23:51:23.903
> 
> 标签：c

我试图制作一个简单的加密程序，没有任何数学意义，但为了更进一步，我需要知道是什么导致了我的程序中的分段错误。我试图简化我的代码..

```
char *
createAlfabeth(void)
{
    char * alfa = NULL;
    strcpy(alfa, "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    int i, j=1, k=0;

    for(i=0; i<(sizeof(alfa)/sizeof(char)); i++, j+=3)
    {
        if(j>25)
        {
            j=1+(k++);
        }
        swap(alfa, i, j);
     }

     return alfa;
}

char *
codificator(char *mess, const char *alfa)
{
     int key[]=PRIVATE_KEY;
     char *newmess=NULL;
     int i, j;
     for(i=0, j=0; mess[i]!='\0'; i++, j++)
     {
          if(j>(sizeof(key)/sizeof(key[0])))
          {
               j=0;
           }
      newmess[i]=alfa[i+key[j]];
     }
     return newmess;
 }

 int
 main(void)
 {
     char *alfa=crearAlfabeto();
     printf("write your message :\n");
     char message[20];
     scanf("%s", message);
     char *codified=codificator(message, alfa);
     printf("The codified message is: %s \n", codified);    
     return 0;
 } 
```

**已解决：发布备忘录**

我通过下面的 ouah 和 askmish 的建议解决了这个问题（感谢两者）。对于那些在谷歌上搜索这个答案的人，我想说这个问题与堆处理有关。由于我没有为稍后声明或初始化的字符串存储足够的空间，因此没有为它们分配足够的内存。

这是malloc、realloc、calloc（和free）函数的目的是处理。分段错误来自我试图超出为代码中的数据段分配的内存。每个程序都为代码（代码段）和数据（数据段）分配内存，并且没有在 c 中明确告诉你要在数据段中存储多少，你会得到这个错误。这是我对所读内容的理解，如果有更深入的人想对此发表评论，请做..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T23:52:16.933

```
 char * alfa = NULL;
 strcpy(alfa, "ABCDEFGHIJKLMNOPQRSTUVWXYZ"); 
```

您需要为数组对象分配内存。

例如：

```
 char *alfa = malloc(sizeof "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
 /* check that malloc succeeds here */
 strcpy(alfa, "ABCDEFGHIJKLMNOPQRSTUVWXYZ"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:31:10.287

除了 ouah 的回答： 而不是这个`codificator`：

```
 char *newmess=NULL;
 int i, j;
 for(i=0, j=0; mess[i]!='\0'; i++, j++)
 {
      if(j>(sizeof(key)/sizeof(key[0])))
      {
           j=0;
       }
  newmess[i]=alfa[i+key[j]];
 } 
```

写这个：

```
 char *newmess=NULL;
 int i, j;
 newmess = malloc(strlen(mess)*sizeof(char)); //This line could be written in many ways
 if(newmess != NULL) //Handle memory allocation failing.
 {
   for(i=0, j=0; mess[i]!='\0'; i++, j++)
   {
      if(j>(sizeof(key)/sizeof(key[0])))
      {
           j=0;
      }
      newmess[i]=alfa[i+key[j]];
   }
  } 
```

请确保在将指针与字符串一起使用之前为指针分配内存。否则，您将获得`Seg Faults`. 您必须使用我的和 ouah 的修复程序来消除分段错误。

# jquery - 使用 jquery-ujs 的 rails 3.2 奇怪行为

> ID：12983936
> 
> 赞同：3
> 
> 时间：2012-10-19T23:52:16.507
> 
> 标签：jquery, ajax, ruby-on-rails-3.2

我正在尝试在以远程形式提交输入时禁用输入。

我的咖啡代码是这样的：

```
todoSubmitForm = $('form.todo-form')
todoSubmitForm.on 'ajax:before', ->
    input = $(this).find('input#todo')
    return false if not input.val() and not input.val().match /^\s+$/
    input.attr 'disabled', 'disabled'

todoSubmitForm.on 'ajax:complete', ->
    $(this).find('input#todo').removeAttr 'disabled'
    turbolinksRefresh() 
```

但是，我禁用的输入不是以这种方式提交的。我不知道这是一个错误还是我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:39:26.197

来自禁用输入元素的字段不会作为表单的一部分提交。

您可以将其设置为`readonly`：

```
input.attr 'readonly', 'readonly' 
```

# ruby - Nokogiri 如何以正确的间距从 HTML 中提取文本？

> ID：12983937
> 
> 赞同：2
> 
> 时间：2012-10-19T23:52:20.177
> 
> 标签：ruby, html-parsing, nokogiri

我正在尝试提取文档的文本以对其进行索引以进行搜索。除了各种单词和标点符号一起运行之外，以下主要工作。当它删除标签时，我需要用空格替换它们，所以我不会遇到这个问题。我一直在试图找出最有效的方法来做到这一点，但到目前为止我还是一无所获。

```
doc = Nokogiri::HTML(html)
doc.xpath("//script").remove
doc.xpath("//style").remove
doc.xpath("//a").remove
text = doc.text.gsub(/\s+/,' ') 
```

这是我从[http://www.washingtontimes.com/blog/redskins-watch/2012/oct/18/redskins-linemen-respond-jason-pierre-paul-rg3-com/中提取的一些示例文本](http://www.washingtontimes.com/blog/redskins-watch/2012/oct/18/redskins-linemen-respond-jason-pierre-paul-rg3-com/)

> 赛季前，纽约巨人队的防守端锋奥西·乌梅尼奥拉（Osi Umenyiora）说他不会用“RG3”称呼罗伯特·格里芬三世，直到他有所行动。在那之前，是“鲍勃·格里芬”。在华盛顿红皮队战胜明尼苏达维京队的比赛中，格里芬的 76 码达阵得分后，巨人队防守端锋杰森·皮埃尔-保罗对格里芬发表了一些评论。“不要把它带到我身边，”皮埃尔 - 保罗告诉纽约媒体。“走另一条路。......“是的，这将是一场非常好的对决。不过，不在我这边。不在我这边。或者另一边”格里芬周三开玩笑地问到竞选公职的问题，他说：“我现在还有很多其他人要逃跑，皮埃尔-保罗、奥西，所有这些人。”但据红皮队的几名前锋说，格里芬不应该 周日如果他进入空场就不用担心太多。“如果罗伯特进入那种情况，我认为没有多少人可以击倒他，”右后卫克里斯切斯特说。“我仍然会去那里尝试阻止并确保根本没有人接触罗伯特。但他是一个非常优秀的运动员，能够在这个联盟中超越很多人。” 皮埃尔-保罗的评论提示，左截锋特伦特威廉姆斯回答说：“你想让我说什么？” “罗伯特是我的人。我不认识皮埃尔-保罗。我不知道他为什么会说这样的话，”他说。“也许他知道一些我不知道的事情。”</p> ”右后卫克里斯切斯特说。“我仍然会去那里尝试阻止并确保根本没有人接触罗伯特。但他是一个非常优秀的运动员，能够在这个联盟中超越很多人。” 皮埃尔-保罗的评论提示，左截锋特伦特威廉姆斯回答说：“你想让我说什么？” “罗伯特是我的人。我不认识皮埃尔-保罗。我不知道他为什么会说这样的话，”他说。“也许他知道一些我不知道的事情。”</p> ”右后卫克里斯切斯特说。“我仍然会去那里尝试阻止并确保根本没有人接触罗伯特。但他是一个非常优秀的运动员，能够在这个联盟中超越很多人。” 皮埃尔-保罗的评论提示，左截锋特伦特威廉姆斯回答说：“你想让我说什么？” “罗伯特是我的人。我不认识皮埃尔-保罗。我不知道他为什么会说这样的话，”他说。“也许他知道一些我不知道的事情。”</p> “你想让我说什么？” “罗伯特是我的人。我不认识皮埃尔-保罗。我不知道他为什么会说这样的话，”他说。“也许他知道一些我不知道的事情。”</p> “你想让我说什么？” “罗伯特是我的人。我不认识皮埃尔-保罗。我不知道他为什么会说这样的话，”他说。“也许他知道一些我不知道的事情。”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T11:20:44.603

其他答案是讨论在文档中插入空格，但如果（如问题所问）您的要求是用空格*替换*这些节点，Nokogiri 有一个替换方法。所以要用空格替换脚本标签：

```
doc.xpath('//script').each do |node|
  node.replace(' ') 
end 
```

该问题还询问“正确”间距。大多数浏览器在标签周围渲染时不会插入空格`<script>`，因此虽然对文本提取很有用，但这不一定是“正确”的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T02:04:26.623

您可以尝试在每个 p 标签之前插入一个空格：

```
doc.search('p').each{|el| el.before ' '} 
```

但更好的方法可能是：

```
text = doc.search('div.story p').map{|p| p.text}.join(" ") 
```

# ruby-on-rails - 在设计用户创建时发送自定义电子邮件

> ID：12983938
> 
> 赞同：1
> 
> 时间：2012-10-19T23:52:21.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

所以每次用户注册时我都需要发送一封确认邮件。有两种注册方式——当用户点击我的登录页面时，或者当他被另一个用户邀请时。在这两种情况下，我都想发送不同类型的电子邮件（在第二种情况下，我还想告诉他们您是由 foo@bar.com 等人发送的邀请）。做这个的最好方式是什么？我正在使用设计用于导轨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:43:23.553

使用[action mailer](http://api.rubyonrails.org/classes/ActionMailer/Base.html)发送电子邮件

您可以使用回调发送电子邮件意味着如果您用户注册然后下面的方法调用

```
after_create :send_mail_to_xxx_xxx
def send_mail_to_xxx_xxx 
  ... 
  ...
end 
```

# verilog - verilog 中的 8 x 1 多路复用器，语法错误 10170

> ID：12983942
> 
> 赞同：1
> 
> 时间：2012-10-19T23:52:45.060
> 
> 标签：verilog, quartus

我正在尝试在 Verilog 中创建一个 8 x 1 多路复用器。当我运行分析和合成代码时，我不断收到错误消息。这是我的代码：

```
// 8 x 1 line multiplexer
module KuchtaClayton_HW7_P6(output  Y, input [2:0] S, input [7:0] I);

    assign Y = (S ==3’b000) ? I[0] :
               (S ==3’b001) ? I[1] :    
               (S ==3’b010) ? I[2] :    
               (S ==3’b011) ? I[3] : 
               (S ==3’b100) ? I[4] :
               (S ==3’b101) ? I[5] :
               (S ==3’b110) ? I[6] :
               (S ==3’b111) ? I[7] : 1’bx;
endmodule 
```

这是错误消息：

> 错误 (10170)：KuchtaClayton_HW7_P6.v(6) 靠近文本“â”的 Verilog HDL 语法错误；期待“）”

有 21 个错误基本相同，有些看起来像这样：

> 错误 (10170)：KuchtaClayton_HW7_P6.v(6) 文本附近的
> Verilog HDL 语法错误 错误 (10170)：KuchtaClayton_HW7_P6.v(6) 文本附近的 Verilog HDL 语法错误

我双击它们，它们将我带到每个分配行 Y 3 次。我猜我在每个布尔表达式中都犯了三个错误？我在分配中做错了什么？我使用 Quartus II 作为我的程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:36:22.793

# jquery - 滑出标签飞回太远（离开页面）

> ID：12983943
> 
> 赞同：-1
> 
> 时间：2012-10-19T23:52:59.697
> 
> 标签：jquery, tabs, slide

我在我的网站上实现了一个滑出 div，它位于页面的左侧。可以点击一个小手柄，来回拉动标签。

[现场示例在这里](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)

目前CSS如下，设置为500px宽度。我想要 250px 宽度。

```
.panel {
  width:500px;
  min-height:175px;
  padding:40px;
  position:fixed;
  left:-580px;
  top:29.5%;
  z-index:1;
  background:#4d5290;
  -webkit-border-radius: 0px 0px 25px 0px;
border-radius: 0px 0px 25px 0px;
}

  .panel .trigger {
    width:36px;
    text-align:center;
    color:#fff;
    position:absolute;
    top:0;
    right:-36px;
  } 
```

我将宽度减半`250px`，然后假设我可以将`left:-580px`值减半以获得我想要的结果。

但是滑出标签向外滑动很好，但是当您再次单击手柄以隐藏标签时，它会从页面飞回原始 580 像素（这意味着您无法查看或取回它。）

我试图让它在 JS Fiddle 中工作，但我正在苦苦挣扎，因为 JS 文件在 js fiddle 中无法正常运行......正在处理它。同时，所需的一切都可以在以下位置看到：

[页面/直播站点](http://www.rubytuesdaycreative.co.uk/testsite/snood.html) [JS链接文件](http://www.rubytuesdaycreative.co.uk/testsite/js/slideout.js)

希望有人可以帮助我弄清楚它在做什么。或者数字之间的差异的公式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:07:08.533

```
.panel {
    width: 250px;
    min-height: 175px;
    padding: 40px;
    position: fixed;
    left: -330px; //you have 40px of padding, we need to add that to this calculation.
    top: 29.5%;
    z-index: 1;
    background: #4D5290;
    border-radius: 0px 0px 0px 25px;
} 
```

jQuery 的变化...

```
$(settings.objSlidePanel).animate({
    'left' : '-330px'
}); 
```

[您的代码正在运行——点击这里](http://jsfiddle.net/5jLUv/)

**编辑**

您也很可能有标记问题，当我从您的网站复制它时，您的 img 标签呈现为`<img src="blahblahblah.ext" <=" div=""/>`. 这可能会导致您在其他地方出现问题，可能与此代码无关。

还要检查您是否没有硬编码`style="left:-580px"`到`<div>`它的自我中。

# c++ - 错误：在 '>' 标记之前应有 ',' 或 '...'

> ID：12983951
> 
> 赞同：2
> 
> 时间：2012-10-19T23:53:37.547
> 
> 标签：c++, map, header, compiler-errors

我知道有十亿个类似的主题，但我在其中看到的任何建议都没有帮助我解决这个问题......这是在一个保存为 header.h 的文件中

```
#include <errno.h>
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <map>

using namespace std;
class Handler {
public:
    Handler();
    ~Handler();

    bool handle(int client);
    void giveMaps(map<string, string> host, map<string,string> media>);

private:
    map<string, string> hosts;
    map<string, string> mediaLookup;
    char buf_[1600];
    char* getCurrentDate();

}; 
```

我的错误是“handler.h:18: error: expected ',' or '...' before '>' token”，原文中的第 18 行是“void giveMaps(map host, map media>);”

我已经尝试将这两个地图以及地图内的所有字符串都声明为 const，但到目前为止我什么都没有。我很肯定这很简单，我只需要另一双眼睛才能看到它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:55:34.247

结尾有一个额外`>`的

```
void giveMaps(map<string, string> host, map<string,string> media>); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T23:56:44.267

有一个额外的`>`。请删除（它在语句之后的倒数第三个`media`）：

更新后的声明应如下所示：

```
void giveMaps(map<string, string> host, map<string,string> media); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T00:01:14.543

除了给出的其他建议外，以下内容是不正确的：

```
#include <string.h> 
```

你应该放弃，`.h`所以你只有：

```
#include <string> 
```

# ios - 不兼容的指针类型将“类”发送到“id”类型的参数 '

> ID：12983955
> 
> 赞同：1
> 
> 时间：2012-10-19T23:55:02.957
> 
> 标签：ios, xcode4.5, nscopying

我已经更新了 xcode，现在我收到错误消息不兼容的指针类型将“类”发送到“id”类型的参数

```
 - (void)mapObjectClass:(Class)objectClass toCellClass:(Class)cellClass {
  [self.objectToCellMap setObject:cellClass forKey:objectClass];
} 
```

如果有人能对我遇到的这个问题以及我如何解决它有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:59:18.693

NSDictionary 的键必须是遵守**NSCopying**协议的对象。**班级**不合格。

第一个问题是为什么您的方法参数是**Class**类型而不是更典型的类型，例如特定的类类型（对象指针）或**id**？

# asp.net-mvc - 为MVC递归生成脚手架模板

> ID：12983957
> 
> 赞同：1
> 
> 时间：2012-10-19T23:55:21.087
> 
> 标签：asp.net-mvc

`Child`考虑以下&`Root`类之间的组成关系-

```
public class Child
{
    public string ChildProperty { get; set; }
}
public class Root
{
    public Child child { get; set; }
    public string RootProperty { get; set; }
} 
```

`Root`为类创建强类型视图，**不包括** `child`属性。

```
<fieldset>
    <legend>Root</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.RootProperty)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.RootProperty)
        @Html.ValidationMessageFor(model => model.RootProperty)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

如何生成脚手架模板以包含子属性？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:35:04.160

通常，您需要创建自己的 T4 模板来执行此操作：

[https://stackoverflow.com/a/16072432/176877](https://stackoverflow.com/a/16072432/176877)

但是，我不确定您是否真的可以遍历这些子模型；我相当肯定您需要更进一步，并使用您自己的 PowerShell 脚本生成自定义脚手架，该脚本循环遍历这些模型并调用您创建的一组新模板。

[http://blog.stevensanderson.com/2011/04/07/mvcscaffolding-creating-custom-scaffolders/](http://blog.stevensanderson.com/2011/04/07/mvcscaffolding-creating-custom-scaffolders/)

换句话说，如果你想这样做，你还有很多工作要做。

# php - 在 Doctrine2 DQL 中通过 ManyToOne 关联选择实体

> ID：12983970
> 
> 赞同：2
> 
> 时间：2012-10-19T23:57:45.420
> 
> 标签：php, doctrine-orm

我有两个实体，UserAccount 和 UserEmail。UserAccount 与 UserEmail 具有 OneToMany 关联。我想要做的是选择具有给定电子邮件的 UserAccount。

如何使用 DQL 生成类似于以下 SQL JOIN 查询的内容：

```
SELECT a.* FROM user_account a
    INNER JOIN user_email e ON e.account_id = a.id
    WHERE e.address = 'someone@example.com' 
```

如果我这样做`SELECT account, email FROM UserEmail email JOIN email.account account WHERE email.address = :email`，它会给我回电子邮件，这不是我真正想要的。

我只需要取回电子邮件然后从中获取帐户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:33:07.890

这就是[fetch-joining](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#joins)的全部内容：您的“电子邮件”对象包含此处的帐户。

```
SELECT e, a FROM UserEmail e JOIN e.account a WHERE e.address = :email 
```

然后简单地做

```
$account = $email->getAccount(); 
```

另一种方法是选择包含该电子邮件的所有帐户：

```
SELECT a FROM UserAccount a JOIN a.emails e WHERE e.address = :email 
```

这将直接检索帐户对象。

# ruby - 组合三个数组

> ID：12983972
> 
> 赞同：0
> 
> 时间：2012-10-19T23:57:56.090
> 
> 标签：ruby, arrays

我有三个数组数组。我基本上需要将它们放在一起。

```
first = [[111, 1], [222, 2], [333, 3]]
second = [[111, 4], [222, 5], [333, 6]]
third = [[111,7], [222, 8], [333, 9]] 
```

理想情况下，如果最终数组看起来像这样，那就太好了：

```
final = [[111, 1, 4, 7], [222, 2, 5, 8], [333, 3, 6, 9]] 
```

我查看了产品方法，希望能有所帮助，但不行。我也尝试过遍历所有三个，但我想我没那么聪明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T00:52:38.083

[组合](http://ruby-doc.org/core-1.9.3/Array.html#method-i-2B)它们，然后对它们进行[分组](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)，然后将它们[映射](http://ruby-doc.org/core-1.9.3/Array.html#method-i-map)到适合您的规格：

```
(first + second + third).group_by(&:first).map { |k, v| [k, *v.map(&:last)] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:17:30.060

```
[first,second,third].transpose.map do |array|
  array.reduce { |init,e| init << e.last }
end

=> [[111, 1, 4, 7], [222, 2, 5, 8], [333, 3, 6, 9]] 
```

处理数组中的最后几个元素：

```
[first,second,third].transpose.map do |array|
  array.reduce { |init,e| init + e.drop(1) }
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T00:39:38.193

不确定这是否有效，但我是通过电话完成的，所以……当然有更好的方法来实现它

```
first = [[111, 1], [222, 2], [333, 3]]
second = [[111, 4], [222, 5], [333, 6]]
third = [[111,7], [222, 8], [333, 9]]

all = [first, second, third]

hash = {}

all.each do |arr|
  arr.each do |elem|
    hash[elem[0]] ||= []
    hash[elem[0]] << elem[1]
  end
end

Array.new hash.map { |k,v| [k, *v]} 
```

更多元素

```
hash[elem[0]].concat elem[1..-1] 
```

# python - GAE 中 SUDS 的 AttributeError

> ID：12983973
> 
> 赞同：4
> 
> 时间：2012-10-19T23:57:58.613
> 
> 标签：python, google-app-engine, suds

我正在尝试通过 Google App Engine 将 SUDS 库包含在 Python 项目中。

我的代码尝试以下操作：

```
from suds.client import Client
from suds.wsse import * 
```

而且，一旦我在 GAE 上进行了部署，就会遇到以下错误：

```
File ".../myfile.py", line 13, in <module>
from suds.client import Client

File ".../suds/__init__.py", line 154, in <module>
import client

File ".../suds/client.py", line 25, in <module>
import suds.metrics as metrics

AttributeError: 'module' object has no attribute 'suds' 
```

我已经环顾了一段时间，似乎 SUDS 可以与 GAE 一起使用。[我添加了此处](http://omiethenull.blogspot.com/2010/08/suds-and-appengine.html)概述的修复程序，但这似乎不是问题。似乎 App Engine 甚至没有达到这一点。

有什么信息或建议吗？

我正在使用 Python 2.7 和 SUDS 0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T02:04:50.597

你试过做一个简单的`import suds.client`吗？还要确保在应用程序中包含 suds 文件夹，因为 App Engine 默认不包含它。我希望这会有所帮助。

# spring - Spring 3 MVC BeanCreationException - 类是一个接口

> ID：12983974
> 
> 赞同：0
> 
> 时间：2012-10-19T23:57:58.897
> 
> 标签：spring, spring-mvc, dependency-injection, autowired

我对 Spring 比较陌生，甚至对注释和自动装配也比较陌生。我不知道如何连接我的豆子。这个想法是通过更改 application-config.xml 在 CacheService 和 NoCacheService 之间切换，但我无法克服异常。

例外

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'Service' defined in ServletContext resource [/WEB-INF/application-config.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [webapp.Services]: Specified class is an interface
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
<snip> 
```

课程：

```
package webapp;
interface Service {
    List<String> get();
}

@Service("cache")
CacheService implements Service {
    //from cache then from IO bound source
    @Autowired
    public CacheService(int v1, int v2)
    ...
}

@Service("nocache")
NoCacheService implements Service {
    //from IO bound source
    ....
} 
```

控制器：

```
@RequestMapping("/")
@Controller
public class ServiceController {

    @Autowired
    Service service;
    ...
} 
```

应用程序配置 xml：

```
<mvc:annotation-driven />
<context:component-scan base-package="webapp"/>

<beans:bean id="Service" class="webapp.Service">
    <beans:property name="cache" ref="cache" />
</beans:bean>

<beans:bean id="cache" class="webapp.CacheService">
    <beans:constructor-arg index="0" value="50"/> <!-- v1 -->
    <beans:constructor-arg index="1" value="100"/> <!-- v2 -->
</beans:bean>

<beans:bean id="nocache" class="webapp.NoCacheService">
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:08:42.153

您可以选择使用注释或 xml 来连接事物，在这种特定情况下，有两种方式配置的 bean，这将导致您看到的问题。让我试着列举一些变化：

.1。删除`<beans:bean id="Service" class="webapp.Service"> <beans:property name="cache" ref="cache" /> </beans:bean>`as your `webapp.Service`is an interface 和错误消息的原因。

.2\. 通过配置实例化 CacheService 会更好，因此只需从中删除 @Service 注释并仅保留以下内容：

```
<beans:bean id="cache" class="webapp.CacheService">
    <beans:constructor-arg index="0" value="50"/> <!-- v1 -->
    <beans:constructor-arg index="1" value="100"/> <!-- v2 -->
</beans:bean> 
```

.3\. NoCacheService 不需要在 xml 文件中，它可以使用您已经完成的方式使用组件扫描来实例化。

.4\. 现在注入 CacheService 或 NoCacheService，因为有两个实例，您必须指出将哪个实例注入 Controller，您可以这样做：

```
@RequestMapping("/")
@Controller
public class ServiceController {

    @Autowired @Qualifier("cache") //or noCache
    Service service;
    ...
} 
```

# uiviewcontroller - 子内容视图控制器视图的 Storyboard 边界大小错误？

> ID：12983976
> 
> 赞同：6
> 
> 时间：2012-10-19T23:58:36.757
> 
> 标签：uiviewcontroller, ios6, uistoryboard, cgrect

我的示例 Storyboard 中的此文档大纲显示了我正在使用的内容。

![文件大纲](../Images/8a5eac87d4c7d29dd1d2b343d2efbd88.png)

我有一个自定义容器视图控制器和两个通过嵌入 segues 连接的内容视图控制器。

这是故事板本身。

![故事板摘要](../Images/ec5d413c8e6a6bb1f87f479662ee2525.png)

ZetaViewController 必须创建一些程序化视图（当然是在 ZetaView 中）。我注意到当我将这些以编程方式创建的视图居中时，它们似乎真的偏离了中心。

ZetViewController 通过检查*self.view.bounds.size.height*和*self.view.bounds.size.width*并进行一些适当的算术来使事物居中。

当我将调试日志添加到 ZetaViewController 时，我注意到 self.view.bounds.size.height*和*self.view.bounds.size.width*的*尺寸等于 ContainerView (768 x 1004) 而**不是**ZetaView (728 x 637)。IB 中的 Size Inspector 确认这些值。

我为 ZetaView 的 tag 属性创建了一个独特的值并记录了它。ZetaViewController.view*确实*是 ZetaView，因为标签值确认了它。

那么发生了什么？为什么在 Storyboard 和 Size Inspector 上以较小的尺寸清晰显示的 ZetaView 在运行时会在其属性中显示错误的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T21:58:16.160

我的问题与 Storyboard、segue 或自定义容器视图控制器与内容视图控制器无关。它与iOS 5 中引入的新[Cocoa 自动布局功能有关。](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/AutolayoutPG/)

我的问题来自检查视图边界大小 in`viewDidLoad`而不是 in `viewWillLayoutSubviews`。在`viewDidLoad`调用的时候，视图控制器的视图还没有被赋予合适的大小。当我将以编程方式居中视图的代码移动到 时`viewWillLayoutSubviews`，它按我的预期工作。我仍然保留视图*创建*代码，`viewDidLoad`因为`viewWillLayoutSubviews`在布局更改时重复调用。

另请参阅*iOS 视图编程指南*部分[“手动调整视图的布局”](https://developer.apple.com/library/content/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW48)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T00:27:19.600

好的，我将指出我发现的一篇出色的帖子：（更新） [http://kevindew.me/post/18579273258/where-to-progmatically-lay-out-views-in-ios-5-and](http://kevindew.me/post/18579273258/where-to-progmatically-lay-out-views-in-ios-5-and)

在自动布局完成其魔力之后，我在视图中添加阴影 calayers 的过程非常糟糕。viewDidLoad、viewWillLoad 等没有正确布置所有内容。

viewWillLayoutSubviews 被调用了很多次，并且状态没有完全设置。但是...在 viewDidLayoutSubviews 中，最后一切都按我的预期设置。

# jquery - 当用户单击组合框时，如何删除 JQuery UI 自动完成组合框文本？

> ID：12983981
> 
> 赞同：0
> 
> 时间：2012-10-19T23:59:28.363
> 
> 标签：jquery, jquery-ui

我在单个页面上有 5 个 jquery 组合框，当用户单击它时，我想从组合框中删除文本。这应该只从选定的组合框中删除文本。

我使用以下代码将下拉列表转换为 jquery 组合框

```
$(function() {
     $( "select" ).combobox();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:10:52.463

我认为更好的可能是

```
$("select").focus( function(){
    $(this).val("");
    } ); 
```

因为它也应该与 [TAB] 键一起使用......

我是正确的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:54:31.460

尝试这个

```
 $("select").focus( function(){
  $(this).html("");
}); 
```

# sql-server-2008 - 聚合 CTE 和更新查询

> ID：12983982
> 
> 赞同：2
> 
> 时间：2012-10-19T23:59:42.330
> 
> 标签：sql-server-2008, sql-update, aggregate-functions, common-table-expression

我研究了许多聚合和 CTE 帖子，但没有找到将最小值从 CTE 更新到附加（非 CTE）外部表的解决方案。这是使用 SQL 2008（微软管理工作室）。我将约会表中的日期、计费表中的服务日期组合在一起，然后将这些日期与患者表中的字段进行交叉检查。如果名为 New Patient Date 的字段为空白，我想使用其他两个表中的最早日期对其进行更新。他们都加入了一个称为图表或图表编号的通用 ID。这是代码...任何见解？

```
WITH New_Patients (chart_nbr, First_Visit)
  AS
  ( SELECT A.[Chart], MIN(A.[Appt Date])
      FROM Appointment AS A, Patient AS P
      WHERE A.[Chart] = P.[Chart Number]
        AND A.[Appt Date] IS NOT NULL
      GROUP BY A.[Chart]

   UNION

   SELECT BD.[Chart], MIN(BD.[Service Date 1])
    FROM [Billing Detail] AS BD, Patient AS P 
    WHERE BD.[Chart] = P.[Chart Number]
      AND [Transaction Code] IN 
         ('99201', '99202', '99203', '99204', '99205', '99211', '99212', '99213', 
         '99214', '99215', '99241', '99242', '99243', '99244', '97001', '97002')
      AND BD.[Service Date 1] IS NOT NULL
    GROUP BY BD.[Chart]

   UNION

   SELECT P.[Chart Number], P.[New Patient Date]
     FROM Patient AS P
     GROUP BY P.[New Patient Date], P.[Chart Number]  )

UPDATE [Patient]    
SET Patient.[New Patient Date]=MIN(First_Visit)
FROM Patient AS P, New_Patients AS NP
WHERE P.[Chart Number] = NP.chart_nbr
    AND P.[New Patient Date]IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:45:03.623

干杯，如果我的理解是正确的，我将解决以下问题：

```
 WITH New_Patients (chart_nbr, First_Visit)
  AS
  ( SELECT A.[Chart] as chart_nbr, MIN(A.[Appt Date]) as First_Visit
      FROM Appointment AS A, Patient AS P
      WHERE A.[Chart] = P.[Chart Number]
        AND A.[Appt Date] IS NOT NULL
      GROUP BY A.[Chart]
   UNION
   SELECT BD.[Chart], MIN(BD.[Service Date 1])
    FROM [Billing Detail] AS BD, Patient AS P 
    WHERE BD.[Chart] = P.[Chart Number]
      AND [Transaction Code] IN 
         ('99201', '99202', '99203', '99204', '99205', '99211', '99212', '99213', 
         '99214', '99215', '99241', '99242', '99243', '99244', '97001', '97002')
      AND BD.[Service Date 1] IS NOT NULL
    GROUP BY BD.[Chart]
   UNION
   SELECT P.[Chart Number], P.[New Patient Date]
     FROM Patient AS P
     GROUP BY P.[New Patient Date], P.[Chart Number]  
 )
UPDATE P SET P.[New Patient Date] = ISNULL(P.[New Patient Date], MIN(NP_group.First_Visit))
from [Patient] P 
left join 
(   
    select min[First_date) as First_Visit, chart_nbr
        from New_Patients 
            group by chart_nbr

) NP_group ON P.[Chart Number] = NP_group.chart_nbr 
```

WITH 部分保持不变，UPDATE 部分稍作修改。在子查询中，您获得跨 CTE 表的最小日期，然后更新适用的位置（ISNULL 条件）。

# background - CSS：eBay问题上的Div背景图像位置

> ID：12983989
> 
> 赞同：-1
> 
> 时间：2012-10-20T00:00:45.357
> 
> 标签：background

好的，这可能很容易解决，但我是平面设计师而不是开发人员，所以想知道是否有人可以帮助我。我玩过位置，但没有那么幸运。

所以我有一个标题 div，里面有一个背景图像，但是当我在 ebay 上预览 html/css 时，这个 div 中的背景图像出现在浏览器的顶部（与 ebay 标准标题冲突）并且没有相对于定位它所在的容器 div。所以基本上 bg 图像在 div 之外。我需要将它包含在我想要的 div 中。

任何帮助，将不胜感激。（这可能是一个重复的话题，很抱歉）

代码：

```
<div id="HeaderContainer">
  <div id="BGHeader"></div>
</div>

    #HeaderContainer{
        position:relative;
    }

    #BGHeader {
        position:absolute;
        top:0;
        height:420px;
        width:100%;
        background-image:url(imagehere.jpg);
        background-repeat:repeat-x;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:03:29.337

您应该发布您的 html 和 css。至少相关部分。但是没有见过他们我会说我最好的猜测是你在标题上使用绝对定位。您需要将其包装在另一个相对定位的元素中。

```
<div id="container">
    <header>header here</header>
</div> 
```

你的CSS是这样的：

```
#container{
    position:relative;
}

header{
    position:absolute;
    top:0;
    left:0;
} 
```

如果我对您的需求或情况有误，请告诉我，我可以更新。

# playframework - 创建动态html表单

> ID：12983992
> 
> 赞同：4
> 
> 时间：2012-10-20T00:01:34.493
> 
> 标签：playframework, playframework-2.0

尝试学习如何创建动态 html 表单。元素将在数据库中定义。创建页面后，控制器将处理回发数据以将数据插入数据库。

我正在使用 playframework 1.2.4

将不胜感激任何指南/有用的链接

如果我知道元素是什么，我可以构建页面，并且当我从控制器调用 render(param object) 并访问视图中的对象时，可以从数据库表中提取数据以用于选择列表。

到目前为止我的 hack：创建了一个包含以下列的表

```
rid
HTMLElementType
ElementName
HTMLElementOptions [if the element type is select]
HTMLDefaultValue [default value for select like 'select a value from below']
HTMLElementEnabled 
```

创建了一个模型

```
package models;

import play.*;
import play.db.jpa.*;
import play.data.validation.*;

import javax.persistence.*;
import java.util.*;

@javax.persistence.Entity
@Table(name="mytable")
public class DynameForm extends Model{
     public String HTMLElementType;
     public String ElementName;
     public String HTMLElementOptions;
     public String HTMLDefaultValue;
     public String HTMLElementEnabled;
} 
```

In my view i loop through checking if it a `<select>` and if so put in an empty option. But not sure if that is right way to go about. In addition in my view i also have to check if it is not then i have to put in `<input type=>` and build the complete tag

In addition how would I enforce validation on certain fields that are required like example last name/ ssn/ etc? I can alter my table to have a column IsRequired which could help me

Not sure what the right way even is to capture the data on post back

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:31:00.130

basically the problem is to generate an html form. You appear to have figured out your model. What you are missing is a view. I did something like the following once, to generate a model for a simpleDB model.

I provide a list of fields, and UI is generated based on the fields. I only had text fields, and only wanted 2 cases (visible and invisible) fields. Your usecase may require more complexity, so you can adapt as necessary.

`dish.fields` contains the fields with the relevant metadata. Any special things like, requires validation, or isRequired, you will have to provide that information to the view, so it can render the field in appropriate manner.

Simplest way to model it would be to begin with an HTML form, and start generalizing it one field at a time.

```
 #{list items:dish.fields, as:'f'}
    #{field 'f'}
    #{if f.display } 
    <div class="control-group">
        <label class="control-label"> &{f.name} </label>
        <div class="controls">
            <input type="text" class="input-xlarge" placeholder="&{f.name}" name="${dish.getFieldId(f)}" value="${dish.getValue(f)}" ></input>
        </div>
    </div>
    #{/if}
    #{else}
    <input type="hidden" class="input-xlarge" placeholder="&{f.name}" name="${dish.getFieldId(f)}" value="${dish.getValue(f)}" ></input>
    #{/else}
    #{/field}

    #{/list}    
    #{else}
    No fields
    #{/else} 
```

I had to define my own fields, but you should be able to get the idea.

You will probably have to have a bunch of different input types for different use cases, so start with simple and generalize as you go on. You can have a look at the CRUD module implementation as well.

my `DisplayAttribute` class (metadata for the fields) looks something like the following. You can use it as a starting point.

```
public class DisplayAttribute {
    public Boolean display = Boolean.TRUE;
    public String type = "";
    public String  name;

    public DisplayAttribute(String name){
        this.name = name;
        this.display = Boolean.TRUE;
    }

    public DisplayAttribute(String name, Boolean display){
        this.name = name;
        this.display = display;
    }
... overridden equals and hash
} 
```

**edit** *How do the fields get rendered?* Controller passes the meta data(`DisplayAttribute`) to the view, in this case, meta data only contains name of the field and wether it is displayable or not.

**Model**

Here model contains the fields to render, but you could just as easily retrieve these from a database. My model is generic because I realized I kept on doing the same things over and over again for multiple models.

I implement my own interface which gives me `getFields` method. I also maintain two maps, so that given an attribute, I can get its DisplayAttribute, and given a DisplayAttribute I get its name. I call methods of this model from the view when needed.

```
 public class GenericSimpleDBModel implements SimpleDBModel {

        public static AmazonSimpleDB sdb = null;
        private static final String bracketRemovalPattern = "(^.*?\\[|\\]\\s*$)";
        private Map<DisplayAttribute, Set<String>> data = new TreeMap<DisplayAttribute, Set<String>>(new UuidComparator());
        private Map<String, DisplayAttribute> attributeCache = new HashMap<String, DisplayAttribute>();
        protected final String DOMAIN_NAME;

        public GenericSimpleDBModel() {
            initialize(getFields());
            this.DOMAIN_NAME = "dishes";
        }

    protected void initialize(String[] fields) {
        data = new TreeMap<DisplayAttribute, Set<String>>(new UuidComparator());
        attributeCache = new HashMap<String, DisplayAttribute>();
        for (String f : fields) {
//            if (f.equals(getUUIDField()) || f.equals(getIntegrityField())) {
            if (f.endsWith("uuid") || f.endsWith("integrity")) {
                setValue(f, "", Boolean.FALSE);
            } else {
                setValue(f, "", Boolean.TRUE);
            }
        }
    }
   protected void initialize(Set<DisplayAttribute> fields) {
        data = new TreeMap<DisplayAttribute, Set<String>>(new UuidComparator());
        attributeCache = new HashMap<String, DisplayAttribute>();
        for (DisplayAttribute atr : fields) {
            setValue(atr.name, "");
        }
    }
... more methods
} 
```

# asp.net - connecting to access database and query user login information not pulling data back

> ID：12983995
> 
> 赞同：1
> 
> 时间：2012-10-20T00:02:01.813
> 
> 标签：asp.net, ms-access

any help would be great thank you. not sure why its all ways returning a null I'm not sure if its even connecting to the database.

my web config file

```
<configuration>
  <connectionStrings>
    <add name="accessConnectionString" providerName="Microsoft.Jet.OLEDB.4.0" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\***\Desktop\pratice\AccessTest\App_Data\TheList.mdb;Persist Security Info=True"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
</configuration> 
```

middle tier code to check if user is in the database if they are return something if not return null

```
OleDbConnection sconn = new OleDbConnection();
    OleDbCommand scmd = new OleDbCommand();
    public DBMiddleTier()
    {
        try
        {
            // set up the connection strings        
            sconn.ConnectionString = ConfigurationManager.ConnectionStrings["accessConnectionString"].ToString();
        }
        catch(Exception ex)
        {
            throw ex;
        }
    }//end of constructor
    //class to check membership
    public object checkMembership(string logid, string password)
    {
        try
        {
            sconn.Open();
            //set propertiers of the command
            scmd.Connection = sconn;
            scmd.CommandType = CommandType.Text;
            scmd.CommandText = "select * from SubDealers where LoginID = @InputUsername and Password = @InputPassword";
            scmd.Parameters.Clear();
            OleDbParameter checkUsername = scmd.Parameters.Add("@InputUsername", OleDbType.VarChar, 50);
            checkUsername.Value = logid;
            OleDbParameter checkPassword = scmd.Parameters.Add("@InputPassword", OleDbType.VarChar, 50);
            checkPassword.Value = password;
            object result = scmd.ExecuteScalar();
            return result;
        }
        catch (OleDbException sqx)
        {
            throw sqx;
        }
        finally
        {
            sconn.Close();
        }
    }//end of method 
```

my code behind page

```
try
        {
            object result = dm.checkMembership(txtLoginID.Text, txtPassword.Text);
            if (result != null)
            {
                Response.Redirect("https://www.google.com/");
            }
            else
            {
                txtLoginID.Text = "";
                txtPassword.Text = "";
                Page.ClientScript.RegisterStartupScript(this.GetType(), "notAmember", "alert('Sorry wrong id or password');", true);
            }
        }
        catch (Exception ex)
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + ex.Message + "');", true);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:35:19.423

have you tried this?

```
select * from [SubDealers] where [LoginID] = @InputUsername and [Password] = @InputPassword" 
```

# ios - 使用 Jenkins 部署 TestFlight 的权威资源是什么？

> ID：12983998
> 
> 赞同：-1
> 
> 时间：2012-10-20T00:02:46.260
> 
> 标签：ios, jenkins, testflight

如问题所述，但包括代码签名和嵌入配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:28:26.757

我最近发布了一系列关于如何使用在 CloudBees PaaS 上运行的 Jenkins 构建/测试/部署 iOS 和 Android 应用程序的博客：iOS 博客在线 [使用 Jenkins 为移动应用程序持续部署：Xcode 使用 MacOS 从站构建](http://blog.cloudbees.com/2012/09/continuous-deployment-for-mobile-apps.html)

那篇博文实际上谈到了 Appaloosa，但 TestFlight 的 Jenkins 配置几乎相同：您可以在此处在线查看实际示例配置： [stockfishchess-ios Jenkins 配置](https://partnerdemo.ci.cloudbees.com/job/stockfishchess-ios/configure)

需要注意的几点：

*   您需要确保内部版本号是唯一的 - 最好的方法就是从环境中获取 Jenkins 内部版本号（请参阅示例配置）。
*   您需要配置构建作业以打包 .ipa 存档（示例配置使用快速存档插件来执行此操作）
*   您应该从 TestFlight 控制台复制 API 令牌和团队令牌

回复：iOS 配置 - 查看 Apple 开发人员计划文档，了解有关如何设置 Ad Hoc 配置配置文件的详细信息，您需要将其发送给测试人员。获取他们想要使用的设备的 UDID，使用 iOS Provisioning Portal 创建配置文件，并使用 Xcode Organizer 导出 .mobileprovision 配置文件。您还需要进入 TestFlight 并邀请 beta 测试用户。

您可以在博客上找到我的联系方式 - 如果您需要进一步的帮助，请随时直接与我联系。