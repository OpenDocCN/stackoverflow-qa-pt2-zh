# StackOverflow 问答 15710000-15710999

# javascript - Trigger a button click on the Enter key in a text box misses its value

> ID：15710000
> 
> 赞同：3
> 
> 时间：2013-03-29T19:17:44.143
> 
> 标签：javascript, jquery

I have

### Html:

```
<form  action="" method="post"  id="contactForm">
    <input id='inputbox' name="inputbox" type="text" />
    <button type="button" id='search'> search </button>
</form> 
```

### JavaScript

```
$(document).ready(function() {
    $("#inputbox").keyup(function(event){
        if(event.keyCode == 13){
            $("#search").click();
        }
    });

    $('#search').click(function(){
         var inputbox= $("#inputbox").val();  
        //stuff
    });
}); 
```

**inputbox** value is nothing when I press enter, however if I click on button It works perfectly with same input value

maybe making **inputbox** global?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:25:57.393

The problem is that the enter key defaults to submitting your form, even without a submit button. So you should block the submission by changing the event binding to `keypress` and using `event.preventDefault()`, like this:

```
$("#inputbox").keypress(function(event){
    if(event.keyCode == 13){
        event.preventDefault();
        $("#search").click();
    }
}); 
```

Alternatively, you could use `.submit()` to trigger your function, change the input type to submit, and avoid separate handling for keys and clicks.

HTML:

```
<form action="" method="post" id="contactForm">
    <input id='inputbox' name="inputbox" type="text" />
    <input type="submit" value="Search">
</form> 
```

JavaScript:

```
$(document).ready(function() {
    $("#contactForm").submit(submitSearch);
}); 

function submitSearch(event) {
     event.preventDefault();

     //do other stuff
     alert($("#inputbox").val());
} 
```

# c++ - 带有 TCHAR 和字符串连接的 C++ 消息框

> ID：15710002
> 
> 赞同：0
> 
> 时间：2013-03-29T19:17:48.620
> 
> 标签：c++, messagebox

有人可以告诉我如何在消息框中输出 szFileName 吗？

我在下面的尝试不起作用

```
//Retrieve the path to the data.dat in the same dir as our app.dll is located

TCHAR szFileName[MAX_PATH+1];
GetModuleFileName(_Module.m_hInst, szFileName, MAX_PATH+1);
StrCpy(PathFindFileName(szFileName), _T("data.dat"));

FILE *file =fopen(szFileName,"rb");
if (file)
{
    fseek( file,iFirstByteToReadPos, SEEK_SET);
    fread(bytes,sizeof(unsigned char), iLenCompressedBytes, file);
    fclose(file);
}
else
{
    MessageBox(NULL, szFileName + " not found", NULL, MB_OK);
    DebugBreak();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:23:38.590

你不能添加：

```
szFileName + " not found", 
```

简单修复：

```
MessageBox(NULL, szFileName, L"File not found", MB_OK); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:26:18.777

C++ 不支持 '+' 来连接 char 或 TCHAR 数组。您需要为此使用字符串类，或者使用 C 风格的方式使用 strcat 和堆栈上的缓冲区。

由于您使用的是 C++，因此如果您使用的是 ATL/mfc，则可以使用 CString，或者您可以使用以下内容：

```
typedef std::basic_string<TCHAR> tstring;

...
MessageBox(NULL, tstring(szFileName) + " not found", NULL, MB_OK); 
```

通常的 C++ 管道作为练习留给读者。

# element - qtp 您单击的位置与多个对象相关联

> ID：15710004
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:53.907
> 
> 标签：element, qtp

我正在尝试使用 QTP 11.5。我有带有 ie8 的 Windows 7。问题是每当我尝试将对象（webedit）添加到存储库时，我都会得到 WinObject:Internet Explorer_Service 添加顶部错误“您单击的位置与多个对象相关联”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:33:29.730

您如何尝试添加`WebEdit`？如果您使用对象存储库学习功能，是否会`WebEdit`显示在选择列表中，或者您是否`WinObject`从一开始就获得？

如果后者似乎没有启动 Web 插件，请确保在打开 UFT 时在插件管理器中选择了**Web**（QTP 11.5 现在称为 UFT），之前还要打开一个 GUI 测试，然后才启动浏览器，如果在 GUI 测试打开之前打开浏览器 UFT 可能无法识别 Web 控件（这类似于在 QTP 之前打开浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:14:45.940

我从未使用过 QTP 11.5 但我猜你面临的问题是因为可能有多个 webedit 对象

对此的解决方案可以是----> object spy webedit 对象并在您的描述性编程中使用更多特性，如果您给我部分代码并解释其工作原理，可以更好地解释您。

例如：strBrowserMainPage.WebButton("class:=sr_but_m","name:=export").exist

在这里，我使用了 webbutton 的两个特征，因为那里有多个 webbutton 对象，名称 = Export

所以要选择一个特定的增加特性以便更具体地放在哪个对象上。

谢谢

# c++ - 在 openCV 的数据指针上进行类型转换

> ID：15710006
> 
> 赞同：1
> 
> 时间：2013-03-29T19:17:57.260
> 
> 标签：c++, opencv

代码 1

```
template<typename T>
inline T* get_pointer(cv::Mat &src, int row)
{
    return src.ptr<T>(row);
}

template<typename T>
inline T* get_pointer(cv::Mat &src, int row, int col)
{
    return get_pointer<T>(src, row) + col * src.channels();
}

template<typename T>
inline T* get_pointer(cv::Mat &src, int row, int col, int channel)
{
    return get_pointer<T>(src, row, col) + channel;
} 
```

代码 2

```
cv::Mat input = //....
auto *input_ptr = get_pointer<float>(input, row, col);
//back to previous row
input_ptr = reinterpret_cast<float*>(reinterpret_cast<uchar*>(input_ptr) - input.steps); 
```

他们安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T21:34:59.443

你为什么不使用这个（更短更安全）的代码呢？

```
T *ptr_to_elem = &src.at<T>(row,col)[channel]; 
```

这也适用于非连续数组。不需要潜在的危险`reinterpret_cast<>`。这里唯一安全的条件是您知道数据类型 T。更安全的版本是使用`cv::Mat_<T>`而不是`cv::Mat`，以便在编译时捕获错误，而不是在运行时使程序崩溃。

```
T *ptr_to_elem = &src(row,col)[channel]; 
```

# ios6 - 带有 UIImagePicker 的多个 UIImageViews

> ID：15710012
> 
> 赞同：1
> 
> 时间：2013-03-29T19:18:32.823
> 
> 标签：ios6, uiimagepickercontroller, xcode4.5

我是使用 UIImagePicker 的新手，所以请耐心等待。基本上，我定义了两个 UIButtons 来访问相机胶卷，一旦选择了图像，图像就会出现在我的 UIImageView 中。问题是当我从其中一个按钮中选择一个图像时，它出现在两个 UIImageViews 中，而不是一个。我基本上希望能够通过两个不同的按钮选择两张不同的照片。这是编码：

```
-(IBAction)getPhoto1:(id)sender {

    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    popover1 = [[UIPopoverController alloc] initWithContentViewController:picker];
    [popover1 presentPopoverFromRect:CGRectMake(0.0, 0.0, 400., 400.0) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}

-(IBAction)getPhoto2:(id)sender {

    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    popover2 = [[UIPopoverController alloc] initWithContentViewController:picker];
    [popover2 presentPopoverFromRect:CGRectMake(0.0, 0.0, 400.0, 400.0) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissViewControllerAnimated:YES completion:nil];
    photo1.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    photo2.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:50:32.407

`-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`每当您完成选择图像时调用。

当您完成从 中选择图像时`UIImagePickerController`，您将两者都设置`UIImageView`为返回的图像。

您需要区分按下了哪个按钮 - 也许您可以使用 a`int`来确定按下了哪个按钮。

For example, create an 'int' called `buttonPressed` that'll be set to `1` when `getPhoto1` was pressed, or `2` when `getPhoto2` was pressed. Then, in `didFinishPickingMediaWithInfo`, you could have:

```
if (buttonPressed == 1) {
    photo1.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} else if (buttonPressed == 2) {
    photo2.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

# ruby-on-rails - 在 Ruby on Rails 中安排事件

> ID：15710013
> 
> 赞同：0
> 
> 时间：2013-03-29T19:18:32.973
> 
> 标签：ruby-on-rails

很抱歉，如果这是重复的，我尝试搜索这个，但不确定要使用什么搜索词并且没有真正找到任何东西。

我有一个 Ruby on Rails 应用程序，该应用程序将用于向用户发送文本消息，其中包含指向可能使用 clickatell 的多项选择问题的链接。这些问题有一个与之相关的日期和时间。我想让 ruby​​ on rails 应用程序在指定日期自动将这些 SMS 消息发送到用户的手机。

我真的不知道如何去做这件事。谁能指出我在 ruby​​ on rails 中安排此类事件的大致方向。我不需要一个确切的解决方案，也许如果有人可以澄清这到底是什么，那么我可以在网上找到一些资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:53:16.783

似乎不再发送您的问题？在这种情况下，我不会通过 cronjob 执行此操作。我会通过以下方式做到这一点：[https ://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)

因此，每当安排一个问题时，您只需将其添加到延迟队列中，resque-scheduler 就会在时间到时将它们移动到正确的工作队列中。

这样您就不必担心某种轮询 cronjob，这将由 resque-scheduler 自动完成。您还可以免费获得通过 resque 发送短信的异步处理。因此，如果您必须发送大量短信，您可以并行运行它们。

所以它会是这样的：

1.  保存问题后，您将在延迟队列中排队，以便将来发送问题
2.  when the date comes up, the message is moved onto 'ready to send'-queue, which is in charge of gathering all the users the question needs to be sent to.
3.  for each of those users you create another message on the 'ready to send'-queue
4.  the 'ready to send'-queue will then send out the actual SMSes

You then can run many workers on the 'ready to send'-queue and have the SMSes be sent out in parallel. You also get error handling for free with resque, it gahers all messages that resulted in an exception in a 'failure' queue, which you can then debug or reschedule again

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:41:35.153

您可以使用[when](https://github.com/javan/whenever)来安排事件。

# nsnumber - 如何从 NSNumber 中删除符号？

> ID：15710024
> 
> 赞同：1
> 
> 时间：2013-03-29T19:19:10.857
> 
> 标签：nsnumber

我正在制作一个与货币有关的 iOS 应用程序。我的应用收到的价值可能是：4 美元。应用程序接收到的这个值被放入一个 NSNumber。问题是价值实际上有一个 $ 。如何修剪 NSNumber 中的 $？还是我将它放入 NSString 会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:27:31.903

使用`NSNumberFormatter`：

```
// set up your number formatter
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];

// get a string that you'll be converting to a NSNumber
NSString *myNumberString = [NSString stringWithFormat:@"$4"]

// convert then print to the console
NSNumber *myNumber = [numberFormatter numberFromString:myNumberString];
NSLog(@"myNumber: %@", myNumber); 
```

这应该完成你想要做的事情。 `myNumberString`将需要更改以包含您收到的任何字符串。

NSNumberFormatter 文档： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

# linux - Bash，使用导出并在单个脚本中运行导出

> ID：15710037
> 
> 赞同：0
> 
> 时间：2013-03-29T19:20:06.700
> 
> 标签：linux, bash, unix

```
#!/bin/bash
export foo='script...'

bash --program=foo 
```

你如何运行
我一直在使用 gtkdialog 的导出的“foo”，它是这样写的

```
#!/bin/bash
export MAIN_DIALOG='...xml code...'

gtkdialog --program=MAIN_DIALOG 
```

一个简单的 bash 脚本也应该可以做到这一点？
我希望这样可以减少我必须包含的文件数量，
目前我为一个程序编写的每组 bash 脚本都保存在单独的文件中，然后由主脚本执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:23:09.930

我相信您只是在寻找：

```
bash -c "$foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:27:33.277

为了减少文件的数量，您可以将命令从单独的脚本更改为主脚本中的函数：

```
cmd() {
  # actions for foo command
} 
```

然后，您可以使用以下命令，而不是使用`bash -c`来运行它们`eval`：

```
foo='cmd ...'

eval "$foo" 
```

# c# - 无法在 MVC 中为 AppDomain 加载文件或程序集

> ID：15710038
> 
> 赞同：1
> 
> 时间：2013-03-29T19:20:09.880
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我通过以下方式将程序集加载到 appdomain 中：

```
 var appdomainSetup = new AppDomainSetup();
            //string appBase = Environment.CurrentDirectory;
            //string appBase = HttpContext.Current.Request.ApplicationPath;
            appdomainSetup.ApplicationBase = _appBase;//System.Web.HttpContext.Current.Request.ApplicationPath: Injected into cstor
            System.Diagnostics.Debug.WriteLine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase);
            appdomainSetup.DisallowBindingRedirects = false;
            appdomainSetup.DisallowCodeDownload = true;
            appdomainSetup.ConfigurationFile = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile;

            appDomain = AppDomain.CreateDomain("myAppdomain", null, appdomainSetup); 
```

在哪里`BLASSEMBLYLOCATION = "c:\path\myAssembly.dll";//for now just hard coded path`

然后我用另一种方法从这个程序集中获取一个类型：

```
var helperObject= appDomain.CreateInstanceAndUnwrap("myssembly.NameContinued", "myNamespace.BL.Helper") as Helper;//ERROR LINE HERE 
```

这一切都在单元测试中工作得很好。但是，当通过 Web 应用程序运行时，这会出现错误：

> 无法加载文件或程序集“myssembly.NameContinued”或其依赖项之一。

`FileNotFoundException`我可以通过不指定在我的单元测试中重现

`appdomainSetup.ApplicationBase`

我怀疑这个问题与我设置为 ApplicationBase 的目录有关。在网络程序中，我传递了`HttpContext.Current.Request.ApplicationPath`我看到的值`"/"`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:35:23.253

我将 ApplicationPath 设置为等于放置程序集的路径：

```
appdomainSetup.ApplicationPath = @"c:\path"; 
```

因为这个程序集被 Web 项目引用，所以我希望我的程序集包含在与我的 Web 项目相同的目录中，这样我就可以使用相对路径（很像`bin`文件夹的工作方式）。但是，无论出于何种原因，这都是行不通的。到目前为止，指定服务器上存在的完整路径是唯一有效的解决方案。

# css - Safari 特定的 CSS？

> ID：15710042
> 
> 赞同：-2
> 
> 时间：2013-03-29T19:20:28.917
> 
> 标签：css, wordpress, safari

我正在尝试通过 wordpress.com [http://mpiedgeworldclass.wordpress.com/](http://mpiedgeworldclass.wordpress.com/)上的博客帮助朋友。

他们有付费/打开的 css 编辑选项，因此我们可以编辑 css 但不能触摸主题本身。

侧边栏和内容区域之间有一个垂直图像重复。它在 Safari 中运行太高，但在 Chrome 中运行良好。

![Safari CSS 问题](../Images/276094cec5316ecf14f516d4e21d55b9.png)

如果我可以访问主题/ html，我认为这很容易解决，但尝试仅从 css 中进行。我不确定这是否可能。

任何 CSS 向导有什么想法吗？

（我真诚地希望我有更多的 css 技能，但这似乎并不容易，也不是在 6 年后很快。）:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:42:14.513

整个事情有点混乱，但我能找到的最佳解决方案（对 Chrome 没有影响）是设置`height: 187px;`#header。

这是一个有趣的问题，Safari 对边距的处理方式取决于您是否定义了高度，即使 auto 的计算高度值相同。前几天我遇到了类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:01:11.350

Safari 和 Chrome 都基于 WebKit，因此在 css 渲染方面没有内在差异。但是，如果您的 chrome 浏览器使用的 webkit 版本与您的 safari 不同，您可能会看到一些问题。这个问题看起来要么是位置问题，要么是显示问题……据我所知，这并没有真正改变。

我要做的是检查css是否正在做任何新的或奇怪的事情，以便放置可能导致问题的元素。代码确实会有所帮助，但我可以建议检查 safari 和 chrome 的各自版本，并可能将它们都更新到最新版本。如果更新它们可以解决问题，至少您会知道这是一个向后兼容性问题。

# ruby-on-rails - Rake 因错误而中止：没有要加载的文件——openssl

> ID：15710044
> 
> 赞同：1
> 
> 时间：2013-03-29T19:20:32.630
> 
> 标签：ruby-on-rails, ruby, activerecord, rvm, bundler

我的 Mac 上不断出现 openssl 问题。当我尝试发出 rails 任务时，我完全被错误消息弄糊涂了。可能是什么问题？我的机器上肯定有 openssl，因为当我在终端中键入它时，它会打开一个 openSSL> 会话。

每次我尝试以下操作时：`RAILS_ENV=development rake db:migrate` 我收到以下错误：

```
rake aborted!
no such file to load -- openssl

(See full trace by running task with --trace) 
```

当我使用 --trace 选项键入上述内容时，它会显示下面列出的错误。

当我尝试通过键入启动 Rails 服务器时，`rails s`出现以下错误：

```
 $> rails s
/usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/openssl.rb:2:in `require': no such file to load -- openssl (LoadError)
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/openssl.rb:2:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/buffer.rb:2:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/buffer.rb:2:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/algorithms.rb:1:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/algorithms.rb:1:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/session.rb:7:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh/transport/session.rb:7:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh.rb:10:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-2.6.6/lib/net/ssh.rb:10:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-gateway-1.2.0/lib/net/ssh/gateway.rb:2:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/net-ssh-gateway-1.2.0/lib/net/ssh/gateway.rb:2:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano/configuration/connections.rb:2:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano/configuration/connections.rb:2:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano/configuration.rb:5:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano/configuration.rb:5:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano.rb:3:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/capistrano-2.14.2/lib/capistrano.rb:3:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/imtiazahmad/scripts/xxx-patchtrack/config/application.rb:7:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:25:01.740

尝试使用 ssl 支持重建 ruby​​：

```
port install openssl +universal
rvm install 1.9.2 --with-openssl-dir=/opt/local 
```

# svg - 苹果触摸图标 svg 支持

> ID：15710047
> 
> 赞同：26
> 
> 时间：2013-03-29T19:20:46.233
> 
> 标签：svg, apple-touch-icon

是否可以（或很快支持）用单个 SVG 替换所有触摸图标？

所以，而不是；

```
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png"> 
```

...只是一个;

```
<link rel="apple-touch-icon" href="/apple-touch-icon.svg"> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-01T11:41:16.617

不幸的是，iOS 目前不支持 SVG 图标。而且它可能不会很快得到支持。安卓也不支持。

**更新：**
看起来 Safari 开始支持 SVG favicon

见： [http ://caniuse.com/#feat=link-icon-svg](http://caniuse.com/#feat=link-icon-svg)

要为 Safari 中的固定选项卡添加 svg 图标，您需要添加：

```
<link rel="mask-icon" href="website_icon.svg" color="red"> 
```

# objective-c - 如何从填充的 html 表单将数据发送到第二个视图控制器？

> ID：15710048
> 
> 赞同：0
> 
> 时间：2013-03-29T19:20:47.637
> 
> 标签：objective-c, web-services, webview, storyboard

我已经解决这个问题几天了，这让我完全发疯了。我正在使用故事板。

我有带有 webview 的 viewcontroller1。webview 填充一个 html 登录表单，通过一个 textField（用户名）另一个 textField（密码），然后一个按钮（提交），它完美地工作：一旦按下按钮，html 表单就会填充我的 textFields 输入。填写并提交表单后，我希望将用户发送到具有 web 视图的新视图控制器 (viewController2)，我想用网站中的一些内容填充该视图控制器。对于世界，我无法找出如何将用户发送到下一个视图。

另一个细节是登录 html 表单有一个用户类型选择。因此，提交按钮发送给我的地址可能不同。如果是老师填写表格，则返回的地址将类似于“myschool/jsp/teacher/right_teacher_lesson_status.jsp”，如果是学生，则为其他地址，如果来自另一所学校，则为其他地址。

这是我试图将用户发送到包含 UIwebview2 的下一个视图的代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request  navigationType: 
(UIWebViewNavigationType)navigationType
{

  if (navigationType == UIWebViewNavigationTypeFormSubmitted) {
  UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
  ViewController2 *vc = [storyboard instantiateViewControllerWithIdentifier:@"webview2"];
  NSLog(@"Allow navigation to request = %@", request);

  [self.navigationController pushViewController:vc animated:YES];

  return YES;

} 
```

NSLog 告诉我

> “允许导航请求：/myschool/jsp/teacher/right_teacher_lesson_status.jsp”

因此，如果我告诉 webview2 地址，它肯定会接收到它。但由于我不知道它是哪所学校或用户类型，我希望 webview2 从上面的代码中接收到它。请帮我。如何将信息传递到下一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:14:20.990

我建议创建一个包含两个文本字段和一个选择器菜单的视图。这比网络视图好得多。如果您无法以漂亮的方式显示结果内容，您可以使用 Web 视图，但您应该尽可能使用自定义视图优化用户体验。

一旦你有 UIKit 元素来捕获数据，将它传递给下一个视图控制器将是微不足道的。

话虽如此：

也许这确实是 HTML 编码的问题。您的“提交”按钮可以在 URL 中包含参数（GET 而不是 POST）。然后，您可以简单地将 URL 传递给您的下一个视图控制器。

```
vc2.urlToLoad = request; 
```

由于您没有显示 URL，因此 get 变量无论如何都不会暴露给用户。由于您的服务器可以解释参数，因此您甚至不必在第二个视图控制器中解析它们（尽管如果您需要它们用于其他目的，您可以这样做）。

# backbone.js - 带有requirejs的骨干 - 传递给视图时“模型未定义”

> ID：15710055
> 
> 赞同：3
> 
> 时间：2013-03-29T19:21:16.383
> 
> 标签：backbone.js, requirejs

从另一个视图中渲染视图时，我收到一个 JS 错误“未捕获的 ReferenceError：模型未定义”。

我有一个列表视图：

```
define([
    'jquery', 
    'backbone',
    'underscore',
    'views/action',
    'collections/actionlist',
    'text!templates/actionlist.html'],

function($, Backbone, _, actionView, actionList, template){

var someactions = [
    { the_action: "Contact 1", due: "1, a street, a town, a city, AB12 3CD", list: "0123456789" },
    { the_action: "Contact 2", due: "1, a street, a town, a city, AB12 3CD", list: "0123456789" },
    { the_action: "Contact 3", due: "1, a street, a town, a city, AB12 3CD", list: "0123456789" }
];

var actionlistView = Backbone.View.extend({

    el: '#main',
    template: _.template(template),

    initialize: function () {
        this.collection = new actionList(someactions);            
        this.collection.on("add", this.renderAction, this);
    },

    events: {
        "click #add": "addAction"
    },

    render: function () {
        var $el = $('#main')

        $el.html(this.template);

        // Get Actions
        _.each(this.collection.models, function (action) {
            this.renderAction(action);
        }, this);

    },

    renderAction: function (action) {
        var theAction = new actionView({ model: action });
        $('#actionlist').append(theAction.render().el);
    },

    addAction: function(e){
        e.preventDefault();
        var formData = {};

        $('#addAction').children("input").each(function(i, el){
            if ($(el).val() !== "") {
                formData[el.id] = $(el).val();
            }
        });

        this.collection.create(formData);
    }
});

return actionlistView;
}); 
```

这个在 renderAction 函数中调用的 actionView 是：

```
define([
    'jquery', 
    'backbone',
    'underscore',
    'models/action',
    'text!templates/action.html'], 

function($, Backbone, _, actionModel, template){

var actionView = Backbone.View.extend({
    tagname: 'li',
    template: _.template(template),

    render: function () {
        this.$el.html(this.template(this.model)); // ERROR OCCURS ON THIS LINE
        return this;
    }
});

return actionView;
}); 
```

我在“this.$el.html(this.template(this.model));”这一行得到错误 尝试渲染第一个 actionView 时。

我难住了！！我错过了什么？

按要求操作视图模板：

```
 <b class="name"><%=model.get("the_action")%></b> - <%=model.get("due")%> - 
    <em>from <%=model.get("list")%></em> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:45:40.493

您最好在模板中调用 model.toJSON() 并在模板中引用 json。

由此：

```
this.$el.html(this.template(this.model)); 
```

对此：

```
this.$el.html(this.template(this.model.toJSON())); 
```

然后直接在模板中引用'due'和'list'：

```
<b class="name"><%=the_action%></b> - <%=due%> - 
    <em>from <%=list%></em> 
```

# php - 立即或在填写表格后将条目添加到数据库中

> ID：15710056
> 
> 赞同：1
> 
> 时间：2013-03-29T19:21:17.453
> 
> 标签：php, mysql, web-applications

我正在开发一个允许在数据库中维护组织成员的 PHP/MySQL 应用程序。目前，在单击“添加成员”跨度时，我在数据库中插入一个空白条目并将创建的 ID 返回给 PHP。收到有效 ID 后，应用程序用户将通过 jQuery 重定向到引用新创建成员的编辑页面。

据我所知，这有以下优点/缺点：

*好处*

*   可以在提交 jQueryUI 对话框时立即将购买/付款与成员关联，因为我已经有了该成员的 ID。
*   统一了原本是单独的添加/编辑屏幕，因此更易于维护。

*缺点*

*   我很有可能会有过时的条目。也就是说，有人可以多次单击“添加成员”而不保存新页面，从而导致条目保持空白。
*   无法在表中强制执行尽可能多的约束，因为我需要能够为所有列接受 NULL。

我是否在考虑所有场景/优点/缺点？我应该为添加成员创建一个单独的页面，还是接受过时的条目更好，并且在我获取所有成员时可能添加一些检查以确保我没有显示过时的条目？

我目前用于添加成员的数据库功能：

```
public static function addMember()
{
    $q = 'INSERT INTO ' . MemberTable::TABLE_NAME
            . ' (' . MemberTable::ID
            . ') VALUES (null)';
    try
    {
        $db = new DBConnection();
        $toRet = $db->execute($q);
    }
    catch(Exception $e)
    {
        error_log($e->getMessage());
        $toRet = -1;
    }
    if($toRet > 0)
    {
        DBSystemEvent::logMessage("Added new member with ID $toRet");
    }
    unset($db);
    return $toRet;
} 
```

**编辑1：**重读问题后，我需要澄清第一段中提到的成员和用户是不同的。用户是指登录到应用程序的人。会员无法登录应用程序。这类似于医院应用程序（患者不能登录或编辑自己的信息；只有护士或医生等应用程序用户才能登录和编辑信息）。

**编辑 2：**虽然给定的答案都不完全适合我的问题（因为我可能不得不在不知道 ID 的情况下插入数据库），但我决定根据我的问题的措辞接受一个答案（因为让它更具体可能进入过于本地化的领域）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:11:57.383

It's a common problem - you need to know the ID before INSERT, but it's known only after. So there is only one adequate solution: use GUID ([http://en.wikipedia.org/wiki/Globally_unique_identifier](http://en.wikipedia.org/wiki/Globally_unique_identifier)) instead of autoincrement ID. Generate guid from PHP code, for example `com_generate_guid()`, and do not preINSERT empty rows at all. And make relations between tables with GUID fields.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:44:36.300

我有点不清楚您网站的工作流程到底是什么。如果用户来到你的页面，那么我假设他必须从你获得他的 ID 的地方登录。如果他是新用户，那么他将被重定向到 userdata.php?id=0 ，在那里他输入他的数据。提交后，您应该检查 $id=0 以及具有相同用户名/id/.. 的用户是否存在（SELECT... WHERE ID=xxx）并警告用户更改他的用户名。如果未找到匹配项，则可以执行 INSERT 并获取新 ID。

如果将来用户想要更改他的数据，那么在登录后您可以将他定向到 userdata.php?id=123（其中 123 是他的 ID）。然后你可以检查 $id>0 并进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:41:24.327

如果可以，请切换到 postgresql。这将允许您使用序列为您提供唯一 ID，而无需在数据库中输入空实体。有趣的是，我的一个客户正在使用您选择的相同方法，到目前为止，这会导致大量维护和工作负载开销来清除数据库中的空条目。

如果您不能使用提供序列的数据库，请考虑使用其他空表，该表仅以原子方式为您提供唯一 ID。这样你就可以开始使用 id 在客户端准备关系，然后在最终创建成员时将它们批量输入到数据库中。

# javascript - JQuery 验证插件错误放置不起作用

> ID：15710057
> 
> 赞同：0
> 
> 时间：2013-03-29T19:21:20.397
> 
> 标签：javascript, jquery, validation, twitter-bootstrap, jquery-validate

我使用 JQuery 验证器插件验证表单。但是，我想将错误输出放在特定位置。我尝试了[验证器文档中的错误放置](http://docs.jquery.com/Plugins/Validation/validate#toptions)

```
<div class="form_errors"><!--HERE SHOULD THE ERROR GO --></div>
                            <div class="form_holder_invitee" >
                                <form class="homepage_invitee_form" id="homepage_invitee_form" action="add" method="get">
                                    <input name="email" placeholder="Email Address"
                                        id="email_address_new" type="text placeholder"> <br>
    ... 
```

我的验证脚本是：

```
$(document).ready(function(){

    $('#homepage_invitee_form').validate({
        rules: {
            firstName: {
                minlength: 2,
                required: true
            },
            email: {
                required: true,
                email: true
            },
            lastName: {
                minlength: 2,
                required: true
            }
        },
        errorPlacement: function(error, element) {
            error.appendTo( element.parent(".form_errors") );
        },
        debug:true

    });

}); // end document.ready 
```

我想将错误放入`<div class="form_errors">`. 但是，当我提交表单时没有任何反应。

有任何想法吗？

PS.：我也试过那个链接：

[jQuery验证错误位置](https://stackoverflow.com/questions/785361/jquery-validation-error-position)

但是，也不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:42:02.543

问题是您的选择器和使用`.parent()`. 将您的更新`errorPlacement`为以下内容，它将起作用。[请参阅此小提琴](http://jsfiddle.net/7tD5z/)以查看它的工作原理。

```
errorPlacement: function(error, element) {
    console.log(element);
    element.closest(".form_holder_invitee").prev().append(error);
}, 
```

# c# - 是否可以编译 C# 程序以在 Android 手机上运行？

> ID：15710064
> 
> 赞同：2
> 
> 时间：2013-03-29T19:22:19.417
> 
> 标签：c#, android

我有一些用 C# 编写的基本代码。是否可以在几乎没有代码更改的情况下为 Android 编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:24:50.693

## 是的，您可以为安卓开发应用程序！

1.  [Xamarin For Android](http://android.xamarin.com/) - 不是免费产品，提供全功能试用版。
2.  [Dot42](http://www.dot42.com/) - 不可免费用于商业用途。

你可以使用它们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:25:15.353

您需要使用[Xamarin](http://xamarin.com/)（以前称为 MonoTouch）之类的东西。

# java - 自定义 IDResolver 获取错误的目标类型

> ID：15710067
> 
> 赞同：0
> 
> 时间：2013-03-29T19:22:32.823
> 
> 标签：java, jaxb, unmarshalling

我写了这个自定义 IDResolver：

```
final class MyIDResolver extends IDResolver {

    Map<String, Course> courses = new HashMap<>();

    /**
     * @see com.sun.xml.bind.IDResolver#bind(java.lang.String, java.lang.Object)
     */
    @Override
    public void bind(String id, Object obj) throws SAXException {
        if (obj instanceof Course)
            courses.put(id, (Course)obj);
        else
            throw new SAXException("This " + obj.toString() + " cannot found");
    }

    /**
     * @see com.sun.xml.bind.IDResolver#resolve(java.lang.String, java.lang.Class)
     */
    @Override
    public Callable<?> resolve(final String id, final Class targetType) throws SAXException {
        return new Callable<Object>() {
            @Override
            public Object call() throws Exception {
                if (targetType == Course.class)
                    return courses.get(id);
                else
                    throw new ClassNotFoundException(targetType.toString() + " cannot found");
            }
        };
    }
 } 
```

我有两个课程，例如：

```
@XmlRootElement(name = "course")
public class Course {
    @XmlID
    @XmlAttribute
    private String id;

    @XmlAttribute
    private int units;

    @XmlAttribute
    private Level level;

    @XmlAttribute
    private String name;

    @XmlIDREF
    @XmlElement(name = "pre")
    private ArrayList<Course> prerequisite;

    @XmlIDREF
    @XmlElement(name = "co")
    private ArrayList<Course> corequisite;
}

@XmlRootElement(name = "dept")
@XmlAccessorType(XmlAccessType.FIELD)
public final class Department {
    @XmlAttribute
    private String name;

    @XmlElementWrapper(name = "courses")
    @XmlElement(name = "course")
    private ArrayList<Course> courses;
} 
```

像这样的示例 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<dept name="ece">
    <courses>
    <course id="1" units="4" level="UNDERGRADUATE" name="Fundamentals of Programming"/>
    <course id="2" units="3" level="UNDERGRADUATE" name="Advanced Programming">
        <pre>1</pre>
    </course>
    </courses>
</dept> 
```

还有一个像这样的简单主要内容：

```
unmarshaller.unmarshal(new FileReader(arg0))
context = JAXBContext.newInstance(Department.class);
unmarshaller = context.createUnmarshaller();
unmarshaller.setProperty(IDResolver.class.getName(), new MyIDResolver()); 
```

自定义 IDResolver 的 resolve() 方法将 Object.class 作为 targetType。但它应该是 Course.class。这会导致错误的 ID 解析。我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:17:01.367

当 Department 包含课程时，您不应使用 IDResolve。当部门想要参考课程时，应该使用它。因此，由于这个原因，当 jaxb 到达一个部门内部的课程时，它包含一个元素（此处为 <pre>），它会将*object.class*传递给您的 resolve 函数。

# python - 查找具有属性的最近节点

> ID：15710068
> 
> 赞同：1
> 
> 时间：2013-03-29T19:22:34.317
> 
> 标签：python, networkx

我有一个大型 networkx 网络，我想在其中找到属性设置为 True 的最近节点（按边权重，递归地）。我可以在不循环节点的情况下做到这一点吗？

# oracle - oracle执行update in语句的顺序是什么？

> ID：15710071
> 
> 赞同：1
> 
> 时间：2013-03-29T19:22:47.837
> 
> 标签：oracle, sql-update, deadlock

我试图解决两个进程之间的死锁问题，方法是确保它们按顺序锁定数据库行，以便一个可以先于另一个完成。

为此，我试图确定 Oracle 如何处理此语句：

```
update table_a
  set col_2 = 'hello'
  where col_1 in (1,2,3,4,5,6,7,8,9,10); 
```

执行此语句时，Oracle 以什么顺序锁定和更新行？如果你能指出如何确定这一点的方向，我很乐意自己做。

我发布这个问题是因为我没有在我的谷歌搜索或本网站的其他地方找到答案，当然。

# c++ - 如何检测分配给 size_t 的负数？

> ID：15710072
> 
> 赞同：17
> 
> 时间：2013-03-29T19:22:54.060
> 
> 标签：c++, signed, size-t

此声明在 g++ -pedantic -Wall（版本 4.6.3）中编译时没有警告：

```
std::size_t foo = -42; 
```

不太明显的虚假是用 size_t 参数声明一个函数，并用一个负值调用它。这样的函数能否防止无意的否定论点（显示为无数的 quintillion，遵守 §4.7/2）？

不完整的答案：

只需将 size_t 更改为 (signed) long 就会放弃 size_t 的语义和其他优点。

将其更改为 ssize_t 仅仅是 POSIX，而不是标准。

将其更改为 ptrdiff_t 很脆弱，有时会损坏。

测试大值（高位设置等）是任意的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:52:37.880

对此发出警告的问题在于，根据标准，它不是未定义的行为。如果将有符号值转换为相同大小的无符号类型，则可以稍后将其转换回有符号值并在任何符合标准的编译器上获取原始值。

此外，对于各种错误情况，使用转换为 size_t 的负值是相当普遍的做法——许多系统调用返回一个无符号 (`size_t`或`off_t`) 值表示成功或返回 -1（转换为无符号）表示错误。因此，向编译器添加这样的警告会导致许多现有代码出现虚假警告。POSIX 尝试将其编码为`ssize_t`，但这会破坏可能成功的调用，其返回值大于 的最大有符号值`ssize_t`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-18T17:37:11.367

以下摘录来自私人图书馆。

```
#include <limits.h>

#if __STDC__ == 1 && __STDC_VERSION__ >= 199901L || \
    defined __GNUC__ || defined _MSC_VER
    /* Has long long. */
    #ifdef __GNUC__
        #define CORE_1ULL __extension__ 1ULL
    #else
        #define CORE_1ULL 1ULL
    #endif
    #define CORE_IS_POS(x) ((x) && ((x) & CORE_1ULL << (sizeof (x)*CHAR_BIT - 1)) == 0)
    #define CORE_IS_NEG(x) (((x) & CORE_1ULL << (sizeof (x)*CHAR_BIT - 1)) != 0)
#else
    #define CORE_IS_POS(x) ((x) && ((x) & 1UL << (sizeof (x)*CHAR_BIT - 1)) == 0)
    #define CORE_IS_NEG(x) (((x) & 1UL << (sizeof (x)*CHAR_BIT - 1)) != 0)
#endif

#define CORE_IS_ZPOS(x) (!(x) || CORE_IS_POS(x))
#define CORE_IS_ZNEG(x) (!(x) || CORE_IS_NEG(x)) 
```

This should work with all unsigned types.

# java - 如何访问 Jtree 中的子节点

> ID：15710078
> 
> 赞同：0
> 
> 时间：2013-03-29T19:23:30.547
> 
> 标签：java, swing, netbeans, jtree

任何人都可以帮助我，我有 Jtree 和子节点，我想单击子节点并在使用 netbeans 的 java 中显示一个窗口窗体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:41:36.047

您可以通过使用树选择侦听器来实现此目的。查看[如何使用树](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)教程。特别是，[响应节点选择](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#select)部分描述了如何实现一个基本的选择监听器。

# jsf - 如何在单击消息的任意位置时关闭 GROWL 消息？（JSF，Primefaces）

> ID：15710079
> 
> 赞同：4
> 
> 时间：2013-03-29T19:23:36.323
> 
> 标签：jsf, user-interface, primefaces, growl

**如果用户单击消息上的***任意位置* ，我需要关闭 UI 中的咆哮消息。

 **这是必需的，因为用户很难找到 Primefaces 中默认咆哮消息的关闭按钮。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T21:31:56.640

如何通过 CSS 解决它：

```
.ui-growl-icon-close {
width: 100%;
height: 100%;
background-image: none!important;
} 
```

把它放到你的 CSS 文件中。**

# google-maps - Google Maps v3 - Infowindow 始终假定最后一个标记的位置

> ID：15710085
> 
> 赞同：1
> 
> 时间：2013-03-29T19:24:07.817
> 
> 标签：google-maps, infowindow

我遇到了我的 infowindows 位置的问题。我在 for 循环中生成标记，但是当我单击信息窗口时，位置始终设置为最后生成的标记。不过内容是对的。这绝对是一个范围界定问题，还有一个 Drupal Ajax 调用可以获取内容（不包含任何位置信息）。任何人都可以帮忙吗？这是for循环：

```
for ( markerItem in data ) {

    var icon = icons[data[markerItem][3]].mouseOutIcon;
    var image = icons[data[markerItem][3]].mouseOverImage;
    var latlng = new google.maps.LatLng( data[markerItem][0], data[markerItem][1] );
    var marker = new google.maps.Marker({
                            icon:icon,
                            clickable:true,
                            position: latlng,
                            map: map,
                            draggable:false,
                            title: data[markerItem][2]

    });

    marker.mapid = mapid;
    marker.mid = data[markerItem][4];

    google.maps.event.addListener(marker,'click',function(latlng) {

        $.get('/map-info/'+this.mapid+'/'+this.mid, null, function(response) {
            console.log('first' + marker.getPosition());
            var result = Drupal.parseJson(response);
            if ( result.status == 0 ) {

                if(infowindow != null) {
                    infowindow.close();
                }

                infowindow = new google.maps.InfoWindow({
                    content: result.html
                    //position: marker.getPosition()

                });

                infowindow.open(map,marker);

            }
        });

        google.maps.event.addListener(marker, 'mouseover', function(latlng) {
            this.setImage( this.mouseOverImage );

        });
        google.maps.event.addListener(marker, 'mouseout', function(latlng) {
            this.setImage( this.mouseOutImage );
        });

    });

    marker.mouseOverImage = image;
    marker.mouseOutImage = icon.image;
    gmap.overlays.push( marker );
    marker.setMap(map);

    if ( checkboxState[data[markerItem][3]] ) {
        marker.setMap(map);
    }
    else {
        marker.setMap(null);
    }
}
});
}
else {
console.log('inside else');

var lat3 = gmap.oldBounds.getSouthWest().lat();
var lng3 = gmap.oldBounds.getSouthWest().lng();
var lat4 = gmap.oldBounds.getNorthEast().lat();
var lng4 = gmap.oldBounds.getNorthEast().lng();
$.get('/map-markers/'+mapid+'/'+lat1+'/'+lng1+'/'+lat2+'/'+lng2+'/'+lat3+'/'+lng3+'/'+lat4+'/'+lng4, null, function(response) {
var result = Drupal.parseJson(response);
var data = result.markers;
for ( var i = 0; i < 4; i++ ) {
    icons.push( { mouseOutIcon: Drupal.gmap.getIcon('boilers', i), mouseOverImage: mouseOverImage(Drupal.gmap.getIcon('boilers', i).image)});
}
var gmap = Drupal.gmap.getMap(mapid);
for ( markerItem in data ) {
    var icon = icons[data[markerItem][3]].mouseOutIcon;
    var image = icons[data[markerItem][3]].mouseOverImage;
    var latlng = new GLatLng( data[markerItem][0], data[markerItem][1] );
    var marker = createMarker(latlng, {icon: icon, title:data[markerItem][2], clickable:true, draggable:false }, data[markerItem][4] );
    marker.mouseOverImage = image;
    marker.mouseOutImage = icon.image;
    gmap.overlays.push( marker );
    map.addOverlay( marker );
    if ( checkboxState[data[markerItem][3]] ) {
        //marker.show();
    }
    else {
        //marker.hide();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T12:17:42.730

你必须***使用闭包***来解决这个问题。

工作示例中的以下内容

使用下面代码中的 JS 方法***AddInfoWidnow***将 InfoWindow 添加到标记。

```
function AddInfoWidnow(marker,message)
{
     var infowindow = new google.maps.InfoWindow({ content: message });

     google.maps.event.addListener(marker, 'click', function() {

     infowindow.open(marker.get('map'), marker);

    }); 

} 
```

在 for 循环中调用***AddInfoWidnow***方法

```
function ShowOnMap(ContainerId, mapItems) {

var DefaultLatLng= new google.maps.LatLng('12.967461', '79.941824');

var mapOptions = {
    center: DefaultLatLng,
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    marker: true
};

var mapCust = new google.maps.Map(document.getElementById(ContainerId), mapOptions);

var arrJsonObject = JSON.parse(mapItems);

for (var y = 1; y <= arrJsonObject.length; y++) 
{

    var myLatLng1 = new google.maps.LatLng(arrJsonObject[y - 1].Latitude, arrJsonObject[y - 1].Lonngitude);

    var marker = new google.maps.Marker({
    position: myLatLng1,
    map: mapCust,
    title: 'Marked at '+ arrJsonObject[y - 1].markedDate
});

    addInfoWindows(marker,y-1,arrJsonObject);

    marker.setMap(mapCust);

}
} 
```

使用下面的片段我称之为。

```
 var mapItems='[
  {
    "Latitude": "22.575897",
    "Lonngitude": "88.431754",
    "CustomerCode": "*$$$*",
    "CustomerName": "*@@@*",
    "markedDate": "2/20/2014 12:04:41 PM"
  },
  {
    "Latitude": "22.615067",
    "Lonngitude": "88.431759",
    "CustomerCode": "*$$$*",
    "CustomerName": "*@@@*",
    "markedDate": "2/20/2014 3:02:19 PM"
  }
]';
    ShowOnMap(containerId2, mapItems); 
```

问题是您必须使用关闭添加信息窗口，这对我有用。

[参考](https://developers.google.com/maps/documentation/javascript/examples/event-closure)

# unicode - How do I use length() for unicode characters?

> ID：15710089
> 
> 赞同：3
> 
> 时间：2013-03-29T19:24:25.153
> 
> 标签：unicode, moovweb, tritium

When working in the Moovweb SDK, `length("çãêá")` is expected to return `4`, but instead returns 8\. How can I ensure that the `length` function works correctly when using Unicode characters?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:33:49.137

This is a common issue with Unicode characters and the `length()` function using the wrong character set. To fix it you need to set the `charset_determined` variable to make sure the correct character set is being used before making the call to `length()`, like so in your tritium code:

```
$charset_determined = "utf-8"
# your call to length() here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T13:14:07.977

In Unicode, there is no such thing as a length of a string or "number of characters". All this comes from ASCII thinking.

You can choose from one of the following, depending what you exactly need:

*   对于光标移动、文本选择等，应使用字素簇。

*   为了限制输入字段、文件格式、协议或数据库中字符串的长度，长度以某种预定编码的代码单元来衡量。原因是任何长度限制都源自为较低级别的字符串分配的固定内存量，无论是在内存、磁盘还是在特定的数据结构中。

屏幕上显示的字符串大小与字符串中的代码点数无关。为此，必须与渲染引擎进行通信。即使在等宽字体和终端中，代码点也不占用一列。POSIX 考虑到了这一点。

[http://utf8everywhere.org](http://utf8everywhere.org)中有更多信息

# c# - 对象实例化后是否可以立即调用方法？

> ID：15710090
> 
> 赞同：1
> 
> 时间：2013-03-29T19:24:30.293
> 
> 标签：c#

```
public class Foo
{
    public Foo(){ }

    //One of many properties 
    //set up in the same way
    private String _name;
    public String Name 
    { 
        get { return _name; }
        set {
            _name = value;
            //code that is important to run
            //only after the objects initial creation   
        }
    }

    private int _id;
    public int ID 
    { 
        get { return _id; }
        set {
            _id = value;
            //code that is important to run
            //only after the objects initial creation   
        }
    }

    public void Win()
    {
        //clean up method that wouldn't be needed
        //if I used optional parameters because
        //i would be able to set _name (and all the
        //other private properties directly without
        //using the public Set
    }
} 
```

在c#中创建这种对象后如何自动调用方法

```
Foo ko = new Foo() {
    ID = 4,
    Name = "Chair"
};
ko.Win(); // <-- Want this to be called automatically inside the class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:42:33.173

在设置了一些随机属性集后，没有自动调用的方法（初始化被转换为......）

```
var foo = new Foo { Name = "bar" }; 
```

实际上是快捷方式：

```
var foo = new Foo();
foo.Name = "bar"; 
```

当以第二种形式编写时，人们不会期望在`foo.Name`赋值后调用任何神奇的方法。

您的选择：

*   如果您有一些需要在属性更改时设置的信息 - 只需将其设为属性并在其中编写代码即可`set`。
*   如果您必须在对象被视为“已创建”构造函数参数之前配置特定的一组属性，这是一种合理的强制执行方式。
*   您还可以实现允许您延迟最终构造的[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)（或使用其他一些在最终对象创建之前强制设置参数的工厂方法。

具有构建器模式的代码示例：

```
 var foo = new FooBuilder { Name = "bar" }
    .Build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:25:52.883

将 Win() 添加到构造函数。调用/放入构造函数中。

```
public Foo(string value, string value2) {
Value = value;
Value2 = valu2e;

Win();
} 
```

这是构造函数。手动设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:39:47.660

那么如果你总是设置 ID 和名称呢？

```
private string _Name;

    public string Name
    {
        get { return _Name; }
        set {
            _Name = value;
            this.Win();
        }
    } 
```

在您为名称设置值后，将始终调用 Win 函数，或者您可以为您选择的 ID 执行此操作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:42:55.513

不是最具可扩展性的解决方案，但为什么不试试这个：

```
public class Foo
{
    public int ID { get; set; }
    public String Name { get; set; }

public Foo()
{
}

public Foo( int id )
{
// Win()
ID = id;
// Win()
}

Public Foo( string name )
{
// Win()
Name = name;
// Win()
}

public Foo( int id, string name )
{
// Win()
ID = id;
Name = name;
// Win()
}

    public void Win()
    {
        //Do Stuff that would go into the constructor
        //if I wanted to use optional parameters
        //but I don't
    }
} 
```

您可以`Win`在设置属性之前或之后调用。

# javascript - JSON 性能 - 多文件与长单文件

> ID：15710097
> 
> 赞同：2
> 
> 时间：2013-03-29T19:24:54.523
> 
> 标签：javascript, json

我的应用程序必须下载并读取大量最初存储在数据库中的数据。我无法确定是否最好将每个表拆分为它自己的 JSON 文件，或者是否应该将所有数据打包到一个 JSON 文件中。几十个文件的下载时间会更长，但单个文件的解析时间会更长。答案可能更多的是意见而不是事实，但我认为值得利用 SO 获得洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:53:16.530

用户将从小块中受益，因为它们可以一次显示一个，从而在可用时立即向用户提供信息。如果您有大量数据要解析，用户可能需要很长时间才能停留，或者至少会因为您的网站太慢而造成一些烦恼。

我认为 JSON.parse(..) 的复杂度为 O(n)，因此无论您选择一次解析还是分块解析，总时间应该非常相似。由于我找不到任何关于实际实现的算法的信息，所以我编写了一个小型模拟，指出块实际上稍微快了一点。

**谷歌浏览器**

迭代=1000，数据大小=100000，块=1000：大数据=3115，**小数据=2331**

迭代=1000，数据大小=100000，块=100：大数据=3218，**小数据=2579**

```
<body>
    <div id="resultBigData"></div>
    <div id="resultSmallData"></div>

    <script type="text/javascript">
        // Parameters
        var simulationIterations = 500;
        var sizeOfData = 100000;
        var smallDataChunk = 100;

        // Create data to use in the simulation.
        var bigDataArray = new Array();
        for (var indexBigData = 0; indexBigData < sizeOfData; ++indexBigData) {
            bigDataArray.push(indexBigData);
        }

        var smallDataArray = new Array();
        for (var indexSmallData = 0; indexSmallData < smallDataChunk; ++indexSmallData) {
            smallDataArray.push(indexSmallData);
        }

        // Create a stringified version of the arrays.
        var jsonBigDataArray = JSON.stringify(bigDataArray);
        var jsonSmallDataArray = JSON.stringify(smallDataArray);

        // Run a timed simulation with the bigData array.
        var startTimestampBigDataArray = new Date().getTime();
        for (var indexIterationBigData = 0; indexIterationBigData < simulationIterations; ++indexIterationBigData) {
            JSON.parse(jsonBigDataArray);
        }
        document.getElementById('resultBigData').innerHTML = '<p><b>BigData:</b> ' + ((new Date().getTime()) - startTimestampBigDataArray) + '</p>';

        // Run a timed simulation with the smallData array.
        var startTimestampSmallDataArray = new Date().getTime();
        for (var indexIterationSmallData = 0; indexIterationSmallData < simulationIterations; ++indexIterationSmallData) {
            for (var indexIterationSmallDataCompensation = 0; indexIterationSmallDataCompensation < (sizeOfData / smallDataChunk); ++indexIterationSmallDataCompensation) {
                JSON.parse(jsonSmallDataArray);
            }
        }
        document.getElementById('resultSmallData').innerHTML = '<p><b>SmallData:</b> ' + ((new Date().getTime()) - startTimestampSmallDataArray) + '</p>';
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:45:50.323

我假设您在谈论网页中的客户端javascript？如果是这样，多个文件可能会更好，因为您可以分块处理它们，避免浏览器警告您的脚本花费太长时间。但正如昆汀评论的那样，您可能会发现性能甚至不是问题。

# php - 是否有 PHP 函数可以将月份数字转换为本地化名称？

> ID：15710100
> 
> 赞同：0
> 
> 时间：2013-03-29T19:25:05.910
> 
> 标签：php, class

是否有 PHP 函数可以将月份数字转换为本地化月份名称？

我目前的解决方案如下，但我觉得有更好的方法。

```
class num2month {
    static function month($num){
        $m = array(1=>"Январь",
                    2=>"Февраль",
                    3=>"Март",
                    4=>"Апрель",
                    5=>"Май",
                    6=>"Июнь",
                    7=>"Июль",
                    8=>"Август",
                    9=>"Сентябрь",
                    10=>"Октябрь",
                    11=>"Ноябрь",
                    12=>"Декабрь");
        return $m[$num];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:27:27.477

你可以做：

```
echo date('F', mktime(0, 0, 0, $month, 1, date('Y'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:31:35.553

例如：$m = 1；$month = date("F", mktime(0, 0, 0, $m, 10));

$month == "January"，但您仍然需要在数据库中提供一些翻译数组或表格以翻译成所需的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:42:56.033

您的代码运行良好。看到这个 php fiddle（点击运行）[http://phpfiddle.org/main/code/6v6-iuz](http://phpfiddle.org/main/code/6v6-iuz)

```
<?php
$test = new num2month;
$test->month(3);
class num2month {
    function month($num) {
        $m = array(1=>"Январь",
                    2=>"Февраль",
                    3=>"Март",
                    4=>"Апрель",
                    5=>"Май",
                    6=>"Июнь",
                    7=>"Июль",
                    8=>"Август",
                    9=>"Сентябрь",
                    10=>"Октябрь",
                    11=>"Ноябрь",
                    12=>"Декабрь");
        echo $m[$num];
    }
}
?> 
```

# jquery - jquery validate 不发送表单

> ID：15710102
> 
> 赞同：0
> 
> 时间：2013-03-29T19:25:18.707
> 
> 标签：jquery, forms, jquery-validate

我正在使用 Jquery validate 插件来验证表单，验证一切都很好我的问题出在 submitHandler 函数中，由于某种原因我没有得到没有将表单发送到我的邮件，我检查了 php 并且完全美好的。这是我正在做的更完整的文件[http://jsfiddle.net/KszmV/](http://jsfiddle.net/KszmV/)

我需要做的其他事情，我不知道该怎么做，它是如何提交表单而不再次加载页面并在表单末尾显示一条消息

这是我的脚本

```
<script type="text/javascript">
    $(document).ready(function(){

        $("#contactusform1").validate({
            rules: {
                "name": {
                    required: true,
                    minlength: 3
                },
                "phone":{
                    required:true,
                    digits:true
                },
               "email":{
                    required: true
                }

            },
            messages: {
                "name": {
                    required: "Please enter a name"
                },
                "phone":{
                    required: "Please provide a contact number"
                },
                "email":{
                    required: "Enter a valid email"
                }
            },
            errorPlacement: function(error, element) {
                error.insertAfter(element);
            },

            submitHandler: function (form) {    

                $.ajax({ 
                    type: 'POST', 
                    data: $('form').serialize(),
                    url: 'process-contact1.php', 
                    success: function () {

                    }                        

                });

                form.submit();
            }           

        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:05:06.380

你有几个问题

```
submitHandler: function (form) {    
    $.ajax({ 
        type: 'POST', 
        data: $(form).serialize(), // $(form) is ok here
        url: 'process-contact1.php', 
        success: function () {
        }                        
    });
    form.submit();  //<-- REMOVE this
    return false; //<-- ADD this
} 
```

**演示：http: [//jsfiddle.net/Y8cHm/](http://jsfiddle.net/Y8cHm/)**

*   删除`form.submit()`，因为插件已经在处理这个问题。

*   你需要一个`return false`，`submitHandler`因为你正在做`ajax`，否则你会得到一个正常的提交/页面刷新。

*   [您的 jsFiddle](http://jsfiddle.net/KszmV/)缺少`</form>`标签。

*   [您的 jsFiddle](http://jsfiddle.net/KszmV/)链接到插件的[gitHub 页面](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js)而不是[CDN。](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js)

*   `$(form).serialize()`完全可以接受，如上面工作演示中所示。使用引号，`$('form')`只需定位`<form>`页面上的任何内容。而目标是与已经传递给您的函数 `$(form)`的表单元素相同。*在您的演示中，它们都给出了相同的结果，尽管这可能不适用于所有其他情况。*`.validate()`

# android - 为什么我不能通过 android 中的位置从 gridview 中获取 imageview？

> ID：15710105
> 
> 赞同：0
> 
> 时间：2013-03-29T19:25:33.503
> 
> 标签：android, gridview, imageview

我正在尝试根据它在网格视图中的位置来检索图像视图。

例如：

```
int lastvisibleposition = gridView.getLastVisiblePosition();
    int firstvisibleposition = gridView.getFirstVisiblePosition(); 
```

这给了我两个位置，（例如 0、1）

我认为我可以：

```
gridView.getItemAtPosition(lastvisibleposition) 
```

[" getItemAtPosition](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29) "获取与列表中指定位置关联的数据。

所以我假设我可以将它转换为 ImageView。

```
ImageView imageView = (ImageView) gridView.getItemAtPosition(lastvisibleposition); 
```

但 imageView 为空。我不明白如何弄清楚 gridview 正在返回什么，和/或如何到达 imageview 以便我可以继续。

如何获得实际的图像视图？我正在做这一切，所以我可以在屏幕底部有一个按钮导致对屏幕上“最多”项的操作 - 这是一个垂直滚动画廊，所以如果我可以返回两个图像视图，我可以比较多少每个图像视图实际上都在屏幕上（使用 imageView.getLocationOnScreen(...)）并导致对用户想要的图像执行操作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:22:05.323

在此之前，我个人会检查返回的对象的类型，然后再将其转换为 ImageView：

```
ImageView imageView = (ImageView) gridView.getItemAtPosition(lastvisibleposition); 
```

尝试添加此代码：

```
Object temp = gridView.getItemAtPosition(lastvisibleposition); 
```

调试并检查 temp 的类型以确保它可以转换为 imageview。

# ruby-on-rails - Get db records from today and tomorrow in Rails?

> ID：15710106
> 
> 赞同：0
> 
> 时间：2013-03-29T19:25:37.430
> 
> 标签：ruby-on-rails, ruby

My desired end result is that I want to group events on the events#index page by 3 time periods: Today, Tomorrow and This week. Ideally, it should be sorted by the visitor's time zone, but, the primary use case is EST if that matters.

It's just a fairly simple Rails app that you can check out here: [https://github.com/moizk/events](https://github.com/moizk/events)

I'm fairly new to Rails, so I assume this sort of thing is handled by the Controller, and creating three instance variables instead of:

```
@events = Event.all 
```

It should be something like:

```
@todaysevents = Events.where(some logic in here)
@tomorrowsevents = Events.where(some logic in here) 
```

I just can't figure out what that logic should be.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:31:37.213

I would recommend adding three scopes to the model, replacing `event_start_at` with whatever time field you are using:

```
class Event < ActiveRecord::Base
  scope :today, lambda { where(event_start_at: Time.zone.now.all_day }
  scope :tomorrow, lambda { where(event_start_at: 1.day.from_now.all_day }
  scope :this_week, lambda { where(event_start_at: Time.zone.now.all_week }   
end 
```

And using them in the controller:

```
@events_today = Event.today
@events_tomorrow = Event.tomorrow
@events_this_week = Event.this_week 
```

If you follow Sandi Metz's "one instance variable per action" rule, which I quite like, you might prefer to wrap these events in an object:

```
@events = {
  today: Event.today,
  tomorrow: Event.tomorrow,
  this_week: Event.this_week
} 
```

And then use them in the view like `@events[:today]`, `@events[:tomorrow], @events[:this_week]`.

You could even wrap the hash in an OpenStruct to allow `@events.today`, `@events.tomorrow`, `@events.this_week`, but this is probably well into bike shedding territory.

# merge - 在常见的lisp中合并符号

> ID：15710108
> 
> 赞同：4
> 
> 时间：2013-03-29T19:25:40.360
> 
> 标签：merge, lisp, common-lisp, symbols

我想在列表中插入一个字符。但是，我想将此字符与列表中的最后一个符号合并。使用 appends 和 cons，结果总是两个不同的符号。好吧，我想要一个合并的符号作为我的结果。

例子：

```
 (XXXX 'a '5) ====>  (a5) 
```

我想要的，而不是：

```
 (XXXX 'a '5) ====> (a 5) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T20:25:00.487

您不能在 Lisp 中“合并符号”。

首先，`5`不是一个符号，而是一个数字。如果要命名符号`"5"`，则必须将其键入为`|5|`（例如）。

如果一个函数接受 symbol`A`和 symbol `|5|`，并产生 symbol `A5`，它没有合并符号。它创建了一个新符号，其名称是这些输入符号名称的串联。

正确设计的 Lisp 程序很少依赖于符号的命名方式。它们依赖于作为唯一实体的符号。

如果您使用符号来识别事物，并同时`5`识别`A`某些实体，那么最好的答案不一定是创建一个新符号，至少在名称上，它是这两个符号的混搭。例如，更好的设计可能是接受名称是多方面的或以某种方式复合的。也许该列表`(A 5)`可以用作名称。

Common Lisp 函数本身可以有复合名称。例如`(setf foo)`是一个函数名。像列表这样的聚合可以是名称。

如果您只需要机器在运行时发明独特的符号，请考虑使用该`gensym`功能。您可以将自己的前缀传递给它：

```
(gensym "FOO") -> #:FOO0042 
```

当然，前缀可以是一些现有符号的名称，通过`symbol-name`. 该符号`#:FOO0042`不是唯一的，`0042`因为它是地址空间中新分配的对象。这`#:`意味着它没有被困在任何包中。符号的名称是`FOO0042`。

如果您仍然真的想要，一个简单的方法来获取一堆输入对象的打印表示并将其转换为符号是这样的：

```
(defun mashup-symbol (&rest objects)
  (intern (format nil "~{~a~}" objects))) 
```

例子：

```
(mashup-symbol 1 2 3) -> |123|

(mashup-symbol '(a b) 'c 3) -> |(A B)C3| 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T20:10:24.643

定义这个：

```
(defun symbol-append (&rest symbols) 
  (intern (apply #'concatenate 'string 
                 (mapcar #'symbol-name symbols)))) 
```

然后将其用作：

```
* (symbol-append 'a 'b 'c)
ABC

* (apply #'symbol-append '(a b c))
ABC 
```

如果您希望您的参数包含符号以外的其他内容，请替换`symbol-name`为：

```
 (lambda (x)
     (typecase x ...)) 
```

或预先存在的 CL 函数（我忘记了 :() 将任何内容字符串化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T19:31:08.443

你问的问题的答案是

```
(defun concatenate-objects-to-symbol (&rest objects)
  (intern (apply #'concatenate 'string (mapcar #'princ-to-string objects))))
(concatenate-objects 'a 'b) ==> ab 
```

哦，如果你想要一个*列表*作为结果：

```
(defun xxxx (s1 s2) (list (concatenate-objects-to-symbol s1 s2))) 
```

但是，我很确定这*不是*您真正想问的*问题*。

以编程方式创建新符号不是初学者应该做的事情......

# javascript - 如何在独立（网络应用程序）模式下在移动 Safari 中获得滚动偏移？

> ID：15710110
> 
> 赞同：2
> 
> 时间：2013-03-29T19:25:44.117
> 
> 标签：javascript, mobile-safari

在 iOS 6（和所有其他主要浏览器）上的 Mobile Safari 中，使用`window.pageYOffset`给了我我正在寻找的东西。但是，当我使用独立模式（将书签添加到主屏幕以全屏运行网络应用程序）时，`window.pageYOffset`总是返回 0！在这种情况下如何获得垂直滚动偏移量？

# perl - 如何使用 Net::SSH2 复制文件？

> ID：15710117
> 
> 赞同：2
> 
> 时间：2013-03-29T19:26:02.633
> 
> 标签：perl

在通过 scp/sftp 将 $cmd 输出复制到第二台服务器时需要帮助。我有这个代码；工作正常，但需要很长时间，因为 $ cmd 输出约为 700MB，15000 行。

```
use warnings;
use Net::SSH2;
my ($host, $user, $password, $outfile) = @ARGV;
my $cmd = "show zoneset active";
my $ssh = Net::SSH2->new();
$ssh->connect($host);
$ssh->auth_keyboard($user, $password);
my $channel = $ssh->channel();
$channel->exec($cmd);
open OUTPUT, ">", "$outfile";
while (<$channel>) { print  OUTPUT };
$channel->close;
$ssh->disconnect; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T19:45:11.180

给出一些假设：

1.  每次运行时，输出都会发生一些`show zoneset active`变化，但变化不大
2.  您想多次运行此命令

那么您最好的选择可能是在远程服务器上创建文件，然后使用 rsync（可能与`File::Rsync`）在本地服务器上的现有副本之上获取文件。

来自`man rsync`：

> Rsync 是一种快速且用途广泛的文件复制工具。它可以在本地复制，通过任何远程 shell 复制到另一台主机或从远程 rsync 守护进程复制。它提供了大量选项来控制其行为的各个方面，并允许非常灵活地指定要复制的文件集。它以其增量传输算法而闻名，该算法通过仅发送源文件和目标中现有文件之间的差异来减少通过网络发送的数据量。Rsync 广泛用于备份和镜像，并作为日常使用的改进复制命令。

# java - 在表中插入数组列表的单个值

> ID：15710120
> 
> 赞同：0
> 
> 时间：2013-03-29T19:26:10.380
> 
> 标签：java, sql, database, insert, arraylist

我有一个字符串数组列表

```
ArrayList myList = new ArrayList();
myList = [url1,url2,url3]; 
```

我需要在数据库中的 3 个不同行中插入这些 url。这就是我的做法。

```
while(myList.size()!=0) 
{
  //get individual values in the array list
  int idx=0;
 String url= myList.get(idx++).toString() ;
  String insert="INSERT into test (url) values (?)";
  prepstmt = conn.prepareStatement(insert);
  prepstmt .setString(r++, url);
  prepstmt.executeUpdate();
 } 
```

这进入无限循环。有人可以帮我更正我的代码吗？插入部分代码就可以了。但我无法获得个人网址。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:35:20.960

试试这个：

```
String insert = "INSERT into test (url) values (?)";
for (String url : myList) {
    prepstmt = conn.prepareStatement(insert);
    prepstmt.setString(1, url);
    prepstmt.executeUpdate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:49:25.643

@nicilee 提供了更改代码所需的最佳方式。

但是如果你不想使用 for 循环，你需要像这样改变你的 if 语句：

```
int idx=0;
while(idx < myList.size()) 
{
  String url= myList.get(idx).toString() ;
  String insert="INSERT into test (url) values (?)";
  prepstmt = conn.prepareStatement(insert);
  prepstmt .setString(r++, myURL);
  idx++;
 } 
```

或者，如果您不再需要此列表，请使用 remove 方法：

```
while(myList.size()!=0) 
{
  //get individual values in the array list
  int idx=0;
  String url= myList.remove(idx++).toString() ;
  String insert="INSERT into test (url) values (?)";
  prepstmt = conn.prepareStatement(insert);
  prepstmt .setString(r++, myURL);
 } 
```

你可以使用 listIterator：

```
 ListIterator<String> iter = myList.listIterator();
    while(iter.hasNext()){
        String url = (String) iter.next();
        String insert="INSERT into test (url) values (?)";
        prepstmt = conn.prepareStatement(insert);
        prepstmt .setString(r++, myURL);
    } 
```

但我再重复一遍：最好的方法是使用 for 循环。

还有一个建议。像这样创建您的列表：

```
List<String> myList = new ArrayList<String>(); 
```

**更新**

这是我的一个例子：

```
public class test2 {

    public static void main(String ... args) {
        ArrayList<String> myList = new ArrayList<String>();
        myList.add("123");
        myList.add("245");
        myList.add("678");
        ListIterator<String> iter = myList.listIterator();
        while(iter.hasNext()){
            String url = (String) iter.next();
            System.out.println(url);
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T08:56:13.153

发布完整的堆栈跟踪：

> [3/30/13 2:35:00:241 GMT-06:00] 00000251 SystemOut O com.ibm.dw.register.PubHandler handleMessage(String promoter, String topic, String message) com.ibm.db2.jcc.am.eo: The value of a host variable in the EXECUTE or OPEN statement is out of range for its corresponding use.. SQLCODE=-302, SQLSTATE=22001, DRIVER=3.57.110

# java - 在 Sqlite 数据库中动态导入表

> ID：15710124
> 
> 赞同：0
> 
> 时间：2013-03-29T19:26:21.723
> 
> 标签：java, android, performance, sqlite

我正在尝试在我的 Android 应用程序中导入大量数据，我正在从 xml 文件中解析近 5-600000 行，然后导入 Sqlite db。

尽管我已经尝试过优化，但在第一次启动应用程序时等待几分钟是不可接受的，所以我会根据用户的选择在数据库中动态插入某些预填充的表（在网上我只找到了如何导入整个数据库）。

编辑：
我的案例示例：用户选择下载英语和意大利语词典，我将插入预先填充的表，而不解析和插入每一行 xml 文件。

有任何想法吗？

# c++ - “没有合适的默认构造函数可用”——为什么还要调用默认构造函数？

> ID：15710125
> 
> 赞同：17
> 
> 时间：2013-03-29T19:26:26.140
> 
> 标签：c++, constructor, member, default-constructor

我已经查看了其他一些关于此的问题，但我不明白为什么在我的情况下甚至应该调用默认构造函数。我可以只提供一个默认构造函数，但我想了解它为什么这样做以及它会影响什么。

```
error C2512: 'CubeGeometry' : no appropriate default constructor available 
```

我有一个名为 ProxyPiece 的类，其成员变量为 CubeGeometry。构造函数应该接受一个 CubeGeometry 并将其分配给成员变量。这是标题：

```
#pragma once
#include "CubeGeometry.h"

using namespace std;
class ProxyPiece
{
public:
    ProxyPiece(CubeGeometry& c);
    virtual ~ProxyPiece(void);
private:
    CubeGeometry cube;
}; 
```

和来源：

```
#include "StdAfx.h"
#include "ProxyPiece.h"

ProxyPiece::ProxyPiece(CubeGeometry& c)
{
    cube=c;
}

ProxyPiece::~ProxyPiece(void)
{
} 
```

立方体几何的标题看起来像这样。使用默认构造函数对我来说没有意义。我还需要它吗？：

```
#pragma once
#include "Vector.h"
#include "Segment.h"
#include <vector>

using namespace std;

class CubeGeometry
{
public:
    CubeGeometry(Vector3 c, float l);

    virtual ~CubeGeometry(void);

    Segment* getSegments(){
        return segments;
    }

    Vector3* getCorners(){
        return corners;
    }

    float getLength(){
        return length;
    }

    void draw();

    Vector3 convertModelToTextureCoord (Vector3 modCoord) const;

    void setupCornersAndSegments();

private:
    //8 corners
    Vector3 corners[8];

    //and some segments
    Segment segments[12];

    Vector3 center;
    float length;
    float halfLength;
}; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-29T19:27:52.397

您的默认构造函数在这里被隐式调用：

```
ProxyPiece::ProxyPiece(CubeGeometry& c)
{
    cube=c;
} 
```

你要

```
ProxyPiece::ProxyPiece(CubeGeometry& c)
   :cube(c)
{

} 
```

否则你的ctor相当于

```
ProxyPiece::ProxyPiece(CubeGeometry& c)
    :cube() //default ctor called here!
{
    cube.operator=(c); //a function call on an already initialized object
} 
```

冒号后面的东西叫做[成员初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)。

`const CubeGeometry& c`顺便说一句，`CubeGeomety& c`如果我是你，我会接受这个论点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T19:28:22.237

成员初始化发生在构造函数开始时。如果您没有在构造函数的成员初始化列表中提供初始化器，则该成员将被默认构造。如果要复制构造函数用于初始化成员`cube`，请使用成员初始化列表：

```
ProxyPiece::ProxyPiece(CubeGeometry& c)
  : cube(c)
{ } 
```

冒号后面的所有内容都是初始化列表。这只是说`cube`应该用 初始化`c`。

正如您所拥有的，该`cube`成员首先被默认初始化，然后`c`被*复制分配*给它。

# vba - 在 powerpoint 形状之间复制动画和序列信息

> ID：15710128
> 
> 赞同：0
> 
> 时间：2013-03-29T19:26:35.673
> 
> 标签：vba, animation, powerpoint, shape, timeline

我正在尝试用另一种类型的形状对象（矩形）替换幻灯片上的所有形状对象（图片）。我可以删除旧对象并创建新对象，但我会丢失所有动画信息和序列顺序。是否可以将动画信息和顺序存储在时间轴中，并将其复制到新的形状对象中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:59:11.373

好吧，我自己找到了一个解决方案，希望有人能发现它有用。因此，无需将动画信息从旧形状复制到新形状，只需循环遍历序列的项目并将形状对象引用替换为新形状即可。像这样：

```
On Error Resume Next
Dim shp1 As Shape 'old shape
Set shp1 = ActivePresentation.Slides(1).Shapes(3)

Dim shp2 As Shape 'new shape
Set shp2 = ActivePresentation.Slides(1).Shapes.AddPicture("c:\imgres2.jpg", msoFalse, msoTrue, 0, 0) 'it is important to create new shape before cycling through existing ones.
For i = ActivePresentation.Slides(1).TimeLine.MainSequence.count To 1 Step -1
    'using "is" opeartor to compare refrences
    If shp1 Is ActivePresentation.Slides(1).TimeLine.MainSequence.Item(i).Shape Then
        ActivePresentation.Slides(1).TimeLine.MainSequence.Item(i).Shape = shp2
    End If
Next i
shp1.Delete 'delete the old shape 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:51:58.230

尝试类似这样的代码将动画复制到新添加的形状中：

```
Sub PasteAnimationBehaviours()

Dim SHP As Shape 'for existing shape
Set SHP = ActivePresentation.Slides(1).Shapes(1)
    SHP.PickupAnimation

Dim newSHP As Shape 'pasting to new shape
Set newSHP = ActivePresentation.Slides(1).Shapes.AddShape(msoShapeRectangle, 100, 100, 100, 100)
    newSHP.ApplyAnimation

End Sub 
```

**在评论后添加：**如果您只需要替换形状类型，请尝试使用以下内容：

```
Sub ShapeSubstition()

Dim SHP As Shape 'for existing shape
'test for 1st shape in 1st slide
Set SHP = ActivePresentation.Slides(1).Shapes(1) 

SHP.AutoShapeType = msoShapeRectangle 'to rectangle
SHP.AutoShapeType = msoShapeOval   'to oval
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-05T23:09:43.823

我认为使用“Animation Painter”命令按钮复制动画并将它们应用到另一个对象可能更容易。Animation Painter 的功能与 Format Painter 相同。复制所需的动画后，您可以使用动画窗格重新排序各个动画。

# sql - SQL DB2 - 具有 Y 或 N 的案例语句，用于具有相同列的不同值

> ID：15710130
> 
> 赞同：1
> 
> 时间：2013-03-29T19:26:59.960
> 
> 标签：sql

我有一个复杂的 SQL，它在多列中返回值，我需要将输出返回到单行。

```
select distinct TableA.ColumnA, d.name,
      (CASE WHEN rel1.REL_TYPE = 'FG' THEN 'Y' ELSE 'N' END) AS  FG
      (CASE WHEN rel2.REL_TYPE = 'F1' THEN 'Y' ELSE 'N' END) AS  F1,
      (CASE WHEN rel3.REL_TYPE = 'F2' THEN 'Y' ELSE 'N' END) AS  F2,
      (CASE WHEN rel4.REL_TYPE = 'F3' THEN 'Y' ELSE 'N' END) AS  F3 
 from TableA d
      inner join TableB p on TableA.ColumnA = p.ColumnB
      inner join TableC rel1 on  TableA.ColumnA = rel1.ColumnC  
        inner join TableC rel2 on  TableA.ColumnA = rel2.ColumnC 
        inner join TableC rel3 on  TableA.ColumnA = rel3.ColumnC 
        inner join TableC rel14 on  TableA.ColumnA = rel4.ColumnC        
where d.language_id   = -1  and  TableA.ColumnA = 53635
  and p.language_id   = -1
order by 1
 with ur; 
```

并且输出有多行，我需要输出到单行

```
53635   Fitness Fleece, Jacket  N   N   N   N
53635   Fitness Fleece, Jacket  N   N   N   Y
53635   Fitness Fleece, Jacket  Y   N   N   N
53635   Fitness Fleece, Jacket  Y   N   N   Y
53635   Fitness Fleece, Jacket  N   Y   N   N
53635   Fitness Fleece, Jacket  N   Y   N   Y
53635   Fitness Fleece, Jacket  Y   Y   N   N
53635   Fitness Fleece, Jacket  Y   Y   N   Y
53635   Fitness Fleece, Jacket  N   N   Y   N
53635   Fitness Fleece, Jacket  N   N   Y   Y
53635   Fitness Fleece, Jacket  Y   N   Y   N
53635   Fitness Fleece, Jacket  Y   N   Y   Y
53635   Fitness Fleece, Jacket  N   Y   Y   N
53635   Fitness Fleece, Jacket  N   Y   Y   Y
53635   Fitness Fleece, Jacket  Y   Y   Y   N
53635   Fitness Fleece, Jacket  Y   Y   Y   Y 
```

我正在寻找一个显示 Y 或 N 的单行输出，对应 FG、F1、F2 和 F3 的 rel_type（rel_type 将包含许多 rel_type，如 MN、OG 等）

```
53635   Fitness Fleece, Jacket  Y   Y   Y   N 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:54:46.053

好的，我想我终于明白了要求。您可以使用`MAX`with`CASE`和`GROUP BY`-- 无需自行加入表：

```
select columna, 
  name,
  max(case when rel_type = 'FG' then 'Y' else 'N' end) 'FG',
  max(case when rel_type = 'F1' then 'Y' else 'N' end) 'F1',
  max(case when rel_type = 'F2' then 'Y' else 'N' end) 'F2',
  max(case when rel_type = 'F3' then 'Y' else 'N' end) 'F3'
from tablea
group by columna, name 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/13da9/2)

显然添加您的`WHERE`标准，但这应该是您正在寻找的。

# java - 在java中将第二个json对象添加到同一个json数组

> ID：15710132
> 
> 赞同：0
> 
> 时间：2013-03-29T19:27:11.453
> 
> 标签：java, json

每当我将第二个 JSONObject 添加到 JSONArray 时，它都会覆盖先前的数组对象值。我的 java servlet 代码是-

```
 JsonArray ja=new JsonArray();
  JsonObject j;  
  j = new JsonObject();

  j.add("uid", j);
  j.add("fname", j);
  j.add("lname", j);

  for(int i=0;i<uid_list.size();i++){
      out.println(uid_list.get(i).toString());
      out.println(fname_list.get(i).toString());                  
      out.println(lname_list.get(i).toString());
      j.addProperty("uid", uid_list.get(i).toString());
      j.addProperty("fname", fname_list.get(i).toString());
      j.addProperty("lname", lname_list.get(i).toString());
      ja.add(j);
      out.println(ja.toString());

  }

  out.println(ja.toString()); 
```

输出是：

```
abc bcd cde [{"uid":"abc","fname":"bcd","lname":"cde"}] xyz wxy uyw [{"uid":"xyz","fname":"wxy","lname":"uyw"},{"uid":"xyz","fname":"wxy","lname":"uyw"}] [{"uid":"xyz","fname":"wxy","lname":"uyw"},{"uid":"xyz","fname":"wxy","lname":"uyw"}] 
```

有人可以给我解决方案吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:32:35.153

您正在循环中修改 JsonObject 的同一实例。在循环中创建新的 JsonObject，

```
for(int i=0;i<uid_list.size();i++){
  j=new JsonObject();
  out.println(uid_list.get(i).toString()); 
```

# xaml - 如何绑定数据取决于值？

> ID：15710142
> 
> 赞同：0
> 
> 时间：2013-03-29T19:27:45.010
> 
> 标签：xaml, microsoft-metro

我有需要在集合中找到项目的 ObservableCollection 和值。有任何想法吗？（ps转换器不是好主意，因为我有很多收藏品）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:51:18.060

此功能（应用过滤器）属于 ViewModel。这是一个简单的示例。

您可能还想查看[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)以获得相同概念的更精致版本。

![在此处输入图像描述](../Images/169cc6ec009d0d7c7bc2e61dce990693.png)

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:local="clr-namespace:WpfApplication1"
                Title="MainWindow" Height="350" Width="525">

    <Window.DataContext>
        <local:ViewModel />
    </Window.DataContext>

    <StackPanel Orientation="Horizontal" VerticalAlignment="Top" >
        <ListBox ItemsSource="{Binding MyClasses}" DisplayMemberPath="Name" Margin="5" />
        <ListBox ItemsSource="{Binding MyFilteredClasses}" DisplayMemberPath="Name" Margin="5" />
        <TextBox Text="{Binding MySelectedClass.Name}" Margin="5" />
    </StackPanel>
</Window> 
```

视图模型：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private ObservableCollection<Class1> _myClasses;
        public ObservableCollection<Class1> MyClasses { get { return _myClasses; } set { _myClasses = value; OnPropertyChanged("MyClasses"); } }

        private List<Class1> _myFilteredClasses;
        public List<Class1> MyFilteredClasses { get { return _myFilteredClasses; } set { _myFilteredClasses = value; OnPropertyChanged("MyFilteredClasses"); } }

        private Class1 _mySelectedClass;
        public Class1 MySelectedClass { get { return _mySelectedClass; } set { _mySelectedClass = value; OnPropertyChanged("MySelectedClass"); } }

        public ViewModel()
        {
            MyClasses = new ObservableCollection<Class1>()
            {
                new Class1() { Name = "Connelly" },
                new Class1() { Name = "Donnelly" },
                new Class1() { Name = "Fonnelly" },
                new Class1() { Name = "McGregor" },
                new Class1() { Name = "Griffiths" }
            };

            // filter your ObservableCollection by some criteria, and bind to the result (either another list, or just one item)
            MyFilteredClasses = MyClasses.Where(c => c.Name.EndsWith("onnelly")).ToList();
            MySelectedClass = MyClasses.FirstOrDefault(c => c.Name.StartsWith("Mc"));
        }
    }

    public class Class1 : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private string _name;
        public string Name { get { return _name; } set { _name = value; OnPropertyChanged("Name"); } }
    }
} 
```

# javascript - 使用 Angular 将选择下拉列表绑定到 AJAX 请求

> ID：15710145
> 
> 赞同：2
> 
> 时间：2013-03-29T19:27:56.450
> 
> 标签：javascript, angularjs

我在 HTML 中有一个选择下拉列表，其中包含用于显示的字符串和数字作为其值。每个数字都是可以通过 REST HTTP URL 查询的资源的 ID。

如何将选择的更改选择状态绑定到 Angular 控制器上的属性？使用 ng-change 是否正确？这样做的最Angularian和声明性的方式是什么？

现在假设 select 的范围与发出 REST 请求的函数的控制器相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:22:27.577

一种方法是`$watch`在.`ng-model``select`

```
$scope.selectModel='foo';
$scope.otherProperty= /* ....*/

$scope.$watch( 'selectModel', function(){
   $http.get(url, { keyName: $scope.selectModel).success(function(response) {
           $scope.otherProperty=response;
    });

}) 
```

# jquery - 从 iis 7.5 获取 html 时 $.get 回调未触发

> ID：15710148
> 
> 赞同：0
> 
> 时间：2013-03-29T19:28:15.710
> 
> 标签：jquery, html, callback, get, iis-7.5

我已经查看了这个[$.get 在我的服务器中不起作用，](https://stackoverflow.com/questions/15529783/get-is-not-working-in-my-server)并且很确定我必须做一些特别的事情才能使回调触发。

问题是：我不知道那是什么。

这

```
$.get('myFile.html', function(data) {
    alert('duh');
}); 
```

下载`myFile.html`但从不触发回调。为什么？我需要做什么才能使回调触发？

**Chrome->开发者工具->网络**

下`XHR`，`GET`表演`Status` `200`。我什至可以看到 html 源代码`Response`和`Preview`.

**$.ajaxError()**

这着火了。

**' [https://mysite.com/myFile.html](https://mysite.com/myFile.html) '**

与没有绝对路径的结果相同：`GET`shows `Status` `200`。我什至可以看到 html 源代码`Response`和`Preview`.

**$.ajaxError()`thrownError`**

`alert`小号`SyntaxError: Unexpected token <`_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:49:18.463

请试试这个：

```
$.get('myFile.html', '', function(data) {
  alert('duh');
}, 'html'); 
```

jQuery 应该能够找出你的速记（第二个参数不是字符串），但无论如何都要试试这个。添加数据和 HTML 参数不会受到影响。

你也可以试试

```
$.get("myFile.html")
    .done(function(data) { alert("Data Loaded: " + data); })
    .fail(function() { alert("error"); })
    .always(function() { alert("finished"); }); 
```

看看会发生什么。

# c# - 在 C# 中将 GnuPlot 输出读入图像

> ID：15710153
> 
> 赞同：1
> 
> 时间：2013-03-29T19:28:30.907
> 
> 标签：c#, image, stream, png, gnuplot

我正在使用 C# 应用程序中的 GnuPlot。我想直接从标准输出读取 GnuPlot PNG 输出，而不是保存到文件然后读取它。我的代码现在看起来像这样：

```
string Path = @"C:\Program Files\gnuplot\bin\gnuplot.exe";
Process GnuplotProcess = new Process();
GnuplotProcess.StartInfo.FileName = Path;
GnuplotProcess.StartInfo.UseShellExecute = false;
GnuplotProcess.StartInfo.RedirectStandardInput = true;
GnuplotProcess.StartInfo.RedirectStandardOutput = true;
GnuplotProcess.Start();
StreamWriter SW = GnuplotProcess.StandardInput;
StreamReader SR = GnuplotProcess.StandardOutput;
SW.WriteLine("set terminal pngcairo size 300,200");
foreach (LoadCaseOutput LCO in LoadCases)
{
    foreach (LoadCaseOutput.MemberOutput MO in LCO.Members)
    {
        SW.WriteLine("plot " + MO.GenerateAFEquation(P));
        MO.AFImage = Image.FromStream(SR.BaseStream);
    }
}
SW.WriteLine("exit");
GnuplotProcess.Close(); 
```

现在这似乎停滞在 Image.FromStream() 行。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:59:12.587

**更新**（我已经更新了我的代码以反映我在下面的评论）

看来问题是当“退出”命令发送到 gnuPlot 时。如果没有向 gnuPlot 发送退出命令，程序就会等待。

我举了你的例子，并且能够通过在执行树中向上移动 gnuPlot exit 命令来完成程序。

```
 string Path = @"z:\tools\gnuplot\bin\gnuplot.exe";
        Process GnuplotProcess = new Process();
        GnuplotProcess.StartInfo.FileName = Path;
        GnuplotProcess.StartInfo.UseShellExecute = false;
        GnuplotProcess.StartInfo.RedirectStandardInput = true;
        GnuplotProcess.StartInfo.RedirectStandardOutput = true;
        GnuplotProcess.Start();
        StreamWriter SW = GnuplotProcess.StandardInput;
        StreamReader SR = GnuplotProcess.StandardOutput;
        SW.WriteLine("set terminal pngcairo size 300,200");
        SW.WriteLine("plot f(x) = sin(x*a), a = .2, f(x), a = .4, f(x)");
        SW.WriteLine("exit");

        Image png = Image.FromStream(SR.BaseStream);
        png.Save(@"z:\tools\try3a.png");

        GnuplotProcess.Close(); 
```

这确实正确地生成了一个 PNG 文件。为了测试，我确实尝试在发送退出命令之前从流中读取。程序等待 FromStream 调用。

马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:40:28.017

问题不在于读数，否则您会遇到异常，请将读数位替换为：

```
Image.FromStream(oFileStream, false, true) 
```

它会在接收到第一个字节并从那里开始时立即验证图像。

# pug - 在 Jade 模板中添加类

> ID：15710158
> 
> 赞同：0
> 
> 时间：2013-03-29T19:28:53.937
> 
> 标签：pug

我在 Jade 页面中包含一个标题，并将其用于导航。除其他外，我有这个列表：

```
ul
  li foo
  li bar
  li baz 
```

现在有使用标题的页面：

```
html
  body
   include includes/head
     .main
        p This page is about bar 
```

如何在标题的 li 栏中添加一个“活动”类？

# sql-server - 计算日期范围和个别天数

> ID：15710159
> 
> 赞同：0
> 
> 时间：2013-03-29T19:28:57.190
> 
> 标签：sql-server, sql-server-2005, count, date-range

我不得不重新编写一个使用 SQL 查询和 ColdFusion 中的查询组合完成的项目。有几十个查询引用了原始 SQL 查询结果集，但它没有被抽象为适用于不同的事件。所以我想通过将大部分计数转移到 SQL 中来改进它。我得到了他们需要工作的前 6 个计数（不确定是否以最佳方式）。但是，除此之外，我不仅需要对整个日期范围进行细分，而且还需要对该日期范围内的每一天进行细分，以获取唯一计数。

到目前为止，查询是：

```
 SELECT Count(CASE
           WHEN type IN ( 1, 3, 4, 5, 9 ) THEN barcode
           ELSE NULL
         END)              AS total_scans,
   Count(CASE
           WHEN type IN ( 2, 8 ) THEN barcode
           ELSE NULL
         END)              AS total_creds,
   Count(barcode)          AS total_scans,
   Count(DISTINCT CASE
                    WHEN type IN ( 1, 3, 4, 5, 9 ) THEN barcode
                    ELSE NULL
                  END)     AS unique_scans,
   Count(DISTINCT CASE
                    WHEN type IN ( 2, 8 ) THEN barcode
                    ELSE NULL
                  END)     AS unique_creds,
   Count(DISTINCT barcode) AS unique_scans 
FROM   (SELECT c.id,
           a.barcode,
           d.type,
           c.location,
           Datepart(mm, a.scan_time)     AS scan_month,
           Datepart(dd, a.scan_time)     AS scan_day,
           Datepart(hour, a.scan_time)   AS scan_hour,
           Datepart(minute, a.scan_time) AS scan_min
    FROM   [scan_11pc_gate_entries] AS a
           INNER JOIN scan_units AS b
                   ON a.scanner = b.id
           INNER JOIN scan_gates AS c
                   ON b.gate = c.id
           INNER JOIN [scan_11pc_gate_allbarcodes] AS d
                   ON a.barcode = d.barcode
    WHERE  ( c.id IN (SELECT id
                      FROM   scan_gates
                      WHERE  ( event_id = 21 )) )
           AND ( a.valid IN ( 1, 8 ) )
           AND a.scan_time >= '20110808'
           AND a.scan_time <= '20110814') data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:43:43.787

好吧，我在这里看到了很多其他改进/优化的空间，但要满足眼前的要求：

```
 SELECT d, Count(CASE WHEN type IN ( 1, 3, 4, 5, 9 ) THEN barcode
           ELSE NULL END) AS total_scans,
   Count(CASE WHEN type IN ( 2, 8 ) THEN barcode
           ELSE NULL END) AS total_creds,
   Count(barcode)         AS total_scans,
   Count(DISTINCT CASE WHEN type IN ( 1, 3, 4, 5, 9 ) THEN barcode
           ELSE NULL END) AS unique_scans,
   Count(DISTINCT CASE WHEN type IN ( 2, 8 ) THEN barcode
           ELSE NULL END) AS unique_creds,
   Count(DISTINCT barcode) AS unique_scans 
FROM   (SELECT c.id, -- is this column necessary?
           a.barcode,
           d.type,
           c.location, -- is this column necessary?
           d = DATEADD(DAY, DATEDIFF(DAY, 0, a.scan_time), 0)
    FROM   [scan_11pc_gate_entries] AS a
           INNER JOIN scan_units AS b
                   ON a.scanner = b.id
           INNER JOIN scan_gates AS c
                   ON b.gate = c.id
                  AND c.event_id = 21 -- join criteria, 
                     -- shouldn't be an extra IN clause
           INNER JOIN [scan_11pc_gate_allbarcodes] AS d
                   ON a.barcode = d.barcode
    WHERE  ( a.valid IN ( 1, 8 ) )
           AND a.scan_time >= '20110808'
           AND a.scan_time <= '20110814') data  
GROUP BY d
ORDER BY d; 
```

请注意，`>=`and 与`<=`, 相同`BETWEEN`，除非`scan_time`是`DATE`列（或保证始终在午夜），否则您使用的方法并不安全。最好说：

```
 AND a.scan_time >= '20110808'
           AND a.scan_time <  '20110815' 
```

更多信息在这里：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

* * *

**编辑**

了解这是基于我从评论和问题中拼凑的信息，这与您的环境和工作负载的完整情况相去甚远，您可能会发现有用的索引视图是：

```
CREATE VIEW dbo.myview 
WITH SCHEMABINDING
AS
  SELECT c.event_id,
         a.barcode,
         [type] = CASE WHEN d.[type] IN (2,8) THEN 'c' ELSE 's' END,
         scan_date = DATEADD(DAY, DATEDIFF(DAY, 0, a.scan_time), 0),
         total = COUNT_BIG(*)
    FROM dbo.scan_11pc_gate_entries AS a
    INNER JOIN dbo.can_units AS b
            ON a.scanner = b.id
    INNER JOIN dbo.scan_gates AS c
            ON b.gate = c.id
    INNER JOIN dbo.scan_11pc_gate_allbarcodes AS d
            ON a.barcode = d.barcode
    WHERE (a.valid IN (1,8))
      AND d.[type] IN (2,3,4,5,8,9)
    GROUP BY 
      c.event_id,
      a.barcode,
      CASE WHEN d.[type] IN (2,8) THEN 'c' ELSE 's' END,
      DATEADD(DAY, DATEDIFF(DAY, 0, a.scan_time), 0);
GO
CREATE UNIQUE CLUSTERED INDEX x 
  ON dbo.myview(event_id, barcode, [type], scan_date); 
```

现在您可以编写一个执行以下操作的查询：

```
SELECT [date] = CONVERT(CHAR(8), scan_date, 112), 
  SUM(CASE WHEN [type] = 's' THEN total ELSE 0 END) AS total_scans,
  SUM(CASE WHEN [type] = 'c' THEN total ELSE 0 END) AS total_creds,
  COUNT(CASE WHEN [type] = 's' THEN 1 END) AS unique_scans,
  COUNT(CASE WHEN [type] = 'c' THEN 1 END) AS unique_creds
FROM dbo.myview WITH (NOEXPAND) -- in case STD Edition
WHERE event_id = 21
  AND scan_date BETWEEN '20110808' AND '20110814'
GROUP BY scan_date
UNION ALL
SELECT [date] = 'weekly', 
  SUM(CASE WHEN [type] = 's' THEN total ELSE 0 END) AS total_scans,
  SUM(CASE WHEN [type] = 'c' THEN total ELSE 0 END) AS total_creds,
  COUNT(DISTINCT CASE WHEN [type] = 's' THEN barcode END) AS unique_scans,
  COUNT(DISTINCT CASE WHEN [type] = 'c' THEN barcode END) AS unique_creds
FROM dbo.myview WITH (NOEXPAND) -- in case STD Edition
WHERE event_id = 21
  AND scan_date BETWEEN '20110808' AND '20110814'
ORDER BY [date]; 
```

这一切都完全未经测试，因为您的架构尝试创建系统的完整复制品有点麻烦，但希望这能给您一个大致的工作思路......

# r - 将生存数据从宽转换为长

> ID：15710160
> 
> 赞同：2
> 
> 时间：2013-03-29T19:29:06.247
> 
> 标签：r, reshape, survival-analysis

我正在阅读[http://www.uk.sagepub.com/books/Book233417](http://www.uk.sagepub.com/books/Book233417)并且`Rcmdr`用于转换罗西数据[http://cran.r-project.org/doc/contrib/Fox-Companion/Rossi.txt](http://cran.r-project.org/doc/contrib/Fox-Companion/Rossi.txt)随时间变化的生存分析从宽到长。

进行转换的`Rcmdr`脚本是：

```
.CovSets <-structure(list(covariate.1 = c("emp1", "emp2", "emp3", "emp4", "emp5", "emp6", "emp7", "emp8", "emp9", "emp10", "emp11", "emp12", "emp13", "emp14", "emp15", "emp16", "emp17", "emp18", "emp19", "emp20", "emp21", "emp22", "emp23", "emp24", "emp25", "emp26", "emp27", "emp28", "emp29","emp30", "emp31", "emp32", "emp33", "emp34", "emp35", "emp36", "emp37", "emp38", "emp39", "emp40", "emp41", "emp42", "emp43", "emp44", "emp45", "emp46", "emp47", "emp48", "emp49", "emp50", "emp51", "emp52")), .Names =  "covariate.1")
Rossi.long <- unfold(Rossi, time="week", event="arrest", cov=.CovSets, 
                                         cov.names=c("covariate.1"))
remove(.CovSets) 
```

**`Rcmdr`但是，如果未加载，则此脚本不会运行。**

Rcmdr 脚本的结果将 Rossi 数据帧从

```
> head(Rossi,20)
   week arrest fin age race wexp mar paro prio educ emp1 emp2 emp3 emp4 emp5 emp6 emp7 emp8 emp9 emp10 emp11 emp12 emp13 emp14 emp15 emp16 emp17 emp18 emp19 emp20 emp21 emp22 emp23 emp24 emp25
1    20      1   0  27    1    0   0    1    3    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0    NA    NA    NA    NA    NA
2    17      1   0  18    1    0   0    1    8    4    0    0    0    0    0    0    0    0    0     1     1     1     1     1     0     0     0    NA    NA    NA    NA    NA    NA    NA    NA
3    25      1   0  19    0    1   0    1   13    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     1     0     0     0     0     0     0     0     0
4    52      0   1  23    1    1   1    1    1    5    0    0    0    0    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     0     0     0     0
5    52      0   0  19    0    1   0    1    3    3    0    0    0    0    0    0    0    0    0     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
6    52      0   0  24    1    1   0    0    2    4    0    0    0    0    1    1    1    1    1     1     0     0     0     0     0     0     0     0     0     0     0     0     1     1     1
7    23      1   0  25    1    1   1    1    0    4    1    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     0    NA    NA
8    52      0   1  21    1    1   0    1    4    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     1     1     0     0     1     1
9    52      0   0  22    1    0   0    0    6    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     1     1     1     1     1     1     1     0     0     0
10   52      0   0  20    1    1   0    0    0    5    0    1    1    1    1    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
11   52      0   1  26    1    0   0    1    3    3    0    0    0    0    0    0    0    0    1     1     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0
12   52      0   0  40    1    1   0    0    2    5    0    0    0    0    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
13   37      1   0  17    1    1   0    1    5    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
14   52      0   0  37    1    1   0    0    2    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1
15   25      1   0  20    1    0   0    1    3    4    0    0    0    0    0    0    0    0    0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     0     0
16   46      1   1  22    1    1   0    1    2    3    0    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
17   28      1   0  19    1    0   0    0    7    3    0    0    0    0    0    0    0    0    0     0     0     0     0     1     1     1     1     1     0     0     0     0     0     0     0
18   52      0   0  20    1    0   0    0    2    3    0    0    0    0    0    0    0    0    0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1     1
19   52      0   0  25    1    0   0    1   12    3    0    0    0    0    0    0    0    0    0     0     0     1     1     1     1     1     1     1     1     1     1     1     0     0     0
20   52      0   0  24    0    1   0    1    1    3    0    1    1    0    0    0    0    0    1     1     1     1     1     1     0     0     0     1     1     1     1     1     1     1     1
   emp26 emp27 emp28 emp29 emp30 emp31 emp32 emp33 emp34 emp35 emp36 emp37 emp38 emp39 emp40 emp41 emp42 emp43 emp44 emp45 emp46 emp47 emp48 emp49 emp50 emp51 emp52 id
1     NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA  1
2     NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA  2
3     NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA  3
4      0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1  4
5      1     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0  5
6      1     1     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0  6
7     NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA  7
8      0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0  8
9      0     0     0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1  9
10     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0 10
11     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     1     1     1     1     1     1     1     1 11
12     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1 12
13     0     0     1     1     0     0     0     0     0     0     0     0    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA 13
14     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1 14
15    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA 15
16     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     0    NA    NA    NA    NA    NA    NA 16
17     0     0     0    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA 17
18     1     1     1     1     1     1     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0 18
19     0     0     0     0     0     0     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1 19
20     1     1     1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0 20 
```

到 Rossi.long 数据

```
> head(Rossi.long,30)
     start stop arrest.time week arrest fin age race wexp mar paro prio educ id covariate.1
1.1      0    1           0   20      1   0  27    1    0   0    1    3    3  1           0
1.2      1    2           0   20      1   0  27    1    0   0    1    3    3  1           0
1.3      2    3           0   20      1   0  27    1    0   0    1    3    3  1           0
1.4      3    4           0   20      1   0  27    1    0   0    1    3    3  1           0
1.5      4    5           0   20      1   0  27    1    0   0    1    3    3  1           0
1.6      5    6           0   20      1   0  27    1    0   0    1    3    3  1           0
1.7      6    7           0   20      1   0  27    1    0   0    1    3    3  1           0
1.8      7    8           0   20      1   0  27    1    0   0    1    3    3  1           0
1.9      8    9           0   20      1   0  27    1    0   0    1    3    3  1           0
1.10     9   10           0   20      1   0  27    1    0   0    1    3    3  1           0
1.11    10   11           0   20      1   0  27    1    0   0    1    3    3  1           0
1.12    11   12           0   20      1   0  27    1    0   0    1    3    3  1           0
1.13    12   13           0   20      1   0  27    1    0   0    1    3    3  1           0
1.14    13   14           0   20      1   0  27    1    0   0    1    3    3  1           0
1.15    14   15           0   20      1   0  27    1    0   0    1    3    3  1           0
1.16    15   16           0   20      1   0  27    1    0   0    1    3    3  1           0
1.17    16   17           0   20      1   0  27    1    0   0    1    3    3  1           0
1.18    17   18           0   20      1   0  27    1    0   0    1    3    3  1           0
1.19    18   19           0   20      1   0  27    1    0   0    1    3    3  1           0
1.20    19   20           1   20      1   0  27    1    0   0    1    3    3  1           0
2.1      0    1           0   17      1   0  18    1    0   0    1    8    4  2           0
2.2      1    2           0   17      1   0  18    1    0   0    1    8    4  2           0
2.3      2    3           0   17      1   0  18    1    0   0    1    8    4  2           0
2.4      3    4           0   17      1   0  18    1    0   0    1    8    4  2           0
2.5      4    5           0   17      1   0  18    1    0   0    1    8    4  2           0
2.6      5    6           0   17      1   0  18    1    0   0    1    8    4  2           0
2.7      6    7           0   17      1   0  18    1    0   0    1    8    4  2           0
2.8      7    8           0   17      1   0  18    1    0   0    1    8    4  2           0
2.9      8    9           0   17      1   0  18    1    0   0    1    8    4  2           0
2.10     9   10           0   17      1   0  18    1    0   0    1    8    4  2           1 
```

是否可以使用`reshape`或任何其他数据转换包执行这种精确的转换？

更新：该`Rcmdr`脚本只能在`Rcmdr`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:12:39.130

The 'unfold' function is located here (as documented in the pdf you linked to:

[http://socserv.mcmaster.ca/jfox/Books/Companion/scripts/appendix-cox.R](http://socserv.mcmaster.ca/jfox/Books/Companion/scripts/appendix-cox.R)

The script does *not* require Rcmdr. It would require `car` (which in turn loads `MASS` and `nnet` but if you have Rcmdr then you must have `car`) and it does load `survival` which is a recommended package and should be available in all installations. It runs to completion without error in R 3.0.0 beta and I strongly suspect it would have run to completion in R 2.15.x.

# database - postgres 中的条件 INSERT INTO 语句

> ID：15710162
> 
> 赞同：65
> 
> 时间：2013-03-29T19:29:28.737
> 
> 标签：database, postgresql, conditional-statements, sql-insert

我正在为模拟航空公司预订数据库编写预订程序，我真正想做的是这样的：

```
IF EXISTS (SELECT * FROM LeadCustomer 
    WHERE FirstName = 'John' AND Surname = 'Smith') 
THEN
   INSERT INTO LeadCustomer (Firstname, Surname, BillingAddress, email) 
   VALUES ('John', 'Smith', '6 Brewery close,
            Buxton, Norfolk', 'cmp.testing@example.com'); 
```

但是 Postgres 不支持`IF`不加载 PL/pgSQL 扩展的语句。我想知道是否有办法做到这一点，或者在这一步中是否需要进行一些用户交互？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-29T20:01:22.493

该特定命令可以这样完成：

```
insert into LeadCustomer (Firstname, Surname, BillingAddress, email)
select 
    'John', 'Smith', 
    '6 Brewery close, Buxton, Norfolk', 'cmp.testing@example.com'
where not exists (
    select 1 from leadcustomer where firstname = 'John' and surname = 'Smith'
); 
```

它将插入 select 语句的结果，并且`select`仅在该客户不存在时才返回一行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T19:38:40.560

> 从 9.5 版本开始，包含 pgsql upsert，使用[INSERT ... ON CONFLICT DO UPDATE ...](https://www.postgresql.org/docs/current/static/sql-insert.html)

下面的答案不再相关。几年后发布了 Postgres 9.5，并提供了更好的解决方案。

Postgres 在不添加新功能的情况下没有“ [upsert](https://stackoverflow.com/questions/1109061/insert-on-duplicate-update-postgresql) ”功能。
您需要做的是运行选择查询并查看是否有匹配的行。如果你这样做，然后插入它。

我知道你并不想要一个 upsert，但它几乎是一样的。

# java - 代码在 Netbeans 中有效，但在 TextPad 中无效？

> ID：15710164
> 
> 赞同：0
> 
> 时间：2013-03-29T19:29:31.767
> 
> 标签：java, arrays, netbeans, nullpointerexception, textpad

这是引发错误的代码。在 TextPad 中，当我尝试将数组的内容写入文本文件时，我得到了 NullPointerException。（它在数组中看不到任何东西。）注意：它在 Netbeans 中完美运行。我只在Textpad中得到这个。我已经搜索了谷歌，但我不知道它为什么这样做。

```
 void enterContact(){
    // test contact
    contactName = nameField.getText();
    if (contactName == null || contactName.equals(""))
    {
        JOptionPane.showMessageDialog(null, "Please enter a name.");
        return;
    }

    //test age betweeen 0 and 120
    contactAge = ageField.getText();

    try{
        Integer.parseInt(contactAge);
    }
    catch(NumberFormatException e){
        JOptionPane.showMessageDialog(null, "Please enter a valid age.");
    }
    finally{
        if (Integer.parseInt(contactAge) <= 0 || Integer.parseInt(contactAge) >= 121){
            JOptionPane.showMessageDialog(null, "Please enter a valid age.");
            return;
         }
    }

    // test email
    contactEmail = emailField.getText();
    if ( contactEmail == null || contactEmail.equals(""))
    {
        JOptionPane.showMessageDialog(null, "Please Enter an Email Address.");
        return;
    }

    //test cell number

    contactPhone = phoneField.getText();
    try
    {
        Integer.parseInt(contactPhone);
    }
    catch(Exception e) {
        JOptionPane.showMessageDialog(null, "Please Enter a valid Phone Number.");
        return;
    }

    String columns2[] =  {  contactName, contactAge, contactEmail, contactPhone  };

    //write data to file
    try{
        for (int i = 0; i < columns2.length; i++){
            fw.write(columns2[i].toString() + ", ");
          }
        fw.write("\r\n");
        fw.flush();
        fw.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:51:36.350

如果你`NullPointerException`在写入文件的过程中得到，有两种可能：

1.  您可能无法打开该文件。例如因为忘记调用`FileWriter`.

2.  您没有任何权限打开文件并写入文件。

如果仅在使用 TextPad 运行它时出现异常，我认为出现了第二个问题。你没有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:02:47.543

尝试以管理员模式运行 TextPad

Right Click on Textpad icon -> Run as administrator

& then RUN above program

i sure your program get executed properly.

# php - 如何将 jQuery 函数应用于具有相似 ID 的 DOM 元素？

> ID：15710167
> 
> 赞同：1
> 
> 时间：2013-03-29T19:29:36.163
> 
> 标签：php, javascript, jquery

我得到了这个脚本：

```
<script>
   $('#zoom_01').elevateZoom({});
</script> 
```

`#zoom_01`图片的ID在哪里。我有很多带有 ID 的图像，如下所示：

```
zoom_01
zoom_02
zoom_03
zoom_04
and so on 
```

我如何使 javascript 将采用所有 ID 而不是一个？我在想这样的事情：

```
<script>
   <?php 
     foreach ($ArrayAllOfIDs as $i) {  
         $('#<?php echo $i; } ?>').elevateZoom({});
     }
   ?>
</script> 
```

但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:34:20.353

尽管使用`class`上面提到的属性可能是您最好的选择，但如果您出于某种原因被迫使用 ID，您可以使用“开头为”选择器，例如

```
$("[id^=zoom_]").elevateZoom({}) 
```

这将适用于以“zoom_”开头`elevateZoom`的所有 DOM 元素。`id`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T19:32:42.457

为所有将同时受到影响的图像添加一个类。
ID 用于标识唯一的、不重复的项目。由于您的图像几乎都相同，因此一个类可以将它们组合在一起。

然后，更改您的 javascript 以选择类。

```
$('.zoom').elevateZoom({}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:33:44.190

我不知道是什么`elevateZoom`，但你可能有这样的语法：

```
$('#zoom_01, #zoom_02, #zoom_03, ...').elevateZoom({}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:36:29.283

让 PHP 写出 Javascript，以便在浏览器中加载页面时可用。

```
<script>
<?php 
foreach ($ArrayAllOfIDs as $i) {  
    echo '$(\'#zoom_'. $i .'} \').elevateZoom({});\n';
} 
?>
</script> 
```

# jquery - Chrome SyntaxError: Unexpected Identifier

> ID：15710169
> 
> 赞同：-9
> 
> 时间：2013-03-29T19:29:48.143
> 
> 标签：jquery, ajax

Really confused, I can't find anything wrong!

![enter image description here](../Images/10ed1fdc6542db5ced738ddfa41e740c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:32:03.090

You can't declare a variable within an object literal. Move `pid` outside:

```
var pid = ...

$.ajax({ ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:31:25.570

You cannot have a `var` statement inside of an object literal. You can only have object properties inside of an object literal, with the `key: value` format.

I think you are wanting something like this.

```
var pid = $("span#live-news:first").attr("id");
$.ajax({
  // all the AJAX options go here
}); 
```

# angularjs - angularjs send message from service

> ID：15710170
> 
> 赞同：2
> 
> 时间：2013-03-29T19:29:53.500
> 
> 标签：angularjs

I have a service which creates a configuration object for an external component. One of the config properties is an optional function that gets called when some event (non angular) gets triggered.

e.g. { eventHandler:function(e) { ... } }

Inside this eventhandler I want to send a message to the current controller. I tried getting instance of $rootService but it doesn't know about $broadCast.

update : the code (simplified version, to keep code short)

```
app.service('componentService',['$rootScope', 
  function($rootScope) {
     this.getConfig = function() {
         return {
            transition:true,
            ... // other config parameters
            clickHandler:function(e) { // event called by external library, e = event args 
               $rootScope.$broadCast("myEvent",e.value);
            };
     };
     return {
        getConfig : this.getConfig
     }
   }]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:50:53.467

[http://plnkr.co/edit/BK4Vjk?p=preview](http://plnkr.co/edit/BK4Vjk?p=preview)

Check out the example I made above. It should work.

There's a few syntax errors in your snippet of code. I wasn't sure if it was because you were just quickly typing it or if they're really there.

Basically:

```
app.controller('MainCtrl', function($scope, componentService) {
  var config = componentService.getConfig();
  $('#nonAngular').bind('click', config.clickHandler);
  $scope.$on('myEvent', function(e, value) {
    console.log('This is the angular event ', e);
    console.log('This is the value ', value)
  });
});

app.service('componentService',['$rootScope', 
  function($rootScope) {
     this.getConfig = function() {
         return {
            transition:true,
            clickHandler:function(e) { // event called by external library, e = event args 
               $rootScope.$broadcast("myEvent", "Some value you're passing to the event broadcast");
            }
     }
   } 
  }]); 
```

# iphone - AVAudioRecorder 写入格式错误的文件？

> ID：15710172
> 
> 赞同：1
> 
> 时间：2013-03-29T19:29:59.533
> 
> 标签：iphone, ios, objective-c, avaudioplayer, avaudiorecorder

此代码有效，但当我移至 iOS 6 时，它停止支持 mp4。

我准备写

```
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPaths objectAtIndex:0];
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"Temp.mp4"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
NSDictionary *recordSettings = [[NSDictionary alloc] initWithObjectsAndKeys:
                                [NSNumber numberWithFloat: 32000], AVSampleRateKey,
                                [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                                nil];
NSError *error = nil;
self.audioRecorder = nil;
AVAudioRecorder *audioRecorderBuffer = [[AVAudioRecorder alloc]
                                        initWithURL:soundFileURL
                                        settings:recordSettings
                                        error:&error];
self.audioRecorder = audioRecorderBuffer;
self.audioRecorder.delegate = self;
if (error)
    NSLog(@"error: %@", [error localizedDescription]);
else
    [self.audioRecorder prepareToRecord]; 
```

然后记录，sto，保存它，当我尝试播放时：

```
_audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:_audioURL error:&error];
_audioPlayer.delegate = self;
if (error)
    NSLog(@"Error: %@", [error localizedDescription]);
else {
    [_audioPlayer prepareToPlay];
    if (![_audioPlayer play]) {
        NSLog(@"Play Error: %@", error);
    }
} 
```

我得到和错误：

错误：操作无法完成。（OSStatus 错误 1685348671。）

该代码适用于未压缩格式。压缩的 mp4 适用于装有 iOS 6 的 iPhone 4，也适用于装有 iOS 5.x 的 iphone 4S，但不适用于装有 iOS 6 的 iphone 4S 或 iphone 5。

AVAudioRecorder 录制并写入文件，然后 AVAudioPlayer 出现错误 Error: The operation could not be completed。（OSStatus 错误 1685348671。）。文档指出文件格式已损坏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T03:25:09.587

Try adding the following before `[self.audioRecorder prepareToRecord]`

```
AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryRecord error:nil];
[session setActive:YES error:nil]; 
```

Check out this [question/answer](https://stackoverflow.com/questions/12435683)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T21:05:34.947

我刚刚遇到了与损坏的文件非常相似的问题 - 对我来说，归根结底是那些无法录制的人拒绝了访问麦克风的权限。这意味着它`prepareToRecord`正在工作（并截断文件）并且`record`报告它正在工作，但实际上它没有记录任何内容。

此代码（swift 不是 Objective-C）获取权限状态：

```
let val : AVAudioSessionRecordPermission = AVAudioSession.sharedInstance().recordPermission()
switch( val ){
case AVAudioSessionRecordPermission.Undetermined :
    print("permission undetermined")
    break
case AVAudioSessionRecordPermission.Denied :
    print("permission denied")
    break
case AVAudioSessionRecordPermission.Granted :
    print("permission granted")
    break
default :
    print("permission unknown")
    break
} 
```

当我想录制时，我使用了它：

```
AVAudioSession.sharedInstance().requestRecordPermission({(granted: Bool)-> Void in
    if granted {
        self.internalRecorder.prepareToRecord()
        self.internalRecorder.record()
    } else {
        // can't record - update UI
    }
}) 
```

希望如果他们遇到同样的问题，它可以节省一些时间。

# ruby-on-rails - 有条件地重命名 Rails 3 路线

> ID：15710173
> 
> 赞同：0
> 
> 时间：2013-03-29T19:30:00.743
> 
> 标签：ruby-on-rails, routes

出于营销原因，我需要更新我们的应用程序的路线以将一个单词换成另一个单词，而无需触及控制器名称。

例如：

```
/foo_campaigns/1               becomes  /bar_campaigns/1
/foo_campaigns/accounts_foo/1  becomes  /bar_campaigns/accounts_bar/1 
```

执行此操作的手动方法是：

```
resources :foo_campaigns, :path => 'bar_campaigns' do
  match :accounts_foo, :path => 'accounts_bar'
end 
```

但我正在寻找一种被动的方式来实现这一点，每次我创建一个包含单词“foo”的新控制器或动作时，它的路径将是“bar”。

# c# - 调试后 C# WPF 与 IDE 的大小不同？

> ID：15710176
> 
> 赞同：5
> 
> 时间：2013-03-29T19:30:11.700
> 
> 标签：c#, wpf, window

![http://i.stack.imgur.com/2gOLN.png](../Images/74d53b38e43cf1d902597013bd546a61.png)

我在中`Blend/VS2012 IDE`和中的外观不同时遇到问题`Debugging`。在`IDE`中，`Rectangle`是居中的，但是在编译或者调试的时候，margin 的大小是不一样的。在我看来，这是因为窗口边框的大小不同。我真的很想解决这个问题。有什么建议么？

谢谢你。

`XAML`

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="202" Width="194">
<Grid HorizontalAlignment="Left" Height="171" VerticalAlignment="Top" Width="186">
    <Rectangle Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="151" Margin="10,10,0,0" Stroke="Black" VerticalAlignment="Top" Width="166"/>
</Grid> 
```

编辑`XAML`代码：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="202" Width="194">
<Grid HorizontalAlignment="Left" Height="171" VerticalAlignment="Top" Width="186">
    <Rectangle Fill="#FFF4F4F5" HorizontalAlignment="Center" Height="151" Margin="10" Stroke="Black" VerticalAlignment="Center" Width="166"/>
</Grid> 
```

结果是一样的。这是我电脑的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:48:04.767

您的问题是窗口大小包括 Chrome 大小（窗口边框和关闭/最大最小按钮之类的东西）。

因此，您的 Grid 是您请求的大小，但它不适合您请求的窗口大小。

我可以解决您的问题，使输出窗口看起来像这样，窗口大小：

宽度：202 高度：210

在 Windows 8 上

但是，您应该将窗口大小设置为`SizeToContent="WidthAndHeight"`

例子：

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        x:Name="window"
        Title="MainWindow"
        SizeToContent="WidthAndHeight">
<Grid HorizontalAlignment="Left" Height="171" VerticalAlignment="Top" Width="186">
    <Rectangle Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="151" Margin="10,10,0,0" Stroke="Black" VerticalAlignment="Top" Width="166"/>
</Grid>
</Window> 
```

因此，您不会假设可能与不同版本的 Windows 不同的 Chrome 尺寸。

你也应该得到[Snoop](http://snoopwpf.codeplex.com/)。它可以帮助您非常轻松地调试此类问题，当您使用 Shift+Ctrl 将鼠标悬停在控件上时，它会在控件上显示红色边框，因此您实际上`Grid`可以在显示 UI 的实际元素布局时看到超出可见窗口的扩展

![图片](../Images/d849ff949cd2e2ea67926c6594f953e9.png)

# java - 获取空指针异常将数据从数据库导出到xml

> ID：15710179
> 
> 赞同：0
> 
> 时间：2013-03-29T19:30:16.020
> 
> 标签：java, sql, xml, dom, jdbc

我尝试使用此 java 代码使用 sql 查询从数据库中导出数据，但得到一个空指针异常。不知道删除它。我在粗体字的行中遇到了这个异常。

```
try {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element results = doc.createElement("Results");
    doc.appendChild(results);

    Class.forName("oracle.jdbc.OracleDriver");
    Connection con = DriverManager
            .getConnection("jdbc:oracle:thin:@localhost:1521:XE", "hr", "hr");

    ResultSet rs = con.createStatement().executeQuery("select * from departments");

    ResultSetMetaData rsmd = rs.getMetaData();
    int colCount = rsmd.getColumnCount();

    while (rs.next()) {
        Element row = doc.createElement("Row");
        results.appendChild(row);
        for (int i = 1; i <= colCount; i++) {
            String columnName = rsmd.getColumnName(i);
            Object value = rs.getObject(i);
            Element node = doc.createElement(columnName);
            row.appendChild(node);
            **node.appendChild(doc.createTextNode(value.toString()));**
        }
    }

    DOMSource domSource = new DOMSource(doc);
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");
    StringWriter sw = new StringWriter();
    StreamResult sr = new StreamResult(sw);
    transformer.transform(domSource, sr);

    System.out.println(sw.toString());

    con.close();
    rs.close();

} catch (Exception e) {
    e.printStackTrace();
} 
```

堆栈跟踪 ：

```
java.lang.NullPointerException
at org.ProjectXML.ui.DataBaseToXML.main(DataBaseToXML.java:61) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T09:36:11.923

诀窍是在 while 循环中添加这段简单的代码：

```
if (value != null)
  node.appendChild(doc.createTextNode(value.toString()));
else
  node.appendChild(doc.createTextNode(""));
  row.appendChild(node); 
```

完整代码：

```
public static String ConvertToXML1(ResultSet rs, String view)
  throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element results = doc.createElement(view);
    doc.appendChild(results);

    ResultSetMetaData rsmd = rs.getMetaData();
    int colCount = rsmd.getColumnCount();

    while (rs.next()) {
      Element row = doc.createElement("Row");
      results.appendChild(row);
      for (int i = 1; i <= colCount; i++) {
        String columnName = rsmd.getColumnName(i);
        Object value = rs.getObject(i);
        Element node = doc.createElement(columnName);
        // The added code is here
        if (value != null)
          node.appendChild(doc.createTextNode(value.toString()));
        else
          node.appendChild(doc.createTextNode(""));
        row.appendChild(node);
      }
    }

    DOMSource domSource = new DOMSource(doc);
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();

    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");

    StringWriter sw = new StringWriter();
    StreamResult sr = new StreamResult(sw);

    transformer.transform(domSource, sr);

    return sw.toString();
  } 
```

# php - MySQL Desc Limit 是不是限制返回？

> ID：15710180
> 
> 赞同：0
> 
> 时间：2013-03-29T19:30:17.153
> 
> 标签：php, mysql

我正在开发一个“集体帖子”页面，您的所有朋友的帖子都会出现在该页面上。我不是在谈论，`$_POST`而是在 facebook 上发布状态更新之类的帖子。我的代码有些作用，但唯一的问题是它返回了三个以上的结果，我不知道为什么。我环顾四周，但我没有任何运气。

编码：

```
 $my_id = $_SESSION['user_id'];
        $frnd_query = mysql_query("SELECT user_one, user_two FROM friends WHERE user_one='$my_id' OR user_two='$my_id'");
        while($run_frnd = mysql_fetch_array($frnd_query)) {
            $user_one = $run_frnd['user_one'];
            $user_two = $run_frnd['user_two'];
            if($user_one == $my_id){
                $user = $user_two;
            } else {
                $user = $user_one;
            }

              $res=mysql_query("SELECT * FROM posts WHERE user_id=$user ORDER BY timestamp DESC LIMIT 0, 3");

              while($row=mysql_fetch_assoc($res)) {
                ?>
                    <div class="span4">
                      <h3><a href="<?php echo username_from_user_id($user); ?>"><?php echo first_name_from_user_id($user), ' ', last_name_from_user_id($user) ?></a></h3>
                       <h8><?php echo date('F j, Y', strtotime($row['timestamp'])) ,' at ', date('h:i A', strtotime($row['timestamp'])); ?></h8>
                      <p><?php echo $row['content']; ?></p>
                      <p><a class="btn" href="#">View Reactions &raquo;</a></p>
                    </div><!--/span-->

                <?php
              }

        }//While Run_frnd

        ?> 
```

我尝试了很多东西，但没有运气。另外，当涉及到新的 PDO 时，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:40:05.683

```
SELECT *
FROM posts p
JOIN (SELECT user_one AS user_id
      FROM friends
      WHERE user_two = '$my_id'
      UNION DISTINCT
      SELECT user_two AS user_id
      FROM friends
      WHERE user_one = '$my_id') u
USING (user_id)
ORDER BY timestamp DESC
LIMIT 3 
```

看我的[小提琴](http://sqlfiddle.com/#!2/de5d2/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:34:19.143

这个查询：

```
mysql_query("SELECT * FROM posts WHERE user_id=$user ORDER BY timestamp DESC LIMIT 0, 3") 
```

正在此`while`循环中运行：

```
while($run_frnd = mysql_fetch_array($frnd_query)) { 
```

*因此，每个*朋友最多可以获得 3 个结果，而不是总共 3 个结果。

您可以通过以下方式解决它：

```
$res=mysql_query("SELECT * FROM posts WHERE user_id=$user ORDER BY timestamp DESC LIMIT 0, 3");

while($row=mysql_fetch_assoc($res)) {

  $i = !isset($i) ? 1 : $i + 1;

    ?>
                <div class="span4">
                  <h3><a href="<?php echo username_from_user_id($user); ?>"><?php echo first_name_from_user_id($user), ' ', last_name_from_user_id($user) ?></a></h3>
                   <h8><?php echo date('F j, Y', strtotime($row['timestamp'])) ,' at ', date('h:i A', strtotime($row['timestamp'])); ?></h8>
                  <p><?php echo $row['content']; ?></p>
                  <p><a class="btn" href="#">View Reactions &raquo;</a></p>
                </div><!--/span-->

    <?php

  if (3 == $i)
  {
    break 2;
  }  

} 
```

# api - VB6 -- 使用来自 URL 的 POST & GET 并以 VB6 形式显示

> ID：15710181
> 
> 赞同：1
> 
> 时间：2013-03-29T19:30:34.230
> 
> 标签：api, winapi, vb6, wininet

我的 VB6 如何形成 POST 2 vars，从 URL 中提取结果，然后将 VB6 var 分配给结果？

我需要有人向我展示非常基本的 VB6 示例代码或指出我正确的方向。这是最简单的形式——在最终产品中，PHP 变量将写入 MySQL，但这不是我需要帮助的。

我有一个接受 2 个参数的简单 PHP 页面：

```
test.php?var1=secret&var2=pass 
```

这是我非常简单的 PHP 代码

```
<?php

$var1 = $_GET['var1'];
$var2 = $_GET['var2'];

$varAcc = "ACCEPTED";
$varDen = "DENIED";

if ($var1 === "secret" && $var2 === "pass")
  {
   echo $varAcc;
  }
else
  {
   echo $varDen;
  }
?> 
```

这背后的逻辑是使用“userName”、“passWord”和“hardWareID”进行 VB6 登录，并发送一个哈希值。哈希将根据 MySQL 检查它是否存在，并返回 YES 或 NO 进行访问，他们的帐户还剩下多少天，以及一些其他详细信息，如 FULL NAME、ACCOUNT INFO 等。

（不..我不想使用 XML，只是想我会把它放在那里..只需 POST & Receive 到 vars）

谢谢你...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:12:11.293

VB 表单没有任何用于发送 HTTP 请求的内置机制。有些人可能会建议您使用 Internet 传输控制。但是，VB UserControl 有一个 HTTP 机制，您可以在不需要第三方控件的情况下使用它，假设您使用 GET 方法，并使用查询字符串来传递您的参数。如果必须使用 POST，则必须使用 Internet 传输控制。

创建一个引用“Microsoft Scripting Runtime”的 VB 项目（参见菜单 Project=>References）。添加一个用户控件。称之为“HttpService”。设置 InvisibleAtRuntime=True。将以下代码添加到 UserControl：

```
Option Explicit

Private Const m_ksProperty_Default              As String = ""

Private m_sHost                                 As String
Private m_nPort                                 As Long
Private m_sPath                                 As String
Private m_dctQueryStringParameters              As Scripting.Dictionary

Private m_sOutput                               As String

' Ensure that all parts of the query string are deleted.
Public Sub ClearQueryString()

    Set m_dctQueryStringParameters = New Scripting.Dictionary

End Sub

' Executes "GET" method for URL.
Public Function Get_() As String

    ' Read in data from URL. UserControl_AsyncReadComplete will fire when finished.
    UserControl.AsyncRead "http://" & m_sHost & ":" & CStr(m_nPort) & "" & m_sPath & "?" & GetQueryString(), vbAsyncTypeByteArray, m_ksProperty_Default, vbAsyncReadSynchronousDownload

    ' Return the contents of the buffer.
    Get_ = m_sOutput

    ' Clear down state.
    m_sOutput = vbNullString

End Function

' Returns query string based on dictionary.
Private Function GetQueryString() As String

    Dim vName                                   As Variant
    Dim sQueryString                            As String

    For Each vName In m_dctQueryStringParameters
        sQueryString = sQueryString & CStr(vName) & "=" & m_dctQueryStringParameters.Item(vName) & "&"
    Next vName

    GetQueryString = Left$(sQueryString, Len(sQueryString) - 1)

End Function

' Sets the remote host.
Public Property Let Host(ByVal the_sValue As String)

    m_sHost = the_sValue

End Property

' Sets the directory and filename part of the URL.
Public Property Let Path(ByVal the_sValue As String)

    m_sPath = the_sValue

End Property

' Sets the port number for this request.
Public Property Let Port(ByVal the_nValue As Long)

    m_nPort = the_nValue

End Property

' Sets a name/value pair in the query string. Supports duplicate names.
Public Property Let QueryStringParameter(ByVal the_sName As String, ByVal the_sValue As String)

    m_dctQueryStringParameters.Item(the_sName) = the_sValue

End Property

' Fired when the download is complete.
Private Sub UserControl_AsyncReadComplete(AsyncProp As AsyncProperty)

    ' Gets the data from the internet transfer.
    m_sOutput = StrConv(AsyncProp.Value, vbUnicode)

End Sub

Private Sub UserControl_Initialize()

    ' Initialises the scripting dictionary.
    Set m_dctQueryStringParameters = New Scripting.Dictionary

End Sub 
```

要使用此 UserControl，请将其添加到您的表单中。称之为“HttpService”。添加一个名为“txtOutput”的文本框来测试表单上的以下代码：

```
HttpService.Host = "localhost"
HttpService.Port = 80
HttpService.Path = "/test.php"
HttpService.QueryStringParameter("var1") = "secret"
HttpService.QueryStringParameter("var2") = "pass"

txtOutput.Text = HttpService.Get_ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:27:36.887

如果必须使用 POST，则必须使用 Internet 传输控制。在 VB6 IDE 中，按 CTL-T，然后选择“Microsoft Internet Transfer Control 6.0”。按确定。

将控件的实例添加到窗体。称之为“Inet”。向窗体添加一个名为“cmdPost”的命令按钮。添加对“Microsoft Scripting Runtime”的引用（参见菜单 Project=>References）。

将以下代码添加到您的表单中：

```
Option Explicit

Private Declare Function InternetCanonicalizeUrl Lib "Wininet.dll" Alias "InternetCanonicalizeUrlW" ( _
    ByVal lpszUrl As Long, _
    ByVal lpszBuffer As Long, _
    ByRef lpdwBufferLength As Long, _
    ByVal dwFlags As Long _
) As Long

Private m_sData                         As String
Private m_nDataReceived                 As Long
Private m_bPostActive                   As Boolean
Private m_bDataReceived                 As Boolean
Private m_bError                        As Boolean          ' For error handling.
Private m_bDisconnected                 As Boolean

Private Sub cmdPost_Click()

    Dim dctParameters                   As Scripting.Dictionary

    txtOutput.Text = vbNullString

    m_sData = vbNullString
    Set dctParameters = New Scripting.Dictionary

    dctParameters.Add "var1", "secret"
    dctParameters.Add "var2", "pass"

    txtOutput.Text = Post("http://localhost:80/test.php", dctParameters)

End Sub

' Returns post data string based on dictionary.
Private Function GetPostDataString(ByRef the_dctParameters As Scripting.Dictionary) As String

    Dim vName                                   As Variant
    Dim sPostDataString                         As String

    For Each vName In the_dctParameters
        sPostDataString = sPostDataString & UrlEncode(CStr(vName)) & "=" & UrlEncode(CStr(the_dctParameters.Item(vName))) & "&"
    Next vName

    GetPostDataString = Left$(sPostDataString, Len(sPostDataString) - 1)

End Function

Private Sub Inet_StateChanged(ByVal State As Integer)

    ' Ignore state change if we are outside the Post function.
    If m_bPostActive Then

        Select Case State
        Case StateConstants.icResponseReceived
            ReceiveData False
        Case StateConstants.icResponseCompleted
            ReceiveData True
        Case StateConstants.icDisconnected
            m_bDisconnected = True
        Case StateConstants.icError
            m_bError = True
        End Select

    End If

End Sub

' Synchronous Post function.
Private Function Post(ByRef the_sURL As String, ByRef the_dctParameters As Scripting.Dictionary)

    Dim sPostData                               As String
    Dim sHeaders                                As String

    ' Flag that we are in the middle of this function.
    m_bPostActive = True

    ' Create a string containing the POST parameters.
    sPostData = GetPostDataString(the_dctParameters)

    ' Create a headers string to allow POST.
    sHeaders = _
        "Content-Type: application/x-www-form-urlencoded" & vbNewLine & _
        "Content-Length: " & CStr(Len(sPostData)) & vbNewLine & _
        "Connection: Keep-Alive" & vbNewLine & _
        "Cache-Control: no-cache" & vbNewLine

    Inet.Execute the_sURL, "POST", GetPostDataString(the_dctParameters), sHeaders

    ' Allow Inet events to fire.
    Do
        DoEvents
    Loop Until m_bDataReceived Or m_bDisconnected

    If m_bDataReceived Then
        Post = m_sData
    End If

    ' Clear all state flags to defaults.
    m_bDataReceived = False
    m_bDisconnected = False
    m_bError = False
    m_sData = vbNullString
    m_nDataReceived = 0

    ' Flag that we have exited this function.
    m_bPostActive = False

End Function

' Receive as much data as we can.
' <the_bCompleted> should be True if the response is completed i.e. all data is available.
Private Sub ReceiveData(ByVal the_bCompleted As Boolean)

    Const knBufferSize                  As Long = 1024
    Dim nContentLength                  As Long
    Dim sContentType                    As String
    Dim sChunk                          As String
    Dim nChunkSize                      As Long

    ' If we haven't yet created our buffer, do so now, based on the size of the incoming data.
    If m_nDataReceived = 0 Then
        nContentLength = CLng(Inet.GetHeader("Content-length"))
        m_sData = Space$(nContentLength)

        ' You might want to do a check on the content type here, and if it is wrong, cancel the request with Inet.Cancel .
        sContentType = Inet.GetHeader("Content-type")
    End If

    ' Retrieve data until we have all the data.
    Do Until m_nDataReceived = Len(m_sData)

        ' If called when not all data has been received, then exit function if it is currently executing.
        If Not the_bCompleted Then
            If Inet.StillExecuting Then
                Debug.Print "Exiting"
                Exit Sub
            End If
        End If

        ' Get a chunk, copy it into the output buffer, and increment the amount of data received.
        sChunk = Inet.GetChunk(knBufferSize, DataTypeConstants.icString)
        nChunkSize = Len(sChunk)
        Mid$(m_sData, m_nDataReceived + 1, nChunkSize) = sChunk
        m_nDataReceived = m_nDataReceived + nChunkSize

    Loop

    ' Flag that all data has been retrieved.
    m_bDataReceived = True

End Sub

' Encode the URL data.
Private Function UrlEncode(ByVal the_sURLData As String) As String

    Dim nBufferLen                      As Long
    Dim sBuffer                         As String

    ' Only exception - encode spaces as "+".
    the_sURLData = Replace$(the_sURLData, " ", "+")

    ' Try to #-encode the string.
    ' Reserve a buffer. Maximum size is 3 chars for every 1 char in the input string.
    nBufferLen = Len(the_sURLData) * 3
    sBuffer = Space$(nBufferLen)
    If InternetCanonicalizeUrl(StrPtr(the_sURLData), StrPtr(sBuffer), nBufferLen, 0&) Then
        UrlEncode = Left$(sBuffer, nBufferLen)
    Else
        UrlEncode = the_sURLData
    End If

End Function 
```

# asp.net - UpdatePanel 导致完全回发。尝试进行部分回发

> ID：15710184
> 
> 赞同：2
> 
> 时间：2013-03-29T19:30:42.983
> 
> 标签：asp.net, ajax, updatepanel

我正在使用 gridview 显示数据的页面。我在 ItemTemplate 中有一些动态创建的文本框，每行包含几个文本框。现在我还有一个使用 ajax 的更新面板，并且应该只在单击我的链接按钮后呈现。在我希望发生这种情况而不会导致完整的回发之后，数据列表被绑定在我的代码中。但是，现在当我单击链接按钮时，它会导致完整的回发，从而消除了我动态创建的控件。

我觉得我非常接近解决方案。我需要其中之一发生（选项 1 似乎更有用）：单击链接按钮时不要导致回发，但仍会在更新面板中呈现我的完整数据列表

或者

在回发期间不会删除我动态创建的控件。

这是我的代码：

```
 <ItemTemplate>
        [&nbsp;<asp:LinkButton ID="SelectCommand" CommandName="Select"  runat="server" Text="+" CssClass="sunocoBold"/>&nbsp;]
        <%-- start sub panel--%>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server"> 
        <ContentTemplate>

            <asp:DataList ID="DataList1" runat="server" RepeatDirection="Vertical" 
             OnItemCommand="DataList_OnItemCommand"> 
            <ItemTemplate>
            <asp:LinkButton ID="Select" CommandName="SelectCommand" CommandArgument='<%#Eval("ship_to_num")%>'  runat="server" Text='<%#Eval("ship_to_num")%>'  />
             </ItemTemplate> 
            </asp:DataList> 

        </ContentTemplate>
        </asp:UpdatePanel> 
        <%-- end sub panel--%>
    </ItemTemplate>

  <asp:TemplateField HeaderText="Site Owner"  ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Top"> 
    <ItemTemplate>
      <asp:Panel ID="pnlNames" runat="server">
        </asp:Panel>
      <%-- <asp:Literal ID="NameList" runat="server" /> --%>
    </ItemTemplate> 
    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-29T19:34:02.950

UpdatePanel.Triggers 就是为此而生的！

在这里看一下：[了解 UpdatePanel.Triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

# python - 从 arcpy 中的要素图层更新要素类

> ID：15710188
> 
> 赞同：0
> 
> 时间：2013-03-29T19:30:58.480
> 
> 标签：python, arcpy

我正在编写一个 python 脚本来查找要素类中的属性代码中的错误。为了找到其中一些错误，我需要使用按位置选择工具。但是，按位置选择工具仅将图层作为输入，因此我必须从要素类创建图层。因此，如果我更新图层文件中的错误代码字段，我该如何填充原始要素类中的错误代码字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:29:53.710

**更新**

可以使用[arcpy 数据访问工具箱的 UpdateCursor](http://desktop.arcgis.com/en/desktop/latest/analyze/arcpy-data-access/updatecursor-class.htm#C_GUID-5CBF0F12-3B31-41AC-A525-65829523F692)，它比我最初描述的 UpdateCursor 的原始形式更新更快。

```
error_code=-1
with arcpy.da.UpdateCursor('lulcTV', ['error_field', 'VALUE']) as coverCSR:
    for tree in coverCSR:
        species = tree[1]  # returns'VALUE'. Not really needed, but good to know about
        tree[0] = error_code  # sets first requested field, "error_field"
        coverCSR.updateRow(tree) 
```

* * *

**原始答案**

似乎您可以使用 UpdateCursor。例子：

```
coverCSR=arcpy.UpdateCursor('lulcTV')
error_code=-1
for tree in coverCSR:
    species=tree.getValue('VALUE') # not really needed, but good to know about
    tree.setValue('error_field', error_code)
    coverCSR.updateRow(tree) 
```

这会逐行迭代所有行。

# .htaccess - .htaccess 根据导航到的域重定向到子文件夹

> ID：15710194
> 
> 赞同：0
> 
> 时间：2013-03-29T19:31:24.463
> 
> 标签：.htaccess, directory-structure

我正在为客户的一个共享托管计划上设置两个 wordpress 站点。123-reg 在说明中说许多站点可以托管在同一台服务器上，所以我认为这将是一个简单的点击按钮，但显然不是。

我有两个站点位于 2 个单独的子目录中；**FolkstockFestival**和**FolkstockArtsFoundation**。我还有两个域名**www.folkstockfestival.com**和**folkstockartsfoundation.com**。我需要每个域去其对应的子目录。

我认为您可以使用 DNS 设置来做到这一点，但我还没有找到这样做的方法，所以我认为 .htaccess 是前进的方向。使用 mod_rewrites，有没有办法根据请求的域将用户引导到正确的目录？.htaccess 文件将位于根目录中。

我不希望子目录显示在域上，因此 www.folkstockfestival.com 会按原样显示，但会指向正确的站点。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:19:13.773

使用 DNS 使您的两个域都指向您的服务器，并使用此 htaccess ：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} www\.folkstockartsfoundation\.com [NC]
RewriteRule ^(.*)$ /FolkstockArtsFoundation/$1 [L]

RewriteCond %{HTTP_HOST} www\.folkstockfestival\.com [NC]
RewriteRule ^(.*)$ /FolkstockFestival/$1 [L] 
```

# angularjs - 缩小角度

> ID：15710199
> 
> 赞同：8
> 
> 时间：2013-03-29T19:31:37.517
> 
> 标签：angularjs, minify

我对使用编译器工具自动化/简化 Angular 项目很感兴趣，它可能适用于其他所有东西，但是 Angular 注入和命名空间很尴尬，无法逃避编译器知识。这样做的最佳/专业方法是什么？

谢谢，最后一件事，

```
app.controller('ctrl',['$rootScope',function($rootScope){
    ...
}]); 
```

缩小时有效，但我如何缩小

```
app.config(['$routeProvider', function($routeProvider){

}]); 
```

当我缩小连续动作时它会起作用吗？

```
app.controller(...).directive(...).run(...) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-26T13:57:14.647

在 Angular 中，您需要为注入器注解函数，以了解要在函数中注入哪些依赖项。基本上有三种方法可以在您的函数中注入依赖项，这些方法在官方 Angular 网站上进行了描述。三种方式是：

1.使用内联数组注解

```
 yourModule.controller('yourController', ['$scope', function($scope) {}]); 
```

2.使用$inject属性注解

```
var yourController = function($scope) {};

yourController.$inject = ['$scope'];

yourModule.controller('yourController', yourController); 
```

3.隐含从函数参数名称

```
yourModule.controller('yourController', function($scope) {}); 
```

现在，当您缩小项目时，您的依赖项名称将被重命名。在第一种情况下，您的代码将类似于

```
yourModule.controller('yourController', ['$scope', function(e) {}]); 
```

在第三种情况下，您的代码将类似于

```
yourModule.controller('yourController',  function(e) {}); 
```

它会破坏您的应用程序，因为 Angular 无法识别您的依赖项名称。所以建议不要在你的项目中使用隐式依赖注入。从以上两个内联数组注释是程序员中最流行的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-01T00:00:14.567

我建议使用[https://github.com/olov/ng-annotate](https://github.com/olov/ng-annotate)。它将允许您编写如下代码。

```
angular.module("MyMod").controller("MyCtrl", function($scope, $timeout) {
}); 
```

然后 ngAnnotate 将其转换为以下内容，可以安全地进行缩小。

```
angular.module("MyMod").controller("MyCtrl", ["$scope", "$timeout",   function($scope, $timeout) {
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T13:31:31.517

minifier 使字符串保持不变，这就是我们使用数组表示法的原因。链接方法不会改变 minifier 保持字符串完整的方式。

```
var app=module(myapp);
app.config(['$routeProvider', function($routeProvider){
 $routeProvider.dosomestuffs()
}]); 
```

将被缩小为

```
var a=module(myapp);
a.config(['$routeProvider', function(b){
      b.dosomestuffs()
}]); 
```

但是由于 '$routeProvider' 字符串，角度仍然会找到它的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T02:52:39.443

如果您总是使用注释，那么缩小角度脚本应该不会有问题。

```
app.controller(['$scope', function(mrScope) {
    mrScope.yourProperty = 'it does not matter the dependency variable names if you use annotations'; 
}]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T08:07:09.807

只要您对要注入的依赖项使用数组表示法，就不会出现缩小问题。您正在使用的缩小工具应该可以毫无问题地处理您的任何示例（在我的项目中，我们正在使用`uglify`它来完成此操作）。

事实上，对于奇怪命名的注入（用点和字符命名，会导致无效的函数名称，如`ABC.CDE`），数组表示法是注入它们的最佳方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T22:21:56.017

I had the same problem when minifying, and like you, it only failed for the `$routeProvider` config elements.. The answer for me was to use the `$inject` method like Himanshu says for my configs, even though the syntax you show for your first example works for my controllers. So I'll post my `.config()` code here since I don't see it specifically listed in the answers above:

```
var app = angular.module('myApp');
var RouteProviderConfig = function ($routeProvider) {
        $routeProvider
            .when(...)
            .otherwise(...);
    };
RouteProviderConfig.$inject = ['$routeProvider'];
app.config(RouteProviderConfig); 
```

This fixed my error for configs, but my controllers work the way your first example is written:

```
app.controller('ctrl',['$rootScope',function($rootScope){
    ...
}]); 
```

The [Angular Documentation](https://docs.angularjs.org/tutorial/step_05#a-note-on-minification) seems to suggest that both ways should work, so I think it's possible there is a bug with configs, or `$routeProvider`, or something else entirely...

# android - Android 应用程序更高效？数据库或对象

> ID：15710201
> 
> 赞同：0
> 
> 时间：2013-03-29T19:31:54.063
> 
> 标签：android, database, performance, pojo, memory-efficient

我有 30 个对象，每个实例由 7 个字符串字段和一个小位图组成。这些对象将被销毁并每天重新创建。在我的 android 应用程序中，从数据库中写入和读取这些数据会更有效吗？还是简单地创建一个新类并创建 30 个实例并将它们存储在一个数组中？内存效率/性能/等。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:41:17.523

如果您不想为数据库编写样板代码，您可以将对象保存为文件`JSON`或`XML`格式化为文件。

你有两种方法：

1.  使用序列化存储和反序列化读取存储在文件系统中
2.  存储`JSON`或`XML`本地存储并在您的类和所需数据格式之间编写转换器

Database is good solution, because `SQLite` in Android is real fast and so on. But if you will want to change structure of table you will have to write `ALTER TABLE` queries in `onUpdate()` method of [`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html) and other troubles.

So I would recommend to use `XML` or `JSON` to store data.

**Upd**

Also, you can mark your custom data class as serializable, store values in ArrayList or other structure and serialize it to store, then deserialize to read.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:42:31.813

对于有限数量的对象，我认为您是具有`Object`代表性并将它们存储在`ArrayList`. 为大量条目设计的数据库。

但是如果数据需要保存一整天，`GC`如果你把它留在内存中，你就有丢失它的风险，在这种情况下，你别无选择，只能将它存储在数据库中。

你从哪里得到这些数据？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:44:08.660

将这些项目写入数据库，因为它们需要持久化，即使只有 24 小时。

您应该将图像文件存储在*内部存储*`Bitmap`沙箱中，并通过数据库中的文件名引用它们，因为在数据库中存储最小的blob通常效率低下。

# scala - 尾递归 - 这会优化使用帧吗？如何检查编译是否为尾递归？

> ID：15710202
> 
> 赞同：1
> 
> 时间：2013-03-29T19:31:56.703
> 
> 标签：scala, tail-recursion

在下面的代码中 - 列表的最大值和总和非常微不足道 - 我有一个在方法末尾调用的递归函数。scala 编译器会将其视为尾递归并优化堆栈帧的使用吗？我怎么知道/如何验证这一点？

```
package example

import common._

object Lists {
  def sum(xs: List[Int]): Int = {

    def recSum(current: Int, remaining: List[Int]): Int = {
      if (remaining.isEmpty) current else recSum(current + remaining.head, remaining.drop(1))
    } 

    recSum(0, xs)
  }

  def max(xs: List[Int]): Int = {

    def recMax(current: Int, remaining: List[Int], firstIteration: Boolean): Int = {
      if(remaining.isEmpty){
        current
      }else{
        val newMax = if (firstIteration || remaining.head>current) remaining.head else current
        recMax(newMax, remaining.drop(1), false)
      }
    }

    if (xs.isEmpty) throw new NoSuchElementException else recMax(0, xs, true)
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:33:58.143

在函数定义之前添加以使编译器在非尾递归方法上导致错误:) 此外，当您以这种方式对其进行优化时`@tailrec`，您必须假设该函数将*与命令式循环（又名 for/while 循环）一样高效*由编译器。

# c++ - 如何正确使用选择排序算法对列表进行排序？

> ID：15710206
> 
> 赞同：2
> 
> 时间：2013-03-29T19:32:06.777
> 
> 标签：c++, arrays, algorithm, sorting, selection

我无法让它工作，似乎无论我做什么，它都无法正确排序。

我正在尝试根据点数按降序排序。

```
Bryan_Bickell         2    5    +2

Brandon_Bolig         0    3     0

Dave_Bolland          4    2    -1

Sheldon_Brookbank     0    4   -1

Daniel_Carcillo       0    1    +3 
```

中间一栏是点数。

我正在使用 4 个数组来存储所有这些值，我将如何正确利用数组选择排序来以正确的方式对其进行排序？

我已经尝试了下面的所有答案，但它们似乎都不起作用，这就是我到目前为止所拥有的

```
void sortArrays( string playerNames[], int goals[], int assists[], int rating[], int numPlayers )
{
int temp, imin;
int points[numPlayers];

 for(int j = 0; j < numPlayers; j++)
    {
        points[j] = goals[j] + assists[j];
    }

    imin = points[0];

for(int i = 0; i < numPlayers; i++)
{
  if (points[i] < imin)
  {
        imin = points[i];
   }
}

 for(int j = 1; j < numPlayers; j++)
{
    if (points[j] > imin)
    {
        temp = points[j];
          points[j] = points[j-1];
               points[j-1] = temp;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:39:22.400

它应该是这样的......

```
void selsort(int *a,int size)
{
   int i,j,imin,temp;
   //cnt++;
   for(j=0;j<size;j++)
   {
       //cnt+=2;
       imin=j;
       for(i=j+1;i<size;i++)
       {
           //cnt+=2;
          if(a[i]<a[imin])
          {
             //cnt++;
             imin=i;
          }
        }

        if(imin!=j)
        {
            //cnt+=3;
            temp=a[j];
            a[j]=a[imin];
            a[imin]=temp;
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:41:37.663

如果只使用中间列进行排序，即用于对记录进行排序的键，则不需要 4 个数组来存储这些记录。据我了解，您正在尝试根据选择排序的点数对这些人的记录进行排序。代码应如下所示：假设`records`是您的记录数组

```
void selectionSort(RECORD records[], int n) {
  int i, j, minIndex, tmp;    
  for (i = 0; i < n - 1; i++) {
        maxIndex = i;
        for (j = i + 1; j < n; j++)  //find the current max
        {
              if (records[j].point > records[minIndex].point)
              {
                    //assume point is the number of point, middle column
                    minIndex = j;
              }
        }

        //put current max point record at correct position
        if (minIndex != i) {
              tmp = records[i];
              records[i] = records[minIndex];
              records[minIndex] = tmp;
        }
  }
} 
```

它会根据您的需要按“降序”对您的所有记录进行排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:26:50.720

如何将数据存储到 std::vector 然后对其进行排序

```
int compare(int a, int b){
 return (a>b);
}

void sort(std::vector<int> &data){
 std::sort(data.begin(), data.end(), compare);
} 
```

尽量使用向量，它们已经针对性能和更好的内存使用进行了大量优化

# r - rollapply 应用于 xts 对象

> ID：15710207
> 
> 赞同：3
> 
> 时间：2013-03-29T19:32:07.097
> 
> 标签：r, xts, zoo

```
require(quantmod)
require(PerformanceAnalytics)
getSymbols('INTC')
x<- monthlyReturn(INTC)
rollapply(1+x,12,cumprod) 
```

鉴于上面的代码，我得到了这个错误

```
Error in array(r, dim = d, dimnames = if (!(is.null(n1 <- names(x[[1L]])) &  : 
  length of 'dimnames' [1] not equal to array extent 
```

我可以验证 x 的类确实是 xts。

> 类（x）[1]“xts”“动物园”

我想 rollapply 适用于 xts/zoo 对象。我不确定如何解决这里的问题。

谢谢您的帮助。

**更新**

会话信息输出：

```
R version 2.15.3 (2013-03-01)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] PerformanceAnalytics_1.1.0 quantmod_0.4-0             TTR_0.22-0                
[4] xts_0.9-3                  zoo_1.7-9                  Defaults_1.1-1            

loaded via a namespace (and not attached):
[1] grid_2.15.3     lattice_0.20-13 tools_2.15.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:13:01.410

`rollapply.xts`假设函数为每个滚动窗口返回一个值。因此，您需要使用`prod`或`rollapply.xts`使用`cumprod`拆分应用组合策略，具体取决于您实际想要做什么。

```
rollapply(1+x,12,prod)
do.call(rbind, lapply(split(1+x,"years"), cumprod)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:27:32.160

你发现了一个错误。这是一种解决方法：

```
z <- as.zoo(x)
dim(z) <- NULL
rollapply(1+z, 12, cumprod) 
```

# c - AVL树样例说明

> ID：15710211
> 
> 赞同：2
> 
> 时间：2013-03-29T19:32:23.300
> 
> 标签：c, avl-tree

我正在阅读一些关于 AVL 树的示例源代码，部分实现是以下函数：

```
AvlTree MakeEmpty( AvlTree T )
{
    if( T != NULL )
    {
        MakeEmpty( T->Left );
        MakeEmpty( T->Right );
        free( T );
    }
    return NULL;
} 
```

在 main 函数中，它的使用如下：

```
int main()
{
    AvlTree T;

    T = MakeEmpty( NULL ); 
```

然后主函数移动到将数字插入到 AVL 树中。我的主要问题是

a) MakeEmpty 函数的目的是什么？我知道它是一个递归函数，但我不明白它的目的。

b) 为什么将 NULL 值传递给该函数？

非常感谢！

此外，AVLTree 是指向此结构的指针：

```
struct AvlNode
{
    ElementType Element;
    AvlTree  Left;
    AvlTree  Right;
    int      Height;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:36:11.773

这看起来像 c 风格`ctor`和`dtor`for `AvlNode`。

在 C++ 中，您可以执行类似的操作

```
struct AvlNode
{
    ElementType Element;
    AvlTree  Left;
    AvlTree  Right;
    int      Height;

    AvlNode()
      : Left(NULL), Right(NULL), Height(0)
    {}

    ~AvlNode()
    { 
       // free node
    } 
}; 
```

但是你不能在 C 中做到这一点。所以基本上，`MakeEmpty`只是为了确保两个指针都不指向随机地址，而是指向`NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:36:29.867

> a) MakeEmpty 函数的目的是什么？我知道它是一个递归函数，但我不明白它的目的。

`makeEmpty()`顾名思义，在后序旅行时为所有节点释放内存。注意在后序遍历器中，一旦处理了一个节点，它就不会再次被引用，因此对于 free()，所有节点后序都是正确的，因为被释放的节点不应再次被引用。

> b) 为什么将 NULL 值传递给该函数？

*它只是一种将 T初始化*为 NULL的对称方式。通知 `MakeEmpty( NULL );`返回 null，因为发送的是 null。

```
 T = MakeEmpty( NULL );
==      T = NULL 
```

**编辑**

MakeEmpty() 如何工作？（阅读评论）

```
AvlTree MakeEmpty( AvlTree T )
{
    if( T != NULL )
    {
        MakeEmpty( T->Left );    // but in stack 
        MakeEmpty( T->Right );   // but in stack 
        free( T );               // free node
    }
    return NULL;    // if T is passed NULL then it returns NULL
} 
```

对于 (B) 答案`T = MakeEmpty( NULL );`返回 NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:37:49.880

这是我对代码的理解：

*“MakeEmpty函数的目的是什么？我知道它是一个递归函数，但我不明白它的目的。”*

在 int main() 中，基本上你正在创建一个 AvlTree 对象。MakeEmpty 传递 Null 的原因是因为您想要一个空的树节点，其左右子节点未定义。

湾。为什么它被传递为null？Null 终止递归，因为这个想法是创建一个空树，其中未定义的子节点传入 Null 将创建“emtpy 对象”。

据我所知，基本上这整段代码正在创建一个空的 AvlTree。HTH。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T19:40:30.463

a）它正在清空树 - 即释放所有节点

b) 因为它是一个递归函数，所以它会在到达叶子时传递 null，尽管它可以在下一次递归调用之前轻松检查 null

# c - OpenCL 内核执行速度比单线程慢

> ID：15710219
> 
> 赞同：4
> 
> 时间：2013-03-29T19:32:57.590
> 
> 标签：c, optimization, opencl, gpgpu

总之，我编写了一个非常简单的 OpenCL 内核，它使用简单的平均将 RGB 图像转换为灰度。

一些背景：

1.  图像存储在映射内存中，作为 24 位非填充内存块
2.  输出数组存储在固定内存中（映射为`clEnqueueMapBuffer`），大小为 8 bpp
3.  设备上分配了两个缓冲区（`clCreateBuffer`），一个是专门读取的（我们`clWriteBuffer`在内核启动之前进入），另一个是专门写入（我们`clReadBuffer`在内核完成之后）

我在 1280x960 图像上运行它。该算法的串行版本平均为 60 毫秒，OpenCL 内核平均为 200 毫秒！！！我做错了什么，但我不知道如何进行，优化什么。（在没有内核调用的情况下计时我的读/写，算法在 15 毫秒内运行）

我正在附加内核设置（大小和参数）以及内核

* * *

**编辑**：所以我写了一个更笨的内核，它内部没有全局内存访问，它只有 150 毫秒......这仍然非常慢。我想也许我搞砸了全局内存读取，它们必须是 4 字节对齐的还是什么？没有...

**编辑2：**从我的内核中删除所有参数给了我显着的加速......我很困惑我认为既然我是`clEnqueueWriteBuffer`内核应该不从主机->设备和设备->主机进行内存传输... .

**编辑3：**想通了，但我仍然不明白为什么。如果有人能解释一下，我很乐意为他们提供正确的答案。问题是按值传递自定义结构。看起来我需要为他们分配一个全局内存位置并传递他们`cl_mem`的 s

* * *

内核调用：

```
//Copy input to device
result = clEnqueueWriteBuffer(handles->queue, d_input_data, CL_TRUE, 0, h_input.widthStep*h_input.height, (void *)input->imageData, 0, 0, 0);
if(check_result(result, "opencl_rgb_to_gray", "Failed to write to input buffer on device!")) return 0;

//Set kernel arguments
result = clSetKernelArg(handles->current_kernel, 0, sizeof(OpenCLImage), (void *)&h_input);
if(check_result(result, "opencl_rgb_to_gray", "Failed to set input struct.")) return 0;
result = clSetKernelArg(handles->current_kernel, 1, sizeof(cl_mem), (void *)&d_input_data);
if(check_result(result, "opencl_rgb_to_gray", "Failed to set input data.")) return 0;
result = clSetKernelArg(handles->current_kernel, 2, sizeof(OpenCLImage), (void *)&h_output);
if(check_result(result, "opencl_rgb_to_gray", "Failed to set output struct.")) return 0;
result = clSetKernelArg(handles->current_kernel, 3, sizeof(cl_mem), (void *)&d_output_data);
if(check_result(result, "opencl_rgb_to_gray", "Failed to set output data.")) return 0;

//Determine run parameters
global_work_size[0] = input->width;//(unsigned int)((input->width / (float)local_work_size[0]) + 0.5);
global_work_size[1] = input->height;//(unsigned int)((input->height/ (float)local_work_size[1]) + 0.5);

printf("Global Work Group Size: %d %d\n", global_work_size[0], global_work_size[1]);

//Call kernel
result = clEnqueueNDRangeKernel(handles->queue, handles->current_kernel, 2, 0, global_work_size, local_work_size, 0, 0, 0);
if(check_result(result, "opencl_rgb_to_gray", "Failed to run kernel!")) return 0;

result = clFinish(handles->queue);
if(check_result(result, "opencl_rgb_to_gray", "Failed to finish!")) return 0;

//Copy output
result = clEnqueueReadBuffer(handles->queue, d_output_data, CL_TRUE, 0, h_output.widthStep*h_output.height, (void *)output->imageData, 0, 0, 0);
if(check_result(result, "opencl_rgb_to_gray", "Failed to write to output buffer on device!")) return 0; 
```

核心：

```
typedef struct OpenCLImage_t
{
    int width;
    int widthStep;
    int height;
    int channels;
} OpenCLImage;

__kernel void opencl_rgb_kernel(OpenCLImage input, __global unsigned char*  input_data, OpenCLImage output, __global unsigned char * output_data)
{
    int pixel_x = get_global_id(0);
    int pixel_y = get_global_id(1);
    unsigned char * cur_in_pixel, *cur_out_pixel;
    float avg = 0;

    cur_in_pixel = (unsigned char *)(input_data + pixel_y*input.widthStep + pixel_x * input.channels);
    cur_out_pixel = (unsigned char *)(output_data + pixel_y*output.widthStep + pixel_x * output.channels);

    avg += cur_in_pixel[0];
    avg += cur_in_pixel[1];
    avg+= cur_in_pixel[2];
    avg /=3.0f;

    if(avg > 255.0)
        avg = 255.0;
    else if(avg < 0)
        avg = 0;

    *cur_out_pixel = avg;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T06:04:23.137

将值复制到将要创建的所有线程的开销可能是时间的可能原因；至于全局内存，在另一种情况下引用就足够了。唯一能够准确回答的 SDK 实施者.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:11:57.347

您可能想尝试使用 [64, 1, 1] 之类的 local_work_size 来合并您的内存调用。（注意 64 是 1280 的除数）。

如前所述，您必须使用分析器才能获取更多信息。你用的是nvidia卡吗？然后下载 CUDA 4（不是 5），因为它包含一个 openCL 分析器。

你的表现一定远非最佳。更改局部工作大小，全局工作大小，尝试每个胎面处理两个或四个像素。你能改变像素在治疗之前的存储方式吗？然后打破树数组的结构，以便更有效地合并内存访问。

Tou 可以通过 GPU 工作隐藏您的内存传输：使用您附近的分析器会更容易做到。

# nservicebus - NServiceBus 路由到 SOAP 端点

> ID：15710220
> 
> 赞同：1
> 
> 时间：2013-03-29T19:33:09.070
> 
> 标签：nservicebus

我们正在研究将 NServiceBus 用于我们的 ESB 实现。我们有几个不使用 Microsoft 技术的外部合作伙伴。有没有一种方法可以使用 NServiceBus 路由到 SOAP 或 REST 服务，然后根据来自服务的响应接受已处理的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:30:47.380

是的，您可以让服务公开 WCF 端点以接受命令、处理它并返回错误/返回代码，然后在 Web 服务响应中传递该代码。

查看文章[如何将 NServiceBus 端点公开为 Web/Wcf 服务？](http://support.nservicebus.com/customer/portal/articles/862411-how-do-i-expose-an-nservicebus-endpoint-as-a-web-wcf-service-)在 NServiceBus 支持站点上，但请注意，从 NServiceBus 4.0（当前处于测试阶段）`Webservice`开始，文章提到的选项将被删除，因为 Microsoft 已[正式宣布 ASMX Web 服务是“遗留技术”。](http://johnwsaunders3.wordpress.com/2009/07/03/microsoft-says-asmx-web-services-are-a-%E2%80%9Clegacy-technology%E2%80%9D/)

除此之外，WcfService 在这种情况下应该工作得很好。

# c# - Word 2010 互操作：显示“另存为”对话框

> ID：15710235
> 
> 赞同：3
> 
> 时间：2013-03-29T19:34:08.870
> 
> 标签：c#, .net, interop, word-2010

当用户对 Word 文档执行特定操作时，我需要一种方法来始终显示另存为对话框。目前，该对话框仅在保存未保存的文档时显示。我正在处理的这些文档已经以特定名称保存在一个位置，但用户需要能够更改名称和位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:52:36.457

弄清楚了。非常简单，以防其他人遇到同样的问题：

```
var wordDialog = 
Globals.ThisDocument.ThisApplication.Dialogs[Word.WdWordDialog.wdDialogFileSaveAs];
wordDialog.Show(); 
```

# asp.net-mvc - 模态删除按钮不起作用 asp.net

> ID：15710236
> 
> 赞同：1
> 
> 时间：2013-03-29T19:34:16.770
> 
> 标签：asp.net-mvc, jquery

我正在制作一个存储客户的页面。客户可以拥有域、联系人和工作。每个联系人/域/工作都具有编辑/删除功能。

每次您希望编辑/删除它时，我都在使用 MVC 4 ASP.NET c#，它会启动一个模态表单。
除了显示的字段外，联系人和域的删除视图完全相同。域删除功能在部分视图中不会触发任何内容。但是，当它作为常规视图在 url 中导航到时，它会成功。联系人删除在部分视图中工作正常。

```
@model STClient.Models.Domain

@{
    ViewBag.Title = "DeleteDomain";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm("DeleteDomain", "Client", FormMethod.Post)) {
    <div class="modal-header">
        <h2>Are you sure you want to delete?</h2>
    </div>
    <div class="modal-body">
        <fieldset>
            <div class="display-label">
                <h3>
                    @Html.HiddenFor(model => model.server.ID)
                    @Html.HiddenFor(model => model.ID)
                    @Html.DisplayNameFor(model => model.Name):
                    @Html.DisplayFor(model => model.Name)
                </h3>
            </div>
            <div class="display-label">
                <h5>
                    @Html.DisplayNameFor(model => model.Registrar):
                    @Html.DisplayFor(model => model.Registrar)
                </h5>
            </div>
            <div class="display-label">
                <h5>
                    @Html.DisplayNameFor(model => model.PrimaryDNS):
                    @Html.DisplayFor(model => model.PrimaryDNS)
                </h5>
            </div>
            <div class ="display-label">
                <h5>
                    @Html.DisplayNameFor(model => model.SecondaryDNS):
                    @Html.DisplayFor(model => model.SecondaryDNS)
                </h5>
            </div>
        </fieldset>
    </div>
    <div class="modal-footer">
        <a class="btn" href="">Cancel</a>
        <input class="btn btn-danger" type ="submit" value="Delete" />
    </div>
} 
```

这是在删除链接用于域的详细信息页面上。

```
<div class="modal fade" id="deleteDomain-modal"></div>

<script type="text/javascript">
    $(function () {
        $(".deleteDomain").click(function () {
            $.ajax({
                url: "/Client/DeleteDomain",
                type: "GET",
                data: {id: $(this).attr('id')},
                dataType: "html",
                success: function(e)
                {
                    $("#deleteDomain-modal").html(e);
                }
            });
            $("#deleteDomain-modal").modal();
        });
    });
    </script> 
```

最后在客户端控制器中

```
 public ActionResult DeleteDomain(int id)
    {
        Domain domain = db.Domains.Find(id);
        if (domain == null)
        {
            HttpNotFound();
        }
        return PartialView(domain);
    }

    [HttpPost, ActionName("DeleteDomain")]
    public ActionResult DeleteDomainConfirmed(int id)
    {
        Domain domain = db.Domains.Find(id);
        Server server = db.Servers.Find(id);
        db.Domains.Remove(domain);
        db.SaveChanges();
        db.Servers.Remove(server);
        db.SaveChanges();
        LogDeleteDomain(domain, server);
        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:30:48.837

我想我也有类似的问题。原因是参数值是作为字符串而不是整数发送的。我不得不铸造价值。因此，在您的脚本代码中，您可以尝试更改该行：

```
data: {id: $(this).attr('id')}, 
```

到：

```
data: {id: parseInt($(this).attr('id'))}, 
```

这解决了我的问题。

# ajax - ajaxLink 和 jQuery 的多个实例

> ID：15710240
> 
> 赞同：0
> 
> 时间：2013-03-29T19:34:28.123
> 
> 标签：ajax, zend-framework, jquery

我在 Zend 框架中工作。我有这样的布局：

```
<html>
    <head>
        <script>
            function myBeforeSendCallbackJsFunc() {$('#content-loading').show();}
            function myCompleteCallbackJsFunc() {$('#content-loading').hide();}
        </script>
    </head>
    <body>
        <div id="menu">
            <?php
            echo $this->ajaxLink("<li>MENU 1</li>", '/controllertest/actionindex', array('update' => '#content', 'beforeSend' => 'myBeforeSendCallbackJsFunc();', 'complete' => 'myCompleteCallbackJsFunc()'), array('format' => 'ajax'));
            ?>
        </div>
        <div id="content">
        </div>
        <?php echo $this->jQuery()->enable()->uiEnable(); ?>
    </body>
</html> 
```

在这种情况下，ajaxLink 函数可以完美运行。我触发了 MENU 1，'#content' 得到了 '/controllertest/actionindex' 内容。但是，如果在“/controllertest/actionindex”中存在 ajaxLink 函数，它只有在我再次包含时才有效：

```
<?php echo $this->jQuery()->enable()->uiEnable(); ?> 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:21:47.733

当通过 ajax 在某些包含中重复调用 AjaxLink 助手时，我正在生成由该助手创建的 ajax 函数的多个实例。

当异步调用时，AjaxLink 会造成混乱。

解决方法：不要使用AjaxLink，创建一个全局唯一的ajax函数。

# asp.net - 如何从父页面asp.net调用用户控件中的函数

> ID：15710243
> 
> 赞同：0
> 
> 时间：2013-03-29T19:34:35.413
> 
> 标签：asp.net, visual-studio-2010, web-applications

ASP.NET 4.0

是否可以在后面的代码中从父页面调用用户控件中的函数？用户控件是由其他程序员创建的，但是每个控件都有一个我寻找的公共公共函数，称为“输出”，它返回主页所需的值。主页面有一个主菜单，因此根据主菜单选择只会显示一个用户控件。

WebApp 中带有用户控件的文件夹：

```
> UserControls
  ProductA.ascx
  ProductB.ascx
  ProductC.ascx
  ProductD.ascx
  etc... 
```

用户单击菜单按钮时的代码：

```
Dim product As string = Session("MenuProduct")
Dim uc As UserControl
uc = LoadControl("~/UserControls/" & product & ".ascx")
InputPanel.Controls.Add(uc) 
```

我想访问的用户控件中的功能。这将是一个常见的功能。

```
Public Function Output(ByVal ParamArray expr() As Object) As Object

   ...code

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:40:35.887

如果它们具有正确的访问修饰符，您可以从父页面调用 userControl 中的函数。公开 我相信

```
Dim product As string = Session("MenuProduct")
Dim uc As UserControl
uc = LoadControl("~/UserControls/" & product & ".ascx")
InputPanel.Controls.Add(uc)

if (uc is TypeWithMethod )
{
    Dim ucTyped As TypeWithMethod
    ucTyped = uc As TypeWithMethod
    ucTyped.Method()
} 
```

VB 语法生疏，一直放着；在每一行之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:38:45.487

以下是安德鲁所说的小细节......

```
Public Interface IGroupable
    Function GetGroupId() As Int32
End Interface

Class MyUserControl
    Inherits UserControl
    Implements IGroupable
    Public Function GetGroupId() As Integer Implements IGroupable.GetGroupId
        Return 1
    End Function
End Class

Class MyPage
    Inherits Page
    Dim id As Int32 = DirectCast(myUserControl, IGroupable).GetGroupId()
End Class 
```

因此，基本上创建一个界面，让您的所有用户控件实现该界面，然后当您在网页中加载任何用户控件时...只需将它们转换为您的界面名称的类型......您的界面将具有对功能的访问。

# visual-studio-2010 - Tablix 列格式值

> ID：15710245
> 
> 赞同：2
> 
> 时间：2013-03-29T19:34:45.063
> 
> 标签：visual-studio-2010, reporting-services, formatting, expression

我有一个包含几列的 tablix。其中一列具有折扣百分比值。如果所有行的值都为 0，我想将字体更改为白色，并且如果某些单元格的值不同，我希望所有值都显示为黑色。

我已将字体颜色值设置为：

```
=IIF(SUM(Fields!Discount.Value)=0, "White", "Black") 
```

当所有列都为 0 时，所有内容都显示为白色。

问题是当一些值不是 0 时，它们显示为黑色，但 0 值是白色的并且有空单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:24:34.870

如果您在**Tablix**的详细信息行中使用此表达式，您可能需要在子句中添加一个参数，例如`Scope`：`Sum`

```
=IIF(SUM(Fields!Discount.Value, "DataSet1")=0, "White", "Black") 
```

这是因为除非指定另一个，否则将在当前行中`Sum`执行，因此您的表达式将只考虑当前行。`Scope`如上所述添加范围将考虑**Dataset**中的所有行。

# css - 输入的特异性[type="text"]

> ID：15710246
> 
> 赞同：0
> 
> 时间：2013-03-29T19:34:52.587
> 
> 标签：css, css-selectors, css-specificity

如何为以下内容添加特异性：

```
input[type="text"] { color:red } 
```

我想要类似的东西：

```
#my_id input[type="text"] { color:red } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:37:08.140

你的意思是这样吗？

```
input[type="text"]#my_id { color:red } 
```

[查看演示](http://jsfiddle.net/d7r48/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:37:17.007

当您使用 id**并且不想处理子节点**时，您可以省略任何其他部分，id 必须是唯一的，因此您可以只使用：

```
#my_id { color:red } 
```

# matlab - 通过matlab读取txt文件中特定字符串后的数字

> ID：15710247
> 
> 赞同：0
> 
> 时间：2013-03-29T19:35:01.080
> 
> 标签：matlab

我在一个大的 a.txt 文件中重新解释了我的 pb

食物量为 1

期望的旅行是 5

我需要阅读 'Amount of Food is' 表达之后的 1 和 'Desired Travel is' 表达之后的 5，再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:59:24.227

在您的特定情况下，使用正则表达式执行此操作的方法是：

首先，您必须确定哪些字符串在您的搜索中是有效的，例如：

```
firstpar = 'First parameter is [0-9]+'; 
```

表示您正在寻找以**数字序列** 结尾的字符串*“第一个参数是”*。

 **然后你可以使用`regexp`or`regexpi`以下列方式：

```
results = regexp(mystring, firstpar, 'match'); 
```

`mystring`您执行搜索的文本在哪里，这`'match'`意味着您希望部分文本作为输出，而不是索引。

现在，`results`是一个单元格矩阵，每个单元格都包含一个字符串，该字符串出现在您的文本中并满足您的`firstpar`定义。为了从字符串的单元格矩阵中提取数字，您可以`regexp`再次使用，但现在可以帮助自己`cellfun`，它迭代地将您的命令应用于单元格矩阵的所有单元格：

```
numbers = cellfun(@(x) str2num(regexp(x, '[0-9]+', 'match', 'once')), results); 
```

`numbers`是您要查找的数字数组。

您可以对不同的字符串模式执行相同的操作 - 如果您想要更通用的字符串定义（而不是`firstpar`我们在此处使用的直接定义）阅读[有关正则表达式的 matlab 文档](http://www.mathworks.com/help/matlab/ref/regexpi.html)（alexcasalboni 将其粘贴在他的评论中），向下滚动到 Input Arguments 和扩展“表达式”。

`regexp`和之间的区别在于`regexpi`后者不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:02:45.133

你可以看看[这个](http://www.mathworks.it/it/help/matlab/ref/regexpi.html)：使用 regexpi 你可以简单地在你的字符串中查找数字。

语法很简单：

```
startIndex = regexpi(str,expression) 
```

其中`expression`参数是一个正则表达式（即 '\d*' 检索连续数字）。**

# python - Python AttributeError - 'Category' 对象没有属性 'product_set'

> ID：15710252
> 
> 赞同：1
> 
> 时间：2013-03-29T19:35:32.853
> 
> 标签：python, mysql, django, django-south, attributeerror

昨天我`show_category`的电子商务目录视图功能齐全。例如，导航到 domain.com/category/necklaces 将调用`show_category`视图并显示我在项链类别中的所有产品。这是通过两个表、产品和类别以及它们关联的“通过”表来完成的。

我一直在使用 just `syncdb`，但我必须添加一个新的 ManyToManyField，所以 Django South 参与其中，我安装了它，重新创建了数据库，使用 django south 来管理我的迁移，设置了所有内容并将我的类别和产品添加回django 管理员，一切顺利。我在 SQL Workbench 中检查了数据库本身，一切看起来都很棒——完美重现了我昨晚的内容，但现在使用的是 Django South。

但后来我导航到 domain.com/category/necklaces，我希望看到我的类别页面列出了我的一个测试项链产品。相反，我得到了这个：

```
AttributeError at /category/necklaces/
'Category' object has no attribute 'product_set' 
```

错误发生在这里，在我的 catalog.views.py 中：

```
def show_category(request, 
                  category_slug, 
                  template_name="catalog/category.html"):
    c = get_object_or_404(Category, 
                          slug=category_slug)
    products = c.product_set.all() 
```

但问题是，从昨晚开始，这一切都没有改变。我检查了数据库，是的，产品存在，是的，“通过”表正确地将该产品连接到这个类别。

我应该在哪里看的任何想法？我假设错误出在数据库的某个地方，因为我基本上没有接触当时正在工作的代码，但是数据库看起来如此原始，很难说。任何和所有的帮助表示赞赏。在此期间，我会在自己周围闲逛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:09:32.123

添加评论作为将来参考的答案：

如果您`related_name`在外键引用中使用了 a ，`_set`则将不再起作用，因为 django 提供`_set`了默认相关名称，并且自定义相关名称优先

关于`related_name` [此处使用的一些文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)

# continuous-integration - 持续集成的级别

> ID：15710254
> 
> 赞同：3
> 
> 时间：2013-03-29T19:35:55.523
> 
> 标签：continuous-integration, continuous-deployment, continuous-delivery, continuous-testing

在最近的一次采访中，我被问及我们公司的持续集成水平。当我开始描述我们所做的事情时，面试官插话并问我等级编号——对我来说听起来像是 CMM 等级。当我告诉他我不知道我现在的公司有什么级别时，他似乎对我的回答很不高兴。

我无法在网上找到任何此类信息。

有人可以请一些光吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:51:14.270

恐怕面试官不能胜任他所问的问题。这样的面试官会问你

> > 为什么井盖是圆形的？

他们希望你说出一些安全的话。[但他们会完全无视其他有效答案，例如此处](http://hebig.org/blog/003029.php)描述的答案

没有严格定义的级别。只是一些博主分享了他们对这个话题的个人看法。根据他们的私人分类，你是在 A 级、第 2 阶段还是第 III 阶段真的很重要吗？不，不是的。你会知道这样的分类来正确地做 CI 吗？不，你不应该。

实际数量无关紧要，重要的是CI流程的描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T13:55:34.913

I agree that it was a bad interview question but some people have been talking about a maturity model for Continuous Delivery (with 5 levels). For example, take a look at

[http://www.infoq.com/articles/Continuous-Delivery-Maturity-Model](http://www.infoq.com/articles/Continuous-Delivery-Maturity-Model)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T14:28:14.150

Presently in the industry maturity levels for Continuous Integration are sort of customized. Some companies have maximum levels of 6 while some companies like mine follow 5 levels. Continuous Integration concept was envisaged at ThoughtWorks and if you go through this [document](http://info.thoughtworks.com/rs/thoughtworks2/images/Continuous%20Delivery%20_%20A%20Maturity%20Assessment%20ModelFINAL.pdf) on their website you'll see they too follow a model of 5 levels.

P.S - It indeed was a vague interview question.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:54:00.323

听起来你的面试官在询问 CMMI（能力成熟度模型集成）] [1](http://en.wikipedia.org/wiki/Capability_Maturity_Model_Integration)。

这里的级别具有非常特定的含义，用于指示组织或团队内的流程成熟度级别。我从来没有真正在任何关心 CMMI 的地方工作过，但是如果你申请的公司使用它，或者他们的客户使用它，这对他们来说可能很重要。

It sounds to me like the interviewer wanted to know if you knew about this at all, and could explain about the different levels. However, as mentioned previously, knowing about Continuous Integration and why it is good for your project (and when it can be bad) is the important piece to pull out. Not whether you've memorized the Wikipedia page on CMMI.

# c - 推送到仅包含 C 中唯一值的堆栈

> ID：15710255
> 
> 赞同：3
> 
> 时间：2013-03-29T19:36:01.247
> 
> 标签：c, linked-list, stack, duplicates, push

我已经实现了一个带有指针的堆栈，它也像它假设的那样工作。现在，我需要它推送到堆栈，而不是推送副本。例如，如果我将“2”压入堆栈，再压入另一个“2”仍然会导致堆栈中只有一个“2”，因为它已经存在。

下面是我如何尝试创建新的推送功能。我知道我想遍历堆栈并检查我要添加的元素，但我想我做错了吗？谁能帮我吗？

```
 typedef struct Node {
        void *content;
        struct Node *next;
    } Node;

    typedef struct Stack {
        Node *head;
        int count; 
    } Stack;

    void push(Stack *stack, void *newElem) {
        Node *newNode = (Node*) malloc(sizeof(Node));
        if (stack->count > 0) {
             int i;
             for (i = 0, newNode = stack->head; i < stack->count; i++, newNode =
                 newNode->next) {
                   if (newNode->content == newElem) return;
             }
        } else {
            newNode->next = stack->head;
            newNode->content = newElem;
            stack->head = newNode;
            stack->count++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:38:41.830

```
if (newNode->content == newElem) 
```

您正在比较两个*指针*。我猜你想检查它们的*内容*是否相等：

```
#include <string.h>

if (memcmp(newNode->content, newElem, size) == 0) 
```

该值`size`可以由调用者指示。在你的情况下，它应该是`sizeof(int)`.

此外，一旦遍历了堆栈，就不会将元素添加到数据结构中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:43:51.130

问题是，如果您的堆栈是非空的，并且您*没有*在堆栈中找到已经存在的元素，那么您什么也不做。您需要摆脱`else`关键字并使该代码无条件。然后，在您知道是否需要之前为新节点分配空间，更糟糕的是，用您在堆栈上的迭代覆盖新分配的指针，以查看是否需要推送它。`}`所以在结束后将malloc向下移动`if`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:52:43.910

你已经有一个工作

```
void push(Stack *stack, void *newElem); 
```

对？

那么，为什么不写一个新函数

```
int push_unique(Stack *stack, void *newElem) {
    if (find_value(stack, newElem) != NULL) {
        return 1; // indicate a collision
    }
    push(stack, newElem); // re-use old function
    return 0; // indicate success
} 
```

现在您已将问题简化为写作

```
Node *find_value(Stack *stack, void *value); 
```

……你能做到吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-28T09:36:32.270

我不确定您是否意识到这一点，但您提出的实现是对链表执行线性搜索。如果您将 2,000 个元素推送到堆栈上，每个元素值平均有 2 个重复项，那么就是对链表的 2,000 次搜索，平均在 500-750 个链接之间（这取决于何时，IE：什么顺序，重复项呈现给搜索功能。这需要 100 万次以上的比较。不漂亮。

A MUCH more efficient duplicate detection in find_value() above could use a hash table, with search time O(1), or a tree, with search time O(log N). The former if you know how many values you're potentially pushing onto the stack, and the latter if the number is unknown, like when receiving data from a socket in real-time. (if the former you could implement your stack in an array instead of a much slower, and more verbose linked-list)

In either case, to properly maintain the hashtable, your pop() function would need to be paired with a hashtable hashpop() function, which would remove the matching value from the hashtable.

With a Hashtable, your stack could just point to the element's value sitting in it's hash location - returned from find_value(). With a self-balancing tree however, the location of the node, and thus the element value, would be changing all the time, so you'd need to store the element's value in the stack, and the tree. Unless you're writing in a very tight memory environment, the performance the 2nd data structure would afford would be well worth the modest cost in memory.

# php - 升级到 MySQLi - 就像将 mysql 换成 mysqli 一样简单？

> ID：15710256
> 
> 赞同：3
> 
> 时间：2013-03-29T19:36:02.273
> 
> 标签：php, mysql, mysqli

在我看到的许多不同帖子的大量回复之后，我停止使用 mysql 并尝试升级我的网站以使用 mysqli。

我的问题是，根据我在下面列出的 mysql 功能（这是我目前使用的功能），我可以在 'mysql_' 上为 'mysqli_' 进行全面替换而不破坏功能吗？我已经对这些函数中的每一个进行了一些研究，并且没有一个 mysqli 版本看起来不起作用，但我只需要在将它们全部换掉之前确定。

询问

fetch_array

连接

选择数据库

错误

real_escape_string

行数

fetch_assoc

free_result

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:55:45.587

查看[这个 SO question](https://stackoverflow.com/questions/1390607/how-could-i-change-this-mysql-to-mysqli)，它至少为您的大多数功能提供了答案。

例如：

*   `mysql_connect`将被替换为[`mysqli_connect`](http://php.net/manual/en/mysqli.connect.php)
*   `mysql_error`将被替换为[`mysqli_error`](http://php.net/manual/en/mysqli.error.php)and/or [`mysqli_connect_error`](http://php.net/manual/en/mysqli.connect-error.php)，具体取决于上下文
*   `mysql_query`将被替换为[`mysqli_query`](http://php.net/manual/en/mysqli.query.php)

# android - Widget.ProgressBar.Small 和 Widget.ProgressBar.Small.Inverse 的区别

> ID：15710262
> 
> 赞同：3
> 
> 时间：2013-03-29T19:36:30.027
> 
> 标签：android

我为动作栏按钮尝试了两种不同的进度条样式，通过

```
refreshMenuItem.setActionView(R.layout.actionbar_indeterminate_progress); 
```

## actionbar_indeterminate_progress.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    style="?attr/actionButtonStyle" >
    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@android:style/Widget.ProgressBar.Small" />
</LinearLayout> 
```

我试过**Widget.ProgressBar.Small**和**Widget.ProgressBar.Small.Inverse**。但是，我没有看到任何视觉差异。

## Widget.ProgressBar.Small

![在此处输入图像描述](../Images/bb8a4a1a8742f032251d0bc74b4651d4.png)

## Widget.ProgressBar.Small.Inverse

![在此处输入图像描述](../Images/330b609dfbc4d3ed05f009031c00730d.png)

我希望有一个*相反*的颜色，但没有。我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T20:04:22.550

有细微的差别，但一开始很难注意到。

`Widget.ProgressBar.Small`样式版本旨在放置在深色背景上，而样式`Widget.ProgressBar.Small.Inverse`版本旨在放置在浅色背景上。

通常你可能不会注意到这一点。检查它的最佳方法是将两个进度条的组合放在黑白背景上并在良好的显示器上显示它，然后您可以注意到边缘的差异。

# google-search-appliance - Search Appliance - 从 sitesearch 参数进行多站点搜索

> ID：15710265
> 
> 赞同：0
> 
> 时间：2013-03-29T19:36:46.000
> 
> 标签：google-search-appliance

我正在尝试使用 google 搜索设备来搜索多个 URL，而不是在前缀为 的搜索查询中列出它们`site:`。

通常，您会像这样搜索单个 URL：

> [http://www.google.com/#hl=en&q=everyone&sitesearch=ebay.com](http://www.google.com/#hl=en&q=everyone&sitesearch=ebay.com)

我们可以在查询字符串中搜索多个 URL，如下所示：

> [http://www.google.com/#hl=en&q=everyone+site%3Aebay.com+OR+site%3Abestbuy.com](http://www.google.com/#hl=en&q=everyone+site%3Aebay.com+OR+site%3Abestbuy.com)

我想要的是我们从两个 URL 中提取信息而不在查询字符串中列出的东西。像这样的东西（但这不起作用）：

> [http://www.google.com/#hl=en&q=everyone&sitesearch=ebay.com+AND+bestbuy.com](http://www.google.com/#hl=en&q=everyone&sitesearch=ebay.com+AND+bestbuy.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T14:03:20.050

有一个参数叫做 site ，它指的是集合。在集合配置中，您可以指定要构成搜索结果的 url 模式。

看到这个[链接](https://developers.google.com/search-appliance/documentation/614/admin_searchexp/ce_improving_search#h1segdata)

# c# - 无法同时共享位图图像和 Html 内容？

> ID：15710269
> 
> 赞同：1
> 
> 时间：2013-03-29T19:37:08.627
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, c#-5.0

我正在创建一个共享 InkManager 笔划的应用程序，方法是首先将 inkmanager 笔划保存到本地设置，然后将其作为流读取并共享。

现在 HTML 内容正在共享，但电子邮件中没有附加图像。如果我评论代码以共享 html，则在通过电子邮件应用程序共享时，图像会被附加。但两者都不会立即共享。我怎样才能做到这一点？？？

代码：

```
DataPackage requestData = request.Data;
                requestData.Properties.Title =        this.PageViewModel.JobInformationDetail.JobNumber;
                requestData.Properties.Description = this.PageViewModel.JobInformationDetail.CustomerSignatureName;
                //requestData.SetText("Sample Text");

                RandomAccessStreamReference signatureStream = await GetInkManagerStream();

                if (signatureStream != null)
                {
                    requestData.SetBitmap(signatureStream);
                }

                requestData.SetHtmlFormat(Windows.ApplicationModel.DataTransfer.HtmlFormatHelper.CreateHtmlFormat(this.GetMailDescription())); 
```

将 InkManager 转换为流

```
private async Task<RandomAccessStreamReference> GetInkManagerStream()
    {
        IRandomAccessStream signatureStream = null;

        StorageFile myMerge = await ApplicationData.Current.LocalFolder.CreateFileAsync("sign.png", CreationCollisionOption.OpenIfExists);
        IOutputStream signature = await myMerge.OpenAsync(FileAccessMode.ReadWrite);

        if (signature != null)
        {
            await _inkManager.SaveAsync(signature);
            signature.Dispose();
        }

        signatureStream = await myMerge.OpenAsync(FileAccessMode.ReadWrite);
        RandomAccessStreamReference streamRef = RandomAccessStreamReference.CreateFromStream(signatureStream);
        signatureStream.Dispose();

        return streamRef;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T06:10:26.977

该问题是由于在事件处理程序中等待`async`方法引起的。`DataRequested`如果你这样做，你需要使用`DataRequestReferral`：

```
private async void OnDataRequested(DataTransferManager sender, DataRequestedEventArgs args)
{
    var deferral = args.Request.GetDeferral();

    // the rest of your method, including the awaiting call

    deferral.Complete();
} 
```

通过这样做，您告诉调用者它需要等待异步调用完成才能继续。最后，您通过调用`deferral.Complete()`. 如果没有它，调用者会在您实际设置位图之前继续，因此会出现错误。

编辑：

不过，Windows 8 Mail 应用程序不是像这样共享的图像的共享目标。要使 Mail 应用程序可用，您需要将图像共享为存储项目：

```
var file = await ApplicationData.Current.LocalFolder.GetFileAsync(@"sign.png");
var imageItems = new List<IStorageItem>();
imageItems.Add(file);
requestData.SetStorageItems(imageItems); 
```

现在邮件将显示为可用目标之一。当您共享图像时，最好同时使用两者`SetBitmap()`并`SetStorageItems()`获得更多可用的共享目标，因为并非所有应用程序都支持这两种数据类型。

编辑2：

Also the Mail app only picks up one type of shared content, either HTML or StorageItems (if no HTML is provided) as you've already noticed. The only workaround I know of, is to embed the images into the HTML content:

```
var resourceName = "logo.png";
var html = String.Format("<p>HTML content</p><img src='{0}'/>", resourceName);
requestData.ResourceMap[resourceName] = RandomAccessStreamReference.CreateFromUri(
    new Uri("ms-appdata:///local/sign.png"));
requestData.SetHtmlFormat(HtmlFormatHelper.CreateHtmlFormat(html)); 
```

You can read more about this approach in a [blog post by Mike Taulty](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/10/19/windows-store-apps-sharing-html-with-images.aspx).

# ruby-on-rails - parallel_tests gem 是否按顺序运行您的测试套件？

> ID：15710270
> 
> 赞同：2
> 
> 时间：2013-03-29T19:37:09.823
> 
> 标签：ruby-on-rails, ruby, testunit, parallel-testing

我正在阅读parallel_tests 源代码，但还不明白，所以我想我会跳入追逐并在这里问我的问题。

**parallel_tests gem 是同时还是按顺序运行你的所有测试？（是否可以同时运行多个测试）**

当我运行并行测试时，它看起来像这样：

1.  找到我所有的测试
2.  将它们分成偶数堆（每个处理器一个）
3.  按顺序运行每一堆测试

我想知道这是因为使用四个处理器运行 rake parallel:test（75 分钟）和 rake test（85 分钟）之间的时间差异很小。

并行测试的输出使它看起来像是在按顺序运行测试组。

我的输出如下所示：

它首先表明它已找到我的所有处理器：

```
rake parallel:test[functional]

4 processes for 223 tests, ~ 55 tests per process 
```

然后它似乎按顺序运行每个测试子集：

```
......
841 tests, 3605 assertions, 0 failures, 3 errors, 0 skips

Test run options: --seed 15002
oaded suite -e

...............
Finished in 1928.494289 seconds.

542 tests, 2296 assertions, 0 failures, 0 errors, 0 skips

Test run options: --seed 30455
oaded suite -e
....
etc... 
```

那么，这是我输出的一个技巧，还是真的一个接一个地运行每组测试。我在想我会得到更好的时间改进，而且这对我需要并行化以使我的测试运行的其他东西有很大的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:44:41.710

如果您的测试需要大量设置/拆卸代码或争夺 IO 等资源，那么您可能看不到并行化它们带来的显着性能提升。`STDOUT`parallel_test 确实并行运行您的测试，但它会按顺序缓冲输出，因为如果 4 个进程只是直接写入并且消息相互交错，将很难理解。

如果您不相信测试是并行运行的，请启动`top`或使用其他类似工具（例如，OS X 上的活动监视器）并观察发生了什么。

这不是您问题的答案，但您可能会在优化 841 测试时获得更多收益，这些测试需要半小时才能更快地运行，而不是尝试并行化它们。

# perl - 在 Perl 中将电子邮件地址打印到文件中

> ID：15710275
> 
> 赞同：1
> 
> 时间：2013-03-29T19:37:29.780
> 
> 标签：perl

我一直在搜索这个网站和其他网站，以找到做我需要做的事情的最佳方法，但无济于事。基本上我有一个包含一些姓名和电子邮件地址的文本文件。每个姓名和电子邮件地址都在自己的行中。我需要获取电子邮件地址并将它们打印到另一个文本文件中。到目前为止，我能够打印的只是“未找到电子邮件地址”消息。有什么想法吗？谢谢！！

```
#!/usr/bin/perl

open(IN, "<contacts.txt") || die("file not found");
#chooses the file to read
open(OUT, ">emailaddresses.txt");
#prints file
$none = "No emails found!";
$line = <IN>;

for ($line)
{
    if ($line =~ /[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/g)
    {
        print (OUT $line);
    }
    else
    {
        print (OUT $none);
    }
}

close(IN);
close(OUT); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T20:00:03.383

First, **always** `use strict; use warnings`. This helps writing correct scripts, and is an invaluable aid when debugging.

Also, use a three-arg-open:

```
open my $fh, "<", $filename or die qq(Can't open "$filename": $!); 
```

I included the *reason* for failure (`$!`), which is a good practice too.

The idiom to read files (on an open filehandle) is:

```
while (<$fh>) {
  chomp;
  # The line is in $_;
} 
```

or

```
while (defined(my $line = <$fh>)) { chomp $line; ... } 
```

What you did was to read one line into `$line`, and loop over that *one* item in the `for` loop.

(Perl has a notion of *context*. Operators like `<$fh>` behave differently depending on context. Generally, using a scalar variable (`$` sigil) forces scalar context, and `@`, the sigil for arrays, causes list context. This is quite unlike PHP.)

I'd rewrite your code like:

```
use strict; use warnings;
use feature 'say';
my $regex = qr/[A-Z0-9._%+-]+\@[A-Z0-9.-]+\.[A-Z]{2,4}/i; # emails are case insensitive
my $found = 0;

while (<>) { # use special ARGV filehandle, which usually is STDIN
  while (/($regex)/g) {
    $found++;
    say $1;
  }
}
die "No emails found\n" unless $found; 
```

Invoked like `perl script.pl <contacts.txt >emailaddresses.txt`. The shell is your friend, and creating programs that can be piped from and to is good design.

### Update

If you *want* to hardcode the filenames, we would combine the above script with the three-arg open I have shown:

```
use strict; use warnings; use feature 'say';
use autodie; # does `... or die "Can't open $file: $!"` for me
my $regex = qr/[A-Z0-9._%+-]+\@[A-Z0-9.-]+\.[A-Z]{2,4}/i;
my $found = 0;

my $contact_file = "contacts.txt";
my $email_file   = "emailaddresses.txt";

open my $contact, "<", $contact_file;
open my $email, ">", $email_file;

while (<$contact>) {    # read from the $contact filehandle
  while (/($regex)/g) { # the /g is optional if there is max one address per line
    $found++;
    say {$email} $1;    # print to the $email file handle. {curlies} are optional.
  }
}
die "No emails found\n" unless $found; # error message goes to STDERR, not to the file 
```

# actionscript-3 - 如何仅使用 as3 制作滑块

> ID：15710276
> 
> 赞同：0
> 
> 时间：2013-03-29T19:37:30.773
> 
> 标签：actionscript-3, flash-builder

我正在尝试在不使用 Flash Professional API 的 flash builder 中制作一个滑块，但我不知道该怎么做。有没有我可以像 var sider:Slider 这样调用的类？

请有人帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:25:48.333

你需要去这个网址：

[http://apdevblog.com/update-using-flvideo-package-w-eclipse-and-fdt3/](http://apdevblog.com/update-using-flvideo-package-w-eclipse-and-fdt3/)

在该页面上下载 fl_package.swc 并将该 .swc 添加到您的 flash builder 项目中。

您可以通过 Flash Builder 菜单系统添加 swc，如下所示：

Project/Properties/Actionscript Build Path --> 单击 Add SWC 按钮并浏览到 fl_package.swc 的位置以添加它。

现在，您可以通过首先将此行添加到您的导入中来使用 Slider 类：

```
import fl.controls.Slider 
```

然后您可以在代码中创建一个实例并将其添加到阶段，如下所示：

```
var mySlider:Slider = new Slider();
addChild(mySlider); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:48:18.570

您必须先将滑块添加到您的库中。转到窗口，然后转到组件，然后将滑块拖到您的库中。您可以通过创建滑块对象在代码中创建新滑块。

```
import fl.controls.Slider;
var sliderObj:Slider = new Slider();
addChild(sliderObj); 
```

# php - PHP 退出后重新启动 php 脚本？

> ID：15710278
> 
> 赞同：0
> 
> 时间：2013-03-29T19:37:38.613
> 
> 标签：php, exit, die

我有一个 php 脚本：我将网站列表放在 textarea 中，然后 php 脚本检查网站是关闭还是启动。我的问题：当网站关闭时，脚本向我显示错误并停止使用列表的其余部分：

```
Warning: fsockopen() [function.fsockopen]: unable to connect to http://SITEDOWN.com:80 (php_network_getaddresses: getaddrinfo failed: Name or service not known) in /home/checklist/public_html/checklist.php (1) : eval()'d code(1) : eval()'d code(1) : eval()'d code on line 109 
```

当网站关闭时，它会向我显示此错误，然后检查员停止工作并停止所有工作，以修复我犯的错误（我将 DIE 添加到脚本中）：

```
<?php
    public function sendpacket($host,$packet,$response = 0,$output = 0) 
    {
    $ock = fsockopen($host,80);
    stream_set_timeout($ock,5);
    if (!$ock) 
    {
    echo '=> Site down<br/>'; 
    die;

} 
```

然后它不会显示错误，但是当网站关闭时 php 脚本会自动停止（它显示 SITE DOWN 并停止所有，不继续其他网站）我想要：当网站关闭时，它会显示“Site Down”并使用以下行重新启动/继续 php 脚本（我使用 textarea ，每行 1 个站点）

抱歉我的英语不好，感谢所有花时间阅读本文的会员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:25:59.403

更改 die 以返回 false 并编写调用脚本以在 if 语句中调用该函数...

```
 if (sendpacket == false) {
        echo "Fail message";
    } else {
        echo "Success message";
    } 
```

# javascript - 获取特定标签的内容（Firefox 插件开发）

> ID：15710280
> 
> 赞同：0
> 
> 时间：2013-03-29T19:37:50.017
> 
> 标签：javascript, firefox, firefox-addon

我正在开发一个 Firefox 插件，使用它，我需要监视特定站点的内容并对 DOM 更改做出反应。目前，我正在使用组合并将事件`gBrowser.contentDocument.getElementsByClassName("class")`附加`DOMSubteeeModified`到它。但我注意到它仅在选项卡处于活动状态时才有效。当我离开使用另一个选项卡，并且非活动选项卡中的 DOM 发生变化时，它不起作用。我该如何解决这个问题？Firefox MDN 非常分散（有时已经过时），对于新手来说非常令人沮丧。

这是我正在做的简化版本：

```
var MyExtension = {
    init() : function() {
        if("gBrowser" in window) {
            gBrowser.addEventListener("DOMContentLoaded", function(e){this.onPageLoad(e);},false);
        },

   onPageLoad: function(e) {
       var doc = e.originalTarget;
       if((/http://xxxx.xyz/v/[0-9a-z]/).test(doc.location.href)) {
           MyExtension.XXX.handler(e);
       }
       e.originalTarget.defaultView.addEventListener("unload", function(e){MyExtension.onUnload(e);}, false);
   },

   onUnload: function(e) {
       if((/http://xxxx.xyz/v/[0-9a-z]/).test(e.originalTarget.location.href)) {
           //remove listeners and nullify references to dom objects
   }
};

MyExtension.XXX = {
    handler : function(e) {
        //get dom element with gBrowser.contentDocument.getElementsByClassName("class");
        //bind DOMSubtreeModified listener, attach a function to handle the event
    }
};

window.addEventListener("load", function(e) {
    window.removeEventListener("load", load, false);
    MyExtension.init();
}, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T18:54:46.860

这是我正在遵循的技术，`gBrowser.selectedBrowser`按照[此处记录的方式使用](https://developer.mozilla.org/en-US/docs/Code_snippets/Tabbed_browser#Detecting_tab_selection)

```
var MyExtension = {
    tab : null, //<---- added this line
    init() : function() {
        if("gBrowser" in window) {
            gBrowser.addEventListener("DOMContentLoaded", function(e){this.onPageLoad(e);},false);
    },

    onPageLoad: function(e) {
       var doc = e.originalTarget;
       if((/http://xxxx.xyz/v/[0-9a-z]/).test(doc.location.href)) {
           this.tab = gBrowser.selectedBrowser; //<--- GET REFERENCE TO CURRENT TAB
           MyExtension.XXX.handler(e);
       }
       e.originalTarget.defaultView.addEventListener("unload", function(e){MyExtension.onUnload(e);}, false);
    },

    onUnload: function(e) {
       if((/http://xxxx.xyz/v/[0-9a-z]/).test(e.originalTarget.location.href)) {
           //remove listeners and nullify references to dom objects
       }
    };

    MyExtension.XXX = {
        handler : function(e) {
        //get dom element
        MyExtension.tab.contentDocument.getElementsByClassName("class"); //<--- GET CONTENT DOCUMENT INSIDE DESIRED TAB
        //bind DOMSubtreeModified listener, attach a function to handle the event
    }
}; 
```

# jquery - 为什么我有参数对象时需要使用 $？

> ID：15710284
> 
> 赞同：0
> 
> 时间：2013-03-29T19:38:03.380
> 
> 标签：jquery, asp.net

我最近在 jquery 中进行试验，想学习如何将对象从文本框发送到我的脚本。例子：

```
 <asp: textbox id="box1" onchange="javascript: test(this);" runat="server"></asp:TextBox> 
```

脚本：

```
function test(obj){

if(parseInt(obj.val())){
// code
}
} 
```

这没有用！后来我发现我必须使用“$”符号才能完成这项工作，如下所示：

$(obj).val()

为什么？我想我已经在参数中有我需要的对象，为什么我需要再次选择它？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:39:39.847

`val`是 jQuery 集合的一个方法，当您将选择器或 DOMElement 对象传递给`$`. 要在不使用 jQuery 的情况下访问该值，请使用`value`DOM 公开的属性。

```
function test(obj){

    if(parseInt(obj.value){
    // code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:40:12.210

`this`您发送到函数中（并在函数中使用 as ）`obj`只是一个 javascript 对象。将`$()`其转换为一个 jQuery 对象，它将所有额外的功能添加到 jQuery 提供的对象（包括`val()`方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:40:28.137

`this`是一个 DOM 元素。

`$(this)`是一个 jQuery 对象。

您只能在对象上调用`jQuery`方法。`jQuery`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:43:11.923

$ 是[jQuery的](http://jquery.com/)**快捷**方式。因此，要访问 jQuery 库提供的函数，您需要将**Javascript 对象**“转换”为**jQuery Object**。

# zend-framework - Zend_form set 必填说明

> ID：15710288
> 
> 赞同：0
> 
> 时间：2013-03-29T19:38:32.830
> 
> 标签：zend-framework, zend-form, zend-form-element

我有一个带有 Zend_From 的表单，默认情况下我的表单由 DL、DT 和 DD 标签包装，这很好！

我必须在必填字段中添加 * <-- 这个符号。首先，我决定在每个表单元素中明确添加这个标志，但后来我不能在其中包含 HTML 标记，以便例如我`<label>My Form Label:<span> *</span></label>`可以制作 * <-- 这个红色标志。

现在我找到了另一个解决方案：

```
$elementDecorators = array(
            'ViewHelper',
            array('Label', array('tag' => 'span', 'escape' => false, 'requiredSuffix' => '<span class="required">* </span>'))
        ); 
```

对于每种形式：

```
$myElement->setDecorators($elementDecorators); 
```

然后我尝试了另一种方法：

```
$myElement->getDecorator('label')
          ->setOptions(array('requiredSuffix'=> ' <span class="required">*</span> ', 'escape'=> false)); 
```

问题是，在我将这些代码应用到我的表单元素之后，它会丢失 DL、DT、DD 包装器。然后看起来很糟糕。

你能告诉我如何在不破坏 DL 东西的情况下将装饰器添加到标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:14:36.977

我发现用 CSS 做这件事很简单。

```
dt label.required:before {
    content: "* ";
    color: #ff0000;
} 
```

# text - 如何计算字母频率相似度？

> ID：15710292
> 
> 赞同：8
> 
> 时间：2013-03-29T19:38:51.830
> 
> 标签：text, nlp, levenshtein-distance, letter

鉴于此数据（两种语言的相对字母频率）：

```
spanish => 'e' => 13.72, 'a' => 11.72, 'o' => 8.44, 's' => 7.20, 'n' => 6.83,
english => 'e' => 12.60, 't' => 9.37, 'a' => 8.34, 'o' => 7.70, 'n' => 6.80, 
```

然后计算字符串“这是一个测试”的字母频率给了我：

```
"t"=>21.43, "s"=>14.29, "i"=>7.14, "r"=>7.14, "y"=>7.14, "'"=>7.14, "h"=>7.14, "e"=>7.14, "l"=>7.14 
```

那么，将给定的字符串字母频率与语言匹配（并尝试检测语言）的好方法是什么？我已经看到（并测试过）一些使用 levenshtein distance 的示例，并且在添加更多语言之前它似乎工作正常。

```
"this is a test" gives (shortest distance:) [:english, 13] ...
"esto es una prueba" gives (shortest distance:) [:spanish, 13] ... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T20:57:49.870

您是否考虑过使用[余弦相似度](https://en.wikipedia.org/wiki/Cosine_similarity)来确定两个向量之间的相似度？ ![余弦相似度公式](../Images/60662667404cb43fe60c40f8761f861c.png)

第一个向量是从测试字符串中提取的字母频率（待分类），第二个向量是针对特定语言的。

您当前正在提取单个字母频率（unigrams）。我建议提取更高阶[的 n-gram](https://en.wikipedia.org/wiki/N-gram)，例如二元组或三元组（如果你有足够的训练数据，甚至更大）。例如，对于二元组，您将计算“aa”、“ab”、“ac”...“zz”的频率，这将允许您提取比仅考虑单个字符频率更多的信息。

Be careful though, because you need more training data when you use higher order n-grams otherwise you will have many 0-values for character combinations you haven't seen before.

In addition, a second possibility is to use [tf-idf](https://en.wikipedia.org/wiki/Tf%E2%80%93idf) (term-frequency inverse-document-frequency) weightings instead of pure letter (term) frequencies.

### Research

Here is a good slideshow on [language identification for (very) short texts](http://pro.europeana.eu/documents/866205/331925/EuV1_WP3_Amsterdam_October_2010_10_Sebastiani_LanguageTagging.pdf), which uses machine learning classifiers (but also has some other good info).

Here is a short paper [A Comparison of Language Identification Approaches on Short, Query-Style Texts](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.155.5553&rep=rep1&type=pdf) that you might also find useful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:49:17.967

你给出的例子每个都包含一个简短的句子。统计数据表明，如果您的输入较长（例如一段，则应该更容易识别独特的频率。

如果您不能依赖用户提供更长的输入，那么如果字母频率匹配，也许还要寻找语言中的常用词（例如，is、as、and、but ...）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T17:54:08.533

n-graphs 肯定会对短文本有所帮助，并且有很大帮助。对于任何合理长度的文本（一段？），简单的字母频率都可以很好地工作。作为一个例子，我写了一个简短的演示，你可以从[http://georgeflanagin.com/free.code.php下载源代码](http://georgeflanagin.com/free.code.php)

这是页面上的最后一个示例。

# c++ - How to optimize trading algorithm for most efficient speed

> ID：15710302
> 
> 赞同：-1
> 
> 时间：2013-03-29T19:39:52.603
> 
> 标签：c++, algorithm

Suppose you want to implement an algorithm that works in the following way:

You read in from a file that contains values of the form:

```
Mark Buy  20 1 100
Bob  Sell 20 2 90 
```

Where the input takes the form:

`<name><buy or sell><quantity><time><company><buy maximum or sell minimum>`

What's the fastest way to match buyers and sellers (for some company, where buyers and sellers are matched only if the person with the highest buy for that company is greater than the person with the lowest sell for that company). The buy or sell that is top-most will be the one that determines what price to use.

So in the example given we'd have "Mark, at time 1, bought 20 of Google for $100 from Bob, at time 2."

How can we optimize this algorithm for speed? Would reading in the entire file first be an optimal solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:22:30.673

What you need is two [priority queues](http://en.wikipedia.org/wiki/Priority_queue) per commodity: one for active buy bids (prioritized on max-price), and one for active sell bids (prioritized on min-price), plus an overall queue for bid creation/expiry events (prioritized on time). (If your bids are in a batch file as described, rather than a causal/online sequence, you can just sort the creation/expiry events, but you still need the buy and sell queues)

Using priority queues is the crux; everything after that is plumbing:

```
foreach bid creation/expiry event, in chronological order:
  if the event is an expiry:
    delete the bid from the appropriate queue
  else, the event is a creation:
    add the bid to the appropriate queue
    repeat until no further transaction can be performed:
      find max-active-buy and min-active-sell bids for the given commodity
      if they match:
        execute (and record) the transaction
        update partially fulfilled bids, and remove completely fulfilled ones 
```

When performing as a batch operation, you could simplify things a bit by sorting out each individual commodity, and executing each one separately. However, this will not work if the markets interact in any way (such as checking for sufficient account balance).

* * *

Priority queue operations can have asymptotic performance of O(log N) in the number of items. There are many fast, practical priority queue datastructures available which achieve this asymptotic limit.

Since you are evaluating an entire file as a batch, you may want to look into priority queues with amortized performance guarantees -- but if you expect to use your code in a real-time setting, you should probably stick to priority queues with strict per-query guarantees.

# windows-8 - 我可以使用 Windows 8 开发人员许可证做什么？

> ID：15710305
> 
> 赞同：0
> 
> 时间：2013-03-29T19:40:00.653
> 
> 标签：windows-8, microsoft-metro, licensing

更具体地说，我喜欢写新奇的应用程序，只供个人使用。我有三台运行 Windows 8 Professional 的计算机和一台运行 Windows Server 2012 的计算机。我有什么方法可以编写 Windows 8/Metro/Modern/LatestBuzzword 应用程序并将它们永久部署在我的所有三台台式机上，而无需 a) 付费这样做或 b) 违反开发者许可。

这不是对……任何事情的公投。我确实阅读了规则。在这一点上，我真的不清楚我可以用我自己的机器和代码做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:13:48.527

根据每次更新开发者许可证时出现的“法律条款”：

> 您只能将开发者许可用于开发、测试和评估应用程序。

这里还有[一些不祥的措辞](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974578.aspx#Fraudulent_use_of_your_license)：

> Microsoft 可以检测在已注册计算机上对开发人员许可证的欺诈性使用。如果 Microsoft 检测到欺诈性使用或其他违反软件许可条款的行为，我们可能会撤销您的开发者许可。

因此，严格的解释表明，不，如果您正在做的是在多台机器上部署“完成”的应用程序，则不能使用旁加载。

很难想象微软会为了这种随意和个人用途而追捕你，但在 IANAL 时，该语言似乎授予了他们使用的权利。然后我想你可以宣称你的新奇应用程序正处于一个永久的发展状态:)

# css - 如何让水平溢出在 CSS 中工作？

> ID：15710309
> 
> 赞同：0
> 
> 时间：2013-03-29T19:40:05.587
> 
> 标签：css

当谈到 CSS 时，我是一个新手。我的总体目标是将我拥有的在表格中显示数据的小型 Web 应用程序转换为使用 CSS。

对应用程序显示内容的描述是，在左侧窗口中有一个员工姓名列表，右侧是一个单元格，用于表示该员工在用户可选择的时间段内工作的每一天。

在下面的代码中，我无法让单元格元素溢出，以便用户可以向右滚动，而是单元格向下溢出。

有没有一种方法可以让溢出水平而不是垂直工作，这样我就可以左右滚动以查看所有单元格，而不是现在正在垂直创建滚动条的操作？

如果有人可以提供帮助，我们将不胜感激 - 这让我很沮丧！

HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>CSS Layout</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="layout.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div id="header">Header</div>
    <div id="centreposition">
        <div id="centrecontent">
        <?php 
            for ($counter = 0; $counter < 100; $counter++)
            {
                ?> 
                <div id="cell">AB</div> 
                <?php      
            }
        ?>
        </div>
    </div>

    <div id="footer">Footer.</div>

 <div id="left">Left <div>

</body>
</html> 
```

CSS：

```
body {
    margin: 0px;
}

#header {
    height: 100px;
        background-color: #9FF300;
}

#centreposition {
        width: 600px;
    padding-right: 10px;
    padding-left: 10%;
}

#centrecontent {
    z-index: 100;
    min-width: 1px;
        height: 40px;
    border: 1px solid #999999;
    padding: 4px;
        background-color: #FFFF00;
        overflow-x: scroll; 
}

#footer {
    padding-left: 175px;
    background-color: #20F3F7;
}

#left {
    width: 10%;
    position: absolute;
    top: 100px;
    left: 0px;
    padding: 10px 0px 10px 6px;
}

#right {
    width: 130px;
    position: absolute;
    top: 100px;
    right: 0px;
    height: 200px;
}

#cell {
    float: left;
    width: 24px;
    height: 16px;
    margin: 1px;
    background-color: #aaccdd;
    font-size: 10px;
    border-style: solid;
    border-left-width: 1px;
    border-color: #555555;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:54:19.633

两个建议：

1.  您实际上是在要求基于表格的布局，因此您不妨使用 HTML 表格。
2.  每个单元格都有固定的宽度，您的 PHP 代码应该知道要创建多少个单元格，因此您可以将容器元素的宽度（此处为#centrecontent）设置为足够宽以包含所有单元格。

此外，元素 ID 在 HTML 文档中应该是唯一的，因此创建 100 个元素都使用 #cell 作为 ID 是不正确的 - 您应该改用 CSS 类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:54:43.183

您可以将所有单元格放在另一个单元格中`div`并将其设置`div`为特定宽度。

[jsfiddle](http://jsfiddle.net/nRruT/)

# android - 在膨胀之前动态编辑 xml 布局参数

> ID：15710311
> 
> 赞同：1
> 
> 时间：2013-03-29T19:40:07.407
> 
> 标签：android

我想在扩展布局和设置活动的内容视图之前动态更改布局参数，如 layout_weight 。你会怎么做？：

```
@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //edit layout weight for some views in my layout here, before setting content view

    setContentView(R.layout.mylayout);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:02:11.680

我的意思是，是的，你可以做到。通过 R.layout.mylayout 您只是在引用您的布局资源。只需从该资源中获取一个 Layout 对象，它可能类似于 Layout mylayout = (Layout)findresourcebyid(R.layout.mylayout)。获得参考后，您可以动态更改它，然后通过 setcontentview() 进行膨胀。

# firefox - Target = iframe 链接在 Fire Fox 中不起作用

> ID：15710315
> 
> 赞同：0
> 
> 时间：2013-03-29T19:40:13.173
> 
> 标签：firefox, iframe, hyperlink, target

我正在构建一个页面，该页面在屏幕左侧具有指向 iframe 的链接。它们在新的 IE 中工作得很好，但在 FireFox 中根本不行。我玩过他们的 Z-index，但似乎无法让他们在 FireFox 中被识别。它们不仅不起作用，而且鼠标光标甚至没有显示它们是悬停时的链接。我正在处理的页面的地址在下面的地址。

[http://www.snoscoot.com/fcaccessories/hondapowerequipment/test.html](http://www.snoscoot.com/fcaccessories/hondapowerequipment/test.html)

其中一个按钮的代码示例如下：

`<A HREF="http://www.snoscoot.com//fcaccessories/hondapowerequipment/subcompacttractorpartsandinformation.html" TARGET="productdisplay"><IMG SRC="http://www.snoscoot.com/fcaccessories/hondapowerequipment/hondatractorparts150px.jpg" border="0"> <font size="3" color="black" face="Arial">Subcompact tractor parts</font></a>`

我针对目标 iFrame 的代码如下：

`<IFRAME SRC="http://www.snoscoot.com/fcaccessories/hondapowerequipment/compacttractorpartsandinformation.html" NAME="productdisplay" WIDTH=700 HEIGHT=1622 frameBorder="0" scrolling="no"> </IFRAME>`

有人会对如何让链接在 FireFox 中起作用有一些建议吗？我似乎无法弄清楚为什么它们在 IE 中工作，但在 FF 中却不行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:59:55.500

Your iframe inside the `<div id="dropdown">` is 1500px tall by 950px wide and hence covers up most of the rest of the page. In particular it's sitting above those links, so they can't be clicked.

Are you sure you want it to be 1500px tall?

# seo - 谷歌搜索结果显示我的网站，即使我在 robots.txt 中禁止它

> ID：15710316
> 
> 赞同：1
> 
> 时间：2013-03-29T19:40:19.387
> 
> 标签：seo, robots.txt

我的登台站点显示在搜索结果中，即使我已指定我不希望该站点被爬网。这是暂存站点的 robots.txt 文件的内容：

```
User-agent: Mozilla/4.0 (compatible; ISYS Web Spider 9)
Disallow:

User-agent: *
Disallow: / 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:10:52.730

您的 robots.txt 告诉 Google 不要抓取/索引您的网页内容。

它不会告诉 Google 不要*将*您的网址添加到他们的搜索结果中。

因此，如果您的页面（被 robots.txt 阻止）链接到其他地方，并且 Google 找到了此链接，它会检查您的 robots.txt 是否允许抓取。它发现它是被禁止的，但是，它仍然有你的URL。

Now Google might decide that it would be useful to include this URL in their search index. But as they are not allowed (per your robots.txt) to get the page's metadata/content, they only index it with keywords from your URL itself, and possibly anchor/title text that someone else used to link to your page.

If you don't want your URLs to be indexed by Google, you'd need to use the `meta`-`robots`, e.g.:

```
 <meta name="robots" content="noindex"> 
```

See Google's documentation: [Using meta tags to block access to your site](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93710)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:56:48.540

您的 robots 文件看起来很干净，但请记住 Google、Yahoo、Bing 等不需要抓取您的网站以将其编入索引。

[开放目录项目](http://www.dmoz.org/)或某种不太*礼貌*的机器人很有可能偶然发现它。如今，一旦其他人找到您的网站，似乎每个人都可以使用它。也让我发疯。

分期时的一个好的经验法则是：

1.  在将机器人文件发布到您的生产站点之前，请务必测试您的机器人文件是否存在与语法相关的任何疏忽。尝试[robots.txt 检查器](http://www.searchenginepromotionhelp.com/m/robots-text-tester/)、[分析 robots.txt](http://tools.seobook.com/robots-txt/analyzer/)或[Robots.txt 分析 - 检查您的网站是否可以被机器人访问](http://phpweby.com/services/robots)。

2.Password 在登台时保护您的内容。即使它有些虚假，也要在索引根目录下输入登录名和密码。对于你的粉丝和测试人员来说，这是一个额外的步骤——但如果你想要礼貌——或者——不礼貌的机器人，这是非常值得的。

3.根据项目，您可能不想使用您的实际域进行测试。即使我有一个静态 IP - 有时我会使用[dnsdynamic](http://www.dnsdynamic.org/)或[noip.com](http://www.noip.com/)来登台我的受密码保护的站点。因此，例如，如果我想暂存我的域**ihatebots.com** :) 我将简单地转到 dnsdynamic 或 noip（它们是免费的顺便说一句）并创建一个假域，例如：**ihatebots.user32.com**或**somthingtotallyrandom.user32.com**然后分配我的IP地址给它。这样，即使有人抓取了我的临时项目——我的原始域：**ihatebots.com**仍然不受任何类型的搜索引擎结果的影响（顺便说一句，它的记录也是如此）。

请记住，全世界有数十亿美元旨在全天 24 小时寻找您，而且这个数字还在不断增加。这几天很艰难。如果可以，请在登台时发挥创意并始终使用密码保护。

祝你好运。

# php - .htaccess 从一个 PHP 脚本重定向到另一个并停止

> ID：15710317
> 
> 赞同：1
> 
> 时间：2013-03-29T19:40:22.157
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我想将我的所有脚本移动到另一个域并将一些基本 URL 重定向到新的 URL。`ipn.php`但是对于根目录中旧域上的一个脚本，我想重定向到`index.php`旧域并停止。

我希望所有 URL 都被重定向，但这个是通过`index.php`.

像这样的东西：

```
Options +FollowSymlinks -Indexes
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^old_domain.com [NC]
RewriteRule ^(.*)$ http://www.old_domain.com/$1 [L,NC]

# One old script ipn.php to old index.php (it's connected with old PayPal subscriptions)
RewriteRule ^ipn\.php(.*)$                          index.php$1 [L]

# Other URLs on new domain scripts
RewriteRule ^index.php(.*)$                         http://www.new_domain.com/some_common_script.php$1 [R=301,L]
RewriteRule ^splash/1/(.*)$                         http://www.new_domain.com/splash1.php?param=$1 [R=301,L]
RewriteRule ^splash/2/(.*)$                         http://www.new_domain.com/splash2.php?param=$1 [R=301,L]
RewriteRule ^splash/3/(.*)$                         http://www.new_domain.com/splash3.php?param=$1 [R=301,L] 

#... 
```

我怎样才能做到这一点？

# c# - 正则表达式匹配字符串

> ID：15710321
> 
> 赞同：0
> 
> 时间：2013-03-29T19:40:28.540
> 
> 标签：c#, regex

我对正则表达式有一个小而烦人的问题。要解析的输入字符串 (C#) 如下所示：

```
( "Lorem ipsum dolor, sit amet" + "Maecenas fermentum commodo leo.", "aaa", 120 ) 
```

我希望正则表达式匹配第一个 " 和 " 之后的第一个逗号之前的字符串，所以我想找到：

```
Lorem ipsum dolor, sit amet" + "Maecenas fermentum commodo leo. 
```

到目前为止，我想出了：

```
\(\s*?\"(.*?)\".*?\) 
```

但结果是：

```
Lorem ipsum dolor, sit amet 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:42:36.310

您的正则表达式甚至看起来都没有尝试匹配任何逗号。

您是否打算在第二次引用之后匹配逗号？

```
\(\s*?\"(.*?)\",.*?\) 
```

您还应该小心输入，例如

```
( "Lorem ipsum dolor\", sit amet" + "Maecenas fermentum commodo leo.", "aaa", 120 ) 
```

因为只使用正则表达式很难处理这样的时髦的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:11:34.227

您可以尝试将分隔逗号设为可选：

```
\(\s*\"(.+?)(\",.*|\"\s*)\) 
```

# excel - Countif 函数没有按照我的预期运行

> ID：15710328
> 
> 赞同：0
> 
> 时间：2013-03-29T19:40:43.920
> 
> 标签：excel, function, excel-formula, counter

所以我有一个excel函数，我想检查一个字符串是否包含提到的任何字符串，如果是，只需将总数加1，这就是我所拥有的：

```
=COUNTIF(C2:F2, "*offline")+COUNTIF(C2:F2, "*Expired")+COUNTIF(C2:F2, "*login")+COUNTIF(C2:F2, "*log in") 
```

例如，如果 C2 说“login” D2 说“offline”，这个函数只会显示“1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:02:30.870

仅使用一个的示例`Countif`

如果你想数 1 那么这里是一个例子

```
=IF(SUM(COUNTIF(C2:F2, {"*offline","*Expired","*login","*log in"}))>0,1,0) 
```

如果要计算所有实例，请将上述公式更改为

```
=SUM(COUNTIF(C2:F2, {"*offline","*Expired","*login","*log in"})) 
```

**截屏**

![在此处输入图像描述](../Images/818b46fcaaaf9370e53a65d397c66dde.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:46:03.790

所以，您并不真正想要计数，您只想知道这些单元格中是否有任何一个具有您正在寻找的值之一？

将您的函数括在 if 语句中，如果它有计数则打印 1。

```
=IF(COUNTIF(C2:F2, "*offline")+COUNTIF(C2:F2, "*Expired")+COUNTIF(C2:F2, "*login")+COUNTIF(C2:F2, "*log in"),1,0) 
```

# url - Are HTTPS URLs secure?

> ID：15710332
> 
> 赞同：2
> 
> 时间：2013-03-29T19:41:26.903
> 
> 标签：url, https, security, stripe-payments

If a website makes a GET request, from a HTTPS page to another HTTPS page, is that secure? Specifically, is the data in the URL / query params secure?

I'm asking because, hen I call Stripe.createToken, a connection is made to a URL with the credit card number in it. Even though the query parameter says _method=POST, it is being transmitted over a GET query param:

```
Request URL: https://api.stripe.com/v1/tokens?card[number]=4242424242424242&card[cvc]=123&card[exp_month]=4&card[exp_year]=2016&key=pk_test_1236&callback=sjsonp11234&_method=POST
Request Method: GET
Status Code: 200 OK 
```

Now, I understand this is all over HTTPS, but isn't the URL part insecure? I thought that URLs get logged in various places along the way to their destination.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:45:48.353

URLs usually do get logged in webserver logs. It is a very bad idea to sent that information as part of a GET request. The hops a request takes between the client and the destination *are* encrypted though. So assuming there is no web proxy or anything the only place it might be logged is on `https://api.stripe.com/`'s webserver.

See [Are querystring parameters secure in HTTPS (HTTP + SSL)?](https://stackoverflow.com/questions/2629222/are-querystring-parameters-secure-in-https-http-ssl) for more information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T18:09:05.210

From Stripe:

> Because of the nature of how HTTPS works, the only information that's transmitted in plaintext to an HTTPS connection is the hostname you're connecting to (in this case, "api.stripe.com"). All other parts of the communication - including the full URL - are encrypted such that they're only decryptable by our servers. At the transport level, including cardholder details as GET parameters of the URL is no different from including them in the POST body. We only use JSONP for Stripe.js and not for any server-side bindings, in case you are worried about having those requests come up in your server logs.
> 
> Once the details get to our server, we've made changes to the configurations on our servers to ensure that the query strings are never logged, and we have routines in place that check all log files for accidental inclusion of card numbers. We've worked with our PCI auditors (who also audit Google, Apple and AWS) to ensure that this meets the standards of PCI, and are confident that we're handling cardholder data in a way that is secure.

# android - 完成孩子活动后父母活动的异常行为

> ID：15710343
> 
> 赞同：0
> 
> 时间：2013-03-29T19:42:08.960
> 
> 标签：android, android-activity, activity-lifecycle

我有并且`Activity A`我正在`Activity B`使用`Activity A`.`setResultForActivity`

现在，`Activity B`当我按下`Done`按钮时，我正在开火`finish()`，它返回 `Activity A`并返回到`onActivityResult`. 现在的问题是当我开枪`finish()`之后`Activity B`，`Activity A`'s `onCreate`没有被调用，这就是为什么

我的一些自定义侦听`ListView`器不起作用，似乎它们没有绑定。

所以整个活动的反应很奇怪，任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:00:02.963

为什么是第四个答案？因为在我看来，其他的并不完全正确。

事实是，Activity`A` *可能*在此期间被销毁，也可能不会。这取决于Android是否需要内存。因此，*可能*会调用 Activity `A`（`onCreate()`以及其他生命周期回调），也可能不会。在后一种情况下，`onActivityResult()`调用 before `onResume()`。

而对于配置更改，保留 Activity 状态最有效的方法是 via `nonConfigurationState`，如果您想在 Activity 被销毁后准备重启，您可以使用该`InstanceState`机制，因为当 Android 销毁您的 Activity`A`时，它会保留它的意图和保存的实例状态以重新创建它。

*这强调了将初始化准确*地放置在它所属的回调中的绝对必要性。

要测试您的 Activity 逻辑是否工作，无论 Android 是否销毁它，您可以使用 DevTools 设置“开发设置”->“立即销毁活动”。DevTools 应用程序在 AVD 上可用，也可以从 Google Play 下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T02:23:42.690

只需将您的 onCreate() 内容放在 Activity A 的 onResume() 中，setContentView() 除外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:41:59.210

在您的子活动完成后（），它会返回执行 onActivityResult，这在您的活动 A 中是这样的。 onCreate 方法不应该并且在杀死您的子活动（即活动 B）时不会被调用。

请发布一些源代码供我们使用，我会改进我的答案！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T19:48:23.287

Activity A`onCreate`不会被调用，因为该 Activity 尚未被销毁。当一个 Activity 从另一个 Activity 重新获得焦点时，它`onStart`会`onResume`被调用，所以我会将绑定的侦听器放在其中。它们也会在`onCreate`正常调用时被调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T19:45:53.137

只需阅读 Android 活动生命周期：http: [//developer.android.com/training/basics/activity-lifecycle/stopping.html](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)。onCreate() 仅在首次创建活动时调用。您可以在 onResume() 方法中执行列表操作。

# facebook - 邀请朋友参加 Facebook 活动有效，但返回错误

> ID：15710346
> 
> 赞同：2
> 
> 时间：2013-03-29T19:42:17.890
> 
> 标签：facebook, facebook-graph-api

使用 graph api explorer 我创建了一个事件

```
100004981634237/events?name=testEventz&start_time=2013-06-27T00:00:11-0700 
```

然后我邀请一些朋友参加活动：

```
533485663360781/invited?users=6025656,100002049936997 
```

Facebook 返回此错误：

```
 "error": {
    "message": "An unknown error has occurred.", 
    "type": "OAuthException", 
    "code": 1 
```

但是活动邀请实际上是发送的......

这是 Facebook 的错误吗？如果不是，我怎样才能让它返回 true

# css - 选择不是 :target 选择器的元素？

> ID：15710352
> 
> 赞同：0
> 
> 时间：2013-03-29T19:42:34.817
> 
> 标签：css, css-selectors, target

我正在尝试使用一个 XML、一个 XSLT 和一个 CSS 制作一个简单的博客风格网站。为此，我希望可以选择仅查看 xml 中的一个条目，并且我想在没有 javascript 或 php 的情况下执行此操作。我正在尝试使用 :target 选择器来执行此操作。

我想要实现的行为是；

*   index.html 应该显示所有内容
*   index.html#one 应该只显示 id="one" 的条目
*   index.html#two 应该只显示 id="two" 的条目

等等。

我找到了可以显示最后一个兄弟的解决方案，但是不适合。我的 xslt 将条目转换为表格，我看不到如何动态解析 xml 以适应该解决方案。

有没有办法用css做到这一点，还是我应该开始学习php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:48:30.020

这应该是一个非此即彼的命题……学习 PHP。它会让你受益。

但是对于仅使用 CSS 的解决方案（带有一点 .htaccess 魔法），您可以将 index.html 重写为 index.html#all，将包装 div 设置为所有 ID（或任何包装器 ID），然后为#all 设置 :target CSS 以显示所有内容。

```
#all .YouWantToHide {
    display:none;
}

#all:target .YouWantToHide, #one:target, #two:target {
    display:block;
} 
```

这将默认隐藏普通页面上的所有内容（永远不会被访问，它只是为要显示的特定项目和稍后隐藏的其他项目设置基调），在 #all 目标上显示（现在是默认页面），并且特定项目将根据需要显示，而其他项目将隐藏。

# scala - Scala，Casbah：编译错误。如何从外部库中实例化对象？

> ID：15710355
> 
> 赞同：1
> 
> 时间：2013-03-29T19:42:41.533
> 
> 标签：scala, casbah, objectinstantiation

我正在尝试使用 Casbah 工具包编写将数据写入 MongoDB 的函数：

```
 import com.mongodb.casbah.WriteConcern
      import ...

  def saveRecord(rec: MongoDBObject) {
    mongoColl.insert(rec, WriteConcern)
  } 
```

Casbah 将 WriteConcern 定义为 Scala 对象。我收到以下错误：

```
No implicit view available from Object => com.mongodb.casbah.Imports.DBObject.  

not enough arguments for method insert: (implicit dbObjView: Object => com.mongodb.casbah.Imports.DBObject, implicit concern: com.mongodb.WriteConcern, implicit encoder: com.mongodb.casbah.Imports.DBEncoder)com.mongodb.casbah.Imports.WriteResult. Unspecified value parameter dbObjView. 
```

此外，当我尝试简单地实例化 WriteConcern 时：

```
 val wc:WriteConcern = WriteConcern 
```

我收到此错误：

```
 not found: type WriteConcern 
```

我`import com.mongodb.casbah.WriteConcern` 在我的代码的第一行，为什么找不到它？如何实例化 WriteConcen？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:25:35.700

添加必要的导入`implicit`并像这样插入：

```
import com.mongodb.casbah.Imports._
mongoColl.insert(rec) 
```

关于无法实例化的问题`WriteConcern`，这是因为在下面有一个类，`com.mongodb`并且在下面有一个类似枚举的对象`com.mongodb.casbah`。这将起作用：

```
import com.mongodb.casbah.WriteConcern
val wc: com.mongodb.WriteConcern = WriteConcern.Normal 
```

# java - 在日志中禁用密码输出

> ID：15710356
> 
> 赞同：0
> 
> 时间：2013-03-29T19:42:41.750
> 
> 标签：java, struts2, log4j

我已经为 struts2 启用了日志记录。使用基本的 log4j 配置，我看到当我提交登录表单时，用户名/密码被打印在参数拦截器的日志中。无论如何要禁用/加密它，以便用户名/密码不会显式打印在日志中？如果还需要什么请告诉我？？

我的 Log4j 配置：

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\logfile.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=debug, file, stdout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:56:21.740

Find the source of your version of [the `ParameterInterceptor` on `Jarvana`](http://www.jarvana.com/jarvana/view/org/apache/struts/xwork/xwork-core/2.2.1/xwork-core-2.2.1-sources.jar!/com/opensymphony/xwork2/interceptor/ParametersInterceptor.java?format=ok) or similar sites, then recompile it:

*   with an *encrypted* logging functionality

or

*   *without* the logging functionality (and hope you'll never need to see that logs again :)

then substitute it to the real `ParameterInterceptor`.

But seriously... who cares ?

As said in comments, if they're inside the system, this is your last problem.

* * *

Edit: as suggested by AleksandrM, for Struts you can find the source directly from the official site: [http://struts.apache.org/development/2.x/](http://struts.apache.org/development/2.x/)

# c# - 在哪里保存动态网站文本

> ID：15710357
> 
> 赞同：0
> 
> 时间：2013-03-29T19:42:44.387
> 
> 标签：c#, asp.net

我想让我的 ASP.NET 网站的用户能够在起始站点上编写/更改文本。文本不断变化，因此不是静态的。

文本在站点的起始页上，因此将其保存到数据库不是最佳选择，对吧？因为每次页面调用都会有一个数据库访问。

所以我的问题是：保存这些文本的最佳做法是什么？我应该将它保存在数据库中吗？在文本文件中？xml 文件？在 web.config 中？

编辑：使用示例：开始页面上有一个“联系人”区域，管理员应该能够修改此联系人区域的内容。所以这个数据不是静态的，它应该是可编辑的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:47:21.500

当然，您可以做很多不同的事情，但是如果您担心到数据库的往返行程，通常是将其存储在数据库中并使用缓存机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:46:22.300

当用户单击提交按钮时，它必须转到数据库。编辑和小改动将正常进行。单击提交后，它必须去某个地方并且需要进行数据库调用。您可以将其保存在会话中，但如果用户离开，它就会消失。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T19:45:36.140

如果它不是永久数据，为什么不将其存储在 Session 中？

# jquery - 固定元素离开默认位置后更改样式

> ID：15710359
> 
> 赞同：0
> 
> 时间：2013-03-29T19:42:49.940
> 
> 标签：jquery, css

我正在一个应该有一个固定导航菜单的网站上工作，所以它会随着你滚动。我遇到的唯一问题是设计师想要做到这一点，所以一旦导航离开它的位置并开始向下滚动页面，它会在顶部拾取一个厚厚的黑色边框。一旦开始移动，有没有办法添加样式？

现有代码：

```
<ul id="stickyNav">
<li class="technology"><a href="#technology">Technology</a></li>
      <li class="sales"><a href="#sales">Sales</a></li>
      <li class="operations"><a href="#operations">Operations</a></li>
      <li class="marketing"><a href="#marketing">Marketing</a></li>
      <li class="profitability"><a href="#profitability">Profitability</a></li>
</ul>

ul#stickyNav{background: url(../../../images/bb/stickynav-bg.jpg) repeat-x; height: 56px; position: fixed; width: 100%; z-index: 800;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:36:41.027

您可以从一些示例开始，您可以查看[这个小提琴](http://jsfiddle.net/EhMZ6/)以查看它的实际效果！

请注意，我必须克隆导航以免弄乱实际的 DOM。`visibility: hidden`如果你的导航有很多交互，你可以在它开始滚动时玩。

祝你好运！

*CSS*

```
#body {
    position: relative;
    top: 0;
}
#content {
    height: 2000px;
}
.nav {
    width: 100%;
    background: black;
    color: white;
} 
```

*HTML*

```
<div id="body">
    <h1>Stuff</h1>
    <div id="nav" class="nav">Scroll on the go!</div>
    <div id="content">Interestring things</div>
</div> 
```

*jQuery*

```
$(function() {
    var $nav = $("#nav");
    $nav.get(0).originalY = $nav.offset().top;
});
$(document).scroll(function() {
    var $nav = $("#nav");
    var navDOM = $nav.get(0);
    var curY = $(document).scrollTop();

    // Check whether it started scrolling after the navbar
    if (curY > navDOM.originalY) {
        if ($('#nav_clone').length < 1) {
            // Note that you only have to clone the navigation once per scroll event
            $nav.clone()
                .attr('id', 'nav_clone')
                .addClass('nav')
                .css('position', 'fixed')
                .css('top', 0)
                .appendTo("#body");
        }
    }
    // Else, we remove the cloned navigation
    else {
        $('#nav_clone').remove();
    }
}); 
```

编辑：请注意，您可以使用适当的 id`#nav`和`#nav_clone`. `.nav`让你分享共同的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:55:21.973

我没有尝试使用 blint 的代码，所以这可能也有效，但是其他人给了我一个更简单的解决方案：

```
sticky = $('#stickyNav');
classtoAdd = 'nav_active';

$(window).scroll(function(){
/* Sticky Nav stuff */
var window_top = $(window).scrollTop();
if(window_top > 0){
sticky.addClass(classtoAdd);

}else{
sticky.removeClass(classtoAdd);

}
/* End Sticky Nav */

}); 
```

然后我在 CSS 中添加了任何新样式作为 #stickyNav.nav_active{}

# ios - uilabel 在 ARC 中过早释放

> ID：15710363
> 
> 赞同：0
> 
> 时间：2013-03-29T19:43:03.090
> 
> 标签：ios, uilabel, automatic-ref-counting, memory-management

我已经在一个项目上工作了几个星期，最近实现了一个单例对象来帮助保存数据。实施后，我在主视图控制器中更新标签时遇到问题。

例如，我正在尝试更新以下标签：

```
@property (nonatomic, retain) IBOutlet UILabel *numDrinksLabel;
@property (nonatomic, retain) IBOutlet UILabel *BACLabel; 
```

使用以下代码，该代码位于按下按钮时调用的函数内：

```
BACLabel.text = [NSString stringWithFormat:@"%.2f", user.BAC];
numDrinksLabel.text = [NSString stringWithFormat:@"(%i)", user.numDrinks]; 
```

这个代码块给了我运行时错误：

```
-[__NSCFString setText:]: unrecognized selector sent to instance 0x1197ef40 
```

`viewDidLoad`但是，在内部调用或执行的相同代码块`viewDidAppear`没有问题。最初这向我表明我的`@property`声明存在问题，但是当我更改为 时，我得到了同样的错误，当我更改为 时`retain`，uilabel 对象只是 null，这是意料之中的，但仍然非常令人沮丧。`strong``weak`

所以问题是，为什么标签对象会在`viewDidAppear`函数之后被释放？

任何有关如何解决此问题或进一步测试根本原因的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:48:09.480

请检查这些标签的superview是否也声明了`strong`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:20:58.513

It seems that your object which contains the iVars `numDrinksLabel` and `BACLabel` does no longer exist when you assign something to the text property of the `UILabel` objects.
Since this happens after you press a button, you have been in the main event loop before. In this loop, any autorelease object will be released if it is not retained by some object.
Thus it seems to me that the object that has your `UILabels` as iVars is an autorelease object, and it is not retained because you don't use setter methods like `self.BACLabel.text =` but simply assign methods as `BACLabel.text =`.
So try replacing your assignments like `BACLabel.text =` by setters like `self.BACLabel.text =`, as sixthcent said.

# javascript - JavaScript单例类型错误：为什么严格模式会标记这个？

> ID：15710366
> 
> 赞同：1
> 
> 时间：2013-03-29T19:43:07.403
> 
> 标签：javascript, jquery, typeerror

我对 JavaScript 比较陌生，无法理解为什么会发生此错误：

> TypeError：试图分配给只读属性。*MyTimer.js：35*

我知道显示此错误是因为我使用的是*严格模式*，但我启用了*严格模式*来帮助我调试此对象。

创建`MyTimer`单例的调用是：

```
var simTimer = new SimTimer(); 
```

然后我添加一个要执行的任务，`MyTimer`如下所示：

```
var task = function(){
    console.log("performing task.");
};

simTimer.addTask(task); 
```

最后，这是`MyTimer`对象（标记了第 35 行）：

```
var MyTimer = (function () {
    "use strict";

    // var timer;
    var tasks;

    /**
     * If an instance of MyTimer exists, it will be saved to this variable and returned
     * by any subsequent calls to this constructor, thus only one instance (stored in this
     * variable) will be accessible.
     * @private
     */
    var instance;

    /**
     * Called to initialize this MyTimer Object, or return #instance if it already contains
     * an instance of this Object.
     */
    function Singleton() {
        if (instance) {
            return instance;
        }
        instance = this;
        tasks = $.Callbacks();
        this.timer = setInterval(function()
        {
            this.tasks.fire();
        }, 1000);//<---- THIS IS LINE 35!

        this.addTask = function(task)
        {
            this.tasks.add(task);
        };

        this.removeTask = function(task)
        {
            this.tasks.remove(task);
        };
    }

    //instance accessor
    Singleton.getInstance = function () {
        return instance || new Singleton();
    };

    return Singleton();

}()); 
```

我没有掌握什么？我已经阅读了很多关于[Module Patterns](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)的文档，并且之前已经成功编写过 Singletons - 那么我在这里哪里出错了？

** 编辑： **

我能够通过删除并在using中`var tasks`创建它来获得正确的行为。该函数的工作版本现在如下所示：`Singleton``this`

```
function Singleton() {
    if (instance) {
        return instance;
    }
    instance = this;

    this.tasks = $.Callbacks();

    this.timer = setInterval(function(){
        instance.tasks.fire();
    }, 1000);
    this.removeTask = function(task)
    {
        instance.tasks.remove(task);
    };
    this.addTask = function(task)
    {
        instance.tasks.add(task);
    };

} 
```

所以我仍然不完全理解 - 为什么这个改变能解决它？毕竟是范围问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:52:50.717

如果我正确阅读了您的代码，那么您在此处遇到了范围问题

```
this.timer = setInterval(function()
{
    this.tasks.fire();  <-- this will be in window scope
}, 1000); 
```

它应该是

```
this.timer = setInterval(function()
{
    instance.tasks.fire(); 
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:14:25.383

我相信以下严格的模式限制是解释。

> 如果 this 在严格模式代码中进行评估，则 this 值不会被强制转换为对象。null 或 undefined 的 this 值不会转换为全局对象，原始值也不会转换为包装器对象。通过函数调用（包括使用 Function.prototype.apply 和 Function.prototype.call 进行的调用）传递的 this 值不会强制传递的 this 值到对象（10.4.3、11.1.1、15.3.4.3、15.3\. 4.4)。

你打电话时

```
return Singleton(); 
```

该`this`值实际上是未定义的。尝试这样做。

```
return {
    getInstance: function () {
        return instance || new Singleton();
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:52:57.420

不确定这是否是原因，但看起来像“tasks = $.Callbacks();”的行 应该是“this.tasks = $.Callbacks();”。此外，当您提供一个实例作为回调时，您将失去“this”绑定。您使用“this”调用任何内容的函数体。应该改为使用在外部闭包中捕获它的 var（看起来像 'instance' 一样。

因此，例如，有问题的方法将显示为：

this.timer = setInterval(function() { instance.tasks.fire(); }, 1000);

# linux - 使用 matlab 将直方图打印到文件的问题

> ID：15710370
> 
> 赞同：2
> 
> 时间：2013-03-29T19:43:29.203
> 
> 标签：linux, matlab

我正在尝试在数组中创建数字的直方图。我正在使用 Matlab 来执行此操作。我通过 ssh 连接，所以我只能在我的 Linux 计算机的终端中使用 Matlab。我正在尝试创建数组中数据的直方图并将其保存为 .png。我知道为了让我保存它，我需要使用该`print`功能。到目前为止，我的尝试如下：

```
h=hist(array) 
print(h,'-dpng','hist1.png') 
```

这告诉我没有定义变量，`-dpng`但我认为重点是指定文件类型。

然后我只是删除`-dpng`并运行它

```
print(h,'hist1.png') 
```

它告诉我*“句柄必须是标量、向量或向量元胞数组”*

在这一点上，我完全不知道下一步该做什么。我希望有人帮我弄清楚如何将此直方图打印到 .png 文件中。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:56:25.543

`hist`不返回图形句柄，您可以执行以下操作：

```
h = figure;
hist(array);
print(h, '-dpng', 'hist1.png'); 
```

保存直方图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:53:44.673

函数 hist(array) 本身会绘制一个直方图。如果将输出分配给变量，它会返回数组的分箱值，而不是图的句柄。

```
f = figure;
hist(array)
saveas(f,'hist.png') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:02:23.617

you may would like to output the array to a csv file.

```
fid = fopen('file.csv','wt');
for i=1:size(arr)
    fprintf(fid, '%s,%d,%d\n','element number' ,i ,arr(i));
end
fclose(fid); 
```

See this link, you should be able to change the answers there to your needs: [Outputing cell array to CSV file ( MATLAB )](https://stackoverflow.com/questions/6752102/outputing-cell-array-to-csv-file-matlab)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T20:28:19.863

除非您想打印不是当前的图形，否则您不需要使用图形句柄。默认情况下`print`使用`gcf`返回当前图形的句柄。

所以你可以这样做：

```
hist(array) 
print('-dpng','hist1.png') 
```

* * *

你得到一个错误，没有定义变量，`-dpng`可能是因为你忘记了一个引号并使用了`-dpng'`.

# c# - 如何强制以超类形式放置控件？

> ID：15710373
> 
> 赞同：2
> 
> 时间：2013-03-29T19:43:37.757
> 
> 标签：c#, winforms, visual-studio, user-controls

*有关问题的快速总结，请查看底部的图片。*

你好，

我创建了一个`Form`（名为 BaseForm）作为我所有窗口的基础。这个基本表单包含（为了简单起见）底部的“状态栏”（用户控件）之类的东西。

该状态栏已锁定，因此无法在设计器中移动或调整其大小。它还将它的锚点设置为左、下、右，因此它始终保持在底部并水平调整大小。

现在，当创建另一个`Form`并更改它继承 MyProject.BaseForm 而不是 System.Windows.Forms.Form 时，状态栏就在那里。

但是现在状态栏的位置和大小存在问题。状态栏的标准位置和大小是错误的。VisualStudio 从 BaseForm 获取位置和大小，而不是应用 Anchor。

我也不能（也不想！）移动/调整状态栏的大小来解决问题。

一种明显且可行的解决方案是将状态栏 Dock 属性设置为底部。但我不能将其用作解决问题的通用解决方案，因为我也有不应停靠的控件。（例如，应该始终位于表单右下角的按钮）

![](../Images/71dc4dc89ff3179a68462c78380e9366.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:28:00.310

You have a simple problem, the control is private so can't be messed with in the derived form. None of its properties are accessible, including Location and Size. Which freezes it solid in the wrong spot on your derived form. The layout engine can't move it either. And why it displays the lock icon.

Go back to the BaseForm, select the user control and change the Modifiers property from Private to Protected. Rebuild. Now you can move it on the derived form where it needs to go.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:59:20.307

I think the best way to approach this is to use a `TableLayoutPanel` instead of explicit docking. Create a 2 row `TableLayoutPanel` in the parent form. Make the bottom row `AutoSize` and put the status bar into that. This way the derived forms are free to add content in the other row which represents the remainder of the control.

# javascript - Server side requirejs optimization (r.js) multipage site

> ID：15710378
> 
> 赞同：2
> 
> 时间：2013-03-29T19:43:53.493
> 
> 标签：javascript, requirejs, amd, r.js

I'm building a site which has so many widgets. I'm using requirejs to load each widgets logic as a module.

Eg: In my homepage 20 widgets are there & I'm using require config to load all widgets js file. I can't optimize all files to a single js file using r.js during build process, because the widgets can be altered from backend. It leads to 20 extra http request.

```
require({
    baseUrl: 'http://example.com/',
    paths:{
        widget1:'app/wid1',
        widget2:'app/wid2',
        ....
        widget20:'app/wid20'
    },
    waitSeconds: 30
}); 
```

***Question:*** Is it possible to dynamically merge all modules into a single file using any server side technique, to save http request?.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:15:47.640

Answering my own question:

Module server is the solution - [https://github.com/google/module-server](https://github.com/google/module-server)

[http://www.youtube.com/watch?feature=player_embedded&v=mGENRKrdoGY](http://www.youtube.com/watch?feature=player_embedded&v=mGENRKrdoGY)

# javascript - 如何在Javascript中触发某个事件

> ID：15710383
> 
> 赞同：0
> 
> 时间：2013-03-29T19:44:22.790
> 
> 标签：javascript, arrays, random

首先抱歉问的不好，我不知道怎么用一句话写好。

这是我的场景，我正在制作一个游戏，在屏幕上显示 3 张图片和一个单词。这些图片和文字来自数据库。

数据被输入到数据库中，因此每输入一个单词，就会上传一张图片。

所有这些单词和图像集都从数据库中提取并放入 JavaScript 数组中。然后我从一个数组中随机选择 3 个图像并将它们放在另一个数组中，然后从第二个数组中随机选择一个单词。

我的问题是你如何使我选择的单词与正确的图像链接，然后当用户点击正确的图片时，屏幕上会出现“做得好”这样的事情？

这是我的数组布局：-

```
 var items = [
          {name:'Coch',image:'upload/coch.png'},                                                                                   {name:'Glas',image:'upload/glas.png'},
     {name:'Melyn',image:'upload/melyn.png'},{name:'Ci',image:'upload/dog.jpg'},
      {name:'Cath',image:'upload/cath.jpg'},{name:'Gwyrdd',image:'upload/gwyrdd.png'},
     {name:'Un',image:'upload/un.jpg'},{name:'Dau',image:'upload/dau.jpg'},
     {name:'Tri',image:'upload/tri.jpg'},{name:'Bochdew',image:'upload/bochdew.jpg'},
     {name:'Piws',image:'upload/piws.png'}      ]; 
```

这是我的完整代码：-

```
 <!DOCTYPE html>

      <html lang="en">

             <div id="choosecat">
             <form method="get" action="playgame.php"       autocomplete="off">

                       <fieldset>
                          <legend>Choose Category</legend> 

                          <label>Category: <select name="topic">

                          <option value="%">All</option>
                           <option value="Animals">Animals</option>
                          <option value="Numbers">Numbers</option>
                          <option value="Colours">Colours</option>

                           </select></label>

                           <input type="submit" id="submitbutton" value="Go" />

                      </fieldset>

                        <br />

                  </form>

                  <?php 

                    $topic = $_GET['topic'];

                   $topic_choice = htmlspecialchars($topic,  ENT_QUOTES);

                   ?>

                        </div>

        <head>
              <title></title>

        <link rel="alternate stylesheet" type="text/css" title="red"
           href="gameplay.css">

        <link rel="stylesheet" type="text/css" title="blue"
       href="theme1.css">

      <link rel="alternate stylesheet" type="text/css" title="pink"
    href="theme2.css">

    <script src="js/stylesheets.js" type="text/javascript"></script>
        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="js/javascript.js" type="text/javascript"></script>

      <script>

   var items = [
      <?php
       $con = mysql_connect("localhost","admin","password");
      if (!$con) {
        die('Could not connect: ' . mysql_error());
       }
      mysql_select_db("learning_game", $con);
      $result = mysql_query("SELECT * FROM data WHERE category LIKE '$topic_choice' ");
      $first = true;

      while ($row = mysql_fetch_array($result)) {
        if (!$first) {
          echo ",";
        }
        $first = false;
        echo "{name:'" . $row['word'] . "',image:'" . $row['image'] . "',video:'" .     $row['video'] . "',audio:'" . $row['audio'] . "'}";
    }
      mysql_close($con);
      ?>
     ];
    for (var i = 0; i < items.length; i += 1) {
        //document.getElementsByTagName('div')[0].innerHTML += items[i].name + " / " + items[i].image + "<br />\n";
        }  

           document.write("<br /> <br /> <br />");

    console.log(items);
    top.items = items;

        var images = new Array();
         var list = document.getElementsByTagName('div')[0];
         var names = new Array()
        var videos= new Array()
        var audios= new Array()

             for(i = 0; i < 3; i++) {

          // Choose a random item and removes it from the array
            var item = items.splice(Math.floor(Math.random() * items.length), 1)[0];

           // Create the image element and set its src attribute
           images[i] = document.createElement('img');
          images[i].src = item.image;

          videos[i] = document.createElement('video');
          videos[i].src = item.video;
             //video.controls = true;

              audios[i] = document.createElement('audio');
             audios[i].src = item.audio;
             //audio.controls = true;

             // var audio = new Audio(video);

             // Add it to your container element

           images.src = item.image;
            videos.src = item.video;
        audios.src = item.audio;
        names[i] = item.name;

          }
         var randomIndex = Math.floor(Math.random() * 3);
          var name_to_display = names[randomIndex];
         var image_to_display = images[randomIndex];
        var video_to_display = videos[randomIndex];
        var audio_to_display = audios[randomIndex];

      var data = new Array();

   document.getElementById("one").appendChild(images[0]);
   document.getElementById("two").appendChild(images[1]);
   document.getElementById("three").appendChild(images[2]);

       document.body.appendChild(audio[0]);
  document.getElementById("whitebox").appendChild(video[1]);
   document.getElementById("whitebox").appendChild(video[2]);

    /*document.getElementById("one").appendChild(data.image[0]);
    document.getElementById("two").appendChild(data.image[1]);
     document.getElementById("three").appendChild(data.image[2]);
   */

          </script>

       </head>

       <body onload="set_style_from_cookie()">
        <div id="container">

            <div id="header">
                <br />
                <img id="mabon" src="mabon.png"/>

            </div>

                       <div id="radio">
                          <input class="centerradio" type="checkbox"  name="theme" onclick="switch_style('red');return false;" value="Main">Mabon A Mabli
                            <input id="top_radio_button" class="centerradio" type="checkbox" name="theme" onclick="switch_style('blue');return false;" value="Blue Theme">Pastel <br>
                          <input class="centerradio" type="checkbox" name="theme" onclick="switch_style('pink');return false;" value="Pink Theme">Plain<br />
                       </div>

                     <div id="change_cat">

           <div id="random">

           <div class="wrapper">
               <div id="one" class="item"></div>

             <div id="two" class="item"></div>

               <div id="three" class="item"></div>

          </div>

          <div id="wordwrapper">

              <div id="worddiv">

                  <p id="wordtext"><script>document.write('-- '+name_to_display+' --');</script></p>

             </div>

          </div>

       <div id="videocorner">
        Video Corner
       </div>   

       <div id="videodiv">
          <video width="300" height="230" controls>
               <source src="bbc_three.mp4" type="video/mp4">
               <source src="movie.ogg" type="video/ogg">
               Your browser does not support the video tag.
          </video>
      </div>

      <div id="linkdiv">
               <a href="#" id="link" class="myButton">Makaton</a>
          </div>

              <div id="sounddiv">
      <!--
    <audio autoplay="3" controls>
      <source src="hover.wav" type="audio/wav">
     <source src="hover.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
      </audio>
        -->

     </div> 
       <img src="cartoon.png" id="help" height="200px">
     </div>     

      <div id="whitebox">
        <script>

            </script>
      </div>

          <div id="disp">

       <script>
         var audio = document.createElement('audio');
               audio.src = audio_to_display.src;
         //audio.src = item.audio;
         audio.controls = true;
         document.getElementById("disp").appendChild(audio);
     </script>

      <script>
                document.getElementById("one").appendChild(images[0]);
          document.getElementById("two").appendChild(images[1]);
         document.getElementById("three").appendChild(images[2]);

         var video = document.createElement('video');
         video.src = video_to_display.src;
         //video.src = item.video;
         video.controls = true;
         document.getElementById("disp").appendChild(video);
        </script>

          </div>

        </body>
     </html> 
```

对不起代码的质量，我是 Javascript 和 Web 开发的新手。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:10:11.440

基本上，你需要三样东西：

1.  每个图像上的 alt 标签，用于标识它是什么
2.  正确答案的 id，对应于其中一张图片的 alt 标签
3.  每个图像上的点击功能，将图像的 ID 与正确答案进行比较，如果正确，则显示警报。

所以是这样的：

```
// Create the image element and set its src attribute
images[i] = document.createElement('img');
images[i].src = item.image;
images[i].alt = item.name;
images[i].onclick = function(e) {
    if (e.target.alt == name_to_display)
    {
        alert('good job!');
    }
}; 
```

它应该创建一个看起来像这样的图像标签：

```
<img alt="Brown Dog" src="/images/browndog.jpg" /> 
```

which when clicked on, compares the value of its alt tag with the saved name_to_display (which I'm assuming you meant to hold the value of the correct answer), and if the same, displays the alert. This should work if name_to_display is in the correct scope.

# php - 简单的静态方法问题

> ID：15710384
> 
> 赞同：0
> 
> 时间：2013-03-29T19:44:35.127
> 
> 标签：php

我有一个关于抽象类的问题

我有

```
abstract class testMaster
{

    public function __construct($b, $a)
    {
        $this->a = $a;
        $this->b = $b;
    }

    public static function create($test)
    {
        //handle test
        switch($test) {
         case 'test1':
            require_once 'test1.class';
            return new test1($a, $v);
            break;
         case 'test2':
         case 'test3':
             require_once 'test2.class';
             return new test2($a, $v);
             break;

        }
    }

class tester extends testMaster{

    codes...

} 
```

我的问题是

如果我想调用静态' `create`'方法，如何调用它。

我用过`testMaster::create()`，但它似乎没有返回任何东西。有小费吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:47:04.660

一些事情（见评论）：

```
abstract class testMaster
{

  public function __construct($b, $a)
  {
      $this->a = $a;
      $this->b = $b;
  }

  public static function create($test)
  {

      switch($test) {
       case 'test1':
          require_once 'test1.class';
          return new test1($a, $v);
          break;
       case 'test2':
       case 'test3':
           require_once 'test2.class';
           return new test2($a, $v); // Missing a ')'
           break;

      }
  }

} // Missing '}'

class tester extends testMaster{ // Should be 'extends'

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:51:03.440

如果您只是调用`testMaster::create()`，那么您不会将参数传递给 $test。由于 $test 没有 switch case 为空，并且您没有声明`default`case，它只是运行到 Create() 的底部，并且什么也不返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:54:11.477

是的，一旦你修复了语法错误，你可以调用

```
$obj = testMaster::create('test1'); 
```

顺便说一句，我肯定会建议您使用一些[类加载器](http://php.net/manual/en/language.oop5.autoload.php)机制并避免使用 require 调用。

Furthermore, if you're interested in well-designed testing, you can have a look at [PHPUnit](https://github.com/sebastianbergmann/phpunit/).

# c++ - 从函数返回进入无限循环 Visual Studio 2012

> ID：15710392
> 
> 赞同：2
> 
> 时间：2013-03-29T19:45:09.680
> 
> 标签：c++, visual-c++, c++11

我正在尝试测试各种指针速度的速度并遇到了一个非常奇怪的问题。分配原始指针时，它运行良好。（存在内存泄漏，但这不是问题。）当我使用 shared_ptr 运行第二个测试时，它运行良好，打印日志，然后当它返回时，它进入一个无限循环。看起来引用计数是垃圾，但我正在按价值做所有事情。

```
#include <memory>
#include <vector>
#include <functional>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <string>

#include <Windows.h>

using namespace std;

static const int TOTAL = 1000000;

int* newTest(int i)
{
  return new int(i);
}

shared_ptr<int> sharedTest(int i)
{
  return shared_ptr<int>(new int(i));
}

template <typename T>
pair<int, vector<typename T::result_type>> Fill(T fn)
{
  unsigned long start = GetTickCount();
  vector<typename T::result_type> vec;
  vec.reserve(TOTAL);
  for(int i = 0; i < TOTAL; i++)
  {
    vec.push_back(fn(i));
  }
  unsigned long end = GetTickCount();
  return make_pair(end - start, move(vec));
}

template <typename T>
void Test(T fn, string name)
{
  vector<typename T::result_type> newTest;
  int milliseconds = 0;
  tie(milliseconds, newTest) = Fill(fn);
  cout << "Fill " << name << " Took " << milliseconds << " milliseconds." << endl;
}

int main()
{
  function<int*(int)> fn1 = newTest;
  Test(fn1, "Raw Ptr");

  function<shared_ptr<int>(int)> fn2 = sharedTest;
  Test(fn2, "Shared New");

  return 0;
} 
```

好的。看来我在 Stackoverflow 上问了一个堆栈溢出问题......当我将 TOTAL 设置为 10000 时，这很好。那么，这只是其他问题的症状还是我需要增加我的筹码量？

*从评论编辑：*

> 塔维森：好的。几分钟后它结束了。你说的不是无限循环是对的。但是，新的 1043 毫秒和许多分钟的删除使得很难证明使用它们的合理性。这不是我所期望的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:01:46.190

没有无限循环，你只是不耐烦。释放所有`shared_ptr`'s 需要时间。

为了能够声称存在无限循环，您需要实际进入代码并查看一下。检查某处是否存在某种循环，其条件永远不会改变。这不是这里的情况。

* * *

`TOTAL`例如，降低你的 ，并验证它实际上结束了。拥有更多这些不会神奇地在某个数字上引入无限循环，因此如果它以较低的数字工作，它会以较高的数字工作。

或者，不要分配`int`s; 分配一些测试结构，`"bye"`当它被破坏时输出（连同一些计数器），你会看到“post”-test 它们都被删除了。（当然，执行 IO 会增加销毁时间，但关键是要验证一个条件正在朝着停止循环的方向发展。）

此外，您可以通过使用`return make_shared<int>(i);`而不是`new`自己使用 int 并将其放入`shared_ptr`. 始终使用`make_shared`.

最后，如果您连接了调试器，这只会很慢，因为它会调试您的内存使用情况。也就是说，验证您要删除的内容是否可以删除，不会破坏任何内容等。

[并且对于编程的热爱使用四个空格来缩进，而不是两个。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T20:13:57.987

If you run the code in debug or release with debugging, you'll get a debug heap that can be used to track memory errors. Freed memory is filled with debug patterns when this happens, so the code will run slower. Running the code without debugging from Visual Studio ends in less than 200 milliseconds.

# php - MYSQL - 插入错误，字段列表中的未知列

> ID：15710397
> 
> 赞同：6
> 
> 时间：2013-03-29T19:45:39.133
> 
> 标签：php, mysql, sql-insert

我从这个简单的 mysql 语句中不断收到以下错误，我不明白为什么。我确定它很明显。

```
require_once("connect.php");

$query = mysql_query("SELECT * FROM accounts ORDER BY id DESC LIMIT 1");
$row = mysql_fetch_assoc($query);

$balanceold = $row['balance'];
$difference = $_POST['predec'].".".$_POST['dec'];

$category = $_POST['category'];
$notes = $_POST['notes'];

if(isset($_POST['in'])){
$balancenew = $balanceold + $difference;
$query = mysql_query("INSERT INTO accounts(currentbalance, balancein, category, notes) VALUES (".$balancenew.", ".$difference.", ".$category.", ".$notes.")");  
if($query){
header("Location: budget.php"); 
}
else{
die(mysql_error());
}
} 
```

给出错误：“字段列表”中的未知列“发薪日”

这是我的表单代码：

```
<form action=process.php method=post>

&pound;
<input type=text name=predec size=7>
. 
<input type=text name=dec size=4 value=00>
<br />
<select name=category>
<option value=payday>Payday</option>
</select>
<input type=text name=notes size=20>
<input type=submit name=in value=Deposit>
<input type=submit name=out value=Withdraw>
</form> 
```

数据库表“accounts”包含以下字段：

id, int 主要 A_I

balancein，十进制 10,2

余额，十进制 10,2

当前余额，十进制 10,2

类别，varchar 50

注释，varchar 255

日期，时间戳

...以该顺序

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T19:48:19.790

试试这个（用单个配额将每个变量括在查询中）：

```
mysql_query("INSERT INTO accounts(currentbalance, balancein, category, notes) 
          VALUES ('$balancenew', '$difference', '$category', '$notes')"); 
```

Its better to use [mysqli](http://php.net/manual/en/book.mysqli.php) or [PDO](http://php.net/manual/en/book.pdo.php) to prevent from SQL injection attack, you could use mysql_real_escape_string() for now:

```
$balancenew = mysql_real_escape_string($balancenew); 
```

and for other variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T13:20:00.663

Thats because you have syntax error in your INSERT query. String and Date values are to passed into **single quotes** and not **double quotes** in sql. the **.** or the String concatenation character is also not required. So based on the data you provided it might be

```
$query = mysql_query("INSERT INTO accounts(currentbalance, balancein, category, notes) 
                      VALUES ($balancenew, $difference, '$category', '$notes')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:47:12.657

基本上什么 sql 告诉您您正在引用插入中未在数据库中定义的列。提供您的表结构或确保列名与您在 db.xml 中定义的完全一致。HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T13:23:25.653

You have missed single inverted commas enclosing $notes and $category I guess. Enclose them in ' and your problem should be solved.

# python - 如何在 Python 中为 HTTP POST 获取可写文件对象？

> ID：15710399
> 
> 赞同：0
> 
> 时间：2013-03-29T19:45:46.847
> 
> 标签：python, http, post

我有一个 Python 脚本，它产生一些数据。我想使用 POST 将其流式传输到 HTTP 服务器。也就是说，我不想在缓冲区中累积数据然后发送它——我只想在它创建时发送它。会有很多。

显而易见的方法是以某种方式打开 HTTP 连接，返回一个可写文件对象，将数据写入该对象，然后关闭连接。

但是，对我来说，我查看过的任何库（ 、 和 ）都支持这一点`urllib2`并不`httplib`明显`requests`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:32:12.060

这个可写对象无论如何都必须缓冲数据 - 没有可流式传输的[HTTP POST](https://stackoverflow.com/questions/13868742/streaming-data-from-client-with-http-post)。在这种情况下，您将不得不查看 HTTP POST 之外的其他内容。

为什么不使用 StringIO 或其他东西缓冲数据，然后 POST 数据。可以清理以下代码，但这是一个使用的骨架`requests`：

```
import requests
import StringIO

class HttpPostWritable(object):
    def __init__(self, url, init_buffer=''):
        self._url = url
        self._buffer = StringIO.StringIO(init_buffer)

    def write(self, data):
        self._buffer.write(data)

    def close(self):
        requests.post(self._url, self._buffer.getvalue()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T19:46:59.787

您不会通过 urllib2 / urllib 获得可写文件对象。返回值是一个支持迭代和读取的“类文件”对象。如果您可以读取内容并创建自己的文件对象进行写入。

# javascript - 准备好带有 Javascript 的 Handler Windows Store App

> ID：15710406
> 
> 赞同：1
> 
> 时间：2013-03-29T19:46:11.860
> 
> 标签：javascript, windows-store-apps, document-ready

我有一个导航应用程序，我想让将要加载到的第二个页面`default.html`在就绪部分执行一个功能。

我写`home.js`了以下代码：

```
(function () {
    "use strict";

    WinJS.UI.Pages.define("/pages/home/home.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            // TODO: Initialize the page here.

            var articlesList;

            articlesList = new WinJS.Binding.List();
            var publicMembers = { ItemList: articlesList };
            WinJS.Namespace.define("DNZ", publicMembers);

        },

        RSSFeedHandler: function getRssFeed() {
            WinJS.xhr({ url: "http://feeds.feedburner.com/dotnetzone?format=xml" }).then(function (rss) {
                var items = rss.responseXML.querySelectorAll("item");

                for (var n = 0; n < items.length; n++) {
                    var article = {};
                    article.title = items[n].querySelector("title").textContent;
                    article.link = items[n].querySelector("link").textContent;
                    article.description = items[n].querySelector("description").textContent;
                    article.pubDate = items[n].querySelector("pubDate").textContent;
                    articlesList.push(article);
                }
            });
        }

    });
})(); 
```

但这在将其运行到调试器时会导致问题；它停止了。

我的`home.html`页面包含以下标签：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>homePage</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="/css/default.css" rel="stylesheet" />
    <link href="/pages/home/home.css" rel="stylesheet" />
    <script src="/pages/home/home.js"></script>
</head>
<body>
    <!-- The content that will be loaded and displayed. -->
    <div class="fragment homepage">
        <div id="main">
            <div id="DNZItemTemplate" data-win-control="WinJS.Binding.Template" style="display: none;">
                <div class="listItemTemplate" style="width: 173px; height: 100px;">
                    <div class="listItemTitle" data-win-bind="innerText: title" style="width: 173px; height: 100px;"></div>
                    <div class="listItemImage" data-win-bind="innerText: pubDate" style="width: 173px; height: 100px;"></div>
                    <!--<div class="listItemTitle" data-win-bind="innerText: link">
                    </div>-->
                </div>
            </div>
            <header aria-label="Header content" role="banner">
                <button class="win-backbutton" aria-label="Back" disabled type="button"></button>
                <h1 class="titlearea win-type-ellipsis">
                    <span class="pagetitle">Καλως ήρθατε!</span>
                </h1>
            </header>
            <section aria-label="Main content" role="main">
                <section id="content">
                    <div id="articlelist" data-win-control="WinJS.UI.ListView" data-win-options="{ itemDataSource: DNZ.ItemList.dataSource, itemTemplate: DNZItemTemplate }"></div> 
                </section>
            </section>
            </div>
    </div>
</body>
</html> 
```

我认为问题出在我尝试将项目放入列表视图时！您对我必须编写它以在加载`getRSSFeed`时运行该函数的方式有任何想法吗？`home.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:44:36.760

为了让文章列表在 RSSFeedHndler 方法中可见，您需要将其设置为页面对象的属性，如下所示：

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/home/home.html", {
    articlesList:null,
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {
        // TODO: Initialize the page here.

        // var articlesList;
        this.articlesList = new WinJS.Binding.List();

        var publicMembers = { ItemList: articlesList };
        WinJS.Namespace.define("DNZ", publicMembers);
    },

    RSSFeedHandler: function getRssFeed() {
        var _this=this;
        WinJS.xhr({ url: "http://feeds.feedburner.com/dotnetzone?format=xml" }).then(function (rss) {
            var items = rss.responseXML.querySelectorAll("item");

            for (var n = 0; n < items.length; n++) {
                var article = {};
                article.title = items[n].querySelector("title").textContent;
                article.link = items[n].querySelector("link").textContent;
                article.description = items[n].querySelector("description").textContent;
                article.pubDate = items[n].querySelector("pubDate").textContent;
                _this.articlesList.push(article);
            }
        });
    }

}); 
```

})();

# android - 修改 Android 源代码以满足我的业务需求

> ID：15710408
> 
> 赞同：0
> 
> 时间：2013-03-29T19:46:28.050
> 
> 标签：android

作为概念验证，我想创建一个简化的 Android API，以便在 API 级别强制应用程序具有某种行为，并且只提供“干净”android 提供的功能的一个子集。实际上，它类似于拥有一个自定义 ROM，除了对开发人员执行一组规则。

我应该从哪里开始？我可以合法地修改android源以更改开发者API，还是被禁止？我可以将修改后的版本用于商业目的吗？

也许有一个比更改 Android 源更简单的解决方案，或者我应该开始挖掘存储库并构建自己的版本？

谢谢，哈雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:50:59.713

> 我应该从哪里开始？

[http://source.android.com](http://source.android.com)

> 我可以合法地修改android源以更改开发者API，还是被禁止？

是的，只要您遵守相关的软件许可证（主要是 Apache 许可证 2.0），并且只要您意识到如果您以不符合兼容性的方式更改 API，您将无法获得 Play 商店和其他商业 Google 应用程序的许可测试套件。

> 我可以将修改后的版本用于商业目的吗？

是的，只要您遵守相关的软件许可（主要是 Apache 许可 2.0）。

> 也许有一个比改变Android的源更简单的解决方案

由于不清楚您希望完成什么，除了破坏很多应用程序之外，任何人都很难回答这个问题。

# c# - 使 C# 搜索硬盘驱动器排除目录

> ID：15710409
> 
> 赞同：0
> 
> 时间：2013-03-29T19:46:45.073
> 
> 标签：c#, directory

程序遍历目录并将 Avi 文件打印到文本框

 `````
 public FileList()
    {
        InitializeComponent();
        //Sets Drive Choices
        DriveInfo[] drives = DriveInfo.GetDrives();
        foreach (DriveInfo d in drives)
        {
            driveChoice.Items.Add(d);
        }
    }

    //Find Video Files
    private void btnStart_Click(object sender, EventArgs e)
    {            
        String path = driveChoice.Text;
        if (path != "C:\\")
        {
            String[] allfiles = Directory.GetFiles(path, "*.avi*", System.IO.SearchOption.AllDirectories);
            foreach (String file in allfiles)
            {
                tbFileList.Text = tbFileList.Text + file + "\r\n";
            }
        }
        else
        {
            Application.Exit();
        }

    }
} 
````  `运行时出现错误。

**未经授权的访问 'I:\$RECYCLE.BIN\S-1-5-21-1332477098-3306142970-3529014387-1000\'**

我可以将程序设置为跳过“I:\$RECYCLE.BIN”吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:50:10.187

现在没有办法让`AllDirectories`选项跳过特定目录或忽略遍历时发生的异常。您将需要手动搜索目录结构并处理发生的错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T19:52:44.033

看起来您需要切换到递归解决方案或其他循环，而不是使用“AllDirectories”。这样你就可以提供一些跳过逻辑。

看到这个链接[http://support.microsoft.com/kb/303974](http://support.microsoft.com/kb/303974)

以及该页面中的此代码段：

```
void DirSearch(string sDir) 
    {
        try 
        {
            foreach (string d in Directory.GetDirectories(sDir)) 
            {
                foreach (string f in Directory.GetFiles(d, txtFile.Text)) 
                {
                    lstFilesFound.Items.Add(f);
                }
                DirSearch(d);
            }
        }
        catch (System.Exception excpt) 
        {
            Console.WriteLine(excpt.Message);
        }
    } 
```

在该代码中，您只需检查您的 sDir 是否有您想要跳过的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:49:27.280

`if !filePath.Contains("I:\$RECYCLE.BIN")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T20:01:22.693

使用 lambda 语句排除系统目录：

```
public FileList()
{
    InitializeComponent();
    //Sets Drive Choices
    DriveInfo[] drives = DriveInfo.GetDrives();
    foreach (DriveInfo d in drives)
    {
        driveChoice.Items.Add(d);
    }
}

//Find Video Files
private void btnStart_Click(object sender, EventArgs e)
{            
    String path = driveChoice.Text;
    if (path != "C:\\")
    {
        DirectoryInfo root = new DirectoryInfo(path);
        var rootFiles = root.GetFiles("*.avi");
        var rootDirs = root.GetDirectories("*", SearchOption.TopDirectoryOnly).Where(d => !d.Name.Equals("System Volume Information") && !d.Name.Equals("$RECYCLE.BIN"));
        foreach (var file in rootFiles)
        {
            tbFileList.Text = tbFileList.Text + file.FullName + "\r\n";
        }
        foreach (var dir in rootDirs)
        {
            foreach (var dirFile in dir.GetFiles("*.avi", SearchOption.AllDirectories))
            {
                tbFileList.Text = tbFileList.Text + dirFile.FullName + "\r\n";
            }
        }

    }
    else
    {
        Application.Exit();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T09:09:56.897

我刚刚尝试使用 Lambda 表达式从 VS 2017 中返回的字符串列表中排除两个文件夹。我观察到一些奇怪的事情。如果 lambda 表达式直接添加到目录检索中，如上面显示的字符串，列表仍会返回 $RECYCLEBIN，但不会返回 SVI 文件夹。为了使 lambda 正常工作，我需要将 2 个操作分开，即：

```
 var allDirs = rootDir.GetDirectories("*",SearchOption.TopDirectoryOnly);
 var filteredDirs = allDirs.Where(d=> !d.Name.Equals("System Volume Information") && !d.Name.Equals("$RECYCLE.BIN")); 
`````

# php - 使用 Composer 和 autoload.php 在 PHPUnit 中自动加载类

> ID：15710410
> 
> 赞同：68
> 
> 时间：2013-03-29T19:46:53.403
> 
> 标签：php, namespaces, phpunit, autoload, composer-php

我刚刚通过 Composer 安装了 Sebastian Bergmann 的 PHPUnit 3.7.19 版，并编写了一个我想进行单元测试的类。

我希望我的所有类都自动加载到每个单元测试中**，而**不必使用`include`或`require`在我的测试顶部，但事实证明这很困难！

这是我的目录结构的样子（尾部 / 斜杠表示目录，而不是文件）：

*   作曲家.json
*   作曲家锁
*   作曲家.phar
*   库/
    *   返回.php
*   测试/
    *   返回Test.php
*   小贩/
    *   仓/
        *   phpunit
    *   作曲家/
    *   php单元/
    *   symfony/
    *   自动加载.php

我的**composer.json**文件包括以下内容：

```
"require": {
    "phpunit/phpunit": "3.7.*",
    "phpunit/phpunit-selenium": ">=1.2"
} 
```

我的**返回.php**类文件包括以下内容：

```
<?php
class Returning {
    public $var;
    function __construct(){
        $this->var = 1;
    }
}
?> 
```

我的**returnedTest.php**测试文件包括以下内容：

```
<?php
class ReturningTest extends PHPUnit_Framework_TestCase
{
    protected $obj = null;

    protected function setUp()
    {
        $this->obj = new Returning;
    }

    public function testExample()
    {   
        $this->assertEquals(1, $this->obj->var);
    }

    protected function tearDown()
    {

    }
}
?> 
```

但是，当我从命令行运行时`./vendor/bin/phpunit tests`，出现以下错误：

> PHP 致命错误：在第 8 行的 /files/code/php/db/tests/returningTest.php 中找不到类“返回”

我注意到`composer`生成了一个`autoload.php`文件，`vendor/autoload.php`但不确定这是否与我的问题有关。

此外，在 Stack Overflow 上的其他一些答案中，人们提到了在 composer 中使用[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)`namespace`和PHP 中的命令，但我没有成功使用任何一个。

请帮忙！我只想在 PHPUnit 中自动加载我的类，这样我就可以使用它们来创建对象而不必担心`include`or `require`。

* * *

**更新：2013 年 8 月 14 日**

[我现在创建了一个名为PHPUnit Skeleton](https://github.com/jasdeepkhalsa/phpunit-skeleton)的开源项目，以帮助您轻松地为您的项目启动和运行 PHPUnit 测试。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-29T20:58:53.080

嗯，一开始。您需要告诉自动加载器在哪里可以找到类的 php 文件。这是通过遵循 PSR-0 标准来完成的。

最好的方法是使用命名空间。`Acme/Tests/ReturningTest.php`当你请求一个`Acme\Tests\ReturningTest`类时，自动加载器会搜索一个文件。那里有一些很棒的命名空间教程，只需搜索和阅读。请注意，命名空间*不是*PHP 用于自动加载的东西，而是可以用于自动加载的东西。

Composer 带有一个标准的 PSR-0 自动加载器（中的那个`vendor/autoload.php`）。在您的情况下，您想告诉自动加载器在目录中搜索文件`lib`。然后当你使用`ReturningTest`它时会寻找`/lib/ReturningTest.php`.

将此添加到您的`composer.json`：

```
{
    ...
    "autoload": {
        "psr-0": { "": "lib/" }
    }
} 
```

[文档](http://getcomposer.org/doc/04-schema.md#autoload)中的更多信息。

现在自动加载器可以找到你需要的类，让 PHPunit 在运行测试之前知道有一个文件要执行：一个引导文件。您可以使用该`--bootstrap`选项指定引导文件所在的位置：

```
$ ./vendor/bin/phpunit tests --bootstrap vendor/autoload.php 
```

但是，最好使用[PHPunit 配置文件](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)：

```
<!-- /phpunit.xml.dist -->
<?xml version="1.0" encoding="utf-8" ?>
<phpunit bootstrap="./vendor/autoload.php">

    <testsuites>
        <testsuite name="The project's test suite">
            <directory>./tests</directory>
        </testsuite>
    </testsuites>

</phpunit> 
```

现在，您可以运行该命令，它会自动检测配置文件：

```
$ ./vendor/bin/phpunit 
```

如果将配置文件放入另一个目录，则需要将该目录的路径放入带有`-c`选项的命令中。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-30T07:28:05.817

[ **Update2** ] 另一种更简单的替代方法是使用（[参考](https://getcomposer.org/doc/04-schema.md#autoload-dev)）`autoload-dev`中的指令。好处是您不需要为了自动加载不同的类而维护两个 bootstrap.php（一个用于 prod，一个用于 dev）。`composer.json`

```
{
  "autoload": {
    "psr-4": { "MyLibrary\\": "src/" }
  },
  "autoload-dev": {
    "psr-4": { "MyLibrary\\Tests\\": "tests/" }
  }
} 
```

[**更新**] Wouter J 的回答更完整。但我的可以帮助想要在`tests/`文件夹中设置 PSR-0 自动加载的人。
Phpunit 使用这种模式扫描所有文件`*Test.php`。所以我们不需要自己自动加载它们。但是我们仍然希望自动加载其他支持类，`tests/`例如fixture/stub或一些父类。

一个简单的方法是查看 Composer 项目本身是如何设置 phpunit 测试的。其实很简单。请注意带有“引导程序”的行。

参考：[https ://github.com/composer/composer/blob/master/phpunit.xml.dist](https://github.com/composer/composer/blob/master/phpunit.xml.dist)

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false"
         syntaxCheck="false"
         bootstrap="tests/bootstrap.php"
>
    <testsuites>
        <testsuite name="Composer Test Suite">
            <directory>./tests/Composer/</directory>
        </testsuite>
    </testsuites>

    <groups>
        <exclude>
            <group>slow</group>
        </exclude>
    </groups>

    <filter>
        <whitelist>
            <directory>./src/Composer/</directory>
            <exclude>
                <file>./src/Composer/Autoload/ClassLoader.php</file>
            </exclude>
        </whitelist>
    </filter>
</phpunit> 
```

参考：[https ://github.com/composer/composer/blob/master/tests/bootstrap.php](https://github.com/composer/composer/blob/master/tests/bootstrap.php)

```
<?php

/*
* This file is part of Composer.
*
* (c) Nils Adermann <naderman@naderman.de>
* Jordi Boggiano <j.boggiano@seld.be>
*
* For the full copyright and license information, please view the LICENSE
* file that was distributed with this source code.
*/

error_reporting(E_ALL);

$loader = require __DIR__.'/../src/bootstrap.php';
$loader->add('Composer\Test', __DIR__); 
```

上面的最后一行是在命名空间 Composer\Test 下自动加载 phpunit 测试类。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-29T15:42:43.443

这些答案都不是我想要的。是的 PHPUnit 加载测试文件，但不加载存根/固定装置。Chaun Ma 的回答并没有削减它，因为运行`vendor/bin/phpunit`已经包含自动加载，所以没有办法让自动加载器的实例在那时将更多路径推送到它的堆栈。

我最终在文档中找到了这个：

> 如果您需要在多个目录中搜索相同的前缀，您可以将它们指定为数组，如下所示：
> 
> ```
> {
>     "autoload": {
>         "psr-0": { "Monolog\\": ["src/", "lib/"] }
>     }
> } 
> ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-26T13:46:45.613

有一种***非常简单***的方法可以使用自动加载和引导来设置 phpunit。使用 phpunit 的选项***在几秒钟内***`--generate-configuration`创建您的`phpunit.xml`配置-：

 *```
vendor/bin/phpunit --generate-configuration 
```

（或者只是`phpunit --generate-configuration`在你的 PATH 中设置了 phpunit）。此选项已从 phpunit5 及更高版本中可用。

此选项将提示您输入引导文件 ( **vendor/autoload.php** )、测试和源目录。如果您的项目使用 composer 默认设置（请参见下面的目录结构），则默认选项将是您所需要的。只需按三下 RETURN！

```
project-dir
   -- src
   -- tests
   -- vendor 
```

你会得到一个默认的 phpunit.xml，这很好。您当然可以编辑以包括您需要的任何专业（例如`colors="true"`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/8.1/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         executionOrder="depends,defects"
         forceCoversAnnotation="true"
         beStrictAboutCoversAnnotation="true"
         beStrictAboutOutputDuringTests="true"
         beStrictAboutTodoAnnotatedTests="true"
         verbose="true">
    <testsuites>
        <testsuite name="default">
            <directory suffix="Test.php">tests</directory>
        </testsuite>
    </testsuites>
    <filter>
        <whitelist processUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">src</directory>
        </whitelist>
    </filter>
</phpunit> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-04T08:02:52.423

如果您使用的是[PHPUnit 7](https://phpunit.de/getting-started/phpunit-7.html)，您可以使您的类从`src/`文件夹自动加载，如下所示：

1.  确保您的`composer.json`文件类似于以下内容：

    ```
    {
        "autoload": {
            "classmap": [
                "src/"
            ]
        },
        "require-dev": {
            "phpunit/phpunit": "^7"
        }
    } 
    ```

2.  要在运行命令中**应用更改：**`composer.json`

    ```
    composer install 
    ```

3.  最后，您可以在`tests/`文件夹中运行测试：

    ```
    ./vendor/bin/phpunit tests/ 
    ```*

# qt - 从 OpenCV 窗口写入 QListWidget

> ID：15710415
> 
> 赞同：0
> 
> 时间：2013-03-29T19:47:08.960
> 
> 标签：qt, opencv, qlistwidget

我正在编写一个用于从图像中手动选择感兴趣区域的应用程序。将出现两个窗口：

1.  一个 OpenCV 窗口，用户应在其中用鼠标选择 ROI。
2.  一个 QT 窗口，将显示所选 ROI 的坐标（在 QListWidget 中）

我的问题是如何从 OpenCV 鼠标侦听器写入 QT 窗口的 QListWidget。我想我必须在我的 QT 类中编写一个函数，该函数返回一个指向 QListWidget 的指针，但我没有设法做到这一点。有人可以指出我正确的方向吗？

这是我的主要内容：

```
#include "myclass.h" 
#include <QApplication>
#include </PathToOPENCV/opencv/cv.h>
#include </PathToOPENCV/opencv/highgui.h>
#include <QtDebug>
#include <QListWidget>

using namespace cv;

// Pointer to list widget? Should I use it as a global variable to recieve the pointer of the QListWidget?

QListWidget * ptrToList;

void mouseEvent(int evt, int x, int y, int flags, void* param){

    if( evt == CV_EVENT_LBUTTONUP){
        // WRITE HERE ONTO QListWidget!
        // Something like:
        ptrToList->addItem("blah");
    }

}

int main(int argc, char *argv[])
{

    /*----- OPENCV STUFF ----*/

    String windowName = "selectionWindow";
    namedWindow( windowName , CV_WINDOW_NORMAL);
    Mat theImage = imread("/PATHTOIMAGE/1.jpg");
    imshow( windowName,theImage );

    /* ---- Mouse Listener setup ----- */

    setMouseCallback( windowName, mouseEvent , 0 );

    /* ---- QT Stuff ---- */

    QApplication a(argc, argv);
    myClass w;
    w.show();

    // Should I do something like this?
    ptrToList = w->getListPtr("listWidget");

    return a.exec();
} 
```

这是 myclass.h

```
namespace Ui {
class myClass;
}

class myClass : public QMainWindow
{
    Q_OBJECT

public:
    explicit myClass(QWidget *parent = 0);
    ~myClass();

private:
    Ui::myClass *ui;

    QListWidget * getListPtr(QString listName){
        QListWidget * theList;
        // None of these work...
        //theList = this->parent()->getChild( listName );
        //theList = this->getChild( listName );
        return(theList);
    }
}; 
```

**编辑：**

@Roku，

我试过你的建议，但我认为我做错了。我在 myclass 中添加了一个函数来设置鼠标回调，所以 myclass.h 是这样的：

```
#include <functions.cpp>
using namespace cv;

namespace Ui {
class myClass; /* error: forward declaration of 'struct Ui::myClass' */
}

class myClass : public QMainWindow
{
    Q_OBJECT

public:
    explicit myClass(QWidget *parent = 0);
    ~myClass();

    void setInnerMouseCallback(String windowName){ 
        setMouseCallback( windowName, mouseEvent , ui->listWidget ); /* error: invalid use of incomplete type 'struct Ui::myClass'*/
    }

private:
    Ui::myClass *ui;
} 
```

然后，我添加了一个带有以下代码的 functions.cpp 文件：

```
void mouseEvent(int evt, int x, int y, int flags, void* param){
    QListWidget * theList = (QListWidget*) param;
    if( evt == CV_EVENT_LBUTTONUP){

        theList->addItem("blah");
    }
} 
```

这个对吗？我在指出的地方遇到了几个错误。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:23:01.533

的第三个参数`setMouseCallback()`称为“用户数据”，其类型为`void*`。它旨在仅用于此类信息。您可以将`setMouseCallback()`函数调用移动到主窗口。然后你可以使用这样的函数：

```
setMouseCallback(windowName, mouseEvent, ui->listWidget); 
```

在鼠标事件回调函数中，您将有一个指向列表小部件的指针：

```
void mouseEvent(int evt, int x, int y, int flags, void* param)
{
    if( evt == CV_EVENT_LBUTTONUP)
    {
        QListWidget* listWidget = (QListWidget*)param;
        listWidget->addItem("blah");
    }
} 
```

# google-cloud-datastore - 我的过滤器查询有什么问题，以确定键是否是 list(db.key) 属性的成员？

> ID：15710420
> 
> 赞同：0
> 
> 时间：2013-03-29T19:47:28.040
> 
> 标签：google-cloud-datastore

我在从谷歌应用引擎数据存储中检索过滤列表时遇到问题（使用 python 作为服务器端）。我的数据实体定义如下

```
class Course_Table(db.Model):
    course_name = db.StringProperty(required=True, indexed=True)
    ....
    head_tags_1=db.ListProperty(db.Key) 
```

所以 head_tags_1 属性是一个键列表（它们是另一个名为 Headings_1 的实体的键）。

我在下面的处理程序中旋转我的 Course_Table 实体以过滤具有特定 Headings_1 键作为 head_tags_1 属性成员的课程。但是，当我知道那里有数据可以满足请求时，它似乎没有检索任何内容，因为当我返回迭代查询结果时它从不显示下面的日志（如下）。关于我做错了什么的任何想法？

```
def get(self,level_num,h_key):
path = []
if level_num == "1":
    q = Course_Table.all().filter("head_tags_1 =", h_key)

    for each in q:
    logging.info('going through courses with this heading name')
    logging.info("course name filtered is %s ", each.course_name) 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:17:59.743

~~我假设 h_key 是 headings_1 的键，因为 head_tags_1 是一个列表，我相信你需要的是 IN 运算符。[https://developers.google.com/appengine/docs/python/datastore/queries](https://developers.google.com/appengine/docs/python/datastore/queries)~~

注意：您在 for 循环中的缩进似乎不正确。

我对列表的错误显然是'='已经检查了会员资格。使用 = 检查成员资格对我有用，你能确定 h_key 真的是一个数据存储密钥类吗？

这是我的例子，第一个 get 产生结果，第二个不是

```
import webapp2 from google.appengine.ext import db

class Greeting(db.Model):
    author = db.StringProperty()
    x = db.ListProperty(db.Key)

class C(db.Model):  name = db.StringProperty()

class MainPage(webapp2.RequestHandler):
    def get(self):
        ckey = db.Key.from_path('C', 'abc')
        dkey = db.Key.from_path('C', 'def')
        ekey = db.Key.from_path('C', 'ghi')
        Greeting(author='xxx', x=[ckey, dkey]).put()
        x = Greeting.all().filter('x =',ckey).get()
        self.response.write(x and x.author or 'None')
        x = Greeting.all().filter('x =',ekey).get()
        self.response.write(x and x.author or 'None')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

# php - 尝试使用 SES 发送电子邮件时出现 AWS SDK Guzzle 错误

> ID：15710428
> 
> 赞同：-2
> 
> 时间：2013-03-29T19:48:09.307
> 
> 标签：php, amazon-ses

收到一个奇怪的错误，我不知道如何解决。这是错误：

```
( ! ) Catchable fatal error: Argument 2 passed to Guzzle\Service\Client::getCommand() must be an array, string given, called in phar://C:/wamp/www/PHPCodeLance/WebTech/Projects/MIB v2/lib/aws/aws.phar/vendor/guzzle/guzzle/src/Guzzle/Service/Client.php on line 93 and defined in phar://C:/wamp/www/PHPCodeLance/WebTech/Projects/MIB v2/lib/aws/aws.phar/vendor/guzzle/guzzle/src/Guzzle/Service/Client.php on line 113
Call Stack
#   Time    Memory  Function    Location
1   0.0009  676280  {main}( )   ..\test.php:0
2   0.0557  3311632 Aws\Ses\SesClient->send_email( )    ..\test.php:30
3   0.0557  3312128 Aws\Common\Client\AbstractClient->__call( ) ..\test.php:30
4   0.0557  3312208 Guzzle\Service\Client->__call( )    ..(null):103
5   0.0557  3312296 Guzzle\Service\Client->getCommand( )    ..(null):93 
```

这是我使用的代码（直接来自 AWS 页面）

```
$client = SesClient::factory(array(
    'key'    => '',
    'secret' => '',
    'region' => 'us-east-1'
));

$response = $client->send_email(
    'no-reply@amazon.com', // Source (aka From)
    array('ToAddresses' => array( // Destination (aka To)
        'myemail@hotmail.nl'
    )),
    array( // Message (short form)
        'Subject.Data' => 'Email Test ' . time(),
        'Body.Text.Data' => 'This is a simple test message ' . time()
    )
);

// Success?
var_dump($response->isOK()); 
```

更新！！！：

修复了上述问题，现在我遇到了 SSL 证书问题：

```
Guzzle\Http\Exception\CurlException: [curl] 60: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed [url] https://email.us-east-1.amazonaws.com/ in phar://C:/wamp/www/PHPCodeLance/WebTech/Projects/MIB v2/lib/aws/aws.phar/vendor/guzzle/guzzle/src/Guzzle/Http/Curl/CurlMulti.php on line 578 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T03:22:50.130

有关第一个（现在应该已解决 - 如何？）问题的答案，请参阅[使用 SES 发送电子邮件时出现 AWS SDK Guzzle 错误](https://stackoverflow.com/questions/19329748/aws-sdk-guzzle-error-when-sending-email-with-ses)

**请**，如果您对某个问题有解决方案，尤其是像这样神秘的问题，请将其发布以供其他人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T04:07:40.857

SSL 的问题是因为 CURL 不再捆绑 CA 证书，您需要设置正确的 CA 信息。

解决方案 1（更改 PHP.ini）：

1.  [从http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)下载 CA 包 (cacert.pem)
2.  将它放在您的本地系统上（例如：C:\xampp\cacert.pem）
3.  打开你的 php.ini
4.  将 curl.ca_info 选项设置为指向 cacert.pem 的位置

    ```
    Example: curl.ca_info="C:\xampp\cacert.pem" 
    ```

5.  重启阿帕奇

解决方案 2（在每次 CURL 调用之前设置选项）

1.  [从http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)下载 CA 包 (cacert.pem)
2.  将它放在您的本地系统上（例如：C:\xampp\cacert.pem）
3.  编写以下代码：

    ```
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, TRUE); 
    curl_setopt ($ch, CURLOPT_CAINFO, "pathto\cacert.pem"); 
    ```

来源：[http ://tumblr.wehavefaces.net/post/52114563111/environment-windows-xampp-curl-library](http://tumblr.wehavefaces.net/post/52114563111/environment-windows-xampp-curl-library)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:58:05.363

First of all, it seems that you should include this code for instantiating the client and sending the email within a try-catch block, that will certainly resolve the Catchable fatal error part and allow your code to continue executing.

As far as the getCommand parameter problem, my guess is that there is some issue with your arguments to `send_email()` that are passed down the call stack. Without digging through the SDK I don;t know off the top of my head what arguments are specifically passed to `getCommand`, but you have all the information you need there to debug the issue, as you should be able to map how your arguments are passed through each of the calls shown in the stack trace, debugging along the way to verify what is passed to each function is what is expected.

# microcontroller - 如何在 Microchip 的 C18 上使用更大的堆栈大小？

> ID：15710432
> 
> 赞同：2
> 
> 时间：2013-03-29T19:48:20.180
> 
> 标签：microcontroller, pic, microchip, stack-size, c18

好的，我一直在尝试自己解决这个问题很长时间，我只是放弃了。我已经搜索了整个网络，直到我无法忍受，我需要帮助！

我阅读了整个“C18 编译器用户指南”，它说 C18 支持使用大小大于 256 字节的堆栈。但是我做了他们要求的所有事情，更改了链接器脚本并使用了多库堆栈模型编译器选项（-ls），但在堆栈的第一个库被填充后，我仍然无法访问变量。

我调试了一个简单的代码，它简单地递归调用一个函数。这个函数有 5 个浮点参数和 5 个浮点局部变量，每次调用在堆栈中使用大约 42 个字节（5*4 用于参数 + 5*4 用于局部变量 + 2 个字节用于保存旧的 SFR2 值）。第 6 次调用后，堆栈值被覆盖。

在网上搜索时，我发现很多人就如何创建和使用大数组（大于 256 字节）给出了具体说明。其中一个步骤建议使用指针来访问数组的元素。我觉得我的问题与“使用指针访问不同银行中的变量”有关，但我不知道如何将局部变量全部更改为函数调用中的指针。这没有任何意义。

老实说，恐怕我只是在做一些非常愚蠢的事情（因为我找不到人讨论这个问题）。我发现所有与增加堆栈大小相关的主题都建议使用静态变量。我以这种方式解决了我的问题，但我仍然想知道 C18 如何支持更大的堆栈大小。

下面是我用来理解这个问题的测试代码。调试时，我注意到 FSR1 寄存器已正确更新，以指向下一个存储区中的下一个地址，下一个函数参数和变量应放置在该地址中。但是当局部变量被写入时，它们会进入栈顶（只有地址的低字节被认为将数据移动到栈中，即使当 MPLABX IDE 指示给变量的地址时，在调试模式下，是正确的）。因此，我很确定问题在于编译器生成的代码没有使用 16 位地址来使用堆栈。不过，我不知道如何解决它。

任何有关此主题的讨论将不胜感激:) 谢谢！

```
float testFunction1(float p1, float p2, float p3, float p4, float p5)
{
float v1, v2, v3, v4, v5;

v1 = p1 + p2;
v2 = p2 + p3;
v3 = p3 + p4;
v4 = p4 + p5;
v5 = p5 + p1;

v1 = testFunction1(v1, v2, v3, v4, v5);
}

void main()
{
float v1, v2, v3, v4, v5;

v1 = 0x11ABCDEF;
v2 = 0xAABBCCDD;
v3 = 0xABCABCAB;
v4 = 0xFFEEDDCC;
v5 = 0x11223344;

v1 = testFunction1(v1, v2, v3, v4, v5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:00:44.057

要启用多库堆栈代码模型，`Lmodel`请在 C18 编译器的命令行中使用 - 开关。

# mysql - 为什么需要“ORDER BY”才能从 MySQL 连接中获得正确的结果？

> ID：15710435
> 
> 赞同：1
> 
> 时间：2013-03-29T19:48:25.120
> 
> 标签：mysql, inner-join

我有以下查询：

```
SELECT t.ID, t.caseID, time
FROM tbl_test t
INNER JOIN (
    SELECT ID, MAX( TIME ) 
    FROM tbl_test
    WHERE TIME <=1353143351
    GROUP BY caseID 
    ORDER BY caseID DESC -- ERROR HERE!
) s
USING (ID) 
```

似乎只有`ORDER BY`在内部联接中使用时才能得到正确的结果。这是为什么？我正在使用 ID 进行连接，所以订单应该没有影响。如果我删除订单，我会从数据库中获得太旧的条目。ID 是主键，caseID 是一种具有多个不同时间戳的条目的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:09:44.730

这个查询是模棱两可的：

```
SELECT ID, MAX( TIME ) 
FROM tbl_test
WHERE TIME <=1353143351
GROUP BY caseID 
```

这是模棱两可的，因为它不保证它返回 MAX(TIME) 出现的行的 ID。它为 的每个不同值返回 MAX(TIME) `caseID`，但其他列的值（如 ID）是从组成员中任意选择的。

实际上，MySQL 会在按存储顺序扫描行时选择它在组中*首先找到的行。*

例子：

```
caseID  ID  time
  1     10  15:00
  1     12  18:00
  1     14  13:00 
```

最大时间为 18:00，即 ID 为 12 的行。但查询将返回 ID 10，因为它是组中的第一个。如果您要使用 ORDER BY 反转顺序，它将返回 ID 14。仍然不是找到最大时间的行，但它来自行组的另一端。

您的查询适用，`ORDER BY caseID DESC`因为巧合的是，您的时间值随着 ID 的增加而增加。

这种查询实际上是标准 SQL 和大多数其他品牌的 SQL 数据库中的错误。MySQL 允许这样做，相信您知道如何形成明确的查询。

修复方法是仅在选择列表中的列明确*时才*使用它们，也就是说，如果它们在 GROUP BY 子句中，则保证每个组只有一个不同的值：

```
SELECT caseID, MAX( TIME ) 
FROM tbl_test
WHERE TIME <=1353143351
GROUP BY caseID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:05:47.530

```
SELECT t.ID, t.caseID, time
FROM tbl_test t
INNER JOIN (
    SELECT caseID, MAX( TIME ) maxtime
    FROM tbl_test
    WHERE TIME <=1353143351
    GROUP BY caseID
) s
ON t.caseID = s.caseID and t.time = s.maxtime 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:08:45.417

您看到这个问题是因为您获得了每个 caseID 的 MAX(TIME)，但由于您是按 caseID 而不是 ID 分组，因此您获得的是任意 ID。发生这种情况是因为当您使用聚合函数（如 MAX）时，您必须为**选择中的每个非分组字段**指定要如何聚合它。这意味着，如果它在 SELECT 中而不在 GROUP BY 中，您必须告诉 MySQL 如何聚合。如果你不这样做，那么你会得到一个 RANDOM 行（好吧，本身不是*随机*的，但它不会按照你所期望的顺序排列）。

ORDER BY 为您工作的原因是，它会欺骗查询优化器在分组之前对结果进行排序，这恰好会产生您想要的结果，但请注意，情况并非总是如此。

您想要的是具有给定 caseID 的 MAX(TIME) 的 ID。这意味着您的 INNER 连接需要通过 caseID（而不是 ID）和时间（这将为您在外部表中的每 1 行提供 1 行）进行连接。

Barmar 在实际查询中击败了我，但这就是您想要的方式。

# android - 在android的Dialog中显示VideoView

> ID：15710437
> 
> 赞同：2
> 
> 时间：2013-03-29T19:48:31.980
> 
> 标签：android, dialog, android-videoview

我想`VideoView`在android中的Dialog中显示一个，但我无法控制它，`MediaController`因为视频似乎出现在后面，而且视频看起来更暗。？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:53:08.263

我建议您需要使用 an`Activity`而不是`Dialog`. 将您的主题设置为在清单`Activity`中模拟 a 。`Dialog`

**示例**- AndroidManifest.xml：

```
android:theme="@android:style/Theme.Dialog" 
```

然后，您将能够`VideoView`像示例中一样显示 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T13:54:21.383

使用：
`videoView.setZOrderOnTop(true);`
并且视频不会显得更暗。

# objective-c - 如何向 NSMutableArray 添加多个跳过 nil 对象的对象？

> ID：15710438
> 
> 赞同：1
> 
> 时间：2013-03-29T19:48:38.390
> 
> 标签：objective-c, nsarray

我需要一种方法，将一些对象（2-10）添加到我的数组中，跳过这些是 nils：

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
[arr addObjectsSkipNils:obj1, obj2, obj3]; 
```

如何以优雅的方式编写此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:59:36.470

此类别方法将起作用：

```
@interface NSMutableArray (MyAdditions)
- (void)addObjectsSkipNilsWithCount:(NSUInteger)count objects:(id)obj, ...;
@end

@implementation NSMutableArray (MyAdditions)

- (void)addObjectsSkipNilsWithCount:(NSUInteger)count objects:(id)obj, ...
{
    va_list ap;
    va_start(ap, obj);
    // First object:
    if (obj != nil)
        [self addObject:obj];
    // Remaining objects:
    for (NSUInteger i = 1; i < count; i++) {
        id myobj = va_arg(ap, id);
        if (myobj != nil)
            [self addObject:myobj];
    }
    va_end(ap);
}
@end 
```

例子：

```
NSMutableArray *a = [NSMutableArray array];
[a addObjectsSkipNilsWithCount:3 objects:@"foo", nil, @"bar"];
NSLog(@"%@", a);
// Output: ( foo, bar ) 
```

您必须明确指定对象的数量，因为`nil`不能用作变量参数列表的终止符。（如果计数大于提供的实际对象数量，则可能会发生坏事！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:54:12.033

您可以使用：

```
[yourMainArray removeObjectIdenticalTo:[NSNull null]]; 
```

现在，如果您想将其复制到`arr`您可以很容易地完成。

# sql - 比较 2 个项目，但使用找到的项目中的值

> ID：15710441
> 
> 赞同：0
> 
> 时间：2013-03-29T19:49:07.717
> 
> 标签：sql, ms-access, feed

在试图弄清楚如何编写 SQL 行以从项目中获取值时遇到一些问题。让我解释一下情况。我们有两个不同的数据库，一个是国内的，一个是进口的。它们是相同的项目，只是产品代码不同。不同之处只是国际项目最后有一个-h。所以例子..

```
12345   < domestic 
12345-h < import 
```

我们有一个将两者结合在一起的提要，但进口商品缺少 upc 代码，而国内商品有它们。所以我想做的是让它匹配两个产品代码并将 upc 添加到 -h 项目。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:21:17.227

您可以将两个表与

```
 INNER JOIN ON (concat(domestic.itemid, '-h') = international.itemid) 
```

您可能需要针对 Ms Access SQL 方言进行调整。我认为对于 concat，您可以使用 &，IIRC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:54:37.590

我认为你想要这样的结构：

```
select <fields that you want>
from ((select <list of fields from domestic>, itemid as lookupitem
       from domestic d
      ) union all
      (select <list of most fields from import>, replace(itemid, '-h', '') as lookupitem
       from import i
      )
     ) f left join
     lookup lu
     on f.lookupitemid = lu.itemid 
```

In other words, you can create the field of the right form in a subquery and then join it to the lookup table used to get UPC. I use "replace", on the assumption that some codes may not actually end with the "-h".

# html - CSS：不同 亲子背景和尺寸

> ID：15710443
> 
> 赞同：1
> 
> 时间：2013-03-29T19:49:12.370
> 
> 标签：html, css

```
<div class="menu3" >
 <ul class="cssMenu">   
  <li>
   <a href="#">Parent</a>       
    <ul class="cssMenuA">
        <li><a href="#"><span>Child1</a></span></li>
        <li><a href="#"><span>Child2</span></a></li>
        <li><a href="#"><span>Child3</span></a></li>
    </ul>
  </li>
 </ul>
</div>

.menu3 {
background: url(../images/menu3.png) no-repeat;
float:left;
width:134px;
height:50px;}

.menu3 a:hover {
background: url(../images/menu3-hover.png) no-repeat;
float:left;
width:134px;
height:50px;}

    ul.cssMenuA ul li { 
        float:left;
        background: #FFA900;
        width: 90px; 
        height:25px; 
        display: inline;            
    }

    ul.cssMenuA ul li a { 
        background: #FFA900;
        width: 90px; 
        height:25px;
        display: block;
        font-family: Arial, Times New Roman, Tahoma;
        font-size: 14px;
        color:#000000;
    } 

    ul.cssMenuA ul li a:hover{ 
        background: #FFA900;
        width: 90px; 
        height:25px; 
        display: inline;
        font-family: Arial, Times New Roman, Tahoma;
        font-size: 14px;
        color:#FFF;
    } 
```

我想让我的**父母** `ul/li`和**孩子** `ul/li`有不同但固定的尺寸。我已经为我的 Parent item 定义了一个背景图像`class="menu3"`，但我想要一个不同的非图像 Child1, 2 和 3 `class="cssMenuA"`。但是孩子们也使用图像作为父项。

*我希望你能理解我的问题，并希望能帮助我解决这个问题。先感谢您。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:03:33.827

只需从更改`.menu3 a:hover {}`为`.menu3 > li > a:hover`：

```
.menu3 > li > a:hover {
    background: url(../images/menu3-hover.png) no-repeat;
    float:left;
    width:134px;
    height:50px;
} 
```

使用此 CSS，您将搜索直接`<li>`子项，并在这些子项中搜索直接`<a>`子项（这意味着您不必关心子子项`<a>`）。

# r - 使用apply函数仅获取那些通过R中阈值的行

> ID：15710448
> 
> 赞同：0
> 
> 时间：2013-03-29T19:49:29.217
> 
> 标签：r, apply

我正在尝试对我的数据（以矩阵的形式）应用一个过滤器，比如 10 列，200 行。

我只想保留方差系数大于阈值的那些行。但是使用我拥有的代码，它似乎打印了通过阈值的行的方差系数。我希望它只测试它是否通过阈值，但在矩阵中打印原始数据点。

```
covar <- function(x) ( sd(x)/mean(x) )
evar <- apply(myMatrix,1,covar)
myMatrix_filt_var <-myMatrix[evar>2,] 
```

这里我设置的阈值是 2。

我究竟做错了什么 ？抱歉刚学R。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:51:20.467

如果`m`是你的矩阵，那么，

```
m[apply(m, 1, function(x) sd(x)/mean(x) > 2), ] 
```

应该给你过滤后的矩阵。这个想法是获得每行的变异系数*并检查它是否 > 2 inside*。这将返回一个逻辑向量，通过直接访问它`m[logical_vector, ]`，我们可以获得条件为 TRUE 的那些行。

`na.rm = TRUE`如果要在计算`sd`和时删除 NA 值，可以使用`mean`。

# mongodb - 如何在 mongoose 或 mongodb 中查询这个复杂的数组 arrtibue

> ID：15710457
> 
> 赞同：0
> 
> 时间：2013-03-29T19:50:28.673
> 
> 标签：mongodb, mongoose

现在我正在做一个公交车跟踪程序，其中我使用mongodb存储静态公交车时刻表，除了时刻表，我还可以接收实时公交车到达和离开事件，事件流包括到达/离开时间，当前站和下一站。然而，事件流并没有告诉我公交车号，这使得直接跟踪公交车变得很棘手。但是因为我知道巴士应该在什么时间和地点根据时刻表，我可以使用时刻表来诱导公共汽车号码并最终跟踪公共汽车。

我的 mongodb 数据库存储了公交车的时刻表，架构是 { busNumber:'019191', timeline:[{'station':'station 1', 'time': '9:20' },{'station':'station 2', '时间': '9:30' }, ...... ] }。

我的实时事件有到达/离开时间、当前站和下一站。

但问题是如何使用 mongodb 和 mongoose 查询数组，我当前的查询是查找该站的时间表，

```
Schedule.findOne({'timeline.station ': current_station}, function(err, sche) { 
```

然后一直循环，发现公共汽车恰好在那个时刻和地点

```
schedule.time.forEach(function(t) {
  if (t.time== currenttime && t.station == currentstation) {
    thing = t;
  }
}); 
```

我想肯定有办法只通过查询而不用丑陋的循环，所以我可以查询找到时间和地点等于当前情况的数组元素，而且下一个数组元素的站也等于next_station时间巴士事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T20:35:06.690

```
Schedule.findOne({ 'timeline.station': current_station, 'timeline.time' : current_time }, function(err, sche) { .... ); 
```

此外，为了处理前后时间的偏差，请围绕时间框架进行查询和设计。通过使用 $gt、$gte、$lt 和 $lte，您可以指定要查询的时间范围（对于千篇一律的解决方案，请考虑使用 Mongo 的 Date 类型）。[查询运算符](http://docs.mongodb.org/manual/reference/operator/query-comparison/)

# ios - UICollectionViewFlowLayout 的行和列

> ID：15710461
> 
> 赞同：0
> 
> 时间：2013-03-29T19:50:49.723
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

给定一个`UICollectionView`带有流的布局，计算集合视图的列数（垂直方向）或行数（水平方向）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:45:59.363

我的 hackish 方式（假设所有元素的大小相同）：

```
- (void) countRowsAndColumns
{
    NSArray *layouts = [collectionViewLayout layoutAttributesForElementsInRect:self.collectionView.bounds];
    NSMutableSet *columns = [NSMutableSet set];
    NSMutableSet *rows = [NSMutableSet set];
    for (UICollectionViewLayoutAttributes *layout in layouts)
    {
        if (layout.representedElementCategory != UICollectionElementCategoryCell) continue;
        CGFloat x = layout.frame.origin.x;
        [columns addObject:@(x)];
        CGFloat y = layout.frame.origin.y;
        [rows addObject:@(y)];
    }
    _columnCount = columns.count;
    _rowCount = rows.count;
} 
```

# c# - 等待多个 TcpClients 有可用的数据 - WaitHandle 或 Thread.Sleep？

> ID：15710469
> 
> 赞同：0
> 
> 时间：2013-03-29T19:51:12.583
> 
> 标签：c#, .net, tcpclient, waithandle

我正在编写一个服务器应用程序，它将接收来自多个 TCP 连接的数据。我们希望能够扩展到约 200 个连接。我为此编写的第一个算法如下：

```
while (keepListening)
{
    foreach (TcpClient client in clientList)
    {
        if (!client.Connected)
        {
            client.Close();
            deleteList.Add(client);
            continue;
        }

        int dataAvail = client.Available;
        if (dataAvail > 0)
        {
            NetworkStream netstr = client.GetStream();
            byte[] arry = new byte[dataAvail];
            netstr.Read(arry, 0, dataAvail);
            MemoryStream ms = new MemoryStream(arry);
            try
            {
                CommData data = dataDeserializer.Deserialize(ms) as CommData;
                beaconTable.BeaconReceived(data);
            }
            catch
            { }
        }
    }

    foreach (TcpClient clientToDelete in deleteList)
        clientList.Remove(clientToDelete);
    deleteList.Clear();

    while (connectionListener.Pending())
        clientList.Add(connectionListener.AcceptTcpClient());

    Thread.Sleep(20);
} 
```

这工作得很好，虽然我发现我必须添加 Thread.Sleep 来减慢循环，否则它会占用整个核心，无论有多少或几个连接。我被告知 Thread.Sleep 通常被认为是不好的，所以我寻找了一些替代方案。在与此类似的问题中，建议我使用 WaitHandles 来使用 BeginRead 和 BeginAccept，因此我编写了一个算法来使用它来做同样的事情，并想出了这个：

```
while (keepListening)
{
    int waitResult = WaitHandle.WaitAny(waitList.Select(t => t.AsyncHandle.AsyncWaitHandle).ToArray(), connectionTimeout);

    if (waitResult == WaitHandle.WaitTimeout)
        continue;

    WaitObject waitObject = waitList[waitResult];
    Type waitType = waitObject.WaitingObject.GetType();

    if (waitType == typeof(TcpListener))
    {
        TcpClient newClient = (waitObject.WaitingObject as TcpListener).EndAcceptTcpClient(waitObject.AsyncHandle);
        waitList.Remove(waitObject);

        byte[] newBuffer = new byte[bufferSize];
        waitList.Add(new WaitObject(newClient.GetStream().BeginRead(newBuffer, 0, bufferSize, null, null), newClient, newBuffer));

        if (waitList.Count < 64)
            waitList.Add(new WaitObject(connectionListener.BeginAcceptTcpClient(null, null), connectionListener, null));
        else
        {
            connectionListener.Stop();
            listening = false;
        }
    }
    else if (waitType == typeof(TcpClient))
    {
        TcpClient currentClient = waitObject.WaitingObject as TcpClient;
        int bytesRead = currentClient.GetStream().EndRead(waitObject.AsyncHandle);

        if (bytesRead > 0)
        {
            MemoryStream ms = new MemoryStream(waitObject.DataBuffer, 0, bytesRead);
            try
            {
                CommData data = dataDeserializer.Deserialize(ms) as CommData;
                beaconTable.BeaconReceived(data);
            }
            catch
            { }
            byte[] newBuffer = new byte[bufferSize];
            waitList.Add(new WaitObject(currentClient.GetStream().BeginRead(newBuffer, 0, bufferSize, null, null), currentClient, newBuffer));
        }
        else
        {
            currentClient.Close();
        }

        waitList.Remove(waitObject);

        if (!listening && waitList.Count < 64)
        {
            listening = true;
            connectionListener.Start();
            waitList.Add(new WaitObject(connectionListener.BeginAcceptTcpClient(null, null), connectionListener, null));
        }
    }
    else
        throw new ApplicationException("An unknown type ended up in the wait list somehow: " + waitType.ToString());
} 
```

这也很好，直到我打到 64 个客户。我写了一个限制，不接受超过 64 个客户端，因为这是 WaitAny 将接受的最大 WaitHandles 数量。我看不到任何绕过这个限制的好办法，所以我基本上不能像这样维持超过 64 个连接。Thread.Sleep 算法适用于 100 多个连接。

我也不太喜欢预先分配任意大小的接收数组，而不是在接收到数据后以接收到的数据的确切大小进行分配。而且我无论如何都必须给 WaitAny 一个超时，否则它会阻止运行它的线程在我关闭应用程序时加入（如果没有连接）。而且它通常更长，更复杂。

那么为什么 Thread.Sleep 是更糟糕的解决方案呢？有什么方法至少可以让 WaitAny 版本处理超过 64 个连接？是否有一些我没有看到的完全不同的处理方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:00:13.830

Jim 给出了使用异步回调而不是 WaitHandles 的明显建议。我最初认为这太复杂了，但是当我意识到我可以在状态对象中传递对调用 TcpListener 或 TcpClient 的引用时，它变得简单多了。有了这些以及对线程安全的一些更改，它就可以开始了。它可以通过 100 多个连接进行测试，并且干净地退出没有问题。不过，我仍然想要一个替代方案，不必预先分配数据缓冲区。这是任何尝试类似事情的人的代码：

```
public class NetworkReceiver : IDisposable
{
    private IReceiver beaconTable;
    private XmlSerializer dataDeserializer;
    private HashSet<TcpClient> ClientTable;
    private TcpListener connectionListener;
    private int bufferSize = 1000;

    public NetworkReceiver(IReceiver inputTable)
    {
        beaconTable = inputTable;
        dataDeserializer = new XmlSerializer(typeof(CommData));

        ClientTable = new HashSet<TcpClient>();
        connectionListener = new TcpListener(IPAddress.Any, SharedData.connectionPort);
        connectionListener.Start();
        connectionListener.BeginAcceptTcpClient(ListenerCallback, connectionListener);
    }

    private void ListenerCallback(IAsyncResult callbackResult)
    {
        TcpListener listener = callbackResult.AsyncState as TcpListener;
        TcpClient client;

        try
        {
            client = listener.EndAcceptTcpClient(callbackResult);

            lock (ClientTable)
                ClientTable.Add(client);

            ClientObject clientObj = new ClientObject() { AsyncClient = client, Buffer = new byte[bufferSize] };
            client.GetStream().BeginRead(clientObj.Buffer, 0, bufferSize, ClientReadCallback, clientObj);

            listener.BeginAcceptTcpClient(ListenerCallback, listener);
        }
        catch (ObjectDisposedException)
        {
            return;
        }
    }

    private void ClientReadCallback(IAsyncResult callbackResult)
    {
        ClientObject clientObj = callbackResult.AsyncState as ClientObject;
        TcpClient client = clientObj.AsyncClient;

        if (!client.Connected)
            return;

        try
        {
            int bytesRead = client.GetStream().EndRead(callbackResult);
            if (bytesRead > 0)
            {
                MemoryStream ms = new MemoryStream(clientObj.Buffer, 0, bytesRead);
                try
                {
                    CommData data;
                    lock (dataDeserializer)
                        data = dataDeserializer.Deserialize(ms) as CommData;
                    lock (beaconTable)
                        beaconTable.BeaconReceived(data);
                }
                catch
                { }

                client.GetStream().BeginRead(clientObj.Buffer, 0, bufferSize, ClientReadCallback, clientObj);
            }
            else
            {
                client.Close();
                lock (ClientTable)
                    ClientTable.Remove(client);
            }
        }
        catch (Exception ex)
        {
            if (ex.GetType() == typeof(ObjectDisposedException) || ex.GetType() == typeof(InvalidOperationException))
                return;
            else
                throw;
        }
    }

    class ClientObject
    {
        public TcpClient AsyncClient;
        public byte[] Buffer;
    }

    public void Dispose()
    {
        connectionListener.Stop();
        foreach (TcpClient client in ClientTable)
            client.Close();
    }
} 
```

# ios - 如何在 Objective-C 中自定义类的 init 方法中与委托进行通信

> ID：15710471
> 
> 赞同：0
> 
> 时间：2013-03-29T19:51:16.827
> 
> 标签：ios, objective-c

我花了很多时间来更好地理解 Objective-C 中的委托。我让它适用于大多数情况，但在特定情况下存在问题，我觉得很难理解。让我解释一下我想要做什么：

我有一个名为 的自定义视图`GridLayoutView`，它是`UIView`. 我还有一个视图控制器`SomeViewController`，它是`GridLayoutView`.

我有一个自定义`initWithFrame`方法，我有条件地调用另一个初始化方法`baseInit`。该方法有时会调用委托方法。以下是一些代码`GridLayoutView`：

```
//
// Delegator
// GridLayoutView.m
//

@implementation GridLayoutView

- (id)initWithFrame:(CGRect)frame 
       numberOfRows:(NSUInteger)rows
       numberOfCols:(NSUInteger)cols
{
    self = [super initWithFrame:frame];
    if (self) {
        self.numberOfRows = rows;
        self.numberOfCols = cols;
        self.numberOfCells = rows * cols;

        if (self.numberOfCells > 0) [self baseInit];
    }
    return self;
}

- (void)baseInit
{
    // do some more initialization stuff here
    // ...

    // then call a delegate method
    [self.delegate someMethod:someObj];

    // However, this method is not called because self.delegate is nil
} 
```

和一些代码`SomeViewController`：

```
//
// Delegate
// SomeViewController.m
//

@implementation SomeViewController

// ...

    // in some method
    self.gridLayoutView = [[GridLayoutView alloc] initWithFrame:gridLayoutFrame
                                                   numberOfRows:rowsCount
                                                   numberOfCols:colsCount];
    self.gridLayoutView.delegate = self;

// ... 
```

委托方法永远不会在 内部被调用`baseInit`，因为委托是`nil`在那个时候，它在方法完成`initWithFrame`之后被设置。`baseInit`我已经证实了这一点。

我感觉我的委派工作流程有问题。我有一个解决方案，但我认为这不是最好的方法。解决方案基本上是`SomeViewController`通过修改方法将实例传递给委托人，`initWithFrame`例如：

```
- (id)initWithFrame:(CGRect)frame 
       numberOfRows:(NSUInteger)rows
       numberOfCols:(NSUInteger)cols
           delegate:(id<GridLayoutViewDelegate>)aDelegate 
```

这种方法有效，但由于传递`SomeViewController`到`GridLayoutView`它的`initWithRect`. 我想知道这是否是与代表团合作的好方法还是有更好的方法？如果有人能为我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:58:54.437

如果我的理解正确，这里没有太多选择。

1.  修改您的初始化程序（如您所建议的那样）以传入委托。没什么不好的，不知道为什么不喜欢。

2.  在初始化期间删除对委托的依赖，而是在通过覆盖 setter 设置委托属性时发送任何合适的委托消息：

```
- (void)setDelegate:(id<GridLayoutViewDelegate>)aDelegate
{
    _delegate = aDelegate;
    // send whatever message makes sense to the delegate
    [_delegate someMethod:object];
} 
```

**编辑 - 注意到你的评论**

您的初始化方法不应花费任何大量时间。目前尚不清楚“加载视图”是什么意思。如果您只是指创建子视图并将其添加到视图中，那么这很快，并且不需要将进度传达给委托（无论如何您都不能这样做 b/c 初始化在主线程上，而 UI 不会更新直到所有初始化完成）。

If you mean loading data that takes a long time, you should disconnect that from initialization and load the data in a background operation, sending progress messages to a delegate.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:02:33.673

i would implement the setDelegate function and then call [self someMethod:someObj]; from there

# jquery - jQuery fadeIn 在 Firefox 上不起作用

> ID：15710472
> 
> 赞同：1
> 
> 时间：2013-03-29T19:51:19.863
> 
> 标签：jquery, css

我将`body`标签设置为`display:none`，并且在 document.ready 中设置为`$('body').fadeIn(1000);`。它可以在 Chrome 上运行，但在 FF 上页面仍然存在`display:none`。

我的网站在[这里](http://huddersfieldwebsitedesigner.co.uk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:00:41.390

如果你想淡入你的身体，使用 CSS：

```
@-webkit-keyframes fadeIn {    
    0% { opacity:0; }
    100% { opacity:1; }
}

@-moz-keyframes fadeIn {    
    0% { opacity:0; }
    100% { opacity:1; }
}

@-o-keyframes fadeIn {    
    0% { opacity:0; }
    100% { opacity:1; }
}

@keyframes fadeIn {    
    0% { opacity:0; }
    100% { opacity:1; }
} 
```

然后在你的身体 CSS 上：

```
body {
    -webkit-animation: fadeIn 1s linear 1; /* Safari & Chrome */
    -moz-animation: fadeIn 1s linear 1; /* Firefox */
    -o-animation: fadeIn 1s linear 1;  /* Opera */
    animation: fadeIn 1s linear 1;
} 
```

这将处理除 IE9 之外的所有内容，速度会更快，并且不会让禁用 Javascript 的人感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:55:46.287

您`display:none`同时拥有styles.css 和内联。

尝试从 styles.css 文件中删除它，因为它已经被声明为内联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:58:01.410

正如已经删除评论的人所说，这是在尸体上的事实。我在正文中添加了一个 div 并在其上应用了样式和 jquery，它工作正常。

# c# - 从数据库返回数据的通用类型

> ID：15710481
> 
> 赞同：0
> 
> 时间：2013-03-29T19:52:20.033
> 
> 标签：c#, database, design-patterns

我想写一个函数，它应该将 SQL 查询作为参数并给出数据作为结果。所以，我希望这个函数能给出通用的结构。可能是最好的返回方式`DataTable`还是`SqlDataReader`？
然后从它们中提取数据并将其放入具有特殊类型（不同类别的模型）的对象中？

可能存在一些模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:56:10.547

您可以将值直接返回给对象。但是您仍然需要最终将它们映射到某些东西。

通常对于这种“通用”用途，我看到所有内容都作为字符串传输。JSON如何在任何地方都被序列化为某种字符串，直到它最终在某处用作其他东西。

无论您使用 DataTable 还是其他东西，这都无关紧要，因为它最终将完全取决于您如何将这些数据变成有用的东西。

如果您想了解有关该方法的更多信息，可以查看http://en.wikipedia.org/wiki/NoSQL[页面。](http://en.wikipedia.org/wiki/NoSQL)

今年早些时候，Martin Fowler 做了一个关于无模式和 NoSql 的演讲，您可能会觉得很有趣。 [http://www.youtube.com/watch?v=8kotnF6hfd8](http://www.youtube.com/watch?v=8kotnF6hfd8)

不过，我会在这里回应其他一些答案，并且很可能主张不要做一些“通用”或“通用”的事情。只需预先进行一些工作，以使系统符合您绝对想做的事情并根据需要进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:57:38.500

It sounds like you're just starting out. You may want to consider an ORM like Entity Framework Code First or NHibernate, or a MicroORM of which there are too many to list, rather than just running bare SQL against a db.

I find EF Code First to be great for beginners.

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

ORMs let you define classes that map to the tables in your database, and ask for lists of those objects explicitly (solving the problem of what to return).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:58:34.103

You could use c# [dynamic](http://msdn.microsoft.com/en-us/library/dd264736.aspx) as return type. I would recommend [Dapper](https://code.google.com/p/dapper-dot-net/) as ORM, it is fast and easy to use, and it has the functionality to return dynamics from an query, see the section:'Execute a query and map it to a list of dynamic objects'.

# ios - 在添加到主页的 Mobile XPage 中保留登录凭据

> ID：15710483
> 
> 赞同：2
> 
> 时间：2013-03-29T19:52:27.890
> 
> 标签：ios, xpages, xpages-extlib

我有一个使用 XPages 的移动控件构建的应用程序。在 ipHone 上，应用程序的行为与我在标准 Safari 浏览器中的行为一样。当我获取 url 并将其作为图标添加到主页并从那里使用应用程序时，每当我执行的操作调用本机应用程序（地图、联系人、电话、附件查看器等）时，当我切换回我的应用程序时我立即被要求再次输入我的用户名和密码。有没有办法像标准 Safari 应用程序一样控制行为以不丢失登录凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:10:35.390

这是 iOS 中的限制。如果您将它保存到主页，它可以工作，但它不会多任务。那就是问题所在。所以它不记得你在哪里或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T17:30:30.127

正如大卫所说，当您切换回来时，它会重新开始......问题不仅在于凭据 - 它还在于您可能输入的所有信息或您在“应用程序”中导航到的位置。

这就是为什么我要改用另一种方法。我开始将应用程序编写为在本地运行的 Web 应用程序（即缓存资源并在 JS 文件、CSS 和图像的缓存版本上运行）。然后我实现了一个本地存储，您可以在其中跟踪您在应用程序中的位置 - 并再次返回该位置。这样您就*不需要*验证来运行应用程序 - 仅用于将信息与服务器同步。我的方法是在本地保存数据并将它们同步到服务器（作为一种复制）。这显然提供了更多的工作 - 但它也提供了更好的用户体验，因为您可以在不连接的情况下运行“应用程序”。

我尝试使用 cache.manifest 文件在本地控制缓存。这是可以做到的，但是，这是一种痛苦。因此，我现在正在使用 Sencha Touch，它确实可以很好地做到这一点。

/约翰

PS。我认为您可以使用 XPage Dojo 登录自定义控件来处理登录问题（[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Xpages%20Dojo%20Login% 20Custom%20Control](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Xpages%20Dojo%20Login%20Custom%20Control) ) - 但是，它不能解决重新加载页面的问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T20:54:26.713

看来这里成功的秘诀不是告诉 Safari XPage 能够充当移动 Web 应用程序。在 XPage 中添加以下代码以确保是这种情况。

```
<xp:metaData
  name="apple-mobile-web-app-capable"
    content="no">
</xp:metaData> 
```

注意：您仍然可以为主屏幕提供一个图标，只是该图标现在更像是带有 Safari 控件的书签，并且（更重要的是）您可以在应用程序之间切换，当您返回 Safari 时，它将显示您的 Xpages 应用程序就像你离开它一样。

# syntax - 有限状态机的 IF-ELSE 块中的 VHDL 语法错误

> ID：15710494
> 
> 赞同：0
> 
> 时间：2013-03-29T19:53:08.653
> 
> 标签：syntax, vhdl

```
IF (((SW(17) = '0') OR ((SW(17) = '1') AND (SW(16) = '0'))) OR ((SW(17) = 1) AND (SW(16) = 0) AND (SW(14) = 1)) AND (tempCounter = 1)) THEN
           next_state <= STATE1;
           resetTempCounter <= '1';
        ELSE
           next_state <= STATE0;
        END IF; 
```

上面的代码会引发语法错误。我检查了括号，我认为这不是问题。我最初打破了排长队，并认为这是问题所在，但事实并非如此。我还应该通知您，代码在流程语句中，这不是问题所在。

**错误**：

错误 (10500)：Lab4b.vhd(241) 靠近文本“AND”的 VHDL 语法错误；期待“）”或“，”

错误 (10500)：Lab4b.vhd(244) 靠近文本“ELSE”的 VHDL 语法错误；期待“end”，或“(”，或标识符（“else”是保留关键字），或顺序语句

我对 VHDL 编程相当陌生，所以请多多包涵，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:47:41.160

假设它`SW`被声明为 a`bit_vector`或 an `STD_LOGIC_VECTOR`，你的比较运算符就搞错了：记住`bit`和`STD_LOGIC`都是真正的枚举类型，由模仿“真实”的值组成，而不是整数（在这种情况下`0`，and`1`将是一个有效的选择） .

因此，在这种情况下，您需要做的就是在 and 周围添加撇号`0`。`1`检查这是否有效（也假设这`tempCounter`是一个`STD_LOGIC`或`bit`类型的信号）：

```
(((SW(17) = '0') OR ((SW(17) = '1') AND (SW(16) = '0'))) OR ((SW(17) = '1') AND (SW(16) = '0') AND (SW(14) = '1')) AND (tempCounter = '1')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:31:45.820

让我以不同的方式写你的陈述来说明问题：

```
A = ((SW(17) = '0') OR ((SW(17) = '1') AND (SW(16) = '0')))
B = ((SW(17) = '1') AND (SW(16) = '0') AND (SW(14) = '1'))
C = (tempCounter = '1') 
```

你现在有：

```
if A or B and C then
   ... 
```

这个**问题可以**通过写来解决，例如：

```
if (A or B) and C then
   ... 
```

或者

```
if A or (B and C) then
   ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:04:16.967

重新格式化线路，问题更容易发现......

```
IF (((SW(17) = '0') OR ((SW(17) = '1') AND (SW(16) = '0'))) 
 OR ((SW(17) = 1) AND (SW(16) = 0) AND (SW(14) = 1))
 AND (tempCounter = 1)) THEN 
```

In one place, `SW(17) = '0'` - this is a std_logic or bit value. correct.
In another, `SW(17) = 1` - this is an integer, ... not so much.

I believe that too many brackets deducts from clarity, I would reduce

```
(((SW(17) = '0') OR ((SW(17) = '1') AND (SW(16) = '0'))) 
 ... ) 
```

to

```
((SW(17) = '0' OR (SW(17) = '1' AND SW(16) = '0')) 
 ... ) 
```

to reduce confusion a little. Who knows, with a bit less clutter you might have spotted the simple typos yourself?

# opencv - 如何训练 HOG 并使用我的 HOGDescriptor？

> ID：15710498
> 
> 赞同：9
> 
> 时间：2013-03-29T19:53:21.507
> 
> 标签：opencv, histogram, feature-descriptor

我想训练数据并使用 HOG 算法来检测行人。现在我可以用`defaultHog.setSVMDetector(HOGDescriptor::getDefaultPeopleDetector());`in`opencv`来检测了，但是对我的测试视频效果不是很好。所以我想使用我的数据库进行培训。

我准备了 1000+ 个正样本和 1000+ 个负样本。它们被裁剪为 50 * 100 的大小，我已经做了列表文件。

而且我在互联网上阅读了一些教程，它们都很复杂，有时甚至很深奥。其中大部分是分析HOG的源代码和算法。但是只有更少的例子和简单的anylize。

`libsvm\windows\svm-train.exe`一些可以用来训练的指令显示，任何人都可以根据1000+ 50 * 100个正样本给出一个例子吗？
例如，like `haartraing`，我们可以从`opencv`, like`haartraining.exe –a –b`使用一些参数，并得到一个`*.xml`用于人员检测的结果？

或者有没有其他方法来训练和检测？

我更喜欢知道如何使用它和详细的程序。作为细节算法，它对我来说并不重要。我只想实现它。

如果有人知道，请给我一些提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T17:51:55.483

我提供了一些示例代码和说明来开始使用 openCV 训练您自己的 HOG 描述符：请参阅[https://github.com/DaHoC/trainHOG/wiki/trainHOG-Tutorial](https://github.com/DaHoC/trainHOG/wiki/trainHOG-Tutorial)。

简而言之，该算法确实太复杂，无法提供，但基本思想是：

1.  从相同大小和类型的负样本图像和正样本图像中提取 HOG 特征。
2.  使用提取的特征向量及其各自的类来训练 SVM 分类器，在此步骤中，您可以将 svm-train.exe 与包含特征向量及其类的正确格式的生成文件一起使用（或直接包含并解决源中的 libsvm 库类）。
3.  将生成的 SVM 模型和支持向量计算为可与 openCV 检测器一起使用的单个描述符向量。

此致

# c++ - c++：检查两个三角形是否相交

> ID：15710505
> 
> 赞同：3
> 
> 时间：2013-03-29T19:54:03.447
> 
> 标签：c++, computational-geometry, intersection

问题 ：

给定两个三角形的顶点，检查它们是否有任何共同的内点。边或顶点上的任何点都不会被认为是三角形的内部。
我认为这是找出两个三角形是否相交的问题。

我的想法是：

```
1\. Make three line segments for each of the two triangles
2\. For each pair of line segment (A,B) (where A is in triangle #1 and B is in Triangle #2) check whether they intersect or not.
3\. If any pair of segments intersect, then the two triangles have a interior point. Otherwise not . 
```

我的代码：

```
#include <algorithm>
#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <cmath>

#define READ freopen("in.txt","r",stdin)
#define ui64 unsigned long long int
#define i64 long long int

using namespace std;

class Point{
public:
    i64 x, y;
    Point() : x(0), y(0) {}
    Point(int a, i64 b) : x(a), y(b) {}
};

class Segment{
public:
    Point a, b;
    Segment() : a(0,0), b(0,0) {}
    Segment(Point e, Point r) : a(e), b(r) {}
    Segment(const Segment &s){
        a = s.a;
        b = s.b;
    }
    i64 Direction(const Point &p){
        return (p.x - a.x) * (b.y - a.y) - (b.x - a.x) * (p.y - a.y);
    }
    inline bool inside(int a,int b,int c){
        return a<=c && c<=b;
    }
    bool onSegment(const Point &p){
        return inside(min(a.x,b.x), max(a.x,b.x), p.x) && inside(min(a.y,b.y), max(a.y,b.y), p.y);
    }
    bool Intersect(Segment &s){
        int d1 = this->Direction(s.a);
        int d2 = this->Direction(s.b);

        int d3 = s.Direction(a);
        int d4 = s.Direction(b);

        if(((d1>0 && d2<0) || (d1<0 && d2>0)) && ((d3>0 && d4<0) || (d3<0 && d4>0))) return true;

        //check if the two segments just touch each other but don't cross  
        //i ignored this because as the problem said ...  
        //No points on the edges or vertices are considered interior to a triangle.
        /*if(!d1 && this->onSegment(s.a)) return true;
        if(!d2 && this->onSegment(s.b)) return true;
        if(!d3 && s.onSegment(a)) return true;
        if(!d4 && s.onSegment(b)) return true;*/
        return false;
    }
};

Point p1[3], p2[3];
Segment s1[3], s2[3];

bool check()
{
    for(int i=0;i<3;i++)
        for(int j=0;j<3;j++)
            if(s1[i].Intersect(s2[j]))
                return true;
    return false;
}

int main()
{
    //READ;

    int t, ts=0;

    scanf("%d",&t);//number of test cases
    while(t--){
        //points for first triangle
        for(int i=0;i<3;i++){
            scanf("%lld %lld",&p1[i].x, &p1[i].y);
        }
        //points for second triangle
        for(int i=0;i<3;i++){
            scanf("%lld %lld",&p2[i].x, &p2[i].y);
        }
        for(int i=0;i<3;i++){
            s1[i] = Segment(p1[i], p1[(i+1)%3]);
            s2[i] = Segment(p2[i], p2[(i+1)%3]);
        }
        printf("pair %d: %s\n",++ts, check() ? "yes" : "no");
    }

    return 0;
} 
```

但是对于这个输入..

```
1

0 0 5 0 2 4
4 0 5 0 -4 16 
```

我的程序给出了输出

```
no 
```

但正确的答案是

```
yes 
```

我的程序在很多情况下都不起作用。
我检查了我的 Segment 类是否有其他程序，它运行良好。
但在这方面，我找不到错误。
请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:16:54.593

我认为该行存在错误

`if(((d1>0 && d2<0) || (d1<0 && d2>0)) && ((d3>0 && d4<0) || (d3<0 && d4>0))) return true;`

如果我理解正确，Direction 函数会告诉你一个点是在代表你的线段的向量的左边还是右边。上面的陈述假设您的其他线段的两个点都在左侧或右侧，但没有考虑例如线段 B 的一个点位于例如线段 A 上但另一个点不在的情况。

所以我会改变它，例如，不是严格大于（`>`），而是检查大于或等于（`>=`）。

这可以解释您的示例的问题。在您的示例中，恰好点 (4,0) 位于段 (0,0),(5,0) 上，而点 (2,4) 位于段 (-4,16),( 4,0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:49:19.410

如果矩形的数量多于两个，则应考虑通过线扫解决此问题。如果它只是两个矩形，你可以做一些检查，如果它们有共同的内部点，你可以得到答案。

观察结果是三角形的线段相交，或者一个矩形完全包含在另一个矩形中。如果线条相交或矩形是否包含点，我们将其分解为几个检查。

如果它们相交，则可以通过适当的线段的成对比较来检查第一个条件。第二个条件可以通过测试任何段的端点是否包含在另一个矩形中来检查。不是一个漂亮的解决方案，但易于编码。

# batch-file - 使用 BAT 进程将信息添加到文件的开头，但保持文件名约定

> ID：15710509
> 
> 赞同：0
> 
> 时间：2013-03-29T19:54:19.503
> 
> 标签：batch-file, batch-processing

我是 Stackoverflow 的新手，所以我希望我把它发布在正确的区域。很长一段时间以来，我一直在寻找我的问题的答案。我正在尝试将一些信息添加到文件的开头。需要信息的文件有一个动态文件名（从不一样，除了前 5 个字符）。您可以在我的代码中看到我在文件中需要的信息。文件原文件名为LBL043629201313114512.DTA。关于文件名的组成是“LB04xxxx。XXXX 是我正在搜索的内容，以确保我获取正确的文件。

我需要输出为原始文件名（LBL......DTA），并在文件开头包含收集的数据。任何帮助都会很棒。

```
set /p STORE=Please enter store number:
set /p NAME=Please enter name:
set /p ADDRESS=Please enter address:
set /p CITY=Please enter address:
set /p STATE=Please enter State:
set /p ZIP=Please enter ZIP:
set /p SPECIAL=Add any Special Instructions:
(
    echo %NAME%
    echo %ADDRESS% 
    echo %CITY% %STATE% %ZIP%
    echo %SPECIAL%
) > address.txt
copy address.txt+LBL04%STORE%*.DTA=test.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:24:48.830

```
@ECHO OFF
SETLOCAL
FOR %%i IN (store name address 
            city state zip 
        special target) DO (SET %%i=)
set /p STORE=Please enter store number:
set /p NAME=Please enter name:
set /p ADDRESS=Please enter address:
set /p CITY=Please enter address:
set /p STATE=Please enter State:
set /p ZIP=Please enter ZIP:
set /p SPECIAL=Add any Special Instructions:
FOR %%i IN (store name address 
            city state zip 
        special) DO IF NOT DEFINED %%i (SET %%i= )
(
    ECHO.%NAME%
    ECHO.%ADDRESS% 
    ECHO.%CITY% %STATE% %ZIP%
    ECHO.%SPECIAL%
) > address.txt
FOR /f %%i IN (
  'dir /b /a-d /o-d lbl04%store%*.dta'
  ) DO IF NOT DEFINED target SET target=%%i
IF NOT DEFINED target ECHO LBL04%STORE%*.DTA NOT found&GOTO :EOF
copy address.txt+%target%=test.txt >nul
MOVE test.txt %target% >nul

type %target% 
```

显然，您应该首先针对真实数据的副本而不是实时数据尝试此操作。

第一个`FOR`确保列表中的变量名称从环境中删除，以便如果它们具有现有值然后`enter`在任何提示处按下，该值将被保留。

第二个`FOR`循环确保每个输入的变量都有一个值。请注意，`target`不包含在此组中。`=`和之间有一个空格`)`。

通过简单的`SET`指令，空格很重要。语法`(SET var=)`或等效方法`SET "var="`确保变量`var`设置为 [nothing]。问题`SET var=`是一些编辑器在行上留下终端空间，在这种情况下，`var`将被设置为那些终端空间——而且它们有点难以看到。此外，`SET var =...`将设置变量“ `var`”而不是变量“ `var`”——但那是另一个故事。

请注意，这些`ECHO`语句现在在 . 之后直接有一个点`ECHO`。该语句`ECHO`或`ECHO`将导致`ECHO`报告其状态，`ECHO is off`并将出现在输出中。添加“ `.`”`ECHO`可以让人咀嚼，它会产生超出`.`

下一条语句中的指令以基本形式（仅文件名）`dir`生成目录列表，并且不以逆日期顺序生成目录名称。这是一种逐行读取指令输出的机制。下一行“输入”读取的内容应用于每次迭代。因此，遇到的第一个文件名匹配将被 SET 到，并且由于现在已设置，因此任何进一步的行都将因为门而被忽略。`/b``/a-d``/o-d``FOR /f``dir /b ...``%%i``LBL04%STORE%*.DTA``target``target``if not defined`

如果没有匹配的文件，则`target`不会被定义（它在第一个`for`循环中被删除），因此可能会产生错误消息。

否则，将文件连接到`test.txt`然后`move`语句实际上`replaces`是文件“ `%target%`（我们知道存在）与连接的版本。

最后两行中的`>nul`每一行都抑制消息“复制/移动了 1 个文件”

任务完成！新文件`TYPED`作为证据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:13:05.907

只需在末尾添加两行：

```
del /q LBL04%STORE%*.DTA 
ren test.txt LBL04%STORE%*.DTA 
```

请确保，您不再需要原始 .DTA（更好的是，只要您测试脚本就进行备份

# python - Python 3 字节格式

> ID：15710515
> 
> 赞同：70
> 
> 时间：2013-03-29T19:54:47.167
> 
> 标签：python, python-3.x, string-formatting

在 Python 3 中，可以格式化如下字符串：

```
"{0}, {1}, {2}".format(1, 2, 3) 
```

但是如何格式化字节？

```
b"{0}, {1}, {2}".format(1, 2, 3) 
```

提高`AttributeError: 'bytes' object has no attribute 'format'`。

如果没有`format`字节的方法，如何对字节进行格式化或“重写”？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-03-28T00:06:29.500

从 Python 3.5 开始，`%`格式化也适用于`bytes`！

这是Ethan Furman 撰写的[PEP 461的一部分：](https://mail.python.org/pipermail/python-dev/2014-March/133620.html)

```
PEP: 461
Title: Adding % formatting to bytes and bytearray
Version: $Revision$
Last-Modified: $Date$
Author: Ethan Furman <ethan at stoneleaf.us>
Status: Draft
Type: Standards Track
Content-Type: text/x-rst
Created: 2014-01-13
Python-Version: 3.5
Post-History: 2014-01-14, 2014-01-15, 2014-01-17, 2014-02-22, 2014-03-25,
               2014-03-27
Resolution:

Abstract
========

This PEP proposes adding % formatting operations similar to Python 2's ``str``
type to ``bytes`` and ``bytearray`` [1]_ [2]_.

Rationale
=========

While interpolation is usually thought of as a string operation, there are
cases where interpolation on ``bytes`` or ``bytearrays`` make sense, and the
work needed to make up for this missing functionality detracts from the overall
readability of the code.

Motivation
==========

With Python 3 and the split between ``str`` and ``bytes``, one small but
important area of programming became slightly more difficult, and much more
painful -- wire format protocols [3]_.

This area of programming is characterized by a mixture of binary data and
ASCII compatible segments of text (aka ASCII-encoded text).  Bringing back a
restricted %-interpolation for ``bytes`` and ``bytearray`` will aid both in
writing new wire format code, and in porting Python 2 wire format code.

Common use-cases include ``dbf`` and ``pdf`` file formats, ``email``
formats, and ``FTP`` and ``HTTP`` communications, among many others. 
```

PEP 461 于[2014 年 3 月 27 日被 Guido van Rossum 接受](https://mail.python.org/pipermail/python-dev/2014-March/133621.html)：

> 公认。恭喜你组织了另一个颇有争议的讨论，并忍受了我最后一分钟的呆板！

由此，我们显然可以得出结论，`%`不再计划弃用（正如 Python 3.1 所宣布的那样）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-09T13:20:18.443

另一种方法是：

```
"{0}, {1}, {2}".format(1, 2, 3).encode() 
```

在 IPython 1.1.0 和 Python 3.2.3 上测试

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-29T20:05:28.550

有趣的是`.format()`，似乎不支持字节序列；正如你所展示的。

您可以`.join()`按照此处的建议使用：http: [//bugs.python.org/issue3982](http://bugs.python.org/issue3982)

```
b", ".join([b'1', b'2', b'3']) 
```

BDFL 本人展示了与`.join()`过度使用相关的速度优势： [http ://bugs.python.org/msg180449](http://bugs.python.org/msg180449)`.format()`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-09T16:39:41.730

我发现`%b`在 Python 3.6.2 中效果最好，它应该适用于 b"" 和 ""：

```
print(b"Some stuff %b. Some other stuff" % my_byte_or_unicode_string) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-08-20T09:46:18.493

对于 Python 3.6+，您可以使用这种简洁明了的语法：

```
f'foo {bar}'.encode() # a byte string 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-08-26T01:27:32.160

# b|"你好 {0}！".format("世界")

```
#!/usr/bin/env python3.9
# -*- coding: utf-8 -*-

import builtins

class bytes(bytes):
    def format(self, *args, encoding: str = "utf-8") -> builtins.bytes:
        return_value: bytes = self

        for arg, i in zip(args, range(len(args))):
            pattern: bytes = f"{i}".encode(encoding=encoding)
            return_value = return_value.replace(pattern, bytes(arg, encoding=encoding))

        return return_value

    def __or__(self, other):
        return bytes(self + bytes(other, encoding="utf-8"))

b = bytes('', encoding="utf-8")

if __name__ == '__main__':   
    print( b|"Hello {0} {1}".format("World", "!") ) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-05-22T03:58:07.270

我发现这行得通。

```
a = "{0}, {1}, {2}".format(1, 2, 3)

b = bytes(a, encoding="ascii")

>>> b
b'1, 2, 3' 
```

# c# - Database.Query 返回类型应该是 IEnumerable

> ID：15710519
> 
> 赞同：4
> 
> 时间：2013-03-29T19:55:09.583
> 
> 标签：c#, dynamic, ienumerable, webmatrix

我需要帮助来理解这件事。为什么在下面的代码中，变量“ejes”和“habilidades”被解析为“dynamic”而第三个被解析为`IEnumerable<dynamic>`. 这会影响接下来运行的代码，当我尝试调用扩展方法“Count()”时出现异常，因为“ejes”和“habilidades”不是 IEnumerable。它们是相同方法“Database.Query”的结果。

这是片段：

```
var db = Database.Open("froned");
db.Execute("begin transaction");

try
{
  var asignacion = db.QuerySingle("select * from asignacion_avanza where id_asignacion = @0", id_asignacion);

  var ejes = db.Query(String.Format(@"
                                  select id_eje
                                    from asignatura_eje_nivel
                                   where id_nivel = {0}
                                     and id_asignatura = {1}",
                                       asignacion.id_nivel,
                                       asignacion.id_asignatura));

  var habilidades = db.Query(String.Format(@"
                                  select id_habilidad
                                    from asignatura_habilidad_nivel
                                   where id_nivel = {0}
                                     and id_asignatura = {1}",
                                       asignacion.id_nivel,
                                       asignacion.id_asignatura));
  var dificultades = db.Query("select id_dificultad from dificultad");

  var c_dif = dificultades.Count();
  var c_eje = ejes.Count();
  var c_habilidades = habilidades.Count(); 
```

我放了一个调试器的图像来显示变量的运行时类型。

![异常返回类型](../Images/f53ec352e3eaa9eebd8f1ca520f9c5be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:00:41.053

`asignacion.id_nivel`并且`asignacion.id_asignatura`是动态类型。

当您将动态类型作为参数传递给任何方法时，该方法的返回类型将变为动态类型，而不是 MSDN 所说的任何类型。您不能对动态类型使用扩展方法。`Count()`是 . 上的扩展方法`Enumerable`。这就是你得到例外的原因。

有两种方法可以解决问题并将返回类型恢复为 Enumerable。首先是明确定义它：

```
IEnumerable<dynamic> data = db.Query(someSQL, parameterValue); 
```

另一种是将参数转换为非动态类型：

```
var data = db.Query(someSQL, (string)parameterValue); 
```

正如 Knox 指出的那样，您必须使用参数而不是 string.Format。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:08:45.680

不同之处在于调试器是由于dificultades 已经评估
（`var c_dif = dificultades.Count();`）。
其他两个变量尚未评估（linq deferred）。所以调试器更了解困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:36:53.147

你确定habilidades和另一个有数据吗？我认为可能是 db.Query 返回 null，这意味着没有返回行，然后 habilidades.Count 无法执行，因为 null 没有要执行的对象。在调试器之外进行测试的一种方法是执行 db.QueryValue("Select Count(*) from ...") 并查看是否返回零行。

顺便说一句，C# 中的数据库函数在变量处理中的构建方式比您所拥有的要短一些。你可以写

```
var ejes = db.Query( @"
        Select *  
        From asign  
        Where id_nivel = @0",   
        asignacion.id_nivel ); 
```

这种技术称为参数化 SQL。我只显示一个参数，但您需要更多。@0、@1、@2 等被替换，就像在 String.Format 中一样。

# html - 是否有工具可以在动态填充 HTML 下拉列表时从下拉列表中提取名称/值对？

> ID：15710520
> 
> 赞同：0
> 
> 时间：2013-03-29T19:55:15.020
> 
> 标签：html, html-select

我想提取本网站上列出的下拉控件中可用的名称/值对：http: [//www.dotmed.com/listings/postlisting.html? type=equipment&mode=sale](http://www.dotmed.com/listings/postlisting.html?type=equipment&mode=sale)

初始列表是静态的，因此很容易做到。但是，其余部分似乎是动态填充的。提取这些名称/值对的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:08:20.377

动态加载的框由 ajax 查询调用。
这是单击一个时发送的标头请求。

```
http://www.dotmed.com/ajax/components/ajax

POST /ajax/components/ajax HTTP/1.1
Host: www.dotmed.com
User-Agent: Mozilla/5.0 (Windows NT 6.0; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/javascript, text/html, application/xml, text/xml, */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
X-Requested-With: XMLHttpRequest
X-Prototype-Version: 1.6.0.3
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://www.dotmed.com/listings/postlisting.html?type=equipment&mode=sale
Content-Length: 96
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
_comp=%2Fajax%2Fcomponents%2Flistings%2Fshow_categories&_t=equipment&form=select_form&_h=28&_c=2
HTTP/1.1 200 OK
Date: Fri, 29 Mar 2013 19:59:47 GMT
Server: Apache
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8 
```

您感兴趣的线路是

```
_comp=%2Fajax%2Fcomponents%2Flistings%2Fshow_categories&_t=equipment&form=select_form&_h=28&_c=2 
```

_h= 包含您选择的选项值。
_c= 包含，我想，需要填充的框

So, if you want to get the list of items for the second box for the selection "Cosmetic", you'd grab the id (30) and change _h.

If you want the data for the third box for cosmetic->chiller, You would change _h to 2738 and _c to 3

Basically, you just need to see what you're sending to the server when you're clicking it and then send it a bunch of requests for everything else.

# windows-phone-7 - 相机捕获任务 - 保存到 DB 的内容 - Windows Phone

> ID：15710523
> 
> 赞同：0
> 
> 时间：2013-03-29T19:55:33.390
> 
> 标签：windows-phone-7, camera, isolatedstorage

我的问题与 Windows Phone 7.1 有关。完成相机拍摄任务后，我得到了保存在相机胶卷中的所选图片。如何获得对此的引用，以便我可以将其保存在我的数据库中。

我的意思是，在网页设计中，我们保存图像的 url 以便将来检索它。我在这里保存什么？

**更多细节 - 这是我的要求**

我有一些项目，每个项目都有一个图像。图像由用户使用相机捕获。我想保存它，以便稍后当用户查看该项目时，应显示相应的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:26:00.330

经过更多研究，我找到了答案。

从Windows Phone 开发中心的这个[示例代码](http://code.msdn.microsoft.com/wpapps/Basic-Camera-Sample-52dae359)中得到了这个想法。Basic Camera Sample 是脚本。

**概括：**

1.  使用 Microsoft.Phone.Tasks 命名空间中的 CameraTask 捕获图片
2.  将独立存储中的图像另存为 JPEG。这里我们可以给一个文件名
3.  使用步骤 2 中指定的文件名从 IsolatedStorage 中检索图像

完整的过程在[这里](http://code.msdn.microsoft.com/wpapps/Basic-Camera-Sample-52dae359)用相同的代码清楚地解释。

# c# - 如何使一定数量的变量具有不同的名称？

> ID：15710524
> 
> 赞同：0
> 
> 时间：2013-03-29T19:55:38.433
> 
> 标签：c#, loops, console, space-efficiency

我已经开始用 C# 编程来开发一些控制台应用程序，我想知道如何以更有效的方式制作一定数量的具有不同名称的变量。现在我正在做这样的事情：

```
for(int i=1; i<=x; i++)
    switch(i) {
        case 1:
            Player player1=new Player(i, x);
            break;
        case 2:
            Player player2=new Player(i, x);
            break;
        case 3:
            Player player3=new Player(i, x);
            break;
        case 4:
            Player player4=new Player(i, x);
            break;
        case 5:
            Player player5=new Player(i, x);
            break;
        case 6:
            Player player6=new Player(i, x);
            break;
    } 
```

我只是想知道是否有更有效的方法来解决这个问题以及这些方法是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T19:58:14.803

你最好制作一个数组：

```
var players = new Player[x];
for (int i = 0; i < x; i++)
{
    players[i] = new Player(i, x);
} 
```

或使用 Linq：

```
var players = Enumerable.Range(0, x)
                        .Select(i => new Player(i, x))
                        .ToArray(); 
```

然后，您可以引用您创建的播放器。

```
var player1 = players[0]; // Note: array indexes start at 0 
```

当然，您可能实际上并不需要特别使用数组。许多其他集合类可能更适合您的问题。

**进一步阅读：**

*   [数组（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/9b9dty7d.aspx)
*   [集合（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:01:10.260

你可以做一个球员名单

```
var players = new List<Player>;

for (int i = 0; i < x; i++)
{
    players.add(new Player(i, x));
} 
```

然后内存将在运行时分配。

我不喜欢使用数组，因为您必须提前知道它们的大小。使用列表，您可以动态分配值，并且它只会占用与列表处于当前状态一样多的内存空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:00:19.640

我没有在 C# 中编程，但似乎您正在创建局部变量：它们仅在您的循环中有效。

在循环之外命名您的变量，然后在其中创建它们。您必须测试它们是否存在才能与它们一起工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T23:07:52.100

只是为了一个技巧：

```
partial class Player {
    public Player(int i, int x) {
        this.Ordinal=i;
    }

    public int Ordinal {
        get;
        set;
    }

    public static int Total {
        get;
        set;
    }

    public delegate Trick Trick(out Player x);

    public static Trick Create(out Player x) {
        x=new Player(++Player.Total, 0); // the second int doesn't matter
        return Create;
    }
} 
```

```
partial class TestClass {
    public static void TestMethod() {
        Player mom, dad, brother, sister, me;
        Player.Create(out mom)(out dad)(out brother)(out sister)(out me);
    }
} 
```

一旦您`Total`拥有多个系列的`Player`.

# android-maps-v2 - 来自 Places API 的 ACCESS_DENIED 状态

> ID：15710526
> 
> 赞同：0
> 
> 时间：2013-03-29T19:55:46.120
> 
> 标签：android-maps-v2

我正在开发一个使用 Places API 检索信息并将其显示在地图上的 Android 应用程序。检索场所的初始请求失败，并显示来自 HTTP 请求的 ACCESS_DENIED 状态消息。下面是我用来生成请求的代码：

```
try { 

HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
        request.getUrl().put("key", API_KEY);
        request.getUrl().put("location", _latitude + "," + _longitude);
        request.getUrl().put("radius", _radius); // in meters
        request.getUrl().put("sensor", "false");
        if(types != null)
            request.getUrl().put("types", types);

        PlacesList list = request.execute().parseAs(PlacesList.class);
        // Check log cat for places response status
        Log.d("Places Status", "" + list.status);
        return list; 
```

在另一个 Stackoverflow 帖子中，有人建议发布者尝试以下方法来测试他们的密钥：

> 转到此处的 api 控制台，然后转到 SERVICES。单击活动服务选项卡并确认“Places API”已打开。点击 ? 旁边的“尝试”链接。它应该使用您的密钥创建一个正确的 URL，该 URL 应该可以工作。比较您尝试的链接与此 URL 的差异。

我按照这些说明进行操作。基于我在单击 ? 时收到以下结果的事实 要“尝试”链接，我怀疑 API 密钥存在根本问题，与代码无关……否则我会认为我会得到 SUCCESS 而不是 REQUEST_DENIED：

```
{
  "html_attributions" : [],
  "results" : [],
  "status" : "REQUEST_DENIED"
} 
```

我通过输入我的调试证书的 SHA1 获得了我的密钥（我使用带有所有适当参数的 Keytool...例如，androiddebugkey ....debug.keystore）后跟一个“;” 和应用程序的包名称。

不知道问题是什么......我确定这很简单，但我没有看到它并且我被卡住了。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:39:26.583

我从未收到对此帖子的回复，因此最终我通过在新项目名称下创建一个全新的密钥来解决问题，并且我至少能够从 Google 检索地点。我仍然遇到填充地图的问题，但是这可能是代码问题。

我注意到我使用的那个给我 ACCESS DENIED 结果的密钥的标题是：“Android 应用程序的密钥（带有证书）”，并且在实际密钥下方列出了一个标签“Android 应用程序：”。关键值是SHA1值“;” 后跟包名称。而我在最终工作的新项目名称（Places API）下创建的密钥的标题为：“浏览器应用程序的密钥（带有引用者）”，标签为“引用者：”，值为“允许任何引用者” .

So there is definitely something different about these two keys. I'm not sure what I did differently when I generated the keys. I'd like to understand what I did to generate these two "different" types of keys so that I and perhaps others won't repeat my "mistake(s)".

There are many references to creating keys in the Google documentation. The fact that there are so many postings regarding problems with the keys tells me that the Google documentation is not very clear otherwise so many issues wouldn't exist on this topic.

# 3d - three.js 中的方法，用于正交显示场景的切片

> ID：15710529
> 
> 赞同：1
> 
> 时间：2013-03-29T19:55:58.497
> 
> 标签：3d, three.js, webgl

我有一个使用three.js 渲染的相当简单的场景。我正在尝试只渲染场景的一部分，就像 MRI 一样。

为了测试目的，我制作了两个版本的场景。

1.  透视版，效果很好
2.  一个正交版本，它应该只是给定平面上场景的一部分

渲染正交场景是没有问题的。我曾尝试使用剪裁平面来捕获切片，但无法正常工作。要么我得到一个全白的屏幕，要么得到整个模型。

这是我希望实现的自上而下的视图：

```
100 *----------------------------------*
    |                                  |
    |                                  |
    |                                  |
    |                                  |
    ####################################  <-- Capture this slice of 100 units width
    |                                  |
    |                                  |
    |                                  |
    |                                  |
 0  *----------------------------------*
    0                                  100

                    \  /
                     \/
                   CAMERA roughly @ (50, -100) 
```

我完全有可能遗漏了一些明显的东西。我的 3D 背景不错，但我不是专家。

What is the best way to go about this in Three.js / WebGL? What is the best place for the camera to go?

PS: Yes, I am aware that slicing through some primitives will not work well. I am using a model built from lines and points which I expect will slice fairly safely. Cutting objects in half is not too much of an issue for me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:41:20.270

The answer turned out to be the camera placement. It was obvious in hindsight that the camera should not be set back from the scene as is needed for the perspective projection. Placing the camera right at the edge of the model did the trick and the clipping plane (near, far) worked properly.

eg:

```
 Z
100 *----------------------------------*
    |                                  |
    |                                  |
75  |                                  |
    |                                  |
    |                                  |
50  |                                  |
    |                                  |
    |                                  |
25  ####################################  <-- Capture this slice of 5 units
    |                                  |      width @ z = 25
    |                                  |
 0  *-----------------X----------------* Y
    0                 .                100
                      .
                      .
                   CAMERA is here at (50,0)
                   near = 25
                   far  = 30 (for width 5, ie: 25 + 5) 
```

# php - jquery加载本地主机页面onclick

> ID：15710531
> 
> 赞同：-5
> 
> 时间：2013-03-29T19:56:03.657
> 
> 标签：php, javascript, jquery, html

我有这个页面

```
<html>
<head>
<script type="text/javascript">
$(document).ready(function(){
alert("asdf");
var url = "http://localhost/test/test.php";
$("#button").on("click", function() {
    $('body').load( url );
});
});
</script></head>
<body>
<input type="button" id="button" value="click" />
</body>
</html> 
```

我想加载 url 的内容并将其放在正文中，但什么也没发生，请问为什么？怎么解决 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:58:14.203

我没有看到您在该文档中的任何地方包含 jQuery，您需要这样做才能使用对象的属性和方法。

要将您的 jquery 脚本包含在您的文档中，您只需将其作为脚本行添加到您的 head 标记中：

```
<script type="text/javascript" src="yourscriptpathgoeshere.js"></script> 
```

请注意，它必须在任何使用 jquery 的脚本之前。例如，它不能在脚本之后。

例如，下面的代码对我来说很好：

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
        <script type="text/javascript">
        $(document).ready(function(){
            var url = "http://localhost/testing/test.php";
            $("#button").on("click", function() {
                $('body').load( url );
            });
        });
        </script>
    </head>
    <body>
        <input type="button" id="button" value="click" />
    </body>
</html> 
```

要获取特定链接的 href .. 如果 html 有效（并且只有一项具有 id 'link'），请使用以下方法： [`.attr()`](http://api.jquery.com/attr/)，以下列方式：

```
var href = $("#link").attr('href'); 
```

# matlab - Matlab函数用于隔离方程中的变量

> ID：15710533
> 
> 赞同：1
> 
> 时间：2013-03-29T03:05:11.720
> 
> 标签：matlab, equation

我一直在寻找一个在 Matlab 中做“主题”的函数。我不确定它是否被称为主题或其他名称。让我解释一下功能。

假设我有这样的表达。

```
syms x, y,z;
y = 2*x^2 - 2*z + 1; 
```

我想要一个函数来获取`x`一侧和其他变量到另一侧。IE。

```
x = ((y + 2*z - 1)/ 2 )^0.5 
```

是否有任何功能或内置 Matlab 命令来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:07:49.433

您是否看过 MATLAB 数学工具箱的文档？它就在那里。功能是“解决”。在此处阅读文档：[解决文档](http://www.mathworks.com/help/symbolic/solve.html)。

# r - 在 data.frame 或 cbind 中使用变量值作为列名

> ID：15710538
> 
> 赞同：13
> 
> 时间：2013-03-29T19:56:32.160
> 
> 标签：r, dataframe, renaming, columnname

在创建数据框时（或在类似情况下，如使用 cbind），R 中有没有办法将变量评估为列名？

例如

```
a <- "mycol";
d <- data.frame(a=1:10) 
```

这将创建一个数据框，其中有一列名为`a`而不是`mycol`.

这不如帮助我从代码中删除很多行的情况重要：

```
a <- "mycol";
d <- cbind(some.dataframe, a=some.sequence) 
```

我当前的代码受到了折磨：

```
names(d)[dim(d)[2]] <- a; 
```

这在美学上很漂亮。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T20:56:25.070

```
> d <- setNames( data.frame(a=1:10), a)
> d
   mycol
1      1
2      2
3      3
4      4
5      5
6      6
7      7
8      8
9      9
10    10 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-29T20:57:33.880

`structure(data.frame(1:10),names="mycol")`审美让你满意吗？:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-02T23:06:33.627

只需在创建后使用 colnames。例如

```
a <- "mycolA"
b<- "mycolB"
d <- data.frame(a=1:10, b=rnorm(1:10))
colnames(d)<-c(a,b)
d
mycolA     mycolB
 1 -1.5873866
 2 -0.4195322
 3 -0.9511075
 4  0.2259858
 5 -0.6619433
 6  3.4669774
 7  0.4087541
 8 -0.3891437
 9 -1.6163175
 10  0.7642909 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T10:59:54.120

简单的解决方案：

```
df <- data.frame(1:5, letters[1:5])
logics <- c(T,T,F,F,T)
cities <- c("Warsaw","London","Paris","NY","Tokio")
m <- as.matrix(logics)
m2 <- as.matrix(cities)
name <- "MyCities"
colnames(m) <- deparse(substitute(logics))
colnames(m2) <- eval(name)
df<-cbind(df,m)
cbind(df,m2)

X1.5 letters.1.5\. logics MyCities
1            a   TRUE   Warsaw
2            b   TRUE   London
3            c  FALSE    Paris
4            d  FALSE       NY
5            e   TRUE    Tokio 
```

# java - hornetq 延迟重新发送消息组

> ID：15710539
> 
> 赞同：1
> 
> 时间：2013-03-29T19:56:32.160
> 
> 标签：java, jms, messaging, hornetq

我想以某种方式延迟整个消息组的消息。

问题是属于每个消息组的所有消息必须按照它们发布的相同顺序依次处理。如果无法使用其中一条消息 - 我们希望延迟它并延迟同一消息组中的剩余消息。我不想阻止消费者——它应该可以自由地处理来自其他组的消息。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:47:43.707

我不能说 JMS 有什么好的内置支持这些东西。使用单个“独立”消息，一切都变得更容易，但是您可以尝试一件事。

对这些消息（在该组中）进行延迟传递。

```
// Send to same queue once again, but delay 60 sec
if( isGroupMarkedForRedelivery(message.getStringProperty("JMSXGroupID"))){
   message.setLongProperty("_HQ_SCHED_DELIVERY", System.currentTimeMillis() + 60000);
   producer.send(message); // producer sends to process queue (again).
} 
```

请注意，如果您需要它们以相同的顺序，那么您可能不应该在发送和/或接收中使用并发。您当然可以添加更多逻辑以适应您的情况。

您可能需要确保`isGroupMarkedForRedelivery`在比“延迟”更短的时间后返回特定组的 false。

# html - 如何在 html 下拉列表中显示类别名称？

> ID：15710540
> 
> 赞同：4
> 
> 时间：2013-03-29T19:56:45.783
> 
> 标签：html, select, drop-down-menu

我在表单中有一个下拉列表。有很多项目。我想在下拉列表中显示用户可以看到但无法选择的类别名称。

到目前为止，我有这个。但显然它不起作用。

```
<select id="item_name" name="item_name">
                    <dl>
                        <dt>Category 1</dt>
                            <dd><option value="1">Item 1</option></dd>
                            <dd><option value="2">Item 2</option></dd>
                            <dd><option value="3">Item 3</option></dd>
                        <dt>Category 2</dt>
                            <dd><option value="4">Item 4</option></dd>
                            <dd><option value="5">Item 5</option></dd>
                            <dd><option value="6">Item 6</option></dd>
                    </dl>
                </select> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T19:59:53.450

您需要使用[`optgroup`元素](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-optgroup-element)：

```
<select>
    <optgroup label="Category 1">
        <option>Item 1</option>
        <option>Item 2</option>
    </optgroup>
    <optgroup label="Category 2">
        <option>Item 3</option>
        <option>Item 4</option>
    </optgroup>
</select> 
```

[jsfiddle 上的示例](http://jsfiddle.net/tykhQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:00:00.030

html 选择组？

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_optgroup](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_optgroup)

```
<select name="whatever">
  <optgroup label="Category 1">
    <option value="1.1">Item 1.1</option>
    <option value="1.2">Item 1.2</option>
    <option value="1.3">Item 1.3</option>
    <option value="1.4">Item 1.4</option>
  </optgroup>
  <optgroup label="Category 2">
    <option value="2.1">Item 2.1</option>
    <option value="2.2">Item 2.2</option>
    <option value="2.3">Item 2.3</option>
    <option value="2.4">Item 2.4</option>
  </optgroup>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:01:03.313

请检查 select 元素的定义：

[http://www.w3.org/wiki/HTML/Elements/select](http://www.w3.org/wiki/HTML/Elements/select)

它不允许`<dl>`出现在选择下拉列表中。您可能能够使用样式属性来实现这些您知道是类别的选项的效果。

# javascript - ExtJS 4 TreeStore 静态 JSON - 不会加载

> ID：15710542
> 
> 赞同：1
> 
> 时间：2013-03-29T19:56:54.203
> 
> 标签：javascript, extjs, sencha-architect

我只是想将一个静态 JSON 文件加载到 TreeStore 中，而我正在抓狂。

我有一个模型：

```
Ext.define('pronghorn_ui_keyboard.model.CommandKey', {
    extend: 'Ext.data.Model',
    fields: [
        {
            name: 'id'
        },
        {
            name: 'key'
        },
        {
            name: 'command'
        }
    ]
}); 
```

我有一个树店：

```
Ext.define('pronghorn_ui_keyboard.store.Commands', {
    extend: 'Ext.data.TreeStore',

    requires: [
        'pronghorn_ui_keyboard.model.CommandKey'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            storeId: 'commands',
            model: 'pronghorn_ui_keyboard.model.CommandKey',
            proxy: {
                type: 'ajax',
                url: 'commands.json',
                reader: {
                    type: 'json'
                }
            }
        }, cfg)]);
    }
}); 
```

我在 commands.json 有以下 JSON：

```
{
    id: 'root',
    key: null,
    command: null,
    children: [
        {
            id: 't'
            key: 't'
            command: null,
            children: [
                {
                    id: 'te'
                    key: 'e'
                    command: 'Trade Equity'
                    leaf: true
                }
            ]
        }
    ]
} 
```

我正在尝试以编程方式加载这棵树并在控制台中检查它。在控制器初始化函数中：

```
var me = this;

me.getCommandsStore().load({
    callback: function() {
        me.rootCommandKey = me.getCommandsStore().getRootNode();
        me.currentCommandKey = me.rootCommandKey;
        console.log(me.currentCommandKey);
        console.log(me.currentCommandKey.id);
        console.log(me.currentCommandKey.hasChildNodes());
        me.initMainCommands();
    },
    scope: me
}); 
```

控制台有*一些*关于 currentCommandKey 的东西，但这个 ID 不是我的根 ID，并且 hasChildNodes() 是假的。所以显然文件没有被加载。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:57:18.283

我的 JSON 无效；基本上没有逗号。

这是正确的 JSON：

```
{
    success: true,
    children: [
        {
            string: 't',
            key: 't',
            command: null,
            children: [
                {
                    string: 'te',
                    key: 'e',
                    command: 'Trade Equity',
                    leaf: true
                }
            ],
            leaf: false
        }
    ]
} 
```

I need to do a better job of error handling with async calls too. I moved a bunch of stuff into methods on the Store itself and bound that init state on the load event using a local binding, which exposed a bunch of load-terminating-condition flags.

# android - 对话框复选框上的自定义样式

> ID：15710543
> 
> 赞同：1
> 
> 时间：2013-03-29T19:57:05.210
> 
> 标签：android

我正在尝试设计一个 AlertDialog 来取悦客户。他们喜欢 Theme.Holo.Light.Dialog 上的蓝色标题栏，但喜欢另一个主题的绿色复选框。这就是我想要制作的：

![在此处输入图像描述](../Images/4579f9182e43c8f130bf4dc7d11f1a95.png)

所以，我有这样的风格定义：

```
<style name="MyDialogTheme" parent="@android:Theme.Holo.Light.Dialog">
            <item name="android:listChoiceIndicatorMultiple">@drawable/checkbox_green</item>
</style> 

<style name="mycheckbox" parent="@android:style/Widget.CompoundButton.CheckBox">
    <item name="android:button">@drawable/checkbox_box</item>

</style> 
```

我有一个 checkbox_green 的定义如下，它们只是 PNG 文件：

```
<item android:state_checked="false" 
    android:drawable="@drawable/checkbox_unchecked" />

<item android:state_checked="true" 
    android:drawable="@drawable/checkbox_checked"/>

</selector> 
```

我用Java中的特定主题创建了我的对话框构建器，如下所示：

```
 ContextThemeWrapper ctw = new ContextThemeWrapper( mContext, R.style.MyDialogTheme);
 AlertDialog.Builder builder= new AlertDialog.Builder( ctw ); 
```

但我无法让对话框在此主题中显示绿色复选框而不是蓝色。我明白了： ![在此处输入图像描述](../Images/75be40905d70d80f62699188301b326c.png)

我可以继续创建一个完整的布局，然后像这样使用它：

```
 AlertDialog shareDialog  = new AlertDialog.Builder(mContext).create();
 LayoutInflater inflater = MainActivity.this.getLayoutInflater();

 View dialogView = null;
 dialogView = inflater.inflate(R.layout.share, (ViewGroup) getCurrentFocus());
 shareDialog.setView(dialogView); 
```

但这需要设置所有对话框的样式，而不仅仅是复选框。重新设置复选框的样式似乎要简单得多，但我无法做到这一点。

除了创建一个完整的布局并用于获取绿色复选框而不是蓝色复选框之外，我还需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T19:17:16.360

Actually, you CAN change the checkbox inside a multi-choice dialog.

You need a custom adapter for your dialog, so as to have access to the views of the list. Then, you call method [`setCheckMarkDrawable`](http://developer.android.com/reference/android/widget/CheckedTextView.html#setCheckMarkDrawable%28android.graphics.drawable.Drawable%29) of class CheckedTextView.

Here is an example:

![enter image description here](../Images/4094d4cbf1ddc7e941e9263830576bb0.png)

File `default_checkbox.xml` inside `res/drawable`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">  

    <item android:state_checked="true"
        android:drawable="@drawable/checkbox_checked" /> <!-- checked -->

    <item android:state_pressed="true"
        android:drawable="@drawable/checkbox_checked" /> <!-- pressed -->

    <item android:drawable="@drawable/checkbox_default" /> <!-- default -->

</selector> 
```

File `DialogUtil.java`

```
package example.dialog;

import android.app.AlertDialog;
import android.content.Context;
import android.util.Log;
import android.view.*;
import android.widget.*;
import android.widget.AdapterView.OnItemClickListener;

public class DialogUtil {

    private DialogUtil() {
    }

    public static AlertDialog show(Context context) {
        String[] items = {"text 1", "text 2", "text 3"};
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setTitle("Test")
            .setPositiveButton("OK", null)
            .setAdapter(new CustomAdapter(context, items), null);
        AlertDialog dialog = builder.show();

        ListView list = dialog.getListView();
        list.setItemsCanFocus(false);
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        list.setOnItemClickListener(listener);
        return dialog;
    }

    private static OnItemClickListener listener = new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Log.i("DialogUtil", "Clicked on " + view);
        }
    };

    private static class CustomAdapter extends ArrayAdapter<String> {

        public CustomAdapter(Context context, String[] array) {
            super(context, android.R.layout.simple_list_item_multiple_choice, array);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = super.getView(position, convertView, parent);
            if (view instanceof CheckedTextView) {
                CheckedTextView checkedView = (CheckedTextView) view;
                checkedView.setCheckMarkDrawable(R.drawable.default_checkbox);
            }
            return view;
        }
    }
} 
```

**NOTE:** If you simply use `AlertDialog`, then before getting the `ListView`, you call `show`, firstly, like explained above.

However, if you use `DialogFragment` and `onCreateDialog`, then you get the `ListView`, inside `onStart`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:10:38.070

它应该如下所示......

首先以任何兼容的格式（jpeg，png）根据需要设计您的复选框......并将它们放在可绘制文件夹中......

然后为按钮制作单独的 xml 并选择您为选定和未选定复选框设计的图像...并将此文件放在项目的可绘制文件夹中，并在此处使用正确名称在 customchk.xml 中说...

```
<?xml version="1.0" encoding="utf-8"?>
 <selector  xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_checked="false" android:drawable="@drawable/chk2" />   //custom image 
 <item android:state_checked="true" android:drawable="@drawable/chk1" />   //custom image 
 <item android:drawable="@drawable/chk2" /> <!-- default -->
</selector> 
```

然后将您的复选框：按钮设置为您的 xml 文件...如下

```
<CheckBox
            android:id="@+id/notifs"
            android:layout_width="150dp"
            android:button="@drawable/customchk"     //your xml
            android:layout_height="wrap_content"
/> 
```

我想它应该可以工作，您不需要更改所有对话框...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T20:10:45.573

据我所知，如果不创建自定义 View 对象，就无法仅设置对话框的部分样式。

创建如下样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="AlertDialogCustom" parent="@android:style/AlertDialog">
        <item name="android:textColor">#00FF00</item>
        <item name="android:typeface">monospace</item>
        <item name="android:textSize">10sp</item>
    </style>
</resources> 
```

膨胀视图，如：

```
AlertDialog.Builder builder = new AlertDialog.Builder(new ContextThemeWrapper(this, R.style.AlertDialogCustom)); 
```

[以下是](http://developer.android.com/reference/android/R.attr.html#checkBoxPreferenceStyle)与您的自定义 AlertDialog 样式一起使用的复选框的属性。

# svg - 在 D3.js 中查找图形的质心

> ID：15710544
> 
> 赞同：2
> 
> 时间：2013-03-29T19:57:11.423
> 
> 标签：svg, d3.js, centroid

我试图通过使用整个图形的质心[和](http://mbostock.github.com/d3/talk/20111018/tree.html)不知道最好的做法是将此图视为离散节点并使用质心坐标进行操作。如何计算图的质心，允许动态调整图的大小以允许新的节点，从而重新计算质心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:34:16.457

听起来在您的情况下，更简单的做法是获取图形的容器（即 SVG）并计算其中心点。假设您正在绘制的图形的边距不是太大和/或不平衡，则行为将与计算图形的质心非常相似，但更容易实现。

代码看起来像这样。

```
var centerx = svg.getBBox().x + svg.getBBox().width/2,
    centery = svg.getBBox().y + svg.getBBox().height/2; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-01T20:13:48.547

也许这有帮助： http: [//graphstream-project.org/doc/Algorithms/Centroid_1.0/](http://graphstream-project.org/doc/Algorithms/Centroid_1.0/)。我知道您是在 D3.js 的上下文中询问的。但是可能有一些东西可以利用 GraphStream 中的质心。

# android - 片段中的 onActivityResult() 始终接收 null Intent

> ID：15710546
> 
> 赞同：2
> 
> 时间：2013-03-29T19:57:21.423
> 
> 标签：android

我的代码中有以下工作流程。我有使用 startActivityForResult(intent, requestCode)`fragment A`开始一个新的。`activity B`活动 B 有一个片段说`fragment C`，其中包含一个列表视图（它的适配器有一个数组列表）和一个编辑文本，用于将新值添加到列表视图中。

我打算将数据发送回`fragment A`. 我`fragment C`在同一个片段的 onPause() 方法中实现了一个接口。

```
@Override
public void onPause() {
    // TODO Auto-generated method stub
    OnSubtaskExitListener onSubtaskExitListener = (OnSubtaskExitListener) getSherlockActivity();
    onSubtaskExitListener.onExit(Subtasks);
    super.onPause();
} 
```

子任务是在编辑文本中从添加按钮添加新项目时更新的数组列表。

我已经实现了这个接口，`activity B`其中包含片段 C。

```
@Override
public void onExit(ArrayList<HashMap<String, String>> subtasks) {
....
intent.putExtra("ResultArray", stringArray);
setResult(RESULT_OK, intent);
finish(); 
```

请注意，在片段 A 中调用了 startActivityForResult。因此，使用了 setResult。

**问题**：在`onActivityResult(int requestCode, int resultCode, Intent data)`片段 A 中，Intent 数据始终为空。我在活动 B 的 onExit 方法中使用了 android.util.Log 来查看在 put extra 中发送的数据是否为空，例如`Log.d("Array Result", stringArray[0].toString());`但 onActivityResult() 总是获取数据为空。

请帮我找出错误。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:16:08.417

`onPause()`AFAIK调用后您无法设置活动结果。设置活动结果`onPause()`，`onStop()`或者`onDestroy()`可能总是给你 null in `onActivityResult()`。

我不知道您为什么要调用方法`setResult()`，`onPause()`但也许您可以将其移至`onBackPressed()`or`onKeyDown()`方法。这应该可以解决您的问题。

# vb.net - “收藏已修改；” ...但事实并非如此

> ID：15710547
> 
> 赞同：2
> 
> 时间：2013-03-29T19:57:21.737
> 
> 标签：vb.net, collections

我有一个对象列表：

```
Dim objList As BindingList(Of Object1) 
```

每一个都包含一个 Object2 的列表。我正在尝试遍历 objList，以便可以从每个 Object1 各自的 Object2 列表中删除 Object2 的特定实例：

```
For Each obj In objList
    Dim objRemove = obj.Object2List.Where(AddressOf ObjCheck)
    For Each obj2 In objRemove
        obj.Object2List.Remove(obj2)
    Next
Next 
```

这会引发错误，“集合已修改；枚举操作可能无法执行。”

我不明白的是我正在从 Object2List 中删除一个对象，该对象没有被枚举。为什么会抛出这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:00:47.167

调用`Where`实际上并不执行查询并创建新集合。它只是创建一个迭代器来迭代原始列表，跳过与查询不匹配的元素。

您需要添加一个调用以`ToList()`立即执行查询并创建一个新的项目集合：

```
Dim objRemove = obj.Object2List.Where(AddressOf ObjCheck).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:01:10.770

在这种情况下，您`Object2List`只是间接地枚举。`objRemove`集合内部包含对`Object2List`和枚举的引用，`objRemove`也将隐式枚举`Object2List`

解决此问题的最简单方法是按索引枚举集合

```
Dim index = 0
Dim list = obj.Object2List
While index < list.Count
  If ObjCheck list(index) Then
    list.RemoveAt(index)
  Else
    index = index + 1
End 
```

# c# - 同时检查多个对象的布尔属性

> ID：15710549
> 
> 赞同：1
> 
> 时间：2013-03-29T19:57:45.783
> 
> 标签：c#, wpf

我的 GUI 应用程序上有多个复选框，可以为每个相同类型的对象启用自动更新。因此，如果选中该复选框，则 isautoupdate 属性设置为 true，否则设置为 false。我有一个按钮需要在所有复选框上启用/禁用自动更新。如何检查所有对象的 isautoupdate 属性是否设置为 true 或 false。

我当前的实现是使用一个 foreach 循环，该循环遍历每个对象并检查 isautoupdate 是否设置为 true 或 false，但我得到了一个切换效果，如果选中了某些复选框，它将取消选中它们，反之亦然。

在.cs

```
foreach (MxL_GUI_ChannelSettingAndStatusItem item in theGUIManager.theDevice.channelCollection)
{
    if (!item.IsAutoUpdated)
    {
        item.IsAutoUpdated = true;
    }
    else
    {
        item.IsAutoUpdated = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:05:16.727

如果您不希望您的从复选框切换，那么不要编写切换它们的代码。相反，请检查`IsChecked`主复选框的属性并将该值应用于`IsAutoUpdated`项目的所有属性：

```
foreach (MxL_GUI_ChannelSettingAndStatusItem item in ...)
{
    item.IsAutoUpdated = masterCheckbox.IsChecked.Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:20:10.660

我不确定我是否完全理解您的要求。如果要检测所有项目是否设置为 true 或 false，请使用：

```
var items = theGUIManager.theDevice.channelCollection;

// If you need to know if for all items IsAutoUpdated = true
bool allChecked = items.All(item => item.IsAutoUpdated);

// If you need to know if they're all false
bool noneChecked = !items.Any(item => item.IsAutoUpdated); 
```

然后更新您的项目，例如：

```
foreach(var item in items) { item.IsAutoUpdated = !allChecked; } 
```

# c++ - passing properties of an object as a string

> ID：15710550
> 
> 赞同：0
> 
> 时间：2013-03-29T19:57:58.520
> 
> 标签：c++, pointers, shared-ptr, unordered-map

I have an unordered map that is supposed to check if a pen exists given the color, and the width of the pen. I'm currently trying to do a lookup by string. If it’s already in the map, that means I already created a Pen of that type. If it isn’t already in the map, I want to create a new Pen and set the color and weight, and add that to the unordered_map.

```
 std::unordered_map<std::string, std::shared_ptr<Gdiplus::Pen>> mymap; 
```

The properties of the pen that i want are the color and the width... as you can see the color comes in the format(0,0,0) and the width is just a float number. I was thinking about doing a string as such: "(R,G,B);W" where R, G, B correspond to the colors and W corresponds to the width of the Pen, but that seems too complex.

```
 Gdiplus::Pen pen(Color(0, 0, 0));
 pen.getWidth(); 
```

I was wondering if there is a simple way to pass those properties as a single string or if there is a better way to go around my problem.

My string is supposed to see if the pen exists. it checks the pen color and the width.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:40:40.393

我的假设是你正在检查一支笔是否存在。

与其将事物放入字符串中，不如将它们放入结构中并在容器中使用该结构。

```
struct Pen_Properties
{
  unsigned int r,g, b;
  unsigned int width;

  bool operator<(const Pen_Properties& p)
  {
     bool result = true;
     if (r != p.r)
     {
       result = r < p.r;
     }
     else
     {
        if (g != p.g)
        {
          result = g < p.g;
        }
        else
        {
           // And so on.
        }
     }
}; 
```

# php - Expression Engine Counting Entries in loop

> ID：15710552
> 
> 赞同：0
> 
> 时间：2013-03-29T19:58:02.663
> 
> 标签：php, loops, expressionengine, counter

So I need to count how many entries are being pulled for a certain group. Heres my code dumbed down.

```
 <?php $i = 0; ?>
{exp:weblog:entries related_categories_mode="on" custom_fields="on" orderby="view_count_one" sort="desc" limit="4" offset="0" weblog="{my_weblog1}" start_on="<?php echo $current_time; ?>" }

      <table>
        <tr valign="top" style="margin-bottom:10px;">
          <td> {if weblog == "Newsroom"} <a href="{title_permalink="freedom/articles}">{if Image}<img src="{Image}" >{/if}</a>
            {if:elseif weblog == "Health Freedom"} <a href="{title_permalink="freedom/articles}">{if Image}<img src="{Image}" >{/if}</a>
            {/if} <br /></td>
          <td> <h3>{if weblog == "Newsroom"} <a href="{title_permalink="freedom/articles}">{title}</a>
            {if:elseif weblog == "Health Freedom"} <a href="{title_permalink="freedom/articles}">{title}</a>

            {/if} <span class="date">&ndash; {entry_date format='%m/%d/%Y '} </span> </h3>

</td>
        </tr>
<?php $i = $i++; ?>
      <?php $count = '{count}';   ?>
<?php echo $count;?> {/exp:weblog:entries}
<?php echo $count; ?>
<?php echo $i; ?> 
```

So basically during the loop it counts up to 4 with $count, but ontside the weblog I get 1 for $count and 0 for $i . Can someone help me? I should also mention the php is being rendered on input. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:00:06.913

Change

```
<?php $i = $i++; ?> 
```

To

```
<?php $i++; ?> 
```

The way you have it is setting new `$i` to old `$i` and then incrementing old `$i` (which no longer exists).

# amazon-web-services - 如何允许 CloudFront 访问某些 S3？

> ID：15710566
> 
> 赞同：0
> 
> 时间：2013-03-29T19:59:41.617
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

我是 AWS 新手。现在我想编写一个 java 代码来使用 CloudFront 来访问一个 s3。

我创建了一个 S3 存储桶。但我不知道如何使用 S3 凭据获取云端对象。

我看了AWS JAVA API，看来代码应该是这样的形式：

```
AmazonCloudFrontClient cloudfront = new AmazonCloudFrontClient(credentials);
CreateCloudFrontOriginAccessIdentityRequest originRequest = new CreateCloudFrontOriginAccessIdentityRequest();
originRequest.setRequestCredentials(credentials);

cloudfront.createCloudFrontOriginAccessIdentity(originRequest); 
```

但我没有看到 S3ID 或将 S3 设置为云端的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:47:22.353

如果您想使用 CloudFront 提供您的 S3 文件，这通常意味着您希望 S3 存储桶公开可用。[您可以通过 S3 接口（Web 控制台、API 或CloudBerry](http://www.cloudberrylab.com/free-amazon-s3-explorer-cloudfront-IAM.aspx)或[Bucket Explorer](http://www.bucketexplorer.com/)等第三方工具）简单地将您的对象和存储桶定义为公共的。

您也可以使用 Java SDK 进行设置

```
Statement allowPublicReadStatement = new Statement(Effect.Allow)
         .withPrincipals(Principal.AllUsers)
         .withActions(S3Actions.GetObject)
         .withResources(new S3ObjectResource(myBucketName, "*"));

Policy policy = new Policy()
         .withStatements(allowPublicReadStatement);

AmazonS3 s3 = new AmazonS3Client(myAwsCredentials);
s3.setBucketPolicy(myBucketName, policy.toJson()); 
```

如果您想提供私有文件​​，可以在此处查看文档：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html)

# php - 我用magento开发了一个控制器。如何从前端访问它？

> ID：15710567
> 
> 赞同：2
> 
> 时间：2013-03-29T19:59:41.927
> 
> 标签：php, magento-1.7

我正在开发一个模块，并在 magento 中开发了一个控制器。如何从前端访问它？请给我配置设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:02:10.233

在您的配置中尝试此代码：`<frontend> <routers> <productextension> <use>standard</use> <args> <module>GreenOrigin_ProductExtension</module> <frontName>productextension</frontName> </args> </productextension> </routers> <layout> <updates> <productextension> <file>productextension.xml</file> </productextension> </updates> </layout> </frontend>`

# arrays - 使用 2d 数组时出现错误“不匹配 operator==”

> ID：15710568
> 
> 赞同：-1
> 
> 时间：2013-03-29T19:59:46.153
> 
> 标签：arrays, overloading, operator-keyword

尝试使用“==”和“！=”与字符串数组和字符进行比较时出现此错误。这是否意味着我需要做一些运算符重载？如果是这样，任何人都可以指出我如何做到这一点（或其他方法）的正确方向，因为我对运算符重载还不太熟悉。

```
bool legalMove(string list[][7], int row_start, 
    int column_start, int row_end,int column_end)
{
if(list[row_start][column_start] == 'S' && list[row_end][column_end] != ' ')
    {
        if((row_end == row_start + 1 && column_start == column_end) || 
            (row_start == row_end && (column_end == column_start + 1 
                || column_end == column_start  - 1)))
            {
                return true;
            }
            else
            {
                return false;
            }

    }
    else
    {
        return false;
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:02:47.580

您正在使用 a`std::string`与 a`char`进行比较`''`。试试吧

```
if(list[row_start][column_start] == "S" && list[row_end][column_end] != " "){ } 
```

如果您正在使用`std::string`，那是标准类型，您将无法重载`operator==`. 请参阅[此处](http://en.cppreference.com/w/cpp/string/basic_string)以获取有关`std::string`.

# php - PHP Fatal error: Cannot redeclare frm_dl() wordpress

> ID：15710572
> 
> 赞同：0
> 
> 时间：2013-03-29T20:00:00.373
> 
> 标签：php, wordpress

i'm having a 500 internal server problem. [http://www.bunchmag.com/](http://www.bunchmag.com/)

```
500 internal server error Fatal error: Cannot redeclare frm_dl 
```

> 20130329T141539: www.bunchmag.com/index.php PHP Fatal error: Cannot redeclare frm_dl() (previously declared in /hermes/web09/aksjhfks/moo.bunchmagazinecom/bunch/index.php(1) : eval()'d code:1) in /hermes/web09/skjfljf/moo.bunchmagazinecom/bunch/wp-config.php(1) : eval()'d code on line 10

my hosting tech support is working on it but any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:34:41.963

找到声明函数的位置并将其包装在 if 语句中以确保尚未声明该函数。

```
if( !function_exists( "frm_dl" ) ){
    function frm_dl(..){
        ...
    }
} 
```

如果相同的文件被包含两次，这应该可以解决问题。

或者，搜索多个声明函数的文件并将每个文件包装在条件语句中，或者更改函数名称（如果可能）

# internet-explorer - CSS Skew creates grey line in IE9

> ID：15710573
> 
> 赞同：0
> 
> 时间：2013-03-29T20:00:00.873
> 
> 标签：internet-explorer, css, css-transforms

I'm attempting a CSS layout of three divs stacked vertically. The top and bottom divs are slanted. The body is horizontal and meant to fluctuate in size with the content that loads. I've been able to get this working in all modern browsers except IE 9\. I've attempted to overlap the divs to cover the grey line. That works, but since I'm working with opacity, the divs darken where they overlap and that's just as bad. Would appreciate any help.

The line: ![enter image description here](../Images/e55674fd46e8f12a52707d7d2faa6d21.png)

Sample Code:

```
<!DOCTYPE html>
<html>
<head>
<style>
div{
width: 200px;
left: 300px;  
height: 200px;
position: relative;
background-color: rgba( 0, 26, 159, 0.7)
}
#top{
transform: skew(8deg, 0deg);
-ms-transform: skew(-8deg, 0deg);
left: 314px;
}
#bottom{
transform: skew(8deg, 0deg);
-ms-transform: skew(-8deg, 0deg);
left: 286px;
}
#middle{
height: auto;
}
</style>
</head>
<body>
<div id="top"></div>
<div id="middle">
Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test  text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />
Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />Test text<br />T
</div>
<div id="bottom"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:20:51.317

由于 IE9 可以处理透明图像，我们生成了具有所需不透明度的图像并使用它来代替 CSS3。

# php - .htaccess - try all DirectoryIndex and rewrite if file doesn't exist

> ID：15710578
> 
> 赞同：3
> 
> 时间：2013-03-29T20:00:22.670
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

My `.htaccess` file contains the following directives

```
DirectoryIndex index.html index.php  
# redirect invalid requests and missing files to the home page  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ http://www.mydomain.com/ [L] 
```

The problem is that many programmers(loosely used term) worked on this site. Some directories use `index.html` and some use `index.php`.

If a directory uses `index.php`, the request to `www.mydomain.com/directory` looks for `www.mydomain.com/directory/index.html` and is redirected to `www.mydomain.com` before it can look for `www.mydomain.com/directory/index.php`

How can I both try all `DirectoryIndex` files AND redirect missing files to the home page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:53:34.417

> 如何同时尝试所有 DirectoryIndex 文件并将丢失的文件重定向到主页？

我认为 mod_rewrite 或 mod_alias 模块不可能做到这一点。您必须寻找其他选项来解决问题。这是使用相同的 DirectoryIndex 指令强制在根目录加载文件作为最后一个选项的想法：

将此行放在根目录的一个 .htaccess 文件中：

```
DirectoryIndex  index.php  index.html  /missing.php 
```

`missing.php`使用这些代码行在根目录中创建：

```
<?php
header("Location: http://www.example.com/"); // Redirect
?> 
```

不需要额外的指令或规则。如果在目标目录中没有找到之前的文件（从左到右），则将加载根目录中的*missing.php 。*不过，所有请求都必须有一个尾部斜杠才能正常工作。

*缺少，php*只是一个例子。可以使用任何文件名。

### 更新了附加选项：

> **根据 OP 评论**：
> “但是我如何处理丢失的文件，例如 example.com/file-not-on-server.php”

在这种情况下，`mod_rewrite`确实是一个解决方案。

您可以在根目录下的 .htaccess 文件中尝试此操作：

```
# Directive that solves the original question
DirectoryIndex  index.php  index.html  /missing.php

Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
# Next condition is met when the requested file doesn't exist
RewriteCond %{REQUEST_FILENAME} !-f
# If previous condition was met, use the next rule
RewriteRule ^(.*)$         /index.php [L,NC] 
```

注意事项：
1.`/index.php`在规则中，只是一个例子。它可以是任何文件。
2\. 对于永久重定向，将 [L,NC] 替换为 [R=301,L,NC]。

# javascript - How to calculate current date with date selected in javascript?

> ID：15710580
> 
> 赞同：0
> 
> 时间：2013-03-29T20:00:30.547
> 
> 标签：javascript

I am trying to work out how old a user is based on the selection statement.

I cannot calculate the current (year/month/day/hour/minute) from the user input.

The intent is that the user will see 3 box to select [Month] [Day] and [Year] of birth.

Based on the answer I want to calculate the current date minus the date selected by the user.

For some reason I can't make the logic work. I can hard code it, but I want it to be logical.

Here is my code:

```
<!DOCTYPE>
<html>
<title>Validate Credit Cards</title>
<head>
    <script type="text/javascript">
    /* <![CDATA[ */
    /* ]]> */
    </script>
</head>
<body>
    <form action="">
            <h1>Age Calculator</h1>
            <p>Birth Date:
                <select name="month">
                    <option>Month</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                </select>
                <select name="day">
                    <option>Day</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                    <option>11</option>
                    <option>12</option>
                    <option>13</option>
                    <option>14</option>
                    <option>15</option>
                    <option>16</option>
                    <option>17</option>
                    <option>18</option>
                    <option>19</option>
                        <option>20</option>
                    <option>21</option>
                    <option>22</option>
                    <option>23</option>
                    <option>24</option>
                    <option>25</option>
                    <option>26</option>
                <option>27</option>
                <option>28</option>
                <option>29</option>
                <option>30</option>
                <option>31</option>
            </select>
            <select name="year">
                <option>Year</option>
                <option>1950</option>
                <option>1951</option>
                <option>1952</option>
                <option>1953</option>
                <option>1954</option>
                <option>1955</option>
                <option>1956</option>
                <option>1957</option>
                <option>1958</option>
                <option>1959</option>
                <option>1960</option>
                <option>1961</option>
                <option>1962</option>
                <option>1963</option>
                <option>1964</option>
                <option>1965</option>
                <option>1966</option>
                <option>1967</option>
                <option>1968</option>
                <option>1969</option>
                <option>1970</option>
                <option>1971</option>
                <option>1972</option>
                <option>1973</option>
                <option>1974</option>
                <option>1975</option>
                <option>1976</option>
                <option>1977</option>
                <option>1978</option>
                <option>1979</option>
                <option>1980</option>
                <option>1981</option>
                <option>1982</option>
                <option>1983</option>
                <option>1984</option>
                <option>1985</option>
                <option>1986</option>
                <option>1987</option>
                <option>1988</option>
                <option>1989</option>
                <option>1990</option>
                <option>1991</option>
                <option>1992</option>
                <option>1993</option>
                <option>1994</option>
                <option>1995</option>
                <option>1996</option>
                <option>1997</option>
                <option>1998</option>
                <option>1999</option>
                <option>2000</option>
                <option>2001</option>
                <option>2002</option>
                <option>2003</option>
                <option>2004</option>
                <option>2005</option>
                <option>2006</option>
                <option>2007</option>
                <option>2008</option>
                <option>2009</option>
                <option>2010</option>
            </select>               
        </p>
        <p><input type="button" value="Calculate" onclick="calcAge()" /></p>
        <h2>You have lived</h2>
        <p><input type="text" name="yearCalc" size="7" /> years</p>
        <p><input type="text" name="monthCalc" size="7" /> months</p>
        <p><input type="text" name="dayCalc" size="7" /> days</p>
        <p><input type="text" name="hourCalc" size="7" /> hours</p>
        <p><input type="text" name="minCalc" size="7" /> minutes</p>
    </form> 
<script>    
    function calcAge()
        {
        var d1 = new Date();
        var month = document.forms[0].month.value;
        var day = document.forms[0].day.value;
        var year = document.forms[0].year.value;
        var yearCalc = 2012 - year;
        var monthCalc = parseInt(month);
        var dayCalc = Math.abs(d1 - parseInt(day));
        var hourCalc = Math.round();
        var minCalc = Math.round();
        document.forms[0].yearCalc.value =  yearCalc.toLocaleString();
        document.forms[0].monthCalc.value =  monthCalc.toLocaleString();
        document.forms[0].dayCalc.value =  dayCalc.toLocaleString();
        document.forms[0].hourCalc.value =  hourCalc.toLocaleString();
        document.forms[0].minCalc.value =  minCalc.toLocaleString();
        }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:15:07.293

Date 对象 ( [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp) ) 预先打包了一些不错的函数，更值得注意的是 getTime() 函数，它返回 Date 对象自 1970 年以来的毫秒时间，基本相同作为 Unix 时间，除了单位（Unix 时间是秒）。要确定年龄，我们需要做的就是将用户的选择存储为 Date 对象，然后获取现在与用户输入的任何内容之间的差异。

```
var d1 = new Date();
d1.setMonth(document.forms[0].month.value);
d1.setDay(document.forms[0].day.value);
d1.setYear(document.forms[0].year.value);
var now = new Date();
var ageInMs = now.getTime() - d1.getTime();
var ageInYears = ageInMs / 86400000 / 365; 
```

由于 getTime() 函数返回毫秒，我们需要将其转换为年。一天有 86,400,000 毫秒，一年有 365 天（大约）。

编辑：如果组合框实际上是字符串，您可能需要对组合框的值使用 parseInt() 。不过，这将是一个简单的改变——而不是

```
d1.setMonth(document.forms[0].month.value); 
```

你会的

```
d1.setMonth(parseInt(document.forms[0].month.value, 10)); 
```

# c# - 如何使用 GeckoFX 作为 XULRunner 的包装器在 javascript 中调用 C# 方法

> ID：15710581
> 
> 赞同：6
> 
> 时间：2013-03-29T20:00:31.750
> 
> 标签：c#, javascript, geckofx

我在我的项目中使用**GeckoFX16**和**xulrunner-16.0.2.en-US.win32**。问题是，我想在 javascript 中调用 C# 方法。

我很好奇，有没有办法做到这一点？

就像下面这样：

`C#`部分：

```
private GeckoWebBrowser weBrowser;
    public browser()
    {
        InitializeComponent();
        Gecko.Xpcom.Initialize("xulrunner");
        weBrowser = new GeckoWebBrowser();
        weBrowser.Parent = this;
        weBrowser.Dock = DockStyle.Fill;
        weBrowser.Navigate("test.html");
    }

    public string loadData(){
        //load data from local file.
        return str;
    } 
```

`javascript`部分：

```
<script type='text/javascript'>
    var data = window.loadData();
    alert(data);
</script> 
```

我是这个领域的新手，如果可能的话，我会很感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-05T21:13:10.307

**重要更新：**

当前代码`event.initMessageEvent`不起作用，因为此结构已被替换

```
var event = new MessageEvent('yourEventName', { 'view': window, 'bubbles': false, 'cancelable': false, 'data': 'some data' }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T01:28:35.737

您可以使用[MessageEvent](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)来调用 c# 中的代码，但据我所知，您不能像您想要的那样返回一个字符串。其中一个单元测试演示了如何调用 c# 代码：

```
[Test]
public void AddEventListener_JScriptFiresEvent_ListenerIsCalledWithMessage()
{
    string payload = null;

    browser.AddMessageEventListener("callMe", ((string p) => payload = p));

    browser.LoadHtml(
        @"<!DOCTYPE html>
                     <html><head>
                     <script type='text/javascript'>
                        window.onload= function() {
                            event = document.createEvent('MessageEvent');
                            var origin = window.location.protocol + '//' + window.location.host;
                            event.initMessageEvent ('callMe', true, true, 'some data', origin, 1234, window, null);
                            document.dispatchEvent (event);
                        }
                    </script>
                    </head><body></body></html>");

    browser.NavigateFinishedNotifier.BlockUntilNavigationFinished();
    Assert.AreEqual("some data", payload);
} 
```

我知道这很尴尬，但是您可以使用 ac#-->javascript 调用将数据返回到 javascript-land。请参阅[此问题](https://stackoverflow.com/questions/12009473/what-is-the-recommended-way-to-call-a-javascript-function-from-c-sharp-using-the?rq=1)以了解如何执行此操作。因此，您的 javascript 会首先将此消息发送到 c# 土地，然后它会收到带有您需要的字符串值的回调。

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-06T13:35:48.050

您可以将消息事件侦听器添加到 Web 浏览器并像这样调用您的方法：

```
private void load()
{
    browser.AddMessageEventListener("myFunction", ((string s) => this.showMessage(s)));
    browser.LoadHtml
    (
        @"<!DOCTYPE html>
          <html><head>                 
          <meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"">
          <script type=""text/javascript"">
             function fireEvent(name, data)
             {
                event = document.createEvent('MessageEvent');
                event.initMessageEvent(name, false, false, data, null, null, null, null);
                document.dispatchEvent(event);
             }                        
          </script>
          </head>
          <body>
             <input type=""button"" onclick=""fireEvent('myFunction', 'some data');"" value=""SHOW DATA"" />
          </body></html>"
    );
} 
```

...

```
private void showMessage(string s)
{
    MessageBox.Show(s);
} 
```

现在，您可以将更多 msg 事件添加到您的 msg 侦听器（如果需要）并以相同的方式触发它们。

# java - Java中最大精度的测试数

> ID：15710587
> 
> 赞同：2
> 
> 时间：2013-03-29T20:00:51.157
> 
> 标签：java, precision

我想测试一个双精度为 3 或更少的最大精度。在 Java 中执行此操作的最佳方法是什么？

```
20.44567567 <- Fail
20.444 <- Pass
20.1 <- Pass
20 <- Pass 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:04:11.023

1）不要使用`double`。浮点逻辑充其量是近似的。改为使用`BigDecimal`。

2）我认为`BigDecimal`已经有一种设置精度的方法。如果没有，只需乘以 1000 并截断。做操作，得到一个新的数字，和原来的比较。如果不同，则失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:07:29.897

这通过了您的测试：

```
package com.sandbox;

import org.junit.Test;

import static junit.framework.Assert.assertFalse;
import static junit.framework.Assert.assertTrue;

public class SandboxTest {

    @Test
    public void testPrecision() {
        assertFalse(precisionLessThanOrEqualTo3(20.44567567));
        assertTrue(precisionLessThanOrEqualTo3(20.444));
        assertTrue(precisionLessThanOrEqualTo3(20.1));
        assertTrue(precisionLessThanOrEqualTo3(20));
    }

    private boolean precisionLessThanOrEqualTo3(double x) {
        return String.valueOf(x).replaceAll(".*\\.", "").length() <= 3;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:07:59.620

您可以使用以下代码：

```
boolean f (double in){
    if (in*1000 > (float)(int)(in*1000))
        return false;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T11:53:06.297

[术语“精度”](https://simple.wikipedia.org/wiki/Arithmetic_precision)有多种可能的解释：

*   算术精度是有效数字的总数（小数点前后）。
*   数字小数部分的位数（或小数位数）。
*   特别是在数据库中，可以使用计数中包含的固定小数位数（比例）来测量精度，因此一`NUMBER(6,2)`列将存储最多 6 位的数字，这些数字始终由 2 位小数和 4 位整数组成。

对于您的示例，您似乎将精度测量为最大小数位数。

这些中的每一个都可以使用以下方法进行测试：

```
import java.math.BigDecimal;

import org.junit.Test;
import static org.junit.Assert.*;

public class Precision
{
  /**
   * Tests to see whether the number has up to the given number of
   * decimal places.
   * 
   * @param value The value to test.
   * @param scale The maximum number of decimal places. 
   * @return      <code>true</code> if the value has up to the
   *              expected number of decimal places.
   */
  static final boolean hasDecimalPlaces(
      final double value,
      final int    scale
  )
  {
    try
    {
      new BigDecimal( Double.toString( value ) ).setScale( scale );
      return true;
    }
    catch ( final ArithmeticException ex )
    {
      return false;
    }
  }

  /**
   * Tests to see whether the number has up to the given number of
   * significant figures.
   * 
   * @param value     The value to test.
   * @param precision The maximum number of significant figures to
   *                  test for.
   * @return          <code>true</code> if the value has up to the
   *                  expected number of significant figures. 
   */
  static final boolean hasSignificantFigures(
      final double value,
      final int    precision
  )
  {
    try
    {
      return new BigDecimal( Double.toString( value ) ).stripTrailingZeros().precision() <= precision;
    }
    catch ( final ArithmeticException ex )
    {
      return false;
    }
  }

  /**
   * Tests to see whether the number has at most the given number of
   * decimal places and, when represented at that maximum number of
   * decimal places, has up to the given number of digits.
   * 
   * @param value     The number to test.
   * @param precision The maximum number of digits to test for.
   * @param scale     The maximum number of decimal places.
   * @return          <code>true</code> if the value can be represented
   *                  at the given scale and, at that scale, is up to
   *                  the given precision.
   */
  static final boolean hasDigitsAtScale(
      final double value,
      final int    precision,
      final int    scale
  )
  {
    try
    {
      return new BigDecimal( Double.toString( value ) ).setScale( scale ).precision() <= precision;
    }
    catch ( final ArithmeticException ex )
    {
      return false;
    }
  }

  @Test
  public void testScale(){
    assertTrue( hasDecimalPlaces( 20d, 3 ) );
    assertTrue( hasDecimalPlaces( 20.123d, 3 ) );
    assertFalse( hasDecimalPlaces( 20.1234d, 3 ) );
  }

  @Test
  public void testPrecision(){
    assertTrue(  hasSignificantFigures(    20d,      3 ) );
    assertTrue(  hasSignificantFigures(   120d,      3 ) );
    assertTrue(  hasSignificantFigures(  1230d,      3 ) );
    assertFalse( hasSignificantFigures( 12340d,      3 ) );
    assertTrue(  hasSignificantFigures(    20.1d,    3 ) );
    assertFalse( hasSignificantFigures(    20.12d,   3 ) );
    assertTrue(  hasSignificantFigures(     0.123d,  3 ) );
    assertFalse( hasSignificantFigures(     0.1234d, 3 ) );
    assertTrue(  hasSignificantFigures(     0.0000999d,  3 ) );
    assertFalse( hasSignificantFigures(     0.00009999d, 3 ) );
  }

  @Test
  public void testPrecisionAndScale(){
    assertTrue(  hasDigitsAtScale(     0d,      3, 0 ) );
    assertFalse( hasDigitsAtScale(     0.01d,   3, 0 ) );
    assertFalse( hasDigitsAtScale(     0.1d,    3, 0 ) );
    assertTrue(  hasDigitsAtScale(     1d,      3, 0 ) );
    assertTrue(  hasDigitsAtScale(    10d,      3, 0 ) );
    assertTrue(  hasDigitsAtScale(   100d,      3, 0 ) );
    assertFalse( hasDigitsAtScale(  1000d,      3, 0 ) );
    assertFalse( hasDigitsAtScale( 10000d,      3, 0 ) );

    assertTrue(  hasDigitsAtScale(     0d,      3, 1 ) );
    assertFalse( hasDigitsAtScale(     0.01d,   3, 1 ) );
    assertTrue(  hasDigitsAtScale(     0.1d,    3, 1 ) );
    assertTrue(  hasDigitsAtScale(     1d,      3, 1 ) );
    assertTrue(  hasDigitsAtScale(    10d,      3, 1 ) );
    assertFalse( hasDigitsAtScale(   100d,      3, 1 ) );
    assertFalse( hasDigitsAtScale(  1000d,      3, 1 ) );
    assertFalse( hasDigitsAtScale( 10000d,      3, 1 ) );

    assertTrue(  hasDigitsAtScale(     0d,      3, -1 ) );
    assertFalse( hasDigitsAtScale(     0.01d,   3, -1 ) );
    assertFalse( hasDigitsAtScale(     0.1d,    3, -1 ) );
    assertFalse( hasDigitsAtScale(     1d,      3, -1 ) );
    assertTrue(  hasDigitsAtScale(    10d,      3, -1 ) );
    assertTrue(  hasDigitsAtScale(   100d,      3, -1 ) );
    assertTrue(  hasDigitsAtScale(  1000d,      3, -1 ) );
    assertFalse( hasDigitsAtScale( 10000d,      3, -1 ) );
  }
} 
```

# javascript - Dynamic update MarkerwithLabel Google Maps API V3

> ID：15710588
> 
> 赞同：1
> 
> 时间：2013-03-29T20:00:55.360
> 
> 标签：javascript, google-maps

I am new to Google Maps API. I have an HTML page which call up an event handler and then using the XML return data to population the markers and label. The issue is I can't seem to be able to refresh the labels value. The label just over write itself and sooner or later IE will crash and saying "Stop running this script? A script on this page is causing your web browser to run slowly......."

```
<!--<script type="text/javascript" src="/js/labeledmarker.js"></script>-->

<script type="text/javascript">

 var map;
      function initialize() {
        var mapDiv = document.getElementById('map-canvas');
        map = new google.maps.Map(mapDiv, {
          center: new google.maps.LatLng(27.896415, -81.843137),
          zoom: 9,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);

      }

      function addMarkers() 
 {

     downloadUrl("get_waittime_feed.ashx", function (data) {

         var markers = data.documentElement.getElementsByTagName("marker");
         for (var i = 0; i < markers.length; i++) {
             var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("latitude")),
                                    parseFloat(markers[i].getAttribute("longitude")));
             var markericons = markers[i].getAttribute("markericons");
            var waitER = markers[i].getAttribute("waitER");

             var customIcons = { 0: { icon: new google.maps.MarkerImage('../img/greenbb.png', new google.maps.Size(30, 30)) },
                 1: { icon: new google.maps.MarkerImage('../img/redbb.png', new google.maps.Size(30, 30)) },
                 2: { icon: new google.maps.MarkerImage('../img/hospital.png', new google.maps.Size(35, 35))}
             };
             var icon = {}; if (markericons == '0') {
                 icon = customIcons[0];
             }
             else if (markericons == '1') {
                 icon = customIcons[1];
             }
             else if (markericons == '2') {
                 icon = customIcons[2];
             };

             var marker = new MarkerWithLabel({
                position: latlng,
                map: map,
                icon: icon.icon,
                labelContent: waitER,
                labelAnchor: new google.maps.Point(3, 30),
                labelClass: "labels", // the CSS class for the label
                labelInBackground: false
                });

         }
     });

};

setInterval(addMarkers, 5000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-02T15:17:41.067

这对我有用

`marker.labelContent = 'New Label';`

`marker.label.setContent();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-15T22:08:02.523

```
markers[i].label.setStyles(); // Force label to redraw (makes update visible) 
```

不要为我工作，但

```
markers[i].label.draw(); // redraw the label for me 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T01:34:17.723

IE 发出该警告的原因是您实际上并没有更新标记 - 您每次调用时都会创建一组新的标记`addMarkers()`。如此有效地，地图需要越来越长的时间来刷新，直到超过 IE 对 JavaScript 的时间限制。

与其每次都创建一个新的`var marker = new MarkerWithLabel()`，不如在第一次调用函数时创建它们，然后在之后的每次调用中更新它们。例如：

```
totalmarkers = markers.length;
for (i = 0; i < totalmarkers; i++) {
    if (markers[i] == null) { // Create your marker here
        markers[i] = new MarkerWithLabel({
            position: latlng,
            map: map,
            icon: icon.icon,
            labelContent: waitER,
            labelAnchor: new google.maps.Point(3, 30),
            labelClass: "labels", // the CSS class for the label
            labelInBackground: false
            });
    } else { // Update your marker here
        markers[i].labelContent = 'label content';
        markers[i].labelClass = 'label class';
        markers[i].label.setStyles(); // Force label to redraw (makes update visible)
        markers[i].setPosition(googlemapslatlng); // Move the marker to a new position
        markers[i].icon = iconurl; // If you want to change the icon
        markers[i].setShape(); // Force the marker icon to redraw
    } 
```

希望有帮助。另请查看[此线程](https://stackoverflow.com/questions/10677529/adding-dynamic-content-to-google-maps-marker)以更新标记标签。

# python - Unable to open a window with Pyglet

> ID：15710592
> 
> 赞同：1
> 
> 时间：2013-03-29T20:01:08.793
> 
> 标签：python, error-handling, window, pyglet

I decided to look into Pyglet to experiment with graphics and hit the ground face first with some errors. Right off the bat, I had issue simply trying to create a window. I would get multiple errors due to the fact that I was using the 64-bit version of Python. I've switched to 32-bit, and whittled down the errors to this one:

```
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    window = pyglet.window.Window()
  File "C:\Python27\lib\site-packages\pyglet\window\win32\__init__.py", line 423, in __init__
    super(Win32Window, self).__init__(*args, **kwargs)
  File "C:\Python27\lib\site-packages\pyglet\window\__init__.py", line 686, in __init__
    self._create()
  File "C:\Python27\lib\site-packages\pyglet\window\win32\__init__.py", line 518, in _create
    self.context._set_window(self)
  File "C:\Python27\lib\site-packages\pyglet\window\win32\__init__.py", line 364, in _set_window
    raise gl.ContextException('Unable to share contexts')
ContextException: Unable to share contexts 
```

The error was caused by this line of code, which is the first line in the Pyglet tutorial on their website (omitting the import):

```
window = pyglet.window.Window() 
```

It's worth noting that I have two monitors. According to the Pyglet documentation, it shouldn't be a problem as it chooses default values, but I don't want to rule it out.

EDIT: I'm working on Windows 7 64-bit.

# python - 将 REGEX 字符串传递给 re.search

> ID：15710596
> 
> 赞同：0
> 
> 时间：2013-03-29T20:01:16.007
> 
> 标签：python, regex

尝试将变量替换为 re.search 时，我被卡住了。
我使用以下代码从文件中收集存储的正则表达式并将其保存到变量“正则表达式”中。在此示例中，存储的正则表达式用于从日志消息中查找带有端口号的 IP 地址。

```
for line in workingconf:
    regexsearch = re.search(r'regex>>>(.+)', line)
    if regexsearch:
        regex = regexsearch.group(1)
        print regex

#I use re.search to go through "data" to find a match.

data = '[LOADBALANCER] /Common/10.10.10.10:10'
alertforsrch = re.search(r'%s' % regex, data)
if alertforsrch:
    print "MATCH"
    print alertforsrch.group(1)
else:
    print "no match" 
```

当这个程序运行时，我得到以下信息。

```
$ ./messageformater.py
/Common/([\d]{1,}\.[\d]{1,}\.[\d]{1,}\.[\d]{1,}:[\d]{1,})
no match 
```

当我将 re.search 更改为以下内容时，它可以工作。正则表达式将从文件中获取，并且可能每次都不相同。这就是我尝试使用变量的原因。

```
for line in workingconf:
    regexsearch = re.search(r'regex>>>(.+)', line)
    if regexsearch:
        regex = regexsearch.group(1)
        print regex

alertforsrch = re.search(r'/Common/([\d]{1,}\.[\d]{1,}\.[\d]{1,}\.[\d]{1,}:[\d]{1,})', data)
if alertforsrch:
    print "MATCH"
    print alertforsrch.group(1)
else:
    print "no match"

####### Results ########
$./messageformater.py
/Common/([\d]{1,}\.[\d]{1,}\.[\d]{1,}\.[\d]{1,}:[\d]{1,})
MATCH
10.10.10.10:10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:17:00.947

对我来说很好...

为什么还要打扰字符串格式化程序呢？re.search(regex, data) 应该可以正常工作。

您可能在从文件中读取的正则表达式末尾有一个换行符 - 尝试 re.search(regex.strip(), data)

# java - 使用 useExponentialBackOff 重新传递 HornetQ 消息

> ID：15710600
> 
> 赞同：0
> 
> 时间：2013-03-29T20:01:30.980
> 
> 标签：java, jms, activemq, messaging, hornetq

在 ActiveMQ 中，可以在重新传递策略中设置 useExponentialBackOff，这将在每次消息消费失败时成倍增加延迟。如何在 HornetQ 中实现这一点？

是否可以将自己的重新交付策略定义为 java 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:46:08.073

它应该工作：

```
<address-settings>
      <address-setting match="jms.queue.example">
         <dead-letter-address>jms.queue.deadletter</dead-letter-address>
         <max-delivery-attempts>5</max-delivery-attempts>
         <redelivery-delay>1000</redelivery-delay>
         <redelivery-delay-multiplier>2.0</redelivery-delay-multiplier>
      </address-setting>
</address-settings> 
```

*   redelivery-delay-multiplier：这允许您在重新交付尝试之间实现指数退避。
*   max-delivery-attempts：在 max-delivery-attempts 尝试不成功后，消息将转发到死信地址（如果指定） 。
*   redelivery-delay：HornetQ 在重新发送消息之前会等待这个延迟

# ruby - 将语素数组转换为 Ruby 中的句子

> ID：15710601
> 
> 赞同：5
> 
> 时间：2013-03-29T20:01:33.963
> 
> 标签：ruby, nlp

[我想转换由PTB 风格](http://www.cis.upenn.edu/~treebank/tokenization.html)的分词器生成的词素数组：

```
["The", "house", "is", "n't", "on", "fire", "."] 
```

给一句话：

```
"The house isn't on fire." 
```

什么是实现这一目标的明智方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:50:34.647

如果我们接受@sawa 对撇号的建议并将您的数组设为：

```
["The", "house", "isn't", "on", "fire", "."] 
```

您可以通过以下方式获得所需的内容（带有标点符号支持！）：

```
def sentence(array)
  str = ""
  array.each_with_index do |w, i|
    case w
    when '.', '!', '?' #Sentence enders, inserts a space too if there are more words.
      str << w
      str << ' ' unless(i == array.length-1)
    when ',', ';' #Inline separators
      str << w
      str << ' '
    when '--' #Dash
      str << ' -- '
    else #It's a word
      str << ' ' unless str[-1] == ' ' || str.length == 0
      str << w
    end
  end
  str
end 
```

# sql - SQL删除文字，留下号码

> ID：15710604
> 
> 赞同：0
> 
> 时间：2013-03-29T20:01:50.577
> 
> 标签：sql, ms-access

我在访问数据库中有一些格式很差的旧数据。有一个包含混合数据的 packSize 列。有时它说“2 pack”，有时是“4 pk”，有时是“3”等。我想做的是运行 SQL 命令来删除所有文本并只留下数字。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:16:12.647

虽然`VAL`如果字段始终以数值开头，则该命令可以工作，但情况可能并非总是如此。示例用法：

```
UPDATE Table SET field = Val(field) 
```

如果您想从字符串/字段中删除所有非数字值，这是我过去使用的一种方法（直接来自 Microsoft）：

```
Function RemoveAlphas (ByVal AlphaNum as Variant)

   Dim Clean As String
   Dim Pos, A_Char$

   Pos = 1
   If IsNull(AlphaNum) Then Exit Function

   For Pos = 1 To Len(AlphaNum)
      A_Char$ = Mid(AlphaNum, Pos, 1)
      If A_Char$ >= "0" And A_Char$ <= "9" Then
         Clean$ = Clean$ + A_Char$
      End If
   Next Pos

   RemoveAlphas = Clean$

End Function 
```

和：

> 如何在更新查询中使用 RemoveAlphas() 函数
> 
> Create a new query based on the table with the phone number field. Place the phone number field in the first column of the query grid. On the Query menu, click Update. In the Update To row, enter the following for a field named Phone: RemoveAlphas([Phone]) Run the query.

[http://support.microsoft.com/kb/210537](http://support.microsoft.com/kb/210537)

# error-handling - MeteorJS 错误类

> ID：15710606
> 
> 赞同：0
> 
> 时间：2013-03-29T20:02:08.123
> 
> 标签：error-handling, meteor

在某些代码中，在客户端上运行，加载到“lib”子文件夹中，我试图抛出一个`Meteor.Error()`但我得到了一些时髦的东西......

```
*Uncaught [object Object]* 
```

[http://screencast.com/t/0WipUFRs](http://screencast.com/t/0WipUFRs)

这是我的代码：

```
throw new Meteor.Error(500, 'the auction was not found'); 
```

这是某种加载顺序问题吗？还是我的语法错误？要不然是啥？

*   陨石版 0.4.9
*   Meteor 版本 0.5.9 (git checkout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T05:10:56.120

已弃用 - 这不再是 Meteor 0.6.3 之后的问题

# c# - Excel Interop 的 set_value 方法会损坏值

> ID：15710609
> 
> 赞同：0
> 
> 时间：2013-03-29T20:02:11.420
> 
> 标签：c#, excel, office-interop, excel-interop

我在使用 set_value 方法时发现了一个问题。我写了最简单的代码来排除我的错误。

当我读取一些单元格然后使用 set_value 将它们写回工作表时：

*   任何过滤器在 xlsx 文件中都处于活动状态，

*   获取/设置 2 列或更多列，

一些单元格已损坏（它们是空的或包含像#N/D 一样的垃圾！）。当我在使用 set_value 之前在工作表或程序中禁用过滤时，一切正常。我在谷歌中找不到关于这个特定问题的任何信息，我做的事情真的很愚蠢吗？

```
Excel.Workbooks workbooks;
Excel.Workbook workbook = null;
Excel.Worksheet sheet = null;
Excel.Application excelApplication;
excelApplication = new Excel.Application();
excelApplication.Visible = false;
workbooks = excelApplication.Workbooks;
workbook = workbooks.OpenXML(file);
sheet = workbook.Sheets[1];

Excel.Range excelRangeR = sheet.UsedRange;
object[,] valueArrayR = (object[,])excelRangeR.get_Value(Excel.XlRangeValueDataType.xlRangeValueDefault);
//if uncomment line     below (or manualy disable filters in XLSX file), set_value works fine
//sheet.AutoFilterMode = false;
excelRangeR.set_Value(Excel.XlRangeValueDataType.xlRangeValueDefault, valueArrayR);

workbook.Save();
workbook.Close();
System.Runtime.InteropServices.Marshal.ReleaseComObject(excelRangeR);
System.Runtime.InteropServices.Marshal.ReleaseComObject(sheet);
System.Runtime.InteropServices.Marshal.ReleaseComObject(workbook);
System.Runtime.InteropServices.Marshal.ReleaseComObject(workbooks);
excelApplication.Quit();
System.Runtime.InteropServices.Marshal.ReleaseComObject(excelApplication); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:16:54.200

您可以保留过滤器，但如果工作表上有一个*活动过滤器*，则必须在设置单元格的值之前将其删除。我认为发生的事情是，当您设置 object[,] 变量时，它会使用范围内的所有数据填充数组，包括不可见的行，但是当您将范围的值设置为 object[ ,] 数组，它只覆盖可见行。要么是这样，要么反之亦然。

抱歉，如果此代码不正确。我只是在猜测 C# 互操作语法。我不经常使用它。

```
if (sheet.get_FilterMode()) {
    sheet.ShowAllData();
} 
```

不幸的是，没有一种简单的方法可以保存工作表过滤器的当前值，因此如果您需要能够在粘贴操作后恢复过滤器，这将很困难。

# java - Parsing individual parts of an xml file from WebService - Android

> ID：15710613
> 
> 赞同：1
> 
> 时间：2013-03-29T20:02:18.030
> 
> 标签：java, android, web-services

I'm trying to parse the sunrise and sunset time from this [webservice](http://www.earthtools.org/sun/52.77431872/-1.20639/4/12/99/0) and display them into two separate textviews.

I've been trying to follow this tutorial but I'm struggling to understand how to adapt it: [http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

In that example the xml file has parent and child nodes and loops to collect them all, in my example I just want to grab two specific parameters and be able to display them.

This is the code I currently have, at the moment it calls the webservice and display the full xml file in an EditText. I need to work out how parse the individual values rather than all of it.

```
 package com.authorwjf.http_get;
      import java.io.IOException;
      import java.io.InputStream;
      import org.apache.http.HttpEntity;
      import org.apache.http.HttpResponse;
      import org.apache.http.client.HttpClient;
      import org.apache.http.client.methods.HttpGet;
      import org.apache.http.impl.client.DefaultHttpClient;
      import org.apache.http.protocol.BasicHttpContext;
      import org.apache.http.protocol.HttpContext;
      import android.app.Activity;
      import android.os.AsyncTask;
      import android.os.Bundle;
      import android.view.View;
      import android.view.View.OnClickListener;
      import android.widget.Button;
      import android.widget.EditText;

public class Main extends Activity implements OnClickListener {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    findViewById(R.id.my_button).setOnClickListener(this);
}

@Override
public void onClick(View arg0) {
    Button b = (Button)findViewById(R.id.my_button);
    b.setClickable(false);
    new LongRunningGetIO().execute();
}

private class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
       InputStream in = entity.getContent();
         StringBuffer out = new StringBuffer();
         int n = 1;
         while (n>0) {
             byte[] b = new byte[4096];
             n =  in.read(b);
             if (n>0) out.append(new String(b, 0, n));
         }
         return out.toString();
    }

    @Override
    protected String doInBackground(Void... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        String finalURL = "http://www.earthtools.org/sun/52.77431872/-1.20639/4/12/99/0";
        HttpGet httpGet = new HttpGet(finalURL);
        String text = null;
        try {
            HttpResponse response = httpClient.execute(httpGet,
                    localContext);
            HttpEntity entity = response.getEntity();
            text = getASCIIContentFromEntity(entity);
        } catch (Exception e) {
            return e.getLocalizedMessage();
        }
        return text;
    }   

    protected void onPostExecute(String results) {
        if (results!=null) {
            EditText et = (EditText)findViewById(R.id.my_edit);
            et.setText(results);
        }
        Button b = (Button)findViewById(R.id.my_button);
        b.setClickable(true);
    }
}
} 
```

I've been attempting to sort this for a while now and I'm about ready to give up, if anybody could help me out and show me some working code to grab the sunset and sunrise times that would be amazing.

Thanks for looking x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:15:28.027

编辑：请参阅此相关问题。[从 Web 服务解析日出和日落值](https://stackoverflow.com/questions/15711607/parsing-sunrise-and-sunset-values-from-web-service/15711814?noredirect=1#comment22315434_15711814)

您可以解析 xml 并将值设置为视图。看看这个[教程](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)。

```
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

//here's your xml string.
String test = "<sun xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http://www.earthtools.org/sun.xsd\"><version>1.0</version><location><latitude>52.77431872</latitude><longitude>-1.20639</longitude></location><date><day>4</day><month>12</month><timezone>0</timezone><dst>0</dst></date><morning><sunrise>07:45:31</sunrise><twilight><civil>07:05:54</civil><nautical>06:22:57</nautical><astronomical>05:41:56</astronomical></twilight></morning><evening><sunset>16:02:28</sunset><twilight><civil>16:42:03</civil><nautical>17:24:58</nautical><astronomical>18:05:57</astronomical></twilight></evening></sun>";
try {

        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        InputSource s = new InputSource(new StringReader(test)); 
        Document doc = dBuilder.parse(s);

        doc.getDocumentElement().normalize();

        Log.v("Root element :" + doc.getDocumentElement().getNodeName());

        NodeList nList = doc.getElementsByTagName("morning");

        Log.v("----------------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

            Node nNode = nList.item(temp);

            System.out.println("\nCurrent Element :" + nNode.getNodeName());

            if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                Element eElement = (Element) nNode;

                System.out.println("sunrise : " + eElement.getElementsByTagName("sunrise").item(0).getTextContent());

            }
        }
        } catch (Exception e) {
        e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:06:56.140

您需要使用 XML DOM 解析器，因为它是最简单的。

您应该`results`使用将文本发送到 XML 解析器`DocumentBuilderFactory`，然后从解析器请求各种值，例如日落和日出。

我建议遵循本教程：[Android XML Parsing Tutorial – Using DOMParser](http://www.androidpeople.com/android-xml-parsing-tutorial-%E2%80%93-using-domparser)

* * *

**日出示例**（伪代码......*非常*伪代码）：

```
NodeList nodeList = doc.getElementsByTagName("Morning");
Node node = nodeList.get("sunrise");
String sunrise = node.getValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:07:24.350

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

您可以在 Sax 解析器或 w3c dom 解析器之间进行选择。

上面有相同的教程。

```
public class MainActivity extends Activity {
String lsunrise,sunset;
String xml=    "<sun >"+
"<version>1.0</version>"+
"<location>"+
"<latitude>52.77431872</latitude>"+
"<longitude>-1.20639</longitude>"+
"</location>"+
"<date>"+
"<day>4</day>"+
"<month>12</month>"+
"<timezone>0</timezone>"+
"<dst>0</dst>"+
"</date>"+
"<morning>"+
"<sunrise>07:45:31</sunrise>"+
"<twilight>"+
"<civil>07:05:54</civil>"+
"<nautical>06:22:57</nautical>"+
"<astronomical>05:41:56</astronomical>"+
"</twilight>"+
"</morning>"+
"<evening>"+
"<sunset>16:02:28</sunset>"+
"<twilight>"+
"<civil>16:42:03</civil>"+
"<nautical>17:24:58</nautical>"+
"<astronomical>18:05:57</astronomical>"+
"</twilight>"+
"</evening>"+
"</sun>";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    parse();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
  void parse()
   { try 
        {

    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xml));
    DefaultHandler handler = new DefaultHandler() {

     boolean sr=false;
     boolean ss=false;

    public void startElement(String uri, String localName,String qName, 
                Attributes atts) throws SAXException {

        //System.out.println("Start Element :" + qName);

        if (qName.equalsIgnoreCase("sunrise")) {
            sr=true;
        }

        if (qName.equalsIgnoreCase("sunset")) {
            ss=true;
        }

    }

    public void endElement(String uri, String localName,
        String qName) throws SAXException {

        //System.out.println("End Element :" + qName);

    }

    public void characters(char ch[], int start, int length) throws SAXException         
        {
        if (sr) {
            System.out.println("FSun rise: " + new String(ch, start, length));
            sr = false;
        }

        if (ss) {
            System.out.println("Sun set : " + new String(ch, start, length));
            ss = false;
        }

    }

     };

       saxParser.parse(is, handler);

     } catch (Exception e) {
       e.printStackTrace();
     }

    }
  } 
```

输出日出和日落。相应地修改上述内容以获取其他标签值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T20:16:50.383

虽然它不是解析 XML 代码的“最简单”或“最快”的实现，但我一直更喜欢使用 Android 中的 SAXParser 实用程序。

[tutsplus.com](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/)提供了一个很好的教程，可以逐步分解所有内容

# c# - Windows Store App如何从文件中删除文本

> ID：15710614
> 
> 赞同：0
> 
> 时间：2013-03-29T20:02:22.540
> 
> 标签：c#, windows-store-apps, storagefile

在 Windows 商店应用程序中，如何从文件中删除文本？例如

如果我有

```
StorageFile file = await roamingfolder.CreateFileAsync(filename,
    CreationCollisionOption.OpenIfExists);
await FileIO.AppendTextAsync(file, temp); 
```

我怎样才能从这个文件中删除一些文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:04:15.953

您通常将文本读入字符串，删除文本，然后重写文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T05:22:28.953

在这里我得到一个文件，然后我把内容放到一个字符串生成器中，然后做一些字符串操作，最后使用 DataWriter 把字符串放回文件

```
public static async Task UpdateTextContent(string contentItemId)
        {
            var storageFolder = await ApplicationData.Current.LocalFolder.GetFolderAsync(TARGET_FOLDER);
            StorageFile sf = null;
            try
            {
                //get content of the file make sure that it exist
                sf = await storageFolder.GetFileAsync(TARGET_FILE);
            }
            catch (Exception ex)
            {

            }

            if (sf != null)
            {
                var targettxtfile = await Windows.Storage.FileIO.ReadTextAsync(sf);

                var sbProcessedTextToWrite = new StringBuilder(targettxtfile);

                if (targettxtfile.IndexOf(contentItemId) >= 0)
                {
                    string startmarker = new StringBuilder("[").Append(contentItemId).Append("#start]").ToString();
                    string endmarker = new StringBuilder("[").Append(contentItemId).Append("#end]").ToString();

                    int start = sbProcessedTextToWrite.ToString().IndexOf(startmarker);
                    int end = sbProcessedTextToWrite.ToString().IndexOf(endmarker);

                    int slen = end + endmarker.Length - start; 

                    //compute position to remove
                    sbProcessedTextToWrite.Remove(start, slen);
                }

                using (IRandomAccessStream fileStream = await sf.OpenAsync(FileAccessMode.ReadWrite))
                {
                    using (IOutputStream outputStream = fileStream.GetOutputStreamAt(0))
                    {
                        using (DataWriter dataWriter = new DataWriter(outputStream))
                        {

                            dataWriter.WriteString(sbProcessedTextToWrite.ToString());                            

                            await dataWriter.StoreAsync();

                            // For the in-memory stream implementation we are using, the flushAsync call 
                            // is superfluous,but other types of streams may require it.
                            await dataWriter.FlushAsync();

                            // In order to prolong the lifetime of the stream, detach it from the 
                            // DataWriter so that it will not be closed when Dispose() is called on 
                            // dataWriter. Were we to fail to detach the stream, the call to 
                            // dataWriter.Dispose() would close the underlying stream, preventing 
                            // its subsequent use by the DataReader below.
                            dataWriter.DetachStream();
                        }

                        //same here flush the outputStream as well
                        await outputStream.FlushAsync();
                    }
                }
            }

        } 
```

[此代码的一些参考](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datawriter.aspx)

# php - PDO 在非对象上调用成员函数 fetchAll()

> ID：15710620
> 
> 赞同：0
> 
> 时间：2013-03-29T20:02:42.917
> 
> 标签：php, mysql, pdo

我已经搜索过，但没有发现任何东西对我的代码有帮助：

```
function getData($con, $table) {
    $stmt = $con->query('SELECT * FROM ' . $table);
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
}

function getDataByUsername($con, $table, $username) {
    $stmt = $con->query('SELECT * FROM ' . $table . ' WHERE `username` = "' .     $username . '";');
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
} 
```

getData 函数工作得很好，但是当我使用 getDataByUsername 时，我得到了这个错误：

```
Fatal error: Call to a member function fetchAll() on a non-object in     /home/moe/www/status/inc/functions.php on line 12 
```

第 12 行是这一行：

```
return $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

谢谢你的帮助，莫罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:25:54.663

既然是[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")，为什么不绑定变量呢？

```
function getDataByUsername($con, $table, $username) {
    $stmt = $con->prepare('SELECT * FROM ' . $table . ' WHERE `username` = ?');
    $stmt->execute( array($username) );
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:18:56.150

改变

```
$con->query('SELECT * FROM ' . $table . ' WHERE `username` = "' .     $username . '";'); 
```

至

```
$con->query("SELECT * FROM `" . $table . "` WHERE `username` = `" .     $username . `";"); 
```

额外的字符称为“tick”，可以在 TAB 键上方找到。

更好的：

```
$con->query("SELECT * FROM {$table} WHERE `username` = {$username};"); 
```

最后没有测试，但您可以通过这种方式使用内联变量。

当然要注意@Jon 的言论。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-29T20:07:39.883

问题是：性格；删除它，这是解决方案

喜欢 ：

```
$stmt = $con->query('SELECT * FROM ' . $table . ' WHERE `username` = "' .     $username . '"'); 
```

# c++ - 我的应用程序：标签显示一个值，当我按下按钮时应该增加或减少

> ID：15710625
> 
> 赞同：0
> 
> 时间：2013-03-29T20:03:06.263
> 
> 标签：c++, gtk

我创建了一个包含 4 个标签的应用程序。我想更改两个标签（“wynik”和“wynik1”）的值。当我按下键盘上的左键时，“wynik”标签的值应该增加，当我按下键时减少。当我按下右键时，“wynik1”标签的值应该增加，当我按下键时减少。我的代码：

```
 #include <gtk/gtk.h>
    #include <gdk/gdkkeysyms.h>

    gint count = 0;
    char buf[0];
    char buf1[0];

    gboolean
    on_key_press (GtkWidget *widget, GdkEventKey *event, gpointer wynik);
    gboolean
    on_key_press1 (GtkWidget *widget, GdkEventKey *event, gpointer wynik);

    int main( int argc, char * argv[] ) {
        GtkWidget * okno;
        GtkWidget * kontener;
        GtkWidget * etykieta;
        GtkWidget * etykieta1;
        GtkWidget * wynik;
        GtkWidget * wynik1;

        gtk_init( & argc, & argv );

        okno = gtk_window_new( GTK_WINDOW_TOPLEVEL );
        gtk_window_set_keep_above(GTK_WINDOW(okno), TRUE);
        gtk_window_set_default_size( GTK_WINDOW( okno ), 300, 200 );
        gtk_window_set_position( GTK_WINDOW( okno ), GTK_WIN_POS_CENTER );

        kontener = gtk_fixed_new();
        gtk_container_add( GTK_CONTAINER( okno ), kontener );

        char * str = " <span fgcolor='#007560'><span font='20'><b>PIA</b></span></span>";
        etykieta = gtk_label_new( NULL );
        gtk_label_set_markup( GTK_LABEL( etykieta ), str );
        gtk_fixed_put( GTK_FIXED( kontener ), etykieta, 0, 0 );

        char * str1 = " <span fgcolor='#9a1262'><span font='20'><b>PER</b></span></span>";
        etykieta1 = gtk_label_new( NULL );
        gtk_label_set_markup( GTK_LABEL( etykieta1 ), str1 );
        gtk_fixed_put( GTK_FIXED( kontener ), etykieta1, 65, 0 );

        char * wyn = " <span fgcolor='#007560'><span font='26'><b>0</b></span></span>";
        wynik = gtk_label_new( NULL );
        gtk_label_set_markup( GTK_LABEL( wynik ), wyn );
        gtk_fixed_put( GTK_FIXED( kontener ), wynik, 3, 30 );

        char * wyn1 = " <span fgcolor='#9a1262'><span font='26'><b>0</b></span></span>";
        wynik1 = gtk_label_new( NULL );
        gtk_label_set_markup( GTK_LABEL( wynik1 ), wyn1 );
        gtk_fixed_put( GTK_FIXED( kontener ), wynik1, 68, 30 );

        g_signal_connect( G_OBJECT( okno ), "destroy", G_CALLBACK( gtk_main_quit ), NULL );
        g_signal_connect (G_OBJECT (okno), "key_press_event", G_CALLBACK (on_key_press), wynik);
        g_signal_connect (G_OBJECT (okno), "key_press_event", G_CALLBACK (on_key_press1), wynik1);
        gtk_widget_show_all( okno );
        gtk_main();

        return 0;
    }

    gboolean
    on_key_press (GtkWidget *widget, GdkEventKey *event, gpointer wynik)
    {
    switch (event->keyval)
      {case GDK_S:
        case GDK_Left:
            count++;
            std::ostringstream os;
            os << "<span font='26'><b>" << count << "</b></span>";
            gtk_label_set_markup( GTK_LABEL( wynik ), os.str().c_str() );
          break;
        case GDK_Down:
            count--;
            std::ostringstream os;
            os << "<span font='26'><b>" << count << "</b></span>";
            gtk_label_set_markup( GTK_LABEL( wynik ), os.str().c_str() );
          break;

        default:
          return FALSE;
      }    
      return FALSE;
    }

 gboolean
    on_key_press1 (GtkWidget *widget, GdkEventKey *event, gpointer wynik1)
    {
    switch (event->keyval)
      {case GDK_S:  // add this line
        case GDK_Right:
            count++;
            std::ostringstream os1;
            os1 << "<span font='26'><b>" << count << "</b></span>";
            gtk_label_set_markup( GTK_LABEL( wynik1 ), os1.str().c_str() );
          break;
        case GDK_Up:
            count--;
            std::ostringstream os1;
            os1 << "<span font='26'><b>" << count << "</b></span>";
            gtk_label_set_markup( GTK_LABEL( wynik1 ), os1.str().c_str() );
          break;

        default:
          return FALSE;
      }    
      return FALSE;
    } 
```

不幸的是我收到错误：

> ```
> > ||=== nowygt3, Debug ===| F:\c++\nowygt3\main.c||In function
> > 'on_key_press':| F:\c++\nowygt3\main.c|67|error: expected expression
> > before ':' token| F:\c++\nowygt3\main.c|68|error: 'os' undeclared
> > (first use in this function)| F:\c++\nowygt3\main.c|68|note: each
> > undeclared identifier is reported only once for each function it
> > appears in| F:\c++\nowygt3\main.c|73|error: duplicate label 'std'|
> > F:\c++\nowygt3\main.c|67|note: previous definition of 'std' was here|
> > F:\c++\nowygt3\main.c|73|error: expected expression before ':' token|
> > F:\c++\nowygt3\main.c|67|warning: label 'std' defined but not used
> > [-Wunused-label]| F:\c++\nowygt3\main.c||In function 'on_key_press1':|
> > F:\c++\nowygt3\main.c|91|error: expected expression before ':' token|
> > F:\c++\nowygt3\main.c|92|error: 'os1' undeclared (first use in this
> > function)| F:\c++\nowygt3\main.c|97|error: duplicate label 'std'|
> > F:\c++\nowygt3\main.c|91|note: previous definition of 'std' was here|
> > F:\c++\nowygt3\main.c|97|error: expected expression before ':' token|
> > F:\c++\nowygt3\main.c|91|warning: label 'std' defined but not used
> > [-Wunused-label]| 
> ```

请帮我。我真的是初学者，但我尝试自己做所有事情，现在我没有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:06:52.173

似乎在抱怨 `std::ostringstream os1;`

你有`#include <iostream>`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:09:01.183

`case`要在特定的`switch`语句中创建具有自动存储持续时间的对象：

```
case GDK_S:
case GDK_Left:
    std::ostringstream os;
    ...
    break; 
```

您应该定义范围，其生命周期`os`将与：

```
case GDK_S:
case GDK_Left:
{
    std::ostringstream os;
    ...
    break;
} 
```

除此之外，您还`#include <sstream>`应该能够使用[`std::ostringstream`](http://www.cplusplus.com/reference/sstream/ostringstream/).

# ios - 动态创建一些滑块/滑块不移动

> ID：15710626
> 
> 赞同：-4
> 
> 时间：2013-03-29T20:03:22.560
> 
> 标签：ios, objective-c

我想动态创建一些滑块

使用我的 IBAction create1Slider，我可以移动我的滑块

***使用我的 IBAction create10Sliders，我无法移动我的滑块***

怎么了？

```
- (IBAction) create1Slider:(id)sender {
    UISlider *slider = [[[UISlider alloc] initWithFrame:CGRectMake(150, 150, 100, 100)] autorelease];
    slider.minimumValue = 1;
    slider.maximumValue = 255;
    slider.continuous = YES;
    [self.view addSubview:slider];
    } 
```

///////////////////////

```
- (IBAction) create10Sliders:(id)sender {
for(int i=0; i< 10
; i++)
{

    UISlider *slider = [[[UISlider alloc] initWithFrame:CGRectMake(50, 50, 100, 100+i*80)] autorelease];
    forControlEvents:UIControlEventValueChanged];
    slider.minimumValue = 1;
    slider.maximumValue = 255;
    slider.continuous = YES;
    [self.view addSubview:slider];
    //[slider release];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:07:55.797

**由于 creatin 在相同的坐标上，您最终创建了所有相互放置的十个滑块**。

```
UISlider *slider = [[[UISlider alloc] initWithFrame:CGRectMake(50, 50, 100, 100+i*80)] autorelease]; 
```

你保持`x`和`y`50 和 50 相同。和`height`100 一样，改变`width`了 100+i*80。

作为：

```
CGRectMake(x, y, width, height) 
```

`y`如果您希望它们垂直放置，则需要进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:08:06.847

问题是所有 10 个滑块都在同一原点 (50,50) 处相互重叠创建。您需要它们的原点（尤其是 y 值）不同。

您看不到这一事实的原因是滑块的大部分背景都是透明的。所以你有这些巨大的增加的矩形重叠，最大的覆盖了所有其他的；但你*看到*的只是轨道和拇指。为了可视化问题，给每个滑块一个背景颜色。那么问题就很明显了。

# ruby-on-rails - 我如何重写这条路线更短？

> ID：15710628
> 
> 赞同：0
> 
> 时间：2013-03-29T20:03:30.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我`resources :tags`在我的`routes.rb`.

所以当我去的时候`/tags/ios`，它向我展示了正确的`Tag#Show`观点。

我想要发生的是当用户转到`/tags/ios`它时将其显示为`/ios`，同样我希望生成的路径始终是`/ios`（而不是领先的`/tags`）。

这是我如何在`each`块中呈现该链接的示例：

```
<%= link_to "#{tag.name}", url_for(tag) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:08:22.220

那么这里的问题是命名空间

如果你定义一个像

得到 "/(:slug)" => "标签#show"

这将基本上匹配任何其有效标签与否的东西。我会这样做的方式是

在您的路线文件中：

```
 begin  
    Tag.all.each do |t|
      begin
        get "#{t.slug}" => "Tags#show"
      rescue
      end
    end
  rescue
  end 
```

然后在您的标签控制器中，您可以

```
 def show
    slug = request.env['PATH_INFO']
    @tag = Tag.find_by_slug(slug)
  end 
```

我的答案来自我写的另一个答案，您可能会感兴趣[How to create app-wide slug routing for Rails app?](https://stackoverflow.com/questions/15375222/how-to-create-app-wide-slug-routing-for-rails-app/15394197#15394197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:11:10.757

在你的 routes.rb

```
resources :tags
match '/:tag_name' => 'tags#show' 
```

然后在您的 tags_controller#show 操作中，您可以通过以下方式访问标签名称：

```
params[:tag_name] 
```

请务必将其放在您的路线文件的末尾，因为它会捕获所有内容。此外，由于它会捕获所有内容，因此如果它不是有效的标签名称，您应该呈现 404：

```
def show
    unless @tag = Tag.where(name: params[:tag_name]).first
        raise ActionController::RoutingError.new('Not Found')
    end
end 
```

要将 /tags/ruby 重定向到 /ruby：

```
match "/tags/:tag_name" => redirect("/%{tag_name}") 
```

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:51:43.413

所以即使我从这些人那里得到了很多很好的建议，我还是找到了我认为对我来说最好的解决方案。

我所要做的基本上就是在所有标签的链接上的实际 URL 和 URL 栏中都`/tags/ruby`呈现为。`/ruby`

我不想做任何会增加我的应用程序负载的事情。

这是对我有用的解决方案：

```
resources :tags, path: "", except: [:index, :new, :create] 
```

使用`path:`，您可以指定要显示的路径。即你想在你的资源之前出现什么。因此，如果您希望您的 URL 看起来像`myhotness/tags/ruby`，那么您只需这样做`path: "myhotness"`。

我不想在我的路上有任何东西，所以我把它留空了。

对于它的价值，您甚至可以向该路线添加约束，如下所示：

```
resources :tags, path: "", except: [:index, :new, :create], constraints: { :id => /.*/ } 
```

# wso2 - WSO2 更改治理注册表项目的 ServerRole

> ID：15710630
> 
> 赞同：0
> 
> 时间：2013-03-29T20:03:42.423
> 
> 标签：wso2, wso2carbon

我想部署一个具有 Governance Registry 项目的汽车文件。根据 WSO2 文档，我需要编辑 carbon.xml（在 下添加角色治理注册表）。

carbon server 4.6.0 默认有 EnterpriseServiceBus 所以默认我的 carbon server 充当 ESB。

将我的治理注册表项目转换为 ESB 项目并部署汽车文件是一种好习惯吗？或者在 carbon.xml 下添加角色治理注册表并部署具有治理注册表项目的汽车？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:43:49.700

首先，您无需修改​​ carbon.xml 并将 G-Reg Server 角色添加到 ESB 服务器即可部署您使用 Developer Studio 创建的 Registry Resource。

您所要做的就是更改 C-App 注册表资源工件的服务器角色以匹配您的 Carbon 服务器，在本例中为 ESB。

要更改注册表资源工件的服务器角色，请按照以下步骤操作。

1.  使用“Carbon Application Pom Editor”打开 C-App 项目的 pom.xml 文件（如果您尚未在 Eclipse 中安装 Eclipse M2E，pom.xml 将默认使用该编辑器打开。否则使用“打开方式”选项并选择“Carbon Application Pom Editor”。

2.  您将在此编辑器的工作区中看到一组 C-App 工件，并且您将在编辑器中看到服务器角色字段。

3.  展开 Registry Resource Editor 的名称并单击 Server Role 中的下拉列表并从列表中选择 EnterpriseServiceBus。

4.  保存编辑器并导出 C-App 并生成 CAR 文件。

回答您的疑问：

问：将我的治理注册表项目转换为 ESB 项目并部署汽车文件是一种好习惯吗？

答：您无法将注册表资源项目转换为 ESB 配置项目，因为您无法在 ESB 项目中创建注册表资源。

Q. 在 carbon.xml 下添加 Role Governance Registry 并部署具有治理注册表项目的汽车？

Ans：您不必像我之前解释的那样使用 carbon.xml 更改 Carbon Server 的 Server 角色，您可以更改 C-App 工件的 Server Role。

但是，仅建议将 C-App 工件的服务器角色更改为您的服务器的服务器角色用于注册表资源，因为每个 Carbon 服务器都有一个注册表，您可以在其中部署注册表资源。

/哈莎娜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:41:55.187

您可以在自己的碳应用程序中更改它。在 Carbon 应用程序中打开它的 pom，你可以看到属性定义了这样的东西。

```
<com.example.reg-resource-proj.resource:exception_msg:1.0.0>capp/EnterpriseServiceBus</com.example.reg-resource-proj.resource:exception_msg:1.0.0> 
```

因此将 capp/GovernanceRegistry 更改为 capp/EnterpriseBus。

或者使用 Carbon Application Pom 编辑器打开同一个 pom 并更改列在依赖项下的工件的服务器角色。因此该工件将被部署到 ESB，因为它的服务器角色是企业服务总线。

您不必更改服务器的服务器角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T14:50:31.597

我们正在以持续交付模式（使用 CruiseControl）构建我们的 CAR，我们希望能够将相同的 CAR 部署到具有嵌入式注册表的 ESB 容器中以进行 DEV 测试，以及部署到具有远程 GReg 的 ESB 中以用于 PROD 环境。考虑到这一点，在 CAR 中更改 C-App 注册表资源工件的服务器角色以匹配 Carbon Server 的方法对我们不起作用。我们最终将治理注册表角色添加到 DEV 环境中的 ESB（具有嵌入式注册表的那个）并且它可以工作。

# javascript - 无需重新加载即可更改地址栏中的 URL

> ID：15710637
> 
> 赞同：5
> 
> 时间：2013-03-29T20:04:14.237
> 
> 标签：javascript

我发现了很多关于更改网址（无需重新加载）的问题。一些答案是 - 使用插件，使用`location.hash`...，或重新加载

但他们都没有为我工作。

在网站上我有一个下拉菜单，并且在其更改时 url 参数应该已更改。

所以我想做的是：

我想改变：`www.foo.com?country=Germany`变成 `www.foo.com?country=Slovenia`不重新加载。

我正在努力实现的目标是可能的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:09:28.920

您可以在较新的浏览器中；在旧版本中，您只能更改哈希值。这似乎是一篇关于该主题的好文章：http: [//html5doctor.com/history-api/](http://html5doctor.com/history-api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:47:38.783

What you are looking for is the `History` API HTML5 provides. It comes with functionality like `history.pushState(...)`, `history.popState(...)`, which lets you dynamically change the URL without having to assign a new URL altogether.

It is used by many sites, including, I suspect, Facebook itself, where if you open a chat box, and navigate between pages, the chat box doesn't reload. It means that all new content are being fetched through Ajax, but then the URL won't change, would it? But it does. I think they do it through `history.pushState(...)`, where you just push a new state into the History stack, and it changes only a certain part of the page. You will find an excellent tutorial [here](http://dev.opera.com/articles/view/introducing-the-html5-history-api/).

# sql - 如何将变量或函数放在 ERROR_LOG 表 ORACLE 的 ORA_ERR_TAG$ 列中

> ID：15710639
> 
> 赞同：1
> 
> 时间：2013-03-29T20:04:24.393
> 
> 标签：sql, database, oracle, plsql

我在下面有一小段代码..我无法插入 error_log 表 ORA_ERR_TAG$ 列。如果我删除变量 v_errblk 那么它工作正常。如何实现标签中的变量信息。

```
 Declare
     v_errblk NUMBER (2):= 0;
    BEGIN
    v_errblk := 1;
    update....;
    Commit;
    v_errblk := 2;
    update ....
    commit;
    v_errblk = 3;
    insert into test3
    Select * FROM   test1
      WHERE  EXISTS (SELECT 1 FROM   test2 WHERE  test1.Abc = test2.abc)
     LOG ERRORS ('ERROR BETWEEN BLOCK:' || v_errblk || 'AND' || v_errblk + 1||'') REJECT LIMIT UNLIMITED;

    END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:27:49.720

在`v_errblk + 1`这里伤害你。我最初认为这是`LOG ERRORS`表达式的限制，但是如果您尝试像这样简单的事情，它将失败并显示`ORA-01722: invalid number`：

```
select '1 + 2 = ' || 1 + 2 from dual 
```

尝试将括号括起来`v_errblk + 1`：

```
LOG ERRORS ('ERROR BETWEEN BLOCK:' || v_errblk || 'AND' || (v_errblk + 1)) 
```

另外，我会摆脱尾随的`|| ''`. 这不是必需的。

# jquery - jQuery Mobile 获取打开 Popup 的按钮

> ID：15710642
> 
> 赞同：5
> 
> 时间：2013-03-29T20:04:43.433
> 
> 标签：jquery, jquery-mobile

我有一个列表视图，当我单击列表视图中的链接时，它会启动一个弹出窗口。为简化起见，我省略了列表视图，并从一个按钮开始。

我想从导致弹出窗口显示的按钮中检索属性，在我的示例中，属性名为`customAttr`. 然后我想将值插入到`popupBasic`.

这是我非常基本的示例 jQuery Mobile 代码：

```
<a href="#popupBasic" data-rel="popup" customAttr="value">Basic Popup</a>

<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.</p>
</div> 
```

jsFiddle：http: [//jsfiddle.net/cPRCU/2/](http://jsfiddle.net/cPRCU/2/)

通常，当我使用 jQuery（非移动设备）时，我会更多地参与单击事件/打开弹出窗口/对话框。我希望能够阅读导致弹出窗口显示的按钮，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:31:20.423

向按钮添加点击处理程序似乎有效。在此处理程序中，在弹出窗口显示之前对其进行修改：

```
$('a[data-rel="popup"]').click(function () {
    var link = $(this);
    var data = link.attr('customAttr')
    var popup = $(link.attr('href')); // assume href attr has form "#id"
    popup.append(($('<p />').text(data)));
}); 
```

这是一个通用处理程序，它支持具有多个按钮/弹出窗口的页面。如果某些按钮不应该有这种行为，我会为所需的按钮添加一个类，并使`a[data-rel="popup"]`选择器更具体。

见小提琴：http: [//jsfiddle.net/cPRCU/3/](http://jsfiddle.net/cPRCU/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T20:31:36.627

我是在列表视图本身上做的，因为它对你更有用。

## 对于列表视图

您必须`<a>`首先在列表视图中为标签注册一个点击事件，如下所示。

```
$('#mylist a').bind('click', function(event){
}); 
```

同时，确保将数据存储在锚标记内，如下所示。 `data-customattr`这里的一切都很小。

例如

```
<a href="#popupBasic" data-rel="popup" data-customattr="value2" >Basic Popup 2</a> 
```

现在您可以读取`data-customattr`点击事件内部的值，如下所示

```
$(this).data('customattr') 
```

现在我假设您`<p>`在弹出窗口中有一个标签的 id。如下所示

```
 <p id="mypopup">This is a completely basic popup, no options set.</p> 
```

使用 ID，您可以替换弹出窗口的内容。

最后把所有的东西放在一起，如下所示

```
$('#mylist a').bind('click', function(event){
    console.log($(this).text());
   $('#mypopup').html($(this).data('customattr'));
}); 
```

查看此`***[live fiddle](http://jsfiddle.net/gFTzt/5/)***`工作示例[http://jsfiddle.net/gFTzt/5/](http://jsfiddle.net/gFTzt/5/)

## 对于一个按钮

如果您坚持使用按钮的示例，请声明一个 ID 如下的按钮

```
<a href="#popupBasic" data-rel="popup" id="mybutton" data-role="button" data-customattr="button value">button example</a> 
```

如上所述，注册一个点击事件并读取该`customattr`值。

```
 $('#mybutton').bind('click',function(){
        alert($(this).data('customattr'));
 }); 
```

查看`***[live fiddle](http://jsfiddle.net/gFTzt/5/)***`按钮和列表视图的此示例[http://jsfiddle.net/gFTzt/5/](http://jsfiddle.net/gFTzt/5/)

## 使用 .attr()

在这里，我使用`data`来获取值。如果没有 data 属性，我们可以直接从锚标签中获取值，如下所示。

例如，我们有一个锚标记，如下所示。

```
<a href="#popupBasic" customattr="value1">Basic Popup 1</a> 
```

我们可以阅读`value1`使用`.attr()`如下。

```
$(this).attr('customattr') 
```

Here is a `**[Live fiddle](http://jsfiddle.net/mayooresan/wWmLc/)**` example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T21:03:40.327

I was having a problem getting popups to work but I finally realized that the popup div needs to be inside the page. My popup was a sibling to the page where the popup link was and was not showing up until I moved it in to be a sibling of the link and child of the page.

# c++ - 懒惰的程序员将 vbscript/hta 文件包装在独立的静态链接 c++ exe 中的方法

> ID：15710643
> 
> 赞同：0
> 
> 时间：2013-03-29T20:05:09.020
> 
> 标签：c++

我有一些我将在线分发的 vbscript/javascript html 应用程序（仅适用于 Windows）。只是小应用程序，没有什么花哨的。

我的主要经验在于 .net 和 java。我真的希望应用程序是**独立**的，不需要安装，并且所有内容都在一个文件中。但是不让我的用户能够看到代码也很重要，这不适用于基于 vbscript 的 hta

虽然我*可以*花一些时间在 c++ 中完成这一切，然后静态链接以创建一个独立且快乐的 .exe 文件，但我将不得不花费大量时间来提高我的 c++ 技能，这是中级技能。

我可以“作弊”并且仍然在 vbscript/javascript 中编写整个应用程序，但在 c++ 中执行类似的操作（下面的伪代码）

```
#include headerfiles etc
read the vbscript code stored in a variable perhaps?
create a .hta file, put the code in that and run it in Internet explorer
get window handle for internet explorer ,
disable right click( to hide view source option) 
```

然后编译这个 c++ 文件并静态链接它并分发我超酷的独立 .exe 文件。

这是一种天真的方法吗？是否有意义？是的，我*可以*学习 c++，但如果这样做，我可以继续专注于我的 .net 应用程序，这是我的主要生计。我可以简单地使用 Html 来做我的用户界面，而不是使用 QT 之类的东西。隐藏来源会很好，但它不是超级必要或破坏交易，因为该应用程序无论如何都不是商业的。我的观点是，这种方法有严重的缺点吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:28:30.417

You're effectively trying to wrap the VBScript/JavaScript code in a native executable that would output the script to a file and then run it. This wouldn't prevent reverse engineering *at all* - it would only be a very slight hindrance to someone who wants to see your code.

If you reprogrammed your application in C++ completely, it would be somewhat more difficult to construct the source code that is equivalent to the original. However, hiding the source code *completely* is not possible: if it can be executed by the processor, it can also be reverse engineered.

# javascript - 检测操作系统（XP vs 7）

> ID：15710646
> 
> 赞同：2
> 
> 时间：2013-03-29T20:05:27.300
> 
> 标签：javascript, google-chrome, firefox, operating-system

是的，我听说过一百万次没有理由想要检测操作系统，但是在 Windows XP 和 Windows 7 上完全相同的浏览器版本之间，我在 Firefox 和 Chrome 上的行为有所不同。我已经搜索了互联网并没有发现除了检测它是否是 Windows 之外什么都做不了。

我也找不到任何有关 XP/7 版本的浏览器之间是否存在功能差异的信息。任何帮助将不胜感激，因为我真的对此束手无策。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:08:28.433

您可以使用`navigator.userAgent`. 在 XP 中`5.1`，它包含在 Vista`6.0`和 Windows 7`6.1`中，您可以在此处看到[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724834(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724834(v=vs.85).aspx)。

```
var ua = navigator.userAgent.toLowerCase();
var isWinXP = ua.indexOf('windows nt 5.1') > 0; 
```

# c# - 如何从 Windows 应用程序中处理 CAPTCHA 挑战？

> ID：15710649
> 
> 赞同：1
> 
> 时间：2013-03-29T20:05:35.933
> 
> 标签：c#, html, .net, wpf, captcha

我正在尝试从 C#.NET WPF 应用程序中以编程方式填写 HTML 表单。我在这方面取得了巨大的成功，直到我遇到了其中一种表格所需的验证码挑战。有什么方法可以在应用程序中加载此验证码图像以供用户查看和响应？或者你能想出更好的方法来处理这种情况吗？此类表格的示例可在以下网址获得： [http ://www.medwow.com/sale_offer_mgr.php?actions=sale_form&st=1](http://www.medwow.com/sale_offer_mgr.php?actions=sale_form&st=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:16:26.693

您可以使用 URI 并循环遍历 HTML 元素。查看验证码，元素如下所示：

然后图像将是：87627 ... ![medwow验证码](../Images/d364faac84e2d03bcc21f6f3f39d6225.png)

因此，找到 ID“Captcha_image”，然后找到 src，将源加载到图像框中，类似于这里的内容：http: [//social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/b7336f23-f011 -4469-83f0-5e4e62ce97c1/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/b7336f23-f011-4469-83f0-5e4e62ce97c1/)

无需代码，只需 2 步即可！

# c - 在循环列表中添加节点

> ID：15710650
> 
> 赞同：1
> 
> 时间：2013-03-29T20:05:37.960
> 
> 标签：c, list, nodes, circular-list

我有以下代码：

```
int InsForward (TL2 p, void* x){
 /* Inserta a node a step forward from the supplied p*/
 TL2 h = (TL2)calloc(1,sizeof(TCel2));
 if (!h)
      return 0;
h->pre = p->pre;
h->nxt= p;
p->pre = h;
p->pre->nxt = h;
h->info = x;   
return 1; 
```

}

如何在已分配哨兵的循环列表中添加新节点？它困扰了我好几个小时，因为分配了节点但链接被破坏了，它向我显示了每个相同的数据值，除了哨兵，这很好。

我尝试了什么：

```
 /* TCel a, int p, FILE fi*/
 while(fscanf(fi,"%i%i", &(p.x), &(p.y)) == 2)
  if ( InsForward(a, &p) == 0)   
       break; 
```

结构：

```
 typedef struct cel2
 { 
   struct cel2 *pre, *nxt;  
   void* info;              
 } TCel2, *TL2; 
```

LE：所以我更新了代码，并写了这个来检查它：/* TL2 u*/

```
for (u = a->nxt; u != a; u = u->nxt)
       printf("%i %i\n", u->info, u->info); 
```

是的，信息是无效的，但我很好奇细胞是否不同......我想不是：

```
 2686632 2686632 2686632 2686632 2686632 2686632 
```

这里发生了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:12:56.120

也许我的理解有缺陷，但我认为这应该是：

```
h->pre = p->nxt;
p->nxt = h;
h->nxt = p; 
```

这实质上是一个循环列表。假设 p 是循环列表中的第一个节点，h 是最后一个节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:14:37.347

你的代码应该是

```
int InsForward (TL2 p, void* x){
     /* Inserta a node a step forward from the supplied p*/
     TL2 h = (TL2)calloc(1,sizeof(TCel2));
     if (!h)
        return 0;
    h->pre = p;        //sets h previous to point to p
    h->nxt= p->nxt;    //sets h next to point to where p was pointing ( sentinel )
    p->nxt->prv = h;   //sets the sentinel previous to point to h
    p->nxt = h;        //sets the p next to point to h
    h->info = x;   
return 1; 
```

这会在 p 和哨兵之间插入 h

# c - 尝试使用 fgets() 从文件中读取时出现奇怪的问题

> ID：15710654
> 
> 赞同：0
> 
> 时间：2013-03-29T20:05:49.647
> 
> 标签：c, input, buffer, fgets

我正在尝试从 C 中的文件中读取，`fgets()`但是我遇到了以下问题：

虽然我可以使用以下方法成功打开文件`fopen()`：

```
if ( file=fopen(filename, "r") == NULL )
{
    printf("Couldn't open specified file. Please try again.");
    exit(1);
} 
```

我无法从中读出任何东西。我正在使用以下循环，尽管没有打印任何内容并且执行成功终止。

```
while ( (fgets(inputLine, 1023, file)) != NULL)
{
    printf("Hello world");
} 
```

这与实际的文件名、文件大小或文件内容无关。似乎没有任何工作，并且在调试器中没有任何错误显示。我试过的一个示例文件是以下直接复制粘贴的：

```
test.txt
#include <stdio.h>
int main ()
{
       printf("Hello World");
} 
```

您对为什么会发生这种情况有任何猜测吗？

**注意：**我已经从[这个](https://stackoverflow.com/questions/6255524/help-needed-regarding-the-segmentation-fault-at-the-file-pointer)S'O question 中获取了循环代码，所以我猜它是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:08:38.623

这是不正确的：

```
if ( file=fopen(filename, "r") == NULL ) 
```

尝试：

```
if ( (file=fopen(filename, "r")) == NULL ) 
```

他们编写它的方式相当于`file = 0`（假设文件已成功打开。如果没有，则与 相同`file = 1`）。这不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:11:20.217

除了您在 的条件下犯了一个错误之外，`fopen`片段还存在潜在问题，例如：

```
while ( (fgets(inputLine, 1023, file)) != NULL)
{
    printf("Hello world");
} 
```

默认情况下，标准输出流`stdout`是*line-buffered*。这意味着您应该添加一个`\n`或调用`fflush`来强制数据被有效写入。

```
fflush(stdout); 
```

# javascript - Closure goog.require. Compile error

> ID：15710662
> 
> 赞同：2
> 
> 时间：2013-03-29T20:07:01.583
> 
> 标签：javascript, google-closure-compiler, google-closure-library

I use Google closure library and compiler in my project.

I get strange error on next string:

```
if (!properties.name) {
    throw {message: 'Widget name expected'};
}
properties.name = properties.name.toLowerCase();
goog.require('DOMless.' + properties.parent);

goog.require('DOMless.' + properties.parent);
// ERROR - Syntax error in JS String literal 
```

What is wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:19:06.733

`goog.require` is a specific instruction for the Closure compiler, which will be removed from the script.

As it's not interpreted by the JavaScript engine, I think you simply can't use something's else than a string as argument.

# compilation - 从 CLI 编译非 C/C++ 项目跨平台

> ID：15710666
> 
> 赞同：0
> 
> 时间：2013-03-29T20:07:16.657
> 
> 标签：compilation, makefile, cross-platform, project

假设我们有一个非 C/C++ 语言的项目，由一堆源文件组成。我们如何使用`make`或类似的工具从命令行编译这束？它应该只编译项目目录中的每个源文件并从中创建一个可执行文件。听起来不太难，但我似乎无法找到一个简单的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:11:35.240

您能否更具体地了解您需要编译的语言和平台？

对于不同的语言/平台，编译过程是不同的。例如，你可能不想用`make`Java 来编译一些东西： [为什么没有人使用 make for Java？](https://stackoverflow.com/questions/2209827/why-is-no-one-using-make-for-java) （至少，与 C++ 的方式不同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:54:11.133

`make`s 模式规则相当强大。假设您要构建程序`a`，`b`并且`c`从 C# 源文件`a.cs`，`b.cs`并且`c.cs`，Makefile 看起来像：

```
all : a.exe b.exe c.exe

%.exe : %.cs
     csc.exe /out:$@ $^ 
```

文件中的第一条规则告诉`make`我们要做什么。它是`all`按约定命名的。第二条规则是一个模板，它定义了如何通过调用下一行给出的编译器`.exe`来使以 结尾的文件名具有相同的结尾。`.cs`请记住在最后一行前面放置一个制表符。

`$^`和`$@`是自动变量，分别表示“目标名称”和“所有先决条件”。

# vba - 如何在 Visual Basic 中的数字前使用“0”？

> ID：15710669
> 
> 赞同：0
> 
> 时间：2013-03-29T20:07:34.837
> 
> 标签：vba, vb6

我想像这样在我的程序中打印结果：`06:03`在 Visual Basic 6 中如何在数字前添加**“0”**？

```
m=6
h=3 
print m;" : ";h 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T20:09:46.840

像这样？

你必须使用`Format()`

```
m = 6
h = 3

Debug.Print Format(m, "00"); " : "; Format(h, "00") 
```

**输出**：06：03

# paypal - 简单的支付流程 Paypal

> ID：15710671
> 
> 赞同：0
> 
> 时间：2013-03-29T20:07:38.883
> 
> 标签：paypal, paypal-sandbox, paypal-ipn

我有一个表格，一个团队在其中注册他们的球员，然后被运送到贝宝支付注册费用，然后在一切完成后我收到一个 IPN。我正在做一个类似的表格，发现自从我创建该表格以来，Paypal 发生了很大变化。

还有一种简单的方法可以转移到paypal，用户付款，发送回成功页面吗？

现在似乎我必须使用 SetExpressCheckout 将用户发送到贝宝，然后使用 GetExpressCheckoutDetails 获取付款人详细信息，然后使用 DoExpressCheckoutPayment。我是不是太复杂了？看来我会将注册人弹跳到一堆不必要的页面只是为了获得单个项目的付款。执行此操作的最简单方法是什么，并且仍然可以将 ipn 插入到我的数据库中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:30:33.210

那么 EC 是首选选项，因为它对商家来说更容易，但您也可以使用 PayPal Standard。PayPal 标准可以简单地实现为一个按钮。它非常简单，但它不使用 API 调用；它只是简单地将表单数据发布到 PayPal，然后 PayPal 以 IPN 的形式向您发送付款确认。客户也不会“被迫”返回您的网站。

[https://www.x.com/developers/paypal/products/paypal-payments-standard](https://www.x.com/developers/paypal/products/paypal-payments-standard)

# performance - 导入 R 绘图时 Inkscape 太慢

> ID：15710673
> 
> 赞同：3
> 
> 时间：2013-03-29T20:07:45.270
> 
> 标签：performance, r, inkscape

我正在尝试导入 R 图以在 inkscape 中进行编辑（尝试过 bot svg 和 pdf）。一旦我这样做，inkscape 就会变得太慢。这个问题有什么解决办法吗？我试图通过 PATH/simplify 简化路径，但没有显着改善谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:25:08.213

不幸的是，可能不是。我的猜测是您正在尝试使用许多数据点编辑 R 图，然后将其转换为 Inkscape 中的许多 SVG 元素。

Inkscape 可以很好地处理相对较小到中等复杂/涉及的图形，但是一旦将许多 SVG 元素渲染到画布上，即使每个元素都很小，也会消耗大量 RAM。

您可以尝试几件事：（a）尝试在具有大量 RAM 的更强大的计算机上打开 Inkscape；(b) 看看您是否可以创建一个传达相同含义但数据点/元素较少的 R 图；(c) 尝试在网上搜索以找到非官方的 64 位版本的 Inkscape。或者，如果编辑绘图是一次性的，请考虑试用 Adob​​e Illustrator 64 位并以这种方式创建 SVG 绘图。

抱歉，我无法提供更多帮助。

# python - 在导入文件中使用主文件中的函数

> ID：15710674
> 
> 赞同：0
> 
> 时间：2013-03-29T20:07:51.613
> 
> 标签：python, twisted

我正在尝试构建一些 python 脚本。我在我的主脚本（start.py）中导入了（import Handler）一组函数。在 start.py 中，我调用其中一个导入的函数来从 config (dir1) 动态导入脚本。我需要在从配置导入的文件之一中使用 1 个函数（消息（自我，文本）在 MyScript（协议）类中我的主脚本 start.py 中的内容）。所以我的目录结构是：

```
MainDir
  start.py (main script)
  Handler.py
  config.cfg
  dir1 (dir with plugins)
    HelloWorld.py (this needs to use function from start.py) 
```

你能帮我吗？谢谢你。编辑： Start.py 是 Twisted TCP 服务器，我需要在我的插件中使用一些扭曲的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:39:26.227

这里还有几个选项：

1.  将函数作为参数传递给调用它的代码（如果您需要该代码在不同的情况下调用不同的函数，这可能是合适的）。
2.  使用 python 的 -m 选项将 start.py 作为常规模块加载（即 python -m start）。然后你可以像任何其他 python 模块一样导入 start 并引用它的消息函数。

# java - 无法在我的 java 示例中加载照片

> ID：15710682
> 
> 赞同：0
> 
> 时间：2013-03-29T20:08:29.423
> 
> 标签：java, eclipse, swing, nullpointerexception, imageicon

我正在尝试执行此示例 [http://zetcode.com/tutorials/javagamestutorial/movingsprites/](http://zetcode.com/tutorials/javagamestutorial/movingsprites/) 但我收到这些错误

```
Exception in thread "main" java.lang.NullPointerException
at javax.swing.ImageIcon.<init>(Unknown Source)
at rtype.Craft.<init>(Craft.java:19)
at rtype.board.<init>(board.java:28)
at rtype.Rtype.<init>(Rtype.java:9)
at rtype.Rtype.main(Rtype.java:20) 
```

我曾尝试将我的图像放在项目文件中的各个位置，甚至编写绝对路径。

我做错了什么？我使用日食。

编辑：对不起，这是代码

```
private String craft = "craft.png";

private int dx;
private int dy;
private int x;
private int y;
private Image image;

public Craft() {
    ImageIcon ii = new ImageIcon(this.getClass().getResource("C:\\Users\\Name\\workspace\\Craft\\src\\resource\\craft.png"));
    image = ii.getImage();
    x = 40;
    y = 60;
} 
```

以上是我目前的尝试，而示例表明：

```
ImageIcon ii = new ImageIcon(this.getClass().getResource(craft)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:16:04.507

构造函数抛出异常`ImageIcon`。从示例中看，这个[构造函数](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.net.URL%29)`ImageIcon`初始化为：`URL`

```
String craft = "craft.png";
...
ImageIcon ii = new ImageIcon(this.getClass().getResource(craft)); 
```

原因可能是由于您的工作区中缺少文件“craft.png”。确保加载器可以找到指定的文件并且`this.getClass().getResource(craft)`不为空。

See [Loading Images Using getResource](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource) tutorial for details and some examples how to add and load images and other resources.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:24:58.323

`this.getClass().getResource` is mainly used if you run code from jar file and you need to load resources that are also inside jar.

In your case you should probably just load it as

```
ImageIcon ii = new ImageIcon("C:/Users/Name/workspace/Craft/src/resource/craft.png");
image = ii.getImage(); 
```

or maybe even

```
ImageIcon ii = new ImageIcon("craft.png");
image = ii.getImage(); 
```

if your image is inside of your project.

# php - 将匿名 PHP 函数转换为使用 PHP < 5.3

> ID：15710686
> 
> 赞同：-2
> 
> 时间：2013-03-29T20:08:39.383
> 
> 标签：php

我很难将这个 PHP 5.3 引入的匿名函数转换为与早期版本的 PHP 一起使用。

我得到的错误是： Unexpected T_FUNCTION 并且在 $testResult 上。这是匿名函数。任何人都可以将其转换为使用早期版本的 PHP。代码在一个类中。

这是代码：

```
abstract class geocoder {
    public $ch = null;
    public $xd = null;
    public $xp = null;

    public function __construct() {
        $this->ch = curl_init();
        curl_setopt_array($this->ch, array (
            CURLOPT_BINARYTRANSFER => true,
            #CURLOPT_FAILONERROR => true,
            CURLOPT_FOLLOWLOCATION => false,
            #CURLOPT_FORBID_REUSE => true,
            #CURLOPT_MUTE => true,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_TIMEOUT => 2,
            #CURLOPT_COOKIEJAR => '/dev/null',
            #CURLOPT_COOKIEFILE => '/dev/null',
            #CURLOPT_INTERFACE => 'x.x.x.x',
            CURLOPT_USERAGENT => 'curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5',
            CURLOPT_HEADER => false));
    }

    public function doreq($u) {
        curl_setopt($this->ch, CURLOPT_URL, $u);
        return curl_exec($this->ch);
    }

    abstract public function dogeocode($q);
}

class geocodeGMaps extends geocoder {
    public function __construct() {
        parent::__construct();
        #$this->xd = new DOMDocument();
        #$this->xp = new DOMXpath($this->xd);
    }

    public function testResult(&$res) {
            switch (true) {
                case !$res:
                    return 'Remote call HTTP request failed';
                case !($res = @json_decode($res, true)):
                    return 'Failed to parse JSON result';
                case !isset($res['status']):
                    return 'Remote call returned NULL status';
                case !($res['status'] == 'OK'):
                    return 'Remote call returned !OK status';
                case !isset($res['results']):
                case !isset($res['results'][0]):
                    return 'NULL or empty result set';
                case !isset($res['results'][0]['geometry']['location_type']):
                    return 'NULL location type';
                case !($res['results'][0]['geometry']['location_type'] == 'ROOFTOP'):
                    return '';
                case !isset($res['results'][0]['geometry']['location']):
                case !isset($res['results'][0]['geometry']['location']['lat']):
                case !isset($res['results'][0]['geometry']['location']['lng']):
                    return 'No location returned in result';
                default:
                    return NULL;
                    break;
            }
            return NULL;
    }

    public function dogeocode($q) {
        $res = @$this->doreq("http://maps.googleapis.com/maps/api/geocode/json?address=" . urlencode($q) . "&sensor=false");

        if ($testResult = testResult($res))
            throw new Exception ($testResult);

        $comp = array('query' => &$q);
        $map = array(
            'street_number' => 'street_number',
            'route' => 'route',
            'city' => 'locality', 
            'county' => 'administrative_area_level_2',
            'state' => 'administrative_area_level_1',
            'country' => 'country',
            'zip' => 'postal_code');

        if (isset($res['results'][0]['address_components'])) {
            foreach ($res['results'][0]['address_components'] as &$v)
                foreach ($map as $k => &$l)
                    if (in_array($l, $v['types']) && !isset($comp[$k]))
                        $comp[$k] = $v['long_name'];
        }

        return array ('formatted' => (isset($res['results'][0]['formatted_address']) ? $res['results'][0]['formatted_address'] : NULL),
                  'components' => &$comp,
                  'latlng' => array ($res['results'][0]['geometry']['location']['lat'],
                              $res['results'][0]['geometry']['location']['lng']));
    }
} 
```

任何人都可以帮助在 PHP 5.2 中进行这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:09:49.653

做就是了

```
function testResult(&$res) {

    // ... code

} 
```

进而：

```
if ($testResult = testResult($res))
    throw new Exception ($testResult); 
```

**编辑：**

现在我可以看到这是在一个类中，您需要将新`testResult`函数移出`dogeocode`并使其成为防止`Fatal error: Cannot redeclare testResult()`. 然后，您将使用以下方式访问它：

```
if ($restResult = $this->testResult($res))
    throw new Exception ($testResult); 
```

# wcf - IIS 看不到 WCF 服务

> ID：15710689
> 
> 赞同：0
> 
> 时间：2013-03-29T20:08:56.890
> 
> 标签：wcf, iis, config, endpoint

我将 AjaxDataService.svc 放在我的根目录中。由于根文件夹自动部署了其内容，因此我认为没有理由丢失任何内容。唯一想到的是有一个糟糕的.config

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="JsonBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>
<services>
  <service name="WashMyCarHomepage.AjaxEntityService">
    <endpoint address="" binding="webHttpBinding" contract="WashMyCarHomepage.IAjaxEntityService" behaviorConfiguration="JsonBehavior" />
    <host>
      <baseAddresses>
        <add baseAddress="http://sub.project.com" />
      </baseAddresses>
    </host>
  </service>
</services>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true" /> 
```

它在本地主机上运行顺利。应用程序的其余部分也按预期运行。

**编辑：** 有人可以列出可能的原因吗？

# ios - iOS 6 - 标签栏控制器锁定为纵向，除非呈现模态 MPMoviePlayerViewController

> ID：15710694
> 
> 赞同：0
> 
> 时间：2013-03-29T20:09:24.323
> 
> 标签：ios, orientation, mpmovieplayercontroller, autolayout, portrait

我有一个标签栏应用程序，它有几个视图。每个视图都应锁定为纵向模式，除非在movieviewcontroller 中显示视频。设置它的正确方法是什么？

应用程序适用于 iOS 6.0 及更高版本，并使用自动布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:33:22.280

只需使用以下方法为 UITabBarController 创建一个类别：

```
-(BOOL)shouldAutorotate{
    return YES;
}
- (NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

然后在我的子类 MPMoviePlayerViewController 中：

```
-(BOOL)canBecomeFirstResponder{
    return YES;
}

-(BOOL)canResignFirstResponder{
    return YES;
}

-(BOOL)shouldAutorotate{
    return true;
}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
} 
```

现在，所有选项卡视图都锁定为纵向/倒置纵向，而电影播放器​​可以在任何方向自由旋转。

# python - 重定向后 Cookie 丢失（Bottle + uWSGI + Python）

> ID：15710697
> 
> 赞同：2
> 
> 时间：2013-03-29T20:09:30.433
> 
> 标签：python, cookies, uwsgi, bottle

我使用 Bottle 框架和 uWSGI 应用服务器来托管我的网站。我现在正在更改网站上的主要编程语言（PHP-> Python），我遇到了这个问题：我刚刚使用的 cookie`bottle.response.set_cookie()`在重定向后消失了。所以完整的代码是：

```
# Login page (/login)
from bottle import redirect, response # etc
...
...
response.set_cookie('cool', 'cookie') # Works good without redirect
redirect('/') # Cookie disappears 
```

我知道这个问题可能会出现，就在这里。我对 PHP 没有这个问题。我需要设置一个 cookie，然后将用户重定向到主页。有什么办法可以正确地做到这一点吗？

**升级版：**

该问题的临时解决方案是降级到 0.11.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:20:26.770

也许您正在使用受此错误影响的版本：

[https://github.com/defnull/bottle/issues/386](https://github.com/defnull/bottle/issues/386)

# html - 水平列表项

> ID：15710701
> 
> 赞同：82
> 
> 时间：2013-03-29T20:09:40.330
> 
> 标签：html, css

因此，我尝试创建一个水平列表以用于我正在设计的新网站。我已经尝试了一些已经在网上找到的建议，例如将“浮动”设置为左侧等 - 但在解决问题时这些都没有奏效。

```
 ul#menuItems {
      background: none;
      height: 50px;
      width: 100px;
      margin: 0;
      padding: 0;
    }
    ul#menuItems li {
      display: inline;
      list-style: none;
      margin-left: auto;
      margin-right: auto;
      top: 0px;
      height: 50px;
    }
    ul#menuItems li a {
      font-family: Arial, Helvetica, sans-serif;
      text-decoration: none;
      font-weight: bolder;
      color: #000;
      height: 50px;
      width: auto;
      display: block;
      text-align: center;
      line-height: 50px;
    }
```

```
<ul id="menuItems">
  <li>
    <a href="index.php">Home</a>
  </li>
  <li>
    <a href="index.php">DJ Profiles</a>
  </li>
</ul>
```

目前我不确定是什么导致了这个问题，我将如何着手解决它？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-29T20:11:57.427

# 更新的答案

我注意到很多人都在使用这个答案，所以我决定稍微更新一下。不再包括对现在不支持的浏览器的支持。

```
ul > li {
    display: inline-block;
    /* You can also add some margins here to make it look prettier */
}
```

```
<ul>
    <li> <a href="#">some item</a>

    </li>
    <li> <a href="#">another item</a>

    </li>
</ul>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T20:14:15.267

这个小提琴展示了如何

[http://jsfiddle.net/9th7X/](http://jsfiddle.net/9th7X/)

```
ul, li {
    display:inline
} 
```

列表和 css 的重要参考：

[http://alistapart.com/article/taminglists/](http://alistapart.com/article/taminglists/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-20T18:19:19.103

我想我找到的简单解决方案如下

```
ul{
    display:flex;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-29T20:14:08.603

更好的方法是使用`inline-block`，因为您不再需要`clear:both`在列表末尾使用。

试试这个：

```
<ul>
    <li>
        <a href="#">some item</a>
    </li>
    <li>
        <a href="#">another item</a>
    </li>
</ul> 
```

CSS：

```
ul > li{
    display:inline-block;
} 
```

在这里看看：http: [//jsfiddle.net/shahverdy/4N6Ap/](http://jsfiddle.net/shahverdy/4N6Ap/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-29T20:16:17.710

您还可以使用内联块来避免浮动元素

```
<ul>
    <li>
        <a href="#">some item</a>
    </li>
    <li>
        <a href="#">another item</a>
   </li>
</ul> 
```

然后样式为：

```
li{
    /* with fix for IE */
    display:inline;
    display:inline-block;
    zoom:1;
    /*
    additional styles to make it look nice
    */
 } 
```

这样你就不需要浮动任何东西，消除了对 clearfixes 的需要

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T20:28:30.423

[在这里](http://jsfiddle.net/Vxpu3/1/)您可以找到一个工作示例，其中包含有关动态调整列表大小的更多建议。

我使用了 display:inline-block 和百分比填充，以便父列表可以动态更改大小：

```
display:inline-block;
padding:10px 1%;
width: 30% 
```

加上另外两个规则来删除第一个和最后一个项目的填充。

```
ul#menuItems li:first-child{padding-left:0;}
ul#menuItems li:last-child{padding-right:0;} 
```

# java - 如何读取/更改 mp3 文件的字节码？

> ID：15710712
> 
> 赞同：0
> 
> 时间：2013-03-29T20:11:16.237
> 
> 标签：java, iostream, java-io, javax.sound.sampled

我可以阅读 mp3 文件并可以播放。但现在我想更改 mp3 文件的字节码。我怎么能看到一个 mp3 文件的字节码？？？我也想编辑字节码。我在谷歌搜索了 2 天，但找不到任何解决方案。如果有人帮助我，我将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:27:43.100

除非我误解了某些东西，否则对于您的问题，它是 mp3 的事实是无关紧要的。您要问的只是读取和修改二进制文件。如果我在这里错了，请纠正我。

这样做相对简单，虽然水平有点低。为了方便起见，我建议您使用[这个库](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html)。它的方法描述为“从输入流中读取字节”。它还具有带有诸如“将字节从 byte[] 写入 OutputStream”之类的描述的方法。

所以你要做的是读入 MP3 并将其存储为一些变量状态。然后你要修改那个状态。然后，您将再次将其写回。

或者：您的问题有点含糊，所以我不能确定，但​​它可能与[Any good Recommendation for MP3/Sound library for java? 的重复？](https://stackoverflow.com/questions/86083/any-good-recommendations-for-mp3-sound-libraries-for-java)

# c - Frama-C/WP/ACSL 在结构上正确使用 \valid

> ID：15710715
> 
> 赞同：2
> 
> 时间：2013-03-29T20:11:43.600
> 
> 标签：c, static-analysis, design-by-contract, frama-c

我对如何在结构上正确使用 \valid 注释有一些疑问。

```
struct someStruct{
    int size1;
    int size2;
    char *str1;
    char *str2;
} 
```

验证结构的内存安全性的正确谓词是：

```
/*@
    predicate validStruct(struct someStruct *p) =
       \valid(p) && 
       \valid(p->str1+(0..((p->size1)-1))) && 
       \valid(p->str2+(0..((p->size2)-1)));
@*/ 
```

或者

```
/*@
    predicate validStruct(struct someStruct *p) =
       // 16 bytes: 2 int * 4 bytes + 2 pointers* 4 bytes.
       // Although may depend on implementation and system arch
       \valid(p+(0..15) &&   
       \valid(p->str1+(0..((p->size1)-1))) && 
       \valid(p->str2+(0..((p->size2)-1)));
@*/ 
```

第一个示例假设`\valid(p)`（`p`指向结构的指针在哪里）确保它指向的结构的内存安全，而第二个示例我必须手动指定范围（考虑到内存字段的大小）

[通过示例查看 ACSL](http://www.2shared.com/document/uaOSFjCx/ACSL-by-Example.html)中的堆栈示例（第 125 页）。他们采用第一个例子。然而，在许多地方`\valid(some_string+(0..strlen(some_string)))`用于确保那些特定内存位置的内存安全。

**编辑：**

回应给出的答案。一个正确的内存安全谓词（取自 stdio.h）

```
struct _IO_file {
    int _IO_fileno;     /* Underlying file descriptor */
    _Bool _IO_eof;      /* End of file flag */
    _Bool _IO_error;    /* Error flag */
};
typedef struct _IO_file FILE;

struct _IO_file_pvt {
    struct _IO_file pub;    /* Data exported to inlines */
    struct _IO_file_pvt *prev, *next;
    char *buf;      /* Buffer */
    char *data;     /* Location of input data in buffer */
    unsigned int ibytes;    /* Input data bytes in buffer */
    unsigned int obytes;    /* Output data bytes in buffer */
    unsigned int bufsiz;    /* Total size of buffer */
    enum _IO_bufmode bufmode; /* Type of buffering */
}; 
```

例如：

```
/*@

predicate valid_FILE(FILE *f) = 
    \valid(f) && f->_IO_fileno >= 0;

predicate valid_IO_file_pvt(struct _IO_file_pvt *f) = 
    \valid(f)
    // buffer offset
    && f->buf == (char *)f + ((sizeof(*f) + 4*sizeof(void *) - 1)
                                        & ~(4*sizeof(void *) - 1))
    // 16K
    && f->bufsiz == 16384
    && 0 <= f->ibytes <= f->bufsiz
    && 0 <= f->obytes <= f->bufsiz
    && valid_FILE(&(f->pub))
    && (f->next != \null ==> \valid(f->next))
    && (f->prev != \null ==> \valid(f->prev))
    // 16384 + 32 (ungetc_slop)
    && \valid(f->buf+(0..(f->bufsiz+32-1)))
    // data points to address in valid buffer region
    && f->buf <= f->data < (f->buf + f->bufsiz + 32)
;
@*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:29:22.447

解决方案 1 显然是一个很好的解决方案，因为它抽象了您的编译器以及 Frama-C 中的 Cil 选择的内存布局。

解决方案 2 实际上是不正确的。您的范围`p+(0..15)`必须使用类型对象的指针算术来理解`struct someStruct`，并且您实际上是在请求`p`指向`16 * sizeof(struct someStruct)`字节有效的区域。

对于标准内存布局，解决方案 2 的正确重新表述应该是

> \有效(((char*)p)+(0..15))

事实上，ACSL 参考手册明确提到了以下等效第 56 页。（为了清楚起见，我删除了标签。）

> \valid(p) <==> \valid(((char*)p)+(0..sizeof(*p))

For strings, the cast `(char*)p` becomes superfluous, as strings are already pointers to char. Thus, writing `valid(p+(0..strlen(p))` requires that `p` points to a memory are where `strlen(p)+1` bytes are valid -- but only because `p` has type `char*`, and `sizeof(char)=1`.

# c - 协调/控制多个 C 应用程序

> ID：15710717
> 
> 赞同：0
> 
> 时间：2013-03-29T20:11:50.397
> 
> 标签：c, linux, shell, ipc

我最初是在考虑使用管道来协调和控制多个 C 应用程序，并以 shell 脚本作为执行程序。假设，一个 C 应用程序“A”执行 X，另一个 C 应用程序“B”执行 Y。shell 脚本通过 IPC 与 A 和 B 检测 X 和 Y 动作已执行。然后它告诉 C 应用程序“C”通过 IPC 执行 Z。这里的 IPC 机制可以是管道。有没有一种胶水语言可以更好地做到这一点——在 Linux 上内存占用低的东西？我最初想使用 shell 脚本来协调/控制 C 应用程序，欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:16:18.500

像期望这样的东西会很好用。

# android - Can we create an app that can create popup messages while watching live channel from Google TV

> ID：15710718
> 
> 赞同：0
> 
> 时间：2013-03-29T20:11:53.273
> 
> 标签：android, google-tv

Lets say I am developing an app for Google Tv. This app will have a reminder function. While watching live channel from Google TV, can our app display a reminding popup messages right top of the screen? Is that possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:37:19.927

Yes - you can create a longish [Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html) for [more info](http://developer.android.com/reference/android/widget/Toast.html).

# mvvmcross - mvvmcross v3 CirriousConference 部署失败

> ID：15710723
> 
> 赞同：1
> 
> 时间：2013-03-29T20:12:31.550
> 
> 标签：mvvmcross

我刚刚做了一个 MVVMCross v3 的 git 克隆，并对 Gingerbread 虚拟机做了一个 Deploy 项目。

部署的七个示例没有问题，但是当部署 CirriousConference 应用程序时，我收到一条关于缺少共享库的错误消息。请参阅[此屏幕截图](https://plus.google.com/photos/109040001860227423704/albums/5860859816613199409?authkey=CPqtl_KuucLETg)。

环境：VS2010，Xamarin 4.6.49，Windows 8。

我尝试重新启动模拟器并重新启动计算机但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:17:46.283

此类错误通常是由未安装任何 Google 地图的模拟器图像引起的。

对于 ARM 模拟器，您可以通过添加 Google SDK 包来创建新的模拟器，包括 Google 地图

对于 x86 模拟器，试试这篇文章 - [http://www.seal.io/2012/09/android-x86-images-with-google-sdk-maps.html](http://www.seal.io/2012/09/android-x86-images-with-google-sdk-maps.html) - 我没用过，但我用过最近听到了关于它的好消息。

* * *

或者，您可以从该示例中删除地图功能 - 它仅用于酒店地图页面。

# sql - SQL Server 2012 中的分片机制（如 SQL Azure 联合）

> ID：15710726
> 
> 赞同：0
> 
> 时间：2013-03-29T20:12:47.723
> 
> 标签：sql, sql-server, azure-sql-database

我想问是否存在任何分片机制（如云中的 SQL Azure 联邦），但在 SQL Server 2012 中。我进行了很多搜索，但找不到任何类似于联邦的合适解决方案。有 AlwaysOn，但不一样。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:24:00.460

不，此功能不在 SQL Server 2012 的盒装产品中。有很多方法可以扩展读取，但[合并复制](http://msdn.microsoft.com/en-us/library/ms152746.aspx)和[分布式分区视图](http://msdn.microsoft.com/en-us/library/ms191185%28v=sql.105%29.aspx)似乎仍然是扩展写入的唯一可行的开箱即用解决方案。请注意，后者似乎没有在 SQL Server 2012 中单独正式记录 - 它已[全部浓缩到`CREATE VIEW`主题](http://technet.microsoft.com/en-us/library/ms187956.aspx)中。

# java - 登录后 Spring Security 3 重定向

> ID：15710727
> 
> 赞同：0
> 
> 时间：2013-03-29T20:12:52.517
> 
> 标签：java, spring-security

我试图在成功登录后将用户重定向到上一页，但每次我都重定向到“/”。有我的配置：

```
<bean id="rememberMeFilter"     class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <constructor-arg name="rememberMeServices" ref="rememberMeServices"/>
    <constructor-arg name="authenticationManager" ref="authenticationManager" />
</bean>

<bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices" >
    <constructor-arg name="tokenRepository" ref="persistentTokenRepository" />
    <constructor-arg name="userDetailsService" ref="customUserDetailService"/>
    <constructor-arg name="key" value="token"/>
    <property name="cookieName" value="token" />
    <property name="tokenValiditySeconds" value="864000" />
</bean>

<bean id="rememberMeAuthenticationProvider" class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
    <constructor-arg name="key" value="token"/>
</bean>

<bean id="persistentTokenRepository" class="com.youtasked.spring.auth.MongoPersistentTokenRepositoryImpl" />

<sec:http auto-config="true" use-expressions="true">
    <sec:session-management />
    <sec:form-login login-page="/login" default-target-url="/" always-use-default-target="true" authentication-failure-url="/login?error=true"
                    login-processing-url="/j_spring_security_check" authentication-success-handler-ref="successLoginHandler"/>
    <sec:logout logout-success-url="/logout" delete-cookies="true" invalidate-session="true" />
    <sec:remember-me services-ref="rememberMeServices" use-secure-cookie="true" />
</sec:http>

<bean id="successLoginHandler" class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <property name="useReferer" value="true" />
</bean>

<bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" />
<bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource">
    <property name="userPropertyToUse" value="email" />
</bean>
<bean id="customUserDetailService" class="com.youtasked.core.user.CustomUserDetailService" />

<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider user-service-ref="customUserDetailService">
        <sec:password-encoder ref="passwordEncoder">
            <sec:salt-source ref="saltSource"></sec:salt-source>
        </sec:password-encoder>
    </sec:authentication-provider>
    <sec:authentication-provider ref="rememberMeAuthenticationProvider" />
</sec:authentication-manager> 
```

`SavedRequestAwareAuthenticationSuccessHandler`每次我都从中得到空值**，**`requestCache`但我认为这应该是以前的请求。我也在阅读`ExceptionTranslationFilter`和一些使用它来保存请求的神奇方法，但我找不到任何示例

# c# - (407) 需要代理验证

> ID：15710733
> 
> 赞同：2
> 
> 时间：2013-03-29T20:13:27.920
> 
> 标签：c#, proxy, proxy-authentication

我知道这已经被问过很多次了。我已经阅读了这里和其他类似网站上的大部分帖子。

[http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/2931d21c-9ca8-4256-b213-915fad4c941b/](http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/2931d21c-9ca8-4256-b213-915fad4c941b/)

无济于事。这里是环境

Windows Server 2008 R2 64 位 Visual Studio 2008 .Net Framework 3.5

这是我尝试过的

我让代理使用代码进行身份验证

```
WebRequest req = WebRequest.Create(requestUri + data);
req.Proxy = new System.Net.WebProxy(<ProxyURL>:<port>",true);
req.Proxy.Credentials = CredentialCache.DefaultCredentials;
WebResponse resp = req.GetResponse(); 
```

这行得通，但是看到它减慢了应用程序的速度，我了解到我可以编辑我所做的 machine.config 文件。它也奏效了！

```
 <system.net>
      <defaultProxy
      useDefaultCredentials="true">
      <proxy
        proxyaddress="<proxyURL>:<port>"
        bypassonlocal="True"/>
     </defaultProxy>
   </system.net> 
```

至少一两天。然后它开始失败。

然后我把它编辑成这个

```
 <system.net>
     <defaultProxy
       useDefaultCredentials="true">
       <proxy usesystemdefault="True"/>
       </defaultProxy>
    </system.net> 
```

据我了解，这将使用 IE 设置连接到代理，但仍然无法正常工作。我也试过tihs代码

```
WebProxy proxy = new WebProxy(<proxy>:<port>);
CredentialCache myCache = new CredentialCache();
myCache.Add(new Uri(requestUri + data), "BASIC", new NetworkCredential(<username>,<password>));
proxy.Credentials = myCache;
request.Proxy = proxy;
request.Method = "GET"; 
```

这没有用。

注意：我可以将 machine.config 文件复制到我的计算机（Win XP）并从那里运行 .exe（没有代理代码），它工作正常。

对于 64 位操作系统，我需要做些什么不同的事情吗？我也可以在服务器上打开 IE8 并访问 URI 就好了。目标是预先验证代理，而无需在代码中提供用户名密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-17T06:59:17.207

@大卫摩尔是对的。如果手动浏览时 IE 工作正常，那么只需添加`req.Proxy.Credentials = CredentialCache.DefaultCredentials;`它就可以正常工作。

这是从对我有用的 MSDN 中获取的修改代码。

```
using System;
using System.Diagnostics;
using System.IO;
using System.Net;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            string urlDemo = "http://en.wikipedia.org/wiki/Main_Page";
            // Create a request for the URL. 
            WebRequest request = WebRequest.Create(urlDemo);
            // If required by the server, set the proxy credentials.
            request.Proxy.Credentials = CredentialCache.DefaultCredentials;
            // Get the response.
            WebResponse response = request.GetResponse();
            // Display the status.
            Console.WriteLine(((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            Stream dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd();
            // Display the content.
            Console.WriteLine(responseFromServer);
            Console.ReadLine();
            // Clean up the streams and the response.
            reader.Close();
            response.Close();

        }
    }
} 
```

希望能帮助到你 ;-）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T09:04:13.717

HttpWebRequest 无论如何都使用默认的 Internet 设置 (IE) 代理，因此如果它在服务器上的 Internet Explorer 上运行良好，那么从您的代码中也应该没问题（只要它在相同的用户帐户下运行）。

我会把 machine.config 原样放回去。

我要检查的一件事是在 IIS 中，您可以为 Windows 身份验证小程序配置提供程序。这应该将 NTLM 和 Kerberos 列为列表中的提供程序；我会切换它们，看看是否有区别（例如，如果 NTLM 位于列表顶部，则将 Kerberos 移到顶部）。很抱歉，我不能给你确切的说明，因为我在这台机器上没有 IIS。

如果您还在苦苦挣扎，我建议您在服务器上运行 Fiddler 以捕获请求和响应流以获取更多线索。

# adobe - 我想嵌入一个界面简单的收音机播放器来播放不同的收音机频道，我该怎么做？

> ID：15710734
> 
> 赞同：0
> 
> 时间：2013-03-29T20:13:31.207
> 
> 标签：adobe, flash, embed, radio

我没有足够的关于制作 swf 和使用 flasvars 属性的信息。简而言之，我希望你能帮助我或提供一个想法，我如何制作一个简单的收音机播放器，它具有简单的界面，如播放、暂停、音量按钮并嵌入到我的网络中的某个地方页。此广播播放器将包括不同的广播频道。任何帮助将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:15:05.423

您需要学习为此所需的任何编码语言。您可以编写一个 javascript 或 Flash 代码。全取决于你。这也不是一个真正的问题……您要求我们为您制作一个。

# c++ - 一旦满足指定容量，覆盖优先级队列末尾的元素？

> ID：15710735
> 
> 赞同：1
> 
> 时间：2013-03-29T20:13:35.320
> 
> 标签：c++, stl, priority-queue, nearest-neighbor

我正在尝试在四叉树中搜索最近的 N 点，并使用 STL 优先级队列来存储找到的点（按与查询点的距离排序）。

超过查询点最大距离的点永远不会添加到队列中。但是，我也想切断搜索可以返回的项目数。目前，我添加了所有比最大距离更接近查询点的点，然后只从队列中读取前 N 个点。

在测试中，这太慢了——简单地添加比最大距离更近的每个点最终都会随着添加更多点而减慢。相反，我只想在队列中添加更多点：当前队列中的点少于 N 个，或者有问题的点比队列中的第 N 个点更靠近查询点，在这种情况下，该点被覆盖，并且不会增加队列中的元素数量。

有没有办法用 STL 优先级队列来做到这一点，还是我唯一的选择是自己写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:52:21.730

您在遍历它们时是否必须知道当前的 N 个最佳点？如果没有，也许您可​​以将所有点添加到随机访问容器（例如`std::vector`），然后[`std::partial_sort`](http://en.cppreference.com/w/cpp/algorithm/partial_sort)在最后调用以获得最佳 N。

如果您真的需要使用优先级队列来执行此操作，那是`std::priority_queue`不够的。您可以将一些东西与`std::algorithm`堆函数放在一起，这样您就可以访问底层容器。

# c# - .Net Web API 和 Autofac 解析参数绑定

> ID：15710736
> 
> 赞同：1
> 
> 时间：2013-03-29T20:13:43.717
> 
> 标签：c#, .net, asp.net-web-api, autofac

我正在将 Autofac 用于 DI 和 .Net Web API 项目。控制器操作的一些参数是使用 HttpParameterBinding 绑定的。我知道这些绑定参数在 HTTPActionContext 对象中。

其中一个依赖项需要解析绑定参数。我能否解析 HTTPActionContext 以访问参数？

我尝试调试，似乎参数绑定仅在解决依赖关系后才发生，至少在我的情况下。

# jquery - jQuery - 砌体布局

> ID：15710738
> 
> 赞同：1
> 
> 时间：2013-03-29T20:13:51.717
> 
> 标签：jquery, layout, jquery-masonry

第一次使用 jquery，我试图让基本的砌体风格工作，我的 html 中有以下代码......

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<head>

<title>_Box</title>

<link href="styles.css" rel="stylesheet" type="text/css">

<body>

<script src="jquery.js"></script>
<script src="masonry.js"></script>
<script>
$(window).ready(function() {
    $("#container").masonry({
          itemSelector: '.item',
          columnWidth: 240,
          isAnimated: !Modernizr.csstransitions
        });
});
</script>

<div id="container">

<div class="item"><img src="images/eventbox.png"></img></div>
<div class="item"><img src="images/forumbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/top10box.png"></img></div>
<div class="item"><img src="images/eventbox.png"></img></div>

</div>

</body>
</head> 
```

以及我的css文件中的以下内容......

```
html {
  height:100%;
}

body {
  width:950px;
  height:100%;
  margin:0 auto;
  margin-top:100px;
  background-image: url(images/gridbg.png);
}

.item{
    float: left;
    padding: 5px;
    margin: 5px;
} 
```

任何帮助都会很棒，因为我几乎遵循了教程但它不起作用

这就是它的样子

![-](../Images/1d07145c0cb9ffc8f5bff9888c12613b.png)

如果有帮助，图像的宽度和高度不同。

问题：我怎样才能得到砌体应该做的布局，很好地相互融合；砌体现场的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:36:18.527

您应该添加一个`columnWidth`：

```
$(window).ready(function() {
    $("#container").masonry({
          itemSelector: '.item',
          columnWidth: 240,
          isAnimated: !Modernizr.csstransitions
        });
}); 
```

此外，请确保您已正确包含`jQuery`脚本和`masonry.js`脚本。

并将以下**CSS**添加到您的代码中：

```
.item{
    float: left;
    padding: 10px;
    margin: 10px;
} 
```

# sql - 我得到：“您尝试执行的查询不包含指定的表达式‘OrdID’作为聚合函数的一部分。我该如何绕过？

> ID：15710741
> 
> 赞同：1
> 
> 时间：2013-03-29T20:14:09.337
> 
> 标签：sql, ms-access, ms-access-2010, aggregate-functions

我的代码如下：

```
SELECT Last, OrderLine.OrdID, OrdDate, SUM(Price*Qty)  AS total_price
    FROM ((Cus INNER JOIN Orders ON Cus.CID=Orders.CID)
        INNER JOIN OrderLine
            ON Orders.OrdID=OrderLine.OrdID)
        INNER JOIN ProdFabric
            ON OrderLine.PrID=ProdFabric.PrID   
            AND OrderLine.Fabric=ProdFabric.Fabric  
    GROUP BY Last  
    ORDER BY Last DESC, OrderLine.OrdID DESC; 
```

此代码之前已回答过，但含糊其辞。我想知道我哪里出错了。

> 您尝试执行的查询不包含指定表达式“OrdID”作为聚合函数的一部分。

是我不断收到的错误消息，无论我改变什么，它都会给我这个错误。是的，我知道，它是用 SQL-92 编写的，但是我怎样才能使它成为一个合法的函数呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T20:26:23.600

对于几乎每个 DBMS（MySQL 是我知道的唯一例外，但可能还有其他例外）， a`SELECT`中未聚合的每一列都需要在`GROUP BY`子句中。对于您的查询，这将是除以下列之外的所有内容`SUM()`：

```
SELECT Last, OrderLine.OrdID, OrdDate, SUM(Price*Qty)  AS total_price
...   
GROUP BY Last, OrderLine.OrdID, OrdDate  
ORDER BY Last DESC, OrderLine.OrdID DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:27:28.003

如果您**必须**保持`GROUP BY`完整（而**不是**将非聚合字段添加到列表中），那么您需要决定您需要哪些值`OrderLine.OrdID`和`OrdDate`。例如，您可以选择具有`MAX`或`MIN`这些值。

所以它要么像*bernie*建议的那样，要么`GROUP BY Last, OrderLine.OrdID, OrdDate`像这样（如果它对你的业务逻辑有意义的话）：

`SELECT Last, MAX(OrderLine.OrdID), MAX(OrdDate), SUM(Price*Qty) AS total_price`

# mysql - mysql join duplicates - 在 table2 上工作正常，但添加 table3 重复 table2s 行

> ID：15710745
> 
> 赞同：0
> 
> 时间：2013-03-29T20:14:27.467
> 
> 标签：mysql

所以，我正在使用专有数据，所以我不能在这里剪切粘贴我的代码。而且，我很抱歉这可能是微不足道的，但由于某种原因，我无法理解为什么它会重复。

所以，我有 4 张桌子

表 1 did, vid, sid, cid

表 2 视频，vname

表 3 sid、日期、值

表 4 cid、日期、值

我想要实现的是table1。做了，table2.vname，table3.sid，table3.date，table3.value，table4.cid，table4.date，table4.value

如果我做

```
 select table1.did, table2.vname, table3\. . .
    from table 1
    join table 2 on table2.vid = table1.vid
    join table 3 on table3.sid = table1.sid and table3.date > now() - interval 1 year
    where table1.did = 1
    ; 
```

我得到了我想要的。

```
 table1.did, table2.vname, table3.sid, table3.date, table3.value
    1,               blah,         123,    2013-3-1,        123
    1,               blah,         123,    2013-2-1,        3234
    1,               blah,         123,    2013-1-1,        111111     
    1,               blah,         123,    2012-12-1,       122222     
    1,               blah,         123,    2012-11-1,       155341     
    1,               blah,         123,    2012-10-1,       102002 
```

然后：

```
 select table1.did, table2.vname, table3\. . ., table4\. . .
    from table 1
    join table 2 on table2.vid = table1.vid
    join table 3 on table3.sid = table1.sid and table3.date > now() - interval 1 year
    join table 4 on table4.cid = table1.cid and table4.date > now() - interval 1 year
    where table1.did = 1
    ; 
```

给我：

```
 t1.did, t2.vname, t3.sid, t3.date, t3.value, t4.cid, t4.date, t4.value
    1,       blah,     123,   2013-3-1,  123,    456,    2013-3-1,   1112345     
    1,       blah,     123,   2013-3-1,  123,    456,    2013-2-1,   234
    1,       blah,     123,   2013-3-1,  123,    456,    2013-1-1,   2
    1,       blah,     123,   2013-2-1,  3234,   456,    2012-12-1,  332111     
    1,       blah,     123,   2013-2-1,  3234,   456,    2012-11-1,  5432
    1,       blah,     123,   2013-2-1,  3234,   456,    2012-10-1,  555 
```

无论如何，当我加入第四张桌子时，我可以防止重复吗？如果我切换第 3 次和第 4 次，它的工作方式相同，所以这肯定与我如何将它们连接在一起有关。

感谢您的帮助！

***编辑/解决方法***

我发现我觉得这样做很笨拙。我将其发布为答案，因为我知道它有效。但是，如果有人知道更好的方法来做到这一点，我会将其标记为已接受的答案。

添加一个名为“天”的新表

数据：

```
 day_id, dateYMD,    dateUS,      dateEU,      dayName
    1,      1970-01-01, 01/01/1970,  01/01/1970,  Thursday
    2,      1970-01-02, 01/02/1970,  02/01/1970,  Friday
    3,      1970-01-03, 01/03/1970,  03/01/1970,  Saturday
    . . .
    . . .
    . . .
    735322, 2013-03-30, 03/30/2013,  30/03/2013,  Saturday
    735323, 2013-03-31, 03/31/2013,  31/03/2013,  Sunday
    735324, 2013-04-01, 04/01/2013,  01/04/2013,  Monday 
```

然后改变了我的查询：

```
 select table1.did, table2.vname, date_format(days.dateYMD, '%Y-%m-01') as daysYMD, table3\. . ., table4\. . .
    from table 1
    join days on days.dateYMD > now() - interval 1 year and days.dateYMD <= now()
    join table 2 on table2.vid = table1.vid
    join table 3 on table3.sid = table1.sid and table3.date = date_format(days.dateYMD, '%Y-%m-01')
    join table 4 on table4.cid = table1.cid and table4.date = date_format(days.dateYMD, '%Y-%m-01')
    where table1.did = 1
    group by daysYMD
    ; 
```

再次，这完成了工作 - 但我想知道是否有人知道更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:21:59.523

添加`group by t3.vid, t4.cid`到您的最后一个查询。

```
 select table1.did, table2.vname, table3\. . ., table4\. . .
    from table 1
    join table 2 on table2.vid = table1.vid
    join table 3 on table3.sid = table1.sid and table3.date > now() - interval 1 year
    join table 4 on table4.cid = table1.cid and table4.date > now() - interval 1 year
    where table1.did = 1
    Gropu by t3.vid, t4.cid 
```

# javascript - 我怎样才能创建一个基本的ckeditor？

> ID：15710746
> 
> 赞同：-1
> 
> 时间：2013-03-29T20:14:29.270
> 
> 标签：javascript, html, ckeditor, wysiwyg, fckeditor

我在我的网站中使用 ckeditor，我想要一个简单的编辑器用于其中一个文本区域，我的问题是我该怎么做？（我需要粗体，斜体，下划线 - 一些非常基本的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:16:09.463

好吧，您可以通过覆盖“工具栏”属性将 ckeditor 配置为仅显示一些样式选项而不是整个菜单。

可以自定义 CkEditor 以仅显示一定数量的样式选项。

[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

# php - 如何按空格分割字符串以及php中的双引号

> ID：15710749
> 
> 赞同：3
> 
> 时间：2013-03-29T18:32:22.783
> 
> 标签：php

我有如下字符串

```
$data = 1hs: "1 U.S. dollar", rhs: "29.892653 Taiwan dollars" 
```

我想只用空格和双引号分割字符串，这样我就可以得到这样的数组：

```
$data[ ]= 29.892653  <--- the most important part I would like to get. 
$data[ ]= Taiwan dollars <--- not sure is it possible to do this? 
```

到目前为止，我使用下面的代码

```
$data = preg_split("/[,\s]*[^\w\s]+[\s]*/", $data,0,PREG_SPLIT_NO_EMPTY); 
```

但它只返回 29 并拆分所有标记，包括“。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:06:37.147

此正则表达式将为您提取所有内容到命名良好的数组字段中。

```
$data = '1hs: "1 U.S. dollar", rhs: "29.892653 Taiwan dollars"';

// Using named capturing groups for easier reference in the code
preg_match_all(
    '/(?P<prefix>[^,\s:]*):\s"(?P<amount>[0-9]+\.?[0-9]*)\s(?P<type>[^"]*)"/', 
    $data, 
    $matches, 
    PREG_SET_ORDER);

foreach($matches as $match) {
    // This is the full matching string
    echo "Matched this: " . $match[0] . "<br />";

    // These are the friendly named pieces
    echo 'Prefix: ' . $match['prefix'] . "<br />";
    echo 'Amount: ' . $match['amount'] . "<br />";
    echo 'Type: ' . $match['type'] . "<br />";
} 
```

输出：

*   匹配这个：1hs：“1美元”
*   前缀：1hs
*   数量：1
*   类型：美元

和：

*   匹配这个：rhs：“29.892653 台币”
*   前缀：rhs
*   金额：29.892653
*   类型：台币

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:20:25.653

下面的代码应该首先获取一个格式为 <number>[.<number>] 的数字，然后将之后的所有内容作为第二组，这应该与您的描述相匹配，除非您的问题中有一些不可见的特殊情况。

```
preg_match('/([0-9]+\.{0,1}[0-9]*)\s+(.*?)/', $data, $matches);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:32:57.200

假设格式始终相同，这可以用字符串函数在一行中完成

```
$string = '1hs: "1 U.S. dollar", rhs: "29.892653 Taiwan dollars"';
$data = explode(' ', trim(substr($string, strrpos($string, ':')+2), '"'),2);
var_dump($data); 
```

# c# - 在Web Garden模式下，除了opera之外，所有主流浏览器的进程ID是如何维护的？

> ID：15710754
> 
> 赞同：2
> 
> 时间：2013-03-29T20:14:52.767
> 
> 标签：c#, asp.net, browser, web-garden

我在*Web Garden*模式下测试会话行为。

为什么除了*Opera*之外，所有主流浏览器都只使用一个进程（在服务器上） ？它是如何完成的？

这是一个非常简单的 Web 应用程序：

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Write(Process.GetCurrentProcess().Id);
} 
```

标记：

```
<div>
    <asp:Button ID="Button2" runat="server" Text="Button" />
</div> 
```

每次单击*Opera*中的按钮时，我都会得到不同的数字（取决于 Worker 进程数），这是正常的。但是在*Chrome*中，我总是得到相同的进程 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:41:22.157

你在这里做错了，网络花园上的浏览器进程没有粘性。

我前段时间做过同样的测试，但我从来没有遇到过这个问题。我不知道确切的机制，关于 asp.net 是如何选择哪个进程将获得下一个请求，但不是坚持在浏览器上。

## 多一点

网络花园是当您在同一台计算机/服务器/池上使用多个进程来处理每个客户端请求时。

`Process.GetCurrentProcess().Id`显示实际运行您询问的页面的过程。我不确定asp.net如何选择将选择哪个进程来运行下一个请求，可能与每个进程的可用性以及每个进程的线程运行有关。

如何与客户端和调用浏览器数据无关。因此，如果您获得相同或不同的 id，则与服务器的负载有关，可能与客户端上的页面缓存有关，但肯定与浏览器无关。

# vb.net - 使用 DotNetZip 检查 zip 文件

> ID：15710755
> 
> 赞同：0
> 
> 时间：2013-03-29T20:14:56.483
> 
> 标签：vb.net, zip, dotnetzip

所以我有两个需要帮助的功能。

```
Public Function checkZipForFiles(ByVal zipFilepath As String)
    Try
        Dim doc As New System.Xml.XmlDocument
        If My.Computer.FileSystem.FileExists("Backup.xml") Then
            doc.Load("Backup.xml")

            Dim JobNodes As XmlNodeList = doc.GetElementsByTagName("Job")
            For Each JobNode In JobNodes
                Dim Source = JobNode.SelectNodes("Source")

                For Each item As System.Xml.XmlNode In Source
                    For Each File In checkFilesInFolder(item.InnerText)
                        Using zip = ZipFile.Read(zipFilepath)
                            Dim fileName As String
                            fileName = checkFilesInFolder(item.InnerText)
                            Dim e As ZipEntry = zip(fileName)

                            If e Is Nothing Then
                                Console.WriteLine("File: " & fileName & " does not exist in zip.")
                            End If
                        End Using
                    Next

                Next
            Next
        End If
    Catch ex As Exception
        Console.Error.WriteLine(ex.Message)
        myLogger.Log(ex.Message)
    End Try

End Function 
```

这个读入一个 xml 文件。xml 文件存储压缩过程的信息，例如“目标”、“文件源”和“作业名称”。我希望此功能检查 zip 以查看是否所有文件都在 zip 中。如您所见，此函数需要借助“checkFilesiInFolder”函数来获取要在 zip 中搜索的文件名。

问题 - 我只返回在“checkFilesInFolder”函数中扫描的最后一个文件。

```
Public Function checkFilesInFolder(ByVal folderPath As String)
    Try
        ' make a reference to a directory
        Dim di As New IO.DirectoryInfo(folderPath)
        Dim diar1 As IO.FileInfo() = di.GetFiles()
        Dim file As IO.FileInfo

        Console.WriteLine("The following files are located in " & folderPath)

        'list the names of all files in the specified directory
        For Each file In diar1
            Console.WriteLine(file.FullName)
            'myLogger.Log(file.ToString)

        Next
        Return file.ToString
    Catch ex As Exception
        Console.Error.WriteLine(ex.Message)
        myLogger.Log(ex.Message)
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:12:30.480

您的`checkFilesInFolder`函数应该返回一个集合而不仅仅是字符串。尝试将其定义更改为：

```
Public Function checkFilesInFolder(ByVal folderPath As String) As List(Of String)
    Dim returnList As List(Of String) = New List(Of String)()

    Try
        ' make a reference to a directory
        Dim di As New IO.DirectoryInfo(folderPath)
        Dim diar1 As IO.FileInfo() = di.GetFiles()
        Dim file As IO.FileInfo

        Console.WriteLine("The following files are located in " & folderPath)

        'list the names of all files in the specified directory
        For Each file In diar1
            Console.WriteLine(file.FullName)
            Console.WriteLine(file.Name)
            returnList.Add(file.Name) 'Or FullName, depending on what you want to use
        Next
    Catch ex As Exception
        Console.Error.WriteLine(ex.Message)
    End Try

    Return returnList
End Function 
```

请注意，我们使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)集合类来保存所有文件名。这将使您的`For Each File In checkFilesInFolder(item.InnerText)`陈述正常工作。

从您的用例来看，我不确定您是否需要添加`file.Name`或添加`file.FullName`到`returnList`，但我建议您通过调试或以其他方式尝试两者，看看哪一个适合您。

现在我们有了这个列表，我们可以：

1.  遍历每个文件
2.  检查文件是否存在于 ZIP 中

因此，乍一看，您的`checkZipForFiles`方法似乎在做正确的事情，但您的`For`循环可能只需要一些调整即可使用新集合：

```
 For Each item As System.Xml.XmlNode In Source
        For Each fileName As String In checkFilesInFolder(item.InnerText)
            Using zip = ZipFile.Read(zipFilepath)
                Dim e As ZipEntry = zip(fileName)

                If e Is Nothing Then
                    Console.WriteLine("File: " & fileName & " does NOT exist in zip.")
                Else
                    Console.WriteLine("File: " & fileName & " does EXIST in zip.")
                End If
            End Using
        Next
    Next 
```

请注意这里的一些事情：我们得到了一个`List(Of String)`结果，`checkFilesInFolder`所以你`For Each`只是在处理一堆字符串 - 在这种情况下，它们是文件名，可以通过`zip`像你已经在做的那样在 ZIP 文件中检查这些文件名。

# vb.net - vb.net 将结果输出到 Web 表单上的标签中

> ID：15710757
> 
> 赞同：0
> 
> 时间：2013-03-29T20:15:06.720
> 
> 标签：vb.net, web-services

我已经链接到一个非常基本的天气网络服务，我试图在 lbl 中显示结果，但它不起作用。当我在消息框中显示结果时，它工作正常。注释行有效，但标签无效

```
 Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click

    Dim var As String = txtCityString.Text
    lblResult.Text(weatherClient.GetWeather(var))

    'MessageBox.Show(weatherClient.GetWeather(var))

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:19:53.637

的`Text`成员`Label`是属性而不是方法。为了设置它，你需要做分配

```
lblResult.Text = weatherClient.GetWeather(var) 
```

今天编译的原因是编译器将`Text(...)`块解释为返回`Text`属性时的索引器。因此，返回类型是`String`您正在索引到当前标签文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:16:55.127

`Text`是标签的属性，而不是方法。所以你需要打电话

```
lblResult.Text = weatherClient.GetWeather(var) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:16:57.243

改成：

```
lblResult.Text = weatherClient.GetWeather(var) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T20:17:07.183

正确的语法是

```
lblResult.Text = weatherClient.GetWeather(var) 
```

您的版本不可编译。您应该会收到一条错误消息，指出标签没有方法 Text 并且没有找到兼容的扩展。

# css - 如何仅使用以下 css 在底部添加框阴影？

> ID：15710761
> 
> 赞同：1
> 
> 时间：2013-03-29T20:15:40.507
> 
> 标签：css

我有以下CSS代码：

```
 box-shadow: 0px 1px 5px #888;
    -moz-box-shadow: 0px 1px 5px #888;
    -webkit-box-shadow: 0px 1px 5px #888; 
```

我如何使它只显示底部边框。我有一个模糊半径，所以不确定要更改或添加到上面的代码片段中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:21:46.753

根据模糊半径减小散布距离（即散布距离需要补偿添加的模糊）。不要忘记调整偏移量以补偿点差的减少。

```
box-shadow: 0px 4px 5px -3px #888; 
```

[http://jsfiddle.net/p469p/](http://jsfiddle.net/p469p/)

你也只需要`box-shadow`. Mozilla 和 Webkit 已经支持它[很长时间了](http://caniuse.com/#search=box-shadow)。

有关更多信息，请参见[仅底部 css3 的阴影](https://stackoverflow.com/questions/5460129/drop-shadow-only-bottom-css3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:24:39.740

```
<!DOCTYPE html>
    <html>
        <head>
        <style> 
            div {
            box-shadow: 0px 2px #888;
            }
        </style>
        </head>
    <body>
    <div>
        The border-radius property allows you to add rounded corners to elements.
    </div>
</body> 
```

这是唯一的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:33:21.983

您可能想查看此 StackOverflow 中发布的解决方案：

[仅在底部 css3 中放置阴影](https://stackoverflow.com/questions/5460129/drop-shadow-only-bottom-css3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T17:13:13.307

You could use a linear gradient on the background:

```
background:linear-gradient(transparent 0%, transparent 90%,rgba(0,0,0,.7) 90%,transparent 100%); 
```

# android - Android：使用 ksoap2 通过 android 模拟器访问本地主机上的 WCF

> ID：15710762
> 
> 赞同：0
> 
> 时间：2013-03-29T20:15:50.450
> 
> 标签：android, wcf, localhost, ksoap2

好吧，我真的被困在这里了！我尝试了很多方法，但都是徒劳的。我正在尝试通过在模拟器上启动的 android 应用程序访问 wcf Web 服务（本地），但我的应用程序崩溃了，这里是代码。

这是我的安卓

```
 public class MainActivity extends TabActivity {

        /* I am not sure about these !! SOry */ 
 private static final String SOAP_ACTION = "http://localhost:1034/ILocation_Based_Reminder_WCF/getReminder";
 private static final String METHOD_NAME = "getReminder";
 private static final String NAMESPACE = "http://localhost:1034/";
 private static final String URL = "http://localhost:1034/Location_Based_Reminder_WCF.svc/";

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initialize();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

private void initialize()
{
    try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

           // request.addProperty("3235466455");

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
            }catch(Exception e){
                System.out.println("this is the message");
                System.out.println(e.getMessage());
                System.out.println("this is stack tracer");
                e.printStackTrace();
            }

            SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

            String resultData = result.toString();

            System.out.println(resultData);
            } catch (Exception e) {
            System.out.println(e.getMessage());
            }
} 
```

这就是网络服务

界面

```
namespace Location_Based_Reminder
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "ILocation_Based_Reminder_WCF" in both code and config file together.
    [ServiceContract]
    public interface ILocation_Based_Reminder_WCF
    {
        [OperationContract]
        String insertUser(long user);
        [OperationContract]
        String insertReminder(long user,String Location,String Time,String Time_Offset,String Date,String Date_Offset,int Status,String Description);
        [OperationContract]
        String getReminder(long userMSISDN);

    }
} 
```

.svc 文件

```
namespace Location_Based_Reminder
{
     public class Location_Based_Reminder_WCF : ILocation_Based_Reminder_WCF
    {
        private BUS _bus;
        private ValueObject _vo;
        private void _initiate()
        {
            _bus = new BUS();
            _vo = new ValueObject();
        }

        #region getReminder
        public String getReminder(long userMSISDN)
        {
            _initiate();
            DataTable _table = new DataTable();
            _table = _bus.getReminder(3235466455);
            String check=null;
            foreach (DataRow row in _table.Rows)
            {
                check = row["reminder_Location"].ToString();
            }
            return check;
        }
        #endregion
    }
} 
```

这是我收到的信息

```
03-29 20:02:42.245: I/System.out(2102): this is the message
03-29 20:02:42.245: D/AndroidRuntime(2102): Shutting down VM
03-29 20:02:42.245: W/dalvikvm(2102): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-29 20:02:42.255: E/AndroidRuntime(2102): FATAL EXCEPTION: main
03-29 20:02:42.255: E/AndroidRuntime(2102): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.locationbasedreminderversionOne.Two/com.example.locationbasedreminderversionOne.Two.MainActivity}: java.lang.NullPointerException
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.os.Looper.loop(Looper.java:137)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at dalvik.system.NativeStart.main(Native Method)
03-29 20:02:42.255: E/AndroidRuntime(2102): Caused by: java.lang.NullPointerException
03-29 20:02:42.255: E/AndroidRuntime(2102):     at com.android.internal.os.LoggingPrintStream.println(LoggingPrintStream.java:298)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at com.example.locationbasedreminderversionOne.Two.MainActivity.initialize(MainActivity.java:116)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at com.example.locationbasedreminderversionOne.Two.MainActivity.onCreate(MainActivity.java:40)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.Activity.performCreate(Activity.java:5104)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-29 20:02:42.255: E/AndroidRuntime(2102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-29 20:02:42.255: E/AndroidRuntime(2102):     ... 11 more 
```

我在 android manifest 中添加了权限和东西。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:46:57.923

这里的问题是您需要从您设计的服务中获取 SOAP。示例代码如下。

```
 String SOAP_ACTION = "http://tempuri.org/WriteToDB";
       String NAMESPACE = "http://tempuri.org/";
       String METHOD_NAME = "WriteToDB";
       String URL = "http://10.224.185.37/AndroidService.asmx?op=WriteToDB"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:14:46.600

anddoir 代码上的“localhost”指的是 android 的 localhost。10.0.2.2 是计算机本地主机的虚拟 IP ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:37:24.273

好吧，我发现了这个问题，每当android中涉及网络通信时，都不应该直接在onCreate方法中完成，因为应该使用这个异步活动。

# c# - Metro Apps：C#，从互联网读取文本文件

> ID：15710763
> 
> 赞同：2
> 
> 时间：2013-03-29T20:16:02.023
> 
> 标签：c#, microsoft-metro, windows-store-apps

我想要的很简单，我想通过我的应用程序从我的网站读取文本文件，我设法在 C# 中做到这一点，但在 Metro 应用程序中没有，这里是我在 C# 中的代码

```
WebClient client = new WebClient();
Stream stream = client.OpenRead(strURL);
StreamReader reader = new StreamReader(stream);
String content = reader.ReadToEnd();
return content; 
```

除了上面的代码我还尝试了下面的代码，但仍然失败

```
HttpWebRequest request = (HttpWebRequest)
WebRequest.Create(strURL);

HttpWebResponse response = (HttpWebResponse)request.GetResponse();

Stream resStream = response.GetResponseStream();
string tempString = null;
int count = 0;
byte[] buf = new byte[1000];
StringBuilder sb = new StringBuilder();

do
{
  count = resStream.Read(buf, 0, buf.Length);
  if (count != 0)
  {
    tempString = Encoding.Unicode.GetString(buf, 0, count);
    sb.Append(tempString);
  }
}
return sb.ToString(); 
```

我认为问题出在 Metro 应用程序中未知的 WebClient 和 GetResponse ()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:37:03.530

您应该能够使用 System.Net.Http.HttpClient 和 HttpResponseMessage，因为它们包含在[http://msdn.microsoft.com/en-us/library/windows/apps/hh454046.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh454046.aspx)中。

[http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)上有一个示例：

```
static async void Main()
{
    try 
    {
      // Create a New HttpClient object.
      HttpClient client = new HttpClient();

      HttpResponseMessage response = await client.GetAsync("http://www.contoso.com/");
      response.EnsureSuccessStatusCode();
      string responseBody = await response.Content.ReadAsStringAsync();
      // Above three lines can be replaced with new helper method in following line 
      // string body = await client.GetStringAsync(uri);

      Console.WriteLine(responseBody);
    }  
    catch(HttpRequestException e)
    {
      Console.WriteLine("\nException Caught!"); 
      Console.WriteLine("Message :{0} ",e.Message);
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:28:47.543

```
var httpClient = new HttpClient();
var text = await httpClient.GetStringAsync(uri); 
```

当然包含在异步方法中

# javascript - Javascript 失去对 AIR 函数的引用

> ID：15710772
> 
> 赞同：0
> 
> 时间：2013-03-29T20:16:29.103
> 
> 标签：javascript, html, air, window

我有一个 Adob​​e Air 桌面应用程序，作为应用程序的一部分，它有一个用于显示 HTML/JavaScript 的 HTML 窗口。在初始加载期间，我能够成功地从 JavaScript 调用回封闭的 AIR 应用程序。但是，如果我按下 AIR 按钮将完全相同的内容重新加载到 HTML 窗口中，则 JavaScript 调用将失败。JavaScript 代码会自动生成并插入到 HTML 中，如下所示：

```
<button onclick="bClk0a()">Connect
<script>
function bClk0a()
 { window.bdPaneInstance.getAccelData("Name","https://... "); }
</script>
</button> 
```

在初始调用时，“window.bdPaneInstance”与公共函数“getAccelData”正确关联。但是，一旦按下封闭窗口中的 AIR 按钮（它只是重新加载完全相同的文本），window.bdPaneInstance 将永久为空。我推断与“事件侦听器”关联的过程，即 AIR Button 重新加载 AIR HTML 窗口的方式，以某种方式更改了与 HTML 关联的窗口，因此“bdPaneInstance”不再可见。我该如何解决这个问题？

# file-permissions - 如何确定应用程序的首次运行/如何允许在应用程序文件夹中删除文件

> ID：15710782
> 
> 赞同：0
> 
> 时间：2013-03-29T20:17:10.750
> 
> 标签：file-permissions

我有一个与 PDW 一起分发的旧 VB6 应用程序。我需要在安装后确定它是否是应用程序的第一次运行。最简单的方法是什么？

目前，我安装了一个虚拟文本文件并使用它的存在作为首次运行的证据。如果 firstrun.txt 在 app 目录中，我打开一个子例程，创建一些目录并复制一些文件，然后删除 txt 文件。下一次，它会跳过子例程，因为 firstrun.txt 不存在。在用户收到错误代码 70 之前完美运行，因为他们没有删除文件的适当权限。

这是我用来删除文本文件的代码：

```
mobjFSO.DeleteFile App.Path & "\firstrun.txt 
```

Anyone have a better way? Or could someone tell me how to allow the program to delete the file regardless of permisson?

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:21:38.220

Try the opposite approach. If no file exists, assume it is the first run. After the first run does its thing, write a file -- but write it to a user area, such as C:\Users\myuser\AppData on Windows. This would be a more appropriate place to store this kind of data and you won't suffer the same permissions issues.

# scala - 在 Scala sbt REPL 中获取方法类型

> ID：15710787
> 
> 赞同：0
> 
> 时间：2013-03-29T20:17:31.637
> 
> 标签：scala, sbt

有没有`SBT`办法显示 Scala 方法的数据类型？

在`GHC`（Haskell）中，我们可以这样做：

```
:t something 
```

有没有类似的命令`SBT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:19:10.147

如果您使用 调用该方法`_`，您将看到结果部分应用方法的参数和返回类型：

```
scala> def helloWorld(i: Int): Option[Int] = { Some(i) }
helloWorld: (i: Int)Option[Int]

scala> helloWorld _
res0: Int => Option[Int] = <function1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:31:00.557

不，sbt 只是一个构建工具。`:t`但是，您可以在 scala REPL中使用相同的命令。您还可以使用 sbt 命令在当前环境中从 sbt 启动 scala REPL `console`。正如 alexwriteshere 已经说过的，您必须部分应用方法来获取它们的类型。

一些例子：

```
scala> def foo(x: Int, y: Int): Int = x+y
foo: (x: Int, y: Int)Int

scala> :t foo _
(Int, Int) => Int

scala> :t 3
Int

scala> :t List(1,2,3)
List[Int] 
```

# python - 查找文件之间的公共列表

> ID：15710791
> 
> 赞同：0
> 
> 时间：2013-03-29T20:17:51.517
> 
> 标签：python, compare, venn-diagram

我有三个文本文件：

文件A：

```
13  abc
123 def
234 ghi
1234    jkl
12  mno 
```

文件B：

```
12  abc
12  def
34  qwe
43  rty
45  mno 
```

文件C：

```
12  abc
34  sdg
43  yui
54  poi
54  def 
```

我想看看第二列中的所有值在文件之间匹配。如果第二列已排序，则以下代码有效。但是如果第二列未排序，我如何对第二列进行排序并比较文件？

```
fileA = open("A.txt",'r')
fileB = open("B.txt",'r')
fileC = open("C.txt",'r')

listA1 = []
for line1 in fileA:
    listA = line1.split('\t')
    listA1.append(listA)

listB1 = []
for line1 in fileB:
    listB = line1.split('\t')
    listB1.append(listB)

listC1 = []
for line1 in fileC:
    listC = line1.split('\t')
    listC1.append(listC)

for key1 in listA1:
    for key2 in listB1:
        for key3 in listC1:
            if key1[1] == key2[1] and key2[1] == key3[1] and key3[1] == key1[1]:
                print "Common between three files:",key1[1]

print "Common between file1 and file2 files:"
for key1 in listA1:
    for key2 in listB1:
        if key1[1] == key2[1]:
            print key1[1]

print "Common between file1 and file3 files:"
for key1 in listA1:
    for key2 in listC1:
        if key1[1] == key2[1]:
            print key1[1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:22:55.153

如果您只想按第二列对、 和进行排序`A1`，这很容易：`B1``C1`

```
listA1.sort(key=operator.itemgetter(1)) 
```

如果你不明白`itemgetter`，这是一样的：

```
listA1.sort(key=lambda element: element[1]) 
```

但是，我认为更好的解决方案是只使用`set`：

```
setA1 = set(element[1] for element in listA1)
setB1 = set(element[1] for element in listB1)
setC1 = set(element[1] for element in listC1) 
```

或者，更简单地说，不要一开始就建立列表；做这个：

```
setA1 = set()
for line1 in fileA:
    listA = line1.split('\t')
    setA1.add(listA[1]) 
```

无论哪种方式：

```
print "Common between file1 and file2 files:"
for key in setA1 & setA2:
    print key 
```

* * *

为了进一步简化它，您可能希望首先将重复的内容重构为函数：

```
def read_file(path):
    with open(path) as f:
        result = set()
        for line in f:
            columns = line.split('\t')
            result.add(columns[1])
    return result

setA1 = read_file('A.txt')
setB1 = read_file('B.txt')
setC1 = read_file('C.txt') 
```

然后你可以找到更多的机会。例如：

```
def read_file(path):
    with open(path) as f:
        return set(row[1] for row in csv.reader(f)) 
```

* * *

正如 John Clements 指出的那样，您甚至不需要所有三个都是集合，只需 A1，因此您可以这样做：

```
def read_file(path):
    with open(path) as f:
        for row in csv.reader(f):
            yield row[1]

setA1 = set(read_file('A.txt'))
iterB1 = read_file('B.txt')
iterC1 = read_file('B.txt') 
```

您需要的唯一其他更改是您必须调用`intersection`而不是使用`&`运算符，因此：

```
for key in setA1.intersection(iterB1): 
```

我不确定最后一次更改是否真的是一种改进。但是在 Python 3.3 中，您唯一需要做的就是更改`return set(…)`into `yield from (…)`，我可能*会这样做*。（即使文件很大并且有大量重复项，因此会产生性能成本，我还是会坚持调用周围的食谱`unique_everseen`。 ）`itertools``read_file`

# python - Python - 使用正则表达式从文本中删除 URL

> ID：15710793
> 
> 赞同：1
> 
> 时间：2013-03-29T20:18:09.813
> 
> 标签：python, regex, url

我在文本中有如下所示的 URL：

```
<https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/reportAProblem?p
=22000073760328&o=i> 
```

我使用以下模式尝试删除它们：

```
re.sub(r'\<http.+?\>', '', plain, re.S) 
```

但它不会全部获取它们，例如，这个不会被删除：

```
<http://ax.phobos.apple.com.edgesuite.net/email/images_shared/spacer_99999\r\n9.gif> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T20:40:36.057

像这样试试

```
p=re.compile(r'\<http.+?\>', re.DOTALL)
re.sub(p, '', plain) 
```

# linux - 目录统计命令行界面？

> ID：15710794
> 
> 赞同：7
> 
> 时间：2013-03-29T20:18:14.097
> 
> 标签：linux, statistics, command-line-interface, disk, du

Windirstat/ Kdirstat/ Disk Inventory X 在文件管理方面可谓是革命性的。为什么没有等效的纯文本命令行？我需要它来对我的文件服务器进行 SSH 管理。

我们拥有所有的构建块：du、tree 等。

有吗？为什么不？有人可以写一个吗？:)

编辑： du 几乎是我想要的。我想要的是按大小（而不是完整路径）和缩进对每个子目录进行排序，以便更容易避免重复计算。杜会给我这个：

```
cd a
du . -h

1G  b
2G  c
1K  c/d
1K  c/e
2G  c/f 
```

c 和 c/f 重叠并不是很明显。我想要的是这样的：

```
cd a
dir_stats .

1G  b
2G  c
    |
    +---- 2G  f
    |
    +---- 1K  d
    |
    +---- 1K  e 
```

其中很明显，来自 f 的 2G 是因为来自 c 的 2G。我可以更轻松地找到所有与 c 无关的信息（即只需扫描第一列）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-15T11:42:25.893

我建议使用[`ncdu`](http://dev.yorhel.nl/ncdu)，它代表 NCurses 磁盘使用情况。基本上它是一个可折叠的版本`du`，带有一个基本的命令行用户界面。

值得注意的一点是它的运行速度比`du`处理大量数据要慢一些，因此我建议在 a 中运行它`screen`或使用命令行选项先扫描目录然后查看结果。请注意该`q`选项，它将刷新率从 1/10 秒降低到 2 秒，建议用于 SSH 连接。

查看总根空间使用情况：

```
ncdu -xq / 
```

生成结果文件并稍后查看：

```
ncdu -1xqo- / | gzip > export.gz
# ...some time later:
zcat export.gz | ncdu -f- 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-06T23:17:16.497

您可以将 KDirStat（或新的 QDirStat）与任何一个随附的 perl 脚本一起使用以在您的服务器上收集数据，然后将该文件复制到您的桌面计算机并使用 KDirStat / QDirStat 查看它。

也可以看看

[https://github.com/shundhammer/qdirstat/tree/master/scripts](https://github.com/shundhammer/qdirstat/tree/master/scripts)

或者

[https://github.com/shundhammer/kdirstat/blob/master/kdirstat/kdirstat-cache-writer](https://github.com/shundhammer/kdirstat/blob/master/kdirstat/kdirstat-cache-writer)

该脚本似乎不包含在 KDE 4 端口 K4DirStat 中，但它仍然可以读取和写入相同的缓存文件。

-- HuHa (Stefan Hundhammer - 原 KDirStat 的作者)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T23:26:33.593

如此处所述：[https ://unix.stackexchange.com/questions/45828/print-size-of-directory-content-with-tree-command-in-tree-1-5](https://unix.stackexchange.com/questions/45828/print-size-of-directory-content-with-tree-command-in-tree-1-5)

```
tree --du -h -L 2 
```

非常符合我的目标精神。唯一的问题是，我认为它不支持排序，因此不适合大型文件系统层次结构:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-07T03:57:14.763

不要费心尝试使用 ascii 艺术可视化进行磁盘空间管理。Du 在所有方面都遵循 Unix 的优雅哲学，因此免费为您提供排序等。

Get comfortable with du and you'll have much more power in finding disk hogs remotely

# sharepoint - 如何在 SharePoint 门户上列出所有登录用户？

> ID：15710795
> 
> 赞同：1
> 
> 时间：2013-03-29T20:18:14.603
> 
> 标签：sharepoint

我有这段代码来列出 SharePoint 门户上的所有用户：

> 使用 (Microsoft.SharePoint.SPSite mSite = new Microsoft.SharePoint.SPSite(GetCurrentSiteURL())) {
> 
> ```
>  Microsoft.SharePoint.SPWeb rootWeb = mSite.RootWeb;
>         for (int i = 0; i < rootWeb.AllUsers.Count; i++)
>         {
>             int j = 0;
>             char[] anyOf = new char[] { '#', '+' };
>             rootWeb.AllUsers[i].
> 
>             if (rootWeb.AllUsers[i].LoginName.IndexOfAny(new char[] { '#', '+' }) == -1)//if(!rootWeb.AllUsers[i].IsDomainGroup)   
> 
>             {
>                 box1.Items.Insert(j, rootWeb.AllUsers[i].LoginName);
>                 j += 1;
>             }
>         } 
> ```

**是否可以仅列出当前登录的用户？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:23:26.960

SharePoint 不提供任何方法来确定当前登录的用户。这是因为 SharePoint 用于`HTTP`传输数据。作为`HTTP`无状态协议，您不知道用户当前是否在线，即使他/她只是在几秒钟前从您的 SiteCollection 请求了一个站点。
如果您想实现这样的目标，您需要创建一个`WebPart`跟踪登录用户并将其安装到您的场（如果您可以部署`Farm-Solution`到服务器的 GAC）。`SandBoxed-Solutions`由于受限的权限和 API，这根本不起作用。
此外，`AllUsers`-property`RootWeb`显示所有注册用户，但您无法获得任何有关其在线状态的信息。

# matlab - MATLAB图像求和混淆

> ID：15710800
> 
> 赞同：1
> 
> 时间：2013-03-29T20:18:58.770
> 
> 标签：matlab

我试图在 MATLAB 中对我的图像（它是一个 128x128 Uint8）求和（只是一个简单的 for 循环），但是，我的总和只会上升到 255 的值。后记它只是一遍又一遍地显示 255。

这是否意味着我的变量已被分配了 Uint8 或其他东西？如果是这样，我该如何改变？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:20:54.513

是的，大概您的数据是 Uint8 类型的。但是您不必循环求和，只需使用该`sum`函数即可。假设您的数据位于`x`：

```
total = sum(double(x(:))) 
```

`sum`将在单个维度上进行操作，因此如果您直接传递它`double(x)`，它将返回一个`1x128`矩阵；在这里，我们将所有重整的数据传递给一维向量（使用），使用函数`(:)`将其转换为双精度。`double`

请注意，变量的类型将连同其名称和大小一起显示在 Workspace 窗口中。

# algorithm - Recurrence equation for sorting algorithm

> ID：15710803
> 
> 赞同：-1
> 
> 时间：2013-03-29T20:19:08.403
> 
> 标签：algorithm, recurrence

I have the following question on a homework assignment and I'm not sure how to approach it

> Assume we have the following sorting algorithm:
> 
> To sort an array of size N(A[1…N]), the algorithm will do the following:
> 
> 1.  Recursively, Sort the first N-1 elements A[1…N-1]
> 2.  Use binary search to ﬁnd the correct place of A[N] to add it to the sorted list. After ﬁnding the correct place, it will need to shift the values to make place for A[N].
> 
> Write the detailed recurrence equation for this algorithm (do not omit any terms).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:03:00.937

![在此处输入图像描述](../Images/ca177f19c08812adaef764832b69c08c.png)

where `C` is some constant.

Let's see where each term comes from in the `n > 1` case:

*   T_{n - 1}

> Recursively, Sort the first N-1 elements A[1…N-1]

*   log n

> 使用二分查找找到 A[N] 的正确位置，将其添加到排序列表中

*   n

> 在找到正确的位置后，它需要移动值来为 A[N] 腾出位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:59:03.397

Let T(n) be the runtime of the algorithm described for an array of n elements. First, it recursively calls itself on the first n-1 elements, giving us a cost of T(n-1). Then, it uses binary search to find the position of the element at original position n, thus taking log(n-1) time. Finally, it shifts the elements (at most n-1 of them) to make space for the new one, which requires at most n steps.

Putting the pieces together, we get T(n) <= T(n-1) + log(n-1) + n - 1\. Finally, since you did not specify the base case, I am assuming the algorithm just does nothing on an empty list (thus trivially sorting it) and then get T(0) = 0.

# c - a pointer assignment ignored

> ID：15710806
> 
> 赞同：0
> 
> 时间：2013-03-29T20:19:16.143
> 
> 标签：c, pointers

I am programming a C application with eclipse when happens a strange event.

I have a function to which I pass a pointer to struct, then inside of function, I allocate to this pointer other pointer of same type, a simple allocation like this

```
pointer = otherPointer; 
```

Then, magically, my allocation is completely ignored by the program. I have refined with gdb and I see like the program pass for this line and the instruction is ignored.

there are some people with idea of causes of this paranormal event?

In the program there are similar functions with similar behavior and the allocation is done correctly.

Here is the funciton in question:

```
void uah_pcb_extract_queue_head (struct UAH_PCB * pPCB, struct UAH_PCB_Queue * pQueue)
{
  if (pQueue->head->next != NULL)
  {
    pPCB = pQueue->head;
    pQueue->head = pQueue->head->next;
  }
  else if (pQueue->head != NULL)
  {
    pPCB = pQueue->head;//this allocation
    pQueue->head = NULL;//in this line the value has not changed
    pQueue->tail = NULL;
  }
  else
  {
    pPCB = NULL;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:51:05.177

The reason you don't even see the change in gdb is that your compiler has probably optimised the assignment out of your function, since `pPCB` is not used again in it, and not returned.

If you want the change to affect the world outside of your function, you will need to pass in a **pointer to a pointer**, and then change the value it points to:

```
void uah_pcb_extract_queue_head (struct UAH_PCB ** pPCB, struct UAH_PCB_Queue * pQueue){
  /* code... */
  *pPCB = pQueue->head;
  /* more code... */
} 
```

alternatively, you could return the address and avoid dealing with pointers to pointers:

```
 struct UAH_PCB * uah_pcb_extract_queue_head (struct UAH_PCB_Queue * pQueue){
  /* code... */
  struct UAH_PCB * pPCB = pQueue->head;
  /* more code... */
  return pPCB;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:28:54.927

If you wish to *return* a pointer as a parameter, then you must use `**` syntax:

EXAMPLE:

```
struct mystruct {
  int x, y;
};

void
myfunc (struct mystruct **pp) {
  *pp = malloc (sizeof mystruct);
}

/* ... */

int main(){
  struct mystruct *mystruct_p = NULL;
  /* After this call, mystruct_p should no longer be NULL... */
  myfunc(&mystruct_p); 
  /* do some more stuff */
} 
```

"pp", in this example, is shorthand for "a pointer to a pointer".

'Hope that helps!

# ios - 如何从另一个类调用已解析（NSXMLParser）xml 的内容？代码审查？

> ID：15710808
> 
> 赞同：0
> 
> 时间：2013-03-29T20:19:19.427
> 
> 标签：ios, nsxmlparser

我正在尝试在视图控制器中提供已解析的 xml 文件的内容。当节点字符串的内容是时我该怎么做。

xml文件是这样的：

```
<XML>
 <Data> 
    <ID_Number>8</ID_Number>
    <Date> 13.12.2009</Date>
    <Time>  17:50:00</Time>
    <Temperature> 37.2  </Temperature>
    <Speed>34.2</Speed>
    <Direction>90.4</Direction>
    <AirPressure>1040.3</AirPressure>
 </Data>
</XML> 
```

.h 文件中的我的解析器

```
@interface Parser : NSObject 

@property ( nonatomic,strong) NSMutableString *mutableTemperatureValue;
@property ( nonatomic,strong) NSMutableString *mutableWindDirection;
@property ( nonatomic,strong) NSMutableString *mutableWindSpeed;
@property (nonatomic,strong) NSMutableString *mutableAirPressure;
@property (nonatomic,strong) NSMutableString *mutableAcquiredDate;
@property (nonatomic,strong) NSMutableString *mutableAcquiredTime;

-(void)parserStart;
@end 
```

m.文件：

```
-(void)parserStart
{
NSURL *url = [NSURL URLWithString:myWebServiceXMLUrl];
NSData *data = [NSData dataWithContentsOfURL:url];

NSXMLParser *xmlParser = [[NSXMLParser alloc]initWithData:data ];

NSString *xmlCheck = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"xmlCheck =%@", xmlCheck);

[xmlParser setDelegate:self];

[xmlParser parse];

} 
```

.m 文件中的委托方法，例如：didStart...

```
if([elementName isEqualToString:@"Date"] ){
    self.mutableAcquiredDate = [[NSMutableString alloc]init];
    return;
}

if([elementName isEqualToString:@"Time"]){
    self.mutableAcquiredTime = [[NSMutableString alloc]init]; 
    return;
}

if([elementName isEqualToString:@"Temperature"]){
    self.mutableTemperatureValue = [[NSMutableString alloc]init];
    return;
}
.
.
. 
```

发现人物：

```
[self.mutableTemperatureValue appendString:string];
[self.mutableWindSpeed appendString:string];
[self.mutableWindDirection appendString:string];
[self.mutableAirPressure appendString:string];
[self.mutableAcquiredDate appendString:string];
[self.mutableAcquiredTime appendString:string]; 
```

和做完。. .

```
 if([elementName isEqualToString:@"Date"]){
    NSLog(@"mutableAcquiredDate : %@", self.mutableAcquiredDate); // this gives the right data
    return;

} 
```

在 viewController .h 文件中

```
@property (strong, nonatomic) IBOutlet UILabel *labelWindSpeed;
@property (strong, nonatomic) IBOutlet UILabel *labelTemperatur;
@property (strong, nonatomic) IBOutlet UILabel *labelAirPressure;
@property (strong, nonatomic) IBOutlet UILabel *labelUpdateDateTime; 
```

在 viewController .m 文件中

```
 //  Create Parser object and start parsing 
self.parser = [[Parser alloc]init];
[self.parser parserStart];

// Assigning the values from Parser Class to labels

// Date and Time
self.labelUpdateDateTime.text = self.parser.mutableAcquiredDate ;
NSLog(@"---------:%@", self.labelUpdateDateTime.text);// This gives all the contents of the xml nodes why?

 // Temperatur
myStartTemperatureValue = [self.parser.mutableTemperatureValue floatValue];
labelTemperatur.text = [NSString stringWithFormat:@"%.1f", myStartTemperatureValue];// This     works also correct. 
```

如何在不列出节点的所有内容的情况下仅从 viewController 访问 Date 节点的内容。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:24:40.370

我找到了将它们放入其中的最简单方法，`NSMutableDictionary`因为您可以通过它们的原始标签访问它们。在解析器的标题中，声明

```
@property (strong, nonatomic) NSMutableDictionary *dic;
BOOL parsing;
NSString *title;
NSString *cont; 
```

并像这样使用代表

```
@synthesize dic;
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{
parsing = YES;
title = elementName;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
if (parsing) {
NSMutableString *str1 = [[NSMutableString alloc] initWithCapacity:1000];
[str1 appendString:string];
if ([dic valueForKey:title] == nil) {
    [dic setValue:str1 forKey:title];
}
else{
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    NSMutableArray *delete = [[NSMutableArray alloc] init];
    if ([[dic objectForKey:title] isKindOfClass:[NSMutableArray class]]){
        for (NSString *str in [dic objectForKey:title]){
            [arr addObject:str];
        }
        [arr addObject:str1];
        for (NSString *s in arr) {
            if ([s isEqualToString:@"\n"]) {
                [delete addObject:s];
            }
        }
        [arr removeObjectsInArray:delete];
        [dic setObject:arr forKey:title];
    }
    else{
        [arr addObject:[dic objectForKey:title]];
        [arr addObject:str1];
        for (NSString *s in arr) {
            if ([s isEqualToString:@"\n"]) {
                [delete addObject:s];
            }
        }
        [arr removeObjectsInArray:delete];
        [dic setObject:arr forKey:title];
    }
}
}
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
if (parsing) {
parsing = NO;
}
} 
```

这会根据它们在 XML 中的标签将它们全部插入到`NSMutableDictionary *dic`XML 中，并通过从不同的类调用它来访问某些对象，例如日期

```
[parser.dic objectForKey:@"Date"]; 
```

这也为具有多个同名节点的文件创建了一个数组

# ruby - Roo Gem 检查空工作表

> ID：15710809
> 
> 赞同：1
> 
> 时间：2013-03-29T20:19:23.357
> 
> 标签：ruby, excel, gem

我正在使用 roo gem 来解析 Excel (xlsx) 文件。但是，文件（工作簿）中总是有一些空工作表。有没有办法在 roo 中查看工作表是否为空`nil`？

**更新**

```
wb = Roo::Excelx.new 'chapter_data.xlsx'

    wb.sheets.each do |sheet|
      wb.default_sheet = sheet
      unless wb.nil?
       code.....
      end
   end 
```

`wb.nil?`不起作用它返回false 。

**更新** 我能够处理此问题的唯一方法是挽救无方法错误。我不喜欢以这种方式处理它，以寻找一种更好的方法来检查工作表是否为空。

```
begin
   header_row = wb.row(1)
 rescue NoMethodError => err
   # do nothing, this sheet is empty can't find a way to check if it is empty pos
 end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T16:23:59.660

找出检查工作表是否为空的最佳方法。

```
wb = Roo::Excelx.new 'chapter_data.xlsx'

wb.sheets.each do |sheet|
  wb.default_sheet = sheet
    if wb.first_row
      code.....
    end
end 
```

The `wb.first_row` returns the index of the first non empty row.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:15:26.880

我可以弄清楚如何在不使用 a 的情况下进行检查的唯一方法`rescue`是执行以下操作

```
unless wb.to_s == 'nil'
  code......
end 
```

愚蠢的是我不能定期`nil`检查。但这有效。

# wordpress - Google images redirect to post WordPress

> ID：15710811
> 
> 赞同：0
> 
> 时间：2013-03-29T20:19:33.350
> 
> 标签：wordpress, google-image-search

Everytime I get a visitor from Google images to my Wordpress blog it takes them to an image page where it shows the image and nothing else. This is useless because it leaves the visitor with an image and no context or content to show.

Is there a way to redirect the google search results to the WordPress post that contains that image? I know it's possible because I've seen it in other blogs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:29:40.430

within your theme create an file called `image.php` and simply add the following code:

```
<?php wp_redirect(get_permalink($post->post_parent)); ?> 
```

this will redirect the attachment page to the post parent, which is usually the page the image is featured on.

# javascript - nodejs jugglingdb belongsTo 和 hasMany 与现有数据库对象的关系

> ID：15710812
> 
> 赞同：2
> 
> 时间：2013-03-29T20:19:36.143
> 
> 标签：javascript, node.js, orm, jugglingdb

jugglingdb 公开了两个函数来创建关系数据库：belongsTo 和 hasMany

我现在问自己如何在日常开发中使用它。

belongsTo 和 hasMany 正在向对象添加函数，但似乎没有办法在现有对象之间创建关系？

有关示例，请参见： [http ://compoundjs.com/juggling.html#hasMany。](http://compoundjs.com/juggling.html#hasMany)

我不想创建对象，而是在现有对象之间创建链接，这将如何工作？

也许我只是误解了这些功能？

玩得开心

亚沙

ps：如果有 1500+ 代表的人可以创建 jugglingdb 标签并将其添加到这个问题中，那会很棒吗？我真的不能说它是否足够相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:46:46.580

当您，即想要为现有作者添加文章时，您可以这样做：

```
User.find(uid, function(err, user) {
        var article = user.articles.build({articleName : 'Article Foo'});
        article.save();
}); 
```

这将在新创建的文章中自动为用户创建一个外键。

# couchdb - 如何在搜索对象位于数组中的视图中为 Couchdb 编写搜索查询？

> ID：15710813
> 
> 赞同：0
> 
> 时间：2013-03-29T20:19:39.277
> 
> 标签：couchdb

我有一份包含以下数据的文件。

**文件 1。**

```
{
    "_id": "7d7db310ff3acc857c7f301f67979de5",
    "_rev": "1-3ed97634540c35292155ad40b99cafc1",
    "categories": [
        "Computer",
        "Mobile",
        "Automobile",
        "Plumbing"
    ],
    "location": [
        "19.374636239520235",
        "72.82339096069336"
    ],
    "gender": "male",
    "username": "ayushcshah",
    "password": "sokdncx76483ynxwhakdkxfka37",
    "email": "ayushcshah@gmail.com"
} 
```

**文件 2。**

```
{
    "_id": "8c499253bce69b992ebe795906fac3d3",
    "_rev": "1-ce394be6ab3c79111344f026e1a3adcf",
    "categories": [
        "Automobile"
    ],
    "location": [
        "19.387757921807914",
        "72.82626360654831"
    ],
    "gender": "male",
    "username": "smithabc",
    "password": "adsadgq36eygdas2ygduabhs",
    "email": "smithabc@gmail.com"
} 
```

我需要一个**VIEW**，我可以在其中将密钥作为任何字符串发送，它会找到一个文档，其中**类别**数组包含搜索字符串，它会向我发送**相关用户的电子邮件地址**值。

示例：如果我将密钥作为“移动”发送，我将获得受人尊敬的用户名值“ayushcshah@gmail.com”

```
key":"Mobile","value":"ayushcshah@gmail.com"
key":"Computer","value":"ayushcshah@gmail.com"
key":"Automobile","value":"ayushcshah@gmail.com"
key":"Automobile","value":"smithabc@gmail.com"
key":"Plumbing","value":"ayushcshah@gmail.com" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:07:52.297

以下地图功能应该足够了：

```
function (doc) {
  if (!doc.categories) return;
  for (var c in doc.categories) {
    emit(doc.categories[c], doc.email);
  }
} 
```

# java - 进度条更新程序占用 CPU

> ID：15710814
> 
> 赞同：1
> 
> 时间：2013-03-29T20:19:49.080
> 
> 标签：java, multithreading, swing, event-dispatch-thread, jprogressbar

我想让我的用户了解 I/O 操作的进度。目前我有一个内部类，我在开始 I/O 之前启动它并在它完成后停止。它看起来像这样：

```
class ProgressUpdater implements Runnable {

        private Thread thread;
        private long last = 0;
        private boolean update = true;
        private long size;

        public ProgressUpdater(long size) {
            this.size = size;
            thread = new Thread(this);
        }

        @Override
        public void run() {
            while (update) {
                if (position > last) {
                    last = position;
                    double progress = (double) position / (double) size * 100d;
                    parent.setProgress((int) progress);
                }
            }
        }

        public void start() {
            thread.start();
        }

        public void stop() {
            update = false;
            parent.setProgress(100);
        }
    } 
```

`parent`是我对我的 UI 的引用，`position`是我外部类中的一个字段，表示我们在 I/O 中取得的进展。停止时我将进度设置为 100%，因为有时 I/O 完成并停止我的更新程序，然后才能完成对先前增量的更新。这只是确保它是 100%。

目前，这有效，我像这样使用它：

```
ProgressUpdater updater = new ProgressUpdater(file.length());
updater.start();
//do I/O
//...
updater.stop(); 
```

问题是循环非常严重地消耗 CPU。我尝试在那里扔一个锁（带有等待/通知），但我不知道在使用等待/通知时我在做什么，所以它只是挂起了我的线程。我能做些什么来阻止它使用这么多 CPU 周期？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:23:51.910

您应该考虑使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。基本上，您在`SwingWorker`提供的后台线程上执行所有 IO，并且有内置的方法将进度报告给 swing 线程。

然后，每当您更新该位置时，您都可以自动更新进度，而不是连续轮询，这是您迄今为止所做的。

看看[Swingworker Timeout](https://stackoverflow.com/questions/7042186/swingworker-timeout)或[SwingWorker with FileReader](https://stackoverflow.com/questions/11608822/swingworker-with-filereader)看看是否有帮助。

另一种解决方案，如果您不想使用 a `SwingWorker`，可能只是`position`直接更新进度条，而不是更新该值，调用如下：

```
SwingUtilities.invokeLater(new Runnable() {
    @Override public void run() {
        getMyProgressBar().setValue(position);
    }
}); 
```

假设您已设置进度条，使其最大值为文件大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T20:26:55.887

首先，永远不要`Thread`在 java 中使用更新 GUI（Swing 组件）。而是使用`javax.swing.Timer`or `javax.swing.SwingWorker`。对于基本 I/O 操作，请使用 [ProgressMonitorInputStream](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。
作为读取文件并将其显示在 JTextArea 和 progrressbar 中的简单示例。看看下面给出的代码：

![在此处输入图像描述](../Images/7dabce37baeed773a23d3e96f41d5c7d.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.io.*;
import java.beans.*;
class ProgressBarFrame extends JFrame 
{
    JProgressBar progressBar;
    int BUFFERSIZE = 10;
    JTextArea textArea;
    MyWorker worker;
    private void createAndShowGUI()
    {
        progressBar = new JProgressBar(0,100);
        progressBar.setStringPainted(true);
        JButton button = new JButton("Read File");
        textArea = new JTextArea(30,100);
        JScrollPane jsp = new JScrollPane(textArea);
        Container c = getContentPane();
        c.add(jsp);
        c.add(progressBar,BorderLayout.NORTH);
        c.add(button,BorderLayout.SOUTH);
        worker = new MyWorker();
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent evt)
            {
                textArea.setText("");
                progressBar.setValue(0);
                if (worker.getState()== SwingWorker.StateValue.DONE || worker.getState()==SwingWorker.StateValue.STARTED)
                {
                    worker.cancel(true);
                    worker = new MyWorker();
                }
                worker.execute();

            }
        });
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    class MyWorker extends SwingWorker<Void, String> 
    {
        MyWorker()
        {
            addPropertyChangeListener(new PropertyChangeListener() 
            {
                public  void propertyChange(PropertyChangeEvent evt) 
                {
                    if ("progress".equals(evt.getPropertyName())) 
                    {
                        progressBar.setValue((Integer)evt.getNewValue());
                    }
                }
            });
        }

        @Override
        public Void doInBackground() throws IOException
        {
            File file = new File("ProgressBarFrame.java");
            long size = file.length();
            long temp = 0;
            BufferedInputStream bfin = new BufferedInputStream(new FileInputStream(file));
            byte[] buffer=new byte[BUFFERSIZE];
            int totalRead = -1;
            while ((totalRead=bfin.read(buffer))!=-1 && ! isCancelled()) 
            {
                temp = temp + totalRead;
                publish(new String(buffer));
                if (bfin.available()<BUFFERSIZE && bfin.available()!= 0)
                buffer = new byte[bfin.available()];
                else if(bfin.available()==0)
                buffer = new byte[1];
                else
                buffer=new byte[BUFFERSIZE];
                setProgress((int)((temp/(float)size) * 100));
                try{Thread.sleep(1);}catch(Exception ex){}
            }
            setProgress(100);
            return null;
        }
        @Override
        protected void process(List<String> chunks) 
        {
            for (String value : chunks) 
            {
                textArea.append(value);
            }
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                ProgressBarFrame pf = new ProgressBarFrame();
                pf.createAndShowGUI();
            }
        });
    }
} 
```

# gradle - Gradle NoClassDefFoundError

> ID：15710821
> 
> 赞同：9
> 
> 时间：2013-03-29T20:20:38.117
> 
> 标签：gradle, geb

所以我正在尝试构建一个简单的 gradle 应用程序，当我运行它时，我得到了

```
geb.ConfigurationLoader$UnableToLoadException: Unable to load configuration @ 'file:/Users/john/Development/groovy/gradlegebautomation/build/resources/test/GebConfig.groovy' (with environment: null)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:297)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:281)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:161)
    at geb.ConfigurationLoader.doGetConf(ConfigurationLoader.groovy:139)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:95)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:114)
    at geb.spock.GebSpec.createConf(GebSpec.groovy:29)
    at geb.spock.GebSpec.createBrowser(GebSpec.groovy:33)
    at geb.spock.GebSpec.getBrowser(GebSpec.groovy:38)
    at geb.spock.GebSpec.methodMissing(GebSpec.groovy:51)
    at geb.spock.GebReportingSpec.setupSpec(GebReportingSpec.groovy:30)
Caused by: java.lang.NoClassDefFoundError: org/apache/ivy/core/report/ResolveReport
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2436)
    at java.lang.Class.getDeclaredMethods(Class.java:1793)
    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)
    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)
    at groovy.grape.GrapeIvy.<init>(GrapeIvy.groovy:75)
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:310)
    at groovy.grape.Grape.getInstance(Grape.java:101)
    at groovy.grape.Grape.grab(Grape.java:136)
    at groovy.grape.GrabAnnotationTransformation.visit(GrabAnnotationTransformation.java:291)
    at org.codehaus.groovy.transform.ASTTransformationVisitor$3.call(ASTTransformationVisitor.java:319)
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:903)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:566)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:542)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:519)
    at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:279)
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:258)
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:244)
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:202)
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:212)
    at groovy.util.ConfigSlurper.parse(ConfigSlurper.groovy:146)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:295)
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.apache.ivy.core.report.ResolveReport
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 32 more 
```

所以我创建了文件夹结构 src/test/groovy 和 src/main/groovy。我还在 test/groovy 中创建了另一个名为 store 的文件夹。因此，如果我将 GebConfig.groovy 放在 src/test/groovy 和 src/test/groovy/store 中，我可以让它工作。还有什么我得到上面的错误。这是我的 build.gradle

```
apply plugin: 'groovy'

repositories {
    mavenCentral()
}

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '2.0.5'
    groovy group: 'org.apache.ivy', name:'ivy', version:'2.2.0'
    compile 'org.codehaus.groovy:groovy-all:2.0.5'
    testCompile 'junit:junit:4.11'
    testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
    testCompile 'org.gebish:geb-spock:0.9.0-RC-1'
    testCompile 'org.seleniumhq.selenium:selenium-firefox-driver:2.31.0'
} 
```

这是我的测试

```
package groovy.store

import geb.spock.GebReportingSpec

class SimpleSpec extends GebReportingSpec {

    def "Doing a simple Guest checkout"() {
        given: "A test"
            def hello

        when: ""
            hello = "Hello"

        then:
            assert hello == "Hello"
    }
} 
```

想法？

更新 v1：

好的，看起来我需要在我的 build.gradle 中添加一个新的依赖项。我添加了常春藤部门，现在我收到了这个错误：

```
* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileTestGroovy'.
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:72)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:49)
    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
    at org.gradle.internal.Factories$1.create(Factories.java:22)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:179)
    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:232)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:142)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:275)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.executeTask(DefaultTaskPlanExecutor.java:52)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.processTask(DefaultTaskPlanExecutor.java:38)
    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:30)
    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:84)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
    at org.gradle.internal.Factories$1.create(Factories.java:22)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:124)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:112)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:134)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:166)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:113)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:81)
    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:38)
    at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:39)
    at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:25)
    at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
    at org.gradle.api.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
    at org.gradle.launcher.Main.doAction(Main.java:48)
    at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
    at org.gradle.launcher.Main.main(Main.java:39)
    at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
    at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:32)
    at org.gradle.launcher.GradleMain.main(GradleMain.java:26)
Caused by: org.gradle.api.internal.tasks.compile.CompilationFailedException: Compilation failed; see the compiler error output for details.
    at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:121)
    at org.gradle.api.internal.tasks.compile.ApiGroovyCompiler.execute(ApiGroovyCompiler.java:39)
    at org.gradle.api.internal.tasks.compile.daemon.CompilerDaemonServer.execute(CompilerDaemonServer.java:52)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)
    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66) 
```

这是我的 GebConfig

```
import org.openqa.selenium.firefox.FirefoxDriver

//reportsDir = "target/geb-reports"

// default is to use firefox
driver = {
    def driver = new FirefoxDriver()
    driver.manage().window().maximize()
    return driver
}

environments {
    'firefox' {
        driver = {
            def driver = new FirefoxDriver()
            driver.manage().window().maximize()
            return driver
        }   
    }
} 
```

更新 V2：

哦，我看看我是否在堆栈中走得更高一点，我会看到以下内容：

```
startup failed:
Could not instantiate global transform class org.spockframework.compiler.SpockTransform specified at jar:file:/Users/john/.gradle/caches/artifacts-23/filestore/org.spockframework/spock-core/0.7-groovy-2.0/jar/4de0b428de0c14b6eb6375d8174f71848cbfc1d7/spock-core-0.7-groovy-2.0.jar!/META-INF/services/org.codehaus.groovy.transform.ASTTransformation  because of exception org.spockframework.util.IncompatibleGroovyVersionException: The Spock compiler plugin cannot execute because Spock 0.7.0-groovy-2.0 is not compatible with Groovy 1.8.6\. For more information, see http://versioninfo.spockframework.org
Spock location: file:/Users/john/.gradle/caches/artifacts-23/filestore/org.spockframework/spock-core/0.7-groovy-2.0/jar/4de0b428de0c14b6eb6375d8174f71848cbfc1d7/spock-core-0.7-groovy-2.0.jar
Groovy location: file:/Users/john/bin/gradle-1.5/lib/groovy-all-1.8.6.jar 
```

更新 v3：

所以我在我的依赖项中添加了常规的 groovy，见上文。我没有通过编译阶段并在测试阶段失败。这是报告中出现的信息

```
geb.ConfigurationLoader$UnableToLoadException: Unable to load configuration from class 'class GebConfig' (with environment: null)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:297)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:290)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:226)
    at geb.ConfigurationLoader.doGetConfFromClass(ConfigurationLoader.groovy:200)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:95)
    at geb.ConfigurationLoader.getConf(ConfigurationLoader.groovy:114)
    at geb.spock.GebSpec.createConf(GebSpec.groovy:29)
    at geb.spock.GebSpec.createBrowser(GebSpec.groovy:33)
    at geb.spock.GebSpec.getBrowser(GebSpec.groovy:38)
    at geb.spock.GebSpec.methodMissing(GebSpec.groovy:51)
    at geb.spock.GebReportingSpec.setupSpec(GebReportingSpec.groovy:30)
Caused by: java.lang.ExceptionInInitializerError
    at java.lang.Class.forName(Class.java:249)
    at groovy.util.ConfigSlurper.parse(ConfigSlurper.groovy:127)
    at geb.ConfigurationLoader.loadRawConfig(ConfigurationLoader.groovy:295)
    ... 10 more
Caused by: java.lang.RuntimeException: No suitable ClassLoader found for grab
    at groovy.grape.GrapeIvy.chooseClassLoader(GrapeIvy.groovy:181)
    at groovy.grape.GrapeIvy.grab(GrapeIvy.groovy:247)
    at groovy.grape.GrapeIvy.grab(GrapeIvy.groovy:236)
    at groovy.grape.Grape.grab(Grape.java:129)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T16:19:46.550

在这个问题上首先困扰我的是，无法从配置文件中选择要使用的环境；你的第一个清单说：最喜欢的

所以我正在尝试构建一个简单的 gradle 应用程序，当我运行它时，我得到了

**无法加载配置@'file:/Users/john/Development/groovy/gradlegebautomation/build/resources/test/GebConfig.groovy'（环境：null）**

所以我可能对此不感兴趣，但我会尝试让它选择使用哪个环境，比如 .environment('firefox') - 抱歉忘记了语法

# javascript - 如何传递给函数的 Seq 响应？

> ID：15710828
> 
> 赞同：0
> 
> 时间：2013-03-29T20:21:03.180
> 
> 标签：javascript, node.js, asynchronous, seq

我想传入`Seq([644511,340755])`来自异步函数的响应`getProjects`。

所以我尝试了

```
...
var ids = pivotal.getProjects(function (err, data) {
  var ids = data.project.map(function(x) { return parseInt(x.id); });
  console.log("IDS_i: ".red + ids);
});
console.log("IDS_e: ".red + ids);

Seq(ids)
  .parEach(function(project_id) {
.... 
```

日志：

```
IDS_e: undefined
GET /stories 200 34ms
GET /favicon.ico 404 2ms
IDS_i: 644511,340755 
```

我想知道也许我应该把它放入`Seq`：

```
Seq()
   .seq(function() {
      pivotal.getProjects(function (err, data) {
        data.project.map(function(x) { return parseInt(x.id); });
      });
    } 
```

但在这种情况下如何将 id 作为数组返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:28:08.300

`getProjects`也是异步的。基本规则：您不能从异步函数返回任何值。您必须在回调函数中进行所有处理。在您的数组聚合之前，将继续执行。所以你的`seq`方法就是你需要的：

```
Seq()
    .seq(function() {
        pivotal.getProjects(this);
    })
    .flatten()
    .seqEach(function(project) {
        var projectId = project.id;
        myService.someOtherAsyncAction(projectId, this);
    }); 
```

`node-seq`将`seq`通过`this`作为回调函数传递给您的异步函数来处理将回调的结果传递给下一步。这就是流程和结果传递到下一步的方式。`flatten`将确保每个`project`元素都可以作为堆栈中的单个元素使用，以便您可以`seqEach`在下一步中进行操作。

# iphone - check for user logged in before going to scene in storyboards

> ID：15710829
> 
> 赞同：0
> 
> 时间：2013-03-29T20:21:15.743
> 
> 标签：iphone, ios, xcode, login, uistoryboard

First, I am using storyboards for my navigation. I have come to a point where I am at a menu screen that goes off to 4 different views (just with a navigation controller) for 2 of those views I want it to check if the user has logged in and if not I want the LoginViewController/View brought up. I am very new to objective c/xcode and after searching for a solution this is what i have come up with. I do not know how to tie this in to my program. Does this just need to be linked to my button or am i completely off with what i am doing now?

```
if (self.appDelegate.userHasActiveLogin) {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"ViewController2"];
    [vc setModalPresentationStyle:UIModalPresentationFullScreen];

    [self presentModalViewController:vc animated:YES];}
else {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginController"];
    [vc setModalPresentationStyle:UIModalPresentationFullScreen];

    [self presentModalViewController:vc animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:56:56.587

What you could do is to create manual segues in your storyboard.

按住 Ctrl 键从您的菜单控制器（橙色符号）拖动到子控制器，选择 push。单击 segue 并在属性检查器中为其指定一个标识符。现在您可以检查用户是否已登录，然后有条件`[self performSegueWithIdentifier:@"logged in segue" sender:self];`地调用您菜单的 VC。

条件是所有 VC 都必须在同一个故事板中，但我怀疑是这样。

# php - php-fpm 拒绝启动（缺少路径 /usr/var）

> ID：15710835
> 
> 赞同：1
> 
> 时间：2013-03-29T20:21:41.923
> 
> 标签：php

在 OS X 附带的默认 php-fpm.conf 文件中，它说“默认前缀是 /usr/var”。但是，此路径在 OS X 上不存在，因此 php-fpm 拒绝启动。

我可以通过设置来纠正这种情况`error_log = syslog`，但是处理这种情况的最佳方法是什么？只需创建缺少的目录？

所有这些 UNIX 路径约定对我来说有点模糊。

```
; Error log file
; If it's set to "syslog", log is sent to syslogd instead of being written
; in a local file.
; Note: the default prefix is /usr/var
; Default Value: log/php-fpm.log
;error_log = log/php-fpm.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:23:38.393

error_log = /var/log/php-fpm.log

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T18:04:42.490

打开 PHP-FPM 配置文件进行编辑：

`open -e /usr/local/etc/php/7.2/php-fpm.conf`

在写着 的行下方`;error_log = log/php-fpm.log`，**添加以下行：**

`/var/log/php-fpm.log`

保存并关闭`php-fpm.conf`文件。

启动 PHP-FPM：

`php-fpm`

# html - 如何在 CSS 中设置网站以响应不同的分辨率？

> ID：15710839
> 
> 赞同：0
> 
> 时间：2013-03-29T20:21:46.557
> 
> 标签：html, css, responsive-design

对于一个大学项目，我需要使用我的老师给我的 HTML 格式的网站，并进行设置，以便如果分辨率降低到最大宽度为 640 像素，我需要取出图片和导航栏旁边。我只是不确定如何在 CSS 中对其进行编程，以便在满足 640px 时可以隐藏部分？抱歉，如果这需要大量解释，但我们现在没有网页设计教科书，我无法在学校在线数据库上找到任何可以参考的示例，提前弄清楚谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:24:48.803

如果屏幕宽度小于 640 像素，将应用此媒体查询中的 css。这适用于大多数现代浏览器。请记住，这仅限于您可以使用 css 执行的操作。如果你想操纵 dom，你将不得不使用 javascript。要隐藏元素，您可以将它们设置为*display:none;*

```
@media all and (max-width: 640px) {
  /* css*/
} 
```

非常简单的演示。如果结果窗口小于 640px，它将变为灰色：

[**演示**](http://jsfiddle.net/cKzNz/)

# node.js - 有没有比 setInterval 更好的方法来定期执行 node.js 回调？

> ID：15710850
> 
> 赞同：0
> 
> 时间：2013-03-29T20:22:28.187
> 
> 标签：node.js, callback, stream

我有一个 node.js 脚本，它将流写入这样的数组：

```
var tempCrossSection = [];

stream.on('data', function(data) {
    tempCrossSection.push(data);
}); 
```

以及另一个清空数组并对数据进行一些处理的回调，如下所示：

```
var crossSection = [];

setInterval(function() {
    crossSection = tempCrossSection;
    tempCrossSection = [];

    someOtherFunction(crossSection, function(data) {
        console.log(data);
    }
}, 30000); 
```

在大多数情况下这是可行的，但有时 setInterval 回调将在 30000 毫秒的间隔内执行多次（并且它不是坐在事件循环上的排队调用）。我也将其作为具有相同结果的 cronJob 完成。我想知道是否有办法确保 setInterval 每 30000 毫秒只执行一次。也许有一个更好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:33:57.750

当你有异步的东西时，你应该使用 setTimeout ，否则如果异步函数需要很长时间，你最终会遇到问题。

```
var crossSection = [];

setTimeout(function someFunction () {
    crossSection = tempCrossSection;
    tempCrossSection = [];

    someOtherFunction(crossSection, function(data) {
        console.log(data);
        setTimeout(someFunction, 30000);
    }
}, 30000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:36:30.427

Timers in javascript are not as reliable as many think. It sounds like you found that out already! The key is to measure the time elapsed since the last invocation of the timer's callback to decide if you should run in this cycle or not.

See [http://www.sitepoint.com/creating-accurate-timers-in-javascript/](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)

The ultimate goal there was to build a timer that fires, say every second (higher precision than your timeout value), that then decides if **it** is going to fire your function.

# ios - Objective-C检查旋转的UIViews的子视图是否相交？

> ID：15710853
> 
> 赞同：10
> 
> 时间：2013-03-29T20:22:49.240
> 
> 标签：ios, objective-c, frame, intersection, separating-axis-theorem

我不知道从哪里开始。显然`CGRectIntersectsRect`在这种情况下不起作用，你会明白为什么。

我有一个 UIView 的子类，其中有一个 UIImageView，它位于 UIView 的确切中心：

![旋转前的 UIView](../Images/aa92a8d811fa554b5069347b87dd5825.png)

然后我旋转自定义 UIView 以保持内部 UIImageView 的框架，同时仍然能够执行 CGAffineRotation。生成的框架如下所示：

![旋转后的 UIView](../Images/4ef12a8a4f6373d45d1887b00d5874ef.png)

我需要防止用户使这些 UIImageViews 相交，但我不知道如何检查两个 UIImageViews 之间的交集，因为它们的框架不仅不适用于父 UIView，而且它们在不影响它们的框架的情况下旋转。

我尝试的唯一结果是不成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T21:02:09.583

以下算法可用于检查两个（旋转或其他变换的）视图是否重叠：

*   用于`[view convertPoint:point toView:nil]`将两个视图的 4 个边界点转换为公共坐标系（窗口坐标）。
*   转换后的点形成两个凸四边形。
*   使用[SAT（分离轴定理）](http://www.codezealot.org/archives/55)检查四边形是否相交。

这：[http](http://www.geometrictools.com/Documentation/MethodOfSeparatingAxes.pdf) ://www.geometrictools.com/Documentation/MethodOfSeparatingAxes.pdf是包含伪代码的算法的另一种描述，更多可以通过谷歌搜索“分离轴定理”找到。

* * *

*更新：*我试图为“分离轴定理”创建一个 Objective-C 方法，这就是我得到的。到目前为止，我只做了几个测试，所以我希望没有太多错误。

```
- (BOOL)convexPolygon:(CGPoint *)poly1 count:(int)count1 intersectsWith:(CGPoint *)poly2 count:(int)count2; 
```

测试 2 个凸多边形是否相交。两个多边形都作为`CGPoint`顶点数组给出。

```
- (BOOL)view:(UIView *)view1 intersectsWith:(UIView *)view2 
```

测试（如上所述）两个任意视图是否相交。

执行：

```
- (void)projectionOfPolygon:(CGPoint *)poly count:(int)count onto:(CGPoint)perp min:(CGFloat *)minp max:(CGFloat *)maxp
{
    CGFloat minproj = MAXFLOAT;
    CGFloat maxproj = -MAXFLOAT;
    for (int j = 0; j < count; j++) {
        CGFloat proj = poly[j].x * perp.x + poly[j].y * perp.y;
        if (proj > maxproj)
            maxproj = proj;
        if (proj < minproj)
            minproj = proj;
    }
    *minp = minproj;
    *maxp = maxproj;
}

-(BOOL)convexPolygon:(CGPoint *)poly1 count:(int)count1 intersectsWith:(CGPoint *)poly2 count:(int)count2
{
    for (int i = 0; i < count1; i++) {
        // Perpendicular vector for one edge of poly1:
        CGPoint p1 = poly1[i];
        CGPoint p2 = poly1[(i+1) % count1];
        CGPoint perp = CGPointMake(- (p2.y - p1.y), p2.x - p1.x);

        // Projection intervals of poly1, poly2 onto perpendicular vector:
        CGFloat minp1, maxp1, minp2, maxp2;
        [self projectionOfPolygon:poly1 count:count1 onto:perp min:&minp1 max:&maxp1];
        [self projectionOfPolygon:poly2 count:count1 onto:perp min:&minp2 max:&maxp2];

        // If projections do not overlap then we have a "separating axis"
        // which means that the polygons do not intersect:
        if (maxp1 < minp2 || maxp2 < minp1)
            return NO;
    }

    // And now the other way around with edges from poly2:
    for (int i = 0; i < count2; i++) {
        CGPoint p1 = poly2[i];
        CGPoint p2 = poly2[(i+1) % count2];
        CGPoint perp = CGPointMake(- (p2.y - p1.y), p2.x - p1.x);

        CGFloat minp1, maxp1, minp2, maxp2;
        [self projectionOfPolygon:poly1 count:count1 onto:perp min:&minp1 max:&maxp1];
        [self projectionOfPolygon:poly2 count:count1 onto:perp min:&minp2 max:&maxp2];

        if (maxp1 < minp2 || maxp2 < minp1)
            return NO;
    }

    // No separating axis found, then the polygons must intersect:
    return YES;
}

- (BOOL)view:(UIView *)view1 intersectsWith:(UIView *)view2
{
    CGPoint poly1[4];
    CGRect bounds1 = view1.bounds;
    poly1[0] = [view1 convertPoint:bounds1.origin toView:nil];
    poly1[1] = [view1 convertPoint:CGPointMake(bounds1.origin.x + bounds1.size.width, bounds1.origin.y) toView:nil];
    poly1[2] = [view1 convertPoint:CGPointMake(bounds1.origin.x + bounds1.size.width, bounds1.origin.y + bounds1.size.height) toView:nil];
    poly1[3] = [view1 convertPoint:CGPointMake(bounds1.origin.x, bounds1.origin.y + bounds1.size.height) toView:nil];

    CGPoint poly2[4];
    CGRect bounds2 = view2.bounds;
    poly2[0] = [view2 convertPoint:bounds2.origin toView:nil];
    poly2[1] = [view2 convertPoint:CGPointMake(bounds2.origin.x + bounds2.size.width, bounds2.origin.y) toView:nil];
    poly2[2] = [view2 convertPoint:CGPointMake(bounds2.origin.x + bounds2.size.width, bounds2.origin.y + bounds2.size.height) toView:nil];
    poly2[3] = [view2 convertPoint:CGPointMake(bounds2.origin.x, bounds2.origin.y + bounds2.size.height) toView:nil];

    return [self convexPolygon:poly1 count:4 intersectsWith:poly2 count:4];
} 
```

* * *

斯威夫特版本。（通过扩展将此行为添加到 UIView）

```
extension UIView {

func projection(of polygon: [CGPoint], perpendicularVector: CGPoint) -> (CGFloat, CGFloat) {
    var minproj = CGFloat.greatestFiniteMagnitude
    var maxproj = -CGFloat.greatestFiniteMagnitude

    for j in 0..<polygon.count {
        let proj = polygon[j].x * perpendicularVector.x + polygon[j].y * perpendicularVector.y
        if proj > maxproj {
            maxproj = proj
        }

        if proj < minproj {
            minproj = proj
        }
    }

    return (minproj, maxproj)
}

func convex(polygon: [CGPoint], intersectsWith polygon2: [CGPoint]) -> Bool {
    //
    let count1 = polygon.count
    for i in 0..<count1 {
        let p1 = polygon[i]
        let p2 = polygon[(i+1) % count1]
        let perpendicularVector = CGPoint(x: -(p2.y - p1.y), y: p2.x - p1.x)

        let m1 = projection(of: polygon, perpendicularVector: perpendicularVector)
        let minp1 = m1.0
        let maxp1 = m1.1

        let m2 = projection(of: polygon2, perpendicularVector: perpendicularVector)
        let minp2 = m2.0
        let maxp2 = m2.1

        if maxp1 < minp2 || maxp2 < minp1 {
            return false
        }
    }
    //
    let count2 = polygon2.count
    for i in 0..<count2 {
        let p1 = polygon2[i]
        let p2 = polygon2[(i+1) % count2]
        let perpendicularVector = CGPoint(x: -(p2.y - p1.y), y: p2.x - p1.x)

        let m1 = projection(of: polygon, perpendicularVector: perpendicularVector)
        let minp1 = m1.0
        let maxp1 = m1.1

        let m2 = projection(of: polygon2, perpendicularVector: perpendicularVector)
        let minp2 = m2.0
        let maxp2 = m1.0

        if maxp1 < minp2 || maxp2 < minp1 {
            return false
        }
    }
    //
    return true
}

func intersects(with someView: UIView) -> Bool {
    //
    var points1 = [CGPoint]()
    let bounds1 = bounds
    let p11 = convert(bounds1.origin, to: nil)
    let p21 = convert(CGPoint(x: bounds1.origin.x + bounds1.size.width, y: bounds1.origin.y), to: nil)
    let p31 = convert(CGPoint(x: bounds1.origin.x + bounds1.size.width, y: bounds1.origin.y + bounds1.size.height) , to: nil)
    let p41 = convert(CGPoint(x: bounds1.origin.x, y: bounds1.origin.y + bounds1.size.height), to: nil)
    points1.append(p11)
    points1.append(p21)
    points1.append(p31)
    points1.append(p41)
    //
    var points2 = [CGPoint]()
    let bounds2 = someView.bounds
    let p12 = someView.convert(bounds2.origin, to: nil)
    let p22 = someView.convert(CGPoint(x: bounds2.origin.x + bounds2.size.width, y: bounds2.origin.y), to: nil)
    let p32 = someView.convert(CGPoint(x: bounds2.origin.x + bounds2.size.width, y: bounds2.origin.y + bounds2.size.height) , to: nil)
    let p42 = someView.convert(CGPoint(x: bounds2.origin.x, y: bounds2.origin.y + bounds2.size.height), to: nil)
    points2.append(p12)
    points2.append(p22)
    points2.append(p32)
    points2.append(p42)
    //
    return convex(polygon: points1, intersectsWith: points2)
} 
```

# internet-explorer - IE 问题 - Textarea 始终在一个字符串中显示文本，没有换行符

> ID：15710858
> 
> 赞同：0
> 
> 时间：2013-03-29T20:22:58.853
> 
> 标签：internet-explorer, textarea, line-breaks

我正在使用 Jquery load() 函数将文本文件加载到页面上的 Textarea 部分。能够在所有浏览器中按预期显示文本，并且 FFox 和 chrome 可以毫无问题地显示带有行尾的文本，但 IE 正在显示所有文本而没有任何换行符。请指教。下面是我的代码：

```
<script>
$(document).ready(function() {
   $("#contentArea").load("test.txt");
});
</script>

<textarea id="contentArea"  rows="12" cols="80" disabled="yes" style="color:#663300;font-size:95%;background:#F5F5F5;line-height:25px;border:0px;font-weight:bold;font-family:Trebuchet MS;"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:27:02.857

我相信如果您将 Textarea 的值设置为文件的内容，IE 也会看到换行符。

所以：

```
 $(document).ready(function(){
     $.get('test.txt', function(contents) {
           $("contentArea").val(contents);
     },'text');
  }); 
```

HTH。

# java - Java 代理设置 - Ubuntu

> ID：15710860
> 
> 赞同：5
> 
> 时间：2013-03-29T20:23:10.667
> 
> 标签：java, ubuntu, proxy, network-programming

如何从命令行在 Ubuntu（10.04 或 12.04）中设置 Java 代理设置？我的目标是获得直接连接，但默认情况下它从浏览器设置中获取，这些设置是通过代理进行的——只是我不希望 Java 通过代理。

我在 Ubuntu 中运行一个应用程序服务器，它为远程桌面会话提供服务。我可以将 Java 控制面板放入用户的桌面，然后他们（每个用户）可以在网络设置下设置代理设置。但是 - 这意味着我必须告诉每个用户进行此设置，这是不可行的。

我希望通过服务器本身的一些命令行或环境变量来设置它，所以它默认为“直接连接”。我不熟悉Java编程，给我Java代码也无济于事，我认为必须可以在Java启动时设置默认值？欢迎任何指点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-21T03:56:27.683

您可以编辑而不是命令行[`$javaDirectory/jre/lib/net.properties`](https://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html)。

删除`#`前面的：

```
http.proxyHost="proxy host"
http.proxyPort="proxy port"
https.proxyHost="proxy host"
https.proxyPort="proxy port" 
```

并在那里设置您的代理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:51:38.980

您可以通过命令行导出**http_proxy**环境变量。

前任：

```
$ export http_proxy=http://proxy-server:port 
```

还有一个环境变量**ftp_proxy**，以备不时之需。

# javascript - 加载页面片段时jQuery加载（URL）不起作用？

> ID：15710861
> 
> 赞同：0
> 
> 时间：2013-03-29T20:23:25.110
> 
> 标签：javascript, jquery, html

我有这个页面，第一个按钮工作正常。

我想在按下第二个按钮时给我href中的链接，我试过这样，但我得到了整个页面，而不仅仅是链接的值，为什么？

```
<html>
<head>
  <script src="jquery.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){

      var url = "http://localhost/test/asdfasdf.php";

      $("#button").on("click", function() {
        $('body').load( url  );
       });

      $("#button2").on('click',function(){
        $('body').load( url +"#link" );
      });
    });
</script>
</head>
<body>
  <input type="button" id="button" value="load" />
  <input type="button" id="button2" value="search for a tag" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:24:58.330

我想你想要一个空间：

```
$('body').load(url + " #link"); 
```

[http://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

您似乎想要的只是该URL`href`上的`a#link`元素。因此，无需将其加载到 中`<body>`，只需发出 AJAX 请求，然后查看结果：

```
$.ajax({
    type: "GET",
    url: "http://localhost/test/asdfasdf.php",
    dataType: "html"
}).done(function (data) {
    var the_link = $(data).find("#link");
    alert(the_link.attr("href"));
}); 
```

并将 放入`href`中`<body>`，在方法中添加这一行`.done()`：

```
$("body").html(the_link.attr("href"));
// or
$("body").append(the_link.attr("href")); 
```

但是如果你真的想将`a#link`元素加载到`<body>`中，做你之前所做的，然后寻找`a#link`元素并获取它的属性：

```
$('body').load(url + " #link", function () {
    var the_link = $("#link");
    alert(the_link.attr("href"));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T20:25:06.287

**编辑**

您正在尝试`<a>`在不同页面上捕获 href 。试一试：

```
$.get(url+' #link', function(data) {
    var $link = $(data).find('a').attr('href');
    alert($link);
}); 
```

这是我最好的猜测，但它是在黑暗中拍摄的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:25:44.537

当前，您的代码评估为`.load('http://localhost/test/asdfasdf.php#link')`，其中`#link`是无用的片段。您需要一个空间来产生 jQuery 的自动 DOM 解析和元素加载的特殊行为。

```
$("body").load(url + " #link"); 
```

编辑：获取实际链接值：

```
$.get(url).done(function (html) {
    console.log($(html).find('#link').attr('href'));
}); 
```

您还可以附加到回调`body`内部。`.done`

# windows - 使用 open 命令传递多个参数

> ID：15710863
> 
> 赞同：2
> 
> 时间：2013-03-29T20:23:34.127
> 
> 标签：windows, shell, vim, registry, explorer

我正在寻找在单个应用程序实例中打开多个文档的方法。例如，在一个新的 gVim 实例中打开多个文档。

我之前在这里找到了这段代码，但它并没有达到我想要的效果。

```
Windows Registry Editor Version 5.00
[HKEY_CLASSES_ROOT\*\Shell\Open with &Vim]
[HKEY_CLASSES_ROOT\*\Shell\Open with &Vim\command]
@="\"C:\\Users\\avt\\Programs\\PortableApps\\gVimPortable\\gVimPortable.exe\" -p --remote-tab-silent \"%1\" \"%*\"" 
```

问题是它给出了类似的效果，但不是我想要的效果（它在现有的 gVim 实例中打开选定的文档，而不是在它们自己的新 gVim 实例中打开所有文档）。我想要的是这样的：

1.  在资源管理器中突出显示 5 个文档
2.  打开它们
3.  单个 gVim 实例打开，所有 5 个文档作为选项卡

我认为这会起作用，只要我可以传递多个参数！

```
Windows Registry Editor Version 5.00
[HKEY_CLASSES_ROOT\*\Shell\Open with &Vim]
[HKEY_CLASSES_ROOT\*\Shell\Open with &Vim\command]
@="\"C:\\Users\\avt\\Programs\\PortableApps\\gVimPortable\\gVimPortable.exe\" -p \"%allselecteddocuments\"" 
```

谢谢！

编辑：我刚刚发现我可以通过添加自定义 SendTo 命令来做到这一点（在您的 SendTo 文件夹中创建一个快捷方式以将 gVim 添加 -p 到目标。有什么方法可以在 SendTo 菜单之外执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-04T19:42:52.627

在文件夹中创建一个`C:\Users\\\<user>\AppData\Roaming\Microsoft\Windows\SendTo`只有 exe 名称的快捷方式。

现在您应该能够选择随机的多个文件并使用上下文`SendTo\<shortcut>` 使用您指定的 exe 打开它们。

# plone - 在 Plone 集合中列出过去的事件和具有特定类别的所有新闻项目

> ID：15710865
> 
> 赞同：1
> 
> 时间：2013-03-29T20:23:42.913
> 
> 标签：plone

使用 Plone 4.2，我想创建一个显示：

*   所有过去的事件**和**
*   具有特定类别的所有新闻项目
*   Nice-to-have：按开始时间（在事件的情况下）或发布日期（在新闻项目的情况下）排序。如果这是不可能的，那么就按出版日期订购所有

这怎么可能？据我所知，我不能有标准的“或”组合，而只有“与”

背景：我想要一个“事件档案”。问题是旧的“事件”只能在这个 plone 站点上以*“本月的事件概述”*类型的新闻项目的形式提供（因为它们实际上来自另一个 CMS 并且是导入的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:37:48.907

好的，这不适用于香草克隆系列。唯一的解决方案是安装[AdvancedQuery](https://pypi.python.org/pypi/Products.AdvancedQuery)并创建自定义模板和目录查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:42:36.257

您仍然可以通过在 portal_types-tool 中激活旧样式集合来使用它们。它们还提供了一个“或”运算符，但已被弃用。

# vb.net - 如何在 Visual Basic 中从 GridView 构建 CSV 文件？

> ID：15710871
> 
> 赞同：0
> 
> 时间：2013-03-29T20:24:02.587
> 
> 标签：vb.net, gridview, csv

我在 VB.Net 中生成了一份报告，该报告显示在 GridView 中。数据是根据用户输入的一些约束从 SQL 中提取的，并且可以是任意大小，具体取决于这些约束。我希望能够从网格中获取这些值并将它们放入 CSV 以获取可下载的报告，而无需重新运行我的 SQL 选择（我知道如何以这种方式构建一个），最好以通用方式进行，以便可以轻松重用. 这是我目前所拥有的。它生成一个 CSV，但只有标题存在。

```
Protected Sub btnExcel_Click(sender As Object, e As EventArgs) Handles btnExcel.Click
    Dim strOutput As New StringBuilder

    Response.ContentType = "application/csv"
    ' Remove the charset from the Content-Type header.
    Response.Charset = ""
    ' Turn off the view state.
    Me.EnableViewState = False
    Response.AddHeader("Content-Disposition", "filename=report.csv;")

    strOutput.AppendLine(GetCSVLine(grid.HeaderRow.Cells))
    For Each row As GridViewRow In grid.Rows
        strOutput.AppendLine(GetCSVLine(row.Cells))
    Next

    Response.Write(strOutput)

    Response.Flush()

    Response.End()
End Sub

Private Function GetCSVLine(cells As TableCellCollection) As String
    Dim returnValue As String = ""

    For Each cell As TableCell In cells
        returnValue += cell.Text + ","
    Next

    Return returnValue
End Function 
```

和aspx页面

```
 <asp:GridView ID="grid" runat="server" EnableModelValidation="True" AutoGenerateColumns = "false">
                    <Columns>
                        <asp:TemplateField HeaderText="Name">
                            <ItemTemplate>
                                <asp:Label ID="lblName" runat="server" Text='<%# Bind("Name")%>'/>&nbsp;
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Location">
                            <ItemTemplate>
                                <asp:Label ID="lblLocation" runat="server" Text='<%# Bind("Location")%>'/>&nbsp;
                            </ItemTemplate>
                        </asp:TemplateField>
<!-- There are a few more fields after this, using the same structure --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:59:43.760

抱歉，我在这里跑了，但我认为因为每一行都包含一组`Label`控件，其中包含其中的文本，所以你不能直接`cell.Text`对表格单元格使用来获取内容。

您可能需要做的是[`FindControl`](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)对每一行使用该方法以获取相关控件，然后访问您检索的每个控件的属性以获取您需要在 CSV 中推出的数据。就像是：

```
For Each row As GridViewRow In grid.Rows
    'In each row, find the control which contains the data and then get the text of the control
    Dim nameLabel As Label = CType(row.FindControl("lblName"), Label)
    Dim nameValue As String = nameLabel.Text

    'Once you have all the values, write out the StringBuilder like you are doing already
Next 
```

# c++ - Intel (windows) c++ 编译器并将其库实现更改为 gcc。可能吗？

> ID：15710875
> 
> 赞同：4
> 
> 时间：2013-03-29T20:24:17.977
> 
> 标签：c++, visual-studio, compiler-construction, c++11, intel

不确定这是否是正确的地方，但这里是

在英特尔网站上的一个[页面上，它指出：](http://software.intel.com/en-us/articles/intel-c-compiler-for-windows-general-compatibility-with-other-products)

> 适用于 Windows 的英特尔 C++ 编译器**使用 Microsoft Visual C++ 头文件、库和链接器**。Microsoft 控制定义命名空间的头文件。联系 Microsoft 的技术支持，参考 Microsoft 在此问题上对 C++ 标准的一致性...[链接](http://software.intel.com/en-us/articles/intel-c-compiler-for-windows-general-compatibility-with-other-products)

英特尔（或其他）是否有指南将库从由**Visual Studio管理的库更改为由****gcc**提供的库（也在我的 Windows 机器上）。我想这样做的原因是利用 Visual Studio 版本不支持的一些新的 C++11 功能（通常是这种情况）

如果这是不可能的，因为我目前对上述内容的了解不正确，有人可以向我解释为什么不这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:47:35.887

这不是一个实际的可能性。

如果 intel 编译器 (icl) 无法`PATH`在 .

然后要查看您遇到的问题，就使用 gcc 标头而言，您将执行以下操作：

*   使 icl 抑制其自己的预定义宏。
*   让它使用 gcc 的预定义宏。
*   使其抑制其标准包含搜索。
*   让它使用 gcc 的标准包含搜索。

这些都不难，当您完成所有操作并尝试构建您的`HelloWorld.cpp`. 时，错误会告诉您 gcc 头文件中充满了 gcc 编译器的内置关键字，而 icl: `__builtin_va_list`、`__attribute__`、`__cdecl__`等是不知道`__nothrow__`的。

您可能会尝试通过预处理器宏成功删除或重新定义所有这些。或者你可能会放弃，我会敦促后者。

# npm - 强制 grunt 插件更新

> ID：15710883
> 
> 赞同：6
> 
> 时间：2013-03-29T20:24:53.857
> 
> 标签：npm, gruntjs

我正在使用带有[grunt-contrib-copy](https://github.com/gruntjs/grunt-contrib-copy)插件的[Grunt 。](http://gruntjs.com/)最近提交了一个新版本（0.4.1），它有一个不错的新功能，我想利用它。但是，当我尝试使用 更新时，没有任何反应。`npm update grunt-contrib-copy`

这是我当前的版本：

```
$ sudo npm list grunt-contrib-copy
UI@2.0.89 /Users/username/src/project/UI
└── grunt-contrib-copy@0.4.0 
```

这是我的更新尝试：

```
$ sudo npm update grunt-contrib-copy 
```

没有输出——`npm list`仍然显示 0.4.0。

验证可用的最新版本：

```
$ sudo npm info grunt-contrib-copy
npm http GET https://registry.npmjs.org/grunt-contrib-copy
npm http 200 https://registry.npmjs.org/grunt-contrib-copy

{ name: 'grunt-contrib-copy',
  description: 'Copy files and folders.',
  'dist-tags': { latest: '0.4.1' },
  versions: 
   [ '0.2.0',
    ... other versions snipped ...
     '0.4.0',
     '0.4.1' ],
  maintainers: 
   [ 'tkellen <tyler@sleekcode.net>',
     'cowboy <cowboy@rj3.net>',
     'shama <kyle@dontkry.com>' ],
  time: 
   { '0.2.0': '2012-09-10T22:26:15.048Z',
    ... other versions snipped ...
     '0.4.0': '2013-02-18T17:24:36.757Z',
     '0.4.1': '2013-03-26T20:08:14.079Z' },
  author: 'Grunt Team (http://gruntjs.com/)',
  repository: 
   { type: 'git',
     url: 'git://github.com/gruntjs/grunt-contrib-copy.git' },
  version: '0.4.1',

  ... other config info snipped ...

  dist: 
   { shasum: 'f0753b40ae21bb706daefb0b299e03cdf5fa9d6e',
     tarball: 'http://registry.npmjs.org/grunt-contrib-copy/-/grunt-contrib-copy-0.4.1.tgz' },
  directories: {} } 
```

我在这里想念什么？为什么 npm 不将此插件更新到当前可用的版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T22:19:15.450

目前在 NPM 中有一个未解决的问题，它谈到了同样的事情。npm update 不会更新 devDependencies 而 npm install 工作正常。

[https://github.com/isaacs/npm/issues/2369](https://github.com/isaacs/npm/issues/2369)

所以我可以推荐的是尝试使用 npm install 代替：

```
$ sudo npm install grunt-contrib-copy --save-dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T04:25:42.503

你可以看看……

```
npm install grunt-dev-update --save-dev 
```

来自[https://npmjs.org/package/grunt-dev-update](https://npmjs.org/package/grunt-dev-update)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T14:05:16.073

`sudo npm update grunt-*`现在似乎工作正常。

问题[https://github.com/isaacs/npm/issues/2369](https://github.com/isaacs/npm/issues/2369)现已关闭。

# java - 使用 poi api 从电子表格中读取时间值

> ID：15710888
> 
> 赞同：10
> 
> 时间：2013-03-29T20:25:03.363
> 
> 标签：java, excel, datetime, apache-poi, spreadsheet

我正在尝试从电子表格中读取日期列和时间列。我可以从工作表中删除日期列，但不能从时间列中删除。

例如，我的工作表将具有以下形式的行：

## 约会时间

2012 年 11 月 2 日 12:15:01

我有以下代码来获取日期列：

```
while(cellIterator.hasNext()) {
            HSSFCell cell = (HSSFCell)cellIterator.next();
            switch(cell.getCellType()){
                case HSSFCell.CELL_TYPE_NUMERIC:
                    HSSFCellStyle style = cell.getCellStyle();
                    if (HSSFDateUtil.isCellDateFormatted(cell))
                    {
                        d = (Date)getDateValue(cell);
                        SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
                        System.out.println(dateFormat.format(d));

                    }

            }
        }  

protected static Object getDateValue(HSSFCell cellDate) 
{

         double numericDateValue = cellDate.getNumericCellValue();
         Date date = HSSFDateUtil.getJavaDate(numericDateValue);
         return date;

} 
```

如您所见，我使用

> HSSFDateUtil.isCellDateFormatted（单元格）

检查单元格中是否有日期值。我想知道我是否可以使用任何函数检查单元格是否具有时间值。

excel 工作表来自外部来源。因此，我将无法对其格式进行任何修改。

现在，我得到了日期列的正确日期值。但是，对于时间列，我得到

> 1899 年 12 月 31 日

作为所有行的结果

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T16:20:18.117

Excel 中日期和时间的快速入门。由于在创建文件格式时很有意义，但现在看起来很混乱，Excel 没有 Date 或 Time 或 DateTime 类型。相反，它拥有的是数字和特殊的格式规则。

这个怎么看？在 Excel 单元格中键入 10.5，然后将其格式化为日期 + 时间。您将在 1900 年 1 月的某个日期获得中午。

因此，当您询问 POI 单元格是否为日期格式时，没有简单的标志/类型可供检查。相反，POI 所能做的就是读取应用于单元格的格式化字符串，并查看它是否看起来像日期一样可疑。

奖励标记 - 尝试存储 1900 年 2 月 28 日，然后添加一个 - Excel 忠实地再现了 1900 年闰年左右的 Lotus 123 错误......

作为一般规则，`DateUtil.isCellDateFormatted(cell)`将为日期单元格、时间单元格和日期时间单元格返回 true。但是，有时您会得到一种非常奇怪的格式，Excel 知道它是日期或时间，但 POI 无法识别为一种格式。对于那些，您仍然可以要求将单元格值作为日期，POI 会转换它。

因此，在您的情况下，如果 POI 说它是日期格式，则将值作为日期获取。现在，查看格式字符串。如果是日期查找，请格式化为日期。日期和时间看？格式化为您的首选日期 + 时间。只有时间？格式为时间？时区？你一定是在笑...

哦，只要您不使用 1900 年左右的实际日期，您基本上可以只说`DateUtil.isCellDateFormatted(cell)`+ value < 100 -> 可能只是一个时间（如果是经过的时间，则 >1）。如果你的号码是一个整数，它可能只是一个日期（但它可能是午夜）。如果它是非整数（ish - 记住 excel 使用浮点数），它可能有一个时间组件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-09T14:52:23.603

这是我获取 POI 单元的“仅限日期”、“仅限时间”或“日期时间”值的粗略尝试

```
 ...
private String getCellValueAsString(Cell poiCell){

    if (poiCell.getCellType()==Cell.CELL_TYPE_NUMERIC && DateUtil.isCellDateFormatted(poiCell)) {
        //get date
        Date date = poiCell.getDateCellValue();

        //set up formatters that will be used below
        SimpleDateFormat formatTime = new SimpleDateFormat("HH:mm:ss");
        SimpleDateFormat formatYearOnly = new SimpleDateFormat("yyyy");

        /*get date year.
        *"Time-only" values have date set to 31-Dec-1899 so if year is "1899"
        * you can assume it is a "time-only" value 
        */
        String dateStamp = formatYearOnly.format(date);

        if (dateStamp.equals("1899")){
            //Return "Time-only" value as String HH:mm:ss
            return formatTime.format(date);
        } else {
            //here you may have a date-only or date-time value

            //get time as String HH:mm:ss 
            String timeStamp =formatTime.format(date);

            if (timeStamp.equals("00:00:00")){
                //if time is 00:00:00 you can assume it is a date only value (but it could be midnight)
                //In this case I'm fine with the default Cell.toString method (returning dd-MMM-yyyy in case of a date value)
                return poiCell.toString();
            } else {
                //return date-time value as "dd-MMM-yyyy HH:mm:ss"
                return poiCell.toString()+" "+timeStamp;
            }
        }
    }

    //use the default Cell.toString method (returning "dd-MMM-yyyy" in case of a date value)
    return poiCell.toString();
} 
```

# mono - Mono 中的多个 dll 存储库/GAC

> ID：15710891
> 
> 赞同：1
> 
> 时间：2013-03-29T20:25:06.247
> 
> 标签：mono

我的 Linux 发行版将 Mono 和一堆相关库安装到 /usr 不幸的是，这个版本的 Mono 有点过时并且不允许安装 F#。因此，我在 /opt 中安装了另一个 Mono

然而，我宁愿不必重新编译安装到 /usr 中的所有库（Gdk# 等）以便在 /opt 中有另一个版本，而是希望 /opt 中的 Mono

1.  如果在 /opt 中找不到，则使用 /usr 中的库进行编译
2.  从 /usr 加载库

第 2 点似乎可以使用 MONO_GAC_PREFIX 来实现。如何达到第 1 点？

# android - 这个异常从何而来？

> ID：15710894
> 
> 赞同：0
> 
> 时间：2013-03-29T20:25:20.277
> 
> 标签：android, exception, service

我正在处理以下问题：我正在为此启动服务：

```
Intent startIntent = new Intent(this, GPSService.class);
startService(startIntent); 
```

服务代码：

```
package com.example.eapp;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.support.v4.app.NotificationCompat;
import android.widget.Toast;

public class GPSService extends Service implements LocationListener {

    public final static int NOTIFICATION_ID = 1;
    private String team = getString(R.string.team);
    private String server = "http://server.com";
    private int updateRate = 0;
    private int updateDistance = 0;

    private NotificationManager notifyManager;
    private LocationManager locationManager;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        final boolean gpsEnabled = getLocationManager().isProviderEnabled(
                LocationManager.GPS_PROVIDER);
        if (gpsEnabled) {
            showIcon();
            requestLocationUpdates();
        } else {
            Toast.makeText(this, R.string.gpsDisabled, Toast.LENGTH_SHORT)
                    .show();
            stopSelf();
        }
        return Service.START_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        getLocationManager().removeUpdates(this);
        notifyManager.cancel(NOTIFICATION_ID);
    }

    @Override
    public void onLocationChanged(Location location) {
        String url = server + "/setUserPosition.php" + "?latitude="
                + location.getLatitude() + "&longitude="
                + location.getLongitude() + "&dir=" + location.getBearing()
                + "&speed=" + location.getSpeed() + "&alt="
                + location.getAltitude() + "&accuracy="
                + location.getAccuracy() + "&user=" + team;
        new GetTask().execute(url);
    }

    @Override
    public void onProviderDisabled(String provider) {
        // stopSelf();
    }

    @Override
    public void onProviderEnabled(String provider) {
        // requestLocationUpdates();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    private void requestLocationUpdates() {
        if (locationManager != null)
            locationManager.removeUpdates(this);

        // get location service
        Criteria crit = new Criteria();
        crit.setAccuracy(Criteria.ACCURACY_FINE);
        String bestProvider = getLocationManager().getBestProvider(crit, true);
        getLocationManager().requestLocationUpdates(bestProvider,
                updateRate * 1000, updateDistance, this);

    }

    private LocationManager getLocationManager() {
        if (this.locationManager == null)
            this.locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        return this.locationManager;
    }

    private void showIcon() {
        notifyManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Intent notificationIntent = new Intent(this, TrackActivity.class);
        PendingIntent pIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);
        Notification notification = new NotificationCompat.Builder(this)
                .setContentTitle(getString(R.string.app_name))
                .setContentText(getString(R.string.status_bar_message, team))
                .setSmallIcon(R.drawable.ic_launcher).setContentIntent(pIntent)
                .build();
        notification.flags |= Notification.FLAG_NO_CLEAR;
        notifyManager.notify(NOTIFICATION_ID, notification);
    }
} 
```

当我尝试启动服务时，出现以下异常：

```
03-29 21:22:21.688: E/AndroidRuntime(17548): FATAL EXCEPTION: main
03-29 21:22:21.688: E/AndroidRuntime(17548): java.lang.RuntimeException: Unable to instantiate service com.example.eapp.GPSService: java.lang.NullPointerException
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2538)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.app.ActivityThread.access$1600(ActivityThread.java:139)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1325)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.os.Looper.loop(Looper.java:154)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.app.ActivityThread.main(ActivityThread.java:4945)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at java.lang.reflect.Method.invokeNative(Native Method)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at java.lang.reflect.Method.invoke(Method.java:511)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at dalvik.system.NativeStart.main(Native Method)
03-29 21:22:21.688: E/AndroidRuntime(17548): Caused by: java.lang.NullPointerException
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.content.Context.getString(Context.java:283)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at com.jhquadrat.rauscher24.GPSService.<init>(GPSService.java:21)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at java.lang.Class.newInstanceImpl(Native Method)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at java.lang.Class.newInstance(Class.java:1319)
03-29 21:22:21.688: E/AndroidRuntime(17548):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2535)
03-29 21:22:21.688: E/AndroidRuntime(17548):    ... 10 more 
```

有谁知道这个异常来自哪里，我该怎么做才能摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:28:43.540

查看最后一个“Caused by:”消息的堆栈跟踪。这是触发整个输出的异常。这是`NullPointerException`通过调用`getString`代码的第 21 行生成的：

```
private String team = getString(R.string.team); 
```

问题是你不能在被要求为你的服务`getString()`之前打电话。`onCreate`在此之前，该框架尚未建立将您的服务代码链接到应用程序资源的结构。只需覆盖`onCreate`并设置`team`在那里。

```
. . .
private String team;
. . .

@Override
public void onCreate() {
    team = getString(R.string.team);
} 
```

# python - 双向链表迭代器python

> ID：15710895
> 
> 赞同：6
> 
> 时间：2013-03-29T20:25:20.243
> 
> 标签：python

我正在构建一个双向链表，我正在努力在**PYTHON**中构建一个双向链表迭代器方法。

到目前为止，这是我的代码

```
class DoubleListNode:
    def __init__(self,data):
        self.data=data
        self.prev = None
        self.next= None

class ListIterator:
    def __init__(self):
        self._current = self.head

    def __iter__(self):
        return self

    def next(self):
        if self.size == 0 :
            raise StopIteration
        else:
            item = self._current.data
            self._current=self._current.next
            return item

class DoublyLinkedList:
    def __init__(self):
        self.head= None
        self.tail= None
        self.size = 0

    def add(self,data):
        newnode= DoubleListNode(data)
        self.size+=1
        if self.head is None:
            self.head = newnode
            self.tail = self.head
        elif data < self.head.data: # before head
            newnode.next = self.head
            self.head.prev= newnode
            self.head= newnode
        elif data > self.tail.data: # at the end
            newnode.prev= self.tail
            self.tail.next= newnode
            self.tail=newnode
        else:
            curNode = self.head
            while curNode is not None and curNode.data < data:
                curNode=curNode.next            
            newnode.next= curNode
            newnode.prev=curNode.prev
            curNode.prev.next= newnode
            curNode.prev=newnode

    def remove(self,data):
        curNode=self.head
        while curNode is not None and curNode.data!= data:
            curNode= curNode.next
        if curNode is not None:
            self.size -= 1
            if curNode is self.head:
                self.head= curNode.next
            else:
                curNode.prev.next=curNode.next
            if curNode is self.tail:
                self.tail=curNode.prev
            else:
                curNode.next.prev=curNode.prev 
```

当我运行测试时，它说`TypeError: iteration over non-sequence`。我做错什么了吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:30:36.110

如发布的那样，代码没有初始化（即*self.head*没有定义）。

但总的来说，你走在正确的轨道上。查看[Python 的*collections.OrderedDict*](http://hg.python.org/cpython/file/80d7545594ca/Lib/collections.py#l22)的源代码，了解一个遍历双向链表的示例。

这是一个简化的示例：

```
class Link:
    def __init__(self, value, prev=None, next=None):
        self.value = value
        self.prev = prev
        self.next = next

    def __iter__(self):
        here = self
        while here:
            yield here.value
            here = here.next

    def __reversed__(self):
        here = self
        while here:
            yield here.value
            here = here.prev

if __name__ == '__main__':
    a = Link('raymond')
    b = Link('rachel', prev=a);  a.next=b
    c = Link('matthew', prev=b); b.next=c

    print 'Forwards:'
    for name in a:
        print name
    print
    print 'Backwards:'
    for name in reversed(c):
        print name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T02:57:17.587

我认为有两件重要的事情需要解决。

首先，你的`DoublyLinkedList`类没有`__iter__`方法。您可能想要创建一个返回实例的`ListIterator`实例。也许您正在尝试手动执行此操作，但这将是正常的方法。

其次，您需要修复您的代码`ListIterator`才能正常工作。目前您的`__init__`方法没有正确初始化事物，并且您的`next`方法尝试访问`size`不存在的成员变量。

这是我认为可行的实现：

```
def ListIterator(object):
    def __init__(self, node):
        self.current = node

    def __iter__(self):
        return self

    def next(self):
        if self.current is None:
            raise StopIteration()

        result = self.current.data
        self.current = self.current.next

        return result

class DoublyLinkedList(object):

    # all your current stuff, plus:

    def __iter__(self):
        return ListIterator(self.head) 
```

附带说明一下，在您当前的代码中，您正在定义没有基础的类。这在 Python 3 中很好（`object`默认情况下将是基础），但在 Python 2 中，这将导致获得“旧式”类。旧式类已被弃用，您会发现某些语言功能无法正常使用它们（但据我所知，迭代中涉及的任何功能都不是）。另一方面，如果您已经在使用 Python 3，那么您需要`__next__`在迭代器类中定义一个方法，而不是`next`（不带下划线）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-12T07:13:53.133

这是双向链表类的示例。

```
class Node:
    def __init__(self, val):
        self.data = val
        self.next = None
        self.prev = None

class LinkedList:
    def __init__(self):
        self.head = None
        self.tail = None
        self.count = 0

    def insert(self, val):
        newNode = Node(val)
        if self.count == 0:
            self.head = newNode
            self.tail = newNode
        else:
            self.head.prev = newNode
            newNode.next = self.head
            self.head = newNode
        self.count += 1

    def insertToEnd(self, val):
        newNode = Node(val)
        if self.count == 0:
            self.head = newNode
            self.tail = newNode
        else:
            self.tail.next = newNode
            newNode.prev = self.tail
            self.tail = newNode
        self.count += 1

    def search(self, val):
        p = self.head
        while p is not None:
            if p.data == val:
                return p
            p = p.next

    def delete(self, val):
        curNode = self.head
        while curNode != None:
            if curNode.data == val:
                if curNode.prev != None:
                    curNode.prev.next = curNode.next
                else:
                    self.head = curNode.next

                if curNode.next != None:
                    curNode.next.prev = curNode.prev
                else:
                    self.tail = curNode.prev

                self.count -= 1

            curNode = curNode.next

    def show(self):
        s = ""
        p = self.head
        while p is not None:
            s += str(p.data) + ' ';
            p = p.next
        print(s + "| count: " + str(self.count)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T21:15:18.737

根据您发布的内容，我可以建议：

```
class ListIterator:
    # other stuff ...
    def __iter__(self):
        while self._current:
            yield self._current.data
            self._current = self._current.next
        self._current = self.head # Reset the current pointer 
```

您不必实现 next()

### 更新

这是一个示例用法：

```
for data in myListIterator:
    print data

# Without reset, the second time around won't work:
for data in myListIterator:
    print data 
```

# svn - svn export 将返回“该版本中不存在”错误

> ID：15710900
> 
> 赞同：0
> 
> 时间：2013-03-29T20:25:55.443
> 
> 标签：svn

我正在尝试以下操作： svn export [http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1](http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1) ./testScript.py/tags/0.0.1

我得到： svn: URL ' [http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1](http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1) ' 不存在

当我这样做时：svn list [http://svn.mySvn.net/scripts/python/testScript.py/tags/](http://svn.mySvn.net/scripts/python/testScript.py/tags/)

我得到文件夹：0.1.1/

问题是什么？一个错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:30:02.220

你提到

当我这样做时：svn list [http://svn.mySvn.net/scripts/python/testScript.py/tags/](http://svn.mySvn.net/scripts/python/testScript.py/tags/)

我得到文件夹： **0.1.1**

但是，您正在尝试访问文件夹**0.0.1**URL 中的

' [http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1](http://svn.mySvn.net/scripts/python/testScript.py/tags/0.0.1) '

您尝试访问的文件夹是 0.1.1 还是 0.0.1？

# wordpress - 修改 WooCommerce for WordPress 特色图片链接

> ID：15710901
> 
> 赞同：0
> 
> 时间：2013-03-29T20:25:56.993
> 
> 标签：wordpress, woocommerce

我需要更改用于 woo 商务的外部产品的链接代码。

这是生成产品图像的代码：

```
<?php
/**
 * Single Product Image
 *
 * @author      WooThemes
 * @package     WooCommerce/Templates
 * @version     2.0.3
 */

if ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly

global $post, $woocommerce;

?>
<div class="images">

    <?php
        if ( has_post_thumbnail() ) {

            $image              = get_the_post_thumbnail( $post->ID, apply_filters( 'single_product_large_thumbnail_size', 'shop_single' ) );
        $image_title        = esc_attr( get_the_title( get_post_thumbnail_id() ) );
        $image_link         = wp_get_attachment_url( get_post_thumbnail_id() );
        $attachment_count   = count( get_children( array( 'post_parent' => $post->ID, 'post_mime_type' => 'image', 'post_type' => 'attachment' ) ) );

        if ( $attachment_count != 1 ) {
            $gallery = '[product-gallery]';
        } else {
            $gallery = '';
        }

        echo apply_filters( 'woocommerce_single_product_image_html', sprintf( '<a href="%s" itemprop="image" class="woocommerce-main-image zoom" title="%s"  rel="prettyPhoto' . $gallery . '">%s</a>', $image_link, $image_title, $image ), $post->ID );

    } else {

        echo apply_filters( 'woocommerce_single_product_image_html', sprintf( '<img src="%s" alt="Placeholder" />', woocommerce_placeholder_img_src() ), $post->ID );

    }
?>

<?php do_action( 'woocommerce_product_thumbnails' ); ?> 
```

所以我只想将图片链接更改为外部链接网址，这样如果有人点击图片，他们将转到外部链接而不是放大图片

执行此操作的代码在添加到购物车代码中，但我不知道如何将其应用于图像：

```
<?php
/**
 * Loop Add to Cart
 *
 * @author      WooThemes
 * @package     WooCommerce/Templates
 * @version     1.6.4
 */

if ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly

global $product;
?>

<?php if ( ! $product->is_in_stock() ) : ?>

    <a href="<?php echo apply_filters( 'out_of_stock_add_to_cart_url', get_permalink( $product->id ) ); ?>" class="button"><?php echo apply_filters( 'out_of_stock_add_to_cart_text', __( 'Read More', 'woocommerce' ) ); ?></a>

<?php else : ?>

<?php
    $link = array(
        'url'   => '',
        'label' => '',
        'class' => ''
    );

    $handler = apply_filters( 'woocommerce_add_to_cart_handler', $product->product_type, $product );

    switch ( $handler ) {
        case "variable" :
            $link['url']    = apply_filters( 'variable_add_to_cart_url', get_permalink( $product->id ) );
            $link['label']  = apply_filters( 'variable_add_to_cart_text', __( 'Select options', 'woocommerce' ) );
        break;
        case "grouped" :
            $link['url']    = apply_filters( 'grouped_add_to_cart_url', get_permalink( $product->id ) );
            $link['label']  = apply_filters( 'grouped_add_to_cart_text', __( 'View options', 'woocommerce' ) );
        break;
        case "external" :
            $link['url']    = apply_filters( 'external_add_to_cart_url', get_permalink( $product->id ) );
            $link['label']  = apply_filters( 'external_add_to_cart_text', __( 'Read More', 'woocommerce' ) );
        break;
        default :
            if ( $product->is_purchasable() ) {
                $link['url']    = apply_filters( 'add_to_cart_url', esc_url( $product->add_to_cart_url() ) );
                $link['label']  = apply_filters( 'add_to_cart_text', __( 'Add to cart', 'woocommerce' ) );
                $link['class']  = apply_filters( 'add_to_cart_class', 'add_to_cart_button' );
            } else {
                $link['url']    = apply_filters( 'not_purchasable_url', get_permalink( $product->id ) );
                $link['label']  = apply_filters( 'not_purchasable_text', __( 'Read More', 'woocommerce' ) );
            }
        break;
    }

    echo apply_filters( 'woocommerce_loop_add_to_cart_link', sprintf('<a href="%s" rel="nofollow" data-product_id="%s" data-product_sku="%s" class="%s button product_type_%s">%s</a>', esc_url( $link['url'] ), esc_attr( $product->id ), esc_attr( $product->get_sku() ), esc_attr( $link['class'] ), esc_attr( $product->product_type ), esc_html( $link['label'] ) ), $product, $link );

?> 
```

抱歉，我是个笨蛋，但我不知道如何获得与“添加到购物车”链接代码相同的链接代码，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:36:07.890

为什么不将 product-image.php 复制到您的主题或模板（这将覆盖 Woocommerce 默认值），然后更改以下内容：

```
 echo apply_filters( 'woocommerce_single_product_image_html', sprintf( '<a href="%s" itemprop="image" class="woocommerce-main-image zoom" title="%s"  rel="prettyPhoto' . $gallery . '">%s</a>', $image_link, $image_title, $image ), $post->ID ); 
```

它说的地方

```
<a href="%s" 
```

替换`%s`为您的链接，或者您可以注册自定义帖子字段并为每个产品设置不同的链接。

如果这就是您想要完成的全部，您可以忽略“添加到购物车”代码。我可能误解了 - 如果还不清楚，请告诉我。

# jquery - 数据表上的固定列

> ID：15710904
> 
> 赞同：0
> 
> 时间：2013-03-29T20:26:04.540
> 
> 标签：jquery, jsp, datatables

我有一个 portlet 视图 jsp，我正在尝试使用 dataTables 和 FixedColumns 插件来修复左侧两列以及用于数据透视表的标题。

我得到了要修复的标题行并能够滚动 Y 轴，但是我无法按照代码的建议将左两列修复到位。

```
 <script  type="text/javascript">
  var pTable ;
 $(document).ready( function () {
    pTable = $('#scheduleTable').dataTable( {
    "sDom": "<'row-fluid'r><'row-fluid't><'row-fluid'<'span6'i><'span6'p>>", 

    "sScrollY": 200,
    "sScrollX": "100%",
    "sScrollXInner": "100%",
    "bScrollCollapse": false,
    "fnInitComplete": function () {
       var fCols =  new FixedColumns( pTable , {
                "iLeftColumns":2,
                "sHeightMatch" : "auto",
                "iRightColumns": 0
                }
        );
      }
});

} );

</script> 
```

我可以通过 Firefox 中的 Firebug 看到 FixColumns 库，但我看不到它是如何或是否应用于数据表的。似乎 FixedColumns 代码被忽略了。关于如何更好地调试或编写代码的任何想法？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T09:06:10.293

@iowatiger08

你试过这样吗：

```
var pTable ;
$(document).ready( function () {
    pTable = $('#scheduleTable').dataTable( {
        "sDom": "<'row-fluid'r><'row-fluid't><'row-fluid'<'span6'i><'span6'p>>", 

        "sScrollY": 200,
        "sScrollX": "100%",
        "sScrollXInner": "100%",
        "bScrollCollapse": false
    });
    new FixedColumns( pTable , {
        "iLeftColumns":2,
        "sHeightMatch" : "auto",
        "iRightColumns": 0
    });

}); 
```

# php - xml数据不能通过json编码

> ID：15710905
> 
> 赞同：0
> 
> 时间：2013-03-29T20:26:07.947
> 
> 标签：php, xml, json

```
 $drivetracker = simplexml_load_file('geot_5980.xml');
    $currentDrive = "init";
    $save = 0;
    $drive = 0;
    $break = 0;
    $display = 0;
    $changeDrive = 0;
    $endhalf = 0;
    $data = array();
    $driveArr = array();

    foreach ($drivetracker->plays->qtr as $qtr):
        foreach ($qtr->play as $myplay):
        $hasball = (string)$myplay['hasball'];
            $play = (string)$myplay['spot'];
            $down = (string)$myplay['down'];
        $togo = (string)$myplay['togo'];
        $type = (string)$myplay['type'];
        $text = (string)$myplay['text'];

            $hasball = mb_convert_encoding($hasball, 'UTF-8');
            $play = mb_convert_encoding($play, 'UTF-8');
            $down = mb_convert_encoding($down, 'UTF-8');
            $togo = mb_convert_encoding($togo, 'UTF-8');
            $type = mb_convert_encoding($type, 'UTF-8');
            $text = mb_convert_encoding($text, 'UTF-8');

        if ($save == 0 && strpos($text, 'start') !== FALSE){
        $save = 1;
        $break = 1;
        } else if ($save == 1 && strpos($text, 'start') !== FALSE) {
        $break = 1;
        } else if ($save == 1 && strpos($text, 'Start') !== FALSE) {
        $break = 1;
        } else if ($save == 1 && strpos($text, 'ball') !== FALSE) {
        $break = 1;
        } else if ($save == 1 && strpos($text, 'Timeout') !== FALSE) {
        $break = 1;
        } else if ($save == 1 && strpos($text, 'and') !== FALSE) {
        $break = 1;
        }

        //ignore all plays when save is false
        if($save == 0){$break = 1;}

        if($break == 0){
        //drive check
        if (strpos($currentDrive, 'init') !== FALSE){        
            $currentDrive = $hasball;
            $drive += 1;
        } else if ($currentDrive != $hasball){  
            $currentDrive = $hasball;
            $drive += 1;
            $display = 1;
        } else if (strpos($text, 'End of half') !== FALSE) { // end of half or game so new drive
            $endhalf = 1;
        }

                if($drive == $driveid){
                    array_push($data, array("text" => $text,                
                    "spot" => $play,
                    "ball" => $hasball,
                    "togo" => $togo,
                    "type" => $type,
                    "drive"=> $drive)
               );
                }

        if($endhalf == 1) {
            $drive += 1;
        }
        }

        //resetter after each iteration
        $break = 0;
        $display = 0;
        $endhalf = 0;
        endforeach;
    endforeach;
    print_r($data);
    echo json_encode($data); 
```

print_r($data) 给出，

```
Array ( [0] => Array ( [text] => Godhigh, R. rush for 2 yards to the GT27 (Canty, W). [spot] => GT25 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [1] => Array ( [text] => Days, S. rush for 5 yards to the GT32 (Woodruff, J;Brown, Ky). [spot] => GT27 [ball] => GT [togo] => 8 [type] => R [drive] => 7 ) [2] => Array ( [text] => Sims, D. rush for 6 yards to the GT38, 1ST DOWN GT (Anunike, K;Sarmiento, S). [spot] => GT32 [ball] => GT [togo] => 3 [type] => R [drive] => 7 ) [3] => Array ( [text] => Godhigh, R. rush for 18 yards to the DU44, 1ST DOWN GT (Cockrell, R). [spot] => GT38 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [4] => Array ( [text] => Lee, V. pass complete to Greene, J. for 5 yards to the DU39 (Foster, T). [spot] => DU44 [ball] => GT [togo] => 10 [type] => P [drive] => 7 ) [5] => Array ( [text] => Laskey, Z. rush for 9 yards to the DU35 (Sink, N). [spot] => DU44 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [6] => Array ( [text] => Laskey, Z. rush for 5 yards to the DU30, 1ST DOWN GT (Canty, W;France, C). [spot] => DU35 [ball] => GT [togo] => 1 [type] => R [drive] => 7 ) [7] => Array ( [text] => Laskey, Z. rush for 4 yards to the DU26 (Sink, N). [spot] => DU30 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [8] => Array ( [text] => Lee, V. rush for 3 yards to the DU23 (Brown, Ky). [spot] => DU26 [ball] => GT [togo] => 6 [type] => R [drive] => 7 ) [9] => Array ( [text] => Laskey, Z. rush for 5 yards to the DU18, 1ST DOWN GT (Canty, W). [spot] => DU23 [ball] => GT [togo] => 3 [type] => R [drive] => 7 ) [10] => Array ( [text] => Smith, O. rush for 8 yards to the DU10 (France, C). [spot] => DU18 [ball] => GT [togo] => 10 [type] => R [drive] => 7 ) [11] => Array ( [text] => Lee, V. rush for 4 yards to the DU6, 1ST DOWN GT (France, C). [spot] => DU10 [ball] => GT [togo] => 2 [type] => R [drive] => 7 ) [12] => Array ( [text] => Laskey, Z. rush for 3 yards to the DU3 (Helton, D;Woodruff, J). [spot] => DU06 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [13] => Array ( [text] => Laskey, Z. rush for no gain to the DU3 (Woodruff, J;Brown, Ky). [spot] => DU03 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [14] => Array ( [text] => Smith, O. rush for 1 yard to the DU2 (France, C). [spot] => DU03 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [15] => Array ( [text] => Lee, V. rush for 2 yards to the DU0, TOUCHDOWN, clock 04:34\. [spot] => DU02 [ball] => GT [togo] => 0 [type] => R [drive] => 7 ) [16] => Array ( [text] => Tanner, C. kick attempt good. [spot] => DU03 [ball] => GT [togo] => 0 [type] => X [drive] => 7 ) [17] => Array ( [text] => Tanner, C. kickoff 51 yards to the DU14, Butler, L return 16 yards to the DU30 (Noble, D.). [spot] => GT35 [ball] => GT [togo] => 0 [type] => K [drive] => 7 ) ) 
```

json_encode($data) 给出空白...

有人知道为什么这个由xml信息组成的php数组不能通过json编码吗？

# ios - 后台线程上的 NSTimer 回调

> ID：15710908
> 
> 赞同：1
> 
> 时间：2013-03-29T20:26:30.137
> 
> 标签：ios, nstimer

我有一个`NSTimer`定义如下：

```
timer = [NSTimer scheduledTimerWithTimeInterval:30
                                         target:self
                                       selector:@selector(fooBar)
                                       userInfo:nil
                                        repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

`fooBar`在这种情况下，我希望它使用后台线程调用回调函数。但是当我检查时，`if ([NSThread mainThread])`我*总是*在主线程上得到它。除了从回调函数中分派线程之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:50:35.547

您正在将计时器添加到主线程。您的回调也将在主线程中。要在后台线程中安排计时器，我认为您需要使用 NSOperation 子类并从操作的*main*方法内部将计时器安排到 [NSRunLoop currentRunLoop] 。

```
#import <Foundation/Foundation.h>

@interface BackgroundTimer : NSOperation
{
    BOOL _done;
}
@end

#import "BackgroundTimer.h"

@implementation BackgroundTimer

-(void) main
{
    if ([self isCancelled])
    {
        return;
    }

    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:30
                                             target:self
                                           selector:@selector(fooBar)
                                           userInfo:nil
                                            repeats:YES];

    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];

    //keep the runloop going as long as needed
    while (!_done && [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                                              beforeDate:[NSDate distantFuture]]);

}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-15T17:13:42.723

如果要在后台线程上运行计时器，最有效的方法是使用调度计时器：

```
@property (nonatomic, strong) dispatch_source_t timer; 
```

and you can then configure this timer to fire every two seconds:

```
- (void)startTimer {
    dispatch_queue_t queue = dispatch_queue_create("com.domain.app.timer", 0);
    self.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
    dispatch_source_set_timer(self.timer, dispatch_walltime(NULL, 0), 2.0 * NSEC_PER_SEC, 0.1 * NSEC_PER_SEC);
    dispatch_source_set_event_handler(self.timer, ^{
        // call whatever you want here
    });
    dispatch_resume(self.timer);
}

- (void)stopTimer {
    dispatch_cancel(self.timer);
    self.timer = nil;
} 
```

# html - CSS隐藏和显示页面调整大小的元素？

> ID：15710909
> 
> 赞同：0
> 
> 时间：2013-03-29T20:26:30.953
> 
> 标签：html, css

这可以通过 CSS 完成吗？我在一个页面上有多个选择，将在移动设备、台式机到平板电脑上查看。一种简单的方法是在页面重新调整大小时隐藏某些不必要的元素。我知道并且我也使用 div 块重新定位元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:31:38.913

正如评论所指出的：使用 CSS 媒体查询是您的答案。

这里有一些很棒的资源的链接。

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

还有可用的 Web 框架可供使用，以及关于如何进行响应式 Web 设计的不同理念。

[http://stuffandnonsense.co.uk/projects/320andup/](http://stuffandnonsense.co.uk/projects/320andup/)

# twitter-bootstrap - 修改 Bootstrap Starter 模板

> ID：15710910
> 
> 赞同：0
> 
> 时间：2013-03-29T20:26:47.873
> 
> 标签：twitter-bootstrap

我想在 Bootstrap Starter Template 的中间添加一个搜索栏，并在右侧添加 2 个占位符。我还想更改导航栏的颜色。

最好的方法是什么？

这是我所指的模板的链接。

[http://twitter.github.com/bootstrap/examples/starter-template.html](http://twitter.github.com/bootstrap/examples/starter-template.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:17:22.450

这取决于你：

例如，如果您想更改导航栏的颜色（对于 webkit-borwser）：在 HTML 文件头中的引导样式链接后添加以下代码：

```
<style>
.navbar-inverse .navbar-inner {
background-image: -webkit-linear-gradient(top, rgb(0, 163, 255), rgb(31, 92, 158));
}
</style> 
```

您可以使用 Chrome 上的 InspectElemets 工具和 FireFox 浏览器上的 FireBug AddOnes 找到引导程序的 css 类和实时编辑。

然后将您的更改添加到`<style></style>`主 css 引导文件之后...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:27:55.343

阅读[文档](http://twitter.github.com/bootstrap/scaffolding.html)学习 Bootstrap 脚手架

对于更改导航栏颜色，如果您不认真修改源文件：

1.  检查元素（铬）
2.  在样式面板中，您将看到它的确切位置。![在此处输入图像描述](../Images/39ff8bdd9f209b40959c477840eb92e2.png)
3.  去编辑源文件。

但是根据这篇文章[Twitter Bootstrap Customization Best Practices](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices)，他们说你应该尽可能避免对源文件进行更改。因此，您可以创建一个包含修改的新 css 文件，然后在 bootstrap.css 之后包含它，而不是编辑源文件

# r - 一个 R 图上的两个 x 轴刻度

> ID：15710914
> 
> 赞同：1
> 
> 时间：2013-03-29T20:27:08.237
> 
> 标签：r, plot

我正在尝试创建一个在 x 轴上显示两个不同时间尺度的图。问题是这两个时间尺度有一个复杂的关系。

我想按一年中的日期和热量单位显示天气数据。热量单位是每天平均温度的累积。有些日子我们得到很多热量单位，有些日子没有那么多。我将样条曲线拟合到一年中的某一天和热量单位之间的关系，并用它来预测每一天的热量单位值。所以我确实有一个很好的数据集，其中包含以下标题：一年中的某一天（day）、热单位（gdd）、温度（temp）、降水量（precip）。

我创建了下图（可能需要在新窗口中打开）：![错误的比例](../Images/e1a7dc985eba734507e2e1c800899466.png)

使用此代码：

```
pdf(file="Climate 2010.pdf", family="Times")
par(mar = c(5,4,4,4) + 0.3)

plot(cobs10$day, cobs10$precip, col="white", type="h", yaxt="n", xaxt="n", ylab="",      
xlab="")
axis(side=3, col="black", labels=FALSE) 
at = axTicks(3)
mtext(side = 3, text = at, at = at, col="black", line = 1, las=0)
mtext("Day of Year", side=3, las=0, line = 3)

par(new=TRUE)
plot(cobs10$gdd, cobs10$temp, type="l", col="red", yaxt="n", ylab="", xlab="Thermal    
Units")
axis(side=2, col='red', labels=FALSE)
at= axTicks(2)
mtext(side=2, text= at, at = at, col = "red", line = 1, las=0)
mtext("Temperature (C)", side=2, las=0, line=3)

par(new=TRUE)
plot(cobs10$gdd, cobs10$precip, type="h", col="blue", yaxt="n", xaxt="n", ylab="",   
xlab="")
axis(side=4, col='blue', labels=FALSE)
at = axTicks(4)
mtext(side = 4, text = at, at = at, col = "blue", line = 1,las=0)
mtext("Precipitation (cm)", side=4, las=0, line = 3)

dev.off() 
```

这正是我想要的，但我意识到这里的 x 轴刻度是线性的，它们不应该是线性的。我通过将我的降水数据设置为白色并在其上书写来放置顶部的 x 轴。看看当我把它变成绿色时会发生什么：

![明显错误的尺度](../Images/d32e80c5d0da61eedf3fa3c071fb68a3.png)

很明显，事情不匹配。 **那么我怎样才能使两个轴相互成比例呢？**

这是我一直在使用的小数据框，通过预测来匹配时间单位： [cobs10.txt](https://www.dropbox.com/s/ysoiut7ma5y8q30/cobs10.txt)。“gdd”是热量单位

编辑：这是一些不使用 par(new=TRUE) 的新代码：

```
par(mar = c(5,4,4,4) + 0.3)
plot(cobs10$gdd, cobs10$temp, type="l", col="red", yaxt="n", xlab="", ylab="",     
ylim=c(-25, 30))
lines(cobs10$gdd, cobs10$precip, type="h", col="blue", yaxt="n", xlab="", ylab="")

axis(side=3, col="black", at=cobs10$gdd, labels=cobs10$day) 
want<-(c(1, 130, 150, 170, 190, 210, 230, 250, 270, 360))
mtext(side = 3, text = want, at = want, col="black", line = 1, las=0)
mtext("Day of Year", side=3, las=0, line = 3)

axis(side=2, col='red', labels=FALSE)
at= axTicks(2)
mtext(side=2, text= at, at = at, col = "red", line = 1, las=0)
mtext("Temperature (C)", side=2, las=0, line=3)

axis(side=4, col='blue', labels=FALSE)
at = axTicks(4)
mtext(side = 4, text = at, at = at, col = "blue", line = 1,las=0)
mtext("Precipitation (cm)", side=4, las=0, line = 3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:59:22.213

使用它几乎从来都不是一个好主意`par(new=TRUE)`，它导致的问题多于解决的问题。

您应该决定要使用哪些 x 轴单位，天或热量单位，并使用该单位创建初始图形，然后使用类似`points`或`lines`使用现有单位向现有图形添加任何其他点或线的函数。然后，您可以使用该`axis`函数添加另一个轴，使用原始单位作为`at`参数，然后转换为其他单位作为标签（您需要决定是否希望刻度的位置与原始单位匹配，或者位于为转换后的单位提供漂亮值的位置）。

# javascript - 不明白如何让轨道 js 与 Foundation 4 一起使用

> ID：15710917
> 
> 赞同：0
> 
> 时间：2013-03-29T20:27:19.397
> 
> 标签：javascript, zurb-foundation

抱歉，我无法理解 Foundation 4 JS 文档 - 如果我使用它：

```
$(document).foundation(); 
```

每件事都很好，但如果我使用这个：

```
$(document).foundation('orbit', {bullets:false}); 
```

子弹从轨道上移开，但其他 javascript 都不起作用（响应式 .toggle-topbar 或自定义表单 #customDropdown）。

我也试过这个：

```
$(document)
  .foundation()
  .foundation('orbit', {bullets: false}); 
```

但是所有的 JS 都可以工作，但子弹没有被移除。

我只是不确定它是如何工作的，抱歉，任何正确方向的指针都将不胜感激。

干杯

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:54:01.427

您建议的答案@CMSCSS虽然对您有用，但通常并不准确，尤其是这部分：

> if you initialize one plugin with options (e.g. Orbit) your have to initialize all the others you want to use or they won't run

The reason that custom styles or behaviors won't work or won't be applied is because of the order in which you initialize foundation and its components. To make everything work, your custom styles/behavior and foundation in general, you should do the customization first then initialize foundation. You can [go to one of my answers](https://stackoverflow.com/questions/15645854/foundation-4-orbit-custom-transition/15649835#15649835) and see how you can make it work. My answer was never accepted but it's a **proven solution**. I do it that way and it works. On a page I have an orbit, custom forms and grid layout and all work using the given technique. Hope that helps you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:24:51.153

因此发现，如果您使用选项（例如 Orbit）初始化一个插件，则必须初始化您要使用的所有其他插件，否则它们将不会像这样运行：

```
$(document)
  .foundation('dropdown topbar forms')
  .foundation('orbit', {bullets: false}); 
```

# java - 输入 2 个 XML 文件以在 JAVA 中生成组合的 CSV 输出

> ID：15710918
> 
> 赞同：0
> 
> 时间：2013-03-29T20:27:20.410
> 
> 标签：java, xml, xpath

我有 2 个 xml 文件（一个大约 50 MB，另一个 120K），可以使用公共字段进行链接。我需要阅读文件，将它们链接到公共字段并以 CSV 格式生成组合输出。有人可以建议使用 JAVA 最有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:34:05.097

这是一个很好的例子（[http://www.developerfusion.com/code/2064/a-simple-way-to-read-an-xml-file-in-java/](http://www.developerfusion.com/code/2064/a-simple-way-to-read-an-xml-file-in-java/)）。您将不得不对其进行一些调整，但示例的重点向您展示了如何访问文件（在您的情况下为文件）然后处理每个父节点，您可以获得子节点并进行处理，然后编写出一个 CSV。如果您需要更多信息或遇到困难，请告诉我。

# magento - 像 Ebay 一样使用 Magento

> ID：15710921
> 
> 赞同：0
> 
> 时间：2013-03-29T20:27:27.957
> 
> 标签：magento, magento-1.7

我想使用像 ebay 这样的 magento 的多商店系统。

我想在一个域上使用商店并使用相同的根类别，但每家商店的每种产品的价格都可能不同，我希望每家商店都支持多语言。

在我开始之前，我很欣赏一些方向，哪种方式是实现这一目标的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:21:52.903

这不能（合理地）在 Magento 中完成，主要是因为无法在商店级别设置定价，并且每个范围（网站/商店）都会对性能造成不小的影响。许多人已经尝试过你的提议。没有一个成功。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T02:18:03.827

实际上有很多 Magento 扩展可以将一个 Magento 站点扩展到一个 Marketplace，这可以让客户申请成为一个卖家，在这个共同的市场上作为卖家销售他们的产品。

Like: [https://www.magentocommerce.com/magento-connect/marketplace.html](https://www.magentocommerce.com/magento-connect/marketplace.html) [https://www.magentocommerce.com/magento-connect/medma-marketplace.html](https://www.magentocommerce.com/magento-connect/medma-marketplace.html) ...

# .net - 资源文件值的更好的工具提示格式？

> ID：15710922
> 
> 赞同：8
> 
> 时间：2013-03-29T20:27:29.190
> 
> 标签：.net, visual-studio-2010, translation, resx

使用资源文件 (*.resx) 实现翻译时，每当您将鼠标悬停在某个键上时，Visual Studio 都会在工具提示中提供基本语言文件的值：

![工具提示截图](../Images/ca3d7d75ba7ab68d4addc77bc35b295a.png)

（我有一个名为“str_message”的条目，值为“Message”）。

这是一个小烦恼，但有没有办法覆盖或更改该工具提示的格式？

它将值直接嵌入并始终附加一个句点（如`String.Format("Looks up a localized string similar to {0}.", ...)`，这没关系，但一目了然，特别是如果您的值更长并且（可能）在末尾包含自己的标点符号。有什么办法我可以将其更改为：`String.Format("Looks up a localized string similar to:\n\n{0}", ...)`，甚至只是显示 .resx 文件中的“评论”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T08:12:42.910

好吧，我认为它是从已创建的`property comments`中提取的。`Resources.Designer.cs`我在 MAC 上，没有安装 Visual Studio 来尝试这个，所以你可以尝试更改评论，看看是否反映了这一点。

例如。你应该在你的`Resources.Designer.cs`

```
 /// <summary>
        ///   Looks up a localized string similar to Message
        /// </summary>
        internal static string str_message {
            get {
                return ResourceManager.GetString("str_message", resourceCulture);
            }
        } 
```

如果没有，那么我不确定它是否可以更改。

@Brduca 说，如果您重新运行工具，对此的更改将被覆盖，因此这可能不是最好的方法，但如果它是唯一的方法，那么您每次重新运行工具时都必须管理重做 .cs 文件

# javascript - 无法在渲染函数中的 Collections.where 方法中引用变量

> ID：15710923
> 
> 赞同：0
> 
> 时间：2013-03-29T20:27:31.707
> 
> 标签：javascript, backbone.js

我在一段主干代码上遇到了一些麻烦。下面的代码与渲染函数有关。我可以检索所有模型。当我尝试在第 1 行标记处使用“Collections.where”方法时，我的麻烦就出现了。如您所见，我已将对象文字传递给渲染函数，但由于某种原因，我无法在第 1 行的 customers.where 方法中引用它。当我给这个方法一个像 45 这样的字面数字时，它就起作用了。有没有办法解决这个问题，所以我可以传递变量引用？

非常感谢

```
render: function(options) {

    var that = this;
    if (options.id) {

        var customers = new Customers();
        customers.fetch({
            success: function (customers) {
   /* #1 --> */ var musketeers = customers.where({musketeerId: options.id});
                console.log(musketeers.length) //doesn't work as options.id is failing on last line
                var template = _.template($('#customer-list-template').html(), {
                    customers: customers.models
                });
                that.$el.html(template);
                console.log(customers.models);
            }
        });

    } else {
        var template = _.template($('#customer-list-template').html(), {});
        that.$el.html(template);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:00:30.780

尽管没有明确记录，但在搜索时[`Collection#where`](http://backbonejs.org/#Collection-where)使用[严格相等 ( `===`) 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)从[精美的源代码](http://backbonejs.org/docs/backbone.html#section-101)：

```
where: function(attrs, first) {
  if (_.isEmpty(attrs)) return first ? void 0 : [];
  return this[first ? 'find' : 'filter'](function(model) {
    for (var key in attrs) {
      if (attrs[key] !== model.get(key)) return false;
    }
    return true;
  });
}, 
```

请注意`attrs[key] !== model.get(key)`回调函数内部，它不会将`10`(a probable `id`value) 和`'10'`(a probable search value 从 an 中提取`<input>`) 视为匹配项。这意味着：

```
customers.where({musketeerId: 10}); 
```

可能会找到一些东西，而：

```
customers.where({musketeerId: '10'}); 
```

惯于。

您可以通过以下方式解决此类问题[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

```
// Way off where you extract values from the `<input>`...
options.id = parseInt($input.val(), 10); 
```

# r - 在纵向数据集中的“ID”内识别最高的“字母”——忽略 B——

> ID：15710926
> 
> 赞同：1
> 
> 时间：2013-03-29T20:27:36.100
> 
> 标签：r

我正在尝试确定纵向数据集中的最高`score`值`ID`。

假设我的数据看起来像这样，

```
dfL <- data.frame(ID = c(1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 9L, 9L, 9L, 9L, 9L, 10L), week = c("baseline", 4L, 6L, "baseline", 6L, 9L, 9L, 12L, "baseline", 4L, 6L, 9L, 12L, "baseline"), score = c(NA, "A", "B", NA, "B", "E", "D", "C", NA, "B", "A", "A", "B", NA)); dfL
   ID     week score
1   1 baseline  <NA>
2   1        4     A
3   1        6     B
4   4 baseline  <NA>
5   4        6     B
6   4        9     E
7   4        9     D
8   4       12     C
9   9 baseline  <NA>
10  9        4     B
11  9        6     A
12  9        9     A
13  9       12     B
14 10 baseline  <NA> 
```

我要做的是找到最高分，用字母表示，忽略 B，然后把这个字母放在`baseline`for each上`ID`。设计的结果是这样的，

```
dfL$hi_score <- c("A", NA, NA, "E", NA, NA, NA, NA, "A", NA, NA, NA, NA, NA);dfL
   ID     week score hi_score
1   1 baseline  <NA>        A
2   1        4     A     <NA>
3   1        6     B     <NA>
4   4 baseline  <NA>        E
5   4        6     B     <NA>
6   4        9     E     <NA>
7   4        9     D     <NA>
8   4       12     C     <NA>
9   9 baseline  <NA>        A
10  9        4     B     <NA>
11  9        6     A     <NA>
12  9        9     A     <NA>
13  9       12     B     <NA>
14 10 baseline  <NA>     <NA> 
```

对于知道如何解决这个问题的人，你能推荐任何有很好的教程来学习如何操作纵向数据的书籍或网页吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:51:28.223

Here's a quick solution.

```
dfL <- data.frame(ID = c(1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 9L, 9L, 9L, 9L, 9L, 10L), week = c("baseline", 4L, 6L, "baseline", 6L, 9L, 9L, 12L, "baseline", 4L, 6L, 9L, 12L, "baseline"), score = c(NA, "A", "B", NA, "B", "E", "D", "C", NA, "B", "A", "A", "B", NA));

#find the highest score per id excluding "B"
highestScore = by(dfL$score, dfL$ID, function(ids){ 
    head(rev(sort(ids[ids != "B"])), 1) 
})

dfL$hi_score = NA
for (id in names(highestScore)){
    newWeek = as.character(highestScore[[id]])
    #to account for weeks with no scores
    newWeek = ifelse(length(newWeek)==0, NA, newWeek)
    #only update the hi scores at the baseline position  
    dfL[which(dfL$ID == id & dfL$week == "baseline"), "hi_score"] = newWeek
}

dfL 
```

As for the tutorials, it's all about practice. Reading the questions and answers on this site is a great start.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:42:02.123

我认为这可以完成工作。

```
dfL <- data.frame(ID = c(1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 9L, 9L, 9L, 9L, 9L, 10L), week = c("baseline", 4L, 6L, "baseline", 6L, 9L, 9L, 12L, "baseline", 4L, 6L, 9L, 12L, "baseline"), score = c(NA, "A", "B", NA, "B", "E", "D", "C", NA, "B", "A", "A", "B", NA)); dfL
library(plyr)

dfL$score <- as.character(dfL$score)
dfL$score <- ifelse(dfL$score!="B",dfL$score,NA)
maxdat <- ddply(dfL,.(ID),summarise,hi_score=max(score,na.rm=TRUE))
finaldat <- merge(dfL, maxdat, by="ID") 
```

如果你真的想在与基线周不同的行中丢失，你可以这样做：

```
finaldat$hi_score<- ifelse(finaldat$week=="baseline", finaldat$hi_score,NA) 
```

If you want to learn more about data transformation you should certainly check Hadley's packages like `reshape2` [http://had.co.nz/reshape/](http://had.co.nz/reshape/) and `plyr` [http://plyr.had.co.nz/](http://plyr.had.co.nz/).

# mysql - MySQL选择不同的计数

> ID：15710930
> 
> 赞同：34
> 
> 时间：2013-03-29T20:28:11.660
> 
> 标签：mysql

```
+----------+----------+
| user_id  | video_id |
+----------+----------+
|        1 |    1     |
|        1 |    1     |
|        1 |    2     |
|        2 |    1     |
|        2 |    2     |
+----------+----------+ 
```

我有一个类似于上面的表设置。我想从我的查询中返回一个总数。

对于每个`user_id`他们需要有一个`DISTINCT video_id`. 因此，上面`user_id = 1`将有 2 个唯一的 video_id，并且`user_id = 2`将有 2 个唯一的 video_id。这将使总数为 4。我不确定组织查询以达到预期结果的最佳方式。

基本上对于每个 user_id，我需要类似的东西，`COUNT(DISTINCT video_id)`

我希望最终结果只是返回所有内容的总数。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-29T20:31:47.630

如果您想获得每个用户的总数，那么您将使用：

```
select user_id, count(distinct video_id)
from data
group by user_id; 
```

然后，如果您想获取总 video_ids，则将其包装在子查询中：

```
select sum(cnt) TotalVideos
from
(
  select user_id, count(distinct video_id) cnt
  from data
  group by user_id
) d 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/26e8e/3)。

第一个查询将为您`2`提供每个结果的结果，`user_id`然后得到所有不同 video_id 的总数，您将计数相加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T20:29:40.057

```
select user_id, count(distinct video_id) from TABLE group by user_id; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-18T00:02:57.290

对于总数...

```
select distinct count(video_id) from Table
where...
group... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-23T09:09:36.113

现在，可以使用以下查询计算唯一 user_id、video_id 对的总数

```
select count(distinct user_id, video_id) from table; 
```

# iphone - 嵌入式tableview ios 6的刷新控制器

> ID：15710934
> 
> 赞同：1
> 
> 时间：2013-03-29T20:28:37.763
> 
> 标签：iphone, ios6, xcode4.5, tableview, uirefreshcontrol

嗨，我目前在 UIViewController 中嵌入了 tableview。在表格视图中，我收集了 json 数据。我希望制作一个刷新控制器，因此每当用户下拉时，都会刷新 json 数据。

我试过下面的代码

```
- (void)viewDidLoad
{
[superviewDidLoad];

UIRefreshControl *refreshControl = [[UIRefreshControl alloc]
init];
[refreshControl addTarget:nil action:@selector(updateArray) forControlEvents:UIControlEventValueChanged];
self.refreshControl = refreshControl;

}

-(void) updateArray{
[self.tableView reloadData];
[self.refreshControl endRefreshing];
} 
```

我收到一条错误消息，提示在 ViewController 中找不到属性 refreshControl。

是因为我使用的是嵌入式 tableview 还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:56:19.980

您正在 viewDidLoad 方法中实例化 UIRefreshControl。updateArray 方法看不到对该对象的引用。您需要将其设为属性或实例变量。

```
@property (strong, nonatomic) UIRefreshControl *refreshControl; 
```

然后代替

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init]; 
```

采用

```
refreshControl = [[UIRefreshControl alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:22:15.477

You can add UIRefreshControl only to UITableViewController and not UIViewController. Check this answer for using UIRefreshControl in UIViewController where UITableViewController is child. [https://stackoverflow.com/a/14148118/1017099](https://stackoverflow.com/a/14148118/1017099)

# angularjs - AngularJS：通过带有数组类型参数（复选框、多选等）的 $resource 发送请求

> ID：15710936
> 
> 赞同：4
> 
> 时间：2013-03-29T20:28:42.707
> 
> 标签：angularjs, angular-resource, angularjs-controller

当我的 GET 参数中有一组复选框（client_status）时，我在尝试使用 AngularJS 中的 $resource 库发送正确序列化的 GET 请求时遇到问题。

这是我现在在控制器中的代码：

```
$scope.filters = {
    client_status: ["CLIENT_STATUS_FORMER", "CLIENT_STATUS_ACTIVE"],
    client_reference: "e"
}

$scope.records = Client.get($scope.filters, function(data){
    ...
} 
```

以上将发送以下 GET 请求：

```
f.json?client_reference=e&client_status=CLIENT_STATUS_FORMER,CLIENT_STATUS_ACTIVE 
```

但是，据我了解，以上似乎不是正确的格式。有人可以在这里指导我吗？以下是我的期望：

```
f.json?client_reference=e&client_status%5B%5D=CLIENT_STATUS_ACTIVE&client_status%5B%5D=CLIENT_STATUS_FORMER 
```

非常感谢您的帮助。

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-13T05:47:21.320

您可以使用 $resource 通过将 client_status 更改为 'client_status[]' 来完成此操作，如下所示：

```
$scope.filters = {
  'client_status[]': ["CLIENT_STATUS_FORMER", "CLIENT_STATUS_ACTIVE"],
  client_reference: "e"
} 
```

我为此创建了一个 plunker：[http ://plnkr.co/edit/QXIaY8XlMUfOy7RNMKKv?p=info](http://plnkr.co/edit/QXIaY8XlMUfOy7RNMKKv?p=info)

我在其中放置了一个虚拟 URL，因此如果您在运行 plunker 时使用 Firebug 或 Chrome 开发工具，您将看到对[http://example.com/api](http://example.com/api)的请求显示正确将 [] 添加到 GET 请求中。

在这个问题的答案中提到了类似的解决方案： [https ://stackoverflow.com/a/18322252/1866964](https://stackoverflow.com/a/18322252/1866964)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:21:56.220

这是我对 $http 提供程序的处理方式：

```
$http({
    url:'api/api.asp',
    method: 'GET',
    params: {
        client_status: ["CLIENT_STATUS_FORMER", "CLIENT_STATUS_ACTIVE"],
        client_reference: "e"
    }
}).then(function (result) {
    $scope.test = result.data;
}); 
```

对服务器的调用变为：

```
api/api.asp?client_reference=e&client_status=%5B%22CLIENT_STATUS_FORMER%22%2C%22CLIENT_STATUS_ACTIVE%22%5D 
```

在服务器上（这里是经典的 asp vbscript）：

```
<%
    Response.Write Request.QueryString("client_status")
%> 
```

其中显示：

```
["CLIENT_STATUS_FORMER","CLIENT_STATUS_ACTIVE"] 
```

您可以将其用作普通数组。

**编辑：**它应该与 $resource 提供者非常相似：

```
$resource('api/api.asp', {}, {
    get: {
        method: 'GET',
        params: {
            client_status: ["CLIENT_STATUS_FORMER", "CLIENT_STATUS_ACTIVE"],
            client_reference: "e"
        }
    }
); 
```

# ruby - 带有循环对象引用的 Ruby 中的垃圾收集

> ID：15710940
> 
> 赞同：11
> 
> 时间：2013-03-29T20:29:00.530
> 
> 标签：ruby, garbage-collection

我在 Ruby 中遇到垃圾收集问题，我认为应该是垃圾收集的对象没有被垃圾收集。

```
require 'ruby-mass'

def find_dependencies(_object_id,_mapped = {})
  mapped = _mapped
  points_to_object = Mass.references(Mass[_object_id])
  ids = points_to_object.keys.map{|x| /\#(\d*)/.match(x).captures.first.to_i}
  mapped[_object_id] = ids

  unmapped = ids - mapped.keys
  unmapped.each do |x|
    new_deps = find_dependencies(x,mapped)
    mapped.merge(new_deps)
  end
  mapped
end 
```

做一些制作对象的事情，并找到相关的对象 ID。`GC.start`， 然后：

```
> find_dependencies(144789180)
=> {144789180=>[61895480, 144786340, 147807540],
 61895480=>[144789180],
 144786340=>[144789180],
 147807540=>[144789180]} 
```

看起来这里有一个循环引用模式，但它都完全包含在这四个对象中，所以 Mark-and-Sweep 收集器应该找到它们并将它们删除。

因此，我的 find_dependencies_function、Mass gem 或 Ruby 的垃圾收集器中存在错误。如何缩小范围以找出问题所在并解决此内存泄漏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T10:17:12.560

Ruby 中的 GC 基本上是这样工作的：

1.  将所有全局对象标记为活动。

2.  扫描对象，垃圾收集，除非父母是活的。

因此，在循环引用的情况下，A 持有 B 持有 A 将被 GC 处理，因为两者都没有被活动对象持有。

根据评论，某些东西必然会在某处抓住对象......或者 Mass 正在捕捉 RangeError 或其他东西......

```
>> a = {}
=> {}
>> a[:a] = a
=> {:a=>{...}}
>> a.object_id
=> 2269556540
>> a = nil
=> nil
>> GC.start
=> nil
>> ObjectSpace._id2ref(2269556540)
RangeError: 0x8746af3c is recycled object
    from (irb):17:in `_id2ref'
    from (irb):17 
```

# maven-3 - Maven 插件错误：测试失败

> ID：15710943
> 
> 赞同：0
> 
> 时间：2013-03-29T20:29:15.603
> 
> 标签：maven-3, neo4j, maven-assembly-plugin, batch-insert

我正在尝试使用 Maven（neo4j 的批量导入器）安装插件。使用

```
mvn clean compile assembly:single 
```

给我一个无法创建目录的错误。我将其更改为：

```
sudo mvn clean compile package assembly:single 
```

它似乎有效，直到由于以下测试而构建失败：

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 27.798s
[INFO] Finished at: Fri Mar 29 16:17:14 EDT 2013
[INFO] Final Memory: 22M/949M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project batch-import: There are test failures.
[ERROR]
[ERROR] Please refer to /u/omusayev/batch-import/batch-import/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

以前从未使用过 Maven，这很神秘。有谁知道这些可能意味着什么，以及如何解决这个问题？如果我可以提供更多信息，请询问。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:48:27.663

您省略了实际的失败测试（在您粘贴的代码段上方），但我猜这在无关紧要的测试中有些奇怪——试试这个：

```
sudo mvn clean compile package assembly:single -Dmaven.test.skip=true 
```

# java - 查询嵌套文档 Elasticsearch

> ID：15710948
> 
> 赞同：2
> 
> 时间：2013-03-29T20:29:30.887
> 
> 标签：java, jakarta-ee, full-text-search, elasticsearch

我正在学习 Elasticsearch，所以我不确定这个查询是否正确。我检查了数据是否已编入索引，但我没有得到任何点击。我究竟做错了什么？这不应该在创作者的名字是史蒂夫的汽车上受到打击吗？

```
builder
.startObject()
    .startObject("car")
        .field("type", "nested")
        .startObject("properties")
            .startObject("creators")
                .field("type", "nested")                    
            .endObject()                
        .endObject()
    .endObject()
.endObject();

{
  "query": {
    "bool": {
      "must": [
        {
          "term": {
            "car.creators.name": "Steve"
          }
        }
      ],
      "must_not": [],
      "should": []
    }
  },
  "from": 0,
  "size": 50,
  "sort": [],
  "facets": {}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T21:10:01.420

首先，为了搜索嵌套字段，您需要使用[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query/)：

```
curl -XDELETE localhost:9200/test
curl -XPUT localhost:9200/test -d '{
    "settings": {
        "index.number_of_shards": 1,
        "index.number_of_replicas": 0
    },
    "mappings": {
            "car": {
                "properties": {
                    "creators" : {
                        "type": "nested",
                        "properties": {
                            "name": {"type":"string"}
                        }
                    }
                }
            }
        }
    }
}
'
curl -XPOST localhost:9200/test/car/1 -d '{
    "creators": {
        "name": "Steve"
    }
}
'
curl -X POST 'http://localhost:9200/test/_refresh'
echo
curl -X GET 'http://localhost:9200/test/car/_search?pretty' -d '    {
    "query": {
        "nested": {
            "path": "creators",
            "query": {
                "bool": {
                    "must": [{
                        "match": {
                            "creators.name": "Steve"
                        }
                    }],
                    "must_not": [],
                    "should": []
                }
            }
        }
    },
    "from": 0,
    "size": 50,
    "sort": [],
    "facets": {}
}
' 
```

如果`car.creators.name`使用标准分析器进行索引，`{"term": {"creators.name": "Steve"}}`则将找不到任何内容，因为单词`Steve`被索引为`steve`并且[术语查询](http://www.elasticsearch.org/guide/reference/query-dsl/term-query/)不执行分析。因此，将其替换为[match query](http://www.elasticsearch.org/guide/reference/query-dsl/match-query/) `{"match": {"creators.name": "Steve"}}`可能会更好。

# opengl - GL_TEXTURE_BUFFER_BINDING OpenGL 未定义

> ID：15710949
> 
> 赞同：2
> 
> 时间：2013-03-29T20:29:39.650
> 
> 标签：opengl

查看 OpenGL 文档，我可以看到 GL_TEXTURE_BUFFER_BINDING，但该符号在我的编译中仍未定义。它不在 gl.h 或 glext.h 中。

有人可以帮我找到吗？

编辑：定义如下：

GL_TEXTURE_BUFFER_OFFSET、GL_TEXTURE_BUFFER_SIZE、GL_TEXTURE_BUFFER_OFFSET_ALIGNMENT

如果您在 glGet 下查看，它肯定[在 OpenGL 网站上进行了描述。](http://www.opengl.org/sdk/docs/man/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:29:37.530

没有`GL_TEXTURE_BUFFER_BINDING`。手册页文档不是规范、权威的文档；这仍然是 OpenGL 规范和相应的 .spec 文件。而且这些都没有这样的枚举。

此后，我向 ARB 提交了一份错误报告，让他们知道他们应该拥有该枚举。因为，就目前而言，无法查询绑定到 的缓冲区对象`GL_TEXTURE_BUFFER`，并且您总是应该能够查询您设置的任何状态。

当然，并不是向 ARB 提交错误报告会导致任何形式的*行动*......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T02:16:23.333

你所追求的枚举是 GL_TEXTURE_BINDING_BUFFER。与其他类似目的的枚举（例如，GL_ARRAY_BUFFER_BINDING）相比，它的命名是落后的。

请参阅[glGet 枚举](https://www.opengl.org/sdk/docs/man3/xhtml/glGet.xml)。

# java - 如何将图像字节传递给 Velocity 模板

> ID：15710953
> 
> 赞同：2
> 
> 时间：2013-03-29T20:29:45.167
> 
> 标签：java, velocity

我需要通过使用此速度模板将图像字节传递给速度模板（我已准备好图像字节）我需要打印图像..

我想在速度模板中访问这些图像字节。如何在速度模板中访问这些字节？

任何人都可以帮我解决这个问题..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-05T13:03:00.897

现在已经有一年了，但如果有人仍然有同样的问题，这是适合您的解决方案。

```
ByteArrayOutputStream outputStreamForBarcode = new ByteArrayOutputStream();
        ImageIO.write(bufferedImage, "jpg", outputStreamForBarcode);
       String imageText = com.sun.org.apache.xerces.internal.impl.dv.util.Base64.encode(outputStreamForBarcode.toByteArray()); 
```

在速度模板中，您可能必须这样称呼它：

```
<img src="data:image/jpg;base64,${generatedImageText}" alt="imagename"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:45:10.467

您可以使用 ImageIO 的 write 方法写入指定所需格式的 ByteArrayOutputStream，然后获取字节数组。

前任：

```
 BufferedImage bimage = ImageIO.read(new File("image.jpg"));
    ByteArrayOutputStream bOut = new ByteArrayOutputStream();
    ImageIO.write(bimage, "JPG", bOut);
    byte[] imageBytes = bOut.toByteArray(); 
```

[链接到 Javadocs](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.OutputStream%29)

# sml - SML 中的高阶函数作业

> ID：15710954
> 
> 赞同：1
> 
> 时间：2013-03-29T20:30:01.453
> 
> 标签：sml, ml, higher-order-functions

我在编写一个函数时遇到了麻烦，该函数将采用函数列表和参数，然后使用传递的参数调用每个函数，返回调用结果的列表。示例：`build [f, g, h] 2`将返回 this，但使用调用的函数和结果而不是调用：`[f(2), g(2), h(2)]` 顺便说一下，使用 SML/NJ。

首先，我尝试了这种模式的许多变体：

```
fun build functions TheArgument = if functions = [] then [] else
    [hd(functions) TheArgument] @ build tl(functions) TheArgument; 
```

但它给出了以下错误：

```
stdIn:2.9-2.36 Error: operator is not a function [equality type required]
  operator: ''Z
  in expression:
    (hd functions) TheArgument
stdIn:1.10-2.70 Error: case object and rules don't agree [tycon mismatch]
  rule domain: ''Z list * 'Y
  object: ('X list -> 'X list) * 'W
  in expression:
    (case (arg,arg)
      of (functions,TheArgument) =>
           if functions = nil then nil else (<exp> :: <exp>) @ <exp> <exp>) 
```

最后，我放弃了，试着做一些研究。我发现了以下问题：[SML/NJ 中的高阶函数](https://stackoverflow.com/questions/9145048/higher-order-functions-in-sml-nj)

我尝试将其重新定义为：

```
fun build [] argument = []
|   build f::rest argument = [f(argument)] @ build rest argument; 
```

但随后编译器吐出这个：

```
stdIn:2.14-2.16 Error: infix operator "::" used without "op" in fun dec
stdIn:1.10-2.67 Error: clauses don't all have same number of patterns
stdIn:2.14-2.16 Error: data constructor :: used without argument in pattern
stdIn:1.10-2.67 Error: types of rules don't agree [tycon mismatch]
  earlier rule(s): 'Z list * 'Y -> 'X list
  this rule: ('W -> 'V) * 'U * 'T * 'W -> 'V list
  in rule:
    (f,_,rest,argument) => (f argument :: nil) @ (build rest) argument 
```

我究竟做错了什么？

我在这里感到非常茫然，我可以处理神秘的 Java/C 错误消息，但这对我来说太陌生了。

ps：该函数不能通过 build(functions, argument) 调用，它需要是两个参数而不是 2 个参数的元组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-21T00:56:37.390

```
stdIn:2.14-2.16 Error: infix operator "::" used without "op" in fun dec 
```

上面这个错误是因为你没有在 f::rest 之外使用过刹车，所以这可以解决为

```
fun build [] argument = []
|   build (f::rest) argument = [f(argument)] @ build rest argument; 
```

它的 sml 解释器无法理解这是列表，因此......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:48:52.467

一种简单的解决方案是使用标准的高阶函数映射：

```
fun build functions arg = map (fn f => f arg) functions; 
```

# javascript - when to call XMLHttpRequest?

> ID：15710955
> 
> 赞同：1
> 
> 时间：2013-03-29T20:30:01.840
> 
> 标签：javascript, google-chrome, xmlhttprequest

Is there a difference in browser behavior between:

```
var xhr = new XMLHttpRequest();
xhr.open('GET',url);
xhr.onload = function(){/*various things*/};
xhr.onerror = function(){/*various things*/};
xhr.send(); 
```

and

```
var xhr = new XMLHttpRequest();
xhr.onload = function(){/*various things*/};
xhr.onerror = function(){/*various things*/};
xhr.open('GET',url);    
xhr.send(); 
```

The reason I ask: I have an uploading process that performs ~500 xhr.sends() (over many GBs of uploads), and I'm seeing that sometimes just one of the .sends() silently fails - no evidence of the request in the servers logs, and no errors shown on the client side. As an experiment I changed my code from the 1st pattern above, to the 2nd pattern, and it *seems* to be 'fixed', but n=1 does not a proof make, so I'm trying to figure whether there is a best practice, or rationale for doing #2 instead of #1\.

It's in Chrome 25.0.1364.172m on Win7\. Perhaps it's a Chrome bug, but before I file that I want to check I'm not missing something obvious.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:30:31.247

Rob W stated "The code you've shown behaves identical in all respects.". No-one contested that, and I have no evidence to the contrary, so I'm accepting that as the answer. Thanks Rob.

# asp.net - Entity Framework 将 Pure Junction Look Up Tables 变成多对多关系

> ID：15710957
> 
> 赞同：1
> 
> 时间：2013-03-29T20:30:26.970
> 
> 标签：asp.net, .net, sql, entity-framework, orm

我最近刚刚开始在一个 ASP.NET 项目中使用实体框架（我最近也刚刚开始使用它，所以我最近有点不知所措）

我有一个有 4 个查找表的数据库。当我将 ADO.Net 实体添加到我的 asp.net 项目时，我起初对我的查找表消失的原因感到困惑。在看了一些之后，我偶然发现了这个：

[实体框架查找表](https://stackoverflow.com/questions/14771501/entity-framework-lookup-table)

并意识到查找没有其他列但外键成为多对多关系的表。这一切都很好。我可能在这里遗漏了一些简单的东西，恐怕可能是这种情况，但现在我迷失了如何查询我最初在遍历查找表时没有问题的数据。

这是我的数据库的通用模型（不是 EDM）

人：PID

组: GID

要求：RID

行动：援助

个人/组：PID GID

组/要求：GID RID

要求/行动：RID AID

人物/动作：PID AID

因此，现在有了 Person、Group、Requirement 和 Action 之间的多对多关系，我不确定如何在我的 ASP.Net Web 表单项目代码中构造语句来遍历这些关系，就像我过去使用查找表一样。

我曾经能够查询 PID = "desired person's id" 的 Person/Group，然后使用 GID 从 Group/Requirement 中查找所有 RID。然后使用 RID 从 Requirement/Action 中查找所有 AID。然后将这些 AID 与 AID 匹配的 Person/Action 中的所有 AID 进行比较，以检查是否满足要求。

如果你告诉我这是我忽略的 ASP.NET 中的基本内容，我不会受到侮辱，但我想如果我在这里问并且得到了回答，那么对于从 SQL 查询切换到实体的任何人来说，至少会有一个简明的答案框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:41:35.513

每当您获得 Person 对象时，您将拥有 Actions 和 Groups 的属性。

组也应该具有 Requirement 属性。

所以我认为你正在寻找的是类似的东西

```
list<int> personIds = {1,2,3};
List<Requirement> requirements = dbContext.Groups.Where(x => x.Person.Count(y => personIds.Contains(y.PersonId) > 0).Select(x => x.Requirements);
List<Action> actions = requirements.Actions; 
```

你也许可以用一种更巧妙的方式来完成这项工作，当我也在 E​​F 工作时，多对多的关系总是有点痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:44:53.720

在 EntityFramework 中，您可以选择添加所谓的“**导航属性**”。例如，让我们看看假设的 Person 类中的这些代码片段。

1 : 1 或 1 : 从 1 的角度来看很多

```
public class Person
{
  public virtual Group Group {get;set;}
} 
```

Many : Many or 1 : Many 从 Many 的角​​度来看

```
public class Person
{
  public virtual ICollection<Group> Groups {get;set;}
} 
```

在多对多关系的情况下，您将使用**EntityFramework FluentAPI**来设置您的 Person 和 Group 类之间的关系。对于 1 对 1 或 1 对多，您可以使用 FluentAPI、**DataAnnotations**或让 EntityFramework 猜测（我相信它会猜测 PropertyName_ID）。

属性声明中的`virtual`意味着我允许 EntityFramework在我实际使用它时**延迟加载**集合，而不是在我查询上下文时。您可以在没有 virtual 关键字的情况下声明导航属性，但不能延迟加载它。

希望这可以帮助您了解导航您的实体。我用粗体表示了一些我认为你应该用谷歌搜索的术语，以帮助进一步了解 EntityFramework 的运作方式。

从您获取给定人员的组所需的所有操作的问题中：

```
var requiredActions = myPerson.Groups.SelectMany(x => x.Requirements).SelectMany(x => x.Actions); 
```

一个人执行的动作是：

```
var performedActions = myPerson.Actions; 
```

这两行都假定您已经设置了适当的导航属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:14:31.053

如前所述，通过多对多关联，您将在实体中找到集合属性。`Person`有`Groups`和`Group`将有`Persons`。

如果您进行如下查询

```
db.Persons.Where(p => p.PID == 1).SelectMany(p => p.Groups) 
```

您将获得所有`Person`1 组。EF 构建了一个查询，该查询将`Person/Group`联结表连接了两次。

综合（或“查询”）语法可能更适合您：

```
from p in db.Persons
from g in p.Groups
where p.PID == 1
select g 
```

现在您的情况可能可以通过这样的查询来解决：

```
from p in db.Persons
from g in p.Groups
from r in g.Requirements
from ra in r.Actions
from pa in p.Actions
where p.PID == 1
where ra.AID == pa.AID
select new { <properties from entities above> } 
```

但我真的不能从你的问题中看出。不过，这应该可以帮助您了解要点。

# java - 在刽子手游戏中揭示人物

> ID：15710961
> 
> 赞同：0
> 
> 时间：2013-03-29T20:30:44.317
> 
> 标签：java, methods, character-properties

所以我应该做的是用户输入一个字母并且程序检查该字母是否是单词的一部分，从那里我无法弄清楚我需要使用什么代码来显示其中一个字母本身就是我到目前为止所拥有的

```
do {            
            System.out.println("Word: " + secretWord.getWordMask());
            //System.out.print("Guesses: " + guesses);
            System.out.print("Enter your guess: ");
            Scanner keyboard = new Scanner(System.in);
            String guess = keyboard.next();

            WordHider revealChar = new WordHider();
            System.out.println(revealChar.revealLetter(guess));

            //if (secretWord.revealLetter(guess));            

    } while (secretWord.isHiddenWordFound()); 
```

这是给我的一个类的另一部分，我必须弄清楚如何将它称为方法并实现它

```
public int revealLetter(String letter) {
    int count = 0;
    String newFoundWord = "";
    if (letter.length() == 1) {
        for (int i = 0; i < secretWord.length(); i++) {
            if ((secretWord.charAt(i) == letter.charAt(0))
                    && (wordMask.charAt(i) == HIDE_CHAR.charAt(0))) {
                count++;
                newFoundWord += letter;
            }
            else {
                newFoundWord += wordMask.charAt(i);
            }
        }
    }
    wordMask = newFoundWord;
    return count; 
```

我的主要问题就在第一部分，我`WordHider revealChar = new WordHider(); System.out.println(revealChar.revealLetter(guess));` 应该做的是揭示我的信，但它绝对不正确，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:59:24.487

看起来您正在显示计数而不是 wordMask。您可以将revealLetter的返回类型更改为String并返回wordMask，或者如果这不是一个选项，请将您的do-while中的代码更改为如下所示：

```
revealChar.revealLetter(guess);
System.out.println(revealChar.getWordMask()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:08:41.077

您的整个程序可以用几行替换：

```
String guessedLetters =""; 
```

然后在你的猜测循环中：

```
guessedLetters += guess;
String display = secretWord.replaceAll("[^" + guessedLetters + "]", "_"); 
```

# javascript - Hightcharts中缺少轴

> ID：15710963
> 
> 赞同：0
> 
> 时间：2013-03-29T20:30:53.167
> 
> 标签：javascript, highcharts

我如何设法在图表中看到第 8 轴*（称为“aufgabenorientiert”）*？

[http://jsfiddle.net/7k8wY/3/](http://jsfiddle.net/7k8wY/3/)

我试图通过以下方式进行管理：

```
series: [{
    name: 'User',
    data: [[0, 29], [2, 25], [4, 24], [6, 22]],
    pointPlacement: 'on'
}] 
```

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:07:43.123

您的代码应如下所示：

```
$(function () {

$('#container').highcharts({

   chart: {
       renderTo: 'disg_model',
       polar: true,
       type: 'line'
   },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Dominant', 'extrovertiert', 'Initiativ', 'menschen-orientiert', 'Stetig', 'introvertiert', 'Gewissenhaft', 'aufgabenorientiert', ''],
        tickmarkPlacement: 'on',
        lineWidth: 0,
        showEmpty: true,
        showLastLabel: true
    },
    yAxis: {
        gridLineInterpolation: 'polygon',
        lineWidth: 0,
        min: 0
    },
    tooltip: {
        shared: true,
        pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y}</b><br/>'
    },
    legend: {
        align: 'right',
        verticalAlign: 'top',
        y: 100,
        layout: 'vertical'
    },
    series: [{
        name: 'Reto Strub',
        data: [[0, 29], [2, 25], [4, 24], [6, 22], [7, 22], [6, 22]],
        pointPlacement: 'on'
    }]

});
}); 
```

这是另一种方式，没有附加点：

```
 series: [{
        name: 'Reto Strub',
        data: [[0, 29], [2, 25], [4, 24], [7, 22]],
        pointPlacement: 'on'
    }] 
```

你有 7 个类别，所以其中一个 serie 点也应该是 7...我希望你理解 :)

这样，它所显示的丢失的...计算类别数和 poligon 上的顶点数；）

萨卢多斯。

# backbone.js - 遵循 Backbone JS 和 CoffeeScript 教程，遇到问题

> ID：15710971
> 
> 赞同：1
> 
> 时间：2013-03-29T20:31:30.190
> 
> 标签：backbone.js, coffeescript

我正在关注本教程：[http ://adamjspooner.github.com/coffeescript-meet-backbonejs/](http://adamjspooner.github.com/coffeescript-meet-backbonejs/)

到目前为止一切正常，除非我进入最后一节 (5) 并实现“交换”功能。发生这种情况时，我会返回“未定义”，而不是应该返回的内容。请参阅教程以了解应该发生的情况。

我发现代码没有差异。

我的如下：（在coffeescript中）

```
jQuery ->
    class Item extends Backbone.Model
        defaults:
            part1:'Hi'
            part2:'Backbone'

    class List extends Backbone.Collection
        model: Item

    class ItemView extends Backbone.View
        tagName: 'li'

        initialize: ->
            _.bindAll @

            @model.bind 'change', @render
            @model.bind 'remove', @unrender

        render: ->
            $(@el).html """
                <span>#{@model.get 'part1'} #{@model.get 'part2'}!</span>
                <span class="swap btn btn-warning">swap</span>
                <span class="delete btn btn-danger">delete</span>
            """
            console.log @model.get 'part 2'
            @

        unrender: ->
            $(@el).remove()

        swap: ->
            @model.set
                part1: @model.get "part 2"
                part2: @model.get "part 1"

        remove: -> 
            @model.destroy()

        events:
            'click .swap' : 'swap'
            'click .delete' : 'remove'

    class ListView extends Backbone.View
        el: $ 'body'

        initialize: ->
            _.bindAll @

            @collection = new List
            @collection.bind 'add', @appendItem

            @counter = 0
            @render()

        render: ->
            $(@el).append "<button class='btn'>Add List Item</button>"
            $(@el).append "<ul></ul>"

        addItem: ->
            @counter++
            item = new Item
            item.set part2: "#{item.get 'part2'} #{@counter}"
            @collection.add item

        appendItem: (item) ->
            item_view = new ItemView model: item
            $('ul').append item_view.render().el

        events: 'click button' : 'addItem'

    Backbone.sync = (method, model, success, error) ->
        success()

    list_view = new ListView 
```

HTML 是：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Backbone App</title>
    <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css">
</head>
<body>
    <div class="content"></div>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone-min.js"></script>
    <script src="app.js"></script>
</body>
</html> 
```

我为我问这个问题的方式道歉，当我单击一个项目的交换按钮时，我无法弄清楚为什么它返回“未定义”。找出这个问题将帮助我更多地学习和理解 Backbone JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:40:30.043

Underscore's `bindAll` does not accept to only have one parameter now. You have to list functions or pass the argument in the bind :

```
@model.bind 'change', @render, this 
```

# android - 通过 Content Provider 使用 Sum 查询

> ID：15710975
> 
> 赞同：1
> 
> 时间：2013-03-29T20:31:47.333
> 
> 标签：android, android-contentprovider, android-sqlite

我想要做的是`SUM`通过我的内容提供商使用查询。到目前为止，我还不能这样做。

我的内容提供商有一个名为信用评分的列。我正在尝试做的是提取数据并将其加在一起以产生特定人的最终分数，即以 john smith 作为名称的每一行，加上信用评分列中列出的金额。

我找到了一些解决方案，但似乎没有任何效果。我在 stackoverflow 上读到，如果没有无法通过内容解析器执行的原始查询，它就无法完成。

这是使用的代码：

```
 ContentProviderClient client =  getContentResolver().acquireContentProviderClient(AUTHORITY);
    SQLiteDatabase dbHandle= ((BorrowMeContentProvider)client.getLocalContentProvider()).getDbHandle();
    Cursor cursor = dbHandle.rawQuery("SELECT sum("+BorrowMeTable.COLUMN_CREDIT_SCORE+") FROM "+BorrowMeTable.DATABASE_TABLE +" WHERE "+BorrowMeTable.COLUMN_NAME+"= \""+ nameOfThePersonString+"\"", null);
     cursor.moveToFirst();
     int cnt =  cursor.getInt(0);
     cursor.close();
     cursor.deactivate();
     client.release(); 
```

使用此方法时出现错误，我认为这与`getDbHandle()`- 此方法必须在我的内容提供程序中创建（因为它不存在）但它返回 null。

这是我得到的错误：

```
03-29 16:16:24.369: E/AndroidRuntime(28802): FATAL EXCEPTION: main
03-29 16:16:24.369: E/AndroidRuntime(28802): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fthatnoise.borrow.me/com.fthatnoise.borrow.me.PersonRecord}: java.lang.NullPointerException
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.os.Looper.loop(Looper.java:137)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at java.lang.reflect.Method.invokeNative(Native Method)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at java.lang.reflect.Method.invoke(Method.java:511)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at dalvik.system.NativeStart.main(Native Method)
03-29 16:16:24.369: E/AndroidRuntime(28802): Caused by: java.lang.NullPointerException
03-29 16:16:24.369: E/AndroidRuntime(28802):    at com.fthatnoise.borrow.me.PersonRecord.fillData(PersonRecord.java:90)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at com.fthatnoise.borrow.me.PersonRecord.onCreate(PersonRecord.java:52)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.Activity.performCreate(Activity.java:5048)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-29 16:16:24.369: E/AndroidRuntime(28802):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052) 
```

我是在正确的轨道上还是远离基地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:37:29.793

在查询中的 FROM 之前添加 AS creditcardtotal

# c# - Visual Studio + Mono：找不到“Gtk”

> ID：15710977
> 
> 赞同：2
> 
> 时间：2013-03-29T20:31:53.330
> 
> 标签：c#, visual-studio-2012, mono

我刚刚为 Windows 安装了[mono 3](http://www.go-mono.com/mono-downloads/download.html)，现在我打开了一个使用“Gtk”的项目。我正在尝试编译它，但它告诉我找不到“Gtk”，我相当肯定安装了单声道，但显然没有设置路径。

我如何告诉 VS2012 所有单声道的东西在哪里？

* * *

我已经降级到单声道 2。还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:49:14.727

你能检查`C:\Program Files (x86)\GtkSharp\2.12\lib\gtk-sharp-2.0\`你的机器上是否存在吗？如果没有，您需要按照@jpobst 指出的那样安装 GTK# 运行时。

获取每一位（以及更多）的最简单方法是下载 Xamarin 2.0

[http://xamarin.com/download](http://xamarin.com/download)

并安装。之后，您可以在 Xamarin Studio 中创建一个新的 GTK# 2.0 项目，然后在 Visual Studio 中打开相同的项目并进行编译。（在我的机器上验证。）

Xamarin 安装可确保您需要的一切都在那里。我认为 Mono 3.0 安装程序不会这样做。

然后，您可以比较您现在尝试在 Visual Studio 中打开的项目和 Xamarin Studio 创建的新 GTK# 项目，看看是否有明显的问题阻止它被编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:18:17.933

如果您想将 GTK# 与 .NET 一起使用（即：不是 Mono），您需要从[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)下载“Gtk# for .NET”，而不是适用于 Windows 的单声道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:39:59.110

我建议您使用`MonoDevelop`IDE 并使用单声道框架进行编译。看看这个：[在 Centos 6 上安装最新的单声道](https://stackoverflow.com/questions/11782096)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T08:45:14.040

[单声道运行时窗口](http://i.stack.imgur.com/CCWH6.jpg)>嗯，它对我有用，但在我的路上。

> 我们知道，-pkg 不起作用，所以我在一个批处理文件中手动使用 -r 引用库路径。
> 
> 例如，用 gtk > hellogtk1run.bat 编写 hello.cs 程序。
> 
> mcs hellogtk1.cs -r:"C:\Program Files (x86)\Mono\lib\gtk-sharp-2.0\pango-sharp.dll"
> 
> -r:"C:\Program Files (x86)\Mono\lib\gtk-sharp-2.0\atk-sharp.dll"
> 
> -r:"C:\Program Files (x86)\Mono\lib\gtk-sharp-2.0\gdk-sharp.dll"
> 
> -r:"C:\Program Files (x86)\Mono\lib\gtk-sharp-2.0\gtk-sharp.dll"
> 
> -r:"C:\Program Files (x86)\Mono\lib\gtk-sharp-2.0\glib-sharp.dll"
> 
> ，为 .bat 文件中的每个 dll 放置新行的链接符号。

# javascript - 试图在我认为是变量的范围内创建 Javascript 链接？

> ID：15710978
> 
> 赞同：1
> 
> 时间：2013-03-29T20:31:57.530
> 
> 标签：javascript, html, variables, hyperlink

我下载了一个主题，似乎遇到了一些麻烦。有问题的页面在这里 - [http://pureearthsoaps.com/test.html](http://pureearthsoaps.com/test.html)

每个产品都是使用（如果我解释正确的话）Javascript 变量创建的。见下文：

```
 1: {
name: 'Bar Soap',
scent: 'Cucumber &amp; Oatmeal, Patchouli, Peppermint, Frankincense, Holiday, Coffee &amp; Hazelnut, Apple, and more',
size: '1 bar',
price: '3.<span class="small">95</span>',
short_desc: 'An innovative and moisturizing way to keep shower time fun.',
desc: 'Since we all love being happy naked, why not keep it that way? Treat yourself to scrumptious skincare with Naked Bar, an innovative and moisturizing way to keep shower time fun.'}, 
```

我在这里输入信息，它对应于这里的代码：

```
 __ += '<li id="wine-list-'+i+'">'+wines[i].name+',</li>';
  full += '<div id="wine-info-'+i+'" class="wine-info transition-05"><h2>'+wines[i].name+'</h2><h4></h4>'+
    '<div class="line"></div>'+
    '<div class="price">$'+wines[i].price+'</div>'+
    '<div class="lbl"><label>Scent:</label><span>'+wines[i].scent+'</span></div>'+
    '<div class="lbl"><label>Size:</label><span>'+wines[i].size+'</span></div>'+
    '<div class="img"></div>'+
    '<div class="bottle-x"></div>'+
    '<div class="desc">'+wines[i].desc+'</div>'+
    '<div class="order">'+wines[i].order+'</div>'+
  '</div>'; 
```

目前，显示在该产品页面上的“立即订购”按钮出现在每个产品上，但无法链接。上面“order”的div类是在一个程序员朋友的建议下添加的；它使按钮出现，但我们无法使其工作。我在第一个代码块的“desc”行下面添加了这个，但没有成功：

```
 order: '<a  onClick="location.href='http://google.com'" href="http://google.com"></a>' 
```

所以……救命！我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:22:35.870

其他人已经解决了报价的直接问题。我将解决您代码中的一些潜在问题，这将有助于防止将来出现错误。

**首先**

```
var obj = {} 
```

这是一个 JavaScript 对象，特别是一个对象字面量。

**第二**

JavaScript 变量不能以数字开头或只能是数字，因此`1 = {};`无效

通常，您需要的是对象数组，而不是将您的对象分配给一个数字并遍历它们。所以...

```
var wines = [{name:'wine', blah:'', ......}, {name:'second wine', ....}] 
```

这样，您可以在获取的同时循环遍历它们`wines[i]`，并且您的代码将是有效的:)

**第三**

尝试减少 js 写入页面的 html 数量通常是一个好习惯。

为什么？调试起来更容易，因为 innerHTML/.html() 可以包含许多语句。而且它也更快。

尝试将元素放在页面上并使用 and 写入它们`getElementById`，`textContent`或者使用 jquery 的选择器 and `text()`or `html()`。如果需要隐藏它们，请在 html/css 中将它们设置为隐藏，稍后使用 js 修改该 css 属性或类。

**最后**

内联 onClicks 是如此 90 年代。当你开始双弦交叉时，实际上会让你头疼。

使用 jQuery 的`on()`方法或

```
document.getElementById('elem').onclick = function(){
   //Code here
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:45:46.170

引号引起了您的问题。

```
{
  name: 'Bar Soap',
  scent: 'Cucumber &amp; Oatmeal, Patchouli, Peppermint, Frankincense, Holiday, Coffee &amp; Hazelnut, Apple, and more',
  size: '1 bar',
  price: '3.<span class="small">95</span>',
  short_desc: 'An innovative and moisturizing way to keep shower time fun.',
  desc: 'Since we all love being happy naked, why not keep it that way? Treat yourself to scrumptious skincare with Naked Bar, an innovative and moisturizing way to keep shower time fun.',
  order_url: 'http://google.com'
} 
```

然后，做这样的事情：

```
for (var i in wines) {
      _ += '<li id="wines-'+i+'"><h2>'+wines[i].name+'</h2>'+
        '<div class="lbl"><label>Scent:</label><span>'+wines[i].scent+'</span></div>'+
        '<div class="lbl"><label>Size:</label><span>'+wines[i].size+'</span></div>'+
        '<div class="img"></div>'+
        '<div class="line"></div>'+
        '<div class="short-desc">'+wines[i].short_desc+'</div>'+
        '<div class="price">$'+wines[i].price+'</div>'+
      '</li>';
      __ += '<li id="wine-list-'+i+'">'+wines[i].name+',</li>';
      full += '<div id="wine-info-'+i+'" class="wine-info transition-05"><h2>'+wines[i].name+'</h2><h4></h4>'+
        '<div class="line"></div>'+
        '<div class="price">$'+wines[i].price+'</div>'+
        '<div class="lbl"><label>Scent:</label><span>'+wines[i].scent+'</span></div>'+
        '<div class="lbl"><label>Size:</label><span>'+wines[i].size+'</span></div>'+
        '<div class="img"></div>'+
        '<div class="bottle-x"></div>'+
        '<div class="desc">'+wines[i].desc+'</div>'+
        '<a href="'+wines[i].order_url+'"><div class="order"></div></a>'+
      '</div>';
    } 
```

另外，不要忘记为所有商品定义“订单”属性。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:41:03.030

你的引号有问题。如果你有一个href，为什么你需要一个onClick？尝试这个：

```
order: '<a href="http://google.com">order now</a>' 
```

或这个

```
order : '<a href="#" onClick="location.href=\"http://google.com\"">order now</a>' 
```

我刚刚看了你的网站，似乎该`order`属性不存在。这是一个例子，它应该看起来像这样。还要注意花括号的位置，`oder`线必须在里面。

```
1: {
  name: 'Bar Soap',
  scent: 'Cucumber &amp; Oatmeal, Patchouli, Peppermint, Frankincense, Holiday, Coffee     &amp; Hazelnut, Apple, and more',
  size: '1 bar',
  price: '3.<span class="small">95</span>',
  short_desc: 'An innovative and moisturizing way to keep shower time fun.',
  desc: 'Since we all love being happy naked, why not keep it that way? Treat yourself  to scrumptious skincare with Naked Bar, an innovative and moisturizing way to keep shower time fun.',
  order: '<a href="/order.php">order now</a>'
}, 
```

# c++ - iostream 库未包含在代码块中

> ID：15710979
> 
> 赞同：0
> 
> 时间：2013-03-29T20:32:11.463
> 
> 标签：c++, mingw, codeblocks, iostream

我目前正在为我的 C++ 编程尝试代码块，但我无法编译它，我过去没有遇到过这个问题，而且我最近才开发它，我徒劳地在谷歌上搜索了一个解决方案和我最接近的是[Code::Blocks 编译错误](https://stackoverflow.com/questions/9403907/codeblocks-compilation-errors) ，它没有解决我的问题，我已经尝试了很多次来卸载和安装 codeblocks 和 mingw。错误是：

```
1|fatal error: iostream: No such file or directory|
||=== Build finished: 1 errors, 0 warnings (0 minutes, 0 seconds) ===| 
```

在我的设置中，它只是一个基本的 hello world 程序，我将 c++ 编译器列为 mingw32-g++.exe。我一直在努力让这个工作好几天，请帮忙。

```
#include <iostream> 
using namespace std; 
int main()
{
    cout << "hello world\n"; 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T12:56:53.093

我遇到了同样的问题，这是我将文件保存为 ac 文件（例如 HelloWorld.c）。当我将文件更改为 HelloWorld.cpp 时开始工作。因此，将文件名更改为 .cpp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:23:30.693

您是否放错了 iostream 文件？

也许你可以用另一个编译器确认这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T10:13:02.750

```
/* Using standard C++ calling (note that you should use namespace std for cout or add using namespace std;) */ 

#include <iostream>

int main()
{
    std::cout<<"Hello World!\n";
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T12:10:37.057

是的，我解决了这个问题，只需使用像 g++ 这样的 c++ 编译器`g++ your project -o test` ，然后`./test` 你的项目 = 你的文本代码的名称，如果你使用 g++ 并且你的文件在桌面上，那么还有 1 个注释转到文件管理器并转到桌面并在桌面上单击右键（文件管理器）并单击打开终端，然后繁荣完成它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-25T21:24:11.973

我也有相同的“#include<iostream>”没有这样的文件或目录错误！但在我的情况下，这可能是扩展问题。Codeblocks 将其保存为 .c（默认为扩展名）。只需按程序名称后跟 cpp 保存程序即可。像“Myprogram.cpp”。希望这可以帮助.....

# google-apps-script - 无法创建谷歌应用脚 本

> ID：15710983
> 
> 赞同：2
> 
> 时间：2013-03-29T20:32:36.917
> 
> 标签：google-apps-script

我正在尝试为网络（谷歌网站）创建一个谷歌脚本文件。创建文件并在其中写入后，行会跳到右侧，我无法再对其进行编辑。

如果我使用其他帐户没有问题。我也有谷歌帐户（没有谷歌应用程序。）

我可以写的代码数量有限制吗？因为我过去编写的谷歌应用程序脚本文件很少，它们也有同样的问题。

有谁知道可能是什么或我如何找到问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T20:39:42.747

> ```
> Is there a limit of codes I can write? 
> ```

不可以，但是您可以使用的资源数量是有限制的。要找出您自己的限制，您可以查看[https://code.google.com/apis/console](https://code.google.com/apis/console)。

# c# - 指定服务器端代码的相对路径

> ID：15710984
> 
> 赞同：1
> 
> 时间：2013-03-29T20:32:47.260
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

在 HTML 中，我知道我可以指定相对路径，例如：

`<a href="~/temp/Somecontent.xxx" />`

我也想为我的服务器端代码设置相对路径。例如：

`File.Exists("../myBusinessLibrary/Bin/Debug/myBusinessLibrary.dll");//where this is a library that supports the web project`

找不到该文件。我看着`Environment.CurrentDirectory`并得到：

`"C:\\Program Files (x86)\\IIS Express"`

我不认为我的程序集被复制到这个位置。有没有办法设置与服务器端代码一起使用的相对路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T20:37:05.983

您可以使用以下代码

```
HttpContext.Current.Server.MapPath("relativepath goes here") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:37:41.770

看看 Server.MapPath(string relativePath)：

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath(v=vs.100).aspx)

此方法将相对路径映射到可在 File.Exists() 方法中使用的物理路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T20:38:27.783

您可以使用`Server.MapPath`

```
var path = Server.MapPath("/myBusinessLibrary/Bin/Debug/myBusinessLibrary.dll");

File.Exists(path); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T20:45:07.773

您可以尝试使用 Server.Mappath 看看会得到什么。以下是其信息的链接：

[http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx)

# java - SWT：定期更新 GUI

> ID：15710992
> 
> 赞同：0
> 
> 时间：2013-03-29T20:33:25.253
> 
> 标签：java, multithreading, user-interface, swt

我有一个 SWT GUI，它显示从数据库中获取的列表。我想要它做的是定期更新 GUI，这将涉及清除 shell 中的所有内容并再次运行 populateList() 方法。我为此尝试了几种建议的策略，但 GUI 永远不会更新。我最近的尝试是使用 display.asyncexec 创建一个线程来处理这个问题。这似乎给了我一个无效的线程访问错误。

这是我的代码：

```
package display;
import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;

import object_models.Request;
import util.RestClient.RequestMethod;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.Font;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.layout.RowData;
import org.eclipse.swt.layout.RowLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import util.RestClient;

public class StoragePickupDisplay {

    protected Shell shell;

    private ArrayList<Request> pendingRequests;
    /**
     * Launch the application.
     * @param args
     */
    public static void main(String[] args) {
        try {
            StoragePickupDisplay window = new StoragePickupDisplay();
            window.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Open the window.
     * @throws InterruptedException 
     */
    public void open() throws InterruptedException {
        Display display = Display.getDefault();
        createContents();
        populateList();
        shell.open();
        shell.layout();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }

        display.asyncExec(new Runnable() {
            public void run() {
              populateList();
            }
          });
        Thread.sleep(1000);

        }
    }

    /**
     * Create contents of the window.
     */
    protected void createContents() {
        shell = new Shell();
        //shell.setMaximized(true);

        //shell.setFullScreen(true);
        shell.setText("Request Pickup");
        shell.setMaximized(true);

        GridLayout gridLayout= new GridLayout(1,false);

        shell.setLayout(gridLayout);

    }
    protected void populateList(){

        pendingRequests=new ArrayList<Request>();

        RestClient client = new RestClient("http://XXXXXX:8080/StorageWebService/rest/operations/getPendingRequests");

        try {
            client.Execute(RequestMethod.GET);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String response = client.getResponse();

        pendingRequests= parseResponse(response);

        for(Request request: pendingRequests){
            Composite row = new Composite(shell,SWT.NONE);

            GridLayout gridLayout = new GridLayout(4,true);
            gridLayout.marginTop=5;
            row.setLayout(gridLayout);
            row.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

            Composite left = new Composite(row,SWT.NONE);
            left.setLayout(new GridLayout(2,false));
            left.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

            Label label = new Label(left,SWT.LEFT);
            label.setText(""+request.getId());

            label.setFont(new Font(Display.getDefault(),"Arial",30, SWT.NONE));
            label.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, false, false));

            label = new Label(left,SWT.LEFT);
            label.setText(request.getNickname());
            label.setFont(new Font(Display.getDefault(),"Arial",30, SWT.NONE));
            label.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

            label = new Label(row,SWT.LEFT);
            label.setText(""+request.getNumberCompleted()+" of "+request.getNumberItems()+" Picked");
            label.setFont(new Font(Display.getDefault(),"Arial",30, SWT.NONE));
            label.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

            label = new Label(row,SWT.LEFT);
            label.setText("Estimated Wait Time:");
            label.setFont(new Font(Display.getDefault(),"Arial",30, SWT.NONE));
            label.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

            Label separator = new Label(shell, SWT.HORIZONTAL|SWT.SEPARATOR|SWT.PUSH);

            GridData gridData = new GridData(SWT.FILL, SWT.BEGINNING, true, false);
            //gridData.horizontalSpan=4;
            separator.setLayoutData(gridData);

        }

    }
    public ArrayList<Request> parseResponse(String response){
        ArrayList<Request> list = new ArrayList<Request>();
        try {

            XmlPullParser parser = XmlPullParserFactory.newInstance().newPullParser();
            parser.setInput(new StringReader(response));

            int eventType = parser.getEventType();

            Request curRequest = new Request();

            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {
                    String name = parser.getName();
                    if (name.equalsIgnoreCase("id")) {
                        String text = parser.nextText();
                        curRequest.setId(Integer.parseInt(text));

                    }
                    if (name.equalsIgnoreCase("nickname")) {
                        String text = parser.nextText();
                        curRequest.setNickname(text);

                    }
                    if (name.equalsIgnoreCase("numberCompleted")) {
                        String text = parser.nextText();
                        curRequest.setNumberCompleted(Integer.parseInt(text));

                    }
                    if (name.equalsIgnoreCase("numberItems")) {
                        String text = parser.nextText();
                        curRequest.setNumberItems(Integer.parseInt(text));

                    }
                    if (name.equalsIgnoreCase("status")) {
                        String text = parser.nextText();
                        curRequest.setStatus(Integer.parseInt(text));

                    }

                }

                if (eventType == XmlPullParser.END_TAG) {
                    if (parser.getName().equalsIgnoreCase("Request")) {
                        list.add(curRequest);
                        curRequest = new Request();
                    }
                }
                eventType = parser.next();
            }

        } catch (XmlPullParserException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }

        return list;

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:26:29.487

正如 Liam15 已经提到的，您应该启动一个不同的线程。否则，您将阻止 UI，它会变得无响应。线程应处理数据获取，然后同步或异步更新 UI。

这是一个示例，您的 open() 方法可能如下所示：

```
public void open() throws InterruptedException {
    Display display = Display.getDefault();
    createContents();
    shell.open();

    Thread updateThread = new Thread() {
        public void run() {
            while (true) {
                final ArrayList<Request> pendingRequests = getPendingRequests();
                Display.getDefault().syncExec(new Runnable() {

                    @Override
                    public void run() {
                        populateList(pendingRequests);
                    }
                });

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    };
    // background thread
    updateThread.setDaemon(true);
    updateThread.start();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
} 
```

为了清除 shell 并更新 shell 内容，您可以将以下代码行添加到您的 populateList() 方法。

在方法的开头添加：

```
Control[] oldControls = shell.getChildren(); 
```

在方法的最后添加：

```
for (Control oldControl : oldControls) {
    oldControl.dispose();
}
shell.layout(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:30:20.160

使用下面的方法`Display`

```
 public void timerExec (int milliseconds, Runnable runnable) 
```

在运行事件循环之前执行它。

```
ex:
 display.timerExec(30000, new Runnable() {
            public void run() {
              populateList();
            }
          });

 while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:48:15.757

您可以运行一个带有循环的单独线程，该循环定期重新打开 GUI 或仅更新一些信息。

# android - Android：在 Fragment 中刷新 GridView

> ID：15710996
> 
> 赞同：1
> 
> 时间：2013-03-29T20:33:44.063
> 
> 标签：android

如果我的问题似乎很常见，我很抱歉。我有谷歌，有很多结果，但我都不能申请。

我有一个使用`GridView layout`. 我也`BaseAdapter`用于我的gridview。

当数据发生变化时，我会打电话，`gridView.invalidateViews();`但 gridview 不会用新数据重绘。

```
gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                               getTable(position).setStatus("busy");   // change data 
                               gridView.invalidateViews(); // and redraw
                } 
```

或者，我做另一种方式：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.waiter_view_fragment, container, false);

    gridView = (GridView) (rootView).findViewById(R.id.waiterGridView);
    gridView.setAdapter(new ImageAdapterHost(this, getActivity())); 
        // Add this line here
        ((BaseAdapter)gridView.getAdapter()).notifyDataSetChanged();
    } 
```

答案还是一样的。我的gridview没有重绘，虽然当我测试数据时，数据确实发生了变化，但不要更新我的gridview。

请教我如何在数据更改后重绘gridview片段。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:47:20.113

将您的适配器作为局部变量保存在 Fragment 中，向您的 Fragment 添加一个调用`my_adapter_variable.notifyDataSetChanged()`. 更改数据后，找到您的片段并调用该方法。像这样的东西对我有用：

```
public void gotLessonDetails(LessonDetailsEvent event)
{
[...]
    for (String tag: tabs) {
        StudentListFragment f = (StudentListFragment) getSupportFragmentManager().findFragmentByTag(tag);
        if (f != null) {
            f.refreshAdapter();
        }
     }
[...]
} 
```

# mysql - 选择具有 > 2 个小数位的行

> ID：15710997
> 
> 赞同：7
> 
> 时间：2013-03-29T20:33:49.623
> 
> 标签：mysql, select, decimal

如何选择值超过 2 位小数的行？

例如，我们有这些值：

```
3.14
5.999
9.555
8.55 
```

我只想选择这些值：

```
5.999
9.555 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T20:37:35.780

您可以将`_`其用作单字符通配符`LIKE`

```
LIKE '%.___' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T20:37:12.730

对不起，我已经找到了答案：

SELECT * FROM `table`WHERE LENGTH(SUBSTR( `column`,INSTR( `column`,"."))) >3

# android - Admob AdView 提供大量日志和错误

> ID：15710998
> 
> 赞同：0
> 
> 时间：2013-03-29T20:33:50.217
> 
> 标签：android, logging, admob

我在我的 Android 应用程序项目中使用了 admob，它给了我大量的日志错误和警告。

布局：

```
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"

    ads:adSize="BANNER"
    ads:adUnitId="..."
    ads:loadAdOnCreate="true"
    ads:testDevices="..." >
</com.google.ads.AdView> 
```

我使用以下代码在我的 onCreate 中非常简单地初始化广告：

```
adView = (AdView) findViewById(R.id.adView);
AdRequest ar = new AdRequest();
ar.addTestDevice("my device id here");
adView.loadAd(ar); 
```

我的日志被以下所有内容淹没：

```
03-29 21:24:08.010: V/chromium(10419): external/chromium/net/host_resolver_helper/host_resolver_helper.cc:66: [0329/212408:INFO:host_resolver_helper.cc(66)] DNSPreResolver::Init got hostprovider:0x00000000
03-29 21:24:08.010: V/chromium(10419): external/chromium/net/base/host_resolver_impl.cc:1510: [0329/212408:INFO:host_resolver_impl.cc(1510)] HostResolverImpl::SetPreresolver preresolver:0x51120230
03-29 21:24:08.010: D/(10419): dl error message Cannot load library: load_library[1118]: Library 'libtcpfinaggr.so' not found
03-29 21:24:08.010: D/Socket_Pool(10419): Failed to create TCP Fin Aggregation interface.
03-29 21:24:08.010: D/Socket_Pool(10419): netstack: CloseUnusedSockets is ON
03-29 21:24:08.010: D/Socket_Pool(10419): netstack: system net.statistics value: 0
03-29 21:24:08.010: D/Socket_Pool(10419): Failed to create TCP Fin Aggregation interface.
03-29 21:24:08.010: D/Socket_Pool(10419): netstack: CloseUnusedSockets is ON
03-29 21:24:08.010: D/Socket_Pool(10419): netstack: system net.statistics value: 0
03-29 21:24:08.015: D/(10419): external/chromium/net/http/http_getzip_factory.cc: Failed to construct GETzip manager, didn't find the library!
03-29 21:24:08.020: D/netstack(10419): netstack: Request Priority is ON
03-29 21:24:08.025: V/chromium(10419): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:52: [0329/212408:INFO:hostres_plugin_bridge.cc(52)] StatHubCreateHostResPlugin initializing...
03-29 21:24:08.025: V/chromium(10419): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:68: [0329/212408:INFO:hostres_plugin_bridge.cc(68)] netstack: Failed to open plugin:libdnshostprio.so
03-29 21:24:08.025: V/chromium(10419): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:73: [0329/212408:INFO:hostres_plugin_bridge.cc(73)] netstack: Failed to find symbols in plugin: libdnshostprio.so
03-29 21:24:08.025: E/chromium(10419): external/chromium/net/disk_cache/stat_hub.cc:216: [0329/212408:ERROR:stat_hub.cc(216)] StatHub::Init - App com.twinone.control isn't supported.
03-29 21:24:08.025: V/chromium(10419): external/chromium/net/disk_cache/hostres_plugin_bridge.cc:73: [0329/212408:INFO:hostres_plugin_bridge.cc(73)] netstack: Failed to find symbols in plugin: libdnshostprio.so
03-29 21:24:08.025: E/chromium(10419): external/chromium/net/disk_cache/stat_hub.cc:216: [0329/212408:ERROR:stat_hub.cc(216)] StatHub::Init - App com.twinone.control isn't supported. 
```

我有几个问题：

*   当然：我做错了什么？
*   为什么选择**chromium**，它与 AdMob 有什么关系？
*   为什么有这么多日志？不能只有 1 个错误或堆栈跟踪吗？
*   为什么抱怨找不到图书馆？

（顺便说一句，我尝试将 jar 链接`GoogleAdMobAdsSdk-6.3.1.jar`为引用库，但这不起作用，所以我直接将 jar 复制到 libs 文件夹中。）

广告显示正确（测试广告和真实广告），但大量日志让我很紧张。

* * *

**编辑**

也许与在 SGS2 上使用 CM10-nightly 有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:04:18.020

我已经在朋友的设备上对其进行了测试，它没有给出任何错误。我认为是 CyanogenMod。

# java - Java：尽管字符串是不变的，但如何“改变”字符串？

> ID：15710999
> 
> 赞同：3
> 
> 时间：2013-03-29T20:33:55.397
> 
> 标签：java, string

我正在开发一个 API 作为学生爱好项目的一部分，并且我正在使用一个 url，可以在其中添加/减去不同的选项来更改接收到的信息。我知道字符串是不可变的，这使得巧妙地处理事情变得有些挑战。我想出了一些杂乱无章的方法来解决它，但我想知道是否有标准方法。我计划有单选按钮（未分配给按钮组；想要所有排列），这将允许我“包含”、“添加”和“排除”选项。

因此，这里是`z?s=GOOG&t=7m&z=l&q=l&p=e50,m50&a=ss,sfs,vm,w14`用于与 YahooFinance API 交互的字符串。所以，假设我有一些像这样的变量：

```
 String options="z?s=GOOG&t=7m&z=l&q=l&p=e50,m50&a=ss,sfs,vm,w14" 
```

现在，考虑说的部分`p=e50,m50`。假设我有三个单选按钮`50`, `100`，`200`我想勾选/关闭，这样我就有一个`p=e50,m50,e100,m100,e200,m200`所有按钮都打开的字符串，以及所有可能的其他组合；即`100`关闭，它看起来像：`p=e50,m50,e200,m200`。

有什么想法吗？我也想最终对其他值（`ss,sfs`等）做同样的事情，但是，让我们从移动平均线开始。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T20:37:59.860

使用 a`StringBuilder`和`insert`方法。

[Java 文档页面](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T20:38:59.027

字符串是不可变的，因为一旦在 JVM 中创建了字符串的特定实例，就无法更改其内容。也就是说，这并不意味着您不能即时构建适合您需求的字符串。您可以使用简单的连接并执行类似...

```
String options="z?s=GOOG&t=7m&z=l&q=l&p=" + eOption + ",m50&a=ss,sfs,vm,w14"; 
```

从技术上讲，这会创建三个 String 实例，并使用 StringBuffer 将它们全部附加在一起。您可以自己使用 StringBuffer API，并在要添加选项的地方调用 .append() 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T20:38:18.767

通常，您将字符串分成几部分，然后组装一个新字符串。然后，调用者可以保持对旧字符串和新字符串的引用，或者简单地丢弃旧字符串。

举个愚蠢的例子：

```
String hairySally = "hairy,sally";
String hairyFredSally = insertFred(hairySally);

String insertFred( String s) {
    String[] parts = s.split(",");
    return parts[0] + ",fred," + parts[1];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T20:44:48.680

您正在寻找的是[格式化字符串](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)，例如：

```
String querystringFormat="z?s=GOOG&t=7m&z=l&q=l&p=%s&a=ss,sfs,vm,w14" 
```

注意`e50,m50`已经替换为`%s`，表示这部分字符串的格式字符串代码将替换为另一个字符串。

然后，你会做任何你做的事情来建立你的参数，并做：

```
String params = "e50,m50,e100,m100,e200,m200", 
Formatter formatter = new Formatter();
formatter.format(querystringFormat, params);
String query = formatter.toString(); 
```

使用格式字符串还有很多其他选项和细节，但这是基本思想。好的部分是你的字符串结构中不变的部分是清晰的，你只替换需要替换的部分。

它还将教您如何使用 C 和 C++ `printf`，这绝不是一件坏事 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T20:36:54.137

使用可变字符串只会导致代码混乱。您需要的是一种数据结构，可以轻松更新参数，然后遍历该数据结构以从中创建字符串。我会将这些参数存储在地图中并编写一个函数，该函数将通过遍历地图条目从地图中创建字符串。

因此，您可以将参数存储在地图中，例如：

```
Map<String,String> map = new LinkedHashMap<>();
map.put("s", "GOOG");
map.put("t", "7m"); 
```

并使用以下内容生成参数字符串：

```
public String createParameterString(Map<String, String> map) {
    StringBuilder builder = new StringBuilder("");
    for (Map.Entry mapEntry : map.entrySet()) {
        if (builder.length() != 0) builder.append("&");
        builder.append(mapEntry.key());
        builder.append("=")
        builder.append(mapEntry.value());
    }
    return builder.toString();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T20:53:30.503

为什么要*改变*字符串？你为什么要从字符串的角度来解决这个问题？这个问题与文本无关。这个字符序列是什么

```
?s=GOOG&t=7m&z=l&q=l&p=e50,m50&a=ss,sfs,vm,w14 
```

表示它只是一个映射（也称为字典），即键值对的集合，根据[URI 编码方案](http://en.wikipedia.org/wiki/Percent-encoding)序列化并附加到 HTTP 请求的 URL。您不想跟踪序列化的部分，特别是因为 URI 只接受一小部分字符，所以如果您根据字符串进行推理，您最终可能会得到无效的代码。

您需要两种方法：一种将 Map 序列化为 URI 格式，另一种将 Map 从其序列化形式中取回。请注意，Yahoo 协议使用逗号将多个值分配给同一个键。在序列化和反序列化时，您也必须考虑到这一点。

我为你写[了一个要点](https://gist.github.com/RaffaeleSgarro/5273970)。它没有经过彻底的测试，但你明白了。